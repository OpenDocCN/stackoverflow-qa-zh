# StackOverflow 问答 10808000-10808999

# android - 从 Eclipse 运行我的 android 应用程序大约 10 次后，收到 INSTALL_FAILED_INSUFFICIENT_STORAGE 错误

> ID：10808001
> 
> 赞同：2
> 
> 时间：2012-05-29T23:12:14.813
> 
> 标签：android

在我运行程序大约 10 次后，我的 android 项目将不会加载安装应用程序文件。

我得到一个

> [2012-05-29 17:03:33 - TellaFortune] 安装错误：INSTALL_FAILED_INSUFFICIENT_STORAGE 错误。

如果我关闭仿真程序并再次运行该应用程序，它将再运行大约 10 次。该项目不做任何事情，只是显示一个带有一堆按钮的屏幕

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <LinearLayout
        android:id="@+id/mainLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"></LinearLayout>

    <LinearLayout
        android:id="@+id/mainLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/background"
        android:orientation="vertical">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="hi"
            android:textSize="74px" />

        <ImageButton
            android:id="@+id/askaquastion"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/askaquastion" />

        <ImageButton
            android:id="@+id/askaquastion"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/askaquastion" />

        <ImageButton
            android:id="@+id/askaquastion"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/askaquastion" />

        <ImageButton
            android:id="@+id/askaquastion"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/askaquastion" />

        <ImageButton
            android:id="@+id/askaquastion"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/askaquastion" />

        <ImageButton
            android:id="@+id/askaquastion"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/askaquastion" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T23:18:33.010

卸载某些应用程序，您的手机空间不足并重新插入 USB 数据线

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:17:17.190

你可能需要增加安卓模拟器的内存容量。请尝试以下步骤：

1.  右键单击您的 Android 项目的根目录，转到“**运行方式**”，然后转到“**运行配置**”
2.  在左侧树中找到“Android Application”节点，然后选择您的项目并转到窗口右侧的“ **Target ”选项卡，向下查找“** **Additional Emulator Command Line Options** ”字段（有时您会需要使窗口更大）
3.  最后在此处粘贴“ **-partition-size 1024** ”。单击应用，然后单击运行以使用您的模拟器。

# android - ArrayAdapter 显示 Onyl One 记录

> ID：10808003
> 
> 赞同：1
> 
> 时间：2012-05-29T23:12:34.173
> 
> 标签：android

下午好，

我之前用其他适配器（如 SimpleAdapter）问过这个问题，但简单适配器的解决方案不适用于 ArrayAdapter。在 SimpleAdapter 中，我得到了屏幕宽度和高度，然后将其传递给了数据行的 RelativeLayout。效果是一次只显示一个填满整个屏幕的记录。静态数据很好，但现在我想使用可变数据。简而言之，我真的不想传递高度和宽度。我的 xml 布局使用 dip 所以屏幕尺寸可以随心所欲地改变。我真正追求的是一种方法来控制一次只对一条记录的 getView 调用。

无论如何，使用 SimpleAdapter 的解决方法，我认为像以前一样传递高度和宽度会起作用，但由于某种原因，这次我遇到了一个我无法弄清楚的错误。这是设置宽度和高度的代码：

```
RelativeLayout.LayoutParams szParms = new RelativeLayout.LayoutParams(mWidth, mHeight);
vw_BigRow.setLayoutParams(szParms); 
```

高度和宽度在其他地方确定，并且在我测试过的所有设备上都是准确的。不太确定还要发布什么，所以只要告诉我，我就会将该代码/信息添加到问题中。

```
E/AndroidRuntime(404): FATAL EXCEPTION: main
E/AndroidRuntime(404): java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams 
```

**编辑：** 正如已经正确指出的那样，我的错误发生在 CastClassException 但是我仍然没有正确完成分配，因为我继续收到错误。我尝试在活动中使用以下内容设置高度/宽度：

```
AbsListView.LayoutParams szParms = new AbsListView.LayoutParams(mWidth, mHeight);
lstvw_LiftData.setLayoutParams(szParms);

E/AndroidRuntime(1886): FATAL EXCEPTION: main
E/AndroidRuntime(1886): java.lang.ClassCastException: android.widget.AbsListView$LayoutParams 
```

和

```
ListView.LayoutParams szParms = new ListView.LayoutParams(mWidth, mHeight);
lstvw_LiftData.setLayoutParams(szParms);

E/AndroidRuntime(1886): FATAL EXCEPTION: main
E/AndroidRuntime(1886): java.lang.ClassCastException: android.widget.AbsListView$LayoutParams 
```

lstvw_LiftData 是一个有效的参考而不是空值。

在 ArrayAdapter 的 getView() 覆盖内，我还尝试设置具有相同结果的值 @Override public View getView(int position, View convertView, ViewGroup parent) {...}

我唯一能做的就是这个，然后是一对，不是全部，但我的一些元素忽略了它们的布局定位并直接到底部。

```
View vw_BigRow = convertView;

if (vw_BigRow == null) 
{
    LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    vw_BigRow = inflater.inflate(R.layout.liftdatalayout, null);
}

vw_BigRow.setMinimumHeight(mHeight);
vw_BigRow.setMinimumWidth(mWidth); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:30:38.377

1.如果你想`call to just one record at a time`，只需控制你实现的适配器的getCount返回1。

2.`java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams`例外是因为要添加到列表视图的视图应该使用**AbsListView.LayoutParams**而不是其他 LayoutParams，例如`RelativeLayout$LayoutParams`.

**编辑：**

请参阅以下`getView`google 推荐的代码。

```
/**
 * Make a view to hold each row.
 *
 * @see android.widget.ListAdapter#getView(int, android.view.View,
 *      android.view.ViewGroup)
 */
public View getView(int position, View convertView, ViewGroup parent) {
    // A ViewHolder keeps references to children views to avoid unneccessary calls
    // to findViewById() on each row.
    ViewHolder holder;

    // When convertView is not null, we can reuse it directly, there is no need
    // to reinflate it. We only inflate a new View when the convertView supplied
    // by ListView is null.
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.list_item_icon_text, null);

        // Creates a ViewHolder and store references to the two children views
        // we want to bind data to.
        holder = new ViewHolder();
        holder.text = (TextView) convertView.findViewById(R.id.text);
        holder.icon = (ImageView) convertView.findViewById(R.id.icon);

        convertView.setTag(holder);
    } else {
        // Get the ViewHolder back to get fast access to the TextView
        // and the ImageView.
        holder = (ViewHolder) convertView.getTag();
    }

    // Bind the data efficiently with the holder.
    holder.text.setText(DATA[position]);
    holder.icon.setImageBitmap((position & 1) == 1 ? mIcon1 : mIcon2);

    return convertView;
}

static class ViewHolder {
    TextView text;
    ImageView icon;
} 
```

# facebook - Facebook 应用程序如何在用户墙上发帖

> ID：10808007
> 
> 赞同：1
> 
> 时间：2012-05-29T23:13:00.837
> 
> 标签：facebook, facebook-like, facebook-wall

我开发了一个 Facebook 应用程序：[http](http://ek2012spel.startpagina.nl/) ://ek2012spel.startpagina.nl/ 。我之前和最后一次开发了一个选项，只要你得分，就可以在墙上发布消息。

但我注意到 Facebook 改变了它的政策，以防止垃圾邮件到墙上。我为此向他们致敬。所以我想尝试别的东西。

*   包括一个赞按钮。
*   只有按下“赞”按钮的人才能在他们的信息流中获得新闻更新。
*   新闻更新不会自动进行。我会告诉他们新一轮已经开始或类似的事情。

我很确定这是（或至少是）可能的。问题是；如何？

*   我应该为我的应用创建一个单独的 Facebook 用户吗？
*   一个新页面（或者称为标签）？并将我的应用程序上的“赞”按钮链接到该页面？

子问题：我当前的“喜欢”按钮链接到（旧）URL。URL 重定向到新的。我有没有机会在不丢失所有喜欢的情况下更改 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T23:45:08.790

该文档指的是旧的应用配置文件页面 - 这些页面已在 2 月被删除 - 我已更新该文档以显示为您的应用创建页面的当前方式（该选项现在位于应用设置的“高级”选项卡中.)

根据您上面所说的，您应该执行以下操作之一：

*   为应用程序创建一个页面并让用户喜欢它，然后使用该页面为游戏用户发布更新
*   [对用户请求](https://developers.facebook.com/docs/requests/#app_to_user)使用应用程序来提醒用户发生了一些事情 - 这将增加用户书签中的一个计数器，以便您的应用程序将他们带回它
*   从 API 获取用户的邮箱地址（需要`email` [权限](https://developers.facebook.com/docs/authentication/permissions/)），直接发邮件给他们。

每次您有新闻要分享时自动发布到用户的时间线 (/USER_ID/feed) 会导致垃圾邮件过滤器确实非常快地关闭您的应用程序（请记住，这将显示给他们所有的朋友作为“来自”该用户的消息)

# python - 如何在条件句中使用 OR、AND？

> ID：10808008
> 
> 赞同：12
> 
> 时间：2012-05-29T23:13:12.720
> 
> 标签：python, conditional

我发现自己很多次，我需要全部或至少一个等于某物的东西，我会写这样的东西：

```
if a==1 and b==1:
   do something 
```

或者

```
if a==1 or b==1:
   do something 
```

如果事情的数量很少，它可以，但它仍然不优雅。那么，有没有更好的方法来处理大量的事情，做上面的事情？谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-29T23:16:02.473

**选项1：任何/全部**

对于一般情况，请查看[`any`](http://docs.python.org/library/functions.html#any)and [`all`](http://docs.python.org/library/functions.html#all)：

```
if all(x == 1 for x in a, b, c, d):

if any(x == 1 for x in a, b, c, d): 
```

您还可以使用任何可迭代的：

```
if any(x == 1 for x in states): 
```

**选项 2 - 链接和输入**

对于您的第一个示例，您可以使用布尔运算符链接：

```
if a == b == c == d == 1: 
```

对于您的第二个示例，您可以使用`in`：

```
if 1 in states: 
```

**选项 3：没有谓词的任何/全部**

如果您只关心该值是否真实，则可以进一步简化：

```
if any(flags):

if all(flags): 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T23:17:56.960

看一下这个

```
if all(x >= 2 for x in (A, B, C, D)): 
```

其中 A,B,C,D 都是变量...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T23:30:43.450

我喜欢这种形式，因为它在 Python 中易于理解

```
def cond(t,v):
    return t == v

a=1
b=3    
tests=[(a,1),(b,2)]

print any(cond(t,v) for t,v in tests)  # eq to OR  
print all(cond(t,v) for t,v in tests)  # eq to AND 
```

印刷：

```
True
False 
```

然后`cond()`可以根据需要变得复杂。

您可以提供用户可调用或使用[操作员模块](http://docs.python.org/library/operator.html)以获得更大的灵活性：

```
import operator

def condOP(t,v,op=operator.eq):
    return op(t,v)

a=1
b=3    
tests=[(a,1,operator.eq),(b,2,operator.gt)]

print any(condOP(*t) for t in tests)  # eq to OR  
print all(condOP(*t) for t in tests)  # eq to AND 
```

或者更简单：

```
tests=[(a,1,operator.eq),(b,2,operator.gt)]

print any(func(t,v) for t,v,func in tests)  # eq to OR  
print all(func(t,v) for t,v,func in tests)  # eq to AND 
```

# java - AutoCompleteTextView：如何更改布局中的 2 个字符串

> ID：10808009
> 
> 赞同：0
> 
> 时间：2012-05-29T23:13:27.090
> 
> 标签：java, android, textview, android-arrayadapter, autocompletetextview

我正在为涉及数据库的 Android 应用程序制作搜索引擎。我目前的实现如下：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.result_item, R.id.txtVerbName, verbs);
AutoCompleteTextView txtSearch = (AutoCompleteTextView) findViewById(R.id.txtSearch);
txtSearch.setAdapter(adapter); 
```

但是，您会注意到我已将“txtVerbName”（这是一个 TextView）作为文本视图，它的值随着附加的数组（“动词”）而改变。我怎样才能使这项工作，以便我可以将一个值附加到 txtVerbName ，然后还将一个不同的值附加到同一布局中的另一个 textview？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:18:31.857

使用自定义适配器来完成此操作：

```
public class AutoCompleteCursorAdapter extends CursorAdapter implements Filterable {

private TextView txtVerbName, txtVerbDefinition;
private Cursor mCursor;
private Context mContext;
private final LayoutInflater mInflater;

public AutoCompleteCursorAdapter(Context context, Cursor c) {
    super(context, c, true);
    mInflater = LayoutInflater.from(context);
    mContext = context;
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    TextView txtVerbName = (TextView) view.findViewById(R.id.txtVerbName);
    TextView txtVerbDefinition = (TextView) view.findViewById(R.id.txtVerbDefinition);

    txtVerbName.setText(cursor.getString(1));
    txtVerbDefinition.setText(cursor.getString(2));
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    final View view = mInflater.inflate(R.layout.result_item, parent, false);
    return view;
}

@Override
public Cursor runQueryOnBackgroundThread(CharSequence constraint) {
    // this is how you query for suggestions
    if (getFilterQueryProvider() != null) {
        return getFilterQueryProvider().runQuery(constraint);
    }
    if (constraint != null) {

        DBAdapter db = new DBAdapter(mContext);
        db.open();

        mCursor = db.getVerbsContaining(constraint);

        mCursor.moveToFirst();
        db.close();
    }
    return mCursor;
} 
```

}

# javascript - Knockout 中的可重用计算字段

> ID：10808011
> 
> 赞同：2
> 
> 时间：2012-05-29T23:13:34.753
> 
> 标签：javascript, mvvm, knockout.js, computed-observable

我有一个使用映射插件的 Knockout Viewmodel。映射 JSON 对象后，我创建了一些计算值，如下所示：

```
/* viewmodel setup and mapping */

myViewModel
    .formattedGiftAmount = ko.computed({
        read: function () {
            return parseInt(this.giftAmount(), 10).formatMoney();                        
        }
        , write: function (value) {                        
            this.giftAmount(value.unformatMoney());
        }
        , owner: this        
    })
    .formattedGoal = ko.computed({
        read: function () {
            return parseInt(this.goalAmount(), 10).formatMoney();                        
        }
        , write: function (value) {                        
            this.goalAmount(value.unformatMoney());
        }
        , owner: this        
}); 
```

不要太担心代码的作用，我更关心的是模式。如您所见，这两个属性`formattedGiftAmount()`具有`formattedGoal()`几乎相同的对象来定义它们。唯一的区别是它们修改了哪些属性。我可能会有更多这样的实例，所以我想知道是否有任何方法可以使它更可重用。我可以想象做类似的事情`this[prop]()`，但我不太清楚如何将它注入对象并让它工作。

PS：我已经看到[了，](https://stackoverflow.com/questions/6706281/knockoutjs-can-we-create-a-dependentobservable-function-with-a-parameter)但它仍然不能完全满足我的要求。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T08:43:45.847

您还可以[修改 fn](http://knockoutjs.com/documentation/fn.html)以向您的 ko.observable 添加一个函数来创建它，这将允许您以描述性方式（[小提琴](http://jsfiddle.net/jgoemat/nwJvy/)）在构造函数中添加属性：

```
ko.observable.fn.formatAsMoney = function() {
    var base = this;
    return ko.computed({
        read: function() {
            return formatMoney(parseFloat(base()));
        },
        write: function(newValue) {
            base(unformatMoney(newValue));
        }
    });
};

function ViewModel() {
    var self = this;
    self.number = ko.observable(10.5);
    self.money = self.number.formatAsMoney();
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T23:25:32.763

您可以向视图模型添加一个函数，该函数基于未格式化的属性创建格式化的属性：

```
myViewModel.addFormattedProperty = function(formattedName, unformattedName) {
    this[formattedName] = ko.computed({
        read: function() {
            return parseInt(this[unformattedName](), 10).formatMoney();                        
        },
        write: function(value) {
            this[unformattedName](value.unformatMoney());

        },
        owner: this
    });
}; 
```

然后你可以为你的属性调用它：

```
myViewModel.addFormattedProperty('formattedGiftAmount', 'giftAmount');
myViewModel.addFormattedProperty('formattedGoalAmount', 'goalAmount'); 
```

# ios - soundcloud iOS 加密

> ID：10808012
> 
> 赞同：3
> 
> 时间：2012-05-29T23:13:57.543
> 
> 标签：ios, encryption, soundcloud

我使用[https://github.com/soundcloud/CocoaSoundCloudAPI中提到的库开发了一个与 SoundCloud 集成的 iPad 应用程序](https://github.com/soundcloud/CocoaSoundCloudAPI)

我的应用需要能够使用这些库将声音发布到 SoundCloud。这些库都作为子模块包含在我的 git repo 中，使用

```
git submodule add git://github.com/nxtbgthng/OAuth2Client.git
git submodule add git://github.com/soundcloud/CocoaSoundCloudAPI.git
git submodule add git://github.com/nxtbgthng/JSONKit.git
git submodule add git://github.com/nxtbgthng/OHAttributedLabel.git
git submodule add git://github.com/soundcloud/CocoaSoundCloudUI.git 
```

现在我的问题是，当我将应用程序提交到应用商店时，我应该使用哪些加密设置？SoundCloud 是否只进行身份验证，然后以明文、未加密的方式发送数据？或者数据在发送到 SoundCloud 之前是否已加密？

这很重要，因为苹果威胁要对未经授权使用加密的应用程序“严厉处罚”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:40:38.997

当您使用上述库时，您可以确保所有通信都是通过 HTTPS（加密）完成的。查看[SCConstants.m](https://github.com/soundcloud/CocoaSoundCloudAPI/blob/master/Sources/SoundCloudAPI/SCConstants.m#L35)，您会发现所有 API 端点都携带该`https`协议。

在提交您的应用程序时，Apple 会询问您的应用程序是否正在实施任何加密算法。图书馆没有这样做。他们只使用 iOS 中已经存在的算法。因此，如果您不自己实施任何内容，那么您是安全的。

# c++ - 使用 Flash 或类似动画的 C++

> ID：10808018
> 
> 赞同：1
> 
> 时间：2012-05-29T23:15:24.840
> 
> 标签：c++, flash, animation

我想编写一个游戏，我想用 C++ 来做，因为每个人似乎都同意这是编写游戏的最佳方式。不过，我真正想要的是制作动画、在运行时交换图像并保留动画的能力。此外，能够将图形固定到其他图形的某些部分，或将图形组合在一起。我确信 Actionscript 和 Flash 可以做到这两点。这在 Flash 中特别容易，因为我可以直观地看到动画并通过 Actionscript 交换符号，以在我想要的任何帧将其更改为我想要的。现在，我知道在 C++ 中运行时交换图像也相当简单，但是在 C++ 中，（据我了解）我必须通过代码制作动画，并且我必须单独手动移动每个图形以使图形保持在一起. 在那儿' 一种我可以在 Flash 中制作动画，然后使用这些动画并在 C++ 中交换图像的方式？或者，如果有其他方法可以在不使用 Flash 的情况下完成同样的事情？（不介意使用位图）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:57:29.500

我想也许你应该只用 Flash 和 ActionScript 来编写你的游戏，如果你已经使用过这些工具并且你的游戏可以适应它们的话。用 C++ 编写游戏是一项艰巨而复杂的任务，对于困难和复杂的游戏来说是必要的，但对于简单而有趣的设计来说往往过于矫枉过正。如果您只想设计游戏，请使用最简单的工具来制作原型！

如果您的游戏太大而无法在 Flash 中实现，请考虑使用[XNA](http://msdn.microsoft.com/en-us/centrum-xna.aspx)或预构建的游戏引擎，例如[Ogre](http://www.ogre3d.org/)或[Unity](http://unity3d.com/)。XNA 处于 C♯，但即便如此，对于单人团队可以构建的任何游戏来说，这也足够了。

[Scaleform](http://gameware.autodesk.com/scaleform)允许您在 C++/DirectX 游戏中嵌入 Flash，但正如您所见，使用起来相当复杂。在我们的项目中，我们有一名工程师和三名艺术家全职致力于 Scaleform UI，以了解它的工作量。

# java - 排序算法

> ID：10808024
> 
> 赞同：2
> 
> 时间：2012-05-29T23:16:48.557
> 
> 标签：java, algorithm, sorting

我需要创建一个排序算法，根据对对卡片进行排序，例如，如果你有一个 4JJQQ，它应该排序 QQJJ4。我尝试了许多不同的方法，但似乎无法正确订购。我基本上有一系列卡片，包含那只手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T23:50:37.090

这个问题对我来说仍然有点不清楚。所以我会做一些假设，如果我错了，你可以纠正我。

如果您的主要问题是基本上比较像 J 这样的文字和像 4 这样的数字，那么[**计数排序**](http://www.algorithmist.com/index.php/Counting_sort)是您的解决方案。

*它是什么*：它是一种排序算法，适用于被排序的可能值有限的情况。您创建一个包含所有可能值的表，在一次扫描中，计算每个文字在表中相应行中更新相同的所有出现次数。然后您所要做的就是使用它以适合您的偏好顺序对原始数组进行排序。

*优点*：计数排序是一种比其他通用算法（如 Merge 和 Quicksort）更快的算法（平均需要 O(n) 时间）。如果您确实有有限的可能值，那么我说您使用它。

现在是按“对”进行排序的部分，这是我不太明白的。您能否告诉以下测试用例*“JJQJ4”*和*“JQ329”*的预期答案是什么？

典型的计数排序可以将这些排序为*QJJJ4*和*QJ932*（这里没有对的概念）

如果您的答案模式是***[Pairs][Singular]***每个按降序排序，您只需修改计数排序，使其首先填充偶数张卡片。如果任何文字剩余的可用卡片是 1 或 0，它会在最后填充它们。这样，我的测试用例的答案将是

*JJQJ4*和*QJ923*。

您的两个测试用例似乎也很合适。

* * *

选择：

您提到当很明显它们是一对时，您想跳过必须比较两个文字。我是否可以建议使用一些类似树的文字存储。所以，这个想法是有一个有 2 个孩子的中央玩家节点。Left Child 将存储对的出现，而 Right 将存储单数。

文字的存储将以二叉树的方式完成。文字的插入将被修改。

当你得到 45JJQ，

1）输入：4。过程：将4存储为播放器节点的rChld

2）输入：5。过程：将 5 存储为 rChld of 4

3）输入：J。过程：将 J 存储为 5 的 rChld

4）输入：J。过程：由于另一个 J 存在，5->rChld:NULL。J 被存储为玩家节点的 lChld（同样，以二叉树的方式，即，如果 lChld [Two Pairs] 中已经存在一个文字，那么 J 将根据它是否被存储为左或右孩子更大或更小）。

5）输入：Q。过程：将 Q 存储为 5 的 rChld

要比较两手牌，您首先要成对搜索最高的牌（最右边的没有孩子的孩子）。您还可以轻松计算对数。在一般的二叉树中，您需要 BFS 或 DFS。但是由于您最多只能有 2 对，因此您可以轻松地做到这一点。如果 lChld 为空，则再次搜索 rChild 中具有单数牌的高牌。

注意：如果您确实在制作类似于扑克的游戏，您可能还想要 3 of a kind 之类的东西。这可以通过在玩家节点的左子节点中存储“权重”来容纳在节点中。也就是说，如果 J 出现两次，则权重为 2，如果出现三次，则权重为 3，依此类推。比权重更好的方法可能是使用[二项式堆](http://en.wikipedia.org/wiki/Binomial_heap)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T23:40:03.043

如果 TYPE = {A,K,Q,J,A,10..2} *（可能是 Java 的`enum`）* 其中 A > K > Q > J > 10 > ... > 2

然后，这会做到这一点：

```
class Card implements Comparable<Card> {
  public TYPE ty;
  public Card(TYPE t) {
    ty = t;
  }
  public int compareTo(Card card) {
    return card.ty - ty; //you should rewrite this according to [1] rules
  }
} 
```

排序：

```
Collections.sort(listOfCards); where listOfCards is a List<Card>. 
```

[1] [http://www.javapractices.com/topic/TopicAction.do?Id=10](http://www.javapractices.com/topic/TopicAction.do?Id=10)

# iphone - “xxx 没有有效的 com.apple.developer.ubiquity-kvstore-identifier 权利”仅在一台设备上

> ID：10808026
> 
> 赞同：9
> 
> 时间：2012-05-29T23:16:53.877
> 
> 标签：iphone, ios, ipad, icloud

我正在测试一个使用 iCloud 键值存储的支持 iCloud 的应用程序。

我正在运行 5.1.1 的 iPad 和 iPod 上对其进行测试。

今天，没有明显的原因，在 iPad 上运行（仅在 iPad 上）会导致显示消息“xxx has no valid com.apple.developer.ubiquity-kvstore-identifier entitlement”，并且我无法访问键值store，这意味着我无法在该设备上运行该应用程序。

访问 iCloud 文件痛处工作正常。

供应配置文件没有改变，授权文件没有改变，项目和目标设置没有改变，代码在 iPod 上仍然可以正常运行。

所有设备只有一个目标。

从 iPad 上删除应用程序并重新安装它没有帮助。产品清洁没有帮助。从 Xcode 管理器中移除 iPad 并重新启用它并没有帮助。从 iCloud 中删除所有应用程序的数据无济于事。据我所知，没有任何帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T00:38:13.737

我已经看到旧配置文件被缓存/保留在设备上的问题。

您可以尝试打开设置：

*   转到常规 -> 配置文件。
*   删除与此应用程序相关的所有配置文件。
*   删除应用程序。
*   重新安装应用程序，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T19:05:37.723

昨天注意到自动生成的权利文件不包含所有必需的权利。一个用于文档存储，另一个用于键值对数据。

“ubiquity-container-identifiers”和“iCloud Key-Value Store”

[Apple Docs](https://developer.apple.com/library/mac/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingiCloud.html) ...另外，请确保权利文件列在构建设置的“代码签名->代码签名权利”选项卡中，用于发布和调试。

# c++ - 是否有任何拼写检查代码显示在 GUI 中？

> ID：10808028
> 
> 赞同：3
> 
> 时间：2012-05-29T23:17:04.423
> 
> 标签：c++, string, qt, user-interface, spell-checking

我是一名学生程序员，使用 Qt 为我的公司构建几个 GUI 应用程序，令人尴尬的是，我有时会拼错单词。显然这对我的代码来说并不是什么大问题，因为编译器会第一个让我知道，但是有没有办法自动检查显示的字符串或数据的拼写？

我真的很想知道 Qt 是否提供任何东西；那会很好的男孩。我在文档中没有看到任何内容。我不经常遇到这个问题，但是当它确实发生时，它是如此令人尴尬。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:48:44.667

自从我安装了 VisualAssist 后，它就会突出显示拼写，甚至在评论中也是如此。
不知道它是什么样子，或者它是否只适用于 VS……
我在纯 c++ 中使用它。
[http://blog.qt.nokia.com/2012/05/22/qt-4-8-2-and-visual-studio-add-in-1-1-11-released/](http://blog.qt.nokia.com/2012/05/22/qt-4-8-2-and-visual-studio-add-in-1-1-11-released/)
我希望这会有所帮助。

# javascript - 需要刷新以在 javascript 中显示本地存储值

> ID：10808029
> 
> 赞同：2
> 
> 时间：2012-05-29T23:17:07.993
> 
> 标签：javascript, sqlite, jquery-mobile, local-storage

我正在尝试获取存储在本地存储变量中的值以显示它们！但这里的问题是值的显示是立即的，换句话说：第一次加载页面时什么都不显示，然后每次刷新页面时都会显示下一个值。

```
function ChoixDeQuestion (){

var ide=window.sessionStorage.getItem('idenq');
GetQuest(10);//--> this function store some values in the 'questions' var
var storedQuest=JSON.parse(window.localStorage['questions']);
var i;

for ( i = 0; i < storedQuest.length; i++) 
    {
var newdiv = document.createElement('div');
 switch(storedQuest[i].type) {
      case 'text':
           newdiv.innerHTML += "<br> Question " + (i + 1) + " : "+storedQuest[i].text+" ?  <br><br><textarea name='quest"+(i + 1)+"' rows=4 cols=40 >type here...</textarea>" ;

           break;
      case 'simple':
           var questId=storedQuest[i].id;
           GetChoix(questId);
           var storedChoix=JSON.parse(window.localStorage['choices'+questId]);

           newdiv.innerHTML += "<br> Question " + (i + 1) + " : "+storedQuest[i].text+" ? <br><br>";
           for (var j = 0; j < storedChoix.length; j++) {
           newdiv.innerHTML += "  " + (j + 1) +"- "+storedChoix[j].text+ " <input type='radio' name='choix"+(j + 1)+"'>";

           }
           break;
      case 'multiple':
           var questId=storedQuest[i].id;
           GetChoix(questId);
           var storedChoix=JSON.parse(window.localStorage['choices'+questId]);

           newdiv.innerHTML += "<br> Question " + (i + 1) + " : "+storedQuest[i].text+" ? <br><br>";
           for (var j = 0; j < storedChoix.length; j++) {
           newdiv.innerHTML += " " + (j + 1) +"- "+storedChoix[j].text+ " <input type='checkbox' name='choix"+(j + 1)+"'>";

            } 
            break;
 document.getElementById('results').appendChild(newdiv);

    }
 } 
```

该方法在

```
 $(document).ready(function() { ChoixDeQuestion();}); 
```

那么如何在页面加载时同时获取所有显示的值？

# ruby-on-rails - Rails 3.2：nil:NilClass 的未定义方法“strftime”

> ID：10808030
> 
> 赞同：1
> 
> 时间：2012-05-29T23:17:08.753
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

[实现此](https://github.com/watu/table_builder)日历 gem时出现以下错误。

```
NoMethodError in Users#show

Showing /Users/nelsonkeating/Desktop/ReminDeal/app/views/users/show.html.erb where line #66 raised:

undefined method `strftime' for nil:NilClass
Extracted source (around line #66):

63:   </h2>
64:                 <%= calendar_for @friends, :year => @date.year, :month => @date.month do |calendar| %>
65:                  <%= calendar.head('mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun') %>
66:                   <%= calendar.day(:day_method => :dob) do |date, friends| %>
67:                    <%= date.day %>
68:                     <ul>
69:                         <% friends.each do |friend| %> 
```

users_controller.rb

```
 class UsersController < ApplicationController
   before_filter :authenticate_user!

  def index
    authorize! :index, @user, :message => 'Not authorized as an administrator.'
    @users = User.paginate(:page => params[:page])

  end

  def show
    @user = User.find(params[:id])
    @friends = @user.friends.paginate(page: params[:page])
    @date = params[:month] ? Date.parse(params[:month]) : Date.today
   end 
```

用户/show.html.erb

```
<div id="calendar">
    <h2 id="month">
    <%= link_to "<", :month => (@date.beginning_of_month-1).strftime("%Y-%m") %>
    <%=h @date.strftime("%B %Y") %>
    <%= link_to ">", :month => (@date.end_of_month+1).strftime("%Y-%m") %>
  </h2>
                <%= calendar_for @friends, :year => @date.year, :month => @date.month do |calendar| %>
                 <%= calendar.head('mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun') %>
                  <%= calendar.day(:day_method => :dob) do |date, friends| %>
                   <%= date.day %>
                    <ul>
                        <% friends.each do |friend| %>
                        <li> <%= link_to h(friend.name), friends %></li>
                     <% end %>
                    </ul>
                <% end %>
            <% end %>
</div> 
```

朋友.rb

```
# == Schema Information
#
# Table name: friends
#
#  id         :integer         not null, primary key
#  name       :string(255)
#  dob        :date
#  gender     :string(255)
#  user_id    :integer
#  created_at :datetime        not null
#  updated_at :datetime        not null
#  int        :string(255)
#

class Friend < ActiveRecord::Base
  attr_accessible :name, :dob, :gender, :interests, :int, :interest_ids, :date
  belongs_to :user
  has_many :person_interests, :as => :person
  has_many :interests, :through => :person_interests
  serialize :ints 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:20:30.150

你没有`@date`在你的表演动作中定义。

# predicatebuilder - PredicateBuilder where 子句问题

> ID：10808031
> 
> 赞同：1
> 
> 时间：2012-05-29T23:17:17.507
> 
> 标签：predicatebuilder

我正在使用 PredicateBuilder 生成 where 子句

```
var locationFilter = PredicateBuilder.True<dbCompanyLocation>();
locationFilter = locationFilter.And(s => s.IsPrimary == true && s.State == practiceState);

var companyPredicate = PredicateBuilder.True<dbCompany>();
companyPredicate = companyPredicate.And(c => c.dbCompanyLocations.Where(locationFilter)); 
```

我收到以下错误，任何人都可以为此提供帮助，或者我做错了什么。

实例参数：无法从“System.Data.Linq.EntitySet”转换为“System.Linq.IQueryable”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:33:37.807

直接的问题似乎是它`dbCompany.dbCompanyLocations`是一个`EntitySet`，它实现`IEnumerable<T>`而不是`IQueryable<T>`。这意味着它的`Where`扩展方法需要一个`Func<dbCompanyLocation, bool>`，但是`locationFilter`您提供的变量是一个`Expression<Func<dbCompanyLocation, bool>>`.

您可以通过调用该方法来创建一个`Func<dbCompanyLocation, bool>`from 。`locationFilter``Compile`

然而，另一个问题是，即使它进行了类型检查，`c => c.dbCompanyLocations.Where(locationFilter)`也不是谓词，因为`Where`返回的是 an`IEnumerable<T>`而不是 bool。您可能打算使用`Any`而不是`Where`ie

```
companyPredicate = companyPredicate.And(c => c.dbCompanyLocations.Any(locationFilter.Compile())); 
```

# hadoop - Hadoop - Reducer 到映射器端口

> ID：10808032
> 
> 赞同：0
> 
> 时间：2012-05-29T23:17:23.470
> 
> 标签：hadoop

根据 [http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapreduce/Reducer.html](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapreduce/Reducer.html)

reducer 通过网络使用 HTTP 复制每个 Mapper 的排序输出。

节点上的哪个端口用于此数据传输？默认是50060吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:06:20.073

是每个slave节点上运行的tasktracker的端口，一般是50060（可以查看tasktracker日志文件：

```
2012-05-29 20:24:23,925 INFO org.apache.hadoop.http.HttpServer: listener.getLocalPort() returned 50060 webServer.getConnectors()[0].getLocalPort() returned 50060
2012-05-29 20:24:23,925 INFO org.apache.hadoop.http.HttpServer: Jetty bound to port 50060
2012-05-29 20:24:23,925 INFO org.mortbay.log: jetty-6.1.26
2012-05-29 20:24:24,283 INFO org.mortbay.log: Started SelectChannelConnector@0.0.0.0:50060 
```

# unity3d - 如何编译 Unity3D 脚本以将其包含到 AssetBundle？

> ID：10808033
> 
> 赞同：2
> 
> 时间：2012-05-29T23:17:25.617
> 
> 标签：unity3d

根据本[手册](http://unity3d.com/support/documentation/Manual/AssetBundles)，我可以将脚本包含为二进制数据并通过反射加载它们。我了解所有步骤，除了一个：如何编译脚本以获取二进制数据以将其存储在 .binary 文件中？有教程/帮助吗？

**UPD：** 实际问题可以重述为：“如何使用 MonoDevelop 编译单个文件并获取其字节码”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T14:24:02.330

解决方案：

1.  打开 Monodevelop 并创建 C#Library 项目
2.  将 UnityEngine.dll 添加到引用
3.  编译你的脚本
4.  将 bin/.dll 从库项目文件夹复制到统一项目的资产，并将扩展名从 .dll 更改为 .bytes

就这样。

# mongodb - Mongo命令行按对象ID查询嵌入式文档

> ID：10808034
> 
> 赞同：0
> 
> 时间：2012-05-29T23:17:29.173
> 
> 标签：mongodb

我的帐户集合中有以下内容：

```
 { "_id" : ObjectId("4fc55125476e0a27d9000003"), 
"created_at" : ISODate("2012-05-29T22:43:49Z"), 
"teachers" : [  {   
"_id" : ObjectId("4fc55125476e0a27d9000004"),   
"updated_at" : ISODate("2012-05-29T22:43:49Z"),     
"created_at" : ISODate("2012-05-29T22:43:49Z") 
} ], 
"updated_at" : ISODate("2012-05-29T22:43:49Z") 
} 
```

我想查询一个有 _id 为 4fc55125476e0a27d9000003 的老师的帐户。

如果我使用命令

```
db.accounts.findOne({"teachers._id" : ObjectId("4fc55125476e0a27d9000004")}) 
```

它返回空值。

另外，当我在上面的命令中使用 find 而不是 findOne 时，为什么 mongo 命令行会挂起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:06:38.740

正如其他人指出的那样，查询实际上有效。不知道前几天发生了什么，我无法让它返回正确的结果。也许我使用了不正确的数据库。感谢您的帮助和抱歉浪费您的时间。

# mysql - ORDER BY 让我的查询超级慢。里面的例子。有什么加快速度的想法吗？

> ID：10808038
> 
> 赞同：4
> 
> 时间：2012-05-29T23:18:04.997
> 
> 标签：mysql, sql, performance, sql-order-by

**使用ORDER BY**运行此程序需要 10 多秒，最终导致我的网站在高流量时崩溃。

```
select *
from tbluserinfluences, tblcontent, tblusers
where tblcontent.userid = tblusers.id
and tbluserinfluences.userid = tblusers.id
and tbluserinfluences.lcase_influence = 'pink floyd'
order by tblcontent.score desc
limit 0, 160 
```

**在没有 ORDER BY**的情况下运行相同的查询只需几毫秒。

```
select *
from tbluserinfluences, tblcontent, tblusers
where tblcontent.userid = tblusers.id
and tbluserinfluences.userid = tblusers.id
and tbluserinfluences.lcase_influence = 'pink floyd'
order by tblcontent.score desc
limit 0, 160 
```

这是**解释**

![在此处输入图像描述](../Images/1bf0539d83026d96e1deebb643121e03.png)

有任何想法吗？我愿意将其拆分为多个查询、创建临时表或任何其他有帮助的东西。这个查询让我（和我的用户）感到厌烦。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T23:19:36.853

您可能需要在 score 列上建立索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T04:03:58.957

好的，首先要做的事情：LIMIT 隐藏了大量错误查询，直到有人添加 ORDER BY - LIMIT 邀请数据库引擎在生成指定数量的记录后立即取消查询，但尽快添加 ORDER BY 时，*所有*记录都是在内部生成的，但对程序员隐藏 - 如果一个 LIMIT 的查询因 ORDER BY 而大大减慢，那么它不是一个好的查询开始。

也就是说，您需要对您的查询（和数据库设置）进行一些小的更改以改进事情。通过查看 EXPLAIN 计划（包括此计划，您在前 10% 中），有很多事情很突出 - 结果集中有 240,000 条记录正在排序。从“使用文件排序”看来，发生了 2 次排序阶段，加上查询正在创建一个临时表 - 我会考虑增加你的`sort_buffer_size`，但要小心不要让它太大，因为我似乎记得它是每个会话不是全局缓冲区，因此如果您有 100 个并发会话，请不要将其设置为 256MB - 我猜 4MB 或 8MB 可能是不错的起始位置。

如果这不能大大改善事情，我会开始处理查询本身：EXPLAIN 输出告诉我们`lcase_influence`索引有 300+ 字节键 - 如果你将影响字符串移到一个单独的`tblInfluence,`并且只包含`tblInfluence.id`在`tbluserinfluences`表中，并将其编入索引，然后您将同时删除`tbluserinfluences`表的大小和影响名称索引。

如果这不能解决问题，那么我会考虑移动排序，以便它只对所需的最小字段进行排序，而不是对整个输出记录进行排序。我也将`tblUsrContent`直接加入`tblUserInfluences`- 我怀疑它不会有太大的不同，但如果它是我的代码，我更喜欢单步连接而不是可能的长连接链。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T23:54:52.187

好的，这是一个巨大的 hack，但我想出了一个（临时）解决问题的方法。

只有在搜索“pink floyd”到“coldplay”等非常流行的乐队时，查询才会变慢。任何不那么受欢迎的乐队，查询都很快。

通过一些反复试验，我发现如果我**强制**查询使用**tblcontent.score**索引，对于像“pink floyd”这样的流行乐队来说它是超快的，但对于像“romantics”这样不那么流行的乐队来说就慢了。

Hacky 解决方案：前 100 个乐队的强制分数指数。让 MySql 对所有其他波段使用其默认值。叹。

**因此，粉红弗洛伊德**查询的快速版本是：

```
select *
from tbluserinfluences, tblcontent FORCE INDEX(score), tblusers
where tblcontent.userid = tblusers.id
and tbluserinfluences.userid = tblusers.id
and tbluserinfluences.lcase_influence = 'pink floyd'
order by tblcontent.score desc
limit 0, 160 
```

**浪漫主义**（不太流行）查询的快速版本是：

```
select *
from tbluserinfluences, tblcontent, tblusers
where tblcontent.userid = tblusers.id
and tbluserinfluences.userid = tblusers.id
and tbluserinfluences.lcase_influence = 'pink floyd'
order by tblcontent.score desc
limit 0, 160 
```

当我在 Defcon 5 时，这是一个不错的解决方案。稍后我会想出一些更优雅的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T13:51:17.693

在此处更改**my.ini**文件：**innodb_buffer_pool_size = 300M** - 并根据您的 pc 或服务器中的可用内存更改大小。对我来说有效！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T23:24:11.247

在没有看到您的架构的情况下，我会在 SCORE 字段上添加一个索引。对于任何索引，INSERT 的性能都会受到轻微影响，但听起来选择查询对您来说是最重要的部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T23:28:53.840

尝试这个

```
select 
ui.*,
tc.*
tu.*
from tbluserinfluences as ui
LEFT JOIN tblusers AS tu ON tu.id = ui.userid
LEFT JOIN tblcontent AS tc ON tc.userid = tu.id
where ui.lcase_influence = 'pink floyd'
order by ???.score desc
limit 0, 160 
```

代替 ？？？与有关表。我不能尝试，但我会从那个开始。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-16T07:25:07.453

我就是这样做的

```
select * from (
 select *
 from tbluserinfluences, tblcontent FORCE INDEX(score), tblusers
 where tblcontent.userid = tblusers.id
 and tbluserinfluences.userid = tblusers.id
 and tbluserinfluences.lcase_influence = 'pink floyd'
 limit 0, 160) tbl
order by tbl.score desc 
```

先限制再对160条记录排序，而不是先排序再限制

# c# - 如何使用 ComboBox.ObjectCollection.Item() 属性

> ID：10808040
> 
> 赞同：2
> 
> 时间：2012-05-29T23:18:14.363
> 
> 标签：c#, winforms, combobox

我想使用对象的`Item()`属性`ComboBox`。它列在 MSDN @：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.objectcollection.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.objectcollection.aspx)

但是，我没有运气找到该属性的示例。我无法使用以下方法将其拉起：

```
ComboBox1.Items.Item(0); 
```

或者

```
ComboBox1.Item(0); 
```

即使我能够拥有

```
ComboBox1.Items.Count(); 
```

有人能帮我吗？实际上，主要目标是提取 ComboBox 中项目的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:37:39.943

它是`Items(0)`和不是`Item(0)`。也因为它是**C#**。尝试使用

```
ComboBox1.Items[0]; 
```

![在此处输入图像描述](../Images/ea0c5cb45d378ba7dbe3cdc861664ad4.png)

# datetime - 每下周查找相同的日期时间，直到特定的日期时间

> ID：10808041
> 
> 赞同：0
> 
> 时间：2012-05-29T23:18:20.457
> 
> 标签：datetime, coldfusion, coldfusion-9, coldfusion-8, coldfusion-7

给定**开始日期时间**、**结束日期时间**和**重复日期时间**，我如何每周找到相同的时间表，直到**重复日期时间**？

例如：

```
start date time: 05-29-2012 07:35
end date time: 05-29-2012 10:27 
repeat until date: 06-19-2012 09:00 
```

结果将是：

```
06-05-2012 07:35 06-05-2012 10:27
06-12-2012 07:35 06-12-2012 10:27 
```

知道如何在 cfml 中做到这一点吗？

这是我到目前为止所尝试的：

```
<cfset start_dt = "05-29-2012 07:35">
<cfset end_dt = "05-29-2012 10:27">
<cfset repeat_until = "06-19-2012 09:00">
<cfoutput>start: #start_dt#<br></cfoutput>
<cfoutput>end: #end_dt#<br></cfoutput>
<cfoutput>repeat until: #repeat_until#<br></cfoutput>
<cfset s_date='#DatePart("m", start_dt)#/#DatePart("d", start_dt)#/#DatePart("yyyy", start_dt)#'>
<cfoutput>#s_date#<br></cfoutput>
<cfset s_date = DateAdd("d", 7, s_date)>
<cfoutput>#s_date#<br></cfoutput> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:09:28.180

以您的预期结果示例为例，您似乎并不关心`start_dt`only of的值`end_dt`。因此，这是一种可以让它发挥作用的方法。您只需要一种类型的循环，但我已经包括了两种，以便您可以选择自己的偏好。

```
<cfset start_dt = "05-29-2012 07:35">
<cfset end_dt = "05-29-2012 10:27">
<cfset repeat_until = "06-19-2012 09:00">
<cfoutput>start: #start_dt#<br></cfoutput>
<cfoutput>end: #end_dt#<br></cfoutput>
<cfoutput>repeat until: #repeat_until#<br></cfoutput>

<!--- FromTo loop --->
<cfset first_dt = DateAdd("d", 7, end_dt)>
<cfloop from="#first_dt#" to="#repeat_until#" index="current_dt" step="#CreateTimeSpan(7,0,0,0)#">
    <cfoutput>#DateFormat(current_dt, "mm-dd-yyyy")# #TimeFormat(current_dt, "HH:mm")#<br></cfoutput>
</cfloop>

<!--- Condition loop --->
<cfset current_dt = DateAdd("d", 7, end_dt)>
<cfloop condition="DateCompare(current_dt, repeat_until) LTE 0">
    <cfoutput>#DateFormat(current_dt, "mm-dd-yyyy")# #TimeFormat(current_dt, "HH:mm")#<br></cfoutput>
    <cfset current_dt = DateAdd("d", 7, current_dt)>
</cfloop> 
```

# nhibernate - Fluent NHibernate 可为空的一对一映射

> ID：10808047
> 
> 赞同：1
> 
> 时间：2012-05-29T23:18:41.550
> 
> 标签：nhibernate, fluent-nhibernate, mapping

我一直在尝试使用一对一的双向关系映射两个对象。两个对象之间的关系不是必需的。以下是对象：

```
public class Tenant
{
    public virtual int TenantId { get; set; }

    public virtual string Name { get; set; }

    public virtual Unit Unit { get; set; }
}

public class Unit
{
    public virtual int UnitId { get; set; }

    public virtual string UnitNumber { get; set; }

    public virtual int Rooms { get; set; }

    public virtual Tenant Tenant { get; set; }
} 
```

这是我正在尝试使用的映射：

```
public class Mappings : ClassMap<Unit>
{

    /*
     * Unit
     * ------------
     * UnitId (PK)
     * TenantId (FK)
     * Rooms
     * UnitNumber
     */

    public Mappings()
    {
        Id(x => x.UnitId).GeneratedBy.Identity();

        References(x => x.Tenant);

        Map(x => x.Rooms).Not.Nullable();
        Map(x => x.UnitNumber).Not.Nullable();
    }
}

public class TenantMapping : ClassMap<Tenant>
{
    /*
     * Tenant
     * -------------
     * TenantId (PK)
     * Name 
     */
    public TenantMapping()
    {
        Id(x => x.TenantId).GeneratedBy.Identity();

        Map(x => x.Name).Not.Nullable();

        HasOne(x => x.Unit).PropertyRef(x => x.Tenant);
    }
} 
```

预期的表定义在映射注释中。我用来验证映射的测试失败了：

```
 [Test]
    public void SetTenantOnUnit()
    {
        int unitId = 0;
        int tenantId = 0;
        using (var session = factory.OpenSession())
        {
            var tenants = Builder<Tenant>.CreateListOfSize(5).Build();
            var unit = Builder<Unit>.CreateNew().Build();
            foreach(var tenant in tenants)  
                session.Save(tenant);

            session.Save(unit);

            unit.Tenant = tenants[3];
            tenantId = unit.Tenant.TenantId;
            session.SaveOrUpdate(unit);

            unitId = unit.UnitId;
        }

        using (var session = factory.OpenSession())
        {
            var unit = session.Get<Unit>(unitId);
            Assert.That(unit, Is.Not.Null);
            Assert.That(unit.Tenant, Is.Not.Null);
            Assert.That(unit.Tenant.TenantId, Is.EqualTo(tenantId), "Incorrect Tenant Id");
        }

    }

    [Test]
    public void SetUnitOnTenant()
    {
        int tenantId = 0;
        int unitId = 0;
        using (var session = factory.OpenSession())
        {
            var tenant = Builder<Tenant>.CreateNew().Build();
            var units = Builder<Unit>.CreateListOfSize(5).Build();
            session.Save(tenant);

            foreach(var unit in units)
                session.Save(unit);

            tenant.Unit = units[3];
            unitId = tenant.Unit.UnitId;

            session.SaveOrUpdate(tenant);
            tenantId = tenant.TenantId;
        }

        using (var session = factory.OpenSession())
        {
            var tenant = session.Get<Tenant>(tenantId);
            Assert.That(tenant, Is.Not.Null);
            Assert.That(tenant.Unit, Is.Not.Null);
            Assert.That(tenant.Unit.UnitId, Is.EqualTo(unitId), "Incorrect unit id");
        }
    } 
```

我在这里包含了源代码：[https ://bitbucket.org/crmckenzie/fluentnhibernate.discovery/overview](https://bitbucket.org/crmckenzie/fluentnhibernate.discovery/overview)

理想情况下，我将能够从任一方创建关系并将其成功保存到数据库中。我已经阅读了 StackOverFlow 上的其他一对一映射主题，但似乎没有一个是直接的。如何正确映射这种关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:40:34.327

你错过了一个`session.Flush();`之后`unitId = unit.UnitId;`，`tenantId = tenant.TenantId;`因此分配没有保存在数据库中。保存租户和单元的原因是您强制 NHibernate 立即插入`session.Save()`。由于您设置`GeneratedBy.Identity()`了 nhibernate 必须向数据库询问 id，否则`unitId = unit.UnitId;`会产生错误的结果。

# google-maps - 单击 Google 地图标记中的 URL 更改页面

> ID：10808055
> 
> 赞同：2
> 
> 时间：2012-05-29T23:20:04.947
> 
> 标签：google-maps, iframe

我正在为一个艺术项目建立一个网站。它基于 Wordpress，我希望用户浏览自定义 Google 地图的内容，其中包含指向地图标记内不同文章的链接。我已经设法插入带有功能链接的标记，一切都很好。

我找到了两种在我的网站中显示地图的解决方案：

1)[链接到解决方案 1](http://www.pessimo.ch/maps/index.html)在这里，我告诉 Google 地图 API 在页面内的 div 中构建地图，相关的 Javascript 在名为`map.js`. 使用此解决方案，我可以将标记用作功能齐全的链接，但是，正如您在链接中看到的那样，地图几乎没有呈现。

2)[链接到解决方案 2](http://www.pessimo.ch/maps/index2.html)在这里，我在不同的页面上构建地图，该页面嵌入在 iframe 中。使用标记和所有内容正确渲染了地图，但是当单击标记时，地图就会消失。

你们对我该如何解决这个问题有什么建议吗？

谢谢你。

（我很抱歉这个非常具体的问题）。

****** *** ** *** ** *** ******更新******* *** ** *** ** *** **********

 *****对于第一种情况，问题解决了，css一直在扭曲图像！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:05:39.217

我指的是链接#1，我看到了类似的东西，地图控件被扭曲，解决方案是更新 CSS 以将 img 属性恢复为地图 div 中的默认值。

因此，尝试将这些行添加到 style.css 的末尾。它应该只影响地图 div 中的内容

```
#map label { width: auto; display:inline; }
#map img { max-height: none; max-width: none; } 
```*****

# r - 用 ggplot2 生成这个基图：这是 ggplot2 错误吗？

> ID：10808056
> 
> 赞同：3
> 
> 时间：2012-05-29T23:20:30.220
> 
> 标签：r, ggplot2

我正在尝试绘制这个基本图

```
df <-
structure(list(X = c(1e-04, 2e-04, 3e-04, 4e-04, 5e-04, 6e-04,
7e-04, 8e-04, 9e-04, 0.001, 0.0011, 0.0012, 0.0013, 0.0014, 0.0015,
0.0016, 0.0017, 0.0018, 0.0019, 0.002, 0.0021, 0.0022, 0.0023,
0.0024, 0.0025, 0.0026, 0.0027, 0.0028, 0.0029, 0.003, 0.0031,
0.0032, 0.0033, 0.0034, 0.0035, 0.0036, 0.0037, 0.0038, 0.0039,
0.004, 0.0041, 0.0042, 0.0043, 0.0044, 0.0045, 0.0046, 0.0047,
0.0048, 0.0049, 0.005, 0.0051, 0.0052, 0.0053, 0.0054, 0.0055,
0.0056, 0.0057, 0.0058, 0.0059, 0.006, 0.0061, 0.0062, 0.0063,
0.0064, 0.0065, 0.0066, 0.0067, 0.0068, 0.0069, 0.007, 0.0071,
0.0072, 0.0073, 0.0074, 0.0075, 0.0076, 0.0077, 0.0078, 0.0079,
0.008, 0.0081, 0.0082, 0.0083, 0.0084, 0.0085, 0.0086, 0.0087,
0.0088, 0.0089, 0.009, 0.0091, 0.0092, 0.0093, 0.0094, 0.0095,
0.0096, 0.0097, 0.0098, 0.0099, 0.01, 0.0101, 0.0102, 0.0103,
0.0104, 0.0105, 0.0106, 0.0107, 0.0108, 0.0109, 0.011, 0.0111,
0.0112, 0.0113, 0.0114, 0.0115, 0.0116, 0.0117, 0.0118, 0.0119,
0.012, 0.0121, 0.0122, 0.0123, 0.0124, 0.0125, 0.0126, 0.0127,
0.0128, 0.0129, 0.013, 0.0131, 0.0132, 0.0133, 0.0134, 0.0135,
0.0136, 0.0137, 0.0138, 0.0139, 0.014, 0.0141, 0.0142, 0.0143,
0.0144, 0.0145, 0.0146, 0.0147, 0.0148, 0.0149, 0.015, 0.0151,
0.0152, 0.0153, 0.0154, 0.0155, 0.0156, 0.0157, 0.0158, 0.0159,
0.016, 0.0161, 0.0162, 0.0163, 0.0164, 0.0165, 0.0166, 0.0167,
0.0168, 0.0169, 0.017, 0.0171, 0.0172, 0.0173, 0.0174, 0.0175,
0.0176, 0.0177, 0.0178, 0.0179, 0.018, 0.0181, 0.0182, 0.0183,
0.0184, 0.0185, 0.0186, 0.0187, 0.0188, 0.0189, 0.019, 0.0191,
0.0192, 0.0193, 0.0194, 0.0195, 0.0196, 0.0197, 0.0198, 0.0199,
0.02, 0.0201, 0.0202, 0.0203, 0.0204, 0.0205, 0.0206, 0.0207,
0.0208, 0.0209, 0.021, 0.0211, 0.0212, 0.0213, 0.0214, 0.0215,
0.0216, 0.0217, 0.0218, 0.0219, 0.022, 0.0221, 0.0222, 0.0223,
0.0224, 0.0225, 0.0226, 0.0227, 0.0228, 0.0229, 0.023, 0.0231,
0.0232, 0.0233, 0.0234, 0.0235, 0.0236, 0.0237, 0.0238, 0.0239,
0.024, 0.0241, 0.0242, 0.0243, 0.0244, 0.0245, 0.0246, 0.0247,
0.0248, 0.0249, 0.025, 0.0251, 0.0252, 0.0253, 0.0254, 0.0255,
0.0256, 0.0257, 0.0258, 0.0259, 0.026, 0.0261, 0.0262, 0.0263,
0.0264, 0.0265, 0.0266, 0.0267, 0.0268, 0.0269, 0.027, 0.0271,
0.0272, 0.0273, 0.0274, 0.0275, 0.0276, 0.0277, 0.0278, 0.0279,
0.028, 0.0281, 0.0282, 0.0283, 0.0284, 0.0285, 0.0286, 0.0287,
0.0288, 0.0289, 0.029, 0.0291, 0.0292, 0.0293, 0.0294, 0.0295,
0.0296, 0.0297, 0.0298, 0.0299, 0.03, 0.0301, 0.0302, 0.0303,
0.0304, 0.0305, 0.0306, 0.0307, 0.0308, 0.0309, 0.031, 0.0311,
0.0312, 0.0313, 0.0314, 0.0315, 0.0316, 0.0317, 0.0318, 0.0319,
0.032, 0.0321, 0.0322, 0.0323, 0.0324, 0.0325, 0.0326, 0.0327,
0.0328, 0.0329, 0.033, 0.0331, 0.0332, 0.0333, 0.0334, 0.0335,
0.0336, 0.0337, 0.0338, 0.0339, 0.034, 0.0341, 0.0342, 0.0343,
0.0344, 0.0345, 0.0346, 0.0347, 0.0348, 0.0349, 0.035, 0.0351,
0.0352, 0.0353, 0.0354, 0.0355, 0.0356, 0.0357, 0.0358, 0.0359,
0.036, 0.0361, 0.0362, 0.0363, 0.0364, 0.0365, 0.0366, 0.0367,
0.0368, 0.0369, 0.037, 0.0371, 0.0372, 0.0373, 0.0374, 0.0375,
0.0376, 0.0377, 0.0378, 0.0379, 0.038, 0.0381, 0.0382, 0.0383,
0.0384, 0.0385, 0.0386, 0.0387, 0.0388, 0.0389, 0.039, 0.0391,
0.0392, 0.0393, 0.0394, 0.0395, 0.0396, 0.0397, 0.0398, 0.0399,
0.04, 0.0401, 0.0402, 0.0403, 0.0404, 0.0405, 0.0406, 0.0407,
0.0408, 0.0409, 0.041, 0.0411, 0.0412, 0.0413, 0.0414, 0.0415,
0.0416, 0.0417, 0.0418, 0.0419, 0.042, 0.0421, 0.0422, 0.0423,
0.0424, 0.0425, 0.0426, 0.0427, 0.0428, 0.0429, 0.043, 0.0431,
0.0432, 0.0433, 0.0434, 0.0435, 0.0436, 0.0437, 0.0438, 0.0439,
0.044, 0.0441, 0.0442, 0.0443, 0.0444, 0.0445, 0.0446, 0.0447,
0.0448, 0.0449, 0.045, 0.0451, 0.0452, 0.0453, 0.0454, 0.0455,
0.0456, 0.0457, 0.0458, 0.0459, 0.046, 0.0461, 0.0462, 0.0463,
0.0464, 0.0465, 0.0466, 0.0467, 0.0468, 0.0469, 0.047, 0.0471,
0.0472, 0.0473, 0.0474, 0.0475, 0.0476, 0.0477, 0.0478, 0.0479,
0.048, 0.0481, 0.0482, 0.0483, 0.0484, 0.0485, 0.0486, 0.0487,
0.0488, 0.0489, 0.049, 0.0491, 0.0492, 0.0493, 0.0494, 0.0495,
0.0496, 0.0497, 0.0498, 0.0499, 0.05, 0.0501, 0.0502, 0.0503,
0.0504, 0.0505, 0.0506, 0.0507, 0.0508, 0.0509, 0.051, 0.0511,
0.0512, 0.0513, 0.0514, 0.0515, 0.0516, 0.0517, 0.0518, 0.0519,
0.052, 0.0521, 0.0522, 0.0523, 0.0524, 0.0525, 0.0526, 0.0527,
0.0528, 0.0529, 0.053, 0.0531, 0.0532, 0.0533, 0.0534, 0.0535,
0.0536, 0.0537, 0.0538, 0.0539, 0.054, 0.0541, 0.0542, 0.0543,
0.0544, 0.0545, 0.0546, 0.0547, 0.0548, 0.0549, 0.055, 0.0551,
0.0552, 0.0553, 0.0554, 0.0555, 0.0556, 0.0557, 0.0558, 0.0559,
0.056, 0.0561, 0.0562, 0.0563, 0.0564, 0.0565, 0.0566, 0.0567,
0.0568, 0.0569, 0.057, 0.0571, 0.0572, 0.0573, 0.0574, 0.0575,
0.0576, 0.0577, 0.0578, 0.0579, 0.058, 0.0581, 0.0582, 0.0583,
0.0584, 0.0585, 0.0586, 0.0587, 0.0588, 0.0589, 0.059, 0.0591,
0.0592, 0.0593, 0.0594, 0.0595, 0.0596, 0.0597, 0.0598, 0.0599,
0.06, 0.0601, 0.0602, 0.0603, 0.0604, 0.0605, 0.0606, 0.0607,
0.0608, 0.0609, 0.061, 0.0611, 0.0612, 0.0613, 0.0614, 0.0615,
0.0616, 0.0617, 0.0618, 0.0619, 0.062, 0.0621, 0.0622, 0.0623,
0.0624, 0.0625, 0.0626, 0.0627, 0.0628, 0.0629, 0.063, 0.0631,
0.0632, 0.0633, 0.0634, 0.0635, 0.0636, 0.0637, 0.0638, 0.0639,
0.064, 0.0641, 0.0642, 0.0643, 0.0644, 0.0645, 0.0646, 0.0647,
0.0648, 0.0649, 0.065, 0.0651, 0.0652, 0.0653, 0.0654, 0.0655,
0.0656, 0.0657, 0.0658, 0.0659, 0.066, 0.0661, 0.0662, 0.0663,
0.0664, 0.0665, 0.0666, 0.0667, 0.0668, 0.0669, 0.067, 0.0671,
0.0672, 0.0673, 0.0674, 0.0675, 0.0676, 0.0677, 0.0678, 0.0679,
0.068, 0.0681, 0.0682, 0.0683, 0.0684, 0.0685, 0.0686, 0.0687,
0.0688, 0.0689, 0.069, 0.0691, 0.0692, 0.0693, 0.0694, 0.0695,
0.0696, 0.0697, 0.0698, 0.0699, 0.07, 0.0701, 0.0702, 0.0703,
0.0704, 0.0705, 0.0706, 0.0707, 0.0708, 0.0709, 0.071, 0.0711,
0.0712, 0.0713, 0.0714, 0.0715, 0.0716, 0.0717, 0.0718, 0.0719,
0.072, 0.0721, 0.0722, 0.0723, 0.0724, 0.0725, 0.0726, 0.0727,
0.0728, 0.0729, 0.073, 0.0731, 0.0732, 0.0733, 0.0734, 0.0735,
0.0736, 0.0737, 0.0738, 0.0739, 0.074, 0.0741, 0.0742, 0.0743,
0.0744, 0.0745, 0.0746, 0.0747, 0.0748, 0.0749, 0.075, 0.0751,
0.0752, 0.0753, 0.0754, 0.0755, 0.0756, 0.0757, 0.0758, 0.0759,
0.076, 0.0761, 0.0762, 0.0763, 0.0764, 0.0765, 0.0766, 0.0767,
0.0768, 0.0769, 0.077, 0.0771, 0.0772, 0.0773, 0.0774, 0.0775,
0.0776, 0.0777, 0.0778, 0.0779, 0.078, 0.0781, 0.0782, 0.0783,
0.0784, 0.0785, 0.0786, 0.0787, 0.0788, 0.0789, 0.079, 0.0791,
0.0792, 0.0793, 0.0794, 0.0795, 0.0796, 0.0797, 0.0798, 0.0799,
0.08, 0.0801, 0.0802, 0.0803, 0.0804, 0.0805, 0.0806, 0.0807,
0.0808, 0.0809, 0.081, 0.0811, 0.0812, 0.0813, 0.0814, 0.0815,
0.0816, 0.0817, 0.0818, 0.0819, 0.082, 0.0821, 0.0822, 0.0823,
0.0824, 0.0825, 0.0826, 0.0827, 0.0828, 0.0829, 0.083, 0.0831,
0.0832, 0.0833, 0.0834, 0.0835, 0.0836, 0.0837, 0.0838, 0.0839,
0.084, 0.0841, 0.0842, 0.0843, 0.0844, 0.0845, 0.0846, 0.0847,
0.0848, 0.0849, 0.085, 0.0851, 0.0852, 0.0853, 0.0854, 0.0855,
0.0856, 0.0857, 0.0858, 0.0859, 0.086, 0.0861, 0.0862, 0.0863,
0.0864, 0.0865, 0.0866, 0.0867, 0.0868, 0.0869, 0.087, 0.0871,
0.0872, 0.0873, 0.0874, 0.0875, 0.0876, 0.0877, 0.0878, 0.0879,
0.088, 0.0881, 0.0882, 0.0883, 0.0884, 0.0885, 0.0886, 0.0887,
0.0888, 0.0889, 0.089, 0.0891, 0.0892, 0.0893, 0.0894, 0.0895,
0.0896, 0.0897, 0.0898, 0.0899, 0.09, 0.0901, 0.0902, 0.0903,
0.0904, 0.0905, 0.0906, 0.0907, 0.0908, 0.0909, 0.091, 0.0911,
0.0912, 0.0913, 0.0914, 0.0915, 0.0916, 0.0917, 0.0918, 0.0919,
0.092, 0.0921, 0.0922, 0.0923, 0.0924, 0.0925, 0.0926, 0.0927,
0.0928, 0.0929, 0.093, 0.0931, 0.0932, 0.0933, 0.0934, 0.0935,
0.0936, 0.0937, 0.0938, 0.0939, 0.094, 0.0941, 0.0942, 0.0943,
0.0944, 0.0945, 0.0946, 0.0947, 0.0948, 0.0949, 0.095, 0.0951,
0.0952, 0.0953, 0.0954, 0.0955, 0.0956, 0.0957, 0.0958, 0.0959,
0.096, 0.0961, 0.0962, 0.0963, 0.0964, 0.0965, 0.0966, 0.0967,
0.0968, 0.0969, 0.097, 0.0971, 0.0972, 0.0973, 0.0974, 0.0975,
0.0976, 0.0977, 0.0978, 0.0979, 0.098, 0.0981, 0.0982, 0.0983,
0.0984, 0.0985, 0.0986, 0.0987, 0.0988, 0.0989, 0.099, 0.0991,
0.0992, 0.0993, 0.0994, 0.0995, 0.0996, 0.0997, 0.0998, 0.0999,
0.1), Y = c(3.9e-125, 1.47e-124, 3.1e-124, 5.19e-124, 7.62e-124,
1.03e-123, 1.32e-123, 1.62e-123, 1.93e-123, 2.24e-123, 2.55e-123,
2.86e-123, 3.15e-123, 3.44e-123, 3.71e-123, 3.97e-123, 4.21e-123,
4.44e-123, 4.66e-123, 4.85e-123, 5.03e-123, 5.19e-123, 5.33e-123,
5.46e-123, 5.57e-123, 5.67e-123, 5.75e-123, 5.81e-123, 5.86e-123,
5.9e-123, 5.92e-123, 5.93e-123, 5.93e-123, 5.92e-123, 5.9e-123,
5.87e-123, 5.83e-123, 5.78e-123, 5.73e-123, 5.67e-123, 5.6e-123,
5.52e-123, 5.44e-123, 5.36e-123, 5.27e-123, 5.18e-123, 5.08e-123,
4.98e-123, 4.88e-123, 4.78e-123, 4.68e-123, 4.57e-123, 4.46e-123,
4.36e-123, 4.25e-123, 4.14e-123, 4.03e-123, 3.93e-123, 3.82e-123,
3.72e-123, 3.61e-123, 3.51e-123, 3.4e-123, 3.3e-123, 3.2e-123,
3.1e-123, 3.01e-123, 2.91e-123, 2.82e-123, 2.73e-123, 2.64e-123,
2.55e-123, 2.46e-123, 2.38e-123, 2.3e-123, 2.22e-123, 2.14e-123,
2.07e-123, 1.99e-123, 1.92e-123, 1.85e-123, 1.78e-123, 1.72e-123,
1.65e-123, 1.59e-123, 1.53e-123, 1.47e-123, 1.42e-123, 1.36e-123,
1.31e-123, 1.26e-123, 1.21e-123, 1.16e-123, 1.12e-123, 1.07e-123,
1.03e-123, 9.87e-124, 9.47e-124, 9.08e-124, 8.71e-124, 8.35e-124,
8.01e-124, 7.67e-124, 7.35e-124, 7.04e-124, 6.75e-124, 6.46e-124,
6.19e-124, 5.93e-124, 5.67e-124, 5.43e-124, 5.19e-124, 4.97e-124,
4.75e-124, 4.55e-124, 4.35e-124, 4.16e-124, 3.98e-124, 3.8e-124,
3.63e-124, 3.47e-124, 3.32e-124, 3.17e-124, 3.03e-124, 2.89e-124,
2.76e-124, 2.63e-124, 2.52e-124, 2.4e-124, 2.29e-124, 2.19e-124,
2.09e-124, 1.99e-124, 1.9e-124, 1.81e-124, 1.73e-124, 1.65e-124,
1.57e-124, 1.5e-124, 1.43e-124, 1.36e-124, 1.3e-124, 1.24e-124,
1.18e-124, 1.12e-124, 1.07e-124, 1.02e-124, 9.71e-125, 9.25e-125,
8.81e-125, 8.39e-125, 7.98e-125, 7.6e-125, 7.24e-125, 6.89e-125,
6.56e-125, 6.24e-125, 5.94e-125, 5.65e-125, 5.38e-125, 5.12e-125,
4.87e-125, 4.63e-125, 4.41e-125, 4.19e-125, 3.98e-125, 3.79e-125,
3.6e-125, 3.43e-125, 3.26e-125, 3.1e-125, 2.94e-125, 2.8e-125,
2.66e-125, 2.53e-125, 2.4e-125, 2.28e-125, 2.17e-125, 2.06e-125,
1.96e-125, 1.86e-125, 1.77e-125, 1.68e-125, 1.59e-125, 1.51e-125,
1.44e-125, 1.37e-125, 1.3e-125, 1.23e-125, 1.17e-125, 1.11e-125,
1.05e-125, 1e-125, 9.5e-126, 9.02e-126, 8.56e-126, 8.12e-126,
7.71e-126, 7.32e-126, 6.94e-126, 6.59e-126, 6.25e-126, 5.93e-126,
5.63e-126, 5.34e-126, 5.06e-126, 4.8e-126, 4.55e-126, 4.32e-126,
4.1e-126, 3.89e-126, 3.68e-126, 3.49e-126, 3.31e-126, 3.14e-126,
2.98e-126, 2.82e-126, 2.68e-126, 2.54e-126, 2.41e-126, 2.28e-126,
2.16e-126, 2.05e-126, 1.94e-126, 1.84e-126, 1.74e-126, 1.65e-126,
1.57e-126, 1.48e-126, 1.41e-126, 1.33e-126, 1.26e-126, 1.2e-126,
1.13e-126, 1.07e-126, 1.02e-126, 9.63e-127, 9.12e-127, 8.64e-127,
8.18e-127, 7.75e-127, 7.34e-127, 6.95e-127, 6.58e-127, 6.23e-127,
5.9e-127, 5.59e-127, 5.29e-127, 5.01e-127, 4.74e-127, 4.49e-127,
4.25e-127, 4.03e-127, 3.81e-127, 3.61e-127, 3.41e-127, 3.23e-127,
3.06e-127, 2.89e-127, 2.74e-127, 2.59e-127, 2.45e-127, 2.32e-127,
2.2e-127, 2.08e-127, 1.97e-127, 1.86e-127, 1.76e-127, 1.67e-127,
1.58e-127, 1.49e-127, 1.41e-127, 1.33e-127, 1.26e-127, 1.19e-127,
1.13e-127, 1.07e-127, 1.01e-127, 9.56e-128, 9.04e-128, 8.55e-128,
8.09e-128, 7.65e-128, 7.23e-128, 6.84e-128, 6.47e-128, 6.12e-128,
5.78e-128, 5.47e-128, 5.17e-128, 4.89e-128, 4.62e-128, 4.37e-128,
4.13e-128, 3.91e-128, 3.69e-128, 3.49e-128, 3.3e-128, 3.12e-128,
2.95e-128, 2.79e-128, 2.63e-128, 2.49e-128, 2.35e-128, 2.22e-128,
2.1e-128, 1.99e-128, 1.88e-128, 1.77e-128, 1.68e-128, 1.58e-128,
1.5e-128, 1.41e-128, 1.34e-128, 1.26e-128, 1.19e-128, 1.13e-128,
1.06e-128, 1.01e-128, 9.5e-129, 8.98e-129, 8.48e-129, 8.01e-129,
7.57e-129, 7.15e-129, 6.75e-129, 6.38e-129, 6.02e-129, 5.69e-129,
5.37e-129, 5.08e-129, 4.79e-129, 4.53e-129, 4.28e-129, 4.04e-129,
3.81e-129, 3.6e-129, 3.4e-129, 3.21e-129, 3.03e-129, 2.86e-129,
2.7e-129, 2.55e-129, 2.41e-129, 2.28e-129, 2.15e-129, 2.03e-129,
1.92e-129, 1.81e-129, 1.71e-129, 1.61e-129, 1.52e-129, 1.44e-129,
1.36e-129, 1.28e-129, 1.21e-129, 1.14e-129, 1.08e-129, 1.02e-129,
9.59e-130, 9.05e-130, 8.54e-130, 8.06e-130, 7.61e-130, 7.18e-130,
6.78e-130, 6.4e-130, 6.04e-130, 5.7e-130, 5.38e-130, 5.07e-130,
4.79e-130, 4.52e-130, 4.26e-130, 4.02e-130, 3.8e-130, 3.58e-130,
3.38e-130, 3.19e-130, 3.01e-130, 2.84e-130, 2.68e-130, 2.53e-130,
2.38e-130, 2.25e-130, 2.12e-130, 2e-130, 1.89e-130, 1.78e-130,
1.68e-130, 1.58e-130, 1.49e-130, 1.41e-130, 1.33e-130, 1.25e-130,
1.18e-130, 1.12e-130, 1.05e-130, 9.92e-131, 9.36e-131, 8.83e-131,
8.32e-131, 7.85e-131, 7.4e-131, 6.98e-131, 6.58e-131, 6.21e-131,
5.85e-131, 5.52e-131, 5.21e-131, 4.91e-131, 4.63e-131, 4.36e-131,
4.12e-131, 3.88e-131, 3.66e-131, 3.45e-131, 3.25e-131, 3.07e-131,
2.89e-131, 2.73e-131, 2.57e-131, 2.42e-131, 2.28e-131, 2.15e-131,
2.03e-131, 1.91e-131, 1.8e-131, 1.7e-131, 1.6e-131, 1.51e-131,
1.42e-131, 1.34e-131, 1.27e-131, 1.19e-131, 1.12e-131, 1.06e-131,
9.99e-132, 9.41e-132, 8.87e-132, 8.36e-132, 7.88e-132, 7.43e-132,
7e-132, 6.59e-132, 6.22e-132, 5.86e-132, 5.52e-132, 5.2e-132,
4.9e-132, 4.62e-132, 4.35e-132, 4.1e-132, 3.86e-132, 3.64e-132,
3.43e-132, 3.23e-132, 3.05e-132, 2.87e-132, 2.7e-132, 2.55e-132,
2.4e-132, 2.26e-132, 2.13e-132, 2.01e-132, 1.89e-132, 1.78e-132,
1.68e-132, 1.58e-132, 1.49e-132, 1.4e-132, 1.32e-132, 1.25e-132,
1.17e-132, 1.11e-132, 1.04e-132, 9.81e-133, 9.24e-133, 8.7e-133,
8.19e-133, 7.72e-133, 7.27e-133, 6.85e-133, 6.45e-133, 6.07e-133,
5.72e-133, 5.39e-133, 5.07e-133, 4.78e-133, 4.5e-133, 4.24e-133,
3.99e-133, 3.76e-133, 3.54e-133, 3.33e-133, 3.14e-133, 2.96e-133,
2.78e-133, 2.62e-133, 2.47e-133, 2.32e-133, 2.19e-133, 2.06e-133,
1.94e-133, 1.83e-133, 1.72e-133, 1.62e-133, 1.53e-133, 1.44e-133,
1.35e-133, 1.27e-133, 1.2e-133, 1.13e-133, 1.06e-133, 1e-133,
9.42e-134, 8.87e-134, 8.35e-134, 7.86e-134, 7.4e-134, 6.96e-134,
6.56e-134, 6.17e-134, 5.81e-134, 5.47e-134, 5.15e-134, 4.85e-134,
4.56e-134, 4.29e-134, 4.04e-134, 3.8e-134, 3.58e-134, 3.37e-134,
3.17e-134, 2.99e-134, 2.81e-134, 2.64e-134, 2.49e-134, 2.34e-134,
2.2e-134, 2.08e-134, 1.95e-134, 1.84e-134, 1.73e-134, 1.63e-134,
1.53e-134, 1.44e-134, 1.36e-134, 1.28e-134, 1.2e-134, 1.13e-134,
1.06e-134, 1e-134, 9.42e-135, 8.86e-135, 8.34e-135, 7.85e-135,
7.39e-135, 6.95e-135, 6.54e-135, 6.15e-135, 5.79e-135, 5.45e-135,
5.12e-135, 4.82e-135, 4.54e-135, 4.27e-135, 4.02e-135, 3.78e-135,
3.55e-135, 3.34e-135, 3.15e-135, 2.96e-135, 2.78e-135, 2.62e-135,
2.46e-135, 2.32e-135, 2.18e-135, 2.05e-135, 1.93e-135, 1.82e-135,
1.71e-135, 1.61e-135, 1.51e-135, 1.42e-135, 1.34e-135, 1.26e-135,
1.18e-135, 1.11e-135, 1.05e-135, 9.84e-136, 9.26e-136, 8.71e-136,
8.19e-136, 7.7e-136, 7.25e-136, 6.81e-136, 6.41e-136, 6.03e-136,
5.67e-136, 5.33e-136, 5.01e-136, 4.72e-136, 4.43e-136, 4.17e-136,
3.92e-136, 3.69e-136, 3.47e-136, 3.26e-136, 3.07e-136, 2.88e-136,
2.71e-136, 2.55e-136, 2.4e-136, 2.26e-136, 2.12e-136, 1.99e-136,
1.87e-136, 1.76e-136, 1.66e-136, 1.56e-136, 1.47e-136, 1.38e-136,
1.3e-136, 1.22e-136, 1.15e-136, 1.08e-136, 1.01e-136, 9.52e-137,
8.95e-137, 8.41e-137, 7.91e-137, 7.44e-137, 6.99e-137, 6.57e-137,
6.18e-137, 5.81e-137, 5.46e-137, 5.13e-137, 4.83e-137, 4.54e-137,
4.26e-137, 4.01e-137, 3.77e-137, 3.54e-137, 3.33e-137, 3.13e-137,
2.94e-137, 2.77e-137, 2.6e-137, 2.44e-137, 2.3e-137, 2.16e-137,
2.03e-137, 1.91e-137, 1.79e-137, 1.68e-137, 1.58e-137, 1.49e-137,
1.4e-137, 1.31e-137, 1.24e-137, 1.16e-137, 1.09e-137, 1.03e-137,
9.64e-138, 9.06e-138, 8.51e-138, 8e-138, 7.52e-138, 7.07e-138,
6.64e-138, 6.24e-138, 5.86e-138, 5.51e-138, 5.18e-138, 4.87e-138,
4.57e-138, 4.3e-138, 4.04e-138, 3.79e-138, 3.56e-138, 3.35e-138,
3.15e-138, 2.96e-138, 2.78e-138, 2.61e-138, 2.45e-138, 2.31e-138,
2.17e-138, 2.04e-138, 1.91e-138, 1.8e-138, 1.69e-138, 1.59e-138,
1.49e-138, 1.4e-138, 1.32e-138, 1.24e-138, 1.16e-138, 1.09e-138,
1.02e-138, 9.62e-139, 9.04e-139, 8.49e-139, 7.98e-139, 7.5e-139,
7.04e-139, 6.61e-139, 6.21e-139, 5.84e-139, 5.48e-139, 5.15e-139,
4.84e-139, 4.55e-139, 4.27e-139, 4.01e-139, 3.77e-139, 3.54e-139,
3.32e-139, 3.12e-139, 2.93e-139, 2.75e-139, 2.59e-139, 2.43e-139,
2.28e-139, 2.14e-139, 2.01e-139, 1.89e-139, 1.78e-139, 1.67e-139,
1.57e-139, 1.47e-139, 1.38e-139, 1.3e-139, 1.22e-139, 1.14e-139,
1.07e-139, 1.01e-139, 9.48e-140, 8.9e-140, 8.36e-140, 7.85e-140,
7.37e-140, 6.92e-140, 6.5e-140, 6.1e-140, 5.73e-140, 5.38e-140,
5.05e-140, 4.75e-140, 4.46e-140, 4.19e-140, 3.93e-140, 3.69e-140,
3.46e-140, 3.25e-140, 3.05e-140, 2.87e-140, 2.69e-140, 2.53e-140,
2.37e-140, 2.23e-140, 2.09e-140, 1.97e-140, 1.84e-140, 1.73e-140,
1.63e-140, 1.53e-140, 1.43e-140, 1.35e-140, 1.26e-140, 1.19e-140,
1.11e-140, 1.05e-140, 9.81e-141, 9.21e-141, 8.65e-141, 8.12e-141,
7.62e-141, 7.16e-141, 6.72e-141, 6.31e-141, 5.92e-141, 5.56e-141,
5.22e-141, 4.9e-141, 4.6e-141, 4.31e-141, 4.05e-141, 3.8e-141,
3.57e-141, 3.35e-141, 3.14e-141, 2.95e-141, 2.77e-141, 2.6e-141,
2.44e-141, 2.29e-141, 2.15e-141, 2.02e-141, 1.89e-141, 1.78e-141,
1.67e-141, 1.57e-141, 1.47e-141, 1.38e-141, 1.29e-141, 1.21e-141,
1.14e-141, 1.07e-141, 1e-141, 9.42e-142, 8.84e-142, 8.3e-142,
7.79e-142, 7.31e-142, 6.86e-142, 6.44e-142, 6.04e-142, 5.67e-142,
5.32e-142, 4.99e-142, 4.68e-142, 4.39e-142, 4.12e-142, 3.87e-142,
3.63e-142, 3.41e-142, 3.2e-142, 3e-142, 2.81e-142, 2.64e-142,
2.48e-142, 2.33e-142, 2.18e-142, 2.05e-142, 1.92e-142, 1.8e-142,
1.69e-142, 1.59e-142, 1.49e-142, 1.4e-142, 1.31e-142, 1.23e-142,
1.15e-142, 1.08e-142, 1.01e-142, 9.52e-143, 8.93e-143, 8.38e-143,
7.86e-143, 7.38e-143, 6.92e-143, 6.49e-143, 6.09e-143, 5.71e-143,
5.36e-143, 5.03e-143, 4.72e-143, 4.42e-143, 4.15e-143, 3.89e-143,
3.65e-143, 3.43e-143, 3.21e-143, 3.01e-143, 2.83e-143, 2.65e-143,
2.49e-143, 2.33e-143, 2.19e-143, 2.05e-143, 1.93e-143, 1.81e-143,
1.69e-143, 1.59e-143, 1.49e-143, 1.4e-143, 1.31e-143, 1.23e-143,
1.15e-143, 1.08e-143, 1.01e-143, 9.51e-144, 8.92e-144, 8.37e-144,
7.85e-144, 7.36e-144, 6.9e-144, 6.47e-144, 6.07e-144, 5.69e-144,
5.34e-144, 5.01e-144, 4.7e-144, 4.4e-144, 4.13e-144, 3.87e-144,
3.63e-144, 3.41e-144, 3.19e-144, 2.99e-144, 2.81e-144, 2.63e-144,
2.47e-144, 2.32e-144, 2.17e-144, 2.04e-144, 1.91e-144, 1.79e-144,
1.68e-144, 1.57e-144, 1.48e-144, 1.38e-144, 1.3e-144, 1.22e-144,
1.14e-144, 1.07e-144, 1e-144, 9.4e-145, 8.81e-145, 8.26e-145,
7.75e-145, 7.26e-145, 6.81e-145, 6.38e-145, 5.99e-145, 5.61e-145,
5.26e-145, 4.93e-145, 4.62e-145, 4.33e-145, 4.06e-145, 3.81e-145,
3.57e-145, 3.35e-145, 3.14e-145, 2.94e-145, 2.76e-145, 2.59e-145,
2.42e-145, 2.27e-145, 2.13e-145, 2e-145, 1.87e-145, 1.75e-145,
1.64e-145, 1.54e-145, 1.44e-145, 1.35e-145, 1.27e-145, 1.19e-145,
1.12e-145, 1.05e-145, 9.8e-146, 9.18e-146, 8.61e-146, 8.07e-146,
7.56e-146, 7.09e-146, 6.64e-146, 6.23e-146, 5.84e-146, 5.47e-146,
5.13e-146, 4.8e-146, 4.5e-146, 4.22e-146, 3.95e-146, 3.71e-146,
3.47e-146, 3.26e-146, 3.05e-146, 2.86e-146, 2.68e-146, 2.51e-146,
2.35e-146, 2.21e-146, 2.07e-146, 1.94e-146, 1.81e-146, 1.7e-146,
1.59e-146, 1.49e-146, 1.4e-146, 1.31e-146, 1.23e-146, 1.15e-146,
1.08e-146, 1.01e-146, 9.47e-147, 8.88e-147, 8.32e-147, 7.79e-147,
7.3e-147, 6.84e-147, 6.41e-147, 6.01e-147, 5.63e-147)), .Names = c("X",
"Y"), class = "data.frame", row.names = c(NA, -1000L)) 
```

代码

```
plot(x=df$X, y=df$Y) 
```

![在此处输入图像描述](../Images/1281b4a7a4e5ea90cb377b666cdea238.png)

和`ggplot2`

```
library(ggplot2)
library(scales)
p <- ggplot(data=df, aes(x=X, y=Y))+geom_point()
p 
```

![在此处输入图像描述](../Images/6a1fc28a3625294f222546a3abba29a8.png)

我无法弄清楚如何设置`ylim`in`ggplot2`以获得正确的图表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T19:11:11.740

如果您绝对想使用`ggplot2`，那么您可以使用缩放和标签来解决该错误，直到它被修复：

```
# a scaling constant
s <- 1E120

# scale Y to get around bug, but then unscale Y's labels
ggplot(df, aes(x=X, y=Y*s)) +
  geom_point() +
  scale_y_continuous(labels=function(x) as.character(x/s)) +
  ylab("Y") 
```

![在此处输入图像描述](../Images/88f0bdb6dd2ae02990f05a660edfd211.png)

# fortran - Fortran 95 中的稀疏 Blas

> ID：10808060
> 
> 赞同：0
> 
> 时间：2012-05-29T23:21:23.547
> 
> 标签：fortran, sparse-matrix, fortran90, blas, finite-element-analysis

我想在 Fortran95 中使用 Sparse Blas 来创建矩阵，并且我正在使用点入口构造。使用命令创建矩阵后

调用 duscr_begin(n,n,a,istat)

这里 a 是 n 乘以 n 的矩阵的句柄。在其中插入值后，如何使用其句柄 a 查看最终矩阵？由于我想将矩阵用于其他一些操作，所以我想以三个向量（稀疏）形式（row_index、Col_index、Value）查看矩阵。

关于这个 Sparse Blas 的详细信息在第 3 章中给出，可以在这里看到

[http://www.netlib.org/blas/blast-forum/](http://www.netlib.org/blas/blast-forum/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:05:59.400

实际上我问的是在 16 天之前，这不仅仅是在屏幕上写一个变量。我正在使用一些称为 Sparse Blas 的库来创建稀疏矩阵。后来通过深入研究图书馆，我找到了解决我的问题的方法，即使用句柄我们如何获得三个向量行、col 和 Val。命令类似于

```
call accessdata_dsp(mat,a_handle,ierr)
call get_infoa(mat%INFOA,'n',nnz,ierr)
allocate(K0_row(nnz),K0_col(nnz),K0_A(nnz))
K0_row=mat%IA1; K0_col=mat%IA2; K0_A=mat%A 
```

所以这里 nnz 是稀疏矩阵中的非零项，而 K0_row、K0_col 和 K0_A 是我们需要的三个向量，可以在进一步计算中使用。

# python - google API - python outh2 应用程序身份验证

> ID：10808062
> 
> 赞同：3
> 
> 时间：2012-05-29T23:21:30.130
> 
> 标签：python, google-api, google-docs-api, google-authentication

我有一个简单的场景，我找不到解决方案。我想为我的应用程序使用 Docs API，但我只想使用一个应用程序帐户来存储文档并执行所有 API 调用。所以我不想使用所有这些需要任何用户交互的 redirect_uri 东西——只有我的应用程序和它自己的 Google 帐户。

我在这里发现了类似的问题：[gdata-python-api + Analytics with simple auth](https://stackoverflow.com/questions/5903278/gdata-python-api-analytics-with-simple-auth)，但解决方案仍然涉及用户交互（是的，可能只有一次，但我仍然不喜欢它，因为与 API 的大部分交互将由一些守护进程）。

我正在使用 gdata-python-client 与 API 交互。我不确定我是否正确理解 ServiceAccount 身份验证是否可能是一种解决方案，但找不到任何关于如何通过 gdata-python-client lib 执行它的示例（有人可以分享工作代码吗？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:17:41.977

要访问此单个用户拥有的文档，您必须拥有该用户的访问令牌。真的没有办法解决这个问题。访问令牌是 Google 识别您的项目、您希望访问哪个用户的数据以及您拥有所有必要权限的方式。

听起来您已经找到了解决方案：您必须在某个时间点完成 OAuth 2.0 舞蹈并存储以`refresh_token`供后续访问。但是请注意，这`refresh_token`可能不会永远持续下去。例如，如果访问被撤销，它将停止工作。出于这个原因，明智的做法是公开从应用程序的管理页面再次执行 OAuth 2.0 的能力。

# html - 为什么我不能有一个内部 ? 我想了解这有什么问题：

## 

| Text |

< 问问题 问问题 2012-05-29T23:21:40.987 873 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我想了解这有什么问题：

## 

| Text |

Validator 抱怨：文档类型在此处不允许元素“table”；缺少“object”、“ins”、“del”、“map”、“button”开始标签之一 进一步的解释说： 所提到的元素不允许出现在您放置它的上下文中；其他提到的元素是唯一允许在那里并且可以包含提到的元素的元素。这可能意味着您需要一个包含元素，或者您可能忘记关闭前一个元素。 出现此消息的一个可能原因是您试图将块级元素（例如“

”或“

”）放入内联元素（例如“ ”、“ ”或“ ”）中。 h2 和 table 都是块级的，所以最后一条评论似乎不适用。我想要一个包含 h2 大小元素的表格......告诉表格使用与 h2 相同的大小的正确方法是什么？ 谢谢！ 是的，你可以使用这样的东西： Dialog confirmDeleteDialog = new Dialog(this); confirmDeleteDialog.setContentView(R.layout.custom_message_dialog); //This allows dialog to be closed with back button confirmDeleteDialog.setCancelable(true); //DisplayMetrics will get the screen dimensions and allow you to //declare a center point DiaplayMetrics displaymetrics = new DisplayMetrics(); getWindowManager().getDefaultDisplay().getMetrics(displaymetrics); int screenHeight = displaymetrics.heightPixels; //Divide by 2 to get mid int screenWidth = displaymetrics.widthPixels; //Divide by 2 to get mid Button closeButton = (Button) confirmDeleteDialog.findViewById(R.id.close_button); closeButton.setOnClickListener(this); confirmDeleteDialog.show(); custom_message_dialog.xml - 可能看起来像这样： <relativelayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent"></relativelayout>

是什么 size

## 。 但是，您可以告诉表和 h2 都是一种特定的大小，例如： h2, table { font-size: 2em; } 您还可以使用 Chrome 的 Web Inspector（或其他浏览器中的类似工具）来检查默认样式是什么，并将相关的样式应用于您的表格。不过，这些默认样式可能因浏览器而异。 至于为什么

## 标签内不能有表格，我不确定 HTML 规范是否为其嵌套规则提供了基本原理，但

## s 旨在标记标题，即相对较短的描述文档部分的文本。 很难想象一个表格如何成为一个合适的标题。 于 2012-05-29T23:27:25.040 回答 Related 3 c# - ASP.Net：回发后如何维护 TextBox 状态 1 javascript - PostBackUrl="javascript:void(0); restrict postback of all controls on the page 1 html - Responsive web design: can i detect touch screens? 1 spring-mvc - How to configure spring mvc project which contains controller both annotated and configured 1 mysql - Generate random BLOB in MySQL 1 coldfusion - POST JSON ignoring content-type 2 websphere - Websphere SOAP 超时 1 javascript - 元素是否在内部嵌套滚动的后面 2 ios - why can't I access iPad photos library? 1 mysql - MySQL 连接器和日期类型 0000-00-00 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10808064
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, markup, specifications

我想了解这有什么问题：

```
<body>
    <h2>
        <table>
        <tr>
            <td> Text</td>
        </tr>
        </table>
    </h2>
</body> 
```

Validator 抱怨：文档类型在此处不允许元素“table”；缺少“object”、“ins”、“del”、“map”、“button”开始标签之一

进一步的解释说：

> 所提到的元素不允许出现在您放置它的上下文中；其他提到的元素是唯一允许在那里并且可以包含提到的元素的元素。这可能意味着您需要一个包含元素，或者您可能忘记关闭前一个元素。
> 
> 出现此消息的一个可能原因是您试图将块级元素（例如“ `<p>`”或“ `<table>`”）放入内联元素（例如“ `<a>`”、“ `<span>`”或“ `<font>`”）中。

h2 和 table 都是块级的，所以最后一条评论似乎不适用。我想要一个包含 h2 大小元素的表格......告诉表格使用与 h2 相同的大小的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T23:24:05.383

CSS。标题中根本不允许使用表格，因为它没有语义意义。你见过书名是表格的章节吗？不要为外观使用 HTML 语义标签；自己设计它们。  CSS是块还是内联并不重要`table`，只有HTML DTD所说的它们是什么。看[这里](http://www.w3.org/TR/html401/struct/tables.html#h-11.2.6)：只允许“流”元素进入`td`. 按照链接查看“流”的定义：您会看到它是“内联”或“块”。您可以继续向下跟踪这些链接，直到您发现，例如`sub`很好，原样`span`......但您不会找到`table`.

此外 - 表格甚至不是`display: block`- 它们有自己的布局值，`display: table`. 这并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T23:27:25.040

CSS 是更改 HTML 元素大小的适当方式。HTML 并非旨在用于创建视觉效果。

CSS 中没有办法明确告诉 a`<table>`是什么 size `<h2>`。

但是，您可以告诉表和 h2 都是一种特定的大小，例如：

```
h2,
table {
    font-size: 2em;
} 
```

您还可以使用 Chrome 的 Web Inspector（或其他浏览器中的类似工具）来检查默认样式是什么，并将相关的样式应用于您的表格。不过，这些默认样式可能因浏览器而异。

至于为什么`<h2>`标签内不能有表格，我不确定 HTML 规范是否为其嵌套规则提供了基本原理，但`<h2>`s 旨在标记标题，即相对较短的描述文档部分的文本。

很难想象一个表格如何成为一个合适的标题。

# android - 试图从安卓应用程序中的网站下载信息？

> ID：10808065
> 
> 赞同：0
> 
> 时间：2012-05-29T23:21:52.377
> 
> 标签：android

我开始一项活动，并在创建时调用此下载方法

```
public void download(){
 thread = new Runnable () {
       public void run() {     
      try{
                /* Get a SAXParser from the SAXPArserFactory. */
    SAXParserFactory spf =    SAXParserFactory.newInstance();
    SAXParser sp = spf.newSAXParser();

        Get the XMLReader of the SAXParser we created. */
    XMLReader xr = sp.getXMLReader();

    /*
     * Create a new ContentHandler and apply it to the
     * XML-Reader                */
    WeatherHandler gwh = new GoogleWeatherHandler();
    xr.setContentHandler(gwh);
    /* Parse the xml-data our URL-call returned. */
        temp////is a url defined
        xr.parse(new InputSource(temp.openStream()));

    ws = gwh.getWeatherSet();
}
    catch(Exception e){

    }                     
    }new Thread(thread).start();

 } 
```

问题是，如果我调试并实际越线`thread.start`，它是否有效，如果不是，线程不会启动？我怎样才能从网站上下载信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:24:18.787

通常，在 Android 中执行异步任务的正确方法是实现一个扩展`AsyncTask`.

# blob - 如何将 blob 与 ebean & play 2 一起使用？

> ID：10808069
> 
> 赞同：5
> 
> 时间：2012-05-29T23:22:39.397
> 
> 标签：blob, playframework-2.0, ebean

这是包含 blob 类型的实体：

```
@Entity
@Table(name="image_info")
public class ImageInfo extends Model {

    .......

    @Constraints.Required
    private Blob image;

    .......
} 
```

$ play -DapplyEvolutions.default=true 运行

我收到如下错误：

```
[warn] c.j.b.ConnectionPartition - BoneCP detected an unclosed connection and will now attempt to close it for you. You should be closing this connection in your application - enable connectionWatch for additional debugging assistance.
[error] c.a.e.s.t.r.ImmutableMetaFactory - Was unable to use reflection to find a constructor and appropriate getters forimmutable type interface java.sql.Blob.  The errors while looking for the getter methods follow:
[error] c.a.e.s.d.p.DeployCreateProperties - Error with models.ImageInfo field:image
java.lang.RuntimeException: Unable to use reflection to build ImmutableMeta for interface     java.sql.Blob.  Associated Errors trying to find a constructor and getter methods have been logged
at com.avaje.ebeaninternal.server.type.reflect.ImmutableMetaFactory.createImmutableMeta(ImmutableMetaFactory.java:71) ~[ebean.jar:na]
at com.avaje.ebeaninternal.server.type.DefaultTypeManager.recursiveCreateScalarTypes(DefaultTypeManager.java:227) ~[ebean.jar:na]
at com.avaje.ebeaninternal.server.deploy.parse.DeployCreateProperties.createProp(DeployCreateProperties.java:357) [ebean.jar:na]
at com.avaje.ebeaninternal.server.deploy.parse.DeployCreateProperties.createProp(DeployCreateProperties.java:377) [ebean.jar:na]
at com.avaje.ebeaninternal.server.deploy.parse.DeployCreateProperties.createProperties(DeployCreateProperties.java:168) [ebean.jar:na]
at com.avaje.ebeaninternal.server.deploy.parse.DeployCreateProperties.createProperties(DeployCreateProperties.java:94) [ebean.jar:na] 
```

如何进行更改以便可以识别 blob 类型？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T01:11:45.320

要`blob`使用 Ebean 创建，您需要使用带`@Lob`注释的字节数组

```
@Lob
public byte[] image; 
```

很可能您需要在 File <-> 字节数组之间进行转换，所以将文件存储在文件系统中可能更容易？（除了在 FS 中存储文件比在 DB 中存储文件更便宜）

如果您需要特殊的访问限制，您可以使用自己的控制器检查权限并通过存储在数据库中的路径从磁盘流式传输文件。

# .net - 使用用于 Active Directory 的虚拟机进行应用程序开发

> ID：10808075
> 
> 赞同：0
> 
> 时间：2012-05-29T23:23:51.160
> 
> 标签：.net, c#-4.0, testing, active-directory

我正在开发一个 .NET 应用程序，它需要通过 Active Directory 进行用户身份验证和角色管理。我想知道是否有办法在虚拟机上安装 AD 测试实例（通过 Virtual PC 安装 Windows Server 2003）并从我的桌面环境连接到 VM AD 实例？

我在本地桌面上尝试过 AD LDS 和 ADAM，但无论出于何种原因一直遇到问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:34:22.123

好吧，如果您运行的是 Server 2003，那么您只需通过“管理您的服务器”将域控制器（Active Directory）角色添加到它。

[http://support.microsoft.com/kb/324753](http://support.microsoft.com/kb/324753)

您在使用 AD LDS 时遇到了哪些问题？它非常适合您的需求，因为它只是为应用程序提供目录服务（如上创建一个全新的域可能有点矫枉过正）。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa705886(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa705886(v=vs.85).aspx)

一旦您通过任何方法创建了 AD 实例，您就可以在主机工作站和客户端虚拟机之间创建一个专用网络 - 例如，在 VMware 工作站/播放器的网络适配器设置下的 IE 'host-only'。这意味着您可以运行虚拟机并在它与主机之间进行通信，而不必担心破坏其他任何东西。

[http://www.vmware.com/support/ws55/doc/ws_net_advanced_ipaddress.html](http://www.vmware.com/support/ws55/doc/ws_net_advanced_ipaddress.html)

我现在正在针对生产 DC 的副本测试一些 PowerShell 代码。

# sql - 如何创建触发器以仅在插入的内容不在其他表中时才允许插入

> ID：10808076
> 
> 赞同：1
> 
> 时间：2012-05-29T23:23:51.503
> 
> 标签：sql, sql-server-2008

好的，我今天早些时候搜索了 2 小时的大部分时间，但无法找到我的问题的答案。所以我会试着看看你们是否能帮助我。

所以我想做的是创建一个触发器，在插入表 A 时将检查插入的内容是否在表 B 中，如果是，则不要将其插入任何表中，只需忽略插入，否则继续插入进入表 A。

例如，[实际上与我的问题非常相似，只是名称不同等]

假设我有表 A 和表 B。表 B 由“名称”和“地址”组成。表 A 包含“名称”、“地址”、“最喜欢的颜色”和大约 3-4 个其他列。

我想在表 A 中插入“Sue”、“PO Box 1 Lunar Avenue”、“Grey”等。但是低调地，表 B 中已经有一个“Sue”、“PO Box 1 Lunar Avenue”组合，所以我想忽略该插入并继续。

“名称”或“地址”都不是任何类型的键，除了表上有一个约束不允许任何“名称”和“地址”组合重复。

我使用 SQL Server 2008 R2 作为参考点。

提前感谢您的回答！^^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:08:31.497

类似于以下内容：

```
CREATE TRIGGER T_TableA_I
ON TableA
INSTEAD OF INSERT
AS
     INSERT INTO TableA (Name,Address,/* Other columns */)
     SELECT i.Name,i.Address,/* Other columns from inserted */
     FROM
         inserted i
             left join
         TableB b
             on
                 i.Name = b.Name and
                 i.Address = b.Address
     WHERE
         b.Name is null --So the join was unsuccessful. 
```

但我仍然担心是否需要处理以后插入 TabelB 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T04:17:33.803

查看[INSTEAD OF](http://msdn.microsoft.com/en-us/library/ms175521%28v=sql.105%29.aspx)触发器，它允许您在 INSERT 发生之前采取行动：

> INSTEAD OF 触发器可以执行以下操作：
> 
> *   忽略批次的一部分。
> *   不处理批次的一部分并记录问题行。
> *   遇到错误情况时采取替代操作。

# c# - 如何在工作服务器上实现类似 IIS 的线程池

> ID：10808083
> 
> 赞同：1
> 
> 时间：2012-05-29T23:24:35.463
> 
> 标签：c#, multithreading, asynchronous, azure, threadpool

**编辑** 我意识到我的问题表述得不够清楚，并对其进行了大量编辑。
这是一个开放式问题，所以提前道歉。

*简而言之，我想在 Azure 辅助角色中实现 IIS 样式的异步请求处理*。

它可能非常简单，也可能非常困难——我正在寻找指向何处研究的指针。

虽然我的实现将使用 Azure Worker 和服务总线队列，但一般原则适用于工作进程正在侦听传入请求并为其提供服务的任何场景。

## IIS 的作用

在 IIS 中有一个固定大小的线程池。如果您同步处理所有请求，那么您可以并行处理的最大请求数 == maxthreads。但是，如果您必须通过缓慢的外部 I/O 来处理请求，那么这是非常低效的，因为您最终可能会导致服务器处于空闲状态，而所有线程都处于等待外部 I/O 完成的状态。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ee728598.aspx)：

> 在 Web 服务器上，.NET Framework 维护一个线程池，用于为 ASP.NET 请求提供服务。当请求到达时，池中的一个线程被分派来处理该请求。如果请求是同步处理的，则处理请求的线程在处理请求时会被阻塞，并且该线程无法为另一个请求提供服务。
> 
> 这可能不是问题，因为线程池可以足够大以容纳许多阻塞的线程。但是，线程池中的线程数是有限的。在处理多个同时长时间运行的请求的大型应用程序中，所有可用线程都可能被阻塞。这种情况称为线程饥饿。达到此条件时，Web 服务器将请求排队。如果请求队列已满，Web 服务器将拒绝 HTTP 503 状态（服务器太忙）的请求。

为了克服这个问题，IIS 有一些巧妙的逻辑允许您异步处理请求：

> 调用异步操作时，会发生以下步骤：
> 
> 1.  Web 服务器从线程池中获取一个线程（工作线程）并调度它来处理传入的请求。此工作线程启动异步操作。
>     
>     
> 2.  工作线程返回到线程池以服务另一个 Web 请求。
>     
>     
> 3.  当异步操作完成时，它会通知 ASP.NET。
>     
>     
> 4.  Web 服务器从线程池（可能与启动异步操作的线程不同的线程）中获取一个工作线程来处理请求的其余部分，包括呈现响应。

这里的重点是当异步请求返回时，返回操作被安排在为初始传入请求提供服务的*同一*线程池之一上运行。这意味着系统限制了它同时执行的工作量，这就是我想要复制的内容。

## 我想做的事

我想创建一个 Worker 角色，它将在 Azure 服务总线队列上侦听传入的工作请求，也可能在 TCP 套接字上侦听。像 IIS 一样，我想拥有一个最大的线程池大小，并且我想限制工作人员并行执行的*实际工作量；*如果工作人员忙于服务现有请求 - 无论是新传入请求还是来自先前异步调用的回调 - 在某些线程被释放之前，我不想接收任何新传入请求。

限制我同时*开始*的工作数量不是问题——这很容易控制；它限制了我*实际*同时工作的数量。

让我们假设一个有 100 个线程的线程池。

*   我收到 100 个发送电子邮件的请求，每封电子邮件需要 5 秒才能发送到 SMTP 服务器。如果我将我的服务器限制为同时只处理 100 个请求，那么我的服务器将在 5 秒内无法执行任何其他操作，而 CPU 则完全空闲。所以，我并不介意同时发送 1,000 或 10,000 封电子邮件，因为 99% 的“请求处理时间”将用于等待外部 I/O，而我的服务器仍然非常安静。因此，我可以通过继续无限制地接受传入请求来处理这种特定情况（或者只限制请求的*开始*，直到我触发异步调用；一旦调用 BeginSend，我就会返回并开始服务另一个请求）。

*   现在，想象一下，我有一种类型的请求，它去数据库读取一些数据，对其进行一些繁重的计算，然后将其写回数据库。那里有两个数据库请求应该是异步的，但 90% 的请求处理时间将花在我的工作人员身上。因此，如果我遵循与上述相同的逻辑并保持启动异步调用并让返回做任何需要让线程继续运行的操作，那么我最终会得到一个非常过载的服务器。

*不知何故，IIS 所做的是确保当异步调用返回时，它使用相同的固定大小的线程池。这意味着如果我触发大量异步调用，然后它们返回并开始使用我的线程，IIS 将不会接受新请求，直到这些返回完成。这是完美的，因为它确保了服务器上的合理负载，特别是当我有多个负载平衡的服务器和服务器从中挑选工作的队列系统时。*

我有这种偷偷摸摸的怀疑，这可能很简单，我只是缺少一些基本的东西。或者，这可能非常困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:14:43.243

创建线程池应被视为独立于 Windows Azure。由于 Worker Role 实例实际上是 Windows 2008 Server R2（或 SP2），因此并没有什么不同。您只需要从您的`OnStart()`或`Run()`.

您想做的一件事是在扩展到更多/更少的工作实例时使用队列长度作为决定因素。请注意，服务总线队列不会公布队列长度，而 Windows Azure 队列（基于存储，而不是服务总线）*会这样做*。使用 Windows Azure 队列，您需要同步轮询消息（而服务总线队列具有长轮询操作）。查看服务总线队列和 Windows Azure 队列之间的差异可能是一个好主意，请[点击此处](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:27:03.377

您是否考虑过使用专用的 WCF 实例（不是托管 WAS 或 IIS）来缓冲长时间运行的请求？它将有自己的专用应用程序池，具有来自 IIS 的单独的最大值设置，不会与您的 ASP.NET HTTP 请求竞争。（HTTP 请求由

然后使用 IIS 异步方法通过受约束的应用程序池调用 WCF。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T23:34:21.477

我过去曾将[SmartThreadPool](http://www.codeproject.com/Articles/7933/Smart-Thread-Pool)项目用作每个实例的池，如果我没看错的话，它应该具有您需要的所有回调和工人限制功能。实际上，我的公司目前在 Azure 上运行它，用于您描述的异步读取消息总线请求的确切目的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T14:21:33.687

我一直在这方面进行挖掘，发现它确实相对容易。 [http://www.albahari.com/threading/](http://www.albahari.com/threading/)得到了一些很好的信息，实际上我最终购买了该网站本质上正在推广的书。

我发现的是；

*   默认情况下，您的应用程序有一个可用的 ThreadPool
*   您可以限制 ThreadPool 中可用的线程数
*   当您使用`QueueUserWorkItem`或`Task.Factory.StartNew`开始在 ThreadPool 中的线程上运行作业时
*   当您在框架中使用其中一个异步 IO 调用（`Begin...`方法`WebcClient.DownloadStringAsync`等）时，回调也将在来自 ThreadPool 的线程上运行（IO 请求本身发生的事情超出了本讨论的范围）。

到现在为止还挺好。问题是我可以随心所欲地继续调用`Task.Factory.StartNew`，而 ThreadPool 将简单地将工作排队，直到有空闲线程为它们提供服务。**因此，对于 Azure Worker，即使我的 Worker 正忙于服务现有请求（以及来自现有请求的回调），我也可以轻松清空队列**。这是我问题的核心。我想要的是在我真正有一些空闲线程来服务请求之前不要从队列中取出任何东西。

这是一个非常简单的例子，说明了如何实现这一点。本质上，我使用 an`AutoResetEvent`来确保在前一个任务实际开始之前我不会从队列中启动另一个任务。诚然，我确实在有空闲线程之前从队列中取出了东西，但总的来说，这应该避免工作人员的疯狂过载，并允许我启动更多工作人员来分担负载。

```
ThreadPool.SetMaxThreads(5, 1000); // Limit to 5 concurrent threads
ThreadPool.SetMinThreads(5, 10); // Ensure we spin up all threads

var jobStart = new AutoResetEvent(true);

// The "listen" loop
while (true) 
{   
    var job = this.jobQueue.Dequeue();
    jobStart.WaitOne(); // Wait until the previous job has actually been started
    Task.Factory.StartNew(
        () =>
            {
                jobStart.Set(); // Will happen when the threadpool allocates this job to a thread
                this.Download(job);
            });

} 
```

这可以 - 并且可能应该 - 变得更加复杂，包括超时，如果在合理的时间内无法分配线程，则将工作项放回队列中等等。另一种方法是`ThreadPool.GetAvailableThreads`在开始侦听队列之前检查是否有空闲线程，但这感觉更容易出错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T00:41:25.093

据我了解，您希望限制用于同时处理某种类型消息的线程数。

一种方法是简单地包装消息处理器，在新线程上调用类似

```
try
{
   Interlocked.Increment(ref count)

   Process(message);
}
finally 
{
    Interlocked.Decrement(ref count)
} 
```

在调用包装器之前，只需检查“计数”是否小于您的阈值计数；并停止轮询/处理更多消息，直到计数足够低。

**编辑**根据评论添加了更多信息

Frans，不知道为什么你会看到基础设施和业务代码是耦合的。一旦您将要作为任务服务的业务流程放在新线程上以异步运行，您就不必担心异步执行额外的 IO 绑定调用。这是一个更简单的编程模型。

这就是我的想法。

```
// semi - pseudo-code

// Infrastructure – reads messages from the queue 
//    (independent thread, could be a triggered by a timer)
while(count < maxCount && (message = Queue.GetMessage()) != null)
{
    Interlocked.Increment(ref count);

  // process message asynchronously on a new thread
  Task.Factory.StartNew(() => ProcessWrapper(message));     
}

// glue / semi-infrastructure - deals with message deletion and exceptions 
void ProcessWrapper(Message message)
{
   try
   {
      Process(message);
      Queue.DeleteMessage(message);
   }
   catch(Exception ex)
   {
      // Handle exception here.
      // Log, write to poison message queue etc ...
   }
   finally 
   {
      Interlocked.Decrement(ref count)
   }
}

// business process
void Process(Message message)
{
  // actual work done here
  ;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T17:46:51.523

> 不知何故，IIS 所做的是确保当异步调用返回时，它使用相同的固定大小的线程池。

这不是真的：当您的代码响应 HTTP 请求而运行时，*您*决定继续函数执行哪些线程。通常，这是线程池。并且线程池是一个应用域范围的资源，在所有请求之间共享。

我认为 IIS 没有你想象的那么“神奇”。它所做的只是限制并行 HTTP 请求的数量和积压的大小。一旦获得 ASP.NET 的控制权，您就*可以决定发生什么。*

如果您的代码没有防止服务器超载，即使在 IIS 上，您也会使服务器超载*。*

# javascript - 检查客户端中的 InternetExplorer 对象。

> ID：10808087
> 
> 赞同：0
> 
> 时间：2012-05-29T23:24:44.137
> 
> 标签：javascript, vbscript

是否有 javascript 或 VBscript 中的代码由客户端检查网页是否加载到普通 Internet Explorer IE 或 InternetExplorer 对象（在软件内部）？

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:41:04.687

我想这是为了阻止攻击？

您可以检查 document.referrer 但请记住，在某些情况下这也可能被欺骗，请参阅此[http://www.cgisecurity.com/lib/XmlHTTPRequest.shtml](http://www.cgisecurity.com/lib/XmlHTTPRequest.shtml)文章以了解更多信息。

# javascript - 在 jQuery 中使用 css 转换属性

> ID：10808096
> 
> 赞同：59
> 
> 时间：2012-05-29T23:26:07.423
> 
> 标签：javascript, jquery, css

由于每个浏览器似乎都使用自己的方法，如何使用 jQuery 指定跨浏览器转换控件？

这是我用于 Firefox 的代码，但我什至无法让它工作。我认为这是因为无法分辨使用哪种变换——缩放、旋转、倾斜。

```
$(".oSlider-rotate").slider({
     min: 10,
     max: 74,
     step: .01,
     value: 24,
     slide: function(e,ui){
                 $('.user-text').css('transform', ui.value)

            }                
  }); 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-05-29T23:35:41.293

如果您想使用特定的转换函数，那么您需要做的就是将该函数包含在值中。例如：

```
$('.user-text').css('transform', 'scale(' + ui.value + ')'); 
```

其次，浏览器支持越来越好，但您可能仍需要使用供应商前缀，如下所示：

```
$('.user-text').css({
  '-webkit-transform' : 'scale(' + ui.value + ')',
  '-moz-transform'    : 'scale(' + ui.value + ')',
  '-ms-transform'     : 'scale(' + ui.value + ')',
  '-o-transform'      : 'scale(' + ui.value + ')',
  'transform'         : 'scale(' + ui.value + ')'
}); 
```

jsFiddle 示例：http: [//jsfiddle.net/jehka/230/](http://jsfiddle.net/jehka/230/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-07T11:17:02.540

设置`-vendor`旧浏览器不支持的前缀可能会导致它们抛出异常`.css`。而是首先检测支持的前缀：

```
// Start with a fall back
var newCss = { 'zoom' : ui.value };

// Replace with transform, if supported
if('WebkitTransform' in document.body.style) 
{
    newCss = { '-webkit-transform': 'scale(' + ui.value + ')'};
}
// repeat for supported browsers
else if('transform' in document.body.style) 
{
    newCss = { 'transform': 'scale(' + ui.value + ')'};
}

// Set the CSS
$('.user-text').css(newCss) 
```

这适用于旧浏览器。我已经在`scale`这里完成了，但你可以用你想要的任何其他转换来替换它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-19T03:45:58.810

如果您使用 jquery，jquery.transit 是一个非常简单且功能强大的库，可让您在为您处理跨浏览器兼容性的同时进行转换。它可以像这样简单：`$("#element").transition({x:'90px'})`。

从此链接获取：[http ://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-18T16:04:51.387

我开始使用[http://leaverou.github.io/prefixfree](http://leaverou.github.io/prefixfree/)上提供的“无前缀”脚本，因此我不必关心供应商前缀。它巧妙地在幕后为您设置正确的供应商前缀。另外还有一个 jQuery 插件可用，因此您仍然可以使用 jQuery 的 .css() 方法而无需更改代码，因此建议的行与无前缀组合将是您所需要的全部：

```
$('.user-text').css('transform', 'scale(' + ui.value + ')'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-09T12:45:57.207

```
$(".oSlider-rotate").slider({
     min: 10,
     max: 74,
     step: .01,
     value: 24,
     slide: function(e,ui){
                 $('.user-text').css('transform', 'scale(' + ui.value + ')')

            }                
  }); 
```

这将解决问题

# windows - 是否可以使用 Python/Scapy for Windows 编写简单的防火墙？

> ID：10808097
> 
> 赞同：0
> 
> 时间：2012-05-29T23:26:15.497
> 
> 标签：windows, firewall, scapy

我正在寻找一个可以拦截HTTP流量的“小型”防火墙，然后它应该根据其IP地址和数据包的内容（文本）修改或丢弃数据包。

在我创建这个问题之前，我用谷歌搜索了几次。恐怕需要很长时间，而且我没有开发[驱动内核模式](http://en.wikipedia.org/wiki/Kernel-Mode_Driver_Framework)的经验。

不过最近，我遇到了一个 python [(scapy)](http://www.secdev.org/projects/scapy/)库，从[文档](http://www.secdev.org/projects/scapy/doc/)中，它能够嗅探和伪造流量。

但是我有几个关于 scapy 的问题：

“伪造网络数据包”是什么意思？它会伪造数据包的副本吗？

提前致谢。

PS：另外，由于我没有在内核模式下开发驱动程序的经验，在用户模式下是否有任何替代库？使用的编程语言不是我的目标，我的目标是在短时间内完成这项任务，并且尽可能简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:09:31.250

> 另外，由于我在内核模式下开发驱动程序方面没有经验，因此在用户模式下是否有任何替代库？

是的，看看我的名为[WinDivert](http://reqrypt.org/windivert.html)的项目。WinDivert 允许您从用户模式应用程序中捕获/修改/丢弃数据包（无需内核编程）。

# c# - 锯齿状数组类型属性

> ID：10808098
> 
> 赞同：3
> 
> 时间：2012-05-29T23:26:30.317
> 
> 标签：c#, .net, arrays, properties, jagged-arrays

假设我有这样的财产：

```
public int[] MyProperty
{
    get;
    set;
} 
```

调用代码可以随意更改数组的值，*也可以替换数组本身*。这可以通过隐藏 setter 来轻松防止，如下所示：

```
public int[] MyProperty
{
    get;
    private set;
} 
```

这允许调用代码更改值，但不能将数组更改为不同的数组，或更改大小。

此模式适用于多维数组，但不适用于锯齿状数组。如果我有这个：

```
public int[][] MyProperty
{
    get;
    private set;
} 
```

主数组不能修改，子数组可以。如果我想让子数组只读，以便调用代码可以更改元素，但不能更改数组，该怎么办？

如何仅使交错数组的元素可修改？这包括 3D 及更高版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T23:28:00.260

您应该使用[`ReadOnlyCollection<int[]>`](http://msdn.microsoft.com/en-us/library/ms132474.aspx).

# c# - 迭代所有元素并获取文本？

> ID：10808099
> 
> 赞同：1
> 
> 时间：2012-05-29T23:26:45.720
> 
> 标签：c#, .net-4.0, html-agility-pack

我正在使用以下代码将页面中的所有文本放入`List<string>`

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(content);

foreach (var script in doc.DocumentNode.Descendants("script").ToArray())
    script.Remove();

foreach (var style in doc.DocumentNode.Descendants("style").ToArray())
    style.Remove();

foreach (HtmlAgilityPack.HtmlNode node in doc.DocumentNode.SelectNodes("//text()"))
{
    string found = WebUtility.HtmlDecode(node.InnerText.Trim());
    if (found.Length > 2) // removes some unwanted strings
        query[item.Key].Add(found);
} 
```

*   但是一些 html 仍然进入字符串，例如`</form>`有没有更好的方法来缩小这个代码，所以我只得到每个标签的文本，没有别的，或者我仍然必须解析结果以删除 <*> 标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T21:10:27.150

仅使用 HAP 中包含的功能就可以很容易地做到这一点。

```
HtmlDocument doc = new HtmlWeb().Load("http://www.google.com");
List<string> words = doc.DocumentNode.DescendantNodes()
        .Where(n => n.NodeType == HtmlNodeType.Text
          && !string.IsNullOrWhiteSpace(HtmlEntity.DeEntitize(n.InnerText))
          && n.ParentNode.Name != "style" && n.ParentNode.Name != "script")
        .Select(n => HtmlEntity.DeEntitize(n.InnerText).Trim())
        .Where(s => s.Length > 2).ToList(); 
```

结果是一个长度超过 2 的单词列表，并且所有内容都已转义，因此不需要`WebUtility`.

# jquery - jquery在文档准备好后追加一次

> ID：10808100
> 
> 赞同：0
> 
> 时间：2012-05-29T23:27:09.333
> 
> 标签：jquery, jquery-plugins

我正在创建一个 jquery ligthbox 只是为了学习，现在一切都很好，但是，当我尝试调用插件两次以上时，附加内容会重复自身。

在这里搜索，我发现了这段代码：

```
var appened = true;

if(appened){    
   //append code
   appened = false;
} 
```

但这对我不起作用。我必须做什么，以避免这种重复的内容？

以防万一这是我的代码：

```
(function($){

$.fn.shareBox = function(options){

     var defaults = {
        fadeSpeed : 500,
        hiddenElement: false,
        nameHideCont : ''//nombre del contenedor con clase hide
        },
        settings = $.extend(defaults, options);

        var appened = true;

     if(appened){   
            var lb = '<div class="lb-cont"></div><div class="sb-cont"></div>';
          $(lb).prependTo('body');

      appened = false;
    }

  var shareB = $('.sb-cont');

  shareB.css('display','none');

  this.each(function(){

    var obj = $(this);
    var verMas = $('a', obj)

    var lbw = shareB.width();

    obj.bind('click', function(){

        if(defaults.hiddenElement){
        var contenido = $('.'+defaults.nameHideCont, obj).clone(true, true).removeClass('hide');
      contenido.appendTo(shareB);

      }

        $('.lb-cont').fadeIn(defaults.fadeSpeed);
        shareB.fadeIn(defaults.fadeSpeed);
        shareB = $('.sb-cont');

        pos_obj();

        var cerrar = '<div id="cerrar-cont"><div id="cerrar">X</div></div>';
    $(cerrar).prependTo('.'+defaults.nameHideCont);
        $('.imagess').epicZoom({});
        var urlFace = $('#facebook').attr('st_url');
        var titFace = $('#facebook').attr('st_title');
        var urlTwi = $('#twitter').attr('st_url');
        var titTwi = $('#twitter').attr('st_title');
        var urlSha = $('#sharethis').attr('st_url');
        var titSha = $('#sharethis').attr('st_title');
        stWidget.addEntry({
             "service":"facebook",
             "element":document.getElementById('facebook'),
             "url":urlFace,
             "title":titFace,
             "type":"hcount",
             "text":titFace ,
             "image":"http://www.softicons.com/download/internet-icons/social-superheros-icons-by-iconshock/png/256/sharethis_hulk.png",
             "summary":"this is description1"
     });
     stWidget.addEntry({
             "service":"twitter",
             "element":document.getElementById('twitter'),
             "url":urlTwi,
             "title":titTwi,
             "type":"hcount",
             "text":titTwi ,
             "image":"http://www.softicons.com/download/internet-icons/social-superheros-icons-by-iconshock/png/256/sharethis_hulk.png",
             "summary":"this is description1"
     });
      stWidget.addEntry({
             "service":"sharethis",
             "element":document.getElementById('sharethis'),
             "url":urlSha,
             "title":'compartir',
             "type":"hcount",
             "text":titSha ,
             "image":"http://www.softicons.com/download/internet-icons/social-superheros-icons-by-iconshock/png/256/sharethis_hulk.png",
             "summary":"this is description1"
     });
        return false;   

        });

        $('#cerrar').live('click', function(){
            $('.lb-cont').fadeOut('normal');
      shareB.fadeOut('normal', function(){
        $('.sb-cont .'+defaults.nameHideCont).remove();
        });

    });

        function pos_obj(){
              lbw = shareB.width();
              var arrPageSizes = ___getPageSize();
                $('.lb-cont').css({
                        width:      arrPageSizes[0],
                        height:     arrPageSizes[1]
                    });
           // Get page scroll
            var arrPageScroll = ___getPageScroll();
           shareB.css({
                        top: arrPageScroll[1] + (arrPageSizes[3] / 10),
                        left: (arrPageSizes[0]/2)-(lbw/2)+'px'
                        });

          }

        $(window).resize(function(){
               shareB = $('.sb-cont');
               var arrPageSizes = ___getPageSize();
               var arrPageScroll = ___getPageScroll();

               pos_obj();
      });

      /**
     / THIRD FUNCTION
     * getPageSize() by quirksmode.com
     *
     * @return Array Return an array with page width, height and window width, height
     */
    function ___getPageSize() {
        var xScroll, yScroll;
        if (window.innerHeight && window.scrollMaxY) {  
            xScroll = window.innerWidth + window.scrollMaxX;
            yScroll = window.innerHeight + window.scrollMaxY;
        } else if (document.body.scrollHeight > document.body.offsetHeight){ // all but Explorer Mac
            xScroll = document.body.scrollWidth;
            yScroll = document.body.scrollHeight;
        } else { // Explorer Mac...would also work in Explorer 6 Strict, Mozilla and Safari
            xScroll = document.body.offsetWidth;
            yScroll = document.body.offsetHeight;
        }
        var windowWidth, windowHeight;
        if (self.innerHeight) { // all except Explorer
            if(document.documentElement.clientWidth){
                windowWidth = document.documentElement.clientWidth; 
            } else {
                windowWidth = self.innerWidth;
            }
            windowHeight = self.innerHeight;
        } else if (document.documentElement && document.documentElement.clientHeight) { // Explorer 6 Strict Mode
            windowWidth = document.documentElement.clientWidth;
            windowHeight = document.documentElement.clientHeight;
        } else if (document.body) { // other Explorers
            windowWidth = document.body.clientWidth;
            windowHeight = document.body.clientHeight;
        }   
        // for small pages with total height less then height of the viewport
        if(yScroll < windowHeight){
            pageHeight = windowHeight;
        } else { 
            pageHeight = yScroll;
        }
        // for small pages with total width less then width of the viewport
        if(xScroll < windowWidth){  
            pageWidth = xScroll;        
        } else {
            pageWidth = windowWidth;
        }
        arrayPageSize = new Array(pageWidth,pageHeight,windowWidth,windowHeight);
        return arrayPageSize;
    };
    /**
     / THIRD FUNCTION
     * getPageScroll() by quirksmode.com
     *
     * @return Array Return an array with x,y page scroll values.
     */
    function ___getPageScroll() {
        var xScroll, yScroll;
        if (self.pageYOffset) {
            yScroll = self.pageYOffset;
            xScroll = self.pageXOffset;
        } else if (document.documentElement && document.documentElement.scrollTop) {     // Explorer 6 Strict
            yScroll = document.documentElement.scrollTop;
            xScroll = document.documentElement.scrollLeft;
        } else if (document.body) {// all other Explorers
            yScroll = document.body.scrollTop;
            xScroll = document.body.scrollLeft; 
        }
        arrayPageScroll = new Array(xScroll,yScroll);
        return arrayPageScroll;
    };

    });

    }
})(jQuery); 
```

我这样称呼我的插件：

```
jQuery('.catalogo').shareBox({
        nameHideCont:'light-cont',
        hiddenElement:true
        });

jQuery('.images').shareBox({
        nameHideCont:'light-cont2',
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:05:32.870

只需将您的`prepend`部分移出`shareBox`功能即可。这样，它只会在您的插件注册时预先准备好一次。

```
(function($){

$('body').prepend('<div class="lb-cont"></div><div class="sb-cont"></div>');

$.fn.shareBox = function(options){

     var defaults = {
        fadeSpeed : 500,
        hiddenElement: false,
        nameHideCont : ''//nombre del contenedor con clase hide
        },
        settings = $.extend(defaults, options);

  var shareB = $('.sb-cont');

  shareB.css('display','none');

  this.each(function(){

    var obj = $(this);
    var verMas = $('a', obj)

    var lbw = shareB.width();

    obj.bind('click', function(){

        if(defaults.hiddenElement){
        var contenido = $('.'+defaults.nameHideCont, obj).clone(true, true).removeClass('hide');
      contenido.appendTo(shareB);

      }

        $('.lb-cont').fadeIn(defaults.fadeSpeed);
        shareB.fadeIn(defaults.fadeSpeed);
        shareB = $('.sb-cont');

        pos_obj();

        var cerrar = '<div id="cerrar-cont"><div id="cerrar">X</div></div>';
    $(cerrar).prependTo('.'+defaults.nameHideCont);
        $('.imagess').epicZoom({});
        var urlFace = $('#facebook').attr('st_url');
        var titFace = $('#facebook').attr('st_title');
        var urlTwi = $('#twitter').attr('st_url');
        var titTwi = $('#twitter').attr('st_title');
        var urlSha = $('#sharethis').attr('st_url');
        var titSha = $('#sharethis').attr('st_title');
        stWidget.addEntry({
             "service":"facebook",
             "element":document.getElementById('facebook'),
             "url":urlFace,
             "title":titFace,
             "type":"hcount",
             "text":titFace ,
             "image":"http://www.softicons.com/download/internet-icons/social-superheros-icons-by-iconshock/png/256/sharethis_hulk.png",
             "summary":"this is description1"
     });
     stWidget.addEntry({
             "service":"twitter",
             "element":document.getElementById('twitter'),
             "url":urlTwi,
             "title":titTwi,
             "type":"hcount",
             "text":titTwi ,
             "image":"http://www.softicons.com/download/internet-icons/social-superheros-icons-by-iconshock/png/256/sharethis_hulk.png",
             "summary":"this is description1"
     });
      stWidget.addEntry({
             "service":"sharethis",
             "element":document.getElementById('sharethis'),
             "url":urlSha,
             "title":'compartir',
             "type":"hcount",
             "text":titSha ,
             "image":"http://www.softicons.com/download/internet-icons/social-superheros-icons-by-iconshock/png/256/sharethis_hulk.png",
             "summary":"this is description1"
     });
        return false;   

        });

        $('#cerrar').live('click', function(){
            $('.lb-cont').fadeOut('normal');
      shareB.fadeOut('normal', function(){
        $('.sb-cont .'+defaults.nameHideCont).remove();
        });

    });

        function pos_obj(){
              lbw = shareB.width();
              var arrPageSizes = ___getPageSize();
                $('.lb-cont').css({
                        width:      arrPageSizes[0],
                        height:     arrPageSizes[1]
                    });
           // Get page scroll
            var arrPageScroll = ___getPageScroll();
           shareB.css({
                        top: arrPageScroll[1] + (arrPageSizes[3] / 10),
                        left: (arrPageSizes[0]/2)-(lbw/2)+'px'
                        });

          }

        $(window).resize(function(){
               shareB = $('.sb-cont');
               var arrPageSizes = ___getPageSize();
               var arrPageScroll = ___getPageScroll();

               pos_obj();
      });

      /**
     / THIRD FUNCTION
     * getPageSize() by quirksmode.com
     *
     * @return Array Return an array with page width, height and window width, height
     */
    function ___getPageSize() {
        var xScroll, yScroll;
        if (window.innerHeight && window.scrollMaxY) {  
            xScroll = window.innerWidth + window.scrollMaxX;
            yScroll = window.innerHeight + window.scrollMaxY;
        } else if (document.body.scrollHeight > document.body.offsetHeight){ // all but Explorer Mac
            xScroll = document.body.scrollWidth;
            yScroll = document.body.scrollHeight;
        } else { // Explorer Mac...would also work in Explorer 6 Strict, Mozilla and Safari
            xScroll = document.body.offsetWidth;
            yScroll = document.body.offsetHeight;
        }
        var windowWidth, windowHeight;
        if (self.innerHeight) { // all except Explorer
            if(document.documentElement.clientWidth){
                windowWidth = document.documentElement.clientWidth;
            } else {
                windowWidth = self.innerWidth;
            }
            windowHeight = self.innerHeight;
        } else if (document.documentElement && document.documentElement.clientHeight) { // Explorer 6 Strict Mode
            windowWidth = document.documentElement.clientWidth;
            windowHeight = document.documentElement.clientHeight;
        } else if (document.body) { // other Explorers
            windowWidth = document.body.clientWidth;
            windowHeight = document.body.clientHeight;
        }   
        // for small pages with total height less then height of the viewport
        if(yScroll < windowHeight){
            pageHeight = windowHeight;
        } else {
            pageHeight = yScroll;
        }
        // for small pages with total width less then width of the viewport
        if(xScroll < windowWidth){  
            pageWidth = xScroll;        
        } else {
            pageWidth = windowWidth;
        }
        arrayPageSize = new Array(pageWidth,pageHeight,windowWidth,windowHeight);
        return arrayPageSize;
    };
    /**
     / THIRD FUNCTION
     * getPageScroll() by quirksmode.com
     *
     * @return Array Return an array with x,y page scroll values.
     */
    function ___getPageScroll() {
        var xScroll, yScroll;
        if (self.pageYOffset) {
            yScroll = self.pageYOffset;
            xScroll = self.pageXOffset;
        } else if (document.documentElement && document.documentElement.scrollTop) {     // Explorer 6 Strict
            yScroll = document.documentElement.scrollTop;
            xScroll = document.documentElement.scrollLeft;
        } else if (document.body) {// all other Explorers
            yScroll = document.body.scrollTop;
            xScroll = document.body.scrollLeft;
        }
        arrayPageScroll = new Array(xScroll,yScroll);
        return arrayPageScroll;
    };

    });

    }
})(jQuery) 
```

# c# - PictureBox 缩放错误计算

> ID：10808105
> 
> 赞同：1
> 
> 时间：2012-05-29T23:27:25.383
> 
> 标签：c#, zooming, picturebox, mousewheel

我正在尝试使用鼠标滚轮放大图片框。使用以下变量：

```
public static int offsetX = 0;
public static int offsetY = 0;
public static double scale = .05; 
```

我在图片框中绘制了一系列多边形。但是，我希望左下角指向 0，因此我使用 -y 将所有内容绘制到表单中。绘制的点受到上述变量的影响，但实际点保持不变。

```
void pictureBox1_MouseWheel(object sender, MouseEventArgs e)
{
    if (e.Delta > 0)
        scale += .025;
    else
        scale -= .025;

    pictureBox1.Invalidate();
} 
```

当鼠标滚轮向前移动时，我增加了比例变量并刷新了框。它在图片框绘制方法中使用此代码重新绘制：

```
 Graphics g = e.Graphics;
     foreach (Member m in activeTruss.members)
     {

        if (m.Visible == true)
        {
           Point[] pointArray = new Point[m.poly.Points.Count()];
           int index = 0;

           foreach (System.Windows.Point p in m.poly.Points)
           {

              pointArray[index].X = (int)((p.X + offsetX) * scale);
              pointArray[index].Y = (int)-((p.Y + offsetY) * scale);
              index++;
           }

           SolidBrush myBrush = new SolidBrush(m.color);
           g.FillPolygon(myBrush, pointArray);
        }
     } 
```

它缩放了正确的量，但它似乎向左上角缩放，因为偏移量保持不变。缩小时则相反。当我转动鼠标滚轮以便直接向鼠标下方的点缩放时，我应该如何编辑偏移量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:54:57.850

如果您想将变焦居中

```
double offsetX = scale/2
double offsetY = scale/2 
```

*更新*

要回答关于翻转图片的第二部分，听起来您没有区分图片的 x,y 与 x,y 屏幕坐标。通常，屏幕坐标从屏幕顶部开始，因此左上角为 0,0，但是当您绘制图片时，图片的 0,0 在左下角，因此您使用 -y。您要做的是从 0,0 开始绘制到 0,MAXY 而无需翻转。对于这个实现细节，你的代码会很有帮助，呵呵：）

# javascript - 脚本标签 - 异步和延迟

> ID：10808109
> 
> 赞同：684
> 
> 时间：2012-05-29T23:28:01.473
> 
> 标签：jquery ，第二个是本地外部脚本。, javascript, html

我有几个关于属性`async`和标签的问题，据我了解`defer`，这些`<script>`标签仅适用于 HTML5 浏览器。

`</body>`我的一个网站有两个外部 JavaScript 文件，目前位于标签上方；第一个是来自 google 的[jquery ，第二个是本地外部脚本。](/questions/tagged/jquery "显示标记为“jquery”的问题")

## 关于网站加载速度

1.  `async`添加到页面底部的两个脚本有什么好处吗？

2.  `async`将选项添加到两个脚本并将它们放在页面顶部是否有任何优势`<head>`？

3.  这是否意味着他们在页面加载时下载？

4.  我认为这会导致 HTML4 浏览器延迟，但它会加快 HTML5 浏览器的页面加载速度吗？

## 使用`<script defer src=...`

1.  `<head>`使用属性加载两个脚本 与`defer`之前的脚本影响相同`</body>`吗？
2.  我再次假设这会减慢 HTML4 浏览器的速度。

## 使用`<script async src=...`

如果我有两个`async`启用的脚本

1.  他们会同时下载吗？
2.  还是一次一个与页面的其余部分一起？
3.  那么脚本的顺序会成为问题吗？例如，一个脚本依赖于另一个脚本，因此如果一个脚本下载速度更快，则第二个脚本可能无法正确执行，等等。

最后，在 HTML5 更常用之前，我最好保持原样吗？

* * *

## 回答 #1

> 赞同：1119
> 
> 时间：2016-09-26T19:37:39.113

这张图片解释了普通的脚本标签、异步和延迟

[![在此处输入图像描述](../Images/f18e9b0461ce0d75960001b40a190c4b.png)](https://i.stack.imgur.com/wfL82.png)

*   加载脚本后立即执行异步脚本，因此它不能保证执行顺序（您最后包含的脚本可能在第一个脚本文件之前执行）

*   延迟脚本保证它们出现在页面中的执行顺序。

参考此链接：[http ://www.growthwiththeweb.com/2014/02/async-vs-defer-attributes.html](http://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html)

* * *

## 回答 #2

> 赞同：458
> 
> 时间：2012-05-29T23:45:32.923

将您的脚本保留在`</body>`. 在少数情况下，异步可以与位于那里的脚本一起使用（参见下面的讨论）。Defer 不会对位于那里的脚本产生太大影响，因为 DOM 解析工作几乎已经完成。

这是一篇解释异步和延迟之间区别的文章：http: [//peter.sh/experiments/asynchronous-and-deferred-javascript-execution-explained/](http://peter.sh/experiments/asynchronous-and-deferred-javascript-execution-explained/)。

如果您将脚本保留在正文末尾之前，您的 HTML 将在旧浏览器中显示得更快`</body>`。因此，为了保持旧浏览器的加载速度，您不想将它们放在其他任何地方。

如果您的第二个脚本依赖于第一个脚本（例如，您的第二个脚本使用第一个脚本中加载的 jQuery），那么您不能在没有额外代码来控制执行顺序的情况下使它们异步，但您可以使它们延迟，因为延迟脚本会仍然按顺序执行，只是在文档被解析之后才执行。如果您有该代码并且不需要立即运行脚本，则可以使它们异步或延迟。

您可以将脚本放在`<head>`标签中并将它们设置为`defer`，脚本的加载将被延迟，直到 DOM 被解析，这将在支持延迟的新浏览器中快速显示页面，但这对您没有任何帮助在较旧的浏览器中，它实际上并不比将脚本`</body>`放在所有浏览器中都快。所以，你可以明白为什么最好把它们放在前面`</body>`。

当您真的不关心脚本何时加载并且没有其他用户依赖于该脚本加载时，异步会更有用。使用异步最常被引用的示例是像 Google Analytics 这样的分析脚本，您不想等待任何东西，并且很快运行并不急迫，它是独立的，所以没有其他东西依赖它。

通常 jQuery 库不适合异步，因为其他脚本依赖于它，并且您希望安装事件处理程序以便您的页面可以开始响应用户事件，并且您可能需要运行一些基于 jQuery 的初始化代码来建立初始状态的页面。它可以异步使用，但其他脚本必须在加载 jQuery 之前进行编码才能执行。

* * *

## 回答 #3

> 赞同：245
> 
> 时间：2013-10-24T03:47:55.660

HTML5: `async`,`defer`

在 HTML5 中，您可以告诉浏览器何时运行您的 JavaScript 代码。有3种可能：

```
<script       src="myscript.js"></script>

<script async src="myscript.js"></script>

<script defer src="myscript.js"></script> 
```

1.  如果没有`async`or `defer`，浏览器将立即运行您的脚本，然后再渲染您的脚本标签下方的元素。

2.  使用`async`（异步），浏览器将继续加载 HTML 页面并呈现它，同时浏览器加载和执行脚本。

3.  使用`defer`，浏览器将在页面完成解析时运行您的脚本。（不需要完成所有图像文件的下载。这很好。）

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2014-06-12T11:30:43.807

`async`和脚本都`defer`立即开始下载而无需暂停解析器，并且都支持可选的`onload`处理程序来解决执行依赖于脚本的初始化的常见需求。

执行脚本的时间`async`和中心之间的区别。`defer`每个`async`脚本在完成下载后和窗口的加载事件之前第一次执行。这意味着有可能（并且很可能）`async`脚本没有按照它们在页面中出现的顺序执行。而另一方面，`defer`脚本保证按照它们在页面中出现的顺序执行。该执行在解析完全完成后开始，但在文档`DOMContentLoaded`事件之前。

来源和更多细节：[这里](https://davidwalsh.name/html5-async)。

* * *

## 回答 #5

> 赞同：40
> 
> 时间：2016-10-12T07:16:14.280

面临同样的问题，现在清楚地了解两者将如何工作。希望这个参考链接会有所帮助......

***异步***

当您将 async 属性添加到脚本标记时，将发生以下情况。

```
<script src="myfile1.js" async></script>
<script src="myfile2.js" async></script> 
```

1.  发出并行请求以获取文件。
2.  继续解析文档，就好像它从未被中断过一样。
3.  下载文件时执行各个脚本。

***推迟***

Defer 与 async 非常相似，但有一个主要区别。当浏览器遇到具有 defer 属性的脚本时，会发生以下情况。

```
<script src="myfile1.js" defer></script>
<script src="myfile2.js" defer></script> 
```

1.  发出并行请求以获取单个文件。
2.  继续解析文档，就好像它从未被中断过一样。
3.  即使脚本文件已下载，也完成对文档的解析。
4.  按照在文档中遇到的顺序执行每个脚本。

参考：[异步和延迟之间的区别](http://javascript.tutorialhorizon.com/2015/08/11/script-async-defer-attribute/)

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2015-02-23T01:25:29.017

`async`并将`defer`在 HTML 解析期间下载文件。两者都不会中断解析器。

*   具有属性的脚本`async`将在下载后执行。而具有属性的脚本`defer`将在完成 DOM 解析后执行。

*   加载的脚本`async`不保证任何顺序。使用属性加载的脚本`defer`保持它们在 DOM 上出现的顺序。

`<script async>`当脚本不依赖任何东西时使用。当脚本依赖使用时`<script defer>`。

最好的解决方案是`<script>`在身体的底部添加。阻塞或渲染不会有问题。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2021-08-27T18:37:06.147

好的做法是将所有文件保留在源文件夹中以快速加载源文件。您需要下载所有与脚本、样式、图标和图像相关的文件，并将这些文件放入您的项目文件夹中。

在您的项目中创建这些文件夹以保存不同的源文件，然后将所需文件从这些文件夹添加到页面中。

**js：**保存脚本相关文件。

**css：**保存样式相关文件。

**img：**保存图像/图标相关文件

**fonts：**保存字体相关文件

* * *

**何时使用 defer 和 async 属性**

**defer 属性：**首先它会下载脚本文件，然后等待 html 解析。html解析结束后，将执行脚本。换句话说，它将保证所有脚本在 html 解析后执行。

当脚本用于 DOM 操作时，延迟属性很有用。意味着脚本将应用于文档 html。

**async 属性：**它将下载脚本文件并执行，无需等待 html 解析结束。换句话说，它不能保证所有的脚本都会在 html 解析之后执行。

当脚本不用于 DOM 操作时，异步属性很有用。有时您只需要脚本用于服务器端操作或处理缓存或 cookie，而不需要用于 DOM 操作。表示脚本与使用的 html 无关。

[![在此处输入图像描述](../Images/29adff7872f5cb94af4f96d49d2bf6b4.png)](https://i.stack.imgur.com/pI1Wn.png)

* * *

何时使用延迟和异步的有用链接： [https ://stackoverflow.com/a/68929270/7186739](https://stackoverflow.com/a/68929270/7186739)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-08-13T21:41:25.360

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-07-28T02:01:05.470

似乎 defer 和 async 的行为取决于浏览器，至少在执行阶段是这样。注意， defer 仅适用于外部脚本。我假设 async 遵循相同的模式。

在 IE 11 及更低版本中，顺序似乎是这样的：

*   异步（在页面加载时可以部分执行）
*   无（可以在页面加载时执行）
*   defer（在页面加载后执行，所有延迟按文件中的放置顺序）

在 Edge、Webkit 等中，async 属性似乎被忽略或放在最后：

*   data-pagespeed-no-defer（在任何其他脚本之前执行，同时页面正在加载）
*   无（可以在页面加载时执行）
*   defer （等到 DOM 加载完毕，全部按文件中的放置顺序延迟）
*   异步（似乎要等到 DOM 加载）

在较新的浏览器中， data-pagespeed-no-defer 属性在任何其他外部脚本之前运行。这适用于不依赖于 DOM 的脚本。

注意：当您需要明确的外部脚本执行顺序时，请使用 defer。这告诉浏览器按文件中的放置顺序执行所有延迟脚本。

旁白：加载时外部 javascript 的大小确实很重要……但对执行顺序没有影响。

如果您担心脚本的性能，您可能需要考虑缩小或简单地使用 XMLHttpRequest 动态加载它们。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-05T13:28:39.197

渲染引擎经过几个步骤，直到它在屏幕上绘制任何内容。

它看起来像这样：

1.  根据我们为文档设置的编码将 HTML 字节转换为字符；
2.  令牌是根据字符创建的。标记意味着分析字符并指定开头的唐和嵌套的标签；
3.  从令牌中创建分离的节点。它们是对象，根据从标记化过程传递的信息，引擎创建对象，其中包括有关每个节点的所有必要信息；
4.  在创建 DOM 之后。DOM 是树形数据结构，表示整个层次结构以及关于标签关系和规范的信息；

同样的过程也适用于 CSS。CSS渲染引擎为CSS创建不同/分离的数据结构，但它被称为CSSOM（CSS对象模型）

浏览器仅适用于对象模型，因此它需要了解有关 DOM 和 CSSDOM 的所有信息。

下一步是以某种方式结合 DOM 和 CSSOM。因为没有 CSSOM 的浏览器不知道如何在渲染过程中设置每个元素的样式。

以上所有信息意味着，您在 html（javascript、css）浏览器中提供的任何内容都将暂停 DOM 构建过程。如果您熟悉事件循环，那么事件循环如何执行任务有一个简单的规则：

1.  执行宏任务；
2.  执行微任务；
3.  渲染；

因此，当您提供 Javascript 文件时，浏览器不知道 JS 代码将要做什么并停止所有 DOM 构建过程，并且 Javascript 解释器开始解析和执行 Javascript 代码。

即使您在 body 标记的末尾提供了 Javascript，浏览器也会对 HTML 和 CSS 执行上述所有步骤，但渲染除外。它会找出 Script 标签并停止，直到 JS 完成。

但是 HTML 为 script 标签提供了两个额外的选项：async 和 defer。

异步 - 表示下载时执行代码，并且在下载过程中不阻塞 DOM 构建。

Defer - 表示在代码下载完成并且浏览器完成 DOM 构建和渲染过程后执行代码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-03-04T09:37:52.190

**你可以从这里找到不同之处**

[![在此处输入图像描述](../Images/d251d7469a9108f67d3436e8ebae40b8.png)](https://i.stack.imgur.com/M1Wln.png)

[![在此处输入图像描述](../Images/28fbe4de9a9f4ca44168af16070020d2.png)](https://i.stack.imgur.com/Y4UnS.png)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-01-28T11:24:54.757

如果您的脚本不包含 DOM 操作并且其他脚本不依赖于此，则异步是合适的。例如：引导 cdn、jquery

如果您的脚本包含 DOM 操作并且其他脚本依赖于此，则延迟适用。

例如： `<script src=”createfirst.js”&gt; //let this will create element <script src=”showfirst.js”&gt; //after createfirst create element it will show that.`

因此使它：例如： `<script defer src=”createfirst.js”&gt; //let this will create element <script defer src=”showfirst.js”&gt;` `//after createfirst create element it will`

这将按顺序执行脚本。

但如果我做了：例如： `<script async src=”createfirst.js”&gt; //let this will create element <script defer src=”showfirst.js”&gt;` `//after createfirst create element it will`

然后，此代码可能会导致意外结果。Coz：如果 html 解析器访问 createfirst 脚本。它不会停止 DOM 创建并开始从 src 下载代码。一旦 src 被解析/代码被下载，它将立即与 DOM 并行执行。

如果 showfirst.js 比 createfirst.js 先执行怎么办。如果 createfirst 需要很长时间（假设在 DOM 解析完成后），这可能是可能的。然后，showfirst 将立即执行。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2021-07-27T06:07:37.643

[![正常 vs 异步 vs 延迟](../Images/cf21c34f35a276ae10f18b198d980c50.png)](https://i.stack.imgur.com/3UZfV.png)

简而言之，Normal vs Async vs Defer

如果你没有在脚本标签上指定任何东西，它的正常流程和那些数字 1,2,3,4 代表它如何执行的步骤

# sql - SELECT DISTINCT 极慢

> ID：10808110
> 
> 赞同：2
> 
> 时间：2012-05-29T23:28:04.737
> 
> 标签：sql, performance, sql-server-2008, distinct, sql-optimization

我有一个查询需要 48 秒才能执行，如下所示：

```
SELECT count(DISTINCT tmd_logins.userID) as totalLoginsUniqueLast30Days 
FROM tmd_logins
join tmd_users on tmd_logins.userID = tmd_users.userID 
where tmd_users.isPatient = 1 AND loggedIn > '2011-03-25' 
and tmd_logins.userID in 
    (SELECT userID as accounts30Days FROM tmd_users
    where isPatient = 1 AND created > '2012-04-29' AND computerID is null) 
```

当我删除`DISTINCT`关键字时，它需要不到 1 秒的时间，所以似乎瓶颈就在其中。

`tmd_logins`每次用户登录系统时，数据库都会向表中添加一个条目。我正在尝试获取在给定时间段内（例如过去 30 天）内创建并登录的所有患者用户的总数。

我尝试删除 DISTINCT 关键字并添加`group by tmd_logins.userID`到语句中，但性能问题仍然存在。

表`tmd_logins`有大约 300,000 条记录，`tmd_users`大约有 40,000

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T23:46:44.550

您遇到的问题是执行计划。我的猜测是“in”子句可能会混淆它。你可以试试：

```
SELECT count(DISTINCT tmd_logins.userID) as totalLoginsUniqueLast30Days 
FROM tmd_logins join
     tmd_users
     on tmd_logins.userID = tmd_users.userID join
     (SELECT distinct userID as accounts30Days
      FROM tmd_users
      where isPatient = 1 AND
            created > '2012-04-29' AND
            computerID is null
     ) t
     on tmd_logins.userID = t.accounts30Days
where tmd_users.isPatient = 1 AND
      loggedIn > '2011-03-25' 
```

这可能会也可能不会。但是，我想知道查询本身的结构。看起来 UserID 在名为 tmd_users 的表中应该是不同的。如果是这样，那么您可以将所有条件包装成一个：

```
SELECT count(DISTINCT tmd_logins.userID) as totalLoginsUniqueLast30Days 
FROM tmd_logins join
     tmd_users
     on tmd_logins.userID = tmd_users.userID 
where tmd_users.isPatient = 1 AND
      loggedIn > '2011-03-25' and
      created > '2012-04-29' AND
      computerID is null 
```

如果我的猜测是真的，那么这肯定会运行得更快。

# sql-server - ' ' 错误附近的语法不正确，没有意义

> ID：10808111
> 
> 赞同：0
> 
> 时间：2012-05-29T23:28:29.093
> 
> 标签：sql-server

我正在尝试将`.csv`文件导入 Web 服务器中的 SQL Server 数据库。我在表中有大约 30000 行。分隔符`;`在 csv 文件中。它插入了 11202 行，但之后它没有插入并说；

> “农场”附近的语法不正确。'Dale' 附近的语法不正确。“城市”附近的语法不正确。“中心”附近的语法不正确。“仓库”附近的语法不正确。

这些行是；

```
111203;Greens Farms;12;446;nocity.jpg;NULL
111205;Grosvenor Dale;12;446;nocity.jpg;NULL
111219;Jewett City;12;446;nocity.jpg;NULL
111230;Mansfield Center;12;446;nocity.jpg;NULL
111231;Mansfield Depot;12;446;nocity.jpg;NULL 
```

我认为这是关于城市名称之间的空格（''），`Green Farms`但是有很多城市有空格，并且它们已成功插入到前几行中。我没有任何意义。

您对这种情况有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T00:06:56.580

我建议将您的 csv 分成两个文件。当然，第一个文件将包含成功导入的 11202 行，第二个文件将包含剩余的 ~18798 行。

人们会期望第一个文件将被导入而没有错误。

然后，当您导入第二个文件时，您可能会发现您正在处理某种边界限制，如果该文件在 10 或 11K 次导入后也开始轰炸。

或者，您可以更快地发现导入较小的第二个文件的问题。

如果您仍然遇到完全相同的错误，但数量有限，那么我建议您完全删除错误行并将它们放入另一个文件中。

通过这种方式，您最终将导入几乎所有数据，并且您将获得一个可管理的子集，您可以再次更轻松地发现问题。

毕竟，如果您有 10 行出现错误并且您看不到任何原因，只需使用 SQL 插入语句将它们放入您的数据库中。

希望这不是自动化定期安排流程的目标的一部分！

我很想看看这对你有什么影响。谢谢。

# jquery - Jquery检查重复的下拉值

> ID：10808113
> 
> 赞同：1
> 
> 时间：2012-05-29T23:28:38.173
> 
> 标签：jquery, drop-down-menu

我试图阻止用户在两个下拉菜单中具有相同的值。无论选择什么值，Jquery 都会返回 true。

```
$("select[id$='go']").change(function() {
    var value = $(this);
    $("select[id$='go']").each(function() {
        if ($(this).val() === value.val()) {
            $('#work').html("DUBS");
        }
    });
});

<select id="_go">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select>

<select id="_gogo">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select>

<div id="work"></div> 
```

[http://jsfiddle.net/zbaKE/1/](http://jsfiddle.net/zbaKE/1/)

有没有合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T23:41:20.667

如果你想阻止用户从其他下拉列表中选择相同的值，你可以使用这样的东西；

```
var $select = $("select[id$='go']");
$select.change(function() {
    $select
      .not(this)
      .find('option')
      .prop('disabled', '')
      .filter('[value='+this.value+']')
      .prop('disabled','disabled');
});
$select.eq(0).trigger('change'); 
```

工作案例在[这里](http://jsfiddle.net/karalamalar/zbaKE/5/)( [`.not()`](http://api.jquery.com/not), [`.find()`](http://api.jquery.com/find), [`.prop()`](http://api.jquery.com/prop), [`.filter()`](http://api.jquery.com/filter))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T23:39:47.153

您需要删除 上的 DUBS 文本`false`，并且不要测试相同的选择字段。用来`not()`实现这一点。

演示：http: [//jsfiddle.net/zbaKE/3/](http://jsfiddle.net/zbaKE/3/)

```
$("select[id$='go']").change(function() {
   var value = $(this).val();
   $("select[id$='go']").not(this).each(function() {
       if ($(this).val() == value) {
           $('#work').html("DUBS");
       }else{
           $("#work").html("SUBS");
       }
   });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T23:35:46.490

我认为它不会`true`每次都返回，您的逻辑只是不会删除`DUBS`文本 if `false`。

演示：http: [//jsfiddle.net/zbaKE/2/](http://jsfiddle.net/zbaKE/2/)

```
$("select[id$='go']").change(function() {
    var value = $(this);
    $("select[id$='go']").each(function() {
        if ($(this).val() === value.val()) {
            $('#work').html("DUBS");
        } else {
            $('#work').html("");
        }
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T23:39:30.933

每次更改之前，DUBS 文本都不会设置回空

您的 jQuery 可以像这样简单地编写

```
$("select[id$='go']").change(function(){
    $('#work').html('Different');
    if ($("select[id=_go]").val() == $("select[id=_gogo]").val()){
        $('#work').html("Same");
    }
}); 
```

这是一个工作示例：http: [//jsfiddle.net/tuC4Y/1/](http://jsfiddle.net/tuC4Y/1/)

# r - Facet_Wrap 和 Scale Axis 使用 ggplot2, r

> ID：10808114
> 
> 赞同：2
> 
> 时间：2012-05-29T23:28:50.453
> 
> 标签：r, maps, ggplot2, facet-wrap

我希望有多个地图显示新西兰奥克兰的点值。问题是我有一个背景 shapefile（土地）来向地图添加背景细节，这意味着自由比例 xy 缩放到整个奥克兰地区，而不是点空间范围。

所以我的问题是：如何纯粹基于点层实现不同的空间范围并让 facet_wrap 忽略其他的？

这是当前代码：

```
map1 <- ggplot(walk, 
           aes(x=coords.x1, y=coords.x2, colour=UD_TOTAL, size=UD_TOTAL)
           ) +
      scale_colour_gradient(low="#003300", high="#00FF00", space="rgb") + 
      opts(panel.background=theme_rect(fill="#404040", colour = "#404040")) +
      quiet +
      pland + 
      geom_point() +
      facet_wrap(~School2, ncol=3, scales='free') 

map1 
```

注意：这张地图试图模仿[http://spatialanalysis.co.uk/2012/02/great-maps-ggplot2/](http://spatialanalysis.co.uk/2012/02/great-maps-ggplot2/)

初学者很遗憾我无法发布图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:24:42.477

感谢 Charlotte Wickham 的建议，我发现了 facet wrap 忽略的新功能“annotation_map”。我没有在本书的研究中发现它，但可以在这里找到： http: [//cran.r-project.org/web/packages/ggplot2/ggplot2.pdf](http://cran.r-project.org/web/packages/ggplot2/ggplot2.pdf)。

更新后的代码是：

```
map1 <- ggplot(walk2, 
        aes(x=coords.x1, y=coords.x2, colour=UD_TOTAL, size=UD_TOTAL)) + 
        scale_colour_gradient(low="#003300", high="#00FF00", space="rgb") + 
        opts(panel.background=theme_rect(fill="#404040", colour = "#404040")) +
        annotation_map(BuiltEnv, fill="#4F4F4F", colour="#4F4F4F") +
        geom_point() +
        facet_wrap(~School2, ncol=3, scales='free') +
        coord_map(project="mercator")
map1 
```

# php - 使用启用/禁用过滤器变量的 MySQL PDO 创建 SQL 查询

> ID：10808116
> 
> 赞同：0
> 
> 时间：2012-05-29T23:29:12.227
> 
> 标签：php, mysql, sql, variables, combinations

这可能是一个奇怪的问题，但我正在尝试为结果创建过滤器，但创建查询的方法对我来说似乎有点奇怪。

假设我有 5 种动物，默认情况下它会搜索所有类型的动物，但是您可以过滤它们。

所以说我们有猫、狗、爬行动物、鸟、鱼。我想过滤掉鱼和鸟，我将如何构建一个查询来注意到这一点？我真的必须为每个可能的组合构建查询吗？这似乎有点荒谬。

所有示例查询：

```
SELECT * FROM animals WHERE type = "dogs" OR type = "cats" OR type = "reptiles" OR type = "fish" OR type = "birds" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:34:12.787

使用[`NOT IN`](http://dev.mysql.com/doc/en/comparison-operators.html#function_not-in)运算符。例如，过滤掉`fish`and `birds`：

```
SELECT * FROM animals WHERE type NOT IN ('fish', 'birds') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T23:41:31.933

```
$array = array('fish', 'birds');
$filter = implode(",", $array);

"SELECT * FROM animals WHERE type NOT IN ($filter)" 
```

这样，您可以动态填充数组并将其传递给 sql 查询。

# ios - Graph API - “必须使用活动访问令牌来查询有关当前用户的信息。” iOS

> ID：10808117
> 
> 赞同：0
> 
> 时间：2012-05-29T23:29:16.773
> 
> 标签：ios, xcode, facebook, facebook-graph-api

在我更新手机软件版本和 Xcode 之前，我的应用程序中的 Facebook 集成工作正常。现在，每当我运行该应用程序时，都会收到以下错误消息。有人有想法么？

```
 2012-05-30 00:23:49.680 [417:707] FACEBOOK FAILED!
2012-05-30 00:23:49.684 [417:707] REQUEST: Error Domain=facebookErrDomain Code=10000 "The operation couldn’t be completed. (facebookErrDomain error 10000.)" UserInfo=0x2cbb30 {error=<CFBasicHash 0x2cb220 [0x3f9e2650]>{type = mutable dict, count = 3,
entries =>
    2 : <CFString 0x2cb140 [0x3f9e2650]>{contents = "type"} = <CFString 0x2cb680 [0x3f9e2650]>{contents = "OAuthException"}
    3 : <CFString 0x2cb620 [0x3f9e2650]>{contents = "message"} = <CFString 0x2cb580 [0x3f9e2650]>{contents = "An active access token must be used to query information about the current user."}
    6 : <CFString 0x2cba30 [0x3f9e2650]>{contents = "code"} = 2500
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:56:09.147

我需要更新 Facebook Graph API 以使用新的 iOS 版本。

# .htaccess - 见 htaccess 代码

> ID：10808120
> 
> 赞同：0
> 
> 时间：2012-05-29T23:29:38.147
> 
> 标签：.htaccess

只是想知道是否有人会好心地查看我的 htaccess 代码并告诉我是否有任何看起来明显不正确的内容。我对这些东西了解不多。也不确定这些部件是否应该以不同的方式组织，或者是否有必要将“RewriteEngine on RewriteBase /”不止一次地放在那里？无论如何，这里是代码：

```
RewriteEngine  on 
RewriteBase    / 

RewriteRule ^(.+)\.shtml$   $1.html [R=301,L] 

redirect 301 /games.html http://www.slimekids.com/games/
redirect 301 /trailers.html http://www.slimekids.com/book-trailers/
redirect 301 /authors.html http://www.slimekids.com/authors/
redirect 301 /reference.html http://www.slimekids.com/reference/
redirect 301 /reviews.html http://www.slimekids.com/book-reviews/
redirect 301 /searches.html http://www.slimekids.com/search-engines/

RewriteEngine on
RewriteBase /

#if the domain is not www.slimekids.com
RewriteCond %{HTTP_HOST} !^www\.slimekids\.com$ [NC]
#redirect to www.slimekids.com
RewriteRule ^(.*)$ http://www.slimekids.com/$1 [L,R=301]

#leave this rule in place, but after the one above to handle the home page
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html\ HTTP/ 
RewriteRule ^index\.html$ http://www.slimekids.com/ [R=301,L] 

ErrorDocument 404 /404page.html

## EXPIRES CACHING ##
<IfModule mod_expires.c>
ExpiresActive On
ExpiresByType image/jpg "access 1 year
ExpiresByType image/jpeg "access 1 year"
ExpiresByType image/gif "access 1 year"
ExpiresByType image/png "access 1 year"
ExpiresByType text/css "access 1 month"
ExpiresByType application/pdf "access 1 month"
ExpiresByType text/x-javascript "access 1 month"
ExpiresByType application/x-shockwave-flash "access 1 month"
ExpiresByType image/x-icon "access 1 year"
ExpiresDefault "access 2 days"
</IfModule>
## EXPIRES CACHING ## 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:31:08.973

新的和改进的 htaccess。希望这一切现在看起来都很好。非常感谢。

```
RewriteEngine on
RewriteBase /

RewriteRule ^(.+)\.shtml$   $1.html [R=301,L] 

redirect 301 /games.html http://www.slimekids.com/games/
redirect 301 /trailers.html http://www.slimekids.com/book-trailers/
redirect 301 /authors.html http://www.slimekids.com/authors/
redirect 301 /reference.html http://www.slimekids.com/reference/
redirect 301 /reviews.html http://www.slimekids.com/book-reviews/
redirect 301 /searches.html http://www.slimekids.com/search-engines/

#if the domain is not www.slimekids.com
RewriteCond %{HTTP_HOST} !^www\.slimekids\.com$ [NC]
#redirect to www.slimekids.com
RewriteRule ^(.*)$ http://www.slimekids.com/$1 [L,R=301]

#leave this rule in place, but after the one above to handle the home page
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html\ HTTP/ 
RewriteRule ^(.*)index\.html$ http://www.slimekids.com/$1 [R=301,L]

ErrorDocument 404 /404page.html

## EXPIRES CACHING ##
<IfModule mod_expires.c>
ExpiresActive On
ExpiresByType image/jpg "access 1 month"
ExpiresByType image/jpeg "access 1 month"
ExpiresByType image/gif "access 1 month"
ExpiresByType image/png "access 1 month"
ExpiresByType text/css "access 1 month"
ExpiresByType application/pdf "access 1 month"
ExpiresByType text/x-javascript "access 1 month"
ExpiresByType application/x-shockwave-flash "access 1 month"
ExpiresByType image/x-icon "access 1 month"
ExpiresDefault "access 2 days"
</IfModule>
## EXPIRES CACHING ## 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:05:48.050

代码看起来不错。

你是正确的`RewriteEngine on`，`RewriteBase /`不需要重复。

我注意到 exprires 离未来还很远。例如图像在一年后过期。可能是您的代码在发生变化时使用了某种缓存清除。

我可能会稍微改变`index.html`从 url 中删除部分的行，以在子文件夹（例如`/games/index.html`）上工作，而不仅仅是根（`/index.html`）

```
#leave this rule in place, but after the one above to handle the home page
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html\ HTTP/ 
RewriteRule ^(.*)index\.html$ http://www.slimekids.com/$1 [R=301,L] 
```

# c# - 寻找更好的方法来获得每个城市的计数

> ID：10808123
> 
> 赞同：0
> 
> 时间：2012-05-29T23:29:56.397
> 
> 标签：c#, linq, entity-framework

我试图计算有多少人住在某个城市。我有一个包含人的数据库，该表有一个外键将某个人链接到一个城市，这是另一个表。

例子：

## z市：5人

## y市：10人

## 城市x：4人

我能够取回这些结果，但我只是不喜欢我这样做的方式，因为我调用了数据库 x 次。

```
 public List<int> getStuff(List<int> listOfCityIDs )
    {
       var returnList = new List<int>();
       foreach (int z in listOfCityIDs)
        {
             returnList.Add((from x in conn.people
                             where x.city == z
                             select x).Count());
        }
        return returnList;
    } 
```

我很确定使用一些 LINQ 有更好/更有效的方法，但我似乎找不到方法。

有任何想法吗？

亲切的问候，简

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T23:36:00.253

这将很好地转化为 SQL 语句。

```
conn.people.GroupBy(p => p.city).Select(p => new { City = p.Key, Count = p.Count()}); 
```

这将得到他们所有。如果您想基于某些城市，请尝试

```
conn.people.Where(p => listOfCityIDs.Any(c => c == p.city))
  .GroupBy(p => p.city).Select(p => new { City = p.Key, Count = p.Count()}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T00:00:46.160

如果您想要更简洁的语法并且它可以用作延迟查询

```
var g = from c in cities
    join p in people
    on c equals p.CityId
    group p.CityId by p.CityId into grouped
    select new { CityId = grouped.Key, Count = grouped.Count() }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T23:35:09.803

当您调用 .Count() 时，Linq 会为您优化它。它意识到您不想要整个结果集。

还要记住，如果您正在访问数据库（我假设您是），结果集是一个 IQueryable，在您尝试从中获取值之前不会执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T23:37:36.373

如何按城市 ID 对人进行分组？

# java - JAXB 注释 RootElement

> ID：10808125
> 
> 赞同：2
> 
> 时间：2012-05-29T23:30:38.940
> 
> 标签：java, xml, jakarta-ee, jaxb

我有以下 POJO ，并且根元素未显示在 xml 文件中（通过 SOAP jax-ws 调用发送），有人能指出问题吗？

```
@XmlRootElement(name = "CATALOGUE")
@XmlAccessorType( XmlAccessType.FIELD )
public class Catalogue implements Serializable, Comparable<Catalogue>
{

    @XmlTransient
    private Integer catalogueId;

    @XmlElement( name = "COMMENT", required = false, nillable = false )
    private String catalogueComment;

    @XmlElement( name = "VERSION", required = false, nillable = false )
    private String catalogueVersion;

    @XmlElement( name = "VALID_FROM_DTS", required = false, nillable = false )
    private Date catalogueValidFromDts;

    @XmlElement( name = "CREATED_DTS", required = false, nillable = false )
    private Date catalogueCreatedDts;

    @XmlElementWrapper(name = "ITEMLIST")
    @XmlElement(name = "ITEM")
    private List<Item> itemList;

    @XmlTransient
    private Integer catalogueLifecyclePhase;

    @XmlTransient
    private Integer ownerId; 
```

xml文件看起来像

```
 <COMMENT>LK</COMMENT>
            <VERSION>4</VERSION>
            <VALID_FROM_DTS>1990-01-25T00:00:00Z</VALID_FROM_DTS>
            <CREATED_DTS>2012-05-14T15:49:38.655+01:00</CREATED_DTS>
            <ITEMLIST>
                <ITEM>
                    <NAME>Adult Period Pass Corsham</NAME>
                    <DESC>1 week</DESC>
                    <SKU>ACT-38</SKU>
                    <PRICE>15</PRICE>
                    <CATEGORIES>
                        <CATEGORY>
                            <CategoryName>Product</CategoryName>
                            <CategoryDate>1 week</CategoryDate>
                            <CategorySortOrder>0</CategorySortOrder>
                        </CATEGORY>
                        <CATEGORY>
                            <CategoryName>Product Type</CategoryName>
                            <CategoryDate>Coach</CategoryDate>
                            <CategorySortOrder>0</CategorySortOrder>
                        </CATEGORY>
                        ..................... 
```

我期待类似的东西

```
 <CATALOGUE>     <-----------missing!!!
            <COMMENT>LK</COMMENT>
            <VERSION>4</VERSION>
            <VALID_FROM_DTS>1990-01-25T00:00:00Z</VALID_FROM_DTS>
            <CREATED_DTS>2012-05-14T15:49:38.655+01:00</CREATED_DTS>
            <ITEMLIST>
                <ITEM>
                    <NAME>Adult Period Pass Corsham</NAME>
                    <DESC>1 week</DESC>
                    <SKU>ACT-38</SKU>
                    <PRICE>15</PRICE>
                    <CATEGORIES>
                        <CATEGORY>
                            <CategoryName>Product</CategoryName>
                            <CategoryDate>1 week</CategoryDate>
                            <CategorySortOrder>0</CategorySortOrder>
                        </CATEGORY>
                        <CATEGORY>
                            <CategoryName>Product Type</CategoryName>
                            <CategoryDate>Coach</CategoryDate>
                            <CategorySortOrder>0</CategorySortOrder>
                        </CATEGORY>
                        .....................
                 </CATALOGUE> 
```

用于返回对象的代码是

```
@Stateless
@Remote
@WebService
public class CatalogueManagerSoapService
{

    public CatalogueManagerSoapService()
    {
        // TODO Auto-generated constructor stub
    }

    @EJB
    private SOAPExportService userService;

    @WebMethod
    public Catalogue getLatestCatalogue(
            String username,
            String password,
            String catalogueName ) throws Exception
    { 
          Catalogue c = CatManager.getCatalogue();    
          return c;  
        }  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:18:40.293

回答我自己的问题

这就是 @WebResult 的 JAX-WS (JRS181) 默认实现

```
@Retention(value=RetentionPolicy.RUNTIME)
@Target({METHOD})
public @interface WebResult {

    String name() default "return";
    String targetNamespace() default "";
    boolean header() default false;
    String partName() default "";
} 
```

如您所见，默认情况下是“返回”。更改为 @WebResult(name = "CATALOGUE") 解决了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T23:44:17.437

我认为您需要一个 package-info.java 文件，请尝试以下操作：

```
@XmlSchema(namespace = "<your namespace>",

xmlns = @XmlNs(prefix = "<your prefix>", namespaceURI = "<your namespace>"),

elementFormDefault = XmlNsForm.QUALIFIED

)
@XmlAccessorType(XmlAccessType.NONE)
@XmlAccessorOrder(XmlAccessOrder.UNDEFINED)
package your.package.name;

import javax.xml.bind.annotation.XmlAccessOrder;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorOrder;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlNs;
import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

只需将其放在包的根目录中，根据需要进行编辑并再次生成 xsd。应该可以。

# ruby-on-rails - 如何从可以包含单引号的字符串中删除“引号”？

> ID：10808126
> 
> 赞同：0
> 
> 时间：2012-05-29T23:30:39.640
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, escaping

我有`4, 36, 'new tag', 52, 'Mcdonald\'s', 25`作为字符串返回的参数。

然后我将它们分开，然后我需要对它们做一些工作。

首先，我需要基于它创建一个新标签，但我需要以某种方式 gsub （或什么？）外部引号，而不是内部引号（如果标签包含它，就像上面的麦当劳）

其次，我需要对令牌输入添加的 \ 进行转义。我不确定如何做第二步，所以它是最好的安全性

PS。我对该模型进行了验证，所以我希望这已经足够好了，我不必担心某种 SQL 注入问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:48:35.127

```
params.split(/,\s+/).map{|s| s.start_with?("'") && s.end_with?("'") ? s[1..-2] : s } 
```

这应该澄清关于报价的第一部分。

# apache-flex - flex 4.5.1 颜色选择器

> ID：10808128
> 
> 赞同：0
> 
> 时间：2012-05-29T23:30:44.447
> 
> 标签：apache-flex, sdk

所以我有一个使用 flex 4.5.1 sdk 的 flex 应用程序，并且有一个经典的非常丑陋的颜色选择器。我已经使用其他 sdk 完成了其他 flexapps，并且能够轻松更改颜色选择器中的样本颜色。

有没有一种简单的方法可以使用 4.5.1 sdk 来做到这一点，因为我不想升级整个应用程序只是为了让颜色选择器看起来更好。

在此先感谢您的时间。

LP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:50:00.553

只有一个[Flex ColorPicker](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/ColorPicker.html)。它是在 Flex 3 中引入的。您应该能够使用在以前（或将来）SDK 中使用的相同方法来设置它的样式

# ruby-on-rails - 用于监控新 gem 版本何时发布的工具？

> ID：10808129
> 
> 赞同：5
> 
> 时间：2012-05-29T23:30:47.290
> 
> 标签：ruby-on-rails, rubygems

当我的 Gemfile 中命名的新版本 gem 发布时，有谁知道任何工具可以监视和提醒我？

它可以像报告当前版本和最新版本的 rake 任务一样简单，也可以像在有新版本可用时将消息记录到控制台的后台进程一样花哨。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T23:36:25.447

Bundler 1.1 引入了命令

```
bundle outdated 
```

但是，正如您所提到的，对于那些使用 v 1.0 的人来说，存在[捆绑过时的](https://github.com/scoop/bundle_outdated)gem。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T05:54:53.907

我正在使用这个网站：[bundle watcher](http://www.bundlewatcher.com/)

您只需上传您的 gem 文件或链接到它，然后当有可用更新时，您会通过 RSS 收到通知。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T08:25:05.840

我有完全相同的需求，但不仅是 bundler，还有 npm 和 pacman (archlinux pacman manager) [checkzilla](https://github.com/mickey/checkzilla)。

它是可扩展的，因此也有不同的通知器（控制台、电子邮件、推特等）。它现在是测试版软件，但我在我的服务器上使用它，它运行得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T23:56:24.760

我也在使用[bundle watcher](http://www.bundlewatcher.com)，但我已经设置了一个[If This Than That](http://ifttt.com)序列，以便在有更新时给我发送电子邮件。这样我会收到主动通知。

还有一个叫[Gemnasium](https://gemnasium.com/)的商业网站，但我没用过。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-01T01:15:08.953

这正是 Gemnasium 正在做的事情

# ember.js - 您如何处理 Ember 中的多元化？

> ID：10808139
> 
> 赞同：11
> 
> 时间：2012-05-29T23:32:06.180
> 
> 标签：ember.js

是否有任何帮助模板知道何时使用复数词？

在下面的示例中，如何使模板输出“2 dogs have...”？

编码：

```
Ember.View.create({dog_count: 2}) 
```

模板：

```
{{dog_count}} (dog has)/(dogs have) gone for a walk. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-21T20:55:44.903

我知道这是旧的，但我今天需要它，所以就这样吧。

```
Ember.Handlebars.registerBoundHelper('pluralize', function(number, opts) {
  var single = opts.hash['s'];
  Ember.assert('pluralize requires a singular string (s)', single);
  var plural = opts.hash['p'] || single + 's';
  return (number == 1) ? single : plural;
}); 
```

用法：

```
{{questions.length}} {{pluralize questions.length s="Question"}} 
```

或者

```
{{dog_count}} {{pluralize dog_count s="dog has" p="dogs have"}} gone for a walk. 
```

复数 (p=) 选项仅在您不想要标准 +s 行为时才需要。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-30T09:27:07.890

Ember 有一个 I18n 库：[zendesk/ember-i18n](https://github.com/zendesk/ember-i18n)。

有一个车把助手`t`，它通过从以下位置查找字符串来处理国际化`Em.I18n.translations`：

```
Em.I18n.translations = {
  'dog.walk.one': '1 dog has gone for a walk.',
  'dog.walk.other': '{{count}} dogs have gone for a walk.'
}; 
```

然后，您可以通过以下方式在 Handlebars 模板中使用该字符串：

```
{{t dog.walk countBinding="dogCount"}} 
```

上面的代码未经测试，仅取自[README](https://github.com/zendesk/ember-i18n#readme)中的文档。

* * *

我发现的另一个 JS I18n 库是 Alex Sexton 的[messageformat.js](https://github.com/SlexAxton/messageformat.js)。

* * *

这取决于您的应用程序的复杂性，但您也可以为此使用计算属性，请参阅[http://jsfiddle.net/pangratz666/pzg4c/](http://jsfiddle.net/pangratz666/pzg4c/)：

**车把**：

```
<script type="text/x-handlebars" data-template-name="dog" >
    {{dogCountString}}
</script>​ 
```

**JavaScript**：

```
Ember.View.create({
    templateName: 'dog',
    dogCountString: function() {
        var dogCount = this.get('dogCount');
        var dogCountStr = (dogCount === 1) ? 'dog has' : 'dogs have';
        return '%@ %@ gone for a walk.'.fmt(dogCount, dogCountStr);
    }.property('dogCount')
}).append(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-20T17:16:47.533

如果您使用 Ember 数据，您可以使用`Ember.Inflector`.

```
var inflector = new Ember.Inflector(Ember.Inflector.defaultRules);

inflector.pluralize('person') //=> 'people' 
```

你可以注册一个新的助手：

```
Handlebars.registerHelper('pluralize', function(number, single) {
  if (number === 1) { return single; }
  else {
    var inflector = new Ember.Inflector(Ember.Inflector.defaultRules);
    return inflector.pluralize(single);
  }
}); 
```

更多详情请访问[http://emberjs.com/api/data/classes/Ember.Inflector.html](http://emberjs.com/api/data/classes/Ember.Inflector.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-02T20:46:11.457

看起来你[从 wycats 本人那里得到了答案](https://github.com/wycats/handlebars.js/issues/249#issuecomment-6003750)，但我没有看到这个帖子中提到它，所以这里是：

```
Handlebars.registerHelper('pluralize', function(number, single, plural) {
    if (number === 1) { return single; }
    else { return plural; }
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-05T18:47:16.300

我最近发现这个库[http://slexaxton.github.com/Jed/](http://slexaxton.github.com/Jed/)似乎是 JS i18n 的一个不错的工具。我想你可以很容易地通过使用这个库注册一个把手助手来创建你自己的实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T01:03:35.287

我不知道任何 Ember 特定功能可以为您执行此操作。但是，通常当您将一个单词复数时，只有在计数为 1 时才会显示单个版本。

看这个例子：http: [//jsfiddle.net/6VN56/](http://jsfiddle.net/6VN56/)

```
function pluralize(count, single, plural) {
    return count + " " + (count == 1 ? single : plural);
}

pluralize(1, 'dog', 'dogs') // 1 dog
pluralize(10, 'dog', 'dogs') // 10 dogs
pluralize(0, 'dog', 'dogs') // 0 dogs 
```

# spring - 如何使用在spring的另一个类中定义的参数从静态方法初始化bean

> ID：10808141
> 
> 赞同：1
> 
> 时间：2012-05-29T23:32:12.273
> 
> 标签：spring, parameters, factory

我想创建一个新的 DateTimeFormatter 作为 bean，并将其交给另一个 bean。

这就是我在代码中的做法......

`DateTimeFormatter formatter = DateTimeFormat.forPattern("blah");`

但是如何在 Spring 中初始化格式化程序？

这是我在有用的回复的启发下提出的解决方案

```
<bean id="dateFormatter" class="org.joda.time.format.DateTimeFormat" factory-method="forPattern">
  <constructor-arg value="blah"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:16:40.560

自从我使用 Spring 以来已经有一段时间了，但是这里有：

`DateTimeFormatter`不从接口扩展（我只找到了对 Joda 的引用），因此任何使用它的东西都必须准确地引用类型。这意味着您不会从依赖注入中获得任何好处（因为使用格式化程序的内容与格式化程序的确切类型紧密耦合）。所以你真的想这样做吗？

假设您这样做了，请[从文档](http://static.springsource.org/spring/docs/3.1.0.RELEASE/reference/html/beans.html#beans-factory-class-ctor)中查看第 4.3.2.2 节及以后的部分，它为您提供了创建 bean 的所有方法。您可以通过静态方法创建格式化程序，然后将其传递给使用它的构造函数（构造函数注入，第 4.4.1.1 节）

# python - GeocoderDotUS Geopy（'NoneType' 对象不可迭代）

> ID：10808142
> 
> 赞同：0
> 
> 时间：2012-05-29T23:32:13.733
> 
> 标签：python, exception, geopy

```
import csv
from geopy import geocoders
import time

g = geocoders.GeocoderDotUS()

spamReader = csv.reader(open('locations.csv', 'rb'), delimiter='\t', quotechar='|')

f = open("output.txt",'w')

for row in spamReader:
a = ', '.join(row)
#exactly_one = False
time.sleep(1)

place, (lat, lng) = g.geocode(a)

b = str(place) + "," + "[" + str(lat) + "," + str(lng) + "]" + "\n"
print b
f.write(b) 
```

我无法确定我收到的原因

*Traceback（最近一次调用最后一次）：文件“C:\Users\Penguin\workspace\geocode-nojansdatabase\src\yahoo.py”，第 17 行，(lat, lng) = g.geocode(a) TypeError: “NoneType”对象不可迭代*

在进行 geocode(a) 调用之前，我检查以确保 a 中有一个值。也许没有找到匹配项？如果是这种情况，我想我只需要添加一个 if not b then 语句。有人知道更多吗？

我看到添加一个

```
a = ', '.join(row)
print(a) 
```

是否产生：178 Connection Rd Pomona QLD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:21:28.897

```
>>> a, (b, c) = None
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'NoneType' object is not iterable
>>> a, (b, c) = ('foo', None)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'NoneType' object is not iterable 
```

你的猜测是正确的。开箱前检查。

# java - Android初学者：防止admob向上推送内容

> ID：10808143
> 
> 赞同：0
> 
> 时间：2012-05-29T23:32:15.083
> 
> 标签：java, android, eclipse, android-layout, admob

我是初学者，所以请耐心等待。我有一个带有几个按钮的布局，然后在底部有一个 adview。当广告加载时，它会向上推动按钮并使它们变得非常小。有没有办法防止内容被推高？

这是我的代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background_hdpi" >

    <com.google.ads.AdView
        android:id="@+id/ad"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        ads:adSize="BANNER"
        ads:adUnitId="a14fc541226f07b"
        ads:loadAdOnCreate="true" >
    </com.google.ads.AdView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@id/ad"
        android:orientation="vertical"
        android:weightSum="7.0" >

        <Button
            android:id="@+id/basics1"
            android:layout_width="150.0dip"
            android:layout_height="0.0dip"
            android:layout_gravity="center_horizontal"
            android:layout_marginBottom="2.0dip"
            android:layout_marginTop="100.0dip"
            android:layout_weight="1.0"
            android:text="Overview"
            android:textSize="16.0sp" />

        <Button
            android:id="@+id/basics2"
            android:layout_width="150.0dip"
            android:layout_height="0.0dip"
            android:layout_gravity="center_horizontal"
            android:layout_margin="2.0dip"
            android:layout_weight="1.0"
            android:text="Campaign"
            android:textSize="16.0sp" />

        <Button
            android:id="@+id/basics3"
            android:layout_width="150.0dip"
            android:layout_height="0.0dip"
            android:layout_gravity="center"
            android:layout_margin="2.0dip"
            android:layout_weight="1.0"
            android:text="Special Ops"
            android:textColor="#ff000000"
            android:textSize="16.0sp" />

        <Button
            android:id="@+id/basics4"
            android:layout_width="150.0dip"
            android:layout_height="0.0dip"
            android:layout_gravity="center_horizontal"
            android:layout_margin="2.0dip"
            android:layout_weight="1.0"
            android:text="Zombies"
            android:textColor="#ff000000"
            android:textSize="16.0sp" />

        <Button
            android:id="@+id/basics5"
            android:layout_width="150.0dip"
            android:layout_height="0.0dip"
            android:layout_gravity="center_horizontal"
            android:layout_margin="2.0dip"
            android:layout_weight="1.0"
            android:text="Modes"
            android:textColor="#ff000000"
            android:textSize="16.0sp" />

        <Button
            android:id="@+id/basics6"
            android:layout_width="150.0dip"
            android:layout_height="0.0dip"
            android:layout_gravity="center_horizontal"
            android:layout_margin="2.0dip"
            android:layout_weight="1.0"
            android:text="Ranks/Unlocks"
            android:textColor="#ff000000"
            android:textSize="16.0sp" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:13:53.593

你有几个选择。

1.  使您的按钮大小固定，而不是依赖于重量。权重使您的按钮占用了可用空间的一小部分。因此，当广告加载时，可用空间会减少，然后您的按钮会变小。

2.  将您的 RelativeLayout 更改为 FrameLayout 并将广告放在按钮 LinearLayout 之后。

3.  将所有内容都放在 ScrollView 中，即：

RelativeLayout -> ScrollView -> LinearLayout (height:wrap_content,width:fill_parent) -> AdView + LinearLayout with Buttons

# c++ - 为什么 strcpy 只会复制有限数量的元素：

> ID：10808145
> 
> 赞同：0
> 
> 时间：2012-05-29T23:32:35.163
> 
> 标签：c++, codeblocks, strcpy, strncpy

C++ 新手在这里。编写一个简单的程序。一切正常，除了当我尝试提取名字和姓氏并单独打印它们时，姓氏中打印的字母数量将始终与名字中的数字大小相同。所以如果名字是 will jackson，程序会打印 firstname as: will 和 second name as: jack。我该如何解决这个问题？

这是代码

```
for( i = 0; i < 19; i++)
  if(cAddress[i] == ' ' || cAddress[i] == '_' || cAddress[i] == '-' || cAddress[i] == '.')
    break;

strncpy(cFirst, cAddress, i);

cFirst[i] = '\0';
cout << endl << "\n";
cout << "Your first name is " << cFirst << endl;

strcpy(cSur,cAddress + i + 1);
cSur[i] = '\0';
cout << endl;
cout << "Your surname is " << cSur << endl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T23:52:34.543

您的大部分代码看起来很像 C —— 甚至没有充分利用 C 标准库。在 C++ 中，我会写一些类似的东西：

```
int pos = Address.find_first_of(" _-.");

std::string FirstName(Address, 0, pos);
std::string SurName(Address, pos); 
```

如果出于某种原因，您坚持使用 C 风格的字符串，您可能会考虑从[`strpbrk`](http://linux.die.net/man/3/strpbrk)查找分隔符开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T23:36:00.283

您`\0`在第 (i+1) 个位置添加一个字符 - 这标志着字符串的结尾，所以这就是它打印的全部内容。在该行之前，cSur 可能包含整个姓氏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T00:43:11.357

```
cSur[i] = '\0'; 
```

是不正确的。i 是名字的长度。cSur 已经为零，由 strcpy 终止。

解释了这一点后，Jerry Coffin 的回答是我推荐的优秀 c++ 代码。

# python - 制作这个 pythonic

> ID：10808146
> 
> 赞同：0
> 
> 时间：2012-05-29T23:32:50.567
> 
> 标签：python

如何制作以下代码片段“pythonic”

```
 tag_list = []
 for d in docs:
        tags = d["tags"]
        for tag in tags:
            if tag not in tag_list:
                tag_list.append(tag) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T23:37:59.620

在 3.x 中（可能还有 2.7，我不记得了），你可以做一个集合理解：

```
tag_list = {tag for doc in docs for tag in doc["tags"]} 
```

在 2.x 中，您可以从生成器表达式构建一个集合：

```
tag_list = set(tag for doc in docs for tag in doc["tags"]) 
```

之后，如果您真的需要它作为列表，只需执行`list(tag_list)`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T23:35:51.700

```
taglist = set()
for d in docs:
    taglist |= set(d["tags"])
taglist = list(taglist) 
```

或者

```
from itertools import chain
taglist = list(set(chain(*(d["tags"] for d in docs)))) 
```

或（感谢@lazy1）：

```
from itertools import chain
taglist = list(set(chain.from_iterable(d["tags"] for d in docs))) 
```

或者

```
import operator
taglist = list(reduce(operator.or_, (set(d["tags"]) for d in docs))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T00:48:32.793

`help(set.union)`告诉我们

```
Help on method_descriptor:

union(...)
    Return the union of sets as a new set.

    (i.e. all elements that are in either set.) 
```

不明确的是，您可以传递任意数量的参数，并且所有内容都将合并在一起（大概实现与 共享代码`set.update`，帮助指的是“自身和其他人的联合”）。根本没有提到但真实的是，参数可以是任何可迭代的，而不仅仅是其他集合。如果您考虑算法，这是有道理的；没有一种方法可以合并两个集合，这比仅迭代一个集合并将每个元素添加到另一个集合更好。

因此，我们可以用非常简单和描述性的方式来完成这项工作：

```
list(set().union(*(d['tags'] for d in docs))) 
```

这比构造函数（不接受）`itertools.chain`的 ing 参数更明确一些，这使它成为我的首选。`set``*args`

（我也很喜欢嵌套集合推导方法，尽管嵌套推导的工作方式需要一点时间来适应。）

# perl - 如何使用 perl 读取外部文件中的 perl 数据结构

> ID：10808148
> 
> 赞同：3
> 
> 时间：2012-05-29T23:33:10.753
> 
> 标签：perl, data-structures

我有一个包含一些哈希引用（abc.pl）的 perl 文件，我想在另一个 perl 文件中打开这个文件，这样我就可以使用 Json XS 将它转换为 json。当我尝试打开 abc.pl 时，perl 将其读取为文本，我无法将其转换为 json。

所以，我只是想知道在另一个 perl 文件中读取 abc.pl 的方法，以便正确读取哈希引用，然后可以将其转换为 json。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T23:41:33.570

假设您有一个看起来像这样的数据文件：

```
$VAR1 = {
          'bar' => 2,
          'baz' => 3,
          'foo' => 1
        }; 
```

[您可以使用do](http://perldoc.perl.org/functions/do.html)函数评估结构。例如，

```
use strict;
use warnings;

use JSON::XS;

my $data = do 'abc.pl';
my $json = encode_json $data;

print $json; 
```

# mysql - MySQL 使用 ExtractValue(XML, 'Value/Values') 获取所有多个值（将一列拆分为行）

> ID：10808149
> 
> 赞同：6
> 
> 时间：2012-05-29T23:33:32.217
> 
> 标签：mysql, xml

我有一个包含多个值的非正常字段，因为它是直到现在才打算查询的 Xml 数据。MySQL 可以将此 xml 列拆分为多行吗？

桌子

```
NameA   |   <Xml><Values<Value>1</Value><Value>2</Value><Value>3</Value></Values></Xml>
NameB   |   <Xml><Values<Value>1</Value><Value>2</Value></Values></Xml>
NameC   |   <Xml><Values<Value>1</Value><Value>2</Value><Value>3</Value><Value>4</Value></Values></Xml> 
```

我想

```
NameA   |   1
NameA   |   2
NameA   |   3
NameB   |   1 
```

喜欢这个 MSSQL/TSQL 解决方案

```
SELECT
    I.Name,
    Value.value('.','VARCHAR(30)') AS Value 
FROM
    Item AS I
CROSS APPLY
    Xml.nodes('/Xml/Values/Value') AS T(Value)
WHERE
    I.TypeID = 'A' 
```

但是在MySQL中我只能得到

```
NameA   |   123
NameB   |   12
NameC   |   1234 
```

和

```
SELECT
    I.`Name`,
    ExtractValue(Xml,'/Xml/Values/Value') AS ListOfValues
FROM
    Item AS I
WHERE
    I.TypeID = 'A'
; 
```

有什么优雅的方法可以在 MySQL 中拆分 xml？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T23:25:40.873

不，你必须像其他 mysql 拆分列问题一样解决这个问题。

*   [MySQL可以拆分列吗？](https://stackoverflow.com/q/1096679/516748)
*   [Mysql 字符串拆分](https://stackoverflow.com/q/6152137/516748)

即具体基于[这个答案](https://stackoverflow.com/a/6153288/516748)

```
DROP FUNCTION IF EXISTS STRSPLIT;
DELIMITER $$
CREATE FUNCTION STRSPLIT($Str VARCHAR(20000), $delim VARCHAR(12), $pos INTEGER) 
    RETURNS VARCHAR(20000)
BEGIN
    DECLARE output VARCHAR(20000);

    SET output = REPLACE(SUBSTRING(SUBSTRING_INDEX($Str, $delim, $pos)
                 , LENGTH(SUBSTRING_INDEX($Str, $delim, $pos - 1)) + 1)
                 , $delim
                 , '');

    IF output = '' 
        THEN SET output = null;
    END IF;

    RETURN output;
END $$ 
```

您可以像这样遍历值

```
DROP PROCEDURE IF EXISTS GetNameValues $$
CREATE PROCEDURE GetNameValues()
BEGIN
    DECLARE i INTEGER;

    DROP TEMPORARY TABLE IF EXISTS TempList;
    CREATE TEMPORARY TABLE TempList(
        `Name` VARCHAR(256) COLLATE utf8_unicode_ci NOT NULL,
        `ValueList` VARCHAR(20000) COLLATE utf8_unicode_ci NOT NULL
    );
    DROP TEMPORARY TABLE IF EXISTS Result;
    CREATE TEMPORARY TABLE Result(
        `Name` VARCHAR(256) COLLATE utf8_unicode_ci NOT NULL,
        `Value` VARCHAR(128) COLLATE utf8_unicode_ci NOT NULL
    );

    INSERT INTO
        TempList
    SELECT
        I.`Name`,
        ExtractValue(Xml,'/Xml/Values/Value') AS ValueList
    FROM
        Item AS I
    WHERE
        I.TypeID = 'A'
    ;

    SET i = 1;
    REPEAT
        INSERT INTO
            Result
        SELECT
            `Name`,
            CAST(STRSPLIT(ValueList, ' ', i) AS CHAR(128)) AS Value
        FROM
            TempList
        WHERE 
            CAST(STRSPLIT(ValueList, ' ', i) AS CHAR(128)) IS NOT NULL
        ;

        SET i = i + 1;
        UNTIL ROW_COUNT() = 0
    END REPEAT;

    SELECT * FROM Result ORDER BY `Name`;
END $$

DELIMITER ;

CALL GetNameValues(); 
```

希望有一天这对某人有所帮助。

# jquery - 根据表单选择分配新的对象属性和值

> ID：10808150
> 
> 赞同：0
> 
> 时间：2012-05-29T23:33:35.730
> 
> 标签：jquery

此代码块从 csv 获取数据，将其放入 JSON 并显示给用户。此外，我正在尝试创建一个对象属性并根据所选值分配其值，但我得到`deliveryMethod - undefined`.

```
$(document).ready(function() {
$.getJSON('CSV.php', function(data) {

    var prevCardCode = '';
    var newDiv; var NewDiv2;
    var DeliveryMethod;

    $.each(data, function(index, element) {
        var XMLObject = jQuery.extend({}, element);

        if (element['CardCode'] != prevCardCode) {
            newDiv = $('<div/>').addClass('row').appendTo('#showdata');
            $('<div class="sum_field">' + 'Total: ' + element['payment_sum'] + '</div>').appendTo(newDiv);

                $('<div class="options">Delivery Method: <select name="Delivery_Method" id="Delivery_Method"><option value="100" selected="selected">US Mail</option><option value="300">Foreign Mail</option></select></div>').appendTo(newDiv);

                $('select#Delivery_Method').change(function(){
                    DeliveryMethod = $(this).val(); 
                });

                    XMLObject.deliveryMethod = DeliveryMethod;
                    console.log(XMLObject);

        }

        newDiv2 = $('<div/>').addClass('sub_row').appendTo(newDiv);

        prevCardCode = element['CardCode'];

        $.each(element, function(key, value) {

            switch (key) {
                case 'InvKey':
                break;

                default:

                   $('<div class="field">' + value + '</div>').appendTo(newDiv2);
                   break;
            }
          });
      });
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:40:42.260

您需要在更改函数之外声明 DeliveryMethod：

```
var XMLObject = {};
var DeliveryMethod;

$('<div class="options">Delivery: <select id="Delivery_Method"><option value="100" selected="selected">US Mail</option><option value="300">Foreign Mail</option><option value="400">UPS Priority - 10am guarantee</option></select></div>').appendTo(newDiv);

 $('#Delivery_Method').change(function(){
   DeliveryMethod = $('select#Delivery_Method').val(); 
   });

    XMLObject.deliveryMethod = DeliveryMethod;
    console.log(XMLObject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:19:14.390

Firefox 控制台不会根据 Jquery 更改事件进行更新。因此，通过打印到 html 来测试它给了我想要的结果。

# php - 多个复选框提交url生成器php

> ID：10808151
> 
> 赞同：0
> 
> 时间：2012-05-29T23:33:35.600
> 
> 标签：php, forms, checkbox

我的表单中有多个复选框，我想使用它们来生成 url。一个例子 ：

```
 <form action="checkbox.php" method="post">
  <input type="checkbox" name="checkbox" value="a">
  <input type="checkbox" name="checkbox" value="b">
  <input type="checkbox" name="checkbox" value="c">
  <input type="checkbox" name="checkbox" value="d">
  <br>
  <br>
  <input type="submit" name="Submit" value="Submit">
  </form> 
```

当用户按下提交按钮时，他必须被重定向到生成的 url，如下所示：

> www.domain.com/checkbox/a+b+c+d

根据用户的选择，应按上述方式生成 url。我怎么能拉这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:43:03.877

在您的 checkbox.php 中，获取所有选中的复选框，创建所需的 url，并使用`header("Location: $url")`.

HTML：

```
<input type="checkbox" name="checkbox[]" value="a" />
<input type="checkbox" name="checkbox[]" value="b" />
<input type="checkbox" name="checkbox[]" value="c" />
<input type="checkbox" name="checkbox[]" value="d" /> 
```

复选框.php：

```
<?php

if ($_POST) {
  $url = "http://www.domain.com/checkbox/";
  $params = '';
  $checkBoxes = $_POST['checkbox'];
  foreach ($checkBoxes as $value) {
    $params .= $value;
    if ($value != $checkBoxes[count(checkBoxes) - 1])
      $params .= '+';
  }
  $url .= $params;
}

header("Location: $url"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T23:44:52.647

如果您不想使用 AJAX，这是一个 php 示例

您的 checkbox.php 顶部：

```
<?php

    if (isset($_POST['checkbox'])){
       $url = 'checkbox/' . implode('+',$_POST['checkbox']);

       header('Location:'. $url);
       die;    
    }

?> 
```

# c# - 百分比计算不起作用？

> ID：10808152
> 
> 赞同：3
> 
> 时间：2012-05-29T23:33:40.193
> 
> 标签：c#, .net-4.0, percentage

这是一件非常有趣的事情，不知道为什么会发生，但是当我这样做时：

```
(item.Count / query.Count) * 100 
```

它不会给我任何错误，只需回复 0 并且当我这样做时：

```
(item.Count * 100) / query.Count 
```

它工作得很好，我在这里错过了什么？

我遇到的另一个问题是将其输出格式化为字符串：

```
double perc = (item.Count * 100) / query.Count;
MessageBox.Show(perc.ToString("P5")); 
```

不起作用给了我一大笔钱，`33,333.33`或者`33,000.00`，我希望它看起来像这样，我尝试了几种变体，但由于某种原因，如果我将括号设置为双倍，它`33.33%`不会让我得到它，如果我不这样做不给我`.33``.00``.33`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T23:39:29.227

不要乘以 100，[百分比格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#PFormatString)会为您执行此操作。`double`执行除法时只需转换为：

```
double perc = (double)item.Count / (double)query.Count;
MessageBox.Show(perc.ToString("P5")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T23:36:24.990

```
(item.Count / query.Count) * 100 
```

正在进行整数除法，因此 (item.Count / query.Count) 将始终计算为零。在除法之前作为双打将解决此问题。

对于您的格式问题，请尝试使用 String.format

IE。`string result = string.Format("string = {0:0.0%}", perc);`

更多字符串格式化方法可以在这里找到：http: [//www.dotnetperls.com/string-format](http://www.dotnetperls.com/string-format)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T23:43:32.860

尝试做 (item.Count * 100d) "d" 指定 100 是双精度数。会给你一个双倍的回报，当你要除以 query.Count

100f 为浮百

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T23:37:27.703

item.Count 和 query.count 是整数，像 (float)item.Count 一样转换它们，否则它将进行整数除法，并且总是向下舍入为 0。

```
((float)item.Count / (float)query.Count) * 100; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T23:39:21.217

您不会`(item.Count / query.Count)`在分区之前进行双打。所以一个 int*double 是 0 出于某种原因（至少在我的代码中）。执行`((double)item.Count / (double)query.Count)`并更改`100`为`100.0`或更改为`(double)100`。但是，我推荐后者，因为 100 在运行时而不是在编译时转换为双精度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T23:38:40.193

将您的更改`100`为`100.00`. 它需要知道它不是一个 int 尝试：

```
double perc = ((double)item.Count * 100.00) / (double)query.Count; 
MessageBox.Show(perc.ToString("P5")); 
```

# php - 在 CakePHP 中使用 JsonView 返回 HTML 片段

> ID：10808154
> 
> 赞同：0
> 
> 时间：2012-05-29T23:33:55.943
> 
> 标签：php, cakephp, cakephp-2.0, json

我正在使用 Cake 2.1，随之而来的是新的[JsonView](http://book.cakephp.org/2.0/en/appendices/new-features-in-cakephp-2-1.html#jsonview)。我想做的是 POST 到我的控制器中的一个方法并呈现一个 html 片段，以便我可以将它作为 json 中的值返回。

以前我会做这样的事情：

```
public function ajaxSubmit() {
    if (!$this->request->is('ajax')) {
        $this->redirect('/');
    } else {
        $this->autoRender = $this->layout = false;

        $message = 'Please enter a message';
        $this->set('message');
        $errorFragment = $this->render('/Elements/errors/flash_error');
        $toReturn = array('errorFragment' => $errorFragment);
        return json_encode($toReturn);
    }
} 
```

它只发回该特定`flash_error`元素的 html 片段，这样我就不能`key => values`在标准 json 对象中发回多个。我希望能够将 html 片段和纯文本作为 json 发送。

所以我的问题真的是，我怎样才能渲染一个 HTML 元素，并使用 Cake 2.1 提供的 JsonView 将它设置为从我的控制器作为 json 发送回的 (key=>value 对)？我已经在我的路由文件中进行了设置，`Router::parseExtensions('json');`并且我将`RequestHandler`组件包含在我的 AppController 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:02:57.773

使用数据视图时，您不需要对 AJAX 进行单独的操作。使用可以使用与非 AJAX 提交相同的操作。

但是，假设您希望对 AJAX 使用不同的操作，因为我不知道您的其他操作是什么样的，您可以在`app/View/ControllerName/json/ajaxSubmit.ctp`.

```
<?php
$errorFragment = $this->element('errors/flash_error');
$toReturn = array('errorFragment' => $errorFragment);
echo json_encode($toReturn); 
```

然后将您的操作更改为此

```
public function ajaxSubmit() {
    if (!$this->request->is('ajax')) {
        $this->redirect('/');
    } else {
        $message = 'Please enter a message';
        $this->set('message');
    }
} 
```

请参阅文档中的“[使用带有视图文件的数据视图](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-a-data-view-with-view-files)”。

# python - Python / 函数参数

> ID：10808162
> 
> 赞同：1
> 
> 时间：2012-05-29T23:34:55.723
> 
> 标签：python, parameters

主要目标：从文本文件中读取最高分的功能。要传递给函数的参数：一个文本文档！

```
def highscore():
    try:
        text_file = open ("topscore.txt", "r")
        topscore = int(text_file.read())
        print topscore
        text_file.close()
        return topscore
    except:
        print "Error - no file"
        topscore = 0
        return topscore 
```

如何添加文本文件作为参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T23:35:52.900

```
def highscore(filename):
    try:
        text_file = open (filename, "r") 
```

哦，你应该停止在你的代码块中放入不必要的代码`try`。一个干净的解决方案如下所示：

```
def highscore(filename):
    if not os.path.isfile(filename):
        return 0
    with open(filename, 'r') as f:
        return int(f.read()) 
```

或者，如果您希望在读取文件失败的任何情况下返回 0：

```
def highscore(filename):
    try:
        with open(filename, 'r') as f:
            return int(f.read())
    except:
        return 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T01:49:22.963

另一种选择是提供关键字参数。例如，如果您有使用此功能的旧代码并且由于某种奇怪的原因无法更新，这可能会很有用。关键字参数可以包含默认值。

```
def highscore( filename = "filename.txt" ):
    try:
        text_file = open (filename, "r") 
```

然后您可以像以前一样调用此函数以使用默认值“filename.txt”：

```
highscore() 
```

或指定任何新文件名：

```
highscore( filename = "otherfile.csv" ) 
```

有关更多信息，请参阅 python 文档。 [http://docs.python.org/tutorial/controlflow.html#default-argument-values](http://docs.python.org/tutorial/controlflow.html#default-argument-values)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T23:36:00.470

```
def highscore(filename):
   try:
      text_file = open(filename, "r")
      ... 
```

只需在参数列表中添加一个变量标识符（例如`filename`），然后在打开文件时引用它。

然后使用您选择的文件名调用您的函数。

```
topscore = highscore("topscore.txt") 
```

# php - CakePHP Auth.redirect 没有被写入

> ID：10808175
> 
> 赞同：0
> 
> 时间：2012-05-29T23:36:13.153
> 
> 标签：php, cakephp, cakephp-2.1

我遵循 cakephp 文档中的身份验证教程并创建了一个有效的登录系统。

我想做的一件事是让用户在完成登录后重定向到他们最初在未登录时尝试访问的操作。

我相信他们正在访问的页面应该由 Auth 组件中的启动功能在会话中写入 Auth.redirect，但这似乎不起作用。

在我的用户控制器中，我在 beforefilter 中添加了以下内容：

```
$this->Auth->allow('add', 'login'); 
```

因此，当尝试访问编辑操作时，我会自动重定向到登录操作。

在登录操作中，我包括：

```
debug($this->Session->read());
debug($this->referer()); 
```

这是输出会话信息，并且在此会话中没有提及 Auth.redirect，因此 Auth 函数或我自己都无法使用它来重定向用户。

我试过使用 $this->referer 但由于某种原因，当被 auth 函数自动重定向时，也没有跟踪引用者。

有谁知道为什么 auth.redirect 可能没有被写入以及为什么 $this->referer 在被 auth 函数重定向时没有被填充？

我必须注意我在使用 WAMP 的 Windows 机器上。但是，我的添加操作在成功和 debug($this->referer()); 后重定向到登录。发生这种情况时会选择重定向 URL，因此标头必须正常工作。

**进一步说明：**

通过查看存储在数据库中的会话，我发现了 CakePHP 的问题。

似乎 auth.redirect 存储在会话中，但是由于某种原因，当用户被重定向清除以前的数据时会生成一个新会话。

有没有办法阻止 CakePHP 为用户创建新的会话 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:24:53.950

我已经确定了为什么 auth.redirect 不起作用的问题。

我在 core.php 中设置了一个自定义会话 cookie 名称，由于某种原因会话组件不能使用自定义 cookie 名称，因此在每个页面上创建一个新会话。

如果您遇到会话问题并且您有一个自定义会话 cookie 名称，请将其重置为默认值，它将起作用。

我将把它作为一个 bug 提交给 CakePHP。

**进一步说明**

我发现问题是由于 . 在 cookie 名称中，没有 this 。自定义 cookie 名称按应有的方式执行。

# php - 用于 cron 作业的文件的 chmod 是什么？>

> ID：10808182
> 
> 赞同：2
> 
> 时间：2012-05-29T23:37:21.270
> 
> 标签：php, cron, chmod

如主题。我知道，777必须工作。755 也应该，但是对于 cron 作业推荐什么 chmod？这是服务器上主目录中的 php 文件。644 不工作，权限被拒绝。在这个 cron 工作中休息是可以的。谢谢你的帮助！我检查了其他线程，但没有找到明确的回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T23:38:47.393

这取决于您在哪个用户下添加此 crontab 条目。该用户应该能够读取和执行该文件。如果您希望任何人运行该文件，则您的权限结束数字必须是奇数（准确地说是 5）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T23:43:42.260

取决于您如何访问该文件。如果您将其路径作为参数传递给 php，则它应该只能由 crontab 用户读取；如果您正在运行它，它应该由用户读取和执行。

# java - 将浮点数舍入到精度的问题

> ID：10808186
> 
> 赞同：3
> 
> 时间：2012-05-29T23:37:37.867
> 
> 标签：java

我正在写一个函数轮：静态浮点轮（浮点数，精度）{}

该函数应该像这样工作：round(12.3456f, 3) = 12.345

我对函数的定义是这样的：

```
public static float round(float value, int precision) {
float result;
if(precision <= 0){
    throw new RuntimeException("Precision can not be zero or less");
}

int number = (int) power(10,precision);
value = value * number;
result = (float)Math.round(value)/number;

return result;
} 
```

但问题是，我的这个函数的单元测试用例没有通过，

```
 public void mathTestNew() {
    assertEquals("MathTest",12.341,OOTBFunctions.round(12.3416f,3));
 } 
```

结果是 **junit.framework.AssertionFailedError: MathTest expected:<12.341> but was:<12.342>**

我不确定如何克服这个错误。我不确定 BigDecimal 是否会在这方面帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T23:42:30.647

舍入通常发生在最接近的整数。所以`12.3416`正确*四舍五入*为`12.342`

如果您想要您似乎要求的舍入行为（数字向下舍入到负无穷大），那么您应该使用[Math.floor(x)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Math.html#floor%28double%29)而不是 Math.round(x)

还要小心舍入浮点数/双精度数，因为它们都存在数值不准确的问题。如果你真的想要小数位的高精度，你可能会更好地使用[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)代替。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T23:40:52.283

`Math.round`是“四舍五入”。你可能想要`Math.floor`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T23:52:08.467

如果您确实想使用`BigDecimal`：

```
public static float round(float value, int precision) {
    if (precision <= 0) {
        throw new IllegalArgumentException("Precision cannot be zero or less.");
    }
    BigDecimal decimal = BigDecimal.valueOf(value);
    return decimal.setScale(precision, RoundingMode.FLOOR).floatValue();
} 
```

`BigDecimal`从到转换时可能会失去准确性`float`，因此如果必须准确，请不要转换；将值保持为 a `BigDecimal`。

正如其他答案中提到的，[`float`是一个以 10 为底的数字的近似值](https://stackoverflow.com/questions/1089018/why-cant-decimal-numbers-be-represented-exactly-in-binary)。以下仅说明了这一点：

```
System.out.println(BigDecimal.valueOf(12.3416f)); // outputs 12.34160041809082
System.out.println(new BigDecimal("12.3416"));    // outputs 12.3416 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T23:41:01.713

`12.3416`四舍五入是`12.342`。你的问题就在于此。你可能想要`Math.Floor`。我建议不要不断增加，因为这会破坏数字。但是，按 10 并不会降低精度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T23:42:03.843

你不能写这样的方法。浮点数没有小数位，它有二进制位。因此，您不能四舍五入到指定的小数位数。如果您想要小数位，您必须使用十进制基数，即 BigDecimal 或 DecimalFormat。除了@ColeJohnson 指出的预期错误之外，您编写的代码在 90% 以上的情况下都会失败。

# javascript - MVC - 在 ajax 调用中操作 Jquery 插件属性

> ID：10808189
> 
> 赞同：2
> 
> 时间：2012-05-29T23:37:55.227
> 
> 标签：javascript, jquery, asp.net, ajax, asp.net-mvc

我正在使用来自[http://labs.perifer.se/timedatepicker/的 Jquery 时间选择器](http://labs.perifer.se/timedatepicker/)

在视图中，我有这个时间选择器控件。

```
 $("#startTime").timePicker({
        startTime: "09.00", 
        endTime: new Date(0, 0, 0, 19, 0, 0), 
        show24Hours: false,
        separator: '.',
        step: 30
    }); 
```

如果之前选择了特定时间（例如上午 11:00）（并保存在 db 中），则应禁用该特定选项并且不可用于后续选择。在 MVC 控制器中，通过服务层，我得到了所有先前选择的时间的“列表”。

```
 public ActionResult DisableTimes(param1, param2)
    {            
        List<string> listTimes = Webservice(param1,param2);
        //getting previously saved times - above line
        return Json(listTimes, JsonRequestBehavior.AllowGet);
    } 
```

我在这样的java脚本函数中进行ajax调用..将参数传递给MVC控制器并返回时间列表。

```
 $.ajax({

          "url": "/ControllerName/DisableTimes/",
          "type": "get",
          "dataType": "json",
          "data": { param1: $("#paramval1").val(), param2: $("#paramvalue2").val() },
          "success": function (listTimes) {

              //Code here - use the listTimes values and disable the 
              //appropriate timepicker drop down choices.
               }
           }); 
```

如何利用从控制器获得的时间列表“listTimes”来禁用 Jquery Timepicker 选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:12:55.663

显然这个 datepicker 插件不能让你删除他的行为。

但我相信您可以从文档中删除该元素。

并重新添加。

使用 ：

[http://api.jquery.com/remove/](http://api.jquery.com/remove/)

和

[http://api.jquery.com/add/](http://api.jquery.com/add/)

或者您每次可以有两个元素，显示/隐藏您需要或使用的内容：

[http://api.jquery.com/hide/](http://api.jquery.com/hide/)

和

[http://api.jquery.com/show/](http://api.jquery.com/show/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:08:44.533

默认情况下，该插件似乎不提供该功能。我会稍微更改插件代码中的这些行（它附加到列表的位）

```
// Build the list
    for(var i = 0; i < times.length; i++) {
      $tpList.append("<li>" + times[i] + "</li>");
    } 
```

给每个 li 添加一些标识符的东西：

```
for(var i = 0; i < times.length; i++) {
      $tpList.append("<li class='"+times[i]+'">" + times[i] + "</li>");
    }` 
```

只是为了使选择这些 li 元素更容易，然后在您的成功处理程序中，执行以下操作：

```
 "success": function (listTimes) {
         $(listTimes).each(function(i,item){
               $('li.'+item).remove();
         });
        //or may be if you are just getting an array of strings from the webservice then something like this will be enough: $('.'+listTimes.join(',.')).remove();
     } 
```

并将 timepicker 插件调用 $("#startTime").timePicker 放在 ajax 成功回调中，这样就没有竞争条件，因为 ajax 回调可能会在插件初始化之后发生。

另一种选择是处理 $('#startTime').change 并检查时间是否不允许并向用户显示错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T12:31:52.213

您应该能够通过以下方式从可用选项中删除 li：

```
$(listTimes).each(function() {
    $('.time-picker').find('li:contains("' + this + '")').remove();
}); 
```

编辑：

但是，如果您在一个页面上有多个时间选择器，那将会有点困难。您应该能够添加`:first`选择器以仅获取第一次选择器。

```
$('.time-picker:first').find('li:contains("' + this + '")').remove(); 
```

[现场演示](http://jsfiddle.net/ZPfGd/1/)

# encryption - 是否有用于组加密的免费使用库？

> ID：10808192
> 
> 赞同：0
> 
> 时间：2012-05-29T23:38:39.747
> 
> 标签：encryption

我想知道是否有一个免费的加密库可以使用多个私钥和一个公钥实现组加密。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:44:18.117

我假设您的意思是让单个公钥成为签名者。

OpenPGP 可以处理该用例，而[GNU Privacy Guard](http://www.gnupg.org/)（及其相关库）是 OpenPGP 的免费实现。我自己使用 Python 绑定到[gpgme](http://www.gnupg.org/related_software/gpgme/)。

（据我了解，这是通过使用每个收件人的公钥加密对称密钥来实现的，这样任何收件人的私钥都可以用来解密消息。）

# apache-pig - 在 Pig 中投影分组元组

> ID：10808202
> 
> 赞同：8
> 
> 时间：2012-05-29T23:39:49.413
> 
> 标签：apache-pig

我有一组 (t,a,b) 形式的元组，我想在 Pig 中按 b 分组。分组后，我想从每组的元组中过滤掉 b 并为每组生成一袋过滤后的元组。

例如，假设我们有 (1,2,1) (2,0,1) (3,4,2) (4,1,2) (5,2,3)

pig 脚本会产生 {(1,2),(2,0)} {(3,4),(4,1)} {(5,2)}

问题是：我如何去产生这个结果？我习惯于看到聚合操作遵循分组操作的示例。我不太清楚如何过滤元组并将它们放入袋子中。感谢你的协助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T01:42:14.040

原来我正在寻找的是 Pig 中嵌套投影的语法。

如果一个人有 (t,a,b) 形式的元组，并且想在 group by 之后删除 b，则以这种方式完成。

```
grouped = GROUP tups BY b;
result = FOREACH grouped GENERATE tup.(t,a); 
```

请参阅 PigLatin 页面上的“嵌套投影”部分。[http://wiki.apache.org/pig/PigLatin](http://wiki.apache.org/pig/PigLatin)

# ios - 如果客户端使用硬编码的 url 连接到服务器，它是否安全？

> ID：10808206
> 
> 赞同：0
> 
> 时间：2012-05-29T23:40:12.383
> 
> 标签：ios, https, nsurlconnection, pki

我有一个客户端（在 iOS 上），它使用硬编码的 https url 连接到服务器。

当建立连接时，服务器可能会指示未来的连接应该使用不同的机器名称和/或端口。此外，服务器可以指定 url 位置后缀以从中获取数据。

即以下 URL 可能在客户端中被硬编码：

[https://machineName.address.port/url-suffix](https://machineName.address.port/url-suffix)

建立连接后，服务器可以通知它使用 machineName2 和 portX 和 url-suffix /someLocation/somewhere，因此下次客户端连接时它将使用 url

[https://machineName2.address.portX/someLocation/somewhere](https://machineName2.address.portX/someLocation/somewhere)。

地址部分或 url 不能更改。

目前，客户端具有以下连接身份验证挑战，即它将连接到任何东西：

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    SecTrustRef trust = challenge.protectionSpace.serverTrust;
    NSURLCredential *cred;
    cred = [NSURLCredential credentialForTrust:trust];
    [challenge.sender useCredential:cred forAuthenticationChallenge:challenge];
} 
```

目前这个应用程序没有做任何需要高度安全的事情——没有银行信息被访问，用户没有登录任何东西，没有用户信息被传输。客户端只是将数据从服务器下载到设备上。

如果不在客户端添加证书检查，欺骗服务器是否可以将色情内容发送到设备或其他东西，或者是否建立了 https 连接并且 url 地址是硬编码的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:06:32.393

[HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure)提供数据加密和[身份验证](http://httpd.apache.org/docs/2.0/howto/auth.html)，但您的证书应由[证书颁发机构](http://en.wikipedia.org/wiki/Certificate_authority)签署。访问硬编码的 URL 不是安全漏洞——这就是 web 服务/API 的工作方式。但是，如果没有正确的证书设置，有人可能会冒充您的服务器。仅使用 SSL/TLS 是不够的。

# css - 用于查找网页中可用的 CSS 样式的工具

> ID：10808207
> 
> 赞同：1
> 
> 时间：2012-05-29T23:40:22.107
> 
> 标签：css

假设我在现有网站中嵌入了一些 HTML 代码。我想知道哪些 CSS 类已经可用。目前我可以这样做：

1.  查看页面的源代码
2.  搜索包含 .css 文件的链接
3.  浏览这些内容，直到找到有用的课程

这很乏味，而且并不详尽。

有什么更好的方法？

编辑您也可以在 Chrome 中执行此操作：

1.  检查元素
2.  选择“资源”选项卡
3.  导航到框架/../样式表
4.  查看单个样式表的内容

我想我正在寻找的是更高级别的可用 CSS 样式的解释视图：不仅仅是 CSS 文件的内容。因此，如果一种样式在多个地方定义相同，我只想看两次。如果将两种不同的样式应用于同一个元素，我希望将两者并排查看。

假设我不能通过嵌入代码来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:25:17.003

我认为 Firefox 的 Web Developer 插件可能会对您有所帮助。您可以从[这里](https://addons.mozilla.org/en-US/firefox/addon/web-developer/)添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T23:45:12.863

在 Chrome 中按 F12 并选择放大镜。在 IE 中也是 F12，然后选择一个小箭头。Firefox 也有类似的功能，或者您可以下载非常适合 Web 开发人员的 Firebug。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-10T22:15:57.843

W3 CSS 验证器工具`http://jigsaw.w3.org/css-validator/`将在错误样式列表下方显示您指定的网页可用的所有可用 CSS 样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T00:00:52.040

在页面正文的结束标记之前复制此代码：我从这里获取代码：[http](http://snipplr.com/view/6488/) : //snipplr.com/view/6488/ 在 Chrome 中测试

```
//CODE    
<div id="allclasses" style="text-align:left">
</div>   
<script type="text/javascript">
var allTags = document.body.getElementsByTagName('*');
var classNames = {};
for (var tg = 0; tg< allTags.length; tg++) {
    var tag = allTags[tg];
    if (tag.className) {
     var classes = tag.className.split(" ");
     for (var cn = 0; cn < classes.length; cn++){
     var cName = classes[cn];
     if (! classNames[cName]) 
         {
       classNames[cName] = true;
     }
   }
    }   
}
var classList = [];
for (var name in classNames) 
    classList.push(name+'<br />');
document.getElementById('allclasses').innerHTML = classList.sort();
</script> 
```

# java - 类路径已设置，但仍收到 NoClassDefFoundError

> ID：10808209
> 
> 赞同：1
> 
> 时间：2012-05-29T23:40:41.723
> 
> 标签：java, maven, jar, classpath

我正在尝试将一个非常简单的应用程序打包到一个 jar 中以分发给用户。我在 Mac OS X 10.6.8 上使用 Eclipse Indigo 和 m2e 插件。

我使用 Maven build: package 目标将其打包为 jar。如果我双击 jar 将其打开，GUI 会打开并且似乎正在工作，但是当我单击执行按钮时，什么也没有发生。（如果我在 Eclipse 中运行为...，该程序可以正常工作）。

如果我尝试从命令行运行 jar，它甚至不会打开 GUI，我会收到以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: str-profile-comparison-0/0/1-SNAPSHOT    /jar
Caused by: java.lang.ClassNotFoundException: str-profile-comparison-0.0.1-SNAPSHOT.jar
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:248) 
```

我从 jar 中提取了清单文件，以检查类路径，它看起来像这样：

```
Manifest-Version: 1.0
Built-By: username
Build-Jdk: 1.6.0_24
Class-Path: poi-3.7.jar poi-ooxml-3.7.jar poi-examples-3.7.jar xmlbean
s-2.3.0.jar stax-api-1.0.1.jar dom4j-1.6.1.jar xml-apis-1.0.b2.jar po
i-ooxml-schemas-3.7.jar geronimo-stax-api_1.0_spec-1.0.jar poi-scratc
hpad-3.7.jar junit-4.8.2.jar
Created-By: Apache Maven
Main-Class: com.{companyname}.strprofilecomparison.logic.StrComparatorGUI
key: value
url:
mode: development
Archiver-Version: Plexus Archiver 
```

我对这里发生的事情有几个问题：

1.  为什么当我双击 jar 文件时 GUI 会打开，而当我尝试在命令行运行它时却没有？

2.  我猜类路径需要定义我正在使用的外部 jar 的绝对路径，如何在 POM 文件中设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:59:13.807

该清单表明您所有的依赖项都与您的 jar 位于同一目录中。如果那不是真的，那就别去了。

就个人而言，我会使用 appassembler 插件来制作具有 shell 脚本来启动它的设备。或者阴影插件来制作一个只包含它们的 uberjar。或者了解 OSX 存根以制作 OSX 适当的 .app 应用程序。

# iphone - UIScrollView 中有多个 UIViewController 可以吗？

> ID：10808217
> 
> 赞同：2
> 
> 时间：2012-05-29T23:41:57.417
> 
> 标签：iphone, uiscrollview

（我在这里的第一个问题；）

我正在尝试实现您可以在邮件中看到的功能：其中有一个向上或向下按钮来加载上一封或下一封邮件。

就我而言，我有一个包含大约 100 个条目的 UITableView，如果您选择一行，则会加载一个巨大的空 UIScrollView。并显示在加载 DetailView 的右侧偏移处。在这个巨大的滚动视图（启用分页）中，每个页面都是屏幕的大小。DetailView 包含一个 UIScrollview，其中显示了内容（文本）和一些按钮（邮件、Safari 中的打开链接等）。

我使用了一个使用 NSSet 的 (DetailView *)dequeueRecycledPage 方法，因此最多有 3 个 UIViewControllers 活着。（当前，上一个，下一个）。为了快速响应。

导航栏中的按钮将告诉巨大的滚动视图“scrollRectToVisible:animated:YES”，以便用户看到新视图滑入。

现在我的 DetailView 是 UIView 的子类，它可以工作。但我不希望这个 DetailView 中的按钮操作有很多委托。我宁愿让 DetailView 处理它们。所以我想从 UIViewController 继承我的 DetailView。但是我们有一个巨大的空滚动视图，带有 3 个 UIViewControllers（一次只显示 1 个）。但也许苹果对此并不热衷，或者我可能会遇到麻烦。

所以我的问题归结为：

*   UIScrollView 可以包含多个 UIViewControllers（一次只显示 1 个）或者这是“未完成”还是完全错误？

提前感谢您的帮助，G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:17:00.120

虽然理论上一个 UIScrollView 可以包含 3 个不同 UIViewController 的 UIView，但这不一定是您尝试完成的最佳实践。

通常，更好的设计是让您的 UIScrollView 属于 UIViewController，然后您可以将任何 UIView（或其子类）添加到您的 UIScrollView。无需创建 3 个不同的 UIViewController 并将它们的视图添加到您的 UIScrollView，您可以简单地创建 3 个不同的 UIView 并将这些视图添加到您的 UIScrollView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:02:15.150

我知道您可以在一个滚动视图中拥有两个（因此多个）视图，我工作的公司已经做过几次了。

我不确定确切的代码是什么，但你可能想要这样的东西：

```
myScrollView.addSubView(viewName). 
```

要隐藏视图，请执行以下操作：

```
if (logicToHideViewIsTrue) {
    [viewName setHidden:YES];
 } 
```

更多信息可以在[这里找到](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/UIScrollView_pg/CreatingBasicScrollViews/CreatingBasicScrollViews.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T00:06:31.153

通常，UIViewController 包含整个屏幕，一次只能看到一个。实现 Mail 应用程序视图的方式涉及一个 UINavigationController、一个 UIViewController 和一个 UIScrollView。

UIViewController 应该将向上/向下按钮添加到导航工具栏。

UIViewController 有一个应该是 UIScrollView 的视图。当按下向上/向下按钮时，UIViewController 应该收到此消息，然后告诉 UIScrollView 将其视图更改为新内容。

# javascript - jQuery Datatables 停止对 tfoot 元素进行排序

> ID：10808219
> 
> 赞同：0
> 
> 时间：2012-05-29T23:42:10.630
> 
> 标签：javascript, jquery, html, datatables

我一直在查看 API 并在那里搜索论坛，但我还没有找到任何东西。现在我拥有的是一张标准桌子

```
<table>
   <thead>
     <tr><td></td><td></td><td></td><td></td></tr>
   </thead>
   <tbody>
     <tr><td></td><td></td><td></td><td></td></tr>
     <tr><td></td><td></td><td></td><td></td></tr>
     <tr><td></td><td></td><td></td><td></td></tr>
   </tbody>
   <tfoot>
     <tr><td></td><td></td><td></td><td></td></tr>
   </tfoot>
</table> 
```

快速的手工打字演绎。无论如何..当我单击thead中的元素对其进行排序时，tfoot中的内容与tbody中的内容进行排序。从某种意义上说，否定了我想要一个 tfoot 的需求。

所以我的总体问题是，有没有办法将 tfoot 排除在排序之外？

数据表设置：

```
 $('#'+tableID).dataTable(
                {
                    "sPaginationType": "full_numbers",
                    "bPaginate": false,
                    "bFilter": false,
                    "bAutoWidth": true,
                    "sScrollY": tableY+"px",
                    "bScrollCollapse": true,
                    "oLanguage": {
                        "sInfo": "Showing _END_ Events."
                    },
                    "aaSorting": [[ 1, "asc" ]],
                    "aoColumns": [
                         null,
                         null,
                         null,
                         null
                       ]
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:50:02.623

DataTables 网站上的标准[示例](http://datatables.net/release-datatables/examples/basic_init/table_sorting.html)没有您描述的问题；即，页脚不是排序的一部分。

我试图分叉其中一个示例并使用（大部分）您提供的代码作为示例，只进行了一些修改。页脚不是排序的一部分。

[http://live.datatables.net/uyanul/edit#javascript,html,live](http://live.datatables.net/uyanul/edit#javascript,html,live)

也许有一段代码导致这个问题不是你原来问题的一部分？

# php - 从一个 PHP 脚本向另一个脚本发送和显示消息

> ID：10808222
> 
> 赞同：1
> 
> 时间：2012-05-29T23:42:34.087
> 
> 标签：php, javascript, ajax

我在页面中有以下代码（index.php），它仅由两个 DIV 组成，一个在左侧（#leftDIV），其中包含一个表单和另一个 DIV（#messages），它将接收错误消息，另一个右侧的 DIV (#mapAJAX)，其中包含一个 PHP 脚本，该脚本应将错误消息发送到该#messages DIV。

```
<div id="leftDIV">
  <form method="post" onsubmit="return false;">
    ...
    Some code here
    ...
    <input type=button value="Cercar" onclick="search();"/>
    <input type=reset value="Esborrar" />
  </form>
  <div id="messages">&nbsp;</div>
</div>
<div id="mapAJAX"></div> 
```

提交表单后调用 Javascript 函数，它将创建一个 XMLHttpRequest 对象以在右侧加载 PHP 脚本，其想法是每次提交表单时仅重新加载右侧的内容。在这个新脚本 (map.php) 中，我在数据库中进行搜索，并将结果加载到同一个右侧 DIV 内的地图中。

如果出现任何问题，我想在我之前提到的#messages DIV 中显示错误，但我不知道如何将这些消息从 map.php 脚本发送到该 DIV。仅搜索带有#messages id 的任何 DOM 元素是行不通的，因为该脚本无法访问左侧 DIV。

我读过这篇文章：

[PHP/Javascript 将消息传递到另一个页面](https://stackoverflow.com/questions/2291413/php-javascript-passing-message-to-another-page)

但是我不知道如何触发消息的显示，一旦生成了新消息。那么我能做什么呢？

也可以随意提出一个新标题，我不确定我的标题是否完全描述了我所暴露的问题。

先感谢您。

**编辑：**根据要求，这里是 index.php 文件中的 AJAX 代码。在 search() 对表单值进行了几次检查后调用此函数。它使用一个名为 AJAX.js 的文件来简化 XMLHttpRequest 的创建。

```
function loadMap(ciutat, tipusCuina){
  var div = document.getElementById("mapAJAX");
  var oXMLHttpRequest = createXMLHttpRequestObject();
  var url = "mapa.php?ciutat=" + ciutat + "&tipusCuina=" + tipusCuina;

  oXMLHttpRequest.open('GET', url);
  oXMLHttpRequest.onreadystatechange = function(){
    if(oXMLHttpRequest.readyState == 4){
      if(oXMLHttpRequest.status == 200){
        div.innerHTML = oXMLHttpRequest.responseText;
      }
      else{
        alert("Hi ha hagut un problema amb la recepcio del mapa.");
      }
    }
  }

  oXMLHttpRequest.send(null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:10:12.733

PHP 不能以这种方式真正对您的 DOM 进行操作。您正在使用 Javascript 来获取 PHP 脚本的结果。因此，下一步是将结果放入 DOM 中的 div 中。您也可以使用 Javascript，而不是 PHP。你在使用像 JQuery 或 Mootools 这样的 Javascript 库吗？如果是这样，这是一个非常简单的任务。

# android - 在android中完成（）活动两次？

> ID：10808223
> 
> 赞同：6
> 
> 时间：2012-05-29T23:42:48.967
> 
> 标签：android, android-activity, activity-finish

好吧，说你使用一个应用程序，你打开了一个新的活动，然后又打开了另一个，你可以通过使用`finish();`和你的一个活动结束你的活动，但是你怎么能回到两个活动，一直回到第一个活动? 我知道你可以使用：

```
Intent savedGameIntent = new Intent(v.getContext(), firstclass.class);
v.getContext().startActivity(savedGameIntent); 
```

但这是最好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T23:53:03.397

使用标志 Intent.FLAG_ACTIVITY_CLEAR_TOP。

```
 Intent intent = new Intent(this,A.class);
  intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
  startActivity(intent); 
```

从文档中：

> 如果设置，并且正在启动的活动已经在当前任务中运行，那么不会启动该活动的新实例，而是关闭它上面的所有其他活动，并且此 Intent 将被传递到（现在顶部）作为新意图的旧活动。

如此有效，如果您有 A -> B -> C，并且您打算使用设置了该标志的 A，B 和 C 将关闭。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T23:47:36.433

我相信这将开始一项新的活动，而不是回到原来的活动。听起来你想完成最后和中间的活动。如果您使用 startActivityForResult 启动最后一个活动，则可以在中间活动中覆盖 onActivityResult，并从那里调用 finish()。

# html - HTML的微优化

> ID：10808227
> 
> 赞同：1
> 
> 时间：2012-05-29T23:43:27.963
> 
> 标签：html

只是为了好玩，我正在对网站进行一些微优化。

**Q1）** 我还可以在 HTML 网站上删除/优化什么（不是内联 CSS 或 JavaScript）：

*   [http://www.w3.org/TR/html5/syntax.html#syntax-tag-omission](http://www.w3.org/TR/html5/syntax.html#syntax-tag-omission)

*   将文档类型更改为`<!DOCTYPE html>`

*   删除不需要的注释、空格和换行符

*   来自属性的所有引号（由单个单词组成的属性）。

*   将必要的双引号变成单引号。

*   从输入中删除 type="text"。

**Q2）** “如果元素为空，或者如果头元素内的第一件事是元素，则可以省略头元素的开始标记。” `<title>`算不算元素？

**Q3)** 我可以用`<link href="/css/style.css">`i 而不是 <`link rel=stylesheet type="text/css" href="/css/style.css">`吗？如果是这样，我是否必须在 htaccess 中设置标题响应？

**Q4)** 像这样优化静态 HTML 文件是否有任何技术缺陷？例如。CPU 成本、Google 机器人、javascript、移动设备或其他问题？

**注意：**我知道这不会影响任何明显的页面速度。这更多是为了好玩。

# ios - otest 崩溃与 -[id 用户凭据：]

> ID：10808229
> 
> 赞同：6
> 
> 时间：2012-05-29T23:43:41.213
> 
> 标签：ios, cocoa-touch, xcode4, xcodebuild, afnetworking

我们有一个在内部使用`AFHTTPClient`and的类`AFHTTPRequestOperation`。在开发中，我们连接到一个带有无效 SSL 证书的服务器，所以我们在返回请求操作的方法中有这段代码：

```
if (self.allowInvalidSSLCertificates)
    {
        [operation setAuthenticationChallengeBlock:^(NSURLConnection *connection, NSURLAuthenticationChallenge *challenge) {
            if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust]) {
                [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
            }
        }];

        [operation setAuthenticationAgainstProtectionSpaceBlock:^BOOL(NSURLConnection *connection, NSURLProtectionSpace *protectionSpace) {
            return YES;
        }];
    } 
```

这实际上与定义相同`_AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_`，但我们需要在运行时执行此操作。这在 Xcode 上完美运行，忽略了无效证书，并且我们所有的功能测试都通过了。当我们使用命令行从命令行运行它们时，问题就来了`xcodebuild`。一旦它要运行第一个测试，它就会崩溃：

`Run test case <testMethodName> Test Case '-[<TestCaseClass> <testMethodName>]' started. /Applications/Xcode.app/Contents/Developer/Tools/RunPlatformUnitTests.include: line 415: 47744 Bus error: 10 "${THIN_TEST_RIG}" "${OTHER_TEST_FLAGS}" "${TEST_BUNDLE_PATH}" /Applications/Xcode.app/Contents/Developer/Tools/RunPlatformUnitTests.include:451: error: Test rig '/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/Developer/usr/bin/otest' exited abnormally with code 138 (it may have crashed).`

如果我们去掉那个代码，并且不要忽略 SSL 证书无效，测试就不会通过，因为连接失败，但没有任何崩溃。

这是控制台中的崩溃日志：

```
Process:         otest [35957]
Path:            /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/Developer/usr/bin/otest
Identifier:      otest
Version:         ??? (???)
Code Type:       X86 (Native)
Parent Process:  bash [35952]

Date/Time:       2012-05-29 15:46:37.398 -0700
OS Version:      Mac OS X 10.7.4 (11E53)
Report Version:  9

Crashed Thread:  7  com.apple.NSURLConnectionLoader

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: KERN_PROTECTION_FAILURE at 0x0000000000000000

VM Regions Near 0:
--> __PAGEZERO             0000000000000000-0000000000001000 [    4K] ---/--- SM=NUL  /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/Developer/usr/bin/otest
    __TEXT                 0000000000001000-0000000000003000 [    8K] r-x/rwx SM=COW  /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/Developer/usr/bin/otest

Thread 0:
0   libsystem_kernel.dylib          0x98908c22 mach_msg_trap + 10
1   libsystem_kernel.dylib          0x989081f6 mach_msg + 70
2   CoreFoundation                  0x0045e10a __CFRunLoopServiceMachPort + 186
3   CoreFoundation                  0x003c1550 __CFRunLoopRun + 1312
4   CoreFoundation                  0x003c0d84 CFRunLoopRunSpecific + 212
5   CoreFoundation                  0x003c0c9b CFRunLoopRunInMode + 123
6   Foundation                      0x0004e40f -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 300
7   Foundation                      0x000899e8 -[NSRunLoop(NSRunLoop) runUntilDate:] + 73
8   Functional Tests                0x052f37d5 -[<TestCaseClass> <TestMethodName>] + 1253 (<TestCaseClass>.m:564)
9   CoreFoundation                  0x003f04ed __invoking___ + 29
10  CoreFoundation                  0x003f0407 -[NSInvocation invoke] + 167
11  SenTestingKit                   0x201039c4 -[SenTestCase invokeTest] + 184
12  SenTestingKit                   0x20103868 -[SenTestCase performTest:] + 183
13  SenTestingKit                   0x201034a9 -[SenTest run] + 82
14  SenTestingKit                   0x20106db2 -[SenTestSuite performTest:] + 106
15  SenTestingKit                   0x201034a9 -[SenTest run] + 82
16  SenTestingKit                   0x20106db2 -[SenTestSuite performTest:] + 106
17  SenTestingKit                   0x201034a9 -[SenTest run] + 82
18  SenTestingKit                   0x20105e97 +[SenTestProbe runTests:] + 174
19  CoreFoundation                  0x0048bd51 +[NSObject performSelector:withObject:] + 65
20  otest                           0x0000231c 0x1000 + 4892
21  otest                           0x000025be 0x1000 + 5566
22  otest                           0x00002203 0x1000 + 4611
23  otest                           0x00001f8d 0x1000 + 3981
24  otest                           0x00001f31 0x1000 + 3889

Thread 1:
0   libsystem_kernel.dylib          0x9890b90a kevent + 10
1   libdispatch.dylib               0x01029372 _dispatch_mgr_invoke + 918
2   libdispatch.dylib               0x01027be1 _dispatch_mgr_thread + 53

Thread 2:
0   libsystem_kernel.dylib          0x9890b02e __workq_kernreturn + 10
1   libsystem_c.dylib               0x9aabcccf _pthread_wqthread + 773
2   libsystem_c.dylib               0x9aabe6fe start_wqthread + 30

Thread 3:
0   libsystem_kernel.dylib          0x9890b02e __workq_kernreturn + 10
1   libsystem_c.dylib               0x9aabcccf _pthread_wqthread + 773
2   libsystem_c.dylib               0x9aabe6fe start_wqthread + 30

Thread 4:
0   libsystem_kernel.dylib          0x9890b02e __workq_kernreturn + 10
1   libsystem_c.dylib               0x9aabcccf _pthread_wqthread + 773
2   libsystem_c.dylib               0x9aabe6fe start_wqthread + 30

Thread 5:
0   libsystem_kernel.dylib          0x9890b02e __workq_kernreturn + 10
1   libsystem_c.dylib               0x9aabcccf _pthread_wqthread + 773
2   libsystem_c.dylib               0x9aabe6fe start_wqthread + 30

Thread 6:
0   libsystem_kernel.dylib          0x98908c22 mach_msg_trap + 10
1   libsystem_kernel.dylib          0x989081f6 mach_msg + 70
2   CoreFoundation                  0x0045e10a __CFRunLoopServiceMachPort + 186
3   CoreFoundation                  0x003c15d5 __CFRunLoopRun + 1445
4   CoreFoundation                  0x003c0d84 CFRunLoopRunSpecific + 212
5   CoreFoundation                  0x003c0c9b CFRunLoopRunInMode + 123
6   Foundation                      0x0004e40f -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 300
7   Foundation                      0x0004e2d3 -[NSRunLoop(NSRunLoop) run] + 76
8   Functional Tests                0x054fb7f5 +[AFURLConnectionOperation networkRequestThreadEntryPoint:] + 133 (AFURLConnectionOperation.m:146)
9   Foundation                      0x0001a4d6 -[NSThread main] + 76
10  Foundation                      0x0001a447 __NSThread__main__ + 1258
11  libsystem_c.dylib               0x9aabaed9 _pthread_start + 335
12  libsystem_c.dylib               0x9aabe6de thread_start + 34

Thread 7 Crashed:: com.apple.NSURLConnectionLoader
0   CoreFoundation                  0x0039a811 CFArrayGetCount + 17
1   Security                        0x00dae356 SecTrustCopyExceptions + 35
2   CFNetwork                       0x00b31764 SocketStream::securityAcceptPeerTrust_NoLock(unsigned char) + 150
3   CFNetwork                       0x00b39fd4 SocketStream::setProperty(void const*, __CFString const*, void const*) + 2754
4   CFNetwork                       0x00b39508 virtual thunk to SocketStream::setProperty(void const*, __CFString const*, void const*) + 43
5   CFNetwork                       0x00b3abad ReadStreamCallbacks::_setProperty(__CFReadStream*, __CFString const*, void const*, void*) + 53
6   CoreFoundation                  0x00429b10 CFReadStreamSetProperty + 160
7   CFNetwork                       0x00b3ab60 HTTPReadFilter::streamSetProperty(__CFReadStream*, __CFString const*, void const*) + 266
8   CFNetwork                       0x00bd4345 non-virtual thunk to HTTPReadFilter::streamSetProperty(__CFReadStream*, __CFString const*, void const*) + 41
9   CFNetwork                       0x00b37308 CFNetworkReadStream::httpStreamSetProperty(__CFReadStream*, __CFString const*, void const*, void*) + 38
10  CoreFoundation                  0x00429b10 CFReadStreamSetProperty + 160
11  CFNetwork                       0x00b419f4 HTTPNetStreamInfo::streamSetProperty(__CFReadStream*, __CFString const*, void const*) + 404
12  CFNetwork                       0x00b41858 non-virtual thunk to HTTPNetStreamInfo::streamSetProperty(__CFReadStream*, __CFString const*, void const*) + 41
13  CFNetwork                       0x00b37308 CFNetworkReadStream::httpStreamSetProperty(__CFReadStream*, __CFString const*, void const*, void*) + 38
14  CoreFoundation                  0x00429b10 CFReadStreamSetProperty + 160
15  CFNetwork                       0x00be3e29 HTTPProtocol::useCredential(_CFURLCredential const*, _CFURLAuthChallenge*) + 125
16  CFNetwork                       0x00bfa98f URLConnectionLoader::loaderUseCredential(_CFURLCredential const*) + 117
17  CFNetwork                       0x00bfa47a URLConnectionLoader::LoaderConnectionEventQueue::processAllEventsAndConsumePayload(XConnectionEventInfo<XLoaderEvent, XLoaderEventParams>*, long) + 140
18  CFNetwork                       0x00b2273b URLConnectionLoader::processEvents() + 107
19  CFNetwork                       0x00bf7117 non-virtual thunk to URLConnectionInstanceData::multiplexerClientPerform() + 21
20  CFNetwork                       0x00b20fbf MultiplexerSource::perform() + 259
21  CoreFoundation                  0x0045e94f __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 15
22  CoreFoundation                  0x003c1b43 __CFRunLoopDoSources0 + 243
23  CoreFoundation                  0x003c1424 __CFRunLoopRun + 1012
24  CoreFoundation                  0x003c0d84 CFRunLoopRunSpecific + 212
25  CoreFoundation                  0x003c0c9b CFRunLoopRunInMode + 123
26  Foundation                      0x00108e30 +[NSURLConnection(Loader) _resourceLoadLoop:] + 398
27  Foundation                      0x0001a4d6 -[NSThread main] + 76
28  Foundation                      0x0001a447 __NSThread__main__ + 1258
29  libsystem_c.dylib               0x9aabaed9 _pthread_start + 335
30  libsystem_c.dylib               0x9aabe6de thread_start + 34

Thread 8:: com.apple.CFSocket.private
0   libsystem_kernel.dylib          0x9890ab42 __select + 10
1   CoreFoundation                  0x003f27cb __CFSocketManager + 939
2   libsystem_c.dylib               0x9aabaed9 _pthread_start + 335
3   libsystem_c.dylib               0x9aabe6de thread_start + 34

Thread 7 crashed with X86 Thread State (32-bit):
  eax: 0x00000000  ebx: 0x00000002  ecx: 0x0d651da4  edx: 0x05012980
  edi: 0x0039a80d  esi: 0x00000000  ebp: 0xb038bbb8  esp: 0xb038bba0
   ss: 0x00000023  efl: 0x00010286  eip: 0x0039a811   cs: 0x0000001b
   ds: 0x00000023   es: 0x00000023   fs: 0x00000023   gs: 0x0000000f
  cr2: 0x00000000
Logical CPU: 4

Binary Images:
..... 
```

谷歌搜索那次崩溃并没有显示任何类似的东西。`CFNetwork`它在内部崩溃`EXC_BAD_ACCESS`，并且我在 AFNetworking 或我的代码中看不到任何可能导致此问题的内存管理问题。而且这不会发生 100% 的时间（我会说大约 80%），所以我不禁想到存在某种竞争条件。也许我们在错误的线程中使用非线程安全对象做某事？同样，在这方面还没有看到任何特别的东西。

在 Mac OSX 10.7.4 上使用 Xcode 4.3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:01:14.010

正如我在 github 上所说，我也遇到了这个崩溃（相同的 stackstrace），但是当启动 iOS 模拟器时它不会崩溃......

编辑：找到了一个解决方案（不是很方便，但是持续集成又回来了:-)

```
@interface NSURLRequest()

+ (void)setAllowsAnyHTTPSCertificate:(BOOL)b forHost:(NSString *)host;

@结尾

@implementation 一些测试

-（无效）设置
{
    [NSURLRequest setAllowsAnyHTTPSCertificate:YES forHost:@"domain.com"];
}
...

```

# ruby - 如何从提交给 Rails 的所有数据中删除无效字节序列？

> ID：10808232
> 
> 赞同：2
> 
> 时间：2012-05-29T23:44:05.940
> 
> 标签：ruby, ruby-on-rails-3, encoding

我有一个在 Ruby 1.9.3 上运行的 Rails 3.2.3 应用程序。当我尝试显示通过后端表单提交的某些字符时收到以下错误消息

`ActionView::Template::Error (incompatible encoding regexp match (UTF-8 regexp with ASCII-8BIT string))`

如何过滤掉通过后端提交的所有数据上的所有不兼容的编码/无效字节序列？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:37:35.867

怎么`before_filter`样`ApplicationController`

这个模块方法应该递归地遍历哈希中的所有值，并将它们替换为块返回的值。

```
module RecurseHash
  def recurse!(&blk)
    __recurse(self, &blk) if block_given?
  end

  private
  def __recurse(obj, &blk)
    if obj.is_a? Array
      obj = obj.map { |val| __recurse(val, &blk) }
    elsif obj.is_a? Hash
      obj.each_pair { |key, val| obj[key] = __recurse(val, &blk) }
    else
      obj = blk.call(obj)
    end
    obj
  end
end

class Hash
  include RecurseHash
end

class ApplicationController < ActionController::Base
  before_filter :force_utf8

  def force_utf8
    params.recurse! do |val|
      val.force_encoding 'UTF-8'
    end
  end
end 
```

**例子：**

```
h = {:one=>1, :two=>2, :three=>[1, 2, 3, 4, 5], :four=>[6, {:a=>1, :b=>2}, 7]}

h.recurse! { |v| v * 2 }

# {:one=>2, :two=>4, :three=>[2, 4, 6, 8, 10], :four=>[12, {:a=>2, :b=>4}, 14]} 
```

**注意：**如果块没有返回任何内容，则该值将替换为`nil`. 您可以使用它来过滤某些参数。

# java - Java中的引用类型

> ID：10808233
> 
> 赞同：3
> 
> 时间：2012-05-29T23:44:14.830
> 
> 标签：java

> **可能重复：**
> [Java 是按引用传递吗？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)
> [Java 通过引用传递](https://stackoverflow.com/questions/9404625/java-pass-by-reference)

对于下面的 Java 程序，我的理解是它`a`是对 Integer 的引用类型，就像 C/C++ 中的指针类型。因此，方法中对其值所做的任何更改都`f`将在方法返回后反映出来。但`println`仍打印其原始值`0`而不是 3。

`Integer`并`int`没有什么不同。是不是我之前的理解错了？请帮忙。谢谢！

```
 public static void f(Integer b){
            b=3;
        }
        public static void main(String[] args){
            Integer a=0;
            f(a);
            System.out.println(a);
      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T23:54:03.467

Java 总是按值而不是按引用传递参数。

* * *

[让我通过一个例子](https://stackoverflow.com/a/9404727/597657)来解释这一点：

```
public class Main
{
     public static void main(String[] args)
     {
          Foo f = new Foo("f");
          changeReference(f); // It won't change the reference!
          modifyReference(f); // It will modify the object that the reference variable "f" refers to!
     }
     public static void changeReference(Foo a)
     {
          Foo b = new Foo("b");
          a = b;
     }
     public static void modifyReference(Foo c)
     {
          c.setAttribute("c");
     }
} 
```

我将分步骤解释：

1.  声明一个名为`f`type的引用并将`Foo`其分配给一个`Foo`具有属性的新类型对象`"f"`。

    ```
    Foo f = new Foo("f"); 
    ```

    ![在此处输入图像描述](../Images/ee922b7391ffc32346804cfb3b3e0db3.png)

2.  在方法方面，声明`Foo`了一个带有名称的类型的引用，`a`并且它最初被分配给`null`.

    ```
    public static void changeReference(Foo a) 
    ```

    ![在此处输入图像描述](../Images/3fde569cde3359a103bdc79fda63e281.png)

3.  当您调用方法`changeReference`时，引用`a`将分配给作为参数传递的对象。

    ```
    changeReference(f); 
    ```

    ![在此处输入图像描述](../Images/926d85c60730a11e2258b04c65954d5e.png)

4.  声明一个名为`b`type的引用并将`Foo`其分配给一个`Foo`具有属性的新类型对象`"b"`。

    ```
    Foo b = new Foo("b"); 
    ```

    ![在此处输入图像描述](../Images/cc4de4e8ccaa821189bd352d12dac708.png)

5.  `a = b`正在将引用重新分配给`a`其`f`属性为 的对象`"b"`。

    ![在此处输入图像描述](../Images/c6842ef58febd446625c47a54d31e9d4.png)

    * * *

6.  当您调用`modifyReference(Foo c)`方法时，`c`会创建一个引用并将其分配给具有属性的对象`"f"`。

    ![在此处输入图像描述](../Images/070f686f6894c600283615af3911dffd.png)

7.  `c.setAttribute("c");`将更改引用指向它的对象的属性，并且引用`c`指向它的对象是同一个对象`f`。

    ![在此处输入图像描述](../Images/5fa7c1ffbf5afd29b379ad4e3c97041b.png)

我希望您现在了解在 Java 中将对象作为参数传递是如何工作的 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T23:50:02.863

该方法接收引用的副本。赋值不会改变整数表示的值（即使它想要也不能改变 -`Integer`在 Java 中是不可变的）。它只是设置`b`指向其他东西。指向的原始`Integer`对象`a`不受此更改的影响。

前`b = 3;`

```
------    ------
|  a |    |  b |
------    ------
  |          |
  ------------
        |
   Integer(0) 
```

后`b = 3;`

```
------    ------
|  a |    |  b |
------    ------
  |          |
  |          |
  |          |
Integer(0)  Integer(3) 
```

如果您想更改值，则必须改用可变类型。

**有关的**

*   [Java 是否具有 Integer、Float、Double、Long 的可变类型？](https://stackoverflow.com/questions/4520137/does-java-have-mutable-types-for-integer-float-double-long)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T23:53:33.963

`Integer`（与其他“基本”类一样）是不可变对象。这意味着没有方法可以更改该值。如果你这样做

```
 new Integer(1); 
```

创建的对象将始终保持 1 值。

你当然可以

```
Integer a = new Integer(1);
a = new Integer(2); 
```

但在这里你正在做的是创建两个对象，并依次为每个对象分配 a 。

调用该方法时，您将传递引用的副本`a`（如 edalorzo 所说），因此您所做的几乎相同（但不更改原始`a`引用）。

当然，很多类都不是一成不变的。在这些类中，您将拥有一个（或多个）允许您更改对象内部状态的方法，并且（只要您访问同一个对象）这些更改将由对象的所有引用“共享”（因为它们都指向同一个）。例如，假设 Integer 有一个`setValue(int)`方法，那么

```
public static void f(Integer b){      
        b.setValue(3);      
    }      
    public static void main(String[] args){      
        Integer a=0;      
        f(a);      
        System.out.println(a);      
  } 
```

会按您的预期工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T23:49:20.020

整数是不可变的，因此通过引用传递不会按预期工作。请参阅[Java：通过引用传递 int 的最佳方式](https://stackoverflow.com/questions/3326112/java-best-way-to-pass-int-by-reference)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T23:46:20.340

在 Java 中，一切都是通过副本传递的，在您的方法中，您链接的是引用，而不是它指向的实际对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T23:50:17.183

您的理解是正确的，但整数是不可变的。如果要影响 Integer 变量的值，唯一的方法是创建一个新的 Integer 对象并丢弃旧的。因此，该声明`b=3`无效。

# containers - 版本化的容器

> ID：10808237
> 
> 赞同：0
> 
> 时间：2012-05-29T23:44:48.467
> 
> 标签：containers, auto-versioning

我正在寻找有关版本化容器的信息，适用于不同版本的并行访问。我不知道这是否是正确的术语，因为我的搜索结果很少。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:50:03.437

你是什​​么意思“容器”？也许是“[版本控制](http://en.wikipedia.org/wiki/Revision_control)”系统？

如果是这样，那么我推荐[SVN](http://subversion.apache.org/)。
您可以访问您“提交”到其中的任何内容的不同版本。
每个“提交”都会增加新的版本号。

# delphi - 如何在同时处理多个位图时提高性能？

> ID：10808241
> 
> 赞同：3
> 
> 时间：2012-05-29T23:45:15.953
> 
> 标签：delphi, delphi-xe

**概述**

我正在填充一个 ViewStyle 设置为 vsIcon 的 TListView。Listview 连接到 TImageList，其中对于添加到 Listview 的每个项目，都有自己的图像，由相应的索引指定。

这个想法是能够自动化处理一系列位图的过程。每个位图都是不同的，尽管大小始终相同。

由于其工作方式的性质，对于添加到 ImageList 的位图数量从来没有固定的大小或限制，唯一的限制是可用的系统内存。

**问题**

我遇到的问题与对这些位图的操作性能有关。通过操作，我的意思是在位图上执行不同的图像处理技术，例如灰度、交换颜色、调整亮度等。

现在假设调整 1Mb 大小的位图的亮度需要 3 秒。如果 ImageList 总共有 10 个位图，那么这个过程现在大约需要 30 秒。

**（注意：我没有用 GetTickCount 或任何东西测试过速度，这些只是示例）。**

考虑一个事实，尽管正如我之前所说，这个 ImageList 的大小可以是任何大小，但处理时间可能会持续下去，看起来像是永恒的。

当我对这些位图执行任何操作时，我在循环中使用 GetBitmap 将每个位图发送到屏幕外缓冲区位图以执行操作，如下所示：

```
var
  Bmp: TBitmap;
  i: Integer;
begin
  Bmp := TBitmap.Create;
  try
    ImageList1.BeginUpdate;
    try
      for i := 0 to ImageList1.Count - 1 do
      begin
        ImageList1.GetBitmap(i, Bmp);
        Bmp.PixelFormat := pf24Bit;
        // perform manipulation to Bmp here
        ImageList1.Replace(i, Bmp, nil);
      end;
    finally
      ImageList1.EndUpdate;
    end;
  finally
    Bmp.Free;
  end;
end; 
```

在可能包含任何大小或数量的图像的 ImageList 上运行它，您可能会理解这可能会很慢。

我正在寻找优化和改进执行此操作的方法的方法，因为目前它在性能方面还远远不能接受。`BeginUpdate`并且`EndUpdate`在这里没有提供有价值的解决方案。我不是在寻找任何奇迹，因为我知道大多数计算都需要很长的处理时间，我只需要在您可能需要提供的任何帮助和建议下尽可能减少这段时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T23:56:42.387

就个人而言，我会做几件事：

0) 在你分析你的代码以确保这实际上是减速发生的地方之前，不要做任何事情。

1）我不会使用 TImageList，而是使用 TList 后代来存储图像。我不确定这是否会对性能产生直接影响，但是 IIRC，TImageList 很大程度上依赖于内置的 Windows 图像处理，这可能会更慢。

2）如果可能的话，按需更新图像，而不是一起更新。

3）线程转换过程而不是在主线程中运行它。如果您还使用 TList，这非常简单，因为您只需将列表项传递给线程（或线程队列）。这具有使用多个处理器（如果可用）的额外好处。

线程最有可能提高应用程序的感知性能，即使它实际上可能不会花费更少的时间。将其与按需转换相结合，您应该会看到巨大的改进。

ETA：正如 Jerry 在评论中提到的那样，线程池是一个好主意。Embarcadero 网站上有[一些这样的例子](http://cc.embarcadero.com/item/17738)，如果你搜索他们的博客。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T05:40:22.787

添加到蒂姆的优秀建议中：我不确定您如何访问您的位图，`ScanLine`如果您不这样做，请使用位图的属性。如果可能，请使用 pf32Bit，访问更容易，而且速度更快。

请注意位图不是线程安全的。读取扫描线是没有问题的，但是当你想写回结果时，一定要使用临界区或类似的东西。

强烈建议使用分析器，您会惊讶于哪些代码效率低下。我使用 ProDelphi：它不贵而且非常精确。

# silverlight - 将 BindableApplicationBarIconButton IsEnabled 属性绑定到 Relaycommand CanExecute Windows Phone 7.1

> ID：10808242
> 
> 赞同：1
> 
> 时间：2012-05-29T23:45:17.563
> 
> 标签：silverlight, windows-phone-7, windows-phone-7.1, mvvm-light, relaycommand

我正在使用 Phone7.Fx R1

以下作品。当用户按下按钮时，系统不会做出反应。这意味着，如果在没有开始游戏的情况下按下停止游戏，则没有反应，反之亦然。

但是该按钮看起来是活动的。我知道我可以将 IsEnabled 绑定到不同的属性，但我希望它绑定到 NewGameCanExecute 和 StopGameCanExecute。这可能吗？

一些 XAML 代码：

```
<Preview:BindableApplicationBarIconButton Command="{Binding NewGame}" IconUri="/images/icons/appbar.add.rest.png" Text="New game" />
        <Preview:BindableApplicationBarIconButton Command="{Binding StopGame}" IconUri="/images/icons/appbar.stop.rest.png" Text="Stop game" /> 
```

中继命令：

```
public RelayCommand NewGame { get; private set; }
public RelayCommand StopGame { get; private set; }

//Constructor
NewGame = new RelayCommand(NewGameExecute, NewGameCanExecute);
StopGame = new RelayCommand(StopGameExecute, StopGameCanExecute);

void NewGameExecute()
{
    _gameStarted = true;
    _gameControlModel.StartNewGame();
    StopGame.RaiseCanExecuteChanged();
}

bool NewGameCanExecute()
{
    return !_gameStarted;
}

void StopGameExecute()
{      
    _gameControlModel.StopGame();
    _gameStarted = false;
    NewGame.RaiseCanExecuteChanged();
}

bool StopGameCanExecute()
{
    return _gameStarted;
} 
```

几个问题和答案：

**问：**您是否尝试在 CanExecute 函数中设置断点以查看它是否被调用？

**答：**是的。它确实被调用了，但即使返回 false，图标也不会变灰。如果 CanExecute 方法返回 false，则不执行 Execute 方法。但我希望图标像普通按钮一样变灰。

**解决方案**

我花了一些时间想出了一个解决方案，可以在这里找到：http: [//pastebin.com/MM75xACj](http://pastebin.com/MM75xACj)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:46:29.277

这显然是`BindableApplicationBarIconButton`您使用的任何实现中的一个错误。

向它的作者寻求帮助，或者自己调试你的第 3 方软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:27:37.483

解决方案

我花了一些时间想出了一个解决方案并编辑了 applicationbariconbutton 类。

```
namespace Phone7.Fx.Controls
{
    public class BindableApplicationBarIconButton : FrameworkElement, IApplicationBarIconButton
    {
        public int Index { get; set; }

        public static DependencyProperty CommandProperty = DependencyProperty.RegisterAttached("Command", typeof(ICommand), typeof(BindableApplicationBarIconButton), new PropertyMetadata(null, OnCommandPropertyChanged));
        private static void OnCommandPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            if (e.NewValue != e.OldValue)
            {
                ((BindableApplicationBarIconButton)d).Command = (ICommand)e.NewValue;
            }
        }

        public ICommand Command
        {
            get { return (ICommand)GetValue(CommandProperty); }
            set {
                    Command.CanExecuteChanged -= ValueOnCanExecuteChanged;
                SetValue(CommandProperty, value);
                Command.CanExecuteChanged += ValueOnCanExecuteChanged;
            }
        }

        private void ValueOnCanExecuteChanged(object sender, EventArgs eventArgs)
        {
            ICommand commandSender = sender as ICommand;
            if(commandSender != null)
            {IsEnabled = commandSender.CanExecute(null);}
        }

        public static readonly DependencyProperty CommandParameterProperty =
            DependencyProperty.RegisterAttached("CommandParameter", typeof(object), typeof(BindableApplicationBarIconButton), new PropertyMetadata(null, OnCommandParameterPropertyChanged));
        private static void OnCommandParameterPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var invokeCommand = d as BindableApplicationBarIconButton;
            if (invokeCommand != null)
            {
                invokeCommand.SetValue(CommandParameterProperty, e.NewValue);
            }
        }
        public object CommandParameter
        {
            get { return GetValue(CommandParameterProperty); }
            set
            {
                SetValue(CommandParameterProperty, value);
            }
        }

        public static readonly DependencyProperty CommandParameterValueProperty =
          DependencyProperty.RegisterAttached("CommandParameterValue", typeof(object), typeof(BindableApplicationBarIconButton), null);
        public object CommandParameterValue
        {
            get
            {
                var returnValue = GetValue(CommandParameterValueProperty);
                return returnValue;
            }
            set { SetValue(CommandParameterValueProperty, value); }
        }

        public static readonly DependencyProperty IsEnabledProperty =
            DependencyProperty.RegisterAttached("IsEnabled", typeof(bool), typeof(BindableApplicationBarIconButton), new PropertyMetadata(true, OnEnabledChanged));

        private static void OnEnabledChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            if (e.NewValue != e.OldValue)
            {
                ((BindableApplicationBarIconButton)d).Button.IsEnabled = (bool)e.NewValue;
            }
        }

        public static readonly DependencyProperty TextProperty =
            DependencyProperty.RegisterAttached("Text", typeof(string), typeof(BindableApplicationBarIconButton), new PropertyMetadata(OnTextChanged));

        public new static readonly DependencyProperty VisibilityProperty =
           DependencyProperty.RegisterAttached("Visibility", typeof(Visibility), typeof(BindableApplicationBarIconButton), new PropertyMetadata(OnVisibilityChanged));

        private static void OnVisibilityChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            if (e.NewValue != e.OldValue)
            {
                var button = ((BindableApplicationBarIconButton)d);
                BindableApplicationBar bar = button.Parent as BindableApplicationBar;

                bar.Invalidate();
            }
        }

        public new Visibility Visibility
        {
            get { return (Visibility)GetValue(VisibilityProperty); }
            set { SetValue(VisibilityProperty, value); }
        }

        private static void OnTextChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            if (e.NewValue != e.OldValue)
            {
                ((BindableApplicationBarIconButton)d).Button.Text = e.NewValue.ToString();
            }
        }

        public ApplicationBarIconButton Button { get; set; }

        public BindableApplicationBarIconButton()
        {
            Button = new ApplicationBarIconButton();
            Button.Text = "Text";
            Button.Click += ApplicationBarIconButtonClick;
        }

        void ApplicationBarIconButtonClick(object sender, EventArgs e)
        {
            if (Command != null && CommandParameter != null)
                Command.Execute(CommandParameter);
            else if (Command != null)
                Command.Execute(CommandParameterValue);
            if (Click != null)
                Click(this, e);
        }

        public bool IsEnabled
        {
            get { return (bool)GetValue(IsEnabledProperty); }
            set { SetValue(IsEnabledProperty, value); }
        }

        public string Text
        {
            get { return (string)GetValue(TextProperty); }
            set { SetValue(TextProperty, value); }
        }

        public event EventHandler Click;

        public Uri IconUri
        {
            get { return Button.IconUri; }
            set { Button.IconUri = value; }
        }
    } 
```

# xml - XML Schema：所有、序列和组

> ID：10808244
> 
> 赞同：0
> 
> 时间：2012-05-29T23:45:42.333
> 
> 标签：xml, xsd, schema

我是第一次编写 XML 模式，我找到了一些有用的工具来帮助我编写它。

现在我处于一个奇怪的境地。我编写的模式对某些工具有效，而对其他一些工具无效。这个模式是“all”、“sequence”和“group”的混合体。这是我的 XML 架构：

```
<?xml version="1.0" encoding="utf-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
     <xsd:group name="test">

        <xsd:all>
                <xsd:element name="e2" minOccurs="0" maxOccurs="1"/>
                <xsd:element name="e3" minOccurs="0" maxOccurs="1"/>
                <xsd:element name="e4" minOccurs="0" maxOccurs="1"/>
        </xsd:all>
    </xsd:group>

    <xsd:element name="e0">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="e1" maxOccurs="unbounded"/>
                <xsd:group ref="test"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

这个架构对吗？它适用于[这个验证器](http://schneegans.de/sv/)和[这个](http://www.w3.org/2001/03/webdata/xsv)验证器，但 Notepad++ 的 XML 工具插件显示“无法解析模式文件”。

PS：我写这个模式是因为我想要一个元素“e0”，这样就有可能混合使用e1、e2、e3和e4。e2、e3 和 e4 应该出现 0 或 1 次，而 e1 可能出现无限次。例如，这个 XML 文件应该通过：

```
<e0>
   <e1/>
   <e1/>
   <e1/>
   <e1/>
   <e1/>
   <e2/>
</e0>

<e0>
   <e2/>
   <e3/>
   <e4/>
</e0>

<e0>
   <e1/>
   <e2/>
   <e3/>
   <e4/>
</e0> 
```

你知道另一种方法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T00:38:20.230

根据 1.0 版本，您拥有的架构似乎是无效的，该版本[在此处（Primer）](http://www.w3.org/TR/xmlschema-0/#groups)明确指出

*`XML Schema stipulates that an all group must appear as the sole child at the top of a content model.`*

或者，尝试在[此处](http://www.w3.org/TR/xmlschema-1/#coss-modelGroup)阅读 XML Schema Structures 的第 3.8.6 节。在您的列表中，我将添加 .NET 的 XSD 处理器，在您的情况下会抱怨：

*`The group ref to 'all' is not the root particle, or it is being used as an extension.`*

使用 XSD 1.0，除非您为 e1 元素（以下为 e1s）构建包装器，否则没有任何解决方案可以用简洁的语法很好地满足您的需求。

```
<?xml version="1.0" encoding="utf-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:group name="test">
        <xsd:all>
            <xsd:element name="e1s" minOccurs="0">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="e1" maxOccurs="unbounded"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="e2" minOccurs="0"/>
            <xsd:element name="e3" minOccurs="0"/>
            <xsd:element name="e4" minOccurs="0"/>
        </xsd:all>
    </xsd:group>
    <xsd:element name="e0">
        <xsd:complexType>
            <xsd:group ref="test"/>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

当涉及到 e1 元素时，它们必须被包裹在 e1s 中

```
<e0>
    <e1s>
        <e1/>
        <e1/>
        <e1/>
        <e1/>
        <e1/>
    </e1s>
    <e2/>
</e0> 
```

或者

```
<e0>
    <e1s>
        <e1/>
    </e1s>
    <e2/>
    <e3/>
    <e4/>
</e0> 
```

然后一切都会验证...

# file-upload - RestEasy客户端框架文件上传

> ID：10808246
> 
> 赞同：15
> 
> 时间：2012-05-29T23:45:44.407
> 
> 标签：file-upload, client, resteasy

有谁知道如何创建 RestEasy 客户端调用以使用以下两个接口签名上传文件？我根本找不到任何信息。我知道如何使用 HttpClient 来做到这一点，但我想使用客户端代理来保持一致。

```
@POST
@Path("/upload")
@Consumes("multipart/form-data")
public void uploadFile(MultipartFormDataInput input);

@POST
@Path("/upload2")
@Consumes("multipart/form-data")
public void uploadFile2(@MultipartForm FileUploadForm form); 
```

任何帮助将不胜感激，弗雷德里克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-14T20:24:13.120

使用 RESTEasy 3.0.X，通过 MultipartFormData 上传的文件可能如下所示：

```
ResteasyClient client = new ResteasyClientBuilder().build();

ResteasyWebTarget target = client.target("http://.../upload");

MultipartFormDataOutput mdo = new MultipartFormDataOutput();
mdo.addFormData("file", new FileInputStream(new File("....thermo.wav")),
    MediaType.APPLICATION_OCTET_STREAM_TYPE);
GenericEntity<MultipartFormDataOutput> entity = new GenericEntity<MultipartFormDataOutput>(mdo) {};

Response r = target.request().post( Entity.entity(entity, MediaType.MULTIPART_FORM_DATA_TYPE)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T03:30:13.750

我花了很多时间四处寻找这个问题的答案，但我终于想出了如何让它发挥作用。您需要添加：

```
resteasy-multipart-provider-2.3.5.Final.jar 
```

到您的类路径（或`resteasy`您正在使用的任何版本）。然后，您可以执行以下形式的操作：

```
ClientRequest add_request = request();

MultipartFormDataOutput upload = new MultipartFormDataOutput();
upload.addFormData("data", recording, MediaType.APPLICATION_XML_TYPE);
upload.addFormData("file", Resources.toByteArray(Resources.getResource("thermo.wav")), MediaType.APPLICATION_OCTET_STREAM_TYPE);

add_request.body(MediaType.MULTIPART_FORM_DATA_TYPE, upload);

ClientResponse<?> recording_response = add_request.post();
Assert.assertEquals(Response.Status.CREATED, recording_response.getResponseStatus()); 
```

最后一行只是一个`JUnit`测试断言；不需要。 由资源类`thermo.wav`指定`@FormParam("file")`并在此处加载到字节数组中。`Google Guava's`您可以根据需要创建字节数组。

# php - 以 JSON 格式存储多条记录时出错

> ID：10808251
> 
> 赞同：1
> 
> 时间：2012-05-29T23:46:21.413
> 
> 标签：php, mysql, json

我的代码有问题，原因是，当运行查询 un PHP FILE 时，它会从中检索所有记录`SELECT * FROM material`，然后将其传递给 JS FILE 进行处理并以数组 json 格式存储所有记录，但显示此错误：

```
Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result 
resource in C:\AppServ\www\biblioteca\include\doLogin.php on line 31 [] 
```

_

**带函数的 PHP 文件**

```
.........
public function searchMat($tipoBusqueda,$terminoBuscar){

$query = " SELECT * FROM material ";
$result = mysql_query($query) or die (mysql_error());
$resultArray =  mysql_fetch_assoc($result);
return $resultArray;
} 
```

**其他带有函数的 PHP 文件**

```
$results = $db->searchMat($tipoBusqueda, $terminoBuscar);
$jsonSearchResults = array();

if ($results != false) {
    while($row = mysql_fetch_assoc($results)) {
        $jsonSearchResults = array (
        'clavemat' => $row['cve_mat'],
        'tipomat' => $row['tipo_mat'],
        'titulomat' => $row['titulo_mat'],
        'autormat' => $row['autor_mat'],
        'editmat' => $row['edit_mat'],
        'success' => 'success', 
        );  
    }

    echo json_encode($jsonSearchResults);
} 
```

**编辑：**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T23:56:18.113

您的 searchmat 函数应该返回 $result 而不是第一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T00:15:24.633

在这一行：

```
$results = $db->searchMat($tipoBusqueda, $terminoBuscar); 
```

`$results`是一个数组，而不是 MySQL 结果资源。所以你不需要将它传递给`mysql_fetch_assoc`. 你已经在`searchMat`.

不过这里有一个问题。`searchMat`只从结果中获取一行并返回它。之后，您将无法再获得其余的行。您应该`searchMat`返回资源或将`while`循环移入`searchMat`，以便它可以返回包含查询的所有结果的数组。

试试这样：

```
public function searchMat($tipoBusqueda,$terminoBuscar){
    $query = "
        SELECT 
            cve_mat AS clavemat,
            tipo_mat AS tipomat,
            titulo_mat AS titulomat,
            autor_mat AS autormat,
            edit_mat AS editmat,
            success
        FROM material
    ";
    $result = mysql_query($query) or die (mysql_error());
    $out = array();
    while ($row =  mysql_fetch_assoc($result)) 
    {
        $out[] = $row;
    }
    return $out;
}

$results = $db->searchMat($tipoBusqueda, $terminoBuscar);

if (!empty($results)) {
    echo json_encode($results);
} 
```

我还更改了您的查询，以便已按照您的需要命名列。这样您就不必费心将一个数组复制到另一个数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T23:58:53.530

你打[`mysql_fetch_assoc`](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)了两次电话。第一次在您获得的[资源](http://www.php.net/manual/en/language.types.resource.php)[`mysql_query`](http://www.php.net/manual/en/function.mysql-query.php)上，第二次在数组上 - 无效。

此外，当您遍历所有行时，您需要[添加到](http://www.php.net/manual/en/function.array-push.php) `$jsonSearchResults`. 正如@RezaSanaie 已经说过的那样，它在您的代码中的每次迭代都会被覆盖。它应该是：

```
public function searchMat() {
/* returns the material table as a resource */
    $query = "SELECT * FROM material";
    $result = mysql_query($query) or die (mysql_error());
    return $result;
}

$results = $db->searchMat();
$jsonSearchResults = array();
while ($results!=false && $row = mysql_fetch_assoc($results)) {
    array_push($jsonSearchResults, array(
        'clavemat' => $row['cve_mat'],
        'tipomat' => $row['tipo_mat'],
        'titulomat' => $row['titulo_mat'],
        'autormat' => $row['autor_mat'],
        'editmat' => $row['edit_mat'],
        'success' => 'success'
    ));
}   
echo json_encode($jsonSearchResults); 
```

# c++ - (C++11) 如果 cstdint 类型“不正确”使用，g++ 不会提供正确的警告

> ID：10808255
> 
> 赞同：3
> 
> 时间：2012-05-29T23:47:05.113
> 
> 标签：c++, c++11, compiler-warnings, cstdint

今天我正在尝试在**cstdint**头文件中定义的一些类型： `std::uint16_t`等等`std::uint_least16_t`..

我认为它们非常有用，因为您确切地知道或至少知道它们有多大，这与更常见的特定于平台的问题不同：`int`、`unsigned int`等。但是我认为有一个问题会导致许多错误。

假设我们有以下代码：

```
#include <cstdint>
#include <iostream>

int main()
{
  std::uint_fast16_t test = 0;

  test = 65536;

  std::cout << test;

  return 0;
} 
```

我们知道`std::uint_fast16_t`应该至少有 2 个字节。

如果`uint_fast16_t`恰好是 2 个字节，则此代码会因溢出而发出警告。但在我的情况下，它`uint_fast16_t`是 8 个字节（之前检查过）。

所以在我的例子中，这段代码编译并运行良好，在另一个例子中我们得到一个警告。我们的代码不可移植。这对我来说是错误的。即使变量可以保存该数据，编译器至少应该给我们一个警告或建议我们使用更大的类型。我对吗？还是我误解了这些类型的目的？

我使用带有这些标志的 g++ 编译了代码

> -Wall -Werror -pedantic -std=c++0x

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T23:51:27.427

编译器无法提供任何其他警告，因为这些类型是 typedef，并且它们被完全视为它们的同义词类型。这就是 C++ 的工作原理。您必须`UINT_FAST16_MAX`并且可能`std::numeric_limits<std::uint_fast16_t>::max()`会告诉您这种类型可以容纳的最大值。使用这些信息是你的工作。

还要记住，stdint 定义的大多数类型实际上是可选的，所以只需使用它们而不检查它们是否存在，你就会使你的代码不可移植。

# ruby-on-rails - 在 Rails 控制器中调用有条件地呈现视图的方法

> ID：10808256
> 
> 赞同：4
> 
> 时间：2012-05-29T23:47:26.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, web-applications

我正在编写一个带有名为“pages_controller”的控制器的 Ruby on Rails 应用程序，该控制器负责向用户显示页面。可以显示 3 种不同类型的页面，每种情况下后端必须发生不同的事情，所以我决定将功能分解为控制器中的 3 个方法。当用户请求一个页面时，调用“show”方法，判断该页面是否： 1\. 属于该用户 2\. 属于另一个用户，并且可以被请求它的用户查看 3\. 属于另一个用户，并且不能被请求它的用户查看（未经授权）

然后从那里调用适当的方法来显示页面。代码看起来像这样：

```
def show
    if (something)
      showMine

    elsif (something else)
      showAnother
    else
      showUnauthorized
    end
end

def showUnauthorized

    respond_to do |format|
      format.html # showUnauthorized.html.erb
    end
end

def showMine

    respond_to do |format|
      format.html # showMine.html.erb
    end
end

def showAnother

    respond_to do |format|
      format.html # showAnother.html.erb
    end
end 
```

我收到模板丢失错误，因为 rails 想要在调用“show”时呈现视图，但我不希望在调用“show”时呈现任何视图。我只是想让“show”从那里调用正确的方法，并渲染该方法的相应视图（showMine、showAnother 或 showUnauthorized）。我怎样才能做到这一点？还是我完全以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:06:59.133

您需要声明您在路由文件中创建的这些新操作，因为它们不属于 RESTful 路由。
我建议只在控制器中保留显示操作，并使用 render 方法在显示视图中创建 IF 以包含部分（_showMine.html.erb，showAnother.html.erb，showUnauthorized）

例子：

显示视图：

```
if (something)
  <%= render 'showMine' %>
elsif (something else)
  <%= render 'showAnother' %>
else
  <%= render 'showUnauthorized' %>
end 
```

我希望它有帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T02:40:03.033

我基本上同意 Samy 的评论，但这里有一些背景：

告诉 Rails 使用什么视图的方法是`render`. 如果在您的方法中没有调用该方法`show`，Rails 假定您有一个名为 的视图`show.xxx.xxx`，例如`show.html.erb`，它应该被渲染。请注意，它不假定模板将带有前缀，`show`因为那是方法的名称。它假定它将是`show`因为那是*动作的名称。*动作的名称作为请求的一部分传递给控制器​​；它不是简单地从其中包含块的任何方法的名称派生而来`respond_to`。

所有`respond_to`块所做的只是根据请求的 MIME 类型指定不同的视图模板，但是由于您从未调用过`render`，所有这些额外的方法仍在尝试调用`show`视图（`show.html.erb`在每种情况下），因为您从未将 Rails 告诉`render`任何其他人视图，动作名称为`show`。

因此，只需调用`render [some_view]`其他每个方法，而不是 respond_to 块。

这可能不是最明确的答案，但我建议您也阅读以下内容：

[http://ryanbigg.com/2009/04/how-rails-works-2-mime-types-respond_to/](http://ryanbigg.com/2009/04/how-rails-works-2-mime-types-respond_to/)

它描述了做什么`respond_to`，特别是它如何关闭动作名称以确定要呈现的视图。

# objective-c - 沙盒 - 不允许 killall 操作

> ID：10808258
> 
> 赞同：2
> 
> 时间：2012-05-29T23:48:15.657
> 
> 标签：objective-c, macos, mac-app-store, appstore-sandbox

我正在编写一个运行以下命令的小型 Mac 应用程序（在 Obj-C 中）：

```
system("killall Finder"); 
```

我想看看如果我对应用程序进行沙盒处理（因为 6 月 1 日将需要沙盒处理）会发生什么，并且该应用程序将无法运行。我得到以下回复：

```
killall: warning: kill -TERM 6524: Operation not permitted 
```

有没有办法解决这个问题？就像在特定的权利中添加或以其他方式运行命令？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T00:21:32.970

你的应用完全违背了沙盒的精神，所以 MAS 的审稿人几乎不可能接受它。此外，您可能会惊讶于“defaults write com.apple.finder”在您的沙箱中所做的事情——基本上没有什么用处。您必须对 home-relative /Library/Preferences/com.apple.finder.plist 使用临时异常权利，使用一些不受沙盒影响的 API 来获取 home 路径（例如，getpwent()->pw_dir )，然后直接加载和保存 plist。然后你会发现没有办法从沙盒应用程序调用非子进程，期间，没有办法绕过它 - 如果你尝试系统 killall，它最终会在与你相同的沙盒中运行，因此具有相同的限制。

但是，您问了一个具体问题，即是否有办法绕过该系统 killall 失败，并且至少有三个（不包括沙盒中的漏洞，这些漏洞要么已被 10.7.4 堵塞，要么肯定会很快被堵塞）：

1.  您可以创建一个没有沙盒的助手应用程序，它会为您完成所有工作。仅有的两种 App Store 批准的方法是 XPC 和 SMLoginItemSetEnabled。如果没有用户明确告诉你这样做，你就不能启用帮助程序。

2.  您可以向 Finder 发送一个 Apple 事件，要求它退出，而不是发出信号。最简单的方法是执行 Applescript '告诉应用程序“Finder”退出'。至少对于 10.7.3 和更早版本，您需要临时的异常权利才能将 Apple 事件发送到 com.apple.finder。（未来的操作系统版本可能会有不同的机制，但没有人可以在 NDA 论坛之外讨论它们。）

3.  您可以将 Apple 事件发送到其他进程（如系统事件）以代表您终止 Finder。

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T19:26:22.623

如果您有充分的理由仍然可以杀死这样的应用程序： [如何在启用了 sanboxing 的帮助应用程序中终止我的应用程序？](https://stackoverflow.com/questions/14014192/how-can-i-terminate-my-app-in-a-helper-app-with-sanboxing-enabled)

# c++ - 如何简化复杂的模板声明

> ID：10808260
> 
> 赞同：4
> 
> 时间：2012-05-29T23:48:24.963
> 
> 标签：c++, c++11

例如我想简化`std::tr1::shared_pointer`模板类。我想为`std::tr1::shared_pointer`.

但这不起作用：

```
#include <tr1/memory>

template <class T>
class SharedPointer : public std::tr1::shared_ptr<T>
{
};

int main(int argc, char *argv[])
{
    SharedPointer<int> test(new int(5));
    return 0;
} 
```

由于构造函数不是继承的。

有解决这个问题的模式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T23:50:44.877

如果你想给它起别名，`using`声明将创建一个真正的别名，而不是一个子类：

```
template<class T>
using SharedPointer = std::tr1::shared_ptr<T>; 
```

## 编辑

一种适用于 GCC 4.6.* 编译器的方法是围绕`std::tr1::shared_ptr<T>`. 由于 GCC 4.6.* 支持 C++11 库，我使用它而不是 TR1：

```
#include <memory>
#include <utility>

template<typename T, typename... Args>
std::shared_ptr<T> make_shared_ptr(Args &&... args)
{
    return std::shared_ptr<T>(std::forward<Args>(args)...);
}

int main(int argc, char *argv[])
{
    auto test = make_shared_ptr<int>(new int(5));
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T00:10:23.370

如果您不使用 C++11，那么不幸的是，您能做的最好的事情是：

```
template <class T>
struct SharedPointer
{
    typedef std::tr1::shared_ptr<T> type;
}; 
```

必须用作：

```
SharedPointer<int>::type x(new(int)); 
```

# backbone.js - 骨干路由器或视图是否应该处理获取数据并显示加载状态？

> ID：10808261
> 
> 赞同：17
> 
> 时间：2012-05-29T23:48:25.547
> 
> 标签：backbone.js

在我的应用程序的许多地方，都会发生以下模式：

*   用户点击一些链接触发导航
*   需要获取数据以呈现视图
*   UI 设计需要在获取数据时显示“加载”微调器
*   获取数据后，我们将显示渲染视图

我尝试了以下两种实现模式：

1.  路由器处理获取

    *   路由器告诉容器视图显示加载微调器
    *   路由器加载任何集合/模型
    *   路由器告诉容器视图隐藏加载微调器
    *   路由器将集合/模型传递给视图并呈现它
2.  查看句柄获取

    *   路由器只是创建和渲染视图
    *   视图获取它需要的集合和模型
    *   首次渲染视图时，它只显示加载微调器，因为数据仍在加载
    *   当数据到达时，模型/集合触发事件并且视图绑定到这些事件，因此它重新渲染自身，从而隐藏加载微调器并显示完整视图

我不喜欢#1，因为路由器变成了一个巨大的模型/集合获取逻辑球，并且似乎有太多的责任。#2 似乎是更好的职责分配（路由器只是决定显示哪个视图，视图确定它需要获取哪些数据），但它确实使视图呈现有点棘手，因为它现在是有状态的。

StackOverflow 社区是怎么想的？1、2还是别的什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-28T05:18:07.270

这篇文章很老了，但我们今天早些时候正在审查它，所以以防其他人遇到它：

对我来说，我真的看到了两个不同的问题：

1.  数据获取机制和结果视图渲染应该发生在路由器还是视图中？
2.  视图应该期待已经解析的模型，还是应该响应可能仍在加载的模型？

我们处理它的方式与一些个人喜好混合在一起：

1.  两者都没有，尽管我会更靠近路由器。路由器应该处理路由，视图应该处理查看，而其他东西应该处理模型/集合获取逻辑的机制和工作流程。我们称其为控制器，路由器基本上委托给它。
2.  正如尤里所暗示的，“有时”是现实。我认为这可能是个案决定，但最终应该是控制器和视图之间的合同，而不是路由器/视图之间的合同。

我喜欢 Yuri 的要点，有几个注意事项（缩进的项目符号）：

*   路由器只知道将用户发送到哪里
*   外部视图只知道用户应该查看什么（给定它的数据）

    *   假设外部视图特定于内部视图的用例并且由另一个视图“拥有”（用于清理）
    *   否则对于通用容器（例如渲染到“主”位置），我们发现拥有一个管理页面上某个“部分”的视图的组件很有用 - 我们称之为渲染器
*   内部视图只知道如何只显示它们的一小部分（并且可以在其他地方使用）
*   并且渲染功能始终显示正确的内容。

    *   对于通用容器，最终由渲染器负责

Renderer 的主要原因是处理与该部分相关的事情，例如清理现有视图以避免重影视图，在渲染时滚动到顶部（我们的 MainContentRenderer 会这样做），或者在这种情况下显示一个微调器。

一个可能看起来像的伪代码示例，用于：

*   通用内容目标“主要”（如果它是特定于用例的，根据 Yuri 的示例，使用 ComponentView 可能会更好，具体取决于您的视图生命周期管理策略）
*   我们必须获取并等待的模型
*   接受已加载模型的视图

**路由器：**

```
routes: {
    "profile": "showProfile"
},

showProfile: function() {
    return new ProfileController().showProfile();
} 
```

**配置文件控制器：**

```
showProfile: function() {
    //simple case
    var model = new Model();
    var deferredView = model.fetch.then(function() {
        return new View(model);
    };
    MainContentRenderer.renderDeferred(deferredView);
} 
```

**主要内容渲染器：**

```
var currentView;

renderDeferred: function(deferredView) {
    showSpinner();
    deferredView.then(function(view) {
        this.closeSpinner();
        this.closeCurrentView();
        this.render(view);
    }
},

render: function(view) {
    currentView = view;
    $('#main-content').html(view.render().el);
}

closeCurrentView: function() {
    if (currentView and currentView.close()) {
        currentView.close();
    }
} 
```

引入控制器还具有可测试性的额外好处。例如，我们有复杂的规则来执行围绕 URL 管理的搜索、在结果视图和新搜索视图之间进行选择，以及在缓存的“最后”搜索结果和执行新搜索之间进行选择。我们对控制器进行了 Jasmine 测试，以验证所有流逻辑是否正确。它还提供了一个隔离的地方来管理这些规则。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-30T01:01:11.113

我倾向于使用带有三个视图的第二个选项，即容器、加载视图和内容视图。也就是说，容器由路由器实例化，并且在每次渲染期间，它会查看手头要显示的内容（有时由路由器提供，有时由其自身提供）并决定要实例化哪些视图。一个简单的，人为的例子：

```
ContainerView = Backbone.View.extend({

  initialize: function (options) {
    options.data.bind("reset", this.render, this);
  },

  render: function () {
    var view;

    // If the loading view is only shown once, e.g., splashing, then isReady()
    // may be better here.
    if (this.options.data.isLoading()) {
      view = LoadingView;
    } else {
      view = DataView;
    }

    this.$("div.content").html(new view().render().el);
  }

}); 
```

我喜欢这种方法，因为：

*   路由器只知道将用户发送到*哪里；*
*   外部视图只知道*用户*应该查看什么（给定它的数据）；
*   内部视图只知道*如何*只显示它们的一小部分（并且可以在其他地方使用）；和
*   渲染功能始终显示正确的内容。

*澄清：* 在这种情况下，视图的目的是了解必须显示的内容应该如何最好地显示给用户。在这种情况下，一些仍在加载的数据最好用加载视图显示，而准备好的数据最好用数据视图显示。大多数真实视图实际上是用更多视图组成它们的显示，例如，根据用户授权不同的动作容器。

# php - 为什么我在 codeigniter 中使用 .htaccess 得到 404？

> ID：10808263
> 
> 赞同：1
> 
> 时间：2012-05-29T23:48:52.973
> 
> 标签：php, .htaccess, codeigniter, routing

在我的本地机器上，我在 web 路由中有 .htaccess，内容如下：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

但是当我尝试访问以下 url - localhost/admin - 我得到“404 Not Found”。一世

我尝试编辑最后一行以包含前导斜杠：

```
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

但这没有用。

我确保 mod_rewrite 已启用：

```
sudo a2enmod rewrite 
```

我的配置设置在 application/config/config.php 中更改为：

```
$config['index_page'] = ''; 
```

我检查了我的控制器拼写，它似乎是正确的（如果我访问 localhost/index.php/admin 它会加载控制器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:12:58.433

因此，根据您的最后评论-您已`.htaccess`关闭。

`AllowOverride All`您可以通过在 apache 配置中指定来打开它

PS：尝试查找当前`AllowOverride`设置，很可能它被指定为`None`或比`All`

# jquery - jQuery UI -- 绑定函数中的可拖动选项

> ID：10808269
> 
> 赞同：2
> 
> 时间：2012-05-29T23:49:48.807
> 
> 标签：jquery, jquery-ui, draggable

如何在“绑定”功能中使用 jQuery UI 可拖动选项？使用标准`draggable()`功能不适用于我想做的事情。

谢谢！

```
$('a#dragthis')
    .bind('dragstart', function(e) {
        isDragging = true;
    })
    .bind('drag', function(e) {
        var x = e.pageX;
        var y = e.pageY;
        console.log(x + "|" + y);
        motivationIsWorking(x, y);
    })
    .bind('dragend', function(e) {
        isDragging = false;
        motivationStopped();
        unmotivateUser();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T03:12:01.197

Draggable 有回调函数来做你正在寻找的东西：

[http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)

[http://api.jqueryui.com/draggable/#event-stop](http://api.jqueryui.com/draggable/#event-stop)

所以代替这个

```
.bind('dragend', function(e) {
    isDragging = false;
    motivationStopped();
    unmotivateUser();
}); 
```

做这个

```
$(element).draggable({
    stop:function( event, ui ) {
        isDragging = false;
        motivationStart();
        remotivateUser();
    }
}); 
```

# .net - 使用 EF MF 时如何初始化数据库？

> ID：10808270
> 
> 赞同：1
> 
> 时间：2012-05-29T23:49:50.333
> 
> 标签：.net, entity-framework, entity-framework-4.1, ef-model-first

我有一个使用 EF 4.1（使用模型优先风格）的应用程序，我想在更新模型并删除并重新创建数据库时初始化数据库。

我花了几个小时试图找到合适的文档，我认为 Database.SetInitializer 是要走的路，但事实证明这需要一个 DbContext，并且生成的代码使用 ObjectContext。

我相信我可以在幕后摆弄以将 T4​​ 模板切换为使用 DbContext，但肯定有一种方法可以使用开箱即用的模型优先生成的代码吗？

[我应该完全放弃模型优先吗？]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:42:28.810

模型优先方法没有任何自动数据库生成。

当您首先使用模型时，您只需右键单击设计器窗格并选择*从模型生成数据库*。它将创建数据库脚本，您可以执行该脚本来创建数据库。VS2010 有一个名为[Database Generation Power Pack](http://visualstudiogallery.msdn.microsoft.com/df3541c3-d833-4b65-b942-989e7ec74c87)的附加插件，它允许一些更高级的场景，例如在现有数据库和模型之间生成更改脚本，但这个工具至少需要 VS2010 Premium。

# android - 用户启动此应用程序时获取应用程序名称

> ID：10808276
> 
> 赞同：2
> 
> 时间：2012-05-29T23:50:10.117
> 
> 标签：android

我想在我的应用程序中创建一个服务（或广播），以检测用户何时选择设备中的任何应用程序。所以我的服务会检测到一个新的应用程序已经启动。

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:26:18.473

您应该使用`getRunningAppProcesses()`加载正在运行的应用程序列表并检查此列表中的变化。

看到这个[链接](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningAppProcesses())

另一种解决方案是分析 logcat 输出

看到[这个问题的第一个答案](https://stackoverflow.com/questions/3290936/android-detect-when-other-apps-are-launched)

# linq - 使用范围和计算值在 LINQ 中进行分组

> ID：10808279
> 
> 赞同：-3
> 
> 时间：2012-05-29T23:50:29.337
> 
> 标签：linq, grouping, range

以下的 LINQ 等效语句是什么？

```
SELECT FLOOR(Value / @Step) * @Step AS Bin,
       COUNT(*) AS Cnt
FROM Measurements
WHERE (StepId = @StepId)
GROUP BY Bin
ORDER BY Bin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:03:15.070

目前尚不清楚这些参数或列的来源，但假设 LINQ to SQL，这应该或多或少等效：

```
var step = ...;
var stepId = ...;
var query =
    from m in dc.Measurements
    where m.StepId == stepId
    group m by m.Bin into g
    orderby g.Key
    select new
    {
        Bin = Math.Floor(Value / step) * step, // where did "Value" come from?
        Cnt = g.Count(),
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:37:14.180

使用 Lambda 表达式：

```
var query = dc.Measurements.AsEnumerable().Where(x=>x.StepId=_stepId).
GroupBy(g=>g.Bin).Select(xg=>new
    {
        Bin = Math.Floor(Value / step) * step, 
        Cnt = xg.Count(),
    }
 ); 
```

# mysql - 如何查询 Wordpress 的 MySQL 以获取具有特定 meta_value 和一天前注册日期的用户列表？

> ID：10808282
> 
> 赞同：1
> 
> 时间：2012-05-29T23:50:50.943
> 
> 标签：mysql, wordpress

我正在尝试在 Wordpress 的数据库中搜索以下用户列表：1）具有一定能力，2）注册时间超过 24 小时。

对于第 1 部分，我编写了这个查询来挑选出某种类型的用户。

```
$querystr ="SELECT user_id, meta_value FROM wp_usermeta WHERE meta_value LIKE '%s2member_level5%'"; 
```

然后，对于第 2 部分，我开始编写此查询来检查一天或更早的 Wordpress 用户帐户。（我不认为我做得对。）

```
$agingstr ="SELECT ID, user_registered FROM wp_users WHERE datediff(now(),`user_registered`)>=1"; 
```

我的目标是使用 user_id 键将两者结合起来，并为我们提供一个满足这两个条件的列表。

所需列表将采用满足两个表中的两个条件的用户 ID 键的形式。

非常感谢任何帮助。

（我知道这是一种不幸的 EAV 模式，但由于 Wordpress 的性质，我们坚持使用它。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T23:53:41.733

查询选择注册时间超过24小时的用户：

```
SELECT user_id, user_registered
FROM   wp_users
WHERE  user_registered < NOW() - INTERVAL 24 HOUR 
```

要组合查询：

```
SELECT user_id, wp_usermeta.meta_value, wp_users.user_registered
FROM   wp_usermeta JOIN wp_users USING (user_id)
WHERE  wp_usermeta.meta_value LIKE '%s2member_level5%'
   AND wp_users.user_registered < NOW() - INTERVAL 24 HOUR 
```

# python - 程序运行太慢！: 建议算法/实现优化

> ID：10808283
> 
> 赞同：1
> 
> 时间：2012-05-29T23:51:08.273
> 
> 标签：python, algorithm, sqlite, optimization, python-2.7

我有一个巨大的 python 列表（A）列表。列表 A 的长度约为 90,000。每个内部列表包含大约 700 个`(datetime.date,string)`. 现在，我正在分析这些数据。我正在做的是我在内部列表中采用大小为 x 的窗口，`x = len(inner list) * (some fraction <= 1)`并且我正在保存每个有序对 (a,b)，其中 a 出现在该窗口中的 b 之前（实际上，内部列表是按时间排序的）。我将这个窗口移动到最后一个元素，一次从一端添加一个元素，然后从另一个元素中删除，这需要`O(window-size)`时间，因为我只考虑新的元组。我的代码：

```
for i in xrange(window_size):
        j = i+1;
        while j<window_size:
            check_and_update(cur, my_list[i][1], my_list[j][1],log);
            j=j+1

    i=1;
    while i<=len(my_list)-window_size: 
        j=i;
        k=i+window_size-1;
        while j<k:
            check_and_update(cur, my_list[j][1], my_list[k][1],log);  
            j+=1
        i += 1 
```

这`cur`实际上是一个 sqlite3 数据库游标，`my_list`是一个包含元组的列表，我为 A 中的所有列表迭代此代码，并且`log`是一个打开的日志文件。在方法`check_and_update()`中，我正在查找我的数据库以查找元组（如果存在），否则我将其插入，以及到目前为止的出现总数。代码：

```
def check_and_update(cur,start,end,log):    
    t = str(start)+":"+ str(end)
    cur.execute("INSERT OR REPLACE INTO Extra (tuple,count)\
                 VALUES ( ? , coalesce((SELECT count +1 from Extra WHERE tuple = ?),1))",[t,t]) 
```

正如预期的那样，这个元组的数量是巨大的，我之前曾尝试过很快耗尽内存的字典。所以，我求助于 SQLite3，但现在它太慢了。我尝试过索引但没有帮助。可能我的程序花费大量时间查询和更新数据库。你对这个问题有什么优化思路吗？可能会更改算法或一些不同的方法/工具。谢谢！

**编辑**：我的目标是找到在窗口中出现的字符串元组的总数，按它们出现的不同内部列表的数量分组。我用这个查询提取这些信息：

```
for i in range(1,size+1):       
        cur.execute('select * from Extra where count = ?',str(i))
        #other stuff 
```

例如（我忽略了日期条目并将它们写为'dt'）：

```
My_list = [
            [ ( dt,'user1') , (dt, 'user2'), (dt, 'user3') ]
            [ ( dt,'user3') , (dt, 'user4')]
            [ ( dt,'user2') , (dt, 'user3'), (dt,'user1') ]
          ] 
```

在这里，如果我取分数 = 1，则结果：

```
only 1 occurrence in window: 5 (user 1-2,1-3,3-4,2-1,3-1)
only 2 occurrence in window: 2 (user 2-3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:51:45.050

让我说清楚。

您有多达大约 220 亿个潜在元组（对于 90000 个列表，700 个中的任何一个，以下任何条目，平均 350 个），这可能会更少，具体取决于窗口大小。您想查找它们出现的内部列表的数量，有多少元组。

这种大小的数据必须保存在磁盘上。由于大小而存在于磁盘上的数据的规则是“永远不要随机访问，而是生成然后排序”。

所以我建议你把每个元组写到一个日志文件中，每行一个元组。对该文件进行排序。现在任何给定元组的所有实例都在一个地方。然后运行文件，并为每个元组发出它出现的次数（即它在多少内部列表中）的计数。对第二个文件进行排序。现在运行该文件，您可以提取出现 1x、2x、3x 等的元组数量。

如果您有多台机器，很容易将其转换为 MapReduce。（这在道德上是相同的方法，但是你可以并行化很多东西。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:00:28.157

[Apache Hadoop](http://hadoop.apache.org/mapreduce/)是适合此类问题的 MapReduce 实现之一：

# redirect - Primefaces - 如何重定向到移动版本？

> ID：10808293
> 
> 赞同：5
> 
> 时间：2012-05-29T23:52:16.030
> 
> 标签：redirect, mobile, jsf-2, primefaces

我在 JSF 2（primefaces 3.3）中创建了一个网站，现在我想创建一个移动版本。我对台式机/移动设备有不同的看法。我已经创建了一个自定义视图处理程序来检测移动浏览器。它看起来工作正常。但是不明白的是如何将用户重定向到移动页面。我搜索了很多，没有人说这一步发生在哪里。我应该在哪一步做到这一点？重定向用户，怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T04:06:51.370

在[`Filter`](https://stackoverflow.com/tags/servlet-filters/info)映射上`FacesServlet`而不是在`ViewHandler`.

然后就很简单了

```
if (needsRedirectToMobileURL) {
    response.sendRedirect(mobileURL);
}
else {
    chain.doFilter(request, response);
} 
```

A`ViewHandler`无意操纵请求/响应。它旨在处理给定请求的 JSF 视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T23:55:34.363

通常，您不想重定向到移动站点，而是使用 css 媒体查询来确定浏览器大小并为此使用不同的 css。这是一个简单的例子

[http://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)

# jquery - 怎么做镜面效果

> ID：10808295
> 
> 赞同：0
> 
> 时间：2012-05-29T23:52:26.980
> 
> 标签：jquery, html

```
<li id="li_id1" class="li_img1">
    <div>
        <a href="#"><img id="imge1" class="img1" src="img/slide_001.png" alt="My Profile" />
            <canvas id="canvas1"></canvas>  
        </a>
     </div>
</li>

var img_path="img/slide_01.png";
var context = document.getElementById(canvas1).getContext("2d");
var img = new Image();
img.src = img_path;
context.translate(0, 0); 
context.scale(-1,1) 
context.rotate(-3.09);

img.onload = function() {
    context.drawImage(img,0, -205,190,190);
} 
```

我想我必须放置渐变以使其具有镜像效果。任何想法提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:19:32.597

我的建议是使用其中一个插件来应用镜像效果。这是一个：

[http://www.digitalia.be/software/reflectionjs-for-jquery](http://www.digitalia.be/software/reflectionjs-for-jquery)

这是一个重复的问题来回答您的具体问题： [使用 HTML Canvas 创建反射图像？](https://stackoverflow.com/questions/1693339/create-reflected-image-with-html-canvas)

# .net - 使用 System.Net.Mail 发送纯文本电子邮件时如何设置传输编码

> ID：10808302
> 
> 赞同：1
> 
> 时间：2012-05-29T23:53:41.563
> 
> 标签：.net, smtp, smtpclient

当我使用 SmtpClient 类发送纯文本电子邮件时，传输编码设置为quoted-printable：

```
Content-Transfer-Encoding: quoted-printable 
```

我怎样才能改变它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T23:53:41.720

[使用AlternateView](http://msdn.microsoft.com/en-us/library/System.Net.Mail.AlternateView.aspx)撰写消息：

```
 MailMessage message = new MailMessage("from@example.com", "to@example.com");
 message.Subject = "Test";
 AlternateView plainText = AlternateView.CreateAlternateViewFromString("test");
 plainText.TransferEncoding = System.Net.Mime.TransferEncoding.SevenBit;
 message.AlternateViews.Add(plainText);
 message.IsBodyHtml = false;

 SmtpClient smtp = new SmtpClient();
 smtp.Send(message); 
```

# javascript - Amplify.js - 类似 CRUD 的网址

> ID：10808312
> 
> 赞同：10
> 
> 时间：2012-05-29T23:55:01.690
> 
> 标签：javascript, amplifyjs

我正在使用[amplify.request](http://amplifyjs.com/api/request/)，并且我希望在向服务器发送数据和从服务器发送数据时使用类似 CRUD 的 URL。这是一个例子：

### 定义资源

```
resources = {
"document_create"           : ['/d/crud/',           "POST"],
"document_read"             : ['/d/crud/{id}',       "GET"],
"document_update"           : ['/d/crud/{id}',       "PUT"],
"document_delete"           : ['/d/crud/{id}',       "DELETE"]
};

$.each(resources, function (resource, settings) {
  definition = {
    url     : settings[0],
    type    : settings[1],
    dataType: "json",  // what comes back
    decoder : 'jsend',
    contentType: 'application/json' // what goes there
  };

  amplify.request.define(resource, "ajax", definition);
}); 
```

### 使用资源

```
function make_request(resource, params, success_cb, error_cb) {
 if (this.is_post(resource)) {
   // this.is_post is a test, defined elsewhere, to see if this is a POST request
   params = JSON.stringify(params);
 }

 amplify.request(
   resourceId: resource
   data: params
   success: success_cb
   error: error_cb
 );
} 
```

这适用于`create`and`read`和 `delete，就像这样：

```
make_request('document_delete', {id: 1}, cb) 
```

但是，对于`update`，由于内容是作为 JSON 传递的，因此 URL 替换不会按预期进行。

有没有办法利用`{id}`上述方案中的 URL 替换？

我能想到的唯一选择是将数据传递给以 URL 编码的服务器。不幸的是，这有点问题，如果可能的话，我希望能够保留使用类似 CRUD 的 URL 并使用 JSON 格式的数据进行保存。

想法将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T14:39:26.277

您可以定义自己的请求类型，或者您可以在 URL 替换发生之后*侦听*`request.ajax.preprocess`并执行您的操作。`JSON.stringify`

 *大概与您现在拥有的`is_post`代码相同，只是放在不同的位置。这不是一个神奇的功能:)

```
 amplify.subscribe( "request.ajax.preprocess", function( defnSettings, settings, ajaxSettings ) {
    if ( is_post( defnSettings.resourceId ) ) {
         // This will still include the variable that matches the URL substitution:
         var _settings = $.extend( true, {}, defnSettings.data, settings.data, ajaxSettings.data );
         ajaxSettings.data = JSON.stringify( _settings );
    }
 }); 
```

您`make_request`将不再`stringify`：

```
function make_request(resource, params, success_cb, error_cb) {
 amplify.request(
   resourceId: resource
   data: params
   success: success_cb
   error: error_cb
 );
} 
```

然后您的请求可以正常运行：

```
make_request('document_update', {id: 1, title: "New Title" }, cb) 
```

***重要提示：**`id`我编写预处理调用的方式，即使它与 URL 匹配，它也不会删除（Amplify 通常会删除匹配的键）。如果您希望它`id`从字符串化 JSON 中删除 ，请将`_settings`分配替换为：*

```
_settings = ajaxSettings.data; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-07T18:18:57.830

从 Amplify 1.1.0 开始，在定义资源时有一个 dataMap 选项。如果您传递一个函数而不是哈希对象，则放大将使用传递给请求的原始数据调用此函数。

在此示例中，我将 JSON.stringify 传递给 dataMap 选项。

```
amplify.request.define("paqueteput", "ajax", {
    url: "/api/paquetes/{id}",
    dataType: "json",
    type: "PUT",
    contentType: "application/json; charset=utf-8",
    dataMap: JSON.stringify
});

// later we pass a raw object that gets stringified to JSON
var savePaquete = function(paquete, cb) {
    amplify.request({
         resourceId: "paqueteput",
         data: paquete,
         success: cb.sucess,
         error: cb.error
    });
}; 
```

我唯一不喜欢的是 amplify 从您的数据对象中删除了 url 中映射的键。在这种情况下，id 属性会从最终的 JSON 中删除，尽管它存在于 url 中。

在放大中应该有一个选项来控制这种行为！*

# c# - 如何从文本框获取价值

> ID：10808314
> 
> 赞同：2
> 
> 时间：2012-05-29T23:55:12.253
> 
> 标签：c#, asp.net, winforms, visual-studio, textbox

我改变了我的问题，因为它可能不被理解。也对不起我的英语...

动态创建将它们放入数组的文本框。

我的一段代码：

```
public partial class NewArticleForm : System.Web.UI.Page
{
    private Label[] lblName;
    private TextBox[] txtName;
    private Label[] lblSurname;
    private TextBox[] txtSurname;
    private PlaceHolder PlaceHolder1;

    public int NumberOfOtherAuthors()
    {
        Int32 index = Convert.ToInt32(NumberList.SelectedValue);
        return index;
    }

    public void dataofOtherAuthor()
    {
        int authors;
        int i = 0;
        int j=1
        authors = NumberOfOtherAuthors();
        lblName = new Label[authors];
        txtName = new TextBox[authors];
        lblSurname = new Label[authors];
        txtSurname = new TextBox[authors];
        PlaceHolder1 = new PlaceHolder();
        for (i = 0; i < authors; i++)
        {
            Label authorInformation = new Label();
            authorInformation.Text = "Information for Author " + j.ToString() + " :";
            lblName[i] = new Label();
            lblName[i].Text = "Name:";
            txtName[i] = new TextBox();
            lblSurname[i] = new Label();
            lblSurname[i].Text = "Surname:";
            txtSurname[i] = new TextBox();    
            PlaceHolder1.Controls.Add(authorInformation);
            PlaceHolder1.Controls.Add(lblName[i]);
            PlaceHolder1.Controls.Add(txtName[i]); 
            PlaceHolder1.Controls.Add(lblSurname[i]);
            PlaceHolder1.Controls.Add(txtSurname[i]);    
            // Add a spacer in the form of an HTML <BR> element.
            Panel1.Controls.Add(PlaceHolder1);
            j++;      }  }

 protected void NumberList_SelectedIndexChanged(object sender, EventArgs e)
    {
        dataofOtherAuthor();
    }

    private void UploadForm()
    {
        int numberOfOtherAuthors = NumberOfOtherAuthors();
        int i=0;

            for (i = 0; i < numberOfOtherAuthors; i++)
            { 
                Label1.Text = txtName[i].Text;       

            }
        }

    protected void btnUpload_Click(object sender, EventArgs e)
    {
            UploadForm();
    }
} 
```

如何获得文本框的值？具体来说，我想在数据库中传递数据。如果我得到值，标签是一个测试。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:11:17.423

不确定您是否知道，但是您正在for 循环的每次迭代中进行`PlaceHolder1`。`Panel1`也许你打算`Panel1.Controls.Add(PlaceHolder1);`在 for 循环之后做？
无论如何，您已将这些 TextBox 控件放入表单中。如果您尝试通过回发访问它们，则需要通过它们的 set`ID`访问它们，或者通过它们的 asp 容器访问它们（同时设置`runat="server"`）：

```
x = (p1.Controls[placeHolderIndex].Controls[textBoxIndex] as TextBox).Text; 
```

或者你可以试试

```
x = (p1.FindControl("placeHolder_ID").FindControl("textBox_ID") as TextBox).Text; 
```

再次确保他们都是`runat="server"`

`txtName`回发后不会保留其价值。

让你的第二个循环做一些比覆盖设置字符串更有用的事情；可能将每个值添加到列表中

```
List<string> x = new List<string>();
for (i = 0; i < authors; i++)
{  
   x.Add((p1.Controls[placeHolderIndex].Controls[i] as TextBox).Text);
   //increment placeHolderIndex if you don't change your design
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T00:16:54.180

引用：

```
txtName = new TextBox[authors];
int authors = 5; 
```

您`authors`在创建数组后声明，因此您的错误显示`authors`尚不存在，后来 txtName 不存在（因为它没有正确实例化）。将其更改为：

```
int authors = 5;
txtName = new TextBox[authors]; 
```

.

此外，为了正确起见，更改`String`为`string`,

应该这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T00:07:18.143

您需要在正确的时间足够早地添加控件（通常是 OnInit），以便控件正确地从回发中获取值。

初始化：

```
Form1.Controls.Add(myTextbox); 
```

页面加载：

```
var text = myTextbox.Text; 
```

查看[如何：使用 Visual C# .NET 在 ASP.NET 中动态创建控件](http://support.microsoft.com/kb/317794)或有关“ASP.Net 如何添加动态控件”搜索条件的许多其他说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T00:10:10.267

要检索占位符中的控件，请使用`Placeholder1.FindControl("`[Name of Control] `")`。

在创建控件时，您可能希望将控件命名为独特且可引用的名称。

或者，如果您知道控件的索引，则可以使用`Placeholder1.Controls(`[Index]引用它们。`)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T12:12:47.033

我使用不同的方法创建了对象`txtName[i]`，这是我的问题。

```
public void dataofOtherAuthor() 
    { 
...
txtName[i] = new TextBox(); 
...}

private void UploadForm() 
    { 
...
Label1.Text = txtName[i].Text; 
...
} 
```

# actionscript-3 - AS3：URLLoader.load 无法将数据加载到 URLLoader.data 属性中

> ID：10808315
> 
> 赞同：1
> 
> 时间：2012-05-29T23:55:27.277
> 
> 标签：actionscript-3, file, null

我试图让我的程序能够从 .csv 读取数据并以特定方式显示内容。我正在尝试使用 URLLoader 类来执行此操作。以下是我在文件中读取的函数的代码

```
//Instantiate the URLLoader and set up the exception handling associated with it
var loader:URLLoader = new URLLoader();
loader.addEventListener( IOErrorEvent.IO_ERROR, handleIOError );
loader.addEventListener( HTTPStatusEvent.HTTP_STATUS, handleHttpStatus );
loader.addEventListener( SecurityErrorEvent.SECURITY_ERROR,  handleSecurityError );
loader.addEventListener( Event.COMPLETE, handleComplete );

//Next load the options file that will have location of .csv file
loader.dataFormat = URLLoaderDataFormat.TEXT
loader.load(new URLRequest("testData.csv"));
trace("data: " + loader.data); 
```

运行此代码会导致跟踪打印“数据：未定义”，在调试时我看到 URLLoader.load 实际上并没有更改加载程序中的任何字段。我的理解是这个方法应该把加载的数据放到数据属性中。如果有人对可能导致错误的原因有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T00:04:30.263

访问该`data`属性的代码应该驻留在`handleComplete`函数中，因为该`load()`函数是异步的；它立即返回，但它的实际执行是并行完成的。加载完成后，将调用适当的事件处理程序（`handleComplete`在您的情况下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:20:38.407

这就是你应该以编程方式进行的方式，它基本上是上面提到的 Torious 的话的代码格式。祝你好运！

```
var myTextLoader:URLLoader = new URLLoader();
myTextLoader.addEventListener(Event.COMPLETE, onLoaded);
myTextLoader.load(new URLRequest("myText.txt"));

function onLoaded(e:Event):void {
    trace(e.target.data);
} 
```

# java - 返回枚举值时Java返回什么？价值还是参考？

> ID：10808317
> 
> 赞同：2
> 
> 时间：2012-05-29T23:56:01.063
> 
> 标签：java, enums, return

所以根据我对Java的理解，当你写

```
return value; 
```

它实际上可能会返回以下两种情况之一：“value”的值，或对“value”的引用，具体取决于“value”的类型。据我所知，如果 'value' 是原始数据类型，Java 返回 'value' 的值，如果 'value' 是抽象数据类型，如类，则 Java 返回对 'value' 的引用。

现在，我很好奇的是枚举返回的行为。如果“变量”是枚举类型，是否返回值或引用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T23:57:55.560

任何[Enum](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html)都是一个可以扩展的对象，`java.lang.Enum`因此您可以返回一个引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T23:59:00.693

枚举不是原语。每个类加载器的每个枚举“值”都有一个唯一的对象实例。返回类型是对该唯一对象的引用。

# iphone - OpenCV cv::dft() iOS 断言错误

> ID：10808319
> 
> 赞同：1
> 
> 时间：2012-05-29T23:56:29.463
> 
> 标签：iphone, xcode, opencv, fft, dft

我需要一些不好的帮助。我发誓我已经寻找了 1 周的时间来寻找这个问题的答案，但没有成功，所以我来爬行寻求帮助。

我的目标很简单。我正在尝试在 Xcode 中使用 OpenCV 库。我有一些令人沮丧的问题。我让 OpenCV 库可以很好地与 cvCanney 和 cvAdaptive Transforms 配合使用，但我无法让它执行 cv::dft()。我首先尝试以下方法：

```
cv::Mat tempMat = [self.imageView.image CVGrayscaleMat];
cv::dft(tempMat, output2); 
```

这会出错，因为它的格式不正确（CV_32FC1）。所以我然后尝试：

```
cv::Mat tempMat = [self.imageView.image CVMat];
cv::cvtColor(tempMat, output2, CV_32FC1); 
cv::dft(output2, output3); 
```

我得到同样的错误。具体来说，错误内容如下：

`Assertion failed (type == CV_32FC1 || type == CV_32FC2 || type == CV_64FC1 || type == CV_64FC2) in dft`

作为对原始问题的更新，我一直在尝试使用 cv::type() 确定类型并返回 type= 24。有人可以向我解释如何破译这种类型的含义吗？是不是类型不对？最新尝试：

```
cv::Mat tempMat = [self.imageView.image CVMat];
cv::Mat output2(tempMat.rows, tempMat.cols, CV_32FC1); 

cv::cvtColor(tempMat, tempMat, CV_32FC1); 

int type = tempMat.type();
int type2 = output2.type(); 
```

当我运行它时，我得到了 tempMat 的 24 类型和 output2 的 5 类型。如果我尝试添加这个：

```
cv::cvtColor(output2, output2, CV_32FC1); 
```

我得到错误：`Assertion failed (scn == 3 || scn == 4) in cvtColor`

有任何想法吗？即使它是 RTFM 的建议，我也会在这一点上采取任何措施。请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:08:30.747

我认为这是一个可变类型和渠道数量的问题。

```
cv::Mat tempMat = [self.imageView.image CVMat];
cv::Mat output2;
cv::cvtColor(tempMat,output2, CV_BGR2GRAY);
output2.convertTo(output2, CV_32FC1);
cv::dft(output2, output2); 
output2.convertTo(image, CV_8UC1); 
```

请让我知道这是否可行，我的项目中有类似的代码并试图从中得出答案；因此它可能包含一些错误。我们可以从这里以交互方式完成它。

# d3.js - 追加/插入后可以重用 enter() 选择吗？

> ID：10808320
> 
> 赞同：40
> 
> 时间：2012-05-29T23:56:31.973
> 
> 标签：d3.js

我有一个场景，我想使用数据连接为每个数据元素附加 2 个新元素。

我最初是在做这样的事情：

```
var y = d3.selectAll("line")
    .data([123, 456]);

y.enter().append("line");  // assume attr and style set
y.enter().append("line");

y.transition()... 
```

在我仔细考虑之前，我期望在我的转换中使用的更新选择将包含来自输​​入选择的合并附加。但当然这不起作用，因为每个数据元素的选择中只有 1 个插槽。

因此，我更改了代码，使其仍然使用相同的 enter() 选择两次，然后重新选择新元素以进行转换。

这种方法有效，但我的问题是这是否是推荐的处理方式。附加/插入后是否应该确保停止使用 enter()？或者只要我记得更新选择只包含最后创建的元素就可以使用它来创建多个元素？

如果事实证明这是错误的，那么实现这一目标的更好方法是什么？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-30T16:09:48.133

否。数据连接的目的是[使元素与数据同步](http://bost.ocks.org/mike/join/)，必要时创建、删除或更新元素。如果两次创建元素，这些元素将不再与绑定的数据数组一一对应。

如果您希望每个数据对应两个元素，则首先**附加一个组 (G) 元素**以建立从数据到元素的一对一映射。然后根据需要**附加子元素**。生成的结构是这样的：

```
<g>
  <line class="line1"></line>
  <line class="line2"></line>
</g>
<g>
  <line class="line1"></line>
  <line class="line2"></line>
</g> 
```

例如：

```
var g = svg.selectAll("g")
    .data([123, 456]);

var gEnter = g.enter().append("g");
gEnter.append("line").attr("class", "line1");
gEnter.append("line").attr("class", "line2"); 
```

# ruby-on-rails - 多态关联解决了什么问题？

> ID：10808323
> 
> 赞同：0
> 
> 时间：2012-05-29T23:56:44.560
> 
> 标签：ruby-on-rails, polymorphic-associations

假设我有一个具有“收藏夹”功能的应用程序，用户可以在其中将文档、注释或评论添加到他的收藏夹列表中。

在我脑海里..

*   用户`has_many`收藏
*   收藏`belongs_to`用户

* * *

*   记录`belongs_to`收藏夹
*   记`belongs_to`下收藏夹
*   评论`belongs_to`收藏

这种关联有什么问题，多态关联有什么帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:45:44.520

因为那样你的 Favorite 实例将不知道它喜欢什么 :) 它知道它`has_one :note`，但也有 has_one `:comment`，或者？但肯定不是两者兼而有之。

**多态关联相反的方式**会有所帮助，因为它将表示一个`Favorite`对象属于`:favorited`多态的对象，因为它可以是任何类，其名称将存储在`:favorited_type`字符串 db 列中，因此您最喜欢的对象会知道它偏爱注释或文档或评论。

有一些代码

```
class Note
  has_many :favorites, :as => :favorited
  has_many :fans, :through => :favorites, :source => :user
end

class Discussion
  has_many :favorites, :as => :favorited
  has_many :fans, :through => :favorites, :source => :user
end

class Comment
  has_many :favorites, :as => :favorited
  has_many :fans, :through => :favorites, :source => :user
end

class Favorite
  belongs_to :user
  belongs_to :favorited, :polymorphic => true # note direction of polymorphy
end

class User
  has_many :favorites
  has_many :favorite_notes, :through =>  :favorites, :source => favorited, :source_type => "Note"
  has_many :favorite_comments, :through =>  :favorites, :source => favorited, :source_type => "Comment"
  has_many :favorite_discussions, :through =>  :favorites, :source => favorited, :source_type => "Discussion"

end 
```

（只需正确设置您的数据库）此设计是此类收藏用例的标准。

# sql-server - 行号（）结束

> ID：10808324
> 
> 赞同：11
> 
> 时间：2012-05-29T23:57:02.850
> 
> 标签：sql-server, tsql

我遇到了一个有点特殊的语法，你能帮忙弄清楚它的意思吗？谢谢你。

```
SELECT ROW NUMBER() OVER (ORDER BY Product.ProductID) FROM Product; 
```

此外，这失败了。我对那`ROW NUMBER() OVER`一点特别感兴趣。这也是我第一次遇到 OVER 关键字。

如果您需要完整的示例，请告诉我。为了清楚起见，我将其缩短了一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T01:24:42.570

ROW_NUMBER() 函数需要 OVER(ORDER BY) 表达式来确定行编号的顺序。默认顺序是升序，但也可以使用降序。由于 T-SQL 不允许在 T-SQL 之外检索游标，因此该函数可用于各种事情，例如在遍历一组记录时跟踪行。@tunimise fasipe 是正确的，你错过了 _

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-30T00:12:37.273

请注意，您在 ROW_NUMBER 中缺少下划线

```
SELECT ROW_NUMBER() OVER (ORDER BY Products.ProductID) FROM Products; 
```

它的作用是按照检索到的顺序（按 ProductID 排序）打印出 products 表中每条记录的行号

```
e.g.
RowNumber   ProductName
------------------------
1           Flower
2           Bag
3           Car
...         ... 
```

为了清楚起见，我添加了 ProductName 列

# iphone - 如何捕捉 UINavigationBar 后退按钮按下事件

> ID：10808327
> 
> 赞同：0
> 
> 时间：2012-05-29T23:57:36.317
> 
> 标签：iphone

如何捕捉 UINavigationBar 后退按钮按下事件？我希望在导航/返回之前的视图控制器之前做点什么。

欢迎任何评论

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:10:52.370

您可以设置`UINavigationBar.delegate`属性并实现协议的任一`navigationBar:shouldPopItem:`或`navigationBar:didPopItem:`方法`UINavigationBarDelegate`。

# generics - 抽象接口

> ID：10808328
> 
> 赞同：1
> 
> 时间：2012-05-29T23:57:36.260
> 
> 标签：generics, interface, abstract

在我的 MVC3 应用程序中，我试图创建一个通用类（下面名为 DdlGet）来调用它来获取下拉列表（DDL）的记录。下面的代码按预期执行，但我认为我过度使用通用类型 T - 特别是下面用“// *** *”指示的行

我的控制器中有以下代码

```
private readonly IGeneralReferenceRepository<StatusType> statusTypeRepository;
...
public StatusController() : this(...new StatusTypeRepository()) {}

public StatusController(...IGeneralReferenceRepository<StatusType> statusTypeRepository)
{
    ...
    this.statusTypeRepository = statusTypeRepository;
}
...
public ViewResult Index()
{
    ...
    //**** The line below passes a variable (statusTypeRepository) of the Generic
    //**** type (StatusType) and additionally calls the class (Helper<StatusType>)
    //**** with the Generic
    indexViewModel.StatusTypes = Helper<StatusType>.DdlGet(statusTypeRepository); 
```

然后在我的存储库中（这定义了从数据库[通过实体框架方法]获取 DDL 记录的实现） - 请注意通用参考通用接口（IGeneralReferenceRepository）

```
public class StatusTypeRepository : IStatusTypeRepository, IGeneralReferenceRepository<StatusType>
{
    ...
    public IQueryable<StatusType> All
    {
        get { return context.StatusTypes; }
    } 
```

我有一个接口（对应于上面调用的 All 方法）

```
public interface IGeneralReferenceRepository<T>
{
    IQueryable<T> All { get; }
} 
```

和一个帮助类来获取下拉列表记录并放入 SelectList

```
public class Helper<T>
{
   public static SelectList DdlGet(IGeneralReferenceRepository<T> generalReferenceRepository)
   {
       return new SelectList(generalReferenceRepository.All, ...);
   }
} 
```

我遇到的问题是上面第一个代码块中指示的行 - 即对填充 SelectList 的最终实现的调用

```
indexViewModel.StatusTypes = Helper<StatusType>.DdlGet(statusTypeRepository); 
```

正如上面注释中所解释的（以 // *** * 为前缀），它传递了一个 Generic statusTypeRepository，它通过以下行定义类型：-

```
private readonly IGeneralReferenceRepository<StatusType> statusTypeRepository; 
```

但是我已经在 Helper Generic 类中定义了类型（即 Helper 类）

我的问题是我可以从另一个派生一个而不是在调用中两次指定泛型。即我可以从 Helper 类类型派生 statusTypeRepository 中指定的类型，反之亦然

非常感谢
特拉维斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:17:38.570

`Helper`您可以将其放在类中的方法上，而不是在您的类中使用类型参数：

```
public class Helper
{
    public static SelectList DdlGet<T>(IGeneralReferenceRepository<T> generalReferenceRepository)
    {
        return new SelectList(generalReferenceRepository.All, ...);
    }
} 
```

然后你可以做

```
indexViewModel.StatusTypes = Helper.DdlGet(statusTypeRepository); 
```

编译器将处理类型推断。

# sql - 如果没有结果，则返回 null 而不是什么都没有

> ID：10808332
> 
> 赞同：0
> 
> 时间：2012-05-29T23:58:50.107
> 
> 标签：sql, sql-server, sql-server-2000, resultset, dynamic-sql

我有一个动态的 sql 语句，它可能会也可能不会返回任何结果。为简单起见：

```
--other SQL statements defining @a
DECLARE @sql varchar(128)
SELECT @sql = 'SELECT a, b FROM c WHERE a = ' + @a
EXEC(@sql) 
```

如果此语句返回任何结果，但如果`EXEC(@sql)`不返回任何结果，我想要结果，我该如何让它返回单个结果`null`？

我正在使用 MS SQLServer 2000。

**X-ZERO 的解释**

这用于 webapp ajax 响应。我无法更改后端 java 框架，该框架需要查询将某种结果集返回给 web 服务。

**解决方案**

万一其他人有这个问题，并且因为答案并不完全清楚，这有效：

```
--other SQL statements defining @a
DECLARE @sql varchar(128)
SELECT @sql = 'SELECT a, b FROM c WHERE a = ' + @a
EXEC(@sql)
IF @@ROWCOUNT = 0 SELECT null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:18:18.623

如果我理解您的问题，您希望该语句返回一行，其中包含`null`从实际查询中没有返回任何行的时间。或者，换一种说法，当它不应该返回任何值时，您希望它返回一个值（null）。

我认为您应该做的是将查询保持原样并获取语句返回的行数的计数。我相信您可以`@@rowcount`在查询后使用变量执行此操作。

（免责声明：我从 Google 和 SO 那里学到的关于 SQL Server 的知识）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T00:18:52.373

可以得到相同 WHERE 子句的语句的结果集记录数，如果它是零，那么你可以只返回一个空值的记录。

例子：

```
declare @sql varchar(128)
declare @a varchar(10);
set @a = '''Some @a value''';

declare @rowcount int;
exec sp_executesql N'select @rowcount=count(*) FROM c WHERE a = ''Some @a value''', 
                    N'@rowcount int output', @rowcount output;

if @rowcount <> 0
begin
  select @sql = 'SELECT a, b FROM c WHERE a = ' + @a
end
else
begin
  select @sql = 'select null';
end

exec(@sql)                    ; 
```

希望这对你有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T11:58:36.130

另一个避免的选择`@@ROWCOUNT`是将结果保存在表变量中，然后返回结果（如果存在或`NULL`不存在）。例如：

```
DECLARE @results TABLE(a int, b int)
DECLARE @sql nvarchar(128)
SELECT @sql = 'SELECT a, b FROM c WHERE a = ' + @a

insert into @results
exec (@sql)

IF EXISTS(select top 1 * from @results)
SELECT * from @results
ELSE SELECT null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-26T00:06:26.150

查看[关于 MAX(Transact-SQL) 的 SQL 文档](https://docs.microsoft.com/en-us/sql/t-sql/functions/max-transact-sql?view=sql-server-ver15#remarks)。“当没有行可供选择时，MAX 返回 NULL。”。我应该[对 SqlServerCentral 上的这个答案](https://www.sqlservercentral.com/forums/topic/how-to-return-null-or-value-when-nothing-is-returned-from-query#post-1393340)表示赞赏。

```
DECLARE @sql VARCHAR(128)
SET @sql = 'SELECT MAX(a), MAX(b) FROM c WHERE a = ' + @a
EXEC SP_EXECUTESQL @sql 
```

# python - 尝试使用“import twilio”而不是“from twilio import twiml”

> ID：10808340
> 
> 赞同：1
> 
> 时间：2012-05-29T23:59:56.107
> 
> 标签：python, twilio

这有效：

```
from twilio import twiml
r = twiml.Response() 
```

但

```
import twilio
r = twilio.twiml.Response() 
```

失败了

```
AttributeError: 'module' object has no attribute 'twiml' 
```

为什么？以及如何避免使用“从 twilio 导入东西”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:06:00.620

您可能还需要导入子模块：

```
import twilio.twiml 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T17:50:21.140

`from twilio import twiml`只有`twiml`在`twilio`模块的命名空间中才有效。如果它只是`twiml.py`在`twilio`目录中，它在`twilio` *package*中，但它不会在`twilio` *模块*中，除非`twilio`模块将它导入到它的`__init__.py`.

有了所有这些背景信息，我认为您正在寻找的单线是这样的：

```
import twilio.twiml as twiml 
```

这将`twiml`在`twilio`包中查找，然后将其作为`twiml`.

# ruby-on-rails-3 - delay_job：nil:NilClass 的未定义方法“名称”

> ID：10808341
> 
> 赞同：1
> 
> 时间：2012-05-29T23:59:56.200
> 
> 标签：ruby-on-rails-3, delayed-job

我刚刚在我的小 Rails 3.2 应用程序上安装了延迟作业。这是我使用它的控制器：

```
require 'waveform'

class MixesController < ApplicationController
  def index
  end

  def new
    @mix = Mix.new
  end

  def create
    @mix = Mix.new(params[:mix])
    if @mix.save
      options = {
        method: :rms,
        width: 1800,
        height: 280,
        background_color: "#ffffff",
        color: "#3333ff",
        force: true,
        quiet: true
      }

      waveform = "./public/waveforms/#{File.basename(@mix.sound_file.to_s, File.extname(@mix.sound_file.to_s))}.png"
      ::Waveform.new("./public" + @mix.sound_file.to_s, nil).delay.generate(waveform, options)

      flash[:success] = "Mix successfully uploaded"
      redirect_to mix_url(@mix)
    else
      render :new
    end
  end

  def show
    @mix = Mix.find(params[:id])
  end
end 
```

我收到一条错误消息：`undefined method`name' for nil:NilClass`，这是完整的堆栈跟踪：

```
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:25:in `block in initialize'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:27:in `yield'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:27:in `default'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:27:in `block in initialize'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:27:in `yield'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:27:in `default'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:27:in `block in initialize'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:27:in `yield'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:27:in `default'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:27:in `block in initialize'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:27:in `yield'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:27:in `default'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:27:in `block in initialize'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:102:in `yield'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:102:in `default'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:102:in `accept'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:447:in `block in dump_ivars'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:445:in `each'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:445:in `dump_ivars'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:124:in `visit_Object'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:102:in `accept'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:434:in `block in emit_coder'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:432:in `each'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:432:in `emit_coder'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:417:in `dump_coder'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:100:in `accept'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb:66:in `push'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:242:in `dump'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/core_ext.rb:14:in `psych_to_yaml'
delayed_job (3.0.3) lib/delayed/backend/base.rb:80:in `payload_object='
activerecord (3.2.3) lib/active_record/attribute_assignment.rb:85:in `block in assign_attributes'
activerecord (3.2.3) lib/active_record/attribute_assignment.rb:78:in `each'
activerecord (3.2.3) lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
activerecord (3.2.3) lib/active_record/base.rb:498:in `initialize'
delayed_job (3.0.3) lib/delayed/backend/base.rb:28:in `new'
delayed_job (3.0.3) lib/delayed/backend/base.rb:28:in `enqueue'
delayed_job (3.0.3) lib/delayed/message_sending.rb:13:in `method_missing'
app/controllers/mixes_controller.rb:25:in `create'
actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.3) lib/active_support/callbacks.rb:414:in `_run__842168672059661955__process_action__4066633601342968686__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__647780415925652457__call__1911592835196459847__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/aziz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

请问有谁知道我为什么会收到这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T09:20:27.380

发生这种情况是因为系统试图将 nil 转换为可以存储在 YAML 中的值并且失败了。

查看您的代码，我希望这是因为您将 nil 对象传递给传递给 Waveform.new 的变量（操作被延迟的方法）。传递给 new 的变量需要存储，直到延迟的作业准备好运行该流程，我希望它们存储为 YAML。

您可以重构 Waveform 以使第二个属性可选（因此不必保留其值）

```
::Waveform.new("./public" + @mix.sound_file.to_s).delay.generate(waveform, options) 
```

或使用其他东西与 nil 具有相同的含义。例如，传入符号 :none。然后该行变为：

```
::Waveform.new("./public" + @mix.sound_file.to_s, :none).delay.generate(waveform, options) 
```

# google-maps - 谷歌地图中的距离

> ID：10808342
> 
> 赞同：1
> 
> 时间：2012-05-30T00:00:06.863
> 
> 标签：google-maps, apex-code

我正在尝试在 Salesforce - Apex 代码中添加 Google 地图；这样做很成功。我在地图上也有 2 个标记。但现在我想找到这两个标记之间的距离。谁能帮我找出谷歌地图中两个标记之间的距离。

请解释我如何。

谢谢

阿努拉杰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:11:29.307

有一种使用几何库的快速方法。首先，在添加 API 时加载它（因为它是可选的）

```
<script type="text/javascript" 
  src="http://maps.googleapis.com/maps/api/js?libraries=geometry&sensor=false">
</script> 
```

然后调用测量函数：

```
meters = google.maps.geometry.spherical.computeDistanceBetween(
           markerA.getPosition(), markerB.getPosition()); 
```

（或改为输入 LatLngs）。结果以米为单位。

# git - 如何向旧的 git 提交添加额外的父级？

> ID：10808345
> 
> 赞同：19
> 
> 时间：2012-05-30T00:00:45.020
> 
> 标签：git, git-rewrite-history

我有一个包含两个分支的项目：master 和 gh-pages。它们本质上是两个不同的项目，其中 gh-pages 项目依赖于主项目（反之亦然）。将其视为“master 包含源代码，gh-pages 包含从这些源文件构建的二进制文件”。定期地，我采用 master 中累积的更改，并使用提交消息“与 master commit xxxxxxxx 保持一致”对 gh-pages 分支进行新的提交。

![网络图当前的样子](../Images/ddfacdbc4488206bc289717c4ad5a1d3.png)

这样做一段时间后，我意识到如果 gh-pages 提交“与主提交 xxxxxxxx 保持一致”实际上在 git 存储库中将 xxxxxxxx 作为其父级，那就太好了。像这样（糟糕的 MSPaint 艺术）：

![理想的样子](../Images/7c3b1a4496a3daea114ed2fcb411c8e4.png)

有没有办法让存储库看起来像上面的第二张图片？我知道如何按照这种模式进行新提交：我可以执行“git merge -s ours master”（设置其他空提交的父级），然后执行“git commit --amend adv550.z8”（其中 adv550.z8是实际发生变化的二进制文件）。但是 git 是否可以很容易地回到过去并将新的父母添加到旧的提交中？

一旦我的本地存储库看起来正确，我非常愿意“git push -f”并删除我的 Github 存储库的当前历史。问题是，我*可以*让我的本地仓库看起来正确吗？

* * *

**多年后编辑添加：**我最终放弃了让 git 历史`gh-pages`看起来像这样的尝试；我认为零增益工作量太大。我的新做法是积极地将提交压缩到`gh-pages`，因为在我的情况下保存这些提交消息真的无关紧要。（这只是一长串“与主提交保持一致......”，其中没有一个在历史上很有趣。）但是，如果我需要再次这样做，我会听那些说的答案

```
git merge $intended_parent_1 $intended_parent_2
git checkout $original_commit -- .
git commit --amend -a -C $original_commit 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-12-20T13:37:51.013

```
git replace --graft $original_commit \
    $(git show --pretty=%P $original_commit) \
    $additional_parent 
```

说明： [git replace --graft](https://git-scm.com/docs/git-replace)允许重新指定给定提交的父级。这是通过编写一个带有相应更改的新提交并编写一个替换引用来实现的，这会导致 git 在访问时查找新提交而不是原始提交。

`git show --pretty=%P $original_commit`只是列出了原来的父母。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-11T17:48:25.873

这些是你的魔法词：

```
git merge origin/master --strategy ours 
```

在分支中执行此`gh-pages`操作以记录与的关系`master`而不实际更改任何内容。当我创建`gh-pages`分支时，这对我有用`--orphan`，就像在[这个答案](https://stackoverflow.com/a/4288660/946850)中一样。

您甚至可以`--amend`在之后进行这个空的合并提交，以便将您实际想要对“页面”进行的更改引入。有关GitHub 上的实际示例，请参阅[https://github.com/krlmlr/pdlyr/network 。](https://github.com/krlmlr/pdlyr/network)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T01:07:04.910

您无法及时返回并更改现有提交。即使你做了类似的事情`git commit --amend`，你实际上并没有改变提交；您正在树中的同一位置创建一个新的，其中包含原始内容的所有内容（加上您的更改）。您会注意到提交哈希`--amend`在`git reflog`.

另一方面，您*可以*回到过去并创建另一个宇宙。本质上，您将返回到您的`gh-pages`分支点并将整个事物（例如`git cherry-pick`或其他事物）重新创建为并行分支。哈希值会改变，因为提交是不同的对象。

（我很好奇你为什么将你的 repo 设置为单独的分支，而不是同一分支中的单独目录。看起来代码 - > 构建过程会变得乏味。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-13T01:11:47.363

@rumpel 给出了正确的答案。请允许我分享我使用的片段。

首先，我创建了孤儿`master`分支：

```
git checkout --orphan master
git commit --allow-empty -m 'Init' 
```

我的用例略有不同，我想要的站点位于分支`_site`目录中。`develop`因此我这样做：

```
git checkout master
git rm -rf .
git read-tree develop^{tree}:_site
git checkout -- .
git commit -m "Update from develop SHA1:$(git rev-parse --short develop) ($(git log -1 --format=%cd develop))"
git replace --graft @ $(git show --pretty=%P @ | head -n1) develop 
```

请注意，在最后一个命令中，我必须过滤，`| head -n1`因为我的`git`输出不仅仅是父母。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-25T16:00:25.697

您可以重写提交，但它需要从需要额外父级的第一个提交开始重写整个分支，直到分支提示。是（就像变基一样）一个新的分支，它只是具有相同的内容。

诀窍是使用提交树，它获取所有内容（提交者/作者信息、时间戳、提交消息、父列表），尽管以一种相当不切实际的方式。一点脚本就可以完成这项工作。

# ios - 使用 uitableview 和 uiwebview 显示迷你谷歌地图的任何潜在问题

> ID：10808348
> 
> 赞同：0
> 
> 时间：2012-05-30T00:00:52.773
> 
> 标签：ios, uitableview, google-maps

我正在考虑拥有一个 tableview 和一个具有 webview 控件的自定义单元格。webview 的目的是在 webview 中以某个纬度/经度显示谷歌地图。

这种方法会不会有问题？内存问题？

另一种方法是使用 uiimage 并使用谷歌地图静态 api 生成图像并将图像存储在我的服务器上，并让应用程序通过 URL 请求图像。

我希望避免生成图像并将它们存储在我的服务器上并在网络视图中直接使用谷歌地图，但不确定我会遇到什么样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:30:22.843

唯一的问题是速度。如果您的表格视图由 MKMapViews 的行和行组成，则当用户滚动浏览它们时，每个都需要时间来加载。但是，如果只有一个，那应该没有问题。

静态图像方法也有同样的问题，但我认为它可能会稍微快一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:48:55.193

我在 App Store 中有一个应用程序，用于在不同地点举办许多活动的当地节日。鉴于观众来自世界各地，因此在城里不为人知，该应用程序显示了每个事件的地图。我使用`MKMapView`自定义内部`UITableViewCell`和使用附件披露按钮解决了这个问题，该按钮会将详细的地图视图推送到导航控制器上。它工作得很好，但有点慢。对于许多这样的细胞，我不会推荐它。

截屏：![在此处输入图像描述](../Images/215ae24769831b6804b424f8332ca17a.png)

# backbone.js - 如何从 underscore.js javascript 模板库中引用名称中带有句点的 JSON 属性

> ID：10808350
> 
> 赞同：1
> 
> 时间：2012-05-30T00:01:02.950
> 
> 标签：backbone.js, underscore.js

我正在使用下划线模板引擎（作为 Backbone.js 的一部分）并且有一个问题，即 JSON 对象的属性中有一个句点，即

```
{
"id": 1234,
"company.id": 4321
} 
```

当我尝试在下划线模板中访问它时，我收到一个 JavaScript 错误：

```
Company ID: <@= company.id @> 
```

我想知道是否有可能以及如何访问带有句点的属性。我无法更改 JSON 的生成。

考珀

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T00:12:56.960

一种简单的解决方法是将另一个对象包裹在它周围，以便您可以`[]`使用`'company.id'`. 例如，您的模板可能如下所示：

```
<script id="tmpl" type="text/html">
    id: <%= o.id %><br>
    company: <%= o['company.id'] %>
</script>​ 
```

和你的 JavaScript 是这样的：

```
var html = _.template($('#tmpl').html(), {
    o: {
        "id": 1234,
        "company.id": 4321
    }
}); 
```

演示： http: [//jsfiddle.net/ambiguous/wtLkP/1/Underscore](http://jsfiddle.net/ambiguous/wtLkP/1/) 模板编译器用于`with`为模板中的简单事物提供上下文，`<%= x %>`所以我认为您不会做得更好比`o.`上面的把戏。Underscore 从您的模板构建一个函数，您可以通过查看函数的`source`属性来查看函数的源代码：

```
var t = _.template(template_source);
console.log(t.source); 
```

这会给你这样的东西：

```
function(obj){
var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};
with(obj||{}){
__p+='\n    id: '+
( o.id )+
'<br>company: '+
( o['company.id'] )+
' and stuff\n';
}
return __p;
} 
```

你可以看到为什么`<%= [x] %>`不起作用：[`with`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/with)只调整当前范围，它不能`[x]`变成有效的 JavaScript。

# jquery - 与 XML 比较后基于 URL 参数结果退出 .each 语句

> ID：10808352
> 
> 赞同：0
> 
> 时间：2012-05-30T00:01:15.697
> 
> 标签：jquery, if-statement, foreach, xml-parsing

我有这个 URL 格式：

```
http://localhost/find_retailers/index.html?modelCode=ABCD1234 
```

我有一个 XML 文件，其中包括：

```
<products>
<product modelcode="ABCD1234">
    <retailer id="1">
        <name>Retailer One</name>
        <logo>retailer_one.png</logo>
        <url>http://www.retailer-one.com/ABCD1234</url>
    </retailer>
</product>
<product modelcode="EFGH5678">
    <retailer id="2">
        <name>Retailer Two</name>
        <logo>retailer_two.png</logo>
        <url>http://www.retailer-two.com/EFGH5678</url>
    </retailer>
</product> 
```

等等

我有以下jquery：

```
<script>
    $(document).ready(function(){
        $.ajax({
            type: "GET",
            url: "xml/retailers_param.xml",
            dataType: "xml",
            success: function(xml) {
                $(xml).find('product').each(function(){
                    function getUrlVars() {
                        var vars = {};
                        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                        vars[key] = value;
                        });
                    return vars;
                    }
                    var productUrl = getUrlVars()["modelCode"];
                    var modelcode = $(this).attr('modelcode');
                        if(modelcode == productUrl) {

                            $(this).find('retailer').each(function(){
                            var id = $(this).attr('id');    
                            var name = $(this).find('name').text();
                            var logo = $(this).find('logo').text();
                            var url = $(this).find('url').text();
                            $('<div class="retailer" id="retailer_'+id+'"></div>').html('<h3>'+name+'</h3><p><img src="img/logo/'+logo+'" alt="'+name+'" class="logo"/></p><div class="btnVisit"><a href="'+url+'" class="btnStyle" target="_blank"><span>Visit Store</span></a></div>').appendTo('#retailers');
                            });

                        }
                        else {
                            $('<div class="noRetailer"></div>').html('<h3>No Retailers for:</h3></br>'+productUrl+'').appendTo('#retailers');
                        }
                });
            }
        });
    });
 </script> 
```

问题是它为 XML 文件中的每个产品节点运行。这意味着它会显示产品以及 XML 文件中每个产品节点的错误消息。

我已经尝试`return(false);`在 else 语句中包含，但这不起作用，因为它停止通过第一个 XML 节点。

有任何想法吗？

如果我将 else 节点留空或将其删除，那么一切都很好，但出于 UX 原因，我真的想包含一个“没有零售商用于 'modelcode'”类型错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:11:31.493

您应该将错误测试移到外面`each`，使用布尔值来测试是否找到了产品。

```
 var foundProduct = false;
        $(xml).find('product').each(function(){
            function getUrlVars() {
                var vars = {};
                var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                vars[key] = value;
                });
            return vars;
            }

            var productUrl = getUrlVars()["modelCode"];
            var modelcode = $(this).attr('modelcode');
                if(modelcode == productUrl) {
                    foundProduct = true;
                    $(this).find('retailer').each(function(){
                    var id = $(this).attr('id');    
                    var name = $(this).find('name').text();
                    var logo = $(this).find('logo').text();
                    var url = $(this).find('url').text();
                    $('<div class="retailer" id="retailer_'+id+'"></div>').html('<h3>'+name+'</h3><p><img src="img/logo/'+logo+'" alt="'+name+'" class="logo"/></p><div class="btnVisit"><a href="'+url+'" class="btnStyle" target="_blank"><span>Visit Store</span></a></div>').appendTo('#retailers');
                    });

                }
        });
        if(!foundProduct) { /* Your error code here */ } 
```

# mysql - 尽管有额外的 mysql 查询非常慢：使用 where；使用索引

> ID：10808353
> 
> 赞同：0
> 
> 时间：2012-05-30T00:01:38.843
> 
> 标签：mysql

我遇到了一个我想了解的有趣问题。我有一张桌子：

```
 `id` BIGINT(20) unsigned NOT NULL AUTO_INCREMENT,
        `user_id` BIGINT(20) unsigned NOT NULL,

        `followers_count` INT(10) unsigned NOT NULL DEFAULT 0,
        `friends_count` INT(10) unsigned NOT NULL DEFAULT 0,
        `statuses_count` INT(10) unsigned NOT NULL DEFAULT 0,
        `favourites_count` INT(10) unsigned NOT NULL DEFAULT 0,
        `listed_count` INT(10) unsigned NOT NULL DEFAULT 0,

        `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

        PRIMARY KEY (`id`) 
```

我执行以下查询：

> SELECT `followers_count`, `friends_count`, `statuses_count`, `favourites_count`, `listed_count`, UNIX_TIMESTAMP(DATE( `created_at`)) AS `id`FROM `user_track`WHERE `created_at`>=DATE_SUB(NOW(),INTERVAL 14 DAY) AND `user_id`='1234567'

## 现在，有趣的部分：

**1：**使用该表上的以下索引，查询需要几分钟才能完成：

> 索引`user_numbers`( `created_at`, `user_id`, `followers_count`, `friends_count`, `statuses_count`, `favourites_count`, `listed_count`)

使用上述索引 1 解释查询：

```
id  select_type table       type    possible_keys   key             key_len     ref     rows    Extra
1   SIMPLE      user_track  range   user_numbers    user_numbers    12          NULL    1119318 Using where; Using index 
```

**2：**但是，使用该表上的以下索引，它需要不到 200 毫秒：

> 索引`user_report`( `user_id`, `id`, `created_at`, `followers_count`, `friends_count`, `statuses_count`, `favourites_count`, `listed_count`)

使用上述索引 2 解释查询：

```
id  select_type table       type    possible_keys   key             key_len     ref     rows    Extra
1   SIMPLE      user_track  ref     user_report     user_report     8           const   1       Using where; Using index 
```

通过解释查询，我看到第一个索引导致扫描很多行，而第二个索引具有“ref: const”并且只扫描了几行。但我想了解为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T00:04:30.527

如[手册](http://dev.mysql.com/doc/en/multiple-column-indexes.html)所述：

> 如果表有一个多列索引，优化器可以使用索引的任何最左边的前缀来查找行。例如，如果您在 上具有三列索引，则您在、和`(col1, col2, col3)`上具有索引搜索功能。`(col1)``(col1, col2)``(col1, col2, col3)`
> 
> 如果列不构成索引的最左前缀，则 MySQL 无法使用索引执行查找。假设您有[`SELECT`](http://dev.mysql.com/doc/en/select.html)此处显示的语句：
> 
> ```
> SELECT * FROM tbl_name WHERE col1=val1;
> SELECT * FROM tbl_name WHERE col1=val1 AND col2=val2;
> 
> SELECT * FROM tbl_name WHERE col2=val2;
> SELECT * FROM tbl_name WHERE col2=val2 AND col3=val3;
> ```
> 
> 如果 上存在索引`(col1, col2, col3)`，则只有前两个查询使用该索引。第三和第四个查询确实涉及索引列，`(col2)`但`(col2, col3)`不是`(col1, col2, col3)`.

# jquery - 搜索 $.GETJSON 并单击不起作用

> ID：10808354
> 
> 赞同：0
> 
> 时间：2012-05-30T00:01:46.727
> 
> 标签：jquery, json, google-maps

好的，所以能够从 PHP 页面获取 JSON，但是当用户单击`li`内部时，`ul#stores`它不会运行。这就像

```
$("ul#stores").html("");
myMarkers = {"markers": data} 
```

没有更新，它无法在列表中找到它，并且下面的功能无法运行。完整的代码在最后。我不确定这是否是解释我的问题的最佳方式。

现场演示[@http://brightchoice.com.au/map.html](http://brightchoice.com.au/map.html)

```
$("ul#stores li").on("click", function(event){
            var store = $(this).text();

            $("ul#stores").hide();
            $("#storeinfo").show();
            $.each(myMarkers.markers, function(i, data){

            if(store == data.name) {
                $("#storeinfo").append("<a href='map.html'><div class='greenbar'><div class='body'><div>  <span></span> </div> <p>Back</p></div></a></div><h1>"+data.name+"</h1>"+data.phone+"<br><br>"+data.address);

                //console.log(data.address);
                //console.log(data.state); // and more
             }
            });

            //searchlistings($(this).text());

        }); 
```

完整代码

```
<script type="text/javascript">
// <![CDATA[
 $(document).ready(function(){
        //set up markers
         var myMarkers = {"markers": [{"id": 1,"name": "Belconnen","url_name": "belconnen","address": "Shop 176, 3rd Floor, Westfield Shopping Centre, Benjamin Way","suburb": "Belconnen","state": "act","postcode": 2618,"country": "Australia","phone": "(02) 6251 1838","fax": "","photo": "dcddfcb5c806b2255c611bd2d108cead.JPG","text": "","display": 1,"lat": -35.238428606,"lng": 149.065917134,"email": "tc.belconnen@telechoice.com.au","dealer_code": 63014,"region_id": 3,"type": 4}]};

//set up map options
        defaultmap();

        $("a#backtomap").on("click", function(event){
        defaultmap();
            $("ul#stores").show();
            $("#storeinfo").hide();
        });

        $("button#search").on("click", function(event){

            var postcode = $("input#postcode").val();
            $.getJSON("http://vipcashback.com/system/classes/core.php?task=postcode&mycode="+postcode, function(data) {
            $("ul#stores").html("");
              listings = {"markers": data}
                $("#map").mapmarker({
                    zoom : 10,
                    center : postcode+" australia",
                    markers : listings
                });

                $.each(myMarkers.markers, function(i, data){

                });
            });
        });

        $("ul#stores li").on("click", function(event){
            var store = $(this).text();
            alert(store);
            $("ul#stores").hide();
            $("#storeinfo").show();
            $.each(myMarkers.markers, function(i, data){

            if(store == data.name) {
                $("#storeinfo").append("<a href='map.html'><div class='greenbar'><div class='body'><div>  <span></span> </div> <p>Back</p></div></a></div><h1>"+data.name+"</h1>"+data.phone+"<br><br>"+data.address);

                //console.log(data.address);
                //console.log(data.state); // and more
             }
            });

            //searchlistings($(this).text());

        });

        function defaultmap(){
            $("#map").mapmarker({
                zoom : 3,
                center : 'Australia',
                markers : myMarkers
            });
        }

});

// ]]>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:15:45.733

如果您要动态创建元素，则应使用：

```
$('ul#stores li).live('click',function(){ ...}); 
```

live 是为了让未来的元素可以自动绑定到事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:47:22.303

通过插件代码，它需要 PHP 页面的 JSON 中缺少的经度和纬度

插件代码 -

```
 if(latitude!="" && longitude!=""){
                var marker = new google.maps.Marker({
                    map: map, 
                    position: new google.maps.LatLng(latitude,longitude),
                    animation: google.maps.Animation.DROP,
                    icon: icon
                });

                // Set up markers with info windows 
                google.maps.event.addListener(marker, 'click', function() {
                    // Close all open infowindows
                    if (infowindow) {
                        infowindow.close();
                    }

                    infowindow = new google.maps.InfoWindow({
                        content: baloon_text
                    });

                    infowindow.open(map,marker);
                });
            }
        }); 
```

# java - 在 Android Eclipse 项目的资产文件夹中拥有自己的数据库

> ID：10808357
> 
> 赞同：2
> 
> 时间：2012-05-30T00:02:49.560
> 
> 标签：java, android, database, sqlite

我的 android 应用程序有一个大问题。我是第一次开发带有 sqlite 数据库的 android 应用程序，但我有一些我无法解决的问题。

我在 eclipse 项目的 assets 文件夹中有我的 sqlite 数据库，名称为 saldb.sqlite

我有以下类来使用 Singletone 模式管理数据库：

```
package sal.app.logic;

    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;

    import android.content.Context;
    import android.database.Cursor;
    import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteException;
    import android.database.sqlite.SQLiteOpenHelper;

    public class DataBaseManager extends SQLiteOpenHelper{

    private static DataBaseManager dbManagerInstance = null;
    private Context salContext;
    private  SQLiteDatabase salDatabase;
    private static  String DB_PATH = "/data/data/sal.app/databases/";
    private static String DB_NAME = "saldb.sqlite";

    private DataBaseManager(Context c)
    {
        super(c, DB_NAME, null, 1);
        //this.salContext = c;
    }

    public static DataBaseManager getSalDatabase(Context c)
    {
        if (dbManagerInstance == null)
        {
            dbManagerInstance = new DataBaseManager(c);
        }

        return dbManagerInstance;
    }

    public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }else{

            //By calling this method and empty database will be created into the default system path
            //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();

            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    private boolean checkDataBase()
    {

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = salContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        //String outFileName = DB_PATH + DB_NAME;

        String outFileName = "/data/data/sal.app/databases/saldb.sqlite";
        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        salDatabase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);

    }

    @Override
    public synchronized void close() {

            if(salDatabase != null)
                salDatabase.close();

            super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        //db.execSQL("Insert Into Question(_id,level,text,idTopic) Values (1,1,'asa',0)");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

        // Add your public helper methods to access and get content from the database.
       // You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
       // to you to create adapters for your views.

    public Question getOneQuestion()
    {
        //list of Versioni, search result with query text

                Question quest = new Question();

                try
                {
                    //open database to query
                    openDataBase();

                    //salDatabase.execSQL("Insert Into Question(_id,level,text,idTopic) Values (1,1,'asa',0)");

                    //Cursor cursor = salDatabase.rawQuery("SELECT text, idTopic, level from Question WHERE level=2", null);

                    Cursor cursor = salDatabase.rawQuery("SELECT * from Question", null);

                    /*Cursor cursor = salDatabase.query("Question",

                            new String[] { "text","idTopic","level"},
                            "level=2",
                            null ,
                            null,
                            null,
                            "RANDOM() LIMIT 1");*/

                    //Cursor c = db.rawQuery(select, null); */

                //mapped all rows to data object

                    if (cursor.moveToFirst())       
                    {
                        System.out.println(cursor.getString(2));
                        do
                        {
                            Cursor cursor2 = salDatabase.rawQuery("SELECT * from Topic WHERE _id=0", null);
                            cursor2.moveToFirst();
                            Topic t = new Topic(cursor2.getString(1));
                           quest = new Question(cursor.getString(2),t,(int)cursor.getShort(1));

                           break;
                        } while (cursor.moveToNext());

                    }   
                    //close cursor      
                    cursor.close();     
                }
                catch(Exception ex)
                {
                    System.out.println("DatabaseHelper.search()- : ex " + ex.getClass() +", "+ ex.getMessage());
                }
                //  
                return quest;

    }

    /*public ArrayList<Answer> getAnswersOfQuestion(Questin q)
    {

    }*/

} 
```

但是在我第一次运行我的应用程序时，我有以下错误：

05-29 23:55:45.684：D/ddm-heap(221)：得到功能列表请求 05-29 23:55:46.295：D/dalvikvm(221)：GC 在 109 毫秒内释放了 519 个对象/45792 个字节 05-29 23:55:46.544: E/Database(221): sqlite3_open_v2("/data/data/sal.app/databases/saldb.sqlite", &handle, 1, NULL) 失败

05-29 23:55:46.594: D/AndroidRuntime(221): 关闭虚拟机 05-29 23:55:46.604: W/dalvikvm(221): threadid=3: 线程退出但未捕获异常 (group=0x4001b188)

05-29 23:55:46.604：E/AndroidRuntime(221)：未捕获的处理程序：线程主因未捕获的异常而退出

在我的主要活动中我这样做：

```
public class SALActivity extends Activity {

    Button back;
    Button choiceA;
    static int choice = 0;
    DataBaseManager db;
    //Button choiceB;
    //Button choiceC;
    //Button choiceD;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
        super.onCreate(savedInstanceState);

        setContentView(R.layout.gamemenu);
        //db= new DataBaseManager(this);
        db=DataBaseManager.getSalDatabase(this);
        try {
            db.createDataBase();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        //db=DataBaseManager.getSalDatabase(this);

        Question q = db.getOneQuestion();

        //back = (Button) findViewById(R.id.gaveup_button);
        choiceA = (Button) findViewById(R.id.choice_a_button);
        choiceA.setTextColor(0xffffffff);
        //choiceA.setText("A: Académica");
        choiceA.setText(q.getQuestionText());

        choiceA.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

            }
        });

        //choiceA.setText(10);
        //choiceB = (Button) findViewById(R.id.choice_b_button);
        //choiceC = (Button) findViewById(R.id.choice_c_button);
        //choiceD = (Button) findViewById(R.id.choice_d_button);

        //Intent v = new Intent(this, SALActivity.class);

        //this.startActivity(v);
    }
} 
```

在我第二次运行应用程序时，不会发生错误，数据库在正确的路径中，但只有表 android_metadata

**我也可以说，如果我将正确的数据库放在 /data/data/sal.app/databases/ 上，整个程序就可以工作......错误在 copyDatabase 中。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:25:52.823

这是我复制数据库的工作代码。

```
private static String DB_PATH = "/data/data/com.demo.databaseDemo/databases/";
 private static String DB_NAME = "myDatabase.db";   
 private void copyDataBase() throws IOException{

            //Open your local db as the input stream
            InputStream myInput = _myContext.getAssets().open(DB_NAME);

            // Path to the just created empty db
            String outFileName = DB_PATH + DB_NAME;

            //Open the empty db as the output stream
            OutputStream myOutput = new FileOutputStream(outFileName);

            //transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer))>0){
                myOutput.write(buffer, 0, length);
            }

            //Close the streams
            myOutput.flush();
            myOutput.close();
            myInput.close();

        }//end of copyDataBase() method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:28:40.830

您需要为您的数据库创建文件夹并在您的应用程序第一次运行时复制到该文件夹​​中。这是我所做的：

```
 // Check to see if database exists, otherwise copy from assets
    boolean dbExist = db.databaseExist();
    if (!dbExist) {
        try {
            // See if there is a data directory, otherwise create it
            String destPath = "/data/data/" + getActivity().getPackageName() +
                    "/databases/";
            File f = new File(destPath);
            if (!f.exists()) {
                f.mkdirs();
                f.createNewFile();

                // Copy from assets to data directory
                CopyDB(getActivity().getBaseContext().getAssets().open("myData.sqlite"),
                        new FileOutputStream(destPath + "/myData.sqlite"));
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }    
    } 
```

# ios - UITableview 或 AQGridView 保持单元格中按钮的状态

> ID：10808360
> 
> 赞同：0
> 
> 时间：2012-05-30T00:03:16.173
> 
> 标签：ios, uitableview, aqgridview

由于 AQGridview 从 UITableView 借用了很多它的想法，所以我认为答案应该适用于两者。

我有一个自定义单元格，里面有以下对象：

*   标签
*   最喜欢的按钮（可以由用户打开/关闭，我使用 .selected = YES/NO）

问题是滚动时保持按钮的状态。下面是我的“cellForItemAtIndex”方法。

```
- (AQGridViewCell *) gridView: (AQGridView *) aGridView cellForItemAtIndex: (NSUInteger) index
{
    static NSString * cellIdentifier = @"CellIdentifier";

    SampleGridViewCell * cell = (SampleGridViewCell *)[aGridView dequeueReusableCellWithIdentifier:cellIdentifier];

    if ( cell == nil )
    {
        cell = [[SampleGridViewCell alloc] initWithFrame: CGRectMake(0.0, 0.0, 200, 60)                                   reuseIdentifier: cellIdentifier];
    }

    NSDictionary *item = [self.items objectAtIndex:index];

    NSString *title = [item objectForKey:@"title"];

    cell.index = index;

    cell.titleLabel.text = title;

    //cell.favButton.selected = (logic goes here);

    return cell;

} 
```

不知何故，我需要在我的视图控制器中保留一个项目何时被收藏的参考，以便我可以在此方法中重新创建单元格时打开/关闭按钮。

我是否使用 vc 中的方法在 cell.favButton 上执行 addTarget？但是，我如何获得对按钮索引的引用呢？

有人实现了类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:13:39.110

正如您所说，为您添加一个目标按钮到您想要的任何方法。在该方法中，您可以使用以下方法获取行索引

```
 NSSet *touches = [event allTouches];
              UITouch *touch = [touches anyObject];
CGPoint currentTouchPosition = [touch locationInView:tableview];
      NSIndexPath *indexPath = [tableview indexPathForRowAtPoint: currentTouchPosition];
              NSUInteger row = [indexPath row]; 
```

然后，您可以从那里将已按下的按钮存储在表本身正在使用的现有数据集中。然后，当表格被加载并检索数据时，只需根据您为该行存储的数据启用/禁用单元格按钮 :)

# android - 执行doInBackground（）时发生android错误

> ID：10808361
> 
> 赞同：1
> 
> 时间：2012-05-30T00:03:19.427
> 
> 标签：android

我收到错误“执行 doInBackground() 时发生错误”

这是我的 ASyncTask 类：

```
private class ASyncPollServer extends AsyncTask<String, Void, String>{

    @Override
    protected String doInBackground(String... params) {
        String pollResult = "";
        if(((ChatApplication) _instance.getApplication()).isPolling() == false){
        ((ChatApplication) _instance.getApplication()).setPolling(true);
        pollResult = ((ChatApplication) _instance.getApplication()).GetConnectionManager().PollServer();
    }
        return pollResult;
        }

    @Override
    protected void onPostExecute(String result) {
        if(result != ""){
            HandlePollResult(result);
            ((ChatApplication) _instance.getApplication()).setPolling(false);
        }

    }

} 
```

我的 TimerTask 称之为：

```
private Handler handler = new Handler();
public class ServerPollTimer extends TimerTask {
    private Runnable runnable = new Runnable() {
        public void run() {
            ExecutePollServer();
        }
    };

    public void run() {
        handler.post(runnable);
        }
    } 
```

还有我的 ExecutePollServer 方法：

```
private void ExecutePollServer(){
    ASyncPollServer task = new ASyncPollServer();
    task.execute();
} 
```

我在 OnCreate() 中调用计时器的地方：

```
new Timer().schedule(new ServerPollTimer() , 0, 5000); 
```

这是我的堆栈跟踪：

```
05-30 09:46:16.020: E/AndroidRuntime(340): FATAL EXCEPTION: AsyncTask #1
05-30 09:46:16.020: E/AndroidRuntime(340): java.lang.RuntimeException: An error occured while executing doInBackground()
05-30 09:46:16.020: E/AndroidRuntime(340):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
05-30 09:46:16.020: E/AndroidRuntime(340):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
05-30 09:46:16.020: E/AndroidRuntime(340):  at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
05-30 09:46:16.020: E/AndroidRuntime(340):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
05-30 09:46:16.020: E/AndroidRuntime(340):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
05-30 09:46:16.020: E/AndroidRuntime(340):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
05-30 09:46:16.020: E/AndroidRuntime(340):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
05-30 09:46:16.020: E/AndroidRuntime(340):  at java.lang.Thread.run(Thread.java:1019)
05-30 09:46:16.020: E/AndroidRuntime(340): Caused by: java.lang.IllegalStateException: No wrapped connection.
05-30 09:46:16.020: E/AndroidRuntime(340):  at org.apache.http.impl.conn.AbstractClientConnAdapter.assertValid(AbstractClientConnAdapter.java:163)
05-30 09:46:16.020: E/AndroidRuntime(340):  at org.apache.http.impl.conn.AbstractClientConnAdapter.sendRequestEntity(AbstractClientConnAdapter.java:269)
05-30 09:46:16.020: E/AndroidRuntime(340):  at org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:237)
05-30 09:46:16.020: E/AndroidRuntime(340):  at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:119)
05-30 09:46:16.020: E/AndroidRuntime(340):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:421)
05-30 09:46:16.020: E/AndroidRuntime(340):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
05-30 09:46:16.020: E/AndroidRuntime(340):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
05-30 09:46:16.020: E/AndroidRuntime(340):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
05-30 09:46:16.020: E/AndroidRuntime(340):  at chatclient.utility.HttpPostNetworkUtility.PerformPost(HttpPostNetworkUtility.java:43)
05-30 09:46:16.020: E/AndroidRuntime(340):  at chatclient.utility.ConnectionManager.ExecuteCommand(ConnectionManager.java:213)
05-30 09:46:16.020: E/AndroidRuntime(340):  at chatclient.utility.ConnectionManager.PollServer(ConnectionManager.java:192)
05-30 09:46:16.020: E/AndroidRuntime(340):  at chatclient.namespace.MainWindowActivity$ASyncPollServer.doInBackground(MainWindowActivity.java:402)
05-30 09:46:16.020: E/AndroidRuntime(340):  at chatclient.namespace.MainWindowActivity$ASyncPollServer.doInBackground(MainWindowActivity.java:1) 
```

任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:28:04.543

[这个答案](https://stackoverflow.com/a/5605151/1270789)建议你应该`ThreadSafeClientConnManager`在你的`pollResult = ((ChatApplication) _instance.getApplication()).GetConnectionManager().PollServer();`.

我也会用初始化或类似`((ChatApplication) _instance.getApplication())`的成员变量替换。`onPreExecute`

# javascript - 优雅地降级有机标签以在 IE9 高安全性（又名无 js）中工作的简单方法？

> ID：10808362
> 
> 赞同：0
> 
> 时间：2012-05-30T00:03:25.680
> 
> 标签：javascript, drupal, hash, tabs

我知道，我应该以渐进增强的方式构建它，而不是试图优雅地降级。但我没有。所以现在我需要一种方法来完成这项工作，最好不要过多地改变结构。

我需要的是，如果他们没有启用 javascript，那么它将重新加载页面并添加一个哈希标签。基于该哈希标签，我希望将不同的数据加载到一个位置。

我正在使用 Drupal，这是动态内容，有数百页。我可以从模板中轻松更改所有标记...这只是有机选项卡的一个非常基本的实现，但使用变量代替选项卡标题和正文。

根据我的研究，我认为这必须手动完成（使用“看起来”像标签的单独页面），但我知道情况并非如此，因为我在这里看到了这个功能：[http://observers.gohernandez。 com/election/results/2005/kabul](http://observers.gohernandez.com/election/results/2005/kabul)使用 quicktabs 模块。

首先十分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:55:54.107

在筛选了数百个标签插件后，我发现这个实际上会优雅地降级：http: [//blog.ginader.de/archives/2009/02/07/jQuery-Accessible-Tabs-How-to-make-tabs -REALLY-accessible.php](http://blog.ginader.de/archives/2009/02/07/jQuery-Accessible-Tabs-How-to-make-tabs-REALLY-accessible.php)

# ruby-on-rails - Base64 编码的字符串到文件（Ruby on Rails） - 未定义的方法“解包”错误

> ID：10808368
> 
> 赞同：5
> 
> 时间：2012-05-30T00:04:34.113
> 
> 标签：ruby-on-rails, base64, activesupport, unpack

在我的一个 Rails 控制器中，我试图获取 Base64 编码的字符串，对其进行解码并将其写入文件 (.png)。这是我的代码：

```
def create_character
    @character = Character.new(params[:character])
    @base64 = params[:base64]
    File.open("app/assets/images/characters/#{@character.name.gsub(/\s+/, "")}-#{@character.author_name.gsub(/\s+/, "")}.png", 'wb') do |f|
        f.write(Base64.decode64(@base64))
    end

    if @character.save
        flash[:notice] = "Character created."
        redirect_to(:action => 'share')
    else 
```

我收到以下错误：

```
undefined method `unpack' for #<ActiveSupport::HashWithIndifferentAccess:0x1044b22d8> 
```

这里出了什么问题？

编辑：一件非常奇怪的事情是编写文件的代码在rails控制台中工作得很好，但在运行应用程序时却不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T00:09:28.660

看起来您正在尝试将哈希传递给 decode 方法。你确定你不应该这样做`@base64 = params[:character][:base64]`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T15:18:59.467

`unpack`将数据类型从字符串修改为文本时出现错误。

# java - java gui mysql查询不同的按钮

> ID：10808370
> 
> 赞同：3
> 
> 时间：2012-05-30T00:04:58.573
> 
> 标签：java, mysql, user-interface

对于学校，我正在开发一个连接到 MySQL 数据库并执行查询的程序，例如 ATM 机。

到目前为止，我已经制作了一个简单的程序，将连接代码放在提交按钮中，但现在我需要支持许多不同的按钮来进行余额查询、提款等。

对于用户输入登录名和 PIN 的初始屏幕，我有以下代码，但我有点迷失了如何在其他按钮下使用此按钮中的变量进行这些查询：

```
private void bSubmitActionPerformed(java.awt.event.ActionEvent evt) {                                        
    String login = jLogin.getText();
    String pin = jPin.getText();

    try {
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost/bankaccount", "root", "password");

        Statement st = (Statement) con.createStatement();
        PreparedStatement ps;
        String sqlCommand;
        ResultSet rs;

        sqlCommand = "SELECT * FROM accounts WHERE loginID= '" + login + "' AND pin='" + pin + "'";

        rs = st.executeQuery(sqlCommand);

        if (rs.next()) {

            do {

                card2.setVisible(true);
                card1.setVisible(false);

            } while (rs.next());
        } else {
            jWarning.setText("please try again");
        }

    } catch (Exception e) {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:28:46.667

```
 public ResultSet execute(String sqlCommand ){

    ResultSet rs = null;

    try {
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost/bankaccount", "root", "password");

        Statement st = (Statement) con.createStatement();
        PreparedStatement ps;

        rs = st.executeQuery(sqlCommand);

    } catch (Exception e) {
    }

    return rs;

}

public void submitButton1(){
     String login = jLogin.getText();
    String pin = jPin.getText();

ResultSet rs = execute("SELECT * FROM accounts WHERE loginID= '" + login + "' AND pin='" + pin + "'");

   /// do whatever with your rs

}

public void submitButton2(){
     String login = jLogin.getText();
    String pin = jPin.getText();

ResultSet rs = execute("more sql");

   /// do whatever with your rs

} 
```

附加更新方法：

```
public int update(String sqlCommand ){

       int affected_rows = 0;
        try {
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost/bankaccount", "root", "password");

            Statement st = (Statement) con.createStatement();                

            affected_rows = st.executeUpdate(sqlCommand);

        } catch (Exception e) {
        }

        return affected_rows;

    } 
```

update 方法也可用于插入和删除。更新状态可能是这样的：

```
update accounts  
set columnA = "a value",  
columnB = "other value"  
where loginID = 4; 
```

# prolog - DCG 输出单个变量而不是列表中的整个子句

> ID：10808371
> 
> 赞同：2
> 
> 时间：2012-05-30T00:05:03.370
> 
> 标签：prolog, dcg

我在创建问题答案 Prolog 文件时遇到问题。我有一个包含位置的数据库，我已经可以得到问题并写出答案。但是有不同类型的对象，需要不同的前缀。所以我为前缀定义了 DCG。

```
answer(P,A) :- location(P, Str, Nr),A = [there, is, article(G,K,N,P), noun(G,K,N,P), pre(P),Str,Nr].
question(A) --> questionsentence(P),{answer(P,A)}.

pre(P)  --> [in, P], {member(P, [road66])}.
pre(P)  --> [at, P], {member(P, [trafalgarsquare])}. 
```

但我得到的是这样的：

```
?-question(A, [where,is,a,kentuckys],[]).
A = [there, is, article(_G2791, _G2792, _G2793, kentuckys), noun(_G2791, _G2792, _G2793, kentuckys), prep(kentuckys), road66, 123] 
```

这适用于正确验证输入，但它似乎对输出无用。我怎样才能只取变量而不取子句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:46:16.267

OK, I tried to translate the whole program to a more or less usefull and working example.

```
location(kentuckys, road66, 121).
location(soliver, trafalgarsquare, 15).
location(marcopolo, trafalgarsquare, 15).
location(internist, jumpstreet, 21).

questionsentence(P,G) --> [where],[is], article(G), noun(G,P).
answer(P,A,G) :- location(P, Str, Nr), prep(W,Str), article(G,Art,[]), flatten([there, is, Art, P, W, Str,Nr], A).
question(A) --> questionsentence(P,G),{answer(P,A,G)}.

article(m) --> [a].
article(f) --> [an].
noun(m, P) --> [P], {member(P, [kentuckys, soliver, marcopolo])}.
noun(f, P) --> [P], {member(P, [internist])}.
prep([at],Str)  :- member(Str, [trafalgarsquare, road66]).
prep([in],Str)  :- member(Str, [jumpstreet]). 
```

Result:

```
?- question(A, [where,is,a,kentuckys],[]).
A = [there, is, a, kentuckys, at, road66, 121] . 
```

I think, what I looked for was a construction like: article(G,Art,[]) to determine the depending DCG variable... actually I do not fathom yet how the two last arguments are working...

# javascript - 获取 IE 和 Firefox 错误：解析值“xxx”时出错。声明被删除

> ID：10808374
> 
> 赞同：0
> 
> 时间：2012-05-30T00:05:25.453
> 
> 标签：javascript, html, css

这是我页面的链接：http: [//myweb.students.wwu.edu/~tuckerb2/cs202/peanuts/project/open.html](http://myweb.students.wwu.edu/~tuckerb2/cs202/peanuts/project/open.html)。我在使用所有浏览器时都遇到了问题，尽管它适用于 Firefox 和 Chrome，但不适用于 IE。我需要修复这个出现在 Firefox 和 IE 中的解析错误，以便它 a) 在 Fox 中不显示错误并且 b) 在 IE 中实际工作。请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:52:53.473

有几件事你应该看看

首先，在 IE (6,7,8) 中 window.innerHeight 不存在，您可以使用以下内容：

```
var h = (document.documentElement.clientHeight/2)-17; 
```

另一个问题是，一旦字母在屏幕中央匹配，您就不会停止已启动的计时器。这意味着它们将继续运行并生成错误，因为变量 topLetters 和 bottomLetters 现在大于数组 topPos 和 bottomPos 的大小。

函数 setInterval 返回对其计时器的引用，因此您可以使用以下代码

```
var topTimer, bottomTimer;
function startSnowing() {
    topTimer = setInterval("topFall()",10);
    bottomTimer = setInterval("bottomRise()",10);
 } 
```

并将您的 topFall() 和 bottomRise() 方法更改为类似

```
function bottomRise() {
    if (bottomLetters < bottomPos.length) {
        document.getElementById("bottomLetters").style.bottom = bottomPos[bottomLetters] + "px";
        bottomLetters++;
    }
    else {
        clearInterval(bottomTimer);
    } 
} 
```

希望这可以帮助！

# database - 在类似正常运行时间的图表中可视化故障数据

> ID：10808376
> 
> 赞同：1
> 
> 时间：2012-05-30T00:05:27.523
> 
> 标签：database, charts, birt, pentaho

我在数据库中有以下形式的故障数据：

```
faultid | faultcode | startdatetime | enddatetime 
```

尽管每隔几秒钟轮询一次设备，但数据库中的条目仅在设备状态更改时更新，因此我可能会遇到持续数分钟、数小时甚至数天的故障。

我想将故障时间绘制为分钟与时间间隔，例如 30 分钟、1 小时、1 天间隔；这样一个持续几个间隔的故障将随着时间的推移在图表中以宽度方式增长，而不仅仅是在 startdatetime 处成为一个巨大的奇异条。如果可能的话，我想以独立于平台的方式做到这一点。

图表报告根据 Java 应用程序的需要运行和查看。

我尝试在谷歌上搜索类似的问题/解决方案，但要么我在谷歌上搜索错误的东西，要么没有多少人做这种事情，或者更明显地做了一些我没有得到的方式——我做错了吗？

**尝试的事情：**

我使用 BIRT 进行报告，除非我深入了解 BIRT 脚本，否则仅它似乎无法将数据按摩成我需要的图表所需的形式——但是到目前为止的文档和资源还不够让我什至接近做到这一点 - 有什么想法吗？

我考虑过使用 BIRT 的连接 afterOpen 脚本首先执行自定义 SQL 操作，但由于缺乏可用的文档和资源，这里似乎无法做到。

在一个实例中，我使用 SQL Server 存储过程来生成填充数据，创建间隔数据，其中 enddatetime - startdatetime > 间隔。每次调用报告时都会调用此过程。这很好用，但我需要为我使用的每个不同的数据库/报告维护一个存储过程，并且觉得必须有更好的方法。

我们使用 Pentaho Kettle 进行数据归档，我尝试使用它来执行数据填充，但是让 Kettle 生成这样的数据似乎是不可能的——有什么想法吗？

我考虑过从 Java 应用程序生成填充数据，但这意味着应用程序需要对报表了解太多才能运行它——我想要更好的抽象，以便 UI 开发人员和报表设计人员完全分离.

谢谢。

# java - Play Framework：为 Spring RabbitMQ 监听器手动打开 JPA 上下文

> ID：10808378
> 
> 赞同：1
> 
> 时间：2012-05-30T00:05:35.177
> 
> 标签：java, spring, jpa, playframework, rabbitmq

我正在使用 Spring-AMQP 来监视 Play 应用程序中的 RabbitMQ 消息队列。

问题是我无法从侦听器代码访问我的数据库，因为 JPA 上下文未在此范围内打开。

我了解 Play Framework 管理 JPA 上下文，以便在处理 HTTP 请求时打开它，但是有没有办法可以从 Play 控制器/作业外部使用 JPA？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:41:44.267

刚刚发现答案是使用 JPAPlugin！

示例监听器方法：

```
public void process(Message message) {
    JPAPlugin.startTx(false);
    boolean rollBack = false;
    try {
        // work with your models
        JPA.em().flush();
    } catch (RuntimeException e) {
        rollBack = true;
        // throw exception to prevent msg ACK, need to refine error handling :)
        throw e;
    } finally {
        JPAPlugin.closeTx(rollBack);
    }
} 
```

# javascript - javascript中缺少括号错误

> ID：10808381
> 
> 赞同：0
> 
> 时间：2012-05-30T00:05:48.313
> 
> 标签：javascript

我正在使用这个功能：

```
function sel_test(e) {
  //alert(e.length-1);

  var splitdata = e.split("d");
  var newstr = e.substring(0,e.length-1);

  dropcall = 1;
  nodes = newstr.split(';');
  o = 0;
  if (nodes[0] == '1') o = nodes.shift();
  for (i=0;i<nodes.length;i++) {
    e = nodes[i];
    var ul = document.getElementById(e);
    if (icons) var img = document.getElementById(e+'i');
    if (ul) {
      if (((ul == 'none') AND (ul.style.display == 'none')) OR (ul.style.display == '')) {
        ul.style.display = 'block';
      } else if (!o) {
        ul.style.display = 'none';
      }
    }
  } 
```

javascript 给我一个缺少括号的错误：

`if (((ul == 'none') AND (ul.style.display == 'none')) OR (ul.style.display == '')) {`

这是做什么的正确方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T00:09:05.287

你应该使用 && 和 || 而不是 AND 和 OR。

你不应该吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T00:08:57.653

试试这个：

```
if (((ul == 'none') && (ul.style.display == 'none')) || (ul.style.display == '')) 
```

JavaScript 有一个 AND 运算符，但它不是单词`AND`，它是`&&`（也`&`，对于按位与）。同样，而不是`OR`您想要的`||`（或`|`按位）。

请注意，您的`ul`变量*永远不会*等于字符串`'none'`- 返回 from`document.getElementById(e)`将始终是匹配的 DOM 元素，或者`null`如果没有元素具有提供的 id。

进一步阅读：[逻辑运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Logical_Operators)（你*应该*阅读它，因为并不总是返回or`&&`并且MDN 对此进行了解释）。`||``true``false`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T00:14:18.747

您还缺少该函数的结束权。

# android - Android 在 ListView 中获取准确的滚动位置

> ID：10808387
> 
> 赞同：40
> 
> 时间：2012-05-30T00:06:38.483
> 
> 标签：android, android-listview

我想获得 ListView 滚动的确切像素位置。不，我不是指第一个可见位置。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-30T00:14:49.110

好的，我找到了一种解决方法，使用以下代码：

```
View c = listview.getChildAt(0);
int scrolly = -c.getTop() + listview.getFirstVisiblePosition() * c.getHeight(); 
```

它的工作方式是获取第一个可见列表项的实际偏移量并计算它距视图顶部的距离以确定我们“滚动”到视图中的程度，所以现在我们知道我们可以计算其余的使用常规的 getFirstVisiblePosition 方法。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-16T11:02:15.557

只有当列表视图中的所有行都具有相同的高度并且没有标题（或者它也与行的高度相同）时，Saarraz1 的答案才有效。

请注意，一旦行在屏幕顶部消失，您将无法访问它们，因为您将无法跟踪它们的高度。这就是为什么您需要保存这些高度（或所有的累积高度）。我的解决方案需要保留每个索引的高度字典（假设当列表第一次显示时它被滚动到顶部）。

```
private Dictionary<Integer, Integer> listViewItemHeights = new Hashtable<Integer, Integer>();

private int getScroll() {
    View c = listView.getChildAt(0); //this is the first visible row
    int scrollY = -c.getTop();
    listViewItemHeights.put(listView.getFirstVisiblePosition(), c.getHeight());
    for (int i = 0; i < listView.getFirstVisiblePosition(); ++i) {
        if (listViewItemHeights.get(i) != null) // (this is a sanity check)
            scrollY += listViewItemHeights.get(i); //add all heights of the views that are gone
    }
    return scrollY;
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-05-23T23:08:30.283

我能想到的最简单的想法是扩展 ListView 并公开默认受保护的“computeVerticalScrollOffset”，然后在您的 xml 布局中使用“com.your.package.CustomListView”。

```
public class CustomListView extends ListView {

    public CustomListView(Context context) {
        super(context);
    }

    public CustomListView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CustomListView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public int computeVerticalScrollOffset() {
        return super.computeVerticalScrollOffset();
    }
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-03-10T09:07:30.190

首先声明您的 int 变量以保持该位置。

```
int position = 0; 
```

然后将 scrollListener 添加到您的 ListView，

```
listView.setOnScrollListener(new OnScrollListener() {

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
             position = firstVisibleItem;

        }
    }); 
```

然后在获取新数据或数据中的任何更改之后，您需要设置列表视图当前位置

```
listView.setSelection(position); 
```

我在设置适配器后使用过，对我来说很好用..

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-09-24T05:00:40.890

如果其他人在 Google 中找到了这种方法来跟踪OnScrollListener 中的*相对*滚动偏移量 - 即自上次调用监听器以来 Y 的变化 -[这里有一个 Gist 展示了如何计算它](https://gist.github.com/cnnrhill/6680353)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-08T02:53:33.507

我知道我迟到了，但我想分享我对这个问题的解决方案。我有一个 ListView，我试图找出我滚动了多少，以便滚动相对于它的其他内容并导致视差效果。这是我的解决方案：

```
public abstract class OnScrollPositionChangedListener implements AbsListView.OnScrollListener {
    int pos;
    int prevIndex;
    int prevViewPos;
    int prevViewHeight;
    @Override
    public void onScroll(AbsListView v, int i, int vi, int n) {
        try {
            View currView = v.getChildAt(0);
            int currViewPos = Math.round(currView.getTop());
            int diffViewPos = prevViewPos - currViewPos;
            int currViewHeight = currView.getHeight();
            pos += diffViewPos;
            if (i > prevIndex) {
                pos += prevViewHeight;
            } else if (i < prevIndex) {
                pos -= currViewHeight;
            }
            prevIndex = i;
            prevViewPos = currViewPos;
            prevViewHeight = currViewHeight;
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            onScrollPositionChanged(pos);
        }
    }
    @Override public void onScrollStateChanged(AbsListView absListView, int i) {}
    public abstract void onScrollPositionChanged(int scrollYPosition);
} 
```

我创建了自己的 OnScrollListener，其中 onScrollPositionChanged 方法将在每次调用 onScroll 时被调用。但是此方法将有权访问表示 ListView 已滚动量的计算值。

要使用此类，您可以将 OnClickListener 设置为新的 OnScrollPositionChangedListener 并覆盖 onScrollPositionChanged 方法。

如果您需要将 onScroll 方法用于其他内容，那么您也可以覆盖它，但您需要调用 super.onScroll 以使 onScrollPositionChanged 正常工作。

```
myListView.setOnScrollListener(
    new OnScrollPositionChangedListener() {
        @Override
        public void onScroll(AbsListView v, int i, int vi, int n) {
            super.onScroll(v, i, vi, n);
            //Do your onScroll stuff
        }
        @Override
        public void onScrollPositionChanged(int scrollYPosition) {
            //Enjoy having access to the amount the ListView has scrolled
        }
    }
); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-03-11T05:13:40.990

除了[@jaredpetker 的](https://stackoverflow.com/users/3381000/jaredpetker)回答。ListView 没有在其滚动中保存所有项目，因此您只需要操作列表的“可见”部分。当您向下滚动时，顶部项目被移出并作为新项目视图推送。这就是convertedView的来源（它不是要填充的空项目，它是在列表的“可见”部分之外移动的项目。所以你需要知道在可见部分之前有多少项目将它们与ListItemHeight相乘并添加headerHeight，然后如何你可以在滚动中获得真正的绝对偏移。如果你没有标题，位置 0 将是 listItem，所以你可以简化`absoluteY += pos*listItemHeight;`

```
public class CustomListView extends ListView {

private int listItemHeight = 140;
private int headerHeight = 200;

public CustomListView(Context context) {
    super(context);
}

public CustomListView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public CustomListView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
public int computeVerticalScrollOffset() {
    final int y = super.computeVerticalScrollOffset();
    int absoluteY = y;
    int pos = getFirstVisiblePosition();
    if(pos > 0){ 
       absoluteY += (pos-1)*listItemHeight+header‌​Height;
    }
    //use absoluteY
    return y;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-08-31T15:01:32.560

我遇到了类似的问题，我想将**Vertical Seekbar放在****ListView**的当前滚动值处。所以我有自己的解决方案。

**首先创建类**

```
public abstract class OnScrollPositionChangedListener implements AbsListView.OnScrollListener {
    int pos;
    public  int viewHeight = 0;
    public  int listHeight = 0;

    @Override
    public void onScroll(AbsListView v, int i, int vi, int n) {
        try {
            if(viewHeight==0) {
                viewHeight = v.getChildAt(0).getHeight();
                listHeight = v.getHeight();

            }
            pos = viewHeight * i;

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            onScrollPositionChanged(pos);
        }
    }
    @Override public void onScrollStateChanged(AbsListView absListView, int i) {}
    public abstract void onScrollPositionChanged(int scrollYPosition);
} 
```

然后像这样在**Main Activity**中使用它。

```
public class MainActivity extends AppCompatActivity {
    SeekBar seekBar;
    ListView listView;
    OnScrollPositionChangedListener onScrollPositionChangedListener = new OnScrollPositionChangedListener() {
        @Override
        public void onScroll(AbsListView v, int i, int vi, int n) {
            super.onScroll(v, i, vi, n);
            //Do your onScroll stuff
        }

        @Override
        public void onScrollPositionChanged(int scrollYPosition) {
            //Enjoy having access to the amount the ListView has scrolled

            seekBar.setProgress(scrollYPosition);

        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        seekBar = (SeekBar) findViewById(R.id.mySeekBar);
        listView = (ListView) findViewById(R.id.listView);
        final String[] values = new String[]{"Android List View",
                "Adapter implementation",
                "Simple List View In Android",
                "Create List View Android",
                "Android Example",

        };

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, android.R.id.text1, values);
        listView.setAdapter(adapter);
        listView.setOnScrollListener(onScrollPositionChangedListener);

        seekBar.postDelayed(new Runnable() {
            @Override
            public void run() {
                seekBar.setMax((onScrollPositionChangedListener.viewHeight * values.length) - onScrollPositionChangedListener.listHeight);
            }
        }, 1000);
        seekBar.setEnabled(false);

    }
} 
```

**在 App Gradle 中**

```
compile 'com.h6ah4i.android.widget.verticalseekbar:verticalseekbar:0.7.0' 
```

**在 XML 布局中**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/activity_main"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"

    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context="com.centsol.charexamples.MainActivity">

    <ListView
        android:id="@+id/listView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fadeScrollbars="false"

        android:scrollbars="none"

        android:layout_alignParentTop="true"

        android:layout_alignParentLeft="true"
        android:layout_alignParentStart="true">

    </ListView>
    <!-- This library requires pair of the VerticalSeekBar and VerticalSeekBarWrapper classes -->
    <com.h6ah4i.android.widget.verticalseekbar.VerticalSeekBarWrapper
        android:layout_width="wrap_content"

        android:layout_alignParentRight="true"
        android:layout_height="match_parent">
        <com.h6ah4i.android.widget.verticalseekbar.VerticalSeekBar
            android:id="@+id/mySeekBar"
            android:layout_width="0dp"
            android:progressDrawable="@drawable/progress"
            android:thumb="@drawable/thumb"
            android:layout_height="0dp"
            android:splitTrack="false"

            app:seekBarRotation="CW90" /> <!-- Rotation: CW90 or CW270 -->
    </com.h6ah4i.android.widget.verticalseekbar.VerticalSeekBarWrapper>
    <View
        android:layout_width="1dp"
        android:visibility="visible"
        android:layout_alignParentRight="true"
        android:layout_marginTop="16dp"
        android:layout_marginRight="2.5dp"
        android:layout_marginBottom="16dp"
        android:background="@android:color/black"
        android:layout_height="match_parent" />
</RelativeLayout> 
```

**背景xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <solid android:color="@android:color/transparent"/>

</shape> 
```

**填写xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

<solid android:color="@android:color/transparent" />

</shape> 
```

**进度 xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@android:id/background"
        android:drawable="@drawable/background"/>
    <item android:id="@android:id/progress">
        <clip android:drawable="@drawable/fill" />
    </item>

</layer-list> 
```

**拇指xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval" >

<solid android:color="@android:color/holo_red_dark" />
    <size
        android:height="5dp"
        android:width="5dp" />

</shape> 
```

# jquery-mobile - jQuery Mobile Clickhandler 适用于整数输入，但不适用于字符串

> ID：10808397
> 
> 赞同：0
> 
> 时间：2012-05-30T00:07:28.687
> 
> 标签：jquery-mobile, event-handling, click, anchor

我正在尝试通过引用锚标记内的处理程序函数来为 jQuery mobile 中的锚标记设置单击处理程序（我需要以这种方式进行操作，原因很麻烦）。如下面的代码所示，当我将一个变量传递给处理函数时，它是一个整数，但当我传递一个字符串时它不起作用。谁能解释这是为什么？

```
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css"
    />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
</head>

<body>
    <script>
        $(document).ready(function () {

            //The Line Below works
            $("#main").html('<a href="#" data-theme="a" onclick="test(' + '2' + '); return false" rel="external" data-role="button">click test</a>');

            /*
//The Lines Below Do not work
//$("#main").html('<a href="#" data-theme="a" onclick="test('+'hello world'+'); return false" rel="external" data-role="button">click test</a>');
var test = 'hello world';
//$("#main").html('<a href="#" data-theme="a" onclick="test('+test+'); return false" rel="external" data-role="button">click test</a>');
*/

            $("#main").trigger('create')

        });

        function test(e) {
            alert(e);
        }
    </script>
    <div data-role="page" class="type-interior">
        <div id="main" data-role="content"></div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:36:13.970

试试这个 ：：

```
var testParam = "'hello world'";

$("#main").html('<a href="#" data-theme="a" onclick="test('+testParam +'); return false;" rel="external" data-role="button">click test</a>'); 
```

# ruby-on-rails - 在 Ruby 中为单独的表中的操作创建分数

> ID：10808401
> 
> 赞同：0
> 
> 时间：2012-05-30T00:08:03.830
> 
> 标签：ruby-on-rails, ruby, scoring

我可以创建一个游戏，在那个游戏中我可以创建规则，我有一个“完成”规则的按钮，通过将规则布尔值：已完成列更改为 false，将其推送到“规则已完成”视图，我有一个通过将 Rule boolean :completed 列更改回 true 来“更新”规则的按钮。

所以，我的下一个任务是在新的 Score 控制器中创建一个 create 方法：

1.  通过相同的“已完成”button_to 操作，
2.  查找该 button_to 的规则并将该规则 ID 插入到新表 Score 中的“rule_id”列中。
3.  它还将完成时间（用户点击按钮的时间）发布到分数表的“完成时间”列，

我尝试的是简单地复制规则控制器中 create 方法的大部分细节，即：

```
def create
 @rule = @game.rules.new(params[:rule])
 if @rule.save
   flash[:notice] = "You have added a Rule to your Game!"
redirect_to game_url(@game)
else
 flash[:error] = "We couldn't add your Rule."
 redirect_to game_url(@game)
end
end 
```

我最近重复这一点的努力是将 rule_id 发布到 Score 表的“rule_id”列中，如下所示：

```
def create
 @rule = Rule.find(params[:id])
 @score = @rule.scores.new(params[:rule_id])
 if @score.save
   flash[:notice] = "You scored!"
    redirect_to game_url(@game)
else
 flash[:error] = "Wide right, try again."
 redirect_to game_url(@game)
end
end 
```

我的新分数数据库是：

```
class CreateScores < ActiveRecord::Migration
 def change
   create_table :scores do |t|
     t.integer :rule_id
     t.datetime :completed_time

     t.timestamps
   end
 end
end 
```

我建议的分数按钮操作是：

```
<%= button_to "Score!", score_path(@game.id,rule.id) %> 
```

和路线设置为：

```
Tgom::Application.routes.draw do

 resources :games do
   resources :rules do
  resources :scores do
end
   end
 end

  match 'games/:game_id/rules/:id/complete' => 'rules#complete', :as => :complete_rule

 match 'games/:game_id/rules/:rule_id/scores' => 'scores#create', :as => :score

 match 'games/:game_id/rules/:id/uncomplete' => 'rules#uncomplete', :as =>   :uncomplete_rule

 root :to => 'games#index' 
```

此设置的当前错误为：

```
ActiveRecord::RecordNotFound in ScoresController#create

Couldn't find Rule without an ID

Rails.root: c:/Sites/tgom
app/controllers/scores_controller.rb:9:in `create' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:33:38.690

您通过 url 的请求`score_path`（根据您的路线）将设置`:game_id`和`:rule_id`参数。特别是如果您按下按钮

```
<%= button_to "Score!", score_path(@game.id,rule.id) %> 
```

`params[:game_id]`将是`@game.id`并且`params[:rule_id]`将是`rule.id`

但是你的分数控制器创建方法是读取`params[:id]`，这将是零，因此你的错误。

# php - 将 PHP 与 Linux 服务器上的 Paradox .db 文件连接起来

> ID：10808405
> 
> 赞同：5
> 
> 时间：2012-05-30T00:08:33.033
> 
> 标签：php, windows, linux, paradox

我有以下情况：

我必须将网站（Linux 服务器上的 php）与旧应用程序（Windows 上的 Delphi 和 Paradox（.db 文件））集成，我需要从 paradox 数据库中获取数据并在网站上显示它们。我可以通过 FTP 传输 .db 文件。

我不认为我可以[安装外部库](http://php.net/manual/en/book.paradox.php)。

我没有在 Windows 上找到任何命令行程序来将 .db 文件转换为 mysql 或任何支持 PHP 的格式。此外，Paradox 数据库每天更新。

有没有人有任何解决方案或提示或任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T00:58:16.377

最好的办法可能是为 Windows 主机编写一个新的独立应用程序，该应用程序与 Paradox 库和 PostgreSQL 库链接；对 Paradox 数据库进行查询并将数据写入 PostgreSQL 数据库。

如果您想半途而废并编写一个工具，将 Paradox 数据库转储为 CSV 格式以便稍后在 PostgreSQL 端导入，那也可以工作，但是 CSV 格式有足够的麻烦来完成整个转换 Paradox ->对我来说，一个应用程序中的 PostgreSQL 似乎是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T17:37:18.137

我在[这里](http://www.codeproject.com/Articles/101014/Paradox-database-native-NET-reader)找到了从没有 DBE 的悖论 .db 文件中获取数据的解决方案。

问候。

# c# - 如何使用图像创建交互式地图

> ID：10808412
> 
> 赞同：0
> 
> 时间：2012-05-30T00:09:51.310
> 
> 标签：c#, .net, wpf, silverlight

我有几个图像，我想在 Silverlight 和 WPF 中创建交互式地图。图片是州和县的。我尝试对如何完成进行一些搜索，但无法找到一个很好的例子来说明如何完成这个。所以我很感激你的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:45:19.590

我参与了[从头开始创建 Xaml 世界地图（如下）](https://stackoverflow.com/questions/3846709/looking-for-a-simple-silverlight-map-component)，仅此一项就花了将近一天的时间来制作风格化的多边形版本（没有细节）......

从那以后，我购买了 Wacom Bamboo 数位板和触控笔，发现它的使用速度比鼠标快 5 倍。

![世界地图](../Images/5122b7fa56a4e7f886a39fd8e5ce38f3.png)

引用我自己的话：“您将地图作为背景图像导入并使用钢笔工具在全国范围内逐点追踪。将所有这些路径段组合成一条路径。然后为每个州创建一个单独的多路径（关闭他们允许填充）。”

创建它们后，您可以命名各个国家多边形并连接鼠标逻辑以使它们在鼠标悬停时全部发光或在按下时更改颜色等。

基本上，该屏幕上的所有其他内容都是用户控件和自定义控件。制定您想要的行为并创建适合您自己需求的控件。

在您的实例中，您可以使用不太准确的多边形，因为它们仅用于命中测试和突出显示，并且您希望在多边形下保留实际的地图图像。

# css - CSS3 box-sizing: 边距框；为什么不？

> ID：10808413
> 
> 赞同：152
> 
> 时间：2012-05-30T00:09:55.497
> 
> 标签：css, layout, position, w3c

为什么我们没有`box-sizing: margin-box;`？通常，当我们放入`box-sizing: border-box;`样式表时，我们实际上是指前者。

**例子：**

假设我有一个 2 列页面布局。两列都有 50% 的宽度，但它们看起来有点难看，因为没有排水沟（中间有缝隙）；下面是CSS：

```
.col2 {
    width: 50%;
    float: left;
} 
```

要应用装订线，您可能会认为我们可以在 2 列中的第一列设置右边距；像这样的东西：

```
.col2:first-child {
    margin-right: 24px;
} 
```

但这会使第二列换行，因为以下情况是正确的：

```
50% + 50% + 24px > 100% 
```

`box-sizing: margin-box;`将通过在元素的计算宽度中包含边距来解决此问题。我会发现这*非常*有用，如果不是比`box-sizing: border-box;`.

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-11-20T15:00:43.027

你不能用`width: calc(50% - 24px);`你的cols吗？然后设置你的边距。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-25T10:30:16.243

我想我们可以有一个`box-sizing: margin-box`. css 盒子模型准确地显示了框架边缘的位置。

有一些小问题 - 例如，边距框可能重叠 - 但它们并不难解决。

我认为，情况是一样的，正如我们在`overflow-x`&`overflow-y`组合中看到的那样，在表格单元格中使用绝对定位的 div，使用 min|max-width|height 与 box-sizing 的组合，等等。

有一些特性，非常简单的特性，是浏览器开发人员根本不开发的。

恕我直言，`box-sizing: margin-box`这是一个非常有用的功能。另一个有用的特性是`box-sizing: padding-box`，它至少存在于标准中，但没有在任何主要浏览器中实现。甚至在最新的 chrome 中也没有！

* * *

注意：@Oriol 的评论：*Firefox 确实实现了 box-sizing: padding-box。但其他人没有，它已从规范中删除。Firefox 将在版本 50 中将其删除。可悲。*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-23T12:36:59.530

顶部的人询问是否为整体宽度添加边距，包括填充和边框。问题是，当使用`border-box`.

我试图实现这个`border-margin`想法。我发现如果使用边距，您可以`.last`向最后一项添加一个类（使用边距，然后应用零边距，或使用`:last-child/:last-of-type`）。或者一直添加相等的边距（类似于上面的填充版本）。

请参阅此处的示例：http: [//codepen.io/mofeenster/pen/Anidc](http://codepen.io/mofeenster/pen/Anidc)

`border-box`计算元素的宽度 + 其填充 + 其边框作为总宽度。因此，如果您有`div`50% 宽的 2 s，它们将是相邻的。如果您`8px`向它们添加填充，那么您将有一个`16px`. 将它与一个包装元素（也有填充）结合起来，`8px`您将拥有一个布局精美的网格，周围有相同的排水沟。

在此处查看此示例：http: [//codepen.io/mofeenster/pen/vGgje](http://codepen.io/mofeenster/pen/vGgje)

后者是我最喜欢的方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-26T14:17:10.947

我确信所有这些都是显而易见的，但无论如何我都会把它打出来，因为……嗯，我需要练习。以下结果会不会与以下结果一样有效`box-sizing: margin-box;`：

```
.col2 {
    width: 45%;
    height: 90%;
    margin: 5% 2.5%;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    float: left;
} 
```

[http://jsfiddle.net/Fg3hg/](http://jsfiddle.net/Fg3hg/)

`box-sizing`用于控制填充和边框从哪个点评估到元素的整体大小。因此，虽然包含宽度的`px`边距并`%`不合理（通常情况下如此），但计算相对百分比量应该更容易，因为您不必将填充和边框合并到定义的宽度。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-14T18:03:19.297

这是因为 box-sizing 属性是指计算给定特定维度值（填充、边框）后元素的大小。"box-sizing:border-box" 设置元素的高度/宽度，并考虑填充和边框宽度。元素边距的范围大于元素本身，这意味着它会修改页面及其周围元素的流程，因此直接改变元素相对于其兄弟元素适合其父元素的方式。最终，“margin-box”属性值会导致重大问题，本质上与直接设置元素的高度/宽度相同。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-10T02:24:00.997

[正常流程中块级、非替换元素的](http://www.w3.org/TR/CSS21/visudet.html#blockwidth)维度必须满足

> margin-left + border-left-width + padding-left + width + padding-right + border-right-width + margin-right = 包含块的宽度

当过度约束时，浏览器必须调整左边距或右边距。我认为这意味着边距框的宽度**必须**等于包含块的宽度（即 100%）。

对于您的情况，[透明边框`box-sizing: border-box`可以像 margins 一样工作](http://dabblet.com/gist/6911499)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-25T23:27:21.670

也许使用 RGBA 将边框设置为 0% 不透明度，并将边框用作边距。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-02T21:13:17.190

在[Codrops](http://tympanus.net/codrops/)上有几篇关于边距和行被迫溢出的影响的好文章。他们建议使用带有规范化器 css 的 rem 或 em 单位，将所有浏览器的字体大小设置为 100%，然后当您设置宽度和边距时，只需在注释中记下即可轻松跟踪对行宽度的影响总宽度。16px 到 1 em 的转换是计算目标视口总宽度的方法。

至少在开发阶段这样工作，然后如果您想要“响应式”模板，您可以将宽度转换为 %，包括边距宽度。

他们建议处理排水沟的另一种通常更简单的方法是在我发现的`content: '';`每个列上使用伪之后和我发现效果非常好。如果您设置一个 div 类，它是定义的最后一列，例如 end 您可以将该类定位为不具有伪之后，或者具有更宽的类；最适合您的布局。

使用这种伪元素方法的额外好处是它还为您提供了一个阴影目标，可以为阅读器监视器上的平面图像提供更多的 3d 效果和更大的深度。我目前正在通过放大按钮上使用的效果、“调整”渐变和 z-index 来试验这种效果。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-24T00:48:58.353

在正文内容中使用**box-sizing**时会出现有趣的情况

没有内容没有边框框在左右边距上没有给出任何值这两个框重新计数算法的百分比重新计数

```
 .body{
    box-sizing: border-box;
    margin:0 3%;
  } 
```

> Firefox 57 之前的版本也支持 box-sizing 的 padding-box 值，尽管该值已从规范和更高版本的浏览器中删除。

所以margin-box甚至没有计划......

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-04T21:51:16.077

应该有一个 box-sizing: margin-box;

但是以下工作是否有效：在其周围放置一个 div

```
 .divX{
         width:  XX%;
         display:flex;
         align-items: center;
        justify-content: center;
      } 
```

# c# - 构建互连位置点的图形地图

> ID：10808416
> 
> 赞同：0
> 
> 时间：2012-05-30T00:10:09.733
> 
> 标签：c#, .net, algorithm, map, location

给定一个互连点列表，每个点与其他点有一个或多个单向连接，如何构建结构的图形地图？

简单来说，我可以通过以下连接获得点 A、B、C：

*   从 A 到 B
*   B到A
*   B到C
*   C到B

但可以有更多的点（A1、B1、A2、B2 等）。

它实际上是一个二维游戏地图。我需要这个来显示当前玩家的位置。每个点只能连接到附近的位置。事实上，我什至不需要显示连接 - 我只需要显示连接点彼此靠近即可。它们可以表示为小的交替颜色方块，就像在棋盘上一样。然后我需要一种方法来突出一个特定的点。

应该使用哪种算法来创建地图的位图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:10:38.627

您可以使用[dot](http://www.graphviz.org/)工具对有向图进行图形布局。我不太了解它使用的算法，但它在布局图形以最小化边缘交叉和边缘长度方面做得很好。

# android - 使用具有多层 ItemizedOverlay 的 OnTap(int i)

> ID：10808418
> 
> 赞同：4
> 
> 时间：2012-05-30T00:10:12.080
> 
> 标签：android, google-maps, android-mapview, itemizedoverlay

我必须在 mapview 上显示多个（大约 600 个，全部可点击以显示有关它们的一些信息）叠加项目。对于性能问题，我认为将它们分组到不同的 ItemizedOverlay 类是明智的，因为每个组都会显示关于它们的不同类型的信息。（特别是机场、VOR、NDB 等关于航空的东西）。

我的问题是，如果我将它们分成类并展示它们，性能非常好。地图流畅。但是当我在第一层之上添加第二层时，第一层上的项目变得不可点击。

当我阅读大量内容并使用 Log.i 方法进行调试时，我意识到每个图层都被单击，但只有 OnTap(Geopoint point, MapView mapview) 方法被调用。调用 super.onTap(point, mapview) 不起作用。我需要 onTap(int index) 方法来识别标记。（我的课程中有两种方法（在我阅读了很多例子之后））。

所以我该怎么做？有什么方法可以解决我的问题吗？我不想采用繁重的方法，例如将单击的坐标与所有叠加项目坐标进行比较以找到任何接近的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T00:40:38.443

onTop（以及任何其他在 android 上工作的触摸事件）的方式是，它将 ping 坐标处的任何和所有对象，*直到*其中一个 onTaps（或任何其他触摸事件）返回 true。在这种情况下，您的 onTap(Geopoint point, MapView mapview) 方法返回 true。这会消耗该触摸事件，并且不会让它传递给任何其他 onTap 事件。如果您让 onTap 事件返回 false，其他 onTap 事件将被 ping 通。我希望这有帮助。

# jquery - html5 视频和回退到 iframe 不起作用

> ID：10808422
> 
> 赞同：0
> 
> 时间：2012-05-30T00:10:30.820
> 
> 标签：jquery, html, video, iframe

我正在使用 HTML5 自动播放视频，并使用 vimeo 进行后备。

```
<video width="100%" height="100%" autoplay="autoplay">
    <source src="video/mp4.mp4" type="video/mp4" />
    <source src="video/ogv.theora.ogv" type="video/ogg" />
    <iframe src="http://player.vimeo.com/video/43010500?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff&amp;autoplay=1" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> 
</video> 
```

这适用于 Safari 和 Firefox，但在 chrome 上会有回声。我拿出 vimeo iframe 并且回声消失了，我的猜测是 chrome 正在使用 html5video 并且 iframe 视频也隐藏在它下面。

如果浏览器无法播放 html5 视频，那么回退到 iframe 的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:29:13.427

我建议您使用modernizr 来检查是否支持html5 视频。如果支持，您将注入视频标签，如果不支持，则注入 iframe。

[http://modernizr.com/](http://modernizr.com/)

```
<div id="videoplayer"></div>

if (Modernizr.video) {
  $('#videoplayer').html('all the video stuff you have'); // or build it and append
} else {
  $('#videoplayer').html('iframe code');
} 
```

我会疏忽不提已经有很多现有的插件和工具可以做到这一点。

[http://html5video.org/wiki/HTML5_Player_Comparison](http://html5video.org/wiki/HTML5_Player_Comparison)

# javascript - javascript 检查文档中的元素以应用值

> ID：10808424
> 
> 赞同：1
> 
> 时间：2012-05-30T00:10:58.937
> 
> 标签：javascript, function, resize

我对 javascript 很陌生，并且整天都被困在这上面。我有一个脚本，它可以根据屏幕资源调整元素大小，除了我需要“如果文档上不存在元素，然后在 contentContainer.css 方法中添加一个附加值“242px””之外，这就是我到目前为止所拥有的当它不在页面上时，这个 eleemnt 占用了 sideContent 元素的空间......

```
 <script>

             // DOM Container Resize Handler

                 var extra = ($("body.asideContent").length == 0) ? 242 : 0;

                 var adjustStyle = function() {
                 var winWidth = $(window).width(),
                  width = parseInt(winWidth),
                  container = $('body .fixed');
               contentContainer = $('body .content');
                   if (width >= 1454) {
                        container.css('width','1454px');
                        contentContainer.css('width',extra + 1210 + "px");
                    } else if ((width < 1454) & (width >= 1212)) { 
                        container.css('width','1212px');
                        contentContainer.css('width',extra + 968 + "px");
                    } else {
                       container.css('width','970px');
                       contentContainer.css('width',extra + 726 + "px");
                    }
                };
                 $(function() {
                    var filterWrap = $("#filterWrap"),
                        offset = filterWrap.offset(),
                        topPadding = 15;

                    $(window).scroll(function() {
                        if ($(window).scrollTop() > offset.top) {
                            filterWrap.stop().animate({
                                marginTop: $(window).scrollTop() - offset.top + topPadding
                            });
                        } else {
                            filterWrap.stop().animate({
                                marginTop: 0
                            });
                        };
                    });

                    // DOM Container Resize Handler - Initialization    
                    $(window).resize(function() {
                        adjustStyle();
                    });
                    adjustStyle();
                });
            </script> 
```

它一直在应用额外的，添加我只想在 ("body.asideContent") 不在文档中时应用它

测试html

```
 <html>
            <head>
            </head>
            <body>
                <div class="fixed">
                    <div id="container">
                        <div class="asideContent">&nbsp</div>
                        <div class="content">&nbsp</div>
                    </div>
                </div>
            </body>
            </html> 
```

只是想提前说声谢谢你能给我的任何帮助......它整天让我发疯......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:13:01.557

`body.asideContent`表示具有类 sideContent 的主体。尝试

```
$("body .asideContent") 
```

（又名，body 和 .asideContent 之间有一个空格）

# php - 如何在没有 arg 输入的情况下修改函数内的一个条件？

> ID：10808428
> 
> 赞同：1
> 
> 时间：2012-05-30T00:11:37.263
> 
> 标签：php, function

我需要调用一个输出 html 的函数。在这个函数内部，有一个条件可以从 html 中排除一行，我需要这一行。此条件不是函数的参数。它是硬编码的。所以，我必须自己编写代码，或者，有没有办法修改这个条件？

```
function get_media_item( $attachment_id, $args = null ) {
//....lots stuffs, then, arrive this part:
    $gallery = ( ( isset( $_REQUEST['tab'] ) && 'gallery' == $_REQUEST['tab'] ) || ( isset( $redir_tab ) && 'gallery' == $redir_tab ) );
    $order = '';

    foreach ( $form_fields as $key => $val ) {
        if ( 'menu_order' == $key ) {
            if ( $gallery )
                $order = "<div class='menu_order'> <input class='menu_order_input' type='text' id='attachments[$attachment_id][menu_order]' name='attachments[$attachment_id][menu_order]' value='" . esc_attr( $val['value'] ). "' /></div>";
            else
                $order = "<input type='hidden' name='attachments[$attachment_id][menu_order]' value='" . esc_attr( $val['value'] ) . "' />";

            unset( $form_fields['menu_order'] );
            break;
        }
    }
//... other stuffs
} 
```

我需要在其他选项卡中调用此函数，而不是“图库”选项卡。所以，我无法获取 $order 输入框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:20:48.697

如果您不想将参数传递给函数（建议顺便说一句）来修改条件，则可以使用 globalize 变量（或会话）。

例子：

```
function test(){
   global $instructions;

   if (isset($instructions['fetch'])){
      // new codes
   } else {
      // existing codes
   }

   return $result;
}

// implement:

$instructions = array();
$instructions['fetch'] = TRUE;
echo test(); 
```

# java - Java Swing：系统范围的组件规模？

> ID：10808429
> 
> 赞同：4
> 
> 时间：2012-05-30T00:11:45.277
> 
> 标签：java, swing

有没有办法通过一个因素来扩展应用程序中的所有 Swing 组件？我有一个现有的 Swing 应用程序，我想以双倍大小显示所有组件。这可能吗？

编辑：

我正在将 Java Swing 应用程序移植到 Sugar（OLPC XO 图形环境）。我没有辅助功能。该机器在 7.5 英寸显示屏中只有一种分辨率 1200x900。所以组件真的很小而且不可读。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-08-21T17:48:57.687

如果你放置

```
System.setProperty("sun.java2d.uiScale","2") 
```

在您的 main 方法的最开始，这会将整个应用程序缩放 2 倍。其他缩放因子是可能的。如果在 Windows 7 上使用 openJDK 11 和使用 KDE 的 Linux 成功尝试过此操作，两者都具有系统外观。Windows 接受小数比例因子，KDE 不接受。

如果您不想修改源代码，则 jvm 的命令行选项将具有相同的效果：

java -Dsun.java2d.uiScale=2 -jar myApp.jar

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T00:21:33.287

不幸的是，Swing 中没有这样的标准功能。

应用程序中的每个组件大小由添加该组件的容器的布局以及由其 UI 提供的组件的首选/最小大小决定。

所以最好的方法（如我所见）是修改标准用户界面，因此它们提供额外的首选尺寸（在你的情况下加倍）。但是您必须为特定类型的每个组件（按钮/复选框/表格/树/滚动等）单独执行此操作。另外，您无法更改系统 UI - 您只能扩展一些跨平台的外观和感觉，如 Metal LaF，如果您使用本机外观和感觉，这将毫无用处。

不过，您可以更改一些默认的 L&F 属性，例如字体：

```
UIManager.put ( "Button.font", new FontUIResource ( new Font ( "Arial", Font.BOLD, 20 ) ) ); 
```

这种特定情况仅更改按钮字体。您还可以在任何 LookAndFeel 类中找到许多其他组件字体属性（例如 BasicLookAndFeel）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-30T04:38:22.980

*   可以使用[Nimbus Look and Feel来调用 Swing JComponents](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/size.html)

*   修改 Nimbus L&F 非常复杂，它的`Color`, `Insets`, `Bounds`ei ，但以简单的形式没有任何问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T10:17:58.003

您可以为此使用 J(X)Layer（请参阅 www.pbjar.org/blogs/jxlayer/ 但该网站目前似乎已关闭）。可以在此处找到基于它的示例：http: [//patrickwebster.blogspot.com/2009/01/scalable-jfreechart-applet.html](http://patrickwebster.blogspot.com/2009/01/scalable-jfreechart-applet.html)

# bash - Bash：批量调整图像大小

> ID：10808431
> 
> 赞同：3
> 
> 时间：2012-05-30T00:12:04.340
> 
> 标签：bash

我正在编写一个 Bash 脚本，该脚本将获取一组目录，遍历它，在每个目录中创建一个名为“已处理”的目录，并对目录中的每个文件运行一个命令。这是我的代码（阅读代码中的注释以了解我坚持的内容）。有任何想法吗？

```
#!/bin/bash

command -v convert >/dev/null 2>&1 || {
    echo >&2 "Convert is not installed. Aborting.";
    exit 1;
}

declare -a directories_to_process=(
    "$HOME/Desktop/Album 1"
    "$HOME/Desktop/Album 2"
    "$HOME/Desktop/Album 3"
);

for directory in "${directories_to_process[@]}"
do
    if [ -d "$directory" ]; then
        if [ ! -d "$directory/processed" ]; then
            mkdir "$directory/processed"
        fi

        # Insert code to run the following command on each file in $directory:
        #
        # convert $directory/$filename -resize 108x108^ -gravity center -extent 108x108 $directory/processed/$filename
    fi
done 
```

**更新：**

这是工作脚本：

```
#!/bin/bash

command -v convert >/dev/null 2>&1 || {
    echo >&2 "Convert is not installed. Aborting.";
    exit 1;
}

directories_to_process=(
    "$HOME/Desktop/Album 1"
    "$HOME/Desktop/Album 2"
    "$HOME/Desktop/Album 3"
);

for directory in "${directories_to_process[@]}"
do
    [[ -d $directory ]] || continue

    mkdir -p "$directory/processed"

    for infile in "$directory"/*.jpg
    do
        outfile="$directory/processed/${infile##*/}"
        convert "$infile" \
                -resize '108x108^' \
                -gravity center \
                -extent 108x108 \
                "$outfile"
    done
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:02:33.613

在注释掉的区域添加这个：

```
for infile in "$directory"/*; do
  outfile="$directory/processed/${infile##*/}"
  convert "$infile" \
      -resize '108x108^' \
      -gravity center \
      -extent 108x108 \
      "$outfile"
done 
```

其他一些注意事项：

*   与其在 中嵌套大量逻辑`if [ -d "$directory" ]`，不如考虑将其放在`[[ -d $directory ]] || continue`循环的顶部以减少嵌套深度。（与 不同，在这种情况下`[ ]`，内部不需要引用）。`[[ ]]`
*   与其测试`[ ! -d "$directory/processed" ]`并使用它来决定是否创建目录，不如考虑无条件运行`mkdir -p "$directory/processed"`，如果目录已经存在，它将简单地以成功状态退出。
*   考虑替换`command -v convert`为`type convert`，它比`command -v`语法更广为人知，但效果相同。
*   `declare -a`在函数之外声明数组变量时不需要；简单地`directories_to_process=( ... )`工作。

# javascript - 在表单中检查的强制单选按钮不起作用

> ID：10808432
> 
> 赞同：-3
> 
> 时间：2012-05-30T00:12:07.783
> 
> 标签：javascript, forms, button, radio, required-field

我已经为此工作了一个多小时，并在此处和网络上搜索了答案，但无法使其正常工作，所以我现在请求帮助。

我有一个表格，其中所有字段都必须填写，包括要选择的“单选”按钮，称为“仪器”的单选按钮组。

任何帮助表示赞赏。

这是我的Javascript：

```
<script type="text/javascript">

    function checkFields(f) {
        name1 = document.form1.name1.value;
        name2 = document.form1.name2.value;
        email1 = document.form1.email1.value;
        instrument = document.form1.instrument.value;
        stylemusic = document.form1.stylemusic.value;

        if ((name1 == "") || (name2 == "") || (email1 == "") || (instrument == "") || (stylemusic == "")) {
            alert("All fields need to be filled.");
            return false;
        }
} 
```

和我的表单代码：

```
<input type="radio" value="percussion" name="instrument">Percussion
<input type="radio" value="wind" name="instrument">Wind 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:04:09.100

**我找到了答案**并将其发布在这里，以防有人遇到同样的问题：

```
if((document.form1.instrument[0].checked==false)&&(document.form1.instrument[1].checked==false))

{
alert('You must make a choice');
return false
} 
```

**注意**：添加另一个 [2]、[3] 等实例，以适应更多单选按钮选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:17:19.370

您不需要对单选按钮使用验证，只需默认选中您的一个单选按钮，这样，您将确保每个组都有一个选中按钮。

这完成了两件事：

*   检查所需的组
*   无需 javascript 验证

当然，我假设您正在使用组，单选按钮单独没有意义，它们需要分组。

# php - 如何使重定向动态

> ID：10808433
> 
> 赞同：1
> 
> 时间：2012-05-30T00:12:18.240
> 
> 标签：php, redirect, header

请我需要你的帮助来解决我遇到的一个小问题。我正在使用将用户重定向到他们刚刚粘贴评论的页面，并且**d=3**应该是动态的，即根据**id**采用不同的整数。

我试图像这样添加 php 变量

```
 Header('Location: http://site/a.php?id=$articleID') 
```

但我得到一个错误。

```
 Header('Location: http://site/a.php?id=3') 
```

请问我该如何克服这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:13:24.633

将引号从单引号更改为双引号。单引号不会解释其中的变量。

```
 Header("Location: http://site/a.php?id=$articleID") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:14:17.533

您不能将变量传递给单引号字符串

```
header("Location: http://site/a.php?id=$articleID");
exit; 
```

不要忘记包含`exit;`，否则脚本的其余部分仍将执行，直到加载新页面。

# java - 使用番石榴缓存（内存表）维护多个索引

> ID：10808436
> 
> 赞同：16
> 
> 时间：2012-05-30T00:12:43.420
> 
> 标签：java, caching, indexing, guava

我正在尝试实现一个简化的内存缓存“表”，其中有两种类型的索引：主索引和辅助索引。

*   **主索引**将单个键（主键）映射到唯一值（Map 接口）

*   **二级索引**将单个键映射到值集合（Multimap 符合要求）

非常类似于 RDBMS 世界中的表，其中一个表有多个查找列。有时您想按 PK 搜索，有时返回基于公共属性的行列表。现在，除了等于 (=) 之外，不需要其他操作（即没有范围查询或模式匹配）。

将缓存语义添加到上述数据结构（驱逐、数据填充/缓存加载器、刷新等），这几乎是需要的。

我想就如何最好地解决给定问题征求您的意见。应该是 Cache per index 还是 Cache (for PK) + (synchronized) Multimap for secondary index？

任何帮助深表感谢。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:53:38.607

You can replace a Map with a Guava com.google.common.cache.Cache. It doesn't support Multimap type semantics , so you'd have to use

```
Cache<K, ? extends List<V>> 
```

in that case.

For the sake of simplicity I would make the 'primary index' a subset of the secondary index - i.e. you have a single index that returns a list of values for a given key and primary keys just return a list with a single value.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T20:11:30.067

这里的挑战是保持两个索引的完整性，无论您是使用两个缓存还是一个缓存来进行 PK + multimap。

可能你应该创建一个扩展 com.google.common.cache.Cache 的新缓存类（比如 TableCache），在内部这个类可以维护二级索引的多映射实例变量（可以是 ConcurrentHashMap）。

然后您可以覆盖缓存方法（放置、获取、无效等）以保持二级索引同步。

当然，您必须提供一个 get 函数来根据二级索引检索值。

这种方法使您能够维护主索引和辅助索引的完整性。

```
public class TableCache<K, V> extends Cache<K, V> {

    Map<K, List<V>> secondaryIndex = new ConcurrentHashMap<K, List<V>>();

    public void put(K key, V value) {
        super.put(key, value);
        // Update secondaryIndex
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:26:05.557

我自己也遇到过很多次这个问题。

如果 Java 有更好的[**STM 支持**](http://en.wikipedia.org/wiki/Software_transactional_memory)，可以解决这个问题。制作非阻塞原子数据结构非常困难。我见过的最好的是[多元宇宙](https://github.com/pveentjer/Multiverse)。

因此@vladimir 的答案可能是最好的，但我会说存储的集合应该是不可变的，并且您必须在刷新/缓存未命中等时检索整个集合......另外，如果您更改 multiset 的成员之一，您将继续很难知道如何更新其父级并使缓存无效。

否则我会考虑像[**Redis**](http://redis.io/)这样的大型数据集，它支持地图和列表组合上的原子操作。

# spring - Javascript 和 Spring 混合错误信息

> ID：10808437
> 
> 赞同：1
> 
> 时间：2012-05-30T00:12:49.173
> 
> 标签：spring

我使用 Javascript 显示错误消息，消息来自 Spring[Servlet]。

它看起来像这样：

```
@RequestMapping(value="/updatePolicyInformation/accessManage/", method=RequestMethod.POST)
public @ResponseBody Map updatePolicyInformationAccessManage(
        @RequestParam(required=true) Integer m_idx,
        @RequestParam(required=true) Integer mode,
        @RequestParam(required=true) Integer use_auto_login,
        @RequestParam(required=true) Integer use_auto_halt,
        @RequestParam(required=true) Integer use_browser_acesss){

    /* This above @RequestParam generates 400 error if parameter is not the type of Integer. but I'd like to give JSON object instread of 400 error */
    /* {  (example)
          status : error,
          message : invalid parameter type
       }
    */

    if(deviceService.updatePolicyInformation("monitor.device.policy.update", paramMap) == 1)
        return JSON.result(JSON.SUCCESS, "SUCCESS!!!"); // << this part return json status code.
    else 
        return JSON.result(JSON.ERROR);
} 
```

有没有办法发送 json 消息而不是给出 400 错误？

# php - AES-256 加密，PHP 到 MySQL

> ID：10808438
> 
> 赞同：1
> 
> 时间：2012-05-30T00:12:50.453
> 
> 标签：php, mysql, encryption

我正在尝试将此加密系统与 PHP 一起使用。

它带有来自下载的此代码。

```
$salt = 'nala321';
$password = 'Alan';
 include('./crypt/Crypt/AES.php');
 $aes = new Crypt_AES();
 $aes->setKey('abcdefghijklmn');

 $size = 10 * 1024; 

***EDIT***
 $plaintext = $password.$salt;
***EDIT***

 for ($i = 0; $i < $size; $i++) {
     $plaintext.= 'a';
 }
 $enc = $aes->encrypt($plaintext);
 echo $enc; 
```

这会导致很长的输出。我该如何将它存储到mysql中？我看过不同的想法说要做

***编辑***

它返回这样的字符

```
¸ÂØwÕ·›óöŽfjËëªû ÒÚCÂF I3T{öËY_Œ:4$¯Ÿ´ 
```

***编辑***

```
VARCHAR(16) CHARSET ascii COLLATE ascii_bin 
```

这是一个 md5 加密密码。我不确定我是否应该把尺寸缩小到

```
$size = (16*16)-1; // for 255 limit on varchar 
```

感谢您的评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:05:14.160

我完全取出了 for 循环。

将密码存储为 varchar(30) 并且它工作得很好。

最终代码如下所示

```
$password = 'Alan';
include('./crypt/Crypt/AES.php');
$aes = new Crypt_AES();
$aes->setKey('abcdefghijklmn');
$enc = $aes->encrypt($plaintext);
echo $enc; 
```

# grammar - 语法的词汇元素

> ID：10808442
> 
> 赞同：1
> 
> 时间：2012-05-30T00:12:59.510
> 
> 标签：grammar, lexical

语法有4个词汇元素

```
G = (S, N, T, P) 
```

其中 G = 语法，S = 起始符号，N = 非终结符，T = 终结符，P = 生产规则

我想知道 N 是否总是与 P 相等，因为我知道 P 是词位，可以用其他词位代替

所以在这个例子中：

```
<program> --> <stmts>
<stmts> --> <stmt> | <stmt> ; <stmts>
<stmt> --> <var> = <expr>
<var> --> a | b | c | d
<expr> --> <term> + <term> | <term> - <term>
<term> --> <var> | const

S: <program>
N: <program>, <stmts>, <var>, <expr>, <term>
T: ;, a, b, c, d, +, -, const
P: <program>, <stmts>, <var>, <expr>, <term> 
```

是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T00:16:49.860

编号|N| 不一定 = |P|。考虑：

```
<program> --> <stmts>
<stmts> --> <stmt> 
<stmts> -->| <stmt> ; <stmts>
<stmt> --> <var> = <expr>
<var> --> a 
<var> --> b
<var> --> c
<var> --> d
<expr> --> <term> + <term> 
<expr> --> <term> - <term>
<term> --> <var> 
<term> --> const 
```

您的问题是您对语法规则中允许的内容不准确。

您可以通过坚持没有规则具有相同的左侧来*强制规则的数量与非终结符匹配。*要做到这一点，你不能坚持简单的 BNF；您必须至少交替扩展 BNF。

PS：这实际上与语法的“词汇元素”无关。它只是关于语法的定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:19:57.000

听起来像功课......你基本上是对的，只有 P**是实际规则**。

```
G = (S, N, T, P)

S: <program>
N: <program>, <stmts>, <var>, <expr>, <term>
T: ;, a, b, c, d, +, -, const
P: <program> --> <stmts>, 
   <stmts> --> <stmt> | <stmt> ; <stmts>,
   <stmt> --> <var> = <expr>,
   <var> --> a | b | c | d,
   <expr> --> <term> + <term> | <term> - <term>,
   <term> --> <var> | const 
```

没有规则，a 语法是无用的。

# multithreading - Redis 服务器在多线程 Perl 脚本中响应“资源暂时不可用”

> ID：10808445
> 
> 赞同：1
> 
> 时间：2012-05-30T00:13:38.950
> 
> 标签：multithreading, perl, redis

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:22:05.720

我的错误是我只建立一个连接并在每个线程中使用该连接。解决方案：每个线程连接到 Redis 服务器。

感谢 Didier Spezia 的解决方案。

# c++ - boost::format 和自定义打印标准容器

> ID：10808446
> 
> 赞同：10
> 
> 时间：2012-05-30T00:14:14.823
> 
> 标签：c++, boost, namespaces, boost-format

我的命名空间`ns`中有一个函数可以帮助我打印 STL 容器。例如：

```
template <typename T>
std::ostream& operator<<(std::ostream& stream, const std::set<T>& set)
{
    stream << "{";
    bool first = true;
    for (const T& item : set)
    {
        if (!first)
            stream << ", ";
        else
            first = false;
        stream << item;
    }
    stream << "}";
    return stream;
} 
```

这非常适合`operator <<`直接打印：

```
std::set<std::string> x = { "1", "2", "3", "4" };
std::cout << x << std::endl; 
```

但是，使用`boost::format`是不可能的：

```
std::set<std::string> x = { "1", "2", "3", "4" };
boost::format("%1%") % x; 
```

问题很明显：Boost 不知道我希望它使用我的自定义`operator <<`来打印与我的命名空间无关的类型。除了在 中添加`using`声明之外`boost/format/feed_args.hpp`，有没有方便的方法来`boost::format`查找 my `operator <<`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:57:53.940

我实际使用的解决方案与 Answeror 的非常相似，但它适用于任何事情：

```
namespace ns
{

template <typename T>
class FormatWrapper
{
public:
    explicit FormatWrapper(const T& x) :
            ref(x)
    { }

    friend std::ostream& operator<<(std::ostream& stream,
                                    const FormatWrapper<T>& self
                                   )
    {
        // The key is that operator<< is name lookup occurs inside of `ns`:
        return stream << self.ref;
    }
private:
    const T& ref;
};

template <typename T>
FormatWrapper<T> Formatable(const T& x)
{
    return FormatWrapper<T>(x);
}

} 
```

所以用法是：

```
boost::format("%1%") % Formatable(x); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T09:14:00.507

我认为最干净的方法是在您自己的命名空间中为您要覆盖的每个运算符提供一个瘦包装器。对于您的情况，它可以是：

```
namespace ns
{
    namespace wrappers
    {
        template<class T>
        struct out
        {
            const std::set<T> &set;

            out(const std::set<T> &set) : set(set) {}

            friend std::ostream& operator<<(std::ostream& stream, const out &o)
            {
                stream << "{";
                bool first = true;
                for (const T& item : o.set)
                {
                    if (!first)
                        stream << ", ";
                    else
                        first = false;
                    stream << item;
                }
                stream << "}";
                return stream;
            }
        };
    }

    template<class T>
    wrappers::out<T> out(const std::set<T> &set)
    {
        return wrappers::out<T>(set);
    }
} 
```

然后像这样使用它：

```
std::cout << boost::format("%1%") % ns::out(x); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T23:35:21.387

你可以尝试这样的事情：

```
namespace boost // or __gnu_cxx
{
    using np::operator<<;
}
#include <boost/format/feed_args.hpp> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T15:37:29.777

已经提到的问题是由于 ADL（依赖于参数的查找 - 通常归因于 Andrew Koenig，但我相信他不应该受到所有责备）。

即使在您的本地上下文中，它也无法在您打算使用`operator<<`.

一种作弊技巧是将`operator<<`您定义的内容放入`namespace std`. 那是禁止的，但它可能适用于你的情况，但前提是它被放在它的使用之前，这可能是问题所在。

可能还有其他选项，例如定义您自己的 Set 模板。我尝试过

```
 template<typename T> using Set=std::set<T>; 
```

但如果没有

```
 using np::operator<<; 
```

yuyoyuppe 提供。

# iphone - 如何安全地将 JSON 传输到 iOS 应用程序/从 iOS 应用程序传输？

> ID：10808447
> 
> 赞同：0
> 
> 时间：2012-05-30T00:14:16.360
> 
> 标签：iphone, ios, json, web-services

是否有通常遵循的标准协议？或者这是一个变化很大的领域？大多数优秀的 iOS 应用程序如何以防止意外使用或黑客攻击的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:07:56.237

为了防止某人使用您的网络服务，您必须有某种密码方案，或者另一端的一方必须有您能识别的“凭证”（即花哨的密码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:22:10.090

使用高级 API (NSURLConnection API) 连接到 SSL 驱动的 Web 服务器，确保返回 JSON 的安全 URL 需要身份验证和授权。

# ios - iOS中的apk等价物是什么？

> ID：10808451
> 
> 赞同：77
> 
> 时间：2012-05-30T00:14:41.810
> 
> 标签：ios, apk

in等价`apk`于`iOS`什么？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-05-30T00:16:44.050

它们`.ipa`在所有 iOS 设备上都称为文件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-23T16:14:49.933

只是添加，但 IPA 文件是为 Apple iOS 设备（如 iPhone、iPod Touch 或 iPad）编写的程序。此类文件从 Apple iTunes App Store 下载，并且可以在连接到计算机时传输到 iOS 设备。

# java - 方法针对类的所有实例运行

> ID：10808453
> 
> 赞同：2
> 
> 时间：2012-05-30T00:14:44.300
> 
> 标签：java

我遇到了这个问题，这一直让我发疯。简而言之，我实例化了同一个类的两个对象。当我在一个对象中运行一个方法时，另一个对象也会受到影响，就好像我在第二个对象上显式调用了一个方法一样。我想知道是否有人可以帮我解决这个问题。

假设，我有课`Portfolio`...

```
public class Portfolio implements Cloneable {

public ArrayList<Instrument> portfolio;
private String name;
private String description;

public Portfolio() {
    portfolio = new ArrayList<Instrument>();
}

public Portfolio(Portfolio copyFrom) {
    //attempt to copy the object by value
    this.portfolio = (ArrayList<Instrument>) copyFrom.portfolio.clone();
    this.name = copyFrom.name;
    this.description = copyFrom.description;
}

public void applyStress(Stress stress) {
    this.portfolio.set(0,this.portfolio.get(0)+1;
} 
```

第一个构造函数用于实例化对象等。第二个构造函数用于按值复制对象。

一种方法`applyStress`用于运行总和计算。在我们的例子中，我简化了方法，所以它什么都不做，只是给对象中的任何内容添加 +1。

所以我会将一个对象实例化为

```
Portfolio p = new Portfolio(); 
```

然后我会分配到一个`portfolio`领域，一些仪器；

```
p.portfolio = someInstrumentList; 
```

然后我会按值复制`portfolio p`into `pCopy`：

```
Portfolio pCopy = new Portfolio(p); 
```

所以此时我有两个相同的对象。还有一个是按值复制的对象。更改 中的字段值`pCopy`不会影响 中的相同字段`p`。

现在，当我在 上运行一个方法`applyStress`时`p`，仪器列表中的值`pCopy`也会发生变化。

换句话说，如果`p.portfolio.get(0) == 1`，那么在 之后`p.applyStress`，我希望看到`p.portfolio.get(0)`is`2`和`pCopy.portfolio.get(0)`is`1`

但我看到的`p.portfolio.get(0)`是现在`2`也是`pCopy.portfolio.get(0)``2`

我不明白为什么会这样。这不是`static`修饰符问题，因为没有静态修饰符。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:18:02.883

应用于您的`ArrayList` 引用的克隆方法是[浅拷贝](http://en.wikipedia.org/wiki/Shallow_copy#Shallow_copy)，而不是[深拷贝](http://en.wikipedia.org/wiki/Shallow_copy#Deep_copy)。这意味着您在原始集合中拥有的任何内容都由克隆的集合共享。

这意味着您还需要克隆每个乐器，或者为每个乐器提供一个复制构造函数。

```
this.portfolio = new ArrayList<Instrument>();
for(Instrument toBeCopiedInstrument : copyFrom.portfolio){
   this.portfolio.add(new Instrument(toBeCopiedInstrument ));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:01:47.943

默认情况下`.clone()`执行所谓的 a `shallow copy`，这意味着它只是将 a 复制`reference`到存在的对象中`List`，`cloned`它实际上并没有将对象本身复制到新实例中。

您需要做的是为列表中`deep copy`包含的`List`每个项目实现自定义。但是`deep clone`在 Java 中是一个破碎的概念和实现。

A`copy constructor`在 Java 中也不是一个很好的模式，因为在大多数情况下，您最终也会复制引用，并且您注入到构造函数的每个对象都必须在整个链中遵循相同的复制构造函数语义。与 C++ 不同，这是手动、乏味、不可维护且容易出错的过程！

`.clone()`并且`implements Cloneable`是在 Java 中获得正确概念的最复杂的部分。在精心设计的应用程序中很少需要它们。[也就是说，如果你正在使用`.clone()`你可能做错了](https://stackoverflow.com/a/4081895/177800)。如果对对象进行按位复制是您设计的一部分，而不是存储，那么您可能需要重新审视您的设计。

[乔什·布洛赫谈设计](http://www.artima.com/intv/bloch13.html)

> Object 的 clone 方法非常棘手。它基于现场副本，并且是“语言外的”。它创建一个对象而不调用构造函数。不能保证它保留了构造函数建立的不变量。多年来，无论在 Sun 内部还是外部，都出现了很多错误，这是因为如果您只是在链上反复调用 super.clone 直到您克隆了一个对象，您就会得到该对象的浅表副本。克隆通常与被克隆的对象共享状态。如果该状态是可变的，则您没有两个独立的对象。如果你修改一个，其他的也会改变。突然之间，你得到随机行为。

**不可变**

一个更好的模式是让一切都不可变。这样您就不需要单独的实例，您可以共享实例直到它们需要更改，然后它们会更改并且您拥有一个包含新数据的新实例，可以共享而没有任何**副作用**。

# named-parameters - jdbc命名参数不支持mysql默认值

> ID：10808455
> 
> 赞同：1
> 
> 时间：2012-05-30T00:14:50.470
> 
> 标签：named-parameters

我正在使用 namedParameter 插入表中。假设用户表，其中活动标志在 mysql 中默认为 1 并标记为 NOT NULL。

我想要的是，如果我有 active 的值，我将通过 java 代码设置它，但如果没有，我会将其设置为 null 并期望 MySql 设置默认值，但我得到了异常

`org.springframework.dao.InvalidDataAccessApiUsageException: No value supplied for the SQL parameter 'passwordType': No value registered for key 'active' at`

我怎样才能达到理想的行为？

# javascript - 使用 javascript 操作 html 页面选择

> ID：10808456
> 
> 赞同：1
> 
> 时间：2012-05-30T00:14:50.837
> 
> 标签：javascript, html

我试图弄清楚如何以编程方式用 div 标签包围我选择的 html 元素。这是标记的样子

```
sdfsdf<div class="highlight">sdjfksdjf<strong>dsfkjdf</strong>dfd</div>sdfdsf 
```

这是选择

```
sdjfksdjf<strong>dsfkjdf</strong>dfd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:33:00.933

您可能需要现代浏览器原生支持的 GetElementsByClassName：

[http://www.quirksmode.org/dom/w3c_core.html#gettingelements](http://www.quirksmode.org/dom/w3c_core.html#gettingelements)

例如：

```
document.getElementsByClassName('highlight'); 
```

# jquery - 局部视图中的 MVC3 表单

> ID：10808459
> 
> 赞同：0
> 
> 时间：2012-05-30T00:16:08.987
> 
> 标签：jquery, ajax, asp.net-mvc-3, razor

我正在寻找在 MVC3、JQuery AJAX 中完成以下任务的最佳方法：

我有一个购物车，可以为购物车中的每种产品输入不同的船舶地址。这个想法是让这艘船在每个产品的正下方形成，以及一个保存按钮，并通过 JQuery AJAX 提交。

我一直在尝试的方法是将表单放在局部视图中（连同 Html.BeginForm 和提交 SAVE 按钮），然后在视图的 foreach 循环中呈现局部视图（将视图模型项传递给部分视图表单）。

对于购物车中的第一个产品，一切正常，但是当我尝试为购物车中的第二个或第三个产品输入并提交任何其他表单地址时，我实际上是从第一个产品中获取 ID 并更新那个。

通过 Google 阅读，我发现了有关模型绑定到表单的文章，但对于这些情况，我在 foreach 循环之前有一个整体 Html.BeginBeginForm 并且只有一个提交按钮。如何为每个产品下的每个表单设置一个提交 (SAVE) 按钮并通过 AJAX 调用提交？

千人先谢过！！！

**更新：**

也许为了更好地了解我在这里所做的事情是这个例子：

在主视图 Cart.cshtml 中，我有：

```
@foreach (var item in Model.CartItems)
{
   @Html.Partial("ShipToAddress", new AddressViewModel(item.CartDetailsId))
} 
```

然后在 ShipToAddress.cshtml 的部分视图中，我有：

```
@using (Html.BeginForm("SaveShipToAddress", null, FormMethod.Post))
{ 
  @Html.HidenFor(model => model.ItemId)
  @Html.TextBoxFor(model => model.Name)
  @Html.TextBoxFor(model => model.Address)
  <input type="submit" value="Save" id="saveShipToAddress" />
} 
```

然后我有绑定到这个表单并通过 AJAX 提交的 jquery 脚本文件。

I think my problem is that the form is inside the partial view, so when it gets generated it has the same IDs for all the items in the cart.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:24:40.393

Use jQuery `serialize` method to serialize that part of form and send that to an action method. You can still do the modal binding there. Something like this you can do on your save button click event.

```
$.post("Yourcontroller/YourAction", $("#formId").serialize() ,function(data){
  //do whatever with the response

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T00:03:24.967

In case anyone else needs to do something similar I ended up solving this by adding an itemId attribute to the form:

```
@using (Html.BeginForm("SaveShipToAddress", null, FormMethod.Post, new { @class = "frmShipToAddress", itemId = Model.ItemId.ToString() })) 
```

and then the jquery file I've grabbed that:

```
var shipAddress = {   
itemId: form.attr('itemId'),
name: form.find('input[name="Name"]').val(),
address: form.find('input[name="Address"]').val() }

var jsonData = JSON.stringify(shipAddress); 
```

and passed the jsonData to the ajax call, which was then received in the controller and correctly parsed due to using the viewmodel object.

# jquery - 行为类似于本机菜单栏的下拉菜单

> ID：10808460
> 
> 赞同：0
> 
> 时间：2012-05-30T00:16:12.770
> 
> 标签：jquery

我知道有数百个用于下拉菜单的 jQuery 插件，但我似乎找不到适合我需要的那个。要求如下：

1.  单击时打开下拉菜单
2.  如果下拉菜单打开，则其余下拉菜单会在悬停时打开
3.  下拉菜单仅在您单击之前关闭。

这与 MacOS 管理其菜单栏的方式非常相似，我认为 Windows 也是如此。

[Google 代码编辑器](https://docs.google.com/macros/)中的菜单的行为与此非常相似，以供参考。

我不能将 jQuery UI 作为附加依赖项。我的应用程序已经很胖了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:46:35.073

好吧，您可以随时根据自己的规格制作适合自己的插件，而不是使用大插件，这非常简单，只需最少的代码：

工作 jsFiddle：http: [//jsfiddle.net/Mh3Pm/](http://jsfiddle.net/Mh3Pm/)

HTML：

```
<ul id="main_nav">
    <li>
        <a href="#">Link 1</a>
        <ul class="sub_nav">
            <li><a href="#">Sublink 1</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Link 2</a>
        <ul class="sub_nav">
            <li><a href="#">Sublink 1</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Link 3</a>
        <ul class="sub_nav">
            <li><a href="#">Sublink 1</a></li>
        </ul>
    </li>
</ul> 
```

CSS：

```
ul#main_nav > li {
    width: 70px;
    float: left;
}

ul.sub_nav {
    display: none;
}

#main_nav.active ul.sub_nav.active {
    display: block;
} 
```

JS：

```
$('ul#main_nav').on('click', function() {
    $(this).toggleClass('active');
});

$('body').on('click', function(e) {
    if ($(e.target).closest('ul#main_nav').length == 0) {
        $('ul#main_nav').removeClass('active');
    }
});

$('ul#main_nav > li > a').on('mouseover', function() {
    $('ul.sub_nav').removeClass('active');
    $(this).siblings('ul.sub_nav').addClass('active');
}); 
```

我敢肯定它并不完美，但它应该让你走上正确的轨道。

# qt - 使用 CUDA 运行时库的 Qt 应用程序在双击时不运行

> ID：10808462
> 
> 赞同：1
> 
> 时间：2012-05-30T00:16:20.060
> 
> 标签：qt, cuda

我正在学习在 linux（Ubuntu 12.04 64 位）上构建 Qt + CUDA 应用程序。对于初学者，我正在尝试构建一个应用程序来检查我的计算机上启用 CUDA 的设备的数量。

我可以从 Qt Creator 中启动应用程序，但不能通过双击应用程序来启动。我可以通过在终端中发出 ./device_query 来运行它（应用程序的名称是 device_query）。

我有一个简单的用户界面（创建 Qt gui 应用程序时由 Qt Creator 创建的默认用户界面）

这是其他文件

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <cuda_runtime.h>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    Ui::MainWindow *ui;

};

#endif // MAINWINDOW_H 
```

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    int count;
    cudaGetDeviceCount(&count); //when this line is added, unable to double click and launch

}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

主文件

```
#include <QtGui/QApplication>
#include "mainwindow.h"
#include <QtDebug>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();
    return a.exec();
} 
```

。轮廓

```
QT       += core gui
TARGET = device_query
TEMPLATE = app

HEADERS = mainwindow.h
SOURCES += main.cpp\
        mainwindow.cpp
FORMS    += mainwindow.ui

INCLUDEPATH += /usr/local/cuda/include

LIBS += -L/usr/local/cuda/lib64/ -lcudart 
```

为什么我无法通过双击来运行应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:43:25.913

问题可能是通过双击启动应用程序时没有为应用程序设置 $LD_LIBRARY_PATH。在 Nsight Eclipse 版中，我们有一个 shell 脚本来初始化环境，然后启动 IDE - 这样您就可以从桌面菜单启动 Nsight。

# php - jQuery 杀戮功能

> ID：10808463
> 
> 赞同：0
> 
> 时间：2012-05-30T00:16:22.927
> 
> 标签：php, javascript, jquery

我是 JQuery 的新手，所以在这里我有点困惑。我有一个按钮，onclick 运行此功能。当 JQuery 被注释掉时，单击按钮时警报会消失。但是使用 JQuery，单击按钮时不会发出任何警报。我做错了什么？

```
<script type="text/javascript">
function LoadList(type){
    alert(type);
    if(type == "private"){
        //$.post("fileone.php", { page: "private" };
    }else{
        //$.post("fileone.php", { page: "public" } );
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T00:17:47.563

第 5 行存在语法错误，您缺少右括号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T00:19:45.567

您有语法错误。jQuery 的第一行需要一个右括号。检查浏览器中的错误控制台，它会告诉您此类错误。

# c - C循环-可以在循环内更改计数器或条件吗？

> ID：10808469
> 
> 赞同：11
> 
> 时间：2012-05-30T00:16:45.977
> 
> 标签：c

几本书向我展示了如何正确编写 for、while 和 do 循环。许多在线文章将它们相互比较。

但我还没有找到任何地方告诉我不该做什么。例如，如果我在循环中更改计数器或条件变量的值，会不会搞砸？

我想要一个不依赖于机器的答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T00:37:38.763

是的，您可以在循环中更改计数器，它有时非常有用。例如，在解析命令行参数时，其中有一个选项标志后跟一个值。这方面的一个例子如下所示：

输入以下命令：

`program -f filename -o option -p another_option`

代码：

```
#include <string.h>

int main(int argc, char** argv)
{

 char *filename, *option, *another_option;

 if(argc > 1){
   for(int i=1; i<argc; i++){
     if(strcmp(argv[i],"-f")==0){
        filename = argv[++i];
     } else if(strcmp(argv[i],"-o")==0){
       option = argv[++i];
     } else if(strcmp(argv[i],"-p")==0){
       another_option = argv[++i];
     } else {
       printf("Option \"%s\" not recognized, skipping\n",argv[i]);
       continue;
     }
   }
 } /* end if argc > 1 */

 return 0;
} 
```

示例程序自动增加计数器以访问正确的命令行字符串。当然有一些方法可以合并计数器等，但在这种情况下它们只会使代码更加麻烦。

正如其他人指出的那样，这是许多人编写错误的地方，并且在循环内递增计数器时必须小心，特别是当循环以计数器值为条件时。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-30T00:19:04.797

在 C 中的循环内更改循环计数器并非无效。

但是，这可能会让未来的读者感到困惑，这是*不*这样做的一个很好的理由。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-30T00:19:15.280

这取决于您所说的“搞砸”是什么意思。

如果您知道自己在做什么，则可以更改计数器。语言对此没有限制。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-30T00:20:35.747

允许在循环中更改计数器变量，但要小心知道您在做什么，以免在不应该的情况下通过减小变量来创建无限循环。

一些算法实际上从中受益，但当然，如果你这样做，它会使你的代码可读性降低，所以请确保你也评论你正在做的事情。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-30T00:18:58.480

是的，您可以更改计数器和条件变量。它们只会在循环的下一次迭代中进行评估。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-30T01:26:35.830

一定可以。但要注意不要使循环混乱。在循环中更改一个 conter 在 do...while 和 while 中发生了很多。

```
do{
  counter++;
  some expressions;
}
while(counter < SOMEVALUE); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-30T00:19:08.503

是的，在 C/C++/C# 中，您可以在循环中更改计数器等。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-30T00:42:03.290

像许多其他技术一样，只要您知道自己在做什么，就可以了。

例如，这段代码：

```
int i;
for (i=0;i<5;i++)
  printf("%d\n",i--); 
```

是一个无限循环，但是这个版本的冒泡排序：

```
int *arr,n;
//allocate memory, assign values, and store the length of the array in n
int i;
for (i=0;i<n-1;i++)
  if (arr[i]>arr[i+1]) {
    int temp=arr[i];
    arr[i]=arr[i+1];
    arr[i+1]=temp;
    if (i) i-=2;
  } 
```

很好。（这不完全是冒泡排序。我没有使用嵌套循环，而是在交换成员后返回数组）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-09-20T17:34:23.067

小心在循环内更改计数器变量，并非所有循环都相同，“while”循环的行为不同。看到这个例子了吗？

不，它*不是*无限循环（在某些编译器上）。运行它，看看...

```
i=5;
while (i--)
{
    i=100;
    printf("%d \n",i)
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-06-19T14:35:11.593

我们可以更改循环内的计数器值，但最终的计数器值不会被反映，因为 for 循环不会覆盖计数器值。这是 QTP VB 脚本中的示例。

```
iLast = 4
For i= 1 to iLast
iLast=2    
Next 
```

这里 for 循环应该只执行 2 次，因为 iLast 值在循环内更新为 2，但它执行了 4 次。

# ios - 我应该如何在 iOS 中使用 GCD dispatch_barrier_async （似乎在其他块之前而不是之后执行）

> ID：10808476
> 
> 赞同：16
> 
> 时间：2012-05-30T00:17:26.527
> 
> 标签：ios, cocoa-touch, concurrency, objective-c-blocks, grand-central-dispatch

我正在尝试在 iOS5 中同步以下代码：

1.  一个对象有一个方法，它发出一个 HTTP 请求，从中获取一些数据，包括一个图像的 URL
2.  数据到达后，文本数据用于填充 CoreData 模型
3.  同时，异步调度第二个线程来下载图像；当图像已经缓存并在 CoreData 模型中可用时，该线程将通过 KVO 向 viewController 发出信号。
4.  由于图像下载需要一段时间，我们立即将具有除图像之外的所有属性的 CoreData 对象返回给调用者。
5.  此外，当第二个线程完成下载时，可以保存 CoreData 模型。

这是（简化的）代码：

```
- (void)insideSomeMethod
{
    [SomeHTTPRequest withCompletionHandler:
     ^(id retrievedData) 
     {
         if(!retrievedData)
         {
             handler(nil);
         }

         // Populate CoreData model with retrieved Data...

         dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
             NSURL* userImageURL = [NSURL URLWithString:[retrievedData valueForKey:@"imageURL"]];
             aCoreDataNSManagedObject.profileImage = [NSData dataWithContentsOfURL:userImageURL];
         });

         handler(aCoreDataNSManagedObject);
         [self shouldCommitChangesToModel];
     }];
}

- (void)shouldCommitChangesToModel
{
    dispatch_barrier_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
        NSError *error = nil;
        if(![managedObjectContext save:&error]) 
        {
            //  Handle error
        }  
    });
} 
```

但实际情况是基于屏障的保存块总是在图像加载块之前执行。那是，

```
dispatch_barrier_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
            NSError *error = nil;
            if(![managedObjectContext save:&error]) 
            {
                //  Handle error
            }  
        }); 
```

之前执行：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
                 NSURL* userImageURL = [NSURL URLWithString:[retrievedData valueForKey:@"imageURL"]];
                 aCoreDataNSManagedObject.profileImage = [NSData dataWithContentsOfURL:userImageURL];
             }); 
```

所以很明显我并没有真正在屏障之前调度图像加载块，或者屏障会等到图像加载块完成后再执行（这是我的意图）。

我究竟做错了什么？如何确保图像加载块在屏障块之前排队？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-30T00:25:28.600

乍一看，问题可能是您在全局并发队列上分派屏障块。您只能在自己的自定义并发队列上使用屏障块。根据 dispatch_barrier_async 上的 GCD 文档，如果您将一个块分派到全局队列，它将表现得像一个正常的 dispatch_async 调用。

Mike Ash 有一篇关于 GCD 障碍块的好博文：http: [//www.mikeash.com/pyblog/friday-qa-2011-10-14-whats-new-in-gcd.html](http://www.mikeash.com/pyblog/friday-qa-2011-10-14-whats-new-in-gcd.html)

祝你好运

吨

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T00:40:13.987

您需要创建自己的队列，而不是按照 ADC 文档分派到全局队列

> 您指定的队列应该是您使用 dispatch_queue_create 函数自己创建的并发队列。如果您传递给此函数的队列是串行队列或全局并发队列之一，则此函数的行为类似于 dispatch_async 函数。

来自[https://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/c/func/dispatch_barrier_async](https://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/c/func/dispatch_barrier_async)。

你可以创建大量自己的 GCD 队列。gcd 队列非常小，您可以毫无问题地创建大量队列。当你完成它们时，你只需要释放它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T07:16:59.223

对于您似乎试图解决的问题，`dispatch_barrier_async`可能不是最好的解决方案。查看并发编程指南的[Migrating Away From Threads](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/ThreadMigration/ThreadMigration.html#//apple_ref/doc/uid/TP40008091-CH105-SW1)部分。仅`dispatch_sync`在您自己的串行队列上使用可能会解决您的同步问题。或者，您可以使用 NSOperation 和 NSOperationQueue。与 GCD 不同，NSOperation 允许您轻松地管理依赖关系（您可以使用 GCD 来完成，但它会很快变得丑陋）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-21T05:03:09.980

我参加聚会有点晚了，但也许下次你可以尝试使用`dispatch_group`s 来发挥你的优势。[http://www.raywenderlich.com/63338/grand-central-dispatch-in-depth-part-2](http://www.raywenderlich.com/63338/grand-central-dispatch-in-depth-part-2)

# database - 链接表 cakephp

> ID：10808486
> 
> 赞同：1
> 
> 时间：2012-05-30T00:18:20.480
> 
> 标签：database, validation, cakephp, models

大家好，我终于对我的发票模型进行了 100% 的验证，但现在它取消了我在关系模型中的验证（它正在工作），因为现在它引用了错误表中的所有内容。

关系模型应该确保用户在您向他们发送请求之前存在于用户表中。

发票模型应该确保一个用户在关系表中具有另一个用户的列。

如何更改它以使其正常工作？目前，代码完全抛弃了我在网站上的整个关系方面。

-关系模型

```
class Relationship extends AppModel
{

    var $name = 'Relationship';
    public $useTable = 'relationships_users';
    public $primaryKey = 'id';
    public $hasMany = array(
        'Invoice' =>
            array(
                'className'              => 'Invoice',
                'joinTable'              => 'invoice',
                'foreignKey'             => 'invoice_id'));
    public $belongsTo = array(
        'User' =>array(
            'className' => 'User',
            'foreignKey' =>'partyone','partytwo',
            'associationForeignKey'  => 'username',
            )); 

    var $validate = array(
        'date' => array(
            'rule' => array(
                'datevalidation',
                'systemDate'
            ),
            'message' => 'Current Date and System Date is mismatched'
        ),
        'partytwo' => array(
            'userExists' => array(
                'rule' => array(
                    'userExists',
                ),
                'message' => 'That username doesnt exist.'
            ),
        ),
    );

    function datevalidation($field = array(), $compare_field = null)
    {
        if ($field['date'] > $compare_field)
            return TRUE;
        else
            return FALSE;
    }

    function userExists($check)
    {   
        $userExists = $this->User->find('count', array('conditions' => array('User.username'=>$check)));
        if ($userExists == 1) {
           return TRUE;
        }
        else
            return FALSE;
    } 
```

-用户模型

```
 <?php
    App::uses('AuthComponent', 'Controller/Component');

    class User extends AppModel{ 
    public $name = 'User';
    public $hasMany = array(
        'Relationship' =>
            array(
                'className'              => 'Relationship',
                'joinTable'              => 'relationships_users',
                'foreignKey'             => 'id',
                'unique'                 => false,));

    public $useTable = 'users';
    public $primaryKey = 'id';

    public $validate = array(
        'username'=>array(
            'The username must be between 5 and 15 characters.'=>array(
                'rule'=>array('between', 5, 15),
                'message'=>'The username must be between 5 and 15 characters.'
            ),
            'That username has already been taken'=>array(
                'rule'=>'isUnique',
                'message'=>'That username has already been taken.'
            )),
        'email'=>array(
            'Valid email'=>array(
                'rule'=>array('email'),
                'message'=>'Please enter a valid email address'
            )
        ),
        'password'=>array(
            'Not Empty'=>array(
                'rule'=>'notEmpty',
                'message'=>'Please enter your password'
                )
            ),
            'Match passwords'=>array(
            'rule'=>'matchPasswords',
            'message'=>'Your passwords do not match'
            )
            ,
            'password_confirmation'=>array(
            'Not Empty'=>array(
                'rule'=>'notEmpty',
                'message'=>'Please confirm your password'
            )));

    public function matchPasswords($data){
        if ($data['password']==$this->data['User']['password_confirmation']){
        return true;
        }
        $this->invalidate('password_confirmation','Your passwords do not match');
        return false;
    }

    public function beforeSave(){

    if(isset($this->data['User']['password'])){
        $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);
        }
        return true;
    }

    }
    ?> 
```

发票模型-

```
class Invoice extends AppModel{ 
        var $name='Invoice'; 
        //public $useTable = 'invoices';
        //public $primaryKey = 'id';
        public $belongsTo = array(
        'Relationship' =>array(
            'className' => 'Relationship',
            'foreignKey' =>'relationship_id',
            )
        ); 
        var $validate = array(
            'to' => array(
                'relationshipExists' => array(
                    'rule' => array(
                        'relationshipExists',
                        ),
                    'message' => 'sorry you dont have a relationship with that user.'
                    ),
                ),          
            );

            var $validateTwo = array(
            'datecreated'=>array(
                'dateHasntExpired' => array(
                    'rule'=>array(
                        'dateHasntExpired',
                        ),
                    'message'=> 'sorry but your relationship has expired.'
                    ),
                ),
            );

        public function relationshipExists($check){ 

        $relationshipExists=$this->Relationship->find('count', array(
            'conditions' => array(
            'Relationship.partyone <>' => current($check),
            'Relationship.partytwo' => current($check),
        //  'Relationship.active'==true,
            // get the value from the passed var
  )
));
                if ($relationshipExists == true) {
                    return TRUE;
                    }
                else
                    return FALSE;
                    }
        public function dateHasntExpired($check){   
            $dateHasntExpired=$this->Relationship->find('count', array(
            'conditions'=>array(
            'DATE(Relationship.expirydate) > DATE(Invoice.datecreated)',
                )));
                    if ($dateHasntExpired == true) {
                        return TRUE;
                    }
                    else
                        return FALSE;
                    }

    } 
```

这是尝试查看当前关系请求时出现的错误

```
Database Error

Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Invoice.invoice_id' in 'field list'

SQL Query: SELECT `Invoice`.`id`, `Invoice`.`to`, `Invoice`.`biller`, `Invoice`.`subject`, `Invoice`.`description`, `Invoice`.`amount`, `Invoice`.`datecreated`, `Invoice`.`duedate`, `Invoice`.`invoice_id` FROM `pra_cake`.`invoices` AS `Invoice` WHERE `Invoice`.`invoice_id` IN (97, 98, 99, 101, 104, 105)

Notice: If you want to customize this error message, create 
```

应用\查看\错误\pdo_error.ctp

这是我在尝试查看我发送的关系请求时遇到的错误

```
Database Error

Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Invoice.invoice_id' in 'field list'

SQL Query: SELECT `Invoice`.`id`, `Invoice`.`to`, `Invoice`.`biller`, `Invoice`.`subject`, `Invoice`.`description`, `Invoice`.`amount`, `Invoice`.`datecreated`, `Invoice`.`duedate`, `Invoice`.`invoice_id` FROM `pra_cake`.`invoices` AS `Invoice` WHERE `Invoice`.`invoice_id` IN (97, 98, 99, 101, 104, 105)

Notice: If you want to customize this error message, create app\View\Errors\pdo_error.ctp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:35:13.327

需要在我的控制器中使用 unbind 方法，这是我在整个关系控制器中使用的 unbind 方法的示例。

```
public function approve($id=null){
        $this->set('title_for_layout', 'Relationships');
        $this->set('stylesheet_used', 'homestyle');
        $this->set('image_used', 'eBOXLogoHome.jpg');   
        $this->layout='home_layout';
        $this->Relationship->unbindModel(array('hasMany'=>array('Invoice')));
        if ($this->request->is('get')) {
        $this->request->data = $this->Relationship->read(NULL, $id);

        } else {
        //sets active to 1
         $this->Relationship->read(null, $id);
         $this->Relationship->set(array('active' => true,));
        if ($this->Relationship->save($this->request->data)) {

            $this->Session->setFlash('Your post has been updated.');
            $this->redirect(array('action' => 'request'));
        } else {
            $this->Session->setFlash('Unable to update your post.');
        }
    } 
```

因为这在我的发票控制器中引发了错误，所以我在那里也使用了 unbind，这是我在 invoicescontroller 中使用的取消绑定的示例

```
 public function viewInvoice($id = NULL){
        $this->set('title_for_layout', 'View invoice');
        $this->set('stylesheet_used', 'homestyle');
        $this->set('image_used', 'eBOXLogoHome.jpg');
        $this->Invoice->unbindModel(array('belongsTo'=>array('Relationship')));     
        $this->set('invoice', $this->Invoice->read(NULL, $id));
} 
```

# c - 在 Ruby 1.9.3 C gem 中打开文件（套接字）时关闭流（IOError）

> ID：10808487
> 
> 赞同：2
> 
> 时间：2012-05-30T00:18:22.187
> 
> 标签：c, ruby, file, io, gem

下面是代码。它最初是为 1.8.7 编写的，自 2006 年以来就没有被触及过。我已经成功地获得了一个姊妹函数 bt_rfcomm_socket_connect() 工作，但不使用 GetOpenFile()，但如果可能的话，我想用 Ruby Way(tm) 来做。

```
263 static VALUE
264 bt_l2cap_socket_connect(VALUE self, VALUE host, VALUE port)
265 {
266   fprintf(stderr, "connecting!\n");
267     rb_io_t *fptr;
268     int fd;
269 
270     VALUE tmp = rb_check_convert_type(self, T_FILE, "IO", "to_io");
271 
272     fprintf(stderr,"Getting open file\n");
273     GetOpenFile(tmp, fptr);
274 
275     fprintf(stderr, "got open file\n");
276     fd = fptr->fd;
277 
278     fprintf(stderr, "structing\n");
279     struct sockaddr_l2 addr = { 0 };
280     char *dest = STR2CSTR(host);
281 
282     fprintf(stderr, "setting addr info\n");
283     // set the connection parameters (who to connect to)
284     addr.l2_family = AF_BLUETOOTH;
285     addr.l2_psm = (uint8_t) FIX2UINT(port);
286     str2ba( dest, &addr.l2_bdaddr );
287 
288     // connect to server
289     if (connect(fd, (struct sockaddr *)&addr, sizeof(addr)) < 0) {
290       fprintf(stderr, "connected!\n");
291         rb_sys_fail("connect(2)");
292     }
293 
294     return INT2FIX(0);
295 } 
```

以下是发生的情况，即使从 root 运行：

```
bperry@bperry:~/work/rubytooth$ rvmsudo ruby sample_program.rb 
6
Doing something with a port: 4097
connecting!
Getting open file
sample_program.rb:20:in `connect': closed stream (IOError)
    from sample_program.rb:20:in `<main>'
bperry@bperry:~/work/rubytooth$ 
```

# php - dompdf 不从服务器渲染图像，而是从外部源渲染

> ID：10808488
> 
> 赞同：2
> 
> 时间：2012-05-30T00:18:37.727
> 
> 标签：php, image, pdf, codeigniter-2, dompdf

在过去的几天里，我试图弄清楚这一点，但什么也没有。

我有 dompdf 在我的服务器上工作，它可以很好地创建 pdf。唯一的问题是它不会渲染我发送给它的图像。我将 DOMPDF_ENABLE_REMOTE 设置为 TRUE，tmp 文件夹是可写的，并且 get_file_contents 已打开。

现在，您在 dompdf 文件夹中获得的示例可以很好地呈现远程图像，它似乎是来自我的服务器的图像文件，导致了问题。

我试过绝对和相对网址。

我正在通过 codeigniter 运行它，它的 beta 版本是 0.6.0。

这是我的帮手：

```
 function create_pdf($html, $filename, $stream=TRUE) 
   {
    require_once("dompdf/dompdf_config.inc.php");

    spl_autoload_register('DOMPDF_autoload');

    $dompdf = new DOMPDF();
    $dompdf->load_html($html);
    $dompdf->render();
    if ($stream) {
        $dompdf->stream($filename.".pdf");
    } else {
        write_file("./pdf_written_files/$filename.pdf", $dompdf->output());
    }
} 
```

我的控制器功能：

```
function pdf($id)
{
    if($id !== NULL)
    {
        $this->load->helper(array('create_pdf','text'));

        $result = $this->product_model->order_by('order')->get_by(array('id' => $id))? : NULL;
        $collection = $this->collection_model->my_collection($result->id);
        $range = $this->range_model->my_range($result->id);
        $result->collection = $collection;
        $result->range = $range;
        $this->_data['content'] = $result;
        $html = $this->load->view('created_pdf', $this->_data, TRUE);
        create_pdf($html, $result->title);
    }
    else
    {
        echo 'no input found';
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T02:59:10.467

您的图片链接必须使用您的网络文件夹中的相对路径。例如，如果您的 web 文件夹在 /var/www/html/myweb 并且您的 CI 文件夹中的图像在 assets/images 中（与应用程序文件夹处于同一级别），您只需编写相对路径： assets/images/imgname .jpg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T00:25:16.753

我遇到了完全相同的问题，没有为我显示任何图像 - 背景图像和内联图像。我必须`DOMPDF_ENABLE_REMOTE`在`true`你的配置中设置`dompdf_config.inc.php`

如果您同时启用了此功能，请注意安全风险`DOMPDF_ENABLE_PHP`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-01T10:20:24.213

添加以下行

```
$dompdf = new DOMPDF();
$dompdf->set('isRemoteEnabled', true);
$dompdf->load_html($html); 
```

如果这不起作用，则将方法从**set**更改为**set_option**

# c++ - Visual Studio 11（测试版）中的强类型枚举类

> ID：10808497
> 
> 赞同：0
> 
> 时间：2012-05-30T00:19:28.240
> 
> 标签：c++, enums, c++11, standards, visual-studio-2012

我目前正在使用 Visual Studio 11 Beta。我正在使用强类型枚举来描述一些标志

```
enum class A : uint32_t
{
    VAL1 = 1 << 0,
    VAL2 = 1 << 1,
};
uint32_t v = A::VAL1 | A::VAL2;    // Fails 
```

当我尝试按上述方式组合它们时，出现以下错误

```
error C2676: binary '|' : 'A' does not define this operator or a conversion to a type acceptable to the predefined operator 
```

这是编译器的错误还是我根据 c++11 标准尝试的无效？

我的假设是之前的枚举声明将等同于写作

```
struct A
{
    enum : uint32_t
    {
        VAL1 = 1 << 0,
        VAL2 = 1 << 1,
    };
};
uint32_t v = A::VAL1 | A::VAL2;    // Succeeds, v = 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T00:38:44.880

强类型枚举不能隐式转换为整数类型*，即使*它的基础类型是`uint32_t`，您需要显式转换`uint32_t`以实现您正在做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:38:06.160

强类型枚举没有`|`任何形式的运算符。看看那里：[http ://code.google.com/p/mili/wiki/BitwiseEnums](http://code.google.com/p/mili/wiki/BitwiseEnums)

使用这个仅包含标头的库，您可以编写如下代码

```
enum class WeatherFlags {
    cloudy,
    misty,
    sunny,
    rainy
}

void ShowForecast (bitwise_enum <WeatherFlags> flag);

ShowForecast (WeatherFlags::sunny | WeatherFlags::rainy); 
```

添加：无论如何，如果您想要 uint32_t 值，则必须将 bitwise_enum 显式转换为 uint32_t，因为它是 enum 类的用途：限制来自 enum 的整数值，消除一些值检查，除非显式 static_casts 往返于 enum 类-值被使用。

# search - jqGrid filter工具栏搜索

> ID：10808500
> 
> 赞同：2
> 
> 时间：2012-05-30T00:19:48.110
> 
> 标签：search, jqgrid

在尝试`filterToolbar`在 jquery 中实现搜索，但是当我在文本框中写入时，它不会发送值、搜索字段或运算符：我使用了一个示例，这是 html 文件中的代码

```
jQuery(document).ready(function () {
    var grid = $("#list");
    $("#list").jqGrid({
        url:'grid.php',
        datatype: 'xml',
        mtype: 'GET',
        deepempty:true ,
        colNames:['Id','Buscar','Desccripcion'],
        colModel:[
            {name:'id',index:'id', width:65, sorttype: 'int', hidden:true, search:false},
            {name:'examen',index:'nombre', width:500, align:'left', search:true},
            {name:'descripcion',index:'descripcion', width:100, sortable:false, hidden:true, search:false}
        ],
        pager: jQuery('#pager'),
        rowNum:25,
        sortname: 'nombre',
        sortorder: 'asc',
        viewrecords: true,
        gridview: true,
        height: 'auto',
        caption: 'Examenes',
        height: "100%", 
        loadComplete: function() {
            var ids = grid.jqGrid('getDataIDs');

            for (var i=0;i<ids.length;i++) {
                var id=ids[i];
                $("#"+id+ " td:eq(1)", grid[0]).tooltip({
                    content: function(response) {
                        var rowData = grid.jqGrid('getRowData',this.parentNode.id);
                        return rowData.descripcion;
                    },
                    open: function() {
                        $(this).tooltip("widget").stop(false, true).hide().slideDown("fast");
                    },
                    close: function() {
                        $(this).tooltip("widget").stop(false, true).show().slideUp("fast");
                    }
                }).tooltip("widget").addClass("ui-state-highlight");
            }
        }
    });
    $("#list").jqGrid('navGrid','#pager',{edit:false,add:false,del:false});
    $("#list").jqGrid('filterToolbar', {stringResult: true, searchOnEnter: false,
        defaultSearch: 'cn', ignoreCase: true});
}); 
```

并在 php 文件中

```
$ops = array(
    'eq'=>'=', //equal
    'ne'=>'<>',//not equal
    'lt'=>'<', //less than
    'le'=>'<=',//less than or equal
    'gt'=>'>', //greater than
    'ge'=>'>=',//greater than or equal
    'bw'=>'LIKE', //begins with
    'bn'=>'NOT LIKE', //doesn't begin with
    'in'=>'LIKE', //is in
    'ni'=>'NOT LIKE', //is not in
    'ew'=>'LIKE', //ends with
    'en'=>'NOT LIKE', //doesn't end with
    'cn'=>'LIKE', // contains
    'nc'=>'NOT LIKE'  //doesn't contain
);
function getWhereClause($col, $oper, $val){
    global $ops;
    if($oper == 'bw' || $oper == 'bn') $val .= '%';
    if($oper == 'ew' || $oper == 'en' ) $val = '%'.$val;
    if($oper == 'cn' || $oper == 'nc' || $oper == 'in' || $oper == 'ni') $val = '%'.$val.'%';
    return " WHERE $col {$ops[$oper]} '$val' ";

}
$where = ""; //if there is no search request sent by jqgrid, $where should be empty
$searchField = isset($_GET['searchField']) ? $_GET['searchField'] : false;
$searchOper = isset($_GET['searchOper']) ? $_GET['searchOper']: false;
$searchString = isset($_GET['searchString']) ? $_GET['searchString'] : false;
if ($_GET['_search'] == 'true') {
    $where = getWhereClause($searchField,$searchOper,$searchString);
} 
```

我看到了查询，并且`$searchField`, `$searchOper`,`$searchString`没有价值

但是当我使用导航栏上的按钮搜索时，它可以工作！我不知道发生了什么`toolbarfilter`

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:35:22.953

您使用工具栏过滤器`stringResult: true`的[选项](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:toolbar_searching#calling_convention)。在这种情况下，完整的过滤器将在`filters`选项中编码（请参见[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#options)）。此外，没有方法`ignoreCase`选项`toolbarfilter`。有`ignoreCase`jqGrid 的选项，但它仅适用于*本地*搜索的情况。

So you have to change the server code to use `filters` parameter or to remove `stringResult: true` option. The removing of `stringResult: true` could be probably the best way in your case because you have only one searchable column. In the case you will get one additional parameter on the server side: `examen`. For example if the user would type `physic` in the only searching field the parameter `examen=physic` will be send without of any information about the searching operation. If you would need to implement filter searching in more as one column and if you would use different searching operation in different columns you will have to implement searching by [filters](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#options) parameter.

**UPDATED**: I wanted to include some general remarks to the code which you posted. You will have bad performance because of the usage

```
$("#"+id+ " td:eq(1)", grid[0]) 
```

The problem is that the web browser create internally index of elements by id. So the code `$("#"+id+ " td:eq(1)")` can use the id index and will work quickly. On the other side if you use `grid[0]` as the context of jQuery operation the web browser will be unable to use the index in the case and the finding of the corresponding `<td>` element will be much more slowly in case of large number rows.

To write the most effective code you should remind, that jQuery is the wrapper of the DOM which represent the page elements. jQuery is designed to support *common* DOM interface. On the other side there are many helpful *specific* DOM method for different HTML elements. For example DOM of the `<table>` element contain very helpful [rows](http://www.w3schools.com/jsref/dom_obj_table.asp) property which is supported by all (even very old) web browsers. In the same way DOM of `<tr>` contains property [cells](http://www.w3schools.com/jsref/coll_tr_cells.asp) which you can use directly. You can find more information about the subject [here](https://stackoverflow.com/a/7084920/315935). In your case the only thing which you need to know is that jqGrid create additional hidden row as the first row only to have fixed width of the grid columns. So you can either just start the enumeration of the rows from the index 1 (skipping the index 0) or verify whether the class of every row is `jqgrow`. If you don't use subgrids or grouping you can use the following simple code which is equivalent your original code

```
loadComplete: function() {
    var i, rows = this.rows, l = rows.length;

    for (i = 1; i < l; i++) { // we skip the first dummy hidden row
        $(rows[i].cells(1)).tooltip({
            content: function(response) {
                var rowData = grid.jqGrid('getRowData',this.parentNode.id);
                return rowData.descripcion;
            },
            open: function() {
                $(this).tooltip("widget").stop(false, true).hide().slideDown("fast");
            },
            close: function() {
                $(this).tooltip("widget").stop(false, true).show().slideUp("fast");
            }
        }).tooltip("widget").addClass("ui-state-highlight");
    }
} 
```

# php - 为什么 PHP 数组“+”运算符正在重新排序我的整数键，如何避免这种情况？

> ID：10808501
> 
> 赞同：2
> 
> 时间：2012-05-30T00:19:59.003
> 
> 标签：php, arrays

我正在生成一个**虚拟数组**，其中键是时间戳，值是零。开始是今天（没有时间部分的日期）并返回`$days`过去几天：

```
$days  = 10;
$limit = strtotime(date('Y-m-d'));
$start = $limit - (($days - 1) * 86400);

// Dummy array of timestamps and zeroes
$dummy = array_combine(range($start, $limit, 86400), array_fill(0, $days, 0));
var_dump($dummy);

array (size=10)
  1337551200 => int 0
  1337637600 => int 0
  1337724000 => int 0
  1337810400 => int 0
  1337896800 => int 0
  1337983200 => int 0
  1338069600 => int 0
  1338156000 => int 0
  1338242400 => int 0
  1338328800 => int 0 // Today is the last 
```

这个数组将与另一个从 MySQL 结果集中提取的数组合并（并且它的值应该覆盖虚拟值）**：**

```
$keys = array_map(function($e) { return strtotime($e['date']); }, $values);
$vals = array_map(function($e) { return intval($e['count']); },   $values);

// Array of real values coming from database
$reals = array_combine($keys, $vals);
var_dump($reals);

array (size=1)
  1338328800 => int 2 // Today 
```

由于[`array_merge`](http://php.net/manual/en/function.array-merge.php)操作键重新排序（当键`integer`类型时）我切换到`+`数组运算符，并且结果数组被重新排序：新键首先出现：

```
var_dump($reals + $dummy);

array (size=10)
  1338328800 => int 2 // Today become the first
  1337551200 => int 0
  1337637600 => int 0
  1337724000 => int 0
  1337810400 => int 0
  1337896800 => int 0
  1337983200 => int 0
  1338069600 => int 0
  1338156000 => int 0
  1338242400 => int 0 
```

所以**问题**是`+`操作员将这些键放在首位，我如何在不使用排序功能的情况下解决这个问题，如下所示：

```
$merged = $reals + $dummy;
ksort($merged);
var_dump($merged);

array (size=10)
  1337551200 => int 0
  1337637600 => int 0
  1337724000 => int 0
  1337810400 => int 0
  1337896800 => int 0
  1337983200 => int 0
  1338069600 => int 0
  1338156000 => int 0
  1338242400 => int 0
  1338328800 => int 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:29:51.473

作为一种解决方法，您可以使用 格式的字符串键`YYYY-MM-DD`来防止`array_merge()`重新索引。它也比时间戳更具描述性。您可以使用`DatePeriod`轻松创建密钥。

如果您正在寻找最佳解决方案，我会这样做：

```
# begin timestamp
$ts = 1337551200;

# values from database
$values = [
  ['date' => '2012-05-23', 'count' => 42],
  ['date' => '2012-05-26', 'count' => 666]
];

# holds the key=>val pairs
$data = [];

foreach ($values as $value)
{
  $value_ts = strtotime($value['date']);

  # backfill all missing dates
  for ($missing_ts = $ts; $missing_ts < $value_ts; $missing_ts += 86400)
    $data[$missing_ts] = 0;

  # add date from database
  $data[$value_ts] = $value['count'];

  $ts = $value_ts + 86400;
}

# append all remaining dates
for ($now = time(); $ts <= $now; $ts += 86400)
  $data[$ts] = 0; 
```

这只是对数据库中的数据进行一次迭代，并插入值为 0 的缺失键。它仅在`$values`已经排序时才有效，并且取决于天数正好相隔 86400 秒（就像您的原始解决方案一样）。

它可能还没有准备好“复制粘贴”，但它应该让您了解如何以最小的开销实现一次性解决方案。像这样的函数`array_map()`很好地提供了非常简洁的代码，但如果你真的要处理大量数据，我希望这种类型的解决方案会是最有效的。（基准以找出答案。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:24:16.383

那是因为`+`（应用于数组）从右侧数组中追加了左侧数组中不存在的数据。

您使用`var_dump($reals + $dummy);`了 which 意味着：取`$reals`其中包含 1 个项目（今天作为第一个也是唯一的元素）并附加所有`$dummy`具有另一个键的内容。

可能的解决方案是：

1.  对数据进行排序（你提到过）
2.  手动合并，与`foreach`

# wordpress - 单服务器冲突上的 Wordpress + Wordpress 网络

> ID：10808503
> 
> 赞同：2
> 
> 时间：2012-05-30T00:20:20.913
> 
> 标签：wordpress, amazon-ec2, virtualhost, httpd.conf

我在单个 Amazon EC2 服务器上安装了两次 wordpress。其中一个只是常规的 wordpress 安装，另一个是 wordpress 网络安装，安装了 WP Domain Mapping。

假设我有四个域名：site.example.com、multisite.example.com、multisite1.com 和 multisite2.com

所有的域名都指向同一个IP地址。Multisite1.com 和 multisite2.com 是映射到 multisite.example.com wordpress 网络下的博客的域

在我的服务器上 httpd.conf 设置如下：

```
<VirtualHost *:80>
        ServerAdmin root@localhost
        DocumentRoot /persistent/html/site1
        ServerName site.example.com
        ErrorLog logs/site_error_log
        CustomLog logs/site_access_log combined
</VirtualHost>
<VirtualHost *:80>
        ServerAdmin root@localhost
        DocumentRoot /persistent/html/multisite
        ServerName multisite.example.com
        ErrorLog logs/multisite_error_log
        CustomLog logs/multisite_access_log combined
</VirtualHost> 
```

现在，所有域似乎都到了正确的位置——直到我开始进入 wp-admin 面板。

site.example.com/wp-admin 和 multisite.example.com/wp-admin 似乎工作正常。

multisite1.com/wp-admin 和 multisite2.com/wp-admin 似乎都重定向到 site.example.com/wp-admin 而不是 multisite.example.com/wp-admin。

我不知道为什么。我尝试将所有域名作为 ServerAlias 放在虚拟主机中，但似乎没有帮助。我还在 multisite.example.com 下添加了通配符 ServerAlias，但没有运气。

有任何想法吗？我知道这是一个奇怪的安装，但暂时出于其他原因，我必须让它以这种方式工作。我最终会将两者分开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:10:08.033

为您的每个子域或虚拟主机创建一个新的站点可用条目，为每个指向相同 Web 根目录的子域创建一个新的站点并重新加载 apache。之后，一切都会正常工作。例如

```
<VirtualHost *:80>
    ServerAdmin root@localhost
    DocumentRoot /persistent/html/multisite
    ServerName multisite1.com
    ErrorLog logs/multisite_error_log
    CustomLog logs/multisite_access_log combined
</VirtualHost>
<VirtualHost *:80>
    ServerAdmin root@localhost
    DocumentRoot /persistent/html/multisite
    ServerName multisite2.com
    ErrorLog logs/multisite_error_log
    CustomLog logs/multisite_access_log combined
</VirtualHost> 
```

# python - Django 创建报告

> ID：10808505
> 
> 赞同：5
> 
> 时间：2012-05-30T00:20:36.127
> 
> 标签：python, django, report

```
class Beverage(models.Model):
    name=models.CharField(max_length=255)

    def __unicode__(self):
        return self.name

class Location(models.Model):
    name=models.CharField(max_length=255)
    beverages = models.ManyToManyField(Beverage, through='LocationStandard')
    location_number=models.CharField(max_length=255)
    organization=models.CharField(max_length=255)

    def __unicode__(self):
        return self.name

class LocationStandard(models.Model):
    beverage=models.ForeignKey(Beverage)
    location=models.ForeignKey(Location) #elim this or m2m
    start_units=models.IntegerField()
    fill_to_standard=models.IntegerField(max_length=10)
    order_when_below=models.IntegerField(max_length=10)

class Order(models.Model):
    location=models.ForeignKey(Location) #elim this or m2m
    beverage=models.ForeignKey(Beverage)
    units_ordered=models.IntegerField(max_length=10, default=0)
    order_delivered=models.BooleanField(default=False)
    timestamp=models.DateTimeField(auto_now_add=True)
    user=models.ForeignKey(User) 
```

如何生成一个报告，该报告将为我提供一个 HTML 表格，其中 x 轴上的所有位置和 y 轴上的所有饮料。我正在努力解决的主要问题就是要查询什么，我可以传递可以循环的模板。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T00:51:26.753

你不能在一个查询中得到它们，但你可以做类似的事情（不想设置整个环境来测试，所以用它作为线索，而不是一个有效的解决方案）：

```
# you can't do order_by in a template, either do them in the view, or 
# make methods in the model, or make it the Meta default ordering

# print the header, and make sure we got a list of all beverage cached
beverages = Beverage.objects.order_by('name') 
for beverage in beverages:
   print each cell of your header

# print a row for each location
locations = Location.objects.all()
for location in locations:
   print the location name table cell
   location_beverages = iter(location.beverages.order_by('name'))
   # for each beverage, we print a cell. If the beverage is in the 
   # location beverage list, we print a checked cell
   # we use the fact that queryset are iterable to move the cursor
   # only when there is a match
   cur_bev = location_beverages.next()
   for beverage in beverages:
        if beverage == cur_bev:
            print checked table cell
            cur_bev = location_beverages.next()
        else:
            print empty table cell 
```

存储查询集的中间变量非常重要，因为它们允许您从 Django 查询集缓存中受益。

使用 Django 1.4 或更高版本，您可以替换：

```
locations = Location.objects.all() 
```

经过：

```
locations = Location.objects.prefetch_related('beverages') 
```

获得严重的性能提升。

# c# - 数据报包等价物

> ID：10808512
> 
> 赞同：1
> 
> 时间：2012-05-30T00:21:54.093
> 
> 标签：c#, java, datagram

c#中这个java代码的等价物是什么

```
DatagramPacket dp = new DatagramPacket(output,output.length,pack.getAddress(),pack.getPort());
socket.send(dp); 
```

其中pack - DatagramPacket 和socket - DatagramSocket？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T00:58:59.293

[`System.Net.Sockets.UdpClient`](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx)提供用户数据报协议 (UDP) 网络服务。

> UdpClient 类提供了在阻塞同步模式下发送和接收无连接 UDP 数据报的简单方法。由于 UDP 是一种无连接传输协议，因此您无需在发送和接收数据之前建立远程主机连接。但是，您可以选择通过以下两种方式之一建立默认远程主机：
> 
> *   使用远程主机名和端口号作为参数创建 UdpClient 类的实例。
>     
>     
> *   创建 UdpClient 类的实例，然后调用 Connect 方法。

和：

> [`Send(Byte[], Int32)`](http://msdn.microsoft.com/en-us/library/08h8s12k.aspx) 向远程主机发送 UDP 数据报。

或者：

> [`Send(Byte[], Int32, IPEndPoint)`](http://msdn.microsoft.com/en-us/library/82dxxas0.aspx) 向指定远程端点的主机发送 UDP 数据报。

最后一个更接近您的示例代码。

# java - Java：使用 Apache Commons CLI 1.2 的 NoClassDefFoundError

> ID：10808513
> 
> 赞同：3
> 
> 时间：2012-05-30T00:22:02.957
> 
> 标签：java, exception, noclassdeffounderror, apache-commons-cli

我正在使用 Apache Commons CLI 1.2 来解析 Java 中的命令行参数。我`NoClassDefFoundError`在尝试运行我的 java 类时遇到了问题，但通过修复类路径解决了它。

现在我有同样的例外，但关于实际的`commons-cli`类，如下所示：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/cl i/CommandLineParser Caused by:
    java.lang.ClassNotFoundException: org.apache.commons.cli.CommandLineP arser
            at java.net.URLClassLoader$1.run(Unknown Source)
            at java.security.AccessController.doPrivileged(Native Method)
            at java.net.URLClassLoader.findClass(Unknown Source)
            at java.lang.ClassLoader.loadClass(Unknown Source)
            at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
            at java.lang.ClassLoader.loadClass(Unknown Source) Could not find the main class:  com.amirsys.score.api.script.CMDContentPusher. 
```

我唯一能想到的是将类路径设置为 commons-cli jar，但这不起作用。我一直无法找到修复`NoClassDefFoundError`导入类的解决方案。我以为这些被编译成 .class 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:30:24.803

Commons CLI 在运行时不在类路径中。如果您难以获得正确的类路径，您可以尝试将您的应用程序打包为一个包含所有依赖项的大 jar 文件，包括 Commons CLI。有很多工具可以实现这一点（jarjar、onejar、Maven shade 插件......）

# design-patterns - 设计问题：拥有一个具有许多不同子类的类

> ID：10808519
> 
> 赞同：2
> 
> 时间：2012-05-30T00:23:51.507
> 
> 标签：design-patterns, class-design, class-diagram

考虑下面的类图：

```
+--------+     * +------------+ 
| Person |------>|   Property |
+--------+       +------------+
                      ^
                      |
             +--------+------+
             |               |
      +----+----+     +------+-----+
      |   Car   |     |   House    |
      +---------+     +------------+ 
```

Person 有许多属性，包括 Car、House、Smartphone 等。这些属性中的每一个都有不同的属性（Car 有一个引擎大小、型号、年份……House 作为地址、大小等）。有许多子类（属性类型）。

现在我的实现是让 Property 是一个带有类型字段的抽象类。我检查类型并将其转换为正确的子类。

我的问题是：这是唯一的方法吗？这是正确的方法吗？感觉不太对劲，所以请与我分享您的设计想法。一个根本性的改变也将被接受。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T00:41:29.563

这实际上取决于您希望如何使用这些`Property`s，一般或具体（或两者）。如果它们唯一的共同点是可以拥有它们，我希望它们之间有一个公共*接口，**而不是*一个公共基类。然后，您可以将它们存储在一个集合中，并具有作用于集合子集的特定于*能力*的方法，这些方法将首先根据所需的能力过滤集合。*能力*更像是接口和角色，而不是类型和类；*因此，您*可以在想要实现的目标（您的意图）和实现目标的*方式*（您的实施）之间拥有一定程度的独立性。

在伪 C# 代码中，它可能如下所示：

```
interface Property {}
interface Valued {
  Money Value { get; }
}
class Person {
  private Collection<Property> properties;
  public Money TotalValue {
    get {
      return properties.OfType<Valued>().Sum(v => v.Value);
    }
  }
} 
```

`Car`您还可以使用相同的技术按特定类型进行过滤，例如，如果您想对所有 s做某事。更通用的方法可以返回特定类型的所有属性，以便客户端可以使用它们执行某些特定逻辑。

# apache - Apache RewriteCond 似乎被忽略了？

> ID：10808521
> 
> 赞同：1
> 
> 时间：2012-05-30T00:24:14.000
> 
> 标签：apache, mod-rewrite

我有以下代码：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/$
RewriteCond %{REQUEST_URI} !^/wp-admin
RewriteRule ^(.+)$ http://example.com/$1 [R=permanent,L] 
```

我已经尝试了上述的各种变体，但目前 wp-admin 重写条件被忽略了。

我不想重定向“/wp-admin”目录和“/”根请求！（是的，我知道，听起来很时髦）

我在上面的 mod_rewrite 做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T02:59:01.933

我的错。

对于任何有类似情况的人，您还需要

```
RewriteCond %{REQUEST_URI} !^/wp-login 
```

（因为 wp-admin 重定向到 wp-login）

# php - 需要一种在 Facebook iFramed 应用页面上捕获滚动事件的解决方案

> ID：10808523
> 
> 赞同：1
> 
> 时间：2012-05-30T00:24:31.643
> 
> 标签：php, jquery, facebook, cross-domain, facebook-iframe

我在 Facebook 中开发了一个应用程序页面，当然它位于`iFrame`. 我希望能够`iFrame`在页面滚动（主页/画布页面）时影响内容中的元素。使用 jQuery，内容页面中的代码将是：

```
parent.$(window).scroll(function(){
    do something
}); 
```

在正常情况下`iFrame`，父窗口和父窗口在同一个域中，这是可行的，但由于不同域之间的安全限制，这是不允许的。我在网上广泛搜索并没有找到任何解决方案。是否有任何跨域修复，或任何编码方式以简单地允许捕获主页的滚动事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:45:00.737

我与这个确切的问题进行了广泛的斗争。对于我的情况，当用户在页面之间切换时，我想删除滚动条并滚动到页面顶部。我在 /head 标签之前使用了这段代码。

```
<script type="text/javascript">
window.fbAsyncInit = function() {
  FB.Canvas.setSize({height: 1000});
  FB.Canvas.scrollTo(0,0);
}
</script> 
```

正如您所了解的，问题是跨站点攻击。因此，例如，Firefox 不允许任何此类属性。这完全取决于你想做什么。如果您回复一些有关您尝试执行的操作的更多信息，也许我可以提供更多建议。真正的底线是您将不得不创建某种黑客来完成您的任务，并且您的任务完全有可能根本无法完成。得知这一变化，我感到非常沮丧。我认为 Chrome 也已弃用此功能，并将很快将其全部停止。

布兰登

# passwords - H2的设置密码

> ID：10808525
> 
> 赞同：12
> 
> 时间：2012-05-30T00:24:42.327
> 
> 标签：passwords, h2

如何设置我自己的密码以在嵌入式模式下访问 h2？

（如果有人感到困惑 - 谈论访问数据库的 root 密码）

在 Eclipse 中，密码分配似乎发生在创建数据库连接的那一刻，这反过来又启动了模式创建过程，我们在其中提供用户名和密码。

即使这是真的，如何在设置后更改现有密码？我在信息架构中搜索过 - 找到了“用户”，但没有密码列。

这个过程似乎真的很奇怪，我错过了什么。在 PostgreSQL 中，这是一种更容易的方式。

所以问题是：

1.  密码是在创建新模式时分配的？

2.  如何更改当前用户的密码？

我怀疑它是通过查询完成的，我相信它会有特定的语法，如果是这种情况，我也会喜欢示例查询，因为我还不熟悉这个 SQL 实现。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-30T00:43:28.517

哦，我想生活并没有那么糟糕:-)。

发现于：

[http://www.h2database.com/html/grammar.html#alter_user_set_password](http://www.h2database.com/html/grammar.html#alter_user_set_password)

要更改它，我们显然必须能够连接到数据库（知道用户名和密码），正如我所说，这些是我们在连接设置期间使用的。

然后创建类似的 sql 片段 **ALTER USER admin SET PASSWORD 'superPw';**

我个人认为这些高级操作必须允许在向导中完成。希望这可以帮助。

# sql - 简单集合枚举的 MS SQL row_number/rank 替代方案

> ID：10808526
> 
> 赞同：0
> 
> 时间：2012-05-30T00:25:00.913
> 
> 标签：sql, cursor

我正在尝试使用 row_number 或 rank 来插入行号，这样我就可以在不使用游标的情况下枚举临时表。这两个函数都给我错误“'rank'附近的语法不正确，预期'OVER'”。我不需要 OVER 提供的所有功能 + 性能影响 - 我一点也不关心订单/排名等。我确定我以前做过，但那是几年前的事了，有人能指点我吗到正确的功能？

```
declare @SomeTempTable table (RowNum int NOT NULL, SomeField int NOT NULL);

insert into @SomeTempTable
  select rank() as RowNum, SomeField
  from SomeTable 

declare @RowNum int = 1;
declare @NumRows int = (select max(RowNum) from @SomeTempTable);

while@RowNum <= @NumRows
begin
  declare @SomeField int;

  select @SomeField = SomeField
  from @SomeTempTable
  where RowNum = @RowNum;

  --TODO: Do stuff  

  set @RowNum = @RowNum + 1;               
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:43:05.873

嗯，您无法决定 SQL 函数的语法，即使它对您很有吸引力。

有两种方法可以得到你想要的。第一种是标准方法，根本不使用 windows 函数：

```
declare @SomeTempTable table (
    RowNum int identity(1,1) not null,
    SomeField int NOT NULL
);

insert into @SomeTempTable(SomeField)
     select SomeField
     from SomeTable 
```

瞧！让身份发挥作用。

第二个是您采取的方法：

```
insert into @SomeTempTable(RowNum, SomeField)
    select row_number() over (order by (select NULL)) as RowNum, SomeField
    from SomeTable 
```

“order by (Select NULL)”似乎是 SQL Server 中的一个神奇咒语，它只分配数字，而不实际进行排序。

顺便说一句，当您进行插入时，您应该始终在插入语句中指定列。

此外，WHILE 循环很有可能被重写为查询，从而使一切变得更加高效（并非总是如此，但有时）。

# web-services - Salesforce 使用 oauth 作为会话 ID 报告访问

> ID：10808527
> 
> 赞同：4
> 
> 时间：2012-05-30T00:25:12.843
> 
> 标签：web-services, oauth, report, salesforce, force.com

我正在尝试使用 oauth 令牌访问 salesforce 报告数据。前段时间它工作得很好，我使用 oauth 令牌作为会话 ID。

```
...
URL remoteFile = new URL(instanceURL + "/" + reportId + "?export=1&enc=UTF-8&xf=csv");
URLConnection fStream = remoteFile.openConnection();
fStream.setRequestProperty("Cookie", "sid=" + accessToken);
... 
```

但它不起作用，每次我尝试访问该 URL 时，它都会返回一个与登录页面相对应的 html 页面。有什么方法可以使用 oauth access_token 访问报告数据（不是元数据）？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T01:10:54.450

为了使用带有此类 URL 的令牌，您需要[将 scope 参数设置为 include`web`](https://ap1.salesforce.com/help/doc/en/remoteaccess_oauth_scopes.htm)：

> web 允许在 Web 上使用 access_token。

[oAuth 用户代理流程文档](https://ap1.salesforce.com/help/doc/en/remoteaccess_oauth_user_agent_flow.htm)详细说明了`scope`指定参数的位置。

# jquery - jQuery Horizo ntal liteAccordion

> ID：10808529
> 
> 赞同：1
> 
> 时间：2012-05-30T00:25:43.560
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-ui-accordion

我无法让它正常工作。这准确地显示了它在网站[http://nicolahibbert.com/demo/liteAccordion/](http://nicolahibbert.com/demo/liteAccordion/)下的“基本实现”下的显示方式，这只是一个常规的有序列表。我今天早些时候在一个网站上实现了这一点，效果很好，但现在我在家并试图对另一个网站做这件事，但它不起作用。

这是一些代码....

```
<head>
<meta charset="utf-8" />
<title>506 Media</title>
<link rel="stylesheet" type="text/css" href="/Content/CSS/Site.css" />
<link rel="stylehseet" type="text/css" href="/Content/CSS/liteaccordion.css" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="/Scripts/modernizr-1.7.min.js"></script>
<script type="text/javascript" src="/Scripts/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="/Scripts/liteaccordion.jquery.min.js"></script>
<script type="text/javascript">
    $(function () {
        $('#content-container').liteAccordion();
    });
</script>
</head> 
```

这里还有一些 html...

```
<div id="content-container">
<ol>
    <li>
        <h2><span>Slide One</span></h2>
        <div>
            Test 1
        </div>
    </li>
    <li>
        <h2><span>Slide Two</span></h2>
        <div>
            Test 2
        </div>
    </li>
</ol>
</div> 
```

我尝试在正文中添加脚本并且没有 $(function() ，因为它显示在网站上，什么都没有。只是一个普通的有序列表。也没有 javascript 错误。我做错了什么？

编辑：此外，当我在页面运行后检查源代码时，没有任何内容应用于应该具有一些类和样式属性的 html，因此 .liteAccordion() 对我的 div 没有任何作用......但同样，没有错误?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:40:27.043

如果没有您引用的文件夹结构，听起来您的脚本或 CSS 文件在基于标签中的 url 加载页面时无法识别。在您喜欢的浏览器中打开页面，按 F12，根据浏览器选择“资源”或“脚本”选项卡，查看是否有任何文件旁边有红色 x。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:50:58.707

好吧，在重新检查资源之后，它们中的任何一个都没有红色 x，但确实意识到类和未应用于制作手风琴的 html 的内容。我意识到它正在工作，但没有应用 CSS 并重新检查我的资源，所需的样式表不在列表中，尽管它在 HTML 标题中。问题是，正如您在上面发布的代码中看到的那样......

```
<link rel="stylehseet" type="text/css" href="/Content/CSS/liteaccordion.css" />
// Should Be
rel="stylesheet" 
```

这是让我们发疯的最明显的小事。

# mongodb - 如何按 MongoDB 中嵌入文档的长度进行过滤？

> ID：10808530
> 
> 赞同：1
> 
> 时间：2012-05-30T00:25:43.640
> 
> 标签：mongodb, mongoose

例如，这里给出 BlogPost/Comments 模式：

[http://mongoosejs.com/](http://mongoosejs.com/)

我如何找到所有评论超过 5 条的帖子？我尝试了一些类似的东西

```
where('comments').size.gte(5) 
```

但我被语法绊倒了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T00:31:52.970

MongoDb 不支持使用大小运算符 ( [Link](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24size) ) 进行范围查询。他们建议您创建一个单独的字段来包含您自己增加的列表的大小。

> 您不能使用 $size 查找大小范围（例如：具有超过 1 个元素的数组）。如果您需要查询范围，请创建一个额外的大小字段，当您添加元素时会增加该字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:03:50.803

请注意，对于某些查询，仅使用 (n)or 条件列出您想要包含或排除的所有计数可能是可行的。

在您的示例中，以下查询将提供超过 5 条评论的所有文档（使用标准 mongodb 语法，而不是 mongoose）：

```
db.col.find({"comments":{"$exists"=>true}, "$nor":[{"comments":{"$size"=>4}}, {"comments":{"$size"=>3}}, {"comments":{"$size"=>2}}, {"comments":{"$size"=>1}}, {"comments":{"$size"=>0}}]}) 
```

显然，这是非常重复的，所以它只对小的边界有意义，如果有的话。按照 mongodb 文档中的建议，保留一个单独的计数变量通常是更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-30T14:53:01.967

它很慢，但您也可以使用[$where](http://docs.mongodb.org/manual/reference/operator/query/where/)子句：

```
db.Blog.find({$where:"this.comments.length > 5"}).exec(...); 
```

# javascript - 我没有从 getJSON 函数中得到任何数据

> ID：10808531
> 
> 赞同：0
> 
> 时间：2012-05-30T00:25:46.730
> 
> 标签：javascript, jquery, ajax, json

我正在尝试从 .jsp 页面获取 JSON 对象。但我不知道该怎么办。我已经在谷歌上搜索了一段时间，但我无法找出这个 getJSON 函数的作用。

它是否返回 JSON 对象的字符串表示形式？

或者传递给函数的参数'json'是JSON对象？

函数（第二个参数）是否等同于使用 XMLHttpRequests 时编写的函数？换句话说; 这个函数是异步部分吗？

不打印带有“JSON 内容”的警报。

```
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript">
    function checkUni() {

        var URL = "http://localhost:8080/GradSchoolApp/test.jsp";

        var jso = $.getJSON(URL, function(json) {
            alert("JSON stuff " + json.name);
        });

        alert(jso);
        //alert(jso.name);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:30:44.560

需要检查的几件事：

webapp 是否也在 localhost:8080 上运行？如果不是，您可能与同源策略发生冲突，在这种情况下，您需要编码为 jsonp。

您还应该检查 firebug/inspect element/whatever 以确保您实际上从您的请求中得到了返回的东西。您可以在网络或资源选项卡中执行此操作，具体取决于您使用的浏览器。还要在警报之前在脚本中设置断点并检查 json 对象以查看是否返回了任何内容。

第二个警报没有触发，因为调用它时 json 对象还不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T00:34:21.827

相关文档`getJSON`在[这里](http://api.jquery.com/jQuery.getJSON/)。回调参数（您命名为`json`）是已经解码的数据（即它是一个 JavaScript 对象，而不是字符串）。

至于为什么您的警报没有做任何事情，请参阅 Charles Bandes 的回答。为了更好地调试您的代码，您还可以使用`console.log`（将在 Firebug 或 Chrome 上工作），和/或将处理程序设置为[`ajaxError`](http://api.jquery.com/ajaxError/)- 因此，如果问题出在您的请求上，您可以收到错误通知（而不是浏览器忽略它默认）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T00:36:12.957

> 它是否返回 JSON 对象的字符串表示形式？

响应将以 JSON 格式出现。`getJSON`方法是 jQuery ajax 的一种缩写形式，其数据类型为`json`. 数据类型决定了从 ajax 调用**接收结果的格式。**

> 传递给函数的参数“json”是 JSON 对象吗？

回调函数中的变量 json 将从您的 ajax 调用中获得响应。数据应该在一个有效的`JSON`文档中（如果您的服务器页面正确返回）

> 这个函数是异步部分吗？

正如我之前告诉过你的，`getJSON`它是 jquery ajax 的缩写，数据类型为 Json。**它是异步的。**

# google-api - 使用 Freebase MQL 读取 google api 的非唯一查询

> ID：10808534
> 
> 赞同：4
> 
> 时间：2012-05-30T00:26:28.570
> 
> 标签：google-api, freebase, mql

看来我只能使用新的 freebase MQL 读取 api 进行唯一查询（即在查询中包含实体 id）：

以下对 id 和 type 的搜索：

```
https://www.googleapis.com/freebase/v1/mqlread?query={"name":null,"id":"/en/bob_dylan","type":"/people/person"} 
```

并成功返回：

```
{
"result": {
"type": "/people/person", 
"id": "/en/bob_dylan", 
"name": "Bob Dylan"
}
} 
```

以下仅使用类型搜索：

```
https://www.googleapis.com/freebase/v1/mqlread?query={"name":null,"type":"/people/person"} 
```

或者

```
https://www.googleapis.com/freebase/v1/mqlread?query={"name":[],"type":"/people/person"} 
```

并返回以下错误：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "badRequest",
    "message": "Unique query may have at most one result. Got 100"
   }
  ],
  "code": 400,
  "message": "Unique query may have at most one result. Got 100"
 }
} 
```

我希望它会返回一个人名列表

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T00:47:42.983

您必须将查询包装在 [ ] 中，如下例所示：

```
https://www.googleapis.com/freebase/v1/mqlread?query=[{"name":[],"type":"/people/person"}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T22:53:19.853

我最近也遇到了类似的问题。确保获得单个结果集的最佳方法是在 mql 查询中使用“limit:1”参数。例如：

```
https://www.googleapis.com/freebase/v1/mqlread?query={"type":[],"name":"india","limit":1} 
```

# mysql - 如何将多行分组和连接成 20 组

> ID：10808536
> 
> 赞同：3
> 
> 时间：2012-05-30T00:26:49.867
> 
> 标签：mysql, sql, group-by, concatenation, break

我有一个只有数字 ID 的表

```
ID
1
2
3
4
5
6
7
8
9
10 
```

我想将这个 id 分解并连接（组）成 5s 或 20s 的组，ej。

```
GROUPS
1,2,3,4,5
6,7,8,9,10
11,12,13,14,15 
```

我怎样才能用 SQL 做到这一点？

**更新：**

带有排序 ID 的 SELECT

```
 SELECT GROUP_CONCAT(id ORDER BY id) AS GROUPS
  FROM `test`
  GROUP BY (id - 1) DIV 5 
```

结果：

```
 GROUPS
  1,2,3,4,5
  6,7,8,9,10
  11,12,13,14,15
  16,17,18,19,20
  21,22,23,24,25
  26,27,28,29,30
  31,32,33,34,35 
```

选择第二个未排序的表

```
 SELECT GROUP_CONCAT(id ORDER BY id) AS GROUPS
  FROM `test2`
  GROUP BY (id - 1) DIV 5 
```

结果：

```
 GROUPS
  3,5
  10
  12
  16
  23,24,25
  32,35
  43,44
  47
  55
  61
  68,70
  77
  84
  89
  91,92,95
  97,100 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:34:06.163

对于 MySQL：

```
SELECT GROUP_CONCAT(id ORDER BY id) AS GROUPS
FROM yourtable
GROUP BY (id - 1) DIV 5 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/b6541/6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T01:36:34.963

对于未排序的 ID：

```
SET @rank=0;
SELECT
    id,
    @rank:=@rank+1 AS rank,
    GROUP_CONCAT(id ORDER BY id) AS GROUPS
FROM  `test2`
GROUP BY (@rank ) DIV 5 
```

结果：

```
+----+------+----------------+
| id | rank | GROUPS         |
+----+------+----------------+
|  1 |    1 | 1,3,5,7,9      |
| 13 |    7 | 11,13,15,17,19 |
| 29 |   15 | 21,23,25,27,29 |
| 31 |   16 | 31,33,35,37,39 |
| 45 |   23 | 41,43,45,47,49 |
| 51 |   26 | 51,53,55,57,59 |
| 61 |   31 | 61,63,65,67,69 |
| 77 |   39 | 71,73,75,77,79 |
| 81 |   41 | 81,83,85,87,89 |
| 93 |   47 | 91,93,95,97,99 |
+----+------+----------------+ 
```

非常感谢您的帮助，没有您的帮助我无法知道！

# netbeans - 无法使用带有 Netbeans 的 phpdocumentor 2 生成文档

> ID：10808537
> 
> 赞同：3
> 
> 时间：2012-05-30T00:27:11.420
> 
> 标签：netbeans, phpdoc

使用 Netbeans“生成 PHPDoc”，我能够为我的项目生成 structure.xml，但我不知道如何从该 XML 文件获取完全生成的 phpdoc。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:19:59.300

我终于能够生成我的 HTML 文件了。我只需要通过在 WAMP 中编辑 php.ini 来手动激活 XSL 扩展。

我必须承认，由于我缺乏命令行技能，因此很难按照网上给出的说明进行操作。

# php - Zend Server 在应用部署过程中如何处理数据库迁移

> ID：10808538
> 
> 赞同：2
> 
> 时间：2012-05-30T00:27:32.970
> 
> 标签：php, migration, zend-studio, zend-server

所以我一直在使用 Zend Server 来部署和管理我的 PHP 应用程序。应用程序的部署和回滚有点简洁，但是如果有数据库迁移，它是如何处理的呢？有没有人有任何经验或知道解释它的网站？数据库回滚如何？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:06:16.027

您需要编写自己的部署和回滚脚本。Zend Server 不会以任何方式帮助您。它只提供挂钩脚本入口点。

我上周在法兰克福的 IPC 上就这个问题向 Zend 的 Eric Ritchie 询问了这个问题，他就是这么告诉我的。

# c# - XPath - 选择两个节点之间的第一组同级

> ID：10808550
> 
> 赞同：2
> 
> 时间：2012-05-30T00:29:48.727
> 
> 标签：c#, xml, xpath, siblings

我在使用 XPath 查询 C# 中的一些 HTML 文件时遇到了一个小问题。

好的，首先这是一个示例 HTML：

```
<table id="theTable">
    <tbody>
        <tr class="theClass">A</tr>
        <tr class="theClass">B</tr>
        <tr>1</tr>
        <tr>2</tr>
        <tr>3</tr>
        <tr>4</tr>
        <tr>5</tr>
        <tr class="theClass">C</tr>
        <tr class="theClass">D</tr>
        <tr>6</tr>
        <tr>7</tr>
        <tr>8</tr>
        <tr>9</tr>
        <tr>10</tr>
        <tr>11</tr>
        <tr>12</tr>
        <tr>13</tr>
        <tr>14</tr>
        <tr>15</tr>
        <tr class="theClass">E</tr>
        <tr class="theClass">F</tr>
        <tr>16</tr>
        <tr>17</tr>
        <tr>18</tr>
        <tr>19</tr>
        <tr>20</tr>
        <tr>21</tr>
        <tr>22</tr>
    </tbody>
</table> 
```

现在，我要做的是只获取 B 和 C 节点（1、2、3、4、5）之间的那些元素。

这是我到目前为止所尝试的：

```
using System;
using System.Xml.XPath;

namespace Test
{
    class Test
    {
        static void Main(string[] args)
        {
            XPathDocument doc = new XPathDocument("Test.xml");
            XPathNavigator nav = doc.CreateNavigator();

            Console.WriteLine(nav.Select("//table[@id='theTable']/tbody/tr[preceding-sibling::tr[@class='theClass'] and following-sibling::tr[@class='theClass']]").Count);
            Console.WriteLine(nav.Select("//table[@id='theTable']/tbody/tr[preceding-sibling::tr[@class='theClass'][2] and following-sibling::tr[@class='theClass'][4]]").Count);

            Console.ReadKey(true);
        }
    }
} 
```

这段代码在上面的 HTML 上运行，输出 19 和 5。所以只有第二个 XPath 表达式有效，但这只是因为它搜索具有两个元素的元素，`class=theClass`它们前面有两个元素，后面有 4 个元素。

我的问题现在开始。我想编写一个表达式，它只返回`<td class="theClass"></td>`标签之后的第一组元素，无论后面有多少组。

如果我在这个 HTML 上运行我的代码

```
<table id="theTable">
    <tbody>
        <tr class="theClass">A</tr>
        <tr class="theClass">B</tr>
        <tr>1</tr>
        <tr>2</tr>
        <tr>3</tr>
        <tr>4</tr>
        <tr>5</tr>
        <tr>6</tr>
    </tbody>
</table> 
```

它将输出 0 和 0。

所以不好。

有人有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T04:41:20.593

> 现在，我要做的是只获取那些在`B`和`C`节点之间的元素

**使用这个单一的 XPath 表达式**：

```
 /*/*/tr[.='B']
           /following-sibling::*
             [count(.|/*/*/tr[. ='C']/preceding-sibling::*)
             =
              count(/*/*/tr[. ='C']/preceding-sibling::*)
             ] 
```

**这是一个基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
  "/*/*/tr[.='B']
           /following-sibling::*
             [count(.|/*/*/tr[. ='C']/preceding-sibling::*)
             =
              count(/*/*/tr[. ='C']/preceding-sibling::*)
             ]
  "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于第一个提供的 XML 文档时：**

```
<table id="theTable">
    <tbody>
        <tr class="theClass">A</tr>
        <tr class="theClass">B</tr>
        <tr>1</tr>
        <tr>2</tr>
        <tr>3</tr>
        <tr>4</tr>
        <tr>5</tr>
        <tr class="theClass">C</tr>
        <tr class="theClass">D</tr>
        <tr>6</tr>
        <tr>7</tr>
        <tr>8</tr>
        <tr>9</tr>
        <tr>10</tr>
        <tr>11</tr>
        <tr>12</tr>
        <tr>13</tr>
        <tr>14</tr>
        <tr>15</tr>
        <tr class="theClass">E</tr>
        <tr class="theClass">F</tr>
        <tr>16</tr>
        <tr>17</tr>
        <tr>18</tr>
        <tr>19</tr>
        <tr>20</tr>
        <tr>21</tr>
        <tr>22</tr>
    </tbody>
</table> 
```

**计算 XPath 表达式并将选定节点复制到输出：**

```
<tr>1</tr>
<tr>2</tr>
<tr>3</tr>
<tr>4</tr>
<tr>5</tr> 
```

**说明**：

这里我们简单地使用*节点集交集的 Kayessian 公式*：

```
$ns1[count(.|$ns2) = count($ns2)] 
```

我们替换`$ns1`为：

```
 /*/*/tr[.='B']
               /following-sibling::* 
```

我们替换`$ns2`为：

```
/*/*/tr[. ='C']/preceding-sibling::* 
```

**第二个问题**：

> 我的问题现在开始。我想编写一个表达式，它只返回`<td class="theClass"></td>`标签之后的第一组元素，无论后面有多少组。

**再次存在选择这些元素的单个 XPath 表达式**：

```
 /*/*/tr[@class='theClass'
         and
           following-sibling::*[1][self::tr[not(@*)] ]
           ][1]
             /following-sibling::tr
               [not(@*)
              and
                count(preceding-sibling::tr
                       [@class='theClass'
                      and
                        following-sibling::*[1][self::tr[not(@*)] ]
                       ]
                     )
                = 1
               ] 
```

**说明**：

这将选择第一个元素的所有后续兄弟`tr`元素（满足多个条件），`*/*/tr`其`class`属性具有字符串值`"theClass"`，并且其第一个后续元素兄弟是`tr`没有属性的 a。

这些被选中的`tr`元素还满足两个条件：1）它们没有任何属性；2）它们只有一个前面的兄弟`tr`元素，其`class`属性具有字符串 value `"theClass"`。

**这是基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
  "/*/*/tr[@class='theClass'
         and
           following-sibling::*[1][self::tr[not(@*)] ]
           ][1]
             /following-sibling::tr
               [not(@*)
              and
                count(preceding-sibling::tr
                       [@class='theClass'
                      and
                        following-sibling::*[1][self::tr[not(@*)] ]
                       ]
                     )
                = 1
               ]
  "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于第二个提供的 XML 文档时**：

```
<table id="theTable">
    <tbody>
        <tr class="theClass">A</tr>
        <tr class="theClass">B</tr>
        <tr>1</tr>
        <tr>2</tr>
        <tr>3</tr>
        <tr>4</tr>
        <tr>5</tr>
        <tr>6</tr>
    </tbody>
</table> 
```

**再次输出所需且正确选择的元素：**

```
<tr>1</tr>
<tr>2</tr>
<tr>3</tr>
<tr>4</tr>
<tr>5</tr>
<tr>6</tr> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T01:02:12.700

如果您不必使用 XPath，则某些 LINQ 可能更容易正确使用并且更具可读性。

在您的情况下，类似于以下伪代码的 Skip 和[TakeWhile组合可以工作：](http://msdn.microsoft.com/en-us/library/bb534804.aspx)

```
nav.Select("//table[@id='theTable']/tbody/tr") // whatever to get list of all TR
   .Skip("theClass is B") // some condition to skip up to first node
   .TakeWhile("theClass is C"); // some condition to take upto second node. 
```

# java - HtmlUnit - 在 src 文件夹中找不到类，但在测试文件夹中运行

> ID：10808553
> 
> 赞同：0
> 
> 时间：2012-05-30T00:30:33.543
> 
> 标签：java, maven, htmlunit

我正在使用 Maven/Eclipse 在 Java 中编程。

从单元测试运行时，我能够很好地运行 HtmlUnit。（测试/）

但是，当我尝试在 src/ 文件夹中使用相同的代码时，我会收到`java.lang.NoClassDefFoundError`消息。我能够解决它们的唯一方法是手动将所有 jar 添加到构建路径中。但这对我来说没有意义，因为 jar 文件显示在我的 Maven 依赖项中。

pom.xml （实际的 pom 文件中有更多的依赖项）

```
<dependency>
    <groupId>net.sourceforge.htmlunit</groupId>
    <artifactId>htmlunit</artifactId>
    <version>2.9</version>
    <scope>test</scope>
</dependency> 
```

HtmlUnit 代码示例块

```
WebClient webClient = new WebClient();
HtmlPage page = webClient.getPage(url);
System.out.println("Executing Pages JavaScript for " + config.executeJavaScriptTime + " seconds...");                       webClient.waitForBackgroundJavaScript(config.executeJavaScriptTime);
dom = cleaner.clean(page.asXml());
html = cleaner.getInnerHtml(dom);
webClient.closeAllWindows(); 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:04:00.903

应用于您的依赖项的测试范围意味着它在编译类路径中不可用。这样，您发布的代码不依赖于测试代码。更完整的解释可以在[这里](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)找到。如果您正在构建的项目仅用于测试，则应删除范围标记以使其采用默认范围，编译。但总的来说，从 src 构建的传送代码不应该依赖于测试库 JUnit，这是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:03:50.777

到目前为止，我发现的唯一可行的方法是创建一个注释为的方法`@Test`并将爬虫作为 JUnit 测试运行。

IE

```
public class Crawler() {

    @Test
    public void runAsTest() {
        Crawler crawler = new Crawler();
        String[] urls = new String[]{
                "http://www.url.com/1",
                "http://www.url.com/2",
                "http://www.url.com/3"
            };
        crawler.crawl(urls);
        try {
            Thread.sleep(1000 * 60 * 15); // without this the unit test exits too early
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

  // the rest of the class definition

} 
```

我希望能够从标准的主要方法运行它，即

```
public class Crawler() {

    public static void main(String[] args) {
        Crawler crawler = new Crawler();
        String[] urls = new String[]{
                "http://www.url.com/1",
                "http://www.url.com/2",
                "http://www.url.com/3"
            };
        crawler.crawl(urls);
        try {
            Thread.sleep(1000 * 60 * 15); // without this the unit test exits too early
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

  // the rest of the class definition

} 
```

# c# - WebRequest.Proxy - 默认值是什么

> ID：10808556
> 
> 赞同：0
> 
> 时间：2012-05-30T00:30:40.147
> 
> 标签：c#, .net

背景：我们在远程站点安装了一项服务，该服务开始无法调用外部 Web 服务。根据现场网络\支持工程师的说法，不需要代理，但是在尝试执行 WebRequest 时会返回异常：

```
System.Net.WebException: The remote server returned an error: (407) Proxy Authentication Required. 
```

异常是相对不言自明的，但是看代码，在调用 WebRequest 时没有指定代理，在 app.config 文件中也没有定义代理。

参考 WebRequest.Proxy 的 MSDN 文档：

*“用于代理请求的 IWebProxy 对象。通过调用 GlobalProxySelection.Select 属性设置默认值。”*

然后参考 GlobalProxySelection.Select 的文档：

*“获取或设置全局 HTTP 代理。”*

并且鉴于 GlobalProxySelection.Select 没有在应用程序的任何地方设置，默认值从何而来？还有其他可以设置全局 HTTP 代理的全局配置文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:08:14.330

虽然这不能直接解决您的问题，但我可以建议`<defaultProxy />`您在 app.config / web.config 下尝试一个元素`<system.net>`-`useDefaultCredentials="true"`这很可能让您的应用程序通过代理进行身份验证，因此根本不需要特殊的绕过规则。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.net>
    <defaultProxy useDefaultCredentials="true" />
  </system.net>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:17:38.720

您必须手动设置代理。如果您想使用默认系统代理，您可以执行以下操作。（Windows 中的 Internet 设置）

`myRequest.Proxy = WebRequest.GetSystemWebProxy();`

您收到错误是因为您的网络在不使用代理的情况下直接阻止了对服务器的访问。

# mysql - 在大表中为每组选择一个随机行

> ID：10808558
> 
> 赞同：3
> 
> 时间：2012-05-30T00:30:47.463
> 
> 标签：mysql, database, random, group-by, large-data

我有一个非常大的表（超过 10M 甚至 100M 记录），其中包含以下模式：

id int 主键，规则 int

并希望为每个规则选择一个随机条目。我尝试了这个查询，但这需要很长时间（treenode 是表的名称）：

```
SELECT tmp.id,tmp.rule FROM treenode
LEFT JOIN (SELECT * FROM treenode ORDER BY RAND()) tmp ON (treenode.rule = tmp.rule)
GROUP BY tmp.rule; 
```

将数据作为哈希表保存在内存中会占用大量内存。另一种选择是从数据库中获取每个组并选择一个随机条目。同样，由于组的数量约为 100k，将这些数量的查询发送到数据库需要很长时间。

更新：我可以补充一点，这张表只填了一次，不会有任何变化。id 和 rule 有漏洞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:55:40.157

也许我遗漏了一些东西，但不低于与您的查询等效的查询？

```
SELECT * FROM  ( SELECT * FROM treenode ORDER BY RAND()) x GROUP BY x.rule; 
```

它会更快，因为没有连接要做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:33:19.530

我发现浏览所有条目所需的时间比这个查询要少。所以我添加了一列作为 rule*max(id)+id 并在其上创建了一个索引（我应该使用视图吗？）。

我运行以下查询：

```
SELECT id,rule,temp FROM treenode where temp>? ORDER BY temp LIMIT 0,100000; 
```

在客户端浏览所有返回的条目并填充缓冲区。每当规则更改时，我都会从缓冲区中选择一个随机项目并将其清除（设置索引 = 0）。然后我再次运行查询？作为最后返回的临时值的值。

# html - CSS 不适用于标签

> ID：10808562
> 
> 赞同：0
> 
> 时间：2012-05-30T00:32:01.440
> 
> 标签：html, css

正如我的标题所说，我不知道为什么 CSS 将适用于除标签标签之外的所有内容。

这是我的文件注册代码：

```
<!DOCTYPE html>
<html>

  <head>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <center> <b> Registration Page </b> </center> 
  </head>

  <br>

  <body>
    <img src = "website_demo_pic_1.jpg" />
    <ul class = "SiteMap">
      <li> <a href = "index.html" >Home Page</a>
      <br>
      <li><a href = "register.html" >Register</a>
      <br>
      <li><a href = "login.html" >Log In</a>
      <br>
    </ul>

    <form id = "Form1" action = "submit.php" method = "post">
      <p class="whitetext"><label for = "username">Username :</label>
      <input type = "text" name = "Username" id="username"></p>
      <p class="whitetext"><label for = "password">Password  :</label>
      <input type = "password" name = "Password" id="password"></p>

    </form>
  </body>
</html> 
```

这是我的登录代码：

```
<!DOCTYPE html>
<html>

  <head> 
    <link rel="stylesheet" type="text/css" href="style.css" />
    <center> <b> Log In  Page </b> </center> 
  </head>

  <br>

  <body>
    <img src = "website_demo_pic_1.jpg" />
    <ul class = "SiteMap">
      <li> <a href = "index.html" >Home Page</a>
      <br>
      <li><a href = "register.html" >Register</a>
      <br>
      <li><a href = "login.html" >Log In</a>
      <br>
    </ul>

    <form id = "Form2" action = "submit.php" method = "post">
      <label for = "username2">Username :</label>
      <input type = "text" name = "Username" id="username2">
      <br>
      <label for = "password2">Password  :</label>
      <input type = "password" name = "Password" id="password2">
      <br>

    </form> 

  </body>
</html> 
```

这是我的 CSS 文件：

```
 img
  {
    width: 100%;
  }

  body
  {
    background-color: black;
  }

  label
  {
    width: 4em;
    float: left;
    text-align: right;
    margin-right: 0.5em;
    display: block
  }

  p.whitetext
  {
    color: white;
  } 

  ul.SiteMap
  {
    float: left;
  } 
```

据我所知，代码是正确的，但文本框不会排成一行，这意味着标签发生了一些奇怪的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:49:50.437

这是您的代码的 jsFiddle，稍作修改：http: [//jsfiddle.net/MzsWH/](http://jsfiddle.net/MzsWH/)

```
<img src = "website_demo_pic_1.jpg" />
    <ul class = "SiteMap">
      <li> <a href = "index.html" >Home Page</a>
      <br>
      <li><a href = "register.html" >Register</a>
      <br>
      <li><a href = "login.html" >Log In</a>
      <br>
    </ul>

    <form id = "Form2" action = "submit.php" method = "post">
      <label for = "username2">Username :</label>
      <input type = "text" name = "Username" id="username2">
      <br>
      <label for = "password2">Password  :</label>
      <input type = "password" name = "Password" id="password2">
      <br>

    </form>

    <STYLE>
    img{
        width: 100%;
        border:1px solid #333;
        height:40px;
    }
    body{
        background-color: #CCC;
    }
    label {
        /*width: 4em;*/
        width:6em;
        float: left;
        text-align: right;
        margin-right: 0.5em;
        display: block
    }
    p.whitetext{
        color: white;
    } 
    ul.SiteMap{
        float: left;
        border:1px solid #666;
    }
    </STYLE> 
```

关于您的 LABEL 属性，我唯一看到的是您的标签宽度太小。标签内的文本比宽度长，这导致它换行，并使一切看起来很奇怪。

我所做的只是将宽度从 4em 更改为 6em。

其次，您的 HTML 存在一些问题。您的 HEAD 标签中有一个 CENTER 标签，您的意思是 TITLE 吗？此外，列表元素 (LI) 标记之间还有换行 BR 标记。正如 Shaquin 在他的评论中所说，我建议通过 W3C 验证器运行您的页面，以便您可以帮助更新您的 HTML。

我希望这会有所帮助！

干杯!

# c# - 解析器生成器：如何一起使用 GPLEX 和 GPPG？

> ID：10808564
> 
> 赞同：7
> 
> 时间：2012-05-30T00:32:37.773
> 
> 标签：c#, parsing, gppg

在浏览了关于好的 C# 解析器生成器的帖子后，我偶然发现了 GPLEX 和 GPPG。我想使用 GPLEX 生成令牌，以便 GPPG 解析和创建树（类似于 lex/yacc 关系）。但是，我似乎找不到关于这两者如何相互作用的例子。使用 lex/yacc，lex 返回由 yacc 定义的标记，并且可以将值存储在 yylval 中。这是如何在 GPLEX/GPPG 中完成的（他们的文档中缺少它）？

附件是我想转换为 GPLEX 的 lex 代码：

```
%{
 #include <stdio.h>
 #include "y.tab.h"
%}
%%
[Oo][Rr]                return OR;
[Aa][Nn][Dd]            return AND;
[Nn][Oo][Tt]            return NOT;
[A-Za-z][A-Za-z0-9_]*   yylval=yytext; return ID;
%% 
```

谢谢！安德鲁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-21T11:38:37.627

首先：在您的项目中包含参考“QUT.ShiftReduceParser.dll”。它在 GPLEX 的下载包中提供。

主程序的示例代码：

```
using System;
using ....;
using QUT.Gppg;
using Scanner;
using Parser;

namespace NCParser
{
class Program
{
    static void Main(string[] args)
    {
        string pathTXT = @"C:\temp\testFile.txt";
        FileStream file = new FileStream(pathTXT, FileMode.Open);
        Scanner scanner = new Scanner();
        scanner.SetSource(file, 0);
        Parser parser = new Parser(scanner);            
    }
}
} 
```

GPLEX 的示例代码：

```
%using Parser;           //include the namespace of the generated Parser-class
%Namespace Scanner       //names the Namespace of the generated Scanner-class
%visibility public       //visibility of the types "Tokens","ScanBase","Scanner"
%scannertype Scanner     //names the Scannerclass to "Scanner"
%scanbasetype ScanBase   //names the Scanbaseclass to "ScanBase"
%tokentype Tokens        //names the Tokenenumeration to "Tokens"

%option codePage:65001 out:Scanner.cs /*see the documentation of GPLEX for further Options you can use */

%{ //user-specified code will be copied in the Output-file
%}

OR [Oo][Rr]
AND [Aa][Nn][Dd]
Identifier [A-Za-z][A-Za-z0-9_]*

%% //Rules Section
%{ //user-code that will be executed before getting the next token
%}

{OR}           {return (int)Tokens.kwAND;}
{AND}          {return (int)Tokens.kwAND;}
{Identifier}   {yylval = yytext; return (int)Tokens.ID;}

%% //User-code Section 
```

GPPG 输入文件的示例代码：

```
%using Scanner      //include the Namespace of the scanner-class
%output=Parser.cs   //names the output-file
%namespace Parser  //names the namespace of the Parser-class

%parsertype Parser      //names the Parserclass to "Parser"
%scanbasetype ScanBase  //names the ScanBaseclass to "ScanBase"
%tokentype Tokens       //names the Tokensenumeration to "Tokens"

%token kwAND "AND", kwOR "OR" //the received Tokens from GPLEX
%token ID

%% //Grammar Rules Section

program  : /* nothing */
         | Statements
         ;

Statements : EXPR "AND" EXPR
           | EXPR "OR" EXPR
           ;

EXPR : ID
     ;

%% User-code Section
// Don't forget to declare the Parser-Constructor
public Parser(Scanner scnr) : base(scnr) { } 
```

[时间： 2019-01-10](/questions/tagged/gppg "显示标记为“gppg”的问题")[标签：](/questions/tagged/gplex "显示标记为“gplex”的问题")[c#](/questions/tagged/c%23 "显示标记为“c#”的问题") [parsegppggplex](/questions/tagged/parse "显示标记为“解析”的问题")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-31T23:54:37.307

我有一个类似的问题 - 由于明显缺乏文档，我不知道如何将我的 GPLEX 输出与 GPPG 一起使用。我认为问题源于 GPLEX 发行版包括 gppg.exe 和 gplex.exe，但只有 GPLEX 的文档。

如果您访问 GPPG 主页并下载该发行版，您将获得 GPPG 的文档，其中描述了输入文件的要求、如何构建语法等。哦，您还将再次获得这两个二进制文件 - gppg .exe 和 gplex.exe。

似乎将所有内容都包含在一个包中会更简单。它肯定可以消除一些困惑，特别是对于那些可能对词法分析（标记化）和解析（并且可能还不是 100% 熟悉两者之间的差异）不熟悉的人来说。

所以无论如何，对于那些可能第一次这样做的人：

**GPLEX** [http://gplex.codeplex.com](http://gplex.codeplex.com) - 用于标记化/扫描/词法分析（同样的事情）

**GPPG** [http://gppg.codeplex.com/](http://gppg.codeplex.com/) - 将分词器的输出作为输入进行解析。例如，解析器使用语法并且可以做一些简单的分词器不能做的事情，比如检测括号集是否匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-11T17:11:15.677

前段时间，我同样需要同时使用 GPLEX 和 GPPG，为了让工作更轻松，我创建了一个 nuget 包，用于在 Visual Studio 中同时使用 GPPG 和 GPLEX。
该包可以安装在基于 .Net Framework 的 C# 项目中，并在 Visual Studio 的包管理器控制台中添加一些命令。此命令可帮助您配置 C# 项目以在构建过程中集成 GPPG 和 GPLEX。本质上，在您的项目中，您将编辑 YACC 和 LEX 文件作为源代码，并且在项目构建期间，将生成解析器和扫描器。此外，command-let 将自定义解析器和扫描器所需的文件添加到项目中。

你可以在这里找到它： [https ://www.nuget.org/packages/YaccLexTools/](https://www.nuget.org/packages/YaccLexTools/)

这是一个博客文章的链接，解释了如何使用它： [http ://ecianciotta-en.abriom.com/2013/08/yacclex-tools-v02.html](http://ecianciotta-en.abriom.com/2013/08/yacclex-tools-v02.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:07:24.080

您是否考虑过使用[Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)？（这不是一个正确的答案，但我没有足够的声誉来发表评论）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-01T08:53:27.657

具有讽刺意味的是，当我开始使用 C# 解析器时，我正是从这两个工具开始的（大约一年前）。然后词法分析器有小错误（易于修复）：

*   [http://gplex.codeplex.com/workitem/11308](http://gplex.codeplex.com/workitem/11308)

但解析器更严重：

*   [http://gppg.codeplex.com/workitem/11344](http://gppg.codeplex.com/workitem/11344)

Lexer 应该已修复（发布日期为 2013 年 6 月），但解析器**可能**仍然存在此错误（2012 年 5 月）。

所以我编写了自己的套件 :-) [https://sourceforge.net/projects/naivelangtools/](https://sourceforge.net/projects/naivelangtools/)并从那时起使用和开发它。

您的示例（在 NLT 中）翻译为：

```
/[Oo][Rr]/                -> OR;
/[Aa][Nn][Dd]/            -> AND;
/[Nn][Oo][Tt]/            -> NOT;
// by default text is returned as value
/[A-Za-z][A-Za-z0-9_]*/   -> ID; 
```

整个套件类似于 lex/yacc，尽可能不依赖副作用（因此您返回适当的值）。

# php - Soap 1.2 不适用于 stamps.com

> ID：10808567
> 
> 赞同：1
> 
> 时间：2012-05-30T00:32:46.270
> 
> 标签：php, soap, wsdl

我正在尝试在我的平台中实现一个 stamps.com api 接口。这是我第一次使用 SOAP，我不得不重新编译 PHP 以启用库。

我正在前进，但现在我遇到了问题。它们支持soap 1.1 和soap 1.2 请求，当我运行以下代码时：

```
$client = new SOAPClient(
    './SWSIM.wsdl',
    array(
        'trace' => 1
    )
); 
```

在此之后，我从我的请求中得到了成功的响应。

但是，如果我像这样添加使用soap 1.2的选项：

```
$client = new SOAPClient(
    './SWSIM.wsdl',
    array(
        'trace' => 1,
        'soap_version' => SOAP_1_2
    )
); 
```

我收到以下错误：

```
There was an exception running the extensions specified in the config file. ---> Value cannot be null. Parameter name: input 
```

这一行实际上并没有引发异常。它是抛出它的以下命令，但删除soap_version是“修复它”的原因。我想使用soap 1.2，所以这很自然地困扰着我。

FTR 我正在运行的命令是这样的：

```
$authData = array(
    "Credentials" => array(
        "IntegrationID" => "MYUID",
        "Username"      => "MYUSERNAME",
        "Password"      => "MYPASSWORD"
    )
);

try { 
    $objectresult = $client->AuthenticateUser($authData);
} catch (Exception $e) { 
    echo "EXCEPTION: " . $e->getMessage();
    print_r($e);
    exit;
} 
```

可以在此处查看 WSDL 文件： [https ://swsim.stamps.com/swsim/swsimv22.asmx?wsdl](https://swsim.stamps.com/swsim/swsimv22.asmx?wsdl)

我还联系了他们的开发人员支持，他们说：“您当前收到的消息是从您设计集成的任何程序返回的。这通常发生在 Visual Basic 中，它创建了一个需要特定的包装类响应变量。这可能类似于您遇到的行为。请验证您的程序语言如何使用 WSDL。

我还注意到 __soapCall 方法除了“输入标头”参数。我不完全确定我应该/甚至可以在我的代码中使用该方法。我想我应该试着玩一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T20:48:35.097

检查您的 WSDL 文件。我用错了，看来你也是。试试这个：http: [//developer.stamps.com/developer/downloads/files/Stamps.com_SWSIM.wsdl](http://developer.stamps.com/developer/downloads/files/Stamps.com_SWSIM.wsdl)

注意：以上内容已过时。联系 stamps.com 获取当前的 wsdl！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-29T15:49:32.603

我知道这是一个旧线程，但这是一个示例类，应该让任何人开始使用 php [https://github.com/aaronjsmith/stamps.com-php中的 stamps.com api](https://github.com/aaronjsmith/stamps.com-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:19:39.903

WSDL 看起来不错，并且对于两个 Soap 版本来说它是相同的输入结构。问题是他们最后的某个地方的错误，你必须联系他们来解决。

我还将通过 .NET 应用程序对其进行测试，以查看其行为是否相同。

# android - 点击时功能不重复？

> ID：10808568
> 
> 赞同：0
> 
> 时间：2012-05-30T00:32:53.367
> 
> 标签：android

我正在尝试制作一个小型 Android 游戏。然而，我的点击功能没有重复......它第一次添加一个点然后停止工作。在我看来是正确的。

```
addButton.setOnClickListener(new View.OnClickListener(){

  public void onClick(View v) {
    playerScoreField = (TextView)findViewById(R.id.playerScore);
    int playerScore = 0;
    if(playerScore != target){
      playerScore++;
      playerScoreField.setText("You are at: " + playerScore);
    } else {
      addButton.setClickable(false);
      addButton.setEnabled(false);
      countDown.onFinish();
    }

  }  

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:36:27.970

我想你可能有一个逻辑错误。您在每次点击时将 playerScore 设置为零。这将导致分数始终为 1。以不同的方式声明您的 playerScore 变量。

# php - 未定义的变量 - 但它就在那里

> ID：10808574
> 
> 赞同：-1
> 
> 时间：2012-05-30T00:33:39.077
> 
> 标签：php, variables, undefined

> **可能重复：**
> [在 PHP 中的函数中使用全局变量，就像在 Javascript 中那样](https://stackoverflow.com/questions/9215368/using-global-vars-within-a-function-in-php-the-way-you-do-it-in-javascript)

出于某种原因，以下程序给了我一个错误：

```
<?php
    $a = 1;

    function func() {
        echo $a;
    }

    func();
?> 
```

这就是整个程序。错误是：

```
Notice: Undefined variable: a in what.php on line 5 
```

我误解了一些基本的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T00:34:29.723

由于[变量范围](http://php.net/manual/en/language.variables.scope.php) `$a`在函数内部不可用。您需要将其作为参数传递`func()`才能访问它：

```
<?php
    $a = 1;

    function func($a) {
        echo $a;
    }

    func($a);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T00:39:34.730

如果你想引用一个全局变量，你需要使用`global`关键字：

```
<?php
    $a = 1;

    function func() {
        global $a;

        echo $a;
    }

    func();
?> 
```

# applescript - applescript中当前用户图片路径的奇怪属性结果

> ID：10808581
> 
> 赞同：1
> 
> 时间：2012-05-30T00:34:30.973
> 
> 标签：applescript, system-preferences, dscl

当我运行时：

```
tell application "System Events"
   get the properties of the current user
end tell 
```

在applescript中，除了图片路径外，一切看起来都很好。引用的路径不是我所看到的用户图片。

我可能在这里遗漏了一些东西，但我不知道是什么。引用路径中的图片是否有其他用途，而不是我在系统偏好设置中设置为我的用户图片的图片？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:37:21.453

简而言之
，帐户图像是用户记录的“JPEGPhoto”属性，并`get the properties of the current user`返回用户记录的“图片”属性。

Mac OS X 10.5+ 将用户的帐户图片存储在目录服务中。用户帐户在其用户记录中包含“图片”（即帐户图片的路径）和“JPEGPhoto”属性。可以使用`dscl`命令（`dscl . -read /Users/username Picture`和`dscl . -read /Users/username JPEGPhoto | tail -1 | xxd -r -p > /accountImage.jpg`）读取。（最初两者相同）

如果用户在任何时候修改了他们的用户图片，使用`system preferences`的帐户图片将存储在`JPEGPhoto`其用户记录的“”属性中，而不是“ `Picture`”属性中。

如果用户在任何时候修改了他们的用户图片，使用`applescript`的帐户图片将存储在`Picture`其用户记录的“”属性中，而不是“ `JPEGPhoto`”属性中。

```
tell application "System Events"
    set the picture path of current user to "/Library/User Pictures/Flowers/Dahlia.tif"
end tell 
```

您`applescript`正在返回`Picture`用户记录的“”属性。

**参考：**
[Mac在哪里存放账号图片？](https://apple.stackexchange.com/questions/44956/where-does-the-mac-store-account-pictures)

# sql - Sql 查询先获取置顶帖

> ID：10808585
> 
> 赞同：1
> 
> 时间：2012-05-30T00:35:06.527
> 
> 标签：sql, postgresql

我正在建立一个博客，但我遇到了问题。应该有一些粘性帖子。我想要的只是首先获得粘性帖子，然后是其余的。

一个有效的查询是

```
select * from 

(
(select *,true as st from blog where "stickyUntil" > current_timestamp) 
UNION  all
(SELECT *,false as st from blog where "stickyUntil" < current_timestamp  or "stickyUntil" is null  ) 
) q 

order by st desc, "stickyUntil" DESC ,publish DESC OFFEST x LIMIT z 
```

workz 的另一个更简单的查询是

```
select * from blog order by case when "stickyUntil" > current_timestamp then "stickyUntil" end desc nulls last, publish desc; 
```

但这将迫使 200.000 行在内存中排序不是很快..

有办法优化吗？？

使用两个单独的查询会更好吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:57:05.250

我会使用[CASE](http://www.postgresql.org/docs/current/static/functions-conditional.html)语句来避免表的两次传递：

```
select *, 
   CASE 
   WHEN "stickyUntil" > current_timestamp THEN true
   ELSE false
   END as st
FROM blog
ORDER BY st DESC ,publish DESC OFFEST x LIMIT z 
```

Postgres 支持在计算字段上创建[索引](http://www.postgresql.org/docs/current/static/sql-createindex.html)，这在这里会有所帮助，但有一个限制：

> 索引定义中使用的所有函数和运算符都必须是“不可变的”，也就是说，它们的结果必须仅取决于它们的参数，而不是任何外部影响（例如另一个表的内容或当前时间）。

所以你不能索引**st**计算。**如果st**的计算不需要太精确，另一种选择是将**st**字段添加到表中：

```
ALTER TABLE blog
ADD COLUMN st boolean default true 
```

[INDEX](http://www.postgresql.org/docs/current/static/sql-createindex.html) **st**作为常规列：

```
CREATE INDEX sti ON blog(st) 
```

并定期运行：

```
UPDATE blog
SET st = false
WHERE st = true
AND "stickyUntil" < current_timestamp 
```

但是让轮询过程进行更新不如直接查询有吸引力。**这只有在您的查询非常慢或对博客**表有大量读取时才有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T02:34:14.190

我认为你最好运行两个查询，一个用于粘性帖子，一个用于其余的。

SQL 不保证结果的顺序，没有明确的 order by。虽然 UNION ALL 的结果可能看起来正确，但不能保证。这在多线程环境中变得更加明显，您不知道哪个线程将首先完成读取数据并开始返回结果。

最有效的解决方法是将其作为两个不同的查询来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:28:48.443

```
select * 
from blog
order by 
    coalesce("stickyUntil", '1901-01-01'::date) < current_timestamp, 
    publish DESC 
OFFSET x LIMIT z 
```

# javascript - Javascript回调时间

> ID：10808586
> 
> 赞同：1
> 
> 时间：2012-05-30T00:35:19.883
> 
> 标签：javascript

问这么微不足道的事情我觉得很愚蠢，但我真的想要最佳实践的答案（我不是在寻找“setTimeout”解决方案，除非没有其他可能——尽管我怀疑是这种情况）。

快速概览：我有一个数组，我想从回调中推送到该数组。在我填充了数组之后，我想在回调之外使用它。

实际用途：我有一系列城市，我想用 Google 的 API 对它们进行地理编码，并用所有生成的 LatLng 填充一个数组。稍后我将使用它们创建标记对象，将它们添加到集群器中，无论如何。

```
coder = new google.maps.Geocoder();
$places = ['Truro, NS', 'Halifax, NS', 'Sydney, NS', 'Dartmouth, NS'];
all_the_pins = Array();
for(i in $places){
    var $place = $places[i];
    coder.geocode({address:$place}, function(res, stat){
        switch(stat){
            case 'OK':
                all_the_pins.push(res[0].geometry.location);
                break;
        }
    });
}
console.log(all_the_pins); 
```

编辑：澄清问题：问题不是范围问题或`all_the_pins`变量是否是全局的问题，如果您要`all_the_pins`在回调中检查，您会看到它是同一个变量（被推送到）。问题是因为推送发生在回调中，所以它们不会在`console.log`下面运行之前发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:47:34.427

由于您的问题不清楚，我会冒险猜测您想要在`all_the_pins array`完成所有地理编码调用时处理。由于地理编码函数调用是异步的，因此您必须跟踪所有地理编码调用何时完成，然后才能使用最终数组。

如果是这样，您可以这样做：

```
var coder = new google.maps.Geocoder();
var $places = ['Truro, NS', 'Halifax, NS', 'Sydney, NS', 'Dartmouth, NS'];
var all_the_pins = Array();
var remaining = $places.length;
for (var i = 0, len = $places.length; i < len; i++)
    var $place = $places[i];
    coder.geocode({address:$place}, function(res, stat){
        switch(stat){
            case 'OK':
                all_the_pins.push(res[0].geometry.location);
                break;
        }
        --remaining;
        if (remaining == 0) {
            // all_the_pins data is set here
            // call a function and pass the array to it or put your
            // code here to process it
            console.log(all_the_pins);
        }
    });
} 
```

注意：我还更改了`for`用于迭代数组的正确循环类型。 `for (var i in xxx)`用于迭代对象的属性，而不是数组的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T00:49:20.203

不， setTimeout 在这里绝对没用。如果您有多个异步请求，并且想要在所有请求都回调时执行某些操作，那么唯一的可能就是计数器。在最后一次回调之后，打开请求的数量将减少到 null；然后执行你想要的。

```
var coder = new google.maps.Geocoder();
var places = ['Truro, NS', 'Halifax, NS', 'Sydney, NS', 'Dartmouth, NS'];
var all_the_pins = [];
for (var i=0; i<places.length)
    coder.geocode({address:places[i]}, function(res, stat){
        if (stat == 'OK')
            all_the_pins.push(res[0].geometry.location);
        else
            all_the_pins.push(stat);

        // counter is length of results array:
        if (all_the_pins.length >= places.length) {
            console.log(all_the_pins);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T00:47:26.077

您的其余代码可以存在于另一个回调中吗？我将设置一个仅在被调用 x 次后才执行的函数（即输入数组的长度）。

```
coder = new google.maps.Geocoder();
$places = ['Truro, NS', 'Halifax, NS', 'Sydney, NS', 'Dartmouth, NS'];
all_the_pins = Array();

function myCallback(count, totalCount, all_the_pins) {
    if (count != totalCount) return;

    console.log(all_the_pins);
}

count = 1;

for(i in $places){
    var $place = $places[i];
    coder.geocode({address:$place}, function(res, stat){
        switch(stat){
            case 'OK':
                all_the_pins.push(res[0].geometry.location);

                myCallback(count, $places.length, all_the_pins);
                count++;
                break;
        }
    });
} 
```

# mongodb - 带有 C# 驱动程序的 MongoDB 模式设计？

> ID：10808588
> 
> 赞同：3
> 
> 时间：2012-05-30T00:35:29.973
> 
> 标签：mongodb, mongodb-.net-driver

关于如何用 .net 对象表示以下内容的任何想法？

```
{
    _id: ’T4Y...AC’, // base64-encoded ObjectId
    name: ’Rick’,
    profile: { ... age, location, interests, etc. ... },
    followers: {
    "T4Y...AD": { name: ’Jared’, circles: [ ’python’, ’authors’] },
    "T4Y...AF": { name: ’Bernie’, circles: [ ’python’ ] },
    "T4Y...AI": { name: ’Meghan’, circles: [ ’python’, ’speakers’ ] }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:55:43.303

我想它可能看起来像

```
[DataContract]
public class data
{
    [BsonId]
    [DataMember(Order = 0]
    public BsonObjectId { get; set; }

    [DataMember(Order = 1]
    public string name { get; set; }

    [DataMember(Order = 2]
    public Profile profile { get; set; }

    [DataMember(Order = 3]
    public Dictionary<string,Follower> followers { get; set;}
}

[DataContract]
public class Profile
{
    [DataMember(Order = 0]
    public int age { get; set; }
    [DataMember(Order = 1]
    public string location { get ;set; }
    [DataMember(Order = 2]
    public string interests { get ;set; }
}

[DataContract]
public class Follower
{

     [DataMember(Order = 0]
    public string name { get; set; }
    [DataMember(Order = 1]
    public string[] circles
} 
```

我相信 Mongo 和 WCF 都支持字典，所以是的，您可以将 Followers 更改为字典

# ruby - ruby define_singleton_method :"attr=(val)" 不起作用

> ID：10808590
> 
> 赞同：3
> 
> 时间：2012-05-30T00:35:45.897
> 
> 标签：ruby

```
1.9.3-p194 :012 > b=[1,2,3];b.instance_variable_set :@internal, "rrr";
b.define_singleton_method :xx do; @internal; end
 => #<Proc:0x000000020f3d20@(irb):12 (lambda)> 
1.9.3-p194 :013 > b
 => [1, 2, 3] 
1.9.3-p194 :014 > b.xx
 => "rrr"
1.9.3-p194 :015 > b.define_singleton_method :"xx=(val)" do; @internal=val; end
 => #<Proc:0x0000000254aec8@(irb):15 (lambda)> 
1.9.3-p194 :017 > b.xx="yy"
NoMethodError: undefined method `xx=' for [1, 2, 3]:Array
    from (irb):17
    from /home/sir/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

我想要编写器作为实例变量，但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T00:54:35.467

它应该通过块接受参数，而不是通过方法名称：

```
b.define_singleton_method(:xx=) do |val|
  @internal = val
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:39:32.413

您定义了一个名为 的方法`xx=(val)`，但您正在调用一个名为 的方法`xx=`。您需要更改定义或调用站点，以使两者匹配。

# node.js - req.url for / in Connect

> ID：10808592
> 
> 赞同：0
> 
> 时间：2012-05-30T00:36:17.873
> 
> 标签：node.js

我的 Node.js 脚本上有一个简单的`connect`服务器，我想使用它`req.url`来检测用户是否在请求`/`，然后检查请求中是否有正确的 cookie，是否有重定向到仪表板，如果没有发送`index.html`. 但是`req.url`用户请求的时间是`/`什么？

*PS：我试过用`case "/":`但是没用*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:41:22.363

您可以`req.path`改用，路径将为`/`.

# video - avconv mp4 到 webm libvorbis 缓冲区溢出

> ID：10808594
> 
> 赞同：4
> 
> 时间：2012-05-30T00:36:54.890
> 
> 标签：video, mp4, webm, avconv, vorbis

试图将一堆 mp4 文件转换为 webm。所以我运行以下命令。我用ffmpeg尝试了一个类似的命令。

```
avconv -i input.mp4 -threads 8 -s 1280x720 -pre libvpx-720p -b 3900k -pass 2 -acodec libvorbis -b:a 128k -ac 2 -f webm -y output/webm 
```

结果是：

```
 Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'input.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2mp41
    creation_time   : 1970-01-01 00:00:00
    encoder         : Lavf52.32.0
  Duration: 00:01:02.90, start: 0.000000, bitrate: 1649 kb/s
    Stream #0.0(und): Video: mpeg4 (Simple Profile), yuv420p, 640x480 [PAR 4:3 DAR 16:9], 1492 kb/s, PAR 853:640 DAR 853:480, 23.94 fps, 30 tbr, 30 tbn, 30 tbc
    Metadata:
      creation_time   : 1970-01-01 00:00:00
    Stream #0.1(und): Audio: aac, 44100 Hz, stereo, s16, 152 kb/s
    Metadata:
      creation_time   : 1970-01-01 00:00:00
[buffer @ 0x1232600] w:640 h:480 pixfmt:yuv420p
[scale @ 0x123c300] w:640 h:480 fmt:yuv420p -> w:1280 h:720 fmt:yuv420p flags:0x4
[libvpx @ 0x1256d60] v1.0.0
Output #0, webm, to 'output.webm':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2mp41
    creation_time   : 1970-01-01 00:00:00
    encoder         : Lavf53.21.0
    Stream #0.0(und): Video: libvpx, yuv420p, 1280x720 [PAR 2559:2560 DAR 853:480], q=11-51, pass 2, 3900 kb/s, 1k tbn, 30 tbc
    Metadata:
      creation_time   : 1970-01-01 00:00:00
    Stream #0.1(und): Audio: libvorbis, 44100 Hz, stereo, s16, 152 kb/s
    Metadata:
      creation_time   : 1970-01-01 00:00:00
Stream mapping:
  Stream #0:0 -> #0:0 (mpeg4 -> libvpx)
  Stream #0:1 -> #0:1 (aac -> libvorbis)
Press ctrl-c to stop encoding
[libvorbis @ 0x1221240] libvorbis: buffer overflow.Audio encoding failed 
```

注意漂亮的错误。libvorbis 中的缓冲区溢出。

有什么帮助吗？替代转换命令？

更新

第一遍看起来像这样：

```
 avconv -i input.mp4 -threads 8 -s 1280x720 -pre libvpx-720p -b 3900k -pass 1 -an -f webm -y output.webm 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T05:13:15.863

原来这是 avconv 中的 -pre vs -preset 的问题。整个 ffmpeg fork 到 avconv 已经破坏了除开发人员之外的所有人的社区。现在在谷歌上搜索任何一个工具的有用信息都是无用的。

对于那些最终遇到类似问题的人来说，这就是我将 mp4 转换为 webm 的方式。

```
avconv -i "$inputFile" -threads 8 -s 1280x720 -preset libvpx-720p -b 3900k -pass 1 -an -f webm -y "$outputFile"
avconv -i "$inputFile" -threads 8 -preset libvpx-720p -pass 2 -b 3900k -acodec libvorbis -ar 44100 -ac 2 -ab 128k -f webm -y "$outputFile" 
```

这适用于 720P mp4 到 720P WEBM。您可以轻松调整到1080P，预设​​存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T20:28:06.083

我这样做是为了一次性将我的摄像机转换为 720p webm：

```
avconv -i videoIn.MTS -c:v libvpx -b:v 6000k -qmin 10 -qmax 42 -maxrate 500k -bufsize 1500k -threads 8 -vf scale=-1:720 -c:a libvorbis -b:a 192k -f webm videoOut.webm 
```

# smtp - IIS6 SMTP 服务是 Win 2008r2 中唯一可用的选项。会不会贬值，有什么选择？

> ID：10808596
> 
> 赞同：0
> 
> 时间：2012-05-30T00:37:17.643
> 
> 标签：smtp, iis-6, deprecated, windows-server-2008-r2, exchange-server

我正在使用 IIS6 SMTP 服务来处理入站 SMTP 电子邮件，如下所示：

*   [为 SMTP 和传输事件编写托管接收器](http://msdn.microsoft.com/en-us/library/ms998610)
*   [smtpreg.vbs 事件管理脚本](http://msdn.microsoft.com/library/ms528023.aspx)

在 Windows 2008R2 及更高版本中做同样事情的正确方法是什么？我注意到 Exchange 2010 不再使用这个 SMTP 服务器，所以我认为它可能会被贬值......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:31:42.127

Windows Server 2008 R2 能够添加 SMTP 服务器。它与 2003 年推出的基本相同。您可以通过服务器管理器中的“添加功能”向导添加它。这是描述该过程的 tecnhet 文章的链接。

[http://technet.microsoft.com/en-us/library/cc772058(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc772058(v=ws.10).aspx)

# javascript - Play 中的子模板 JS 资源加载顺序！框架

> ID：10808597
> 
> 赞同：1
> 
> 时间：2012-05-30T00:37:23.887
> 
> 标签：javascript, playframework, dependencies, playframework-2.0

在子模板中加载脚本时，如何在 Play 框架中定义 javascript 资产的加载顺序？

在我的`index.scala.html`我拉入jQuery：

```
<script src="@routes.Assets.at("javascripts/jquery-1.7.1.min.js")" type="text/javascript"></script> 
```

在我的子模板中，我引入了一个依赖于 jQuery 的脚本：

```
<script src="@routes.Assets.at("javascripts/myScript.js")" type="text/javascript"></script> 
```

但是，`myScript.js`在“jquery-1.7.1.min.js”之前加载。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:43:15.717

您应该将脚本作为参数传递给您的`index.scala.html`.

但我推荐[RequireJS](http://requirejs.org/)。RequireJS 使您能够使用延迟加载。

# c - 使用 64 位或 32 位编译时的不同行为或 sqrt

> ID：10808601
> 
> 赞同：6
> 
> 时间：2012-05-30T00:38:06.063
> 
> 标签：c, math, 32bit-64bit, sqrt, mpfr

我正在使用数学库中的 sqrt() 函数，当我使用 -m64 为 64 位构建时，我得到了正确的结果，但是当我为 32 位构建时，我的行为非常不一致。

例如在 64 位

```
double dx = 0x1.fffffffffffffp+1023;
sqrt(dx); // => 0x1.fffffffffffffp+511
sqrt(0x1.fffffffffffffp+1023);// => 0x1.fffffffffffffp+511 
```

（我相信这是正确的舍入结果，用 mpfr 验证）

但是在 32 位相同的输入值上，它的行为不同。

```
double dx = 0x1.fffffffffffffp+1023;
sqrt(dx); // => 0x1.0p+512
sqrt(0x1.fffffffffffffp+1023); // => 0x1.fffffffffffffp+511 
```

当在变量中传递相同的值时，我得到错误的结果。我在每次通话之前和之后检查了舍入模式，所有设置都设置为最近的舍入。什么原因？我在 64 位机器上使用 gcc 4.6，并且选项适用于 x86`-mfpmath=sse`和`-march=pentium`x64 两种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T00:45:02.537

某些编译器，例如`gcc`，当他们看到在静态文字上执行的某些数学库函数时，实际上会在编译时计算值，而与变量一样，它必须在运行时计算。编译时值通常由编译器使用 MPFR、GNU MP 等数学库计算，因此结果会更准确，或者至少在平台之间尽可能准确。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T01:10:55.323

你还没有说你正在使用哪个编译器或架构，但假设`gcc`/ `x86`then`x86-64`差异可能归结为默认情况下 gcc 在 32 位 x86 上使用 387 浮点指令，而它在 x86-64 上使用 SSE 指令.

387 个浮点寄存器是 80 位宽，而`double`64 位宽。这意味着使用 387 指令的中间结果可以具有更高的精度，这可能会导致四舍五入后的结果略有不同。（SSE2 指令在压缩的 64 位双精度上运行）。

有几种方法可以更改编译器的运行方式，具体取决于您的需要：

*   如果您`-ffloat-store`在 x86 构建中使用该选项，则每当您将值存储在`double`变量中时，编译器都会丢弃额外的精度；
*   如果您`-mfpmath=sse`在 x86 版本上使用选项，以及指定支持 SSE2 的架构`-msse2`的`-march=`开关，编译器将使用 SSE 指令进行浮点，就像在 x86-64 上一样。不过，代码只能在支持 SSE2 的 CPU 上运行（Pentium-M / Pentium 4 及更高版本）。
*   如果您`-mfpmath=387`在 x86-64 版本上使用该选项，编译器将使用 387 指令进行浮点运算，就像在 x86 上一样。但不建议这样做 - x86-64 ABI 指定浮点值在 SSE 寄存器中传递，因此编译器必须使用此选项在 387 和 SSE 寄存器之间进行大量改组。

# cocoa-touch - 对数 UISlider

> ID：10808604
> 
> 赞同：2
> 
> 时间：2012-05-30T00:38:25.457
> 
> 标签：cocoa-touch, uislider

是否有任何首选方法可以使 UISliders 值以对数而不是线性变化？例如，滑块前半部分的值从 0 变为 25，后半部分的值从 25 变为 100。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:49:35.433

不幸的是没有。但是您可以将`float`滑块给出的值转换为您需要的数字。这是一个例子。

```
float interpretedValue;
if (sliderValue < 0.5) {
    interpretedValue = sliderValue * 25 / 0.5;
} else {
    interpretedValue = (sliderValue - 0.5)*(100 - 25)/0.5 + 25;
} 
```

我在方程式中保留了一些常数，以便您可以更轻松地进行调整。但为了获得最佳性能，我会简化它们。

**编辑，2013 年 1 月 17 日：**

我被要求提供一组方程，可以在给定解释值的情况下找到滑块值。他们来了：

```
float sliderValue;
if (interpretedValue < 25) {
    sliderValue = interpretedValue * 0.5 / 25;
} else {
    sliderValue = (interpretedValue - 25) * 0.5 / (100 - 25) + 0.5;
} 
```

# css - 复制粘贴到 div - contenteditable

> ID：10808605
> 
> 赞同：3
> 
> 时间：2012-05-30T00:38:30.950
> 
> 标签：css, copy-paste, contenteditable

我正在尝试解决有关以下代码的问题：

```
<div contenteditable="true">
    <label contenteditable='false'>Tag1</label>
</div> 
```

问题是当用户将标签代码复制并粘贴到 div 中时，它会丢失属性“contenteditable='false'”。这意味着，第二个标签（复制的）不再是 contenteditable=false。

知道我该如何解决这个问题吗？

我尝试了以下 css 代码，但它不允许用户删除标签。

```
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-o-user-select: none;
user-select: none; 
```

我也找到了有关[Sanitaze](https://stackoverflow.com/questions/3306205/how-to-avoid-webkit-contenteditable-copy-paste-resulting-in-unwanted-css)的信息，但我认为解决此类问题的代码太多。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:23:53.933

您可以通过在粘贴后放回“contenteditable=false”属性来解决此问题：

```
$(document).bind("input", function(e){
    $(".uneditable").attr("contenteditable", "false");
});​ 
```

（这假设标签具有“不可编辑”类。我使用“输入”事件而不是“粘贴”事件，因为它在粘贴之后（而不是之前）生效，并且它涵盖了一些其他操作，例如拖放文本。）

jsFiddle：http: [//jsfiddle.net/DYKbB/3/](http://jsfiddle.net/DYKbB/3/)

# android - Android：iOS UIActionSheet 等效

> ID：10808608
> 
> 赞同：8
> 
> 时间：2012-05-30T00:40:05.350
> 
> 标签：android, ios, uiactionsheet

我正在转换一个 iOS 应用程序，并且需要实现 UIActionSheet 从 iOS 到 Android 的等价物。

什么 UI 元素最能模仿这一点。

我的目标是 Android 2.2 及更高版本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T00:43:11.890

您将使用 AlertDialog 或 Dialog 对象。AlertDialog 类按照您的要求执行。对话框允许更多的可定制性。

编辑：如果您想要相同的动画效果，您将需要使用 SlidingDrawer。

注意：除了 AlertDialog 之外，这些类都不像 UIActionSheet 那样易于使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-08T06:53:27.930

Bottom Sheet 是一个材料设计组件，在 23.2 版本中被添加到设计支持库中。Bottom sheet 是一个非常简单的窗口，从屏幕底部显示，它提供类似于 IOS UIActionSheet 的视图，开发人员可以根据需要进行自定义。

`compile 'com.android.support:design:<latest-library-version>'`在应用程序 gradle 中添加依赖项。

请参阅此链接 - [https://material.google.com/components/bottom-sheets.html#](https://material.google.com/components/bottom-sheets.html#)

# java - 使用 Jetty/Jersey/Guice 提供静态内容

> ID：10808610
> 
> 赞同：4
> 
> 时间：2012-05-30T00:40:15.077
> 
> 标签：java, jakarta-ee, jetty, jersey, guice

与另一个问题（参见[Filtering static content Jersey](https://stackoverflow.com/questions/3982005/filtering-static-content-jersey)）类似，我想从 Jetty 提供静态内容。在浩瀚的互联网上散布着几个类似的问题，但其中大多数不涉及 Guice，而且那些已经完全过时了。

我有一个使用 Jersey (1.12) 和 Guice (3) 的现有服务，具有以下功能`web.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
    <display-name>My Service</display-name>

    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

    <listener>
        <listener-class>com.example.MyGuiceConfig</listener-class>
    </listener>

    <filter>
        <filter-name>Guice Filter</filter-name>
        <filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>Guice Filter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

`MyGuiceConfig`看起来像这样：

```
public class MyGuiceConfig extends GuiceServletContextListener
{
    @Override
    protected Injector getInjector()
    {
        return Guice.createInjector(new JerseyServletModule()
        {
            @Override
            protected void configureServlets()
            {
                bind(SomeResource.class);
                bind(SomeDao.class).to(ConcreteSomeDao.class);
                serve("/*").with(GuiceContainer.class);
            }
        });
    }
} 
```

当我使用 调用 jetty-maven-plugin`mvn jetty:run`时，我的服务按预期工作。但是，任何对静态内容的请求都会产生 404。

如何在不影响服务的情况下提供任意静态内容？（即不需要我更改技术堆栈的最小更改？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T01:30:13.313

您如何配置 Jersey 将在您的 JerseyServletModule 中处理的 url 片段？如果您指定的前缀与您的静态内容不冲突，它应该可以工作。

```
public class Config extends GuiceServletContextListener {

  protected Injector getInjector() {
    return Guice.createInjector(
        new JerseyServletModule() {
          protected void configureServlets() {
            bind(Service.class);
            serve("/services/*").with(GuiceContainer.class);
          }
        });
  }

} 
```

和

```
@Singleton
@Path("/service")
@Produces({MediaType.TEXT_PLAIN})
public class Service {

  @GET
  public String run() {
    return "Service running";
  }

} 
```

应该为来自 host:8080/services/service 的 Servlet.class 和 webapp 中包含的静态资源提供服务...

**编辑**见[Jersey /* servlet 映射会导致静态资源出现 404 错误，](https://stackoverflow.com/questions/12422660/jersey-servlet-mapping-causes-404-error-for-static-resources/12428843#12428843)这是另一种在不更改 REST 端点路径的情况下完成此操作的方法。

# vim - 替换视觉块留下亮点 - Vim

> ID：10808613
> 
> 赞同：1
> 
> 时间：2012-05-30T00:40:40.047
> 
> 标签：vim

我几个小时前才开始使用 vim，并且正在做一个项目。有相当多的乐趣和挫折感——不过主要是有趣的:)。

我遇到了一个奇怪的情况，这可能是由于使用了[Janus](https://github.com/carlhuda/janus)，但任何帮助将不胜感激。

当我在视觉上选择几行时，`shift-v + j`然后对这些行进行替换以注释它们`:s/^/#`，它成功地完成了我所期望的并将可视块的行的开头替换为`#`. 但是，同时它突出显示`^`了我文件中的每个（基本上现在每行的第一个字符都突出显示）。

类似的事情发生在我再次替换`:s/^/<TAB>`以将代码块移到缩进时。每一行上添加的选项卡都以相同的方式突出显示。

即使在我继续编辑之后，这些亮点都没有消失。为什么这样做？我该怎么做才能让它停止？如果有的话，有哪些更简单的方法可以实现我正在做的事情？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T01:19:40.610

我不使用 Janus（也不知道它是什么），但是`:nohl`（对于 nohighlight）会在搜索和替换后摆脱所有突出显示。

# javascript - 将数组中的项目数相加

> ID：10808622
> 
> 赞同：-1
> 
> 时间：2012-05-30T00:42:48.823
> 
> 标签：javascript, arraylist

我正在尝试将数组中的所有项目相加。我已经尝试过调整其他代码以适应这一点，但到目前为止我还没有多少运气。我对此非常陌生。

```
var coinArray = new Array("penny", "penny", "penny", "penny", "nickle", "nickle", "nickle",          "dime", "dime", "quarter", "quarter", "half dollar"); 
```

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T00:55:38.490

`Array.prototype.reduce`与键值对一起是一种干净的方法。

```
var coins = {
    penny: 1,
    nickle: 5,
    dime: 10,
    quarter: 25,
    "half dollar": 50
};

var result = coinArray.reduce(function(p, v) {
    return p + coins[v];
}, 0);

alert(result); // 139 
```

***演示：http:*** [//jsfiddle.net/r2G2L/](http://jsfiddle.net/r2G2L/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T00:52:45.140

如果您的意思是计算该数组中有多少钱，则需要分配值，我更喜欢使用对象。请注意，它应该是**镍**，但我保持不变。

```
var amount = { "penny": 1, "nickle": 5, "dime": 10, "quarter": 25, "half dollar": 50  }; 
```

然后遍历数组求和到一个`total`变量

```
var total = 0;

for (var i = 0; i < coinArray.length; i++) {
  // Check if coin actually exists in our values object
  if(amount.hasOwnProperty(coinArray[i].toLowerCase())) {
    total += amount[coinArray[i].toLowerCase()];
  }
} 
```

演示：http: [//jsfiddle.net/NCch8/2/](http://jsfiddle.net/NCch8/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T00:49:06.910

```
total = 0;
for(i=0; i<coinArray.length; i++){
switch(coinArray[i]){
    case 'penny':
      total+1;
      break;
    case 'nickle':
      total+5;
      break;
    case 'quarter':
      total+25;
      break;
    }
    /* OTHER CASES... */
} 
```

我想在个人笔记上补充一点，这似乎与 Comp-Sci 课堂作业相比很多 :-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T00:50:38.057

```
var coins = { 'penny': .01, 'nickle': .05, 'dime': .10, 'quarter': .25, 'half dollar': .50};

var coinArray = new Array("penny", "penny", "penny", "penny", "nickle", "nickle", "nickle",          "dime", "dime", "quarter", "quarter", "half dollar");

var total = 0;

for (var i = 0; i < coinrArray.length; i++)
    total += coins[coinrArray[i]]; 
```

## [演示](http://jsfiddle.net/RqaZD/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T01:03:17.203

使用 jquery..

```
var coinArray = new Array("penny", "penny", "penny", "penny", "nickle", "nickle", "nickle", "dime", "dime", "quarter", "quarter", "half dollar");

var total = {};

$.each(coinArray, function(item) {

    var coin = coinArray[item];

    if (!total[coin]) total[coin] = 0;

    total[coin] += 1;

}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-30T00:47:08.857

您可以使用 push 方法将元素添加到数组

```
 var coinArray = new Array("penny", "penny", "penny", "penny", "nickle", "nickle", "nickle", "dime", "dime", "quarter", "quarter", "half dollar");
coinArray.push("cent"); 
```

# java - org.springframework.beans.factory.BeanCreationException 在使用 Spring 和 Hibernate 的 MVC webapp 中

> ID：10808623
> 
> 赞同：1
> 
> 时间：2012-05-30T00:42:51.620
> 
> 标签：java, spring, hibernate, model-view-controller

自两天以来，我一直在尝试自行解决该问题，但无法找出解决方案...我尝试参考这两个问题，但没有帮助。我遗漏了一些东西： [org.springframework.beans.factory.BeanCurrentlyInCreationException：创建名称为“sessionFactory”](https://stackoverflow.com/questions/1572067/problem-creating-bean-of-sessionfactory-in-spring-hibernate-configuration) [Spring MVC 和 Hibernate 配置的 bean 时出错](https://stackoverflow.com/questions/9932585/spring-mvc-and-hibernate-configurations)

我按照本教程使用 Maven 创建了一个简单的 Spring MVC + Hibernate Web 应用程序：http: [//viralpatel.net/blogs/2010/11/spring3-mvc-hibernate-maven-tutorial-eclipse-example.html](http://viralpatel.net/blogs/2010/11/spring3-mvc-hibernate-maven-tutorial-eclipse-example.html) 我没有使用 maven 或使用 pom.xml 导入库没有任何问题。我可以正确部署我用 Maven 创建的战争。

编辑： **正如我的问题的答案所指出的，我没有声明 commons-collections 依赖项。添加后，这是我得到的异常：**

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private net.viralpatel.contact.service.ContactService net.viralpatel.contact.controller.ContactController.contactService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private net.viralpatel.contact.dao.ContactDAO net.viralpatel.contact.service.ContactServiceImpl.contactDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contactDAOImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory net.viralpatel.contact.dao.ContactDAOImpl.sessionFactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring-servlet.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'configurationClass' of bean class [org.springframework.orm.hibernate4.LocalSessionFactoryBean]: Bean property 'configurationClass' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287) 
```

**注意：如果我删除以下属性：**

```
<property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value> 
```

**然后在tomcat中部署应用程序后出现404错误。**

这是现在的 servlet-spring.xml：

```
<?xml  version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

    <context:annotation-config />
    <context:component-scan base-package="net.viralpatel.contact" />

    <bean id="jspViewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="UTF-8" />
    </bean>
    <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="/WEB-INF/jdbc.properties" />

    <bean id="dataSource"
        class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"
        p:driverClassName="${jdbc.driverClassName}"
        p:url="${jdbc.databaseurl}" p:username="${jdbc.username}"
        p:password="${jdbc.password}" />

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${jdbc.dialect}</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

    <tx:annotation-driven />

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:52:46.533

> java.lang.NoClassDefFoundError: org/apache/commons/collections/CursorableLinkedList

添加[`commons-collection.jar`](http://mirrors.ibiblio.org/pub/mirrors/maven2/commons-collections/commons-collections/1.0/commons-collections-1.0.jar)到您的课程路径

中没有这样的属性[`HibernateTransactionManager`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/orm/hibernate4/HibernateTransactionManager.html)，只需删除

```
<property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
</property> 
```

# jquery - jQuery Mobile 列表项拆分按钮，主项上没有链接

> ID：10808630
> 
> 赞同：5
> 
> 时间：2012-05-30T00:43:42.637
> 
> 标签：jquery, jquery-mobile

假设我有一个 jQuery Mobile 站点，其中`<li>`包含一个拆分图标 ( `data-icon="grid"`)。

是否可以将列表项的左侧不包裹在 a 中，`href`但将按钮保留在右侧？

示例：http: [//jsfiddle.net/SSQMB/](http://jsfiddle.net/SSQMB/)

![在此处输入图像描述](../Images/c1ae7e91e0c8bf208d241058961f29d7.png)

我试过了：

```
$(selection).contents().unwrap(); 
```

这很有效，它会按要求删除链接（并修复我在下面概述的问题），但它会破坏列表项上的一大堆布局和样式。

我要解决的问题是：

*   我`<li>`在一个页面上有大约 100 个项目
*   每个`<li>`可能都有一个`<select>`元素，其中包含 5-10 个选项。
*   使用默认的 jQuery Mobile 样式时`<select>`一切正常
*   但是，这会对性能造成重大影响。iPhone 4S 难以滚动，iPad 2 几乎无法使用（Android 实际上一次更好，但仍不完美）
*   放置元素`data-role="none"`使`<select>`页面快速且可再次使用
*   但是，它在桌面浏览器（尤其是 Firefox）上会中断，因为当您单击选择 中的项目时，会触发`<select>`后面的链接并取消该框`<select>``<select>`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:05:08.897

好的，在研究了库存的 jQuery Mobile CSS 之后，我找到了决定`<li>`. 我在单独的样式表中复制了这些，并将它们应用于 a`<span>`而不是 a `<a>`：

```
.ui-li .ui-btn-text span .ui-link-inherit { text-overflow: ellipsis; 溢出：隐藏；空白：nowrap；}
.ui-li .ui-btn-inner span .ui-link-inherit { padding: .7em 15px .7em 15px; 显示：块；}

```

然后，设置`<li>`如下：

```
<li data-icon="grid">
  <a href="#" onclick="return false;" class="leftLink">
    <span class="ui-link-inherit">
      .... content ....
    </span>
  </a><a href="#"> ... </a>
</li> 
```

然后是一些jQuery：

```
$('.leftLink').parent().parent().parent().removeClass('ui-btn');
$('.leftLink').contents().unwrap(); 
```

瞧：http: [//jsfiddle.net/Zwhs3/2/](http://jsfiddle.net/Zwhs3/2/)

# macos - 沙盒问题

> ID：10808631
> 
> 赞同：1
> 
> 时间：2012-05-30T00:44:09.160
> 
> 标签：macos, sandbox

因此，我必须实施沙盒以将我的 Mac 应用程序保留在 Mac 应用程序商店中。当我启用沙盒时，我的应用程序大部分都可以工作。我使用“top”命令来获取整个用户系统的 CPU 信息和 RAM 信息。有了沙盒，我就无法再使用这些功能了。这是收到的运行时错误：

```
/bin/sh: /usr/bin/top: Operation not permitted
/bin/sh: /usr/bin/top: Operation not permitted
2012-05-29 20:40:57.911 QuickToggles[53714:403] *** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]
2012-05-29 20:40:57.928 QuickToggles[53714:403] (
    0   CoreFoundation                      0x00007fff986bcf56 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff97f98d5e objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff98666370 -[__NSArrayI objectAtIndex:] + 208
    3   QuickToggles                        0x0000000100001961 -[StatusBarAppAppDelegate updateInfo:] + 177
    4   Foundation                          0x00007fff94666f40 __NSFireTimer + 102
    5   CoreFoundation                      0x00007fff98671934 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 20
    6   CoreFoundation                      0x00007fff98671486 __CFRunLoopDoTimer + 534
    7   CoreFoundation                      0x00007fff98651e11 __CFRunLoopRun + 1617
    8   CoreFoundation                      0x00007fff98651486 CFRunLoopRunSpecific + 230
    9   HIToolbox                           0x00007fff9806b4d3 RunCurrentEventLoopInMode + 277
    10  HIToolbox                           0x00007fff980726d3 ReceiveNextEventCommon + 181
    11  HIToolbox                           0x00007fff9807260e BlockUntilNextEventMatchingListInMode + 62
    12  AppKit                              0x00007fff90441e31 _DPSNextEvent + 659
    13  AppKit                              0x00007fff90441735 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 135
    14  AppKit                              0x00007fff9043e071 -[NSApplication run] + 470
    15  AppKit                              0x00007fff906ba244 NSApplicationMain + 867
    16  QuickToggles                        0x0000000100001882 main + 34
    17  QuickToggles                        0x0000000100001854 start + 52
    18  ???                                 0x0000000000000003 0x0 + 3
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:31:15.820

听起来您想显示有关每个正在运行的进程的信息，例如活动监视器的主窗口。你只是不能在沙箱中做到这一点。时期。*

因此，请提交一份雷达，要求 Apple 为您提供一种方法，并解释为什么您认为这是合理的。同时，保持非沙箱化。如果 Apple 告诉您您不应该这样做（我认为这是一个可能的结果），那么您必须删除该功能，或者停止在 App Store 中销售（并找到一些过渡的方法您现有的用户到另一个频道）。

实际上，您的应用程序所做的一半似乎无法在沙盒中运行——而且无论如何都已经违反了 MAS 指南，这意味着每次提交更新时，您都有被拒绝和卡住的风险。

*实际上，如果用户启用了可访问性，您可以通过例如将脚本发送到 Activity Monitor 并通过 UI 脚本或其他方式抓取其输出，但即使这样有效，MAS 审阅者也不会喜欢它......所以不要'吨。

# resources - 在原生插件中加载资源 (Unity)

> ID：10808632
> 
> 赞同：3
> 
> 时间：2012-05-30T00:44:24.420
> 
> 标签：resources, mono, unity3d

如何从本机插件中加载资源（文本文件、纹理等）？我正在尝试实现 Resources.Load() 的单声道调用，但我不确定如何处理将从该操作返回的对象（假设它成功）。任何帮助将不胜感激 ：）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T07:22:07.743

Unity 支持的插件直接从本机文件系统加载资源的方法是将这些资源放入项目中名为“StreamingAssets”的文件夹中。安装基于 Unity 的应用程序后，此文件夹的内容将复制到本机文件系统（Android 除外，请参见下文）。本机端此文件夹的路径因平台而异。

在 Unity v4.x 及更高版本中，此路径可用作`Application.streamingAssetsPath;`

请注意，在 Android 上，您放置在 StreamingAssets 中的文件会打包到 .jar 文件中，尽管可以通过解压缩 .jar 文件来访问它们。

在 Unity v3.x 中，您必须自己手动构建路径，如下所示：

*   除 iOS 和 Android 外的所有平台：`Application.dataPath + "/StreamingAssets"`
*   IOS：`Application.dataPath + "/Raw"`
*   Android：.jar 的路径是：`"jar:file://" + Application.dataPath + "!/assets/"`

这是我用来处理这个问题的一个片段：

```
if (Application.platform == RuntimePlatform.IPhonePlayer) dir = Application.dataPath + "/Raw/";
else if (Application.platform == RuntimePlatform.Android) {
    // On Android, we need to unpack the StreamingAssets from the .jar file in which
    // they're archived into the native file system.
    // Set "filesNeeded" to a list of files you want unpacked.
    dir = Application.temporaryCachePath + "/";
    foreach (string basename in filesNeeded) {
        if (!File.Exists(dir + basename)) {
            WWW unpackerWWW = new WWW("jar:file://" + Application.dataPath + "!/assets/" + basename);
            while (!unpackerWWW.isDone) { } // This will block in the webplayer.
            if (!string.IsNullOrEmpty(unpackerWWW.error)) {
                Debug.Log("Error unpacking 'jar:file://" + Application.dataPath + "!/assets/" + basename + "'");
                dir = "";
                break;
            }
            File.WriteAllBytes(dir + basename, unpackerWWW.bytes); // 64MB limit on File.WriteAllBytes.
        }
    }
}
else dir = Application.dataPath + "/StreamingAssets/"; 
```

请注意，在 Android 上，Android 2.2 及更早版本无法直接解压缩大型 .jar（通常大于 1 MB），因此您需要将其作为边缘情况处理。

参考资料：[http](http://unity3d.com/support/documentation/Manual/StreamingAssets.html) ://unity3d.com/support/documentation/Manual/StreamingAssets.html ，以及[http://answers.unity3d.com/questions/126578/how-do-i-get-into-my-streamingassets-folder -from-t.html](http://answers.unity3d.com/questions/126578/how-do-i-get-into-my-streamingassets-folder-from-t.html)和[http://answers.unity3d.com/questions/176129/accessing-game-files-in-xcode-project.html](http://answers.unity3d.com/questions/176129/accessing-game-files-in-xcode-project.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-07T10:20:24.227

我想就事物的本机方面提供这个问题的答案。

**iOS**

这真的很简单——你可以像这样进入本机端的 StreamingAssets 路径：

```
NSString* bundlePath = [[NSBundle mainBundle] bundlePath];
NSString* streamingAssetsPath = [NSString stringWithFormat:@"%@/Data/Raw/", bundlePath]; 
```

**安卓**

我不喜欢在 Android 上使用流媒体资产，复制所有有关 IMO 的文件是一个混乱的解决方案。一种更简洁的方法是在插件目录中创建[文档中定义的目录结构。](http://developer.android.com/guide/topics/resources/providing-resources.html)

因此，例如，图像可以在您的 Unity 项目中像这样定位：

```
Assets/Plugins/Android/res/drawable/image.png 
```

然后，在 Android 端，您可以像这样访问它的资源 ID：

```
Context context = (Context)UnityPlayer.currentActivity;
String packageName = context.getPackageName();
int imageResourceId = context.getResources().getIdentifier("image", "drawable", packageName); 
```

由您决定如何从那里处理其他所有事情！希望这可以帮助 ：）

# c# - 我可以在导入数据库之前处理 SqlBulkCopy 类中的数据吗？

> ID：10808634
> 
> 赞同：1
> 
> 时间：2012-05-30T00:44:50.643
> 
> 标签：c#, asp.net, dataset

我想将数据从电子表格导入数据库表。不幸的是，电子表格中的数据很乱，到处都包含“\n”。我想在批量导入之前将其删除。

批量复制过程实际上需要 2 个步骤。一世。将数据从电子表格复制到数据集。ii. 执行 SqlBulkCopy 将所有数据复制到数据库表中

如果我无法处理 SqlBulkCopy 类中的数据，那么在 DataSet 中执行此操作的最佳方法是什么？

```
 //get the data from the spreadsheet to a dataset
    DataSet ds = new DataSet();
    oledbConn.Open();
    OleDbCommand cmd = new OleDbCommand("SELECT * FROM [sheetname]"), oledbConn);
    OleDbDataAdapter oleda = new OleDbDataAdapter();
    oleda.SelectCommand = cmd;
    oleda.Fill(ds);

    //execute to bulkcopy with the dataset
    using (SqlBulkCopy bulkcopy = new SqlBulkCopy(conn))
    {
        bulkcopy.DestinationTableName = "[DestinationTableName]";
        bulkcopy.WriteToServer(ds.Tables[0]);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:21:12.490

这是我想出的用于删除将在 Fill 之后运行的换行符的代码

```
foreach (DataRow dr in ds.Tables[0].Rows) 
{
    foreach (DataColumn dc in ds.Tables[0].Columns) 
    {
       if (dc.DataType == typeof(string)) 
       {
          dr[dc] = dr[dc].ToString().Replace("\n", "");
       }
     }
} 
```

# asp.net-mvc-3 - 在控制器中获取路由值

> ID：10808638
> 
> 赞同：0
> 
> 时间：2012-05-30T00:45:10.743
> 
> 标签：asp.net-mvc-3

使用 MVC 3，用户可以访问类似的 URL`app/Controller/Details/123`

页面上的`$.ajax`请求回发到`/Controller/AnotherAction`.

在里面`AnotherAction`，我想`IDNumber`在浏览器中看到...

我试过看这个`Request`物体​​，但它们都是`return Controller/AnotherAction`：

```
HttpContext.Request.Path, 
HttpContext.Request.Url.AbsolutePath,
HttpContext.Request.RawUrl,
HttpContext.Request.Url.ToString() 
```

有没有办法从浏览器看到的详细信息中获取 ID 号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:50:41.193

如果我理解正确，那么您需要做的就是向您的 Action Method 添加一个名为 id 的参数。它可以是字符串或 int 类型。模型绑定将处理翻译。这假设您在 AJAX 调用中将 id 传递给服务器。

如果这不起作用，请将您的方法的签名添加到您的问题中。还向我们展示您的 ajax 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:52:23.607

如果您在 ajax 调用正在调用的操作方法中检查它，那么所有这些`Request`属性都会为您提供有关当前 Ajax 请求的信息。不是地址栏中的那个。

您需要专门传递相关的 ID/键作为操作方法的参数并使用它们。

# c++ - 如何在 MFC 上实现气泡

> ID：10808640
> 
> 赞同：1
> 
> 时间：2012-05-30T00:45:41.543
> 
> 标签：c++, mfc

这是我在 Stackoverflow 上的第一个问题。

我的问题是：如何在 MFC 上实现语音气泡控制（用于对话——我的意思是聊天）。

我想找到一种简单的方法，而不是从**CScrollWnd**制作自定义控件。或者我想使用**Richedit**组件。

有人知道任何源代码或示例吗？

*   那必须嵌入自定义进度控件。
*   那必须嵌入一个 OLE 控件（如 Richedit）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:09:54.980

如果我理解正确，您可以为此目的使用 GDI+。请参阅代码项目中的“[在 GDI+ 中创建语音气球/语音气泡”。](http://www.codeproject.com/Articles/51377/Creating-a-Speech-Balloon-Speech-Bubble-in-GDI)我认为这是一个很好的例子，您可以通过添加进度条或更改气球可视化来进一步扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:56:30.563

你可以嵌入一个 web 控件，并借鉴已经在 CSS 主题上完成的工作来模仿效果：

[http://www.rwe-uk.com/blog/comments/ichat_like_speech_bubbles_with_css_3/](http://www.rwe-uk.com/blog/comments/ichat_like_speech_bubbles_with_css_3/)

我自己会使用 Qt 的 QtWebKit：

[http://qt-project.org/doc/qt-4.8/examples-webkit.html](http://qt-project.org/doc/qt-4.8/examples-webkit.html)

它具有很大的灵活性，包括将任意 Qt Widget 嵌入到 Web 布局中并与之通信。这可能是一个进度条，或者在这个例子中......一个 QTableWidget：

[http://qt-project.org/doc/qt-4.8/webkit-webplugin.html](http://qt-project.org/doc/qt-4.8/webkit-webplugin.html)

但我确信 MFC 现在有某种嵌入互联网浏览器的功能，效果比以前更好。（好吧，我不确定。）

# matlab - matlab联合元胞数组

> ID：10808642
> 
> 赞同：2
> 
> 时间：2012-05-30T00:45:51.473
> 
> 标签：matlab, union, cell-array

我需要一些帮助来合并两个单元格数组。

我有：

```
data{1} =   'alon'    'shmiel'
values{2} =   'Image'    'Area' 
```

我想将它们合并为一个联合，以便`data{1}`第一个和`values{2}`第二个：

```
'alon'   'shmiel'   'Image'    'Area' 
```

我试过：

1.  `values{2} = {data{1}(1:2),'Image', 'Area'};`
    但我得到了：`{1x2 cell} 'Image' 'Area'`

2.  `union(data{1},values{2})`
    但我得到了：`'Area' 'Image' 'alon' 'shmiel'`

3.  `union(data{1},values{2},'stable')`
    但我得到一个错误：`Warning: Third argument is ignored for cell arrays.`

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:00:42.240

你真的想要一个[联合](http://www.mathworks.com/help/techdoc/ref/union.html)（即只有唯一值）吗？或者你只是想连接数组，正如你第一次尝试所建议的那样？

如果您只想连接，请尝试

```
horzcat(data{1},values{2}) 
```

# .net - 如何从在 64 位窗口下运行的 32 位应用程序访问 64 位 DLL？

> ID：10808646
> 
> 赞同：3
> 
> 时间：2012-05-30T00:47:07.710
> 
> 标签：.net, ms-office, remoting

操作系统是 Windows XP 64 位。

该应用程序是 Microsoft Office 32 位，在其上运行我的应用程序（一个办公室插件）。

该 DLL 是一个 64 位 Adob​​e Acrobat “IFilter” dll，它可以访问 .pdf 文件的内容。

我认为问题的解决方案是找到 IFilter dll 的 32 位版本，但由于操作系统是 windows XP 64 位，唯一可以正确注册的版本是 64 位版本。

将我的 .NET 项目的目标平台设置为 x86、64 位或“任何 CPU”都不能解决问题。

64 位 IFilter 仅在我从控制台应用程序中调用它时才能正常工作，但是一旦从 office 加载项的上下文中调用它，它就什么也不做。

解决这个问题的最佳方法是什么？我是否应该将 64 位 dll 加载到新进程中并让 Office 插件使用远程处理与其通信？

另外，对于那些熟悉 IFilter 的人，是否可以将 32 位版本的 IFilter 与 office 插件一起部署，然后直接访问它，而无需在注册表中搜索正确安装的 IFilter？（我做不到）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:55:43.483

您将需要[Thunk](http://en.wikipedia.org/wiki/Thunk_%28compatibility_mapping%29)到 DLL。这在WOW64中是否可行我不确定。当然，在 NT 的早期，它在 WOW32 上可用。

该理论只是导致程序代码中断 - 这将转入加载 DLL 的 32 位地址空间。

这听起来像是一个有趣的项目。

但是，对于更快的解决方案，我会使用您所说的 - 在 64 位进程中托管 dll 并使用您喜欢的任何 IPC 进行通信（个人 WCF 命名管道非常容易，或者如果数据 tx 高，您可以使用内存映射文件体积。

# javascript - 数据表的列数

> ID：10808651
> 
> 赞同：11
> 
> 时间：2012-05-30T00:47:32.920
> 
> 标签：javascript, jquery, datatables

如何获取数据表中的列数？

我可以通过执行 oTable.fnGetData().length 来获取行数，但是如何获取列数以便可以像这样遍历每个单元格：

```
var numColumns = //How to get the number of columns?
    for(var r=0;r<oTable.fnGetData().length;r++){
        for(var c=0;c <= numColumns;c++){
            console.log("[R]: "+r+ "[C]: "+c+ " data: "+oTable.fnGetData(r,c));   
        }
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-10-01T14:12:11.263

### 获取列数

*   **数据表 1.9+**

    ```
    // Get number of all columns
    var numCols = $('#example').dataTable().fnSettings().aoColumns.length;

    // Get number of visible columns
    var numCols = $('#example thead th').length; 
    ```

    请参阅[此 jsFiddle](https://jsfiddle.net/LL647oLr/4/)进行演示。

*   **数据表 1.10+**

    ```
    // Get number of all columns
    var numCols = $('#example').DataTable().columns().nodes().length;

    // Get number of visible columns
    var numCols = $('#example').DataTable().columns(':visible').nodes().length;

    // Get number of visible columns (alternative way)
    var numCols = $('#example thead th').length; 
    ```

    请参阅[此 jsFiddle](http://jsfiddle.net/mpskjkf4/3/)进行演示。

### 迭代每个单元格

*   **数据表 1.10.6+**

    ```
    $('#example').DataTable().cells().every( function (rowIndex, colIndex) {
        var data = this.data();

        console.log("Row:", rowIndex, "Col:", colIndex, "Data:", data);
    }); 
    ```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-30T01:17:08.610

fnGetData 可用于获取单个数据行。因此，您可以简单地检查数据行的长度以了解列数。

例子：

```
oTable.fnGetData(someRowNumber).length; 
```

以上将返回该数据行中的列数。

# html - 如何使用固定的“导航”制作 2 列正文布局

> ID：10808654
> 
> 赞同：0
> 
> 时间：2012-05-30T00:47:40.843
> 
> 标签：html, css, css-position

我是初学者，所以我相信这很容易。我正在尝试复制下面的图像，其中左侧列表/链接是固定的，因此当您向下滚动图像时它会保持原位（我也可能添加第三列作为固定描述）。我尝试使用`float: left;`链接和图像（我也尝试`float: right;`使用图像），但是一旦我放置`position: fixed;`链接，它会自动将图像移动到最左边或最右边。

容器为 960 像素（链接为 220，图像为 420，描述为 320）。

### HTML

```
<div class="container">
    <div id="about">
        <ul id="print_list">
            <li><a href="eff.html"><span style="color: #b13c19">Earth Friendly
                      Foods </span> </a></li>
            <li> <a href="tmad.html"> Trivedi Museum of Art and Design </a></li>
            <li> <a href="amitpandya.html"> Amit Pandya, DDS </a></li>
            <li> <a href="posterillos.html"> Posters & Illustrations </a></li>
            <li> <a href="banners.html"> Banners </a></li>
            <li> <a href="movieposters.html"> Movie Posters </a></li>
            <li> <a href="greetingcards.html"> Greeting Cards </a></li>
        </ul>
        <div class="images">
            <img src="images/portfolio/tmad1.jpg" width="420px" height="308" alt="
                           Trivedi Museum of Art and Design" />
            <img src="images/portfolio/tmad2.jpg" width="420px" height="315" alt="
                           Trivedi Museum of Art and Design" />
            <img src="images/portfolio/tmad3.jpg" width="420px" height="315" alt="
                           Trivedi Museum of Art and Design" />
            <img src="images/portfolio/tmad4.jpg" width="420px" height="315" alt="
                          Trivedi Museum of Art and Design" />
            <img src="images/portfolio/tmad5.jpg" width="420px" height="315" alt="
                          Trivedi Museum of Art and Design" />
        </div>
    </div>
</div> 
```

### CSS ^(（我知道我可能滥用了一些元素，所以请耐心等待）)

```
#about {
    float: left;
    width: 960px;
    margin-top: 50px;
    padding-bottom: 30px;
    border: 1px solid;

}

#print_list {
    position: fixed;
    float: left;
    width: 220px;
    margin: 0;
    padding: 0 10px 0 0;
    border-right: 1px solid #bbb;
}

#print_list li {
    list-style-type: none;
    margin:5px 0 0 0;
    text-align: right;
}

#print_list a, #print_list a:link, #print_list a:visited, #print_list a:active {
    color: #666;
    text-decoration: none;
}

#print_list a:hover {
    color: #b13c19;
}

.images {
    float: right;
    right: 20px;
    width: 420px;
    margin: 0;
    padding: 0 5px 0 5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:02:12.227

您可以创建一个包含两列的表格，并使 div（右侧的一个）可滚动。

```
<table>
    <tr>
    <!-- First column -->  
    <td>
        <ul id="print_list">
            <li> <a href="eff.html"> <span style="color: #b13c19"> Earth Friendly
                  Foods </span> </a></li>
            <li> <a href="tmad.html"> Trivedi Museum of Art and Design </a></li>
            <li> <a href="amitpandya.html"> Amit Pandya, DDS </a></li>
            <li> <a href="posterillos.html"> Posters & Illustrations </a></li>
            <li> <a href="banners.html"> Banners </a></li>
            <li> <a href="movieposters.html"> Movie Posters </a></li>
            <li> <a href="greetingcards.html"> Greeting Cards </a></li>
        </ul>
    </td>

    <!-- Second column -->
    <td>
        <div class="images" style="overflow: scroll;">

            <img src="images/portfolio/tmad1.jpg" width="420px" height="308" alt="
                       Trivedi Museum of Art and Design" />
            <img src="images/portfolio/tmad2.jpg" width="420px" height="315" alt="
                       Trivedi Museum of Art and Design" />
            <img src="images/portfolio/tmad3.jpg" width="420px" height="315" alt="
                       Trivedi Museum of Art and Design" />
            <img src="images/portfolio/tmad4.jpg" width="420px" height="315" alt="
                      Trivedi Museum of Art and Design" />
            <img src="images/portfolio/tmad5.jpg" width="420px" height="315" alt=" 
        </div>
    </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:40:56.553

[`position: fixed`](https://developer.mozilla.org/en/CSS/position)从 DOM 流中删除应用它的元素。如果您知道页面左侧总会有 220px 的间距，那么您可以简单地为`images`div 添加 220px 的边距：

```
.images {
    /* Your declarations go here */
    margin-left: 220px;
} 
```

也可以看看：

*   [位置上的怪癖模式页面](http://www.quirksmode.org/css/position.html)
*   [caniuse.com 上的完整浏览器兼容模式图表](http://caniuse.com/css-fixed)

# jakarta-ee - 可以从 Spring Roo Application 创建桌面应用程序 + Web 应用程序

> ID：10808656
> 
> 赞同：1
> 
> 时间：2012-05-30T00:47:54.330
> 
> 标签：jakarta-ee, spring-roo

我目前正在探索使用[Spring Roo](http://www.springsource.org/spring-roo)来制作一个成熟的 CRUD Web 应用程序的可能性。由于 Roo 构建在 Java EE 之上并使用 bean、JPA 进行实体管理，我想知道是否可以使用相同的代码库来开发桌面应用程序。我的意思是使用 Java EE 6 和 eclipse，我可以为 bean 创建一个 EJB 项目、一个 EAR（企业应用程序项目）、一个 Web 应用程序项目，一切都完美无缺。Roo 也可以这样吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:23:58.597

如果您正在寻找从 spring roo 创建桌面和 Web 应用程序，这是可能的。

Roo 有助于自动创建具有 Web 用户界面的应用程序，但您几乎只能靠自己来创建桌面用户界面。此外，您必须决定如何将桌面用户界面连接到 roo 生成的应用程序。

因为 roo 生成的应用程序只是一个 spring 应用程序，所以您可以例如使用[spring remoting](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/remoting.html)将您的 roo 服务暴露给桌面用户界面。

# iphone - 计算 2 个时间间隔之间的时间差 - 逻辑问题

> ID：10808664
> 
> 赞同：1
> 
> 时间：2012-05-30T00:49:12.490
> 
> 标签：iphone, objective-c, ios, nsdate, nstimeinterval

我有一个字符串，时间如下；

```
NSString *time = "06.45 pm"; 
```

我需要假设这个时间是今天的日期，然后获取**当前的 System time**，并计算两者之间的时间差。

我怎样才能做到这一点 ？

注：以上时间未指定a `date`，（仅给出时间）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T01:13:11.057

```
NSString *time = @"06.45 pm";

NSDate *date1;
NSDate *date2;
{
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"hh.mm a"];
    date1 = [formatter dateFromString:time];
    date2 = [formatter dateFromString:[formatter stringFromDate:[NSDate date]]];
    [formatter release];
}
NSTimeInterval interval = [date1 timeIntervalSinceDate: date2];//[date1 timeIntervalSince1970] - [date2 timeIntervalSince1970];
int hour = interval / 3600;
int minute = (int)interval % 3600 / 60;

NSLog(@"%@ %dh %dm", interval<0?@"-":@"+", ABS(hour), ABS(minute)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T01:59:34.630

确保在执行此操作时使用日历操作，以便将时间更改（夏令时、闰秒等）考虑在内：

```
NSString    *time  = @"06.45 pm";
NSCalendar  *cal   = [NSCalendar currentCalendar];
NSDate      *today = [NSDate date];

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"hh.mm a"];

// Convert time to a NSDate and break it down into hours, minutes, and seconds:
NSDate           *timeAsDate = [formatter dateFromString:time];
NSDateComponents *timeComps  = [cal components:NSHourCalendarUnit |
                                               NSMinuteCalendarUnit |
                                               NSSecondCalendarUnit
                                      fromDate:timeAsDate];

// Take today's date and add "time" to it:
NSDateComponents *comps  = [cal components:NSYearCalendarUnit |
                                           NSMonthCalendarUnit |
                                           NSDayCalendarUnit
                                  fromDate:today];
comps.hour               = timeComps.hour;
comps.minute             = timeComps.minute;
comps.second             = timeComps.second;
NSDate *timeOnTodaysDate = [cal dateFromComponents:comps];

// Now calculate the difference:
NSTimeInterval difference = [today timeIntervalSinceDate:timeOnTodaysDate]; 
```

# ios - 在另一个中“嵌入” UIViewController

> ID：10808667
> 
> 赞同：3
> 
> 时间：2012-05-30T00:49:48.780
> 
> 标签：ios, uiview, uiviewcontroller

我有一个 UIViewController (DetailViewController)，它由顶部的导航栏和覆盖屏幕其余部分的 UIView 组成。是否可以使用 DetailViewController 以外的 UIViewController 来控制 UIView？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-16T04:21:48.887

你可以这样做，但你不能忘记调用 Apple 嵌入 UIViewControllers 所需的方法。否则，您的视图控制器将不会被操作系统调用来处理某些事件。

添加视图控制器：

```
[self addChildViewController:childViewController];                 
[self.view addSubview:childViewController.view];
[childViewController didMoveToParentViewController:self]; 
```

要删除视图控制器：

```
[childViewController willMoveToParentViewController:nil];  
[childViewController.view removeFromSuperview];            
[childViewController removeFromParentViewController]; 
```

相关文档：

*   在 UIViewController 类参考中[实现一个容器视图控制器](https://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)
*   iOS 视图控制器编程指南中的[实现容器视图控制器](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ImplementingaContainerViewController.html)

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/8379759/how-does-view-controller-containment-work-in-ios-5)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T04:27:13.723

您也可以在情节提要中完成所有这些操作。只需将容器视图拖出到您的主视图控制器中，然后使用从它的嵌入到您的嵌入式视图控制器。它将为您正确设置所有视图控制器层次结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-03T16:31:24.687

在 Swift 5.3 中，您可以使用以下扩展：

```
extension UIViewController {
    /// Embeds a UIViewController inside of another UIViewController using its view.
    /// - Parameters:
    ///   - Parameter viewController: UIViewController to embed
    ///   - Parameter frame:  A frame to be used. Nil by default and used view's frame.
    func embed(viewController: UIViewController, frame: CGRect? = nil) {

        addChild(viewController)
        view.addSubview(viewController.view)
        viewController.view.frame = view.bounds
        viewController.didMove(toParent: self)
    }

    /// Removes an embedded UIViewController from a UIVIewController
    /// - Parameters:
    ///   - Parameter embeddedViewController: UIViewController to remove
    func remove(embeddedViewController: UIViewController) {
        guard children.contains(embeddedViewController) else {
            return
        }

        embeddedViewController.willMove(toParent: nil)
        embeddedViewController.view.removeFromSuperview()
        embeddedViewController.removeFromParent()
    }
} 
```

# php - 用于“IN”语句的变量/字符串的PHP PDO bindParam ...？

> ID：10808669
> 
> 赞同：0
> 
> 时间：2012-05-30T00:50:02.590
> 
> 标签：php, mysql, sql, string, pdo

> **可能重复：**
> [PHP PDO：我可以将数组绑定到 IN() 条件吗？](https://stackoverflow.com/questions/920353/php-pdo-can-i-bind-an-array-to-an-in-condition)

好吧，这真的很困扰我。如何在 PHP 的 PDO 中为 SQL“IN”语句绑定参数（具有多个值）？

这里是基本...

```
$allow = "'red', 'blue'";

SELECT * FROM colors WHERE type IN (:allow);

$stmt->bindParam(':allow', $allow); 
```

当我自己插入 $allow 时，这可以正常工作，但是当尝试绑定它并使用 :allow 时，它无法工作。有人知道为什么是这样吗？

注意：我确实正确设置了 PDO 的其余部分，其他变量（不是字符串）正常工作，我只是没有包含它，因为它是不必要的。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T01:28:57.190

deceze 在评论中所说的是正确的。这是我以前做过的一种方法。

基本上，您`IN`通过循环数组值并添加绑定名称来创建 sql 字符串的一部分。

```
$allow = array( 'red', 'blue' );

$sql = sprintf(
    "Select * from colors where type in ( %s )",
    implode(
        ',',
        array_map(
            function($v) {
                static $x=0;
                return ':allow_'.$x++;
            },
            $allow
        )
    )
); 
```

这导致`Select * from colors where type in ( :allow_0,:allow_1 )`

然后只需循环`$allow`数组并使用 bindValue 绑定每个变量。

```
foreach( $allow as $k => $v ){
    $stmnt->bindValue( 'allow_'.$k, $v );
} 
```

* * *

我在意识到 deceze 与给出类似示例的问题相关联之前添加了这个。我将把它留在这里，因为它展示了如何使用命名绑定变量而不是 ?s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:28:28.603

绑定函数会将整个列表视为一个字符串，而不是多个离散值。

# objective-c - Objective-C 和从另一个类调用方法：发送到类的无法识别的选择器

> ID：10808670
> 
> 赞同：1
> 
> 时间：2012-05-30T00:50:08.137
> 
> 标签：objective-c, class, methods

我在 中创建了一个方法`ClassA`并想在`ClassB.m`.

在`ClassA.h`我有这个：

```
@interface ClassA : NSObject <NSCoding>
...
+ (NSInteger) methodA:(CGPoint)touchPoint;
...
@end 
```

我`ClassA.m`已经宣布`methodA`：

```
+ (NSInteger)methodA:(CGPoint)touchPoint
{
// return an integer based on touchPoint's value
} 
```

并在`ClassB.m`：

```
#import "ClassA.h"
...
-(void)methodThatCallsMethodA
    UITouch *touch = [touches anyObject];
    CGPoint touchPoint = [touch locationInView:self];
    NSInteger integerUsingClassA = [ClassA methodA:touchPoint];
    // do some stuff
} 
```

我有一种感觉，问题在于我如何调用该方法，而现在的对象`ClassA`是错误的，但我不确定。错误是`unrecognized selector sent to class ...`。请记住，如果我创建一个与 inside 相同的方法，`methodA`我`ClassB.m`可以像调用`methodThatCallsMethodA`对象一样调用它`self`，没有问题。

~~~~~~~~~~~

我也试过这个`ClassB.h`：

```
#import "ClassA.h"
@interface...
@property(nonatomic, retain)ClassA *objectOfClassA;
...
@end 
```

并改变`ClassB.m`：

```
#import "ClassA.h"
@synthesize objectOfClassA;
- (void)methodThatCallsMethodA
{
    UITouch *touch = [touches anyObject];
    CGPoint touchPoint = [touch locationInView:self];
    if(!self.objectOfClassA)
         self.objectOfClassA = [[ClassA alloc] init];
    NSInteger integerUsingClassA = [self.objectOfClassA methodA:touchPoint];
    NSLog(@"ClassA: %i", integerUsingClassA);
} 
```

但现在它警告说`instance method -methodA not found`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:17:01.923

`ClassA`第一部分对于调用in的类方法部分是正确的（由in`ClassB`标记）。第二部分对于调用in的实例方法部分是正确的（由in标记）。`+(NSInteger)``ClassA``ClassA``ClassB``-(NSInteger)``ClassA`

错误在于 Xcode 4 没有保存更改，而是使用旧版本进行构建。

# javascript - javascript - 如何防止 toFixed 舍入小数

> ID：10808671
> 
> 赞同：14
> 
> 时间：2012-05-30T00:50:21.563
> 
> 标签：javascript, tofixed

我对 html、javascript 和 css 很陌生，所以如果我的问题对你来说听起来很愚蠢，请原谅。我的问题是如何防止函数`toFixed()`四舍五入十进制数。

这是我的链接：http: [//jsfiddle.net/RWBaA/4/](http://jsfiddle.net/RWBaA/4/)

我想要做的是，每当用户在文本框中键入时，我都会检查输入是否是有效的十进制数字。同时我还想检查输入是否是有效货币，这意味着它只能在小数点右侧再添加两个数字。问题是当用户输入小数点后的第三个数字时，如果第三个数字> = 5，则小数点后的第二个数字会四舍五入到最接近的百分之一。

测试输入：

```
  输入输出  
123456.781 -> 123456.78

123456.786 -> 123456.79

```

为什么我的代码不允许 chrome 中的箭头键？

请帮忙。如果您有更好的解决方案，您可以自由提出建议。提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-05-25T15:39:32.433

这更简单：

```
function truncateToDecimals(num, dec = 2) {
  const calcDec = Math.pow(10, dec);
  return Math.trunc(num * calcDec) / calcDec;
} 
```

所以：

```
truncateToDecimals(123456.786) -> 123456.78 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-30T00:54:09.223

~~首先将数字（向下）四舍五入到最接近的分：~~

 ~~```
val = Math.floor(100 * val) / 100; 
```~~  ~~**编辑**有人指出，例如 1.13 失败。我自己应该更清楚！

这失败了，因为 1.13 的内部浮点表示略小于 1.13 - 将其乘以 100 不会产生 113，而是 112.99999999999998578915 然后将其向下舍入到 1.12

重新阅读问题后，您似乎实际上只是在尝试执行输入验证（见下文），在这种情况下，您应该使用普通的表单验证技术，并且根本不应该使用`.toFixed()`。该功能用于*呈现*数字，而不是用它们计算。

```
$('#txtAmount').on('keypress', function (e) {
    var k = String.fromCharCode(e.charCode);
    var v = this.value;
    var dp = v.indexOf('.');

    // reject illegal chars
    if ((k < '0' || k > '9') && k !== '.') return false;

    // reject any input that takes the length
    // two or more beyond the decimal point
    if (dp >= 0 && v.length > dp + 2) {
        return false;
    }

    // don't accept >1 decimal point, or as first char
    if (k === '.' && (dp >= 0 || v.length === 0)) {
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-11T05:39:00.550

你可以试试这个，它不会四舍五入你的小数

```
/**
 * @param {any} input 
 * @param {number} decimals 
 */
var toFixed = function(input, decimals) {
  var arr = ("" + input).split(".");
  if (arr.length === 1) return input;
  var int = arr[0],
      max = arr[1].length,
      dec = arr[1].substr(0, decimals > max ? max : decimals);
  return decimals === 0 ? int : [int, "." , dec].join("");
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-12-17T14:42:26.927

此外，为了防止 toFixed() 对小数进行四舍五入并使您的数字保留两位小数，您可以使用它，

```
val = (Math.floor(100 * val) / 100).toFixed(2); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-06T10:48:35.770

如果你想避免四舍五入......例如。1.669 => 1.67, 548.466 => 548.47

函数结果如下所示：1.669 => 1.66, 548.466 => 548.46

那么下面的 JQuery 函数会帮助你。它经过测试并正常工作。

```
<input name="a" type="text" id="a" size="7%" tabindex="2">

  $('#a').keyup(function(e){
        if($(this).val().indexOf('.')!=-1){ 
            if($(this).val()=="." && $(this).val().length==1){
                this.value = parseFloat(0).toFixed(1);
            }else if($(this).val().split(".")[1].length > 2){                
                if( isNaN( parseFloat( this.value ) ) ) 
                    return;
                  this.value = $(this).val().split(".")[0]+"."+$(this).val().split(".")[1].substring(0,2);
            }   
        }
   }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-16T08:20:01.690

这是经过测试的，适用于所有情况。

```
function truncateTwoDecimals(num, dec = 2) {
  const totalDecimal = countDecimals(num);
  if (totalDecimal === 1) {
    dec = 1;
  }
  if (totalDecimal === 2) {
    return num;
  }
  const calcDec = Math.pow(10, dec);
  return Math.trunc(num * calcDec) / calcDec;
}
function countDecimals(value) {
  if(Math.floor(value) === value) return 0;
  return value.toString().split(".")[1].length || 0; 
}
const res = truncateTwoDecimals(1.13);
console.log(res);
console.log(truncateTwoDecimals(4492903605.9));
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-22T10:31:24.577

这听起来可能很愚蠢，但为什么不防止在数学上四舍五入呢？

基本上你正在做的是将值替换半个精度点，这样四舍五入就变成了底线。

正常：0 到 4 变成 0 5 到 9 变成 10

减去半个精度点后：-4（变为 6）到 -1（变为 9）生成 0 0 到 4 生成 0

您需要减去 0.5/10^N 在这种情况下，对于 2 个小数 0.5/10^2 = 0.5/100 = 0.005 对于 4 个小数，您需要减去 0.00005

但是，由于浮点在计算机和 cpu 中的工作方式，您需要确保您有足够的精度来使用它。因此，我强烈建议您将精度降低到 CPU 无法搞砸的程度。

```
num = 123456.786
Math.trunc(num) + (num-Math.trunc(num)-0.005).toFixed(2)

num = 123456.781
Math.trunc(num) + (num-Math.trunc(num)-0.005).toFixed(2)

num = 123456.789
Math.trunc(num) + (num-Math.trunc(num)-0.005).toFixed(2) 
```~~

# javascript - 监控谁在线？

> ID：10808672
> 
> 赞同：2
> 
> 时间：2012-05-30T00:50:22.717
> 
> 标签：javascript, node.js, websocket, socket.io

使用 socket.io 我可以可靠地依靠事件来确定谁在线以及谁丢失或关闭了连接`connect`？与我联系并确定谁与我自己`disconnect`联系会更可靠吗？`heartbeat`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:17:00.997

一个直接依赖于另一个。如果心跳失败（超时），那么 socket.io 将发出`disconnect`事件。

# php - 关闭流服务器套接字很慢

> ID：10808679
> 
> 赞同：4
> 
> 时间：2012-05-30T00:51:25.033
> 
> 标签：php, sockets

关闭从返回的资源`stream_socket_server()`非常慢（约 0.5 秒），正如此脚本所测试的：

```
<?php

echo "Creating socket...";
$s = stream_socket_server("tcp://127.0.0.1:4567");
echo "done\n";

echo "Closing socket...";
fclose($s);
echo "done\n";

?> 
```

90% 的执行时间都花在了`fclose($s);`

等效的 C++ 应用程序在尝试关闭侦听套接字时不会遇到这种延迟长度，而是在 < 0.03 秒内关闭。是否有影响这一点的特定于 PHP 的配置？

*   **操作系统：** Windows 7 x64 Ultimate
*   **PHP:** 5.4.0 (cli)
*   **配置**：默认`php.ini`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:11:28.990

好的，

所以，这里发生的事情是，您不仅需要等待应用程序关闭套接字，还需要等待打开的 TCP 套接字在网络层关闭。

当您有一个打开的套接字时，需要来自服务器和对等方的 FIN 才能关闭套接字，或者如果任一方收到 FIN，则默认超时（通常为 600 秒，具体取决于设置）。

您可以尝试帮助加快速度的方法是关闭您的套接字：

```
stream_socket_shutdown 
```

# html - 在网站上显示电影

> ID：10808681
> 
> 赞同：1
> 
> 时间：2012-05-30T00:51:28.633
> 
> 标签：html, seo, meta-tags

不久前，有人将我链接到一个页面，该页面显示了一种使用 HTML 来指定数据类型的方法，但*我不记得它们叫什么了。*它基本上允许你做这样的事情：

```
<div datatype='film'>
  <span datatype='title'>True Stories</span><span datatype='created'>1986</span>
  Cast: <span datatype='person'><span datatype='name'>David Byrne</span></span>
</div> 
```

这扩展到几乎所有类型的数据，从书籍到照片。谁能记住我的记忆并告诉我这些叫什么以及它们是如何格式化的？它应该帮助搜索引擎确定他们正在查看的内容。我已经尝试搜索有关元标记的信息，但我一无所获。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T00:52:21.450

您正在寻找[schema.org](http://schema.org/)，您可以在其中找到*微格式*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T00:52:31.097

我认为您正在寻找的是[http://schema.org](http://schema.org)。

这种标记风格可以帮助您获得丰富的片段以显示在 SERP 中

这是一个方便的工具来测试你的标记 [http://www.google.com/webmasters/tools/richsnippets](http://www.google.com/webmasters/tools/richsnippets)

# ipad - 将文件下载到 ipad

> ID：10808685
> 
> 赞同：1
> 
> 时间：2012-05-30T00:52:07.627
> 
> 标签：ipad, asp-classic

我在 Web 表单上显示了一个结果集。用户可用的选项之一是将结果下载为 .xls 电子表格。我正在尝试更新这个经典的 asp 代码，以便可以将下载页面保存到 iPad 上，然后用户可以根据需要在 QuickOffice 之类的东西中查看它。

到目前为止的代码是：

```
Response.Clear()
Response.Buffer = true
Response.AddHeader "Content-Disposition", "attachment;filename=results.xls"
Response.ContentType = "application/octet-stream" 
```

然后页面运行并在所有内容生成后运行：

```
response.flush()
response.clear() 
```

问题是，不是允许通过对话框保存内容，而是在浏览器中显示带有原始 .asp 页面标题的内容，我该如何停止呢？

编辑：

我一直在尝试这种方法：

```
Response.Buffer = true
Response.Clear()
Response.ContentType = "application/octet-stream"
Response.AddHeader "Content-Disposition", "attachment;filename=ConversionResult.xls;"

'and i send the file using the stream as
Set adoStream = CreateObject("ADODB.Stream") 
adoStream.Open() 
adoStream.Type = 1 
adoStream.LoadFromFile(Server.MapPath("xls/streamtest.xlsx")) 
Response.BinaryWrite adoStream.Read() 
adoStream.Close 
Set adoStream = Nothing
response.Flush
response.end 
```

用户对文件结构具有权限，但浏览器只是旋转没有任何反应。首先让我以某种方式为自己辩护……我没有 iPad，只花了很短的时间“玩”我可用的那个。在尝试下载文件时，我也没有看到“另存为”或类似的对话框，并且正在阅读有关 iPad 功能的信息。

有一个 safari 下载管理器插件，但我正在尝试确定这是否仅适用于越狱的 ipad，因为显然这不是我们普通客户的选择。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:20:14.553

我认为您必须使用 FSO 将其流式传输到临时文件，然后链接到它。这样 Safari (ipad) 应该提供保存选项。

# ruby-on-rails - 默认范围 - 按 2 列对模型进行排序，其中一列是关联 - Rails

> ID：10808689
> 
> 赞同：0
> 
> 时间：2012-05-30T00:52:25.210
> 
> 标签：ruby-on-rails, sorting, model

我有两个班级`Building`和`Room`. 我想`Room`按建筑物的`name`属性然后按房间的`room_number`属性对模型进行排序。这基本上就是我想要做的：

```
class Room
  belongs_to :building

  default_scope :order => 'building.name, room_number' # Doesn't work.
end 
```

我只是不知道如何让协会运作。有没有办法在 Rails 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T00:58:10.773

您必须先加入`buildings`表格，然后才能在订单条件中引用。

```
default_scope :joins => :building, :order => 'buildings.name, room_number' 
```

# java - 没有抗锯齿的 Java Slick 缩放图像

> ID：10808690
> 
> 赞同：6
> 
> 时间：2012-05-30T00:52:29.100
> 
> 标签：java, antialiasing, slick2d

在 Slick 库（基于 LWJGL）中，您可以在加载图像后缩放图像`getScaledCopy`，但它会应用抗锯齿。我希望边缘保持粗糙；我正在制作像素艺术。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T17:43:46.870

根据评论：

该文档暗示 s 的[`filter`属性](http://slick.cokeandcode.com/javadoc/org/newdawn/slick/Image.html#setFilter%28int%29)`Image`控制图像的缩放方式。要在不平滑的情况下缩放图像，请使用[最近邻滤波器](http://slick.cokeandcode.com/javadoc/org/newdawn/slick/Image.html#FILTER_NEAREST)：

```
Image original = …;
original.setFilter(Image.FILTER_NEAREST);
Image scaled = original.getScaledCopy(); 
```

# javascript - 需要帮助来编写等效于 XHR 请求的 Jquery $.ajax 请求

> ID：10808695
> 
> 赞同：2
> 
> 时间：2012-05-30T00:53:12.433
> 
> 标签：javascript, ajax, jquery

工作 XHR 请求发送一个设置了所有必需的请求标头的文件。

```
var upload = function (file) {
    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/Admin/Upload', true);
    xhr.setRequestHeader('X-Filename', file.name);
    xhr.setRequestHeader('pageid', pageid);
    xhr.setRequestHeader('catid', catid);
    xhr.send(file);
} 
```

尝试使以下工作（使用 jQuery 1.7.2）

```
var xhr = new XMLHttpRequest();

var upload = function (file, xhr) {
    $.ajax
    ({
        url: '/Admin/Upload',
        beforeSend: function (xhr) {
            xhr.setRequestHeader('X-Filename', file.name);
            xhr.setRequestHeader('pageid', pageid);
            xhr.setRequestHeader('catid', catid);

        },
        data: file,
        success: function (data) {

            alert('Load was performed.');
        }

    });
} 
```

**更新：** 好的，所以我已经取得了一些进展，现在请求实际上命中了操作方法，但是输入流中没有数据并且所有文件键数组都是空的，所以实际的文件数据似乎没有通过. 请求标头通过正常。我认为 (data: file) 与 xhr.send(file) 不同吗？

现在使用这个：

```
var upload = function (file) 
{
    $.ajax
    ({
        url: "/Admin/Upload",
        headers: { catid: catid, pageid: pageid },
        processData: false,
        data: file,
        success: function (data) {

            alert('Load was performed.');
        }

    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:20:34.493

尝试也设置`contentType`为`false`和`type`。`'POST'`

```
$.ajax({
    url: "/Admin/Upload",
    type: 'POST',
    headers: { catid: catid, pageid: pageid },
    processData: false,
    contentType: false,
    data: file,
    success: function (data) {
        alert('Load was performed.');
    }
}); 
```

# postgresql - 由于 Postgis 的问题，在我的 Postgresql 数据库中出现错误（找不到 $libdir/postgis-2.0？）

> ID：10808701
> 
> 赞同：2
> 
> 时间：2012-05-30T00:55:00.257
> 
> 标签：postgresql, postgis

今天，当我尝试从包含几何值的列中进行选择时，我随机开始出现此错误

错误：无法访问文件“$libdir/postgis-2.0”

我的选择以前一直运行良好，但今天才开始发生。有关如何解决此问题的任何提示？如果这有什么影响，我一直在更新我的 linux 服务器。

当我加载 pgadmin 以及在该特定列上执行选择查询时出现此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:12:18.487

好吧，显然“发生了一些变化”。您需要找出您的 libdir 设置现在是什么以及为什么它不再具有 postgis-2.0

本手册页讨论了 $libdir 设置以及如何检查它 ht​​tp [://www.postgresql.org/docs/9.1/static/runtime-config-client.html](http://www.postgresql.org/docs/9.1/static/runtime-config-client.html)

在不知道如何安装的情况下无法告诉您如何检查您的 postgis 安装。

假设目录在那里，但调用了别的东西 - 尝试制作一个符号链接。同样，如果它现在有不同的位置。

长期的解决方案是将数据库转储为 SQL（不是自定义格式），将架构路径编辑为新路径并恢复它。

尽管您没有提供任何详细信息，但我猜您的包管理器已经更改了 postgresql 扩展的存储方式/位置。

# css - CSS 导航菜单--悬停状态为父 UL 高度的 100%

> ID：10808707
> 
> 赞同：1
> 
> 时间：2012-05-30T00:56:26.883
> 
> 标签：css, navigation, hover, html-lists, nav

我在一个使用语言翻译插件的网站上有一个典型的 CSS 导航菜单。一些翻译最终比其他翻译更长，这导致一些 li 项目长两行，而兄弟 li 仍然只有一行长的问题。父 UL 垂直拉伸以容纳较长的项目，但由于较短的同级 li 仅一行长，因此它们的样式不太正确。

这很难用语言来解释。看截图： [css截图http://dl.dropbox.com/u/6448156/CAP-hover.png](http://dl.dropbox.com/u/6448156/CAP-hover.png)

可以看到，二线没问题，但是兄弟一线需要承担父级UL的高度，这样右边的白色边框一直向下，hover状态也一直向下一路下来。

如何设置这些 li 项目的样式，以便它们填充父 UL 高度的 100%？（因为将高度设置为 100% 只是将其设置为自身的 100%）

[您可以在http://cap.wizzywighost.com/?s=post&lang=fr](http://cap.wizzywighost.com/?s=post&lang=fr)看到一个现场样本

会喜欢这个。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:03:54.940

最简单的解决方案应该是将border-right: 1px solid #fff 设置为li 而不是子a 的属性。

现在你的代码应该是这样的：

a{...border-right: 1px solid #fff ...}

你希望它看起来像这样： li{...border-right: 1px solid #fff ...}

一个{...}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:29:17.313

让我们看看[高度计算的规格](http://www.w3.org/TR/CSS2/visudet.html#the-height-property)：

> 该百分比是相对于生成框的包含块的高度计算的。如果包含块的高度没有明确指定（即，它取决于内容高度），并且该元素不是绝对定位的，则该值计算为'auto'。

鉴于您没有在父项上设置显式值`<ul>`（因为......好吧，您不能 - 您事先不知道最高框的高度），它会忽略`height:100%;`菜单项。

将该导航块呈现为表格不会受上述影响。考虑到您可能也希望在菜单中垂直对齐导航项，在这里使用表格并不丢人，尤其是考虑到它的支持范围最广，而不是使用`display:table*;`样式。

## 更新：

我看到了您关于无法使用表格的评论。如果您乐于放弃垂直对齐，那么[人造列](http://www.alistapart.com/articles/fauxcolumns/)将是一个容易实现的技巧。它的作用是增加了带有填充的菜单项的渲染高度，但抵消了以负边距占用的任何布局空间：

```
.menu-item, .menu-item a {
    padding-bottom:999px !important;margin-bottom:-999px !important;
} 
```

`!important`只要将这些属性添加到正确的规则中，您实际上就不必使用[fiddled](http://jsfiddle.net/ovfiddle/4kShs/3/)。IMO 这是您可以使用的最简单的与高度无关的修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:25:41.583

我已经为你的导航做了两个解决方案第一个是我刚刚定义了**min-height:50px:**到你的类**div.nav ul li a**

正如下面提到的更新的**CSS**

```
div.nav ul li a {
    border-right: 1px solid white;
    color: white;
    display: block;
    min-height: 50px;
    padding: 5px 10px 3px;
    text-decoration: none;
    width: 167px;
} 
```

一旦你用这个类更新你的css，你会得到想要的结果，我认为你正在寻找这个.....

**第二种方法**

**我在不使用Width 和 Height**的情况下玩过填充，因此您也可以看到替代方法...检查第二种方法**CSS**

```
div.nav {
    background: none repeat scroll 0 0 #89BFE4;
    clear: both;
    color: #FFFFFF;
    font-size: 18px;
    position: relative;
    text-align: center;
    text-transform: uppercase;
    z-index: 199;
}
div.nav ul {
    list-style: none outside none;
    margin: 0;
    overflow: hidden;
    padding: 0;
    text-align: center;
}
div.nav ul li:hover {
    background: none repeat scroll 0 0 #FF9900;
}
div.nav ul li {
    border-right: 1px solid white;
    float: left;
    padding: 10px;
}
div.nav ul li a {
    color: white;
    display: block;
    text-decoration: none;
}
div.nav ul li:last-child a {
    border-right: medium none;
}
div.nav ul li a:hover, div.nav ul li:hover > a {
    color: white;
}
.current-menu-item {
    background: none repeat scroll 0 0 #FF9900;
}
div.nav ul ul {
    background: none repeat scroll 0 0 #FF9900;
    display: none;
    left: 93px;
    position: absolute;
    top: 42px;
    width: 250px;
    z-index: 200;
}
div.nav ul ul li {
    clear: left;
    position: relative;
    text-align: left;
}
div.nav ul ul li:hover, div.nav ul ul li:hover a {
    color: #FF9900;
    background: none repeat scroll 0 0 white;
}
div.nav ul ul li a, div.nav ul li.active li a {
    color: white;
    width: 250px;
}
div.nav ul ul li a:hover, div.nav ul li.active ul li a:hover, div.nav ul li:hover ul li a:hover, div.nav ul li.hover ul li a:hover {
}
div.nav ul > li:hover > ul, div.nav ul > li.hover > ul {
    display: block;
} 
```

我希望这对您也有帮助，我试图为您提供最接近您问题的解决方案....

# javascript - Javascript：从 1xn 二维数组自动转换为长度为 n 的向量

> ID：10808712
> 
> 赞同：0
> 
> 时间：2012-05-30T00:57:10.183
> 
> 标签：javascript, arrays, type-conversion

我在 IE8 中使用 ado 从本地数据库中读取一些值并生成一个二维数组。我希望这个数组的第一个索引是字段，第二个索引是行。因此，即使只有一个字段或一行，我也想要一个二维数组。以下代码充分描述了我用来创建数组的过程：

```
function test() {
  var a = new Array(1);
  alert(a.length); // 1
  for (var i=0; i<10; i++)
    a[0,i] = i;
  alert(a.length); // 10
} 
```

在循环之前，数组长度为 1。之后为 10。这意味着当我想要一个 1xn 数组时，我得到一个长度为 n 的向量。

我什至无法访问其他浏览器来查看这是否发生在其他地方。我的工具非常受限，但那是另一回事了。

提前感谢您的帮助。

马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:59:56.407

你需要这个：

```
function test() {
    var a = [[]]; // create an array within an array using shorthand notation, don't use new Array().

    // a clearer way to explain the above is this:
    // var a = []; // create an empty array with shorthand notation
    // a[0] = []; // create an empty array as the first element of a

    alert(a.length); // 1

    for (var i = 0; i < 10; i++) {
        a[0][i] = i;
    }

    alert(a.length); // 1
}​ 
```

因为 Javascript 没有真正的多维数组，所以您必须使用`a[0][i]`，而不是访问第二个数组`a[0, i]`。这是因为您实际上是在创建一个数组数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T01:03:33.603

Javascript 不知道多维数组。因此，您需要：

```
var a = new Array(1);
alert(a.length); // 1
for (var i=0; i<a.length; i++) { // useless :-)
    a[i] = new Array;
    for (var j = 0; j < 10; j++)
        a[0][j] = j;
}
alert(a.length); // 1 
```

使用数组速记表示法可能更容易理解代码：

```
var a = [new Array(10)];
for (var i=0; i<a[0].length; i++)
    a[0][i] = i;
alert(a.length); // 1 
```

您的方法 with`a[0,i]`被解释为计算结果为 的[表达式序列](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comma_Operator)`i`，因此相当于`a[i]`.

# java - Eclipse中的icepdf-core maven安装不起作用

> ID：10808713
> 
> 赞同：6
> 
> 时间：2012-05-30T00:57:16.097
> 
> 标签：java, maven, maven-2, m2eclipse, icepdf

我需要在 Vaadin 中使用 PDFviewer，它具有 IcePdf 的依赖项......所以我试图安装它，但它给了我 DependencyResolutionException。我也尝试了不同的版本，如 4.1.1、4.2.2 和其他版本，但没有任何效果......我对 maven 不是很熟悉，所以不完全知道如何通过导入添加它，因为它要求提供我完全不知道的工件文件： （。这是我在 pom.xml 中添加的依赖标记。

```
<dependency>
    <groupId>org.icepdf</groupId>
    <artifactId>icepdf-core</artifactId>
    <version>4.1.4</version>
</dependency> 
```

任何想法 ？？？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T23:28:11.927

这个线程有点老，但也许答案对某人仍然有帮助：为 icepdf 添加 maven 依赖项的一种方法是将 ice maven2 存储库以及依赖项添加到项目的 pom 中，如下例所示。不要打扰存储库的 url 说“anonsvn”，他们在那里运行了一个 maven 存储库。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" ... >
  ...
  <repositories>
    <repository>
      <id>ice-maven-release</id>
      <name>Ice Maven Release Repository</name>
      <url>http://anonsvn.icesoft.org/repo/maven2/releases</url>
    </repository>
    ...
  </repositories>
  <dependencies>
    <dependency>
      <groupId>org.icepdf</groupId>
      <artifactId>icepdf-core</artifactId>
      <version>4.4.0</version>
    </dependency>
    ...
  </dependencies>
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:50:24.317

当然，它找不到它，因为正如我所见，Maven Central 和任何最流行的公共 Maven 存储库都没有这个工件。您必须弄清楚如何使用 Maven 获得它。从我 1 分钟的研究来看，它似乎基本上不适用于 Maven 在公共场合的任何地方。

所以，你可以做什么。如果您使用并有权访问某种自己的 Maven 存储库（如内部 Nexus 或其他东西），您可以将下载的 jar 部署到它。这是首选的方式，它并不糟糕。或者，您可以[将其安装](http://maven.apache.org/plugins/maven-install-plugin/install-file-mojo.html)到本地存储库，但每个开发人员在开始项目时都需要这样做。[或者，您可以将这些库与代码一起放入 SCM 并使用系统范围](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#System_Dependencies)依赖它们，但这最糟糕。

# mongodb - GeoJSON 用于平面图

> ID：10808716
> 
> 赞同：7
> 
> 时间：2012-05-30T00:57:59.063
> 
> 标签：mongodb, svg, openlayers, d3.js, geojson

在评估表示办公室平面图的不同技术（因此，基本上是 3d 几何数据和 2d 表示）时，我遇到了许多用于客户端表示的新 javascript 包。

我看到了使用 openlayers.org 的建议，但恐怕大多数功能对我没有用。我目前正在考虑使用 d3js.org 渲染 svg 模型。

1.  努力学习 openlayers 值得吗？从 GeoJson 渲染平面图会更容易吗？
2.  在 GeoJson 中存储平面图（坐标 + 高度、宽度、深度数据）有什么好处。我打算使用MongoDB，听说它原生支持[geoJson](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)。或者用自定义结构（类）存储数据是否足够。我对 GeoJson 了解不多，不确定数据是否需要地理空间。到目前为止，我看到的所有示例都与地图有关，而不是与几何形状有关。

# xml - 如何获取 XML 属性的值？

> ID：10808719
> 
> 赞同：2
> 
> 时间：2012-05-30T00:58:45.477
> 
> 标签：xml, delphi

鉴于下面的 XML 片段，我如何获取 XML 属性的值`TEXT`？

```
<POPULARITY URL="example.com"  SOURCE="panel" TEXT="27503270" /> 
```

消极的...

我的代码...：

```
procedure TForm1.Button1Click(Sender: TObject);
var i:integer;
begin
   if kontrol=0 then
   begin
      XMLDocument1.Active:=false;
      XMLDocument1.FileName:='http://data.alexa.com/data?cli=10&dat=snbamz&url=aliatabak.com';
      XMLDocument1.Active:=true;
   end;
   i:=1;
   baslangic:=XMLDocument1.DocumentElement.ChildNodes.FindNode('SD');
   repeat
      isim:=baslangic.ChildNodes.Nodes['??????'].Text;

      edit1.Text:=isim;

      i:=i+1;
      baslangic:=baslangic.NextSibling;
   Until baslangic=nil;

end; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T02:57:54.027

使用`IXMLNode.Attributes`属性：

```
isim := VarToStr(baslangic.Attributes['TEXT']); 
```

或`IXMLNode.AttributeNodes`属性：

```
Isim := baslangic.AttributeNodes.Nodes['TEXT'].Text; 
```

或者：

```
Attr := baslangic.AttributeNodes.FindNode('TEXT');
If Attr <> nil then
    isim := Attr.Text; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T02:32:50.990

您可以使用 XPath 检索值

试试这个示例应用

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  MSXML,
  SysUtils,
  ActiveX,
  ComObj,
  Variants;

procedure GetInfoXML;
const
 URI='http://data.alexa.com/data?cli=10&dat=snbamz&url=aliatabak.com';
 OK       =200;
 COMPLETED=4;
var
  XMLHTTPRequest  : IXMLHTTPRequest;
  XMLDOMDocument  : IXMLDOMDocument;
  XMLDOMNode      : IXMLDOMNode;
begin
    XMLHTTPRequest := CreateOleObject('MSXML2.XMLHTTP') As IXMLHTTPRequest;
  try
    XMLHTTPRequest.open('GET', URI, False, EmptyParam, EmptyParam);
    XMLHTTPRequest.send('');
    if (XMLHTTPRequest.readyState = COMPLETED) and (XMLHTTPRequest.status = OK) then
    begin
      XMLDOMDocument := XMLHTTPRequest.responseXML  As IXMLDOMDocument2;
      //get the node 
      XMLDOMNode := XMLDOMDocument.selectSingleNode('//ALEXA/SD/POPULARITY');
      //get the "TEXT" attribute
      Writeln(Format('%s',[String(XMLDOMNode.attributes.getNamedItem('TEXT').Text)]));
    end;
  finally
    XMLHTTPRequest := nil;
  end;
end;

begin
 try
    CoInitialize(nil);
    try
      GetInfoXML;
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T01:11:38.100

您可以使用 XMLDataBinding (File/New/Othe/XML/XMLDataBinding) 将 XML 转换为 Delphi 类，选择您的“Alexa.XML”文件。Delphi 将生成一个文件（例如 Alexa.pas），其中包含处理 XML 数据的接口和类。

通过将 XML 映射到 Delphi 类，您可以轻松地浏览 XML 数据。

例子：

```
function TYourClass.GetAlexaText(const FileName: string): string;
var
  XMLDoc1: TXMLDocument;
  Alexa: IXMLALEXAType;
begin
  XMLDoc1 := TXMLDocument.Create(Self);
  XMLDoc1.FileName := FileName;
  XMLDoc1.Active := True;
  Alexa := GetAlexa(XMLDoc1);
  Result := IntToStr(Alexa.SD[1].POPULARITY.TEXT);
end; 
```

希望这对你有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T22:34:50.143

```
isim:=baslangic.ChildNodes['POPULARITY'].AttributeNodes['TEXT'].text; 
```

我找到了。。谢谢。

# php - 用 move_uploaded_file 对 php 生成的文件名进行编码

> ID：10808724
> 
> 赞同：1
> 
> 时间：2012-05-30T01:00:17.937
> 
> 标签：php, apache, unix, filenames

当我通过 filezilla（在 Win7 上）将名为 æøåtest.mp3 的文件上传到 unix 服务器并刷新 filezilla 窗口时，文件更改为 Ã¦Ã¸Ã¥test.mp3。但是当使用浏览器以æøåtest.mp3 访问文件时它工作正常

当我使用 php 上传相同的文件（move_uploaded_file，在 Apache 上，相同的 unix 服务器）并在浏览器中测试时，服务器响应：“%C3%A6%C3%B8%C3%A5test.mp3 not found”。然后我查看filezilla，文件在那里，显示为æøåtest.mp3

嗯，所有这些编码的东西让我很困惑.. url_encoding、url_decoding、url_rawdecoding、iso、utf8 等。我该如何解决这个问题？

我应该禁止/删除文件名中的任何外来字符，除了纯英文吗？

# jquery - 在 jQuery 事件上更改按钮文本和目标

> ID：10808727
> 
> 赞同：0
> 
> 时间：2012-05-30T01:01:06.690
> 
> 标签：jquery, button, text, submit

这是我当前的代码：

```
$(document).ready(function(){
    $("input#url").bind("textchange",showPage);
    $("input#url").focus();

    $("form#surlform").submit(function(){
        var url = $("input#url").val(); 
        $.get("api/create.php?url=" + url, function(data) {
                $("input#url").val(data);
                $("input#url").select();
            });

        return false;
    });
    });

$(document).click(function(){
    showPage();
});
$(document).mousemove(function(){
    showPage();
}); 
```

目前，当表单被提交时，jQuery 会阻止它重新加载页面，而只是从 API 中提取所需的输出。如果可能的话，我想让它也改变按钮，这样按钮文本是不同的，它链接到一个页面而不是用 jQuery 提交表单。（如果有帮助，它更改为的按钮可以是 div - 只有原始按钮需要是表单按钮）。

这还不是全部......然后，当文本字段中的文本发生更改时，我希望将其更改为通过 jQuery 提交表单的按钮以及原始文本。

这是一个很大的问题，但如果有人有办法解决这个问题，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:18:21.457

像[这样](http://jsfiddle.net/jqfjC/)的东西？：

HTML：

```
<form id="someForm">
    <input id="someInput" type="text" />
    <input id="submitButton" type="submit" />
    <input id="linkButton" type="button" value="Submit" />
</form>​ 
```

CSS：

```
#linkButton { display: none; }​ 
```

JavaScript：

```
$('#someForm').submit(function () {
    $('#submitButton').hide();
    $('#linkButton').show();
    return false;
});

$('#linkButton').click(function () {
    alert('use something like window.location here to act like a link');
});

$('#someInput').change(function () {
    $('#linkButton').hide();
    $('#submitButton').show();
}); 
```

目前它过于简单，可能需要一些改进，但这个想法很简单......

1.  当页面最初加载时，“链接”按钮是隐藏的。
2.  任何时候单击“提交”按钮，“提交”按钮都会隐藏，而“链接”按钮会显示出来。（当然，在你正在做的任何 AJAX*之后，为简洁起见，这里不包括在内。）*
3.  任何时候点击“链接”按钮，做一些事情。在你的情况下，它是作为一个链接，对吧？ `window.location = 'some new location';`本质上。
4.  每当文本更改时，“链接”按钮会被隐藏，而“提交”按钮会显示出来。如果它们已经被隐藏并显示出来，则不会造成任何伤害。（可能有一种更优雅且每次都显示和隐藏的方式更少，但它可以完成工作。）

# cocoa-touch - 这是 Cocoa Touch 中的什么 UI 元素？

> ID：10808729
> 
> 赞同：6
> 
> 时间：2012-05-30T01:01:17.230
> 
> 标签：cocoa-touch

我在 iPod Touch 上的邮件应用程序中看到了这个，我想知道这是否是一个 UI 元素。如果没有，我该如何重现它？

![在此处输入图像描述](../Images/4150dcaf61ae0b97fa908afe74a8e27f.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T04:04:22.403

在桌面上，这被称为“令牌字段”。它们首先出现在 Mail.app 中，最终成为 AppKit 框架的一部分。[文档在这里。](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/TokenField_Guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006555-CH1-SW1)

在 Cocoa Touch 中重现这种外观应该很容易。在 Cocoa Touch 中，每个视图都由一个核心动画层支持，并且层具有一个`cornerRadius`属性。将该属性设置为字段高度的一半以创建圆形末端。如果您对平面外观没问题，您可以设置背景颜色，或者您可以绘制微妙的渐变以提供更凸的外观。

当然，如果您想要一个可重用的视图，您可以在其中设置文本等，您只需要执行所有这些操作。如果您只需要其中一些用于自定义按钮或其他东西，那么在您最喜欢的绘图程序中绘制它们可能会更容易。

另一种可能性是使用第三方控件，例如：

*   [TIToken字段](http://cocoacontrols.com/platforms/ios/controls/titokenfield)

*   [JSToken字段](http://cocoacontrols.com/platforms/ios/controls/jstokenfield)

*   COTokenField（COPeoplePickerViewController 的[一部分](http://cocoacontrols.com/platforms/ios/controls/copeoplepickerviewcontroller)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:06:55.587

如果它在 UIKit 中，您可以使用[UIKit-Artwork-Extractor](https://github.com/0xced/UIKit-Artwork-Extractor)来检索它。祝你好运搜索:)

# ruby-on-rails - 停止 rails 为 fields_for 方法生成隐藏字段

> ID：10808731
> 
> 赞同：17
> 
> 时间：2012-05-30T01:01:36.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要通过方法删除为现有记录生成的隐藏 id 字段`fields_for`。知道怎么做吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-30T01:08:08.913

从[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)：

```
f.fields_for(:comments, :include_id => false) 
```

# ruby-on-rails - 用于办公文件（docx、pptx）的回形针上传被下载为 zip 文件？

> ID：10808734
> 
> 赞同：12
> 
> 时间：2012-05-30T01:02:16.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, paperclip, mime-types

我正在使用以下文件上传：Rails 3.2、Paperclip (3.0.4)、aws-sdk (1.5.2) & jQuery-File-Upload

问题是像 (pptx) 这样的办公文件被下载为 zip 文件而不是 pptx 文件。这是我在日志中看到的：

```
Started POST
Processing by AttachmentsController#create as JS
  Parameters: {"files"=>[#<ActionDispatch::Http::UploadedFile:0x007fa1d5bee960 @original_filename="test1.pptx", @content_type="application/vnd.openxmlformats-officedocument.presentationml.presentation", @headers="Content-Disposition: form-data; name=\"files[]\"; filename=\"test1.pptx\"\r\nContent-Type: application/vnd.openxmlformats-officedocument.presentationml.presentation\r\n", @tempfile=#<File:/var/folders/rm/89l_3yt93g31p22738hqydmr0000gn/T/RackMultipart20120529-10443-1ljhigq>>]}
.....

SQL (1.4ms)  INSERT INTO "attachments" ("attachment_content_type", "attachment_file_name", "attachment_file_size", "attachment_file_title", "attachment_updated_at", "created_at", "deleted", "room_id", "pinned", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["attachment_content_type", "application/zip"], ["attachment_file_name", "test1_1338339249.pptx"], ["attachment_file_size", 150329], ["attachment_file_title", "test1.pptx"], ["attachment_updated_at", Wed, 30 May 2012 00:54:09 UTC +00:00], ["created_at", Wed, 30 May 2012 00:54:09 UTC +00:00], ["deleted", false], ["room_id", 20], ["pinned", false], ["updated_at", Wed, 30 May 2012 00:54:09 UTC +00:00], ["user_id", 1]]
[paperclip] Saving attachments.
[paperclip] saving /development/private/rooms/20/user_uploaded_files/test1_1338339249.pptx
Command :: file -b --mime '/var/folders/rm/89l_3yt93g31p22738hqydmr0000gn/T/RackMultipart20120529-10443-1ljhigq20120529-10443-1lr2yg2'
[AWS S3 200 1.16513 0 retries] put_object(:acl=>:private,:bucket_name=>"cdn-assets-site-com",:content_type=>"application/zip",:data=>#<Paperclip::FileAdapter:0x007fa1d2540170 @target=#<File:/var/folders/rm/89l_3yt93g31p22738hqydmr0000gn/T/RackMultipart20120529-10443-1ljhigq>, @tempfile=#<File:/var/folders/rm/89l_3yt93g31p22738hqydmr0000gn/T/RackMultipart20120529-10443-1ljhigq20120529-10443-1lr2yg2>>,:key=>"development/private/rooms/20/user_uploaded_files/test1_1338339249.pptx") 
```

请注意文件是如何以 pptx 形式出现的，但是当上传到 AWS S3 时却以 zip 文件的形式出现？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-02T04:55:32.313

**好像您没有注册 MIME 类型。**

`x`以(Office 2007+)结尾的 Office 文件确实是**压缩的 XML 文件**。**任何使用普通 MIME 类型**的东西都会假定它是一个压缩文件。

**Office 2007+ 文件的 MIME 类型**

```
| File |                             MIME type                                   |
+------+-------------------------------------------------------------------------+
|.docx |application/vnd.openxmlformats-officedocument.wordprocessingml.document  |
+------+-------------------------------------------------------------------------+
|.xlsx |application/vnd.openxmlformats-officedocument.spreadsheetml.sheet        |
+------+-------------------------------------------------------------------------+
|.pptx |application/vnd.openxmlformats-officedocument.presentationml.presentation| 
```

在您的`config/initializers/mime_types.rb`文件中，添加必填字段，如下例所示；

```
"application/vnd.openxmlformats-officedocument.presentationml.presentation", :pptx 
```

具有讽刺意味的是，IE 可能难以识别新的 MS Office 文件，而其他浏览器则可以很好地识别它们。

为了让 IE 使用这些文件，您需要将 mime 类型添加到服务器配置中。在 Rails 中，这是在`config/initializers/mime_types.rb`

```
Mime::Type.register "application/vnd.openxmlformats-officedocument.wordprocessingml.document", :docx
Mime::Type.register "application/vnd.openxmlformats-officedocument.presentationml.presentation", :pptx
Mime::Type.register "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", :xlsx 
```

如果您的应用程序通过 Apache 代理并且 Apache 为您的静态资产提供服务，您还必须按照[http://bignosebird.com/apache/a1.shtml为 apache 配置新的 mime 类型（并重新启动）](http://bignosebird.com/apache/a1.shtml)

通常 mime 类型位于 /etc/mime.types 但`locate mime.types`如果您不确定，请尝试。

您可以参考**[回形针适配器](https://github.com/thoughtbot/paperclip/tree/a19f2a4df3d31427cb8404e90d79609fbe45f001/lib/paperclip/io_adapters)**。

您还可以阅读IIS**中****[MimeMap 属性和 ScriptMaps 属性的默认设置说明、](http://support.microsoft.com/?id=936496)[Apache 的 Office 2007 MIME 类型](http://www.vladville.com/2007/04/office-2007-mime-types-for-apache.html)、[使用 Paperclip 和 Rails 上传 docx 文件以及 Rails](http://blog.blenderbox.com/2011/01/31/uploading-docx-files-with-paperclip-and-rails/)中的[动态 Word (.docx) 文档](http://www.bentleyhoke.com/dynamic-word-docx-documents-in-rails/)**。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-01T02:04:50.343

事实证明，正如 Marc B 第一次暗示的那样 - 所有以结尾的 Office 文档`x`确实是压缩的 XML 文件。任何使用普通 mimetypes 的东西都会假定它是一个压缩文件。

为了解决这个问题，您必须在[您的服务器上注册 Office mimetypes](http://technet.microsoft.com/en-us/library/ee309278(v=office.12).aspx)。所以，对于你的 .pptx 文件，你把

```
Mime::Type.register "application/vnd.openxmlformats-officedocument.presentationml.presentation", :pptx 
```

在您的 config/initializers/mime_types.rb 文件中。

或者，如果您必须支持所有 Office 2007 文件，您可以使用在[此 Stackoverflow 答案](https://stackoverflow.com/a/2681892/1079354)`Rack::Mime::MIME_TYPES.merge!()`中看到的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T21:27:24.253

您的`Command :: file -b --mime '/var/folders ...`日志部分意味着 Paperclip 无法通过该命令检测到 mime 类型，`MIME::Types.type_for`并且正在使用该`file`命令。

相关代码：[https ://github.com/thoughtbot/paperclip/blob/5bf0619fe79ffbcaf8f0d8a7aca88b5685aec4b3/lib/paperclip/io_adapter/file_adapter.rb#L16](https://github.com/thoughtbot/paperclip/blob/5bf0619fe79ffbcaf8f0d8a7aca88b5685aec4b3/lib/paperclip/io_adapters/file_adapter.rb#L16)

在这里：[https ://github.com/thoughtbot/paperclip/blob/5bf0619fe79ffbcaf8f0d8a7aca88b5685aec4b3/lib/paperclip/io_adapters/file_adapter.rb#L71](https://github.com/thoughtbot/paperclip/blob/5bf0619fe79ffbcaf8f0d8a7aca88b5685aec4b3/lib/paperclip/io_adapters/file_adapter.rb#L71)

该`file`命令在无扩展名的临时文件上运行，并认为它是一个 ZIP 文件，因为正如其他人所指出的那样，它确实是。

在控制台中为您正常工作的事实`MIME::Types.type_for("test1.pptx")`似乎表明，要么`original_filename`在代码的那部分很奇怪，要么`MIME::Types.type_for`在回形针中的行为与在控制台中的行为不同。

您能否检测 gem 的相关部分（通过调试器或在本地副本中打印一些内容）以查看它所看到的内容？另外，您能否提供一些有关如何将控制器获取的参数转换为附件对象的更多详细信息？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-30T01:04:39.043

Office 格式的“x”版本是 zip 文件 - 压缩的 xml。因此，任何基于 mime 类型确定文件扩展名的东西都将始终将它们视为 zip 文件。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-09-12T13:56:07.183

截至 2019 年，公认的解决方案不起作用。

参考[此处](https://stackoverflow.com/a/49553455/9787936)找到的解决方案，我使用以下代码将它们下载为 .docx。

```
[
  ['application/vnd.openxmlformats-officedocument.wordprocessingml.document', [[0, "PK\x03\x04", [[30, '_rels/.rels', [[0..5000, 'word/']]]]]]],
  ['application/vnd.openxmlformats-officedocument.wordprocessingml.document', [[0, "PK\x03\x04", [[30, 'word/']]]]]
].each do |magic|
  MimeMagic.add(magic[0], magic: magic[1])
end 
```

请注意，简单地要求`'mimemagic/overlay'`in`initializers/mimemagic.rb`也不起作用，我必须手动添加 mimetypes。

为了处理修复之前上传的文件，我只是将它们重新上传到 s3。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-05T19:12:10.013

对于那些发现这仍然不起作用的人，较新版本的 Paperclip`mimemagic`在`Paperclip::ContentTypeDetector`. 您需要使用它来注册 mime 类型。

# python - 使用 python stomp api 接收消息

> ID：10808742
> 
> 赞同：1
> 
> 时间：2012-05-30T01:03:35.147
> 
> 标签：python, api, stomp, subscribe

我可以找到 python stomp 消费者订阅和接收消息（来自 activemq 代理）的工作示例。我检查了 python stomp API，但它似乎不支持类似`conn.receive`. 无论如何我可以达到同样的效果。

```
#!/usr/bin/env python
import stomp
import time
import logging
import sys
import random

logging.basicConfig()

class MyListener(stomp.ConnectionListener):
    def on_error(self, headers, message):
        print('received an error %s' % message)
    def on_message(self, headers, message):
        for k,v in headers.iteritems():
            print('header: key %s , value %s' %(k,v))
        print('received message\n %s'% message)

dest='/topic/manager'
conn=stomp.Connection([('localhost',9998)])
print('set up Connection')
conn.set_listener('somename',MyListener())
print('Set up listener')

conn.start()
print('started connection')

conn.connect(wait=True)
print('connected')
conn.subscribe(destination=dest, ack='auto')
print('subscribed')

message='hello cruel world'
conn.send(message=message, destination=dest,headers={'seltype':'mandi-age-to-man','type':'textMessage','MessageNumber':random.randint(0,65535)},ack='auto')
print('sent message')
time.sleep(2)
print('slept')
conn.disconnect()
print('disconnected') 
```

# image - iOS 5.1.1，html5 图像模糊

> ID：10808745
> 
> 赞同：0
> 
> 时间：2012-05-30T01:03:56.193
> 
> 标签：image, html, ios5, css, mobile-safari

我正在开发一个混合的 iPhone 应用程序，大部分界面都是用 HTML5 和 CSS3 完成的。最近好像特别是从ios 5.1更新之后，app里的图片真的变得很模糊，好像被拉长了一样。它们都`div`带有`background-image`属性集，并`background-size`设置为'cover'。

我在 html 索引文件中也有这一行，但我看不出它应该如何影响任何事情

```
<meta name="viewport" content="width=320"/> 
```

这是一个图像看起来有多糟糕的示例。这张图片的大小约为 2em x 2em，如果我没记错的话，它的大小应该是 32 像素 x 32 像素，字体大小为 16 像素。

![应用程序中的图像模糊](../Images/101dbd25c2e5e20ac6e1866ab0cc5ae1.png)

原图：

![原来的](../Images/024945ad0248d0133b2001e680dd05df.png)

如您所见，原版具有相当大的分辨率，当它是 32 像素 x 32 像素时，应用程序中不应该有任何拉伸。

拜托，这非常令人沮丧，因此非常感谢任何帮助。就像我说的，它以前没有这样做，它似乎是在最新的 iOS 5.1 更新后才出现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:11:38.460

对于 Retina 显示器，您可能希望包含更高分辨率图像的指示。如：

```
background-image: url(your-image@2x.png); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:35:18.570

原来这是罪魁祸首

```
*
{
-webkit-perspective: 1000;
-webkit-backface-visibility: hidden;
} 
```

我最初有这些是因为有时我的 CSS3 动画会导致屏幕闪烁，这解决了这个问题。好吧，它似乎是在用一袋问题换另一袋，因为去掉这两种风格会让一切都变得清晰明了。

我多看了一点，它出现了

```
-webkit-transform-style: preserve-3d; 
```

有传言说可以在不添加模糊的情况下修复闪烁。

# java - 如何在Java中高效地一连串声音？

> ID：10808748
> 
> 赞同：1
> 
> 时间：2012-05-30T01:04:28.983
> 
> 标签：java, audio

所以一点背景信息：我正在制作一个 Top-Down Zombie-Wave-Survival 游戏，并且一直在使用 javax.sound.sampled 中的 Java 剪辑，我可以毫无困难地加载和播放声音，但在我的游戏中有自动武器，需要以相当快的速度一遍又一遍地播放相同的声音。目前，每个 Gun 对象都包含一个 Clip 字段，该字段会在每次开火时停止，设置在第 0 帧，并播放。考虑到它们开火如此之快，这导致某些枪支甚至听不到声音。我想我可以通过每次必须播放声音时创建一个新剪辑来解决这个问题，但这是最有效的解决方案吗？Java Sound API 中是否还有其他东西可以让我轻松做到这一点？非常感谢您的帮助！

编辑：我被告知要添加此信息，循环声音不会作为解决方案，因为它会完全播放声音然后再次播放，但声音本身比两次发射之间的时间长，所以需要有每个声音都有一些重叠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:09:41.423

使用固定的 Clips 数组，大小应由实验得出。我们还将保留正在播放的最新声音的索引

当枪开火时，增加索引（环绕），停止并启动数组中的下一个剪辑。（如果 Clip 太长并且仍在播放，我们需要停止 Clip）。

# emacs - Emacs：当我尝试将数字命名的宏保存到 init 文件时出现“不匹配”错误

> ID：10808752
> 
> 赞同：1
> 
> 时间：2012-05-30T01:06:12.260
> 
> 标签：emacs, macros

我确实搜索了其他帖子，但无济于事。

使用`C-x``C-k``n` `NameOfMacro`，我可以将我的宏定义为一个名称（ddd 表示删除 DD 标记）并使用`M-x` `ddd`... np.随意重用它。

然后我在另一个缓冲区中打开我的 .emacs 并使用`M-x` `insert-kbd-macro` `RET` `ddd` `RET`将 lambda 代码插入其中。工作得很好。

我也曾经`C-x``C-k``b`将它分配给一个数字，就像 Emacs 手册显示的那样：（`C-x``C-k``b``4`我选择 4 因为“d”是第四个字母）。然后我可以随意重用它`C-x``C-k``4`。

回到我的 .emacs 缓冲区并`M-x` `insert-kbd-macro`输入单个数字“4”，它给了我一个“不匹配”错误。很奇怪，因为我实际上可以`C-x``C-k``4`在 .emacs 缓冲区中使用宏。我推断这`insert-kbd-macro`是保存单个数字命名宏的错误命令。

但是在手册中的 21.5 结尾处它说：

> “如果你给出`insert-kbd-macro`一个数字参数，它会生成额外的 Lisp 代码来记录你绑定到宏名称的键（如果有的话），这样当你加载文件时，宏将被重新分配相同的键。”

我不明白...

seh，安格斯……请你的智慧。感谢所有回复的人。

PS 我认为我的问题是以下最后一篇文章：
[如何在我的 Emacs 初始化文件中生成键盘宏？](https://stackoverflow.com/questions/10278375/how-can-i-generate-a-keyboard-macro-in-my-emacs-init-file)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:24:17.303

您误解了“给...一个数字参数”的指令。

交互式地，这意味着使用数字*前缀参数*。所以任何这些都足够了：

*   `C-u``8``RET``M-x` `insert-kbd-macro` `RET`
*   `M-1``M-x` `insert-kbd-macro` `RET`
*   `C-9``M-x` `insert-kbd-macro` `RET`

您试图输入数字作为宏名称，这就是它找不到匹配项的原因（您的宏名称是`ddd`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:25:04.767

注意 kmacro-name-last-macro (Cx Ck n) 为最后一个宏分配一个**名称**。

**然后 insert-kbd-macro 将给定名称**的宏插入缓冲区。

不兼容的是 kmacro-bind-to-key (Cx Ck b)，它将最后一个宏绑定到一个**键**（不是名称）。

# html - 表格底部边框未出现

> ID：10808753
> 
> 赞同：2
> 
> 时间：2012-05-30T01:06:25.353
> 
> 标签：html, css, styles, border

我的表格类是 .bottom ，我希望表格的底部是一条实心黑线，一直穿过。所以我尝试了这个：

```
<table style="border-bottom-color:#000000"> 
```

但这并没有做到。所以我在 CSS 中尝试了这个：

```
.bottom td {border-bottom: 2px solid black !important;} 
```

现在表格中的所有内容都有黑色下划线（链接，td，图像），我想要的只是表格本身有一个纯黑色的底部边框。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-09T10:17:41.887

对于没有出现表格边框的类似问题的其他任何人，您可能还需要确保已设置`table {border-collapse: separate;}`，否则即使设置了样式，边框也不会显示。

虽然此行为是默认行为，但如果您使用模板（例如，对于 eDM），它可能已设置为`table {border-collapse: collapse;}`预定义模板样式中的某个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T01:15:23.587

```
.bottom {border-bottom: 2px solid black;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-05T22:12:00.063

我遇到了同样的问题，我所要做的就是在 table 属性中添加一些 margin-bottom 。

```
 table {
        table-layout: inherit;
        width:91.8%;
        font-family: $fontserrat;
        margin-bottom: 10px;
} 
```

# apache - 另一个“svn：存储库永久移动以请重新定位”问题

> ID：10808754
> 
> 赞同：0
> 
> 时间：2012-05-30T01:06:43.073
> 
> 标签：apache, svn, http

我在同一台服务器上有一堆项目。该服务器同时托管 SVN 存储库和实际的 Web 项目。我想要这样的结构：

```
project1.server.com - with doc root to /var/www/html/project1/public
project2.server.com - with doc root to /var/www/html/project2/public
project3.server.com - with doc root to /var/www/html/project3/public 
```

并且能够使用此 URL 访问每个 SVN 存储库

```
svn.server.com/project1 - with repo root at /var/www/svn/project1/
svn.server.com/project2 - with repo root at /var/www/svn/project2/
svn.server.com/project3 - with repo root at /var/www/svn/project3/ 
```

我目前的配置是：

```
<VirtualHost *:80>
        ServerName project1.server.com
        DocumentRoot "/var/www/html/project1/public"
        RewriteEngine off
        <Location />
                RewriteEngine on
                RewriteCond %{REQUEST_FILENAME} !-f
                RewriteCond %{REQUEST_FILENAME} !-d
                RewriteRule !\.(js|ico|gif|jpg|png|css)$ /index.php
        </Location>
</VirtualHost>

# ... similar <VirtualHost> tags here for the other web subdomains

<VirtualHost *:80>
        ServerName svn.server.com
        <Location />
                Deny from all
        </Location>

        <Location /project1>
                Allow from all
                AuthType Basic
                AuthUserFile /etc/svn-auth-conf
                Require valid-user
                DAV svn
                SVNPath /var/www/svn/project1
                AuthName "Project 1 - Development Repository"
                AuthzSVNAccessFile /etc/svn-acl-conf
        </Location>

# ... similar <Location> tags for the other repos

</VirtualHost> 
```

如果我将 DocumentRoots 更改为 /var/www/html/project1-site/public 之类的其他内容，则效果很好，因此我很确定正在发生的事情是[这样](http://subversion.apache.org/faq.html#http-301-error)的：

> 您也可能在 Web 根目录中有一个与您的存储库 URL 同名的对象。例如，假设您的 Web 服务器的文档根目录是 /var/www，而您的 Subversion 存储库位于 /home/svn/repo。然后，您将 Apache 配置为在[http://server.com/myrepo](http://server.com/myrepo)为存储库提供服务。如果您随后创建目录 /var/www/myrepo/ 这将导致发生 301 错误。

但我真的很想保持上面显示的目录结构。我应该怎么做才能让它工作？我想要这样，因为它是我能想出的更整洁的结构。所以想法也被接受了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:51:23.420

您可以尝试更改 SVN v-host 的端口（我认为 SVN 通常使用`3690`）。现在您对两种协议使用相同的根路径 ( `Location /`) 和相同的端口 ( `80`)，因此 Apache 无法区分这两种请求。

更多信息：[http ://en.wikipedia.org/wiki/Apache_Subversion#Repository_access](http://en.wikipedia.org/wiki/Apache_Subversion#Repository_access)

请注意，您的 SVN 客户端也必须使用此端口。不确定这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-28T12:03:39.863

如果要将存储库保留在文档根目录中，可以使用 url
**svn+ssh://<absolute_path_to_repository>**
而不是
**http://<document_root_relative_path_to_repository>**
访问它。您需要 ssh 访问权限和凭据。

# objective-c - 检查数组是否有 if 语句不起作用的数据？

> ID：10808755
> 
> 赞同：0
> 
> 时间：2012-05-30T01:06:49.450
> 
> 标签：objective-c, ios, if-statement

我试图在我将单元格文本变灰之前查看我的 nsarray 是否有数据 - 但由于某种原因，如果使用可怕的 SIGBRT 进行 if 评估，它会爆炸......如果密钥“myIndex”存在，则以下代码可以正常工作...... .当用户在应用程序结束时发送他的订单时，我删除了密钥....所以当应用程序在订单后打开时我想跳过?????

```
if(![[[inList objectAtIndex:0] objectForKey:@"myIndex"] count] == 0){

       NSArray *myIndexList = [[inList objectAtIndex:0] objectForKey:@"myIndex"];
       NSLog( @"data from INDEX !!!!!!!! %@", myIndexList);

       for(int n=0; n<[myIndexList count]; n++)
       {
           if(indexPath.row == [[myIndexList objectAtIndex:n] integerValue])
           {
               cell.textLabel.textColor = [UIColor lightGrayColor];
           }
       }

   } 
```

非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:14:11.067

您可以像这样检查对象是否存在：

```
if([[inList objectAtIndex:0] objectForKey:@"myIndex")
{
    //It exists, do something (otherwise ignore it)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:21:26.690

您需要首先确保 inList 中有一个对象：

```
if ([inList count] > 0) {
    if([[[inList objectAtIndex:0] objectForKey:@"myIndex"] count] > 0) {
        // there is a valid object
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T01:24:46.110

检查 NSArray 是否有特定对象的数据：

```
if ([[NSString stringWithFormat:@"%@", [inList objectAtIndex:0]] length] == 0) {
    //Do somthing if the NSArray object is empty.
} else {
    //Do somthing if the NSArray object countains somthing.
} 
```

检查 NSArray 中的任何对象是否有数据：

```
for (int count = 0; count < inList.count; count++) {
    if ([[NSString stringWithFormat:@"%@", [inList objectAtIndex:count]] length] == 0) {
        //Do somthing if the NSArray object is empty.
    } else {
        //Do somthing if the NSArray object countains somthing.
    }
} 
```

# heroku - 在 Heroku 上测试 PostgreSQL PostGIS 的选项？

> ID：10808760
> 
> 赞同：8
> 
> 时间：2012-05-30T01:07:30.463
> 
> 标签：heroku

我正在创建一个大量使用 PostgreSQL 的 PostGIS 扩展的应用程序。我找到了这个：

[https://devcenter.heroku.com/articles/is-postgis-available](https://devcenter.heroku.com/articles/is-postgis-available)

这表明我只能在 Ronin 及以上数据库上获得 PostGIS。这对我来说完全可以用于生产，我的计划是无论如何都要为我的生产系统使用那个级别的数据库。

但是，我在 Heroku 上也有一个阶段和开发环境，这意味着我也需要为这些环境启用 PostGIS 的数据库，因为我无法从生产数据库中运行测试。我需要一个选项来支持这些环境，因此我想知道以下几点：

**除了通过插件过程之外，您可以连接到 Heroku 上的数据库吗？**

我尝试为测试数据库手动添加配置变量，但它不仅仅通过 pg:promote 神奇地工作——还有其他一些东西可以控制 Heroku 如何认为有效数据库。

人们能想到的任何其他选择将不胜感激。我知道有一个 SpacialDB 的封闭测试版可能会起作用（已经在研究），但还有其他人能想到的吗？我只是不愿意每月为测试/阶段的专用数据库多付 400 美元。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-13T01:20:32.677

您可以根据需要创建（供应）和删除生产层数据库。入门级生产层数据库将花费您 0.07 美元/小时（或 1.67 美元/天）；它使数据库保持全时供应，这将花费您每月 50 美元。请参阅[Heroku Postgres 生产层技术表征](https://devcenter.heroku.com/articles/heroku-postgres-production-tier-technical-characterization)。

# 提供数据库

**1.**这可以用一两行来完成。

```
-bash> heroku addons:add heroku-postgresql:crane --remote staging
Adding heroku-postgresql:crane on cool-app-0007... done, v36 ($50/mo)
Attached as HEROKU_POSTGRESQL_GOLD_URL
The database should be available in 3-5 minutes.
 ! The database will be empty. If upgrading, you can transfer
 ! data from another database with pgbackups:restore.
Use `heroku pg:wait` to track status..
Use `heroku addons:docs heroku-postgresql` to view documentation. 
```

尽管配置过程需要 3-5 分钟，但命令提示符将很快返回。根据消息，您可以跟踪配置状态：

```
-bash> heroku pg:wait --remote staging
Waiting for database HEROKU_POSTGRESQL_GOLD_URL... available 
```

请注意，您可以一次性执行上述两个命令（`&&`确保第二个命令仅在第一个命令成功返回后执行）：

```
-bash> heroku addons:add heroku-postgresql:crane --remote staging && heroku pg:wait --remote staging 
```

**2.**一旦完成（“可用”），`DATABASE_URL`使用上述名称（即`HEROKU_POSTGRESQL_GOLD_URL`）进行设置。为了避免复制/粘贴，我一次性完成：

```
-bash> heroku config:set DATABASE_URL=`heroku config:get HEROKU_POSTGRESQL_GOLD_URL --remote staging` --remote staging
Setting config vars and restarting cool-app-0007... done, v37 
DATABASE_URL: postgres://i28asd172a3k2:bd3k2s05sls1a03b8c4efi0b33a@ec2-12-345-678-90.compute-1.amazonaws.com:5562/eexf3mwha92jk6 
```

**3.**迁移或恢复。

**第一次执行上述操作时**，您需要设置数据库（例如，通过运行迁移：`heroku run rake db:migrate --remote staging`并且可能后跟`heroku restart --remote staging`）。

**随后**，您将从备份中恢复，从而能够从上次中断的地方继续：

```
-bash> heroku pgbackups:restore HEROKU_POSTGRESQL_GOLD_URL b001 --confirm cool-app-0007

HEROKU_POSTGRESQL_GOLD_URL (DATABASE_URL)  <---restore---  b001
                                                             HEROKU_POSTGRESQL_ROSE_URL (DATABASE_URL)
                                                             2014/01/12 03:19.29
                                                             16.3KB

Retrieving... done
Restoring... done 
```

# 创建备份

```
-bash> heroku pgbackups:capture HEROKU_POSTGRESQL_ROSE_URL

HEROKU_POSTGRESQL_ROSE_URL (DATABASE_URL)  ----backup--->  b001

Capturing... done
Storing... done 
```

# 删除数据库

```
-bash> heroku addons:remove HEROKU_POSTGRESQL_ROSE_URL
Removing HEROKU_POSTGRESQL_ROSE_URL on cool-app-0007... done, v35 ($50/mo) 
```

有关详细信息，请参阅

*   [https://devcenter.heroku.com/articles/pgbackups](https://devcenter.heroku.com/articles/pgbackups)
*   [https://devcenter.heroku.com/articles/heroku-postgresql](https://devcenter.heroku.com/articles/heroku-postgresql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:05:30.350

我们在 Heroku 上使用 PostGIS。

1）您可以从“任何地方”连接到非共享 Heroku 应用程序。运行更大的数据库后，您可以使用连接字符串连接任何应用程序或 postgres 命令行。在数据库上几乎没有什么是你不能做的。您不能使用较小的共享数据库来执行此操作。

2）我们为我们的暂存环境获得了专用数据库。如果你不这样做，那么你就没有真正在与 prod 相同的条件下进行测试，你将无法发现问题。我们使用 Rails，所以我们想要一个“相同”的数据库在投入生产之前运行迁移。

3) 我们在本地（以及在 Jenkins 上）运行 postgres 以再次运行我们的测试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T22:02:31.953

也许您错过了最近在 Heroku 上发布的受限 pg 9.1 开发数据库的公告？

[https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/](https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/)

还有新的 Crane 计划，[http://blog.heroku.com/archives/2012/5/8/crane-production-database-plan-launched/](http://blog.heroku.com/archives/2012/5/8/crane-production-database-plan-launched/)也可能对您有用。

# r - 带有 ggplot 的 R 样式轴

> ID：10808761
> 
> 赞同：12
> 
> 时间：2012-05-30T01:07:35.113
> 
> 标签：r, ggplot2

使用 ggplot，是否有可能获得不在原点相交的“R 样式”x/y 轴，而是由两个断开的范围组成，如下例所示？

![在此处输入图像描述](../Images/9ffa49e38d40d0d4652dd7ec4e900e81.png)

这里的原因主要是为了让 ggplot 图与纯 R 的图看起来一致。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-30T09:32:43.177

试试这个，

```
library(ggplot2)

d <- data.frame(x=1:10, y=rnorm(10))

base_breaks_x <- function(x){
  b <- pretty(x)
  d <- data.frame(y=-Inf, yend=-Inf, x=min(b), xend=max(b))
  list(geom_segment(data=d, aes(x=x, y=y, xend=xend, yend=yend), inherit.aes=FALSE),
       scale_x_continuous(breaks=b))
}
base_breaks_y <- function(x){
  b <- pretty(x)
  d <- data.frame(x=-Inf, xend=-Inf, y=min(b), yend=max(b))
  list(geom_segment(data=d, aes(x=x, y=y, xend=xend, yend=yend), inherit.aes=FALSE),
       scale_y_continuous(breaks=b))
}

ggplot(d, aes(x,y)) +
  geom_point() +
  theme_bw() +
  theme(panel.border = element_blank(),
       panel.grid.major = element_blank(),
       panel.grid.minor = element_blank()) +
  base_breaks_x(d$x) +
  base_breaks_y(d$y) 
```

![截屏](../Images/0e5dcfc993def5412cba19b5da835944.png)

编辑：[相关问题已经](https://github.com/jrnold/ggthemes/pull/18)在 ggtheme 包中进行了讨论，并可能提供更清洁的解决方案（无需显式向中断函数提供数据）。

# perl - 无法调用方法状态 - 错误

> ID：10808763
> 
> 赞同：2
> 
> 时间：2012-05-30T01:07:56.427
> 
> 标签：perl

我对 Perl 很陌生，正在尝试解决 Llama 书中的一些练习问题。问题是编写一个子例程，如果他是第一个人，则欢迎他，或者告诉他之前在场的人的名字。我的代码看起来像：

```
#! perl

# This is the greeter problem .

sub greetPerson{
    state $previous = undef ;

    if($previous eq undef){
     print " Welcome ... u r the first \n";
    }
    else{
     print " Hi ... $previous was already here \n";
    }

    $previous = $_;
    return 0; 
}

@code = ("ravi" , "teja" , "chandu");
greetPerson($code[0]);
greetPerson($code[1]);
greetPerson($code[2]); 
```

我收到一条错误消息

```
 "Can't call method state on undefined value in Line 6\.  " 
```

请帮助我了解这意味着什么，为什么会出现以及如何解决它..？我了解“状态”与其他语言（C / Java）中的“静态”同义。我错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T01:15:12.440

`state`是一个相当新的特性（自 Perl 5.10 起），默认情况下不启用。要启用它：

```
use feature 'state'; 
```

使用`state`有点相当于在 Java 中使用静态变量。另一种没有状态的方法是`$previous`使用简单`my`的外部声明`greetPerson`，这意味着它在整个脚本中的范围内。

顺便说一句，您还应该在所有脚本中包含这些行，以免在跟踪过程中遇到很多麻烦：

```
use strict;
use warnings; 
```

此外，`greetPerson`你需要得到你的论点，你可以从`@_`. 例如

```
my ($name) = @_; # or
my $name = $_[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T01:15:44.927

是的; 你搞错了（但我也搞错了）。 ~~AFAIK，`state`在 Perl 中没有特定含义（但有人说这是必须启用的新功能）。~~

* * *

嗯...Perl 5.14.2 有一个函数[`state`](http://perldoc.perl.org/functions/state.html). 它是在 5.10.0 中引入的；我在我的机器上检查了一个 5.10.0 版本，它就在那里，尽管我不知道它。 [DavidO 很有帮助](https://stackoverflow.com/users/716443/davido)地确认`state`了 5.8 系列的 Perl 版本中没有它。更改是在 5.10.0 中添加的。

因此，您需要一个足够现代的 Perl 版本，并且需要通过以下方式启用它：

```
use feature 'state'; 
```

* * *

未启用该`state`功能时，它看起来像一个方法调用，并且由于未定义该方法，因此您会看到您看到的错误。当然，即使启用它也是一个方法调用；或者，至少，它既被列为函数又被描述为函数，但它是具有特殊语义的内置函数。

*万一您没有意识到，StackOverflow 的一大优点是您可以通过回答问题来学习。*

您可能正在寻找`my`（或`our`或`local`，但这里不太可能）。

但是，子程序中的变量会在子程序退出时消失，所以甚至`my`不是您想要的。

在没有 的情况下`state`，您可能会使用全局变量（没有任何初始化，因此在第一次传递时其值为`undef`）：

```
my $previous; 
```

在函数之外，然后您只需在函数中引用它：

```
sub greetPerson{

    if ($previous eq undef){
     print " Welcome ... u r the first \n";
    }
    else{
     print " Hi ... $previous was already here \n";
    }

    $previous = $_[0];
    return; 
} 
```

这也解决了`$_`与传递给函数的参数无关的问题。你最好写：

```
sub greetPerson{
    my($who) = @_;
    if ($previous eq undef){
        print " Welcome ... u r the first \n";
    }
    else{
        print " Hi ... $previous was already here \n";
    }

    $previous = $who;
    return; 
} 
```

通常，您还应该使用`use warnings;`和`use strict;`。专家使用它们来确保他们没有犯愚蠢的错误。新手也应该​​这样做。这确实意味着您必须声明所有变量。

好处之一`state`是它允许您隐藏一个变量，否则该变量必须是全局的（或者如果您正在使用模块，则在模块级别隐藏）在它真正属于的函数中。因此，这是一个有用的功能。

* * *

### 从评论中

> 我正在传递一个标量`(@code[0])`。那么，为什么我需要在`@_[0]`那里使用呢？是`$_`不是一个？但不知何故，`@_[0]`工作而不是`$_`......你能解释一下吗？

整个故事很复杂，但是 Perl 将参数传递给函数的方式是作为数组。在函数内部，参数在`@_`. 变量`$_`无关`@_`（除了其名称的最后一个字符相同）。

**注意**：我已将第一个示例修改为引用`$_[0]`而不是`@_[0]`. 那是访问数组的第零个元素，并且与标量`@_`无关。`$_`这是 Perl 确实会引起混淆的一个领域。（如果`@_[0]`真的有效，那么要么我很幸运，要么 Perl 6 关于 sigils 的一些想法正在悄悄进入 Perl 5.1x。）

随着时间的推移，你会习惯这种表示法：

```
sub some_name_or_other
{
    my($arg1, $name2, $obj3, $ref4, $hash5, @the_rest) = @_;
    ...
} 
```

这会将前 5 个参数分配给标量变量，并将剩余的任何内容填充到本地数组`@the_rest`中。如果你用太少的参数调用它，你会得到`undef`值。列表中的括号`my(...)`很重要。他们提供*列表上下文*并使其工作。省略括号，事情就会出错。但是，列表上下文是一个比我想在这里详细讨论的更大的主题；有关详细信息，请查看 Llama 书（或 Camel 书，或在线）。

如果你打算只引用一次参数，保证不改变值，你可以使用`$_[0]`符号；如果您要更频繁地使用它，请使用`my`变量。最好还是使用`my`变量；更便于理解。

# asp.net-mvc - ASP.NET MVC 路由 - 当我不希望它重定向时它会重定向

> ID：10808766
> 
> 赞同：0
> 
> 时间：2012-05-30T01:08:46.867
> 
> 标签：asp.net-mvc, url-routing, asp.net-mvc-routing

我正在使用以下 URL 构建一个简单的搜索引擎：

```
"/" - this is the homepage with the search textbox and submission button.
"/search?q=" - this is where the results will appear. The query is the q= parameter. 
```

这是我的搜索控制器：

```
[HandleError]
public class SearchController : Controller {

    public ActionResult Start() {           
        SearchModel model = new SearchModel();
        return View( model );
    }

    /// <summary>Performs a search.</summary>
    /// <param name="q">The search query.</param>
    /// <param name="a">The search action ("I Feel Lucky", etc).</param>
    /// <param name="page">The results page number.</param>
    public ActionResult Search(String q, String a, String page) {
        return View();
     }
} 
```

最后，这是我的路由表：

```
public static void RegisterRoutes(RouteCollection routes) {         
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.MapRoute(
        "SearchQuery",
        "Search", // match "http://mysite.com/Search"
        new { controller = "Search", action = "Search" }
    );
    routes.MapRoute(
        "SearchStart", // Route name
        "", // match "http://mysite.com/"
        new { controller = "Search", action = "Start", id = UrlParameter.Optional } // Parameter defaults
    );
} 
```

但是，当我发出 HTTP 请求时，`http://mysite.com/Search?q=foo`我得到一个 301 重定向到`http://mysite.com/Search/`返回 404 的位置。我的`SearchController`. `Search`永远不会调用动作。

我需要做什么才能允许我正在做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:38:55.987

您所展示的内容中没有任何内容会导致此问题。这是整个应用程序吗？

MVC 不会自行重定向。您要么必须告诉它重定向，要么使用某种属性或过滤器在某些条件下重定向。

# java - 使用 Chrome 进行调试时 GWT 开发者插件抱怨

> ID：10808767
> 
> 赞同：0
> 
> 时间：2012-05-30T01:08:49.347
> 
> 标签：java, gwt, google-chrome

以下是我将之前在 Firefox 中渲染的代码渲染到 chrome 时发生的错误。

发生了意外错误：从 JSNI 方法“@com.google.gwt.dom.client.Node::getNodeType()”返回了除短之外的其他内容：未定义类型的 JS 值，预期为短。点击确定以重新启动您的会议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:38:30.797

这是 Chrome 的一个老[问题](http://code.google.com/p/google-web-toolkit/issues/detail?id=5778)。根据问题中的评论，这尚未修复。因此，解决方案是使用其他浏览器进行开发模式。

# c# - （Crystal Reports）在某些细节之后打破页面？

> ID：10808768
> 
> 赞同：1
> 
> 时间：2012-05-30T01:08:52.203
> 
> 标签：c#, visual-studio-2010, crystal-reports, crystal-reports-xi, page-break

我正在尝试创建一份支票书写报告，该报告将以下列方式工作：

*   报告每一页的第一部分将包括将添加到检查中的所有行项目。
*   报告每页的中间部分将是实际支票，有收款人、付款人、金额、地址等。
*   报告每一页的最后一部分只是第一部分的副本。

报告的每一页都将包含 10 个订单项 AT MAX。例如，如果我们正在编写一张包含 12 项的支票，则报告将有两页：

*   第一页将包含前 10 个行项目（在页面的第一部分和最后部分）和一张金额为 0.00 的支票。
*   第二页将有其他 2 行项目（在两个部分中）加上支票的实际数据。基本上，唯一有效的支票将是报告最后一页上的支票。

我的想法是有一个包含两个表的 DataSet，一个用于行项目，另一个用于检查数据。在检查表中，每页有一行。所以在前面的例子中，我在行项目表中有 12 行，在支票表中有 2 行（其中一个有 0.00 作为金额，另一个有实际 X.XX 金额）。我也在考虑按检查分组，并在每次检查后添加一个分页符，但我不确定如何确保每页中只有 10 个行项目。

有关如何处理此问题的任何帮助或新想法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T04:37:35.083

要使其每页显示 10 条记录，请执行以下操作

1.  在设计视图中打开报表

2.  右键单击详细信息部分并选择部分专家

3.  确保在“部分专家”对话框中选择了“详细信息”部分。选中“之后新页面”框

4.  单击复选框右侧的公式编辑器按钮。

5.  输入以下公式

if Remainder (RecordNumber, 10) = 0 then true else false

6.单击保存并关闭，然后单击确定。

# javascript - 复杂的结构化 JSON 迭代

> ID：10808769
> 
> 赞同：0
> 
> 时间：2012-05-30T01:08:54.123
> 
> 标签：javascript, jquery, json

我正在尝试使用以下代码迭代以下 JSON 对象：

```
$.each(response.payload.entries, function (i, data) {

            var title = data.uid;
            var dis = data.text;
            var url = data.http;
}); 
```

这是我试图迭代的 JSON 对象。

```
for (;;);
{
   "__ar":1,
   "payload":{
      "entries":[
         {
            "uid":617823537,
            "photo":"http:\/\/profile.ak.fbcdn.net\/hprofile-ak-snc4\/371505_617823537_1432230628_q.jpg",
            "type":"user",
            "text":"Nikh Il",
            "path":"\/nikh.il.351",
            "category":"Pune, Maharashtra",
            "names":[
               "Nikh Il"
            ],
            "subtext":""
         },
         {
            "uid":100001702504174,
            "photo":"http:\/\/profile.ak.fbcdn.net\/hprofile-ak-ash2\/157844_100001702504174_408730515_q.jpg",
            "type":"user",
            "text":"Nilam Patil",
            "path":"\/profile.php?id=100001702504174",
            "category":"Pune, Maharashtra",
            "names":[
               "Nilam Patil"
            ],
            "subtext":""
         },
         {
            "uid":100001485070815,
            "photo":"http:\/\/profile.ak.fbcdn.net\/hprofile-ak-snc4\/48955_100001485070815_1517928098_q.jpg",
            "type":"user",
            "text":"Nisha Lemos",
            "path":"\/profile.php?id=100001485070815",
            "category":"Pune, Maharashtra",
            "names":[
               "Nisha Lemos"
            ],
            "subtext":""
         },
         {
            "uid":100002112294701,
            "photo":"http:\/\/profile.ak.fbcdn.net\/hprofile-ak-snc4\/48784_100002112294701_37411980_q.jpg",
            "type":"user",
            "text":"Nilesh Pathare",
            "path":"\/profile.php?id=100002112294701",
            "category":"Pune, Maharashtra",
            "names":[
               "Nilesh Pathare"
            ],
            "subtext":""
         },
         {
            "uid":100003485631681,
            "photo":"http:\/\/profile.ak.fbcdn.net\/hprofile-ak-snc4\/173739_100003485631681_1898829160_q.jpg",
            "type":"user",
            "text":"Nilesh Pathare",
            "path":"\/profile.php?id=100003485631681",
            "category":"Pune, Maharashtra",
            "names":[
               "Nilesh Pathare"
            ],
            "subtext":""
         },
         {
            "uid":100002020083795,
            "photo":"http:\/\/profile.ak.fbcdn.net\/hprofile-ak-ash2\/276120_100002020083795_155025323_q.jpg",
            "type":"user",
            "text":"Nikhil Pataskar",
            "path":"\/nikpataskar",
            "category":"Pune, Maharashtra",
            "names":[
               "Nikhil Pataskar"
            ],
            "subtext":""
         },
         {
            "uid":100000619107842,
            "photo":"http:\/\/profile.ak.fbcdn.net\/hprofile-ak-snc4\/260864_100000619107842_139211244_q.jpg",
            "type":"user",
            "text":"Nikhil Agarwal",
            "path":"\/profile.php?id=100000619107842",
            "category":"Pune, Maharashtra",
            "names":[
               "Nikhil Agarwal"
            ],
            "subtext":""
         },
         {
            "uid":137827210650,
            "type":"app",
            "path":"http:\/\/apps.facebook.com\/ninjasaga\/",
            "text":"Ninja Saga",
            "dataGT":"{\"ref\":\"search_typeahead\",\"type\":\"click2canvas\"}",
            "subtext":"4,100,000 monthly users",
            "category":"Game",
            "photo":"http:\/\/photos-f.ak.fbcdn.net\/photos-ak-snc7\/v43\/150\/137827210650\/app_1_137827210650_3577.gif"
         },
         {
            "uid":102796083108857,
            "type":"app",
            "path":"http:\/\/www.facebook.com\/apps\/application.php?id=102796083108857",
            "text":"Nimbuzz Mobile",
            "subtext":"5,600,000 monthly users",
            "category":"App",
            "photo":"http:\/\/photos-g.ak.fbcdn.net\/photos-ak-snc7\/v27562\/173\/102796083108857\/app_1_102796083108857_3242.gif"
         },
         {
            "uid":84697719333,
            "type":"app",
            "path":"http:\/\/www.facebook.com\/apps\/application.php?id=84697719333",
            "text":"Nike",
            "subtext":"470,000 monthly users",
            "category":"App",
            "photo":"http:\/\/photos-a.ak.fbcdn.net\/photos-ak-snc7\/v85006\/213\/84697719333\/app_1_84697719333_5631.gif"
         }
      ]
   }
} 
```

我在 JS 控制台中收到此错误

```
Uncaught SyntaxError: Unexpected token : 
```

我现在得到错误！它的 for (;;);

如何用一些空格替换它以使其仍然是有效的 JSON Object ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T16:32:12.087

对于此任务，您可以使用 DefiantJS ( [http://defiantjs.com](http://defiantjs.com) )。这个库使用带有 XPath 查询的“搜索”方法扩展了全局对象 JSON。它返回数组中的匹配项（如果未找到匹配项，则返回空数组）。

这是下面代码的工作小提琴；
[http://jsfiddle.net/hbi99/KZ68m/](http://jsfiddle.net/hbi99/KZ68m/)

```
var data = {
       "__ar": 1,
       "payload": {
          "entries": [
            ...
          ]
       }
    },
    res = JSON.search( data, '//payload/entries' );

for (var i=0; i<res.length; i++) {
    console.log( res[i] );
} 
```

如果您不熟悉 XPath（它是一种标准化的查询语言），您可以试试这个 XPath 评估器，让您了解它是多么容易。
[http://defiantjs.com/#xpath_evaluator](http://defiantjs.com/#xpath_evaluator)

# c++ - 为什么在测量 CPU 时间时使用时钟（）得到负数

> ID：10808771
> 
> 赞同：1
> 
> 时间：2012-05-30T01:09:07.973
> 
> 标签：c++, clock

我正在使用 clock() 来测量我的算法的 CPU 时间量。

代码如下：

```
start_time = clock();
//code to be timed
.
end_time = clock();
elapsed_time = (end_time - start_time)*1000 / CLOCKS_PER_SEC;

printf("Time taken %d seconds %d milliseconds\n", elapsed_time/1000, elapsed_time%1000 ); 
```

但结果是“0 秒 -175 毫秒”。我不明白为什么。并且似乎“1 秒 349 毫秒”实际上可能需要 10 分钟或更长时间。这很常见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:34:50.307

分叉是一种特殊情况，这种类型的代码将导致负时间。原因之一是，`clock()`将返回自程序启动以来的时钟滴答数。

提醒一下，in 中的值`start_time`将被复制到子进程中。

*   对于父进程，时间应该是正数。由于时钟滴答计数用于`start_time`和`end_time`用于同一进程。

*   对于子进程，由于它仅**在 之后** `fork()`启动，`clock()`将返回程序从此时开始运行的时钟滴答数。`fork()`不记录之前的时间。

    由于计数时钟滴答的起始参考不同：

    *   `start_time`是从**父**进程开始到第一个进程的时钟滴答数`clock()`
    *   `end_time`是从**子**进程开始到第二个的时钟滴答数`clock()`）

    它可能会导致负面结果。如果子进程运行的时间足够长以超过父进程启动的时间量，则也可能产生积极的结果。

**编辑**

我不确定预期的时间是多少，但是如果您想计算：父进程的时钟滴答声从开始到结束，子进程的时钟滴答声从之后`fork()`到结束，然后修改您的代码以覆盖`start_time`新值`clock()`in子进程。或者你可以设置`start_time`为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:25:50.773

如果 start_time 和 end_time 是 32 位整数，则它们只能保持大约 2147 秒（大约 35 分钟），然后才会翻转为负数，因为 CLOCKS_PER_SEC 是 1000000。

但更糟糕的是，因为你将差值乘以 1000，这意味着如果它超过 2.147 秒，它就会溢出。

另一方面，如果它们不是 32 位整数，则说明您使用了错误的 printf 格式说明符（并且您可能会收到并忽略来自编译器的警告），因此您会看到垃圾。

# unit-testing - params data binding in Grails unit test of a service class

> ID：10808773
> 
> 赞同：0
> 
> 时间：2012-05-30T01:09:47.133
> 
> 标签：unit-testing, grails

I have a service method that takes params as an input and creates a domain class passing in params for auto binding. Testing of this is simple by specifying params as a map of key value pairs. However, I don't know how to simulate an array of associated objects in the params map.

I observed client side sending in params in the following format:

```
["description":"abc",  "subTask[0].name": "first subtask name"] 
```

How do I mock this type of params? Since this is not a controller test I can not use mockParams AFAIK.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:36:32.803

The answer turns out to be this: Since controller params map parsing is not available in a Service class you have to convert values and objects on your own. So in my example I have to manually create an array of associated objects within the params map. Here is an example:

```
 def params = [ state: "Open", type: "Cable", 
            needByDate: new Date("Fri May 11 00:00:00 PDT 2012"),
            //"subTasks[0]":["name":"ABC"]  //no workie
            "subTasks": [new Task("name": "ABC")]
  ]
  mockDomain(Task.class)
  Task task= service.saveNewRequest(params) 
```

Hope this helps somebody.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:08:33.290

The params map in Grails does magic stuff with parameter names that contain dots, making them available in the controller as "sub-maps". For example if you have parameters a.b=1 and a.c=2 you can ask for `params.a` and get a map `[b:1, c:2]`. So try something like this:

```
["description":"abc",  "subTask[0]":["name": "first subtask name"]] 
```

# python - Python返回字符串中字母的整数？

> ID：10808779
> 
> 赞同：-4
> 
> 时间：2012-05-30T01:10:22.277
> 
> 标签：python, string, ascii

我正在尝试将一串字母转换为整数，例如将“ABC”转换为“123”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T01:13:11.947

```
>>> import string
>>> trans = string.maketrans("ABC","123")
>>> "ABC".translate(trans)
'123' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T01:34:20.510

如果您正在尝试创建直接转换表（例如 Caesarian cypher），之前的 string.maketrans 建议是一个很好的建议。

但是您的问题有点含糊，另一种可能性是您需要查找与您的角色相关的数字以实现更深层次的目的（例如 ASCII 或 unicode 编码）。在这种情况下，[chr()](http://docs.python.org/library/functions.html#chr%22chr%28%29%22)和[ord()](http://docs.python.org/library/functions.html#ord%22ord%28%29%22)函数可能很有用。

# html - 启动 iOS 选择没有JQuery Mobile 中的元素我正在开发一个 JQM 应用程序，并希望当用户单击问题时让用户从 iOS 选择菜单（你知道，看起来像老虎机的那个）中选择一个值：1）有谁知道一种更优雅的方式来启动它而无需将其作为隐藏对象并调用某种触发事件？2）如果答案是“否”，有没有人知道呼叫的命令？我认为它类似于 $("#select-element").trigger('click'); 3) Android 是否有自己的原生微调型选择控件形式？（我只为 iOS 和 Andro

> ID：10808781
> 
> 赞同：0
> 
> 时间：2012-05-30T01:10:35.380
> 
> 标签：html, jquery-mobile

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:42:20.733

在重新发明“老虎机”轮之前，先看看[Mobiscroll](http://mobiscroll.com/)，这是一个为您提供开箱即用的 iOS 和 Android UI 日期/时间选择器的插件。

你甚至可以用它制作老虎机...... :-)

# javascript - Javascript 图像数据到多维数组的性能问题

> ID：10808785
> 
> 赞同：1
> 
> 时间：2012-05-30T01:11:01.510
> 
> 标签：javascript, arrays, canvas, multidimensional-array, getimagedata

我编写了一种将画布图像数据数组转换为基于多维坐标的数组的方法，如下所示：

```
parse: function() {
    var x = y = 0;
    var step = 0;
    for(var i = 0; i <= this.imageData.length - 4; i += 4) {
        if(step == this.width) {
            ++ y;
            step = 0;
        }
        this.data[x][y] = [this.imageData[i],
                           this.imageData[i+1],
                           this.imageData[i+2],
                           this.imageData[i+3]];

        ++ x;
        ++ step;
    }
} 
```

我已经在较小的规模（10x10 图像）上对其进行了测试，但是当我移动到更大的图像时，在我的情况下为 800x800，它完全使浏览器（选项卡）崩溃。我可以理解为什么，但是，我想知道是否有更有效的方法来解决这个问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:17:48.333

您可以通过像这样利用`%`(modulus) 运算符做更少的数学运算：

```
var floor = Math.floor; // store a reference to Math.floor, anything goes when you have 640,000 iterations 

parse: function(imageHeight, imageWidth) {
    for(var i = 0; i < this.imageData.length; i++) {
        this.data[i % imageWidth][Math.floor(i/imageHeight)] = [this.imageData[i],
                           this.imageData[i+1],
                           this.imageData[i+2],
                           this.imageData[i+3]];

    }
}​ 
```

当然，你必须想出 和 的`imageHeight`值`imageWidth`。

# javascript - javascript正则表达式说非法

> ID：10808787
> 
> 赞同：0
> 
> 时间：2012-05-30T01:11:38.433
> 
> 标签：javascript, replace, syntax-error

我正在使用以下代码来检测 pre 元素中的所有 javadoc 注释，以用我选择的颜色替换它们。

```
<script type="text/javascript">
    var arr = document.getElementsByTagName("pre");
    for (var i=0; i<arr.length; i++){
        arr[i].innerHTML = arr[i].innerHTML.replace(/\t/g, '&nbsp;&nbsp;&nbsp;&nbsp;');
        arr[i].innerHTML = arr[i].innerHTML.replace(/</g, '&lt;');
        arr[i].innerHTML = arr[i].innerHTML.replace(/>/g, '&gt;');
        arr[i].innerHTML = arr[i].innerHTML.replace(/\\/*\*\*([^\*]|\*(?!/))*\\*/g, '<font color="#3F5FBF">' + $& + '</font>');
    }
</script> 
```

但它给了我以下错误。

```
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

编辑：将代码更改为

```
<script type="text/javascript">
var arr = document.getElementsByTagName("pre");
for (var i=0; i<arr.length; i++){
    arr[i].innerHTML = arr[i].innerHTML.replace(/\t/g, '&nbsp;&nbsp;&nbsp;&nbsp;');
    arr[i].innerHTML = arr[i].innerHTML.replace(/</g, '&lt;');
    arr[i].innerHTML = arr[i].innerHTML.replace(/>/g, '&gt;');
    var reg = /\\\/*\*\*([^\*]|\*(?!\/))*\\*/;
    var cds = arr[i].innerHTML.match(reg);
    for (var j=0; j<cds.length; j++){
        arr[i].innerHTML = arr[i].innerHTML.replace(cds[j], '<font color="#3F5FBF">' + cds[j] + '</font>'); 
    }
}
prettyPrint();
</script> 
```

但是错误变为

```
Uncaught TypeError: Cannot read property 'length' of null start-ahead.html:234 
```

（匿名函数）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T01:16:45.427

问题就在这里`/\\/*\*\*([^\*]|\*(?!/))*\\*/g`，当你用了`\\`然后用了`/`。该程序了解您的正则表达式是这样的`/\\/`，并且之后的结果会导致错误。试试这个正则表达式：

```
/\/*\*\*([^\*]|\*(?!\/))*\\*/g 
```

或者，取决于你想要什么：

```
/\\\/*\*\*([^\*]|\*(?!\/))*\\*/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T01:16:36.303

该[`replace()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)需要一个字符串作为第二个参数。其中[要替换为捕获的模式](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter)需要在该字符串中。

您尝试使用两个字符串文字和一个名为“ `$&`”的变量来构建该字符串。然而，这是一个非法的名称——“ `&`”是一个[按位与运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators)并且~~缺少第二个操作数，因为它后面跟着“ `+`”——SyntaxError。~~会产生可怕的运行时错误。

此外，正如@FelixKling 提到的，您的正则表达式被严重转义。它可能应该是类似的东西`new Regexp("\\/*\*\*([^\*]|\*(?!/))*\\*", "g")`，但是有一些无用的反斜杠。你想接近什么？是`/\*{3}([^*]|\*(?!\/))\**/g`吗？

# image - Adobe Flex：如何根据数据库结果渲染/删除图像

> ID：10808790
> 
> 赞同：0
> 
> 时间：2012-05-30T01:11:48.100
> 
> 标签：image, apache-flex

在我的数据库中，我正在存储公司的社交媒体 ID。显然，并非所有公司都拥有所有社交媒体。在我的数据库中，我有公司 ID：Facebook、Twitter、Youtube 和 Flickr。

所有图标都列在一个标签中。如果公司没有该社交媒体的 ID，我想删除图标。目前，如果`twitterid == null`图像将被设置为，`visible=false`但显然图标应该去的地方有一个空白。我需要将下一个图标移动到那个空白区域。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:04:12.257

您遗漏了很多细节并且没有分享您的代码，但我怀疑除了设置可见属性之外，您还想设置[includeInLayout](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#includeInLayout)属性。

# wpf - 基于列表框选择 (XAML) 更新文本框

> ID：10808791
> 
> 赞同：0
> 
> 时间：2012-05-30T01:12:25.443
> 
> 标签：wpf, xaml, data-binding, datacontext

我有一个列表框，它显示 XML 文件中的多个属性。每当您在列表框中选择这些项目之一时，如何更新文本框？我的列表框如下所示：

```
<ListBox Name="RouterSelection" ItemsSource="{Binding Source={StaticResource RoutingData}, XPath=Routes/Route/IdClient}"/> 
```

我的文本框看起来像这样：

```
<TextBox DataContext="{Binding ElementName=RouterSelection, Path=SelectedItem}" Text="{Binding XPath=@Value}"/> 
```

但是当您选择任何项目时，文本框不显示内容。我错过了什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T04:28:53.793

尝试

```
<TextBox Text="{Binding ElementName=RouterSelection, Path=SelectedValue}"/> 
```

并为 ListBox 设置 SelectedValuePath

# c# - 查找多个元素的父（最近）DOM元素

> ID：10808795
> 
> 赞同：1
> 
> 时间：2012-05-30T01:12:56.277
> 
> 标签：c#, html, dom

我发现解决方案有点棘手，我需要一些帮助。假设我们有 3 个 HTML DOM 元素，我们如何找到包含所有这 3 个元素的最接近的元素？有没有有效的方法来实现这一目标？

我正在使用 C# .net 和名为 webBrowser1 的经典 System.Windows.Forms 网络浏览器。

如果这个问题听起来有点难，让我解释一下。我们有以下 HTML 文本：

```
<body>
<div id="a">
  <div id="b">some text</div>
  <div id="c">some text</div>
  <div id="d"> 
      <div id="e">some text</div>
      <div id="f">
           <div id="g">some text</div>
      </div>
  </div>
</div>
</body> 
```

包含元素*BC*和*E*的第一个元素是**A**

包含*G*和*E*的第一个元素是**D**

真的希望有人可以帮助解决这个问题。先感谢您

# ruby-on-rails - 保存到 db、rails 后在控制器中检索 :id 属性

> ID：10808798
> 
> 赞同：0
> 
> 时间：2012-05-30T01:13:18.373
> 
> 标签：ruby-on-rails, controller, params

您好我想知道是否可以在保存后检索 :id （在数据库中自动递增的主键）？我有我最喜欢的关系控制器

```
def create
    @lesson = Lesson.find(params[:favorite_relationship][:lesson_id])
    current_user.favorite!(@lesson)
    #params[:id] = ...
    respond_to do |format|
      format.html { redirect_to @lesson }
      format.js
    end
end 
```

当 current_user.favorite！被调用，它进入我的用户模型

```
 def favorite!(lesson)
    favorite_relationships.create!(lesson_id: lesson.id)
  end 
```

但是，有没有办法检索：id the favorite_relationship 被保存为？我想在注释掉的行中设置它

```
#params[:id] = 
```

我需要为我使用的 gem 指定一个 params[:id]

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:45:38.247

我假设您正在寻找 favorite_relationships.id？在这种情况下，修改您的控制器以将变量中的值存储为

```
favorite_relationships = current_user.favorite!(@lesson)
params[:id]= favorite_relationships.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:07:39.387

从[railsforum复制](http://railsforum.com/viewtopic.php?id=19345)

说你的表名是 table_A

```
@a = table_A.new()
@a.first = "firs name"
@a.last = "last name"
@a.save 
```

要获取 table_A 的最后插入 ID，只需使用 @a.id

@a.id 将返回 table_A 的最后一个被保险人 id

# node.js - 使用 NodeJS 访问网络摄像头

> ID：10808805
> 
> 赞同：28
> 
> 时间：2012-05-30T01:14:21.260
> 
> 标签：node.js

有没有人有尝试通过节点访问网络摄像头的经验？我似乎找不到任何先前的尝试。

扩展一点 - 我有一个 nodeJS 服务器正在运行，我希望能够在 Node 正在运行的同一个盒子上访问网络摄像头（所以真的，我更多地使用 node 作为客户端实现）。我想做的一些事情-从网络摄像头获取图像，或者，如果我可以将流传输到网络摄像头，然后通过管道传输到另一台服务器并流传输到其他客户端，那就太棒了；）

有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-31T17:16:43.787

在使用网络摄像头时，我认为 Node.js 没有什么特别之处，无论您使用什么语言或服务器，这些概念通常都是相同的。所涉及的硬件和该硬件的接口应该定义您的解决方案。

最简单的情况是提供由网络摄像头附带的软件定期保存到磁盘的单个快照，或者您可以进行[系统调用](http://nodejs.org/docs/latest/api/child_process.html#child_process_child_process_exec_command_options_callback)，调用[本地进程](http://tldp.org/HOWTO/html_single/Webcam-HOWTO/#COMMAND)或[程序](http://batchloaf.wordpress.com/commandcam/)以按需保存快照。然后，您可以使用定期刷新最新快照的 Node.js 提供页面。

或者，您可以使用为操作系统（[DirectShow](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375454(v=vs.85).aspx)、[Windows Image Acquisition](http://msdn.microsoft.com/en-us/library/ms630368(VS.85).aspx)、[IKPictureTaker](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/IKImagePicker_Class/IKImagePicker_Reference.html)、[V4L2](http://v4l2spec.bytesex.org/spec/)等）量身定制的控制器直接与网络摄像头硬件交互，并使用 Node.js 作为传输机制创建[实时视频流。](http://en.wikipedia.org/wiki/HTTP_Live_Streaming)

如果您的网络摄像头有一个网络接口并且已经提供了一个流服务器，那么您可能想要研究一个反向代理解决方案，例如使用 nginx 或 Apache。[这是一个](http://www.kutukupret.com/2011/04/15/nginx-vlc-streaming-cheap-webcam/)使用 nginx 代理由 VLC 格式化的网络摄像头流的解决方案。

[这是一个创造性的解决方案，它通过获取单个帧、编码图像数据并使用 websockets 将图像数据推送到客户端页面上的画布元素来捕获视频流](http://francisshanahan.com/index.php/2011/stream-a-webcam-using-javascript-nodejs-android-opera-mobile-web-sockets-and-html5/)，使用 Node.js 作为中间服务器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-08T10:57:15.847

也可以使用 node.js 库[node-webcam](https://www.npmjs.com/package/node-webcam)

```
Webcam.capture( "test_picture", function( err, data ) {} ); 
```

但我想它是 fswebcam 的简单包装器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-10T14:03:34.747

可以将 OpenCV 与 Node 一起使用来访问您的相机……本文将为您提供基本概述。 [https://community.risingstack.com/opencv-tutorial-computer-vision-with-node-js/](https://community.risingstack.com/opencv-tutorial-computer-vision-with-node-js/)

另一种方法是在 npm 存储库中按*摄像头*搜索，您会发现很多处理网络摄像头的模块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-26T23:15:45.897

我正在开发我自己的基于 puppeteer（chrome 无头浏览器）的库，因此它是 100% 可移植的，并且工作正常（在我的机器中为 40fps，视频大小为 480x320）：[https ://www.npmjs.com/package/camera -捕获](https://www.npmjs.com/package/camera-capture)。也有不同的视频流消费方式和命令行 API。非常新的项目，因此非常欢迎反馈。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2016-01-05T10:32:09.650

在 node 应用程序中访问 web 非常简单，我们只需要使用 html5 getUserMedia() 方法来做到这一点，并且扩孔部分非常容易这里是完整的代码，请 node 我正在使用 express 框架：

**第 1 步。**我在其中访问网络摄像头的 layout.jade 文件

```
extends layout
block content
  div(class="container" id="Cool" ng-app="mainApp" ng-controller="formController")
    h2.blue.red#header("property"="pValue") Capture your image from webcam
    div.row
     div.col-md-6
       video#video(autoplay='')
     div.col-md-6
       canvas#canvas(width='640', height='480')
    div
      button#snap Capture
      button#new New
      button(id="upload" ng-click="uploadImage()") Upload

  script(type="text/javascript").
   // Put event listeners into place
      window.addEventListener("DOMContentLoaded", function() {
      // Grab elements, create settings, etc.
      var canvas = document.getElementById("canvas"),
      context = canvas.getContext("2d"),
      video = document.getElementById("video"),
      videoObj = { "video": true },
      errBack = function(error) {
      console.log("Video capture error: ", error.code);
      };
      // Put video listeners into place
      if(navigator.getUserMedia) { // Standard
      navigator.getUserMedia(videoObj, function(stream) {
      video.src = stream;
      video.play();
      }, errBack);
      } else if(navigator.webkitGetUserMedia) { // WebKit-prefixed
      navigator.webkitGetUserMedia(videoObj, function(stream){
      video.src = window.URL.createObjectURL(stream);
      video.play();
      }, errBack);
      } else if(navigator.mozGetUserMedia) { // WebKit-prefixed
      navigator.mozGetUserMedia(videoObj, function(stream){
      video.src = window.URL.createObjectURL(stream);
      video.play();
      }, errBack);
      }
      // Trigger photo take
      document.getElementById("snap").addEventListener("click", function() {
      context.drawImage(video, 0, 0, 640, 480);
      // Littel effects
      //$('#video').fadeOut('slow');
      $('#canvas').fadeIn('slow');
      //$('#snap').hide();
      //$('#new').show();
      // Allso show upload button
      //$('#upload').show();
      });
      // Capture New Photo
      document.getElementById("new").addEventListener("click", function() {
      //$('#video').fadeIn('slow');
      //$('#canvas').fadeOut('slow');
      //$('#snap').show();
      //$('#new').hide();
      });
      // Upload image to sever
      document.getElementById("upload").addEventListener("click", function(){
      var dataUrl = canvas.toDataURL();
       console.log(dataUrl);

      });
      }, false);   
   var mainApp = angular.module("mainApp", []);
   mainApp.controller("formController", function($scope, $http) {
       $scope.uploadImage = function () {
         var request = $http({
            method: "post",
            url:  "/captureImage",
            data: {
               base64: document.getElementById("canvas").toDataURL()
            },
            headers: { 'Content-Type': 'application/json' }
          });
        request.success(function (data) {
          console.log(data);
        });
        request.error(function(serverResponse, status, headers, config) {
           alert("failure");
        });
      };
   }); 
```

**步骤 2.**我的路线文件，我在其中提交或保存我上传的图像

```
router.get('/captureImage', function(req, res, next) {
    res.render('captureImage', { title: 'Capture Image and upload' });
});

router.post('/captureImage', function(req, res, next) {
    //console.log("FormData "+ req.body.base64);
    var base64Data = req.body.base64.replace(/^data:image\/png;base64,/, "");
    fs.writeFile("uploads/out.png", base64Data, 'base64', function(err) {
        if(err){
            console.log(err);
            }else{
            res.send(JSON.stringify({'status': 1, 'msg': 'Image Uploaded'}));
        }
    });
}); 
```

如需完整教程，请点击[使用 NodeJS 访问网络摄像头并保存点击图片链接 - TrinityTuts](https://trinitytuts.com/accessing-webcam-with-nodejs-and-save-click-image/)

# python - 如何在空格处拆分字符串？

> ID：10808806
> 
> 赞同：0
> 
> 时间：2012-05-30T01:14:38.380
> 
> 标签：python, string, for-loop

我想在空格所在的位置拆分字符串，并将其放入数组中。例如，如果 str 是“foo bar asdf”，我希望数组是 [“foo”、“bar”、“asdf”]。我知道您可以像这样轻松地做到这一点：

```
str = raw_input("Enter String")

cstr = ""
for char in str:
    if char == " ":
        print cstr
    else:
        cstr = cstr + char 
```

但这只会输出第一个单词直到空格，对于这么简单的东西来说它是相当庞大的。我怎么能简单地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T01:18:37.750

这就是`split`字符串方法的用途：

```
>>> "foo bar asdf".split(' ')
['foo', 'bar', 'asdf'] 
```

参数是要分割的字符串，或者你可以`.split()`不使用任何空格分割的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T01:18:27.677

我想你正在寻找：[http ://docs.python.org/library/stdtypes.html?highlight=split#str.split](http://docs.python.org/library/stdtypes.html?highlight=split#str.split)

在您的情况下，用法类似于：

```
 for cstr in mystr.split(' '):  #renamed 'str' to 'mystr'
     print cstr 
```

# javascript - 根据 url load() 选择要加载的文档

> ID：10808807
> 
> 赞同：1
> 
> 时间：2012-05-30T01:15:07.807
> 
> 标签：javascript, load

你好，我首先要为我的英语道歉，我不擅长它，但我希望我能在这里得到我的答案。

我有一个带有`load()`功能的菜单，效果很好，但我有两个小问题。为了解释它，我会给你例子。

我的菜单是这样的：

-首页 -
电影 -联系
方式

当我单击电影时，它会加载`movies.php`并且链接是这样的：

`www.server.com/#!/movies`

这很好，因为我需要一个这样的链接，但是如果您将相同的链接复制并粘贴到浏览器，它会提供默认数据，因此它没有`movies.php`加载，我需要在粘贴链接时它具有加载`www.server.com/#!/contact`的 div 。`contact.php`

而且这只是我喜欢的一点，我如何`load()`在页面的其余部分收费的同时放置加载图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:27:10.353

您所说的称为“路由”，从头开始发明并不容易。我建议使用[Crossroads 之](http://millermedeiros.github.com/crossroads.js/)类的工具来帮助您降低路线。Crossroads 是一个只做路由的库。它允许您像您想要的那样“深度链接”您的页面。Backbone.js 和 Sammyjs 等库允许您通过深度链接实现相同类型的路由功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:25:02.420

根据 URL*维护页面的状态*很容易。

```
// Handle the `load` event for the page.
window.load = function() {

  // Get what follow the `hash` (#) from the URL.
  var hash = location.hash;

  // Compare and do your stuff.
  if (hash === '#!/movies')
    load('movies.php');
  ...
}; 
```

HTH（希望这有帮助）

# c# - Request.Url.UserInfo 无值

> ID：10808810
> 
> 赞同：6
> 
> 时间：2012-05-30T01:15:20.117
> 
> 标签：c#, request

我请求一个 URL 作为`https://user:pass@domain.com/etcetc`

在 Controller 中，我使用`Request.Url.UserInfo`get nothing，空字符串，为什么？或者，我怎样才能到达`user:pass`控制器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T15:57:07.237

这里有几件事要检查。

1）原始网址是什么样的？
2) 验证 UserInfo 属性是否有效（Microsoft 表示有效，我的测试也显示有效）。

```
 Response.Write("Raw: " + Request.RawUrl);
    Response.Write("<br />");

    Uri uriAddress = new Uri("http://user:password@www.contoso.com/index.htm ");
    Response.Write("Test URL Results: "+uriAddress.UserInfo); 
```

根据我自己的测试，我猜想 user:password 部分在进入您的页面之前已被删除。正如其他人所说，在 IE 中，我无法让它接受这些值。在 Chrome 中，它似乎也自动将它们剥离（在我输入地址并按 Enter 后，值立即从地址栏中消失）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T01:19:04.073

[这](http://support.microsoft.com/kb/834489)可能是你的问题。IE 默认不支持。

# qml - 如果内部 qml 行元素失败，则使用

> ID：10808824
> 
> 赞同：2
> 
> 时间：2012-05-30T01:17:48.563
> 
> 标签：qml

我在 Row 元素中添加了一个属性 cond，所以当 cond 为 true 时，它​​会绘制 3 张图片，否则只会绘制一张

但是 qml 报告“意外的令牌‘如果’”，有什么想法吗？谢谢

```
import QtQuick 1.1

Rectangle{
id:rect
    property bool cond:true;
    Row{
     Image{ source:"good.png" }
     if(cond) {
         Image{ source:"good.png" }
         Image{ source:"good.png" }
     }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T06:41:54.973

您的代码在[语法上](http://doc-snapshot.qt-project.org/4.8/qdeclarativeintroduction.html)是错误的：QML 结构描述语句不能包含在 javascript 代码中。

但解决方案很简单：

```
import QtQuick 1.1

Rectangle {
    id:rect
    property bool cond: true;
    Row{
        Image{ source:"good1.png" }

        // show image elements only if 'cond' is true
        Image{ source:"good2.png"; visible: cond }
        Image{ source:"good3.png"; visible: cond }
    }
} 
```

[或者，您可以动态](http://doc-snapshot.qt-project.org/4.8/qdeclarativedynamicobjects.html#creating-a-component-dynamically)创建图像元素，但这更复杂。

# c++ - C++函数返回数组

> ID：10808825
> 
> 赞同：1
> 
> 时间：2012-05-30T01:18:13.367
> 
> 标签：c++, arrays, return-value

我需要我的函数返回一个数组，但它不像大多数搜索示例所示的那样将数组作为参数。

代码是这样的：

```
double  myfunction ()
{
    double arr[10];
    //assign values to the array
    return arr;
}

main()
{
    double arr2[10];
    arr2[10] = myfunction;
    //print arr2
} 
```

当我使用指针来显示数组时，我得到了像“CCCCCC”这样的值......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T01:23:04.797

你不能这样做......数组是内存块，因此不能“返回”......你可以通过函数调用传递指向数组的指针，但你不能安全地返回指向的指针除非声明了这些数组，否则数组内存块`static`。否则会得到未定义的结果，因为函数返回时数组占用的堆栈内存将被回收，返回的指向堆栈内存位置的指针将无效。使用返回的指针很可能会破坏堆栈，或者使您的程序崩溃。

在 C 中，您必须显式使用指向堆分配数组的指针以避免此问题，但在 C++ 中，最好使用`std::vector`或`std::array`用于固定大小的数组。例如，`std::vector`仍然使用堆内存来存储数组（而不是堆栈），但通过 RAII，堆内存由对象的生命周期安全地管理。因此，与 C 不同，您不必担心由于无法释放指向堆内存的函数返回的指针所指向的内存而导致内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T01:49:13.400

注意：`main` *必须*有 result type `int`，符合 C 和 C++ 标准。

在任何可能的地方使用也是一个好主意`const`，因为这会给代码增加约束，使代码更容易理解（更少考虑）。

最后，也是最重要的，*一定*要使用标准库设施。

```
#include <array>
using namespace std;

typedef array<double, 10> MyArray;

MyArray myfunction ()
{
    MyArray arr;
    //assign values to the array
    return arr;
}

int main()
{
    MyArray const arr = myfunction();
    //print arr2
} 
```

# java - Android NumberPicker 隐藏递增和递减按钮

> ID：10808830
> 
> 赞同：7
> 
> 时间：2012-05-30T01:18:28.803
> 
> 标签：java, android

我正在使用[NumberPicker](http://developer.android.com/reference/android/widget/NumberPicker.html)并针对 API 11 及更高版本（3.0 及更高版本），所以我使用受支持的[NumberPicker](http://developer.android.com/reference/android/widget/NumberPicker.html)。这是在计时器应用程序中使用的。我希望能够随意隐藏递增和递减按钮，以便按钮在隐藏时不会占用布局中的空间。我试图这样做：

```
View increment = secs.getChildAt(0);
increment.setVisibility(View.GONE);
View decrement = secs.getChildAt(2);
decrement.setVisibility(View.GONE); 
```

其中 secs 是我的 NumberPicker 在计时器中的秒数。如果我尝试隐藏它显示数字的位置（一个 EditText 小部件），它隐藏得很好，但上面的代码什么也不做。

所以，我的问题是，如何实现隐藏递增和递减按钮？我真的很想避免像我在其他帖子中读到的那样制作自己的自定义号码选择器，但如果这真的是我愿意尝试的唯一方法。

谢谢！

这是根据要求提供的附加代码。秒表启动时的 onClick 方法中的代码：

```
if (stopPush)
{
startTime = System.currentTimeMillis() - elapsedTime;
}
else
{
startTime = System.currentTimeMillis();
}
mHandler.removeCallbacks(startTimer);
mHandler.postDelayed(startTimer, 0); 
```

处理秒表功能的代码：

```
private Runnable startTimer = new Runnable()
{
public void run()
{
    elapsedTime = System.currentTimeMillis() - startTime;
    updateTimer(elapsedTime);
    mHandler.postDelayed(this, REFRESH_RATE);
}
}; 
```

计算和更新秒表时间的代码：

```
this.millis = (int) (elapsedTime / 100);
this.seconds = (int) (elapsedTime / 1000);
this.minutes = (seconds / 60);
this.hours = (minutes / 60);
millis = millis % 10;
seconds = seconds % 60;
minutes = minutes % 60;
hours = hours % 24;
runOnUiThread(new Runnable()
{
public void run()
{
    hrs.setValue(hours);
}
});
runOnUiThread(new Runnable()
{
public void run()
{
    mins.setValue(minutes);
}
});
runOnUiThread(new Runnable()
{
public void run()
{
    secs.setValue(seconds);
}
});
runOnUiThread(new Runnable()
{
public void run()
{
    mills.setValue((int) millis);
}
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T18:55:27.500

当您没有在数字选择器上提供最小值和最大值时，按钮（通常）不显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T11:46:24.583

开发者网站说，

NumberPicker 是一个小部件，它使用户能够从预定义的范围中选择一个数字。此小部件有两种风格，向用户呈现哪一种取决于当前主题。

如果当前主题是从小部件派生的，`Theme`则将当前值显示为可编辑的输入字段，上面有一个递增按钮，下面有一个递减按钮。长按按钮可以快速更改当前值。点击输入字段可以输入所需的值。

如果当前主题源自`Theme_Holo`或`Theme_Holo_Light`小部件将当前值显示为可编辑的输入字段，上面的值较小，下面的值较大。点击较小或较大的值，通过向上或向下动画数字轴来选择它，以使所选值成为当前值。向上或向下翻转允许当前值的多个增量或减量。长按较小和较大的值也可以快速更改当前值。点击当前值可以输入所需的值。

因此，您可以尝试更改主题。

# backbone.js - 使用 jqMobi 的骨干路由

> ID：10808831
> 
> 赞同：0
> 
> 时间：2012-05-30T01:18:32.533
> 
> 标签：backbone.js, jqmobi

我一直在移植我的骨干应用程序以使用 jqMobi 和 jqUI 作为界面。

最初，我没有从我的主干路由器得到任何东西，我什至无法输出到控制台，路由被完全忽略了。

我将该`backbone.init()`函数移到 ui.js`init`函数中，现在正在触发路由，但出现错误

```

未捕获的类型错误：无法读取未定义的属性“样式”

未捕获的类型错误：无法读取未定义的属性“标题”

```

从这条路线

```
编辑：函数（id）{
        警报（“触发”）；
         $.ui.setTitle('临时标题');
        $.ui.loadContent('edit',false,false,'slide');

      新的 MyApp.Views.EditUser(id);

    },

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:45:01.180

```
$.ui.loadContent('edi',false,false,'slide'); 
```

“edi”是您尝试加载的面板的正确 ID 吗？

# c# - “不能将（子类型）隐式转换为（基本类型）”？

> ID：10808833
> 
> 赞同：4
> 
> 时间：2012-05-30T01:18:38.517
> 
> 标签：c#, class

我正在学习使用已经创建的库并对演示项目进行调整。我使用了一些已经制作好的库 .dll，其中定义了类：

```
public class PdfProcessor
{
   public int process(Pdf varname)
   {
     status=doSomeConversion(varname);
     status=doFtpUpload(varname);
     return status;
   }
}

public class Pdf
{
  public DateTime systemCreateDate;
  public int  id;
  public string description;

  public void  method1()
  {
    doSomePreperation();
  }
} 
```

我想在我的项目中添加一些额外的变量，并派生该类：

```
public class MyPdf : Pdf

{
  public string checksum;
  public double rating;
} 
```

当我尝试：

```
Pdf varname = new MyPdf(); 
```

我得到：

> 错误：无法将类型“MyPdf>”隐式转换为“Pdf>”

如何`PdfProcessor.process()`从派生类传递给对象？我不想更改库代码中的任何内容。

# iphone - 与 iPhone 项目一起编译程序集 (.S) 文件

> ID：10808837
> 
> 赞同：0
> 
> 时间：2012-05-30T01:19:50.313
> 
> 标签：iphone, c, xcode, assembly, clang

在我的 iPhone 项目中，我有一个名为 arm_asm_stub.S 的程序集文件，其中包含我需要从项目中另一个名为 main.c 的文件中调用的方法。当我不在我的 main.c 文件顶部 #include 文件时，我没有收到任何构建错误，但我确实收到了链接器错误：

```
Undefined symbols for architecture armv7:
  "_execute_arm_translate", referenced from:
      _iphone_main in main.o 
```

但是，当我尝试在 main.c 的顶部#include 文件时，Xcode 使用 Clang 编译 arm_asm_stub.S，所以我得到了一堆错误，当我不 #include 文件时不会出现这些错误如：

```
unknown type name 'ldr'
expected identifier or '('
use of undeclared identifier 'sp' 
```

Xcode 如何与项目的其余部分分开编译这个文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:57:59.540

您只需将`.S`文件添加到项目中，构建系统就会自动组装它。不过要小心这些符号。所有的 C 函数都有一个编译器在它们前面加上下划线，因此您的汇编语言例程标签需要在前面有一个下划线，以便 C 代码能够调用它。

# python - Pig 中的 Python UDF

> ID：10808838
> 
> 赞同：1
> 
> 时间：2012-05-30T01:20:08.693
> 
> 标签：python, hadoop, mapreduce, apache-pig

[我在这里](https://cwiki.apache.org/confluence/display/PIG/UDFsUsingScriptingLanguages)看过文档，但我承认我觉得它相当缺乏。我想知道是否有人可以给我一些关于将 Python UDF 合并到 Pig 中的示例。尤其

*   在 Pig 0.10 之前，布尔类型不存在，但`FILTER`操作需要将结果解析为布尔值。如果我没有最新版本，我会永远诅咒返回`1`或`0`使用吗？`FILTER alias BY py_udf.f(field) > 0`
*   Python 是否无法访问、`Algebraic`和`Accumulator`接口？`Filter`
*   我也不能访问分布式缓存吗？
*   存储/加载功能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:23:01.727

Python UDF 非常有限。您不能使用 Algebraic 或 Accumulator 接口，也不能在 Python 中编写 LoadFunc。对于比地图操作更复杂的任何事情，您可能需要求助于 Java UDF。

也就是说，可以在[http://ragrawal.wordpress.com/2013/02/24/on-writing-python-udf-for-pig-a-perspective/](http://ragrawal.wordpress.com/2013/02/24/on-writing-python-udf-for-pig-a-perspective/)找到具有动态 outputSchema 的更复杂的 Python UDF 。这可能对您没有帮助，但它会让您更好地理解 Python UDF 可以做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:36:19.730

这可能无法回答您的大多数具体问题，但[这篇博](http://techblug.wordpress.com/2011/08/07/transitive-closure-in-pig/)文和链接代码包含几个很好的将 Pig 与 Python 结合使用的示例，并且确实包括了 Store/Load 的使用以及它们与 Python 的交互。

# sql - 我的查询有什么问题？

> ID：10808840
> 
> 赞同：0
> 
> 时间：2012-05-30T01:20:21.640
> 
> 标签：sql, sql-server, sql-server-2008, subquery

我的查询（如下）不起作用。我有点知道为什么它不起作用，但我需要帮助修复它。基本上我正在尝试执行以下操作：

从 FireEvent 获取所有行 从 HitEvent 获取在 FireEvent 的 -5/5 秒内的所有行，如果 HitEvent 已经“配对”了一个 FireEvent，那么我不想再次包含它。基本上，我不希望任何 HitEvent 多次出现在我的查询中！我在 SQL 聊天室中被告知要使用 RANK，如果我能弄清楚如何在我的子查询中包含 FireEvent 中的 EventTime，它似乎会起作用......

无论如何，这是查询...

```
SELECT FireEvent.ExerciseID, 
       FireEvent.FireEventID, 
       tempHitEvent.HitEventID, 
       FireEvent.AssociatedPlayerID, 
       tempHitEvent.AssociatedPlayerID, 
       FireEvent.EventTime, 
       tempHitEvent.EventTime, 
       FireEvent.Longitude, 
       FireEvent.Latitude, 
       tempHitEvent.Longitude, 
       tempHitEvent.Latitude, 
       tempHitEvent.HitResult, 
       FireEvent.AmmunitionCode, 
       FireEvent.AmmunitionSource, 
       FireEvent.FireEventID, 
       0 AS 'IsArtillery' 
FROM   FireEvent 
       LEFT JOIN (SELECT HitEvent.*, 
                         FireEvent.FireEventID, 
                         Rank() 
                           OVER ( 
                             ORDER BY HitEvent.EventTime) AS RankValue 
                  FROM   HitEvent 
                         INNER JOIN FireEvent 
                                 ON FireEvent.EventTime BETWEEN 
                                    Dateadd(millisecond, -5000, 
                                    HitEvent.EventTime) AND 
                                               Dateadd(millisecond, 
                                               5000, HitEvent.EventTime) AND HitEvent.FiringPlayerID = FireEvent.PlayerID 
                   AND HitEvent.AmmunitionCode = 
                       FireEvent.AmmunitionCode
                   AND HitEvent.ExerciseID = 
                       'D289D508-1479-4C17-988C-5F6A847AE51E' 
                        AND FireEvent.ExerciseID = 
                       'D289D508-1479-4C17-988C-5F6A847AE51E' 
                   AND HitEvent.HitResult NOT IN ( 0, 1 ) ) AS 
                 tempHitEvent 
              ON ( 
              RankValue = 1
            AND tempHitEvent.FireEventID = 
                     FireEvent.FireEventID 
                     )
WHERE  FireEvent.ExerciseID = 'D289D508-1479-4C17-988C-5F6A847AE51E' 
ORDER BY HitEventID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:45:39.767

假设我没有引入错误，我相信以下内容将满足您的要求。我无法测试代码，但我相信我的概念是正确的。很容易出现错字或其他一些您必须追踪的愚蠢错误。但我相信您只需要在 CTE 中加入一次，就可以直接从 CTE 中选择最终结果。

对于如何将命中事件与火灾事件匹配，您并不是很具体。您永远不希望命中事件出现两次，因此我按 HitEventID 进行分区。我假设您希望以最小化两个事件时间之间差异的方式对它们进行配对。因此，我按两个事件之间差异的绝对值排序，并通过 FireEventID 打破任何平局。

*编辑 - 将 HitResult 过滤器从 where 子句移到外连接子句。
EDIT2 - 附加到最终 where 子句以保留所有不匹配的 FireEvents（HitEventID 为空）*

```
with RankedHits as (
  select F.ExcerciseID,
         F.FireEventID,
         H.HitEventID,
         F.AssociatedPlayerID as FireAssociatedPlayerID,
         H.AssociatedPlayerID as HitAssociatedPlayerID,
         F.EventTime as FireEventTime,
         H.EventTime as HitEventTime,
         F.Longitude as FireLongitude,
         F.Latitude as FireLatitude,
         H.Longitude as HitLongitude,
         H.Latitude as HitLatitude,
         H.HitResult,
         F.AmmunitionCode,
         F.AmmunitionSource,
         F.FireEventID,
         rank() over( partition by HitEventID
                      order by abs( datediff( ms, H.EventTime, F.EventTime ) ),
                               F.FireEventID
                    ) as HitRank
    from FireEvent F
    left join HitEvent H
      on F.AmmunitionCode = H.AmmunitionCode
     and F.PlayerID = H.FiringPlayerID
     and F.ExcerciseID = H.ExcerciseID
     and H.HitResult not in( 0, 1 )
     and F.EventTime between dateadd(millisecond, -5000, H.EventTime)
                         and dateadd(millisecond,  5000, H.EventTime)
   where F.ExcerciseID = 'D289D508-1479-4C17-988C-5F6A847AE51E'
)
select ExcerciseID,
       FireEventID,
       HitEventID,
       FireAssociatedPlayerID,
       HitAssociatedPlayerID,
       FireEventTime,
       HitEventTime,
       FireLongitude,
       FireLatitude,
       HitLongitude,
       HitLatitude,
       HitResult,
       AmmunitionCode,
       AmmunitionSource,
       FireEventID,
       0 as IsArtillery
  from RankedHits
 where HitRank=1 or HitEventID is null 
```

*编辑回应评论*

这是从您的评论链接派生的固定代码。关键错误是从最后缺少 HitRank=1 过滤器。还在选择列表中用 HitResult 替换了 HitRank。

没有必要，但我还将玩家练习 ID 与火灾事件练习 ID 进行了比较，而不是字符串文字。这使得将来更改练习 ID 变得更容易，因为字符串文字现在只在查询中出现一次。

我更喜欢 CTE 语法，但我在 FROM 子句中保留了您似乎更喜欢的内联视图语法。

*EDIT2 - 附加到最终 where 子句以保留所有不匹配的 FireEvents（HitEventID 为空）*

```
INSERT #Events (
        exerciseid,
        fireeventid,
        hiteventid,
        firingplayerid,
        hitplayerid,
        firingplayerunitid,
        hitplayerunitid,
        firingplayerassociatedplayerid,
        hitplayerassociatedplayerid,
        firingtime,
        hittime,
        firinglongitude,
        firinglatitude,
        hitlongitude,
        hitlatitude,
        hitresult,
        ammunitioncode,
        ammunitionsource,
        eventid,
        isartillery
)
(
  SELECT ExerciseID, FireEventID, HitEventID, FiringPlayerID, HitPlayerID,
         FiringUnitID, HitUnitID, FireAssociatedPlayerID, HitAssociatedPlayerID,
         FireEventTime, HitEventTime, FireLongitude, FireLatitude, HitLongitude,
         HitLatitude, HitRank, AmmunitionCode, AmmunitionSource, EventID, 0
  FROM (
  select FireEvent.ExerciseID,
         FireEvent.FireEventID,
         HitEvent.HitEventID,
         FireEvent.PlayerID as FiringPlayerID,
         HitEvent.PlayerID as HitPlayerID,
         FiringPlayer.UnitID as FiringUnitID,
         HitPlayer.UnitID as HitUnitID,
         FireEvent.AssociatedPlayerID as FireAssociatedPlayerID,
         HitEvent.AssociatedPlayerID as HitAssociatedPlayerID,
         FireEvent.EventTime as FireEventTime,
         HitEvent.EventTime as HitEventTime,
         FireEvent.Longitude as FireLongitude,
         FireEvent.Latitude as FireLatitude,
         HitEvent.Longitude as HitLongitude,
         HitEvent.Latitude as HitLatitude,
         HitEvent.HitResult,
         FireEvent.AmmunitionCode,
         FireEvent.AmmunitionSource,
         FireEvent.FireEventID AS 'EventID',
         rank() over( partition by HitEventID
                      order by abs( datediff( ms, HitEvent.EventTime, FireEvent.EventTime ) ),
                               FireEvent.FireEventID
                    ) as HitRank
    from FireEvent
    left join HitEvent
      on FireEvent.ExerciseID = HitEvent.ExerciseID
      and FireEvent.AmmunitionCode = HitEvent.AmmunitionCode
     and FireEvent.PlayerID = HitEvent.FiringPlayerID
     and HitEvent.HitResult not in( 0, 1 )
     and FireEvent.EventTime between dateadd(millisecond, -5000, HitEvent.EventTime)
                         and dateadd(millisecond,  5000, HitEvent.EventTime)
    LEFT JOIN Player FiringPlayer
           ON FiringPlayer.PlayerID = FireEvent.PlayerID
          AND FiringPlayer.ExerciseID = FireEvent.ExcerciseID
    LEFT JOIN Player HitPlayer
           ON HitPlayer.PlayerID = HitEvent.PlayerID
          AND HitPlayer.ExerciseID = FireEvent.ExcerciseID
   where FireEvent.ExerciseID = 'D289D508-1479-4C17-988C-5F6A847AE51E'
  ) as temp
  where HitRank=1 or HitEventID is null
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:52:46.997

这里的问题是您使用`RANK()`而不是`ROW_NUMBER()`. 如果任何 hitevent 与匹配的 fireevents 相差相同的数量，那么它们的等级均为 1，这意味着您将得到重复。根据我们在聊天中的对话，将整个查询包装在一个子查询中，现在摆脱内部子查询并进行直接连接，然后只限制到`HitRank = 1`外部查询，你会很成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T01:38:18.667

我不确定这是否是您想要的，但您可以在查询开始时使用 CTE

```
 With cte as (
  SELECT FireEvent.ExerciseID, 
   FireEvent.FireEventID, 
   tempHitEvent.HitEventID, 
   FireEvent.AssociatedPlayerID, 
   tempHitEvent.AssociatedPlayerID, 
   FireEvent.EventTime, 
   tempHitEvent.EventTime, 
   FireEvent.Longitude, 
   FireEvent.Latitude, 
   tempHitEvent.Longitude, 
   tempHitEvent.Latitude, 
   tempHitEvent.HitResult, 
   FireEvent.AmmunitionCode, 
   FireEvent.AmmunitionSource, 
   FireEvent.FireEventID, 
   0 AS 'IsArtillery' 
 FROM   FireEvent )
 Select * from CTE 
   LEFT JOIN (SELECT HitEvent.*, 
                     FireEvent.FireEventID, 
                     Rank() 
                       OVER ( 
                         ORDER BY HitEvent.EventTime) AS RankValue 
              FROM   HitEvent 
                     INNER JOIN FireEvent 
                             ON FireEvent.EventTime BETWEEN 
                                Dateadd(millisecond, -5000, 
                                HitEvent.EventTime) AND 
                                           Dateadd(millisecond, 
                                           5000, HitEvent.EventTime) AND      HitEvent.FiringPlayerID = FireEvent.PlayerID 
               AND HitEvent.AmmunitionCode = 
                   FireEvent.AmmunitionCode
               AND HitEvent.ExerciseID = 
                   'D289D508-1479-4C17-988C-5F6A847AE51E' 
                    AND FireEvent.ExerciseID = 
                   'D289D508-1479-4C17-988C-5F6A847AE51E' 
               AND HitEvent.HitResult NOT IN ( 0, 1 ) ) AS 
             tempHitEvent 
          ON ( 
          RankValue = 1
        AND tempHitEvent.FireEventID = 
                 FireEvent.FireEventID 
                 )
  WHERE  FireEvent.ExerciseID = 'D289D508-1479-4C17-988C-5F6A847AE51E' 
  ORDER BY HitEventID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T05:06:35.807

以下大大简化的示例应该会产生最佳对。考虑到当前时间，它可能会产生沙鼠，我不会注意到。

```
declare @Fires as Table ( FireId Int Identity, FireTime Int )
insert into @Fires ( FireTime ) values
  ( 1 ), ( 2 ), ( 3 ), ( 5 ), ( 8 ), ( 13 ), ( 21 ), ( 34 )

declare @Hits as Table ( HitId Int Identity, HitTime Int )
insert into @Hits ( HitTime ) values
  ( 5 ), ( 7 ), ( 12 ), ( 12 ), ( 20 ), ( 21 ), ( 30 )

-- Create a temporary table of all possible pairs meeting the time criteria.
select F.*, Dense_Rank() over ( partition by H.HitTime, H.HitId order by F.FireTime, F.FireId ) as [FireRank],
  H.*, Dense_Rank() over ( order by H.HitTime, H.HitId ) as [HitRank]
  into #Pairs
  from @Fires as F inner join
    @Hits as H on F.FireTime between H.HitTime - 5 and H.HitTime + 5

-- Clean up the pairs.
declare @HitRank as Int = 1
declare @MaxHitRank as Int = ( select Max( HitRank ) from #Pairs )
declare @MinFireRank as Int
while ( @HitRank <= @MaxHitRank )
  begin
  select @MinFireRank = Min( FireRank ) from #Pairs where HitRank = @HitRank
  delete from #Pairs
    where
      -- It is not the first   FireRank   for the current   HitRank .
      ( HitRank = @HitRank and FireRank > @MinFireRank ) or
      -- Once we pair a fire event don't pair it against another hit event.
      ( HitRank > @HitRank and FireId in ( select FireId from #Pairs where HitRank = @HitRank and FireRank = @MinFireRank ) )
  set @HitRank = @HitRank + 1
  end

-- Select the paired events.
select FireId, FireTime, HitId, HitTime
  from #Pairs
union
-- Add in the unpaired fire events.
select FireId, FireTime, NULL, NULL
  from @Fires
  where FireId not in ( select FireId from #Pairs )
order by FireTime, FireId, HitTime, HitId

drop table #Pairs 
```

# django - 为带有 python 2.7 的 appengine 安装 django 1.3 需要 settings.py 等

> ID：10808842
> 
> 赞同：0
> 
> 时间：2012-05-30T01:20:51.287
> 
> 标签：django, macos, python-2.7

刚刚开始并且没有升级 python 或 django 的人如何使用 python27 使用 appengine 安装 django 1.3 或更高版本？我已经阅读了几个相当不错的博客和说明，但它们对我没有帮助，尤其是 settings.py（它是否仍然需要，其中包含什么以及它去哪里，例如）？

显然在 python 2.7 中使用 django 1.0 和更高版本有相当大的变化，但是我发现的帮助参考不涉及 python 2.7 和 django，或者如果他们这样做，他们谈论从 django 0.96 更新，但我不记得了曾经处理过settings.py，他们认为我理解。

我只想将 django 与 python 一起使用，而不是完全 django 应用程序，我理解这也是可能的。

我研究了几个教程，其中两个更好的甚至将读者发送到一个“工作”的 url，这不起作用。下面是几个更好的链接。

noob 无法发布此超链接：thomas.broxrost.com/2008/04/08/django-on-google-app-engine/

[http://www.john-smith.me/Tag/webapp2](http://www.john-smith.me/Tag/webapp2)

顺便说一句，我对扩展以下链接中的购物清单示例非常感兴趣，想知道它是否已更新为可与 python 2.7 和 django 1.3 一起使用。

[https://developers.google.com/appengine/articles/djangoforms](https://developers.google.com/appengine/articles/djangoforms)

非常感谢，

布赖恩在亚特兰大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:17:41.250

您需要使用[djangoappengine](http://www.allbuttonspressed.com/projects/djangoappengine)库和可能[的 django-nonrel](http://www.allbuttonspressed.com/projects/django-nonrel)，这是一个 Django 分支，可以使用非关系数据库。

# php - 我的网站的“阅读更多”功能存在问题

> ID：10808843
> 
> 赞同：0
> 
> 时间：2012-05-30T01:21:23.027
> 
> 标签：php

我需要你的帮助来为我的网站做一个阅读更多功能。将应用阅读更多功能的内容是动态生成的。当我实现它时，我单击阅读更多...我被带到同一页面并显示全文。

请问我该如何解决这个问题。

谢谢你。

```
<?php

$row['article_content'];

if (strlen($row['article_content']) > 500) {
  $shortText = substr($row['article_content'], 0, 100);
    $shortText .= '... <a href="site/article.php?id=' . $id . '">Read More</a>
 echo $shortText; 
```

} ?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:01:59.103

```
<?php

if(isset($_GET['readmore']))
echo $row['article_content'];
else
echo get_short_text($row['article_content']); 

function get_short_text($article)
 {
   $shortText="";
   if (strlen($article) > 500) {
       $shortText = substr($article, 0, 100);
       $shortText .= '... <a href="site/article.php?id=' . $id . '&readmore=1'>Read More</a>
   }
   else { $shortText = $article; }

   return $shortText;
 } 
```

# c# - 首先设置基本构造函数的属性？

> ID：10808844
> 
> 赞同：1
> 
> 时间：2012-05-30T01:21:26.157
> 
> 标签：c#, .net

可以说我有以下课程

```
class animal
{
   public string name;
   public animal(string name)
   {
      this.name = name;
   }
} 
```

并且

```
class dog : animal
{
   public string breed;
   public dog(string name, string breed): base(name)
   {
       this.breed = breed;
   }
} 
```

最后

```
class poodle : dog
{
   public poodle(string name, string breed, int hairLength): base(name, breed)
   {
        //in here, name is = null for some reason.
   }
} 
```

问题是当我有一个三级继承层次结构时，基本构造函数（`animal`）似乎在`poodle`构造函数之后被调用（name == null）。但是在`poodle`构造函数中，我可能想要访问在基本构造函数中设置的一些属性，等等。

有谁知道如何做到这一点，或者可能是解决此问题的更好的编码实践？（我能想到的唯一解决方案不是真正使用构造函数，而是有一个单独的 initialize() 方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:23:40.230

这是一个简单的可见性问题。由于您没有明确指定它，因此该`name`字段是私有的，因此子类无法访问它。你*可以*这样`protected`：

```
protected string name; 
```

这将是最简单的解决方案，但更好的方法是使用属性：

```
protected string Name { get; set; } 
```

只需使用它而不是字段。

（一般来说，最好的做法是不要让字段转义它们被声明的类型。因此，一旦您需要从声明类型之外访问该字段，您应该考虑使用属性。）

# java - AndEngine - X 秒后杀死 Sprite？

> ID：10808846
> 
> 赞同：3
> 
> 时间：2012-05-30T01:21:36.373
> 
> 标签：java, android, opengl-es-2.0, andengine

我正在使用 AndEngine 为 Android 制作游戏。现在我正试图弄清楚如何让爆炸精灵出现在场景中，然后在*X*秒后被移除。这是我的爆炸课：

```
public class Explosion extends Sprite {

    public Explosion(float pX, float pY, ITextureRegion pTextureRegion, VertexBufferObjectManager pVertexBufferObjectManager) {
        super(pX, pY, pTextureRegion, pVertexBufferObjectManager);
    }
} 
```

现在我想对这个类做些什么来使它不同于普通的 Sprite 对象是让它出现，然后在一定时间后被销毁。如何使用 AndEngine 完成此任务？

编辑：如果可以在不必创建扩展 Sprite 的自定义 Explosion 类的情况下完成此操作，那么我更愿意这样做，因为它会更整洁。

另请注意，屏幕上会同时在不同时间创建多个爆炸，因此我希望每个爆炸都有自己的生命周期。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T11:11:47.820

您可以根据需要使用多种技术。如果您的爆炸是动画的，我只需使用带有 IAnimationListener 的 AnimatedSprite 来捕获动画何时更改帧和/或完成，然后删除爆炸精灵。

或者，您可以使用 DelayModifier - 我使用其中一个来“溶解岩石”

或者，您可以使用几乎任何其他修改器 - 例如移动修改器，例如 QuadraticBezierCurveMoveModifier，或修改器，例如 AlphaModifier。

无论使用何种修饰符，您都附加一个 IEntityModifierListener() 并在 onModifierFinished 中清理您的爆炸。

以下代码使用该技术“淡化”游戏板上的分数

```
gemScore.registerEntityModifier(new AlphaModifier(2f, 1f, 0f, new IEntityModifierListener() {

        @Override
        public void onModifierStarted(IModifier<IEntity> pModifier, IEntity pItem) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onModifierFinished(IModifier<IEntity> pModifier, IEntity pItem) {
            // TODO Auto-generated method stub
            runOnUpdateThread(new Runnable() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    board.detachChild(gemScore);
                }
            });
        }
    })); 
```

高温高压

这是 DelayModifier 的示例 - 相同的基本结构

```
mainScene.registerEntityModifier(new DelayModifier(3, new IEntityModifierListener() {

        @Override
        public void onModifierStarted(IModifier<IEntity> pModifier, IEntity pItem) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onModifierFinished(IModifier<IEntity> pModifier, IEntity pItem) {
            // TODO Auto-generated method stub
            runOnUpdateThread(new Runnable() {
                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    mainScene.detachChild(sign);
                }
            });
        }
    })); 
```

# android - 类型不匹配无法从布尔值转换为字符串

> ID：10808847
> 
> 赞同：-1
> 
> 时间：2012-05-30T01:21:43.107
> 
> 标签：android, eclipse

我是新手，这是我第一次尝试做一个 android 应用程序。我正在尝试做石头、剪纸和剪刀。我有一些错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:25:57.033

您不能用布尔值填充字符串变量。

您可能想要添加另一个变量，称为：

```
boolean isComputerPlay = true; 
```

并使用此变量来存储状态。

# ios - 无论设备方向如何，如何将 GLKView（或 UIView）保持在纵向模式？

> ID：10808851
> 
> 赞同：2
> 
> 时间：2012-05-30T01:22:11.583
> 
> 标签：ios, opengl-es-2.0

我已经在 SO 上多次看到这个问题，但没有一个与我正在寻找的完全匹配。

我想要做的就是将单个 GLKView 保持在纵向模式（停止设备的自动旋转方法以旋转这个单个视图）。

问题是我希望其他一切都由自动旋转功能处理。

由于 GLKView 是 UIView 的后代，我可以只应用一个变换来始终将其放回其原始方向，执行设备正在执行的相反旋转。

但是，这不起作用，因为我无法将变换直接应用于图层，因为 OpenGL 会给我一个错误。“无法制作完整的帧缓冲区对象 8cd6”（也许我必须在旋转后重建我的帧缓冲区对象或其他什么？）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:27:40.057

我想最好的旋转处理是——暂停你的帧缓冲渲染，在旋转动画期间获取它的快照——旋转后取消暂停。

另一种方法是使用容器 ViewController ：将您的 GLKView 设置为不会旋转的 ViewController 子级的唯一视图 - 为`UIViewController`旋转提供 API

# python - html textarea通过python使用post函数

> ID：10808852
> 
> 赞同：-4
> 
> 时间：2012-05-30T01:22:23.520
> 
> 标签：python, post, textarea

```
 <div><textarea cols="25" rows="12" name="box" id="box" tabindex="2">TEXT GOES HERE </textarea>

     </div>

    <div>
    <p class="submit"><input type="submit" name="submit" id="submit" class="button-primary" value="Submi" tabindex="2"  /></p>      </div>
</form> 
```

如何使用 post 函数用 python 代码中的文本填充文本区域？我一直在尝试这种方式，但它不起作用！:S br = { 'box' : "新文本"}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:22:23.927

我假设表单显示在页面上的 python 代码块中，在这种情况下，您可以使用字符串格式化操作（python 2.6 或更高版本）在所需位置添加值：

```
print """
<div><textarea cols="25" rows="12" name="box" id="box" tabindex="2">{0!s} </textarea>""".format( text_variable ) 
```

一些网络主机仍然使用 python 2.5，在这种情况下，您需要使用较旧的语法样式：

```
print """ My text says: %s """ % text_variable 
```

如果您这样做是为了显示任意用户输入，请务必以某种方式预处理您的字符串，以避免在表单中间插入任意 HTML 代码。

为了设置 *text_variable*，您需要获取表单数据。查看python“cgi”模块和相关[教程](http://www.penzilla.net/tutorials/python/cgi/%22tutorial%22)。

# r - 为什么更改对比度类型会更改 R lm 摘要中的行标签？

> ID：10808853
> 
> 赞同：5
> 
> 时间：2012-05-30T01:22:26.050
> 
> 标签：r, lm, contrast

使用 R (contr.treatment) 中的默认对比，线性模型对象的摘要根据级别名称给出行名称。当我将对比更改为 contr.sum 时，线性模型对象的摘要会根据编造的数字给出行名称。

对于下面的示例代码，处理对比的行名称是 xa xb xc xd xe，对于总对比，它们是 x1 x2 x3 x4 x5。

除了手动重命名行之外，有没有办法让这些行为相同？

例子：

```
y <- rnorm(10, 0, 1)
x <- factor(rep(letters[1:5], each = 2))

options(contrasts = c("contr.treatment", "contr.poly"))
summary(lm(y ~ x))

options(contrasts = c("contr.sum", "contr.poly"))
summary(lm(y ~ x)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-16T13:07:22.683

我喜欢你的解决方案@Aaron，并且已经实现了它，但我认为它包含一个危险的错误。*总和对比为您提供前*n-1 个因子和总平均值之间的差异，而不是*最后*n-1 个因子之间的差异，这是您的命名算法返回的结果。参见 Crawley 的 R 书第 2 版第 442-443 页。

因此，我认为正确的功能应该是：

```
contr.sum.keepnames <- function(...) {
    conS <- contr.sum(...)
    colnames(conS) = rownames(conS)[-length(rownames(conS))]
    conS
} 
```

顺便说一句，我尝试将此添加为评论，但在评论中添加代码块时遇到了困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:27:07.813

我仍然不确定这是一个好主意，我认为对对比度的含义感到困惑的可能性太高了。不过，我要做的是创建一个新的 contrasts 函数，它计算总对比但将名称设置为等于处理对比中的默认名称。

```
set.seed(5)
n <- 5
y <- c(10 + rnorm(n, 0, 1), 20 + rnorm(n, 0, 1), 30 + rnorm(n, 0, 1))
wFactor <- as.factor(c(rep("A", n), rep("B", n), rep("C", n)))

contr.sumX <- function(...) {
  conT <- contr.treatment(...)
  conS <- contr.sum(...)
  colnames(conS) <- colnames(conT)
  conS
} 
```

作为参考，这是通常的输出：

```
> m1 <- lm(y ~ wFactor, contrasts = list(wFactor=contr.sum(n = levels(wFactor))))
> coef(summary(m1))
              Estimate Std. Error     t value     Pr(>|t|)
(Intercept) 19.8218432  0.2481727  79.8711599 9.889455e-18
wFactor1    -9.6079241  0.3509692 -27.3754029 3.480430e-12
wFactor2    -0.1934654  0.3509692  -0.5512319 5.915907e-01 
```

这是`contr.sumX`函数的输出。

```
> m2 <- lm(y ~ wFactor, contrasts = list(wFactor=contr.sumX(n = levels(wFactor))))
> coef(summary(m2))
              Estimate Std. Error     t value     Pr(>|t|)
(Intercept) 19.8218432  0.2481727  79.8711599 9.889455e-18
wFactorB    -9.6079241  0.3509692 -27.3754029 3.480430e-12
wFactorC    -0.1934654  0.3509692  -0.5512319 5.915907e-01 
```

或者，您可以提前为特定因素设置对比度：

```
contrasts(wFactor) <- "contr.sumX"
m3 <- lm(y ~ wFactor)
> coef(summary(m3))
              Estimate Std. Error     t value     Pr(>|t|)
(Intercept) 19.8218432  0.2481727  79.8711599 9.889455e-18
wFactorB    -9.6079241  0.3509692 -27.3754029 3.480430e-12
wFactorC    -0.1934654  0.3509692  -0.5512319 5.915907e-01 
```

# c# - 计算 Property Changed MVVM 上两个值的结果

> ID：10808858
> 
> 赞同：4
> 
> 时间：2012-05-30T01:23:03.677
> 
> 标签：c#, silverlight, mvvm, propertychanged

我正在尝试通过 MVVM 中的以下简单公式计算“NetAmount”

> GrossAmount + Carriage - 折扣 = NetAmount

我正在使用 MVVM Light Toolkit 并声明属性如下

```
public const string DiscountPropertyName = "Discount";
private double _discount;
public double Discount
{
    get
    {
        return _discount;
    }

    set
    {
        if (_discount == value)
        {
            return;
        }
        _discount = value;
        // Update bindings, no broadcast
        RaisePropertyChanged(DiscountPropertyName);
    }
}

public const string CarriagePropertyName = "Carriage";
private double _carriage;

public double Carriage
{
    get
    {
        return _carriage;
    }
    set
    {
        if (_carriage == value)
        {
            return;
        }
        _carriage = value;
        RaisePropertyChanged(CarriagePropertyName);
    }
}

public const string NetAmountPropertyName = "NetAmount";
private double _netAmount;

public double NetAmount
{
    get
    {
        _netAmount = Carriage + Discount;
        return _netAmount;
    }
    set
    {
        if (_netAmount == value)
        {
            return;
        }
        _netAmount = value;
        RaisePropertyChanged(NetAmountPropertyName);
    }
}

public const string GrossAmountPropertyName = "GrossAmount";
private double _grossAmount;

public double GrossAmount
{
    get
    {
        return _grossAmount;
    }

    set
    {
        if (_grossAmount == value)
        {
            return;
        }
        _grossAmount = value;
        RaisePropertyChanged(GrossAmountPropertyName);
    }
} 
```

我在 XAML 中将这些属性与如下文本框绑定：

```
<TextBox Text="{Binding GrossAmount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  DataContext="{Binding Mode=OneWay}"/>

<TextBox Text="{Binding Carriage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  DataContext="{Binding Mode=OneWay}"/>

<TextBox Text="{Binding Discount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  DataContext="{Binding Mode=OneWay}"/> 
```

我将一个文本块与`NetAmount`属性绑定，如下所示：

```
<TextBlock Text="{Binding NetAmount}" /> 
```

视图模型是`SalesOrderViewModel`.

我不知道将上述公式放在哪里，以便在更改任何文本框的值时，它会导致更改`NetAmount`属性。

我对 C# 并不陌生，但对 MVVM 和`PropertyChanged`事件很陌生，我知道我做错了一些非常小的愚蠢的事情，但我无法理解它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T01:44:18.307

由于`NetAmount`是计算，因此将其建模为视图模型中的只读属性是有意义的。访问该属性实际上执行了计算。`RaisePropertyChanged(NetAmountProperty)`最后一个技巧是在任何影响`NetAmount`变化的因素时调用

```
public const string GrossAmountPropertyName = "GrossAmount";
private double _grossAmount;
public double GrossAmount
{
    get { return _grossAmount; }
    set 
    {
           if (_grossAmount == value)
                return;

           RaisePropertyChanged(GrossAmountPropertyName);
           RaisePropertyChanged(NetAmountPropertyName);
    }
}

public double Discount{} ... //Implement same as above
public double Carriage {} ... //Implement same as above

public const string NetAmountPropertyName = "NetAmount";
public double NetAmount
{
    get { return GrossAmount + Carriage - Discount; }
} 
```

* * *

编辑：如果您不想添加对`RaisePropertyChanged`影响 NetAmount 的每个属性的调用，那么您可以进行修改`RaisePropertyChanged`，以便它也引发该属性的`PropertyChanged`事件。`NetAmount`它会引发一些不必要`PropertyChanged`的事件，但更易于维护

```
private void RaisePropertyChanged(string propertyName)
{
     var handler = PropertyChanged;
     if (handler != null)
     {
          handler(this, new PropertyChangedEventArgs(propertyName);
          handler(this, new PropertyChangedEventArgs(NetAmountProperty);
     }
} 
```

# android - 60 fps 时 Kindle Fire 故障和纹理损坏

> ID：10808860
> 
> 赞同：6
> 
> 时间：2012-05-30T01:23:20.400
> 
> 标签：android, gpu

这似乎是 Fire 特定的 GPU 问题，如果有任何帮助或建议，我将不胜感激。

在大多数情况下，我的塔防游戏能够以 60 fps 的速度运行，即使有几十个敌人和塔都向各个方向射击。然而，在看似随机的时间（即使没有发生任何事情——比如坐在主菜单上），间隔非常均匀的 400 毫秒连接会以大约 2-3 秒的间隔暂停游戏。然后突然间，障碍物将消失，16x16 像素的纹理块将随机不渲染。

这两个故障似乎是相互排斥的，就像我说的那样，可以通过启动游戏并从主菜单导航到关卡选择屏幕来触发，其中加载的资源最少，游戏逻辑也很少发生。我使用 OpenSL 来制作音效，我注意到禁用 sfx 会将挂接持续时间更改为 280 毫秒。

然后我手动将帧速率从 60 fps 强制到 30 fps（通过在帧滴答循环中插入睡眠），两个故障都完全消失了。

这是一个演示纹理未渲染的屏幕截图。此错误发生在所有 32 位渲染表面中，无论深度/模板值如何，以及颜色清除是打开还是关闭。

谢谢！

编辑：实际上，显然纹理闪烁发生在任何帧速率下，但是，在 40 到 45 fps 之间的某个地方，400 毫秒的障碍消失了。

![等级选择画面](../Images/91580ef67a50aa04f5535c0bf75c32de.png)

![主菜单](../Images/0c395b7c3018fc17df8b31a25eeb9878.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T23:56:59.433

好的，这是一个非常微妙的驱动程序错误，不一定特定于 Kindle Fire。我希望能帮助某人在未来避免类似的痛苦。我已经清楚地概述了症状，但错误的来源来自设置剪刀矩形。

本质上，我们有许多可以放大和缩小屏幕的动画 UI 元素，因此我们对剪式矩形变得非常时髦。触发器似乎将剪式矩形设置在屏幕外，然后水平渲染到矩形之外。这样做会使 GPU 处于某种微妙的错误状态，这种状态似乎不会立即显现，但会逐渐变得更糟。

此外，这似乎修复了我们在 Droid RAZR 上遇到的一个错误，它具有与 Fire 相同的 GPU。该错误是我们在 logcat 中看到的游戏中的 5 秒冻结：

```
W/SharedBufferStack(14208): waitForCondition(LockCondition) timed out (identity=173, status=0). CPU may be pegged. trying again. 
```

显然，这些类型的错误很难追踪和查明确切的条件，但它肯定与在屏幕外剪式矩形之外进行渲染有关。

# android - 如何通过 ADB 更改网络状态？

> ID：10808861
> 
> 赞同：0
> 
> 时间：2012-05-30T01:23:29.580
> 
> 标签：android, adb

我有一个模拟器，我想在我的应用程序中模拟数据连接的丢失。我正确设置了接收器，但我需要一种通过 adb 更改数据连接的方法。

是否有关闭数据连接的 ADB 命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T10:03:41.727

您可以通过 telnet 连接到模拟器

```
telnet localhost 5554 
```

连接后，您可以设置网络速度。

```
network speed 0 
```

或者

```
gsm data off 
```

也许你觉得这个链接有帮助。

[http://developer.android.com/guide/developing/devices/emulator.html#emulatornetworking](http://developer.android.com/guide/developing/devices/emulator.html#emulatornetworking)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:27:53.137

从 Eclipse 中的 DDMS Perspective 设置语音和数据的拒绝/未注册值。它适用于 Android 模拟器 1.5。

* * *

查看此线程：[android 模拟器中的 Internet 连接](https://stackoverflow.com/questions/5898949/internet-connection-in-android-emulator)

# java - Java3D 不会显示任何东西

> ID：10808865
> 
> 赞同：0
> 
> 时间：2012-05-30T01:24:01.303
> 
> 标签：java, java-3d

帮助！当我尝试启动我的 .class 文件时，我看到应用程序弹出，然后退出。我看不到我珍贵的作品！！！有人可以看看下面的代码并告诉我我做错了什么吗？

```
import com.sun.j3d.utils.universe.SimpleUniverse;

import com.sun.j3d.utils.geometry.ColorCube;

import javax.media.j3d.BranchGroup;

public class Hello3d {

public Hello3d()

{

    SimpleUniverse universe = new SimpleUniverse();

    BranchGroup group = new BranchGroup();

    group.addChild(new ColorCube(0.3));

    universe.getViewingPlatform().setNominalViewingTransform();

    universe.addBranchGraph(group);

}

public static void main(String[] args) {
    //Schedule a job for the event-dispatching thread:
    //creating and showing this application's GUI.
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new Hello3d();
        }
    });
}

} // end of class Hello3d 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:38:15.107

据我所知，您正确设置了场景，但您没有创建任何方式向用户展示它（窗口、画布等）。

从您的代码中，我假设您一直在关注[本教程](http://www.java3d.org/starting.html)，对吗？检查[Java 3D 和用户界面](http://www.java3d.org/userinterface.html)（同一个站点前面的几页）以了解如何做到这一点。

# javascript - 使用 eq 的单选按钮的 jQuery 设置失败

> ID：10808866
> 
> 赞同：1
> 
> 时间：2012-05-30T01:24:11.007
> 
> 标签：javascript, jquery

在下面的代码中，`plane.posFile`是一个长度为 3 的字符串数组，它标识了 3 个单选按钮，并且按钮显示正确。

如果`oSource.posfile`是空字符串，则正确检查第 0 个按钮。

如果`oSource.posfile`不是空白，则它是三个中的一个，`plane.posFile`除了文件扩展名必须被剥离以进行比较。

发生的情况是代码正确（使用 Firebug 逐步执行）选择使用哪个索引。

它进入 break 语句，然后用`i=1`.

但是，尝试设置文件`eq(i)`时`attr('checked',true)`。我不明白为什么。这与之前使用时的语句相同`eq(0)`。我已经盯着它看了几个小时，但没有运气。

非常感谢任何想法，包括对方法的评论。

```
$wb.pcPosCfg.empty();
for (i=0; i<plane.posFile.length; i++)
     $wb.pcPosCfg.append("<input type='radio' style='width:11px' name='rbnLoadCfg' value=" + i + ">" + plane.posFile[i] + "<br>");
    if (oSource.posfile=='') {
        $('input[name="rbnLoadCfg"]:eq(0)').attr('checked',true);
    }
    else {
        for (i=0; i<plane.posFile.length; i++) {
            if (oSource.posfile==plane.posFile[i].substring(0,plane.posFile[i].length-5))
                break;
            }
        $('input[name="rbnLoadCfg"]:eq(i)').attr('checked',true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:25:43.550

```
$('input[name="rbnLoadCfg"]:eq('+i+')').attr('checked',true); 
```

您需要连接您的字符串以正确包含您的变量。

# uisearchbar - UISearchBar：奇怪的扩展动画

> ID：10808872
> 
> 赞同：0
> 
> 时间：2012-05-30T01:24:58.113
> 
> 标签：uisearchbar, uisearchdisplaycontroller

我正在使用Interface Builder中的UISearchBar+SearchDisplayController提供的UISearchBar，搜索栏位于视图的右侧，激活时需要向左展开，但系统似乎向右展开（在我的情况下，它超出了屏幕），我尝试在它被激活时对其进行动画处理，但系统的动画仍然会发生并且有一些看起来很奇怪的动画。

有没有办法解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:48:37.110

这是我对发布的类似问题的回答：[here](https://stackoverflow.com/a/12394703/719656)和[here](https://stackoverflow.com/a/12500130/719656)

正确动画的关键是指定动画`UIViewAnimationOptionLayoutSubviews`的选项。

这是我对这些类似问题的完整回答：

通常您不想将搜索栏放在工具栏内，但是，您似乎想做一些类似于我所做的事情。

所以这就是我的做法，它可能被称为 hack，但它就像一个魅力:)

首先，您必须像这样在界面生成器中进行设置：

![在此处输入图像描述](../Images/978431f802351e6134f396876a8760a0.png)

请注意，搜索不是工具栏的子项，而是在上面。

搜索栏应该有“清晰的颜色”背景和灵活的左、右和宽度自动调整蒙版。

您在工具栏下方放置了一个黑色背景的 1 像素标签，即。[x=0, y=44, width=320 or frame width, height=1]，还有灵活的左右和宽度自动调整大小的蒙版。这是在搜索显示控制器显示表格后隐藏你得到的一个可见像素看法。在没有它的情况下尝试它以理解我的意思。

您设置任何工具栏项目并确保为它们提供出口，因为您将需要这些。

现在是代码...

当您开始搜索时：

```
- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller
{
    // animate the search bar to the left ie. x=0
    [UIView animateWithDuration:0.25f animations:^{
        CGRect frame = controller.searchBar.frame;
        frame.origin.x = 0;
        controller.searchBar.frame = frame;
    }];
    // remove all toolbar items
    [self.toolbar setItems:nil animated:YES];
} 
```

当你结束搜索

```
- (void)searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller
{
    // animate search bar back to its previous position and size
    // in my case it was x=55, y=1
    // and reduce its width by the amount moved, again 55px
    [UIView animateWithDuration:0.25f 
                          delay:0.0f
                        // the UIViewAnimationOptionLayoutSubviews is IMPORTANT,
                        // otherwise you get no animation
                        // but some kind of snap-back movement 
                        options:UIViewAnimationOptionLayoutSubviews 
                     animations:^{
                         CGRect frame = self.toolbar.frame;
                         frame.origin.y = 1;
                         frame.origin.x = 55;
                         frame.size.width -= 55;
                         controller.searchBar.frame = frame;
                     } 
                     completion:^(BOOL finished){
                         // when finished, insert any tool bar items you had
                         [self.toolbar setItems:[NSArray arrayWithObject:self.currentLocationButton] animated:YES];
                     }];
} 
```

有了这个，我得到了一个漂亮的动画：)

![在此处输入图像描述](../Images/d16c0dd7f28fab85381491ee655fc309.png)

![在此处输入图像描述](../Images/a730c82f3fd8e46c80c9deaee435d724.png)

# monkeyrunner - 如何使用 MonkeyDevice.broadcastintent() 和 MonkeyDevice.instrumentate()

> ID：10808875
> 
> 赞同：1
> 
> 时间：2012-05-30T01:25:21.133
> 
> 标签：monkeyrunner

如何使用`MonkeyDevice.broadcastintent()`and `MonkeyDevice.instrumentate()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:26:05.610

你的意思是`MonkeyDevice.instrument()`？如果是，那么[这里](https://stackoverflow.com/questions/5690173/how-to-use-monkeydevice-instrument)的问题可能会有用。

因为`MonkeyDevice.bordcastintent()`我会在[这里](http://developer.android.com/guide/developing/tools/MonkeyDevice.html#broadcastIntent)查看 android 文档。就我个人而言，我发现使用 shell 比 bordcastintent 效果更好。例如，如果我想使用 shell 来广播添加联系人的意图，我会使用`device.shell("am start -a android.intent.action.INSERT -t vnd.android.cursor.dir/contact -e name 'Donald Duck' -e phone 555-1234")`.

# php - 带有 Get 方法的表单取消 jQuery

> ID：10808876
> 
> 赞同：0
> 
> 时间：2012-05-30T01:25:24.330
> 
> 标签：php, jquery, forms, date

我正在使用 Jquery，它运行良好，直到我使用 Get 方法提交表单。

我正在尝试获取两个日期之间的信息。这是我的代码：

**日期.php：**

```
......

$date1 = $_GET['date1'];
$date2 = $_GET['date2'];
echo"<Form method='get' action=''>
<label>From: </label> <input class='date' id = 'date1' type='date' name='date1' size='9' value = '$date1'></input>
<label>To: </label> <input class='date' id = 'date2' type='date' name='date2' size='9' value = '$date2'></input> <br/> ";

echo "<input type='submit' class = 'center' value='submit' name='submit'>";
echo'</Form>';

if($date1 != '' && $date2 != '' ){
report($date1,$date2);
}
......

<script type='text/javascript' src='js/jquery.js'></script>
<script type='text/javascript' src='js/jquery-ui.js'></script>
<script type='text/javascript' src='js/ui.js'></script> //my jquery functions

...... 
```

**ui.js：**

```
$('.date').datepicker({dateFormat: 'yy-mm-dd'});

function toggleReport(table){   
$('#'+table).toggle('slow').colSpan = 3;
} 
```

我的表单中的 GET 方法有什么问题吗？我应该改用ajax吗？如果我应该，我如何在 ajax 中使用 Get？直到现在我只使用 ajax 和 post 方法

谢谢！！！

***编辑：*** 似乎这整件事不是我的问题，我的 php 中的某些东西是问题所在。

我真的很困惑，我更新了上面的 date.php 文件

这是报告功能：

```
function report($date1,$date2){

 $id = $_SESSION['id'];
 $techs = mysql_query("SELECT * FROM TECHS WHERE COMP_ID = '$id'")
 or die(); 
 $comps = mysql_query("SELECT * FROM COMPS WHERE COMP_ID = '$id'")
 or die(); 

  echo '<h1>Technicians</h1>';
  //tech Table
  echo "<table id='center'><tr><th id='hello'>Tech</th><th id='hello'>jobs</th><th    id='hello'></th></tr>";

 while($info = mysql_fetch_array( $techs ))  
{
$name = $info['Name'];
$jobs = mysql_query("SELECT * FROM JOBS WHERE COMP_ID = '$id' AND Technician = '$name' AND Date >= '$date1' AND Date <= '$date2' ORDER BY Date ASC") or die(); 
    $data = mysql_fetch_array( $jobs );

$number = mysql_num_rows($jobs);
if($number>'0'){
$name_st = remove_spaces($name);
$name_st.= '_t';
echo "<tr><td>$name</td><td>$number</td><td><img onclick='toggleReport(\"$name_st\");' src='images/report.png' border='0' alt='View report' title='View report'>
    </td></tr>";

    echo"
    <tr><td colspan='3' style='width:99%;' id='$name_st'  >
    <table >
        <th id='hello'>invoice</th><th id='hello'>Job ID</th><th id='hello'>Company</th><th id='hello'>Date</th><th id='hello'>Address</th><th id='hello'>Tech %</th><th id='hello'>Total</th><th id='hello'>Parts</th><th id='hello'>Company Parts</th><th id='hello'>Cash</th><th id='hello'>CC</th><th id='hello'>Check</th><th id='hello'>Fees</th><th id='hello'>Addt. Fees</th><th id='hello'>Company Balance</th><th id='hello'>Tech Balance</th><th id='hello'>Profit</th>

        ";
         $job = mysql_query("SELECT * FROM JOBS WHERE COMP_ID = '$id' AND Technician = '$name' ORDER BY Date ASC") or die(); 

        while($j = mysql_fetch_array( $job )){
            echo "<tr><td>".$j['invoice'].'</td>'.'<td>'.$j['jobID'].'</td>'.'<td>'.$j['Company'].'</td>'.'<td>'.$j['Date'].'</td>'.'<td>'.$j['Address'].'</td>'.'<td>'.$j['Tech_per'].'%</td>'.'<td>'.$j['Total'].'</td>'.'<td>'.$j['parts'].'</td>'.'<td>'.$j['comp_parts'].'</td>'.'<td>'.$j['cash'].'</td>'.'<td>'.$j['cc'].'</td>'.'<td>'.$j['check'].'</td>'.'<td>'.$j['fees'].'</td>'.'<td>'.$j['addt. fees <br> need to fix'].'</td>'.'<td>'.$j['comp_total'].'</td>'.'<td>'.$j['tech_total'].'</td>'.'<td>'.$j['profit'].'</td></tr>';
        }

        echo"
    </table></td></tr>";

}
  }
 echo '</table>';
 echo '<h1>Companies</h1>';
  echo "<table id='center'><tr><th id='hello'>Companies</th><th id='hello'>jobs</th><th   id='hello'></th></tr>";

   while($info = mysql_fetch_array( $comps ))  
 {
 $name = $info['name'];
 $jobs = mysql_query("SELECT * FROM JOBS WHERE COMP_ID = '$id' AND Company = '$name' Date >= '$date1' AND Date <= '$date2'  ORDER BY Date ASC") or die(); 
    $data = mysql_fetch_array( $jobs );

$number = mysql_num_rows($jobs);
if($number>'0'){
$name_st = remove_spaces($name);
$name_st.= '_d';
echo "<tr><td>$name</td><td>$number</td><td><img onclick='toggleReport(\"$name_st\");' src='images/report.png' border='0' alt='View report' title='View report'>
</td></tr>";

    echo"
    <tr><td id='$name_st' class = 'hidden' colspan='3'>
    <table >
        <th id='hello'>invoice</th><th id='hello'>Job ID</th><th id='hello'>Company</th><th id='hello'>Date</th><th id='hello'>Address</th><th id='hello'>Comp %</th><th id='hello'>Total</th><th id='hello'>Parts</th><th id='hello'>Company Parts</th><th id='hello'>Cash</th><th id='hello'>CC</th><th id='hello'>Check</th><th id='hello'>Fees</th><th id='hello'>Addt. Fees</th><th id='hello'>Company Balance</th><th id='hello'>Tech Balance</th><th id='hello'>Profit</th>

        ";
         $job = mysql_query("SELECT * FROM JOBS WHERE COMP_ID = '$id' AND Company = '$name' ORDER BY Date ASC") or die(); 

        while($j = mysql_fetch_array( $job )){
            echo "<tr><td>".$j['invoice'].'</td>'.'<td>'.$j['jobID'].'</td>'.'<td>'.$j['Company'].'</td>'.'<td>'.$j['Date'].'</td>'.'<td>'.$j['Address'].'</td>'.'<td>'.$j['Comp_per'].'%</td>'.'<td>'.$j['Total'].'</td>'.'<td>'.$j['parts'].'</td>'.'<td>'.$j['comp_parts'].'</td>'.'<td>'.$j['cash'].'</td>'.'<td>'.$j['cc'].'</td>'.'<td>'.$j['check'].'</td>'.'<td>'.$j['fees'].'</td>'.'<td>'.$j['addt. fees <br> need to fix'].'</td>'.'<td>'.$j['comp_total'].'</td>'.'<td>'.$j['tech_total'].'</td>'.'<td>'.$j['profit'].'</td></tr>';
        }

        echo"
    </table></td></tr>";

   }
 }
 echo '</table>';

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:14:57.863

~~您的表单有一个空白`action`属性：~~

 ~~```
<Form method='get' action=''> 
```~~ 

您需要将要提交的 URL 放在那里，例如，提交回相同的 'date.php' 页面：

```
<form method='get' action='date.php'> 
```

~~（我假设您没有尝试从 JS 设置它，因为您在评论中说“所有”您的 JS 是初始化您的日期选择器控件的单个语句。如果不是这种情况，请更新您的问题以显示所有与表单相关的JS代码。）~~

**编辑：**对不起，我想我误解了这个问题。我以为你的意思是表格工作不正常。如果你说你的 JS 不能正常工作，那可能是因为它在页面加载之前运行。在您的 ui.js 文件中，尝试将您的 JS 包装在一个文档就绪处理程序中：

```
$(document).ready(function() {
    $('.date').datepicker({dateFormat: 'yy-mm-dd'});
}); 
```

话虽如此，如果您将页面提交回自身，那么 Ajax 将是一个合理的选择。

> “我如何在 ajax 中使用 Get？”

看看[`$.get()`](http://api.jquery.com/jQuery.get/)和[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)doco - 显然“GET”实际上是`type`参数的默认值。

# php - 未定义变量错误

> ID：10808877
> 
> 赞同：0
> 
> 时间：2012-05-30T01:25:31.873
> 
> 标签：php, mysql

我正在尝试将 amazon api 集成到我的网站中，到目前为止，我已经设法让它导航到正确的 xml 部分并将其存储为变量，但是我现在正尝试将此变量插入到我的 mysql 数据库中，它给了我这个错误

注意：未定义变量：致命错误中的 sql_select：在非对象上调用成员函数 query()

我究竟做错了什么？

整个代码

```
define('INCLUDED', 1);
error_reporting(E_ALL); 
ini_set("display_errors", 1); 
$AWS_ACCESS_KEY_ID = "HIDDENFORPRIVACY";
$AWS_SECRET_ACCESS_KEY = "HIDDENFORPRIVACY";

$base_url = "http://free.apisigning.com/onca/xml?";
$url_params = array('Operation'=>"ItemLookup",'Service'=>"AWSECommerceService",
 'AWSAccessKeyId'=>$AWS_ACCESS_KEY_ID,'AssociateTag'=>"HIDDENFORPRIVACY",
 'Version'=>"2011-08-01",'Availability'=>"Available",'ItemId'=>"0273702440",
 'ItemPage'=>"1",'ResponseGroup'=>"EditorialReview", 'Title'=>"Accounting and Finance for Non-Specialists 5th Edition");

// Add the Timestamp
$url_params['Timestamp'] = gmdate("Y-m-d\TH:i:s.\\0\\0\\0\\Z", time());

// Sort the URL parameters
$url_parts = array();
foreach(array_keys($url_params) as $key)
    $url_parts[] = $key."=".$url_params[$key];
sort($url_parts);

// Construct the string to sign
//$string_to_sign = "GET\nhttp://free.apisigning.com/".implode("&",$url_parts);
//$string_to_sign = str_replace('+','%20',$string_to_sign);
//$string_to_sign = str_replace(':','%3A',$string_to_sign);
//$string_to_sign = str_replace(';',urlencode(';'),$string_to_sign);

// Sign the request
//$signature = hash_hmac("sha256",$string_to_sign,$AWS_SECRET_ACCESS_KEY,TRUE);

// Base64 encode the signature and make it URL safe
//$signature = base64_encode($signature);
//$signature = str_replace('+','%2B',$signature);
//$signature = str_replace('=','%3D',$signature);
//$signature = str_replace(';',urlencode(';'),$string_to_sign);
$url_string = implode("&",$url_parts);
$url = $base_url.$url_string;
//print $url;

$ch = curl_init();                   //this part we set up curl 
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 15);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$xml_response = curl_exec($ch);
curl_close($ch);
header('Content-type: application/xml');  //specify as xml to not display as one long string
echo $xml_response; 

$xml = new SimpleXMLElement($xml_response);  //time to echo back the correct piece of data

$editorialReview = $xml->Items->Item->EditorialReviews->EditorialReview->Content;

$variable = '<p>Editorial review: '.html_entity_decode($editorialReview).'</p>'."\n";
echo $variable;

$sql_select = mysql_query("INSERT INTO " . DB_PREFIX . "auctions
            (amazon_description) VALUES
            ('" . $variable . "')");
            echo ($sql_select); 
```

这不会发送错误，但 mysql 数据库显示没有变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:41:47.303

错误“未定义的变量”表明您尚未初始化对象。

从您打印的代码看来， $sql_select**应该**是一个包含 select 语句的字符串。

因此，您需要执行以下操作：

```
$variable = '<p>Editorial review: '.html_entity_decode($editorialReview).'</p>'."\n";
echo $variable;

$sql_select .= "INSERT INTO " . DB_PREFIX . "auctions
            (amazon_description) VALUES
            ('" . $variable . "')";

$DB_object->query($sql_select); 
```

请发布整个代码，以便准确找到解决方案。

# magento - 如何以编程方式检索商店的终身销售额

> ID：10808887
> 
> 赞同：-1
> 
> 时间：2012-05-30T01:26:45.737
> 
> 标签：magento

Magento 存储这些数据的表中是否有任何特定列？例如，如果我想从其他地方获取数据。通过运行原始 php mysql 查询。不使用 Magento 层。

我知道有一个函数 getTotal()。但希望你明白我想说什么。除了创建自己的自定义 API 之外，还有其他方法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:12:29.373

你可能正在寻找这张`sales_flat_order`桌子。具体来说，如果您想要商店获得的所有销售额的总和：

```
SELECT SUM(grand_total) FROM sales_flat_order WHERE is_active = 1; 
```

# ruby-on-rails - 给定字符串中的日期名称，如何获取表示当前一周内该天的 Time 对象？

> ID：10808889
> 
> 赞同：2
> 
> 时间：2012-05-30T01:26:56.203
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, time

给定一个带有日期名称的字符串，即`"Wednesday"`，我怎样才能得到一个表示当前周（星期一 - 星期日）内那一天的 Time 对象？

因此，例如，如果当前日期是 5 月 29 日星期二，并且字符串是`"Monday"`，则时间对象应该表示`Monday 28 May`。如果字符串是`"Friday"`，它应该是`Friday 1 June`。

而如果当前日期是 6 月 5 日星期二，并且字符串是`"Monday"`，则时间对象应该表示`Monday 4 June`。如果字符串是`"Friday"`，它应该是`Friday 8 June`。

我正在使用 Rails 3.2.0 和 Ruby 1.9.2。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T01:42:28.037

这些类型的文本日期引用有一个非常方便的 gem `Chronic`：http:
[//chronic.rubyforge.org/](http://chronic.rubyforge.org/)

出于您的目的，您可以使用`"this week"`参考：

```
Chronic.parse("monday this week")
Chronic.parse("friday this week")
..etc.. 
```

..这应该像预期的那样工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T02:14:51.750

计算起来很简单，但是您必须首先解析日期名称，这意味着您需要它们的列表：

```
WEEKDAY_NAMES = %w<Sunday Monday Tuesday Wednesday Thursday Friday Saturday> 
```

如果你想避免对它们进行硬编码（如果你还在使用 Ruby 1.8，甚至尊重语言环境设置），你可以这样做：

```
WEEKDAY_NAMES = (3..9).map { |i| Time.at( i * 86400 ).utc.strftime '%A' } 
```

然后你可以使用这样的逻辑来获取数字：

```
wday = WEEKDAY_NAMES.each_with_index.find{|name,number|name == 'Wednesday'}[1] 
```

或者，更好的是，建立一个名称->数字对的散列：

```
wday_from_name =  Hash[*WEEKDAY_NAMES.each_with_index.to_a.flatten]
wday = wday_from_name['Wednesday'] 
```

以数字形式获得目标工作日后：

```
now = Time.now
wday_this_week = now + (wday - now.wday) * 86400 
```

与 Chronic 不同，此方法考虑从周日到周六的周数（因为这就是`Time#wday`数字的工作方式，0 表示周日）。但是，您可以轻松地将其调整为使用不同的日期作为一周的第一天。

```
WEEK_START = wday_from_name['Monday']
wday_this_week = now + 
    ((wday - WEEK_START)%7 - (now.wday - WEEK_START)%7) * 86400 
```

由于您在 Rails 中，您可以使用 ActiveSupport 核心扩展使其更漂亮，例如：

```
WEEKDAY_NAMES = (3..9).map { |i| Time.at( i.days ).utc.strftime '%A' }

wday_this_week = now + 
    ((wday - WEEK_START)%7 - (now.wday - WEEK_START)%7).days 
```

# flash - Adobe Flash 线性 rgb 问题

> ID：10808891
> 
> 赞同：0
> 
> 时间：2012-05-30T01:27:23.300
> 
> 标签：flash, hex, flash-cs4, rgb

我正在设计一款游戏，而这款游戏非常需要为我的地图使用颜色。我想使用渐变以十六进制进行数字计数（如#000001、#000002 等，因为将其全部绘制出来将是一项艰巨的工作），划分山丘等，因为这就是我设计系统工作的方式。所以，在测试这个系统时，我意识到默认渐变是在每种颜色中按步数计算，而不仅仅是像我想要的那样从底部开始计算（我的目标是从 #000000 到 #000CCC，所以它在绿色和蓝色上都加了 1值而不仅仅是蓝色）。我发现了“线性 RGB”复选框选项，并希望它能做到这一点，但不知何故没有。它有时适用于像#00CCCC 这样的值，但是当我尝试#0000000 到#000CCC 时，它会无缘无故地停在#0000CB，尽管它确实只使用蓝色值。我' 我使用 Flash CS4，不确定是我的问题还是其他问题。此外，Flash 文档没有给我关于线性 RGB 复选框的作用的信息，所以如果有人可以帮助解释它，那也很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:58:45.020

根据您的要求，这是 0x000000 和 0x000ccc 之间的计算步骤示例

10步

![梯度步骤](../Images/2f0ba5b8b81a5d531baa6f6712964f26.png)

32 步：

![渐变步骤 32](../Images/c23ab378fdb1e0716295a150f450fcc1.png)

```
var startColor:uint = 0x000000;
var endColor:uint = 0x000ccc;
var steps:uint = 10;

var graphics:Graphics = graphics;

for (var i:uint = 0; i < steps; i++)
{
    var r:uint = ((endColor >>> 16 & 0xFF) - (startColor >>> 16 & 0xFF)) * (i / steps);
    var g:uint = ((endColor >>> 8 & 0xFF) - (startColor >>> 8 & 0xFF)) * (i / steps);
    var b:uint = ((endColor & 0xFF) - (startColor & 0xFF)) * (i / steps);

    var stepColor:uint = r << 16 | g << 8 | b;

    graphics.beginFill(stepColor);
    graphics.drawRect(i * 24, 24, 24, 24);
    graphics.endFill();
} 
```

您的问题可能是操纵 RGB 值；但是，这里有关于插值方法的文档：

**来自 Adob​​e Docs flash.display.InterpolationMethod** [http://livedocs.adobe.com/livecycle/es/sdkHelp/common/langref/flash/display/InterpolationMethod.html](http://livedocs.adobe.com/livecycle/es/sdkHelp/common/langref/flash/display/InterpolationMethod.html)

线性RGB：

> 指定应使用线性 RGB 插值方法。这意味着 Flash Player 使用基于线性 RGB 颜色模型的 RGB 颜色空间。

RGB

> 指定应使用 RGB 插值方法。这意味着 Flash Player 在渲染渐变时使用指数 sRGB（标准 RGB）空间。sRGB 空间是 W3C 认可的标准，它定义了红色、绿色和蓝色分量值与可见分量颜色的实际强度之间的非线性转换。
> 
> 例如，考虑两种颜色之间的简单线性渐变（将 spreadMethod 参数设置为 SpreadMethod.REFLECT）。不同的插值方法对外观的影响如下：
> 
> 插值方法.LINEAR_RGB 插值方法.RGB

# android - Android：HttpURLConnection 字符串数据的 ProgressBar

> ID：10808893
> 
> 赞同：3
> 
> 时间：2012-05-30T01:27:30.663
> 
> 标签：android, progress-bar, httpurlconnection, stringbuilder, simpledateformat

我正在从 Web 服务获取 JSON 数据，并希望在数据下载时显示进度条。我见过的所有示例都使用这样的 StringBuilder：

```
//Set up the initial connection
HttpURLConnection connection = (HttpURLConnection)url.openConnection();
connection.setRequestMethod("GET");
connection.setDoOutput(true);
connection.setReadTimeout(10000);

connection.connect();

InputStream stream = connection.getInputStream();

//read the result from the server
reader  = new BufferedReader(new InputStreamReader(stream));
StringBuilder builder = new StringBuilder();
String line = "";
while ((line = reader.readLine()) != null) {
    builder.append(line + '\n');
}

result = builder.toString(); 
```

我通过将数据下载为字节数组，然后将字节数组转换为字符串来让 ProgressBar 工作，但我想知道是否有“更正确”的方法来做到这一点。由于我没有发现其他方法可以做到这一点，下面的类也可以作为一个工作示例，看起来有点 hack，但它确实工作得很好。

```
package com.royaldigit.newsreader.services;

import android.os.AsyncTask;
import android.util.Log;

import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.royaldigit.newsreader.controller.commands.CommandInterface;
import com.royaldigit.newsreader.model.data.SearchResultDO;
import com.royaldigit.newsreader.model.data.SearchTermDO;

/**
 * Gets news results from Feedzilla based on the search term currently stored in model.searchTermDO
 * 
 * Sends progress update and returns results to the CommandInterface command reference:
 * * command.onProgressUpdate(progress);
 * * command.serviceComplete(results);
 *
 *
 */
public class FeedzillaSearchService {
    private static final String TAG = "FeedzillaSearchService";
    private static final String SERVICE_URI = "http://api.feedzilla.com/v1/categories/26/articles/search.json?q=";
    private static final int STREAM_DIVISIONS = 10;

    private CommandInterface command;
    private SearchTermDO currentSearchTermDO;
    private Integer maximumResults;
    private DownloadTask task;
    private ArrayList<SearchResultDO> results;
    public Boolean isCanceled = false;

    public void getData(CommandInterface cmd, SearchTermDO termDO, Integer maxResults){
        command = cmd;
        currentSearchTermDO = termDO;
        //Feedzilla only allows count to be 100 or less, anything over throws an error
        maximumResults = (maxResults > 100)? 100 : maxResults;
        results = new ArrayList<SearchResultDO>();
        task = new DownloadTask();
        task.execute();
    }

    public void cancel() {
        isCanceled = true;
        if(task != null) task.cancel(true);
    }

    /**
     * Handle GET request
     *
     */
    private class DownloadTask extends AsyncTask<Void, Integer, String> {
        @Override
        protected String doInBackground(Void...voids) {
            String result = "";
            if(currentSearchTermDO == null || currentSearchTermDO.term.equals("")) return result;

            BufferedReader reader = null;

            publishProgress(0);

            try {
                String path = SERVICE_URI + URLEncoder.encode(currentSearchTermDO.term, "UTF-8") + "&count=" + maximumResults;
                Log.d(TAG, "path = "+path);
                URL url = new URL(path);

                //Set up the initial connection
                HttpURLConnection connection = (HttpURLConnection)url.openConnection();
                connection.setRequestMethod("GET");
                connection.setDoOutput(true);
                connection.setReadTimeout(10000);

                connection.connect();

                int length = connection.getContentLength();
                InputStream stream = connection.getInputStream();
                byte[] data = new byte[length];
                int bufferSize = (int) Math.ceil(length / STREAM_DIVISIONS);
                int progress = 0;
                for(int i = 1; i < STREAM_DIVISIONS; i++){
                    int read = stream.read(data, progress, bufferSize);
                    progress += read;
                    publishProgress(i);
                }
                stream.read(data, progress, length - progress);
                publishProgress(STREAM_DIVISIONS);

                result = new String(data);

            } catch (Exception e) {
                Log.e(TAG, "Exception "+e.toString());
            } finally {
                if(reader != null){
                    try {
                        reader.close();
                    } catch(IOException ioe) {
                        ioe.printStackTrace();
                    }
                }
            }
            return result;
        }

        protected void onProgressUpdate(Integer... progress) {
            int currentProgress = progress[0] * 100/STREAM_DIVISIONS;
            if(!this.isCancelled()) command.onProgressUpdate(currentProgress);
        }

        @Override
        protected void onPostExecute(String result){
            if(!this.isCancelled()) downloadTaskComplete(result);
        }
    }

    /**
     * 
     * @param data
     */
    private void downloadTaskComplete(Object data){
        if(!isCanceled){
            try {
                Log.d(TAG, data.toString());
                JSONObject obj = new JSONObject(data.toString());

                JSONArray array = obj.getJSONArray("articles");

                for(int i = 0; i < array.length(); i++){
                    SearchResultDO dataObj = new SearchResultDO();
                    dataObj.title       = array.getJSONObject(i).getString("title");
                    dataObj.url         = array.getJSONObject(i).getString("url");
                    dataObj.snippet     = array.getJSONObject(i).getString("summary");
                    dataObj.source      = array.getJSONObject(i).getString("source");
                    dataObj.date        = array.getJSONObject(i).getString("publish_date");
                    dataObj.termId      = currentSearchTermDO.id;

                    //Reformat date
                    SimpleDateFormat format1 = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss Z");
                    try {
                        Date date = format1.parse(dataObj.date);
                        SimpleDateFormat format2 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
                        dataObj.date = format2.format(date);
                    } catch(ParseException pe) {
                        Log.e(TAG, pe.getMessage());
                    }

                    results.add(dataObj);
                }
                command.serviceComplete(results);
            } catch(JSONException e){
                Log.e(TAG, e.toString());
                command.serviceComplete(results);
            }   
        }
    }
} 
```

更新：这是使用 Nikolay 建议的课程的完成版本。毕竟我最终使用了 StringBuilder。以前的版本会中断，因为有时 connection.getContentLength() 返回 -1。在这种情况下，此版本会优雅地降级。对这个实现进行了相当多的测试，它似乎是防弹的。

```
package com.royaldigit.newsreader.services;

import android.os.AsyncTask;
import android.util.Log;

import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.royaldigit.newsreader.controller.commands.CommandInterface;
import com.royaldigit.newsreader.model.data.SearchResultDO;
import com.royaldigit.newsreader.model.data.SearchTermDO;

/**
 * Gets news results from Feedzilla based on the search term currently stored in model.searchTermDO
 * 
 * Sends progress update and returns results to the CommandInterface command reference:
 * * command.onProgressUpdate(progress);
 * * command.serviceComplete(results);
 *
 */
public class FeedzillaSearchService implements SearchServiceInterface {
    private static final String TAG = "FeedzillaSearchService";
    private static final String SERVICE_URI = "http://api.feedzilla.com/v1/categories/26/articles/search.json?q=";

    private CommandInterface command;
    private SearchTermDO currentSearchTermDO;
    private Integer maximumResults;
    private DownloadTask task;
    private ArrayList<SearchResultDO> results;
    private Boolean isCanceled = false;

    public void getData(CommandInterface cmd, SearchTermDO termDO, Integer maxResults){
        command = cmd;
        currentSearchTermDO = termDO;
        //Feedzilla only allows count to be 100 or less, anything over throws an error
        maximumResults = (maxResults > 100)? 100 : maxResults;
        results = new ArrayList<SearchResultDO>();
        task = new DownloadTask();
        task.execute();
    }

    public void cancel() {
        isCanceled = true;
        if(task != null) task.cancel(true);
    }

    /**
     * Handle GET request
     *
     */
    private class DownloadTask extends AsyncTask<Void, Integer, String> {
        @Override
        protected String doInBackground(Void...voids) {
            String result = "";
            if(currentSearchTermDO == null || currentSearchTermDO.term.equals("")) return result;

            BufferedReader reader = null;

            publishProgress(0);

            try {
                String path = SERVICE_URI + URLEncoder.encode(currentSearchTermDO.term, "UTF-8") + "&count=" + maximumResults;
                Log.d(TAG, "path = "+path);
                URL url = new URL(path);

                //Set up the initial connection
                HttpURLConnection connection = (HttpURLConnection)url.openConnection();
                connection.setRequestMethod("GET");
                connection.setDoOutput(true);
                connection.setReadTimeout(20000);
                connection.connect();

                //connection.getContentType() should return something like "application/json; charset=utf-8"
                String[] values = connection.getContentType().toString().split(";");
                String charset = "";
                for (String value : values) {
                    value = value.trim();
                    if (value.toLowerCase().startsWith("charset=")) {
                        charset = value.substring("charset=".length());
                        break;
                    }
                }
                //Set default value if charset not set
                if(charset.equals("")) charset = "utf-8";

                int contentLength = connection.getContentLength();
                InputStream stream = connection.getInputStream();
                reader  = new BufferedReader(new InputStreamReader(stream));
                StringBuilder builder = new StringBuilder();
                /**
                 * connection.getContentLength() can return -1 on some connections.
                 * If we have the content length calculate progress, else just set progress to 100 and build the string all at once.
                 * 
                 */
                if(contentLength>-1){
                    //Odd byte array sizes don't always work, tried 512, 1024, 2048; 1024 is the magic number because it seems to work best.
                    byte[] data = new byte[1024];
                    int totalRead = 0;
                    int bytesRead = 0;
                    while ((bytesRead = stream.read(data)) > 0) {
                        try {
                            builder.append(new String(data, 0, bytesRead, charset));
                        } catch (UnsupportedEncodingException e) {
                            Log.e(TAG, "Invalid charset: " + e.getMessage());
                            //Append without charset (uses system's default charset)
                            builder.append(new String(data, 0, bytesRead));
                        }
                        totalRead += bytesRead;
                        int progress = (int) (totalRead * (100/(double) contentLength));
                        //Log.d(TAG, "length = " + contentLength + " bytesRead = " + bytesRead + " totalRead = " + totalRead + " progress = " + progress);
                        publishProgress(progress);
                    }
                } else {
                    String line = "";
                    while ((line = reader.readLine()) != null) {
                        builder.append(line + '\n');
                        publishProgress(100);
                    }
                }
                result = builder.toString();

            } catch (Exception e) {
                Log.e(TAG, "Exception "+e.toString());
            } finally {
                if(reader != null){
                    try {
                        reader.close();
                    } catch(IOException ioe) {
                        ioe.printStackTrace();
                    }
                }
            }
            return result;
        }

        protected void onProgressUpdate(Integer... progress) {
            if(!this.isCancelled()) command.onProgressUpdate(progress[0]);
        }

        @Override
        protected void onPostExecute(String result){
            if(!this.isCancelled()) downloadTaskComplete(result);
        }
    }

    /**
     * 
     * @param data
     */
    private void downloadTaskComplete(Object data){
        if(!isCanceled){
            try {
                Log.d(TAG, data.toString());
                JSONObject obj = new JSONObject(data.toString());

                JSONArray array = obj.getJSONArray("articles");

                for(int i = 0; i < array.length(); i++){
                    SearchResultDO dataObj = new SearchResultDO();
                    dataObj.title       = array.getJSONObject(i).getString("title");
                    dataObj.url         = array.getJSONObject(i).getString("url");
                    dataObj.snippet     = array.getJSONObject(i).getString("summary");
                    dataObj.source      = array.getJSONObject(i).getString("source");
                    dataObj.date        = array.getJSONObject(i).getString("publish_date");
                    dataObj.termId      = currentSearchTermDO.id;

                    //Reformat date
                    SimpleDateFormat format1 = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss Z");
                    try {
                        Date date = format1.parse(dataObj.date);
                        SimpleDateFormat format2 = new SimpleDateFormat(SearchResultDO.DATE_FORMAT_STRING);
                        dataObj.date = format2.format(date);
                    } catch(ParseException pe) {
                        Log.e(TAG, pe.getMessage());
                    }

                    results.add(dataObj);
                }
            } catch(JSONException e){
                Log.e(TAG, e.toString());
            }
            command.serviceComplete(results);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T02:15:55.093

好吧，既然内容长度是以字节为单位报告的，那真的没有别的办法了。如果您想使用 a`StringReader`您可以获取您读取的每一行的长度并计算读取的总*字节*数以实现相同的目标。此外，常规习惯用法是检查返回值`read()`以检查您是否已到达流的末尾。如果由于某种原因，内容长度错误，您的代码可能会读取更多/更少的可用数据。最后，将字节 blob 转换为字符串时，应明确指定编码。处理 HTTP 时，您可以从 'Content-Type' 标头的 'charset' 参数中获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T20:15:13.423

我有类似的问题。我尝试了 Jeremy C 的解决方案，但它不准确，因为标题中的“Content-Length”值可能与真实数据有很大不同。

我的解决方案是：

1.  从服务器发送 HTTP 标头 (PHP)：

    ```
    $string = json_encode($data, JSON_PRETTY_PRINT | JSON_FORCE_OBJECT);
    header("X-Size: ".strlen($string)); //for example with name: "X-Size"
    print($string); 
    ```

2.  在从流中读取之前，从 HTTP 标头中读取 contentLength 变量的正确值“X-size”：

    ```
    protected String doInBackground(URL... urls) {
        if (General.DEBUG) Log.i(TAG, "WebAsyncTask(doInBackground)");

        String result = "";
        BufferedReader reader = null;

        try {
            HttpURLConnection conn = (HttpURLConnection) urls[0].openConnection();
            conn.setConnectTimeout(General.TIMEOUT_CONNECTION);
            conn.setReadTimeout(General.TIMEOUT_SOCKET);
            conn.setRequestMethod("GET");
            conn.connect();

            if (General.DEBUG) Log.i(TAG, "X-Size: "+conn.getHeaderField("X-Size"));    
            if (General.DEBUG) Log.i(TAG, "getHeaderField: "+conn.getHeaderFields());   

            if(conn.getResponseCode() != General.HTTP_STATUS_200)
                return General.ERR_HTTP;

            int contentLength = -1;
            try {
                contentLength = Integer.parseInt(conn.getHeaderField("X-Size"));
            } catch (Exception e){
                e.printStackTrace();
            }

            InputStream stream = conn.getInputStream();
            reader  = new BufferedReader(new InputStreamReader(stream));
            StringBuilder builder = new StringBuilder();

            //Pokud delku zname:
            if(contentLength > -1){
                byte[] data = new byte[16]; //TODO
                int totalRead = 0;
                int bytesRead = 0;

                while ((bytesRead = stream.read(data)) > 0){

                    Thread.sleep(100);  //DEBUG TODO

                    try {
                        builder.append(new String(data, 0, bytesRead, "UTF-8"));
                    } catch (UnsupportedEncodingException e) {
                        Log.i(TAG, "Invalid charset: " + e.getMessage());
                        //Append without charset (uses system's default charset)
                        builder.append(new String(data, 0, bytesRead));
                    }

                    totalRead += bytesRead;
                    int progress = (int) (totalRead * (100/(double) contentLength));
                    Log.i(TAG, "length = " + contentLength + " bytesRead = " + bytesRead + " totalRead = " + totalRead + " progress = " + progress);
                    publishProgress(progress);
                }
            } else { 
                String line = "";
                while ((line = reader.readLine()) != null) {
                    builder.append(line + '\n');
                    publishProgress(100);
                }
            }

            result = builder.toString();
        } catch (SocketException | SocketTimeoutException e){
            if (General.DEBUG) Log.i(TAG, "SocketException or SocketTimeoutException");
            e.printStackTrace();
            return General.HTTP_TIMEOUT;
        } catch (Exception e){
            e.printStackTrace();
            return General.ERR_HTTP;
        } finally {
            if (reader != null) {
                try {
                  reader.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }

        return result;
    } 
    ```

# iphone - 拆分字符串并保存

> ID：10808896
> 
> 赞同：0
> 
> 时间：2012-05-30T01:28:06.220
> 
> 标签：iphone, objective-c

我有以下格式的字符串；

```
NSString *string1 = @"123 ki net 235 lk"; 
```

我需要格式化上述字符串并将其保存在 2 个字符串中；

```
NSString *Start, *end; 
```

这些字符串应该有输出

```
String = 123 ki

end = 235 lk 
```

基本上，我想做的是拆分字符串，以便最终输出为`123 ki`and `235 lk`。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:58:32.303

您可以使用`componentsSeparatedByString`

例子：

```
NSArray* split  = [string1 componentsSeparatedByString: @" net "];

Start = [split objectAtIndex:0];
end = [split objectAtIndex:[split count]-1]; 
```

# maven - 从远程仓库安装 JAR (clojar)

> ID：10808898
> 
> 赞同：7
> 
> 时间：2012-05-30T01:28:21.707
> 
> 标签：maven, jar, clojure

我想下载并安装[这个](https://clojars.org/clj-http/versions/0.4.1)Clojure 库，但我一生都无法弄清楚。我研究了 Maven，但找不到它来找到 repo。如何轻松地将 Clojure 库安装到我的机器上？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T04:58:22.223

您可以将包含此 jar 的存储库添加到您的 pom 或设置文件中，并将相关的 jar 指定为依赖项。

```
<repository>
  <id>clojars.org</id>
  <url>http://clojars.org/repo</url>
</repository>
...
<dependency>
   <groupId>clj-http</groupId>
   <artifactId>clj-http</artifactId>
   <version>0.4.1</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T01:37:53.250

下载[https://clojars.org/repo/clj-http/clj-http/0.4.1/clj-http-0.4.1.jar](https://clojars.org/repo/clj-http/clj-http/0.4.1/clj-http-0.4.1.jar)

```
mvn install:install-file -DgroupId=clj-http -DartifactId=clj-http -Dversion=0.4.1 -Dpackaging=jar -Dfile=clj-http-0.4.1.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:21:43.680

如果您使用的是 Leiningen，您可以在Tim O'Brien[最近的 Sonatype 博客文章](http://www.sonatype.com/people/2012/04/are-you-using-a-leiningen-repository-manager/)中阅读有关如何连接到存储库服务器的所有信息。

如果您使用的是 Maven，您应该获得一个像 Nexus 这样的 repo 服务器，并将 clojure repo 设置为另一个代理存储库并将其添加到您的公共组中。

如果这些方法都不适合您，您可以使用 Raghurams 方法或 number23_cn。然而，它们都是半最优的，不会针对团队或许多工件进行扩展。

# wpf - WPF：另一个线程拥有的故事板循环对象

> ID：10808901
> 
> 赞同：1
> 
> 时间：2012-05-30T01:28:36.753
> 
> 标签：wpf, loops, storyboard, multithreading

嗨，我所有的简单代码都是这样的

```
 private void flipForeverever(object sender, EventArgs args)
    {

            moveYs = new DoubleAnimation();
            m2oveYs = new DoubleAnimation();

            try
            {
                sf.Remove(this);
                sf.Children.Clear();

            }
            catch (Exception e)
            {

            }

            if (firstPanelAngle == 360)
            {
                moveYs.To = 180;
                moveYs.From = 0;
            }
            else
            {
                moveYs.To = 360;
                moveYs.From = 180;
            }

            if (secondPanelAngle == 360)
            {
                m2oveYs.To = 180;
                m2oveYs.From = 0;
            }
            else
            {
                m2oveYs.To = 360;
                m2oveYs.From = 180;
            }

            sf = (Storyboard)FindResource("Storyboard1");
            Storyboard.SetTargetName(moveYs, "rotatePanel");
            Storyboard.SetTargetProperty(moveYs, new                                          thisPropertyPath(AxisAngleRotation3D.AngleProperty));

            Storyboard.SetTargetName(m2oveYs, "rotateSecond");
            Storyboard.SetTargetProperty(m2oveYs, new PropertyPath(AxisAngleRotation3D.AngleProperty));

            sf.Children.Add(moveYs);
            sf.Children.Add(m2oveYs);
           // sf.RepeatBehavior = RepeatBehavior.Forever;

            if (flipForever)
            {
            sf.Completed += new EventHandler(delaythespin);

                 sf.Begin(this);

        }
    }

    private void delaythespin(object sender, EventArgs args)
    {
        sf.Stop(this);

        System.Timers.Timer timer = new System.Timers.Timer(500);
        timer.Elapsed += new System.Timers.ElapsedEventHandler(flipForeverever);

        timer.Enabled = true;
         firstPanelAngle = rotatePanel.Angle;
        secondPanelAngle = rotateSecond.Angle;
        timer.Start();

    } 
```

所以基本上我通过点击调用调用flipForeverever，它应该永远循环，直到我将flipforever设置为false......但是它给了我这个错误......

调用线程无法访问此对象，因为不同的线程拥有它。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T01:52:29.567

听起来您可能遇到[线程关联性](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx#S1)问题。您是否尝试过使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)而不是[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)？

```
private DispatcherTimer _timer;

private void GoButton_Click(object sender, RoutedEventArgs e)
{
    _timer = new DispatcherTimer();                // create timer
    _timer.Interval = new TimeSpan(0, 0, 1);       // tick every 1s
    _timer.Tick += new EventHandler(_timer_Tick);  // method to call
    _timer.Start();                                // start timer
}

void _timer_Tick(object sender, EventArgs e)
{
    // we should be on the correct thread now
    GoButton.Background = Brushes.Aqua;
} 
```

或者，如果您需要使用 System.Timers.Timer，请在计时器触发后使用[Invoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)或[BeginInvoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.begininvoke.aspx)进入正确的线程？

```
private System.Timers.Timer _timer;

private void GoButton_Click(object sender, RoutedEventArgs e)
{
    _timer = new System.Timers.Timer(1000);
    _timer.Elapsed += new System.Timers.ElapsedEventHandler(_timer_Elapsed);
    _timer.Start();
}

void _timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    // use Dispatcher.Invoke on the UI object that you want to modify
    // to get on the correct thread for that UI object
    GoButton.Dispatcher.Invoke((ThreadStart)(() =>
    {
        GoButton.Background = Brushes.Aqua;
    }));
} 
```

# javascript - 选择面板选项卡时滚动到锚标记

> ID：10808902
> 
> 赞同：1
> 
> 时间：2012-05-30T01:28:39.340
> 
> 标签：javascript, jquery, scrollto, panels, tabbed

选择选项卡式面板上的选项卡时，是否可以滚动到页面上的锚点？我希望选项卡式面板滚动到浏览器窗口的顶部。

我的开发页面在[这里。](http://www.worldchallenge-internationalschools.com/dev/asia/asia.html)

锚点和标签的代码是：

```
<h1 class="heading">
    <a name="heading" id="heading"></a>Asia &amp; South East Asia International Schools
</h1>
<div id="TabbedPanels1" class="TabbedPanels">
    <ul class="TabbedPanelsTabGroup">
        <li class="TabbedPanelsTab" tabindex="0">Overview</li>
        <li class="TabbedPanelsTab" tabindex="0">Activity Weeks</li>
        <li class="TabbedPanelsTab" tabindex="0">Expeditions</li>
        <li class="TabbedPanelsTab" tabindex="0">Testimonials</li>
    </ul>

</div> 
```

任何帮助将不胜感激。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:27:30.757

您可能会发现[scrollIntoView](https://developer.mozilla.org/en/DOM/element.scrollIntoView)很有用。

使用有几个问题`scrollIntoView`：

*   它将所选元素一直滚动到屏幕顶部。如果所选元素上方有一点空间，而不是将其一直推到窗口顶部，看起来会更好。您可以通过结合 scrollBy 来解决这个`scrollIntoView`问题[，](https://developer.mozilla.org/en/Window.scrollBy)它可以滚动一个相对量。
*   On your particular site some of the tabbed sections are pretty short, so, for instance, when selecting the *Overview* section - a short one - there's no room to scroll the tab-panel to the top of the screen, depending on the window size. 但是，较长的部分**会将**选项卡面板滚动到顶部。这种行为上的差异看起来不太好。

您可以使用以下内容在当前选项卡面板上实现 scrollTo ：

```
<ul class="TabbedPanelsTabGroup">
    <li id="tabHeaderOverview" class="TabbedPanelsTab" tabindex="0" onclick="document.getElementById('tabHeaderOverview').scrollIntoView()">Overview</li>
    <li id="tabHeaderActivity" class="TabbedPanelsTab" tabindex="0" onclick="document.getElementById('tabHeaderActivity').scrollIntoView()">Activity Weeks</li>
    <li id="tabHeaderExpeditions" class="TabbedPanelsTab" tabindex="0" onclick="document.getElementById('tabHeaderExpeditions').scrollIntoView()">Expeditions</li>
    <li id="tabHeaderTestimonials" class="TabbedPanelsTab TabbedPanelsTabSelected" tabindex="0" onclick="document.getElementById('tabHeaderTestimonials').scrollIntoView()">Testimonials</li>
</ul> 
```

您的问题被标记为 jquery，但您似乎没有使用它。jquery 提供了一组更强大的滚动例程，请参阅[这个 jquery 演示页面](http://demos.flesler.com/jquery/scrollTo/)。

**编辑：**看起来 Spry 对上述方法有问题：向列表元素添加 onclick 事件会破坏 Spry 选项卡面板。我对 Spry 的经验很少，但这个[Spry.Utils](http://labs.adobe.com/technologies/spry/samples/dom_utils/add_event_listener.html)方法看起来可能是 Spry 解决方案的一部分 -

您需要在页面中包含*SpryUtils*，然后您需要添加类似以下内容的 javascript - 抱歉，但我无法在我的机器上尝试此操作，因此**未经测试**：

```
function scrollTabHeader(event)
{
    this.scrollIntoView();
    // this incorporates the scrollBy mentioned above:    
    window.scrollBy(0, -10);
}

Spry.Utils.addEventListener("tabHeaderOverview", "click", scrollTabHeader, false);
Spry.Utils.addEventListener("tabHeaderActivity", "click", scrollTabHeader, false);
Spry.Utils.addEventListener("tabHeaderExpeditions", "click", scrollTabHeader, false);
Spry.Utils.addEventListener("tabHeaderTestimonials", "click", scrollTabHeader, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:39:45.680

例如，您可以在链接中添加 href="#change"

```
<a href="#change" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Why World Challenge','','images/intl_nav_over_05.jpg',1)" href="#change"><img width="134" height="40" border="0" src="http://www.worldchallenge-internationalschools.com/dev/images/intl_nav_05.jpg" alt="Why World Challenge" id="Why World Challenge"></a> 
```

和标签的 id

```
<li class="TabbedPanelsTab" tabindex="0" id="change">Why World Challenge</li> 
```

单击按钮时，窗口将滚动到选项卡

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T02:20:03.440

```
$('html, body').animate({
    scrollTop: $("#elementId").offset().top
}, 1000); 
```

这将平滑滚动到您的元素，您可以在一个功能中更改处理组的速度。

```
$(".TabbedPanelsTabGroup li").each(function(){
   $(this).click(function(){
     $('html, body').animate({
      scrollTop: $(this).offset().top
     }, 1000);
   });
 }); 
```

# python - 如何在 Python 中打印行

> ID：10808903
> 
> 赞同：1
> 
> 时间：2012-05-30T01:28:42.617
> 
> 标签：python, ruby

我在 Python 中遇到过这样的行：

```
print "Let's talk about %s." % my_name 
```

但是，我在 Ruby 中看到了这两个具有等效输出的情况：

`print "Let's talk about #{my_name}."`

`print "Let's talk about %s." % my_name"`

是否只有一种方法可以在 Python 中打印同一行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T01:30:37.347

在 Python 中也有几种方法：

```
print "let's talk about this %s" % my_name
print "let's talk about this {:s}".format(my_name)
print "let's talk about this", my_name 
```

都产生相同的输出。但是，鼓励使用[.format](http://docs.python.org/library/string.html#string-formatting)方法（自 Python v 2.6 起可用）而不是旧式`%`（引用[3.0 中的新增功能](http://docs.python.org/py3k/whatsnew/3.0.html)：“ *...仍然支持 % 运算符；它将在 Python 3.1 中弃用并在稍后从该语言中删除。* ")

最后，从 Python v3.x 开始，它`print`是一个函数，因此所有打印语句都需要`()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T02:08:23.230

在 ruby​​ 中，之间的部分`{}`是一个表达式。Python 无法以这种方式评估格式字符串中的*表达式。*

```
print "Let's talk about #{my_name}." 
```

在表达式只是一个变量的简单情况下，您可以使用

```
print "Let's talk about %(my_name)s"%{'my_name':my_name} 
```

或此处其他答案中给出的任何其他替代方案。

首选方法是使用 format()。例如。

```
print "Let's talk about {my_name}".format(my_name=my_name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T01:41:38.780

您还可以连接字符串。这不那么 Pythonic 并且使您对输出的最终外观的控制更少，但是一些非程序员似乎发现这更容易阅读（例如，如果您正在讨论特定的计算）：

```
print "Let's talk about " + str( my_name ) 
```

str() 函数可能需要也可能不需要，但它允许您添加其他数据类型（如整数）而不会出现 TypeError。

有关 string.format() 与 % 的更多信息，请参阅这篇较早的帖子： [Python 字符串格式化：% 与 .format](https://stackoverflow.com/questions/5082452/python-string-formatting-vs-format)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T01:46:13.087

除了这里的其他答案之外，还有映射键，我在使用 Python 的生活中花了很长时间才发现它们。

```
>>> '%(foo)s' % {'foo': 'bar'}
'bar' 
```

看看整个 shebang 的[字符串格式化操作](http://docs.python.org/library/stdtypes.html#string-formatting)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T02:30:35.103

我的最爱之一是使用字典来获取值：

```
>>> values = {"name": "john"}
>>> print "Let's talk about {name}".format(**values)
Let's talk about john 
```

# javascript - 检查某些东西是否有效

> ID：10808906
> 
> 赞同：1
> 
> 时间：2012-05-30T01:29:05.437
> 
> 标签：javascript, testing, cross-browser

我正在尝试测试特定浏览器上可用的内容（JavaScript 方面）。

例如，如果我只是输入这个：

```
function checksetAttribute(){
    if(document.getElementById("blar").setAttribute("name","blarDiv")){
        alert("Your browser supports it.");
    }
    else{
        alert("Your browser does not support it.");
    }
} 
```

这会返回关于该属性是否有效的真实答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:33:09.333

如果您想测试某个属性是否有效，而不是是否`setAttribute`有效，那么这是错误的方法，`setAttribute`总是返回`undefined`(== false)。相反，测试元素是否具有属性名称作为键 - 并使用新元素而不是从 DOM 中提取的元素，因为 DOM 中的元素可能已被修改。

```
function attributeWorks(attr, within) {
    return document.createElement(within || 'div').hasOwnProperty(attr);
} 
```

我添加了该`within`参数，因为某些属性仅存在于某些类型的元素上：例如，如果您始终针对 a 进行测试`<div>`，则该函数将返回`false`for `href`。

如果你想测试`setAttribute`函数是否有效，这仍然是错误的方法，因为如果`setAttribute`没有实现，尝试执行它会抛出错误而不是返回 false。我们可以使用与上面相同的方法，简化我们已经知道参数：

```
function setAttributeWorks() {
    return document.createElement('div').hasOwnProperty('setAttribute');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:33:22.520

我猜如果不支持“setAttribute”，您那里的代码将会失败。

```
var a = document.createElement("div");
if(a.setAttribute){
    alert("VERY SUPPORTED");
}else{
    alert("Not supported");
} 
```

这将检查 setAttribute 方法是否可用于 dom 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T01:36:07.387

不。假设浏览器支持`document.getElementById`and `setAttribute`，它只会设置 name 属性。当该方法[返回时`void`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-745549614)（这是错误的），它将始终发出警报`"Your browser does not support it."`- 除非抛出异常。

它也不会检查浏览器是否支持`name`属性。

# json - 如何在 Delphi XE2 中解析嵌套的 JSON 对象？

> ID：10808912
> 
> 赞同：15
> 
> 时间：2012-05-30T01:29:50.537
> 
> 标签：json, delphi, nested, delphi-xe2

我是 JSON 新手，我手头有这个项目，需要我解析 JSON 并在 ListView 中显示它的一些内容。问题是我现在阅读的文档处理的是包含 JSON 数组的 JSON 对象，而我的案例涉及处理嵌套对象。简而言之，总结如下：我正在使用 Delphi XE2 和 DBXJSON。我将一些值发布到服务器，它会回复一个如下所示的 JSON 对象：

```
 {
    "products": {
        "Men's Sneakers": {
            "instock": false,
            "size": "423",
            "manufacturer": "Adidas",
            "lastcheck": "20120529"
        },
        "Purse": {
            "instock": true,
            "size": "not applicable",
            "manufacturer": "Prada",
            "lastcheck": "20120528"
        },
        "Men's Hood": {
            "instock": false,
            "size": "M",
            "manufacturer": "Generic",
            "lastcheck": "20120529"
       }
    },
   "total": 41,
   "available": 30
} 
```

我想要实现的是让每个项目（即钱包）解析并添加为列表视图中的标题，以及一个子项目（制造商）。我创建了一个将 JSON 字符串作为参数的过程，创建了 JSON 对象，但我不知道如何进一步解析嵌套对象。

```
procedure TForm1.ParseString(const AString: string);
var
  json          : TJSONObject;
  jPair         : TJSONPair;
  jValue        : TJSONValue;
  jcValue       : TJSONValue;
  l,i           : Integer;
begin
    json    := TJSONObject.ParseJSONValue(TEncoding.ASCII.GetBytes(AString),0) as TJSONObject;
  try
    //get the pair to evaluate in this case the index is 1
    jPair   := json.Get(1); 
        {further process the nested objects and adding them to the listview}
  finally
     json.Free;
  end;
end; 
```

任何建议将不胜感激。花了很长时间试图在 Delphi 中了解 JSON 的来龙去脉，但无济于事。

谢谢，斯芬克斯

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-30T03:36:35.467

试试这个样本

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  DBXJSON,
  System.SysUtils;

Const
StrJson=
'{'+
'    "products": {'+
'        "Men''s Sneakers": {'+
'            "instock": false,'+
'            "size": "423",'+
'            "manufacturer": "Adidas",'+
'            "lastcheck": "20120529"'+
'        },'+
'        "Purse": {'+
'            "instock": true,'+
'            "size": "not applicable",'+
'            "manufacturer": "Prada",'+
'            "lastcheck": "20120528"'+
'        },'+
'        "Men''s Hood": {'+
'            "instock": false,'+
'            "size": "M",'+
'            "manufacturer": "Generic",'+
'            "lastcheck": "20120529"'+
'        }'+
'    },'+
'    "total": 41,'+
'    "available": 30'+
'}';

procedure ParseJson;
var
  LJsonObj  : TJSONObject;
  LJPair    : TJSONPair;
  LProducts : TJSONValue;
  LProduct  : TJSONValue;
  LItem     : TJSONValue;
  LIndex    : Integer;
  LSize     : Integer;
begin
    LJsonObj    := TJSONObject.ParseJSONValue(TEncoding.ASCII.GetBytes(StrJson),0) as TJSONObject;
  try
     LProducts:=LJsonObj.Get('products').JsonValue;
     LSize:=TJSONArray(LProducts).Size;
     for LIndex:=0 to LSize-1 do
     begin
      LProduct := TJSONArray(LProducts).Get(LIndex);
      LJPair   := TJSONPair(LProduct);
      Writeln(Format('Product Name %s',[LJPair.JsonString.Value]));
        for LItem in TJSONArray(LJPair.JsonValue) do
        begin
           if TJSONPair(LItem).JsonValue is TJSONFalse then
            Writeln(Format('  %s : %s',[TJSONPair(LItem).JsonString.Value, 'false']))
           else
           if TJSONPair(LItem).JsonValue is TJSONTrue then
            Writeln(Format('  %s : %s',[TJSONPair(LItem).JsonString.Value, 'true']))
           else
            Writeln(Format('  %s : %s',[TJSONPair(LItem).JsonString.Value, TJSONPair(LItem).JsonValue.Value]));
        end;
     end;
  finally
     LJsonObj.Free;
  end;
end;

begin
  try
    ParseJson;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

这将返回

```
Product Name Men's Sneakers
  instock : false
  size : 423
  manufacturer : Adidas
  lastcheck : 20120529
Product Name Purse
  instock : true
  size : not applicable
  manufacturer : Prada
  lastcheck : 20120528
Product Name Men's Hood
  instock : false
  size : M
  manufacturer : Generic
  lastcheck : 20120529 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T02:28:55.113

[该站点](http://docwiki.embarcadero.com/Libraries/en/Data.DBXJSON.TJSONValue)更详细地描述了该类型`TJSONValue`。如果您的数据是一个对象，它将具有 type [`TJSONObject`](http://docwiki.embarcadero.com/Libraries/en/Data.DBXJSON.TJSONObject)，因此请检查其 API 以了解如何继续。

我相信您首先需要它来迭代它的对（`GetEnumerator`如果您不知道键名，请使用，否则只需使用重载`Get`- 传递字符串而不是数字）。对于每一对，键将是一个简单的字符串（类型`TJSONString`），值可以是任何`TJSONValue`。重复直到你到达叶子。

例子：

```
products   := jPair.Get('products');
purse      := products.GetJsonValue().Get('Purse');
purseManuf := purse.GetJsonValue().Get('manufacturer');
... 
```

或者，如果您不知道产品是什么：

```
products   := jPair.Get('products');
for prodPair in products.GetEnumerator() do
begin
    prodName := prodPair.GetJsonString();
    prodObj  := prodPair.GetJsonValue();
    ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-18T16:57:59.407

[这篇博文](http://blogs.embarcadero.com/stephenball/2014/06/05/how-to-convert-an-object-to-json-and-back-with-a-single-line-of-code/)展示了一种非常现代且简单的 JSON 转换方法：

```
uses REST.JSON; // Also new System.JSON
procedure TForm1.Button1Click(Sender: TObject);

var
  Foo: TFoo;

begin
  Foo := TFoo.Create;

  try
    Foo.Foo := 'Hello World';
    Foo.Fee := 42;
    Memo1.Lines.Text := TJson.ObjectToJsonString(Foo);
  finally
    Foo.Free;
  end;

  Foo := TJson.JsonToObject<TFoo>(Memo1.Lines.Text);

  try
    Foo.Fee := 100;
    Memo1.Lines.Add(TJson.ObjectToJsonString(Foo));
  finally
    Foo.Free;
  end;
end; 
```

# maven - Maven：如何从文件中读取系统属性并将这些属性传递到 Cargo 容器中？

> ID：10808913
> 
> 赞同：2
> 
> 时间：2012-05-30T01:30:08.047
> 
> 标签：maven

我想要一种从 env.properties 文件中读取所有系统属性的可靠方法，并将这些属性的名称和值传递到 Cargo 容器中，而不是像下面这样对值进行硬编码。

```
<groupId>org.codehaus.cargo</groupId>
        <artifactId>cargo-maven2-plugin</artifactId>
        <configuration>
            <container>
                <containerId>${cargo.container}</containerId>
                <type>installed</type>
                <home>${cargo.container.home}</home>
                <systemProperties>
                    <somedb.name>sdm-db</somedb.name>
                    <somedb.user>Administrator</somedb.user>
                    <somedb.password>password</somedb.password>
                </systemProperties>
            </container>

<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>properties-maven-plugin</artifactId>
    <version>1.0-alpha-2</version>
    <executions>
    <execution>
    <id>read-env.properties</id>
    <phase>initialize</phase>
    <goals>
        <goal>read-project-properties</goal>
    </goals>
    <configuration>
        <files>
        <file>env.properties</file>
        </files>
    </configuration>
    </execution>
    </executions>
    </plugin> 
```

我想知道 properties-maven-plugin 是否可行？从文件中读取属性后，如何将它们传递到 Cargo 容器中？

我收到一条错误消息：无法从 URL [file://${env.properties}] 加载属性：${env.properties}

任何意见是极大的赞赏。

# ruby - rhc-create-domain 出错 (Openshitft)

> ID：10808917
> 
> 赞同：0
> 
> 时间：2012-05-30T01:30:26.137
> 
> 标签：ruby, jboss, openshift, openshift-client-tools

嗨，当我在 Ubuntu 11.10 中运行命令 rhc-create-domain 时出现错误。我按照以下步骤操作：

[命令行上的 rhc-create-domain 出错 (Openshitft)](https://stackoverflow.com/questions/10260053/error-with-rhc-create-domain-on-command-line-openshitft)

但我接受了这个错误：

```
mastervodoo@vodoo:/boot/grub$ rhc domain create -n projveh -l xxxxx@gmail.com 
Invalid gemspec in [/var/lib/gems/1.8/specifications/mime-types-1.18.gemspec]: invalid date format in specification: "2012-03-21 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mime-types-1.18.gemspec]: invalid date format in specification: "2012-03-21 00:00:00.000000000Z"
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `gem_original_require': no such file to load -- mime/types (LoadError)
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `require'
from /var/lib/gems/1.8/gems/rest-client-1.6.7/lib/restclient/request.rb:2
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `gem_original_require'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `require'
from /var/lib/gems/1.8/gems/rest-client-1.6.7/lib/restclient.rb:13
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `gem_original_require'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `require'
from /var/lib/gems/1.8/gems/rest-client-1.6.7/lib/rest-client.rb:2
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `gem_original_require'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `require'
from /var/lib/gems/1.8/gems/rhc-0.92.11/lib/rhc-rest.rb:2
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `gem_original_require'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `require'
from /var/lib/gems/1.8/gems/rhc-0.92.11/lib/rhc-common.rb:12
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `gem_original_require'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `require'
from /var/lib/gems/1.8/gems/rhc-0.92.11/bin/rhc-domain:2
from /usr/local/bin/rhc-domain:19:in `load'
from /usr/local/bin/rhc-domain:19 
```

我需要 `gem_original_require': no such file to load -- mime/types 但是我如何或在哪里可以安装或修复它？，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T02:45:53.753

好吧，我用一个简单的解决方案解决了这个问题。Gemspecs 有一些不验证的不同日期格式。我运行这个命令：

$ sudo sed -i 's/ 00:00:00.000000000Z//' /var/lib/gems/1.8/specifications/*

然后我可以运行命令

$ rhc 域创建 thkns。

# ruby-on-rails - 将设计登录表单输入 Twitter Bootstrap 模式

> ID：10808923
> 
> 赞同：13
> 
> 时间：2012-05-30T01:31:29.493
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap, devise

好的，所以我想使用 twitter 引导模式来显示设计登录表单。

我将 wiki 文章的代码基于此处： [https ://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app](https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app)

我的应用程序布局文件中有以下标记

```
<div class="modal fade" id="loginModal">
  <div class="modal-header">
    <button class="close" data-dismiss="modal">×</button>
    <h3>Sign In</h3>
  </div>
  <div class="modal-body">
    <%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name), :html => {:class => 'form-horizontal'}) do |f| %>
          <div class="inputs">
            <%= f.input :email, :required => false, :autofocus => true %>
            <%= f.input :password, :required => false %>
            <%= f.input :remember_me, :as => :boolean if devise_mapping.rememberable? %>
          </div>
  </div>
    <div class="modal-footer">
        <%= f.button :submit, "Sign in", :class => 'btn btn-primary', :data => { :dismiss => "modal"} %>
        <% end %>
    </div>
</div> 
```

并且，按照 wiki 中的建议，将以下内容添加到应用程序帮助文件中

```
def resource_name
  :user
end

def resource
  @resource ||= User.new
end

def devise_mapping
 @devise_mapping ||= Devise.mappings[:user]
end 
```

但是，它不起作用。模态消失了，没有任何反应。该页面不会去任何地方或做任何事情。转到实际的登录页面有效，但提交模式无效。建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-27T13:36:41.667

这是最终工作的代码

```
<%= simple_form_for(:user, :url => user_session_path) do |f| %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T02:00:25.167

不要使用`:data => { :dismiss => "modal"}`. 那应该从引导程序中触发一些覆盖表单提交事件的js函数

# javascript - 实时更新如何工作？

> ID：10808924
> 
> 赞同：36
> 
> 时间：2012-05-30T01:31:41.617
> 
> 标签：javascript, real-time, stackexchange

现在，在大多数使用量很大的流行网站中，实时更新很常见。

*   [堆栈交换](https://stackexchange.com/questions?tab=realtime)
*   Facebook
*   推特

我想知道这些“实时更新”是如何工作的？我只是在寻找一般的鸟瞰视角。我怀疑 JS 不能每 X 秒调用一次服务器进行更新，然后将其附加到`<ul>`. 是从服务器发送的通知去拉更多的内容吗？

如果有一个简单的如何用演示解释这一点的文章会很棒吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-30T01:38:41.243

Stack Overflow 使用[Web Sockets](http://www.html5rocks.com/en/tutorials/websockets/basics/)进行实时更新。如果您查看源代码（2012 源代码），您会看到：

```
StackExchange.ready(function () {
    StackExchange.realtime.init('ws://sockets.ny.stackexchange.com');
    StackExchange.realtime.subscribeToInboxNotifications();
    StackExchange.realtime.subscribeToReputationNotifications('1');
}); 
```

但请注意，某些 Opera 版本不支持 WebSocket。（[直到 Opera 10.70](http://my.opera.com/core/blog/websockets)）

但是 Facebook 似乎没有使用 Web Sockets，我认为他们只是使用简单的 XHR 和一种称为[长轮询](https://en.wikipedia.org/wiki/Push_technology#Long_polling)的技术，服务器保持连接直到有新信息，然后响应请求。如果您打开开发人员工具，您会看到始终有一个请求处于待处理状态。

确实，每 60 秒发送一次请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:10:23.750

Twitter 似乎也使用简单的 XHR（1 分钟间隔）进行“实时更新”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-13T18:35:12.767

Facebook 使用`long polling/Comet`. 因此它建立连接并等待响应，如果没有响应，则超时并重试。超时时间约为 40 秒。这就是大多数即时更新的方式。然而，他们使用了多种技术的组合。更多关于长轮询的信息。

[http://en.wikipedia.org/wiki/Comet_（编程）](http://en.wikipedia.org/wiki/Comet_(programming))

# iphone - 将 UIViewController 传递给另一个 ViewController 中的另一个 Button

> ID：10808925
> 
> 赞同：2
> 
> 时间：2012-05-30T01:31:52.583
> 
> 标签：iphone, ios, xcode

我有三个这样的按钮，每个按钮对应一个不同的按钮`UIViewController`：

![在此处输入图像描述](../Images/ea0e9ff7e021da63a75d43ce381060ee.png)

例如，我按下按钮 1。它将向开始按钮传递与它将显示的那个数字相对应的视图控制器。

我需要能够在此按钮中传递它：

![在此处输入图像描述](../Images/1c2d28cdf2e9803871e5f582bb7a3da7.png)

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:55:04.400

是的，只需在按钮点击时显示的视图控制器上创建 UIButton 作为属性。然后，在按钮点击的处理程序中，使用新控制器上的按钮属性来分配按钮，然后再显示新控制器。

示例代码：

```
//here's your method invoked when pressing the button 1
- (IBAction) pressedButtonOne:(id) sender {
    NewViewController *newVc = [[NewViewController alloc] initWithNibName:@"NewViewController" bundle:nil];
    newVc.startButton = self.startButton;
} 
```

这是按下按钮 1 时在控制器中创建的代码

新视图控制器.h

```
#import <UIKit/UIKit.h>
@interface NewViewController : UIViewController
@property (nonatomic, retain) UIButton *startButton;

//NewViewController.m
- (void) viewDidLoad {
    //use self.startButton here, for whatever you need
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T03:11:57.403

如果我正确理解了这个问题：让我们谈谈按钮一（您可以将其推广到其他按钮和 VC）。假设关联的 viewController 称为 button1ViewController。

在您的 button1ViewController 中，声明一个名为 button 的属性（@property(strong,non atomic) UIButton *button - 也合成）..

在您的 IBAction 方法中。

```
-(IBAction) button1Tapped:(id)sender {

button1ViewController.button = sender;

[self presentViewController:button1ViewController;

} 
```

***编辑***：我想我现在得到了这个问题。

在你的 mainView 控制器中声明一个实例变量：UIViewController *pushedController。同时声明实例 Button1ViewController *button1ViewController; , Button2ViewController *button2ViewController, Button3ViewController *button3ViewController。

现在：

```
-(IBAction) button1Pressed:(id)sender {
     if (button1ViewController==nil) {
button1ViewController = [Button1ViewController alloc] init];
}

pushedController = button1ViewController;

}

-(IBAction) button2Pressed:(id)sender {
     if (button2ViewController==nil) {
button2ViewController = [Button2ViewController alloc] init];
}

pushedController = button2ViewController;

}

//same thing for button 3 pressed with button 3 controller

-(IBAction) startButtonPressed:(id) sender {

if (pushedViewController!=nil)
[self presentViewController:pushedViewController animated:YES completion:NULL];

} 
```

我认为这应该可行，但是我自己还没有尝试过代码。

# objective-c - 通过 POST 发送 JSON 不起作用 - 目标 C

> ID：10808926
> 
> 赞同：-1
> 
> 时间：2012-05-30T01:31:53.957
> 
> 标签：objective-c, ios, json, post, nsmutableurlrequest

我正在使用 POST 方法向我们的服务器发送一个 JSON 字符串。应该发生的是它应该返回一个显示“Array（JSON String）Array（JSON String）”的响应。响应包含两个数组：如果我使用 POST 方法，则填充第一个数组，如果我使用 GET 方法，则填充第二个数组。我尝试通过 GET 方法发送 JSON，并且确实填充了第二个数组。但是，当我尝试通过 POST 方法发送 JSON 时，两个数组都返回为空。

这是我使用的代码：

> NSData *requestData = [NSJSONSerialization dataWithJSONObject:sqlArray options:NSJSONWritingPrettyPrinted error:&error];

```
NSURL *url = [NSURL URLWithString:@"http://myurl/xmlrpc/imwebsrvcjson.php"];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60];

[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:requestData];

NSData *result =[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

NSString *returnString = [[NSString alloc] initWithData:result encoding:NSUTF8StringEncoding];

if (error == nil){
    NSLog(@"The Result string: %@", returnString);   
} 
```

你能告诉我我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-01T10:43:54.897

这是我所做的（请注意，转到我的服务器的 JSON 需要是一个字典，其中 key = question..ie {:question => { dictionary } } 具有一个值（另一个字典）：

```
NSArray *objects = [NSArray arrayWithObjects:[[NSUserDefaults standardUserDefaults]valueForKey:@"StoreNickName"],
  [[UIDevice currentDevice] uniqueIdentifier], [dict objectForKey:@"user_question"],     nil];
NSArray *keys = [NSArray arrayWithObjects:@"nick_name", @"UDID", @"user_question", nil];
NSDictionary *questionDict = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

NSDictionary *jsonDict = [NSDictionary dictionaryWithObject:questionDict forKey:@"question"];

NSString *jsonRequest = [jsonDict JSONRepresentation];

NSLog(@"jsonRequest is %@", jsonRequest);

NSURL *url = [NSURL URLWithString:@"https://xxxxxxx.com/questions"];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
             cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

NSData *requestData = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];

[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody: requestData];

NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:request delegate:self];
if (connection) {
 receivedData = [[NSMutableData data] retain];
}
The receivedData is then handled by:

NSString *jsonString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSDictionary *jsonDict = [jsonString JSONValue];
NSDictionary *question = [jsonDict objectForKey:@"question"]; 
```

这不是 100% 清楚的，需要重新阅读，但一切都应该在这里让你开始。据我所知，这是异步的。进行这些调用时，我的 UI 未锁定。希望有帮助。

# c++ - Pong 的 2D 碰撞检测

> ID：10808929
> 
> 赞同：1
> 
> 时间：2012-05-30T01:32:28.343
> 
> 标签：c++, graphics, collision-detection

我正在尝试制作乒乓球游戏。我已将所有内容绘制到屏幕上，反弹墙壁上的球，并确保桨只能在地图中。我遇到的一个问题是碰撞检测。如果球（实际上是一个正方形）击中中间的球拍，而球的任何部分没有悬在球拍的边缘，我使用的算法效果很好。如果球击中桨的角或一些球挂在桨上，那么球就会进入桨中并且不会弹回。这是我的算法...

```
bool CheckCollision(float Ax,float Ay,float Aw,float Ah,float Bx,float By,
float Bw,float Bh) {
    if(Ax>Bx+Bw) {
        return(false);
    }else if(Ax+Aw<Bx) {
        return(false);
    }else if(Ay>By+Bh) {
        return(false);
    }else if(Ay+Ah<By) {
        return(false);
    }
    return(true);
} 
```

A 和 B 代表不同的对象，x、y、w 和 h 代表特定对象的 x 位置、y 位置、宽度和高度。在接收端，我有...

```
if(CheckCollision(ball->x,ball->y,ball->width,ball->height,paddle->x,paddle->y,
paddle->width,paddle->height)) {
    ball->vellx = -ball->vellx;
} 
```

如果球击中中间的桨，这就像我说的那样有效。

如果您理解这一点（因为我知道我不是最擅长言语的人），有什么办法可以让球不会误入桨中？如果没有，我可以使用另一种算法吗？请记住，这只是 2D。

这是正在发生的事情的屏幕截图

[http://gyazo.com/920d529217864cca6480a91b217c9b61](http://gyazo.com/920d529217864cca6480a91b217c9b61)

如您所见，球的两侧没有碰撞，只有点。

我希望这有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:27:19.393

> 球->vellx = -球->vellx;

这是不正确的。

**当检测到碰撞时，****只有当球向桨移动**时，您才需要反转 (x) 速度。如果**球已经离开**桨，**什么也不做**，**也不要修改速度**。

如果你在每次碰撞时盲目地反转速度，球就会卡在桨中。

PS 还有一些其他的事情你可以调整（比如让球正确地在角落反弹，根据桨速度调整球速等），但那是另一回事了......

# c# - 如果提琴手 2 可以解密所有通过 HTTPS 的调用，那么 SSL 有什么意义？

> ID：10808930
> 
> 赞同：53
> 
> 时间：2012-05-30T01:32:38.733
> 
> 标签：c#, ssl, .net-4.0, fiddler, encryption

不久前，我在这里问了一个问题，关于如何隐藏我的 http 请求调用并使它们在我的应用程序中更安全。我不希望人们使用 fiddler 2 来查看通话并设置自动应答器。每个人都告诉我使用 SSL，电话将被隐藏，信息将被安全保存。

我购买并安装了 SSL 证书并设置了所有内容。我启动了 fiddler 2 并运行了一个连接到 https Web 服务以及连接到 https php 脚本的测试应用程序。

Fiddler 2 不仅能够检测到这两个请求，还能够解密它们！我能够看到所有信息，这让我想到了我的问题。

如果 SSL 对安全性的影响为零，那么它的意义何在。无论有没有 SSL，我都可以看到所有信息都返回和第四个，并且仍然设置了一个自动响应器。

在 .NET 中我是否缺少一些东西来更好地隐藏通过 SSL 进行的调用？

**编辑**

由于我收到了一些回复，我正在为这个问题添加一个新部分。如果应用程序连接到 Web 服务以登录会怎样。该应用程序向 Web 服务发送用户名和密码。然后，Web 服务将数据发送回应用程序，说明登录数据是否良好。即使通过 SSL，使用 fiddler 2 的人也可以设置一个自动响应程序，然后应用程序被“破解”。我知道在调试中查看数据会有什么用，但我的问题是，究竟应该做些什么来确保 SSL 连接到它所请求的那个。基本上说不可能有中间人。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-30T01:36:09.960

这在这里涵盖：[http ://www.fiddlerbook.com/fiddler/help/httpsdecryption.asp](http://www.fiddlerbook.com/fiddler/help/httpsdecryption.asp)

> Fiddler2 依赖于“中间人”的 HTTPS 拦截方法。对于您的网络浏览器，Fiddler2 声称是安全的网络服务器，而对于网络服务器，Fiddler2 模仿网络浏览器。Fiddler2为了伪装成web服务器，动态生成HTTPS证书。

本质上，您手动信任 Fiddler 提供的任何证书，如果您手动接受来自与域名**不匹配的随机人的证书，情况也是如此。**

编辑：有一些方法可以防止 Fiddler/man-in-the-middle 攻击 - 即在自定义应用程序中，使用 SSL，可以要求使用特定证书进行通信。在浏览器的情况下，他们有 UI 来通知用户证书不匹配，但最终允许这样的通信。

作为显式证书的公开可用示例，您可以尝试使用 Azure 服务（即使用 Azure 的 PowerShell 工具）并使用 Fiddler 嗅探流量。由于明确的证书要求，它失败了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-30T02:08:39.440

您可以将 Web 服务设置为要求 SSL 身份验证的客户端认证以及服务器端。这样 Fiddler 将无法连接到您的服务。只有具有所需证书的应用程序才能连接。

当然，那么您会遇到如何保护应用程序中的证书的问题，但无论如何，您现在遇到了用户名和密码的问题。真正想要破解您的应用程序的人可以使用 Reflector，甚至可以对与客户端证书关联的私钥进行内存搜索。

没有真正的方法可以做到 100% 防弹。这与电影业在保护 DVD 内容方面遇到的问题相同。如果您拥有能够解密 DVD 并播放内容的软件，那么有人可以在该软件运行时进行内存转储并找到解密密钥。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-02T09:04:01.047

一般来说，SSL/TLS 的意义在于，偶尔使用 Wireshark 的窃听者无法看到您的有效负载。Fiddler/Burp 意味着您与系统进行了交互。是的，这是一个非常简单的交互，但它确实需要（一个）系统受到损害。

如果您想通过使这些 MITM 程序在这样的基本级别无用来增强安全性，您将需要客户端证书身份验证（2 路 SSL）并固定服务器和客户端证书（例如，要求只有特定证书对通讯）。您还将使用每一方的公钥加密在线传输的有效负载，并确保私钥仅驻留在他们所属的系统上。这样，即使一方（Bob）受到攻击，攻击者也只能看到发送给 Bob 的内容，而看不到 Bob 发送给 Alice 的内容。然后，您将获取加密的有效负载并使用可验证的证书对数据进行签名，以确保数据没有被篡改（顺便说一句，关于是先加密还是先签名存在很多争论）。最重要的是，

当您不控制（一个）通信系统时，这将使您尽可能合理地实现安全。

正如其他人所提到的，如果攻击者控制了系统，他们就控制了 RAM，并且可以修改内存中的所有方法调用。

# java - 为什么 System.getProperty 不能按预期工作

> ID：10808937
> 
> 赞同：0
> 
> 时间：2012-05-30T01:33:27.323
> 
> 标签：java, jakarta-ee

我有 Java EE 应用程序，并且在它的一个 servlet 中我正在使用

```
System.getProperty("user.dir") 
```

但这会返回我的 eclipse 目录而不是项目目录！

为了对此进行测试，我创建了一个测试项目.. eclipse 中的一个独立 Java 应用程序项目并使用了相同的代码，它返回项目目录的路径！（这就是我要的）

问题：为什么行为是 diff ？如何在我的 servlet 中获取项目目录的路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T01:43:30.940

要从 servlet 访问项目目录的路径，请尝试以下操作：

```
request.getSession().getServletContext().getRealPath("/") 
```

除此之外，`System.getProperty("user.dir")` *实际上*按预期工作，返回用户工作目录（不一定与项目目录相同）。请先阅读[文档](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T01:40:57.557

如果您真的阅读了文档，它会说：

> user.dir 初始化属性时的当前工作目录

听起来它按我预期的那样工作......

从这里： http: [//www.mindspring.com/~mgrand/java-system-properties.htm](http://www.mindspring.com/~mgrand/java-system-properties.htm)

# php - 如何删除标题中的多余空间

> ID：10808938
> 
> 赞同：1
> 
> 时间：2012-05-30T01:34:04.143
> 
> 标签：php, html, css

这是网站： http: [//www.indiansummerfestival.ca](http://www.indiansummerfestival.ca)

基本上我希望网页从橙色横幅的顶部开始（即横幅和页面顶部之间没有空白）。

我尝试使用 Chrome 检查器，但我不知道额外的 100 像素左右的空白是从哪里来的。涉及的文件是 style.css，样式表之外还有另一块 css。

我尝试粘贴代码，但看起来很乱，所以我认为最好的方法是`<div id="header">` 在 HTML 代码中查找。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T01:45:09.907

您`#socialLinks`和`#mc_embed_signup`div 相对于`#logo`. 尽管您正在设置这些 div，但它们仍被计算为在流中，因此`#logo`向下推。尝试绝对定位这两个 div；那应该解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T01:43:54.337

我解决了在我的 CSS 中添加的 Firefox 类似问题：

```
*{margin:0; padding:0;} 
```

Ps：我不知何故无法使用评论... :(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T01:49:34.613

它与您使用的 mailchimp 和社交插件有关。他们每个人似乎都在顶部添加了一些像素。如果您删除那些橙色标题与顶部对齐。您将不得不看看这些样式表是如何与您自己的样式表一起使用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T03:24:54.370

你可以用这个来补偿吗？

```
#header {
    margin-top:-45px;
} 
```

半黑客，但有效吗？:)

# ldap - 是否有处理所有 RFC4511 逻辑的 LDAP 库？

> ID：10808939
> 
> 赞同：0
> 
> 时间：2012-05-30T01:34:11.003
> 
> 标签：ldap, openldap, ldap-query

RFC4511（第 4.5.3.1 节）表明，如果一个目录被拆分到多个服务器上，那么客户端需要经过多次重定向才能获得明确的答案。每个客户都需要这样做似乎很愚蠢。是否有任何（免费）库可以执行所有这些逻辑并且只返回 GOOD/BAD/UNKNOWN 结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:53:14.443

[http://linux.die.net/man/3/ldap_set_option](http://linux.die.net/man/3/ldap_set_option)

LDAP_OPT_REFERRAL_URLS 设置/获取包含关联到 LDAP 句柄的引用 URI 的数组。outvalue 必须是 char ***，调用者负责通过调用 ldap_memvfree(3) 释放返回的字符串，而 invalue 必须是 NULL 终止的 char *const *; 该库复制了相应的字符串。此选项特定于 OpenLDAP。LDAP_OPT_REFERRALS 确定库是否应隐式跟踪引用。invalue 必须是 const int *; 它的值应该是 LDAP_OPT_OFF 或 LDAP_OPT_ON。outvalue 必须是 int *。

# c# - 如何在 Unity C# 中创建层次结构中已存在的对象

> ID：10808941
> 
> 赞同：0
> 
> 时间：2012-05-30T01:34:13.647
> 
> 标签：c#, unity3d, destroy

我有一个角色，当它接触到另一个物体（熔岩）时，它会被摧毁。死亡后，会有一个创建重生按钮的 GUI，但我如何重新创建玩家对象？我用 Destroy(collision.gameObject); 销毁了对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:48:45.710

我解决您的问题的方法**不是**在玩家接触熔岩时将其摧毁，而是**停用**该对象。然后，当用户单击重生按钮时，您只需再次激活该对象（但请确保先将他从熔岩中取出）。

[这](http://unity3d.com/support/documentation/ScriptReference/GameObject-active.html)可能有助于代码方面的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:13:58.847

[实例化](http://unity3d.com/support/documentation/ScriptReference/Object.Instantiate.html)应该可以解决问题。

# xmpp - XMPP：Smack 客户端未收到聊天消息

> ID：10808956
> 
> 赞同：4
> 
> 时间：2012-05-30T01:37:52.450
> 
> 标签：xmpp, chat, message, openfire, smack

我一直在努力通过 Smack 和 Openfire 服务器与 XMPP 聊天。我的问题如下：

每当用户向另一个用户发送消息时，该消息都会在另一个用户处正确接收。但是任何回复都不会出现在第一条消息的发件人处。所以用户 1 成功发送给用户 2。然后，用户 2 无法向用户 1 发送任何回复。另一方面，如果我重新启动并让用户再次登录，用户 2 可以发送给用户 1，但反之则不行。

我想说的是，只有聊天的发起者可以发送消息，接收者不能回复。

我的代码看起来像[这样](http://www.javacodegeeks.com/2010/09/xmpp-im-with-smack-for-java.html)

```
 package xmpp;

public class XMPPClient{

private static final int packetReplyTimeout = 500; // millis
private XMPPConnection connection;
private ChatManager chatManager;
private MessageListener messageListener;
private ConnectionConfiguration config;
private MyTimer t = MyTimer.getInstance();
private ArrayList<String> threadPool = new ArrayList<String>();

public XMPPClient()
{
    SmackConfiguration.setPacketReplyTimeout(packetReplyTimeout);

    //define openfire server information

    config = new ConnectionConfiguration("localhost",5222);
    config.setSASLAuthenticationEnabled(false);
    config.setSecurityMode(SecurityMode.disabled);

    connection = new XMPPConnection(config);

    //connect to server
    t.start("Connecting to server...");
    try {
        connection.connect();
    } catch (XMPPException e) {
        System.err.println("Failed to connect to server! Connect to VPN!\t"+e.getMessage());
        System.exit(0);
    }
    t.end("Connection took ");

    //setup chat mechanism
    chatManager = connection.getChatManager();
    chatManager.addChatListener(
            new ChatManagerListener() {
                @Override
                public void chatCreated(Chat chat, boolean createdLocally)
                {
                    if (!createdLocally)
                        chat.addMessageListener(new MyMessageListener());
                }
    });
}
public boolean login(String userName, String password, String resource) {       
    t.start("Logging in...");
    try {
        if (connection!=null && connection.isConnected()) 
            connection.login(userName, password, resource);
        //set available presence
        setStatus(true);
    } 
    catch (XMPPException e) {
        if(e.getMessage().contains("auth")){
            System.err.println("Invalid Login Information!\t"+e.getMessage());
        }
        else{
            e.printStackTrace();
        }
        return false;
    }
    t.end("Logging in took ");
    return true;
}
public void setStatus(boolean available) {
    if(available)
        connection.sendPacket(new Presence(Presence.Type.available));
    else
        connection.sendPacket(new Presence(Presence.Type.unavailable));
}

public void sendMessage(String message, String buddyJID) throws XMPPException {
    System.out.println(String.format("Sending mesage '%1$s' to user %2$s", message, buddyJID));
    boolean chatExists = false;
    Chat c = null;
    for(String tid : threadPool)
    {
        if((c = chatManager.getThreadChat(tid)) != null)
        {
            if(c.getParticipant().equals(buddyJID))
            {
                if(checkAvailability(buddyJID))
                {
                    chatExists = true;
                    break;
                }
                else
                {
                    threadPool.remove(tid);
                    break;
                }
            }
        }
    }
    if (chatExists)
    {
        Chat chat = c;
        chat.sendMessage(message);
    }
    else
    {
        Chat chat = chatManager.createChat(buddyJID, messageListener);
        threadPool.add(chat.getThreadID()); System.out.println(chat.getThreadID());
        chat.sendMessage(message);
    }
}

public void createEntry(String user, String name) throws Exception {
    System.out.println(String.format("Creating entry for buddy '%1$s' with name %2$s", user, name));
    Roster roster = connection.getRoster();
    roster.createEntry(user, name, null);
}

public boolean checkAvailability(String jid)
{
    System.out.print("Checking availability for: "+jid+"=");
    System.out.println(connection.getRoster().getPresence(jid).isAvailable());
    return connection.getRoster().getPresence(jid).isAvailable();
}

public void disconnect() {
    if (connection!=null && connection.isConnected()) {
        setStatus(false);
        connection.disconnect();
    }
} 
```

}

```
import org.jivesoftware.smack.packet.Message;

public class MyMessageListener implements MessageListener {
@Override
public void processMessage(Chat chat, Message message) {
    String from = message.getFrom();
    String body = message.getBody();
    System.out.println(String.format("Received message '%1$s' from %2$s", body, from));
} 
```

}

我不确定问题是什么。有什么建议么？示例代码？

谢谢 <3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-09T16:36:26.347

我不确定这是否会对您有所帮助，但我可以使用以下代码得到回复：

```
public void chat(String AddressedUser) throws NotConnectedException {
    //Create username whom we want to send a message
    String userToSend = AddressedUser + "@" + serverDomain;

    ChatManager chatmanager = ChatManager.getInstanceFor(connection);
    Chat newChat = chatmanager.createChat(userToSend , new MessageListener() {
        @Override
        public void processMessage(Chat chat, Message message   ) {
            // TODO Auto-generated method stub
            System.out.println("Received message: " + message);

        }
    });

    try {
        newChat.sendMessage("Hey");
    }
    catch (XMPPException e) {
        System.out.println("Error Delivering block");
    }

} 
```

我正在发送“嘿”，然后其他用户写的内容我将在我的 logcat 中看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:39:23.030

您尚未指定接收器是什么，例如，它是现有客户端（例如 Spark）还是更多自定义代码。这会很有帮助，就像知道您使用的是什么版本的 Smack 一样。

该特定代码有几个问题。

*   它不断为发送的每条消息创建新的聊天对象，而不是简单地重复使用相同的聊天。
*   没有注册[ChatManagerListener](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/ChatManagerListener.html)来处理与现有聊天无关的新聊天消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:12:41.493

这是代码非常复杂，似乎只是为了发送消息。这是一个在发送和接收方面都能完美运行的示例代码：

[http://www.javaprogrammingforums.com/java-networking-tutorials/551-how-write-simple-xmpp-jabber-client-using-smack-api.html](http://www.javaprogrammingforums.com/java-networking-tutorials/551-how-write-simple-xmpp-jabber-client-using-smack-api.html)

# c++ - 为什么在Ubuntu下编译CUDA示例找不到libcudart.so.4？

> ID：10808958
> 
> 赞同：26
> 
> 时间：2012-05-30T01:38:05.213
> 
> 标签：c++, unix, ubuntu, cuda, gpu

我正在尝试运行我的 Cuda SDK 示例，但出现以下错误：

```
./bandwidthTest: error while loading shared libraries:
                 libcudart.so.4: cannot open shared object file:
                 No such file or directory 
```

为什么我可以成功编译示例，但不能运行？有没有办法手动指定 CUDA 运行时库的路径？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-02T21:21:39.370

尝试：

32 位：`sudo ldconfig /usr/local/cuda/lib`

64 位：`sudo ldconfig /usr/local/cuda/lib64`

干杯

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-30T03:24:18.593

首先，您需要的是将路径连接到 CUDA 二进制文件和库。只需将以下几行添加到您的 .bashrc 文件即可完成。

```
export PATH=$PATH:/usr/local/cuda/bin
export LD_LIBRARY_PATH=:/usr/local/cuda/lib64 
```

如果您使用的是 32 位操作系统，请将 lib64 更改为 lib

其次，根据您的操作系统，应该在 /usr/lib 或 /usr/lib64 中安装了一些共享对象文件。这些目标文件应包含在名为“nvidia”的目录中。我们关心的两个文件是名称 libcuda.so.drivernumber 和 libOpenCL.so.somenumber。要区分实际的共享对象文件，只需使用`ls -l`. 符号链接将显示它们实际链接的内容。

以 root 身份执行以下命令：

```
ln -s /usr/lib64/nvidia/libcuda.so.somenumber /usr/lib64/libcuda.so
ln -s /usr/lib64/nvidia/libOpenCL.so.somenumber /usr/lib64/libOpenCL.so 
```

这应该允许您编译 SDK 中的所有源代码。

从 Cuda 5.5 和 Ubuntu 12.04/12.10 开始，对于 64 位，上面的命令变为（注意 Ubuntu 和 Cuda 目录更改）

```
ln -s /usr/local/cuda/lib64/libcuda.so.5.5 /usr/lib/libcuda.so.5.5 
```

也就是说，Ubuntu 12.04 上的 lib 文件夹是 lib32 和 lib；64 是隐式的，cuda 5.5 和更高版本现在安装到不同的目录。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-09T17:16:35.550

1 加载共享库时出错：libcudart.so.6.0：无法打开共享对象文件：没有这样的文件或目录

```
 32-bit: sudo ldconfig /usr/local/cuda/lib

  64-bit: sudo ldconfig /usr/local/cuda/lib64 
```

（参考： http: [//blog.csdn.net/shechong721/article/details/21529295](http://blog.csdn.net/shenchong721/article/details/21529295)）

为我工作！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-09T00:54:03.377

LD_LIBRARY_PATH 已被强烈弃用。它可能会弄乱其他程序，其他程序可能会重置它。它只能用于临时覆盖永久路径以进行测试（不要相信我的话，谷歌它）。

相反，在 /etc/ld.so.conf 中添加一行，其中包含您的 cuda lib 目录，在任何现有行之后。

例如，如果您安装在 /usr/local/cuda 上，则需要添加

32 位：/usr/local/cuda/lib

64 位：/usr/local/cuda/lib64

保存并运行 ldconfig。这应该可以永久解决问题。

符号链接可能已经由安装设置。如果没有，请按照 Alex 的建议添加它们。

注意 - 我收到了引用 /lib 的错误，但我需要添加 lib64 来修复它们。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-30T03:53:18.833

在 /etc/ld.so.conf.d/ 中创建一个 nvidia_settings.conf 文件，并将路径添加到文件 nvidia_settings.conf 中的库

```
 /usr/local/cuda/lib64
 /usr/local/cuda/lib 
```

现在要更新更改，请运行以下命令：

```
sudo ldconfig 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-25T12:24:25.037

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/lib 
```

或者如果您在 64 位机器上运行 cuda-5.0

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda-5.0/lib64 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-05T13:24:08.447

系统使用 ld 工具查找库。正如最佳答案所说，64 位： sudo ldconfig /usr/local/cuda-xx/lib64 ;;xx 是 cuda libraryedition

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-07T20:39:49.583

就我而言，我正在使用 MPI 运行应用程序。错误是：

```
libcudart.so.7: cannot open shared object file 
```

CUDA 已正确安装在所有节点中。此外，与前面的答案一样，变量 $PATH 和 $LD_LIBRARY_PATH 分别指向二进制文件和库。

在 MPI 命令中传递 $PATH 和 $LD_LIBRARY_PATH 解决了这个问题。

```
mpirun -x PATH=$PATH -x LD_LIBRARY_PATH=$LD_LIBRARY_PATH ... 
```

# ios - 如果我只能运行带有 XCode 4.2 的 OS X 10.6.8 Snow Leopard，我是否仍然能够构建应用程序并将其提交到应用程序商店？

> ID：10808963
> 
> 赞同：1
> 
> 时间：2012-05-30T01:38:24.337
> 
> 标签：ios, xcode, osx-leopard

如果我只能运行带有 XCode 4.2 的 OS X 10.6.8 Snow Leopard，我是否仍然能够构建应用程序并将其提交到应用程序商店？这将我限制在 iOS 5.0.1 开发上。

我的 Mac Mini 最高到 10.6.8 并且无法运行 Lion，因此它无法运行 XCode 4.3 来为 iOS 5.1.x 平台进行开发。

我应该继续开发我的应用程序，因为它会兼容，还是应该放弃我的目标，直到我能够升级我的硬件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:31:15.573

运行 4.2 不会阻止您将应用上传到 App Store。运行此版本将阻止您针对较新版本的 iOS 测试您的应用程序，从而为用户留出空间来体验您不知道存在的错误。

通常，我提倡保持最新状态，但考虑到 5.0.1 和 5.1.1 之间并没有太大的区别，您可能会成功。（至少现在）我仍然建议您尽快升级硬件。

# ios - [UIScreen 屏幕] 什么时候返回一个空数组

> ID：10808964
> 
> 赞同：6
> 
> 时间：2012-05-30T01:38:27.070
> 
> 标签：ios, uiscreen, eaaccessory

`[UIScreen screens]`在我们记录到 Flurry 的崩溃报告中，我看到了 iOS 5.0.1 中的奇怪行为。有时`[UIScreen screens]`会返回一个空数组。我们的应用通过 EAAccessory 框架实现对外部附件的支持。这种行为完全出乎意料，因为即使[Apple 的文档](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingWindows/CreatingWindows.html#//apple_ref/doc/uid/TP40009503-CH4-SW12)也说从该方法返回的数组将始终包含至少一个条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:18:32.047

由于您的崩溃，您当时没有连接到窗口服务器 - 您的应用程序基本上没有运行。

# mysql - Mysql 未安装 - 尝试将其与 RoR 一起使用

> ID：10808967
> 
> 赞同：1
> 
> 时间：2012-05-30T01:38:42.010
> 
> 标签：mysql, ruby-on-rails, ruby

我正在按照 Lynda 课程中的指南教授 Ruby on Rails。

这家伙建议使用 mysql 而不是使用默认的 mysqlite3。

我跑了这个：

```
 rails new simple_cms -d mysql 
```

这是错误的一部分

```
An error occured while installing mysql2 (0.3.11), and Bundler cannot continue.
Make sure that `gem install mysql2 -v '0.3.11'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T01:46:49.330

已经有很多人在问这个问题了。如果你使用的是 linux，

```
sudo apt-get install libmysqlclient-dev 
```

如果您使用的是 mac，请使用[homebrew](https://brew.sh/)

```
brew install mysql 
```

然后运行 ​​gem install mysql2

# django - 我可以做到只有某些字段可以通过 PATCH 进行更改吗？

> ID：10808970
> 
> 赞同：0
> 
> 时间：2012-05-30T01:39:12.723
> 
> 标签：django, django-models, tastypie

我已经做到了，只有对象的所有者才能对资源调用 PATCH 命令，但我希望这个用户只能更新这个资源中的某些字段。我可以通过创建另一个资源并更改 hydrate 方法的第一个资源来做到这一点，但这很麻烦。有没有更简单的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:49:39.020

您可以将它们标记为只读：

```
email = fields.CharField(attribute='email', readonly=True) 
```

我观察到这些字段无法设置，但当用户尝试更改它们时，Tastypie 不会引发错误。

# php - 在 PHP 服务器上运行 Python 脚本

> ID：10808974
> 
> 赞同：6
> 
> 时间：2012-05-30T01:40:25.590
> 
> 标签：php, python

我正在运行一个 nginx Web 服务器以及 PHP-CGI。

我想知道是否可以在 PHP 页面中执行 Python 脚本，从而允许将两种语言结合起来。我已经简单地尝试过，但没有成功，所以我不确定我会如何做到这一点。这是我使用的两个文件：

索引.php

```
<body>

    <p>Hello! Here is a message: <?php exec('python hello.py'); ?></p>

</body> 
```

你好.py

```
print 'Hello World!' 
```

任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T01:51:36.483

`exec`将返回 shell 命令的输出，但您仍然需要将`echo`其返回到页面。以下代码应该适合您

```
<body>

    <p>Hello! Here is a message: <?php echo exec('python hello.py'); ?></p>

</body> 
```

# mysql - 如何在避免唯一键问题的同时一次更新多行？

> ID：10808978
> 
> 赞同：1
> 
> 时间：2012-05-30T01:41:09.393
> 
> 标签：mysql

我有以下（简化的）数据库表，代表锦标赛中的球队。每个团队都属于一个池，并且在该池中具有排名（第一、第二等）。

```
CREATE TABLE `team` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `pool_id` bigint(20) NOT NULL,
  `rank` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `pool_id_rank_idx` (`pool_id`,`rank`),
) 
```

唯一的关键是在那里，因为一个池不能有两个具有相同排名的团队。

当团队互相比赛时，他们的排名会发生变化，我需要更新它们。我希望能够在一个查询中更新所有排名，但我想不出一种方法来做到这一点，它有时不会导致“重复条目”错误。以下是导致此问题的情况示例：

两支球队（A 和 B）分别在一个池中排名第 1 和第 2。他们互相比赛，B 击败 A。现在我需要切换他们的队伍。我正在使用的查询是这样的：

```
UPDATE team 
SET rank = CASE id WHEN idA THEN 2 WHEN idB THEN 1 END 
WHERE id IN (idA,idB); 
```

*idA 和 idB 是对应团队的id*

这似乎应该很好地工作，但我收到了这个错误：

```
ERROR 1062 (23000): Duplicate entry '1-2' for key 'pool_id_rank_idx' 
```

我认为这是因为 MySQL 在每行更改后检查唯一键。

**有没有办法将唯一密钥检查推迟到所有更改完成后？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:02:59.447

排名是动态值，为什么要添加唯一键？或者你的意思是一个池不可能有两个相似的排名值？

当您更新数据时，会出现两个相似的 pool_id，rank 对 - 这就是原因。

删除唯一键：

`ALTER TABLE team DROP INDEX pool_id_rank_idx`

# ajax - 如何使用ajax设置html样式？

> ID：10808985
> 
> 赞同：0
> 
> 时间：2012-05-30T01:42:04.000
> 
> 标签：ajax, html, jquery-mobile

我在 ajax 成功函数中有这段代码。我想改变字体大小。我需要在css中做吗？我该如何申报？如果我想在 ajax 中做类似列表的事情怎么样。那可能吗？因为如果它在列表中，它将在方框中。有什么建议吗？

```
 html  = '<h1 align=center>#######################################</h1>';
     html += '<h1 align=center>          Course Details               </h1>';
     html += '<h1 align=center>#######################################</h1>';
     html += '<h3><br>' +json_results.rows[courseId].courseName+'</br></h3>';
     html += '<br> Registration #    : ' + json_results.rows[courseId].regNo+'</br>';
     html += '<br> Status            : ' + json_results.rows[courseId].regStatus+'</br>';
     html += '<br> Location          : ' + json_results.rows[courseId].courseLoc+'</br>';
     html += '<br> Start Date        : ' + json_results.rows[courseId].startDate+'</br>';
     html += '<br> Registered Person : ' + json_results.rows[courseId].fullName+'</br>';
     html += '<br> Rate              : ' + json_results.rows[courseId].rate+'</br>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:45:02.707

您可以向该标记添加类....而不是弃用的 align=center，您可以添加 class="ajaxh1" 或其他内容。更好的是，因为这都是一个 var，只需添加一个包装 div 或相关的语义元素与一个类，然后你就可以将它们全部定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:45:06.583

是的，如果您将 css 类分配给 h1 和 h3 标签，那么您将以您描述的任何样式显示此信息。

# sql - 连接内的相关子查询？

> ID：10808989
> 
> 赞同：1
> 
> 时间：2012-05-30T01:42:40.600
> 
> 标签：sql, sql-server-2008, subquery, correlated-subquery

我有一个查询，我需要一个连接内的相关子查询。我说需要，我的意思是我认为我需要它......我该怎么做？我的查询如下，我收到“无法绑定多部分标识符“FIELDNAME GOES HERE””错误...如何更改此查询以使其正常工作？

```
SELECT FireEvent.ExerciseID, 
       FireEvent.FireEventID, 
       tempHitEvent.HitEventID, 
       FireEvent.AssociatedPlayerID, 
       tempHitEvent.AssociatedPlayerID, 
       FireEvent.EventTime, 
       tempHitEvent.EventTime, 
       FireEvent.Longitude, 
       FireEvent.Latitude, 
       tempHitEvent.Longitude, 
       tempHitEvent.Latitude, 
       tempHitEvent.HitResult, 
       FireEvent.AmmunitionCode, 
       FireEvent.AmmunitionSource, 
       FireEvent.FireEventID, 
       0 AS 'IsArtillery' 
FROM   FireEvent 
       LEFT JOIN (SELECT HitEvent.*, 
                         FireEvent.FireEventID, 
                         Rank() 
                           OVER ( 
                             ORDER BY HitEvent.EventTime) AS RankValue 
                  FROM   HitEvent 
                         WHERE FireEvent.EventTime BETWEEN 
                                    Dateadd(millisecond, -5000, 
                                    HitEvent.EventTime) AND 
                                               Dateadd(millisecond, 
                                               5000, HitEvent.EventTime) AND HitEvent.FiringPlayerID = FireEvent.PlayerID 
                   AND HitEvent.AmmunitionCode = 
                       FireEvent.AmmunitionCode
                   AND HitEvent.ExerciseID = 
                       'D289D508-1479-4C17-988C-5F6A847AE51E' 
                        AND FireEvent.ExerciseID = 
                       'D289D508-1479-4C17-988C-5F6A847AE51E' 
                   AND HitEvent.HitResult NOT IN ( 0, 1 ) ) AS 
                 tempHitEvent 
              ON ( 
              RankValue = 1
            AND tempHitEvent.FireEventID = 
                     FireEvent.FireEventID 
                     )
WHERE  FireEvent.ExerciseID = 'D289D508-1479-4C17-988C-5F6A847AE51E' 
ORDER BY HitEventID 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T08:20:49.547

使用[OUTER APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)而不是 LEFT JOIN。我不得不移动你的一些条款，但下面应该产生预期的结果

```
SELECT  FireEvent.ExerciseID, 
        FireEvent.FireEventID, 
        tempHitEvent.HitEventID, 
        FireEvent.AssociatedPlayerID, 
        tempHitEvent.AssociatedPlayerID, 
        FireEvent.EventTime, 
        tempHitEvent.EventTime, 
        FireEvent.Longitude, 
        FireEvent.Latitude, 
        tempHitEvent.Longitude, 
        tempHitEvent.Latitude, 
        tempHitEvent.HitResult, 
        FireEvent.AmmunitionCode, 
        FireEvent.AmmunitionSource, 
        FireEvent.FireEventID, 
        0 AS 'IsArtillery' 
FROM    FireEvent 
        OUTER APPLY
        (   SELECT  HitEvent.*, RANK() OVER (ORDER BY HitEvent.EventTime) AS RankValue 
            FROM    HitEvent 
            WHERE   HitEvent.FireEventID = FireEvent.FireEventID 
            AND     FireEvent.EventTime BETWEEN DATEADD(MILLISECOND, -5000, HitEvent.EventTime) AND DATEADD(MILLISECOND, 5000, HitEvent.EventTime) 
            AND     HitEvent.FiringPlayerID = FireEvent.PlayerID 
            AND     HitEvent.AmmunitionCode = FireEvent.AmmunitionCode
            AND     HitEvent.ExerciseID = FireEvent.ExerciseID
            AND     HitEvent.HitResult NOT IN ( 0, 1 ) 
        ) AS tempHitEvent 
WHERE   COALESCE(RankValue, 1) = 1
AND     FireEvent.ExerciseID = 'D289D508-1479-4C17-988C-5F6A847AE51E' 
ORDER BY FireEvent.HitEventID 
```

如果您只想返回匹配 HitEvent 的结果，请使用`CROSS APPLY`. `CROSS APPLY`是`OUTER APPLY`什么`INNER JOIN`是什么`LEFT JOIN`。

* * *

**附录**

这一切都可以使用不需要的连接来实现`OUTER APPLY`，方法是不使用子查询来连接 HitEvent，然后`RANK`对所有数据执行该功能，而不仅仅是 HitEvent 表。这一切都需要移动到子查询中，以便`RANK`函数的结果可以包含在`WHERE`子句中。

```
SELECT  *
FROM    (   SELECT  FireEvent.ExerciseID, 
                    FireEvent.FireEventID, 
                    HitEvent.HitEventID, 
                    FireEvent.AssociatedPlayerID, 
                    --HitEvent.AssociatedPlayerID, 
                    FireEvent.EventTime, 
                    HitEvent.EventTime [HitEventTime], 
                    FireEvent.Longitude [FireEventLongitute], 
                    FireEvent.Latitude [FireEventLatitute], 
                    HitEvent.Longitude [HitEventLongitute], 
                    HitEvent.Latitude [HitEventLatitute], 
                    HitEvent.HitResult , 
                    FireEvent.AmmunitionCode, 
                    FireEvent.AmmunitionSource,
                    0 [IsArtillery],
                    RANK() OVER(PARTITION BY HitEvent.FireEventID, HitEvent.FiringPlayerID, HitEvent.AmmunitionCode,HitEvent.ExerciseID ORDER BY HitEvent.EventTime) [RankValue]
            FROM    FireEvent 
                    LEFT JOIN HitEvent
                        ON HitEvent.FireEventID = FireEvent.FireEventID 
                        AND FireEvent.EventTime BETWEEN DATEADD(MILLISECOND, -5000, HitEvent.EventTime) AND DATEADD(MILLISECOND, 5000, HitEvent.EventTime) 
                        AND HitEvent.FiringPlayerID = FireEvent.PlayerID 
                        AND HitEvent.AmmunitionCode = FireEvent.AmmunitionCode
                        AND HitEvent.ExerciseID = FireEvent.ExerciseID
                        AND HitEvent.HitResult NOT IN ( 0, 1 ) 
        ) data
WHERE   RanKValue = 1 
```

与使用 相比，这可能会稍微提高性能`OUTER APPLY`，但可能不会。这取决于您的架构和您正在处理的数据量。没有什么可以替代测试：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:11:06.733

交叉应用适用于这种情况......

```
SELECT FireEvent.ExerciseID, 
       FireEvent.FireEventID, 
       tempHitEvent.HitEventID, 
       FireEvent.AssociatedPlayerID, 
       tempHitEvent.AssociatedPlayerID, 
       FireEvent.EventTime, 
       tempHitEvent.EventTime, 
       FireEvent.Longitude, 
       FireEvent.Latitude, 
       tempHitEvent.Longitude, 
       tempHitEvent.Latitude, 
       tempHitEvent.HitResult, 
       FireEvent.AmmunitionCode, 
       FireEvent.AmmunitionSource, 
       FireEvent.FireEventID, 
       0 AS 'IsArtillery' 
       ,RankValue
FROM   FireEvent
       CROSS APPLY  (SELECT HitEvent.*, 
                         FireEvent.FireEventID, 
                         Rank() 
                           OVER ( 
                             ORDER BY HitEvent.EventTime) AS RankValue 
                  FROM   HitEvent 
                         WHERE FireEvent.EventTime BETWEEN 
                                    Dateadd(millisecond, -5000, 
                                    HitEvent.EventTime) AND 
                                               Dateadd(millisecond, 
                                               5000, HitEvent.EventTime) AND HitEvent.FiringPlayerID = FireEvent.PlayerID 
                   AND HitEvent.AmmunitionCode = 
                       FireEvent.AmmunitionCode
                   AND HitEvent.ExerciseID = 
                       'D289D508-1479-4C17-988C-5F6A847AE51E' 
                        AND FireEvent.ExerciseID = 
                       'D289D508-1479-4C17-988C-5F6A847AE51E' 
                   AND HitEvent.HitResult NOT IN ( 0, 1 ) )  
                 tempHitEvent 
              WHERE 
              RankValue = 1
            AND tempHitEvent.FireEventID = 
                     FireEvent.FireEventID 

AND  FireEvent.ExerciseID = 'D289D508-1479-4C17-988C-5F6A847AE51E' 
ORDER BY HitEventID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T02:30:45.037

您不需要相关的子查询。您似乎有一个相对简单的连接，尽管同时在​​多个字段上。

下面的 FROM 子句从子查询内部提取两个表的条​​件，并将它们移到 JOIN 子句中。这接近您想要的，具体取决于排名中的分区是否符合您的预期：

```
FROM FireEvent fe left outer join
     (SELECT HitEvent.*, 
             Rank() OVER (partition by FiringPlayerID, ExerciseID, FireEventID, FireEventID
                          ORDER BY HitEvent.EventTime) AS RankValue 
      FROM HitEvent 
      WHERE HitEvent.ExerciseID = 'D289D508-1479-4C17-988C-5F6A847AE51E' AND  
            HitEvent.HitResult NOT IN ( 0, 1 )
     ) he
     ON he.FiringPlayerID  = fe.PlayerId and
        he.AmmunitionCode = fe.AmmunitionCode and
        fe.EventTime BETWEEN Dateadd(millisecond, -5000, he.EventTime) AND 
                             Dateadd(millisecond, 5000, he.EventTime) AND
        fe.ExerciseID = 'D289D508-1479-4C17-988C-5F6A847AE51E' AND
        RankValue = 1 , d
        he.FireEventID =  fe.FireEventID 
```

# javascript - 使用 Javascript 从 Div 中检索 href 属性（链接）

> ID：10808990
> 
> 赞同：0
> 
> 时间：2012-05-30T01:43:00.140
> 
> 标签：javascript, jquery, attr

我正在尝试从 div 中的锚标记中获取链接（或 href 属性）。

这是我的完整 HTML 代码：

```
<script> 
    var link = $('#jira_details a').attr('href');

    function useJira() {
        alert(link);
    }
</script>

<div id="jira_details">
    <ul>
        <li>
            <a href="http://www.google.com">Bugs</a>
        </li>
    </ul>
</div>
<input type="submit" value="test" onclick="javascript:useJira();" /> 
```

但是，每当我单击提交按钮时，它每次都会以未定义的形式发出警报。我什至尝试过改变：

```
$('#jira_details a').attr('href'); 
```

到

```
$('#jira_details ul li a').attr('href'); 
```

这样它就会转到那个特定的锚标签，但是它仍然不起作用。关于问题可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:53:54.137

var 链接是在加载 dom 之前编写的。

如果锚 url 永远不会改变，你可以这样做：

```
<script> 

$(function(){
  var link = $('#jira_details a').attr('href');
});

function useJira(){
  alert(link);
}
</script> 
```

或者，如果 href 可以更改：

```
<script> 
function useJira(){
  var link = $('#jira_details a').attr('href');
  alert(link);
}
</script> 
```

# svn - Subversion 更新和 Maven 自动构建更新的模块

> ID：10808992
> 
> 赞同：1
> 
> 时间：2012-05-30T01:43:04.980
> 
> 标签：svn, maven

我们的团队有一个由 40 个子项目组成的项目。我们以分布式方式开发，这意味着每天早上，我们必须更新其他团队的更改并重建整个项目。问题是现在构建需要一个小时，这是无法忍受的。我想知道是否有任何工具可以“理解”更新并仅以正确的方式构建更新的子项目。有时，当更新不大时，我手动执行此操作。但是当更新如此之大时，很难跟踪。

有什么建议或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:59:11.790

使用继续集成服务器（我推荐 Jenkins）和内部 Maven 存储库（如 Nexus）。大多数 CI 足够聪明，可以找出项目的哪些模块发生了变化，然后只重建它们。成功构建后，CI 应该将您当前的 SNAPSHOT 部署到 Maven 存储库，以便其他开发人员立即看到他们所依赖的更改内容。当然，他们仍然需要更新他们正在处理的代码，但通常这只是几个模块，而所有其他依赖项都是在更改时从 Nexus 下载的。顺便说一句，您将获得所有其他 Continues Integration 优势，例如继续自动测试等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:19:10.870

是的，使用 SNAPSHOT（使您的整个项目版本为 1.0-SNAPSHOT），并且只签出或构建您正在使用的模块。您可以使用 mvn -U 更新到 SNAPSHOT 的最新副本，以获取其他最新的二进制文件其他开发人员更改的依赖项...

# java - 从java连接到多个sql server数据库

> ID：10808993
> 
> 赞同：1
> 
> 时间：2012-05-30T01:43:20.283
> 
> 标签：java, sql-server-2008, multiple-databases

我有一些数据要从多个 sql server 数据库（如 200）中读取。每个数据库中大约有 10 个表，我需要从中读取数据，我怎样才能使用 java 以最好的方式做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:57:47.673

并发救援。

要为您的繁重工作负载实现最佳吞吐量，请从一开始就将您的应用程序编写为多线程，然后您可以根据性能限制加快或降低速度。

[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)是一种以可扩展方式分解任务的好方法。我建议您将每个数据库导入任务定义为[Callable](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html)，然后从[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)中“调用”所有任务。

我会做这样的事情：

```
List<YourCallableImportJobs> work= yourFactory.getAllWork();
// this variable can be used to tweak performance. 
// Begin with a low number and then ramp it up if it's too slow.
int nThreads=10;     
ExecutorService service = ExecutorService.newFixedThreadPool(nThreads);
List<Future<T>> futures= service.invokeAll(work); 
```

您可以轮询[Futures](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)以检查工作何时完成......

最后，如果您希望同时访问每个数据库（尤其是目标数据库），我建议使用连接池机制，例如[C3PO](http://sourceforge.net/projects/c3p0/)。这意味着您不会花费太多时间来打开和关闭连接。（您甚至可以将每个导入分解为单独的查询——此时连接池也会有所帮助）。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:19:54.383

使用这些数据库的 ipaddresses 维护一个数据库连接队列，使用多线程连接到每个数据库，现在随着数据库的工作完成，关闭来自该数据库的连接并从队列中删除连接。

# google-app-engine - AppEngine Datastore to LowerCase 函数 - JPA 应用

> ID：10808995
> 
> 赞同：0
> 
> 时间：2012-05-30T01:43:35.973
> 
> 标签：google-app-engine, jpa

我在下面有一个 JPA 查询：

```
SELECT p FROM Profile p  WHERE  lower(p.country) LIKE 'Philippines%' 
```

Google AppEngine 的数据存储是否支持较低的功能？没有错误或警告，但我认为它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:24:29.670

由于 GAE 的数据存储不支持这样的操作，因此可以合理猜测 JPA 接口不支持它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:26:14.650

我认为您在发出查询之前调用了 lower() ，所以它应该可以工作。但是 'Philippines%' 包含一个大写的 P，所以它不会匹配任何东西。

# html - 开发跨平台HTML5游戏并用PhoneGap Build编译需要知道什么

> ID：10808999
> 
> 赞同：1
> 
> 时间：2012-05-30T01:44:00.017
> 
> 标签：html, cordova, build, cross-platform

我正在考虑开发 HTML5 游戏以使用 PhoneGap Build 对其进行编译。我对 Android、iOS 和 Blackberry 平台感兴趣。我想知道的是如何使用 HTML5 处理不同的设备分辨率，什么引擎/框架对此更好？关于开发跨平台应用程序，我还需要了解其他任何事情吗？顺便说一句，对于我的游戏，我不需要任何原生的东西，比如相机、加速度计或类似的东西，只需要触摸控制。