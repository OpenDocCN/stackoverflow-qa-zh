# StackOverflow 问答 11415000-11415999

# java - 如何设置许多唯一 MDB 的实例

> ID：11415000
> 
> 赞同：0
> 
> 时间：2012-07-10T14:00:27.267
> 
> 标签：java, spring, jboss-mdb

我正在使用 Spring 3.1

我已经配置了监听它的 HornetQ 和 MDB。

我的目标是向那些 MDBS 注入一个具有独特属性的属性类。

每个 MDB 都有自己的属性

我一尝试就得到异常。

那是我的代码：

多边开发银行：

```
public class FeedListenerMDB implements MessageListener
{
    private final static Logger log = Logger.getLogger(FeedListenerMDB.class);

    FeedPropertiesDTO feedPropertiesDTO;

    ...

    @Override
    public void onMessage(Message message)
    {
        if (message instanceof TextMessage)
        {
            try
            {
                String text = ((TextMessage) message).getText();
                log.debug("i am marketmaker=" + feedPropertiesDTO.getMarketMakerId() + " and the message I got=" + text);
            }
            catch (JMSException ex)
            {
                throw new RuntimeException(ex);
            }
        }
        else
        {
            throw new IllegalArgumentException("Message must be of type TextMessage");
        }
    } 
```

}

那就是 FeedPropertiesDTO ：

```
public class FeedPropertiesDTO
{
    private String marketMakerId;

    public String getMarketMakerId()
    {
        return marketMakerId;
    }

    public void setMarketMakerId(String marketMakerId)
    {
        this.marketMakerId = marketMakerId;
    }

} 
```

现在这是我的应用程序上下文 bean 设置：

```
<bean id="FeedListenerMarketMaker1MDB" class="com.fixgw.mdb.FeedListenerMDB">
        <property name="feedPropertiesDTO" ref="feedListenerMarketMaker1Properties" />
    </bean>

    <bean id="feedListenerMarketMaker1Properties" class="com.fixgw.dto.FeedPropertiesDTO">
        <property name="marketMakerId" value="1" />
    </bean>

    <bean id="FeedListenerMarketMaker2MDB" class="com.fixgw.mdb.FeedListenerMDB">
        <property name="feedPropertiesDTO" ref="feedListenerMarketMaker2Properties" />
    </bean>

    <bean id="feedListenerMarketMaker2Properties" class="com.fixgw.dto.FeedPropertiesDTO" >
        <property name="marketMakerId" value="2" />
    </bean> 
```

通过这种方式，我将能够从 applicationContext 配置我的 MDBS 并在将来添加新的，而无需接触代码。

但我得到这个错误：

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [com.fixgw.mdb.FeedListenerMDB] is defined: expected single matching bean but found 2: [FeedListenerMarketMaker1MDB, FeedListenerMarketMaker2MDB]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:800)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:551)
    ... 17 more 
```

知道如何实现我的需要吗？

谢谢，雷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:12:17.433

问题出在另一个类中，我尝试使用 @AutoWire 将其注入 FeedListenerMDB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:12:19.617

问题不在您在此处显示的代码中。在你的代码中，你有这样的东西：

```
@Autowired
private FeedListenerMDB feedListenerMDB; 
```

Spring 无法解决这种依赖关系，因为有两个可用的候选者。

使用`@Qualifier`注释或更具体地满足您的要求。

# sql-server - 在 Access 中，您可以 rs.findfirst 使用一组以上的标准吗

> ID：11415001
> 
> 赞同：1
> 
> 时间：2012-07-10T14:00:28.577
> 
> 标签：sql-server, ms-access, vba

在 Access / SQL Server 组合中使用 recordset.findfirst 时是否可以使用一组以上的条件。

我的代码在 FindFirst-ing 时工作正常 `"Ref='XYZ'"`，但一旦我让它`"Ref='XYZ' AND CustDate=#12-31-2010#"`冻结，我必须 EndTask Access。

这是常见的还是我犯了一个简单的错误。我对两者都有`Ref`索引`CustID`

我的记录集代码是：

```
dim rsImport as DAO.recordset, rsSQL as DAO.recordset
set rsimport=CurrentDB().OpenRecordset("SELECT * from tblImport",dbopenSnapshot)
 rsimport.movelast
 rsimport.movefirst
set rsSQL=CurrentDB().OpenRecordset("SELECT * from tblRecords",dbOpenDynaset, dbSeeChanges)
 rsSQL.movelast
 rssql.movefirst
do while rsimport.eof=false
   rssql.findfirst "[RefID]='" & rsimport!RefID & "' AND [RefDate]=#" & format(rsimport!CustDate,"m-d-yy") & "#"
   if rssql.nomatch=true then
       debug.print "NOT FOUND - Add..."
   else
       debug.print "FOUND - Update..."
   endif
   rsimport.movenext
loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:58:41.760

我在 MS Access 2007 中测试了以下内容，它进入了记录集中的第三条记录。
您的记录集中有多少条记录？您是否使用 F8 单步执行了您的代码？当你通过时它挂在哪里？此外，您可以执行 ALT+Pause Break 来中断代码。有时（因为 MS Access 不是多线程的）处理中断可能需要过多的时间。

```
...
With rst
    .FindFirst ("field1 = 'xyz' and qty1 = 3")
End With
.... 
```

因此，要回答您的问题，是的，可以做到，并且您提供的以下示例应该可以工作：

```
something.FindFirst ("Ref='XYZ' AND CustID=234") 
```

此外，我相信在记录集上放置索引仅在使用 SEEK 方法时才有用。

*编辑——OP现在已经发布了源代码*

请尝试以下代码。我将 rsImport 字段分配给变量，并在日期上进行预格式化，以便在比较期间不必进行转换。单步执行代码以查看性能是否有任何改进。我现在无法测试此代码，因此可能需要稍微调整日期变量周围的哈希值，并且 s_RefID 可能不是字符串，因此可能还需要调整数据类型。

我所做的另一个更改是在每次搜索后将 rssql 的位置重置为第一条记录。

```
dim rsImport as DAO.recordset, rsSQL as DAO.recordset
dim s_RefID as STRING
dim d_RefDate as date
set rsimport=CurrentDB().OpenRecordset("SELECT * from tblImport",dbopenSnapshot)
 rsimport.movelast
 rsimport.movefirst
set rsSQL=CurrentDB().OpenRecordset("SELECT * from tblRecords",dbOpenDynaset, dbSeeChanges)
 rsSQL.movelast
 rssql.movefirst

s_RefID = rsImport!RefID
d_RefDate = #format(rsimport!CustDate,"m-d-yy")#
do while rsimport.eof=false
   rssql.findfirst "[RefID]='" & s_RefID & "' AND [RefDate]=#" & d_RefDate & "#"
   if rssql.nomatch=true then
       debug.print "NOT FOUND - Add..."
   else
       debug.print "FOUND - Update..."
   endif
   rsimport.movenext
   rssql.movefirst

   s_RefID = rsImport!RefID
   d_RefDate = #format(rsimport!CustDate,"m-d-yy")#
loop 
```

# php - 访问PHP中类的未定义字段

> ID：11415002
> 
> 赞同：2
> 
> 时间：2012-07-10T14:00:30.400
> 
> 标签：php

我最近在阅读一些关于 PHP 面向对象编程的文章，并遇到了这样的事情：

```
class a {}
$temp = new a();
$temp->newfiled = 20;    // This field is not present within the class 
```

上面的代码在 PHP 5.3 中运行良好

为什么说 PHP 会抛出错误？我来自 Java 背景，我们只能使用在类中定义的字段。

**更新：**将 php.ini 编辑为 error_reporting = E_ALL | E_STRICT，但它继续隐藏错误。

**另外，这是PHP的一个特性吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:02:47.237

简而言之：PHP 不是 Java。稍长一点：PHP 是动态类型，而 Java 是静态类型语言。但是，您可以提高错误级别。您应该会看到通知或（严格）警告。

[http://php.net/language.oop5.properties](http://php.net/language.oop5.properties)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:07:41.320

有时这可能是一个优势。

如果您需要确保属性已显式声明或在祖先类中声明，则可以使用[property_exists函数。](http://php.net/manual/en/function.property-exists.php)

# asp.net-mvc - ASP.NET MVC Controller 推荐用于 LINQ DataContext 实例化的地方

> ID：11415011
> 
> 赞同：1
> 
> 时间：2012-07-10T14:01:10.620
> 
> 标签：asp.net-mvc, linq, entity-framework, linq-to-sql, datacontext

我应该如何在 MVC 控制器中实例化数据上下文（实体 fw）：

*   a) 作为类中的属性
*   b) 作为类中的一个字段
*   c) 作为 Action 中的变量
*   d) 使用 Repository 模式抽象出你的 DbContext

在 WebForms 中我会使用 c)，因为 b) 会跨事件维护 db 对象状态，这通常不是我想要的。

我实际上从未使用过a）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:08:26.133

您可能应该使用`repository pattern`with`dependency injection`
通过构造函数传入上下文，
并且使用它您将不得不使用像[Unity](http://www.codeproject.com/Articles/254091/Implementing-Microsoft-Unity-Design-Pattern)这样的收费来在`constructor`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:09:42.030

我想首先说我 100% 同意@jrummell，因为 DbContext 应该被实例化。但是，如果您不打算这样做，我将使用私有只读字段并提供两个构造函数：

```
public MyController() : this(new DbContext()) { }

public MyController(DbContext context)
{
   this._dbContext = context;
} 
```

这样您仍然可以注入 DbContext 进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:09:45.493

有一个私有变量，它是您的存储库接口的对象，并在您的构造函数中实例化它。您现在可以在所有操作方法中使用它

```
public class ItemsController : Controller
{
    private IRepositary repo;

    public ItemsController()
    {
        repo = new Repositary(new YourDBContext());
    }
    public ActionResult Edit(int id)
    {
      var item=repo.GetItemById(id);
      //if needed, map to your view model and return that to the view
     //  instead of model object to the view
      return View(item);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:10:10.530

推荐的方法是使用与持久性无关的数据访问模式，例如[存储库模式](http://martinfowler.com/eaaCatalog/repository.html)。基本思想是创建特定于控制器的接口，以抽象出您的数据访问。

```
public interface ICatalogRepository : IRepository
{
  Category GetCategory(int id);
  Product GetProduct(int id);

  void Add(Product product);

  IEnumerable<Category> Categories { get; }
  IEnumerable<Supplier> Suppliers { get; }
}

public class CatalogRepository : ICatalogRepository
{
  private YourDbContext _db;

  public CatalogRepository(YourDbContext db)
  {
     _db = db;
  }

  public Category GetCategory(int id)
  {
     return _db.Categories.Find(id);
  }
  /* ... */
} 
```

然后你会在你的控制器中使用一个实例`ICatalogRepository`——它不会有任何实体框架的知识。有关完整示例，请参阅[在 ASP.NET MVC 中使用按请求工作单元模式。](http://www.mindscapehq.com/blog/index.php/2008/05/12/using-the-unit-of-work-per-request-pattern-in-aspnet-mvc/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T14:21:02.037

除非这是一个非常小的应用程序或只有少数用户；或者应用程序的生命周期很短，我永远不会将任何数据访问“类似”的代码放在 UI 层中。您刚刚做出了会影响应用程序的可维护性和可测试性的设计决策。

我喜欢使用带有依赖注入的存储库模式的想法 - 这已被证明非常有效。事实上，我目前使用的应用程序每月处理超过 110 亿个 Web 请求，使用这种模式针对 7 个不同的 MySQL 数据库实例。

另一个建议，在 UI 下实现一个服务/业务层。这一层的职责之一是为业务处理和数据库事务提供 API。我通常在业务层实现存储库，但它为实际的数据库特定事务引用并使用数据访问层组件。通过这种方式，您可以在业务层中抽象出数据访问——这是一件好事，因为长期存在的应用程序会在数据访问中发生许多变化。有了这个很好的抽象，您可以使用实体框架或任何其他数据库技术，如 NoSQL。此外，使用 DI，接口/抽象类允许您将“存储库”的实例注入业务组件 - 这肯定会提高应用程序的可测试性：

希望这可以帮助。

# jquery - jquery .find() 函数替代？

> ID：11415012
> 
> 赞同：3
> 
> 时间：2012-07-10T14:01:14.350
> 
> 标签：jquery, performance, find

`.find()`函数在 IE 7 及以下版本中运行非常缓慢，经常导致挂起。

有人可以建议我一个替代方案吗？

这是代码片段。

```
$(".dobAutoTab").each(function() { 
    var dobFields = $(this).children().find("input"); 
    var fldDate = $(dobFields[0]); 
    var fldMonth = $(dobFields[1]); 
    var fldYear = $(dobFields[2]); 
)}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T14:37:49.240

大多数情况下，这取决于您要实现的目标：

*   [`.filter()`](http://api.jquery.com/filter/)仅搜索与前提条件匹配的元素。
*   [`.find()`](http://api.jquery.com/find/)在 children、children's children 和 all 后裔下搜索。
*   [`.children()`](http://api.jquery.com/children/)工作方式完全相同，但只会找到孩子，而不是更远的后代。
*   [`.closest()`](http://api.jquery.com/closest/)从当前元素开始，获取与选择器匹配的更接近的（第一个）元素。
*   [`.parent()`](https://api.jquery.com/parent/)获取当前匹配元素集中每个元素的父元素，可选地由选择器过滤。

当然，您的选择器越具体，您的结果就会越快。

而且，如果可以的话，在上下文中搜索您需要的内容，这样会更快，有关选择器的更多信息，[请查看此处](http://api.jquery.com/category/selectors/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T14:14:08.863

尝试使用普通的 CSS 选择器，`$('#id span')`例如基本上是`$('#id').find('span')`但要快得多。

但无论如何，一些代码示例会给你一个更具体的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-28T11:48:18.863

正如 Luis 所说`.filter(), .children(), .closest() and parent()`，函数可用于替代`.find()`函数，我想从 jquery 选择器中再添加两个选择器来替代`.find()`函数，如下所示：

1.  [子选择器（“父>子”）](http://api.jquery.com/child-selector/)它只选择**第一级后代**或直接子元素。例如`$('#parent_id > #child_id')`或`$(".parent > .first-level-child")`
2.  [后代选择器（“祖先后代”）](http://api.jquery.com/descendant-selector/)它选择该元素的**子、孙、曾孙**等。在里面你可以使用`$('#parent_id #child_id')`or `$('#parent_id #grandchild_id')`or `$(".parent .great-grand-child")`or`$( "form input" )`

# android - 需要有关使用带有自定义标题的标签主机的帮助

> ID：11415022
> 
> 赞同：0
> 
> 时间：2012-07-10T14:01:55.313
> 
> 标签：android, android-tabhost, custom-titlebar

参考[这篇](https://stackoverflow.com/a/4534359/1016544)文章，我需要你的建议。我已经使用该答案解决了自定义标题栏的显示问题。我已经在标题栏中实现了按钮以及标题文本。当我尝试设置`onclicklistener`按钮时，它会给出，`NullPointerException`因为自定义标题栏 xml 是使用选项卡主机活动设置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:22:13.157

我建议`ActionbarSherlock`Jake Wharton 使用。

# jquery - jQuery AJAX-请求加载两次

> ID：11415026
> 
> 赞同：0
> 
> 时间：2012-07-10T14:02:05.433
> 
> 标签：jquery

我正在构建一个无限滚动，当滚动条到达页面底部时，它会从数据库中获取结果。除了一件小事，一切都很好；如果我快速向下滚动，它会获取两次结果，就好像该函数执行了两次一样。

这是我的 jQuery 代码：

```
$(window).scroll(function () {
    if($(window).scrollTop() == $(document).height() - $(window).height()) {
        var ID = $('.stbody:last').attr('id').match(/stbody(\d+)/)[1];
        $('#loader').show();
        $.ajax({
            url: "ajax_loadmore.php?lCom=" + ID,
            success: function (result) {
                if(result) {
                    $('#moreComments').append(result);
                    $('#loader').hide();
                } else {
                    $('#loader').hide();
                }
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:10:09.957

你的 AJAX 请求很可能会一个接一个地排队，因为它们是*异步*的，尽管 JavaScript 本身大部分是单线程的。

您可以使用该`abort()`方法确保一次只运行一个请求。您需要将返回的 jqXHR 对象分配`$.ajax()`给一个变量：

```
var request;

$(window).scroll(function () {
    if($(window).scrollTop() == $(document).height() - $(window).height()) {
        var ID = $('.stbody:last').attr('id').match(/stbody(\d+)/)[1];
        $('#loader').show();

        // Abort any currently executing request
        if(request) {
            request.abort();
        }

        // Make a new request
        request = $.ajax({
            url: "ajax_loadmore.php?lCom=" + ID,
            success: function (result) {
                if(result) {
                    $('#moreComments').append(result);
                    $('#loader').hide();
                } else {
                    $('#loader').hide();
                }
            }
        });
    }
}); 
```

`abort()`是[XMLHttpRequest 对象](http://www.w3.org/TR/XMLHttpRequest/)的原生函数，但是它被 jQuery 的 jqXHR 对象公开，所以可以照常调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:25:32.717

作为@JamWaffles 答案的补充：

您可以退出函数`return;`而不是调用`request.abort();`. 否则，您将对相同的数据发出两个 AJAX 请求 = 对您的服务器造成不必要的负载。但是，您应该`request = null;`在成功和错误回调中重置请求对象。

PS。会将此作为评论发布，但我不能。

# overflow - 使用 Watir 检测元素被溢出隐藏

> ID：11415029
> 
> 赞同：0
> 
> 时间：2012-07-10T14:02:17.967
> 
> 标签：overflow, watir, watir-webdriver

我想使用 Watir 来判断元素是否使用 overflow: hidden css 属性隐藏。我认为这样做的唯一方法是找出包含 div 的位置，并查看包含的元素是否在其中。像可见的方法？和礼物？即使包含的元素完全隐藏，也返回 true。

有没有更好的办法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:59:39.940

一种选择可能是使用`document.elementFromPoint(x,y)`. 这应该告诉您顶部元素在特定坐标处的位置。如果您的元素由于溢出而被隐藏，它将返回一个不同的元素。

以下似乎适用于 w3schools.com 上的示例：

```
require 'rubygems'
require 'watir-webdriver'
b = Watir::Browser.new :firefox

class Watir::Element
    def hidden_by_overflow?()
        assert_exists
        assert_enabled

        # Add one to the coordinates because, otherwise, if there is no border       
        # between this element and another element, we might get the element right   
        # above or to the left of this one                                           
        top_left_x = @element.location.x + 1
        top_left_y = @element.location.y + 1
        top_test = browser.execute_script("return document.elementFromPoint(#{top_left_x}, #{top_left_y})")

        return top_test != self
    end
end

begin
    b.goto('http://www.w3schools.com/cssref/playit.asp?filename=playcss_overflow&preval=hidden')
    b.div(:id, 'demoDIV').ps.each{ |x| puts x.hidden_by_overflow? }
    #=> The first 9 paragraphs of the 16 paragraphs return true.
ensure
    b.close
end 
```

笔记：

*   我在 Firefox 中对此进行了测试。不确定它是否与浏览器兼容。
*   该检查仅检查元素的左上角是否未隐藏。部分位于包含 div 之外的元素仍将返回 true。我尝试使用@element.size.height 检查底角，但 webdriver 开始滚动包含 div 中的结果。

# bash - 强制排序命令忽略文件夹名称

> ID：11415030
> 
> 赞同：4
> 
> 时间：2012-07-10T14:02:20.193
> 
> 标签：bash, sorting, find

我从基本文件夹中运行了以下内容。/

```
find . -name *.xvi.txt | sort 
```

它返回以下排序顺序：

```
./LT/filename.2004167.xvi.txt
./LT/filename.2004247.xvi.txt
./pred/2004186/filename.2004186.xvi.txt
./pred/2004202/filename.2004202.xvi.txt
./pred/2004222/filename.2004222.xvi.txt 
```

如您所见，文件名遵循常规结构，但文件本身可能位于目录结构的不同部分。有没有办法忽略文件​​夹名称和/或目录结构，以便排序仅根据文件名本身返回文件夹/文件名列表？像这样：

```
./LT/filename.2004167.xvi.txt
./pred/2004186/filename.2004186.xvi.txt
./pred/2004202/filename.2004202.xvi.txt
./pred/2004222/filename.2004222.xvi.txt
./LT/filename.2004247.xvi.txt 
```

我在 find 和 sort 命令下尝试了一些不同的开关，但没有运气。我总是可以将所有内容复制到一个文件夹并从那里进行排序，但是有数百个文件，我希望存在一个更优雅的选项。

谢谢！感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T14:10:37.630

如果您`find`有`-printf`，您可以打印基本文件名和完整文件名。按第一个字段排序，然后将其删除。

```
find . -name '*.xvi.txt' -printf '%f %p\n' | sort -k1,1 | cut -f 2- -d ' ' 
```

我选择了一个空格作为分隔符。如果您的文件名包含空格，您应该选择另一个分隔符，它是一个不在您的文件名中的字符。如果任何文件名包含换行符，则必须修改它，因为它不起作用。

请注意，`find`应引用命令中的 glob。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:18:18.047

如果你`find`没有`printf`，你可以`awk`用来完成同样的事情：

```
find . -name *.xvi.txt | awk -F / '{ print $NF, $0 }' | sort | sed 's/.* //' 
```

丹尼斯威廉姆森提到的关于空间的相同警告在这里也适用。为了多样化，我使用`sed`剥离排序字段，而不是`cut`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:24:59.070

```
find . -name *.xvi.txt | sort -t'.' -k3 -n 
```

将根据需要对其进行排序。唯一的问题是文件名或目录名是否包含附加点。

为避免它，您可以使用：

```
find . -name *.xvi.txt | sed 's/[0-9]\+.xvi.txt$/\\&/' | sort -t'\' -k2 | sed 's/\\//' 
```

# sql - 如何在 Access 上将整个 Excel 列分配给 VBA 内的变量？

> ID：11415035
> 
> 赞同：2
> 
> 时间：2012-07-10T14:02:38.507
> 
> 标签：sql, forms, excel, ms-access, vba

目前，我在 Access 上有一个表单，该表单从子表单中过滤记录，并在单击按钮时在第一张表上创建包含数据的 Excel 文档。我有一堆其他计算发生在后续工作表上，但我需要它们只发生在第一张工作表的“名称”列中已经存在“名称”字段的条目中。其他计算通过 SQL 语句完成。

我的思考过程是做类似的事情：

```
SELECT (various fields) FROM (query name) WHERE (first couple of where statements) AND NameField IN NameColumn 
```

其中 NameField 将是名称元素，而 NameColumn 将是整个列。我尝试以多种方式创建此变量，但均未成功。例如，我尝试的一件事是循环遍历记录，在正确的实例中添加“（”、“、”和“）”，但字符串太长，Access 不会运行它。我也尝试只定义变量，如：

```
NameColumn = ExcelApplication.Range("A:A") 
```

和

```
NameColumn = Worksheet.Range("A:A") 
```

和

```
NameColumn = ExcelApplication.Columns("A:A").EntireColumn 
```

等等，但所有这些似乎只指该列的第一个条目。我已经尝试过研究解决方案，但我也没有发现任何有用的东西。有人知道我会如何处理这样的事情吗？

编辑：我可能还应该提到，我认为我只是使用这些方法获得第一个条目，因为 NameColumn 没有事先定义为任何东西。但我试着做：

```
Dim NameColumn As Range 
```

但我会收到以下错误：

```
Compile Error:
User-defined type not defined 
```

这很奇怪，因为经过一些研究我注意到 Range 似乎是一个有效的数据类型

编辑 2：这是我定义 Excel 应用程序和工作表的方式：

编辑3：对其进行编辑以使其更加完整，以防万一

编辑 4：更新了更多代码

```
Dim rst As DAO.Recordset
Dim ApXL As Object
Dim xlWBk As Object
Dim xlWSh As Object
Dim fld As DAO.Field
Const xlCenter As Long = -4108
Const xlBottom As Long = -4107

On Error GoTo err_handler

Set rst = frm.RecordsetClone

Set ApXL = CreateObject("Excel.Application")
Set xlWBk = ApXL.Workbooks.Add
ApXL.Visible = True

Set xlWSh = xlWBk.Worksheets("Sheet1")

#THESE TWO BLOCKS COPY THE DATA FROM THE SUBFORM#
For Each fld In rst.Fields
    ApXL.ActiveCell = fld.Name
    ApXL.ActiveCell.Offset(0, 1).Select
Next

rst.MoveFirst
xlWSh.Range("A2").CopyFromRecordset rst
.
.
.
Dim FirstColumn As Object
Set FirstColumn = xlWSh.Columns(1)
. 
.
. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:43:54.447

> 但我会收到以下错误：编译错误：未定义用户定义的类型，这很奇怪，因为经过一些研究，我注意到 Range 似乎是一个有效的数据类型

您收到该错误是因为 Excel`Range`不是 Access 对象，而是 Excel 对象。您必须将其定义为

```
Dim NameColumn As oXl.Range 
```

其中 oXL 是您在应用程序中定义的 Excel 应用程序。

并设置范围，你不能使用

```
NameColumn = Worksheet.Range("A:A") 
```

你必须使用这个词`Set`。所以上面的代码更改为

```
Set NameColumn = Worksheet.Range("A:A") 
```

或者

```
Set NameColumn = Worksheet.Columns(1) 
```

**跟进**

我试过了，它有效

```
Dim ApXL As Object, xlWBk As Object, xlWSh As Object, NameColumn As Object

Set ApXL = CreateObject("Excel.Application")
ApXL.Visible = True

Set xlWBk = ApXL.Workbooks.Add
Set xlWSh = xlWBk.Worksheets("Sheet1")
Set NameColumn = xlWSh.Columns(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:08:05.210

为什么不使用子查询？

```
AND NameField IN (SELECT NameField FROM [Sheet1$a1:a10]) 
```

或者对于命名范围：

```
AND NameField IN (SELECT NameField FROM NameColumn) 
```

重新评论

```
DoCmd.TransferSpreadsheet acLink, acSpreadsheetTypeExcel8, _
   "Atable", "z:\docs\test.xls", True, "A1:A15" 
```

最后：

```
SELECT * FROM Table1 
WHERE ADate NOT IN (
   SELECT SomeDate 
   FROM [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\Test2.xls].[Sheet1$a1:a4]) 
```

# r - R：未知数量矩阵的总和

> ID：11415041
> 
> 赞同：1
> 
> 时间：2012-07-10T14:02:47.760
> 
> 标签：r

我正在尝试编写一个循环来总结我的一组矩阵，这些矩阵都以相同的名称加上一个数字（例如“day11”）开头。但是，在循环的每次运行中，矩阵的数量都会有所不同。

如果没有循环，它可以像这样完成一次：

```
combmat<-(day1+day3+day4+day5+day6+day8+day9+day10+day11+day12+day13+day14+day15+day16+day17+day18+day19+day20+day22+day23+day24+day25+day26+day27+day28+day29) 
```

我努力了

```
sum(list=ls(pattern="^day")) 
```

没有任何运气...

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:07:47.780

也许像

```
day1<-matrix(c(1:4),2,2)
day2<-matrix(c(1:4),2,2)
day3<-matrix(c(1:4),2,2)
day4<-matrix(c(1:4),2,2)

list=ls(pattern="^day")

res<-lapply(list,"get")

do.call("sum",res)

> do.call("sum",res)
[1] 40 
```

会为你工作

`get`返回命名对象的值。所以`get("x")`会返回变量 x

# sql-server - T-SQL 中的 NumbersTable() 函数

> ID：11415043
> 
> 赞同：-1
> 
> 时间：2012-07-10T14:02:57.857
> 
> 标签：sql-server, tsql, sql-server-2008-r2

我们的首席数据库程序员这周外出度假，我被困住了。

我有一个正在创建的视图，其中包括以下子查询：

```
select cast(cast(getdate() + i as date) as datetime) DATEVALUE 
from NumbersTable(1,100,1) 
```

我不知道这是做什么的，当我尝试在 Squirrel 中运行它时，我得到：

```
Error: Procedure or function NumbersTable has too many arguments specified.
SQLState:  37000
ErrorCode: 8144 
```

下面是为 NumbersTable 创建的函数：

```
 CREATE FUNCTION NumbersTable (
  @fromNumber int,
  @toNumber int,
  @byStep int
) RETURNS TABLE
RETURN (

WITH CTE_NumbersTable AS (
  SELECT @fromNumber AS i
  UNION ALL
  SELECT i + @byStep
  FROM CTE_NumbersTable
  WHERE
  (i + @byStep) <= @toNumber
)
SELECT * 
FROM CTE_NumbersTable
)
; 
```

和

```
CREATE FUNCTION NumbersTable (
  @fromNumber int,
  @toNumber int
) RETURNS TABLE
RETURN (
WITH T_0_THRU_15 AS (
SELECT 0 j UNION ALL
SELECT 1 UNION ALL
SELECT 2 UNION ALL
SELECT 3 UNION ALL
SELECT 4 UNION ALL
SELECT 5 UNION ALL
SELECT 6 UNION ALL
SELECT 7 UNION ALL
SELECT 8 UNION ALL
SELECT 9 UNION ALL
SELECT 10 UNION ALL
SELECT 11 UNION ALL
SELECT 12 UNION ALL
SELECT 13 UNION ALL
SELECT 14 UNION ALL
SELECT 15 
)
SELECT T1.j + (T2.j*16) + (T3.j*256) + @fromNumber i
FROM   T_0_THRU_15 T1, T_0_THRU_15 T2, T_0_THRU_15 T3
WHERE T1.j + (T2.j*16) + (T3.j*256) + @fromNumber <= @toNumber
)
; 
```

我正在针对 Microsoft SQL Server 2008 R2 运行它。奇怪的是，我相信我之前已经针对这个数据库运行过这段代码并且它有效，我现在根本不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:07:10.920

检查`NumbersTable`函数或存储过程的代码。这将向您显示它将接受多少个参数。

该错误告诉您您传递的参数太多。

```
from NumbersTable(1,100,1) 
```

您将根据代码`NumbersTable`调整参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:07:13.950

NumbersTable 可能是一个[表值函数](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)。

尝试这个：

```
select cast(cast(getdate() + i as date) as datetime) DATEVALUE  
from dbo.NumbersTable(1,100,1) 
```

它可能意味着“以 1 为增量返回从 1 到 100 的值”。

[SQL 小提琴示例](http://sqlfiddle.com/#!3/8d2b6/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:25:05.837

> 下面是NumbersTable**的create 函数：**

SQL Server 不允许函数重载；您列出的 s 中只有一个是`CREATE FUNCTION`相关数据库中的实际定义。从错误消息来看，我会说您尝试使用的代码期望使用三参数版本，但实际上您所在的数据库具有两参数版本。

教训是，不要在首席数据库程序员休假时进行重大升级......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:54:26.260

如果您只想返回接下来的 100 天，为什么不创建一个函数呢？这将需要任何日期和任何天数（最多约 7000 天），并返回日期列表：

```
CREATE FUNCTION dbo.GenerateDaySequence
(
  @StartDate DATE,
  @NumDays   INT
)
RETURNS TABLE
AS
  RETURN 
  (
    SELECT TOP (@NumDays) 
      d = DATEADD(DAY,  
        ROW_NUMBER() OVER (ORDER BY s1.[object_id])-1, 
      @StartDate)
    FROM sys.all_columns AS s1
  );
GO 
```

示例用法：

```
SELECT d FROM dbo.GenerateDaySequence(GETDATE(), 100); 
```

结果：

```
d 
----------
2012-07-10
2012-07-11
...
2012-10-16
2012-10-17 
```

# perl - 在 tr/// 中使用 char 变量

> ID：11415045
> 
> 赞同：6
> 
> 时间：2012-07-10T14:03:04.923
> 
> 标签：perl

我正在尝试计算字符串中的字符，并找到了一个使用`tr`运算符计算单个字符的简单解决方案。现在我想对从 a 到 z 的每个字符执行此操作。以下解决方案不起作用，因为`tr///`匹配每个字符。

```
my @chars = ('a' .. 'z');
foreach my $c (@chars)
{
    $count{$c} = ($text =~ tr/$c//);
} 
```

如何正确使用 char 变量`tr///`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T14:12:26.497

`tr///`除非您将其包装在变量中，否则不适用于变量`eval`

但是有一个更好的方法来做到这一点：

```
$count{$_} = () = $text =~ /$_/g for 'a' .. 'z'; 
```

对于 TIMTOWDI：

```
$count{$_}++ for grep /[a-z]/i, split //, $text; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T14:13:49.697

[`tr`](https://perldoc.perl.org/perlop.html#Quote-Like-Operators)不支持变量插值（既不在搜索列表中也不在替换列表中）。如果要使用变量，则必须使用`eval()`：

```
$count{$c} = eval "\$text =~ tr/$c/$c/"; 
```

也就是说，更有效（和安全）的方法是简单地迭代字符串中的字符并为每个字符增加计数器，例如：

```
my %count = map { $_ => 0 } 'a' .. 'z';

for my $char (split //, $text) {
    $count{$char}++ if defined $count{$char};
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T14:13:38.703

如果您查看[perldoc](http://perldoc.perl.org/perlop.html#Quote-Like-Operators) for `tr/SEARCHLIST/REPLACEMENTLIST/cdsr`，那么您会在该部分的底部看到以下内容：

> 因为音译表是在编译时构建的，所以 SEARCHLIST 和 REPLACEMENTLIST 都不受双引号插值的影响。这意味着如果要使用变量，则必须使用 eval()：

```
eval "tr/$oldlist/$newlist/";
die $@ if $@;
eval "tr/$oldlist/$newlist/, 1" or die $@; 
```

因此，您需要一个 eval 来生成一个新的 SEARCHLIST。

这将非常低效......代码可能感觉很整洁，但您正在处理完整的字符串 26 次。你也没有计算大写字符。

您最好单步遍历字符串一次，然后为找到的每个字符增加计数器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T14:13:24.927

从[perlop 文档](http://perldoc.perl.org/perlop.html)：

> ```
> tr/AAA/XYZ/ 
> ```
> 
> 将任何 A 音译为 X。
> 
> 因为音译表是在编译时构建的，所以 SEARCHLIST 和 REPLACEMENTLIST 都不受双引号插值的影响。这意味着如果要使用变量，则必须使用 eval()

或者，在您的情况下，您可以将`s///`运算符用作：

```
foreach my $c (@chars) {
   $count{$c} += ($text =~ s/$c//g);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-09T09:26:57.450

我的解决方案基于[http://www.perlmonks.org/?node_id=446003进行了一些修改](http://www.perlmonks.org/?node_id=446003)

```
sub lowerLetters {
    my $string = shift;
    my %table;
    @table{split //, $letters_uc} = split //, $letters_lc;
    my $table_re = join '|', map { quotemeta } reverse sort keys %table;
    $string =~ s/($table_re)/$table{$1}/g;
    return if not defined $string;
    return $string;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-18T10:24:22.980

您可能想`s`改用。替代的威力比`tr`

我的解决方案：

```
$count{$c} =~ s/\$search/$replace/g; 
```

`g`最后的意思是“在全球范围内使用它”。

看：

*   [https://blog.james.rcpt.to/2010/10/25/perl-search-and-replace-using-variables/](https://blog.james.rcpt.to/2010/10/25/perl-search-and-replace-using-variables/)
*   [https://docstore.mik.ua/orelly/perl3/lperl/ch09_06.htm](https://docstore.mik.ua/orelly/perl3/lperl/ch09_06.htm)

# java - 如何通过电子邮件发送谷歌应用引擎日志文件？

> ID：11415050
> 
> 赞同：0
> 
> 时间：2012-07-10T14:03:34.797
> 
> 标签：java, google-app-engine, email

我正在尝试实现如何通过电子邮件发送谷歌应用引擎日志文件！

发送电子邮件似乎根本不是什么大问题（google mail api）

但我不知道如何提取所有日志文件？

你对我有什么建议，甚至是一个好的教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:11:15.693

您可以使用[LogService](https://developers.google.com/appengine/docs/java/logservice/overview) API 来提取应用程序的日志。

# javascript - android phonegap - 在单个 html 页面中导航功能或事件时实现后退按钮。

> ID：11415054
> 
> 赞同：0
> 
> 时间：2012-07-10T14:03:47.703
> 
> 标签：javascript, android, cordova

Android phonegap 后退按钮：

如果应用是基于html页面的，我们可以使用phonegap实现返回按钮，即当应用从page1.html导航到page2.html时，可以实现返回按钮。但是，我的应用程序完全编写在一个网页中，带有 javascript 函数和事件。我保留了一个包含菜单项的顶级菜单。当单击任何菜单项时，会发生单击事件，并通过替换出售的内容在 div 上生成一些查询和最终结果。那么，我如何在此处实现后退按钮，如有必要，将提供更多信息。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:41:18.880

You can use URL hashes to do this. They allow you to create pseudo URLs which can be navigated. Google "url hash change".

This is a jquery plugin that allows you to manage hashes and respond to changes [http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

# sha256 - 如何使用 HMAC SHA256？

> ID：11415055
> 
> 赞同：9
> 
> 时间：2012-07-10T14:03:50.053
> 
> 标签：sha256, hmac

根据我阅读的使用 HMAC SHA256 的各种文档，我了解到：

H (K XOR opad, H (K XOR ipad, text)) 其中 H 在我的例子中是 SHA256。

但是，SHA256 输入只有一个参数，即消息。而 H(K,text) 有两个输入。那么如何计算H(k,text)呢？

我是否应该先用 k 编码文本，然后使用 H(encoded_text)，其中编码文本将用作消息？

谢谢你

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-10T14:35:30.117

*   H() 是您的加密哈希函数，在本例中为 SHA256() 但也可以是 MD5 或其他；
*   K 是您的预定义密钥
*   text 是要认证的消息
*   opad 是外部填充（0x5c5c5c…5c5c，一个块长的十六进制常数）
*   ipad 是内部填充（0x363636…3636，一个块长的十六进制常量）
*   然后 HMAC(K,m) 在数学上定义为

HMAC(K,m) = H((K ⊕ opad) ∥ H((K ⊕ ipad) ∥ m))。

*   blocksized 由您的哈希函数确定（MD5 为 64 字节）
*   o_key_pad = [opad * blocksize] ⊕ key
*   i_key_pad = [ipad * blocksize] ⊕ key

你的结果是：

```
H(o_key_pad || H(i_key_pad || TEXT)) 
```

你可以在这里找到一个很好的阅读：http: [//timdinh.nl/index.php/hmac/](http://timdinh.nl/index.php/hmac/)

还有以下几乎看起来像我的伪代码：

```
function hmac (key, message)
    opad = [0x5c * blocksize] // Where blocksize is that of the underlying hash function
    ipad = [0x36 * blocksize]

    if (length(key) > blocksize) then
        key = hash(key) // Where 'hash' is the underlying hash function
    end if

    for i from 0 to length(key) - 1 step 1
        ipad[i] = ipad[i] XOR key[i]
        opad[i] = opad[i] XOR key[i]
    end for

    return hash(opad || hash(ipad || message)) // Where || is concatenation
end function 
```

# javascript - (?:x) 字符的意义何在？

> ID：11415056
> 
> 赞同：2
> 
> 时间：2012-07-10T14:03:51.243
> 
> 标签：javascript, regex

> **可能重复：**
> [非捕获组？](https://stackoverflow.com/questions/3512471/non-capturing-group)

我正在学习 JavaScript 中的正则表达式，而`(?:x)`字符或“非捕获括号”对我来说没有意义。如果您不想记住匹配项，为什么不完全放弃括号呢？using`/(?:x)/`而不是 just有什么好处`/x/`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T14:08:15.757

因为您可能出于其他原因需要括号。例如，假设您要捕获`abababababab9`. 如果你写了`ab*(\d)`，那么它会匹配`abbbbbbbbb9`。您需要用括号括起来，`ab`以便`*`操作员重复整个过程。`(ab)*(\d)`. 但也许你不在乎`ab`重复了多少次。那就是你使用的地方`(?:)`：`(?:ab)*(\d)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T14:05:29.547

您需要它来定义要在替代匹配或量词中使用的子模式，这将应用于整个子模式而不会浪费捕获槽。例如，您可以使用`(?:)`with`|`在 regexp 中间提供替代匹配而不捕获它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T14:06:32.560

考虑以下情况：

`(?:aa|bb|cc)`

`(?:abc)?`

您可以使用非捕获组来匹配具有更复杂子模式的模式。在某些情况下，使用非捕获组语法也会产生更有效的正则表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T14:15:14.393

> 如果您不想记住匹配项，为什么不完全放弃括号呢？使用 /(?:x)/ 而不仅仅是 /x/ 有什么好处？

当您想对字符进行**分组**但不想**记住**它们时使用它。如果删除括号，则无法对字符序列进行分组。因此，例如：

```
/foo|bar/.test("foo") // true
/foo|bar/.test("bar") // true 
```

如果要实现匹配的模式`foor`并且`fbar`必须将字符分组在中间：

```
/f(?:oo|ba)r/.test("fbar") // true
/f(?:oo|ba)r/.test("foor") // true 
```

当然，您也可以分组并记住该组，但是如果`test`您的 using`match`或返回数组的其他方法对您很重要，那么您必须改为使用`(?:`。

# emacs - Emacs 无法配合 ibus 输入中文

> ID：11415058
> 
> 赞同：1
> 
> 时间：2012-07-10T14:03:56.537
> 
> 标签：emacs

我的 Emacs 编辑器无法使用 ibus 中文输入法，当光标在 Emacs 上时，ibus 显示“无输入窗口”。

我用别名运行 Emacs `LC_CTYPE="zh_CN.UTF-8" emacs`，它实际上以前可以工作，但我不知道为什么它现在不工作，也许我认为是一些系统更新。

关于我的系统：Gentoo Linux 和 Gnome3，我安装了 Emacs23 和 Emacs24，现在它们都不能与 ibus 一起工作。

PS：ibus 可以在其他程序上运行，Emacs 可以很好地显示汉字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:24:01.760

我通过安装 ibus.el 解决了这个问题，这似乎是 emacs GTK UI 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:48:43.793

看来问题只发生在Gentoo上。因为系统更新清除了一些字体。解决方案是安装缺少的字体：

`emerge media-fonts/font-adobe-75dpi x11-apps/bdftopcf media-fonts/font-alias media-fonts/font-util`

然后注销并重新登录后，我可以再次使用输入法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T13:07:16.467

1.  通过打开您的发行版的默认文本编辑器（Mousepad、Leafpad...？），输入 control-space 并查看是否可以输入中文，确保 ibus 配置正确。如果不能，则可能需要安装中文输入法或在 ibus 设置中添加输入法。

2.  接下来确保您已安装 emacs、ibus 模式。如果您使用的是基于 Debian 的发行版，您要安装的软件包将被列为“ibus-el”。

3.  安装 ibus-el 后，控制空间通常会激活并允许您在输入法之间循环；但是，在我的一些机器上，我必须通过键入 Mx ibus-mode 来帮助 emacs 启动 ibus 模式。

# vba - 在 for 循环 VBA 中创建和定位图形

> ID：11415063
> 
> 赞同：0
> 
> 时间：2012-07-10T14:04:11.723
> 
> 标签：vba, excel

我有一个 Excel 表，我想从中提取数据并将数据表示为一个名为“图表”的新选项卡上的图表。

我能够很容易地生成图表，但是当它们被创建时，它们都相互堆叠，因为我无法找到一种体面而简单的方法来给它们设置位置，我可以在每次循环完成后增加。

我一直在尝试`activechart.location`命令，但似乎找不到正确的命令。

这是我目前的代码。这会生成图表并将它们输出到当前的 Excel 工作表。

```
Dim i As Integer
i = 30
Start = Start + 2 (global variable)
finish = finish + 2 (global variable)
For i = 30 To 56
   Range("ci:bbi").Select
   ActiveSheet.Shapes.AddChart.Select
   ActiveChart.HasTitle = True
   ActiveChart.ChartTitle.Text = Cells(i, 2).Value
   ActiveChart.SourceData Source:=Range(Cells(i, Start), Cells(i, finish))
   ActiveChart.ChartType = xlColumnStacked
Next 
```

我对 vba 完全陌生，即使是这个小代码块也需要付出很多努力！我的问题是，我可以在这里输入什么，以便在创建每个图表时为其定位。最好是一个我可以增加的新变量。

提前致谢

**编辑**：忘了提，我不能用宏来做到这一点，因为我需要多次使用页面，使用宏意味着图形名称用于识别它们，因此无法跟踪图形之后第一代图表随着图表名称的不断攀升。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:36:52.487

试试这个

```
Sub Sample()
    Dim i As Long, nTop As Long, nLeft As Long
    Dim strChrt As String

    i = 30: nLeft = 20: nTop = 20

    Start = Start + 2: finish = finish + 2

    For i = 30 To 56
       ActiveSheet.Shapes.AddChart.Select
       ActiveChart.HasTitle = True
       ActiveChart.ChartTitle.Text = Cells(i, 2).Value
       ActiveChart.SetSourceData Source:=Range(Cells(i, Start), Cells(i, finish))
       ActiveChart.ChartType = xlColumnStacked

       strChrt = Trim(Replace(ActiveChart.Name, ActiveSheet.Name, ""))

       ActiveSheet.Shapes(strChrt).Left = nLeft
       ActiveSheet.Shapes(strChrt).Top = nTop

       '~~> Increment the next `Top` placement for the chart
       nTop = nTop + ActiveSheet.Shapes(strChrt).Height + 20
    Next
End Sub 
```

我创建了两个变量`nTop`，`nLeft`它们将定义新创建的图形的位置。

# java - SQLiteDatabase删除涉及子查询

> ID：11415064
> 
> 赞同：2
> 
> 时间：2012-07-10T14:04:22.863
> 
> 标签：java, android, sql, sqlite

我将 SQLiteDatabase 用于 Java 库，并且我需要支持非常低版本的 Android API (v4)，它不附带支持外键的 SQLite 版本。

因此，为了删除顶级数据及其所有“子项”，我需要先删除这些子项，以便手动重现与外键约束相同的效果`ON DELETE CASCADE`

我正在尝试做的是带有删除 api 的以下 SQL。

```
DELETE FROM childTable 
WHERE someFK IN (
    SELECT parent_id 
    FROM parentTable 
    WHERE someFlag = 1
) 
```

我想出的最初解决方案是在 where 子句中硬编码 select 查询，如下所示，但是由于 SQLiteDatabase api 支持查询、execSQL 等，我使用的这个解决方案是不是非常错误并且使用起来很危险？解决方法：

```
String[] whereArgs = {Integer.toString(1)};
this.database.delete(TABLE_CHILD_ONE, COL_ONE_FK_SESSION+" IN (SELECT "+COL_SESSION_ID+" FROM "+TABLE_SESSIONS+" WHERE "+COL_SESSION_DONE+"=?)", whereArgs);
this.database.delete(TABLE_CHILD_TWO, COL_TWO_FK_SESSION+" IN (SELECT "+COL_SESSION_ID+" FROM "+TABLE_SESSIONS+" WHERE "+COL_SESSION_DONE+"=?)", whereArgs);
this.database.delete(TABLE_CHILD_THREE, COL_THREE_FK_SESSION+" IN (SELECT "+COL_SESSION_ID+" FROM "+TABLE_SESSIONS+" WHERE "+COL_SESSION_DONE+"=?)", whereArgs); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:51:49.277

您可以为每个表创建触发器：

```
CREATE TRIGGER delete_cascade AFTER DELETE ON parentTable
BEGIN
    DELETE FROM childTable child WHERE child.parent_id=OLD.id;
END; 
```

在事务中运行它。

[更多关于触发器](http://www.sqlite.org/lang_createtrigger.html)

# actionscript-3 - 检测 AIR 应用程序是否在手机或其他可以拨打电话的设备上运行？

> ID：11415069
> 
> 赞同：0
> 
> 时间：2012-07-10T14:04:54.013
> 
> 标签：actionscript-3, apache-flex, air

我有一个在 iDevice 和 Android 上运行的 AIR 应用程序，适用于平板电脑和手机。

我正在尝试添加将显示的电话号码转换为允许用户拨打该号码的链接的功能，但我只希望这发生在可以实际拨打电话的设备上（即主要在手机上，而不是平板电脑上）。

有没有一种简单的方法可以检测应用程序是否在手机上运行？

# java - Junit + Ant + Eclipse 单元测试尝试运行但总是返回 1 次执行

> ID：11415070
> 
> 赞同：1
> 
> 时间：2012-07-10T14:04:57.170
> 
> 标签：java, ant, junit

我有一个通过 Eclipse 运行的 ant 任务，但无法正确执行测试用例。Ant 的输出如下：

```
[junit] Running my.custom.test.GoTest   
[junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 seconds   
[junit] Test my.custom.test.GoTest FAILED 
```

最小可能的 Ant 脚本：

```
<project>
    <target name="test">  
      <javac srcdir="Test/src" destdir="Test/bin" />  
      <junit fork="true" printsummary="true">  
          <batchtest>   
             <fileset dir="Test/test">  
                 <include name="**/*Test.*"/>  
             </fileset> 
          </batchtest>  
      </junit>  
    </target>  
</project> 
```

Java 文件：

```
package my.custom.test  

public class GoTest  
{  
     @Test
     public void test_1() throws Exception  
     {  
         assertTrue(true);  
     }    
     @Test
     public void test_2() throws Exception  
     {  
         assertFalse(false);  
     } 
} 
```

我希望 ant junit 任务的上述输出能够产生两个正在运行的测试。但是，只有一个正在运行。我正在寻找有关为什么会发生这种情况或是否存在我遗漏的配置问题的任何推理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:22:43.983

如果其他人遇到同样的问题或非常相似的问题，以下更改将非常有用：

```
<junit fork="true" printsummary="true">    
          <formatter type="plain" usefile="false" />
          <batchtest>   
             <fileset dir="Test/test">  
                 <include name="**/*Test.*"/>  
             </fileset> 
          </batchtest>  
</junit> 
```

这导致我`ClassNotFoundException`

# backbone.js - 骨干路由器不使用样板工作

> ID：11415074
> 
> 赞同：3
> 
> 时间：2012-07-10T14:05:11.497
> 
> 标签：backbone.js, backbone-routing

好的，我认为这很简单，但是我很愚蠢地看到它。这是我在主干中使用主干样板方法的代码

```
require([
  "app",

  // Libs
  "jquery",
  "backbone",

  // Modules
  "modules/example"
],

function(app, $, Backbone, Example) {

  // Defining the application router, you can attach sub routers here.
  var Router = Backbone.Router.extend({
    routes: {
      "": "index",
      "item" : 'item'
    },

    index: function() 
    {
      console.info('Index Function');
      var tutorial = new Example.Views.Tutorial();

      // Attach the tutorial to the DOM
      tutorial.$el.appendTo("#main");

      // Render the tutorial.
      tutorial.render();
    },

    item: function()
    {
        console.info('Item View');
    }
  });

  // Treat the jQuery ready function as the entry point to the application.
  // Inside this function, kick-off all initialization, everything up to this
  // point should be definitions.
  $(function() {
    // Define your master router on the application namespace and trigger all
    // navigation from this instance.
    app.router = new Router();

    // Trigger the initial route and enable HTML5 History API support
    Backbone.history.start({ pushState: true, root: '/reel' });
  });

  // All navigation that is relative should be passed through the navigate
  // method, to be processed by the router.  If the link has a data-bypass
  // attribute, bypass the delegation completely.
  $(document).on("click", "a:not([data-bypass])", function(evt) {
    // Get the anchor href and protcol
    var href = $(this).attr("href");
    var protocol = this.protocol + "//";

    // Ensure the protocol is not part of URL, meaning its relative.
    if (href && href.slice(0, protocol.length) !== protocol &&
        href.indexOf("javascript:") !== 0) {
      // Stop the default event to ensure the link will not cause a page
      // refresh.
      evt.preventDefault();

      // `Backbone.history.navigate` is sufficient for all Routers and will
      // trigger the correct events.  The Router's internal `navigate` method
      // calls this anyways.
      Backbone.history.navigate(href, true);
    }
  });

}); 
```

我正在运行这个 MAMP 服务器，当我输入 Localhost:8888/reel 时，我得到了样板文件附带的示例索引页面。但是，当我输入 Localhost:8888/reel/item 或 Localhost:8888/reel/#item 时，我要么得到，要么找不到页面或将其定向回我的索引页面。

我的问题是我做错了什么。我需要使用 htaccess 吗？这似乎不对。有没有办法使用主干对此进行排序。对不起，如果这真的很简单，只是无法理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:42:17.970

问题可能在于 pushState 标志。

随着请求一直到服务器，它会看到完整的 url 并用它会做的任何事情来响应它......

如果你有一个它有用吗

```
 $(function (){
       setTimeout(navMe, 2000);
 });
 function navMe() {
      backbone.navigate("item");
 } 
```

这样加载后 2 秒，它将导航到项目视图，您知道这是因为请求进入服务器而不是主干。

# vb.net - Twitterizer - TwitterStatusCollectionResponse ResponseObject 什么都没有

> ID：11415076
> 
> 赞同：1
> 
> 时间：2012-07-10T14:05:15.097
> 
> 标签：vb.net, twitterizer

我正在尝试获取我的用户帐户的时间线，以便我可以在我们的网站上发布推文。但是，TwitterStatusCollectionResponse ResponseObject 始终是空的。Content 属性看起来是一个有效的 json 响应。结果属性为“未知”。这是我的代码：

```
Dim tokens As New OAuthTokens()
    tokens.AccessToken = "XX"
    tokens.AccessTokenSecret = "XX"
    tokens.ConsumerKey = "XX"
    tokens.ConsumerSecret = "XX"

    Dim options As New SearchOptions()
    options.PageNumber = 2
    options.NumberPerPage = 2

    Dim timelineOptions As New TimelineOptions
    timelineOptions.IncludeRetweets = False
    timelineOptions.Count = 5

    Dim statusCollectionResponse As TwitterResponse(Of TwitterStatusCollection) = TwitterTimeline.HomeTimeline(tokens, timelineOptions)
'this next line errors.....
    For Each status In statusCollectionResponse.ResponseObject

    next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:40:40.173

打赌你有这个版本的nuget？一段时间以来，通过 nuget 的 twitterizer 一直存在问题，主要是由于 json.net 版本不兼容。我敢打赌，如果你现在需要它，你可以得到一个旧的 json.net 并暂时解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:31:30.657

看起来这是作者正在修复的一个已知错误。 [http://forums.twitterizer.net/viewtopic.php?f=9&t=3721&p=5568&hilit=TwitterResponse+Of+TwitterStatusCollection+#p5568](http://forums.twitterizer.net/viewtopic.php?f=9&t=3721&p=5568&hilit=TwitterResponse+Of+TwitterStatusCollection+#p5568)

我会等待下一个版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:31:17.033

刚刚写了这个小测试，看起来效果很好。您可以使用 UerTimelineOptions 中的 UserId 定位用户，祝您好运。

```
'Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
'    Dim s As New UserTimelineOptions
'    s.Count = 3000
'    s.UseSSL = True
'    s.APIBaseAddress = "http://api.twitter.com/1/"
'    s.IncludeRetweets = False
'    s.UserId = 24769625
'    Dim T As TwitterResponse(Of TwitterStatusCollection) = TwitterTimeline.UserTimeline(tokens, s)
'    For Each Tweet As TwitterStatus In T.ResponseObject
'        Console.WriteLine(Tweet.User.ScreenName & ": " & Tweet.Text)

'    Next

'End Sub 
```

# c++ - 基于 malloc/free 的 STL 分配器

> ID：11415082
> 
> 赞同：11
> 
> 时间：2012-07-10T14:05:35.123
> 
> 标签：c++, stl, allocator

STL 中是否有基于 malloc/free 的分配器？如果没有，有人知道简单的复制/粘贴吗？我需要一张不能调用 new/delete 的地图。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T16:30:02.133

首先，我要注意更改映射本身的分配器不会更改存储*在*映射中的对象使用的分配。例如，如果您执行以下操作：

```
std::map<std::string, int, my_allocator<std::pair<const std::string, int> > m; 
```

映射本身将使用指定的分配器分配内存，*但是*当`std::string`映射中的 s 分配内存时，它们仍将使用默认分配器（它将使用`new`and `delete`。因此，如果您需要避免`new`并且`delete`通常，您必须确保不仅地图本身使用了正确的分配器，而且它存储的任何对象都这样做（我知道这可能是显而易见的，但我忽略了它，所以也许值得一提）。

有了这个附带条件，继续使用代码：

```
#ifndef ALLOCATOR_H_INC_
#define ALLOCATOR_H_INC_

#include <stdlib.h>
#include <new>
#include <limits>

namespace JVC {
template <class T> 
struct allocator {
    typedef size_t size_type;
    typedef ptrdiff_t difference_type;
    typedef T* pointer;
    typedef const T* const_pointer;
    typedef T& reference;
    typedef const T& const_reference;
    typedef T value_type;

    template <class U> struct rebind { typedef allocator<U> other; };
    allocator() throw() {}
    allocator(const allocator&) throw() {}

    template <class U> allocator(const allocator<U>&) throw(){}

    ~allocator() throw() {}

    pointer address(reference x) const { return &x; }
    const_pointer address(const_reference x) const { return &x; }

    pointer allocate(size_type s, void const * = 0) {
        if (0 == s)
            return NULL;
        pointer temp = (pointer)malloc(s * sizeof(T)); 
        if (temp == NULL)
            throw std::bad_alloc();
        return temp;
    }

    void deallocate(pointer p, size_type) {
        free(p);
    }

    size_type max_size() const throw() { 
        return std::numeric_limits<size_t>::max() / sizeof(T); 
    }

    void construct(pointer p, const T& val) {
        new((void *)p) T(val);
    }

    void destroy(pointer p) {
        p->~T();
    }
};
}

#endif 
```

而且，一点测试代码：

```
#include <map>
#include <vector>
#include <iostream>
#include <string>
#include <iterator>
#include "allocator.h"

// Technically this isn't allowed, but it's only demo code, so we'll live with it.
namespace std { 
std::ostream &operator<<(std::ostream &os, std::pair<std::string, int> const &c) { 
    return os << c.first << ": " << c.second;
}
}

int main() { 
    std::map<std::string, int, std::less<std::string>, 
             JVC::allocator<std::pair<const std::string, int> > > stuff;

    stuff["string 1"] = 1;
    stuff["string 2"] = 2;
    stuff["string 3"] = 3;

    std::copy(stuff.begin(), stuff.end(), 
        std::ostream_iterator<std::pair<std::string, int> >(std::cout, "\n"));

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-09T20:22:59.837

确实，正如@MichaelBurr 所建议的那样，Stephen J，Lavavej 的“分配器”就是您正在寻找的东西。[我今天刚刚在@Arnaud 的这个答案](https://stackoverflow.com/a/36521845/1593077)中获得了更新和美化的代码，请看一看。

# visual-studio - 是否有 Visual Studio 的工具可以显示所有调用函数的列表？

> ID：11415084
> 
> 赞同：4
> 
> 时间：2012-07-10T14:05:41.580
> 
> 标签：visual-studio

在调试应用程序时，查看调用方法的顺序可能很有用。可以在每个方法中编写 Debug.WriteLine("Called MethodName") 但我的项目中有大量方法。

是否有记录方法调用的工具？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T05:08:51.083

[运行时流程](http://www.svprogramming.net/runtime-flow/index.html)（由我开发）显示 .NET 应用程序中的所有函数调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:11:09.823

正如评论中提到的，[Visual Studio 调用堆栈](http://msdn.microsoft.com/en-us/library/a3694ts5.aspx)窗口已经实现了这一点。

但是，如果您真的想要更多信息，您可以随时查看添加[跟踪](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.aspx)信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:16:42.983

您可以使用 AOP（面向方面​​的编程）框架让您的生活更轻松一些。

这里有一个如何使用 PostSharp 记录方法调用的工作示例：http: [//www.codeproject.com/Articles/337564/Aspect-Oriented-Programming-Using-Csharp-and-PostS](http://www.codeproject.com/Articles/337564/Aspect-Oriented-Programming-Using-Csharp-and-PostS)

# java - 避免实例化

> ID：11415090
> 
> 赞同：4
> 
> 时间：2012-07-10T14:05:53.100
> 
> 标签：java, inheritance, subclass, pojo, superclass

我有一组具有共同超类的 POJO。*它们存储在superclass*类型的二维数组中。现在，我想从数组中获取一个对象并使用*子类*的方法。这意味着我必须将它们强制转换为*subclass*。有没有办法在不使用*instanceof*的情况下做到这一点？

**更新：**作为一个具体示例： http: [//obviam.net/index.php/the-mvc-pattern-tutorial-building-games/](http://obviam.net/index.php/the-mvc-pattern-tutorial-building-games/)请参阅：*“单击敌人时添加新动作（攻击）”*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T14:09:23.650

是的 - 您可以通过反转流程来做到这一点：当基类的实例是特定类型时，您的代码不会做某事，而是将操作项传递给对象，并让对象决定是否执行它。[这是访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)背后的基本技巧。

```
interface DoSomething {
    void act();
}
abstract class AbstractBaseClass {
    abstract void performAction(DoSomething ds);
}
class FirstSubclass extends AbstractBaseClass {
    public void performAction(DoSomething ds) {
        ds.act();
    }
}
class SecondSubclass extends AbstractBaseClass {
    public void performAction(DoSomething ds) {
        // Do nothing
    }
}

AbstractBaseClass array[] = new AbstractBaseClass[] {
    new FirstSubclass()
,   new FirstSubclass()
,   new SecondSubclass()
,   new FirstSubclass()
,   new SecondSubclass()
};
for (AbstractBaseClass b : array) {
    b.performAction(new DoSomething() {
        public void act() {
            System.out.println("Hello, I'm here!");
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T14:08:26.103

如果您*知道*它们是子类类型，那么只需直接转换它们而无需`instanceof`检查。

但是将它们放在超类类型的数组中是*告诉*编译器丢弃它们实际上是子类类型的信息。要么你的超类应该公开这些方法（可能是抽象的），要么你的数组应该是子类类型（所以你不会告诉编译器忘记对象的实际类型），或者你必须把它吸干并做演员（可能与`instanceof`测试）。

唯一值得注意的替代方案是您可以尝试使用访问者模式，该模式将操作传递给对象并让对象决定如何处理它。这使您可以覆盖类以根据其运行时类型忽略或执行操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T14:09:49.300

您可以尝试使用访问者设计模式。 [http://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)

你要问自己，为什么你需要知道它们的类型，也许这可以用超类中的抽象方法来代替，每个人都可以根据想要的结果来实现。

```
abstract class A{
    abstract void visit();
}

class B extends A{
    void visit() { print("B"); }
}

class C extends A {
    void visit() { print("C"); }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T14:11:39.023

我会避免首先铸造它们。

真正考虑一下您要做什么，以及它们是否应该像这样在同一个集合中。

如果你有这样的事情

```
for(MyObj o : array) {
   if(o instanceof A) {
      ((A)o).doA();
   }
   if(o instanceof B) {
      ((B)o).doB();
   }
} 
```

考虑一下

```
abstract class MyObj {
    abstract void doIt();
}

class A {
    void doIt() { doA(); }
}

class B {
    void doIt() { doB(); }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T14:12:53.423

在超类中公开方法，然后使用覆盖。在基类中提供一个空实现，以便子类可以在需要时忽略该操作。

# objective-c - 定位子视图以进行旋转

> ID：11415097
> 
> 赞同：0
> 
> 时间：2012-07-10T14:06:25.877
> 
> 标签：objective-c, ios, uiview

我正在寻找定位 UIView 子视图的最佳技术，以便考虑旋转。子视图的定位基于 UIView 的框架。

我的基本场景是一个顶级模态 UIViewController，它的视图包含一堆子视图。我得到了很好的旋转通知，但我正在努力寻找最好的设计模式，以便我的子视图在正常和旋转期间都得到纠正。

我正在使用 layoutSubviews 进行定位。layoutSubviews 在正常情况下（在视图创建期间）和旋转期间都被调用。问题是当它在旋转过程中被调用时，框架的宽度/高度还没有被翻转。因此，似乎我无法在此功能期间可靠地进行子视图定位。这似乎是设计中的一个重大缺陷，因为这正是这种方法的目的，对吧？

相反，当我现在正在做的是在我自己的函数中定位子视图，传递一个 CGRect 框架，我在旋转期间翻转并在正常子视图创建期间不理会（self.frame）。这个对吗？更好的解决方案？

谢谢。

# java - 修改从 XML 生成的 JAXB 类并自定义 JAXB 解组

> ID：11415098
> 
> 赞同：1
> 
> 时间：2012-07-10T14:06:30.977
> 
> 标签：java, xml, jaxb, marshalling

我的 XML/XSD 中很少有元素，例如`<TestElement tc="222">SomeValue</TestElement>`. 根据 XSD tc，它的值属于另一个只有键值对的元素。

```
<xsd:element ref="TestElement" minOccurs="0" />
<xsd:element name="TestElement" type="SUBTYPE_CODES" />
<xsd:complexType name="SUBTYPE_CODES">
        <xsd:simpleContent>
            <xsd:extension base="xsd:string">
                <xsd:attribute name="tc" use="required" type="TRANS_MODE_CODES_TC" />
            </xsd:extension>
        </xsd:simpleContent>
    </xsd:complexType> 
```

这样，默认情况下，JAXB 已经为这个元素生成了单独的类，其中包含两个字符串键和值。
JAXB 生成的元素

```
@XmlElement(name = "TestElement")
 protected SUBTYPECODES testElement; 
```

属性类：

```
@XmlType(name = "SUBTYPE_CODES", propOrder = {
    "value"
})
public class SUBTYPECODES {

    @XmlValue
    protected String value;
    @XmlAttribute(name = "tc", required = true)
    protected BigInteger tc;
} 
```

现在，每种属性类型都有一千多个类。我将使用这些类作为 Hibernate 的实体类。

我想在 JAXB 类中将其更改为如下所示的内容，并删除所有特定于属性的类。

```
protected String testElementTC;
protected String testElementValue; 
```

如何在 JAXB 生成的类中声明上述变量而不影响编组/解组？

# javascript - 计算两个 GPS 坐标之间的罗盘方位问题

> ID：11415106
> 
> 赞同：8
> 
> 时间：2012-07-10T14:06:57.520
> 
> 标签：javascript, geolocation

在我的 webapp 中，有一个来自数据库查询的 JSON 数据响应，其中包括 1 到 n 个位置的纬度/经度坐标。我想计算从该`data[i]`位置到当前位置的方位。

我一直在修改[这里](http://www.movable-type.co.uk/scripts/latlong.html)的代码，但是返回的方位不正确。

```
//starting lat/long along with converting lat to rads
var endLat = toRad(location.lat());        
var endLong = location.lng();

//loop over response, calculate new headings for links and add link to array
for(var i=0; i<data.length; i++){

  //this link's lat/long coordinates, convert lat to rads
  var startLat = toRad(data[i].lat);
  var startLong = data[i].lon;

  //get the delta values between start and end coordinates in rads
  var dLong = toRad(endLong - startLong);

  //calculate 
  var y = Math.sin(dLong)*Math.cos(endLong);
  var x = Math.cos(startLat)*Math.sin(endLat)-Math.sin(startLat)*Math.cos(endLat)*Math.cos(dLong);
  var bearing = Math.atan(y, x);
  bearing = (toDeg(bearing) + 360) % 360;

  panoLinks.push({'heading': bearing, 'description': data[i].description, 'pano': data[i].description});
}

//radian/degree conversions
function toRad(convert){
  return convert * Math.PI/180;
}

function toDeg(convert){
  return convert * 180/Math.PI;
} 
```

使用上面的函数和值

```
startLat= 43.6822, converts to 0.7623982145146669 radians
startLong= -70.450769

endLat= 43.682211, converts to 0.7623984065008848 radians
endLong= -70.45070

dLong = startLong - endLong, converts to 0.0000011170107216805305 radians 
```

导致罗盘度数

```
bearing= 0.000014910023935499339 
```

这绝对是关闭的。我哪里出错了？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T14:18:25.137

试一试，我这辈子都不记得我在哪里得到它了......

```
 /**
     * Calculate the bearing between two positions as a value from 0-360
     *
     * @param lat1 - The latitude of the first position
     * @param lng1 - The longitude of the first position
     * @param lat2 - The latitude of the second position
     * @param lng2 - The longitude of the second position
     *
     * @return int - The bearing between 0 and 360
     */
    bearing : function (lat1,lng1,lat2,lng2) {
        var dLon = (lng2-lng1);
        var y = Math.sin(dLon) * Math.cos(lat2);
        var x = Math.cos(lat1)*Math.sin(lat2) - Math.sin(lat1)*Math.cos(lat2)*Math.cos(dLon);
        var brng = this._toDeg(Math.atan2(y, x));
        return 360 - ((brng + 360) % 360);
    },

   /**
     * Since not all browsers implement this we have our own utility that will
     * convert from degrees into radians
     *
     * @param deg - The degrees to be converted into radians
     * @return radians
     */
    _toRad : function(deg) {
         return deg * Math.PI / 180;
    },

    /**
     * Since not all browsers implement this we have our own utility that will
     * convert from radians into degrees
     *
     * @param rad - The radians to be converted into degrees
     * @return degrees
     */
    _toDeg : function(rad) {
        return rad * 180 / Math.PI;
    }, 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-14T09:32:48.357

这是对已接受答案的编辑，并进行了一些修改，使其对我有用（主要是在 lat,lng 值上使用 toRad 函数）。

```
 var geo = {
        /**
         * Calculate the bearing between two positions as a value from 0-360
         *
         * @param lat1 - The latitude of the first position
         * @param lng1 - The longitude of the first position
         * @param lat2 - The latitude of the second position
         * @param lng2 - The longitude of the second position
         *
         * @return int - The bearing between 0 and 360
         */
        bearing : function (lat1,lng1,lat2,lng2) {
            var dLon = this._toRad(lng2-lng1);
            var y = Math.sin(dLon) * Math.cos(this._toRad(lat2));
            var x = Math.cos(this._toRad(lat1))*Math.sin(this._toRad(lat2)) - Math.sin(this._toRad(lat1))*Math.cos(this._toRad(lat2))*Math.cos(dLon);
            var brng = this._toDeg(Math.atan2(y, x));
            return ((brng + 360) % 360);
        },

       /**
         * Since not all browsers implement this we have our own utility that will
         * convert from degrees into radians
         *
         * @param deg - The degrees to be converted into radians
         * @return radians
         */
        _toRad : function(deg) {
             return deg * Math.PI / 180;
        },

        /**
         * Since not all browsers implement this we have our own utility that will
         * convert from radians into degrees
         *
         * @param rad - The radians to be converted into degrees
         * @return degrees
         */
        _toDeg : function(rad) {
            return rad * 180 / Math.PI;
        },
    };

    /** Usage **/
    var myInitialBearing = geo.bearing(0,0,45,45); 
```

在以下网址查找理论和在线计算器：[http ://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T15:21:04.290

如果你想要一个非常粗略的短距离方法，你可以使用 6,378,137m 的地球半径（WGS84 椭球的半长轴长度）根据经纬度差异计算三角形的边。然后计算合适的方位角。这将是一个真正的方位，但可能在短距离内足够接近。

您需要将其留给用户来计算当地的磁偏角。

例如，对于您的示例：

```
startLat  = 43.6822
startLong = -70.450769

endLat  = 43.682211
endLong = -70.45070

diff lat  = 0.000011 = 1.22m
diff long = 0.000069 = 7.68m 
```

终点在起点的北方和东方，因此可以通过以下方式找到方位角：

```
tan a = 7.68 / 1.22
    a = 81° 
```

所以方向大约是[East by North](http://en.wikipedia.org/wiki/Boxing_the_compass)。

这可能应该在制图和测量线程中。一旦你完成了数学计算，就来这里寻求解决方案。

### 编辑

要将纬度转换为米，首先计算赤道（或任何大圆）处的地球周长：

```
c = 2πR where r = 6378137m
  = 40,075,000 (approx) 
```

然后得到360°外圆周的比例：

```
dist = c * deg / 360
     = 40,075,000m * 0.000011° / 360°
     = 1.223m 
```

对于经度，距离随着纬度接近极点而变窄，因此使用相同的公式并将结果乘以纬度的余弦：

```
 = 40,075,000m * 0.000069° / 360° * cos(0.000011°)
     = 7.681m 
```

地球半径的值不一定准确，地球不是一个完美的球体（它是一个扁球体，有点像梨形）。在不同的地方使用不同的近似值以获得更高的准确性，但我使用的那个应该足够好。

# grails - Grails 安全检查

> ID：11415113
> 
> 赞同：1
> 
> 时间：2012-07-10T14:07:21.500
> 
> 标签：grails, spring-security, grails-2.0

我正在使用**spring-security-core**并且我有十多个控制器，我想检查用户是否登录了所有操作，我知道 `if(springSecurityService.isLoggedIn())`在所有操作中执行的一种方法，有没有其他方法可以做到，而不是在所有动作/控制器中编写相同的逻辑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:23:50.453

如果您想完全拒绝对操作的访问，有几种方法可以做到。

您可以将`@grails.plugins.springsecurity.Secured`注释放在控制器类或操作方法上。您还可以通过创建请求映射来指定需要通过 URL 进行身份验证的内容。您可以创建一个 Requestmap 域对象，也可以在您`Config.groovy`的`grails.plugins.springsecurity.controllerAnnotations.staticRules`地图中创建一个静态请求映射。

[Spring Security Core 手册](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/5%20Configuring%20Request%20Mappings%20to%20Secure%20URLs.html)中有更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T03:54:40.247

如果是我，我会让[ataylors 更进一步](https://stackoverflow.com/users/190201/ataylor)回答。照他说的做，但不要在所有控制器中复制和粘贴相同的代码，只需将它放在`Controller.groovy`模板中一次，然后运行`generate-all`命令。模板对于这样的事情非常强大，如果您保持模板最新，您可以轻松更改 10 个控制器，或者当您的应用程序发展时根据需要更改 100 个控制器。

如何安装模板：

[http://grails.org/doc/latest/ref/Command%20Line/install-templates.html](http://grails.org/doc/latest/ref/Command%20Line/install-templates.html)

# c - 如何在 C-API 中“%q”格式化 lua_Buffer

> ID：11415114
> 
> 赞同：1
> 
> 时间：2012-07-10T14:07:22.200
> 
> 标签：c, api, lua, lua-api

[string.format](http://www.lua.org/manual/5.2/manual.html#pdf-string.format) ("%q", foo_str) 将格式化一个字符串以添加适当的转义字符，以便安全地读回 Lua 解释器。如何最好地使用此函数从 C-API 格式化 Lua_Buffer？更一般地说，如何从 C-API 访问 string.* 函数？我可以使用[lua_pcall](http://www.lua.org/manual/5.2/manual.html#lua_pcall) ("string.format", ...)，但好奇是否有更直接的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:32:03.897

该`format`函数在模块中被定义为静态的`lstrlib.c`，因此 AFAIK 获得它的唯一方法是通过`string`表。

我想您*可以*查看并调整它`addquoted`以`lstrlib.c`供您使用，但可能更容易调用`string.format`.

# jquery - 持续运行 ajax 请求的更好方法？

> ID：11415118
> 
> 赞同：3
> 
> 时间：2012-07-10T14:07:31.937
> 
> 标签：jquery, ajax, performance, timeout

我目前有以下代码，它将运行一堆 ajax 请求（40-50），然后再次执行它们。（所以基本上永远做他们）

代码：

```
 $(document).ready(function () {
        window.setInterval(function () {
            $('div.env').each(function (index, item) {
                var vm = $(item).text();                    
                var env = "http://localhost:56656/HTML" + vm + ".htm";
                $.ajax(env, {
                    async: false,
                    URL: env,
                    type: "GET",
                    dataType: "html",
                    success: function (data) {
                        //alert("Colouring");
                        var style = $(data).filter('div').attr('style');
                        var styleObj = {};
                        $.each(style.split(';'), function () {
                            var rule = this.split(':');
                            styleObj[$.trim(rule[0])] = $.trim(rule[1]);
                        });

                        $(item).css('background', styleObj.background);

                    },
                    error: function () {

                        $(item).css('background', '#f00');
                    }
                });

            });

        }, 10000);
    }); 
```

如您所见，我目前正在使用超时，它在 IE 上运行特别慢，有时在 chrome 上运行缓慢。当我说慢时，我的意思是所有 ajax 请求都将完成，然后屏幕将刷新更新。在 IE 上一直都是这种情况，偶尔在 Chrome 上也是如此。理想情况下，我希望 ajax 执行它的请求，更新然后执行下一个 ajax 请求。

有更好的方法来不断地执行 AJAX 请求吗？

提前谢谢你，詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:20:34.007

您可能想使用[Caolan 的异步库](https://github.com/caolan/async/)。您的代码可能如下所示（`async.js`当然包括在内）：

```
$(document).ready(function () {
    function call() {
        var calls = [];
        $('div.env').each(function (index, item) {
            calls.push(function(callback) {
                $.ajax({
                    // DO NOT USE async: false!!!!
                    // some ajax settings
                    complete : function() {
                        callback();
                    }
                });
            });
        });
        async.parallel(calls, function() {
            /* This will fire when every call finishes.
               You may want to add timeout here, or else
               you will end up flooded with requests. */
            call();
        });
    };
}); 
```

您应该根据需要对其进行调整（`async`也可以处理错误，阅读文档）。你说你想让他们一个接一个地开火，所以用.`async.series`而不是`async.parallel`.

顺便说一句，这段代码：

```
$.ajax({
    async: false 
```

**纯粹的邪恶！！！**阻止所有其他脚本甚至整个浏览器！！！这可能是您的“慢闪”问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:31:41.087

不确定在您的情况下是否可行，但 Websocket/长轮询解决方案（如 SignalR 或 Node.Js + Socket.IO）通常比连续轮询工作得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:38:42.647

您应该使用`setTimeout()`代替`setInterval()`并执行以下操作：

*   如果请求失败，做任何你想做的事:)
*   如果请求成功，请调用`setTimeout()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:56:51.653

我认为这是一个架构问题，而不是其他任何问题。

我建议重建结构以将数组发送到服务器，并将响应组合到一个 html 页面或[json 对象中](http://www.json.org/)

这样做的原因显然是引用，无论你做什么，40-50 个并发 ajax 请求肯定**总是很慢**，因为即使你的 ajax 成功处理程序（你绑定到成功的函数）在 10 毫秒内完成（它由于其复杂性，肯定不在 IE 上），40 个请求意味着**至少 400ms 独占时间**，导致客户端性能问题。在你的情况下，

```
async: false 
```

甚至将请求时间添加到该独占时间，因此如果您的请求在 10 毫秒内完成（极不可能），您将使用另外 400 毫秒的客户端独占时间。

因此，在客户端搜索解决方案并不是一个真正的选择。

# mysql - SQL - 如果某事为真，如何输出带有二进制指示符的结果集？

> ID：11415120
> 
> 赞同：1
> 
> 时间：2012-07-10T14:07:40.327
> 
> 标签：mysql, sql

我有以下表格：

```
users (id,name)
items (id,title)
users_items (user_id,item_id) 
```

`users`并且`items`应该是不言自明的。`users_items`保存用户是否“收藏”了一个项目。因此，如果 id 为 5 的用户收藏了 id 为 7 的商品，则 users_items 表将分别保存 user_id 和 item_id 的记录 (5,7)。

我希望能够输出所有项目，但在每个项目旁边说明当前登录的用户是否收藏了该项目。

显然，我可以只获取所有项目，然后遍历它们并进行单独的 mysql 调用，以查看是否从 users_items 返回了具有相关用户 ID 和课程 ID 的任何行，但是有没有更好的方法在 1 函数中执行此操作. 也许有一些花哨的加入？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T14:10:59.727

```
SELECT * FROM items LEFT JOIN users_items ON items.id=users_items.item_id AND user_id=1 -- change user_id 
```

在 PHP 中，下一步就是检查它的计算结果是否为真：

```
if ($row['item_id'])
{
    // Yes
}
else {
    // No
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:10:59.587

试试这个`SELECT`查询：

```
SELECT *
FROM items i
LEFT JOIN users_items ui on ui.user_id=i.id  and ui.id = curUserId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:11:04.383

```
select i.id, i.name, count(ui.item_id) 
from items i
left outer users_items ui on i.id = ui.item_id
    and ui.user_id = 123
group by i.id, i.name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:11:33.433

尝试以下操作：

```
SELECT I.*, CASE WHEN UI.item_id IS NULL THEN 'No' ELSE 'Yes' END FavouritedByUser
FROM items I
LEFT JOIN ( SELECT item_id
            FROM users_items 
            WHERE user_id = @CurrentUser) UI
ON I.id = UI.item_id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T14:12:16.007

你可以使用`CASE`这个。

```
SELECT i.*, CASE WHEN ui.user_id IS NOT NULL THEN 1 ELSE 0 END
FROM Item i
LEFT OUTER JOIN User_Item ui on ui.item_id = i.id AND ui.user_id = current_user_id 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T14:14:43.547

```
SELECT i.id, i.title, 
    CASE WHEN ui.item_id IS NOT NULL 
        THEN 'Favorite' 
    ELSE 'Not Favorite'
FROM items i
LEFT JOIN users_items ui ON ui.item_id = i.id
WHERE ui.user_id = some_variable; 
```

# perl - 将元素附加到数组元素中

> ID：11415129
> 
> 赞同：1
> 
> 时间：2012-07-10T14:08:08.087
> 
> 标签：perl

在我的 Perl 程序中，我通过解码来阅读一封电子邮件，并将其拆分为一个数组。在下面的片段中，我正在阅读元素并附加它，直到找到“电子邮件”或“电话”或“GoToAssist”。

```
75  while(!($plain[$j] =~ /[Email|Phone|GoToAssist]/)){     
76      $plain[$x] .= "&nbsp;" . $plain[$j];
77      $j++;
78  } 
```

但是，我收到以下错误：

```
Use of uninitialized value in concatenation (.) or string at test.pl line 76, <GEN0> line 921.
Use of uninitialized value in pattern match (m//) at test.pl line 77, <GEN0> line 921. 
```

代码之前工作正常，我几乎没有改变任何东西。我想知道出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:36:20.743

这不是错误，而是警告。

您收到此警告是因为`$plain[$j]`未定义。

您可以在附加之前使用以下代码检查是否`plain[$j]`已定义：

```
while(!($plain[$j] =~ /[Email|Phone|GoToAssist]/)){     
     if(defined $plain[$j]){
         $plain[$x] .= "&nbsp;" . $plain[$j];
         $j++;
     }
 } 
```

如果这没有帮助，请分享更多代码。

正如@Borodin 指出的那样，您的正则表达式没有做您可能想要的事情。但这与您的问题无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:13:36.037

`$plain[$j]`是未定义的。添加一些打印语句以确定是否`$j`是您所期望的。如果它是错误的，那么找出为什么它以错误的值结束。这是对的，找出为什么`$plain[$j]`会得到错误的值。

# database - Django：查询在管理命令中返回不同的结果

> ID：11415130
> 
> 赞同：1
> 
> 时间：2012-07-10T14:08:09.457
> 
> 标签：database, django, django-models

我有一个 django 应用程序，其模型名为`TestCase`. 当前存储在数据库中的模型实例有 9 个，我可以通过`TestCase.objects.all()`在 shell 中运行来查看它们，并且它们也在我的视图中正确显示。

但是，在我正在运行的管理命令中，相同的查询 ( `TestCase.objects.all()`) 始终返回一个空列表。我已经正确导入了模型，管理命令甚至可以毫无问题地将条目添加到数据库中，因此从数据库中读取应该没有问题。

关于可能导致这种情况的任何想法？

一些上下文：django 应用程序是显示和管理测试用例的前端。管理命令将测试结果读入数据库。我需要在管理命令中访问数据库以将测试运行合并到应用程序中 - 如果测试用例提供了测试运行（整数），则使用它，但如果没有，则该命令将测试运行设置为一加应用程序中已经存在最大测试运行 - 这是我需要访问数据库的地方（使用类似的东西`TestCase.objects.all().aggregate(Max('test_run'))`）。

我正在使用 Django 1.4。

这是管理命令：

```
from django.core.management.base import NoArgsCommand
from django.core.management.base import AppCommand, CommandError
from mainapp.models import TestCase
from django.utils import timezone
from django.db.utils import IntegrityError
from django.conf import settings
from django.core import management
from django.db.models import Max 

import cPickle
import errno

class Command(NoArgsCommand):
  def handle_noargs(self, **options):
    management.call_command('reset', 'mainapp', interactive=False) 
    print "ALL: %s" % TestCase.objects.all()
    self.traverse()

  def traverse(self):
    ... 
```

输出是`ALL: []`。我省略了`traverse()`方法的来源，但在此之前问题是可见的，所以它不应该影响任何东西。

这是 shell 的输出，显示了数据库中的实例：

```
[as@as-mac  ui]$ pm shell
Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from mainapp.models import TestCase
>>> TestCase.objects.all()
[<TestCase: internet explorer 8 on WIN7 at https://www.google.com/ >, <TestCase:     internet explorer 8 on WIN7 at https://www.google.com/ >, <TestCase: internet explorer 8 on WIN7 at https://www.google.com/search?q=mooo >, <TestCase: internet explorer 8 on WIN7 at https://www.google.com/search?q=mooo >, ...]
>>> TestCase.objects.count()
454 
```

请随时询问更多详情！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:52:08.083

您的命令的以下行正在重置数据库并清除数据：

```
management.call_command('reset', 'mainapp', interactive=False) 
```

如果删除此行，shell 和命令中的记录计数将是等效的。

# jquery - jQuery Mobile 列表视图未初始化

> ID：11415137
> 
> 赞同：0
> 
> 时间：2012-07-10T14:08:30.703
> 
> 标签：jquery, listview, jquery-mobile

我有`ul`一个页面，`data-role='listview'`但是当页面正常加载或彻底刷新 jQM 的 ajax 时，jQuery Mobile 不会将它初始化为列表视图。

如果有帮助，我正在使用 rails 3 和 haml。有问题的行是

```
%ul{:data => {:roll => 'listview', :inset => 'true'}} 
```

我正在使用 jQuery 1.7.2 和 jQuery Mobile 1.1.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:11:08.607

我不是很熟悉`haml`。但这也许应该`role`代替`roll`？

# eclipse-rcp - Eclipse RCP 3.7 - 关于对话框中的功能图标不出现

> ID：11415139
> 
> 赞同：2
> 
> 时间：2012-07-10T14:08:41.670
> 
> 标签：eclipse-rcp, about-box

![在此处输入图像描述](../Images/3da4ca353263b5dd69ded239d3966206.png)

我按照[本](http://www.jpedal.org/PDFblog/2010/09/branding-an-eclipse-plugin/)教程进行操作，但功能图标没有出现在关于对话框中。可能是什么原因？

1.  我创建了一个基于功能 X 的产品。
2.  我将插件 Y 定义为功能 X 的品牌插件
3.  我在插件中添加了 about.ini 和一个 32x32 像素的图标。

关于.ini：

```
aboutText=Dicke Alice
featureImage=images/icons/icon_32x32.png 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:26:05.167

看起来该功能的图像只会在部署后显示，但从 IDE 启动时不会显示。

# jquery - 按下 Enter 按钮时 IE 中的事件更改不起作用

> ID：11415142
> 
> 赞同：4
> 
> 时间：2012-07-10T14:09:04.307
> 
> 标签：jquery, internet-explorer

我想执行一个函数来更改输入 [type=text]，这在除 IE 之外的所有浏览器中都可以正常工作。

这是一个例子：

```
$('input.switch').change(function(){
    alert('ok now');    
}); 
```

文本输入如下所示：
`<input class="switch" type="text" value="50000" />`

不要忘记我有很多不同类别的输入！

您对此有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:16:20.170

如果您希望在按 Enter 时激活事件，请注册此事件：

```
$('input.switch:first').keydown(function(e){
    if (e.keyCode==13) { //Enter keycode
        //Do you stuff
    }
}); 
```

Enter 没有激活更改可能是因为文本输入没有失去焦点。

祝你好运！

更新：最新版本的 jQuery 允许您使用以下方法获取焦点元素：`$('*:focus')`. 我相信您应该添加支持 IE 的脚本。对于每个 keydown，如果键是 Enter，则获取焦点输入，将其模糊并触发更改：

```
$('body').keydown(function() {
    if (e.keyCode==13) { //Enter keycode
        $('input:focus').blur().change(); //The blur is to prevent change happen again
    }
}); 
```

我不确定您是否可以强制 IE 在以不同方式按下 Enter 时触发更改。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-04T11:03:27.330

这是针对 IE 的更有针对性的 polyfill：

```
var isIE = !!document.documentMode;
if (isIE) {

    $("body").on("keydown", "input[type='text']", function (e) {

        // Ensure 'change' event is fired on enter in IE
        if ((e.keyCode || e.which) === 13) {
            $(this).blur();
        }
    });
} 
```

# c# - 互操作：具有 C# COM 服务器字节数组参数的 C++ COM 客户端 - 数组是复制入/出还是直接访问？

> ID：11415144
> 
> 赞同：0
> 
> 时间：2012-07-10T14:09:06.630
> 
> 标签：c#, interop, c++-cli, com-interop

我们有一个具有以下接口和类声明的 C#/.Net COM 服务器（COM 可见程序集）：

```
[ComVisible(true)]
[Guid( "..." )]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface ITest
{
    void TestMethod( [In] int nNumElements, 
                     [In, Out, MarshalAs(UnmanagedType.LPArray, SizeParamIndex=0)] byte [] bArray );
}

[ComVisible(true)]
[Guid( "..." )]
[ClassInterface( ClassInterfaceType.None )]
[ProgId( "CSCOMServer.CSTest" )]
public class CSTest : ITest
{
    public void TestMethod( int nNumElements, byte [] bArray )
    {
        for (int i = 0; i < bArray.Length; i++)
        {
            bArray [i] = (byte)i;
        }
    }
} 
```

生成的 IDL/typelib 是：

```
...
interface ITest : IUnknown {
    HRESULT _stdcall TestMethod(
                    [in] long nNumElements, 
                    [in, out] unsigned char* bArray);
};

...
coclass CSTest {
    interface _Object;
    [default] interface ITest;
}; 
```

目标是能够从 C++ COM 客户端使用它，使用以下内容可以正常工作：

```
int iSize = 10;
ITest *test;
byte *buf  = (byte*)CoTaskMemAlloc( iSize * sizeof(byte) );
CoCreateInstance( CLSID_CSTest, NULL, CLSCTX_INPROC_SERVER, IID_ITest, (void **) &test );
test->TestMethod( iSize, buf ); 
```

缓冲区由 C++ 分配并传递给 C# 进行填充。一切正常，在 TestMethod() 完成后，C++ 数组 (buf) 包含由 C# 方法设置的正确值。

问题在于效率：
Interop 包装器是否在编组（“In”阶段）然后返回（“Out”阶段）期间执行数组复制，或者 C# 方法是否直接在传入的内存（可能被固定）上操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:07:01.723

不，这里肯定需要一份副本，因为您要求进行结构更改。CLR*必须*创建一个托管数组对象以满足 byte[] 参数类型要求。并且源数组不能按原样使用，因为它只是一块原始内存。另一种方式 (byte[] to unsigned char*) 可以工作，但这里不是这种情况。

数组的普通 COM 自动化类型是 SAFEARRAY 顺便说一句，没有速度优势，但有更多的 COM 客户端可以使用您的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:58:04.807

在这种情况下，将在非托管代码和托管代码之间传递引用。即使未指定 in/out 参数，“固定优化”也会在某些情况下为您执行此操作（但用作 tlib 始终必须指定 in/out 修饰符）。

您可以假设原始类型的一维数组始终会在同一单元上运行的非托管代码和托管代码之间固定（通过引用传递）。

您可以在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/z6cfh6e6 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/z6cfh6e6(v=vs.80).aspx)

有关“固定优化”的更多信息：http: [//msdn.microsoft.com/en-us/library/23acw07k.aspx](http://msdn.microsoft.com/en-us/library/23acw07k.aspx)

# c# - 麻烦的坏循环

> ID：11415149
> 
> 赞同：-1
> 
> 时间：2012-07-10T14:09:18.510
> 
> 标签：c#, thread-safety

> **可能重复：**
> [从多个线程调用 Console.WriteLine](https://stackoverflow.com/questions/1079980/calling-console-writeline-from-multiple-threads)

我有 C# 的 CONSOLE APPLICATION 测试

问题：

线程安全有 Console.WriteLine 吗？

实际上，

没有例外是可能的：

```
Parallel.For(0, 1000000, p => Console.WriteLine("Hello Dears !")); 
```

感谢您的快速回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:14:53.190

是的，使用控制台 I/O 是线程安全的：

> “使用这些流的 I/O 操作是同步的，这意味着多个线程可以读取或写入流。”

[http://msdn.microsoft.com/en-us/library/system.console.aspx](http://msdn.microsoft.com/en-us/library/system.console.aspx)

相关：[从多个线程调用 Console.WriteLine](https://stackoverflow.com/questions/1079980/calling-console-writeline-from-multiple-threads)

# ruby-on-rails - Activeadmin：允许访客查看/admin/model.xml

> ID：11415156
> 
> 赞同：0
> 
> 时间：2012-07-10T14:09:25.353
> 
> 标签：ruby-on-rails, activeadmin

如何允许匿名用户使用 Activeadmin 查看为模型生成的 XML 页面？

../admin/categories.xml

我尝试添加跳过身份验证过滤器但没有成功。

```
ActiveAdmin.register Category do
  before_filter :authenticate_user!, :except => [:index]
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:06:39.777

如果有人发现这篇文章，只是一个更新。您必须使用 cancan 设置 Activeadmin。

[https://groups.google.com/forum/?fromgroups#!topic/activeadmin/uJCkRkrrfHY](https://groups.google.com/forum/?fromgroups#!topic/activeadmin/uJCkRkrrfHY)

记得使用来自 github 的 Activeadmin 版本。配置后，您将必须启动一个虚拟访客用户 - 将其添加到 application_controller.rb

```
 def authenticate_admin_user!
    current_user ||= AdminUser.new # guest user
  end 
```

现在您必须配置您的 cacan 权限

```
class Ability
  include CanCan::Ability

  def initialize(user)
    if user
      can :manage, :all
    else
      can :read, Category
    end
  end
end 
```

cancan 截屏： [http ://railscasts.com/episodes/192-authorization-with-cancan](http://railscasts.com/episodes/192-authorization-with-cancan)

# java - 如何在 Eclipse 程序中启用 Java 关键字断言？

> ID：11415160
> 
> 赞同：65
> 
> 时间：2012-07-10T14:09:47.123
> 
> 标签：java, eclipse, assert, assertions

如何`assert`在 Eclipse 中启用关键字？

```
public class A
{
    public static void main(String ... args)
    {
        System.out.println(1);
        assert false;
        System.out.println(2);
    }
} 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-07-10T14:30:16.920

再具体一点：

*   去`Run->run configuration`
*   在左侧导航盘中选择`java application`。
*   右键单击和`select New`。
*   选择`Arguments`选项卡
*   添加`-ea`VM 参数。

![在此处输入图像描述](../Images/12bc3338da8ee9434496124ad43e4c19.png)

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-02-14T18:34:59.940

如果有人想**默认启用断言**（与仅对单个运行配置启用它们相反），可以通过以下步骤：

1.  窗口（菜单栏）
2.  优先
3.  爪哇
4.  已安装的 JRE
5.  选择您的 JRE/JDK
6.  按编辑...
7.  默认虚拟机参数
8.  添加-ea

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-10T14:17:47.767

1.  形成菜单栏，选择`Run`-> `Run Configurations...`。
2.  选择`Arguments`选项卡。
3.  添加`-ea`到`VM arguments`.
4.  单击`Apply`。
5.  单击`Run`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T14:12:44.510

您需要运行配置并将 vm 参数添加为“-enableassertions”（或）“-ea”

之后，当您使用 assert 语句运行代码时，您将看到 assert 正在运行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-10T14:17:53.237

Java 引入了`assert`关键字，因此启用源代码级别支持的方法是确保 Eclipse 的 Java 合规级别为 1.4 或更高。（很可能合规水平已经高于...）

要使从 Eclipsed 启动的 Java 应用程序在启用断言检查的情况下运行，请将“-ea”参数添加到启动器配置的“参数”选项卡中的 VM 参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-17T04:14:30.820

如果有人使用 IDEA，`-ea`在某些 IDEA 版本中默认启用，但在其他版本中禁用。要手动配置它，它在`run`-> `edit configuration`->`vm option`

# c# - 设置匿名类型的只读属性

> ID：11415162
> 
> 赞同：5
> 
> 时间：2012-07-10T14:09:55.070
> 
> 标签：c#, .net

我最近在 C# 中遇到了一些相当莫名其妙的事情。在我们的代码库中，我们有一个`TreeNode`类。在更改某些代码时，我发现无法将变量分配给`Nodes`属性。经过仔细检查，很明显该属性是只读的，并且这种行为是可以预料的。

奇怪的是，我们的代码库在此之前一直依赖于为`Nodes`属性分配一些匿名类型，并且编译和工作得很好。

总结一下：为什么这项任务`AddSomeNodes`首先会起作用？

```
using System.Collections.Generic;

namespace ReadOnlyProperty
{
    public class TreeNode
    {
        private readonly IList<TreeNode> _nodes = new List<TreeNode>();

        public IList<TreeNode> Nodes
        {
            get { return _nodes;  }
        }
    }

    public class TreeBuilder
    {
        public IEnumerable<TreeNode> AddSomeNodes()
        {
            yield return new TreeNode
             {
                Nodes = { new TreeNode() }
             };
        }

        public IEnumerable<TreeNode> AddSomeOtherNodes()
        {
            var someNodes = new List<TreeNode>();

            yield return new TreeNode
             {
                Nodes = someNodes
             };
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:15:50.047

`AddSomeNodes` is not creating an instance of `List<TreeNode>` because that syntax is a collection initializer (therefore it is not assigning to `Nodes` meaning it doesn't break the `readonly` contract), the compiler actually translates the collection initializer into calls to `.Add`.

The `AddSomeOtherNodes` call actually tries to re-assign the value, but it is `readonly`. This is also the object initializer syntax, which translates into simple property calls. This property does not have a setter, so that call generates a compiler error. Attempting to add a setter that sets the readonly value will generate another compiler error because it is marked `readonly`.

[From MSDN](http://msdn.microsoft.com/en-us/library/bb384062.aspx):

> By using a collection initializer you do not have to specify multiple calls to the Add method of the class in your source code; the compiler adds the calls.

Also, just to clarify, there are ***no*** anonymous types in play in your code - it is all initializer syntax.

* * *

Unrelated to your question, but in the same area.

Interestingly, the `Nodes = { new TreeNode() }` syntax doesn't work with a local member, it only seems to work when it is nested inside an object initializer or during object assignment:

```
List<int> numbers = { 1, 2, 3, 4 }; // This isn't valid.
List<int> numbers = new List<int> { 1, 2, 3, 4 }; // Valid.

// This is valid, but will NullReferenceException on Numbers
// if NumberContainer doesn't "new" the list internally.
var container = new NumberContainer()  
{
    Numbers = { 1, 2, 3, 4 }
}; 
```

The MSDN documentation doesn't seem to have any clarification on this.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:16:41.157

Your nodes property is not being assigned.

Using the special collection initializer:

```
CollectionProperty = { a, b, c }; 
```

Is changed to:

```
CollectionProperty.Add(a);
CollectionProperty.Add(b);
CollectionProperty.Add(c); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:15:46.590

这不是分配，而是向`ICollection`

```
 Nodes = {new TreeNode() }, that is why it works. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T14:19:20.510

I compiled your code (after removing the AddSomeOtherNodes method) and opened it in Reflector and here is the result:

```
public IEnumerable<TreeNode> AddSomeNodes()
{
    TreeNode iteratorVariable0 = new TreeNode();
    iteratorVariable0.Nodes.Add(new TreeNode());
    yield return iteratorVariable0;
} 
```

As you can see, with this syntax the Add method is called on the Nodes variable.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T14:18:34.007

The compiler equivalent to what happened is this:

```
public IEnumerable<TreeNode> AddSomeNodes()
{
    TreeNode node = new TreeNode();
    node.Nodes.Add(new TreeNode());

    yield return node;
} 
```

The important distinction here is that they used the *collection initializer syntax* to assign the value.

# php - 特殊的 HTML JSON 解析

> ID：11415163
> 
> 赞同：0
> 
> 时间：2012-07-10T14:09:55.117
> 
> 标签：php, iphone, objective-c, json, contao

我有一个这样的 JSON 字符串：

```
a: 2: {
    s: 4: "unit";
    s: 2: "h1";
    s: 5: "value";
    s: 40: "Mercedes-Benz A 45 AMG / 340 PS / Allrad";
} 
```

现在，由于奇怪的键（我认为在 's' 中表示字符串的长度），我不知道该怎么做。

如果我像这样使用它，没有任何东西可以解析它（使用 php json_decode 或使用 obj-c SBJsonParser）。有没有办法在 php 中生成它的 html，或者我怎样才能只读取最后一个值？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:17:55.760

这看起来像序列化数组，但您的字符串绝对无效。(http://php.net/manual/en/function.unserialize.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:13:15.727

这不是一个有效的 JSON，因此没有 json 解析器会读取它，您可以将其视为常规字符串并使用字符串操作来获取您需要的内容。

在 PHP 中为了获取最后一个值：

```
$str = ...//your json string
$lastValue = substr($str,strripos($str,'s:')); 
```

这应该返回（根据您的示例输入）：“40：“Mercedes-Benz A 45 AMG / 340 PS / Allrad”；”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:32:00.103

上面提到的 JSON 格式是绝对无效的。

```
{
    "a": {
        "2": [
            { "s": { "4": "unit" } },
            { "s": { "2": "h1" } },
            { "s": { "5": "value" } },
            { "s": { "40": "Mercedes-Benz A 45 AMG / 340 PS / Allrad" } }
        ]
    }
} 
```

这将是一个[有效](http://jsonlint.com/)的JSON 格式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:22:40.470

我建议将其视为开头的字符串。然后使用字符串操作去掉“a:”和“s:”。其他请求可能会返回其他类型（如果我是正确的，这些字母表示数据类型。）然后您可以尝试使用 JSON 解析器解析它。

虽然不能保证 :) 因为我不确定这些数字是有效的 JSON 还是必须用引号封装。

# java - Java：如何处理 servlet 中的多个会话

> ID：11415166
> 
> 赞同：1
> 
> 时间：2012-07-10T14:10:07.880
> 
> 标签：java, session, jakarta-ee, servlets, session-cookies

我是 Java EE 的新手。我有一个需要用户登录的网站，在用户登录后，我希望用户看到他/她自己的物品（例如：购物车）。

所以这意味着我必须使用会话来完成它。但是如何处理多个会话？

例如，多个用户登录到系统以及同一个 servlet？但是，我可以在一个 servlet 中保留多个会话吗？我是否记录了他们每个人？它是如何工作的？

有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T14:13:39.633

在 servlet 中，您可以访问[`HttpServletRequest`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)它为您提供的[`getSession()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28%29)方法。此方法返回会话对象（本质上是键值映射），每个用户都不同。

如果您将某些东西放入该地图（如购物车），您可以稍后检索它 - 但仅当同一用户再次访问该应用程序时（不一定是相同的 servlet）。

```
public void doGet(HttpServletRequest request, HttpServletResponse response)
      throws IOException, ServletException {

    HttpSession session = request.getSession();
    session.getAttribute("cart");
    //...
    session.setAttribute("cart", whateverYouWant); 
```

会话在 servlet 容器中维护，并通过会话 id（通常是 cookie）进行查找。你不必自己实现任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T14:13:19.517

是的你可以。servlet 容器会为您跟踪它们，因此您不必自己进行簿记。该`Session`对象可以从`HttpServletRequest`您的 servlet 代码中获得。由于您的代码一次只需要关注一个请求，因此处理多个会话通常不会有太大的痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-21T06:59:09.643

要在 Servlet 中处理多个用户登录，请为每个登录创建一个会话：

```
HttpSession session = request.getSession(); 
```

`public HttpSession getSession()` 返回与此请求关联的当前会话，或者如果请求没有会话，则创建一个。

每个会话将**唯一**标识用户。

现在，如果用户想要更改**数据库**中的某些数据，则在创建会话后，使用该会话设置属性，并使用可以唯一标识数据库中用户的信息，例如 email_id 为：

```
session.setAttribute("id",email_id of user); 
```

稍后可以在另一个 Servlet/JSP 中检索此属性，如下所示：

```
String email_id = session.getAttribute("id"); 
```

此属性将有助于识别已向服务器发送请求以更新数据库中的数据或执行其他操作的用户。更多与会话相关的方法，参考链接： [http ://www.javatpoint.com/http-session-in-session-tracking](http://www.javatpoint.com/http-session-in-session-tracking)

# magento - 在一个网站的 magento admin 中启用 authorize.net 测试模式会影响另一个使用相同帐户但不在测试模式下的网站吗？

> ID：11415170
> 
> 赞同：0
> 
> 时间：2012-07-10T14:10:12.210
> 
> 标签：magento, authorize.net

由于我看到 authorize.net 有一个用于测试模式的全局帐户设置，我想知道通过 magento admin 在 authorize.net 帐户上启用测试模式是否有任何风险，使用相同帐户但不在测试中的其他 magento 网站模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:17:16.860

In Authorize.net's API a test mod ise available at the request level using the variable x_test_request.

Looking at magento/app/code/core/Mage/Authorizenet/Model/Directpost/Request.php function setConstantData() you can see that setXTestRequest is called if the test setting is enabled.

If you enable this you won't impact other connections [on different stores], if you the global option from Authorize.net's side clearly it will be global. Either way when dealing with payments you should always test after any change to insure you don't mistakenly lose sales [or charge yourself].

Source: [http://developer.authorize.net/guides/AIM/Test_Transactions/Test_Transactions.htm](http://developer.authorize.net/guides/AIM/Test_Transactions/Test_Transactions.htm)

# symfony - 在 Twig 中翻译父模板块的文本？

> ID：11415171
> 
> 赞同：1
> 
> 时间：2012-07-10T14:10:21.437
> 
> 标签：symfony, twig

我如何翻译父模板中的整个块`page.html.twig`：

```
{# app/Resources/views/page.html.twig #}
{% extends '::bootstrap.html.twig' %}

{% block page %}
    <div class="page-header">
        <h1>{% block header %}{% endblock %} 
        <small>{% block small %}{% endblock %}</small></h1>
    </div>
    <div id="content" class="container-fluid">
        {% block content %}{% endblock %}
    </div>
{% endblock %} 
```

...而不是调用`trans`每个子模板？

```
{# src/AcmeHelloBundle/Resources/views/User/show.html.twig #}
{% extends '::page.html.twig' %}

{% block header %}{% trans %}Utente{% endtrans %}{% endblock %}
{% block small %}{% trans %}dettaglio{% endtrans %}{% endblock %}

{% block content %}{% endblock %} 
```

我试过环绕`{% block header %}`，`{% trans %}`但它抱怨`trans`应该是一个简单的字符串而不是一个表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:16:15.167

没关系。自己`block`直接使用找到的：

```
{% block page %}
<div class="page-header">
    <h1>{{ block('header')|trans }} 
    <small>{{ block('small')|trans }}</small></h1>
</div>
<div id="content" class="container-fluid">
    {% block content %}{% endblock %}
</div>
{% endblock %} 
```

我不会删除这个问题，因为我找不到任何类似的......

# javascript - 如何检查是否在 Facebook Canvas 内

> ID：11415172
> 
> 赞同：1
> 
> 时间：2012-07-10T14:10:23.710
> 
> 标签：javascript, facebook

[Facebook 应用程序，如何使用 PHP 检查是否在 Facebook 画布/独立内部？](http://facebook.stackoverflow.com/questions/2553442/facebook-application-how-to-check-if-inside-facebook-canvas-standalone-using)

这个问题与上述问题完全相同，但上述方法的解决方案现在似乎不起作用，有什么更新吗？关于 HTTP_REFERRER 标头，我在 Firefox 中发现了一些问题。还有其他黑客吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:14:07.187

通过有效`signed_request`可能是测试这一点的一种方法......

只有**您的**应用程序`APP_SECRET`才能对其进行解码，`signed_request`因此不太可能有人能够欺骗有效的`signed_request`; 如果他们能够做到这一点 - 那么他们几乎绕过了 Facebook 的安全性。

[如果他们设法做到了，那么*也许*他们*应该*能够在 Facebook 之外使用您的应用程序；）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:56:42.817

我只是这样做（$this <--- 是一个 facebook sdk 对象）：

```
$this->signedRequest = $this->getSignedRequest();
if(!$this->signedRequest){
    show_404();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T15:32:49.603

尝试这个：

```
public static function referrerIsFacebookCanvasApp() {
    if (stripos($_SERVER['HTTP_REFERER'], "apps.facebook.com") === false || strpos($_SERVER['HTTP_REFERER'], "facebook.com/l.php?u=") !== false) {
        return false;
    }
    return true;
} 
```

# .htaccess - .htaccess 域语言重定向到文件夹

> ID：11415173
> 
> 赞同：0
> 
> 时间：2012-07-10T14:10:27.927
> 
> 标签：.htaccess, mod-rewrite

我有这种情况：

*   当有人访问 www.example.com 时，它应该显示 www.example.com/en/
*   当有人访问 www.example.fr 时，它应该显示 www.example.com/fr/

你能帮我设置htaccess吗？

感谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:14:25.373

.htaccess 的简单解决方案：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} www.example.fr$ [NC]
RewriteRule ^$ http://www.example.com/fr/ [L,R=301] 
RewriteCond %{HTTP_HOST} www.example.com$ [NC]
RewriteRule ^$ http://www.example.com/en/ [L,R=301] 
```

# mysql - 如何在 2 个列值之间返回 MySql 记录？

> ID：11415177
> 
> 赞同：1
> 
> 时间：2012-07-10T14:10:42.357
> 
> 标签：mysql

我们有 3 个特定的列 orderTotalFrom 和 orderTotalTo 和 ShippingPrice。我们正在尝试确定价格是否介于 2 列值之间。例如，假设我们有一个 250.0000 的订单，我们希望返回运费为 0.0000 的行

```
orderTotalFrom orderTotalTo   ShippingPrice
0.0000         19.9900        6.9500
20.0000        39.9900        7.9500
40.0000        59.9900        8.9500
60.0000        74.9900        9.9500
75.0000        999999.0000    0.0000 
```

请告诉我这是如何在 MySql 中完成的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T14:13:10.110

```
select ShippingPrice 
from MyTable
where 250.0000 between orderTotalFrom and orderTotalTo 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T14:13:31.677

```
SELECT ShippingPrice FROM myTable WHERE 250 BETWEEN orderTotalFrom AND orderTotalTo 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T14:13:38.787

```
SELECT * FROM table WHERE  250000 between orderTotalFrom and orderTotalTo 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-10T14:13:59.933

```
select ShippingPrice
from your_table
where orderTotalFrom <= 250.0000
and orderTotalTo >= 250.0000 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T14:13:16.537

```
SELECT ShippingPrice FROM table WHERE orderTotalFrom<=xxx AND orderTotalTo>=xxx; 
```

# javascript - 在 js 中使用 thrift 而不依赖 thrift RPC

> ID：11415183
> 
> 赞同：0
> 
> 时间：2012-07-10T14:11:09.033
> 
> 标签：javascript, thrift, thrift-protocol

我目前正在开发一个项目，该项目需要使用多种编程语言（包括 js）的多个平台与 Java 服务器进行通信。

目前该协议正在使用 thrift 序列化所有平台上的数据，但每个平台都使用自己的传输机制将数据传输到服务器（在那里它被反序列化）。

但是在 js 中，由于它缺少二进制协议（TBinaryProtocol），这似乎是不可能的。

是不是这样，js就不能简单的把数据序列化（我不介意把数据序列化成json-thrift格式）再用其他方法发送？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:00:43.440

Thrift 包括带有 TJSONProtocol 实现的 js 库，以及基于 XMLHttpRequest 的传输。它作为 TServlet+TJSONProtocol 服务器的客户端应该可以正常工作，因此您甚至不需要其他方式来发送数据。

# android - 强制 ExpandableListView 向下移动其他项目

> ID：11415188
> 
> 赞同：0
> 
> 时间：2012-07-10T14:11:18.307
> 
> 标签：android, android-layout, layout, expandablelistview

我的布局是一个带有一些 TextView 和其他控件的 ScrollView 以及一个 ExpandableListView。

我想要做的是当展开 ExpandableListView 时，它下面的控件会向下移动，然后在折叠时再次移动，所有控件都会向上移动，只有 Expendables 组变为可见。

问题是当使用`wrap_content`expandView 的高度时，它的扩展什么也不显示，只有指示器（小箭头）显示它已扩展，并且当明确使用某些数字时，例如。200dp，expandView 的最低项未显示。（因为一起使用了两个 Scrolling 小部件）。

这是我的简化布局。

```
<ScrollView
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:ignore="HardcodedText" >
    <LinearLayout>
       //some controls
    </LinearLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <ExpandableListView
            android:id="@+id/lstDrugs"
            android:layout_width="match_parent"

//HERE is the point that wrap_content only shows the groups header

            android:layout_height=**"wrap_content"**
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:divider="@drawable/dividergradient"
            android:dividerHeight="2dp" >
        </ExpandableListView>

        <Button
            android:id="@+id/btnAddDrug"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/lstDrugs"
            android:text="Add" />
    </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:13:21.227

我刚刚在[这个](https://stackoverflow.com/q/6121186/91055)帖子中找到了我的答案。

问题在于在 ScrollView 中使用 List。要处理它，您应该使用 ScrollView 以外的布局（例如 LinearLayout）并将其他小部件添加为列表的**页眉**和**页脚**。这将启用视图的滚动以及列表的扩展。

# vb.net - Autodesk Inventor 附加模块不加载

> ID：11415194
> 
> 赞同：0
> 
> 时间：2012-07-10T14:11:32.217
> 
> 标签：vb.net, sample, autodesk

我已安装 Autodesk Inventor 2012 及其 SDK，包括插件创建向导。我创建了一个加载项项目（在 VB.NET 中），并使用了 SimpleAddIn 示例中提供的代码。.addin 文件指向编译的 dll 输出的位置。

但是，我遇到了以下问题。加载 Inventor 时，不会触发附加模块激活功能中的单个断点。此外，当我调用加载项列表时，我的加载项在列表中显示为未加载，但是我将其标记为未加载。

这种行为的原因可能是什么？这怎么能解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:49:55.037

好吧，我假设您正在使用通过 Manifests 部署的 RegistryFreeAddins... 从您的 AddIn 在 AddIn Manager 中列出的事实，我得出结论，注册有效，但在运行时加载失败。这可能有以下主要原因：

*   缺少依赖项（如果您使用第三方程序集）
*   BadImageFormatException（您的 AddIn 在 x86 中编译并安装了 X64 Inventor，以防万一您有 64 位操作系统）

查看 VisualStudio 中的调试输出。您是否看到任何与您的插件相关的异常消息？如果没有，您可以尝试在 VS 中激活“托管调试助手”（尤其是对于 BadImageFormat- 和 FileNotFoundException(s)）。只需谷歌上面的短语，看看它是如何完成的。

希望我能帮忙:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:10:19.807

您的目标是 .Net 4 吗？Inventor 2012 似乎只支持 .net 3.5。我遇到了同样的问题，更改为 3.5 使我的插件正确加载。

[http://forums.autodesk.com/t5/Autodesk-Inventor-Customization/Registry-free-addin-won-t-load/td-p/3488178](http://forums.autodesk.com/t5/Autodesk-Inventor-Customization/Registry-free-addin-won-t-load/td-p/3488178)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-26T18:19:26.593

如果出于某种原因，在激活过程中库加载崩溃，您将无法调试解决方案。

所以，清理激活子并只保留必要的调用，然后再试一次。

如果仍然无法正常工作，请 PM 我激活程序，我会帮助您。

# javascript - 通过javascript加载大表的最优化方式

> ID：11415197
> 
> 赞同：2
> 
> 时间：2012-07-10T14:11:39.020
> 
> 标签：javascript, jquery

基本上我正在寻找最有效地通过 javascript 加载 1000 行 X 100 列的表。[这个小提琴](http://jsfiddle.net/zAVLV/2/) 使用 DomDocumentFragment 来实现这一点。它在 chrome 和 FireFox 中运行得足够快，但在 IE 中运行缓慢。有人能找出 IE 速度慢的原因吗？还有更好的解决方案吗？解决方案可以使用 jquery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:16:50.350

innerHTML 可以比 DOM 操作更快。而且replaceHTML 可以比innerHTML 更快。

[http://www.quirksmode.org/dom/innerhtml.html](http://www.quirksmode.org/dom/innerhtml.html)

[http://blog.stevenlevithan.com/archives/faster-than-innerhtml](http://blog.stevenlevithan.com/archives/faster-than-innerhtml)

更新：正如评论中所指出的，这实际上取决于您正在查看的浏览器和版本。YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:26:39.787

here is a fiddle that behaves much faster than your original one by directly generating innerHTML code for your table body instead of constructing DOM Nodes.

[http://jsfiddle.net/zAVLV/6/](http://jsfiddle.net/zAVLV/6/)

# javascript - 重新定位跨度下方的一些文本

> ID：11415198
> 
> 赞同：0
> 
> 时间：2012-07-10T14:11:56.867
> 
> 标签：javascript, jquery, css

停止将文本推到跨度下方的一侧。

“标题”下方的文本与“标题”文本的末尾对齐，而它应该是一个新行。

所以 ：

![在此处输入图像描述](../Images/dd11875b22aea5ae448ab0548892f17e.png)

应该改为：

![在此处输入图像描述](../Images/1fecc7c984a81733011b95ab3d7d9168.png)

这是小提琴：http: [//jsfiddle.net/25LjE/72/](http://jsfiddle.net/25LjE/72/)

我是否需要以某种方式使文本浮出标题文本？

小提琴背后的代码：

```
<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6352993.js"></script>
<noscript><a href="http://polldaddy.com/poll/6352993/">This is very long test question to test how polldaddy handles questions that exceed that normal length............ yes a very long question indeed..............</a></noscript>

.pds-question-top {
font-size:10pt !important;
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-pd-link, .pds-comments {
display:none !important;
}

.pds-box {
width:220px !important;
}

.pds-input-label {
width:85% !important;
}

.PDS_Poll {
margin-bottom:15px;
}

.pds-answer-span {
color:#00f;
}

.pds-vote {
background-color:#424242;
}

.pds-answer-text {
color:#00f;
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-answer-feedback {
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-votebutton-outer {
text-align:center;
}

.pds-answer-group {
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
height:auto;
overflow:hidden;
}

.pds-input-label,.pds-answer-input {
float:left;
}

.pds-view-results,.pds-links {
color:#FFF !important;
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-comments,.pds-return-poll {
color:#FFF !important;
}

.pds-links {
    display: inline !important;
}
.pds-pd-link {
display: none !important;
}
.pds-box {
    width: 220px !important;
}
.pds-input-label{
    width: auto! important;
}
.PDS_Poll{
    margin-bottom:15px;
}

.pds-question-top {padding:0 !important}

$(document).ready(function() {

    $('.pds-question-inner').prepend('<span style="color:red;font-weight:bold;font-size: 15px;float:left">Header</span>');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:15:23.690

跨度需要与`line-height`段落相同，试试这个：http: [//jsfiddle.net/25LjE/73/](http://jsfiddle.net/25LjE/73/)

# php - PHP浮点比较与大于或小于运算符

> ID：11415200
> 
> 赞同：0
> 
> 时间：2012-07-10T14:12:02.480
> 
> 标签：php, floating-point

我读过你不应该直接比较 PHP 浮点数，因为可能会出现浮点精度错误。

我有一个浮点数，我需要根据浮点数所在的范围括号设置一个变量。像这样的东西-

```
$mytext;

if ($myfloat < 5.5) {
  $mytext = "a";
} else if ($myfloat < 9.7) {
  $mytext = "b";
} else {
  $mytext = "c";
} 
```

使用 PHP 执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:03:11.063

有些人建议不要将浮点数与相等运算符（例如`==`or `!=`）进行比较，但这种建议是错误的。相等运算符按应有的方式工作，没有错误。更好的建议更像是这样：浮点算术运算（包括类型之间的转换和从诸如“5.5”之类的数字转换）通常会引入舍入误差，因此浮点运算的计算结果通常与数学上的精确结果不同。如果您想确定用近似浮点建模的两个精确值是否相等，您应该：

*   确定建模值中可能存在多少误差。
*   Determine whether you can tolerate slightly different exact amounts being reported equal due to floating-point errors, and what amount of difference you can tolerate (false positives).
*   Determine whether you can tolerate equal exact amounts being reported unequal due to floating-point errors (false negatives).

At the very least, you should estimate the above. Then determine whether there is a test you can perform that returns results with acceptably low rates of false positives and of false negatives. Commonly, people use a test such as `fabs(a-b) < ErrorThreshold` and guess at the ErrorThreshold.

Guessing is not engineering.

The above is for equality. Similar concerns apply to comparing for order (e.g., `<` or `<=`).

For the sample you show, the question would be how much you care about characterizing numbers that are very near the borders of 5.5 and 9.7\. Is it okay if numbers slightly above or slightly below the border are put into the correct category? If so, use the tests as you have them. If it is not okay, you need to explain your criteria further, along with information about how much error in `$myfloat` there may be.

# linux - 使用 sed 在 bash 中将文本添加到行尾

> ID：11415203
> 
> 赞同：0
> 
> 时间：2012-07-10T14:12:10.700
> 
> 标签：linux, bash

我的脚本中有变量，称为：

```
 VAR=/opt/sbin/test 
```

我想在行尾附加一个文本，例如“文本”，并带有一个空格，然后将该行运行为

```
 /opt/sbin/test text 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:15:01.057

我认为您正在寻找的命令是：

```
VAR=/opt/sbin/test
VAR="$VAR text"
BLAH=$(${VAR}) 
```

以上将 $VAR 设置为 /opt/sbin/test 文本，然后 BLAH=$(${VAR}) 将执行它。

# perl - 使用 Tie::File 操作 Perl 文件

> ID：11415212
> 
> 赞同：1
> 
> 时间：2012-07-10T14:12:36.793
> 
> 标签：perl, file

我正在解析一个 HTML 文件，其中包含以类似网格的方式关联的数据，并且即将完成。我以前认为需要删除所有空白行，但我没有注意到网格中的某些字段是空白的。我现在正在尝试使用 Tie::File 模块将文件存储在一个数组中，对其进行迭代，如果有三个连续的空行，我想插入一个我可以稍后操作的虚拟值，以便空行剥离不会改变我的数据结构。

到目前为止我尝试过的（文件约为 2 MB）：

```
my @lines;
my $num = 0;
tie @lines, 'Tie::File', 'results.txt';
(tied @lines)->defer;

foreach (@lines)
{
    chomp $lines[$num];
    $num++;
    if ($lines[$num-1] =~ /^$/ && $lines[$num+1] =~ /^$/)
    {
        $lines[$num] = "null";
    }
}

(tied @lines)->flush;

untie @lines; 
```

编辑：如何遍历数组并插入值，以便每行之间只有一个空格，以便我以后可以摆脱所有空行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:40:32.860

如果我正确理解了您的问题（将三个连续的空行替换为“null”一词并在两侧各有一个空行），那么对您的文件内容进行操作的以下正则表达式可能会有所帮助：

```
use Modern::Perl;

my $htmlFile = do { local $/; <DATA> };

$htmlFile =~ s/(?<!\S)\n{3}/\nnull\n\n/g;

say $htmlFile;

__DATA__

A
B

C
D

E
F

Output:

null

A
B

null

null

C
D

null

E
F 
```

# javascript - this.collection.each 不会以这种方式触发（backbone.js）

> ID：11415213
> 
> 赞同：0
> 
> 时间：2012-07-10T14:12:40.407
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我`this.collection.each()`用来遍历从后端获取的集合。

**问题：**我注意到，当我将`reset`集合的事件绑定到`render`方法中的视图的`initialize`方法并将 a `console.log()`within放置`this.collection.each`时，我看到了预期的控制台输出。

但是，如果我不进行上述绑定，而只是使用`this.render()`within `initialize`，`console.log()`则不会输出任何内容。这对我来说似乎很奇怪，有人可以提供解释吗？

`console.log(this.collection);`我还在循环之前放置了一个，这总是正确输出集合！我猜想在视图初始化时没有填充集合，但这将导致`console.log(this.collection);`不显示任何内容。

**这个作品**

```
SimilarPhotoListView = Backbone.View.extend({
    el: '#modal_similar_items',

    initialize: function() {
        this.collection.on('reset', this.render, this);
    },

    render: function() {
        console.log(this.collection);
        this.collection.each(function(photo, index) {
            console.log('hello');
        }, this);
        return this;
    }
}); 
```

**这不会从 this.collection.each() 中输出**

```
SimilarPhotoListView = Backbone.View.extend({
    el: '#modal_similar_items',

    initialize: function() {
        this.render();
    },

    render: function() {
        console.log(this.collection);
        this.collection.each(function(photo, index) {
            console.log('hello');
        }, this);
        return this;
    }
}); 
```

这两个类都通过以下方式实例化：

```
renderSimilarPosts: function() {
    this.similarPhotoList = new SimilarPhotoCollection();
    this.similarPhotoListView = new SimilarPhotoListView({ collection: this.similarPhotoList });
    this.similarPhotoList.fetch({
        data: {post_id: this.model.id},
        processData: true
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:21:19.947

当你初始化你的视图时，`this.similarPhotoList`是一个空集合。因此，当您创建您的 时`similarPhotoListView`，您将其传递给一个空集合。`similarPhotoListView.initialize`因此使用空集合调用`render`，所有这些都在集合被填充之前`fetch`。

第一种方法起作用的原因是因为`reset`在`collection.fetch`. 从骨干源：

```
fetch:
...
    options.success = function(resp, status, xhr) {
            collection[options.add ? 'add' : 'reset'](collection.parse(resp, xhr), options);
            if (success) success(collection, resp);
          };
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:25:17.093

`initialize`在实例化时运行，因此`render`您甚至在传递集合之前运行。此外，`render`不应直接从`initialize`

# c# - 实体框架：父子主键同名继承

> ID：11415217
> 
> 赞同：1
> 
> 时间：2012-07-10T14:12:51.057
> 
> 标签：c#, entity-framework, inheritance

我正在尝试在两个表之间进行实体框架继承。

家长：

```
ParentTable
  Id: int primary key
  CustomAttribute: int 
```

孩子：

```
ChilTable
  Id: int primary key (not the same one as the parent, Child specific Id)
  TCId: int foreign key to parent
  SomeInformation: String 
```

由于某些原因，我想继续将“Id”命名为 ParentTable 和 ChildTable 的主键。这不应该打扰 EntityFramwork，因为我为子表创建了另一个名称为“CId”的自定义属性：

![在此处输入图像描述](../Images/93cf271d18af733d278920ac9104a165.png)

Child1 表映射如下：

![在此处输入图像描述](../Images/e95b6452e9b4b7cbf7e4137c8f074649.png)

但是当我“验证”模型时，VS2010 说......：

```
Error 3002: Problem in mapping fragments starting at line 103:Potential runtime violation of table Child1's keys (Child1.Id): Columns (Child1.Id) are mapped to EntitySet Parents's properties (Parents.CId) on the conceptual side but they do not form the EntitySet's key properties (Parents.Id). 
```

基本上，我知道实体框架看到了一个问题，因为我们将表的主键映射到不是实体键的属性，但是我们应该如何使用继承？

仅当“子”表中没有主键时才允许继承？我应该将我的主键作为“简单键”吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:31:58.173

EF 希望孩子的`Id`PK 对父母来说也是 FK。`Child.Id`PK和FK也是如此。

# php - Apache 指向错误的 PHP 版本

> ID：11415222
> 
> 赞同：1
> 
> 时间：2012-07-10T14:12:56.193
> 
> 标签：php, apache

我在 Mac OS X Lion 上，命令`php -v`返回

```
PHP 5.4.4 (cli) (built: Jun 30 2012 16:45:58) 
```

在我的本地服务器（localhost）上，`phpinfo`给了我：

```
PHP Version 5.3.10 
```

你能帮帮我吗，我需要 php 5.4 来安装 Symfony2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:21:55.487

我的 Apache 安装在 httpd.conf 文件中有这两行：

```
PHPIniDir "C:/Program Files/PHP"
LoadModule php5_module "C:/Program Files/PHP/php5apache2_2.dll" 
```

确保这些 Apache 行中的目录是您想要的 PHP 版本的目录。

更改 httpd.conf 文件后，您必须停止并重新启动 Apache。

# iphone - 开始输入时 UISearchBar 崩溃

> ID：11415225
> 
> 赞同：4
> 
> 时间：2012-07-10T14:13:10.547
> 
> 标签：iphone, objective-c, uitableview, search, uisearchbar

我有一个 UISearchBar，每当我开始输入它时，我都会收到以下崩溃报告

`[__NSCFDictionary rangeOfString:options:]: unrecognized selector sent to instance 0x6a9d210 2012-07-10 14:46:52.956 MinePedia[275:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary rangeOfString:options:]: unrecognized selector sent to instance 0x6a9d210' *** First throw call stack: (0x11f9052 0x15d5d0a 0x11faced 0x115ff00 0x115fce2 0xaad2 0x4754b2 0x11faec9 0x242515 0x2e872f 0x2e7e1e 0x2f4ce9 0x30112a 0xbf3a39 0x11c4885 0x11c47a8 0xb381aa 0x40a88e7 0x34b3917 0x3877111 0x387a4e1 0x408385b 0x40862e3 0x4086440 0x408301d 0x3869df0 0x3869ee3 0x4087119 0x388284d 0x3882b32 0x3896e12 0x3dfc0f7 0x3895245 0x38941f2 0x38948fb 0x3dfbca4 0x38a964e 0x38970a0 0x3879a0a 0x34e4ad9 0x11fae72 0x40a35bc 0x350b7f9 0x350d87f 0x3dfe03 0x3a3792 0x3a4944 0x3a36b6 0x3acf09 0x24e406 0x32c14a 0x32c14a 0x32c14a 0x32c14a 0x32c14a 0x32c14a 0x32c14a 0x32c14a 0x32c14a 0x32c14a 0x32c14a 0x32c14a 0x32c14a 0x24e460 0x24e0c5 0x24e1f8 0x241aa9 0x2172fa9 0x11cd1c5 0x1132022 0x113090a 0x112fdb4 0x112fccb 0x2171879 0x217193e 0x23fa9b 0x22f8 0x2255) terminate called throwing an exceptionCurrent language: auto; currently objective-c (gdb)`

我的 SearchTableViewController.h 文件：

```
#import <UIKit/UIKit.h>

@interface SearchTableViewController : UITableViewController <UISearchBarDelegate> {

    NSMutableArray *serversArray;
    NSMutableArray *modsArray;
    NSMutableArray *pluginsArray;

    NSMutableArray *allItemsArray;
    NSMutableArray *displayItemsArray;

    IBOutlet UISearchBar *theSearchBar;
}
@end 
```

和我的 SearchTableViewController.m 文件：

```
#import "SearchTableViewController.h"

@implementation SearchTableViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

     // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    modsArray = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://21zach2.webs.com/iPhone/MinePedia/Plists/TopRated/Mods.plist"]];
    serversArray = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://21zach2.webs.com/iPhone/MinePedia/Plists/TopRated/Servers.plist"]];
    pluginsArray = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://21zach2.webs.com/iPhone/MinePedia/Plists/TopRated/Plugins.plist"]];

    allItemsArray = [[NSMutableArray alloc] init];
    displayItemsArray = [[NSMutableArray alloc] init];

    [allItemsArray addObjectsFromArray:modsArray];
    [allItemsArray addObjectsFromArray:serversArray];
    [allItemsArray addObjectsFromArray:pluginsArray];

    [displayItemsArray addObjectsFromArray:allItemsArray];

}

- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {

    if ([searchText length] == 0) {
        [displayItemsArray removeAllObjects];
        [displayItemsArray addObjectsFromArray:allItemsArray];
    } else {
        [displayItemsArray removeAllObjects];
        for (NSString *string in allItemsArray) {
            NSRange range = [string rangeOfString:searchText options:NSCaseInsensitiveSearch];
            if (range.location != NSNotFound) {
                [displayItemsArray addObject:string];
            }
        }
    }
    [self.tableView reloadData];

}

- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar {

    [searchBar resignFirstResponder];
    [theSearchBar resignFirstResponder];

}

- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar {

    [theSearchBar resignFirstResponder];
    [searchBar resignFirstResponder];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [displayItemsArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    cell.textLabel.text = [[displayItemsArray objectAtIndex:indexPath.row] objectForKey:@"name"];
    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

我正在使用故事板。由于缺乏声誉，我无法上传图片，所以我无法向您展示我的变量与什么相关联。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T14:24:37.427

您`allItemsArray`包含字典，而不是字符串。您需要获取要搜索的字符串值，例如，如果它是存储在键“name”下的字符串：

```
for (NSDictionary *item in allItemsArray) { 
    NSString *string = [item objectForKey:@"name"];            
    NSRange range = [string rangeOfString:searchText options:NSCaseInsensitiveSearch]; 
    if (range.location != NSNotFound) { 
        [displayItemsArray addObject:item]; 
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:48:34.640

```
for (int count = 0; count < [allItemsArray count]; count ++) { 

    for (NSDictionary *dict in [allItemsArray objectAtIndex:count]) { 

        NSString *string = [dict objectForKey:@"keyValue"];   

        NSRange range = [string rangeOfString:searchText options:NSCaseInsensitiveSearch]; 

        if (range.location != NSNotFound) { 

            [displayItemsArray addObject:string]; 
        }
    } 
} 
```

我希望这能解决它！

# openimaj - Openimaj 从集成摄像头或 USB 摄像头捕获视频并将其保存到硬盘（java）

> ID：11415234
> 
> 赞同：2
> 
> 时间：2012-07-10T14:13:25.720
> 
> 标签：openimaj

我刚刚从该站点安装了几乎所有 openimaj 指令库：http: [//sourceforge.net/p/openimaj/wiki/OpenIMAJ%20From%20Source/](http://sourceforge.net/p/openimaj/wiki/OpenIMAJ%20From%20Source/)库已安装并正在运行。我只需要一个示例代码来从网络摄像头捕获视频并将其保存到硬盘。例如：

这是打开相机并向您显示视频的代码：

* * *

```
import org.openimaj.image.MBFImage;
import org.openimaj.video.VideoDisplay;
import org.openimaj.video.VideoDisplayListener;
import org.openimaj.video.capture.VideoCapture;

public class VideoDemo {
    ...
    VideoCapture vc = new VideoCapture( 320, 240 );
    VideoDisplay<MBFImage> vd = VideoDisplay.createVideoDisplay( vc );
    ...
} 
```

* * *

如何将 [vd] 保存在磁盘上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:03:32.590

您需要使用[XuggleVideoWriter](http://www.openimaj.org/apidocs/org/openimaj/video/xuggle/XuggleVideoWriter.html)类。以下代码在屏幕上显示视频内容并将内容写入文件，直到按下转义键。视频的格式由文件名控制（即“video.flv”创建一个FLV格式的视频）。

```
package org.openimaj.demos.sandbox;

import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.io.IOException;

import javax.swing.SwingUtilities;

import org.openimaj.image.MBFImage;
import org.openimaj.video.Video;
import org.openimaj.video.VideoDisplay;
import org.openimaj.video.VideoDisplayListener;
import org.openimaj.video.capture.VideoCapture;
import org.openimaj.video.xuggle.XuggleVideoWriter;

/**
 * Record the webcam to a file.
 * 
 * @author Jonathon Hare (jsh2@ecs.soton.ac.uk)
 */
public class VideoRecorder extends KeyAdapter implements VideoDisplayListener<MBFImage> {
    private Video<MBFImage> video;
    private VideoDisplay<MBFImage> display;
    private XuggleVideoWriter writer;
    private boolean close = false;

    /**
     * Default constructor
     * @throws IOException
     */
    public VideoRecorder() throws IOException {
        //open webcam
        video = new VideoCapture(320, 240);

        //open display
        display = VideoDisplay.createVideoDisplay(video);

        //open a writer
        writer = new XuggleVideoWriter("video.flv", video.getWidth(), video.getHeight(), 30);

        //set this class to listen to video display events
        display.addVideoListener(this);

        //set this class to listen to keyboard events
        SwingUtilities.getRoot(display.getScreen()).addKeyListener(this);
    }

    @Override
    public void afterUpdate(VideoDisplay<MBFImage> display) {
        //Do nothing
    }

    @Override
    public void beforeUpdate(MBFImage frame) {
        //write a frame 
        if (!close) {
            writer.addFrame(frame);
        }
    }

    @Override
    public void keyPressed(KeyEvent key) {
        //wait for the escape key to be pressed
        close = key.getKeyCode() == KeyEvent.VK_ESCAPE;
    }

    /**
     * Main method
     * @param args ignored
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        new VideoRecorder();
    }
} 
```

# android - 尽管以 root 身份运行，但 ADB 获得的权限被拒绝

> ID：11415235
> 
> 赞同：5
> 
> 时间：2012-07-10T14:13:30.547
> 
> 标签：android, permissions, adb

我有一个有根的平板电脑，一旦连接就会给 adb root。

当我输入 adb shell 我得到 root@android:/#

我可以做 su 并且它没有向我显示任何权限错误

但是，当我尝试在已被授予所有权限的 sdcard 上执行文件时。我的权限被拒绝

为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T14:28:41.327

sdcard 挂载了一个 noexec 标志，这意味着你不能执行存储在那里的东西。

这在以 root 甚至半特权 shell 运行时非常重要，因为缺少文件权限或所有权意味着任何具有写入外部存储权限的用户 ID 都可能对您可能想要运行的程序进行木马化。

顺便说一句，默认 shell 的错误词汇量有限，并且在许多版本中还会说权限被拒绝以代替未找到的命令。您当前的工作目录不在搜索路径中，因此如果您想从那里运行某些内容，您通常需要执行以下操作：

```
./filename 
```

# c# - WCF 双工服务 - 序列化异常

> ID：11415248
> 
> 赞同：0
> 
> 时间：2012-07-10T14:14:20.207
> 
> 标签：c#, wcf, serialization, nettcpbinding

这是我的客户课程

```
using System;
using System.Data;
using System.ServiceModel;
using System.Runtime.Serialization;

namespace Main.Communication
{
    public delegate void EventReceivedEventHandler(DataSet InBoxNotifications, bool updateOutBoxFlag);
    public delegate void OpenConnectEventHandler(int spaceId, string accessionNumber, string modality, long assignedCaseId, long originalCaseId);
    [DataContract]
    public class ClientClass : IClient, IDisposable
    {
        public event EventReceivedEventHandler EventReceived;
        public event OpenConnectEventHandler OpenConnectSystem;

        public ClientClass(int userId)
        {
            this.UserId = userId;
            this.Authentication = Guid.NewGuid().ToString();
        }

        private string _authentication;
        [DataMember]
        public string Authentication
        {
            get { return _authentication; }
            set { _authentication = value; }
        }

        private int _userId;
        [DataMember]
        public int UserId
        {
            set { _userId = value; }
            get { return _userId; }
        }

        #region "IClient Members"
        public bool UpdateInDataBox(DataSet InBoxNotifications, bool updateOutBoxFlag)
        {
            if (EventReceived != null) EventReceived(InBoxNotifications, updateOutBoxFlag);
            return true;
        }
        public void OpenReviewPanel(int spaceId, string accessionNumber, string modality, long assignedCaseId, long originalCaseId)
        {
            if (OpenConnectSystem != null) OpenConnectSystem(spaceId, accessionNumber, modality, assignedCaseId, originalCaseId);
        }
        #endregion

        #region IDisposable Members
        public void Dispose()
        {
            ((ICommunicationObject)this).Abort();
        }
        #endregion
    }
} 
```

`IClient`在哪里`Callback`。我正在使用`netTcp`绑定。在将此对象传递给服务器方法时，我收到这样的错误，

> 尝试序列化参数[http://tempuri.org/:observer](http://tempuri.org/:observer)时出错。InnerException 消息是 'Type 'Main.Communication.ClientClass'，数据合同名称为 'CommunicationClient:http://schemas.datacontract.org/2004/07/Main.Communication.ClientClass' 不是预期的。将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。有关更多详细信息，请参阅 InnerException。

# vb.net - 是否可以在 VB.net 中声明一个本地/类实例成员引用变量来读取/更新另一个变量引用的相同对象

> ID：11415250
> 
> 赞同：2
> 
> 时间：2012-07-10T14:14:26.553
> 
> 标签：vb.net, variables, declaration, byref

在 C++ 中，可以这样做：

```
int x;
int& foo = x;

// foo is now a reference to x so this sets x to 56
foo = 56; 
```

但是在 Visual Basic .net (VB.net) 中是否有可能？

我知道`ByRef`VB.net 中的术语，但我只看到（并且通过广泛的研究）通过引用函数/子例程传递参数，以便函数修改调用代码声明的相同变量。

但是我还没有看到`ByRef`用于声明变量（作为类成员或局部变量）。我曾尝试使用`ByRef`来做这样的声明，但是对于我尝试的声明的每个排序，我都会遇到编译器错误。

我之所以要这样做是因为我希望一个类实例能够引用另一个类实例中声明的变量。

具体来说，我正在处理一些现有的 VB.net 代码，其中程序逻辑与 VB.net 表单类中的 UI 逻辑混合在一起。我想将程序逻辑从表单代码中分离出来，以便更容易重用。为此，我需要程序逻辑代码能够与表单代码“对话”，因此我需要访问其变量。

我正在使用带有 VB.net 的 Visual Studio 2010 Express，并且更愿意留在这个环境中，即使我知道完整的 Visual Studio 具有扩展功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:34:46.823

嗨，我不确定 VB.NET，但我知道如何在 C# 中做到这一点，因此我在 C# 中完成了解决方案，然后我使用 C# 到 VB.NET 转换器来获取 VB.NET 代码。也许它可以帮助你：

[http://www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

C# 代码

```
protected void TestFoo()
{

    string strFooA = string.Empty;

    GetFoo(ref strFooA);

    Response.Write(strFooA);
}

private void GetFoo(ref string strFooA)
{
    strFooA = "FooA";
} 
```

VB.NET 转换

```
 Protected Sub TestFoo()

      Dim strFooA As String = String.Empty

      GetFoo(strFooA)

      Response.Write(strFooA)
    End Sub

    Private Sub GetFoo(ByRef strFooA As String)
      strFooA = "FooA"
    End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:11:25.043

### 指针存在，但它们被称为对象引用

*（现在其他海报，请不要在这里与我争辩实际的差异。我说的是OP想要完成的高级任务）*

显然，你不能按照你所说的去做——即通过外科手术操纵一个成员。但是，如果您可以控制代码，则几乎可以做到。从您所描述的问题来看，这种方法会更好，因为您可以将引用传递给具有许多要更新的成员的对象，而不必传递许多单独的指针。

首先定义一个类：

```
Class MyScreenValues
    ' Properties will work... using public fields for brevity
    Public TextBox1Value as String
    Public SpinControl1Value as Integer
    public CheckBox1Value as Boolean
End Class 
```

现在相当于您发布的代码：

```
Dim x as new MyScreenValues    'int x; 
dim foo as MyScreenValues = x  'int& foo = x;  
'// c++:  foo is now a reference to x so this sets x to 56 
'// .net: foo is now a reference to x so this sets x.SpinControl1Value to 56 
foo.SpinControl1Value = 56; 
```

如果您正在尝试将指针传递给表单值上的每个控件，例如：

```
Button1_Click(...
    Dim MyObject as new BusinessObject
    MyObject.DoSubmit(TextBox1.Text, SpinButton1.Value, CheckBox1.Checked) 
```

您可以使用 superDeveloper 提供的方法，并在 DoSubmit Sub 的定义中使用 ByRef 关键字：

```
Public Sub DoSubmit(ByRef Name as String, ByRef Age as Integer, ByRef Employed as boolean)
    ... business logic... 
```

然而，这只是给你一个 2 层分离。查看 MVP、MVC 等 - 但是考虑提交整个视图的数据。你可以用你现在拥有的东西来解决很多研究。例如，您的业务逻辑将在更改表单值时触发表单上的事件（实际上，由于 VB 处理 byref 属性 [=temp 变量] 的方式，它们在子退出之前不会触发，但它需要考虑）。

您还可以使用其他库将对象的属性映射到表单的属性。在网络上查看**VALUE INJECTOR**。它可以采用 webform/winform，甚至可能是 WPF 表单，并将控件值映射到您预定义的对象或从您预定义的对象映射出控件值。非常适合完全分离。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:47:09.187

.NET 框架中不像 C/C++ 中那样存在指针，因此您将无法直接实现您想要的。

[此 SO 页面](https://stackoverflow.com/questions/759474/vb-net-pointers)上有一些可能的解决方案

请参阅@NathanW 那里的答案：

*如果您使用的是 VB，那么唯一真正接近指针的是 IntPtr。如果您有权访问 C#，则可以使用不安全的 C# 代码来执行指针工作。*

**此外**

如果您希望能够使用引用，那么您可以通过使用一个类来实现：

```
Private Class RefClass
    Public x As Integer
End Class 
```

然后你可以互相引用：

```
Dim bar As New RefClass
Dim foo As RefClass = bar

bar.x = 45

Debug.WriteLine(bar.x) 'outputs 45
Debug.WriteLine(foo.x) 'outputs 45 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T20:48:31.933

你可能已经知道足够的信息来完成工作了[http://www.dreamincode.net/forums/topic/135354-reference-types-value-types-byval-byref/](http://www.dreamincode.net/forums/topic/135354-reference-types-value-types-byval-byref/)；但是，您的评论“在声明局部变量（可能还有类变量）时不需要 ByRef”让我想知道这里是否有一些混淆。

对于初学者来说，上面的 C++ 示例`int x; int& foo = x;`混淆了“引用”的含义。我的 C++ 不是很强大，但是，从语义上讲，我相信这个 C++ 引用更像是一种别名机制。在 VB（和 C#）中，引用的操作类似于识别代码，用于在内存中定位类的实例。VB 或 C# 都没有类似 C++ 引用类型的东西。

到目前为止，您可能已经知道可以将 Form 作为 ByVal 参数传递，并且可以毫无问题地更改其属性和字段。（ByVal 是 VB.NET 中的默认设置，因此您甚至不需要使用它 - 在 VB6 中 ByRef 是默认设置。）如果您足够满意，您可以跳过其余部分。但是，是的，对于 .NET 引用变量，假设：

```
Dim objA as New MyClass()
Dim objB as MyClass = objA 
```

然后 objA 和 objB 都引用了同一个 MyClass 实例。您可以通过 objA 和 objB 进行修改，也可以从 objA 或 objB 回读，因为它们都会影响同一个实例。您可以将 objA 或 objB 传递到带有参数 objC 的某个子例程 Foo 中，因为 Object 传递了 ByVal （即`Sub Foo(ByVal objC As Object)`），然后 Foo 也可以修改同一个实例。

* * *

`ByRef`VB 和C#的`ref`表示一个可修改的参数，这意味着传递一些“标识码”引用而不是一个值。然而，这个 ByVal 与 ByRef 的事情一清二楚，因为在 .NET 中，“值”类型和“引用”类型之间存在区别，这使许多人对是否需要 a`ByRef`或`ref`是否需要感到困惑。

Visual Basic 和 C# 将变量（和数据类型）分为两类：“值”（或“结构”）和“引用”（或“类”）。

“值”类型表示表示整数、布尔值、甚至位图或其他类型对象的位的实际集合。用老派的说法，这是对象实例化的“图像”。它是对象的状态空间。它使对象本质上是自身，与它在内存中的位置无关。

“引用”类型意味着一个代码（可能看起来像一个整数或指针），它以某种方式指示对象的数据类型以及它在内存中的位置。计算机将解释“参考”以获得对象的实际图像（即其“值”）。

当传递“值”参数时`ByVal`，这意味着创建了一个新对象，该对象与传递的原始表达式具有相同的图像，并且函数或方法在此副本上运行。“价值”的原始形象不会受到影响。

当传递“值”参数时`ByRef`，这意味着创建了一个新的“参考”变量，并且该“参考”变量将包含将解释回原始“值”图像的信息。现在可以更改“值”的原始图像。

当一个“参考”参数被传递`ByVal`时，它的“识别码”，被解释回对象的实际图像，被复制。函数或子例程或方法正是在此代码副本上运行的。该副本仍然指向对象的实际图像。这意味着传递的引用变量的对象`ByVal`仍然可以更改其图像（即其“值”）。但是，原始“参考”本身的代码不能更改。

（请注意，String 类型是一个奇怪的鸭子：它的行为就好像它是一个“Value”参数，即使它实际上是一个“Reference”类型。因此，通过 ByVal 传递的 String 不会以与任何其他方式相同的方式受到影响类会。实际上，String 是不可变类型的一个示例 - 这意味着已采取措施防止更改其“值”。）

When a "Reference" parameter is passed `ByRef`, one now has created a new "Reference" object that points to the original "Reference" object (that, in turn, points to the "Value" of some other object via its "identification code"). The use of `ByRef` on a "Reference" allows one to modify (or create anew) the "identification code" of the original "Reference" object being passed as a parameter. A function or subroutine or method that performs a swap operation will use ByRef on "Reference" parameters.

# macos - 释放内存作为命令“清除”的功能

> ID：11415252
> 
> 赞同：1
> 
> 时间：2012-07-10T14:14:29.033
> 
> 标签：macos

我的一个应用程序需要释放非活动/使用/有线内存的功能，就像命令“清除”一样。检查和谷歌很多，但不能得到任何命中

欢迎任何评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:59:33.650

Purge 不会像您认为的那样做。它不会“释放非活动/使用/有线内存”。正如手册页所说：

> 它不影响通过 malloc、vm_allocate 等分配的匿名内存。

它所做的只是清除磁盘缓存。这仅在您正在运行性能测试并且想要模拟“冷启动后首次运行”的效果而不实际冷启动时才有用。同样，从手册页：

> 清除可用于使用冷磁盘缓冲区缓存近似初始引导条件，以进行性能分析。

对此没有公共 API，尽管对符号的快速扫描表明它似乎从 CoreProfile 私有框架调用了函数 CPOSXPurgeAllDiskBuffers。我相信底层内核和用户态磁盘缓存代码全部或大部分都可以在[http://www.opensource.apple.com](http://www.opensource.apple.com)上找到，所以如果你真的想要的话，你可以自己实现同样的事情。

正如 iMysak 所说，如果您愿意，您可以只执行（或 NSTask 等）该工具。

附带说明一下，您可以释放已使用/已连接的内存，大概该内存已被某些东西使用-即使您在自己的数据结构中没有指向它的指针， malloc 也可能有。您是否正在尝试对代码进行分段错误？

释放不活跃的记忆是另一回事。只是将某些东西释放到 malloc 并不一定会使 malloc 将其返回给操作系统。而且你没有办法强迫它。如果您考虑一下传统 UNIX 的工作方式，那是有道理的：当您要求它分配更多内存时，它使用 sbrk 来扩展您的数据段；如果你在顶部释放内存，它可以 sbrk 回落，但如果你在中间释放内存，它就无法做到这一点。当然，现代 UNIX 系统不是这样工作的，但是 POSIX 和 C API 都被设计成与这样的系统兼容。所以，如果你想确保内存被释放，你必须直接处理内存分配。

最简单和最便携的方法是创建和映射一个临时备份文件，或者只是 MAP_ANON，并在完成后显式取消映射页面。（这适用于所有 POSIX 系统，并且使用非常简单的包装器，甚至 Windows。）如果您需要更多控制（例如，手动处理将页面刷新到磁盘等），您可以使用 mach/mach_vm.h蜜蜂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:17:22.130

您可以直接从操作系统运行它 // 使用 exec() 函数

# uniqueidentifier - FxCop 规则确保每个类都有唯一的标识符

> ID：11415253
> 
> 赞同：0
> 
> 时间：2012-07-10T14:14:30.440
> 
> 标签：uniqueidentifier, hashcode, fxcop

在我们的 API 库中，我们有许多实现 ComputeCurrentDefinitionHashCode 方法的类，该方法将每个成员字段的哈希码与该类唯一的伪随机数组合在一起。

这是基于 Paul Hsieh 在[http://www.azillionmonkeys.com/qed/hash.html上的“SuperFastHash”](http://www.azillionmonkeys.com/qed/hash.html)

我正在尝试确定是否可以使用 FxCop 来确保我们放入每个类中的随机生成的数字不会在任何其他类中重复。

换句话说，我们可以将信息从一个类保存到下一个类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:15:26.030

是的，您可以构建一个跨类缓存信息的 FxCop 规则。但是，根据您在课程中包含目标数字的方式，这可能是也可能不是 FxCop 规则的特别好的候选者。例如，如果它是作为参数传递给基类构造函数的文字，那么 FxCop 规则可能是一个不错的选择。但是，如果数字的来源不太“可预测”，则单元测试方法可能更可取。

# c# - 如何设置inflaterInputStream.Position？

> ID：11415254
> 
> 赞同：1
> 
> 时间：2012-07-10T14:14:43.010
> 
> 标签：c#, stream, inflate, sharpziplib

我正在尝试通过调用以下代码来设置 inflater.Position：

```
 Stream data = Compress(buffer);  // data: length=12, position=12
    //inflater: length=0, position=12
    InflaterInputStream inflater = new InflaterInputStream(data);   
    inflater.IsStreamOwner = false;

    // move forward:
    inflater.Dispose();
    data.Position = 0;  
    inflater = new InflaterInputStream(data);     // inflater.position=0
    inflater.IsStreamOwner = false;
    byte[] buff = new byte[newPos - Position];
    while(newPos > Position)
         int count = inflater.Read(buff, 0, buff.Length);  //inflater.position=12 
```

现在，当我尝试前进时，位置始终保持在其原始值。是因为无论我在 Read 方法中放入什么长度，该方法总是读取整个流，因此位置 = 流的结尾？我该如何设置inflater.Position？

追问：为什么inflater的长度是0？它与 CanWrite 属性为假有什么关系吗？

# c++ - C++ | 重用基类的受保护成员

> ID：11415259
> 
> 赞同：1
> 
> 时间：2012-07-10T14:14:54.100
> 
> 标签：c++, inheritance

假设我有一个 Base & Derived 类：

```
class Base{
 private:
  int* _privateIntPtrB;
 protected:
  int* _protectedIntPtrB;
 public:
  //methods which use
  //_privateIntPtrB and _protectedIntPtrB

class Derived: public Base{
 private:
  int* _privateIntPtrD;
 protected:
  int* _protectedIntPtrB; //I am redeclaring this var
 public:
  //methods which use
  //_privateIntPtrD and _protectedIntPtrB 
```

我的问题：在`Derived`类的方法中，是否使用了派生版本`_protectedIntPtrB`？（我认为确实如此，但想确认）。

如果类没有重新定义方法，指向类 的指针将使用`Derived`哪个版本的方法？`_protectedIntPtrB``Derived`

我问的原因 - 我想`_protectedIntPtrB`在`Derived`类中进行不同的初始化，并希望`_protectedIntPtrB`在派生类的所有实例中使用该版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T14:24:06.700

> 在 Derived 类的方法中，是否使用了 Derived 版本`_protectedIntPtrB`？

是的，它隐藏了基类成员，因此在引用`_protectedIntPtrB`范围内的不合格使用。（如果限定为 ，则基类变量仍然可用）。`Derived``Derived::_protectedIntPtrB``Base::_protectedIntPtrB`

> 如果派生类没有重新定义方法，`_protectedIntPtrB`那么指向派生类的指针将使用哪个版本的方法？

基类变量。派生类的数据成员不能从基类获得。

> 我问的原因 - 我想`_protectedIntPtrB`在 Derived 类中进行不同的初始化，并希望在 Derived 类`_protectedIntPtrB`的所有实例中使用该版本。

通常，使派生类的行为与其基类不同的最佳方法是重写虚函数。如果您考虑一下您想要实现的目标可能会更好：找出您想要修改的行为，并将其封装在一个虚函数中。

# windows - 数据执行保护：x86 操作系统中的 OptIn

> ID：11415260
> 
> 赞同：1
> 
> 时间：2012-07-10T14:15:00.050
> 
> 标签：windows, dep

我想知道，如果有人知道的话，是否使用本地系统帐户 (NT AUTHORITY\SYSTEM) 启动并且操作系统已将 DEP 配置为 OptIn 模式，它是否会在 DEP 强制执行下运行？

OptIn 选项字面意思是 (http://support.microsoft.com/kb/875352)：此设置是默认配置。在具有可以实现硬件强制 DEP 的处理器的系统上，默认情况下，DEP 会为***有限的系统二进制文件和***“选择加入”的程序启用。使用此选项，默认情况下 DEP 仅涵盖***Windows 系统二进制文件。***

可执行文件中的 NXCompat 标志为 0。

由 SYSTEM 帐户启动的进程是否包括在内？还是只覆盖 system32 文件夹中的那些？

谢谢，西蒙娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:32:31.327

Yes, Processes launched by the SYSTEM account are also covered by DEP, if they Opted-in (by having the [/NXCompat](http://msdn.microsoft.com/en-us/library/ms235442%28v=vs.90%29.aspx) in their image file). See Process Explorer below showing several services running with the SYSTEM account using DEP.![enter image description here](../Images/f13863ce8b1c6016cd07e97c0faf1910.png)

# asp.net - 在 WebForms 中管理 URL

> ID：11415262
> 
> 赞同：0
> 
> 时间：2012-07-10T14:15:07.620
> 
> 标签：asp.net, webforms

我有一个大型 Webforms 应用程序。在整个应用程序的许多地方，我们在后面的代码中设置了超链接的导航 url。硬编码字符串文字似乎是个坏主意。

```
hlVideos.NavigateUrl = "/path/to/some/page.aspx"; 
```

这似乎也不是一个好主意，因为它可能要求我在需要它的每个页面上都有一个常量字符串：

```
private const string PathToSomePage = "/path/to/some/page.aspx";

hlVideos.NavigateUrl = PathToSomePage; 
```

我考虑过一个包含一堆可以访问的 const 字符串的类。这似乎违反了开放/封闭原则，每次添加新页面时都要求我添加另一个常量。

```
public class UrlManager
{
    public const string PathToSomePage = "/path/to/some/page.aspx";
    public const string PathToSomeOtherPage = "/path/to/some/other/page.aspx";
    public const string PathToYetAnotherPage = "/path/to/yet/another/page.aspx";
} 
```

其他人是如何处理这个问题的？也许我过于复杂了，尽管我正在处理一百个左右的 url，并且有很多页面引用每个 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:17:49.850

您可以尝试编写一些 T4 模板来生成您的 UrlManager 文件类。类似 T4MVC 的东西。在此处查找 WebForms 示例[T4Mvc Web 表单](http://blogs.msdn.com/b/davidebb/archive/2009/07/12/asppathguru-a-little-t4-love-for-asp-net-webforms.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:31:43.830

考虑使用资源文件。这样，您可以保持对页面的一致引用，但如果情况需要，它很容易在代码中维护，并且在部署后很容易热修复。

# database - 在黑莓中从 sqlite 获取数据非常慢

> ID：11415265
> 
> 赞同：2
> 
> 时间：2012-07-10T14:15:16.630
> 
> 标签：database, performance, blackberry, sqlite

我在 sdcard 中有 168mb sqlite 数据库，其中包含近 30 个表，每个表有 1000 多条记录。我正在使用此查询从数据库中获取结果。

```
select code mfr_code, name mfr_name
from manufacturers
where mfgr_type_code < 5 and code in (
        select mfgr_code
        from equipment_groups
        ) 
```

此查询在曲线 5.0 中耗时超过 30 秒，在 Torch 6.0 设备中耗时超过 1 分钟。

子查询

```
SELECT mfgr_code FROM equipment_groups 
```

正在获取超过 50k 条记录。

在 android 中进行测试时的相同查询不到 5 秒。黑莓有什么问题。

有没有其他方法可以减少此处理时间。

编辑

我正在使用此代码从数据库中获取结果

```
 Vector vehical_type  = new vector()
Cursor cursor = statement.getCursor();
            while (cursor.next()) {
                Row row = cursor.getRow();
                vehical_type.addElement(row.getString(0));
            } 
```

第一次执行 cursor.next() 时，使用 IN 的查询需要超过 10 个。剩余的 20 秒由循环完成。

所以我使用了 EXISTS 的查询，如下所示。性能提高了很多。

但我观察到的是相同的 cursor.next() 第一次需要 1 秒，完成循环需要近 10 秒。所以在这里我得出一个结论，即循环的性能是影响获取整个数据的总响应时间的因素。

除了循环游标之外，还有其他方法来获取数据吗？

有没有可能更好地提高性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:43:54.463

您是否尝试过重写查询？这里有几个想法：

如果`equipment_groups.mfgr_code`列不是唯一的：

```
SELECT code mfr_code, name mfr_name
  FROM manufacturers
 WHERE mfgr_type_code < 5
   AND EXISTS (
           SELECT 1
             FROM equipment_groups
            WHERE mfgr_code = code
       ); 
```

如果是唯一的：

```
SELECT code mfr_code, name mfr_name
FROM      manufacturers
LEFT JOIN equipment_groups ON mfgr_code = code
WHERE mfgr_type_code < 5; 
```

# c# - wcf 生成的跟踪是否有类型结构？

> ID：11415270
> 
> 赞同：0
> 
> 时间：2012-07-10T14:15:28.587
> 
> 标签：c#, .net, wcf, trace

我想为我的 wcf 服务设置一个自定义跟踪侦听器，它将根据我的需要过滤大量生成的跟踪以仅保留有意义的跟踪。因此，我的问题是：

生成的 Trace 是否有类型结构或类层次结构？

我的想法是根据跟踪的底层类型过滤跟踪，而不是处理自定义跟踪侦听器的 Write(string msg) 和 WriteLine(string msg) 方法提供的字符串对象。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:53:32.827

我可以建议[log4net](http://logging.apache.org/log4net/)或[NLog](http://nlog-project.org/)。功能真的很相似。它们都有广泛的日志目的地，但如果你想拥有一些具有一些自定义功能的自定义目的地，你可以这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:55:58.940

看起来不像...

[http://social.msdn.microsoft.com/Forums/en/wcf/thread/64119e1f-6d7c-4093-b27a-1cadf81aa43a](http://social.msdn.microsoft.com/Forums/en/wcf/thread/64119e1f-6d7c-4093-b27a-1cadf81aa43a)

**更新**（回应评论）

这意味着存在一个结构，但是 Microsoft 尚未以 XSD 的形式提供该结构的明确定义。

一种可能的方法是根据一个或多个示例跟踪文件生成 XSD。您可以使用 xsd.exe 来执行此操作。

然而，这种方法充其量是随意的，因为您无法确定最终结果将满足所有可能的未来跟踪文件。

# objective-c - 在选项卡栏中禁用的选项卡栏上显示操作表部分启用它

> ID：11415272
> 
> 赞同：0
> 
> 时间：2012-07-10T14:15:33.243
> 
> 标签：objective-c, ios, cocoa-touch, uikit

我想我在 UIKit 中发现了一个错误，但首先我想确定我没有发疯。

我有一个标签栏，里面有一个禁用的 tabBarItem。如果我从选项卡栏中显示一个操作表，然后在操作表关闭后取消/按下其中的任何按钮，则选项卡栏项目*显示*为已启用，但无法单击。

我希望它保持禁用状态。

我在这里上传了一个[示例项目](https://github.com/kevinbarrett/action-sheet-plus-tab-bar)。在模拟器中运行它并按下第一个视图控制器上的操作表按钮。注意工作表出现前后第二个标签栏项目的状态。该项目本身是一个标准的“选项卡式应用程序”模板，其中一个选项卡项被禁用，并为按钮添加了一个 IBAction。

这是一个错误，还是我滥用了 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:07:49.823

好像是个bug。。。

作为一种快速安全的解决方法，将其添加到视图控制器（假设它将是 UIActionSheet 的委托）

```
- (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex {
    for (UITabBarItem *item in self.tabBarController.tabBar.items) {
        item.enabled = !item.enabled;
        item.enabled = !item.enabled;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T13:02:18.737

我已经检查了您的项目并找到了使其工作的方法。`But I don't know actually is it a bug or not.`我只是发现，只有当您`actionsheet`使用`showFromTabbar`: 方法显示方法时才会发生这种情况。

```
[sheet showFromTabBar:self.tabBarController.tabBar]; 
```

当我将其更改为仅在此视图中显示时，它不会更改 tabBarItem 图像。

```
[sheet showInView:self.view]; 
```

希望这可以帮助您继续从事该项目。

# c# - Xsd 到对象类

> ID：11415273
> 
> 赞同：0
> 
> 时间：2012-07-10T14:15:33.617
> 
> 标签：c#, linq, oop, serialization, xsd

所以，我正在尝试获取一个 .xsd 文件（musicxml 固定标准），创建一个对象类，使用它的一部分 - 特别是 note 对象 - 将其包含在图形对象中，然后保存图形对象和 musicxml验证文件。

总而言之，我使用的解决方案有一两个严重的缺陷。

Xsd2Code - 创建文件；但由于某种原因，它创建了一个 Items 集合（我需要的类型 ObservableCollection），然后是一个可枚举的 ItemsChoiceType[0-9] ObservableCollection。可枚举的问题是在它生成之后，我必须要么将后者切换为数组，要么为 XmlSerialisation 属性做 mumbo-jumbo。生成一个 2mb 的 .cs 文件，因此有很多代码会自动生成，并且必须有一堆 .extend.cs 文件才能使其适合。也许我必须更改一些开关才能使其工作？什么开关可以解决这个问题？

LinqToXsd / OpenLinqToXsd - 生成文件，对其进行硬编码以引用 DLL 文件，然后强制您使用 List（没有转到 ObservableCollection 的选项），它没有 EditItem 并且不能用于绑定到 WPF/XAML . 否则，还有一堆 .extend.cs 文件。

Altova C# 生成器 - 昂贵，需要将一堆 DLL 包含在项目中，很乱。

* * *

长话短说，有没有人成功使用过这些系统，你需要做些什么来硬塞它们？除了我遇到的问题，我还要面对什么样的痛苦

* * *

我现在记得对于 XSD.exe：XSD 表示法不会导出，单个类（例如“note”）不会序列化为 xml。我将不得不写出从 scorepartwise 到中间的每一部分的整个事情。这意味着我无法序列化以“note”为顶点的图形对象。

# javascript - 如何检测用户的手指何时离开元素？

> ID：11415275
> 
> 赞同：0
> 
> 时间：2012-07-10T14:15:38.753
> 
> 标签：javascript, ipad, touch

现在用户点击图像，将手指移开，松开手指并可以看到警报。是否可以检查用户释放手指的位置以及他是否仍在原始图像上以显示他的警报？否则什么都不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:21:31.957

尝试这个：

```
var touchedObject;

$('body').bind("touchstart", function(e){
    touchedObject = $(this);
});

$('body').bind("touchend", function(e){
    if (touchedObject == $(this)) {
        //show alert
    }
}); 
```

# sql-server - 多维数据集角色 - 使用 Active Directory 按区域限制数据

> ID：11415281
> 
> 赞同：1
> 
> 时间：2012-07-10T14:15:51.310
> 
> 标签：sql-server, active-directory, roles, bids, cubes

我有一个多维数据集，我想限制用户只能访问他们自己领土内的数据。区域数据可以与他们的用户名和几个不同的表连接，以链接到我的销售区域维度表。我将如何使用 BIDS 创建一个自动更改每个用户允许的成员集的角色。

谢谢！伊森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:07:01.063

我发现这个链接有一种方法：[Cube Roles - Restrict data by region using Active Directory](https://stackoverflow.com/questions/11415281/cube-roles-restrict-data-by-territory-using-active-directory)

在不久的将来的某个时候，我将实施并发布以查看它是否有效，但我相信这是答案。

伊森

编辑：我已经实现了它并且它运行良好，只有一个问题。如果区域发生更改或用户被重新分配，则在重新处理多维数据集之前不会发生更改。即将问这个作为一个新问题。制作dll时，分析服务器dll是framework 2.0，所以编译时请确保使用目标framework 2.0。

# mysql - MySQL SELECT 从多个表，多个 GROUP BY 和 group_concat？

> ID：11415284
> 
> 赞同：4
> 
> 时间：2012-07-10T14:15:53.390
> 
> 标签：mysql, group-concat

我有三个要在 MySQ 中查询的表。如下：

```
**Table: Leaderboard**
Name  | Score
------------
James | 1
Steve | 2
Dave  | 5

**Table: Actions**
Name  | Action       | Time
----------------------------
James | Ate an apple | 01:00
James | Kicked a dog | 02:00
Steve | Ate a dog    | 03:00
Steve | Kicked a hen | 01:00
Dave  | died         | 02:00

**Table: Items**
Name  | Item         | Time
----------------------------
James | Chainsaw     | 01:00
James | Hammer       | 01:05
James | Crowbar      | 01:10
Steve | Hammer       | 02:00
Steve | Egg          | 01:05
Dave  | Egg          | 01:05 
```

我需要一个查询来选择每个玩家（ORDER BY Leaderboard.score DESC）并选择他们最新的 Action WHERE Actions.action LIKE 'Ate %'，然后给出所有 Items.Item ORDER BY Time DESC

例如，输出看起来像这样

```
**Output**
Name   | Latest_Action | Items
Steve  | Ate a dog     | Hammer, Egg
James  | Ate an apple  | Crowbar, Hammer, Chainsaw 
```

到目前为止，我已经尝试了以下查询，但它在 group_concat 中多次返回每个项目

```
SELECT Leaderboard.Name, Actions.*, group_concat(Items.Item)
FROM Leaderboard, Actions, Items
WHERE Items.Name = Actions.Name
  AND Actions.Action LIKE 'Ate %'
  AND Actions.Name IN (SELECT Name FROM Leaderboard ORDER BY SCORE DESC)
GROUP BY Leaderboard.name 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T14:22:00.770

```
SELECT Leaderboard.Name,
  (SELECT Actions.Action
   FROM Actions
   WHERE Actions.Name = Leaderboard.Name
     AND Actions.Action LIKE 'Ate%'
   ORDER BY Time DESC
   LIMIT 1
  ) AS Latest_Action,
  GROUP_CONCAT(Items.Item
               ORDER BY Items.Time DESC
               SEPARATOR ', '
              ) AS Items
FROM Leaderboard
     LEFT JOIN Items ON Leaderboard.Name = Items.Name
GROUP BY Leaderboard.Name
HAVING Latest_Action IS NOT NULL
ORDER BY Leaderboard.Score DESC 
```

结果在[SQL Fiddle](http://sqlfiddle.com/#!2/11255/5/0)中验证。

# yii - Yii 框架：使用 HAS_MANY、BELONGS_TO 进行分页

> ID：11415292
> 
> 赞同：0
> 
> 时间：2012-07-10T14:16:27.820
> 
> 标签：yii

我整天都在面对这个问题。

我有 2 个表服务和日志。每个 Service 可以有多个 Log，每个 Log 都属于一个 Service。我设法为两者生成了 CRUD 功能。这是我得到的：

应用程序/模型/Log.php

```
/**
 * @return array relational rules.
 */
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array
    (
        'services' => array(self::BELONGS_TO, 'Service', 'sv_ident_nr'),
    );
} 
```

应用程序/模型/Service.php

```
/**
 * @return array relational rules.
 */
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array
    (
        'logs' => array(self::HAS_MANY, 'Log', 'sv_ident_nr'),
    );
} 
```

应用程序/controlelrs/ServiceController.php

```
/**
 * Displays a particular model.
 * @param integer $id the ID of the model to be displayed
 */
public function actionView($id)
{
    $this->render('view', array
    (
        'model' => $this->loadModel($id),
    ));
} 
```

应用程序/视图/服务/view.php

```
<h1>Service: <?php echo $model->ident_nr; ?></h1>
<table class="dataGrid">
<tr>
    <th class="label"><?php echo CHtml::encode($model->getAttributeLabel('proj_nr')); ?></th>
    <td><?php echo CHtml::encode($model->proj_nr); ?></td>
</tr>
<tr>
    <th class="label"><?php echo CHtml::encode($model->getAttributeLabel('customer')); ?></th>
    <td><?php echo CHtml::encode($model->customer); ?></td>
</tr> 
```

```
<h1>Comments</h1>
<?php foreach ($model->logs as $log): ?>
<div class="comment" id="c<?php echo $log->id; ?>">
    <div class="actions">
        <?php 
            echo CHtml::link('View',array($this->createUrl('../log/view', array('id'=>$log['id']))));
            echo('&nbsp');
            echo CHtml::link('Update',array($this->createUrl('../log/update', array('id'=>$log['id']))));
            echo('&nbsp');
            echo CHtml::link('Delete',array($this->createUrl('../log/delete', array('id'=>$log['id']))));
        ?>
    </div>
    <div class="author">
        <?php 
            echo $log->logger;
        ?>
    </div>
    <div class="time">
        <?php echo date('j F Y \a\t h:i a', $log->created_at); ?>
    </div>

    <div class="content">
        <?php echo nl2br(CHtml::encode($log->comment)); ?>
    </div>

</div><!-- comment -->
<?php endforeach; ?> 
```

问题是：如何在“foreach 循环”中对结果进行分页？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:07:01.820

而不是 CGridView，请查看[CListView 的文档](http://www.yiiframework.com/doc/api/1.1/CListView)。它允许您进行分页、Ajax 检索等，同时还可以使用您自己的数据模板。很值得你花时间...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:24:01.823

根据我之前与您的讨论，我认为这就是您所追求的。

[Yii 简单分页](http://shanideveloper.blogspot.co.uk/2012/01/yii-pagination-simple.html)

# ruby-on-rails-3 - Rails 应用程序在父控制器中生成错误：id

> ID：11415293
> 
> 赞同：0
> 
> 时间：2012-07-10T14:16:31.153
> 
> 标签：ruby-on-rails-3, controller, nested-resources

我第一次使用 2 个资源，部门（部门）和成员创建了一个非常基本的 Rails 应用程序。我相信我已经正确使用了嵌套资源，但是由于某种原因，在运行 rails server 之后，父资源的 :id 没有正确生成/传递。Root 是 depts#index，从这里我可以使用在新视图和编辑视图中呈现的 _form.haml 进行新建和编辑。但是，当我执行 /depts/3 时，出现“找不到 id=3 的部门”的错误。单击以从索引进行编辑会在 URL 中给我 /depts/63/edit - 我不确定这个 id=63 来自哪里。尝试通过在 URL 中键入 /dept/63 来执行“显示”操作不起作用。起初我自己创建了 Depts，让它与所有动作和视图一起工作，自从我添加成员资源后出现了问题。

路线.rb

```
 resources :depts do
  resources :members
end 
```

depts_controller.rb

```
 def index
        @depts = Dept.all

        respond_to do |format|
          format.html
          format.json { render :json => @depts }
        end
      end

      def show
        @dept = Dept.find(params[:dept_id])

        respond_to do |format|
          format.html
          format.json { render :json => @dept }
        end
      end

      def new
        @dept = Dept.new(params[:dept])

        respond_to do |format|
          format.html
          format.json { render :json => @dept }
        end
      end

      def create
        @dept = Dept.new(params[:dept])

        respond_to do |format|
          if @dept.save
             format.html { redirect_to :action => 'index' }
             format.json { render :json => @dept }
          else
             format.html { render :action => 'new' }
             format.json { render :json => @dept }
          end
        end
      end

      def edit
        @dept = Dept.find(params[:id])
      end

      def update
        @dept = Dept.find(params[:id])

        respond_to do |format|
          if @dept.update_attributes(params[:dept])
             format.html { redirect_to :action => 'index'}#, :id => @dept }
             format.json { render :json => @dept }

          else
             format.html { redirect_to :action => 'edit' }
             format.json { render :json => @dept }
          end
        end
      end

    def destroy
        @dept = Dept.find(params[:id])
        @dept.destroy

        respond_to do |format|
          format.html { redirect_to :action => 'index' }
          format.json { render :json => @dept }
        end
      end
    end 
```

显示.haml

```
 %p= @dept.name

    %p= link_to "back", {:action => 'index'} 
```

索引.haml

```
 %h1 DEPARTMENTS

    %ol
      - @depts.each do |d|
        %li= link_to d.name
        %p= link_to 'edit department', edit_dept_path(d)
        %p= link_to 'get rid of department!', d, :method => :delete, :id => d.id

      %br
    %p= link_to "ADD A NEW DEPARTMENT", new_dept_path 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:46:44.670

在显示方法更改中：

```
@dept = Dept.find(params[:dept_id]) 
```

至：

```
@dept = Dept.find(params[:id]) 
```

并在新方法更改中：

```
@dept = Dept.new(params[:dept]) 
```

只是：

```
@dept = Dept.new 
```

# sql - 如何在一个脚本中检查多个 sql 表中是否存在数据？

> ID：11415294
> 
> 赞同：0
> 
> 时间：2012-07-10T14:16:32.470
> 
> 标签：sql, sql-server, sql-server-2008

我有超过 3 个 sql 表。

现在我正在尝试`select count(*)`从所有表中，但我该怎么做呢？

我想知道数据是否存在于所有表中

`I need to check the row count from previous business day ~15% for any table and it sends an email alert`

我试过如下请帮我完成

```
PROCEDURE [dbo].[SendEmail_WSOTableDataAlert]
AS
BEGIN

declare @err int
IF NOT EXISTS (select 1 from T1) OR
NOT EXISTS (select 1 from T2)
BEGIN
set @error=1
END

//here i need to show which table is having empty data how can i do this please help

SET @tableHTML = @tableHTML +  +
            '</TABLE>' + @EmailFooter;

@error =1

then 
```

发邮件

```
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:21:48.897

您可以尝试将指示零计数的标志相乘。如果其中任何一个为零，则结果将为零。

```
select (case when (select count(*) from table1)=0 then 0 else 1 end
      *case when (select count(*) from table2)=0 then 0 else 1 end
      *case when (select count(*) from table3)=0 then 0 else 1 end) as no_zeros 
```

如果您想知道哪个表全为零，可以按如下方式转换查询：

```
select (case when (select count(*) from table1)=0 then 1 else 0 end
      +case when (select count(*) from table2)=0 then 2 else 0 end
      +case when (select count(*) from table3)=0 then 4 else 0 end
      +case when (select count(*) from table4)=0 then 8 else 0 end) as no_zeros 
```

使用 2 的幂（1、2、4、8、16、32 等）作为您的标志。结果`1`的二进制表示形式将告诉您哪些表没有记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:22:25.950

```
Select 
    case when count(*) = 0 then 
        'No rows' 
    else 
        'Has rows'
    end 
FROM
(
   Select * from @table1
   UNION ALL
   Select * from @table2
   UNION ALL
   Select * from @table3
) t 
```

**更新**

这样可以确保所有人都至少有一行并且如果其中任何一个没有记录则失败

```
Select 
    case when count(*) = 0 then 
        'No rows' 
    else 
        'Has rows'
    end 
FROM
(
   Select top 1 1 found from @table1
   intersect
   Select top 1 1 found from @table2
   intersect
   Select top 1 1 found from @table3
) t 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:25:37.893

You can use the `EXISTS` keyword to efficiently check if there is any data in a table.

```
IF NOT EXISTS (SELECT 1 FROM Table1) OR NOT EXISTS (SELECT 1 FROM Table2) OR NOT EXISTS (SELECT 1 FROM Table3) 
BEGIN
   /* do something */
END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T14:23:09.643

(select count( *) from table1) union all (select count(* ) from table2) union all (select count(*) from table3)

然后遍历结果的行

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T14:23:16.133

```
declare @count1 int 
select @count1 = count(*)
from table1

declare @count2 int 
select @count2 = count(*)
from table2

declare @count3 int 
select @count3 = count(*)
from table3

if (@count1 + @count2 + @count3 = 0)
    --do something
else 
    --do something else 
```

# android - 当我针对 Android 中的特定设备/平台时，在构建过程中需要自定义哪些文件？

> ID：11415297
> 
> 赞同：0
> 
> 时间：2012-07-10T14:16:43.157
> 
> 标签：android, build, android-source

在构建新的 Android 映像时，我找不到需要开发人员注意的文件的明确列表。

到目前为止，我发现的所有指南都太通用或太旧了。

我想我对定制平台不感兴趣，我只想要香草味，但只适用于我的设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:01:55.067

答案有点复杂。你可能**无法**为你的设备构建一个普通的 Android，除非你的设备是谷歌开发者手机之一。[以下是您可以构建 Android 的设备列表](http://source.android.com/source/building-devices.html)。原因是制造商通常不会发布为其设备实际构建 Android 所需的所有部件。

但是看看[cyanogenmod 项目](http://www.cyanogenmod.com/)，[看看他们是否支持你的设备](http://www.cyanogenmod.com/devices)。他们试图为制造商自己不支持的设备制作“香草”安卓资源。在我看来，他们做得很好。我已经为我的 Galaxy SII 定制了 Android 4.0 版本，运行了几个月，并且运行良好。

如果您使用正在使用的设备更新您的问题，我可能会提供有关如何为您的特定设备构建 cyanogenmod 的详细信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T14:36:21.837

你想做什么 ？声明某些图像或布局仅特定于一个设备？

您不能使用文件夹上的选择器（-large、-fr、...）来执行此操作，而是使用一些代码。看看这个：http: [//developer.android.com/reference/android/os/Build.html#MODEL](http://developer.android.com/reference/android/os/Build.html#MODEL)，

# javascript - 用于包装数组项的 Javascript 标签

> ID：11415298
> 
> 赞同：0
> 
> 时间：2012-07-10T14:16:44.970
> 
> 标签：javascript

如何`<LI>`使用 javascript 将数组的每个项目包装在标签中并将其显示为有序或无序列表？

我在 javascript 中有一个数组，例如 (Test1,test2,test3)

我想将数组的所有元素显示为列表项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:20:44.673

> 如何`<LI>`使用 javascript 将数组的每个项目包装在 Tag 中？

假设数组包含 DOM 节点对象：

```
var li, i;
for (i = 0; i < arr.length; i++) {
    li = document.createElement('li');
    li.appendChild(arr[i]);
    arr[i] = li;
} 
```

> 并将其显示为有序列表或无序列表？

添加一行：

```
someList.appendChild(li); 
```

...在 for 循环内。如果您这样做，您可能不想更改数组本身的值（因此删除该`arr[i] =`行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:21:49.947

```
for (i = 0; i < myArray.length; i++) {
    var liElement = document.createElement('li');
    liElement.appendChild(myArray[i]);
} 
```

# delphi - 如何确保某个“最终确定”部分是最后一个执行的部分？

> ID：11415299
> 
> 赞同：1
> 
> 时间：2012-07-10T14:16:47.200
> 
> 标签：delphi, delphi-7, finalization

我的 Delphi 7 项目中有许多带有“定稿”部分的单元。

如何确保最后执行一些代码？

我试图在 .dpr 文件中写一个“最终化”部分，但它没有编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T14:26:19.317

There's a good explanation on the finalization ordering for code in [Unit finalization order for application compiled with run-time packages](https://stackoverflow.com/questions/2628859/unit-finalization-order-for-application-compiled-with-run-time-packages) - the questioner came up with a reasonable way to ensure that his ordering worked - add the module **at the start** of the uses clause of the project, and ensure that the module in question **does not use any other units**.

**Edit**: Took David Heffernan's addendum on-board.

# jquery - jQuery：在同一个脚本文件中有多个 $(function) 是错误的吗？

> ID：11415302
> 
> 赞同：1
> 
> 时间：2012-07-10T14:16:50.147
> 
> 标签：jquery

> **可能重复：**
> [jQuery - 有多个 $(document).ready(function() {});](https://stackoverflow.com/questions/1148241/jquery-is-it-bad-to-have-multiple-document-readyfunction)
> [你可以有多个 $(document).ready(function() 部分吗？](https://stackoverflow.com/questions/1327756/can-you-have-multiple-document-readyfunction-sections)

这是我唯一的项目 jQuery 文件

```
// loading search page
$(function(){
  $("#search").click(function() {
    $("#feature").load("templates/search.html", function() {
        $("#search-input").focus();
        $("#search-input").css({
            "margin-left": "20%",
            "margin-top" : "2%"
        });
    });
 });
});

/* 
finding youtube videos
API source : https://developers.google.com/youtube/2.0/developers_guide_jsonc
*/
$(function(){
    $('#search-input').live('keyup',function() {
        var search_input = $(this).val();
        var keyword = encodeURIComponent(search_input);
        var yt_url = 'http://gdata.youtube.com/feeds/api/videos?q='+keyword+'&format=5&max-results=10&v=2&alt=jsonc';

        $.ajax({
          url: yt_url,
          type: 'GET',
          dataType: 'jsonp',
          complete: function(xhr, textStatus) {
            //called when complete
          },
          success: function(response, textStatus, xhr) {
            if(response.data.items) {
                var template = $('#item').clone();
                $('#result').html(template);
                $.each(response.data.items, function(i, data) {
                    //console.log(data)
                    search_data = {
                        'id': data.id,
                        'title': data.title,
                        'views': data.viewCount,
                        'thumbnail': data.thumbnail['sqDefault'],
                    }
                    item = video_result_template(search_data);
                    $('#result').append(item).fadeIn('slow');
                });
            } else {

            }
          },
          error: function(xhr, textStatus, errorThrown) {
            //called when there is an error
          }
        });
    });
});

// filling out the search template
function video_result_template(data) {
    var item = $('#item').clone();
    item.removeClass('hide-item');
    item.find('img').attr('src', data.thumbnail);
    item.find('.title').html(data.title);
    item.find('.views').html(data.views);
    item.attr('id', data.id);
    item.addClass('view-item');
    return item;
}

// playing the video from search result on player pane
$(function(){
    $('.item').live('click', function(){
        // alert(this.id);
        var url = $('#video-frame').attr('src');
        var new_url = url.replace(/embed\/[\w -]*/g, 'embed/' + this.id);
        $('#video-frame').attr('src', new_url);
    });
});

// creating new playlist
$(function() {
    $('form input[type="text"]').live('keyup', function() {
        var val = $.trim(this.value);
        $('form .create-playlist-button').prop('disabled', val.length == 0).click(function(e){
            var title = $(e.target).closest('.video-detail').find('.title').text();
            alert(title);
        });
    });

    // $('form .create-playlist-button').live('click', function(e){
    //  var title = $(e.target).closest('.video-detail').find('.title').text();
    //  alert('title');
    // });
        // $('form .create-playlist-button').prop('disabled', val.length == 0).click(function(){
        //          alert($('.title').get(1).textContent);
        //      });

});

// animating slideshow on landing page
$(function(){
    $('#slides').slides({
        preload: true,
        pagination: true,
        preloadImage: '../static/img/loading.gif',
        play: 2000,
        pause: 1000,
        hoverPause: true
    });

    $('.slides_control').css({
        "height": "600px",
        "margin-right": "400px"
    });

    $('.pagination').hide('');
}); 
```

**问题**

*   这个 jquery 页面有多个 $(function)(意味着当 DOM 准备好时) 函数，这是不正确的吗？鉴于
*   一些 jQuery 函数适用于不同的页面
*   一些元素稍后出现在页面上（参见 load() 函数）

这一切如何运作？我不太确定，但这里似乎有问题，这意味着绝对有机会向经常这样做的人学习

PS - 我对 jQuery 领域完全陌生。我一直在努力完成我的第一个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:26:02.377

**YES** you can use it in this way without any error, but to make your code more `neat` and `readable` you should not repeat the tags un-necessarily.

***Note:*** **Variable declared in one function will not be accessible in other functions so you will need to be careful about variable scope in repeating function bodies.**

Hope this helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:21:40.387

当您使用时，`$(function() {..});`您实际上会这样做：`$(document).ready(function() {..});`这是向文档的就绪事件注册一个函数。
您所做的就像将多个功能注册到一个有效且正确的单击事件中。

希望我清楚。

# javascript - 如何在 Ext JS Grid 的页面栏中更新组件（ext.form.label）中的文本

> ID：11415305
> 
> 赞同：1
> 
> 时间：2012-07-10T14:16:52.650
> 
> 标签：javascript, extjs, extjs3

我必须在 Ext JS Grid PageBar 中添加一个标签来显示动态数据。我添加了它。我需要在数据更改时更新它。但它不会覆盖标签中的数据。它在页面栏中使用新数据创建新标签。

这是我的代码

```
 listeners : {
            change : function(thisd, params){
                var label = new Ext.form.Label({}); 
                var count = Grid.getStore().getCount();
                label.setText('(no : ' + count + ')');
                Bbar.items.add(label);
                Bbar.doLayout();
            }   
        } 
```

必须感谢任何帮助...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:08:50.923

当然，它每次都在创建新标签——这就是你编程的方式。您需要创建一次标签，为其分配某种标识符（id、itemId 等），然后在您的侦听器中找到该标签并调用`setText()`它。

# xml - 将 Clob 与 Spring NamedParameterJdbc 模板一起使用

> ID：11415308
> 
> 赞同：2
> 
> 时间：2012-07-10T14:17:07.143
> 
> 标签：xml, string, spring, clob

我需要将大型 XML 数据存储到 CLOB 并将 CLOB 转换回 String

但问题是我们正在使用（Spring NamedParameterJdbc 模板）

```
SqlParameterSource paramSource = new BeanPropertySqlParameterSource(
            positionResponsesDO);
this.jdbcTemplate.update(sql, paramSource); 
```

PositionResponsesDO 具有获取和设置属性的位置

```
private Clob xmlData; 
```

现在我需要将字符串数据（大）转换为 Clob，将 Clob 转换为字符串。请向我建议最好的方法。

我不能使用文件操作，因为它是 WebApp

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:39:43.233

您可以使用[`LobHandler`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/support/lob/LobHandler.html)and[`LobCreator`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/support/lob/LobCreator.html)获取 Clob 和 Blob 并将它们变成其他东西。

[Spring 文档](http://static.springsource.org/spring/docs/3.0.x/reference/jdbc.html#jdbc-lob)在这里讨论了它们。

要将 clob 或 blob 列`query()`转换`NamedParameterJdbcTemplate`为`RowMapper`.

```
LobHandler lobHandler = new DefaultLobHandler();
jdbcTemplate.query(sql, paramSource,
    new RowMapper<Void>() {
        public Void mapRow(ResultSet rs, int i) throws SQLException {
            String clobText = lobHandler.getClobAsString(rs, "clobColumnName");                                                
            byte[] blobBytes = lobHandler.getBlobAsBytes(rs, "blobColumnName");                                                
            return null;
        }
    }); 
```

# php - PDO 参数号无效 - 注释中的参数

> ID：11415314
> 
> 赞同：1
> 
> 时间：2012-07-10T14:17:42.907
> 
> 标签：php, sql, pdo

今天我遇到了一个我以前从未见过的错误（在 PDO 中），但仔细想想就很明显了。

我收到以下错误： `Warning: PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: Invalid parameter number:`

我使用的查询类似于以下内容：

```
SELECT
    x
FROM
    y
WHERE
    -- CHECKING IF X = :Z --
    x = :y
AND
    1 = 2 
```

显然我有更多的参数和更长的查询。

为什么它给我这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:17:44.280

解决方案很明显：PDO 不理会这样的注释并尝试绑定不存在的变量 ':Z'。您不能在 PDO 的注释中使用参数（除非您绑定它们）。

[在评论中使用问号也有类似的错误。](https://stackoverflow.com/questions/11415355/pdo-invalid-parameter-number-mixed-named-and-positional-parameters-question/)

# ios - 将 NSArray 保存到 NSUserDefaults 问题（使用数组中的自定义对象）

> ID：11415322
> 
> 赞同：2
> 
> 时间：2012-07-10T14:17:57.050
> 
> 标签：ios, nsuserdefaults

我尝试将我的对象保存到`NSUserDefaults`. 但是当我再次调用此方法时，它没有任何有关先前操作的信息。

下面有我的方法：

```
- (void)addToCart {
    if([[NSUserDefaults standardUserDefaults] objectForKey:kCart]) {
        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
        NSMutableArray *products = [[NSMutableArray alloc] initWithArray:[prefs objectForKey:kCart]];
        [products addObject:self.product];
        [prefs setObject:products forKey:kCart];
        [prefs synchronize];
        [products release];
    }
    else {
        //Saving...        
        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
        [prefs setObject:[NSArray arrayWithObjects:self.product, nil] forKey:kCart];
        [prefs synchronize];
    }   
} 
```

我需要将带有产品的集合保存到 NSUserDefault。我将我的对象包装到 NSArray 并保存它，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:57:39.627

您需要遵守`<NSCoding>`协议`-initWithCoder:`并`-encodeWithCoder:`在您的自定义对象中实现和。

请参阅：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:05:29.680

放入的所有内容都`NSUserDefaults`必须是有效的属性列表对象（`NSData`、`NSString`、`NSNumber`、`NSDate`、`NSArray`或`NSDictionary`）。所有集合元素本身也必须是属性列表对象。

为了将非 PL 对象保存到`NSUserDefaults`中，您必须首先将对象转换为 PL 对象。最通用的方法是将其序列化为`NSData`.

序列化到`NSData`是用 处​​理的`NSKeyedArchiver`。有关此规范的示例，请参阅[在用户默认值中存储 NSColor 。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DrawColor/Tasks/StoringNSColorInDefaults.html)（该文档非常旧，并且仍然引用`NSArchiver`可以很好地解决此问题，但`NSKeyedArchiver`现在是首选的序列化程序。）

为了使用 归档`NSKeyedArchiver`，您的对象必须符合`NSCoding`@harakiri 的说明。

# java - 使用 JarOutputStream 创建的 jar 的 URLClassLoader 问题

> ID：11415336
> 
> 赞同：0
> 
> 时间：2012-07-10T14:18:38.867
> 
> 标签：java, jar, classloader, urlclassloader

URLClassLoader 类无法从使用下面列出的代码以编程方式创建的 jar 加载类，而当我使用**jar cf %jarname% %sources%**创建具有相同类的 jar 时，它工作正常。**使用jar cf**和**JarOutputStream**创建的 jar 之间是否有区别。

```
public static ByteArrayInputStream createJar(File file) throws IOException {
    Manifest manifest = new Manifest();
    manifest.getMainAttributes().put(Attributes.Name.MANIFEST_VERSION, "1.0");
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    JarOutputStream target = new JarOutputStream(bytes, manifest);
    for (File child : file.listFiles()) {
        addJarEntries(child, target, "");
    }
    target.flush();
    target.close();
    return new ByteArrayInputStream(bytes.toByteArray());
}

private static void addJarEntries(File source, JarOutputStream target, String path) throws IOException {
    BufferedInputStream in = null;
    try
    {
        if (source.isDirectory())
        {
            String name = path +source.getName() + File.separator;
            for (File nestedFile: source.listFiles())
                addJarEntries(nestedFile, target, name);
            return;
        }

        in = new BufferedInputStream(new FileInputStream(source));

        JarEntry entry = new JarEntry(path + source.getName());
        entry.setTime(source.lastModified());
        target.putNextEntry(entry);
        while (true)
        {
            int count = in.read(buffer);
            if (count == -1)
                break;
            target.write(buffer, 0, count);
        }
        target.closeEntry();
    }
    finally
    {
        if (in != null)
            in.close();
    }
} 
```

最好的问候， 凯沙夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:31:25.000

该`jar`命令用于`JarOutputStream`创建一个 JAR 文件（[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/tools/jar/Main.java)），因此它不能是该类*本身*的错。但是，您可能错过了 JAR 创建过程中的一些重要步骤。例如，您可能包含了格式错误的清单。

您应该能够将您的代码与`jar`命令的源代码进行比较，看看您是否遗漏了一些重要的东西。

# asp.net-mvc-3 - 未从 Ajax 调用 ASP.Net MVC 3 操作

> ID：11415338
> 
> 赞同：1
> 
> 时间：2012-07-10T14:18:46.183
> 
> 标签：asp.net-mvc-3, jquery, asp.net-ajax

我正在开发一个 ASP.Net MVC 3 Web 应用程序。我的 Razor 视图之一包含一些文本框和一个下拉列表。当用户从下拉列表中选择一个选项时，将执行以下 JQuery 代码

**看法**

```
<select id="myDDL">
    <option></option>
    <option value="1">F1</option>
    <option value="2">F2</option>
    <option value="3">ST1</option>
    <option value="4">ST2</option>
</select>

<div id="someDivToLoadContentTo">

</div> 
```

**jQuery**

```
$(document).ready(function () {

$("#myDDL").change(ChangeEventOfDDL);

function ChangeEventOfDDL(){
var dropDownValue = $('#myDDL').val();
//alert(dropDownValue);
$.ajax({ type: "GET",
       url: '@Url.Action("SomePartialView","testAjax")',
       data: {
           id: dropDownValue
       },
       success: function(data) {
             $('#someDivToLoadContentTo').html(data);
       }
    });
}

}); 
```

**控制器**

```
public class testAjaxController : Controller
{

    public ActionResult SomePartialView(int id)
    {
        var test = "Hello World";

        return View(test);
    }
} 
```

但是，当我在**testAjax控制器中的****SomePartialView**方法上放置断点时，它永远不会被命中。

 **谁能建议这是为什么？

任何帮助将不胜感激。

谢谢。

**更新**

我像这样在我的 Ajax 调用中添加了 errorData 行，但这似乎也没有给我任何东西

$(文档).ready(函数 () {

```
$("#myDDL").change(ChangeEventOfDDL);

function ChangeEventOfDDL(){
var dropDownValue = $('#myDDL').val();
//alert(dropDownValue);
$.ajax({ type: "GET",
       url: '@Url.Action("SomePartialView","testAjax")',
       data: {
           id: dropDownValue
       },
       success: function(data) {
             $('#someDivToLoadContentTo').html(data);
       },
       error: function (errorData) { $('#someDivToLoadContentTo').html(errorData); }
    });
}

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:38:29.617

如果您要向控制器发送一个值，您需要使用`POST`，而不是`GET`.

```
type: "POST" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:49:09.170

伙计们，问题出在以下行

```
url: '@Url.Action("SomePartialView","testAjax")' 
```

这是创建了一个不正确的 URL，因此，该操作从未被调用。我更改为以下行，然后纠正了问题

```
url: '/testAjax/SomePartialView/' + dropDownValue 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:32:17.480

我想我可能已经发现了：

尝试改变这个：

```
 data: {
       id: dropDownValue
   }, 
```

对此：

```
 data: {
       'id': dropDownValue
   }, 
```

目前我认为可能会混淆 id 与任何东西无关。**

# php - 解析错误：语法错误，意外的 '<' -----当使用 echo << 我已经投入了 2 天的大部分工作来尝试解决这个问题，当我在本地机器上加载以下代码时它可以工作，当我在云上的真实站点上执行它时会提示这个错误。 Parse error: syntax error, unexpected '<' 当它到达第 问问题 问问题 2012-07-10T14:18:52.113 1560 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我已经投入了 2 天的大部分工作来尝试解决这个问题，当我在本地机器上加载以下代码时它可以工作，当我在云上的真实站点上执行它时会提示这个错误。 Parse error: syntax error, unexpected '<' 当它到达第 74 行时会发生这种情况 73 $fullAddress
Phone: 目前我的网站被破坏了，任何帮助都将不胜感激。 代码： fldAddress1, $row->fldAddress2, $row->fldCity, $row->fldCounty, $row->fldPostcode ); $fullAddress = implode(", ", array_filter($addressArray)); $locationAsString = str_replace(array('-',"."), ' ', $row->location); $locationAsString = str_replace("ireland", "northern ireland", $locationAsString); $addressTeaser = $row->fldCity . ", " . $row->fldCounty . ", " . $row->fldPostcode . ", " . $locationAsString; $shopName = $row->fldShopNameTidy; $head = substr($shopName,0,1); $head = strtoupper($head); $storeHasWebsite = ($row->fldShopWebsite != "" && $row->fldShopWebsite != " " && $row->fldShopWebsite != null); $storeHasStudio = $row->fldSSStudio; $storeHasSnappyStudio = $row->fldStudio; $storeHasBusinessPrinting = $row->fldBusiness; $storeHasAnyStudio = $storeHasStudio || $storeHasSnappyStudio; $storeHasAnyExtras = $storeHasStudio || $storeHasSnappyStudio || $storeHasBusinessPrinting; $distance = $row->distance; if ($distance < 100) { ?>$head fldShopNameTidy); ?> [fldShopName); ?>](/stores/<?php echo($row->fldShopNameTidy); ?>) distance) { echo("($row->distance miles)
"); } ?> [![](/assets/images/icons/start-shopping-off.png "Start Shopping")Click & Collect](http://<?php echo($row->fldShopWebsite); ?>)
[![](/assets/images/icons/map-32-off.png "map")Map ](/stores/<?php echo($row->fldShopNameTidy); ?>/map) [ ![](/assets/images/icons/directions-32-off.png "directions")Directions ](/store-finder/direction/<?php echo($row->fldShopNameTidy); ?>)  ![](/assets/images/icons/store-contact-off.png "Contact") Contact details$fullAddress
Phone: $row->fldShopTel
$row->fldShopEmail

* * *

Get these contact details by: email or text  $row->fldID

* * *

END; ?>fooSpecialist services: END; } if ($storeHasStudio){ echo << <end <img="" src="/assets/images/icons/portrait-studio.jpg" title="Snappy Snaps Studio">END; } if ($storeHasSnappyStudio){ echo << <end <a="" href="http://www.snappystudio.com/" target="_blank" rel="nofollow">![](/assets/images/icons/snappy-studio-off.png "Snappy Studio") END; } if ($storeHasBusinessPrinting){ echo <<<end <a="" href="http://www.snappysnapsprinting.co.uk/" target="_blank" rel="nofollow">![Snappy Snaps business printing](/assets/images/icons/business-printing-off.png "Business printing") END; } ?></end></end></end> 创建格式和提供程序的序列，然后使用复合键（读取：元组）查找当前元素中值的索引。 phpsyntax 4 3 回答 3 This answer is useful 1 之后可能有空格<< <end。这行不通。检查该行末尾是否绝对没有空格。 0="" 1="" 2="" 3="" 6="" 要么是以某种方式添加它，要么您可能正在使用="" crlf="" 作为代码中的换行符的环境（windows？）到仅使用="" cr="" 的机器（linux？）="" 于="" 2012-07-10t14:28:34.267="" 回答="" this="" answer="" is="" useful="" 你的语法看起来不错。您可能想尝试使用变量：="" $html="<<<END" bla="" end;="" echo="" $html;="" 2012-07-10t14:32:51.807="" <<<_end="" woah,="" it="" works!="" _end;="" 我认为您尝试使用heredoc构造。php.net。这是正确的语法，试试吧="" 2012-07-10t14:24:15.203="" related="" delphi="" -="" idhttp="" 在异常时停止="" html="" 删除="" html5="" 画布中的错误="" web-services="" 实体管理器是否应该在="" ejb="" 中由我们自己关闭？="" c++="" 为什么="" gloox="" 标准示例="" src="" examples="" ft_send.cpp="" 在我的机器上不起作用？="" actionscript-3="" 我将视频录制到="" fms="" 想要提高视频质量。="" android="" 如何在="" libgdx="" 中创建加载屏幕？="" build="" 如何更改="" gradle="" 下载位置="" java="" 限制="" vaadin="" 中的窗口拖动移动="" ckeditor="" 如何使用="" ck="" 编辑器自动保存和嵌入密钥？="" sql-server-2008="" 如何将具有="" varchar="" 数据类型的日期列转换为另一种日期格式="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：11415340
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, syntax

我已经投入了 2 天的大部分工作来尝试解决这个问题，当我在本地机器上加载以下代码时它可以工作，当我在云上的真实站点上执行它时会提示这个错误。

```
Parse error: syntax error, unexpected '<' 
```

当它到达第 74 行时会发生这种情况

```
73  <?php
74  echo <<<END
75  <p>$fullAddress<br />Phone: 
```

目前我的网站被破坏了，任何帮助都将不胜感激。

代码：

```
<?php
    $addressArray = array(
        $row->fldAddress1,
        $row->fldAddress2,
        $row->fldCity,
        $row->fldCounty,
        $row->fldPostcode
    );

    $fullAddress = implode(", ", array_filter($addressArray));

    $locationAsString = str_replace(array('-',"."), ' ', $row->location);
    $locationAsString = str_replace("ireland", "northern ireland", $locationAsString);

    $addressTeaser = $row->fldCity . ", " . $row->fldCounty . ", " . $row->fldPostcode . ", " . $locationAsString;

    $shopName = $row->fldShopNameTidy;
    $head = substr($shopName,0,1);
    $head = strtoupper($head);

    $storeHasWebsite = ($row->fldShopWebsite != "" && $row->fldShopWebsite != " " && $row->fldShopWebsite != null);
    $storeHasStudio = $row->fldSSStudio;
    $storeHasSnappyStudio = $row->fldStudio;
    $storeHasBusinessPrinting = $row->fldBusiness;
    $storeHasAnyStudio = $storeHasStudio || $storeHasSnappyStudio;
    $storeHasAnyExtras = $storeHasStudio || $storeHasSnappyStudio || $storeHasBusinessPrinting;

    $distance = $row->distance;

    if ($distance < 100) {

?>

<tr>
    <td>

<?php boxLightHeader(); ?>

    <div class="store-details-main-wraper">
        <a id="<?php echo($head); ?>" name="<?php echo($head); ?>" style="display:block;height:0px;width:0px;overflow:hidden;">$head</a>

        <span class="shopnametidy" style="display:none;"><?php echo($row->fldShopNameTidy); ?></span>

        <span class="shoplisttitle"><a href="/stores/<?php echo($row->fldShopNameTidy); ?>"><?php echo($row->fldShopName); ?></a></span>
        <span>
            <?php
                if ($row->distance) {
                    echo("($row->distance miles)<br />");
                }
            ?>
        </span>

        <?php if ($storeHasWebsite) { ?>
            <a href="http://<?php echo($row->fldShopWebsite); ?>" class="web-clickthru-tracking" target="_blank" rel="nofollow">
             <img src="/assets/images/icons/start-shopping-off.png" title="Start Shopping" class="img-swap" />Click &amp; Collect</a><br >
        <?php } ?>

        <div>
             <a href="/stores/<?php echo($row->fldShopNameTidy); ?>/map" class="map-tracking ">
                <img src="/assets/images/icons/map-32-off.png" title="map" class="img-swap" />Map 
            </a>

            <a href="/store-finder/direction/<?php echo($row->fldShopNameTidy); ?>" class="directions-tracking">
                <img src="/assets/images/icons/directions-32-off.png" title="directions" class="img-swap" />Directions
            </a>

            <span class="contactStore details-tracking">
            <img src="/assets/images/icons/store-contact-off.png" title="Contact" class="img-swap" />
            Contact details</span>

            <div class="contact-details-slider" style="height:140px;">
            <div class="contact-details" style="float:left;">
<?php
echo <<<END
<p>$fullAddress<br />Phone:
$row->fldShopTel<br />
$row->fldShopEmail</p>
<hr class="hor-bar-color" />
<p>Get these contact details by:

<span class="sendEmailNew sendLink details-email-tracking" style="font-weight:bold; font-size:1.2em; text-decoration:underline">email</span> or
<span class="sendTextNew sendLink details-text-tracking" style="font-weight:bold; font-size:1.2em; text-decoration:underline">text</span>
<input name="shopId" type="hidden" value="$row->fldID" />
<span class="shopId" style="display:none;">$row->fldID</span></p><hr class="hor-bar-color" />
END;
?>  
            </div>
            <div class="contact-form-placeholder" style="display:none;">foo</div>
            </div>
        </div>

        <div class="extra-services">
<?php
if ($storeHasAnyExtras) {
echo <<<END
<span class="contactStore details-tracking">Specialist services:</span> 
END;
}

if ($storeHasStudio){
echo <<<END
<img src="/assets/images/icons/portrait-studio.jpg" title="Snappy Snaps Studio" />
END;
}

if ($storeHasSnappyStudio){
echo <<<END
<a href="http://www.snappystudio.com/" target="_blank" rel="nofollow"> <img src="/assets/images/icons/snappy-studio-off.png" class="img-swap" title="Snappy Studio" /></a>
END;
}

if ($storeHasBusinessPrinting){
echo <<<END
<a href="http://www.snappysnapsprinting.co.uk/" target="_blank" rel="nofollow"><img src="/assets/images/icons/business-printing-off.png" class="img-swap" title="Business printing" alt="Snappy Snaps business printing" /></a>
END;
}
?>

    <span class="shoplistservice" style="visibility:hidden; font-size:2px;">
        <?php
            if ($storeHasAnyStudio){
                echo "Studio ";
            }
            if ($storeHasBusinessPrinting){
                echo "Business Printing";
            }
        ?>
    </span>

    <span class="shoplistaddress" style="visibility: hidden">
        <?php echo($addressTeaser); ?>
    </span>
    </div>
    </div>
<?php boxLightFooter(); ?>

    </td>
</tr>

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:28:34.267

之后可能有空格`<<<END`。这行不通。检查该行末尾是否绝对没有空格。

要么是以某种方式添加它，要么您可能正在使用 CRLF 作为代码中的换行符的环境（Windows？）到仅使用 CR 的机器（Linux？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:32:51.807

你的语法看起来不错。您可能想尝试使用变量：

```
$html = <<<END
bla
bla
END;
echo $html; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:24:15.203

`echo <<<_END`
`//Woah, it works!`
`_END;`

我认为您尝试使用*heredoc*构造。[PHP.net](http://php.net/manual/en/language.types.string.php)。这是正确的语法，试试吧</end。这行不通。检查该行末尾是否绝对没有空格。>

# cakephp - CakePHP 2.0：显示关联记录

> ID：11415343
> 
> 赞同：1
> 
> 时间：2012-07-10T14:19:04.037
> 
> 标签：cakephp, associations, cakephp-2.0

我知道解决方案很简单，可能与 Containable 行为有关，但我无法让它发挥作用。没有所有的尝试

情况就是这样。我想显示事件的事件详细信息（例如会议）。每个活动都在一个 EventVenue 中进行，每个 EventVenue 都位于一个国家/地区。

因此，在国家模型中存在以下内容：

```
public $hasMany = array(
    'EventVenue' => array(
        'className' => 'EventVenue',
        'foreignKey' => 'country_id'
)) 
```

在 EventVenue 模型中，建立了 BelongsTo 关联

```
public $belongsTo = array(
    'Country' => array(
        'className' => 'Country',
        'foreignKey' => 'country_id'
)) 
```

并且在 Event 模型中建立了一个 hasOne 关联

```
 public $hasOne = array(
    'EventVenue' => array(
        'className' => 'EventVenue',
        'foreignKey' => 'event_id',
 )) 
```

我想要的是在事件控制器中呈现的页面上显示国家名称。我确实获得了所有 Event 和 EventVenue 数据，但未检索到场地的相关国家/地区。

通过以下方式检索数据

```
 $item = $this->Event->findBySlug($slug); 
```

我怎样才能从数据库中检索到国家名称（例如荷兰）？我尝试了这样的事情，但没有奏效：

```
 $item = $this->Event->findBySlug($slug,array(
    'contain' => array(
        'Event' => array(
            'EventVenue' => array(
                'Country'
            )
        )
    )
 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:36:43.793

尝试这个：

```
$item = $this->Event->findBySlug($slug,array(
    'contain' => array(
        'EventVenue' => array(
            'Country'
        )
    )
); 
```

**更新**

原来 findBy 不支持 Containable。您可以使用它来获得所需的结果：

```
$item = $this->Event->find('first',array(
    'conditions' => array(
        'Event.slug' => $slug
    ),
    'contain' => array(
        'EventVenue' => array(
            'Country'
        )
    )
); 
```

哦，确保你在模型中有这个：`public $actsAs = array('Containable');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:40:17.610

在进行查找之前，您需要将递归设置为 2，如下所示

```
$this->Event->recursive = 2; 
```

有了这个，您将一举获得 Event、EventVenue 和 Country

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:01:51.523

试试这个方法：

```
$this->Event->recusive = 2;
$item = $this->Event->findBySlug($slug); 
```

# asp.net-mvc - Jquery ui对话框关闭事件？

> ID：11415347
> 
> 赞同：3
> 
> 时间：2012-07-10T14:19:12.447
> 
> 标签：asp.net-mvc, jquery-ui, dialog

我想在关闭对话框时刷新页面？这可能吗？我怎样才能做到这一点？有一些链接可以打开它们自己的对话框。但是当我第一次点击任何链接时，对话框缓存它的 id，然后我点击其他链接 id 总是相同的（第一次点击 id）。

关闭对话框时我应该刷新页面还是有其他方法可以解决此问题。

我使用下面的代码打开对话框：

```
@foreach (var item in Model)
{
   <tr>
       <td>@Html.ActionLink(linkText: item.musteri_adi,
           actionName: "MusteriDuzenle",
           controllerName: "Musteri",
           routeValues: new { sno = item.sno },
           htmlAttributes: new { @class = "open_dialog", data_dialog_title = item.musteri_adi })
       </td>
       <td>@Html.DisplayFor(x => item.fatura_adresi)
       </td>
   </tr>
} 
```

谢谢。对不起我糟糕的英语:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:25:11.597

您可以使用**beforeClose**事件来调用函数来刷新您的页面。

```
$( "#myDialog" ).dialog({
   beforeClose: function(event, ui) {
      window.location.reload(); 
      // or you can use window.location = 'mypage.html';
}
}); 
```

# php - PHP：将用户状态从等待更改为批量接受

> ID：11415348
> 
> 赞同：0
> 
> 时间：2012-07-10T14:19:12.873
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1

我有一个用 cakephp 设计的系统。申请的用户默认处于等待状态。

如何在单个操作中将所有用户从等待状态更改为接受状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:03:55.697

```
$this->User->updateAll(                    // UPDATE users
    array('User.status' => "'accepted'"),  // SET status='accepted'
    $conditions                            // WHERE ... (your conditions)
); 
```

查看[文档](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-updateall-array-fields-array-conditions)

# transactions - 禁止交易的第一屏

> ID：11415350
> 
> 赞同：0
> 
> 时间：2012-07-10T14:19:30.583
> 
> 标签：transactions, background, screen, abap, bdc

我想通过“CALL TRANSACTION”语句调用 Z 事务并跳过第一个屏幕，但`AND SKIP FIRST SCREEN`语句不起作用。
我读过它只有在使用“ENTER”功能代码在交易屏幕之间移动时才有意义。这是真的吗？

因此，我决定通过`CALL TRANSACTION...USING bdc_table`语句使用批处理输入表 (BDC)，以便在后台处理第一个屏幕。
然而，这种方式处理返回到我不想做的初始交易！
该语句`LEAVE TO TRANSACTION`不适用于 BDC 表。还有其他解决方案吗？

**除了** **tomdemuyt**：
现在我正在使用批处理表，但如果我使用`SKIP`，我宁愿这样写：

```
AUTHORITY-CHECK OBJECT 'S_TCODE'
ID 'TCD' FIELD lv_tcode.

IF sy-subrc <> 0.
  MESSAGE 'No authorization for this operation!' TYPE 'E'.
ELSE.

*   CALL TRANSACTION lv_tcode  USING bdc_tab
*                              MODE 'E'
*                              UPDATE 'A'.

SET PARAMETER ID 'EBELN' FIELD p_ebeln.
LEAVE TO TRANSACTION lv_tcode AND SKIP FIRST SCREEN.
ENDIF. 
```

在第一个屏幕（选择屏幕）`p_ebeln`上，必须选择参数并将其传递到第二个屏幕而不显示第一个屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:19:59.170

我不确定你想做什么。您是否要跳过第一个屏幕并转到第二个屏幕？如果您尝试调用的事务是可执行程序，那么您有更多选择直接提交程序：

```
SUBMIT zprogram 
  WITH param1 = 'VALUE' 
  WITH selopt BETWEEN 'a' AND 'b'. 
```

或者，您将批处理表更改为类型的选择表`RSPARAMS`。还有许多其他选项，包括使用特定变体提交，或调用特定屏幕等。

# tomcat - Maven，如何运行外部 Tomcat 服务器

> ID：11415353
> 
> 赞同：2
> 
> 时间：2012-07-10T14:19:38.817
> 
> 标签：tomcat, maven, maven-tomcat-plugin

我有一些问题，我无法解决。我在 D:/server/tomcat7 中解压缩了 tomcat 服务器，我想从 maven 启动它，以便将来在那里部署我的 WebApp。但我找不到如何配置外部文件夹以运行 tomcat。

如果我在 cmd mvn tomcat:run 中调用，maven 将下载 tomcat 并运行它，但我需要从我在上面指定的文件夹中启动服务器。

Tnx 寻求答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:12:04.057

您可以尝试 maven-exec-plugin 通过 ${CATALINA_HOME}/bin 中的脚本启动/停止 Tomcat：

```
 <plugin>  
    <groupId>org.codehaus.mojo</groupId>  
    <artifactId>exec-maven-plugin</artifactId>  
    <version>1.1</version>  
    <executions>  
      <execution>  
        <id>stop-tomcat</id>  
        <phase>pre-clean</phase>  
        <goals>  
          <goal>exec</goal>  
        </goals>  
        <configuration>  
        <executable>${tomcat.stop.path}</executable>  
        </configuration>  
      </execution>  
      <execution>  
        <id>start-tomcat</id>  
        <phase>deploy</phase>  
        <goals>  
          <goal>exec</goal>  
        </goals>  
        <configuration>  
        <executable>${tomcat.start.path}</executable>    
        </configuration>  
      </execution>  
    </executions>  
  </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:59:42.530

不可能，但我想知道你的用例是什么？这个插件的目标是避免这种手动安装。

# php - PDO：无效参数编号：混合命名参数和位置参数 - 注释中的问号

> ID：11415355
> 
> 赞同：0
> 
> 时间：2012-07-10T14:19:54.433
> 
> 标签：php, sql, pdo

> **可能重复：**
> [PDO 参数编号无效 - 注释中的参数](https://stackoverflow.com/questions/11415314/pdo-invalid-parameter-number-parameters-in-comments)

今天我遇到了一个我以前从未见过的错误（在 PDO 中），但仔细想想就很明显了。

我收到以下错误： `Warning: PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: Invalid parameter number: mixed named and positional parameters`

我使用的查询类似于以下内容：

```
SELECT
    x
FROM
    y
WHERE
    -- CHECKING IF X = ? --
    x = :y
AND
    1 = 2 
```

显然我有更多的参数和更长的查询。

为什么它给我这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:19:56.510

解决方案很明显：PDO 不理会这样的注释并看到 ? 作为位置参数。删除 ? 在您的评论中解决了这个问题。

[在评论中使用未绑定的参数也有类似的错误。](https://stackoverflow.com/questions/11415314/pdo-invalid-parameter-number-parameters-in-comments/)

# continuous-integration - 是否可以将 Chutzpah 与 Jenkins 一起使用？

> ID：11415359
> 
> 赞同：7
> 
> 时间：2012-07-10T14:20:04.143
> 
> 标签：continuous-integration, hudson, jenkins, chutzpah

我没有使用 Jenkins 的经验，我目前正在研究使用 Jenkins 进行 PHP 和 JS 自动化单元测试的不同选项。

我遇到了 Chutzpah（它使用 PhantomJS 的无头 WebKit 浏览器）但是：

### 是否可以将 Chutzpah 与 Jenkins 一起使用？

关于 Chutzpah 的文档很少。虽然 Chutzpah 主页上确实声明它可以集成到 TeamCity 持续集成服务器中。

### 与 Jenkins 兼容的最低要求是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T05:03:35.363

可以将 Chutzpah 与 Jenkins 一起使用，并且使用 Chutzpah 的 2.1 版本更容易。Chutzpah 的命令行客户端现在可以采用 /junit 参数，该参数允许您指定文件名以输出 junit-xml 兼容文件。您可以使用 Jenkins 来选择此文件并报告测试结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T21:53:42.080

我不是反对者，但我同意很难对这个问题给出一个好的答案。

我相信与 Jenkins 兼容的最低要求是：它可以从 shell 或 cmd 脚本执行。（如果不是，则需要查找或编写插件。）

此外，该事物应该以代码 0 退出以表示成功，而其他任何代码表示失败。（如果没有，您需要查找或编写插件。）

如果您有兴趣让 Jenkins 发布测试结果，则结果必须在使用 junit 兼容表示法的 xml 文件中。（如果不是，您需要查找或编写插件。）

您要执行的工具可能会施加其他要求：它可能需要绘制窗口或访问鼠标或图形 UI 桌面/会话的其他部分。如果是这种情况，您需要在可以访问这些内容的上下文/会话中运行 Jenkins。（Windows、Mac 和 Linux 都限制后台守护程序/服务访问 GUI 桌面。）

此外，如果您的工具需要访问只能由特定用户访问的资源，则需要以该用户身份运行 Jenkins。

这是一个非常开放的问题。请尝试一下，然后再提出更具体的问题。

# html - 将按钮粘贴到元素底部

> ID：11415364
> 
> 赞同：3
> 
> 时间：2012-07-10T14:20:17.013
> 
> 标签：html, css

当子元素的数量不同时，有没有办法将子按钮元素粘贴到父元素的底部？

父元素是固定高度的，可以垂直滚动以防子元素溢出。在这种情况下，按钮应该在子列表的末尾，但是如果没有子元素，或者子元素的大小不推动父元素溢出，它应该在父元素的底部。

有没有纯css解决方案？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:24:12.390

*编辑为更可靠的方法：

基本上，如果我理解正确，您可以使用[粘性页脚](http://ryanfait.com/sticky-footer/)逻辑 - 就在面板内：

HTML：

```
<div class="panel-container">
    <div class="panel-content">
        <div class="wrapper">
            <p>asdfasdfasdfadfs</p>
            <!--<p>asdfasdfasdfadfs<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></p>-->
            <div class="push"></div>
        </div>
        <div class="footer">
            <button>Click click!</button>
        </div>
    </div>
</div> 
```

CSS

```
.panel-container {width:300px;height:300px;margin:20px;background:#f2f2f2;overflow:auto;}
.panel-content {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -30px; 
}
.footer, .push {
    height: 30px; /* .push must be the same height as .footer */
}
.footer {background:#ccc;} 
```

工作示例： http: [//jsfiddle.net/9SHdN/47/](http://jsfiddle.net/9SHdN/47/)（取消注释注释`<p>`以查看长文本滚动）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:42:48.910

好的，我不知道我是否真的理解你的问题，但这里是一个尝试：

父 div：

```
<div class="options_div"> 
   <p>Text inside</p>

   <ul class="options">
       <li>option 1</li>
       <li>option 2</li>
       <li>option 3</li>
   </ul>

   <input type="button" name="go" value="Goooo!" />
</div> 
```

CSS：

```
.options_div {
    width: 300px;
    height: 200px;
    overflow: scroll;
}

.options_div>ul {
    list-style: none;
}

.options_div>ul>li {
    /* do what everrrr you want with it */
} 
```

此代码生成一个 200px 高的 div，按钮位于底部。如果 ul 中有任何选项，则按钮将被按下并始终停留在列表的末尾。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:10:56.853

这是一个想法：

```
.panel {position:relative;height:300px;width:300px;background:#f2f2f2;overflow:auto;}

.varyingContent { height:280px; display:table-cell; }

.button { position:relative; height:20px;}

<div class="panel">
        <div class="varyingContent">
        asdfadf
        <br />
        <br />
        asdfadf
        <br />
        <br />
        asdfadf
        <br />
        <br />
        asdfadf
        <br />
        <br />
        asdfadf
        <br />
        <br />
        asdfadf
        <br />
        <br />
        asdfadf
        <br />
        <br />
        asdfadf
        <br />
        <br />
        asdfadf
        <br />
        <br />
        asdfadf
        <br />
        <br />
        </div>
        <button class="button">test</button>
    </div> 
```

希望这可以帮助

# blackberry-webworks - 如何让相机与 Blackberry Webworks 配合使用

> ID：11415365
> 
> 赞同：0
> 
> 时间：2012-07-10T14:20:21.847
> 
> 标签：blackberry-webworks

我对网络作品相当陌生。我正在尝试让相机 api 工作，但我不断收到错误消息：

支持的错误：TypeError：'未定义'不是对象（评估'blackberry.media.camera'）

我尝试使用的页面位于托管服务器上。代码如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" id="viewport" content="height=device-height,width=device-width,user-scalable=no" />
<script language="javascript" type="text/JavaScript" >
function takePicture() {
try {
blackberry.media.camera.takePicture(successCB, closedCB, errorCB);
} catch(e) {
alert("Error in supported: " + e);
}
}
function successCB(filePath) { 
document.getElementById("path").innerHTML = filePath;

//alert("Succeed: " + filePath);
}
function closedCB() {
// alert("Camera closed event");
}
function errorCB(e) {
alert("Error occured: " + e);
}
</script>
<title>Camera Test Widget</title>
</head>
<body >
<p>Test the Camera by pressing the button below</p>
<b><a href="#" onclick="takePicture();">Take a Picture</a></b>
<div id="path"></div>
</body>
</html> 
```

而我的 config.xml 文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<widget xmlns="http://www.w3.org/ns/widgets" 
xmlns:rim="http://www.blackberry.com/ns/widgets" 
version="1.0.0.0" rim:header="WebWorks Sample">
<access uri="http://www.flyloops.net/" subdomains="true">
<feature id="blackberry.app.event" required="true" version="1.0.0.0"/>
<feature id="blackberry.media.camera" />
</access>
<name>Flyloops.net</name>
<description>This is a sample application.</description>
<content src="index.html"/>
</widget> 
```

该页面托管在：[http ://www.flyloops.net/mobile/bb/camera.html](http://www.flyloops.net/mobile/bb/camera.html)

在过去的 3 个小时里，我一直在扯头发……任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:43:06.377

如果使用 PlayBook，请确保定义了正确的元素 [https://developer.blackberry.com/html5/apis/blackberry.media.camera.html](https://developer.blackberry.com/html5/apis/blackberry.media.camera.html)

否则，如果您尝试*从*远程网站访问 blackberry.media.camera API，那么您需要在 config.xml 中正确地将其列入白名单，如下所示：

```
<access uri="http://www.flyloops.net/" subdomains="true">
   <feature id="blackberry.media.camera" />
</access> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:57:28.423

你在运行什么设备？代码看起来不错，应该可以工作。您可以从设备获取事件日志并查看引发了哪些异常。

谢谢

纳文 M

# c# - 例外：路径中的非法字符

> ID：11415366
> 
> 赞同：-2
> 
> 时间：2012-07-10T14:20:24.753
> 
> 标签：c#, c#-4.0

我正在使用 Path.GetTempPath 函数来获取临时文件路径以将 xml 文件存储在临时位置。起初这可以成功，但是对于下一次运行，这会出现“文件路径中的非法字符”的异常。

```
 string filepath = System.IO.Path.GetTempPath();
            if (Interface.IsDebugMode)
            {
                xmlRepository.SaveDataToFile(filepath + @"\\savedFile.xml", true);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:40:37.513

This should not work at all

```
 xmlRepository.SaveDataToFile(filepath + @"\\savedFile.xml", true); 
```

it needs to be This

```
 xmlRepository.SaveDataToFile(filepath + "\\savedFile.xml", true); 
```

or this

```
 xmlRepository.SaveDataToFile(filepath + @"\savedFile.xml", true); 
```

but not both And as the comment below says you really should be using this

```
 xmlRepository.SaveDataToFile(Path.Combine(filepath, "savedFile.xml"), true); 
```

# mysql - 多个关系表中的mysql条件和顺序

> ID：11415368
> 
> 赞同：-1
> 
> 时间：2012-07-10T14:20:27.107
> 
> 标签：mysql, entity-relationship

我有这样的架构，我想知道是否有可能在新闻列表中拥有`WHERE`和`ORDER BY`盯着列。

例如 category.id = x 和 cartable.status = 3 和 user.id = 4 ...

```
news
-------------------------------------------------------
id*     title

category
-------------------------------------------------------
id*     title

cartable
-------------------------------------------------------
id          user_id         status*

news_category
-------------------------------------------------------
news_id     category_id

news_cartable
-------------------------------------------------------
news_id     cartable_id

user
-------------------------------------------------------
id*     name 
```

抱歉，更新了。问题是这样的：每个新闻都有很多类别也有很多cartable ..每个cartable 都有用户。那么我如何按该字段排序或条件

```
select * from news_category
left join news on (news_category.news_id = news.id)
left join category on (news_category.category_id = category.id)
--- cartable and user ??? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:26:15.977

Yes, it loooks like all the tables relate, so any of those values could potentially be used in your where clause or in an order by. If you have an exact desired output, include it and whatever query you have tried and someone can help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:50:02.937

要回答您的直接问题，是的，您可以。只要表之间存在某种关系，您就可以使用`WHERE`和`ORDER BY`对查询进行条件化。

例如，如果您需要关联`user`到`news`（或一些不立即相互关联的表），这将要求您声明链接`user`到`news`（即：`news_cartable`和`cartable`）的关系链中的每个表，以及as`WHERE`或`ON`陈述将它们彼此联系起来（例如：）`WHERE cartable_id = cartable.id AND user_id = user.id`。因此，如果您正在查询链接到特定`news`条目的用户，您的代码可能如下所示：

```
SELECT user.id FROM user, cartable, news_cartable, news
WHERE news.id = news_id AND cartable_id = cartable.id AND user_id = user.id
AND news.id = {some news ID} 
```

如果您想改为`LEFT JOIN`使用表格，则可以将第二行中的条件写入`ON`语句，例如：

```
FROM news
LEFT JOIN news_cartable ON news.id = news_id
LEFT JOIN cartable ON cartable_id = cartable.id
LEFT JOIN user ON user_id = user.id 
```

如果这也不是您想要的，请说明您具体要做什么，我会看看我能做些什么。

编辑：`ORDER BY`不是条件化的，可以与您正在使用的任何列一起使用`SELECT`。当然，需要注意的是，您必须`SELECT`首先在查询中对其进行编辑。

# python - Python：列表作为函数参数

> ID：11415370
> 
> 赞同：0
> 
> 时间：2012-07-10T14:20:29.007
> 
> 标签：python, list

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

```
def test(mylist=['a']):  
        mylist.append(1.)  
        print mylist

test()  
test() 
```

给我以下结果：

```
['a', 1.0]  
['a', 1.0, 1.0] 
```

为什么会这样？我希望：

```
['a', 1.0]  
['a', 1.0] 
```

该测试被调用两次，每次 mylist 被创建为一个局部变量。

# c# - LINQ 排序列表数据

> ID：11415371
> 
> 赞同：2
> 
> 时间：2012-07-10T14:20:30.050
> 
> 标签：c#, linq

这样我正在尝试订购数据

```
 List<SearchResult> list = new List<SearchResult>() {
        new SearchResult(){ID=1,Title="Geo Prism 1995 GEO GEO- ABS #16213899"},
        new SearchResult(){ID=2,Title="Geo Prism 1995 GEO - ABS #16213899"},
        new SearchResult(){ID=3,Title="Geo Prism 1995 - ABS #16213899"},
        new SearchResult(){ID=3,Title="Geo Prism 1995 - ABS #16213899"},
        new SearchResult(){ID=4,Title="Wie man BBA reman erreicht"},
        new SearchResult(){ID=5,Title="Ersatz Airbags, Gurtstrammer und Auto Körper Teile "},
        new SearchResult(){ID=6,Title="JCB Excavator - ECU P/N: 728/35700"},
        };

        var to_search = new[] { "Geo", "JCB" };
        var result = from searchResult in list
                     let title = searchResult.Title.ToLower()
                     let key_string = to_search.FirstOrDefault(ts => title.Contains(ts))
                     orderby key_string == null ? -1 : title.Split(new[] { key_string }, StringSplitOptions.None).Length descending
                     group searchResult by key_string into Group
                     orderby Group.Count() descending
                     select Group;

        var matched = result.SelectMany(m => m);
        var completeList = matched.Concat(list.Except(matched));
        dataGridView2.DataSource = completeList.ToList();//.SelectMany(x => x).ToList(); 
```

数据显示在网格中，但我期望数据不会出现。

## 输出即将到来

```
ID  Title 
```

* * *

```
1   Geo Prism 1995 - ABS #16213899
2   Geo Prism 1995 - ABS #16213899
3   Geo Prism 1995 - ABS #16213899
3   Geo Prism 1995 - ABS #16213899
4   Wie man BBA reman erreicht
5   Ersatz Airbags, Gurtstrammer und Auto Körper Teile 
6   JCB Excavator - ECU P/N: 728/35700 
```

## 但我想以这种方式显示数据

## 输出应该像

```
ID  Title 
```

* * *

```
1   Geo Prism 1995 GEO GEO - ABS #16213899
2   Geo Prism 1995 GEO - ABS #16213899
3   Geo Prism 1995 - ABS #16213899
3   Geo Prism 1995 - ABS #16213899
6   JCB Excavator - ECU P/N: 728/35700
4   Wie man BBA reman erreicht
5   Ersatz Airbags, Gurtstrammer und Auto Körper Teile 
```

JCB 应该排在所有 GEO 之后，因为我正在使用 **“geo jcb”**之类的搜索词对数据进行排序。geo 在大多数行的标题中找到。所以那些行首先出现了我的搜索词。所以 geo 是我的搜索词之一，它在所有行标题中呈现最大时间。下一个 jcb 应该出现，因为 jcb 在我的搜索词中，但在输出 jcb 相关行中最后出现。所以告诉我如何更改我的 linq 查询。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:47:24.133

```
class SearchResult{
    public int ID { get; set; } 
    public string Title{ get; set; }
}

void Main()
{

    List<SearchResult> list = new List<SearchResult>() {
        new SearchResult(){ID=4,Title="Wie man BBA reman erreicht"},
        new SearchResult(){ID=5,Title="Ersatz Airbags, Gurtstrammer und Auto Körper Teile "},
        new SearchResult(){ID=6,Title="JCB Excavator - ECU P/N: 728/35700"},
        new SearchResult(){ID=2,Title="Geo Prism 1995 GEO - ABS #16213899"},
        new SearchResult(){ID=3,Title="Geo Prism 1995 - ABS #16213899"},
        new SearchResult(){ID=1,Title="Geo Prism 1995 GEO GEO- ABS #16213899"},
    };

    var to_search = new[] { "Geo", "JCB" };

    var result = from sr in list
                 let w = to_search.FirstOrDefault(ts => sr.Title.ToLower().Contains(ts.ToLower()))
                 where w != null
                 let a = new {sr=sr, word=w.ToLower()}
                 group a by a.word into g
                 orderby g.Count() descending
                 let sorted = g.OrderByDescending(a=> a.sr.Title.Select((c, i) => a.sr.Title.Substring(i)).Count(sub => sub.ToLower().StartsWith(a.word)))
                 from a in sorted 
                 select a.sr;

    var completeList = result.Concat(list.Except(result));

    foreach (var element in completeList)
        Debug.WriteLine(String.Format("ID={0},Title={1}", element.ID, element.Title));
} 
```

* * *

**输出：**

```
ID=1,Title=Geo Prism 1995 GEO GEO- ABS #16213899
ID=2,Title=Geo Prism 1995 GEO - ABS #16213899
ID=3,Title=Geo Prism 1995 - ABS #16213899
ID=6,Title=JCB Excavator - ECU P/N: 728/35700
ID=4,Title=Wie man BBA reman erreicht
ID=5,Title=Ersatz Airbags, Gurtstrammer und Auto Körper Teile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:24:15.487

```
 var result = (from searchResult in list
                 let title = searchResult.Title.ToLower()
                 let key_string = to_search.FirstOrDefault(ts => title.Contains(ts))
                 orderby key_string == null ? -1 : title.Split(new[] { key_string }, StringSplitOptions.None).Length descending
                 group searchResult by key_string into Group
                 select Group).OrderByDescending(grp => grp.Count()).ThenByDescending( grp => CountStringOccurrances(grp.Key, to_search));

public static int CountStringOccurrences(string text, string[] pattern)
{
    // Loop through all instances of the string 'text'.
    int count = 0;
    foreach (string itm in pattern)
    { 
       int i = 0;
       while ((i = text.IndexOf(itm, i)) != -1)
       {
          i += itm.Length;
          count++;
        }
    }
    return count;
} 
```

# objective-c - UIPageViewController：在特定日期显示特定页面

> ID：11415372
> 
> 赞同：0
> 
> 时间：2012-07-10T14:20:32.507
> 
> 标签：objective-c, ios, xcode, uipageviewcontroller

从 Apple 提供的 UIPageViewController 模板中，我正在创建一个数字块日历，这意味着该应用程序将包含 365 页内容，并且当它打开时，我希望它根据今天的日期显示页面。现在我对 NSDates 等已经很熟悉了，但对 UIPageViewController 却少之又少。在让自己陷入不必要的麻烦之前，最直接的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:43:52.607

我建议使用这个名为 RTSPagedView 的 gitHub 项目。首先，它将出列并重用视图，因此您在内存中只有几个视图（不是 365）。当视图出现时，它像 UITableView 一样出列，并用数组中的下一个数据索引填充下一个屏幕外视图。

其次，使用 setContentOffset 方法滚动到特定日期（pageWidth * index）。但是，您可能希望使用 365 阈值。我的猜测是您可以在缓存中使用 30 之类的东西，并在用户接近您的日期边缘时加载一个新的数据源。

RTSPagedView：http: [//github.com/rplasman/RTSPagedView/](http://github.com/rplasman/RTSPagedView/)

# google-maps-api-3 - 融合表不同

> ID：11415375
> 
> 赞同：0
> 
> 时间：2012-07-10T14:20:38.053
> 
> 标签：google-maps-api-3, google-fusion-tables

我有一个合并的 Fusion Table 表，它显示来自在 CountyId 上合并的其他 2 个表（县和市）的数据。合并后的表包含countyid、countyName、cityName 列

我正在尝试编写一个查询，该查询将列出countyName 一次，然后列出该countyName 中的每个cityName，然后再转到下一个countyName。

县 1

城市 1

城市 2

县 2

城市 3

城市 4

等等

我有以下查询，它可以很好地返回唯一的countyName，但我不知道如何让它为每个countyName 提取cityName。

'SELECT CountyName, count() FROM table_id GROUP BY CountyName'

非常感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:54:58.450

SELECT 子句列出了您将在响应中返回的列。所以尝试添加cityName。（如果您不需要它，则不必询问 count() 列）。

选择countyName，cityName FROM ...

（注意，如果您有多个城市的记录，您也需要将其添加到 GROUP BY 列表中）

这应该会给你一个结构如下的答案：县 1，城市 1 县 1，城市 2 县 2，城市 3 县 2，城市 4

-丽贝卡

# android - 使用 facebook-id 登录我的 Android 应用程序的安全性如何？

> ID：11415381
> 
> 赞同：6
> 
> 时间：2012-07-10T14:20:50.060
> 
> 标签：android, facebook, security, facebook-android-sdk

我正在为我的 Android 应用程序使用 Facebook 身份验证。

我使用 facebook ID [通过 HTTP Post to Web API with facebook-id] 在我的应用程序中对用户进行身份验证。因此，如果有人知道我的应用程序中任何用户的 facebook-id，他们可以轻松地发布到允许他们访问应用程序的 URL。

有什么推荐的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:35:53.607

一旦你进行了登录 POST，facebook 会给你一个 authtoken，它是唯一的，但它会在某个时候过期。基于这个令牌生成一个临时的“session_key”（它可以是 md5（facebook_token + user_id），将此 session_key 存储在您的数据库中并将其发送回您的应用程序。

对于从应用程序到您的服务器的每个请求，您必须发送此 session_key 和用户名。在服务器端，您必须检查 session_key 是否在您的数据库中以及是否已分配给“user_id”。

如果一切正常，您可以继续操作，否则返回错误消息。

当用户注销时，删除这个 session_key（当他用 facebook 登录时会重新生成）。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T13:16:51.700

当用户登录 Facebook 时，它会为您提供身份验证令牌和 facebook id。在您的应用服务器中验证令牌是否属于用户 [通过 https://graph.facebook.com/me?accesstoken=]。如果有效，请授予他访问权限。

# c++ - C++ 中的静态初始化

> ID：11415383
> 
> 赞同：1
> 
> 时间：2012-07-10T14:20:53.827
> 
> 标签：c++, visual-c++, c++-cli

大家好！

我正在 Visual C++（托管代码）上开发 winForm 应用程序。此应用程序链接本机静态库，其中包含带有静态变量初始化的代码块：

### cls.h

```
class Cls
{
public:
    static Cls* getInstance();

private:
    static Cls _instance;
protected:
    Cls(void);
}; 
```

### cls.cpp

```
#include "StdAfx.h"
#include "Cls.h"

Cls::Cls(void)
{
}

Cls Cls::_instance;

Cls* Cls::getInstance()
{
    return &_instance;
} 
```

我可以成功链接这些库，但是当我尝试使用*getInstance()*方法时，在调用我的应用程序的主函数之前出现运行时错误。

它是一个第三方库，所以我无法重建它或以任何其他方式重新定义*Cls*类。

App 项目使用*/clr*，入口点定义为*main*。

我厌倦了寻找解决方案。我发现我必须更改入口点，但我不知道什么值是正确的。

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:37:57.900

您遇到了臭名昭著的“静态初始化命令惨败”。当静态对象在两个翻译单元中定义时，先初始化哪个是未指定的；因此，如果一个的构造函数引用另一个，您最终可能会在初始化之前访问它。唯一的保证是它们都将在`main`开始之前被初始化。

最好的解决方案是避免静态对象。特别是，您正在使用的 Singleton 反模式在 C++ 中很难正确使用，而且通常麻烦多于其价值。

如果你真的想这样做，那么你可以通过在函数中定义静态对象来解决这个问题：

```
Cls* Cls::getInstance()
{
    static Cls _instance;
    return &_instance;
} 
```

这样做的缺点是它引入了“破坏顺序惨败”（从另一个静态对象的析构函数访问它可能不安全），并且在某些编译器中它可能不是线程安全的（尽管它应该在任何声称符合 C++11）。如果构造是线程安全的，那么每次访问都会有（小的）运行时成本，如果您有极端的性能问题，这可能是一个问题。

更新：我刚刚注意到你说这个邪恶的阶级是你无法控制的，无法改变。在这种情况下，您的选择是：

*   摆脱这个库并使用一些不那么疯狂的东西，或者
*   注意`main`在开始之前不要访问它的任何静态数据；特别是，请遵循我上面的建议并避免使用您自己的任何静态对象。

# iphone - 为 UITextView 设置多种数据检测器类型

> ID：11415387
> 
> 赞同：2
> 
> 时间：2012-07-10T14:21:01.587
> 
> 标签：iphone, objective-c, ios

我有一个 UITextview，我想为此 textView 启用 2 种不同的数据检测器模式。我知道，我可以将 datadetectorTypes 设置为“UIDataDetectorTypeAll”，但这也可以链接到一些不需要的数据类型（例如地址或时间）。无论如何，我可以在不使用“UIDataDetectorTypeAll”选项的情况下为我的 textView 指定多个数据检测器类型吗？

奥贝德

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T14:27:05.407

是的，与 | 它们之间。像这样：

`[textView setDataDetectorTypes:UIDataDetectorTypeLink | UIDataDetectorTypePhoneNumber]`

希望这可以帮助。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-14T21:52:26.707

如果有人在 Swift 中寻找解决方案

`textView.dataDetectorTypes = [.link, .phoneNumber]`

# windows - DLL是在内核模式还是用户模式下加载的？

> ID：11415392
> 
> 赞同：3
> 
> 时间：2012-07-10T14:21:11.173
> 
> 标签：windows, dll, operating-system

我在一次采访中被问到这样一个问题：

> 在windows中，假设有一个exe依赖于一些dll，当你启动exe时，会加载依赖的dll，这些dll是在内核态还是用户态加载的？

我不太确定这个问题，没有提到答案——你能帮忙解释一下吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:29:24.743

我不是 Windows 内部如何工作的专家，但我知道正确的答案是用户模式，因为只有与您的操作系统相关的进程才被允许进入内核空间[http://en.wikibooks.org/ wiki/Windows_Programming/User_Mode_vs_Kernel_Mode](http://en.wikibooks.org/wiki/Windows_Programming/User_Mode_vs_Kernel_Mode)

基本上，如果它不是操作系统进程，它将在用户空间中分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:49:37.287

**这个问题非常不精确/模棱两可。**“在 Windows 中”暗示了一些东西，但不清楚是什么。面试官可能指的是 Win32 子系统 - 即您通常作为最终用户看到的 Windows 部分。问题的最后一部分更加模棱两可。

现在，虽然进程和部分对象（在 MSDN 中称为 MMF，加载的 PE 映像，例如`.exe`and`.dll`和`.sys`）确实是*内核***对象**，并且需要底层执行程序（和内存管理器等）的一些帮助，但 DLL 中的相应代码（包括)*当从用户模式进程调用时，*`DllMain`其行为将与任何其他用户模式进程完全相同。也就是说，从 DLL 运行代码的每个线程都将转换到内核模式以最终使用 OS 服务（打开文件、加载 PE 文件、创建事件等），或者在足够的情况下在用户模式下做一些事情。

 *也许面试官甚至对有时被称为“内核空间”和“用户空间”的内存范围感兴趣，传统上是 32 位的 2 GB 边界。是的，DLL 通常在 2 GB 边界以下结束，即在“用户空间”中，而其他共享内存（内存映射文件，MMF）通常在该边界之上结束。

面试官甚至有可能成为对 DLL 的常见误解的受害者。DLL 本身只是一块休眠的内存，它从来没有单独运行任何东西*（*是的，对于`DllMain`. 当然，加载器会处理各种事情，例如重定位，但最终如果不显式或隐式调用（在加载 DLL 的进程的某个线程的上下文中），什么都不会运行。因此，出于所有实际目的，该问题需要您回问。

*   定义“在 Windows 中”。
*   还有“在内核模式或用户模式下加载的dll”，这是指执行加载的代码还是最终结果（即代码运行的位置或加载的内存范围）？该代码的一部分在用户模式下运行，其他代码在内核模式下运行。

我想知道面试官是否对他/她所问的概念有一个清晰的认识。

* * *

让我添加更多信息。从对另一个答案的评论看来，人们对 DLL 也存在关于驱动程序的相同误解。与 EXE（或最终的“进程”）相比，驱动程序更接近 DLL 的概念。问题是驱动程序在*大多数情况下*都不自己做任何事情（尽管它可以创建系统线程来改变它）。*驱动程序不是进程，它们不会创建进程。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-07T20:44:11.117

对于任何为 Windows 进行任何重要应用程序开发的人来说，答案显然是用户模式。让我解释两件事。

**动态链接库**

动态链接库与常规的旧链接库或 .lib 非常相似。当您的应用程序使用 .lib 时，它会在编译后粘贴到函数定义中。您通常使用 .lib 来存储 API 并修改函数而不必重建整个项目，只需将具有相同名称的新 .lib 粘贴到旧的并且只要接口（函数名称和参数）没有更改它仍然有效。伟大的模块化。

.dll 做同样的事情，但它不需要重新链接或任何编译。您可以将 .dll 视为本质上的 .lib，它与使用它的应用程序一样被编译为 .exe。只需放置共享名称和函数签名的新 .dll 即可。您只需更换 .dll 即可更新您的应用程序。这就是为什么大多数 Windows 软件由 .dll 和一些 exe 组成的原因。

.dll 的使用有两种方式

**隐式链接**

要以这种方式链接，如果您有一个 .dll `userapplication.dll`，您将拥有一个`userapplication.lib`定义 dll 中所有入口点的文件。您只需链接到静态链接库，然后将 .dll 包含在工作目录中。

**显式链接**

或者，您可以通过首先调用`LoadLibrary(userapplication.dll)`返回 .dll 的句柄以编程方式加载 .dll。然后`GetProcAddress(handle, "FunctionInUserApplicationDll")`它返回一个你可以使用的函数指针。这样，您的应用程序可以在尝试使用之前检查内容。`c#`有点不同但更容易。

**用户/内核模式**

Windows 有两种主要的执行模式。用户模式和内核模式（内核进一步分为系统和会话）。对于用户模式，物理内存地址是不透明的。用户模式使用映射到真实内存空间的虚拟内存。巧合的是，用户模式驱动程序也是 .dll 的。用户模式应用程序通常可以获得大约 4Gb 的虚拟寻址空间来使用。两个不同的应用程序无法有意义地使用这些地址，因为它们位于该应用程序或进程的上下文中。用户模式应用程序无法在不回退到内核模式驱动程序的情况下知道它的物理内存地址。基本上你习惯于编程的一切（除非你开发驱动程序）。

内核模式受到用户模式应用程序的保护。大多数硬件驱动程序在内核模式的上下文中工作，通常所有的 Windows api 都分为两类用户和内核。内核模式驱动程序使用内核模式 api，不使用用户模式 ​​api，因此不使用 .dll（您甚至不能打印到控制台，因为这是用户模式 ​​api 集）。相反，他们使用 .sys 文件，这些文件是驱动程序，并且在用户模式下基本上以完全相同的方式工作。.sys 是一种 pe 格式，所以基本上 .exe 就像 .dll 一样，就像没有 main() 入口点的 .exe。

所以从提问者的角度来看，你有两组

**[内核/.sys] 和 [用户/.dll 或 .exe]**

内核中确实没有 .exe，因为操作系统所做的一切都不是用户。当系统或另一个内核组件启动某些东西时，它们通过调用 DriverEntry() 方法来完成它，所以我猜这就像 main()。

所以这个问题在这个意义上是很简单的。*

# wolfram-mathematica - Mathematica NonlinearModelFit 奇怪的输出

> ID：11415393
> 
> 赞同：0
> 
> 时间：2012-07-10T14:21:13.843
> 
> 标签：wolfram-mathematica

我正在尝试在数学中对项目的某些数据运行 NonlinearModelFit。这是一个相当复杂的模型，有 9 个系数和 5 个自变量。我以模型需要的方式创建了数据，并且我认为我正确地调用了该函数。以下是数据示例：

```
{{16.5892, 0.631, 1.7707, 1258.21, 580.271, 14.02}, {16.2855, 0.813, 
1.76756, 2098.41, 745.624, 13.59}, {16.036, 0.58, 1.77311, 846.994, 718.092, 13.41}} 
```

当然数据总量大约是30个数据集供函数使用。这是我的函数调用：

```
nlm = NonlinearModelFit[data, a + c*b + d*bminv + e*M + f*bminv*M + g*x + h*x^2 + i*y + j*y^2,
{a, c, d, e, f, g, h, i, j}, {b, bminv, M, x, y}]; 
```

我认为这应该可行，但我得到了一个非常奇怪的输出：

拟合模型[38592.8+0.811612b+<<9>>+3.06099*10^-7*y^2]^3

这个模型的数字可能是正确的，但我不理解带有 <<9>> 的部分，甚至更不理解 FittedModel 函数（即 NonlinearModelFit 总是返回的函数）是如何立方的。

除了输出的怪异之外，它也是一个不可用的输出，我尝试了应该与 FittedModel 对象一起使用的函数，但它们都不起作用。

如果有人对输出的含义、如何修复它有一些建议，或者如果我只是对我的函数调用或数据做错了什么，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:37:44.597

它似乎有效，我没有得到`^3`：

```
data = {{16.5892, 0.631, 1.7707, 1258.21, 580.271, 14.02}, {16.2855, 0.813, 1.76756, 2098.41, 745.624, 13.59}, {16.036, 0.58, 1.77311, 846.994, 718.092, 13.41}}

nlm = NonlinearModelFit[data, a + c*b + d*bminv + e*M + f*bminv*M + g*x + h*x^2 + i*y + j*y^2, {a, c, d, e, f, g, h, i, j}, {b, bminv, M, x, y}] ;

nlm[Sequence @@ Most[#]] & /@ data - data[[All, -1]]

(* {-1.77636*10^-15, 0., -3.55271*10^-15} *) 
```

# reporting-services - MS Reporting Services 的繁琐样式错误

> ID：11415395
> 
> 赞同：1
> 
> 时间：2012-07-10T14:21:19.447
> 
> 标签：reporting-services

我有许多以英国格式显示日期的报告。我需要更改这些以显示日文格式的日期。我已将 LANGUAGE 更改为 ja-jp，当我在 Visual Studio 2008 中预览它时，报告看起来很好。但是，当我将它上传到服务器并查看它时，样式已经消失并且日期没有格式化.

有什么明显的我遗漏或忽略了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:23:08.973

我找到了两种解决方案。第一个涉及移动文本框。我在报告顶部有一个文本框。当我将其语言更改为 ja-jp 时，下面表格的外观受到了影响。移动表格下方的文本框可以防止这种情况发生。这听起来有点荒谬，但它奏效了。

另一个涉及编辑实际的 RDL 文件。我没有指定语言，而是在 STYLE 标记中编辑了 FORMAT 标记

```
<Format>yyyy-MM-dd HH:m</Format> 
```

# cqrs - CQRS 是否与事件溯源相关联？

> ID：11415396
> 
> 赞同：4
> 
> 时间：2012-07-10T14:21:19.817
> 
> 标签：cqrs, event-sourcing

我最近阅读了很多关于 CQRS 的内容，对我来说，它似乎与事件溯源密切相关。

但是就像这个答案所说的[https://stackoverflow.com/a/9217461/277067](https://stackoverflow.com/a/9217461/277067) 对我来说，事件源对于像我这样的初学者来说似乎有点过于复杂/可怕（“什么？我的对象当前状态不会存储在任何地方？？”） .

所以我想知道他们是否确实被捆绑了，或者是否有任何工具/名声可以帮助在没有事件采购的复杂部分的情况下进行 cqrs（事件观察者、命令处理程序）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-07T17:37:31.423

*简短回答：*不，CQRS 和事件溯源没有相互关联。

*长答案：*不，CQRS 和事件溯源没有相互关联，它们也没有与域驱动设计 (DDD) 关联。

如果你想用几句话来定义 CQRS、事件溯源和 DDD 是什么，你可能会想出以下解释（当然，它们过于简化了，但这正是这里的重点）：

*   CQRS 是一种将写入状态与读取状态（命令与查询）分开的设计模式。
*   事件溯源是一种将数据存储在数据库中的方法，其中存储的是增量而不是实际状态。
*   DDD 是一种在跨学科团队中更容易进行领域交流的方法。

他们每个人在没有其他人的情况下都能很好地工作。例如，您可以使用 DDD 对域进行建模，然后在没有 CQRS 或事件源的情况下实现它。您也可以在不需要 DDD 或 CQRS 的情况下进行事件溯源。等等……</p>

但是：这三个概念很好地结合在一起，这就是为什么它们经常在一个句子中被称为。所以，不，它们没有相互联系，但它们相互结合很有意义。

下图显示了它们如何相互交互：

[![CQRS、事件溯源和 DDD 的组合](../Images/5a7cbca27374987b0d9c910e790e53bd.png)](https://i.stack.imgur.com/1G2Xj.png)

（图片取自[wolkenkit 的文档，这](https://docs.wolkenkit.io/1.2.0/getting-started/understanding-wolkenkit/architecture/)是一个用于 JavaScript 和 Node.js 的 CQRS 和事件源框架。）

*   CQRS 描述了您向写入模型发送命令，以及您接收事件并订阅来自读取模型的查询。
*   事件溯源与写入模型一起使用，以存储作为客户端发送命令的结果而发布的事件。
*   DDD 在写入模型中用于将命令转换为事件并运行适当的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:39:40.870

您可以在没有事件溯源的情况下使用 CQRS。在命令处理程序中，您正在使用一些存储库来获取或保存聚合根的最后状态。只需实现简单的存储库，它将直接从数据库保存和加载状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T12:44:04.473

不，他们没有被 IMO 捆绑，你可以在[这里找到我对相关问题的理由](https://stackoverflow.com/questions/9199670/cqrs-without-event-sourcing-what-are-the-drawbacks/23125716#23125716)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-11T06:08:31.070

简而言之，我应该说：我们可以在没有事件源的情况下拥有 CQRS。但是没有 CQRS，我们就无法进行事件溯源。一般来说，我们有 3 种类型的 CQRS：标准、事件溯源和最终一致性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-15T08:13:35.840

CQRS 和 EventSourcing 是相互独立的。但是根据需要，我们可以将它们结合起来，取得很好的效果。

让我们举一些例子：

**CQRS（没有事件源）：**

1.  电子商务负载均衡器：大多数对电子商务网站的请求都是获取请求，用户将在其中浏览可用的产品。并且有些卖家会更新这些产品和相关信息，但不会频繁更新，而是批量更新。该卖方请求可以从一台服务器提供服务，而用户请求可以从其他服务器提供服务。这两个服务器都从同一个数据库（单点源）获取/更新数据。这里没有事件溯源。但是我们能够在负载均衡器级别拆分读写。

2.  数据库主/从：有时如果数据库吞吐量很高，我们可以使用从属来处理读取请求。在这里，我们再次能够在没有事件源的情况下拆分读写逻辑。

**EventSourcing（没有 CQRS）：**

1.  电子商务回调：假设您想在订单状态更改后向客户发送有关订单确认或取消的邮件/通知。在这里，我们可以在订单状态更改后创建一个事件，所有监听该事件的订阅者都将使用这些事件。在我们的示例中，邮件/通知类将监听此事件并立即发送邮件或通知。这里不涉及 CQRS。

# sql - 从重复选择中删除旧的

> ID：11415399
> 
> 赞同：1
> 
> 时间：2012-07-10T14:21:23.360
> 
> 标签：sql, sql-server-2008-r2

我一直在进行查询以搜索和删除重复的列值。目前我有这个查询（返回重复）：

```
SELECT NUIP, FECHA_REGISTRO
FROM registros_civiles_nacimiento
WHERE NUIP IN (
 SELECT NUIP
 FROM registros_civiles_nacimiento
 GROUP BY NUIP
 HAVING (COUNT(NUIP) > 1)
) order by NUIP 
```

这项工作返回这样的表：

```
NUIP        FECHA_REGISTRO
38120100138 1975-05-30
38120100138 1977-08-31
40051800275 1980-09-24
40051800275 1999-11-29
42110700118 1972-10-26
42110700118 1982-04-22
44030700535 1982-10-19
44030700535 1993-05-05
46072300777 1991-01-17
46072300777 1979-03-30 
```

问题是我需要删除具有重复列值的行。但是我需要删除日期最早的行，例如，对于给定的结果，一旦执行了所需的查询，这是必须**保留**的结果列表：

```
NUIP        FECHA_REGISTRO
38120100138 1977-08-31
40051800275 1999-11-29
42110700118 1982-04-22
44030700535 1993-05-05
46072300777 1991-01-17 
```

如何使用纯 SQL 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:58:16.287

```
--PULL YOUR SELECT OF RECS WITH DUPES INTO A TEMP TABLE 
--(OR CREATE A NEW TABLE SO THAT YOU CAN KEEP THEM AROUND FOR LATER IN CASE)
SELECT   NUIP,FECHA_REGISTRO
INTO #NUIP 
FROM     SO_NUIP
WHERE NUIP IN (
SELECT NUIP
 FROM SO_NUIP
 GROUP BY NUIP
 HAVING (COUNT(NUIP) > 1)
)

--CREATE FLAG FOR DETERMINIG DUPES
ALTER TABLE #NUIP ADD DUPLICATETOREMOVE bit

 --USE `RANK()` TO SET FLAG
 UPDATE #NUIP
 SET DUPLICATETOREMOVE = CASE X.RANK
        WHEN  1 THEN 1
        ELSE 0 
        END
--SELECT *
FROM #NUIP A
INNER JOIN (SELECT NUIP,FECHA_REGISTRO,RANK() OVER (PARTITION BY [NUIP] ORDER BY    FECHA_REGISTRO ASC) AS RANK
FROM #NUIP) X ON X.NUIP = A.NUIP AND X.FECHA_REGISTRO = A.FECHA_REGISTRO

--HERE IS YOUR DELETE LIST
SELECT * 
FROM so_registros_civiles_nacimiento R
JOIN #NUIP N ON N.NUIP = R.NUIP AND N.FECHA_REGISTRO = R.FECHA_REGISTRO
WHERE N.DUPLICATETOREMOVE = 1

--HERE IS YOUR KEEP LIST
SELECT * 
FROM so_registros_civiles_nacimiento R
JOIN #NUIP N ON N.NUIP = R.NUIP AND N.FECHA_REGISTRO = R.FECHA_REGISTRO
WHERE N.DUPLICATETOREMOVE = 0

--ZAP THEM AND COMMIT YOUR TRANSACTION, YOU'VE STILL GOT A REC OF THE DELETEDS FOR AS LONG AS THE SCOPE OF YOUR #NUIP
BEGIN TRAN --COMMIT  --ROLLBACK
DELETE FROM so_registros_civiles_nacimiento
JOIN #NUIP N ON N.NUIP = R.NUIP AND N.FECHA_REGISTRO = R.FECHA_REGISTRO
WHERE N.DUPLICATETOREMOVE = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:24:38.757

您可以为此使用分析函数：

```
;WITH CTE AS
(
    SELECT *, ROW_NUMBER() OVER(PARTITION BY NUIP ORDER BY FECHA_REGISTRO DESC) RN
    FROM registros_civiles_nacimiento
)
DELETE FROM CTE
WHERE RN > 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:52:28.947

1.  使用 RANK() 创建按日期排序的结果集
2.  使用 WHERE EXISTS 从源中删除。

（注意：如果你对重复项运行排名函数，你应该得到你的结果。我刚刚提到了下面的整个表格）

此语句在 Oracle 中有效（如果它适用于您，请将 select * 替换为 delete：

```
SELECT * 
FROM registros_civiles_nacimiento ALL_ 
WHERE EXISTS 
    (SELECT * FROM    
        (SELECT * FROM 
            (SELECT  NUIP, 
                     FECHA_REGISTRO, 
                     RANK() OVER (PARTITION BY NUIP ORDER BY FECHA_REGISTRO) AS ORDER_
             FROM registros_civiles_nacimiento)
         WHERE ORDER_ = 1) OLDEST
     WHERE   ALL_.NUIP = OLDEST.NUIP
     AND   ALL_.FECHA_REGISTRO = OLDEST.FECHA_REGISTRO); 
```

# python - Django Rest Framework 使用 url 加载指定模型

> ID：11415404
> 
> 赞同：1
> 
> 时间：2012-07-10T14:21:42.970
> 
> 标签：python, django, django-models, django-rest-framework

是否可以使用通用 url 设置为 django 中的所有模型实现 django rest 接口？

因此，而不是每个模型配置：

```
class BlogResource(ModelResource):
    model = Blog

urlpatterns = patterns('',
    url(r'^Blog/$', ListOrCreateModelView.as_view(resource=BlogResource)),
    url(r'^Blog/(?P<pk>[^/]+)/$', InstanceModelView.as_view(resource=BlogResource)),
) 
```

更通用的加载类型：

```
urlpatterns = patterns('',
    url(r'^(?P<model>\w+)/$', GenericView.render_model_list()),
    url(r'^(?P<model>\w+)/(?P<pk>[^/]+)/$', GenericView.render_model()),
) 
```

使用允许系统生成模型并将其渲染到其余接口的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:23:42.830

```
class BlogResource(ModelResource):
    model = Blog

urlpatterns = patterns('',
    url(r'^Blog/$', ListOrCreateModelView.as_view(resource=BlogResource)),
    url(r'^Blog/(?P<pk>[^/]+)/$', InstanceModelView.as_view(resource=BlogResource)),
) 
```

以更一般的方式，解决方案看起来像这样（抱歉 - 我是手动编写的），但您仍然需要导入这些模型并手动形成模型元组。

```
from django.conf.urls.defaults import patterns, url
from models import Model1, Model2, Model3

urlconf = ['', ]

for obj in (Model1, Model2, Model3):
    name = obj.__class__.__name__
    ResourceClass = type('%sResource' % name, (obj,), {
        'model': obj,
    })
    urlconf.append(url(r'^%s/$' % name, ListOrCreateModelView.as_view(resource=ResourceClass)))
    urlconf.append(url(r'^%s/(?P<pk>[^/]+)/$' % name, ListOrCreateModelView.as_view(resource=ResourceClass)))
urlpatterns = patterns(urlconf) 
```

# c# - 十进制字符串与千位分隔符？

> ID：11415405
> 
> 赞同：6
> 
> 时间：2012-07-10T14:21:44.327
> 
> 标签：c#, .net, localization, globalization

考虑一个`Decimal`值：

```
Decimal value = -1234567890.1234789012M; 
```

我想将此`Decimal`值转换为字符串，并包含*“千分隔符”*。

> **注意：**我不想包括**千位分隔符**，我想包括**数字分组**。对于不将数字分组为数千或不使用逗号分隔组的文化，差异很重要

在我的计算机上使用我当前的语言环境使用不同的标准格式字符串的一些示例输出：

```
value.ToString()        =  -1234567890..1234789012   (Implicit General)
value.ToString("g")     =  -1234567890..1234789012   (General)
value.ToString("d")     =          FormatException   (Decimal whole number)
value.ToString("e")     =         -1..234568e++009   (Scientific)
value.ToString("f")     =         -1234567890..123   (Fixed Point)
value.ToString("n")     =     -12,,3456,,7890..123   (Number with commas for thousands)
value.ToString("r")     =          FormatException   (Round trippable)
value.ToString("c")     =   -$$12,,3456,,7890..123   (Currency)
value.ToString("#,0.#") =     -12,,3456,,7890..1 
```

我**想要**的（取决于文化）是：

```
en-US      -1,234,567,890.1234789012
ca-ES      -1.234.567.890,1234789012
gsw-FR     -1 234 567 890,1234789012    (12/1/2012: fixed gws-FR to gsw-FR)
fr-CH      -1'234'567'890.1234789012
ar-DZ       1,234,567,890.1234789012-
prs-AF      1.234.567.890,1234789012-
ps-AF       1،234،567،890,1234789012-
as-IN     -1,23,45,67,890.1234789012
lo-LA      (1234567,890.1234789012)     (some debate if numbers should be "1,234,567,890")
qps-PLOC  12,,3456,,7890..1234789012 
```

如何将 a 转换为`Decimal`带有数字分组的字符串？

* * *

**更新**：一些更*需要*的输出，使用我目前的文化：

```
-1234567890M             -->   -12,,3456,,7890
-1234567890.1M           -->   -12,,3456,,7890..1
-1234567890.12M          -->   -12,,3456,,7890..12
-1234567890.123M         -->   -12,,3456,,7890..123
-1234567890.1234M        -->   -12,,3456,,7890..1234
-1234567890.12347M       -->   -12,,3456,,7890..12347
-1234567890.123478M      -->   -12,,3456,,7890..123478
-1234567890.1234789M     -->   -12,,3456,,7890..1234789
-1234567890.12347890M    -->   -12,,3456,,7890..1234789
-1234567890.123478901M   -->   -12,,3456,,7890..123478901
-1234567890.1234789012M  -->   -12,,3456,,7890..1234789012 
```

* * *

**更新**：我试着看看如何`Decimal.ToString()`设法使用**通用**格式来显示它需要显示的所有数字：

```
public override string ToString()
{
    return Number.FormatDecimal(this, null, NumberFormatInfo.CurrentInfo);
} 
```

除了`Number.FormatDecimal`隐藏在某处：

```
[MethodImpl(MethodImplOptions.InternalCall)]
public static extern string FormatDecimal(decimal value, string format, NumberFormatInfo info); 
```

所以这是一个死胡同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T14:34:37.923

默认情况下[`ToString`](http://msdn.microsoft.com/en-us/library/system.decimal.tostring.aspx)，十进制方法使用 CultureInfo.CurrentCulture 作为用户会话，因此根据运行代码的人员而有所不同。

ToString 方法还接受各种重载中的 IFormatProvider。这是您需要提供特定于文化的格式化程序的地方。

例如，如果您为 fr-CH 传递 NumberFormat，您可以按照该文化所期望的方式格式化内容：

```
var culture = CultureInfo.CreateSpecificCulture("fr-CH");
Decimal value = -1234567890.1234789012M;

Console.WriteLine(value.ToString("##,#.###############", culture.NumberFormat)); 
```

将输出

```
 -1'234'567'890.1234789012 
```

编辑#3 - 使用自定义格式化程序重写。这应该根据新更新的问题做你想要的。

编辑#4 - 接受你所有的输入，然后运行这个：

```
public void TestOutput()
{
    PrintValue(-1234567890M);
    PrintValue(-1234567890.1M);
    PrintValue(-1234567890.12M);
    PrintValue(-1234567890.123M);
    PrintValue(-1234567890.1234M);
    PrintValue(-1234567890.12347M);
    PrintValue(-1234567890.123478M);
    PrintValue(-1234567890.1234789M);
    PrintValue(-1234567890.12347890M);
    PrintValue(-1234567890.123478901M);
    PrintValue(-1234567890.1234789012M);
}

private static void PrintValue(decimal value)
{
   var culture = CultureInfo.CreateSpecificCulture("qps-PLOC");
   Console.WriteLine(value.ToString("##,#.###############", culture.NumberFormat));
} 
```

提供与您提供的匹配的输出：

```
--12,,3456,,7890
--12,,3456,,7890..1
--12,,3456,,7890..12
--12,,3456,,7890..123
--12,,3456,,7890..1234
--12,,3456,,7890..12347
--12,,3456,,7890..123478
--12,,3456,,7890..1234789
--12,,3456,,7890..1234789
--12,,3456,,7890..123478901
--12,,3456,,7890..1234789012 
```

正如 Joshua 所指出的，这仅适用于某些语言环境。

从表面上看，您需要选择两个弊端中较小的一个：了解您的数字的精度，或为每种文化指定格式。我敢打赌知道你的数字的准确性可能会更容易。在这种情况下，我的答案的先前版本可能有用：

要显式控制要输出的小数位数，您可以克隆区域性提供的数字格式并修改 NumberDecimalDigits 属性。

```
var culture = CultureInfo.CreateSpecificCulture("fr-CH");
Decimal value = -1234567890.1234789012M;
NumberFormatInfo format = (NumberFormatInfo)culture.NumberFormat.Clone();
format.NumberDecimalDigits = 30;

Console.WriteLine(value.ToString("n", format)); 
```

这输出：

```
-1'234'567'890.123478901200000000000000000000 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T22:02:22.460

您可以指定自定义模式（该模式将适当地解析为特定于文化的分组方法以及适当的分组和小数分隔符）。一个模式可以有[正、负和零部分](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx#SectionSeparator)。正面模式始终相同，但负面模式取决于文化，可以从 NumberFormatInfo 的[NumberNegativePattern](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.numbernegativepattern.aspx)属性中检索。由于您希望尽可能地精确，因此需要在小数点后填写 28 位占位符；逗号强制分组。

```
 public static class DecimalFormatters
    {
        public static string ToStringNoTruncation(this Decimal n, IFormatProvider format)
        {
            NumberFormatInfo nfi = NumberFormatInfo.GetInstance(format);
            string[] numberNegativePatterns = {
                    "(#,0.############################)", //0:  (n)
                    "-#,0.############################",  //1:  -n
                    "- #,0.############################", //2:  - n
                    "#,0.############################-",  //3:  n-
                    "#,0.############################ -"};//4:  n -
            var pattern = "#,0.############################;" + numberNegativePatterns[nfi.NumberNegativePattern];
            return n.ToString(pattern, format);
        }

        public static string ToStringNoTruncation(this Decimal n)
        {
            return n.ToStringNoTruncation(CultureInfo.CurrentCulture);
        }
    } 
```

## 样本输出

```
Locale    Output
========  ============================
en-US     -1,234,567,890.1234789012
ca-ES     -1.234.567.890,1234789012
hr-HR     - 1.234.567.890,1234789012
gsw-FR    -1 234 567 890,1234789012
fr-CH     -1'234'567'890.1234789012
ar-DZ     1,234,567,890.1234789012-
prs-AF    1.234.567.890,1234789012-
ps-AF     1،234،567،890,1234789012-
as-IN     -1,23,45,67,890.1234789012
lo-LA     (1234567,890.1234789012)
qps-PLOC  -12,,3456,,7890..1234789012 
```

目前没有使用`NegativeNumberFormat`4 ( `n -`) 的语言环境，因此无法测试这种情况。但没有理由认为它会失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T14:40:06.063

You need to include the culture when formatting for your strings. You can either use [String.Format](http://msdn.microsoft.com/en-us/library/1ksz8yb7) and include the culture as the first parameter or use the object's [ToString](http://msdn.microsoft.com/en-us/library/18sthszb.aspx) method and use the overload that takes a culture.

The following code produces the expected output (except for gws-FR, it couldn't find a culture with that string).

```
namespace CultureFormatting {
  using System;
  using System.Globalization;

  class Program {
    public static void Main() {
      Decimal value = -1234567890.1234789012M;
      Print("en-US", value);
      Print("ca-ES", value);
      //print("gws-FR", value);
      Print("fr-CH", value);
      Print("ar-DZ", value);
      Print("prs-AF", value);
      Print("ps-AF", value);
      Print("as-IN", value);
      Print("lo-LA", value);
      Print("qps-PLOC", value);
    }

    static void Print(string cultureName, Decimal value) {
      CultureInfo cultureInfo = new CultureInfo(cultureName);
      cultureInfo.NumberFormat.NumberDecimalDigits = 10;
      // Or, you could replace the {1:N} with {1:N10} to do the same
      // for just this string format call.
      string result = 
        String.Format(cultureInfo, "{0,-8} {1:N}", cultureName, value);
      Console.WriteLine(result);
    }
  }
} 
```

The above code produces the following output:

```
en-US    -1,234,567,890.1234789012
ca-ES    -1.234.567.890,1234789012
fr-CH    -1'234'567'890.1234789012
ar-DZ    1,234,567,890.1234789012-
prs-AF   1.234.567.890,1234789012-
ps-AF    1،234،567،890,1234789012-
as-IN    -1,23,45,67,890.1234789012
lo-LA    (1234567,890.1234789012)
qps-PLOC --12,,3456,,7890..1234789012 
```

If you're working with a multithreaded system, such as ASP.Net, you can change the thread's [CurrentCulture](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentculture.aspx) property. Changing the thread's culture will allow all of the associated `ToString` and `String.Format` calls to use that culture.

### Update

Since you're wanting to display all of the precision you're going to have to do a bit of work. Using `NumberFormat.NumberDecimalDigits` will work, except that if the value has less precision, the number will output with trailing zeros. If you need to make sure you display every digit without any extras, you will need to calculate the precision beforehand and set that before you convert it to a string. The StackOverflow question [Calculate System.Decimal Precision and Scale](https://stackoverflow.com/questions/763942/calculate-system-decimal-precision-and-scale) may be able to help you determine the precision of the decimal.

# node.js - 在生产中使用 Node.js 在端口 80 上运行 socket.io 时出错

> ID：11415412
> 
> 赞同：0
> 
> 时间：2012-07-10T14:21:56.247
> 
> 标签：node.js, amazon-web-services, websocket, socket.io

我使用 node.js 和 socket.io 已经有一段时间了。

我遇到了一个奇怪的问题。过去，我主要使用长端口 - 3000、4001、8888 等来运行我的节点和套接字服务器。我没有遇到任何问题。

但是，当我将端口移动到 80 时，出现以下错误 -

**WebSocket 握手期间出错：“连接”标头值不是“升级”**

只有在 Chrome 上运行页面时才会出现此错误。我在亚马逊 AWS 上托管这个应用程序。它在 localhost 上运行良好，但在端口 80 的生产中出现错误。

我认为这与我的代码无关，因为它适用于开发和非 80 端口。

我还观察到套接字通信归结为 xhr-polling 和 json-polling 。在非 80 端口上，websockets 工作正常。

我不确定是什么问题。我在其他浏览器上没有遇到同样的错误，但也没有发生套接字连接。

我没有使用 nginx 或任何其他负载均衡器。

# c# - 从单元测试生成文档

> ID：11415414
> 
> 赞同：14
> 
> 时间：2012-07-10T14:22:06.720
> 
> 标签：c#, unit-testing, nunit, specflow

我们有[机器规格](https://github.com/machine/machine.specifications)，我们有[specflow](http://www.specflow.org/)。Specflow 将文本描述转换为单元测试。**但是是否有任何工具可以使用 NUnit 固定装置并创建类似于 Specflow 输入的文本描述？**基本上与specflow正在做的相反。

我准备调整关于夹具名称和测试方法名称的单元测试格式。但我宁愿不使用任何超级花哨的语法，如机器规范，而只是简单的 NUnit 测试装置。原因是测试很重要并且需要可重构等。文本格式不像单元测试那样重构友好。

例如：

```
[TestFixture] 
class Given_Four
{
    private Calculator c;

    [SetUp]
    public void Setup()
    {
        c = new Calculator(4);
    }

    [Test]
    public void When_adding_two_then_sum_should_be_six()
    {
        c.Add(2)
        Assert.That(c.Display, Is.EqualTo(6));
    }
} 
```

同样，这只是一个例子。基本上任何格式的测试工具都可以使用，只要该工具创建该测试夹具的文本描述即可。我一直在谷歌搜索，但一无所获。你知道任何这样的工具吗*？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T03:28:53.200

你可以试试 Gallio Test 自动化框架中的报告运行器吗？

尽管该网站目前似乎已关闭

[http://gallio.org/Downloads.aspx](http://gallio.org/Downloads.aspx)

[http://code.google.com/p/mb-unit/](http://code.google.com/p/mb-unit/)

# c# - 自动递增主键 n 从作为网页的前端输入数据

> ID：11415418
> 
> 赞同：0
> 
> 时间：2012-07-10T14:22:18.757
> 
> 标签：c#, database, winforms, primary-key

我创建了一个表并自动增加了主键列。我在本地托管的 .NET 平台中用 C# 创建了一个 Web 表单。当我尝试从 Web 表单输入数据时遇到问题，当我填写其他字段时，不会自动填写主键列，它不接受我输入的任何值。

1.  当我自己输入一个值时，它说“当 IDENTITY_INSERT 设置为 OFF 时，无法在表 'Product' 中插入标识列的显式值。”

2.  当我不输入值时，它会说；

    > ',' 附近的语法不正确。源错误：
    > 
    > 第 41 行：objCommand.Connection=objConnection;
    > 
    > 第 42 行：objCommand.CommandText =“插入产品（客户名称、客户地址、发票编号、发票日期、产品名称、产品描述、单位成本、数量、总金额ToBePaid）值（'”+ tbcustomername.Text+“','”+ tbcustomeraddress.Text +“' ," + tbinvoicenumber.Text + ",'"+tbinvoicedate.Text + "','" + tbproductname.Text + "','" + tbproductdescription.Text + "'," + tbunitcost.Text + "," + tbquantity .Text + "," + tbamounttobepaid.Text + ")";
    > 
    > 第 43 行：objCommand.ExecuteNonQuery();
    > 
    > 第 44 行：
    > 
    > 第 45 行：

因为我已经自动增加了它，所以我希望在填充其他列时自动获得一个值，但这不会发生。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:58:47.403

你可以改变你的命令。

```
objCommand.CommandText = "INSERT INTO Product " +
   "(CustomerName,CustomerAddress,InvoiceNumber,InvoiceDate,ProductName,"+  
   "ProductDescription,UnitCost,Quantity,TotalAmountToBePaid) VALUES " + 
   "(@cname, @caddress, @inumber, @idate, @pname, @pdesc, @unitcost, @qty, @total); " +
   "SELECT SCOPE_IDENITY();";

objCommand.Parameters.Add(new SqlParameter("@cname", tbcustomername.Text));
objCommand.Parameters.Add(new SqlParameter("@caddress", tbcustomeraddress.Text));
objCommand.Parameters.Add(new SqlParameter("@inumber", int.Parse(tbinvoicenumber.Text)));
objCommand.Parameters.Add(new SqlParameter("@idate", DateTime.Parse(tbinvoicedate.Text)));
objCommand.Parameters.Add(new SqlParameter("@pname", tbproductname.Text));
objCommand.Parameters.Add(new SqlParameter("@pdesc", tbproductdescription.Text));
objCommand.Parameters.Add(new SqlParameter("@unitcost", decimal.Parse(tbunitcost.Text)));
objCommand.Parameters.Add(new SqlParameter("@qty", int.Parse(tbquantity.Text)));
objCommand.Parameters.Add(new SqlParameter("@total", decimal.Parse(tbamounttobepaid.Text)));

int id = (int)objCommand.ExecuteScalar(); 
```

这将返回在此事务中插入的最后一个身份，这是您要访问的身份。请记住，您可以在一个命令中发送多个语句。

正如@Wiktor_Zychla 在下面的评论中所说，在查询中使用参数来逃避sql注入是更好的编码实践。

# javascript - 无法在 Trent Richardson 日期时间选择器中显示图标

> ID：11415422
> 
> 赞同：1
> 
> 时间：2012-07-10T14:22:33.803
> 
> 标签：javascript, jquery, datetimepicker

这是[**jsFiddle**](http://jsfiddle.net/uDVwx/)中的工作示例。该图标仅在我使用 jQuery UI 1.8.18 时显示，如果我使用的是最新版本 jQuery UI 1.8.21，那么图标不会显示？

有错误还是我错过了什么？

特伦特日期时间选择器文档在[**这里。**](http://trentrichardson.com/examples/timepicker/)它说“此外，所有日期选择器选项仍然可以通过时间选择器插件获得。”

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:36:16.060

错误：$("#from-datetime").datetimepicker 不是函数源文件： http: [//fiddle.jshell.net/_display/](http://fiddle.jshell.net/_display/) 行：73

它只是一个`datepicker` 不是`datetimepicker` Datetimepicker 是另一个 jquery 插件，可能是它与最新的 JUI 不兼容

工作示例 [http://jsfiddle.net/uDVwx/3/](http://jsfiddle.net/uDVwx/3/)

关键是您必须按以下顺序调用：jquery、jquery ui、jquery addons。但是当我查看控制台调试时，日期时间选择器插件和 jquery ui 1.8.21 出现错误

# perl - 在 perl 中打印循环外的哈希

> ID：11415425
> 
> 赞同：0
> 
> 时间：2012-07-10T14:22:34.453
> 
> 标签：perl

我正在尝试读取文件，然后想在`while`循环外打印输出。有没有办法做到这一点？

这就是我正在做的事情：

```
 my $booklistFile= file.txt;
   my $perlbook;
   my $javabook;
   my $cbook;
   my $data;

   open my $booklist, "<", $booklistFile or die "can not open the file";
   my %bookHash = ();

   while(<$booklist>)
   {
     ($perlbook, $javabook, $cbook) = split (',');
     $bookHash{$cbook} = $cbook;
     $data = $bookHash{$cbook} ;

     print $data;
   } 
```

这将打印循环`$data`内部。`while`有没有办法可以在循环`$data`外打印？`while`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:26:18.073

Accumulate the output in a variable and print after the loop ends?

```
my $data;
while(<$booklist>){
    ($perlbook, $javabook, $cbook) = split (',');
    $bookHash{$cbook} = $cbook;
    $data = $bookHash{$cbook} ;
    $output .= $data;
}
print $output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:47:08.353

我只是猜测你在这里尝试做什么。如果我查看您的代码，您可能有一个包含书名的逗号分隔记录的文件？

如果是这样，下面的代码段将打印所有 C 书籍，根据您的说法，这些书籍应该在您输入行的第三个字段中 `($perlbook, $javabook, $cbook) = split (',');`

```
...
my $booklistFile= 'file.txt';
open my $bookhandle, '<', $booklistFile or die "can not open $!";
my %bookHash = ();

while(my $line = <$bookhandle>) {
   chomp $line;
   my @record = split /\s*,\s*/, $line;
   push @{ $bookHash{PERL} }, $record[0];
   push @{ $bookHash{JAVA} }, $record[1];
   push @{ $bookHash{C}    }, $record[2];
}

# print all c books alphabetically sorted
print join "\n", sort @{ $bookHash{C} };
... 
```

现在，您可以在循环之后按排序顺序获取 C 书籍。

循环部分也可以通过使用散列片不重复地编写：

```
 ...
   ...
   my @record = split /\s*,\s*/, $line;
   for my $category ( @bookHash{'PERL', 'JAVA', 'C'} ) {
      push @$category, shift @record
   }
   ...
   ... 
```

问候，

rbo

# vim - 终端vim没有加载.zshrc

> ID：11415428
> 
> 赞同：17
> 
> 时间：2012-07-10T14:22:46.200
> 
> 标签：vim, zsh, zshrc

我的终端 vim 配置没有加载 ~/.zshrc。zsh 是环境登录shell。这种情况的正确配置是什么？

以下是我已经采取并已删除的一些措施：

`set shell=zsh`
（使用 zsh 作为 shell 但不获取 rc）

`set shellcmdflag=-ci`
（所有输出暂停）

`cat ~/.zshenv
$ source ~/.zshrc` （打开vim时出现很多错误）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T14:56:13.187

从手册：

> ```
> Commands  are  first  read from /etc/zshenv; this cannot be overridden.
> 
> [...]
> 
> Commands are then read from $ZDOTDIR/.zshenv. If the shell is a
> login shell, commands are read from /etc/zprofile and then 
> $ZDOTDIR/.zprofile. Then, if the shell is interactive, 
> commands are read from /etc/zshrc and then $ZDOTDIR/.zshrc. Finally,
> if the shell is a login shell, /etc/zlogin and $ZDOTDIR/.zlogin are
> read. 
> ```

据我了解，

```
set shell=zsh\ -i 
```

应该管用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-02T17:57:59.003

接受的答案没有按预期工作。实际的解决方案应该是将别名和其他`~/.zshrc`内容放入`~/.zshenv`. 唯一需要的`~/.vimrc`是`set shell=zsh`没有任何标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-10T14:15:44.917

我找到了一个方便的解决方案。由于我真正需要的是所有别名，因此我在`~/.zshrc`文件中添加了一个函数：

```
function zshalias()
{
  grep "^alias" ~/.zshrc > ~/.zshenv
} 
```

然后执行`source ~/.zshrc && zshalias`.

在您的 vimrc 中，您只需要：

```
shell=zsh 
```

然后一切正常，没有暂停 tty 输出！

# mysql - @NamedQuery - MySQL - LIKE IN

> ID：11415429
> 
> 赞同：0
> 
> 时间：2012-07-10T14:22:51.320
> 
> 标签：mysql, jpa

我当前的查询如下所示：

```
SELECT * FROM piece p WHERE p.code LIKE '%1740%' OR p.code LIKE '%1938%' 
```

我环顾四周，找不到任何类似于 LIKE IN() 的东西：

```
SELECT * FROM piece p WHERE p.code LIKE IN('%1740 %', '%1938 %') 
```

在 MySQL 中，我可以这样做：

```
SELECT * FROM piece p WHERE code REGEXP '1740|1938' 
```

但我不能将它与@NamedQuery 一起使用。

```
KO : select p from piece p where p.code REGEXP :code
incomplete : select p from piece p where p.code in :code 
```

有人帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:42:33.320

JPA 不支持 JPQL 中的 REGEXP。所以你可以使用 LIKE 和 OR，或者使用原生 SQL 查询。

如果您使用的是 EclipseLink，则 JPQL 支持 REGEXP。

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Functions](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Functions)

# java - java：创建一个会话ID并将其传递给多个类

> ID：11415430
> 
> 赞同：0
> 
> 时间：2012-07-10T14:22:52.050
> 
> 标签：java, sessionid

我正在制作一个 IM 聊天客户端，需要为 3 个课程使用一个随机生成的会话 ID，但无法使其正常工作。当我尝试将它从一个传递到另一个时，它只会生成一个新的。这个想法是 classA 运行聊天并创建一个以 sessionID 命名的新文件夹，并将聊天记录保存在那里。classB 打开文件夹（这就是它需要知道 sessionID 的原因）并对文件夹中的数据运行方法。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:27:36.037

使 sessionID 成为它自己的类。

在 A 类的构造函数中

然后当你去调用B类时，将它添加到构造函数中

```
B item = new B(id); 
```

对于乙

```
sessionID session;
Public B (SessionID myid)
{
    session = myid;
    // add extra code
} 
```

然后使用会话作为您的会话 ID。

编辑：

```
class A
{
    public A ()
    {
        sessionID id = new sessionID();
    }
Thread mychat = new B(id);
mychat.start();
}

class B extends Thread  
{
    // make constructor
    Public B (SessionID myid)
    {
            session = myid;
    }
    // This method is called when the thread runs
    public void run() 
    {
        //working code
    }
} 
```

我不能说得更清楚了.. 抱歉，如果您仍然不理解。

# javascript - 将“this”对象与 DOM 数组中的对象进行比较

> ID：11415433
> 
> 赞同：2
> 
> 时间：2012-07-10T14:22:59.073
> 
> 标签：javascript, jquery, dom

这个问题是我提出问题的根本原因。

[隐藏所有下一个 tr td 直到下一个 tr th](https://stackoverflow.com/questions/11414965/hide-all-next-tr-td-until-next-tr-th)

由于已经发布了两个答案，我想尝试一些不同的东西

Javascript：

```
$(function(){ 
    var thList = $('td');
    $('td').click(function(){
        for( i =0; i < thList.length;i++){
            // What to do here
        }
    });
}); 
```

HTML：

```
 <table border="2">
        <tr>
            <td> 1 </td>
            <td> 2 </td>
            <td> 3 </td>
        </tr>
    <table> 
```

这里所做的是将点击事件分配给`<TH>`元素。在加载时，我`<TH>`将 DOM 中的所有内容放在一个数组中。

现在，我的逻辑是。迭代 for 循环，如果单击`TH`的不是 中的那个`for loop`，则隐藏它。

我尝试的是

```
if ( thList[i] != $(this)) { thList[i].style.display = 'none' } 
```

但这似乎不起作用。我需要放什么代码来比较对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:26:14.883

When you are accessing the items in a jQuery object, you get them as DOM elements, not as new jQuery objects. So, you should compare it to the element reference directly, not wrap the element reference in a jQuery object:

```
for (i = 0; i < thList.length; i++) {
  if ( thList[i] != this) { thList[i].style.display = 'none' }
} 
```

You can also use the [`not` method](http://api.jquery.com/not/) to get a collection without the current element:

```
thList.not(this).each(function(){ this.style.display = 'none'; }); 
```

Of course, using the [`css` method](http://api.jquery.com/css/) it becomes even simpler:

```
thList.not(this).css('display', 'none'); 
```

* * *

Word of caution: The cells in tables are not really separate elements that you can just hide without affecting the other cells in the table. The table can show unexpected behaviour when you hide cells in it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:42:53.177

1-您`$(this)`与`this`一个 jquery 对象不同 2-您没有 TH 元素，这里的代码与您想要的相似，但带有 td

```
$(function(){
var tdList = $('td');
$('td').click(function(){
    tdList.hide();
    $(this).show();
    //OR  tdList.not(this).hide();

  });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T14:33:23.233

除了您的示例标记不包含任何元素这一事实之外，`th`您还可以尝试以下操作：

```
$('td').click(function(){

    var $tdList = $('td').not(this); // <- get all th's and exlude the clicked element

    $tdList.each(function(){this.style.display = 'none'; });
}); 
```

或者更好的是，使用 jQuery，你不需要每个包装器：

```
$tdList.hide(); 
```

由于 jQuery 为您节省了大量工作，因此请尽可能尝试使用它 - 使用`each()`for 循环和使用`.css()`（或者更专用的方法，如`.hide()`）而不是原生`.style`- 这应该会显着缩短您的代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T14:35:10.493

您可以使用：

```
thList.click(function() {
    thList.not(this).css("display", "none");
}); 
```

出于性能原因，您可以委托该事件：

```
$("#yourtable").on("click", "th", function(event) {
    thList.not(event.target).css("display", "none");
}); 
```

我没有测试它，但应该可以。

但是我对 UI 很好奇：如果 TH 以这种方式隐藏，那么在第一次单击它们之后就无法再显示它们了。

# c++ - 运行时检查失败 #2 - bMatix 周围的堆栈已损坏

> ID：11415439
> 
> 赞同：0
> 
> 时间：2012-07-10T14:23:16.773
> 
> 标签：c++, gaussian

调用树：populateMatrix(coeff,bMatrix, rows,cols); 求解矩阵（系数，bMatrix，cols+1）；

```
void solveMatrix(float aMatrix[][DEFCOLS+1],float bMatrix[DEFCOLS+1], size_t cols){
std::cout << "\nInside solveMatrix...: " << endl;
size_t N2 = cols;

std::cout << "\N2 is...: " << N2 << endl;
for(size_t p=0; p<N2; p++){
    //std::cout << "\nInside 1st for loop...: " << endl;
    // find pivot row and swap
    int max = p;
    for(size_t i=p+1; i<N2; i++){
        //std::cout << "\nInside 2nd for loop...: " << endl;
        if ( abs(aMatrix[i][p]) > abs(aMatrix[max][p]) ){
            max = i;
        }
    }

    //std::cout << "\nJust b4 all the swapping...: " << endl;

    float temp[] = { *aMatrix[p] };
    *aMatrix[p] = *aMatrix[max];

    *aMatrix[max] = *temp;

    float t = bMatrix[p];
    bMatrix[p] = bMatrix[max];

    bMatrix[max] = t;
    //std::cout << "\nDone all the swapping...: " << endl;

    if ( abs(aMatrix[p][p]) <= MINISCULE) {
        std::cout << "***** Error matrix value too small. Matrix is singular" << endl;
        return;
    }
    // Pivot /in A and b
    for(size_t i=p+1; i<N2; i++){
        float alpha = aMatrix[i][p] / aMatrix[p][p];

        bMatrix[i] = alpha * bMatrix[p];

        for(size_t j=p; j<N2; j++){
            aMatrix[i][j] -= alpha * aMatrix[p][j];
        }

    }

    std::cout << "\nAbout to do the back subst..: " << endl;
    // back subst.
     std::vector<float> outMatrix(N2, 0.0);
     int i =0;

    for(i=N2-1; i>=0; i--){
        float sum = 0.0;
        int j=0;
        for(j=i+1; j<N2; j++){
            sum += aMatrix[i][j] * outMatrix[j];
        }       
        if (aMatrix[i][i] > 0){
            outMatrix[i] =  ( bMatrix[i] - sum ) / aMatrix[i][i];
        }else {
            outMatrix[i] = 0.0;
        }
    }

    int g = 0;
    std::cout << "\nSolution: " << endl;
    for (;g < N2-1; g++) {
        cout << outMatrix[g] << " ";
    }
    cout << endl;
    return;
} 
```

} // 结束solveMatrix()

这是具有部分旋转的高斯消除的实现。应用程序运行并给出结果 - 不正确的结果，但在它返回后我得到下面的错误。

一旦它返回到调用的顶部，我就会得到：运行时检查失败 #2 - bMatrix 周围的堆栈已损坏！！！

我一直在看这个，不明白为什么会这样。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:40:37.767

问题的发生是因为您传递给solveMatrix() 的实际矩阵大小（即cols+1）大于实际数组的大小（coeff 或bMatrix）。

最简单的调试方法如下：

1.  彻底清除你的函数体。确保您不会再收到错误消息。
2.  恢复第一个 for() 循环。看看这是否会导致错误出现。
3.  ...
4.  重复它，直到找到函数的哪个确切部分导致错误。然后仔细查看并确保您没有超出数组限制（即，如果 bMatrix 是 float[16]，则您没有编写 bMatrix[16]、[17] 或更多。

# java - 在多个类实现后如何正确更改接口？爪哇

> ID：11415442
> 
> 赞同：3
> 
> 时间：2012-07-10T14:23:31.650
> 
> 标签：java

我有一个

```
public interface DoIt {
    void dosomething (int i, double x);
    int dosomethingelse (String s);
} 
```

一些实现它的类`class_of_a`等等......我想在接口中添加一个新方法让我们说`diditwork(int x);` 我应该如何做到这一点，同时避免重新编译的问题或任何可能的问题？新的层次结构是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T14:26:22.910

创建一个新接口并扩展旧接口，例如：

```
interface DoIt2 extends DoIt
{
    // void doSomething(int i, double x);
    // int doSomethingelse(String s);
    void didItWork(int x);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:30:41.090

您可以像这样扩展现有的接口：

```
interface DoItMore extends DoIt {  diditwork(int x);  } 
```

因此，您将拥有用于低级类的旧接口和用于高级的新接口。然后您必须更改高级课程中使用的接口。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T14:27:57.087

创建另一个接口并让给定的类实现这两个接口

例如

```
public interface DoIt { 
    void dosomething(int i, double x);
    int dosomethingelse(String s);
} 
```

和新界面

```
public interface CheckIt {
    boolean diditwork(int x);
} 
```

不需要检查的类将只实现 DoIt 接口，需要检查的类也将实现 CheckIt 接口

# java - Java EE、Tomcat、Servlets：将消息推送到特定客户端

> ID：11415444
> 
> 赞同：1
> 
> 时间：2012-07-10T14:23:36.460
> 
> 标签：java, servlets, push, tomcat7

在我的网络应用程序中，我需要将特定消息实时推送给我的客户。Web-sockets 是个好主意，但它们在 IE 中不起作用，它也应该被支持。

直到最近我们一直在使用 StreamHub，但它的许可证已经过期，项目本身似乎已经死了。我们也考虑过 jWebSockets，但它们似乎有点矫枉过正。

同样，我们需要做的就是在服务器上发生事件时将消息从服​​务器发送到**特定**客户端。

你能为此推荐一个轻量级、免费和开源的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:54:31.417

这是 Socket.IO 的开源[Java 实现](http://code.google.com/p/socketio-java/)。当您的客户端不支持 WebSocket 时，它允许您使用 Ajax 多部分流来模拟 WebSocket。我过去在项目中使用过它。它与 WebSocket 协议的最新实现已经过时了，因此如果您计划在 IE 之外使用支持 WebSocket 的浏览器，则必须更新源代码以符合[最新协议](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-17)。有一次，我正在研究 Java Socket.IO 的维护替代品，而 jWebSockets 听起来像是要走的路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:34:06.437

看看[Atmosphere WebSocket/Comet 库](https://github.com/Atmosphere/atmosphere)。我相信当不支持 WebSockets 时它可以使用长轮询。

# coldfusion - CF8中使用cfpop访问gmail

> ID：11415448
> 
> 赞同：2
> 
> 时间：2012-07-10T14:23:46.760
> 
> 标签：coldfusion, gmail, coldfusion-8

所以我需要使用 ColdFusion 8 来检查一个 GMail 帐户的电子邮件，最终我会下载附件。除了以下代码之外，我已经用 Google 搜索并没有找到太多。让我烦恼的是，这就是我所发现的。

那么这是最好的方法吗？

这是代码。我已经包含了链接，但没有更多信息。

```
<cfscript>
    javaSystem = createObject( "java", "java.lang.System" );
    jProps = javaSystem.getProperties();
    jProps.setProperty( "mail.pop3.socketFactory.class", "javax.net.ssl.SSLSocketFactory" );
    jProps.setproperty( "mail.pop3.port", 995 );
    jProps.setProperty( "mail.pop3.socketFactory.port", 995 );
</cfscript>

<cfpop action="getheaderonly" name="rsEmail" startrow="1? maxrows="50" server="pop.gmail.com" port="995" username="your@username.com.au" password="yourpassword"> 
```

[使用 CFPOP 检查 GMail 上的邮件](http://australiansearchengine.wordpress.com/2009/05/24/cfpop-gmail/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:36:03.717

您是否有理由特别需要使用 POP？如果您使用的是 CF9，那么您可以使用应该与 gmail 一起使用[的 CFIMAP 。](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WS371453EC-36D5-44ce-BF1E-750E3016BBD6.html)文档甚至以 gmail 为例。

或者，您可以直接使用 javamail API：

```
<cfscript>
props = CreateObject("java","java.util.Properties").init();
props.setProperty("mail.store.protocol", "imaps");

sessClass = CreateObject("java","javax.mail.Session");

sess = sessClass.getDefaultInstance(props);

store = sess.getStore("imaps");
store.connect("imap.googlemail.com","you@gmail.com", "password");

folder = store.getFolder("inbox");

if(!folder.isOpen()){
          folder.open(folder.READ_WRITE)
}

messageCount = folder.getMessageCount();

dump(messageCount);

if (!IsNull(folder) && folder.isOpen()) { folder.close(true); }

if (!IsNull(store)) { store.close(); }  

</cfscript> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:38:16.157

这将起作用，但您应该知道它为 POP3 设置了 GLOBAL SSL socketfactory。我相信这将对整个服务器产生影响——这可能与您的流程无关，但值得注意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:16:44.077

你可以使用 Riaforge 上的开源 cfgmail 项目：

[http://cfgmail.riaforge.org/](http://cfgmail.riaforge.org/)

它适用于 CF 7 及更高版本。

# class - 用户自定义 List 实例

> ID：11415450
> 
> 赞同：2
> 
> 时间：2012-07-10T14:23:52.677
> 
> 标签：class, haskell, types

这应该很简单，但我似乎无法绕过它。

假设我有自己的 List 类，在其接口中声明`head`和。应该是您所期望的，即同质项目的集合。然后，我想创建一个实现接口的类型。`tail``List``data``List`

以下代码是我想出的，但它不起作用：你将如何解决它？

```
class List l where                                                             
    head :: l -> a  -- ERROR! How do I tell: given a list, return an element?                                                      
    tail :: l -> l                                                             

data ConsList a = Nil | Cons a (ConsList a)                                    

instance List (ConsList Int) where                                             
    head Nil = error "Empty List"                                              
    head (Cons h _) = h                                                        
    tail Nil = error "Empty List"                                              
    tail (Cons _ t) = t 
```

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T14:29:57.153

与其定义`List`类型类，不如将其定义为*构造函数*类：

```
class List l where
    head :: l a -> a
    tail :: l a -> l a                                        

data ConsList a = Nil | Cons a (ConsList a)

instance List ConsList where
    head Nil = error "Empty List"
    head (Cons h _) = h
    tail Nil = error "Empty List"
    tail (Cons _ t) = t 
```

或者，修复元素类型（注意：对于您的类型`ConsList`，这需要灵活的实例）：

```
{-# LANGUAGE FlexibleInstances #-}

class List l where
    head :: l -> Int
    tail :: l -> l

data ConsList a = Nil | Cons a (ConsList a)

instance List (ConsList Int) where
    head Nil = error "Empty List"
    head (Cons h _) = h
    tail Nil = error "Empty List"
    tail (Cons _ t) = t 
```

最后，使用类型系列，您可以做更多花哨的事情，但如果您应该走那么远（可能不会），这真的取决于您的具体情况：

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE TypeFamilies      #-}

class List l where
    type Elt l
    head :: l -> Elt l
    tail :: l -> l

data ConsList a = Nil | Cons a (ConsList a)

instance List (ConsList Int) where
    type Elt (ConsList Int) = Int

    head Nil = error "Empty List"
    head (Cons h _) = h

    tail Nil = error "Empty List"
    tail (Cons _ t) = t 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T14:33:49.507

你可以

*   使其成为构造函数类，

    ```
    class List l where
        head :: l a -> a
        tail :: l a -> l a 
    ```

*   使其成为具有功能依赖的多参数类型类

    ```
    class List l a | l -> a where
        head :: l -> a
        tail :: l -> l 
    ```

*   使用类型族

    ```
    class List l where
        type Elem l
        head :: l -> Elem l
        tail :: l -> l 
    ```

我认为构造函数类是最好的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T14:31:01.207

对列表进行抽象的最简单方法是对*类型构造函数*进行抽象，即 over `[]`，而不是 over `[a]`（这是 的语法糖`[] a`）。

所以你的班级变成：

```
class List l where
  head :: l a -> a  -- now l is applied to the element type
  tail :: l a -> l a 
```

然后您的实例会相应更改：

```
instance List ConsList where
  ...  -- code as before 
```

# c# - 如何在 MVC4 的 Web API 中设计非 CRUD 操作？

> ID：11415451
> 
> 赞同：2
> 
> 时间：2012-07-10T14:23:56.400
> 
> 标签：c#, rest, asp.net-web-api

我正在使用 ASP.NET MVC4 和 Visual Studio 2012 开始一个新项目。就 API 设计而言，大多数示例都侧重于通过实体上的 PUT、GET、POST 和 DELETE 动词进行的基本 CRUD 操作（如您所料）。我正在阅读以下内容：

[http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)

文章建议，如果我选择将路线映射为

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}/{action}",
    defaults: new { action = RouteParameter.Optional }
); 
```

这更像是一种 RPC 风格的方法；我从中推断他们推荐了两条带有两个控制器的路线来拆分每个操作：

可能类似于父实体 CRUD：

```
routes.MapHttpRoute(
    name: "Parent",
    routeTemplate: "api/{controller}/{id}/{action}",
    defaults: new { id = RouteParameter.Optional }
); 
```

对于子实体 CRUD：

```
routes.MapHttpRoute(
    name: "Child",
    routeTemplate: "api/user/{id}/{controller}",
    defaults: new { id = RouteParameter.Optional }
); 
```

从数据/粗略的角度来看，这完全有道理。但是，当您想要对实体（即，`/User/NoahBawdy/SignIn`或`/User/NoahBawdy/ChangePassword`）执行非粗略操作时怎么办？我可以看到这些是 PUT 或 POST 操作，但它真的需要它自己的控制器吗？这是为这些类型的操作处理 API 设计的错误方法吗？

任何见解一如既往地受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:12:00.510

您在帖子中提出了一些有趣的观点。在我正在从事的项目中，我面临着类似的挑战，我的方法是在路由配置上添加一个操作参数。

通过该更改，我可以将任何方法添加到控制器并从客户端调用它。这避免了为概念上属于同一控制器的方法指定多个控制器的需要。

奥马尔

# tomcat - Tomcat 中的 Alfresco：OutOfMemory

> ID：11415453
> 
> 赞同：1
> 
> 时间：2012-07-10T14:24:04.297
> 
> 标签：tomcat, memory, jvm, alfresco

我最近安装了带有 32 位可执行文件的 Alfresco 4.0d。

每当有人访问该应用程序时，我都会收到 OutOfMemory 错误。

我用谷歌搜索了它，发现需要添加更多内存。

因此，我尝试在 Alfresco 的 tomcat 中编辑 setenv.bat 文件，如下所示：

```
set JAVA_HOME=D:\Alfresco\java
set JAVA_OPTS=-server -Xss1024K -Xms1G -Xmx2G -XX:MaxPermSize=128M -XX:NewSize=512m 
```

但是，错误仍然发生。

我在任务管理器中注意到 tomcat6.exe 使用的内存不超过 960mb，所以我的选项不适用于它？

问候，努诺。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T17:31:49.233

如果您使用可执行文件安装了 Alfresco 社区，则很可能您正在将 Alfresco 作为服务运行。为了在将 tomcat/Alfresco 作为服务安装时更新 JVM 参数，请导航到您的 tomcat/bin 目录并以管理员身份运行以下命令：

```
C:\Alfresco\tomcat\bin>tomcat6w.exe //ES//alfrescoTomcat 
```

这将打开一个小的选项卡式窗口。单击“Java”选项卡并在“Java 选项：”文本框下输入所需的选项，即：

```
-Xms128M
-Xmx1536M
-Dalfresco.home=C:\Alfresco 
```

点击应用并重新启动您的服务。如果您跟踪日志（cygwin），您将看到如下内容：

```
Alfresco JVM - v1.6.0_27-b07; maximum heap size 1365.375MB 
```

服务的 OOTB 设置可以在 service.bat 中找到。这些是 Alfresco 安装程序创建服务时使用的选项。有关将 Alfresco 作为服务运行的更多信息，请参阅： [http](http://wiki.alfresco.com/wiki/Windows_Service_HOW-TO) ://wiki.alfresco.com/wiki/Windows_Service_HOW-TO 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T14:28:08.847

恐怕，实际上您不能在 java 32 位上使用 -Xmx2G，也许您的设置会被忽略？

看这里 [http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#gc_heap_32bit](http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#gc_heap_32bit)

“在大多数现代 32 位 Windows 系统上，最大堆大小范围为 1.4G 到 1.6G。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T20:32:33.273

Out Of Memory Erorr 与 PermGem 大小有关。根据 Alfresco wiki，推荐值为 256M (-XX:MaxPermSize:256m)。如果您没有特定的 Alfresco 安装，请为 Alfresco 使用推荐的 JVM 设置[http://wiki.alfresco.com/wiki/JVM_Tuning#General_Case](http://wiki.alfresco.com/wiki/JVM_Tuning#General_Case)

您可以在***catalina.bat***文件中添加您的更改。如果您将 Alfresco 用作 Windows 服务，请遵循 ConsultStan 的说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T16:24:39.413

对于 Tomcat，在 \apache-tomcat-7.0.37\bin 中找到

我编辑了 catalina.bat 以添加以下行：

设置 JAVA_OPTS=%JAVA_OPTS% -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled -XX:MaxPermSize=256M

和

我编辑了 catalina.sh

JAVA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms1536m -Xmx1536m -XX:NewSize=256m -XX:MaxNewSize=256m -XX:PermSize=256m -XX:MaxPermSize=256m - XX:+DisableExplicitGC"

它适用于e

有帮助；）

# c# - 从使用 readcommited IsolationMode 锁定的 SQL Server 表中选择所有行

> ID：11415455
> 
> 赞同：0
> 
> 时间：2012-07-10T14:24:12.333
> 
> 标签：c#, sql, sql-server, sql-server-2008

我的一个客户端会话从事务中创建表中的条目并继续其处理。事务在隔离模式下运行`read committed`。同时，另一个客户端会话报告表中的所有数据。

由于锁定的行（由其他客户端插入），选择所有操作现在完全锁定。

如何在全选期间检索提交的数据，而不是完全锁定？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:12:42.540

您并没有真正非常具体地了解您的使用场景，但是可以从表中获取数据，只是有一些**严重的警告**。

正如 marc_s 所说，您可以使用快照隔离级别，这与在事务中的所有选择语句上`READ UNCOMMITTED`使用具有相同的效果。`WITH (NOLOCK)`如果您只想读取该表但正常处理事务中的所有其他读取，那么您最好将`NOLOCK`提示放在查询中的特定表上。因此，例如：

```
SELECT *
  FROM firstTable f INNER JOIN
       secondTable s WITH (NOLOCK) on f.Key = s.Key 
```

这将发出一个正常的读取锁，`firstTable`但读取`secondTable`时没有锁。没有锁是非常危险的——因为你可以有效地取出损坏的数据。如果正在执行的插入重新排序数据并导致页面拆分，您可能会两次取出同一行以及各种类似的不愉快。

所以是有可能的，但并不理想，**要警惕效果**。[这里有一些很好的进一步阅读，由 Jason Strate 提供。](http://www.jasonstrate.com/2012/06/the-side-effect-of-nolock/)

# android - Android - 只能在连接到 PC 时保存文件

> ID：11415457
> 
> 赞同：0
> 
> 时间：2012-07-10T14:24:14.797
> 
> 标签：android, actionscript-3, file, air, save

我正在开发一个应用程序，用户可以在某些时候将图像文件保存到 SD 卡。当手机连接到PC时一切正常，但是当我断开手机并启动应用程序时，文件保存不起作用。

我猜我应该在未连接到 PC 时使用不同的路径来保存？

我目前的道路是

```
 "//mnt/sdcard/DCIM/Camera/image"+Math.random()*10000+".jpg" 
```

我正在使用纯 AS3 AIR 进行开发。

这是代码：

```
var bmd:BitmapData = new BitmapData(Main.instance.stage.stageWidth, Main.instance.stage.stageHeight);
        bmd.draw(_board)
        var je:JPGEncoder = new JPGEncoder(100);
        var ba:ByteArray = je.encode(bmd); 

        var fl:File = File.documentsDirectory.resolvePath("//mnt/sdcard/DCIM/Camera/image"+Math.random()*10000+".jpg"); 
        try{
          var fs:FileStream=new FileStream;
          fs.open(fl,FileMode.WRITE);
          fs.writeBytes(ba,0,ba.length);
          fs.close();
        }
            catch(e:Error){
                Main.instance.tf.text = e.message;

            } 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:06:37.853

Android应用存储目录如下：

安装应用程序的目录（只读）

```
File.applicationDirectory
/data/data/app.appID/app/assets 
```

应用程序的私有存储目录

```
File.applicationStorageDirectory
/data/data/app.appID/AppName/Local Store 
```

用户的主目录

```
File.userDirectory
/sdcard 
```

用户文档目录

```
File.documentsDirectory
/sdcard 
```

用户的桌面目录

```
File.desktopDirectory
/sdcard 
```

临时存放目录

```
File.createTempDirectory()
Created in /data/data/app.appId/cache 
```

临时文件

```
File.createTempFile()
Created in /data/data/app.appId/cache 
```

# c# - 从流中实例化位图时出现 ArgumentException

> ID：11415461
> 
> 赞同：3
> 
> 时间：2012-07-10T14:24:25.423
> 
> 标签：c#, .net, c#-4.0

我编写了一些代码来从我的 Blogger 博客中导入内容。下载完所有 HTML 内容后，我会浏览图像标签并下载相应的图像。在很多情况下，System.Drawing.Bitmap.FromStream 会引发 ArgumentException。我正在下载的 URL 看起来不错，它提供了预期的图像（这是其中一个问题图像的 URL：http: [//4.bp.blogspot.com/_tSWCyhtOc38/SgIPcctWRZI/AAAAAAAAAGg/2LLnVPxsogI/s1600- h/IMG_3590.jpg](http://4.bp.blogspot.com/_tSWCyhtOc38/SgIPcctWRZI/AAAAAAAAAGg/2LLnVPxsogI/s1600-h/IMG_3590.jpg) )。

```
 private static System.Drawing.Image DownloadImage(string source)
    {
        System.Drawing.Image image = null;

        // used to fetch content
        var client = new HttpClient();

        // used to store image data
        var memoryStream = new MemoryStream();

        try
        {
            // fetch the image
            var imageStream = client.GetStreamAsync(source).Result;

            // instantiate a system.drawing.image from the data
            image = System.Drawing.Bitmap.FromStream(imageStream, false, false);

            // save the image data to a memory stream
            image.Save(memoryStream, image.RawFormat);
        }
        catch (IOException exception)
        {
            Debug.WriteLine("{0} {1}", exception.Message, source);
        }
        catch (ArgumentException exception)
        {
            // sometimes, an image will link to a web page, resulting in this exception
            Debug.WriteLine("{0} {1}", exception.Message, source);
        }
        catch (AggregateException exception)
        {
            // sometimes, an image src will throw a 404
            Debug.WriteLine("{0} {1}", exception.Message, source);
        }
        finally
        {
            // clean up our disposable resources
            client.Dispose();
            memoryStream.Dispose();
        }

        return image;
    } 
```

知道为什么在这里抛出 ArgumentException 吗？

编辑：我想到这可能是一个代理问题，所以我在我的 web.config 中添加了以下内容：

```
<system.net>
  <defaultProxy enabled="true" useDefaultCredentials="true">
    <proxy usesystemdefault="True" />
  </defaultProxy>
</system.net> 
```

但是，添加该部分并没有任何区别。

编辑：此代码是从 EF 数据库初始化程序的上下文中调用的。这是一个堆栈跟踪：

> Web.dll!Web.Models.Initializer.DownloadImage(string source) 第 234 行 C# Web.dll!Web.Models.Initializer.DownloadImagesForPost.AnonymousMethod__5(HtmlAgilityPack.HtmlNode tag) 第 126 行 + 0x8 字节 C# [外部代码] Web.dll !Web.Models.Initializer.DownloadImagesForPost(Web.Models.Post post) 第 119 行 + 0x34 字节 C# Web.dll!Web.Models.Initializer.Seed(Web.Models.FarmersMarketContext context) 第 320 行 + 0xb 字节 C# [外部代码] App_Web_l2h4tcej.dll!ASP._Page_Views_Home_Index_cshtml.Execute() 第 28 行 + 0x15 字节 C# [外部代码]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:15:56.867

好的，我发现了问题。事实证明，在某些情况下，Blogger 引用了呈现图像的 HTML 页面，而不是引用图像本身。因此，这种情况下的响应不是有效图像。在尝试保存图像数据之前，我添加了代码来检查响应标头，这解决了问题。为了其他遇到此问题的人的利益，这里是更新的代码：

```
 private static System.Drawing.Image DownloadImage(string source)
    {
        System.Drawing.Image image = null;

        // used to fetch content
        var client = new HttpClient();

        // used to store image data
        var memoryStream = new MemoryStream();

        try
        {
            // Blogger tacks on a -h to an image Url to link to an HTML page instead
            if (source.Contains("-h/"))
                source = source.Replace("-h/", "/");

            // fetch the image
            var response = client.GetAsync(source).Result;
            response.EnsureSuccessStatusCode();

            var contentType = response.Content.Headers.ContentType.MediaType;

            if (!contentType.StartsWith("image/"))
            {
                Debug.WriteLine(contentType);
                throw new ArgumentException("Specified source did not return an image");
            }

            var imageStream = response.Content.ReadAsStreamAsync().Result;

            // instantiate a system.drawing.image from the data
            image = System.Drawing.Bitmap.FromStream(imageStream, true, true);

            // save the image data to a memory stream
            image.Save(memoryStream, image.RawFormat);
        }
        catch (HttpRequestException exception)
        {
            // sometimes, we'll get a 404 or other unexpected response
            Debug.WriteLine("{0} {1}", exception.Message, source);
        }
        catch (IOException exception)
        {
            Debug.WriteLine("{0} {1}", exception.Message, source);
        }
        catch (ArgumentException exception)
        {
            // sometimes, an image will link to a web page, resulting in this exception
            Debug.WriteLine("{0} {1}", exception.Message, source);
        }
        finally
        {
            // clean up our disposable resources
            client.Dispose();
            memoryStream.Dispose();
        }

        return image;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:21:50.357

您正在处理另一个问题，我认为您是偶然解决的。不幸的是，GDI+ 异常不是很好，它们通常不能告诉您真正的问题是什么。

Image.FromStream() 实现中一个晦涩的花絮是 GDI+ 在从流中加载位图时使用流的 Seek() 方法。然而，这只有在流允许搜索时才能正常工作，它的 CanSeek 属性必须返回 true。这通常不是网络流的情况，没有提供足够的缓冲来允许任意搜索。

这是 HttpClient.GetStreamAsync() 的一个问题，它的 MSDN Library 文档说：

> 此方法不缓冲流

虽然您编写的工作版本使用 HttpContent.ReadAsStreamAsync()，但它的 MSDN 库文档说：

> 返回的 Task 对象将在所有内容写入字节数组后完成

So your first version doesn't work because the stream's CanSeek property is false, the second version works because the entire response is read into a byte array which permits seeking. The universal solution is to slurp the stream into a MemoryStream first.

# javascript - 如何创建一个浏览按钮，通过它我可以选择系统的任何路径，即 C:\Program Files\.. 并将其放入文本框中

> ID：11415462
> 
> 赞同：0
> 
> 时间：2012-07-10T14:24:31.383
> 
> 标签：javascript, html, jsp

我只想为浏览按钮编写html，通过它我只能选择特定文件夹或驱动器的位置，即c:\abc\def。

但是，我尝试`<input type=file />`了，但这不是我想要的，而是以同样的方式。

严格来说，我只想要文件夹路径，选择它后，我需要把它写在一个文本框中。`<input type=file />`我认为它可以以与文件夹相同的方式完成。

而且我也不想使用 JPanals (swing/applet)。

对此有任何想法吗？请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:27:04.203

出于安全原因，无法通过网络获取文件的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T10:32:51.407

恐怕你不能那样做。

文件输入控件上有一个“接受”属性，您可以通过它应用任何过滤器。但是，许多浏览器会忽略此接受，文件的 mime 类型有效。我不确定文件夹是否有通用的 mime 类型。

IE

```
<input type="file" accept="image/*" /> 
```

那应该只在任何目录中向您显示图像列表。这不是一个答案，而是一个可以帮助您进一步研究的建议。

您可以使用 Java 或 Flash 将某些东西放在一起（例如，使用 SWFUpload 作为基础）。

# ms-word - Word 2010 仅在最后一页的页脚中显示表格

> ID：11415463
> 
> 赞同：0
> 
> 时间：2012-07-10T14:24:34.143
> 
> 标签：ms-word, footer

我有一个单词模板。在页眉和页脚中，我有我公司的徽标。word的数据是从ERP程序自动生成的（效果很好）。

我只想在最后一页显示一些带有数据的表格。我试过这种[方法](http://legalofficeguru.com/different-footer-on-last-page/)，但它只适用于文本。当我更新字段时，表格及其内容消失了。

有人知道如何在桌子上应用这种方法吗？它必须是自动的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:46:42.107

相同的方法适用于段落或表格等块级内容。只需按照相同的步骤，而不是键入“姓名首字母”，在此处插入您的表格。确保在条件中使用语音标记，例如它应该看起来像这样`{ IF {PAGE} = {NUMPAGES} "" "(table)" }`

# regex - 从完全限定的域名中提取主机名的正则表达式

> ID：11415467
> 
> 赞同：5
> 
> 时间：2012-07-10T14:24:43.530
> 
> 标签：regex

我对正则表达式非常生疏，需要一个从完全限定的域名 (FQDN) 中提取主机名，这是我所拥有的一个示例：

```
myhostname.somewhere.env.com
myotherhostname.somewhereelse.insomeotherplace.byh.info 
```

我想回来

```
myhostname
myotherhostname 
```

非常感谢一些帮助

我试过`"(.+)\."`了，但它匹配了右边的字符串并产生了：

```
myhostname.somewhere.env.
myotherhostname.somewhereelse.insomeotherplace.byh. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:27:06.130

使用这个正则表达式`(.+?)(?=\.)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-11T20:24:50.270

你想要第一组：

```
([^.]*).* 
```

或者，第一场比赛来自：

```
[^.]* 
```

或者，唯一的匹配来自：

```
^[^.]* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T21:16:53.580

```
host.split('.').last(2).join('.') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:27:13.300

你很接近，你只需要添加一个`?`让它不贪心。只需选择比赛中的第一组

```
(.+?)\. 
```

但是，正如一些人已经建议的那样，您可能应该只拆分 a`.`并从拆分数组中获取第一项。正则表达式可能很昂贵

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T14:32:17.713

这个怎么样？

```
^(\w+)(\.\w+)*$ 
```

您可以在[regexplanet进行测试](http://www.regexplanet.com/advanced/java/index.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-04T20:27:05.537

```
/^[^.]+/gm 
```

[https://regex101.com/r/jW3lC5/1](https://regex101.com/r/jW3lC5/1)

读取：行首后跟 1 个或多个非句点字符。'g' 表示全局（多个匹配），'m' 表示“多行模式”，它将`^`在每行的开头进行第一个匹配。

# c++ - 在类构造函数中设置 std::vector

> ID：11415469
> 
> 赞同：37
> 
> 时间：2012-07-10T14:24:53.503
> 
> 标签：c++, constructor, new-operator, stdvector

我正在设计一个具有`std::vector<int>`作为实例变量的类。我正在使用 a`std::vector`因为我需要在运行时设置它的大小。以下是我的代码的相关部分：

```
my_class.h:

#include <vector>
using std::vector;
class MyClass {
    int size;
    vector<int> vec;
}

my_class.cc:

#include "my_class.h"
using std::vector
MyClass::MyClass(int m_size) : size(m_size) {
     vec = new vector<int>(size,0);
} 
```

当我尝试编译时，我收到以下错误消息：

```
g++ -c -Wall my_class.cc -o my_class.o

my_class.cc: In constructor ‘MyClass::MyClass(int):

  my_class.cc:4 error: no match for ‘operator=’ in ‘((MyClass*)this)->My_Class::vec = ((*(const allocator_type*)(& std::allocator<int>())), (operator new(24u), (<statement>, ((std::vector<int>*)<anonymous>))))’

make: *** [my_class.o] Error 1 
```

但是，当我将违规行更改为：

```
vector<int> temp(size,0);
vec = temp; 
```

它现在可以顺利编译，我得到了所需的行为，并且可以访问我的向量

```
vec[i]  // i having been defined as an int yada yada yada 
```

这种解决方法没问题，但我想了解它为什么有效并且第一种方法失败。提前致谢。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-10T14:26:14.377

Just do:

```
MyClass::MyClass(int m_size) : size(m_size), vec(m_size, 0) 
```

You already seem to know about initializer lists, why not initialize vector there directly?

```
vec = new vector<int>(size,0); 
```

is illegal because `new` returns a pointer and in your case `vec` is an object.

Your second option:

```
vector<int> temp(size,0);
vec = temp; 
```

although it compiles, does extra work for no gain. By the time you reach the assignment, two vectors would already have been constructed and discarded afterwards.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-10T14:36:39.433

在你的类中使用向量是合法的，问题是你如何初始化它：

```
#include <vector>

class MyClass {
public:
    MyClass(int m_size);

    // ... more things...
private:
    int size;
    vector<int> vec;
} 
```

您正在分配一个指向新向量对象的指针，就好像该向量对象未初始化一样。

```
vec = new vector<int>(size,0); 
```

如果你真的想让它工作，那么你应该将你的`vec`对象声明为：

```
vector<int> * vec; 
```

并且不要忘记添加一个析构函数：

```
MyClass::~MyClass {
    delete vec;
} 
```

为什么当你丢弃`new`粒子时它会起作用？因为您正在创建一个新对象`vector`，并*覆盖*类中的那个（但这并不能保证正确消除原始对象）。

你实际上不需要这样做。`vector`当您到达 MyClass 的构造函数时，您的对象已经被初始化（调用它的默认构造函数）。如果您只想确保为`size`项目保留内存：

```
MyClass::MyClass(int m_size): size(m_size) {
    vec.reserve( size );
} 
```

如果你希望你的向量有`size`元素，那么：

```
MyClass::MyClass(int m_size): size(m_size), vec(m_size, 0)
    {} 
```

最后，正如其中一位评论者指出的那样，一旦构建了向量，实际上就不需要大小。所以你可以摆脱该`size`成员：

```
class MyClass {
public:
    MyClass(int m_size): vec(m_size, 0)
        {}

    unsigned int getSize() const
        { return vec.size(); }

    // ... more things...
private:
    vector<int> vec;
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-17T21:28:37.890

```
#include <vector>
#include <iostream>
#include <string>
#include <typeinfo>

using std::cout;
using std::endl;
using std::string;
using std::vector;
using std::to_string;

class Parse
{
private:
    string         m_str;
    vector<string> m_vec;
public:
    // Constructor with all defaults (1 of 4 constructors)
    Parse(){ 
        cout << "\ncreating class with all default values\n";
        m_str = "";
        m_vec.push_back("");    
    }

    // Constructor with all cases used
    Parse  (string         &tmp_str,
            vector<string> tmp_vec):

            m_str          (tmp_str),
            m_vec          (tmp_vec)
    {
        cout << "Your vector contains " + to_string(m_str.size()) + " arguments\n";
    }

    // Constructor with other contents given but not vector
    Parse  (string         &tmp_str): 
            m_str          (tmp_str)
    {
        m_vec.push_back("");
    }
    // Constructor with only Vector given but not other contents
    Parse  (vector<string>   tmp_vec):
            m_vec           (tmp_vec)
    {
        m_str = "";
    }

    string get_str_var(){return m_str;}

    void classed_print_vector_strings()
    {
        for (string i : m_vec){ cout << i << " \n";}
    }

};

// rm ./class_vector; g++ class_vector.cpp -o class_vector -std=c++17; ./class_vector arg1 arg2 arg3

int main(int argc, char *argv[])
{
    // turn **argv to a vector
    vector<string> args(argv, argv + argc);
    // iterate from argv through argv+argc

    // initialize with default arguments.
    Parse tracker1;
    // initalize with all used arguments
    Parse tracker2(args[0], args);
    // initalize with only the vector
    Parse tracker3(args);
    // initalzie without the vector, but with another arg
    Parse tracker4(args[0]);

    cout << "\nTracker 1 ---------------------\n";
    tracker1.classed_print_vector_strings();
    cout << "\nTracker 2 ---------------------\n";
    tracker2.classed_print_vector_strings();
    cout << "\nTracker 3 ---------------------\n";
    tracker3.classed_print_vector_strings();
    cout << "\nTracker 4 ---------------------\n";
    tracker4.classed_print_vector_strings();

    return 0;
} 
```

```
rm ./class_vector; g++ class_vector.cpp -o class_vector -std=c++17; ./class_vector arg1 arg2 arg3 
```

这将向您展示如何创建一个类，该类将使您可以选择使用或不使用带有和/或不存在其他参数的向量来初始化该类。

# c# - 自定义 ContentControl 不会使用 ResourceDictionary 中的 ContentTemplate

> ID：11415478
> 
> 赞同：0
> 
> 时间：2012-07-10T14:25:15.320
> 
> 标签：c#, wpf, xaml, datatemplate

我有自定义 ContentControl 称为 TabItem

```
public class TabItem : ContentControl 
```

我已将 ContentTemplate 设置为来自资源字典的动态资源

```
<TabItem Header="Search" Content="{Binding Path=SearchRibbon}" ContentTemplate="{DynamicResource SearchRibbonTemplate}" /> 
```

使用这种方法，我正在利用 MVVM 设计模式，并且 Content 属性成功地绑定到视图模型的......并且程序成功构建并运行，但没有内容模板应该拉入的数据模板中的内容。

```
<DataTemplate x:Key="SearchRibbonTemplate">
    <ItemsControl ItemsSource="{Binding}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TabGroupBox Header="{Binding Path=DisplayName}" Width="100">
                    <TabButton Width="100" Icon="{Binding Path=TemplateResource}" LargeIcon="{Binding Path=TemplateResource}" Command="{Binding Path=Commands}" />
                </TabGroupBox>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</DataTemplate> 
```

如果我按原样使用内容控件，这种方法总是有效的。为什么自定义内容控件不能与 ContentTemplate 属性一起使用？

干杯。

**编辑**

```
<Style x:Key="RibbonTabItemStyle" TargetType="{x:Type Ribbon_Framework:TabItem}">
    <Style.Triggers>
        <Trigger Property="Group" Value="{x:Null}">
            <Setter Property="BorderBrush" Value="{StaticResource RibbonTopBorderBrush}" />
        </Trigger>
        <Trigger Property="Selector.IsSelected" Value="False">
            <Setter Property="Foreground" Value="{StaticResource TabItemFontBrush}" />
        </Trigger>
    </Style.Triggers>
    <Setter Property="HorizontalAlignment" Value="Left" />
    <Setter Property="VerticalAlignment" Value="Top" />
    <Setter Property="Height" Value="31" />
    <Setter Property="IsMinimized" Value="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Ribbon_Framework:RibbonTabControl}}, Path=IsMinimized, Mode=OneWay, FallbackValue=False}" />
    <Setter Property="IsOpen" Value="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Ribbon_Framework:RibbonTabControl}}, Path=IsDropDownOpen, Mode=OneWay, FallbackValue=True}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Ribbon_Framework:TabItem}">
                <Grid x:Name="grid" Background="#00000000" Height="24" VerticalAlignment="Top" Margin="0,7,0,0">
                    <Border x:Name="border3" Margin="2,0,0,1" BorderThickness="1,0" Grid.ColumnSpan="2">
                        <Border.BorderBrush>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#CCFFFFFF" Offset="0" />
                                <GradientStop Offset="1" Color="#7FFFFFFF" />
                            </LinearGradientBrush>
                        </Border.BorderBrush>
                        <Border x:Name="border4" BorderBrush="{Binding Group.BorderBrush, RelativeSource={RelativeSource TemplatedParent}}" BorderThickness="1,0">
                            <Border.OpacityMask>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Color="Black" Offset="0" />
                                    <GradientStop Color="#00000000" Offset="0.981" />
                                </LinearGradientBrush>
                            </Border.OpacityMask>
                            <Border Background="{Binding Group.Background, RelativeSource={RelativeSource TemplatedParent}}" BorderThickness="0" Margin="0">
                                <Border.OpacityMask>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#59000000" Offset="0" />
                                        <GradientStop Color="#00000000" Offset="1" />
                                    </LinearGradientBrush>
                                </Border.OpacityMask>
                                <Rectangle x:Name="rectangle4" Fill="#3FD2D2D2" StrokeThickness="0">
                                    <Rectangle.OpacityMask>
                                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                            <GradientStop Color="#7F000000" Offset="0" />
                                            <GradientStop Color="#00000000" Offset="1" />
                                        </LinearGradientBrush>
                                    </Rectangle.OpacityMask>
                                </Rectangle>
                            </Border>
                        </Border>
                    </Border>
                    <Grid x:Name="selectedGrid" Visibility="Collapsed" Margin="2,0,0,0" Grid.ColumnSpan="1">
                        <Rectangle x:Name="rectangle" Fill="{StaticResource ActiveTabBackgroundBrush}" Stroke="{x:Null}" StrokeThickness="0" Margin="0" VerticalAlignment="Bottom" Height="1" />
                        <Rectangle x:Name="rectangle1" Fill="{StaticResource ActiveTabBackgroundBrush}" Stroke="{x:Null}" StrokeThickness="0" Margin="1.8,0" VerticalAlignment="Bottom" Height="1.2" />
                        <Rectangle x:Name="rectangle2" Fill="{StaticResource ActiveTabBackgroundBrush}" Stroke="{x:Null}" StrokeThickness="0" Margin="2,0" VerticalAlignment="Bottom" Height="2" />
                        <Border x:Name="border" Margin="1,0,1,2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1,1,1,0" VerticalAlignment="Stretch" CornerRadius="2,2,0,0" Background="{StaticResource ActiveTabBackgroundBrush}">
                            <Border x:Name="border_Copy3" Margin="0" BorderThickness="1,1,1,0" VerticalAlignment="Stretch" CornerRadius="2,2,0,0" Background="{x:Null}" BorderBrush="{StaticResource ActiveTabBackgroundBrush}">
                                <Border x:Name="border_Copy4" Margin="0,0,-2,-1" BorderThickness="0" VerticalAlignment="Stretch" CornerRadius="2,2,0,0" Background="{Binding Group.Background, RelativeSource={RelativeSource TemplatedParent}}" BorderBrush="{x:Null}">
                                    <Border.OpacityMask>
                                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                            <GradientStop Color="#3F000000" Offset="0" />
                                            <GradientStop Color="#00000000" Offset="0.59" />
                                        </LinearGradientBrush>
                                    </Border.OpacityMask>
                                </Border>
                            </Border>
                        </Border>
                        <Border x:Name="border1" HorizontalAlignment="Left" Margin="0" VerticalAlignment="Bottom" Width="2" Height="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0,0,1,1" CornerRadius="0,0,2,0" />
                        <Border x:Name="border2" HorizontalAlignment="Right" Margin="0" VerticalAlignment="Bottom" Width="2" Height="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1,0,0,1" CornerRadius="0,0,0,2" />
                        <Rectangle x:Name="rectangle3" StrokeThickness="0" Margin="7,-7,7,0" VerticalAlignment="Top" Height="14" IsHitTestVisible="False">
                            <Rectangle.Fill>
                                <RadialGradientBrush Center="0.498,0.501" GradientOrigin="0.498,0.501" RadiusY="0.464">
                                    <GradientStop Color="#7FFFFFFF" Offset="0" />
                                    <GradientStop Offset="1" />
                                </RadialGradientBrush>
                            </Rectangle.Fill>
                        </Rectangle>
                    </Grid>
                    <Grid x:Name="hoverGrid" Margin="2,0,0,0" Visibility="Collapsed" Grid.ColumnSpan="1">
                        <Border x:Name="border_Copy" Margin="1,0,1,1" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1,1,1,0" VerticalAlignment="Stretch" CornerRadius="2,2,0,0" Background="{x:Null}">
                            <Border.OpacityMask>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Color="#CC000000" Offset="0" />
                                    <GradientStop Color="#F7FFFFFF" Offset="0.985" />
                                </LinearGradientBrush>
                            </Border.OpacityMask>
                            <Border x:Name="border_Copy1" Margin="0" BorderBrush="{StaticResource ActiveTabBackgroundBrush}" BorderThickness="1,1,1,0" VerticalAlignment="Stretch" CornerRadius="2,2,0,0" Background="{x:Null}">
                                <Border.OpacityMask>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#CCFFFFFF" Offset="0" />
                                        <GradientStop Color="#F7FFFFFF" Offset="1" />
                                    </LinearGradientBrush>
                                </Border.OpacityMask>
                                <Border x:Name="border_Copy2" Margin="0" BorderBrush="{x:Null}" BorderThickness="0" VerticalAlignment="Stretch" CornerRadius="2,2,0,0" Background="{StaticResource ActiveTabBackgroundBrush}">
                                    <Border.OpacityMask>
                                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                            <GradientStop Color="#7FFFFFFF" Offset="0.004" />
                                            <GradientStop Offset="0.5" />
                                        </LinearGradientBrush>
                                    </Border.OpacityMask>
                                </Border>
                            </Border>
                        </Border>
                    </Grid>
                    <Grid x:Name="focusedGrid" Margin="2,0,0,0" Visibility="Collapsed" Grid.ColumnSpan="1">
                        <Grid.OpacityMask>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="White" Offset="0" />
                                <GradientStop Offset="1" Color="#19FFFFFF" />
                            </LinearGradientBrush>
                        </Grid.OpacityMask>
                        <Border x:Name="border_Copy5" Margin="1,0,1,1" BorderThickness="1,1,1,0" VerticalAlignment="Stretch" CornerRadius="2,2,0,0" Background="{StaticResource ButtonHoverOuterBackgroundBrush}" BorderBrush="{StaticResource ButtonHoverOuterBorderBrush}">
                            <Border x:Name="border_Copy6" Margin="0" BorderBrush="{StaticResource ButtonHoverInnerBorderBrush}" BorderThickness="1,1,1,0" VerticalAlignment="Stretch" CornerRadius="2,2,0,0" Background="{StaticResource ButtonHoverInnerBackgroundBrush}" />
                        </Border>
                    </Grid>
                    <Border x:Name="PART_ContentContainer" HorizontalAlignment="Stretch" Margin="6,2,4,2" VerticalAlignment="Stretch" Padding="15,0,0,0" Grid.ColumnSpan="1">
                        <Label x:Name="contentPresenter" AutomationProperties.Name="{TemplateBinding Header}" AutomationProperties.AutomationId="{TemplateBinding Name}" Content="{TemplateBinding Header}" Margin="0, -3, 0,0" HorizontalAlignment="Center" VerticalAlignment="Center" Height="Auto" />
                    </Border>
                    <Grid x:Name="separatorGrid" Margin="0" Visibility="Collapsed" HorizontalAlignment="Right" Width="2" Grid.Column="1">
                        <Rectangle x:Name="separatorRectangle1" Fill="{StaticResource RibbonTopBorderBrush}" Stroke="{StaticResource RibbonTopBorderBrush}" Margin="0,0,1,0" HorizontalAlignment="Right" Width="1" Opacity="1" Visibility="Visible">
                            <Rectangle.OpacityMask>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Color="#00000000" Offset="0" />
                                    <GradientStop Color="#E5FFFFFF" Offset="0.382" />
                                </LinearGradientBrush>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                        <Rectangle x:Name="separatorRectangle2" Fill="{StaticResource ActiveTabBackgroundBrush}" Stroke="{StaticResource ActiveTabBackgroundBrush}" HorizontalAlignment="Right" Margin="0" Width="1" Opacity="1" Visibility="Visible">
                            <Rectangle.OpacityMask>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Color="#00000000" Offset="0" />
                                    <GradientStop Color="#BFFFFFFF" Offset="0.329" />
                                </LinearGradientBrush>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Grid>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Opacity" TargetName="contentPresenter" Value="0.5" />
                    </Trigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="HasRightGroupBorder" Value="False" />
                            <Condition Property="HasLeftGroupBorder" Value="True" />
                        </MultiTrigger.Conditions>
                        <Setter Property="BorderThickness" TargetName="border3" Value="1,0,0,0" />
                        <Setter Property="BorderThickness" TargetName="border4" Value="1,0,0,0" />
                        <Setter Property="Margin" TargetName="rectangle4" Value="0" />
                    </MultiTrigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="HasLeftGroupBorder" Value="False" />
                            <Condition Property="HasRightGroupBorder" Value="True" />
                        </MultiTrigger.Conditions>
                        <Setter Property="BorderThickness" TargetName="border4" Value="0,0,1,0" />
                        <Setter Property="BorderThickness" TargetName="border3" Value="0,0,1,0" />
                        <Setter Property="Margin" TargetName="rectangle4" Value="0" />
                        <Setter Property="Margin" TargetName="border3" Value="0,0,0,1" />
                    </MultiTrigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="HasLeftGroupBorder" Value="False" />
                            <Condition Property="HasRightGroupBorder" Value="False" />
                        </MultiTrigger.Conditions>
                        <Setter Property="BorderThickness" TargetName="border4" Value="0,0,0,0" />
                        <Setter Property="BorderThickness" TargetName="border3" Value="0,0,0,0" />
                        <Setter Property="Margin" TargetName="rectangle4" Value="0" />
                        <Setter Property="Margin" TargetName="border3" Value="0,0,0,1" />
                    </MultiTrigger>
                    <Trigger Property="Group" Value="{x:Null}">
                        <Setter Property="Visibility" TargetName="border3" Value="Collapsed" />
                        <Setter Property="Margin" TargetName="separatorGrid" Value="-1,0,0,1" />
                        <Setter Property="Visibility" TargetName="border_Copy3" Value="Collapsed" />
                        <Setter Property="Visibility" TargetName="rectangle3" Value="Collapsed" />
                    </Trigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="Selector.IsSelected" Value="True" />
                            <Condition Property="IsMinimized" Value="False" />
                        </MultiTrigger.Conditions>
                        <Setter Property="Visibility" TargetName="selectedGrid" Value="Visible" />
                    </MultiTrigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsMouseOver" Value="True" />
                            <Condition Property="Selector.IsSelected" Value="False" />
                            <Condition Property="IsMinimized" Value="False" />
                        </MultiTrigger.Conditions>
                        <Setter Property="Visibility" TargetName="hoverGrid" Value="Visible" />
                    </MultiTrigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsMouseOver" Value="True" />
                            <Condition Property="IsMinimized" Value="True" />
                            <Condition Property="IsOpen" Value="False" />
                        </MultiTrigger.Conditions>
                        <Setter Property="Visibility" TargetName="hoverGrid" Value="Visible" />
                    </MultiTrigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="Selector.IsSelected" Value="True" />
                            <Condition Property="IsMinimized" Value="True" />
                            <Condition Property="IsOpen" Value="True" />
                        </MultiTrigger.Conditions>
                        <Setter Property="Visibility" TargetName="hoverGrid" Value="Visible" />
                        <Setter Property="Background" TargetName="grid" Value="#00000000" />
                    </MultiTrigger>
                    <Trigger Property="IsSeparatorVisible" Value="True">
                        <Setter Property="Visibility" TargetName="separatorGrid" Value="Visible" />
                        <Setter Property="Margin" TargetName="PART_ContentContainer" Value="6,2" />
                        <Setter Property="Margin" TargetName="hoverGrid" Value="2,0" />
                        <Setter Property="Margin" TargetName="selectedGrid" Value="2,0" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="IsTabStop" Value="False" />
    <Setter Property="Indent" Value="12" />
    <Setter Property="Foreground" Value="{StaticResource TabItemSelectedFontBrush}" />
    <Setter Property="FontFamily" Value="{StaticResource DefaultFontFamily}" />
    <Setter Property="FontSize" Value="{StaticResource DefaultFontSize}" />
    <Setter Property="Margin" Value="0" />
    <Setter Property="BorderBrush" Value="{Binding Group.BorderBrush, RelativeSource={RelativeSource Self}}" />
    <Setter Property="FocusVisualStyle" Value="{StaticResource ControlStyleEmptyFocus}" />
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:38:33.270

我的猜测是您没有为控件定义默认样式，`Themes/Generic.xaml`其中应该将`Template`控件的 设置为至少包含一个`ContentPresenter`.

例如

```
<Style TargetType="local:TabItem">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:TabItem">
                 <!-- Usually there is also a Border which template binds the Margin, Padding, etc. -->
                 <ContentPresenter />
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:39:28.893

在与构建我正在改进的 Fluent Ribbon 库的一位开发人员通信后，他指出，为了实现这个设计，需要更多的时间来修改 ContentPresenter，并且需要进行全面的返工。在这种情况下，他建议构建一个从彼此控制派生的 ViewModel 列表将提供我正在寻找的设计。

感谢大家的回答，但在这种情况下，困难的方法似乎是简单的方法。

干杯。

# ruby - Customize Gems or merge into main rails project

> ID：11415479
> 
> 赞同：0
> 
> 时间：2012-07-10T14:25:16.523
> 
> 标签：ruby, ruby-on-rails-3

Currently I am writing a Ruby on Rails application, and I am using Gems, however sometimes I feel that Gems are not as flexible as I want them to be. To make them more flexible. Should I

**Fork them on github, and customize it, but this still present the challenging of managing everything.**

or

**Strip and merge the code of the gem to the main application? This will allow further customization of the gem. This would be for situations where a Gem require another Gem's functionality.**

or is there a better way of doing this?

Thanks B

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:45:44.423

出于多种原因，选择 A 是更好的答案。

1.  您可以轻松地合并安全更新、增强功能和错误修复。
2.  您的更改可能会合并到核心中——事实上，请考虑您是否可以以这样的方式实现它们，因为它们与核心功能一起作为选项存在。如果发生这种情况，您将获得最终的胜利——无需维护，您可以退役您的分叉。
3.  其他人可以从您的更改中受益。
4.  通过保持 gem 代码隔离，您的项目占用空间更小且更集中。
5.  你会有一些东西可以添加到你的 Github“简历”中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-28T18:40:40.323

如果它不是那么受欢迎的宝石或“自行车”，来自以前开始项目的工作室或开发人员（在我的情况下）。
我更喜欢弃用这个 gem 并将代码移动到项目中，例如他们有 c***la-deploy - 它只是 Capistrano 2 的包装器，带有自己的方法））） - 我只是删除它并在最后一个 Capistrano 3 上重写，而
不是拥有自己的“CMS” c***la-cms 用名称“twitter_form_for”包装标准 form_for 或 simple_form ？- 首先我开始尝试查找使用此名称的 gem，而不是在依赖 gem 的...
例如，对于启动使用大量依赖项是不好的，如果它只是简单的网站 - 没关系。

# mysql - enter in mysql without password should not work

> ID：11415483
> 
> 赞同：0
> 
> 时间：2012-07-10T14:25:24.183
> 
> 标签：mysql

On windows, I have two root users.
I deleted one and kept the local one (root@localhost).
I set its password by :

```
set password for 'root'@'localhost'= password('new_password'); 
```

I exit and I do :

```
mysql -u root 
```

and I am in mysql.
I was waiting for the password request.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:27:52.713

您必须重新启动 mysql 或运行`flush privilidges`才能使新密码生效。

还可以尝试为 127.0.0.1 和 localhost 设置 root 密码。

# objective-c - cocoa: how to implement a link in objective-c

> ID：11415485
> 
> 赞同：-1
> 
> 时间：2012-07-10T14:25:33.800
> 
> 标签：objective-c, cocoa

I have a Person class which has an instance variable: Name and Person.

```
@interface Person : NSObject{
    NSString *name;
    Person *child;
}

@property (copy) NSString *name;
@property (strong) Person *child;
@end

@implementation Person
@synthesize name;
@synthesize child;

-(id) init{
    self = [super init];
    if(self){
        name = @"";
        child = [[Person alloc]init];
    }
    return self;
}
@end 
```

If I create a Person object, like:

```
Person *parent = [[Person alloc]init]; 
```

the program will repeat to create Person instances, how can I solve this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:27:16.160

不是所有人都有孩子，那么为什么每次创建一个新人时都要分配一个孩子呢？

换句话说，不要做你正在做的事情。如果一个人碰巧有一个孩子，请单独创建该孩子并`child`适当地设置该人的属性。

# android - 将函数指针作为参数传递给本机函数

> ID：11415489
> 
> 赞同：0
> 
> 时间：2012-07-10T14:25:39.880
> 
> 标签：android, function-pointers, android-ndk

我正在使用 android NDK 尝试使用现有库来构建应用程序。

在库中声明了以下函数...

```
BYTE __stdcall InitRelay(fp_setbaud _setbaud, fp_get _get, fp_put _put, fp_flush _flush, fp_delay _delay){ 
```

这些是传递给 InitRelay 的参数的声明...

```
typedef void (__stdcall *fp_setbaud)(WORD);
typedef short (__stdcall *fp_get)(WORD);
typedef void (__stdcall *fp_put)(BYTE);
typedef void (__stdcall *fp_flush)(void);
typedef void (__stdcall *fp_delay)(WORD);
 typedef short (__stdcall *fp_ProgressUpdate)(WORD); 
```

我去过[这个线程](https://stackoverflow.com/questions/1073358/function-pointers-in-java)，但仍然不知道该怎么做。我正在做的事情和他们正在做的事情之间的区别在于，我想在 C 中调用一个需要函数指针作为参数的本机函数。

我正在考虑在 Native 代码中编写一个包装函数，这听起来对吗？我的主要问题是我无法更改给定的本机代码，但我可以添加新功能。我知道人们会要求我发布我的 java 代码，所以我会，但它实际上是无用的。它只是一个带有当前对 java 没有意义的参数的方法调用。

```
 // InitRelay
    InitRelay( fp_setbaud _setbaud, fp_get _get, fp_put, fp_flush _flush, fp_delay _delay ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:38:50.337

是的，编写本机包装器。无论如何，您都需要这样做，因为 jni 对接口函数有非常特殊的命名要求。重要的数据类型也需要从/到 jni 引用的复制转换。

库中的进程级静态状态也会让你很头疼，因为 android 不会将进程的生命周期与用户可感知的会话生命周期联系起来。Android 也很乐意将多个不同的会话放入同一个进程中。

# python - Remove certain return characters from tab-separated values file

> ID：11415490
> 
> 赞同：1
> 
> 时间：2012-07-10T14:25:40.750
> 
> 标签：python, postgresql

I've got a problem at work that requires me to insheet some MASSIVE tab-separated values files (think 8-15 GB .txt files) into my PostgreSQL DB, but I've run into a problem with the way the data was formatted in the first place. Basically, the way we are given the data (and unfortunately we cannot get the data in a better format), there are some backslashes that appear and cause a return/new line.

So, there are lines (rows of data, tab-delim) that get chopped up into multiple lines, where the last character of line n is a \ , and the first character of line n+1 is a tab. Usually line n will be broken up into 1-3 additional lines (e.g. line n ends in a "\", lines n+1 and n+2 start with a tab and end with a "\", and line n+3 starts with a tab).

I need to write a script that can work with these huge files (this will run on a linux server with 192 GB of RAM) to look for the lines that begin with a tab, and then remove the return (and "\" wherever it exists) and save the text file.

To recap, the customer's logging program splits the original line N into lines n, n+1, and sometimes n+2 and n+3 (depending on how many \ characters appear in line N), and I need to write a python script to recreate the original line N.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:26:16.923

```
#!/usr/bin/python

import re,sys

lastLine = None
incomplete = re.compile("\\\\+$")
indented = re.compile("^\\t")

for line in open(sys.argv[1]):
    line = line.rstrip()
    line = incomplete.sub("", line)
    if indented.match(line):
        lastLine += indented.sub("",line)
    else:
        if lastLine:
            print lastLine
            lastLine = None
        lastLine = line

print lastLine 
```

基本上，我忽略了末尾的 \，因为下一行的选项卡告诉您无论如何它是一个延续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:33:35.753

将 "\n" 序列替换为空：

```
In [20]: a="blabla\tblabla\tblabla\\\n\tblabla\tblabla"

In [21]: print(a)
blabla  blabla  blabla\
    blabla  blabla

In [22]: a=a.replace('\\\n', '')

In [23]: print(a)
blabla  blabla  blabla  blabla  blabla 
```

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:53:13.113

这是基于@user665637 的好答案。

```
#!/usr/bin/python

import re, sys

pat_incomplete = re.compile(r'\\\s*$')
pat_indented = re.compile(r'^\t')

try:
    _, fname_in, fname_out = sys.argv
except ValueError:
    print("Usage: python line_joiner.py <input_filename> <output_filename>")
    sys.exit(1)

with open(fname_in) as in_f, open(fname_out, "w") as out_f:
    lines = iter(in_f)
    try:
        line = next(lines)
        s = pat_incomplete.sub('', line)
    except StopIteration:
        print("Input file did not contain any data")
        sys.exit(2)

    for line in lines:
        line = pat_incomplete.sub('', line)
        if pat_indented.match(line):
            s += pat_indented.sub('',line)
        else:
            out_f.write(s)
            s = line
    out_f.write(s) 
```

变化：

*   对正则表达式使用“原始字符串”，这样更易​​于阅读。

*   从命令行参数获取输出文件名并写入该文件。如果用户提供了错误数量的参数，则打印一条消息并退出。当我们解压`sys.argv`以获取参数时，我们使用约定`_`为我们不关心的部分使用变量名。

*   不去除行尾，因此输出文件将具有与输入文件相同的行尾。（当连接线时，当然它会去除行尾以进行连接。）

*   不从输入中过滤掉空行。这有点棘手，但是通过创建一个迭代器并调用`next()`它，它会在开始循环之前获得第一行输入；因此`s`从一个有效值而不是 开始`None`，我们不必每次都测试它来查看是否打印它。原始`if lastLine:`测试，在被剥离的输入行上，不仅可以防止初始`None`值，`lastLine`而且还会从输入中过滤掉任何空白行。

*   如果您必须在 Python 3.0 或 Python 2.6 中使用它，则不能有一个执行两次调用的`with`语句；`open()`但是你可以把它变成两个嵌套`with`语句，每个语句都执行一个`open()`.

# ruby - Error no block given when used yield inside a block

> ID：11415491
> 
> 赞同：2
> 
> 时间：2012-07-10T14:25:41.960
> 
> 标签：ruby, yield

I'm getting this error

```
LocalJumpError: no block given (yield)
    from fops.rb:52:in `block (2 levels) in gen_list'
    from /home/phanindra/.gem/ruby/1.9.1/gems/mp3info-0.6.18/lib/mp3info.rb:306:in `open'
    from fops.rb:51:in `block in gen_list'
    from fops.rb:46:in `each'
    from fops.rb:46:in `gen_list'
    from fops.rb:48:in `block in gen_list'
    from fops.rb:46:in `each'
    from fops.rb:46:in `gen_list'
    from fops.rb:48:in `block in gen_list'
    from fops.rb:46:in `each'
    from fops.rb:46:in `gen_list'
    from fops.rb:48:in `block in gen_list'
    from fops.rb:46:in `each'
    from fops.rb:46:in `gen_list'
    from (irb):2
    from /usr/bin/irb:12:in `<main> 
```

when used yield inside another block which is inside a begin statement which is inside a if statement, for a simple understanding here is the prototype

```
def test
   if 1 then
      begin
         test2(5) do |x|
            yield x
         end
      rescue
      end
   end
end

def test2(n)
   n.times do |k|
      yield k
   end
end
test() do |y|
   puts y
end 
```

The problem is there is no error with the prototype, it worked fine so I dont understand why I'm getting this error, here is my actual code

```
require "mp3info"
module MusicTab
   module FOps

      def self.gen_list(dir)
         prev_pwd=Dir.pwd
         begin
            Dir.chdir(dir)
         rescue Errno::EACCES
         end
         Dir[Dir.pwd+'/*'].each{|x|
            if File.directory?(x) then
               self.gen_list(x)
            else
               begin
              Mp3Info.open(x) do |y|
                 yield "#{y.tag.title},#{y.tag.album},#{y.tag.artist},#{x}"
              end
           rescue Mp3InfoError
           end
            end
          }
          Dir.chdir(prev_pwd)
       end
    end
 end 
```

I was testing this code using irb

```
[phanindra@pahnin musictab]$ irb
irb(main):001:0> load 'fops.rb'
/usr/share/rubygems/rubygems/custom_require.rb:36:in `require': iconv will be deprecated in the future, use String#encode instead.
=> true
irb(main):002:0> MusicTab::FOps.gen_list('/fun/Music') do |l|
irb(main):003:1* puts l
irb(main):004:1> end 
```

Any help? regards

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:26:42.850

问题是您正在`gen_list`递归调用，并且在递归下降的调用站点确实没有阻塞。

你可以做的是：

*   将块捕获为带有`&`参数的过程，然后转发它，*或者*
*   添加一个块，对递归调用执行另一个 yield

所以...

```
def f1 x, &block
  block.call(x)
  if x > 0
    f1 x - 1, &block
  end
end

# ...or...

def f2 x
  yield x
  if x > 0
    f2 x - 1 do |y|
      yield y
    end
  end
end

f1 2 do |q|
  p ['b1', q]
end

f2 2 do |q|
  p ['b2', q]
end 
```

# jsf - Set X Y cordinates of compoenents in JSF

> ID：11415492
> 
> 赞同：0
> 
> 时间：2012-07-10T14:26:01.830
> 
> 标签：jsf, jakarta-ee, primefaces

In Java, I can specify the location of a (for example) button somewhere in a panel. Is there an equivalent way of doing this in JSF?

Rephrasing the question: For some type of panel (JSF component), can I specify the X and Y cordinates of where components in the panel should be placed?

I saw in PrimeFaces there is a Layout component. I was trying to add a button to it, but can not figure out a way to set the X and Y position.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:15:44.700

一般来说，JSF 不负责定位组件，它只是创建 HTML 标记。使用“in Java”，您可能指的是 Swing-GUI，更具体地说是 NullLayout（？）。

直接在 HTML（JSF 生成）中定位组件的标准方法是通过 CSS 样式表和“位置”属性（例如：[http](http://www.w3schools.com/cssref/pr_class_position.asp) ://www.w3schools.com/cssref/pr_class_position.asp ）。

您可以将这些位置放入单独的 CSS 文件中，或者通过“样式”属性将它们直接附加到您的 JSF（或 HTML）标签中。

Primefaces 的布局标签试图为您提供类似于 Java-Swing 中的 LayoutManager 的东西，其主要目的是避免必须单独定位事物。

注意：与许多 HTML 和 CSS 一样，这可能不适用于每个浏览器。

# entity-framework - 使用模型优先的实体框架 (.NET) 往返建模？

> ID：11415504
> 
> 赞同：1
> 
> 时间：2012-07-10T14:26:30.157
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations, entity-framework-5, ef-model-first

我目前正在做一个我想第一次使用实体框架的项目。我在 Lerman/Miller 的书籍、MSDN、ADO.NET 博客和 stackoverflow 上阅读了很多关于 DbContext API 和自 EF 4.3 以来可用的代码优先迁移功能的最新发展的信息。由于尤其是后者真的很棒，我想知道在此期间是否有可能以“模型优先”为中心做同样的工作？在创建代码和数据库后，是否可以基于可视化 EDMX 设计器（而不是代码）进行迁移？

我发现一个最近的链接（2012-04）说它不是（在 EF 4.3 中）： [Using EF4 migration tool with model-first approach](https://stackoverflow.com/questions/10179896/using-ef4-migration-tool-with-model-first-approach)

其次，我发现旧代码和数据库表在尝试从 EDMX 设计器重新生成时被覆盖的信息？

但我指的是关于电动工具的信息：http: [//blogs.msdn.com/b/adonet/archive/2012/04/09/ef-power-tools-beta-2-available.aspx](http://blogs.msdn.com/b/adonet/archive/2012/04/09/ef-power-tools-beta-2-available.aspx)

> 逆向工程 Code First 此命令允许为现有数据库一次性生成 Code First 映射。[..] • 多次运行此命令将覆盖任何以前生成的文件，包括对生成的文件所做的任何更改

这种限制是仅特定于 Power Tools 逆向工程师 Code First 还是一般扩展到 EDMX 设计人员，尤其是“模型优先”方法？

此外，在上面的文章中，我发现：

> 查看实体数据模型（只读）在实体框架设计器中显示 Code First 模型。• 这是模型的只读表示；您无法使用设计器更新 Code First 模型。

同样的问题也适用于此。

那么目前有没有一种方法可以在没有数据丢失（代码和数据库）的情况下进行完整的往返建模并保持 EDMX 文件可写，最好遵循“模型优先”？

从哪个版本的 EF 开始支持（已经或计划支持），我应该以哪个版本的 .NET 为目标（4.0 就足够了？）这是否适用于 Visual Studio 2010 Professional？你能粗略估计一下你可能会实施它的日期吗？

这当然很棒，而且是一个巨大的突破！我想我只能粗略地想象这将是多少工作，并且我知道你已经完全在你的极限工作了。我要感谢您迄今为止所做的出色工作，并鼓励您继续努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T19:54:47.377

如果我正确理解了您的问题，那么您将在 EF 设计器的迁移之后（即更新设计器中的模型并逐步更改数据库）。目前尚不支持此功能，我们的待办事项中有待解决，但我们没有针对特定版本的具体计划。我们需要解决的一件事是我们是否应该只集成/扩展现有的 Code First 迁移功能以与 EF 设计器一起使用，或者我们是否需要一些更专注于设计器的东西。显然情况可能会发生变化，但在现阶段，我不指望我们会在接下来的 6 个月内开始开发此功能。除此之外，这将取决于我们看到人们要求的功能......所以我会在[http://data.uservoice.com](http://data.uservoice.com)上创建一个新功能并让人们对其进行投票。〜罗文

# python - Using Django class_prepared signal

> ID：11415505
> 
> 赞同：4
> 
> 时间：2012-07-10T14:26:30.663
> 
> 标签：python, django

I have an abstract model class responsible for custom validation procedures and a bunch of models in different apps which inherits from this class. And I'm trying to use `class_prepared` signal to import some app dependent validators, like that:

```
def on_class_prepared(sender, **kw):
    if issubclass(sender, DefaultModel):
        try:
            getattr(sender, 'class_prepared')(**kw)
        except AttributeError:
            pass
class_prepared.connect(on_class_prepared)

class ValidatableModel(DefaultModel):

    class Meta:
        abstract = True

    @classmethod
    def class_prepared(cls, **kw):
        # knowing cls.__module__
        # here we can import application dependent validators 
```

So now particular `class_prepared` methods will be invoked once, when apache or whatever starts. Am i right?

# c# - javascript 的 ShowModalDialog 没有从后面的 ASP 代码关闭并打开同一页面的新弹出窗口

> ID：11415506
> 
> 赞同：1
> 
> 时间：2012-07-10T14:26:30.927
> 
> 标签：c#, javascript, asp.net

我从 javascript 的 window.showModalDialog 打开一个网页（Clock.aspx）。在 Clock.aspx 中我有一个按钮，我希望当用户单击该按钮时，Clock.aspx 页面将被关闭。我不想使用 javascript 的 onClientClick() 方法，因为正在进行一些服务器端数据库插入，并且在插入之后我想关闭此页面。

按钮背后的代码如下：-

```
protected void btnStop_Click(object sender, EventArgs e)
    {
        _nonProduction = new NonProduction();
        if (Session["LastNonProdTimeID"] == null)
        {
        }
        else
        {
            int NonProdTimeEntryID = Convert.ToInt32(Session["LastNonProdTimeID"]);
            //Updating the TimeSpent
            isTimeSpentUpdated = _nonProduction.UpdateTimeSpentInDB(NonProdTimeEntryID);
            if (isTimeSpentUpdated == true)
            {

                string timespent = Convert.ToString(_nonProduction.GetTimeSpent(NonProdTimeEntryID));
                string msg = "Total time consumed  in " +HiddenTaskname.Value.ToString()+": " + timespent.ToString() + " Minutes";
                ClientScript.RegisterStartupScript(typeof(Page), "closePage", "<script type='text/JavaScript'>window.close();</script>");

                //ShowPopUpMsg(msg);
            }
            else
            {
            }
        }

    } 
```

在这里，当我单击按钮时，又出现了一个（Clock.aspx）弹出窗口并且窗口没有关闭。请帮助我了解如何从服务器端代码关闭 ShowModalDialog。我也在我的页面中使用脚本管理器。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:24:39.803

我已经添加`<base target="_self">`到 clock.aspx 页面的头部，然后它对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:34:10.653

对于我来说，我在普通的 javascript 中有一个函数，可以关闭 aspx 中的页面。

在后面的代码中，如果更新成功，它会调用该函数。

```
// this function is to be called by the popup windows to refresh the opener using specific office code, and close self
function allDoneOffice(office)
{
    var opener = self.opener;
    if (opener.doRefresh) opener.doRefreshWithOfficeCode(office);
    window.open('','_self','');  // IE warning hack
    self.close();
}

        // update the record
    bool b = report.SaveModifiedToDB();
    if (b)
    {
        // don't close the page if nothing was updated
        ClientScript.RegisterStartupScript(this.GetType(), "load", "<script type=\"text/javascript\">\n" +
        "allDoneOffice('" + report.OfficeCode + "');" + "<" + "/script>");
    }
    else
    {
        lblResults.Text += " Unable to save modified report to the database.";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:52:33.397

使用下面的代码应该在 IE 中工作

```
Response.Write("<script language='javascript'> { self.close() }</script>"); 
```

# visual-studio-2010 - 如何在silverlight的数据网格中使用复选框

> ID：11415512
> 
> 赞同：0
> 
> 时间：2012-07-10T14:26:57.400
> 
> 标签：visual-studio-2010, silverlight, datagrid, checkbox

我正在银光中制作应用程序。在该应用程序中，我使用数据网格作为

```
 <data:DataGrid Grid.Row="1" HorizontalAlignment="Left" IsReadOnly="True" Name="dataGrid1" VerticalAlignment="Top" AutoGenerateColumns="False" DataContext="{Binding}" SelectionMode="Single" LoadingRow="ResultsGrid_LoadingRow">
                        <data:DataGrid.Columns>
                            <data:DataGridTextColumn Header=" BedId " Binding="{Binding  BedID }" />
                            <data:DataGridTextColumn Header="PatientName" Binding="{Binding PatientName}" />
                            <data:DataGridTextColumn Header="AdmitDate" Binding="{Binding AdmitDate}" />
                            <data:DataGridTextColumn Header="BirthDate" Binding="{Binding BirthDate}" />
                            <data:DataGridCheckBoxColumn Header="checkbox" Binding="{ Binding }" IsReadOnly="False" />                          
                        </data:DataGrid.Columns>
                    </data:DataGrid> 
```

每当在我的应用程序中加载数据网格时，它都会显示数据网格以及相应的值。在我的应用程序中，我想在每列前面显示复选框，上面的代码在每列前面显示复选框。但是每当我单击该复选框时，它都不会显示任何检查事件。我想根据条件选择单个或多个复选框。但我不知道该怎么做。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:41:33.737

你有几个选择。1.设置DataGrid上的选择更改事件，并在选择行时，在该方面修改绑定复选框。

如果您需要更多控制，例如在选中复选框时触发事件，我会用 DataTemplate 替换 DataGridColum，例如：

```
<DataGridTemplateColumn Header="Checkbox">
<DataGridTemplateColumn.CellTemplate>
      <DataTemplate>
           <CheckBox IsChecked="{Binding Path=someProperty, UpdateSourceTrigger=PropertyChanged}" Click="CheckBox_Click"/>
     </DataTemplate>
</DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

然后在你的代码后面

```
private void CheckBox_Click(object sender, RoutedEventArgs e)
{
//I realize you don't have message box in silverlight but this demonstrates the firing of the event
MessageBox.Show("click");
} 
```

# asp.net-mvc - ASP.NET MVC 在服务器上保留电子邮件副本

> ID：11415514
> 
> 赞同：0
> 
> 时间：2012-07-10T14:27:02.823
> 
> 标签：asp.net-mvc, email, system.net.mail

我有一个带有 EF 的 ASP.NET MVC 4 项目。我正在使用 System.Net.Mail 以编程方式发送电子邮件。

```
MailMessage msg = new MailMessage();
msg.From = new MailAddress("JohnDoe@gmail.com", "John Doe");
msg.To.Add(new MailAddress("janedoe@gmail.com"));
msg.Subject = "Hi.";
msg.Body= "Aleluia";
var smtp = new SmtpClient("mail.johndoe.com", 999);
smtp.EnableSsl = true;
smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
smtp.UseDefaultCredentials = true;
smtp.Credentials = new System.Net.NetworkCredential("JohnDoe@gmail.com", "johnspass");
smtpclient.Send(msg); 
```

**问**：如何在 John Doe 的已发送邮件中保存这封电子邮件的副本？如果我有 Outlook，我可以使用[它](http://www.basiccomputerinformation.ca/leave-copy-of-email-on-email-server/)吗？

Q2：我如何详细说明这封邮件的正文（在左上角添加图片，添加粗体文本）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:41:31.893

我不确定你是否可以从网站上实现这一点，除非你有办法操纵后端邮件服务器并有权操纵用户邮箱。

Outlook 执行此操作的方式是将任何新发送的电子邮件推送到`Sent Items`文件夹，然后将内容与 Exchange Server 同步。

我还认为 Exchange 服务器提供了实现此行为的 API，但您的网站必须在 Windows 身份验证下运行才能访问和操作每个用户邮箱。我认为将单个邮箱的访问权限授予全局帐户（在本例中为网站池身份帐户）并不是一个好主意。您可能还想了解 Exchange Web Services（2007 或更高版本）。

这是我使用 Exchange Server 的经验，我可能不知道其他允许的行为，并且在 API 方面对其他邮件服务器一无所知。

# javascript - 通过javascript使用外部js/css/images检索整个html

> ID：11415518
> 
> 赞同：2
> 
> 时间：2012-07-10T14:27:10.517
> 
> 标签：javascript, html, mhtml

我已经有一个 Javascript 文件（执行一些功能），它将附加到网页上。现在我希望 Javascript 收集整个网页及其 html 标签、图像、外部 Javascript 文件和外部 css 文件。**我不想在这里使用 Jquery/任何其他外部库。**

我的动机是获取整个网页，将其保存，并将其显示为与原始网页相似。

Javascript可以做到这一点吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:04:02.190

# 简短的回答 - 否

不，使用 JavaScript 是不可能的，尤其是“保存”部分，因为 JavaScript 在浏览器环境中没有文件访问权限（我们在此假设），除非在开发浏览器扩展或显式修改浏览器的安全属性以允许此操作时.

* * *

# 长答案 - 如果你真的必须：漫长而曲折的道路......

### 加载正确的内容

首先，您需要确定[是要获取静态状态的页面（因为它是在第一个页面加载时由服务器发送的），还是当前呈现的状态（在浏览器中呈现之后，并且脚本已执行并可能已向页面添加内容）](https://stackoverflow.com/a/11063555/453590)。

### 加载资源

然后，您需要遍历 DOM 的所有元素，并获取所有外部资源（包括 CSS 文件中引用的资源）。

您可能希望在您的请求中使用 HTML 或纯文本 mime 类型获取所有资源，否则您的浏览器可能会通过最终用户弹出窗口触发可见下载，而根本不会执行透明下载。

### 更新所有参考

接下来，您需要弄清楚您希望如何组织“下载”的内容，以及将资源放在哪里以及如何命名它们以避免冲突。

完成后，您需要再次遍历所有 DOM 元素并更新引用以使用本地资源的路径而不是本地资源。

### 将内容写入磁盘

现在最后一点是使用浏览器的自定义 API 或[HTML5 文件系统 API](https://encrypted.google.com/search?sourceid=chrome&ie=UTF-8&q=html%205%20file%20system%20api)将所有这些资源保存到磁盘。

*   [探索 HTML5 文件系统 API](http://www.html5rocks.com/en/tutorials/file/filesystem/)
*   [文件系统 API 的基本概念](https://developer.mozilla.org/en/DOM/File_APIs/Filesystem/Basic_Concepts_About_the_Filesystem_API)

* * *

# 这里是龙

这些都不能保证你会实现你想要的，因为一些页面仍然可能包含一旦像这样下载后表现不佳的代码。可能有代码从远程 URL 请求内容或假设某些目录结构和端点，或使用您可能已修改的资源名称等......（这很奇怪，但并不少见）。

# ruby-on-rails - 将 csv 上传并导入到 rails

> ID：11415522
> 
> 赞同：0
> 
> 时间：2012-07-10T14:27:31.053
> 
> 标签：ruby-on-rails, map, routes, paperclip, fastercsv

我已经按照这个 tut[在此处输入链接描述](http://www.goodbadtech.com/2009/05/13/ruby-on-rails-import-csv-data-into-database/)，尽管我似乎遇到了一些问题。我遇到的问题是

```
NameError

undefined local variable or method `map' for #<ActionDispatch::Routing::Mapper:0x007f81b1bd0170> 
```

我认为这与 routes.rb 有关

```
map.resources :imports
  map.import_proc '/import/proc/:id', :controller => "imports", :action => "proc_csv" 
```

我使用 Ruby 1.9.3，Rails 3.2.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:13:36.907

import_proc 是一个成员方法，所以你需要传入一个参数

```
import_proc_path(id) 
```

成员方法需要参数，ID 集合方法不需要参数，因此不需要参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:34:35.640

`map`是 Rails 2 中用于路由的关键字。Rails 3 的路由发生了很大变化。你想要更像这样的东西：

```
resources :imports do
  member do
    get :import_proc
  end
end 
```

有关更多信息，请查看[Rails 路由指南](http://guides.rubyonrails.org/routing.html)。

# objective-c - 为什么 NSString 使用@？

> ID：11415535
> 
> 赞同：1
> 
> 时间：2012-07-10T14:28:15.460
> 
> 标签：objective-c, nsstring

> **可能重复：**
> [在objective-c中@符号代表什么？](https://stackoverflow.com/questions/25749/what-does-the-symbol-represent-in-objective-c)

这是您从未真正问过自己的问题之一。我已经在 Objective-C 中编程了相当长的时间，所以我不是在问如何使用 NSString。这只是一直以来“就是这样”的事情之一，或者如果有人问过这个问题，我不记得答案了。

我的第一个想法是它用于区分 NSString 文字和 CString，但 NSString 的类引用指出“NSString 被实现为表示一个 Unicode 字符数组，换句话说，一个文本字符串”。所以如果它代表一个字符数组，那么@到底是什么意思？

# c++ - 捕获鼠标光标图标 C++

> ID：11415536
> 
> 赞同：1
> 
> 时间：2012-07-10T14:28:18.657
> 
> 标签：c++, visual-studio-2010, mouse-cursor

我想使用 C++ 获取鼠标图像。我使用了从
[How to get mouse cursor icon VS c++](https://stackoverflow.com/questions/3509951/how-to-get-mouse-cursor-icon-vs-c) question 中获得的代码。我使用了 Visual Studio 2010 IDE。我创建了一个 c++ win32 项目并将该代码片段输入到 _tmain 方法中，并且还添加了缺失的结构（CURSORINFO 和 ICONINFO）。构建项目后，错误控制台显示

```
error C2664: 'GetCursorInfo' : cannot convert parameter 1 from 'CURSORINFO *' to 'PCURSORINFO' 
```

这个构建错误的原因是什么。你可以解释吗？这是我构建的代码。

```
#include "stdafx.h"
#include <windows.h>

int _tmain(int argc, _TCHAR* argv[])
{
    typedef struct _ICONINFO {
        BOOL    fIcon;
        DWORD   xHotspot;
        DWORD   yHotspot;
        HBITMAP hbmMask;
        HBITMAP hbmColor;
    } ICONINFO, *PICONINFO;

    typedef struct {
        DWORD   cbSize;
        DWORD   flags;
        HCURSOR hCursor;
        POINT   ptScreenPos;
    } CURSORINFO, *PCURSORINFO, *LPCURSORINFO;

    HDC hdcScreen = GetDC(NULL);
    HDC hdcMem = CreateCompatibleDC(hdcScreen);

    CURSORINFO cursorInfo = { 0 };
    cursorInfo.cbSize = sizeof(cursorInfo);

    if (::GetCursorInfo(&cursorInfo))
    {
        ICONINFO ii = {0};
        GetIconInfo(cursorInfo.hCursor, &ii);
        DeleteObject(ii.hbmColor);
        DeleteObject(ii.hbmMask);
        ::DrawIcon(hdcMem, cursorInfo.ptScreenPos.x - ii.xHotspot, cursorInfo.ptScreenPos.y -          ii.yHotspot, cursorInfo.hCursor);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:40:14.857

不要重新定义`struct`在 Windows SDK 标头中声明的 s。这可能是导致错误的原因。

基本上添加这个：

```
#include <Windows.h> // includes WinUser.h 
```

除非那已经在`stdafx.h`. 如果是，请删除您自己`typedef`的 s。

# java - Maven 3.0.4 - 编译后执行注释处理器

> ID：11415537
> 
> 赞同：3
> 
> 时间：2012-07-10T14:28:18.630
> 
> 标签：java, maven, maven-3, apt

我想在我的 Maven 3.0.4 项目中运行以下基本过程。我已经具备了所有基础知识并且没有遇到任何问题，但是在第 3 步遇到了问题。出于某种原因，基本的解决方案让我望而却步，因为它看起来应该非常明显。

1.  运行基本的清理/安装（无注释处理）
2.  请求运行站点构建
3.  在站点构建开始之前，**使用在初始步骤中编译的注释处理器类对编译的类运行注释处理**

我尝试设置注释处理目标如下：

```
<plugin>
  <groupId>org.bsc.maven</groupId>
  <artifactId>maven-processor-plugin</artifactId>
  <executions>
    <execution>
      <id>process</id>
      <goals>
        <goal>process</goal>
      </goals>
      <phase>pre-site</phase>
      <configuration>
        <outputDirectory>${basedir}/target/generated-documentation</outputDirectory>
        <processors>
          <processor>com.mydomain.MyFancyAnnotationProcessor</processor>
        </processors>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

由于某种原因，这似乎不起作用。我觉得我在做一些非常非常愚蠢的事情，阻止它工作。

我使用的是[Maven Annotation Plugin](http://code.google.com/p/maven-annotation-plugin/ "Maven 注释插件")而不是基本的[Mojo Apt Plugin](http://mojo.codehaus.org/apt-maven-plugin/ "Mojo Apt 插件")。如果有人有一个可行的解决方案，我不介意切换。我都试过了，没有任何直接的成功迹象。再一次，感觉就像我忽略了一些显而易见的事情。

**收到错误：**

```
[INFO] diagnostic error: Annotation processor 'com.mydomain.MyFancyAnnotationProcessor' not found
[ERROR] error on execute: error during compilation 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:14:49.660

我的猜测是该插件没有将当前项目本身包含在其类路径中。如果可能的话，最好的解决方案是将注释处理器分离到它自己的（子）模块中。如果你不能这样做，你可以只添加这个项目本身作为插件的依赖项（使用`<dependencies>`插件节点下的一个部分）。

作为诊断说明，您可以使用“-X”参数运行 maven 以查看有关构建的详细信息。这应该向您准确显示执行插件时类路径上的内容。

# android - PhoneGap + JQueryMobile - 选项字段文本大小

> ID：11415543
> 
> 赞同：0
> 
> 时间：2012-07-10T14:28:38.633
> 
> 标签：android, jquery

我正在使用 phonegap 和 jquery 开发一个跨平台应用程序。在我的 HTML 文档中，我有一个带有多个选项的选择元素。在 Android 上，当用户点击选择元素时，会使用标准的 Android 下拉菜单打开所有选项的概览（类似于所有选项的叠加层）。到目前为止一切都很好，但不幸的是，我的选项有太多文本，最终会被截断。如何在这里调整文本的大小？有什么提示吗？通过 CSS 调整文本大小会被忽略。我正在考虑使用单选按钮，但这对我来说只是一种解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:07:29.740

我读过 listview 是另一种处理这个问题的方法。选择对我的理解相当有限。

# php - 尝试解析 JSON 字符串时出现“未定义的索引”

> ID：11415545
> 
> 赞同：0
> 
> 时间：2012-07-10T14:28:41.670
> 
> 标签：php, jquery, ajax, json

我认为存在一些语法错误或概念错误。

我有一个简单的 AJAX 调用，我将 JSON 字符串传递给 PHP 文件。这是 AJAX 调用的样子：

```
<script> 
  $(document).ready(function () { 
    $("#btn").click(function() { 

      var id = $('#id').val(); 
      var name = $('#name').val(); 
      var Address = $('#Address').val(); 

      $.ajax({ 
        url: "connection.php", 
        type: "POST", 
        data: { topost : "{id':'" + id + "','name':'" + name + "','Address':'" + Address + "'}"}, 
        datatype: "jsonp", 
        success: function (status) { 
          if (status.success == false) { 
            alert("Failure!"); 
          } else { 
            alert("Success!"); 
          } 
        }}); 
     }); 
  }); 
</script> 
```

这就是我试图解析服务器端 PHP 文件中的字符串的方式：

```
<?php 
  header('Content-type: application/json'); 
  $server = "localhost"; 
  $username = "root"; 
  $password = ""; 
  $database = "jqueryex"; 
  $con = mysql_connect($server, $username, $password); 
  if($con) { echo "Connected to database!"; } 
  else { echo "Could not connect!"; } 
  //or die ("Could not connect: " . mysql_error()); 

  mysql_select_db($database, $con); 
  $thedata= json_decode($_POST['topost']); 
  echo ($thedata); 
  mysql_close($con); 
?> 
```

### 我的问题是：

为什么我`'undefined index topost'`在它说的那一行出现错误：

```
$thedata= json_decode($_POST['topost']); 
```

我`topost`来自我的 AJAX，对吗？那么为什么它在我的 PHP 中是“未定义的”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:39:40.940

我只是飞过这里，这可能根本不是您的问题，但是当您使用 Content-Type: application/json 时，PHP 不会自动解析正文中的 json。像这样指定的变量不会显示在 $_POST 变量中。

您必须自己解析主体，这并不像听起来那么困难.. 像这样简单的事情会将 json 主体导入 _POST 变量。这不是最安全的实现方式，我不建议在不经过清理的情况下这样使用它：

```
$_POST=array_merge($_POST,json_decode(file_get_contents('php://input'),true)); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:30:54.173

您的`data`对象结构不正确，它应该是：

```
data: {
    "id": id,
    "name": name,
    ... ect
} 
```

您`topost`作为字符串传递，而它应该是一个对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:33:43.423

两个问题：

1.  您的引号不匹配（您没有`id`对象键的开头引号）
2.  JSON 需要双引号`"`而不是单引号`'`来引用标识符。

尝试这个：

```
data: {
  topost: '{"id":"'+id+'","name":"'+name+'","Address":"'+Address+'"}'
}, 
```

或者，您可以使用[JSON.stringify()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)对对象文字进行编码：

```
data: {
  topost: JSON.stringify({id: id, name: name, Address: Address})
}, 
```

您可以使用 Douglas Crockfords [JSON2.js 库](https://github.com/douglascrockford/JSON-js/)为不支持本机的浏览器提供此功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:34:05.250

不确定这是否是导致您的问题的原因，但您可以改进构建数据对象以进行发送的方式 -

```
var id = $('#id').val(); 
var name = $('#name').val(); 
var Address = $('#Address').val();

var dataObj = {};
dataObj.id=id;
dataObj.name=name;
dataObj.Address=Address;

$.ajax({ 
  url: "connection.php", 
  type: "POST", 
  data: { 'topost' : dataObj },
  datatype: "jsonp", 
  ... 
```

# nhibernate - nHibernate：在保存之前确定属性值

> ID：11415548
> 
> 赞同：1
> 
> 时间：2012-07-10T14:28:52.780
> 
> 标签：nhibernate, iusertype

我们目前正在评估 nHibernate 是否支持我们项目的要求。我们与另一个应用程序共享数据库，因此我们对模式的更改不是完全自由的。某些列填充了唯一且连续的数字（例如发票）。下一个数字由一个存储过程确定，该存储过程也实现了锁定算法，以保证这些数字是连续的。一方面，我们可以在相应的表上定义一个触发器，当提供空值或特殊值时设置列的值。这将需要更改现有的数据库定义——尽管它可能是实现这一点的最可靠方法。为了避免数据库定义的改变，我们试图在 nHibernate ORM 中解决这个问题。我们' 如果提供了一个空值，我们首先尝试实现一个调用 NullSafeSet 中的存储过程的用户类型。不幸的是，调用 NullSafeSet 时，提供的命令的连接和事务尚未设置。

我们如何用 nHibernate 解决这个问题？

提前致谢，

马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:47:02.157

如果您决定使用触发路由，那么您需要将[生成](http://www.nhforge.org/doc/nh/en/index.html#mapping-generated)的属性添加到您的[属性](http://www.nhforge.org/doc/nh/en/index.html#mapping-declaration-property)映射中。

> 生成的属性是其值由数据库生成的属性。通常，NHibernate 应用程序需要刷新包含数据库为其生成值的任何属性的对象。然而，将属性标记为已生成，可以让应用程序将此责任委托给 NHibernate。本质上，每当 NHibernate 为已定义生成属性的实体发出 SQL INSERT 或 UPDATE 时，它会立即发出 select 以检索生成的值。

除此之外，我不太确定如何从 NHibernate 发出的 INSERT 调用存储过程，而不在列上添加触发器或默认约束。

* * *

**编辑**

看起来 NHibernate 通过 interface 有一个[类](http://www.nhforge.org/doc/nh/en/#mapping-declaration-class)持久化的概念`IEntityPersister`。也许你可以从中破解一些东西。

> persister 属性允许您自定义用于该类的持久性策略。例如，您可以指定您自己的 NHibernate.Persister.EntityPersister 子类，或者您甚至可以提供 NHibernate.Persister.IClassPersister 接口的全新实现，该接口通过例如存储过程调用、序列化到平面文件或LDAP。请参阅 NHibernate.DomainModel.CustomPersister 以获得一个简单的示例（“持久性”到 Hashtable）。

您可以从 NHibernate 的[源代码](https://github.com/nhibernate/nhibernate-core/tree/master/src/NHibernate/Persister)开始。

如果您有能力向数据库添加触发器，那可能是最好的、直接的方法，而无需花费太多时间与 NHibernate 的内部进行斗争。

# python - Django + sqlite + Unicode

> ID：11415551
> 
> 赞同：3
> 
> 时间：2012-07-10T14:28:57.853
> 
> 标签：python, django, unicode

通过管理站点将新记录添加到 sqlite 数据库时，我遇到了 Unicode 字符串的问题。

```
class Translation(BaseModel):
  .....
  translation = models.CharField(max_length=100) 
```

当我尝试插入像“été”这样的单词时，会发生错误：

```
**UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 0: ordinal not in range(128)** 
```

更新：添加回溯：[http://pastebin.com/yLYFNDGB](http://pastebin.com/yLYFNDGB)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T15:22:05.263

我找到了解决方案。实际上，问题不在于 Django 或 sqlite。问题出在**unicode** () 方法上。

以前是：

```
def __unicode__(self):
    return "{} ({})".format(self.translation, self.word.lang.abbr) 
```

经过明显的修复后，问题就消失了：

```
def __unicode__(self):
    return u"{} ({})".format(self.translation, self.word.lang.abbr) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:06:54.810

当您将**é**作为字符串分配给变量时，它实际上将其作为**xe9**。

就像你去你的 python 命令行编辑器并编写以下代码一样：

```
>>> a = u'café'
>>> a 
```

然后回车，**é**字符被 \xe9 替换，如下图所示：

```
>>> u'caf\xe9' 
```

另一方面，如果你用 print 语句写这个，你会得到你最初分配的，即：

```
>>> print a
café 
```

因此，在提出这一点之后，您的问题的解决方案是使用**utf8 编码**来摆脱**\xe9**。因此，您可以通过以下方式对字符串进行编码：

```
>>> string_for_output = yourstring-with-é.encode('utf8', 'replace') 
```

有关此主题的更多信息，您可以查阅[此 URL](http://packages.python.org/kitchen/unicode-frustrations.html)。**它在“挫折#3：输出处理不一致”**的标题下讨论了您的问题

 **希望这可以帮助。**

# javascript - JavaScript 的 getElemntById 查询

> ID：11415552
> 
> 赞同：1
> 
> 时间：2012-07-10T14:29:04.210
> 
> 标签：javascript

你能告诉我为什么这行不通吗？一整天都被它困住了。

我只想复制第一个字段中的任何内容，将其转换为变量并将其投影到最后一个

场地。

谢谢

ps：不用说我只是复制了代码的相关位......

```
<th bgcolor="#eeeee" width=12.5%>Monday</th>
        <th bgcolor="#eeeee" width=12.5%><input id="test" value="09:15" size=15></td></th>
        <th bgcolor="#eeeee" width=12.5%><input type=time id="Monday_Breakfast_LastSeating" value="11:45" size=15></td></th>

    </form>
    </table>

    <form id="form2" id=other method=POST>

        <tr>
            <td bgcolor="#aaeeaa"align=center><button onclick="myFunction()">Calculate</button></td>

        </tr>

    </form>

    <table width=40%  border=0>

        <th bgcolor="#eeaaaa" align=center width=33%>Goal</th>

    </table>

    <form id=result method=POST>
    <table width=40% border=0>

        <th style="border:black;" bgcolor="#eeaaaa" align=center><em></em> <p id="calculation2" size=15>N/A</p></th>
        <th bgcolor="#eeaaaa" align=center><em></em> <p id="calculation3" size=15>N/A</p></th>
        <th bgcolor="#eeaaaa" align=center><p id="calc" size=15>N/A</p></th>

    </table>
    </form>

    <script type="text/javascript">

    function myFunction() {

        var test = getElementById("test").value;
        document.getElementById("calc").innerHTML = test;
        }

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:31:21.840

更改 `var test = getElementById("test").value;`为`var test = document.getElementById("test").value;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:31:29.953

你忘了`document.`之前的第一个`getElementById`

```
function myFunction() {
  var test = document.getElementById("test").value; // you forgot the document. here..
  document.getElementById("calc").innerHTML = test;
} 
```

此外，元素没有`size`属性。`p`（*也许你想使用`input`元素..但是对于那些你应该使用`value`属性而不是`innerHTML`设置它们..*）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:33:34.377

它应该是：

```
document.getElementById('calc').innerHTML = document.getElementById('test').value; 
```

`getElementById()`本身不是一个有效的功能

# html - Web Audio API：如何加载另一个音频文件？

> ID：11415555
> 
> 赞同：0
> 
> 时间：2012-07-10T14:29:11.433
> 
> 标签：html, audio

我想为 HTML5 Web Audio API 编写一个基本脚本，可以播放一些音频文件。但我不知道如何卸载正在播放的音频并加载另一个。在我的脚本中，两个音频文件同时播放，但不是我想要的。

这是我的代码：

```
var context, 
    soundSource, 
    soundBuffer;

// Step 1 - Initialise the Audio Context
context = new webkitAudioContext();

// Step 2: Load our Sound using XHR
function playSound(url) {
    // Note: this loads asynchronously
    var request = new XMLHttpRequest();
    request.open("GET", url, true);
    request.responseType = "arraybuffer";

    // Our asynchronous callback
    request.onload = function() {
        var audioData = request.response;
        audioGraph(audioData);
    };

    request.send();
}

// This is the code we are interested in
function audioGraph(audioData) {
    // create a sound source
    soundSource = context.createBufferSource();

    // The Audio Context handles creating source buffers from raw binary
    soundBuffer = context.createBuffer(audioData, true/* make mono */);

    // Add the buffered data to our object
    soundSource.buffer = soundBuffer;

    // Plug the cable from one thing to the other
    soundSource.connect(context.destination);

    // Finally
    soundSource.noteOn(context.currentTime);
}

// Stop all of sounds
function stopSounds(){
    // How can do this?
}

// Events for audio buttons
document.querySelector('.pre').addEventListener('click', 
    function () {
        stopSounds();
        playSound('http://thelab.thingsinjars.com/web-audio-tutorial/hello.mp3');
    }
);
document.querySelector('.next').addEventListener('click',
    function() {
        stopSounds();
        playSound('http://thelab.thingsinjars.com/web-audio-tutorial/nokia.mp3');
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:38:59.287

您应该在启动时将声音预加载到缓冲区中，并`AudioBufferSourceNode`在您想要播放时简单地重置。

要按顺序播放多个声音，您需要`noteOn(time)`根据缓冲区各自的长度一个接一个地使用 调度它们。

要停止声音，请使用`noteOff`.

听起来您缺少一些基本的网络音频概念。[这个（以及更多）在这个HTML5Rocks 教程](http://www.html5rocks.com/en/tutorials/webaudio/intro)和[FAQ](http://updates.html5rocks.com/2012/01/Web-Audio-FAQ)中有详细的描述和示例。

# java - 创建 JAR 后 Ebean 找不到实体

> ID：11415556
> 
> 赞同：3
> 
> 时间：2012-07-10T14:29:12.550
> 
> 标签：java, entities, ebean

问题是，在 Eclipse-IDE 中，使用 Ebean 相关方法的每个测试都可以正常工作，但是当您编译 jar 文件以使用它时，例如在主页或命令提示符下，我只能得到这个

```
Jul 10, 2012 4:25:48 PM com.avaje.ebeaninternal.server.util.ClassPathSearch find
Classes
Warnung: No Entities found in ClassPath using ClassPathReader [com.avaje.ebeanin
ternal.server.util.DefaultClassPathReader@6c08bae7] Classpath Searched[[file:/C:
/xampp/htdocs/webp3/jars/DPG.jar]]
Jul 10, 2012 4:25:48 PM com.avaje.ebeaninternal.server.core.BootupClassPathSearc
h search
Information: Classpath search hits in jars[] pkgs[]  searchTime[27]
Jul 10, 2012 4:25:48 PM com.avaje.ebeaninternal.server.lib.sql.DataSourcePool in
itialise
Information: DataSourcePool [mysql] autoCommit[false] transIsolation[READ_COMMIT
TED] min[1] max[25]
Jul 10, 2012 4:25:48 PM com.avaje.ebeaninternal.server.core.DefaultServerFactory
 setDatabasePlatform
Information: DatabasePlatform name:mysql platform:mysql
Jul 10, 2012 4:25:48 PM com.avaje.ebeaninternal.server.subclass.SubClassManager$
1 run
Information: SubClassFactory parent ClassLoader [sun.misc.Launcher$AppClassLoade
r]
Jul 10, 2012 4:25:48 PM com.avaje.ebeaninternal.server.deploy.BeanDescriptorMana
ger logStatus
Information: Entities enhanced[0] subclassed[0]
Exception in thread "main" javax.persistence.PersistenceException: com.dpu.entit
ies.Department is NOT an Entity Bean registered with this server?
        at com.avaje.ebeaninternal.server.core.DefaultServer.createQuery(Default
Server.java:1008)
        at com.avaje.ebeaninternal.server.core.DefaultServer.createQuery(Default
Server.java:965)
        at com.avaje.ebeaninternal.server.core.DefaultServer.find(DefaultServer.
java:1001)
        at com.avaje.ebean.Ebean.find(Ebean.java:1143)
        at com.dpu.data.Datagenerator.generateData(Datagenerator.java:26)
        at com.dpu.main.MainGenerator.main(MainGenerator.java:23) 
```

我在谷歌上尝试了许多“解决方案”，比如编辑类路径，但日志上的一切似乎都很好。

```
My JAR-Manifest contains this:
Manifest-Version: 1.0
Main-Class: com.dpu.main.MainGenerator
Class-Path: . 
```

有人知道如何解决这个愚蠢的问题吗？我今天尝试了所有方法，这很烦人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:02:43.160

或者，您可以添加 user1537597 的答案

```
# specify jars to search for entity beans  
ebean.search.jars=myJarFile.jar 
```

到 ebean.properties 文件，如果您不使用编程配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-16T15:01:55.840

您还可以将以下内容添加到 ebean.properties

```
ebean.packages=com.packagename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:39:57.117

同样在这里。唯一的方法是提取 jar 并运行 java 主类。您还需要将 ebean.properties 文件放在项目的根目录中。

例如：

```
jar xf project.jar

cp /my_project_root/ebean.properties project

cd project

java Project 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:11:33.693

不取决于您需要在 ebean.properties 中指定以在 jar 中查找实体的事实。我正在寻找如何从属性文件中做到这一点。现在我只发现了程序化配置。

config.addJar("nameFile.jar")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-07T12:37:17.937

I managed to solve this by using a programmatic configuration and adding every entity class manually like this:

```
serverConfig.addClass(Entity.class); 
```

The advantage of this approach compared to `ebean.search.jars=yourJar.jar` is that if the jar file name changes, it will still work.

# sql - 如何识别 SQL 中的连续日期组？

> ID：11415562
> 
> 赞同：11
> 
> 时间：2012-07-10T14:29:31.380
> 
> 标签：sql, date, gaps-and-islands

我正在尝试编写一个识别日期组并测量组大小的函数。

到目前为止，我一直在 Python 中按程序执行此操作，但我想将其移至 SQL 中。

例如，列表

```
Bill 01/01/2011 
Bill 02/01/2011 
Bill 03/01/2011 
Bill 05/01/2011 
Bill 07/01/2011 
```

应该输出到一个新表中：

```
Bill 01/01/2011  3 
Bill 02/01/2011  3 
Bill 03/01/2011  3 
Bill 05/01/2011  1 
Bill 07/01/2011  1 
```

理想情况下，这也应该能够考虑周末和公共假期 - 我表中的日期将是周一至周五（我想我可以通过制作一个新的工作日表并按顺序编号来解决这个问题）。工作中有人建议我尝试 CTE。我对此很陌生，所以我很感激任何人可以提供的任何指导！谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-10T14:39:42.973

您可以通过巧妙地应用窗口函数来做到这一点。考虑以下：

```
select name, date, row_number() over (partition by name order by date)
from t 
```

这会添加一个行号，在您的示例中它只是 1、2、3、4、5。现在，取日期的差值，您就有了该组的常量值。

```
select name, date,
       dateadd(d, - row_number() over (partition by name order by date), date) as val
from t 
```

最后，您需要按顺序排列的组数。我还将添加一个组标识符（例如，以区分最后两个）。

```
select name, date,
       count(*) over (partition by name, val) as NumInSeq,
       dense_rank() over (partition by name order by val) as SeqID
from (select name, date,
             dateadd(d, - row_number() over (partition by name order by date), date) as val
      from t
     ) t 
```

不知何故，我错过了关于工作日和节假日的部分。此解决方案不能解决该问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T08:04:56.280

以下查询帐户周末和节假日。该查询提供了即时包含假期的规定，但为了使查询更清晰，我只是将假期具体化到一个实际的表中。

```
CREATE TABLE tx
    (n varchar(4), d date);

INSERT INTO tx
    (n, d)
VALUES
    ('Bill', '2006-12-29'), -- Friday    
    -- 2006-12-30 is Saturday
    -- 2006-12-31 is Sunday

    -- 2007-01-01 is New Year's Holiday    
    ('Bill', '2007-01-02'), -- Tuesday
    ('Bill', '2007-01-03'), -- Wednesday
    ('Bill', '2007-01-04'), -- Thursday
    ('Bill', '2007-01-05'), -- Friday    
    -- 2007-01-06 is Saturday
    -- 2007-01-07 is Sunday

    ('Bill', '2007-01-08'), -- Monday
    ('Bill', '2007-01-09'), -- Tuesday

    ('Bill', '2012-07-09'), -- Monday
    ('Bill', '2012-07-10'), -- Tuesday
    ('Bill', '2012-07-11'); -- Wednesday

create table holiday(d date);
insert into holiday(d) values
('2007-01-01');

/* query should return 7 consecutive good 
   attendance(from December 29 2006 to January 9 2007) */    
/* and 3 consecutive attendance from July 7 2012 to July 11 2012\. */ 
```

询问：

```
with first_date as
(
    -- get the monday of the earliest date
    select dateadd( ww, datediff(ww,0,min(d)), 0 ) as first_date 
    from tx 
)
,shifted as
(
    select 
        tx.n, tx.d,                     
        diff = datediff(day, fd.first_date, tx.d) 
                   - (datediff(day, fd.first_date, tx.d)/7 * 2)             
    from tx
    cross join first_date fd
    union
    select 
        xxx.n, h.d,             
        diff = datediff(day, fd.first_date, h.d) 
                   - (datediff(day, fd.first_date, h.d)/7 * 2) 
    from holiday h 
    cross join first_date fd
    cross join (select distinct n from tx) as xxx
)
,grouped as
(
    select *, grp = diff - row_number() over(partition by n order by d)
    from shifted
)
select 
    d, n, dense_rank() over (partition by n order by grp) as nth_streak
    ,count(*) over (partition by n, grp) as streak
from grouped
where d not in (select d from holiday)  -- remove the holidays 
```

输出：

```
|          D |    N | NTH_STREAK | STREAK |
-------------------------------------------
| 2006-12-29 | Bill |          1 |      7 |
| 2007-01-02 | Bill |          1 |      7 |
| 2007-01-03 | Bill |          1 |      7 |
| 2007-01-04 | Bill |          1 |      7 |
| 2007-01-05 | Bill |          1 |      7 |
| 2007-01-08 | Bill |          1 |      7 |
| 2007-01-09 | Bill |          1 |      7 |
| 2012-07-09 | Bill |          2 |      3 |
| 2012-07-10 | Bill |          2 |      3 |
| 2012-07-11 | Bill |          2 |      3 | 
```

现场测试：[http ://www.sqlfiddle.com/#!3/815c5/1](http://www.sqlfiddle.com/#!3/815c5/1)

查询的主要逻辑是将所有日期向后移动两天。这是通过将日期除以 7 并将其乘以 2，然后从原始数字中减去它来完成的。例如，如果给定日期是 15 日，这将计算为 15/7 * 2 == 4；然后从原始数字中减去 4，15 - 4 == 11。15 将成为第 11 天。同样，第 8 天变成第 6 天；8 - (8/7 * 2) == 6。

```
 Weekends are not in attendance(e.g. 6,7,13,14)
 1  2  3  4  5     6  7
 8  9 10 11 12    13 14
15 
```

将计算应用于所有工作日数字将产生以下值：

```
 1  2  3  4  5    
 6  7  8  9 10    
11 
```

对于假期，您需要在出勤时将它们插入，以便可以轻松确定*连续性*，然后将它们从最终查询中删除。以上出勤产生连续11次良好出勤。

查询逻辑的详细解释在这里：[http ://www.ienablemuch.com/2012/07/monitoring-perfect-attendance.html](http://www.ienablemuch.com/2012/07/monitoring-perfect-attendance.html)

# c - 处理器缓存多久刷新一次？

> ID：11415565
> 
> 赞同：4
> 
> 时间：2012-07-10T14:29:41.277
> 
> 标签：c, multithreading, thread-safety, pthreads

假设我有一个随意的单字节变量。我认为几乎所有系统上的单字节操作都是原子的，但如果不是，请告诉我。现在，假设一个线程更新了这个变量。我应该期待/准备多长时间才能让此更新出现在其他线程中？我知道我可以将更新放在互斥锁/锁/障碍周围，以确保它在任何地方都同步，但我对此很好奇。等待时间可能会有所不同，具体取决于其他线程是否位于单独的处理器/内核上，并且可能取决于处理器类型。

我想知道这个是合乎逻辑的还是我误解了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T14:40:01.517

只要您调用同步原语/内存屏障（例如`pthread_mutex_lock`. 除此之外，除非您使用 C11 原子类型，否则不应假设任何同步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T14:48:03.033

在许多架构中，处理器不会刷新缓存，直到它*必须*为一些更需要的数据让路。

但是，如果线程共享内存空间，*并且*您只有一个内核，它们将能够“立即”从缓存中看到更新。如果它实际上是从 CPU 写入内存的。如果编译器决定将其保存在寄存器中，则可能不是这样，在这种情况下，您的线程都将拥有自己的“本地”和不正确的副本。

正如其他人所说，这是一个有趣的问题 - 但同步的正确答案是使用正确的同步原语！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T09:51:31.100

在 MIPS 架构上，有一条同步指令用作跨内核的加载存储屏障，即发出同步之前的所有加载和存储都将在同步之后的任何加载和存储之前发生。不确定 x86 中是否有等效指令（假设是您正在使用的架构）。

# python - 带有 argparse 的目录路径类型

> ID：11415570
> 
> 赞同：62
> 
> 时间：2012-07-10T14:29:50.867
> 
> 标签：python, argparse

我的 python 脚本需要从命令行传递的目录中读取文件。我已经定义了一个 readable_dir 类型，如下所示与 argparse 一起使用，以验证在命令行上传递的目录是否存在且可读。此外，还为目录参数指定了默认值（以下示例中的 /tmp/non_existent_dir）。这里的问题是，即使在命令行上显式传入目录参数的情况下，argparse 也会在默认值上调用 readable_dir()。这会导致脚本崩溃，因为默认路径 /tmp/non_existent_dir 在命令行上显式传入目录的上下文中不存在。我可以通过不指定默认值并强制此参数来解决此问题，

```
#!/usr/bin/python
import argparse
import os

def readable_dir(prospective_dir):
  if not os.path.isdir(prospective_dir):
    raise Exception("readable_dir:{0} is not a valid path".format(prospective_dir))
  if os.access(prospective_dir, os.R_OK):
    return prospective_dir
  else:
    raise Exception("readable_dir:{0} is not a readable dir".format(prospective_dir))

parser = argparse.ArgumentParser(description='test', fromfile_prefix_chars="@")
parser.add_argument('-l', '--launch_directory', type=readable_dir, default='/tmp/non_existent_dir')
args = parser.parse_args() 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-10-16T23:40:21.150

几个月前，我向[Python 标准库邮件列表](https://mail.python.org/pipermail/stdlib-sig/2015-July/000990.html)提交了一个“路径参数”补丁。

使用此类`PathType`，您可以简单地指定以下参数类型以*仅*匹配现有目录 - 其他任何内容都会给出错误消息：

```
type = PathType(exists=True, type='dir') 
```

这是代码，可以很容易地修改它以要求特定的文件/目录权限：

```
from argparse import ArgumentTypeError as err
import os

class PathType(object):
    def __init__(self, exists=True, type='file', dash_ok=True):
        '''exists:
                True: a path that does exist
                False: a path that does not exist, in a valid parent directory
                None: don't care
           type: file, dir, symlink, None, or a function returning True for valid paths
                None: don't care
           dash_ok: whether to allow "-" as stdin/stdout'''

        assert exists in (True, False, None)
        assert type in ('file','dir','symlink',None) or hasattr(type,'__call__')

        self._exists = exists
        self._type = type
        self._dash_ok = dash_ok

    def __call__(self, string):
        if string=='-':
            # the special argument "-" means sys.std{in,out}
            if self._type == 'dir':
                raise err('standard input/output (-) not allowed as directory path')
            elif self._type == 'symlink':
                raise err('standard input/output (-) not allowed as symlink path')
            elif not self._dash_ok:
                raise err('standard input/output (-) not allowed')
        else:
            e = os.path.exists(string)
            if self._exists==True:
                if not e:
                    raise err("path does not exist: '%s'" % string)

                if self._type is None:
                    pass
                elif self._type=='file':
                    if not os.path.isfile(string):
                        raise err("path is not a file: '%s'" % string)
                elif self._type=='symlink':
                    if not os.path.symlink(string):
                        raise err("path is not a symlink: '%s'" % string)
                elif self._type=='dir':
                    if not os.path.isdir(string):
                        raise err("path is not a directory: '%s'" % string)
                elif not self._type(string):
                    raise err("path not valid: '%s'" % string)
            else:
                if self._exists==False and e:
                    raise err("path exists: '%s'" % string)

                p = os.path.dirname(os.path.normpath(string)) or '.'
                if not os.path.isdir(p):
                    raise err("parent path is not a directory: '%s'" % p)
                elif not os.path.exists(p):
                    raise err("parent directory does not exist: '%s'" % p)

        return string 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-07-10T14:41:19.163

You can create a custom action instead of a type:

```
import argparse
import os
import tempfile
import shutil
import atexit

class readable_dir(argparse.Action):
    def __call__(self, parser, namespace, values, option_string=None):
        prospective_dir=values
        if not os.path.isdir(prospective_dir):
            raise argparse.ArgumentTypeError("readable_dir:{0} is not a valid path".format(prospective_dir))
        if os.access(prospective_dir, os.R_OK):
            setattr(namespace,self.dest,prospective_dir)
        else:
            raise argparse.ArgumentTypeError("readable_dir:{0} is not a readable dir".format(prospective_dir))

ldir = tempfile.mkdtemp()
atexit.register(lambda dir=ldir: shutil.rmtree(ldir))

parser = argparse.ArgumentParser(description='test', fromfile_prefix_chars="@")
parser.add_argument('-l', '--launch_directory', action=readable_dir, default=ldir)
args = parser.parse_args()
print (args) 
```

But this seems a little fishy to me -- if no directory is given, it passes a non-readable directory which seems to defeat the purpose of checking if the directory is accessible in the first place.

Note that as pointed out in the comments, it might be nicer to
`raise argparse.ArgumentError(self, ...)` rather than `argparse.ArgumentTypeError`.

**EDIT**

As far as I'm aware, there is no way to validate the default argument. I suppose the `argparse` developers just assumed that if you're providing a default, then it should be valid. The quickest and easiest thing to do here is to simply validate the arguments immediately after you parse them. It looks like, you're just trying to get a temporary directory to do some work. If that's the case, you can use the `tempfile` module to get a new directory to work in. I updated my answer above to reflect this. I create a temporary directory, use that as the default argument (`tempfile` already guarantees the directory it creates will be writeable) and then I register it to be deleted when your program exits.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-10T14:54:21.090

如果您的脚本在没有有效的情况下无法工作`launch_directory`，则应将其设为强制性参数：

```
parser.add_argument('launch_directory', type=readable_dir) 
```

顺便说一句，你应该使用`argparse.ArgumentTypeError`而不是`Exception`in `readable_dir()`。

# jquery - Jquery在滚动时获取元素的顶部偏移量

> ID：11415574
> 
> 赞同：3
> 
> 时间：2012-07-10T14:30:01.343
> 
> 标签：jquery, html

我想在手机屏幕上显示 Iphone 联系人列表样式列表。基本上，在滚动时，标题将是第一个可见项目的第一个字母。

例如：如果第一个可见项目是“阿迪达斯”，标题将是“A”：

![iphone风格列表](../Images/c4d7f61300cbf3d12ee53b2d1f32f857.png)

我在其中创建了一个 ul 和很多 li：

```
<ul class="onlineShopList">
        <li class="activeRow">
            <span class="left">A1</span>   
            <span class="right">12 Articles</span> 
            <span class="clear">&nbsp;</span>
        </li>
        <li class="normalRow">
            <span class="left">A2</span>   
            <span class="right">18 Articles</span> 
            <span class="clear">&nbsp;</span>
        </li>
        <li class="activeRow">
            <span class="left">A3</span>   
            <span class="right">243 Articles</span> 
            <span class="clear">&nbsp;</span>
        </li>
        <li class="normalRow">
            <span class="left">B1</span>   
            <span class="right">191 Articles</span> 
            <span class="clear">&nbsp;</span>
        </li>
        <li class="activeRow">
            <span class="left">B2</span>   
            <span class="right">12 Articles</span> 
            <span class="clear">&nbsp;</span>
        </li>
        <li class="normalRow">
            <span class="left">B3</span>   
            <span class="right">18 Articles</span> 
            <span class="clear">&nbsp;</span>
        </li>
        <li class="activeRow">
            <span class="left">C1</span>   
            <span class="right">243 Articles</span> 
            <span class="clear">&nbsp;</span>
        </li>
        <li class="normalRow">
            <span class="left">C2</span>   
            <span class="right">150 Articles</span> 
            <span class="clear">&nbsp;</span>
        </li>  
        <li class="activeRow">
            <span class="left">C3</span>   
            <span class="right">1 Articles</span> 
            <span class="clear">&nbsp;</span>
        </li>
</ul> 
```

它非常简单，这是用于处理滚动和更改标题的 jquery 函数：

```
$(window).scroll(function() {                  
               $top = $('.onlineShopList').offset().top;
               /*console.log("item: " + $('.onlineShopList li:first:visible').find('span.left').text())            
               $('#headChar').text($('.onlineShopList li:first:visible').find('span.left').text().charAt(0));*/

               $('.onlineShopList li').each(function() {
                    console.log("current item top : " + $(this).offset().top)
                    if ($(this).offset().top >= $top) {
                        console.log("top char: " + $(this).find('span.left').text().charAt(0))
                        $('#headChar').text($(this).find('span.left').text().charAt(0));
                        return false; // stops the iteration after the first one on screen
                    }
               });
        }); 
```

但是标题总是A，我想不通。滚动时第一项的顶部偏移量不会改变，也许这种方法是错误的。

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:34:17.517

试试这样：

```
if ($(this).offset().top >= $top + $(window).scrollTop()) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T04:27:07.810

我正在尝试解决一个非常相似的问题。我担心在性能方面获得一长串项目的偏移量，因为滚动事件非常频繁地触发。我选择按照以下建议的方式处理它：

[使用 jQuery 在特定位置查找元素？](https://stackoverflow.com/questions/3942776/jquery-find-element-at-a-particular-position)

当用户滚动时，我检查哪个对象在我的视口的第一行并相应地设置标题。

# tibco - TIBCO Rendezvous 发布者和订阅者计划

> ID：11415578
> 
> 赞同：0
> 
> 时间：2012-07-10T14:30:14.483
> 
> 标签：tibco

我正在寻找使用 TIBCO Rendezvous 编写基本发布者和基本订阅者程序的任务。但是，我对 Rendezvous 并不熟悉，我得到的文档大多是一长串概念和函数，几乎没有代码。

我想知道是否有人知道任何有代码示例的教程或编写小程序的教程，所以我可以看到一些代码并了解它是如何工作的。

如果不是，我将不胜感激有关如何使用集合点实际编码这些问题的任何建议

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T00:15:40.107

如果您已经安装了 Rendezvous，那么安装目录中有许多示例。寻找“src/examples”。

# iphone - presentViewController 不显示标签栏

> ID：11415580
> 
> 赞同：0
> 
> 时间：2012-07-10T14:30:18.743
> 
> 标签：iphone, objective-c, uitabbarcontroller

我有一个 iPhone 应用程序，它在我的所有视图上都使用了一个标签栏。此外，我的第一个视图控制器没有 navigationBarController，但我的第二个视图和标签栏一样。

我的第二个视图控制器是一个表格视图，当我单击一个单元格时，我想被带到第一个视图控制器（传递一个参数）。

我尝试了几种方法，这些方法都有效，但没有。

```
secondViewController.m
FirstViewController *firstViewController = [[FirstViewController alloc] initWithNibName:@"FirstView" bundle:[NSBundle mainBundle]];
[firstViewController passThisAlong:@"id"];

//[self presentViewController:firstViewController animated:YES completion:nil]; //1
[self.navigationController pushViewController:firstViewController animated:YES]; //2
//[self.tabBarController presentViewController:firstViewController animated:YES completion:nil]; //3
[firstViewController release];
firstViewController = nil; 
```

正如您在上面看到的，我尝试了 3 种不同的方法来获取第一个视图控制器。第二个加载第一个视图，在第二个视图中向下钻取，因为它将 nagigationBarController（即使第一个视图没有）与第二个视图的后退按钮保持一致。

另外两个做同样的事情。哪个是第一个视图（没有导航栏），但是，没有标签栏，第一个视图的内容已经向上移动了大约标签栏的高度，取而代之的是黑色。

我希望这一切都有意义。当有人在表格中选择一个单元格时，我只想能够从我的第二个视图转到我的第一个视图，就好像我单击了选项卡栏中的图标一样。

我在文档中看到 `'On iPhone and iPod touch, the presented view is always full screen. On iPad, the presentation depends on the value in the modalPresentationStyle property.'`不确定这是否与我的问题有关，如果是，是否有解决方法。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:39:02.177

*当前模态视图以这种方式工作。为什么不能使用基于 Tab 的应用程序？*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:32:45.077

这很正常，模态视图应该以这种方式工作

来自[Apple 文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)

> 呈现视图控制器的能力是您可以使用的一种工具，用于中断当前工作流程并显示一组新视图。最常见的情况是，应用程序将视图控制器呈现为临时中断，以便从用户那里获取关键信息。但是，您也可以使用呈现的视图控制器在特定时间为您的应用程序实现替代接口。

在您的 didSelectRowAtIndexPath 中，您可以使用类似

```
YourAppNameDelegate *appDelegate = (YourAppNameDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate tabBarController].selectedIndex = 0; 
```

# c# - 使用 lastIndexOf() 时出现 ArgumentOutOfRangeException

> ID：11415582
> 
> 赞同：2
> 
> 时间：2012-07-10T14:30:31.417
> 
> 标签：c#, substring, lastindexof

我真的很困惑为什么我会得到一个例外。这是我放在一起演示的 SSCCE：

```
static void Main(string[] args)
{
    string tmp =
               "Child of: View Available Networks (197314), Title: N/A  (66244)";
    Console.WriteLine(tmp);

    int one = tmp.LastIndexOf('('), two = tmp.LastIndexOf(')');

    //my own error checking
    Console.WriteLine(tmp.Length);//returns 63
    Console.WriteLine(one < 0);//returns false
    Console.WriteLine(two > tmp.Length);//returns false
    Console.WriteLine(one);//returns 56
    Console.WriteLine(two);//returns 62

    /*
     * error occurs here.
     * ArgumentOutOfRangeException Index and length must refer to
     * a location within the string.
     * Parameter name: length
     */
    string intptr = tmp.Substring(one, two);

    Console.WriteLine(intptr);
} 
```

我看不出我做错了什么（虽然来自 Java 背景可能是微不足道的），希望其他人可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T14:32:28.293

`substring`s 第二个参数是要提取的字符串的长度，而不是字符串中的位置。

你可以做

```
string intptr = tmp.Substring(one + 1, two - one - 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:33:35.420

你的代码

```
tmp.Substring(one, two); 
```

应该

```
tmp.Substring(one, (two-one+1)); 
```

第二个参数是您想要的子字符串的长度，而我认为您正在使用它，就像它是结束索引一样。因为我喜欢 LINQ，所以也可以这样做：

```
string.Join(string.Empty, s.Skip(5).Take(7 - 5 + 1)); //build a string from IEnumerable<char> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:32:59.590

string.Substring(startIndex, **count** ) 你写的 startIndex 和 finishIndex，错了

# php - Yii框架，通过特定语言获取相关图片列

> ID：11415583
> 
> 赞同：1
> 
> 时间：2012-07-10T14:30:34.377
> 
> 标签：php, activerecord, yii

我在使用 Yii 框架时遇到了一个小问题。
为了解释这种情况：
我必须创建一个*销售促销*滑块。每个*促销活动*都包含一个指向有关促销活动的更多信息的**url和一个****图像 url**。每个促销都有其图像的多个本地化版本。为此，我创建了 2 个数据库表 -
首先是 Promotions 表：

```
CREATE TABLE IF NOT EXISTS `promotions` (  
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,  
  `title` varchar(100) NOT NULL,  
  `image` int(10) unsigned DEFAULT NULL,  
  `destination` varchar(200) NOT NULL,  
  `status` tinyint(3) unsigned NOT NULL DEFAULT '0',  
  PRIMARY KEY (`id`),  
  KEY `image` (`image`)  
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ; 
```

第二个是促销图片表：

```
CREATE TABLE IF NOT EXISTS `promoImages` (  
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,  
  `pid` int(10) unsigned NOT NULL,  
  `language` varchar(2) NOT NULL,  
  `url` varchar(200) NOT NULL,  
  PRIMARY KEY (`id`),  
  KEY `language` (`language`),  
  KEY `mhm` (`pid`)  
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=10 ; 
```

这种数据库结构的想法是，在字段**图像的每个***促销*表行中，它包含适当图像的标识符，然后在表*promoImages*中，相关列**pid**包含唯一的促销标识符。每个促销都可以用几种未定义的语言进行本地化，因此对于与单个促销相关的每个图像，*promoImages*中可以有几行，例如：

 ******```
INSERT INTO `promoImages` (`id`, `pid`, `language`, `url`) VALUES  
(1, 1, 'lv', '/path/to/image1_lv.png'),  
(2, 2, 'lv', '/path/to/image2_lv.png'),  
(3, 3, 'lv', '/path/to/image3_lv.png'),  
(4, 1, 'en', '/path/to/image1_en.png'),  
(5, 2, 'en', '/path/to/image2_en.png'),  
(6, 3, 'en', '/path/to/image3_en.png'),  
(7, 1, 'ru', '/path/to/image1_ru.png'),  
(8, 2, 'ru', '/path/to/image2_ru.png'),  
(9, 3, 'ru', '/path/to/image3_ru.png'); 
```

现在考虑到这种结构，我还在表格*促销*中创建了一个外键，它与 Yii 框架“Gii”工具一起生成了具有这种关系的模型：
表格*促销*模型关系

```
'promoImages' => array(self::HAS_MANY, 'PromoImages', 'pid'), 
```

和 table *promoImages*模型关系

```
'p' => array(self::BELONGS_TO, 'Promotions', 'pid'), 
```

据我所知，关系是正确的，单个*促销*可以有多个*promoImages*表行，并且任何*promoImages*行只能属于单个*促销*，因为我正确地相信这是真的？

我希望我已经尽可能彻底地解释了情况，现在谈谈问题本身。
正如我在顶部提到的那样，我真的只需要从每个表中检索 2 个值，1 个：来自*promotions的***destination**和来自*promoImages的***url** ，但是当我选择这些值时，我需要记住只选择那些**状态**为为“1”，表示促销活动。此外，在选择促销图片时，我需要从*promoImages*表中选择对应于促销**图片**列以及当前选择的应用程序语言（Yii::app()->language）的行。

 *********到目前为止，我的代码如下：
促销小部件控制器

```
public function run() {
    $l = Yii::app()->language;
    $promos = Promotions::model()->with('promoImages')->findAll('status=:status AND promoImages.language=:language', array(
        ':status' => 1,
        ':language' => $l
    ));

    $this->render('promo', array('promotions' => $promos));
} 
```

促销小部件视图

```
foreach ($promotions as $promotion) {
    // $image = $promotion->promoImages->url;
    $dest = $promotion->destination;
    echo "<div class='promo_hold'>";
        echo "<a href='$dest'><img src='$image'></a>";
    echo "</div>";
} 
```

这为我提供了 3 个活动促销所需的 3 个 div，但图像为空，如果我取消注释 $image 定义，我会得到**Trying to get property of non-object**错误，这基本上是我被卡住的地方，我已经查看了 Yii 的课程参考，但到目前为止它还没有给我任何帮助。

如果我缺少任何必需的信息，请随时询问。

预先感谢！

PS我希望我的文字墙实际上不会吓跑可能有答案的人：O

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:48:09.620

好的，所以我自己找到了我的问题的答案，所以我会在这里添加它作为答案，以防其他人遇到这样的问题。
在尝试各种变体来获取我需要的字段时，我注意到它`$promotion->promoImages`实际上是一个包含单个元素的*数组，该**对象*包含与所选促销和语言相关的所有信息。

所以我为这个问题找到了这样的解决方案，在我简单地设置的小部件*foreach*循环中：

```
$image = $promotion->promoImages[0]->url; 
```

这向我展示了正确的、语言选择的图像地址。***************

# asp.net-mvc-3 - HiddenInput(DisplayValue = false) 在一台开发机器上工作，但在另一台机器上工作

> ID：11415589
> 
> 赞同：1
> 
> 时间：2012-07-10T14:31:04.250
> 
> 标签：asp.net-mvc-3, entity-framework, hidden-field

***已解决，请参阅下面的更新**

我有一个具有下面列出的两个属性的类：

```
[HiddenInput(DisplayValue = false)]
public int ProductId { get; set; }

[Required(ErrorMessage = "Please enter a product name")]
public string Name { get; set; } 
```

当我在一台机器上运行解决方案时，当我导航到相关页面时，我看不到 EditorFor ProductId - 当我在另一台机器上运行它时（来自 github 的相同拉取），我确实看到了它（并且能够编辑它） . 我不想看到它。

我认为每台机器上唯一可能不同的重要事情是实际的数据库本身。

为什么我可以在一台机器上看到我的 ProductId 属性编辑器，而在另一台机器上使用相同的代码却看不到？

**笔记**

MVC 在每台机器上呈现不同的视图（生成的 HTML 不同 - 这反映了上面的差异）。

**更新**

解决了问题，请参阅下面的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:48:45.857

I had a similar issue where I added the `[HiddenInput(DisplayValue = false)]` annotation to a productId property in a class in my model. The model was a separate project from my MVC project. In order to get the annotations I had to include a reference to `System.Web.Mvc` but I had included v. 4.0.0.0 while my MVC project was v. 3.0.0.0

This caused the annotation to not work even though all projects would compile and all other functionality remained intact.

I fixed this by editing the .csproj file for my model project, switching the version of the included reference from 4.0.0.0 to 3.0.0.0\. This could also be accomplished by removing the reference to the wrong version and re-adding the correct one.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:42:04.820

弄清楚了。. . 有点儿。

奇怪的是，在尝试继续前进一段时间后，我在应用程序的其他地方遇到了另一个问题。那个问题和詹姆斯先生对原始问题的评论使我得到了这个[答案](https://stackoverflow.com/a/9551777/1026898)。

为简单起见，我刚刚从给我问题的机器上卸载了 MVC4（我没有在另一台机器上安装 MVC4），我的两个问题都消失了。

# java - 相对布局的奇怪边距问题

> ID：11415593
> 
> 赞同：1
> 
> 时间：2012-07-10T14:31:19.663
> 
> 标签：java, android

我正在尝试使用 TextView 来填充左侧按钮和右侧布局边缘之间的空间。

```
<TextView
    android:id="@+id/welcomeHeader"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
android:layout_alignParentRight="true"
    android:layout_toRightOf="@+id/setInfusionReminder"
    android:layout_marginRight="20dp"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="20dp"
    android:gravity="center"
    android:text="Welcome!" /> 
```

然而，我在编辑器中看到的`android:layout_marginRight`是应用在左侧。最终结果是左边有 40dp 的边距，右边有 0 边距。

![在此处输入图像描述](../Images/565d8313e53f2bbcb2095b0d65e5d0fd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:36:22.150

以下属性不能像您期望的那样完全协同工作：

```
android:layout_toRightOf="@id/setInfusionReminder"
android:layout_alignParentRight="true" 
```

旁注：至少从我在自己的项目中看到的情况来看，它往往会使元素对于更多与布局相关的属性有些无法控制。

更新以解决评论：

我可能会做以下事情：

```
1\. Remove the android:layout_alignParentRight="true"
2\. Set the android:layout_width to "fill_parent"
3\. Keep the gravity at android:gravity => "center" 
```

这应该使它尽可能向右扩展，同时使内容（文本）居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:37:38.933

我认为您同时使用`android:layout_alignParentRight="true"`和`android:layout_toRightOf="@+id/setInfusionReminder"`。删除`android:layout_alignParentRight`并尝试它应该像你喜欢的那样工作。

```
 <TextView
                android:id="@+id/welcomeHeader"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:layout_alignParentRight="true"
                android:layout_toRightOf="@+id/btnSettkoff"
                android:layout_marginRight="20dp"
                android:layout_marginLeft="20dp"
                android:layout_marginTop="20dp"
                android:gravity="center"
                android:text="Welcome!" /> 
```

希望能帮助到你。

# javascript - 在选择框中更改后警告元素

> ID：11415598
> 
> 赞同：1
> 
> 时间：2012-07-10T14:31:27.487
> 
> 标签：javascript, jquery

我想在更改后提醒消息或单击选择框中的选项，但不适用于我。

我该怎么办？

演示：http: [//jsfiddle.net/byw5H/](http://jsfiddle.net/byw5H/)

我的代码：

```
//Html Code
<select name="mainpage" size="6">
  <option value="1">11111111</option>
  <option value="2">22222222</option>
  <option value="3">33333333</option>
  <option value="4">44444444</option>
  <option value="5">55555555</option>
  <option value="6">66666666</option>
</select>​

//Js Code
$('select[name="mainpage"]').live('change',function(){
    alert('ok');
)}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:34:52.173

打开 JavaScript 控制台

```
syntax error
[Break On This Error]   

)} 
```

这指向

```
$('select[name="mainpage"]').live('change',function(){
    alert('ok');
)}​  <-- HERE 
```

你换了他们！正确的顺序是`})`

```
$('select[name="mainpage"]').live('change',function(){
    alert('ok');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:37:57.903

正如其他人所说，它是一个语法错误。

除此之外，您还可以通过其他方式执行此操作：-

```
$('select[name="mainpage"]').change(function(){
    alert('ok');
});​ 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/byw5H/6/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:35:55.157

语法错误 -

```
$('select[name="mainpage"]').live('change',function(){
    alert('ok');
}); 
```

​</p>

# java - 可从多个对象调用的方法

> ID：11415600
> 
> 赞同：0
> 
> 时间：2012-07-10T14:31:33.253
> 
> 标签：java, android

我有一个分成片段的应用程序界面。我想创建一个可以从不同类型的对象（比如说 View 或 KeyEvent）调用的方法，而不使用侦听器：我不想以编程方式将元素创建到布局中。

所以，如果我只使用 View 元素，我将创建一个这样的方法

```
public void myMethod(View view) {
   switch(view.getId()) {
   ...
   }
} 
```

并通过使用 item 将所有元素链接`onClick`到 .xml 文件中。它就像一个魅力。

有没有办法我也可以用其他类型的对象调用我的方法？在某些情况下我需要通过 KeyEvent 调用该方法，所以我尝试了这种方式：

```
public void myMethod(Object caller) {
   if(caller instanceof View) {
      //button pressed
      ...
   } else if (caller instanceof KeyEvent) {
      //key pressed
      ...
   }
} 
```

它不起作用，如果我按下按钮，我会在运行时遇到异常：它需要一个带有签名的方法`myMethod(View view)`。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:38:08.200

我建议使用两种方法，一种用于视图，另一种用于键事件，如果您想将处理捆绑到 ONE 方法中，只需通过前面的方法调用第三种方法。

# javascript - 在 iframe 中加载 cshtml 文件（剃刀）

> ID：11415606
> 
> 赞同：1
> 
> 时间：2012-07-10T14:31:52.527
> 
> 标签：javascript, asp.net-mvc-3, iframe, razor

我在我的**布局**页面（菜单+ iframe）中，我想在菜单中单击后在 iframe 中加载一个 cshtml 文件（查看页面）。目标不是加载整个**布局**页面

我试过这样：

```
<ul id="qm0" class="qmmc">
    <li><a class="qmparent" >FILES</a>
        <ul class="rgauche">
                <li>@Html.ActionLink("USERS","getUsers")</li>   
                <li><a id="disconnect">Deconnexion</a></li>                              
             </ul>
    </li>
</ul> 
```

但它会加载整个布局页面

我从另一个 ASP.NET 项目中得到了这个想法，该项目在单击菜单后使用 javascript 在 iframe 中加载 .aspx 页面

```
 <ul id="qm0" class="qmmc">
        <li><a class="qmparent" >FILES</a>
            <ul class="rgauche">
                    <li><a id="getuser">USERS</a></li>   
                    <li><a id="disconnect">Deconnexion</a></li>                              
                 </ul>
        </li>
    </ul>

            $(function () {

                $('#getuser').click(function () {
                    document.getElementById('myIframe').src = "users.aspx";
                    return false;
                });
            }); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:04:12.020

通过操作方法加载视图。在此视图中，将 Layout 值设置为 null，以便它不会使用 viewstart.cshtml 中定义的布局

```
@{
  Layout=null;
}
<p>some partial view content</p> 
```

**编辑：** 不太确定你想要实现什么。但是如果你想更新布局内的 iframe 内容，你可以这样做

假设你`Layout.cshtml`是这样的

```
<head>
    //Load jQuery library
</head>

<body>
 @Html.ActionLink("List", "GetUsers", "Users", null, new { @class = "iframable" })
 <iframe id="ifrm" style="width:500px; height:200px; border:1px solid black;">
 </iframe>

@RenderBody()

<script type="text/javascript">
    $(function () {
        $(".iframable").click(function (e) {
            e.preventDefault();
            var item = $(this);
            $("#ifrm").attr('src', item.attr("href"));
        });
    });
</script> 
```

现在`GetUsers`在你的用户控制器中有 action 方法

```
public ActionResult GetUsers()
{
      return View();
} 
```

并确保在`GetUsers.cshtml`视图中，布局设置为 null

```
@{
  Layout=null;
}
<p>some partial view content</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:31:39.927

您必须将 iframe 的“src”属性指向返回视图的控制器操作。

例如。

**返回不带布局的局部视图的操作**

```
public PartialViewResult IframeAction()
{
   return PartialView();
} 
```

**Javascript**

```
$('#getuser').click(function () 
{                     
    document.getElementById('myIframe').src 
          = "/IframeController/IframeAction";                     
    return false;                 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:00:20.067

您在 iframe 中加载的页面需要不同的布局。
然后，在这个页面中，你可以做

```
@{
   Layout = "YourLayout.cshtml";
} 
```

默认情况下，您的所有 cshtml 视图都使用 _ViewStart.cshtml 中提供的[布局](http://www.dotnetcurry.com/ShowArticle.aspx?ID=605)

**编辑**
您可以使用以下概念：

```
<iframe name="my_frame"></iframe>
@Html.ActionLink("Users", "GetUsers", null, new { target = "my_frame" }) 
```

您为 iframe 命名，然后将该名称用作操作链接的目标。那是最简单的解决方案。如果您愿意，还可以使用 jquery click 处理程序，如其他答案之一中提供的那样。

# android - html5视频标签与Android全屏播放

> ID：11415610
> 
> 赞同：6
> 
> 时间：2012-07-10T14:32:00.937
> 
> 标签：android, jquery, html5-video

我正在创建一个移动网站，当有人单击链接时，我想在其中播放视频：

```
<div id="player"></div>
<a href="#" onclick="DoNav('<?php echo $url; ?>');" title="Click to play video"> <?php echo $result_videos[$i]["camera_name"]; ?> </a>

<script type="text/javascript">
function DoNav(theUrl)
{

  // only add the player if it doesn't yet exist
  if($('#myfileplayer').length == 0) {
    var mydiv = $("#player");
    var myvideo = $("<video id='myfileplayer' src='"+ theUrl + "' width='320' height='240' controls></video>");
    mydiv.append(myvideo);
  } else {
    $('#myfileplayer').attr("src",theUrl); 
  }

} 
</script> 
```

使用 iPhone，效果很好，我点击视频，它会全屏显示。Android 也可以，但它需要您单击视频播放，然后单击全屏。是否可以在您点击播放时像 iPhone 一样进入全屏模式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-25T08:17:29.673

这应该可以使用纯 Javascript：

```
var myVideo = document.getElementById('myVideoTag');

myVideo.play();
if (typeof(myVideo.webkitEnterFullscreen) != "undefined") {
    // This is for Android Stock.
    myVideo.webkitEnterFullscreen();
} else if (typeof(myVideo.webkitRequestFullscreen)  != "undefined") {
    // This is for Chrome.
    myVideo.webkitRequestFullscreen();
} else if (typeof(myVideo.mozRequestFullScreen)  != "undefined") {
    myVideo.mozRequestFullScreen();
} 
```

您必须在全屏指令之前触发 play() ，否则在 Android 浏览器中它只会全屏但不会开始播放。使用最新版本的 Android 浏览器、Chrome、Safari 进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T19:41:08.523

我已经放弃了这个。我的结论是，Android 设备上的 html5 视频标签会大打折扣。它适用于某些设备，但不适用于其他设备。并且没有像 3.x 或 4.x 这样的通用标准，它似乎只是随机的。我希望这很快会好转，特别是因为闪存支持不再存在。

奇怪地坚持简单`href`似乎是最一致的。你失去了一些控制，但比视频标签好得多……至少到目前为止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:08:51.043

你检查过[mediaelement.js](http://mediaelementjs.com/)吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:36:10.107

尝试以下方式：

```
document.getElementById('myfileplayer').addEventListener('play', function (e) { this.mozRequestFullScreen ? this.mozRequestFullScreen() : this.webkitRequestFullScreen ? this.webkitRequestFullScreen() : null; }, false); 
```

要么是这样，要么可能是这样的：

```
document.getElementById('myfileplayer').addEventListener('play', function (e) { this.webkitEnterFullscreen(); }, false); 
```

`webkitEnterFullscreen``VIDEO`是当前在 iOS 上运行的元素的全屏方法。我不确定对 Android 设备的支持。

`mozRequestFullScreen`并且`webkitRequestFullScreen`是 Mozilla 和 Google 的 FullScreen API 的实现，该 API 用于在几乎任何 DOM 元素上激活全屏模式。

希望这至少可以为您提供一个开始工作的起点...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-26T00:20:15.163

大多数供应商要求用户交互全屏，这就是为什么 natalee 的答案不起作用。对于 Andriod，您可以在锚点的点击处理程序中调用 webkitEnterFullScreen()，因为它是有效的用户交互：

```
 myvideo[0].webkitEnterFullScreen();
    myvideo[0].play(); 
```

或者

```
 $('#myfileplayer')[0].webkitEnterFullScreen();
    $('#myfileplayer')[0].play(); 
```

**注意我是如何用`[0]`.** 否则它不起作用。

# jquery - DatePicker not working in ajax loaded page

> ID：11415614
> 
> 赞同：2
> 
> 时间：2012-07-10T14:32:14.020
> 
> 标签：jquery, ajax, jquery-ui

I attach the datepicker to inputs in a global script file with like this:

```
$(document).on("focusin",".datePick", function () {
            $(this).datepicker({
                dateFormat: "dd/mm/yy",
                changeMonth: true,
                changeYear: true,
                onClose: function () { $(this).valid(); }
            });
        }); 
```

On a specific page, there are inputs(which will be used with datepicker) in a modal dialog(also jquery ui) and I call that page via $.load() and inject into a div in other page.

The code above works very well for static inputs in other pages but for the scenerio above, it shows the datepicker dialog fine but when I click on a date, it throws error(f is undefined)Edit: VS2010 throws "Unable to set value of the property 'currentDay': object is null or undefined"

Some people suggested to use live() method, but I dont want to use deprecated method.. What should I do about the issue?

Thanks in advance

Ozgu

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T10:10:34.287

I experienced this exact error, and while my answer will not help the OP, maybe it will help others in the future.

I received this error message when I had an ID clash with another element in my page.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T15:43:38.873

As mentioned in my comment on TJ VanToll's answer, as long as the parent element to which your trigger is bound is present at the time the DOM is loaded, you'll be fine.

See [this fiddle](http://jsfiddle.net/dwesm/) for an example.

**JS:**

```
$(function(){
    $(document).on("focusin",".datePick", function () {
       $(this).datepicker({
            dateFormat: "dd/mm/yy",
            changeMonth: true,
            changeYear: true,
            onClose: function () { $(this).valid(); }
        });
    });

    $('#focusin').append('<input class="datePick" name="datepicker" />');

});​ 
```

**HTML:**

```
<div id="focusin"></div>​ 
```

As long as your modal div is present on load, it should be able to capture your input after loading.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:32:45.717

Using `live`, `delegate`, or `on` does not work with jQuery UI widgets because they are stateful plugins that must be instantiated after the necessary DOM nodes exist.

You can accomplish what you're looking for though by instantiating the datepicker after the additional markup has been injected. Here's an example doing so - [http://jsfiddle.net/tj_vantoll/qN8dG/2/](http://jsfiddle.net/tj_vantoll/qN8dG/2/).

# android - ArrayAdapter 的 getView() 方法重复列表中的前两个或三个项目

> ID：11415618
> 
> 赞同：4
> 
> 时间：2012-07-10T14:32:28.923
> 
> 标签：android, android-listview, android-arrayadapter

`ArrayAdapter`我用一个覆盖的方法扩展了一个对象`getView()`来填充我的`ListView`对象，但是适配器会从`ArrayList`我传递给它的对象中获取前两个或三个对象，然后在整个列表长度中以看似随机的顺序重复这些对象。此外，当我在 中上下滚动时`ListView`，一些行从一个列表项更改为另一个。该`ArrayList<Credit>`对象是从 JSONObject 填充的，据我所知，在传递到`ArrayAdapter`.

我的习惯`ArrayAdapter`

```
private class CreditArrayAdapter extends ArrayAdapter<Credit> {
    private ArrayList<Credit> credits;
    private int creditCount;

    public CreditArrayAdapter(Context ctx, int textViewResourceId, List<Credit> items) {
        super(ctx, textViewResourceId, items);
        credits = (ArrayList<Credit>) items;
        creditCount = credits.size();
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.list_item_movie_medium, null);
            Credit current = credits.get(position);
            Log.d(tag, "current credit: " + current.toString());
            ImageView creditPicture = (ImageView) v.findViewById(R.id.image_poster_thumbnail);
            try {
                creditPicture.setImageBitmap(current.getPosterSmall());
            } catch(Exception e) {
                Log.d(tag, "failed to set cast member picture");
                e.printStackTrace();
            }
            TextView castMemberName = (TextView) v.findViewById(R.id.text_credit_info);
            castMemberName.setText(current.toString());
        }
        return v;
    }
    @Override
    public int getCount() {
        return creditCount;
    }
} 
```

被调用：

```
appearsIn = (ListView) findViewById(R.id.listview_appears_in);
List<Credit> credits = searcher.getCreditsByPersonId(personId);
CreditArrayAdapter creditAdapter = new CreditArrayAdapter(getBaseContext(), R.layout.list_item_movie_medium, credits);
creditAdapter.notifyDataSetChanged();
appearsIn.setAdapter(creditAdapter); 
```

包含的布局`ListView`：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:orientation="vertical"
              android:layout_centerHorizontal="true"
              android:weightSum="2">
    <ScrollView android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1">
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                      android:layout_width="fill_parent"
                      android:layout_height="wrap_content"
                      android:orientation="vertical">
            <ImageView android:id="@+id/image_person_info"
                       android:layout_height="wrap_content"
                       android:layout_width="wrap_content"
                       android:contentDescription="person image"/>
            <TextView android:id="@+id/text_person_name"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:textSize="30dp"/>
            <TextView android:id="@+id/text_person_birth"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:textSize="20dp"/>
            <TextView android:id="@+id/text_person_death"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:textSize="20dp"/>
            <TextView android:id="@+id/text_person_bio"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:textSize="16dp"/>
        </LinearLayout>
    </ScrollView>

    <ListView android:id="@+id/listview_appears_in"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:layout_weight="1"/>
</LinearLayout> 
```

我的列表项布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="horizontal">
    <ImageView android:id="@+id/image_poster_thumbnail"
               android:layout_height="wrap_content"
               android:layout_width="wrap_content"/>
    <TextView android:id="@+id/text_credit_info"
              android:layout_height="wrap_content"
              android:layout_width="fill_parent"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T14:37:42.240

像这样更改getView：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.list_item_movie_medium, null);
    }
    Credit current = credits.get(position);
    Log.d(tag, "current credit: " + current.toString());
    ImageView creditPicture = (ImageView) v.findViewById(R.id.image_poster_thumbnail);
    try {
       creditPicture.setImageBitmap(current.getPosterSmall());
    } catch(Exception e) {
        Log.d(tag, "failed to set cast member picture");
        e.printStackTrace();
    }
    TextView castMemberName = (TextView) v.findViewById(R.id.text_credit_info);
    castMemberName.setText(current.toString());

    return v;
} 
```

您的问题是，当 convertView 为 != null 时，您没有执行正确设置 View 对象所需的所有代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:34:59.903

使用这个片段：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.list_item_movie_medium, null);
        }

        Credit current = credits.get(position);
        Log.d(tag, "current credit: " + current.toString());
        ImageView creditPicture = (ImageView) v.findViewById(R.id.image_poster_thumbnail);
        try {
            creditPicture.setImageBitmap(current.getPosterSmall());
        } catch(Exception e) {
            Log.d(tag, "failed to set cast member picture");
            e.printStackTrace();
        }
        TextView castMemberName = (TextView) v.findViewById(R.id.text_credit_info);
        castMemberName.setText(current.toString());

        return v;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T20:47:37.663

尝试在任何引用高度的地方调整您的 xml 布局，因为 android 每次都会进行测量并重新绘制单元格。尝试在 listview match_parent 和行上的单元格上使用一个精确的高度。对不起我的英语不好。

# c# - 在 MVC 中有一个纯数据控制器的好习惯？

> ID：11415621
> 
> 赞同：2
> 
> 时间：2012-07-10T14:32:33.827
> 
> 标签：c#, asp.net-mvc, model-view-controller, asp.net-mvc-2, application-design

我正在使用 ASP.NET MVC2 并在各个领域拥有各种控制器。

在其中许多中，我需要从数据库中包含的值列表中选择一个值；例如，选择产品或员工。

我目前正在考虑有一个控制器专门用于获取这些列表以供下拉列表等使用。该控制器将简单地查询 DAL 并提供 JSON 对象，以便在需要它们的任何视图上加载 ajax 调用。

我唯一担心的是我的视图将同时从不同的控制器获取数据。

我有理由担心吗？有没有更好的方法来设置它，也许创建一个`Product`/`Employee`类，特别是从创建一个共享的强类型部分视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:37:26.040

创建另一个类，作为控制器和数据访问代码之间的中间层。您现在可以从不同的控制器调用此类方法。

```
public class ItemService()
{
 public static List<Items> GetItems()
 {
    var items=yourRepositary.GetItems();
    return items;
 }
} 
```

您现在可以从不同的控制器调用它

```
public ActionResult GetItems()
{
  var items=ItemService.GetItems();
  return Json(items,JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:52:36.893

恕我直言，最好的解决方案是创建一个自定义 ActionFilterAttribute ，用您需要在视图上呈现的任何数据填充 ViewData 字典。然后，您可以为 ViewDataDictionary 创建扩展，以从视图中以类型安全的方式访问此信息，或者如果 ViewData 不包含数据则抛出异常（即提示您在控制器方法上方添加操作过滤器属性）。使用继承可能会让你进一步陷入混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:47:51.160

另一种方法是使用实​​现此通用功能的基类控制器，然后从中继承其他具体控制器（与视图配对）。

这种方法将支持存在许多不同列表的情况，或者需要动态构建列表以响应输入参数。

ActionFilterAttribute 方法可能更适合静态列表更少、更多的情况。

# javascript - 统一降低div的高度

> ID：11415622
> 
> 赞同：0
> 
> 时间：2012-07-10T14:32:35.163
> 
> 标签：javascript, jquery, css

在小提琴中，我试图降低 CSS 类的高度：

[http://jsfiddle.net/25LjE/76/](http://jsfiddle.net/25LjE/76/)

我正在降低类 pds-vote 的高度：

```
.pds-vote {
background-color:#424242;
    height:20px !important;
} 
```

但是高度并没有均匀地减少。投票按钮下方的高度小于其上方的高度，是否可以统一减少高度，以便投票按钮上方和下方有相等数量的边框？

小提琴背后的代码：

```
.pds-question-top {
font-size:10pt !important;
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-pd-link, .pds-comments {
display:none !important;
}

.pds-box {
width:220px !important;
}

.pds-input-label {
width:85% !important;
}

.PDS_Poll {
margin-bottom:15px;
}

.pds-answer-span {
color:#00f;
}

.pds-vote {
background-color:#424242;
}

.pds-answer-text {
color:#00f;
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-answer-feedback {
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-votebutton-outer {
text-align:center;
}

.pds-answer-group {
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
height:auto;
overflow:hidden;
}

.pds-input-label,.pds-answer-input {
float:left;
}

.pds-view-results,.pds-links {
color:#FFF !important;
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-comments,.pds-return-poll {
color:#FFF !important;
}

.pds-links {
    display: inline !important;
}
.pds-pd-link {
display: none !important;
}
.pds-box {
    width: 220px !important;
}
.pds-input-label{
    width: auto! important;
}
.PDS_Poll{
    margin-bottom:15px;
}

.pds-question-top {padding:0 !important}

<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6352993.js"></script>
<noscript><a href="http://polldaddy.com/poll/6352993/">This is very long test question to test how polldaddy handles questions that exceed that normal length............ yes a very long question indeed..............</a></noscript>

$(document).ready(function() {

    $('.pds-question-inner').prepend('<span style="color:red;font-weight:bold;font-size: 15px;float:left">Header</span>');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:39:48.857

设置`line-height`为相同的值`height`并删除任何填充。这样，内容*垂直居中*，这使得高度均匀分布：http: [//jsfiddle.net/25LjE/77/](http://jsfiddle.net/25LjE/77/)。

```
.pds-vote {
    background-color: #424242;
    height: 40px !important;  /* 20px does not fit the contents */
    line-height: 40px !important;
    padding: 0 !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:41:16.017

您的投票按钮高于 20 像素，这就是按钮溢出“居中”容器的原因。

不要为 设置高度`.pds-vote`，而是减少其容器的填充。

```
.pds-vote {
    background-color: #424242;
}
#PDI_container6352993 .pds-vote {
    padding: 4px 0px;
} 
```

# git - 如何实现一个 git 客户端？

> ID：11415623
> 
> 赞同：0
> 
> 时间：2012-07-10T14:32:36.763
> 
> 标签：git, qt

我需要实现一个 git 客户端。基本上我想将 git 集成到 IDE。与 XCode 和许多其他流行的 IDE 一样。我正在使用 Qt 和 QtScript。现在我需要一些指示。我的第一个想法是使用进程从我的 IDE 代码内部执行终端命令并读取输出。我成功地执行了命令并读取了输出，但我认为这不是一个好主意，因为从输出中提取信息会花费太多精力。

我的猜测是所有与 git 相关的有用信息都可以在存储库根目录下的 .git 文件夹中找到。所以我有两个问题：

那么在 IDE 中集成 git 支持的最佳方式是什么？我应该使用进程来执行终端命令并读取输出，还是应该从 .git 文件夹中获取信息？

在这方面是否有一些书或一些教程对我有帮助。我已经在尝试通过 git.js 的代码。让我们看看它是否可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:44:00.267

> 在这方面是否有一些书或一些教程对我有帮助。

*Pro Git*有一[章专门介绍 Git 的“管道”](http://git-scm.com/book/ch9-1.html)，即专门设计用于由其他程序调用的命令。

[此处](https://stackoverflow.com/a/4036822/166749)列出了替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:51:38.343

也许查看一些现有的 Git IDE 插件；看看他们是怎么做到的？

日食： http: [//www.eclipse.org/egit/developers/](http://www.eclipse.org/egit/developers/)

网豆：http : [//nbgit.org/](http://nbgit.org/)

记事本++：http: [//forum.lowyat.net/topic/1358320/all](http://forum.lowyat.net/topic/1358320/all)

# backbone.js - 在 Backbone.js 中使用路由器管理视图

> ID：11415625
> 
> 赞同：5
> 
> 时间：2012-07-10T14:32:48.810
> 
> 标签：backbone.js, backbone-views, backbone-routing

我正在使用具有以下布局的单页应用程序：

![应用程序的布局](../Images/75521ab5b7ce5596e8c967ef1102920d.png)

我正在使用 Backbone.js 路由器来管理屏幕上加载的元素：

```
var AppRouter = Backbone.Router.extend({
    routes: {
        ""              : "list",
        "content1"      : "content1",
        "content1/cont3": "cont3"
    },

    list: function() {
        var list = new List().render().$el; //view
        $("#List").html(list);
    },

    content1: function(){
        var cont1 = new Content1().render().$el; //view
        $("#Content1").html(cont1);
    },

    content3: function(){
        var cont3 = new Content3().render().$el; //view
        $("#Cont3").html(cont3);
    }        

}); 
```

每次我单击#List 中的列表项时，都会生成#Content1，当我在#Content1 上的块上执行此操作时，会出现#Cont3。

我面临的问题是，例如，如果由于某种原因，我在地址为 localhost/content1 时刷新页面；#List 中的元素消失。

我希望#List 中的内容在加载时始终存在，与 url 可能是什么以及 #Content1 中的内容无关。有没有办法使用骨干路由器来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T21:21:21.367

您不需要匹配 1 个路线 <-> 1 个视图。
我会将路线更改为以下内容：

> “list”：“displayContent”，
> “list/:c1”：“displayContent”，
> “list/:c1/:c3”：“displayContent”，

所以只有一个回调来组织视图被渲染或不渲染。

> 显示内容：函数（c1，c3）{

存储 content1 变量，并检查是否已经渲染，等等。

看看这个问题：[How to handle initializing and rendering subviews in Backbone.js?](https://stackoverflow.com/questions/9337927/how-to-handle-initializing-and-rendering-subviews-in-backbone-js)

或者对于更复杂的应用程序，Backbone 顶部的布局框架可能会有所帮助，尽管我建议您自己做一些事情，直到您了解 Backbone 的工作原理。

[https://github.com/tbranyen/backbone.layoutmanager](https://github.com/tbranyen/backbone.layoutmanager)
[https://github.com/derickbailey/backbone.marionette](https://github.com/derickbailey/backbone.marionette)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:52:06.493

我想你可以试试这个：

```
.....
   list: function() {
        var list = new List().render().$el; //view
        $("#List").html(list);
    },

    content1: function(){
        var cont1 = new Content1().render().$el; //view
        $("#Content1").html(cont1);
        //Pseudo code
        if (listisempty){
           list();//If the list is empty, then the initialization list.
        };
    },

..... 
```

# algorithm - 重新排列图片

> ID：11415630
> 
> 赞同：0
> 
> 时间：2012-07-10T14:33:09.573
> 
> 标签：algorithm

这个问题在最近的一次采访中被问到。请提出一些建议：

*将 16x16 的图片分成 4x4（16 块）大小的块并打乱。建议一种算法来重新排列它。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:45:47.860

如果它是软件工程类型的问题并且您自己划分它，您可以作弊并将每个位置与每个部分一起存储。;)

他们可能正在寻找一些模式匹配的解决方案。也许将每侧（顶部/底部/左侧/右侧）的最后一行像素与其他（水平/垂直）侧（具有一定的容差）进行比较。每一方都将获得一定的分数，逐步匹配，直到全部完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:40:02.317

假设除了碎片的像素之外什么都没有，这是概率解决问题的好方法

[http://people.csail.mit.edu/taegsang/JigsawPuzzle.html](http://people.csail.mit.edu/taegsang/JigsawPuzzle.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:38:39.547

我希望这些作品中的每一个都有一个标识（比如订购/重新排列它们的数字）。我可以认为这个问题类似于接收 UDP 数据包（通常 UDP 数据包可能会被乱序接收，然后我们需要对它们进行排序。）

所以任何排序算法都应该有效。

如果我误解了这个问题，请纠正我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:51:10.857

在不涉及像素匹配算法的情况下，我想我会在这里采用动态编程自下而上的方法。首先找到最有可能相邻的 8 组 2 件，然后尝试从较小的子集构建整个事物。

# linux - 如何添加具有不同值列表的两列

> ID：11415631
> 
> 赞同：0
> 
> 时间：2012-07-10T14:33:15.397
> 
> 标签：linux, awk

我有一个看起来像这样的文件：

```
893     990     1000    1020    1500    1655 
  0/1   1/1     0/1     .       1/0     .
  .     0/1     .       1/1     1/0     .      
  .     .       1/1     0/1     1/0     1/0 
```

如何添加具有不同值的两列，以便输出如下所示：

```
ID      Population      893     990     1000    1020    1500    1655 
AD0062  pop1      0/1   1/1     0/1     .       1/0     .
AD0063  pop1      .     0/1     .       1/1     1/0     .      
AD0074  pop1      .     .       1/1     0/1     1/0     1/0 
```

有什么提示吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:36:53.420

```
awk '{print "ID\tPopulation\t"$0}' input_file 
```

这是因为 ID 和 Population 是固定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:40:13.740

根据*Karl Nordström*先前的回答和添加 ID 的评论，我希望这个`awk`程序可以完成这项工作：

内容`infile`：

```
893     990     1000    1020    1500    1655 
  0/1   1/1     0/1     .       1/0     .
  .     0/1     .       1/1     1/0     .      
  .     .       1/1     0/1     1/0     1/0 
```

内容`script.awk`：

```
BEGIN {
    population = "pop1"
    id = "AD0062,AD0063,AD0065,AD0074,AD0075,AD0076,AD0077,AD0078,AD0082,\
          AD0083,AD0087,AD0091,AD0092,AD0098,AD0099,AD0100"
    split( id, id_arr, /,/ )

    OFS = "\t"
}

FNR == 1 { 
    printf "%s\t%s\t%s\n", "ID", "Population", $0
    next
}

FNR > 1 { 
    printf "%s\t%s\t%s\n", id_arr[ FNR - 1 ], population, $0
} 
```

像这样运行它：

```
awk -f script.awk infile 
```

具有以下输出：

```
ID      Population      893     990     1000    1020    1500    1655 
AD0062  pop1      0/1   1/1     0/1     .       1/0     .
AD0063  pop1      .     0/1     .       1/1     1/0     .      
AD0065  pop1      .     .       1/1     0/1     1/0     1/0 
```

# jquery - 最佳实践：包括渲染在内的 javascript 的最佳位置。Rails3.2

> ID：11415633
> 
> 赞同：1
> 
> 时间：2012-07-10T14:33:21.350
> 
> 标签：jquery, ruby-on-rails-3

我的环境

```
Rails 3.2.1
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0] 
```

我像这样使用jQuery。

```
$('.foo').append("<%= escape_javascript(render 'bar') %>"); 
```

首先，我用 content_for 写在 eruby 文件中。

```
 <% content_for :script do %> 
   <%= javascript_tag do -%>
     $('.foo').append("<%= escape_javascript(render 'bar') %>");
   <% end %>
 <% end %> 
```

但是 javascript 的部分变大了，所以我想将 javascript 移动到另一个文件。那么我很麻烦文件应该在哪里。

现在我创建目录“$RAILS_ROOT/app/views/js/”并在其中创建文件。

```
 <% content_for :script do %> 
   <%= render 'js/foo' %>
 <% end %> 
```

所以我想知道 javascript 的最佳位置，包括渲染。

提前谢谢了。

# java - 在 web.xml 中加载启动标记

> ID：11415635
> 
> 赞同：0
> 
> 时间：2012-07-10T14:33:27.463
> 
> 标签：java, tomcat, jboss

我正在研究 EJB 1.0 应用程序。我想在 jboss 服务器启动时启动我的计划 servlet。 `<load-on-startup>1</load-on-startup>`在我的`web.xml`. 将此标签添加到我的应用程序后，需要将近 45 分钟才能启动。我不知道这有什么问题。

这是我的`web.xml`文件

提前致谢。

```
<web-app id="WebApp"> 
    <display-name></display-name>
    <servlet>
        <servlet-name>Main</servlet-name>
        <display-name>Main</display-name>
        <servlet-class>control.Main</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>TimerLoader</servlet-name>
        <display-name>TimerLoader</display-name>
        <servlet-class>timer.TimerLoader</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>SchedulerMain</servlet-name>
        <display-name>SchedulerMain</display-name>
        <servlet-class>admin.SchedulerMain</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>FileDownload</servlet-name>
        <display-name>FileDownLoad</display-name>
        <servlet-class>control.FileDownload</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Main</servlet-name>
        <url-pattern>/Main</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>TimerLoader</servlet-name>
        <url-pattern>/TimerLoader</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>SchedulerMain</servlet-name>
        <url-pattern>/SchedulerMain</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>FileDownload</servlet-name>
        <url-pattern>/FileDownLoad</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
        <welcome-file>/Main</welcome-file>
    </welcome-file-list>
    <resource-ref>
        <res-ref-name>jdbc/TEST5</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:26:26.517

如果仅将 load-on-startup 设置为 1 会使您的应用程序需要很长时间才能加载，这应该意味着您的初始化代码需要花费那个时间。

当您谈到调度 servlet 时，我想您可能在调度初始化逻辑中有阻塞逻辑。

init 调用应该只设置 servlet，并且应该尽快返回以缩短应用程序的启动时间。您需要管理自己的调度线程，而不是将 init 调用线程用于初始化以外的其他事情。

# oracle - 跟踪 Oracle 表之间的路径？

> ID：11415641
> 
> 赞同：2
> 
> 时间：2012-07-10T14:33:36.703
> 
> 标签：oracle, join

我可以使用 Oracle sys 表来跟踪两个表之间的路径，从 X 表到 Y 表的所有可能性。问题是：我在一个巨大的数据库上工作，很难快速知道哪些表对于在两个表之间建立连接至关重要。我可以这样做吗？

**第一需求：**

SQL Developer Data Modeler 和其他工具的问题是必须选择表来 rev_eng （所以我应该已经知道要选择的表）但对我来说，这是主要问题。在我的情况下，我有 800 个表，我不能全部选择它们来跟踪路径。我的愿望是提交两个表作为参数，然后生成所有可能的路径。

**第二需求：**

我已经尝试查询 sys.all_constraints 并且我所做的最大值是检测直接连接到表 X 的表。查询：

```
SELECT C1.TABLE_NAME,C2.TABLE_NAME 
FROM ALL_CONSTRAINTS C1, ALL_CONSTRAINTS C2 
WHERE C2.CONSTRAINT_NAME = C1.R_CONSTRAINT_NAME
AND UPPER(C1.OWNER) LIKE '**MY_SCHEMA**'
AND C1.CONSTRAINT_TYPE='R' 
AND UPPER(C1.TABLE_NAME) LIKE '**X**'
ORDER BY C1.TABLE_NAME 
```

* * *

因此，如果有人可以帮助我至少构思查询以获得此结果：

> **表1 | 表2 | 加入CollumnofTable1 | 加入表 2 的列**

为此，我推测要加入**ALL_CONSTRAINTS**的另一个表 是**ALL_CON_COLUMNS** 但我发现的问题是复合主键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:48:00.753

这就是 Nature 为我们提供数据模型的原因：协助完成此类任务。

如果您没有数据模型，那么您可以从数据字典中逆向工程。请参阅我[对逆向工程问题的](https://stackoverflow.com/a/3474278/146325)回答。

逆向工程只能识别由外键定义的关系。这不需要说明，但无论如何都要说出来：如果您的数据库没有约束，您就*没有机会*自动派生数据模型。

> “我有 800 个表，我无法全部选中来跟踪路径。”

嗯，我想推荐你对数据模型进行逆向工程有点像关于如何到达科克的老笑话的妙语：“我不会从这里开始”。预先拥有一个数据模型的全部意义在于，当我们真正需要它时，我们就会拥有它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:41:57.747

If primary and foreign key relationships are established in the database, you can use a tool like Oracle Developer with Data Modeler to reverse engineer the model and give a graphical representation of what the relationships are.

Tools like this read the Oracle dictionary to determine the relationships between tables. You can do this yourself by querying views such as sys.all_constraints.

I cobbled the following query together using [Tim Hall's Generic Function Using a Ref Cursor](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php), since I only have 10g here (you can use 11g's LISTAGG function if you've got 11g). It should get you close.

```
SELECT ac1.table_name "Table", ac2.table_name "Referencing Table"
     , concatenate_list(CURSOR(SELECT acc.column_name 
                                 FROM all_cons_columns acc 
                                WHERE acc.constraint_name = ac1.constraint_name
                                  AND acc.owner = 'the_owner'
                                ORDER BY position)) "PK Columns"
     , concatenate_list(CURSOR(SELECT acc.column_name 
                                 FROM all_cons_columns acc 
                                WHERE acc.constraint_name = ac2.constraint_name
                                  AND acc.owner = 'the_owner'
                                ORDER BY position)) "FK Columns"
  FROM all_constraints ac1 JOIN all_constraints ac2 
                             ON ac1.constraint_name = ac2.r_constraint_name
 WHERE ac1.table_name = 'your_table'
   AND ac1.owner = 'the_owner'
   AND ac2.owner = 'the_owner'
   AND ac1.constraint_type = 'P'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:44:09.727

还可以尝试 schemaspy - 一个使用外键生成关系模型的开源免费替代方案！

# sass - 如何组合在循环中创建的一系列 sass 类

> ID：11415642
> 
> 赞同：3
> 
> 时间：2012-07-10T14:33:37.937
> 
> 标签：sass

我正在使用 SASS 从传递到 mixin 的变量中构造一系列类。

```
@mixin classes($key, $num) {
    @for $i from 1 through $num {
         [class*=#{$key}-#{$i}] { 
                @content
         }
    }
}

@include classes(grid, 8) {
    width:100px;
} 
```

它目前使类像我想要的那样，但都是8个单独的类（在@contents中是相同的。有没有办法将它们合并在一起，所以我得到：

```
[class*=grid-1],
[class*=grid-2],
....
[class*=grid-8],
{
 width:100px;
} 
```

我不确定是否有可能做到这一点？任何指针将不胜感激。

谢谢，

卡尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T15:46:38.713

[我终于找到了答案](http://portfolio.miphe.com/showcase/sass-dry-selectors/)

```
$classes: ();
@for $i from 1 through $cols {
    $classes: join($classes, unquote("#{$prefix}#{$i} "), comma);
}

#{$classes} {
    float: left;
    margin-right: $gutterPercent;
    width: $columnWidth;
} 
```

# delphi - 是否有 TeeChart 2012 标准版或专业版的演示，可以使用完整安装的非试用版 TeeChart 进行开箱即用编译？

> ID：11415645
> 
> 赞同：2
> 
> 时间：2012-07-10T14:33:41.113
> 
> 标签：delphi, delphi-7, delphi-xe2, teechart

用于 Delphi 的 TeeChart 2012 包含许多演示，但我想我会尝试的第一个演示是 features\tee9new.dpr 演示，这是一个演示的怪物，它似乎被硬编码为包含 200 多个单元引用，这些单元引用仅在高端 TeeChart 产品 SKU 中提供，因此该演示不是开箱即用的，即使它以 teeChart 标准提供，它也是一个无用的演示。

软件包中似乎包含零个“只是您的基本 TChart 演示”演示。

也许我错过了一些东西。但是在某些时候，**Feature**演示变成了关于渐变和极坐标图，以及 TeeChart 2012 标准中没有的废话。

如果 Steema 没有提供，有人可以指点我做一个演示，它做了以下三件事：

1.  创建至少五种类型的图表（条形图、折线图、系列图等）。

2.  展示每天使用图表的推荐代码模式。

我目前正在破解功能演示以删除不符合标准的东西，但肯定已经有类似的东西了吗？我花了一个多小时在演示上进行黑客攻击，似乎我离处理“在标准或专业版中不起作用的东西”还差得很远。

我目前正在尝试让任何演示在 delphi 7、2007 和 xe2 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:55:16.087

恐怕您要求的那种演示不可用，但我已经准备了一个使用一些基本系列样式的简单示例项目，展示如何向它们添加数据，让用户显示基本图表对象等。[在这里](http://www.steema.com/files/public/TeeChartStdDemo.zip)可用。按照提供的教程中的指南，您应该能够轻松地扩展它。

# sql - 检查边界矩形中的地理空间点是否

> ID：11415646
> 
> 赞同：1
> 
> 时间：2012-07-10T14:33:41.847
> 
> 标签：sql, sql-server-2008, geospatial, spatial

我有代表地球上边界矩形的坐标：

左上角纬度

左上角经度

右下角纬度

右下角经度

我需要编写函数来确定具有经纬度坐标的给定点是否命中边界矩形。

有什么办法吗？我没有在 sql server 中找到执行此操作的函数。所有函数都适用于线和多边形，但我只有边界，而不是完整的多边形或线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:37:04.987

您需要创建四个点的多边形，并`STWithin`针对您的几何点或`STIntersects`地理进行调用

即：http: [//msdn.microsoft.com/en-us/library/ff929207.aspx](http://msdn.microsoft.com/en-us/library/ff929207.aspx)

```
 declare @area geography, @point geography
 select @area = geography :: STGeomFromText('polygon((10 10, 20 10, 20 20, 10 20, 10 10))', 4326)
 select @point = geography :: STGeomFromText('point(15 15)', 4326)
 select @area.STIntersects(@point)

 select @point = geography :: STGeomFromText('point(5 5)', 4326)
 select @area.STIntersects(@point) 
```

# java - 从 GWT 中的 flexTable 中删除行

> ID：11415652
> 
> 赞同：0
> 
> 时间：2012-07-10T14:33:58.773
> 
> 标签：java, gwt, gwt2, flextable

我正在学习 GWT

在 flexTable 的第一行中，我添加了组合框、组合框、文本框、添加按钮、删除按钮。

在 addButton 2 行的单击事件时，将使用与第一行相同的组件将其添加到 flexTable。（组合框、组合框、文本框、添加按钮、删除按钮。）

等等。

现在我要做的是编写一个代码来删除removeButton的click事件上的行

![在此处输入图像描述](../Images/228105a8caa991b9b21cc6794996919b.png) 当单击任何添加按钮时，会添加类似的行。

现在我想要的是当我单击删除按钮时，同一行显示被删除

怎么做。

* * *

已编辑

```
public class AdvancePropertySearch extends Composite{
// initialization
    public AdvancePropertySearch() {
        initWidget(getFlexTable());
    }

    private FlexTable getFlexTable() {
        if (flexTable == null) {
            flexTable = new FlexTable();
            flexTable.setWidth("1033px");
            flexTable.setHeight("100%");
            flexTable.setWidget(0, 0, getPropertyList());
            flexTable.setWidget(0, 1, getConditionList());
            flexTable.setWidget(0, 2, getKeyWord());
            flexTable.setWidget(0, 3, getAddbutton());
            flexTable.setWidget(0, 4, getRemove());
        }
        return flexTable;
    }
    private ListBox getPropertyList() {

            propertyList = new ListBox();
            propertyList.setWidth("297px");

        return propertyList;
    }
    private ListBox getConditionList() {

            conditionList = new ListBox();
            conditionList.setWidth("311px");

        return conditionList;
    }
    private TextBox getKeyWord() {

            keyWord = new TextBox();

        return keyWord;
    }
    private Button getAddbutton() {

            addbutton = new Button("");
            addbutton.addClickHandler(new ClickHandler() {
                public void onClick(ClickEvent event) {
                    int i = flexTable.getRowCount();
                    flexTable.setWidget(i, 0, getPropertyList());
                    flexTable.setWidget(i, 1, getConditionList());
                    flexTable.setWidget(i, 2, getKeyWord());
                    flexTable.setWidget(i, 3, getAddbutton());

                    flexTable.setWidget(i, 4, getRemove());
                    remove.setStyleName("cmis-Button-removeOn");

                }
            });
            addbutton.setSize("25px", "25px");
            addbutton.setStyleName("cmis-Button-Add");

        return addbutton;
    }
    private Button getRemove() {

            remove = new Button("");
            remove.addClickHandler(new ClickHandler() {
                public void onClick(ClickEvent event) {

                    TableRowElement tablerow = findNearestParentRow(remove.getElement());
                    flexTable.removeRow(tablerow.getRowIndex());
                }
            });
            remove.setSize("25px", "25px");
            remove.setStyleName("cmis-Button-removeOff");

        return remove;
    } 
```

**错误**

```
com.google.gwt.event.shared.UmbrellaException: One or more exceptions caught, see full set in UmbrellaException#getCauses
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:129)
    at com.google.gwt.user.client.ui.Widget.fireEvent(Widget.java:129)
    at com.google.gwt.event.dom.client.DomEvent.fireNativeEvent(DomEvent.java:116)
    at com.google.gwt.user.client.ui.Widget.onBrowserEvent(Widget.java:177)
    at com.google.gwt.user.client.DOM.dispatchEventImpl(DOM.java:1351)
    at com.google.gwt.user.client.DOM.dispatchEvent(DOM.java:1307)
    at sun.reflect.GeneratedMethodAccessor49.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:662)
Caused by: com.google.gwt.dev.shell.HostedModeException: Something other than a short was returned from JSNI method '@com.google.gwt.dom.client.Node::getNodeType()': JS value of type undefined, expected short
    at com.google.gwt.dev.shell.JsValueGlue.getIntRange(JsValueGlue.java:266)
    at com.google.gwt.dev.shell.JsValueGlue.get(JsValueGlue.java:154)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeShort(ModuleSpace.java:279)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeShort(JavaScriptHost.java:99)
    at com.google.gwt.dom.client.Node$.getNodeType$(Node.java)
    at com.client.GUI.AdvancePropertySearch.findNearestParentNodeByType(AdvancePropertySearch.java:136)
    at com.client.GUI.AdvancePropertySearch.findNearestParentRow(AdvancePropertySearch.java:104)
    at com.client.GUI.AdvancePropertySearch$2.onClick(AdvancePropertySearch.java:90)
    at com.google.gwt.event.dom.client.ClickEvent.dispatch(ClickEvent.java:54)
    at com.google.gwt.event.dom.client.ClickEvent.dispatch(ClickEvent.java:1)
    at com.google.gwt.event.shared.GwtEvent.dispatch(GwtEvent.java:1)
    at com.google.web.bindery.event.shared.EventBus.dispatchEvent(EventBus.java:40)
    at com.google.web.bindery.event.shared.SimpleEventBus.doFire(SimpleEventBus.java:193)
    at com.google.web.bindery.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:88)
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:127)
    at com.google.gwt.user.client.ui.Widget.fireEvent(Widget.java:129)
    at com.google.gwt.event.dom.client.DomEvent.fireNativeEvent(DomEvent.java:116)
    at com.google.gwt.user.client.ui.Widget.onBrowserEvent(Widget.java:177)
    at com.google.gwt.user.client.DOM.dispatchEventImpl(DOM.java:1351)
    at com.google.gwt.user.client.DOM.dispatchEvent(DOM.java:1307)
    at sun.reflect.GeneratedMethodAccessor49.invoke(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:13:32.630

从[GWT Google Group](https://groups.google.com/d/msg/google-web-toolkit/BePeF2G14VY/im3vUmySGEsJ)中，动态检索 Handler 中的 rowIndex 的最佳解决方案是使用`flexTable.getCellForEvent(event)`：

```
remove.addClickHandler(new ClickHandler() {
    public void onClick(ClickEvent event) {
        int rowIndex = flexTable.getCellForEvent(event).getRowIndex();
        flexTable.removeRow(rowIndex);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:28:46.017

当您从“删除”按钮捕获 onClick 事件时，您需要找出您在哪一行，以便找到最近的行，您可以使用下面的函数（相对于您的单元格中没有带有“删除”按钮的表格):

```
 public static TableRowElement findNearestParentRow(Node node)
{
    Node element = findNearestParentNodeByType(node, "tr");
    if (element != null)
    {
        return element.cast();
    }
    return null;
}

public static Node findNearestParentNodeByType(Node node, String nodeType)
{
    while ((node != null))
    {
        if (Element.is(node))
        {
            Element elem = Element.as(node);

            String tagName = elem.getTagName();

            if (nodeType.equalsIgnoreCase(tagName))
            {
                 return elem.cast();
            }

        }
        node = node.getParentNode();
    }
    return null;
} 
```

在您的 onClick 中，您可以获得 rowId：

```
TableRowElement tableRow = findNearestParentRow(removeButton.getElement());
flexTable.removeRow(tableRow.getRowIndex()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T07:09:48.810

```
 butCe.addClickHandler(new ClickHandler() {
            @Override
            public void onClick(ClickEvent event) {
                display.setText(display.getText().replaceAll(display.getText(),""));
            }
        }); 
```

# javascript - ALT键检测WebWorks/桌面

> ID：11415653
> 
> 赞同：1
> 
> 时间：2012-07-10T14:33:58.967
> 
> 标签：javascript, html, keypress, blackberry-webworks

我写了一个简单的函数，如下所示..

```
function handleKeyPress(showEvent,formItem) {

 if(showEvent == null){}
else if(showEvent.keyCode == 13)
{
    var feildID = formItem.id;
    var pid=formItem.parentNode.id;

    var index = enterKeyForm[pid].indexOf(feildID);
    $('#' + enterKeyForm[pid][++index]).focus();
    console.log(index);

}
else(alert(showEvent.keyCode)) 
```

}

如果我将此代码添加到我的页面到我的正文标记

```
 onkeydown="javascript:getKeys(event);" 
```

并添加此功能

```
function getKeys(event)
{
     if(event.altKey)
     {  alert("The Alt key was pressed!");}
} 
```

这适用于 chrome 但不适用于黑莓...我可以捕获 alt+anykey 和 shift+any 键，但不能单独捕获 alt..

这捕获了用户在表单项上按下良好的键，参数是事件和表单项，发送 yas onkeypress(event,this)?

但这不会触发 chrome 或 blackberry 中的 hte alt 键的事件...但会触发所有其他键...

我在 webworks SDK 上开发。

谢谢

# zend-framework - 在 Zend_Form_Element 描述装饰器中使用 HTML

> ID：11415659
> 
> 赞同：2
> 
> 时间：2012-07-10T14:34:17.643
> 
> 标签：zend-framework, zend-form-element, zend-decorators

是否可以在 Zend_Form_Elment 的描述装饰器中使用 HTML？例如，以下语句不起作用：

```
$number = new Zend_Form_Element_Text('number', array(
       'size' => 32,
       'description' => 'Please the the following website: <a href="foo/bar">lorem ipsum</a>',
       'max_length' => 100,
       'label' => 'Number')); 
```

该链接未在描述中显示，括号被转换为它们的特殊字符对应物。

还有另一种显示链接的方法（或根本使用 HTML ......）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:22:22.193

有可能，您只需要告诉`Description`装饰器不要转义输出。

尝试：

```
$number = new Zend_Form_Element_Text('number', array(
   'size'        => 32,
   'description' => 'Please the the following website: <a href="foo/bar">lorem ipsum</a>',
   'max_length'  => 100,
   'label'       => 'Number')
);

$number->getDecorator('Description')->setOption('escape', false); 
```

如果您为元素创建自己的一组装饰器，您还可以在配置装饰器时指定此选项，如下所示：

```
 $elementDecorators = array(
        'ViewHelper',
        'Errors',
        array('Description', array('class' => 'description', 'escape' => false)),
        array('HtmlTag',     array('class' => 'form-div')),
        array('Label',       array('class' => 'form-label', 'requiredSuffix' => '*'))
); 
```

相关部分是：

> 数组（'描述'，数组（'类' => '描述'，**'转义' => false**）），

# javascript - 使用 JavaScript 在客户端将 base64 字符串保存为 PDF

> ID：11415665
> 
> 赞同：56
> 
> 时间：2012-07-10T14:34:30.227
> 
> 标签：javascript, internet-explorer, firefox, pdf, base64

所以这是我的问题：我有一个 pdf 文件作为我从服务器获取的 base64 字符串。我想使用此字符串将 PDF 直接显示到浏览器，或者在单击链接时为其提供“另存为...”选项。这是我正在使用的代码：

```
<!doctype>
<html>
<head>
   <title>jsPDF</title>
   <script type="text/javascript" src="../libs/base64.js"></script>
   <script type="text/javascript" src="../libs/sprintf.js"></script>
   <script type="text/javascript" src="../jspdf.js"></script>

       <script type="text/javascript">

        function demo1() {
            jsPDF.init();
            jsPDF.addPage();
            jsPDF.text(20, 20, 'Hello world!');
            jsPDF.text(20, 30, 'This is client-side Javascript, pumping out a PDF.');

            // Making Data URI
            var out = jsPDF.output();
            var url = 'data:application/pdf;base64,' + Base64.encode(out);

            document.location.href = url;
         }
    </script>
</head>
<body>

<a href="javascript:demo1()">Run Code</a>

</body>
</html> 
```

它在 Chrome 和 Safari 上运行良好。Firefox 确实识别 pdf，但不显示它，因为 FF 需要存在扩展名，但在这种情况下 data-URI 没有。我在这里坚持的原因，如果 chrome 和 safari 让它工作，那么必须有 FF 和 IE 的解决方案

我知道有一些相关的问题，但不是真正的确切问题，现在也有点老了。我知道一种解决方法是在服务器端生成 pdf，但我想在客户端生成它。

那么请聪明的人，是否有可能通过一些黑客或额外的JS下载插件？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-01-24T15:55:36.837

您可以创建一个如下所示的锚来下载**base64** pdf：

```
<a download=pdfTitle href=pdfData title='Download pdf document' /> 
```

where **pdfData** is your base64 encoded pdf like "data:application/pdf;base64,JVBERi0xLjQKJcOkw7zDtsOfCjIgMCBvYmoKPDwvTGVuZ3RoIDMgMCBSL0ZpbHRlci9GbGF0ZURlY29kZT4+CnN0cmVhbQp4nO1cyY4ktxG911fUWUC3kjsTaBTQ1Ytg32QN4IPgk23JMDQ2LB/0+2YsZAQzmZk1PSPIEB..."

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2019-12-16T08:27:49.430

您可以使用此功能从 base64 下载文件。

```
function downloadPDF(pdf) {
const linkSource = `data:application/pdf;base64,${pdf}`;
const downloadLink = document.createElement("a");
const fileName = "abc.pdf";
downloadLink.href = linkSource;
downloadLink.download = fileName;
downloadLink.click();} 
```

此代码将使用 href 和下载文件制作一个锚标记。如果你想使用按钮，那么你可以在你的按钮点击时调用点击方法。

我希望这对你有帮助谢谢

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-07-10T14:51:40.427

您应该能够使用下载文件

```
window.open("data:application/pdf;base64," + Base64.encode(out)); 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-02-17T10:18:04.467

我知道这个问题很老，但也想完成这个并在寻找时遇到了它。对于 Internet Explorer，我使用[此处](http://web.student.tuwien.ac.at/~e0427417/jsdownload.html)的代码来保存 Blob。要从 base64 字符串创建一个 blob，这个站点上有很多结果，所以它不是我的代码，我只是不记得具体的来源：

```
function b64toBlob(b64Data, contentType) {
    contentType = contentType || '';
    var sliceSize = 512;
    b64Data = b64Data.replace(/^[^,]+,/, '');
    b64Data = b64Data.replace(/\s/g, '');
    var byteCharacters = window.atob(b64Data);
    var byteArrays = [];

    for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {
        var slice = byteCharacters.slice(offset, offset + sliceSize);

        var byteNumbers = new Array(slice.length);
        for (var i = 0; i < slice.length; i++) {
            byteNumbers[i] = slice.charCodeAt(i);
        }

        var byteArray = new Uint8Array(byteNumbers);

        byteArrays.push(byteArray);
    }

    var blob = new Blob(byteArrays, {type: contentType});
    return blob; 
```

使用链接文件保护程序：

```
if (window.saveAs) { window.saveAs(blob, name); }
    else { navigator.saveBlob(blob, name); } 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2020-06-15T15:49:45.353

```
dataURItoBlob(dataURI) {
      const byteString = window.atob(dataURI);
      const arrayBuffer = new ArrayBuffer(byteString.length);
      const int8Array = new Uint8Array(arrayBuffer);
      for (let i = 0; i < byteString.length; i++) {
        int8Array[i] = byteString.charCodeAt(i);
      }
      const blob = new Blob([int8Array], { type: 'application/pdf'});
      return blob;
    }

// data should be your response data in base64 format

const blob = this.dataURItoBlob(data);
const url = URL.createObjectURL(blob);

// to open the PDF in a new window
window.open(url, '_blank');
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-28T02:08:07.043

为此，您不需要任何库。JavaScript 已经支持这一点。这是我的端到端解决方案。

```
const xhr = new XMLHttpRequest();
xhr.open('GET', 'your-end-point', true);
xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
xhr.responseType = 'blob';
xhr.onreadystatechange = function () {
    if (this.readyState == 4 && this.status == 200) {
       if (window.navigator.msSaveOrOpenBlob) {
           window.navigator.msSaveBlob(this.response, "fileName.pdf");
        } else {
           const downloadLink = window.document.createElement('a');
           const contentTypeHeader = xhr.getResponseHeader("Content-Type");
           downloadLink.href = window.URL.createObjectURL(new Blob([this.response], { type: contentTypeHeader }));
           downloadLink.download = "fileName.pdf";
           document.body.appendChild(downloadLink);
           downloadLink.click();
           document.body.removeChild(downloadLink);
        }
    }
};
xhr.send(null); 
```

这也适用于**.xls**或**.zip**文件。您只需要将文件名更改为`fileName.xls`或**fileName.zip**。这取决于你的情况。

# android - 如何使用 onTouchListener 拖放 body 并仍在 PhysicsWorld 中？和引擎

> ID：11415670
> 
> 赞同：2
> 
> 时间：2012-07-10T14:34:46.483
> 
> 标签：android, box2d, andengine, game-engine

我想使用触摸拖放身体及其精灵。我确实知道如何拖放精灵，但是当我尝试移动身体时......不起作用，身体保持静止。更重要的是，有时当我触摸身体时，整个应用程序崩溃：x 谁能告诉我如何拖放在手指运动期间与其他身体碰撞的物理身体？我一直在寻找 3 天，我很沮丧：[

我已经创建了 3 个类似的机构。一个是动态的（模拟曲棍球比赛中的球弹跳），其中两个是运动的（玩家可以移动）。我将向您展示我要移动的身体的声明。我不知道是否需要任何代码来向您展示，但我实现了一些在非常糟糕的教程中发现的接口。：秒

```
public class MainActivity extends SimpleBaseGameActivity implements IOnSceneTouchListener, IOnAreaTouchListener 
```

宣言：

```
//Declaration:
         final Sprite face = new Sprite(CAMERA_WIDTH/2+200f, centerY, this.mFaceTextureRegion, this.getVertexBufferObjectManager()) {
            @Override
            public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
                this.setPosition(pSceneTouchEvent.getX() - this.getWidth() / 2, pSceneTouchEvent.getY() - this.getHeight() / 2);
                return true;
            }
        };
        final FixtureDef MyFixtureDef = PhysicsFactory.createFixtureDef(0.2f,0.4f,0.6f);

        this.scene.registerUpdateHandler(this.mPhysicsWorld);
        face.setScale(3); 
```

身体：

```
final Body facebody = PhysicsFactory.createCircleBody(
        this.mPhysicsWorld, face, BodyType.KinematicBody,
        CIRCLE_FIXTURE_DEF);
    this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(face,
        facebody, true, true));
    facebody.setUserData("player1"); 
```

方法：

我试过鼠标关节

```
 public MouseJoint createMouseJoint(IAreaShape face, float x, float y) {
final Body boxBody = this.mPhysicsWorld.getPhysicsConnectorManager()
    .findBodyByShape(face);

Vector2 v = boxBody.getWorldPoint(new Vector2(x / 32, y / 32));

MouseJointDef mjd = new MouseJointDef();
// mjd.bodyA = ballbody;
mjd.bodyB = boxBody;
mjd.dampingRatio = 0.2f;
mjd.frequencyHz = 30;
mjd.maxForce = (float) (200.0f * boxBody.getMass());
mjd.collideConnected = true;
mjd.target.set(v);
return (MouseJoint) this.mPhysicsWorld.createJoint(mjd);
} 
```

也不是 onAreaTouched？

```
@Override
public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final ITouchArea pTouchArea, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
    if(pSceneTouchEvent.isActionDown()) {
        final IAreaShape face = (IAreaShape) pTouchArea;
        if(this.mMouseJointActive == null) {
            //this.mEngine.vibrate(100);
            this.mMouseJointActive = this.createMouseJoint(face, pTouchAreaLocalX, pTouchAreaLocalY);
        }
        return true;
    }
    return false;
} 
```

这里只是猜测

```
 @Override
        public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {
            // TODO Auto-generated method stub
            if(pSceneTouchEvent.isActionDown()) {
                Debug.d("here!");
return true;
            }
            return false;
        }

    } 
```

关于班级的问题：

如果我在 MainActivity 中声明类播放器：

```
 class Player {
final Body facebody;
final Sprite face = new Sprite(MainActivity.CAMERA_WIDTH / 2+200f,240, MainActivity.mFaceTextureRegion ,getVertexBufferObjectManager()) {
        @Override
        public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
            final float pTouchAreaLocalX, final float pTouchAreaLocalY) {

        switch (pSceneTouchEvent.getAction()) {
        case TouchEvent.ACTION_MOVE:
            // Here 'body' refers to the Body object associated with
            // this sprite
            facebody.setTransform(pSceneTouchEvent.getX(),
                pSceneTouchEvent.getY(), facebody.getAngle());
            break;
        default:
            break;
        }
        return true;
        }
    };

    Player(Body f) {
        facebody = f;
    }

    } 
```

一切都很完美，但是，它大喊`player.face`不能在此声明中的 OnCreateScene 中声明：

```
final Player player= new Player( PhysicsFactory.createCircleBody(   this.mPhysicsWorld, player.face, BodyType.KinematicBody,CIRCLE_FIXTURE_DEF)); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T09:46:58.767

好的，最后我找到了很好的解决方案，把它带到 onCreateScene：

```
 final AnimatedSprite face;
    final Body body;

    final FixtureDef objectFixtureDef = PhysicsFactory.createFixtureDef(1, 0.5f, 0.5f);

        face = new AnimatedSprite(CAMERA_WIDTH/2+200, CAMERA_HEIGHT/2, this.mCircleFaceTextureRegion, this.getVertexBufferObjectManager());
        face.setScale(3);
        body = PhysicsFactory.createCircleBody(this.mPhysicsWorld, face, BodyType.DynamicBody, objectFixtureDef);

    this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(face, body, true, true));
    face.animate(new long[]{200,200}, 0, 1, true);
    face.setUserData(body);
    body.setUserData("player");
    this.mScene.registerTouchArea(face);
    this.mScene.attachChild(face); 
```

在已触及区域：

```
 @Override
public boolean onAreaTouched( final TouchEvent pSceneTouchEvent, final ITouchArea pTouchArea,final float pTouchAreaLocalX, final float pTouchAreaLocalY) {

    if(pSceneTouchEvent.isActionMove()) {

        final AnimatedSprite face = (AnimatedSprite) pTouchArea;
        final Body faceBody = (Body)face.getUserData();
        faceBody.setTransform(pSceneTouchEvent.getX() / PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT, pSceneTouchEvent.getY() / PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT, faceBody.getAngle());
        return true;
    }
    return false;
} 
```

我没有制作类播放器，我把它带到了 onCreateScene。拖放的重要部分是将X和Y除以 `PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:45:31.367

我认为你把问题复杂化了。一步一步来：

1.  创建您的精灵，以及该精灵的身体。根据您的问题，我也会尝试使身体动态而不是运动学，但这是您的决定。
2.  在你的精灵声明中，覆盖 onAreaTouched。设置如下：

    ```
    sprite = new Sprite(0, 0, this.mTextureRegion, activity.getVertexBufferObjectManager()) {
        @Override
        public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {

            switch(pSceneTouchEvent.getAction()){
                case TouchEvent.ACTION_MOVE:
                    //Here 'body' refers to the Body object associated with this sprite
                    body.setTransform(pSceneTouchEvent.getX(),
                                      pSceneTouchEvent.getY(),
                                      body.getAngle());
                    break;
                default:
                    break;
            }
            return true;
        }
    }; 
    ```

最重要的部分是你在**移​​动身体，而不是精灵**。这应该反过来翻译精灵。

之后，根据您希望脸部的行为方式，选择您希望对象是运动的还是动态的。

# resources - ResourceBundle 从哪里获得它的语言环境？

> ID：11415672
> 
> 赞同：0
> 
> 时间：2012-07-10T14:34:51.957
> 
> 标签：resources, internationalization, struts, locale, bundle

我在 i18n struts 应用程序中使用资源包。在大多数页面上，资源包会选择正确的语言（语言是通过 i18n struts 拦截器设置的）。并且在一个页面上，资源包没有选择正确的语言。我不知道为什么。这就是为什么我想知道 ResourceBundle 的语言环境来自哪里。

在框架中调用动作会导致资源包出现一些问题吗？

好的，在一个 struts 动作中，我有以下内容：

```
ResourceBundle resourceBundleProcess = null;
        try {
            resourceBundleProcess = ResourceBundle
                    .getBundle(BpmUiConstantes.BPMUI_PROCESS_CONF_FOLDER + "/"
                            + caseType);
            LOG.info("Locale used by bundle : " + resourceBundleProcess.getLocale()) ;
        } 
```

通过 url，我将语言环境设置为“en”，例如通过指定 request_locale=en。i18n struts 拦截器应该获取语言环境并使用它。虽然，我不确定是否会影响 ResourceBundles。我认为确实如此，因为在我的其他页面上，文本以正确的语言显示。但是这里的 LOG 出于某种原因显示“fr”（浏览器也是英文的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:38:22.447

`ResourceBundle.getBundle()`，如果您不传递任何语言环境作为参数，则使用 JVM 的默认语言环境，如其[API 文档](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html#getBundle%28java.lang.String%29)中所示。

Struts 无法对此产生任何影响。

如果你想使用由 Struts i18n 拦截器设置的语言环境，或者使用 Struts API 来获取你的文本，如[文档中所述](http://struts.apache.org/2.2.3/docs/localization.html)，或者使用 ActionSupport 的`getLocale()`方法从会话中获取语言环境，并将其传递给`ResourceBundle.getBundle()`.

# sql-server-2008 - 如何使用 TSQL 获得所需的结果集？

> ID：11415678
> 
> 赞同：0
> 
> 时间：2012-07-10T14:35:06.687
> 
> 标签：sql-server-2008, tsql

这是我的表结构：-

```
Table01
ID  Name    FkID  dateTime
1   John    1     2012-06-01
2   Peter   2     2012-06-02
3   Penny   2     2012-06-03
4   Patty   3     2012-06-01 
```

我试过这个查询但是:(

```
select * 
from Table01 
where FkID in 
(SELECT FkID FROM Table01 GROUP BY FkID HAVING ( COUNT(PkID) < 2 ))
order by dateTime desc 
```

期望的结果：-

```
1   John    1     2012-06-01
3   Penny   2     2012-06-03
4   Patty   3     2012-06-01 
```

我需要 FkID 的唯一结果，但从重复的 FkID 中我需要按最新的日期时间选择行。请提供任何指导方针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:38:39.707

您可以使用 ROW_NUMBER 来实现这一点。

```
WITH A AS (
  SELECT *, ROW_NUMBER() OVER (PARTITION BY FkID ORDER BY dateTime DESC) AS rn
  FROM Table01 
)
SELECT ID, Name, FkID, dateTime
FROM A
WHERE rn = 1; 
```

我使用了公用表表达式（`WITH`语句），但您也可以使用普通的子查询来做到这一点。但实际上，`ROW_NUMBER()`当您想要使用分组数据（或 PARTITION'ed，可以这么说）时，这是一种祝福。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:44:23.720

你可以通过加入你的桌子两次来做到这一点。

```
select t1.id, t1.name, t1.dt
from t t1
inner join
(
    select fkid, max(dt) as dt
    from t
    group by fkid
) t2
    on t1.fkid = t2.fkid
    and t1.dt = t2.dt
order by t1.id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/2321b/2)

# java - Android XML Parse Exception 突然

> ID：11415680
> 
> 赞同：0
> 
> 时间：2012-07-10T14:35:08.777
> 
> 标签：java, android, xml, xml-parsing, sax

我的代码昨天运行良好，但我今天再次启动它并收到错误

```
org.apache.harmony.xml.ExpatParser$ParseException: At line 1, column 0: not well-formed (invalid token) 
```

有问题的 xml 没有任何时髦的字符。它存储在一个名为“xml”的字符串变量中。公平地说，我不太确定如何处理这个问题，只是在学习一些教程，但这是我的尝试。

```
out = new PrintWriter(mySocket.getOutputStream(), true);
BufferedReader br = new BufferedReader(new InputStreamReader(mySocket.getInputStream(), "US-ASCII"));
InputStream is = mySocket.getInputStream();

...
String xml = the stuff that was read in with br.read();
...

SAXParserFactory saxPF = SAXParserFactory.newInstance();
SAXParser saxP = saxPF.newSAXParser();
XMLReader xmlR = saxP.getXMLReader();

DataHandler myDataHandler = new DataHandler();
xmlR.setContentHandler(myDataHandler);
xmlR.parse(new InputSource(new StringReader(xml)));
myData = myDataHandler.getData(); 
```

我哪里做错了？

更新：xml以

```
<?xml version="1.0" standalone="yes"?> 
```

所以看起来“第 1 行，第 0 列”实际上没有任何问题。

更新 2：我发现 is.available() 正在返回 0.... 我该如何修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:04:23.543

您需要确保指定您的编码方法。尝试：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?> 
```

您始终需要定义如何对数据进行编码，否则您将遇到问题。您可能还想更改此设置：

```
BufferedReader br = new BufferedReader(new InputStreamReader(mySocket.getInputStream(), "US-ASCII")); 
```

对此：

```
BufferedReader br = new BufferedReader(new InputStreamReader(mySocket.getInputStream(), "utf-8")); 
```

这是一篇很棒的文章，讨论了指定如何编码数据的重要性：

[http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:24:28.050

我不确定到底是什么问题，但我改变了几件事并让它有点工作。这是我更改的内容：

我变了

```
BufferedReader br = new BufferedReader(new InputStreamReader(mySocket.getInputStream(), "US-ASCII"));
InputStream is = mySocket.getInputStream(); 
```

到

```
BufferedInputStream in = new BufferedInputStream(mySocket.getInputStream()); 
```

而且我没有在原始问题中包含这个（它是“...”的一部分），但我摆脱了这个条件

```
if(in.available()>0) 
```

因为它返回 0 即使 read() 工作只是 find 没有它。不过，这可能只是一个临时的黑客攻击，我需要弄清楚为什么它返回 0 并找到一个合法的修复......

# php - 作为 PAGE 发布到 facebook - 不是作为用户

> ID：11415688
> 
> 赞同：1
> 
> 时间：2012-07-10T14:35:33.773
> 
> 标签：php, facebook-graph-api, facebook-authentication

我正在尝试`page`使用[本教程](http://www.masteringapi.com/tutorials/how-to-post-on-facebook-page-as-page-not-as-admin-user-using-php-sdk/31/)
上传图像并发布到我的粉丝页面墙上， 但是连接似乎不起作用。

任何建议如何获取页面参数以便我可以将图像发布到页面墙上请

此代码已从最新的 SDK 3.1.1 修改

```
// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
    'appId'  => '***************',
    'secret' => '********************************',
));

// Get User ID
$user = $facebook->getUser();

if ($user) {
    try {
        $page_id = '***************';
        $page_info = $facebook->api("/$page_id?fields=access_token");
        if( !empty($page_info['access_token']) ) {
                $args = array(
                        'access_token'  => $page_info['access_token'],
                        'message'       => "I'm a Page!"
                );
                $post_id = $facebook->api("/$page_id/feed","post",$args);
        }
    } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
    }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
    $logoutUrl = $facebook->getLogoutUrl(array( 'next' => 'http://myDoamin.com/logout_page.php' ));
} else {
    $loginUrl = $facebook->getLoginUrl(array('scope'=>'manage_pages,publish_stream'));
}
?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
    <head>
        <title>php-sdk</title>
        <style>
            body { font-family: 'Lucida Grande', Verdana, Arial, sans-serif; }
            h1 a {  text-decoration: none; color: #3b5998; }
            h1 a:hover { text-decoration: underline; }
        </style>
    </head>
    <body>
        <h1>php-sdk</h1>

        <?php if ($user): ?>
            <a href="<?php echo $logoutUrl; ?>">Logout</a>
        <?php else: ?>
            <div>
                Login using OAuth 2.0 handled by the PHP SDK:
                <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
            </div>
        <?php endif ?>

        <h3>PHP Session</h3>
        <pre><?php print_r($_SESSION); ?></pre>

        <?php if ($user): ?>
            <h3>You</h3>
            <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

            <h3>Your User Object (/me)</h3>
            <pre><?php print_r($page_info); ?></pre>
        <?php else: ?>
            <strong><em>You are not Connected.</em></strong>
        <?php endif ?>

    </body>
</html> 
```

上传在这里处理：

```
<?php
$app_id = "***************";
$app_secret = "********************************";
$post_login_url = "http://mydomain.com/upload.php";

$code = $_REQUEST["code"];

//Obtain the access_token with publish_stream permission 
if(empty($code)){ 
    $dialog_url= "http://www.facebook.com/dialog/oauth?"
     . "client_id=" .  $app_id 
     . "&redirect_uri=" . urlencode($post_login_url)
     .  "&scope=publish_stream";
    echo("<script>top.location.href='" . $dialog_url 
    . "'</script>");
 }
else {
    $token_url="https://graph.facebook.com/oauth/access_token?"
     . "client_id=" . $app_id 
. "&redirect_uri=" . urlencode( $post_login_url )
     . "&client_secret=" . $app_secret
     . "&code=" . $code;
    $response = file_get_contents($token_url);
    $params = null;
    parse_str($response, $params);
    $access_token = $params['access_token'];

 // Show photo upload form to user and post to the Graph URL
 $graph_url= "https://graph.facebook.com/me/photos?"
 . "access_token=" .$access_token;

 echo '<html><body>';
 echo '<form enctype="multipart/form-data" action="'
 .$graph_url .' "method="POST">';
 echo 'Please choose a photo: ';
 echo '<input name="source" type="file"><br/><br/>';
 echo 'Say something about this photo: ';
 echo '<input name="message" 
         type="text" value=""><br/><br/>';
 echo '<input type="submit" value="Upload"/><br/>';
 echo '</form>';
 echo '</body></html>';
}
?> 
```

中的示例`SDK`是相似的，当我运行它时，它以用户身份运行。但不是页面

```
 if ($user) {
    try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
    } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:54:15.783

参考：[https ://developers.facebook.com/docs/authentication/pages/](https://developers.facebook.com/docs/authentication/pages/)

1.  授予`manage_pages`您的应用程序的权限。
2.  获取`page_access_token`，将 api 作为带有页面令牌的页面发布到页面。

* * *

* * *

**示例：：** `php cURL upload`独立示例，不​​需要 sdk。

```
<?php 
function GetCH(){
// id of the album to upload
$ablum_id = "182325958494028";
// photo caption
$photo_caption = "testing app ablum upload";
// the page access token if you are uploading as the page
$page_access_token = "Add Your page token here.";
// url to your photo
$photo_url = "http://sphotos.xx.fbcdn.net/hphotos-ash3/544288_10150906170859577_732484576_9506566_417314835_n.jpg";
//
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://graph.facebook.com/".$ablum_id."/photos?url=".urlencode($photo_url)."&message=".urlencode($photo_caption)."&method=post&access_token=".$page_access_token."");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
$sendCH = curl_exec($ch);
curl_close($ch);
return $sendCH;
};

// call our function and upload photo, large photos may be slow
echo GetCH();
// if successful a return is shown
// { "id": "387851721274783", "post_id": "171535666239724_387851741274781" }
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T20:01:42.447

这就是我作为页面发布的方式。我正在使用[Facebook 的 PHP SDK](https://developers.facebook.com/docs/reference/php/)。

我首先获取用户有权访问的所有页面的列表，然后向用户展示它们的列表，以便他们可以选择一个（此处未显示代码）。然后我存储该数据并稍后使用它作为该页面发布。

我如何获得页面列表：

```
try {
        $result = $facebook->api("/me/accounts");
        $userpages = $result['data'];
} catch (FacebookApiException $e) {
        $userpages = array();
        $fbuser = null;
        $facebook->clearPersistentData();
} 
```

现在我遍历它们（`$settings`是一个包含我的用户设置的数组，包括他们选择发布的页面）：

```
foreach ($userpages as $userpage) {
        if ($userpage['category'] == "Application")
                continue;    # My app doesn't work with Application pages.
        if ($settings['page']['id'] == $userpage['id']) {
                # This is the page I want.
                # $userpage['access_token'] has the access token.
        }
} 
```

被`access_token`添加到我的请求的 postdata 数组中，并在`id`此处使用。

```
return $facebook->api("/$id/feed/", "post", $postdata); 
```

# mysql - mysql按连续日期选择行

> ID：11415690
> 
> 赞同：2
> 
> 时间：2012-07-10T14:35:38.650
> 
> 标签：mysql, date

我有一个可用日期块表（在我的情况下为 7 天），它可能是连续的，也可能不是连续的：

```
start_date    end_date    booked    id    room_id

2012-07-14    2012-07-21    0       1        6
2012-07-21    2012-07-28    0       2        6
2012-07-28    2012-08-04    1       3        6
2012-08-04    2012-08-11    0       4        6 
```

我想做的是能够得到一个结果集，在一个日期范围内，每 X 周连续未预订的日期给我一行。

因此，对于从 7 月 14 日开始并使用上表数据的 2 周区块，我预计会出现以下情况：

```
start_date    end_date    booked
2012-07-14    2012-07-28    0 
```

由于预订了其中一个组成周，因此不会退回第二个 2 周。

以下是我已经尝试过的一些想法：

```
SELECT 
    MIN(start_date) AS start_date_min,
    MAX(end_date) AS end_date_max,
    CAST(GROUP_CONCAT(id) AS CHAR) AS ids,
    SUM(booked) AS booked
FROM 
    available_dates
WHERE
    (start_date>=20120714 AND end_date<=DATE_ADD(20120714, INTERVAL 14 DAY))
GROUP BY
    room_id
HAVING
    end_date_max=DATE_ADD(20120714, INTERVAL 14 DAY) 
```

这让我成为了一部分，但并没有让我获得*连续*的结果——这是重要的部分。当我扩大测试数据时，它也只返回一个结果（可能是因为 HAVING 子句）。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:07:53.090

如果您有日历或 `numbers`表格：

```
CREATE TABLE num
( i INT NOT NULL
, PRIMARY KEY (i)
) ;

INSERT INTO num 
  (i) 
VALUES
  (0), (1), (2), ..., (1000) ; 
```

你可以使用这样的东西：

```
SELECT 
    avail.room_id,
    MIN(avail.start_date) AS start_date_min,
    MAX(avail.end_date) AS end_date_max,
    CAST(GROUP_CONCAT(avail.id) AS CHAR) AS ids,
    SUM(avail.booked) AS booked
FROM 
    available_dates AS avail
  CROSS JOIN
    ( SELECT DATE('2012-07-14') AS start_date_check
           , 52                 AS max_week_check
    ) AS param
  JOIN
    num
      ON  avail.start_date = param.start_date_check + INTERVAL num.i WEEK
      AND num.i < param.max_week_check
WHERE
    avail.booked = 0
GROUP BY
    avail.room_id,
    ( num.i / 2 )        
HAVING
    COUNT(*) = 2 
```

你也可以这样：

```
WHERE
    1 =1                         --- no WHERE condition
GROUP BY
    avail.room_id,
    ( num.i / 2 )        
HAVING                           --- and optionally
    SUM(avail.booked) = 0        --- this 
```

# jquery - 带有多个输入以触发自动完成的jQuery自动完成_renderItem问题

> ID：11415691
> 
> 赞同：5
> 
> 时间：2012-07-10T14:35:40.183
> 
> 标签：jquery, autocomplete

快速解释：我有 3 个输入**first_name**、**last_name**和**contact_number**。它们都有类名**autocomplete**。例如

```
<input type="input" name="first_name" id="first_name" class="autocomplete">
<input type="input" name="last_name" id="last_name" class="autocomplete">
<input type="input" name="contact_number" id="contact_number" class="autocomplete"> 
```

我使用自动完成类作为启动 jQuery UI 自动完成功能的选择器（请参见下面的代码），这样填充其中任何一个都将导致使用所有 3 个输入进行 ajax 搜索。因为我使用所有 3 个字段进行搜索，所以结果必须位于特定位置（而不是通常情况下在每个输入下），所以我使用带有表格的 div，其中依次显示结果。这可以通过覆盖内部 _renderItem 函数来实现（参见下面的代码）。

这一切都很好，但是，仅适用于表单中的第一个输入，例如 first_name。其他输入都显示在其各自输入下方的下拉列表中。后续输入似乎忽略了 _renderItem 覆盖。我已经尝试交换输入，无论哪个首先正常工作，而其他人则不能。关于如何解决这种行为的任何建议？

```
 $(document).ready(function() {
        $(".autocomplete").autocomplete({
            search: function(event, ui) {
                $("#autocompleteoutput table tbody").empty();
                $("#autocompleteoutput").css("display", "inline");
            },
            source: function(request, response) {
                jQuery.ajax({
                    url: "'.site_url('reservations/search_customer').'",
                    type: "post",
                    dataType: "json",
                    data: {
                        first_name: $("#first_name").val(),
                        last_name: $("#last_name").val(),
                        contact_number: $("#contact_number").val(),
                        '.$this->security->get_csrf_token_name().' : "'.$this->security->get_csrf_hash().'"
                    },
                    success: function(data) {
                        response(jQuery.map(data, function(item) {
                            return {
                                diner_id: item.diner_id,
                                first_name: item.first_name,
                                last_name: item.last_name,
                                dialing_code: item.dialing_code,
                                country_id: item.country_id,
                                contact_number: item.contact_number,
                                email: item.email
                            }
                        }))
                    }
                })
            }
        })
        .data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<tr class=\"customerselect\" data-dinerid=\"" + item.diner_id + "\" data-fname=\"" + item.first_name + "\" data-lname=\"" + item.last_name + "\" data-countryid=\"" + item.country_id + "\" data-num=\"" + item.contact_number + "\" data-email=\"" + item.email + "\"></tr>" )
                .data( "item.autocomplete", item )
                .append( "<td><span class=\"icon-user\">" + item.first_name + " " + item.last_name + "</span></td>")
                .append( "<td><span class=\"icon-phone\">(+" + item.dialing_code + ") " + item.contact_number + "</span></td>" )
                .append( "<td><span class=\"icon-mail\">" + item.email + "</span></td>" )
                .appendTo($("#autocompleteoutput table tbody"));
        };
    }); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T15:28:06.867

这里的 .data("autocomplete") 只返回第一个元素的自动完成数据。分配自动完成控件后，请尝试对每个输入分别使用此方法。

我的意思是这样

```
 function myRenderFunc(ul,item){
     // code for the _renderItem method
 }

 $(".autocomplete").autocomplete({
        //your autocomplete code
 })

 $('#first_name').data( "autocomplete" )._renderItem = myRenderFunc;
 $('#last_name').data( "autocomplete" )._renderItem = myRenderFunc;
 $('#contact_number').data( "autocomplete" )._renderItem = myRenderFunc; 
```

我现在尝试了这个，它对我有用。也应该为你工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-14T08:54:55.347

这也适用于我，特别是如果输入元素是动态生成的：

```
$('.autocomplete').each(function() {
    $(this).data('uiAutocomplete')._renderItem = function (ul, item) {
          // render item code
    };
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-06T14:24:10.167

以上两个答案都为我指明了正确的方向，但最后，对我来说，它看起来像这样（包括对 jquery-ui 的一些更新）：

```
$('.autocomplete').each(function(i, el) {
    $(el).data('ui-autocomplete')._renderItem = function(ul, item) {
        // Do stuff
    };
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-23T10:03:01.240

谢谢你解决了我的问题。我通过“创建”功能实现了它

```
$.extend(proto, {
    _initSource: function () {
        if (this.options.html && $.isArray(this.options.source)) {
            this.source = function (request, response) {
                response(filter(this.options.source, request.term));
            };
        } else {
            initSource.call(this);
        }
    },

    create: function () {
        $(this).data('ui-autocomplete')._renderItem = function (ul, item) {
            return $("<li></li>")
                .data("item.autocomplete", item)
                .append($("<a></a>")[this.options.html ? "html" : "text"](item.EmployeeHtml))
                .appendTo(ul);
    };
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-26T08:32:20.567

```
$('.autocomplete').each(function(i, el) {
    $(el).autocomplete({
        source: function(request, response) {
            $.ajax({
                url: "/Actual/Provision",
                type: 'POST',
                dataType: "json",
                data: {'term': request.term},
                success: function(data) {
                    response(data);
                },
                error: function(data) {
                    alert('failed to load autocomplete source data');
                }
            });
        },
        minLength: 1,
        select: function(event, ui) {
            $(this).parent().find("input[name='submission_provision[]']").val(ui.item.name);
            $(this).parent().find("input[name='submission_part_age[]']").val(ui.item.part_age);
            $(this).parent().find("input[name='submission_part_smr[]']").val(ui.item.part_smr);
            $(this).parent().find("input[name='submission_labour_age[]']").val(ui.item.labour_age);
            $(this).parent().find("input[name='submission_labour_smr[]']").val(ui.item.labour_smr);

            return false;
        },
        change: function(event, ui) {
            if ($(this).val() == '') {
                $(this).parent().find(".provision-ref").val("");
            }
        }

    }).data("ui-autocomplete")._renderItem = function(ul, item) {
        console.log(ul);
        return $("<li>")
            .append("<a>" + item.name + "</a>")
            .appendTo(ul);
    };
}); 
```

# html - css - div中的表遍历它

> ID：11415696
> 
> 赞同：0
> 
> 时间：2012-07-10T14:35:55.783
> 
> 标签：html, css

你能告诉我为什么带有文本的表格单元格会超出`div`吗？

我的代码： http: [//nocleg-i.pl/1969/wyszukane/](http://nocleg-i.pl/1969/wyszukane/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:50:32.743

看起来长文本链接是这里的罪魁祸首。在这种情况下，您可以简单地使用 CSS 来强制换行。只需将以下内容应用于您的样式表，瞧！

```
div.text_exposed {
 word-wrap: break-word;
 width: 500px;
} 
```

（请注意，需要为自动换行规则设置宽度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:08:49.503

正如@Vinny Burgh 所说，长链接是问题所在。但是，不要将锚标记留空。向其中添加一些单词，这样 url 就不会显示并且内容不会中断。

```
<a href="the_actual_extra_long_link">Missing text-Input text here</a> 
```

基本上，你必须在我上面暗示的地方放一些文字。

或者，它可能是一个 html 错误，可能是一些像这样的未闭合锚：

```
<a href="the_actual_extra_long_link double quotes to close the href and a &gt; symbol may be missing </a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:37:11.290

```
<div id="id_4f4e2a34992008a12697010" class="text_exposed_root text_exposed"> 
```

当我翻译成英文时效果很好，浏览器不支持您的语言。我认为问题出在你的课堂上。删除`div`类并重试。

# dynamics-crm - 在 Dynamics crm 2011 中将注释附加到潜在客户

> ID：11415697
> 
> 赞同：2
> 
> 时间：2012-07-10T14:35:56.970
> 
> 标签：dynamics-crm, dynamics-crm-2011

我正在使用 Microsoft Dynamics CRM 2011，我需要创建一个注释并将其附加到 JavaScript 中的潜在客户。目前我有一个类似的对象：

```
var note = new Object();
note.subject = "some text";
note.notetext = "some other text"; 
```

但是，我不确定如何定义注释和潜在客户之间的联系。在相关说明中，在提交这些实体时，我会使用 OData 服务“发布”它们吗？

谢谢

编辑#1：使用 Jason 帖子中的信息，我现在得到了以下代码，但它似乎没有添加节点。有人可以指出我哪里出错了吗？

```
var note = new Object();
note.subject = "Test Note";
note.notetext = "some test text";
note.objectid = { id: selectedItemId, logicalname: "lead", name: "A Name" };

var postRequest = new XMLHttpRequest();
postRequest.open( "POST", url + "/LeadSet(guid'" + selectedItemId.toString() + "')", true );
postRequest.setRequestHeader( "Accept", "application/json" );
postRequest.setRequestHeader( "Content-Type", "application/json;charset=utf-8" );
postRequest.setRequestHeader( "X-HTTP-Method", "MERGE" );

postRequest.onreadystatechange = function() {
    if( this.readyState == 4 )
    {
        var text = "complete";
    }
};

postRequest.send(note.toString()); 
```

“selectedItemId”是传递给函数的 GUID。当“readystate”字段设置为 4 时，包含的“status”设置为 400。

编辑＃2：我尝试传入以下字符串，但仍然收到 400（错误请求）响应。

```
{ObjectTypeCode: 4, Subject: \"test note\", NoteText: \"text\", ObjectId: { ObjectIdTypeCode: 4, Id: \"" + selectedItemId + "\", LogicalName: \"lead\", Name: \"A Name\" } } 
```

编辑#3：好的，所以如果我删除“X-HTTP-METHOD”行，将“ObjectTypeCode”数字 4 用引号括起来并删除“ObjectIdTypeCode”，然后我得到一个 500（内部错误）和一个代码“ -2147217150”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:50:11.243

您可以像这样创建参考：

```
note.Subject = "TEST"; 
note.NoteText = "123"; 
note.ObjectId = { Id: "8343E0C3-76C9-E111-A3BC-000C29336979", LogicalName: "lead", Name: "test lead" }; 
```

# php - 谷歌地图标记未显示在资源管理器或 chrome 中

> ID：11415698
> 
> 赞同：0
> 
> 时间：2012-07-10T14:35:59.607
> 
> 标签：php, mysql, google-maps, maps

我正在关注如何在 php/mysql 中使用谷歌地图的教程：[https ://developers.google.com/maps/articles/phpsqlajax_v3](https://developers.google.com/maps/articles/phpsqlajax_v3)

在 Firefox 中一切正常，但在 Chrome 或资源管理器中没有显示标记。在 chrome 控制台中，我收到以下错误：

未捕获的类型错误：无法读取 null /maps/:35（匿名函数）/maps/:35 request.onreadystatechange 的属性“documentElement”

这是我的代码（与教程中的完全相同）：

```
<!DOCTYPE html >
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>PHP/MySQL & Google Maps Example</title>

 <script type="text/javascript"
 src="http://maps.googleapis.com/maps/api/js?    
key=AIzaSyAGdu4GFzdG3B203KSHApI5hA9HQmGKRrc&sensor=true">
</script>
<script type="text/javascript">
//<![CDATA[

 var customIcons = {
  restaurant: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  bar: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
 };

 function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(47.6145, -122.3418),
    zoom: 13,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("genxml.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {

        var name = markers[i].getAttribute("name");
        var address = markers[i].getAttribute("address");
        var type = markers[i].getAttribute("type");
        var point = new google.maps.LatLng(
        parseFloat(markers[i].getAttribute("lat")),
        parseFloat(markers[i].getAttribute("lng")));
        var html = "<b>" + name + "</b> <br/>" + address;
        var icon = customIcons[type] || {};

        var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

//]]>

</script>

<body onload="load()">
<div id="map" style="width: 500px; height: 300px"></div>
</body>

</html> 
```

这是输出xml的文件：

```
<?php  

require("db.php"); 

// Start XML file, create parent node

$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node); 

// Opens a connection to a MySQL server

$connection=mysql_connect ('maps', $username, $password);
if (!$connection) {  die('Not connected : ' . mysql_error());} 

// Set the active MySQL database

$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
die ('Can\'t use db : ' . mysql_error());
} 

// Select all the rows in the markers table

$query = "SELECT * FROM markers WHERE 1";
$result = mysql_query($query);
if (!$result) {  
die('Invalid query: ' . mysql_error());
} 

header("Content-type: text"); 

// Iterate through the rows, adding XML nodes for each

while (( $row = mysql_fetch_assoc($result))!==false){

// ADD TO XML DOCUMENT NODE  
$marker = $dom->createElement("marker");  
 $node->appendChild($marker);   
 $marker->setAttribute("name",$row['name']);
 $marker->setAttribute("address", $row['address']);  
 $marker->setAttribute("lat", $row['lat']);  
 $marker->setAttribute("lng", $row['lng']);  
 $marker->setAttribute("type", $row['type']); 
 }

 echo $dom->saveXML();

 ?> 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:40:18.420

```
mapTypeId: 'roadmap' 
```

This is not a valid map type. It should be like this instead:

```
mapTypeId: google.maps.MapTypeId.ROADMAP 
```

This isn't quite right either:

```
var infoWindow = new google.maps.InfoWindow; 
```

It should be like this instead:

```
var infoWindow = new google.maps.InfoWindow(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:47:27.683

除了邓肯已经指出的问题，你不能做

```
 var icon = customIcons[type] || {}; 
```

因为 Javascript 中没有关联数组。var customIcons 被定义为一个对象，因此

```
var icon = eval('customIcons'+'.'+type) || {}; 
```

那么，Marker对象的icon参数应该是一个MarkerImage对象，所以不是

```
icon: icon.icon,
shadow: icon.shadow, 
```

你应该使用

```
icon: new google.maps.MarkerImage(icon.icon),
shadow: new google.maps.MarkerImage(icon.shadow), 
```

# python - 从大型元组/行列表中有效地构建 Pandas DataFrame

> ID：11415701
> 
> 赞同：17
> 
> 时间：2012-07-10T14:36:11.787
> 
> 标签：python, tuples, pandas, dta

我继承了一个以 Stata .dta 格式保存的数据文件。我可以用`scikits.statsmodels` `genfromdta()`函数加载它。这会将我的数据放入一维 NumPy 数组中，其中每个条目是一行数据，存储在 24 元组中。

```
In [2]: st_time = time.time(); initialload = sm.iolib.genfromdta("/home/myfile.dta"); ed_time = time.time(); print (ed_time - st_time)
666.523324013

In [3]: type(initialload)
Out[3]: numpy.ndarray

In [4]: initialload.shape
Out[4]: (4809584,)

In [5]: initialload[0]
Out[5]: (19901130.0, 289.0, 1990.0, 12.0, 19901231.0, 18.0, 40301000.0, 'GB', 18242.0, -2.368063, 1.0, 1.7783716290878204, 4379.355, 66.17669677734375, -999.0, -999.0, -0.60000002, -999.0, -999.0, -999.0, -999.0, -999.0, 0.2, 371.0) 
```

我很好奇是否有一种有效的方法可以将其安排到 Pandas DataFrame 中。根据我的阅读，逐行构建 DataFrame 似乎效率很低……但是我有什么选择？

我写了一个非常慢的第一遍，它只是将每个元组作为单行 DataFrame 读取并附加它。只是想知道是否还有其他更好的方法。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-10T14:44:48.687

```
pandas.DataFrame(initialload, columns=list_of_column_names) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-09T03:23:28.293

Version 0.12 of pandas onwards should support loading Stata format directly ([Reference](http://pandas.pydata.org/pandas-docs/dev/io.html#reading-from-stata-format)).

From the documentation:

> The top-level function read_stata will read a dta format file and return a DataFrame: The class StataReader will read the header of the given dta file at initialization. Its method data() will read the observations, converting them to a DataFrame which is returned:

```
 pd.read_stata('stata.dta') 
```

# php - 如何在 Zend 框架中捕获 SQL 错误

> ID：11415709
> 
> 赞同：0
> 
> 时间：2012-07-10T14:36:23.983
> 
> 标签：php, zend-framework, frameworks

当我尝试从数据库中删除实体时，我需要捕获并处理错误。

> [删除记录时出错：SQLSTATE[23000]：完整性约束违规：1451 无法删除或更新父行：外键约束失败（`zdf`. `cats`, CONSTRAINT `FK_cats_Categories`FOREIGN KEY ( `category_id`) REFERENCES `categories`( `id`) ON DELETE NO ACTION ON UPDATE NO ACTION）]

我尝试通过单击“deleteURL”按钮删除实体

```
 $dbCategories = new Application_Model_DbTable_Categories();
    $source = new Bvb_Grid_Source_Zend_Select($dbCategories->getCategoriesByAppId(1, true));
        $columns = array('title', 'actions');
        $columnsPositions = array('title');
        $extraColumns = array(
            0 => $this->createExtraColumn(array(
                'name' => 'actions',
                'position' => 'right',
                'title' => 'Actions',
                'decorator' => '<a class="edit-button" href="{{editUrl}}">&nbsp;</a><a class="remove-button" href="{{deleteUrl}}">&nbsp;</a>'
            ))
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T07:51:09.607

由于我无法找到如何使用 ZF DataGrid 捕获此错误而无需在组件库中执行某些操作，因此我根据 URL 参数自行删除。

基本上，

```
$deleteId =  $this->getRequest()->getParams('Delete'); 
```

然后`Try...Catch`用`$model->delete($id);`

并手动处理异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:40:02.483

使用 Try/Catch 块怎么样？

```
try {
    $dbCategories = new Application_Model_DbTable_Categories();
    $source = new Bvb_Grid_Source_Zend_Select($dbCategories->getCategoriesByAppId(1, true));
    $columns = array('title', 'actions');
    $columnsPositions = array('title');
    $extraColumns = array(
        0 => $this->createExtraColumn(array(
            'name' => 'actions',
            'position' => 'right',
            'title' => 'Actions',
            'decorator' => '<a class="edit-button" href="{{editUrl}}">&nbsp;</a><a class="remove-button" href="{{deleteUrl}}">&nbsp;</a>'
        ))
    );
} catch (Exception $e) {
    // handle exception here...
} 
```

# spring - 以编程方式访问由 property-placeholder 创建的属性

> ID：11415711
> 
> 赞同：41
> 
> 时间：2012-07-10T14:36:36.353
> 
> 标签：spring, properties

我正在使用`context:property-placeholder`. 我如何以**编程**方式访问它们（`@Value`不起作用 - 我在开发时不知道财产所有权）？

主要问题是我无法更改`applicationContext.xml`文件，因为它是由“父”框架设置的

附言。这很奇怪，但又`Environment.getProperty`回来了`null`

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-10T15:06:21.260

不，你不能。`PropertyPlaceholderConfigurer`是 a [`BeanFactoryPostProcessor`](http://static.springsource.org/spring/docs/current/javadoc-api/index.html?org/springframework/beans/factory/config/BeanFactoryPostProcessor.html)，它仅在 bean 创建期间“活着”。当它遇到一个`${property}`符号时，它会尝试根据其内部属性来解决它，但它不会使这些属性对容器可用。

也就是说：类似的问题一次又一次地出现，建议的解决方案通常[是子类`PropertyPlaceHolderConfigurer`](https://stackoverflow.com/a/6817902/342852)化并手动使属性可用于上下文。或[使用`PropertiesFactoryBean`](https://stackoverflow.com/a/5673678/342852)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-10T04:58:13.800

我们使用以下方法来访问我们的应用程序的属性

```
<util:properties id="appProperties" location="classpath:app-config.properties" />
<context:property-placeholder properties-ref="appProperties"/> 
```

然后，您可以使用限定符将属性自动装配到 bean 中。

```
@Component
public class PropertyAccessBean {

    private Properties properties;

    @Autowired
    @Qualifier("appProperties")
    public void setProperties(Properties properties) {
        this.properties = properties;
    }

    public void doSomething() {
        String property = properties.getProperty("code.version");
    }

} 
```

如果您有更复杂的属性，您仍然可以使用 ignore-resource-not-found 和 ignore-unresolvable。我们使用这种方法来外部化我们的一些应用程序设置。

```
 <util:properties id="appProperties" ignore-resource-not-found="true"
    location="classpath:build.properties,classpath:application.properties,
                            file:/data/override.properties"/>
 <context:property-placeholder ignore-unresolvable="true" properties-ref="appProperties"/> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-13T17:20:08.427

```
@Value 
```

注释适用于 Spring 的新版本（在 v3.2.2 上测试）它是如何完成的：

1.  在 spring 配置文件中映射你的属性文件

    ```
    <!--Import Info:
    xmlns:context="http://www.springframework.org/schema/context"
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.2.xsd-->

    <context:property-placeholder location="classpath:/app-config.properties" /> 
    ```

2.  在（根）您的源文件夹中创建 app-config.properties

    ```
    my.property=test
    my.property2=test2 
    ```

3.  创建控制器类

    ```
    @Controller
    public class XRDSBuilder
    {
        @Value("${my.property}")
        private String myProperty;

        public String getMyProperty() { return myProperty; }
    } 
    ```

Spring 会自动将 my.property 的内容映射到控制器内的变量

[映射到列表](https://stackoverflow.com/a/12580260/581401)

适当的价值：

```
my.list.property=test,test2,test3 
```

控制器类配置：

```
@Value("#{'${my.list.property}'.split(',')}")
private List<String> myListProperty; 
```

[高级映射](https://stackoverflow.com/a/28370899/581401)

```
@Component("PropertySplitter")
public class PropertySplitter {

    /**
     * Example: one.example.property = KEY1:VALUE1,KEY2:VALUE2
     */
    public Map<String, String> map(String property) {
        return this.map(property, ",");
    }

    /**
     * Example: one.example.property = KEY1:VALUE1.1,VALUE1.2;KEY2:VALUE2.1,VALUE2.2
     */
    public Map<String, List<String>> mapOfList(String property) {
        Map<String, String> map = this.map(property, ";");

        Map<String, List<String>> mapOfList = new HashMap<>();
        for (Entry<String, String> entry : map.entrySet()) {
            mapOfList.put(entry.getKey(), this.list(entry.getValue()));
        }

        return mapOfList;
    }

    /**
     * Example: one.example.property = VALUE1,VALUE2,VALUE3,VALUE4
     */
    public List<String> list(String property) {
        return this.list(property, ",");
    }

    /**
     * Example: one.example.property = VALUE1.1,VALUE1.2;VALUE2.1,VALUE2.2
     */
    public List<List<String>> groupedList(String property) {
        List<String> unGroupedList = this.list(property, ";");

        List<List<String>> groupedList = new ArrayList<>();
        for (String group : unGroupedList) {
            groupedList.add(this.list(group));
        }

        return groupedList;

    }

    private List<String> list(String property, String splitter) {
        return Splitter.on(splitter).omitEmptyStrings().trimResults().splitToList(property);
    }

    private Map<String, String> map(String property, String splitter) {
        return Splitter.on(splitter).omitEmptyStrings().trimResults().withKeyValueSeparator(":").split(property);
    }
} 
```

适当的价值：

```
my.complex.property=test1:value1,test2:value2 
```

控制器类：

```
@Value("#{PropertySplitter.map('${my.complex.property}')}")
Map<String, String> myComplexProperty; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-17T10:40:14.087

Spring 遵循 Inversion Of Control 方法，这意味着我们可以简单地将特定属性注入 POJO。但是在某些情况下，当您想直接从代码中访问按名称给出的属性时——有些人可能会将其视为反模式——这显然是正确的，但让我们专注于如何做到这一点。

下面`PropertiesAccessor`提供了对`Property Placeholder`容器特定内容加载和封装的属性的访问。它还缓存找到的属性，因为调用`AbstractBeanFactory#resolveEmbeddedValue(String)`并不便宜。

```
@Named 
public class PropertiesAccessor {

    private final AbstractBeanFactory beanFactory;

    private final Map<String,String> cache = new ConcurrentHashMap<>(); 

    @Inject 
    protected PropertiesAccessor(AbstractBeanFactory beanFactory) {
        this.beanFactory = beanFactory; 
    } 

    public  String getProperty(String key) { 
        if(cache.containsKey(key)){ 
            return cache.get(key); 
        } 

        String foundProp = null; 
        try { 
            foundProp = beanFactory.resolveEmbeddedValue("${" + key.trim() + "}");        
            cache.put(key,foundProp);        
        } catch (IllegalArgumentException ex) { 
           // ok - property was not found 
        } 

        return foundProp; 
    } 
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-08T08:45:36.753

在以下站点找到答案：

[http://forum.spring.io/forum/spring-projects/container/106180-programmatic-access-to-properties-defined-for-the-propertyplaceholderconfigurer](http://forum.spring.io/forum/spring-projects/container/106180-programmatic-access-to-properties-defined-for-the-propertyplaceholderconfigurer)

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer" id="propertyConfigurer">
<property name="properties" ref="props" />
</bean>
<bean id="props" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
  <property name="location" value="file:C:/CONFIG/settings.properties"/>
</bean> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-06T04:53:59.617

```
<util:properties id="prop" location="location of prop file" /> 
```

这返回 java.util.Properties 对象

在 JAVA 代码中

```
Properties prop = (Properties) context.getBean("prop"); 
```

现在您可以访问，

```
prop.getProperty("key"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-05T07:54:49.607

如果您需要扫描多个位置的属性，则此方法有效...

```
<bean id="yourProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
    <property name="locations">
        <array value-type="org.springframework.core.io.Resource">
            <value>classpath:yourProperties.properties</value>
            <value>file:../conf/yourProperties.properties</value>
            <value>file:conf/yourProperties.properties</value>
            <value>file:yourProperties.properties</value>
        </array>
    </property>
    <property name="ignoreResourceNotFound" value="true" />
</bean>
<context:property-placeholder properties-ref="yourProperties" ignore-unresolvable="true"/> 
```

然后在你的实际课程中......

```
@Autowired
Properties yourProperties; 
```

使用 Spring 5.1.4 测试

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-26T20:38:06.560

在将它们放入属性占位符之前为您的属性创建 bean，以使属性易于在代码中访问。

前任：

```
<bean id="configProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
    <property name="resources" value="classpath:META-INF/spring/config.properties" />
</bean>

<context:property-placeholder properties-ref="configProperties" ignore-unresolvable="true"/> 
```

代码：

```
@Autowired
private PropertiesFactoryBean configProperties; 
```

您还可以使用 @Resource(name="configProperties")

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-07-04T13:03:43.410

假设您在该“父”框架中定义的属性文件

```
<bean id="applicationProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
    <property name="location" value="classpath:main.properties" />
</bean> 
```

您可以通过这种方式使用@Value 注释：

```
@Value( value = "#{applicationProperties['my.app.property']}" )
private String myProperty; 
```

# ruby-on-rails - “产品”是 Rails 中 YAML 中的保留字吗？

> ID：11415712
> 
> 赞同：1
> 
> 时间：2012-07-10T14:36:36.667
> 
> 标签：ruby-on-rails, translation, yaml

这是一件非常离奇的事情。在我的 en 和 es.yml 本地化文件中，我有产品控制器的这个块：

```
products:
  word: Products
  show:
    exam: "Exam:" 
    related: "People who bought this, were also interested in..."
    buy_now: Buy Now 
```

现在，当网站是英文时，这 100% 有效，但是当它是使用 es.yml 语言环境的西班牙文时，我得到一个缺少翻译的错误！？我检查了产品键的间距、缩进、可能的重复等等，但什么也没有。当我尝试直接引用它（即`<%= t('products.show.exam') %>`）它仍然不起作用。

但是，如果我将密钥更改为“产品”以外的任何内容，然后直接引用它，它就可以正常工作。

有没有人见过这样的事情？我在 Rails 2.3.12 顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:51:17.187

在 YAML 文档的注释中，“产品”一词仅出现一次。因此，它不是 YAML 中的保留指令：

[http://yaml.org/spec/1.2/spec.html](http://yaml.org/spec/1.2/spec.html)

它也不在 Ruby 规范中，所以它不是 Ruby 保留字：

[http://ruby-doc.org/stdlib-1.9.3/](http://ruby-doc.org/stdlib-1.9.3/)

我还检查了 Ruby 文档的西班牙语版本，它只是将我引导至英文文档：

[http://www.ruby-lang.org/es/documentation/](http://www.ruby-lang.org/es/documentation/)

# javascript - 如何重定向到不同的控制器？

> ID：11415716
> 
> 赞同：0
> 
> 时间：2012-07-10T14:36:47.683
> 
> 标签：javascript, asp.net-mvc, model-view-controller

我在 ASP.MVC 中有一个应用程序。要求是我从人员列表中选择一个人并单击“信息”，它应该在该页面中加载该人的详细信息。我有 Info 控制器，如果我从其他控制器转到 Info 页面，一切正常。在页面中，我试图使其与 JavaScript 一起使用，但它似乎没有将我带到所需的页面，而是将我带到不同的控制器。

我有一个 ToDoList 控制器，在 .cshtml 中我有这个代码，点击 Info 链接。

```
 function DoInfo@(i.ToString())() {
         $("#sessionid").val("@Model.cSessionId[i]");
         alert("hey");
         $("#PageController").val(66);
         $("#formID").submit();
    } 
```

我去 ToDoList 控制器做这样的重定向

```
 if (viewModel.PageController == 66)  
        {
            pass = new PassingData();
            pass.personid = TSSessionService.ReadPersonId(viewModel.SessionId);
            TempData["pass"] = pass;

            return RedirectToAction("Index", "Info");
        } 
```

它永远不会去那里，而是去另一个控制器。我似乎无法找到它们是如何链接的，为什么它不返回到 Info 链接按钮所在的控制器，即返回 ToDoList 控制器。

如果不清楚，请告诉我，我会尝试再次解释，我会提供任何其他细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:30:06.103

我想我很困惑为什么您将其作为表单和 JavaScript 的组合来执行。您是否需要传递您未在上面发布的其他属性？如果您只是返回一个新视图，为什么需要使用 JavaScript 来执行此操作？

您在帖子中指出，当从列表中选择一个人时，您需要转到控制器并显示一个视图。这似乎相当简单，我想建议简化问题。

从这个开始：将您的链接更改为*不*使用表单或 JavaScript。只需将其设为链接即可。如果是文本，你可以使用`@Html.ActionLink()`甚至传入你需要的参数。

如果您不显示文本，只需`@Url.ActionLink()`在您包装元素的锚点的 href 属性中使用。这两者都允许您利用路由来确保构建正确的路径。

如果您尝试访问的控制器可以访问任何`TSSessionService`内容，那么您不需要通过`TempData["pass"]`您尝试通过的控制器，因此它也可以通过这种方式使其更清洁。

如果您*确实*需要提交更复杂的值集，我建议在 jQuery 中提供一个通用的 .click() 事件处理程序，它可以响应任何单击，并由一个通用类名绑定。您可以在链接中使用`data-val`属性并从`$(this).attr('data-val')`处理程序中读取以存储/获取其他重要信息。这使您可以更轻松地构建对象以 POST 到控制器。

希望这会有所帮助，但如果我遗漏了一个关键点，请更新上面的问题。

# xslt - 在 xslt 中多次出现相同的路径

> ID：11415723
> 
> 赞同：1
> 
> 时间：2012-07-10T14:37:11.157
> 
> 标签：xslt, xpath, xslt-1.0, xslt-2.0

我定义了几个变量，我`select="-------"`在其中。在那些路径的第一部分是相同的。有什么办法可以定义某种常量类型的东西，这样我就可以使用它而不必一遍又一遍地重新输入相同的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:08:51.283

那么你可以使用一个变量

```
<xsl:variable name="foo" select="/a/b/foo"/>
<xsl:variable name="bar" select="$foo/bar"/>
<xsl:variable name="foobar" select="$foo/foobar"/> 
```

代替

```
<xsl:variable name="bar" select="/a/b/foo/bar"/>
<xsl:variable name="foobar" select="/a/b/foo/foobar"/> 
```

但是由于您已经在使用看起来太明显的变量，所以也许我错过了问题所在。

# sql - 查询使用 GROUP BY 多列

> ID：11415726
> 
> 赞同：4
> 
> 时间：2012-07-10T14:37:17.700
> 
> 标签：sql, sql-server, group-by

我有一张桌子，里面全是患者/责任方/保险公司组合（例如，患者 Jim Doe 的责任方是拥有保险公司 Aetna Insurance 的父母 John Doe）。对于这些组合中的每一种，他们都有一份包含多次付款的合同。对于这个特定的表，我需要编写一个查询来查找在同一个月内有多个合同日期的任何父/RP/运营商组合。有没有办法做到这一点？

示例表：

```
ContPat | ContResp | ContIns | ContDue
------------------------------------------------------
53      | 13       | 27      | 2012-01-01 00:00:00.000
53      | 13       | 27      | 2012-02-01 00:00:00.000
53      | 15       | 27      | 2012-03-01 00:00:00.000
12      | 15       | 3       | 2011-05-01 00:00:00.000
12      | 15       | 3       | 2011-05-01 00:00:00.000
12      | 15       | 3       | 2011-06-01 00:00:00.000
12      | 15       | 3       | 2011-07-01 00:00:00.000
12      | 15       | 3       | 2011-08-01 00:00:00.000
12      | 15       | 3       | 2011-09-01 00:00:00.000 
```

在此示例中，我想为任何 Patient/RP/Carrier 组合生成所有重复月份的列表。12/15/3 组合将是此处返回的唯一行，但我正在使用数千种组合。

不确定这是否可以使用 a`GROUP BY`或类似功能。提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T14:39:52.530

如果您只关心同一日历月中的多个条目：

```
SELECT
    ContPat,
    ContResp,
    ContIns,
    MONTH(ContDue) as Mo,
    YEAR(ContDue) as Yr,
    COUNT(*) as 'Records'
FROM
    MyTable
GROUP BY
    ContPat,
    ContResp,
    ContIns,
    MONTH(ContDue),
    YEAR(ContDue)
HAVING
    COUNT(*) > 1 
```

这将向您显示任何患者/责任方/保险公司/日历月组合以及该月的多个记录。

# bash - 使用 AWK 组合三个文件的 Shell 脚本

> ID：11415731
> 
> 赞同：2
> 
> 时间：2012-07-10T14:37:27.557
> 
> 标签：bash, shell, awk

我有三个文件 G_P_map.txt、G_S_map.txt 和 S_P_map.txt。我必须使用 awk 组合这三个文件。示例内容如下——

（G_P_map.txt 包含）

```
test21g|A-CZ|1mos
test21g|A-CZ|2mos
 ... 
```

（G_S_map.txt 包含）

```
nwtestn5|A-CZ
nwtestn6|A-CZ
 ... 
```

（S_P_map.txt 包含）

```
3mos|nwtestn5
4mos|nwtestn6 
```

预期输出：

```
1mos, 3mos
2mos, 4mos 
```

这是我尝试过的代码。我能够将前两个结合起来，但我不能与第三个结合起来。

```
awk -F"|" 'NR==FNR {file1[$1]=$1; next} {$2=file[$1]; print}' G_S_map.txt S_P_map.txt 
```

非常感谢任何想法/帮助。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:43:16.247

我会看看[join](http://linux.die.net/man/1/join)和[cut](http://unixhelp.ed.ac.uk/CGI/man-cgi?cut)的组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:15:53.827

GNU AWK ( `gawk`) 4 有`BEGINFILE`并且`ENDFILE`非常适合这个。但是，该`gawk`手册包含一个功能，可为大多数版本的 AWK 提供此功能。

```
#!/usr/bin/awk

BEGIN {
    FS = "|"
}

function beginfile(ignoreme) {
    files++
}

function endfile(ignoreme) {
    # endfile() would be defined here if we were using it
}

FILENAME != _oldfilename \
{
    if (_oldfilename != "")
        endfile(_oldfilename)
    _oldfilename = FILENAME
    beginfile(FILENAME)
}

END   { endfile(FILENAME) }

files == 1 {    # save all the key, value pairs from file 1
    file1[$2] = $3
    next
}

files == 2 {    # save all the key, value pairs from file 2
    file2[$1] = $2
    next
}

files == 3 {    # perform the lookup and output
    print file1[file2[$2]], $1
}    

# Place the regular END block here, if needed. It would be in addition to the one above (there can be more than one) 
```

像这样调用脚本：

```
./scriptname G_P_map.txt G_S_map.txt S_P_map.txt 
```

# iphone - iPhone 应用程序：导航到标签栏场景

> ID：11415732
> 
> 赞同：0
> 
> 时间：2012-07-10T14:37:27.713
> 
> 标签：iphone, ios, navigation, uitabbarcontroller

我有一个可能很奇怪的导航场景的应用程序。我将尝试解释：

> 1）第一个场景：从列表中选择一个可用的项目
> 
> > 1.1）一旦选择，您导航到一个选项卡视图，允许您查看/编辑各种属性
> 
> 2）如果所需的项目不可用，您可以创建一个新项目（通过选择“+”栏按钮）导航到备用场景
> 
> > 2.1）创建项目可能需要多个场景，所有场景都简单地压入堆栈以允许用户返回，选择不同的选项等。
> > 
> > 2.2）一旦所有场景都显示完毕并收集了所有属性，新的“项目”将被创建并保存。
> > 
> > 2.3）现在，我想自动表现得好像用户从一开始就选择了这个项目，也就是说，我想从堆栈中弹出所有以前的视图并直接导航到选项卡中（步骤 1.1）。

这有意义吗？容易做到吗？有没有更好的方法来解决这个问题？我正在使用带有情节提要的 xCode 4.2。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:36:03.480

如果你想要 TabBar 上的 (+) 按钮，你应该继承 UITabBar: Fo ex。TabBarPlus 并在情节提要中设置此类。

但更容易在导航栏上放置 (+) 按钮。

iphone 最多显示 5 个 tabsart，ipad 最多显示 8 个。如果那里 > 选项卡的最后一个是“更多”选项卡，则显示 tableview 中其他浴缸的列表。我想在标签栏上显示更多标签，然后你应该继承 UITabBar :)

如果您想通过导航栏上的后退按钮切换使用 TabBar 按钮引用的 beetwing 视图，您必须在代码中创建堆栈并隐藏导航栏的后退按钮并使用导航栏的左侧按钮。

其他导航可以在故事板中轻松完成

# jquery - 如何提取 json 数据以填充清单下拉插件

> ID：11415743
> 
> 赞同：0
> 
> 时间：2012-07-10T14:38:06.657
> 
> 标签：jquery, json

我正在使用 jquery 复选框下拉插件进行多项选择，其中包含以下格式的 json 数据：

```
{"message":[{"id":"xyz","name":"USERA"},{"id":"abc","name":"USERB"}]} 
```

我试图用 json 数据填充下拉列表，但我未能成功。任何帮助表示赞赏。

请在下面找到我用来填充下拉列表的方法：

```
$.ajax({type : "GET",
        url : "",
        data : "",
        dataType : "json",
        success : function(data) {

            var Options = '';
            $.each($(data.message), function() {

                Options +='<option value="'+this.name+'">'+this.name+'</option>'
            });
            $("#dropdown1").append(Options);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:41:48.867

This line -

```
$.each($(data.message), function() { ... } 
```

Should be something like this -

```
$.each(data.message), function(index,elem) { ... }); 
```

Then the line that you use to concatenate the HTML should appear like this -

```
Options +='<option value="'+elem.name+'">'+elem.name+'</option>'; 
```

Also you were missing a semicolon on the line with `Options +=`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:15:30.443

在我的代码中发现 wat 出错了.. dropdownchecklist() 必须在附加数据后立即调用，例如

```
success : function(data) {
     var Options = '';
     $.each($(data.message), function() {
         Options +='<option value="'+this.name+'">'+this.name+'</option>'
     });
     $("#dropdown1").append(Options);
     $("#dropdown1").dropdownchecklist();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:47:12.680

尝试这个：

```
$.ajax({type : "GET",
        url : "",
        data : "",
        dataType : "json",
        success : function(data) {

            $.each($(data.message), function(index,val) {

               $('#dropdown1').append($("<option></option>").val(val.name).html(val.name));
            });

        }
    }); 
```

# php - 在Linux上的多线程模式下PHP群是安全的吗？

> ID：11415746
> 
> 赞同：3
> 
> 时间：2012-07-10T14:38:11.753
> 
> 标签：php, linux, multithreading, apache, flock

PHP 群文档说它在像 ISAPI 这样的一些多线程服务器上是不安全的，因为锁是一个进程范围的东西，所以如果线程 1 上的一个 php 实例锁定了一个文件，线程 2 上的另一个 php 实例也可能会锁定它，因为从操作系统的来看同一个进程已经拥有了锁。

现在，PHP 文档说这只是某些操作系统上的问题，并以 ISAPI 为例。我的问题：这是否也可以在多线程模式下的 linux/apache 上发生，或者在这种情况下羊群安全吗？

# wordpress - 将现有域指向另一台服务器上的 wordpress MU 站点

> ID：11415749
> 
> 赞同：1
> 
> 时间：2012-07-10T14:38:20.410
> 
> 标签：wordpress, mapping, dns, external, mu

我们如何将现有域指向另一台服务器上的 wordpress MU 站点？这是设置。

1.  服务器 A 已安装 WPMU，并带有子文件夹的网络设置。www.wpmuinstall.com/site1
2.  服务器 B 上托管了一个域.. www.clientdomain.com
3.  我们想将 www.clientdomain.com 从 ServerB 指向 ServerA www.wpmuinstall.com/site123

如果上述不可行，我们可以切换到 site1.wpmuinstall.com 但是我们如何将这个 site1.wpmuinstall.com 指向 siteid1 ？我们安装了 WordPress MU 域映射插件，但 WPMU 仍设置为子文件夹。

请告知如何完成指向我们 wpmu 站点的客户端域。理想情况下，我们希望设置类似 wordpress.com 的自定义域指向子站点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:40:04.147

如果您正在使用路径，请安装[Wordpress 域映射插件](http://wordpress.org/extend/plugins/wordpress-mu-domain-mapping/)并按照[本文](http://ottopress.com/2010/wordpress-3-0-multisite-domain-mapping-tutorial/)中描述的步骤进行操作。它将允许您将域映射到服务器中的路径。

如果您使用子域，则：

1.  将所需的子域添加到站点。
2.  将 www.clientdomain.com 指向您的 wordpress 服务器。
3.  在您的服务器上，添加域 www.clientdomain.com 并使其指向您的 wordpress 安装。
4.  等待 DNS 更改生效。
5.  您的网站应该已准备就绪。

# javascript - 在 JavaScript 中启用和禁用超链接

> ID：11415750
> 
> 赞同：0
> 
> 时间：2012-07-10T14:38:25.543
> 
> 标签：javascript, html, hyperlink, href

我正在做一个项目，我需要暂时禁用所有超链接，然后在我的弹出 div 消失后再次启用它们。我可以使用我写的这个函数成功禁用所有链接：

```
 function disableHyperlinks(){
        link_targets = Array();
        var anchors = document.getElementsByTagName("a");
        for(var i = 0; i < anchors.length; i++){
            link_targets.push(anchors[i].href);
            anchors[i].href= "#";
        }
     } 
```

它还保存了所有 URL，以便以后可以使用*此*函数将它们放回去：

```
 function enableHyperlinks(){
        var anchors = document.getElementsByTagName("a");
        for(var i = 0; i < anchors.length; i++){
            anchors[i].href= link_targets[i];
        }
    } 
```

上面的代码似乎工作得很好，它删除了所有链接，然后将它们全部放回没有任何问题，但问题是如果我在单击链接后运行“启用”代码，它几乎就像 javascript正在将链接设置回原始目的地，*然后*注册点击。因此，尽管以这种方式被“禁用”，链接仍然最终离开页面。

[问题在这里](http://www.fullofepicwin.com/likeler/StackOverflowCopy/imsafe/)演示

单击带有白色背景的红色“L”以启用我为选择所做的 javascript，您会注意到将鼠标移到的任何内容都会出现蓝色虚线边框，我需要能够“选择”网页的某些部分如果还单击了链接，则无需重定向到另一个页面..知道如何正确执行此操作吗？

（请注意我试图避免使用 JQuery）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:40:51.827

在 onClick 监听器上工作：

```
var areEnabled = false;
function toggleLinks(){
    var anchors = document.getElementsByTagName('a');
    for(var i=0; i < anchors.length; i++)
        anchors[i].onclick = (areEnabled) ? null : function(e){ return false };
    areEnabled = !areEnabled;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:00:33.917

而不是搜索许多链接并禁用它们（顺便说一句，这不会帮助您对抗其他可点击对象），您可以创建另一个 invisible `div`，就在您的弹出窗口下方`z-index`，它将覆盖整个页面并捕获所有点击而不是下面的元素。您甚至可以将其设为半透明而不是完全不可见，以达到提醒用户“低级”已禁用的视觉效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T13:16:15.410

我终于能够通过操作每个超链接的 onclick 属性来解决我自己的问题，然后将其设置回原来的状态。bokonic 响应的唯一问题是 onclick 属性设置为 null 以“重新启用”该链接，这将禁用该链接之前具有的任何 javascript 功能。

```
var onclickEvents;

function disableHyperlinks(){
    onclickEvents = Array();
    var anchors = document.getElementsByTagName("a");
    for(var i = 0; i < anchors.length; i++){
        onclickEvents.push(anchors[i].onclick);
        anchors[i].onclick=function(){return false;};
    }
}

function enableHyperlinks(){
    var anchors = document.getElementsByTagName("a");
    for(var i = 0; i < anchors.length; i++){
        anchors[i].onclick = onclickEvents[i];
    }
} 
```

# ruby-on-rails - 在rails中初始化朋友模型

> ID：11415757
> 
> 赞同：0
> 
> 时间：2012-07-10T14:38:32.913
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我构建了一个应用程序，用户在其中登录并抛出 facebook 帐户，然后我会获取他们的朋友和他们的教育历史。它是这样的：

用户登录并转到 SessionsController#Create：

```
class SessionsController < ApplicationController
  def create
    user = User.from_omniauth(env['omniauth.auth'])
  end
end 
```

SessionsController 方法 create 调用 User 模型中的 .from_omniauth 方法：

```
def self.from_omniauth(auth) 
    where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
      user.provider = auth["provider"]
      user.uid = auth["uid"]
      ...more code... 
      user.save!
      user.add_friends
    end
end 
```

.from_omniauth 方法调用了 User 模型中的 add_friends 方法：

```
def add_friends
    friends_data =  facebook.get_connections("me", "friends",   :fields => "name, id, education")
    friends_data.each do |hash|
      friend.name = hash["name"]
      friend.uid = hash["id"]

      if hash["education"]
        hash["education"].each do |e|
          if e["type"] == "High School"
            friend.highschool_name = e["school"]["name"] if (!hash["education"].blank? && !e["school"].blank?)

          elsif e["type"] == "Graduate School"
            friend.graduateschool_name = e["school"]["name"] if (!hash["education"].blank? && !e["school"].blank?)
          end
        end
      end
      friend.save!
      friend
    end
  end 
```

我收到此错误：

```
NameError in SessionsController#create
undefined local variable or method `friend' for #<User:0x007fad11d50eb0> 
```

而且我知道这意味着我必须初始化变量朋友，但我不知道该怎么做。任何想法，这将非常有帮助！=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:41:54.393

`friend = Friend.new`在循环中使用：

```
friends_data.each do |hash|
    friend = Friend.new   # <-----------
    friend.name = hash["name"]
    friend.uid = hash["id"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:50:49.663

首先你需要 Friend 模型：

```
rails g model Friend user_id:integer uid:string name:string highschool_name:string graduateschool_name:string
rake db:migrate 
```

在朋友类中放入belongs_to：

```
class Friend < ActiveRecord::Base
   belongs_to :user
end 
```

在用户类中放入 has_many：

```
class User < ActiveRecord::Base
   has_many :friends
end 
```

现在您的`add_friend` 方法应该如下所示：

```
def add_friends
    friends_data =  facebook.get_connections("me", "friends",   :fields => "name, id, education")
    friends_data.map do |hash|
      friend=Friend.new
      friend.name = hash["name"]
      friend.uid = hash["id"]
      friend.user_id = self.id

      if hash["education"]
        hash["education"].each do |e|
          next if e["school"].blank?
          if e["type"] == "High School"
            friend.highschool_name = e["school"]["name"]
          elsif e["type"] == "Graduate School"
            friend.graduateschool_name = e["school"]["name"]
          end
        end
      end
      friend.save!
      friend
    end
  end 
```

# apache-flex - AdvancedDataGrid 通过 Dataprovider 添加列

> ID：11415759
> 
> 赞同：0
> 
> 时间：2012-07-10T14:38:36.703
> 
> 标签：apache-flex, advanceddatagrid

我对 Flex 中的 AdvancedDataGrid 有疑问。我有一个带有可绑定 ArrayCollection 作为 DataProvider 的 AdvancedDataGrid。当我设置 ArrayCollection（通过单击按钮 1）时，AdvancedDataGrid 将代表 4 列。

之后我单击按钮 2。在这种情况下，AdvancedDataGrid 仍然显示 4 列而不是预期的 3 列。

方案 2

首先单击 Button2 -> AdvancedDataGrid 显示 3 列单击 Button1 -> AdvancedDataGrid 仍显示 3 列而不是预期的 4 列

如何告诉 AdvancedDataGrid 调整列数？

片段：

```
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" minWidth="955" minHeight="600" creationComplete="application1_creationCompleteHandler(event)">
    <mx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.events.FlexEvent;
            [Bindable]
            private var dataProv:ArrayCollection;

            protected function button1_clickHandler(event:MouseEvent):void {
                dataProv = new ArrayCollection([
                    {country:"USA", year2004:3.5, year2005:4.2, year2006:3.7},
                    {country:"UK", year2004:1.7, year2005:3.1, year2006:3.6},
                    {country:"Canada", year2004:2.8, year2005:2.9, year2006:3.4},
                    {country:"Japan", year2004:2.6, year2005:2.3, year2006:2.8},
                    {country:"France", year2004:1.4, year2005:2.1, year2006:2.6},
                    {country:"Brazil", year2004:2.6, year2005:4.9, year2006:4.4},
                    {country:"Russia", year2004:6.4, year2005:7.2, year2006:6.7},
                    {country:"India", year2004:8.0, year2005:7.1, year2006:6.6},
                    {country:"China", year2004:9.9, year2005:10.1, year2006:10.6}
                ]); 
                adg.validateNow();
                adg.dataProvider.refresh();
            }

            protected function button2_clickHandler(event:MouseEvent):void{
                dataProv = new ArrayCollection([
                    {country:"USA", year2004:3.5, year2005:4.2},
                    {country:"UK", year2004:1.7, year2005:3.1},
                    {country:"Canada", year2004:2.8, year2005:2.9},
                    {country:"Japan", year2004:2.6, year2005:2.3},
                    {country:"France", year2004:1.4, year2005:2.1},
                    {country:"Brazil", year2004:2.6, year2005:4.9},
                    {country:"Russia", year2004:6.4, year2005:7.2},
                    {country:"India", year2004:8.0, year2005:7.1},
                    {country:"China", year2004:9.9, year2005:10.1}
                ]); 
                adg.validateNow();
                adg.dataProvider.refresh();
            }

        ]]>
    </mx:Script>

    <mx:HBox width="100%" height="100%">
        <mx:AdvancedDataGrid
            id="adg"
            width="100%"
            height="100%"
            dataProvider="{dataProv}"/>
        <mx:Button label="change" click="button1_clickHandler(event)"/>
        <mx:Button label="changeBack" click="button2_clickHandler(event)"/>
    </mx:HBox>

</mx:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:35:42.460

您需要扩展 AdvancedDataGrid 类并覆盖 collectionChangeHandler。您需要将受保护的 var generatedColumns 设置为 true，以便动态列代码执行多次。

```
override protected function collectionChangeHandler(event:Event):void
{
    generatedColumns = true;
    super.collectionChangeHandler(event);
} 
```

# php - 重新分配 $this 时的有趣行为

> ID：11415760
> 
> 赞同：2
> 
> 时间：2012-07-10T14:38:37.087
> 
> 标签：php, class, this

我改编了一个非常简单的`View`类来传递变量，以便`Controller`我可以直接调用变量，例如`View``View`

```
<?php echo $name; ?> 
```

并不是

```
<?php echo $this->name; ?> 
```

所有视图变量都存储在一个名为 vars 的关联数组中，例如`$vars['name'] = "test"`，并具有`__set`分配变量的函数设置，例如

```
$v = new View;
$v->name="test";
$v->out(); 
```

因此，在`out()`传递变量并包含我添加的视图 HTML 的函数中：

```
 foreach($this->vars as $key=>$val) {
      $$key=$val;
    }
include $this->view_file; 
```

然后我测试了如果我`$this`在模板中使用并添加一个相应的变量会发生什么

```
$v->this = "test_this"; 
```

我的假设是代码将失败，因为`$this`无法重新分配，或者即使重新分配 -[请参阅此处](http://www.php.net/manual/en/language.variables.basics.php#107080)- 代码将失败，因为`$this`已重新分配所以

```
include $this->view_file; 
```

行不通！

相反，它奏效了。 ，当使用或等于`$this`直接调用但仍指向原始值时！`echo $this;``var_dump($this);``"test_this"``$this->view_file`

**怎么会这样？**

然后我重新测试使用`extract($this->vars, EXTR_OVERWRITE)`并`$this`没有被触动！

一般来说，将变量传递给视图并避免函数冲突的正确方法是什么

```
function out($view, $toString = false)
{
    extract($this->vars);
    include $view;
} 
```

并且 vars 可能有一个名为 view 或“this”的 var，或者模板可能会使用该`$view`var。

1.  别担心，只要确保不要分配一个名为 view 的 var。
2.  在函数中使用长变量名`out()`，例如`$longVarNameSoThatThereWillNotBeCollisions`.
3.  将函数所需的所有变量分配给`$this->temp`：`$this->temp['view']`然后`unset($view)`- 以及`$this`- 谁在他们的正确头脑中会使用一个名为`$this`in的变量`View`！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:29:37.070

为了解释为什么您仍然能够访问对象属性，即使您已经设法绕过 reassigning 的保护`$this`，您必须查看为编译脚本生成的操作码。

使用操作码访问对象属性`FETCH_OBJ_R`。

当您编写诸如

```
$myObject = new testClass;
$myObject->property 
```

编译后的代码`FETCH_OBJ_R`使用**两个**参数生成。第一个是包含对象的变量，第二个是属性的名称。

如果您使用 Vulcan 反汇编程序，输出可能如下所示：

```
FETCH_OBJ_R                                      $1      !1, 'property' 
```

`$1`是存储返回值的位置，`!1`是包含对象的变量。

但是，如果您使用`$this`生成的输出访问该属性，则略有不同。

```
FETCH_OBJ_R                                      $1      'property' 
```

带有一个参数的操作码将属性查找解析为从中调用它的对象。

因此，您的问题的答案`$this->property`在编译时已解决。即使你破产了`$this`，位置`property`也已经确定了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:55:44.457

这让我有点感兴趣，看来你是对的，使用变量变量赋值给`$this`.

正如你所说：

```
<?php
$var = 'this';
$$var = 'hello';

echo $this; 
```

有效，而

```
<?php
$this = 'hello';

echo $this; 
```

没有。

也许在 bugs.php.net 上报告，看看是否有官方答案？

现有成员`$this`仍在工作而实际价值`$this`完全不同的事实绝对不应该发生，并且必须是某种形式的核心问题。我唯一能想到的是，它以某种方式`$this`被用作魔术上下文变量（当然这并不奇怪，毕竟是 PHP！），而不是真正的“真实”变量。从变量变量赋值的错误（这显然**不**`$this`应该发生！）允许向开发人员显示一个虚假变量的事实。

魔法测试：

```
<?php

class ThisTest {
    public function SetAndUseThis() {
        $var = 'this';
        $$var = 'that';
        var_dump($this);
        var_dump($this->variable);
        var_dump($this->AnotherMethod());
    }

    public $variable = 'i am a variable';

    public function AnotherMethod()
    {
        return 9.0;
    }
}

$inst = new ThisTest();
$inst->SetAndUseThis(); 
```

结果是：

```
string(4) "that" string(15) "i am a variable" float(9) 
```

# c++ - 使用 OpenCV 将小图像平铺成更大的图像

> ID：11415761
> 
> 赞同：4
> 
> 时间：2012-07-10T14:38:37.373
> 
> 标签：c++, opencv, image-processing

假设我有一个 200x200 像素的图像。我想要一个 800x800 像素的版本，我基本上复制 200x200 图像并填充 800x800 图像（将较小的图像平铺到较大的图像中）。

你将如何在openCV中做到这一点？看起来很简单，但我不知道如何创建另一个与图案类型相同但尺寸更大（画布尺寸）的 cv::Mat 或者是否可以获取原始的 200x200 像素图像和增加它的行和列然后只需使用循环将角粘贴到图像的其余部分。

我正在使用openCV 2.3顺便说一句。我已经对具有固定尺寸的图像进行了相当多的处理，但是在增加矩阵的尺寸时我有点无能为力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-03-08T21:33:25.503

您可以使用[重复](https://techtutorialsx.com/2020/02/23/python-opencv-image-tiling/)功能：

```
def tile_image(tile, height, width):      
  x_count = int(width / tile.shape[0]) + 1
  y_count = int(height / tile.shape[1]) + 1

  tiled = np.tile(tile, (y_count, x_count, 1))

  return tiled[0:height, 0:width] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T23:39:26.913

仅供参考-@karlphillip 回复中的博客，基本思想是使用`cvSetImageROI`and `cvResetImageROI`。两者都是 C API。

在以后的版本中，例如 v2.4 和 3.x，可以`Rect`使用所需的位置和尺寸定义 a 并将所需的部分称为`img(rect)`。

C API 中的示例（功能样式）：

```
cvSetImageROI(new_img, cvRect(tlx, tly, width, height);
cvCopy(old_img, new_img);
cvResetImageROI(new_img); 
```

在使用类的 C++ API 中：

```
Mat roi(new_img, Rect(tlx, tly, width, height));
roi = old_img;    // or old_img.clone() 
```

C ++中的另一种方式（复制图像）：

```
old_img.copyTo(new_img(Rect(tlx, tly, width, height))) 
```

# android - 将字符串解析为 JSONObject 时出错 - Android

> ID：11415770
> 
> 赞同：0
> 
> 时间：2012-07-10T14:39:03.893
> 
> 标签：android, json, string

嗨，我在获取由 JSONobject 组成的字符串并将其转换为 JSON 时遇到错误。有时有效，有时无效……我不知道为什么。

这是我的代码。我试图捕捉一个帖子请愿的回应：

```
public class DBupload {

public JSONObject UploaData(ArrayList<NameValuePair> nvp, String url) {
    try {

        DefaultHttpClient client = new DefaultHttpClient();
        HttpPost hpost = new HttpPost(url);
        hpost.setEntity(new UrlEncodedFormEntity(nvp));
        HttpResponse response = client.execute(hpost);

        HttpEntity entity = response.getEntity();
        InputStream is = entity.getContent();

        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        String result = sb.toString();

        JSONObject jobject = new JSONObject(result);

        return jobject;

    } catch (Exception ex) {
        ex.printStackTrace();
        return null;
    }

} 
```

}

然后返回 jobject：

```
JSONObject json2 = upload.UploaData(nvp,
                    "http://anonyme.mariomontes.es/geolocation/insert");

            try {
                if (json2.getInt("error") == 1) {
                    Log.i("************",
                            "You have an error while uploading Location");
                } 
```

它给了我这些错误：

```
> 07-10 16:33:34.225: W/System.err(13028): org.json.JSONException: Value Class of type java.lang.String cannot be converted to JSONObject
07-10 16:33:34.230: W/System.err(13028):    at org.json.JSON.typeMismatch(JSON.java:111)
07-10 16:33:34.230: W/System.err(13028):    at org.json.JSONObject.<init>(JSONObject.java:158)
07-10 16:33:34.230: W/System.err(13028):    at org.json.JSONObject.<init>(JSONObject.java:171)
07-10 16:33:34.230: W/System.err(13028):    at com.background.DBupload.UploaData(DBupload.java:39)
07-10 16:33:34.230: W/System.err(13028):    at com.extract.MyLocation.mostrarPosicion(MyLocation.java:107)
07-10 16:33:34.230: W/System.err(13028):    at com.extract.MyLocation$1.onLocationChanged(MyLocation.java:59)
07-10 16:33:34.230: W/System.err(13028):    at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:227)
07-10 16:33:34.230: W/System.err(13028):    at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:160)
07-10 16:33:34.230: W/System.err(13028):    at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:176)
07-10 16:33:34.230: W/System.err(13028):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-10 16:33:34.230: W/System.err(13028):    at android.os.Looper.loop(Looper.java:137)
07-10 16:33:34.230: W/System.err(13028):    at android.app.ActivityThread.main(ActivityThread.java:4507)
07-10 16:33:34.230: W/System.err(13028):    at java.lang.reflect.Method.invokeNative(Native Method)
07-10 16:33:34.230: W/System.err(13028):    at java.lang.reflect.Method.invoke(Method.java:511)
07-10 16:33:34.230: W/System.err(13028):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
07-10 16:33:34.230: W/System.err(13028):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
07-10 16:33:34.230: W/System.err(13028):    at dalvik.system.NativeStart.main(Native Method)
07-10 16:33:34.230: D/AndroidRuntime(13028): Shutting down VM
07-10 16:33:34.230: W/dalvikvm(13028): threadid=1: thread exiting with uncaught exception (group=0x40c341f8)
07-10 16:33:34.235: E/AndroidRuntime(13028): FATAL EXCEPTION: main
07-10 16:33:34.235: E/AndroidRuntime(13028): java.lang.NullPointerException
07-10 16:33:34.235: E/AndroidRuntime(13028):    at com.extract.MyLocation.mostrarPosicion(MyLocation.java:111)
07-10 16:33:34.235: E/AndroidRuntime(13028):    at com.extract.MyLocation$1.onLocationChanged(MyLocation.java:59)
07-10 16:33:34.235: E/AndroidRuntime(13028):    at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:227)
07-10 16:33:34.235: E/AndroidRuntime(13028):    at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:160)
07-10 16:33:34.235: E/AndroidRuntime(13028):    at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:176)
07-10 16:33:34.235: E/AndroidRuntime(13028):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-10 16:33:34.235: E/AndroidRuntime(13028):    at android.os.Looper.loop(Looper.java:137)
07-10 16:33:34.235: E/AndroidRuntime(13028):    at android.app.ActivityThread.main(ActivityThread.java:4507)
07-10 16:33:34.235: E/AndroidRuntime(13028):    at java.lang.reflect.Method.invokeNative(Native Method)
07-10 16:33:34.235: E/AndroidRuntime(13028):    at java.lang.reflect.Method.invoke(Method.java:511)
07-10 16:33:34.235: E/AndroidRuntime(13028):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
07-10 16:33:34.235: E/AndroidRuntime(13028):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
07-10 16:33:34.235: E/AndroidRuntime(13028):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:46:27.620

```
<exported from="comments">
    I'd recommend you do an output of the result-variable 
    to see what it actually is when it sparks an error.
</exported> 
```

# java - 一个按钮和两个不同的视图

> ID：11415775
> 
> 赞同：0
> 
> 时间：2012-07-10T14:39:20.633
> 
> 标签：java, model-view-controller, view

我正在构建应用 MVC 模式的应用程序。按照本指南[mvc 指南](http://www.austintek.com/mvc/)，我将制作一个由按钮组成的应用程序。当我按下按钮时，我会出现另一个视图，当我按下按钮时，我会出现以前的视图。我该怎么做？一些建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:41:17.990

Well **Button 将在此处充当 Controller** ......

如果你想**总是一次又一次地显示相同的视图，通过按下按钮，使用单例原则**

如果没有，**您可以从 ActionListener 的 onClick() 方法中再次初始化一个新视图...**

**编辑：**

```
button.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e)
            {
                //Execute when button is pressed

                     new Frame();           // Creates a new frame
            }
        }); 
```

# excel - 是否可以直接从公式行格式化单元格颜色？

> ID：11415779
> 
> 赞同：0
> 
> 时间：2012-07-10T14:39:41.313
> 
> 标签：excel

我知道如何使用条件格式和 VBA 来做到这一点，但我很好奇它是否可以直接从公式行中完成。例如，我在 H 列中有一个字段，它要么是**"Valid"**要么是**"Invalid"**，并且基于此想将行着色为红色或绿色（不使用条件格式/VBA）

我想在另一个单元格中添加一些东西来实现这个效果......

```
If(H2 = "Valid", A2:H2(Color=Green), A2:H2Color=Red)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:44:12.600

> **这是不可能的。**

您需要使用条件格式或 VBA。

# c# - 3 层架构 Obj 问题

> ID：11415787
> 
> 赞同：0
> 
> 时间：2012-07-10T14:39:52.910
> 
> 标签：c#

我对 3 层拱门很陌生。我一直在 SO 上阅读有关此主题的问题，并且用户响应此页面通过一个简单的示例快速帮助了我很多。[http://www.beansoftware.com/ASP.NET-Tutorials/Three-Tier-Architecture.aspx](http://www.beansoftware.com/ASP.NET-Tutorials/Three-Tier-Architecture.aspx)

当它解释业务层和 DAL 时，该示例使用**objdt**但我没有看到它在任何地方初始化。它从 DAL 调用一个方法，所以我假设它是一个 DAL 对象，但同样，我看不到初始化。然后同一个对象调用示例中未描述的 SQL 函数，但我认为它应该放在 DAL 类中。

我错了还是这个例子遗漏了什么？知道那个 obj 是什么就可以消除我的疑虑。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:46:33.017

如果你看一下源代码，你会发现那`objdt`是 class `clsStudentData`。它在内部被初始化`clsStudentInfo`

这是片段：（BusinessLayer.cs）。

```
public class clsStudentInfo
    {       
        clsStudentData objdt=new clsStudentData();
            ...... 
```

网页上的示例只是没有显示整个类`clsStudentInfo`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:50:37.603

业务层：

```
clsStudentData objdt=new clsStudentData(); 
```

数据层：

```
Create_Connection objdt=new Create_Connection(); 
```

# android - 使用应用程序安装内容提供程序

> ID：11415788
> 
> 赞同：0
> 
> 时间：2012-07-10T14:39:53.863
> 
> 标签：android

我有在多个应用程序中使用的内容提供程序。我需要将此内容提供程序与使用它的应用程序之一一起安装。

我试过：make `CP by the library`+
添加到其中一个应用程序的清单中：

```
<application >
        <provider
            android:authorities="com.app.test"
            android:name="TestProvider" >
        </provider>
    </application>
enter code here 
```

但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:14:13.463

用于建议的 QueryProvider 示例

```
import android.content.SearchRecentSuggestionsProvider;

public class QueryProvider extends SearchRecentSuggestionsProvider {
    public final static String AUTHORITY = "your_package.QueryProvider";
    public final static int MODE = DATABASE_MODE_QUERIES | DATABASE_MODE_2LINES;

    public QueryProvider() {
        setupSuggestions(AUTHORITY, MODE);
    }
} 
```

在 Manifest.xml 中（在应用程序标记内）

```
<provider 
     android:name="QueryProvider"
     android:authorities="your_package.QueryProvider" 
/> 
```

# android - Proper way to find if a paired Android Bluetooth device is in range?

> ID：11415791
> 
> 赞同：16
> 
> 时间：2012-07-10T14:40:03.380
> 
> 标签：android, bluetooth

I'm suppose to write an application that will act as the bluetooth client. What I'm trying to do is figure out is what would be the best way to figure out if the specific device that I'm supporting is in range without attempting to do a BluetoothDevice.connect() on it all of the time and failing if it's not in range. Here we're assuming that the device as already been paired.

I'm afraid that it would be bad practice to attempt to connect to a specific device all of the time until it's in range. Seems to me that it would be bad for the battery.

Would anyone know of any methods or concepts that should be used to accomplish what I'm trying to do?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T11:09:23.273

好的，所以我从你的问题中了解到，你想得到你配对的设备的名称，如果它在范围内？

所以这里是解决方案： -

1.  创建一个名为 DeviceDetails 的类：

类 DeviceDetails{ 公共字符串名称；公共字符串地址；公共蓝牙设备远程设备；}

1.  您需要按照[此处](http://developer.android.com/guide/topics/connectivity/bluetooth.html)的说明连接和配对您的设备，一旦完成并建立连接，请创建一个 DeviceDetails 对象。

2.  `DeviceDetails selectedDevice;`如果您有一个自定义适配器来显示设备列表，则将视图中的位置传递给 selectedDevice 引用。例子 ：-`selectedDevice = adapter.getItem(pos);`

3.  现在您有了已选择配对的 SelectedDevice 对象，因此您可以将其地址和名称保存在

    喜好。

    ```
    Example:- 
    savePairedDeviceInfo(selectedDevice.name, selectedDevice.address);
        public void savePairedDeviceInfo(String name, String addr)
            {
                if(name != null && !name.equalsIgnoreCase(""))
                    editor.putString(PNAME_OF_DEVICE, name);

                if(addr != null && !addr.equalsIgnoreCase(""))
                    editor.putString(MAC_ADDRESS_OF_DEVICE, addr);

                editor.commit();
            } 
    ```

4.  现在，下次当您想要检查配对设置是否已完成或不通过从首选项中获取值来检查设备的名称和地址时。使用检查（如果条件）返回 true 配对的旧设备是相同的或其他的。

5.  如果配对设备在范围内，您将获得相同的值，否则它将尝试与其他设备配对。

如果您从我的解释中理解，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-10T09:22:14.227

您可以按照以下方式：

1.  从蓝牙适配器获取配对设备列表
2.  开始发现
3.  当找到设备时，假设设备 A，您可以检查设备 A 是否在配对设备列表中。如果设备 A 是配对设备之一，则表示它是范围内配对的可用设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-25T12:56:21.080

如果发现新设备，则启动设备发现并检查 BluetoothDevice BONDED 状态。

```
val isBonded = discoveredDevice.bondState == BluetoothDevice.BOND_BONDED 
```

# android - Best NFC SDK for ACR122U and ACR1222L

> ID：11415797
> 
> 赞同：5
> 
> 时间：2012-07-10T14:40:22.450
> 
> 标签：android, sdk, nfc

I bought both readers without the SDK CD-ROM by mistake and now I cannot find any other options to develop NFC P2P applications. The vendor doesn't offer the SDK separately nor read my e-mails begging for a separate purchase of the SDK and do not offer it for download on their website.

Already tried gototags SDK and it doesn't support android protocols yet. Also, I've tried to contact TinyNFC team and they didn't answer my e-mails aswell...

I think I'm out of options. Do any of you have an alternative to the ACS SDK?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-18T07:06:08.813

我不知道哪个最好。但我在这个站点找到了 ACR122U 的 SDK

[http://acr122u-nfc-reader-sdk.software.informer.com/download/](http://acr122u-nfc-reader-sdk.software.informer.com/download/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-17T21:20:36.870

磁盘上有一个与 ACR122U 套件配套的 SDK。[在这里](https://yadi.sk/d/qlTYH_8x6YHJ8A)查看

# wpf - Swf file cannot load another swf files (with relative paths) in WPF AxShockwaveFlash control (hosted in WindowsFormsHost control)

> ID：11415798
> 
> 赞同：0
> 
> 时间：2012-07-10T14:40:27.523
> 
> 标签：wpf, flash

I am using an AxShockwaveFlash control in WPF (hosted in WindowsFormsHost).

I have a player.swf file which uses external swf files from a folder (the path of the folder is relative to the player.swf file and the player.swf file works with this relative path).

I would like to play the player.swf file in the AxShockwaveFlash control but it cannot find the external swf files in the folder which is given by a relative path.

How can I solve this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:28:20.917

axShockwaveFlash.Base 设置 .swf 将查找其资源的目录。请注意，@"C:\Resoruces" 之类的路径似乎不起作用，需要尾部反斜杠。@"C:\资源\"

# r - R语言：括号表示法

> ID：11415801
> 
> 赞同：1
> 
> 时间：2012-07-10T14:40:44.253
> 
> 标签：r

对于一个研究项目，我有一个相对较大的代码块，需要很长时间才能运行。需要缩短这个程序运行的时间，所以跑了 profr 看看哪些函数占用的时间最多。问题是，我不明白这个符号。有人可以向我解释一下，或者指向一个资源来解释这些是什么意思：

```
[<-.data.frame
[[.data.frame
[<-
[
[.factor
[.data.frame
[<-factor 
```

? 我意识到它们必须是 R 中的某种内部结构，用于创建新的和子集数据帧，我只是不知道是哪个。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:45:59.397

引用[“R for Dummies”的](https://www.dummies.com/programming/r/r-for-dummies-cheat-sheet/?keyword=R&index=1&isSearch=1)小贴士：

子集 R 对象

> 向量、列表和数据框在表示 R 中的数据方面发挥着重要作用，因此能够简洁而正确地指定数据的子集很重要。
> 
> 您可以使用三个运算符来对数据进行子集化：

*   `[[`：从列表或数据框中按名称或位置提取单个元素。例如，从数据框iris中`iris[["Sepal.Length"]]`提取列；从 iris 中提取第二个元素。`Sepal.Length``iris[[2]]`

*   `[`：从向量、数组、列表或数据框中提取多个元素。例如，从 iris中`iris[, c("Sepal.Length", "Species")]`提取列`Sepal.Length`和；从 iris 中提取前十行；并从 iris 中提取 Species 列的前十个元素。`Species``iris[1:10, ]``iris[1:10, "Species"]`

* * *

您可以在中找到相同的信息，`?Extract`尽管总结得不是很好；-)

* * *

我的猜测是你的分析问题是`[<-`因为我知道这是一个缓慢的操作。您可能有一个循环，将多`[<-`列分配到一个数据框中。您可以通过以下方式大大加快速度：

*   Making a single assignment of multiple columns
*   Using the package `data.table`

# qt - 如何通过父函数退出我的 Qt 控制台程序？

> ID：11415802
> 
> 赞同：1
> 
> 时间：2012-07-10T14:40:45.873
> 
> 标签：qt, command-line, tray

/*编辑：已解决，请参阅我在第一个答案中的评论！*/

我目前正在构建一个仅显示托盘图标的应用程序，因此它没有任何窗口。

好吧，在托盘图标中，我包含了一个 QAction 以关闭应用程序。问题是，当我调用 exit(0); 时出现段错误；从那个函数。这是一些示例代码：

```
//I have a reason for setting it to be a QTimer, please don't even comment on this
class Boot_Timer : public QTimer {
  Q_OBJECT
public:
  explicit Boot_Timer(QObject *parent = 0) : QTimer(parent) {

  }
public Q_SLOTS:
  void set_up_command_line_tray(){
      //Setting up the tray  Icon.
      QSystemTrayIcon *trayIcon_cmd = new QSystemTrayIcon(this);
      trayIcon_cmd->setIcon(QIcon(":/icons/Pictures/myapp.png"));
      trayIcon_cmd->setToolTip("My tray tooltipp");
      QMenu *changer_menu = new QMenu;
      QAction *Quit_action = new QAction(tr("&Quit"), this);
      Quit_action->setIconVisibleInMenu(true);;
      connect(Quit_action, SIGNAL(triggered()), this, SLOT(close_application()));
      changer_menu->addAction(Quit_action);
      trayIcon_cmd->setContextMenu(changer_menu);
      trayIcon_cmd->show();
  }
  void close_application(){
      //HERE I GET SEG FAULT
      exit(0);
  }
    };

Boot_Timer boottimer;
#include "main.moc"
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    //making some checks (code omitted)
    ...
    boottimer.set_up_command_line_tray()
    return app.exec();
} 
```

因此，托盘图标显示正常且完美，但是当我使用添加到托盘图标的菜单选择退出应用程序时，出现段错误。我想我无法在 main() 函数及其没有父函数的函数之外使用 exit(int state) 退出应用程序......

那么，退出我的申请的正确方法是什么？

提前感谢您的任何答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:46:54.607

试着打电话

```
qApp->quit(0); 
```

代替

```
exit(0); 
```

记得要`#include <QApplication>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T21:26:15.497

谢谢，没有解决。出于某种原因，解决它的方法是执行以下操作： QSystemTrayIcon *trayIcon_cmd = new QSystemTrayIcon(0); 而不是 QSystemTrayIcon *trayIcon_cmd = new QSystemTrayIcon(this)

# php - javascript将图像大小调整为全屏并保持纵横比

> ID：11415805
> 
> 赞同：1
> 
> 时间：2012-07-10T14:40:56.187
> 
> 标签：php, css, jquery-mobile

我有一个移动幻灯片，我想要一个全屏选项。我创建了一个伪全屏 CSS，它可以正常工作，但它会拉伸图像以进行填充。我尝试了一些技术，比如将它包装在一个 div 中并将 CSS 设置为自动的高度和宽度，但它仍然可以拉伸。

CSS 只是将左下角和右下角全部设置为 0。我知道这是一个“黑客”，但这对我的 HTML5 视频非常有用，它甚至可以保持比例。不过，对于图像来说并不那么热。我已经尝试过 CSS3 object-fit，但几乎没有浏览器支持 afaik。

有没有办法让图像全屏并保持纵横比？可能使用类似外观的信箱来填充其他空间（垂直或水平）。我需要它是动态的，以便它可以在具有不同屏幕尺寸的多个移动设备上工作。我在移动设备上的谷歌图片上看到过这项工作，但显然他们比我更聪明。

我在后端使用 jQuery Mobile 和 PHP。我认为 JS 解决方案会是最好的，但 PHP 也会受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:08:48.413

我相信你正在寻找`background-size`房产。您可以将其设置为 CSS3`contain`或`cover`CSS3。

> **contains**，它指定背景图像应该被缩放到尽可能大，同时确保它的两个尺寸都小于或等于背景定位区域的相应尺寸。
> 
> **cover**，它指定背景图像在保证两个尺寸都大于或等于背景定位区域对应尺寸的情况下，应尽可能缩小。

MDN 文档：[https ://developer.mozilla.org/en/CSS/background-size](https://developer.mozilla.org/en/CSS/background-size)

`background-size : cover`将是全屏图像，并且`background-size : contain`将是信箱效果。

# php - $classInstance->title 比 $classInstance->getTitle() 快 - 那么为什么大多数人使用较慢的方法呢？

> ID：11415806
> 
> 赞同：3
> 
> 时间：2012-07-10T14:40:57.357
> 
> 标签：php, performance, oop, scalability

我最近一直在阅读有关如何在 PHP 中优化代码以实现可伸缩性的文章。我今天阅读的几篇文章不鼓励使用其他方法来简单地从类中返回对象。

所以基本上，他们说：

如果你有这样的课程：

```
class myClass
{

public $something;

public function setSomething($val)
{

$this->something=$val;

}//function end

}//class end

$myClassInstance=new myClass; 
```

而你想获得类属性`$something`，你应该这样做：

```
//echo $something from myClass
echo $myClassInstance->something; 
```

而不是这个：

```
//echo $something from myClass using an additional method (getSomething()) that returns the property
echo $myClassInstance->getSomething(); 
```

因为存在速度差异。不鼓励的方法较慢（`$myClassInstance->getSomething()`），这就是不鼓励的原因。

但是，我看到很多人仍在使用不鼓励的方法（教程、代码示例等）。我可以理解他们**是否**必须出于某种原因将属性设置为私有，但通常情况并非如此。

所以我的问题是，使用不鼓励的方法有什么好处或我缺少的东西吗？如果是这样，是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T14:44:48.183

有人使用`getter`和`setter`方法的原因是由于`encapsulation`。直接访问`$something`会同时呈现它`readable`和`writeable`，但是通过访问它只`getSomething()`会给调用者一个副本（即不会改变原始值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:45:37.590

如果您想稍后将某些逻辑应用于“GetTitle”，例如过滤器或通过引入特殊逻辑来更改某些输出，该怎么办？你永远不知道这些东西什么时候会开始出现。

此外，人们说函数访问器样式较慢是使用 100 万个循环来对其进行基准测试，但说真的，您要在页面上显示 100 万个标题吗？

# java - 如何只循环一次组合？

> ID：11415808
> 
> 赞同：1
> 
> 时间：2012-07-10T14:40:59.693
> 
> 标签：java, arrays, loops, for-loop

我正在尝试遍历一个数组，但是我遇到了这个问题。当我遍历这个数组时：

```
{1,2,3,4} 
```

我遇到了这个问题：在开始时，我会得到 1 和 4 的组合，但是在中间附近我会得到 4 和 1 的组合。我怎样才能让它只接受唯一的关系？不可能有像 {1,4} 和 {4,1} 这样的东西。

我正在使用 Java，对此有一些答案，但是他们使用的库仅以其他语言提供。

不幸的是，我什至无法想出一个解决方案。

这是遍历数组后的预期输出：

```
{1, 2}
{1, 3}
{1, 4}
{2, 3}
{2, 4}
{3, 4} 
```

但这是遍历数组时实际发生的情况：

```
{1, 1}
{1, 2}
{1, 3}
{1, 4}
{2, 1}
{2, 2}
{2, 3}
{2, 4}
{3, 1}
{3, 2}
{3, 3}
{3, 4}
{4, 1}
{4, 2}
{4, 3}
{4, 4} 
```

所以这两个要求是这对必须是唯一的关系（不能有 1,2 和 2,1）并且它们也不能相同。通过比较两个数字并查看它们是否相等可以很容易地做到不一样，但是我在第一个要求方面遇到了麻烦。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T15:55:43.073

更新后，我假设您正在寻找类似的东西

```
int[] arr={1,2,3,4};
for (int i=0; i<arr.length; i++)
    for (int j=i+1; j<arr.length; j++)
        System.out.println("{"+arr[i]+","+arr[j]+"}"); 
```

输出：

```
{1,2}
{1,3}
{1,4}
{2,3}
{2,4}
{3,4} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:46:49.593

如果您试图从第一组和第二组中找到所有可能的无序对，那么只需执行以下操作：

```
List<Pair> pairs = new ArrayList<Pair>();
for (int i : set1) {
    for (int j : set2) {
        pairs.add(new Pair(i, j));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:47:28.853

通常你会像这样遍历两个数组：

```
for (int element1 : array1) {
   for (int element2 : array2) {
      .....
   } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:54:43.140

```
public static void main(String[] args) {
        int[] array1 = new int[] {1,2,3,4};
        int[] array2 = new int[] {5,6,7,8};
        String[] result = new String[array1.length * array2.length];
        int count = 0;
        for (int i : array1) {
            for (int j : array2) {
                result[count++] = "{" + i + ", " + j + "}";
            }
        }
        for (String str : result) {
            System.out.println(str);
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T14:59:45.553

如果要避免重复对，请在外循环的当前位置开始内循环。

```
for(int i = 0; i < array1.length; i++)
{
    for(int j = i + 1; j < array2.length; j++)
    {
        //do stuff
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T15:42:29.840

您希望将一对对象视为可比较对象，然后创建一组对。请注意，使用此解决方案，您需要将数组存储为对象（例如 Integer）而不是基元（例如 int）。检查[将原始 long 数组转换为 Long 列表以](https://stackoverflow.com/questions/754294/convert-an-array-of-primitive-longs-into-a-list-of-longs)获取更多信息。

```
public class MyPair<A extends Comparable<A> > implements Comparable<MyPair<A>> {
  public A first; //You may want to make these private and implement getters, setters, etc
  public A second;
  public MyPair(A f, A s) { first = f; second = s; }
  public int compareTo(MyPair<A> o) {
     int cmp = first.compareTo(o.first);
     if(cmp == 0) cmp = second.compareTo(o.second);
     return cmp;
  }
  public String toString() {
    return "{"+first+","+second+"}";
  }
}

public static void main(String[] args) {
  Integer[] x = new Integer[]{1,2,3,4};
  Integer[] y = new Integer[]{5,6,7,8};
  Set<MyPair<Integer> > mypairs = new HashSet<MyPair<Integer> >();
  for(Integer f : x) 
  {
    for(Integer s : y) {
      MyPair<Integer> tmp = new MyPair<Integer>(f,s);
      mypairs.add(tmp);
    }
  }
  for(MyPair<Integer> pair : mypairs) {
    println(pair);
  }
} 
```

# c# - Convert file received from jquery to byte array

> ID：11415809
> 
> 赞同：0
> 
> 时间：2012-07-10T14:41:05.653
> 
> 标签：c#, javascript, jquery, asp.net, file-upload

I need help in converting a file received from a jquery ajax to byte array. I'm using a plugin called ajaxfileupload then from a jquery ajax call I send a file from a fileupload control to a handler. Here is my handler code:

```
if (context.Request.Files.Count > 0)
{
    string path = context.Server.MapPath("~/Temp");
    if (!Directory.Exists(path))
        Directory.CreateDirectory(path);

    var file = context.Request.Files[0];

    string fileName;

    if (HttpContext.Current.Request.Browser.Browser.ToUpper() == "IE")
    {
        string[] files = file.FileName.Split(new char[] { '\\' });
        fileName = files[files.Length - 1];
    }
    else
    {
        fileName = file.FileName;
    }
    string fileType = file.ContentType;
    string strFileName = fileName;

    FileStream fs = new FileStream("~/Temp/" + strFileName, FileMode.Open, FileAccess.Read);
    BinaryReader br = new BinaryReader(fs);
    Byte[] imagebytes = br.ReadBytes((Int32)fs.Length);
    br.Close();
    fs.Close();

    DBAccess dbacc = new DBAccess();
    dbacc.saveImage(imagebytes);

    string msg = "{";
    msg += string.Format("error:'{0}',\n", string.Empty);
    msg += string.Format("msg:'{0}'\n", strFileName);
    msg += "}";
    context.Response.Write(msg);
} 
```

I'm saving the file to a folder within a project then trying to retrieve that file and save it to the database. I can assure you that the image is being saved to the temp folder. The problem is with the line with (*) the file path is wrong. This is the file path that is being retrieved. "'C:\Program Files\Common Files\Microsoft Shared\DevServer\10.0\~\Temp\2012-06-03 01.25.47.jpg'.". The temp folder is located locally inside my project and I want to retrieved the image within that folder. How can I set the file path to my desired location? Or is there another way to convert a file to byte array after retrieving it from a jquery ajax call?

Credits to these articles:

*   [Save and Retrieve Files from SQL Server Database using ASP.NET](http://www.aspsnippets.com/Articles/Save-and-Retrieve-Files-from-SQL-Server-Database-using-ASP.Net.aspx)
*   [Async file upload with jQuery and ASP.NET](http://weblogs.asp.net/jalpeshpvadgama/archive/2011/12/23/async-file-upload-with-jquery-and-asp-net.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:02:44.853

只需这 3 行即可：

```
 int filelength = file.ContentLength;
    byte[] imagebytes = new byte[filelength ];
    file.InputStream.Read(imagebytes , 0, filelength ); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-10T15:07:07.923

```
using (var stream = upload.InputStream)
{
    // use stream here: using StreamReader, StreamWriter, etc.
} 
```

# java - 将 wsdl 与 xsd 组合成单个 wsdl

> ID：11415811
> 
> 赞同：0
> 
> 时间：2012-07-10T14:41:10.133
> 
> 标签：java, xsd, wsdl

我有包含许多 xsd 的 wsdl

```
 <wsdl:types>
      <xsd:schema elementFormDefault="qualified" targetNamespace="Name/Space">

         <xsd:include schemaLocation="role.xsd"/>
         <xsd:include schemaLocation="status.xsd"/>
         <xsd:include schemaLocation="datetime.xsd"/>  
... 
```

我可以将 wsdl 与所有 xsd 组合成单个 wsdl 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:34:18.777

使用 XSLT 转换我做到了

# java - Java Swing: Does the phrase "favor composition over inheritance" apply?

> ID：11415813
> 
> 赞同：4
> 
> 时间：2012-07-10T14:41:16.680
> 
> 标签：java, swing, inheritance, composition

Does the phrase "favor composition over inheritance" apply to Swing components? I'd like to gather some professional opinions about the subject and which code is easier to maintain before I go ahead and design a UI.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T15:00:58.870

> “优先组合胜过继承”这句话是否适用于 Swing 组件？

是的。

唯一一次我扩展 Swing 组件是当我需要重写一个或多个方法时。例如，当我想覆盖paintComponent 方法时，我将扩展一个JPanel。

在所有其他时间，我的课程将包含我需要的 Swing 组件。这允许我分离我的类方法：

```
frame.getMethod(); 
```

来自 Swing 组件类方法：

```
frame.getFrame().getPreferredSize(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T14:48:28.173

尝试这个..

**1.****如果我不使用类的所有方法或者这些方法不适用于我的类**，我通常更喜欢使用组合而不是继承。

 ****2.**组合与**HAS-A**关系一起工作。

**例如：** 浴室有浴缸

```
 Bathroom cannot be a Tub 
```

**3.**最好使用继承，**当它用于将某些功能强制到其子类时。**

例如：

每辆四轮车都必须有转向、刹车、灯、车窗等……

必须能够加速，应用刹车等......

因此，它的子类必须具有使其成为四轮车的特征。**

# css - center the content in a div

> ID：11415821
> 
> 赞同：0
> 
> 时间：2012-07-10T14:41:40.343
> 
> 标签：css, media-queries

I have 4 divs in my .html:

```
<div id="div"> 
     <div class="contenido">1</div>
</div>
<div id="divSupIzq"> 
     <div class="contenidos"><div id="textoDinamico">120 </div><div id="textoEstatico">KM/H</div></div>
</div>
    <div id="divSupDer"> 
    <div class="contenidos">zona de</br>avisos</div>
    </div>
<div id="divInfIzq"> 
    <div class="contenidos">zona de</br>informaci&oacute;n</div>
</div> 
```

In .css, I've applied **border-radius** in order to give these divs circular form. I've applied **text-align:center** because I want the content of each div being centered But how to center the content in the height?? I give some **margin-top** in .css, but it's wrong, because the interface is adaptable to the size screens (responsible design - css queries) and margin-top isn't sufficient for me... I don't know if I'm explaining myself well...I try that yes. Sorry for my bad english. Regards, Daniel

**Live example**: [http://jsfiddle.net/cN2pS/](http://jsfiddle.net/cN2pS/) Another question: what tools do you use in order to test these type of apps for differents resolutions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:46:50.873

使用表格并为每个 td 中心设置对齐

```
<table>
  <tr>
     <td align="center">
        Your text or elements
     </td>
  </tr>
</table> 
```

或者设置`div`显示为`table-cell`

# c# - 将一些dll编译成另一个dll

> ID：11415824
> 
> 赞同：2
> 
> 时间：2012-07-10T14:41:49.127
> 
> 标签：c#, .net, visual-studio-2010, dll

我有一个使用一些第三方 dll 的 dll 项目。我希望编译结果只是一个包含所有第三方 dll 的大 dll。如何在 Visual Studio 2010 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:43:58.830

您需要使用 ILMerge，假设 DLL 都是托管的：

[http://www.microsoft.com/en-us/download/details.aspx?id=17630](http://www.microsoft.com/en-us/download/details.aspx?id=17630)

以及一些相关的问题：

[ILMerge 最佳实践](https://stackoverflow.com/questions/9376/ilmerge-best-practices)

[ILMerge 问题](https://stackoverflow.com/questions/7502179/ilmerge-question)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:51:04.280

ILMerge 是仅限 .NET 的解决方案（不适用于非托管 dll）

一个不错的工具是 NETZ（.net 可执行压缩器和打包器），它将所有依赖项压缩到单个 exe / dll 文件中。

我最近没有使用它，所以我不知道它是否与 .NET 4.0 兼容而且它有一段时间没有得到很多更新，但我会试一试。

[http://madebits.com/netz/](http://madebits.com/netz/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T14:44:52.857

您可以在此处采用多种方法来实现此目的。这里有一对：

1.  如果在一个项目中可用，您可以包含源代码，然后将其编译为单个二进制文件。

2.  您可以将外部程序集添加为资源，并在运行时动态加载它们。

3.  您可以使用 Eazfuscator.Net 之类的东西，它使用 ILMerge 在编译时合并程序集。（也可以直接使用 ILMerge，但 Eazfuscator 有很好的包装功能）[Eazfuscator .Net](http://www.gapotchenko.com/eazfuscator.net)

# jquery - Showing jQuery progress bar during function execution

> ID：11415826
> 
> 赞同：0
> 
> 时间：2012-07-10T14:41:50.440
> 
> 标签：jquery, asp.net, jquery-ui

I have a button click function, which accomplished a series of task. I want to show and update a progressbar upon completion of each task lets say 25%, 50% and likewise, I am using jQuery progress bar to achieve this and using 4 hidden fields to store the different values but the progress bar doesnot grow as the function goes on it directly show 100% complete the code sample is as follows

```
<asp:Button ID="Button1" runat="server" Text="btnExecute" OnClientClick="return timeout_init();" OnClick="btnExecute_Click" /> 
```

codebehind: setting different hiddenfield values

```
protected void btnExecute_Click(object sender, EventArgs e)
    {
        //Ist level task complete
        hfProgressValue.Value = "25";
        Thread.Sleep(1000);

        //IInd level task completion
        ProgressValue1.Value = "50";
        Thread.Sleep(1000);

        //3rd level task 
        prg2.Value = "75";
        Thread.Sleep(1000);

        //4th level task
        hfprg3.Value = "100";
    } 
```

javascript

```
function timeout_init() {

            var progressBarVal = $("input[id$='hfProgressValue']").val();
            var progressBarVal1 = $("input[id$='ProgressValue1']").val();
            var progressBarVal2 = $("input[id$='prg2']").val();
            var progressBarVal3 = $("input[id$='hfprg3']").val();

            if (progressBarVal != "") {
                $("#progressbar").progressbar({
                    value: parseInt(progressBarVal)
                });
            }
            if (progressBarVal1 != "") {
                $("#progressbar").progressbar({
                    value: parseInt(progressBarVal1)
                });
            }
            if (progressBarVal2 != "") {
                $("#progressbar").progressbar({
                    value: parseInt(progressBarVal2)
                });
            }
            if (progressBarVal3 != "") {
                $("#progressbar").progressbar({
                    value: parseInt(progressBarVal3)
                });
            }
            setTimeout('timeout_init()', 0);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:49:49.827

您将需要使用 ajax 来

1.  提交原始请求
2.  轮询服务器以获取进度更新。

进度需要存储在请求之外，以便每个请求都可以访问进度。

# iphone - 如何在目标 c 中执行特定的 HTTP POST（包括工作卷曲线）？

> ID：11415829
> 
> 赞同：0
> 
> 时间：2012-07-10T14:41:56.073
> 
> 标签：iphone, objective-c, curl, http-post

我的 API 需要通过 HTTP POST 接收一些参数和图像。在 curl 它是通过以下方式完成的：

```
curl http://someurl -F 'service[lat]=12.22' -F 'sevice[lng]=12.33' -F 'service[user_id]=4' -F 'service[location]=Vienna' -F 'service[image]=@tour.jpg' 
```

如何在目标 C（iphone）中完成？我猜它是通过将内容类型设置为“application/x-www-form-urlencoded”来完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:46:20.557

如果您想避免自己构建发布数据的麻烦，我建议您查看[ASIHTTPRequest框架。](https://github.com/pokeb/asi-http-request/)

文档中的示例：

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request addPostValue:@"Ben" forKey:@"names"];
[request addPostValue:@"George" forKey:@"names"];
[request addFile:@"/Users/ben/Desktop/ben.jpg" forKey:@"photos"];
[request addData:imageData withFileName:@"george.jpg" andContentType:@"image/jpeg" forKey:@"photos"]; 
```

我在所有项目中都使用它，它非常强大且易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:27:12.847

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];
NSString *boundary = @"random string of your choosing";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];

// file
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"name\"; filename=\"%@\"\r\n", fileName] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

// length
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"size\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"%i",imageData.length] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

// lat
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"lat\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"%f",lat] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];    

// lon
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"lon\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"%f",lon] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

// location
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"location\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:location] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

// user_id
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"user_id\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:user_id] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

// close form
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

// set request body
[request setHTTPBody:body];

//bon voyage
[NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:56:29.033

请不要使用 ASIHTTPRequest。从开发者的主页：

> 请注意，我不再在这个库上工作——你可能想考虑为新项目使用其他东西。:)

我听说过关于[AFNetworking的好消息](https://github.com/AFNetworking/AFNetworking/)

但是通过实现 POST 请求`NSURLRequest`并不难，而且您不依赖于另一个库。

# java - How was rt.jar created for JRE 1.6?

> ID：11415830
> 
> 赞同：2
> 
> 时间：2012-07-10T14:41:56.923
> 
> 标签：java

So here is what I did -

I unzipped the contents of rt.jar into a folder called rt. Then, inside rt folder, I executed the following jar command

```
jar cf rt.jar * 
```

This should create a jar file with the same classes as that in the original rt.jar file.

However, the file sizes of the two files are significantly different.

```
Original rt.jar      -> 43.1 MB
Newly created rt.jar -> 20.6 MB 
```

Note that the size of the unzipped contents for both the jar files is the same. This makes me think that the original rt.jar wasn't created using the jar command. So how was it created?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T14:51:58.047

原始 jar 使用 0 压缩级别创建，以减少加载类的 CPU 密集度。

```
> unzip -v rt.jar
Archive:  rt.jar
 Length   Method    Size  Cmpr    Date    Time   CRC-32   Name
--------  ------  ------- ---- ---------- ----- --------  ----
       0  Stored        0   0% 02-03-2012 21:20 00000000  META-INF/
    2343  Stored     2343   0% 02-03-2012 21:20 a653ef50  META-INF/MANIFEST.MF
     754  Stored      754   0% 02-03-2012 21:12 fa8ba6d9  com/oracle/net/Sdp$1.class
     350  Stored      350   0% 02-03-2012 21:12 ca729c09  com/oracle/net/Sdp$SdpSocket.class
... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T14:49:40.823

它可能是使用`-0`jar 命令的选项创建的，该命令专门不应用 ZIP 压缩，而只是存储文件。

由于这个档案会被*大量*阅读，而且按照现代标准它非常小，为了 23MB，减少运行时开销似乎是值得的。

（无论如何，即使这不是严格正确的，文件大小的差异也会降低到不同的压缩级别。）

# python - "TypeError: bad argument type for built-in operation"

> ID：11415836
> 
> 赞同：2
> 
> 时间：2012-07-10T14:42:23.813
> 
> 标签：python, exception

In what cases would Python throw this error:

```
"TypeError: bad argument type for built-in operation" 
```

The error was reported in this line of code:

```
csv.reader(open(file_name), dialect=dialect) 
```

I've tried to reproduce it but the closest I got was this error:

```
"TypeError: coercing to Unicode: need string or buffer, bool found" 
```

I've tried with Python2.7 and Python 2.5 on Linux and Python 2.4 on Windows XP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:42:06.053

The `csv.reader` in Python 2.4 has known bugs; see [http://mail.python.org/pipermail/tutor/2008-January/059758.html](http://mail.python.org/pipermail/tutor/2008-January/059758.html)

In general, "bad argument type for built-in operation" crops up all over the place because it's the exception text generated by [`PyErr_BadArgument`](http://hg.python.org/cpython/file/dc18a2a66d16/Python/errors.c#l357) CPython API call. This means that the traceback won't be much use because the exception is raised in C code. Your best bet for debugging is to run Python under a debugger and set a breakpoint on `PyErr_BadArgument`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:30:02.693

我的猜测是这`file_name`是一个布尔值，而不是像`open()`预期的字符串或缓冲区。我不会很关心不同的信息。它们都是 TypeErrors，一个恰好比另一个更具体，可能是因为 Python 版本的一些差异。

# asp-classic - ASP script is not run

> ID：11415837
> 
> 赞同：2
> 
> 时间：2012-07-10T14:42:30.680
> 
> 标签：asp-classic

I'm asp newbie and trying to run this simple asp script from here: [http://www.w3schools.com/asp/asp_inputforms.asp](http://www.w3schools.com/asp/asp_inputforms.asp)

This is my form.html file:

```
<html>
<body>
<form method="get" action="form2.asp">
First Name: <input type="text" name="fname" /><br />
Last Name: <input type="text" name="lname" /><br /><br />
<input type="submit" value="Submit" />
</form>
</body>
</html> 
```

This is form2.asp file:

```
<html>
<body>
Welcome
<%
response.write(request.querystring("fname"))
response.write(" " & request.querystring("lname"))
%>
</body>
</html> 
```

I launch form.html file from inetpub/wwwroot folder, enter name and last name and get in browser:

> Welcome <% response.write(request.querystring("fname")) response.write(" " & request.querystring("lname")) %>

Localhost is open for me. What am I doing wrong?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:44:25.540

您机器上的 IIS 可能不支持 ASP 执行。

转到*程序和功能 -> 打开或关闭 Windows 功能*。在*Internet Information Services -> World Wide Web Services -> Application Development Features*下，验证是否检查了**ASP 。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T16:00:58.013

经典 ASP 默认情况下未安装在 IIS 7.0 和 IIS 7.5 上，请参阅[此处](http://learn.iis.net/page.aspx/562/classic-asp-not-installed-by-default-on-iis/)和[此处](http://learn.iis.net/page.aspx/559/running-classic-asp-applications-on-iis/)了解如何在您遇到这种情况时启用它。

从这些链接复制：

在 IIS 7.0 和 7.5 中，默认不安装经典版本的 ASP。因此，当您尝试浏览服务器上的 ASP 页面时，您可能会看到 HTTP 404 错误，或者您可能会在浏览器窗口中看到 ASP 页面的源代码。当未安装用于定义经典 ASP 环境的配置设置时，会创建这两种错误情况。

希望这可以帮助。

# .net - .Net Entity Framework 中的嵌套模型

> ID：11415843
> 
> 赞同：3
> 
> 时间：2012-07-10T14:42:53.027
> 
> 标签：.net, entity-framework

试图让我了解实体框架。我有一个包含两个表的数据库，其中包含有关交易的信息。一个包含事务类别信息，并一对一地链接到事务表中（transactions.Category <=> Category.CategoryID）。我可以在填充了类别实体的情况下在内存中创建新事务，但是当我尝试刷新到数据库时，我得到“{”无效对象名称'mEconomyUser.category'。”}”

交易表：

```
TransactionID   uniqueidentifier
UserID      uniqueidentifier
Date        date
Text        nvarchar(250)
Category    uniqueidentifier
Amount      decimal(18, 0) 
```

类别表：

```
CategoryID  uniqueidentifier
UserID      uniqueidentifier
Text        nvarchar(50) 
```

这是我的模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using System.ComponentModel.DataAnnotations;

namespace mEconomy.Models
{
    [Table("transactions", Schema = "mEconomyUser")]
    public class Transaction
    {
        [Key]
        public Guid TransactionID { get; set; }
        public Guid UserID { get; set; }
        public DateTime Date { get; set; }
        public string Text { get; set; }
        public virtual Category Category { get; set; }
        public decimal Amount { get; set; }
    }

    public class TransactionDBContext : DbContext
    {

        public DbSet<Transaction> Transactions { get; set; }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using System.ComponentModel.DataAnnotations;

namespace mEconomy.Models
{
    [Table("category", Schema = "mEconomyUser")]
    public class Category
    {
        [Key]
        [ForeignKey("Transaction")]
        public Guid CategoryID { get; set; }
        public Guid UserID { get; set; }
        public String Text { get; set; }

        public virtual Transaction Transaction { get; set; }
    }

    public class CategoryDBContext : DbContext
    {

        public DbSet<Transaction> Categorys { get; set; }
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:37:24.197

谢谢大家把我推向正确的方向！我现在用我的代码对所有问题进行了排序。几乎有点尴尬，但这是我第一次遇到 EF。所以这就是我最终的结果：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using System.ComponentModel.DataAnnotations;

namespace mEconomy.Models
{
    [Table("Transactions", Schema = "mEconomyUser")]
    public class Transaction
    {
        [Key] // Define primary-key
        public Guid TransactionID { get; set; }
        public Guid UserID { get; set; }
        public DateTime Date { get; set; }
        public string Text { get; set; }
        public decimal Amount { get; set; }

        [Column("Category")] // Column name of the database foreign key is named Category, want to use that name for the Model
        public Guid? CategoryID { get; set; } // Property to store the foreign key for the Category
        [ForeignKey("CategoryID")] // Define property that holds the foreign key for the category model/object
        public virtual Category Category { get; set; }
    }

    [Table("Categorys", Schema = "mEconomyUser")]
    public class Category
    {
        [Key] // Define primay-key
        public Guid CategoryID { get; set; }
        public Guid UserID { get; set; }
        public String Text { get; set; }

        public virtual ICollection<Transaction> Transactions { get; set; }
    }

    public class TransactionDBContext : DbContext
    {

        public DbSet<Transaction> Transactions { get; set; }
        public DbSet<Category> Categorys { get; set; }
    }
} 
```

Okej 简要介绍了我遇到的问题。

正如 GertArnold 指出的那样，复制和过去的错误！我有两个 Transaction 类型的 DbSet，而不是上面的每个 DbSet。

二确保代码理解一对多或一类对多事务的连接，我必须在类别模型上添加事务的 ICollection。

在事务选项上，无处存储类别模型的外键。我添加了一个 Guid (CategoryID) 来存储它。

EF 试图在 Transactions 表中找到一个名为 Category_CategoryID 的 Column 来存储相应 Category 条目的外键。因为我使用了一个已经存在的数据库，所以我不得不使用数据注释来设置 CategoryID 字段的列。

我必须做 CategoryID Guid？或可为空的。否则，所有没有类别的事务都会尝试使用 GUID = 000-000 将类别添加到数据库中...... Witch 给了我一个主键约束错误。

是的，我知道类别拼写错误......自高中以来就犯了同样的错误。

你们提供给我的信息让我对 EF 有了更好的理解，所以我可以用谷歌搜索到正确的词。在这里找到了一个用户的[博客系列](http://weblogs.asp.net/manavi/archive/2011/03/27/associations-in-ef-4-1-code-first-part-1-introduction-and-basic-concepts.aspx)，它真的帮助我进入了它！- 感谢[Morteza Manavi](https://stackexchange.com/users/176793)的大力投入！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:31:15.730

每个上下文只知道一个实体。所以如果你这样做

```
transaction.Category = category; 
```

并尝试通过`TransactionDBContext`它来实现这一点，很明显它应该抱怨。

上下文（实际上是查询提供程序）尝试将您的代码转换为 SQL，因此它需要类别的映射信息，但这是在另一个上下文中。

我假设您有理由使用两个上下文，但是在一个上下文中映射两个实体会更容易。如果您需要保留两个上下文，您可以从中获取 categoryId`CategoryDBContext`并通过该值设置 Transaction.CategoryDBContext。这可以提交，`TransactionDBContext`因为现在您正在处理原始属性。

* * *

**编辑**
在一种情况下定义为：

```
public class TransactionDBContext : DbContext
{
    public DbSet<Transaction> Transactions { get; set; }
    public DbSet<Category> Categorys { get; set; }
} 
```

# c# - 在 Visual Studio 中的方法的返回行上检查函数的返回值

> ID：11415847
> 
> 赞同：3
> 
> 时间：2012-07-10T14:43:05.383
> 
> 标签：c#, visual-studio, debugging, visual-studio-2012

我有这样一行代码

```
return foo(barIn); 
```

如果我在行上放置一个断点，我可以在不进入 foo 的情况下检查 foo(barIn) 的返回值吗？我可以将代码重写为

```
var result = foo(barIn);
return result; 
```

但我想要不重写也不离开当前代码的便利。

========== 编辑 ==========

最初的四个答案很有趣（谢谢），但它们实际上并没有回答我的问题。让我试着更清楚一点。

在这个方法中

```
public string functionA()
{
    return functionB();
} 
```

在 Visual Studio 2012 中有没有办法在“return functionB();”行上放置一个断点 并检查函数B的返回值而不进入函数B、重新运行函数B或重写函数A？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:46:05.993

不，您无法满足这种确切的行为。请参阅[在 Visual Studio 中调试时返回之前是否可以找出返回值](https://stackoverflow.com/questions/268048/can-i-find-out-the-return-value-before-returning-while-debugging-in-visual-studi)。您可以获得的最接近的是：

如果`foo`是幂等的（即它没有任何副作用），那么您可以在`foo(barIn)`.

如果它*确实*有副作用，则将断点放在函数的`return`, 然后跳出（默认情况下为`Shift`+ `F11`）并检查函数结果分配给的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:45:04.250

您始终可以使用`F11`单步执行该函数，然后`F10`遍历该函数并查看它返回的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:46:08.307

您可以添加手表或快速手表`foo(barIn)`以查看结果。只需突出显示它并右键单击。调试时上下文菜单中有选项。如果运行该方法两次而不是一次会导致不必要的影响，请小心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:47:40.557

如果您在监视窗口中写入 foo(barIn) ，则可以在监视窗口中看到返回值，但这会导致您的 foo 方法被调用两次，有时这不是您想要发生的，因此将值传递给变量并退货是最好的办法。如果你有代码，你总是可以进入 foo 。

# c++ - C++：如何在不使用库的情况下序列化/反序列化对象？

> ID：11415850
> 
> 赞同：11
> 
> 时间：2012-07-10T14:43:36.747
> 
> 标签：c++, serialization, deserialization

我试图了解序列化/反序列化如何在不使用库的情况下在 C++ 中工作。我从简单的对象开始，但是当反序列化一个向量时，我发现，如果没有先写下它的大小，我就无法获得向量。此外，我不知道应该选择哪种文件格式，因为如果在矢量大小之前存在数字，我将无法正确阅读。此外，我想用类和地图容器来做到这一点。我的任务是序列化/反序列化这样的对象：

```
PersonInfo
{
    unsigned int    age_;
    string name_;
    enum { undef, man, woman } sex_;
}

Person : PersonInfo 
{
    vector<Person>      children_;
    map<string, PersonInfo>     addrBook_;
} 
```

目前我知道如何序列化这样的简单对象：

```
vector<PersonInfo> vecPersonInfo;
vecPersonInfo.push_back(*personInfo);
vecPersonInfo.push_back(*oneMorePersonInfo);

ofstream file("file", ios::out | ios::binary);
if (!file) {
    cout<<"can not open file";
} else {
    vector<PersonInfo>::const_iterator iterator = vecPersonInfo.begin();
    for (; iterator != vecPersonInfo.end(); iterator++) {
        file<<*iterator;
    } 
```

您能否建议，我该如何为这个复杂的对象执行此操作，或者一个可以清楚解释它的好教程？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T15:12:24.267

一种模式是实现一个定义序列化函数的抽象类，该类定义进入序列化器的内容和输出的内容。一个例子是：

```
class Serializable
{
public:
    Serializable(){}
    virtual ~Serializable(){}

    virtual void serialize(std::ostream& stream) = 0;
    virtual void deserialize(std::istream& stream) = 0;
}; 
```

然后为要序列化的类/结构实现 Serializable 接口：

```
struct PersonInfo : public Serializable // Yes! It's possible
{
    unsigned int age_;
    string name_;
    enum { undef, man, woman } sex_;

    virtual void serialize(std::ostream& stream)
    {
        // Serialization code
        stream << age_ << name_ << sex_;
    }

    virtual void deserialize(std::istream& stream)
    {
        // Deserialization code
        stream >> age_ >> name_ >> sex_;
    }
}; 
```

休息我相信你知道的。这里有一些障碍需要通过，您可以在闲暇时完成：

1.  当您将一个字符串写入带有空格的流并尝试将其读回时，您将只得到其中的一部分，而字符串的其余部分会“破坏”之后读取的值。
2.  您如何对其进行编程以使其跨平台（小端与大端）
3.  您的程序如何自动检测反序列化时要创建的类。

线索：

1.  使用具有编写 bool、int、float、strings 等功能的自定义序列化程序。
2.  使用字符串表示正在序列化的对象类型，并在反序列化时使用工厂创建该对象的实例。
3.  使用预定义的宏来确定您的代码正在编译的平台。
4.  始终以固定的字节序写入文件，并使使用其他字节序的平台进行调整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:12:53.647

最基本的形式是定义一个定义虚拟读/写方法的“Serialisable”接口（抽象类）。您还定义了一个“流”接口，该接口为基本原始类型（例如读取/写入整数、浮点数、字节、字符、查找/重置）以及可能为某些复合类型（值数组，例如字符串、向量）提供通用 API等）在流上运行。如果适合您，您可以使用 C++ IOStreams。

您还需要一些 id 系统，以便工厂在加载/反序列化时创建相应的类，并在序列化复杂类型时进行引用，以便在必要时使用适当的结构/长度信息标记/标头每个逻辑部分。

然后，您可以为每种媒体（如文本文件、二进制文件、内存中、网络等）创建具体的流类。

然后，您希望可序列化的每个类都必须继承 Serializable 接口并实现细节（如果是复合/复杂类，则递归利用为其他类型定义的可序列化接口）。

这当然是一种添加序列化的幼稚且“侵入性”的方式（您必须修改参与的类）。然后，您可以使用模板或预处理器技巧来减少干扰。请参阅 Boost 或协议缓冲区，或任何其他库，以了解其在代码中的外观。

你真的确定要自己动手吗？它可能会变得非常混乱，尤其是当您有指针、对象之间的指针（包括循环）时，您还需要在加载/反序列化对当前运行正确之前的某个时间点修复/翻译这些指针。

# forms - IE 出于样式目的而隐藏时无法发送文件上传

> ID：11415852
> 
> 赞同：4
> 
> 时间：2012-07-10T14:43:44.883
> 
> 标签：forms, file, internet-explorer, upload

好吧，我很困惑，所以我要打开另一个关于样式文件文件上传表单元素的问题。

经过一些尝试，我最终（认为）我让它工作了，但是像往常一样，IE 将再次开始抗议。问题是，我将有以下表格，它使用 css 隐藏真正的文件输入，因此它使用 fileHiddenInput div 将其替换为假文件。

**html:**

```
<form enctype="multipart/form-data" method="post" name="uploadform" action = "">                    
  <div class="input-append">
    <input type="text" id = "appendedInputButtons" class="span2" name="fileuploadtext"><input type="button" id="upbutton" class="btn" value="Select"><input type="submit" name="upload" value="uploaden" class="btn">
  </div>
  **<div class="fileHiddenInput"><input id="upfile" type="file" name="file" value="upload" /></div>**
</form> 
```

**CSS：**

```
/** file input **/
.fileHiddenInput {
    height: 0px;
    width: 0px; 
    overflow:hidden;
} 
```

我将使用一些 jquery 来发送表单，我也可以将代码放在这里。但是经过多次试验和错误后，我发现如果使用 fileHiddenInput div 继续使用 css 隐藏文件输入，IE9 将不会发送文件输入。当 make 我将通过删除 fileHiddenInput div 或使用 css 使其可见来使文件输入可见，然后表单将按应有的方式发送。

有谁知道或是否有人找到了解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:53:45.370

您可以尝试一些隐藏策略，一种是通过设置样式将元素从屏幕上移开

```
position: absolute; z-index: 19999; top: -1000px; left: -1000px; 
```

另一种方法是使用不透明控件覆盖文件输入元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T15:39:45.653

元素的不透明度 0 导致它被视为隐藏。

希望这可以帮助某人 - 我在让 file_field.set 与 IE 和 selenium/watir 一起工作时遇到问题。问题是 (:input => "upload") 在锚标记下。通过检查器查看它时，我们看到下面的 file_field 的不透明度设置为 0.. 这导致了 Element not visible 错误。

将不透明度设置为 > 0（在我们的示例中为 0.01）允许 Web 驱动程序与其交互并生成上传窗口并设置文件路径。

这是用 IE11 在 Win7 上测试的

# javascript - JS函数调用

> ID：11415859
> 
> 赞同：0
> 
> 时间：2012-07-10T14:43:56.850
> 
> 标签：javascript

我从 JS 开始，并且在尝试编写的特定函数时遇到了麻烦。目的是在按下按钮后更改文本。“无”文本应变为“你打招呼，我打招呼？” 与嘿？是文档上已有的文本。

这是代码，欢迎任何指针！

```
<html>
<head>
<title>Javascript test </title>
</head>

<body>

<p id="hey">Hey?</p>
<p id ="nothing">Nothing</p>
<INPUT type =button VALUE="Button?" OnClick=(take())>

<script>
function take(){
var hey=document.getElementById("hey");
var nothing =document.getElementById("one");

nothing.appendChild(document.createTextNode("You say hi, I say " + hey));
}
</script>
</body>
</html> 
```

好的，谢谢大家的帮助。没有人是 100% 正确的，但我尝试了所有建议的组合，并获得了大约 99% 的方法，到达了我想去的地方。我的代码现在看起来像这样。我试图做的最后一个改变不是追加新的文本字符串，而是用当前正在追加的字符串替换旧字符串。

```
<html>
<head>
<title>Javascript test </title>
</head>

<body>

<p id="hey">Hey?</p>
<p id ="nothing">Nothing</p>
<input type ="button" value="Button?" OnClick="take();"/>

<script>
function take(){
var hey=document.getElementById("hey");
var nothing =document.getElementById("nothing");

nothing.appendChild(document.createTextNode("You say hi, I say " + hey.innerHTML));

}

</script>
</body>
</html> 
```

感谢您的帮助，感谢 Stack Overflow 社区！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:54:12.407

您的代码有一些问题。

首先，您应该`type="text/javascript"`在脚本标签上指定。

其次，您的输入应如下所示：

```
<input id="button" type="button" value="Button?" /> 
```

第三，您应该在脚本标签中绑定您的事件处理程序（参见[SoC](http://en.wikipedia.org/wiki/Separation_of_concerns#HTML.2C_CSS.2C_and_JavaScript)）：

```
document.getElementById('button').onclick = take; 
```

第四，您的函数查找具有 id 的元素，该元素`one`不存在。你的意思是 id`nothing`吗？

第五，假设你使用正确的 id 来获取`nothing`元素，那么在设置值的时候需要使用来自其他`p`的值。

```
var take = function () {
    var hey = document.getElementById('hey');
    var nothing = document.getElementById('nothing');

    nothing.innerHTML= 'You say hi, I say ' + hey.innerHTML;
}; 
```

在这里查看一个工作示例：http: [//jsfiddle.net/M5UWn/](http://jsfiddle.net/M5UWn/)

附带说明一下，我发现[jQFundamentals](http://jqfundamentals.com/)是一个优秀的 jQuery 和原生 javascript 学习网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:46:58.217

将您的输入更改为此

```
<input type=button value="Button?" onclick="take();" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:47:15.180

```
<html>
<head>
<title>Javascript test </title>
</head>

<body>

<p id="hey">Hey?</p>
<p id ="nothing">Nothing</p>
<input type="button" value="Button?" onClick="take()"/>

<script>
function take(){
var hey=document.getElementById("hey");
var nothing =document.getElementById("nothing");

nothing.appendChild(document.createTextNode("You say hi, I say "+hey.value));
}
</script>
</body>
</html> 
```

我已将
输入标记的结尾更改为添加引号的输入类型，并且 您正在执行
OnClick ，并且没有带有 id 的元素。所以改成
`document.getElementById("one")``one``nothing`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:55:45.100

这里有几个指针：

将您的按钮输入 html 更改为如下所示：

```
<INPUT type="button" VALUE="Button?" OnClick="take()"> 
```

请注意，所有属性都用双引号引起来。此外，函数调用周围的额外括号也被删除。

当你得到'nothing'元素时，你使用了错误的id。它应该是这样的：

```
var nothing = document.getElementById("nothing"); 
```

要更改文本，只需使用以下代码就更简单了：

```
nothing.innerText = "You say hi, I say " + hey.innerText; 
```

# nginx - NGINX主机配置文件放在哪里？

> ID：11415860
> 
> 赞同：0
> 
> 时间：2012-07-10T14:43:57.510
> 
> 标签：nginx, yii, php, winginx

我使用[WINGINX](http://www.youtube.com/watch?v=HL-gvgOnOBo)在我的 Windows 机器上安装了 NGINX、PHP-FPM、MySQL、MongoDB、NodeJS 和 MemcacheD。

在[Yii 框架文档](http://www.yiiframework.com/doc/guide/1.1/en/quickstart.apache-nginx-config)中，我发现了以下主机配置代码：

```
server {
    set $host_path "/www/mysite";
    access_log  /www/mysite/log/access.log  main;

    server_name  mysite;
    root   $host_path/htdocs;
    set $yii_bootstrap "index.php";

    charset utf-8;

    location / {
        index  index.html $yii_bootstrap;
        try_files $uri $uri/ $yii_bootstrap?$args;
    }

    location ~ ^/(protected|framework|themes/\w+/views) {
        deny  all;
    }

    #avoid processing of calls to unexisting static files by yii
    location ~ \.(js|css|png|jpg|gif|swf|ico|pdf|mov|fla|zip|rar)$ {
        try_files $uri =404;
    }

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    #
    location ~ \.php {
        fastcgi_split_path_info  ^(.+\.php)(.*)$;

        #let yii catch the calls to unexising PHP files
        set $fsn /$yii_bootstrap;
        if (-f $document_root$fastcgi_script_name){
            set $fsn $fastcgi_script_name;
        }

        fastcgi_pass   127.0.0.1:9000;
        include fastcgi_params;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fsn;

        #PATH_INFO and PATH_TRANSLATED can be omitted, but RFC 3875 specifies them for CGI
        fastcgi_param  PATH_INFO        $fastcgi_path_info;
        fastcgi_param  PATH_TRANSLATED  $document_root$fsn;
    }

    location ~ /\.ht {
        deny  all;
    }
} 
```

我需要在哪里存储此代码？

我使用主机编辑器创建：[http://project.loc](http://project.loc)，并且文件：`index.php`正确显示（位于：/winginx/home/project.loc/pubic_html）。

我尝试将代码放置几个目录：

*   /winginx/conf
*   /winginx/conf/vhosts
*   /winginx/home/project.loc

..但没有一个工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:41:18.170

Wingix[文档](http://winginx.com/docs/vhosts)解释了如何执行此操作：

> 您应该在 winginx\conf\vhosts 文件夹中创建一个单独的配置文件，命名为域名加 .conf，例如 mysite.local.conf。
> 
> 添加或编辑配置后，需要重启 Winginx，双击 start-winginx.exe。
> 
> 如果这些操作后出现问题，请阅读 winginx\logs\error.log。

# c# - 无法单击值为零的元素

> ID：11415864
> 
> 赞同：0
> 
> 时间：2012-07-10T14:44:09.190
> 
> 标签：c#, firefox, selenium, webdriver

我正在尝试单击具有 id="0" 的 div 标签。虽然它可以找到那个id，但无法点击它。点击其他 ids 工作。这在 Firefox 12 中有效，但在 13 中失败我正在使用 Selenium2 和 C#

driver.FindElement(By.XPath("//div[@class='MenuItem' and @id='0']")).Click();

```
<div style="position: absolute; top: 72px; left: 9px; " id="file" class="Menu">
<div class="MenuItem" id="0">&nbsp;<img src="images/UI/Icons/folder.png">Folder</div>
<div class="MenuItem" id="1">&nbsp;<img valign="middle"      src="images/UI/Icons/tree/folderBlogClosed.png">Blog</div>
<div class="MenuItem" id="2">&nbsp;<img valign="middle"   src="images/UI/Icons/folderBoard.png">Discussion Board</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:05:55.107

ID 属性以数字开头的元素是[无效的 HTML](http://www.w3.org/TR/html401/types.html#type-name)。虽然大多数浏览器都会很好地呈现这个，但尝试使用 JavaScript 通过 ID 定位元素（如 Selenium WebDriver 所做的那样）完全有可能会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:26:29.263

您是否有理由使用 XPath 而不仅仅是通过 ID 进行选择？

```
driver.FindElement(By.Id("0")); 
```

HTML id 在页面上应该是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:11:34.853

我通过使用鼠标操作解决了这个问题。谢谢大家的意见。

```
 Actions builder = new Actions(driver);
       IWebElement tagElement = driver.FindElement(By.XPath("//div[@id='0' and @class='MenuItem']"));
       //mouse hover on first item
       builder.MoveToElement(tagElement).Perform();
        //click on first item
       driver.FindElement(By.XPath("//div[@id='0' and @class='MenuItem']")).Click(); 
```

# ios - 检查 ios 模拟器/设备中的 http 请求

> ID：11415878
> 
> 赞同：4
> 
> 时间：2012-07-10T14:44:42.397
> 
> 标签：ios, http, request, web-inspector

我正在开发一个通过 http 请求与服务器通信的 ios 应用程序。我想在 ios 模拟器/设备中测试我的应用程序时监控网络流量。

是否有任何软件或工具可以用来检查 mac/ios 上指定应用程序的 http 请求，就像 web 开发人员的 firebugs？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:16:52.393

据我所知，App Store 中有几个提供网络流量监控功能的工具。但是，他们只能将 iPhone 视为一个整体并停留在那个水平上。换句话说，他们只能说出这款 iPhone 消耗了多少流量。对于每个应用程序？没有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-09T14:52:50.180

您可以使用[HTTP Catcher](https://apps.apple.com/us/app/http-catcher/id1445874902)来捕获 Web 流量。它是 iOS 的 Web 调试代理，因此您可以直接在 iPhone 上查看请求和响应。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-01-25T12:46:13.857

您可以在开发时使用[Proxyman](https://proxyman.io)记录/捕获应用程序的所有请求和响应。它也将支持 ios 模拟器。无需进行任何代码更改，我们就使用它。

首先从上面的链接下载 Proxyman 应用程序，然后查看[此](https://docs.proxyman.io/debug-devices/ios-simulator)文档以获取参考。

# php - 动态滚动条内的花式框图像和文本

> ID：11415879
> 
> 赞同：0
> 
> 时间：2012-07-10T14:44:43.697
> 
> 标签：php, jquery, fancybox

我有一个使用 jquery 中名为 simplescroll.js 的插件制作的滚动条。在里面，我使用数据库滚动了许多在运行时加载的图像。我想在每个图像上应用一个带有数据库加载的一些文本的图像的幻想框：（我要加载的文本在里面`$img['txt']`）代码：

```
<ul id="scroller2">
<?php
   $qry_img= $db->query("SELECT * FROM image_prodotti;");
   while( $img = $qry_img->fetch_array() ){
    echo '<li class="new"><a href="img/prodotti/caricati/'.$img['url'].'" class="fancy"><img src="img/prodotti/caricati/'.$img['url'].'" alt="" /></a></li>';
 ?>          
</ul>

<script type="text/javascript">
$(document).ready(function(){
    $("a.fancy").fancybox({
        'transitionIn'  :   'fade',
        'transitionOut' :   'fade',
        'speedIn'       :   600, 
        'speedOut'      :   200, 
        'overlayShow'   :   true
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:01:59.557

将有三种可能的方法来做到这一点：

**首先**（最简单和最简单的） -为标签添加一个`title`属性并设置为它的值：`<a>``$img['txt']`

```
<ul id="scroller2">
<?php
   $qry_img= $db->query("SELECT * FROM image_prodotti;");
   while( $img = $qry_img->fetch_array() ){
    echo '<li class="new"><a href="img/prodotti/caricati/'.$img['url'].'" title="'.$img['txt'].'" class="fancy"><img src="img/prodotti/caricati/'.$img['url'].'" alt="" /></a></li>';
 ?>          
</ul> 
```

您无需对脚本进行任何修改。**请注意**，使用此选项时，`title`将显示为`tooltip`当您悬停缩略图时。

**第二**- 设置为缩略图（标签）`$img['txt']`中的属性值：`alt``<img>`

```
<ul id="scroller2">
<?php
   $qry_img= $db->query("SELECT * FROM image_prodotti;");
   while( $img = $qry_img->fetch_array() ){
    echo '<li class="new"><a href="img/prodotti/caricati/'.$img['url'].'" class="fancy"><img src="img/prodotti/caricati/'.$img['url'].'" alt="'.$img['txt'].'" /></a></li>';
 ?>          
</ul> 
```

然后将 API 选项添加`'titleFromAlt':true`到您的脚本中：

```
$(document).ready(function(){
  $("a.fancy").fancybox({
    'transitionIn'  :   'fade',
    'transitionOut' :   'fade',
    'speedIn'       :   600, 
    'speedOut'      :   200, 
    'overlayShow'   :   true,
    'titleFromAlt'  :   true // NEW
  }); // fancybox
}); // ready 
```

**第三**- 根据文本的数量，您可能更喜欢在标签之后的`$img['txt']`隐藏处存储；然后在打开后将其内容设置为fancybox ：`<div>``<a>``title`

```
<ul id="scroller2">
<?php
   $qry_img= $db->query("SELECT * FROM image_prodotti;");
   while( $img = $qry_img->fetch_array() ){
    echo '<li class="new"><a href="img/prodotti/caricati/'.$img['url'].'" class="fancy"><img src="img/prodotti/caricati/'.$img['url'].'" alt="" /></a><div style="display: none;">'.$img['txt'].'</div></li>';
 ?>          
</ul> 
```

然后使用这个脚本来获取隐藏的内容`<div>`：

```
$(document).ready(function(){
  $("a.fancy").fancybox({
    'transitionIn'  :  'fade',
    'transitionOut' :  'fade',
    'speedIn'       :   600, 
    'speedOut'      :   200, 
    'overlayShow'   :   true,
    'titlePosition' :  'over', // NEW
    'onStart'       :   function(currentArray,currentIndex){
       var obj = currentArray[ currentIndex ];
       this.title = $(obj).next('div').html();
    }
  }); // fancybox
}); // ready 
```

**注意**：这是为了`fancybox v1.3.2 +`

# c# - WPF 在代码中添加的行未显示 - 显示 XAML

> ID：11415881
> 
> 赞同：3
> 
> 时间：2012-07-10T14:44:48.420
> 
> 标签：c#, wpf, xaml, wpf-controls

我正在向 CavnasObject (Size 0, 0) 添加代码中的线元素。但它不会显示。所以我在 xaml 中添加了具有相同属性的相同线对象。在 XAML 中它会显示，但不会在 C# 中显示。这是我在 C# 中的代码：

```
Line line = new Line()
{
    X1 = points[0].X,
    Y1 = points[0].Y,
    X2 = points[1].X,
    Y2 = points[1].Y,
    Stroke = new SolidColorBrush(Colors.Red),
    StrokeThickness = 4,
    Visibility = System.Windows.Visibility.Visible
};
lineCanvas.Children.Add(line); 
```

未显示。这是显示的行：

```
<StackPanel Grid.Column="1">
    <Grid Height="0">
        <Canvas Name="lineCanvas">
            <Line X1="1" X2="240" Y1="33" Y2="33" StrokeThickness="4" Stroke="Red"/>
        </Canvas>
    </Grid>
    <DataGrid Name="dataGrid" Grid.Column="0" ItemsSource="{Binding ViewMap}" CanUserReorderColumns="False" 
              CanUserSortColumns="False" AutoGenerateColumns="False" AllowDrop="True"
              DragEnter="dataGrid_DragEnter" Drop="dataGrid_Drop" SelectionUnit="FullRow" 
              HeadersVisibility="Column" IsReadOnly="True" Panel.ZIndex="0" MouseDown="dataGrid_MouseDown">
        <DataGrid.CellStyle>#
....
... 
```

如果您是您自己，为什么网格的高度 = 0。我正在用线条连接数据网格的数据单元。为了放置线条，我使用了一个非常小的画布对象，我只是在画布之外显示线条。

有没有人知道出了什么问题。XAML 的值取自代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:57:12.120

好的，经过测试，我发现您的 XAML 可能是问题所在。您的画布是在 DataGrid 后面的可视树中创建的，因此任何 Line 都将显示在 DataGrid 后面。而且由于您使用 StackPanel 作为根元素，我不确定您的 Line 将在哪里结束。要解决此问题，请将您的 XAML 重写为与此类似的内容：

```
<Grid Grid.Column="1">
  <DataGrid/>
  <Canvas x:Name="lineCanvas"/>
</Grid> 
```

# ruby-on-rails - 如何使用 Test::Unit 在 Rails 测试中模拟 Logger？

> ID：11415884
> 
> 赞同：1
> 
> 时间：2012-07-10T14:44:58.793
> 
> 标签：ruby-on-rails, unit-testing, mocking, functional-testing

在 test_helper 中：

```
class Logger
    @@log = []

  def self.info(message)
    @@log.push(message)
  end

  def self.log
    @@log
  end
end 
```

但是在运行测试时，它似乎使用了常规的 Logger。

如何为 Logger 创建一个模拟？

导轨 3.0.7。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-17T10:22:50.623

我建议一个更好的策略是使用 mocha 模拟 rails 记录器

```
class TestLogCase < ActiveSupport::TestCase

  require 'mocha/mini_test'

  test "records the log" do
    Rails.logger.expects(:info).with('My message')
    Rails.logger.info "My Message"
  end 

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:34:02.010

您需要将您的记录器分配给 Rails.logger 以供 Rails 使用...为了完全实现记录器，您需要实现所有方法[http://www.ruby-doc.org/stdlib-1.9。 3/libdoc/logger/rdoc/Logger.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html)（即#debug、#warn、#error、#fatal）

```
ENV["RAILS_ENV"] = "test"
require File.expand_path(File.dirname(__FILE__) + "/../config/environment")

class Logger
    @@log = []

  def self.info(message)
    @@log.push(message)
  end 

  def self.log
    @@log
  end 
end

class TestLogCase < ActiveSupport::TestCase
  def setup
    Rails.logger = Logger
  end 

  test "records the log" do
    Rails.logger.info "My Message"
    assert_true Logger.log.include?("My Message")
  end                                                                                                                         
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-20T23:29:42.550

使用摩卡

```
 before do
    logger = mock
    MyModel.any_instance.stubs(:logger).returns(logger)
    logger.stubs(:debug).returns(true)
  end 
```

# objective-c - 自定义 UIProgressView 绘制怪异

> ID：11415887
> 
> 赞同：0
> 
> 时间：2012-07-10T14:45:08.693
> 
> 标签：objective-c, ios, drawrect, cgrectmake

我正在尝试通过子类化它来创建我自己的自定义 UIProgressView，然后覆盖 drawRect 函数。除了进度填充栏外，一切都按预期工作。我无法获得正确的高度和图像。

图像均为 Retina 分辨率，模拟器处于 Retina 模式。这些图像被称为：“progressBar@2x.png”（28px 高）和“progressBarTrack@2x.png”（32px 高）。

CustomProgressView.h

```
#import <UIKit/UIKit.h>

@interface CustomProgressView : UIProgressView

@end 
```

CustomProgressView.m

```
#import "CustomProgressView.h"

@implementation CustomProgressView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
    self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, self.frame.size.width, 16);

    UIImage *progressBarTrack = [[UIImage imageNamed:@"progressBarTrack"] resizableImageWithCapInsets:UIEdgeInsetsZero];
    UIImage *progressBar = [[UIImage imageNamed:@"progressBar"] resizableImageWithCapInsets:UIEdgeInsetsMake(4, 4, 5, 4)];

    [progressBarTrack drawInRect:rect];

    NSInteger maximumWidth = rect.size.width - 2;
    NSInteger currentWidth = floor([self progress] * maximumWidth);

    CGRect fillRect = CGRectMake(rect.origin.x + 1, rect.origin.y + 1, currentWidth, 14);

    [progressBar drawInRect:fillRect];
}

@end 
```

生成的 ProgressView 具有正确的高度和宽度。它还以正确的百分比填充（当前设置为 80%）。但是进度填充图像未正确绘制。

有谁看到我哪里出错了？

![显示问题的屏幕截图](../Images/18bf576ec46a03e9ff75f63de6db1872.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:17:20.133

看起来你正在重新分配`self.frame`.`-drawRect`

我想你想要这样的东西：

```
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
    CGRect bounds = self.bounds ;

    UIImage *progressBarTrack = [ UIImage imageNamed:@"progressBarTrack"] ;
    [ progressBarTrack drawInRect:bounds ] ;

    UIImage *progressBar = [[UIImage imageNamed:@"progressBar"] resizableImageWithCapInsets:(const UIEdgeInsets){ 4.0f, 4.0f, 5.0f, 4.0f } ] ;

    CGRect fillRect = CGRectInset( bounds, 2.0f, 2.0f ) ;
    fillRect.width = floorf( self.progress * maximumWidth );

    [progressBar drawInRect:fillRect];
} 
```

**如何创建自己的进度视图覆盖 UIView 而不是 UIProgressView**

```
@interface ProgressView : UIView
@property float progress ;
@end

@implementation ProgressView
@synthesize progress = _progress ;

-(id)initWithFrame:(CGRect)frame
{
    if (( self = [ super initWithFrame:frame ] ))
    {
        self.layer.needsDisplayOnBoundsChange = YES ;
    }

    return self ;
}

-(void)drawRect
{
    // see code above
}

-(void)setProgress:(float)progress
{
    _progress = progress ;
    [ self setNeedsDisplay ] ;
}

@end 
```

# ms-access-2007 - Access 2007 更新查询的行数多于数据库

> ID：11415888
> 
> 赞同：0
> 
> 时间：2012-07-10T14:45:09.203
> 
> 标签：ms-access-2007, sql-update

我有一个更新查询，它说它正在更新 1029 行，而它正在更新的数据库中只有 994 行。

该查询引用外部 Excel 文件并在批次编号相同时使用“发布日期”更新“主日历”：

`UPDATE [Mapped Link] RIGHT JOIN Master_Calendar ON [Mapped Link].Reference = Master_Calendar.[Batch Number] SET Master_Calendar.[Actual Posted Date] = [Mapped Link]. [Entry Date];`

每当将行添加到外部“映射链接”文档时，更新查询中的行就会增加。“映射链接”中有大约 2000 行，因此它不会将主日历中的行添加到映射链接中。

数据似乎没有错误地更新——所有数据都是正确的。但是它怎么能更新比它存在的更多的行呢？只是数错了吗？想法？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:41:10.087

您要么有重复，`Master_Calendar.[Actual Posted Date]`要么`[Mapped Link].[Entry Date]`

要检查重复的日期，您可以运行查询。例如：

```
SELECT [Actual Posted Date], Count(ID) AS CountOfID
FROM Master_Calendar
GROUP BY [Actual Posted Date]
HAVING Count(ID)>1 
```

您需要将 ID 更改为表上索引的名称。

# jquery - jquery ui滑块动画拖动手柄

> ID：11415889
> 
> 赞同：0
> 
> 时间：2012-07-10T14:45:11.600
> 
> 标签：jquery, user-interface, slider

我有一个关于 jquery ui 滑块的问题，现在已经搜索了一段时间，但找不到工作的 anwser。

对于一个项目，我正在使用[http://jqueryui.com/demos/slider/#steps](http://jqueryui.com/demos/slider/#steps) jQuery ui Slider。它运行良好，可以完成大部分工作。

我使用 250 步，当用户单击例如 250 或 500 时，滑块句柄会动画/滑动到该值。

但是当用户握住（拖动）手柄并手动拖动它时，它不会动画/滑动步骤，而只是转到下一个非常难看的值。

有谁知道当用户手动握住手柄而不是点击一些预定义的值时如何使手柄动画/滑动？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:27:05.547

jQuery UI Slider（1.9.2 版）不支持拖动动画。我认为您必须更改库代码。

这是补丁javascript代码

```
 (function( $, undefined ) {

        $.extend($.ui.slider.prototype.options, {
            dragAnimate: true
        });

        var _mouseCapture = $.ui.slider.prototype._mouseCapture;
        $.widget("ui.slider", $.extend({}, $.ui.slider.prototype, {
            _mouseCapture: function(event) {
                _mouseCapture.apply(this, arguments);
                this.options.dragAnimate ? this._animateOff = false : this._animateOff = true;
                return true;
            }
        }));

    }(jQuery)); 

```

# tomcat - 在 tomcat 上部署后在哪里可以找到 web 项目

> ID：11415892
> 
> 赞同：0
> 
> 时间：2012-07-10T14:45:41.263
> 
> 标签：tomcat

在 tomcat 上部署 web 应用程序战争后，我想在 tomcat 文件夹中运行 web 应用程序的类

所以我找到了这个包含所有类的路径（C:\software\apache-tomcat-7\apache-tomcat-7.0.28\wtpwebapps\SeleniumebDriverProject\WEB-INF\classes）。

如果不是正确的文件夹，我希望您纠正我

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:50:39.007

WEB-INF/classes 确实是放置 Web 应用程序类的标准位置，至少那些没有打包成 jar 文件的地方，这些文件通常位于 WEB-INF/lib 中。

如果您的 Tomcat 被配置为解压缩 war 文件 (unpackWARs="true")，那么在启动 Tomcat 并安装好 war 文件后，您应该会在磁盘上看到这些文件。

如果您尝试从命令行运行应用程序的类之一，并且它位于 WEB-INF/classes 中，那么您需要将其添加到类路径中，例如：

java -classpath C:\software\apache-tomcat-7\apache-tomcat-7.0.28\wtpwebapps\SeleniumebDriverProject\WEB-INF\classes org.thepackage.MainClass

请记住，该类使用的任何 jar 文件也需要添加到类路径中。

如果正如您对 Chin Boon 的评论所建议的那样，您正在寻找 java 源文件，那么这些文件可能没有包含在 war 文件中 - 如果是这样，它们将不可用（您需要在其他地方下载它们）。如果是，请尝试 WEB-INF/src

# php - jQuery单击一个DIV并隐藏所有其他DIVS检测

> ID：11415894
> 
> 赞同：1
> 
> 时间：2012-07-10T14:45:44.787
> 
> 标签：php, jquery, find, slidedown

我的网站上有一个票务系统。有几个 div 显示原始工单，然后嵌套在这些 div 之间的子隐藏 div 显示客户和员工的交互。我想打开一个 div，然后关闭其他 div，然后如果他们打开另一个 div 这个和所有其他 div 关闭显示他们点击打开的那个。

```
jQuery(document).ready(function () {
    // ****** Click the ticket DIV
    $(".ticket_thread_7").click(function () {

        // Slide the SUB DIVs associated with this ticket
        $(".ticket_threads_7").slideDown("slow");

        // Turn the arrow from DOWN.png to UP.png
        $('.ticket_arrow_7').attr("src", "http://cdn.com/assets/imgs/up.png");

    // ****** If they have click the arrow again    
    }, function () {

        // .. close this ticket
        $(".ticket_threads_7").slideDown("slow");

        // .. also return the image back to normal
        $('.ticket_arrow_7').attr("src", "http://cdn.com/assets/imgs/up.png");

        return false;
    });
}); 
```

的HTML

```
<div class="ticket_thread_7">
    <p>I want to return my order <img src="http://cdn.com/assets/imgs/up.png" class="ticket_arrow_7"></p>
    <div class="ticket_threads_7" style="display:none">

        <div class="staff_7_1"><p>We cannot accept a return on this item.</p></div>
        <div class="cus_7_2"><p>Why not.</p></div>
        <div class="staff_7_3"><p>Please visit cdn.com/returnterms to see our policy, apologies.</p></div>

    </div>
</div> 
```

当前的解决方案工作正常。正如你可以想象的那样。这是一个动态的 PHP 驱动网站，所以我们在网站上有很多票。我想知道在 jQuery 中我可以使用命令来获取页面上的所有其他 DIV 元素 ID 并隐藏它们。

所以我可以做这样的事情：

```
// Hide all other current open threads and reset their arrows
$(".ticket_threads_7*!=7").slideDown("slow");
$('.ticket_arrow_'*!=7).attr("src", "http://cdn.com/assets/imgs/up.png"); 
```

因此，当他们单击箭头时，如果打开所有其他线程，则所有其他线程将关闭，并且箭头将被重置并且该箭头将打开。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T14:59:40.613

类并非旨在指向独特的东西，您应该这样做：

```
<div class="ticket_thread" id="ticket_thread_7">
   <p>...<img class="arrow" /></p>
   <div class="details">
      ...
   </div>
</div> 
```

然后，很容易做你想做的事：

```
$(".ticket_thread").not(this).find('.details').slideDown("slow");
$(".ticket_thread").not(this).find('.arrow').attr("src", "http://cdn.com/assets/imgs/up.png"); 
```

另外，请考虑使用类和[CSS sprite](http://coding.smashingmagazine.com/2009/04/27/the-mystery-of-css-sprites-techniques-tools-and-tutorials/)来设计箭头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:59:07.337

```
$("[class^=ticket_threads]").click(function () {
   //your code
   $("[class^ticket_threads]").not(this).hide();
   $("[class^ticket_arrow]").not($(this).siblings("[class^=ticket_arrow"))
      .attr('src' ...)
}); 
```

您可以使用类似这样的方法来选择处理程序中除当前元素之外的所有*元素*。

我也不确定你为什么对`click`. 我不确定那有什么作用。另外，它们似乎是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:10:38.680

您需要混合使用父元素和子元素。以下是我的解决方案。查看演示并下载代码，然后根据您的需要对其进行修改。

***[你可以在这里看到一个演示。](http://jsfiddle.net/kSzqq/)***JsFiddle 源码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
            <title>Test</title>
            <style type="text/css">
                h1{text-decoration:underline;padding:5px;cursor:pointer}
            </style>
            <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
            <script type="text/javascript">
            $(document).ready(function() {
                /*bind all clicks on an 'h1' element to trigger this function*/
                $('h1').click(function() {
                    /*if the element following this one has the class 'parent' and the class 'showMe'*/
                    if($(this).next('.parent').hasClass('showMe')) {
                        /*remove the class 'showMe' from all elements with the class 'parent' or 'child'*/
                        $('.parent, .child').removeClass('showMe').hide();
                    }
                    /*if the element following this one has the class 'parent' and does not have the class 'showMe'*/
                    else {
                        /*remove the class 'showMe' from all elements with the class 'parent' or 'child'*/
                        $('.parent, .child').removeClass('showMe').hide();
                        /*add the class 'showMe' to the element following this one with the class 'parent'*/
                        $(this).next('.parent').addClass('showMe').show();
                    }
                });
                /*bind all clicks on an 'h2' element to trigger this function*/
                $('h2').click(function() {
                    /*if the element following this one has the class 'child' and the class 'showMe'*/
                    if($(this).next('.child').hasClass('showMe')) {
                        /*remove the class 'showMe' from all elements with the class 'child'*/
                        $('.child').removeClass('showMe').hide();
                    }
                    else {
                        /*remove the class 'showMe' from all elements with the class 'child'*/
                        $('.child').removeClass('showMe').hide();
                        /*add the class 'showMe' to the element following this one with the class 'child'*/
                        $(this).next('.child').addClass('showMe').show();
                    }
                });
                /*hide all elements with the class 'parent' or 'child'*/
                $('.parent, .child').hide();
                /*simulate a click on the first 'h1' element and the first 'h2' element within that 'h1' element*/
                $('h1:first, h1:first h2:first').click();
            });
            </script>
        </head>
        <body>
            <h1>Yacht 1</h1>
            <div class="parent">
                <h2>Description 1.1</h2>
                <div class="child">
                    <p>Content 1.1</p>
                    <p>Ut labore et dolore magna aliqua. Ut aliquip ex ea commodo consequat. Ullamco laboris nisi quis nostrud exercitation lorem ipsum dolor sit amet. Cupidatat non proident, duis aute irure dolor eu fugiat nulla pariatur. Ut labore et dolore magna aliqua.</p>
                </div>
                <h2>Images</h2>
                <div class="child">
                    <p>Content 1.2 Images here</p>
                    <p>Ut labore et dolore magna aliqua. Ut aliquip ex ea commodo consequat. Ullamco laboris nisi quis nostrud exercitation lorem ipsum dolor sit amet. Cupidatat non proident, duis aute irure dolor eu fugiat nulla pariatur. Ut labore et dolore magna aliqua.</p>
                </div>
                <h2>Extras</h2>
                <div class="child">
                    <p>Content 1.3</p>
                    <p>Ut labore et dolore magna aliqua. Ut aliquip ex ea commodo consequat. Ullamco laboris nisi quis nostrud exercitation lorem ipsum dolor sit amet. Cupidatat non proident, duis aute irure dolor eu fugiat nulla pariatur. Ut labore et dolore magna aliqua.</p>
                </div>
            </div>
            <h1>Yacht 2</h1>
            <div class="parent">
                <h2>Description 2.1</h2>
                <div class="child">
                    <p>Content 2.1</p>
                    <p>Sed quia consequuntur magni dolores eos et aut officiis debitis aut rerum necessitatibus tempora incidunt ut labore et dolore. Omnis dolor repellendus. Itaque earum rerum hic tenetur a sapiente delectus, iste natus error sit voluptatem ut enim ad minima veniam.</p>
                    <p>Magnam aliquam quaerat voluptatem. Qui ratione voluptatem sequi nesciunt. Nisi ut aliquid ex ea commodi consequatur? Sed quia non numquam eius modi id est laborum et dolorum fuga.</p>
                </div>
                <h2>Images 2.2</h2>
                <div class="child">
                    <p>Images here  2.2</p>
                    <p>Ut labore et dolore magna aliqua. Ut aliquip ex ea commodo consequat. Ullamco laboris nisi quis nostrud exercitation lorem ipsum dolor sit amet. Cupidatat non proident, duis aute irure dolor eu fugiat nulla pariatur. Ut labore et dolore magna aliqua.</p>
                </div>
                <h2>Extras 2.3</h2>
                <div class="child">
                    <p>Content 2.3</p>
                    <p>Ut labore et dolore magna aliqua. Ut aliquip ex ea commodo consequat. Ullamco laboris nisi quis nostrud exercitation lorem ipsum dolor sit amet. Cupidatat non proident, duis aute irure dolor eu fugiat nulla pariatur. Ut labore et dolore magna aliqua.</p>
                </div>
            </div>
        </body>
    </html>​ 
```

# php - PHP Echo 样式输出

> ID：11415902
> 
> 赞同：0
> 
> 时间：2012-07-10T14:46:05.263
> 
> 标签：php, styles

```
<?php
if (in_array($key,$following)){
        echo ' <form id="follow" action= "action.php" method="GET" data-theme="a">
        <input type="hidden" name="id" value="$key"/>
        <input type="submit" name="do" value="follow" data-theme="a"/>
</form>';

?> 
```

我正在尝试设置此回声部分的样式。我让它输出到另一个以 HTML div 标签为框架的 PHP 文件。我该怎么办？除了这个输出，我在页面上的所有其他内容都正确设置了样式。

编辑** 我编辑了代码，这是一个表格。但无论如何，我有另一个引用此 php 代码的 php 文件，在第二个 php 文件中，它被包装在 html 中，该页面上的 div 标记显示来自该页面的回显，但我无法让 css 工作其他文件。我已经尝试过#follow。没运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:52:16.283

创建自己的函数：

```
function myecho($text){
    echo "<div class='your_css_class'>".$text."</div>";
} 
```

当你想回应一些东西时，只需写`myecho("my message");`

# jquery - 用 jQuery 添加 html 字符

> ID：11415904
> 
> 赞同：0
> 
> 时间：2012-07-10T14:46:07.687
> 
> 标签：jquery, html

我有以下 jQuery

```
$("h1").text($("h1").text().replace(/([^\s-]{5})(?=[^\s-])/g, '$1&shy;')); 
```

`&shy;`应该是可选的`"-"`+ `<br />`，所以我希望它在那里，以防有人输入一个很长的单词作为标题，这样它就不会被截断，而是分成单独的行。

目前，它将更改`"ThisVeryLongWord"`为`"ThisV&shy;eryLo&shy;ngWor&shy;d"`在应将其更改为的页面上

```
ThisV-
eryLo-
ngWor-
d 
```

（假设每个点都需要断词）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:56:27.053

你在找这个吗？

```
$("h1").html($("h1").text().replace(/([^\s-]{5})(?=[^\s-])/g, '$1&shy;'));​ 
```

[现场演示](http://jsfiddle.net/BJaEm/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:47:35.007

尝试使用`html()`而不是`text()`，至少用于设置值。

# sql - 子表结果连接

> ID：11415906
> 
> 赞同：2
> 
> 时间：2012-07-10T14:46:12.730
> 
> 标签：sql, sql-server, sql-server-2008, tsql, parent-child

我有一个父/子表，如下所示，在 EmailQueueAttachments 表上具有一对多关系。

![ERD](../Images/3f1c8ebd4b34461e5d1eecaea6cfaf18.png)

父表（EmailQueue）在子表（EmailQueueAttachments）中有一行和两个相关行，在编写一个简单的连接查询后，我得到以下结果。

```
SELECT     EmailQueue.ID, EmailQueue.SenderAddress, EmailQueue.RecipientList, EmailQueue.CCList, EmailQueue.Subject, EmailQueue.Body, EmailQueue.BodyHTML, 
                      EmailQueue.DisclaimerFooter, EmailQueue.Sent, EmailQueue.SendError, EmailQueue.CreatedDate,EmailQueueAttachments.AttachmentPath
FROM         EmailQueue LEFT OUTER JOIN
                      EmailQueueAttachments ON EmailQueue.ID = EmailQueueAttachments.EmailQueueID
WHERE     (EmailQueue.Sent = 0) AND (EmailQueue.SendError = 0) AND (EmailQueue.BodyHTML IS NULL) 
```

* * *

```
4   xxxxxxx xxxxxxx xxxxxxx xxxxxxx xxxxxxx NULL    xxxxxxx 0   0   10/07/2012 11:58    \\server\orange.png
4   xxxxxxx xxxxxxx xxxxxxx xxxxxxx xxxxxxx NULL    xxxxxxx 0   0   10/07/2012 11:58    \\server\pear.png 
```

有没有一种简单的方法可以将子表中的 AttachmentPath 列作为 csv 返回一行，还是我需要编写一个存储过程并使用临时表来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:49:00.147

这应该以逗号分隔列表的形式为您提供一列中的路径。

注意我没有测试所以可能有错别字。

```
SELECT  EmailQueue.ID, EmailQueue.SenderAddress, EmailQueue.RecipientList,
        EmailQueue.CCList, EmailQueue.Subject, EmailQueue.Body, EmailQueue.BodyHTML,
        EmailQueue.DisclaimerFooter, EmailQueue.Sent, EmailQueue.SendError, 
        EmailQueue.CreatedDate,
        substring((SELECT ( ', ' + EQA.AttachmentPath)
                           FROM EmailQueueAttachments EQA
                           WHERE EmailQueue.ID = EQA.EmailQueueID
                           FOR XML PATH( '' )
                          ), 3, 1000 ) as [Path List]
FROM EmailQueue 
WHERE   
     (EmailQueue.Sent = 0) AND (EmailQueue.SendError = 0) AND (EmailQueue.BodyHTML IS NULL) 
```

# list - Prolog - 过滤器列表

> ID：11415907
> 
> 赞同：2
> 
> 时间：2012-07-10T14:46:16.013
> 
> 标签：list, filter, prolog

所以我明天有这个作业。我必须过滤列表的每个第 n 个元素并将其作为列表返回。例如：

?- 每Nth(3,[a,b,c,d,e,f],Rs)。Rs = [c,f]。

我的想法基本上是：

```
everynth(N, [X|Xs], L) :- everynth(N, [X|Xs], N, L).
everynth(N, [], C, L).
everynth(N, [X|Xs], 0, [X]) :- everynth(N, Xs, N, [X]).
everynth(N, [X|Xs], C, L) :- C1 is C -1,
  everynth(N,Xs,C1,L). 
```

但它不能以这种方式工作，因为在第三行它试图匹配 X 和返回 X 和 Count 0 第二次去那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:58:51.357

你快到了。检查这些修改：

```
everynth(N, L, NL) :- everynth(N, L, N, NL).

everynth(_, [], _, []).
everynth(N, [X|Xs], 1, [X|NXs]) :- everynth(N, Xs, N, NXs).
everynth(N, [_|Xs], C, NXs) :- C1 is C-1, C1>0,
  everynth(N,Xs,C1,NXs). 
```

第一个子句`everynth/4`是递归的终止。当输入列表中没有更多项目时，它应该给出一个空列表。

第二个子句`everynth/4`处理第 n 个项目，它必须将输入项目放在输出列表中，并继续处理剩余的项目，重新启动你的项目计数器。

第三个子句`everynth/4`处理不是第 n 个元素的项目，因此您必须跳过该项目，递减计数器并继续处理剩余的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:04:29.737

```
everynth(_, _, [], R, R).
everynth(1, M, [X|Xs], Z, R) :- append(Z, [X], Z1),  everynth(M, M, Xs, Z1, R).              
everynth(N, M, [_|Xs], Z, R) :- N > 1, N1 is N - 1, everynth(N1, M, Xs, Z, R).

?- everynth(3, 3, [a,b,c,d,e,f], [], Rs).
Rs = [c, f] . 
```

# php - Doctrine2，通过 Id 还是 Object？

> ID：11415908
> 
> 赞同：6
> 
> 时间：2012-07-10T14:46:17.440
> 
> 标签：php, orm, doctrine-orm

我不明白为什么使用某些 Entity 对象我可以设置 Id 而对于其他对象我得到一个错误，并说我 Id 不能为空，我必须传递一个对象。

例如：

```
$log = new Log();
$log->setTypeId(1);
$log->setUserId(1);
$entityManager->persist($log);
$entityManager->flush(); 
```

如果我尝试上面的代码，我会收到错误消息：**Integrity constraint violation: 1048 Column 'user_id' cannot be null**。我必须首先创建 Type Object 和 de User 对象并传递它们：

```
$log->setType($TypeObject)
$log->setUser($UserObject) 
```

但是对于其他实体对象，我直接赋值没有问题，这是为什么呢？

这是我的实体日志：

```
<?php
/**
 * @Entity
 * @Table(name="log")
 * @HasLifecycleCallbacks
 */
class Log
{
    /**
     * @var type 
     * @Id
     * @Column(type="integer")
     * @GeneratedValue
     */
    protected $id;

     /**
     *
     * @var type 
     * @Column(type="integer")
     */
    protected $user_id;

     /**
     *
     * @var type 
     * @Column(type="integer")
     */
    protected $type_id;

     /**
     *
     * @var type 
     * @Column(type="datetime")
     */
    protected $created;

    /**
     *
     * @var type 
     * @ManyToOne(targetEntity="User", inversedBy="logs")
     */
    protected $user;

    /**
     *
     * @ManyToOne(targetEntity="Type", inversedBy="logs")
     */
    protected $type;

    public function getId()
    {
        return $this->id;
    }

    public function getUserId()
    {
        return $this->user_id;
    }

    public function getTypeId()
    {
        return $this->type_id;
    }

    public function getCreated()
    {
        return $this->created;
    }

    public function setUserId($userId)
    {
        $this->user_id = $userId;
    }

    public function setTypeId($typeId)
    {
        $this->type_id = $typeId;
    }

    public function setCreated($created)
    {
        $this->created = $created;
    }

    public function setUser($user)
    {
        $this->user = $user;
    }

    public function setType($type)
    {
        $this->type = $type;
    }

    /**
     * @PrePersist
     */
    public function prePersist()
    {
        $this->setCreated(new DateTime());
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-01-31T19:06:17.850

现有的答案从来没有让我满意。在许多有效的场景中，加载一个对象只是为了定义关系，而 FK 已经很方便了，这根本没有任何意义。

更好的解决方案是使用 Doctrine 的 EntityManager 的`getRefrence`方法。

> [**参考代理...**](http://docs.doctrine-project.org/en/2.0.x/reference/configuration.html#reference-proxies)
> 
> EntityManager#getReference($entityName, $identifier) 方法允许您获取对已知标识符的实体的引用，而无需从数据库中加载该实体。这很有用，例如，当您想要建立与您拥有标识符的实体的关联时，作为性能增强。你可以简单地这样做：
> 
> ```
> <?php
>   // $em instanceof EntityManager, $cart instanceof MyProject\Model\Cart
>   // $itemId comes from somewhere, probably a request parameter
>   $item = $em->getReference(\MyProject\Model\Item::class, $itemId);
>   $cart->addItem($item); 
> ```

首次发布此问题时，也许这不可用-我不知道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T18:03:44.823

**编辑**

我在 Doctrine2 的网站上找到了这个声明。这是您在编写模型时可能需要遵循的最佳实践。

[Doctrine2 最佳实践](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/best-practices.html)

25.9。不要将外键映射到实体中的字段

外键在对象模型中没有任何意义。外键是关系数据库建立关系的方式。您的对象模型通过对象引用建立关系。因此，将外键映射到对象字段会严重地将关系模型的细节泄漏到对象模型中，这是您真正不应该做的事情

**编辑**

Doctrine 将您的对象映射到它们各自的 Id。

你在这里所做的有点多余。

你基本上已经两次告诉教义同样的事情。

您已经告诉它它有一个“user_id”列并且它也有一个用户对象，它们是相同的。但是学说已经可以根据日志类里面有一个用户对象这一事实，猜到这个关系会有一个user_id列。

您应该简单地执行以下操作

```
<?php
/**
 * @Entity
 * @Table(name="log")
 * @HasLifecycleCallbacks
 */
class Log
{
    /**
     * @var type 
     * @Id
     * @Column(type="integer")
     * @GeneratedValue
     */
    protected $id;

     /**
     *
     * @var type 
     * @Column(type="datetime")
     */
    protected $created;

    /**
     *
     * @var type 
     * @ManyToOne(targetEntity="User", inversedBy="logs")
     */
    protected $user;

    /**
     *
     * @ManyToOne(targetEntity="Type", inversedBy="logs")
     */
    protected $type;

    public function getId()
    {
        return $this->id;
    }

    public function getCreated()
    {
        return $this->created;
    }

    public function setCreated($created)
    {
        $this->created = $created;
    }

    public function setUser($user)
    {
        $this->user = $user;
    }

    public function setType($type)
    {
        $this->type = $type;
    }

    /**
     * @PrePersist
     */
    public function prePersist()
    {
        $this->setCreated(new DateTime());
    }

} 
```

Doctrine 会自己担心 user_id 和 type_id。你不必担心。通过这种方式，您可以使用完整的对象，使其更容易编程，而不必担心 id。教义会处理这个问题。

如果您拥有的只是一个 id，因为这就是您在前端使用的，那么只需使用 Entitymanager 获取与该 id 关联的对象。

```
$user = $em->getEntity( 'User', $idFromWeb );
$log = new Log();
$log->setUser( $user ); 
```

# documentation - Scilab 中用户定义函数的文档

> ID：11415910
> 
> 赞同：2
> 
> 时间：2012-07-10T14:46:18.547
> 
> 标签：documentation, comments, docstring, scilab

[我正在为学校完成一个 Scilab 项目，并根据文档](http://help.scilab.org/docs/5.3.3/en_US/comments.html)中的这段话为我的所有功能添加了评论：

> 在函数内部，可以使用第一条注释行，直到第一条指令或空行来为函数帮助提供默认内容。

然而`help`，当我键入时不显示评论`help myfunction`。相反，它会在搜索页面上启动帮助浏览器。

有任何想法吗？基本上我正在寻找相当于 Matlab 的“H1 行”和“帮助文本”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-27T19:16:00.907

正确的指令是

```
head_comments myfunction 
```

当没有命名的本地函数`myfunction`并且`myfunction`被称为用户定义的时，确实可以直接使用

```
help myfunction 
```

这个愿望被报告@ [http://bugzilla.scilab.org/10785](http://bugzilla.scilab.org/10785)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:23:40.103

您必须使用此功能将评论转换为帮助页面： [http](http://help.scilab.org/docs/current/en_US/help_from_sci.html) ://help.scilab.org/docs/current/en_US/help_from_sci.html 然后编译它。

# sql - TempDB Initial Size 即使在更改后也会重置

> ID：11415912
> 
> 赞同：1
> 
> 时间：2012-07-10T14:46:21.280
> 
> 标签：sql, sql-server

我的 tempdb 之一的数据文件大小为 60GB。我将文件缩小到 2GB，然后将初始大小设置为 2GB。数据文件收缩成功。当我返回 tempdb 的 db 属性时，它再次显示初始大小为 60000MB。我也尝试将其设置为 4GB，但仍重置为 60000MB。这非常令人沮丧，因为每次服务重新启动时，tempdb 数据文件都设置为 60GB，占用了大量空间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:51:08.287

你是如何“缩小”文件大小的？如果有 60GB 的条目，表格应该“自动调整大小”，以便为所有条目留出空间。

# ruby-on-rails - 在 Rails 3.0.x 中禁用查询日志记录，但允许调试信息

> ID：11415913
> 
> 赞同：0
> 
> 时间：2012-07-10T14:46:24.847
> 
> 标签：ruby-on-rails, debugging, logging, configuration

我有一个生成大量 SQL 查询的 Web 应用程序，读取日志文件变得很困难。我想知道是否可以在开发模式下禁用这些 SQL 查询的日志记录（这样它们就不会出现在 development.log 文件中）？

我已经在网上搜索并阅读了我可以输入的内容：

```
config.log_level = :info 
```

在`development.rb`文件中，但我希望仍然能够读取我的`logger.debug`命令生成的信息，如果我将日志级别设置为 info ...

那么，是否可以禁用查询日志记录，同时将 logger.debug 信息保留在日志文件中？

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:40:26.850

不幸的是，rails 中的调试选项非常糟糕。没有日志消息的命名空间（按类，即像你在 java 中那样），并且大多数日志级别的选择方式让我倾向于摇头（为什么渲染部分记录在信息级别？ ）。

rails 将极大地受益于使用像 log4r 这样的日志库和使用命名空间等功能。

（吐槽结束）

# java - 与地图比较时获取重复值

> ID：11415914
> 
> 赞同：1
> 
> 时间：2012-07-10T14:46:24.990
> 
> 标签：java, javascript, jakarta-ee

最初，我将在页面中选择学生姓名列表并提交以获取地址详细信息。学生姓名将存储在 studentDetailMapList 中。在遍历列表时，我会将学生姓名与 AddressDetailsMap 进行比较以检索地址详细信息。但是当有同名的学生时，第一次迭代返回确切的地址，但是当第二次迭代发生时，它再次返回第一个学生地址而不是第二个学生地址。它正在获取重复值

```
for (i=studentDetailMapList.values().iterator;i.hasNext();)
{
  detailMap = (Map)i.Next();
  sDetails =  (StudentDetails)detailMap.get("Student");
  student = sDetails.getRollNo();
  StudentAddressDetails studentAddressDetails  = getDetailswithAddress(AddressDetailsMap,sDetails);
}

private StudentAddressDetails getDetailswithAddress(Map AddressDetailsMap,sDetails student)
{
      StudentAddressDetails addDetails = null;
        try{
        for(Iterator itr = AddressDetailsMap.values().iterator();itr.hasNext();){
                addDetails = (StudentAddressDetails )itr.next();
                if( (addDetails != null) && (addDetails.getStudentID().equals(student.getId()))){
                    return addDetails;
                }
        }
        }catch(Throwable t){
            return null;
        }
        return null;
    } 
```

与地图比较时有没有办法避免重复？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:04:10.107

地图的每个键都`AddressDetailsMap`必须是标识符 (studentId) 而不是学生姓名。

编辑：在这种情况下，您的方法应如下所示：

```
private StudentAddressDetails getDetailswithAddress(Map AddressDetailsMap,sDetails student) {
          return AddressDetailsMap.get(student.getStudentID());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:00:17.207

您必须在学生的班级中添加一个 UUID 并使用它来管理他们的数据

**编辑回应**

[Java 的 UUID](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/UUID.html)为您提供了基本的 Java 的 UUID。

您可以管理[自己的序列](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicInteger.html)- 这种方式可能有助于使用 UNIQUE_ID 在数据库中索引学生。

管理您的 ID 的最佳方法是：使用`HashMap<Integer,Student>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:03:16.700

您遇到的问题是您使用的地图数据结构错误。

映射是将键映射到值的对象。地图不能包含重复的键；每个键最多可以映射到一个值。

您不能有多个同名地址，您应该使用地图的其他属性，也许是学生 ID，甚至列表的索引也应该在这种情况下工作。

# c# - StructureMap 开放泛型类型

> ID：11415915
> 
> 赞同：1
> 
> 时间：2012-07-10T14:46:25.420
> 
> 标签：c#, .net, dependency-injection, structuremap

我有以下课程：

```
public interface IRenderer<T> 
{
    string Render(T obj);
}

public class Generic<T> { }

public class SampleGenericRenderer<T> : IRenderer<Generic<T>>
{
    public string Render(Generic<T> obj)
    {
        throw new NotImplementedException();
    }
} 
```

我希望能够调用 StructureMap `ObjectFactory.GetInstance<IRenderer<Generic<string>>>();`并接收`SampleGenericRenderer<string>`。

我目前正在使用以下注册并在调用 GetInstance 时收到此错误。“无法转换类型的对象：

> ConsoleApplication1.SampleGenericRenderer'1[ConsoleApplication1.Generic'1[System.String]]' 输入'ConsoleApplication1.IRenderer'1[ConsoleApplication1.Generic'1[System.String]]。

```
public class CoreRegistry : Registry
{
    public CoreRegistry()
    {
        Scan(assemblyScanner =>
        {
            assemblyScanner
                .AssemblyContainingType(typeof(IRenderer<>));
            assemblyScanner.AddAllTypesOf(typeof(IRenderer<>));
            assemblyScanner
                .ConnectImplementationsToTypesClosing(
                    typeof(IRenderer<>));
        });
    }
} 
```

有没有办法配置 StructureMap 以便它创建`SampleGenericRenderer<string>`而不是`SampleGenericRenderer<Generic<string>>`？

更新：我最终自己为这部分依赖项进行了类型构造。因为它们将上下文绑定与许多不受支持的泛型绑定结合在一起，所以这被证明是最干净的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:19:40.750

正如 Pete 解释的那样，StructureMap 可能无法做到这一点。其他 DI 容器可能会取得更大的成功，但并非所有容器都对更复杂的通用技巧有很好的支持。我确定的唯一一个允许你这样做的是[Simple Injector](https://simpleinjector.org)。使用 Simple Injector，您只需要以下配置：

```
var container = new Container();

container.Register(typeof(IRenderer<>), typeof(SampleGenericRenderer<>));

// Usage
var renderer = container.GetInstance<IRenderer<Generic<string>>>();

renderer.Render(new Generic<string>()); 
```

可以在[此处](https://simpleinjector.readthedocs.io/en/latest/advanced.html#registration-of-open-generic-types)找到有关此方法的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:37:10.447

对我来说，这有效：

```
class Program
{
    static void Main()
    {
        ObjectFactory.Configure(x=>x.AddRegistry<CoreRegistry>());

        var instance = ObjectFactory.GetInstance(typeof(IRenderer<string>)) as IRenderer<Generic<string>>;

        var render = instance.Render(new Generic<string>());

    }
} 
```

这会引发异常：

```
ObjectFactory.GetInstance<IRenderer<Generic<string>>>(); 
```

你真正的问题是什么？

编辑：

`Generic<string>`在某些情况下，这也可以工作（如果您在设计时不知道）：

```
static void Main()
{
    ObjectFactory.Configure(x => x.AddRegistry<CoreRegistry>());

    var instance = ObjectFactory.GetInstance(typeof(IRenderer<string>));
    var methodInfo = instance.GetType().GetMethod("Render");
    methodInfo.Invoke(instance, new[] { new Generic<string>() });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T21:24:27.990

我不相信 StructureMap 有任何机制可以关闭这样的*内部*通用参数。

这并不理想，但您可以尝试创建自己的`IRegistrationConvention`，并且每当遇到封闭类型的类型时`Generic<>`，请执行以下操作：

```
var generic_t = typeof(Generic<>).MakeGenericType(type);
var sample_renderer_t = typeof(SampleGenericRenderer<>).MakeGenericType(type);
var renderer_t = typeof(IRenderer<>).MakeGenericType(generic_t);
graph.AddType(renderer_t, sample_renderer_t); 
```

有关详细信息，请参阅[http://docs.structuremap.net/ScanningAssemblies.htm#section11 。](http://docs.structuremap.net/ScanningAssemblies.htm#section11)

# unicode - 不同用户的 Nsis 快捷方式

> ID：11415916
> 
> 赞同：0
> 
> 时间：2012-07-10T14:46:26.820
> 
> 标签：unicode, nsis, shortcuts

建议 Nsis – windows7 我在同一台计算机上有两个用户（管理员和标准），我将在登录到标准用户时运行我的 nsis 安装程序。我的问题是我需要在两个桌面上创建快捷方式！！例子

标准用户 - 桌面 - 快捷方式 1 - 快捷方式 2 - 快捷方式 3

管理员用户 - 桌面 - 快捷方式 2 - 快捷方式 4

我是 nsis 的新手——我已经设法在标准用户帐户上创建了快捷方式——如果它有助于我知道管理员用户名和密码。

[NSIS - 所有用户的桌面快捷方式](https://stackoverflow.com/questions/7501193/nsis-desktop-shortcut-for-all-users) 我看到了这个链接，但是当我尝试时它似乎不起作用

```
CreateShortCut "${ProfilePathAllUsers}\Desktop\simpleApp.lnk" "$INSTDIR\ApplicationsLocation\ Applications.simpleApp.Host.exe" 
```

我担心我可能会走错方向——我也在使用 Unicode Nsis

欢迎任何建议 - 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:03:56.970

您不能在没有管理员权限的情况下写入其他用户配置文件，因此[请确保您已被提升](https://stackoverflow.com/a/8825202/3501)。

恕我直言，为另一个用户创建快捷方式是错误的。如果您想为所有用户创建快捷方式，您可以执行以下操作：

```
; This code assumes you are elevated...
SetShellVarContext all
CreateShortcut "$desktop\myapp.lnk" "$instdir\myapp.exe" 
```

如果您真的想为单个用户执行此操作，知道用户名/密码确实会有所帮助；您必须使用系统插件调用[LogonUser](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx) + [SHGetFolderPath](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181%28v=vs.85%29.aspx)来获取路径（或您链接到但使用未记录内容的代码）。

# android - 从应用程序小部件开始计时器 onClick 按钮

> ID：11415921
> 
> 赞同：0
> 
> 时间：2012-07-10T14:46:41.480
> 
> 标签：android, android-widget, countdowntimer

我创建了一个`widget`，其中包含一个发送消息的按钮。

现在我想`disable the same button for 5 Sec after it has been clicked`。5 秒后，用户应该能够再次发送消息。

我该如何实施？

任何网址/想法表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:48:43.430

使用 Android [`Handler`](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)postDelayed 方法

```
myButton.setEnabled(false);
new Handler().postDelayed(new Runnable() {
    @Override
    public void run() {
        myButton.setEnabled(true);
    }
}, 5000); // 5 seconds delay 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:57:53.223

单击按钮时禁用该按钮，然后将警报设置为`AlarmManager`在 5 秒内响起。

设置警报以向您的应用程序小部件发送更新，附加功能中的一些标志将记录它以启用按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:48:58.930

您始终可以将其设置为在另一个上运行`Thread`，即首先在单独的线程中禁用`Button`,`sleep(5000)`然后发布到 a`Handler`并再次启用该按钮。

# sql - 在 SQL Server 中使用 Royal Mail PAF 文件

> ID：11415922
> 
> 赞同：2
> 
> 时间：2012-07-10T14:46:42.080
> 
> 标签：sql, tsql

我被赋予了一项令人沮丧的任务，即尝试对我们刚刚购买的 Royal Mail PAF 文件做一些事情，我现在已将所有相关表加载到我们的 SQL 服务器中，并根据相关 ID 将它们链接在一起。我现在需要做的是根据多个规则将正确的地址放在一起，例如，如果仅提供建筑物名称或编号，或者在给定特定邮政编码时提供邮政信箱。我希望由于这似乎是一个被广泛使用的文件，有人可能已经为此做了一些工作，任何人都可以在本周末之前提出任何他们想要的想法。

希望有人可以帮忙，P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:42:41.653

沮丧-这是一项大工作-很多规则很多例外。我认为您已经看过 PAF 程序员指南中的所有规则？[http://www.royalmail.com/sites/default/files/docs/pdf/programmers_guide_edition_7_v5.pdf](http://www.royalmail.com/sites/default/files/docs/pdf/programmers_guide_edition_7_v5.pdf) 如果您希望在本周末完成，您最好获得实际上是扩展的“压缩标准”版本您所追求的地址，但当然它没有针对数据库进行规范化。很久以前，我从关系格式构建地址。我看看能不能找到代码。

发现一些丑陋的 8 岁 Perl - 谨慎使用

```
 while ( <PAF> )  # Reading from mysql view - you can work this out from the fields populated by the split /\t/
    {
      chomp;
      $incount++;
      print STDERR "Processed ..... $incount\n" if $incount%1000000 == 0;

      my ( $postcode       , $aKey           , $lkey        , $skey         , 
           $sekey          , $dskey          , $dsekey      , $bnumber      ,
           $bkey           , $sbkey          , $households  , $oKey         ,
           $fmtPcType      , $concat         , $dps         , $fmtsUser     ,
           $poBox          , $version        , $active      , 
           $fmtCompany     , $fmtDepartment  , $rawSubLine  , $rawBldLine   , 
           $DepSteet       , $fmtDepSteetEnd , $Steet       , $fmtSteetEnd  , 
           $DepLocality    , $Locality       , $PostTown )
           = split /\t/ , $_ , -1 ;

      my $fmtaKey  = sprintf("%08s",$aKey);
      my $fmtoKey  = sprintf("%08s",$oKey);

      $fmtoKey = "" if $fmtoKey eq "00000000" ;
      $fmtoKey = $fmtaKey if $fmtPcType eq "L"; 

      $fmtDepLocality       = removePunch($DepLocality);
      $fmtLocality          = removePunch($Locality,"dq");
      $fmtDepSteet          = removePunch($DepSteet);
      $fmtSteet             = removePunch($Steet,"dh");
      $rawSubLine           = removePunch($rawSubLine,"d");
      $rawBldLine           = removePunch($rawBldLine,"d");
      my $fmtPostTown       = removePunch($PostTown);

      my ($opc,$ipc) = unpack("A4A3" ,$postcode);

      $opc =~ s/\s$//;

      my $fmtPoBox      = "PO BOX $poBox"  if (length($poBox) > 0);  

      my ($fmtSubBuilding , $fmtBuilding ) = ( "","") ;

      # ##############################################################################
      # Format rules are based on presence of builing name , subbuilding and number
      # See PAF Digest for details
      # ##############################################################################

      my ($subBuildingFlag,$buildingFlag,$buildingNumberFlag) = ("N","N","N") ;

      $buildingNumberFlag ="Y" if $bnumber ne "0" ;
      $buildingFlag       ="Y" if length($rawBldLine) > 0;
      $subBuildingFlag    ="Y" if length($rawSubLine) > 0;

      my $formatKey="${subBuildingFlag}${buildingFlag}${buildingNumberFlag}";
      my $ruleid ;
      # ----------------------------------------------------------------------------
      # Formmating Rule 1 (Org name only)
      # ----------------------------------------------------------------------------

      if ( $formatKey eq "NNN" )
      {
          $ruleid="1";
      }

      # ----------------------------------------------------------------------------
      # Formmating Rule 2 (Building number only)
      # ----------------------------------------------------------------------------

      elsif ( $formatKey eq "NNY" )
      {
        $ruleid="2";

        InsertNumber ($bnumber) ;
      }

      # ----------------------------------------------------------------------------
      # Formmating Rule 3 (Building Name only)
      # ----------------------------------------------------------------------------

      elsif ($formatKey eq "NYN")
      {
        $ruleid="3";
        my $N="";

        ($fmtBuilding,$N) = split /\|/ , F1Check ($rawBldLine) , -1 ;

        InsertNumber ($N) ;
      }

      # ----------------------------------------------------------------------------
      # Formmating Rule 4 (Building Name and building Number)
      # ----------------------------------------------------------------------------

      elsif ($formatKey eq "NYY")
      {
        $ruleid="4";
        $fmtBuilding  = "$rawBldLine";
        InsertNumber ($bnumber) ;
      }

      # ----------------------------------------------------------------------------
      # Formmating Rule 5 (SubBuilding Name and building Number)
      # ----------------------------------------------------------------------------

      elsif ($formatKey eq "YNY")
      {
        $ruleid="5";

        if ($concat eq "Y")
        {
          my $numSub  = "$bnumber $rawSubLine";
          InsertNumber ($numSub) ;
        }
        else
        {
          $fmtSubBuilding = "$rawSubLine";
          InsertNumber ($bnumber) ;
        }

      }

      # ----------------------------------------------------------------------------
      # Formmating Rule 6 (SubBuilding Name and building name)
      # ----------------------------------------------------------------------------

      elsif ($formatKey eq "YYN" )
      {

         $ruleid="6";
        ($fmtSubBuilding,$N1) = split /\|/ , F1Check ($rawSubLine) , -1 ;
        ($fmtBuilding,$N2) = split /\|/ , F1Check ($rawBldLine) , -1 ;

        if ( $fmtSubBuilding eq "" )
        {
          if ( $N2 =~ /^REAR OF/ )
          {
            $fmtSubBuilding .= "$N1 $N2" ;
            $N1 = "" ;
            $N2 = "" ;
          }
          else
          {
            $fmtSubBuilding .= "$N1 " . $fmtBuilding;
            $fmtBuilding = "";
            $N1 = "" ;
          }
        }

        $N2 = $N1 if $N2 eq "";
        InsertNumber ($N2) ;
      }

      # ----------------------------------------------------------------------------
      # Formmating Rule 7 (SubBuilding Name ,building name and building number)
      # ----------------------------------------------------------------------------

      elsif ($formatKey eq "YYY" )
      {
        $ruleid="7";
        ($fmtSubBuilding,$N1) = split /\|/ , F1Check ($rawSubLine) , -1 ;
        ($fmtBuilding,$N2) = split /\|/ , F1Check ($rawBldLine) , -1 ;

        if ( $fmtSubBuilding eq "" )
        {
          $fmtSubBuilding .= "$N1 " . $fmtBuilding;
          $fmtBuilding = "";
        }

        InsertNumber ($bnumber) ;
      }

      # ##############################################################################
      # Format the address
      # ##############################################################################

      #----------------------------------------------------------------
      # subbuilding = building if no subbuilding (why?)
      #----------------------------------------------------------------

      if (( length($fmtBuilding) > 0) &&  ($fmtSubBuilding eq "" ))
      {
        $fmtSubBuilding = $fmtBuilding;
        $fmtBuilding = "";
      }

      #----------------------------------------------------------------
      # Get rid of duplicate lines
      #----------------------------------------------------------------

      if ("${fmtSubBuilding}${fmtBuilding}" eq "${fmtSteet}${fmtSteetEnd}") 
      {
        $fmtSubBuilding="";
        $fmtBuilding=""; 
      }

      #----------------------------------------------------------------
      # Parse out number ranges (including number suffixes)
      #----------------------------------------------------------------  

      my ($fmtStreetName ,$lo_num , $low_suf , $hi_num ,$hi_suf) = split /\|/ ,  getLoHiNum ("$fmtSteet") , -1 ;
      my $dependentTfare = "$fmtDepSteet";
      $dependentTfare .= " $fmtDepSteetEnd" if length($fmtDepSteetEnd) > 0;

    # ABERDEEN CITY COUNCIL|EDUCATION DEPARTMENT||ST NICHOLAS HOUSE||||BROAD|STREET|||ABERDEEN|ABERDEENSHIRE|AB10|1AG|1A|0|01901355|01901355|L||

     my $fmtaddr .=  "$postcode|$dps|$fmtaKey|$fmtoKey|$fmtPoBox|$fmtSubBuilding|$fmtBuilding|$fmtDepSteet|$fmtDepSteetEnd|" ;
        $fmtaddr .=  "$fmtSteet|$fmtSteetEnd|$fmtDepLocality|$fmtLocality|$fmtPostTown|$opc|$ipc|"  ;
        $fmtaddr .=  "$ruleid|$lo_num|$low_suf|$hi_num|$hi_suf|$dependentTfare|$fmtStreetName";

     print "$fmtaddr\n";
    }

    close PAF;

    # # ############################################################################
    # SUB F1Check (PAF Digest Note:1 Page 42)
    #
    # Try and extract a number embeded in the (sub)building name
    # There are loads of exceptions to the rules in the PAF digest
    # hence the horrible regex's
    # # ############################################################################

    sub F1Check
    {

      my ($building) = (@_);

      my $bnumber = "";

     if ($building =~ m/^REAR OF.+\d/ )
     {
        $bnumber=$building;
        $building="" ;
     }

     elsif (($building =~ m/\d+/) && ($building !~ /UNIT[S]?\s|
                                                  FLAT[S]?\s|
                                                  ^DP\d+[A-Z]?$|
                                                  BLOCK[S]?\s|
                                                  ^OFFICE[S]?\s|
                                                  HANG[EA]R\s|
                                                  ^BUILDING[S]?\s|
                                                  ^HOUSE\s|
                                                  HOLDING\s|
                                                  APARTMENT\s|
                                                  CHALET\s|
                                                  ^BUNGALOW\s|
                                                  ^CARAVAN\s|
                                                  ^ANNEXE\s|
                                                  ^PLOT[S]?\s|
                                                  ^HOME[S]?\s|
                                                  ^LODGE\s\d|
                                                  ^PLATFORM\s|
                                                  ^DOMUS\s|
                                                  ^BARLOW\s|
                                                  ^BEALAH\s|
                                                  ^KIOSK[S]?\s|
                                                  ^LEVEL[S]?\s|
                                                  ^VILLA\s|
                                                  MEOTA\s|
                                                  MAXI[NM]\s|
                                                  ^AQUEOUS\s|
                                                  SUITE[S]?\s|
                                                  WING\s|
                                                  ^CAMPUS\s|
                                                  ^STUDIO\s|
                                                  ^COTTAGE\s|
                                                  ^STALL\s|
                                                  ^SHOP\s|
                                                  ^ARCH\s|
                                                  ^QUAY\s|
                                                  ^ABOVE\s\d|
                                                  ^LINK\s|
                                                  JETTY\s|
                                                  WAREHOUSE\s|
                                                  ^HOLDING\s|
                                                  ^PENTHOUSE\s|
                                                  ^MOORING\s|
                                                  ^BOTHY\s|
                                                  ^MAISONETTE\s|
                                                  ^SITE\s|
                                                  ^WORKSHOP\s|
                                                  ^BARN[S]?\s|
                                                  STALL\s|
                                                  ^BOAT\s|
                                                  ^STAND\s|
                                                  ^TOWER\s\d|
                                                  ^YARD\s\d|
                                                  ^STANCE\s|
                                                  ^VAN\s|
                                                  ^BAY\s\d|
                                                  ^MOBILE HOME\s|
                                                  ^STABLE\s|
                                                  ^ROOM\s|
                                                  ^[A-Z]\d+$
                                                  /xo
                                                  ))
      {

        if  ( $building =~ m/^([A-Z]?\d+[A-Z]{0,2}|
                            \d+[A-Z]{0,2}[\-\&\ \\\/]{0,1}\d+[A-Z]{0,2}|
                            [A-Z])$/ox )
        {
          $bnumber=$building;
          $building="" ;
        }
        elsif  ($building =~ m/^([A-Z]?\d*\s*[A-Z\s\.]+)(\d+[A-Z]{0,2}[\-\&\ \\\/]{0,1}\d*[A-Z]{0,2})$/o)
        {
          if (length($1) > 2)
          {
            $bnumber=$2;
            $building=$1;
            $building =~ s/\s+$//g;
          }
        }
       elsif   ($building =~ m/^(\D+)(\d+[A-Z]{0,2}[\-\&\ \\\/]\d+[A-Z]{0,2})$/)
       {
        $bnumber=$2;
        $building=$1;
        $building =~ s/\s+$//g;
       }  
     }   
     return "$building|$bnumber"
    }

    # # ############################################################################
    # SUB InsertNumber
    #
    # Prepend number to first non blank line from thoroughfare onwards
    # # ############################################################################

    sub InsertNumber
    {
        my ($N) = (@_) ;

        if ( $N =~ /\d/  && $N ne "0")
        {
          if    (length($fmtDepSteet)     > 0)  {$fmtDepSteet    = $N . " " . $fmtDepSteet ;}
          elsif (length($fmtSteet)  > 0)  {$fmtSteet  = $N . " " . $fmtSteet;}
          elsif (length($fmtDepLocality)    > 0)  {$fmtDepLocality    = $N . " " . $fmtDepLocality ;}
          else                              {$fmtLocality     = $N . " " . $fmtLocality;} ;
        }
    }

    # # ############################################################################
    # SUB getLoHiNum
    #
    # Extract number ranges 
    # # ############################################################################

    sub getLoHiNum
    {

      my ($tfare) = (@_) ;

      my ($lonum,$losuf,$hinum,$hisuf) = ( "","","","");

    # extract numbers and suffixes  
      my ($num,$tt) = ($tfare=~ /^(\d+[A-Z]?[\-]?\d*[A-Z]?)\s(.*)$/ );

      if (length($num) > 0)
      {
        $tfare = $tt ;
        if ( $num =~ m/[\-]{1}/ ) 
        {
          ($lonum,$hinum) = ($num=~ /(\d+.*)[\-](\d+.*)/ ); 
        }
        else
        {
          $lonum = $num;
        }

        if ( $lonum =~ m/[A-Z]$/ ) 
        {
          ($lonum,$losuf) = ($lonum=~ /(\d+)([A-Z])$/ ); 
        }

        if ( $hinum =~ m/[A-Z]$/ ) 
        {
          ($hinum,$hisuf) = ($hinum=~ /(\d+)([A-Z])$/ ); 
      }
      }
      return "$tfare|$lonum|$losuf|$hinum|$hisuf" ;
    }

    # # ############################################################################
    # SUB removePunch
    #
    # Remove punchuation
    # # ############################################################################

    sub removePunch
    {

      my ($dirtyWord,$punch) = (@_) ;
      $punch = "dhqa" if length($punch) == 0;

      $dirtyWord =~ s/\.//g     if $punch =~ m/d/ ;
      $dirtyWord =~ s/\-/ /g    if $punch =~ m/h/ ;
      $dirtyWord =~ s/\'//g     if $punch =~ m/q/ ;
      $dirtyWord =~ s/\@//g     if $punch =~ m/a/ ;

      return $dirtyWord;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-03T10:18:04.613

万一其他人遇到这个问题，如果我正确理解了这个问题，从数据文件中重新构建地址，RM PAF 文件中的列的顺序是相反的。因此，要构建一个简单的地址字符串，从右到左检查列，您只需检查每个列的值，如果有，则用空格将其连接到地址字符串中。如果您查看一些使用每个字段的示例，您可以计算出空格和逗号的解析。

# php - PHP：转换 mysql 代码以便它可以与 innodb 一起使用？

> ID：11415929
> 
> 赞同：0
> 
> 时间：2012-07-10T14:47:00.450
> 
> 标签：php, mysql, innodb, myisam, full-text-indexing

我已经从 myisam 迁移到 innodb，我不得不从表中删除全文索引。现在我的脚本的某些部分不起作用，我如何转换下面的代码以便它可以与 innodb 一起使用？

```
$posts_fields = "SELECT SQL_CALC_FOUND_ROWS id, autor, " . PREFIX . "_post.date AS newsdate, " . PREFIX ."_post.date AS date, short_story AS story, " . PREFIX . "_post.xfields AS xfields, title, descr, keywords, category, alt_name,comm_num AS comm_in_news, allow_comm, rating, news_read, flag, editdate, editor, reason, view_edit, tags, '' AS output_comms";
$posts_from = "FROM " . PREFIX . "_post";
$sql_find = "$sql_fields $posts_from $where"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:00:05.183

```
$posts_fields = "SELECT SQL_CALC_FOUND_ROWS id, autor, " . PREFIX . "_post.date AS newsdate, " . PREFIX ."_post.date AS date, short_story AS story, " . PREFIX . "_post.xfields AS xfields, title, descr, keywords, category, alt_name,comm_num AS comm_in_news, allow_comm, rating, news_read, flag, editdate, editor, reason, view_edit, tags, '' AS output_comms";
$posts_from = "FROM " . PREFIX . "_post";
$sql_find = "$sql_fields $posts_from $where"; 
```

应该改为

```
$posts_fields = "SELECT SQL_CALC_FOUND_ROWS id, autor, " . PREFIX . "_post.date AS newsdate, " . PREFIX ."_post.date AS date, short_story AS story, " . PREFIX . "_post.xfields AS xfields, title, descr, keywords, category, alt_name,comm_num AS comm_in_news, allow_comm, rating, news_read, flag, editdate, editor, reason, view_edit, tags, '' AS output_comms";
$posts_from = "FROM " . PREFIX . "_post";
$sql_find = "$post_fields $posts_from $where"; 
```

并仔细检查您的 where 条件

# android - 如何在不阻塞主线程的情况下获得流畅的动画？

> ID：11415939
> 
> 赞同：2
> 
> 时间：2012-07-10T14:47:16.463
> 
> 标签：android, animation, asynchronous, android-asynctask, surfaceview

基本上，在我的活动中，有两种方法，一种是动画的表面视图，另一种是具有动画的按钮。

最初我在表面视图中创建了一个异步任务，并在“onprogressupdate”方法中让它“绘制”。据我了解，这就是它的目的。

但是，每当我按下按钮时，表面视图就会停止，就好像按钮的动画正在停止表面视图的动画一样，这似乎是合乎逻辑的。

为了克服这个问题，我将“平局”放回“后台运行”。我有一种感觉，这显然是错误的。有没有办法可以运行这两个动画而不会互相阻塞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:49:30.660

您不应从 UI 线程外部访问 Android UI 工具包。如果您想`View`直接从 UI thrad 外部操作 a，则应[`View.post(Runnable)`](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)改为使用。例如，

```
public void onClick(View v) {
    new Thread(new Runnable() {
        public void run() {
            mButton.post(new Runnable() {
                public void run() {
                    // do something here
                }
            });
        }
    }).start();
} 
```

# stripe-payments - 条纹一次性付款。- Ruby on Rails

> ID：11415940
> 
> 赞同：8
> 
> 时间：2012-07-10T14:47:19.297
> 
> 标签：stripe-payments

我可以使用 Stripe 接收一次性付款而不是定期付款吗？

如果是这样，我必须进行哪些设置？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-11T21:43:40.477

是的，只需使用[Stripe::Charge.create](https://stripe.com/docs/api?lang=ruby#create_charge)方法。作为付款方式，您可以直接传递卡或参考应从其卡上收费的客户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T06:56:05.743

您可以通过 Stripe 仪表板接收一次性付款。去：

[https://dashboard.stripe.com/payments](https://dashboard.stripe.com/payments)

并单击“+新”付款按钮。这将让您手动输入抄送信息。我一直对我的[配对即服务](http://www.readysetrails.com/index.php/pairing-as-a-service/)客户这样做......他们只是向我阅读他们的卡信息，然后我输入我向他们收取的金额和描述。然后需要您的帐户密码才能完成收费。

它既快速又简单……我只是希望有一种方法可以让他们直接输入信息。也许我会做这样的事情......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-02T11:31:51.230

是的，您可以创建一个 Stripe 帐户，然后使用我最近为 Ruby on Rails 制作的 Stripe 付款的简单示例。检查代码：[https ://github.com/ab00zar/StripePayment-example](https://github.com/ab00zar/StripePayment-example)

使用您的测试密钥运行服务器，例如：

```
PUBLISHABLE_KEY=pk_test_g0XSu8r2ugAETksVJQXJjU30
SECRET_KEY=sk_test_A3rwGLOMNxEKDkaJOTgi4frd rails s 
```

# javascript - 保存 Backbone 模型时究竟会发生什么？

> ID：11415946
> 
> 赞同：11
> 
> 时间：2012-07-10T14:47:38.603
> 
> 标签：javascript, backbone.js

保存 Backbone 模型时究竟会发生什么？[通过阅读此处](http://backbonejs.org/#Model-save)的文档，这是我可以拼凑起来的最好的：

1.  `model.save([attributes], [options])`叫做
2.  触发“更改”事件（但前提是属性是新的）
3.  通知服务器更改？
4.  一旦服务器返回，就会调用“同步”事件

但我是一个骨干菜鸟，我相信其他人可以做更好的解释工作。

我部分只是好奇会发生什么。我也很难理解 Backbone 是如何提出它发送到服务器的 JSON 对象的。我有一个[单独的问题](https://stackoverflow.com/questions/11414271/templates-for-nested-attributes-with-backbone)，JSON 对象不是我想要的，但我不知道如何更改它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T15:18:55.507

详细过程可以在[Backbone.Model.save](http://backbonejs.org/docs/backbone.html#section-56)和[Backbone.sync的](http://backbonejs.org/docs/backbone.html#section-134)[注释源代码](http://backbonejs.org/docs/backbone.html)中找到。

如果你忽略`options.wait`and `options.silent`，你的分解大部分是正确的。

当您发出`model.save`：

1.  设置传递给函数的属性，如果值发生更改，则会触发更改事件
2.  `save`将请求委托给`model.sync`或`Backbone.sync`
3.  `sync`通过调用将数据序列化为 JSON 字符串`JSON.stringify(model.toJSON())`
4.  一个 Ajax 请求被发送到服务器，一个新对象的 POST 请求，一个更新的 PUT 请求。目标 URL 由`model.url`（或`collection.url/id`）定义
5.  当请求完成时，模型会使用服务器响应（如果有）进行更新，并相应地触发`change`事件。
6.  调用成功或错误回调，`sync`如果未定义成功回调，则触发事件。

通常，您可以通过覆盖`model.toJSON`或`model.sync`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T15:20:14.213

首先，建议你阅读backbone的源码，真的很简单。默认backbone和服务器端的交互是通过backbone.sync来实现的。

其次，可以再次trace debug model.save代码的方法，自然知道细节。我建议你从这里开始： [http://backbonejs.org/examples/todos/index.html](http://backbonejs.org/examples/todos/index.html)

# asp.net - 检查 url 参数是否存在时遇到问题

> ID：11415955
> 
> 赞同：2
> 
> 时间：2012-07-10T14:48:08.603
> 
> 标签：asp.net, razor

我在尝试查找我的 url 参数是否存在时遇到了一些麻烦。

我尝试了以下方法：

```
 // doesn't work
(Request.QueryString["showTop"] != "" && Request.QueryString["showTop"] != null)
 // doesn't work
(Request.Params["showTop"] != "" && Request.Params["showTop"] != null) 
```

我正在尝试找到正确的值。完整的声明如下所示：

```
showTop = (Request.QueryString["showTop"] != "" &&
           Request.QueryString["showTop"] != null) ? 
                     Request.QueryString["showTop"]  : (10).ToString(); 
```

**如果**showTop 存在且具有值，则效果很好。

这是在视图内完成的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T14:54:48.293

尝试以下操作：

```
showTop = string.IsNullOrEmpty(Request["showTop"]) ? "10" : Request["showTop"]; 
```

假设您希望“showTop”默认为“10”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:05:47.460

首先通过调用该方法检查 QueryString 是否有键。

```
bool qKeys = Request.QueryString.HasKeys(); 
```

# symfony - 路由，参数数量不限

> ID：11415965
> 
> 赞同：5
> 
> 时间：2012-07-10T14:48:46.667
> 
> 标签：symfony, routing

例如，链接：

```
/shop/phones/brend/apple/display/retina/color/red 
```

在哪里：

```
phones    - category alias
brend     - name of attribute;   apple    - attribute value
display   - name of attribute;   retina   - attribute value
color     - name of attribute;   red      - attribute value 
```

属性可以是任意数字。顺序也可能不同。

路线的开头很清楚：

```
/shop/{category} 
```

下一步该做什么还不清楚。

在 symfony 1 中，一组位于末尾的星号（“/shop/:category/*”）以及所有未明确标记的内容，并以一对

```
name -> value 
```

问题：如何在 symfony 2 中描述路由？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T22:39:09.273

路线：

```
my_shop:
  pattern: "/{path}"
  defaults: { _controller: "MyShopBundle:Default:shop" }
  requirements:
    path: "^shop/.+" 
```

然后你可以解析控制器中的 $path ：

```
class DefaultController extends Controller {
...
    public function shopAction($path) {
        // $path will be 'shop/phones/brend/apple/display/retina/color/red'
        ...
    }
...
} 
```

# xml - XML 反序列化

> ID：11415966
> 
> 赞同：0
> 
> 时间：2012-07-10T14:48:51.810
> 
> 标签：xml, xml-serialization

我正在对类进行 xml 字符串反序列化。但它没有发生。这是我的示例 xml：

```
<Transaction>
    <tag1 val1="1" val2="2">
        <subtag>somestring</subtag>
    </tag1>
<Transaction> 
```

我创建了这样的类：

```
[Serialzable]
Class Transaction
{
    [xmlElement]
    public string tag1;
}

[Serialzable]
Class tag1
{
    [xmlAttribute]
    public string val1;
    [xmlAttribute]
    public string val2;

    [xmlAttribute]
    public string subtag;

} 
```

现在，当我反序列化时，除了子标签值之外，一切都正常工作。它正在进入对象。我试图使它成为 XMLElement 和 XMLAttribute 两者但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:57:23.827

您的 Transaction 类看起来错误：我认为您的意思是该字段`public tag1 tag1;`

您在`tag1`类定义中装饰子标签字段的属性有误。它是一个元素，而不是 XML 中的属性。

您还需要从格式良好的 XML 开始：您的关闭 Transaction 标记缺少一个`/`

# ajax - XMLHttpRequest 状态码 -1 是什么意思？

> ID：11415967
> 
> 赞同：3
> 
> 时间：2012-07-10T14:48:57.143
> 
> 标签：ajax, internet-explorer, firefox, google-chrome, xmlhttprequest

我已将失败的 AJAX 请求的日志记录添加到我的应用程序中，并且我看到很多失败，状态代码为`-1`.

我在任何地方都找不到 -1 状态代码的定义。

有谁知道这代表什么？

我从 IE 8.0、Firefox 13、Chrome 20 等中看到它。它似乎不是特定于浏览器的怪癖。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:53:21.170

`-1`在增强了我们的日志记录以包含状态文本之后，代码的含义就很清楚了。`transaction aborted`是 Chrome 20 中显示的状态文本。

# javascript - JavaScript 时钟（计时器）从存储在 asp 隐藏字段中的提供的时间跨度开始

> ID：11415971
> 
> 赞同：0
> 
> 时间：2012-07-10T14:49:00.340
> 
> 标签：javascript, jquery, asp.net, .net, timer

```
<html>
<head>
    <title>Digital clock</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <link href="../Styles/jquery.alerts.css" rel="stylesheet" type="text/css" />
    <script src="../Scripts/jquery.alerts.js" type="text/javascript"></script>
</head>
    <body onunload="return returnTime()" >
        <script language="JavaScript" type="text/javascript">
            function returnTime() {
                var closeTime = new Date();
                window.returnValue = closeTime;
            }
            function CloseWindow() {
                window.close();
            }
        </script>
    <body onload="timer()" >
    <style type="text/css">
        #time{
        font-size:50pt;
        }
        #body
        {
            background-color:#F3F3F3;
        }
    </style>
    <script type="text/javascript">
        var digiclock = "00:00:00";
        i = 0;
        function timer() {
            var digiformat = "";
            if (i > 3599) {
                var H = Math.floor(i / 3600);
            }
            else {
                var H = 0;
            }

            var M = i - (H * 3600)

            if (M > 59) {
                M = Math.floor(M / 60)
            }
            else {
                M = 0
            }
            var S = i - (M * 60)
            if (H < 10) {
                H = "0" + H;
            }
            if (M < 10) {
                M = "0" + M;
            }
            if (S < 10) {
                S = "0" + S;
            }
            document.getElementById('time').innerHTML = H + ":" + M + ":" + S;
            setTimeout('timer()', 1000);
            i++;
        }
    </script>
        <table style="background-color:#F3F3F3;">
            <tr>
                <td><div><center><p style="font-family:Calibri;font-size:1.8em;color:#104E8B;">Total Elapsed Time</p> </center></div>
                </td>
            </tr>
            <tr>
                <td><div id="time"><center>90</center></div>
                </td>
            </tr>
            <tr>
                <td>
                    <center>
                    <form runat="server">
                        <asp:Button ID="btnStop" runat="server" Text="Stop"
                            style="width:150px;height:30px;font-weight:bold;background-color:#104E8B;color:White;border:1px solid"
                            onclick="btnStop_Click" /></form></center>
                            <input id="HiddenTaskname" type="hidden" value="" runat="server" />
                        </td>
            </tr>
        </table>
    </body> 
```

上面您可以看到，当上面的页面打开时，计时器（时钟）从 00:00:00 开始。我想以这样的方式更新它，使它从提到的指定时间开始。例如，如果我们将参数作为 14:30:58 传递给该页面，那么计时器将从 14:30:58 开始，以此类推。我将从查询字符串中传递此参数并将其存储在此页面的 asp 隐藏字段中。请帮助我更新上面的代码，使其满足我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:13:46.383

`var digiclock = "<%= Request.QueryString["QueryStringVariableName"] %>";`

应该可以，还没有测试过，您可能需要将双引号更改为单引号。我不是专业人士，所以玩它。

# html - 为什么我的页面超出了我的内容？

> ID：11415974
> 
> 赞同：2
> 
> 时间：2012-07-10T14:49:08.483
> 
> 标签：html, css, layout, removing-whitespace

我在这里创建自己的网页：http: [//tinyurl.com/7n8jxbt](http://tinyurl.com/7n8jxbt)

问题是在页脚之后，有相当多的空白。我在除了 Mozilla Firefox 之外的所有东西中都看到了这个空白。

我尝试使用检查元素来确定占用空间的内容，但它说什么都没有。

有谁知道为什么所有这些空间都在那里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:58:47.340

您的 CSS 文件有问题（第 1 行）

```
font-family: Georgia, "Times New Roman", Times, serif width:100% 
```

可能由于这个小错误，浏览器读取 CSS 文件的其余部分完全错误。因此，将`width`放在新行上并用分号关闭该`font-family`行。`serif``;`

编辑：我的头疼的评论似乎是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:59:25.403

问题在于`span`with `id="SideWord"`。从此元素中删除样式`margin-top:100%`，空白将消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:59:33.183

它是旋转的边词元素，并为文档提供高度。

您可能不需要边距或顶部设置

# ruby-on-rails-3 - 如何在轨道上使用 PIE 和 Compass？

> ID：11415976
> 
> 赞同：2
> 
> 时间：2012-07-10T14:49:10.810
> 
> 标签：ruby-on-rails-3, css, compass-sass, css3pie

在阅读文档并查看类似问题后，我无法理解如何在轨道上使用 PIE 和指南针。

```
@import compass/css3/pie 
```

接下来或之前是什么？我要安装派吗？好的，我已经运行`@ compass install compass/pie`它似乎还没有结束。

您能否提供一个分步说明如何向元素添加简单的混合以使其在 IE 中工作？提前致谢！

# javascript - 根据复选框的选择设置 div

> ID：11415980
> 
> 赞同：0
> 
> 时间：2012-07-10T14:49:36.883
> 
> 标签：javascript, css

我在页面顶部有 4 个复选框，并且有 4 个相应的 div 元素。如果选择了相应的复选框并且要隐藏其他 div，我需要显示 div。我已经实现了这一点，但无法正确定位它们。

例如，如果我选择了第 3 个复选框，则与第 3 个复选框对应的 div 应该显示在顶部。然后，如果我选择第一个复选框，则应首先显示与第一个复选框对应的 div，然后显示与第三个复选框对应的 div。然后，如果我选择第二个复选框，则第二个 div 应该显示在第一个和第三个 div 之间。

隐藏功能工作正常。但就 div 的位置而言，第 3 个 div 显示在第 3 个位置（这意味着页面顶部有一个空间，对应于前两个 div）。下面是我使用的 html 文件和 java 脚本：

```
<html> 
<head> 
<title>Checkbox Event Handler</title> 

<script type="text/javascript"> 

function toggle(chkbox, group) { 
    var visSetting = (chkbox.checked) ? "visible" : "hidden"; 
    document.getElementById(group).style.visibility = visSetting; 
 document.getElementById(group).style.position = absolute;
} 

function hideLayer() {
document.getElementById('myGroup1').style.visibility = 'hidden';
document.getElementById('myGroup2').style.visibility = 'hidden';
document.getElementById('myGroup3').style.visibility = 'hidden';
document.getElementById('myGroup4').style.visibility = 'hidden';
}

</script> 
</head> 
<body onload="hideLayer();"> 
<form> 
<input type="checkbox" name="section1" onclick="toggle(this, 'myGroup1')" />Section1
<input type="checkbox" name="section2" onclick="toggle(this, 'myGroup2')" />Section2
<input type="checkbox" name="section2" onclick="toggle(this, 'myGroup3')" />Section3
<input type="checkbox" name="section2" onclick="toggle(this, 'myGroup4')" />Section4

<div id="myGroup1" >
<table >

<tr><td>ID </td><td><input type="text" name ="tid" id="tid" size="20"></input></td></tr>
<tr><td>Name </td><td><input type="text" name = "tname" id="tname" size="20"></td></tr>
<tr><td>Height </td><td><input type="text" name = "theight" id="theight" size="20"></td></tr>
<tr><td>Location </td><td><input type="text" name = "tloc" id="tloc" size="20"></td></tr>
</table>
</div>
<div id="myGroup2" >
<table>
<tr><td><input type="button" name ="B1" id="B1" value="SomeName" ></td>
<td><input type="button" name ="B2" id="B2" value="Retrieve" >
<input type="button" name ="B3" id="B3" value="Retrieve All" >
<input type="button" name ="B4" id="B4" value="Load Data" >
</td></tr>

</table>
</div>

<div id="myGroup3">
  <table >

<tr><td>City </td><td><input type="text" name = "tcity" id="tcity" size="20"></td></tr>
<tr><td>State </td><td><input type="text" name = "tstate" id="tstate" size="20"></td></tr>
<tr><td>Country </td><td><input type="text" name = "tcountry" id="tcountry" size="20"></td></tr>
</table>
</div>
<div id="myGroup4">
<table>
<tr><td><input type="button" name = "B4" id="B4" value="SomeButton" ></td>
<td><input type="button" name ="B5" id="B5" value="Store" >
<input type="button" name ="B6" id="B6" value="Clear All" >
<input type="submit" name ="B7" id="B7" value="Submit"></td></tr>

</table>
</div>
</form> 
</body> 
</html> 
```

我使用“document.getElementById(group).style.position = absolute”来设置位置，但不确定如何使用它。请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:53:28.310

`visibility:hidden`使 div 不出现但仍存在于布局中。

With`display:none`元素将被隐藏，页面将显示为好像该元素不存在

**编辑**

这是我如何让它工作[JSFiddle](http://jsfiddle.net/vregn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:53:39.857

改变

```
document.getElementById('myGroup1').style.visibility = 'hidden'; 
```

到

```
document.getElementById('myGroup1').style.display= 'none'; 
```

对每个 div 执行此操作

# iphone - 适用于 iPad 的横向和纵向图形

> ID：11415981
> 
> 赞同：0
> 
> 时间：2012-07-10T14:49:38.783
> 
> 标签：iphone, ipad, uiview, uiimageview, orientation

我有一个带有两个自定义布局的视图，一个用于横向，一个用于纵向。这些视图对象（当前）也有两个图像，每个视图一个。

示例：一个图像有一个文本组件。为了避免拉伸图像，我们制作了一张纵向和一张横向。

我要避免的是一堆 if 语句，它们确定显示哪个方向以及使用哪个图像。有没有办法避免所有这些额外的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:58:23.593

有点...使用相应设置的图像名称。我的意思是您可以将它们命名为 image_portrait.png 和 image_landscape.png，然后在您的`willRotateToInterfaceOrientation..`方法中执行以下操作：

```
NSString *orientation = (UIInterfaceOrientationIsPortrait(orientation)) ? @"portrait" : @"landscape";
[imgView setImage:[UIImage imageNamed:[NSString stringWithFormat:@"image_%@",orientation]]]; 
```

我不知道你能做的比这更多。当然，这看起来并没有太大的改进，但是如果您有更多图像，它将非常有用。

希望这可以帮助。

干杯!

# php - 从 Symfony DI 组件获取新的实体实例

> ID：11415990
> 
> 赞同：1
> 
> 时间：2012-07-10T14:50:09.027
> 
> 标签：php, symfony, dependency-injection

我在理解如何在这种情况下实施最佳 DI 实践时遇到了一些麻烦。

我有一个实施了 Symfony2 DI 容器的 ZF1 项目。我所有的服务类等都是通过 DI 容器创建的，我现在正在重构我的服务类本身的依赖关系。到目前为止一切顺利，但现在我偶然发现了一个问题，我需要创建一个 Doctrine 实体的 X 实例，但我不知道如何将依赖关系从服务类抽象到容器中。它不是一个真正的单类实例，因此不能在构造时注入。

有几种情况浮现在脑海中，我正在寻求建议，首选的道路是什么。

1.  获取对 DI 容器的引用并在需要时从中获取新实例，这有一个缺点，现在我的 Service 类将依赖于 DI 容器，恕我直言，它正在用更多的邪恶来修复邪恶。

2.  打电话给工厂，我已经阅读了 symfony DI 容器中的工厂实现，但看不到这对我有什么帮助。也许我错过了什么？

3.  注入实体 className 并动态实例化实例。因此，与其`new \My\Entity()`做做`new $this->entityClass`，不如说实话，这闻起来太老实了，但可以工作。

4.  ??

谁能告诉我这些场景通常是如何使用 symfony2 DI 容器解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:39:01.177

除了实体管理器本身之外，您不需要向服务类注入任何东西来创建实体。

因为除非我误解了你，否则你只是在谈论导入正确的命名空间并完成整个

```
$e = new Entity();
$em->persist( $e );
$em->flush(); 
```

舞蹈。不？

# c# - NHibernate 重新创建每个关联的项目

> ID：11415991
> 
> 赞同：4
> 
> 时间：2012-07-10T14:50:13.480
> 
> 标签：c#, .net, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有一个非常简单的对象模型。

```
public class Contact
{
    public virtual int Id                { get; set; }
    public virtual string Name           { get; set; }
    public virtual Device Device         { get; set; }
    public virtual IList<string> Numbers { get; set; }

    public Contact()
    {
        Numbers = new System.Collections.Generic.List<string>(3);
    }
} 
```

如您所见，Contact 类与 Numbers 有关联，Numbers 是一个字符串列表。

这是映射：

```
 Id(x => x.Id).GeneratedBy.Assigned();
        Map(x => x.Name);
        References(x => x.Device, "DeviceId");
        Table("Contacts");
        HasMany(x => x.Numbers)
            .Table("ContactNumbers")
            .Element("Number")
            .KeyColumn("ContactId")
            .LazyLoad()
            .Cascade.All()
            .Not
            .Inverse(); 
```

请注意，我不能也不希望集合为 inverse=true，因为它只是字符串的集合。这意味着 Contact 负责更新 Numbers 条目。现在我的问题是，每当我尝试向现有联系人添加新号码时，它都会删除所有关联的号码并单独重新创建它们。NHibernate 还不够聪明，无法检测更改并仅更新更改的项目吗？

我认为应该有一个简单的解决方案来解决我的问题，但不知道是什么。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T15:10:42.853

这实际上[记录](http://www.nhforge.org/doc/nh/en/index.html#performance-collections)在 NHibernate 的文档中。

> 包是最坏的情况。由于包允许重复的元素值并且没有索引列，因此可以不定义主键。NHibernate 无法区分重复的行。NHibernate 通过完全删除（在单个 DELETE 中）并在集合发生更改时重新创建集合来解决此问题。这可能是非常低效的。

尝试改用[`<idbag>`](http://www.nhforge.org/doc/nh/en/index.html#collections-idbag)映射，并为该表创建代理主键。`<idbag>`不幸的是，看起来[FluentNHibernate](https://github.com/jagregory/fluent-nhibernate/blob/master/src/FluentNHibernate/Mapping/ToManyBase.cs)[尚不支持](http://notherdev.blogspot.com/2012/02/mapping-by-code-list-array-idbag.html)。

此外，请查看其他[集合映射选项](http://nhibernate.hibernatingrhinos.com/17/mapping-collections-in-nhibernate-part-1)。

# cron - cron-expression 元素无效

> ID：11415992
> 
> 赞同：4
> 
> 时间：2012-07-10T14:50:25.193
> 
> 标签：cron, quartz.net, cronexpression, quartz.net-2.0

我正在尝试使用quartz_jobs.xml 来安排我的所有工作，但以下XML 会导致错误：

> cron-expression 元素无效。值 '0 0 23 1/1 * ? *' 根据其数据类型是无效的。

这是 XML：

```
<?xml version="1.0" encoding="utf-8" ?>
<job-scheduling-data xmlns="http://www.quartz-scheduler.org/xml/JobSchedulingData"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.quartz-scheduler.org/xml/JobSchedulingData http://www.quartz-scheduler.org/xml/job_scheduling_data_1_8.xsd"
  version="1.8">
  <schedule>
    <job>
      <name>AUI</name>
      <group>Group1</group>

      <description>Archive Unpublished Incidents</description>
      <job-class>ArchiveUnpublishedIncidents</job-class>
    </job>
    <trigger>
      <cron>
        <name>AUITrigger</name>
        <group>TriggerGroup1</group>
        <job-name>AUI</job-name>

        <job-group>Group1</job-group>
        <!-- trigger every night at 11 pm -->
        <cron-expression>0 0 23 1/1 * ? *</cron-expression>
      </cron>
    </trigger>
  </schedule>
</job-scheduling-data> 
```

那个 cron 表达式有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:55:17.203

[本文档](http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger)建议，如果您指定 7 个元素，则最后一个需要是一年或一年范围。年份字段被标记为可选，因此似乎不能指定为通配符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T23:21:08.950

只要给

0 0 23 1/1 * ?

删除问号后的 *，因为石英只需要 6 个字符。

# .net - 每小时自动执行一次存储过程

> ID：11415993
> 
> 赞同：0
> 
> 时间：2012-07-10T14:50:26.673
> 
> 标签：.net, sql-server, vb.net

我想从 vb.net 程序每小时自动执行一次以下存储过程

任何帮助是极大的赞赏

我编写了以下存储过程，如下所示。

```
create procedure dbo.test as  
BEGIN  
   Select * from dbo.testtable  
END 
```

该存储过程正在返回巨大的结果，然后导致应用程序加载时出现性能问题。

因此，我不想在每个按钮单击事件上调用相同的结果，而是想每小时调用一次存储过程，并且必须通过使用一些状态管理技术（如`Session`or ）来重新使用数据集`View State`。

`TestAspx.vb`文件 - 将结果保存在`Session`

**方法1**

```
PrivateSub test()  
        dim ds as dataset
        ds = objtestdata.test() //From here am accessing the datalayer testdata.vb file
        Session("Testdata") = ds
    End Sub 
```

**在下拉控件中加载会话数据**

**方法2**

```
PrivateSub loaddropdown()
            dropdowncontrol.DataSource = Session("Testdata")
            dropdowncontrol.DataBind()
end sub 
```

`Testdata.vb`文件 - 从数据层调用存储过程

```
Public Function test() As DataSet
        Dim ds As New DataSet
        Dim cmd As DbCommand

        ds.Locale = CultureInfo.InvariantCulture

            cmd = db.GetStoredProcCommand("dbo.test")

            ds = db.ExecuteDataSet(cmd)

        Return ds

End Function 
```

所以通过`Session("TestDate")`我可以在多个按钮点击加载中使用这个数据集。

我必须处理`testaspx.vb`文件中的返回数据集，如下所示

我怎么能每小时运行整个过程？

在这方面帮助我。谢谢你，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:05:55.333

您的存储过程只是检索整个数据库表。如果这个操作很慢只是因为表有大量的记录，那么没有办法缓存数据库中的数据来帮助你。

您应该仔细检查您是否真的需要始终将所有数据加载到应用程序中。如果这样做，您的应用程序将始终加载缓慢 - 没有办法解决它。

虽然您可以创建一个[异步线程](http://msdn.microsoft.com/en-us/library/aa289178%28v=vs.71%29.aspx)，但这可能是一个不如实现刷新按钮的解决方案，以便用户可以控制何时发生重新加载。

最后，如果`testtable`是视图而不是表，并且它返回小数据很慢，您应该专注于分析和修复视图的性能。

**编辑**：

您可以将 SQL Server 代理作业配置为每小时执行一次运行缓慢的过程，即使您的应用程序没有运行。这假定您没有使用不包含 SQL Server 代理的 Express 版本。

```
EXEC sp_add_job N'MyHourlyJob'
EXEC sp_add_jobstep
    @job_name = N'MyHourlyJob',
    @step_name = N'Update_Something',
    @command = N'EXEC p_Update_Something', 
EXEC sp_add_schedule
    @schedule_name = N'HourlyJobs' ,
    @freq_interval = 1,
    @freq_type = 4,            -- every @freq_interval days
    @freq_subday_type = 8,     -- every @freq_subday_interval hours
    @freq_recurrence_factor = 1,
    @freq_subday_interval = 1
EXEC sp_attach_schedule
   @job_name = N'MyHourlyJob',
   @schedule_name = N'HourlyJobs' ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:17:40.487

如果您只想加载一次结果集并将对它的更改传播到您的应用程序，则 SqlDependencyCache 可能会很好地满足您的需求：

[http://msdn.microsoft.com/en-us/library/ms178604.aspx](http://msdn.microsoft.com/en-us/library/ms178604.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:42:38.170

I don't know what framework version you are using. But you can use the MemoryCache on .Net4 or Http cache on .Net2.

If you are running on .NET 4 you can use MemoryCache to do the job for you.

```
public static class MyBigDataCache
{
    private const string RegionName= "myBigDataRegion";

    // key could by the username...
    public static DataTable GetMyData(string key)
    {
        // try the cache
        var data = (DataTable) MemoryCache.Default.Get(key, RegionName);

        // nothing in cache...
        if (data == null)
        {
            // read from db
            data = ReadDataFromDb(key);

            // create the cache policy to evict this key after 1 hour.
            var policy = new CacheItemPolicy()
                {
                    AbsoluteExpiration = DateTimeOffset.Now.AddMinutes(60)
                };

            // add to cache
            MemoryCache.Default.Add(new CacheItem(key, data, RegionName), policy);
        }

        return data;
    }

    private static DataTable ReadDataFromDb(String key)
    {
        // load your data here...
        return null;
    }
} 
```

If you're running on .NET2 you can use the Http cache. Example:

```
HttpContext.Current.Cache.Add(key, data, null, DateTime.Now.AddMinutes(60), Cache.NoSlidingExpiration, CacheItemPriority.Default,
                                          null); 
```

# android - android maven插件在Eclipse中没有得到ANDROID_HOME env变量

> ID：11415997
> 
> 赞同：10
> 
> 时间：2012-07-10T14:50:36.817
> 
> 标签：android, eclipse, maven, environment-variables, maven-plugin

我正在开发一个 Android 应用程序项目，它是一个 Maven 项目。当我尝试以“maven install”运行时，这就是我得到的：

“无法在项目 android-client 上执行目标 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.1.1:generate-sources (default-generate-sources)：找不到 Android SDK 路径. 您可以在 pom 文件的插件配置部分中使用 ... 或 ... 或在命令行中使用 -Dandroid.sdk.path=... 或通过设置环境变量 ANDROID_HOME -> [Help 1] 来配置它"

如果我将我的 android_home 路径硬编码到 pom.xml 中，它可以正常工作，但我们使用 git，并且每个人都可能有不同的 android_home 路径。为什么 android-maven-plugin 在 eclipse 中没有获取 env 变量？

android_home 环境变量在我的 PATH 中。我在我的 pom.xml 中写了 ${env.ANDROID_HOME} 但它仍然没有用。

奇怪的是，如果我使用终端（mvn install）作为 maven install 运行，它可以工作！

实际上这对我来说是一个非常可选的问题，但我仍然想知道为什么这个插件在 Eclipse 中不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T21:04:51.923

确保您的 Android SDK 安装包含**您在 pom.xml 上配置的相同 API 版本**的库。

例如，如果您的配置 XML 如下所示：

```
<plugin>
    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
    <artifactId>android-maven-plugin</artifactId>
    ...
    <configuration>
        <sdk>
            <path>${env.ANDROID_HOME}</path>
            <platform>8</platform>
        </sdk>
        ...
    </configuration>
</plugin> 
```

那么您应该使用 Android SDK Manager（或直接检查您的文件系统：$ANDROID_HOME/platforms）验证您是否安装了 SDK API 8。当然，您也可以更改您的 pom.xml 以匹配安装的库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-12T20:00:30.097

如果您使用的是 Linux，则导出`ANDROID_HOME`in`.bashrc`可能不起作用。

```
export ANDROID_HOME=/home/toro/etc/android-sdk-linux 
```

`ANDROID_HOME`对我来说，它仅在我像这样导出`/etc/environment`文件时才有效：

```
ANDROID_HOME=/home/toro/etc/android-sdk-linux 
```

~~您必须重新启动计算机才能使其正常工作。~~

**您只需注销，然后再次登录，**环境变量就会在系统范围内应用。或者，您可以在执行此操作之前在本地对其进行测试：`$source /etc/environment`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-10T15:14:44.813

您需要为 ANDROID_HOME 创建一个系统变量，而不是在 PATH 中设置它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-10T19:45:05.513

在您的 .bashrc 中设置一个 ANDROID_HOME 变量或任何可行的变量，但请记住**导出**该变量以便它可用于子进程。使用此处建议的其他方法设置 ANDROID_HOME 将帮助您解决一些初始错误，但如果没有导出 ANDROID_HOME，您的构建可能会在某些时候失败。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-21T20:51:43.767

在你的命令行上，运行：

`mvn clean install -- Dandroid.sdk.path="/Applications/Android Studio.app/sdk/"`

其他方法都没有真正奏效。（设置`ANDROID_HOME`不做任何事情）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-26T08:18:47.423

另一种方法是将环境变量设置为 pom.xml 的运行配置。

转到运行配置菜单，选择用于项目 pom.xml 的运行配置并选择*环境*选项卡并选择“新建”，然后插入：

*   ANDROID_HOME 改成 name 字段
*   您的 sdk 的路径到值字段

它可以工作，并且只有在为选定的项目启动 maven 配置时才会设置变量，并且您还可以为不同的项目设置不同的路径，并且不需要更改 .bashrc。它也适用于 Windows。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-12T12:42:00.903

**从文档**

您可以使用或在命令行中使用或通过设置环境变量在文件的`android-maven-plugin`配置部分配置它。`pom.xml``<sdk><path>...</path></sdk>``<properties><android.sdk.path>...</android.sdk.path></properties>``-Dandroid.sdk.path=...``ANDROID_HOME`

**解决方案 1**

我已经定义了一个名为`ANDROID_SDK`（而不是`ANDROID_HOME`）的 Android SDK 系统变量并以我的方式引用它`pom.xml`：

```
 <groupId>...</groupId>
  <artifactId>...</artifactId>
  <version>...</version>
  <packaging>apk</packaging>
  <name>...</name>
  <description>...</description>

  <properties>
    <android.sdk.path>${env.ANDROID_SDK}</android.sdk.path>
    ...
  </properties> 
```

**解决方案 2**

作为替代方案，您还可以在以下`android-maven-plugin`部分中对其进行配置：

```
<plugin>
<extensions>true</extensions>
<groupId>com.jayway.maven.plugins.android.generation2</groupId>
<artifactId>android-maven-plugin</artifactId>
<version>${android-maven-plugin.version}</version>
<configuration>
  <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
  <assetsDirectory>${project.basedir}/assets</assetsDirectory>
  <resourceDirectory>${project.basedir}/res</resourceDirectory>
  <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
  <sdk>
    <android.sdk.path>${env.ANDROID_SDK}</android.sdk.path>
    <platform>16</platform>
  </sdk>
  <undeployBeforeDeploy>true</undeployBeforeDeploy>
</configuration>
</plugin> 
```

**解决方案 3**

作为第三个选项，您可以从将参数传递给 Maven 的命令行设置 SDK：

`mvn clean install -Dandroid.sdk.path="C:\\Program Files (x86)\\Android\\android-sdk"`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-10T20:56:24.883

您需要在 Eclipse 中设置 Android Development Tools SDK Location 路径：单击 Window -> Preferences 并选择 Android。SDK 位置可以在 Android 首选项下设置。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-20T10:26:06.020

在项目的根目录中创建一个名为**local.properties的文件。**

与内容;

```
sdk.dir=c:\\path\\to\\android-sdk 
```

# php - Symfony2 依赖注入与父服务不起作用

> ID：11415998
> 
> 赞同：1
> 
> 时间：2012-07-10T14:50:37.313
> 
> 标签：php, symfony, dependency-injection

我目前正在尝试配置我的 Symfony 依赖注入，以便能够使用父服务。按照我在[http://symfony.com/doc/current/components/dependency_injection/parentservices.html](http://symfony.com/doc/current/components/dependency_injection/parentservices.html)中找到的描述，我尝试设置以下类作为第一个测试：

邮件程序.php：

```
namespace testing;

class Mailer
{
    private $transport;

    public function __construct($transport) {
        $this->transport = $transport;
    }

    public function getTransport() {
        return $this->transport;
    }
} 
```

邮件管理器.php：

```
namespace testing;

abstract class MailManager
{
    protected $mailer;

    public function setMailer(Mailer $mailer)
    {
         $this->mailer = $mailer;
    }
} 
```

通讯管理器.php：

```
namespace testing;

class NewsletterManager extends MailManager {
    function getTransport() {
        return $this->mailer->getTransport();
    }
} 
```

服务.yml：

```
 parameters:
    mailer.transport: sendmail

services:
    mailer:
        class:     testing\Mailer
        arguments: [%mailer.transport%]
    mail_manager:
        class:     testing\MailManager
        abstract:  true
        calls:
             - [ setMailer, [ @mailer ] ]
    newsletter_manager:
        class:     testing\NewsletterManager
        parent:    mail_manager 
```

但是当我尝试使用以下代码运行此配置时：

```
require_once 'ClassLoading.php';
use Symfony\Component\Config\FileLocator;
use Symfony\Component\DependencyInjection\Loader\YamlFileLoader;
use Symfony\Component\DependencyInjection\ContainerBuilder;

$container = new ContainerBuilder();
$loader = new YamlFileLoader($container, new FileLocator(__DIR__.'/config'));
$loader->load('services.yml');

$nm = $container->get('newsletter_manager');
echo $nm->getTransport(); 
```

我总是收到这个错误：

```
PHP Fatal error:  Call to a member function getTransport() on a non-object in C:\IGMI\workspace\TryingHard\loading\NewsletterManager.php on line 7 
```

一件事似乎是从不调用抽象类的setter，但即使我将抽象类具体化并从容器中检索它并实际调用setter，这也不能解决邮件对象的问题没有设置。所以在我看来，建立子类关系也存在问题。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T22:25:44.827

您应该在尝试访问我认为的服务之前编译容器构建器......所以它应该看起来像：

```
use Symfony\Component\Config\FileLocator;
use Symfony\Component\DependencyInjection\Loader\YamlFileLoader;

use Symfony\Component\DependencyInjection\ContainerBuilder;

$container = new ContainerBuilder();
$loader = new YamlFileLoader($container, new FileLocator(__DIR__.'/config'));
$loader->load('services.yml');

$container->compile(); //add this line

$nm = $container->get('newsletter_manager');
echo $nm->getTransport(); 
```