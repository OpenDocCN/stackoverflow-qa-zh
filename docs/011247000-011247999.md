# StackOverflow 问答 11247000-11247999

# ruby - 比较键时，Ruby 的 Hash 使用哪个相等性测试？

> ID：11247000
> 
> 赞同：7
> 
> 时间：2012-06-28T14:36:06.850
> 
> 标签：ruby, hash, equals, equality

我有一个围绕一些对象的包装类，我想将它们用作哈希中的键。包装对象和解包装对象应该映射到相同的键。

一个简单的例子是这样的：

```
class A
  attr_reader :x
  def initialize(inner)
    @inner=inner
  end
  def x; @inner.x; end
  def ==(other)
    @inner.x==other.x
  end
end
a = A.new(o)  #o is just any object that allows o.x
b = A.new(o)
h = {a=>5}
p h[a] #5
p h[b] #nil, should be 5
p h[o] #nil, should be 5 
```

我试过==，===，eq？和哈希都无济于事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T14:54:22.317

> 哈希使用key.eql？测试键是否相等。如果您需要使用自己的类的实例作为 Hash 中的键，建议您同时定义 eql? 和哈希方法。hash 方法必须具有 a.eql?(b) 隐含 a.hash == b.hash 的性质。

所以...

```
class A
  attr_reader :x
  def initialize(inner)
    @inner=inner
  end
  def x; @inner.x; end
  def ==(other)
    @inner.x==other.x
  end

  def eql?(other)
    self == other
  end

  def hash
    x.hash
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T14:45:34.733

您必须定义`eql?`和`hash`。

的文档`Hash`缺乏，但[最近得到了改进](https://github.com/ruby/ruby/blob/trunk/hash.c#L3292)。

# facebook - 请求对话框未关闭

> ID：11247002
> 
> 赞同：1
> 
> 时间：2012-06-28T14:36:14.033
> 
> 标签：facebook, user-interface, dialog, modal-dialog

我一直很高兴地使用请求对话框，直到今天早上它停止正常工作。提交或取消对话框时，对话框会卡住并且不会关闭，因此不会调用它的回调。它只是坐在那里，一片空白，什么都不做。

图片在这里：http: [//i.stack.imgur.com/2o0rW.png](https://i.stack.imgur.com/2o0rW.png)

任何想法可能是什么问题或如何解决它？或者这只是等待 Facebook 修复他们的代码并推出的另一种情况？

谢谢

更新：与此问题类似，[Facebook 应用程序请求对话框继续加载/忙碌](https://stackoverflow.com/questions/10032605/facebook-app-request-dialog-box-keep-on-loading-busy)

将服务器端口更改为 80 解决了该问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:57:27.993

我也遇到了这个问题——我创建了一个新的应用程序，其站点 URL 指向我的非标准端口，它没有任何区别（在我的情况下，我看到身份验证对话框没有关闭，因为从未收到回调）。

临时解决方法：创建从端口 80 到非标准端口的 ssh 隧道。当然，如果您使用的是 unix 机器，则必须以 root 身份执行此操作。

我已经向 Facebook 提交了一个错误： [https ://developers.facebook.com/bugs/276500519124789](https://developers.facebook.com/bugs/276500519124789)

# regex - 如何使用正则表达式验证字符串中的所有字符都是数字？

> ID：11247003
> 
> 赞同：0
> 
> 时间：2012-06-28T14:36:20.117
> 
> 标签：regex

如何验证字符串中的每个字符都是 0-9 数字？例如：1343151234234 有效，但 2342343ABC34234 无效。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T14:38:32.393

`^\d+$`

使用“SingleLine”选项（在 C# 中是`RegexOptions.SingleLine`）。

# javascript - Javascript：如何更新我的事件侦听器以仅在用户停止输入时进行更改？

> ID：11247005
> 
> 赞同：1
> 
> 时间：2012-06-28T14:36:23.113
> 
> 标签：javascript, timer, addeventlistener

我有这个事件监听器：

```
input_1.addEventListener('input',function(){
    updateFromInput(1);
},false); 
```

它控制滑块的位置。
现在，如果我想在输入中输入“100”，滑块将首先跳到“1”位置，然后跳到“10”，最后跳到“100”位置。
它很笨重，我想给它一种更自然的感觉。

虽然我现在阅读 JS 很自在，但我在编写它时仍然是个新手。

我了解这种类型的计时器所需的逻辑（如果*计时器*大于*750 毫秒 updateFromInput*），我只是有点模糊如何开始在 javascript 中编码。
当然，这种类型的计时器功能之前已经被同样多的开发人员完成了一百万次......只是努力*寻找*一两个例子:)

任何代码、链接或示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:43:53.953

通常的方法是设置一个计时器，如果你看到另一个按键，取消之前的计时器并设置一个新的，例如：

```
var timer = 0;
input_1.addEventListener('input',function(){
    maybeUpdateFromInput(1);
},false);

function maybeUpdateFromInput(val) {
    if (timer) {
        clearTimeout(timer);
    }
    timer = setTimeout(function() {
        updateFromInput(val);
        timer = 0;
    }, 50); // 50 = 50ms, you may want 75, 100, even 125
} 
```

这将使更新延迟 50 毫秒（`setTimeout`调用中的值）。如果超过 50 毫秒没有看到输入，它将更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:50:25.660

我认为处理这个问题的更好方法是同时按下键和按下键。这样，万一用户按住键，它就不会被误解。看看这个 jsFiddle：

[http://jsfiddle.net/9c46B/3/](http://jsfiddle.net/9c46B/3/)

显然，您必须将其更改为添加事件侦听器（而不是 HTML 中的内联处理程序）。显然，您会将警报更改为您想要的任何内容。但希望这会有所帮助，并且是您正在寻找的！

# iphone - Xcode 在加载项目时在启动时冻结

> ID：11247008
> 
> 赞同：33
> 
> 时间：2012-06-28T14:36:31.223
> 
> 标签：iphone, ios, xcode

我在新的 Macbook Retina 上运行 Xcode 4.3.3 并且出乎意料的是，Xcode 在启动后立即开始冻结。我正在处理两个项目，所以当 Xcode 启动时，它会立即启动我正在处理的两个项目。第一个有时会加载，但第二个总是冻结。因为项目立即启动，所以我无法访问 Xcode 的任何功能。我什至不知道如何阻止项目在启动时启动。这是我到目前为止所做的：

1.  重新启动的 comp - 仍然启动项目并冻结
2.  删除了缓存中的所有内容 ~/Library/Developer/Xcode/DerivedData - 仍然启动项目并冻结
3.  卸载的 Xcode（在 Launchpad 中按住单击，单击 (x)）。重新安装 Xcode。- 仍然启动项目并冻结
4.  从原始文件夹中移动了我的项目 - 仍然启动项目并冻结
5.  创建了一个新的 iOS 用户 2 并启动了 Xcode - 不启动项目或冻结耶！
6.  在 user1 中将冻结项目复制到外部，以 user2 身份登录，启动项目 - 不冻结！但现在我需要将我的 Xcode 配置文件和证书转移给新用户。

那么到底发生了什么？我更喜欢使用 User1 并希望实际解决问题，这样如果再次发生，我就不需要创建新用户。（用户 n+1，无限期不是一个有吸引力的选择）。

![Xcode 在启动时冻结](../Images/d64b53c51abd2c8aa3a7e19821701b91.png)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-28T15:47:25.773

看看这个：（从[这里](http://www.macworld.com/article/1161330/four_lion_terminal_hacks.html)引用）

> 通过不恢复来恢复理智
> 
> 由于 Lion 的恢复功能，您在给定应用程序中打开的所有窗口在您重新启动它时仍保持打开状态。这在 Web 浏览器或文本编辑器中非常有用。然而，在某些应用程序中——尤其是那些你很少需要重新访问相同文档的应用程序——该功能更令人烦恼。窗口恢复实际上是逐个应用程序配置的。以下是在 Preview 和 QuickTime Player X 中禁用 Resume 的终端命令：
> 
> ```
> defaults write com.apple.Preview NSQuitAlwaysKeepsWindows -bool false
> 
> defaults write com.apple.QuickTimePlayerX NSQuitAlwaysKeepsWindows -bool false 
> ```
> 
> 在尝试命令之前退出应用程序。再次，将“真”换成“假”以逆转您的更改。

您也许可以为 Xcode 做类似的事情。

`option`否则，您可以退出 Lion 中的应用程序并通过按住键的同时放弃之前打开的窗口`CMD+Q`。所以你可以尝试启动 Xcode 并在它有机会打开你的窗口之前选择退出它，然后重新启动它，它不应该尝试打开窗口。然后，您可以尝试解决问题。

**更新：**这是解决问题的评论中的一些附加信息......

现在尝试修复项目...删除以下目录：

```
MyProject.xcodeproj/xcuserdata
MyProject.xcodeproj/project.xcworkspace/xcuserdata 
```

这些目录存储诸如窗口位置、打开的文件、展开的项目组等内容，因此一个原因可能是您在具有相同用户名的多台机器上使用源代码控制并且这些文件没有被忽略（它们应该如果您正在使用源代码控制）。Retina 与非 Retina 或不同版本的 Xcode 可能会以不同的方式使用这些文件，并且源代码控制合并可能会使它们不一致。因此，请确保在源代码管理中删除并忽略这些目录，以免它们被重新添加并再次导致问题。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-14T10:26:18.677

为我解决这个问题的是删除`~/Library/Autosave Information`. Xcode 启动后没有任何问题。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2019-04-22T10:59:15.840

[在apple.stackexchange.com](https://apple.stackexchange.com/q/86094)中使用 answer对我有用：

> 删除`~/Library/Saved Application State/com.apple.dt.Xcode.savedState/`目录可能会有所帮助。

如果这不起作用，则删除 `~/Library/Developer`（从[这里](https://apple.stackexchange.com/a/89357)和[这里](https://discussions.apple.com/thread/3830815)带来）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-02-16T20:06:19.933

打开您的项目，然后右键单击`yourprojectname.xcodeproj`然后单击`Show package contents`。

在那里你会看到`xcuserdata`. 删除它。

接下来，右键单击`project.xcworkspace`，单击`Show package contents`并删除`xcurserdata`。

最后，重新启动您的 Mac 并重新打开您的项目，一切都应该再次正常。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-04T20:52:20.917

我不小心双击了 Xcode 打开项目对话框中的项目文件夹，它试图一次打开所有项目，然后冻结。该分支的建议没有帮助，但经过一番搜索，我找到了应该删除的文件。找到 current_user/Libraries/Autosave Information 并从那里删除所有与 Xcode 相关的信息，这应该会有所帮助。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-05-12T08:05:36.863

我遇到的一个问题：当我在我的项目中添加一个 casetagram 库时，然后在 Xcode 启动几秒钟后，在文件索引之前（我认为），它已经冻结。在简单地以其他名称重命名文件夹并将其重命名后 - Xcode 再次冻结。

我的解决方案：

1.  Command-Option-Shift-K 清除构建文件夹。
2.  退出 Xcode 并手动清除 ~/Library/Developer/Xcode/DerivedData

然后：

如果您在 Xcode 冻结之前还有一段时间：您必须启动 Xcode，然后快速打开 Organizer->Projects 并从列表中删除您的项目（项目，Xcode 在其上冻结）。

如果您没有足够的时间打开管理器，那么：1) 退出 Xcode。2）重命名您的项目所在的文件夹。然后执行解决方案的 1 个变体（打开管理器并删除 Xcode 将被冻结的项目） 3）重命名您的文件夹

如果 Xcode 在所有这些操作之后会冻结，请尝试打开其他项目并编译它。如果可行，请返回并尝试构建您的 Xcode 被冻结的项目。如果 Xcode 再次被冻结，那么这个具体项目的原因

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-07-19T06:09:26.893

我今天遇到了同样的问题，在视网膜显示器 MacBook Pro 上运行相同配置的 Xcode 4.3.3。我通读了这个页面，并决定首先尝试删除 jhabbott 上面列出的文件：MyProject.xcodeproj/xcuserdata 和 MyProject.xcodeproj/project.xcworkspace/xcuserdata 目录。那行得通。删除文件后，我可以启动 Xcode，然后通过选择**File > Open Recent**打开我的项目。如果按住命令键并单击项目文件，则可以直接从 Finder 中删除这些项目，然后从菜单中选择**Show Package Contents**。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-06-28T17:52:09.360

我通过重命名包含所有 Xcode 项目的根目录来解决此问题。

在 Xcode 未运行时，重命名目录，然后启动 Xcode。Xcode 将无法找到这些项目，并且会默默地忽略它们。退出 Xcode，将目录恢复为原始名称，然后再次启动 Xcode。它不应该尝试在启动时加载项目。

不知道为什么这有效，但您的步骤#4（移动项目）没有。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-02-16T20:31:14.577

我尝试了一切，但没有任何帮助。尝试解决此问题时已经损失了 3 个小时。

帮助并解决一切的是在我的终端中运行它

```
defaults delete com.apple.dt.Xcode 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-11-14T11:22:47.883

它很愚蠢，但在尝试了所有解决方案后，我发现苹果 icloud 正试图将我的存储库从我的文档备份到云并从那里运行它，导致加载时间非常慢并冻结 - 确保你的存储库位于 icloud 文件夹之外或只是禁用它。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-08-26T02:32:04.887

对我来说，问题实际上是 iCloud Drive 在 Xcode 尝试访问它们的同时同步文件。

我能够通过将项目复制到 iCloud Drive 未同步的目录来解决此问题（使用`cp`命令，而不是 Finder）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-07T22:03:18.813

重新启动Mac后发生在我身上。也许有些东西没有正确保存，并且在启动 Xcode 后仍然“没有响应”。我重命名了我打开的最后一个项目的根目录。当打开 Xcode 而不是堆栈时，它打开并以错误响应它找不到项目。然后我就定期打开该项目，它运行良好。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-15T14:22:10.093

要在不自动加载最后一个项目的情况下打开 Xcode，请在从 Dock 中选择图标的同时按住 Shift 选项。这帮助我绕过了“坏项目”并从 IDE 进行故障排除。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-03-29T19:27:53.363

如果有人仍然有这个问题，如果你的项目在 iCloud 驱动器中，这可能会导致同步问题。通过将其移出驱动器，它可以解决问题。（至少对我来说，我尝试了其他所有方法）

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2013-09-11T01:37:03.050

您只需要删除这些目录：

```
MyProject.xcodeproj/xcuserdata
MyProject.xcodeproj/project.xcworkspace/xcuserdata 
```

正如 jhabbott 所说，这些目录存储了打开的文件、窗口等的位置，并且可以安全地删除。一般来说，问题是您在 xcuserdata 中有一个对不再存在的旧网络共享的引用，并且 xcode 坐在那里很长时间试图访问它。

确保删除所有 XCode 项目的这些目录。

# android - 无法在 Android SQLite 中添加已保存的记录

> ID：11247011
> 
> 赞同：1
> 
> 时间：2012-06-28T14:36:35.313
> 
> 标签：android, sqlite

我正在开发一个从手机读取联系人姓名并检查姓名是否已保存在数据库中的应用程序。如果它已经保存到数据库中，那么我只需更新一个保存的计数器变量，但如果不是，那么我继续添加它。至少这是我的意图。

部分代码如下：

```
 public Integer countRecords(String name) {
       SQLiteDatabase db = events.getReadableDatabase();
       Cursor mCount= db.rawQuery("select count('"+CONTACT_NAME+"') from'"+ TABLE_NAME + "' where '" + CONTACT_NAME + "' = '" + name + "'", null); 
       mCount.moveToFirst();
       Integer count= mCount.getInt(0); 
       startManagingCursor(mCount);
       return count;
   } 
```

在代码的主体部分如下：

```
 ContentResolver cr= getContentResolver();
        Cursor cu= cr.query(URI, null, null, null, null);
            if(cu.getCount()>0){    
                while(cu.moveToNext()){
                    contactName=cu.getString(cu.getColumnIndex(DNAME));
                    Integer rawValue = countRecords(contactName);
                    if(rawValue==0){
                        addRecord(contactName);
                        addedCounter+=1;
                        recordName=cu.getString(cu.getColumnIndex(DNAME));
                        recordInfo = addedCounter + " " + recordName + "\n";    
                        recordsList+= recordInfo;
                        }
                    else{
                        savedCounter+=1;
                    }
                } 
```

现在，我已经尝试了我所知道的一切。问题似乎是过程的返回值`countRecords`。也许我没有在 IF 子句中使用正确的标准`if(rawValue==0){`，因为它要么添加所有联系人，即使它们已经保存在数据库中，或者它没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:25:20.657

您当前的实现不仅是错误的……而且效率也*非常*低。尝试这样的事情：

```
// use as the 2nd argument; otherwise, the cursor will return all information
// associated with the contacts. this is inefficient because you only care
// about the column DNAME in the while loop.
final String[] PROJECTION_CONTACTS = new String[] { DNAME };
final String[] PROJECTION_DATABASE = new String[] { CONTACT_NAME };

// you only need to retrieve this once (dont do it inside the loop)
SQLiteDatabase db = events.getReadableDatabase();

Cursor c = getContentResolver().query(URI, PROJECTION_CONTACTS, null, null, null);

if (c.moveToFirst()) { 
    // then the cursor is not empty

    // compute the columnIndex for "DNAME" only once
    final int col = c.getColumnIndex(DNAME);

    while(c.moveToNext()) {
        // iterate each 
        contactName = c.getString(col);
        Cursor exist = db.query(TABLE_NAME, 
                                PROJECTION_DATABASE, 
                                CONTACT_NAME + " = ?",
                                new String[] { contactName }, 
                                null);

        if (exist.moveToFirst()) {
            // the cursor is not empty, so it exists in the database
        } else {
            // the cursor is empty, so it doesn't exist in the database
        }
        exist.close();
    }
}
c.close(); 
```

像这样的东西应该工作。（我向你保证我在某处打错了字，但它的总体思路应该让你开始）。请确保您在单独的线程上异步执行此操作......这可能是一个非常耗时的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:53:38.537

使用此查询：

```
Cursor mCount= db.rawQuery("select count("+CONTACT_NAME+") from "+ TABLE_NAME + " where " + CONTACT_NAME + " = '" + name + "'", null); 
```

您在列名之间有一个额外的单引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:23:31.223

您所需查询的一种简单形式：

```
Cursor mCount= db.rawQuery("select count(1) from "+ TABLE_NAME + 
" where " + CONTACT_NAME + " = '" + name + "'", null); 
```

# c# - 反应式扩展 - 属性相互更新

> ID：11247013
> 
> 赞同：5
> 
> 时间：2012-06-28T14:36:35.670
> 
> 标签：c#, asynchronous, system.reactive

我有 2 个 DecimalUpDown 控件，num_one 和 num_two，分别绑定到属性 First 和 Second。当 First 更改时，它将联系服务器以计算 Second 的值，反之亦然。异步触发服务器调用会释放 UI，但是在快速触发（例如滚轮）时，最后一个请求并不总是最后一个返回，因此值可能会变得不同步。

使用 Reactive 我试图限制调用以仅在用户停止更改一段时间后触发服务器调用。问题是当您在更新期间进行更改时，属性更改开始相互触发并根据油门的时间跨度来回卡住。

```
 public MainWindow()
    {
        InitializeComponent();

        DataContext = this;

        Observable.FromEventPattern<RoutedPropertyChangedEventHandler<object>, RoutedPropertyChangedEventArgs<object>>(h => num_one.ValueChanged += h, h => num_one.ValueChanged -= h)
            .Throttle(TimeSpan.FromMilliseconds(100), Scheduler.ThreadPool)
           .Subscribe(x =>
           {
               Thread.Sleep(300); // simulate work
               Second = (decimal)x.EventArgs.NewValue / 3.0m;
           });

        Observable.FromEventPattern<RoutedPropertyChangedEventHandler<object>, RoutedPropertyChangedEventArgs<object>>(h => num_two.ValueChanged += h, h => num_two.ValueChanged -= h)
            .Throttle(TimeSpan.FromMilliseconds(100), Scheduler.ThreadPool)
           .Subscribe(x =>
           {
               Thread.Sleep(300); // simulate work
               First = (decimal)x.EventArgs.NewValue * 3.0m;
           });
    }

    private decimal first;
    public decimal First
    {
        get { return first; }
        set
        {
            first = value;
            NotifyPropertyChanged("First");
        }
    }

    private decimal second;
    public decimal Second
    {
        get { return second; }
        set
        {
            second = value;
            NotifyPropertyChanged("Second");
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T00:06:48.250

有一个内置的 Rx 运算符可以帮助您在不使用`Throttle`和超时的情况下准确地执行您想要的操作 - 它就是`Switch`运算符。

`Switch`运算符不起作用，因此`IObservable<T>`大多数时候您永远不会在智能感知中看到它。

取而代之的是，它在一个可观察对象流上运行，并通过不断切换到最新产生的可观察对象（并忽略先前可观察对象的任何值）来`IObservable<IObservable<T>>`将源扁平化。`IObservable<T>`它仅在外部 observable 完成而不是内部 observable 完成时完成。

这正是您想要的 - 如果发生新的值更改，则忽略任何以前的结果并只返回最新的结果。

这是如何做到的。

首先，我将令人讨厌的事件处理代码删除到几个可观察对象中。

```
var ones =
    Observable
        .FromEventPattern<
            RoutedPropertyChangedEventHandler<object>,
            RoutedPropertyChangedEventArgs<object>>(
            h => num_one.ValueChanged += h,
            h => num_one.ValueChanged -= h)
        .Select(ep => (decimal)ep.EventArgs.NewValue);

var twos =
    Observable
        .FromEventPattern<
            RoutedPropertyChangedEventHandler<object>,
            RoutedPropertyChangedEventArgs<object>>(
            h => num_two.ValueChanged += h,
            h => num_two.ValueChanged -= h)
        .Select(ep => (decimal)ep.EventArgs.NewValue); 
```

您的代码似乎有点混乱。我假设`DecimalUpDown`控件的值是返回结果的服务器函数的输入。所以这里是调用服务器的函数。

```
Func<decimal, IObservable<decimal>> one2two = x =>
    Observable.Start(() =>
    {
        Thread.Sleep(300); // simulate work
        return x / 3.0m;
    });

Func<decimal, IObservable<decimal>> two2one = x =>
    Observable.Start(() =>
    {
        Thread.Sleep(300); // simulate work
        return x * 3.0m;
    }); 
```

显然，您在这两个函数中放入了实际的服务器代码调用。

现在连接最终的 observables 和订阅几乎是微不足道的。

```
ones
    .DistinctUntilChanged()
    .Select(x => one2two(x))
    .Switch()
    .Subscribe(x =>
    {
        Second = x;
    });

twos
    .DistinctUntilChanged()
    .Select(x => two2one(x))
    .Switch()
    .Subscribe(x =>
    {
        First = x;
    }); 
```

`DistinctUntilChanged`确保我们仅在值实际更改时才进行调用。

然后很容易调用两个服务器函数，执行`Switch`并只取回最新的结果，然后将其分配给属性。

您可能需要在这里或那里弹出一个调度程序，`ObserveOn`然后将订阅转移到 UI 线程，否则这个解决方案应该可以很好地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:48:20.780

如果属性未更改，则不应触发属性更改通知。您需要在属性中添加 if 语句。

```
public decimal First
{
    get { return first; }
    set
    {
        if(first == value)
            return;

        first = value;
        NotifyPropertyChanged("First");
    }
} 
```

# javascript - jqPlot折线图未绘制到div的边缘

> ID：11247015
> 
> 赞同：2
> 
> 时间：2012-06-28T14:36:37.040
> 
> 标签：javascript, jquery, html, layout, jqplot

我有一个绘制精美的 jqPlot 线图，但我无法让它完全绘制到它包含的 div 的边缘（这对我的应用程序至关重要）。我已经尝试了所有与删除边距、填充等有关的选项，但最后仍然存在相当大的差距。另外，我已经确认 div 本身一直到达页面的右边缘。下面是我的情节选项代码：

```
optionsObj = {
  stackSeries: true,
  axesDefaults: {
    show: false,
    showTicks: false,
    showTickMarks: false
  },
  axes: {
    grid: {
      drawBorder: false
    },
    xaxis: {
      pad: 0,
      tickOptions: {
        showGridline: false
      }
    },
    yaxis: {
      pad: 0,
      tickOptions: {
        showGridline: false
      }
    }
  },
  grid: {
    background: '#ffffff',
    borderColor: '#888888',
    borderWidth: 0.5,
    shadow: false
  },
  seriesDefaults: {
    lineWidth: 0.5,
    color: '#1A95ED',
    fill: true,
    markerOptions: {
      show: false
    }
  },
  series: seriesGroup,
  gridPadding: { top: 0, right: 0, bottom: 0, left: 0 }
}; 
```

可以在此处找到图片：[https ://www.dropbox.com/s/js32405l6z16f2m/Capture.PNG](https://www.dropbox.com/s/js32405l6z16f2m/Capture.PNG)

滑块用于选择该图的子集，该子集在上方较大的图中绘制。问题是，由于图形略微向左缩放并且填充的长度与滑块不同，因此选择关闭。例如，左手柄认为它就在第二个峰的左侧，而右手柄认为它就在第四个峰的左侧。

对于那些不熟悉 jqPlot 的人，这里有一个 div 声明：

```
<div id="overview" style="width:100%;height:200px"></div> 
```

由函数调用绘制：

```
$.jqplot('overview', eval('([' + sessionStorage.throughputData + '])'), optionsObj); 
```

除了 HTML 声明中的“样式”属性外，没有任何 CSS 应用于图表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:02:22.250

我注意到这条线的关闭量会根据图表中的数据点数量而变化。我做了一些实验，最终发现 jqPlot 在决定每个单元应该获得多少像素时，试图为图形的总宽度倾向于“不错”的单元数。例如，当我有 1440 个数据点时，图表本身的范围将是 1600，我的数据不会一直走到最后。当我有 2880 个数据点时，图表的范围将是 3000，我的数据再次无法填充它，但它关闭的数量会改变。我最终以单位手动设置图表的“最小值”和“最大值”值以匹配我的数据，并且它已修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:02:18.767

我认为你应该对这个做的是设置最小值、最大值或直接设置刻度。

顺便说一句，图片显示您正在使用日期，但在选项中我看到您不使用`DateAxisRenderer`，为什么会这样？

[我认为您应该在这里查看我的其他答案。](https://stackoverflow.com/a/10233111/613495)特别是如果没有任何效果，您应该考虑直接设置刻度。我知道您没有显示它们，但无论如何您可以使用它们作为格式化图表外观的方法。我怀疑您会遇到与链接答案的第一个示例中观察到的类似行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T07:28:47.687

我自己的一些观察：我通过将 xaxis/yaxis:pad 设置为 1**而不是**0 来使其工作。

我认为 pad 乘以 rage（最小值和最大值）来给出图表中的实际范围。这将解释@brandon 注意到的行为。还要确保范围是刻度的偶数或倍数。我不太确定，你必须尝试这个。使用一组 11 个值，我在两端都有空格，但一组 10 个值与两端齐平。

# python - Python：在循环中运行脚本？

> ID：11247016
> 
> 赞同：0
> 
> 时间：2012-06-28T14:36:37.043
> 
> 标签：python, file, loops, iteration

我有一个基本问题。我想用不同的输入（R0.arg）和输出（V0.art）多次运行 Arc.py 这个想法是重复这样的命令：

Arc.py R0.arg V0.art

Arc.py R1.arg V1.art

Arc.py R2.arg V2.art

Arc.py R3.arg V3.art

Arc.py R4.arg V4.art

Arc.py R#.arg V#.art

...

..

.

直到 #=1000。

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:43:40.067

有什么阻止你做以下事情吗？：

```
import whatever

def main(arg1):
    # routine to be run

if __name__=='__main__':
    sys.exit(main(sys.argv[1])) 
```

在另一个 python 文件中，只需导入模块并循环调用例程：

```
import otherfile

for i in xrange(1000):
    otherfile.main(arg1) 
```

# ruby - Ruby：生产环境中的 GC::Profiler.enable 会导致性能问题吗？

> ID：11247017
> 
> 赞同：7
> 
> 时间：2012-06-28T14:36:38.900
> 
> 标签：ruby, ruby-on-rails-3, memory, profiling

在生产环境中激活 ruby​​ 1.9.2 中的 GC::Profiler 会导致性能问题吗？在性能关键的生产应用程序中使用它是否安全？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T14:44:08.507

简单地激活`GC::Profiler`不应该导致性能下降，但问题是你打算用它做什么。

将其与`Rails.config.log_level`. 如果设置得太高（如`:notice`），则需要将大量数据写入日志文件，导致 IO 比需要的高得多，从而导致性能下降。这就是为什么将记录器设置为`:debug`生产环境，以最小化 IO 操作。

因此，如果您启用`GC::Profiler`并仅在极端情况下轮询特定结果，那么我认为不会有问题，当您开始过度使用分析器时，事情就会开始变慢。

*但这适用于一切，从过度使用数据库查询到过度使用复杂代码到过度使用图像等等......*

# asp.net - 在 IE8 中点击没有回发

> ID：11247022
> 
> 赞同：0
> 
> 时间：2012-06-28T14:36:51.060
> 
> 标签：asp.net, internet-explorer-8, postback

我有一个`asp:button`在除 IE8 之外的所有浏览器中都能正常工作的。当我单击按钮时，没有任何反应。该页面似乎没有检测到它应该发布该页面。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-29T19:58:37.850

当页面加载期间页面中出现脚本错误时，可能会发生此问题。我的情况是，谷歌分析文件中发生了错误，因为谷歌停止支持 IE8。

我知道这个问题已经被问过了一段时间，但我的经验可能会帮助那些面临同样问题的人。

# iis-7 - 网络服务帐户未在 ACL 中继承

> ID：11247031
> 
> 赞同：1
> 
> 时间：2012-06-28T14:37:24.030
> 
> 标签：iis-7, permissions, acl, inheritance

我在将文件移动到设置为替换网络服务帐户的子对象权限的文件夹中时遇到问题。该过程是将媒体文件上传到网站，并通过软件进行编码。这会将文件移动到一个文件夹，但由于某种原因，移动到那里的文件不会继承网络服务帐户的安全权限。如果我手动将文件移动到文件夹中，则会继承权限。我已使用有效权限工具检查父文件夹上的网络服务帐户安全权限，但这表明没有任何内容可以覆盖它 - 该帐户具有完全权限。

如果需要，可以尝试提供更多信息，但非常感谢任何答案！

# php - 如何从不同的行中获取唯一值

> ID：11247033
> 
> 赞同：1
> 
> 时间：2012-06-28T14:37:25.243
> 
> 标签：php, mysql

我有一个数据库，其中的行中包含演员姓名

```
row1       row2
movie1     actor1,actor2,actor3
movie2     actor2
movie3     actor1,actor3,actor4,actor6 
```

现在我想在一页中显示一个演员列表，其中没有重复的演员..有可能......输出应该是

```
actor1
actor2(no repeate)
actor3
actor4 
```

我在这里尝试

```
function actors(){
    global $host, $dbname, $user, $pass;
    $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
    $STH = $DBH->prepare("SELECT DISTINCT actors FROM movies");

    $STH->execute();
    $STH->setFetchMode(PDO::FETCH_ASSOC);
    return $STH;
    }

$STH = actors();
     while (($row = $STH->fetch()) !== false) {
     echo $row['actors'].'</br>';
     } 
```

但这不起作用...请帮助 **编辑** 我得到输出

```
actor1,actor2,actor3
actor2
actor1,actor3,actor4,actor6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:43:32.853

如果您将所有演员姓名保存在一个字段中，我不知道可以执行此操作的简单 SQL 查询。这可能是不可能的，或者应该花费大量的 CPU。

您需要重新设计您的表格，如下所示。

```
movies
------
id
name

actors
------
id
name

movie_actor_link
----------------
movie_id
actor_id 
```

完成此操作后，列出演员已经非常简单，因为他们有自己的具有唯一值的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:47:18.887

您所寻求的要求您首先将参与者值拆分为行，然后使用 DISTINCT 查询。

这是[Federico Cargnelutti的一个例子](http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/)

```
CREATE FUNCTION SPLIT_STR(
  x VARCHAR(255),
  delim VARCHAR(12),
  pos INT
)
RETURNS VARCHAR(255)
RETURN REPLACE(SUBSTRING(SUBSTRING_INDEX(x, delim, pos),
       LENGTH(SUBSTRING_INDEX(x, delim, pos -1)) + 1),
       delim, ''); 
```

那么我们的查询可能如下所示：

```
Select Distinct actor
From (
     Select Split_Str( actor, ',', 1 ) As actor From Movies
     Union All Select Split_Str( actor, ',', 2 ) From Movies
     Union All Select Split_Str( actor, ',', 3 ) From Movies
     ...
     Union All Select Split_Str( actor, ',', n ) From Movies
     ) As Z 
```

从

# c++ - 查找相邻节点 A Star Path-Finding C++

> ID：11247042
> 
> 赞同：0
> 
> 时间：2012-06-28T14:37:50.630
> 
> 标签：c++, path-finding, a-star

有没有更好的方法来处理我的 A Star 算法的 FindAdjacent() 函数？它非常混乱，并且没有正确设置父节点。当它试图找到路径时，它会无限循环，因为节点的父节点有一个节点，并且父节点总是彼此。

任何帮助都会很棒。这是我的功能：

```
void AStarImpl::FindAdjacent(Node* pNode)
{
    for (int i = -1; i <= 1; i++)
    {
        for (int j = -1; j <= 1; j++)
        {
            if (pNode->mX != Map::GetInstance()->mMap[pNode->mX + i][pNode->mY + j].mX 
                || pNode->mY != Map::GetInstance()->mMap[pNode->mX + i][pNode->mY + j].mY)
            {
                if (pNode->mX + i <= 14 && pNode->mY + j <= 14)
                {
                    if (pNode->mX + i >= 0 && pNode->mY + j >= 0)
                    {
                        if (Map::GetInstance()->mMap[pNode->mX + i][pNode->mY + j].mTypeID != NODE_TYPE_SOLID)
                        {
                            if (find(mOpenList.begin(), mOpenList.end(), &Map::GetInstance()->mMap[pNode->mX + i][pNode->mY + j]) == mOpenList.end())
                            {

                                Map::GetInstance()->mMap[pNode->mX+i][pNode->mY+j].mParent = &Map::GetInstance()->mMap[pNode->mX][pNode->mY];
                                mOpenList.push_back(&Map::GetInstance()->mMap[pNode->mX+i][pNode->mY+j]);
                            }
                        }
                    }
                }

            }
        }
    }

    mClosedList.push_back(&Map::GetInstance()->mMap[pNode->mX][pNode->mY]);
} 
```

如果您想要更多代码，请询问，我可以发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:14:27.093

您可以使用 减少嵌套 if 的数量`continue`。一般来说，以下两个代码块是等价的：

```
while(conditionA){
    if(conditionB){
        doStuff();
    }
}

while(conditionA){
    if (!conditionB){continue;}
    doStuff();
} 
```

我们可以使用这个原则来减少代码中嵌套 if 的数量。

```
void AStarImpl::FindAdjacent(Node* pNode)
{
    for (int i = -1; i <= 1; i++)
    {
        for (int j = -1; j <= 1; j++)
        {
            if (pNode->mX == Map::GetInstance()->mMap[pNode->mX + i][pNode->mY + j].mX && pNode->mY == Map::GetInstance()->mMap[pNode->mX + i][pNode->mY + j].mY){continue;}
            if (pNode->mX + i > 14 || pNode->mY + j > 14){continue;}
            if (pNode->mX + i < 0 || pNode->mY + j < 0){continue;}
            if (Map::GetInstance()->mMap[pNode->mX + i][pNode->mY + j].mTypeID == NODE_TYPE_SOLID){continue;}
            if (find(mOpenList.begin(), mOpenList.end(), &Map::GetInstance()->mMap[pNode->mX + i][pNode->mY + j]) != mOpenList.end()){continue;}
            Map::GetInstance()->mMap[pNode->mX+i][pNode->mY+j].mParent = &Map::GetInstance()->mMap[pNode->mX][pNode->mY];
            mOpenList.push_back(&Map::GetInstance()->mMap[pNode->mX+i][pNode->mY+j]);
        }
    }

    mClosedList.push_back(&Map::GetInstance()->mMap[pNode->mX][pNode->mY]);
} 
```

如果我正确理解您的第一个`if`条件，您只是试图断言 pNode 不是它自己的邻居。在这种情况下，您可以将代码更改为：

```
void AStarImpl::FindAdjacent(Node* pNode)
{
    for (int i = -1; i <= 1; i++)
    {
        for (int j = -1; j <= 1; j++)
        {
            if (i == 0 && j == 0){continue;}
            if (pNode->mX + i > 14 || pNode->mY + j > 14){continue;}
            if (pNode->mX + i < 0 || pNode->mY + j < 0){continue;}
            if (Map::GetInstance()->mMap[pNode->mX + i][pNode->mY + j].mTypeID == NODE_TYPE_SOLID){continue;}
            if (find(mOpenList.begin(), mOpenList.end(), &Map::GetInstance()->mMap[pNode->mX + i][pNode->mY + j]) != mOpenList.end()){continue;}
            Map::GetInstance()->mMap[pNode->mX+i][pNode->mY+j].mParent = &Map::GetInstance()->mMap[pNode->mX][pNode->mY];
            mOpenList.push_back(&Map::GetInstance()->mMap[pNode->mX+i][pNode->mY+j]);
        }
    }

    mClosedList.push_back(&Map::GetInstance()->mMap[pNode->mX][pNode->mY]);
} 
```

理想情况下，您的 FindAdjacent 方法根本不需要修改开放集或封闭集。相反，让它返回所有邻居，无论它们是打开还是关闭。如果您想将这些邻居添加到打开或关闭的集合中，或者检查它们是否是这些集合的成员，则应该在实际实现 aStar 算法的方法中完成。

```
Vector<Node> AStarImpl:FindAdjacent(Node* pNode)
{
    Vector<Node> neighbors;
    for (int i = -1; i <= 1; i++)
    {
        for (int j = -1; j <= 1; j++)
        {
            if (i == 0 && j == 0){continue;}
            if (pNode->mX + i > 14 || pNode->mY + j > 14){continue;}
            if (pNode->mX + i < 0 || pNode->mY + j < 0){continue;}
            if (Map::GetInstance()->mMap[pNode->mX + i][pNode->mY + j].mTypeID == NODE_TYPE_SOLID){continue;}
            neighbors.push_back(Map::GetInstance()->mMap[pNode->mX+i][pNode->mY+j]);
        }
    }
    return neighbors;
} 
```

您多次执行某些相同的操作。您可以通过将这些操作的结果存储在变量中来使您的意图更加清晰。这样做不会使您的代码更短，但可能会使其更具可读性。

```
Vector<Node> AStarImpl:FindAdjacent(Node* pNode)
{
    Vector<Node> neighbors;
    for (int i = -1; i <= 1; i++)
    {
        for (int j = -1; j <= 1; j++)
        {
            if (i == 0 && j == 0){continue;}
            int x = pNode->mX + i;
            int y = pNode->mY + j;
            if (x > 14 || y > 14){continue;}
            if (x < 0 || y < 0){continue;}
            Node candidate = Map::GetInstance()->mMap[x][y];
            if (candidate.mTypeID == NODE_TYPE_SOLID){continue;}
            neighbors.push_back(candidate);
        }
    }
    return neighbors;
} 
```

# javascript - 从插件拦截 Firefox 中的 keyup 事件

> ID：11247043
> 
> 赞同：2
> 
> 时间：2012-06-28T14:37:50.927
> 
> 标签：javascript, events, firefox, firefox-addon

为了记录 Selenium 脚本，我需要能够拦截页面上的所有事件，例如 keyup 或 click。目前，我通过将事件侦听器附加到页面上的所有元素来做到这一点，但如果已经存在阻止事件冒泡的侦听器，它永远不会到达我。

[我尝试了https://stackoverflow.com/a/6434924/15255](https://stackoverflow.com/a/6434924/15255)在[调试时或从 JavaScript 代码中如何在 DOM 节点上查找事件侦听器](https://stackoverflow.com/questions/446892/how-to-find-event-listeners-on-a-dom-node)中的“替换 addEventListener”方法？，但这似乎不起作用。

这一切都在一个 Firefox 插件中，所以我可以做一些特权的事情，但似乎没有太多功能可以枚举或修改现有的侦听器。有人对如何做到这一点有建议吗？

编辑：目前的代码：

```
jQuery(frame.document).
        bind("dblclick", {}, this.listeners.writeJsonClicks, true).
        bind("keyup", {}, this.listeners.writeJsonChange, true).
        bind("change", {}, this.listeners.writeJsonChange, true); 
```

澄清一下：我无法控制 frame.document 中文档的内容。这是用户记录脚本的任何页面。问题是，当文档加载时，它自己的捕获已经安装，所以我的不会收到事件。

当页面 DOM 已完全加载但附加侦听器的 JS 尚未执行时，我一直试图在页面加载时捕获页面。使用[NsIObserverService](https://developer.mozilla.org/en/NsIObserverService)进行侦听`document-element-inserted`看起来很有希望，但是只要有任何 DOM，就会发生该事件：文档及其头部已加载，但正文未加载。

从根本上说，我需要一种方法来重新排序现有的侦听器以在之前的侦听器之前插入我的侦听器，一种能够在加载 DOM 树但 JS 尚未运行时运行代码的方法，或者一种方法拦截对 addEventListener 的调用以包装添加的侦听器，让我窃听。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:37:52.503

您应该注册一个捕获侦听器 - 无法阻止事件被捕获。

```
document.addEventListener("keyup", function(event)
{
  console.log("keyup event received on " + event.target);
}, true); 
```

# php - 我可以使用什么机制来订购阵列？

> ID：11247044
> 
> 赞同：5
> 
> 时间：2012-06-28T14:37:56.863
> 
> 标签：php, mysql, sql, arrays

我陷入了一个非常奇怪的问题。我的意思是我不怎么威胁这个。

基本上，我有一个网页，其中列出了已定义公交路线的所有站点（例如，`route_id = 141`）。有时，一条路线可以从 A 点开始并到达 B 点，因此理论上从一个终点站到另一个终点站。但是，有时，同一条路线可以在 A 和 B 之间的某个地方开始它的行程，然后到达 A 点或 B 点。

您可以在此地址看到一个实时工作示例：http: [//stm.tranzit.ca/bus/stops/85/Hochelaga/](http://stm.tranzit.ca/bus/stops/85/Hochelaga/)

我的超级抽奖：

```
Regular trip
Start(A) ----------------------------------- End(B)

Sometime
                 Start --------------------- End(B)
Start(A) ---------------------- End 
```

等等。它总是在 A 点和 B 点之间。90% 的时间是从 A 到 B，但另外 10% 的时间可以在两者之间的任何地方，直到那里的另一个点（有时是从中间到 A 或 B） .

好的。在我使用 stop_sequence 对结果进行排序之前。我知道停止顺序的顺序，所以停止 1、停止 2 等以及行程中有多少停止（行程是从 A 到 B，或 A 到中间等）。

现在，我找到了一种按行程对结果进行排序并将它们区分开来的方法，所以现在我知道了我得到的所有行程（AB、BA、A-middle、middle-B 等）。

因此，如果假设我有 AB、BA、A-Middle 和 B-Middle，那么一条路线有 4 次可能的行程。然后我获取所有链接到它的站点。

例如，这是定义路线的行程 A 到 B 的列表。请注意 stop_sequence 35 处的值。

```
1   #53014  Station Frontenac (Frontenac / Ontario)

... 2, 3\. etc..

34  #53293  Honoré-Beaugrand / Roux  
35  #54257  Station Honoré-Beaugrand / Sherbrooke    
36  #53290  Saint-Donat / Sherbrooke     
37  #53265  Saint-Donat / De Forbin-Janson   
38  #54676  Saint-Donat / De Grosbois    
39  #54674  Saint-Donat / Roi-René   
40  #54672  Saint-Donat / les Reaux  
41  #54668  Saint-Donat / Chénier    
42  #54661  Joseph-Renaud / Yves-Prévost     
43  #54646  Joseph-Renaud / Châtillon    
44  #54629  Joseph-Renaud / Wilfrid-Pelletier    
45  #54605  Joseph-Renaud / Châteauneuf  
46  #54609  Châteauneuf / Vaujours   
47  #54610  Châteauneuf / Rabelais   
48  #54612  Châteauneuf / de la Loire    
49  #54621  Châteauneuf / Roi-René   
50  #54623  Châteauneuf / des Ormeaux    
51  #54639  Châteauneuf / Rondeau    
52  #54724  Rondeau / Georges    
53  #54735  Rondeau / De La Vérendrye    
54  #54738  Rhéaume / Chaumont   
55  #54740  Chaumont / Guy   
56  #54741  Chaumont / Azilda    
57  #54742  Yves-Prévost / Azilda    
58  #54659  des Ormeaux / Chaumont 
```

这是中间和B之间的旅行。

```
1   #54257  Station Honoré-Beaugrand / Sherbrooke    
2   #53290  Saint-Donat / Sherbrooke     
3   #53265  Saint-Donat / De Forbin-Janson   
4   #54676  Saint-Donat / De Grosbois    
5   #54674  Saint-Donat / Roi-René   
6   #54672  Saint-Donat / les Reaux  
7   #54668  Saint-Donat / Chénier    
8   #54661  Joseph-Renaud / Yves-Prévost     
9   #54646  Joseph-Renaud / Châtillon    
10  #54629  Joseph-Renaud / Wilfrid-Pelletier    
11  #54605  Joseph-Renaud / Châteauneuf  
12  #54609  Châteauneuf / Vaujours   
13  #54610  Châteauneuf / Rabelais   
14  #54612  Châteauneuf / de la Loire    
15  #54621  Châteauneuf / Roi-René   
16  #54623  Châteauneuf / des Ormeaux    
17  #54639  Châteauneuf / Rondeau    
18  #54724  Rondeau / Georges    
19  #54735  Rondeau / De La Vérendrye    
20  #54738  Rhéaume / Chaumont   
21  #54740  Chaumont / Guy   
22  #54741  Chaumont / Azilda    
23  #54742  Yves-Prévost / Azilda    
24  #54659  des Ormeaux / Chaumont 
```

现在，如您所见，此处的 stop_sequence 1 与 35 相同。第二个停止与上面的 36 相同。您还可以看到，从第 35 站到第 58 站的计数为 24。与第二次行程相同。

现在，我想知道的是如何使用 PHP 合并它们？我想在这里假设第二组，并在第一次匹配时将其合并到第一组中，因此第二组中的 stop_sequence 1 将变为 stop_sequence 35，因为它匹配并且是相同的。

使用这种方式，我可以保持停止订单，而不是在订单结束时使用 stop_sequence，因为如您所见，第二次行程的 stop_sequence 1 在第一次行程中等于 24。这意味着如果我使用 MySQL 按 stop_sequence 进行排序，它将按顺序对所有 stop_sequence 进行排序，因此结果将是第一次行程的 stop_sequence 1，第二次行程的序列 1，等等，我的所有停靠点的顺序都是错误的，显然是错误的。

我想在 PHP 中执行此操作，但我不知道如何匹配数组中的结果并避免之后的 X 结果，因此我可以完美匹配。

如果你想知道我的 SQL 查询是什么，这里是：

```
SELECT      t.trip_id, t.trip_headsign, st.stop_sequence, s.stop_id, s.stop_code, s.stop_name
FROM        trips AS t
LEFT JOIN   stop_times AS st ON st.trip_id = t.trip_id
LEFT JOIN   stops AS s ON s.stop_id = st.stop_id
WHERE       t.route_id = 141
    AND     t.trip_id IN (
        SELECT trip_id
        FROM (
            SELECT trip_id
            FROM (
                SELECT      COUNT(*) AS count, trips.trip_id, trips.trip_headsign
                FROM        trips
                LEFT JOIN   stop_times ON trips.trip_id = stop_times.trip_id
                WHERE       route_id = 141
                    AND     trips.trip_id LIKE (SELECT CONCAT(service_id, "%") FROM calendar_dates WHERE date = "20120628")
                GROUP BY    trips.trip_id
            ) a
            GROUP BY count, trip_headsign
        ) a
    )
GROUP BY    t.trip_id, st.stop_id
ORDER BY    t.trip_id ASC, st.stop_sequence ASC 
```

`trip_id`定义它是否来自 AB、BA、A-middle 等。

`stop_sequence`是定义行程的停靠顺序

`stop_id`并`stop_code`共享相同的东西 - 唯一 ID（一个用于用户，一个用于内部系统）

`trip_headsign`就像 141-W 或 141-N（至于西或北）。！

**编辑**：

通过我的查询，我可以为每次旅行都停下来（这里是绿色和红色）。我想通过保持顺序将其合并到一个列表中。 [示例架构](http://i.stack.imgur.com/ziQ4N.png)

路线可以从第 1 站（红色）到第 8 站。所以行程 1 可以是第 1 站、第 2 站等，直到第 8 站。

路线可以从第 1 站（绿色）到第 8 站。所以行程可以是第 1 站、第 7 站和第 8 站。

我的查询给了我两个行程站的名单。

现在，我想将它们合并如下：

列表： - 1 号站（红色） - 2 号站 - 3 号站 .... - 6 号站 - 1 号站（绿色） - 7 号站（即使他处于红色和绿色行程中也一次） - 8 号站（即使他处于红色和绿色行程中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:40:12.280

总结评论中所说的话：

1.  通过断言第一站是 A 并且最后一站是 B 来查找权威行程
2.  对于彼此的旅行：
    1.  如果第一站是 A，它将与主要行程左/上对齐
    2.  如果最后一站是 B，它将与主行程右/下对齐

或者，您可以从较短行程的任一侧开始，并删除未出现在主要行程中的任何站点。

# php - 为什么我不能使用 PDO 创建触发器？

> ID：11247045
> 
> 赞同：1
> 
> 时间：2012-06-28T14:38:00.240
> 
> 标签：php, mysql, pdo

我正在尝试自动化我的触发器过程，这样我就不必为我想要使用的每个表手动创建触发器。不幸的是，我收到一条错误消息，说存在语法错误。

这是我的代码

```
$updateTrigger = "DROP TRIGGER IF EXISTS {$table}Update
    CREATE TRIGGER {$table}Update AFTER UPDATE ON $table
    FOR EACH ROW
    BEGIN
       DECLARE N DATETIME;
       SET N = now();
       INSERT INTO StagesHistory (Stage, StageID, Date, Action)
       VALUES ('$table', NEW.ID, N, ?);
    END";

$ut = $dbh->prepare($updateTrigger);
$ut->execute(array($update));
$error = $ut->errorInfo(); 
```

评估`$error`返回此错误消息：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“CREATE TRIGGER TranslationUpdate AFTER UPDATE ON Translation FOR EACH R”附近使用正确的语法

我无法弄清楚它在说什么错误。有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:43:12.967

`DROP TRIGGER ...`并且`CREATE TRIGGER ...`是两个单独的语句。您至少需要用 a 将它们分开`;`，可能在单独的查询中执行它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:46:27.277

是不是少了一个分号？应该是这样的：`DROP TRIGGER IF EXISTS {$table}Update;`。

# mysql - MYSQL: Unix_Timestamp 怎么扣2周

> ID：11247057
> 
> 赞同：0
> 
> 时间：2012-06-28T14:38:30.593
> 
> 标签：mysql, unix-timestamp

我已经看遍了，但似乎我所需的编码在任何地方都没有得到解决。请注意，“间隔”变量对我不起作用。请使用当前代码，它可以很好地显示当前周的所有日期。

下面的代码将当前一周的所有日期拆分出来，但是如何调整它以拆分前一周？（周日至周六）

```
 IF(FROM_UNIXTIME(renprop_commercial_new.tstamp, "%U") =  FROM_UNIXTIME(UNIX_TIMESTAMP(NOW()),"%U"),1,0) 
```

我尝试在“%U”后面添加一个负 7（几天），但这会导致脚本在每个日期都是正数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:43:04.473

从 中减去`1209600`（一周中秒数的两倍）`NOW()`。

```
IF(FROM_UNIXTIME(renprop_commercial_new.tstamp, "%U") =  FROM_UNIXTIME(UNIX_TIMESTAMP(NOW()-1209600),"%U"),1,0) 
```

或者，您可以使用`DATE_SUB()`：

```
IF(FROM_UNIXTIME(renprop_commercial_new.tstamp, "%U") =  FROM_UNIXTIME(UNIX_TIMESTAMP(DATE_SUB(NOW(), INTERVAL 2 WEEK)),"%U"),1,0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:50:21.960

虽然我更喜欢使用间隔，但这应该可以解决问题：

```
IF(FROM_UNIXTIME(1340341200, "%U") =  FROM_UNIXTIME(UNIX_TIMESTAMP(NOW())-(7*24*60*60),"%U"),1,0); 
```

# wpf - 使用 ShowModalWindow 时在 c# 中设置 WPF AutoCAD 对话框的开始位置

> ID：11247061
> 
> 赞同：1
> 
> 时间：2012-06-28T14:38:41.113
> 
> 标签：wpf, autocad, objectarx

我正在使用 AutoCad 启动 WPF 窗口

```
Autodesk.AutoCAD.ApplicationServices.Application.ShowModalWindow(myWindow); 
```

我希望此对话框在打开时始终出现在左侧。我尝试将 myWindow.Left 设置为 AutoCAD 主窗口的 x 坐标并设置为 0，但它始终出现在它的最后一个位置。在 WPF 中使用 Window.Show() 时可以设置位置，但需要 AutoCAD API 的 ShowModalWindow 方法，以便窗口始终位于 AutoCAD 之上，而不是任何其他程序，并且可以使用 AutoCAD 将其最小化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:54:34.040

好的，我已经在我的机器上进行了测试，所以我知道它可以工作。但是您可能需要稍作修改才能为您的窗口获取正确的坐标。在下面的实例中，我使用了 ShowModalDialog。但是 ShowModalWindow 应该类似地工作。

**第 1 步：** 更改表单属性 >> 开始位置：手动

**第2步：** 使用不同的重载方法：（意思是，将persistSizeAndPosition更改为False，这就是全部技巧）

```
Dim LineForm As New frmLineDsgn
LineForm.Left = System.Windows.Forms.Screen.PrimaryScreen.Bounds.Left + 5
LineForm.Top = System.Windows.Forms.Screen.PrimaryScreen.Bounds.Top + 5

Application.ShowModalDialog(LineForm.Handle,LineForm,False) 
```

看起来这个问题以前在 AutoCAD 论坛上被问过：Tony Tanzillo 有一个很好的答案（值得称赞）： [http ://forums.autodesk.com/t5/NET/ShowModalDialog-question/td-p/1744220](http://forums.autodesk.com/t5/NET/ShowModalDialog-question/td-p/1744220)

您将需要使用不同的重载方法：

```
Public Shared Function ShowModalWindow(ByVal owner As System.Windows.Window, 
ByVal formToShow As System.Windows.Window, 
ByVal persistSizeAndPosition As Boolean) As Boolean?
 Member of Autodesk.AutoCAD.ApplicationServices.Application

Public Shared Function ShowModalDialog(ByVal owner As System.Windows.Forms.IWin32Window, 
ByVal formToShow As System.Windows.Forms.Form, 
ByVal persistSizeAndPosition As Boolean) As System.Windows.Forms.DialogResult
 Member of Autodesk.AutoCAD.ApplicationServices.Application 
```

# .net - ItemTemplate 中的 .Net String.Format 货币与数据绑定中的小计

> ID：11247063
> 
> 赞同：2
> 
> 时间：2012-06-28T14:38:46.933
> 
> 标签：.net, listview, currency, itemtemplate, string.format

我有一个显示购物车的 ListView。在我添加 String.Format 以将 LineTotal 小数显示为货币字符串之前，它工作正常。当我刚刚在 LineTotal 上进行 Eval 时，它正在工作。

当我添加 String.Format 时，问题就出现了——它弄乱了代码隐藏。错误：输入字符串的格式不正确。

在 C# 中，我获取文本标签的值并在整个代码隐藏中使用它来执行诸如将产品的总价值（sum var）相加之类的事情。

我希望 PriceLabel 价格显示为货币，但也能够在我的 Listview 数据绑定函数中使用标签的值，以便我可以更新 sum var。

缩写项目模板：

```
<ItemTemplate>               
<asp:Label ID="PriceLabel" runat="server" Text='<%# String.Format("{0:C}", Eval("LineTotal"))%>' ></asp:Label>
</ItemTemplate> 
```

代码隐藏：

```
 protected void ProductListView_ItemDataBound(object sender, ListViewItemEventArgs e)
        {
        if (e.Item.ItemType == ListViewItemType.DataItem)
            {
            //update subtotal by finding the label string value
            Label lbl = (Label)e.Item.FindControl("PriceLabel") as Label;

            decimal sublinetotal = Convert.ToDecimal(lbl.Text);// <---- Input error here

            //update the sum var to show the total price on the page
            sum += sublinetotal;

            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:03:02.780

我认为在这种情况下，您的方法并不是很好。

首先，您得到的错误是因为 lbl.Text 可能是空的，因为正在进行绑定（请参阅，ASPX 文件中的值将在 ItemDataBound 事件之后设置）。所以，你最好直接设置读取DataItem：

```
var row = e.Item.DataItem as System.Data.DataRowView;
if (row != null) {
  sum += row["LineTotal"];
} 
```

有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/bb299031.aspx](http://msdn.microsoft.com/en-us/library/bb299031.aspx)。

但是，更稳健的方法是在任何数据绑定之前计算此值。因此，这将是可重用的，并且视图不必计算所有这些：

```
public class InvoiceLine {
  public Decimal Line { get; set; }
}

public class Invoice {
  public IList<InvoiceLine> Lines { get; set; }
  public Decimal Total {
    get {
      return Lines.Sum(l => l.Line);
    }
  }
}

protected void Page_Load(...) {
  var invoice = SomeInvoiceService.GetInvoice(id);
  ProductListView.DataSource = invoice.Lines;
  ProductListView.DataBind();

  TotalLabel.Text = String.Format("{0:C}", invoice.Total);
} 
```

ASPX 文件：

```
<asp:ListView ID="ProductListView" runat="server">
  <ItemTemplate>
    <%# String.Format("{0:C}", Eval("Line")); %>
  </ItemTemplate>
</asp:ListView> 
```

# javascript - 除了函数本身，不能在 jQuery 的 .ajax 方法中使用返回的数据

> ID：11247066
> 
> 赞同：0
> 
> 时间：2012-06-28T14:38:51.410
> 
> 标签：javascript, jquery, scope

相当奇怪的问题是，除了 .ajax 函数本身，我不能在任何地方使用数据变量（ajax 调用返回的信息）。

我确信这是一个范围问题，但是它超出了我的范围，并且将不胜感激任何指示。

```
$('img#test').live('click', function(e) {
    e.preventDefault();
    var test = getPreviewImage();
    alert(test); // This just gives undefined
});

function getPreviewImage()
{
  var output;

  var img_bg = $('div#preview-1 img:nth-child(1)').prop('src');
  var img_fg = $('div#preview-1 img:nth-child(2)').prop('src');

  $.ajax({
    url: "/blah.php?v=12345,

  }).done(function (data) {

    alert(data); // This gives the correct response
    output = data; // This should take the data value but still be in scope for the return statement below

  });

return output;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:40:38.883

这实际上不是范围问题，而是同步性问题。

当您的`getPreviewImage`函数返回时，尚未进行 ajax 调用（它是异步的，执行流程不会等待请求和响应完成），因此`output`仍然为 null。

您可以通过进行同步 ajax 调用或提供回调`getPreviewImage`而不是使用其返回值来解决此问题。

要进行同步 ajax 调用，请`false`作为`async`参数传递。请参阅[文档](http://api.jquery.com/jQuery.ajax/)。

要使用回调，您可以这样做：

```
$('img#test').live('click', function(e) {
    e.preventDefault();
    getPreviewImage(function(test){
        // use test
    });
});

function getPreviewImage(callback) {

  $.ajax({
    url: "/blah.php?v=12345",...

  }).done(function (data) {
    callback(data);
  });
} 
```

使用同步调用更容易（您只需将参数设置为 false），但回调逻辑通常更可取，因为它不会阻止您的脚本并允许并行请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:44:08.063

`$.ajax`您可以使用jQuery 函数调用另一个函数。尝试执行以下操作。

```
function getPreviewImage()
{
  var output;

  var img_bg = $('div#preview-1 img:nth-child(1)').prop('src');
  var img_fg = $('div#preview-1 img:nth-child(2)').prop('src');

  $.ajax({
    url: "/blah.php?v=12345,

  }).done(someotherFunction)

  });

}

function someotherFunction(data) {
     return data;
} 
```

# javascript - js对象可以动态重新分配给不同的类型吗？

> ID：11247069
> 
> 赞同：0
> 
> 时间：2012-06-28T14:39:05.610
> 
> 标签：javascript, type-conversion

我想知道 js 是否类似于 php，因为我可以重新分配一个对象并且它会起作用。例如：单击 1 按钮和 X = "5"，单击其他按钮和 Y = new Array(4)；X = Y;

我不确定 js 是否只是指针并允许这样做，或者是否存在某种类型转换错误......因为我的默认使用是字符串。当他们基本上单击备用按钮时，他们将尝试附加到它或只是将其转换为数组。

也许解决这个问题的一个简单方法就是让它成为 getgo 中的一个数组，除非另​​有说明，否则只引用 0。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:41:22.020

Javascript syntax allows that. But it's not recomended to use this "feature" because it will make your code harder to understand.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:43:30.417

Javascript 是松散类型的；任何变量都可以随时重新分配给任何值。

```
var X = 5;
X = [1,2,3];
X = {name: 'John', town: 'London'}; 
```

这里没有问题。但是，就像@SamuelRossille 所说，您可能希望避开此类代码以避免混淆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:46:19.767

它称为动态类型，可以有[很多好处](https://softwareengineering.stackexchange.com/a/122212/2297)。

[牛肚等于运算符](https://stackoverflow.com/a/3804028/106261)停止任何类型转换。

# perl - 匹配不以 HTTP 开头的 Src 属性

> ID：11247071
> 
> 赞同：-3
> 
> 时间：2012-06-28T14:39:12.953
> 
> 标签：perl

我正在尝试匹配所有`src`不以`http`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:26:45.213

那不是“非”运算符。那是“行首”锚字符。

类似的东西`s!^(?!http)/?!$PATH_BLAH/!`可能是你正在寻找的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:37:59.763

您希望将 URI 解析为绝对 URI。使用强大的 HTML 解析器：

```
use strictures;
use URI qw();
use Web::Query 'wq';

my $PATH_BLAH = 'http://example.com/blah/';
my $html = <<'HTML';
<html><head></head><body>
<img src="../relative-link" />
<img src="yup/another/one" />
<img src="/oh/I/start/with/a/slash" />
<img src="http://example.net/absolute-link" />
</body></html>
HTML

my $w = wq $html;
$w->find('*[src]')->each(sub {
    my (undef, $e) = @_;
    $e->attr('src', URI->new_abs($e->attr('src'), $PATH_BLAH));
});
print $w->html;

__END__
<html><head></head><body>
<img src="http://example.com/relative-link" />
<img src="http://example.com/blah/yup/another/one" />
<img src="http://example.com/blah/oh/I/start/with/a/slash" />
<img src="http://example.net/absolute-link" />
</body></html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:38:12.513

那不是 Perl。我猜这是一个正则表达式？而且我猜您正在尝试匹配不包含“http”的字符？如果是这样，你想要

```
(?:(?!http).)* 
```

`(?:(?!STRING).)`就是`(?:STRING)`这样。`[^CHAR]`_`CHAR`

# android - 如果导出 SherlockActionBar 会崩溃

> ID：11247072
> 
> 赞同：2
> 
> 时间：2012-06-28T14:39:15.423
> 
> 标签：android, actionbarsherlock

我在我的项目中实现了sherlockactionbar，效果很好，但是我不知道为什么当我将我的项目与eclipse导出到apk中以最终发布它时它甚至都没有打开！如果我从 Eclipse 运行它，它会完美运行......

这是日志：

```
06-28 15:54:24.050: E/AndroidRuntime(3707): Caused by: java.lang.RuntimeException: java.lang.NoSuchMethodException: <init> [class android.app.Activity, int]
06-28 15:54:24.050: E/AndroidRuntime(3707):     at com.actionbarsherlock.app.SherlockActivity.a(Unknown Source)
06-28 15:54:24.050: E/AndroidRuntime(3707):     at com.actionbarsherlock.app.SherlockActivity.setContentView(Unknown Source) 
```

*它在setContentView(..)*方法期间崩溃。

从 Eclipse 导出和运行（不在调试中）有什么区别？它们不应该是具有不同密钥的相同代码吗？

编辑：

好的，我说问题出在 SherlockActivity，而不是主题。如果我删除前缀sherlock，即使在编译eclipse时使用theme.sherlock.light它也不会崩溃必须以某种方式破坏代码......

我再说一遍：如果我在调试中运行它，或者只是使用 eclipse 中的运行按钮，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:47:47.280

好的，经过多次尝试，我解决了！Eclipse 没有正确编译它，因为我的项目中有两个 support.v4 jar！我没有注意到它......当你有两个相同的 jar 它不会给你一个错误但它无法正确编译，事实上在删除它之后我的 apk 的大小也增加了很多。

# php - 使用 PHP 与 .net SOAP 服务交互

> ID：11247074
> 
> 赞同：0
> 
> 时间：2012-06-28T14:39:20.297
> 
> 标签：php, xml, api, soap

我有一个从我的网站到基于 .net 的 API 的有效 SOAP 请求。出于某种原因，PHP 似乎在解析响应时遇到了问题。

当我转储响应时，大部分检索到的数据都在一个名为“any”的字符串中。该字符串似乎是返回的 XML 的副本。这个问题太大了，无法粘贴，但您可以在此处查看响应内容：http: [//pastie.org/4165973](http://pastie.org/4165973)

我曾尝试在 simplexml 中加载此字符串，但出现错误：“文档末尾的额外内容”。

有没有人遇到过类似的问题？如何解析此响应？

*编辑*我将 __getLastResponse() 保存到文件中以获得尽可能原始的输出。新的 XML 在这里[http://pastebin.com/3ZtjDbjw](http://pastebin.com/3ZtjDbjw)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:01:07.727

XML 看起来格式不正确。 `<ShipToAddress>`可能是不正确的，但它包含可能是破坏解析器的 CDATA。

在任何情况下，通过 XML linter (http://xmlsoft.org/xmllint.html) 运行它，看看它要说什么。但是，我的猜测是源 API 要么错误地将其吐出，要么您在将其打印出来之前对其进行了处理，因此您提供的实际上并不是实时输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:10:47.137

xml 格式不正确。相反，这个问题与命名空间有关。我最终在[PHP Parse Soap Reponse Issue - SimpleXMLElement](https://stackoverflow.com/questions/9265008/php-parse-soap-reponse-issue-simplexmlelement) and [Parse XML with Namespace using SimpleXML的帮助下解决了这个问题](https://stackoverflow.com/questions/595946/parse-xml-with-namespace-using-simplexml)

# autotools - 分发自动工具元文件

> ID：11247076
> 
> 赞同：3
> 
> 时间：2012-06-28T14:39:24.420
> 
> 标签：autotools, autoconf, automake

`AM_MAINTAINER_MODE`一直受到批评，我认为主要的反对意见是，如果未检测到对元文件的依赖关系，它会导致不正确的构建。此外，经常有人认为生成的文件不属于版本控制系统（我同意这个立场）。我目前认为如果`configure`不属于 vcs，那么`configure.ac`也不`Makefile.am`属于 tarball。为此，我编写了一个简单的脚本来清除 Makefile.in 中的某些目标，并将以下目标添加到顶级 Makefile.am：

```
dist-hook:
    @rm $(distdir)/configure.ac
    @rm $(distdir)/aclocal.m4
    @find $(distdir) -name Makefile.am -exec rm {} \;
    @find $(distdir) -name Makefile.in -exec $(top_srcdir)/clean-Makefile {} \; 
```

该解决方案回避了`AM_MAINTAINER_MODE`由于没有要修改的元文件而产生的问题。

令我震惊的是，autoconf 的最大失败之一是错误地认为使用它构建的每个项目都依赖于 autoconf（这不是 autoconf 失败，而是营销/教育的失败），而这种误解主要是由于包含元文件的压缩包。

问题：有没有更好的方法来实现创建不包含自动工具元文件的 tarball 的预期目标？（对于这个论坛来说，这个目标仅仅是“可以说是不受欢迎的”还是“真正的邪恶”的问题太开放了！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T02:21:14.860

可能有办法做到这一点，但即使有，Automake 也不支持。

Automake 的主要目标是实现有关 Makefile 的 GNU 编码标准。并且，GNU 的一个原则是用户应该被给予主要的来源来破解——这是 GPL 的要求。

运送派生文件而不是源文件是违反这个想法的。

我认为你在这里的理论是错误的。用户受益于拥有源代码。例如，不得不破解配置或构建脚本是相当普遍的；这对于源代码来说要简单得多。

# c# - 如何使用 C# API 在 z3 定点中定义乐趣

> ID：11247083
> 
> 赞同：1
> 
> 时间：2012-06-28T14:39:49.443
> 
> 标签：c#, api, z3

我想定义可以在定点规则中使用的函数。例如：

```
(declare-var int1 Int)
(declare-var int2 Int)
(declare-rel phi( Int Int))
(define-fun init((a Int)(b Int)) Bool
    (and
        (= a 0)
        (= b 0)
    )
)

(rule ( =>
    (init int1 int2)
    (phi int1 int2))
)

(query (and (phi int1 int2) (= int1 0))) 
```

据说没有“define-fun”的api，应该在API中翻译成量词。我尝试使用 c# api 来实现它。但是，我得到了错误的答案。（结果应该是令人满意的，但是，它是不可满足的）代码：

```
using (Context ctx = new Context())
{
    var s = ctx.MkFixedpoint();
    Solver slover = ctx.MkSolver();
    IntSort B = ctx.IntSort;
    RealSort R = ctx.RealSort;
    BoolSort T = ctx.BoolSort;
    IntExpr int1 = (IntExpr) ctx.MkBound(0, B);
    IntExpr int2 = (IntExpr) ctx.MkBound(1, B);
    FuncDecl phi = ctx.MkFuncDecl("phi", new Sort[] {B, B }, T);
    FuncDecl init = ctx.MkFuncDecl("init", new Sort[] {B, B}, T);
    s.RegisterRelation(phi);
    s.RegisterRelation(init);
    Expr[] initBound = new Expr[2];
    initBound[0] = ctx.MkConst("init" + 0, init.Domain[0]);
    initBound[1] = ctx.MkConst("init" + 1, init.Domain[1]);
    Expr initExpr = ctx.MkEq((BoolExpr)init[initBound],
    ctx.MkAnd(ctx.MkEq(initBound[0], ctx.MkInt(0)), ctx.MkEq(initBound[1], ctx.MkInt(0))));
    Quantifier q = ctx.MkForall(initBound, initExpr, 1);
    slover.Assert(q);
    s.AddRule(ctx.MkImplies((BoolExpr)init[int1, int2],
    (BoolExpr)phi[int1, int2]));
    Status a = s.Query(ctx.MkAnd((BoolExpr)phi[int1,int2],ctx.MkEq(int1, ctx.MkInt(0))));
} 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:37:43.817

下面是一个将宏变成规则的版本。

```
var s = ctx.MkFixedpoint();
IntSort B = ctx.IntSort;
BoolSort T = ctx.BoolSort;
IntExpr int1 = (IntExpr) ctx.MkBound(0, B);
IntExpr int2 = (IntExpr) ctx.MkBound(1, B);
FuncDecl phi = ctx.MkFuncDecl("phi", new Sort[] {B, B }, T);
FuncDecl init = ctx.MkFuncDecl("init", new Sort[] {B, B}, T);
s.RegisterRelation(phi);
s.RegisterRelation(init);
Expr[] initBound = new Expr[2];
initBound[0] = ctx.MkConst("init" + 0, init.Domain[0]);
initBound[1] = ctx.MkConst("init" + 1, init.Domain[1]);
Expr initExpr = ctx.MkImplies(
      ctx.MkAnd(ctx.MkEq(initBound[0], ctx.MkInt(0)), ctx.MkEq(initBound[1], ctx.MkInt(0))),
              (BoolExpr)init[initBound]);

Quantifier q = ctx.MkForall(initBound, initExpr, 1);

s.AddRule(q);
s.AddRule(ctx.MkImplies((BoolExpr)init[int1, int2], (BoolExpr)phi[int1, int2]));

Status a = s.Query(ctx.MkAnd((BoolExpr)phi[int1,int2],ctx.MkEq(int1, ctx.MkInt(0))));

Console.WriteLine("{0}",a);

Console.WriteLine("{0}", s.GetAnswer()); 
```

或者，可以编写一个函数

```
Term init(Context ctx, Term a, Term b) { 
   Term zero = ctx.MkInt(0);
   return ctx.MkAnd(ctx.MkEq(a,zero),ctx.MkEq(b,zero));
} 
```

并在您应用“init”的地方使用此功能。

# php - Yii 推荐自定义界面

> ID：11247090
> 
> 赞同：1
> 
> 时间：2012-06-28T14:40:18.533
> 
> 标签：php, yii

我只想遵循约定，我需要知道在哪里放置我想要类实现的自定义接口。

我知道这只是一个建议，但很高兴知道你的想法？

谢谢，丹尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:59:34.943

你的问题有太多的答案。我建议你尝试尝试不同的方式来使用 Yii。例如，我喜欢只在模块中开发。为什么？是重用我的代码的最简单方法。但这是我的编码方式。是我的“需要”。

您的应用程序需要什么？有一些方法可以开发可重用的动作。那么，什么是正确的呢？取决于你的需要。

有时人们会问“是更好的 MySQL 还是 SQLite？”。asnwer 可以是“可能只是一个 json 或文本文件”。

你是一个人还是在一个团队中？询问团队。

或者，...只是尝试，对你和不同的方法充满信心。

# php - 通过 preg_match_all 从页面 url 获取所有 imdb id

> ID：11247091
> 
> 赞同：-3
> 
> 时间：2012-06-28T14:40:24.513
> 
> 标签：php, curl

如何从页面获取所有 IMDB id？例如，我想从[这里](http://www.imdb.com/movies-coming-soon/)获取所有 id 。在该页面中，网址的格式为：

```
http://www.imdb.com/title/tt0948470/ 
```

我需要使用从页面获取所有 id `preg_match_all()`- 有什么可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:56:58.133

好的，我没有提供熟化的代码。Firefox 中“查看选择源”的一个简单功能让我看看每个链接在格式上都有 href 属性：

```
href="/title/tt1615065/" 
```

现在构建一个 RegEx 将是微不足道的。我建议你一个好的正则[表达式教程](http://www.zytrax.com/tech/web/regex.htm)和一个非贪婪的匹配就可以了。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:46:39.640

好的，我给出了熟化的代码，但我也解释一下：

1.  获取 HTML 源代码
2.  解析所有`<a>` `href`属性
3.  如果它们的值匹配，则使用正则表达式进行测试。
4.  如果匹配，请从链接中提取 id 并以不会重复的方式存储它。
5.  完毕。

示例/[演示](http://codepad.viper-7.com/I88jcr)

```
// initialize
$ids   = array(); 
$url   = 'http://www.imdb.com/movies-coming-soon/'; # this URL
$expr  = '//a/@href';                               # these attributes
$regex = '(/title/(tt\d{5,7})/)u';                  # matching this regex
$match = 1;                                         # take group 1

// process
foreach((new DOMXpath(@DOMDocument::loadHTMLFile($url)))->query($expr) as $obj)
    preg_match($regex, $obj->value, $matches)
      && $ids[$matches[$match]] = 0;
    ;
$ids = array_keys($ids);

// output
print_r($ids); 
```

（*注意：*你标记了这个问题 PHP5，当前稳定的 PHP5 是 5.4，这个例子也是；如果你用 curl 包装器配置你的 PHP5 版本，这个代码是`curl`。）

**编辑：**较低的 PHP 版本：

```
...
// process
$xp = new DOMXpath(@DOMDocument::loadHTMLFile($url));
foreach($xp->query($expr) as $obj)
... 
```

**编辑 2：**只看到 IMDB 标记了它的标记，因此可以检索该列表的实际电影条目，而不是该页面上的任何标题链接。

这需要对所使用的 xpath 表达式进行一些改进。因为解析现在更加智能，所以不存在重复项，因此无需删除它们：

```
// initialize
$ids   = array();
$url   = 'http://www.imdb.com/movies-coming-soon/'; # this URL
$expr  = '//*[@itemtype="http://schema.org/Movie"]
                //a[@itemprop="url"]/@href';        # these attributes
$regex = '(/title/(tt\d{5,7})/)u';                  # matching this regex
$match = 1;                                         # take group 1

// process
$xp = new DOMXpath(@DOMDocument::loadHTMLFile($url));
foreach($xp->query($expr) as $obj)
    preg_match($regex, $obj->value, $matches)
        && $ids[] = $matches[$match];
; 
```

# c - 像数据一样重放 Pcap 文件

> ID：11247092
> 
> 赞同：0
> 
> 时间：2012-06-28T14:40:33.123
> 
> 标签：c, openssl, pcap

我想将服务器和客户端之间的握手消息记录到文件中并稍后重播。

例如，当我使用 -debug 选项运行 s_server 命令时，我会得到如下输出：

```
read from 0x9482088 [0x948d518] (2064 bytes => 2064 (0x810))
0000 - 0b 00 08 0c 00 08 09 00-04 1a 30 82 04 16 30 82   ..........0...0.
0010 - 02 fe a0 03 02 01 02 02-01 02 30 0d 06 09 2a 86   ..........0...*.
0020 - 48 86 f7 0d 01 01 05 05-00 30 81 88 31 0b 30 09   H........0..1.0.
0030 - 06 03 55 04 06 13 02 4e-4c 31 0b 30 09 06 03 55   ..U....NL1.0...U
0040 - 04 08 0c 02 4e 42 31 12-30 10 06 03 55 04 07 0c   ....NB1.0...U...
0050 - 09 41 4d 53 54 45 52 44-41 4d 31 10 30 0e 06 03   .AMSTERDAM1.0...
0060 - 55 04 0a 0c 07 4d 41 49-4e 20 43 41 31 0c 30 0a   U....MAIN CA1.0.
0070 - 06 03 55 04 0b 0c 03 49-43 54 31 17 30 15 06 03   ..U....ICT1.0...
0080 - 55 04 03 0c 0e 77 77 77-2e 6d 61 69 6e 63 61 2e   U....www.mainca. 
```

我可以将这些数据记录到文件中。但是如何将这些数据（字节）提取到缓冲区中？Openssl 中是否有任何实用程序可以做到这一点？或者什么都可以在C程序中完成？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:20:56.990

是的。假设您将日志保存为[pcap](http://en.wikipedia.org/wiki/Pcap)文件， [tcpreplay](http://tcpreplay.synfin.net/)将完全按照您的意愿行事。如果您不保存为. 文件`pcap`，则可以使用`libpcap`或自己编写文件来保存（格式不是非常复杂）。

# c# - 如何通过字符串数组的行填充组合框？

> ID：11247093
> 
> 赞同：0
> 
> 时间：2012-06-28T14:40:34.437
> 
> 标签：c#, arrays, winforms, combobox

请问这里有什么问题

```
abc = labGuns.Text;  // multiline label
string[] arr = Regex.Split(abc, "\r\n");
x = 0; 
foreach (string line in arr)
{
    MessageBox.Show(line); //works fine - shows each line of label
    x = x + 1;
    string abc = "cbGuns" + x.ToString();
    MessageBox.Show(abc); //works fine - shows "cbGuns1", "cbGuns2"...
    foreach (Control c in panPrev.Controls)
    {
        if (c.Name == abc) // five combos named cbGuns1, cbGuns2...
        {
            c.Text = line; //doesn't work. No combo changes its text
        }
    }
} 
```

如果我将最后一行更改为 - `c.Text = "323"`- 也没有发生任何事情。
因此，错误显然在代码末尾附近。

此代码也有效（作为测试）：

```
foreach (Control c in panPrev.Controls)
{
if (c.Name == "cbGuns1")
{
c.Text = "323";
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:48:32.347

如果您的控件是组合并且您想要设置“文本”属性而不具有项目列表，那么您的组合应该具有`DropDownStyle = DropDown`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:43:45.870

尝试将 c 转换为 DropDownList

```
DropDownList ddl =(DropDownList) c;<br/>
ddl.Text ="your text" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:45:51.000

如果我对您的理解正确，您想在 Combobox 中添加一行，而不是选择当前其中的一行，对吗？为此，您不要将 Combobox 的 Text 值设置为字符串，您需要向 Combobox 添加一个新的 ComboboxItem，如下所示：

```
c.Items.Add(line); 
```

代替

```
c.Text = line; 
```

让我知道这个是否奏效！

编辑：好的，因为您正在尝试更改组合框的选定项目，所以我只想写

```
c.SelectedItem = line; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T14:48:18.367

尝试替换`c.Text = line;`为`c.Items.Add(line);`.

`AddRange`但是，在添加多个项目时是首选，因此请尝试以下操作，而不是`foreach`循环：

```
foreach (Control c in panPrev.Controls)
{
    if (c.Name.StartsWith("cbGuns"))
    {
        c.Items.AddRange(arr);
    }
} 
```

# objective-c - 合成的 NSNumber “超出范围”

> ID：11247095
> 
> 赞同：0
> 
> 时间：2012-06-28T14:40:37.743
> 
> 标签：objective-c, nsnumber, synthesize

我正在做一个 iOS 应用程序来抓取我的 youtube 订阅的视频。当我想在第三次浏览下一个视频时遇到问题。

对于这些，我需要收集开始索引（NSNumber *youtubeStart）来添加显示的视频数量（int const maxVideos）。

为此，我在我的 VideosViewController.h

```
@interface VideosViewController : UIViewController {
    NSNumber *youtubeStart;
}

@property (nonatomic, retain) NSNumber *youtubeStart; 
```

然后在 VideosViewController.m

```
@synthesize youtubeStart;
static int const maxVideos = 6; 
```

还有一种方法

```
- (void) navigateVideos:(id)sender
{
    int navigate = 0;
    int start = [youtubeStart intValue];

    if(sender == bt_prev)
    {
        if(start >= maxVideos)
        {
            start -= maxVideos;
            navigate = 1;
        }
    }

    if(sender == bt_next)
    {
        start += maxVideos;
        navigate = 1;
    }

    if (navigate > 0)
    {   
        youtubeStart = [NSNumber numberWithInt:start];
        NSString *url = [NSString
             stringWithFormat:@"%@&start-index=%i&max-results=%i"
             , myUrl, [youtubeStart intValue], maxVideos];
        [self LoadOAuthUrl:url];
    }
} 
```

当我“TouchUpInside”按钮“bt_prev”或“bt_next”之一时，它调用“navigateVideos”。我可以根据需要多次按 bt_prev 或 bt_next 并且它可以工作，但是如果我连续按 bt_next 3 次，则 youtubeStart 超出范围。它似乎无法超越第三页。

你能帮我理解为什么以及如何处理它。

我的其他合成变量没有超出范围。

非常感谢你的帮助。

编辑：我从 x-code 在 ipad 模拟器上运行应用程序。应用程序会因 EXC_BAD_ACCESS 错误而崩溃。youtubeStart 在“int start = [youtubeStart intValue];”之前的调试器中似乎“超出范围” 这就是它崩溃的原因。当它工作正常时， youtubeStart 不会超出范围。

编辑 2：堆栈跟踪总是丢失。我刚刚在调试器控制台中得到了这个：

```
Program received signal:  “EXC_BAD_ACCESS”. 
```

这在调试器中带有红色箭头：

```
0x0134d0b0  <+0036>  cmp    ecx,DWORD PTR [eax] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:26:54.800

你没有遵守 Cocoa 内存管理规则。您的正确代码应该是

```
self.youtubeStart = [NSNumber numberWithInt:start]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:36:45.787

此问题是由于您未正确使用属性引起的。为属性`self.youtubeStart`分配新值时应始终使用。`youtubeStart`这是为了使您的财产可以保留该对象。当您直接分配给 iVar 时，`NSNumber`不会保留实际对象，这意味着当您稍后访问它时（例如调用 时`start = [youtubeStart intValue]`），该对象可能已被自动释放。

我猜“超出范围”错误实际上意味着该对象已被释放。

这是我推荐的...

`@interface`在 VideosViewController.h 中删除此代码：

```
{
    NSNumber *youtubeStart;
} 
```

并将您的更改`@synthesize`为：

```
@synthesize youtubeStart = _youtubeStart; 
```

然后，您将`youtubeStart`在代码中直接访问一些编译器错误/警告。通过更改对`self.youtubeStart`.

这是使用属性的一个非常好的做法，因为它确保您不会不小心直接使用 iVar。如果您确实想直接使用 iVar，您可以使用`_youtubeStart`（此 iVar 由该`@synthesize`行自动创建）。但是，除非您完全了解访问器和保留等的工作原理，否则我建议您根本不要使用它。

另外，如果你对这些东西感到困惑，我强烈建议你研究一下 ARC :)

# ado.net - 如何使用 ADO.NET 在 SQL CE 中设置 NOCOUNT ON？

> ID：11247097
> 
> 赞同：1
> 
> 时间：2012-06-28T14:40:40.317
> 
> 标签：ado.net, c#-3.0, compact-framework, sql-server-ce, windows-ce

我想在使用 SQL CE 的 Windows CE 应用程序中设置 nocount。通常我会编写一个存储过程并在其中设置 nocount，但 SQL CE 不支持存储过程。

**是否可以在 ADO.NET SqlCeConnection 或 SqlCeCommand 中抑制 COUNT ？**

Windows CE 6.0 CF.NET 3.5 SQL CE 3.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:59:15.600

不，这是不可能的，SQL Compact 中没有 SET NOCOUNT - 你想解决什么问题？

# c - 如何将 2 个部分放在 1 个段中（使用 ld 脚本）

> ID：11247098
> 
> 赞同：10
> 
> 时间：2012-06-28T14:40:41.923
> 
> 标签：c, linux, ld, segments

我有以下链接器脚本：

```
SECTIONS {

    .arora_exec_free_space 4399531 : 
    {
        *(.text)
        *(.rodata)
        *(.data.rel.ro.local)
    }
    .arora_data_free_space (ADDR(.arora_exec_free_space) + SIZEOF(.arora_exec_free_space)) : AT (7592352)
    {
        *(.data)
        *(.bss)
        *(.got)
    }
} 
```

当我编译我的程序时，这两个部分（exec 和 data）位于不同的 LOAD 段中。我想将这两个部分（.arora_data_free_space 和 .arora_exec_free_space）放入一个 LOAD 段中。有没有办法使用链接器脚本来做到这一点？我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T14:54:35.743

当然 - 你只需要使用[PHDRS](http://sources.redhat.com/binutils/docs-2.10/ld_3.html#SEC39)。我认为，该链接上的示例几乎正是您想要做的。这是我从您的链接器脚本制作的（未经测试的）示例：

```
PHDRS
{
   mysegment PT_LOAD;
}

SECTIONS 
{
    .arora_exec_free_space 4399531 : 
    {
        *(.text)
        *(.rodata)
        *(.data.rel.ro.local)
    } :mysegment

    .arora_data_free_space (ADDR(.arora_exec_free_space) + SIZEOF(.arora_exec_free_space)) : AT (7592352)
    {
        *(.data)
        *(.bss)
        *(.got)
    } :mysegment
} 
```

# java - Netbeans background image moves away from other components

> ID：11247100
> 
> 赞同：1
> 
> 时间：2012-06-28T14:40:45.387
> 
> 标签：java, user-interface, netbeans, jframe, jlabel

I add this problem for quite some time when using NetBeans.

Recently I add a jlabel and placed an image as my background, but now when I try to add more jlabels or buttons, those item wont go on top of the background image. The background image just moves away from the jlabels/buttons, etc. Not sure if I turned off a property, or not even sure what I did to mess that up. Anyone know how to fix this problem? So that I can add more pictures and buttons on top of the background image instead of having my background image move away from these other components. I search around, but couldn't find an answer, so Im hoping one of you guys could help me with this issue. Thanks :D

The Jframe layout is set to free design.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:45:41.400

我认为这应该有助于[在 Java GUI 应用程序中处理图像](http://netbeans.org/kb/docs/java/gui-image-display.html#background)准确显示如何在 Netbeans IDE 中添加图像作为背景

# php - Replace everything between two tags

> ID：11247101
> 
> 赞同：4
> 
> 时间：2012-06-28T14:40:55.153
> 
> 标签：php, regex

> **Possible Duplicate:**
> [Insert string between two points with PHP](https://stackoverflow.com/questions/3355213/insert-string-between-two-points-with-php)

How can I replace everything between `<!-- START NOT PRINT -->` and `<!-- END NO PRINT -->`?

The following code works well, but whenever there are two or more instances, it goes wrong.

It then replaces everything between the first tag and the last tag. But it should remove everything between two tags which belongs together. This is my code:

```
$pageData['raw_content'] = preg_replace('/<!--[ ]*START[ ]*NO[ ]*PRINT[ ]*-->(.*)<!--[ ]*END[ ]*NO[ ]*PRINT[ ]*-->/si', '', $pageData['raw_content']); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T14:43:38.913

你在贪婪地匹配。

你需要一个[非贪婪的修饰符](http://www.regular-expressions.info/repeat.html#lazy)：

```
'/<!--[ ]*START[ ]*NO[ ]*PRINT[ ]*-->(.*?)<!--[ ]*END[ ]*NO[ ]*PRINT[ ]*-->/si' 
```

注意`.*`已经变成了`.*?`。

# android - 有没有办法在android中管理皮肤？

> ID：11247113
> 
> 赞同：0
> 
> 时间：2012-06-28T14:41:47.430
> 
> 标签：android, image, skin

我正在开发一个应用程序，其中包含我用作皮肤的 2 个主题和图片。我可以在代码中为整个活动设置主题。我的问题是我不知道如何正确分离图片时的皮肤。例如，我有两个主题（黑色和白色），并且我有一组特定于这些主题的图片。如何将图片分开，以便我可以从代码中设置皮肤的主题和图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:48:34.613

对不起。我误解了这个问题。我将之前的答案保留在下面，以便评论自然流畅。

在本例中，我们拥有的是 Branding.java 类。此类接受品牌名称（在您的情况下为主题）并生成该主题独有的各种值和字符串。例如，您可以将 Splash 图像命名为 dark_theme_splash.png 和 light_theme_splash.png。加载该可绘制对象时，您调用 Branding.getSplash() 并返回基于当前所选主题的可绘制对象。

```
public static Drawable getSplash() {
    switch(MYApplication.Theme){
    case LIGHT:
        return MYApplication.res.getDrawable(R.drawable.light_theme_splash);
    }
    return MYApplication.res.getDrawable(R.drawable.dark_theme_splash);
} 
```

在品牌推广中，您将拥有：

```
public class Branding {

    public static final int LIGHT = 0;
    public static final int DARK = 1; 
```

然后在您的应用程序中，您将有一个 int current_theme 并将其设置为您想要的主题。

****下面是回答了一个实际上没有被问到的问题的旧答案 **** 我管理一个有八个不同主题的应用程序。有些截然不同。到目前为止，我为此找到的最佳解决方案分为两部分。

1.) 你的 build.xml。由于您正在构建不同的皮肤应用程序，我想他们的 .apk 会以不同的方式命名。在您的 build.xml 中，利用不同的目标。例如：

```
 <target name="release-themeone">
        <antcall target="-do-release" inheritAll="false">
         <param name="app.pkg" value="mapmyfitness" />
         <param name="app.pkg.name" value="com.themeone.android2" />
         <param name="launcher.icon" value="common_icon_launcher" />
         <param name=".app.name" value="DarkTheme+" /> />
       </antcall>
    </target> 
```

2.) 这允许您为不同的构建设置不同的参数。在我的例子中，我们有很多不同的drawable，在不同的drawable文件夹中管理它们变得很麻烦。因此，在可绘制文件夹本身中，我们放入了所有常见资源。然后在可绘制文件夹之外创建文件夹，复制可绘制文件夹结构，但包含在主题名称中。例如，文件夹 Themeone 将包含 Drawable、Drawable-hdpi 等。这使我们能够以这样一种方式操作构建系统，即每个特定目标只提取它需要的可绘制对象。

```
 <copy todir="bin/${app.pkg}/res/drawable" overwrite="true">
    <fileset dir="./brands/${brand.prefix}/drawable"/>  
  </copy>
  <copy todir="bin/${app.pkg}/res/drawable-hdpi" overwrite="true">
    <fileset dir="./brands/${brand.prefix}/drawable-hdpi"/> 
  </copy>
  <copy todir="bin/${app.pkg}/res/drawable-mdpi" overwrite="true">
    <fileset dir="./brands/${brand.prefix}/drawable-mdpi"/> 
  </copy>
  <copy todir="bin/${app.pkg}/res/drawable-xhdpi" overwrite="true">
    <fileset dir="./brands/${brand.prefix}/drawable-xhdpi"/>    
  </copy> 
```

所有这些都包含在 build.xml 中的 for 循环中，该循环遍历了我们拥有的各种构建目标。

希望有帮助。

# android - Android：无法正常工作的 xml（framelayout 和 imageview

> ID：11247114
> 
> 赞同：-1
> 
> 时间：2012-06-28T14:41:50.410
> 
> 标签：android, include, frame, qr-code

我有这个xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<ImageView
    android:src="@drawable/head"
/> 
<FrameLayout
android:layout_width="200dip" 
android:layout_height="200dip" 
android:layout_gravity="center_horizontal">
    <include layout="@layout/capture"/>
</FrameLayout>

</LinearLayout> 
```

它必须在一个二维码阅读器下方显示一个图像，该二维码阅读器取自为查看二维码捕获相机而创建的外部 apk 库。
它仅在我删除 imageviev 时才有效。
为什么？我需要图像和包含。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:44:31.203

您需要为 ImageView 提供更多属性，例如：

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

# c#-4.0 - Passing a lambda into a function gives an "inferred" error

> ID：11247116
> 
> 赞同：1
> 
> 时间：2012-06-28T14:41:57.447
> 
> 标签：c#-4.0, lambda

I have a function that gets a filtered list of items based on the lambda expression I pass in. Below is an example of what I am doing. The List is an ObservableCollection of myBase and the filter I am passing in would be something like this: t => t.Data.Any()

At the moment if I replace "filter" with the above lambda it works but when I pass it in and use the local variable, filter, I get a compile error like “cannot be inferred from the usage. Try specifying the type arguments explicitly.”</p>

```
 protected IEnumerable<myBase> GetByFilter(Expression<Func<myBase, bool>> filter)
    {
        IEnumerable<myBase> itemlList = _items.Where(filter).ToList();
        return itemlList ;
    } 
```

What am I missing here?

Edit -------------------

I am trying to get a subset of the original list based on the lambda passed in. I think I may be able to get away with the lambda line returning another observableCollection rather than an IEnumerable one, if that is possible?

Edit -------------------

With help from Ruslan, I have fixed my problem. My code now compiles and looks like this:

```
protected IEnumerable<myBase> GetByFilter(Func<myBase, bool> filter) 
{ 
    IEnumerable<myBase> itemlList = _items.Where(filter).ToList(); 
    return itemlList ; 
} 
```

I can pass in a filter like "t => t.Data.Any()" and get all the items etc. I just needed to drop "Expression" from the filter parameter.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:35:54.393

我不明白这个示例如何在将 Queryable 扩展“Where”应用于 Enumerable 集合的情况下进行编译。而且它的使用方式仍然不完全清楚。但是，以下内容会编译并运行。

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;

namespace TestProject
{
    class myBase
    {
        public int Id;
        public string Data;
    }

    class Program
    {
        static ObservableCollection<myBase> _items;

        static IEnumerable<myBase> GetByFilter(Func<myBase, bool> filter)
        {
            IEnumerable<myBase> itemlList = _items.Where(filter).ToList();
            return itemlList;
        }

        static void Main(string[] args)
        {
            _items = new ObservableCollection<myBase> { 
                new myBase { Id = 1, Data = "" },
                new myBase { Id = 2, Data = "Data" },
                new myBase { Id = 3, Data = "More Data" }
            };

            IEnumerable<myBase> filteredList = GetByFilter(t => t.Data.Any());

            foreach (var item in filteredList)
                Console.WriteLine("{0}: {1}", item.Id, item.Data);
        }
    }
} 
```

结果：

```
2: Data
3: More Data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:26:41.227

问题*似乎*是您的过滤器是 type `Expression<Func<IdcBase, bool>>`，但是（根据评论）该集合的`Where`方法需要一个. `_items``Func<myBase, bool>`

我不知道`MyBase`and之间的关系是什么，`IdcBase`但我会***假设***`IdcBase`继承自`MyBase`.

如果上述假设是正确的，那么您将无法过滤`MyBase`使用预期为 的过滤器的列表`IdcBase`，因为您可能会有`_items`不属于 类型的条目`IdcBase`。您需要提供一个需要 type 输入的过滤器`MyBase`，或者您需要首先限制`_items`那些 type `IdcBase`：

```
protected IEnumerable<myBase> GetByFilter(Expression<Func<IdcBase, bool>> filter)
{
    IEnumerable<myBase> itemlList = _items.OfType<IdcBase>().Where(filter).ToList();
    return itemlList ;
} 
```

# javascript - does jquery parse XML documents and JS ARRAYS?

> ID：11247122
> 
> 赞同：0
> 
> 时间：2012-06-28T14:42:19.943
> 
> 标签：javascript, jquery, xml, parsing, jquery-selectors

I was trying to figure out if it was possible to pass in a js array as the selector and then program with it.

Similarly, I wanted to know if i got the return from a function (in the format of a XML doc) and put it into the jQuery selector, would i be able to parse it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:00:04.733

我对其进行了测试，只要 JS 数组是 HTML 元素（在我的例子中是 Divs），它就可以正常工作。在引用方面略有不同。前任：

```
 $(SELECTED).closest(".draggable").css("background-color","pink"); 
```

现在会变成：

```
 $(SELECTED).each(function(){
   $(this).closest("draggable").css("background-color","pink");
 }); 
```

# jquery - jquery hover positioning working wierd

> ID：11247123
> 
> 赞同：0
> 
> 时间：2012-06-28T14:42:22.083
> 
> 标签：jquery, jquery-ui

I have 2 divs A & B. div A has a position absolute to the relative wrapper parent of both divs. div A is positioned above div B from getting the position of div B - offset 0 -50.

now the hover is working well in the first hover(div A left: 561px) but in the second hover it goes left: 1022px. and the third time it's still 1022px. even if on the hover off function I reset the left to 0.

```
$(".longlist").hover(function () {
    $(this).next("div.hoverwrapper").position({
        "my": "center top",
        "at": "center top",
        "offset": "0 -50",
        "of": $(this)
    });
    $(this).next("div.hoverwrapper").css('z-index', '100');
    $(this).next("div.hoverwrapper").animate({
        opacity: "show",
        top: "-75"
    }, "slow");
}, function () {
    $(this).next("div.hoverwrapper").css('z-index', '-1');
    $(this).next("div.hoverwrapper").animate({
        opacity: "hide",
        top: "-10"
    }, "fast");
    $(this).next("div.hoverwrapper").css({
        "top": "0",
        "left": "0"
    });
}); 
```

I don't understand why is it happening...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:49:35.717

```
$(".longlist").hover(function () {
    $(this).next("div.hoverwrapper").position({
        "my": "center top",
        "at": "center top",
        "offset": "0 -50px",
        "of": $(this)
    });
    $(this).next("div.hoverwrapper").css('z-index', '100');
    $(this).next("div.hoverwrapper").animate({
        opacity: 1,
        top: -75
    }, "slow");
}, function () {
    $(this).next("div.hoverwrapper").css('z-index', '-1');
    $(this).next("div.hoverwrapper").animate({
        opacity: 0,
        top: -10
    }, "fast");
    $(this).next("div.hoverwrapper").css({
        "top": 0,
        "left": 0
    });
}); 
```

你不必改变不透明度的东西，但如果你把位置作为字符串，它们必须有“px”（0除外），所以顶部：“-75”不是有效数量，它必须是“-75px”或只是数字-75。

# apache - Does restating apache affects running cron jobs in the server?

> ID：11247125
> 
> 赞同：0
> 
> 时间：2012-06-28T14:42:29.020
> 
> 标签：apache, cron

I am using linux server. I have cron jobs running every 4 hours. For some reason I will restart my apache service. My question is, while restarting the apache service, will this affects currently running cron tasks? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:20:18.750

不，Apache 和 cron 根本不相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:27:31.123

如果出于某种原因，它们正在向 Web 服务器发出 HTTP 请求，并且仅针对该作业的一次运行，则 Apache 的重新启动只会影响 cron 作业。（未来的运行是新进程，不会受到影响，除非失败的作业写得特别糟糕，并且以某种方式使其使用的资源无法使用。）

即使这样，如果 Apache 重新启动`graceful`，它也会尝试透明地切换并等待子进程的现有请求完成，然后再将其关闭并替换它。理想情况下，在这种情况下，甚至都不会注意到它已停止或重新启动。

# asp.net - How to host a Rest WCF in Azure?

> ID：11247126
> 
> 赞同：0
> 
> 时间：2012-06-28T14:42:32.753
> 
> 标签：asp.net, wcf, rest

I am trying to host my rest based WCF service in the azure using a web role, I am using the following code snippet to create the host but getting the message FORBIDDEN 403: ACCESS IS DENIED. I am not able to figure out what is going wrong.

Is there possibility of any other issue which I may not be figuring out?

```
private void CreateServiceHost()
            {
                RoleInstanceEndpoint externalEndPoint = RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["LeEndpoint"];
                var baseaddress = String.Format("http://{0}:{1}",externalEndPoint.IPEndpoint.Address,externalEndPoint.IPEndpoint.Port);
                var host = new ServiceHost(typeof(Service1), new Uri(baseaddress));
                var binding = new WebHttpBinding();
                host.AddServiceEndpoint(typeof(IService1),binding,baseaddress);
                host.Open();
            } 
```

# c# - Inheritance mapping by overriding property

> ID：11247127
> 
> 赞同：3
> 
> 时间：2012-06-28T14:42:33.610
> 
> 标签：c#, .net, entity-framework, entity-framework-4, ef-code-first

I have following code.

```
public class Person
{
    public string LastName { get; set; }
}

public class Employee : Person
{        
} 
```

With configuration

```
Map(p => p.MapInheritedProperties());
Property(p => p.LastName).HasMaxLength(100).IsRequired(); 
```

And want to change it to

```
public class Person
{
        public virtual string LastName {get; set;}
}

public class Employee : Person
{
    public override string LastName
    {
       get { return base.LastName; }
       set 
       {
             //add validation here or throw exception
             base.LastName = value;
       }
    }
} 
```

If I run the application it says that the model has been changed. Fine, I add a DB Migration, but it errors:

> The property 'LastName' is not a declared property on type 'Employee'.
> 
> Verify that the property has not been explicitly excluded from the model by using the
> 
> Ignore method or NotMappedAttribute data annotation. Make sure that it is a valid primitive property.

What kind of mapping do I need to add for this to work? I use EF 4.3 with Migrations.

Thanks for any hints.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:36:42.010

您可以解决此问题：

```
public class Person
{
    protected virtual void ValidateLastName() { }

    public string LastName
    {
       get { return lastName; }
       set 
       {
             ValidateLastName();
             lastName = value;
       }
    }
}

public class Employee : Person
{
    protected override void ValidateLastName()
    {
        // your validation logic here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:32:43.353

这似乎是 EF 的一个限制，属性可以在基类或子类上，但不能同时在两者上。请参阅[如何在按层次结构 (TPH) 映射的表中共享通用列名](https://stackoverflow.com/questions/4389227/entity-framework-4-ctp5-code-first-how-to-share-common-column-names-in-a-hierar)

# .net - 使用 SSL 设置 .Net IBM.XMS 客户端

> ID：11247129
> 
> 赞同：2
> 
> 时间：2012-06-28T14:42:47.533
> 
> 标签：.net, encryption, ibm-mq, keystore

我必须创建一个客户端来收听队列上的消息。正在使用 SSL，我正在点网中开发。我翻阅了数百页的文档和论坛，以找到清晰简洁的内容，但看起来并非如此！

我有一个 jks，我可以远程登录到发布队列的服务器。以下是我到目前为止的代码...

```
var factoryfactory = XMSFactoryFactory.GetInstance(XMSC.CT_WMQ);
var connectionfactory = factoryfactory.CreateConnectionFactory();
connectionfactory.SetIntProperty(XMSC.WMQ_CONNECTION_MODE,XMSC.WMQ_CM_CLIENT_UNMANAGED);

connectionfactory.SetStringProperty(XMSC.WMQ_SSL_KEY_REPOSITORY, @"C:\...\spindev1.key");
connectionfactory.SetStringProperty(XMSC.WMQ_SSL_CIPHER_SPEC, "SHA_WITH_RSA");
connectionfactory.SetStringProperty(XMSC.WMQ_CHANNEL, "SPINDEV1");

var connection = connectionfactory.CreateConnection(); 
```

我认为某处必须有密码，但我不知道怎么做。我当前的错误是 2538。

**编辑**

所以我刚刚添加了 IP 和端口，现在我收到错误代码 2393。

```
connectionfactory.SetStringProperty(XMSC.WMQ_HOST_NAME, "**.***.***.***");
connectionfactory.SetIntProperty(XMSC.WMQ_PORT, 1431); 
```

**编辑 2**

好的，现在我已经设法开始使用提供队列数据的人提供的代码，但是他说为了使用 SSL 密钥，应用程序必须作为 spindev1 运行 - 这当然意味着创建一个全新的帐户?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T06:40:24.557

对于 XMS .NET，密钥库必须是 CMS 类型，而不是 JKS。JKS 用于 Java 客户端。CMS 密钥库将具有“.kdb”作为文件扩展名。因此，为`XMSC.WMQ_SSL_KEY_REPOSITORY`.

`SHA_WITH_RSA`在您使用的 CipherSpec 上，我在 MQ 中找不到。您能否验证名称是否正确，或者您可以尝试使用不同的密码。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:20:12.560

好的问题现在已经解决了。下面是创建和启动连接的代码摘录。主要问题之一是 SSL 密钥是为名为 dev1 的用户制作的，而我的用户是 mcanty。如果我知道更多，我相信这个结果会更快到来。

```
 public SISMQConnection(string connectionFactoryName, string queueName, string sslPeerName,
        string bindingsFilePath, string sslKeyRepository)
    {
        try
        {
            Hashtable aHashtable = new Hashtable { { "XMSC_IC_URL", bindingsFilePath } };
            InitialContext jndi = new InitialContext(aHashtable);

            //Java Naming and Directory Interface (JNDI)
            _queueObject = (IDestination)jndi.Lookup(queueName);
            _queueManager = (IConnectionFactory)jndi.Lookup(connectionFactoryName);

            _queueManager.SetStringProperty(XMSC.WMQ_SSL_PEER_NAME, string.Format("CN=\"{0}\"", sslPeerName));
            _queueManager.SetIntProperty(XMSC.WMQ_CONNECTION_MODE, XMSC.WMQ_CM_CLIENT_UNMANAGED);
            _queueManager.SetStringProperty(XMSC.WMQ_SSL_KEY_REPOSITORY, sslKeyRepository);
            _queueManager.SetStringProperty(XMSC.WMQ_SSL_CIPHER_SPEC, "DES_SHA_EXPORT");
        }
        catch (Exception e)
        {
        }
    }

    public void Connect()
    {
        try
        {
            IConnection QueueConnection = _queueManager.CreateConnection();

            QueueSession = QueueConnection.CreateSession(true, AcknowledgeMode.AutoAcknowledge);

            IMessageConsumer QueueConsumer = QueueSession.CreateConsumer(_queueObject);

            QueueConsumer.MessageListener = OnNewMessageCallback;

            QueueConnection.Start();
        }
        catch (Exception e)
        {
        }
    } 
```

# mysql - 加入查询需要更多时间

> ID：11247131
> 
> 赞同：0
> 
> 时间：2012-06-28T14:42:49.420
> 
> 标签：mysql, join

我的查询需要更多时间来提供输出，我可以创建可以轻松输出的查询吗？

```
SELECT DISTINCT(property.Project_Name), property.Property_Type, ROUND(AVG(property.Unit_Price_psf)), property.Transacted_Price
FROM property
JOIN avg_property
WHERE avg_property.Project_Name=property.Project_Name
AND avg_property.Median_Price BETWEEN '$mdpr1' AND '$mdpr2'
GROUP BY property.Project_Name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:57:50.723

重写distinct的替代方案

```
SELECT
  property.Project_Name,
  property.Property_Type,
  ROUND(AVG(property.Unit_Price_psf)),
  property.Transacted_Price
FROM property
  JOIN avg_property
WHERE exists(select
           Project_Name
         from property
         group by Project_Name)
    and avg_property.Project_Name = property.Project_Name
    AND avg_property.Median_Price BETWEEN '$mdpr1'
    AND '$mdpr2'
GROUP BY property.Project_Name 
```

# android - 在Android中为不同的语言使用不同的字体

> ID：11247133
> 
> 赞同：3
> 
> 时间：2012-06-28T14:42:54.550
> 
> 标签：android, android-layout, fonts, android-fonts

我为 EditText 字段使用自定义字体，但我使用的字体只有英文字符。当我输入其他语言时，应用程序会使用该语言的默认 Android 字体。

是否可以有一种字体用于英语输入，另一种字体用于另一种语言？

要设置 EditText 字体，我这样做：

```
mFont1 = Typeface.createFromAsset(context.getAssets(), "eraslght.ttf");
textView.setTypeface(mFont1 ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-26T12:58:30.333

如果您使用如下所示的 strings.xml 会怎样：

```
mFont1 = Typeface.createFromAsset(context.getAssets(), getString(R.strings.button_font));
textView.setTypeface(mFont1 ); 
```

在 strings.xml 中只需将相关路径作为字符串...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T22:23:06.350

您可以检查系统中当前设置的语言并为它们设置不同的字体。

```
mFont1 = Typeface.createFromAsset(context.getAssets(), "eraslght.ttf");
if (Locale.getDefault().getDisplayLanguage() == "en") {
    textView.setTypeface(mFont1);
} else {
    textView.setTypeface(mFont2);
} 
```

# css - CSS中伪类、伪选择器、伪元素的区别

> ID：11247134
> 
> 赞同：4
> 
> 时间：2012-06-28T14:42:55.577
> 
> 标签：css, css-selectors, pseudo-element, pseudo-class

> **可能重复：**
> [CSS 中的伪类和伪元素有什么区别？](https://stackoverflow.com/questions/8069973/what-is-the-difference-between-a-pseudo-class-and-a-pseudo-element-in-css)

CSS中的以下内容是什么意思？

1.  伪类
2.  伪选择器
3.  伪元素

各有什么用处？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-28T14:46:42.460

[伪类](http://www.w3.org/TR/selectors/#pseudo-classes)用于根据您无法使用属性、ID 或类（或通过 DOM 获得的任何其他信息）表达的信息来选择元素。例如，`:root`、`:first-child`、和。`:last-child``:lang()``:not()`

[伪元素](http://www.w3.org/TR/selectors/#pseudo-elements)是模拟元素，您可以选择性地应用样式作为其他实际元素的一部分，但它们本身不是 DOM 的成员。例如，内容片段，如`::first-line`and `::first-letter`，或生成的内容，如`::before`and `::after`。

“伪选择器”是一个概括性术语，用于涵盖两种选择器（或实际上任何以至少一个开头的选择器`:`），但它本身没有意义，因为在选择器中，伪类和伪元素是两个根本不同的事物。

# java - 无法以编程方式正确关闭 Derby

> ID：11247135
> 
> 赞同：0
> 
> 时间：2012-06-28T14:43:02.633
> 
> 标签：java, maven, maven-plugin, derby

我编写了一个 OSS 插件来在 Maven 构建过程中启动/停止 Derby。该插件在普通的旧单个模块中工作正常。但是，如果我有几个模块的聚合器并且其中多个模块具有与数据库相关的测试，我似乎遇到了一些奇怪的问题。

我正在调用插件的`start`和`stop`目标（分别在`process-resources`和`test`阶段），如下所示：

```
 <plugin>
            <groupId>org.carlspring.maven</groupId>
            <artifactId>derby-maven-plugin</artifactId>
            <version>1.4</version>

            <configuration>
                <failIfAlreadyRunning>false</failIfAlreadyRunning>
            </configuration>

            <executions>
                <execution>
                    <id>start-derby</id>
                    <phase>process-resources</phase>
                    <goals>
                        <goal>start</goal>
                    </goals>
                </execution>
                <execution>
                    <id>stop-derby</id>
                    <phase>test</phase>
                    <goals>
                        <goal>stop</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

问题在于，在第二次尝试启动 Derby（内存中）服务器时，Derby 似乎仍在运行，或者已经从第一个模块加载了数据库内容。我可以这么说是因为聚合器中的第一个模块在表中创建并填充了一些数据。我的期望是，一旦我关闭 Derby 并从另一个模块重新启动它，它将是一个没有任何现有内容的新数据库。

这是我在插件中处理关闭 Derby 的代码：

```
try
{
    try
    {
        server.ping();
    }
    catch (Exception e)
    {
        if (failIfNotRunning)
        {
            throw new MojoExecutionException("Failed to stop the Derby server, no server running!", e);
        }

        getLog().error("Derby server was already stopped.");
        return;
    }

    server.shutdown();

    while (true)
    {
        Thread.sleep(1000);
        try
        {
            server.ping();
        }
        catch (Exception e)
        {
            getLog().info("Derby has stopped!");
            return;
        }
    }
}
catch (Exception e)
{
    throw new MojoExecutionException(e.getMessage(), e);
} 
```

这个相当简单的插件的完整源代码可以在 GitHub 上查看或[查看](https://github.com/carlspring/derby-maven-plugin)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:52:57.687

我最终做了以下事情：

```
try
{
    try
    {
        server.ping();
    }
    catch (Exception e)
    {
        if (failIfNotRunning)
        {
            throw new MojoExecutionException("Failed to stop the Derby server, no server running!", e);
        }

        getLog().error("Derby server was already stopped.");
        return;
    }

    try
    {
        DriverManager.getConnection(getConnectionURL());
        DriverManager.getConnection("jdbc:derby:;shutdown=true");
    }
    catch (SQLException e)
    {
        // Apparently this prints out a bunch of stuff we're not currently interested in,
        // we just want it to shutdown properly.
        // Perhaps further handling might be required at a future point in time.
    }

    server.shutdown();

    while (true)
    {
        Thread.sleep(1000);
        try
        {
            server.ping();
        }
        catch (Exception e)
        {
            getLog().info("Derby has stopped!");
            break;
        }
    }

    System.getProperties().remove("derby.system.home");
}
catch (Exception e)
{
    throw new MojoExecutionException(e.getMessage(), e);
} 
```

这不是我期望的必须完成的方式。

# python - 将 .dat 文件转换为数组

> ID：11247137
> 
> 赞同：2
> 
> 时间：2012-06-28T14:43:08.270
> 
> 标签：python

我有一个从 MATLAB 生成的 .dat 文件（带有浮点值）。我需要将它转换为包含与 .dat 文件中相同数量的行和列的数组。任何人都可以提出这样做​​的方法吗？`\n`我要删除的每一行末尾都有一个。读入 Python 的 .dat 文件如下所示：

> 12,18\n42,17\n60,16\n86,17\n120,17\n137,12\n169,10\n189,14\n215,9\n248,11\n273,12\n301,17\n319, 8\n345,17\n378,14\n403,10\n423,10\n453,18\n483,10\n507,15\n10,43\n43,44\n60,38\n96,41\n114,41\ n139,41\n168,43\n189,40\n215,37\n248,45\n268,45\n301,37\n321,35\n

我希望输出采用以下格式：

```
12,18
42,17
... 
```

where`12,42`和`18,17`are 在不同的列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:46:51.487

你说的数组是什么意思？

```
with open('datafile','r') as f:
    rows=[map(float,L.strip().split(',')) for L in f]  # list of lists

arr=np.array(rows)  #Numpy array (assuming you `import numpy as np`) 
```

或使用[numpy.loadtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)：

```
arr=np.loadtxt('datafilename',delimiter=',') 
```

# sql-server - Union Select 嵌套查询

> ID：11247147
> 
> 赞同：0
> 
> 时间：2012-06-28T14:43:42.087
> 
> 标签：sql-server, sql-server-2008

我正在编写一个查询，该查询需要返回任何给定父 ID 下的所有子条目（及其子条目等）。

例如：

```
SELECT id
FROM table
WHERE parent_id IN

    (SELECT id
    FROM table
    WHERE parent_id IN

        (SELECT id
        FROM table
        WHERE parent_id IN

            (SELECT id
            FROM table
            WHERE code = 'A01')
        )
    ) 
```

正如预期的那样，这只会返回最顶层`SELECT`查询的结果集。我可以`UNION SELECT`为每个孩子级别写一个，但这似乎有点笨拙......

有没有办法将每个嵌套查询中的每个单独的结果集添加到我的主要结果集中？还是我应该选择笨拙的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:48:57.323

您的问题最好通过递归查询来解决。在 SQL Server 2005 或更高版本中执行递归查询的好方法是使用[公用表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)

```
;with cte as (
    SELECT id, parent_id
    FROM [table]
    WHERE code = 'A01'

    UNION ALL

    SELECT t.id, t.parent_id
    FROM [table] t
        INNER JOIN cte 
            ON cte.id = t.parent_id
)
SELECT id 
FROM cte
OPTION (MAXRECURSION 0); 
```

在旁注......我不确定我是否喜欢表名的想法`table`。

# ruby-on-rails-3 - 为什么生产轨道忽略捆绑器安装的宝石？

> ID：11247150
> 
> 赞同：1
> 
> 时间：2012-06-28T14:43:47.313
> 
> 标签：ruby-on-rails-3, apache2, passenger

我正在使用 capistrano 将 Rails 应用程序部署到生产环境。一切似乎都正常，capistrano 没有报告任何错误，但是应用程序无法启动并出现以下错误消息

```
Ruby (Rack) 应用程序无法启动
在任何源中都找不到 activemodel-3.2.0 (Bundler::GemNotFound)

```

检查捆绑的 gem 时，正确版本的 gem 位于共享文件夹中，但乘客似乎没有使用它们。cap deploy 的总结输出如下

```
 * executing "cd /opt/geonovo/retail/releases/20120628125205 && \
    bundle install --gemfile /opt/geonovo/retail/releases/20120628125205/Gemfile \
    --path /opt/geonovo/retail/shared/bundle --deployment \
    --without development test"
    servers: ["rt-devrails01"]
    [rt-devrails01] executing command
 ** [out :: rt-devrails01] Fetching source index for http://rubygems.org/
 ** [out :: rt-devrails01] Using activesupport (3.2.0)
 ** [out :: rt-devrails01] 
 ** [out :: rt-devrails01] Using builder (3.0.0)
 ** [out :: rt-devrails01] 
 ** [out :: rt-devrails01] Installing activemodel (3.2.0)
 ...
 ...
 * [out :: rt-devrails01] 
 ** [out :: rt-devrails01] Your bundle is complete! 
 It was installed into /opt/geonovo/retail/shared/bundle
 command finished in 47529ms 
```

在生产服务器上运行`gem list`不会显示 activemodel 3.2.0 gem 存在，但共享目录 /opt/geonovo/retail/shared/bundle/ruby/1.9.1/gems/ 确实包含 activemodel-3.2.0 的条目。

生产服务器 /bundle/config 文件包含以下内容

```
---
BUNDLE_FROZEN：“1”
BUNDLE_PATH：/opt/geonovo/retail/shared/bundle
BUNDLE_DISABLE_SHARED_GEMS：“1”
BUNDLE_WITHOUT：开发：测试

```

在生产服务器上运行`bundle check`显示如下

```
缺少以下宝石
 *活动模型（3.2.0）
 *动作包（3.2.0）
 * actionmailer (3.2.0)
 *活动记录（3.2.0）
 *活动资源（3.2.0）
 *铁路（3.2.0）
 * 导轨 (3.2.0)
使用 `bundle install` 安装缺失的 gem

```

我可能可以使用安装 gem，`bundle install`但如果可能的话，我希望在 capistrano 内进行部署。

Gemfile 的开头包括以下几行

```
来源“http://rubygems.org”

宝石'导轨'，'> = 3.2.0'

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:28:03.630

似乎问题在于我的 gem 版本已过时。Bundler 工作正常，但由于加载 gem 的问题，应用程序无法启动。

当检查`/var/log/httpd/error_log`发现许多错误时，问题变得很明显，如下所示：-

```
WARNING:  #<ArgumentError: Illformed requirement 
  ["<Syck::DefaultKey:0x00000016a73648> 3.2.0"]>
WARNING:  Invalid .gemspec format in '...bundle/ruby/1.9.1/specifications/rails-3.2.0.gemspec' 
```

这使我想到了以下[问题](https://stackoverflow.com/questions/8998213/i-cant-do-anything-at-all-in-rails-because-of-a-gemspec-error-but-i-have-no-c)以及将 gem 更新到当前版本的解决方案，使用`sudo gem update --system`然后重新启动 apache。（重新启动乘客似乎还不够。

# eclipse - Eclipse OSGI 运行配置中的 dev 模式

> ID：11247152
> 
> 赞同：0
> 
> 时间：2012-06-28T14:43:51.670
> 
> 标签：eclipse, osgi

我在一个小型 OSGI 项目中遇到了一些问题。在其中一个包中，我以编程方式安装并启动了另一个以前未安装的包。

尽管如此，当我在 Eclipse 中运行项目时，`ClassNotFoundException`会在执行包中跳转。

我相信这是因为 Eclipse 会使用指向 dev.properties 文件的 -dev 参数（开发模式）自动启动项目，在该文件中它指定了构建每个包的 bin 文件夹。显然这个由 Eclipse 创建的 dev.properties 文件不包括我稍后要安装的包。

该项目在 Eclipse 之外运行良好，并且 jar 是正确的，但是当我在 Eclipse 中运行它时，ClassNotFoundException 会跳转。发生这种情况是因为当我在开发模式下启动 eclipse 时，会创建一个 dev.properties 文件来增强框架的类路径。但是，当我想安装新包时，当新事件发生时 dev.properties 不会更新，而且 Eclipse 也不允许我使用自定义的 dev.properties 文件，因此框架无法从该新包中加载类.

有什么方法可以使用自定义的 dev.properties 或更改任何可以使其在 eclipse 中工作的东西？

这是代码的一个小示例：

```
 public void charge(String location){
    try {
        System.out.println("Entró");
        bundle2= bundleContext.installBundle(location);
        System.out.println("Instalado");

        bundle2.start();
        System.out.println("Activado");

    } catch (BundleException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:22:55.397

当您使用 PDE 从 Eclipse 中启动 Equinox 框架实例时，“开发”模式用于增强框架的类路径，以从插件项目中的“bin”文件夹加载类和资源。

如果某些东西在 Eclipse 中运行时有效，但在导出/构建和外部运行时不起作用，则可能是 build.properties 文件中缺少某些内容（如果使用了任何 PDE 导出功能）或缺少某些包导入在 MANIFEST.MF 中。

您能否提供有关设置以及如何生成在 Eclipse 之外运行的位的更多详细信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:33:18.567

我不认为 dev.properties 应该这样使用，但无论如何，OSGi 是动态的，如果你安装一个包，它应该可以工作，无论 -dev 模式如何。

可能是您安装的 jar 或文件夹不正确？我建议你从 eclipse 中导出你正在安装的包（从项目 -> 导出 -> 可部署插件）。

如果你的 build.properties 是正确的，你应该得到一个正确的 jar。尝试安装那个 jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:15:00.977

如果您使用的是调试配置-> OSGi 框架。确保选中这些选项：

*   `Include optional dependencies when computing required bundles` 和
*   `Add new workspace bundles to this launch configuration automatically`.

这样，每次您在工作区中添加或创建新插件时，它都会被添加到执行中。

# makefile - make：替换隐式规则中的先决条件名称

> ID：11247159
> 
> 赞同：1
> 
> 时间：2012-06-28T14:44:12.120
> 
> 标签：makefile

我在makefile中有以下隐式规则：

```
a1 b1: %: %.o 
```

在调用时，这将查找先决条件`a1.o`和`b1.o`. 相反，我想用`a.o`and替换这些先决条件`b.o`。我玩过一点，`subst`但`$(shell)`没有运气。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:50:51.950

对于有限的情况：

```
a1 b1: %1: %.o 
```

或者：

```
a1 : a.o
b1 : b.o
a1 b1:
    <the recipe> 
```

# sql - 获取两个 Web 数据库表的完整内容

> ID：11247160
> 
> 赞同：0
> 
> 时间：2012-06-28T14:44:17.603
> 
> 标签：sql, database, cordova

我需要在 phonegap 数据库中获取包含两个表的列的完整内容我现在尝试这样：

```
db.transaction(function(tx){
               tx.executeSql('SELECT Table1.iTicketName, Table2.iTicketName FROM Table1, Table2', [],function (tx, results){
                 console.log("Callback from Database");
                 var len = results.rows.length;
                 for (var i=0;i<len;i++){
                         var ticketname = results.rows.item(i);
                             console.log(ticketname);

                    }  

                 },
                 errorCB, 
                 successCB
              )
   }) 
```

但我只得到Table1的内容。我不知道如何发送正确的查询，我现在搜索了很多。我发现的只是联接，但我需要获取表格的完整内容。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:47:03.407

```
SELECT iTicketName FROM Table1
union
SELECT iTicketName FROM Table2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:47:12.910

您需要一个 UNION 查询：

```
SELECT Table1.iTicketName FROM Table1
UNION ALL 
SELECT Table2.iTicketName FROM Table2 
```

如果您不想抑制重复，则“ALL”部分就在那里

# javascript - 使用 ajax/setInterval 伪造推送通知？

> ID：11247161
> 
> 赞同：1
> 
> 时间：2012-06-28T14:44:20.850
> 
> 标签：javascript, apache, push-notification, comet, long-polling

`<div>`我想知道处理服务器端与客户端自动更新的利弊。我正在将 Apache 与 PHP 一起使用，但只是想在 Javascript 中伪造推送通知，如下所示：

```
setInterval(queryDatabaseForUnreadMessages, 60000);

function queryDatabaseForUnreadMessages(){
   $.ajax({
       url: "/messages/queryDatabaseForUnreadMessages",
       success:function(data){
          $('div#littleRedCircle').html(data);
       }
   });
} 
```

我只想设置一个通知，就像 Stackoverflow 所做的那样（带有数字的红色小圆圈），让人们知道他们收到了一条新消息（如果存在）。那个简单的 AJAX/setInterval 组合是个坏主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:02:32.470

服务器推送的唯一缺点是实施成本（时间、金钱）

服务器推送是要走的路，因为

1.  从用户的角度来看，实时通知更好
2.  它具有可预测的成本（因此具有可扩展性）
3.  减少带宽消耗
4.  节省服务器负载

这取决于您选择哪一个的具体要求，因为服务器端推送的实现成本并非微不足道，因为它实际上不是单个 PHP 脚本的问题，而是需要深度服务器集成（也许您必须安装另一个HTTP 服务器）并涉及其他通常不使用 PHP 构建的软件（消息队列？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:25:29.790

来自 IETF 文档

[长轮询与拉取对比](https://datatracker.ietf.org/doc/html/draft-loreto-http-bidirectional-07#section-2)

[长轮询有什么问题？](https://datatracker.ietf.org/doc/html/draft-loreto-http-bidirectional-07#section-2.2) 来自文档

1.  标题开销
2.  最大延迟
3.  连接建立
4.  分配的资源
5.  优雅降级
6.  超时和缓存

正如我在评论中提到的

长轮询是实时的，而拉取是接近实时的 [由轮询间隔确定]

拉取客户的带宽是理所当然的：P

正如文档中提到的，这两种技术都很好地利用了 HTTP 1.1 的持久连接。

拉取很容易实现并且跨浏览器得到很好的支持。虽然[Push](http://www.html5rocks.com/en/tutorials/websockets/basics/)缺乏这一点，但图书馆可以拯救 ;)。

# android - Android XML 首选项问题。不能让它持久

> ID：11247164
> 
> 赞同：1
> 
> 时间：2012-06-28T14:44:44.030
> 
> 标签：android, xml, persistent, preference

我有一个非常简单的活动来显示偏好片段：

```
public class PreferencesActivity extends Activity {

Fragment frag = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    if (frag == null) {
        // If not, instantiate and add it to the activity
        frag = new PrefsFragment();
        ft.add(android.R.id.content, frag, frag.getClass().getName());
    } else {
        // If it exists, simply attach it in order to show it
        ft.attach(frag);
    }
    ft.commit();
}

private static class PrefsFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
    }

}
} 
```

和具有持久性的preferences.xml为真：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
    android:enabled="true"
    android:persistent="true"
    android:title="@string/settings" >
    <EditTextPreference
        android:dialogTitle="@string/dialog_ip"
        android:negativeButtonText="@android:string/cancel"
        android:persistent="true"
        android:positiveButtonText="@android:string/ok"
        android:title="@string/ip" />
</PreferenceScreen> 
```

如果我打开 EditTextPreference，写一些东西，关闭对话框并再次打开它。价值还在。但就是这样......如果我单击“后退”按钮，然后在首选项屏幕上再次输入，我已经丢失了所写的内容。如果您退出应用程序也不会保存。

我在这里错过了什么吗？

运行于：Android 4.0.3 华硕 TF300

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T15:13:51.333

你的`EditTextPreference`没有`key`价值。例如：

```
 <EditTextPreference
            android:key="edittext_preference"
            android:title="@string/title_edittext_preference"
            android:summary="@string/summary_edittext_preference"
            android:dialogTitle="@string/dialog_title_edittext_preference" /> 
```

# django - 我可以向 get_context_data() 添加两个以上的参数吗？

> ID：11247167
> 
> 赞同：3
> 
> 时间：2012-06-28T14:44:45.493
> 
> 标签：django, get, request, typeerror, django-context

我收到这个错误

```
TypeError at /debate/1/
get_context_data() takes exactly 2 arguments (1 given) 
```

现在它被定义为：

```
 def get_context_data(self, **kwargs): 
```

我希望它是：

```
 def get_context_data(self, request, **kwargs): 
```

所以我可以在里面做：

```
sort_by = request.GET.get('sort', '-rating_score') 
```

这是一个好主意，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T14:51:10.913

请求对象可用作基于类的视图对象的成员，并且可以通过`self.request`. 如果由于某种原因，您确实通过了它，`**kwargs`因为`kwargs.get("request")`它是一个普通的字典。

# ios - 如何知道键盘何时隐藏？

> ID：11247176
> 
> 赞同：1
> 
> 时间：2012-06-28T14:45:02.470
> 
> 标签：ios, keyboard, uitextfield

我想知道我的键盘何时会隐藏，以滚动到我的视图顶部。

当我使用 textFieldDidEndEditing 时，当我不编辑文本字段内容但不编辑时它确实有效。

感谢您的建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:51:10.563

像这样添加一个观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardDidHideNotification object:nil]; 
```

像这样处理事件：

```
- (void)keyboardDidHide:(NSNotification *)notification {
    NSLog(@"Keyboard did hide");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:51:03.000

您应该使用`UIKeyboardWillHideNotification`来找出键盘何时会隐藏。DidHide、WillShow 和 WillHide 还有其他通知。您可以更改 UI 以响应这些通知，而不是仅从文本字段中查看更改。

Apple 有[关于如何响应键盘事件](https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW3)的文档，你也应该看看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:46:33.670

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField 
```

> 返回值
> 
> YES，如果文本字段应该实现其返回按钮的默认行为；否则，否。

为了真正隐藏键盘，您需要调用

```
[textField resignFirstResponder]; 
```

# perl - 检查目录并匹配文件

> ID：11247181
> 
> 赞同：0
> 
> 时间：2012-06-28T14:45:27.053
> 
> 标签：perl, file, directory

我想查看一个名为的文件`missing`，然后查看一个名为`flags`.

列出的每个文件都`missing`将始终出现在`flags`目录中。

我想查看`flags`目录中的每个文件，然后查看它们是否在`missing`文件中。如果其中一个不是，请从`flags`目录中删除该文件。

```
 @flags=`ls $dir`;
    $flags_size = scalar @flags;

    $file = "/home1/t01jkxj/check_st/missing";
    $filesize = -s $file;

    if ($filesize < $flags_size) {
      ##What to do??##
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:02:35.380

您没有描述文件的格式`missing`，但我猜它每行包含一个文件，并提供文件的完整绝对路径。如果我猜错了，您将需要调整此解决方案。

该程序将`missing`文件加载到哈希中。每个散列元素都以文件名作为键，值为 1。

打开目录，将`flags`路径添加到每个文件名中，形成`$filename`. 如果文件名没有出现在`%missing`散列中，则打印文件名。要实际删除文件，`unlink`应取消注释该行。

```
use strict;
use warnings;

my $missing = "/home1/t01jkxj/check_st/missing";

open my $fh, '<', $missing or die qq(Unable to open "$missing" for read: $!);
my %missing;
while (<$fh>) {
  next unless /\S/;
  chomp;
  $missing{$_} = 1;
}

my $dir = '/path/to/flags';

opendir my $dh, $dir or die qq(Unable to open directory "$dir": $!);

for my $file (readdir $dh) {
  my $filename = "$dir/$file";
  unless ($missing{$filename}) {
    # unlink $filename;
    print qq(File "$filename" deleted as not found in 'missing' file\n);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:24:06.397

检查哈希。将所有丢失的条目放入哈希中。然后遍历 flags 目录中的所有文件并检查它是否在哈希中。如果是，很好，如果不是，删除文件。

```
my %missings = map { chomp; $_ => 1 } do {
  open my $fh, '<', $missing_file or die "Can't read $missing_file: $!";
  <$fh>
};

opendir my $dh, $dir or die "Can't read from $dir: $!";
while(readdir $dh) {
    unlink $_ unless delete $missings{$_};
}

# I know, you said this can't happen.
if (keys %missings) {
    print "The following are in $missing_file but not in $dir:\n";
    print "    $_\n" for sort keys %missings;
} 
```

警告：完全未经测试。我在我的网络浏览器的框中输入了这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:41:13.617

现在不在 Linux 中，但这是你需要做的。该脚本收集文件和数组目录中的文件列表，然后找出两者的不同之处。我会测试但不能真的）-=。考虑它的伪代码！：

```
use strict;
use warnings;
my $fi;
my $line;
my @to_delete;
my $var;
my @indir;
my @files;
# the difference of @females and @simpsons
@indir = `ls`;

open($fi, "< list.txt");
while ($line = <$fi>) 
{
    chomp($line);
    push @files, $line;
}
@to_delete=grep(!defined $indir{$_}, @files); #gets difference of the two arrays

print "Delete this:\t$_\n" foreach (@to_delete); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T16:47:18.467

在我看来，您也可以使用 bash 命令来执行此操作。就像是：

```
cd /path/to/flags; ls | grep -vf missing.txt | xargs rm 
```

注意：请不要在没有测试的情况下运行上述内容。

在 perl 中，在代码中略显冗长并发出警告可能是个好主意。当然，可以删除自动化作业的警告。

```
use strict;
use warnings;

my $dir = "/path/to/flags";
chdir $dir or die $!;        # change working directory
my @flags = <*>;             # get a list of the files
my $file = "/home1/t01jkxj/check_st/missing";
open my $fh, "<", $file or die $!;
chomp(my @missing = <$fh>);  # get file names and remove newlines
my %missing = map { $_ => 1 } @missing;   # ..and put them in a hash

my @delete;
for my $file (@flags) {      # all files not in the hash go into @delete
    push @delete, $file unless $missing{$file};
}

if (@delete) {   # do not delete without confirmation
    print @delete . " files to delete\n@delete\n---\nDelete them all? ";
    my $reply = <>;
    if ($reply =~ /^y$/) {
        unlink $_ or warn "$_: $!" for @delete;
    }
} else {
    print "No missing files to delete.\n";
} 
```

# javascript - 使用javascript访问sqldatabase是否可行且可靠？

> ID：11247183
> 
> 赞同：0
> 
> 时间：2012-06-28T14:45:30.520
> 
> 标签：javascript, .net

我想获取我的数据库元素的列表。但我想知道，使用 javascript 访问 sqldatabase 是否可行且可靠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:30:31.147

使用 Ajax 调用访问服务器，进而检索数据。

这是jquery中的示例代码：

```
var requrl = "/test/test.php"; // or any server side page returning part html i.e. anything between body tags.

    $.ajax({
        type: "post",
        dataType: 'html', //change format if appropriate
        cache: false,
        url: requrl,
        success: function (data) {                    
                $('#idofdiv').html(data); //html Data returned by the server page will be populated in this div.
        },
        error: function (failure) {
                //alert(failure.responseText);
        }
    }); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:49:34.590

您应该使用 AJAX 从 JavaScript 访问您的数据库。由于您必须提供用户名和密码才能访问数据库，因此最好使用 PHP 或服务器端语言在后台执行此操作。

如果您从 JavaScript 访问它，那么每个人都将能够看到您的密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:48:20.037

最好的办法是为此使用ajax。

您无法从客户端直接访问您的数据库。但是您的客户端可以使用 ajax 联系将访问您的数据库的服务器，然后将结果返回给客户端。

这是常见的做法。

但如果您想直接在服务器上使用 javascript，请提供更多信息。

# html - 样式化时损坏的表单提交按钮

> ID：11247184
> 
> 赞同：0
> 
> 时间：2012-06-28T14:45:33.620
> 
> 标签：html, css, contact-form

我有一个非常简单的 php 联系表格。我正在尝试使表单看起来不错，并且在我设置提交按钮的样式之前一切都很顺利。

按钮代码为：

```
<input type="submit" value="Submit"> 
```

我想使用 css 来设置按钮的样式。

我想使用的代码是：

```
<input type="submit" id="comment-submit" value="Submit"> 
```

id="comment-submit" 的 CSS 是：

```
#comment-submit {
    width: 144px;
    height: 44px;
    display: block;
    border: 0;
    font-family: "YanoneBold", Arial, sans-serif;
    font-size: 18px; 
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: #fff;
    text-shadow: 0px 1px 0px rgba(0,0,0,0.35);
    padding: 0 4px 4px 0;
    margin: 30px 0 80px 0;
} 
```

没有样式，表单可以正确提交。使用样式，表单什么都不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:28:09.980

Instead of declaring it as an `ID`, declare it as a `CLASS`

so

```
.comment_submit {
    width: 144px;
    height: 44px;
    display: block;
    border: 0;
    font-family: "YanoneBold", Arial, sans-serif;
    font-size: 18px; 
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: #fff;
    text-shadow: 0px 1px 0px rgba(0,0,0,0.35);
    padding: 0 4px 4px 0;
    margin: 30px 0 80px 0;
}

<input type="submit" class="comment_submit" value="Submit"> 
```

Try this, I guess may be that id is causing problems, and make dash to underscore, and just for the purpose, use a simple font instead of using a web font, and remove text-shadow property too.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:51:27.800

如果您将其更改为 a`<button type="submit"`它可能会起作用或将 css 更改为`input[type=submit]{}`但在 IE 中可能会出现问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:54:55.670

对不起。我应该在评论中添加它，但我没有特权。

我复制/粘贴您的示例，它可以工作。我有：

```
<form action="" method="get">
    <input type="hidden" name="ble" value="uff" />
    <input type="submit" id="comment-submit" value="Submit">
</form> 
```

在 Chrome 和 Firefox 中，它发送 GET 数据。也许问题出在其他地方。不同的一件事是您的鼠标光标不会改变。

# python - 在 python 上遍历图形时获取权重总和

> ID：11247188
> 
> 赞同：3
> 
> 时间：2012-06-28T14:45:45.523
> 
> 标签：python, graph, graph-traversal

我应该如何继续这样做？这是一个家庭作业，我有一个很大的问题。现在，问题是我不能使用库。

我有一个像这样的图表：

```
{'A': {'C': 2, 'B': 10}, 'C': {'B': 7, 'D': 2}, 'B': {}, 'D': {'A': 5, 'B': 4}} 
```

使用字典，取自文件。

我正在使用[http://www.python.org/doc/essays/graphs/](http://www.python.org/doc/essays/graphs/)上的算法来查找所有路径，所以那里没有问题。

但是现在我有了从一个点到另一个点的所有路径，我需要对权重求和并得到它的全部成本。

如果你能帮助我，并指导我一些好的方法来接近它，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:10:28.763

看看`networkx`——这是一个非常好的 Python 图形库。阅读它的文档，你会发现有一个简单的解决方案——因为这是家庭作业，在你发现编码问题之前我不会发表更多评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:03:08.350

```
gr = {'A': {'C': 2, 'B': 10},
      'C': {'B': 7, 'D': 2},
      'B': {'E': 2},
      'D': {'A': 5, 'B': 4, 'E': 3}
      'E': {}}

def paths(gr, frm, to, path_len=0, visited=None):

    if frm == to:
        return [[to, path_len]]

    visited = visited or []
    result = []
    for point, length in gr[frm].iteritems():
        if point in visited:
            continue
        visited.append(point)
        for sub_path in paths(gr, point, to, path_len + length, visited[:]):
            result.append([frm] + sub_path)

    return result

>>> print paths(gr, 'A', 'E')
[['A', 'C', 'B', 'E', 11], ['A', 'C', 'D', 'E', 7], ['A', 'B', 'E', 12]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:52:47.137

好吧，你已经完成了寻找路径的艰难部分。现在只需通过路径并将这些权重相加。我会使用一个循环。

```
int sum=0;
for(int i=0;i<path.size()-1;i++)
    sum+= node.at(i).getWeightFor(node.at(i+1)) 
```

where`getWeightFor(node)`将返回从该节点到另一个节点的成本。因此，如果您这样做`A.getWeightFor(C)`，它将返回 2。可能有更好的方法可以做到这一点，但这是我的快速回答。您必须创建 getWeightFor 函数，但这应该很简单。就像我说的，困难的部分已经完成。最后一点不要想太多。

# search - searchString、searchField 和 searchOper 从 ASP.NET 应用程序中的 jqGrid 返回为空

> ID：11247191
> 
> 赞同：1
> 
> 时间：2012-06-28T14:46:10.797
> 
> 标签：search, jqgrid, jqgrid-asp.net

我正在创建一个 asp.net mvc 应用程序并将数据加载到 jqgrid 中，并且分页和排序工作完全正常。我正在尝试实现搜索并已实现代码来显示搜索窗口；但是当我单击 Find 按钮时，我无法检索 searchString、searchField 和 searchOper，因为它们返回为空。我确信我需要在 javascript 中实现 postdata 代码，但在实现时遇到了麻烦。谁能指出我正确的方向？

另外，关于如何在控制器操作中实现搜索的任何想法？

这是我目前在 javascript 中的内容：

```
 <script type="text/javascript">
    $(function () {
          $("#list").jqGrid({
              url: '/Home/GetData/',
                    datatype: 'json',
                    mtype: 'GET',
                    colNames: ['ID', 'NAME'],
                    colModel: [
      { name: 'ID', index: 'ID', width: 250, align: 'center', searchoptions: { sopt: ['eq', 'ne', 'cn']} },
      { name: 'NAME', index: 'NAME', width: 250, align: 'center',  searchoptions: { sopt: ['eq', 'ne', 'cn']} }],
                    pager: jQuery('#pager'),
                    rowNum: 10,
                    rowList: [5, 10, 20, 30, 40, 50],
                    sortname: 'ID',
                    sortorder: "desc",
                    viewrecords: true,
                    height: '100%'
                    });

                $("#list").jqGrid('navGrid', '#pager', { edit: true, add: true, del: true, search: true},
                                                        {},
                                                        {},
                                                        {},
                                                        {closeOnEscape: true, multipleSearch: true, closeAfterSearch: true},
                                                        {});

            }); 
</script> 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:00:57.440

您使用`multipleSearch: true`搜索选项。它允许创建更强大的查询，但它使用*另一种*格式的参数。代替三个参数`searchString`，将使用一个参数`searchField`，以 JSON 字符串的形式表示有关过滤器的完整信息。有关更多信息，请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#options)。`searchOper``filters`

例如，在[答案](https://stackoverflow.com/a/5501644/315935)中，您将找到演示如何解析`filters`参数并在使用实体框架访问数据库的情况下创建相应的数据过滤的代码。

# excel - MS Excel，从单元格中选择数据

> ID：11247192
> 
> 赞同：0
> 
> 时间：2012-06-28T14:46:13.313
> 
> 标签：excel

我有一个 Microsoft excel 数据库，其中包含这些患者应该回来接受检查的患者日期，我需要设计一个预约应用程序，以帮助我知道哪些患者将在特定时期内接受检查，例如从 25/06/2012 到2012 年 6 月 29 日。我想使用 VBA 在 Excel 中设计此应用程序，但不知道可以帮助我在数据库中选择这些日期以便生成报告的代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T01:36:43.223

大量阅读我建议的问题中肯定不明确的内容（a）可能使用 =WEEKNUM 按周而不是在日期范围内对评论进行分组，并且（b）应用数据透视表不仅根据需要显示数据对于提到的报告，还要充分利用数据库中的其他信息，例如显示不仅安排在一周而且已经安排在未来所有星期的患者数量。

# python - Django：自定义模型字段未在表单中显示正确的值

> ID：11247194
> 
> 赞同：0
> 
> 时间：2012-06-28T14:46:18.067
> 
> 标签：python, django, django-forms, django-models

我需要将任意数据存储在多种数据类型的关系数据库中，所以我想出了一个解决方案，除了存储数据本身之外，还存储数据的数据类型（str、int 等）。这允许在检索时将存储在数据库中的字符串转换为数据的任何适当数据类型。为了存储数据类型，我创建了一个自定义模型字段：

```
class DataType(object):
    SUPPORTED_TYPES = {
        u'unicode': unicode,
        u'str': str,
        u'bool': bool,
        u'int': int,
        u'float': float
    }
    INVERSE_SUPPORTED_TYPES = dict(zip(SUPPORTED_TYPES.values(), SUPPORTED_TYPES.keys()))
    TYPE_CHOICES = dict(zip(SUPPORTED_TYPES.keys(), SUPPORTED_TYPES.keys()))

    def __init__(self, datatype=None):
        if not datatype:
            datatype = unicode

        t_datatype = type(datatype)

        if t_datatype in [str, unicode]:
            self.datatype = self.SUPPORTED_TYPES[datatype]

        elif t_datatype is type and datatype in self.INVERSE_SUPPORTED_TYPES.keys():
            self.datatype = datatype

        elif t_datatype is DataType:
            self.datatype = datatype.datatype

        else:
            raise TypeError('Unsupported %s' % str(t_datatype))

    def __unicode__(self):
        return self.INVERSE_SUPPORTED_TYPES[self.datatype]

    def __str__(self):
        return str(self.__unicode__())

    def __len__(self):
        return len(self.__unicode__())

    def __call__(self, *args, **kwargs):
        return self.datatype(*args, **kwargs)

class DataTypeField(models.CharField):
    __metaclass__ = models.SubfieldBase
    description = 'Field for storing python data-types in db with capability to get python the data-type back'

    def __init__(self, **kwargs):
        defaults = {}
        overwrites = {
            'max_length': 8
        }
        defaults.update(kwargs)
        defaults.update(overwrites)
        super(DataTypeField, self).__init__(**overwrites)

    def to_python(self, value):
        return DataType(value)

    def get_prep_value(self, value):
        return unicode(DataType(value))

    def value_to_string(self, obj):
        val = self._get_val_from_obj(obj)
        return self.get_prep_value(val) 
```

所以这让我可以做这样的事情：

```
class FooModel(models.Model):
    data = models.TextField()
    data_type = DataTypeField()

>>> foo = FooModel.objects.create(data='17.94', data_type=float)
>>> foo.data_type(foo.data)
17.94
>>> type(foo.data_type(foo.data))
float 
```

所以我的问题是，在 Django Admin（我正在使用 ModelAdmin）中，文本框中 data_type 的值没有正确显示。无论何时`float`（并且在 db 中它存储为 float，我检查过），显示的值都是`0.0`. 因为`int`它显示`0`. 因为`bool`它显示`False`. 不是显示 data_type 的字符串表示，而是在 Django 实际调用它的地方，这意味着使用`__call__`我们的参数调用它，这会产生这些值。例如：

```
>>> DataType(float)()
0.0
>>> DataType(int)()
0
>>> DataType(bool)()
False 
```

`__call__`我想出了如何通过用以下替换方法来修补它：

```
def __call__(self, *args, **kwargs):
    if not args and not kwargs:
        return self.__unicode__()
    return self.datatype(*args, **kwargs) 
```

这会在表单中显示正确的值，但是我觉得这不是很优雅。有没有办法让它变得更好？我不知道 Django 一开始在哪里调用了字段值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:00:06.680

wrt 为什么调用您的 DataType，请阅读以下内容： [https ://docs.djangoproject.com/en/1.4/topics/templates/#accessing-method-calls](https://docs.djangoproject.com/en/1.4/topics/templates/#accessing-method-calls)

干净的解决方案可能是简单地将**调用**重命名为更明确的名称。

# iphone - 奇怪的索引 2 超出了空数组错误的范围

> ID：11247198
> 
> 赞同：2
> 
> 时间：2012-06-28T14:46:33.933
> 
> 标签：iphone, objective-c, ios, nsmutablearray

我似乎无法找到问题所在。这是我的代码：

```
NSMutableArray *sortedActivities = [NSMutableArray arrayWithCapacity:self.trainingSession.activities.count];
for (ManagedActivity *activity in self.trainingSession.activities)
    [sortedActivities insertObject:activity atIndex:[activity.activityIndex unsignedIntegerValue]]; 
```

如您所见，我想通过活动中名为 activityIndex 的属性对活动集（这是 trainingSession 中的关系）进行排序。活动的索引总是从 0 开始，这意味着没有一个索引超过 trainSession.activities.count-1。

我通过分配具有适当容量的 NSMutableArray 来进行排序，然后迭代活动（一次）并将它们插入到正确的索引中。出于某种我不知道的原因，我收到了这个错误：

由于未捕获的异常“NSRangeException”而终止应用程序，原因：“ *** -[__NSArrayM insertObject:atIndex:]: index 2 beyond bounds for empty array”

我尝试保留数组，没关系（也不应该重要）。

索引是正确的，计数是正确的，有什么问题？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T14:49:34.573

in 的容量`arrayWithCapacity:`只是优化的提示。数组的计数仍然为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-11T18:59:03.757

请检查您的数组计数它没有在位置 2 获得项目

# c# - DataGridCell 空集 DbNull.value

> ID：11247200
> 
> 赞同：2
> 
> 时间：2012-06-28T14:46:34.537
> 
> 标签：c#, wpf, mvvm

我正在使用数据集填充数据网格，并且`I have my dataset verified for nullable values`-

我的问题是：

数据集验证时，**发现*空行*且未显示错误**。我想用 DBNull.value 定义空单元格。有什么办法吗？我找到了一个`TargetNullValue`可以工作的名为的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:53:35.657

我找到了一种方法，通过转换

```
 public class ConvertStringToDBNull : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo cufo)
    {

        if (value is string)
        {
            if (value.ToString() == string.Empty)
            {
                return DBNull.Value;
            }
        }
        return value;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo cufo)
    {

        if (value is string)
        {
            if (value.ToString() == string.Empty)
            {
                return DBNull.Value;
            }
        }
        return value;
    }

} 
```

# java - 显示从 Map 读取的总行数

> ID：11247209
> 
> 赞同：0
> 
> 时间：2012-06-28T14:47:12.710
> 
> 标签：java

我有一个应用程序，用户在其中选择特定文件夹，该文件夹中的所有文件以及这些单个文件中的代码行都被计算在内，并在控制台上显示文件名和其中的代码行。 .这是我的一段代码...

```
Map<String, Integer> result = new HashMap<String, Integer>();  
                File directory = new File(chooser.getSelectedFile().getAbsolutePath());   
                File[] files = directory.listFiles();  
                for (File file : files)  
                {  
                    if (file.isFile())  
                    {    Scanner scanner = new Scanner(new FileReader(file));  
                        int lineCount = 0;  
                        try  
                        { for (lineCount = 0; scanner.nextLine() != null; lineCount++) ;  
                        } catch (NoSuchElementException e)  
                        {   result.put(file.getName(), lineCount);  
                        }  
                    }  
                }  
                for (Map.Entry<String, Integer> entry : result.entrySet())  
                {   System.out.println(entry.getKey() + " ==> " + entry.getValue());  
                }  } 
```

但我想再添加一项功能，它还应该显示所有文件的总行数让我们假设这 6 个单独的文件有 10 行代码，每个文件有 10*6 行，即总共读取 60 行，如何实现这一点请告知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:51:55.843

为什么不为每个 Map 条目值添加一个计数器并将其添加到您的计数器/累加器中，然后打印出来：

```
 Map<String, Integer> result = new HashMap<String, Integer>();  
                File directory = new File(chooser.getSelectedFile().getAbsolutePath());   
                File[] files = directory.listFiles();  

                for (File file : files)  
                {  
                    if (file.isFile())  
                    {    
                        Scanner scanner = new Scanner(new FileReader(file));  
                        int lineCount = 0;  

                        try  
                        { for (lineCount = 0; scanner.nextLine() != null; lineCount++);  
                        } catch (NoSuchElementException e)  
                        {   result.put(file.getName(), lineCount);  
                        }  

                    }  
                }  

                int lineCounter = 0;  
                for (Map.Entry<String, Integer> entry : result.entrySet())  
                {  
                    System.out.println(entry.getKey() + " ==> " + entry.getValue());
                    lineCounter+=entry.getValue();  
                }  
                 System.out.println(String.valueOf(lineCounter)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:00:41.033

要显示您正在阅读的所有文件的总行数，您需要将每个文件的行数相加到另一个变量。

```
Map<String, Integer> result = new HashMap<String, Integer>();  
            File directory = new File(chooser.getSelectedFile().getAbsolutePath());   
            File[] files = directory.listFiles();
            int totalLineCount = 0;
            for (File file : files)  
            {  
                if (file.isFile())  
                {    Scanner scanner = new Scanner(new FileReader(file));  
                    int lineCount = 0;  
                    try  
                    { for (lineCount = 0; scanner.nextLine() != null; lineCount++) ;  
                    } catch (NoSuchElementException e)  
                    {   result.put(file.getName(), lineCount);
                        totalLineCount += lineCount;   
                    }  
                }  
            }
             System.out.println("Total line count = "+ totalLineCount);

            for (Map.Entry<String, Integer> entry : result.entrySet())  
            {   System.out.println(entry.getKey() + " ==> " + entry.getValue());  
            }  } 
```

所以如果你有 10 个文件，每个文件有 6 行，totalLineCount 应该是 60。

# java - 我的 android 项目正在获取“java.lang.NullPointerException”

> ID：11247211
> 
> 赞同：-1
> 
> 时间：2012-06-28T14:47:16.887
> 
> 标签：java, android

我已经在这个项目上工作了几个星期了，突然间我得到了这个`java.lang.NullPointerException`。它编译得很好。但是当我运行它时出现此错误。
因此，我更改了工作区并加载了项目的先前工作版本，我将其保存为备份。还有同样的问题。该应用程序在加载第一个布局之前就崩溃了......

这是我的日志：

```
06-28 20:04:46.428: D/AndroidRuntime(382): Shutting down VM
06-28 20:04:46.428: W/dalvikvm(382): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-28 20:04:46.542: E/AndroidRuntime(382): FATAL EXCEPTION: main
06-28 20:04:46.542: E/AndroidRuntime(382): java.lang.RuntimeException: Unable to start activity ComponentInfo{cloud.mobile/cloud.mobile.MCActivity}: java.lang.NullPointerException
06-28 20:04:46.542: E/AndroidRuntime(382):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
06-28 20:04:46.542: E/AndroidRuntime(382):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-28 20:04:46.542: E/AndroidRuntime(382):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-28 20:04:46.542: E/AndroidRuntime(382):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-28 20:04:46.542: E/AndroidRuntime(382):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-28 20:04:46.542: E/AndroidRuntime(382):  at android.os.Looper.loop(Looper.java:123)
06-28 20:04:46.542: E/AndroidRuntime(382):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-28 20:04:46.542: E/AndroidRuntime(382):  at java.lang.reflect.Method.invokeNative(Native Method)
06-28 20:04:46.542: E/AndroidRuntime(382):  at java.lang.reflect.Method.invoke(Method.java:521)
06-28 20:04:46.542: E/AndroidRuntime(382):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-28 20:04:46.542: E/AndroidRuntime(382):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-28 20:04:46.542: E/AndroidRuntime(382):  at dalvik.system.NativeStart.main(Native Method)
06-28 20:04:46.542: E/AndroidRuntime(382): Caused by: java.lang.NullPointerException
06-28 20:04:46.542: E/AndroidRuntime(382):  at cloud.mobile.MCActivity.setLoggedIn(MCActivity.java:279)
06-28 20:04:46.542: E/AndroidRuntime(382):  at cloud.mobile.MCActivity.onCreate(MCActivity.java:198)
06-28 20:04:46.542: E/AndroidRuntime(382):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-28 20:04:46.542: E/AndroidRuntime(382):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-28 20:04:46.542: E/AndroidRuntime(382):  ... 11 more 
```

PS-今天，早些时候我玩过一些字符串数组并动态存储在其中。这是我第一次收到这个错误..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:50:12.957

没有代码，很难说出发生了什么，但开始的一点是

```
 at cloud.mobile.MCActivity.setLoggedIn(MCActivity.java:279 
```

检查 MCActivity 中的第 279 行。在该特定行上，您尝试对“某个空值”进行操作

# android - 在另一个视图 setVisibility(GONE) 之后将视图动画到新位置

> ID：11247213
> 
> 赞同：1
> 
> 时间：2012-06-28T14:47:18.693
> 
> 标签：android, android-animation

我想`Views`在我的布局中显示 3 个，但一次只能显示 2 个。当我按下一个按钮时，我希望最左边的视图向左滑出，中间的视图随之滑动，占据左视图的起始空间，最右边的视图应该滑入屏幕。

以下是一些截图：

动画前：
![在此处输入图像描述](../Images/2c87d6de9390996d6e74725d089f2b4b.png)

在动画期间（绘画编辑^^）： ![在此处输入图像描述](../Images/65c35c738035651d01ff17eafae4d752.png)

动画后： ![在此处输入图像描述](../Images/3424aa0c2c832be73d324d2c82850840.png)

这是我的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:weightSum="3" >

    <FrameLayout
        android:id="@+id/stations_stations"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_margin="20dp"
        android:layout_weight="1"
        android:background="@drawable/fragment_border" />

    <FrameLayout
        android:id="@+id/stations_singlestation"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_margin="20dp"
        android:layout_weight="2"
        android:background="@drawable/fragment_border" />

    <FrameLayout
        android:id="@+id/stations_trip"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_margin="20dp"
        android:layout_weight="1"
        android:background="@drawable/fragment_border"
        android:visibility="gone" />

</LinearLayout> 
```

所以我可以使用下面的代码将最左边的视图动画到屏幕外：

```
 final View stationsContainer = findViewById(R.id.stations_stations);
    Animation an = AnimationUtils.loadAnimation(this, R.anim.slide_out_left);
    stationsContainer.startAnimation(an);
    an.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationEnd(Animation animation) {
            stationsContainer.setVisibility(View.GONE);
        }
    }); 
```

这会将最左边的视图设置为左侧窗口的动画，并将其设置为消失。我也可以将中间视图动画到新位置，但是当动画完成时，中间视图会在很短的时间内跳回其原始位置，之后它会占据正确的位置。我怎样才能避免这种跳跃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T06:39:48.103

*   每当子视图的可见性在和之间变化时，使用[`LayoutTransistion`](http://developer.android.com/reference/android/animation/LayoutTransition.html)该类自动为子视图设置动画。该课程从以后开始提供。`VISIBLE``GONE``API 11`

    有关示例代码，请查看 sdk 附带的示例。确切路径是`ApiDemos\src\com\example\android\apis\animation\LayoutAnimationsHideShow.java`

*   在视图组中添加和删除视图时，使用[`LayoutAnimationController`](http://developer.android.com/reference/android/view/animation/LayoutAnimationController.html)类为视图设置动画。在这里，您必须保留对已删除视图的引用，因为您想稍后再添加它。此类适用于所有版本的 Android。

    示例代码路径：`ApiDemos\src\com\example\android\apis\view\LayoutAnimation`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:57:38.307

用于`animation`滑入和滑出。您需要在资源中将动画定义为 xml。

[例如看这个](https://stackoverflow.com/questions/5151591/android-left-to-right-slide-animation)

或者您可以使用`ViewFlipper` [Try this 作为示例](http://www.inter-fuser.com/2009/07/android-transistions-slide-in-and-slide.html)

在 SO 和 web 上有更多的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:01:06.260

将您的 FrameLayouts 添加到 ViewFlipper 中。例如

```
<ViewFlipper>
 <FrameLayout1/>
 <FrameLayout2/>
 <FrameLayout3/>
</ViewFlipper> 
```

然后在您的代码中调用 setInAnimation(leftInAnim) 和 setOutAnimation(leftOutAnim) 到 viewFlipper，并调用 showNext()，这将导致动画应用于当前视图和下一个视图。

leftInAnim 和 leftOutAnim 是一个 XML 动画资源，告诉系统如何动画当前视图：例如

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="-100%p" android:toXDelta="0"
        android:duration="@android:integer/config_mediumAnimTime"/>
</set> 
```

这将导致视图从右侧（视图外）滑入当前视图

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-04-25T09:58:17.377

只需添加`android:animateLayoutChanges=true`到`LinearLayout`所有视图中，您将获得所需的结果

# c# - WCF 数据服务中的无类型数据集

> ID：11247215
> 
> 赞同：1
> 
> 时间：2012-06-28T14:47:20.833
> 
> 标签：c#, wcf, wcf-data-services, odata

我正在尝试从 WCF 数据服务 Web 服务返回数据集。我遇到的问题是直到运行时我才知道类型。

我遵循了此处概述的方法：http: [//blogs.msdn.com/b/vitek/archive/2010/11/09/adding-multi-value-properties-to-untyped-providers.aspx](http://blogs.msdn.com/b/vitek/archive/2010/11/09/adding-multi-value-properties-to-untyped-providers.aspx)

我基本上处于可以从调用中从 DataTable 返回数据的位置。问题是我不能一次通话。我使用以下代码来构建我的输出：

```
 protected override DSPContext CreateDataSource()
    {
        DSPContext context = new DSPContext();

        ResourceSet viewsSet, viewRowsSet, viewRowValuesSet;
        this.Metadata.TryResolveResourceSet("Views", out viewsSet);
        this.Metadata.TryResolveResourceSet("ViewRows", out viewRowsSet);
        this.Metadata.TryResolveResourceSet("ViewRowValues", out viewRowValuesSet);

        IList<DSPResource> views = context.GetResourceSetEntities(viewsSet.Name);
        IList<DSPResource> viewRows = context.GetResourceSetEntities(viewRowsSet.Name);
        IList<DSPResource> viewRowValues = context.GetResourceSetEntities(viewRowValuesSet.Name);

        int viewID = 71;

        DataTable dtData = GetDataForView(viewID);

        var viewObj = new DSPResource(viewsSet.ResourceType);
        viewObj.SetValue("ViewID", viewID);
        viewObj.SetValue("ViewRows", new List<DSPResource>());
        views.Add(viewObj);

        int idx = 0;
        foreach (DataRow dr in dtData.Rows)
        {
            var viewRowObj = new DSPResource(viewRowsSet.ResourceType);
            viewRowObj.SetValue("RowID", idx);
            viewRowObj.SetValue("ViewRowValues", new List<DSPResource>());
            //viewRows.Add(viewRowObj);

            int innerIDX = 0;
            foreach (object colVal in dr.ItemArray)
            {
                var viewRowValue = new DSPResource(viewRowValuesSet.ResourceType);
                viewRowValue.SetValue("FieldName", dtData.Columns[innerIDX].ColumnName);
                viewRowValue.SetValue("FieldValue", colVal.ToString());

                ((List<DSPResource>)viewRowObj.GetValue("ViewRowValues")).Add(viewRowValue);

                innerIDX++;
            }

            ((List<DSPResource>)viewObj.GetValue("ViewRows")).Add(viewRowObj);
            idx++;                
        }

        return context;
    }

    protected override DSPMetadata CreateDSPMetadata()
    {
        DSPMetadata metadata = new DSPMetadata("LogixWCFService", "LogixWCF");

        ResourceType view = metadata.AddEntityType("View");
        metadata.AddKeyProperty(view, "ViewID", typeof(int));

        ResourceType viewRow = metadata.AddEntityType("ViewRow");
        metadata.AddKeyProperty(viewRow, "RowID", typeof(int));

        ResourceType viewRowValue = metadata.AddEntityType("ViewRowValue");
        metadata.AddKeyProperty(viewRowValue, "FieldName", typeof(string));
        metadata.AddPrimitiveProperty(viewRowValue, "FieldValue", typeof(string));          

        ResourceSet views = metadata.AddResourceSet("Views", view);
        ResourceSet viewRows = metadata.AddResourceSet("ViewRows", viewRow);
        ResourceSet viewRowValues = metadata.AddResourceSet("ViewRowValues", viewRowValue);

        metadata.AddResourceReferenceProperty(viewRow, "View", views);
        metadata.AddResourceSetReferenceProperty(view, "ViewRows", viewRows);

        metadata.AddResourceReferenceProperty(viewRowValue, "ViewRow", viewRows);
        metadata.AddResourceSetReferenceProperty(viewRow, "ViewRowValues", viewRowValues);

        return metadata;
    } 
```

当我尝试 URL“http://localhost/Test.svc/Views()/ViewRows”时，我得到一个行列表，每一行都有一个 ID 和该行中的字段值集合。所有 web 服务返回的是 RowID 列表。为了获取每一行的集合，我需要为每一行调用以下 URL“http://localhost/Test.svc/Views()/ViewRows”。

我希望能够一次性返回所有数据，而不是进行多个服务器调用。

任何人都可以帮助我如何做到这一点？

# c++ - GCC 4.7.1 泛化常量表达式重载问题

> ID：11247216
> 
> 赞同：5
> 
> 时间：2012-06-28T14:47:32.447
> 
> 标签：c++, templates, gcc, c++11, constexpr

我尝试使用模板专业化来实现编译时算法选择。

我散列以下代码：

```
template <class C>
    struct choose
    { 
        typedef size_t (*type)(const C*);
        static constexpr type value = java_string_hashcode<C>;
    }; 
```

我已经将这种结构专门用于`char`类型：

```
template <>
    struct choose<char>
    { 
        typedef size_t (*type)(const char*);
        static constexpr type value = fnv_1a_32_hash;
    }; 
```

但是当我尝试编译它时，GCC 4.7.1 出现以下错误：

> 错误：字段初始值设定项不是常量

我认为问题来自`fnv_1a_32_hash`函数重载的事实，即使 IMO 隐式转换`size_t (*)(const char*)`应该处理这个问题。

我终于找到了一种解决方法，通过重命名重载或简单地转换分配：

```
static constexpr type value = (type)fnv_1a_32_hash; 
```

**我的问题是**：这是编译器错误吗？还是我错过了什么？请在需要的地方解释和引用规范。

* * *

fnv_1a_32_hash 实现细节：

```
constexpr size_t fnv_1a_32_hash(const char* p, size_t h) noexcept
{ 
    return (*p == 0) ? h : fnv_1a_32_hash(p + 1, (h ^ *p) * fnv::prime);
} 

constexpr size_t fnv_1a_32_hash(const char* p) noexcept
{ 
    return fnv_1a_32_hash(p, fnv::offset_basis);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:31:14.520

可能已经报道过：

[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52366](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52366)

# tfs - TFS 重新分支？

> ID：11247219
> 
> 赞同：1
> 
> 时间：2012-06-28T14:47:36.877
> 
> 标签：tfs, branching-and-merging

在我们的 TFS(2007) 中，我们有这个（坏的）层次结构：

```
$main
  |_ $V1
      |_ $V2 
```

好吧......这是我们的一个坏举动。

现在，我们想要这样：

```
$main
  |_ $V1
  |_ $V2 
```

有没有办法从 $V1 取消分支 $V2，并将其分支到 $main ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:47:27.403

首先，TFS 2007 不存在！:) 2005 年或 2008 年。

其次，是的，这是一个糟糕的举动。

第三，不能改变分支之间的关系，所以不能unbranch/rebranch。

**解决方案：** 您不会喜欢它，但这是唯一的方法，创建新的适当的分支层次结构，然后复制内容。

您可以通过多种方式复制，这是一种：

*   源 Main 到目标 Main 的第一个最新原始副本
*   从目的地 Main 合并到目的地 V1，然后签入 V1
*   raw 将最新的源 V1 复制到目标 V1。
*   使用 TFPT online 模拟离线/在线模式以计算更改，然后签入
*   对 V2 执行相同的操作。
*   如果您想要分支的“快照”（不仅是最新的），您可以通过按时间顺序重复操作来模拟它。

如果您的项目很大：祝您好运！（但你会成功，现在比以后更好，相信我）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T12:44:13.190

在 VS2013 和 VS2012 中，有一个称为 Re-Parent 的功能。我从未使用过它，但文档说，这就是你需要的......（IMO）。

[新 VS 版本的更新]

# jquery - Jquery 插件表单无法正常工作

> ID：11247220
> 
> 赞同：0
> 
> 时间：2012-06-28T14:47:42.210
> 
> 标签：jquery, jquery-forms-plugin

编码 ：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="js/jquery.form.js"></script>
<script>
$(document).ready(function () {
  $('#form1').ajaxForm({
    dataType: 'json',
    success: processJson
  });
});

function processJson(data) {
  if (data.result == "ok") {
    $("#f1").show();
    var usernameValue = $('input[name=us]').fieldValue();
    alert("Nombre " + usernameValue);
  }
  //alert(data.result);
}
</script>
<script>
function test_form() {
  $(document).ready(function () {
    $('#form2').ajaxForm({
      dataType: 'json',
      success: processJson2
    });
  });

  function processJson2(data) {
    if (data.result == "ok") {
      $("#f2").show();
      var usernameValue = $('input[name=us]').fieldValue();
      alert("Nombre " + usernameValue);
    }
    //alert(data.result);
  }
}
</script>
<form name="form1" method="post" action="test_form.post.php" id="form1">
  <input type="text" name="us">
  <input type="submit" name="Submit" value="Enviar">
</form>
<div id="f1" style="display:none;">Ejecutando Forma 1</div>
<form name="form2" method="post" action="test_form.post.php" id="form2">
  <input type="text" name="us">
  <input type="submit" name="Submit" value="Enviar" Onclick="test_form();">
</form>
<div id="f2" style="display:none;">Ejecutando Forma 2</div> 
```

如果您进行测试，您可以在一个字段中插入名称并按下另一个表单按钮，然后在另一个表单中看到文本插入，在另一种情况下，相同的字段在不同的表单 id 下不起作用，问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:56:03.447

您的问题是您正在使用通用选择器来检索所需的文本框。

当您应用以下内容时：

```
$('input[name=us]').fieldValue() 
```

您正在检索第一个随机选择的文本框，因为

```
$('input[name=us]') 
```

以两个文本框而不是一个响应。它从文档顶部开始搜索名为“us”的输入元素。你应该做的是这样的事情：

```
$("#form1").find("input[name='us']").val(); 
```

这是您可以做到的众多不同方法之一。

# ios - ios用户如何取消facebook登录？

> ID：11247222
> 
> 赞同：2
> 
> 时间：2012-06-28T14:47:43.303
> 
> 标签：ios, facebook, cocoa-touch

当用户到达此屏幕时，无法取消它。我能做些什么？

![facebook sdk 登录](../Images/bec0392d8dc3e05a9d90355c686c63b0.png)

为了首先获得这个视图，我正在运行：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               vid, @"link",
                               vid, @"source",
                               vid, @"picture",
                               @"My Place", @"name",
                               @"YouTube Presentation", @"caption",
                               title, @"description",
                               @"Enjoy this Video",  @"message",
                               nil];

[app.facebook dialog:@"stream.publish"
                   andParams:params
                 andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:32:38.320

# 如果您的 FBDialog.bundle 不是您的资源的一部分，则会发生这种情况。

要解决此问题，您必须：

*   在项目导航器中单击您的应用程序（文件夹按钮 - 左上角）
*   选择你的目标
*   选择构建阶段
*   在“复制捆绑资源”下，您需要点击小 + 按钮
*   选择“添加其他...”
*   找到您的`FBDialog.bundle`并将其添加到您的项目中。

我希望这可以为您省去它给我带来的麻烦！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:58:10.043

如果您使用 FacebookSDK 3.1.1，您只需将名为“FacebookSDKResources.bundle”的文件添加到 xCode Project Navigator（您可以将其放在 FacebookSDK.framework 旁边）。
您可以在 FacebookSDK.framework->Version->A->Resources 中找到它

此解决方案在 iOS 5 和 6 上功能齐全。

简单的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:56:06.810

这是我的样子，你应该在右上角有一个关闭按钮。当你显示它时，你一定做错了什么。

![Facebook登入](../Images/dd3af94ce0f10e59ac5b616ba361733e.png)

```
@property(nonatomic, retain) Facebook *faceBookObject;
…
// Authentication
- (BOOL)isLoggedIn {
    if (!self.faceBookObject) {
        return NO;
    } else {
        if ([self.faceBookObject isSessionValid]) {
            return YES;
        }
    }
    return NO;
}
…
if (![self isLoggedIn]) {
     [self login];
}

- (void)login {
    NSArray *permissions = [NSArray arrayWithObjects:@"read_stream", @"publish_stream", @"offline_access", nil];
    [self.faceBookObject authorize:permissions delegate:self];            
} 
```

# javascript - 如何获取本地存储值

> ID：11247235
> 
> 赞同：9
> 
> 时间：2012-06-28T14:48:36.620
> 
> 标签：javascript, html, local-storage

```
var cookieValue = document.getElementById("demo");      
var value = cookieValue .getAttribute('value');

if(typeof(Storage)!=="undefined")
{
  alert(value);
  localStorage.setItem = ("GetData" , value);
  alert(localStorage.setItem);
}

function loading()
{
  alert("coming");
  var allcookies = localStorage.getItem('GetData');
  alert(allcookies);
} 
```

以上是我设置的方式`localStorage.setItem`，我正在获取 LocalStorage。但是在我没有得到输出的地方，它显示为 Null。请建议我任何解决方案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T14:52:01.860

您的代码应该是：

```
var cookieValue = document.getElementById("demo");      
    var value = cookieValue .getAttribute('value');
    if(typeof(Storage)!=="undefined")
    {
        alert(value);
        localStorage.setItem("GetData" , value);
        alert(localStorage.getItem("GetData"));

    }

function loading()
{
        alert("coming");
        var allcookies = localStorage.getItem('GetData');
        alert(allcookies);

} 
```

或者

```
var cookieValue = document.getElementById("demo");      
    var value = cookieValue .getAttribute('value');
    if(typeof(Storage)!=="undefined")
    {
        alert(value);
        localStorage["GetData"] = value;
        alert(localStorage["GetData"]);

    }

function loading()
{
        alert("coming");
        var allcookies = localStorage["GetData"];
        alert(allcookies);

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T14:51:18.323

的正确语法`setItem`是

> localStorage.setItem("GetData", 值)

不是

> localStorage.setItem = ("GetData", 值)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:52:17.397

试试这个

```
if( window.localStorage ) {
    alert(value);
    localStorage.setItem("GetData" , value);
} 
```

# android - 如何为android应用程序制作DLL

> ID：11247237
> 
> 赞同：1
> 
> 时间：2012-06-28T14:48:46.277
> 
> 标签：android, eclipse

我在 Eclipse 中为我的 android 应用程序开发了一个类。现在我对所有其他应用程序使用相同的类。那么是否可以将该类作为 dll 或我可以在所有应用程序中引用的东西？因此，如果我在课堂上更改某些内容，那么我不必在所有项目中都这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:53:26.387

不，这实际上是昨天在 Google IO Android Fireside Chat 中提出的，并且没有计划该功能（还没有聊天的 youtube 视频，抱歉）。

您可以做的最接近的事情是设置一个[Library Project](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)，但是您仍然必须将该项目包含在您的所有其他应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:52:39.087

您可以将 Android 项目用作库。这个库只能包含一个类，或者可以包含多个视图和活动。

然后，您可以从不同的 Android 项目中引用该库，就像您在 C++ 应用程序中使用 DLL 一样。

查看[Android 文档](http://developer.android.com/tools/projects/index.html#LibraryProjects)以了解如何创建库。如果您使用的是 Eclipse，这非常容易（通常 3 次点击）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T14:54:52.593

Android 喜欢将其所有应用程序视为单独的用户，因此它不喜欢在应用程序之间共享代码。

我建议只复制和粘贴已完成的课程。我认为这样做会减少麻烦和错误，而不是尝试跨应用程序共享课程。

# java - 当通过 Hessian 使用 Spring 远程传输时，BigDecimal 值始终为零

> ID：11247239
> 
> 赞同：6
> 
> 时间：2012-06-28T14:48:52.257
> 
> 标签：java, spring, hessian, spring-remoting

当我通过 Spring 的 Hessian 功能调用返回 BigDecimal 值的远程方法时，它总是返回零。直接调用该方法或使用普通的 Hessian servlet（非 Spring）可以正常工作。

可以做些什么来解决这个问题？

## 服务器端（Tomcat 7）

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <servlet>
        <servlet-name>remoting</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>remoting</servlet-name>
        <url-pattern>/remoting/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

远程处理-servlet.xml：

```
<beans>
    <context:annotation-config />
    <context:component-scan base-package="hr.spi.logic.lcspi" />

    <tx:annotation-driven proxy-target-class="true" />

    <bean name="/lcspi/lc302/poslovi" class="org.springframework.remoting.caucho.HessianServiceExporter">
        <property name="service" ref="posloviLogic" />
        <property name="serviceInterface" value="hr.spi.logic.lcspi.lc302.PosloviLogicInterface" />
    </bean>
</beans> 
```

我调用其方法的服务类：

```
package hr.spi.logic.lcspi.lc302;

@Transactional
@Repository
public class PosloviLogic implements PosloviLogicInterface {
    @Override
    public BigDecimal test()
    {
        BigDecimal bd = new BigDecimal("2.2"); 
        return bd;      
    }
} 
```

## 客户端

Spring配置-applicationContextHessian.xml：

```
<beans>
    <bean id="posloviLogic" class="org.springframework.remoting.caucho.HessianProxyFactoryBean">
        <property name="serviceUrl" value="http://localhost:8080/SpringWebTest/remoting/lcspi/lc302/poslovi" />
        <property name="serviceInterface" value="hr.spi.logic.lcspi.lc302.PosloviLogicInterface" />
    </bean>
</beans> 
```

控制台应用测试：

```
public static void main(String[] args) {
    ApplicationContext context = new ClassPathXmlApplicationContext("applicationContextHessian.xml");
    try {
        PosloviLogicInterface posloviLogic = (PosloviLogicInterface) context.getBean("posloviLogic");

        BigDecimal bd = posloviLogic.test();
        System.out.println(bd); // This returns 0.00

    } catch (Exception ex) {
        System.out.println(ex.getMessage());
    }
} 
```

编辑：使用的库是 Spring 3.2 和 Hessian 4.0.7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:39:37.720

您可以使用 HessianServlet.setSerializerFactory() 设置您自己的 SerializerFactory 并返回 com.caucho.hessian.io.BigDecimalDeserializer 作为 BigDecimal 的 Deserializer。

我们像这样对其进行了修补，并且可以正常工作。不知道为什么不以这种方式实施。

见[http://www.jarvana.com/jarvana/view/com/caucho/hessian/4.0.7/hessian-4.0.7-src.jar!/com/caucho/hessian/server/HessianServlet.java?format=好的](http://www.jarvana.com/jarvana/view/com/caucho/hessian/4.0.7/hessian-4.0.7-src.jar!/com/caucho/hessian/server/HessianServlet.java?format=ok)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T09:08:45.473

这似乎是一个已知的错误。有关详细信息和可能的解决方法，请参阅[http://bugs.caucho.com/view.php?id=3920](http://bugs.caucho.com/view.php?id=3920)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T06:03:31.353

我们这样解决了这个问题：

与@keuleJ 一样，我们构建了自己的 SerializerFactory（见下文），但我们不返回 com.caucho.hessian.io.BigDecimalDeserializer，因为它不检查 null。

```
public class BigDecimalSerializerFactory extends AbstractSerializerFactory {
private BigDecimalSerializer bigDecimalSerializer = new BigDecimalSerializer();
private BigDecimalDeserializer bigDecimalDeserializer = new BigDecimalDeserializer();

@Override
public Serializer getSerializer(Class cl) throws HessianProtocolException {
    if (BigDecimal.class.isAssignableFrom(cl)) {
        return bigDecimalSerializer;
    }
    return null;
}

@Override
public Deserializer getDeserializer(Class cl) throws HessianProtocolException {
    if (BigDecimal.class.isAssignableFrom(cl)) {
        return bigDecimalDeserializer;
    }
    return null;
} 
```

}

然后我们定义了自己的 Deserializer。它与 com.couchos#s 的实现不同，它通过验证值是否不为空来实现。有必要扩展*AbstractStringValueDeserialize*！

```
public class BigDecimalDeserializer extends AbstractStringValueDeserializer {

@Override
public Class getType() {
    return BigDecimal.class;
}

@Override
protected Object create(String value) {
    if (null != value) {
        return new BigDecimal(value);
    } else {
        return null;
    }
} 
```

}

Serializer 仅将 BigDecimal 传输到 String 表示：

公共类 BigDecimalSerializer 扩展 AbstractSerializer {

```
@Override
public void writeObject(Object obj, AbstractHessianOutput out) throws IOException {

    if (obj == null)
        out.writeNull();
    else {
        Class cl = obj.getClass();

        if (out.addRef(obj))
            return;

        int ref = out.writeObjectBegin(cl.getName());

        BigDecimal bi = (BigDecimal) obj;

        if (ref < -1) {
            out.writeString("value");
            out.writeString(bi.toString());
            out.writeMapEnd();
        } else {
            if (ref == -1) {
                out.writeInt(1);
                out.writeString("value");
                out.writeObjectBegin(cl.getName());
            }

            out.writeString(bi.toString());
        }
    }
} 
```

}

这个实现对我们有用，不仅适用于 BigDecimal，也适用于 joda DateTime。

要使用它，您必须将 Serializer Factory 添加到

```
 SerializerFactory serializerFactory = newSerializerFactory();
    serializerFactory.addFactory(new BigDecimalSerializerFactory()); 
```

您必须在服务器端和客户端都这样做！

**暗示！** 在我们的例子中，我们遇到了 BigDecimal 和 DateTime 的综合问题。因此堆栈跟踪和调试视图很奇怪。因此，如果您使用“非标准”对象，请检查它们的序列化！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-25T20:30:43.037

我们遇到了同样的问题，发现分布在 maven Central 上的 hessian jar 缺少一些关键配置文件。如果您直接从[http://hessian.caucho.com/](http://hessian.caucho.com/)下载该 jar，该 jar 将包括：

*   META-INF/hessian/序列化器
*   META-INF/hessian/反序列化器

我们通过将这两个丢失的文件复制到我们项目的`src/main/resources`.

奖励：此解决方案还纠正了我们在 hessian 序列化时遇到的问题`java.util.Locale`

# android - 如何使 ActionBar LayoutParams 适用于 android 2.x 设备

> ID：11247246
> 
> 赞同：0
> 
> 时间：2012-06-28T14:49:12.640
> 
> 标签：android, android-actionbar, android-2.2-froyo, layoutparams

我已经成功创建了一个可在 >3.0 设备上运行的应用程序。但是，我需要使应用程序在 2.x 设备上也可以运行。我想问一下是否可以使 ActionBar.LayoutParams 在这些设备上也可以使用。

是否有任何兼容包可使其正常运行？

欢迎任何想法...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:51:43.447

ActionBarSherlock 是您正在寻找的。它将允许您在 2.x+ 设备上使用操作栏：

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

# actionscript-3 - 如何在 Flex 4 位图图像控件上找到鼠标单击事件

> ID：11247248
> 
> 赞同：0
> 
> 时间：2012-06-28T14:49:16.333
> 
> 标签：actionscript-3, apache-flex, flex4

如何在 Flex 4 中处理位图图像控件上的鼠标单击事件？我看到位图图像控件没有像这样的事件处理程序。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:36:42.463

This should do the trick (Spark version): (old comment below, applies to previous code posting)

```
<fx:Script>
    import mx.controls.Alert;
    protected function graphic_clickHandler(event:MouseEvent):void
    {
        Alert.show("Image clicked!");
    }
</fx:Script>

<s:Graphic id="graphic" click="graphic_clickHandler(event)">
    <s:BitmapImage x="0" y="0" source="@Embed(source='testImage.bmp')"/>
</s:Graphic> 
```

# java - 使用来自 java 程序的参数运行 .jar 并获取输出

> ID：11247249
> 
> 赞同：0
> 
> 时间：2012-06-28T14:49:16.590
> 
> 标签：java, jar

现在我正在为某些设备做一些测试自动化，问题是，我有一个 .jar 文件，它从 cmd.exe 执行所有测试，我想用一个 java 脚本自动化这个，所以我可以运行它并且读取输出。我的 .jar 文件使用一些参数来执行，如下所示：

> -java jar MyFile.jar arg1 arg2

我真的迷路了，所以我非常感谢你的帮助。到目前为止，我已经尝试了很多我在网上找到的代码，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:13:02.550

假设您在 jar.file 中执行主类（入口点）没有问题，命令行参数将传递给类中静态 main 方法的 String 数组。

```
public static void main(String[] args) {
    if (args.length>0){
        System.out.println(args[0]); // arg1 parameter given in command line
        System.out.println(args[1]); // arg2 parameter given in command line
    }
} 
```

# django - 明确清除 django memcached flush/cache() 或删除特定的 per-view-cache 键

> ID：11247251
> 
> 赞同：4
> 
> 时间：2012-06-28T14:49:20.773
> 
> 标签：django, caching, memcached, flush

我正在使用 django 的 Memcached 和带有`@cache_page(timeout)`装饰器的 per-view 缓存机制。

在一个特定的视图函数中，我希望清除整个缓存。我试过了`cache.clear()`，`cache._cache.flush_all()`但似乎都没有刷新缓存。

还有其他方法可以做到这一点还是我做错了？

编辑：我意识到完全清除缓存并不是一个好主意，而不是仅仅删除所需的键。但是，我不知道我用 @cache_page(timeout) 装饰的视图的键我如何知道这些？在我获得密钥之后，我只是做一个 cache.delete(key)？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:11:01.337

有比刷新整个缓存更好的方法。请参阅[缓存版本控制](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#cache-versioning)：

> 当您更改使用缓存值的运行代码时，您可能需要清除任何现有的缓存值。最简单的方法是刷新整个缓存，但这会导致丢失仍然有效且有用的缓存值。
> 
> Django 提供了一种更好的方法来定位单个缓存值。Django 的缓存框架有一个系统范围的版本标识符，使用 VERSION 缓存设置指定。此设置的值会自动与缓存前缀和用户提供的缓存键相结合，以获得最终的缓存键。

# android - 从 EditText 中提取一行

> ID：11247253
> 
> 赞同：6
> 
> 时间：2012-06-28T14:49:29.643
> 
> 标签：android, string, android-widget, android-edittext

我们如何从 multiLine 中提取一条线`EditText`？

我尝试过这种方式，但我知道这不是一个好习惯：

```
String street1 = "";
String street2 = "";
EditText streetEt = ((EditText) findViewById(R.id.street));
ExtractedText extractedText = new ExtractedText();
ExtractedTextRequest req = new ExtractedTextRequest();
int endOfLineOffset = 0;

req.hintMaxLines = 1;
streetEt.extractText(req, extractedText);
endOfLineOffset = extractedText.partialEndOffset;
street1 = extractedText.toString();
... 
```

`\n`有没有更简单的方法来做到这一点，比如在字符串中寻找？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T14:57:32.343

尝试使用`String.split()`. 代码示例：

```
String multiLines = streetEt.getText().toString();
String[] streets;
String delimiter = "\n";

streets = multiLines.split(delimiter); 
```

现在你有一系列的街道。

例如，假设您`EditText`阅读“1st St.\nHighway Rd.\nUniversity Ave”。（或者是那 3 条街道被换行符隔开，而不是你实际看到的`\n`）。按照我为您提供的代码示例，

*   `multiLines`变为“1st St.\nHighway Rd.\nUniversity Ave.”
*   `streets = multiLines.split(delimiter);`用街道名称填充数组`streets`，即

    *   街道[0] = "第一街"
    *   街道[1] = "高速公路路。"
    *   街道[2] = "大学大道。"

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T14:54:59.057

试试这个：

```
String text = streetEt.getText();

String firstLine = text.substring(0,text.indexOf("\n")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-05T05:21:56.673

试试这个，

```
String text=editText1.getText().toString().replace("\n", " ").trim(); 
```

# php - 从另一台服务器获取 php 数组

> ID：11247263
> 
> 赞同：0
> 
> 时间：2012-06-28T14:50:10.993
> 
> 标签：php, arrays, file-get-contents

我有一个 php 文件 list.php

```
<?php
$arr=array('444','555');
echo var_export($arr);
?> 
```

现在我想使用 file_get_contents 从另一个 php 脚本中获取数组。这怎么可能实现？我不想使用会话。**这两个脚本位于不同的服务器上。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T14:51:04.720

您可以使用[`serialize()`](http://php.net/serialize)数组或使用[`json_encode()`](http://php.net/json_encode)JSON 对数组进行编码。然后，在另一个 PHP 脚本中，您将使用[`unserialize()`](http://php.net/unserialize)or[`json_decode()`](http://php.net/json_decode)将字符串返回到数组中。

例如，使用`serialize()`：

**在 a.php 中**（在服务器 A 上）

```
$array = array( "foo" => 5, "bar" => "baz");
file_put_contents( 'array.txt', serialize( $array)); 
```

**在 b.php 中**（在服务器 B 上）

```
$string = file_get_contents( 'http://www.otherserver.com/array.txt');
$array = unserialize( $string);
var_dump( $array); // This will print the original array 
```

* * *

您还可以从 PHP 脚本输出字符串，而不是将其保存到文件中，如下所示：

**在 a.php 中**（在服务器 A 上）

```
$array = array( "foo" => 5, "bar" => "baz");
echo serialize( $array); exit; 
```

**在 b.php 中**（在服务器 B 上）

```
$string = file_get_contents( 'http://www.otherserver.com/a.php');
$array = unserialize( $string);
var_dump( $array); // This will print the original array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:53:39.830

作为 nickb 答案的一个小扩展：

脚本1

```
$arr=array('444','555');
file_put_contents("data.txt", serialize($arr)); 
```

脚本 2

```
$arr = unserialize(file_get_contents("data.txt")); 
```

应该管用！

编辑：哦，好吧，尼克自己添加了一个例子:)

# ssas - 分析服务单元数据 - 允许访问所有成员

> ID：11247264
> 
> 赞同：1
> 
> 时间：2012-06-28T14:50:11.477
> 
> 标签：ssas, mdx

只是问你一个小问题...

我目前正在尝试为分析服务多维数据集实现角色结构。为了启用对特定角色的写回支持，我遵循了 Microsoft“使用 Analysis Services 写回启用和保护数据输入”指南。现在我想允许对多维数据集的所有单元格（度量）进行写访问。

如果我选择具有以下 MDX 语句的特定单元格，它工作正常：

```
Measures.CurrentMember IS Measures.[Sales Amount Quota] 
```

但我没有找到允许访问所有单元格的正确声明。关于这个[网站](http://technet.microsoft.com/en-us/library/ms174904)，这应该是一件容易的事，但他们没有在那里发布 MDX 声明。使用空白表达式访问被拒绝，并且没有在单元格数据选项卡页面中选择任何内容，它也被拒绝。

有人有想法吗？

延斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:48:03.770

基本上，您只需要一个返回 True 结果的表达式。尝试

```
Measures.CurrentMember IS Measures.CurrentMember 
```

# r - 在 R 中合并多个条件

> ID：11247265
> 
> 赞同：0
> 
> 时间：2012-06-28T14:50:12.050
> 
> 标签：r, matrix, plyr

我有两个数据框：

```
df1 <- data.frame( pt = c("pt1153", "pt1153", "pt1153", "pt1154", "pt1155", "pt1156"),
                   phys = c("p10", "p616", "p850", "p899", "p709", "p892"))

df2<- data.frame( sender = c("p10", "p10", "p100", "p100", "p102", "p103"),
                  s.type = c(11,11,21,21,11, 21),
                  receiver = c("p616", "p850", "p235", "p388", "p596", "p696"),
                  r.type = c(21,31,11,11,31,31),
                  shared.pts = c(1,1,1,1,1,1) ) 
```

我想结束

```
 sender s.type receiver r.type shared.pts pts
    p10    11    p616     21      1        p1153
    p10    11    p850     31      1        p1153 
```

但我不知道该怎么做。我尝试合并然后使用 ddply，但这没有用。我也尝试过使用 apply，但无法弄清楚要制作什么功能。

仅仅合并 dfs 是不够的。我需要根据每个共享 df1 中“pts”列的成员来合并它们

虽然我似乎无法重现我的问题，但当我使用合并时，我最终得到：

```
 p.sender.id p.receiver.type Source.total.pts p.receiver.id p.sender.type Target.total.pts shared.pts patient.id
1          p10              21                6          p616            11              3          1     pt2439

2          p10              21                6          p616            11                3          1     pt1870

3          p10              21                6          p616            11                3          1     pt1153

4          p10              21                6          p616            11              3          1       pt64
5          p10              21                6          p616            11              3          1     pt1626
6          p10              21                6          p616            11              3          1      pt941
7          p10              31                6          p850            11             10          1     pt2439
8          p10              31                6          p850            11             10          1     pt1870
9          p10              31                6          p850            11             10          1     pt1153
10         p10              31                6          p850            11               10          1       pt64 
```

当 p10 和 p616 只共享一个 pt 时。pt1153

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:07:23.673

我认为合并应该有效！

```
merge(df2, df1, by.x = "sender", by.y = "p")
  sender receiver   pts
1    p10     p850 pt800
2    p55      p90  pt11 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:03:51.983

这可以让您大部分时间到达那里，只有列的顺序不同：

```
ddply(df1,.(pts),function(x){ x$p })
    pts  V1   V2
1  pt11 p55  p90
2 pt800 p10 p850 
```

但由于我只使用过`df1`，我怀疑你是否遗漏了任何问题，这意味着你不能对你的真实数据采用这种策略。

# java - 方法在反射中起作用，但在 Java 中不是“正常方式”

> ID：11247268
> 
> 赞同：6
> 
> 时间：2012-06-28T14:50:19.293
> 
> 标签：java, reflection

执行此代码时出现异常：

```
p7 = new PKCS7(p7byte);
...
SignerInfo si = p7.getSignerInfos()[0];
String name = si.getDigestAlgorithmId().getName(); 
```

例外是：

```
Exception in thread "main" java.lang.NoSuchMethodError: sun/security/pkcs/SignerInfo.getDigestAlgorithmId()Lsun/security/x509/AlgorithmId;
        at reflex.Reflex.testPKCS7(Reflex.java:151)
        at reflex.Reflex.main(Reflex.java:43) 
```

当代码在 IBM 机器上执行时会引发此异常，当它在 Windows 机器上执行时它可以正常工作。

对此进行研究，我发现`si.getDigestAlgoritmId()`IBM 机器的返回类不同。对于 IBM 的 java 是`com.ibm.security.x509.AlgorithmId`，对于 java6 是`sun.security.x509.AlgorithmId`. 这两个类都有一个`getName()`方法。

但最奇怪的是，如果我通过反射调用该方法，则不会出现异常，并且它在两种环境中都能正常工作。有人可以回答为什么它会这样工作吗？

我认为解决方案是用反射来做，但我想知道反射它起作用的原因以及它不起作用的正常方式。主要是为了避免以后再犯类似的错误。

在此先感谢并为我的英语不好感到抱歉。

编辑：反射调用：

```
try{
  Class clase = si.getClass();
  Method metodo = clase.getMethod("getDigestAlgorithmId");
  Object result = metodo.invoke(si,null); 
  System.out.println("Result.class=" + result.getClass().getName());
  System.out.println("Result=" + result);
}catch(Exception e){...} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:29:05.653

`SignerInfo.getDigestAlgoritmId()` has different declarations in those two Java versions. If you compile your class with one declaration, it wont work with the other. The type is stored in your `.class` file and has to match at run-time.

If you use reflection, you don't need the declaration of `getDigestAlgoritmId` at compile time. It will work with any declaration, as long as it matches the name and parameters you specified.

Be careful with reflection. `sun.security.x509.AlgorithmId` doesn't seem to be part of public java API. It might differ between versions and vendors. Those two differ only in return types. Who knows what differences are there in other Java implementations. If possible, stick to official Java API.

# storyboard - Corona 中的 StoryBoard API

> ID：11247272
> 
> 赞同：0
> 
> 时间：2012-06-28T14:50:28.217
> 
> 标签：storyboard, coronasdk, scene

我正在尝试在 Corona 中使用 StoryBoard API。但是，我的按钮触摸事件根本不起作用。你能看看我的代码并帮助我吗？

main.lua：

```
 local storyboard = require "storyboard"

     storyboard.gotoScene( "scene1", "fade", 500 ) 
```

场景1：

```
 local storyboard = require( "storyboard" )
     local scene = storyboard.newScene()

     local image

     -- Touch event listener for background image
      local function onSceneTouch( self, event )
  if event.phase == "began" then

    storyboard.gotoScene( "scene2", "fade", 400  )

    return true
        end
      end

     -- Called when the scene's view does not exist:
    function scene:createScene( event )
local screenGroup = self.view

image = display.newImage( "bird.png" )
screenGroup:insert( image )

image.touch = onSceneTouch

print( "\n1: createScene event")
   end

   function scene:enterScene( event )

print( "1: enterScene event" )

  end

    function scene:exitScene( event )

    print( "1: exitScene event" )

   -- remove touch listener for image
image:removeEventListener( "touch", image )

  end

   -- Called prior to the removal of scene's "view" (display group)
   function scene:destroyScene( event )

print( "((destroying scene 1's view))" )
  end

   scene:addEventListener( "createScene", scene )

   scene:addEventListener( "enterScene", scene )

   scene:addEventListener( "exitScene", scene )

   scene:addEventListener( "destroyScene", scene )

   return scene 
```

我的第二个场景也是这样。但是，当我触摸图像时，它不会进入第二个场景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:10:09.563

```
local function onSceneTouch( self, event )
  if event.phase == "began" then
    storyboard.gotoScene( "scene2", "fade", 400  )
    return true
  end
end 
```

在将任何事件分配给图像等之前，在 onSceneTouch 函数中将“ **return true** ”更改为“ **return false ”**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:10:55.820

请记住将事件侦听器添加到您的图像中。

# drop-down-menu - 如何用数据库查询的结果动态填充 Symfony 选择小部件

> ID：11247273
> 
> 赞同：0
> 
> 时间：2012-06-28T14:50:36.160
> 
> 标签：drop-down-menu, symfony1, symfony-1.4

在我的一个表单中，我想要一个下拉列表（sfWidgetFormChoice），其中选项是通过对数据库执行查询来动态生成的。

更准确地说，我将列出我在表中拥有的所有版本。查询看起来像这样：

```
select distinct version from mytable order by version desc 
```

到目前为止我有什么但不起作用：

```
class myForm extends sfForm

$query = "select distinct version from mytable order by version desc";

$versions = Doctrine_Manager::getInstance()->getCurrentConnection()->fetchAssoc($query);

public function configure()

$this->setWidgets(array('version' => new sfWidgetFormChoice(array('choices' => self::$versions)))); 
```

**编辑：**

谢谢你们的回答！非常感激！

无论如何，您的解决方案都基于拥有桌子的模型。我宁愿直接拥有一个 PDO，因为它更快。

在[Symfony 文档](http://www.symfony-project.org/gentle-introduction/1_4/en/08-Inside-the-Model-Layer-Doctrine)中，我在“使用原始 SQL 查询”下找到了我正在寻找的内容。

所以我扩展了我的表格以结束：

```
class myForm extends sfForm
{
  public function getVersions()
  {
    $connection = Doctrine_Manager::connection();
    $query      = "select distinct version from mytable order by version desc";
    $statement  = $connection->prepare($query);
    $statement->execute();
    $resultset = $statement->fetchAll(PDO::FETCH_COLUMN, 0);

    return $resultset;
  }

  public function configure()
  {
    $this->setWidgets(array('version' => new sfWidgetFormChoice(array('choices' => self::getVersions()))));
  }
} 
```

因此，我的下拉列表会正确填充我表中的内容，耶！但我也收到警告：

> 警告：在第 196 行的 lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/lib/database/sfDoctrineConnectionProfiler.class.php 中为 foreach() 提供的参数无效
> 
> 警告：join() [function.join]：在第 141 行的 lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/lib/database/sfDoctrineConnectionProfiler.class.php 中传递的参数无效
> 
> 警告：在第 196 行的 lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/lib/database/sfDoctrineConnectionProfiler.class.php 中为 foreach() 提供的参数无效
> 
> 警告：在第 117 行的 lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/lib/debug/sfDoctrineConnectionProfiler.class.php 中为 foreach() 提供的参数无效

知道我在这里做错了什么吗？？？奇怪的是，下拉菜单看起来不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:00:58.060

使用这样的`table_method`选项[`sfWidgetFormDoctrineChoice`](http://www.symfony-project.org/api/1_4/sfWidgetFormDoctrineChoice)：

在您的表单类中执行以下操作：

```
$this->setWidgets(array('version' => new sfWidgetDoctrineChoice(array('model' => 'Version', 'table_method' => 'getData'))); 
```

然后在`versionTable.class.php`文件中创建一个`getData()`（你可以称之为任何东西）函数，它返回一个对象集合：

```
public function getData() {
    $this->getInstance()->createQuery()
          ->orderBy('version desc')
          ->execute();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T21:08:23.323

您可以使用**sfWidgetFormDoctrineChoice**

```
public function configure(){

$this->widgetSchema['version'] = new sfWidgetFormDoctrineChoice(array('model' => 'YourModel', 'query' => Doctrine::getTable('YurModel')->getYourDataQuery(), 'add_empty' => true));

} 
```

在你的**modelTable.class.php**

```
 public function getYourDataQuery()
    {
          //Your query

            $q = $this->createQuery('a');         

        return $q;
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T14:40:10.843

我终于找到了我自己正在寻找的解决方案。这现在直接访问数据库。我不再使用 FETCH_COLUMN 的原因是这将创建一个数组，其中键是从 0 开始的 Id，值是查询本身返回的任何值。相反，我想让键和值成为查询提供的任何内容。这就是为什么查询现在提供两个相同的列，然后 FETCH_KEY_PAIR 完成其余的工作。

如果其他人对我如何解决这个问题感兴趣，这是我的代码，它可以正确填写下拉列表并且不会导致错误。

```
class myForm extends sfForm
{
  public function getVersions()
  {
    $connection = Doctrine_Manager::getInstance()->getCurrentConnection()->getDBh();
    $query      = "select distinct version as key, version as value from mytable order by version desc";
    $statement  = $connection->prepare($query);
    $statement->execute();
    $resultset = $statement->fetchAll(PDO::FETCH_KEY_PAIR);

    return $resultset;
  }

  public function configure()
  {
    $this->setWidgets(array('version' => new sfWidgetFormChoice(array('choices' => self::getVersions()))));
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T07:56:58.180

谢谢楼主，非常感谢你的解决方案。你拯救了我的一天！

以防万一有类似问题的人。我在使用该解决方案时遇到了 PDO not found 问题。(FatalErrorException: Error: Class '.......\Controller\PDO' not found in ) 原因是： [https](https://groups.google.com/forum/#!topic/symfony2/mR22XXKPQrk) ://groups.google.com/forum/#!topic/symfony2/ mR22XXKPQrk “您在滥用PHP 命名空间。当您在命名空间代码中时，使用 PDO 表示相对于当前命名空间的类名。您有两种解决方案来解决您的问题：使用完全限定的类名，如 \PDO 或添加 use 语句来导入类在当前命名空间中。”

因此，在 PDO:: 前面添加 '\' 后，该解决方案完美运行。

谢谢！

# asp.net - cookie 是否具有相当于主键的功能？

> ID：11247275
> 
> 赞同：3
> 
> 时间：2012-06-28T14:50:42.520
> 
> 标签：asp.net, cookies, webforms

来自非网络背景，我正在为 cookie 的独特性而苦苦挣扎。当我读取和写入一个名为 CustomerCode 的 cookie 时，我在我的 cookie 集合中发现了多个同名的 cookie。如何避免这种情况？

![重复的请求 cookie](../Images/92e2519cb72113c3d4586d4e65724404.png)

![重复响应 cookie](../Images/7d1a57e506400c695837202f27d94707.png)

数据库行使用主键来确保唯一性。cookie 有没有等价物？我正在使用这个[“可重复使用的 Cookie 容器”代码](http://chwe.at/blog/post/2009/01/28/Testable-and-reusable-cookie-access-with-ASPNet-MVC-RC.aspx)来简化对 cookie 的写入：

```
Master.Cookies.CustomerCode = SessionWrapper.CustomerCode; 
```

然后在我的 SessionWrapper 中，我从 cookie 中恢复会话变量

```
public static void InitiateSessionVariablesFromCookies(IAppCookies appCookies) {
    if (SessionWrapper.CustomerCode == null && appCookies.CustomerCode != null) {
        SessionWrapper.CustomerCode = appCookies.CustomerCode;
    }... 
```

**cookie 集合多次包含 CustomerCode，因此错误的值被传递给会话变量。**如果没有看到我的所有代码就很难回答这个问题，请描述设置 cookie 的正确/最佳方法，然后将它们读回会话变量（或包含帮助我的链接）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:27:28.933

If you have different expiration date/times you can get "duplicates".

```
HttpCookie Temp = new HttpCookie("MyName", "123");
Temp.Expires = DateTime.Now.AddMinutes(5);

Response.Cookies.Add(Temp); 
```

This code will create a new cookie each time it runs with the same name and value.

# wpf - 窗口加载时 WPF 关闭窗口验证失败

> ID：11247280
> 
> 赞同：1
> 
> 时间：2012-06-28T14:50:54.717
> 
> 标签：wpf, initialization

`InitializeComponent()`如果任何验证失败，我们可以关闭 WPF 窗口吗？我正在验证文件在窗口加载时是否存在，如果文件不存在，那么如何在加载之前关闭窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:05:51.767

我会推荐一种不同的方法。

我认为这不应该由窗口本身决定，而是由一些业务规则验证对象决定。

使用 WPF 很自然地使用 MVVM 模式，因此验证可以在 ViewModel 或专用验证类中完成。应该决定是否应该打开一个窗口。

如果不满足打开条件，这种方法可以避免实例化、打开和最终关闭一个完全不需要的窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:57:49.320

在显示窗口之前，最好使用 MVVM 并在 ViewModel 中进行验证。如果 viewModel 中的验证正常，则显示窗口，如果验证有一些错误，则不显示窗口。使用 InitializeComponent() 为时已晚，无法确定打开和关闭窗口。

# asp.net-mvc - 在会话或 httpcontext 对象中存储数据有什么区别

> ID：11247288
> 
> 赞同：0
> 
> 时间：2012-06-28T14:51:20.583
> 
> 标签：asp.net-mvc, asp.net-mvc-3, session-state, httpcontext

我正在构建一个 MVC3 应用程序，该应用程序需要存储安全的用户信息，例如用户 ID、用户名、电话和电子邮件。在我的研究中，我看到人们使用 httpcontext 对象以及将用户对象存储在会话状态中。

`Session["User"] = user;`

以前的数据存储在用户对象中。我想知道 Session[""] 和 HttpContext 对象之间的区别是什么，以及这些方法中的任何一个是否是存储这些数据的安全方式。

谢谢你的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:22:39.273

HttpContext.Current.Items 是按请求存储的。其他用户无法访问它。

会话是每个用户存储。由于每个请求的用户 sessionid 都锁定了会话，因此它周围的性能很差，因此重叠的请求在等待对象可用时可能会出现性能问题。

两者都对其他用户不可用，除非在会话的情况下，有人窃取（网络上的嗅探）会话 ID 并劫持该会话。即使这样，除非您有跟踪页面，否则数据也无法访问，但请记住，如果能够窃取该页面并形成身份验证令牌，则邪恶用户可能能够以其他用户身份浏览页面（仅作为一个示例）

# winforms - 父窗口没有收到窗口的消息（关键事件）

> ID：11247289
> 
> 赞同：4
> 
> 时间：2012-06-28T14:51:23.220
> 
> 标签：winforms, qt, winapi, pyqt, windows-messages

我有一个使用 win API 编写的 GUI 应用程序，当用户选择一些命令菜单项时，我们需要启动一个新的 GUI 应用程序。我们决定用 PyQt 编写新的应用程序并使用 Python C Api 启动 PyQt 应用程序。

一切正常，除了我们启动 PyQt 应用程序的**父窗口****在 PyQt 应用程序打开时没有响应某些事件**。一旦我们关闭 PyQt 应用程序，它就会再次开始响应关键事件。

我猜，一旦 PyQt Gui 应用程序启动，消息就不会以某种方式传递到父窗口。

使用 Spy++ 检查我发现以下结果：

```
Receives messages for:
  - ALT key
  - F1, F2 keys
  - Mouse events

Does NOT receive messages for:
  - CTRL key
  - All other Fn keys
  - All letter keys
  - SHIFT, CAPS keys 
```

任何解决此问题的想法将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:50:06.147

我相信您正在尝试做的事情——在一个进程中操作两个单独的 GUI——不受任何主要操作系统的支持。不久前，我搜索了很长时间的方法来做到这一点，除了“不要”之外从未提出任何建议。

我很惊讶丢失的钥匙是你唯一的问题。我建议在你发现更多麻烦之前找到一个不同的解决方案（除非你能找到一些很好的证据证明这至少*应该*有效）。

您是否可以生成一个新进程来运行 Qt 事件循环？由于您已经在主进程中嵌入了 python，这应该相当容易——使用 python 的内置 IPC 来处理进程之间的通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T15:37:51.460

一种解决方案是构建`QtWinMigrate`模块以创建`QWinHost`支持原生 HWND 的父级，但不幸的是它不是 PyQt 发行版的一部分。

你可以在这里找到一些来源：[https](https://github.com/glennra/PyQtWinMigrate) ://github.com/glennra/PyQtWinMigrate 。

[这是Blur studio 在 3ds Max](http://code.google.com/p/blur-dev/wiki/PyQt)中集成 Python 必须要做的。我目前正在[研究 QWinWidget 的 C++ 源代码，](https://qt.gitorious.org/qt-solutions/qt-solutions/source/1b2773642cc630d4772c2c1213e767e243d53517%3aqtwinmigrate/src/qwinwidget.cpp)看看是否可以使用 Win32 调用制定替代解决方案。

# bash - 使用 wget 下载的新文件列表

> ID：11247293
> 
> 赞同：3
> 
> 时间：2012-06-28T14:51:30.210
> 
> 标签：bash, wget

我正在使用 wget 从 FTP 服务器下载新文件。已下载的新文件需要由另一个脚本处理。

```
wget -N -r ftp://server/folder 
```

所以我的问题是：如何获取已下载 wget 的所有文件的列表？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T15:02:22.610

您可以使用 wget 的`-o`标志将标准输出通过管道传输到日志文件。日志文件将与终端的常规输出具有相同的格式，例如：

```
--2012-06-28 17:57:13--  http://cdn.sstatic.net/stackoverflow/img/sprites.png
Resolving cdn.sstatic.net (cdn.sstatic.net)... 67.201.31.70
Connecting to cdn.sstatic.net (cdn.sstatic.net)|67.201.31.70|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 16425 (16K) [image/png]
Saving to: `sprites.png'

0K .......... ......                                     100%  131K=0.1s

2012-06-28 17:57:13 (131 KB/s) - `sprites.png' saved [16425/16425] 
```

如果您通过 egrep 管道传输此文件，`egrep -e "--" logfile.txt`您将仅获得指定下载了哪些文件的行以及时间戳。

```
--2012-06-28 17:57:13--  http://cdn.sstatic.net/stackoverflow/img/sprites.png 
```

如果您愿意，您可以通过管道将其剪切`egrep -e "--" logfile.txt|cut -d ' ' -f 4`以仅获取下载的文件。

```
http://cdn.sstatic.net/stackoverflow/img/sprites.png 
```

您也应该在此处添加错误检查，但这是基本大纲。

# php - PHP文本扫描器如何？

> ID：11247295
> 
> 赞同：2
> 
> 时间：2012-06-28T14:51:49.727
> 
> 标签：php

我想为 PHP 中的类似单词制作一个文本扫描器，但我不知道从哪里开始。扫描仪必须扫描段落并指出在数据库中找到的匹配项或提出有助于使该段落更好的特定单词。

起初我以为我可以使用数据库和搜索引擎脚本，但有人告诉我这不是这样做的方法。

有人可以指出我正确的方向，以便我可以开始工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:12:55.017

在文本中搜索相似性可能是一项艰巨的工作。如果你想搜索段落然后检查数据库中是否有类似的文本，我建议使用“ [tfidf](http://en.wikipedia.org/wiki/Tf%2aidf) ”算法。我在我的论文中使用了它，它确实工作得很好。

但是，没有“主”算法可以满足您的所有需求。这是大量的研究，它总是取决于您将使用的文本的属性。一些关于[NLP](http://en.wikipedia.org/wiki/Natural_language_processing)的知识也可以帮助解决这些问题。

为了只查找单词相似点，我会使用类似[这样](http://nlp.cic.ipn.mx/publications/2006/rcs-2006-morphology.pdf)的东西。希望他的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:29:26.957

I just post another answer because my first one was wrong after the OP comment and it had too many comments.

First you need to extrapolate every single word from your paragraph, using for example:

```
$words_array = explode(" ", $paragraph); 
```

Then you need to remove special characters, slashes, points, commas etc. (maybe using [str_replace()](http://php.net/manual/en/function.str-replace.php)).

In the second step you need to build a Database of synonyms like this:

```
| id | word | synonyms |
| 0  | car  | vehicle  |
| 1  | car  | transport | 
```

Then do something like (for each word of your paragraph):

```
SELECT synonyms FROM table WHERE word="car" 
```

And after this you can fetch the results.

But **this is only the start**. You **NEED** to optimize this method. Example: you can do that when you search vehicle it returns car. The same for transport. That's up to you!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:54:38.620

您是否已经尝试过[similar_text()](http://php.net/manual/en/function.similar-text.php)？它非常易于使用，您可以轻松地将其调整为使用 DB（其中 DB 可能是文本文件、SQL DB 甚至是数组）。

快速示例：

```
// you have to call this function multiple times for each word of the paragraph and for each word of your DB of suggestions
function suggest ($word_of_the_paragraph, $word_taken_from_a_DB) {
    similar_text($word_of_the_paragraph, $word_taken_from_a_DB, $percent);
    if ($percent >= $threshold) {
        echo $word_taken_from_a_DB; // this is the suggested word
    }
} 
```

# jquery - jQuery AJAX MVC3 表单数据不匹配

> ID：11247296
> 
> 赞同：0
> 
> 时间：2012-06-28T14:51:49.730
> 
> 标签：jquery, ajax, asp.net-mvc-3

我正在尝试将数据作为模型从 html 表单发送到 Controller 方法。但是，我不确定 jQuery ajax 帖子如何将此类信息发送到控制器。我提交表单时得到的实际错误是：

> 找不到资源...请求的 URL：/OnCallSchedule

我知道地址是正确的，所以我怀疑传递的数据与传递给控制器​​方法的模型不匹配：

```
[HttpPost]
public JsonResult getSchedule(DateModel dateMod)
{
    ...
    return Json(data);
} 
```

ajax代码是：

```
$(function () {
    $('form').submit(function () {
        alert('@Url.Action("getSchedule")');
        var date = $('form').serialize();

        var jqxhr = $.post('@Url.Action("getSchedule")', date, function (data) {
            alert("success!");
        })
        .success(function() { alert("second success"); })
        .error(function() { alert("error"); })
        .complete(function() { alert("complete"); });

        jqxhr.complete(function() { alert("second complete"); });
    });
}); 
```

第一个警报语句，列出方法的路径，成功触发。之后，错误消息弹出，并且没有其他警报出现。

应该注意的是，我几乎使用了所有策略都尝试过这个，所以我怀疑我没有使用 serialize() 命令正确发送数据。我究竟做错了什么？

我也可能没有正确执行 jqxhr 操作。我唯一能找到可理解示例的地方是 jQuery 文档。我最初使用的是类似的东西：

```
$.ajax({
    url: '/OnCallSchedule/getSchedule',
    type: 'POST',
    dataType: 'json',
    data: $('form').serialize(),
    contentType: 'application/json; charset=utf-8',
    success: function(data) {
        $("#dataTable").html(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:11:41.047

我猜你必须`return false`从表单提交事件处理程序。

```
$(function () {
    $('form').submit(function () {
        ...
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:57:19.570

我发现了我的问题。我正在使用 MVC 样式的表单（即`@Html.BeginForm`），它会自动调用控制器操作。我没有成功颠覆这个功能，所以我写的 ajax 代码毫无意义。我最终取消了 ajax 功能，`@Html.BeginForm`完全支持`@Ajax.BeginForm`. 具体来说：

```
@using (@Ajax.BeginForm("getSchedule",
                        "OnCallControl", 
                        new AjaxOptions{HttpMethod = "Post",
                                        InsertionMode = InsertionMode.Replace,
                                        UpdateTargetId = "data"}))
{
    ...
} 
```

我了解到 MVC 并不总是能很好地处理其框架不支持的功能。

# java - java字符串用单引号替换反斜杠双引号

> ID：11247301
> 
> 赞同：1
> 
> 时间：2012-06-28T14:52:13.370
> 
> 标签：java, string, replace, escaping, quote

这让我很生气，所以如果可以的话，请帮忙......

我有一个 Java 字符串，我想用单引号替换所有反斜杠双引号序列，即使我正在转义我认为必要的内容，replace 命令对字符串没有任何作用。

```
entry.replace("\\\"", "'"); 
```

感谢任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T14:54:04.157

在 Java 中，字符串是不可变的。您对 String 执行的任何操作都会产生新对象。操作后需要重新赋值。以下可能对您有所帮助。

```
entry = entry.replace("\\\"", "'"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:56:09.070

我总是犯的常见错误:)

你应该这样做：`entry = entry.replace("\\\"", "'");`

# c# - 获取静态类的静态方法的MethodInfo

> ID：11247303
> 
> 赞同：13
> 
> 时间：2012-06-28T14:52:17.510
> 
> 标签：c#, visual-studio-2010

我正在尝试在静态类中获取静态方法的 MethodInfo。运行以下行时，我只得到了基本的 4 个方法，ToString、Equals、GetHashCode 和 GetType：

```
MethodInfo[] methodInfos = typeof(Program).GetMethods(); 
```

如何获取此类中实现的其他方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T14:58:12.703

```
var methods = typeof(Program).GetMethods(BindingFlags.Static | BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T15:01:00.877

试试这个方法：

```
MethodInfo[] methodInfos = typeof(Program).GetMethods(BindingFlags.Static | BindingFlags.Public); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-11T08:04:05.103

此外，如果您知道您的静态方法并且可以在编译时访问它，您可以使用`Expression`类来获取`MethodInfo`而不直接使用反射（这可能会导致额外的运行时错误）：

```
public static void Main()
{
    MethodInfo staticMethodInfo = GetMethodInfo( () => SampleStaticMethod(0, null) );

    Console.WriteLine(staticMethodInfo.ToString());
}

//Method that is used to get MethodInfo from an expression with a static method call
public static MethodInfo GetMethodInfo(Expression<Action> expression)
{
    var member = expression.Body as MethodCallExpression;

    if (member != null)
        return member.Method;

    throw new ArgumentException("Expression is not a method", "expression");
}

public static string SampleStaticMethod(int a, string b)
{
    return a.ToString() + b.ToLower();
} 
```

这里传递给 a 的实际参数`SampleStaticMethod`无关紧要，因为只`SampleStaticMethod`使用了主体，因此您可以将`null`默认值传递给它。

# mysql - 在视图mysql中对多选请求的内容求和

> ID：11247306
> 
> 赞同：-1
> 
> 时间：2012-06-28T14:52:21.243
> 
> 标签：mysql, select, view, request

我想从两个不同的选择请求创建视图

```
Table : Dog(name,name2)
Table : cat(name) 
```

两个选择是：

```
select (contactws(" ",name,name2) from Dog
select (name from Cat) 
```

我想要的视图必须包含两个请求的总和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:56:06.400

```
create view your_view as     
  select contactws(" ",`name`,name2) as `name` from Dog 
  union
  select `name` from Cat 
```

如果您使用 ，请确保您的列名相同`union`。如果不是，则为它们取别名。

# c# - 如何在 WPF 页面中打开 powerpoint

> ID：11247308
> 
> 赞同：1
> 
> 时间：2012-06-28T14:52:25.083
> 
> 标签：c#, wpf, visual-studio, ms-office, powerpoint

我正在尝试在我的 WPF 程序中打开一个 PowerPoint。我希望将它嵌入到我的页面中，并且还希望对演示文稿使用自定义控件（而不是默认用户栏）。

```
string FileName = "filePath";
Microsoft.Office.Interop.PowerPoint.Application application = new PowerPoint.Application();
application.SlideShowEnd += new Microsoft.Office.Interop.PowerPoint.EApplication_SlideShowEndEventHandler(powerpnt_SlideShowEnd);
Microsoft.Office.Interop.PowerPoint.Presentation presentation = application.Presentations.Open2007(FileName, Microsoft.Office.Core.MsoTriState.msoTrue, Microsoft.Office.Core.MsoTriState.msoFalse, Microsoft.Office.Core.MsoTriState.msoFalse, Microsoft.Office.Core.MsoTriState.msoTrue);
Microsoft.Office.Interop.PowerPoint.SlideShowSettings sst = presentation.SlideShowSettings;
sst.ShowType = Microsoft.Office.Interop.PowerPoint.PpSlideShowType.ppShowTypeSpeaker;
sst.Run(); 
```

代码正在运行，我可以打开 PPT 演示文稿，但是，它是全屏的，我找不到处理窗口的方法......

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:38:22.080

要将演示文稿显示到 wpf 窗口中，您需要一个组件。不知道有没有...

通常方法是相反的：您将应用程序嵌入到 PowerPoint 中，创建一个插件（请参阅 Office 应用程序插件），然后您还可以自定义默认 PowerPoint 界面删除控件并显示您的。

您也可以使用 wpf。

# c# - 如何在 rdlc 报告中动态设置边框

> ID：11247309
> 
> 赞同：0
> 
> 时间：2012-06-28T14:52:34.720
> 
> 标签：c#, visual-studio-2010, report, rdlc

我使用 rdlc 报告生成旅游表。

我想在一些记录（不是所有记录）中设置底部边框。

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:33:21.403

不知道你的一些记录到底是什么意思？

如果您基于某些分组显示记录，那么如果您向组页脚添加边框，那么只有在组页脚之前的那些记录之后才会出现边框。

# android - android均匀间隔视图

> ID：11247312
> 
> 赞同：2
> 
> 时间：2012-06-28T14:52:46.500
> 
> 标签：android, views

嗨，我正在尝试创建一个联赛表，其中我有几个不同的观点问题是俱乐部的名称会根据名称的大小将其余观点推到上面是否有一种方法可以对齐所有内容，使其对齐向上和/或限制名称的长度？

这就是我要找的东西

```
1 Name.. 0 0 0 0 0 0 0
2 Name.. 0 0 0 0 0 0 0 
3 Name.. 0 0 0 0 0 0 0 
```

这是我在做什么

```
6 Name 0 0 0 0 0 0 0
7 Name 0 0 0 0 0 0 0 
8 Name 0 0 0 0 0 0 0
9 Name 0 0 0 0 0 0 0
10 Name 0 0 0 0 0 0 0 
11 Name 0 0 0 0 0 0 0 
```

这是我的布局

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:weightSum="1" 
    android:background="@color/white">

    <TextView
        android:id="@+id/position"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"

        android:layout_gravity="center_horizontal"
         android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/blue"
         />

    <TextView
        android:id="@+id/TeamName"
        android:layout_width="70dp"
        android:layout_height="wrap_content"
        android:ellipsize="end"
        android:lines="1"
        android:paddingLeft="5dp"
        android:text="Team Name"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold" 
        android:textColor="@color/blue"
         android:gravity="left"/>

    <TextView
        android:id="@+id/played"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium"
         android:textColor="@color/blue" 
          android:gravity="center"/>

    <TextView
        android:id="@+id/won"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium"
         android:textColor="@color/blue" 
          android:gravity="center"/>

    <TextView
        android:id="@+id/drawn"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" 
         android:textColor="@color/blue"/>

    <TextView
        android:id="@+id/lost"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/drawn"
        android:layout_alignBottom="@+id/drawn"
        android:layout_toRightOf="@+id/drawn"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" 
         android:textColor="@color/blue"
          android:gravity="center"/>

    <TextView
        android:id="@+id/goalsFor"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium"
         android:textColor="@color/blue"
          android:gravity="center" />

    <TextView
        android:id="@+id/goalsAgainst"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" 
         android:textColor="@color/blue"
          android:gravity="center"/>

    <TextView
        android:id="@+id/difference"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium"
         android:textColor="@color/blue"
          android:gravity="center" />

    <TextView
        android:id="@+id/points"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium"
         android:textColor="@color/blue"
          android:gravity="center" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:58:58.087

如果可以使用线性布局，试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:weightSum="1" >

    <TextView
        android:id="@+id/position"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/TeamName"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:ellipsize="end"
        android:lines="1"
        android:paddingLeft="10dp"
        android:text="Team Name"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/played"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/won"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/drawn"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/lost"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/drawn"
        android:layout_alignBottom="@+id/drawn"
        android:layout_toRightOf="@+id/drawn"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/goalsFor"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/goalsAgainst"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/difference"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/points"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".13"
        android:paddingLeft="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

![在此处输入图像描述](../Images/dbf1cfc31209b273ffc58a52c011333f.png)

# dvcs - Fossil：在回购关闭时识别变化

> ID：11247314
> 
> 赞同：0
> 
> 时间：2012-06-28T14:52:47.810
> 
> 标签：dvcs, fossil

我知道，我应该只在打开存储库时更改项目中的文件。但我现在试图看看当我在 repo 关闭时更改文件时会发生什么，因为我经常会这样做，因为我会忘记打开 repos。很不方便...

现在我看到会发生什么：更改未被识别。进行提交时，我收到“没有任何改变”的消息……这是不正确的。

我可以做些什么来让化石识别错过的变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:05:04.030

你为什么关闭存储库？当您这样做时`fossil open`，fossil 将尝试部署最新版本。也许它已经覆盖了你的文件……</p>

`open .... --keep`如果你不想损害你的工作目录，你应该使用。

作为与 git 的比较（似乎是你的背景）：

*   在 git 中，每个工作目录都有自己的`.git`文件夹。同一个存储库的多个工作目录通常是硬链接的。
*   在化石中，每个工作目录都包含一个名为`_FOSSIL_`或可能`.fossil`取决于您的版本的文件。它既包含指向存储库（对象数据库）的指针，也包含特定于工作目录的数据（您称之为 HEAD、存储、未提交的添加/删除/重命名）。`close`将删除该文件。所以，用 git 术语来说，就像你做了`git clone --bare . some_other_folder.git`然后 recursive `rmdir .git`。您仍然在某处拥有项目历史记录，但有关您的工作树的所有信息都丢失了。

# html - 谁能帮我在网站上的照片上放一张空白图片？

> ID：11247317
> 
> 赞同：0
> 
> 时间：2012-06-28T14:53:24.410
> 
> 标签：html, css

如果右键单击，客户端不希望下载照片。我解释说，如果有人想要这张照片，他们可以从网站上得到它，但他想让新手用户更难下载图像。因此，如果您右键单击，您将获得空白的“照片”，而不是下方的实际照片。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T14:54:52.080

使用逻辑：

1.  将要保护的图像作为背景图像放在 <`div>`或其他块级元素中
2.  在. `<img>`_ `<div>`确保它覆盖整个图像/div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:59:59.477

一个快速的谷歌已经为我抛出了这个，希望它可以帮助你。

4) 使用表格阻止下载：“右键单击”图像是查找、复制和/或下载图像的快速快捷方式。对于那些拥有自己网站的人，可以通过将图像作为表格背景来防止这种行为。代码在 CSS 中相当简单，使用“background-image:url”样式：

```
<table style="background-image:url('image.jpg');width:Wpx;height:Hpx"><tr><td></td></tr></table> 
```

另一种方法可能是，

5) Javascript 右键单击​​禁用：防止右键单击图像的另一个措施是使用 Javascript。这些简短的脚本会覆盖浏览器的右键单击。与其重新创建一个已在互联网上以各种形式广泛发布的脚本，我将把它留给读者在谷歌搜索 Javascript 禁用右键单击。然而，我会提到 Javascript 是客户端的，诸如此类的脚本不仅会影响网站的可用性，而且还可以通过关闭 Javascript 来轻松禁用。

我从这个网站获取了上面的信息 --- [http://www.naturefocused.com/articles/image-protection.html](http://www.naturefocused.com/articles/image-protection.html) ---

如果他们真的想要的话，人们可以直接打印图像并将其涂上油漆，尽管我很害怕:(

谢谢，

杰克。

# xml - XSLT 在 ID 相同时合并数据

> ID：11247326
> 
> 赞同：1
> 
> 时间：2012-06-28T14:54:03.610
> 
> 标签：xml, xslt

我在使用 XML 并对其应用多个条件时遇到了一些问题。我有一个如下所示的输入 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<results xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ResultsType">
    <result>
        <resultSets>
            <resultSet>
                <row>
                    <column1>11111</column1>
                    <column2>0</column2>
                    <column3>imageId/111111</column3>
                    <column4>2012-04-03T10:11:22.187</column4>
                </row>
                <row>
                    <column1>11111</column1>
                    <column2>2</column2>
                    <column3>imageId/111112</column3>
                    <column4>2012-04-03T10:11:22.187</column4>
                </row>
                <row>
                    <column1>11111</column1>
                    <column2>2</column2>
                    <column3>imageId/111113</column3>
                    <column4>2012-04-03T10:11:22.187</column4>
                </row>
                <row>
                    <column1>22222</column1>
                    <column2>0</column2>
                    <column3>imageId/222222</column3>
                    <column4>2012-04-03T10:11:22.187</column4>
                </row>
                <row>
                    <column1>22222</column1>
                    <column2>2</column2>
                    <column3>imageId/222223</column3>
                    <column4>2012-04-03T10:11:22.187</column4>
                </row>
            </resultSet>
        </resultSets>
    </result>
</results> 
```

但是我希望它看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<results xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ResultsType">
    <result>
        <row>
            <id>11111</id>
            <lagrgeImage>imageId/111111</lagrgeImage>
            <smallImage>imageId/111112</smallImage>
            <smallImage>imageId/111113</smallImage>
        </row>
        <row>
            <id>22222</id>
            <lagrgeImage>imageId/222222</lagrgeImage>
            <smallImage>imageId/222223</smallImage>
        </row>
    </result>
</results> 
```

如您所见，有两个过滤条件：

如果 column2 = 0 则输出中需要 largeImage 标记，但是 column2 = 2 则输出中需要 smallImage 标记。

**更新**

下面的两个示例都运行良好，但是它们都在根目录中包含了意想不到的命名空间。我得到的输出是：

```
<?xml version="1.0" encoding="utf-8"?>
<results xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ResultsType">
    <result>
        <row>
            <id>11111</id>
            <largeImage>imageId/111111</largeImage>
            <smallImage>imageId/111112</smallImage>
            <smallImage>imageId/111113</smallImage>
        </row>
        <row>
            <id>22222</id>
            <largeImage>imageId/222222</largeImage>
            <smallImage>imageId/222223</smallImage>
        </row>
    </result>
</results> 
```

如何`xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ResultsType"`从上述输出中删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:29:34.527

如果您使用的是 XSLT2.0，则可以使用**for-each-group**函数。

```
<xsl:for-each-group select="row" group-by="column1"> 
```

假设您的上下文是**resultSets**这将按**column1**中的“id”对行进行分组。然后可以按如下方式获得当前分组密钥：

```
<xsl:value-of select="current-grouping-key()"/> 
```

要获取组中的各个行，将它们转换为 largeImage 或 smallImage，您可以这样做

```
<xsl:apply-templates select="current-group()" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns="http://www.castiron.com//response">

   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="resultSets">
      <xsl:apply-templates select="@*|node()"/>
   </xsl:template>

   <xsl:template match="resultSet">
      <xsl:apply-templates select="@*"/>
      <xsl:for-each-group select="row" group-by="column1">
         <row>
            <id><xsl:value-of select="current-grouping-key()"/></id>
            <xsl:apply-templates select="current-group()" />
          </row>
      </xsl:for-each-group>
   </xsl:template>

   <xsl:template match="row[column2='0']">
      <largeImage><xsl:value-of select="column3" /></largeImage>
   </xsl:template>

   <xsl:template match="row">
      <smallImage><xsl:value-of select="column3" /></smallImage>
   </xsl:template>

   <xsl:template match="@*|node()[not(self::*)]">
      <xsl:copy> 
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="*">
      <xsl:element name="{local-name()}"> 
         <xsl:apply-templates select="@*|node()"/>
      </xsl:element>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<results xmlns="http://www.castiron.com//response">
   <result>
      <row>
         <id>11111</id>
         <largeImage>imageId/111111</largeImage>
         <smallImage>imageId/111112</smallImage>
         <smallImage>imageId/111113</smallImage>
      </row>
      <row>
         <id>22222</id>
         <largeImage>imageId/222222</largeImage>
         <smallImage>imageId/222223</smallImage>
      </row>
   </result>
</results> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:15:55.397

在 XSLT 1.0 中，（IMO）最直接的解决方案是首先找到所有唯一 ID。这可以通过查找没有出现在任何前面的兄弟姐妹中的 ID 来实现（换句话说，对于每个 ID，您会找到包含该 ID 的第一个元素）。

一旦你有了一个唯一的 ID，你就可以`<xsl:for-each>`覆盖所有`<row>`具有相同 ID 的兄弟姐妹（包括当前元素）。在下面的代码中，我使用了一个`<xsl:choose>`元素来检查并根据值`<column2>`插入一个`<largeImage>`or元素。`<smallImage>``<column2>`

这可以满足您的需求：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/results">
        <results>
            <xsl:copy-of select="@*"/>
            <result>
                <xsl:apply-templates select="result"/>
            </result>
        </results>
    </xsl:template>

    <xsl:template match="/results/result/resultSets/resultSet/row">
        <xsl:if test="not(column1 = preceding-sibling::row/column1)">
            <row>
                <id><xsl:value-of select="column1"/></id>
                <xsl:for-each select="../row[column1 = current()/column1]">
                    <xsl:choose>
                        <xsl:when test="column2 = '0'">
                            <largeImage><xsl:value-of select="column3"/></largeImage>
                        </xsl:when>
                        <xsl:when test="column2 = '2'">
                            <smallImage><xsl:value-of select="column3"/></smallImage>
                        </xsl:when>
                    </xsl:choose>
                </xsl:for-each>
            </row>
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:10:00.963

要吐出“大图像”和“小图像”元素（在 xsl for 循环中），请尝试：

> ```
> <xsl:if test="/results/result/resultSets/resultSet/row/column2='0'">
> <largeImage>
> <xsl:value-of select="/results/result/resultSets/resultSet/row/column3"/>
> </largeImage>    
> </xsl:if> 
> ```

# javascript - JavaScript 中 Allman 风格的危险含义

> ID：11247328
> 
> 赞同：12
> 
> 时间：2012-06-28T14:54:09.010
> 
> 标签：javascript, code-formatting

我不记得在哪里，但最近我传递了一条评论，其中用户告诉 1TBS 在 JavaScript 中比 Allman 更受欢迎，并说 Allman 在 JavaScript 中具有危险的含义。

这是一个有效的陈述吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-28T14:55:55.937

`return`不能有`LineTerminator`这样的：

```
return
{

}; 
```

被视为`return;`(return `undefined`) 而不是`return {};`(return an object)

有关更多信息，请参阅规则[`Automatic Semicolon Insertion (ASI)`](http://ecma-international.org/ecma-262/5.1/#sec-7.9.1)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T15:00:51.843

这是一个有效的陈述。

因为 JavaScript 的引擎有所谓的 ASI（自动分号插入），它在必要时在行返回时插入分号。“如有必要”含糊不清；有时它有效，有时无效。见[规则](http://ecma-international.org/ecma-262/5.1/#sec-7.9.1)。

因此，正如其他答案中所说：

```
return
{
};

// Is read by the JavaScript engine, after ASI, as:
return; // returns undefined
{ // so this is not even executed
}; 
```

所以不推荐用于`return`语句。

但是，如果您的指南推荐使用 Allman 样式进行函数声明，那就完全没问题了。我知道有些是这样的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T14:58:47.267

我认为这取决于声明。例如，如果左大括号在新行上，则返回语句可能会被破坏。 [更多信息在这里](http://encosia.com/in-javascript-curly-brace-placement-matters-an-example/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T14:58:56.533

```
return {
    a: "A",
    b: "B"
};

// vs.

return // Semicolon automatically inserted here! Uh oh!
{
    a: "A",
    b: "B"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-02T10:25:35.900

你可以使用 Allman 或 Allman-8 风格，只要你记住一个带有关键字`return`和的特殊情况`throw`。

**`return``throw`**由于[ASI 规则](https://262.ecma-international.org/5.1/#sec-7.9.1)对`throw`and`return`语句有特殊例外，因此在 JavaScript 中将**对象字面量与关键字****或****换行符分开是行不通的：**

> 3.  当程序从左到右解析时，遇到某个语法产生式允许的记号，但产生式是受限制的产生式，并且该记号将是紧跟注释之后的终端或非终端的第一个记号“<strong>[no LineTerminator here]”在受限产生式中（因此这样的记号被称为**受限记号**），并且 **受限记号与前一个记号至少相隔一个 LineTerminator，然后在前面自动插入分号受限令牌。**

和

> **注意**以下是语法**中唯一受限制的产生**
> 式： [...]
> **ReturnStatement** :
> `return` **[no LineTerminator here]** *Expression* ;
> **ThrowStatement** :
> `throw` **[这里没有 LineTerminator]** *表达式*；

（也有其他受限制的产品，但它们不支持大括号，因此它们对于 Allman 风格并不重要。）

在实践中，**这并不像您期望的那样工作**：

```
return
{
        status: "successful",
        user:
        {
               id: "9abf38a3-c2f5-4159-a1be-0eccbc1b2349",
               label: "John Doe",
        },
}; 
```

因为**它将被解释为**（注意返回后的分号！）

```
return;
{
        status: "successful",
        user:
        {
               id: "9abf38a3-c2f5-4159-a1be-0eccbc1b2349",
               label: "John Doe",
        },
}; 
```

因此，您必须使用语法

```
const response =
{
        status: "successful",
        user:
        {
               id: "9abf38a3-c2f5-4159-a1be-0eccbc1b2349",
               label: "John Doe",
        },
};
return response; 
```

或者

```
return {
        status: "successful",
        user:
        {
               id: "9abf38a3-c2f5-4159-a1be-0eccbc1b2349",
               label: "John Doe",
        },
}; 
```

反而。

我个人认为在任何情况下命名返回的结构都更具可读性，所以我使用它。我还在任何地方都使用 Allman-8，这实际上意味着您使用 8 个空格宽度的制表符并使用单个制表符而不是 1 个或多个空格来缩进所有内容。

理论上，有人也可以写

```
throw
{
        status: "error",
        code: 12,
        details: localvar,
}; 
```

`throw`这也将失败，因为由于上述 ASI 规则，分号将立即插入关键字之后。在现实世界中，每个人似乎都在写`throw new ...`or `throw localvar`。

我不知道这些异常的历史，但我只能假设这是一些历史事故，由于现有的现实世界代码取决于这种事故，因此无法再修复。我看不到任何这种自动分号实际上有益的结构，所以我认为这只是历史规范中的一个错误。（后面的代码`return`或`throw`不能合理地以对象文字开头，因此无论如何它都不能与插入的分号一起工作。）

# google-analytics - 谷歌分析 使用 API 我如何知道用户的实际 url 来自哪里？

> ID：11247329
> 
> 赞同：0
> 
> 时间：2012-06-28T14:54:17.047
> 
> 标签：google-analytics

我正在使用以下内容查看我的 Google 分析结果：

[http://ga-dev-tools.appspot.com/explorer/?csw=1](http://ga-dev-tools.appspot.com/explorer/?csw=1)

我已经启动并运行正常，但是当我使用 ga:referralPath 或 ga:userdefinedvalue 它说（未设置）

我希望能够看到用户来自哪里，例如：

如果用户进入 dove 网站并想要购买产品，他们点击立即购买按钮，该按钮为他们提供零售商，当他们点击零售商时，他们将被带到零售商网站上的添加到购物篮 - 我的 UA 代码是.

我希望能够看到它们来自鸽子站点 - 这可能吗？

顺便说一句，这里有一个很好的链接来展示如何查看完整的网址（但目前我正在获取（未设置））但如果有人知道如何让它工作，那将是完美的：

[http://www.sebastienpage.com/2009/05/06/google-analytics-trick-see-the-full-referring-url/](http://www.sebastienpage.com/2009/05/06/google-analytics-trick-see-the-full-referring-url/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:00:49.287

将 GA 代码留在网站上一段时间后，我们开始返回收入结果，在电子商务部分的 ga:source 和 ga:refferalPath 中，我可以看到我预期的结果 - 改变的一件事是实施我们的 ga 脚本的零售商告诉我们，他们收到了 SSL 证书错误——因为一旦添加了这个，我们的服务器上就没有一个，我们似乎可以很好地获取所有数据。

# ruby-on-rails - ActiveRecord before_save 过滤器可以在不停止事务的情况下停止保存吗？

> ID：11247330
> 
> 赞同：3
> 
> 时间：2012-06-28T14:54:19.480
> 
> 标签：ruby-on-rails

before_save 过滤器有没有办法在不停止事务的情况下停止整个保存？我想要做的是拥有我的模型的“样本”版本，用户可以与之交互并保存，但更改本身从未真正保存。当我调用@model.update_attributes 时，以下将停止事务并（自然）返回 false：

```
before_filter :ignore_changes_if_sample
def ignore_changes_if_sample
  if self.sample?
    return false
  end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:13:57.313

这正是这里发生的事情。如果您查看您的 SQL，您应该看到 BEGIN 和 COMMIT，它们之间没有任何内容。before_save 不会停止交易；它只是通过返回 false 来防止记录被保存。

为了更普遍地回答您的问题，无法持久的记录不会停止事务，除非它们也引发异常。异常触发 ROLLBACK 阻止事务的任何部分被提交。因此，即使您在此处返回 false，更大的总体事务也应该继续正常进行。

[您可以在ActiveRecord::Transactions](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)文档中阅读有关事务以及 Rails 如何使用它们的更多信息。

# ios - iPad Safari 主屏幕网站卡在 Facebook 登录

> ID：11247333
> 
> 赞同：3
> 
> 时间：2012-06-28T14:54:25.620
> 
> 标签：ios, facebook, ipad, safari, facebook-javascript-sdk

我有一个使用 JavaScript SDK 的网站，我有一个 facebook 登录按钮，它调用`FB.login()`打开一个新选项卡供用户登录。

该网站针对 iPad 进行了优化，我为该网站制作了一个主屏幕条目，以便可以全屏查看，就像本文提到的那样：http: [//www.viaboxxsystems.de/html-fullscreen-apps-为 ipad](http://www.viaboxxsystems.de/html-fullscreen-apps-for-the-ipad)

我的问题是，只有在主屏幕启动的全屏版本中，当我单击登录按钮时，要么看到白屏，要么得到登录详细信息屏幕（但在这种情况下，也单击“登录”导致白屏），因此我走到了死胡同。

如何使 Facebook 登录通过并成功重定向回我的网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:45:28.840

[苹果](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)对此的文档说，

> 当您使用此独立模式时，Safari 不用于显示 Web 内容 — 具体来说，屏幕顶部没有浏览器 URL 文本字段或屏幕底部的按钮栏。

在我看来，这也可能会影响打开弹出窗口的能力。如果是这种情况，您可以改用服务器端身份验证流程。

# c - 如何使用 ## 运算符通过宏扩展制作字符串或字符常量

> ID：11247348
> 
> 赞同：1
> 
> 时间：2012-06-28T14:55:15.510
> 
> 标签：c, macros, token, c-preprocessor, stringification

我正在尝试执行以下操作：

```
#define mkstr(str) #str
#define cat(x,y) mkstr(x ## y)

int main()
{

   puts(cat(\,n));
   puts(cat(\,t))
   return 0;
} 
```

这两个`puts`语句都会导致错误。因为`\n`两者`n`都是预处理器令牌，我希望在这些`puts`语句中正确输出它们，但是 Bloodshed/DevC++ 编译器给了我以下错误：

> 24:1 G:\BIN\cLang\macro2.cpp 粘贴“\”和“n”未提供有效的预处理令牌

我失踪的事实在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:13:33.677

预处理器使用需要 C-ish 输入的标记器。因此，即使在进行字符串化时，您也不能将随机垃圾传递给宏。==> 不要让你的预处理器伤心——如果你经常这样做，它会吃掉小猫。

实际上，没有办法`"\n"`通过编译时连接来创建，因为`"\\" "n"`它是一个由两个文字组成的字符串，即“\n”。

# git - 清理前还原？

> ID：11247349
> 
> 赞同：1
> 
> 时间：2012-06-28T14:55:20.737
> 
> 标签：git, smartgit

我一直在使用 Aptana 提交所有更改，并且有一段时间没有打开 SmartGit。当我今天这样做时，它提示我“清理”我的存储库

我现在找不到四月的任何提交...

有没有办法恢复最近的更改？

![查看所有提交后](../Images/59ce74784de88c70a5187cf9245b2933.png)

蓝色的提交实际上是不久前提交的。我想回到他最后一个红色的“$search_col and $search_val = 0....”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:14:49.673

清理几乎不能删除提交（除非它们不再在 ref-log 文件 .git/logs 中注册）。在您的情况下，指向*HEAD*提交的指针可能已丢失。您可以使用 SmartGit 的 Log 并在此处调用*Query|Load All Commits*来显示所有提交。如果实际上有一个*HEAD*提交而没有分配任何*ref*，您可以使用*Branch|Add Branch*来分配一个*ref*，从而使其再次可用于标准 Git 命令。

# objective-c - 如何将 C 数组传递给目标 C 函数？

> ID：11247350
> 
> 赞同：1
> 
> 时间：2012-06-28T14:55:27.963
> 
> 标签：objective-c, c

我不熟悉 C。如何将 C 数组传递给 Objective-C 函数？

我实际上需要一个将 NSArray 转换为 C 数组的类函数的示例。这是我到目前为止所拥有的：

```
+ (NSArray *)convertArray:(NSString*)array { //I don't think this is correct: the argument is just a NSString parameter and not an array

    NSMutableArray * targetArray = [NSMutableArray array];

    for (i = 0; i < SIZE; i++) //SIZE: I dunno how to get the size of a C array.
    {
        [targetArray addObject: [NSString stringWithString:array[i]];
    }
    return targetArray;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:58:55.557

有几种方法。

如果你的数组大小在编译时是固定的，你可以使用 C99`static`修饰符：

```
-(void) doSomething:(NSString *[static 10]) arg
{

} 
```

如果没有，您必须将其作为两个单独的参数传递。一个作为指向它的第一个元素的指针，第二个作为它的长度：

```
-(void) doSomething:(NSString **) arg count:(size_t) count
{

} 
```

现在您可以像访问您可能拥有的任何其他数组一样访问您的变量。

因为您正在处理一个由 Objective-C 对象组成的 C 数组，所以您实际上可以使用`NSArray`' 内置构造函数将 C 数组转换为`NSArray`：

```
NSArray *result = [NSArray arrayWithObjects:arg count:count]; 
```

# iphone - 使用客户端 MAC 地址对用户进行身份验证？

> ID：11247352
> 
> 赞同：0
> 
> 时间：2012-06-28T14:55:32.987
> 
> 标签：iphone, web, mac-address

这个问题不是语言感知的。

我想知道如果我的网站（Java、PHP、Coldfusion...）使用的是动态 IP，我如何识别返回用户。

为什么？我的网络应用程序的许多用户使用 iPhone（带有 3G 网络）进行访问。IP 每次都会改变，所以我总是将他们视为“新”用户。

我知道它不太可能在网页中跟踪 MAC 地址，但是....对于这种常见问题有什么解决方案？

也许一个合适的 iPhone 应用程序？;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:58:13.447

为什么不像其他人一样使用cookies呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:21:04.153

正如其他人所说，您可以使用 cookie 更轻松地获得您想要的东西......

而且，阅读您的问题和目的，我不确定如果用户通过 wifi 使用 iPhone 并浏览到您的网站，然后通过 3G 再次返回，MAC 地址不会改变......我认为 MAC地址对于设备而言不是唯一的，而是对于其中的单个硬件组件而言是唯一的：这意味着 iPhone 可以有一个用于 wifi 硬件的 MAC 和一个用于 3g 硬件的 MAC……如果它像我的 powerMac 一样工作……我可以看到我的电脑有一个用于以太网的mac地址和一个用于wifi的mac地址...

但我不是硬件专家，所以（所有读者），也请将此答案视为一个问题，如果有任何网络专家在线......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:09:45.720

找到原始请求机器的 MAC 地址是不太可能的。您应该使用 Cookie 来跟踪用户。

[您可以在此处](http://en.wikipedia.org/wiki/MAC_address)找到有关 MAC 地址的更多信息。

> 媒体访问控制地址（MAC 地址）是分配给网络接口的唯一标识符，用于物理网段上的通信。MAC 地址用于多种网络技术和大多数 IEEE 802 网络技术，包括以太网。从逻辑上讲，MAC 地址用于 OSI 参考模型的媒体访问控制协议子层。

# c++ - 我可以依赖一个新的布尔值被初始化为假吗？

> ID：11247361
> 
> 赞同：6
> 
> 时间：2012-06-28T14:55:55.717
> 
> 标签：c++, boolean, portability, language-lawyer, default-constructor

在 C++ 中，我可以依赖一个新的 bool 在所有情况下都初始化为 false 吗？

```
bool *myBool = new bool();

assert(false == *myBool);  // Always the case in a proper C++ implementation? 
```

（更新代码以反映评论。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T15:15:52.483

在这种情况下，是的；但原因很微妙。

括号中的`new bool()`原因*value-initialisation*，将其初始化为`false`. 没有它们，`new bool`将改为执行*default-initialisation*，这将使其具有未指定的值。

就个人而言，我宁愿看看`new bool(false)`是否可能，以明确它应该被初始化。

（这是假设有充分的理由使用`new`；即使有，它也应该由智能指针管理——但这超出了这个问题的范围）。

注意：这回答了我阅读时的问题；在写完另一个答案后，它已被编辑以改变其含义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T15:32:25.307

bool 的三种相关初始化、零初始化、默认初始化和值初始化分别意味着 bool 被初始化为 false，bool 具有不确定值，bool 被初始化为 false。

所以你只需要确保你得到零或值初始化。如果在没有指定初始化程序的情况下初始化具有自动或动态存储持续时间的对象，那么您将获得默认初始化。要获得值初始化，您需要一个空的初始化程序，或者`()`或`{}`。

```
bool b{}; // b is value-initialized
bool *b2 = new bool{}; // *b2 is value-initialized

class foo {
    bool b;
    foo() : b() {}
};
foo f; // // f.b is value-initialized 
```

对于具有静态或线程本地存储持续时间且没有初始化程序的布尔值，您将获得零初始化。

```
static bool b; // b is zero-initialized
thread_local bool b2; // b2 is zero-initialized 
```

获得零初始化的另一种情况是，如果 bool 是没有用户提供的构造函数的类的成员，并且隐式默认构造函数是微不足道的，并且类实例是零初始化或值初始化的。

```
class foo {
    bool b;
};
foo f{}; // f.b is zero-initialized
thread_local foo f2; // f2.b is zero-initialized 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T14:57:22.360

不，C++ 中没有自动初始化。您的新 bool 将被“初始化”为当时内存中的任何内容，这更有可能是真的（因为任何非零值都是真的），但不能保证任何一种方式。

您可能会很幸运并使用与您配合得很好的编译器，并且总是将 false 值分配给新的布尔值，但这将取决于编译器，而不是基于任何语言标准。

您应该**始终**初始化变量。

# django - Django 首选项/布尔字段

> ID：11247363
> 
> 赞同：0
> 
> 时间：2012-06-28T14:55:59.350
> 
> 标签：django, django-models

我有一个模型需要相当多的 BooleanFields，它们可以以某种方式被视为偏好。我目前正在做的是将所有字段添加到模型本身并将标签硬编码到 HTML。所以我的模型看起来有点像这样：

```
 class Project(models.Model):
  ...some fields...
  Check1=models.BooleanField()
  ....many of these...
  Check19=models.BooleanField() 
```

我觉得这是一种非常愚蠢的做法，我正在寻找一种更 Pythonic 的解决方案。也许ManyToMany字段？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:08:24.910

如果它们都是同一类型，则将其设为 M2M 可能更有意义，例如`phone1`、`phone2`、`phone3`等更适合`phones`指向`Phone`模型。

但是，由于这些是布尔值，我怀疑情况是否如此。模型上有很多字段不是问题，如果它们在那里都有意义的话。事实上，当它们彼此没有关系时，将它们抽象出来是*错误的。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:19:39.287

我宁愿给布尔字段一些有意义的名称，并将 verbose_name 放在字段描述中，例如

```
class Project(models.Model):
    # ...
    featured = models.BooleanField(_("Featured"))
    published = models.BooleanField(_("Published"))
    # ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:06:02.340

看看[python的禅意](http://www.python.org/dev/peps/pep-0020/)：

尤其：

*   简单胜于复杂。
*   复杂胜于复杂。
*   平面优于嵌套。

# android - 进度对话框不必要的显示

> ID：11247364
> 
> 赞同：0
> 
> 时间：2012-06-28T14:56:05.640
> 
> 标签：android

嗨，我做了一个活动，比如

```
....
<TableRow >
    <TextView
        android:text="@string/userName"
        android:width ="100dp" />

    <EditText
        android:id="@+id/txt_userName"
        android:width="100dp"
        android:hint="@string/userName" />
</TableRow>

<TableRow>
    <TextView
        android:text="@string/password" />

    <EditText
        android:id="@+id/txt_password"
        android:inputType="textPassword"
        android:hint="@string/password" />
</TableRow>
    .... 
```

这是我的课

```
public class LoginActivity extends Activity {
    private boolean rememberpassword = false;
    ProgressDialog dialog = null;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        Button btn_logIn = (Button)findViewById(R.id.btn_signIn );
        btn_logIn.setOnClickListener(new OnClickListener() {            
            @Override
            public void onClick(View view) {
                showProgressDialog();
                getUserCredentials();           
            }           
        }); //end of anonymous class
    } //end of onCreate

    private void showProgressDialog() {

        dialog = new ProgressDialog(this);
        dialog.setMessage("Please Wait. Your authentication is in progress");
        dialog.setButton("Cancel", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {                
                dialog.dismiss();               
            }
        }); //end of anonymous class    
    } //end of showProgressDialog()

    private void getUserCredentials() {

        EditText txt_userName = (EditText) findViewById(R.id.txt_userName);
        String userName = txt_userName.getText().toString();

        EditText txt_password = (EditText) findViewById(R.id.txt_password);
        String password = txt_password.getText().toString();

        if (userName != null && !userName.trim().equals("") && password != null && !password.trim().equals("")) {           
            dialog.show();
            callWebServide(userName, password);         
        } else if (userName == null) {          
            Toast.makeText(this, "User Name is required", Toast.LENGTH_LONG).show();        
        } else if (password == null && password.trim().equals("")) {        
            Toast.makeText(this, "Password is required", Toast.LENGTH_LONG).show();         
        }   
    } //end of getUserCredentials()

} //end of class LoginActivity 
```

首先我的两个条件都不起作用

```
} else if (userName == null) {
    Toast.makeText(this, "User Name is required", Toast.LENGTH_LONG).show();        
} else if (password == null && password.trim().equals("")) {
    Toast.makeText(this, "Password is required", Toast.LENGTH_LONG).show();         
} 
```

意味着当我的活动启动时，editText 中有一个提示，如果我点击登录按钮，那么它应该显示需要密码或用户名的 toast。但它不是:(。第二个我用过

```
if (userName != null && !userName.trim().equals("") && password != null && !password.trim().equals("")) {       
    dialog.show();
    callWebServide(userName, password);         
} 
```

仅当用户名和密码不能为空时才应显示对话框，但是一旦我单击登录按钮，对话框就会开始显示，只有提示在 editText 中。我没有在我的点击中提到`dialog.show()`。虽然我正在创建一个对话框但没有显示它。

为什么它的行为出乎意料？我做错什么了吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:09:18.707

检查应该是

```
} else if (userName == null || userName.lenght()==0) {
    Toast.makeText(this, "User Name is required", Toast.LENGTH_LONG).show();        
} else if (password == null || password.trim().equals("")) {
    Toast.makeText(this, "Password is required", Toast.LENGTH_LONG).show();         
} 
```

为了这

不确定这个但测试一次：

```
if ( (userName != null) && (!(userName.lenght()>0)) && (password != null) && (!(password .lenght()>0))) {       
    dialog.show();
    callWebServide(userName, password);         
} 
```

# python - 彩虹中颜色的接近度

> ID：11247372
> 
> 赞同：3
> 
> 时间：2012-06-28T14:56:22.843
> 
> 标签：python

我得到了 n 个属于彩虹的点（或接近于“彩虹色”）。现在给定一个也是彩虹色的点，我想从 n 个点中找到**最接近的匹配。**

什么是强大而简单的数据结构+算法组合来做到这一点？我想到了使用 (R,G,B) 元组和欧拉距离。

是的，我有一个严重的用例:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:58:48.727

您基本上是对的，但是 HSL 或 HSV 可能会允许更高的准确性，因为您可以对属性进行加权。见[`colorsys`](http://docs.python.org/library/colorsys.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:59:20.443

您可能应该将您的 RGB 值转换为[HSL](http://en.wikipedia.org/wiki/HSL_and_HSV)，其中基于色调匹配颜色接近度应该更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T15:00:42.340

我不是在玩彩虹;-) 但我的情况几乎相同，我为此使用 kd-tree 来快速搜索最近的“点”。我的观点也是 0-1 浮点数形式的 rgb 颜色

[http://code.google.com/p/python-kdtree/](http://code.google.com/p/python-kdtree/)

```
from kdtree import KDTree

data = [(1,2,3),(4,0,1),(5,3,1),(10,5,4),(9,8,9),(4,2,4)]

tree = KDTree.construct_from_data(data)
nearest = tree.query(query_point=(5,4,3), t=1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T15:07:54.980

您说的是*彩虹色*，在通常意义上是指可见光谱中的单色，即单一频率的颜色（白色或粉红色不是彩虹色）。在这种情况下，您有很大的优势，可以仅用它们的频率或波长（一个数字）来表示它们。例如，看一下与彩虹光谱的样本划分相对应的频率：

*   [http://www.atoptics.co.uk/rainbows/primcol.htm](http://www.atoptics.co.uk/rainbows/primcol.htm)

所以现在你有*n 个*数字，然后你选择另一个数字（另一种彩虹色），并且必须决定它最接近哪个数字。这应该是微不足道的。

所以如果你有你的彩虹色频率（你应该这样做，否则你怎么知道它们是彩虹色？），这是一项简单的工作。

# xaml - 科学记数法 XAML

> ID：11247375
> 
> 赞同：0
> 
> 时间：2012-06-28T14:56:33.070
> 
> 标签：xaml, silverlight-5.0, scientific-notation

我在 XAML 中使用科学记数法。我愿意：

```
<TextBox Text="{Binding Path=CELULARIDAD_CFU, StringFormat='e6'}"/> 
```

问题是 1710000 显示：1.710000e+006，这是正确的，但我希望看到 1.71e+6。这是如何在 XAML 中指定的？（不在代码中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:32:09.703

我相信你应该使用[G 格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#GFormatString)来获得（几乎）你想要的东西。

```
<TextBox Text="{Binding Path=CELULARIDAD_CFU, StringFormat='G'}"/> 
```

在一定范围内（不同数字类型不同，见链接），数字将以正常符号显示。对于足够大或足够小的值，将显示这些值而没有尾随零和 2 个指数数字。

示例`float`：

```
1340000  => 1340000
13400000 => 1.34e+07
0.00054  => 0.00054
0.000054 => 5.4e-05 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:03:13.287

我没有找到我想要的，所以我决定使用 IValueConverter。例子：

```
Public Class scientificNotation6
    Implements IValueConverter

    Const EXP As Double = 1000000
    Public Function Convert(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.Convert
        Return CDbl(value) / EXP 'whatever you want
    End Function

    Public Function ConvertBack(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.ConvertBack
        Return CDbl(value) * EXP 'whatever you want
    End Function
End Class 
```

然后在 XAML 页面中：

```
<TextBox Text="{Binding Path=CELULARIDAD_CONGELADO, Converter={StaticResource scientificNotation6}"/> 
```

我希望它有所帮助。

# css - MVC Razor 显示标签

> ID：11247378
> 
> 赞同：2
> 
> 时间：2012-06-28T14:56:52.757
> 
> 标签：css, razor

如果我有以下 Razor，它会以粗体显示 Counter。我如何让它显示它不粗体？

```
 <div class="display-label">Counter:</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:02:54.307

如果您不想更改显示标签 css 类，可以覆盖内联样式，如下所示：

```
<div class="display-label" style="font-weight: normal">Counter:</div> 
```

不过，如果您希望所有显示标签都不是粗体，最好在 css 文件中更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T20:59:34.813

根据[http://forums.asp.net/t/1900287.aspx?Where+are+the+CSS+classes+generated+in+the+views+by+the+MVC+4+project+template+in+ VS+2012+](http://forums.asp.net/t/1900287.aspx?Where+are+the+CSS+classes+generated+in+the+views+by+the+MVC+4+project+template+in+VS+2012+)那些 CSS 类只是 MVC 4 Razor 中的占位符。我知道它们不存在于自动生成的 Site.css 文件中。要使用这些类来表征这些 div，您需要创建具有这些名称和标准的类。labelfor 和 label html 助手生成的标签的粗体来自 Site.css 中的“label”样式，默认为 {display : block; 字体大小：1.2 em；font-weight : 600;} 更改此样式以更改 html.label 和 html.labelfor 助手的呈现

# automation - 如何使用 Sense Talk 和 Eggplant 在文本字段中输入文本？

> ID：11247379
> 
> 赞同：0
> 
> 时间：2012-06-28T14:56:52.423
> 
> 标签：automation, eggplant

我需要在用户名字段中输入用户名。我使用了下面的代码。但是 TypeText 不是在用户名字段上输入文本

点击“TxtField_Username”TypeText“xx@gmail.com”

请让我知道有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:33:08.430

*   First you have to take the image of text field
*   but make sure the hotspot should be in textbox
*   then you can use the command TypeText abc@gmail.com - dont use semicolns while you using TypeText command.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T08:35:11.373

点击“登录用户名字段”

```
TypeText backspace
TypeText customerUsername
TypeText Tab
TypeText deleteKey
TypeText customerPassword 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-29T08:46:00.220

保持正确的热点将解决问题，否则使用 Imagelocation(Text) 查找标签并使用坐标到达文本框。这将是动态的。

# c - 如何将字符串插入缓冲区？

> ID：11247381
> 
> 赞同：0
> 
> 时间：2012-06-28T14:57:00.540
> 
> 标签：c, buffer, circular-buffer

我是 C 编程的新手。我想创建将字符串写入文本文件的循环缓冲区。

```
#include <stdio.h>
#include <malloc.h>

// Buffer writer header files
#include <stdlib.h>

typedef struct { char value; } ElemType;

/* Circular buffer object */
typedef struct {
    int         size;   /* maximum number of elements           */
    int         start;  /* index of oldest element              */
    int         end;    /* index at which to write new element  */
    ElemType   *elems;  /* vector of elements                   */
} CircularBuffer;

void cbInit(CircularBuffer *cb, int size);
void cbFree(CircularBuffer *cb);
int cbIsFull(CircularBuffer *cb);
int cbIsEmpty(CircularBuffer *cb);
void cbWrite(CircularBuffer *cb, ElemType *elem);
void cbRead(CircularBuffer *cb, ElemType *elem);
void writeFile();

void cbInit(CircularBuffer *cb, int size) {
    cb->size  = size + 1; /* include empty elem */
    cb->start = 0;
    cb->end   = 0;
    cb->elems = (ElemType *)calloc(cb->size, sizeof(ElemType));
}

void cbFree(CircularBuffer *cb) {
    free(cb->elems); /* OK if null */ }

int cbIsFull(CircularBuffer *cb) {
    return (cb->end + 1) % cb->size == cb->start; }

int cbIsEmpty(CircularBuffer *cb) {
    return cb->end == cb->start; }

/* Write an element, overwriting oldest element if buffer is full. App can
   choose to avoid the overwrite by checking cbIsFull(). */
void cbWrite(CircularBuffer *cb, ElemType *elem) {
    cb->elems[cb->end] = *elem;
    cb->end = (cb->end + 1) % cb->size;
    if (cb->end == cb->start)
        cb->start = (cb->start + 1) % cb->size; /* full, overwrite */
}

/* Read oldest element. App must ensure !cbIsEmpty() first. */
void cbRead(CircularBuffer *cb, ElemType *elem) {
    *elem = cb->elems[cb->start];
    cb->start = (cb->start + 1) % cb->size;
}

int mainSecond(int argc, char **argv) {
    CircularBuffer cb;
    ElemType elem = {0};

    int testBufferSize = 10; /* arbitrary size */
    cbInit(&cb, testBufferSize);

    /* Fill buffer with test elements 3 times */
    for (elem.value = 0; elem.value < 3 * testBufferSize; ++ elem.value)
        cbWrite(&cb, "AC");

    /* Remove and print all elements */
    while (!cbIsEmpty(&cb)) {
        cbRead(&cb, &elem);
        printf("%d\n", elem.value);
    }

    cbFree(&cb);
    return 0;
}

int main(int argc, char** argv) {

    writeFile();

    return 0;
}

// write to file function

void writeFile() {

    FILE *file;
    file = fopen("file.txt", "a+"); /* apend file (add text to a file or create a file if it does not exist.*/

    CircularBuffer cb;
    ElemType elem = {0};

    int testBufferSize = 10; /* arbitrary size */
    cbInit(&cb, testBufferSize);

    /* Fill buffer with test elements 3 times */
    for (elem.value = 0; elem.value < 3 * testBufferSize; ++ elem.value)
        cbWrite(&cb, "test");

    /* Remove and print all elements */
    while (!cbIsEmpty(&cb)) {
        cbRead(&cb, &elem);
        fprintf(file, "%d\n", elem.value);
       // printf("%d\n", elem.value);      
    }   

    // write something into the file
    fprintf(file, "%s", "Test!\n");
    // close the file
    fclose(file); 
    //getchar(); /* pause and wait for key */
    cbFree(&cb);
} 
```

问题是如何将字符串插入循环缓冲区，然后将它们写入文本文件？此实现仅适用于数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:01:44.383

有两种方法：

1.  在循环缓冲区中插入指针。您会将字符串存储在内存中的某个位置。然后你有一个指向内存中那个地方的指针，你存储在你的循环缓冲区中。

2.  将字符存储在循环缓冲区中，以便将它们连接起来产生字符串。这意味着字符串被复制到您的缓冲区中，并且您需要某种方式从缓冲区中读取足够的字符来组成一个字符串。

# objective-c - ocjective-c 从公共方法中获取返回值

> ID：11247385
> 
> 赞同：1
> 
> 时间：2012-06-28T14:57:25.607
> 
> 标签：objective-c, listview, uitableview, return-value, public-method

我对 Objective-C（和一般的 C）和 iPhone 开发非常陌生，并且来自 java 岛，所以有一些基础知识对我来说很难学习。

我正在深入研究 iOS5 并想使用故事板。

现在我正在尝试在一个列表中设置一个列表，该列表`UITableViewController`将填充未来 Web 服务返回的值。现在，我只想生成一些模拟对象并在列表中显示它们的名称以便能够继续。

来自 java，我的第一种方法是创建一个新的类，它提供一个全局可访问的方法来为我的列表生成一些对象：

```
#import <Foundation/Foundation.h>

@interface MockObjectGenerator : NSObject

+(NSMutableArray *) createAndGetMockProjects;

@end 
```

实施是...

```
#import "MockObjectGenerator.h"

// Custom object with some fields    
#import "Project.h"

@implementation MockObjectGenerator

+ (NSMutableArray *) createAndGetMockObjects {

    NSMutableArray *mockProjects = [NSMutableArray alloc];

    Project *project1 = [Project alloc];
    Project *project2 = [Project alloc];
    Project *project3 = [Project alloc];

    project1.name = @"Project 1";
    project2.name = @"Project 2";
    project3.name = @"Project 3";

    [mockProjects addObject:project1];
    [mockProjects addObject:project2];
    [mockProjects addObject:project3];

    // missed to copy this line on initial question commit
    return mockObjects;

} 
```

这是我的 ProjectTable.h 应该控制我的 ListView

```
#import <UIKit/UIKit.h>

@interface ProjectsTable : UITableViewController

@property (strong, nonatomic) NSMutableArray *projectsList;

@end 
```

最后是 ProjectTable.m

```
#import "ProjectsTable.h"
#import "Project.h"
#import "MockObjectGenerator.h"

@interface ProjectsTable {

@synthesize projectsList = _projectsList;

-(id)initWithStyle:(UITableViewStyle:style {

    self = [super initWithStyle:style];

    if (self) {

        _projectsList = [[MockObjectGenerator createAndGetMockObjects] copy];

    }

    return self;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // only one section for all
    return 1;

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    NSLog(@"%d entries in list", _projectsList.count);
    return _projectsList.count;

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    // the identifier of the lists prototype cell is set to this string value
    static NSString *CellIdentifier = @"projectCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    Project *project = [_projectsList objectAtIndex:indexPath.row];

    cell.textLabel.text = project.name

    return cell;
} 
```

因此，虽然我认为一切都已正确设置，但我希望 tableView 在其行中显示我的三个模拟对象。但它保持为空，并且该`NSLog`方法将“列表中的 0 个条目”打印到控制台中。那么我做错了什么？

任何帮助表示赞赏。

最好的问候菲利克斯

**更新 1：**错过了将两个 return 语句复制到这个框（“return mockObjects”和“return cell”）中，它们已经在我的代码中，现在插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:03:06.047

你不见了

```
return mockProjects; 
```

在你的方法中

```
+ (NSMutableArray *) createAndGetMockObjects { 
```

**编辑**

此外，就像其他人指出的那样，您需要确保调用`init`您正在分配的所有对象。简单地分配它并不会初始化对象，在你这样做之前你不能真正使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:05:10.003

您的代码中至少有两个问题：

在

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { 
```

你应该返回一个有效的`UITableViewCell`（只是`return cell;`）

您还应该初始化您分配的对象：

```
NSMutableArray *mockProjects = [NSMutableArray alloc];

Project *project1 = [Project alloc];
Project *project2 = [Project alloc];
Project *project3 = [Project alloc]; 
```

为此，请为对象编写`mockProjects = [[NSMutableArray alloc]init];`相同的内容。`Project`

在该方法中，您还需要返回您创建的对象：`return mockProjects;`

我强烈建议你检查一下自动引用计数系统，或者尝试学习 iOS 的老式内存管理模型。它与 Java 的做事方式非常不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:04:33.483

第一：总是调用`alloc`and`init`来创建一个对象。第二：您不会在类方法中返回可变数组。`return mockProjects;`在末尾添加声明

# wcf - wcf 为什么当我使用两个端点时我无法获取元数据？

> ID：11247386
> 
> 赞同：0
> 
> 时间：2012-06-28T14:57:29.600
> 
> 标签：wcf, tcp, metadata

好吧，到目前为止，我只有一个端点和元数据端点。然后，我使用 Internet Explorer 为例，我可以看到元数据。

但是，当我为其他合同配置第二个端点时，我无法获取元数据，因此服务无法正确公开合同并且我无法使用来自客户端的服务。

我的 app.config（它是一个自托管服务）是：

```
<system.serviceModel>
    <services>

      <service name="GTS.CMMS.Service.Service" behaviorConfiguration="behaviorConfig">
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:7997/CMMSHost"/>
            <add baseAddress="http://localhost:7998/CMMSHost"/>
          </baseAddresses>
        </host>

        <endpoint address="ServiceCore/"
                  binding="netTcpBinding"
                  bindingConfiguration="ServiceCore"
                  name="ServiceCore"
                  contract="GTS.CMMS.Service.IService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint address="ServiceDocumentos/"
                  binding="ServiceDocumentos"
                  bindingConfiguration="basicHttpBinding"
                  name="ServiceDocumentos"
                  contract="GTS.CMMS.Service.IServiceDocumentos">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="http://localhost:5000/mex" listenUriMode="Explicit" />
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="behaviorConfig">
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceThrottling maxConcurrentCalls="100" maxConcurrentSessions="100" />
          <serviceMetadata/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <bindings>
      <netTcpBinding>
        <binding name="ServiceCore" maxBufferSize="67108864"
                      maxReceivedMessageSize="67108864" maxBufferPoolSize="67108864"
                       transferMode="Buffered" closeTimeout="00:00:10"
                       openTimeout="00:00:10" receiveTimeout="00:20:00"
                       sendTimeout="00:01:00" maxConnections="100"
                        portSharingEnabled="true">
          <security mode="None"/>
          <readerQuotas maxArrayLength="67108864" maxBytesPerRead="67108864" maxStringContentLength="67108864"/>
          <reliableSession enabled="true" inactivityTimeout="00:20:00" />
        </binding>

        <binding name="ServiceDocumentos" maxBufferSize="67108864"
                      maxReceivedMessageSize="67108864" maxBufferPoolSize="67108864"
                       transferMode="Streamed" closeTimeout="00:00:10"
                       openTimeout="00:00:10" receiveTimeout="00:20:00"
                       sendTimeout="00:01:00" maxConnections="100"
                      portSharingEnabled="true">
          <security mode="None"/>
          <readerQuotas maxArrayLength="67108864" maxBytesPerRead="67108864" maxStringContentLength="67108864"/>
          <reliableSession enabled="true" inactivityTimeout="00:20:00" />
        </binding>
      </netTcpBinding>

      <basicHttpBinding>
        <binding name="ServiceDocumentos" messageEncoding="Mtom" transferMode="Streamed"  />
        <binding name="ServiceCore" messageEncoding="Mtom" transferMode="Buffered" />
      </basicHttpBinding>

    </bindings>
  </system.serviceModel> 
```

谢谢。

# c++ - 用于取消引用类成员变量的 C++ 语法

> ID：11247387
> 
> 赞同：8
> 
> 时间：2012-06-28T14:57:31.347
> 
> 标签：c++, class, pointers, syntax

这更像是一个语法优雅的问题，但我正在学习 C++ 并玩弄指针。如果我有一个类 Car，我可以创建一个指向该类的新实例的指针

```
Car * Audi = new Car; 
```

如果该类有一个成员变量权重（例如，一个无符号整数），我可以使用任一方法访问它

```
(*Audi).weight 
```

或者

```
Audi->weight 
```

如果该类有一个成员变量 age 本身就是一个指针，我可以使用任何一个来访问它

```
*((*Audi).age) 
```

或者

```
*(Audi->age) 
```

除了这两种（诚然不是特别复杂）取消引用指针的方法之外，还有其他方法吗？我想思考

```
Audi->*age 
```

会工作，但可惜它没有。

（我很欣赏访问器通常更可取，我只是感兴趣。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T16:34:07.603

```
*(Audi->age) 
```

您不需要括号，因为前缀运算符的优先级很低：

```
*Audi->age 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:18:42.020

没有人提到过这种方式：

```
Audi->age[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:08:25.343

从语法上讲，不，除非您想编写一个函数或宏来执行此操作。你可以，但如果你问我，只需使用访问器。此外，您不想在堆上分配大多数对象。只需将它们声明为`type foo;`or`type foo = type()`并让它们在堆栈上。除非您有特定的充分理由这样做，否则您不应该将动态分配放在堆上，因为动态分配具有很高的开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T15:16:11.383

您访问指向的值的常用方法`age`是您提到的方法：

```
*(Audi->age) 
```

`->*`这与指向方法的指针有完全不同的含义。

在现代 C++ 中，您通常不会过多地接触指针。可以探索，但是一旦你开始编写真正的代码，尽量避免使用指针。堆栈是你的朋友 :)

# javascript - 多个Java脚本应用于不同的 和 标签

> ID：11247390
> 
> 赞同：2
> 
> 时间：2012-06-28T14:57:41.987
> 
> 标签：javascript, html, html-lists

我对 JavaScript 非常陌生，如果这真的很愚蠢，我很抱歉。基本上问题是我有 2 个 JavaScript，都使用 ul 和 li 标签，但都需要它用于不同的东西，那么我如何将它应用于不同的 ul 和 li 标签？

**这是更详细的问题**

我有两段 JavaScript。

(1)

```
<script src="js/jquery.roundabout2.js"></script>
<script src="js/jquery.roundabout-shapes2.js"></script>
<script src="js/jquery.easing.js"></script>
<script>
        $(document).ready(function() {
            $('.verb ul li').focus(function() {
                $('#hidden-verb').val($(this).text());
            });

            $('.feeling ul li').focus(function() {
                $('#hidden-feeling').val($(this).text());
            });

            $('.adjective ul li').focus(function() {
                $('#hidden-adjective').val($(this).text());
            });

            $('ul').roundabout({
                shape: 'waterWheel',
                minOpacity: -1.0,
                duration: 300,
                easing: 'easeOutCubic'
            });

            $('li').dblclick(function(e) {
                e.preventDefault();
                return false;
            });

            $('form').submit(function(e) {
                e.preventDefault();
                alert('Thank you for telling me that my art work is ' + $('#hidden-adjective').val() + ' ,and to improve it I should add ' + $('#hidden-verb').val() + ' and the website is ' + $('#hidden-feeling').val() + '.');
                return false;
            });
        });
    </script>' 
```

那么（2）

```
<script type="text/javascript">
        jQuery(document).ready(function($) {
            // We only want these styles applied when javascript is enabled
            $('div.navigation').css({'width' : '300px', 'float' : 'left'});
            $('div.content').css('display', 'block');

            // Initially set opacity on thumbs and add
            // additional styling for hover effect on thumbs
            var onMouseOutOpacity = 0.67;
            $('#thumbs ul.thumbs li').opacityrollover({
                mouseOutOpacity:   onMouseOutOpacity,
                mouseOverOpacity:  1.0,
                fadeSpeed:         'fast',
                exemptionSelector: '.selected'
            });

            // Initialize Advanced Galleriffic Gallery
            var gallery = $('#thumbs').galleriffic({
                delay:                     2500,
                numThumbs:                 15,
                preloadAhead:              10,
                enableTopPager:            true,
                enableBottomPager:         true,
                maxPagesToShow:            7,
                imageContainerSel:         '#slideshow',
                controlsContainerSel:      '#controls',
                captionContainerSel:       '#caption',
                loadingContainerSel:       '#loading',
                renderSSControls:          true,
                renderNavControls:         true,
                playLinkText:              'Play Slideshow',
                pauseLinkText:             'Pause Slideshow',
                prevLinkText:              '&lsaquo; Previous Photo',
                nextLinkText:              'Next Photo &rsaquo;',
                nextPageLinkText:          'Next &rsaquo;',
                prevPageLinkText:          '&lsaquo; Prev',
                enableHistory:             false,
                autoStart:                 false,
                syncTransitions:           true,
                defaultTransitionDuration: 900,
                onSlideChange:             function(prevIndex, nextIndex) {
                    // 'this' refers to the gallery, which is an extension of $('#thumbs')
                    this.find('ul.thumbs').children()
                        .eq(prevIndex).fadeTo('fast', onMouseOutOpacity).end()
                        .eq(nextIndex).fadeTo('fast', 1.0);
                },
                onPageTransitionOut:       function(callback) {
                    this.fadeTo('fast', 0.0, callback);
                },
                onPageTransitionIn:        function() {
                    this.fadeTo('fast', 1.0);
                }
            });
        });
    </script>' 
```

第 1 号来自[http://fredhq.com/projects/roundabout/demos/form](http://fredhq.com/projects/roundabout/demos/form)和第 2 号来自这里[http://www.twospy.com/galleriffic/example-2.html](http://www.twospy.com/galleriffic/example-2.html)

现在您可以看到两者都使用 ul 和 li，但是 (1) 需要它来实现它的目的，而 (2) 需要它来实现它的目的，但是我无法让它对两者应用不同的东西。如果您查看链接，您会看到不同的目的。我尝试将 id 添加到标签和类中，但它似乎不起作用。

任何帮助都感激不尽。

***谢谢***

这是应用到的两个 HTML。

(1)

```
<div id="tellmeform"><form id="form2" action="" method="get">
      <div class="part"> My art work is</div>
            <div class="part moving adjective">
                <ul class="il1" id="ul1">
                    <li class="li1" id="li1">creative</li>
                    <li class="li1" id="li1">delicate</li>
                    <li class="li1" id="li1">lovely</li>
                    <li class="li1" id="li1">stunning</li>
                    <li class="li1" id="li1">elegant</li>
                </ul>
            </div>
            <div class="part">, so to imrpove I should add</div>
            <div class="part moving verb">
                <ul class="il1" id="ul1">
                    <li class="li1" id="li1">tones</li>
                    <li class="li1" id="li1">colour</li>
                    <li class="li1" id="li1">shadows</li>
                    <li class="li1" id="li1">faces</li>
                    <li class="li1" id="li1">shadeing</li>
                </ul>
            </div>              
            <div class="part">but before you go, I think the website is</div>
            <div class="part moving feeling">
                <ul class="il1" id="ul1">
                    <li class="li1" id="li1">clean</li>
                    <li class="li1" id="li1">stunning</li>
                    <li class="li1" id="li1">poor</li>
                    <li class="li1" id="li1"i>smooth</li>
                    <li class="li1" id="li1">expired</li>
                </ul>
            </div>
            <div class="part">.</div>
            <div class="part button">
                <input type="hidden" id="hidden-adjective" name="hidden-adjective" value="" />
                <input type="hidden" id="hidden-verb" name="hidden-verb" value="" />
                <input type="hidden" id="hidden-feeling" name="hidden-feeling" value="" />
                <input type="submit" value="Tell Me" name="post" id="post-it" />
            </div></form></div>' 
```

和数字 (2) - 很长，抱歉。

```
<div id="gallery" class="content">
                <div id="controls" class="controls"></div>
                <div class="slideshow-container">
                    <div id="loading" class="loader"></div>
                    <div id="slideshow" class="slideshow"></div>
                </div>
                <div id="caption" class="caption-container"></div>
            </div>
            <div id="thumbs" class="navigation">
                <ul id="ul2" class="thumbs noscript">
                    <li id="li2">
                        <a class="thumb" name="leaf" href="http://farm4.static.flickr.com/3261/2538183196_8baf9a8015.jpg" title="Title #0">
                            <img src="http://farm4.static.flickr.com/3261/2538183196_8baf9a8015_s.jpg" alt="Title #0" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm4.static.flickr.com/3261/2538183196_8baf9a8015_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #0</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>
                    <li id="li2">
                        <a class="thumb" name="bigleaf" href="http://farm3.static.flickr.com/2093/2538168854_f75e408156.jpg" title="Title #2">
                            <img src="http://farm3.static.flickr.com/2093/2538168854_f75e408156_s.jpg" alt="Title #2" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm3.static.flickr.com/2093/2538168854_f75e408156_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #2</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" name="lizard" href="http://farm4.static.flickr.com/3153/2538167690_c812461b7b.jpg" title="Title #3">
                            <img src="http://farm4.static.flickr.com/3153/2538167690_c812461b7b_s.jpg" alt="Title #3" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm4.static.flickr.com/3153/2538167690_c812461b7b_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #3</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm4.static.flickr.com/3150/2538167224_0a6075dd18.jpg" title="Title #4">
                            <img src="http://farm4.static.flickr.com/3150/2538167224_0a6075dd18_s.jpg" alt="Title #4" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm4.static.flickr.com/3150/2538167224_0a6075dd18_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #4</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm4.static.flickr.com/3204/2537348699_bfd38bd9fd.jpg" title="Title #5">
                            <img src="http://farm4.static.flickr.com/3204/2537348699_bfd38bd9fd_s.jpg" alt="Title #5" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm4.static.flickr.com/3204/2537348699_bfd38bd9fd_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #5</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm4.static.flickr.com/3124/2538164582_b9d18f9d1b.jpg" title="Title #6">
                            <img src="http://farm4.static.flickr.com/3124/2538164582_b9d18f9d1b_s.jpg" alt="Title #6" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm4.static.flickr.com/3124/2538164582_b9d18f9d1b_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #6</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm4.static.flickr.com/3205/2538164270_4369bbdd23.jpg" title="Title #7">
                            <img src="http://farm4.static.flickr.com/3205/2538164270_4369bbdd23_s.jpg" alt="Title #7" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm4.static.flickr.com/3205/2538164270_c7d1646ecf_o.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #7</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm4.static.flickr.com/3211/2538163540_c2026243d2.jpg" title="Title #8">
                            <img src="http://farm4.static.flickr.com/3211/2538163540_c2026243d2_s.jpg" alt="Title #8" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm4.static.flickr.com/3211/2538163540_c2026243d2_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #8</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm3.static.flickr.com/2315/2537343449_f933be8036.jpg" title="Title #9">
                            <img src="http://farm3.static.flickr.com/2315/2537343449_f933be8036_s.jpg" alt="Title #9" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm3.static.flickr.com/2315/2537343449_f933be8036_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #9</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm3.static.flickr.com/2167/2082738157_436d1eb280.jpg" title="Title #10">
                            <img src="http://farm3.static.flickr.com/2167/2082738157_436d1eb280_s.jpg" alt="Title #10" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm3.static.flickr.com/2167/2082738157_436d1eb280_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #10</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm3.static.flickr.com/2342/2083508720_fa906f685e.jpg" title="Title #11">
                            <img src="http://farm3.static.flickr.com/2342/2083508720_fa906f685e_s.jpg" alt="Title #11" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm3.static.flickr.com/2342/2083508720_fa906f685e_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #11</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm3.static.flickr.com/2132/2082721339_4b06f6abba.jpg" title="Title #12">
                            <img src="http://farm3.static.flickr.com/2132/2082721339_4b06f6abba_s.jpg" alt="Title #12" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm3.static.flickr.com/2132/2082721339_4b06f6abba_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #12</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm3.static.flickr.com/2139/2083503622_5b17f16a60.jpg" title="Title #13">
                            <img src="http://farm3.static.flickr.com/2139/2083503622_5b17f16a60_s.jpg" alt="Title #13" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm3.static.flickr.com/2139/2083503622_5b17f16a60_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #13</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm3.static.flickr.com/2041/2083498578_114e117aab.jpg" title="Title #14">
                            <img src="http://farm3.static.flickr.com/2041/2083498578_114e117aab_s.jpg" alt="Title #14" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm3.static.flickr.com/2041/2083498578_114e117aab_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #14</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm3.static.flickr.com/2149/2082705341_afcdda0663.jpg" title="Title #15">
                            <img src="http://farm3.static.flickr.com/2149/2082705341_afcdda0663_s.jpg" alt="Title #15" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm3.static.flickr.com/2149/2082705341_afcdda0663_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #15</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm3.static.flickr.com/2014/2083478274_26775114dc.jpg" title="Title #16">
                            <img src="http://farm3.static.flickr.com/2014/2083478274_26775114dc_s.jpg" alt="Title #16" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm3.static.flickr.com/2014/2083478274_26775114dc_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #16</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm3.static.flickr.com/2194/2083464534_122e849241.jpg" title="Title #17">
                            <img src="http://farm3.static.flickr.com/2194/2083464534_122e849241_s.jpg" alt="Title #17" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm3.static.flickr.com/2194/2083464534_122e849241_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #17</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm4.static.flickr.com/3127/2538173236_b704e7622e.jpg" title="Title #18">
                            <img src="http://farm4.static.flickr.com/3127/2538173236_b704e7622e_s.jpg" alt="Title #18" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm4.static.flickr.com/3127/2538173236_b704e7622e_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #18</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm3.static.flickr.com/2375/2538172432_3343a47341.jpg" title="Title #19">
                            <img src="http://farm3.static.flickr.com/2375/2538172432_3343a47341_s.jpg" alt="Title #19" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm3.static.flickr.com/2375/2538172432_3343a47341_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #19</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm3.static.flickr.com/2353/2083476642_d00372b96f.jpg" title="Title #20">
                            <img src="http://farm3.static.flickr.com/2353/2083476642_d00372b96f_s.jpg" alt="Title #20" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm3.static.flickr.com/2353/2083476642_d00372b96f_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #20</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm3.static.flickr.com/2201/1502907190_7b4a2a0e34.jpg" title="Title #21">
                            <img src="http://farm3.static.flickr.com/2201/1502907190_7b4a2a0e34_s.jpg" alt="Title #21" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm3.static.flickr.com/2201/1502907190_7b4a2a0e34_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #21</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm2.static.flickr.com/1116/1380178473_fc640e097a.jpg" title="Title #22">
                            <img src="http://farm2.static.flickr.com/1116/1380178473_fc640e097a_s.jpg" alt="Title #22" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm2.static.flickr.com/1116/1380178473_fc640e097a_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #22</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>

                    <li id="li2">
                        <a class="thumb" href="http://farm2.static.flickr.com/1260/930424599_e75865c0d6.jpg" title="Title #23">
                            <img src="http://farm2.static.flickr.com/1260/930424599_e75865c0d6_s.jpg" alt="Title #23" />
                        </a>
                        <div class="caption">
                            <div class="download">
                                <a href="http://farm2.static.flickr.com/1260/930424599_e75865c0d6_b.jpg">Download Original</a>
                            </div>
                            <div class="image-title">Title #23</div>
                            <div class="image-desc">Description</div>
                        </div>
                    </li>
                </ul>
          </div>
            <div style="clear: both;"></div>
         </div>' 
```

您可以看到我尝试添加类和 id，但是当我说它似乎不起作用时，我的意思是它只将设置应用于一个。例如，通过在代码 1 上将其保留为 ul 和 li，代码 1 有效，然后代码 2 失败，并以与代码 1 相同的方式出现。但如果我将代码 1 作为 ul1 和 li1，则 1 不起作用，而 2 起作用。**对不起，如果这有点令人困惑。但基本上我不能让他们独立工作。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:33:39.860

抱歉，我会将其添加为评论，但没有选项。看起来好像您需要将类添加到脚本本身以使每个脚本都与正确的相关，`ul and li`或者您是否希望两个脚本都适用于所有`ul and li`s？

对，我想我明白了，尝试更改以下内容：

```
 $('#ul1, #ul3, #ul4').roundabout({
            shape: 'waterWheel',
            minOpacity: -1.0,
            duration: 300,
            easing: 'easeOutCubic'
        });

        $('#li1, #li3, #li4').dblclick(function(e) {
            e.preventDefault();
            return false;
        }); 
```

并将 waterWheel 位的 div 结构更改为：

```
 <ul class="il1" id="ul1">
            <li class="li1" id="li1">creative</li>
            <li class="li1" id="li1">delicate</li>
            <li class="li1" id="li1">lovely</li>
            <li class="li1" id="li1">stunning</li>
            <li class="li1" id="li1">elegant</li>
        </ul>
    </div>
    <div class="part">, so to imrpove I should add</div>
    <div class="part moving verb">
        <ul class="il1" id="ul3">
            <li class="li1" id="li3">tones</li>
            <li class="li1" id="li3">colour</li>
            <li class="li1" id="li3">shadows</li>
            <li class="li1" id="li3">faces</li>
            <li class="li1" id="li3">shadeing</li>
        </ul>
    </div>              
    <div class="part">but before you go, I think the website is</div>
    <div class="part moving feeling">
        <ul class="il1" id="ul4">
            <li class="li1" id="li4">clean</li>
            <li class="li1" id="li4">stunning</li>
            <li class="li1" id="li4">poor</li>
            <li class="li1" id="li4"i>smooth</li>
            <li class="li1" id="li4">expired</li>
        </ul>` 
```

# c# - “使用”构造和异常处理

> ID：11247392
> 
> 赞同：13
> 
> 时间：2012-06-28T14:57:52.677
> 
> 标签：c#, design-patterns, exception, exception-handling, language-features

“ [using](http://msdn.microsoft.com/en-us/library/yh598w02.aspx) ” 结构对于需要开始部分和单独结束部分的情况看起来非常方便。

快速示例来说明：

```
using (new Tag("body")) {
    Trace.WriteLine("hello!");
}
// ...
class Tag : IDisposable {
    String name;
    public Tag(String name) {
        this.name = name;
        Trace.WriteLine("<" + this.name + ">");
        Trace.Indent();
    }
    public void Dispose() {
        Trace.Unindent();
        Trace.WriteLine("</" + this.name + ">")
    }
} 
```

开始部分定义为构造函数，结束部分定义为 Dispose 方法。

然而，尽管这个结构很有吸引力，但有一个严重的警告，那就是 Dispose 方法是从 finally 块中调用的。所以有2个问题：

1.  您应该避免从 finally 块中抛出异常，因为它们会覆盖应该被捕获的原始异常。

2.  如果在“开始”和“结束”之间早些时候引发了异常，则无法知道 Dispose 方法的内部，因此无法相应地处理“结束”部分。

这两件事使使用此构造不切实际，这是一个非常可悲的事实。现在，我的问题是：

1.  我对问题的理解正确吗？这就是“使用”的实际工作方式吗？

2.  如果是这样，是否有任何方法可以克服这些问题并实际使用“使用”构造，而不是最初设计的用途（释放资源和清理）

3.  如果没有实际的“使用”方式来使用这种方式。有哪些替代方法（在具有开头和结尾部分的某些代码上强制执行上下文）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T15:02:25.117

您的规则 #1 适用于或不适用`using`，因此规则 #2 是真正的决定者：如果您必须区分抛出异常和正常程序完成的情况，请选择`try`/ 。`catch`

例如，如果您的持久层可能在使用数据库连接的过程中发现问题，那么无论是否出现异常，您的连接都需要关闭。在这种情况下，`using`构造是一个完美的选择。

在某些情况下，您可以`using`专门设置来检测正常完成与异常完成。环境事务提供了一个完美的例子：

```
using(TransactionScope scope = new TransactionScope()) {
    // Do something that may throw an exception
    scope.Complete();
} 
```

如果`scope`'s`Dispose`在被调用之前`Complete`被调用，则`TransactionScope`知道抛出了异常，并中止事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:08:39.927

The intent of the `using` statement and of the `IDisposable` interface is for the user to dispose of unmanaged resources. These resources are usually expensive and precious, so they must be disposed of no matter what (that's why it's on the `finally`). Code in `finally` blocks can't even be aborted, and it can hang a whole app domain shutdown.

Now, it's very tempting to abuse `using` for the purposes you're describing, and I've done that in the past. Most of the time there's [no danger there](https://stackoverflow.com/a/5793154/31158). But if an unexpected exception happens, the whole state of the processing is compromised, you wouldn't necessarily want to run the end operation; so in general, don't do this.

An alternative is to use a lambda, something like this:

```
public interface IScopable { 
  void EndScope();
}

public class Tag : IScopable {
  private string name;
  public Tag(string name) {
    this.name = name;
    Trace.WriteLine("<" + this.name + ">");
    Trace.Indent();
  }
  public void EndScope() {
    Trace.Unindent();
    Trace.WriteLine("</" + this.name + ">");
  }
}

public static class Scoping {
  public static void Scope<T>(this T scopable, Action<T> action) 
    where T : IScopable {
    action(scopable);
    scopable.EndScope();
  }
} 
```

Use it like this:

```
new Tag("body").Scope(_ => 
  Trace.WriteLine("hello!")
); 
```

You can also create other implementations that run certain actions based on whether exceptions were raised of not.

In Nemerle, the language [can be extended with new syntax](http://codecrafter.blogspot.ca/2011/04/more-macros-in-nemerle.html) to support this.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T15:26:23.067

我不知道这是否是 的初衷`IDisposable`，但微软肯定会按照您描述的方式使用它（分离开始和结束部分）。一个很好的例子是 mvc 基础设施提供的 MVCForm 类。它实现`IDisposable`并编写了表单的结束标记，而我看不到它的实现释放了 ant 资源（用于输出 html 的编写器似乎在表单被处理后仍然存在）。
已经写了很多关于该`using`块以及它如何“吞下”异常的文章（[wcf 客户端](http://msdn.microsoft.com/en-us/library/aa355056.aspx)是一个很好的示例，您也可以在 SO 上找到此类讨论）。就我个人而言，我也有很多次感觉，尽管使用该`using`块很方便，但它并没有真正 100% 清楚何时应该使用和何时不应该使用。

当然，您实际上可以在 dispose 方法中判断您是否使用 our 没有错误地到达它，方法是[向您的 class 添加一个额外的标志](https://stackoverflow.com/a/3301548/1394380)，并在块内引发它`using`，但这仅适用于将使用您的类的人会知道那个标志

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T15:41:22.013

您观察到 try/finally 块的设计问题是正确的，这反过来又是一个问题`using`：块中的代码没有干净的方法`finally`可以知道代码执行是否会继续执行该`finally`块之后的语句，或者是否有一个挂起的异常将在`finally`块执行后立即有效地接管。

我真的很想在 vb.net 和 C# 中看到一个允许`finally`块包含`Exception`参数的语言功能（例如

```
  尝试
  {
  }
  最后（例外前）
  {
    ...
  }

```

`null`如果块正常退出，则传入的异常将在哪里`try`，或者如果没有，则将保持异常。除此之外，我希望看到一个`IDisposableEx`接口，它将继承`Dispose`，并包含一个`Dispose(Exception ex)`方法，期望用户代码将在`ex`from`finally`块中传递。然后，在 期间发生的任何异常都`Dispose`可以包装传入的异常（因为传入的异常和在 中发生异常的事实`Dispose`都是相关的）。

如果做不到这一点，让 .net 提供一种方法来指示当前上下文中是否存在未决的异常可能会有所帮助。不幸的是，尚不清楚在各种极端情况下这种方法的确切语义应该是什么。相比之下， 的语义`finally (Exception ex)`将非常清楚。注意，顺便说一句，正确的实现`finally (Exception ex)`需要语言使用异常过滤器，但不需要公开创建任意过滤器的能力。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T15:01:10.363

在我看来，您在滥用`IDisposable`界面。一种常见的做法是使用接口释放非托管资源。通常，垃圾收集器会清理对象，但在某些情况下——当你不再需要对象时——你可能需要手动清理。

但是，在您的情况下，您不会清理不再需要的对象；您正在使用它来强制执行一些逻辑。您应该为此使用另一种设计。

# asp.net - 在 ASP.Net Web 应用程序中打开 Sharepoint 应用程序页面

> ID：11247393
> 
> 赞同：0
> 
> 时间：2012-06-28T14:57:55.607
> 
> 标签：asp.net, sharepoint-2010, simplemodal

我有一个不寻常的情况要解决... SharePoint 2010 中运行了一个应用程序页面，其中包含一个用于将某些文件上传到文档库的表单。

问题是这个应用程序页面需要显示在我的 ASPX Web 应用程序中的模式上。

我使用在 iframe 中运行的 simplemodal jquery 插件来运行它。

我的问题是......考虑到安全问题，例如对该应用程序页面的受控访问，我如何才能实现此功能？我的 SharePoint 网站不允许匿名访问，因此我需要弄清楚如何仅在此页面上允许公共访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T21:57:07.513

我会在这个 asp.net 应用程序中重新创建页面，然后使用客户端对象模型或其他方法（如自定义 Web 服务）与共享点通信（但客户端模型应该没问题）。我想说这是实现目标的唯一干净方法。

# c# - FTP - 文件名不允许

> ID：11247394
> 
> 赞同：0
> 
> 时间：2012-06-28T14:57:59.100
> 
> 标签：c#, winforms, ftp

我正在尝试使用基于[此 Microsoft 文章的代码将文件上传到 FTP 服务器](http://msdn.microsoft.com/en-us/library/ms229715%28v=vs.90%29.aspx)

出于测试目的，我的代码如下所示：

```
string ftpUrl = "ftp://" + ftpSite + ftpPath + "test.txt";
//string ftpUrl = ftpSite;

FtpWebRequest request = (FtpWebRequest)WebRequest.Create(ftpUrl);
request.Credentials = new NetworkCredential(ftpUsername, ftpPassword);
request.Method = WebRequestMethods.Ftp.UploadFile;

StreamReader srcStream = new StreamReader(filePath);
byte[] fileContents = Encoding.UTF8.GetBytes(srcStream.ReadToEnd());
request.ContentLength = fileContents.Length;

Stream requestStream = request.GetRequestStream();
requestStream.Write(fileContents, 0, fileContents.Length);
requestStream.Close();

FtpWebResponse response = (FtpWebResponse)request.GetResponse(); 
```

每次我尝试上传文件时，都会从 FTP 服务器返回“文件名不允许”错误。如果我使用像 WS_FTP 这样的 FTP 客户端应用程序，我就可以很好地 FTP 相同的文件。

关于如何纠正这个问题的任何想法？我已经尝试过设置主动/被动 FTP 模式、keepalive 和二进制模式，但没有任何运气。

**编辑**

这是一个 winforms 应用程序 - 文件名来自 OpenFileDialog 提示符，FTP 地址基于 App.Config 中的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:10:04.410

在没有看到完整代码的情况下，与通过 FTP 客户端手动连接到 FTP 站点时所期望的相比，我会说构造的 FTP URL/路径很可能不正确。

如果您发布您的 app.config 代码以及如何为`ftpSite`and分配值`ftpPath`，这将有助于回答这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:05:31.503

在许多情况下，您都会遇到该特定错误。

最常见的问题是您访问的路径在所允许的权限下无效，使用相对路径或更改路径可能会修复它。

# azure - 能否从 Azure 辅助角色连接到 Dynamics GP？

> ID：11247405
> 
> 赞同：1
> 
> 时间：2012-06-28T14:58:38.353
> 
> 标签：azure, dynamics-gp

我正在研究将 Azure 托管的 .NET 解决方案与 Dynamics GP 集成的可能性，而且我是 Dynamics 的新手。一般来说，连接到 GP 的方法似乎有两种：1) Web 服务和 2) eConnect。 [这篇文章](http://blogs.msdn.com/b/developingfordynamicsgp/archive/2012/04/27/choosing-between-econnect-for-microsoft-dynamics-gp-and-web-services-for-microsoft-dynamics-gp.aspx)有一些很好的背景。

我认为只要可以访问 Web 服务，该选项就可以工作。我看到 eConnect 有 MSMQ 和其他要求，这让我认为如果没有 Azure Connect 之类的东西甚至可能的话，那将是一件令人头疼的事情。有没有人以一种或另一种方式做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:35:22.757

是的，您可以从 Windows Azure Worker 角色（为什么是 Worker，为什么不是 Web 角色？）连接到您的 Dynamics GP，这完全取决于您想要采取的路线。

Web 服务方法相对简洁且更容易访问您配置的安全 Web 服务 Dynamics GP。

另一方面，eConnect 集成需要几个其他配置，因此如果您决定使用 eConnect，我认为您最好使用 eConnect 以及设置到服务总线（直接与 eConnect 对话）和 Azure 应用程序中的 BizTalk Server/Adapter 组合直接与 BizTalk 服务通话。这可能更容易实现，但您无法击败 Web 服务。

# c++ - 将静态私有映射初始化为空

> ID：11247407
> 
> 赞同：8
> 
> 时间：2012-06-28T14:58:40.083
> 
> 标签：c++, map

我有`static map`一个`private`数据成员。如何在实现文件中对其进行初始化，使其初始容器为空？它不是`const`。重要的是，开始时此容器中没有任何内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T15:06:11.630

标题：

```
class XXX {
private:
    static std::map<X,Y> the_map; // declares static member
// ... 
```

实现文件：

```
std::map<X,Y> XXX::the_map; // defines static member 
```

这将为您的地图插入一个构造函数调用到您的程序初始化代码中（以及一个析构函数到清理中）。不过要小心 - 不同翻译单元之间的静态构造函数的顺序是未定义的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-28T15:01:25.270

这个怎么样（如果我理解正确的话）：

```
std::map<T,T2> YourClass::YourMember = std::map<T,T2>(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T15:06:17.970

如果你在类定义中*声明*它，那么你必须在实现中*定义*它：

`--- test.h ---`

```
// includes and stuff...
class SomeClass
{
    private:
        static std::map<int,std::string> myMap;
}; 
```

`--- test.cpp ---`

```
std::map<int,std::string> SomeClass::myMap; // <-- initialize with the map's default c'tor 
```

您也可以提供初始化：

```
std::map<int,std::string> SomeClass::myMap = std::map<int,std::string>(myComparator); 
```

# java - 如何为 webview 制作上下文菜单？

> ID：11247410
> 
> 赞同：2
> 
> 时间：2012-06-28T14:58:48.227
> 
> 标签：java, android

我想在我的应用程序中为 web 视图创建一个上下文菜单。我希望当用户长按链接时，会弹出一个上下文菜单。像这样的东西（左图，而不是listview，我想要一个webview）：

![在此处输入图像描述](../Images/d8543c6cd9fb741ae1e930defda0552e.png)

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:20:00.283

您有多种选项可供选择：[PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)、[ListPopupWindow](http://developer.android.com/reference/android/widget/ListPopupWindow.html)和[PopupMenu](https://stackoverflow.com/questions/10601552/android-custom-overflow-menu-without-actionbar-and-no-menubutton/10641686#10641686)

参考：[Android 自定义溢出菜单（没有操作栏和菜单按钮）](https://stackoverflow.com/questions/10601552/android-custom-overflow-menu-without-actionbar-and-no-menubutton/10641686#10641686)

# actionscript-3 - 在加载过程中在 Flash 中显示渐进式 JPEG

> ID：11247419
> 
> 赞同：8
> 
> 时间：2012-06-28T14:59:21.577
> 
> 标签：actionscript-3, flash, jpeg, progressive

我需要以渐进式 JPEG 格式显示图像（[http://en.wikipedia.org/wiki/JPEG#JPEG_compression](http://en.wikipedia.org/wiki/JPEG#JPEG_compression)，不要与顺序 JPEG 的渐进式显示相混淆）。Flash 支持加载渐进式 JPEG，但我不知道如何在加载过程中显示它。简短的谷歌搜索让我逐步加载顺序 JPEG，仅此而已。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T17:12:00.487

它会是这样的：

```
// the loader containing the image
var loading:Boolean = false;
var loader:Loader = new Loader();
addChild(loader);
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, function() {
    loading = false;
    trace(loader.width, loader.height);
});

var bytes:ByteArray = new ByteArray();

var stream:URLStream = new URLStream();
stream.addEventListener(ProgressEvent.PROGRESS, onProgress);
stream.addEventListener(Event.COMPLETE, onProgress);
stream.load(new URLRequest(imageURL));

function onProgress(e:Event):void {
    stream.readBytes(bytes, bytes.length);
    if((bytes.length > 4096 && !loading) || e.type == Event.COMPLETE) {
        loading = true;
        loader.loadBytes(bytes);
    }
} 
```

请注意，loadBytes 过程是异步的。此外，当您使用不可解析的字节数组尝试它时（通常是第一次调用 onProgress，当没有足够的图像数据要处理时）它会静默失败，因此您需要以某种方式保证您有足够的数据......在这种情况下我使用**如果（字节。长度> 4096）**；）

# python-3.x - os.将文件重命名为python中的当前日期？

> ID：11247420
> 
> 赞同：0
> 
> 时间：2012-06-28T14:59:26.040
> 
> 标签：python-3.x

我正在尝试创建一个包含文件的压缩存档目录。这将每天进行，因此存档目录的名称必须包含它的创建日期。由于语法不正确，一旦创建目录，我就无法重命名该目录。以下是我正在使用的脚本：

```
import zipfile

print('creating archive')
zf = zipfile.ZipFile('archive.zip', mode='w')
try:
    print('adding udp files')
    zf.write('test.udp')
finally:
    print ('closing')
    zf.close()
print('renaming archive...')
import datetime
dt = str(datetime.datetime.now())
import os
newname = 'file_'+dt+'.zip'
os.rename('archive.zip', newname)
print('renaming complete...') 
```

以下是我收到的错误消息：

Traceback（最近一次调用最后一次）：文件“.\archive.py”，第 17 行，在 os.rename('archive.zip',newname) WindowsError: [Error 123] 文件名、目录名或卷标语法为不正确

我正在使用python 3.2。请让我知道是否需要其他任何内容。

谢谢，保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:02:02.857

您正在尝试将存档重命名为

```
file_2012-06-28 16:01:52.615855.zip 
```

在 Windows 上，`:`不是文件名中的有效字符，因此您需要选择不同的格式，例如，您可以仅包含日期：

```
>>> datetime.date.today().isoformat()
'2012-06-28' 
```

# mysql - 错误 1054，“‘字段列表’中的未知列‘student_info.id’” - Django

> ID：11247422
> 
> 赞同：4
> 
> 时间：2012-06-28T14:59:31.143
> 
> 标签：mysql, django

我有一个现有的数据库，其中包含一个包含 5 列和大量数据的特定表。（我从 CSV 导入了这个）

如果我在 MySql 中执行 DESCRIBE student_info，它会显示：

```
+--------+-------------+------+-----+---------+-------+
| Field  | Type        | Null | Key | Default | Extra |
+--------+-------------+------+-----+---------+-------+
| pic_id | int(11)     | YES  |     | NULL    |       |
| name   | varchar(50) | YES  |     | NULL    |       |
| hostel | varchar(3)  | YES  |     | NULL    |       |
| room   | int(11)     | YES  |     | NULL    |       |
| branch | varchar(4)  | YES  |     | NULL    |       |
| id_no  | varchar(12) | YES  |     | NULL    |       |
+--------+-------------+------+-----+---------+-------+ 
```

该表包含所有数据，因为我已经通过各种 SELECT 语句和 Workbench 进行了测试

在 settings.py 中，我将项目配置为连接到该数据库，成功。然后，我下达了命令

```
python manage.py inspectdb > studentinfo/models.py 
```

而models.py的内容变成了：

```
class StudentInfo(models.Model):
    pic_id = models.IntegerField(null=True, blank=True)
    name = models.CharField(max_length=150, blank=True)
    hostel = models.CharField(max_length=9, blank=True)
    room = models.IntegerField(null=True, blank=True)
    branch = models.CharField(max_length=12, blank=True)
    id_no = models.CharField(max_length=36, blank=True)
    class Meta:
        db_table = u'student_info' 
```

然后，如果我在syncdb之后执行这个：

```
python manage.py sqlall studentinfo
    BEGIN;
    CREATE TABLE `student_info` (
        `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,
        `pic_id` integer,
        `name` varchar(150) NOT NULL,
        `hostel` varchar(9) NOT NULL,
        `room` integer,
        `branch` varchar(12) NOT NULL,
        `id_no` varchar(36) NOT NULL
    )
    ;
    COMMIT; 
```

因此，一切似乎都井井有条，除了如果我尝试检索任何内容时会出现此错误：

```
>>> from studentinfo.models import StudentInfo
>>> list=StudentInfo.objects.all()
>>> list
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/django/db/models/query.py", line 69, in __repr__
    data = list(self[:REPR_OUTPUT_SIZE + 1])
  File "/usr/lib/python2.7/dist-packages/django/db/models/query.py", line 84, in __len__
    self._result_cache.extend(self._iter)
  File "/usr/lib/python2.7/dist-packages/django/db/models/query.py", line 273, in iterator
    for row in compiler.results_iter():
  File "/usr/lib/python2.7/dist-packages/django/db/models/sql/compiler.py", line 680, in results_iter
    for rows in self.execute_sql(MULTI):
  File "/usr/lib/python2.7/dist-packages/django/db/models/sql/compiler.py", line 735, in execute_sql
    cursor.execute(sql, params)
  File "/usr/lib/python2.7/dist-packages/django/db/backends/util.py", line 34, in execute
    return self.cursor.execute(sql, params)
  File "/usr/lib/python2.7/dist-packages/django/db/backends/mysql/base.py", line 86, in execute
    return self.cursor.execute(query, args)
  File "/usr/lib/python2.7/dist-packages/MySQLdb/cursors.py", line 174, in execute
    self.errorhandler(self, exc, value)
  File "/usr/lib/python2.7/dist-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
**OperationalError: (1054, "Unknown column 'student_info.id' in 'field list'")** 
```

知道可能是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T15:02:14.090

`sqlall`只显示如果您使用空数据库运行 syncdb 会创建什么。从您的 中可以明显看出`DESCRIBE`，没有`id`字段 - 实际上根本没有主键，这是一个非常奇怪的设计。您需要通过 SQL 手动添加该字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-29T17:37:25.557

我在使用旧数据库时遇到了同样的情况。

问题是一个普通的查询集会尝试获取 id 来构建模型对象。我最终做的是使用 .values() 进行查询。这样，就没有模型构建，也没有 id。

# sql - 如何在 MS SQL 中按 SUBSTRING() 分组

> ID：11247425
> 
> 赞同：1
> 
> 时间：2012-06-28T14:59:38.210
> 
> 标签：sql, sql-server, database, group-by

我正在尝试编写一个查询以从我们的数据库中提取一些信息，并且我需要按字符串的一部分对其进行分组。所以我做了 GROUP BY substring()。但是，即使我 substring()ing 的列在 SELECT 语句中，它似乎仍然失败。我还尝试将 substr() 放在它自己的选择中并用它做一个“AS x”，但这也失败了，因为它是在 GROUP BY 之后执行的。

```
SELECT 
M.Cabot_source, 
CASE substring(M.Cabot_source,6,1) 
WHEN 'C' THEN 'CoregUserNameLC' 
WHEN 'P' THEN 'PPC' 
WHEN 'O' THEN 'Organic' 
WHEN 'S' THEN 'Ad Swap' 
WHEN 'I' THEN 'Internal' 
ELSE 'Unknown' 
END as source_type
FROM members_ M 
WHERE M.Cabot_source != '' 
GROUP BY substring(M.Cabot_source,6,1) 
```

这是它返回给我的错误：

从 db Connection 报告的 SQL 错误：

```
> (0x3ddbe8) Lyris function: SQLClass::SendToSQLInternal()  Lyris error
> description: Command.Open() failed with error code 80040e14  Database
> error information: Error 8120: Column 'members_.Cabot_source' is
> invalid in the select list because it is not contained in either an
> aggregate function or the GROUP BY clause.  (source: Microsoft OLE DB
> Provider for SQL Server)  SQL Statement: SELECT M.Cabot_source, CASE
> substring(M.Cabot_source,6,1) WHEN 'C' THEN 'CoregUserNameLC' WHEN 'P'
> THEN 'PPC' WHEN 'O' THEN 'Organic' WHEN 'S' THEN 'Ad Swap' WHEN 'I'
> THEN 'Internal' ELSE 'Unknown' END as source_type FROM members_ M
> WHERE M.Cabot_source != '' GROUP BY substring(M.Cabot_source,6,1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:07:26.603

您必须对完整的案例陈述进行分组。

```
SELECT 
M.Cabot_source, 
  CASE substring(M.Cabot_source,6,1) 
   WHEN 'C' THEN 'CoregUserNameLC' 
   WHEN 'P' THEN 'PPC' 
   WHEN 'O' THEN 'Organic' 
   WHEN 'S' THEN 'Ad Swap' 
   WHEN 'I' THEN 'Internal' 
   ELSE 'Unknown' 
  END as source_type
FROM members_ M 
WHERE M.Cabot_source != '' 
GROUP BY 
  M.Cabot_source, 
  CASE substring(M.Cabot_source,6,1) 
   WHEN 'C' THEN 'CoregUserNameLC' 
   WHEN 'P' THEN 'PPC' 
   WHEN 'O' THEN 'Organic' 
   WHEN 'S' THEN 'Ad Swap' 
   WHEN 'I' THEN 'Internal' 
   ELSE 'Unknown' 
  END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:45:15.973

错误的罪魁祸首是：

```
(SELECT COUNT(*) FROM members_ M3 WHERE M3.Cabot_source = M.Cabot_source) as names, 
(SELECT COUNT(*) FROM members_ M2 WHERE M2.MemberType_ = 'normal' AND M2.Cabot_source = M.Cabot_source) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:40:19.427

你可以：

```
select M.Cabot_source + group by M.Cabot_source 
```

或使用任何聚合函数，例如：

```
 select max(M.Cabot_source) 
```

唯一的例外是 MySQL，它有一个隐式聚合函数 - 我称之为它`return_random_record(M.Cabot_source)`，但 MySQL 的这种默认（可能未定义）行为在 SQL Server 驱动程序中不可用

# git - 错误：pathspec 'temp/versionX' 与 git 已知的任何文件都不匹配

> ID：11247432
> 
> 赞同：4
> 
> 时间：2012-06-28T15:00:09.893
> 
> 标签：git, git-checkout, filepath

在 git 中，我试图将特定存储库的版本检出到临时文件夹内的版本文件夹中，但是当我这样做时

```
git checkout master~X C:/file/path/temp/versionX 
```

我得到错误

```
error: pathspec 'temp/versionX' did not match any file(s) known to git. 
```

是什么导致了问题，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:02:38.907

`git checkout`仅在“工作树”内运行。为了做你想做的事，改变 Git 对工作树的看法。有几种不同的方法可以做到这一点：

*   选项 1：从 Git 存储库运行

    ```
    cd /path/to/repository
    # git automatically locates the .git directory as usual
    git --work-tree=C:/file/path/temp/versionX checkout master~X 
    ```

*   选项 2：从目标目录运行

    ```
    cd C:/file/path/temp/versionX
    # if --git-dir is specified, Git assumes the working tree is .
    git --git-dir=/path/to/repository/.git checkout master~X 
    ```

*   选项 3：从其他目录运行

    ```
    cd /some/arbitrary/path
    # need to specify both the path to .git and the destination directory
    git --git-dir=/path/to/repository/.git \
        --work-tree=C:/file/path/temp/versionX \
        checkout master~X 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:24:59.790

结帐不能那样使用。你想要的是 git-archive(1)。例如：

```
ancestor=10
git archive --prefix="version${ancestor}" master~$ancestor |
    tar xvf - -C "C:/file/path/temp" 
```

这会将命名的提交导出到标准输出上的 tarball，然后 tar 将在适当的位置解压缩。起初它似乎有点麻烦，但它会在你身上成长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:02:48.067

你可以试试这个：

```
mkdir /file/path/temp/versionX
cd /file/path/temp/versionX
git --git-dir=/path/to/repo/.git --work-path=. checkout master~X 
```

# php - 在 php 中使用 mysql 创建 json 或 xml 太慢了

> ID：11247435
> 
> 赞同：0
> 
> 时间：2012-06-28T15:00:15.853
> 
> 标签：php, mysql, xml, json, performance

我正在为大学演讲做一个项目，现在我正在寻找一个超过 2 周的解决方案，但我就是做错了。

我们有一个项目，我们需要生成特定的 JSON 或 XML 文件，以便稍后使用 D3 或 Sigma 将它们可视化。

我们有一个 mysql 数据库，所有代码都在 Javascript 中（正如您在库中看到的那样），我们使用 pho 从数据库中获取数据并以正确的格式获取数据。这是我尝试使用 php 创建的示例 xml 文件（它是使用 Sigma 进行可视化的 gexf 文件，但它与 xml 相同）：

```
<?xml version="1.0" encoding="UTF-8"?>
<gexf xmlns="http://www.gexf.net/1.2draft" version="1.2">
<meta lastmodifieddate="2009-03-20">
    <creator>Gexf.net</creator>
    <description>A hello world! file</description>
</meta>
<graph mode="static" defaultedgetype="directed">
    <nodes>
        <node id="0" label="Hello" />
        <node id="1" label="Word" />
    </nodes>
    <edges>
        <edge id="0" source="0" target="1" />
    </edges>
</graph>
</gexf> 
```

这是我尝试创建 xml 的 php 代码：

```
 <?php

set_time_limit(500000000);

ini_set('memory_limit', '-1');

class XmlWriter2 {
var $xml;
var $indent;
var $stack = array();
function XmlWriter($indent = '  ') {
    $this->indent = $indent;
    $this->xml = '<?xml version="1.0" encoding="utf-8"?>'."\n";
}
function _indent() {
    for ($i = 0, $j = count($this->stack); $i < $j; $i++) {
        $this->xml .= $this->indent;
    }
}
function push($element, $attributes = array()) {
    $this->_indent();
    $this->xml .= '<'.$element;
    foreach ($attributes as $key => $value) {
        $this->xml .= ' '.$key.'="'.htmlentities($value).'"';
    }
    $this->xml .= ">\n";
    $this->stack[] = $element;
}
function element($element, $content, $attributes = array()) {
    $this->_indent();
    $this->xml .= '<'.$element;
    foreach ($attributes as $key => $value) {
        $this->xml .= ' '.$key.'="'.htmlentities($value).'"';
    }
   $this->xml .= '>'.htmlentities($content).'</'.$element.'>'."\n";
}
function emptyelement($element, $attributes = array()) {
    $this->_indent();
    $this->xml .= '<'.$element;
    foreach ($attributes as $key => $value) {
        $this->xml .= ' '.$key.'="'.htmlentities($value).'"';
    }
    $this->xml .= " />\n";
}
function pop() {
    $element = array_pop($this->stack);
    $this->_indent();
    $this->xml .= "</$element>\n";
}
function getXml() {
    return $this->xml;
}
}
/*
$xml = new XmlWriter2();
$array = array(
array('monkey', 'banana', 'Jim'),
array('hamster', 'apples', 'Kola'),
array('turtle', 'beans', 'Berty'),
);
$xml->push('zoo');
foreach ($array as $animal) {
$xml->push('animal', array('species' => $animal[0]));
$xml->element('name', $animal[2]);
$xml->element('food', $animal[1]);
$xml->pop();
}
$xml->pop();
print $xml->getXml();
<?xml version="1.0" encoding="utf-8"?>
<zoo>
  <animal species="monkey">
    <name>Jim</name>
    <food>banana</food>
  </animal>
  <animal species="hamster">
    <name>Kola</name>
    <food>apples</food>
  </animal>
  <animal species="turtle">
    <name>Berty</name>
    <food>beans</food>
  </animal>
</zoo>
*/

mysql_connect("127.0.0.1", "root", "manager") or die(mysql_error()); 

mysql_select_db("enrondata") or die(mysql_error()); 

$data1 = mysql_query("SELECT DISTINCT sId FROM mailToId WHERE date 
BETWEEN '01.06.2002' AND '30.06.2002' UNION SELECT DISTINCT rId FROM 
mailToId WHERE date BETWEEN '01.06.2002' AND '30.06.2002'") or die 
(mysql_error()); 

$data2 = mysql_query("SELECT sender, recipient, count(*) AS numMails 
FROM mailTo WHERE date BETWEEN '01.06.2002' AND '30.06.2002' GROUP 
BY sender, recipient") or die (mysql_error()); 

$users = array();
$id = 0;
while($tmpUsers = mysql_fetch_array($data1)){
$tmpArray['id'] = $tmpUsers['sId'];
$user = mysql_query("SELECT email FROM users WHERE id=".$tmpUsers['sId']);
while($tmpUser = mysql_fetch_array($user)){
    $tmpArray['email'] = $tmpUser['email'];
}
array_push($users, $tmpArray);
}
$xml = new XmlWriter2();
$xml->push('gexf', array('xmlns' => 'http://www.gexf.net/1.2draft" version="1.2'));
$xml->push('meta', array('lastmodifieddate' => '2009-03-20'));
    $xml->element('creator', 'Gexf.net');
    $xml->element('description', 'A hello world! file');
$xml->pop();
$xml->push('graph', array('mode' => 'static', 'defaultedgetype' => 'directed'));
    $xml->push('nodes');
        for($i = 0; $i < count($users); $i++){
            $xml->push('node', array('id' => $users['id'], 
'label' => $users['email']));$xml->pop();
    }
    $xml->pop();
    $xml->push('edges');
        while($tmp = mysql_fetch_array($data2)){
            $xml->push('edge', array('id' => id, 
'source' => $tmp['sender'], 'target' => $tmp['recipient'], 'weight' 
=> $tmp['numMails']));$xml->pop();
            $id++;
        }
    $xml->pop();
$xml->pop();
$xml->pop();
print $xml->getXml();
?> 
```

它有效，代码正确，但需要几个小时。真的，即使在 30 分钟之后，它还没有完成所有这些。而且我不知道如何改进它并快速获得它。或者是否有另一种可能在不使用 php 的情况下以正确的格式从 mysql 数据库中获取数据？

请帮我。我的截止日期真的很近，我没有任何想法，也没有在网上找到任何适合我的问题的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:49:39.980

因此，您进行了超过 500 000 次查询，这是一个很大的开销，请尝试在第一个查询中加入电子邮件：

```
/* puggan added left join email */
$data1 = mysql_query("SELECT DISTINCT mailToId.sId, users.email FROM mailToId LEFT JOIN users ON (users.id = mailToId.sId) WHERE date BETWEEN '01.06.2002' AND '30.06.2002' UNION SELECT DISTINCT mailToId.rId, users.email FROM mailToId LEFT JOIN users ON (users.id = mailToId.rId) WHERE date BETWEEN '01.06.2002' AND '30.06.2002'") or die(mysql_error()); 

$data2 = mysql_query("SELECT sender, recipient, count(*) AS numMails FROM mailTo WHERE date BETWEEN '01.06.2002' AND '30.06.2002' GROUP BY sender, recipient") or die (mysql_error()); 

$users = array();
$id = 0;

while($tmpUsers = mysql_fetch_array($data1))
{
    $tmpArray['id'] = $tmpUsers['sId'];

    /* Puggan added: */
    $tmpArray['email'] = $tmpUsers['email'];

    // $user = mysql_query("SELECT email FROM users WHERE id=".$tmpUsers['sId']);
    // while($tmpUser = mysql_fetch_array($user))
    // {
    //  $tmpArray['email'] = $tmpUser['email'];
    // }
    array_push($users, $tmpArray);
} 
```

# sql-server - 批量插入导入一行，然后终止

> ID：11247437
> 
> 赞同：0
> 
> 时间：2012-06-28T15:00:19.100
> 
> 标签：sql-server, text, bulkinsert, varchar, terminator

我正在编写代码以每天将数十个中等大小的文本文件导入 SQL SERVER。目前，这些已导入 FOXPRO 数据库。我正在转换为使用 SQL SERVER。我已经完成了所有的固定长度文件，但是最后三个数据文件有一个可变长度字段作为每行的最后一个字段。最后一个字段的长度可达 32,000 字节。在数据库中，我已将其声明为 VARCHAR(MAX)。

字段终止符是行终止符，它是换行符。也就是说，该行以单个“0x0a”结束，以标记字段的结尾和行的结尾，而不是两个换行符。

这是我正在使用的 SQL：

```
BULK INSERT 
  [MyDB].[dbo].[X]
  FROM 'C:\temp\eep.dat'
  WITH
  (
  DATAFILETYPE ='CHAR',
  FORMATFILE='C:\temp\translate_eep.xml',
  ERRORFILE='C:\temp\ERR_eep.TXT',
  FIELDTERMINATOR='0X0A',
  ROWTERMINATOR='0X0A'
  )
GO 
```

Translate_eep.xml 看起来像这样：

```
<?xml version="1.0"?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <RECORD>
  <FIELD ID="1"   xsi:type="CharFixed" LENGTH="5"/>
  <FIELD ID="2"   xsi:type="CharFixed" LENGTH="5"/>
  <FIELD ID="3"   xsi:type="CharFixed" LENGTH="5"/>
  <FIELD ID="4"   xsi:type="CharTerm"  TERMINATOR="0X0A"/>
 </RECORD>
 <ROW>
  <COLUMN SOURCE="1"  NAME="c1"  xsi:type="SQLCHAR"/>
  <COLUMN SOURCE="2"  NAME="c2"  xsi:type="SQLCHAR"/>
  <COLUMN SOURCE="3"  NAME="c3"  xsi:type="SQLCHAR"/>
  <COLUMN SOURCE="4"  NAME="c4"  xsi:type="SQLCHAR"/>
 </ROW>
</BCPFORMAT> 
```

不幸的是，当我使用它时，它会导入一行然后终止。我怎样才能让这个东西读取整个文件？

样本数据：

```
ABCDE12345EMILYLove is not all. It is not meat, nor drink, nor slumber<lf>
FGHIJ67890SNL  Oh, no! Mr. bill!<lf>
KLMNO24680ALEX All Nature is but art, unknown to thee<lf>
PQRST13579FROSTSome say the world will end in fire,<lf> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:04:28.410

我无法使用 BULK INSERT 解决这个问题。对于最后 3 个表，即具有可变长度字段的表，我使用 Perl 通过存储过程上传数据。它看起来像这样：

```
#!/usr/bin/perl

use strict;
use DBI;

# Open the database
my ($dbh,$sth);
my $db_name="MyDB";
my $db_instance="AMACHINE";

$dbh = DBI->connect("DBI:ODBC:Driver={SQL Server};Server=$db_instance;Database=$db_name;") or die "Unable to connect";

my $sql = "DELETE [MyDB].[dbo].[X]" ;
my $sth = $dbh->prepare($sql);
$sth->execute();

my $sql = "{call MyDB.dbo.Import_X_table(?, ?, ?, ?)}" ;
my $sth = $dbh->prepare($sql);

my $in_datafile = "eep.dat";
open INF, $in_datafile || die "Unable to open file $in_datafile\n";

my $lc = 0;  # line counter;
my $buffer;
while ( $buffer = <INF> )
{
  $lc++;
  my $reference = substr($buffer, 0, 5);
  my $code      = substr($buffer, 5, 5);
  my $name      = substr($buffer, 10, 5);
  my $narrative = substr($buffer, 15); #everything after character 14

  $sth->execute($reference, $code, $name, $narrative);

} 
```

存储过程是这样的：

```
USE [MyDB]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[Import_X_table]
    @ent       varchar(5),
    @cd        varchar(5),
    @nm        varchar(5),
    @narr      varchar(max)
AS
BEGIN
    SET NOCOUNT ON
    INSERT INTO [MyDB].[dbo].[X] VALUES (@ent,@cd,@nm, @narr)
END 
```

我不喜欢这个解决方案，但这是我能想到的最快的解决方法。它通过粗暴地规避眼前的问题而不是解决它来达到目标​​。

我不认为我是否应该接受这个作为这个问题的“解决方案”。

# python - Python：Queue.Empty 异常处理

> ID：11247439
> 
> 赞同：25
> 
> 时间：2012-06-28T15:00:28.040
> 
> 标签：python, exception-handling, queue

在与某人就 Python 中的异常处理进行了简短的辩论之后——由队列对象的处理引发——我想我会把它扔在那里......

# 方法一：

```
import Queue

q = Queue.Queue()

try:
    task=q.get(False)
    #Opt 1: Handle task here and call q.task_done()
except Queue.Empty:
    #Handle empty queue here
    pass

#Opt2: Handle task here and call q.task_done() 
```

# 方法二：

```
import Queue

q = Queue.Queue()

if q.empty():
    #Handle empty queue here
else:
    task = q.get()
    #Handle task here
    q.task_done() 
```

一种说法是方法 1 是错误的，因为队列为空不是错误，因此不应使用 Queue.Empty 异常处理。此外，如果您认为任务处理部分可能很大，则以这种方式编码可能会使调试更加困难。

另一个论点是任何一种方式在 Python 中都是可以接受的，并且如果任务处理量很大，那么在 try/except 之外处理任务可以帮助调试，尽管同意这可能比使用方法 2 看起来更丑陋。

意见？

更新：通过答案 1 后的更多信息......在方法 1 在一些多线程代码中使用之后开始了辩论。在这种情况下，代码将获取锁（从 threading.Lock 对象）并在它返回的任务或 Queue.Empty 被抛出后释放它

更新 2：我们俩都不知道队列对象是线程安全的。看起来尝试/除了是要走的路！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-28T15:17:50.360

方法 2 是错误的，因为您分两步进行操作，而可以一步完成。在方法 2 中，您检查队列是否为空，然后稍后（很快，但更晚），尝试获取该项目。如果您有两个线程从队列中拉取项目怎么办？get() 仍然可能因队列为空而失败。如果在您检查项目为空后将其添加到队列中怎么办？这些是错误潜入并发代码的微小机会之窗。

一步到位，这是迄今为止更好的选择。

```
import Queue

q = Queue.Queue()

try:
    task = q.get(False)
except Queue.Empty:
    # Handle empty queue here
    pass
else:
    # Handle task here and call q.task_done() 
```

不要纠结于“异常应该是错误”。例外只是另一种沟通渠道，使用它们。在此处使用“else”子句来缩小例外子句的范围。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T15:04:35.867

如果这是多线程/多处理代码（这是使用队列的一个很好的理由），那么绝对是方法 1。在`q.empty()`通话和`q.get()`通话之间，红桃杰克可能会偷走你的馅饼！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-28T15:11:15.603

> 一种说法是方法 1 是错误的，因为队列为空不是错误，因此不应使用 Queue.Empty 异常处理

异常不一定是“错误”，它是一种通用的流控制机制，并且在少数情况下确实以这种方式使用（SysExit、StopIteration 等）。

这里的好问题是：最常见的情况是什么 - 空队列或非空队列。除非您确定，否则您想要 AskBeforeYouLeap，因为它很可能更便宜。

# magento - 根据用户指定到特定商店的管理订单

> ID：11247442
> 
> 赞同：1
> 
> 时间：2012-06-28T15:00:36.830
> 
> 标签：magento

我希望通过根据登录到管理区域的用户自动设置商店/视图来消除 Magento 管理订单流程的“请选择商店”步骤。

这可能吗？任何帮助深表感谢！

谢谢克里斯

# php - Codeigniter 购物车助手类 - 更改“小计”值

> ID：11247444
> 
> 赞同：2
> 
> 时间：2012-06-28T15:00:40.783
> 
> 标签：php, codeigniter, shopping-cart

我正在使用 CI 框架并使用购物车类。到目前为止，这已经证明是成功的，直到我的用户决定搞砸它并将邮费加到总数中。

所以我想做的是将变量 $postage 的值添加到小计数组中。

即小计首先是 111.24，然后它转到我的控制器并将 4 添加到小计使其成为 115.24。

我的数据数组如下：

```
[id] => 9
        [qty] => 1
        [price] => 111.24
        [price_artwork] => 
        [name] => Lincoln Catherdral
        [print_type] => Canvas
        [postage] => 4
        [file_name] => bbb5359bd6d0dc27ace3f2921460a021
        [file_ext] => .jpg
        [subtotal] => 111.24 
```

控制器中的$data设置如下：

```
$data = array(
           'id'             => $this->input->post('ARTWORK_id'),
           'qty'            => 1,
           'price'          => $this->input->post('print_cost'),
           'price_artwork'  => $this->input->post('ARTWORK_price'),
           'name'           => $this->input->post('ARTWORK_title'),
           'print_type'     => $this->input->post('print_type'),
           'postage'        => $postage,
           'file_name'      => $this->input->post('ARTWORK_file_name'),
           'file_ext'       => $this->input->post('ARTWORK_file_ext'),
           'subtotal'       => $subtotal
        ); 
```

但小计仅与数组中的 [price] 值相同。

任何想法如何改变这个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:05:04.653

我会试试这个，看看它是否有效：

改变：

```
 'subtotal'       => $subtotal 
```

至：

```
 'subtotal'       => $this->input->post('print_cost') + $postage 
```

**或者**，在设置数组之前，添加以下行：

```
$subtotal += $postage; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:09:10.410

这似乎不是一个 CodeIgniter 问题，而更像是一个 PHP 问题，假设我已经正确地掌握了你想要的东西。

问题是这`$subtotal`是错误的。这不是改变值的类，它首先是错误的。

听上去你只是想用邮费加价？这应该很简单： `$subtotal = $this->input->post('print_cost') + $this->input->post('ARTWORK_price') + $postage;`

做不到这一点，做一些简单的调试；`$subtotal`在声明数组之前打印出该字段。

# android - 离开片段的活动然后返回似乎会擦除后台堆栈

> ID：11247449
> 
> 赞同：1
> 
> 时间：2012-06-28T15:00:57.070
> 
> 标签：android, android-fragments, back-stack

**更新#3**

为了进一步了解这里发生了什么，我启动了通过 startActivityForResult 加载 VideoView 的 Activity，将值 (25) 作为预期的 requestCode 提供给它。调用 Activity 的 onActivityResult requestCode 不是不是 25。（它始终是 131097，我确信它是特定且一致的，仅作为测试期间内存使用的工件）。

**更新#2**

我在从 VideoView 活动返回时执行了强制回栈弹出，而不是沿片段视图弹出，而是弹出容器。诡异的。

**轻微更新**

我添加了

```
 FragmentManager fm = this.getFragmentManager();
    backCount = fm.getBackStackEntryCount(); 
```

在 onCreateView、onResume 和 onSaveInstanceState 上查看是否删除了 backstack 计数。它不是。所以......我猜backstack实际上并没有被删除，它只是不再被Back按钮访问了吗？几乎就好像片段的容器有焦点，而不是内容。或者其他的东西。我在这里很困惑。

**结束更新**

我之前问过一个类似的问题，但这有点更具体和奇怪的烦恼。

我有一系列片段，允许用户在各种分类的视频剪辑中进行选择。从视频剪辑视图开始，用户从“亮点”、“采访”等中进行选择。一旦选择了子类别，用户就选择了要观看的视频。从视频剪辑转到一个小节，然后单击“后退”按钮可以正常工作。但是，如果用户在小节中选择了一个视频，然后回击，他们将返回到小节（很好），如果他们再次回击，则没有任何反应。好像没有更多的backstack。

以下是相关代码：

后台创建：

```
protected void showSubmenu(BaseFragment fragment, String fragmentTagname) {
        FragmentTransaction transaction = getFragmentManager().beginTransaction();
        transaction.replace(R.id.fragmentSubmenu, fragment, fragmentTagname);
        transaction.addToBackStack(null);
        //transaction.add(R.id.fragmentSubmenu, fragment, fragmentTagname);
        transaction.commit();
    } 
```

从子菜单过渡到视频：

```
public void onListItemClick(ListView l, View v, int position, long id) {
    Video video = (Video) this.getListAdapter().getItem(position);
    String url = video.link.substring(29);;
    url = Kriptonic.getEncryptedURL(url);
    uri = Uri.parse(url);
    Intent intent = new Intent(_myActivity, VideoClips.class);
    startActivity(intent);
    } 
```

一如既往，感谢您的宝贵时间。

# ubuntu - 将加密狗许可证从 Ubuntu 共享到 VirtualBox Windows 7

> ID：11247451
> 
> 赞同：3
> 
> 时间：2012-06-28T15:00:59.147
> 
> 标签：ubuntu, windows-7, virtual-machine, virtualbox, dongle

我正在尝试在我的**Virtual Box Windows 7 32 位**虚拟操作系统中运行取证工具。我的主要操作系统是 Ubuntu 12.04LTS。取证工具需要一个加密狗，它是运行该工具的许可证。如何连接 USB 端口以在 Windows 7 中进行识别，以便该工具可以运行。当我在 Ubuntu 中时，我也没有看到加密狗出现。我正在运行 Oracle 的 Virtual Box。通过与 Windows 7 共享一个文件夹，我确实获得了闪存驱动器的文档以显示在虚拟框中，但闪存驱动器的内容实际上显示在 Ubuntu 中，与加密狗不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:52:16.307

看一眼

[http://www.howtoforge.com/virtualbox-2-how-to-pass-through-usb-devices-to-guests-on-an-ubuntu-8.10-host](http://www.howtoforge.com/virtualbox-2-how-to-pass-through-usb-devices-to-guests-on-an-ubuntu-8.10-host)（有点旧，但概念似乎仍然适用）

和

[http://www.howtogeek.com/howto/31726/mount-usb-devices-in-virtualbox-with-ubuntu/](http://www.howtogeek.com/howto/31726/mount-usb-devices-in-virtualbox-with-ubuntu/)

可能会帮助你解决它。

# java - 使用内部连接的多个 sql 查询到单个查询

> ID：11247455
> 
> 赞同：0
> 
> 时间：2012-06-28T15:01:08.943
> 
> 标签：java, sql, join

我有这个java代码：

```
ArrayList<MessageMap> ids = getNewMail(UserID, type, maxIdMessage);
Message[] message = new Message[ids.size()];
if(ids.size()>0){
   ResultSet rs;
   int j =0;
   for(MappaMessaggi i : ids){
      pstmt = conn.prepareStatement("SELECT * FROM Messaggi WHERE MessageID = ?");
      pstmt.setInt(1, i.getMessageID());
      rs = pstmt.executeQuery();
      rs.next();
      .
      .
      .
   } 
```

哪里`getNewMail`是：

```
public synchronized ArrayList<MessageMap> getNewMail(int UserID,int type,int max){
   ArrayList<MessageMap> map = new ArrayList<MessageMap>();
   try {
      pstmt = conn.prepareStatement("SELECT * FROM MessageMap WHERE UserID = ? AND TipoID = ? AND MessageID > ?");
      .
      .//fill arraylist with resultSet 
      .
} 
```

我知道只需一个查询就可以做到这一点，但我不知道如何......有人可以睁开我的眼睛吗？：） 谢谢！！！

编辑：我尝试：

```
SELECT i.*
FROM Messaggi AS i
INNER JOIN MessageMap AS p i.MessageID = p.MessageID
WHERE p.MessageID = 1 AND p.UserID = 1 AND p.TipoID = 2 
```

但我检索到：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'i.MessageID = p.MessageID WHERE p.MessageID = 1 AND p.UserID = 1 AND p.TipoID = ' at line 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:08:05.337

根据您的问题和查询，我找到的简单解决方案可能是这个查询（也许还有其他列与您的表相关）

```
SELECT A.*
FROM MessageMap A
    INNER JOIN Message B on A.MessageId = B.MessageId
WHERE
    A.UserId = ?
    AND A.TipoID = ?
    AND A.MessageId = ? 
```

另外，请说明您是否需要这 3 个参数，否则您无法发送其中任何一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:09:08.000

试试这个：

```
SELECT i.*, p.*
FROM Messaggi i
INNER JOIN MessageMap p ON i.MessageID = p.MessageID
WHERE i.MessageID = ? AND p.UserID = ? AND p.TipoID = ? 
```

# entity-framework - 关于延迟加载的说明-LINQ Query

> ID：11247457
> 
> 赞同：1
> 
> 时间：2012-06-28T15:01:16.990
> 
> 标签：entity-framework

你能澄清一下吗？

```
public static void MyMethod()
        {
          var context= new MyModel.Entities();

          //myQuery will not have result yet
           var myQuery= from a in context.MyEntity where a.id==10 select a;

          // object is populated in myqueryResults.
           var MyqueryResults= myQuery.ToList();       
        } 
```

我对延迟加载的理解是，在您需要它们之前，不会填充这些属性。

**问题：** 在 myQuery 中没有返回值，直到我们说`.ToList()`. 那么，这也是延迟加载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:22:25.947

这不是延迟加载，而是延迟执行。调用 ToList 两次将执行 SQL 两次。结果没有在某处“缓存”。

实际上，不是 ToList 是序列的触发器而是枚举。那是有区别的。

# java - Servlet 是 Singleton 背后的设计原则是什么

> ID：11247459
> 
> 赞同：1
> 
> 时间：2012-06-28T15:01:36.317
> 
> 标签：java, multithreading, servlets, singleton, design-principles

> **可能重复：**
> [为什么不推荐使用 (javax.servlet.)SingleThreadModel？](https://stackoverflow.com/questions/2551999/why-is-javax-servlet-singlethreadmodel-deprecated)

servlet 容器“通常”创建一个 servlet 实例和同一实例的不同线程来服务多个请求。（我知道这可以使用已弃用的 SingleThreadModel 和其他功能进行更改，但这是通常的方式）。

我认为，这背后的简单原因是性能提升，因为创建线程比创建实例更好。但似乎这不是原因。另一方面，创建实例几乎没有优势，开发人员不必担心线程安全。

我试图了解这个关于线程安全权衡的决定的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:08:45.360

这是关于性能。如果没有状态，就没有锁定和争用。Servlet 是基本的构建块，在该级别上构建关于状态的假设并不是一个好主意。

servlet 只是一种说法，容器收到了这个请求，这是应用程序对它做某事的机会。任何关于需要何种状态的假设都可能对某些应用程序有利，而对其他应用程序不利，因此 servlet 对此进行了抨击。如果有一个通用的设计原则在起作用，那就是保持足够简单以普遍有用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:17:29.653

> 请注意，SingleThreadModel 并不能解决所有线程安全问题。例如，会话属性和静态变量仍然可以被多个线程上的多个请求同时访问，即使使用 SingleThreadModel servlet 也是如此。建议开发人员采取其他方式来解决这些问题，而不是实现此接口，例如避免使用实例变量或同步访问这些资源的代码块。

请参阅[此线程](https://stackoverflow.com/questions/2551999/why-is-javax-servlet-singlethreadmodel-deprecated)以获取更多信息。

# c# - 如果代码中为空，请检查我的 SSRS 报告

> ID：11247466
> 
> 赞同：3
> 
> 时间：2012-06-28T15:01:58.220
> 
> 标签：c#, web-services, ssrs-2008, reportviewer2008

我正在通过代码（C#）加载我使用 SSRS 完成的报告，但我需要检查报告是否为空！！！

我怎么能得到那个？！我使用的代码是：

```
if (!string.IsNullOrEmpty(RptInstance.FileName))
            {
                string ReportName = RptInstance.FileName.Replace(".rpt", "");
                reportViewer.ServerReport.ReportPath = string.Format("{0}{1}", Settings.Default.ReportPath, ReportName);
                reportViewer.ServerReport.SetParameters(paramList);
                reportViewer.ServerReport.Timeout = Timeout;

                string mimeType, encoding, extension, deviceInfo;
                string[] streamIds = null;
                Warning[] warnings = null;
                deviceInfo = "<DeviceInfo><SimplePageHeaders>True</SimplePageHeaders></DeviceInfo>";

                byte[] bytes = reportViewer.ServerReport.Render(RptInstance.PDF ? "PDF" : "Excel", deviceInfo, out mimeType, out encoding, out extension, out streamIds, out warnings);
                RptInstance.State = true;
                //SaveData(Report.FileName, bytes, string.Format(@"C:\temp\{0}.{1}", ReportName, isPdf ? "pdf" : "xlsx"));

                SaveData(string.Format("{0}_{1}.{2}", ReportName, Guid.NewGuid(), RptInstance.PDF ? "pdf" : "xlsx"), bytes, DirectoryName);
            } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T03:55:56.367

数据集是报表内部的。没有外部 API 可用于查找特定数据集针对给定报告参数返回的记录数。

您可以采取两种方法来解决问题：

1\. 用一个`LocalReport`

在 C# 代码中创建您的数据集，检查它是否有行，然后将其作为数据源提供给 SSRS。

```
ReportDataSource ds = new ReportDataSource(dsName, data);
ReportGenerator gen = new ReportGenerator(data, dsName);
reportViewer.Reset();
reportViewer.LocalReport.DataSources.Add(ds);
reportViewer.LocalReport.DisplayName = displayName;
reportViewer.LocalReport.LoadReportDefinition(gen.GeneraReport()); 
```

请参阅：[使用 Reporting Services 的动态报告](http://www.codeproject.com/Articles/56817/Dynamic-Reports-with-Reporting-Services)

2\. 以 CSV 格式下载您的报告。这将为您提供一组参数的每个 DataSource 的原始数据。在这里您可以检查返回的行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T02:14:41.963

这是我的忍者的做法。

将每个控件的 Hidden 属性设置为在 DataSet 没有记录时隐藏控件的表达式：

```
=Rownumber("TransactionsByAccountAndEffDate") = 0 
```

在报表中，我还插入了一个 TextBox 并设置了它的 Hidden 属性，以便让人们知道报表何时没有数据：

[![在此处输入图像描述](../Images/6f3b899e59adaf99d166a2ccf19dd9de.png)](https://i.stack.imgur.com/X14Nx.png)

```
=Rownumber("TransactionsByAccountAndEffDate") > 0 
```

**然后当我生成没有数据的报告时，所有控件都将被隐藏，这使得文件的大小很小：**

[![在此处输入图像描述](../Images/a6898c68c010ed59be0f2b700a0033d5.png)](https://i.stack.imgur.com/ts1oy.png)

在我用代码创建报告后，我简单地检查文件大小，看看它是否很小：

```
var length = new System.IO.FileInfo(path).Length; 
```

# cakephp - Cakephp 如何在表单请求的数据中搜索特定值

> ID：11247472
> 
> 赞同：1
> 
> 时间：2012-06-28T15:02:16.800
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我有一个表格，学生可以在其中输入他们的科目结果。现在，如果在科目列表中，英语不及格，即（D，E），或者没有输入，他们不能被引导到下一页。

我的控制器在保存之前收到如下数据

```
for ($i = 1; $i < sizeof($this->data['ApplicantOlevelQualification']['olevel_subject_code']); $i++) {

                if ($this->data['ApplicantOlevelQualification']['olevel_subject_code'][$i] != "") {
                    $this->ApplicantOlevelQualification->create();
                    $this->ApplicantOlevelQualification->id = null;
                    $this->ApplicantOlevelQualification->set(array(
                            'applicants_detail_id' => $app_id,
                            'olevel_subject_code' => $this->data['ApplicantOlevelQualification']['olevel_subject_code'][$i],
                            'grade' => $this->data['ApplicantOlevelQualification']['grade'][$i],
                            'centre_number'=> $centre_number, 
                            'candidate_number'=> $candidate_number, 
                            'exam_body_code'=> $exam_body_code,
                            'year_written'=> $year_written,

                        )
                    ); 
```

之后我的保存是

```
if ($this->ApplicantOlevelQualification->save()) {      
                        $this->Session->setFlash(__('Your O\'level Qualifications have been saved'));
                    }   else {
                        $this->Session->setFlash(__('Your O\'level Qualifications failed to save.'));
                    }
                } 
```

所以伙计们，我的英语有

```
 'olevel_subject_code' = 8900, 
```

我只想要英语成绩为 A、B、C 的学生

```
 'grade'=A,B or C 
```

要保存并继续，其余的必须保留在该视图上。我的模型名称是申请人OlevelQualification，我不知道具体在哪里以及如何进行验证。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T04:22:19.533

据我试图理解你的问题，你可以在循环开始后强加一个 if 条件。您可以检查某些特定值之间是否存在等级。请详细说明，如果它不适合你。

# ios - 如何将 UIPickerView 选项连接到单个页面

> ID：11247479
> 
> 赞同：0
> 
> 时间：2012-06-28T15:02:41.170
> 
> 标签：ios, objective-c, iphone, uipickerview

在非常努力地寻找我的问题的答案后，我才加入这个网站，你们似乎对自己的工作感到惊讶。我想为 iPhone 构建一个简单的介绍应用程序。我遇到的问题是我想使用 UIPickerView 来选择各种选项，我在 pickerview 中有大约 20 个选项。我想做的下一件事是能够在您单击一个选项时打开下一个窗口，我希望在选择器视图中为我的每个选项都有单独的窗口。本质上，我有一个品牌，然后当您通过在 pickerview 上选择该品牌来选择该品牌时，您将继续选择为该品牌制作的正确配件。每个品牌都有单独的配件，这就是为什么我需要为每个品牌提供不同的新窗口。我已经有了我的pickerview 我只是不知道如何进行下一步。通过点击在pickerview上选择一个项目后，我希望它移动到相应的下一个窗口。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:35:30.047

我将假设在声明 UIPickerView 时，您已在 Interface Builder 中或在代码中将委托设置为当前视图，即`myPicker.delegate = self;`. 同样在您的 .h 文件中，您已将控制器设置为类似于 .h 文件`myViewController: UIViewController<UIPickerViewDelegate>`。

您将实现以下方法并使用`row`参数来决定接下来要显示哪个视图。此方法在选择一行后被触发（并且在您指定哪个类是选取器视图的委托时被连接到这样做）。假设您使用的是 navigationController，它可能看起来像：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    //For example, you can do a switch based on the row
    switch (row) {
         case 0:
             [self.navigationController pushViewController:myFirstView animated:YES];
             break;
         case 1:
             [self.navigationController pushViewController:mySecondView  animated:YES];
             break;
         // ..
         // ..
         case 19:
             break;
         default:
        //...
    }
} 
```

请注意，如果您在 case 语句中声明一个新变量（例如您的视图控制器之一），则需要`{ }`在 case 语句中使用大括号才能这样做。

或者，如果您不希望在选择一行后自动触发事件（例如，如果用户不小心选择了一行），您可以创建一个用户按下以确认选择/继续的按钮。按下按钮后，按钮的目标方法可以根据选择器中的选定行进行操作。您可以使用以下方法调用找到选定的行`[myPicker selectedRowInComponent:0]`（假设您的选择器只有一列/“组件”）。

祝你好运！

**编辑（阅读您的后续问题后）：**

假设 SingleComponentPickerViewController.h 是您创建 UIPickerView 的视图。

**SingleComponentPickerViewController.h：**

```
@interface SingleComponentPickerViewController : UIViewController <UIPickerViewDelegate, UIPickerViewDataSource> 
```

**SingleComponentPickerViewController.m：**

在您的 viewDidLoad 中（或您创建选择器视图的任何位置），设置委托：

```
-(void) viewDidLoad {
    //...
    myPickerView.delegate = self;
    //...
    [super viewDidLoad];
} 
```

要在上述方法中访问您的 myPickerView 变量，这意味着您的 UIPickerView 对象具有类范围或者是一个属性。

此外，还有在此文件中按下按钮后触发的操作。

```
-(void)onButtonPress:(id)sender {
    //This gets the currently selected row from the picker
    //Again, assuming you have your picker as a property or class variable
    int row = [myPickerView selectedRowInComponent:0];

    //In your final version you need to use a condition to decide which view to show.
    if (row == 0) {
        AnotherView *anotherViewInstance = [[AnotherView alloc] init];

        //Show "anotherView"
        [self.navigationController pushViewController:anotherViewInstance animated:YES];
    }
    else if (row == 1) {
        AnotherView2 *anotherView2 = [[AnotherView2 alloc] init];

        //Show "anotherView"
        [self.navigationController pushViewController:anotherView2 animated:YES];
    }
    else if (row == 2) {
        AnotherView3 *anotherView3 = [[AnotherView3 alloc] init];

        //Show "anotherView"
        [self.navigationController pushViewController:anotherView3 animated:YES];
    }
    //...continue with the rest of your conditions here
} 
```

如果您使用的是 Interface Builder，那么您应该将返回类型从 更改`void`为`IBAction`。

**SingleComponentAppDelegate.m**

现在我假设你的 App Delegate`didFinishLaunchingWithOptions`看起来像这样接近尾声：

```
//....
self.viewController = [[SingleComponentPickerViewController alloc] initWithNibName...];
self.window.rootViewController = self.viewController;     
[self.window makeKeyAndVisible];
return YES; 
```

您想修改它，将窗口的 rootViewController 属性设置为导航控制器，其中包含您的自定义视图控制器。这样，您可以轻松地将视图推送和弹出到屏幕上。

```
//...
//Create your base view, similar (or even identically) to what was done earlier
SingleComponentPickerViewController *myView = [[SingleComponentPickerViewController alloc] initWithNibName...]; 

//Stick it inside a UINavigationController so you can push and pop views on top of it.
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:myView];

//Assign that to the window's rootViewController, show it, and return
self.window.rootViewController = nav;     
[self.window makeKeyAndVisible];
return YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:06:03.743

从[`UIPickerViewDelegate`协议参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerViewDelegate_Protocol/Reference/UIPickerViewDelegate.html)：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
```

# ruby-on-rails - Ruby on Rails 中 <%= ... %> 和 <% ... %> 有什么区别

> ID：11247480
> 
> 赞同：4
> 
> 时间：2012-06-28T15:02:43.137
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

跟输出有关系吗？

那么，`<%= ...code... %>`是用于代码执行后的输出，`<% ...code... %>`还是只用于执行代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T15:14:37.277

这是[ERB](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)模板标记（Rails 支持的许多模板语言之一）。这个标记：

```
<% ... %> 
```

用于评估 Ruby 表达式。然而，没有对那个表达式的结果做任何事情。相比之下，标记：

```
<%= ... %> 
```

做同样的事情（运行其中的任何 Ruby 代码），但它调用`to_s`结果并**用结果字符串替换标记**。

简而言之：

```
<% just run code %>
<%= run code and output the result %> 
```

例如：

```
<% unless @items.empty? %>
  <ul>
    <% @items.each do |item| %>
      <li><%= item.name %></li>
    <% end %>
  </ul> 
<% end %> 
```

*相比之下，这里有一些与上述等价的 Haml 标记：*

```
- unless @items.empty?
  %ul
    - @items.each do |item|
      %li= item.name 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T15:15:42.257

两者都执行其中包含的 Ruby 代码。但是，不同之处在于它们如何处理表达式的返回值。`<% ... %>`不会对价值做任何事情。`<%= ... %>`将返回值输出到执行它的任何文档（通常是 a`.erb`或`.rhtml`文档）。

需要注意的是，`<%= ... %>`将自动转义文本中包含的任何 HTML。如果要包含任何条件 HTML 语句，请在`<% ... %>`.

```
<%= "<br />" if need_line_break %> <!-- Won't work -->

<% if need_line_break %>
<br />
<% end %> <!-- Will work --> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T15:05:51.813

`<%=`用于输出单个表达式的值，例如

```
<%= object.attribute %>
<%= link_to 'Link Title', link_path %> 
```

while`<%`用于执行任意 Ruby 代码。

# c++ - C++ 向量：我应该复制还是交换？

> ID：11247481
> 
> 赞同：3
> 
> 时间：2012-06-28T15:02:45.337
> 
> 标签：c++, copy, swap, stdvector

我有一个类，它有一个向量成员变量，我填写如下：

```
class Foo {
vector<int> v;
void g() {
  vector<int> w;
  // fill w
  v = w;
}

}; 
```

我的问题：临时向量 w 可能会变得很大，我不想付出复制构建的代价。我应该在这里使用 std::swap 而不是复制吗？我的理解是 std::swap 由于向量的专门化（它只会交换指向堆的指针）而更有效。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T15:06:00.697

是的，你应该在这里交换。在 C++11 中，你也可以说`v = std::move(w);`.

无论哪种方式，变量`w`都会立即超出范围，因此它的内容无关紧要，您最好转移所有权而不是复制。

# php - 如何将本地数据库更改迁移到测试服务器？

> ID：11247483
> 
> 赞同：0
> 
> 时间：2012-06-28T15:02:55.993
> 
> 标签：php, mysql

我 FTP 源代码文件，然后转储数据库（选择 Drop table 选项）并覆盖实时测试服务器数据库。但问题是它需要我`"junk" testing data`和一些`required default data`. 然后我必须手动删除不需要的行，以便我可以给客户端一个干净的状态。如果我通过删除现有表和数据并使用所需默认数据创建新表的脚本来执行此操作，那将是理想的。

我的想法是——

```
$table1 = "sql to create table1";
mysql_query($table1);
$table1_data = "sql to insert default data for table1"; 
mysql_query($table1_data); 
```

等等20多个不同的表......

必须有更好的方法来处理这个问题。你打算说什么？

** 更新 **

是否可以将所有查询写入一个变量并运行它 - 例如

```
$sql =" 
   Drop If exists table1
   create table1 ....
   Insert Into table 1....
   Drop If exists table2
   create table 2
   Insert into table 2 
   .....
   .....
   .....
";
mysql_query($sql);
Is there a way to achieve something like above??? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:09:47.923

我无法从社区得到任何答案，所以我坚持自己的解决方案..

我创建了一组查询 -

```
$queries[] = 'drop table';
$queries[] = 'create table';
$queries[] = 'Insert into table'; 
```

然后在 for 循环中运行每个 then 。希望它可以帮助某人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:09:05.477

一些 PHP 框架允许您设置*固定装置*，用预定义的数据填充所需的表。如果你没有使用任何这样的框架，我建议你只创建一个你需要测试的表的转储，而让其他的保持不变。

`mysqldump`如果您具有 shell 访问权限，则可以通过在数据库名称之后指定要导出的表来创建部分转储：

```
mysqldump --host=localhost --username=myuser --password databasename table1 table2 table3 >databasename.sql 
```

# objective-c - Objective-C：将文件从 DocsDirectory 传输到计算机

> ID：11247487
> 
> 赞同：-1
> 
> 时间：2012-06-28T15:03:11.357
> 
> 标签：objective-c, xcode, connection

我有几个不同的应用程序将文本文件写入 iPad 的文档目录。

我想编写另一个应用程序，它将在文档目录中搜索某些文件，读取文件中的数据，然后将这些数据写入数据库。当 iPad 插入与数据库在同一网络上的计算机时，这一切都会发生。

这可能吗？我读到 iOS 应用程序无法远程连接到数据库，所以我希望分两步执行此操作，并在运行新应用程序时将 iPad 插入计算机可以缓解问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:17:54.777

可以编写查看 iPad 文件系统的软件。[1] 你应该这样做吗？可能不是。这也可能不是很容易。而且你必须为你想要定位的每个桌面操作系统编写这个。您也可能会遇到加密问题。

无论如何，“iOS 无法远程连接到数据库”是一个如此广泛的陈述，以至于它不可能是正确的。

我同意在 iOS 设备上打开和关闭文件太麻烦了，所以请随时在[https://feedbackassistant.apple.com/提交错误报告](https://feedbackassistant.apple.com/)

完成此操作后，环顾四周，您会发现有很多选项可供您选择，但没有一个是完美的：您可以通过 iCloud（仅限 iOS/Mac）、Dropbox 等使用云同步；您可以在设备或计算机上打开自己的http服务器；您可以使用网络服务上传和下载文件；你可以让用户通过 iTunes 来完成所有的工作......

不要忘记提交该错误报告！如果苹果没有收到投诉，他们将永远不会改变这一点。对人好点！

[1] [iExplorer](http://www.macroplant.com/iexplorer/)就是这样一个软件。我不附属，不认可，也不对其质量做出任何声明。但我试过一次，它确实有效。

# ruby-on-rails - ruby on rails 应用程序中的嵌套模型路由

> ID：11247490
> 
> 赞同：0
> 
> 时间：2012-06-28T15:03:22.433
> 
> 标签：ruby-on-rails, ruby

在我的应用程序中，我有一个用户模型、学校模型、课程模型和教学大纲模型。用户或学校可以创建我通过多态关联设置的课程（课程 belongs_to :hostable 和学校/用户 has_many :courses, as: :hostable）和课程 has_one 教学大纲。我的问题是如何为嵌套课程模型配置路线，该模型也嵌套了教学大纲模型。

```
resources :users do
  resources :courses do
   resources :syllabus
  end 
    member do
    put :enroll
   end
  end

 resources :schools do
  resources :courses do 
   resources :syllabuses
  end
   member do
  put :apply, :enroll
  end
end 
```

因此，用户可以通过单击课程页面上的按钮来注册课程，在我的课程控制器中，我有：

```
def enroll
  @course = Course.find(params[:id])
  current_user.coursegroups.create(host_course_id: @course.id, role: 'applicant')
  respond_with @course
end 
```

那么，这是配置我的路线的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:26:00.463

Stefan 认为您应该小心嵌套超过一层的资源是对的，但我个人认为嵌套直到两层才无法管理。无论哪种方式，这只是个人喜好。

对于您的路线，我立即跳出来的一件事是没有必要将所有内容嵌套在用户和学校中，因为听起来您将以用户或学校的身份登录。包含登录用户的路由很难管理：用户无法共享它们，它们并不能真正反映指定资源的状态。例如：

```
/users/1/courses/14/syllabus/3 
```

从理论上讲，`courses/14/syllabus/3`每个登录用户的工作方式都应该相同，但是任何试图共享此链接的人都需要首先包含他们自己的用户 ID 号，这有点愚蠢。而是像这样构建您的路线：

```
resource :sessions
resources :courses do
  resources :syllabus
  member do
    put :apply, :enroll
  end
end 
```

[在您的会话中，允许用户或学校登录，并根据使用CanCan](https://github.com/ryanb/cancan/)之类的登录者来改变他们在视图中看到的内容（以及允许他们访问的资源）。现在您的路线将正确反映实际资源 ( `/courses/14/syllabus/3`)。

# php - ACL 建模 - 如何管理访问控制列表的“层次结构”？

> ID：11247491
> 
> 赞同：3
> 
> 时间：2012-06-28T15:03:23.687
> 
> 标签：php, acl, user-permissions, database-permissions

我仍在从事我的 ACL 项目，我想对以下问题提出一些想法：

我使用 MySQL 来存储我的用户、角色和权限。起初，我在我的 TABLE Roles 中创建了一个字段“parent_id”，并试图通过它来管理每个用户的权限。这是一种工作，直到我意识到如果我添加一个新角色，管理层次结构和控制谁可以访问哪个资源真的很复杂。我做了一些搜索，我意识到使用关系数据库来处理层次结构真的很复杂，所以我放弃了使用层次结构。

我希望您能帮助我找到管理用户创建的最佳解决方案：我有 4 个不同的用户：SuperAdmin、CustomerAdmin、技术员、客户。例如，当我在页面中创建新用户时，我不想让技术人员创建类型为 CustomerAdmin 或 SuperAdmin 的新用户。

我想只让超级管理员创建一个新用户，但我的一个限制是我必须让客户管理员也创建用户，也是技术人员。

试图更具说教性，超级管理员可以是我。客户管理员是我的客户，他有一个企业。在他的企业中，他可以创建 2 类用户：技术人员和客户。

这只是一个例子，但是如果我想创建一种新的角色来赋予他新的权限，我必须找到一种方法来拒绝他创建一个比他更强大的用户的权限。

我不确定我的问题是否客观，但欢迎任何可以与我谈论这个问题的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T16:02:15.827

您已经拥有自己的角色，但每个角色都需要拥有执行操作的权限。这几乎可以肯定是矫枉过正，但它应该是高度灵活的。

```
| 角色表 |
 | 角色 ID | 角色名称 | 访问级别 |
 --------------------------------------
 | 1 | 超级管理员 | 10 |
 | 2 | 客户管理 | 20 |
 | 3 | 技术员 | 40 |
 | 4 | 客户 | 80 |

 | 行动表 |
 | 操作 ID | 动作名称 |
 --------------------------
 | 1 | 创建用户 |
 | 2 | 删除用户 |
 等等。

 | 权限表 |
 | 正确的 ID | 角色 ID | 操作 ID |
 ----------------------------------
 | 1 | 1 | 1 |
 | 2 | 1 | 2 |
 | 3 | 2 | 1 |
 | 4 | 2 | 2 |
 等等。

 | 参数表 |
 | 参数 ID | 正确的 ID | 参数名称 | 参数值 |
 -------------------------------------------------- ---------
 | 1 | 1 | 最大用户访问权限 | 10 |
 | 2 | 2 | 最大用户访问权限 | 10 |
 | 3 | 3 | 最大用户访问权限 | 20 |
 | 4 | 4 | 最大用户访问权限 | 20 |
 等等。

```

权限表显示 SuperAdmin 和 ClientAdmin 都可以创建和删除用户。参数表将 ClientAdmin 限制为创建最大访问级别为 20（1 为最高）的用户。您可以将此访问级别与角色匹配，以便为 Role.Access_Level >= Max User Access 的新用户提供角色列表。

根据权利，动作可以使用多个参数集，但我想不出除了 Max User Access 之外的任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:34:00.860

如果您使用权限值类型方案，其中数字代表权限“级别”，并且在某些增量时您获得某些权限怎么办？

例如

超级管理员 10000 客户管理员 1000 技术员 100 工人 10

可以读取 = 10 可以写入设置 = 100 可以创建用户 1000

如果操作的目标用户的权限号高于执行该操作的用户，则拒绝该操作。这是一种相当简单的方法来抽象这些含义，而无需构建物化路径并且必须构建树数据结构。

# cuda - GPU 中的常量内存和纹理内存

> ID：11247494
> 
> 赞同：2
> 
> 时间：2012-06-28T15:03:30.673
> 
> 标签：cuda, gpu

GPU中的常量内存和纹理内存是如何实现的？我知道设备内存不在流式多处理器上，并且是 DRAM。共享内存是片上的，可能是 SRAM。

我还在某处读到，参数通过常量内存传递给内核（即，内核函数的参数从 CPU 复制到 GPU 常量内存）。它是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T15:27:25.153

纹理内存和常量内存分配在全局内存使用的片外内存中，但通过专用硬件访问。两种内存都有自己的缓存空间（非常小）和特殊功能，例如用于 2D 纹理内存的 2D 预取或用于常量内存的广播。

内核参数存储在 Fermi 和 Kepler GPU 的常量内存中，在较旧的 G80/90/200 GPU 上，它们存储在共享内存中。

有关缓存大小和那些特殊功能的更多详细信息，请参阅 CUDA C 编程指南。

# grails - Ra-authenticate 在 Grails 应用程序中更改的用户

> ID：11247495
> 
> 赞同：5
> 
> 时间：2012-06-28T15:03:35.553
> 
> 标签：grails, spring-security

我想立即在我的 Grails 应用程序（我正在使用 Spring Security 插件）中传播用户更改（用户角色的更改）。

我发现了这个：

```
springSecurityService.reauthenticate(userName) 
```

但这适用于当前登录的用户，而不适用于更改用户！

是否有任何简单的解决方案（即使强制注销更改的用户就足够了）。

用例是管理员更改其他用户角色时。如果更改的用户已登录，则在 Spring Security 的上下文中不会立即看到角色更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T13:49:17.463

感谢 Fabiano，我提供了以下可行的解决方案：

资源.groovy

```
import org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy
import org.springframework.security.web.session.ConcurrentSessionFilter
import org.springframework.security.core.session.SessionRegistryImpl
import org.springframework.security.web.authentication.session.SessionAuthenticationStrategy

// Place your Spring DSL code here
beans = {
    // bind session registry
    sessionRegistry(SessionRegistryImpl)

    sessionAuthenticationStrategy(ConcurrentSessionControlStrategy, sessionRegistry) {
        maximumSessions = -1
    }

    concurrentSessionFilter(ConcurrentSessionFilter){
        sessionRegistry = sessionRegistry
        expiredUrl = '/login/concurrentSession'
    }
} 
```

MyService.groovy

```
def sessionRegistry

def expireSession(User user) {
        def userSessions = sessionRegistry.getAllSessions(user, false)
        // expire all registered sessions
        userSessions.each {
            log.debug "Expire session [$it] of the user [$user]"
            it.expireNow()
        }
} 
```

相当容易 ：-）

**更新：**

另外不要忘记注册 HttpSessionEventPublisher 并根据[Filter Documentations](http://grails-plugins.github.io/grails-spring-security-core/guide/filters.html)使用不同的方式将 concurrentSessionFilter 添加到 Config.groovy 。

web.xml

```
<listener>
    <listener-class>
       org.springframework.security.web.session.HttpSessionEventPublisher
    </listener-class>
</listener> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T22:16:59.203

我认为您必须声明一个spring security SessionRegistry。看看这里[concurrent-sessions](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#concurrent-sessions)和这里[list-authenticated-principals](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#list-authenticated-principals)。

然后，您可以列出和访问经过身份验证的用户并对其进行修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T07:55:06.590

在同样的问题上花了很长时间浏览互联网。提出的解决方案不起作用（可能我没那么幸运:)。所以这是我的方式

首先我们创建一个像这样的 Grails 服务：

```
class SecurityHelperService {
    final Set<String> userUpdates = new HashSet<String>()

    public void markUserUpdate(String username) {
        synchronized (userUpdates) {
            userUpdates.add(username)
        }
    }

    public boolean clearUserUpdate(String username) {
        synchronized (userUpdates) {
            return userUpdates.remove(username) != null
        }
    }

    public boolean checkUserUpdate() {
        def principal = springSecurityService.principal

        if (principal instanceof org.springframework.security.core.userdetails.User) {
            synchronized (userUpdates) {
                if (!userUpdates.remove(principal.username)) {
                    return true
                }
            }

            springSecurityService.reauthenticate(principal.username)

            return false
        }

        return true
    }
} 
```

在该`grails-app/conf`目录中，我们创建一个 Grails 过滤器来检查当前用户权限是否已更改，例如

```
class MyFilters {
    SecurityHelperService securityHelper

    def filters = {
        userUpdateCheck(controller: '*', action: '*') {
            before = {
                if (!securityHelper.checkUserUpdate()) {
                    redirect url: '/'

                    return false
                }

                return true
            }
        }
    }
} 
```

就这样。每次在代码中更新用户权限时，我们都会调用服务方法

```
securityHelper.markUserUpdate('username') 
```

当在线用户下次访问页面时，他/她的权限会自动检查并重新加载。无需手动注销。

可选地，我们在新登录时清除以前的用户更新，以避免过滤器中不必要的重定向

希望这可以帮助

# forms - 带有 PayPal 的 Wordpress 用户角色和条目表

> ID：11247496
> 
> 赞同：0
> 
> 时间：2012-06-28T15:03:38.627
> 
> 标签：forms, wordpress, paypal, roles

我即将迎来一个独特的客户机会，我需要一些关于如何处理该项目的帮助。在不放弃太多的情况下，这就是我所面临的：

我需要访问这个即将成为 Wordpress 网站的访问者。他们需要能够像往常一样注册，并且在注册时将按照通常的方式设置为“订阅者”。但是，这是我无法解决的转折：

我需要这些“订阅者”能够在网站上填写报名表，以参加有“处理费”的比赛。客户希望通过 PayPal 收取费用。因此，如果“订阅者”想要进入，我需要填写此表格，并且在提交表格时通过 PayPal 收取付款 - 如果成功，则“订阅者”填写的表格将被放置在后端审核中让管理员审查提交。我需要这些提交来表现得像他们来自“贡献者”一样，所以他们点击了 Admin que。

基本上，访问者将能够发送这些提交内容，以尝试将他们的内容发布到网站上，以供其他用户投票。

我很绝望，因为这些项目是一个非常好的项目，但很快就会开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:46:28.007

您可能想要存储用户的付款信息（不是信用卡号），这样用户就不必在他/她发布的所有内容中再次输入相同的信息。

您需要 PayPal Express、Payment Pro 或 Payflow Gateway，以便您可以使用 DoReferenceTransactionReq。基本上，您保存了用户付款的第一个交易 ID。并继续使用它（作为参考）进行下一次付款。请确保他们首先批准您的帐户；他们有时不批准取决于您的业务。

Authorize.Net 也具有称为 CIM（客户信息管理器）的相同功能。存储/访问用户配置文件和支付配置文件更容易。但这取决于你。

祝你好运！

# c# - 后端代码放置的前端更改

> ID：11247497
> 
> 赞同：0
> 
> 时间：2012-06-28T15:03:42.000
> 
> 标签：c#, asp.net

我已经有一段时间了，直到我意识到我不能在

```
 page_load 
```

没有任何变化反映。下面演示执行成功但不影响前端的代码

```
 if (!(X.IsAjaxRequest || Page.IsCallback) && Request["type"] == null)
    {
        window.Show();
        fsm.executeCurrentState();
    }
    else if (Request["type"] != null)
    {
        window.Show();
        switch (Request["type"])
        {
            case "PopUp":
                {
                    windowPopUp.AutoLoad.Url = "http://google.com";
                    windowPopUp.AutoRender = true;
                    windowPopUp.Show();

                    uLabel.Text = "blah";

                    break;
                }
        }
    }
    else
    {

        fsm.switchState((int)states.initializeState);
        fsm.executeCurrentState();
    } 
```

这是使用前端 Ajax 请求：

```
 function sendPopRequest(link) {
        $.ajax({
        url: location.href,
        type: "POST",
        data: { type : 'PopUp', URL : link }
        }); 

    } 
```

我可以验证他是否成功地将变量传递到前端。我觉得奇怪的是它返回 false

```
 X.IsAjaxRequest || Page.IsCallback 
```

我将如何确保这段代码实际上对前端有影响？我正在使用 EXT.NET，它使用事件进行回调以影响其前端。但是，我正在使用的元素不能附加事件函数。

# c++ - MFC CDialog 不显示

> ID：11247498
> 
> 赞同：1
> 
> 时间：2012-06-28T15:03:42.640
> 
> 标签：c++, visual-studio, winapi, mfc, cdialog

这是我的问题：在我的解决方案中，我有 2 个项目，一个是一个库，我在其中创建了一个资源文件 (mylib.rc) 和一个对话框模板。然后我创建了一个继承 CDialog 并使用这个模板的类。但是当我实例化它并调用 DoModal() 时，没有任何附加内容......

这是我班级的代码，有什么问题吗？

## 我的对话.h

```
/*MyDialog.h*/
#pragma once
#include "../../../resource.h"

class MyDialog : public CDialog
{
    enum {IDD=IDD_DLGTEMPLATE};
public:
    MyDialog(CWnd* pParent = NULL);  
    virtual ~MyDialog();

protected:
    virtual BOOL OnInitDialog();

    DECLARE_MESSAGE_MAP()
private:
    afx_msg void OnBnClickedOk();
    afx_msg void OnBnClickedCancel();
}; 
```

## 我的对话.cpp

```
/*MyDialog.cpp*/
#include "stdafx.h"
#include "MyDialog.h"

MyDialog::MyDialog(CWnd* pParent /*=NULL*/) : CDialog(IDD_DLGTEMPLATE, pParent) {}
MyDialog::~MyDialog() {}

BOOL MyDialog::OnInitDialog() { return TRUE; }

BEGIN_MESSAGE_MAP(MyDialog, CDialog)
    ON_BN_CLICKED(IDOK, &MyDialog::OnBnClickedOk)
    ON_BN_CLICKED(IDCANCEL, &MyDialog::OnBnClickedCancel)
END_MESSAGE_MAP()

void MyDialog::OnBnClickedOk() { OnOK(); }
void MyDialog::OnBnClickedCancel() { OnCancel(); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:03:55.497

你是静态链接库吗？

如果是，原因之一可能是您正在使用富编辑控件但您没有初始化 RICHED20.DLL 或 RICHEDIT.DLL.3您必须调用 AfxInitRichEdit2 或 AfxInitRichEdit。如果对话框的资源在 DLL 中，则必须在调用对话框之前将资源句柄设置为 DLL 模块的句柄。

调用 AfxGetResourceHandle 存储当前句柄并调用 AfxSetResourceHandle 将句柄设置为 DLL。

完成一个对话框后，使用 AfxSetResourceHandle 设置使用已保存的句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:19:43.600

尝试在调用之前放置以下内容`DoModal()`：

```
AFX_MANAGE_STATE(AfxGetStaticModuleState()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:36:22.207

我终于找到了，我正在使用第二个资源文件（* .rc），我只需要通过“资源视图”中的“设置包含”对话框将第二个包含到第一个中作为“编译时指令”

无论如何，谢谢你们！

# php - Ajax Chosen 插件只影响一个下拉菜单？

> ID：11247500
> 
> 赞同：0
> 
> 时间：2012-06-28T15:03:46.443
> 
> 标签：php, javascript, ajax, json, jquery

我目前有一个 ajax 脚本，可以动态构建两个启用了 Chosen 插件的选择框：[https](https://github.com/harvesthq/chosen) ://github.com/harvesthq/chosen 。我已经缩小了第 9 行是启用 Chosen Plugin 的原因，据我所知，脚本会动态地为选择构建标记。如何拆分此动态选择标记的构建，以便第一个选择不使用 Chosen 插件启用？

```
$(function(){

    var questions = $('#questions');

    function refreshSelects(){
        var selects = questions.find('select');

        // Improve the selects with the Chosen plugin
        selects.chosen({ disable_search_threshold: true });

        // Listen for changes
        selects.unbind('change').bind('change',function(){

            // The selected option
            var selected = $(this).find('option').eq(this.selectedIndex);
            // Look up the data-connection attribute
            var connection = selected.data('connection');

            // Removing the li containers that follow (if any)
            selected.closest('#questions li').nextAll().remove();

            if(connection){
                fetchSelect(connection);
            }

        });
    }

    var working = false;

    function fetchSelect(val){

        if(working){
            return false;
        }
        working = true;

        $.getJSON('citibank.php',{key:val},function(r){

            var connection, options = '';

            switch (r.type) {
                case 'select':
                    $.each(r.items,function(k,v){
                        connection = '';
                        if(v){
                            connection = 'data-connection="'+v+'"';
                        }

                        options+= '<option value="'+k+'" '+connection+'>'+k+'</option>';
                    });

                    if(r.defaultText){

                        // The chose plugin requires that we add an empty option
                        // element if we want to display a "Please choose" text

                        options = '<option></option>'+options;
                    }

                    // Building the markup for the select section

                    $('<li>\
                        <p>'+r.title+'</p>\
                        <select data-placeholder="'+r.defaultText+'">\
                            '+ options +'\
                        </select>\
                        <span class="divider"></span>\
                    </li>').appendTo(questions);

                    refreshSelects();
                    break;
                case 'html':
                    $(r.html).appendTo(questions);
                    break;
            }

            working = false;
        });

    }

    $('#preloader').ajaxStart(function(){
        $(this).show();
    }).ajaxStop(function(){
        $(this).hide();
    });

    // Initially load the product select
    fetchSelect('callTypeSelect');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:09:13.037

[`:not`](http://api.jquery.com/not-selector/)和[`:first`](http://api.jquery.com/first-selector/)。

```
selects.filter(":not(:first)").chosen({ disable_search_threshold: true }); 
```

或者

```
selects.not(":first").chosen({ disable_search_threshold: true }); 
```

# javascript - Firefox 无法正确播放动画 gif（在 Chrome 中运行良好）

> ID：11247504
> 
> 赞同：3
> 
> 时间：2012-06-28T15:04:09.067
> 
> 标签：javascript

我有一个动画 gif 图像，它被交换到另一个动画 gif onclick。到目前为止一切正常。但是当我想进行另一个更改（到第三个动画 gif）时，firefox 根本不会播放第三个 gif 动画。在 Chrome 中它工作正常。

我上传了一个测试文件，您可以自己查看：

[http://fastertutorials.com/stuff/test.html](http://fastertutorials.com/stuff/test.html)

在 Firefox 中，当您单击笑脸时，它会开始旋转。但是，如果您再次单击，它应该会爆炸。但是爆炸从来没有在 Firefox 中播放，只在 Chrome 中播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:40:37.787

这几乎可以肯定是 Firefox 12 和 13 中的一个错误，但幸运的是它似乎在 14 中得到了修复。

奇怪的是，存在另一个图像实例似乎可以解决问题。一个可能的（但非常hacky）解决方法可能是将另一个实例添加`polly.gif`到页面底部并将其`height`和/或`width`设置为0。设置`display`为`none`不起作用。

您可以在这里尝试解决方法：http: [//jsfiddle.net/tH5TC/](http://jsfiddle.net/tH5TC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:34:29.610

我认为这可能是一个萤火虫错误。尝试这个：

1.  打开萤火虫
2.  加载页面
3.  点击图片两次
4.  如果你得到一张静态悲伤的脸打开 firebug html 控制台
5.  打开`<body>`标签
6.  将鼠标悬停在图像标签的`id`

然后动画应该开始播放。

# php - fclose(): 18 不是有效的流资源

> ID：11247507
> 
> 赞同：7
> 
> 时间：2012-06-28T15:04:17.630
> 
> 标签：php, kill-process, fclose, proc-open

我正在尝试使用 proc_open 执行进程。进程的 I/O 由管道处理！

```
$descriptorspec = array(
    0 => array("pipe", "r"),
    1 => array("pipe", "w"),
    2 => array("pipe", "w")
); 
```

现在，碰巧的是，有时我打开的“c 程序”确实卡住了，我添加了一个 max_time_limit 检查，它会强制关闭进程。我添加了回调函数 - 即 onExit -（使用“call_user_function”）以在“进程退出”时以有效方式或强制方式处理信息。

在“退出”功能中，我正在关闭 i/o 管道

```
 foreach ($pipes as $pipe) {
    fclose($pipe);
 } 
```

如果进程有一个有效的退出，上面的工作非常好。但是，在我强行终止进程的情况下，我调用了 proc_terminate 来执行此操作。我知道进程的终止也会继续并关闭任何 I/O 管道，但问题是由于回调，我的“onExit”函数进程总是被调用（这就是我想要的方式.. .因为我需要做更多的处理）。现在，在这种情况下，当我尝试关闭管道时，我收到以下错误：

```
fclose(): 18 is not a valid stream resource 
```

我尝试使用“ftell”来检查管道是否有效，但这也出错了。如何检查管道是否已经关闭？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-28T15:07:01.250

在尝试关闭资源之前检查资源是否仍然是资源怎么样：

```
foreach ($pipes as $pipe) {
  // Finds whether a variable is a resource
  if(is_resource($pipe)) {
    fclose($pipe);
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-19T18:50:41.687

或者，如果您的代码工作正常并且这只是一个“警告”，则使用`@`. 就这样。

```
@fclose($pipe); 
```

# c - Microsoft 的“stmedit”WFP 示例是否适用于 Windows 8？

> ID：11247510
> 
> 赞同：1
> 
> 时间：2012-06-28T15:04:32.640
> 
> 标签：c, windows-8, visual-studio-2012, wfp, windows-kernel

Microsoft 提供了一个示例`stmedit`，用于演示*Windows 筛选平台 (WFP)*技术。您可以在[此处](http://code.msdn.microsoft.com/windowshardware/Windows-Filtering-Platform-7b0a3d91)查看示例。

此示例也在 Windows 7 DDK 中分发，效果很好。但是，当尝试在 Windows 8 Release Preview（32 位和 64 位）上运行此示例时，它不起作用。

代码在 Visual Studio 2012 中构建良好，甚至可以作为驱动程序安装。事实上，它甚至可以`net start stmedit`很好地启动。但是，它不会修改任何网络流量，尽管它应该在网络流量中用“晴天”替换任何出现的“雨天”（我已经使用其记录的注册表设置对其进行了配置）。

有没有人能够让这个示例在 Windows 8 上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:45:55.920

从[这里](http://msdn.microsoft.com/en-us/library/windows/hardware/hh440281%28v=VS.85%29.aspx)：

> 从 Windows 8 开始，对 Windows 过滤平台的可用功能和行为进行了一些更改。通常，要利用新功能，您必须编译或重新编译将 NTDDI_VERSION 宏设置为 NTDDI_WIN8 的标注驱动程序。

基本上，确保您正在检查正确的 NTDDI_VERSION。

# facebook - publish_actions 上传照片？

> ID：11247515
> 
> 赞同：0
> 
> 时间：2012-06-28T15:05:01.217
> 
> 标签：facebook, facebook-graph-api

Facebook[权限文档](https://developers.facebook.com/docs/publishing/)指出，如果应用程序被授予 publish_actions 权限，它可以将照片上传到用户的相册。但是当我尝试发布到 /{userId}/photos 时，我得到了一个`(OAuthException - #102) A user access token is required to request this resource.`错误。请注意，发布到 /{userId}/feed 是有效的。

有什么我想念的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:34:42.727

根据错误消息，您需要使用用户访问令牌进行调用，而不是应用访问令牌

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T13:02:38.523

根据[https://developers.facebook.com/blog/post/498/](https://developers.facebook.com/blog/post/498/) ...您将需要`publish_stream`权限。我尝试了第一个示例，它对我有用。

# c# - 如何将 BitmapImage 转换为 Icon？

> ID：11247516
> 
> 赞同：4
> 
> 时间：2012-06-28T15:05:01.573
> 
> 标签：c#, bitmapimage

在我的应用程序中，我必须`List<MenuItem>`在 WCF 中向我的 shell 扩展发送一个。这些 MenuItem 由一个图标和一个标签组成。图标的类型是，`System.Drawing.Icon`但我必须从`System.Windows.Media.Imaging.BitmapImage`. 有没有办法转换`BitmapImage`成`Icon`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T15:16:45.560

我的想法：

首先将 BitmapImage 转换为 Bitmap

[将 BitmapImage 转换为 Bitmap，反之亦然](https://stackoverflow.com/questions/6484357/converting-bitmapimage-to-bitmap-and-vice-versa)

然后另存为图标

[http://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/4a10d440-707f-48d7-865b-1d8804faf649/](http://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/4a10d440-707f-48d7-865b-1d8804faf649/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:07:56.537

我自己还没有以这种方式创建图标，但也许你可以从图形到图标中受益。然后你可以选择插值模式（这可能会很好）。在此处查看示例：[http ://www.dreamincode.net/code/snippet1684.htm](http://www.dreamincode.net/code/snippet1684.htm)

# android - AsyncTask：未从后台线程修改

> ID：11247517
> 
> 赞同：-1
> 
> 时间：2012-06-28T15:05:02.923
> 
> 标签：android, multithreading, android-asynctask, adapter

AsyncTask：我在后台线程中删除了所有可能的 ui 操作，运行 5 或 6 次后仍然出现这种异常。请帮我。

> java.lang.IllegalStateException：适配器的内容已更改，但 ListView 没有收到通知。确保适配器的内容不是从后台线程修改的，而只是从 UI 线程修改的。[在带有适配器的 ListView(2131427449, class android.widget.ListView) 中...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:28:32.367

Try to call `notifyDataChanged()` or `requestLayout();` from your `UI` Thread.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:58:52.470

好的，它有效。我在发布进度时使用了一个处理程序来添加项目（即 AsyncTask + Handler）：

```
private void addAdapter(Item item)
{
    Message message = addhandler.obtainMessage();
    message.what = 1;
    message.obj = item;
    addhandler.sendMessage(message);
}

private Handler addhandler = new Handler() {
    public void handleMessage(Message msg)
    {
        switch (msg.what) {
        case 1:
            if (msg.obj != null) {
                _adapter.add((Item) msg.obj);
            }
            break;
        default:
            break;
        }
    }
}; 
```

# regex - MSBuild Community Taks RegexReplace 从路径中删除尾部斜杠

> ID：11247522
> 
> 赞同：2
> 
> 时间：2012-06-28T15:05:17.103
> 
> 标签：regex, msbuild, msbuildcommunitytasks

我正在尝试使用 MSBuild 社区任务从 OutputPath 的末尾删除斜线

这就是我到目前为止所拥有的。

```
<RegexReplace Input="$(OutputPath)" Expression="\$" Replacement="" Count="1">
 <Output ItemName="FormattedOutputPath" TaskParameter="Output" />
</RegexReplace>
<Message Text="@(FormattedOutputPath)"/> 
```

不幸的是，该消息只是返回我的路径，最后仍然带有斜杠。路径是 C:\MyDirectory\

看来我的表达不正确

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T23:12:29.907

斜杠用作转义字符，因此在模式中您必须用另一个斜杠转义斜杠字符：

```
<RegexReplace Input="$(OutputPath)" Expression="\\$" Replacement="" Count="1">
  <Output ItemName="FormattedOutputPath" TaskParameter="Output" />
</RegexReplace>
<Message Text="@(FormattedOutputPath)"/> 
```

为了更好地理解转义，请参见以下示例：

1.  `$`表示行/字符串的结尾
2.  `\$`代表美元符号字符
3.  `\\`表示斜线字符
4.  `\\$`表示行/字符串末尾的斜线字符

# facebook - 评论插件 - 移动属性？

> ID：11247523
> 
> 赞同：0
> 
> 时间：2012-06-28T15:05:17.430
> 
> 标签：facebook, attributes, comments, facebook-comments

在开发人员页面（http://developers.facebook.com/docs/reference/plugins/comments/）上，我可以看到 facebook 评论社交插件具有以下属性。

属性 href - 此评论插件的 URL。Facebook 上的新闻提要故事将链接到此 URL。width - 插件的宽度（以像素为单位）。建议的最小宽度：400 像素。colorscheme - 插件的配色方案。选项：'light'、'dark' num_posts - 默认显示的评论数。默认值：10。最小值：1 移动 - 是否显示移动优化版本。默认值：自动检测。

对于移动设备，它给了我默认值，但其他的是什么？假/真，是/否，开/关，无/ ????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:57:58.440

您可以通过将 mobile 参数设置为 false 来关闭此行为。看到移动版本忽略了宽度参数，而是具有 100% 的流动宽度，以便在纵向/横向切换情况下很好地调整大小。您可能需要为您的移动网站调整 CSS 以利用此行为。如果愿意，您仍然可以通过容器元素控制宽度。

# asp.net - 实体框架中的表值函数

> ID：11247524
> 
> 赞同：1
> 
> 时间：2012-06-28T15:05:27.023
> 
> 标签：asp.net, entity-framework-4, linq-to-entities

我最近了解到 Entity Framework 4.1 不允许使用表值函数。阅读了对[实体框架中这个正确答案表值函数的评论？](https://stackoverflow.com/questions/1294667/table-valued-functions-in-entity-framework)- 我想我需要下载 2011 年 6 月的 CTP 才能在我的项目中使用 TVF。

我下载并安装了 CTP。现在有很多新功能可供选择，但我仍然无法导入 TVF。我转到我的 EDMX 文件，右键单击并转到“从数据库更新模型”，但即使该博客另有说明，也无法导入*DATABASENAME/Programability/Functions/Table-valued Functions/中的所有内容。*

然后我决定使用最新版本的 EF - 我使用 NuGet 包管理器下载了 EF v4.3.1，但它仍然没有用。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:22:34.747

您可以将 TVF 与 EF 4.0 一起使用。看看这里

[EF 中的表值函数](http://blog.ondrejsv.com/post/Using-table-valued-database-functions-with-Entity-Framework-40.aspx)

# php - 变量不会存储在会话中

> ID：11247525
> 
> 赞同：3
> 
> 时间：2012-06-28T15:05:28.213
> 
> 标签：php, session, pdo, session-variables

因此，当用户登录到控制面板时，我试图存储用户的“排名”，该控制面板根据给定的排名显示不同的选项。我使用与存储和显示用户名相同的方法，该用户名显示在每个页面的顶部并且工作正常。我一生都无法弄清楚为什么它对排名值不起作用，但我知道它不会在会话中保存它。这是不起作用的位；

```
$username = ($_POST['username']);
$password = hash('sha512', $_POST['password']);

$dbhost = 'mysql:host=██████████████████████;dbname=███████████';
$dbuser = '███████████';
$dbpassword = '████████████████';

try {
$db = new PDO($dbhost, $dbuser, $dbpassword);
$statement = $db->prepare("select password from users where email = :name");
$statement->execute(array(':name' => $username));
$result = $statement->fetch();
$pass = $result[password];
$rank = $result[rank];}

catch(PDOException $e) {echo $e->getMessage();}

if ($password == $pass) {

session_start();
$_SESSION['username'] = $username;
$_SESSION['rank'] = $rank;
header('Location: http://█████████.ca/manage.php');

}
else{
include'../../includes/head.inc';
echo '<h1>Incorrect username or password.</h1>';
include'../../includes/footer.inc';
} 
```

我对整个 PDO 也很陌生，因此我验证密码的方法非常粗略。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:11:05.443

并不是说它不保存排名 - 显然您没有从查询中检索它。您只要求输入密码。用户名来自其他地方：

```
$db = new PDO($dbhost, $dbuser, $dbpassword);
$statement = $db->prepare("select password from users where email = :name");

// Should be select password, rank

$statement->execute(array(':name' => $username));
$result = $statement->fetch();
$pass = $result[password];
$rank = $result[rank];} 
```

# php - htaccess 将临时旧目录重定向到当前目录

> ID：11247527
> 
> 赞同：0
> 
> 时间：2012-06-28T15:05:33.007
> 
> 标签：php, .htaccess, http-status-code-404

在生产 A_tmp 几周后，我将一个子目录名称从 website/A_tmp/para_1/para_2 更改为 website/A/para_1/para_2 （使用 htaccess 重写 url）。现在，1 年后，谷歌仍然在 A_tmp 错误上报告 404。

如何解决这个问题？如果 htaccess 可以做到这一点，如何写呢？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:12:48.397

你可以在htaccess中做301重定向，这样google就会知道这个资源被移动了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:23:17.480

像这样创建一个 301 规则。通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} "(www\.)?example\.com$ [NC]
RewriteRule ^A_tmp(/.*|)$ A/$1 [L,R=301,NC] 
```

# c# - 从 ActionResult 获取请求类型

> ID：11247528
> 
> 赞同：0
> 
> 时间：2012-06-28T15:05:39.117
> 
> 标签：c#, asp.net-mvc-3, post, actionresult, controllercontext

我正在扩展`ActionResult`课程。在`ExecuteResult`方法中，我想检查操作是 a`GET`还是 a`POST`但是类中似乎没有属性`ControllerContext`可以让我这样做。有人知道如何从 a 检查请求类型`ControllerContext`吗？

```
public override void ExecuteResult(ControllerContext context)
{
    //See if the request was POST
    if (context.HttpContext.Request.?)
    {
        DoStuff();
    }

    DoOtherStuff();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:07:59.393

您可以使用

```
context.HttpContext.Request.HttpMethod 
```

[http://msdn.microsoft.com/en-us/library/system.web.httprequest.httpmethod%28v=vs.100%29.aspx#Y0](http://msdn.microsoft.com/en-us/library/system.web.httprequest.httpmethod%28v=vs.100%29.aspx#Y0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:28:41.320

试试这个：

```
 public HttpVerbs RequestHttpVerb(ControllerContext context)
    {
        return (HttpVerbs)Enum.Parse(typeof(HttpVerbs), context.HttpContext.Request.HttpMethod, true);
    }

    public override void ExecuteResult(ControllerContext context)
    {
        if (this.RequestHttpVerb(context) == HttpVerbs.Post)
        {

        }
    } 
```

# ruby - 非自动增量 rails/postgresql 列

> ID：11247531
> 
> 赞同：0
> 
> 时间：2012-06-28T15:05:46.123
> 
> 标签：ruby, ruby-on-rails-3, postgresql-9.1

我正在尝试创建一个包含重复信息的模型/表格。这样做的原因是为了可以将相同的数据写入不同用户下的表中，并为每个用户找到。但是，我想要一种快速简便的方法来识别哪些信息与其他信息重复。我认为最好的方法是让 item_id 的排序随着表中的每个“集合”条目而增加。有没有办法做到这一点，而不包括另一个存储信息而不将其归因于用户的表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:13:40.123

这就是我设置您的关联的方式：

```
class User < ActiveRecord::Base
 has_many :records
end

class Record < ActiveRecord::Base
 belongs_to :user :foreign_key => user_id
end 
```

然后您必须在保存记录之前将 user_id 属性设置为 current_user 的 id。

您可以通过以下方式检索行：

```
User.first.records
Record.first.user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T17:30:31.227

实际上我正在寻找的是一个 PostgreSQL 序列。这是我最终在迁移中使用的代码

```
def up
  ActiveRecord::Base.connection.execute("create sequence action_id_seq;")
end

def down
  ActiveRecord::Base.connection.execute("drop sequence action_id_seq;")
end 
```

然后在查询时我使用

```
Action.find_by_sql("SELECT NEXTVAL('action_id_seq') AS action_id").first.event_id 
```

出于我的目的，这工作得很好，我可以使用它来拥有一个我控制增量的唯一 ID。

# tfs - 我们转向持续集成时的分支模型

> ID：11247541
> 
> 赞同：2
> 
> 时间：2012-06-28T15:06:09.727
> 
> 标签：tfs, continuous-integration, teamcity

目标是能够自动化构建，因此每当开发人员签入他们的代码（或合并到具有此触发器设置的特定分支）时，代码都应该发送到开发和质量保证环境。我想推动生产需要一些人工参与。

注意：这是一个遗留应用程序，因此我们无法控制设置了多少东西。团队规模约为 10 名开发人员。

到目前为止我的分支策略：

```
[1]Developer branch
[2]Main (Production) branch 
```

当开发人员创建新功能时，他们的开发人员分支分支如下：`dev_branch_feature_xyz`

当他们想要推送到 DEV 或 QA 站点进行测试时，他们会合并到开发人员分支中，这将触发 TeamCity 首先从主分支中提取任何更改，然后编译等，然后推送到 DEV 和 QA 服务器。

现在，如果 QA 已经签署了一项功能并准备好投入生产，如何将正确的代码拉到 Main 分支并将更改推送到我们的 UAT 环境，然后再投入生产？

例如，feature#1 可能会合并到 dev，然后 feature#2，然后程序员可能会将 feature#1 的错误修复再次合并到 dev，并且可能会再次合并 feature#2，所以 DEV 分支现在有部分feature#1 和 feature#2，现在没有办法挑选代码推送到 MAIN 分支（如果说 feature#1 已准备好用于生产）。

**另外，这是一个合理的策略吗？大家有看到什么问题吗？**

*记住：目前大部分都是手动的（合并、推送到服务器），但目标是转向使用 TeamCity，所以我现在需要设置分支策略。*

# google-maps - 谷歌航点地图。没有'A'点

> ID：11247547
> 
> 赞同：0
> 
> 时间：2012-06-28T15:06:18.460
> 
> 标签：google-maps, traveling-salesman, jquery-waypoints

我正在建立一个航点谷歌地图。我有起点和终点，它们位于同一位置。它似乎用我的航点绘制了一张地图，但起点和终点位置不在我的地图上。没有A点。必须有其他人必须处理这个问题。

有什么帮助吗？这是我的代码。来自 Google 示例的标准代码：

```
function calcRoute() {
  depotNumber = document.getElementById("depot").value;
  var start = fullDepotAddress;   
  var end = fullDepotAddress;    
  var waypts = [];
  var checkboxArray = document.getElementById("stores");
  for (var i = 0; i < checkboxArray.length; i++) {
    if (checkboxArray.options[i].selected == true) {
      waypts.push({
      location:storeAddress[ checkboxArray[i].value],
      stopover:true});
    }
  }

var request = {
  origin: start, 
  destination: end,
  waypoints: waypts,
  optimizeWaypoints: true,
  travelMode: google.maps.DirectionsTravelMode.DRIVING
};

directionsService.route(request, function(response, status) {
  if (status == google.maps.DirectionsStatus.OK) {
    directionsDisplay.setDirections(response);
    var route = response.routes[0];
    var summaryPanel = document.getElementById("directions_panel");
    summaryPanel.innerHTML = "";
    // For each route, display summary information.
    for (var i = 0; i < route.legs.length; i++) {
      var routeSegment = i + 1;
      summaryPanel.innerHTML += "<b>Route Segment: " + routeSegment + "</b><br />";
      summaryPanel.innerHTML += route.legs[i].start_address + " to ";
      summaryPanel.innerHTML += route.legs[i].end_address + "<br />";
      summaryPanel.innerHTML += route.legs[i].distance.text + "<br /><br />";
    }
  }
});
} 
```

此外，航点似乎不遵循旅行推销员算法。它让我的路线走遍了。路线应该优化吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:12:38.087

那么开始/结束坐标和一些航点呢？

更新： [这](http://www.geocodezip.com/v3_GoogleEx_directions-waypointsD_1.html)是带有可拖动方向的路线。请注意，“A”标记位于“I”标记下方（将“I”标记拖离“A”标记以验证这一点）。

# javascript - 可以从 Chrome 扩展的后台 JS 中注册键绑定吗？

> ID：11247548
> 
> 赞同：0
> 
> 时间：2012-06-28T15:06:20.763
> 
> 标签：javascript, google-chrome, google-chrome-extension, keyboard-shortcuts

我有一个[自定义键盘快捷键的 Chrome 扩展，](https://chrome.google.com/webstore/detail/logpjaacgmcbpdkdchjiaagddngobkck)它当前使用内容脚本注册快捷键。是否可以在从 background.html 调用的后台 JS 文件中注册这些？在我的测试中，似乎在那里注册的绑定被忽略了，因为它们直接进入页面。

如果重要的话，我正在使用[https://github.com/madrobby/keymaster](https://github.com/madrobby/keymaster)创建/监听键绑定。例如，使用类似的东西：

```
key('a', function(){ alert('you pressed a!') }); 
```

...在我的 background.js 文件中被忽略，但如果在内容脚本中使用它可以正常工作。有什么方法可以在我的 background.js 中监听按键吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T13:30:58.217

你不能...

您可能已经知道，后台页面在不同的页面（甚至是不同的进程）中运行。并且基于 javascript 的处理程序在它们所在的页面上工作。你所说的只有在 Chrome 公开一些 API 时才有可能。

但是，您可能想在[http://code.google.com/chrome/extensions/experimental.keybinding.html](http://code.google.com/chrome/extensions/experimental.keybinding.html)上检查 chrome 的键绑定功能（实验性） ，尽管它仅限于特定的键绑定子集

正如 Rob W 所提到的，设计的键绑定仅适用于可以插入内容脚本的页面，这或多或少归结为 http、https 和文件协议（虽然我不确定文件协议），但 Chrome 的除外网上商店

# mercurial - 有没有一个简单的 Mercurial repo 下载器

> ID：11247550
> 
> 赞同：3
> 
> 时间：2012-06-28T15:06:38.817
> 
> 标签：mercurial

我在我的主机上使用 TurtoiseHg 并且效果很好，但是我有时想在没有安装客户端的其他机器（Windows）上快速下载一个 repo。

对于 Git 和 SVN，我发现这个小程序[下载 SVN（和 GIT）](http://downloadsvn.codeplex.com/)效果很好，但我正在努力为 Mercurial 找到类似的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T00:46:44.463

如果在给定的 hgweb 安装上启用了该 zip 文件链接，则只需单击该链接即可（默认为不启用，IIRC）。除此之外，不是真的，因为没有用于像这样遍历文件内容的 hg wireprotocol 命令。

# ios - 如何在 iOS iPad 模拟器中调出 iOS 多任务栏

> ID：11247551
> 
> 赞同：25
> 
> 时间：2012-06-28T15:06:42.703
> 
> 标签：ios, ipad, ios-simulator, multitasking

我正在尝试测试我的应用程序在“新”启动时以及从多任务状态启动时的启动状态。在 iPad 上，用户可以双击 Home 按钮两次以调出多任务栏，然后您可以关闭所有不再需要运行的应用程序。

这过去很容易，以前版本的模拟器实际上有一个主页按钮，但现在没有了。为了进入主屏幕，您必须进入模拟器 -> 硬件 -> 主页，并且没有列出模拟双击它的选项。

我错过了什么吗？或者，是否不再有办法在不完全删除它们的情况下杀死在 iPad 模拟器中启动后正在运行的应用程序。如果我每次进行更改以测试我的应用程序的这一部分时不必每次都将应用程序推送到我的物理 iPad，那我会很棒。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-28T15:08:50.020

如果您使用的是视网膜 iPad 模拟器，您最终会得到无主页按钮的版本。转到硬件->设备-> iPad，您将获得一个带有主页按钮的模拟器，您可以双击它。

您也可以使用主页按钮快捷方式（默认为 cmd+shift+h）并双击它会触发多任务栏

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-28T15:10:36.587

主页按钮现在对 iPad 模拟器隐藏。但是，主页按钮可能由以下命令触发：

```
Apple (command) + Shift + H 
```

您应该执行此命令 2 次 - 就像按两次主页按钮一样。

这将显示多任务栏

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T15:09:49.513

如果模拟器认为没有足够的空间来显示它，它会隐藏挡板。您可以尝试旋转它，或将其设置为较小的缩放比例。

但是您也可以通过键盘快捷键 cmd+shift+h 来点击主页按钮；这也适用于主页按钮双击。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-08T18:13:12.377

使用键盘按主页按钮（cmd + shift + h）

要终止您的应用程序，请将其从任务栏中向上拖动

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-20T13:38:00.063

首先，重要的是，您需要**显示设备边框**：在`Xcode`中，选择 menu `Window/Show Device Bezel`。

然后它将像真实设备一样工作：从底部滑动以显示停靠栏，将您想要的应用程序拖到打开应用程序的右侧。

# .net - .NET 任务完成后的清理

> ID：11247553
> 
> 赞同：1
> 
> 时间：2012-06-28T15:06:51.017
> 
> 标签：.net, asynchronous, task-parallel-library

我有以下处理 INotification 的代码（自定义界面）

```
var mgr = new NotificationManager();
var task = new Task(() => mgr.Send(notification));
task.Start(); 
```

问题是一旦任务完成，我需要对通知进行一些清理。使用 Task Parallel 库执行此操作的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T15:09:35.713

您可以使用`ContinueWith`. 这是文档[ContinueWith](http://msdn.microsoft.com/en-us/library/dd270696.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T15:16:46.560

您可以提供多语句 lambda：

```
Task.Factory.StartNew(() => { mgr.Send(notification); Cleanup(); }; 
```

# java - java--在运行 java 应用程序时跟踪使用的带宽和其他参数的库/方法

> ID：11247558
> 
> 赞同：0
> 
> 时间：2012-06-28T15:07:07.347
> 
> 标签：java, web-crawler

我正在努力用 Java 创建一个网络爬虫。爬虫访问网站，使用 JDBC 访问/存储数据库中的数据，并将文件存储在本地或云存储中。

作为爬取的一部分，我想记下爬虫的具体使用细节——

参数如——

```
Number of sites visited (HTTP+HTTPS)
Number of bytes of data received over one run of the crawler
Number of bytes of data sent over one run of the crawler
Number of rows updated/inserted/deleted/selected via JDBC over that run of the crawler
Number of bytes of data stored+accessed in local machine (on which the crawler is running)
Number of bytes of data stored+accessed in cloud storage (like Amazon S3) 
```

有没有什么快速的方法可以完成上述部分或全部？也许一些必须插入我的 java 应用程序的库？当爬虫执行某些操作（如访问网站、下载数据等）时，我是否必须在每个阶段单独记下所有上述参数？我不希望程序仅仅因为我想测量和跟踪上述参数而陷入困境。

我希望将爬虫用作桌面应用程序和网络应用程序，因此欢迎两者的解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:51:35.410

> 当爬虫执行某些操作（如访问网站、下载数据等）时，我是否必须在每个阶段单独记下所有上述参数？

是的。

您正在为您的应用程序创建的全局统计类中将数字添加到整数或长整型值。您的程序不应该陷入执行加法的困境。

# php - 用 PHP 注释掉其他评论？

> ID：11247561
> 
> 赞同：13
> 
> 时间：2012-06-28T15:07:35.430
> 
> 标签：php, comments

我可以注释掉有其他注释的行吗？

```
/*
 * comment 1
 */

$var = 0;
$if();

/*
 * comment 2
 */
$var2 = 2; 
```

有没有办法将所有这些行一起注释掉？我经常有一个很长的函数或逻辑，并想将其余的注释掉以进行测试。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T15:14:11.593

您是否考虑过将代码放在 if(0) 块中来跳过代码？

例如：

```
<?php
if( 0 ) {
     print("This code is 'commented' out");

... other commented out code is here ...

}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:16:08.770

来自 PHP 手册：

> > 'C' 风格的注释在遇到的第一个 */ 处结束。确保不要嵌套“C”样式的注释。如果你试图注释掉一大块代码，很容易犯这个错误。
> 
> ```
> <?php
>  /*
>     echo 'This is a test'; /* This comment will cause a problem */
>  */
> ?> 
> ```

您也许可以使用 Heredoc 语法做一些事情，例如：

```
<<<VAR    
    /*
     * comment 1
     */

    $var = 0;
    $if();

    /*
     * comment 2
     */
    $var2 = 2;
VAR; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:13:43.207

不，最好的办法是`/* */`谨慎使用注释块，并使用更多的行注释`//`或`#`.

一个注释块可以隐藏多行，即使这些行有单行注释。但是，注释块不能与其中的另一个注释块一起使用。

这里的语法：http: [//php.net/manual/en/language.basic-syntax.comments.php](http://php.net/manual/en/language.basic-syntax.comments.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T15:23:32.047

大多数代码编辑器允许您使用`//`. 通常是 的某种组合`Ctrl+Shift/Alt+C`。非常方便检查您的文本编辑器的参考。

# c++ - OpenCV：基于三角形选择倾斜图像

> ID：11247563
> 
> 赞同：2
> 
> 时间：2012-06-28T15:07:54.863
> 
> 标签：c++, image, opencv, coordinate-transformation, skew

我正在尝试使用 OpenCV 2.0 在图像中获取三个点，它们基本上构成了一个三角形。我试图用这三点做的是用它们作为倾斜的参考。下图最好地解释了我想要实现的目标：

![在此处输入图像描述](../Images/ad1da4996cce75e351d4cdfc45c28866.png)

```
 Before                                             After 
```

我保证我的图像采用上述格式，所以我知道我需要积极关注的唯一一点是形成 90 度角的点。

简而言之，我只是试图将我的图像相对于形成 90 度角的点的位置倾斜。

有什么办法可以在 OpenCV 中做到这一点？（最好在 C++ 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:45:48.267

好吧，我从来没有使用过这种类型的转换，但我可以以某种方式帮助你。

经过一番谷歌搜索后，我在 StackOverflow 上发现了与您类似的问题：

[使用透视变换倾斜图像](https://stackoverflow.com/questions/2446494/skewing-an-image-using-perspective-transforms)

**雅各布**对这个问题有一个很好的答案。似乎从所有这些类型的转换（旋转、剪切、平移和缩放）中，只有剪切可以帮助您（见下图）：

![剪切图像](../Images/2a18d9e81b52847bf5e7b5adf290a1c5.png)

接下来是变换矩阵：

![在此处输入图像描述](../Images/c7a248835dfed43dfa955a5193a7e1f5.png)

要在 OpenCV 中进行这种类型的转换，有函数[cv::warpPerspective](http://opencv.willowgarage.com/documentation/cpp/imgproc_geometric_image_transformations.html#cv-warpperspective) - 所以试试吧。

希望能帮助到你。

# tsql - 具有左外连接的列的总和

> ID：11247574
> 
> 赞同：0
> 
> 时间：2012-06-28T15:08:50.970
> 
> 标签：tsql

我正在尝试获取至少在记录中授权的人的所有记录的计数。基本上，一条记录可以有多个与之关联的人。我想返回 Total Records 的计数、至少 1 人获得授权的 Authorized Records 总数，以及未授权与记录关联的人的 NotAuthorized 记录总数。一个人是否被授权每条记录或是否有 3 人被授权该记录并不重要，这应该在授权计数器上加 1。

当前查询为每条记录添加的每个人增加 Auth 和 Non auth，而不是每条记录增加一个。如果没有人被分配到也应该计入 Not Auth 的记录中。

```
SELECT Count(DISTINCT Record.RecordID) AS TotalRecords,
SUM(CASE WHEN People.PersonLevel = 1 THEN 1 ELSE 0 END) AS Authorized,
SUM(CASE WHEN People.PersonLevel <> 1 THEN 1 ELSE 0 END) AS NotAuthorized
FROM Record
LEFT OUTER JOIN RecordPeople ON Record.RecordID = RecordPeople.RecordID
LEFT OUTER JOIN People ON RecordPeople.PersonID = People.PersonID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:12:41.840

像这样的东西看起来很丑（未经测试），但应该更好。

由于您必须按记录求和（至少 1 个授权或未求和），我认为没有子查询就无法获得它...

```
SELECT
  COUNT(a.record) AS TotalRecords, 
  SUM(a.authorizedRecord), 
  SUM(a.nonAuthorizedRecord) FROM
    (SELECT
        r.RecordId AS record, 
        CASE WHEN SUM(CASE WHEN p.PersonLevel = 1 THEN 1 ELSE  0 END) >= 1 THEN 1 ELSE 0 END  AS authorizedRecord,
        CASE WHEN SUM(CASE WHEN COALESCE(p.PersonLevel, 0) <> 1 THEN 1 ELSE 0)>=1 THEN 1 ELSE 0 END AS nonAuthorizedRecord
     FROM Record r
     LEFT OUTER JOIN RecordPeople ON Record.RecordID = RecordPeople.RecordID
     LEFT OUTER JOIN People ON RecordPeople.PersonID = People.PersonID
     GROUP BY r.RecordId
     ) AS a 
```

# c++ - 如何使用无效*

> ID：11247584
> 
> 赞同：1
> 
> 时间：2012-06-28T15:09:25.400
> 
> 标签：c++, void-pointers

我正在实现一个简单的`merge`函数，但我被卡住了，因为编译器给了我无法解释的错误。这是我的`merge`功能：

```
void merge(void *a, int beg, int middle, int end, int (*cmp)(const void*, const void*
{
  std::stack<void*> first;
  std::stack<void*> second;

  for(int i = beg; i < middle; i++) {
   first.push(a+i);
  }
  for(int i = middle; i < end; i++) {
    second.push(a+i);
  }

  for(int i = beg; i < end; i++) {
    if(first.empty()) {
      void *tmp = second.top();
      second.pop();
      a+i = tmp;
    } else if(second.empty()) {
      void *tmp = first.top();
      first.pop();
      a+i = tmp;
    } else if(cmp(first.top(), second.top())) {
      void *tmp = first.top();
      first.pop();
      a+i = tmp;
    } else {
      void *tmp = second.top();
      second.pop();
      a+i = tmp;
    }
  }
} 
```

这是错误：

```
sort.h: In function `void merge(void*, int, int, int, int (*)(const void*, const void*))':
sort.h:9: error: pointer of type `void *' used in arithmetic
sort.h:12: error: pointer of type `void *' used in arithmetic
sort.h:19: error: pointer of type `void *' used in arithmetic
sort.h:19: error: non-lvalue in assignment
sort.h:23: error: pointer of type `void *' used in arithmetic
sort.h:23: error: non-lvalue in assignment
sort.h:27: error: pointer of type `void *' used in arithmetic
sort.h:27: error: non-lvalue in assignment
sort.h:31: error: pointer of type `void *' used in arithmetic
sort.h:31: error: non-lvalue in assignment 
```

谁能帮我？TIA。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T15:14:25.757

指针算术是不可能的`void*`，因为`void`它没有大小，并且指针算术需要根据类型的大小来计算内存地址。

如果您期望`beg`,`middle`和`end`来表示*字节偏移量*，您应该使用`char`指针来代替（一个`char`是一个字节）。

如果您想编写一个适用于任何类型的*通用函数*，请不要使用`void`指针而是模板：

```
template <typename t>
void merge(T *a, int beg, int middle, int end, int (*cmp)(const T*, const T*))
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:14:14.960

在`first.push(a+i);`中，您正试图向指针添加`i`偏移`void *`量`a`。这是非法的。

您可以将偏移量添加到任何其他“某物指针”，因为该物将被定义并且将在内存中具有定义的大小。`sizeof(something)`因此，添加 1 的偏移量将意味着在内存中向前移动。但`void`没有定义的大小。因此，您不能将偏移量与`void *`指针一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T15:18:38.173

问题`void*`在于它是一个没有类型的地址。当你要求`a+i`你说“`i`进一步移动元素”时，没有指定什么样的元素。是一个字节，一个整数，一辆车，一栋房子，还是一个大陆？

In C++ you don't have to use this kind of stuff, you can use templates and let the compiler figure out how to handle different types.

```
template<class T>
void merge(T* a, etc. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T15:20:29.957

Function prototype probably should look something like this:

```
void merge(void **a, int beg, int middle, int end, int (*cmp)(const void*, const void*)); 
```

Then you can access every array member by its index without any problem.

Note: The size of object pointed by void is unknown as previously mentioned by Ferdinand (therefore a + i can't be applied), but the size of void* is known therefore updating prototype in a such way does the trick.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T15:15:48.013

我可以告诉你你的一个错误。您正在尝试对 a 进行指针运算`void*`。您会看到，当您添加到指针时，您添加的是指针类型中的字节数。因此，如果您添加到 a `void*`，编译器无法知道要添加多少字节，因为`void*`没有类型。因此，如果您想在字节级别执行此操作，请转换为 a`char*`或您想要的任何其他指针级别。如果你想一个字节一个字节地做事，你可以取 a `void*`，但转换成`char*`.

# mysql - MySQL触发器为新行设置值并更新同一个表中的另一个

> ID：11247590
> 
> 赞同：12
> 
> 时间：2012-06-28T15:09:50.430
> 
> 标签：mysql, database-trigger

我有一张表格，用于跟踪特定项目的费用。这些费用会随着时间而改变，所以我有两列（startDate、endDate），当前的费用集在遥远的将来总是有一个 endDate。我已经有一个触发器，用于对正在输入的新行进行一些计算，但我还希望发生的是，如果我输入一个已经有条目的项目，我想将上一个条目的 endDate 设置为前一天新条目的 startDate 和新的 endDate 到预定的遥远日期。这是我首先尝试的代码：

```
CREATE
DEFINER=`root`@`%`
TRIGGER `im`.`splitBeforeIns`
BEFORE INSERT ON `im`.`split`
FOR EACH ROW
BEGIN
    SET NEW.tcPercent = (NEW.tcOfficeFee / NEW.globalFee) * 100 , NEW.proPercent = 100 - NEW.tcPercent, NEW.endDate = 20501231;
    UPDATE im.split set endDate = ADDDATE(NEW.startDate, -1) where procKey = NEW.procKey AND endDate = 20501231;
END$$ 
```

我得到的错误是：

```
ERROR 1442: Can't update table 'split' in stored function/trigger because it is already used by statement which invoked this stored function/trigger. 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-28T15:19:25.790

这个问题的答案可能不受欢迎，但它是：你不能那样做。

触发器无法**更新与该行相同的表**的另一行，触发器是从中调用的。

这样做的典型方法是创建一个存储过程，插入/更新目标表，然后更新其他行，所有这些都在一个事务中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-28T17:06:17.683

如果您在 (procKey,EndDate) 上定义了 UNIQUE KEY，那么也许您可以删除触发器的第二行。还要从触发器中删除硬编码的日期。

```
CREATE
DEFINER=`root`@`%`
TRIGGER `im`.`splitBeforeIns`
BEFORE INSERT ON `im`.`split`
FOR EACH ROW
BEGIN
    SET NEW.tcPercent = (NEW.tcOfficeFee / NEW.globalFee) * 100 , NEW.proPercent = 100 - NEW.tcPercent;
END$$ 
```

并像这样[*在重复键更新上插入*](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)：

```
INSERT INTO im.split ...
ON DUPLICATE KEY UPDATE
endDate = ADDDATE(startDate, -1); 
```

您可能还想在 im.split 中定义 endDate 如下

```
enddate DATE DEFAULT '2050-12-31' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-19T12:34:23.960

我设法让它工作，通过创建一个“包装表”，它使用与目标表相同的字段定义，但使用 FEDERATED 存储引擎。我定义的联合服务器以相同的 mysql 服务器/本身为目标，因此位于“localhost”。然后我所做的触发器更改了包装表中的一行。当然，你必须非常确定你在触发器中做了什么，以避免递归循环。也可能性能不是那么好。我没有测试过性能，但它已经在生产环境中工作了多年。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T15:19:33.823

来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/stored-program-restrictions.html)：

> 在存储的函数或触发器中，不允许修改调用函数或触发器的语句已经使用（用于读取或写入）的表。

您将需要找到其他方法来做您想做的事情。

# wordpress - 所有页面都转到我的主页

> ID：11247591
> 
> 赞同：0
> 
> 时间：2012-06-28T15:09:52.087
> 
> 标签：wordpress, redirect

在我的网站[http://www.smithdesign.us](http://www.smithdesign.us)上，所有页面都转到我的主页。我尝试了许多不同的东西，但到目前为止没有任何效果。任何帮助都很棒。

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:11:46.547

您的 .htaccess 文件中很可能有问题。尝试删除其内容，重新保存永久链接结构，如果 .htaccess 文件未自动更新，请使用 Wordpress 告诉您的内容进行更新，然后清除浏览器缓存并重试。

# java - Java将字节[]转换为图像

> ID：11247595
> 
> 赞同：3
> 
> 时间：2012-06-28T15:10:04.743
> 
> 标签：java, sql, playframework, javax.imageio

我知道这似乎是一个常见问题，但我查看了整个互联网，并尝试了许多不同的教程和方法来做到这一点。我想我很接近，但不确定。我也在使用 Play Framework，但它应该与 java 相同。这是我的错误

```
javax.image.IIOException: I/O error reading PNG header!
   at com.sun.plugins.png.PNGImageReader.readHeader(Unknown Source)
   ...
   ...
Caused by: java.io.EOFException
at javax.imageio.stream.ImageInputStreamImpl.readFully(Unknown Source)
  ... 
```

这是我的代码，我从表单中获取图片并将图像转换为 byte[] 并存储在 MS SQL db 中。

```
@Transactional
public static Result submitTrailer(){
     filledForm = newTrailerForm.bindFromRequest();
     MultipartFormData body = request().body().asMultipartFormData();
     FilePart picture = body.getFile("file");
     String fileName = picture.getFilename();
     System.out.println(fileName);
     String contentType = picture.getContentType(); 
     System.out.println(contentType);
     final File file = picture.getFile();
     filledForm.get().setContentType(contentType);

     try{
     BufferedImage originalImage = ImageIO.read(file);
     ByteArrayOutputStream baos = new ByteArrayOutputStream();
     ImageIO.write(originalImage, contentType, baos);

     filledForm.get().setImage(baos.toByteArray());
     baos.flush();
     baos.close();
     filledForm.get().save();
     }catch(IOException e){
         e.printStackTrace();
     }

    return ok(views.html.index.index.render());
} 
```

这是我试图将字节 [] 转换回图像的地方，以便我可以在 html 中显示它

```
public File getConvertedPicture(){
    File imageFile;
    System.out.println("byteToImage() called");
    if(getImage()==null){
        System.out.println("getByteImage()==null");
        return null;

    }else{
        try{
        ByteArrayInputStream bis = new ByteArrayInputStream(getImage());
        imageFile=File.createTempFile("pattern", ".suffix");

        Iterator<?> readers = ImageIO.getImageReadersByFormatName("PNG");

        ImageReader reader = (ImageReader) readers.next();
         Object source = bis;
         ImageInputStream iis = ImageIO.createImageInputStream(source);
         reader.setInput(iis, true);
            ImageReadParam param = reader.getDefaultReadParam();

            Image image = reader.read(0, param);
            BufferedImage bufferedImage = new BufferedImage(image.getWidth(null), image.getHeight(null), BufferedImage.TYPE_INT_RGB);
            Graphics2D g2 = bufferedImage.createGraphics();
            g2.drawImage(image, null, null);

            ImageIO.write(bufferedImage,"PNG", imageFile);
            return imageFile;

        }
        catch(IOException e){
            e.printStackTrace();
            return null;
        }
    } 
```

我是初学者，这是我第一次使用play，也是第一次使用数据库。任何让这个工作的建议将不胜感激。

另外，在我的方法 getConvertedPicture() 中，我必须指定格式类型，无论如何要解决这个问题，以便用户可以上传他们想要的任何类型的图片。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T15:32:17.740

在不知道文件类型的情况下将字节转换为图像，我通常会这样做：

```
ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
BufferedImage image = ImageIO.read(bais); 
```

这将返回一个 BufferedImage，您可以将其保存为任何图片格式，例如 jpg。

要将图像写回字节数组：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ImageIO.write(image, "jpg", baos);
byte [] bytes = baos.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-13T07:57:08.143

尝试使用

```
byte[] byteArray=null; //need to initialize it
ImageIcon imageIcon = new ImageIcon(byteArray);
imageIcon.getImage(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T01:21:21.887

要将字节数组转换`byte[]`为图像，请使用`getImage()`. 可能最简单的方法是`ImageIcon`使用`ImageIcon(byte[])`构造函数实例化一个，然后调用`getImage()`. 这在下面的方法中得到了说明，特别是最后一行：

```
public Image createImage(){
   byte[] b = {-119, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82,
      0, 0, 0, 15, 0, 0, 0, 15, 8, 6, 0, 0, 0, 59, -42, -107,
      74, 0, 0, 0, 64, 73, 68, 65, 84, 120, -38, 99, 96, -64, 14, -2,
      99, -63, 68, 1, 100, -59, -1, -79, -120, 17, -44, -8, 31, -121, 28, 81,
      26, -1, -29, 113, 13, 78, -51, 100, -125, -1, -108, 24, 64, 86, -24, -30,
      11, 101, -6, -37, 76, -106, -97, 25, 104, 17, 96, -76, 77, 97, 20, -89,
      109, -110, 114, 21, 0, -82, -127, 56, -56, 56, 76, -17, -42, 0, 0, 0,
      0, 73, 69, 78, 68, -82, 66, 96, -126};
   return new ImageIcon(b).getImage();
} 
```

我认为这可以用于`png`、`gif`、`bmp`和`jpg`图像。字节数组不必像本例中那样进行硬编码。

此外，`new ImageIcon("image.png").getImage()`可用于从文件加载可显示的图像，其中`image.png`是文件名。

# php - 在 PHP 中解析一个 jquery 序列化字符串

> ID：11247596
> 
> 赞同：1
> 
> 时间：2012-06-28T15:10:06.143
> 
> 标签：php, jquery, yii

在人们跳过我之前，我已经看到了这个线程：[我如何 PHP 反序列化一个 jQuery 序列化的表单？](https://stackoverflow.com/questions/1792603/how-do-i-php-unserialize-a-jquery-serialized-form)

我的问题非常相似，但我的数据却大不相同。我正在使用 AJAX 调用来发布帖子，数据发布得很好（jQuery 是 1.7）。当用户单击几个链接并深入到此表单和 ajax 脚本时，表单和 AJAX 会动态加载。

AJAX 看起来像：（顺便说一句，我知道您应该对我们进行 .on() 但我似乎无法像 .live() 那样让它工作）

```
$('#ajaxCaptionForm').live('submit', function(e){
    e.preventDefault(); 
    $.ajax({
        'type':'POST',
        'data':{formData: $('#ajaxCaptionForm').serialize()},
        'success':function(){
            parent.$.fancybox.close();
        }
    });   
}); // closing form submit 
```

表格如下所示：

```
<form method="Post" action="localhost/controller" id="ajaxCaptionForm" name="ajaxCaptionForm">
    <label for="Caption">Caption</label><input type="text" id="Caption" name="Caption" value="Leaf lesions.">
    <label for="Keywords">Keywords</label>
    <p>Please seperate keywords by a comma
    <input type="text" id="Keywords" name="Keywords" value=""></p>
    <input type="hidden" id="imageID" name="imageID" value="87595">
    <input type="submit" value="Update Image" name="yt3" clicked="true">
</form> 
```

序列化的数据看起来像：（根据萤火虫）

```
formData=Caption%3DFruit%2Blesions.%26Keywords%3D%26imageID%3D87592 
```

当我回应回应时，我得到了这个：

```
"Caption=Leaf+symptoms+of+++CCDV.&Keywords=&imageID=87655" 
```

我的问题是：

1.  关键字字段为空，即使我输入内容
2.  当我更改内容时，标题字段不会在帖子中更改。
3.  我如何访问每个变量？标题、关键词和图片。$_POST 不起作用，也不：

    Yii::app()->request->getParam('imageID')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:29:03.083

看来您正在将序列化的表单数据（应该已经是 URL 编码的键 = 值）作为 JSON 键值对中的值。这是你打算做的吗？

在[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)中，请注意通过 .serialize() 发送的表单数据“是标准 URL 编码表示法的文本字符串”。

在[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)中，请注意数据设置“如果不是字符串，则转换为查询字符串”。

因此，您将采用“标准 URL 编码表示法”的文本字符串，然后将其作为数据设置中键值 JSON 对中的值。

我认为你的可能应该是这样的（忽略 live() v. on() 问题）：

```
$('#ajaxCaptionForm').live('submit', function(e){
    e.preventDefault(); 
        $.ajax({
            'type':'POST',
            'data':$('#ajaxCaptionForm').serialize(),
            'success':function(){
                parent.$.fancybox.close();
            }
        });   
    }); // closing form submit 
```

这也是为什么您无法按预期访问任何内容的原因，因为所有内容都在“formData”键下传递。您可以执行 print_r($_POST) 来验证这一点，或者 echo Yii::app()->request->getQueryString(); 两者都应该打印出您作为 PHP 数组提交的所有数据，向您显示键和值。

作为建议，这是何时使用 Firebug 控制台查看正在提交的参数的完美示例。

# eclipse - Eclipse 导航快捷方式

> ID：11247597
> 
> 赞同：5
> 
> 时间：2012-06-28T15:10:13.590
> 
> 标签：eclipse, navigation, keyboard-shortcuts

我想知道哪些是 Eclipse 导航键盘快捷键。

我已经使用：

`Ctrl`++`Shift`或导航槽`UP`方法`DOWN`

`Ctrl`+`,`或`.`在错误之间导航

`Ctrl`+`Page UP`或`DOWN`在选项卡之间导航

`UP`或`DOWN`在“包资源管理器”中浏览项目结构并`SPACE`展开/折叠文件夹或打开文件

对于那些我几乎不使用鼠标的人，我想知道是否有在 Eclipse 内部窗口之间交换的快捷方式（到控制台底部、代码中间、任务右侧、资源管理器左侧等等）

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T15:28:17.363

There is a very powerful shortcut `Ctrl+3` that allows you to go pretty much anywhere. Just type `Ctrl+3` and then start typing the name of the view, e.g. "console".

Of course you can always set dedicated shortcuts for different views in `Preferences->Keys`, like `Show View (View: Console)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:41:08.177

按照 BlackVegetable 提示和 rgerganov 的回答，我发现了我想要的快捷方式：

`Shift`+ `Alt`+ `Q` `P`= 查看：包资源管理器

`Shift`+ `Alt`+ `Q` `C`= 查看：控制台

并且大多数都是通过`Shift`++`Alt`访问的`Q`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-04T08:41:31.363

对我来说最好的答案是[rgerganov 的答案](https://stackoverflow.com/a/11247928/912046)，因为它可以在任何地方领导？

`CTRL`+ `3`= 打开**快速访问**菜单

您还可以使用：

`CTRL`+ `F6`= 切换编辑器

`CTRL`+ `SHIFT`+ `F6`= 切换编辑器（反向）

`CTRL`+ `F7`= 切换视图

`CTRL`+ `SHIFT`+ `F7`= 切换视图（反向）

`CTRL`+ `F8`= 切换视角

`CTRL`+ `SHIFT`+ `F8`= 切换视角（反向）

# c# - userprinciple.FindByIdentity 在一台服务器上成功，但在另一台服务器上失败

> ID：11247598
> 
> 赞同：-1
> 
> 时间：2012-06-28T15:10:15.480
> 
> 标签：c#, asp.net, active-directory

我的任务是将一些 c# v4 应用程序从一台服务器迁移到另一台服务器，并且我遇到了一个 aspx 表单的问题。

该表单调用了一个类以在其代码隐藏文件中搜索 AD 用户。它调用的方法如下。

```
 public UserPrincipal GetADUser(string samAccountName)
        {
        try
        {
            UserPrincipal user = UserPrincipal.FindByIdentity(AD.domainContext, samAccountName);
            return user;
        }
        catch(Exception ex)
        {
            throw new Exception(" Cant perform this operation:-"+ex.Message);
        }
    } 
```

AD.domainContext 定义如下

`private static PrincipalContext domainContext = new PrincipalContext(ContextType.Domain, ConfigurationHandler._ADDomain);`

我的问题是该方法适用于我的两台服务器（VS Dev 和当前运行我从中迁移的代码的服务器），并在我试图迁移到的服务器上引发异常。所有服务器都是相同的环境 Windows Server 2k8 R2 运行 iis 7.5

被抛出的错误是

**无法执行此操作：- 发生操作错误。**

我进行了搜索并发现了以下 stackoverflow 问题，但似乎没有一个可以解决该问题

[WCF 服务中的 System.DirectoryServices.AccountManagement.PrincipalContext 和模拟](https://stackoverflow.com/questions/3507476/system-directoryservices-accountmanagement-principalcontext-and-impersonation-in)

[Active Directory COM 异常 - 发生操作错误 (0x80072020)](https://stackoverflow.com/questions/7285503/active-directory-com-exception-an-operations-error-occured-0x80072020)

有谁知道是什么导致这个错误在一个环境而不是其他环境中引发？

我试图调试代码，它在 VS 调试中运行良好，但是当代码部署到所述服务器时，我遇到了问题。

任何帮助、想法、想法将不胜感激。

如果我忘记包含任何内容，我很乐意详细说明所提供的任何信息。

提前致谢

尼古拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:05:04.040

对于面临类似问题的任何其他人，解决方案似乎是需要提供用户名和密码来查询 AD，除非您在 IIS 中打开了用户假冒。

只需用以下方法修改我的方法即可解决问题

```
private static PrincipalContext domainContext = new PrincipalContext(ContextType.Domain, null,ConfigurationHandler._ADDomain, ConfigurationHandler._ADUser, ConfigurationHandler._ADPassword); 
```

谢谢

尼古拉斯

# python - 如何在windows下自动运行python脚本？

> ID：11247599
> 
> 赞同：2
> 
> 时间：2012-06-28T15:10:26.850
> 
> 标签：python, windows

> **可能重复：**
> [如何使 python 脚本在 Windows 上可执行？](https://stackoverflow.com/questions/4235834/how-to-make-python-scripts-executable-on-windows)
> [在 Windows 上设置 Python 以不在 cmd 中键入 python](https://stackoverflow.com/questions/11472843/set-up-python-on-windows-to-not-type-python-in-cmd)

我在windows下有一个python脚本。每次，我都需要使用 python *.py 运行。

我可以像 *.py 一样运行而不指定 python 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:13:11.423

你想从命令行还是桌面运行它？

如果您为文件设置了文件关联`.py`（这通常在安装过程中完成），您应该只需*双击*桌面上的`.py`文件即可运行它。

我不知道有一种方法可以避免`python`使用*命令行*输入（如果它已经在 PATH 上，否则必须指定 python 可执行文件的整个路径）。

如果我们可以在 Linux/Unix 下使用`#/usr/bin/env python`脚本中的指令执行类似的操作，那就太好了，但不幸的是，我认为 Windows 不存在这种情况。

您没有指定您正在运行的 Windows 版本，但如果您对分配/更改文件关联感兴趣，这里是[Microsoft](http://support.microsoft.com/kb/307859)关于使用 XP 执行此操作的说明。与其他版本的 Windows 非常相似 .. 谷歌搜索会显示大量关于如何更改文件关联的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:17:39.193

我只能参考 Python 文档：[http ://docs.python.org/using/windows.html#executing-scripts](http://docs.python.org/using/windows.html#executing-scripts)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:23:13.747

如果您希望从 Windows 自动运行它，您可以使用[py2exe](http://www.py2exe.org/)编译代码，或者您可以编写一个运行相关 Python 文件的批处理文件。

# java - 在没有服务器应用程序的情况下部署 Java Web 服务

> ID：11247606
> 
> 赞同：0
> 
> 时间：2012-06-28T15:10:45.377
> 
> 标签：java, wcf, servicehost

我希望在不需要服务器应用程序的情况下部署 Java Web 服务。我知道我可以通过托管可执行文件（C# 中的 ServiceHost 类）来部署 C# WCF 服务，但是我可以在 Java 中做类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:44:33.360

为什么不想安装 Apache Tomcat 的本地实例？它是免费的，并且非常容易设置和运行以测试 Java 中的 Web 应用程序。

[http://tomcat.apache.org/](http://tomcat.apache.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:36:33.717

事实上，你可以。[http://cxf.apache.org/docs/simple-frontend.html](http://cxf.apache.org/docs/simple-frontend.html)

我建议不要这样做。为此运行一个小型码头实例并不是很大的开销，但会让你的生活更轻松。

编辑：

与@Abhishek Gupta 所说的相反，您当然不会局限于本地访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:56:18.143

是的，您可以，但在这种情况下，您将仅限于在本地使用该服务。如果您在本地测试服务，则可以不使用服务器。但是，当您在生产环境中实际部署服务时，您需要一个专用的应用程序服务器来托管 Web 服务。例如，您可以使用 JAX-WS 创建 SOAP Web 服务并将该服务发布到本地 WSDL 文件。然后，您的客户端可以使用端点 URL，例如

`http://localhost:9999/ws/hello?wsdl`

访问服务。

此[链接](http://www.mkyong.com/webservices/jax-ws/jax-ws-hello-world-example/)将帮助您开始使用基于 Java 的 Web 服务。

# sql - 实体框架数据模型的数据源错误

> ID：11247607
> 
> 赞同：0
> 
> 时间：2012-06-28T15:10:51.867
> 
> 标签：sql, database, linq, entity-framework, sql-server-ce

我遇到了这个错误：

![错误](../Images/1051b49b3f5c8a1951de02e2cd81bdbf.png)

当我尝试执行此代码时：

```
db = new MyModelContainer();

var _projets = from d in db.Projets
               select d;

string toto = string.Empty;

foreach (var projet in _projets)
{
    toto += projet.Adresse;
} 
```

这是我的 App.Config 文件：

```
<connectionStrings>
    <add ... ;Data Source=|DataDirectory|\Database\db.sdf; />
</connectionStrings> 
```

`Database/`我在应用程序根文件夹中的一个文件夹中创建了数据库。

为了解决这个问题，我必须将数据库移动到`bin/Debug/Database/db.sdf`

我想在 connectionString 中更改什么以使其指向另一个文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:58:07.287

只需将数据库文件的完整路径放在您的连接字符串中

# python - 如何从 gdata.docs.service.DocsService() 中检索“共享”标记的文件夹/文件

> ID：11247611
> 
> 赞同：1
> 
> 时间：2012-06-28T15:11:03.723
> 
> 标签：python, google-app-engine, gdata, gdata-api

这就是我从 Google Drive 帐户的根目录检索文件和文件夹列表的方式。

我还打印了`role`and`scope`属性来观察差异。

```
query = gdata.docs.service.DocumentQuery( categories=['folder|document'], params={'showfolders': 'true'} )
documents_feed = gd_client.Query(query.ToUri())
if documents_feed :
    for document_entry in documents_feed.entry:
        print document_entry.title.text + ' : ' + document_entry.resourceId.text
        print '<br>'
        acl_feed = gd_client.GetDocumentListAclFeed(document_entry.GetAclLink().href)
        for acl_entry in acl_feed.entry:
            print '%s - %s (%s)' % (acl_entry.role.value, acl_entry.scope.value, acl_entry.scope.type) 
```

结果如下：

[https://docs.google.com/open?id=0B-TOsiduiDksbkVlWXRtc2lSN00](https://docs.google.com/open?id=0B-TOsiduiDksbkVlWXRtc2lSN00)

我假设，标记为“共享”的文件或文件夹将拥有它`scope.type = default` ，并且“网络上的公开”和“任何知道链接的人”之间的区别是`scope.value`

尽管我可以遍历提要条目以获取所有“共享”条目，但我认为我宁愿不这样做，而且在查询中进行过滤会更有效。

我已经坚持了好几天了。谁能告诉我正确的参数是什么？

# entity-framework - 尝试添加新项目时对象名称无效

> ID：11247617
> 
> 赞同：0
> 
> 时间：2012-06-28T15:11:21.943
> 
> 标签：entity-framework, ef-code-first

我有以下由逆向工程工具（Entity Framework Power Tools）生成的类：

![数据库架构](../Images/d6244ca549997417300f6ee7c92e03be.png)

```
public class User
{
    public User()
    {
        this.Areas = new List<Area>();
        this.Areas1 = new List<Area>();
        this.Areas2 = new List<Area>();
        this.Areas3 = new List<Area>();
        this.Companies = new List<Company>();
    }

    public int UserID { get; set; }
    public string Name { get; set; }
    public string Login { get; set; }
    public string Password { get; set; }
    public bool ActiveDirectory { get; set; }
    public string Language { get; set; }
    public string Email { get; set; }
    public System.DateTime ValidFrom { get; set; }
    public System.DateTime ValidTo { get; set; }
    public bool AllAreas { get; set; }
    public virtual ICollection<Area> Areas { get; set; }
    public virtual ICollection<Area> Areas1 { get; set; }
    public virtual ICollection<Area> Areas2 { get; set; }
    public virtual ICollection<Area> Areas3 { get; set; }
    public virtual ICollection<Company> Companies { get; set; }
}

public class Area
{
    public Area()
    {
        this.Users = new List<User>();
    }

    public int AreaID { get; set; }
    public string AreaNL { get; set; }
    public string AreaFR { get; set; }
    public string ExternalID { get; set; }
    public int CompanyID { get; set; }
    public int AreaManagerID { get; set; }
    public int DistrictManagerID { get; set; }
    public int VAID { get; set; }
    public virtual User User { get; set; }
    public virtual Company Company { get; set; }
    public virtual User User1 { get; set; }
    public virtual User User2 { get; set; }
    public virtual ICollection<User> Users { get; set; }
} 
```

以及映射文件的构造函数：

```
 public UserMap()
    {
        // Primary Key
        this.HasKey(t => t.UserID);

        // Properties
        this.Property(t => t.Name)
            .IsRequired()
            .HasMaxLength(100);

        this.Property(t => t.Login)
            .IsRequired()
            .HasMaxLength(50);

        this.Property(t => t.Password)
            .IsRequired()
            .HasMaxLength(50);

        this.Property(t => t.Language)
            .IsRequired()
            .HasMaxLength(2);

        this.Property(t => t.Email)
            .IsRequired()
            .HasMaxLength(150);

        // Table & Column Mappings
        this.ToTable("AreaManager");
        this.Property(t => t.UserID).HasColumnName("UserID");
        this.Property(t => t.Name).HasColumnName("Name");
        this.Property(t => t.Login).HasColumnName("Login");
        this.Property(t => t.Password).HasColumnName("Password");
        this.Property(t => t.ActiveDirectory).HasColumnName("ActiveDirectory");
        this.Property(t => t.Language).HasColumnName("Language");
        this.Property(t => t.Email).HasColumnName("Email");
        this.Property(t => t.ValidFrom).HasColumnName("ValidFrom");
        this.Property(t => t.ValidTo).HasColumnName("ValidTo");
        this.Property(t => t.AllAreas).HasColumnName("AllAreas");
    }

    public AreaMap()
    {
        // Primary Key
        this.HasKey(t => t.AreaID);

        // Properties
        this.Property(t => t.AreaNL)
            .IsRequired()
            .HasMaxLength(50);

        this.Property(t => t.AreaFR)
            .IsRequired()
            .HasMaxLength(50);

        this.Property(t => t.ExternalID)
            .HasMaxLength(50);

        // Table & Column Mappings
        this.ToTable("Area");
        this.Property(t => t.AreaID).HasColumnName("AreaID");
        this.Property(t => t.AreaNL).HasColumnName("AreaNL");
        this.Property(t => t.AreaFR).HasColumnName("AreaFR");
        this.Property(t => t.ExternalID).HasColumnName("ExternalID");
        this.Property(t => t.CompanyID).HasColumnName("CompanyID");
        this.Property(t => t.AreaManagerID).HasColumnName("AreaManagerID");
        this.Property(t => t.DistrictManagerID).HasColumnName("DistrictManagerID");
        this.Property(t => t.VAID).HasColumnName("VAID");

        // Relationships
        this.HasMany(t => t.Users)
            .WithMany(t => t.Areas3)
            .Map(m =>
                {
                    m.ToTable("UserArea");
                    m.MapLeftKey("AreaID");
                    m.MapRightKey("UserID");
                });

        this.HasRequired(t => t.User)
            .WithMany(t => t.Areas)
            .HasForeignKey(d => d.AreaManagerID);
        this.HasRequired(t => t.Company)
            .WithMany(t => t.Areas)
            .HasForeignKey(d => d.CompanyID);
        this.HasRequired(t => t.User1)
            .WithMany(t => t.Areas1)
            .HasForeignKey(d => d.DistrictManagerID);
        this.HasRequired(t => t.User2)
            .WithMany(t => t.Areas2)
            .HasForeignKey(d => d.VAID);

    } 
```

现在，如果我尝试执行以下操作：

```
 using (var ctx = new FCTestContext())
        {
            // Step 1: add user
            var user = new User
            {
                ActiveDirectory = false,
                Login = "Joske",
                Email = "tst@abc.com",
                Password = "sdfsdff",
                Name = "JoskeVermeulen",
                Language = "NL"
            };

            // Step 2: add an Area

            Company company = new Company { Active = true, CompanyName = "CompanyTest" };

            Area area = new Area
            {
                AreaFR = "Anvers",
                AreaNL = "Antwerpen",
                Company = company,
                User = user
            };
            ctx.Areas.Add(area);

            try
            {
                ctx.SaveChanges();
            }
            catch (DbEntityValidationException dbEx)
            {
                foreach (DbEntityValidationResult validationErrors in dbEx.EntityValidationErrors)
                {
                    foreach (DbValidationError validationError in validationErrors.ValidationErrors)
                    {
                        //Trace.TraceInformation("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage);
                        Console.WriteLine("Property: {0} Error: {1}", validationError.PropertyName,
                                          validationError.ErrorMessage);
                    }
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);

                for (Exception eCurrent = ex; eCurrent != null; eCurrent = eCurrent.InnerException)
                {
                    Console.WriteLine(eCurrent.Message);
                }
            }

            Console.ReadLine(); 
```

它给了我错误：

无效的对象名称 dbo.AreaManager。我显然没有那个表，也没有添加它的意图。我应该只为每个经理提供 3 个外键，并且用户也应该能够看到所有区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:15:41.660

就在记下所有内容并在发布后再次查看代码之后，看到罪魁祸首在哪里:-(。

它在队列中

```
this.ToTable("AreaManager"); 
```

出于某种原因，这些工具已经生成了这样的数据，以便在数据库中进行映射。将其更改为

```
this.ToTable("User"); 
```

让它工作。

# delphi - 按名称动态调用 SOAP 方法？

> ID：11247619
> 
> 赞同：14
> 
> 时间：2012-06-28T15:11:43.393
> 
> 标签：delphi, soap, delphi-xe2, rtti

我正在使用 Delphi XE2 与相当大的 SOAP 服务进行通信。我已成功导入 wsdl，一切正常。但是，我发现自己编写了很多类似的代码。我想要一个调用我的网络服务的通用方法。我还发现很难像现在这样对我的代码进行多线程处理，因为我必须为每种类型的调用编写大量代码。

作为一个周末程序员，我远未掌握 Delphi 的进出，但我认为我至少对 RTTI 有一个公平的了解，我相信必须用它来做我想做的事。

Web 服务有大约 700 种不同的方法，这几乎就是问题所在。从 wsdl 生成的代码具有以下方法：

```
function  addPhone(const Params: addPhone): addPhoneResponse; stdcall;
function  updatePhone(const Params: updatePhone): updatePhoneResponse; stdcall;
function  getPhone(const Params: getPhone): getPhoneResponse; stdcall;
function  removePhone(const Params: removePhone): removePhoneResponse; stdcall;
function  listPhone(const Params: listPhone): listPhoneResponse; stdcall;
function  addStuff(const Params: addStuff): addStuffResponse; stdcall;
function  updateStuff(const Params: updateStuff): updateStuffResponse; stdcall;
...
... about 700 more of the above 
```

基本上，有大约 700 种不同类型的东西可以处理，并且它们都有 add、update、get、remove 和 list-methods。对于每个调用，都有一个相应的类用作 SOAP 请求的参数。如上所示，响应还有一个相应的类。

这些类看起来像（非常简化）：

```
addStuff = class
  private
    FStuff: string;
  published
    property stuff: string  Index (IS_UNQL) read FStuff write FStuff;
  end; 
```

因此，当我调用 Web 服务时，例如：

```
procedure CreateStuff;
var
    req:    addStuff;
    res:    addStuffResponse;
    soap:   MyWebServicePort;
begin
    // Use the function in the wsdl-generated code to create HTTPRIO
    soap := GetMyWebServicePort(false,'',nil);
    // Create Parameter Object
    req := addPhone.Create;
    req.stuff := 'test';
    // Send the SOAP Request
    res := soap.addStuff(req);
end; 
```

（是的，我知道我应该尝试..finally 和 Free :-)）

然后，在代码的其他地方我需要调用不同的方法：

```
procedure listStuff;
var
    req:    listStuff;
    res:    listStuffResponse;
    soap:   MyWebServicePort;
begin
    // Use the function in the wsdl-generated code to create HTTPRIO
    soap := GetMyWebServicePort(false,'',nil);
    // Create Parameter Object
    req := listPhone.Create;
    req.stuff := 'test2';
    // Send the SOAP Request
    res := soap.listStuff(req);
end; 
```

由于我知道参数始终是一个名称与我调用的方法等效的类，因此我希望能够执行以下元代码之类的操作，以便动态调用调用。我想它需要一些 RTTI 魔法，但我一直无法找到一种方法来做到这一点：

```
procedure soapRequest(Param: Something; var Response: Something);
begin
  soap := GetMyWebServicePort(false,'',nil);
  Response := soap.DynamicInvoke(Param.ClassName, Param);
end 
```

然后我可以做类似的事情：

```
soapRequest(VarOfTypeAddStuff,VarOfTypeAddStuffResponse)
soapRequest(VarOfTypeListStuff,VarOfTypeListStuffResponse)
... 
```

有谁知道如何简化我对 Web 服务的调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T22:51:29.210

真的很奇怪，我在发布一个我一直试图解决自己数周的问题后几个小时突然就被自己解决了......我受到了环顾四周的启发，我发现这个一路帮助我：[Delphi - Invoke Record method per name](https://stackoverflow.com/questions/10192534/delphi-invoke-record-method-per-name)。

我的场景有点具体，因为我使用与方法本身具有相同类名的参数调用方法。我还编写了与公共 Web 服务通信的更简单的版本。如果有人感兴趣，您可以在此处获取该代码：http: [//www.hook.se/delphi/SoapDynamicInvoke.zip](http://www.hook.se/delphi/SoapDynamicInvoke.zip)。这是一个无用的例子，因为只有当 Web 服务有很多不同的方法时，进行动态方法调用才有意义。不过，这对某人来说可能很有趣:-)

下面是我如何为我的网络服务解决这个问题。如前所述，它非常具体，可以使代码更通用，但这对我有用。

使用TRemotable 对象调用此方法，然后使用与对象的类名同名的方法调用Web 服务。

```
function soapRequest(Param: TRemotable): TValue;
var
  soap: AXLPort;
  C: TRttiContext;
  T: TRttiType;
  M: TRttiMethod;
  SoapParam: TArray<TValue>;
  TVres: TValue;
  soap: MyWebServicePort;
begin
  // Use the function in the wsdl-generated code to create HTTPRIO
  soap := GetMyWebServicePort(false,'',nil);  C := TRttiContext.Create;
  T := C.FindType('MyWebService.MyWebServicePort');
  M := T.GetMethod(Param.ClassName);
  SetLength(SoapParam,1);
  SoapParam[0] := TValue.From(Param);
  TVres := M.Invoke(TValue.From<IInterface>(soap), SoapParam);
  Result := TVres;
end; 
```

并使用上面的功能：

```
procedure DoSomeSoapCalls(Sender: TObject);
var
  req1: getStuff
  res1: getStuffResponse;
  req2: addStuff;
  res2: addStuffResponse;
  res:  TValue;
begin
  //Request #1
  req1 := getStuff.Create;
  req1.stuffToGet := 'abc';
  try
    res := soapRequest(req1);
    res1 := getStuffResponse(res.AsObject);
  finally
    req1.Free;
  end;
  Writeln(res1.someproperty);
  FreeAndNil(res1);

  //Request #2
  req2 := addStuff.Create;
  req2.StuffToAdd := 'cde';
  try
    res := soapRequest(req2);
    res2 := addStuffResponse(res.AsObject);
  finally
    req2.Free;
  end;
  Writeln(res2.result);
  FreeAndNil(res2);
end; 
```

有一些必要的类型转换，但就我而言，我认为我会很安全。有没有人对此有任何其他意见/建议？我的意思是，这可行，但可能有一些方法可以增强它。

干杯，

担

# google-apps-script - 什么是 scriptdb 范围 wrt 用户？

> ID：11247624
> 
> 赞同：2
> 
> 时间：2012-06-28T15:12:21.303
> 
> 标签：google-apps-script

我对 ScriptDB 数据存储的范围有点困惑。

我读到“每个脚本都有一个数据库”。这是否意味着同一个脚本的多个用户正在访问同一个数据库？

如果是，我是否需要以某种方式对数据进行分片，以便为已发布脚本的每个用户提供自己的数据子集？如果不是，如何实现多用户应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:19:13.777

如果您在这里阅读常见问题解答[https://developers.google.com/apps-script/scriptdb#frequently_asked_questions](https://developers.google.com/apps-script/scriptdb#frequently_asked_questions)这正是我所理解的。

我什至为此打开了一个问题：[http ://code.google.com/p/google-apps-script-issues/issues/detail?id=1482](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1482)

如果您同意，请给问题加注星标。

基本上我认为 ScriptDB 在这一点上类似于脚本属性。显然更复杂，但范围相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:48:48.127

经过一些测试，我得出结论，运行相同脚本的多个用户将访问相同的数据存储。

因此，似乎需要在存储的数据中包含用户名作为字段，如果需要个人数据，则在任何和所有查询中都包含该字段。

在测试期间，我遇到了看起来像延迟的问题。此处的问题[应用程序脚本 scriptdb 是否有延迟因素？](https://stackoverflow.com/questions/11266575/does-apps-script-scriptdb-have-a-latency-factor)

# indexing - Apache solr 频繁添加/编辑/删除记录

> ID：11247625
> 
> 赞同：2
> 
> 时间：2012-06-28T15:12:22.510
> 
> 标签：indexing, solr, large-data

我正在考虑使用 Apache Solr。在我的数据库中，我将有大约 10.000.000 条记录。我将使用它的最坏情况有大约 20 个可搜索/可排序的字段。我的问题是这些字段在白天可能会频繁更改值。例如，在我的数据库中，我可能会同时更改 10000 条记录的某些字段，这可能每天发生 0、1 或 1000 次等。关键是每次我更新数据库中的值时，我都希望它被更新在 solr 中，这样我每次都可以使用更新的数据进行搜索。

对于那些使用过 solr 的人，在这样的卷中重新索引的速度有多快？此更新（从我阅读的内容中删除并读取记录）是否会进行索引，例如花费 5 秒、5 分钟、1 小时，什么？考虑它将在一个好的服务器上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:33:27.467

如果不实际尝试，很难说清楚。但是您需要知道 Lucene 和 Solr 目前不支持单个文档更新（尽管有一些工作正在进行中[https://issues.apache.org/jira/browse/LUCENE-3837](https://issues.apache.org/jira/browse/LUCENE-3837)），这意味着您需要重新- 索引整个记录，即使您只更新了一个字段。

此外，Lucene 和 Solr 在执行批量更新方面比单文档更新要好得多。为了解决这个问题，Solr 有一个不错的[commitWithin](http://wiki.apache.org/solr/UpdateXmlMessages#Passing_commit_and_commitWithin_parameters_as_part_of_the_URL)参数，它允许 Solr 将各个更新组合在一起以提高吞吐量。

您应该谨慎使用这个数字，但我经常在非常传统的硬件上以约 5000 文档/秒的吞吐量创建数百万个文档（约 30 个小字段）的索引。

# asp.net - 无法让 SqlDataSource.SelectParameters.Add 工作

> ID：11247629
> 
> 赞同：0
> 
> 时间：2012-06-28T15:12:31.430
> 
> 标签：asp.net, parameters, sqldatasource

我正在尝试动态更改 SqlDataSource 的参数，但代码似乎失败了，或者换句话说我似乎失败了。

这是代码：

```
 int id = 0;

        SqlConnection conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["RHOGEConnection"].ConnectionString);
        SqlCommand getId = new SqlCommand(null, conn);
        SqlParameter name = new SqlParameter("@name", SqlDbType.NVarChar);
        name.Value = SelectTeam.SelectedValue;
        getId.Parameters.Add(name);
        /* getId.CommandText = */ //changed to a select statement that gets a number

        try
        {
            conn.Open();
            id = (int)getId.ExecuteScalar();
            conn.Close();
        }
        catch (Exception ex)
        {
            Response.Write(ex.Message);
        }

        SqlDataSource2.SelectParameters.Add(new Parameter("getId", TypeCode.Int16, Convert.ToString(id))); 
```

现在我知道获取数字的代码（SqlDataSource2 上方的行）可以正常工作，因为我将它打印在屏幕上并且它们看起来是正确的。我还尝试了 SQL Management Studio 中的 SqlDataSource2 选择命令，它产生了正确的结果。所以我最好的猜测是将参数添加到参数列表中存在问题。

```
SELECT [TeamName] FROM [Teams] where PlayerIdent = (select playerId
                from Players where PlayerShirtId = @getId) 
```

以上是有效的选择命令。

您是否同意参数事物是正确的诊断，如果是，我应该怎么做？

编辑：我能够通过以下方式解决这个问题。

```
SqlDataSource2.SelectParameters["getId"].DefaultValue = Convert.ToString(id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:38:03.990

也许代替

```
SqlParameter name = new SqlParameter("@name", SqlDbType.NVarChar); 
```

它应该是

```
Parameter name = new Parameter("@name", SqlDbType.NVarChar, Convert.ToString(id)); 
```

# three.js - 三.js 透明材质：对象并不总是透明的

> ID：11247630
> 
> 赞同：0
> 
> 时间：2012-06-28T15:12:33.577
> 
> 标签：three.js, trace, transparent

我使用 Three.js 来查看和挑选对象，但我遇到了可见性问题

我在three.js 中加载了一个collada 对象 我的collada 加载器与repo 的加载器略有不同。我添加了

```
function copyMaterial (_material) {
    var newMaterial = new THREE.MeshLambertMaterial();
    for (var p in _material) {
        if (_material.hasOwnProperty(p) && p !== "id") {
            var obj = _material[p];
            newMaterial[p] = obj;
        }
    }
    return newMaterial;
} 
```

并且在加载材料时，我只是在分配之前复制它

这允许我单独更改每个对象的不透明度，即使它们使用相同的 collada 材质。

这很好用。现在通过这样做，我现在看到了一些奇怪的行为。根据我的对象的方向，某些部分是否通过透明度出现。截图会更好地解释，

[我们看不到内部零件](http://img440.imageshack.us/img440/6188/screenshot20120620at103.png)

[我们看到内部零件](http://img84.imageshack.us/img84/6188/screenshot20120620at103.png)

关于发生了什么以及如何解决它的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T04:27:13.130

据我所知，这发生在 2 次：

1）当您在同一位置设置了多个刻面并且一个可见而另一个不可见时。所以在渲染时，它取决于首先渲染的相机角度。

2）当您通常尝试将对象的所有部分设置为透明时，但仍希望能够通过其他部分看到某些面孔。同样，这就是渲染器的工作方式。

现在，我发现的唯一解决方案是将 FrondSide 和 BackSide 分配给单独的材料并将它们都设置为同一个对象（我猜是你的对象的一部分）：

```
texture = new THREE.Texture(textureImage);
texture.needsUpdate = true;
material = new THREE.MeshBasicMaterial({
    map: texture,
    transparent: true,
    side: THREE.BackSide
 }); 
material2 = new THREE.MeshBasicMaterial({
    map: texture,
    transparent: true
});
geometry = new THREE.SphereGeometry(RADIUS, 40, 20);
mesh = new THREE.Mesh(geometry, material);
scene.add(mesh);
mesh = new THREE.Mesh(geometry, material2);
scene.add(mesh); 
```

[https://github.com/mrdoob/three.js/issues/2476](https://github.com/mrdoob/three.js/issues/2476)了解有关该问题的更多信息

# html - 如何让 IE 和 Firefox 显示隐藏元素一样（IE 移动可见元素）

> ID：11247633
> 
> 赞同：0
> 
> 时间：2012-06-28T15:12:54.853
> 
> 标签：html, css, internet-explorer-8, cross-browser

在 IE 和 Firefox 中呈现相同的 html 会给我带来不同的结果，因为在 IE 中，从布局的角度来看，隐藏的复选框不会被忽略。此图像显示隐藏复选框在 IE 中有一个空格，但在 Firefox 中没有隐藏复选框的空格： ![图像显示隐藏复选框在 IE 中有一个空格，但在 Firefox 中没有隐藏复选框的空格](../Images/1890c127de02ffabe208d131e70f41d5.png)

```
<html><head>
<style type="text/css">
<!--
#checkboxhide { position: relative; visibility: hidden; font-size: 8.5pt; font-weight: font-family: verdana;}
//-->
</style>
</head><body>
<table><tr>
<td>|</td>
<td><span id="checkboxhide"><input type="checkbox" hidden="" name="blah"></span>|Greetings Earthings</td>
</tr></table>
</body></html> 
```

如何让两个（​​或更多）浏览器显示相同的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T15:13:59.547

CSS[`visibility`](https://developer.mozilla.org/en/CSS/visibility)属性，当设置为 时`hidden`，可以隐藏元素的内容，但不能隐藏它占用的空间。

该[`display`](https://developer.mozilla.org/en/CSS%3adisplay)属性，当设置为 时`none`，隐藏元素的内容和它占据的空间。

使用`display: none`而不是`visibility: hidden`：

```
#checkboxhide { position: relative; display: none; font-size: 8.5pt; font-weight: font-family: verdana;} 
```

# uml - 类图 java 应用程序

> ID：11247638
> 
> 赞同：0
> 
> 时间：2012-06-28T15:13:10.457
> 
> 标签：uml

编程语言：java。类图问题。

给定一个名为 Bridge 的类，以下表示是否正确？

我关心的是如何处理声明，例如： private Semaphore semaphore；

这是属性/方法声明：

```
public class Bridge {
    private Semaphore semaphore;
    private Lock lock:
    private Condition waitingCond;
    private int nNorthCars; .......
    public void getIn(int direction) throws InterruptedException{
    .....
The same goes for getOut()....
} 
```

UML 表示：

```
 ---------------------
    Bridge
    ---------------------
    - semaphore: Semaphore
    - lock: Lock
    - waitingCond: Condition
    - nNorthCars: int
    - nSouthCars: int
    ---------------------
    + getIn(): void
    + getOut(): void
    --------------------- 
```

此外，鉴于 main 函数中的变量应该是本地的，我认为它们应该被视为私有的是否正确？例如：

```
public static void main(String[] args) {
...........
int nThreads = Integer.parseInt(args[0]);
long time = 0; 
...} 
```

这是UML实现：

```
---------------------
Main
---------------------
- nThreads: int
- time: long
---------------------
+ main()
--------------------- 
```

符号：-（私人），+（公共）

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:57:35.803

UML 通常意味着实现/语言不可知 - 在阅读 UML 图时，您不应该知道或关心它是用什么语言实现的。此外，类图旨在表示（或建模）类型/类/概念域问题及其关系。因此，您不必担心方法中的局部变量，因为这既是实现细节，又与与其他类或概念的关系无关。

您似乎正在尝试使用 UML 对 Java 程序进行建模（或反向工程），并且您希望将程序中的每个变量都包含在类图中。这不是您应该采取的方法。

`SemaPhore`,`lock`并且`waitingCondition`都是实现细节，不传达关于`Bridge`' 行为或`Bridge`' 与其他类的关系的任何有用信息。`nNorthCars`并且`nSouthCars`是私有的 - 在您的模型中将它们公开为公共属性是否有意义？您模型中的其他类/概念是否需要了解这些？如果对这些问题不满意，那么您也可以从类图中删除这些问题。如果您要在活动图中对 Bridge 的某些方法进行建模，您可能希望保留它们。Bridge 可能希望在 UML 中看起来像这样：

```
 ---------------------
    Bridge
    ---------------------

    ---------------------
    + getIn(): void
    + getOut(): void
    --------------------- 
```

如果 Bridge 与其他事物（可能是汽车的集合）有关系，那么您可以对其进行建模，因为这种关系对于模型中的其他概念是外部可见的。

`Main`看起来像你的程序入口点，同样，可能没有必要这样建模。如果`Main`聚合所有其他（或大多数其他）类/概念，则继续并对其进行建模，否则它将成为实现细节。

最后，UML 的真正目的是为您的概念建模，然后在代码中实现这些概念。看来您正在做相反的事情。逆向工程和往返在一定程度上是可以的，但要小心，否则你最终会在 UML 中进行黑客攻击并从中生成代码。UML 的想法是在您剪切代码之前对您的域进行建模并验证该模型。

希望这可以帮助...

# c# - 使用 ASP.NET 构建多语言网站

> ID：11247641
> 
> 赞同：1
> 
> 时间：2012-06-28T15:13:30.740
> 
> 标签：c#, asp.net, visual-studio-2008, multilingual

我正在使用 Visual Studio 2008 使用 ASP.NET 创建一个多语言网站。在我的应用程序中，我想支持不同的语言，因为我需要为每种语言创建资源文件。设计页面后，我转到工具，然后选择生成本地资源，但我无法生成本地资源文件。

我收到错误消息：“开始创建资源内容并向服务器控件和指令添加 'meta' 属性。找不到资源编写器。完成创建资源内容并添加 'meta' 属性。”

并且没有获取本地资源文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:20:53.857

您是否在 web.config 中添加/更改了全球化属性？

```
<system.web>
  <globalization enableClientBasedCulture="true" culture="auto" uiCulture="auto"/>
</system.web> 
```

# java - sbt and play：“测试”有效，“测试：运行”无效

> ID：11247650
> 
> 赞同：2
> 
> 时间：2012-06-28T15:13:55.257
> 
> 标签：java, jenkins, sbt, playframework-2.0

我尝试使用 Play(2.0.2) 项目在 Jenkins 上建立构建管道。

因为我只想构建一次源并将类用于下游构建，所以我现在创建了一个运行“sbt test:compile”的“编译”作业。到目前为止有效。

下一个工作应该只运行编译的测试。如果我使用“sbt test”，它会按预期工作，但会再次编译源代码。

但是如果我尝试运行“sbt test:run”，它会说：

```
[info] Loading project definition from ~/myproject/project
[info] Set current project to myproject (in build file: ~/myproject/)
java.lang.RuntimeException: No main class detected.
    at scala.sys.package$.error(package.scala:27)
[error] {file:~/myproject/test:run: No main class detected. 
```

同样的情况也发生在本地。我可以运行“sbt test”但不能运行“sbt test:run”。同样的错误。

有没有人可以指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T12:18:13.980

`test:run`运行测试源中定义的主类，类似于`compile:run`在主源中运行主类。如果没有主类，则没有可运行的东西。

# c++ - 按值返回 std::vector

> ID：11247654
> 
> 赞同：18
> 
> 时间：2012-06-28T15:14:05.640
> 
> 标签：c++, c++11, return-value, move-semantics

人们常说，在 C++11 中`std::vector`按值返回是明智的。

在 C++03 中这主要是正确的，因为 RVO 应该优化掉副本。但这*应该*会吓跑大多数开发人员。

*   在 C++11 中，返回的`std::vector`局部变量是否总是被移动？
*   如果该向量是局部变量的成员而不是局部变量本身怎么办？
*   显然返回一个全局变量不会被移动。还有哪些情况不会被移动？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-28T15:18:44.067

首先，以前每次可以省略副本，现在仍然可以省略，在相同的情况下可以省略移动。对于本文的其余部分，我将假设由于某种原因不会发生省略（假设编译器编写者很懒惰）。

> 在 C++11 中，返回的 std::vector 局部变量是否总是被移动？

每次满足复制省略的标准，或者变量是明确的`std::move`d。

> 如果该向量是局部变量的成员而不是局部变量本身怎么办？

它不会被移动，除非明确`std::move`d。

> 显然返回一个全局变量不会被移动。还有哪些情况不会被移动？

每次不满足复制省略的标准并且变量没有明确表示时`std::move`d。

这些都不是不按价值返回的正当理由。按值返回是可以的，因为即使没有自动移动值，您也可以使用`std::move`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-28T15:22:45.247

> 在 C++11 中，返回的`std::vector`局部变量是否总是被移动？

对于局部变量，即使是按值参数，编译器必须始终*尝试*首先移动它（如果无论出于何种原因移动和复制都不能被省略，即使满足条件）。如果失败，它会再次尝试复制：

`§12.8 [class.copy] p32`

> 当满足或将满足复制操作的省略标准时，除了源对象是函数参数的事实，**并且要复制的对象由左值指定时，选择复制的构造函数的重载决策是首先执行好像对象是由 rvalue 指定的**。如果重载决议失败，或者如果所选构造函数的第一个参数的类型不是对对象类型的右值引用（可能是 cv 限定的），则再次执行重载决议，将对象视为左值。[*注：*无论是否会发生复制删除，都必须执行此两阶段重载解决方案。它确定如果不执行省略则要调用的构造函数，并且即使调用被省略，所选构造函数也必须是可访问的。*——尾注*]
> 
> 如果该向量是局部变量的成员而不是局部变量本身怎么办？

不会尝试移动子对象，因为它不符合复制省略的标准。（这是愚蠢的，恕我直言，但这就是目前的情况。我认为这两者不应该联系起来，因为如果子对象是本地的，则可以很好地移动它。）

> 显然返回一个全局变量不会被移动。还有哪些情况不会被移动？

引用显然不会被移动。除此之外，我真的想不出别的了。

# iphone - 如何使用此代码在 iCarousel 中加载多个图像？

> ID：11247655
> 
> 赞同：2
> 
> 时间：2012-06-28T15:14:06.123
> 
> 标签：iphone, ios, xcode, uiimageview, icarousel

我正在使用轮播在coverflow中加载一堆图像，但我没有得到它？..最初我遇到了Signal sigabart问题..在我编辑了一些代码后，视图就会显示出来......我错过了什么吗？ ..

```
#import "CollectionViewController.h"

@interface CollectionViewController ()
@property (nonatomic, retain) NSMutableArray *items;
@end

@implementation CollectionViewController

@synthesize carousel;
@synthesize items;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
 {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)dealloc
{

carousel.delegate = nil;
carousel.dataSource = nil;
[items release];

[carousel release];
[super dealloc];
}
- (void)viewDidLoad
{
[super viewDidLoad];
carousel.type = iCarouselTypeCoverFlow2;

}

- (void)viewDidUnload
{
[super viewDidUnload];

self.carousel = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark -
#pragma mark iCarousel methods

- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{
return [items count];
}

 - (NSUInteger)numberOfVisibleItemsInCarousel:(iCarousel *)carousel
{

return 29;
}

 - (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
 {

//create new view if no view is available for recycling
if (view == nil)
{

    view = [NSArray arrayWithObjects:[UIImage imageNamed:@"gal1.jpg"],
            [UIImage imageNamed:@"gal2.jpg"],
            [UIImage imageNamed:@"gal3.jpg"],

            [UIImage imageNamed:@"gal5.jpg"],
            [UIImage imageNamed:@"gal6.jpg"],
            [UIImage imageNamed:@"gal7.jpg"],
            [UIImage imageNamed:@"gal8.jpg"],
            [UIImage imageNamed:@"gal9.jpg"],
            [UIImage imageNamed:@"gal10.jpg"],
            [UIImage imageNamed:@"gal11.jpg"],
            [UIImage imageNamed:@"gal12.jpg"],
            [UIImage imageNamed:@"gal13.jpg"],
            [UIImage imageNamed:@"gal14.jpg"],
            [UIImage imageNamed:@"gal15.jpg"],
            [UIImage imageNamed:@"gal16.jpg"],
            [UIImage imageNamed:@"gal17.jpg"],
            [UIImage imageNamed:@"gal18.jpg"],
            [UIImage imageNamed:@"gal19.jpg"],
            [UIImage imageNamed:@"gal20.jpg"],
            [UIImage imageNamed:@"gal21.jpg"],
            [UIImage imageNamed:@"gal22.jpg"],
            [UIImage imageNamed:@"gal23.jpg"],
            [UIImage imageNamed:@"gal24.jpg"],
            [UIImage imageNamed:@"gal25.jpg"],
            [UIImage imageNamed:@"gal26.jpg"],
            [UIImage imageNamed:@"gal27.jpg"],
            [UIImage imageNamed:@"gal28.jpg"],

}

else {

}

    return view;
 }

 @end 
```

在模拟器上运行时，我只得到屏幕而不是图像？...我卡在这里了....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:29:31.353

我已经这样做了。在这里试试这个：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        //set up carousel data
        wrap = NO;

        self.items = [NSArray arrayWithObjects:[UIImage imageNamed:@"gal1.jpg"],
            [UIImage imageNamed:@"gal2.jpg"],
            [UIImage imageNamed:@"gal3.jpg"],
            [UIImage imageNamed:@"gal5.jpg"],
            [UIImage imageNamed:@"gal6.jpg"],
            [UIImage imageNamed:@"gal7.jpg"],
            [UIImage imageNamed:@"gal8.jpg"],
            [UIImage imageNamed:@"gal9.jpg"],
            [UIImage imageNamed:@"gal10.jpg"],
            [UIImage imageNamed:@"gal11.jpg"],
            [UIImage imageNamed:@"gal12.jpg"],
            [UIImage imageNamed:@"gal13.jpg"],
            [UIImage imageNamed:@"gal14.jpg"],
            [UIImage imageNamed:@"gal15.jpg"],
            [UIImage imageNamed:@"gal16.jpg"],
            [UIImage imageNamed:@"gal17.jpg"],
            [UIImage imageNamed:@"gal18.jpg"],
            [UIImage imageNamed:@"gal19.jpg"],
            [UIImage imageNamed:@"gal20.jpg"],
            [UIImage imageNamed:@"gal21.jpg"],
            [UIImage imageNamed:@"gal22.jpg"],
            [UIImage imageNamed:@"gal23.jpg"],
            [UIImage imageNamed:@"gal24.jpg"],
            [UIImage imageNamed:@"gal25.jpg"],
            [UIImage imageNamed:@"gal26.jpg"],
            [UIImage imageNamed:@"gal27.jpg"],
            [UIImage imageNamed:@"gal28.jpg"],nil];
}
return self; 
```

}

然后在你的：

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index
{

    UIView *view = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[items objectAtIndex:index]]];
    return view;
} 
```

哦，还有一个，请编辑你的`numberOfVisibleItemsInCarousel`并将其设置为`return 7;`这样它就不会浪费内存，我想。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-03T08:07:02.980

iCarousel 工作代码：

委托方式：

```
 - (UIView *)carousel:(__unused iCarousel *)carousel viewForItemAtIndex:(NSInteger)index reusingView:(UIView *)view{

   if (view == nil){

    view = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 400 , 600)];
    ((UIImageView *)view).image = [UIImage imageNamed:[imageCarosualArray objectAtIndex:index]];
    view.contentMode = UIViewContentModeCenter;
    [view.layer setMasksToBounds:YES];
  }
  return view;
} 
```

**数组中的**多个图像****

 **```
CarosualArray =[[NSMutableArray    alloc]initWithObjects:@"test1.png",@"test2.png",@"test3.png",@"test4.png",@"test5.png",@"test6.png",@"test7.png",@"test8.png",@"test9.png", nil]; 
```**

# php - 无法理解 php 中 time() 和 date() 的性质

> ID：11247656
> 
> 赞同：4
> 
> 时间：2012-06-28T15:14:07.543
> 
> 标签：php, date, time

```
date("Y",1340896077)//1340896077 are the seconds till 2012 from 1970 
```

给出 2012 这是正常的

```
And date("Y",1940896077) 
```

给出 2031 这也是正常的

**但** `date("Y",2240896077)`

正在给出 1904，这绝对不正常。它应该给出 2041。

现在我想对 php 中的 time() 和 date() 进行一些解释。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T15:15:42.813

PHP 使用 32 位整数。

32 位整数限制为[2,147,483,647](https://stackoverflow.com/questions/94591/what-is-the-maximum-value-for-a-int32)

在您的第三个示例中，值溢出。把它想象成一个汽车公里计数器。它限制在某个值（在我们的例子中为 2,147,483,647），一旦你将这个值传递回 0。

这可能会导致[2038 年问题](http://en.wikipedia.org/wiki/Year_2038_problem)（还记得 2000 年错误吗？类似的概念）。

在“PHP 开发者会议纪要”中，有人[提议添加 64 位整数](http://www.php.net/~derick/meeting-notes.html#add-a-64bit-integer)，我不确定它走了多远，以及他们的政策重新分级时间相关功能是什么。

希望这有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:17:20.810

您看到的是[Y2K38 错误](http://en.wikipedia.org/wiki/Year_2038_problem)。`2240896077`对于 32 位整数来说太大并且溢出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T15:17:59.733

从手册：

> 时间戳的有效范围通常是从 1901 年 12 月 13 日星期五 20:45:54 GMT 到 2038 年 1 月 19 日星期二 03:14:07 GMT。（这些日期对应于 32 位有符号整数的最小值和最大值）。但是，在 PHP 5.1.0 之前，此范围在某些系统（例如 Windows）上被限制为 01-01-1970 到 19-01-2038。

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T15:18:17.747

> 时间戳的有效范围通常是从 1901 年 12 月 13 日星期五 20:45:54 GMT 到 2038 年 1 月 19 日星期二 03:14:07 GMT。（这些日期对应于 32 位有符号整数的最小值和最大值）。但是，在 PHP 5.1.0 之前，此范围在某些系统（例如 Windows）上被限制为 01-01-1970 到 19-01-2038。

来自： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# sql - 我们可以使用系统在 sqlplus 中定义未命名异常来处理哪些类型的错误？

> ID：11247657
> 
> 赞同：0
> 
> 时间：2012-06-28T15:14:10.820
> 
> 标签：sql, oracle, exception

我一直在尝试访问以下代码

```
DECLARE
       N_DEPTNO DEPT.DEPTNO %TYPE :=&DEPT_NUM;
       V_DNAME DEPT.DNAME %TYPE;
       NOT_ENOUGH_VALUES EXCEPTION;
       PRAGMA
             EXCEPTION_INIT(NOT_ENOUGH_VALUES,-06502);
BEGIN
       SELECT DNAME,LOC INTO DNAME FROM DEPT
       WHERE DEPTNO = N_DEPTNO;

       DBMS_OUTPUT.PUT_LINE('Successfully Fetched !!');
EXCEPTION
       WHEN NOT_ENOUGH_VALUES THEN
       DBMS_OUTPUT.PUT_LINE('No Enough Values ... ');
END; 
```

在 EXCEPTION 块中指定后仍然显示错误消息。

`PRAGMA EXCEPTION_INIT` 我可以使用即在选择语句中没有提供足够的值来处理这些类型的错误吗...

如果不是，`System Defined Unnamed Exception` 使用`PRAGMA EXCEPTION_INIT`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:17:32.783

异常处理程序可以捕获运行时错误。他们无法捕获编译错误。编译器在编译代码时发现它在语法上是无效的——`INTO`子句中没有指定足够的值。因此，在执行代码之前引发异常。

# jquery - 使用 'alt' 值动态设置 'title'

> ID：11247658
> 
> 赞同：2
> 
> 时间：2012-06-28T15:14:11.170
> 
> 标签：jquery, image, attr

我需要一些帮助，在我们开始之前，我知道这可能不是最佳实践，但我正在对现有站点进行一些维护，需要完成以下修复。

```
<a rel="lightbox" href="site.com" title="a generated title">
    <img src="site.com/img" class="post-image" alt="a long description"/>
</a> 
```

好的，所以我想弄清楚如何使用 jQuery 或任何其他方法`alt`从我的图像中获取属性，并动态覆盖`title`我的`a`标签的属性。

任何帮助都会很棒，我在这个时刻有点迷失了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T15:16:18.213

```
$(function(){
   $("a").each(function(){
        $(this).attr("title", $(this).find("img").attr("alt"));
   });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:17:05.980

你没有确切地提到`<a>`你想改变哪个 s，所以这会改变所有`<a>`s 的`<img>`内部......

```
$("a>img").each(function() {
  $(this).parent().attr("title", $(this).attr("alt"))
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:16:38.223

使用 jQuery：

```
var a = $('a[rel=lightbox])');
var img = a.find('img');
a.attr('title', img.attr('alt')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T15:17:23.307

```
$('a').each(function(){
    $(this).attr('title',$(this).find('img').attr('alt'));
}); 
```

由于 jsFiddle.net 在过去一天左右似乎很不稳定，您可以在**[jsbin](http://jsbin.com/ebevil/edit#javascript,html,live)**看到一个演示。

如果 jsFiddle 加载，一个**[jsFiddle 示例](http://jsfiddle.net/j08691/vaX7b/)**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T15:17:36.687

你可以这样做：

```
$(function() {
    var img = $(".post-image");
    if(img.length == 1) // meaning, at least one element was found
    {
        img.attr("title", img.attr("alt")); // pass the text in alt to title
        img.removeAttr("alt");              // remove alt
    }
}); 
```

# wordpress - 如何获取父级内容？

> ID：11247661
> 
> 赞同：1
> 
> 时间：2012-06-28T15:14:15.367
> 
> 标签：wordpress, templates

我试过了，它实际上显示的是当前页面内容而不是父内容：

```
<?php
   $my_postid = 3105;
   $content_post = get_post($my_postid);
   $content = $content_post->post_content;
   $content = apply_filters('the_content', $content);
   echo $content;
?> 
```

并且还尝试了以下方法，但我收到警告：

```
Warning: Missing argument 1 for get_page(), called in: 
```

代码：

```
 <?php 
     $page = get_page();
     $parentID = $page['post_parent'];
     if($parentID != '0') {
       $parentPage = get_page($parentID);
       $parentContent = $parentPage['post_content'];
       $parentContent =  apply_filters('the_content', $parentContent); 
       echo $parentContent;
     } 
  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:19:23.893

```
global $post;
if ($post->post_parent) {
    $parent = get_page($post->post_parent);
    echo apply_filters('the_content', $parent->post_content);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:22:04.770

给定一些加载的帖子：

```
$id = 3105;
$content_post = get_post($id); 
```

您可以获取其父级：

```
$parent_id = $content_post->post_parent; // Will be 0 if the post has no parent
$parent = get_post($parent_id); 
```

并输出内容：

```
echo $parent->post_content; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:09:36.280

这就是最终起作用的方法，关键是使用全局 $post;

```
<?php
 global $post;
 $args = array(
'post_type' => 'attachment',
'numberposts' => -1,
'post_status' => null,
'post_parent' => $post->post_parent,
'order_by' => 'menu_order',
'order' => 'ASC'
);
 $attachments = get_posts($args);
 if($attachments)
  {
   echo '<ul class="imagelist">';
   foreach($attachments as $attachment)
 {
   echo '<li>';
   $large = wp_get_attachment_image_src($attachment->ID, 'large');
   $thumb = wp_get_attachment_image($attachment->ID, 'thumbnail');
   echo '<a href="'. $large[0] .'">' . $thumb . '</a>';
   echo '</li>';
 }
  echo '</ul>';
 }
?> 
```

# xpages - XPages 扩展库 - xe:djxmHeading 的 onShow 事件

> ID：11247662
> 
> 赞同：0
> 
> 时间：2012-06-28T15:14:16.140
> 
> 标签：xpages, xpages-extlib

我正在尝试根据 p 将 onShow 事件添加到移动页面标题。326 oF XPages Extension Library 书。

我的代码如下： -

```
<xe:djxmHeading id="djxmHeading1" back="All Areas" moveTo="byArea">
<xe:this.label><![CDATA[#{javascript:param.get("Rep")}]]></xe:this.label>
    <xp:this.onShow>
        <![CDATA[#{javascript:sessionScope.put("RepName", param.get("Rep"))}]]>
    </xp:this.onShow>
</xe:djxmHeading> 
```

这看起来类似于书中的示例。但我收到以下错误：

未知属性 this.onShow。它没有在标签 xe:djxmHeading 上定义。

任何想法我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:44:15.213

嗯，这可能已被删除。

您可以通过以下方式轻松实现类似的目标：

```
<xe:djxmHeading id="djxmHeading1" back="All Areas" moveTo="byArea">
    <xe:this.label><![CDATA[#{javascript:
        sessionScope.put("RepName", param.get("Rep"));
        return param.get("Rep");
    }]]></xe:this.label>
</xe:djxmHeading> 
```

这将允许您在显示标题之前计算一些东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:20:28.003

onShow 属性在测试版中可用，但在 8.5.3 更新包 1 包含的版本中不可用。该属性在 9.0 的公共测试版中也不可用。西蒙的替代建议是一个很好的建议。

# ruby-on-rails - Rails activerecord 包括。如何访问包含的列？

> ID：11247665
> 
> 赞同：1
> 
> 时间：2012-06-28T15:14:27.637
> 
> 标签：ruby-on-rails, activerecord

我的用户模型`has_many :event_patrons`和 EventPatron `belongs_to :user`。我想用这样的 sql 语句将用户与一个特定的活动赞助人一起拍打：

```
SELECT * FROM `users` 
INNER JOIN `event_patrons` ON `event_patrons`.`user_id` = `users`.`id` 
WHERE `event_patrons`.`event_id` = 1 
```

所以在rails中我尝试了这个：

```
User.all(:joins => :event_patrons, 
         :conditions => {:event_patrons => {:event_id => 1}}) 
```

但这给了我`SELECT users.*`而不是`SELECT *`：

```
SELECT `users`* FROM `users` 
INNER JOIN `event_patrons` ON `event_patrons`.`user_id` = `users`.`id` 
WHERE `event_patrons`.`event_id` = 1 
```

然后，我尝试切换`:joins`with`:include`并得到一团乱麻，仍然只返回我的列，`User`而没有 from `EventPatron`。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:21:06.653

为了完成：

在 Rails 3 中，您实际上可以只使用一个查询，但他们也建议使用连接： User.includes(:event_patrons).where("event_patrons.event_id", 1)

来源：[在急切加载的关联上指定条件](http://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-eager-loaded-associations)

我在开始时也对连接和包含感到困惑，但有很大的不同：

*   include 基本上对关联进行了急切的加载。当您要执行以下操作时，这很有用：

    ```
    @users.each do |user|
      user.event_patrons.first.event_id
    end 
    ```

    如果您有 100 个用户，那么您将生成 100 个额外的查询（1+N 问题）。

*   有时您需要在关联上指定一个条件（例如在您的情况下），这是连接很有用的地方，但不要过度滥用它，否则您会遇到笛卡尔积重载问题。

    关于这一切的一篇很棒的文章：可以在这里找到，可能适用于 rails 2.1，但也适用于 Rails 3：[http ://akitaonrails.com/2008/05/25/rolling-with-rails-2-1-第一个完整教程第 2 部分](http://akitaonrails.com/2008/05/25/rolling-with-rails-2-1-the-first-full-tutorial-part-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:24:09.967

Rails 是故意这样做的。您应该使用这样的查询：

```
User.all(:joins => :event_patrons, 
         :conditions => {:event_patrons => {:event_id => 1}}
         :include => :event_patrons) 
```

这将生成 2 个查询。一个给用户：

```
SELECT `users`.* FROM `users` 
INNER JOIN `event_patrons` ON `event_patrons`.`user_id` = `users`.`id` 
WHERE `event_patrons`.`event_id` = 1 
```

还有一个用于关联的 event_patrons：

```
SELECT `event_patrons`.* FROM `event_patrons` WHERE `event_patrons`.`id` IN (1,2,3...) 
```

您可以通过指定 :select 选项来做您想做的事，但我不建议这样做，因为它不会构造 event_patrons 模型，而是将数据留在用户模型中。

# memory - Emacs - nxhtml 模式 - 内存已满

> ID：11247666
> 
> 赞同：1
> 
> 时间：2012-06-28T15:14:27.717
> 
> 标签：memory, emacs, nxhtml

在 emacs 中使用 nxhtml-mode ，几周以来我遇到了问题。工作时，emacs 意外暂停，直到在模式行“！MEM FULL！”中显示一条消息；显然 nxhtml-mode 正在填满内存，直到 emacs 停止工作。我正在处理 html、php 和 css 文件。

我不知道如何以有意义的方式调试此问题。此外，我似乎是唯一一个遇到这个问题的人，因为谷歌搜索并没有给出这个问题的任何答案。

我在 Linux Mint 11 系统上使用 emacs 2.32。我找不到 nxhtml 的版本，它说从[http://bazaar.launchpad.net/~nxhtml/nxhtml/main/revision/829](http://bazaar.launchpad.net/~nxhtml/nxhtml/main/revision/829)下载的修订版 829 。

我用最小的 dot-emacs 设置了一个测试场景，只是为了测试 nxhtml 模式。这似乎没问题，但它并不反映我的高效设置。在测试 nxhtml-mode 是否不喜欢任何东西（在我的 dot-emacs 文件中调用）时，逐渐包含我在 emacs 中使用的所有内容（例如 org-mode）可能需要一周左右的时间。

还有其他方法吗？我可以找出导致内存过载的原因吗？有没有人在使用 nxhtml-mode 时遇到过类似的问题？

问候马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:08:13.880

我在 emacs 23.3 上遇到了同样的问题。最近我切换到 24.1 版本，希望问题会消失。海拉斯。

所以我切换到 sgml 模式

```
(add-to-list 'auto-mode-alist (cons (concat "\\." (regexp-opt '("xml" "xsd" "xslt" "xsl" "html" "htm" "wsdl" "xml.template" "xhtml" "jsp") t) "\\'") 'sgml-mode))

(add-hook 'sgml-mode-hook
          '(lambda ()
             (sgml-electric-tag-pair-mode))) 
```

实际上，您可以禁用 xml 验证：

```
(setq rng-nxml-auto-validate-flag nil) 
```

我是在您提出问题和评论后才这样做的，从那以后我就没有问题了。

# sql - 具有可变种子的身份

> ID：11247669
> 
> 赞同：2
> 
> 时间：2012-06-28T15:14:41.937
> 
> 标签：sql, tsql, variables, dynamic, identity

我有这个代码，我正在尝试通过一个变量设置身份种子

```
DECLARE @iKeyX INT

SELECT @iKeyX = MAX(KeyX) FROM Temporales..tmp_Orders

IF (@iKeyX = NULL)
   SET @iKeyX = 1
ELSE
   SET @iKeyX = @iKeyX + 1

IF OBJECT_ID('tempdb..#tmp_Orders','U') IS NOT NULL
   DROP TABLE #tmp_Orders

SELECT  IDENTITY(INT, @iKeyX, 1) AS KeyX,
        0 AS Valido, 
        OrderNumber, 
        OrderType, 
        Code, 
        Size, 
INTO #tmp_Orders
FROM TableWithData 
```

为什么 SQL 一直告诉我“'@ iKeyX' 附近的语法不正确”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:26:25.827

这似乎是SQL Server 中从未修复的[旧错误。](http://support.microsoft.com/KB/271827)要解决此问题（如链接中所建议），请将命令构建为字符串，然后执行该字符串。

来自链接的解决方法：

```
DECLARE @SQL varchar(8000)
DECLARE @myident int
SET @myident = 100
SET @sql = 'SELECT IDENTITY(INT, ' + CAST(@myident as varchar) + ', 1)    AS ident INTO #T2'
EXEC(@sql)
SELECT @@identity 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T23:21:21.377

因为我不喜欢将语句添加到字符串中。我最终做了以下事情：

```
DECLARE @NewId INT

SELECT @NewId = MAX(ID) FROM MyIDSTable

DECLARE @MyTempData TABLE (
    Id int not null primary key
    ,Field1 int not null
    ,Field2 nvarchar(25) not null
    ,Field3 datetime
)

INSERT INTO @MyTempData
SELECT  ROW_NUMBER() OVER ( Order by [C].[Cancel_id] ASC) + @NewId -1 [RowNum]
        ,Field1
        ,Field2
        ,Field3

INSERT INTO MyTable SELECT * FROM @MyTempData

UPDATE MYIDSTable SET ID = (SELECT MAX(ID) FROM @MyTempData) + 1 WHERE Name = 'Something' 
```

谢谢

# wcf - TCP中的应用层

> ID：11247670
> 
> 赞同：0
> 
> 时间：2012-06-28T15:14:41.880
> 
> 标签：wcf, layer

我所知道的是（HTTP、ftp、smtp）是一些应用程序层，它们将与 tcp（传输控制协议）交互以通过接收数据发送数据，但是当在 WCF 中使用 net.tcp:// 时会是什么默认应用层协议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:56:57.753

HTTP、FTP 实际上是应用层，意味着应用使用它们。任何使用 TCP 等可靠介质进行通信并发送二进制编码数据的聊天应用程序也被认为是应用层中的另一个应用程序，它有自己的通信协议，如 ftp smtp 有自己的约定。所以很简单 net:tcp 也可以在线上以二进制形式进行通信，因此如果不使用任何已定义的端口（如 80,21 等），则应将其视为另一个应用程序

> NetTcpBinding 默认生成一个运行时通信堆栈，它使用传输安全、TCP 进行消息传递和二进制消息编码。这种绑定是通过Intranet进行通信的适当的系统提供的选择。

[http://msdn.microsoft.com/en-us/library/system.servicemodel.nettcpbinding.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.nettcpbinding.aspx)

并与其他绑定进行比较

[http://blog.shutupandcode.net/?p=1085](http://blog.shutupandcode.net/?p=1085)

以及关于 TCP 堆栈中的应用层

> 应用层是最常见的网络感知程序用来通过网络与其他程序通信的层。在这一层发生的过程是特定于应用程序的；数据从网络感知程序以该应用程序内部使用的格式传递，并被编码为标准协议。
> 
> 一些特定的程序被认为在这一层中运行。它们提供直接支持用户应用程序的服务。这些程序及其相应的协议包括 HTTP（万维网）、FTP（文件传输）、SMTP（电子邮件）、SSH（安全远程登录）、DNS（名称 <-> IP 地址查找）等等。
> 
> 一旦来自应用程序的数据被编码到标准应用程序层协议中，它将被向下传递到 IP 堆栈的下一层。

[http://www.starlancs.com/EducateMe/educate_IP_stack.html](http://www.starlancs.com/EducateMe/educate_IP_stack.html)

注意这里的措辞应用层包含使用内部编码为标准协议（他们可以理解的协议）的数据的进程/程序。

协议只是一种通信协议。甚至您可以为您的应用程序构建自己的协议进行通信。

希望这能帮助你理解。

问候。

# iphone - 主视图控制器

> ID：11247672
> 
> 赞同：0
> 
> 时间：2012-06-28T15:14:52.177
> 
> 标签：iphone, ios, xcode

我的`ViewControllers`. 其中有四个。这是它们的顺序。对不起，我的观点命名这只是一个例子。

* * *

```
startViewController ------> menuViewController ------> C1ViewController
                                          \
                                           \ ------> ImportantViewController 
```

* * *

`startViewController`是我的介绍屏幕，完成后，它将 `[self presentViewController:vc animated:YES completion:NULL];`进入我的`menuViewController`.

在我`menuViewController`的是两个 ViewController 的按钮，如上图所示。我也用这个在视图中展示了它们： 我用这个`[self presentViewController:vc animated:YES completion:NULL];`返回`menuViewController``[self dismissModalViewControllerAnimated:YES];`

我想要的是保留`ImportantViewController`，`MainViewController-like`即使我去其他观点。我不知道它是否可以在 ViewController 中完成，但不是 removeFromSuperView 或者只是将它放在所有其他 ViewController 的后面。可能吗？如何？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:25:03.020

在 MenuViewController.h 文件中创建一个属性，就像这样......

```
#import "ImportantViewController.h"

@property (nonatomic, strong) ImportantViewController *importantViewController; 
```

关键是使属性变得强大，这意味着您的 menuViewController 将保留对您的重要视图控制器的引用，并在幕后增加保留计数。

在您的视图中确实加载（或任何地方，真的），您可以设置您的重要视图控制器...

```
@syntheseize importantViewController;

- (void)viewDidLoad
{
     self.importantViewController = [[ImportantViewController alloc] init];
} 
```

然后，当您准备好展示它时，请这样做：

```
[self presentViewController:importantViewController Animated:YES]; 
```

然后，当您最终关闭它时，您的 menuViewController 仍然会引用它并且不会被释放。然后，您可以稍后再次显示相同的控制器。

注意：这一切都假设您使用的是自动引用计数 (ARC)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:22:21.403

让 importantViewController 作为起始视图控制器，并以模态方式呈现所有其他视图。当你想要切换视图时，调用dismissModalViewControllerAnimated 方法，然后呈现一个新视图。如果您有文本字段或您希望能够保留在其中输入的信息而不在每次显示视图时保存/加载它的东西，这将起作用。

```
//Inside all view controllers aside from the important one

    [self dismissModalViewControllerAnimated:YES]; 
```

要显示一个新控制器，要么对其进行模态搜索，然后从重要的视图控制器调用它，要么以编程方式调用它。

# android - 将 android 与 AMF 网络服务连接

> ID：11247673
> 
> 赞同：0
> 
> 时间：2012-06-28T15:14:54.013
> 
> 标签：android, web-services, amf

我在查找有关如何与 AMF 通信 android 应用程序的文档时遇到了一些麻烦。

这篇文章与这篇文章有关[如何将应用程序 Android 与 amf Web 服务连接？](https://stackoverflow.com/questions/9992095/how-to-connect-app-android-with-amf-web-services). 我看过 Adob​​e 的帖子，但对我来说无能为力。

我在我的 Swing 应用程序中使用 flex-messaging-common 和 flex-messaging-core 并且想在 android 中做同样的事情，但是类不同（例如：AMFConnection 不存在）并且找不到任何地方怎么做相同。

除了 Adob​​e 中的链接，还有其他教程、文档或其他内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:01:02.927

万一其他人也有同样的问题，我最终使用了[Klio 库](http://code.google.com/p/klio-mobile-dataservice/)，一切正常。

# php - SQL 查询在 phpMyAdmin 中有效，但在使用 PDO 的 php 中无效

> ID：11247676
> 
> 赞同：0
> 
> 时间：2012-06-28T15:15:33.077
> 
> 标签：php, sql, pdo, escaping

我有一个简单的 sql 查询，我想使用 PDO 执行，如下所示：

```
try {
    //connect to server
    $dbh = new PDO('mysql:host='.DBHOST.';dbname='.DBNAME, DBUSER, DBPASS);
    //check if username is valid
    $q="SELECT COUNT(*), first FROM users WHERE email='".$_POST['email']."'";
    echo $q;
    $stmt=$dbh->prepare($q);
    $stmt->execute();
    $f=$stmt->fetch();
    echo $f[0];
    echo $f[1];
catch (PDOException $e) {
    echo "There was an internal error resetting your password.";
  die();
} 
```

echo $q 的输出如下：

```
SELECT COUNT(*) first FROM users WHERE email='ahg44@cornell.edu' 
```

当我将其复制并粘贴到 phpmyadmin 的 SQL 选项卡中时，查询成功返回了我正在寻找的元组。但是，它不会在 php 代码中返回任何内容。

另外，当我打电话时： $stmt->debugDumpParams(); 查询后，将打印：

```
SQL: [64] SELECT COUNT(*), first FROM users WHERE email='ahg44@cornell.edu' Params: 0 
```

起初我认为这是读取 POST 变量的错误，所以我硬编码：

```
$q="SELECT COUNT(*), first FROM users WHERE email='ahg44@cornell.edu'"; 
```

代替原始查询，但这给了我相同的结果。

此外，如果我将查询更改为简单的内容，例如：

```
$q="SELECT COUNT(*), first FROM users 
```

代码工作正常。

奇怪的是这个查询昨天运行良好，所以我今天在清理我的代码时一定犯了一个小错误。我有预感这个问题与转义字符有关，但我已经在网上搜索了一段时间并没有找到解决方案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:16:57.610

尽管您在问题中粘贴的 PHP 看起来是正确的，但 tt 看起来您实际上在正在执行的代码中缺少逗号。

这一行：

```
SQL: [64] SELECT COUNT(*) first FROM users WHERE email='ahg44@cornell.edu' 
```

之后不显示逗号`COUNT(*)`，因此`first`成为`COUNT(*)`列的别名，而不是被选为单独的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:18:12.167

您错误地使用了 PDO。您应该使用准备好的语句，如下所示：

```
$q = "SELECT COUNT(*), first FROM users WHERE email = ?";
$stmt = $dbh->prepare( $q);
$stmt->execute( array( $_POST['email']));
$f = $stmt->fetch(); 
```

# jquery - jQuery：识别第一个事件后停止第二个绑定事件

> ID：11247677
> 
> 赞同：1
> 
> 时间：2012-06-28T15:15:39.417
> 
> 标签：jquery, events, click, touchstart

在 jQuery 中，您可以将两个事件绑定到一个 jQuery 对象。启动第一个事件后，如何阻止第二个事件触发？如果我点击我的元素，touchstart 会立即触发。但是如果我的手指一直按住元素，那么点击就会触发。我只希望 touchstart 触发然后停止。问题是它连续两次运行我的函数。

```
$(document).on("touchstart click", ".bluePill", function (e) {e.stopPropagation();}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:32:34.370

你必须使用这个：[http ://api.jquery.com/event.stopImmediatePropagation/](http://api.jquery.com/event.stopImmediatePropagation/)

# python - 比较列表列表并将某些元素写入新列表

> ID：11247682
> 
> 赞同：1
> 
> 时间：2012-06-28T15:15:47.470
> 
> 标签：python, list

看起来这个问题已经被问了几十次了，但没有一个答案对我有帮助，所以我怕我再问一遍（请不要讨厌我！）。我有两个列表列表：

```
amm = [['0005FC66DF', '4403'", ',\n'], [" ['0001C52E02', '4406'", ',\n'],etc] 
```

和

```
data = [['07/11/2012', '09:53:36', 'Thing', '#0F', '0006E7895B', 'T', 'U\n'], ['05/13/2012', '09:54:27', 'Thing', '#0F', '0006E3DADA', 'T', 'U\n'], etc]. 
```

我想查看 data 列表中的第 5 个元素是否与 amm 列表中的第一个元素相同，如果是，我想将 data 中的列表写入新的列表列表 amv。我已经尝试了一切。我从

```
for i in data:
  if data[i][4] in amm:
    amv[i].append(i) 
```

没有给amv写任何东西，所以我尝试了

```
amv=[item for item in data if item[4] in[items for items in amm]] 
```

有同样的问题，所以我尝试了

```
 for i in data:
    for j in amm:
        if i[4] == j[0]:
             amv.append(j) 
```

以及这些主题的一百万个（可能更准确）变体。这应该是一件很简单的事情，但它对我不起作用。任何帮助将非常非常感谢。提前致谢！

编辑对不起，这不是很清楚。我要做的是编写一个新列表（amv），其中包含数据中的所有列表，这些列表的第五个元素出现在 amm 中。我展示的所有脚本都没有在新列表 amv 中添加任何内容。amv一直是空的，我不知道为什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:28:03.753

```
s = set(x[0] for x in amm)
amv = [x for x in data if x[4] in s] 
```

# django - django 1.3 list_filter 表示层 - 枚举

> ID：11247686
> 
> 赞同：0
> 
> 时间：2012-06-28T15:15:52.977
> 
> 标签：django, django-admin

我想用 django`list_filter`来过滤一些枚举值。因此，我当然有面板，其中包含诸如此类的值`0, 1, 2,..., 1337`。我想知道我是否能够将这些值更改为它的文本表示形式。例如 0 到马，1 到牛，2 到摩西等等。是否有可能“轻松”实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:26:51.053

使用[选择](https://docs.djangoproject.com/en/1.4/ref/models/fields/#choices)

```
SOME_CHOICES = (
    (0, 'horse'),
    (1, 'cow'),
    (2, 'moses'),
    ...
)

# in model
some_field = models.PositiveIntegerField(choices=SOME_CHOICES) 
```

# php - 如何在购物商店中创建 PHP Ajax 过滤器

> ID：11247687
> 
> 赞同：1
> 
> 时间：2012-06-28T15:15:54.550
> 
> 标签：php, ajax, shopping-cart

我有一个要求，我需要在基于核心 PHP 的购物车商店中添加过滤器。基本上，产品过滤的工作方式与[这家购物商店](http://www.watchshop.com/)的类似。我对 AJAX 很陌生，所以我需要你的帮助，我应该从哪里开始。是否有任何具有类似功能的优秀 Jquery 插件。

提前致谢。

# android - 如何从 java 代码中更改使用 setBackgroundResource() 的 ImageView 的背景颜色？

> ID：11247698
> 
> 赞同：1
> 
> 时间：2012-06-28T15:16:20.407
> 
> 标签：android, xml, imageview, border, shape

我正在使用这样的`<shape>`标签：

```
<?xml version="1.0" encoding="UTF-8"?>
  <shape xmlns:android="http://schemas.android.com/apk/res/android">
  <solid android:color="#00FFFFFF" />
  <stroke android:width="1dp" android:color="#FFFFFFFF" />
  <padding android:left="1dp" android:top="1dp" android:right="1dp"
    android:bottom="1dp" />
</shape> 
```

我有很多使用`<shape>`GridView 中的标签创建的视图，我需要更改此处设置的部分：

```
<solid android:color="#00FFFFFF" /> 
```

并设置另一种颜色，但我不知道如何......我尝试像这样使用 ImageView.Adapter：

```
imageView = new ImageView(context);
        imageView.setLayoutParams(new GridView.LayoutParams(160, 105));
        imageView.setBackgroundColor(myBackgroundColors[position]);
        imageView.setBackgroundResource(R.drawable.border); 
```

我在调用 setBackgroundResource() 之前设置了背景颜色，在 XML 中我使用透明颜色，但它不起作用......有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:25:36.777

在 xml 中使用`<shape />`（[Shape Drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)）标签时，编译的资源不是图像视图；它编译成[GradientDrawable](http://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html)。该`<solid />`标记定义了一种纯色来填充定义的形状并将其设置为`android:color`。因此，要以编程方式更改此设置，您应该使用[setColor()](http://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html#setColor%28int%29)方法。

# c++ - LNK2019：函数 ___tmainCRTStartup 中引用的未解析外部符号 _main

> ID：11247699
> 
> 赞同：29
> 
> 时间：2012-06-28T15:16:25.947
> 
> 标签：c++, windows, visual-studio-2008, windows-7, lnk2019

我有以下错误：

> LNK2019：函数 ___tmainCRTStartup 中引用的未解析外部符号 _main

有很多与此错误相关的线程，但这些解决方案都不适合我。而且，没有人解释为什么会出现这个错误。

我试过：

*   `wWinMainCRTStartup`[作为链接器属性（线程](http://social.msdn.microsoft.com/Forums/en/vclanguage/thread/14e85604-6929-4707-a22e-8cdf596926a6)）中的入口点
*   将链接器设置为“Windows”（与上述相同的线程）
*   右键单击解决方案名称->添加->现有项目->带有主文件的文件（与上述相同的线程）
*   `#include <tchar.h>`（[错误 LNK2019：未解析的外部符号 _main 在函数 ___tmainCRTStartup 中引用](https://stackoverflow.com/questions/4845410/)）
*   尝试项目 + 属性、C/C++、代码生成、缓冲区安全检查 = 否（[线程](http://social.msdn.microsoft.com/Forums/hi-IN/vclanguage/thread/e2ea62c3-beb3-47a4-8963-60b799e3375a)）
*   选项：C/C++、代码生成、运行库=/MTd；C/C++，代码生成，基本运行时检查=默认；C/C++，代码生成，缓冲区安全检查=否；链接器，高级，入口点=主（[线程](http://social.msdn.microsoft.com/Forums/hi-IN/vclanguage/thread/e2ea62c3-beb3-47a4-8963-60b799e3375a)）
*   `main.cpp`在except`using namespace std`和- 中注释掉标头`#include <iostream>`- 导致引用这些标头的函数出现级联和滚雪球错误
*   我删除了除测试代码之外的所有内容，并排除了除;之外的`main.cpp`所有源文件。`main.cpp`正如预期的那样，它是朝着正确方向迈出的一小步。问题一定出在其中一个头文件上。
*   使用 Win32 Windows 应用程序模板创建新项目（[线程](http://social.msdn.microsoft.com/Forums/ar-SA/vcgeneral/thread/105a366f-c38d-4c1c-9278-eca64589e7ca)和[线程](http://social.msdn.microsoft.com/Forums/zh/Vsexpressvc/thread/341780c2-162e-4b36-9402-283c0cf7c0ac)）

没有尝试过并怀疑这些也不起作用：

*   使用`int main()`（不确定它们的意思，文件名或主函数名）（[线程](http://social.msdn.microsoft.com/Forums/zh/Vsexpressvc/thread/341780c2-162e-4b36-9402-283c0cf7c0ac)）
*   用于在 Windows 7 x64（[线程](http://hdf-forum.184993.n3.nabble.com/error-LNK2019-unresolved-external-symbol-main-referenced-in-function-tmainCRTStartup-td3138042.html)）`cmake`上构建

为什么我会收到此错误，解决方案是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-28T15:27:20.350

你的项目类型是什么？如果它是“Win32 项目”，您的入口点应该是`(w)WinMain`. 如果它是“Win32 控制台项目”，那么它应该是`(w)main`. 名称`_tmain`是#defined，`main`取决于`wmain`是否定义了 UNICODE。

如果是 DLL，则`DllMain`.

项目类型可以在项目属性、链接器、系统、子系统下看到。它会说“控制台”或“Windows”。

请注意，入口点名称取决于是否定义了 UNICODE。在 VS2008 中，它是默认定义的。

main 的正确原型是

```
int _tmain(int argc, _TCHAR* argv[]) 
```

或者

```
int _tmain() 
```

确保它是其中之一。

编辑：

如果您在 _TCHAR 上遇到错误，请放置一个

```
#include <tchar.h> 
```

如果您认为问题出在某个标题上，请使用 main() 转到文件的属性，然后在 Preprocessor 下启用预处理文件的生成。然后编译。您将获得一个具有相同名称且扩展名为 .i 的文件。打开它，看看 main() 函数是否发生了任何不愉快的事情。理论上可能有流氓#defines ...

编辑2：

定义 UNICODE（这是默认值）后，链接器期望入口点是 wmain()，而不是 main()。_tmain 具有与 UNICODE 无关的优势——它可以转换为 main 或 wmain。

前段时间，有理由同时维护 ANSI 构建和 Unicode 构建。在 Windows 95/98/Me 中，Unicode 支持非常不完整。主要的 API 是 ANSI，Unicode 版本随处可见，但并不普遍。此外，VS 调试器无法显示 Unicode 字符串。在 NT 内核操作系统（即 Windows 2000/XP/Vista/7/8/10）中，Unicode 支持是主要的，并且在顶部添加了 ANSI 函数。所以从 VS2005 开始，项目创建时的默认设置是 Unicode。这意味着 - wmain。由于参数类型不同，它们无法保持相同的入口点名称。_TCHAR #定义为 char 或 wchar_t。所以 _tmain 要么是 main(int argc, char **argv) 要么是 wmain(int argc, wchar_t **argv)。

您在某些时候遇到错误的原因`_tmain`可能是因为您没有更改`argv`to的类型`_TCHAR**`。

如果您不打算支持 ANSI（可能不支持），您可以将您的入口点重新定义为

```
int wmain(int argc, wchar_t *argv[]) 
```

并删除`tchar.h`包含行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-11T16:58:24.670

因为它还没有被提及，所以这对我来说是解决方案：

为我的项目创建新配置后，我的 DLL 出现此错误。我不得不去`Project Properties -> Configuration Properties -> General`并改变`Configuration Type`to `Dynamic Library (.dll)`。

因此，如果您在尝试其他所有方法后仍然遇到问题，则值得检查一下配置类型是否符合您对项目的期望。如果设置不正确，编译器将寻找错误的主符号。就我而言，它正在寻找`WinMain`而不是`DllMain`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T15:33:51.380

我在尝试关闭控制台应用程序项目中的预编译头文件并删除头文件 stdafx.h 时遇到此错误

要解决此问题，请转到您的项目属性 -> 链接器 -> 子系统并将值更改为**未设置**

在您的主类中，使用其他人已经提到的标准 C++ 主函数原型：

```
int main(int argc, char** argv) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-05T08:59:19.537

如果您有一个“Win32 项目”+ 定义了一个 WinMain 并且您的 SubSystem 链接器设置设置为 WINDOWS，如果有人将链接器设置中的“附加选项”设置为“/SUBSYSTEM:CONSOLE”（看起来像这样的附加设置优于实际的子系统设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-04T13:06:21.207

我发现当我选择 Project->Properties->Linker->System->SubSystem->Console(/subsystem:console) 的选项时，然后确保包含函数：int _tmain(int argc,_TCHAR* argv[] ){return 0} 编译、链接、运行全部OK；

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-03T11:34:28.433

不小心将 wmain 放入命名空间时出现此错误。wmain 不应位于任何命名空间中。此外，我正在使用的一个库中有一个 main 函数，而 VS 从那里获取了 main 函数，这让它变得更加陌生。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-31T21:12:33.577

几分钟前我遇到了这个问题。当我在 main() 定义中添加 'extern "C"' 时，它就消失了。

奇怪的是，我昨天写的另一个简单程序几乎相同，没有外部“C”，但编译时没有这个链接器错误。

这让我认为问题是在某些配置对话框的深处发现了一些微妙的设置，并且“外部“C””并没有真正解决根本问题，但表面上使事情正常进行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-08T19:33:32.360

这`main`适用于linux和windows - 通过反复试验和其他人的帮助发现它所以无法解释它为什么有效，它只是`int main(int argc, char** argv)`

没有`tchar.h`必要

[这是维基百科主函数](http://en.wikipedia.org/wiki/Main_function#Variants)中的相同答案

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-19T12:13:44.183

~~就我而言，这是因为我不小心删除（未删除）**头文件**部分中的`stdafx.h`和`targetver.h`文件。~~

 **~~将这些文件添加回头**文件**，问题就解决了。~~

我有这些：

```
#pragma comment( linker, "/entry:\"mainCRTStartup\"" ) // set the entry point to be main() 
```

我只需要评论（通过前置`//`），这很好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-03T22:59:59.997

出于一个有趣的原因，我在 Visual Studio 2015 中也发生了这种情况。只需在此处添加它，以防它发生在其他人身上。

我已经在项目中有许多文件，并且我正在添加另一个具有主要功能的文件，但是当我最初添加文件时，我在扩展名中输入了一个错字（.coo 而不是 .cpp）。我纠正了这一点，但是当我完成时，我得到了这个错误。事实证明，Visual Studio 很聪明，当添加文件时，由于初始扩展名，它决定它不是源文件。

在解决方案资源管理器中右键单击文件并选择 Properties -> General -> ItemType 并将其设置为“C/C++ 编译器”修复了该问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-19T02:24:57.047

我之前也遇到过这个问题，但是已经解决了。主要问题是我错误地拼写了 int main() 函数。而不是写 int main() 我写了 int mian() ....干杯！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-11-13T04:35:36.613

[![屏幕快照 Visual Studio 2015](../Images/b0a2a9c8e291992aa4778ad68ffe12d1.png)](https://i.stack.imgur.com/lv1Xi.jpg)

按照前面的建议，将系统设置为控制台。只是，还必须将字符集更改为 Unicode，参见上面 Visual Studio 2015 的快照。**

# javascript - HTML / JS 地理定位和比较坐标

> ID：11247701
> 
> 赞同：3
> 
> 时间：2012-06-28T15:16:38.200
> 
> 标签：javascript, html, mobile, geolocation

我找到了很多关于如何捕捉某人地理位置的演示和示例，但是我很难弄清楚如何获取这些坐标并将它们与建筑物的坐标进行比较（或者我想让它更加全面；将它们当前的*近似*坐标与建筑物的坐标进行比较）。

不会发布任何关于如何找到某人位置的代码，因为它无处不在，但我目前的最终结果是我有我的设备的长/纬度坐标，但我现在需要做的是将它们与坐标进行比较特定建筑物的坐标，然后如果它们在 1000 米之内则执行一个动作（重定向到一个页面.. 是的，我知道）。我目前正在使用**getCurrentPosition**但我意识到在研究差异后我可能不得不切换到 watchPosition。

比较坐标或坐标+估计区域的任何帮助都会非常有帮助..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:21:24.823

您可能希望使用 Haversine 公式来计算距离，但如果您只对非常小的距离感兴趣，您可能只使用二次

这是通过 MYSQL 的 Haversine 示例：[https](https://developers.google.com/maps/articles/phpsqlsearch_v3#findnearsql) ://developers.google.com/maps/articles/phpsqlsearch_v3#findnearsql （如果您的各种职位碰巧在数据库中......但如果您真的只有一个建筑物，公式仍然成立，只是你将在你的 JS 中而不是在查询中实现它）

[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

[http://en.wikipedia.org/wiki/Haversine_formula](http://en.wikipedia.org/wiki/Haversine_formula)

# css - 侧边栏的高度等于主要内容

> ID：11247706
> 
> 赞同：0
> 
> 时间：2012-06-28T15:16:46.650
> 
> 标签：css, height, equals

我在[这里](http://nl.italiethuis.com/category/territory/lazio/)编辑一个 wordpress 主题。我的侧边栏高度有问题。

如何使右侧边栏与主要内容一样高？

请注意：侧边栏通过“溢出：自动”参数保持 FLUID。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T18:51:30.980

等高列有几种技术，我通常喜欢[Alex Robinson](http://www.positioniseverything.net/articles/onetruelayout/equalheight)在**Position Everything**上的这个：

> 如何？
> 
> 基本方法是这样工作的：
> 
> 1.  将充当列的块必须包装在容器元素中
> 2.  应用**溢出：隐藏**到容器元素
> 3.  将**padding-bottom: $big_value**应用于列块，其中 $big_value 是一个足够大的值，以保证它等于或大于最高列
> 4.  将**margin-bottom: -$big_value**应用于列块

CSS 看起来像这样：

```
 #block_1, #block_2, #block_3 {
     padding-bottom: 32767px;
     margin-bottom: -32767px;
 }

 #wrapper {
     overflow: hidden;
 } 
```

和 HTML：

```
<div id="wrapper">
    <div id="block_1">
        <p>Content goes here</p>
    </div>
    <div id="block_2">
        <p>Content goes here</p>
    </div>
    <div id="block_3">
        <p>Content goes here</p>
    </div>
</div> 
```

# wpf - 自定义与用户控制

> ID：11247708
> 
> 赞同：64
> 
> 时间：2012-06-28T15:16:54.857
> 
> 标签：wpf, user-controls, wpf-controls, custom-controls, viewmodel

我一直在阅读有关用户控件和自定义控件之间区别的一些解释，例如： http: [//www.wpftutorial.net/CustomVsUserControl.html](http://www.wpftutorial.net/CustomVsUserControl.html)

例如，我想创建一个具有 2 个组合框的数据网格的简单组合，这些组合框负责更改数据网格项目的值。我想为此创建一个特定的控件，因为我将多次使用它。我想实现背后的逻辑，然后在 xaml 调用中我只需要指定 itemsSource。

对于这个例子，我应该创建一个用户还是自定义控件？既然我会有属性和逻辑，我应该有这个控件的视图模型吗？

编辑：你知道一些文章在这两个选项之间有明确的概念分离吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-06-28T15:55:45.910

不仅在用户控件和自定义控件之间进行选择，而且在用户控件、自定义控件、自定义控件模板、自定义数据模板、标题模板（用于基于集合的控件）、附加属性之间进行选择。请参阅[控制创作概述](https://docs.microsoft.com/en-us/dotnet/framework/wpf/controls/control-authoring-overview)

我按照考虑的顺序去

1.  **附加属性**：如果可以实现功能，我使用附加属性。例如，数字文本框。

2.  **控制模板**：当可以通过自定义控制模板来满足需求时，我使用它。例如，圆形进度条。

3.  **自定义控件**：如果控件模板做不到，我使用自定义控件。前提是我需要自定义/扩展已经存在的控件。示例提供基于 GridView 中标题行的排序、过滤（GridView 存在于 Metro 应用程序中，仅用于说明示例）

4.  **用户控制**：最不喜欢的一个。仅当需要合成时，我无法使用自定义控件来完成。就像在您的示例中一样，2 个组合框和 1 个数据网格。用户控件不提供可以通过自定义控件或控件模板利用的无缝外观功能。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-06-28T17:40:58.103

您已经有了一些很好的答案来解释差异，但也了解自定义控件并`UserControls`具有不同的目的：

A`UserControl`通常封装了某种复合行为。例如，如果您的应用程序需要在许多地方编辑联系人详细信息，您可以创建一个自定义控件，该控件具有所有数据的标签和文本字段，并使用具有相关代码的提交按钮并重用此控件在整个应用程序中。

自定义控件是从`WPF`控件类（EG等）之一派生的控件`Control`，`ContentControl`并且必须在代码中创建。这些控制通常有一个统一的目的（想想、、、`TextBox`）`ComboBox`，`Label`而不是作为一个整体一起行动（尽管不一定是这样）。

`UserControl`'s 通常对于不熟悉的人来说更容易，`WPF`因为它们可以在视觉上进行设计。

我的建议是从`UserControl`. 随着您对工作方式越来越熟悉，您可以随时将其重构为自定义控件`WPF`。将控件创建为自定义控件*需要*了解`ControlTemplate`s 和`Style`s，因为您需要提供自己的知识来定义控件的外观。

说完所有，只要控件运行正确，您使用哪种方法都没有关系。

有关同一问题的两种方法的示例，请参见[这篇文章。](https://stackoverflow.com/a/11234797/577417)帖子作者想要一个可以在主要内容前面呈现模态内容的控件。帖子作者实际上通过将其实现为`UserControl`. 我在帖子中添加了一个答案，该帖子将控件创建为自定义控件，但两者都具有相同的最终效果。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-28T15:53:05.217

最好的解释在[msdn](https://docs.microsoft.com/en-us/dotnet/framework/wpf/controls/control-authoring-overview#models-for-control-authoring)中。CustomControl 更像是一个“虚拟”名称，在 WPF 中没有名为“CustomControl”的类，而是意味着在 WPF 控件类之一之上创建一个新类，例如`Control`，`ItemsControl`甚至更具体的控件，例如`TextBox`or `Button`。

对于您的特定情况， UserControl 应该就足够了，创建 CustomControl 是可以轻松避免的。虽然这不是一件坏事，但很多人，尤其是来自 WinForms 的 WPF 初学者往往会在必要时进行子类化。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-02-08T17:24:04.000

*   如果您**有一个视图模型**，并且希望为它创建一个视图，请使用**User-Control**。

*   如果您需要一个没有特定视图模型的**自治**
    控件， 您可能需要一个**custom-control**。

*   如果您发现**您需要的功能作为整体，已经存在**于其他控件中，您需要覆盖现有的**控件模板**。
    *（即：对于菱形按钮 - 您需要覆盖按钮控件模板。）*

*   关于附加属性和附加行为，当您有一个想要扩展更多属性的控件或者您希望它的行为与其默认行为略有不同时，这些非常有用。

在所提供的 OP 描述的组合情况下，可以使用用户控件或自定义控件来实现。我更喜欢自定义控件，因为没有提供特定的视图模型，“输入”只是绑定到项目集合的属性。

哦，还有，抱歉有点迟到了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T15:38:09.847

如果这是您第一次构建控件，我推荐 UserControl，因为 VS 可以让您更轻松地设计其界面。自定义控件更强大，但您必须清楚地将控件的逻辑与其界面分开，这需要更多的准备工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-06T22:21:07.977

您可以轻松地进行视觉设计`CustomControl`。创建新的`UserControl`（或窗口）。在 Designer 中直观地创建其 xaml 结构。将生成的 xaml 的正文复制粘贴到`ControlTemplate`新的`CustomControl`（例如，在通用主题文件中）。

如果我没记错的话，您还可以直接在 Blend 中直观地设计 CustomControl 模板。

当然，您也可以在 Window 中实例化 wip CustomControl，并将 Window 的 Designer 视图作为新面板放在 VisualStudio 中控件的 xaml 视图上方。样式模板中的一些 xaml 绑定不会像这样在 Designer 中显示，直到我重建。

[恕我直言 GUI 主要是视觉问题，不应该也不需要在代码中创建。]

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-06-28T15:18:44.113

好吧，要创建自定义控件，您需要将其实现为用户控件。您自己的用户控件称为自定义控件。这很简单。

UserControl 是包含自定义内容的基类：

```
<UserControl>
  Your custom WPF content
</UserControl> 
```

我不完全同意这篇文章。但是，在您的情况下，您需要一个可以在 UI 中重新使用的 UserControl。

# c# - 具有一对一关系的 EF TPT 继承映射问题

> ID：11247710
> 
> 赞同：1
> 
> 时间：2012-06-28T15:16:59.840
> 
> 标签：c#, entity-framework, inheritance, ef-code-first

我正在尝试在具有继承层次结构的实体之间配置一对一的关系。

对于示例，让我们考虑以下第一个继承链：

```
[Table("A")]
public abstract class A
{
    public Guid ID { get; set; }
    ...
}

[Table("AA")]
public class AA : A
{
    ...
}

[Table("AB")]
public class AB : A
{
    ...
} 
```

然后，考虑第二个继承链：

```
[Table("B")]
public abstract class B
{
    public Guid ID { get; set; }
}

[Table("BA")]
public class BA : B
{
    ...
}

[Table("BB")]
public class BB : B
{
    ...
} 
```

在 AA 和 BA 之间添加一对一的关系，以 AA 作为主要实体：

```
[Table("AA")]
public class AA : A
{
    ...
    public BA BAChild { get; set; }
    ...
}

[Table("BA")]
public class BA : B
{
    ...
    public AA Parent { get; set; }
    ...
}

public class AAConfiguration : EntityTypeConfiguration<AA>
{
    public AAConfiguration()
    {
        this.HasRequired(o => o.BAChild)
            .WithRequiredPrincipal(o => o.Parent);
    }
} 
```

在 AB 和 BB 之间添加一对一的关系，以 AB 作为主要实体：

```
[Table("AB")]
public class AB : A
{
    ...
    public BB BBChild { get; set; }
    ...
}

[Table("BB")]
public class BB : B
{
    ...
    public AB Parent { get; set; }
    ...
}

public class ABConfiguration : EntityTypeConfiguration<AB>
{
    public ABConfiguration()
    {
        this.HasRequired(o => o.BBChild)
            .WithRequiredPrincipal(o => o.Parent);
    }
} 
```

我还希望 EF 为实体 A 和 B 生成表，因此我添加并注册了以下空 EntityTypeConfiguration ：

```
public class AConfiguration : EntityTypeConfiguration<A>
{

}

public class BConfiguration : EntityTypeConfiguration<B>
{

} 
```

如果您像这样运行代码，您将在创建索引期间遇到错误（[升级到实体框架 4.3.1 后看到未处理的异常](https://stackoverflow.com/questions/10441924/unhandled-exception-after-upgrading-to-entity-framework-4-3-1)）

所以让我们做一些棘手的代码并注册一个从 SqlServerMigrationSqlGenerator 派生的自定义 MigrationSqlGenerator 以避免根据我的业务命名规则创建索引：

```
public class Configuration : DbMigrationsConfiguration<DataContext>
{
    public Configuration()
    {
        ...
        this.SetSqlGenerator("System.Data.SqlClient", new CustomSqlServerGenerator());
        ...
    }
}

public class CustomSqlServerGenerator : SqlServerMigrationSqlGenerator
{
    protected override void Generate(CreateIndexOperation createIndexOperation)
    {
        if (createIndexOperation.Columns.Count() == 1 && createIndexOperation.Columns.Any(o => o == "ID"))
            return;

        base.Generate(createIndexOperation);
    }
}

public class DataContext : DbContext
{
    static DataContext()
    {
        Database.SetInitializer<DataContext>(new MigrateDatabaseToLatestVersion<DataContext, Configuration>());
    }

    ...
} 
```

所以现在是时候生成数据库了，我使用以下代码：

```
...
DataContext dataContext = new DataContext();
dataContext.Database.Initialize(true);
... 
```

**现在，如果您查看生成的数据库，您将看到表 BA 和 BB 都有表 AB 的外键，而 BA 和 AA 之间没有外键！？！**

我可能遗漏了一些东西，但我看不出这个样本有什么问题。

可以做些什么来正确生成数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:21:37.197

在对反射器进行一些深入搜索之后，这种行为似乎是一个 EntityFramework 错误。

我在以下函数中的 System.Data.Entity.ModelConfiguration.Configuration.Mapping.ForeignKeyPrimitiveOperations 中找到了问题：

```
 private static void UpdatePrincipalTables(DbDatabaseMapping databaseMapping, DbTableMetadata toTable, bool removeFks, EdmAssociationType associationType, EdmEntityType et)
    {
        ...
    } 
```

当 EntityFramework 加载模型时，将使用基本类型加载 DbDatabaseMapping 实例，并将外键约束添加到基本类型元数据中。EntityFramework 还将 EdmAssociationType 的实例存储在外键约束的注释中，以维护生成正确约束所需的所有信息。

稍后，当在 DbDatabaseMapping 实例中添加和配置派生类型时，EntityFramework 会尝试更新关联的相关端以移动派生表上的外键约束。为了识别外键约束以更新以下选择器，其中 tableInfo.Value 是一个 IEnumerable，其中包含外键的依赖列：

```
fk => fk.DependentColumns.SequenceEqual<DbTableColumnMetadata>(tableInfo.Value); 
```

不幸的是，在我的例子中，对于 AA 和 BA 之间的关系以及 AB 和 BB 之间的关系，使用了“ID”列。

因此，它们都第一次更新，用 AA 元数据替换主表元数据，第二次用 AB 元数据替换。

结果，两个外键都是以 AB 作为主表生成的！

我认为在函数参数中传递的 EdmEntityType 应该在选择器中使用，以便与存储在外键约束注释中的关系端的实体类型进行比较。

# python - python diff SequenceMatcher - 修补列表

> ID：11247713
> 
> 赞同：3
> 
> 时间：2012-06-28T15:17:09.990
> 
> 标签：python, diff

我修补了一个列表，使其看起来像另一个：

```
a = [x for x in "qabxcd"]
b = [x for x in "abycdf"]
c = a[:]
s = SequenceMatcher(None, a, b)
for tag, i1, i2, j1, j2 in s.get_opcodes():
    print ("%7s a[%d:%d] (%s) b[%d:%d] (%s)" % 
    (tag, i1, i2, a[i1:i2], j1, j2, b[j1:j2]))
    if tag == "delete":
        del c[i1:i2]
    elif tag == "replace":
        c[i1:i2] = b[j1-1:j2-1]
    elif tag == "insert":
        c[i1:i2] = b[j1:j2]
print c
print b
print c == b
a == b 
```

但列表不相等：

```
 delete a[0:1] (['q']) b[0:0] ([])
  equal a[1:3] (['a', 'b']) b[0:2] (['a', 'b'])
replace a[3:4] (['x']) b[2:3] (['y'])
  equal a[4:6] (['c', 'd']) b[3:5] (['c', 'd'])
 insert a[6:6] ([]) b[5:6] (['f'])
['a', 'b', 'x', 'b', 'd', 'f']
['a', 'b', 'y', 'c', 'd', 'f']
False 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:58:56.293

所有的动作都会改变索引。当我愿意时，我必须计算变化：

```
a = [x for x in "abyffgh fg99"]
b = [x for x in "999aby99ff9h9"]
c = a[:]

s = SequenceMatcher(None, a, b)

i = 0
for tag, i1, i2, j1, j2 in s.get_opcodes():
    print ("%7s a[%d:%d] (%s) b[%d:%d] (%s) c[%d:%d] (%s)" % 
    (tag, i1, i2, a[i1:i2], j1, j2, b[j1:j2], i1, i2, c[i1 + i:i2 + i]))
    if tag == "delete":
        del c[i1 + i:i2 + i]
        i -= i2 - i1
    elif tag == "replace":
        c[i1 + i:i2 + i] = b[j1:j2]
        i -= i2 - i1 - j2 + j1
    elif tag == "insert":
        c[i1 + i:i2 + i] = b[j1:j2]
        i += j2 - j1
    print c
    print i
print c
print b
print c == b
a == b 
```

输出：

```
['9', '9', '9', 'a', 'b', 'y', '9', '9', 'f', 'f', '9', 'h', ' ', 'f', 'g', '9', '9']
5
 delete a[7:10] ([' ', 'f', 'g']) b[12:12] ([]) c[7:10] ([' ', 'f', 'g'])
['9', '9', '9', 'a', 'b', 'y', '9', '9', 'f', 'f', '9', 'h', '9', '9']
1
  equal a[10:11] (['9']) b[12:13] (['9']) c[10:11] (['h'])
['9', '9', '9', 'a', 'b', 'y', '9', '9', 'f', 'f', '9', 'h', '9', '9']
1
 delete a[11:12] (['9']) b[13:13] ([]) c[11:12] (['9'])
['9', '9', '9', 'a', 'b', 'y', '9', '9', 'f', 'f', '9', 'h', '9']
-1
['9', '9', '9', 'a', 'b', 'y', '9', '9', 'f', 'f', '9', 'h', '9']
['9', '9', '9', 'a', 'b', 'y', '9', '9', 'f', 'f', '9', 'h', '9']
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:57:14.950

我想我明白了原因：返回的 5 元组`s.get_opcodes()`在容器的初始状态下是有效的，即如果您的对象发生更改，它们必须进行调整：尤其是删除操作的情况，它会更改索引（即为什么`'x'`不变成`'y'`）。

据我所见，删除操作是唯一更改索引的操作，因此我将用标记替换已删除的项目（我使用了“#”）并在最后将其删除：

```
>>> c = a[:]
>>> for tag, i1, i2, j1, j2 in s.get_opcodes():
    print ("%7s a[%d:%d] (%s) b[%d:%d] (%s)" % 
    (tag, i1, i2, a[i1:i2], j1, j2, b[j1:j2]))
    if tag == "delete":
        c[i1:i2] = ['#' for i in range(i1, i2)]
    elif tag == "replace":
        c[i1:i2] = b[j1:j2]
    elif tag == "insert":
        c[i1:i1] = b[j1:j2]
    print c

 delete a[0:1] (['q']) b[0:0] ([])
['#', 'a', 'b', 'x', 'c', 'd']
  equal a[1:3] (['a', 'b']) b[0:2] (['a', 'b'])
['#', 'a', 'b', 'x', 'c', 'd']
replace a[3:4] (['x']) b[2:3] (['y'])
['#', 'a', 'b', 'y', 'c', 'd']
  equal a[4:6] (['c', 'd']) b[3:5] (['c', 'd'])
['#', 'a', 'b', 'y', 'c', 'd']
 insert a[6:6] ([]) b[5:6] (['f'])
['#', 'a', 'b', 'y', 'c', 'd', 'f']
>>> c = [i for i in c if i != '#']
>>> c
['a', 'b', 'y', 'c', 'd', 'f']
>>> 
```

# c# - Java中的无符号运算符

> ID：11247718
> 
> 赞同：3
> 
> 时间：2012-06-28T15:17:26.883
> 
> 标签：c#, java, hash, long-integer, unsigned

众所周知，Java 没有无符号类型。我必须将 C# 中的一个片段（使用 uint）转换为 Java。我的代码在这里：

```
private const int ROLLING_WINDOW = 7;
private const int HASH_PRIME = 0x01000193;
private unit h1, h2, h3, n;
private byte[] window;

//...

private uint roll_hash(byte c)
{
    h2 -= h1;
    h2 += (uint)ROLLING_WINDOW * c;

    h1 += c;
    h1 -= window[n % ROLLING_WINDOW];

    window[n % ROLLING_WINDOW] = c;
    n++;

    h3 = (h3 << 5);
    h3 ^= c;

    return h1 + h2 + h3;
}

private static uint sum_hash(byte c, uint h)
{
        h *= HASH_PRIME;
        h ^= c;
        return h;
} 
```

在 Java 中，我使用`long`而不是，`uint`但结果有时会给出负值。解决方案是使用无符号运算符。一些搜索向我展示了关于 0xFFFFFFFFL 的信息，但在截止日期即将到来时它非常复杂。希望有人帮助我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:21:32.773

代码几乎完全相同。只有 % 操作不同。

```
window[(int)((n & 0xFFFFFFFFL) % ROLLING_WINDOW)] 
```

或者你可以写

```
window[n] 
```

和

```
if(++n == ROLLING_WINDOW) n = 0; 
```

* * *

更详细

```
private int roll_hash(byte c)
{
    h2 -= h1; // same
    h2 += ROLLING_WINDOW * c; // same, remove (uint)

    h1 += c; // same
    h1 -= window[n];

    window[n] = c;
    if(++n == ROLLING_WINDOW) n = 0; // limit n to 0 to 6 so % is not required.

    h3 = (h3 << 5); // same
    h3 ^= c; // same

    return h1 + h2 + h3; // same
}

private static int sum_hash(byte c, int h)
{
        h *= HASH_PRIME; // same
        h ^= c; // same
        return h;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:23:18.503

如果您将一个未指定的整数值转换为长整数，则需要屏蔽符号扩展位：

```
int uintValue = 0x80706050;
long value = 0x00000000FFFFFFFFL & uintValue; 
```

# xml - BizTalk 自定义管道组件：XmlException 越过了本机/托管边界

> ID：11247724
> 
> 赞同：0
> 
> 时间：2012-06-28T15:17:40.720
> 
> 标签：xml, biztalk, pipeline, biztalk-2010

我不完全确定此异常是否与我创建的自定义管道组件有关。我已经在 VS2010 中加载了代码并附加到了 BTSNTSVC.exe 但在我到达第一个断点之前我得到了这个错误：

![在此处输入图像描述](../Images/e773a4d100c72a3c94b88ddfd4bdb06f.png)

无需查看反汇编代码，并且代码（对于我的组件）在具有相同输入文件的控制台应用程序中运行良好。

此管道组件位于接收端口上。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:29:28.420

将一些临时调试代码添加到您的管道组件。写入事件日志以显示一些有用的信息进行调试。

您是否在 BizTalk 中打开了跟踪以查看输入和输出是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:04:40.743

感谢您的回答杰伊，但经常发生我离开问题并意识到问题的简单答案。不幸的是，在我明天重新开始工作之前我无法对其进行测试，但场景是七个 xml 文档中的一个复杂 xml 字符串，但它们的类型不同，我设置了接收形状以获取 7 个消息。我认为我需要做的是将消息类型设置为 XmlDocument，然后在编排中进行转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:23:41.977

好的 - 终于搞定了。输入是 XML 作为表中单个字段的字符串。但是，我已将其保存并格式化（漂亮的打印）为 xml，这就是问题所在。将其恢复为原始状态，即全部在一条线上，并且有效:)

# javascript - 我有一个解析器，我想学习正确的解析

> ID：11247732
> 
> 赞同：2
> 
> 时间：2012-06-28T15:18:00.380
> 
> 标签：javascript, parsing, markup, concept

我想用javascript解析文本。我要解析的语法是一种标记语言。这种语言有两种主要的标记：

```
$f56 
```

表示以下字符将有颜色`#F56`。直到下面`$`带有 3 个十六进制字符，它才使用这种颜色。

```
$i 
```

表示直到以下`$z`（结束标记）文本为斜体。它们是另一种字母标签。

所以基本上这种语言由 3 个字符长的颜色标签和一个字母长的标签组成。

我可以制作一些难看的东西来解析我的文本，存储字符位置和标签的当前状态（格式和颜色），但我想学习正确的解析。你能给我一些提示/原则来为这种语言制作一个干净的解析器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:26:16.937

如果您了解[antlr](http://www.antlr.org)，您可能有兴趣探索[http://www.antlr.org/wiki/display/ANTLR3/ANTLR3JavaScriptTarget](http://www.antlr.org/wiki/display/ANTLR3/ANTLR3JavaScriptTarget)，它会生成 javascript 词法分析器和解析器

如果您将目标语言设置为 JavaScript

语法 Tg

```
grammar T;
options {
    language=JavaScript;
    [other options]
}
...
... 
```

解析器.html

```
<script type="text/javascript" src="lib/antlr3-all-min.js"></script>
<script type="text/javascript" src="TLexer.js"></script>
<script type="text/javascript" src="TParser.js"></script>
<script type="text/javascript" src="TWalker.js"></script>

<script type="text/javascript">
var input = "...what you want to feed into the parser...",
     cstream = new org.antlr.runtime.ANTLRStringStream(input),
     lexer = new TLexer(cstream),
     tstream = new org.antlr.runtime.CommonTokenStream(lexer),
     parser = new TParser(tstream),
     r = parser.entry_rule();

var nodes = new org.antlr.runtime.tree.CommonTreeNodeStream(r.getTree());
nodes.setTokenStream(tstream);
var walker = new TWalker(nodes);
walker.tree_entry_rule();
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:26:24.310

*JavaScript: The Good Parts*有一些很好的简单解析器示例代码：http: [//oreilly.com/javascript/excerpts/javascript-good-parts/json.html](http://oreilly.com/javascript/excerpts/javascript-good-parts/json.html)。该示例一次增加一个字符，跟踪该索引，但您也可以增加光标前匹配正则表达式结果的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:44:19.567

如果您真的想了解解析，请阅读这本书：[编译器：原理、技术和工具，](https://rads.stackoverflow.com/amzn/click/com/0321486811)又名 The Dragon 书。它非常密集，但提供了最完整的解析。

我听说过关于 ANTLR（上面提到过）的好消息，但没有使用它。不过，我使用过[Bison](http://www.gnu.org/software/bison/)，它对我定义语法非常有效。

# virtualhost - NameVirtualHost 在 2 个 IP 和 3 个 DocumentRoot 上的不良行为

> ID：11247735
> 
> 赞同：0
> 
> 时间：2012-06-28T15:18:05.573
> 
> 标签：virtualhost, apache

我有下一个 apache 虚拟主机和 NameVirtualHost 设置：

```
NameVirtualHost 10.100.106.89

<VirtualHost 10.100.106.89>
        DocumentRoot /var/www/html/dev/novared_soporte/branches/v0.3/soporte
        ServerName 10.100.106.89
</VirtualHost>
<VirtualHost 10.100.106.89>
        DocumentRoot /var/www/html/phpmyadmin
        ServerName 10.100.106.89/phpmyadmin
        ServerAlias 10.100.106.89/pma
</VirtualHost>
<VirtualHost 10.100.106.90>
        ServerName 10.100.106.90
        DocumentRoot /var/www/html
</VirtualHost> 
```

当我尝试到达：`10.100.106.89`我可以到达我需要的站点：`/var/www/html/dev/novared_soporte/branches/v0.3/soporte`

但是当我尝试到达时，`10.100.106.89/phpmyadmin`我实际上在 error_log.txt （httpd 日志）上得到了这个错误：

`[Thu Jun 28 12:12:59 2012] [error] [client 10.100.103.31] File does not exist: /var/www/html/dev/novared_soporte/branches/v0.3/soporte/phpmyadmin`

我仍然无法理解错误在哪里。顺便说一句，`10.100.106.90`工作正常，至少对于它的`DocumentRoot /var/www/html`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:19:04.243

`10.100.106.89/phpmyadmin`不是有效的服务器名称。它必须是 IP 地址或主机名/域名。你不把路径放在那里。

请改用`<Location>`第一个虚拟服务器中的块。

# objective-c - 将自定义 BarButtonItem 添加到顶部导航栏

> ID：11247736
> 
> 赞同：1
> 
> 时间：2012-06-28T15:18:06.460
> 
> 标签：objective-c, uiimage, uinavigationbar, uibarbuttonitem

使用故事板中的界面构建器，我在导航工具栏的左上角放置了一个栏按钮项，用于切换表格视图单元格的编辑视图。我目前有类似“编辑单元格”的文本

我的问题是，如何更改它以使用图像？我为编辑单元格状态和编辑单元格关闭状态创建了自己的自定义图像，但是当我在界面构建器中指定图像时，图像在条形按钮项中被拉伸。我是否需要通过代码以编程方式制作此条形按钮项以使其使用图像的框架？如何指定状态？

我觉得应该有一种方法可以在界面构建器中执行此操作，但我尝试以编程方式执行此操作：

```
UIImage *image = [UIImage imageNamed:@"edit-off.png"];
UIButton *showEditButton = [UIButton buttonWithType:UIButtonTypeCustom];
showEditButton.bounds = CGRectMake( 0, 0, image.size.width, image.size.height );
[showEditButton setImage:image forState:UIControlStateNormal];
UIBarButtonItem *showEditButtonItem = [[UIBarButtonItem alloc] initWithCustomView:showEditButton]; 
```

现在如何将 showEditButtonItem 添加到导航栏的左上角？

![在此处输入图像描述](../Images/e1f075f7eccf8ae457b1336f8f32a583.png)

实际图像：

![在此处输入图像描述](../Images/019d2b1afe94430db2d0715f6674bb36.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:51:11.317

以编程方式添加按钮是这样的：

```
UIBarButtonItem *editButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"kyyL4.png"] style:UIBarButtonItemStylePlain target:self action:@selector(editObject:)];
self.navigationItem.rightBarButtonItem = editButton; 
```

将此代码放入**ViewController.m**文件`-viewDidLoad:`的方法中。

 **（不幸的是图像也会以这种方式拉伸。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:43:07.623

iOS 中的图标应该有一定的大小。[您可以在iOS Human Interface Guidelines](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW1)中找到您可能想要的各种图标的所有尺寸。

至于为不同的状态设置不同的图标，我相信你需要在代码中做到这一点。

要为 a 设置图像，`UIBarButtonItem`您只需要设置`image`属性：

```
editButton.image = editActiveImage; 
```

或者

```
editButton.image = editInactiveImage; 
```**

# javascript - 获取插入符号位于可内容编辑的 div 中的单词？

> ID：11247737
> 
> 赞同：6
> 
> 时间：2012-06-28T15:18:10.310
> 
> 标签：javascript, html, string

当单击鼠标时，我正在尝试从该位置的内容可编辑 div 中提取一个单词。例如：

> Lorem ipsum dolor sit amet，con|ectetur adipiscing elit。Cras 前庭妊娠 tincidunt。Proin justo dolor, iaculis vulputate eleifend et, facilisis eu erat.*

使用**|** 为了表示插入符号，该函数应返回“ *consectetur* ”。

我的代码：

```
window.onload = function () {
        document.getElementById("text-editor").onclick = function () {
            var caretPos = 0, containerEl = null, sel, range;
            if (window.getSelection) {
                sel = window.getSelection();
                if (sel.rangeCount) {
                    range = sel.getRangeAt(0);
                    if (range.commonAncestorContainer.parentNode == this) {
                        caretPos = range.endOffset;
                    }
                }
            } else if (document.selection && document.selection.createRange) {
                range = document.selection.createRange();
                if (range.parentElement() == this) {
                    var tempEl = document.createElement("span");
                    this.insertBefore(tempEl, this.firstChild);
                    var tempRange = range.duplicate();
                    tempRange.moveToElementText(tempEl);
                    tempRange.setEndPoint("EndToEnd", range);
                    caretPos = tempRange.text.length;
                }
            }
            var prevSpace, nextSpace, text = this.innerText;

            prevSpace = text.substring(0,caretPos).lastIndexOf(" ");
            nextSpace = text.indexOf(" ", caretPos + 1);
            nextSpace == -1 ? nextSpace = text.length - 1 : false;
            prevSpace++;
            console.log([prevSpace,caretPos,nextSpace].join("|"));
            var word = text.substring(prevSpace, nextSpace);
            //Removes punctuation and whitespace.
            var patt = new RegExp("([A-Za-z0-9']*)","g");
            word = patt.exec(word)[0];
            document.getElementById("current-word").innerHTML = word;
        };
    }; 
```

一个函数绑定到 contenteditable div 的鼠标点击事件，它计算插入符号的位置，然后找到前后空格字符（或字符串的开头或结尾）的索引，并使用子字符串来确定单词。有一个快速的正则表达式匹配来删除标点符号和空格，我们最终得到了正确的单词。

这很好用，当 contenteditable div 中有一个文本节点时，但是一旦我开始放置和其他分类标签，计算插入符号位置的方法部分就停止工作，总是将其计算为 0。有没有一种计算 HTML 中插入符号位置的方法，就像它对文本所做的那样？

如果没有，任何人都可以建议另一种方法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T15:42:58.263

您可以为此使用我的 Rangy 库中的新[TextRange 模块](https://github.com/timdown/rangy)，尽管仅就该功能而言它是巨大的矫枉过正。这是您需要的代码：

```
var sel = rangy.getSelection();
sel.expand("word");
var word = sel.text();
alert(word); 
```

否则，如果您可以忍受不支持 pre-Blink Opera（直到并包括版本 12）和 Firefox < 4，您可以使用[`Selection.modify()`](https://developer.mozilla.org/en/DOM/Selection/modify/)(WebKit, Firefox) 和(IE)的[`expand()`](http://msdn.microsoft.com/en-us/library/ie/ms536421%28v=vs.85%29.aspx)方法。`TextRange`这是一个例子。

演示：http: [//jsfiddle.net/timdown/dBgHn/1/](http://jsfiddle.net/timdown/dBgHn/1/)

代码：

```
function getWord() {
    var sel, word = "";
    if (window.getSelection && (sel = window.getSelection()).modify) {
        var selectedRange = sel.getRangeAt(0);
        sel.collapseToStart();
        sel.modify("move", "backward", "word");
        sel.modify("extend", "forward", "word");

        word = sel.toString();

        // Restore selection
        sel.removeAllRanges();
        sel.addRange(selectedRange);
    } else if ( (sel = document.selection) && sel.type != "Control") {
        var range = sel.createRange();
        range.collapse(true);
        range.expand("word");
        word = range.text;
    }
    alert(word);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T11:59:53.297

BitBucket 已经发布了他们的 Cursores.js 库，它可以做到这一点，它很小而且很专注，这很好 - [http://cursores.bitbucket.org/](http://cursores.bitbucket.org/)

我唯一的问题是，如果插入符号左侧没有文本，它就不会拾取令牌，例如“t|est”会起作用，但“|test”不会。

# javascript - 通过 Yahoo! 获取 JSON 数据 定位器

> ID：11247744
> 
> 赞同：0
> 
> 时间：2012-06-28T15:18:21.380
> 
> 标签：javascript, json, api, yahoo

我正在尝试从 Placefinder API 检索信息。我的代码从文本框中获取信息，然后单击按钮将其发送到雅虎。

```
 function codeAddress(){
            var address = document.getElementById("address").value;
            var RequestUrl = "http://where.yahooapis.com/geocode?q="+address+"&flags=J&callback=ws_results&output=json";
            JSONObject = new XMLHttpRequest();
            JSONObject.open( "GET", RequestUrl, false );
            JSONObject.send( null );
            return JSONObject;
            document.getElementByID("jlatitude").innerHTML=JSONObject.latitude;
            alert(document.write("jlatitude"));
        } 
```

Firebug 告诉我数据已返回，但我无法在故障排除弹出窗口中显示我想要的内容。当我请求马里兰州的地理编码时，placefinder 会返回此信息。

```
{"ResultSet":{"version":"1.0","Error":0,"ErrorMessage":"No error","Locale":"us_US","Quality":10,"Found":2,"Results":[{"quality":49,"latitude":"39.466626","longitude":"-93.709069","offsetlat":"39.466626","offsetlon":"-93.709069","radius":700,"name":"","line1":"","line2":"Roads, MO","line3":"","line4":"United States","house":"","street":"","xstreet":"","unittype":"","unit":"","postal":"","neighborhood":"Roads","city":"Norborne","county":"Carroll County","state":"Missouri","country":"United States","countrycode":"US","statecode":"MO","countycode":"","uzip":"64668","hash":"","woeid":2482523,"woetype":7},{"quality":49,"latitude":"39.080130","longitude":"-82.537394","offsetlat":"39.080130","offsetlon":"-82.537394","radius":700,"name":"","line1":"","line2":"Roads, OH","line3":"","line4":"United States","house":"","street":"","xstreet":"","unittype":"","unit":"","postal":"","neighborhood":"Roads","city":"Wellston","county":"Jackson County","state":"Ohio","country":"United States","countrycode":"US","statecode":"OH","countycode":"","uzip":"45692","hash":"","woeid":2482522,"woetype":7}]}} 
```

我的警报框没有出现，但数据已存储。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:44:43.480

我认为您的 JavaScript 代码示例中有一个简单的问题 - 从 YQL 接收数据后，您有`return JSONObject;`这意味着以下行将永远不会被执行。

要进行故障排除和确认，您可以在返回时写入控制台日志，例如：

```
function codeAddress(){
    var address = document.getElementById("address").value;
    var RequestUrl = "http://where.yahooapis.com/geocode?q="+address+"&flags=J&callback=ws_results&output=json";
    JSONObject = new XMLHttpRequest();
    JSONObject.open( "GET", RequestUrl, false );
    JSONObject.send( null );
    console.log( JSONObject.responseText );
}
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T16:38:25.310

```
$.getJSON(RequestUrl,{},function(result){
  ...
}); 
```

这会正确地从 Yahoo! 检索 JSON 对象！定位器

# delphi - 我如何在 Delphi 的 ComboBox 中使用不同的项目文本文本

> ID：11247745
> 
> 赞同：1
> 
> 时间：2012-06-28T15:18:26.190
> 
> 标签：delphi

我的表单上有一个 TComboBox 组件（comboxCountry）。这是 TComboBox 中的项目。

第 1 项：“新加坡 SG”

第 2 项：“印度 IND”

第 3 项：'Australia AUS' 等等等等等等..

当组合框值更改时，我希望 combboxCounty.Text 仅显示国家代码而不是项目列表中的整个字符串。例如，我只想显示“SG”而不是“Singapore SG”。这是我对 cboxBankCategory OnChange 函数的操作：

```
if comboxCountry.ItemIndex = 0 then
comboxCountry.Text := 'SG'

else if comboxCountry.ItemIndex = 1 then
comboxCountry.Text := 'IND'

else
comboxCountry.Text := 'AUS' 
```

这似乎是正确的，但它对我不起作用，因为comboxCountry.Text 仍然在项目列表中显示整个国家/地区定义，而不仅仅是国家/地区代码，我的代码有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:02:11.463

将组合框样式设置为`csOwnerDrawFixed`，并在`onDrawItem`事件中输入：

```
procedure TForm1.comboxCountryDrawItem(Control: TWinControl;
  Index: Integer; Rect: TRect; State: TOwnerDrawState);
var
  s: String;
begin
  if not (odComboBoxEdit in State )then
    s := comboxCountry.Items[Index]
  else begin

if comboxCountry.ItemIndex = 0 then
s := 'SG'

else if comboxCountry.ItemIndex = 1 then
s := 'IND'

else
s := 'AUS'
  end;
  comboxCountry.Canvas.FillRect(Rect);
  comboxCountry.Canvas.TextOut(Rect.Left + 2, Rect.Top, s);

end; 
```

并清除 OnChange 事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T16:02:22.500

使用 OwnerDrawFixed 样式的组合框，您可以使用 OnDrawItem 事件。简短的例子。请注意，ComboBox.Text 属性未更改 - 此方法仅更改其外观。

```
Singapore SG
India IND
Australia AUS

procedure TForm1.ComboBox1DrawItem(Control: TWinControl; Index: Integer;
  Rect: TRect; State: TOwnerDrawState);
var
  s: string;
begin
  s := ComboBox1.Items[Index];
  if odComboBoxEdit in State then
    Delete(s, 1, Pos(' ', s));  //make your own job with string
  with (Control as TComboBox).Canvas do begin
    FillRect(Rect);
    TextOut(Rect.Left + 2, Rect.Top + 2, s);
   end;
end; 
```

![在此处输入图像描述](../Images/0ebb19eeea0f44ff27c7b486451dfc17.png)

# wordpress - 将 wordpress 页面特色图片提取到 header.php

> ID：11247746
> 
> 赞同：0
> 
> 时间：2012-06-28T15:18:27.040
> 
> 标签：wordpress

我正在开发一个 wordpress 驱动的网站，其模板在首页上有一个 jcycle 滑块。我希望在除主页之外的所有页面中使用静态横幅。我在 header.php 文件中找到了一个函数，如下所示：

```
<?php   else : // NOT front page ?>`
    <div id="page-content-title">
        <div id="page-content-header" class="container_24">
            <div id="page-title"> 
```

如何在此处显示来自 PAGE FEATURED IMAGE 的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:58:42.683

首先，您可能需要该图像的特定尺寸。在您的 functions.php 文件中使用[add_image_size](http://codex.wordpress.org/Function_Reference/add_image_size)来做到这一点。然后使用[wp_image_attachment_src](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src)。

要在页面上获取该图像，请执行以下操作：

```
<?php
    $thumbnail = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'slider-size' );
    echo ('<img src="' . $thumbnail[0] . '">');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T05:42:57.270

如果帖子有以下脚本将帮助您获得特色图片...

```
query_posts(); 
while (have_posts()) : the_post(); 
$featuredImage = wp_get_attachment_url( get_post_thumbnail_id($post->ID) );
echo $featuredImage; 
endwhile; 
wp_reset_query(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T16:51:22.567

我觉得通过将参数传递给`post_thumbnail`回调有一种更简洁的方法。这就是我想出的。希望这可以帮助。这只会打印特色图像（如果存在）并将标题图像包装在 div 中，以便您可以控制 DOM 中的位置。

```
<?php // Loop used to show post-thumbnail as #header-image if it exists 
while ( have_posts() ) : the_post(); ?>

            <?php if ( has_post_thumbnail() ) { ?>
            <div id="header-image">
            <?php the_post_thumbnail('full');?>
            </div>

            <?php } else { ?>

            <?php }?> 
```

# objective-c - 我想使用 -> 运算符设置 ivar

> ID：11247747
> 
> 赞同：0
> 
> 时间：2012-06-28T15:18:28.733
> 
> 标签：objective-c, ios, ivar

我想使用 -> 运算符设置 ivar。我收到一个错误：无法静态分配接口类型。我不想要点运算符。

```
 @interface Dream : NSObject

 @property (nonatomic, assign) BOOL isBeer;

 @end 
```

类视图控制器

```
 - (void)viewDidLoad
{
 [super viewDidLoad];

  Dream dr1;
  (&dr1)->isBear = YES;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:34:26.393

您在声明中缺少“ * ”：

```
Dream *dr1; 
```

这就是编译器错误的原因。

在 Objective-C 中，对象仅由指针引用，就像使用 new() 创建的 C++ 实例一样。

**另请注意，对于 Objective-C 对象，'->'（箭头）和 '.'（点）之间的**区别与C++ 对象/C 结构不同。在 C/C++ 中，您使用点来访问堆栈变量的成员，例如：

```
// Stack
MyClass myObject;
myObject.memeber = 1; 

MyStruct info;
info.member = 1;

// Heap
MyClass* pMyObject = new MyClass();
myObject->memeber = 1; 

MyStruct* pInfo = (MyStruct*) malloc(sizeof(MyStruct));
pInfo->member = 1; 
```

而在 Objective-C 中，所有对象都是堆的（仅由指针引用），因此您只能使用箭头访问成员。

另一方面，点具有为属性调用 getter/setter的**不同含义，这****可能由 ivar 支持或不支持。**（取决于内部）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:24:39.730

您需要将实例变量公开：

```
@interface Dream : NSObject
{
@public
    BOOL isBeer;
}
@end 
```

类视图控制器

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    Dream *dr1 = [[Dream alloc] init];
    dr1->isBeer = YES;
} 
```

# javascript - 我怎样才能使我的验证更加地道？

> ID：11247748
> 
> 赞同：1
> 
> 时间：2012-06-28T15:18:32.847
> 
> 标签：javascript, jquery, validation

在使用了一些验证库之后，我最终决定推出自己的实现，因为没有一个库按照我想要的方式运行。下面的代码工作正常，但我认为它不是很地道。函数体很大，应该重构为更小的块。

我确信有很多方法可以改进我的代码，但我想就如何将大函数分解为更小的函数寻求具体建议，以便代码更容易理解。显然我想添加更多的验证功能，我不想创建一堆意大利面条。

验证应该发生在`blur`一个元素上。通过插入和删除`div`s，用户会收到问题通知。

验证功能：

```
(function($) {
  $.fn.extend({
    live_validate: function() {
      return this.each(function() {

        var inputs = $('input', $(this));

        inputs.blur(function() {
          var el = $(this);
          el.siblings('div.feedback').remove();

          if(el.hasAttr('required') && el.val() == '') {
            el.after('<div class="feedback feedback-error">must be present</div>');
            return;
          }    

          if(el.hasAttr('minlength') && el.val().length < el.attr('minlength')) {
            el.after('<div class="feedback feedback-error">is too small</div>');
            return;
          }

          // no validation returned; all good.
          el.filter(":visible").after('<div class="feedback feedback-ok"></div>');

        });

      });
    }
  });
})(jQuery); 
```

这是我用来检查属性是否存在的快速助手。我需要知道该属性是否存在。有一个更好的方法吗？

```
$.fn.hasAttr = function(name) {
   return (this.attr(name) !== undefined && this.attr(name) !== false);
}; 
```

最后，在我想要的表单上调用验证器。

```
$(document).ready(function() {

    $("form.new_user").live_validate();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:40:36.880

我会在它自己的函数中分离每个验证器，在另一个函数中分离每个逻辑。

```
(function($) {
  var validators = {
    required: function(el) {
        // Validation code...
    },
    minlength: function(el) {
        // Validation code...
    } // you can add more validators here..
  };
  $.fn.extend({
    live_validate: function(enabledValidators) {
      return this.each(function() {

        var inputs = $('input', $(this));

        inputs.blur(function() {
          var el = $(this);
          el.siblings('div.feedback').remove();
          var hasErrors = false;

          $(enabledValidators).each(function() {
             var result = validators[this](el);
             if(result !== true) {
               el.after('<div class="feedback feedback-error">' + result + '</div>');
               hasErrors = true;
             }
          });

          if(!hasErrors) {
            el.filter(":visible").after('<div class="feedback feedback-ok"></div>');
          }
        });
      });
    }
  });
})(jQuery); 
```

我在这里所做的是将每个验证封装在它自己的函数中。它总是接收 de 元素，如果有效则返回 true，如果无效则返回带有错误的字符串。我还添加了一个 enabledValidators 以便能够传递您想要运行的验证器（如果需要，您可以删除它并始终执行所有验证器，或者如果没有通过任何验证器，则仅使用所有验证器）。所以你会这样称呼它：

```
$(document).ready(function() {
    $("form.new_user").live_validate(["required", "minlength"]);
} 
```

# r - confint() 的索引元素

> ID：11247751
> 
> 赞同：1
> 
> 时间：2012-06-28T15:18:42.910
> 
> 标签：r

我已经估计了数据集中每个组的截距的置信区间，如下所示：

```
d <- data.frame(
    g=sample(letters[1:5], 100, replace=TRUE),
    y=runif(100)
)

library(lme4)

fm <- lmList(y ~ 1 | g, data=d)
ci.fm <- confint(fm)
ci.fm
# An object of class "lmList.confint"
# , , (Intercept)
# 
#       2.5 %    97.5 %
# a 0.4253236 0.6668585
# b 0.4860047 0.6794625
# c 0.4071186 0.6822713
# d 0.2785848 0.5992378
# e 0.4110070 0.6890399 
```

必须有一种方法可以分别索引每个列，但我无法弄清楚。我已经尝试过查看`str(ci.fm)`并`attributes(ci.fm)`尝试过`attr(ci.fm, dimnames[[2]]$"2.5 %")`其他类似的事情，但所有这些都没有奏效。我会很感激一个正确方向的指针。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:27:12.300

It is an S4 object: you can have the list of "slots" with `slotNames`, and access them with `@` (instead of `$`). In this case, the only slot is `.Data`, with a leading dot, so `ci.fm@.Data` contains the actual data.

```
str(ci.fm)
# Formal class 'lmList.confint' [package "lme4"] with 1 slots
#   ..@ .Data: num [1:5, 1:2, 1] 0.35 0.348 0.315 0.143 0.388 ...
#   .. ..- attr(*, "dimnames")=List of 3
#   .. .. ..$ : chr [1:5] "a" "b" "c" "d" ...
#   .. .. ..$ : chr [1:2] "2.5 %" "97.5 %"
#   .. .. ..$ : chr "(Intercept)"

slotNames(ci.fm)
# [1] ".Data"

str( ci.fm@.Data )  # 3-dimensional array
#  num [1:5, 1:2, 1] 0.35 0.348 0.315 0.143 0.388 ...
#  - attr(*, "dimnames")=List of 3
#   ..$ : chr [1:5] "a" "b" "c" "d" ...
#   ..$ : chr [1:2] "2.5 %" "97.5 %"
#   ..$ : chr "(Intercept)"

ci.fm@.Data[,1,1]  # First column
#         a         b         c         d         e 
# 0.3496147 0.3482908 0.3147435 0.1434213 0.3876549 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:28:19.383

```
ci.fm[,"2.5 %",]
        a         b         c         d         e 
0.4463712 0.3297468 0.3622782 0.2901415 0.2847008 
```

# jsp - 使用 jar 文件中的类时出现 NoClassDefFoundError

> ID：11247754
> 
> 赞同：0
> 
> 时间：2012-06-28T15:18:58.797
> 
> 标签：jsp, jakarta-ee, servlets, maven

我正在尝试运行一个搜索 Web 应用程序，并且需要使用另一个 Java 项目来执行所有后端操作。我将项目导出到一个 jar 文件中，并将其添加到我的动态 webapp 项目中。我尝试的第一件事是“属性”>“Java 构建路径”中的“添加外部 jars”。这不起作用，所以我也尝试在 WEB-INF/lib 中添加 jar，但它也不起作用。如何正确添加 jar 文件以便我可以在我的 web 应用程序中使用该项目？

更具体地说，这是我得到的错误：

```
message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: Servlet execution threw an exception 
```

根本原因

```
java.lang.NoClassDefFoundError: org/apache/accumulo/core/client/Instance
com.afspq.model.Results.getResults(Results.java:46)
com.afspq.web.ProcessQuery.doGet(ProcessQuery.java:31)
javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
root cause

java.lang.ClassNotFoundException: org.apache.accumulo.core.client.Instance
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
com.afspq.model.Results.getResults(Results.java:46)
com.afspq.web.ProcessQuery.doGet(ProcessQuery.java:31)
javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

note Apache Tomcat/6.0.35 日志中提供了根本原因的完整堆栈跟踪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:53:35.320

我会将以下内容添加到您的 Maven pom.xml 文件中：

```
<dependency>
    <groupId>org.apache.accumulo</groupId>
    <artifactId>accumulo-core</artifactId>
    <version>1.4.0</version>
</dependency> 
```

而不是在 Eclipse 中添加它。pom.xml 是事实而不是 Eclipse。

要检查一切是否正确，请使用命令行：

```
mvn clean package 
```

将创建的战争部署到 tomcat 以确保一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T00:10:00.563

这是一个痛苦的过程，但我不得不手动添加来自 Accumulo、Hadoop 和 Zookeeper 的所有 jar 文件。我不得不将 jar 文件添加到两个位置。一个是构建路径（右键单击 Web 项目 > 属性 > Java 构建路径 > 添加外部 jars），另一个是我的 Web 项目中的 WebContent/WEB-INF/lib 文件夹。这为我修好了。出于某种原因，Maven 没有添加依赖项，尽管它们都在我的 pom.xml 中指定。

# javascript - 在选项卡中打开窗口（嵌套）

> ID：11247755
> 
> 赞同：0
> 
> 时间：2012-06-28T15:19:02.723
> 
> 标签：javascript, ios, titanium, appcelerator, titanium-mobile

我正在嵌套一系列页面，这些页面与您当前标签页的某个窗口断开。当您单击一个按钮时，它应该会跳转到下一页，但只有当我使用`win.containingTab.open()`调用下一页时才会这样做。之后，我可以使用`win.open()`导航到我的下一个窗口，但我失去了我的工具栏功能以及我的窗口栏功能。我目前正在为 iOS 做这件事。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:11:53.243

最好的方法（也是唯一的方法）是将每个页面包含在一个选项卡组中，然后使用`win.open()`.

# sql - SQL 在第一个可用的行 id 中插入数据

> ID：11247760
> 
> 赞同：0
> 
> 时间：2012-06-28T15:19:25.947
> 
> 标签：sql, insert

我有一个 SQL 表，其主键 ( `Row_id`) 的格式如下：

```
110001  
110002  
110003  
... 
```

随着时间的推移，可以通过删除一些行来更新该表。我有一个 php 脚本，希望它在第一个可用位置插入新行，而不仅仅是增加最后一个现有的 id。

例如，如果我有这个：

```
110001  
110002  
110004  
110005 
```

我想插入新行并给出`id = 110003`not `110006`。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:24:59.260

不知道为什么要重用 id，但是，我们开始吧

假设您的表名是`Tbl`：

```
Select MIN(a.Id + 1)
From   Tbl A 
       Left Join Tbl B
         On A.Id = B.Id - 1
Where  B.Id Is NULL 
```

这应该适用于检索您想要的 id。
之后，显然，您必须根据先前的值进行插入。
所以

```
INSERT into yourTable(id,....) VALUES(
    Select MIN(a.Id + 1)
    From   Tbl A 
           Left Join Tbl B
             On A.Id = B.Id - 1
    Where  B.Id Is NULL,
    .....) 
```

![在此处输入图像描述](../Images/8d0c274d3182e546b4f4197b7c0b18f0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:28:11.063

您可以使您的 id 成为唯一的，然后从 110001 开始运行 for/while 循环。

```
`$query = "...";
try {
    mysql_query($query);
} catch(Exception $ex) {
    if (mysql_errno() == 1062) {
        throw new Exception('The email you used exists already');
    } else {
        throw $ex;
    }
} 
```

` 只要一个唯一键被破坏，就会引发 1062 错误。由于唯一的电子邮件字段，我们需要捕获它，但也可能因为您破坏了主键或另一个我们忽略存在的唯一字段而引发它。您将不得不修改此代码，以防您认为在此查询期间某些其他唯一约束也可能会中断。

如果查询成功；您可以插入该特定 ID。

# php - 在 ExpressionEngine 模块开发中，哪里是添加 PHP 类进行实例化的好地方？

> ID：11247765
> 
> 赞同：2
> 
> 时间：2012-06-28T15:19:36.353
> 
> 标签：php, class, module, expressionengine

我有一个用 PHP 编写的有用对象，我们称之为 my_class.php

```
<?php
class my_class{
  var property;
  function __construct($conn){
     $query = "SELECT * FROM bla bla bla";
     $rs2 = mysql_query($query , $conn);
     //... do stuff with results etc.
  }
  function do_something(){
     //more code here
  }
}
?> 
```

我想对这个类做的是能够在 EE 站点的管理部分中使用它，方式如下：

```
$this_obj = new my_class($conn); 
```

由此引起的担忧如下：
1) $conn 当您在 EE 之外时将成为与 MySql 的连接，最好将其放置在可以使用 EE 数据库调用的地方。

2）你会把一个类放在哪里，以便EE可以多次实例化它？

为了使这个对象有用，它需要被实例化几十次，而且我想要使用这些对象的数组而不是一个实例。

提前感谢您的任何见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:37:26.227

您可能需要查看[CodeIgniter 文档](http://codeigniter.com/user_guide)。ExpressionEngine 基于 CI，因此如果您正在寻找最佳实践，请查看 CI 文档。

你可以将你的类文件存储在任何你想要的地方——但是大多数人将它们存储在他们正在开发的插件文件夹中的 library/ 或 lib/ 中。这样你就可以调用 $this->EE->load->library('whatever');

查看用于进行数据库调用的模型 - 还可以查看[CI DB / ActiveRecord](http://codeigniter.com/user_guide/database/index.html)类和[DB forge](http://codeigniter.com/user_guide/database/forge.html)类。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T20:12:42.497

以下是如何在 EE 模块的控制面板中实例化可以处理自己的 MySQL 的对象。

控制面板位于模块的 .mcp 文件中，正如 Philip 所说，将其用作库是可行的方法。

类文件位于 expressionengine/third_party/your_module/libraries/my_class.php

```
<?php
class my_class{
  var property;
  function __construct(){
     $this->EE = & get_instance();
  }
  function init($some_id){
     $query = "SELECT * FROM table WHERE whatever='$some_id' ";
     $results = $this->EE->db->query($query);
     if ($results->num_rows() > 0) {
         foreach ($results->result_array() as $row) {
           //do your thing here
         }
     }
  }
  function do_something(){
     //more code here
     return $results;
  }
} 
```

现在此代码位于正确的位置，即库文件夹，您可以从您的 mcp 文件访问它，从任何方法将提供您的视图。

```
//somewhere in the method you're using in your module
$this->EE->load->library('my_class.php', '', 'reference_name');
//passing something here to the constructor will throw warnings.
$obj = new $this->EE->reference_name();
$obj->init($some_id);
$tmp = $obj->do_something(); 
```

上面的 $obj 是 my_class 类的一个实例，而 $tmp 将是 do_something 方法产生的任何东西。无需向对象传递 MySQL 连接，如果您在上面的构造函数中有第一行，ExpressionEngine 会为您执行此操作。

# scala - 是否可以集成蛋糕模式和宏？

> ID：11247766
> 
> 赞同：5
> 
> 时间：2012-06-28T15:19:36.387
> 
> 标签：scala, macros, self-type, scala-2.10, cake-pattern

我必须在使用蛋糕模式的项目中集成一些宏。这种模式使我们能够避免大量进口以及其他优势，因此我们希望保留它。现在，我们在主干外测试的一些实验性宏遇到了问题。首先，让我们展示一个名为 Cake 的虚拟系统：

```
trait APiece {
  class A
}

trait BPiece { this: APiece => 
  def aMacro(a: A): Unit = () /* macro ??? */
}

trait CPiece { this: APiece with BPiece =>
  def aMacroInvoker = aMacro(new A)
}

class Cake { this: APiece with BPiece with CPiece => } 
```

**APiece**定义了一个类，**BPiece**应该是一个使用 APiece 定义的类的宏，最后，**CPiece**调用该宏。我说 BPiece 应该是一个宏，因为我无法为它编写实现代码。我尝试了几种方法，但总是因以下错误而崩溃：

```
"macro implementation must be in statically accessible object" 
```

阅读[宏代码](https://github.com/scala/scala/blob/master/src/compiler/scala/tools/nsc/typechecker/Macros.scala)可以猜测将宏包含在静态模块中是必要的。有没有办法部署使用系统结构的宏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T17:47:54.433

幸运的是，您的问题有一个简单的解决方案。

但首先，让我回顾一下。在第一个原型中，宏是这样定义的：`def macro aMacro(a: A): Unit = ...`. 我们在准备 SIP 时取得的主要突破之一是分离宏定义（宏的公共面）和宏实现（承载宏逻辑的树转换器）。我花了一段时间才意识到这有多酷，但现在我每次写宏声明时都洋溢着喜悦。

所以，回到你的问题。当然，宏实现必须是静态可访问的（否则，编译器将无法在编译期间加载和调用它们）。但是宏定义没有这个限制，所以你可以这样写定义：

```
trait BPiece { this: APiece => 
  def aMacro(a: A): Unit = macro Macros.aMacro
} 
```

从定义中引用的宏实现可以放入您希望的任何对象中，甚至可以放入不同的编译单元中。

唯一缺少的难题是我们将如何`A`从实现中引用，因为`A`它是在蛋糕中定义的。最简单的方法是进行`aMacro`泛型并依赖类型推断：

（更新：为了让这个例子在 2.10.0-M7 中工作，你需要将 c.TypeTag 替换为 c.AbsTypeTag；为了让这个例子在 2.10.0-RC1 中工作，c.AbsTypeTag 需要替换为 c.WeakTypeTag )

```
trait BPiece { this: APiece =>
  def aMacro[A](a: A): Unit = macro Macros.aMacro[A]
}

object Macros {
  def aMacro[A: c.TypeTag](c: Context)(a: c.Expr[A]): c.Expr[Unit] = c.literalUnit
} 
```

但是，这不会让您使用`reify`，因为宏实现`A`只是一个没有任何成员的类型参数。如果您想从宏中返回特定于蛋糕的东西，也会有问题，但是当它们出现时让我们处理它们。如果需要，请提交后续问题。

# visual-studio-2010 - 有没有办法抑制为 InstallShield 2012 项目添加重复的合并模块？

> ID：11247767
> 
> 赞同：3
> 
> 时间：2012-06-28T15:19:36.610
> 
> 标签：visual-studio-2010, installshield, tfsbuild, installshield-2012

我有一个包含超过 100 个项目的 Visual Studio 解决方案，其中大多数是不同的设备“接口”/适配器 dll，但也有一些常见的 dll 和应用程序。都是 c# 项目。

所有设备适配器 dll 都依赖于一个显然需要 MDAC 2.7 的通用 dll。

我有一个 installshield 2012 标准 MSI 项目，负责打包应用程序和设备适配器 dll。

当我构建安装包时，对于每个引用这个通用 dll 的项目，我都会收到这样的消息。

> 添加合并模块“Microsoft Data Access Components 2.7 (English)”，它是组件“projectname.Primary_output”的依赖项

由于几乎所有东西都使用这个通用 dll，这似乎有点多余（它执行此操作超过一百次）它还为每次出现增加了 15-30 秒的构建时间。

有什么方法可以阻止 InstallShield 尝试将这个合并模块添加到每个项目输出中？或者是否有任何其他解决方案可能仍然有效，并且可以减少构建时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:47:03.243

*从Organization->Component*中选择您不想包含依赖项的组件。转到右侧属性部分。
在*.Net Settings*下有第三个属性：*.Net scan at build*。从下拉列表中选择值*None*或*Properties only 。*

这应该会有所帮助。

# jquery - 从url中提取jquery

> ID：11247769
> 
> 赞同：0
> 
> 时间：2012-06-28T15:19:40.260
> 
> 标签：jquery

我有一个像这样的字符串“/blog/post1/”

如何从 Jquery 中的这个字符串中获取“post1”？

我试过这个，但它返回空。

```
var post_slug = $(this)[0].pathname.substring($(this)[0].pathname.lastIndexOf("/")).replace(/^\//, ""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:25:30.997

使用正则表达式，例如：

```
new RegExp("/blog/(\S+)/").exec("/blog/post1/");
["/blog/post1/", "post1"] 
```

**编辑**

这是*RegExp*，不是*Regex*，我的错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:25:56.773

使用 JavaScript`split`函数。更简单的解决方案。

```
var url = "/blog/post1/";
var splitUrl = url.split("/");

// assuming known URL structure so always same index
var post_slug = splitUrl[splitUrl.length -2]; 
```

工作小提琴：http: [//jsfiddle.net/Rsrmk/](http://jsfiddle.net/Rsrmk/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T15:26:06.617

如果格式**始终**相同，您可以使用：

```
var str = "/blog/post1/";
var piece = str.split('/')[2];​ // returns 'post1' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T15:33:28.143

你可以这样做。

**[现场演示](http://jsfiddle.net/rajaadil/449Tn/)**

```
var str = "/blog/post1/";
arr = str.split('/');
var res = arr[arr.length-2];
alert(​res)​; 
```

# playframework - 更新播放 2.0.2 - 地址已用于 akka 远程演员

> ID：11247774
> 
> 赞同：11
> 
> 时间：2012-06-28T15:20:05.060
> 
> 标签：playframework, playframework-2.0, akka

我正在将我的应用程序更新为 play-2.0.2。

部署 Akka 远程参与者时遇到问题：

```
[error] p.c.ActionInvoker - Failed to bind to: /127.0.0.1:2552
org.jboss.netty.channel.ChannelException: Failed to bind to: /127.0.0.1:2552
    at org.jboss.netty.bootstrap.ServerBootstrap.bind(ServerBootstrap.java:298) ~[netty.jar:na]
    at akka.remote.netty.NettyRemoteServer.start(Server.scala:53) ~[akka-remote-2.0.2.jar:2.0.2]
    at akka.remote.netty.NettyRemoteTransport.start(NettyRemoteSupport.scala:73) ~[akka-remote-2.0.2.jar:2.0.2]
    at akka.remote.RemoteActorRefProvider.init(RemoteActorRefProvider.scala:95) ~[akka-remote-2.0.2.jar:2.0.2]
    at akka.actor.ActorSystemImpl._start(ActorSystem.scala:568) ~[akka-actor.jar:2.0.2]
    at akka.actor.ActorSystemImpl.start(ActorSystem.scala:575) ~[akka-actor.jar:2.0.2]
Caused by: java.net.BindException: Address already in use
    at sun.nio.ch.Net.bind(Native Method) ~[na:1.6.0_33]
    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:126) ~[na:1.6.0_33]
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59) ~[na:1.6.0_33]
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.bind(NioServerSocketPipelineSink.java:140) ~[netty.jar:na]
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleServerSocket(NioServerSocketPipelineSink.java:92) ~[netty.jar:na]
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66) ~[netty.jar:na]
[error] a.r.RouterConfig$$anon$1 - Failed to bind to: /127.0.0.1:2552
org.jboss.netty.channel.ChannelException: Failed to bind to: /127.0.0.1:2552
    at org.jboss.netty.bootstrap.ServerBootstrap.bind(ServerBootstrap.java:298) ~[netty.jar:na]
    at akka.remote.netty.NettyRemoteServer.start(Server.scala:53) ~[akka-remote-2.0.2.jar:2.0.2]
    at akka.remote.netty.NettyRemoteTransport.start(NettyRemoteSupport.scala:73) ~[akka-remote-2.0.2.jar:2.0.2]
    at akka.remote.RemoteActorRefProvider.init(RemoteActorRefProvider.scala:95) ~[akka-remote-2.0.2.jar:2.0.2]
    at akka.actor.ActorSystemImpl._start(ActorSystem.scala:568) ~[akka-actor.jar:2.0.2]
    at akka.actor.ActorSystemImpl.start(ActorSystem.scala:575) ~[akka-actor.jar:2.0.2]
Caused by: java.net.BindException: Address already in use
    at sun.nio.ch.Net.bind(Native Method) ~[na:1.6.0_33]
    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:126) ~[na:1.6.0_33]
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59) ~[na:1.6.0_33]
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.bind(NioServerSocketPipelineSink.java:140) ~[netty.jar:na]
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleServerSocket(NioServerSocketPipelineSink.java:92) ~[netty.jar:na]
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66) ~[netty.jar:na]
[error] play - Cannot invoke the action, eventually got an error: Thrown(akka.pattern.AskTimeoutException: Timed out) 
```

在应用程序启动时调用以下代码时：

```
ActorSystem system = Akka.system();

Address addr = new Address("akka", "application");
defaultInstance = system.actorOf(new Props(TheActor.class).withDeploy(new Deploy(new RemoteScope(addr))), "theActor"); 
```

在 application.conf 中进行此配置时：

```
akka {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "127.0.0.1"
      port = 2552
    }
 }
} 
```

相同的设置在 play-2.0.1 上运行良好。

在 play-2.0.2 上是否有一些配置更改？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T14:22:11.503

也许试试这个：从[akka 文档](http://doc.akka.io/docs/akka/2.0.2/java/remoting.html)中，您可以将端口设置为 0 以使用自动选择的端口：

```
akka {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "127.0.0.1"
      port = 0
    }
 }
} 
```

# date - SSIS 包上次运行日期

> ID：11247775
> 
> 赞同：2
> 
> 时间：2012-06-28T15:20:12.013
> 
> 标签：date

我有一个单步作业，它执行一个查询，提取数据以放入 xls 文件。

我想获得最后一次成功执行作业的日期，这样我就可以更新一个增量而不是整个数据集。

现在我有每天运行一次的作业设置，但我想每 5 分钟安排一次（从 SQL 服务器代理）。

在作业查询中，我选择了一个名为“更新日期”的字段（来自源数据库），并且该日期必须与 SSIS 中作业的“上次运行日期”进行比较。这样，如果表行更新日期大于（连续）上次运行日期，我选择要导出的行。

如何选择上次运行日期（两种情况：成功和失败）？我必须在 Execute Sql 任务中查询 msdb.dbo.sysjobhistory 表吗？上次运行日期必须存储在单行变量中，然后在提取增量的查询中进行比较？任何想法或教程？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T14:23:05.940

正在寻找类似的东西，并决定提醒我帮助我的链接： [http ://www.sqlteam.com/forums/topic.asp?TOPIC_ID=112427](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=112427) [http://www.sqlservercentral.com/Forums/主题542581-145-1.aspx](http://www.sqlservercentral.com/Forums/Topic542581-145-1.aspx)

# ios - 在 UIWebView 中嵌入图像和 UILable

> ID：11247777
> 
> 赞同：0
> 
> 时间：2012-06-28T15:20:20.757
> 
> 标签：ios, iphone, objective-c, ios5, uiwebview

我收到来自 json 文件的图像、标题和描述，我需要在视图上显示它。我正在使用 webview，因为 description 属性有链接并且是 html 格式，所以 webview 是最简单的。但是现在我需要在描述上方添加图像和标题。我知道如何单独添加图像，但我不知道如何在 webview 中添加所有这三个组件。有什么帮助吗？谢谢

```
NSString * myHTMLImage = @"<img src='Hop.png'>";
NSString *imagePath = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:imagePath];
[self.webView loadHTMLString:myHTMLImage baseURL:baseURL]; 
```

上面的代码将图像嵌入到整个 webview 中。

```
[self.webView loadHTMLString:bodyOfText baseURL:nil]; 
```

我还需要能够执行 bodyOfText 的上述加载。还有一个标题。这是一个字符串。我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:41:40.857

您可以通过编程方式将这些添加为 UILabel 子视图，或者通过故事板通过拖出标签并将它们作为 IBOutlets 连接起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:49:18.527

您只需构建您的 HTML 字符串。您可以执行以下操作：

```
NSString *title      = @"this is my title";
NSString *body       = [NSString stringWithFormat:@"Blah, blah, blah<p>%@<p>", self.bodyOfText.text];
NSString *bundlePath = [[NSBundle mainBundle] bundlePath];
NSString *imgPath    = [bundlePath stringByAppendingPathComponent:@"Hop.png"];
NSURL    *imgUrl     = [NSURL fileURLWithPath:imgPath];

NSString *html = [NSString stringWithFormat:
                  @"<html>"
                  "<header>"
                  "<title>%@</title>"
                  "</header>"
                  "<body>"
                  "%@"
                  "<img src=\"%@\">"
                  "</body>"
                  "</html>",
                  title, body, [imgUrl absoluteString]];

[self.webView loadHTMLString:html baseURL:nil]; 
```

我通常在标签中构建对图像的引用，这样我就可以轻松地在同一个 HTML 字符串中`src`引用我的包中的图像以及我的文件夹中的图像。`Documents`

# perl - 如何找到每 5 分钟间隔的最大值？

> ID：11247788
> 
> 赞同：1
> 
> 时间：2012-06-28T15:21:01.123
> 
> 标签：perl

下面的程序打印以下数据：

```
 Wed,Jun,13,10:37:34,2012,759,41,0,30,10,0,0,1
 Wed,Jun,13,10:38:34,2012,767,33,0,25,6,0,0,2
 Wed,Jun,13,10:39:34,2012,758,42,0,32,10,0,0,0
 Wed,Jun,13,10:40:35,2012,758,42,0,29,11,0,0,2
 Wed,Jun,13,10:41:35,2012,761,39,0,34,5,0,0,0
 Wed,Jun,13,10:42:35,2012,769,31,0,22,6,0,0,3
 Wed,Jun,13,10:43:35,2012,754,46,0,29,17,0,0,0 
```

我需要每隔 5 分钟输出一次最大值（例如 769）。理想情况下，这将是 10:00:00 - 10:05:00 等。时间是军用时间（24 小时）。这样做的最佳方法是什么？请注意，我是 Perl 的初学者。下面是我的代码：

```
#!/usr/bin/perl

# This program displays the max thread count at 5 minute intervals and writes the lines to a CSV file.

use strict;
use warnings;
use diagnostics;

# Initialize functions
my @data;
my $line;
my @L1;
#my $outFivemin = "log_5min.csv";
#open (FiveMin, ">> $outFivemin");

# Open the error_log 
open(FH, "error_log");
@data = <FH>;

# Filter the results to MPMStats only
sub findLines {
    my @return = ();
    foreach $line (@data) {
        if ( ($line =~ /notice/) && ($line =~ /rdy/) ) {  
                $line =~ s/ /,/g;   
                my @L1 = split(/|notice|\[|,mpmstats:,|\t|rdy,|bsy,|rd,|wr,|ka,|log,|dns,|cls,/, $line);
                $line =~ s/|notice|\[|,mpmstats:,|\t|rdy,|bsy,|rd,|wr,|ka,|log,|dns,|cls,//g;                   
                push @return, join("", @L1);
        }
    }
    return @return;
}

# Initializers for my data
my($dayOfWeek1,$month1,$dayOfMonth1,$time,$year1,$rdy,$bsy,$rd,$wr,$ka,$log,$dns);
my($cls);

# Create a 2D array
my @L2 = &findLines;
foreach my $line (@L2){
    ($dayOfWeek1, $month1, $dayOfMonth1, $time, $year1, $rdy, $bsy, $rd, $wr, $ka, $log, $dns, $cls) = split(/,/, $line);
    print "$dayOfWeek1,$month1,$dayOfMonth1,$time,$year1,$rdy,$bsy,$rd,$wr,$ka,$log,$dns,$cls";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:36:16.903

我建议您操纵每条记录中的日期/时间以提供五分钟的密钥，并为每个密钥保持最大值。

例如，如果记录开始，`Wed,Jun,13,10:37:34,2012`则适当的键是`Jun 13 10:35 2012`。

通常这将是一个哈希，但由于很可能需要按时间顺序输出，并且需要额外的工作和模块来提供可排序的日期/时间字符串，所以下面的程序使用了一个对数组。

该程序通过在时间（第四个）字段上使用正则表达式`s///`替代来工作，该字段将分钟和秒替换为时间之前的第一个两位数分钟：秒被忽略并且分钟向下舍入到五的倍数。

如果数组为空或者我们在不同`[$range, $value]`的. 否则，如果我们找到了新的最大值，则更新最新对的元素。`@maxima``$range``$value`

请注意，该程序需要命令行上的日志文件名，并且默认为`error_log`无。

```
use strict;
use warnings;

@ARGV = ('error_log') unless @ARGV;

my @maxima;

while (<>) {

  my @fields = /([^,\s]+)/g;
  next unless @fields;
  $fields[3] =~ s|(\d+):\d\d$|5*int($1/5)|e;

  my $range = join ' ', @fields[1..4];
  my $value = $fields[5];

  if (@maxima == 0 or $range ne $maxima[-1][0]) {
    push @maxima, [$range, $value];
  }
  else {
    $maxima[-1][1] = $value if $maxima[-1][1] < $value;
  }
}

for (@maxima) {
  printf "Maximum for five minutes starting %s is %d\n", @$_;
} 
```

**输出**

```
Maximum for five minutes starting Jun 13 10:35 2012 is 767
Maximum for five minutes starting Jun 13 10:40 2012 is 769 
```

* * *

**更新**

现在我知道您想要包含字段 6 的最大值的每五分钟的*整个记录​​，我已经编写了这个修改后的代码。*

它也适用于`@L2`数组的内容，而不是从文件中读取。

我确信这会更好地编码以`while`循环读取文件并直接从那里生成输出，但除非您向我们展示一些日志文件数据，否则我无法提出比这更好的替代方案。

该程序从您`@L2`在自己的程序中填充的位置继续。

```
my @L2 = findLines();

my @maxima;

for my $record (@L2) {

  my @fields = $record =~ /([^,\s]+)/g;
  next unless @fields;

  my @range = @fields[1..4];
  $range[2] =~ s|(\d+):\d\d$|5*int($1/5)|e;
  my $range = join ' ', @range;
  my $value = $fields[5];

  if (@maxima == 0 or $range ne $maxima[-1][0]) {
    push @maxima, [$range, $value, $record];
  }
  else {
    @{$maxima[-1]}[1,2] = ($value, $record) if $maxima[-1][1] < $value;
  }
}

print $_->[2] for @maxima; 
```

**输出**

```
 Wed,Jun,13,10:38:34,2012,767,33,0,25,6,0,0,2
 Wed,Jun,13,10:42:35,2012,769,31,0,22,6,0,0,3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T16:02:25.243

沿着这些路线的东西应该可以解决问题......

```
#!/usr/bin/perl

use strict;
use warnings;
use 5.010;

# Somewhere to store the data
my %data;

# Process the input a line at a time
while (<DATA>) {
  # Split the input line on commas and colons.
  # Assign the bits we need to variables.
  my ($mon,$day,$hr,$min,$sec,$yr,$val) = (split /[,:]/)[1 .. 7];

  # Normalise the minute value to five-minute increments
  # i.e 37 becomes 35, 42 becomes 40
  $min = int($min / 5) * 5;

  # Create push the value onto an array that is stored in %data using
  # a key generated from the timestamp.
  # Note that we use the 5-min normalised value of the minute so that
  # all values from the same five minute period end up in the same array.
  push @{$data{"$yr-$mon-$day $hr:$min"}}, $val;
}

# For each key in the array (i.e. each five minute increment...
foreach (sort keys %data) {
  # ... sort the array numerically and grab the last element
  # (which will be the largest)
  my $max = (sort { $a <=> $b } @{$data{$_}})[-1];
  # Say something useful
  say "$_ - $max";
}

__DATA__
Wed,Jun,13,10:37:34,2012,759,41,0,30,10,0,0,1
Wed,Jun,13,10:38:34,2012,767,33,0,25,6,0,0,2
Wed,Jun,13,10:39:34,2012,758,42,0,32,10,0,0,0
Wed,Jun,13,10:40:35,2012,758,42,0,29,11,0,0,2
Wed,Jun,13,10:41:35,2012,761,39,0,34,5,0,0,0
Wed,Jun,13,10:42:35,2012,769,31,0,22,6,0,0,3
Wed,Jun,13,10:43:35,2012,754,46,0,29,17,0,0,0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T22:12:30.080

哎呀，我错误地认为您的 csv 输出是正在解析的数据文件。

忽略下面的答案。

这是一个打印出原始逗号分隔行的解决方案。最大值和时间也可用于打印。但是我用结果创建了一个逗号分隔的文件。:-)

```
#!/usr/bin/perl
use strict;
use warnings;
use Text::CSV_XS;

my %interval;
my $csv = Text::CSV_XS->new ({ binary => 1 }) or
     die "Cannot use CSV: ".Text::CSV_XS->error_diag ();

open my $fh, "<", "o33.txt" or die "o33.txt: $!";
while (my $row = $csv->getline ($fh)) {
    my ($time, $amt) = @$row[3,5];
    my ($hr, $min) = split /:/, $time;
    my $key = sprintf "%02d:%02d", $hr, int($min/5) * 5;

    if (exists $interval{$key}) {
        if ($interval{$key}{amt} < $amt) {
            $interval{$key}{amt} = $amt;
            $interval{$key}{data} = $row;
        }
    }
    else { # first time in this 5 minute interval
        $interval{$key}{amt} = $amt;
        $interval{$key}{data} = $row;
    }
}
$csv->eof or $csv->error_diag ();
close $fh or die $!;;

$csv->eol ("\r\n");
open $fh, ">", 'junk.csv' or die $!;

for my $time (sort keys %interval) {
    $csv->print($fh, $interval{$time}{data});
}

close $fh or die $!; 
```

'junk.csv' 的输出是：

```
Wed,Jun,13,10:38:34,2012,767,33,0,25,6,0,0,2
Wed,Jun,13,10:42:35,2012,769,31,0,22,6,0,0,3 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-29T02:33:12.997

这有效（？），（没有测试），它从你的循环开始`my @L2 = &findLines`。

```
my %interval;
my %month;
@month{qw/ jan feb mar apr may jun jul aug sep oct nov dec /} = '01' .. '12';

# Create a 2D array 
my @L2 = &findLines;
foreach my $line (@L2){ 
    #($dayOfWeek1, $month1, $dayOfMonth1, $time, $year1, $rdy, $bsy, $rd, $wr, $ka, $log, $dns, $cls) = split(/,/, $line); 
    #print "$dayOfWeek1,$month1,$dayOfMonth1,$time,$year1,$rdy,$bsy,$rd,$wr,$ka,$log,$dns,$cls"; 
    my ($dow, $mon, $day, $hr, $min, $sec, $yr, $amt) = split /[:,]/, $line, 9;
    my $key = sprintf "%4d-%02d-%02d %02d:%02d",
                $yr, $month{lc $mon}, $day, $hr, int($min / 5) * 5;

    if (exists $interval{$key}) {
        if ($interval{$key}{amt} < $amt) {
            $interval{$key}{amt} = $amt;
            $interval{$key}{data} = [split ",", $line];
        }
    }
    else { # first time in this 5 minute interval
        $interval{$key}{amt} = $amt;
        $interval{$key}{data} = [split ",", $line];
    }
} 

my $csv = Text::CSV_XS->new ({ binary => 1 }) or
     die "Cannot use CSV: ".Text::CSV_XS->error_diag ();

$csv->eol ("\r\n");
open my $fh, ">", 'junk.csv' or die $!;

for my $time (sort keys %interval) {
    $csv->print($fh, $interval{$time}{data});
}

close $fh or die $!; 
```

我希望这能让您更接近解决问题的好方法。
**更新：**添加第一个字段以拆分并从 8 部分更改为 9 部分。

# node.js - 在 Node.js 中读取 PNG 图像

> ID：11247790
> 
> 赞同：23
> 
> 时间：2012-06-28T15:21:02.093
> 
> 标签：node.js, png

Node.js 中是否有一种简单的方法来读取 PNG 文件并获取图像的像素？像[node-image](https://github.com/pkrumins/node-image)之类的东西，但另一种方式:)

我浏览了[https://github.com/joyent/node/wiki/modules#wiki-graphics](https://github.com/joyent/node/wiki/modules#wiki-graphics)中列出的库，但它们要么是提供裁剪和调整大小的命令行工具的简单包装器，要么是复杂的绘图工具，如`node-canvas`.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-27T14:24:15.070

这个在没有原生依赖的情况下同时进行 PNG 解码和编码：

[pngjs - 用于 Node.js 的 PNG 编码器/解码器，没有本机依赖项。](https://github.com/lukeapage/pngjs)

反转PNG颜色的示例：

```
var fs = require('fs'),
PNG = require('pngjs').PNG;

fs.createReadStream('in.png')
  .pipe(new PNG())
  .on('parsed', function() {

    for (var y = 0; y < this.height; y++) {
        for (var x = 0; x < this.width; x++) {
            var idx = (this.width * y + x) << 2;

            // invert color
            this.data[idx] = 255 - this.data[idx]; // R
            this.data[idx+1] = 255 - this.data[idx+1]; // G
            this.data[idx+2] = 255 - this.data[idx+2]; // B

            // and reduce opacity
            this.data[idx+3] = this.data[idx+3] >> 1;
        }
    }

    this.pack().pipe(fs.createWriteStream('out.png'));
}); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-09T11:56:04.967

我正要疯狂搜索，但我找到了一个：

[**png.js** ― 用于画布元素或 Node.js 的 JS 中的 PNG 解码器。](https://github.com/devongovett/png.js)

```
var PNG = require('png-js');

var myimage = new PNG('myimage.png');

var width  = myimage.width;
var height = myimage.height;

myimage.decode(function (pixels) {
    //Pixels is a 1D array containing pixel data
}); 
```

请注意，它是*纯*JavaScript。适用于**浏览器** `<canvas>`和**Node.JS**。

除了`width`and之外还有更多属性`height`，请参阅[此来源](https://github.com/devongovett/png.js/blob/master/png-node.js#L46)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T17:23:41.687

我认为

```
var myimage = new PNG('myimage.png'); 
```

应该

```
var myimage = new PNG.load('myimage.png'); 
```

# java - 在java中没有数组边界检查的情况下减少数组访问时间

> ID：11247791
> 
> 赞同：1
> 
> 时间：2012-06-28T15:21:03.073
> 
> 标签：java, arrays, performance

好的。我对微基准测试的计算有误。如果您没有多余的时间，请不要阅读。

代替

```
double[] my_array=new array[1000000];double blabla=0;
for(int i=0;i<1000000;i++)
{
  my_array[i]=Math.sqrt(i);//init
}

for(int i=0;i<1000000;i++)
{
  blabla+=my_array[i];//array access time is 3.7ms per 1M operation
} 
```

我用了

```
public final static class my_class
{
 public static double element=0;
 my_class(double elementz)
 {
 element=elementz;
 }
}

my_class[] class_z=new my_class[1000000];
for(int i=0;i<1000000;i++)
{
class_z[i]=new my_class(Math.sqrt(i)); //instantiating array elements for later use(random-access)
}

double blabla=0;

for(int i=0;i<1000000;i++)
{
blabla+=class_z[i].element; // array access time 2.7 ms per 1M operations.
}
} 
```

每 1M 循环迭代的循环开销接近 0.5 毫秒（使用此偏移量）。

类数组的元素访问时间比原始数组的低 %25。问题：你知道有什么其他方法可以降低随机访问时间吗？intel 2Ghz 单核 java -eclipse

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:35:57.210

再次查看您的代码，我可以看到在第一个循环中您添加了 1m 个不同的元素。在第二个示例中，您将相同的`static`元素添加 1m 次。

* * *

微基准测试的一个常见问题是您执行测试的顺序会影响结果。

例如，如果您有两个循环，则第一个循环最初不会编译为本机代码。然而一段时间后，*整个方法*将被编译并且循环将运行得更快。

然后你运行第二个循环，发现它是

*   更快，因为它从一开始就进行了优化。（对于简单的循环）
*   慢得多，因为它在没有任何运行时指标的情况下进行了优化。（对于复杂的循环）

您需要将每个循环放在单独的方法中，并交替运行测试多次以获得可重现的结果。

* * *

在您的第一种情况下，循环在运行一段时间后才会优化。在第二种情况下，您的循环很可能在启动时已经编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:52:44.457

区别很容易解释：

*   原始数组的内存占用为 1M * 8 字节 = 8MB。
*   类数组的内存占用为 1M * 4 字节 = 4MB，都指向同一个实例（假设 32 位 VM 或压缩 refs 64 位 VM）。

将不同的对象放入您的类数组中，您会看到原始数组表现得更好。您目前正在将橙子与苹果进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:28:45.527

您的基准测试和上述评估存在几个问题。首先，您的代码不会如图所示编译。其次，您的基准测试时间（即几毫秒）太短了，无法在当今的高速处理器中提供任何统计价值。第三，您将苹果与橙子进行比较（如上所述）。也就是说，您正在为两个完全不同的用例计时：一个静态变量和一百万个变量。

我修复了您的代码并在 i7-2620m 上运行了几次，重复 10,000 x 1,000,000 次。所有结果都在 +/- 1% 以内，这对于本次讨论来说已经足够了。然后，为了比较它们的性能，我选择了所有这些运行中最快的。

上面，您声称第二个用例比第一个用例“低 25%”。这是非常不准确的。

为了进行“静态”与“可变”性能比较，我将第一个基准更改为添加第 999,999 个平方根，就像第二个基准所做的那样。有利于第二个用例的差异仅约为 4.63%。

为了进行数组访问性能比较，我将第二个用例更改为“非静态”变量。第一个用例（原始数组访问）的差异约为 68.2%，这意味着第一种方式比第二种方式快得多。

（由于我从事绩效测量和评估超过 25 年，请随时向我询问有关微基准测试的更多信息。）

# java - 为什么有些人在通信中使用 Class#method 而不是 Class.method？

> ID：11247793
> 
> 赞同：31
> 
> 时间：2012-06-28T15:21:05.413
> 
> 标签：java, forum, mailing-list

在编写 Java 中的方法时（即在论坛、邮件列表、问题跟踪器等中），许多人使用“#”符号而不是 Java 的本地`.`运算符将方法名称与类名称分开。例如，人们指的是`Object#toString`而不是`Object.toString`. 这种语法从何而来？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-28T15:24:10.313

当链接到另一个类的方法时，它是 javadoc 注释中使用的符号。

编辑

要收集评论中提供的其他信息：

*   @Hugo 指出，`#`符号反过来来自 HTML 锚点
*   @maksimov 指出这`Object.method`是调用静态方法的 Java 语法，这可能会产生误导

更新

Java 8 为方法引用带来了一种新的语法，现在它似乎变得更流行了——所以`Object#toString`现在倾向于编写`Object::toString`.

# java - JOOQ 嵌套条件

> ID：11247797
> 
> 赞同：5
> 
> 时间：2012-06-28T15:21:19.163
> 
> 标签：java, sql, jooq

嗨，我想弄清楚如何在 jooq 中写这样的东西

```
select * from table 
where ( ( a = query or b = query or a = query ) 
and ( e = query or g = query or z = query) ) 
```

我不知道如何在 jooq 中进行嵌套条件。请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T13:21:59.890

您需要了解 API 的以下部分：

```
public interface Condition {
    Condition and(Condition other);
    Condition or(Condition other);
} 
```

所以任何`Condition`可以与其他`Conditions`使用`and()`/`or()`方法（和其他）连接。在您的情况下，您可以像这样轻松地形成您的条件：

```
Condition c1 = a.equal(query);
Condition c2 = b.equal(query);
Condition c3 = a.equal(query);

Condition d1 = e.equal(query);
Condition d2 = g.equal(query);
Condition d3 = z.equal(query); 
```

现在这些条件可以这样连接：

```
c1.or(c2).or(c3).and(d1.or(d2).or(d3)); 
```

或者放入一条 SQL 语句：

```
create.select()
      .from(table)
      .where(c1.or(c2).or(c3)
        .and(d1.or(d2).or(d3))); 
```

当然，您不必将`c[1-3], d[1-3]`条件分配给变量。您可以将所有内容内联到单个语句中：

```
create.select()
      .from(table)
      .where(a.equal(query).or(b.equal(query)).or(a.equal(query))
        .and(e.equal(query).or(g.equal(query)).or(z.equal(query))); 
```

您将在手册中找到更多信息：

[https://www.jooq.org/doc/latest/manual/sql-building/conditional-expressions/](https://www.jooq.org/doc/latest/manual/sql-building/conditional-expressions/)

# asp.net - GridView TemplateField 中的条件链接与 NavigateUrl 也是条件 ASP.NET 4

> ID：11247799
> 
> 赞同：1
> 
> 时间：2012-06-28T15:21:25.400
> 
> 标签：asp.net, gridview, hyperlink, conditional, templatefield

我是 ASP/C# 的新手，正在尝试在 GridView 模板中创建一个超链接，该模板将：

a) 如果数据库值不为真，则不显示（我已完成此操作） b) 查询 SQL 数据库以查看两个可能字段之一是否具有值（ISSN 或 ESSN） - 在这种情况下，我想将该值插入到查询外部网站的链接（PubMed，如果你熟悉的话）。

我的 ASPX 文件是：

```
<asp:TemplateField HeaderText="PubMed">
    <ItemTemplate>
        <asp:HyperLink ID="lnkPubMed" runat="server" Text="S" Target="_blank" NavigateUrl='<%# Targetlast3Search(Eval("myVar")) %>' Visible='<%# Convert.ToString(Eval("Indexed_NIH")) == "True" ? true : false %>' >
       </asp:HyperLink>
   </ItemTemplate>
</asp:TemplateField> 
```

代码隐藏是：

```
public string Targetlast3Search(object objlast3Search)
{
    Convert.ToString("ISSN");
    Convert.ToString("ESSN");
    char PubMed = 'http://www.ncbi.nlm.nih.gov/pubmed?term="ISSN"[Journal]%20AND%20%28%22last%203%20years%22[PDat]%29';

    if ("ISSN" != null)
    {
        return (ISSN in URL);
    }
    else if
    {
        ("ESSN" != null);
        {
            return (ESSN in URL;
        }
    }
    else
    {
        return "";
    }
} 
```

# visual-studio - 在 Visual Studio 11 中注册包时出错

> ID：11247805
> 
> 赞同：0
> 
> 时间：2012-06-28T15:21:51.360
> 
> 标签：visual-studio, visual-studio-2012

当我尝试在 Visual Studio 11 RC 中使用 regpkg 注册 Visual Studio 包时，我收到以下错误：

```
regpkg.exe /root:Software\Microsoft\VisualStudio\11.0 /codebase myvspackage.dll
Could not load file or assembly 'Microsoft.VisualStudio.Shell, Version=2.0.0.0,
Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The
system cannot find the file specified. 
```

这适用于以前版本的 Visual Studio。我正在一个只有 Visual Studio 2012 RC 的干净虚拟机中工作。

我一直在网上冲浪寻找没有成功的解决方案。

如果我只是在我的应用程序位置复制 Microsoft.VisualStudio.Shell.dll 它可以正常工作，但是这个 dll 不可再分发，所以......在 Visual Studio 11 中注册包的正确方法是什么？

在此先感谢您的帮助，

路易斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T22:12:48.677

I'll assume you also posted this to the MSDN forums since a question with identical text was posted there which I answered yesterday.

[http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/96556cd4-44dd-4e01-8198-b83a66c6df26](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/96556cd4-44dd-4e01-8198-b83a66c6df26)

In short it sounds like you have an explicit reference to v2 of Microsoft.VisualStudio.Shell.dll, James is incorrect in saying you aren't supposed to use this, this is simply MPF from 2005\. Referencing it is perfectly fine. If you have an explicit version in the reference in the project file try dropping it, if not try adding the binding redirect mentioned in my MSDN forum post.

I have started a mail with the SDK team about this issue though I don't know if they will be taking any changes this close to release. Also, as an FYI, since Shell.dll is from 2005, it is nearing the end of its supported life, we generally support three versions of previous VS releases.

On release of 2012 the support will be 2008,2010, 2012\. I suspect in the next release (after 2012) we may stop including Shell.dll (the 2005 version) entirely in the shipped product. Unless you need to run downlevel on say 2005 I would update the reference to one of the newer shell assemblies (like 9.0, 10.0 or 11.0)

# java - 无法在我的计算机上安装 JavaEE

> ID：11247806
> 
> 赞同：0
> 
> 时间：2012-06-28T15:21:53.663
> 
> 标签：java, jakarta-ee

我试图在我的计算机上安装 JavaEE。我已经有 JDK 7 和 Netbeans 7.1.2。

但是当我尝试安装它时，它显示此错误..

> 应用程序需要 1.6 或更高版本的 java(TM)2 运行时环境.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:26:33.263

Windows 的 JDK 安装程序并不能完全正确地完成它的工作。缺少 JRE 的某些注册表项。Java EE 安装程序依赖于它们。您基本上还需要安装 JRE，您可以从[http://java.com](http://java.com)获得。您不需要卸载 JDK。只需在上面安装 JRE，它将设置正确的注册表项，然后您的 Java EE 安装程序将继续。

请注意，Java EE 包基本上包含 Glassfish 服务器，并且还可以选择捆绑 Netbeans IDE。您也可以从[http://glassfish.java.net](http://glassfish.java.net)单独下载并安装 Glassfish 。或者，如果您碰巧已经安装了 Glassfish，或者已经有另一个服务器，例如 Tomcat 或 JBoss AS，那么您根本不需要 Java EE 包。

### 也可以看看：

*   [Java EE 到底是什么？](https://stackoverflow.com/questions/7295096/what-exactly-is-java-ee)

# php - xpath won't retrieve elements

> ID：11247812
> 
> 赞同：0
> 
> 时间：2012-06-28T15:22:08.367
> 
> 标签：php, xml, xpath

Here is the URL of the xml source:

I'm tryng to grab all the RichText elements using xpath relative location and then print the elementID attribute. It is outputting nothing though. Any ideas?

```
<?php  

$url = "FXG";    
$xml = simplexml_load_file($url);     
//print_r($xml);    
$textNode = $xml->xpath("//RichText");    
$count = count($textNode);    
$i = 0;    
while($i < $count)
{    
   echo '<h1>'.$textNode[$i]['s7:elementID'].'</h1>';
   $i++;
}    

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:10:26.467

You need to register the namespaces that are set in the xml

```
$url = "http://testvipd7.scene7.com/is/agm/papermusepress/HOL_12_F_green?&fmt=fxgraw";    
$xml = simplexml_load_file($url);       
$xml->registerXPathNamespace('default', 'http://ns.adobe.com/fxg/2008');
$xml->registerXPathNamespace('s7', 'http://ns.adobe.com/S7FXG/2008');
$textNode = $xml->xpath("//default:RichText/@s7:elementID");
foreach($textNode as $node) {
    echo '<h1>'.$node[elementID].'</h1>';
} 
```

I hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:12:09.890

Strange. This, however, works.

```
$textNode = $xml->xpath("//*[name() = 'RichText']"); 
```

# cordova - 使用 Phonegap 从 android 图库“分享按钮”分享照片

> ID：11247814
> 
> 赞同：3
> 
> 时间：2012-06-28T15:22:12.357
> 
> 标签：cordova

当用户单击我的图标共享时，在 android 库中，我想恢复 phonegap 浏览器并用文件路径通知 javascript。

目前，我在清单中添加了这个：

```
<action android:name="android.intent.action.SEND" /> 
```

但问题是创建了一个新活动，它执行 loadUrl。恢复最新活动/页面的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:39:32.937

也许您可以使用 Phonegap 实现的此功能让用户选择文件并检索其路径：[http ://docs.phonegap.com/en/2.5.0/cordova_camera_camera.md.html#Camera](http://docs.phonegap.com/en/2.5.0/cordova_camera_camera.md.html#Camera)

此功能允许您从设备的相册中检索照片。图像作为 base64 编码的字符串或图像文件的 URI（您想要的）返回。

查看**camera.getPicture**部分和**Camera.PictureSourceType.PHOTOLIBRARY**选项。

使用**Camera.DestinationType.DATA_URL**作为目标类型来检索图像的路径。

希望这可以帮助 ！再见 ！

# css - CSS - 打印：在所有页面中重复背景

> ID：11247815
> 
> 赞同：1
> 
> 时间：2012-06-28T15:22:15.897
> 
> 标签：css, printing, background

我有以下问题：

当我从我的网站打印某个页面，并且该页面的内容没有填满所有纸张时，背景图像会在那里剪切。但我需要的是在所有纸张中重复背景图像，无论内容占用了多少纸张。

很抱歉，我知道这个问题有点奇怪，所以我在解释它时遇到了很多麻烦。

非常感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:51:55.247

用这个..：

```
 body
{
    background-color:#454545;
background-image:url("background.jpg");
background-repeat:no-repeat;
background-attachment: fixed;
    background-size: contain;
    zoom: 100%;
} 
```

将此粘贴到您的 css 中，您正在寻找的是“附件固定”...背景图像永远不会随着页面的其余部分滚动，您也可以将“固定”应用于其他元素以使其无滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:25:54.977

如果背景附加到 BODY 元素并且`background-repeat: norepeat`在您的 CSS 中设置为，请尝试

```
@page {
  margin: 1cm; /* or any other small value, maybe even 0 */
}

@media print {
  body {
    background-repeat: repeat;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:27:03.267

假设您的图像在 body 标签中，您唯一的机会是设置

```
html, body {
    width: 100%;
    height: 100%;
    background: url(../bg.png) repeat 0 0;
} 
```

但是由于浏览器会在每个边框上设置边距，因此您将永远无法让背景在整个纸张上伸展。这可以由用户在打印对话框中设置为 0，但不能由 css / you 控制。

# ruby-on-rails - 如何设置 wordpress 站点和 rails 多帐户站点

> ID：11247816
> 
> 赞同：0
> 
> 时间：2012-06-28T15:22:17.260
> 
> 标签：ruby-on-rails, wordpress, apache

我有 TLD (www.example.com) 并想部署 Rails 3 应用程序（例如 app.example.com），它将有多个帐户，每个帐户都有一个子域（test.example.com、support.example.com、 ...）。

我用子域创建了 tld，更改了 DNS 记录，一切正常。但是，由于会有从其他一些站点到特定子域的 CNAME 重定向，并且我的默认站点是 TLD (www.example.com)，所有 CNAME 重定向都将转到主站点而不是类似的子域！

有没有更好的方法来集成 Rails 和 Wordpress？如何解决？我最近两天正在寻找解决方案。

类似的问题：[https ://stackoverflow.com/questions/10405859/how-to-config-apache-passenger-for-wordpress-and-rails](https://stackoverflow.com/questions/10405859/how-to-config-apache-passenger-for-wordpress-and-rails)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:14:05.617

如果您的 ruby​​ 处于乘客模式，并且您的 apache 为所有 http 查询提供服务，您应该能够使用 apache 虚拟服务器设置相应地重定向您的 rails 应用程序的查询，同时将您的 Wordpress 保留在默认 Web 服务器上。

我还没有使用 Rails，但是对于 Diaspora（这是一个 ruby​​ 应用程序），我将它与一个 Wordpress 网络并排运行，其中包含许多 TLD 之外的子域。关键可能是您的 TLD 应该是 example.com，而不是 www.example.com。（设置任何你喜欢的 wordoress 重定向到另一个）

如果没有帮助，请发布有关您的 apache（或其他 Web 服务器环境）设置的更多详细信息，以获得更好的帮助。

你的开源事业！

# jquery - 使用jQuery hover() 使元素出现但不触发动画两次

> ID：11247822
> 
> 赞同：0
> 
> 时间：2012-06-28T15:22:28.810
> 
> 标签：jquery

我正在用 jCycle 构建一个简单的滑块。当您将鼠标悬停在滑块上时，我希望出现“上一个”和“下一个”箭头。一旦光标离开滑块，我希望箭头再次消失。箭头绝对位于滑块上方。

滑块的 HTML：

```
 <div id="next"></div>
        <div id="prev"></div>

        <ul id="s2">            
            <li><img src="bla1" /></li> 
            <li><img src="bla2" /></li>
            <li><img src="bla3" /></li> 
            <li><img src="bla3" /></li>             
        </ul> 
```

我目前正在使用此代码：

```
jQuery('#s2,#next,#prev').hover( function () {
    jQuery('#next,#prev').animate({opacity: 0.9});
},
function () {
    jQuery('#next,#prev').animate({opacity: 0});
}); 
```

这有效，但它会触发两次动画：当您将鼠标悬停在滑块上时，以及当您将鼠标悬停在箭头元素（#next 或 #prev）上时。

如何使动画只触发一次？

例如，请参阅[http://fc.boilerroom.tv/](http://fc.boilerroom.tv/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:27:09.123

您可以`#next, #prev`从第一个选择器中删除 并使用 next, prev 的父对象：

```
jQuery('#container-main .ticker').hover( function () {
    jQuery('#next,#prev').stop(true).animate({opacity: 0.9});
},
function () {
    jQuery('#next,#prev').stop(true).animate({opacity: 0});
}); 
```

注意：我还添加了`.stop(true)`，因此如果您快速进出悬停，它可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:28:11.477

从您的第一个选择中删除`#next, #prev`...离开`jQuery('#s2')`

# javascript - 从js中的字段中选择父对象

> ID：11247828
> 
> 赞同：0
> 
> 时间：2012-06-28T15:22:40.173
> 
> 标签：javascript, oop, object, field, parent

我对 OOP 比较陌生，所以我不确定术语。

我创建了一个 DOM 元素作为对象的一个​​字段（例如`myObject.myElement`），并将该元素附加到文档中。该对象`.mousemove()`附加了一个事件（使用 jQuery）。我希望能够选择对象 ( `myObject`)，其中所选元素 ( `myElement`) 是一个字段，以便我可以访问该对象的其他字段。对象不止一个，不同对象的元素的事件处理程序是相同的。是否可以选择元素的父对象？我是否需要为元素提供相同的字段以便我可以访问相同的数据？

我希望能够做这样的事情，但也许不是那么简单：

```
$('.bubble').on({mousemove: function () {
    parentObject = this.parentObject();
    alert(parentObject.otherDataField);
}); 
```

元素是这样创建的：

```
function bubbleObject(value)
{
    this.value = value;
    this.element = document.createElement('div');
    $(this.element).appendTo('.bubbles');
}

myFirstBubble = new bubbleObject(10);
mySecondBubble = new bubbleObject(100); 
```

并且我需要能够访问该`value`对象的字段（我正在简化它，因为代码很长并且与我的问题几乎无关）。

我需要这样做吗：

```
function bubbleObject(value)
{
    this.value = value;
    this.element = document.createElement('div');
    $(this.element).appendTo('.bubbles');
    this.element.value = value; // add same value to element
} 
```

或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:30:10.593

对父级的反向引用可能比复制值更好：

```
function bubbleObject(value)
{
    this.value = value;
    this.element = document.createElement('div');
    $(this.element).appendTo('.bubbles');
    this.element.parent = this;
} 
```

但是，使用这种方式，您必须改用 element.parent.value。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:18:50.297

另一种方法（正如我之前提到的）是扫描所有包含元素的对象，如果它们包含特定元素。如果数组中没有所有这些对象，则必须扫描所有窗口组件（正如我所说，这很昂贵）：

```
function findElement(element) {
  for (obj in window) {
    if (typeof obj === 'object' && obj.myElement == element) {
      return obj;
    }
  }
  return null;
} 
```

这只是一个未经测试的草稿。如果您有一个可以使用的父对象列表而不是 window.xml，那就更好了。

```
function findElement(element) {
  for (int i = 0, l = objList.length; i < l; i++) {
    if (typeof objList[i] === 'object' && objList[i].myElement == element) {
      return objList[i];
    }
  }
  return null;
} 
```

# asp.net - 可以在每个表中使用相同的主键吗？

> ID：11247830
> 
> 赞同：1
> 
> 时间：2012-06-28T15:22:42.017
> 
> 标签：asp.net, html

我正在设计一个医疗保健表格数据库。我们使用多种形式，用户id和年份是唯一标识。目前我每个表单都有一个表，每个表都有一个用户 ID 和主键年份：例如，表 health_form_1、pk (user_id, year) 各种特定于表单的列。table health_form_2, pk (user_id, year) 各种特定于表单的列。

看着一组都具有相同主键的表，我感到很奇怪。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:25:45.120

数据库表不应映射到您的表单。相反，这些表应该映射到您的系统正在建模的真实世界实体。

例如，如果您正在开发医疗计费系统，那么您可能有如下表格：

*   病人
*   临床医生
*   发票

ETC...

这些表中的每一个都有自己的主键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:25:17.450

这种方法的问题在于，如果业务需求发生变化（例如，用户可以在一年内多次创建相同的表单），您将不得不更改主键，这尤其是当它在其他地方也用作外键时会出现问题。

相反，我将为每个表创建一个代理自动增量主键，并在 UserID 和 Yeart 列上创建一个 unqiue 索引或约束。

此外，许多 ORM 在单个 PK 上工作得更好，它可以使您的查询更加简洁。

# jquery - 在颜色框窗口中使用 javascript/jquery 脚本

> ID：11247832
> 
> 赞同：2
> 
> 时间：2012-06-28T15:22:50.027
> 
> 标签：jquery, colorbox

我正在使用颜色框在弹出窗口中预览产品，但我也想在颜色框内使用[Cloud Zoom](http://www.professorcloud.com/mainsite/cloud-zoom.htm)。由于某种我无法弄清楚的原因，cloudzoom 在颜色框内无法工作，在常规浏览器窗口中调用时工作正常。我在发布之前搜索了一下，但这两个脚本并没有太多。也许，我需要在调用 colorbox 之后使用 onComplete:function() 但我不知道该怎么做。

这是我创建的测试页面的代码，其中云缩放在页面上可以正常工作，但在加载到彩盒时不能正常工作。这是[所有文件](http://db.tt/zn2MHUdY)（js，css）的链接，以防您想自己尝试一下。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Test page</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" src="./js/jquery.colorbox-min.js"></script>
<script type="text/javascript" src="./js/cloud-zoom.1.0.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('a.items').colorbox({ width:"80%", height:"90%", href:function(){ return this.href + " #prodpreview"; }});
});
</script>
<link rel="stylesheet" type="text/css" href="./css/cloud-zoom.css" />
<link rel="stylesheet" type="text/css" href="./css/colorbox.css" />
</head>
<body>

<a href="test.php" class="items">Test</a>

<div id="prodpreview" style="margin-top:20px;">
<a href="https://www.google.com/images/srpr/logo3w.png" class="cloud-zoom" id="zoom1" rel="position:'inside', showTitle: false, adjustX:-4, adjustY:-4" style="position:relative; display:block;">
<img src="https://www.google.com/images/srpr/logo3w.png" width="150"/>
</a>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:32:46.560

试试这个：

在 html 中将锚标记替换为

```
<a href="#" class="items">Test</a> 
```

并在脚本中像这样编写jquery colorbox代码

```
$(document).ready(function() {
    $('a.items').colorbox({ 
         width:"80%", 
         height:"90%", 
         href:"#prodpreview",
         inline:true,
         onComplete:function(){
            $('.cloud-zoom, .cloud-zoom-gallery').CloudZoom();
         }
    });
}); 
```

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:42:22.013

另一种方法是使用 ColorBox 的 iFrame 选项，它实质上在 ColorBox 中打开了一个新的 html 环境。里面应该没问题。

请注意，此方法需要您弄清楚如何将适当的图像放入 iframed 内容、大小等。

需要考虑的事情。

问候， KJM

# php - php 使用 utf8 没有 utf_encode

> ID：11247837
> 
> 赞同：0
> 
> 时间：2012-06-28T15:23:24.283
> 
> 标签：php, utf-8

我正在运行一个从 mysql 数据库获取内容的德国网站。我已将字符集定义为 utf8，如下所示：

```
<meta http-equiv='Content-Type' content='text/html;charset=utf-8' /> 
```

问题是，当从数据库中获取 + 显示内容时，我总是需要使用 utf8_encode 才能获得正确的德语“元音变音”。

我想为我的网站维护 utf8 字符集，因为我必须添加更多具有特殊字符的语言。

关于如何 1:1 回显数据库内容而无需 utf8_encode 的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:29:06.773

如果不看您是如何连接到数据库的，就很难判断，但一个常见的问题是数据库连接本身。

打开/选择您需要设置的数据库后：

```
$db->exec('SET CHARACTER SET utf8');    // PDO

mysql_set_charset('utf8');    // Deprecated mysql_* extension 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:28:00.047

每当我想在 PHP 和 MySQL 中使用 utf-8 时，我发现通常这两个函数是你应该在之后使用的函数`mysql_connect()`：

```
mysql_set_charset('utf8', $link);
mysql_query('SET NAMES utf8', $link); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:25:53.977

在标头中设置内容类型可能会奏效：

```
header('content-type: text/html; charset=utf-8'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T18:41:54.663

我有一个类似的问题，我解决了在我的 PHP 文件开头添加这个问题：

```
ini_set('default_charset', 'UTF-8');
mb_internal_encoding('UTF-8'); 
```

此外，检查您是否在没有 BOM 的情况下以 UTF-8 格式保存 PHP 文件非常重要，我对此感到非常头疼。我推荐[Notepad++](http://notepad-plus-plus.org)，它显示了当前的文件编码，并允许您在必要时在没有 BOM 的情况下转换为 UTF-8。

如果您想查看我的问题和解决方案，请[点击此处](https://stackoverflow.com/questions/7798596/function-parameter-with-strange-charset-behavior-in-php)。

希望它可以帮助你！

# c# - .NET 中删除特殊字符的正则表达式是什么？

> ID：11247839
> 
> 赞同：1
> 
> 时间：2012-06-28T15:23:36.410
> 
> 标签：c#, .net, regex

我正在寻找一个可以从字符串中删除以下所有字符（以及空格）的正则表达式：

```
~ % & \ ; : " ' , < > ? # 
```

我用下面的代码试了一下：

```
var MyCleanString = Regex.Replace(InputString, @"[~%&\\;:,<>?#\s]", String.Empty); 
```

它不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:34:50.303

下面的代码打印“abcdef”，所以我不确定你为什么会说它不起作用。

```
var InputString = "abc~%&\\;:,<>?# def";
var MyCleanString = Regex.Replace(InputString, @"[~%&\\;:,<>?#\s]", String.Empty);

Console.WriteLine(MyCleanString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:35:49.223

尝试这个 ：

```
public static string RemoveChar(string input)
{

Regex r = new Regex("(?:[^a-z0-9 ]|(?<=['\"])s)", RegexOptions.IgnoreCase | RegexOptions.CultureInvariant | RegexOptions.Compiled);
    return r.Replace(input, String.Empty);
} 
```

# c# - 使用 c# 将 IP 地址添加到 NIC 卡

> ID：11247841
> 
> 赞同：2
> 
> 时间：2012-06-28T15:23:43.040
> 
> 标签：c#, .net, c#-4.0, network-programming

> **可能重复：**
> [在 .NET 中以编程方式配置网络适配器的最佳方式](https://stackoverflow.com/questions/689230/best-way-to-programmatically-configure-network-adapters-in-net)

具有 Java 背景的 C# 新手。我正在寻找一种允许我将第二个 IP 地址添加到 NIC 卡的方法。

我已经在这里实施了解决方案，但无法让它发挥作用。 [http://www.pinvoke.net/default.aspx/iphlpapi.addipaddress](http://www.pinvoke.net/default.aspx/iphlpapi.addipaddress)

我不想使用 pinvoke 并希望有一种方法可以使用 c# 来做到这一点，有人可以帮忙吗？谢谢..

# python - 如何在python中连续检查？

> ID：11247842
> 
> 赞同：1
> 
> 时间：2012-06-28T15:23:44.797
> 
> 标签：python

> **可能重复：**
> [Python 属性更改侦听器模式](https://stackoverflow.com/questions/5186520/python-property-change-listener-pattern)

我是新手程序员。在我的程序中，我想不断检查是否对字典进行了任何更改。如果对字典进行了更改，我需要运行一些仅与更改相关的方法。有人可以向我解释可以与代码示例一起使用来完成它的各种技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:38:11.087

“推送”和“轮询”有两种通用方法：

*   “push”：你的字典会生成一个事件/调用一个对自身的任何更改的回调，例如，[特征库](http://code.enthought.com/projects/traits/)。当您需要在任何更改发生时立即采取行动时，它很有用。
*   “民意调查”：当你准备好对它们采取行动时，你检查字典的变化。如果可以以批处理模式处理更改并且您对单个更改不感兴趣，那么它很有用，只有最终状态很重要。

# c# - 运行时和调试之间的区别

> ID：11247843
> 
> 赞同：0
> 
> 时间：2012-06-28T15:23:48.423
> 
> 标签：c#, visual-studio-2010, .net-4.0

我有一个非常奇怪的问题。我编写了一个小型内部应用程序，它会抓取大量 URL，执行 HEAD 请求以获取大小并填充 ListView 控件。当我在调试时在 Visual Studio 中运行它时一切正常，但是当我部署列表视图时没有填充。两人一直在打完全相同的电话。有谁知道可能导致这种情况发生的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:37:38.830

谢谢我能够通过将调试器附加到进程来找到解决方案......非常感谢大家的回答。我知道这是一个微不足道的问题......

非常感谢

捷通

# java - 阻止 API 用户使用某些方法

> ID：11247844
> 
> 赞同：0
> 
> 时间：2012-06-28T15:23:55.727
> 
> 标签：java, oop, exception, architecture

嗨，我正在用 java 实现给定的设计。基本上我有一个称为 base 的抽象类，我有许多具体的类，它们扩展 Base 并从不同的包实现接口。每个具体类都将实现不同的接口。现在这些接口包含基于事件和非基于事件的方法签名。我的问题是；我只希望在我的具体类中实现非基于事件的方法，但是由于implements关键字java迫使我插入一个自动生成的方法体，它基本上是返回null。他们可能稍后会实施这些基于事件的方法，但目前还没有。什么是让 API 用户知道这些方法不包含实现的合适方法。这是我的想法；

1.  使用不推荐使用的关键字
2.  创建一个异常类并在方法内抛出该异常并让 API 用户处理它。

我没有对现有架构进行更改的选项。任何想法都非常感谢。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:31:25.030

您可以创建自己的界面，其中列出了您希望组件的用户能够访问的所有方法。使其成为他们使用的唯一接口，其他公共方法将不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:32:15.623

选项 (2) 很好，但是当您遵循接口时，您将需要未经检查的异常。并将方法记录为未实现。

Deprecated 意味着历史，即它有效但不应再使用。由于您明确声明这些方法不起作用，因此标记为已弃用不会阻止使用，也不会表明这些方法未实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:38:17.257

根据[Oracle](http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html)的说法，弃用 API 的原因包括

> *   它不安全、有缺陷或效率极低
> *   它会在未来的版本中消失
> *   它鼓励不良的编码实践

两者都不适合您的情况。

就个人而言，我倾向于抛出标准库已经提供的[UnsupportedOperationException](http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html)，以便

> 表示不支持请求的操作。

对我来说，这听起来更像你真正想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T16:41:52.693

我建议使用一些设计模式的混合包。这将帮助您有效地解决这个问题，并使代码也可维护。

根据我的知识，您可以在这里使用抽象工厂模式。见下图中的设计草图。

![在此处输入图像描述](../Images/27cee8eed25504005d3a78ee49b2a274.png)

subclass1 和 subclass2 中的 method1 和 method2 是应该公开的，而 subclass1 和 subclass2 中的 method3 和 method4 是我们不想公开的。

创建一个 Genericsubclass 接口，并根据子类中方法的性质在该接口中创建一些方法。例如：我在这个接口中创建了一个名为 nonEventbasedmethod1 的方法

为每个子类创建一个工厂，每个工厂都会实现 GenericSubclass 接口。然后在 subclass1Factory 中实现 nonEventbasedmethod1 方法就像

```
nonEventbasedmethod1(){
    subclass1.method1();
} 
```

并且在 subclass2Factory 中实现 nonEventbasedmethod1 方法类似于

```
nonEventbasedmethod1(){
    subclass2.method3();
} 
```

然后创建一个 SubclassAbstract Factory，它将返回其中一个子类工厂，然后不用担心返回了哪个工厂（在返回适当的工厂之前已经在 SubclassAbstractFactory 中做出了该决定）只需从 GenericSubclass 接口和以下之一调用所需的方法将调用来自 subclass1 或 subclass2 的方法。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T17:30:50.013

如果您简单地为“NotSupported”或“NotImplemented”异常抛出异常 - 考虑[NotImplementedException 异常](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/NotImplementedException.html)（在 org.apache.commons）。
但是，我会重新考虑重新审视您的设计，看看您是否可以避免这种情况 - 也许您需要定义另一个接口，该接口将保存始终实现的方法，并将其扩展为另一个接口（或提供一个没有扩展的接口到上一个）对于您并不总是实施的方法。

# internet-explorer - SESSION 变量在 IE 中被删除

> ID：11247845
> 
> 赞同：0
> 
> 时间：2012-06-28T15:24:03.390
> 
> 标签：internet-explorer, session, coldfusion, coldfusion-10

*请不要问我为什么要这么多代码。我正在运行由其他人开发的网站。很多不是我会做的方式，但它是目前的方式。先谢谢你了。

我们有一个简单的应用程序，允许用户搜索我们学校的课程。该应用程序一切正常，但最近我们将服务器升级到 IIS 7 和 Coldfusion 10。从那时起，一些使用 Internet Explorer 的用户无法使该应用程序正常工作，但问题并不是 100% 普遍存在。事实上非常零星。我已将其缩小到在此过程中未设置的单个会话变量 [SESSION.location]，但无法确定在哪里。我将尝试在下面发布相关代码。

Application.CFC 中没有与此变量混淆的内容。有一个处理表单提交的通用标题。

```
<cftry>
        <cfset the_message = (structKeyExists(REQUEST, 'message')) ? REQUEST.message : (isDefined('submitFrmData')) ? submitFrmData() : ''>
        <cfif Len(Trim(the_message)) NEQ 0><div id="message">#the_message#</div></cfif>
    <cfcatch>#createObject('component','common.err_handler').pageErrHandler(CFCATCH)#</cfcatch>
    </cftry> 
```

在表单用于搜索课程的页面上，我转储了 SESSION，我可以看到已设置的 SESSION.location。表单的操作被发送到 search_results.cfm 页面，该页面顶部有以下内容。

```
public string function submitFrmData() {
    //Every time page loads.
    dal = CreateObject('component','cfcs.dal');
    if(structKeyExists(FORM, 'search_courses')){
        if (len(FORM.coursefinder_search) > 2 && arrayLen(REMatch("[%!@##$^&*()]", FORM.coursefinder_search)) < 1) { 
            if(structKeyExists(session, "location") && structKeyExists(session, "semester_id")){
                location('search_results.cfm?fsrch=' & APPLICATION.cFun.structToEncryptedString(FORM) & '&sem_id=#SESSION.semester_id#&loc_id=#SESSION.location#',false);
            } else {
                location("index.cfm", false);
            }
        } else if(structKeyExists(FORM, 'dept_id')){    
            if(structKeyExists(session, "location") && structKeyExists(session, "semester_id")){
                location('search_results.cfm?srch='& APPLICATION.cFun.structToEncryptedString(FORM) & '&sem_id=#SESSION.semester_id#&loc_id=#SESSION.location#',false);
            } else {
                location("index.cfm", false);
            }
        } else {
            location ("index.cfm", false);
        }
    }
    if(structKeyExists(URL, 'srch')){
        srch_result = dal.CrsSearch(APPLICATION.cFun.encStringToStruct(URL.srch));
        realResults = new query(dbtype="query", QoQsrcTable=srch_result, sql="SELECT DISTINCT COURSEID, sectioncode FROM QoQsrcTable").execute().getResult();
        numCoursesFound = (len(trim(realResults.courseid)) NEQ 0) ? realResults.recordCount : 0;
    }
    if(structKeyExists(URL, 'fsrch')){
        srch = APPLICATION.cFun.encStringToStruct(URL.fsrch);
        if(!structKeyExists(srch,'coursefinder_search')){
            location ("index.cfm", false);
        }
        srch_result = dal.CrsFreeSearch(srch.COURSEFINDER_SEARCH);
        realResults = new query(dbtype="query", QoQsrcTable=srch_result, sql="SELECT DISTINCT COURSEID, sectioncode FROM QoQsrcTable").execute().getResult();
        numCoursesFound = (len(trim(realResults.courseid)) NEQ 0) ? realResults.recordCount : 0;
    }

    return '';
} 
```

所以对我来说这很奇怪，但这就是发生的事情。FORM 被发送到结果页面，其中在调用标头之前定义了 submitFrmData 函数。调用标头并运行 submitFrmData 函数。一旦它进入该函数，我转储 SESSION 并且 SESSION.location 丢失。其他 SESSION 变量仍然存在，但位置丢失。在 OnRequestStart 函数中设置了很多 SESSION 变量，这让我相信所有 SESSION 变量都丢失了，然后在 OnRequestStart 调用上重置。

但是为什么 IE 只会在某些计算机上丢失这些变量。受影响的计算机似乎是在服务器升级之前访问我们的应用程序的计算机，但有些仍然可以正常工作。我使用的计算机在所有版本的 IE 中都很好。我已尝试清除 IE 中的所有缓存数据等，但问题仍然存在。

我今天在这里买了一台有问题的笔记本电脑，希望能够在整个地方转储 SESSION，直到我确切地找出他们在哪一步迷路了，但这并不能解释为什么它只在某些计算机上运行IE并非所有计算机都运行IE。会不会是操作系统问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:27:42.843

我们作为子域运行。主域还使用了 Coldfusion 并使用了与我们的冲突的站点范围的 cookie。这导致了这个问题，并且已经解决了。

# android - 如何获取android屏幕的当前视图

> ID：11247850
> 
> 赞同：2
> 
> 时间：2012-06-28T15:24:11.893
> 
> 标签：android, video, view

我正在开发一个应该录制视频的 Android 应用程序。由于项目的限制，我无法更改某些类，例如 Preview 和 VideoRec 类。

应用程序有一个主屏幕活动，并且有一个切换按钮。每当检查切换按钮时，视频录制都应启动，反之亦然。

但是，VideoRec 类的构造函数采用 View 类型参数作为输入 (VideoRec(View x))。主要活动的屏幕有一个表面视图和几个按钮。我要做的只是在同一屏幕上启动视频录制，就像任何手机的默认媒体记录器应用程序一样。

我的问题是；我一直无法获得屏幕视图。我不能使用 preview 或 surfaceView 类型，我收到错误说 classCast Exceptions 或无效的预览/表面预览。

长话短说，我怎样才能将活动的屏幕作为一种视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:30:29.190

您可以在 Main Activity 中提供一个公共方法，该方法返回您需要的视图。显然，您必须在 onCreate 方法活动中保存对该视图的引用：

```
 View myView;

 protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.the_layout_id);
      myView = (View)findViewByID(R.id.your_id_view);            
 }

  public View getTheView(){
      return myView;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T13:06:29.640

我的理解是你有 1 个表面视图来复制你正在录制的内容。所以你必须在surfaceChanged(...) SurfaceHolder.Callback中附加你的PreviewCallback！完成此操作后，您将在 MediaRecorder 运行后继续获取预览帧数据！

例如：

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    mCamera.setPreviewCallback(new PreviewCallback() {
            public void onPreviewFrame(byte[] _data, Camera _camera) {
                Log.d("onPreviewFrame-surfaceChanged",String.format("Got %d bytes of camera data", _data.length));
            }
        });

} 
```

希望它有帮助！干杯

# android - android 日食 avd

> ID：11247851
> 
> 赞同：1
> 
> 时间：2012-06-28T15:24:12.763
> 
> 标签：android, avd

我是一个新手，需要一些帮助才能让 AVD 与我的应用程序一起运行。几十年来我一直在开发 C 代码，但我不得不承认 Eclipse/AVD 设置让我很困惑！我正在关注 developer.android 网站（以及其他一些网站）上的“HelloWorld”教程，一切似乎都运行良好，直到我尝试在 AVD 模拟器上运行它为止。我没有收到任何警告，Eclipse 构建/运行输出窗口显示一切安装正常，并且 AVD 启动并运行。Eclipse 说我的应用程序正在加载，但它从未运行。我得到的只是屏幕上带有“ANDROID”的模拟器窗口和右侧的按钮。

我有 Eclipse Indigo 和 r18 的 Android 插件（我尝试安装 Helios，但 Eclipse 网站将我指向 Indigo！）。Indigo 是否可以运行模拟器，还是我特别需要 Helios？我也有 Java 1.7。

我安装的 API 级别是 15 级（我认为是 Android 的 v4.xxx）。不知道我是否需要较低版本才能运行我的教程应用程序，但在 AVD 管理器中设置设备时，我只能选择 15 级。

几天来，我一直在努力解决这个问题，尝试了各种开关和按钮，但无济于事。在我开始卸载所有内容并重新安装之前，任何人都可以告诉我是否有任何我可能遗漏的东西，或者自己是否遇到了这个问题并找到了解决方法？可能总是让新的初学者绊倒的东西？还是我需要重新开始？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:39:39.157

尝试启动应用程序后，您要让模拟器运行多长时间？Android 操作系统可能需要很长时间才能在模拟器中启动。如果它卡在“ANDROID”屏幕上，那么你要么等待的时间不够长，要么你的模拟器有问题。它最终应该像设备一样启动到正常的 Android 锁定屏幕或主屏幕。

您可以在尝试运行应用程序之前启动模拟器，方法是打开 Android 虚拟设备管理器（Eclipse 中的工具栏图标，如果安装正确），然后选择一个模拟器并单击“开始”按钮。如果您没有列出任何模拟器，那么您需要通过单击“新建...”按钮来创建一个。

# android - 提交清除中断状态

> ID：11247852
> 
> 赞同：1
> 
> 时间：2012-06-28T15:24:13.133
> 
> 标签：android, multithreading, sharedpreferences, interrupt

在我正在开发的应用程序中，我有一个循环运行的线程。在循环内部，会评估几个条件，并根据这些条件，将一个值或另一个值存储在 SharedPreferences 中。

```
public void run()
{
  try
  {
    SharedPreferences preferences = 
       context.getSharedPreferences("MyPrefs", Activity.MODE_PRIVATE);

    SharedPreferences.Editor editor = preferences.edit();

    while (true)
    {                       
      if (condition1)
      {
        editor.putBoolean("mykey", "1");
      }
      else if (condition 2)
      {
        editor.putBoolean("mykey", "2");            
      }
      editor.commit();

      if (isInterrupted())
         throw new InterruptedException();              

      Thread.sleep(60000); // 60 seconds
    }
  }
  catch (InterruptedException e)
  {
    Thread.currentThread().interrupt();
  }
} 
```

该线程由onResume方法中的Activity启动，在onPause方法中被中断。

如果线程在睡眠时被活动（主线程）中断，则会抛出 InterruptedException。那没问题。

但我的问题是，如果活动（主线程）在运行（而不是睡眠）时中断线程。“中断标志”设置为true，但在编辑器上调用commit后，该标志设置为false，所以我无法中断抛出InterruptedException的线程。

我能做些什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T09:37:38.783

我刚刚遇到了同样的问题并找到了解决方案。

您可以使用[editor.apply()](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#apply%28%29)而不是[editor.commit()](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#commit%28%29)！

apply() 代替 commit() 起作用的原因是它在新线程上执行 I/O，因为它不需要等待返回值：

> 与将其首选项同步写入持久存储的 commit() 不同，apply() 会立即将其更改提交到内存中的 SharedPreferences，但会开始异步提交到磁盘，并且不会通知您任何失败。如果此 SharedPreferences 上的另一个编辑器在 apply() 仍然未完成时执行常规 commit()，则 commit() 将阻塞，直到所有异步提交以及提交本身都完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:32:24.637

首先，不要这样做：`while (true)`

其次，如果线程被中断：

```
if (isInterrupted())
         throw new InterruptedException();              

      Thread.sleep(60000); // 60 seconds
    }
  }
  catch (InterruptedException e)
  {
    Thread.currentThread().interrupt();
  } 
```

它捕获中断，然后再次中断线程。这尖叫递归，你的无限while循环没有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:06:53.110

调用`editor.commit()`将执行 I/O。如果线程上有一个挂起的中断，那么这可能会中止 I/O 并清除挂起的中断。

为了做你想做的事，你可能需要防止线程在提交时被中断。您需要同步访问，以便应用程序只能在线程休眠时中断它。像这样的东西：

```
// This method will interrupt the thread that is looping ONLY while it is sleeping
public synchronized void interruptNow() {
    threadThatIsLooping.interrupt();
}

public void run() {
try {
    SharedPreferences preferences = 
       context.getSharedPreferences("MyPrefs", Activity.MODE_PRIVATE);
    SharedPreferences.Editor editor = preferences.edit();
    while (true) {
        synchronized {
            // Cannot be interrupted within this block                  
            if (condition1) {
                editor.putBoolean("mykey", "1");
            } else if (condition 2) {
                editor.putBoolean("mykey", "2");            
            }
            editor.commit();
        }             
        Thread.sleep(60000); // 60 seconds
    }
} catch (InterruptedException e) {
    // Do whatever you want here when the thread is interrupted while sleeping
}
} 
```

# iphone - 如何从文本转换为数字整数？

> ID：11247856
> 
> 赞同：-1
> 
> 时间：2012-06-28T15:24:30.457
> 
> 标签：iphone, ios5, xcode4.3

我只输入了文本字段中的数字，我想将其更改为整数。我应该写什么代码？

只需说文本字段为 10，我想取 10 = x，x = 整数。所以如果我将它用于数学过程 a = x + 1 并显示 11\. 有没有机会？我希望你明白我的意思。谢谢你。我想你们俩都会回答这个简单的问题，但我不是因为我是初学者。我是一个 3d 设计图形开关 180 度成为 xcode 编程。顺便说一句，我以前试过这个，但它不能。

```
 NSInteger number = [[txtBtn text] integerValue]; 
```

**编辑：**

我遇到了这个错误，“数字”的本地声明隐藏了实例变量，指向结果 =（数字 * 2）-1 处的数字；我把这样的代码。

```
NSInteger number = [[txtBtn text] intValue];
result = (number * 2) - 1; 
```

我不知道怎么了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:35:00.927

你确定它是一个 TextField 而不是你试图从中获取 integerValue 的 UIButton 吗？

`[txtBtn text]`

我创建了一个 TextField 和一个 UIButton，并实现了您的代码：

```
- (IBAction)btnClicked:(id)sender {
    NSInteger i = [[inputField text] intValue];
    int result = (i*2)-1;
    NSLog(@"%i", result);
} 
```

输出结果是正确的。例如：类型 5，控制台输出为 9。

# c++ - 如何将二维 char 类型数组按行保存到 c 中的 .txt 文件？

> ID：11247860
> 
> 赞同：-3
> 
> 时间：2012-06-28T15:24:43.283
> 
> 标签：c++, arrays, multidimensional-array

我有一个二维字符数组[100][100]，我想将它按行保存到 .txt 文件中。逐行我的意思是首先打印第一行中的所有字符，然后打印第二行，依此类推......

我可以编写控制台输出的代码，但不知道如何将其保存到 .txt 文件：

```
for (int x=0;x<100;x++)
{
    for(int y=0;y<100;y++)
    {
        cout<<array[x][y];
    }
} 
```

请在这方面帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:39:35.773

```
#include<iostream>
#include<fstream>
using std::cout;

int main(){
ofstream out("file_name.txt");
for(int x=0;x<100;x++){
        for(int y=0;y<100;y++){

              out << array[x][y];
        }
        out << "\n";

}
file.close();
return 0;

} 
```

**使用** `"\n";`而不是`endl;`会使您的代码更快，因为`endl`它将刷新您的文件流缓冲区并将其每行写入您的文件，即 100 次。所以最好不要刷新文件流缓冲区，直到结束。在这种情况下，关闭功能将刷新您的缓冲区并自动关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:32:10.423

尝试这个：

```
#include <fstream>

int main()
{
    std::ofstream out("file_to_store_the_array.txt");
    for(int x = 0; x < 100; x++) {
        for(int y = 0; y < 100; y++) {
            out << array[x][y];
        }
    }
    out.close();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:31:36.670

```
#include <iostream>
#include <fstream>
using namespace std;

int main () {
  ofstream myfile;
  myfile.open ("example.txt");
  for (int x=0;x<100;x++)
  {
    for(int y=0;y<100;y++)
    {
      myfile<<array[x][y]; 
    }
    myfile<<endl;
  }
  myfile.close();
  return 0;
} 
```

不知道它是否编译，但大致应该告诉你是如何完成的。（<< ENDL; 用于在行之间发出 CR（或 CR/LF，取决于系统））

# serialization - XmlException 仅在高使用率 DataContractSerializer 期间

> ID：11247861
> 
> 赞同：0
> 
> 时间：2012-06-28T15:24:51.257
> 
> 标签：serialization, windows-8, async-await

我有一个使用 DataContractSerializer 的有效 Windows 8 缓存解决方案，它仅在“快速”使用 UI 时引发 XmlException“文件意外结束”。

```
public static class CachingData<T>
{
    public static async void Save(T data, string filename, StorageFolder folder = null)
    {
        folder = folder ?? ApplicationData.Current.LocalFolder;
        try
        {
            StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync(filename, CreationCollisionOption.ReplaceExisting);
            using (IRandomAccessStream raStream = await file.OpenAsync(FileAccessMode.ReadWrite))
            {
                using (IOutputStream outStream = raStream.GetOutputStreamAt(0))
                {
                    DataContractSerializer serializer = new DataContractSerializer(typeof(T));
                    serializer.WriteObject(outStream.AsStreamForWrite(), data);
                    await outStream.FlushAsync();
                }
            }
        }
        catch (Exception exc)
        {
            throw exc;
        }
    }

    public static async System.Threading.Tasks.Task<T> Load(string filename, StorageFolder folder = null)
    {
        folder = folder ?? ApplicationData.Current.LocalFolder;
        T data = default(T);
        StorageFile file = await folder.GetFileAsync(filename);
        using (IInputStream inStream = await file.OpenSequentialReadAsync())
        {
            DataContractSerializer serializer = new DataContractSerializer(typeof(T));
            data = (T)serializer.ReadObject(inStream.AsStreamForRead());
        }
        return data;
    }
} 
```

例如，用户单击列表 CachingData.Load 中的项目，通过 await 调用异步，检查 FileNotEoundException 并从磁盘或网络加载数据，完成时序列化。首次加载后，用户选择列表中的另一个项目并循环重复。

当“首次加载后”变为“不等待加载”并且所选项目不可用缓存时，就会出现此问题。

不太确定如何继续，甚至如何调试，希望只是忽略将允许应用程序继续（只是没有很好的缓存速度增加）

# github - github：推送权限被拒绝（

> ID：11247869
> 
> 赞同：1
> 
> 时间：2012-06-28T15:25:21.443
> 
> 标签：github, push, ssh-keys

我知道这个问题已经被问过好几次了。从我的本地机器上，我尝试将文件上传到我的存储库：

```
:~/Git-JeanPat/pyFISH$ git push -u origin master
Agent admitted failure to sign using the key.
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

我的存储库是

```
https://github.com/jeanpat/pyFISH 
```

我从 github 的管理界面检查我的密码。

我从命令行创建了一个新的 ssh 密钥，并将其复制到 github 上。当我按照[指示](https://help.github.com/articles/error-permission-denied-publickey)检查我的连接时。它失败：

```
~/Git-JeanPat/pyFISH$ ssh -vT git@github.com
OpenSSH_5.9p1 Debian-5ubuntu1, OpenSSL 1.0.1 14 Mar 2012
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config line 19: Applying options for *
debug1: Connecting to github.com [207.97.227.239] port 22.
debug1: Connection established.
debug1: identity file /home/simon/.ssh/id_rsa type 1
debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048
debug1: Checking blacklist file /etc/ssh/blacklist.RSA-2048
debug1: identity file /home/simon/.ssh/id_rsa-cert type -1
debug1: identity file /home/simon/.ssh/id_dsa type -1
debug1: identity file /home/simon/.ssh/id_dsa-cert type -1
debug1: identity file /home/simon/.ssh/id_ecdsa type -1
debug1: identity file /home/simon/.ssh/id_ecdsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.1p1 Debian-5github2
debug1: match: OpenSSH_5.1p1 Debian-5github2 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9p1 Debian-5ubuntu1
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48
debug1: Host 'github.com' is known and matches the RSA host key.
debug1: Found key in /home/simon/.ssh/known_hosts:1
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/simon/.ssh/id_rsa
debug1: Remote: Forced command: gerve jeanpat    95:e1:bb:60:b5:31:63:39:3a:99:d1:01:22:87:3c:15
debug1: Remote: Port forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: Server accepts key: pkalg ssh-rsa blen 279
Agent admitted failure to sign using the key.
debug1: Trying private key: /home/simon/.ssh/id_dsa
debug1: Trying private key: /home/simon/.ssh/id_ecdsa
debug1: No more authentication methods to try.
Permission denied (publickey). 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:07:08.507

我重新启动了我的 ubuntu 12.04 笔记本电脑，一切都很顺利......

# sql - 无法从 sql server 2005 中的现有表中插入新表中的记录

> ID：11247870
> 
> 赞同：0
> 
> 时间：2012-06-28T15:25:23.917
> 
> 标签：sql, sql-server, database, sql-server-2005

我需要将记录从现有表中插入到新表中。我使用以下查询来执行此操作：

```
Insert into Newtable
Select * from Oldtable where date1 = @date 
```

此查询大部分时间都有效，但在一种情况下，我会为 date1 值插入 1000 万条记录。在这种情况下，我收到以下错误消息：

> 错误：数据库“tempDB”的事务日志已满。要找出日志中的空间不能被重用的原因，请参阅 sys.databases 中的 log_reuse_wait_desc 列

我应该将查询分成几部分并按顺序插入它们，还是有办法对当前查询执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:30:32.013

这也许是一个令人反感的建议。但是，您可以尝试将数据导出到文件，然后使用批量插入进行插入，并将数据库日志记录设置为 SIMPLE 或 BULK-LOGGED。

更多信息位于[http://msdn.microsoft.com/en-us/library/ms190422.aspx](http://msdn.microsoft.com/en-us/library/ms190422.aspx)。

# git - Github - Git 推送错误

> ID：11247871
> 
> 赞同：1
> 
> 时间：2012-06-28T15:25:25.733
> 
> 标签：git, github

所以我在一个名为“test_branch”的分支上。

我这样做了`git add .`，`git commit`而且一切正常。

但是当我这样做时`git push`，它给了我错误：

```
! [rejected]        acceptance -> acceptance (non-fast-forward)
error: failed to push some refs to 'git@github.com:company/sample.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

执行`git pull`向我显示所有内容都是最新的，然后进行推送，给我与上述相同的错误。

有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:51:18.650

当您`git push`不带任何参数键入时，其行为取决于设置的值`push.default`。的默认值为，根据，`push.default`它执行以下操作：`matching`[`git help config`](http://git-scm.com/docs/git-config)

> `matching`-- 将所有具有相同名称的分支推入两端。这适用于那些将所有分支准备成可发布的形状，然后用一个命令将它们推出的人。它不适合推送到由多个用户共享的存储库，因为如果其他用户更新了分支，本地停滞的分支将尝试非快进推送。

换句话说，如果您的本地存储库有一个名为 的分支`acceptance`，而远程存储库有一个名为 的分支`acceptance`，那么即使您没有签出，`git push`也会尝试使远程`acceptance`分支与您的分支匹配。`acceptance``acceptance`

所以，我的猜测是您`acceptance`在过去的某个时间签出，但是项目中的其他人（或者可能是您来自存储库的不同克隆）将新提交推送到`acceptance`. 这导致您的本地`acceptance`分支落后于远程`acceptance`分支。现在，每当您键入 时`git push`，您的 Git 都会尝试将远程分支备份`acceptance`到您在本地存储库中的版本。

要修复，我建议设置`push.default`为`simple`（或者`upstream`如果`simple`在您的 Git 版本中不可用 - 它仅在 1.7.11 中添加）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:39:46.460

您可能必须合并一个分支才能推送可快速转发的提交。要找出答案，首先要做

```
$ git fetch 
```

然后做

```
$ git log --graph --decorate --oneline --all 
```

您应该看到您尝试推送的分支不在同一行中，并且在您尝试合并的远程分支之前。

顺便说一句，`git push`它本身总是将所有跟踪的分支推送到它们的原点/对应物，并且您的分支可能与它们的原点对应物不是最新的。在这种情况下，只需忽略警告。您可以通过以下方式减少此警告的冗长：

```
$ git config advice.pushNonFastForward false 
```

但我现在看到你真正的问题可能是 test_branch 没有被推送`git push`。要解决此问题，请键入：

```
$ git branch --set-upstream test_branch origin/test_branch 
```

# groovy - 汇总有异常的字段

> ID：11247875
> 
> 赞同：0
> 
> 时间：2012-06-28T15:25:32.540
> 
> 标签：groovy, jasper-reports, ireport

目前我有一份报告，其设置如下：

![在此处输入图像描述](../Images/46c671714c4ca8b54b1868fb0af0b47a.png)

我想要做的是让这些变量（sumaccts_1 和 sumbalance_1）将字段（numaccts 和 sumbalance）相加，但 $F{attribution} 是否为 'n' 而不是 'y'

这是我当前生成它时的样子：

![在此处输入图像描述](../Images/879baa6a9f9ffb5b8df61bba8e361789.png)

因此，正如您目前所看到的那样，这些汇总金额包括带有“n”的行，我希望它只汇总带有“y”的金额。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:37:49.243

对于总账，创建一个Integer类型的变量，计算Sum，重置类型Report，变量表达式：

```
 $F{attribution} == "y" ? $F{numaccts} : 0 
```

对于总金额，您应该使用您选择的更适合十进制值的变量类型。

# android - 从 OnItemClickListener 调用搜索对话框

> ID：11247880
> 
> 赞同：0
> 
> 时间：2012-06-28T15:25:53.940
> 
> 标签：android

我有一个奇怪的问题。我正在尝试在我的应用中实现搜索。如果我按下搜索按钮，或者如果我从 onStart() 函数调用 onSearchRequested()，则会显示搜索屏幕。但是如果我从 OnItemClickListener 的 onItemClick 函数调用 onSearchReqeusted()，我会得到 NullPointerException。我也尝试获取搜索管理器的实例，并直接调用 startSearch 函数，但它也失败了。

我认为这个人[如何使用 onSearchRequested() 调用搜索对话框](https://stackoverflow.com/questions/4465529/how-do-i-invoke-the-search-dialog-using-onsearchrequested)遇到了同样的问题并且没有得到回答，但我不确定。

这是我的 OnStart 方法：

```
@Override
    protected void onStart() {  
        super.onStart();
        this.setContentView(R.layout.mainactivity);
        ListView lv = (ListView)this.findViewById(R.id.MainActivityList);

        lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, actions));
        onSearchRequested();   //This works...
        lv.setOnItemClickListener(new OnItemClickListener(){

            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                Intent i = null;
                Context c = MainActivity.this;
                //position is the index of actions above.
                switch(position)
                {
                case 0:
                    i = new Intent(c,MainCategoryActivity.class);
                    break;
                case 1:
                    //SearchManager sm = (SearchManager) MainActivity.this.getSystemService(Context.SEARCH_SERVICE);
                    //sm.startSearch(null, false, new ComponentName(MainActivity.this, MainActivity.class) , null, false);

                    onSearchRequested();   //NullPointerException
                    break;
                case 2:
                    i = new Intent(c,SelectCityActivity.class);
                    break;
                case 3:
                    i = new Intent(c,SavedSearchesActivity.class);
                    break;              
                }

                c.startActivity(i);

            }});

    } 
```

以下是异常日志：

```
 06-28 16:09:22.368: E/AndroidRuntime(1702): FATAL EXCEPTION: main
      06-28 16:09:22.368: E/AndroidRuntime(1702): java.lang.NullPointerException
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at android.app.Activity.startActivityForResult(Activity.java:3190)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at android.app.Activity.startActivity(Activity.java:3297)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at com.TheGreensheet.GreensheetReader.MainActivity$1.onItemClick(MainActivity.java:47)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at android.widget.AdapterView.performItemClick(AdapterView.java:292)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at android.widget.AbsListView$1.run(AbsListView.java:3168)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at android.os.Handler.handleCallback(Handler.java:605)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at android.os.Handler.dispatchMessage(Handler.java:92)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at android.os.Looper.loop(Looper.java:137)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at android.app.ActivityThread.main(ActivityThread.java:4424)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at java.lang.reflect.Method.invokeNative(Native Method)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at java.lang.reflect.Method.invoke(Method.java:511)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
      06-28 16:09:22.368: E/AndroidRuntime(1702):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:28:53.223

我是个白痴。请注意，在 onItemCLick 处理程序中，在选择 1 的情况下，onSearchRequested() 被调用然后跳出开关，最终调用 c.startActivity(i)，并且 i 被初始化为 null。这就是空指针最终来自的地方。对新手的错误感到抱歉。-詹姆士

# python - numpy的数据转换错误

> ID：11247888
> 
> 赞同：0
> 
> 时间：2012-06-28T15:26:02.700
> 
> 标签：python, arrays, numpy

我正在使 mu 代码更好，我看到 numpy 已经内置了一些非常漂亮的功能。但是，以下代码会引发我无法解释的错误：

```
data = numpy.genfromtxt('table.oout',unpack=True,names=True,dtype=None)

real_ov_data=np.float32(data['real_overlap'])
ana_ov_data= np.float32(data['Analyt_overlap'])
length_data =np.float32(data['Residues'])

plot(length_data,real_ov_data,label="overlapped Peaks, exponential function",marker="x", markeredgecolor="blue", markersize=3.0, linestyle=" ",color="blue")
plot(length_data,ana_ov_data,label="expected overlapped Peaks",marker="o", markeredgecolor="green", markersize=3.0, linestyle=" ",color="green") 
```

抛出错误

```
Traceback (most recent call last):
  File "length_vs_overlap.py", line 52, in <module>
    real_ov_data=np.float32(data['real_overlap'])
ValueError: invalid literal for float(): real_overlap
>Exit code: 1 
```

当我试图阅读以下文件时：

```
 'Residues'  'Analyt_overlap'  'anz_analyt_overlap'  'real_overlap' 
  21          1.2502        29            0.0000  
  13          1.0306        25            0.0000  
  56          5.8513        84            2.8741  
  190         68.0940       329           28.4706 
  54          5.4271        83            2.4999 
```

我究竟做错了什么？我的一段代码应该够简单吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:12:08.763

您要么重复了标题行，要么将 指定`names`为列表。

这导致每列都被读取为以列标题开头的字符串类型。

# iis-7 - 来自服务（IIS 7）的用户会话（0以外）中的CreateProcessAsUser

> ID：11247896
> 
> 赞同：1
> 
> 时间：2012-06-28T15:26:27.803
> 
> 标签：iis-7, windows-server-2008, createprocessasuser

我的设置是：

*   视窗服务器 2008、IIS 7

我想完成的事情：

*   IIS 7 从我的网站接收到执行一些 3D 操作（在 WPF 中）的请求，最后 IIS 7 应该渲染图像并将其存储在磁盘上的某个位置以加载到网站中

我所知道的以及我已经测试过的：

*   IIS 7 在 Windows Server 2008 上的会话 0 中作为服务运行
*   会话 0 中的任何服务都无法访问视频驱动程序，即会话 0 中的任何服务都无法执行任何渲染任务（此处解释：[会话 0 隔离](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756986.aspx)）
*   微软在另一篇论文中建议在用户会话中创建一个进程（通过 CreateProcessAsUser）以成功执行渲染。

到目前为止我取得的成就：

*   LogonUser 运行良好
*   CreateProcessAsUser 运行良好

唯一（但重要的）部分不起作用：当我使用用户名和密码登录并以用户身份创建进程时，该进程仍处于会话 0 中，因此渲染失败。用户成功登录（我检查了它）。根据微软的说法，它必须可以在用户会话（而不是会话 0）中创建一个进程。

*   **如何在 0 以外的其他会话中以用户身份创建进程？**
*   **我是否必须自己创建一个新会话或类似的东西？**

谢谢！

我的代码：

```
 PROCESS_INFORMATION processInfo = new PROCESS_INFORMATION();
        STARTUPINFO startInfo = new STARTUPINFO();
        Boolean bResult = false;
        IntPtr hToken = IntPtr.Zero;
        UInt32 uiResultWait = WAIT_FAILED;
        int processCreationFlags;

        try
        {
            // Logon user
            bResult = Win32.LogonUser(
                strName,
                strDomain,
                strPassword,
                Win32.LogonType.LOGON32_LOGON_BATCH,
                Win32.LogonProvider.LOGON32_PROVIDER_DEFAULT,
                out hToken
            );
            if (!bResult) { throw new Exception("Logon error #" + Marshal.GetLastWin32Error()); }

            CheckPrivileges(hToken);

            // Create process
            startInfo.cb = Marshal.SizeOf(startInfo);
            startInfo.lpDesktop = null;
            startInfo.dwFlags = Convert.ToInt32(STARTF.STARTF_USESHOWWINDOW);
            startInfo.wShowWindow = Convert.ToInt16(SHOWWINDOW.SW_HIDE);
            processCreationFlags = Convert.ToInt32(CreateProcessFlags.CREATE_BREAKAWAY_FROM_JOB);

            retStr += "command line: " + strCommand + Environment.NewLine;
            bResult = Win32.CreateProcessAsUser(
                hToken,
                null, //application name
                strCommand, //command line
                IntPtr.Zero, //process attributes
                IntPtr.Zero, //thread attributes
                false, //inherit handles
                processCreationFlags, //process creation flags
                IntPtr.Zero, //environment
                curDir, //current directory
                ref startInfo, 
                out processInfo
            );
            if (!bResult) { throw new Exception("CreateProcessAsUser error #" + Marshal.GetLastWin32Error()); }

            // Wait for process to end
            uiResultWait = WaitForSingleObject(processInfo.hProcess, INFINITE);
            if (uiResultWait == WAIT_FAILED) { throw new Exception("WaitForSingleObject error #" + Marshal.GetLastWin32Error()); }
        }
        finally
        {
            // Close all handles
            CloseHandle(hToken);
            CloseHandle(processInfo.hProcess);
            CloseHandle(processInfo.hThread);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:19:54.283

我不是该领域的专家，只是进行了一些搜索，似乎您实际上无法更改会话级别，而是您应该拥有一个启用了自动登录的用户并与在该用户下运行的进程进行通信。

这似乎是最有用的：[Windows 2008 RenderFarm Service: CreateProcessAsUser "Session 0 Isolation" and OpenGL](https://stackoverflow.com/questions/2464182/windows-2008-renderfarm-service-createprocessasuser-session-0-isolation-and-o)

# javascript - 修改 PDO 返回的 JSON 对象

> ID：11247897
> 
> 赞同：1
> 
> 时间：2012-06-28T15:26:28.347
> 
> 标签：javascript, json, pdo, handlebars.js

我正在尝试返回使用带有把手的 JSON 对象。制作一个小待办事项列表来学习如何使用它。

我的 PHP API 如下：

```
$query = "SELECT *
          FROM table";
try
{
    $db = getConnection();
    $response = $db->query($query);
    $todo = $response->fetchAll(PDO::FETCH_OBJ);
    $bdd = null;
    echo json_encode($todo);
} 
```

然后它返回类似：

```
[{"id":"1","todo":"Do something","who":"Me","is_done":"0"},{"id":"2","todo":"Learn JSON","who":"Me","is_done":"0"}] 
```

但我实际上需要它是这样的：

```
{todos: [{"id":"1","todo":"Do something","who":"Me","is_done":"0"},{"id":"2","todo":"Learn JSON","who":"Me","is_done":"0"}]} 
```

我尝试在我的 PHP API 中添加而不是`echo json_encode($todo)`

```
echo '{todos: ' . json_encode($todo) . '}'; 
```

但它不起作用。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:30:19.990

您的“todos”属性名称必须用双引号括起来。

```
echo '{"todos": ' . json_encode($todo) . '}'; 
```

尽管 JavaScript 语法允许属性名称不带引号，但严格的 JSON 坚持使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:33:20.547

虽然 Pointy 的答案是正确的（可能想了解[JSON](http://json.org/)），但您也可以这样做：

```
echo json_encode(array('todos' => $todo)); 
```

PHP 关联数组将作为对象序列化为 JSON（[手册中的 json_encode() 示例](http://php.net/manual/en/function.json-encode.php#example-3449)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T15:31:34.140

尝试：

```
 echo '{ "todos" : ' . json_encode($todo) . '}'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T15:33:34.760

试试这个：

```
echo json_encode(array( 'todos' => $todo )); 
```

与其自己制作 JSON，不如制作您想要的结构，然后让 PHP 为您制作 JSON。

# css - hr 使父 div 在 IE7 中调整为 100%

> ID：11247899
> 
> 赞同：1
> 
> 时间：2012-06-28T15:26:37.337
> 
> 标签：css, html, internet-explorer-7, internet-explorer-6

我有以下 div

```
<body>
<span style="border:1px solid red; display:inline-block">
    Some text<br />
    <hr />
    some more text
</span>
</body> 
```

在“普通”网络浏览器中，计算 div 的宽度以适合文本。并且`hr`是 100% 的 div。 ![在此处输入图像描述](../Images/9432d2cb94a5ee1ee0ba44a76e8c914b.png)

但在 IE7 中，`hr`导致 div 扩展到正文的 100%。 ![在此处输入图像描述](../Images/27360307e84d6e2eb54398993e3e02c5.png)

我需要在某处添加任何聪明的 css 以使其在 IE7 中正常运行吗？

请注意，我无法设置任何固定宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:56:02.507

在 IE6/7 中，`display:inline-block`仅适用于默认内联的元素（例如，span）。因此，如果您尝试将 div 设置为`display:inline-block`，它在 IE6/7 中将不起作用。

内联元素会将自身调整到其内容的宽度。一个 inline-block 元素默认会做同样的事情，如果它没有给出明确的宽度。如果 hr 是 100%（其父级的 100%，而子级的 100%），则 hr 宽度的循环定义可能无法按预期工作（什么的 100%？本身的 100%） .

为了避免在某些浏览器（尤其是 IE6/7）中可能无法按预期工作的宽度的循环定义，hr 的容器（div、span 或其他）应该具有定义的宽度（以 px、% 或em) 或 hr 本身应具有明确的宽度（以 px 或 em 为单位）。否则，宽度不会以任何可识别的方式定义，默认情况下由浏览器决定要做什么。

如果您无法设置任何宽度，则可能会排除使用`hr`标签。根据我运行的测试，这些选项对于 CSS 解决方案也不是很好（没有设置宽度）。

**编辑：**

我认为在不设置宽度或不依赖 JavaScript 或 jQuery 的情况下执行此操作的唯一方法是，是否可以在每一行文本之后放置一条水平线（包括任何环绕到下一行的长段落，如果有的话） . 在这种情况下，您可以将 bg 图像添加到包含水平线的容器中，该水平线的增量等于文本的行高，以等于行高的垂直偏移量显示，因此行不会出现在顶部的第一行文本。

HTML

```
<div class="main">
    <p>This is the first line.<br/>
       This is the second line.<br/>
       This is a long line that will wrap around to the next line if the container is not very wide.
    </p>
</div> 
```

CSS

```
.main {
    background: url(image.png) repeat-x left 15px;
}
p {
    font-size: 12px;
    line-height: 15px;
} 
```

[jsfiddle 演示](http://jsfiddle.net/myUGt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:00:03.663

在博客上找到了一个方法。原件需要`modernizer.js`。我已经编辑过了。

HTML： `<div class="hrdemo"><hr /></div>`

CSS： `.hrdemo hr { display:none }`

但是，如果您`div.hrdemo`在某个浮动容器内；您可能必须为其分配固定宽度（对于 IE7）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:03:22.070

标签的`width`属性`<hr>`已被弃用，因此您的样式选项仅限于`<hr>`标签。

*   [15.3 规则：人力资源要素](http://www.w3.org/TR/html4/present/graphics.html#edef-HR)
*   [属性索引](http://www.w3.org/TR/html4/index/attributes.html)

一种更现代的方法是使用 a 的`border`属性`<div>`。

*IE 7 渲染的图像：*

![在此处输入图像描述](../Images/dd334f342495668c64ac7deb831dc536.png)

*Chrome 19 渲染的图像：*

![在此处输入图像描述](../Images/a40e7630d4561a66aa9ca6920e54c766.png)

*   [jsFiddle 演示](http://jsfiddle.net/4QEu9/2/)

**HTML**

```
<body>
  <div style="border:1px solid red; float:left;">
    <p>
      Some text
    </p>
    <p class="border-top">
      some more text
    </p>
  </div>
</body>​​​ 
```

**CSS**

```
​.border-top{
  border-top:#000 1px solid;
  padding-top:1em;
}​ 
```

**注意：** IE 6 & 7 不支持`display:inline-block`，所以你可能需要`float:left`改用。下面的文章比较了上述属性的使用：

*   [CSS 显示：inline-Block：为什么会摇滚，为什么会烂](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

# asp.net-mvc - 带有自动映射器的映射

> ID：11247904
> 
> 赞同：-2
> 
> 时间：2012-06-28T15:27:01.307
> 
> 标签：asp.net-mvc, automapper

我有一个名为 word 的模型。

这是我的文字模型

```
public class Word : BaseFieldsTables
{
    int ID { get; set; }
    string Name { get; set; }
    Guid UniqID { get; set; }
    DateTime CreatedDate { get; set; }
    byte[] RowVersion { set; get; }
    public string Text { get; set; }
    public virtual Category Category { get; set; }
    public int CategoryID { get; set; }
    public virtual Language Language { get; set; }
    public int LanguageID { get; set; }

    public virtual ICollection<Picture> Pictures { get; set; }

    [InverseProperty("MainWord")]
    public virtual ICollection<RelationshipBetweenWords> MainWords { get; set; }

    [InverseProperty("RelatedWord")]
    public virtual ICollection<RelationshipBetweenWords> RelatedWords { get; set; }
} 
```

单词有一个类别和语言，并且......

例如这是我的语言模型

```
 public class Language : BaseFieldsTables
    {
       int ID { get; set; }
        string Name { get; set; }
        Guid UniqID { get; set; }
        DateTime CreatedDate { get; set; }
        byte[] RowVersion { set; get; }
        public virtual ICollection<Word> Words { get; set; }
    } 
```

我有这样的单词视图模型

```
public class WordViewModel

    public string Name { get; set; }

    public IList<SelectListItem> Categories { set; get; }

    [HiddenInput(DisplayValue = false)]
    public int SelectedCategoryID { set; get; }

    public IList<SelectListItem> Languages { set; get; }

    [HiddenInput(DisplayValue = false)]
    public int SelectedLanguageID { set; get; }
} 
```

这是我的控制器

```
public ActionResult Index(
    {
        IList<Word> list = _wordService.GetAll();

    } 
```

我想用语言名和类别名称将所有单词和映射（自动映射器）到我的 WordViewModel 并返回到我的视图中，如果我必须更改我的 wordviewmodel 或...以及如何映射.tnx，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:49:44.550

哦，我找到了

```
public ActionResult Index()
        {
            var orders = _respository.GetAll();

            AutoMapper.Mapper.CreateMap<Order, OrderDto>()
                .ForMember(dest => dest.OrderNumber, opt => opt.MapFrom(src => src.OrderNo))
                .ForMember(dest => dest.OrderItemsDto, opt => opt.Ignore());

            var model = AutoMapper.Mapper.Map<IEnumerable<Order>, IEnumerable<OrderDto>>(orders);

            return View(model);
        }
//Razor View Code
<h2>Orders</h2>
<table>
    <tr>
        <th>Order Number</th>
        <th>Name</th>
        <th>Total</th>
    </tr>
@foreach (var item in Model)
{
    <tr>
        <td>@item.OrderNumber</td>
        <td>@item.CustomerName</td>
        <td>$@item.Total</td>
    </tr>
}
</table> 
```

# php - 在 PHP 中发送和接收短信

> ID：11247907
> 
> 赞同：5
> 
> 时间：2012-06-28T15:27:07.293
> 
> 标签：php, sms

我有两个问题。

1.  我想从[PHP](http://en.wikipedia.org/wiki/PHP)网站向用户发送[短信](http://en.wikipedia.org/wiki/SMS)，提供有关他的订单的信息。我需要一条短信显示为“TD-COMPANY-NAME”，因为我们通常从一些大型电子商务网站获得它。我如何实现这一目标？任何指示这是如何完成的？我只是在谷歌上兜圈子。

2.  此外，还有其他几家运营商将以特定格式向应用程序发送短信，这些短信将被解析并在数据库中完成相应的更新。我如何实现这一目标？

注意：此应用程序旨在在印度本地工作。后端是 PHP 和[MySQL](http://en.wikipedia.org/wiki/MySQL)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T15:30:01.360

> 在 PHP 中发送和接收短信

查看[Nexmo](http://nexmo.com/)和[Twilio](http://twilio.com)。

我都用过。我认为 Twilio 的学习曲线较浅。但 Nexmo 提供*免费的*传入消息。因此，根据您的应用程序，这可能会发挥重要作用（例如，短信投票系统）。

两者都有出色的文档和 PHP 代码示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:35:04.537

如果您正在寻找一种围绕服务器构建的解决方案，该服务器使用您自己的基础设施（即使用 GSM 调制解调器）发送和接收 SMS，您真的应该看看[SMS Server Tools](http://smstools3.kekekasvi.com/)。它通过假脱机目录与您的应用程序交互（基本上，您编写一个格式化的文本文件，您希望将其发送到特定目录中，应用程序负责其余部分），设置简单且非常可靠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T09:18:33.697

试试 FrontlineSMS 怎么样，这也是一个很棒的工具，它不是少数国家独有的，也就是说，它支持所有国家。它也有很好的文档以及对 PHP POST 和 GET 方法的良好支持。

这是链接：[http ://www.frontlinesms.com/](http://www.frontlinesms.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T12:21:16.657

您可以编写自己的 PHP 代码通过串口 GSM 调制解调器发送和接收短信。与使用 SMS 网关或类似 Twilio 的解决方案相比，它会好得多。在这种情况下，您完全依赖他们，因为万一他们的服务中断，您的业务也将无缘无故地受到影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-17T22:04:53.383

您所指`TD-COMPANY-NAME`的通常称为`SenderId`, 或`Source`。[我们在所有API 调用](http://developers.wavecell.com)中都支持它。

例如，这个请求：

```
curl -X "POST" https://api.wavecell.com/sms/v1/amazing_hq/single \
    -u amazing:1234512345 \
    -H "Content-Type: application/json" \
    -d $'{ "source": "AmazingDev", "destination": "+6512345678", "text": "Hello, World!" }' 
```

结果是： [![带有自定义 SenderId 的短信](../Images/9325fad4b3a2c01450a8add6434fea58.png)](https://i.stack.imgur.com/xF7OT.png)

关于你问题的第二部分，我认为使用多个不同的来源没有问题，直到它们都没有冒犯性和真实性（不要试图模仿其他品牌名称）。

# eclipse - GNATBENCH 2.6 Install on Eclipse -- Missing File . . .

> ID：11247910
> 
> 赞同：1
> 
> 时间：2012-06-28T15:27:15.380
> 
> 标签：eclipse, ada

Tried installing the new academic version of GNATBENCH on Eclipse (Helios) today. But it seems to find that a file is missing.

(I've notified AdaCore but I'd expect that it'll take a week for them to reply.)

Here's what she wrote :

*Cannot complete the install because one or more required items could not be found. Software being installed: GNATbench Integration with WindRiver Workbench 2.6.0.20111210 (com.adacore.gnatbench.windriver.feature.group 2.6.0.20111210) Missing requirement: GNATbench Integration with WindRiver Workbench 2.6.0.20111210 (com.adacore.gnatbench.windriver.feature.group 2.6.0.20111210) requires 'com.windriver.ide.ui 3.1.0' but it could not be found*

Anyone else with similar issue ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:47:35.520

您没有遵循 README.txt 中的安装说明。

请仅选择 Eclipse 插件，而不是 WindRiver Workbench 插件。

# sql - 没有主键的表的休眠注释 ID

> ID：11247911
> 
> 赞同：4
> 
> 时间：2012-06-28T15:27:15.527
> 
> 标签：sql, hibernate, hibernate-annotations

我有一张没有主键的表，也无法创建。我可以使用该表的三列构造一个唯一键。现在hibernate要求每个带注释的类都有一个id，我如何用我可以创建的唯一id来满足这个id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:36:13.837

如果它是[实体类型](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html)，那么您应该使用复合键。这可以通过将主键字段移动到单独的类并使用@Id 注释映射到实体类中来完成。

请参阅[将复合主键和外键映射到复合主键](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e2177)

如果它不是实体而是值类型，则应相应地映射它。请参阅[https://stackoverflow.com/a/1696146/324900](https://stackoverflow.com/a/1696146/324900)和[休眠中的实体和值类型](https://stackoverflow.com/q/8038552/324900)

# php - Connect to Foxpro with PHP using OLE DB driver

> ID：11247913
> 
> 赞同：0
> 
> 时间：2012-06-28T15:27:20.050
> 
> 标签：php, odbc, adodb, foxpro

I'm trying to connect to a Foxpro database using the OLE DB Driver

I downloaded the driver from [http://www.microsoft.com/en-us/download/details.aspx?id=14839](http://www.microsoft.com/en-us/download/details.aspx?id=14839) and installed it then create a php script

```
$conn = new COM("ADODB.Connection") or die("Cannot start ADO");
$conn->Open("Provider=vfpoledb.1;Data Source=C:\Opera3\Comp_I.DBC;Collating Sequence=machine"); 
```

This gives me the following error

> `Fatal error: Uncaught exception 'com_exception' with message '<b>Source:</b> ADODB.Connection<br/><b>Description:</b> Provider cannot be found. It may not be properly installed.' in C:\inetpub\wwwroot\test1.php:4 Stack trace: #0 C:\inetpub\wwwroot\test1.php(4): com->Open('Provider=vfpole...') #1 {main} thrown in C:\inetpub\wwwroot\test1.php on line 4`

Any help in getting this working would be much appreciated.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-28T11:19:51.910

按照要求

以所有用户的管理员身份从命令行卸载并重新安装，现在它可以工作了 -

# curl - Problems installing Meteor.com with curl

> ID：11247916
> 
> 赞同：1
> 
> 时间：2012-06-28T15:27:25.187
> 
> 标签：curl

Having problems using curl on a new Mac (OS 10.7.4), with curl 7.25.0 (i386-apple-darwin9.8.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5.

Worked fine on my previous system, but now I am receiving the error:

curl: (2) Failed initialization

Anytime I try to grab anything. For example:

curl www.example.com

Thanks.

# java - Create a custom ArrayAdapter on an android connected Google App Engine project

> ID：11247927
> 
> 赞同：0
> 
> 时间：2012-06-28T15:28:16.883
> 
> 标签：java, android

I having a crucial problem on deploying a custom arrayadapter on android connected google app engine project. Even though there are no errors while typing the code when I debug the application as an Android app with the emulator causes an error and the application stops. My custom adapter code is below and according the debugger there is `NullPointerException` after line 46\. What is this and how to fix it?

```
package com.cheapchase;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class MyListAdapter extends ArrayAdapter<ListItem>{

    Context context;
    int layoutResourceId;
    ListItem data[] = null;

    public MyListAdapter(Context context, int layoutResourceId, ListItem[] data){

        super(context,layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent){

        View row = convertView;
        ListHolder holder = null;

        if(row == null){

            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new ListHolder();
            holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
            holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
        }
        else
        {
            holder = (ListHolder)row.getTag();
        }

        ListItem listrow = data[position];
        holder.txtTitle.setText(listrow.title);
        holder.imgIcon.setImageResource(listrow.icon);

        return row;
    }

    static class ListHolder
    {
        ImageView imgIcon;
        TextView txtTitle;
    }

} 
```

This is the activity calling the adapter:

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.ListView;

public class StoresList extends Activity{

    /**
     * The current context.
     */

    private ListView listView1;

    @Override
    public void onCreate(Bundle savedInstanceState){

        super.onCreate(savedInstanceState);
        setContentView(R.layout.store_list);
    }

    public void onResume(){

        super.onResume();

        ListItem storelist[] = new ListItem[]{
                new ListItem(R.drawable.androidmsg, "test1"),
                new ListItem(R.drawable.androidmsg, "test2")
        };

        MyListAdapter adapter = new MyListAdapter(this, R.layout.listview_item_row, storelist);

        listView1 = (ListView)findViewById(R.id.listView1);

        /*View header = (View)getLayoutInflater().inflate(R.layout.listview_item_header, null);
        listView1.addHeaderView(header);*/

        listView1.setAdapter(adapter);
    }

// **** end of file 
} 
```

This is the error log...

```
06-28 15:16:44.687: W/dalvikvm(1584): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-28 15:16:44.706: E/AndroidRuntime(1584): FATAL EXCEPTION: main
06-28 15:16:44.706: E/AndroidRuntime(1584): java.lang.RuntimeException: Unable to resume activity {com.cheapchase/com.cheapchase.StoresList}: android.app.SuperNotCalledException: Activity {com.cheapchase/com.cheapchase.StoresList} did not call through to super.onResume()
06-28 15:16:44.706: E/AndroidRuntime(1584):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2120)
06-28 15:16:44.706: E/AndroidRuntime(1584):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2135)
06-28 15:16:44.706: E/AndroidRuntime(1584):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1668)
06-28 15:16:44.706: E/AndroidRuntime(1584):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-28 15:16:44.706: E/AndroidRuntime(1584):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-28 15:16:44.706: E/AndroidRuntime(1584):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-28 15:16:44.706: E/AndroidRuntime(1584):     at android.os.Looper.loop(Looper.java:130)
06-28 15:16:44.706: E/AndroidRuntime(1584):     at android.app.ActivityThread.main(ActivityThread.java:3683)
06-28 15:16:44.706: E/AndroidRuntime(1584):     at java.lang.reflect.Method.invokeNative(Native Method)
06-28 15:16:44.706: E/AndroidRuntime(1584):     at java.lang.reflect.Method.invoke(Method.java:507)
06-28 15:16:44.706: E/AndroidRuntime(1584):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-28 15:16:44.706: E/AndroidRuntime(1584):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-28 15:16:44.706: E/AndroidRuntime(1584):     at dalvik.system.NativeStart.main(Native Method)
06-28 15:16:44.706: E/AndroidRuntime(1584): Caused by: android.app.SuperNotCalledException: Activity {com.cheapchase/com.cheapchase.StoresList} did not call through to super.onResume()
06-28 15:16:44.706: E/AndroidRuntime(1584):     at android.app.Activity.performResume(Activity.java:3834)
06-28 15:16:44.706: E/AndroidRuntime(1584):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2110)
06-28 15:16:44.706: E/AndroidRuntime(1584):     ... 12 more
06-28 15:17:19.967: W/ActivityThread(1617): Application com.cheapchase is waiting for the debugger on port 8100... 
```

Thank you for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:50:23.007

你从来没有设置标签值，所以当你这样做时，`holder = (ListHolder)row.getTag();`它会返回`null`.

```
 holder = new ListHolder();
        holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
        holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
        row.setTag(holder);  //<--- missing this 
```

编辑：除了现在你的日志抱怨 SuperNotCalled。

# python - f2py -- 防止数组重新排序

> ID：11247934
> 
> 赞同：8
> 
> 时间：2012-06-28T15:28:32.793
> 
> 标签：python, interface, fortran, f2py

我有一个数组，它通过 f2py 从 fortran 子例程中读取为一维数组。然后在 python 中，该数组被重塑：

```
a=np.zeros(nx*ny*nz)
read_fortran_array(a)
a=a.reshape(nz,ny,nx)  #in fortran, the order is a(nx,ny,nz), C/Python it is reversed 
```

现在我想将该数组作为 3D 数组传回 fortran。

```
some_data=fortran_routine(a) 
```

问题是 f2py 在传递给 fortran_routine 之前一直试图转置 a。fortran 例程如下所示：

```
subroutine fortran_routine(nx,ny,nz,a,b)
real a
real b
integer nx,ny,nz
!f2py intent(hidden) nx,ny,nz
!f2py intent(in) a
!f2py intent(out) b
...
end subroutine 
```

如何防止所有来回转调？（我很高兴在两种语言中使用不同的数组索引约定）。

**编辑**

似乎`np.asfortranarray`或`np.flags.f_contiguous`应该在解决方案中包含某些部分，我似乎无法弄清楚那是什么部分（或者可能是 a`ravel`后跟 a `reshape(shape,order='F')`？

**编辑**

看来这篇文章引起了一些混乱。这里的问题是`f2py`试图保留*索引方案*而不是*内存布局*。因此，如果我有一个带有 shape 的 numpy 数组（按 C 顺序）`(nz, ny, nx)`，那么 f2py 会尝试使该数组也具有`(nz, ny, nx)`fortran 中的形状。如果 f2py 保留*内存布局*，则数组将`(nz, ny, nx)`在 python 和`(nx, ny ,nz)`fortran 中具有形状。我想保留内存布局。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T15:55:02.473

Fortran 不会反转轴顺序，它只是将数据存储在内存中，与 C/Python 不同。您可以告诉 numpy 以 Fortran 顺序存储数据，这与反转轴不同。

我会这样重写你的代码

```
a=np.zeros(nx*ny*nz)
read_fortran_array(a)
a=a.reshape(nx,ny,nz, order='F') # It is now in Fortran order 
```

现在， f2py 在传递时不会尝试重新排序数组。

作为旁注，这也将起作用

```
a=a.reshape(nx,ny,nz) # Store in C order 
```

因为在幕后，当您将 C 顺序数组传递给 Fortran 例程时，f2py 会执行这些操作：

```
a=a.flatten() # Flatten array (Make 1-D)
a=a.reshape(nx,ny,nz, order='F')  # Place into Fortran order 
```

当然，从一开始就以 Fortran 顺序存储更有效。

一般来说，除非您有性能关键部分，否则您不必担心数组排序，因为 f2py 会为您处理这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T12:31:06.617

看起来答案相当简单：

```
b=np.ravel(a).reshape(tuple(reversed(a.shape)),order='F') 
```

有效，但显然，这与以下内容相同：

```
b=a.T 
```

因为转置返回一个视图并且快速查看`b.flags`比较`a.flags`表明这就是我想要的。（`b.flags`是 F_CONTIGUOUS）。

# android - 发布android，无法联系网络服务

> ID：11247938
> 
> 赞同：0
> 
> 时间：2012-06-28T15:28:38.723
> 
> 标签：android, wcf, wcf-rest

我正在编写一个必须在网络服务上发布一些数据的应用程序。为此，我使用[了该教程](http://lukencode.com/2010/04/27/calling-web-services-in-android-using-httpclient/)。

“get”方法有效，但帖子无效。

网络服务代码：

```
[OperationContract]
[WebInvoke(Method = "POST",
ResponseFormat = WebMessageFormat.Json,
RequestFormat = WebMessageFormat.Json,
UriTemplate = "picture")]
public void UploadPicture(RReport report)
{
    if(report == null)
        throw new WebFaultException<string>("Bad parameter", HttpStatusCode.BadRequest);

    //other stuff
} 
```

网络服务的预期应该是这样的：

> 以下是一个示例请求 Json 正文：
> 
> { "PictureBase64":"字符串内容" }

现在是android部分：

```
//Localhost URI
String url = "http://10.0.2.2:51136/API/picture";
RestClient client = new RestClient(url);
try {
    Report r = new Report("ok");

    //Convert in json
    String report = new Gson().toJson(r);
    //What shows the log => {"PictureBase64":"ok"}
    Log.i("Json", report);
    //Add the param
    client.AddParam("report", report);

    //set the header
    client.AddHeader("Content-Type","application/json");
    client.Execute(RequestMethod.POST);
} catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

 String response = client.getResponse();
 Log.i("Response", response); 
```

现在来自android部分的错误：

```
?<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Request Error</title>
        <style>BODY { color: #000000; background-color: white; font-family: Verdana; margin-left: 0px; margin-top: 0px; } #content { margin-left: 30px; font-size: .70em; padding-bottom: 2em; } A:link { color: #336699; font-weight: bold; text-decoration: underline; } A:visited { color: #6699cc; font-weight: bold; text-decoration: underline; } A:active { color: #336699; font-weight: bold; text-decoration: underline; } .heading1 { background-color: #003366; border-bottom: #336699 6px solid; color: #ffffff; font-family: Tahoma; font-size: 26px; font-weight: normal;margin: 0em 0em 10px -20px; padding-bottom: 8px; padding-left: 30px;padding-top: 16px;} pre { font-size:small; background-color: #e5e5cc; padding: 5px; font-family: Courier New; margin-top: 0px; border: 1px #f0f0e0 solid; white-space: pre-wrap; white-space: -pre-wrap; word-wrap: break-word; } table { border-collapse: collapse; border-spacing: 0px; font-family: Verdana;} table th { border-right: 2px white solid; border-bottom: 2px white solid; font-weight: bold; background-color: #cecf9c;} table td { border-right: 2px white solid; border-bottom: 2px white solid; background-color: #e5e5cc;}</style>
    </head>
    <body>
        <div id="content">
        <p class="heading1">Request Error</p>
        <p xmlns="">The server encountered an error processing the request. Please see the <a rel="help-page" href="http://10.0.2.2:51136/API/help">service help page</a> for constructing valid requests to the service.</p>
        </div>
    </body>
</html> 
```

编辑：调用我的网络服务的新方法：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost postRequest = new HttpPost(myWebservice);

StringEntity input = new StringEntity(myJson);
input.setContentType("application/json");
postRequest.setEntity(input);

HttpResponse response = httpClient.execute(postRequest); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:38:48.423

您将内容类型设置为 JSON，但您没有发布 JSON，您发布的是键值对，其中值是字符串（恰好是 JSON，但这无关紧要）。您的 Web 服务需要 JSON 正文还是表单数据？

假设您要发布参数，而不是 JSON 正文，请将您的 mime 类型设置为: `application/x-www-form-urlencoded`，并确保您正在对参数进行 URL 编码（也许 restlet 会为您执行此操作，我不确定）。

另一方面，如果您实际上只是想发布 JSON 正文，请保留 mime 类型，然后执行类似的操作，

```
StringRepresentation sr = new StringRepresentation(myJsonString);
Representation rep = client.post(); 
```

另外，假设这不能解决您的问题，最好知道来自服务器的状态代码。404？400？403？假设您使用的 Web 服务返回正确的代码，它可能对找到根本原因非常有帮助。

# android - 飞行模式的 Settings.system.putInt() 不起作用

> ID：11247941
> 
> 赞同：1
> 
> 时间：2012-06-28T15:28:49.287
> 
> 标签：android

实际上在我的项目中，我想自动更改飞行模式和自动旋转设置，并且我尝试了 stakcoverflow 中的许多链接，以及许多其他网站

我正在使用它，但在执行过程中没有发生任何事情。

飞行模式

```
public void actFlight(int val)
{
    switch(val)
    {
        case 0:
            Log.v("Mani", "Flight 0");
            Settings.System.putInt(context.getContentResolver(), Settings.System.AIRPLANE_MODE_ON, 1);
            break;

        case 1:
            Log.v("Mani", "Flight 1");
            Settings.System.putInt(context.getContentResolver(), Settings.System.AIRPLANE_MODE_ON, 0);
            break;

        case 2:
            Log.v("Mani", "Flight 2");
            boolean isEnabled = Settings.System.getInt(context.getContentResolver(), Settings.System.AIRPLANE_MODE_ON, 0) == 1;
            // toggle airplane mode
            Settings.System.putInt(context.getContentResolver(), Settings.System.AIRPLANE_MODE_ON, isEnabled ? 0 : 1);
            break;
    }
} 
```

val 为 0、1 或 2

0 开启飞行模式 1 关闭飞行模式 2 切换飞行模式切换

我曾经像上面那样更改自动旋转设置，它工作得很好，但我无法切换飞行模式，

而且我还与其他一些示例进行了多次比较，没有显示错误，也没有更改设置……我该怎么办……

注意：我在 SERVICE 中定义并调用了这个函数（还有自动旋转）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:41:14.557

您需要发送广播`Intent.ACTION_AIRPLANE_MODE_CHANGED`并将您的代码更改为：

```
boolean isEnabled = Settings.System.getInt(
                paramContext.getContentResolver(), 
                  Settings.System.AIRPLANE_MODE_ON, 0) == 1;
        if(isEnabled==true)
        {
            Settings.System.putInt(
                    paramContext.getContentResolver(),
                  Settings.System.AIRPLANE_MODE_ON, isEnabled ? 0 : 1);

            // Post an intent to reload
            Intent intent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
            intent.putExtra("state", !isEnabled);
            paramContext.sendBroadcast(intent);
        }
        else
        {
            Settings.System.putInt(
                    paramContext.getContentResolver(),
                  Settings.System.AIRPLANE_MODE_ON, isEnabled ? 0 : 1);

            // Post an intent to reload
            Intent intent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
            intent.putExtra("state", !isEnabled);
            paramContext.sendBroadcast(intent);
        } 
```

**注意 ::-** 确保您在 manifest.xml 中拥有这些权限：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS"/>
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/>
</manifest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:43:01.500

您是否在您的 prj 清单文件中添加了以下权限。

```
 <uses-permission android:name="android.permission.WRITE_SETTINGS"/>
  <uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/> 
```

# c# - connect localhost from another machine

> ID：11247942
> 
> 赞同：0
> 
> 时间：2012-06-28T15:28:57.123
> 
> 标签：c#, asp.net, asp.net-mvc, mobile

Is there anyway i can navigate to a website i develop on my computer from a smartphone connected to the same network? the site is running on localhost, can I make a bridge or something like that?

thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:32:17.187

我认为如果您直接使用您的 IP 作为网站名称，则可以。例如在 TOMCAT 中，所有站点都是 localhost:port/Project_name/filename.html

因此，如果您要使用`"http://your_ip:port/Project_name/filename.html"`，它应该可以工作。

请注意，防火墙可能会阻止它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:31:58.937

只要您的站点可用于网络，只需使用您的 PC 名称。

因此，如果您正在使用`http://localhost:12345`连接进行开发`http://muzE-PC:12345`（假设`muzE-PC`是您的计算机名称）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T15:32:05.290

而不是 localhost 使用，IP 地址。

确保该网站未被[Windows 防火墙](http://en.wikipedia.org/wiki/Windows_Firewall)阻止。

[ipconfig](http://en.wikipedia.org/wiki/Ipconfig)可用于确定 IP 地址。

在远程系统上，localhost 将引用该远程系统（而不是运行网站的系统）。

# python - Is there any way to find urls folders?

> ID：11247948
> 
> 赞同：0
> 
> 时间：2012-06-28T15:29:21.343
> 
> 标签：python, search, web-crawler

I am kind of asking a weird question, but i am making a spider and i am wondering is there any way to have folders of certain urls like:

```
 mysite.com/drupal
   mysite.com/wordpress
   mysite.com/abc 
```

is there any way to find for this kind of information???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:33:54.290

网站通常不会宣传其整个 URL 集。你可以尝试几件事：

1.  阅读主页，然后点击页面上的链接。每个都指向另一个页面，其中包含链接等。

2.  猜测常见的文件夹名称。

3.  如果站点有，请获取 robots.txt 文件。您应该是一个好公民，而不是检索它禁止您访问的页面。

4.  尝试获取该站点的站点地图，如下所示： http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=156184](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:32:51.827

如果你实现一个传统的蜘蛛，它只会遍历在内容中找到的 Urls。您可以在每个目录级别尝试字典或每个字符串检查，但这不会很好。

所以，简短的回答是“不”。

# c# - 在 IEnumerator 上循环 ， 有什么建议么

> ID：11247950
> 
> 赞同：0
> 
> 时间：2012-06-28T15:29:27.723
> 
> 标签：c#, linq, ienumerable

我有一种情况，循环遍历 LINQ 的结果让我很紧张。那么这是我的场景：

我有一个来自数据库的 DataTable，我从中获取数据：

```
var results = from d in dtAllData.AsEnumerable()
              select new MyType
              {
                  ID = d.Field<Decimal>("ID"),
                  Name = d.Field<string>("Name")
              } 
```

根据排序顺序进行排序后：

```
if(orderBy != "")
{
string[] ord = orderBy.Split(' ');
if (ord != null && ord.Length == 2 && ord[0] != "")
                        {
                            if (ord[1].ToLower() != "desc")
                            {
                                results = from sorted in results
                                          orderby GetPropertyValue(sorted, ord[0])
                                          select sorted;
                            }
                            else
                            {
                                results = from sorted in results
                                          orderby GetPropertyValue(sorted, ord[0]) descending
                                          select sorted;
                            }
                        }
} 
```

GetPropertyValue 方法如下：

```
private object GetPropertyValue(object obj, string property)
    {
        System.Reflection.PropertyInfo propertyInfo = obj.GetType().GetProperty(property);
        return propertyInfo.GetValue(obj, null);
    } 
```

在此之后，我为第一页取出 25 条记录，例如：

```
results = from sorted in results
          .Skip(0)
          .Take(25)
          select sorted; 
```

到目前为止一切进展顺利，现在我必须将此结果传递给一个方法，该方法将对数据进行一些操作并返回给我所需的数据，在这个方法中，当我想循环这 25 条记录时，它会很好足够的时间。我的方法定义是：

```
public MyTypeCollection GetMyTypes(IEnumerable<MyType> myData, String dateFormat, String offset) 
```

我已经尝试过`foreach`了，在我的机器上大约需要 8-10 秒，这条线需要时间：

```
foreach(var _data in myData) 
```

我尝试了while循环并且正在做同样的事情，我像这样使用它：

```
var enumerator = myData.GetEnumerator();
while(enumerator.MoveNext())
{
    int n = enumerator.Current;
   Console.WriteLine(n);
} 
```

这段代码需要时间`MoveNext`

比我去的`for`循环像：

```
int length = myData.Count();
for (int i = 0; i < 25;i++ )
{
     var temp = myData.ElementAt(i);
} 
```

此代码需要时间`ElementAt`

谁能指导我，我做错了什么。我在 VS 2008 中使用框架 3.5。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:40:28.923

编辑：我怀疑问题出在您的订购方式上。您正在使用反射首先获取然后*为每个记录*调用一个属性。即使您只想要前 25 条记录，它也必须首先调用*所有*记录才能对它们进行排序`GetPropertyValue`。

 *如果你可以在没有反射的情况下做到这一点会*更好*......但如果你*确实*需要使用反射，至少调用`Type.GetProperty()` *一次*而不是每条记录。

* * *

（在某些方面，这更多是为了帮助您更轻松地诊断问题，而不是完整的答案......）

正如 Henk 所说，这很奇怪：

```
results = from sorted in results
          .Skip(0)
          .Take(25)
          select sorted; 
```

你几乎可以肯定*真的*只是想要：

```
results = results.Take(25); 
```

（`Skip(0)`毫无意义。）

它实际上可能没有帮助，但它会使代码更易于调试。

下一个问题是我们实际上无法看到您的所有代码。你写过：

> 根据排序顺序进行排序后

...但你还没有展示你是如何执行订购的*。*

您应该向我们展示一个从`DataTable`使用到使用的完整示例。

改变你对序列的迭代方式将*无济于事*——无论哪种方式，它都会做同样的事情，真的——尽管令人惊讶的是，在你最后一次尝试中，它`Count()`显然工作得很快。坚持`foreach`- 但要弄清楚这将要做什么。LINQ 使用了很多惰性求值，如果你做了一些使事情变得非常繁重的事情，那*可能*就是问题所在。没有看到整个管道很难知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:38:17.460

问题是您的“结果” IEnumerable 实际上并没有被评估，直到它被传递到您的方法并被枚举。这意味着整个操作，从 dtAllData 获取所有数据，选择新类型（这发生在整个可枚举上，而不仅仅是前 25 个），最后是 take 25 操作，都发生在第一个枚举上的 IEnumerable （foreach，while，whatever）。

这就是为什么你的方法需要这么长时间。它实际上是在做一些在方法内部其他地方定义的工作。如果您希望在您的方法之前发生这种情况，您可以在方法之前执行“ToList()”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:19:43.137

您可能会发现采用混合方法更容易；

为了：

1）就地对数据表进行排序。最好在数据库级别执行此操作，但是，如果不能，则 DataTable.DefaultView.Sort 非常有效：

```
dtAllData.DefaultView.Sort = ord[0] + " " + ord[1]; 
```

这假设 ord[0] 是列名，而 ord[1] 是 ASC 或 DESC

2）按索引浏览DefaultView：

```
int pageStart = 0;

List<DataRowView> pageRows = new List<DataRowView>();

for (int i = pageStart; i < dtAllData.DefaultView.Count; i++ )
{
   if(pageStart + 25 > i || i == dtAllData.DefaultView.Count - 1) { break; //Exit if more than the number of pages or at the end of the rows }
   pageRows.Add(dtAllData.DefaultView[i]);
} 
```

...并从这个小得多的列表中创建您的对象...（我假设这些列称为 Id 和 Name，以及类型）

```
List<MyType> myObjects = new List<MyType>();

foreach(DataRowView pageRow in pageRows)
{
  myObjects.Add(new MyObject() { Id = Convert.ToInt32(pageRow["Id"]), Name = Convert.ToString(pageRow["Name"])});
} 
```

然后，您可以继续您正在做的其他事情。*

# c++ - 析构函数中的 mpfr_free_cache - 好主意？

> ID：11247959
> 
> 赞同：2
> 
> 时间：2012-06-28T15:29:49.503
> 
> 标签：c++, multithreading, malloc, arbitrary-precision, mpfr

`MPFRC++`我需要 C++ 程序中的任意精度，因此我在多精度浮点 C-library 上使用众所周知的轻量级 C++ 包装器`MPFR`。

我一直有记忆问题。即，`malloc`在 MPFR 功能内失败。（如果您有兴趣，请在底部显示一小段错误消息）。

MPFR 手册说（第 10 页）

> MPFR 函数可能会创建缓存，例如，在计算诸如 pi 之类的常量时，要么是因为用户直接调用了类似 mpfr_const_pi 的函数，要么是因为 MPFR 库本身在内部调用了这样的函数来计算某个其他函数。
> 
> 在任何时候，用户都可以使用 mpfr_free_cache 释放各种缓存。强烈建议在终止线程之前执行此操作...

我的程序是多线程的，所以我想我需要开始使用这个`mpfr_free_cache`.

**问题：** 我可以简单地放入包装类`mpfr_free_cache()`的*析构函数吗？*这是安全和良好的做法吗？是否足以解决问题？（假设我已经正确识别出内存泄漏）

例如

// mpreal.cpp - 包装器的实现

```
namespace mpfr {
class mpreal {
    mpreal::mpreal() 
    { 

        #if defined (MPREAL_HAVE_CUSTOM_MPFR_MALLOC)
            set_custom_malloc();
        #endif

        mpfr_init2(mp,default_prec); 
        mpfr_set_ui(mp,0,default_rnd);

        MPREAL_MSVC_DEBUGVIEW_CODE;
    }

    .......

    mpreal::~mpreal() 
    { 
        mpfr_clear(mp);
            mpfr_free_cache();    // ADD THIS TO DESTRUCTOR ?!?!
    }  

    ...... 
```

我不是专业的开发人员，所以我不知道这是否真的是解决问题的最佳方法。但我对进入每个 OpenMP 多线程区域/for-loop 并挤进一个`mpfr_free_cache()`...

注意：我已经使用线程安全选项构建了 MPFR。

* * *

这是错误消息，如果您有兴趣...

```
MPFR: Can't allocate memory (size=5864071192896)
[ccmb011:00985] *** Process received signal ***
[ccmb011:00985] Signal: Aborted (6)
[ccmb011:00985] Signal code:  (-6)
[ccmb011:00985] [ 0] /lib64/libpthread.so.0 [0x2b952b8cc7c0]
[ccmb011:00985] [ 1] /lib64/libc.so.6(gsignal+0x35) [0x2b952bb09265]
[ccmb011:00985] [ 2] /lib64/libc.so.6(abort+0x110) [0x2b952bb0ad10]
[ccmb011:00985] [ 3] /users/mmparks/MPFR/lib/libmpfr.so.4(mpfr_default_reallocate+0) [0x2b9529abebd0]
[ccmb011:00985] [ 4] /users/mmparks/MPFR/lib/libmpfr.so.4(mpfr_tmp_allocate+0x2e) [0x2b9529abec6e]
[ccmb011:00985] [ 5] /users/mmparks/MPFR/lib/libmpfr.so.4(mpfr_mul+0x69d) [0x2b9529a9c5bd]
[ccmb011:00985] [ 6] /users/mmparks/MY_PROGRAM 
```

错误消息中引用的代码：

```
 ret = malloc (size);
  if (ret == NULL)
    {
      fprintf (stderr, "MPFR: Can't allocate memory (size=%lu)\n",
               (unsigned long) size);
      abort ();
    } 
```

# shell - 如何从给定的时间戳中查找超过 N 天的文件

> ID：11247963
> 
> 赞同：5
> 
> 时间：2012-06-28T15:29:57.313
> 
> 标签：shell, unix, find, ksh

我想从 YYYYMMDDHH 格式的给定时间戳中查找超过 N 天的文件

我可以使用以下命令找到超过 2 天的文件，但这会找到当前时间的文件：

```
find /path/to/dir -mtime -2 -type f -ls 
```

假设我给出了`timestamp=2011093009`我想查找从 2011093009 开始超过 2 天的文件的输入。

一直在研究，但似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:37:33.577

[从这里](https://stackoverflow.com/questions/4946785/how-to-find-difference-days-between-to-dates.)提出答案之一，并按照[这里](https://stackoverflow.com/questions/4505673/bash-script-in-prey-project-formatted-incorrectly-nested-backtick-issue)的建议使用 $()

（根据 sputnick 的评论更新）

```
date=2011060109; find /home/kenjal/ -mtime $(( $(date +%Y%m%d%H) - $(date -d $date +%Y%m%d%H) )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T21:06:14.177

基本上，这是通过在一系列日期中查找文件来完成的......

我使用 perl 计算从今天到给定时间戳的天数，因为 GNU 日期在我的系统中不可用，所以`-d`不是一个选项。下面的代码接受格式为 YYYYDDMM 的日期。见下文：

```
#!/usr/bin/perl 
use Time::Local;

my($day, $month, $year) = (localtime)[3,4,5];
$month = sprintf '%02d', $month+1;
$day   = sprintf '%02d', $day;
my($currentYear, $currentDM) = ($year+1900, "$day$month");
my $todaysDate = "$currentYear$currentDM";
#print $todaysDate;

sub to_epoch {
    my ($t) = @_;  
    my ($y, $d, $m) = ($t =~ /(\d{4})(\d{2})(\d{2})/); 
    return timelocal(0, 0, 0, $d+0, $m-1, $y-1900);
}
sub diff_days {
    my ($t1, $t2) = @_;  
    return (abs(to_epoch($t2) - to_epoch($t1))) / 86400; 
}
print diff_days($todaysDate, $ARGV[0]); 
```

**注意：我不是 Perl 专家，这是我修改/编写的第一段代码。话虽如此，我确信在 Perl 中有更好的方法来完成上述任务

然后下面的 korn 脚本来执行我需要的。

```
#!/bin/ksh
daysFromToday=$(dateCalc.pl 20110111)
let daysOld=$daysFromToday+31
echo $daysFromToday "\t" $daysOld

find /path/to/dir/ -mtime +$daysFromToday -mtime -$daysOld -type f -ls 
```

我正在查找所有早于 的文件`+$daysFromToday`，然后将搜索范围缩小到比 新的天数`-$daysOld`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T03:13:00.673

```
#!/usr/bin/env bash

# getFiles arrayName olderDate newerDate [ pathName ]
getFiles() {
    local i
    while IFS= read -rd '' "$1"'[(_=$(read -rd "" x; echo "${x:-0}")) < $2 && _ > $3 ? ++i : 0]'; do 
        :
    done < <(find "${4:-.}" -type f -printf '%p\0%Ts\0')
}

# main date1 date2 [ pathName ]
main() {
    local -a dates files
    local x
    for x in "${@:1:2}"; do
        dates+=( "$(date -d "$x" +%s)" ) || return 1
    done

    _=$dates let 'dates[1] > dates && (dates=dates[1], dates[1]=_)'
    getFiles files "${dates[@]}" "$3"
    declare -p files
}

main "$@"

# vim: set fenc=utf-8 ff=unix ts=4 sts=4 sw=4 ft=sh nowrap et: 
```

这个 Bash 脚本需要两个日期和一个`find`. `getFiles`取一个数组名，两个日期之间有 mtimes 的文件被分配给该数组。此示例脚本仅打印数组。

需要最近的 Bash 和 GNU 日期。如果它真的必须是“N 天”，或者你没有 GNU 日期，那么就没有可能的解决方案。您需要使用不同的语言。没有任何 shell 可以使用标准实用程序来做到这一点。

从技术上讲，您可以使用和一些算术计算以天为单位的偏移量`printf '%(%s)T' ...`，但是如果没有 GNU 日期，则无法从时间戳中获取基准日期，所以恐怕您不走运。

**编辑**

我看到这个问题有一个 ksh 标签，在这种情况下我撒了谎，显然 ksh93 的 printf 接受 GNU date -d 之类的字符串。我不知道它是否便携，当然需要安装 ksh93 的系统。在这种情况下，您可以通过对上述脚本进行一些修改来做到这一点。

# asp.net - 无法读取配置部分“appSettings”，因为它缺少部分声明

> ID：11247966
> 
> 赞同：4
> 
> 时间：2012-06-28T15:30:07.100
> 
> 标签：asp.net, visual-studio, web-config

我正在清除 ASP.NET 临时 Internet 文件，我不小心删除了一些 .NET Framework 文件（我有 3.0、3.5、4.0 和 4.5），然后 Visual Studio 10 或 Visual Studio 2012 都没有打开。我修复了所有 .Net 框架的安装，并且能够再次打开 VS。尽管每个 Web 应用程序都是可构建的，但在尝试运行任何 Web 应用程序时，会出现 web.config appSettings 中的错误，尽管 appSettings 在删除事件之前工作正常。

我不知道出了什么问题以及如何解决这个问题。

> IIS 错误：
> 
> HTTP 错误 500.19 - 内部服务器错误
> 
> 无法访问请求的页面，因为该页面的相关配置数据无效。
> 
> 错误代码
> 
> 0x80070032
> 
> 配置错误
> 
> 无法读取配置部分“appSettings”，因为它缺少部分声明

配置文件：

```
 <?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="CID.DAL" type="CID.DAL.Bases.NetTiersServiceSection, CID.DAL" allowDefinition="MachineToApplication" restartOnExternalChanges="true"/>
    <section name="enterpriseLibrary.ConfigurationSource" type="Microsoft.Practices.EnterpriseLibrary.Common.Configuration.ConfigurationSourceSection, Microsoft.Practices.EnterpriseLibrary.Common, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="CIDPortal.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
      <section name="CIDWebsite.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
    </sectionGroup>
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="BLL.CRUWebReference" value=""/>
    <add key="BLL.CRULogoPath" value=""/>
    <add key="BLL.KBIXMLPath" value="D:\App\KBI\XML\{0}\"/>
    <add key="BLL.CRUWebReference_Staging" value=""/>
    <add key="BLL.KBIXMLPath_IMC" value="D:\App\KBI\XML\{0}\"/>
    <add key="BLL.KBIXMLPath_STP" value="D:\App\KBI\XML\{0}\"/>
    <add key="BLL.KBIWSLink" value=""/>
    <add key="BLL.KBIWSHMCLink" value=""/>
  </appSettings>
  <connectionStrings>
    <add name="CID.DAL.ConnectionString" connectionString="Password=;Persist Security Info=True;User ID=;Initial Catalog=;Data Source="/>
    <add name="CID_OldConnectionString" connectionString="Data Source=;Initial Catalog=;Integrated Security=True" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <CID.DAL defaultProvider="SqlNetTiersProvider">
    <providers>
      <add name="SqlNetTiersProvider" type="CID.DAL.SqlClient.SqlNetTiersProvider, CID.DAL.SqlClient" connectionStringName="CID.DAL.ConnectionString" providerInvariantName="System.Data.SqlClient" entityFactoryType="CID.DTO.EntityFactory" useEntityFactory="true" enableEntityTracking="true" enableMethodAuthorization="false" useStoredProcedure="true" defaultCommandTimeout="30"/>
    </providers>
  </CID.DAL>
  <system.web>
    <compilation debug="true">
      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>
    <authentication mode="Windows"/>
    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
    </pages>
    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" validate="false" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>
  </system.web>
  <startup>
    <supportedRuntime version="v2.0.50727"/>
  </startup>
  <system.codedom>
      <compilers>
        <compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" warningLevel="4">
          <providerOption name="CompilerVersion" value="v3.5"/>
          <providerOption name="WarnAsError" value="false"/>
      </compiler>
    </compilers>
  </system.codedom>
  <system.webServer>
      <validation validateIntegratedModeConfiguration="false"/>
    <modules>
      <remove name="ScriptModule"/>
      <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </modules>
    <handlers>
      <remove name="WebServiceHandlerFactory-Integrated"/>
      <remove name="ScriptHandlerFactory"/>
      <remove name="ScriptHandlerFactoryAppServices"/>
      <remove name="ScriptResource"/>
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptResource" verb="GET,HEAD" path="ScriptResource.axd" preCondition="integratedMode" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding appliesTo="v2.0.50727" xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:46:38.907

我遇到过几次这个问题，第一次是 .NET 从 IIS 中“取消注册”

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i 
```

修复了该问题（如果不使用 64 位机器，则替换您的 .NET 路径）

导致它的另一件事是当 IIS 应用程序池设置为 .NET 2.0 而不是 .NET 4 时，即使安装了 .NET。只需在 IIS 管理器中打开应用程序池并将其切换回来，它就可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-17T06:39:31.837

这可能意味着您`<appSettings>`在 web.config 中的位置错误，并且 IIS 认为这是一个自定义部分（因此**缺少部分声明**），请确保您拥有它，如下所示：

```
<configuration>
    <appSettings>
    </appSettings> 
```

# asp.net - 在控制器/视图中显示链接表项

> ID：11247967
> 
> 赞同：1
> 
> 时间：2012-06-28T15:30:09.433
> 
> 标签：asp.net, asp.net-mvc

我有一个房间类，它有 3 个链接表，，`Property`（`Sex`如男/女）`Stage`，。

我可以让`Index`控制器返回链接表项，方法是`Include`：

```
var rooms = db.Rooms.Include(r => r.Property).Include(r => r.Sex).Include(r => r.Stage); 
```

我不知道的是，如何在`Details`控制器中包含这些链接表项：

```
Room room = db.Rooms.Find(id); 
```

下面列出了完整的控制器：

```
 //
    // GET: /Room/

    public ActionResult Index()
    {
        var rooms = db.Rooms.Include(r => r.Property).Include(r => r.Sex).Include(r => r.Stage);
        return View(rooms.ToList());
    }

    //
    // GET: /Room/Details/5

    public ActionResult Details(int id = 0)
    {
        Room room = db.Rooms.Find(id);
        if (room == null)
        {
            return HttpNotFound();
        }
        return View(room);
    } 
```

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:41:47.270

在*包含*语句之后，您可以使用 LINQ 的*SingleOrDefault*方法，如下所示：

```
Room room = db.Rooms.Include(r => r.Property)
        .Include(r => r.Sex)
        .Include(r => r.Stage)
        .SingleOrDefault(r => r.Id = id); 
```

# php - 在一页内使用jQuery将变量发送到PHP页面

> ID：11247977
> 
> 赞同：0
> 
> 时间：2012-06-28T15:30:47.260
> 
> 标签：php, jquery, variables

在一个页面上，我有这段代码，它获取每个链接中的文本并提醒我文本中的内容。所以我知道该变量工作正常：

```
<ul class="subpages-menu">
<li ><a class="clienttext" href="<?php bloginfo( 'template_url' ); ?>/incs/clients.php">All</a></li>
<li ><a class="clienttext" href="<?php bloginfo( 'template_url' ); ?>/incs/clients.php">Accountancy</a></li>
<li ><a class="clienttext" href="<?php bloginfo( 'template_url' ); ?>/incs/clients.php">Education</a></li>
<li ><a class="clienttext" href="<?php bloginfo( 'template_url' ); ?>/incs/clients.php">Financial</a></li>
<li ><a class="clienttext" href="<?php bloginfo( 'template_url' ); ?>/incs/clients.php">Hospitality</a></li>
<li ><a class="clienttext" href="<?php bloginfo( 'template_url' ); ?>/incs/clients.php">Insurance</a></li>
<li ><a class="clienttext" href="<?php bloginfo( 'template_url' ); ?>/incs/clients.php">Marketing / PR / Branding</a></li>
<li ><a class="clienttext" href="<?php bloginfo( 'template_url' ); ?>/incs/clients.php">Other</a></li>
<li ><a class="clienttext" href="<?php bloginfo( 'template_url' ); ?>/incs/clients.php">Recruitment</a></li> 
```

```
<script type="text/javascript">jQuery(document).ready(function() {
jQuery('#clients-placeholder').html('<img class="preloader" src="<?php bloginfo( 'template_url' ); ?>/images/ajax-loader.gif" alt="Loading" title="Loading" />');
jQuery('#clients-placeholder').load('/all-clients .boxes-pages');
jQuery('.clienttext').click(function(e) {
    var clientText = jQuery(e.target).text();
    var url = jQuery(this).attr('href');
    alert (clientText);

    jQuery.post('<?php bloginfo( 'template_url' ); ?>/incs/clients.php', {clientText: clientText});

    jQuery('#clients-placeholder').html('<img class="preloader" src="<?php bloginfo( 'template_url' ); ?>/images/ajax-loader.gif" alt="Loading" title="Loading" />');
    jQuery('#clients-placeholder').load(url);
    e.preventDefault();
    return false;  
    });
});
</script> 
```

在另一个页面clients.php我有以下内容：

```
<ul class="boxes-pages">

    <?php
        $whichCat = $_post['clientText'];
        // The Query
        $the_query = new WP_Query( array('post_type' => 'ourclients', 'clientcategory' => $whichCat));
        // The Loop
        while ( $the_query->have_posts() ) : $the_query->the_post();
            $content = get_the_content();
            $content = strip_tags($content); ?>

            <li>
                <div class="box">
                    <a href="<?php the_permalink(); ?>">
                        <?php
                            if ( has_post_thumbnail() )
                                the_post_thumbnail( 'client-logos' );
                            else
                                echo '<img src="default-image.png" alt="Example Image" title="Example" />';
                        ?>
                    </a>
                    <h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
                    <p><?php $options = get_option( 'thetech_text' ); echo $options; ?></p>
                    <div class="tabs-readmore">
                        <a href="/the-cloud/the-technology/">Read More</a>
                        <img class="readmore-bt" src="<?php bloginfo( 'template_url' ); ?>/images/readmore-bt.png" alt="Read More" title="Read More" />
                    </div><!-- end hero-readmore-->
                </div><!-- end box -->
            </li>

        <?php endwhile;
        // Reset Post Data
        wp_reset_postdata();
    ?>
    </ul> 
```

发生的情况是，当我单击链接时，它会重新加载我想要的 div，但似乎没有发送变量 clientText。我收到已设置的警报，但似乎没有将其传递给 clients.php

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:48:15.163

让我们重做 post 和 load 函数，我什至认为你不需要使用 load 函数。

```
jQuery.post('<?php bloginfo( 'template_url' ); ?>/incs/clients.php', {clientText: clientText}, function(data){
  //function(data) gets the data you want to return from the page.
  jQuery('#clients-placeholder').html('<img class="preloader" src="<?php bloginfo( 'template_url' ); ?>/images/ajax-loader.gif" alt="Loading" title="Loading" />');
  //maybe you want a setTimeout() here so your Loading image sticks around for awhile.
  $('#clients-placeholder').html(data);
}); 
```

# c++ - 如何检测文件是否存在而不会因权限问题而脱轨？

> ID：11247980
> 
> 赞同：2
> 
> 时间：2012-06-28T15:31:07.413
> 
> 标签：c++, security, winapi, filesystems

至少有三种技术可以检测文件是否存在：

1.  查询文件属性
2.  使用具有特定文件名而不是搜索模式的 FindFile()
3.  以读取模式打开文件并查看任何导致的错误

以上所有似乎都受到假阴性的影响。也就是说，我被告知该文件实际上不存在，这是由于网络上的 file-io 工作方式出现故障，或者由于文件权限问题。

我有一个客户可以看到资源管理器中存在一个文件，删除该文件，但如果他们尝试查看该文件，则会被“拒绝访问”。

我未能成功复制这种确切的行为。但是我可以创建的是文件存在的情况，但是由于限制了对它的权限，我无法在我的用户凭据下看到该文件夹​​中的文件。也就是说，GetFileAttributes()、FindFile() 和 fopen() 返回失败，即找不到该文件的文件（但如果我在不同的帐户下查看同一个文件夹 - 比如说网络管理员，我可以看到该文件肯定存在）。

至于我的最终用户（或任何人）将如何在这种情况下结束对我来说是不透明的。我没有具体的想法 - 可能是之前打开文件时出现电源故障，可能是某种网络故障导致文件句柄保持锁定到外国 PC 上的死进程，...？我只是在编造一些东西，因为我不知道是什么导致了这种情况的出现。

但是，我真正没有的是能够查询 Windows 并知道“文件 X 是否存在”这一事实

有谁知道一种技术可以诚实地回答这个问题而不管用户的权限如何（假设他们被允许查询文件夹本身的内容 - 我不是在要求未经授权的访问场景 - 只是一个“普通”用户X 无法编辑文件 Y，但仍想知道文件 Y 是否存在。

* * *

Hokay - 这越来越奇怪了。

只要我问两次，就可以使用任何文件检测技术。第一次总是告诉我“不存在”。Second+ 告诉我“是的，它在那里，但你无法打开它。”

有问题的文件位于 Windows Server 2008 NTFS 驱动器上的共享文件夹中。它是共享给每个人完全控制的。为了模拟我的客户问题，我手动向文件中添加了“Everyone Deny Read”ACL。因此，我拒绝了读取，但没有其他访问权限，并且只能访问该文件，而不是共享或该文件所在的文件夹。

（我使用资源管理器进行此修改，而不是我自己的软件或命令行实用程序）。

我可以看到该文件存在于该服务器上的本地管理员帐户中。我什至看不到它存在于我的本地工作站，在 Windows 7 下以标准用户身份登录，启用 UAC，非提升的资源管理器/应用程序。

* * *

看起来，如果文件的读取访问权限被明确拒绝，则该文件将不再可见（除非该拒绝不适用的帐户，或者具有某种后门方式查看文件的本地管理员）文件尽管拒绝 ACL）。

我尝试过 FindFirstFile、GetAttributes、CreateFile、_taccess_s 和 PathFileExists。在每种情况下，第一次访问文件的尝试都指示“找不到文件”，但连续第二次尝试会导致无错误（找到文件）。

我无法开始解释这些结果。我认为此时我需要在本地运行所有测试，以从混合中删除网络文件共享。这些结果并没有使整个 heckuva 很有意义（对我来说）。

* * *

文件夹的 fltmc 输出，来自服务器上的本地管理员帐户：

```
Filter Name                     Num Instances    Altitude    Frame
------------------------------  -------------  ------------  -----
aksdf                                   8       145900         0
luafv                                   1       135000         0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:29:53.467

您是否尝试过 WinAPI 调用 CreateFile 并将第二个参数设置为 0 ？这里的描述： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)我指向你的部分是：**“如果这个参数是零，应用程序可以查询某些元数据，例如文件、目录或设备属性，而无需访问该文件或设备，即使 GENERIC_READ 访问被拒绝。”**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:34:23.237

有一个名为 POSIX 的函数`access`可以做到这一点。看起来有一个 Windows 等价物：http `_access`: [//msdn.microsoft.com/en-us/library/1w06ktdy (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/1w06ktdy(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:39:26.757

使用外壳功能[`PathFileExists`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773584.aspx)。

另一种方法是模仿`FileExists`Delphi/BCB 中的做法，即[`FindFirstFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418.aspx)用来获取`WIN32_FIND_DATA`文件的文件，从而检查它是否存在。

顺便说一句，你提到的情况完全是人为的。`SeChangeNotifyPrivilege`它与**每个默认安装**分配给非特权用户的内容有关。用户权限称为“绕过遍历检查”（在安全设置 -> 本地策略 -> 用户权限分配下）:) 这意味着，出于所有实际目的，*如果*您知道文件的路径`secpol.msc`，您应该能够找出文件是否存在和名字。

 ** * *

是的，杰瑞是对的，这是一个安全漏洞。而是经过计算的。权限（“用户权限”）就是这样：一种忽略某些权限问题的方法。这是 Windows 中特权的目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T15:44:27.473

如果权限设置为“您甚至不允许查看此文件的名称”（例如，拒绝您访问它所在的目录），则任何“查看”该文件的能力，即使达到仅仅确认或否认它的存在就是一个明显的安全漏洞。

因此，我只能看到几种可能性。最明显的是使用管理员帐户来搜索文件。这可能会惹恼用户，因为他们很可能需要输入该管理帐户的凭据才能使用它。对于无权访问管理员帐户的用户（您希望大多数情况下），它根本不起作用。

另一种可能性是找到并利用一个安全漏洞，让你做你想做的事，即使你真的不应该做。这（至少）同样有问题——几乎任何修补程序、服务包等都可能“堵塞”您正在利用的安全漏洞，并且您的代码将停止工作。同样，至少有一个合理的机会，某种反恶意软件可能会决定（或多或少正确地）您的代码很顽皮，并告诉用户它正在做坏事。*

# sql - 使用 select 语句更新多行

> ID：11247982
> 
> 赞同：18
> 
> 时间：2012-06-28T15:31:13.247
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有这些表和值：

```
Table1
------------------------
ID | Value
------------------------
2 | asdf
4 | fdsa
5 | aaaa

Table2
------------------------
ID | Value
------------------------
2 | bbbb
4 | bbbb
5 | bbbb 
```

我想使用 Table1 中的值及其各自的 ID 更新 Table2 中的所有值。

有没有办法通过简单的 SQL 查询来做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-28T15:39:14.520

运行选择以确保它是您想要的

```
SELECT t1.value AS NEWVALUEFROMTABLE1,t2.value AS OLDVALUETABLE2,*
FROM Table2 t2
INNER JOIN Table1 t1 on t1.ID = t2.ID 
```

更新

```
UPDATE Table2
SET Value = t1.Value
FROM Table2 t2
INNER JOIN Table1 t1 on t1.ID = t2.ID 
```

此外，请考虑使用`BEGIN TRAN`，以便在需要时将其回滚，但请确保`COMMIT`在您满意时使用它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-28T15:39:57.553

如果您在两个表中都有 id，则以下工作：

```
update table2
    set value = (select value from table1 where table1.id = table2.id) 
```

也许更好的方法是加入：

```
update table2
    set value = table1.value
    from table1
    where table1.id = table2.id 
```

请注意，此语法在 SQL Server 中有效，但在其他数据库中可能不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-18T14:52:03.347

您可以使用别名来改进查询：

```
UPDATE t1
   SET t1.Value = t2.Value
  FROM table1 AS t1
         INNER JOIN 
       table2 AS t2
         ON t1.ID = t2.ID 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-10T13:36:17.870

以上答案在**MySQL**中都不适合我，但以下查询有效：

```
UPDATE
    Table1 t1
    JOIN
    Table2 t2 ON t1.ID=t2.ID 
SET
    t1.value =t2.value
WHERE
    ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-03T22:27:51.173

我在 MySQL、MS Access 和 SQL Server 上使用过这个。id 字段是表重合的字段，不一定是主索引。

```
UPDATE DestTable INNER JOIN SourceTable ON DestTable.idField = SourceTable.idField SET DestTable.Field1 = SourceTable.Field1, DestTable.Field2 = SourceTable.Field2... 
```

# jms - 从 Websphere Process Server 清空和/或删除 jms 队列的脚本

> ID：11247984
> 
> 赞同：1
> 
> 时间：2012-06-28T15:31:23.280
> 
> 标签：jms, ibm-mq, websphere-6.1

假设我有以下 JMS 队列

*   “文档/队列 1”
*   “家/队列2”
*   “一些其他队列”

添加到 websphere 进程服务器中，如何编写脚本来清除和/或删除它们？环顾网络，不幸的是，我还没有找到解决问题的方法，但我发现它可能是一个我不知道如何编写的 JYthon 脚本

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:42:47.973

*[我已经编写了一个脚本，它已经完成了文章Mission:Messaging: E​​asing management and debug with circular queues](http://www.ibm.com/developerworks/websphere/techjournal/1103_mismes/1103_mismes.html)*中您需要的大部分工作。该脚本使用[SupportPac MA01](http://ibm.co/SupptPacMA01)中的 Q 程序来清除消息。您可以使用 Q 程序的客户端版本远程执行相同的操作。虽然我已经用 Perl 编写了我的脚本，但我也在 Korn Shell 和 Windows Batch 中看到了它的版本。

# xml - 使用序列化对象的属性的 xsl IF 语句

> ID：11247989
> 
> 赞同：0
> 
> 时间：2012-06-28T15:31:40.247
> 
> 标签：xml, xslt, if-statement

基本上我想做一个 if 语句，如果日期不是默认值（1-1-1900），则只显示对象的日期

我正在用VB对其进行编程，然后除了这种日期情况外，它都已成功放入xsl，基本上这就是我想要实现的目标

```
 <tr><th>DateLogged</th><th width ="500">
      <xsl:if NOT = "<xsl:value-of select="DateLogged" /> = 1-1-1900">
        <xsl:value-of select="DateLogged" />
      </xsl:if>
      </th></tr> 
```

在今天之前我从未做过任何 xsl，所以任何指针都会非常方便！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:35:36.753

试试这个 XSLT，它应该测试**DateLogged**元素是否按字面意思设置为“1-1-1900”

```
<xsl:if test="DateLogged != '1-1-1900'">
    <xsl:value-of select="DateLogged" />
</xsl:if> 
```

当然，如果你想完全取消**xsl:if**条件，你可以这样做：

```
<xsl:value-of select="DateLogged[. != '1-1-1900']" /> 
```

# java - 如何在 play framework 2.0 (Java) 中连接到 postgresql

> ID：11247990
> 
> 赞同：2
> 
> 时间：2012-06-28T15:31:42.903
> 
> 标签：java, playframework

我在使用 playframework 连接到 postgresql 时遇到问题。

错误是找不到驱动程序：[org.postgresql.Driver]

我们在 application.conf 中添加了代码：

```
db.default.url="postgres://localhost:root@secret/testdb"
db.default.driver=org.postgresql.Driver
db.default.user=""
db.default.password="" 
```

Build.scala 中的代码：

```
"postgresql" % "postgresql" % "9.1-902.jdbc4" 
```

我们已将 postgresql-9.1-902.jdbc4.jar 文件放在库文件夹中

任何人都可以对这个问题提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T15:42:23.433

我认为这不是 Postgres 库的有效版本。尝试：

```
"postgresql" % "postgresql" % "9.1-901-1.jdbc4" 
```

然后重新启动播放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:37:01.690

您的类路径中有[PostgreSQL JDBC 驱动程序](http://jdbc.postgresql.org/)吗？[请参阅本文档](http://www.playframework.org/documentation/2.0/JavaDatabase)的最后一部分。

*例如，如果使用 MySQL5，则需要为连接器添加一个依赖项：*

```
val appDependencies = Seq(
     // Add your project dependencies here,
     ...
     "mysql" % "mysql-connector-java" % "5.1.18"
     ...
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:37:03.780

您很可能缺少 jdbc 驱动程序。

[从http://jdbc.postgresql.org/download.html](http://jdbc.postgresql.org/download.html)获取驱动程序。
将它放在应用程序文件夹的 lib/ 目录中。

# c# - 从 JQuery 的部分视图更新表单

> ID：11247991
> 
> 赞同：0
> 
> 时间：2012-06-28T15:31:58.597
> 
> 标签：c#, jquery, asp.net-mvc-3

我是 ASP MVC3 的大一新生，也是 JQuery 的大一新生

我正在处理某些项目的订购流程，当前的工作方式是当用户单击“创建订单”链接时，它们会被带到要订购的项目列表（使用表格格式化），然后单击在一个项目上，会加载一个包含所选项目详细信息的表单，此时用户可以在创建订单之前在表单上添加其他信息。

我想通过让用户从一个视图中工作来简化这个过程。我希望这个视图具有上述表单和上面提到的项目列表的一部分，这样当用户在部分上选择项目时，表单会加载项目详细信息而无需打开新页面。

问题是，如何在部分视图中加载带有所选项目的表单？我被困在 JQuery 部分，不知道这个脚本会是什么样子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:19:58.203

我想你可以看看[AJAX](http://api.jquery.com/jQuery.ajax/)。甚至可以阅读一些[教程](http://www.asp.net/mvc)或观看[一些视频](http://www.asp.net/mvc/pluralsight)并了解它如何与 ASP.NET MVC 集成，这可能对您当前和未来的项目很有用。当然，一旦您有特定的问题要问，您应该毫不犹豫地回到 Stack Overflow。你可以展示你的努力和代码，解释你遇到的困难，我们会有一个共同的讨论基础。

# windows - curl 包未在 ghci 加载

> ID：11247993
> 
> 赞同：1
> 
> 时间：2012-06-28T15:32:00.610
> 
> 标签：windows, haskell, curl

成功（并且痛苦地）安装 curl-1.3.7 后，我在启动 ghci 时出现以下错误（使用参数 -package curl）

```
Loading package curl-1.3.7 ... ghc.exe: Unknown PEi386 section name `.drectve' (while processing: C:\curl-7.26.0\lib\libcurl.a) 
```

我在 Windows 7 下，我正在使用最后一个 haskell 平台（2012）。

我按照[http://haskell.forkio.com/Home/curl-win32](http://haskell.forkio.com/Home/curl-win32)上的程序，依次尝试提供的包（curl 7.19.4）和 curl 7.26（mingw64）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:04:47.140

似乎与 GHC 错误 7103 有关：http: [//hackage.haskell.org/trac/ghc/ticket/7103](http://hackage.haskell.org/trac/ghc/ticket/7103)

请参见此处：[如何解决 Windows 上的 GHC 错误“Unknown PEi386 section name `.idata$4'”？](https://stackoverflow.com/q/13209425/371753)

此处的讨论建议尽可能链接到 dll：[https ://github.com/lpsmith/postgresql-libpq/issues/7](https://github.com/lpsmith/postgresql-libpq/issues/7)

# http - 在 mac os 上监控网络请求（不是数据包）的工具

> ID：11247996
> 
> 赞同：0
> 
> 时间：2012-06-28T15:32:06.260
> 
> 标签：http, networking, request, firebug, wireshark

Firebug 有我需要的输出，但我必须监控一个小服务器而不是网页加载。我尝试了 Wireshark，但输出不是很有用，因为遍历所有数据包以将请求放在一起非常耗时且复杂。我想快速查看所有发送和接收的请求。所以我想要一个工具，它有像 Firebug 这样的输出，但可以监控从任何应用程序（如 Wireshark）发送的请求。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:34:36.943

我正在使用提琴手，对网络开发人员来说非常有用的工具:) [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)