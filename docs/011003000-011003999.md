# StackOverflow 问答 11003000-11003999

# version-control - 保持本地版本控制文件与服务器文件不同

> ID：11003009
> 
> 赞同：0
> 
> 时间：2012-06-12T18:56:45.047
> 
> 标签：version-control

我的工作使用 Visual SourceSafe 进行版本控制。当我在本地工作时，我会在更改文件时添加或删除代码。我想为我的文件保留一个本地存储库，以防万一我不小心从 SourceSafe 签出，或者如果我的计算机由于某种原因关闭，所以我不会丢失我的更改。有时我修改了一个函数，但我需要看看我几天前做了什么。我只向 SourceSafe 签入了无错误或最终版本的代码。我可以在 SourceSafe 使用的同一文件夹上的本地上使用 svn 吗？任何其他流程/建议。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:33:40.310

如果您不想检查对源代码管理工具的每次修改，搁置/取消搁置功能可能会满足您的要求。进行修改后，您可以搁置文件。这样，您无需签入未完成的版本，另一方面也无需担心丢失修改。

我不确定SVN是否可以做到这一点。但是您可以尝试 SourceAnywhere Standalone 或 TFS。这两个工具都支持搁置功能，并提供了从 VSS 进行数据库迁移的简单方法。

# asp.net - SQL连接字符串忽略指定的用户名和密码？

> ID：11003011
> 
> 赞同：0
> 
> 时间：2012-06-12T18:57:00.027
> 
> 标签：asp.net, sql, entity-framework, linq-to-sql, connection-string

我的 SQL 连接字符串没有使用连接字符串中提供的身份验证时遇到问题。我使用自跟踪实体编写了一个 ASP.NET 应用程序，我需要访问来自两个不同服务器的数据。第一个服务器 SQLSERVER1 正在使用 Windows 身份验证，并且在域上，我能够很好地提取我的数据。然而，第二个服务器连接位于域外的另一个盒子上，我需要使用特定的登录名和密码来访问数据。我确认我在连接字符串中使用的凭据可以很好地连接到服务器。

在我的网络服务器设置中，我的 IIS7 中的应用程序池在其自己的凭据“Domain\AppPoolUser”下运行。

出于某种原因，每当我在发布到网络服务器后尝试从 SQLSERVER2 调用数据时，我都会收到以下错误，即使我已经在连接字符串中指定了凭据并且它们是有效的。但是，如果我在本地调试应用程序，则连接工作正常：**用户“DOMAIN\AppPoolUser”登录失败。**

似乎它没有使用我在连接字符串中指定的凭据，而是尝试作为应用程序池凭据进行连接。如何设置连接字符串以使用我提供的凭据？这是我的连接字符串：

```
<add name="ADATrackingContext" providerName="System.Data.SqlClient" connectionString="Server=SQLSERVER1;Database=ADATracking;Integrated Security=True;" />  
<add name="PatientContext" providerName="System.Data.SqlClient" connectionString="Server=SQLSERVER2;Database=Patients;uid=PatientUser;password=123456;Integrated Security=False;" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:58:36.333

不确定它是否重要，但用户应该是`User Id=`而不是`uid=`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:41:01.070

ADATrackingContext 连接字符串将尝试使用 Domain\AppPoolUser 域帐户登录，因为您已设置 Integrated Security = true。由于您没有 Domain\AppPoolUser 作为数据库的登录名，因此您将收到您描述的错误。

仔细检查以确保将正确的连接字符串传递给 DbContext。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T18:52:46.323

看起来错误是由于我试图在我的客户端页面通过 ADATracking 连接字符串验证之前提取数据而导致的。我将数据调用移至 HomeController.cs 而不是 Global.asax 文件，现在一切正常。我的错。

# powershell - 带有 msiexec 的 Powershell 卸载程序

> ID：11003012
> 
> 赞同：1
> 
> 时间：2012-06-12T18:57:00.777
> 
> 标签：powershell, java

我遇到了让 msiexec 使用 Powershell 删除 java 的问题。我已将结果命令输出到屏幕并将其粘贴到批处理文件中，它运行良好。但是当它通过 Powershell 执行时，它会说“找不到包”。谁能发现我可能做错了什么？我在谷歌上下查找并尝试了几种不同的方式来执行命令而没有成功并获得相同的结果。

```
cls
$java = Get-WmiObject -Class win32_product | where { $_.Name -like "*Java*"}
$msiexec = "c:\windows\system32\msiexec.exe";
#$msiexecargs = '/x:"$app.LocalPackage" /qr'
$msiexecargs = '/uninstall "$app.IdentifyingNumber" /qr /norestart'

if ($java -ne $null)
{
    foreach ($app in $java)
    {
        write-host $app.LocalPackage
        write-host $app.IdentifyingNumber
        #&cmd /c "msiexec /uninstall $app.IdentifyingNumber /passive"
        #Start-Process -FilePath $msiexec -Arg $msiexecargs -Wait -Passthru
        [Diagnostics.Process]::Start($msiexec, $msiexecargs);
    }
}
else { Write-Host "nothing to see here..." }
Write-Host "check end" 
```

目标是使用 Windows 7 登录脚本删除最终用户系统上的所有 Java 版本，然后安装最新版本。我更喜欢全部使用 Powershell，但如果我不能让它工作，我将只使用一个用卸载 GUID 硬编码的批处理文件

write-host 语句都是出于调试目的，我只是对以这种格式的某些变体执行 msiexec 感兴趣： msiexec /x {GUID} /passive /norestart

我得到的错误是：“无法打开此安装包。验证该包是否存在并且您可以访问它，或者联系应用程序供应商以验证这是一个有效的 Windows Installer 包。”

我知道它可以自己工作，只是不在这个脚本中......所以我认为这是一个语法问题。

如果您有任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:03:43.960

首先你必须知道这之间的区别：

```
"$app.IdentifyingNumber" 
```

还有这个

```
"$($app.IdentifyingNumber)" 
```

所以我认为你想使用后者（由于注释行，代码有点混乱）：

```
&cmd /c "msiexec /uninstall $($app.IdentifyingNumber) /passive" 
```

# wcf - C# WCF REST - 如何使用 JSON.Net 序列化程序而不是默认的 DataContractSerializer？

> ID：11003016
> 
> 赞同：2
> 
> 时间：2012-06-12T18:57:17.413
> 
> 标签：wcf, rest, .net-3.5, json.net

在 .NET 3.5 中，是否可以覆盖默认的 DataContractJsonSerializer 并改用 JSON.net 序列化程序？

**注意**：我们不想在类上使用属性

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:41:57.197

是的，可以这样做。但这不是太简单。您将需要一个新的消息格式化程序，它使用 JSON.NET 序列化程序而不是默认的序列化程序在操作参数和 WCF 堆栈所需的消息对象之间进行转换。[http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/03/wcf-extensibility-message-formatters.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/03/wcf-extensibility-message-formatters.aspx)上的帖子有一个例子可以做到这一点。该代码是为 4.0 编写的，但它也应该适用于 3.5。

# javascript - Javascript 未在某些 IE 9 工作站上运行

> ID：11003019
> 
> 赞同：1
> 
> 时间：2012-06-12T18:57:35.023
> 
> 标签：javascript, internet-explorer-9

我有两个不同的 Windows 7 工作站，它们具有完全相同的 IE 9 版本。一个将运行简单的 Javascript，如下面的一个，另一个则不会。所有其他设置似乎都相同 - 两者都处于使用 SSL 访问页面的兼容模式。任何帮助，将不胜感激。

```
<script language="JavaScript">
    document.location = "login.asp";
</script> 
```

# javascript - ECMAScript 中的内部属性是为什么定义的？

> ID：11003021
> 
> 赞同：11
> 
> 时间：2012-06-12T18:57:57.390
> 
> 标签：javascript, ecmascript-5

ECMAScript 中的[内部属性](http://es5.github.com/#x8.6)是为什么定义的？规范是什么意思

> 本规范使用各种内部属性来定义对象值的语义。这些内部属性不是 ECMAScript 语言的一部分。它们由本规范定义，纯粹是为了说明目的。

这是否意味着**ECMAScript 定义的内部属性不可用于编程。它们用于 javascript 引擎的实现**？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-10-15T13:38:29.943

内部属性定义代码在执行时的行为，但不能通过代码访问。ECMAScript 为 JavaScript 中的对象定义了许多内部属性。内部属性由双方括号符号表示。

例如，JavaScript 函数是一个对象，它具有 [[call]] 属性。[[call]] 属性是函数独有的。

另一个内部属性示例是 [[prototype]] 属性。该属性是一个指针，指向实例正在使用的原型对象。由于无法通过代码访问内部属性，因此对象实例化无法访问原型，而其属性对对象都是可用的。您可以通过对对象使用 Object.getPrototypeOf() 方法来获取 [[prototype]] 属性的值。

```
var obj = new Object();
var prototype = Object.getPrototypeOf(obj);
console.log(prototype == Object.prototype); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T19:01:05.023

> 这是否意味着 ECMAScript 定义的内部属性不可用于编程。它们用于 javascript 引擎的实现？

是的。它们仅用于实现目的，不需要“实名”。您可以在[#8.6.2 对象内部属性和方法](http://es5.github.com/#x8.6.2)中阅读相关内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:08:25.740

经常使用的例子是内部属性 [[prototype]]，所有对象都有一个，但你不能直接访问它，例如。

```
function foo(){
    this.first = "hi"
    this.second = something
}
foo.prototype = {
    constructor : foo,
    anotherProp : "hello"
}

var obj = new foo();

console.log(obj.anotherProp); //hello
//here the runtime will look in obj for anotherProp and
//fail to find it so it will look in obj's internal property
//[[prototype]] which is pointing to the object foo.prototype 
```

因此您可以访问内部属性 [[prototype]] 指向的对象，但不能直接通过内部 [[prototype]] 属性访问，该属性仅供运行时使用，而不是程序员使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T19:00:00.170

它们在如何实现 JavaScript 引擎的*示例中使用。*

# python - 为什么总和起始值不是可迭代的零值？

> ID：11003023
> 
> 赞同：0
> 
> 时间：2012-06-12T18:58:01.217
> 
> 标签：python, types, built-in

为什么 sum 不能自动取正确的零值？

```
>>> sum((['1'], ['2']))

Traceback (most recent call last):
  File "<pyshell#13>", line 1, in <module>
    sum((['1'], ['2']))
TypeError: unsupported operand type(s) for +: 'int' and 'list'
>>> sum((['1'], ['2']), [])
['1', '2'] 
```

像这样实现很简单：

```
>>> def sum(s, start=None):
    it = iter(s)
    n = next(it)
    if start is None:
        start = type(n)()
    return n + __builtins__.sum(it, start)

>>> sum((['1'], ['2']))
['1', '2']
>>> 
```

但是 sum 无论如何都不会加入字符串，所以也许它只是为了鼓励对不同的“求和”使用正确的方法。

另一方面，如果它仅用于数字，为什么`sum_numbers`不`sum`作为名称来说明。

编辑：要处理空序列，我们必须添加一些代码：

```
>> sum([])

Traceback (most recent call last):
  File "<pyshell#36>", line 1, in <module>
    sum([])
  File "<pyshell#28>", line 3, in sum
    n = next(it)
StopIteration
>>> def sum(s, start=None):
    it = iter(s)
    try:
        n= next(it)
    except:
        return 0

    if start is None:
        start = type(n)()
    return n + __builtins__.sum(it, start)

>>> sum([])
0
>>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:00:36.037

在一般情况下，不可能推断出零值。如果可迭代对象生成没有零参数构造函数的用户定义类的实例怎么办？正如您所展示的，您自己提供它很容易。

# c# - 在类方法中调用对话框

> ID：11003026
> 
> 赞同：1
> 
> 时间：2012-06-12T18:58:09.360
> 
> 标签：c#, .net, wpf

我在 WPF（使用 .Net 4.0）应用程序中有一个类函数，它通过一个*同步*过程运行，该过程需要在其中停下来等待用户准备好。所以在程序中我需要弹出一些对话框，这些对话框只是暂停程序，直到用户单击“确定”。

实现这个的最干净的方法是什么？

如果有某种方法可以让函数向 MainWindow 发出信号以改为调用对话框，我会犹豫是否用 WPF 对话框混淆类函数。还是我不应该担心这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:12:16.843

在您确定更好的重构方法之前，我将使用以下方法。在不了解您的任何特定架构的情况下：

```
void MyLongProcedure() {
    // do some stuff
    if(GetDialog() == DialogResult.OK) { }

    // do some more stuff
    if(GetDialog() == DialogResult.OK) { }
}

DialogResult GetDialog() {
    return myDialog.ShowDialog();
} 
```

*如果*有停止该过程的选项，那么您可以添加一个检查`DialogResult.Cancel`并实现长过程的优雅退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:17:00.010

如果没有关于您的应用程序的更多详细信息，很难给出准确的答案，但我会选择以下内容（代码实际上可能无法按原样编译）

```
public class WaitForUserProcedureImpl : IWaitForUserProcedure
{
    public void DoSomething(Action pause)
    {
        // do stuff
        pause(); // pause
        // do more stuff
        // ....
        pause();
    }
}

public class MainWindow: Window
{

    private void button_click(object sender)
    {
        WaitForUserProcedureImpl proc = new WaitForUserProcedureImpl();
        Action myPauseAction = new Action(
            ()=>
            {
                MessageBox.Show("Press ok to continue","Press ok to continue",MessageBoxButtons.OK);
            }
        );
        proc.DoSomething(myPauseAction);
    }
} 
```

# c# - 当前上下文中不存在名称 DiceRoll

> ID：11003027
> 
> 赞同：0
> 
> 时间：2012-06-12T18:58:11.060
> 
> 标签：c#

这是问题，在顶部我有 public void DiceRoller ，它只是为我获取一个随机数。这就是`int DiceRoll`我打电话来获取号码的地方。在我`public void CreateInput()`调用 DiceRoll 时，它吐出该名称在当前上下文中不存在。如果我将 DiceRoller 中的代码复制到 CreateInput 中，它可以完美运行，但我希望将它放在自己的类中，用于我的代码中的其他类。

```
 public void DiceRoller()
    {
        Random RandomNumber = new Random();
        int DiceRoll = RandomNumber.Next(1, 20);
    }

    public void CreateInput()
    {
        Console.Clear();
        Console.WriteLine("  _, __, __,  _, ___ __,    _, _,_  _, __,  _,  _, ___ __, __,");
        Console.WriteLine(" / ` |_) |_  /_\\  |  |_    / ` |_| /_\\ |_) /_\\ / `  |  |_  |_)");
        Console.WriteLine(" \\ , | \\ |   | |  |  |     \\ , | | | | | \\ | | \\ ,  |  |   | \\");
        Console.WriteLine("  ~  ~ ~ ~~~ ~ ~  ~  ~~~    ~  ~ ~ ~ ~ ~ ~ ~ ~  ~   ~  ~~~ ~ ~");
        Console.WriteLine("<==============================================================>");
        Console.WriteLine();
        Console.WriteLine();
        Console.Write("Player Name: ");
        Console.ReadLine();
        Console.Write("Select Race: ");
        Console.ReadLine();
        Console.Write("Select Class: ");
        Console.ReadLine();
        Console.WriteLine("Stats: ");
        Console.Write("STR: ");
        Console.Write(DiceRoll);
        Console.ReadLine();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:01:07.140

在您**当前**的代码中，变量`DiceRoll`是在函数中定义的`DiceRoller()`，而**不是**在函数中`CreateInput()`。这就是为什么你得到，`The name DiceRoll does not exist in the current context.`

**我的建议**

在您的函数中将返回类型从更改`void`为，并返回一个整数。`int``DiceRoller()`

```
public int DiceRoller()     
{         
    Random randomNumber = new Random();         
    int diceRoll = randomNumber.Next(1, 20);
    return diceRoll;
} 
```

然后，调用函数`DiceRoller()`内部的`CreateInput()`函数以获取随机整数，如下所示：

```
public void CreateInput()     
{         
    Console.Clear();         
    Console.WriteLine("  _, __, __,  _, ___ __,    _, _,_  _, __,  _,  _, ___ __, __,");         
    Console.WriteLine(" / ` |_) |_  /_\\  |  |_    / ` |_| /_\\ |_) /_\\ / `  |  |_  |_)");          
    Console.WriteLine(" \\ , | \\ |   | |  |  |     \\ , | | | | | \\ | | \\ ,  |  |   | \\");         
    Console.WriteLine("  ~  ~ ~ ~~~ ~ ~  ~  ~~~    ~  ~ ~ ~ ~ ~ ~ ~ ~  ~   ~  ~~~ ~ ~");         
    Console.WriteLine("<==============================================================>");     
    Console.WriteLine();         
    Console.WriteLine();         
    Console.Write("Player Name: ");        
    Console.ReadLine();        
    Console.Write("Select Race: ");         
    Console.ReadLine();        
    Console.Write("Select Class: ");         
    Console.ReadLine();         
    Console.WriteLine("Stats: ");         
    Console.Write("STR: ");         
    Console.Write(DiceRoller());         
    Console.ReadLine();     
} 
```

**个人偏好**：我喜欢在调用访问器函数时定义局部变量。在这种情况下`Console.WriteLine(DiceRoller())`，我会先定义一个局部变量（`int random = DiceRoller();`），而不是使用 ，然后将其写入控制台（`Console.WriteLine(random);`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:01:13.930

你的 DiceRoll 声明是在 DiceRoller() 函数中吗？如果是，那么该变量对于该特定函数是本地的，并且它不存在于它之外。

您可能应该从 DiceRoller() 返回 DiceRoll 并将其传递给 CreateInput()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:01:23.667

`DiceRoll`是没有变量，它似乎不是一个常数。它是未定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T19:03:40.747

尝试从 DiceRoller() 返回一个值。

```
public int DiceRoller()
{
     Random RandomNumber = new Random();
     return RandomNumber.Next(1, 20);
}

Console.Write(DiceRoller()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T19:28:10.907

```
public void DiceRoller() 
{ 
    Random RandomNumber = new Random(); 
    int DiceRoll = RandomNumber.Next(1, 20); 
} 
```

这里发生的情况是，当您完成 DiceRoller() 方法时，所有局部变量都从堆栈中弹出，您会丢失所有相应的数据。你需要做的就是把上面的函数变成下面的东西：

```
public int DiceRoller() 
{
    Random RandomNumber = new Random();
    return RandomNumber.Next(1,20);
} 
```

您还可以创建一个名为 RandomNumber 的静态变量，以便只需要创建一次种子：[https ://stackoverflow.com/a/2466989](https://stackoverflow.com/a/2466989)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T19:13:18.713

```
class DiceRoller
{
    int DiceRoll = 0;
    Random RandomNumber = new Random();

    public DiceRoller()
    {
       int DiceRoll = RandomNumber.Next(1, 20);
    }

   public int getDiceRoll()
   {
      return DiceRoll;
   }
} 
```

在任何类 CreateInput() 中都有一个实例`DiceRoller`并调用 get 方法

```
class SomeClass
{
     DiceRoller dr;

    public SomeClass()
    {
        DiceRoller dr = new DiceRoller();
    }  

    public void CreateInput()
    {
            Console.Clear();
            Console.WriteLine("  _, __, __,  _, ___ __,    _, _,_  _, __,  _,  _, ___ __, __,");
            Console.WriteLine(" / ` |_) |_  /_\\  |  |_    / ` |_| /_\\ |_) /_\\ / `  |  |_  |_)");
            Console.WriteLine(" \\ , | \\ |   | |  |  |     \\ , | | | | | \\ | | \\ ,  |  |   | \\");
            Console.WriteLine("  ~  ~ ~ ~~~ ~ ~  ~  ~~~    ~  ~ ~ ~ ~ ~ ~ ~ ~  ~   ~  ~~~ ~ ~");
            Console.WriteLine("<==============================================================>");
            Console.WriteLine();
            Console.WriteLine();
            Console.Write("Player Name: ");
            Console.ReadLine();
            Console.Write("Select Race: ");
            Console.ReadLine();
            Console.Write("Select Class: ");
            Console.ReadLine();
            Console.WriteLine("Stats: ");
            Console.Write("STR: ");
            Console.Write(dr.getDiceRoll());
            Console.ReadLine();
     }
} 
```

# php - 没有从 SQL 查询中得到预期的结果

> ID：11003028
> 
> 赞同：2
> 
> 时间：2012-06-12T18:58:18.970
> 
> 标签：php, mysql, sql

这是我的桌子

```
Field                   Type            Null    Key     Default  Extra
id_key                  int(11)         NO      PRI     NULL     auto_increment
tbl_users_username      varchar(255)    YES     UNI     NULL
tbl_users_password      varchar(32)     YES             NULL
tbl_users_identifier    varchar(32)     YES             NULL
tbl_users_token         varchar(32)     YES             NULL
tbl_users_access_type   int(1)          YES             NULL
tbl_users_timeout       int(10)         YES             NULL 
```

这是我的代码

```
$query = "SELECT * FROM tbl_users where tbl_users_username = '$_POST[email_address]'" ;
$result = mysql_query($query);
if($result)
{
    echo "TRUE";        
}
else
{
    echo "FALSE";
} 
```

连接到数据库没有问题。当我运行查询时出现问题。无论电子邮件是否在表中，它都会返回 $result。我在这里想念什么？如果电子邮件地址存在于表中，它应该回显 true，如果它不在表中，则返回 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:00:35.740

`$_POST[email_address]`我猜应该使用单引号或双引号：

`$_POST["email_address"]`或者`$_POST['email_address']`

```
$query = "SELECT * FROM tbl_users where tbl_users_username = '" . $_POST['email_address'] . "'" ; 
```

但是，正如@FabioCosta 所说，您必须获取结果或计算返回的行数才能实现您的目标：

```
$query = "SELECT 1 FROM tbl_users where tbl_users_username = '" . $_POST['email_address'] . "'";
$result = mysql_query($query);
if(mysql_num_rows($result) === 1) {
    echo "TRUE";        
} else {
    echo "FALSE";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:02:07.350

尽管如此，结果仍将返回（如果您进行了有效查询）使用[mysql_num_rows](http://php.net/manual/pt_BR/function.mysql-num-rows.php) 来检查邮件是否存在。如果可以，实际使用 PDO

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:02:28.810

如果您使用 PHP 的`mysql_num_rows`函数，您应该能够返回行数，并且您的逻辑将起作用。因此，请尝试以下操作：

```
$num = mysql_num_rows($result);
if ($num > 0) {
    echo "TRUE";
}else{
    echo "FALSE";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T19:53:08.930

I suggest that you print out your query to ascertain that it is 100% the query you expect it to be.

In addition to that, You are checking:

`$result = mysql_query($query);`

`if($result)`

This checks if a resource was returned from your query. It your query is **valid** then as per the [documentation](http://uk.php.net/mysql_query), you should always have a resource.

**Suggested code:**

`$result = mysql_query($query);`

 ````
if($result)
{
    $num = mysql_num_rows($result);
    if ($num > 0)
    {
        //do logic processing here...
        echo "TRUE"; 
    }
}
else
{
   die('Invalid query: ' . mysql_error());
} 
````  `**Code Explanation:**

1.  Fetch the resource from the query
2.  If valid resource was returned, continue and check the number of records that were fetched from this query.
3.  If the resource was not returned, the else part echo out a failure message.

I would **strongly suggest** that you look into using [PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/) library.

**Briefly the Advantages of PDO:**

1.  Allows you to use prepared statement with ease (prepared statement are great for security!!!)

2.  PDO can connect to various different Databases including MySQL, but others as well.

3.  Its quite easy to use in my opinion and it quite easy to pick for new comers etc.

**Stack overflow usage tips:**

1.  Always use the search in the top right hand corner. Numerous people have come across problems that may could help you.
2.  Always have a look at the [How to Ask Question FAQ](https://stackoverflow.com/questions/how-to-ask)
3.  Feedback & always ask further questions if required!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T19:01:38.740

以下查询将根据发布的 email_address 值中的值选择 tbl_users_username 值。所以，使用这个查询：

```
$query = 
"SELECT * FROM tbl_users where tbl_users_username = '".$_POST['email_address']."';"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T01:18:16.733

```
$query = "SELECT *
FROM tbl_users
WHERE tbl_users_username = '" . mysql_real_escape_string($_POST['email_address']) . "'";

$result = mysql_query($query) or die(mysql_error());

if($result)
{
    echo "TRUE";        
}
else
{
    echo "FALSE";
} 
```

这应该可以解决您遇到的任何问题，或者至少给您一个方便的错误消息来解决。`

# python - 如何将字符串类型的 numpy 数组传递给 Cython 中的函数

> ID：11003037
> 
> 赞同：18
> 
> 时间：2012-06-12T18:59:10.620
> 
> 标签：python, numpy, cython

传递一个 dtype 的 numpy 数组`np.float64_t`可以正常工作（如下），但我不能传递字符串数组。

**这是有效的：**

```
# cython_testing.pyx
import numpy as np
cimport numpy as np

ctypedef np.float64_t dtype_t 

cdef func1 (np.ndarray[dtype_t, ndim=2] A):
    print A 

def testing():
    chunk = np.array ( [[94.,3.],[44.,4.]], dtype=np.float64)

    func1 (chunk) 
```

**但我无法完成这项工作：** 我找不到 numpy 字符串 dtype 的匹配“类型标识符”。

```
# cython_testing.pyx
import numpy as np
cimport numpy as np

ctypedef np.string_t dtype_str_t 

cdef func1 (np.ndarray[dtype_str_t, ndim=2] A):
    print A 

def testing():
    chunk = np.array ( [['huh','yea'],['swell','ray']], dtype=np.string_)

    func1 (chunk) 
```

**编译错误是：**

```
Error compiling Cython file:
------------------------------------------------------------
ctypedef np.string_t dtype_str_t 
    ^
------------------------------------------------------------

cython_testing.pyx:9:9: 'string_t' is not a type identifier 
```

**更新**

每看一遍`numpy.pxd`，我看到以下`ctypedef`陈述。也许这足以说明我可以使用`uint8_t`并假装一切正常，只要我可以进行一些铸造？

```
ctypedef unsigned char      npy_uint8
ctypedef npy_uint8      uint8_t 
```

只需要看看铸造将有多昂贵。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-04T20:11:57.373

使用 Cython 0.20.1 它可以使用`cdef np.ndarray`，而无需指定数据类型和维数：

```
import numpy as np
cimport numpy as np

cdef func1(np.ndarray A):
    print A

def testing():
    chunk = np.array([['huh','yea'], ['swell','ray']])
    func1(chunk) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T20:43:52.120

看来你运气不好。

[http://cython.readthedocs.org/en/latest/src/tutorial/numpy.html](http://cython.readthedocs.org/en/latest/src/tutorial/numpy.html)

> 尚不支持某些数据类型，例如布尔数组和字符串数组。

* * *

正如 Saullo Castro 的回答所示，这个答案不再有效，但出于历史目的，我将其保留。

# c++ - 基方法/运算符在派生（C++）上调用时返回基类型？

> ID：11003038
> 
> 赞同：3
> 
> 时间：2012-06-12T18:59:13.723
> 
> 标签：c++, inheritance, typing

鉴于：

```
class Base:
{
  public:
  ...
  Base operator+( const Base& other );
  Base& scale( float num );
}

class Derived : public Base:
{
  public:
  ...
  Derived( const Base& other );
  float super_math_wizardry();
}

//A user can do the following:

Base b1,b2,b3;
Derived d1,d2,d3;

b3 = b1 + b2;
d3 = d1 + d2;

b3 = b1.scale( 2.0f );
d3 = d1.scale( 3.0f ); //scale returns Base& type that is converted to Derived

float x,y;

x = (d1+d2).super_math_wizardry(); //compiler type error since d1+d2 returns Base type
y = (d1.scale(4.0f)).super_math_wizardry(); //similar compiler error

x = Derived(d1+d2).super_math_wizardry(); //works
y = Derived(d1.scale(4.0f)).super_math_wizardry(); //works 
```

有没有办法让前两个语句工作而无需重新实现 Derived 中的每个 Base 方法（使 Derived 方法调用 Base 方法并返回 Derived 类型）并且不需要用户进行强制转换/调用复制构造函数？

编辑：所有 Derived 对象都在 Base 对象集中（类继承需要），但并非所有 Base 对象都在 Derived 对象集中。它们具有相同的数据成员，但 Derived 对象具有分配给这些数据成员之一的常量值（所有 Derived 对象具有相同的常量值）。

有许多特定于 Base 或 Derived 的方法，但大多数运算符和 set/get 访问器在 Base 和 Derived 对象上具有相同的定义行为。我想要做的事情是当我在 Derived 对象上调用 Base 方法时返回 Derived 或 Derived& （因为这些操作是在数学上定义的），同时在调用 Base 方法时仍然得到 Base 或 Base&在 Base 对象上。

上下文：Base 是一个 Matrix 类，而 Derived 是一个 Vector（列）类。Derived( const Base& other ) 构造函数用于从单列 (nx1) 矩阵中显式获取向量。

所以我想要：

```
x = (d1+d2).super_math_wizardry(); //works
y = (b1+b2).super_math_wizardry(); //fails (although possibly at run-time since a nx1 Matrix is a column vector) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T20:10:15.003

鉴于您的上下文，我认为您遇到的根本问题是通知编译器`Derived`对象集在`operator+`. 我知道，你知道，但是 C++ 语言中没有特殊的快捷方式来表达它。您确实需要实施`Derived Derived::operator+(const Derived&) const`.

我可能会做`Derived(const Base &other)`构造函数`explicit`。如果 的尺寸错误，它可能会引发异常`other`，因此用户不应该期望隐含地发生这种情况。他们需要知道这是正确的，所以他们可能不得不说他们希望它发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T20:07:49.640

那么简短的回答是，不。

这些函数的返回类型为 Base。您要求编译器执行的操作与执行操作没有什么不同

```
Derived d1;
Base* b = &d1;
b->super_math_wizardry(); // This is also wrong since we don't know that b can be
                          // a derived class 
```

根本没有办法做到这一点，因为语言无法知道上述和

```
Base* b1 = new Base();
b1->super_math_wizardry(); // This is just plain wrong 
```

# python - Python执行复杂的shell命令

> ID：11003039
> 
> 赞同：1
> 
> 时间：2012-06-12T18:59:15.400
> 
> 标签：python

嗨，我必须执行一个 shell 命令：diff <(ssh -n root@10.22.254.34 cat /vms/cloudburst.qcow2.*) <(ssh -n root@10.22.254.101 cat /vms/cloudburst.qcow2) 我试过了

```
cmd="diff <(ssh -n root@10.22.254.34 cat /vms/cloudburst.qcow2.*) <(ssh -n root@10.22.254.101 cat /vms/cloudburst.qcow2)"
args = shlex.split(cmd)
output,error = subprocess.Popen(args,stdout = subprocess.PIPE, stderr= subprocess.PIPE).communicate() 
```

但是我得到一个错误差异：额外的操作数猫

我对python很陌生。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T19:05:00.603

您正在使用`<(...)`由 shell 解释的（进程替换）语法。提供`shell=True`给 Popen 以使其使用外壳：

```
cmd = "diff <(ssh -n root@10.22.254.34 cat /vms/cloudburst.qcow2.*) <(ssh -n root@10.22.254.101 cat /vms/cloudburst.qcow2)"
output,error = subprocess.Popen(cmd, shell=True, executable="/bin/bash", stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate() 
```

由于您不需要 Bourne shell (/bin/sh)，因此请使用可执行参数来确定要使用的 shell。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T19:30:01.700

您在命令行中使用了一种称为进程替换的特殊语法。大多数现代 shell（bash、zsh）都支持这一点，但 /bin/sh 不支持。因此，内德建议的方法可能行不通。（如果另一个 shell 提供 /bin/sh 并且没有“正确模拟” sh 的行为，它可以，但不能保证）。试试这个：

```
cmd = "diff <(ssh -n root@10.22.254.34 cat /vms/cloudburst.qcow2.*) <(ssh -n root@10.22.254.101 cat /vms/cloudburst.qcow2)"
output,error = subprocess.Popen(['/bin/bash', '-c', cmd], stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate() 
```

这基本上是 shell=True 参数所做的，但使用 /bin/bash 而不是 /bin/sh （如[subprocess docs](http://docs.python.org/library/subprocess.html#popen-constructor)中所述）。

# python - 在py2exe中隐藏命令行对话框

> ID：11003040
> 
> 赞同：3
> 
> 时间：2012-06-12T18:59:26.410
> 
> 标签：python, tkinter, py2exe

嗨，当我用 py2exe 编译我的 python 脚本时，一切正常，除了出现一个无用的命令行对话框以及我的 GUI。有任何解决这个问题的方法吗？我有 python 2.7，我的设置脚本如下所示：

```
from distutils.core import setup
import py2exe
setup(console=['Main.py']) 
```

请帮忙！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T19:08:47.050

使用`setup(windows=['Main.py'])`应该删除命令行对话框并使用 Main.py 作为您的控制台，而不是。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-06T16:48:37.970

将您的入口点 python 脚本扩展名从`.py`to重命名`.pyw`并重新生成您的 exe。

例子：`python -m py2exe.build_exe -b 0 my_script.pyw`

（在 Windows 8.1 x64 上使用 Python 3.4.3 测试）

例子：`my_script.pyw`

```
import ctypes
MessageBox = ctypes.windll.user32.MessageBoxW
MessageBox(None, 'Hello', 'Hello Window Title', 0) 
```

您不应看到此 GUI 应用程序的命令提示符。

# c# - 大数据对象——我是不是太担心了

> ID：11003043
> 
> 赞同：0
> 
> 时间：2012-06-12T18:59:28.107
> 
> 标签：c#, entity-framework, entity-framework-4.1

我是第一次使用 EF，所以我不知道这种情况是否正常，或者我有严重的性能问题。
我有以下情况：

下面是我的课程。项目是这里的主要对象。因此，当我从数据库中提取项目列表时，我会得到例如 1000 个项目。现在，每个项目都具有数据归档的所有属性。城市包含国家，国家包含城市列表，用户有创建项目列表，每个项目再次所有数据，城市，城市有国家，国家城市列表等等......
也许我太担心了，我不知道这个对象是否应该包含所有这些数据，这是否会导致性能问题，或者我在这里做错了什么？

```
public abstract class Item
    {
        [Key]
        public int ItemId { get; set; }

        public int ItemTypeId { get; set; }
        public Guid UserId { get; set; }
        public DateTime CreatedOnDate { get; set; }
        public string Title { get; set; }
        public string Description { get; set; }
        public int? MediaId { get; set; }
        public int CityId { get; set; }
        public virtual City City { get; set; }
        public virtual User User { get; set; }
        public virtual ICollection<ItemInBoard> ItemsInBoard { get; set; }
        public virtual ICollection<Like> Likes { get; set; }
        public virtual ICollection<Comment> Comments { get; set; }        
    }
public class City
    {
        public int CityId { get; set; }
        public string Name { get; set; }
        public double Longitude { get; set; }
        public double Latitude { get; set; }
        public int CountryId { get; set; }
        public virtual Country Country { get; set; }
    }
public class Country
    {
        public int CountryId { get; set; }
        public string Name { get; set; }
        public string CountryCode { get; set; }
        public virtual ICollection<City> Cities { get; set; }
    }
public class User
    {
        public Guid UserId { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public bool Gender { get; set; }
        public DateTime? BirthDay { get; set; }
        public string AboutMe { get; set; }
        public int? MediaId { get; set; }
        public int CityId { get; set; }
        public virtual City City { get; set; }
        public virtual ICollection<Item> Items { get; set; }
        public virtual ICollection<Board> Boards { get; set; }
        public virtual ICollection<Like> Likes { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:06:44.270

它是由你决定。这是一个称为延迟加载的概念。您可以使用以下代码启用或禁用延迟加载：

```
 context.Configuration.LazyLoadingEnabled = false;
  context.Configuration.LazyLoadingEnabled = true; 
```

启用此选项时，不会加载任何依赖实体。要强制加载依赖实体，您可以使用 Include lambada 表达式，如下所示：

```
 var test = context.Tests.Include("SomeOtherDependentEntity"); 
```

希望我得到你，这就是你的意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:16:51.600

我会说你所拥有的对于一般业务逻辑来说很好。

当我必须以只读方式进行大量时间敏感的处理时，我会使用这样的 SQL 命令来准确且仅准确地获得我想要的东西。

```
public class myQueryClass
{
public string Property1 { get; set; }
public string Property2 { get; set; }
}

var context = new MyDbContext();
context.Database.SqlQuery<myQueryClass>("SELECT Property1 = acolumn, Property2 = acolumn2 FROM myTable WHERE something = somestate"); 
```

# android - 无法在 Webview 中打开 pdf，找不到处理 Intent 错误的活动

> ID：11003045
> 
> 赞同：2
> 
> 时间：2012-06-12T18:59:31.290
> 
> 标签：android, android-activity, android-intent, webview, handler

在问这里之前我做了很多搜索。

我无法在我的 Webview 中打开 pdf，出现以下错误：No Activity found to handle Intent 错误。

这是 WebBrowser 活动的代码：

```
webview.setWebChromeClient(new WebChromeClient() {

public void onProgressChanged(WebView view, int progress) {
   activity.setProgress(progress * 100);
     }
     });

 webview.setWebViewClient(new WebViewClient() {
   public boolean shouldOverrideUrlLoading(WebView view, String url) {
          if (url.endsWith("pdf")) {

      Intent intentUrl = new Intent(android.content.Intent.ACTION_VIEW);
          intentUrl.setDataAndType(Uri.parse(url),MIME_TYPE_PDF); 
         startActivity(intentUrl);

        }
                  else{
              view.loadUrl(url);
          }
              return true;
          }

public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
     //Users will be notified in case there's an error (i.e. no internet connection)
     Toast.makeText(activity, "Oops! Connexion inexistante ou " + description, Toast.LENGTH_SHORT).show();
                }
     });  

  //This will load the webpage that we want to see
  webview.setPictureListener(this);
  webview.loadUrl(WebAddress);  
} 
```

这是清单 xml：

```
 <application android:icon="@drawable/icon" android:label="@string/VisitEnsta">
     <activity android:name=".SplashScreen" 
              android:label="@string/app_name">
            <intent-filter>
                 <action android:name="android.intent.action.MAIN" />
                 <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                 <action android:name="android.intent.action.VIEW" />
                 <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
     </activity>

     <activity android:name=".main"
           android:configChanges="locale"></activity>

     <activity android:name=".Apropos"></activity>

    <activity android:name=".Resultat"
          android:configChanges="locale"></activity>

    <activity android:name=".SyntheseVocale" 
          android:configChanges="locale"></activity>

    <activity android:name=".Visite"
          android:configChanges="locale"></activity>

    <activity android:name=".RssActivity" android:theme="@style/ListTheme"></activity>

    <activity android:name=".WebBrowser">
        <intent-filter>
         <action android:name="android.intent.action.VIEW" />

        </intent-filter>
    </activity>

    <activity android:name=".Utilities">
    <intent-filter>
         <action android:name="android.intent.action.VIEW" />

        </intent-filter>
    </activity>

    <activity android:name=".StudentsAccess">
    <intent-filter>
         <action android:name="android.intent.action.VIEW" />

        </intent-filter>
    </activity>

</application>
<uses-sdk android:minSdkVersion="7" />
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CAMERA"/>

</manifest> 
```

我在手机上安装了 adobe reader，并在真实设备（Galaxy S）上进行调试。

她是错误跟踪：

```
06-12 20:13:10.312: E/AndroidRuntime(3311): android.content.ActivityNotFoundException:               No Activity found to handle Intent { act=android.intent.action.VIEW dat=http://www.ensta-bretagne.fr/images/contenu//EspaceDocumentation/depliant_institutionnelle_fr_novembre2011_web.pdf typ=application/pdf } 
```

请问您有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T05:04:07.067

这是我用来在 webview 中查看 pdf 文件的代码。请检查一下 。

```
WebView webview=new WebView(SpecialityAllManuals.this);
                        webview.getSettings().setJavaScriptEnabled(true); 
                        String pdf = "http://www.adobe.com/devnet/acrobat/pdfs/pdf_open_parameters.pdf";

                        webview.loadUrl("http://docs.google.com/gview?embedded=true&url=" + pdf); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:05:48.717

通过意图使用 Adob​​e Reader（或其他已安装的 pdf 查看器）。[在此处](https://stackoverflow.com/a/5113521/522150)查看此解决方案

# mysql - Codeigniter 计数具有不同值的行

> ID：11003046
> 
> 赞同：0
> 
> 时间：2012-06-12T18:59:31.483
> 
> 标签：mysql, codeigniter, codeigniter-2

我要做的是通过不同的值对表的行进行分组，然后计算结果，同时还将计数与不同的值相关联。

所以我有一张这样的桌子：

编号 | 会员.id | 值1 | 值2 | 等等

我需要计算每个 member.id 关联的行数并返回如下所示的数组。

```
array(
  [member.id1] ['count'] => 'rowcount'
  [member.id2] ['count'] => 'rowcount'
   etc.
  ) 
```

我真的很困惑如何使用 Codigniter 的 ActiveRecord 来做到这一点，我不想在 foreach 循环中运行另一个数据库查询。关于我应该采取什么方向的任何帮助将是最有帮助的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T19:19:49.237

试试这样：

```
$items = $this->db->select('id, COUNT(id) AS count', false)
                  ->from('table')
                  ->group_by('member.id')
                  ->get()->result(); 
```

输出 - 具有 id 用户和计数的对象数组。

# azure - 有没有好的多租户 Azure 示例应用程序？

> ID：11003049
> 
> 赞同：1
> 
> 时间：2012-06-12T18:59:42.870
> 
> 标签：azure, multi-tenant

有没有好的多租户 Azure 示例应用程序？理想情况下，我希望看到某种程度的

*   数据模型定制
*   业务逻辑定制
*   自定义用户界面
*   自动租户配置

理想的前端基于 ASP.Net MVC3 和 HTML5。

我找到了一个旧的 MS 样本（Riviera），但它是 2009 年的。还找到了 Cloud Ninja（似乎非常专注于计量）和 Fabrikam Shipping 样本。

还有其他我错过了吗？还有关于这个主题的任何其他好的资源/博客吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:14:59.557

首先，看看 Cloud Ninja，它有一个[.NET](http://cloudninja.codeplex.com/)实现和一个[Java](https://github.com/PersistentSys/cloudninja-for-java)实现。您会发现几个有趣的领域，包括：

*   供应
*   身份管理
*   多租户数据库管理
*   租户级计量

我看到你提到了 Cloud Ninja，但我想澄清一下，这不仅仅是关于计量的。租户配置是关键，这在 .net 和 java 版本中都有体现。

# javascript - jquery 函数不能在 javascript 内部工作，但在它外部工作得很好

> ID：11003055
> 
> 赞同：0
> 
> 时间：2012-06-12T19:00:11.793
> 
> 标签：javascript, jquery, ajax, jquery-load

我有一个包含 jQuery 和 script.js 文件的 php 页面。当我将以下函数放入我的 php 文件中时，该函数将被执行并按预期工作：

```
<script>
    $('#scoreboard-overview').load('getusers.php?q=<?php echo $NewString; ?>').fadeIn("slow"); 
</script> 
```

它有什么作用？`scoreboard-overview`好吧，它在我的 php 文件中使用来自名为 getusers.php 的外部 php 文件中的数据重新加载带有 id 的 div

这一切都很好。

现在在 script.js 文件中（在 php 页面的末尾加载，就在之前`</body>`），我还想在 updatescore.php 文件完成通过表单更新数据库时重新加载这个 div。我有这个代码：

```
$.ajax({
    type: "POST",
    data: $("#form").serialize(),
    cache: false,
    url: "updatescore.php",
    success: function() { //reload overview
        $('#scoreboard-overview').load('getusers.php?q=' + document.getElementById('str') + '').fadeIn("slow");
    }
});​ 
```

所以成功后它应该执行jQuery函数：

```
function () { //reload overview
    $('#scoreboard-overview').load('getusers.php?q='+document.getElementById('str')+'').fadeIn("slow");                  
} 
```

我验证了代码。使用updatescore.php 更新数据库，但在此之后（成功后），div 不会刷新。所以代码的这个成功部分不起作用。我究竟做错了什么？

ps：应该给我与仅从带有 id 的 div 中获取的`'+document.getElementById('str')+'`结果相同的结果（因为 php 在 js 文件中不起作用？）`echo $NewString;``str`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:23:49.030

`document.getElementById('str')`将返回带有 'str' id 的 HTML 元素，而不是元素中的文本。我不确定这个元素实际上是什么样子，但你可能会做类似`document.getElementById('str').textContent`.

# c# - 下载文件后无法重定向

> ID：11003056
> 
> 赞同：0
> 
> 时间：2012-06-12T19:00:13.307
> 
> 标签：c#, http-headers, download

文件下载后我必须重定向到同一页面！

当我说 response.redirect .. 它说 HTTP 标头发送后无法重定向

有人可以帮我弄这个吗？

我正在使用 ionic.zip 压缩文件并下载它。

PS：让我知道如果我必须让我的问题更清楚，我可以解释:(

```
 Response.Clear();
    Response.BufferOutput = false;
    string filename = "results" + ".zip";
    Response.ContentType = "application/zip";
    Response.AddHeader("content-disposition", "filename=" + filename);

    using (ZipFile zip = new ZipFile())
    {
        zip.AddDirectory(pathhdf.Value);
        zip.Save(Response.OutputStream);
    }

    Response.Close();

   Response.Redirect("Default.aspx"); /// here come my error 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:06:42.660

发送 HTTP 内容后，您无法发送重定向标头或任何其他 HTTP 标头。在这种情况下，您的 HTTP 内容是您的 .zip 文件，因此您无法在将 .zip 文件写入输出流后发送重定向标头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T19:01:41.450

您无法从服务器重定向，因为您不知道客户端下载文件需要多长时间。您可以使用 javascript 间隔来轮询服务器可以发出的 cookie 的存在。这是一篇[很好的文章](http://geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx)来解释这一点。一旦检测到 cookie，客户端就知道下载已经完成，您可以使用例如重定向`window.location.href`。这是一个[类似的帖子](https://stackoverflow.com/a/8002908/29407)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:07:23.960

发送文件后无法进行重定向。一个请求只能有一个响应，重定向本身就是一个响应。

如果要同时进行下载和重定向，则必须从客户端发送两个请求。开始下载，然后`setTimeout`在延迟足够长的时间后使用重定向到 Default.aspx，以知道 donload 已经开始。服务器一次只会回复一个请求，因此下载完成后会加载 Default.aspx 页面。

# macos - 与 Github for Mac 分开安装 Git

> ID：11003057
> 
> 赞同：2
> 
> 时间：2012-06-12T19:00:24.837
> 
> 标签：macos, git, github, github-for-mac

我已经为 Mac 安装了 Github。

我意识到我需要进入命令行来做一些事情。

Guthub for Mac 中有一个选项可以安装命令行。所有这一切似乎都是在 /usr/local/bin 中创建一个名为 Github 的别名，该别名指向 Github for Mac 应用程序。

双击它会打开一个终端窗口，然后是 Github for Mac。

任何想法如何让 Git 在命令行中工作？

它是相对干净的 Lion OS X 版本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:07:23.850

Git 包含在 Apple 提供的命令行工具包中，可以在[https://developer.apple.com/downloads/index.action下载](https://developer.apple.com/downloads/index.action)

它也包含在 Xcode 中，可以从 Mac App Store 或从上面的链接下载。

假设您不想安装其中任何一个，您也可以从[http://git-scm.com/downloads下载 Git](http://git-scm.com/downloads)

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T19:28:19.283

我强烈推荐安装[Homebrew](https://brew.sh/)，它可以[很好地跟上](https://github.com/Homebrew/legacy-homebrew/commits/master/Library/Formula/git.rb)最新的 git 版本。

安装 Homebrew 后，它很简单：

```
brew install git 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T19:10:00.587

[https://help.github.com/articles/set-up-git#platform-mac](https://help.github.com/articles/set-up-git#platform-mac)

应该引导你安装它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-21T07:10:37.807

请注意，从 2013 年 5 月开始，您现在可以同时使用“ [GitHub for Mac](http://mac.github.com/) ”：

*   图形用户界面
*   CLI（命令行界面）

请参阅博文“[从 GitHub 安装 Git for Mac](https://github.com/blog/1510-installing-git-from-github-for-mac) ”

> 您现在可以轻松地安装 Git 以在命令行上使用，而无需下载任何单独的包。

甚至 git 更新也会为您处理：

> 每当我们更新 GitHub for Mac 中包含的 Git 版本时，您将自动获得更改——您无需任何工作！
> 
> 您可能会注意到“首选项”窗口发生了一些变化。
> 在新重命名的“ `Advanced`”选项卡上，只需单击“ `Install Command Line Tools`”。

![点击安装](../Images/671aaaa49678e540b27576e047707e73.png)

> 系统将提示您输入管理员密码，以便可以将 Git 安装到`/usr/local/bin`中，然后您应该很快就会看到它成功了：

![在此处输入图像描述](../Images/18907644fa448ed49510ba47bbf95a37.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-10T07:19:33.120

GitHub 应用程序在 /usr/local 中创建了许多链接。使用此命令从 GitHub 中查找所有链接文件。

`ls -l $(find /usr/local -type l) | grep GitHub.app | awk '{ print $9}'`

然后`rm`他们。

PS：GitHub 还创建了一些运行时出错的目录`brew link git`，例如 /usr/local/share/git-core、/usr/local/lib/perl5/site_perl。您应该小心地删除它们。

# asp.net - 如何在 Razor 中使用编辑器模板创建单选按钮组

> ID：11003063
> 
> 赞同：1
> 
> 时间：2012-06-12T19:00:35.330
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, mvc-editor-templates

我有以下型号

```
 public class FilterSetting
{
    public FilterType Type { get; set; }
    public ShowOption Option { get; set; }
    public bool IsMultiple { get; set; }
    public List<int> SelectedValues { get; set; }
    public List<SelectListItem> Values { get; set; }
    public int RowCount { get; set; }
}
public enum ShowOption
{
    Common,
    Also,
    All
} 
```

我想为 ShowOption 枚举创建一个单选按钮组，但我想使用编辑器模板显示该组，因为我有另一个模型创建一个 FilterSetting 列表，它将显示大约 7 个 FilterSettings 每个必须有一组ShowOption 属性的 3 个单选按钮。

问题是当 razor 从编辑器模板渲染单选按钮时，它为每个单选按钮使用相同的名称（name="filter.Option"），我不知道如何设置值。

这是我的编辑器模板

```
@model Models.FilterSetting

@Html.RadioButtonFor(f => f.Option, "Common", new { id = ""+ Model.Type })
@Html.Label(""+Model.Type, "Show only common assets")
<br />
@Html.RadioButtonFor(f => f.Option, "Also", new { id = "" + Model.Type })
@Html.Label(""+Model.Type, "Also show assets matching the values selected below")
<br />
@Html.RadioButtonFor(f => f.Option, "All", new { id = "" + Model.Type })
@Html.Label(""+Model.Type, "Show all assets")
<br />

@if (Model.IsMultiple)
{
    @Html.ListBoxFor(f => f.SelectedValues, Model.Values)
}
else
{ 
    @Html.DropDownListFor(f => f.SelectedValues, Model.Values, new { size = "4" })
} 
```

我尝试在 htmlAttributes 对象上传递名称，但它不起作用。

**编辑：** 显然问题是我打电话给编辑的方式。我这样称呼它

```
@foreach (var filter in Model.FilterSettings)
{
      ....
      @Html.EditorFor(f => filter)
} 
```

当我这样称呼它时

```
@Html.EditorFor(f => f.filterSettings) 
```

单选按钮工作正常。当我为每个人做的时候会发生什么？

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:17:30.023

当您调用`Editor/EditorFor`集合时，Razor 将跟踪生成的名称和 id，因此您将获得生成的名称，如 ex。`Addresses[0].Line1`, `Addresses[1].Line1`...

但是，当您自己迭代集合并调用每个模型剃须刀的编辑器时，不要跟踪名称和 ID（应该怎么做？这不会更复杂吗？）它被认为是一个新控件将在页面中呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T23:37:30.123

通常我使用@Html.HiddenFor(x=>x.id) 和@Html.HiddenFor(x=>x.name)，试试这个

# asp.net-mvc - 如果 mvc 中存在模型状态错误，如何禁用文本框？

> ID：11003072
> 
> 赞同：0
> 
> 时间：2012-06-12T19:00:48.643
> 
> 标签：asp.net-mvc, asp.net-mvc-3, modelstate

我正在做一些可能会失败（不太可能）但可能会出错的服务器工作。我想阻止用户继续前进，所以我想禁用输入，以便他们必须刷新页面。如何根据 ModelState 错误禁用它。如果存在任何错误，请禁用此框，我只想在最初加载页面时执行此操作。我的问题不一定是如何去做，而是更多的标准和最好的方法是什么。我可以有一个 ViewBag 持有一个真正的错误来禁用它，但不确定这是否是最好的路线，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:22:36.000

让我们假设您有一个 POST 控制器操作，该操作执行一些处理并在 ModelState 失败时向其添加错误，这是非常标准的。现在在视图中，您可以：

```
@Html.TextBoxFor(
    x => x.SomeProperty, 
    !ViewData.ModelState.IsValid ? new { @readonly = "readonly" } : null
) 
```

或编写一个自定义助手来完成这项工作并为您简化事情：

```
@Html.MyTextBoxFor(x => x.SomeProperty) 
```

如果您需要对多个输入字段进行此行为，这可能会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T05:46:07.670

您可以通过 jquery 查看表单是否有效：

```
if($('form').valid()){

} 
```

# php - 不显示整数值

> ID：11003079
> 
> 赞同：0
> 
> 时间：2012-06-12T19:01:07.470
> 
> 标签：php, codeigniter

我试图弄清楚为什么它将变量显示为布尔值而不是应有的整数。

kow_auth 配置文件是自动加载的。

图书馆：

```
echo "<pre>";
echo "max_attempts:";
var_dump($this->ci->config->item('login_max_attempts', 'kow_auth'));
echo "</pre>"; 
```

kow_auth 配置文件

```
http://pastebin.com/9KMEn4Uf 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:24:51.590

问题是您正在传递第二个参数：`kow_auth`

它试图`login_max_attempts`从一个名为的数组中检索，该数组`kow_auth`在您的配置文件中不存在。

您可以像这样创建配置：

```
$config['kow_auth']['login_by_username'] = TRUE;
$config['kow_auth']['login_by_email'] = FALSE;
$config['kow_auth']['login_max_attempts'] = 5;
$config['kow_auth']['login_attempt_expire'] = 60*60*24; 
```

这样它应该与您的第二个参数一起使用。

文档：[http ://codeigniter.com/user_guide/libraries/config.html](http://codeigniter.com/user_guide/libraries/config.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:08:13.630

这个 bool 是 false 还是 true ？让我猜猜：假的！？;) 那么可能是你根本没有得到`$config['login_max_attempts']`. `var_dump`给出一个，`false`因为在您的代码上没有使用该名称定义这样的变量/对象。

# c++ - 这些有什么区别？

> ID：11003081
> 
> 赞同：3
> 
> 时间：2012-06-12T19:01:13.107
> 
> 标签：c++, pointers, map

谁能解释一下以下用于在地图容器中插入新对象的方法的区别？我已经知道指针等，我并没有真正深入虚拟内存，只有基础知识（地址等）

```
#include "StdAfx.h"
#include <windows.h>
#include <cstdlib>
#include <iostream>
#include <map>

using namespace std;

class CUser
{
public:
    CUser() { Init(); };
    ~CUser() {};
public:
        BOOL m_bActive;
        BOOL m_bLoggedIn;
        SYSTEMTIME m_sysTime;

        void Init();
};

void CUser::Init()
{
    (*this).m_bActive = FALSE;
    m_bLoggedIn = FALSE;
    GetSystemTime( &m_sysTime );
}

int main(int argc, char *argv[])
{

    map<DWORD, CUser*>mUserMap;

    //what is the difference between this
    {   
        CUser pUser;
        pUser.m_bActive = FALSE;
        pUser.m_bLoggedIn = FALSE;
        GetSystemTime( &pUser.m_sysTime );
        mUserMap.insert( make_pair( 351, &pUser ) );
    }
    //and this?
    {
        CUser *pUser = new CUser;
        if( pUser )
        {
            pUser->m_bActive = TRUE;
            pUser->m_bLoggedIn = TRUE;
            GetSystemTime( &pUser->m_sysTime );
            mUserMap.insert( make_pair( 351, pUser ) );
        }
    }

/*  map<DWORD, CUser*>::iterator it = mUserMap.find( 351 );
    if( it == mUserMap.end() )
        std::cout << "Not found" << std::endl;
    else
    {
        CUser *pUser = it->second;
        if( pUser )
            std::cout << pUser->m_sysTime.wHour << std::endl;
    } */

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:06:34.023

在第一种情况下，`pUser`在堆栈上创建，并在其名称超出范围时自动删除（即在下一个右大括号处）。一般来说，将用于堆栈对象的指针插入容器是不明智的，因为当容器仍然有指向它的值时，对象将不复存在。在最好的情况下，这可能会导致崩溃。在最坏的情况下，它可能会导致在代码的遥远部分中定位错误且难以定位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T19:14:01.650

```
//what is the difference between this
{   
    CUser pUser;
    pUser.m_bActive = FALSE;
    pUser.m_bLoggedIn = FALSE;
    GetSystemTime( &pUser.m_sysTime );
    mUserMap.insert( make_pair( 351, &pUser ) );
} 
```

这将创建一个本地对象：您的`pUser`变量仅存在于此块的范围*内*，并且在到达最后一个时不再存在`}`。这意味着它的析构函数被调用，它所在的内存被回收并且可以被重用。

现在，当您在地图中存储指向这个短暂对象的指针时，您正在存储一个问题。如果您在此块关闭后的任何时间取消引用该指针`}`，您将调用未定义的行为。它可能会起作用。它有时可能会起作用，然后开始失败。基本上，这是一个逻辑错误，也是不可预知错误的良好来源。

```
//and this?
{
    CUser *pUser = new CUser;
    if( pUser )
    {
        pUser->m_bActive = TRUE;
        pUser->m_bLoggedIn = TRUE;
        GetSystemTime( &pUser->m_sysTime );
        mUserMap.insert( make_pair( 351, pUser ) );
    }
} 
```

在这里，您显式地创建了一个实例，该实例的寿命将超过封闭范围，一切都很好。不过，您不需要检查是否`new`返回`NULL`：除非您明确要求它不这样做，否则它会抛出异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:04:20.467

```
{   
    CUser pUser;
    pUser.m_bActive = FALSE;
    pUser.m_bLoggedIn = FALSE;
    GetSystemTime( &pUser.m_sysTime );
    mUserMap.insert( make_pair( 351, &pUser ) );
}
//pUser is not available here 
```

pUser (Object) 不可用（已删除），mUserMap 中的指针无效！

```
{
    CUser *pUser = new CUser;
    if( pUser )
    {
        pUser->m_bActive = TRUE;
        pUser->m_bLoggedIn = TRUE;
        GetSystemTime( &pUser->m_sysTime );
        mUserMap.insert( make_pair( 351, pUser ) );
    }
}
//pUser is not available here 
```

pUser（指针！！）不可用（已删除），内存仍被占用，因此 mUserMap 中的指针有效！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T19:12:31.327

不同之处在于调用创建的对象`new`是在堆上而不是堆栈上创建的。这意味着一旦指针超出范围，分配的内存仍然存在于堆上，您可以通过存储在映射中的指针安全地引用它。

在第一种情况下，您在堆栈上创建一个对象并将其地址添加到地图中。这意味着当您本地创建的变量超出范围时，它会被销毁，并且映射中的指针现在指向一个不再存在的变量。这无疑会导致您的代码出现问题。

如果您必须使用指针而不是实际对象本身，请使用第一种方法。当您使用内存时`new`，内存将一直存在，直到您将其删除（或让另一个对象像共享指针一样处理它）。堆栈对象一旦超出范围就会被销毁。

# scala - 具有特征和泛型的 Scala 类型错误

> ID：11003083
> 
> 赞同：1
> 
> 时间：2012-06-12T19:01:18.390
> 
> 标签：scala

在 python 中长期中断后，我最近回到了 scala，并试图再次围绕类型系统进行思考。我正在尝试制作一个非常简单的 Web URL 调度程序来再次熟悉该语言。到目前为止，我有：

```
trait Executable {
  def execute(request: HttpRequest, response: HttpResponse): Future[HttpResponse]
}

class HelloWorldHandler extends Executable {
  override def execute(request: HttpRequest, response: HttpResponse) = {
    Future.value(response)
  }
} 
```

我认为我在这里拥有的是 Scala 等效的接口 Executable 和实现该接口的类。现在我想创建一个 URL 到处理程序的映射，如下所示：

```
val mapping: Map[String, _ <: Executable] = {
  "/hello" -> new HelloWorldHandler()
} 
```

当我编译这个时，我得到以下错误：

```
type mismatch;
   found   : (java.lang.String, pollcaster.handlers.HelloWorldHandler)
   required: Map[String,pollcaster.Executable]
           "/" -> new HelloWorldHandler()
                  ^ 
```

我不确定我在这里的理解哪里出了问题，但希望能帮助我理解如何将一堆具有 Executable 特征的不同类放入地图对象中？

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:17:03.950

Scala 没有这样的地图文字。但是，以下应该有效：

```
val mapping: Map[String, _ <: Executable] = Map(
  "/hello" -> new HelloWorldHandler(),
  "/something" -> new SomeOtherHandler()
) 
```

这只是使用[`Map`object](http://www.scala-lang.org/api/current/scala/collection/immutable/Map%24.html)的`apply`方法来创建一个新地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T22:12:50.423

您可以从 Tuples2 的通用 Seq 创建 Map，但不会从 Tuple2 自动转换为 Map。这完全有道理：为什么要创建一个只有一个键和一个值的地图？

# ruby - 如何在网络上抓取评论？

> ID：11003084
> 
> 赞同：-2
> 
> 时间：2012-06-12T19:01:18.550
> 
> 标签：ruby, screen-scraping

我想在网络上抓取有关各种产品和事物的评论，我该怎么做。有一家公司叫searchreviews.com，他们做的，我想知道他们是怎么做的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:07:04.610

他们获取页面的 HTML，然后对其进行解析，定位他们需要的任何信息。

这真的很糟糕，因为它取决于你正在抓取的网站的 DOM，它可以随时以微不足道和复杂的方式发生变化。我曾与那些（合法地）抓取各种类型的网站的公司合作过，这太可怕了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:12:49.883

mechanize 或 watir 或 rautomation 是相关的宝石，可能会在这里为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:57:31.097

我经常为不同的客户这样做，而且大多数时候收集评论的网站结构非常好，所以抓取并不难。以 Yelp.com 为例。我在 screen-scraper 中构建了一个例程，它在客户区域搜索邮政编码，使用过滤器来筛选所需的业务类型，并制作一个唯一结果列表（因为邮政编码搜索可能会呈现重复的结果）。从那里我可以找到每个唯一的 URL。仅使用 RegEx 和一些页面迭代就很容易解析评论。

# php - 优雅处理技术 PHP/SQL 错误

> ID：11003086
> 
> 赞同：0
> 
> 时间：2012-06-12T19:01:24.040
> 
> 标签：php

我正在开发一个对数据库交互很重的 PHP Web 应用程序。我的问题是，如何显示“漂亮”错误。我有各种各样的例外，而且几乎没有在应用程序的每个方面，但他们仍然笨拙地将错误文本（我目前可以正常工作）发布在半加载页面上方或空白的白色背景上.

如何将这些重新路由到一个通用错误页面，该页面有一个很好的包含插入错误消息的位置，以便客户和测试人员可以将其传达给我。

我的直接猜测是发布这些错误，但我不知道如何在表单之外执行此操作，更不用说在函数内部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:16:04.953

您正在使用异常，这很好。

您可以使用**[输出缓冲控制](http://php.net/manual/en/book.outcontrol.php)**来停止所有输出，并在页面的所需区域显示所有错误。

实际的技术围绕着简单地将所有错误附加到一个`$errors`数组中并遍历它，沿途显示很好的错误。

# .net - NHibernate 与 EF 4.1+

> ID：11003088
> 
> 赞同：5
> 
> 时间：2012-06-12T19:01:30.497
> 
> 标签：.net, entity-framework, nhibernate, orm, fluent-nhibernate

我试图主要在这个领域决定 2 ORM 的优缺点。

1.  与 Sql Server 2008 R2 和 2012 的兼容性。
    *   这非常重要，因为我们根本没有资源来调试对现有 MS 技术堆栈的不良支持。
    *   自 2012 年以来的提前计划也几乎已经结束，并且迁移到它的计划已经到位。
2.  支持 .NET 4.0 和 4.5（即将推出）
    *   出于与上述几乎相同的原因，再次非常重要。
3.  事务处理和表提示，例如。forcescan forceeek，读取未提交。
    *   很多时候查询优化器做得很好，其他时候我希望灵活地告诉它该做什么。
4.  支持对话、自我跟踪附加和分离
    *   这有点基本。我讨厌长时间保持会话开放。特别是在分布式计算/网络农场环境中。
5.  能够在不破坏数据的情况下处理代码优先开发、创建和更新模式。
    *   EF 4.1 似乎在这方面有所欠缺，尽管 4.3 的跳跃性更好。也比 NH 中的单独映射类更喜欢数据注释。原因是我希望能够在类中发送，并从那里能够创建持久性模型而不扩大映射类的方法。
6.  支持 IRepository 模式
7.  支持 LINQ
    *   与上面的 (6) 有点相关，我希望对 linq 有很好的支持。我不希望开发人员在较低级别的实现中胡闹，并让自己陷入一种特定的 ORM
8.  表现
9.  支持批量 CRUD 操作，无需将数据加载到应用层。例如。我想将特定表的列中的所有行增加 1。我不想将其加载到内存中，并逐行递增。对于如此简单的操作，这将是疯狂的。Linq2Sql 以前有 Magiq 来处理这种事情，NH 和 EF 有什么？
10.  缓存、急切加载、延迟加载、导航属性。
    *   坦率地说，我讨厌这些事情隐含地完成。原因是很难区分缓存的内容、陈旧的内容和新的内容。在 EF 中，我通常会删除所有导航属性，因为我不希望这些属性与前 5 个一起加载，因为这是当前操作需要的，但是在流的更下游，另一个开发人员尝试进行不准确的计数。
    *   所以我的个人政策——除非有充分的理由，否则所有 SOA 都应该是无状态的。如果您需要引用数据，请从持久性中获取。它会更慢，但代码将更具可读性和灵活性。
    *   缓存也是如此。它在分布式环境中足够复杂，我希望所有缓存都非常明确。如果开发人员想要针对缓存编写代码，则应该这样做，而不是针对 ORM 编写代码，并使其看起来好像他正在从持久性中提取新数据，而实际上他正在获取陈旧数据。
    *   现在的问题是，NHibernate 是否有任何概念/抽象可以使缓存、急切/延迟加载比 EF 中当前可用的更明确。在这种情况下，我不太关心易于开发，我更关心清晰度和明确性。

此外，我不太关心 OSS 与专有论点。团队没有时间去窥探底层代码并开始弄乱其他人的代码。我更关心“它只是工作”的角度，而不是其他任何事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T21:24:18.350

[虽然我在另一个问题](https://stackoverflow.com/a/5105917/62024 ".net ORM 比较")中写过其中一些问题，但我认为值得逐点回答。

1.  两者都与所有 SQL Server 版本兼容
2.  两者都与 .NET 4.x 兼容。NH 的目标仍然是 3.5，这不是问题。
3.  两者都有事务处理。两者都不支持本地查询语言中的查询提示，但都允许您使用 SQL。
4.  两者都允许您重新连接断开的实体。我个人认为这不是一个好习惯（我更喜欢传递 DTO）
5.  架构迁移在 EF 中更加成熟和灵活。映射在新罕布什尔州更好。它确实支持使用属性进行映射，这比 EF 的等效功能强大得多，您很快就会发现它甚至不支持基本的东西（例如指定小数字段的精度）
6.  您可以在任何一个之上实现您的存储库。
7.  两者都支持 LINQ。EF 支持更广泛的查询，但有时会产生效率极低的查询。你不应该降低你的开发实践；每种查询方法都有其优点，优秀的开发人员应该知道这些选项。
8.  NH 的性能通常更好，因为它具有映射灵活性以及对批处理、缓存和 DML 语句的支持
9.  EF 不支持批量 (DML) 操作。NH 确实，使用与 SQL 非常相似的 INSERT/UPDATE/DELETE 语句，但在对象模型上（例如，您可以使用点语法而不是显式连接来指定条件）
10.  *   EF 不支持缓存，句号。有一些不受支持的样品尚未准备好投入生产。NHibernate 中的所有缓存都是显式的（您指定要缓存的实体、集合和查询，多长时间等）。它支持像 memcached 这样的分布式缓存，因此它也可以处理过时的缓存数据。
    *   两者都允许您显式地预先加载引用和集合。在我看来，NH 有一个更好的代理设计，它不会用 FK 污染你的模型（这是一个很长的话题，如果你愿意，你可以发布一个后续问题）。和往常一样，在指定必须如何加载每个关系时，您确实具有更大的灵活性。

简而言之：NH 更灵活，性能更好，毫无疑问。EF 具有更好的迁移支持、更简单的学习曲线和更完整的 LINQ 提供程序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-12T19:37:25.180

首先，我在各个方面都比较喜欢NHibernate。Entity Framework 在 5.0 版中也遗漏了一些东西。

1.  在 NHibernate 中添加新类型非常容易，因此如果 SQL Server 2012 有新类型，您可以实现相关方言/提供程序，但社区始终在工作
2.  我知道 NH 团队正在努力支持 FW 4.5，EF从 5.0 开始[支持它](http://msdn.microsoft.com/en-us/data/hh949853.aspx)
3.  使用 NH，您可以为所欲为
4.  NH 支持 Merge 方法重新附加实体，EF 也
5.  EF 不支持命名约定，NH 支持，我也在写一个基于 DataAnnotations 的自动映射器，[这里](http://nuget.org/packages/EyeOpen.DataAnnotations.Nhibernate)是旧版本的链接，等待 2 周的新版本
6.  使用 NH 或 EF，您可以使用存储库和工作单元模式实现数据层，我还必须在 NuGet 上发布这个包
7.  EF 完全支持 LINQ，NH 不支持，但您可以使用扩展[点进行修补](http://fabiomaulo.blogspot.it/2010/07/nhibernate-linq-provider-extension.html)
8.  我觉得性能是同级别的，NH更好地支持二级缓存所以容易防止对数据库的命中
9.  NH 有改进的批处理[支持](http://fabiomaulo.blogspot.it/2011/03/nhibernate-32-batching-improvement.html)，我不知道 EF（特别是 5.0）
10.  NH 对扩展点有更好的实现，因此代理/缓存/日志记录比 EF 强大，但是在 EF 中你可以编写一个[包装器](http://code.msdn.microsoft.com/EFProviderWrappers-c0b88f32)来获得你需要的东西

最后，使用 NH 更容易实现 DDD 模式，因为映射更灵活。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-13T13:32:02.450

你可以使用 bltoolkit ;) -> [http://www.bltoolkit.net/Doc.Linq.ashx](http://www.bltoolkit.net/Doc.Linq.ashx)

只需花 2 分钟时间阅读此内容 -> [http://www.bltoolkit.net/Doc.LinqModel.ashx](http://www.bltoolkit.net/Doc.LinqModel.ashx)

但简而言之

*   非常好的 Linq 支持
*   DML 操作 (nr 9)
*   出色的性能/批量支持
*   生成的很棒的 Sql
*   枚举支持;-)
*   没有延迟加载/实体跟踪/特殊的魔法缓存，你现在这些通常会导致问题的东西
*   没有神奇的特性 -> 更少的抽象 -> 更少的泄漏 -> 更少的麻烦 -> 更小的学习曲线

顺便说一句，它确实是 nr 3，它具有属性 TableFunction 和 TableExpression 以支持表值 UDF、提示和其他围绕表装饰。因此，您可以编写自己的扩展方法以在您的 Linq 语句中使用，例如

```
[TableExpression("{0} {1} WITH (TABLOCK)")]
public Table<T> WithTabLock<T>()
    where T : class 
{
    return _ctx.GetTable<T>(this, ((MethodInfo)(MethodBase.GetCurrentMethod())).MakeGenericMethod(typeof(T)));
} 
```

接着

```
using (var db = new TestDbManager())
{
    var q =
        from p in new Model.Functions(db).WithTabLock<Parent>()
        select p;

    q.ToList();
} 
```

示例 DML 操作

```
 db.Employee
    .Where(e => e.Title == "Spectre")
    .Set(e => e.Title, "Commander")
    .Update(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T19:09:03.367

你不想要他们中的任何一个。您将无法指定任意表格提示，并且它不会像您希望的那样灵活。

如果所有这些都是要求，那么地球上没有 ORM 可以满足这些要求。

编辑：

根据您的评论。nHibernate 将为您提供最强大的功能，但代价是设置模型的复杂性增加。有一些工具可能会有所帮助，但每个工具都有其优点和缺点。

EF 更易于配置和使用，但功能较弱。nHibernate 正好相反。您必须在功能和复杂性之间做出选择。

顺便说一句，关于批量操作和其他操作，您可以直接从框架中为此类操作发出 SQL。或调用存储过程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T20:38:04.787

只是为了添加其他答案......

几天前，[Ricardo Peres写了一篇非常好的、公正的 NHibernate 和 Entity Framework 比较。](http://weblogs.asp.net/ricardoperes/default.aspx)它可能对您的研究有所帮助。

你可以在这里找到它：[http ://weblogs.asp.net/ricardoperes/archive/2012/06/07/differences-between-nhibernate-and-entity-framework.aspx](http://weblogs.asp.net/ricardoperes/archive/2012/06/07/differences-between-nhibernate-and-entity-framework.aspx)

# jquery - 简单模式不显示 ASP.NET 和 VB 的内容

> ID：11003089
> 
> 赞同：0
> 
> 时间：2012-06-12T19:01:34.303
> 
> 标签：jquery, asp.net, simplemodal

我在这里超出了我的知识范围。我只是想念的东西必须是完全明显的。我正在尝试使用 jQuery SimpleModal 来显示一条记录已添加到数据库的确认信息。

我已经设法弄清楚如何让模态显示；但是，仅显示模式的背景。div 中的内容实际上并未在模式中显示。实际上，模式中没有显示任何内容。

背景：

我使用母版页和默认的 ASP.NET css 站点设置。我已经禁用了站点 css（正如您从屏幕截图中看到的那样）并且仅使用来自 simplemodal 的 css。我不能为我的生活得到它来展示的内容。

请参阅此屏幕截图以了解显示的内容：![SimpleModal 的结果](../Images/92d275af1bbadba19455eb08e3d85e29.png)

这是我的aspx：

`<%@ Page Title="" Language="VB" MasterPageFile="~/Site.master" AutoEventWireup="false" CodeFile="CreateDocType.aspx.vb" Inherits="Admin_CreateDocType" %>

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="Server">
    <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </asp:ToolkitScriptManager>
    <script src="../Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="../Scripts/jquery.simplemodal-1.4.2.js" type="text/javascript"></script>
    <h3>Create New Document Type</h3>
    <div>

        <asp:Table ID="tblDocType" runat="server">
            <asp:TableRow>
                <asp:TableCell>
                    <asp:Label ID="lblType" runat="server" Text="Type/Name:"></asp:Label>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:TextBox ID="txtType" runat="server"></asp:TextBox>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell>
                    <asp:Label ID="lblDescription" runat="server" Text="Description:"></asp:Label>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:TextBox ID="txtDescription" runat="server" TextMode="MultiLine" Height="40"></asp:TextBox>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell>
                    <asp:Label ID="lblAutoNumber" runat="server" Text="Auto Number:"></asp:Label>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:DropDownList ID="ddlAutoNumber" runat="server" AutoPostBack="True">
                        <asp:ListItem Value="0">N</asp:ListItem>
                        <asp:ListItem Value="1">Y</asp:ListItem>
                    </asp:DropDownList>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell>
                    <asp:Label ID="lblPrefix" runat="server" Text="Prefix:"></asp:Label>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:TextBox ID="txtPrefix" runat="server"></asp:TextBox>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell>
                    <asp:Label ID="lblSuffix" runat="server" Text="Suffix:"></asp:Label>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:TextBox ID="txtSuffix" runat="server"></asp:TextBox>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell>
                    <asp:Label ID="lblPRRequired" runat="server" Text="Periodic Review:"></asp:Label>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:DropDownList ID="ddlPRRequired" runat="server" AutoPostBack="True">
                        <asp:ListItem Value="0">N</asp:ListItem>
                        <asp:ListItem Value="1">Y</asp:ListItem>
                    </asp:DropDownList>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell>
                    <asp:Label ID="lblPRInterval" runat="server" Text="Review Interval (months):"></asp:Label>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:TextBox ID="txtPRInterval" runat="server"></asp:TextBox>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell>
                    <asp:Label ID="lblSend_LMS" runat="server" Text="Send to LMS:"></asp:Label>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:DropDownList ID="ddlSend_LMS" runat="server" AutoPostBack="True">
                        <asp:ListItem Value="0">N</asp:ListItem>
                        <asp:ListItem Value="1">Y</asp:ListItem>
                    </asp:DropDownList>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell>
                    <asp:Label ID="lblLMSCatalog" runat="server" Text="LMS Catalog:"></asp:Label>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:TextBox ID="txtCatalog" runat="server"></asp:TextBox>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell>
                    <asp:Label ID="lblActive" runat="server" Text="Active:"></asp:Label>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:DropDownList ID="ddlActive" runat="server">
                        <asp:ListItem Value="0">N</asp:ListItem>
                        <asp:ListItem Value="1">Y</asp:ListItem>
                    </asp:DropDownList>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Button ID="btnSubmit" runat="server" Text="Submit" CssClass="submitButton" />
    </div>

            *<div id="basic-modal-content" >
            <h3>Basic Modal Dialog</h3>
            <p>For this demo, SimpleModal is using this "hidden" data for its content. You can also populate the modal dialog with an AJAX response, standard HTML or DOM element(s).</p>
            <p>Examples:</p>
            <p><code>$('#basicModalContent').modal(); // jQuery object - this demo</code></p>
            <p><code>$.modal(document.getElementById('basicModalContent')); // DOM</code></p>

            <p><code>$.modal('&lt;p&gt;&lt;b&gt;HTML&lt;/b&gt; elements&lt;/p&gt;'); // HTML</code></p>
            <p><code>$('&lt;div&gt;&lt;/div&gt;').load('page.html').modal(); // AJAX</code></p>

            <p><a href='http://www.ericmmartin.com/projects/simplemodal/'>More details...</a></p>
        </div>*

    <asp:Label ID="lblAddStatus" runat="server" Text="Set at Runtime" Visible="False"></asp:Label>
    <asp:RequiredFieldValidator ID="rfvDocType" runat="server" Display="None" ErrorMessage="Type/Name is Required!"
        ControlToValidate="txtType"></asp:RequiredFieldValidator>
    <asp:ValidatorCalloutExtender ID="rfvDocType_ValidatorCalloutExtender" runat="server"
        Enabled="True" TargetControlID="rfvDocType">
    </asp:ValidatorCalloutExtender>
    <asp:RequiredFieldValidator ID="rfvDescription" runat="server" Display="None" ErrorMessage="Description is Required!"
        ControlToValidate="txtDescription"></asp:RequiredFieldValidator>
    <asp:ValidatorCalloutExtender ID="rfvDescription_ValidatorCalloutExtender" runat="server"
        Enabled="True" TargetControlID="rfvDescription">
    </asp:ValidatorCalloutExtender>
    <asp:RequiredFieldValidator ID="rfvPrefix" runat="server" Display="None" ErrorMessage="Prefix is Required when using Auto Number!"
        ControlToValidate="txtPrefix"></asp:RequiredFieldValidator>
    <asp:ValidatorCalloutExtender ID="rfvPrefix_ValidatorCalloutExtender" runat="server"
        Enabled="True" TargetControlID="rfvPrefix">
    </asp:ValidatorCalloutExtender>
</asp:Content>` 
```

这是后面的代码：

```
Protected Sub btnSubmit_Click(sender As Object, e As System.EventArgs) Handles btnSubmit.Click

    Dim objDocType As New DocType

    With objDocType
        .Active = ddlActive.SelectedValue
        .AutoNumber = ddlAutoNumber.SelectedValue
        .Created = DateTime.Now()
        .Description = txtDescription.Text
        .LastModified = DateTime.Now()
        .LMS_Catalog = txtCatalog.Text
        .NextDocNumber = 1                                      'Set default of 1
        .PeriodicReview = ddlPRRequired.SelectedValue

        If ddlPRRequired.SelectedValue = "Y" Then
            .PeriodicReview_Interval = CInt(txtPRInterval.Text)
        Else
            .PeriodicReview_Interval = 0
        End If

        .Prefix = txtPrefix.Text
        .Send_To_LMS = ddlSend_LMS.SelectedValue
        .Suffix = txtSuffix.Text
        .Type = txtType.Text

    End With

    If DocDB.CreateNewDocumentType(objDocType) Then
        With lblAddStatus
            .Text = "Document Type Was Added Successfully"
            .Visible = True

        End With
        ScriptManager.RegisterStartupScript(Me.Page, GetType(String), "ShowSuccess", "$('#basicModalContent').modal();", True)
    Else
        With lblAddStatus
            .Text = "There was an error creating the Document Type"
            .Visible = True
        End With
    End If

End Sub 
```

和CSS：

```
 #basic-modal-content {display:none;}

/* Overlay */
#simplemodal-overlay {background-color:#000; cursor:wait;}

/* Container */
#simplemodal-container {height:360px; width:600px; color:#bbb; background-color:#333; border:4px solid #444; padding:12px;}
#simplemodal-container .simplemodal-data {padding:8px;}
#simplemodal-container code {background:#141414; border-left:3px solid #65B43D; color:#bbb; display:block; font-size:12px; margin-bottom:12px; padding:4px 6px 6px;}
#simplemodal-container a {color:#ddd;}
#simplemodal-container a.modalCloseImg {background:url(../img/basic/x.png) no-repeat; width:25px; height:29px; display:inline; z-index:3200; position:absolute; top:-15px; right:-16px; cursor:pointer;}
#simplemodal-container h3 {color:#84b8d9;} 
```

我已经尽我所能缩小范围，但没有任何运气。我可以尝试什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:12:11.183

好吧，我想通了。完全愚蠢的东西。在使用教程时，当 Div 的 id 为 basic-modal-content 时，它一直将 #basicModalContent 列为选择器。

所以在我的 RegisterStartupScript 行中：

```
ScriptManager.RegisterStartupScript(Me.Page, GetType(String), "ShowSuccess", "$('#basicModalContent').modal();", True) 
```

#basicModalContent 不正确。问题是选择器必须匹配 div id。将行更改为：

```
ScriptManager.RegisterStartupScript(Me.Page, GetType(String), "ShowSuccess", "$('#basic-modal-content').modal();", True) 
```

让它工作。我不确定它在演示中是如何工作的，因为我一块一块地复制它，它在我这边不起作用。我不得不错过了什么。

哦，好吧 - 它正在工作。感谢您让我把它放在这里并查看它！

# sharepoint - PublishingRolloutImage 没有持续更新（）；

> ID：11003100
> 
> 赞同：0
> 
> 时间：2012-06-12T19:01:55.520
> 
> 标签：sharepoint, sharepoint-2007

我有一个列表，其中包含三个字段：标题、PublishingRollupImage 和描述。

我想将图像上传到库**SiteCollectionImages**并在列表中引用它。

我可以将文件上传到 SiteCollectionImages 文件夹，并获取它的 url。

我也可以在列表“MyList”中插入项目，但 PublishingRolloutImage 在 Update() 方法之后不会持续存在。我已经尝试为 ImageFieldValue 设置构造函数，如下所示：

```
 new ImageFieldValue("<img src='test.jpg' />"); 
```

但它没有用。

这是我的代码：

```
 using (var site = new SPSite(SPContext.Current.Site.ID))
        using (var web = site.OpenWeb())
        {
            var folder = web.GetFolder("SiteCollectionImages");
            var file = folder.Files.Add(fileName, file, true);
            folder.Update();

            var list = web.Lists["MyList"];
            var item = list.Items.Add();
            item["Title"] = "MyItemTitle";
            item["PublishingRollupImage"] = new ImageFieldValue { ImageUrl = file.Url };
            item["Description"] = "MyDescription";
            item.Update();
        } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:51:42.827

经过大量的试验和错误，我发现我做错了两件事：

这个：

```
item["PublishingRollupImage"] = new ImageFieldValue { ImageUrl = file.Url }; 
```

应该是这样的：

```
var image = item["PublishingRollupImage"] as ImageFieldValue ?? new ImageFieldValue();
image.ImageUrl = String.Format("/{0}", file.Url);
item["PublishingRollupImage"] = image; 
```

并且**file.Url**需要以斜杠开头。如果它不以斜线开头，它将在 Update() 之后中断；方法。这就是 String.Format 存在的原因。

# iis - IIS 6 服务器 AppPool 回收

> ID：11003105
> 
> 赞同：1
> 
> 时间：2012-06-12T19:02:09.407
> 
> 标签：iis, logging, iis-6

我正在尝试为 IIS 6 打开日志，因为我想知道我的工作人员是否由于错误而回收得太快。当从我们的应用程序运行大量查询时，我们的应用程序会不断获得重置连接。

如何获取有关日志和内容的更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:47:33.510

克里斯 - 我正在处理类似的问题，因为我正在编写一些代码来回收 IIS6 和 IIS7+ 中的应用程序池。刚看到这篇文章。希望能帮助到你。

[如何在 IIS 6.0 中配置应用程序池回收事件日志](http://www.iisadmin.co.uk/?p=17)

来自那篇文章的这个命令就像一个魅力：

c:\cscript %SYSTEMDRIVE%\inetpub\adminscripts\adsutil.vbs 设置 w3svc/AppPools/LogEventOnRecycle 255

# android - Android can't load local libcrypto unsatisfied link错误

> ID：11003111
> 
> 赞同：2
> 
> 时间：2012-06-12T19:02:26.860
> 
> 标签：android, java-native-interface, openssl, shared-libraries, android-ndk

我需要在我的应用程序中运行比操作系统中的更新版本的 openssl。我能够修补和 android 源以编译更新版本，然后提取共享库以在我的应用程序中使用。

然后，我能够编译并链接我的本机代码，该代码仅需要较新版本的 openssl 中的函数与我的新共享库（较新的 openssl 的补丁有效）。

我还能够创建一些按预期工作的 jni 函数，但是一旦我添加了仅在应用程序本地较新的 openssl 共享库中的函数，我就会得到一个不满意的链接错误。

我的假设是 libcrypto 和 libssl 的系统版本覆盖了我在 /libs/armeabi/libcrypto.so 和 /libs/armeabi/libssl.so 中的本地版本 .... 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T21:05:53.203

该系统已经附带了一个名为 的库`libcrypto`，它将在您的库之前被选中。最简单的解决方案是给你的库一个不同的名字，并在你的`System.loadLibrary(...)`调用中使用它。

**更新**

正如您所指出的，您将需要使用新名称重建库，而不仅仅是重命名文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:54:17.870

是的，JNI 正在获取系统版本。它根本没有使用你的补丁版本。在独立 JVM 上，您会说`-Djava.library.path=/libs/armeabi`或修改 environment variable `LD_LIBRARY_PATH`。在 Android 上，我想您可以查找系统属性**java.library.path**并将您的库放在某个已知位置（但在系统版本所在的文件夹之前）或实际修改属性 - 将路径添加到本地版本。我确实有一些使用 Android 的经验，但不是专门使用 NDK。

# sql-server - 存储过程和 UDF 的 Oracle vs SQL Server

> ID：11003115
> 
> 赞同：0
> 
> 时间：2012-06-12T19:02:32.383
> 
> 标签：sql-server, oracle, function

首先感谢您提供的任何帮助。我是一个完整的 SQL Server 新手，在过去的 20 年里只使用 Oracle 和 PL/SQL。

我也可以指出的任何相关文档都会很棒，因为我目前的消息来源还没有提供答案！

以下是否属实：Oracle 函数 = SQL Server 用户定义函数 Oracle 过程 = SQL Server SPROC？

我的简化 Oracle 示例：

```
select student_id
       ,someschema.f_get_accommadation_get(student_id) accommodation 
from   students; 
```

其中 someschema.someschema.f_get_accommadation_get(student_id) 是：

```
create or replace function someschema.f_get_accommadation_get(p_student_id in number)
return varchar2 is
local_sped number;

begin
  select sped_cd from someschema.student_sped 
  into local_sped
  where student_id = p_student_id;

  if local_sped = 1 then return('A')
    elsif local_sped = 2 then return('B')
       else        return('C')
    end if;
  end if;
exception when others then return(null);
end; 
```

我可以将 Oracle 函数重新创建为 UDF，将 begin...exception...end 转换为 begin try 并 begin catch 吗？

如果没有，我的其他策略是什么？

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:18:24.470

你基本上是对的。但是，该函数在 SQL Server 中将像一条绝对的狗一样执行。我不确定它在 Oracle 中是否更好，但我当然会尽量避免使用标量函数。对于一般的函数，您最好制作一个内联表函数（[本页](http://msdn.microsoft.com/en-us/library/ms186755.aspx)的第二个示例），然后使用`CROSS APPLY`.

但是，在这种情况下，我几乎肯定会将其重构为`LEFT OUTER JOIN`with`CASE`语句（[请参见此处](http://msdn.microsoft.com/en-us/library/ms181765.aspx)）。

这看起来像：

```
select student_id,
       CASE spec_cd WHEN 1 THEN 'A'
                    WHEN 2 THEN 'B'
                    WHEN 3 THEN 'C'
                    ELSE NULL END as ColumnName
from   students s left outer join 
       someschema.student_sped ss 
    on ss.student_id = s.student_id 
```

# sql-server - SQL Server 2008 MAX 和 MIN 函数无法按预期使用负数

> ID：11003116
> 
> 赞同：4
> 
> 时间：2012-06-12T19:02:36.037
> 
> 标签：sql-server, sql-server-2008, max, min, sqldatatypes

我注意到 SQL Server 2008 的 MAX/MIN 聚合函数不能按预期使用负数。

我正在使用纬度和经度值（许多是负#s），我得到的结果似乎只看绝对值。

```
SELECT 
    MAX(g.Geo_Lat) AS MaxLat, MAX(g.Geo_Long) AS MaxLong,
    MIN(g.Geo_Lat) AS MinLat, MIN(g.Geo_Long) AS MinLong  
FROM Geolocations g 
```

以下是查询结果：

```
MaxLat          MaxLong         MinLat        MinLong
38.3346412      -85.7667496     38.1579234    -85.5289429 
```

请注意 maxlong 和 minlong 的结果不正确。

是否有一些解决方法（除了特殊的 UDF）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T19:30:45.670

**数据类型和排序规则确定顺序。**

地理数据，例如存储为地理类型，可以与浮点值不同的排序 - 但在这种情况下，它们不会。地理类型是不可排序的，只有纬度和经度是可排序的，如您所显示的。但那些输出为浮点值。

您使用什么数据类型导致这种情况发生？经过一番测试，我终于弄明白了。对于地理数据或任何包含负数的数字类型，它将按预期工作。

**您将纬度和经度存储为文本数据 - 不是吗？**

将它们投射为花车。那将解决它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T19:07:23.773

Max 和 Min 聚合在 SQL Server 2008 中按预期工作。你能提供 Geolocations 表的列类型吗？

它确实取决于表中的位置。随着您获得越来越多的条目，它应该接近

```
MaxLat          MaxLong             MinLat           MinLong
90              180                 -90              -180
south pole      far west of        north pole       far east of 
                prime meridian                      prime meridian 
```

本初子午线 0 度穿过英国伦敦。-180 和 180 是与 0 相对的同一条线。

如果您只有几行，请尝试将这些位置添加到您的表中：

```
insert into Geolocations (Geo_Lat, GeoLong) values(-180,-90)
insert into Geolocations (Geo_Lat, GeoLong) values(0,0)
insert into Geolocations (Geo_Lat, GeoLong) values(180,90) 
```

# authentication - 我收到 HTTP/1.1 407 Proxy Authentication Required 错误

> ID：11003117
> 
> 赞同：1
> 
> 时间：2012-06-12T19:02:38.343
> 
> 标签：authentication, proxy, ntlm

我知道已经有很多关于这个特定错误的问题，但我的问题似乎有点独特。

我只收到 HTTP/1.1 407 Proxy Authentication Required 一部分时间（可能是 20%），而大部分时间它工作得很好。我想知道是否有人能想到在我的身份验证下运行的程序会如此不一致地抛出该错误的原因？

完整的命令提示错误减去堆栈跟踪：

```
Jun12, 2012 1:49:01 PM org. apache.http.client.protocol.RequestProxyAuthentication process
SEVER: Proxy authentication error: Credentials cannot be used for NTLM authentication: org.apache.http.auth.UsernamePasswordCredentials
HTTP/1.1 407 Proxy Authentication Required 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-07T21:46:50.987

您的 Web 浏览器可能正在对您进行身份验证，并且当您运行程序时，该身份验证可能会在短时间内保持有效。或者，可能有多个代理，并且在某些时候，您点击了一个您之前没有通过身份验证的代理。

# html - 图片不会显示在手机浏览器中

> ID：11003118
> 
> 赞同：1
> 
> 时间：2012-06-12T19:02:39.857
> 
> 标签：html, mobile, browser

我在移动网页中有一张图片。该图像似乎没有显示在移动浏览器的页面中。但是，如果我直接访问它，它就会显示出来。如果我在常规浏览器中查看该页面，它就会显示出来。我们已经使用适用于 Android 的 Dolphin、适用于 Android 的 Opera、本地 Android 浏览器和适用于 iPhone 的 Safari 对它进行了研究。是什么赋予了？

移动页面（包含视频） [http://bit.ly/L2YA1i](http://bit.ly/L2YA1i)

有问题的图像 [http://bit.ly/L3QlU3](http://bit.ly/L3QlU3)

图像的 HTML（及其容器）

```
<div class="logo"><a href="http://m.celebritycruises.com/m/home.do"><img src="http://media.celebritycruises.com/celebrity/content/en_US/images/cel_misc/logo.jpg" alt="Celebrity Mobile"></a></div> 
```

容器的 CSS>

```
.logo {
    padding:10px 0;
    text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:08:25.317

尝试这个 ：

```
<div class="logo">
     <a href="http://m.celebritycruises.com/m/home.do">
        <img src="http://media.celebritycruises.com/celebrity/content/en_US/images/cel_misc/logo.jpg" 
            alt="Celebrity Mobile" border="0" width="259" height="55"
        />
     </a>
</div> 
```

# facebook - 如何让 Facebook 的“赞”按钮不跟踪我的用户？

> ID：11003121
> 
> 赞同：5
> 
> 时间：2012-06-12T19:02:58.393
> 
> 标签：facebook, facebook-like

我想在我的一个页面上有一个 Facebook 的“Like”按钮，但我工作的组织担心允许 Facebook 跟踪访问我网站的所有用户的隐私影响。

Facebook 提供的典型 Like 按钮是用 Facebook 网站提供的 JavaScript 编写的。从理论上讲，在实践中很可能，这允许 Facebook 跟踪我网站的所有用户——其中许多甚至不是 Facebook 用户。

因此，我不想使用 Facebook 提供和托管的脚本，而是简单地从我的服务器托管一张图片，当用户点击“Like”时，他们将被重定向到 Facebook 网站上的某个 URL，这将使他们能够做他们需要做的任何事情来完成“喜欢”过程。

Facebook 目前是否支持这样的流程？有没有人有做过类似的事情的经验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:07:17.783

如果没有权限和使用 Facebook API，您将无法模拟点赞。但是您可以使用全球 Facebook 共享链接让用户在您的网站上共享一个链接，而无需任何 javascript。你只需要自定义它：

```
http://www.facebook.com/sharer.php?u=<url to share>&t=<title of content> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T19:43:31.417

例如，在德国，您必须用占位符替换所有社交插件，访问者必须点击这些占位符才能喜欢或分享某些内容。这些占位符例如是灰度的 facebook 喜欢按钮的图形。您可以在其上设置一个工具提示，通知用户他必须单击此“占位符”两次以提高个人数据的安全性。当他第一次点击时，一些 javascript 会从 facebook 加载 JS SDK 源代码，并用一个真正的喜欢按钮替换占位符，用户可以在此之后单击该按钮。因此，在用户自行激活社交插件之前，不会将任何数据发送到 facebook/google/whatever。

当然，他必须单击两次……但这是经过良好实践的，也是 IMO 的最佳方式。这方面的工具提示也会告诉他他在做什么。保持喜欢按钮/评论框等感觉的最简单方法是制作该区域的屏幕并将其模糊/灰度化。所以你给它一个非活动/可激活的外观和感觉。

# c# - 我在这里正确使用 nHibernate 的 ISession 吗？

> ID：11003124
> 
> 赞同：1
> 
> 时间：2012-06-12T19:03:13.227
> 
> 标签：c#, asp.net, nhibernate, session

我从 nHibernate 开始，并希望从第一天开始就这样做，所以这就是我使用 ISession 的方式。（每个请求的网络）

这是我的帮手：

```
using System;
using System.Data;
using System.Web;
using NHibernate;
using NHibernate.Cfg;
using NHibernate.Cfg.MappingSchema;
using NHibernate.Context;
using NHibernate.Dialect;
using NHibernate.Driver;
using NHibernate.Mapping.ByCode;
using NHibernate.Tool.hbm2ddl;

namespace Gigastence.nHibernate.Web
{
    public static class Helper
    {
        #region Public Enums

        public enum DatabaseType
        {
            MSSQL2005,
            MSSQL2008,
            MySQL,
            MySQL5
        }

        #endregion

        #region Private Members

        private static HbmMapping _hbmMapping;
        private static Type[] _mappingTypes;
        private static Configuration _nHibernateConfiguration;

        #endregion

        #region Public Properties

        public static bool GenerateStatistics { get; set; }
        public static string ConnectionString { get; set; }

        public static ISession GetCurrentSession
        {
            get
            {
                //  Store the current ISession
                ISession tempSession = GetSessionFactory.GetCurrentSession();

                //  Return the current Session in for the relevant Context
                return tempSession.IsOpen ? tempSession : OpenSession();
            }
        }

        public static ISessionFactory GetSessionFactory { get; private set; }
        public static DatabaseType WorkingDatabaseType { get; set; }

        #endregion

        #region Private Methods

        private static void CompileSessionFactory()
        {
            //  ToDo: See if we can speed up this process by creating a static file to reference
            //
            //  Build the nHibernate Configuration and store it
            _nHibernateConfiguration = ConfigureNHibernate();

            //  Deserialize and Add the supplied Mappings to the nHibernate Configuration
            _nHibernateConfiguration.AddDeserializedMapping(_hbmMapping, null);

            //  ToDo: Figure out what this does!
            //
            SchemaMetadataUpdater.QuoteTableAndColumns(_nHibernateConfiguration);

            //  Create the Session Factory and store it
            GetSessionFactory = _nHibernateConfiguration.BuildSessionFactory();
        }

        private static Configuration ConfigureNHibernate()
        {
            //  Create a new nHibernate configuration
            var configure = new Configuration();

            //      ToDo: Allow for setting name of SessionFactory
            //
            //  Name the Session Factory
            configure.SessionFactoryName("Default");

            //  Wire up Session Factory Database component based on working database type
            switch (WorkingDatabaseType)
            {
                case DatabaseType.MySQL5:

                    //  !!! Is a MySQL 5 Database
                    configure.DataBaseIntegration(db =>
                    {
                        db.Dialect<MySQL5Dialect>();
                        db.Driver<MySqlDataDriver>();
                        db.KeywordsAutoImport = Hbm2DDLKeyWords.AutoQuote;
                        db.IsolationLevel = IsolationLevel.ReadCommitted;
                        db.ConnectionString = ConnectionString;
                        db.Timeout = 10;
                    });
                    break;
            }

            //  Generate Statistics, if required
            if (GenerateStatistics) configure.SessionFactory().GenerateStatistics();

            //  ToDo: Add modifier based on required Session Context
            //
            configure.CurrentSessionContext<ManagedWebSessionContext>();

            //  Return the Configuration
            return configure;
        }

        #endregion

        #region Public Methods

        public static void AddMapping(Type mappingType)
        {
            //  Determine if array is already available
            if (_mappingTypes == null)
            {
                //  Create a new array with one element
                _mappingTypes = new Type[1];
            }

            //  Copy existing array into a new array with one more element
            Array.Resize(ref _mappingTypes, _mappingTypes.Length + 1);

            //  Add the Mapping Type
            Array.Copy(new object[] { mappingType }, 0, _mappingTypes, _mappingTypes.Length - 1, 1);
        }

        public static void AddMappings(Type[] mappingTypes)
        {
            //  Iterate through passed types
            foreach(Type passedType in mappingTypes)
            {
                //  Add each typre
                AddMapping(passedType);
            }
        }

        public static void Application_BeginRequest()
        {
            //  Add the ISession object to the current request's Context for use throughout the request
            ManagedWebSessionContext.Bind(HttpContext.Current, OpenSession());
        }

        public static void Application_End()
        {
            //  Dispose of the Session Factory
            GetSessionFactory.Dispose();
        }

        public static void Application_EndRequest()
        {
            //  Unbind the Session from the request's context and place in the ISession holder
            ISession session = ManagedWebSessionContext.Unbind(HttpContext.Current, GetSessionFactory);

            //  Flush and Close the Session if it is still open
            if (session == null || !session.IsOpen) return;

            //  Proceed
            session.Flush();
            session.Close();
            session.Dispose();
        }

        public static void Application_Error()
        {
            //  Rollback transaction if there is one
            RollbackTransaction();
        }

        public static void BuildDatabase()
        {
            //  ToDo: Tidy Up and extend
            new SchemaExport(_nHibernateConfiguration).Execute(false, true, false);
        }

        public static void BuildSessionFactory(bool forceRebuild)
        {
            //  Determine if this is a forced rebuild
            if (forceRebuild)
            {
                //  !!! Forced rebuild

                //  Compile Session Factory
                CompileSessionFactory();
            }
            else
            {
                //  !!! Not a forced rebuild

                //  Reference the current Session Factory if available
                ISessionFactory sessionFactory = GetSessionFactory;

                //  Determine if Session Factory is built already
                if (sessionFactory == null)
                {
                    //  Compile Session Factory
                    CompileSessionFactory();
                }
            }
        }

        public static void CompileMappings(Type baseEntityToIgnore)
        {
            //  Using the built-in auto-mapper
            var mapper = new ModelMapper();

            //  Add prefetched Types to Mapper
            mapper.AddMappings(_mappingTypes);

            //  Compile the retrieved Types into the required Mapping
            _hbmMapping = mapper.CompileMappingForAllExplicitlyAddedEntities();
        }

        public static ISession OpenSession()
        {
            return GetSessionFactory.OpenSession();
        }

        public static void RollbackTransaction()
        {
            //  Get the current ISession from the request's context and place in the ISession holder
            ISession session = GetCurrentSession;

            //  Determine if the ISession exists
            if (session == null) return;

            //  It does, rollback current transaction if there is one
            if (session.Transaction.IsActive && !session.Transaction.WasRolledBack)
            {
                //  There was a transaction, rollback
                session.Transaction.Rollback();
            }
        }

        #endregion
    }
} 
```

这就是我使用它的方式：

```
using (ISession session = Helper.GetCurrentSession)
{
    using (ITransaction transaction = session.BeginTransaction())
    {
        //  Add data to the NHibernateSchemaVersions table
        var table = new NHibernateSchemaVersions { Component = "Web.Provider.Membership", Version = 1 };
        session.Save(table);

        transaction.Commit();
    }
} 
```

到目前为止，我知道这是我应该做的，将工作包装在事务中。

不过，由于 ISession 对象上的 USING 语句，我发现会话在每次调用结束时关闭；这就是为什么我在 Helper.GetCurrentSession 调用中添加了检查它是否仍然打开的逻辑。

我这样做对吗？我认为会话旨在保持活动状态直到请求结束，并确定它何时进入数据库。

我是否应该简单地获取会话并使用它而不是 USING 语句：

```
ISession session = Helper.GetCurrentSession;

using (ITransaction transaction = session.BeginTransaction())
{
    //  Add data to the NHibernateSchemaVersions table
    var table = new NHibernateSchemaVersions { Component = "Web.Provider.Membership", Version = 1 };
    session.Save(table);

    transaction.Commit();
} 
```

如果是这种情况，我会在其他地方遇到问题吗？

感谢您的时间和帮助。

注意：我确实在寻找答案，但我无法将我的问题与任何事情联系起来。如果我错过了，请给我一个链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:06:47.983

我遇到了同样的问题。`Dispose()`我现在在请求结束时明确指出会话——问题已解决。

而且由于我的库也用于非 Web 应用程序，因此我的帮助程序类和我的存储库提供了两个入口点——一个用于“持久”会话（显式关闭），另一个设计用于每次行程会话（隐式关闭`using`语句）。

“持久”会话的另一个很好的用途是，如果您在关系映射上使用延迟加载。如果在检索“父”对象（通过`using`语句）时自动关闭会话，然后尝试检索延迟加载属性，则会生成异常，因为它将尝试使用的会话已关闭。

**更新**

根据要求，这是我目前的助手类——我的非常基础。我的所有配置都在一个 XML 文件中。对于我的 MVC Web 应用程序，我通过调用 EndRequest 来关闭 Global.asx 中的会话`NHibernateHelper.GetPersistentSession().Dispose()`。

```
public class NHibernateHelper
{
    private static ISessionFactory _sessionFactory;
    private static ISessionFactory SessionFactory
    {
        get
        {
            if (_sessionFactory == null)
            {
                var configuration = new NHibernate.Cfg.Configuration();
                configuration.Configure();
                configuration.AddAssembly(typeof(NHibernateHelper).Assembly);
                _sessionFactory = configuration.BuildSessionFactory();
            }
            return _sessionFactory;
        }
    }

    public static ISession OpenSession()
    {
        return SessionFactory.OpenSession();
    }

    private static ISession _persistentSession = null;
    public static ISession GetPersistentSession()
    {
        if (_persistentSession == null)
        {
            _persistentSession = SessionFactory.OpenSession();
        }

        return _persistentSession;
    }
} 
```

# android - Android 旋转图像触摸

> ID：11003125
> 
> 赞同：3
> 
> 时间：2012-06-12T19:03:13.367
> 
> 标签：android, image, rotation, ontouchlistener

我正在编写一段代码，它缩放图像，缩放并使用 onTouchListener 移动。现在我想使用触摸旋转图像，以下是我的代码：

```
@Override
    public boolean onTouch(View v, MotionEvent rawEvent) {
        WrapMotionEvent event = WrapMotionEvent.wrap(rawEvent);
        // ...
          int rotation = 25;
          // Dump touch event to log
          dumpEvent(event);
        ImageView view = (ImageView) v;

        // Dump touch event to log
        dumpEvent(event);

        // Handle touch events here...
        switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            savedMatrix.set(matrix);
            start.set(event.getX(), event.getY());
            Log.d(TAG, "mode=DRAG");
            mode = DRAG;
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            oldDist = spacing(event);
            Log.d(TAG, "oldDist=" + oldDist);
            if (oldDist > 10f) {
                savedMatrix.set(matrix);
                midPoint(mid, event);
                mode = ZOOM;
                Log.d(TAG, "mode=ZOOM");
            }
            break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
            mode = NONE;
            Log.d(TAG, "mode=NONE");
            break;
        case MotionEvent.ACTION_MOVE:
            if (mode == DRAG) {
                // ...
                matrix.set(savedMatrix);
                matrix.postTranslate(event.getX() - start.x, event.getY()
                        - start.y);
            } else if (mode == ZOOM) {
                float newDist = spacing(event);
                Log.d(TAG, "newDist=" + newDist);
                if (newDist > 10f) {
                    matrix.set(savedMatrix);
                    float scale = newDist / oldDist;
                    matrix.postScale(scale, scale, mid.x, mid.y);
                }
            }
            break;

        }

        view.setImageMatrix(matrix);
        return true; // indicate event was handled
    }

    /** Show an event in the LogCat view, for debugging */
    private void dumpEvent(WrapMotionEvent event) {
        // ...
        String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE",
                "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
        StringBuilder sb = new StringBuilder();
        int action = event.getAction();
        int actionCode = action & MotionEvent.ACTION_MASK;
        sb.append("event ACTION_").append(names[actionCode]);
        if (actionCode == MotionEvent.ACTION_POINTER_DOWN
                || actionCode == MotionEvent.ACTION_POINTER_UP) {
            sb.append("(pid ").append(
                    action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
            sb.append(")");
        }
        sb.append("[");
        for (int i = 0; i < event.getPointerCount(); i++) {
            sb.append("#").append(i);
            sb.append("(pid ").append(event.getPointerId(i));
            sb.append(")=").append((int) event.getX(i));
            sb.append(",").append((int) event.getY(i));
            if (i + 1 < event.getPointerCount())
                sb.append(";");
        }
        sb.append("]");
        Log.d(TAG, sb.toString());
    }

    /** Determine the space between the first two fingers */
    private float spacing(WrapMotionEvent event) {
        // ...
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    /** Calculate the mid point of the first two fingers */
    private void midPoint(PointF point, WrapMotionEvent event) {
        // ...
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    } 
```

我想我快到了，谁能帮我解决旋转问题以及上述功能......在此先感谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:13:34.923

您已经有了 matrix.postTranslate 和 matrix.postScale。您需要添加的只是 matrix.postRotate！:)

[http://developer.android.com/reference/android/graphics/Matrix.html](http://developer.android.com/reference/android/graphics/Matrix.html)

看一下这个：

[http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/)

# three.js - 按名称选择 Collada 组和子项

> ID：11003126
> 
> 赞同：0
> 
> 时间：2012-06-12T19:03:13.677
> 
> 标签：three.js

我正在将 Cinema4D 生成的 Collada 文件加载到 Three.js 中。我从其他帖子中了解到，您可以选择和修改单个孩子，`dae.children[i];`但有没有办法按他们的名字选择他们？

此外，您可以在 Cinema4D 中对孩子进行分组。有没有办法按名称选择这些组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:28:22.510

`Object3D`的`getChildByName`方法可能就是你所追求的。 [http://mrdoob.github.com/three.js/docs/49/#Object3D](http://mrdoob.github.com/three.js/docs/49/#Object3D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T03:16:18.380

```
dae.getChildByName( 'ID50', true ) 
```

正在工作中。

# javascript - 在javascript中同步两个滚动条

> ID：11003132
> 
> 赞同：2
> 
> 时间：2012-06-12T19:03:53.913
> 
> 标签：javascript, asp.net, scrollbar

如何在 Javascript 中同步两个垂直滚动条？

我有两个高度相同的 div，我希望能够用一个滚动条滚动它们。

这是我到目前为止所尝试的。

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
CodeBehind="Default.aspx.cs" Inherits="WebApplication2._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<script language="javascript" type="text/javascript">
    function OnScroll(div) {
        //if ($.get('div1') != null)
        //    $.get('div1').scrollTop = div.scrollTop;
        var d2 = document.getElementById("div2");
        //d2.offsetTop;
        var d1 = document.getElementById("div1");
        d1.style.top = d2.offsetTop;

       // document.getElementById("div1").offsetTop = d2.offsetTop;
    }
</script>
Start of panel<br />
<asp:Panel ID="Panel1" runat="server">
</asp:Panel>
End of panel<br />
<br />
start of table
<table>
    <tr>
        <td>
            <div id="div1" style="max-width: 300px; max-height: 500px; overflow-x: auto;        overflow-y: auto;">
                <asp:Table ID="Table1" runat="server">
                </asp:Table>
            </div>
        </td>
        <td>
            <div id="div2" style="max-width: 300px; max-height: 500px; overflow: auto;" onscroll="OnScroll(this)">
                <asp:Table ID="Table2" runat="server">
                </asp:Table>
            </div>
        </td>
    </tr>
</table>
end of table 
```

所以基本上每当在 div2 中调用 onscroll 事件时，它都会调用应该将 div1 设置为相同偏移量的 javascript 函数。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:07:03.850

你不需要使用`scrollTop`吗？

```
function OnScroll(div) {
    var d1 = document.getElementById("div1");
    d1.scrollTop = div.scrollTop;
} 
```

我认为如果您设置`scrollTop`的值高于其最大值，可能会出现问题。

# eclipse - 尝试在 Eclipse 中安装 apache tomcat 时出现“HTTP 状态 404 - /”（localhost:8080）

> ID：11003135
> 
> 赞同：5
> 
> 时间：2012-06-12T19:04:12.713
> 
> 标签：eclipse, tomcat

我已经在 Windows Vista 上安装了 eclipse，并且我添加了一个新的 Apache Tomcat 服务器 Apache Tomcat/7.0.27。

在 Eclipse 中启动 Apache 后，我在 url 中输入以下地址“localhost:8080”

我得到一个页面说：

```
HTTP Status 404 - /
type Status report
message /
description The requested resource (/) is not available.
Apache Tomcat/7.0.27 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-13T05:21:44.643

Hi I faced same problem and below steps resolved the problem.

1.  In the eclipse right click on server and click on properties.
2.  If Location is set workspace/metadata click on switch location and so that it refers to `/servers/tomcatv7server` at `localhost.server`
3.  Save and close
4.  Next double click on server
5.  Under server locations mostly it would be selected as `useworkspacemetadata`
6.  Instead, select `usetomcatinstallation`
7.  Save changes
8.  Restart server and verify `localhost:8080` works.

# php - 如何使用 WHERE 子句中的一系列值从表中选择多行？

> ID：11003140
> 
> 赞同：1
> 
> 时间：2012-06-12T19:04:32.070
> 
> 标签：php, mysql

这个问题是如何使用 WHERE 子句中的一系列值从表中选择多行。这是我想要做的。

我有一个评论应用程序，您可以在其中发表评论，您的朋友可以回复它，有点像 facebook 的墙。在同一个应用程序中，我允许每个成员彼此成为朋友。

我现在面临的挑战是，不仅要显示所有者的评论，还要显示他们的朋友。我想要与 facebook 的墙类似的功能。
所以这就是我所拥有的：

```
 Friends Table                           Commenting Table
 _______________________        ___________________________________________
| member_id | friend_id |      | member_id |           comment             |
 -----------------------        -------------------------------------------
|    10     |    14     |      |    10     |      Hello member # 14        |
|    14     |    10     |      |    14     |      hey how are you          |
|    17     |    9      |      |    17     |      Hello world              |
|    17     |    10     |      |    10     |      Hello                    |
 ------------------------       -------------------------------------------- 
```

所以成员 10 是成员 14 和 17 的朋友。我想显示成员 10、14 和 17 的评论，而不是只显示成员 10 的评论。像这样：

```
 Member Comments                          All Member Comments
 _______________________________        ___________________________________________
| member_id |      comment      |      | member_id |           comment             |
 -------------------------------        -------------------------------------------
|    10     | Hello member # 14 |      |    10     |      Hello member #           |
|    10     |       Hello       |      |    14     |      hey how are you          |
---------------------------------      |    17     |      Hello world              |
                                       |    10     |      Hello                    |
                                       -------------------------------------------- 
```

所以我正在尝试 mysql_query("SELECT comments `Commenting Table`WHERE `member_id`= '10' ORDER BY member_id DESC") 并执行一堆 while 循环，但这不是很有效。有没有其他方法可以使用多个值来选择评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:10:07.877

```
SELECT *
FROM `Commenting Table`
WHERE member_id=10
OR member id IN (
  SELECT friend_id FROM `Friends Table` WHERE member_id=10
-- Uncomment the following if your Friends Table is asymetrical
--  UNION
--  SELECT member_id FROM `Friends Table` WHERE friend_id=10
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:11:13.257

您可以通过朋友的 ID 和成员的 ID 加入表格，然后通过成员 ID 进行分组：

```
SELECT f.member_id AS user, c.member_id AS commentBy, c.comment AS comment
FROM commentingTable AS c, friendsTable AS f
WHERE c.member_id = f.member_id 
  OR c.member_id = f.friend_id
GROUP BY f.member_id 
```

# java - Maven + Spring MVC + LessCss + Wro4j

> ID：11003141
> 
> 赞同：1
> 
> 时间：2012-06-12T19:04:44.680
> 
> 标签：java, maven, spring-mvc, less

如果我走错了方向，我需要如何集成 Maven、Spring MVC、LessCss 和 Wro4j 的示例，是否有任何其他软件可以无痛地集成 spring mvc + maven 和 lesscss？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:52:04.680

你应该试试[m2e-wro4j](https://community.jboss.org/en/tools/blog/2012/01/17/css-and-js-minification-using-eclipse-maven-and-wro4j) eclipse 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T22:22:49.503

正如我之前的[回答](https://stackoverflow.com/questions/10264291/the-requested-resource-is-not-available/10264415#10264415)中所解释的：

我对您的建议是下载 spring 源代码（Eclipse 之类的 IDE）：

[http://www.springsource.org/springsource-tool-suite-download](http://www.springsource.org/springsource-tool-suite-download)

下载后，您可以简单地转到文件 > 新建 > Spring 模板项目 > Spring MVC 项目

完成创建项目后，将为您创建工作模板项目（结构化项目、示例控制器文件、示例视图、pom.xml 等）。您可以构建它并将其部署到 tomcat 或其他任何东西。

这样你已经得到了工作示例，你可以从那里获取它。

顺便提一句。看一下这个 ：

[https://github.com/SpringSource/spring-mvc-showcase/blob/master/MasteringSpringMVC3.pdf?raw=true](https://github.com/SpringSource/spring-mvc-showcase/blob/master/MasteringSpringMVC3.pdf?raw=true)

足以让您开始使用 Spring MVC。

就像使用lesscss 一样，在您完成其他所有工作后应该非常简单。

# javascript - 在 div 中显示 URL 的内容

> ID：11003142
> 
> 赞同：2
> 
> 时间：2012-06-12T19:04:56.647
> 
> 标签：javascript, jquery

我正在打开以下格式的弹出窗口：

```
window.open('http://URL', 'invitationwindow', 'height=250,width=500,scrollbars=yes,resizable=yes,status=yes') 
```

如何在同一页面的 div 中获取弹出窗口的内容。我的意思是，我不想要弹出窗口，但它的内容应该显示在触发弹出窗口的同一页面中。

如何使用 Jquery 来做到这一点？我知道`.append()`并将`.html()`向 div 添加内容，但在这种情况下，我从[http://example.com](http://example.com)之类的 URL 获取内容。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T19:08:29.277

使用 jquery [`load()`](http://api.jquery.com/load/)：

```
$('#mydiv').load('http://URL'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T19:08:44.427

通常人们`<iframe>`为此使用一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T19:08:21.480

使用 jquery，使用这个：

```
$.get('ajax/test.html', function(data) {
  $('.result').html(data);
  alert('Load was performed.');
}); 
```

和

```
$('#result').load('ajax/test.html', function() {
  alert('Load was performed.');
}); 
```

希望能帮助到你！

# javascript - 第一次运行应用程序时，使用 WebView.loadUrl 执行 javascript 不起作用

> ID：11003146
> 
> 赞同：2
> 
> 时间：2012-06-12T19:05:01.857
> 
> 标签：javascript, android, webview

在我的项目中，首先，我从数据库中获取了几个字符串，然后我将每个字符串标记为 a并通过调用 javascript 函数`<li>`将它们附加到空中。`<ul>`每当我修改代码并运行它时，第一次似乎没有执行 js 函数，但是当我再次运行它时， js 工作，所有字符串都已添加到`<ul>`as `<li>`。只要我从未修改过代码，应用程序就可以正常运行，这意味着如果我在移动设备中重新安装它，js 直到第二次打开这个应用程序才能工作。数据库的东西没有错。我认为问题是在执行 js 之前绘制了 webview，然后当重新绘制 webview 时，一切正常。

这是我的活动.java

```
public class WebView_testActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    WebView web = (WebView)findViewById(R.id.web_content);
    webView_handler(web);
    data_handler(web);
    Log.d(MyLog.LOG, "end of file");

}

private void webView_handler(WebView web){

    web.loadUrl("file:///android_asset/FormPanel.html");
    web.getSettings().setJavaScriptEnabled(true);

}

private void data_handler(WebView web){
    boolean hasSD = Environment.getExternalStorageState().equals( android.os.Environment.MEDIA_MOUNTED); 
    //String SDPATH = Environment.getExternalStorageDirectory().getPath();

    if(hasSD){

        DbHelper data_helper = new DbHelper(this, "/mnt/sdcard/CTIL/QuestionDB/Q1.db");
        SQLiteDatabase database = data_helper.getReadableDatabase();
        String sql = "SELECT pe.Description FROM tblFormEngine_PoolElement pe " + 
                "NATURAL JOIN tblFormEngine_FormElement fe WHERE fe.PanelID = 1";
        Cursor c = database.rawQuery(sql,null);

        if(c.getCount() == 0)
            Log.d(MyLog.LOG, "empty");      

        c.moveToFirst();

        if(!c.isAfterLast()){

            do{
                String description = c.getString(0);
                String html = "<li><p>" + description + "</p></li>";
                Log.d(MyLog.LOG, html);
                //web.loadUrl("javascript:Element_AppendHTML('content',\""+html+"\")"); 
                MyThread mt = new MyThread(web, html);
                mt.start();
            }while(c.moveToNext());
        }

        c.close();
        database.close();

    }

}

private class MyThread extends Thread{

    private WebView web;
    private String html;

    MyThread(WebView web, String html){     
        this.web = web;
        this.html = html;
    }

    public  void run(){
        try {
                   web.loadUrl("javascript:Element_AppendHTML('content',\""+html+"\")");
            sleep(500);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
}
} 
```

这是js函数（实际上是一个JQuery函数）：

```
function Element_AppendHTML(ElementID,HTML)
{
    $("#"+ElementID).append(HTML);  
} 
```

以下是您需要查看的原始 HTML 文件：

```
<html>
<head>
<title>Form Panel</title>
<meta charset="utf-8">
<link rel="stylesheet" href="theme/FormPanel_Basic.css">
<script type="text/javascript" src="js/jquery-1.5.1.js"></script>   
<script type="text/javascript" src="js/jquery.scrollTo-1.4.2-min.js"></script>     
<script type="text/javascript" src="js/jquery.scrollToMe.js"></script>   
<script type="text/javascript" src="js/FormPanel.js"></script>
</head>
<body>    

<ul id="content" selected="true">

</ul>

</body>
</html> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:43:38.973

从改变

```
web.loadUrl("file:///android_asset/FormPanel.html");
web.getSettings().setJavaScriptEnabled(true); 
```

至

```
web.getSettings().setJavaScriptEnabled(true);
web.loadUrl("file:///android_asset/FormPanel.html"); 
```

完成设置后不调用 loadurl 吗？

# iphone - 点击搜索栏会导致异常，但仅在真实设备上

> ID：11003148
> 
> 赞同：0
> 
> 时间：2012-06-12T19:05:10.700
> 
> 标签：iphone, objective-c, ios, xcode, ios-simulator

点击我的搜索栏会导致以下异常：`"'NSInvalidArgumentException', reason: '-[NSIndexPath isEqualToString:]:unrecognized selector sent to instance 0x1d52d9b0'"`

使用模拟器做得很好，一切正常。但在真实设备上，应用程序崩溃。

为了调试，我在相关视图控制器中的每个方法上都放置了一个断点，但是在应用程序崩溃之前录制之后没有调用我的任何方法。之后，我尝试从`UISearchBarDelegate`协议和协议中实现所有方法`UISearchDisplayDelegate`。我再次放置了一个断点和一些`NSLog`调试输出。仅在崩溃之前`- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller`调用。

知道在哪里看或尝试什么吗？我不明白为什么模拟器上没有触发异常。我真的很想知道发生了什么事；）

这是导致该错误的代码：

```
 NSString *labelText;
if ([self.searchDisplayController isActive]) {
    if (self.filteredStrings > 0) {
        labelText = [self.filteredStrings objectAtIndex:indexPath.row];
    }
}
else
{
     ...
}

    cell.textLabel.text = labelText; 
```

好的，这是固定代码：

```
 NSString *labelText;
if ([self.searchDisplayController isActive]) {
    if (self.filteredStrings > 0) {
        labelText = [self.filteredStrings objectAtIndex:indexPath.row];
        cell.textLabel.text = labelText;
    }
}
else
{
     ...
     cell.textLabel.text = labelText;
} 
```

# php - 循环排序 foreach

> ID：11003149
> 
> 赞同：0
> 
> 时间：2012-06-12T19:05:19.500
> 
> 标签：php, foreach

```
<?php
    $array = array(array("aaa1", "aaa2", "aaa3", "aaa4"),
                   array("bbb1", "bbb2", "bbb3", "bbb4"),
                   array("ccc1", "ccc2", "ccc3", "ccc4"), 
                   array("ddd1", "ddd2", "ddd3", "ddd4"));
    ?>
    <table border="2">
    <?php
    foreach($array as $arr): ?>
        <tr>
   <?php     foreach($arr as $a):
            echo "<td>" . $a . "</td>";
        endforeach; ?>
        </tr>
  <?php  endforeach;
    ?>
    </table> 
```

这告诉我：

```
aaa1 aaa2 aaa3 aaa4
bbb1 bbb2 bbb3 bbb4
ccc1 ccc2 ccc3 ccc4
ddd1 ddd2 ddd3 ddd4 
```

我想收到：

```
aaa1 bbb1 ccc1 ddd1
aaa2 bbb2 ccc2 ddd2
aaa3 bbb3 ccc3 ddd3
aaa4 bbb4 ccc4 ddd4 
```

但我必须使用 FOREACH，而不是 FOR。如果这更容易，我可以使用 DIV，但是如何使用？

我怎样才能做到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:08:02.617

```
foreach(array_keys($array[0]) as $key) {
    echo "<tr>";
    foreach($array as $arr) {
        echo "<td>".$arr[$key]."</td>";
    }
    echo "</tr>";
} 
```

虽然，你会更好`for`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:16:03.430

如果使用 DIV 是一个选项：

```
<?php
    $array = array(
        array("aaa1", "aaa2", "aaa3", "aaa4"),
        array("bbb1", "bbb2", "bbb3", "bbb4"),
        array("ccc1", "ccc2", "ccc3", "ccc4"), 
        array("ddd1", "ddd2", "ddd3", "ddd4")
    );
    foreach($array as $abcd) {
        ?><div style="float: left;"><?php
        foreach($abcd as $oneTwoThree) {
            ?><div><?php
            echo $oneTwoThree;
            ?></div><?php
        }
        ?></div><?php
    }
?>
<div style="clear: both;"></div> 
```

# mysql - 使用单列mysql进行全文搜索

> ID：11003152
> 
> 赞同：2
> 
> 时间：2012-06-12T19:05:40.457
> 
> 标签：mysql

我是 MySQL 的新手。我正在尝试表搜索，目前我正在使用 like 关键字...。但我喜欢实现全文搜索方法..

```
 CREATE TABLE art(
   id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
    body TEXT,
   FULLTEXT (body)
   ) ENGINE=MyISAM

INSERT INTO `art` (`id` , `body`) VALUES
(1,  'php coding and soluton'),
(2,  'java coding and soluton'),
(3, 'DBMS stands for DataBase ...'),
(4, 'After you went through a ...'),
(5, 'In this tutorial we will show ...'),
(6,  '1\. Never run mysqld as root. 2\. ...'),
(7, 'In the following database comparison ...'),
(8,  'When configured properly, MySQL ...');

SELECT * FROM art 
WHERE MATCH (body) AGAINST ('database'); 
```

我正在使用此代码来实现 Mysqlfulltext serach 。但我无法得到答案。我只在 Body 上使用全文搜索 .. 是否可以使用请帮助我任何人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:12:07.800

这会起作用

```
select * from art where MATCH (body) AGAINST ('database')>0; 
```

还看到这个：

```
mysql> select MATCH (body) AGAINST ('database') from art;
+-----------------------------------+
| MATCH (body) AGAINST ('database') |
+-----------------------------------+
|                                 0 |
|                                 0 |
|                  1.06197416782379 |
|                                 0 |
|                                 0 |
|                                 0 |
|                  1.07391238212585 |
|                                 0 |
+-----------------------------------+
8 rows in set (0.00 sec) 
```

# javascript - 使用原型链定义函数

> ID：11003154
> 
> 赞同：1
> 
> 时间：2012-06-12T19:05:56.223
> 
> 标签：javascript

假设我有一个对象`X`定义为

```
var X = function () {};
X.prototype.doSomething = function () {};
X.prototype.doSomethingElse = function () {}; 
```

是否有可能构造一个**函数** ？请注意，我也必须能够没有.`f``f instanceof X``f()``TypeError`

* * *

在 Mozilla 中，我可以做我想做的事`__proto__`：

```
var f = function () {};
f.__proto__ = new X; 
```

但是，这是 (1) 非标准和 (2) 已弃用的。[MDN 的页面`__proto__`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/Proto)建议`Object.getPrototypeOf`改用，但我真正想要的是一个`Object.setPrototypeOf`（它不存在，尽管这个想法是在[这个错误报告](https://bugs.ecmascript.org/show_bug.cgi?id=264)中提出的）。

我想要的一个便宜的近似值是

```
var f = function () {};
jQuery.extend(f, new X); 
```

不幸的是，这并不`f instanceof X`成立（我也不希望它成为现实！）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:19:39.477

不，这是不可能的（以标准方式）。创建可调用对象（即函数）的每一种可能性都将创建一个继承自`Function.prototype`¹的对象；并且您不能在`[[prototype]]`之后更改对象的²。

也可以看看：

*   [使用自定义原型在 javascript 中创建函数](https://stackoverflow.com/q/12443769/1048572)
*   [你能在 JavaScript 中使用自定义原型创建函数吗？](https://stackoverflow.com/q/16596117/1048572)
*   [是否可以使用 Function.prototype 以外的其他原型创建函数？](https://stackoverflow.com/q/5135326/1048572)
*   [JavaScript 对象可以有一个原型链，但也可以是一个函数吗？](https://stackoverflow.com/q/340383/1048572)
*   [函数的自定义原型链](https://stackoverflow.com/q/10597421/1048572)
*   [Function 的正确原型链](https://stackoverflow.com/q/383172/1048572)（对于某些内部结构）

[1：好的，ES6 允许我们[继承`Function`](https://stackoverflow.com/a/36871498/1048572). 但这并不像听起来那么有用。
2：从 ES6 开始，你可以使用[`Object.setPrototypeOf`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf).]

# java - 将 priorityQueue 更改为最大优先级队列

> ID：11003155
> 
> 赞同：162
> 
> 时间：2012-06-12T19:05:59.123
> 
> 标签：java, collections, priority-queue

我在整数 Java 中有优先级队列：

```
 PriorityQueue<Integer> pq= new PriorityQueue<Integer>(); 
```

当我打电话时，`pq.poll()`我得到了最小的元素。

问题：如何更改代码以获得最大元素？

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2012-06-12T19:12:39.727

像这样怎么样：

```
PriorityQueue<Integer> queue = new PriorityQueue<>(10, Collections.reverseOrder());
queue.offer(1);
queue.offer(2);
queue.offer(3);
//...

Integer val = null;
while( (val = queue.poll()) != null) {
    System.out.println(val);
} 
```

在这种情况下，它`Collections.reverseOrder()`提供了一个`Comparator`将 中的元素`PriorityQueue`以与它们的自然顺序相反的顺序排序。

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2016-07-09T21:10:33.063

从 Java 8 开始，您可以使用 lambda 表达式。

以下代码将打印 10，较大的。

```
// There is overflow problem when using simple lambda as comparator, as pointed out by Фима Гирин.
// PriorityQueue<Integer> pq = new PriorityQueue<>((x, y) -> y - x);

PriorityQueue<Integer> pq =new PriorityQueue<>((x, y) -> Integer.compare(y, x));

pq.add(10);
pq.add(5);
System.out.println(pq.peek()); 
```

lambda 函数将两个整数作为输入参数，将它们相减，然后返回算术结果。lambda 函数实现了功能接口，`Comparator<T>`. （这是就地使用的，而不是匿名类或离散实现。）

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2020-04-13T05:15:38.883

在 Java 8+ 中，您可以通过以下方法之一创建最大优先级队列：

方法一：

```
PriorityQueue<Integer> maxPQ = new PriorityQueue<>(Collections.reverseOrder()); 
```

方法二：

```
PriorityQueue<Integer> maxPQ = new PriorityQueue<>((a,b) -> b - a); 
```

方法三：

```
PriorityQueue<Integer> maxPQ = new PriorityQueue<>((a,b) -> b.compareTo(a)); 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2012-06-12T19:08:29.763

您可以提供一个自定义`Comparator`对象，以相反的顺序排列元素：

```
PriorityQueue<Integer> pq = new PriorityQueue<Integer>(defaultSize, new Comparator<Integer>() {
    public int compare(Integer lhs, Integer rhs) {
        if (lhs < rhs) return +1;
        if (lhs.equals(rhs)) return 0;
        return -1;
    }
}); 
```

现在，优先级队列将反转其所有比较，因此您将获得最大元素而不是最小元素。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-03-11T17:49:18.597

```
PriorityQueue<Integer> pq = new PriorityQueue<Integer> (
  new Comparator<Integer> () {
    public int compare(Integer a, Integer b) {
       return b - a;
    }
  }
); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-11-15T05:19:23.677

优先级队列的元素根据它们的自然顺序或在队列构建时提供的比较器进行排序。

Comparator 应该覆盖 compare 方法。

```
int compare(T o1, T o2) 
```

默认比较方法返回负整数、零或正整数，因为第一个参数小于、等于或大于第二个。

Java 提供的 Default PriorityQueue 是 Min-Heap，如果你想要一个 max heap 以下是代码

```
public class Sample {
    public static void main(String[] args) {
        PriorityQueue<Integer> q = new PriorityQueue<Integer>(new Comparator<Integer>() {

            public int compare(Integer lhs, Integer rhs) {
                if(lhs<rhs) return +1;
                if(lhs>rhs) return -1;
                return 0;
            }
        });
        q.add(13);
        q.add(4);q.add(14);q.add(-4);q.add(1);
        while (!q.isEmpty()) {
            System.out.println(q.poll());
        }
    }

} 
```

参考：[https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html#comparator()](https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html#comparator())

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-08-06T05:12:55.347

我们可以通过创建实现 Comparator 接口的**CustomComparator类并覆盖它的 compare 方法来做到这一点。**以下是相同的代码：

```
import java.util.PriorityQueue;
import java.util.Comparator;
public class Main
{
    public static void main(String[] args) {
        PriorityQueue<Integer> nums = new PriorityQueue<>(new CustomComparator());
        nums.offer(21);
        nums.offer(1);
        nums.offer(8);
        nums.offer(2);
        nums.offer(-4);
        System.out.println(nums.peek());
    }
}
class CustomComparator implements Comparator<Integer>{
    @Override
    public int compare(Integer n1, Integer n2){
        int val = n1.compareTo(n2);
        if(val > 0)
           return -1;
        else if(val < 0)
            return 1;
        else
            return 0;
    }
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-09-16T18:10:32.487

这可以通过使用来实现

```
PriorityQueue<Integer> pq = new PriorityQueue<Integer>(Collections.reverseOrder()); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-01-14T20:55:04.040

这是 Java 中的最大堆示例：

```
PriorityQueue<Integer> pq1= new PriorityQueue<Integer>(10, new Comparator<Integer>() {
public int compare(Integer x, Integer y) {
if (x < y) return 1;
if (x > y) return -1;
return 0;
}
});
pq1.add(5);
pq1.add(10);
pq1.add(-1);
System.out.println("Peek: "+pq1.peek()); 
```

输出将是 10

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-07-05T01:37:52.390

这可以通过以下 Java 8 中的代码来实现，该代码引入了一个只接受比较器的构造函数。

```
PriorityQueue<Integer> maxPriorityQ = new PriorityQueue<Integer>(Collections.reverseOrder()); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-07-24T16:36:25.373

您可以使用`MinMaxPriorityQueue`（它是 Guava 库的一部分）： [这是文档](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/MinMaxPriorityQueue.html)。而不是`poll()`，您需要调用该`pollLast()`方法。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-02-20T14:47:55.747

将 PriorityQueue 更改为 MAX PriorityQueue 方法一：Queue pq = new PriorityQueue<>(Collections.reverseOrder()); 方法二：队列 pq1 = new PriorityQueue<>((a, b) -> b - a); 让我们看几个例子：

```
public class Example1 {
    public static void main(String[] args) {

        List<Integer> ints = Arrays.asList(222, 555, 666, 333, 111, 888, 777, 444);
        Queue<Integer> pq = new PriorityQueue<>(Collections.reverseOrder());
        pq.addAll(ints);
        System.out.println("Priority Queue => " + pq);
        System.out.println("Max element in the list => " + pq.peek());
        System.out.println("......................");
        // another way
        Queue<Integer> pq1 = new PriorityQueue<>((a, b) -> b - a);
        pq1.addAll(ints);
        System.out.println("Priority Queue => " + pq1);
        System.out.println("Max element in the list => " + pq1.peek());
        /* OUTPUT
          Priority Queue => [888, 444, 777, 333, 111, 555, 666, 222]
          Max element in the list => 888
          ......................
           Priority Queue => [888, 444, 777, 333, 111, 555, 666, 222]
           Max element in the list => 888

         */

    }
} 
```

让我们来看一个著名的采访问题：使用 PriorityQueue 的数组中的第 K 个最大元素

```
public class KthLargestElement_1{
    public static void main(String[] args) {

        List<Integer> ints = Arrays.asList(222, 555, 666, 333, 111, 888, 777, 444);
        int k = 3;
        Queue<Integer> pq = new PriorityQueue<>(Collections.reverseOrder());
        pq.addAll(ints);
        System.out.println("Priority Queue => " + pq);
        System.out.println("Max element in the list => " + pq.peek());
        while (--k > 0) {
            pq.poll();
        } // while
        System.out.println("Third largest => " + pq.peek());
/*
 Priority Queue => [888, 444, 777, 333, 111, 555, 666, 222]
Max element in the list => 888
Third largest => 666

 */
    }
} 
```

其他方式 ：

```
public class KthLargestElement_2 {
    public static void main(String[] args) {
        List<Integer> ints = Arrays.asList(222, 555, 666, 333, 111, 888, 777, 444);
        int k = 3;

        Queue<Integer> pq1 = new PriorityQueue<>((a, b) -> b - a);
        pq1.addAll(ints);
        System.out.println("Priority Queue => " + pq1);
        System.out.println("Max element in the list => " + pq1.peek());
        while (--k > 0) {
            pq1.poll();
        } // while
        System.out.println("Third largest => " + pq1.peek());
        /*
          Priority Queue => [888, 444, 777, 333, 111, 555, 666, 222] 
          Max element in the list => 888 
          Third largest => 666

         */
    }
} 
```

正如我们所看到的，两者都给出了相同的结果。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-03-04T09:16:06.633

我刚刚在双堆排序最小值最大值的两个比较器上运行了蒙特卡罗模拟，它们都得出了相同的结果：

这些是我使用的最大比较器：

(A) 集合内置比较器

```
 PriorityQueue<Integer> heapLow = new PriorityQueue<Integer>(Collections.reverseOrder()); 
```

(B) 自定义比较器

```
PriorityQueue<Integer> heapLow = new PriorityQueue<Integer>(new Comparator<Integer>() {
    int compare(Integer lhs, Integer rhs) {
        if (rhs > lhs) return +1;
        if (rhs < lhs) return -1;
        return 0;
    }
}); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-12-23T16:06:55.570

您可以尝试以下方法：

```
PriorityQueue<Integer> pq = new PriorityQueue<>((x, y) -> -1 * Integer.compare(x, y)); 
```

这适用于您可能拥有的任何其他基本比较功能。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-11-29T06:32:43.037

```
PriorityQueue<Integer> lowers = new PriorityQueue<>((o1, o2) -> -1 * o1.compareTo(o2)); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-10-21T08:03:04.097

使用 lamda，只需将结果与 -1 相乘即可获得最大优先级队列。

```
PriorityQueue<> q = new PriorityQueue<Integer>(
                       (a,b) ->  -1 * Integer.compare(a, b)
                    ); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-05-18T16:03:40.983

您可以尝试使用反向符号推送元素。例如：添加 a=2 & b=5 然后轮询 b=5。

```
PriorityQueue<Integer>  pq = new PriorityQueue<>();
pq.add(-a);
pq.add(-b);
System.out.print(-pq.poll()); 
```

一旦您轮询队列的头部，请反转您使用的符号。这将打印 5（更大的元素）。可以在幼稚的实现中使用。绝对不是可靠的解决方案。我不推荐它。

# emacs - 如何删除emacs中的标题框？

> ID：11003163
> 
> 赞同：4
> 
> 时间：2012-06-12T19:06:44.093
> 
> 标签：emacs

我想从 Emacs 中完全删除框架标题，以便在我的`org-mode`. 我已经在使用[`darkroom-mode`](http://www.martyn.se/code/emacs/darkroom-mode/)，但我仍然有框架标题。

我试过了

```
(setq frame-title-format nil) 
```

但它不起作用。

我怎样才能做到这一点？

非常感谢。

* * *

**编辑**

事实证明，我真正想要的是删除*mode line*。我在手册中找到了解决方案：

```
(setq-default mode-line-format nil) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:09:31.790

如果我得到你正确

```
(setq frame-title-format "") 
```

为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T07:16:38.650

这几天还有[`writeroom-mode`](https://github.com/joostkremers/writeroom-mode)，

> Emacs 的一种次要模式，它实现了一种无干扰的书写模式，类似于著名的 OS X Writerroom 编辑器。

它隐藏*了所有*GUI 组件，包括模式行和标题栏。

它在[MELPA](http://melpa.milkbox.net/)上可用，并且可以通过安装`M-x` `package-install` `RET` `writeroom-mode` `RET`（前提是 MELPA 已[添加到`package-archives`列表中](https://github.com/milkypostman/melpa#usage)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T02:12:30.717

你想要的是全屏模式。它在主线 Emacs AFAIK 中不可用，但您可以从自制软件构建自己的修补版本。

看到这个问题：

[https://superuser.com/questions/256404/fullscreen-emacs-in-osx](https://superuser.com/questions/256404/fullscreen-emacs-in-osx)

# java - JVM 内存使用情况，一个带线程的 JVM 还是我的四个应用程序中的每个应用四个 JVM？

> ID：11003167
> 
> 赞同：1
> 
> 时间：2012-06-12T19:06:50.260
> 
> 标签：java, multithreading, memory, jvm

我目前有四个不同的 java 应用程序，它们由 .bat 文件启动的 jar 运行，这些文件位于 Windows XP Embedded 开始菜单的启动文件夹中。我也启动了 Firefox。现在，Firefox 或其中一个 Java 应用程序刚刚关闭。猜测我的内存不足（Win XP Embedded with 512 MB RAM）。

这四个 Java 应用程序是，

*   HMI 后端（使用 Spark“微”框架构建）
*   一个记录器应用程序，可将来自 PLC 的数据记录到 H2 数据库中。这通过使用 Timer/Timertask
*   h2 数据库服务器
*   执行定期作业的调度程序。这是通过使用石英。

因此，这些 Java 应用程序中的每一个都是在它们自己的 JVM 中启动的（据我所知）。第一个问题是：我能否通过在一个 JVM 而不是四个 JVM 中运行这四个应用程序来降低它们的内存使用量。如果是这样，我应该使用线程来启动这些应用程序中的每一个吗？

除此之外，我应该做的第一件基本事情是降低内存占用，这对于我这样的“真正的”Java 编程来说是全新的。H2连接池，重用对象还有什么？Jconsole 和 Xmx 的东西？

可能很天真，但我真的认为，嘿，GC 会为我处理“一切”。可能不会？=)

**编辑：** HMI 后端使用 Jetty Web 服务器。此外，所有代码要么是开源的，要么是由我构建的。

**编辑 2：** Web 框架：[http](http://www.sparkjava.com/) ://www.sparkjava.com/ 。我通过框架而不是通过 Jetty (jetty-webapp-7.3) 提供静态媒体。这可能是为了提高内存使用率而需要考虑的事情？HMI Web 应用程序的其他组件是 freemarker 模板引擎、gson、servlet-api-3、slf4j 和 log4j。

也许在启动 webapp 时尝试在线程中启动记录器和调度程序是可能的。然后只运行两个 JVM。一个用于 webapp，一个用于数据库服务器。

我正在使用 Java 7，它是一个 32 位系统。它有望用于生产用途（或者我遇到了麻烦）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:31:45.570

从一组单独的进程到单个进程通常不仅仅是“翻转开关”的问题。它们是根本不同的架构：

*   属于**同一进程**的线程共享某些资源（内存空间、文件句柄等），它们可以相互“看到”；它们可以以一种非常“轻量级”的方式相互通信并相互共享数据；
*   **不同的进程**在某种程度上是更“孤立”的单元：它们不能只是“窥视”彼此的内存、文件句柄等，而是必须以“更重”的方式相互通信（例如，通过套接字或由操作系统）。

现在，您从一个模型转移到另一个模型的难易程度以及它会为您购买多少，实际上取决于特定组件在做什么以及它们如何交互。我不熟悉您提到的一些组件，但从您的描述中听起来好像您基本上拥有一堆相互连接的“黑匣子”，并且您将无法进行太多的重新架构。

因此，我建议查看各种组件的文档并查看它们是否允许您在启动时指定 VM 大小（或“堆大小”），然后尝试将组件降低到所需的最小值。（您的记录器进程大概不需要数百兆字节......）

Windows 原则上不应“因为内存不足而关闭进程”。如果它需要将 JVM 堆的位交换进出虚拟内存 [*]，它可能会开始像地狱一样咕咕叫。但它实际上不应该关闭进程。另一方面，如果一个给定的 Java 应用程序在尝试从其堆中分配内存时遇到 OutOfMemoryError，它可能会决定关闭（或根据其异常处理作为默认行为关闭）。各种组件的日志表明发生了什么？

[*] 与本机应用程序不同，Java 应用程序不能很好地处理虚拟内存，因为对于 Java，它的内存是一个单一的“堆”，它实际上希望总是被分页。你应该避免为你的 JVM 分配总堆大小这接近或大于机器中的物理内存量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T23:52:47.020

*我故意不解决尼尔科菲的回答已经涵盖的方面。*

> 因此，这些 Java 应用程序中的每一个都是在它们自己的 JVM 中启动的（据我所知）。第一个问题是：我能否通过在一个 JVM 而不是四个 JVM 中运行这四个应用程序来降低它们的内存使用量。如果是这样，我应该使用线程来启动这些应用程序中的每一个吗？

不，或者不容易（见尼尔科菲的回答）。

`java.exe`但是您可以通过将命令行参数传递给程序来调整每个 .bat 的 java 内存设置。

考虑到您的内存设置相当有限，并且假设您至少有 Java SE 6 Update 10，我建议您尝试 G1 垃圾收集器，使用它可以在相对较低的内存设置下获得不错的性能。

也许尝试通过这样的东西，并在需要时进行调整：

```
-Xss64k -Xms128m -Xmx128m -XX:PermSize=64m -XX:MaxPermSize=64m -XX:+UnlockExperimentalVMOptions -XX:+UseG1GC -XX:+UseCompressedStrings -XX:+UseCompressedOops 
```

*请注意，这`XX:+UseCompressedOops`仅适用于 x64 JVM，并且它（以及 - `XX:+UseCompressedStrings`）可能对您不起作用，具体取决于您的 JVM 版本。此外，您不会说它是用于生产还是个人使用。如果用于生产，我建议你不要管这两个，只使用 -XX:+UseG1GC` 的东西。*

以上是我需要在单台机器上运行多个 Eclipse 实例时使用的设置变体，使用 2GB RAM 构建更大的项目。不幸的是，您的环境有点硬核，但是一次尝试使用这个应用程序，看看您可以压缩和适应多少。

如果可以，请向我们提供有关您的进程在做什么的更多信息，以便我们可以尝试评估他们需要多少内存。可能，您可以进一步减少堆栈大小和堆大小。我们知道的越多，调整设置时在黑暗中点击的次数就越少。

> 除此之外，我应该做的第一件基本事情是降低内存占用，这对于我这样的“真正的”Java 编程来说是全新的。H2连接池，重用对象还有什么？Jconsole 和 Xmx 的东西？

H2 已经相当轻巧，听起来是不错的选择。

JConsole 不会帮助你，但你可能想试一试 JVisualVM，它可以帮助分析一些事情。或者，如果您负担得起，则瞄准 JProfiler。否则 Eclipse 有一个很好的内存分析器。

> 可能很天真，但我真的认为，嘿，GC 会为我处理“一切”。可能不会？=)

这不是魔术，它只是回收未使用的对象。如果您有对它们的引用，它就无法知道您是否需要它们。因此，要么确保引用不保持活动状态（通常通过保持集合或相互链接的复合对象），要么如果您需要长期存在的引用，则可能查看弱引用或软引用（或缓存实现）。

> 编辑：HMI 后端使用 Jetty Web 服务器。此外，所有代码要么是开源的，要么是由我构建的。

给我们更多细节，我们可以进一步挖掘。

* * *

您可以做的另一件事是查看替代 JVM。嵌入式系统有一些，它们显然具有相当受限的环境。

* * *

根据调度作业的复杂性，您可以推出自己的调度程序，而无需依赖 Quartz。它不是特别重量级，但如果你需要压缩每一个 MB，那将是你列表中我试图摆脱的第一个元素。

# hadoop - Hadoop 复制模型 - DataStreamer/Namenode

> ID：11003171
> 
> 赞同：2
> 
> 时间：2012-06-12T19:06:59.887
> 
> 标签：hadoop, hdfs

首先感谢您阅读我的问题！

我目前正在研究 Hadoop 的复制模型，但我处于死胡同。我从《**Oreilly Hadoop The Definitive Guide 3rd Edition Jan 2012**》一书中学习。要回答这个问题，我首先需要阅读本书下面的文字。

在第 73 页，有以下内容：

“**分布式**文件系统为客户端返回一个**FSDataOutputStream** Hadoop 分布式文件系统开始写入数据。就像在读取的情况下，**FSDataOutputStream**包装了一个**DFSOutput Stream**，它处理与数据节点和名称节点的通信。当客户端写入数据时（步骤 3） ,

**DFSOutputStream**将其拆分为数据包，并将其写入内部队列，称为数据队列。数据队列由 Data Streamer 使用，它的职责是通过选择合适的数据节点列表来请求 namenode 分配新块以存储副本。"*

如您所见，**DFSOutputStream**有一个数据包数据队列。数据队列正在被 DataStreamer 消耗，它要求 namenode 分配新块。

**我的问题：**

***这是如何运作的？***

***Namenode 是如何分配新区块的？***

同样的问题，换个方式问：**Namenode如何创建合适的Datanodes列表？**

我在互联网上或书中找不到任何关于此的内容。这本书从高层次解释了这个过程。

我真的很感谢你的时间帮助我，我谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:18:14.547

它是一种可插拔的、基于策略的算法。有关详细信息，请参阅[副本放置](http://hadoop.apache.org/common/docs/r0.20.2/hdfs_design.html#Replica+Placement%3a+The+First+Baby+Steps)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-02T13:01:32.307

看看[Apache HDFS 设计](https://hadoop.apache.org/docs/r2.7.0/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html)[![在此处输入图像描述](../Images/49d29f38ab216fff89928f33d7cb0ee8.png)](https://i.stack.imgur.com/GSUMc.png)

例如，当复制因子为 3 时，HDFS 的放置策略如下来自[grepcode](http://grepcode.com/file_/repo1.maven.org/maven2/org.apache.hadoop/hadoop-hdfs/2.5.0/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyDefault.java/?v=source)

```
** The class is responsible for choosing the desired number of targets
 * for placing block replicas.
 * The replica placement strategy is that if the writer is on a datanode,
 * the 1st replica is placed on the local machine, 
 * otherwise a random datanode. The 2nd replica is placed on a datanode
 * that is on a different rack. The 3rd replica is placed on a datanode
 * which is on a different node of the rack as the second replica.
 */
@InterfaceAudience.Private
public class BlockPlacementPolicyDefault extends BlockPlacementPolicy { 
```

此策略可减少机架间写入流量，从而提高写入性能。

机架故障的几率远小于节点故障；本政策不影响数据可靠性和可用性保证。

使用此策略，文件的副本不会在机架上均匀分布。

> 三分之一的副本在一个节点上
> 
> 三分之二的副本在一个机架上
> 
> 另外三分之一均匀分布在剩余的机架上。

此策略在不影响数据可靠性或读取性能的情况下提高了写入性能。

==>

第一个和第三个副本存在于一个 RAC 上，第二个副本存在于另一个 RAC（远程）上

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-02T12:00:59.203

我可能会看到 2 个不同的问题，因为您还提到了`DataStreamer`.

您可以在*“The Hadoop Distributed File System by Konstantin Shvachko, Hairong Kuang, Sanjay Radia, Robert Chansler”中找到这两个答案*

1）如何从客户端（DataStreamer）请求块？

> 当客户端写入时，它首先要求 NameNode 选择 DataNodes 来托管文件第一个块的副本。客户端从节点到节点组织管道并发送数据。当第一个块被填满时，客户端请求选择新的 DataNode 来托管下一个块的副本。一个新的管道被组织起来，客户端发送文件的更多字节。DataNode 的每种选择都可能不同。

2) NameNode 如何创建合适的数据节点列表？

正如其他用户已经回答的那样，Hadoop 允许此策略可配置，但作为默认副本放置策略：

> 创建新块时，HDFS 将第一个副本放在 writer 所在的节点上，第二个和第三个副本在不同机架的两个不同节点上，其余的放在随机节点上，限制不超过在一个节点上放置一个副本，当副本数小于机架数的两倍时，同一机架中最多放置两个副本。

# mysql - MySQL显示平均每天随机记录的整数

> ID：11003175
> 
> 赞同：1
> 
> 时间：2012-06-12T19:07:05.927
> 
> 标签：mysql, date, average

有一个表格，记录来自电表 (kwh) 的时间戳和整数读数 (date_entered, reading)。想绘制每日使用情况...大多数读数是每天的，有些是相隔数天的 - 一天中的随机时间。想要每天返回上一个条目的差异的每日平均值。*注意平均值不准确。

```
Example Data:
date_entered    reading
2012-06-01 17:02    18522
2012-06-02 14:56    18641
2012-06-03 10:55    18677
2012-06-06 15:16    18702
2012-06-11 13:28    18803
2012-06-13 17:33    18850

Example Output:
Date              Daily Average
2012-06-01 12:00    
2012-06-02 12:00    19
2012-06-03 12:00    130
2012-06-04 12:00    43
2012-06-05 12:00    43
2012-06-06 12:00    43
2012-06-07 12:00    8
2012-06-08 12:00    8
2012-06-09 12:00    8
2012-06-10 12:00    8
2012-06-11 12:00    21
2012-06-12 12:00    21
2012-06-13 12:00    22 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:19:48.793

您可以按照自己采取的步骤手动计算平均值。这是它的明确解释：

您有一个读数列表，其中包含两条信息：

*   时间戳
*   千瓦时骨料

你想要一份每日消费清单：

*   日期
*   千瓦时消耗

您应该遍历第一个列表并填充第二个列表：

对于每次阅读（从记录的第二天开始）：

*   获取读数中具有先前日期的最新项目。
*   比较日期并获得天数的差异（必须 >= 1）
*   从最后一次阅读后的第二天到当前阅读日期的每一天，在每日消耗中创建一个条目（除非它们已经创建，因为您在同一日期有两个读数）
*   获取消费差异。
*   将消耗的差异除以天数的差异得到平均值。
*   将该平均值分配给从最近一次读数后的第二天到当前读数日期的每个每日消耗量的 Kwh 消耗量。

瞧！

即使您在同一日期有多个读数，它也应该有效，因为当您到达同一天的第二个读数时，它只会覆盖平均值（只需确保您每天只创建一个每日消费项目）。

# html - 使用 Container Div CSS 的 CSS 子链接

> ID：11003176
> 
> 赞同：0
> 
> 时间：2012-06-12T19:07:08.860
> 
> 标签：html, css, styling

我在一个 div 中有 3 个 div。我已将 CSS 设置为主 div 和子 div 的样式链接。但是 div1 链接似乎没有使用 div1 样式。

HTML

```
 <div id="content">
    <div class="div1">Sort By: <a href="" id="list_users_title" >A-Z</a> / <a href="" id="oneline">Genre</a></div>
        <div class="div2">
        <p>Random</p>
        </div>
        <div class="div3">
        <p>Random</p>
        </div>
    </div> 
```

CSS

```
.div1 {
font-family: 'Oswald', sans-serif;
font-size:16px;
color:#414042;
text-transform:uppercase;
text-align:right;
margin-top:-26px;
margin-bottom:18px;
}

.div1  a {color:#414042; text-decoration: none; }
.div1  a:visited {color:#414042; text-decoration: none;}
.div1  a:hover { color: #b91200; text-decoration: underline; }

#content  a {color: #b91200; text-decoration: none;}
#content  a:visited {color: #b91200; text-decoration: none;}
#content a:hover { text-decoration: underline; }

#content {
    float: left;
    width: 668px;
    margin-left:50px;
    margin-right:50px;
    padding-top:42px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:11:54.800

`#content a`比 具有更高的特异性`.div1 a`，因此链接的样式根据`#content a`. 尝试使用`#content .div1 a`而不仅仅是`.div1 a`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:18:34.437

您需要使 .div1 锚标记的样式级联更具体：

```
#content .div1  a {color:#414042; text-decoration: none; }
#content .div1  a:visited {color:#414042; text-decoration: none;}
#content .div1  a:hover { color: #b91200; text-decoration: underline; } 
```

这将允许他们覆盖样式级联的#content。

# interface-builder - Xcode如何创建具有标准系统图标但具有自定义标题的自定义标签栏项目

> ID：11003177
> 
> 赞同：3
> 
> 时间：2012-06-12T19:07:17.423
> 
> 标签：interface-builder, uitabbaritem

我正在尝试使用自定义标题创建自定义标签栏项目，但我确实想使用标准系统图标。

这是我的代码：

```
UITabBarItem *aboutUsItem = [[UITabBarItem alloc] initWithTabBarSystemItem: UITabBarSystemItemContacts tag: 0];
    overOnsItem.title = @"About us";

    self.tabBarItem = AboutUsItem; 
```

但这不起作用..

提前致谢！

# mongoid - 如何选择与 Mongoid 具有 has_many 关系的文档

> ID：11003179
> 
> 赞同：1
> 
> 时间：2012-06-12T19:07:20.243
> 
> 标签：mongoid, has-many

我知道我的问题是微不足道的，但我需要一些帮助。

我有两个具有关系的 mongoid 类`has_many`：

```
class Container
    ...
    has_many: items
    ...
end

class Item
    ...
    field :date, type => Date
    belongs_to: container
    ...
end 
```

我需要在特定日期有物品的所有容器。

这是无法按预期工作的范围。它返回在给定日期有物品的容器和没有物品的容器：

```
class Container
    ...
    scope :with_items_on, ->(date){ where(:_id.in => Item.on(date).only(:container_id).distinct(:container_id)) }
    ...
end 
```

`.on(date)`是正确返回给定日期的所有项目的范围。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:13:44.510

**地点.rb**

`has_many :reviews`

**评论.rb**

`belongs_to :place`

*Mongoid 3*不支持

`Place.where('reviews.state' => 'published')`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-14T01:02:46.897

mongoid 查询系统非常强大，所以这个查询可以归结为一个非常简单的语句。这是一个类方法：

```
class Container
  #...snip...
  has_many :items

  def self.with_items_on(date)
    where( 'items.date' => date )
  end
end 
```

或作为范围：

```
class Container
  #...snip...
  has_many :items

  scope :with_items_on, ->(date){ where('item.date' => date) }
end 
```

# mysql - MySQL 多个左连接导致不正确的计数值

> ID：11003188
> 
> 赞同：0
> 
> 时间：2012-06-12T19:08:03.177
> 
> 标签：mysql, wordpress, join, count

所以我正在尝试编写一个 MySQL 查询，用三个单独的查询替换当前在 PHP 中所做的事情。我有一个只有两个值的类别表：一个 ID 和一个名称。还有另外两个表，每个表都有一个外键引用第一个表中的 ID。我需要从 Categories 表中获取所有值的列表，以及计算每个值在其他两个表中的每一个中被引用的次数。我可以使用单独的查询从每个第二个表中准确获取计数：

```
SELECT nga_calevir_event_categories.*, COUNT(nga_calevir_events.event_id) AS event_total
FROM nga_calevir_event_categories
LEFT JOIN (nga_calevir_events)
ON nga_calevir_event_categories.id = nga_calevir_events.event_category
GROUP BY nga_calevir_event_categories.id; 
```

和

```
SELECT nga_calevir_event_categories.*, COUNT(nga_usermeta.user_id) AS member_total
FROM nga_calevir_event_categories
LEFT JOIN (nga_usermeta)
ON (nga_usermeta.meta_value = nga_calevir_event_categories.id
AND nga_usermeta.meta_key = 'category_id')
GROUP BY nga_calevir_event_categories.id; 
```

但是，当我尝试组合这些查询时，它开始为这两个计数提供不正确的结果。这是组合查询：

```
SELECT nga_calevir_event_categories.*,
COUNT(nga_calevir_events.event_id) AS event_total,
COUNT(nga_usermeta.user_id) AS member_total
FROM nga_calevir_event_categories
LEFT JOIN (nga_calevir_events)
ON nga_calevir_event_categories.id = nga_calevir_events.event_category
LEFT JOIN (nga_usermeta)
ON (nga_usermeta.meta_value = nga_calevir_event_categories.id
AND nga_usermeta.meta_key = 'category_id')
GROUP BY nga_calevir_event_categories.id; 
```

第一行的计数似乎增加了一倍。我已经对此进行了几个小时的试验，但我无法弄清楚。有任何想法吗？如果您需要更多信息来帮助我，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:47:17.957

这不起作用，因为连接是组合的：

```
SELECT nga_calevir_event_categories.*,
COUNT(nga_calevir_events.event_id) AS event_total,
COUNT(nga_usermeta.user_id) AS member_total

FROM nga_calevir_event_categories
LEFT JOIN (nga_calevir_events)
ON nga_calevir_event_categories.id = nga_calevir_events.event_category
-- The above is almost the same as an inner join, so long as every 
-- category has at least one event.

LEFT JOIN (nga_usermeta)
ON (nga_usermeta.meta_value = nga_calevir_event_categories.id
AND nga_usermeta.meta_key = 'category_id')
-- This is where you're going to get weird.  This is going to join 
-- every row already figured out- basically, a row for every event
-- with every usermeta that matches!

GROUP BY nga_calevir_event_categories.id; 
```

这确实是两个查询 - 没有理智的方式将 usermeta 加入类别（除非我误解了应用程序）。不过，有一种方法可以将其放入一个 SQL 语句中。试试这个：

```
SELECT categories.*,
       coalesce(event_hits.hits, 0) + coalesce(meta_hits.hits, 0) as total_hits
FROM nga_calevir_event_categories as categories       

LEFT JOIN
(select event_category as catid, count(*) as hits
    FROM (nga_calevir_events)
    group by event_category
) as event_hits ON event_hits.catid = categories.id

LEFT JOIN (
   select meta_value as catid, count(*) as hits
   FROM nga_usermeta
   WHERE meta_key = 'category_id'
   group by meta_value
) as meta_hits ON meta_hits.catid = categories.id 
```

这使用两个内部选择来获取用于两个表中的每一个的类别 ID 的计数，然后将这些内部选择连接到实际类别，并将它们各自返回的计数相加。我们使用 COALESCE 来确保在其中一张表中没有使用的地方，假定为 0。

希望这可以帮助！

# magento - Amazon.com 的相关商品算法

> ID：11003189
> 
> 赞同：3
> 
> 时间：2012-06-12T19:08:06.593
> 
> 标签：magento, recommendation-engine

所以，我正在集思广益，想出一个推荐项目算法，我喜欢亚马逊的。它有“购买此商品的客户也购买了”和“相关”推荐部分。我猜前者是基于销售数据，而另一个是基于目录数据，例如类别、属性等。

有谁知道亚马逊或其他类似的大型零售公司如何将这些推荐产品拉到他们的产品页面上？它是即时完成的还是以特定的时间间隔完成的？我目前无法决定应该采用哪种方式。我倾向于后者，因为算法可能更复杂，但我猜这需要以一定的时间间隔进行处理和更新，以最大限度地减少页面加载时间。

欢迎从事此类项目的程序员提出任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:09:56.277

亚马逊使用一种称为基于项目的协同过滤的东西。

谷歌“基于亚马逊项目的协同过滤”，因为谷歌的偷偷跟踪，我无法复制粘贴 hte 链接！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:37:04.653

我的团队使用协同过滤构建了一个推荐系统，我们有一个离线预处理阶段和另一个动态计算的阶段。预处理阶段涉及最昂贵的计算，因此最终部分可以轻松快速地完成。我们使用了 SlopeOne 算法，该算法已经具有这样的结构。

亚马逊还使用协作过滤，如下所述：

[http://www.cs.umd.edu/~samir/498/Amazon-Recommendations.pdf](http://www.cs.umd.edu/~samir/498/Amazon-Recommendations.pdf)

# asp.net-mvc - 带有 Web-API 的 MVC 路由（404 错误）？

> ID：11003190
> 
> 赞同：1
> 
> 时间：2012-06-12T19:08:11.293
> 
> 标签：asp.net-mvc, routing, asp.net-web-api

我花了很长时间弄清楚为什么我的路由配置不起作用。我尝试了 mysite/issues/500 和 mysite/issues/ 但我总是收到 404 错误。我在两个 get 函数中都放了一个断点，它永远不会到达断点。想也许一瞥可以帮助我，但我试图

这是我的 global.asax：

```
 Public Class MvcApplication
    Inherits System.Web.HttpApplication

    Sub Application_Start()
        AreaRegistration.RegisterAllAreas()
        RouteTable.Routes.MapRoute("Issues", "{controller}/{id}", New With {.id = UrlParameter.Optional})
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters)
        RouteConfig.RegisterRoutes(RouteTable.Routes)
    End Sub
End Class 
```

控制器：

```
Namespace Controllers

    Public Class IssuesController
        Inherits ApiController

        ' GET api/issues'
        Public Function GetValues(ByVal req As HttpRequestmessage) As IEnumerable(Of Issue)
            Dim querystrParams As NameValueCollection = Nothing
            Dim srch As IQuery
            If req.RequestUri.Query.Any() Then
                srch = New IssueTrackerQuery(req.RequestUri.ParseQueryString())
            End If
            Return (New EnumerableQuery(Of Issue)(New HashSet(Of Issue)))
        End Function

        ' GET api/issues/5'
        Public Function GetValue(ByVal IssuesId As Integer) As Issue
            Return New Issue()
        End Function

        ' POST api/issues'
        Public Sub PostValue(ByVal value As String)
            Throw New NotImplementedException()
        End Sub

        ' PUT api/issues/5'
        Public Sub PutValue(ByVal id As Integer, ByVal value As String)
            Throw New NotImplementedException()
        End Sub

        ' DELETE api/issues/5'
        Public Sub DeleteValue(ByVal IssuesId As Integer)
            Throw New NotImplementedException()
        End Sub

    End Class
End Namespace 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:10:55.207

您的 Global.asax 中没有任何 API 路由。`MapHttpRoute`使用扩展方法添加一个（而不是`MapRoute`）：

```
Sub Application_Start()
    AreaRegistration.RegisterAllAreas()
    RouteTable.Routes.MapHttpRoute("Issues", "{controller}/{id}", New With {.id = UrlParameter.Optional})
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters)
    RouteConfig.RegisterRoutes(RouteTable.Routes)
End Sub 
```

注意`routes.MapHttpRoute`哪个注册了 web api 控制器。

# php - 不知何故，某些 css 仅在用户登录时显示 - 而对已注销的用户不显示。HTML/CSS

> ID：11003204
> 
> 赞同：2
> 
> 时间：2012-06-12T19:08:59.593
> 
> 标签：php, html, css, login, logout

所以我正在制作一个博客，当用户未登录时，包含帖子的 div 不显示背景颜色。

所以这是我登录时的样子： ![在此处输入图像描述](../Images/7550caac82b420f03d94413f9e4db409.png)

现在，当您注销时，它显示： ![在此处输入图像描述](../Images/f0795505b973185d2893b553fb059b04.png)

我的索引页面是：

```
<?php
    ini_set('date.timezone', 'Europe/London');
    include_once('init.php');

    date_default_timezone_set('Europe/London');

    mysql_query("SET time_zone = timezone;");

    session_start();

    $posts = get_posts();
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <LINK REL=StyleSheet HREF="style.css" TYPE="text/css" MEDIA=screen>
    <title>Home - Chris's Blog</title>
</head>

<body>
    <div id="universe">
        <h1>Chris's Blog</h1>

        <div id="content">
            <div id="menu">
                <?php 
                    $temp = $_SESSION['username'];
                    $real = get_full_name($temp);

                    if(isset($_SESSION['username']))
                    {
                        echo '<br />'.'Welcome back, '. $real['name'] . ' ' . $real['last_name'] . '.';
                    }
                ?>
                <?php
                    $timezone = date_default_timezone_get();
                    echo '     The current server timezone is: ' . $timezone ; 
                ?>
                <p>&nbsp;</p>
            </div>
            <div id="subcontent">
            <div id="posts">
                <?php
                    foreach( $posts as $post)
                    {
                        if( ! category_exists('name', $post['name']))
                        {
                            $post['name'] = 'Uncategorized';
                        }
                ?>
                <div class="post">
                    <div id="post_title">
                    <h2><a href="index.php?id=<?php echo $post['post_id']; ?>"><?php echo $post['title']; ?></a></h2>
                    <p>
                        Posted on <?php echo date('d-m-Y h:i:s', strtotime($post['date_posted'])); ?> in <a href="category.php?id=<?php echo $post['category_id']; ?>"><?php echo $post['name']; ?></a> ip: <?php get_ip(); ?>
                    </p>
                </div>
                <div id="post_content">
                    <?php echo nl2br($post['contents']); ?>
                </div>
            <?php // check if session has been set
                if(isset($_SESSION['username']))
                {
            ?>
                <div id="post_edit">
                    <p><a href="delete_post.php?id=<?php echo $post['post_id']; ?>">delete</a></p>
                </div>
            <?php
                }
        ?>
            </div>
        <?php
            }
        ?>
        </div>
        <div id="rightbar">
            <ul>
                <li><a href="index.php">Home</a></li>
                    <?php 
                        if( isset($_SESSION['username']))
                        {
                            echo '<li><a href="add_post.php">Add Post</a></li>', '<li><a href="add_category.php">Add Category</a></li>', '<li><a href="logout.php">Logout</a></li>';
                        }
                    ?>
                <li><a href="index.php">Contact</a></li>
                    <?php
                    if(! isset($_SESSION['username']))
                        {
                            echo '<li><a href="login.php">Login</a></li>';
                        }
        ?>
            </ul>
        </div>
    </div>
</div>
</div>
</body>
</html> 
```

还有我的 CSS：

```
@charset "UTF-8";

body
{
background-color:#CCC;
}

#universe
{
    margin:0 auto;
    width:800px;
    height:auto;
}

.post
{
    font-style:normal;
    /*margin-left:10px;
    margin-right:10px;*/
    margin:0px auto;
    width:580px;
    background-color: #CCC;
}
#posts
{
    float:left;
    width:600px;
    /*min-height:100px;*/
}
#menu
{
    float:left;
    width:790px;
    height:50px;
    background-color:#09F;
    padding-left:10px;
}
#subcontent
{
    float:left;
    width:800px;
    min-height:100px;
    background-color:#666;
}
#rightbar
{
    width:200px;
    float:right;
    background-color:#CF0;
    min-height:80px;
}
#add_title
{
    padding-left:0px;
    height:40px;
}
#textarea
{
    padding-left:30px;
}
#post_time
{
    font-size:9px;
    float:left;
    width:580px;
    padding-top:0px;
}
#post_title
{
    float:left;
    font-size:12px;
    width:580px;
}
#post_content
{
    float:left;
    width:580px;
}    
#post_edit
{
    font-size:14px;
    text-align:right;
    margin-right:5px;
} 
```

登出页面来源：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<LINK REL=StyleSheet HREF="style.css" TYPE="text/css" MEDIA=screen>

<title>Home - Chris's Blog</title>
</head>

<body>

<div id="universe">

<h1>Chris's Blog</h1>

<div id="content">

    <div id="menu">
                 The current server timezone is: Europe/London<p>&nbsp;</p>
  </div>
    <div id="subcontent">

        <div id="posts">

<div class="post">
    <div id="post_title">
        <h2><a href="index.php?id=8">Test</a></h2>
            <p>Posted on 06-12-2012 02:15:13 in <a href="category.php?id=3">Test</a> ip:            </p>

    </div>

    <div id="post_content">

jswqwjsiwqjs qw</div>

    </div>

<div class="post">
    <div id="post_title">
        <h2><a href="index.php?id=7">Ok Ok.</a></h2>
            <p>Posted on 01-01-1970 01:00:00 in <a href="category.php?id=3">Test</a> ip:            </p>

    </div>

    <div id="post_content">

Ok try # worked, lets see this one...here goes</div>

    </div>

<div class="post">
    <div id="post_title">
        <h2><a href="index.php?id=6">Try NUMBAH TREE</a></h2>
            <p>Posted on 06-12-2012 02:09:24 in <a href="category.php?id=3">Test</a> ip:            </p>

    </div>

    <div id="post_content">

Lets see if this oen works....</div>

    </div>

<div class="post">
    <div id="post_title">
        <h2><a href="index.php?id=5">Try #2</a></h2>
            <p>Posted on 12-06-2012 12:18:45 in <a href="category.php?id=3">Test</a> ip:            </p>

    </div>

    <div id="post_content">

Lets try this time if it works.</div>

    </div>

<div class="post">
    <div id="post_title">
        <h2><a href="index.php?id=1">Test added from Database</a></h2>
            <p>Posted on 11-06-2012 02:32:24 in <a href="category.php?id=3">Test</a> ip:            </p>

    </div>

    <div id="post_content">

This post was added from database, hope this shows on the website, would be pretty cool imo.</div>

    </div>
            </div>

        <div id="rightbar">
        <ul>
            <li><a href="index.php">Home</a></li>
                            <li><a href="index.php">Contact</a></li>
            <li><a href="login.php">Login</a></li>            </ul>
        </div>

    </div>

</div> 
```

```
 </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:36:35.477

`float: left;`从`#post_content`你的 CSS 中删除。它导致帖子的高度为 0 像素。

# jquery - 在制作 jQuery 图像库时调用动画功能的问题。下一个/上一个按钮

> ID：11003205
> 
> 赞同：0
> 
> 时间：2012-06-12T19:09:00.400
> 
> 标签：jquery, image, callback, gallery, jquery-animate

这是我第一次在 Stack Overflow 上发帖，这是因为过去一天我一直在为这个问题烦恼。

我对 jQuery 很陌生，并且对事物的工作方式有基本的了解，但我真的很难让一个函数在处理后自行循环。这是一个简单的 if/else 函数，它通过一系列五个图像来查看它们是否可见。

如果图像可见（换句话说，画廊中的当前图像），则下一个和上一个按钮将控制下一个要淡入的图像，然后淡出上一个图像。

我有适用于第一张图像的下一个/上一个链接，但是一旦第二张图像淡入，我就无法让它工作。我猜这是因为我需要调用脚本来检查是否/否则图像可见。我的问题是我不知道在哪里放置代码。我已经在各个地方尝试过代码，并且一直在研究 jQuery 延迟和回调，看看我是否可以尝试确定它是否是时间不起作用等等。但我就是无法解决！

如果有人可以帮助完成这项工作，甚至提出一种我不知道的更简单的创建方法，我将不胜感激！

图像只是在一个 div 中列出：

```
<div class="images">
    <img class="image gallery-img" id="1" src="/images/01.jpg" />
    <img class="image gallery-img" id="2" src="/images/02.jpg" />
    <img class="image gallery-img" id="3" src="/images/03.jpg" />
    <img class="image gallery-img" id="4" src="/images/04.jpg" />
    <img class="image gallery-img" id="5" src="/images/05.jpg" />
</div>

<div class="gallery-controls">
    <a class="gallery-button" id="previous" href="#previous">Previous</a>
    <a class="gallery-button" id="next" href="#next">Next</a>
</div> 
```

jQuery是：

```
window.addEventListener( 'DOMContentLoaded', function(){

function galleryLoop(){

        if( $('div.images img:nth-child(1)').css({ 'display' : 'inline' }) ){

            //#NEXT CLICK
            $('a.gallery-button#next').bind('click', function(){
                $('div.images img:nth-child(1)').fadeOut( '100' , function(){ 
                    $('div.images img:nth-child(2)').fadeIn();
                });//END FADE OUT
            }); //END #NEXT CLICK

            //#PREVIOUS CLICK
            $('a.gallery-button#previous').bind('click', function(){
                $('div.images img:nth-child(1)').fadeOut( '100' , function(){ 
                    $('div.images img:nth-child(5)').fadeIn();
                });//END FADE OUT
            }); //END #PREVIOUS CLICK

        } //END IF

        else if( $('div.images img:nth-child(2)').css({ 'display' : 'inline' }) ){

            //#NEXT CLICK
            $('a.gallery-button#next').bind('click', function(){
                $('div.images img:nth-child(2)').fadeOut( '100' , function(){ 
                    $('div.images img:nth-child(3)').fadeIn();
                });//END FADE OUT
            }); //END #NEXT CLICK

            //#PREVIOUS CLICK
            $('a.gallery-button#previous').bind('click', function(){
                $('div.images img:nth-child(2)').fadeOut( '100' , function(){ 
                    $('div.images img:first-child').fadeIn();
                });//END FADE OUT
            }); //END #PREVIOUS CLICK

        }; //END IF

    };

galleryLoop(); 
```

});//结束脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:16:06.667

从事件监听器中取出函数，你就可以随时调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:50:10.553

好的，我花了很多时间，所以我希望它能解决你的问题！

这是 JSFiddle 的链接：http: [//jsfiddle.net/ekUvj/22/](http://jsfiddle.net/ekUvj/22/)

您想要做的是将您的 javascript 更改为：

```
var imgNum = 1;
$("#1").fadeIn(300);

function prev () {
    newImageNum=(imgNum == 1)?5:imgNum-1;
    $("#".concat(imgNum)).fadeOut(300, function () {$("#".concat(newImageNum)).fadeIn(300);});
    imgNum = newImageNum;
}

function next () {
    newImageNum=(imgNum == 5)?1:imgNum+1;
    $("#".concat(imgNum)).fadeOut(300, function () {$("#".concat(newImageNum)).fadeIn(300);});
    imgNum = newImageNum;
}​ 
```

然后确保你的按钮调用函数：

```
<div class="gallery-controls">
    <button onclick="prev()">Previous</a>
    <button onclick="next()">Next</a>
</div>​ 
```

然后确保你的图像首先隐藏在 CSS 中：

```
.gallery-img {
    display: none;
}​ 
```

# java - Java：JPanel 不接受键盘绑定

> ID：11003206
> 
> 赞同：1
> 
> 时间：2012-06-12T19:09:02.540
> 
> 标签：java, swing, key-bindings, keyevent, miglayout

# 问题

我一直在努力使键绑定在我编写的应用程序中正常工作。

以前，我一直在使用以下变体； `panel.registerKeyboardAction(this, "createNewFood", KeyStroke.getKeyStroke(KeyEvent.VK_I, KeyEvent.CTRL_DOWN_MASK), JComponent.WHEN_IN_FOCUSED_WINDOW);`

但是由于我在文档中读到 registerKeyboardAction 被标记为已弃用，因此我尝试切换到首选方法，如下所示； `panel.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(KeyStroke.getKeyStroke("control I"), new NewFoodAction());`

不幸的是，这似乎不起作用。

# 我试过的

我在网上搜索过，我尝试了很多不同的方法，但都没有成功；

*   我没有将密钥绑定到面板，而是尝试将其附加到`getRootPane()`. 没用。
*   我已经尝试了所有不同的“条件”；`WHEN_IN_FOCUSED_WINDOW`, `WHEN_ANCESTOR_OF_FOCUSED_COMPONENT`, `WHEN_FOCUSED`, 没用。
*   我试过设置`panel.setFocusable(true)`；没用。
*   我尝试使用`panel.requestFocusInWindow()`只是为了看看它是否可以有条件地工作；没用。

如果我将键绑定附加到另一个组件，例如 JTextField，那么它会按预期工作。

**其他一些*可能*相关**的信息（但我真的不这么认为）；

*   我正在为面板使用 MigLayout。不要认为这会影响任何事情，但谁知道呢。
*   我有其他键绑定（即绑定到其他组件的其他键击）

这是一些示例代码：

```
public FoodFrame() {
    super("MealTrack");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setPreferredSize(new Dimension(1400, 600));
    setLocation(300, 100);
    setVisible(true);

    panel = new JPanel(new MigLayout("fill", "[grow][]", "[][][][grow][][]"));
    add(panel);
  panel.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(KeyStroke.getKeyStroke("control I"), new NewFoodAction());

    pack();
    filter.requestFocusInWindow();
}

private class NewFoodAction extends AbstractAction {

    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println("called");
    }

} 
```

}

有谁知道问题似乎是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:22:11.670

你这样做是不对的。**您需要同时使用 ActionMap 和 InputMap**。你应该做：

```
panel.getInputMap(con).put(KeyStroke.getKeyStroke("control I"), "createNewFood");
panel.getActionMap().put("createNewFood", new NewFoodAction()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T19:20:53.140

根据[Jcomponent 文档](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JComponent.html#registerKeyboardAction%28java.awt.event.ActionListener,%20java.lang.String,%20javax.swing.KeyStroke,%20int%29)，您正在映射键输入，但它们执行的操作实际上并未映射到面板。对于代码... `panel.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(KeyStroke.getKeyStroke("control I"), "newfood!");`

...你还必须有...

```
panel.getActionMap().put("newfood!", [Some actionListener that does what you need to do]); 
```

不完全确定这会纠正问题，但希望能为您解决问题。祝你好运！

# c++ - 显式默认的移动构造函数

> ID：11003210
> 
> 赞同：9
> 
> 时间：2012-06-12T19:09:06.033
> 
> 标签：c++, constructor, c++11, clang, default-constructor

根据 c++11 标准，仅在以下情况下才会生成默认移动构造函数：

*   X 没有用户声明的复制构造函数，并且
*   X 没有用户声明的复制赋值运算符，
*   X 没有用户声明的移动赋值运算符，
*   X 没有用户声明的析构函数，并且
*   移动构造函数不会被隐式定义为已删除。

我还能显式默认它吗？似乎在铿锵声中正常工作。像这样的例子：

```
class MyClass {
private:
  std::vector<int> ints;
public:
  MyClass(MyClass const& other) : ints(other.ints) {}
  MyClass(MyClass&& other) = default;
}; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T19:21:50.050

该规则的动机是，如果默认的复制构造函数不适用于您的类，那么默认的移动构造函数很可能也不起作用（规则 5，或者我们在 C++11 中所做的任何事情） . 所以是的，你可以明确地默认它，以你作为程序员的荣誉，它会起作用。

在您的示例代码中，您可以改为删除复制构造函数，因为它与默认值相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T19:26:06.690

是的，您始终可以显式调用可以使用自动生成的函数的默认生成`= default`。这就是语法的用途。

# javascript - 将 Node.js 应用程序打包为 OS X 应用程序

> ID：11003211
> 
> 赞同：20
> 
> 时间：2012-06-12T19:09:17.110
> 
> 标签：javascript, node.js, macos, native, packaging

我想为我们的开发人员用来管理他们的开发环境的一系列终端命令构建一个界面。我想尝试在 Node.js 中构建它。

现在，我想我可以使用[Express.js](https://en.wikipedia.org/wiki/Express.js)等将其创建为 HTML5/CSS 3/JavaScript 应用程序......然后想将其打包为原生 OS X 应用程序。意思是，一个我可以发送给他们的应用程序，他们双击并运行，但是要么启动 Chrome 浏览器并导航到 localhost:port 服务器，该服务器命中脚本，要么只是启动服务器并指示用户转到网址。无论哪种方式都很好。

我这样做是因为我需要访问本地系统才能配置许多东西并与任意数量的运行（无头虚拟机）交互。所以我不能简单地从服务器上提供这个并让他们访问该站点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-01-07T23:43:53.947

选项 1：[电子](http://electron.atom.io/)（以前的 atom-shell）

这是 GitHub 的[Atom](https://en.wikipedia.org/wiki/Atom_(text_editor))和 Microsoft 的[代码](https://code.visualstudio.com/)编辑器使用的 shell。它与 node-webkit 非常相似，尽管它会首先运行脚本，并且您必须为用户创建一个视图/窗口。还有一些其他的细微差别，但值得一看。

* * *

选项 2：[NW.js](http://nwjs.io/)以前的 node-webkit

要点是它基本上扩展了 JavaScript 引擎，以便您编写支持[Node.js](https://en.wikipedia.org/wiki/Node.js)扩展对象模型和模块的基于 Web 的应用程序......然后您将*package.json* *start.html*模块和 JavaScript 文件打包成 ZIP文件（带有 .nw 扩展名）并使用 nw(.exe) 运行它。有 Windows、Mac 和 Linux 版本可用。

* * *

选项 3：[Neutralinojs](https://neutralino.js.org/) [Github](https://github.com/neutralinojs/neutralinojs)

Neutralinojs 是一个轻量级和可移植的桌面应用程序开发框架。它允许您使用 JavaScript、HTML 和 CSS 开发轻量级跨平台桌面应用程序。您可以使用任何编程语言（通过扩展 IPC）扩展 Neutralinojs，并将 Neutralinojs 用作任何源文件的一部分（通过子进程 IPC）。

* * *

选项 4：[MacGapNode （](https://github.com/node-app/MacGapNode)*仅限*OS X ）

MacGap 与 Node.js 集成（它*似乎*变得陈旧了）

* * *

选项 5：[Tauri](https://tauri.studio/en/docs/about/intro) [Github](https://github.com/tauri-apps/tauri)

Tauri 是一个工具包，可帮助开发人员为主要桌面平台制作应用程序 - 几乎使用现有的任何前端框架。核心是用 Rust 构建的，CLI 利用 Node.js 使 Tauri 成为一种真正的多语言方法来创建和维护出色的应用程序。

* * *

旁白：服务...

我不能将 OS X 作为一个 .App 发言，但很可能在 Node.js 中创建后台服务安装并在桌面上创建一个“本地”站点的链接。大多数浏览器都可以选择不显示所有功能（我知道 Firefox 尤其如此）。

我知道您的问题特别针对 OS X，但在 Windows 中，您可以使用 NSSM 将任何东西作为服务运行，我已经将它用于 Windows 中基于 Node.js 的服务。我认为根据您的需要，上面的其他一些选项会更好。

* * *

删除：

*   ~~[nexe](https://github.com/crcn/nexe)~~ - 陈旧/未维护
*   ~~[AppJS](http://appjs.org/)~~ - 替换为 DeskShell
*   ~~[DeskShell](https://github.com/sihorton/appjs-deskshell)~~ - 陈旧，网站离线
*   ~~[node-webkit](https://github.com/rogerwang/node-webkit)~~ - 重命名为 NW.js
*   ~~[XULRunner](https://developer.mozilla.org/en-US/docs/XULRunner)~~项目停滞不前，而且非常落后。
*   ~~[推力](https://github.com/breach/thrust)（[节点适配器](https://www.npmjs.com/package/node-thrust)）~~ - 已弃用/陈旧
*   ~~[来自 Node.js 的Carlo](https://github.com/GoogleChromeLabs/carlo) [Chrom(ium)](https://en.wikipedia.org/wiki/Chromium_(web_browser)) shell。~~- 未维护/陈旧

* * *

此答案针对多个问题复制，这些参考主要是为了更新方便。

*   *[将 Node.js Web 应用程序打包为普通桌面应用程序](https://stackoverflow.com/a/12486874/43906)*
*   *[将 Node.js 应用程序打包为 OS X 应用程序](https://stackoverflow.com/a/27830697/43906)*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-30T15:47:52.263

这是关于安装程序 (.pkg) 主题的截屏视频 + 文章：

[如何为 NodeJS 应用程序创建 OS X pkg](https://coolaj86.com/articles/how-to-create-an-osx-pkg-installer.html)

至于 .app，我还不确定，但我很兴奋。

还：

*   [如何为 Ubuntu Linux 创建 Node.js 应用程序 .deb](https://coolaj86.com/articles/how-to-create-a-debian-installer.html)
*   [如何为 Microsoft Windows 创建 Node.js 应用程序 .exe](https://coolaj86.com/articles/how-to-create-an-innosetup-installer.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T22:04:38.073

查看[AppJS](http://appjs.com/) -“使用 HTML、CSS 和 JavaScript 为 Linux、Windows 和 Mac 构建桌面应用程序”

这听起来像一个很好的匹配:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-06T21:44:08.900

查看[NW.js](http://github.com/rogerwang/node-webkit) - 这是英特尔赞助的一个项目，用于为桌面打包 Node.js 应用程序。

具体来说，请参阅*[使用 node-webkit 创建桌面应用程序](http://strongloop.com/strongblog/creating-desktop-applications-with-node-webkit/)*。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-12T20:19:23.117

如果您从源代码编译 Node.js，则 Node.js`lib`文件夹中的每个 JavaScript 文件都将包含在二进制文件中。同样的方式可以将您的代码打包到二进制文件中。

我不熟悉 Mac OS X 包是如何创建的，但最终它似乎并不[难](http://hints.macworld.com/article.php?story=20030619213002144)。只需将您的自定义 Node.js 二进制文件打包成一个即可。

# javascript - javascript / youtube api - 未定义变量 YT

> ID：11003216
> 
> 赞同：7
> 
> 时间：2012-06-12T19:09:46.317
> 
> 标签：javascript, youtube, youtube-api, youtube-javascript-api

我正在创建一个通过 YT api 嵌入的 youtube 播放器，但我不断收到未定义变量 YT 的警报。我可以看到包含 youtube API 的脚本，它应该创建变量 YT - 那么为什么这不起作用？它在我网站的其他地方工作。

这是链接：

[http://oncreativity.tv/site/single/4/7CtQaTmEuWk](http://oncreativity.tv/site/single/4/7CtQaTmEuWk)

和我的代码：

```
<script>

 $(document).ready(function() {

    var tag = document.createElement('script');
    tag.src = "http://www.youtube.com/player_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    var player;

    var videoSupport = Modernizr.video;
    var ua = navigator.userAgent.toLowerCase();
    var vid = {};

    var params = { allowScriptAccess: "always" };
    var atts = { id: "video_player_flash" };

    {exp:channel:entries channel="creators" dynamic="off" entry_id="{segment_3}" sort="asc" limit="1"}  
    vid.description = "{creator_description}";
    vid.videoID = '{segment_4}';
    vid.link = encodeURI("{creator_link}");
    vid.title = "{title}";
    vid.photos = [];
    {creator_work}  
        vid.photos[{row_index}] = {};
        vid.photos[{row_index}].url = "{work_img}";
        vid.photos[{row_index}].title = "{work_title}";
    {/creator_work}
    {/exp:channel:entries}

    var $vidContainerRef = $('#video_player_container');
    var $vidPlayer = $('<div id="video_player"/>');
    $vidContainerRef.append($vidPlayer);
    vidID = vid.videoID;

    player = new YT.Player('video_player', {
        width: '768',
        height: '432',
        videoId: vidID,
        events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
        }
    });

});

</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T19:42:32.910

您需要将 YT 调用包装在一个函数中，并在包含脚本时调用它。或者，您可以从文件中添加脚本，而不是调用该脚本来包含另一个脚本。

```
function doYT(){
    window.player = new YT.Player('video_player', {
        width: '768',
        height: '432',
        videoId: vidID,
        events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
        }
    }
}

window.YT && doYT() || function(){
    var a=document.createElement("script");
    a.setAttribute("type","text/javascript");
    a.setAttribute("src","http://www.youtube.com/player_api");
    a.onload=doYT;
    a.onreadystatechange=function(){
        if (this.readyState=="complete"||this.readyState=="loaded") doYT()
    };
    (document.getElementsByTagName("head")[0]||document.documentElement).appendChild(a)
}(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-11T09:04:03.563

这是我最喜欢的方法。使用 jQuery 仅供参考。

```
var player = {
    playVideo: function(container, videoId) {
        if (typeof(YT) == 'undefined' || typeof(YT.Player) == 'undefined') {
            window.onYouTubePlayerAPIReady = function() {
                player.loadPlayer(container, videoId);
            };
            $.getScript('//www.youtube.com/player_api');
        } else {
            player.loadPlayer(container, videoId);
        }
    },
    loadPlayer: function(container, videoId) {
        window.myPlayer = new YT.Player(container, {
            playerVars: {
                modestbranding: 1,
                rel: 0,
                showinfo: 0,
                autoplay: 1
            },
            height: 200,
            width: 200,
            videoId: videoId,
            events: {
                'onStateChange': onPlayerStateChange
            }
        });
    }
};

var containerId = 'ytplayer';
var videoId = 'abc123';
player.playVideo(containerId, videoId); 
```

# visual-studio-2010 - 无法创建着色器 OpenGL 4.x

> ID：11003217
> 
> 赞同：0
> 
> 时间：2012-06-12T19:09:51.243
> 
> 标签：visual-studio-2010, opengl, shader, pdb

我正在使用[本教程](http://openglbook.com/the-book/chapter-2-vertices-and-shapes/#toc-drawing-the-vbo-renderfunction)。我有正确的硬件来运行它（AMD 6870）。我已经按照教程进行了操作，但在它退出之前我只看到了一个闪烁的窗口。当我构建代码时，它构建得很好，但列出了大量找不到 PDB 的 DLL。我单步执行了我的代码（我使用 Visual Studio 2010 prof），它在我的 CreateShaders 函数上退出，并出现无法创建它们的错误。我已经检查了有关该功能的教程，并复制了它。

这是代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <GL/glew.h>
#include <GL/freeglut.h>
#define WINDOW_TITLE_PREFIX "Chapter Two - A Triangle"

    //Global variable dclerations
 int CurrentWidth  = 800;
int CurrentHeight = 600;
int WindowHandle  = 0;

unsigned FrameCount = 0;

GLuint 
vertexShaderId,
fragmentShaderId,
programId,
vaoId,
vboId,
colorBufferId;

//contents of GLSL vertexshader
const GLchar* vertexShader =
{
"version 400\n"\
"layout(location=0) in vec4 in_Position;\n"\
"layout(location=1) in vec4 in_Color;\n"\
"out vec4 ex_Color;\n"\

"void main(void)\n"\
"{\n"\
"   gl_Position = in_Position;\n"\
"   ex_Color = in_Color;\n"\
"}\n"

};

 //contents of fragment shader

 const GLchar* fragmentShader =
{
"#version 400\n"\

"in vec4 ex_Color;\n"\
"out vec4 out_Color;\n"\

"void main(void)\n"\
"{\n"\
"   out_Color = ex_Color;\n"\
"}\n"
 };

//prototypes
 void Initialize(int,char*[]);
void InitWindow(int, char*[]);
void ResizeFunction(int, int);
void RenderFunction(void);
void TimerFunction(int);
void IdleFunction(void);
void CleanUp(void);
void CreateVBO(void);
void DestroyVBO(void);
void CreateShaders(void);
void DestroyShaders(void);

int main(int argc, char* argv[])
{
Initialize(argc, argv);

glutMainLoop();

exit(EXIT_SUCCESS);
}

void Initialize(int argc, char* argv[])
{
GLenum GlewInitResult;

InitWindow(argc, argv);

//glew is initialised after the openGL context is created,
//it needs an active context to implement calls
GlewInitResult = glewInit();

//if glew did not init correctly, print errors
if(GLEW_OK != GlewInitResult)
{
    fprintf(
        stderr,
        "ERROR: %s\n",
        glewGetErrorString(GlewInitResult)
        );
    exit(EXIT_FAILURE);
}

fprintf(
    stdout,
    "INFO: OpenGL Version: %s\n",
    glGetString(GL_VERSION));

CreateShaders();
CreateVBO();
glClearColor(0.0f, 0.0f, 0.0f,0.0f);

}

//uses freeglut to create a window
void InitWindow(int argc, char* argv[]) 
{
//initialises freeglut library
glutInit(&argc, argv);

//creates a forward compatible OpenGL 4.0 core profile
glutInitContextVersion(4,0);
glutInitContextFlags(GLUT_FORWARD_COMPATIBLE);
glutInitContextProfile(GLUT_CORE_PROFILE);

//when window closes, return to main loop
glutSetOption(
    GLUT_ACTION_ON_WINDOW_CLOSE,
    GLUT_ACTION_GLUTMAINLOOP_RETURNS
    );

glutInitWindowSize(CurrentWidth,CurrentHeight);

// enables depth buffer, double buffering, makes RGBA mode
glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);

//makes window, passes it the value of defined window
WindowHandle = glutCreateWindow(WINDOW_TITLE_PREFIX);

if(WindowHandle < 1)
{
    fprintf(
        stderr,
        "ERROR: Could not create a new rendering window.\n"
        );
    exit(EXIT_FAILURE);
}

//called when window is resized
glutReshapeFunc(ResizeFunction);
//called when scene is to be drawn on screen
glutDisplayFunc(RenderFunction);
glutIdleFunc(IdleFunction);
//(ms passed before func is called, func to call, value to pass)
glutTimerFunc(0,TimerFunction,0);
glutCloseFunc(CleanUp);
}

void ResizeFunction(int Width, int Height)
{
CurrentWidth = Width;
CurrentHeight = Height;
glViewport(0,0,CurrentWidth,CurrentHeight);
}

 void RenderFunction(void)
{
FrameCount++;
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glDrawArrays(GL_TRIANGLES,0,3);
glutSwapBuffers();
glutPostRedisplay();
}

 //redraws as soon as possible
void IdleFunction(void)
{
glutPostRedisplay();
}

void TimerFunction(int Value)
{
if(0 != Value)
{
    char* TempString = (char*)
        malloc(512 + strlen(WINDOW_TITLE_PREFIX));

    sprintf(
        TempString,
        "%s: %d Frames Per Second @ %d x %d",
        WINDOW_TITLE_PREFIX,
        //update every quarter of a second
        FrameCount * 4,
        CurrentWidth,
        CurrentHeight
        );

    glutSetWindowTitle(TempString);
    free(TempString);
}

FrameCount = 0;
glutTimerFunc(250, TimerFunction,1);
}

void CleanUp (void)
{
DestroyShaders();
DestroyVBO();
}

void CreateVBO(void)
{
GLfloat vertices[] = {
    -0.8f, -0.8f, 0.0f, 1.0f,
    0.0f,   0.8f, 0.0f, 1.0f,
    0.8f,   -0.8f, 0.0f, 1.0f
};

GLfloat colors[] = {
    1.0f, 0.0f, 0.0f, 1.0f,
    0.0f, 1.0f, 0.0f, 1.0f,
    0.0f, 0.0f, 1.0f, 1.0f
};

GLenum ErrorCheckValue = glGetError();

glGenVertexArrays(1, &vaoId);
glBindVertexArray(vaoId);

glGenBuffers(1, &vboId);
glBindBuffer(GL_ARRAY_BUFFER, vboId);
glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);
glVertexAttribPointer(0,4,GL_FLOAT,GL_FALSE,0,0);
glEnableVertexAttribArray(0);

glGenBuffers(1, &colorBufferId);
glBindBuffer(GL_ARRAY_BUFFER, colorBufferId);
glBufferData(GL_ARRAY_BUFFER, sizeof(colors), colors, GL_STATIC_DRAW);
glVertexAttribPointer(0,4,GL_FLOAT,GL_FALSE,0,0);
glEnableVertexAttribArray(1);

ErrorCheckValue = glGetError();
if (ErrorCheckValue != GL_NO_ERROR)
{
    fprintf(
        stderr,
        "ERROR: Could not create a VBO: %s \n",
        gluErrorString(ErrorCheckValue)
        );

    exit(-1);
}

 }

 void DestroyVBO(void)
 {
GLenum ErrorCheckValue = glGetError();

glDisableVertexAttribArray(1);
glDisableVertexAttribArray(0);

glBindBuffer(GL_ARRAY_BUFFER,0);

glDeleteBuffers(1, &colorBufferId);
glDeleteBuffers(1, &vboId);

glBindVertexArray(0);
glDeleteVertexArrays(1, &vaoId);

ErrorCheckValue = glGetError();
if(ErrorCheckValue != GL_NO_ERROR)
{
    fprintf(
        stderr,
        "ERROR: Could not Destroy the VBO: %s \n",
        gluErrorString(ErrorCheckValue)
        );
    exit(-1);
}
}

void CreateShaders(void)
{
GLenum ErrorCheckValue = glGetError();

vertexShaderId =glCreateShader(GL_VERTEX_SHADER);
glShaderSource(vertexShaderId, 1, &vertexShader, NULL);
glCompileShader(vertexShaderId);

fragmentShaderId = glCreateShader(GL_FRAGMENT_SHADER);
glShaderSource(fragmentShaderId, 1, &fragmentShader, NULL);
glCompileShader(fragmentShaderId);

programId = glCreateProgram();
    glAttachShader(programId, vertexShaderId);
    glAttachShader(programId,fragmentShaderId);
glLinkProgram(programId);
glUseProgram(programId);

ErrorCheckValue = glGetError();
if(ErrorCheckValue != GL_NO_ERROR)
{
    fprintf(
        stderr,
        "ERROR: Could not create the shaders: %s \n",
        gluErrorString(ErrorCheckValue)
        );

    exit(-1);
}
 }

 void DestroyShaders(void)
{
GLenum ErrorCheckValue = glGetError();

glUseProgram(0);

glDetachShader(programId,vertexShaderId);
glDetachShader(programId,fragmentShaderId);

glDeleteShader(fragmentShaderId);
glDeleteShader(vertexShaderId);

glDeleteProgram(programId);

ErrorCheckValue = glGetError();
if(ErrorCheckValue != GL_NO_ERROR)
{
    fprintf(
        stderr,
        "Error: Could not destroy the shaders %s\n",
        gluErrorString(ErrorCheckValue)
        );
    exit(-1);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:21:03.887

DLL/PDB 是正常的，我认为它对您的代码没有任何影响（我相信它涉及从 DLL 加载调试信息，这不是必需的）。

着色器有自己的错误报告机制，它在 glGetError 之外，你应该将它添加到你的代码中。

编译每个单独的着色器后，您要调用：

`glGetShaderiv`with 选项`GL_COMPILE_STATUS`（如果编译成功，则返回 true/false）。

如果编译失败，您可以通过`glGetShaderInfoLog`.

然后在链接程序后，您想调用`glGetProgramiv`get `GL_LINK_STATUS`，并再次使用`glGetProgramInfoLog`.

# jquery - 使用 jQuery 启用/禁用复选框

> ID：11003221
> 
> 赞同：0
> 
> 时间：2012-06-12T19:09:58.343
> 
> 标签：jquery

我想要一个 jquery 函数，当单击任何复选框时将激活该函数，并且根据单击的复选框的值字段，它将禁用或启用其他复选框。

到目前为止，我有：

```
$(function () {
    $('input [type="checkbox"]').click(function () {

    });
}); 
```

好的，所以我已经取得了一些进展.. 但它仍然无法正常工作。

```
<script type="text/javascript">
$(function () {
    $(':checkbox').click(function () {

        $value = $(this).attr('value');

        if ($(this).is(':checked'))
        {
            switch ($value)
            {
                case "BLIPA":
                    $(':checkbox[value*="B"]').attr('disabled', true);
            }
        }
        else
        {
            $(':checkbox').each(function()
            {

            }
        }
    });
}); 
```

我犯过什么错误吗？

编辑：

好的，我已经解决了。这是解决方案：

```
<script type="text/javascript">
$(function () {
    $("input[type='checkbox']").click(function () {

        var value = $(this).attr('value');

        if ($(this).is(':checked')) {

            var modules = FindModuleRules(value);

            $(':checkbox[value*="' + modules[0] + '"]').attr('disabled', true);
            $(':checkbox[value*="' + modules[1] + '"]').attr('disabled', true);
            $(':checkbox[value*="' + modules[2] + '"]').attr('disabled', true);
            $(':checkbox[value~="' + value + '"]').attr('disabled', false);

        }
        else {
            var modules = FindModuleRules(value);

            $(':checkbox[value*="' + modules[0] + '"]').attr('disabled', false);
            $(':checkbox[value*="' + modules[1] + '"]').attr('disabled', false);
            $(':checkbox[value*="' + modules[2] + '"]').attr('disabled', false);
        }
    });

    function FindModuleRules(string) {

        var modules = new Array();

        var bRegex = /B/;
        var lRegex = /L/;
        var aRegex = /A/;

        if (string.search(bRegex) != -1)
            modules[0] = "B";
        else
            modules[0] = "X";
        if (string.search(lRegex) != -1)
            modules[1] = "L";
        else
            modules[1] = "X";
        if (string.search(aRegex) != -1)
            modules[2] = "A";
        else
            modules[2] = "X";

        return modules;
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:19:30.070

首先，您不能在和之间有空格`input`，`[type="checkbox"]`因为它会在其他输入元素中查找复选框（*这是无效的*）..

所以像

```
$('input[type="checkbox"]').click(function () {
    $('otherselector').prop('disabled', this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:31:14.243

如果不确切了解您*的*标记设置方式，就很难告诉您需要做什么。然而，她是一个[jsfiddle](http://jsfiddle.net/y9Vyy/)来说明：

**HTML**

```
<input type="checkbox" id="ckall" /> Check 'em all!
<ul>
    <li><input type="checkbox" /> Item 1</li>
    <li><input type="checkbox" /> Item 2</li>
    <li><input type="checkbox" /> Item 3</li>
    <li><input type="checkbox" /> Item 4</li>
    <li><input type="checkbox" /> Item 5</li>
</ul>​ 
```

**JS**

```
$("input[type='checkbox']").click(function() {
    $("ul :checkbox").attr("checked", $(this).is(":checked"));            
});​ 
```

根据您的标记，以及您想要做什么将决定您的 jQuery 选择器*。*但是，我假设您正在寻找创建“全选”类型的复选框。如果是这样，您将在小提琴中看到**选中所有**复选框事件然后选择某个容器元素中的所有复选框。如果你不这样做，那么你也可能会改变你的**检查所有**复选框的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:11:59.963

```
$('input [type="checkbox"]').click(function () {
    if($(this).is(':checked')) {
        //do stuff
    }
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:28:34.887

我已经回答了这个问题。感谢所有的帮助。

```
<script type="text/javascript">
$(function () {
    $("input[type='checkbox']").click(function () {

        var value = $(this).attr('value');

        if ($(this).is(':checked')) {

            var modules = FindModuleRules(value);

            $(':checkbox[value*="' + modules[0] + '"]').attr('disabled', true);
            $(':checkbox[value*="' + modules[1] + '"]').attr('disabled', true);
            $(':checkbox[value*="' + modules[2] + '"]').attr('disabled', true);
            $(':checkbox[value~="' + value + '"]').attr('disabled', false);

        }
        else {
            var modules = FindModuleRules(value);

            $(':checkbox[value*="' + modules[0] + '"]').attr('disabled', false);
            $(':checkbox[value*="' + modules[1] + '"]').attr('disabled', false);
            $(':checkbox[value*="' + modules[2] + '"]').attr('disabled', false);
        }
    });

    function FindModuleRules(string) {

        var modules = new Array();

        var bRegex = /B/;
        var lRegex = /L/;
        var aRegex = /A/;

        if (string.search(bRegex) != -1)
            modules[0] = "B";
        else
            modules[0] = "X";
        if (string.search(lRegex) != -1)
            modules[1] = "L";
        else
            modules[1] = "X";
        if (string.search(aRegex) != -1)
            modules[2] = "A";
        else
            modules[2] = "X";

        return modules;
    }

}); 
```

我使用 FindModuleRule 函数对所有值字符串进行排序，并挑选出仅出现在某些值中的关键字符，例如“A”、“L”或“B”，如果没有找到，则分配给“X”，即在任何值字符串中都找不到。然后，我使用该字符选择所有具有包含该字符的值的复选框，并根据情况打开或关闭它们，然后将单击的复选框切换到适当的状态。

# jquery - 知道为什么我的 jQuery .ajax() 函数不会运行“成功”部分吗？

> ID：11003222
> 
> 赞同：1
> 
> 时间：2012-06-12T19:09:59.590
> 
> 标签：jquery, ajax

我有以下代码：

```
$.ajax({
    async: false,
    url: 'chart_data.php',
    data: {'option':'high', 'id':id},
    dataType: 'json',
    success: function(response){
        alert('in');
        var data = google.visualization.arrayToDataTable(response);
        var options= { curveType:'none', width: 300, height: 200, hAxis: {title:'Years'}, vAxis: {title:'Value'}, title: 'High Time - Low Value' };
        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);  
    }
}); 
```

在一个网页中。我希望基于下拉菜单显示图表。该功能的其余部分工作得很好。我检查了 Firebug，JSON 响应带有 200 OK 状态消息。事实上，我可以在 Firebug 中看到所有的 JSON。

问题仍然存在，为什么`alert('in');`永远不会触发，为什么谷歌不将它的图表加载到相关的图表 div 中？

编辑：

添加错误回调时出现以下错误：parseerror SyntaxError：JSON.parse：意外字符。

这是来自服务器的 JSON 响应：

```
[['Year', 'Low', 'High'],['1984', 318000, 395000],['1984', 418000, 495000],
['1984', 380000, 450000],['1984', 410000, 460000],['1984', 410000, 460000],
['1985', 435000, 485000],['1985', 435000, 485000],['1985', 435000, 485000],
['1985', 435000, 485000],['1985', 435000, 485000],['1985', 435000, 485000],
['1985', 435000, 485000],['1985', 435000, 485000],['1985', 318000, 395000],
['1985', 418000, 495000],['1985', 380000, 450000],['1985', 420000, 470000],
['1985', 420000, 470000]] 
```

它看起来对我来说是正确的，虽然我不是 100% 确定 JSON 结构。

# 编辑：

我做了一些改变，似乎我走得更远了。首先，我`header('Content-type: application/json');`从我的 php 脚本中删除了该行。然后我将其更改`dataType: 'json'`为`dataType: 'html'`.

它现在在 $.ajax() 调用中加载成功回调。当我尝试将其发送到 Google 的 arrayToDataTable() 方法时，它不喜欢文本响应。

如果我可以将返回的字符串（看起来像上面的 JSON 响应，实际上不是 JSON 响应）解析为 javascript 数组，那么我会很高兴。我希望。

# 编辑：

我最终在我的成功回调中使用了一个 eval 语句将 http 响应转换为一个数组`eval('var res = ' + response);`。这可能不是最好的方法。如果有人有更好（更安全）的方式来做到这一点，那就太好了。

# 编辑：

我不太喜欢使用 eval 语句，所以我研究了将返回字符串更改为数组的其他方法。在遇到这个小宝石之前，我并没有真正关心他们中的任何一个：

```
response = JSON.parse(response); 
```

这没有问题。

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:25:06.250

您的 JSON 格式存在错误，字符串必须是双引号 (") 而不是单引号 (')

如果你想检查你的 JSOn 是否有效，你可以使用[这个](http://json.parser.online.fr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:16:08.090

好的，还没有人回答，所以我会在这里试一试。看起来您已经更新了一条错误消息以及您从 ajax 调用获得的返回值。

问题是您收到的不是 JSON 对象，而是 javascript 数组。JSON 对象将包含在大括号 { 和 } 中，而数组则包含在方括号 [ 和 ] 中。

您应该修改您通过 ajax 调用的脚本，以便它返回正确的 JSON 对象（在 php 中使用[json_encode](http://php.net/manual/en/function.json-encode.php)非常方便）。

你会希望你的回复看起来更像这样：

```
{"data":[["Year", "Low", "High"],["1984", 318000, 395000],["1984", 418000, 495000],
["1984", 380000, 450000],["1984", 410000, 460000],["1984", 410000, 460000],
["1985", 435000, 485000],["1985", 435000, 485000],["1985", 435000, 485000],
["1985", 435000, 485000],["1985", 435000, 485000],["1985", 435000, 485000],
["1985", 435000, 485000],["1985", 435000, 485000],["1985", 318000, 395000],
["1985", 418000, 495000],["1985", 380000, 450000],["1985", 420000, 470000],
["1985", 420000, 470000]]} 
```

根据[google](https://developers.google.com/chart/interactive/docs/reference)，他们正在寻找这样的东西：

```
{
   cols: [{id: 'task', label: 'Task', type: 'string'},
          {id: 'hours', label: 'Hours per Day', type: 'number'}
   ],
   rows: [{c:[{v: 'Work'}, {v: 11}]},
          {c:[{v: 'Eat'}, {v: 2}]},
          {c:[{v: 'Commute'}, {v: 2}]},
          {c:[{v: 'Watch TV'}, {v:2}]},
          {c:[{v: 'Sleep'}, {v:7, f:'7.000'}]}
   ]
 } 
```

那么，也许您实际上需要重新处理数据以首先遵循此结构？像这样的东西：

```
{
  "cols": [{"id":"year", "label":"Year", "type":"string"},
         {"id":"low",  "label":"Low",  "type":"string"},
         {"id":"high", "label":"High", "type":"string"}],
  "rows": [{"c":[{"v":"1984"}, {"v":"318000"}, {"v":"395000"}]},
         {"c":[{"v":"1984"}, {"v":"418000"}, {"v":"495000"}]},
         {"c":[{"v":"1984"}, {"v":"380000"}, {"v":"450000"}]},
         {"c":[{"v":"1985"}, {"v":"420000"}, {"v":"470000"}]}]
} 
```

如果 JSON 看起来有点混乱，您可以在此处阅读更多信息：http: [//www.json.org/](http://www.json.org/)

**编辑**

考虑到我忽略了 .arrayToDataTable() 函数调用，我想我应该从谷歌的文档中引用这个例子（上面已经引用了链接）：

```
// Version 1: arrayToDataTable method
var data2 = google.visualization.arrayToDataTable([
  ['Country', 'Population', 'Area'],
  ['CN', 1324, 9640821],
  ['IN', 1133, 3287263],
  ['US', 304, 9629091],
  ['ID', 232, 1904569],
  ['BR', 187, 8514877]
]); 
```

由于您的阵列是这样进来的：

```
[['Year', 'Low', 'High'],
 ['1984', 318000, 395000],
 ['1984', 418000, 495000],
 ['1984', 380000, 450000],
 ['1984', 410000, 460000],
 ['1984', 410000, 460000],
 ['1985', 435000, 485000],
 ['1985', 435000, 485000],
 ['1985', 435000, 485000],
 ['1985', 435000, 485000],
 ['1985', 435000, 485000],
 ['1985', 435000, 485000],
 ['1985', 435000, 485000],
 ['1985', 435000, 485000],
 ['1985', 318000, 395000],
 ['1985', 418000, 495000],
 ['1985', 380000, 450000],
 ['1985', 420000, 470000],
 ['1985', 420000, 470000]] 
```

看起来格式正确，我认为您应该尝试将 ajax 调用中的“dataType”更改为“text”而不是“json”，因为您实际上返回的是一个数组而不是 JSON 对象。这应该可以解决您的问题。

# ios - 如何防御“消耗品”购买的 IAP Cracker？

> ID：11003226
> 
> 赞同：1
> 
> 时间：2012-06-12T19:10:21.990
> 
> 标签：ios, jailbreak, in-app-purchase

我刚刚了解了 IAP Cracker 的存在，我正在尝试找出在我的应用程序中验证 IAP 购买的最佳方法。

我无法确定 IAP Cracker 是否适用于“消耗品”购买。如果没有，我没什么好担心的。

这是保护/验证所有购买的一种方法。

[http://www.binpress.com/app/inapp-purchase-verification/633#description](http://www.binpress.com/app/inapp-purchase-verification/633#description)

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T00:55:46.017

我看了你显示的那个链接，但如果我是你，我不会相信的。任何了解逆向工程和开发的人都可以轻松绕过该方法。任何人都可以轻松地编写一个 hack，它会自动免费为您提供内容。

我不知道验证应用内购买的安全方法，因为我没有使用过它们，但请记住这一点：无论你做得多么安全，一个坚定的黑客都能够绕过它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:43:50.387

我建议让您的远程服务器进行通信和存储数据。因此，当您通过客户端拨打电话时，请确保将信息发送到远程服务器，然后客户端会收到回叫“是的，购买成功”。现在，当用户实际尝试使用购买时，他们必须调用您的远程服务器，以验证传入的数据是否实际可用。

因此，假设用户购买了“10 个硬币”，您的客户端将“我需要验证”发送到您的服务器，然后您的服务器将其消息发送给苹果并获得它的响应（在这种情况下，我们可以说它是一个“很好”的响应）。然后，您的服务器将用户“*”的“10 个硬币”存储在其数据库中，并将“购买的 10 个硬币”返回给客户端。然后，用户使用 10 个硬币在游戏中进行购买，这会向您的远程服务器发送另一条消息，远程服务器检查数据库并查看用户是否有可用的硬币并采取相应的行动。

这是安全的原因：用户有 0 个硬币，并且“伪造”一条消息说他们想购买您的物品并在消息中“放置”60 个硬币。当远程服务器收到消息时，它会根据它的数据库检查使用的值 (60) 并看到用户没有 60 个硬币，然后它就会使消息失败。

因此，在远程服务器上维护您的所有数据，并让客户端进行网络调用以访问用户拥有的内容/数量。这样，用户可以随心所欲地更改客户端上的数据，但这没关系，因为远程服务器不会与数据匹配，并且会在他们的诡计上出错。

# clang - clang scan-build 仅适用于 arch i386

> ID：11003227
> 
> 赞同：3
> 
> 时间：2012-06-12T19:10:30.027
> 
> 标签：clang, scan-build

我正在评估使用 clang scan-build 作为我在 Jenkins iOS 构建作业中的构建步骤之一。我首先尝试使用以下命令在命令行上运行 scan-build

../clang-scan/scan-build -k -v -v -o "/Users/admin/clangScanBuildReports" -v xcodebuild -workspace AppsWorkspace.xcworkspace -scheme testapp -configuration Debug -arch i386 -sdk iphonesimulator clean build

上面的命令工作正常，但是，当我尝试将架构用作 armv6 或 armv7 时，它给了我以下错误：检查依赖项 [BEROR]No architectures to compile for (ARCHS=armv6, VALID_ARCHS=i386)。

想确认 clang 静态分析器是否不能在 armv6 或 armv7 架构上执行，它只能在 i386 上执行吗？

谢谢，阿希什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T15:32:02.853

4Not sure why, but creating a symlink of /usr/lib/arc/libarclite_iphonesimulator.a to /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/arc/libarclite_iphonesimulator.a fixed our builds for us.

(Xcode 4.4.1, checker-267, OSX 10.7.4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:29:28.667

在您的 xcode 目标构建设置中，只需确保您的调试构建的“仅构建活动架构”设置为否。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T11:21:08.227

当您的 -sdk 是 iphonesimulator 时，这是真的。

对于“arm”拱门，您需要将 -sdk 指定为 iphoneos6.1 或您想要构建的任何一个。

要查看 sdk 列表，请在终端中执行以下命令。

```
xcodebuild -showsdks 
```

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T11:48:18.207

全部，

我们也遇到了同样的问题，发现 Mountain Lion 中缺少合适的模拟器。一旦我们安装了模拟器，它就可以正常工作，没有任何问题。

# ios - 如何在 UITableView 上只圆角？

> ID：11003228
> 
> 赞同：5
> 
> 时间：2012-06-12T19:10:33.007
> 
> 标签：ios, rounded-corners, uibezierpath, uitableview

我试图只舍入我的表格视图的右上角和左上角。我正在使用下面的代码，它似乎只是在左上角四舍五入......

```
CAShapeLayer *topLayer = [CAShapeLayer layer];
UIBezierPath *roundedPath = 
[UIBezierPath bezierPathWithRoundedRect:self.bounds byRoundingCorners:UIRectCornerTopRight | UIRectCornerTopLeft cornerRadii:CGSizeMake(9.f, 9.0f)];    
topLayer.path = [roundedPath CGPath]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-05T05:35:08.310

希望这会奏效。找到顶角路径以创建遮罩层

```
UIBezierPath *PathToMask;
PathToMask = [UIBezierPath bezierPathWithRoundedRect:self.testView.bounds
                                 byRoundingCorners:(UIRectCornerTopLeft | UIRectCornerTopRight)
                                       cornerRadii:CGSizeMake(8.0, 8.0)]; 
```

使用 UIBezierPath maskPath 创建形状图层蒙版

```
CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init]; 
maskLayer.frame =self.testView.bounds;
maskLayer.path = PathToMask.CGPath; 
```

设置遮罩层maskLayer

```
self.testView.layer.mask = maskLayer; 
```

# sql - 从前一个日期检索特定字段

> ID：11003229
> 
> 赞同：0
> 
> 时间：2012-06-12T19:10:34.927
> 
> 标签：sql, database, date

以下信息当前存在于数据库中。

```
ID -- 公司 --- 当前值 ---- 日期
1 -- 公司 1 ----- 12 --------- 2010 年 3 月 25 日
2 -- 公司 1 ----- 17 --------- 2011 年 3 月 25 日
3 -- 公司 2 -------- 65 --------- 2011 年 4 月 23 日
4 -- 公司 1 -------- 45 --------- 2012 年 3 月 25 日
5 -- 公司 2 -------- 34 --------- 2012 年 4 月 23 日

```

有什么方法可以计算该字段以找到每家公司上一年的值吗？

```
ID -- 公司 --- 当前值 --- 去年值 ---- 日期
1 -- 公司 1 -------- 12 ---------------- 0 --------- 2010 年 3 月 25 日
2 -- 公司 1 ------- 17 --------------- 12 --------- 2011 年 3 月 25 日
3 -- 公司 2 -------- 65 ---------------- 0 --------- 2011 年 4 月 23 日
4 -- 公司 1 ------- 45 --------------- 17 --------- 2012 年 3 月 25 日
5 -- 公司 2 ------- 34 --------------- 65 --------- 2012 年 4 月 23 日

```

我尝试了很多解决方案，包括搜索这个网站，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:26:16.697

由于您的表的日期似乎恰好相隔一年，因此可以简单地通过左连接来完成。

```
SELECT a.ID, 
    a.Company, 
    a.CurrentValue, 
    ISNULL(b.CurrentValue, 0) AS 'LastYearValue',
    a.Date
FROM dbo.Table a
LEFT JOIN dbo.Table b ON a.Company = b.Company AND b.Date = DATEADD(YEAR, -1, a.Date) 
```

# ruby-on-rails-3 - 如何从通过 HTTP Post 收到的电子邮件中获取标头信息（例如主题）

> ID：11003230
> 
> 赞同：2
> 
> 时间：2012-06-12T19:10:36.597
> 
> 标签：ruby-on-rails-3, email

我正在使用[CloudMailin](http://docs.cloudmailin.com/receiving_email/examples/ruby/#rails3/)尝试通过电子邮件将个人资料图片上传到移动设备网站。使用他们的文档，我...

传入邮件控制器.rb：

```
 def create
    ...
    user_id = params[:headers][:subject] # line 13
    ...
  end 
```

我得到的错误：

```
NoMethodError (undefined method `[]' for nil:NilClass):
  app/controllers/incoming_mails_controller.rb:13:in `create' 
```

日志的相关部分：

```
Apple-Mail=_...\r\n", "x_references"=>"sample@example.com", "x_cc_header"=>"", "subject"=>"Smith, Joe"} 
```

在网上翻遍了解决方案，没有找到解决方案。谢谢你的帮助。

* * *

## 更新：

在控制器中放置以下内容：

```
::Rails.logger.info "PARAMS INSPECT: " + params.inspect 
```

以下只是它产生的一小部分：

```
PARAMS INSPECT: {"message"=>"Received: by ... :content-type:subject:date:message-id:to:mime-version:x-mailer\r\n...
Content-Type: multipart/alternative; boundary=\"Apple-Mail=_..."\r\n
Subject: Smith, John\r\n ...
"return_path"=>"yada@blah.com", 
"x_from_header"=>"[\"blay@yada.com\"]", ...
"subject"=>"Smith, John" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:39:27.093

很难确定 params 哈希的确切结构和没有完整（可能很长）打印出 params 的任何子哈希，但看起来每个标题都有一个参数，包括一个“主题”参数 ( `params[:subject]`,大概？）。那是你需要的吗？

# c# - 防止通过接口拦截调用

> ID：11003232
> 
> 赞同：0
> 
> 时间：2012-06-12T19:10:41.040
> 
> 标签：c#, .net, interface, interception

我有一个接口，它在我的应用程序中通过 MEF 实现类导出。实现类位于单独的程序集中，并且在编译时不知道（想想插件）。

该接口基本上由一个调用组成，该调用说“这是一堆键值对，现在初始化您的许可状态”。IE

`public LicensingInfo InitialiseLicense(IEnumerable<KeyValuePair<string, string>> keys)`

我想知道的是 - 有没有办法保护该接口免受“中间人”实现的影响？即，接收来自我的应用程序的调用，然后使用不同的键值对在插件程序集上调用相同的方法，基本上说“是的 - 在这里你去 - 拥有一切”。

我确实尝试过以不同的方式思考它，因为应用程序将调用插件程序集并传入一个可以查询的对象。该方法可能如下所示：

`public LicensingInfo InitialiseLicense(ILicenseQueryProvider provider)`

但是，再次使用这种方法，我认为拦截对象可以简单地为库提供不同的提供者。

那么，有没有办法可以防止这种接口拦截，或者我应该重构它，以便插件程序集完全负责它自己的代码中的许可证加载等？还是有另一种方法，也许，我可以重构我没有考虑过的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:18:51.553

我相信您可以使其更难破解，但不能使用界面。

这是你要做的：

您需要 2 + n 个项目：一个用于 exe（我们称之为 program.exe），一个用于合同（contracts.dll），一个用于每个 n 个插件（plugin.dll）。

program.exe 对contracts.dll 有硬引用，plugin.dll 也是如此。

使用强名称密钥对它们进行签名。请参阅[http://msdn.microsoft.com/en-us/library/xc31ft41.aspx](http://msdn.microsoft.com/en-us/library/xc31ft41.aspx)

在contracts.dll 中创建一个密封类LicenceQueryProvider，而不是接口ILicenceQueryProvider。确保它没有公共构造函数，只有一个内部构造函数，并且没有修改对象的方法（在构造时初始化，不可变且具有只读字段）。

使用 InternalsVisibleToAttribute 标记 contracts.dll，授予 program.exe 访问内部构造函数的权限。请参阅[http://msdn.microsoft.com/en-us/library/System.Runtime.CompilerServices.InternalsVisibleToAttribute.aspx](http://msdn.microsoft.com/en-us/library/System.Runtime.CompilerServices.InternalsVisibleToAttribute.aspx)

这样，program.exe 可以调用这个对象的构造函数，plugin.dll 可以从中读取。

plugin.dll “知道”对象类由于强名称签名而未被修改。而且因为它是密封的，中间的人不能替代另一个实现。

现在记住我说过你可以让它更难破解，但这不是不可能的，而且永远不会，特别是如果你使用托管代码。

例如，中间的人可以使用反射来实例化具有内部构造函数的对象。

更糟糕的是，在您的插件中有从该对象读取的代码，并根据许可证信息做出决定。黑客可以将您的 plugin.dll 反编译为 IL，并将该代码替换为始终授予所有权限的代码。

混淆只会有一点帮助，但对反射攻击没有帮助。本机代码会使它变得更加困难，但本机代码也可以修补。

最终，代码在黑客的机器上，黑客可以为所欲为。他甚至可以在调试器下运行它，并修改内存中的数据。这是所有版权保护和许可机制都面临的问题。在我看来，许可证使您的客户更难使用您的软件，并且不会阻止坚定的黑客。您（或您的公司）是否想让您的客户难以使用您的软件？

现在这并不意味着没有解决方案。事实上有：黑客不能修改不在他机器上的代码。让代码在您控制的服务器上运行。客户端应用程序通过 Web 服务访问它。Web 服务对用户进行身份验证（不是调用代码，这是不可能的）。了解用户后，该服务可以验证用户的许可证。这是唯一的解决方案。

**更新**

需要明确一点：这样的服务需要运行对用户有价值的实际代码，而不仅仅是许可证检查。在后一种情况下，黑客可以修改客户端以简单地停止调用，甚至替换伪造的许可证服务器。但是，假设许可比重新创建服务中的实际逻辑更便宜。在这种情况下，即使是黑客也更愿意购买而不是重新创建代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:27:25.560

没有万无一失的方法来保护您的软件。

我们曾经使用过（前面的广告）Safenet Inc 的 Sentinel 硬件密钥、dotfuscator pro 和智能组件来保护我们的一些应用程序。

硬件密钥可用于存储许可证（即每个功能/插件都有自己的许可证，可以在硬件密钥上启用并由应用程序查询）。可选地，他们的产品可用于加密您的应用程序 - 应用程序被加密，然后只能在内存中解密并在正确的硬件密钥连接到系统时启动。有一些反调试机制使某人更难使用调试器，等待应用程序在内存中解密然后复制它。

Dotfuscator 和智能程序集可用于“混淆”应用程序代码，从而使使用 Reflector 等工具进行反编译变得更加困难。

不过，这些工具都不是防弹的。但是“实现/窃取真的很痛苦”？我会这么说，但这是有代价的……你肯定可以在这些工具上投入很多钱。

# php - windows下的php命令行

> ID：11003233
> 
> 赞同：0
> 
> 时间：2012-06-12T19:10:41.150
> 
> 标签：php, command-line, wamp

我正在`php`使用`WAMP`. 我试图在 abc 目录下运行一个外部程序 prog.exe，它采用一个数字参数。DOS命令行上的以下命令工作正常

```
c:\abc\prog.exe 1234 
```

但是当我在 php 脚本中执行此操作时，它不会运行。

```
$val="1234";
$comm = passthru("C:\abc\prog.exe ".$val) 
```

但

```
$comm = passthru("dir");
echo $comm; 
```

工作正常。

我正在运行 Windows 7。

PS我也试过`system()`了`shell_exec()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:13:53.097

`\`需要转义为`\\`，否则您应该使用单引号。

任何一个：

```
passthru("C:\\abc\\prog.exe ".$val); 
```

或者：

```
passthru('C:\abc\prog.exe '.$val); 
```

# jquery - jQuery代码来改变滚动元素的位置

> ID：11003234
> 
> 赞同：6
> 
> 时间：2012-06-12T19:10:49.793
> 
> 标签：jquery, css, position

我有一个包含分享和社交图标的栏。该栏现在位于帖子标题下方，如下所示：

```
<div class="post" id="post-<?php the_ID(); ?>">

            <div class="title">
                <h1><?php the_title(); ?></h1>
            </div>

            <div class="sharelinks">
                <ul>
                    <li><a href="https://twitter.com/share" class="twitter-share-button" data-url="<?php the_permalink(); ?>" data-text="<?php the_title(); ?>" data-count="horizontal">Tweet</a></li>
                    <li><div class="fb-like" data-href="<?php the_permalink(); ?>" data-send="false" data-layout="button_count" data-show-faces="false" data-font="arial"></div></li>
                    <li><g:plusone size="medium" href="<?php the_permalink(); ?>/"></g:plusone></li>
                    <li><a href="http://pinterest.com/pin/create/button/?url=<?php echo urlencode(get_permalink($post->ID)); ?>&media=<?php echo urlencode(sofa_image_src('full')); ?>&description=<?php echo urlencode(get_the_title($post->ID)); ?>" class="pin-it-button" count-layout="horizontal">Pin It</a></li>
                    <li><su:badge layout="1"></su:badge></li>
                </ul>
            </div>
</div> 
```

那是我的html。我的“sharelinks”css是：

```
.sharelinks {
    padding: 10px 20px;
    background: #f1f1f1;
    box-shadow: 0 1px #fff inset, 0 -1px #fff inset;
    border-bottom: 1px solid #ddd;
    position: relative;
} 
```

**我想达到什么目的？** - 我想在用户滚动超出其范围时更改 sharelinks div 的位置，并将其始终放在页面顶部（固定位置），然后在用户滚动回其位置时使其返回到默认位置。这个想法是如何使栏出现在其位置，只要用户在滚动时不滚动“超出”它，它就会固定在页面顶部。

我有一个类似的代码，它非常适用于 HEADER，但相同的代码不适用于这个元素，我认为是因为我的标题位于页面的最顶部。

我真的需要任何帮助或想法来实现我所追求的效果。

```
// fixed navigation
var yOffset = $("#header").offset().top;
$(window).scroll(function() {
    if ($(window).scrollTop() > yOffset) {
        $("#header").css({
            'top': 0,
            'position': 'fixed'
        });
    } else {
        $("#header").css({
            'top': yOffset + 'px',
            'position': 'absolute'
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T19:38:18.440

这是固定的解决方案。:)

它从获取滚动位置开始，然后在滚动传递特定值（顶部到元素开始之间的距离）时将元素的 CSS 更改为固定，否则恢复元素的默认 css。

```
var sOffset = $(".sharelinks").offset().top;
var shareheight = $(".sharelinks").height() + 43;
$(window).scroll(function() {
    var scrollYpos = $(document).scrollTop();
    if (scrollYpos > sOffset - shareheight) {
        $(".sharelinks").css({
            'top': '61px',
            'position': 'fixed'
        });
    } else {
        $(".sharelinks").css({
            'top': 'auto',
            'position': 'relative'
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T10:16:25.983

用来`position:sticky`制作。

这是解释的文章。

[http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit](http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit)

和做这个[演示的旧方法](http://jsbin.com/omanut/2)

带有[粘性位置演示](http://html5-demos.appspot.com/static/css/sticky.html)

# api - 用于 API 的 Kohana Route - 子目录、ID、格式

> ID：11003239
> 
> 赞同：0
> 
> 时间：2012-06-12T19:11:10.323
> 
> 标签：api, directory, routes, format, kohana-3.2

我正在尝试在 Kohana 3.2 中创建一个匹配 URI 的路由，例如

```
api/article/get.json

api/article/get/123.xml

api/blogpost/post.json

api/user/get/username.json 
```

所以我的想法是我有一个名为 API 的子目录，其中有我所有的 api 控制器，路由匹配控制器、方法、格式，或者和 id。

我在我的`application/bootstrap.php`

```
Route::set('api', 'api/<controller>(/<action>(/<id>).<format>)',
  array(
    'format' => '(xhtml|xml|json|rss|html|php|serialize)',
  ))
  ->defaults(array(
    'directory' => 'api',
    'controller' => 'blogposts',
    'action' => 'get',
    'format' => 'json',
  )); 
```

我玩过这条路线的多种组合，但每次我收到以下错误消息，例如：`localhost/api/blogposts/post.json`

```
HTTP_Exception_404 [ 404 ]: The requested URL api/blogposts/post.php was not found on this server. 
```

在我看来，这应该没问题，但我一定做错了什么。

帮助表示赞赏。

梦间

**编辑**

我的默认控制器设置为最后一个，只是想我会提到它，因为我在 SO [Kohana 3 route not matching中发现这篇文章](https://stackoverflow.com/questions/9711091/kohana-3-route-not-matching)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:17:13.087

这可能是一个新手错误，但问题不是路线，而是这里的类名是原因：

我把我的控制器放在

```
application/classes/controller/api/bloposts.php 
```

班级的名字是

```
class Controller_Blogposts extends Controller {
  ...
} 
```

在花了一些时间调试应用程序后，我发现问题不在于路由，而在于应该是类的名称

```
class Controller_Api_Blogposts extends Controller {
  ...
} 
```

因为自动加载器会将路由映射`api/blogposts.json`到“ **Controller_Api_Blogposts** ”类。

在 Kohana 3.2 [Conventions and Coding Style](http://kohanaframework.org/3.2/guide/kohana/conventions)中，他们有一个很好的表格，显示类名是什么以及文件路径应该是什么：

![Kohana 3.2 中的类名和对应的文件路径](../Images/7f7ed87cb72dc00a4157250fb27ab966.png)

我不确定 100% 使用目录进行路由映射背后的技术细节，但如果路由映射到 a `<directory>`（在本例中为**api**），则可以安全地假设**api**位于“ *application/classes/controller* ”目录中。

# perl - 当我用花括号括起来 perl 哈希时会发生什么？

> ID：11003241
> 
> 赞同：1
> 
> 时间：2012-06-12T19:11:14.957
> 
> 标签：perl, perl-data-structures

我正在努力了解这个 perl 模块是如何工作的，它被称为 XML::Smart。除了与模块不太相关的一件事外，大部分内容都很容易弄清楚。

我想要做的是将我的脚本中的哈希复制到 XML::Smart 模块中进行处理。在对它进行了一点“禁止”之后，我设法让它做我想做的事。问题是我不知道我到底做了什么。如果有人可以提供一个线索，说明为什么这会起作用，这在英语中意味着什么，那就太好了。

当我在滚动我自己的模块时，我看到了类似的东西，这意味着它与创建一个类有关，不确定它是否被称为或者它有类似的东西。

这是我的代码；

```
#!/usr/bin/perl
use strict;
use warnings;
use XML::Smart;

my $xml_obj = XML::Smart->new();

my %config_file = (
    "server01" => {
        "connection" => {
            "address" => "10.0.0.4",
            "port" => "22",
        }, "authentication" => {
            "username" => "admin",
            "password" => "password",
        },
    },
);

$xml_obj->{config} = {%config_file}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:15:31.940

它使用旧哈希的（浅）副本创建对新哈希的引用。

`{}`是一个哈希引用。

`{ "foo", "bar", "x", "y" }`定义一个带有键和值列表的 hashref。

如果你在里面放一个散列，`{}`它是在列表上下文中，所以会变成一个键和值的列表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T19:18:57.137

如果您尝试将 %config_file 分配给 $xml_obj->{config} 您将需要执行类似哈希切片的操作。

@{ $xml_obj->{config} }{ 键 %config_file } = 值 %config_file;

# sql - SQL 递归结果查找类别层次结构中的所有产品

> ID：11003245
> 
> 赞同：0
> 
> 时间：2012-06-12T19:11:32.193
> 
> 标签：sql, recursion

我想根据层次结构中的任何类别从 Product 表中返回所有产品。

例如，您可以按所有“福特”（类别 = 1）搜索产品，它会返回两个结果。

现在，只有当产品表中存在与 CategoryHierarchy 表完全匹配的情况下，此递归结果才会返回产品。因此，如果我说类别 = 4，它会起作用。

在产品表中，我有两辆福特野马。只有价格和描述不同（此处未显示），但它们的分类在产品类别方面是相同的。

```
[Product Table]
[ProductId] [ProductName] [CategoryId]
1       Ford Mustang 1     4
2       Ford Mustang 2     4
3       Buick Regal 3      12 
```

每辆福特野马都有 1,2,3,4 的 CategoryHierarchy。如果 Sql 参数 minimumcategory 为 1 OR 2 OR 3 OR 4，则应该显示相同的两个结果。现在，它仅在它 = 4 时才有效。

```
[CategoryHierarchy]
[Id]    [parentId]  [categoryName]
1       0           Ford
2       1           Mustang
3       2           2010
4       3           Blue
10      0           Buick
11      10          Regal
12      11          1999 
```

微软 SQL 2008：

```
declare @lowestcategoryid int;

set @lowestcategoryid = 4;--returns the products but I need it to work if this var = 1,2,3 too

--recursive loop
with RecursiveResult( id, CategoryName, ProductName, parentId) as
(
select ch.Id, ch.categoryname, p.productname, ch.parentId
from CategoryHierarchy ch 
join product p on p.categoryId = ch.id
where ch.id = @lowestcategoryid

UNION ALL

select p.categoryId, ch.categoryName, p.productname, ch.parentId
from product p
join CategoryHierarchy ch on p.categoryId = ch.id
join RecursiveResult r on ch.parentId = r.Id 

)

select * from recursiveresult 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:24:14.297

我认为您想将递归部分（遍历 CategoryHierarchy 表）与 Product 的连接分开。从最低（或“最高”）类别开始并深入，最后加入 Product 上的那个集合......就像这样：

```
DECLARE @lowestcategoryid INT;

SET @lowestcategoryid = 3;

--recursive loop
WITH RecursiveResult( id, CategoryName, parentId) AS
(
SELECT ch.Id, ch.categoryname, ch.parentId
FROM CategoryHierarchy ch 
WHERE ch.id = @lowestcategoryid

UNION ALL

SELECT ch.Id, ch.categoryname, ch.parentId
FROM CategoryHierarchy ch 
    JOIN RecursiveResult r 
        ON r.Id = ch.ParentId

)

SELECT * 
FROM recursiveresult r
    JOIN Product p
        ON p.CategoryId = r.Id 
```

# c++ - 纯 C/C++ 中的二进制序列化

> ID：11003246
> 
> 赞同：6
> 
> 时间：2012-06-12T19:11:33.337
> 
> 标签：c++, c, serialization, binary, implementation

我想自己实现二进制序列化，不使用`Boost`或任何其他第三方库。

在 C++ 中，实现它的最简单方法是使用`ofstream`然后通过网络发送二进制文件。但是是否有任何其他流类可以用作临时缓冲区以避免将文件写入磁盘？

另外，我怎样才能在纯 C 中实现这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T19:35:55.723

坚持是个难题。甚至将对象序列化到磁盘也并非易事。假设，例如，您在 C 中有这样的结构：

```
struct Person {
    char name[100];
    int year;
}; 
```

这是一个包含 sef 的结构，可能是真正应用序列化的最简单方法。但是，您将不得不面对以下问题：

1.  编译器的填充系统。在内存中完成一个结构以使其占用内存中的整数个字的方法是不标准的。

2.  操作系统和机器本身以二进制形式表示数据的方式。显然，这种表示从一台机器变为另一台机器。

结论是，即使是由同一操作系统中的同一程序创建的文件也可能与同一操作系统中的同一程序不兼容，因为可能两个程序是用不同的 C 编译器编译的。

现在让我们看看 C++ 中的一个对象：

```
class Person {
public:
    // more things...

private:
    string name;
    Date * birth;
    Firm * firm;
}; 
```

现在同样的事情变得非常复杂。对象不再是自包含的，你应该按照指针来决定如何处理每个对象（这被称为 3\. 指针混合和传递持久性）。你仍然有 1) 和 2) 的问题。

因此，假设您专注于自包含对象，并且仍然需要针对第 1 点和第 2 点的解决方案。唯一的方法是确定 a) 文本格式或 b) 字节码格式的表示。字节码格式可以被任何操作系统中的任何程序理解，用任何 C 编译器编译，因为信息是逐字节读取和写入的。这是 Java 或 C# 序列化其对象的方式。作为表示的文本格式与字节码一样有效，但速度较慢。它的主要优点是它可以被人和计算机理解（结构化文本格式可以是 XML）。

因此，为了序列化您的自包含对象，无论选择何种输出格式，您都需要具有能够读取整数、字符、字符串等的基本函数（或 C++ 中的类）。当您拥有每个对象的写/读对时，您必须为程序员提供为她的对象创建她自己的写/读对的可能性，使用您对元素数据的读/写对。

我们在这里谈论的是一个完整的框架，就像 Python 提供的**pickle**模块一样。

最后，能够缓存您的序列化而不是将其保存到磁盘这一事实是您的问题中最少的。如果您使用的是基于文本的格式，则可以使用`ostringstream`该类；如果您使用的是字节码，则可以使用内存块。

如您所见，这不是一项简单的工作。希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T19:48:03.510

我一直在使用 JSON 来序列化数据。这很简单，这是一件非常好的事情。很容易让 JSON 正确，并且很容易判断它是否有任何问题。

它不像其他格式那样节省空间，但对于许多用途来说已经足够了。您可以从 JSON 网站获得免费的库代码。

[http://json.org/](http://json.org/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-08T05:29:07.317

在纯 C 中，您可以使用[Binn](https://github.com/liteserver/binn)格式。

示例代码：

```
 binn *obj;

  // create a new object
  obj = binn_object();

  // add values to it
  binn_object_set_int32(obj, "id", 123);
  binn_object_set_str(obj, "name", "John");
  binn_object_set_double(obj, "total", 2.55);

  // send over the network or save to a file...
  send(sock, binn_ptr(obj), binn_size(obj));

  // release the buffer
  binn_free(obj); 
```

免责声明：我是创造者

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-07-04T13:00:29.023

在某些情况下，在处理简单类型时，您可以这样做：

```
object o; 
socket.write(&o, sizeof(o)); 
```

# ruby-on-rails - Rails 随机数总是相同的

> ID：11003248
> 
> 赞同：0
> 
> 时间：2012-06-12T19:11:50.323
> 
> 标签：ruby-on-rails

我有一个随机数的问题。我有一个 Account 表，我需要在每个表中分配一个随机帐户，但是当我保存所有数据时，我注意到所有记录都具有相同的随机数 (1)。

我只有 2 个帐户。我测试了 10.times do... 它似乎工作正常，但我不确定为什么这不起作用，有什么想法吗？

```
 data = []
  accounts = Account.all
  searches.each do 
      data << SearchesResult.new({
          :account_id => accounts[rand(accounts.count)]
      })
  end
  SearchesResult.import data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:18:12.967

看起来您正在获取一个 Account 对象并将其作为 :account_id 传递。你可能想要

```
 data << SearchesResult.new({
      :account_id => accounts[rand(accounts.count)].id
  }) 
```

或者，正如 mckeed 所说，

```
 data << SearchesResult.new({
      :account => accounts[rand(accounts.count)]
  }) 
```

# security - 禁用表单安全 CakePHP

> ID：11003249
> 
> 赞同：6
> 
> 时间：2012-06-12T19:11:51.477
> 
> 标签：security, cakephp, cakephp-2.1

是否可以在视图中仅针对 1 个特定表单关闭所有 CakePHP 安全功能？所以我没有以这种形式获得任何隐藏字段（令牌）。

谢谢，

巴特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:01:05.127

您可以通过以下方式禁用该操作：

```
public function beforeFilter() {
    parent::beforeFilter();
    if ($this->request->params['action'] == 'action') { 
        $this->Security->validatePost = false; 
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:17:20.290

为了从表单中删除烦人的隐藏输入`_Token.key`（`fields`例如，在使用方法时澄清查询字符串），除了来自[*tigrang*](https://stackoverflow.com/a/11004812/301663)[的答案](https://stackoverflow.com/a/11004812/301663)`GET`之外，您还需要执行以下操作：`beforeRender``beforeFilter`[](https://stackoverflow.com/a/11004812/301663)

 *```
function beforeRender() {
    parent::beforeRender();
    unset($this->params["_Token"]);
} 
```

（这至少对于 CakePHP 1.3 是实际的）*

# asp.net - 在gridview中的多个单元格周围放置边框

> ID：11003252
> 
> 赞同：0
> 
> 时间：2012-06-12T19:12:04.023
> 
> 标签：asp.net, css, gridview

所以我有一个 Gridview，我想只修改某些单元格的外观，并且我想将这些单元格视为一个单元格（如果可能的话）。

所以首先我要更改 RowDataBound 上的一些单元格背景颜色：

```
if (e.Row.RowIndex > 1 && e.Row.RowIndex < 7)
{
    e.Row.Cells[1].BackColor = Color.Red;
    e.Row.Cells[2].BackColor = Color.Red;
    e.Row.Cells[3].BackColor = Color.Red;
    e.Row.Cells[4].BackColor = Color.Red;
    e.Row.Cells[5].BackColor = Color.Red;
} 
```

这会将 5x5 的单元格区域更改为红色。现在我接下来想做的是在 5x5 区域的外部设置一个边框。我找到了单元格的边框样式和边框颜色，但是有没有办法只为单元格的一侧打开边框，以便创建边框？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:15:22.753

我建议您改用类，不要像这样对其进行硬编码。它会更容易维护等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:13:29.730

我只是想我会把它作为一个解决方案发布，以防其他人想要这样做。

这是我的 CSS

```
<style type="text/css">
.LeftUpperCorner
{
    border-left:5px solid black;
border-top:5px solid black;
}

.Top
 {
border-top:5px solid black;
 }

 .RightUpperCorner
 {
border-right:5px solid black;
border-top:5px solid black;
}

.Left
{
border-left:5px solid black;
}

.Right
{
border-right:5px solid black;
}

.LeftLowerCorner
{
border-left:5px solid black;
border-bottom:5px solid black;
}

.Bottom
{
border-bottom:5px solid black;
}

.RightLowerCorner
{
border-right:5px solid black;
border-bottom:5px solid black;
} 
```

和我背后的代码：

```
 if (e.Row.RowIndex == 2)
        {
            e.Row.Cells[1].CssClass = "LeftUpperCorner";
            e.Row.Cells[2].CssClass = "Top";
            e.Row.Cells[3].CssClass = "Top";
            e.Row.Cells[4].CssClass = "Top";
            e.Row.Cells[5].CssClass = "RightUpperCorner";
        }

        if (e.Row.RowIndex == 3 || e.Row.RowIndex == 4 || e.Row.RowIndex == 5)
        {
            e.Row.Cells[1].CssClass = "Left";
            e.Row.Cells[5].CssClass = "Right";
        }

        if (e.Row.RowIndex == 6)
        {
            e.Row.Cells[1].CssClass = "LeftLowerCorner";
            e.Row.Cells[2].CssClass = "Bottom";
            e.Row.Cells[3].CssClass = "Bottom";
            e.Row.Cells[4].CssClass = "Bottom";
            e.Row.Cells[5].CssClass = "RightLowerCorner";
        } 
```

它可能不是最漂亮的，但这并没有真正需要改变，并且总是在同一个位置，所以它符合我的简单需求。

# iphone - LandscapeImagePhone 的正确尺寸？

> ID：11003256
> 
> 赞同：1
> 
> 时间：2012-06-12T19:12:13.557
> 
> 标签：iphone, ios5, uikit, uibarbuttonitem

图像的正确尺寸是`UIBarButtonItem`多少`landscapeImagePhone`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T17:19:48.373

这在“iOS 人机界面指南”中没有记录：

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)

这是我的选择：将正常人像图像的大小调整为 (17, 17)，并将其用作 LandscapeImagePhone 图像。您可以将 (17, 17) 大小调整为您想要的任何大小，直到它看起来不错，但它不应大于标准纵向 barButton 图像大小 (20, 20)。

```
// resize the image for landscape
UIImage *settingsImage = [UIImage imageNamed:@"settings"];
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithImage:settingsImage
                                                           landscapeImagePhone:[settingsImage resizedImage:CGSizeMake(17.f, 17.f) interpolationQuality:kCGInterpolationHigh]
                                                                         style:UIBarButtonItemStyleBordered target:self action:@selector(settingsButtonClicked:)]; 
```

注意：对于 UIImage 的 resizedImage 方法，你可以在 GitHub 上找到很多 UIImage 目录，我使用这个 git：[https](https://github.com/mbcharbonneau/UIImage-Categories) ://github.com/mbcharbonneau/UIImage-Categories 你可以删除 UIImage+Alpha 和 UIImage+Resize，因为我们不需要它们

# ember.js - 布局更改后的 ember.js “onReady”

> ID：11003257
> 
> 赞同：0
> 
> 时间：2012-06-12T19:12:16.110
> 
> 标签：ember.js

在布局完成更改并且所有新元素都在 DOM 中之后，有没有办法在 Ember.JS 中捕获 onReady 样式的事件？我有一个日期选择器，我想在需要您调用的 ember.js 应用程序中使用它

```
$('.datepicker').datepicker();

```

一旦所有想要使用日期选择器的元素都出现在屏幕上。

在我的应用程序中，我在初始渲染后动态创建输入文本元素，因此我不能只在初始时调用它 onReady 对新元素执行此操作。

有没有办法用 Ember.js 挂钩这种事件并在那时调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:17:26.480

您需要覆盖 Ember.View ala 中的 didInsertElement 事件

```
didInsertElement：函数（）{
    $('.datepicker').datepicker();
},

```

# ios - 有没有办法以编程方式缩放 MKMapView 而不会捕捉到其预定义的缩放级别之一？

> ID：11003259
> 
> 赞同：0
> 
> 时间：2012-06-12T19:12:21.197
> 
> 标签：ios, mkmapview, zooming, mapkit

我正在使用 setRegion 让 MKMapView 放大到我提供的区域。问题是这个粒度非常小，它只是选择最接近的缩放级别并缩放到那个。

有没有办法让它精确地缩放到我提供的区域，还是我需要接受这个限制并继续前进？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:40:56.893

不，目前它会缩放以使地图图块不模糊，这意味着固定的缩放级别。即将到来的更新似乎会即时渲染，因此您将来可能会这样做，但现在您必须接受您获得的区域。

# linux - 如何修复 bash 脚本中文件的意外结尾？

> ID：11003266
> 
> 赞同：2
> 
> 时间：2012-06-12T19:12:50.950
> 
> 标签：linux, bash, shell

上次提交问题时我很幸运，所以这里是：当我收到以下错误时，我正在尝试调试一个有点大的 BASH 脚本：

```
./test.sh: line 418: unexpected EOF while looking for matching `"'
./test.sh: line 427: syntax error: unexpected end of file 
```

下面的代码从第 400 行开始：

```
 echo "###########################################################"
    echo
;;
4)
    culebra_carriers
    get_month
    get_day
    logs_cdrs
    logs_wap
    get_mdn

    echo
    echo "###########################################################"
    echo
    echo "Searching for activity of $mobileNumber on $MON $DAY......."
    echo
    zgrep $mobileNumber $HOME/culebrapeak/$LOGCDR/$CULEB/$MON/$WAPLOG
    echo
    echo "###########################################################"
    echo
;;
esac
done
}

clear
main_menu 
```

如何让这个错误消失？看起来我在所有正确的地方都有双引号......但这只是我的第 4 个或第 5 个 bash 脚本......所以请放轻松。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-14T22:35:54.250

A good way to solve problems like this is to use a text editor that highlights code between quotes. Short of that, if the "find" feature of your text editor gives a count too, you may be able to use it to quantitatively detect start/end character symmetry problems. The highlighting from the find feature will aide your eye tremedously.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T22:15:42.953

确实，我在脚本顶部缺少双引号。感谢大家的帮助！

# html - 具有动态高度和 100% 宽度的垂直居中 div

> ID：11003271
> 
> 赞同：0
> 
> 时间：2012-06-12T19:13:06.407
> 
> 标签：html, css

> **可能重复：**
> [如何在动态高 div 中垂直居中文本？](https://stackoverflow.com/questions/10939288/how-can-i-vertically-center-text-in-a-dynamically-high-div)

如何在浏览器窗口中以动态高度和 100% 宽度垂直居中 div？

```
<div class="login-signup-page">
<div class="login-signup"></div>
</div> 
```

其中 login-signup 具有 100% 的宽度和动态高度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:15:58.883

简短的回答：你不能。

长答案：如果你知道高度，你可以使用固定定位，a`top:50%`和 a`margin-top`等于负的一半高度。除此之外，您可以使用一些基本的 JS 来计算`margin-top`应该基于`offsetHeight`. 如果您在另一个元素而不是窗口中垂直居中，则可以执行相同操作，但使用绝对位置，前提是容器不是静态定位的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:50:27.933

请参阅[jsFiddle 示例](http://jsfiddle.net/HuDFD/5/)或直接查看以下代码：

## HTML

```
<div class="login-signup-page">
<div class="login-signup"></div>
</div> 
```

## CSS

```
.login-signup-page {

 /* Position at top of page */
 position:fixed;
 top:0;

 /* Position halfway down page (in supporting browsers) */
 -moz-transform:translate(0, 50%);
 -webkit-transform:translate(0, 50%);
 -ms-transform:translate(0, 50%);
 -o-transform:translate(0, 50%);
 transform:translate(0, 50%);

 /* Prevent hidden content */
 height:100%;
 width:100%;

}

.login-signup {

 /* Prevent hidden content */
 max-height:100%;
 max-width:100%;
 overflow:auto;

 /* Position in center of page (in supporting browsers) */
 -moz-transform:translate(0, -50%);
 -webkit-transform:translate(0, -50%);
 -ms-transform:translate(0, -50%);
 -o-transform:translate(0, -50%);
 transform:translate(0, -50%);

} 
```

***注意：**在不支持`translate()`的浏览器中，内容会出现在页面顶部（不是被截掉，`top:50%;`而是被使用了）。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:22:16.257

Kolink确实是正确的，但它不需要太多的工作。只需要一些聪明的 CSS 和 JavaScript（我在下面的示例中使用 jQuery）来使其工作。

```
<div class="login-signup-page">
<div class="login-signup">Sample Text</div>
</div>​

.login-signup-page {
    position:absolute;
    left:0;
    top:0;
    height:100%;
    width:100%;
    background:grey;
}

.login-signup {
    width:100%;
    background:white;
    position:absolute;
    top:50%;
}
​

$(document).ready(function() {
   $('.login-signup').css('margin-top', -$('.login-signup').outerHeight() + 'px'); 
});​ 
```

[演示](http://jsfiddle.net/kDYDf/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-12T19:24:02.170

您需要 Javascript 或 jQuery 来获取元素和浏览器窗口的高度，然后根据这些数字进行计算。像这样的东西：

```
$(document).ready(function() {
    var signupHeight = $('.login-signup').height(); // height of your dynamic element
    var winHeight = $(window).height(); // height of the browser window
    $('.login-signup').css('margin-top',(winHeight - signupHeight) / 2); // subtract one height from the other, then divide by 2 so the top and bottom margins are equal
}); 
```

# javascript - Rails - JavaScript 定时刷新仅用于一个视图

> ID：11003272
> 
> 赞同：0
> 
> 时间：2012-06-12T19:13:08.777
> 
> 标签：javascript, ruby-on-rails

我有一个 Rails 应用程序，我希望每五秒钟只刷新一个视图。我将以下内容放入 assets/javascripts/application.js

```
function timedRefresh(timeoutPeriod) {
    setTimeout("location.reload(true);",timeoutPeriod);
}

$(document).ready(function(){
  timedRefresh(5000);
}); 
```

但是，这将导致每个视图每五秒刷新一次。我怎样才能让这个 JavaScript 只适用于一个视图？

（使用 Rails 3.2.5）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:00:08.983

如果您想将 JS 保留在 application.js 中，您可以简单地检查特定元素的存在并采取相应措施。例如：

**some_vew.html.erb**

```
<div id = "refreshable">
    <!-- So on and so forth... -->
</div> 
```

**应用程序.js**

```
$(function() {

    // function timeRefresh()...

    if ($('#refreshable').length) {
        timedRefresh(5000);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:54:54.210

您可以使用视图底部的标签。

**some_view.html.erb**

```
...
contents
...
<script type="text/javascript">
  Put javascript code here...
</script> 
```

这将使该脚本仅可用于 someview.html.erb。application.js 使脚本全局化。

# android - 在 Android 2.0 中查找 UUID

> ID：11003280
> 
> 赞同：1
> 
> 时间：2012-06-12T19:13:36.903
> 
> 标签：android, bluetooth, uuid

我正在编写一个需要在 Android 2.0 中运行的程序。我目前正在尝试将我的 android 设备连接到嵌入式蓝牙芯片。我已获得有关使用 fetchuidsWithSDP() 或 getUuids() 的信息，但我阅读的页面解释说这些方法隐藏在 2.0 SDK 中，必须使用反射调用。我不知道那是什么意思，也没有解释。给出了示例代码，但背后的解释很少。我希望有人可以帮助我了解这里实际发生了什么，因为我对 Android 开发非常陌生。

```
String action = "android.bleutooth.device.action.UUID";
IntentFilter filter = new IntentFilter( action );
registerReceiver( mReceiver, filter ); 
```

我阅读的页面还说，在第一行中，蓝牙故意拼写为“蓝牙”。如果有人能解释这一点，我将不胜感激，除非开发人员打错了字，否则这对我来说毫无意义。

```
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
@Override
public void onReceive( Context context, Intent intent ) {
    BluetoothDevice deviceExtra = intent.getParcelableExtra("android.bluetooth.device.extra.Device");
    Parcelable[] uuidExtra = intent.getParcelableArrayExtra("android.bluetooth.device.extra.UUID");
} 
```

};

我无法准确掌握如何为我的嵌入式蓝牙芯片找到正确的 UUID。如果有人可以提供帮助，将不胜感激。

编辑：我将添加我的 onCreate() 方法的其余部分，这样你就可以看到我正在使用什么。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set up window View
    setContentView(R.layout.main);

    // Initialize the button to scan for other devices.
    btnScanDevice = (Button) findViewById( R.id.scandevice );

    // Initialize the TextView which displays the current state of the bluetooth
    stateBluetooth = (TextView) findViewById( R.id.bluetoothstate );
    startBluetooth();

    // Initialize the ListView of the nearby bluetooth devices which are found.
    listDevicesFound = (ListView) findViewById( R.id.devicesfound );
    btArrayAdapter = new ArrayAdapter<String>( AndroidBluetooth.this,
            android.R.layout.simple_list_item_1 );
    listDevicesFound.setAdapter( btArrayAdapter );

    CheckBlueToothState();

    // Add an OnClickListener to the scan button.
    btnScanDevice.setOnClickListener( btnScanDeviceOnClickListener );

    // Register an ActionFound Receiver to the bluetooth device for ACTION_FOUND
    registerReceiver( ActionFoundReceiver, new IntentFilter( BluetoothDevice.ACTION_FOUND ) );

    // Add an item click listener to the ListView
    listDevicesFound.setOnItemClickListener( new OnItemClickListener()
    {
      public void onItemClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) 
      {
          // Save the device the user chose.
          myBtDevice = btDevicesFound.get( arg2 );

          // Open a socket to connect to the device chosen.
          try {
              btSocket = myBtDevice.createRfcommSocketToServiceRecord( MY_UUID );
          } catch ( IOException e ) {
              Log.e( "Bluetooth Socket", "Bluetooth not available, or insufficient permissions" );
          } catch ( NullPointerException e ) {
              Log.e( "Bluetooth Socket", "Null Pointer One" );
          }

          // Cancel the discovery process to save battery.
          myBtAdapter.cancelDiscovery();

          // Update the current state of the Bluetooth.
          CheckBlueToothState();

          // Attempt to connect the socket to the bluetooth device.
          try {
              btSocket.connect();                 
              // Open I/O streams so the device can send/receive data.
              iStream = btSocket.getInputStream();
              oStream = btSocket.getOutputStream();
          } catch ( IOException e ) {
              Log.e( "Bluetooth Socket", "IO Exception" );
          } catch ( NullPointerException e ) {
              Log.e( "Bluetooth Socket", "Null Pointer Two" );
          }
      } 
  });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T15:01:21.487

您可能最好使用同步版本，这样您就不必处理设置`BroadcastReceiver`. 由于您总是在发现之后执行此操作，因此缓存的数据将始终是最新的。

这里是将 UUID 数据封装到方法中的功能。此代码在您链接的博客文章的评论之一中：

```
//In SDK15 (4.0.3) this method is now public as
//Bluetooth.fetchUuisWithSdp() and BluetoothDevice.getUuids()
public ParcelUuid[] servicesFromDevice(BluetoothDevice device) {
    try {
        Class cl = Class.forName("android.bluetooth.BluetoothDevice");
        Class[] par = {};
        Method method = cl.getMethod("getUuids", par);
        Object[] args = {};
        ParcelUuid[] retval = (ParcelUuid[]) method.invoke(device, args);
        return retval;
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
} 
```

然后，您可以在代码中的任何位置调用此方法，将其传递 a`BluetoothDevice`并获取该设备服务的 UUID 数组（通常对于小型嵌入式堆栈，该数组只有一项）；就像是：

```
 // Save the device the user chose.
  myBtDevice = btDevicesFound.get( arg2 );
  //Query the device's services
  ParcelUuid[] uuids = servicesFromDevice(myBtDevice);

  // Open a socket to connect to the device chosen.
  try {
      btSocket = myBtDevice.createRfcommSocketToServiceRecord(uuids[0].getUuid());
  } catch ( IOException e ) {
      Log.e( "Bluetooth Socket", "Bluetooth not available, or insufficient permissions" );
  } catch ( NullPointerException e ) {
      Log.e( "Bluetooth Socket", "Null Pointer One" );
  } 
```

在您在上面发布的块中。

作为旁注，以您的方式调用所有这些代码将使您的应用程序在以后变得难过。调用`connect()`和获取流的代码块应该在后台线程上完成，因为该方法会阻塞一段时间，并且在主线程上调用此代码会暂时冻结您的 UI。您应该将该代码移动到SDK 中`AsyncTask`的`Thread`BluetoothChat 示例中。

高温高压

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-23T08:07:49.930

我也遇到了同样的问题，这就是我为 Android 2.3.3 解决的方法。我认为同样的解决方案也适用于 android 2.2。

```
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @SuppressLint("NewApi")
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        // When discovery finds a device
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            // Get the BluetoothDevice object from the Intent
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            Toast.makeText(getApplicationContext(),"Device: "+device.getName(),Toast.LENGTH_SHORT).show();
            devices.add(device.getName() + "\n" + device.getAddress());
            list.add(device);

        }
        else if(BluetoothDevice.ACTION_UUID.equals(action)){
            Toast.makeText(getApplicationContext(),"I am Here",Toast.LENGTH_SHORT).show();
        }
        else {
            if(BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
                Toast.makeText(getApplicationContext(),"Done Scanning..",Toast.LENGTH_SHORT).show();
                Iterator<BluetoothDevice> itr = list.iterator();
                while(itr.hasNext())
                {
                    BluetoothDevice dev=itr.next();
                    if(dev.fetchUuidsWithSdp())
                    {
                        Parcelable a[]=dev.getUuids();
                        Toast.makeText(getApplicationContext(),dev.getName()+":"+a[0],Toast.LENGTH_SHORT).show();
                    }
                }
            }
        }       
    }
}; 
```

# php - 如何编译 swig php c++ dll

> ID：11003281
> 
> 赞同：0
> 
> 时间：2012-06-12T19:13:45.093
> 
> 标签：php, c++, windows, visual-c++, swig

我正在尝试从 swig 的输出中编译一个 c++ dll 我收到一堆关于实际 php src 的错误，也许我做错了，但我什至在 windows 上使用 configure 然后 nmake 构建了 php。我曾尝试同时使用 php 5.4 和 5.3，这是我使用 Visual Studio 2008 的错误：

```
Error   3   error C2491: 'std::endl' : definition of dllimport function not allowed c:\program files (x86)\microsoft visual studio 9.0\vc\include\ostream   967 LTMC_Wrapped
Error   4   error C2491: 'std::endl' : definition of dllimport function not allowed c:\program files (x86)\microsoft visual studio 9.0\vc\include\ostream   976 LTMC_Wrapped
Error   5   error C2491: 'std::ends' : definition of dllimport function not allowed c:\program files (x86)\microsoft visual studio 9.0\vc\include\ostream   985 LTMC_Wrapped
Error   6   error C2491: 'std::ends' : definition of dllimport function not allowed c:\program files (x86)\microsoft visual studio 9.0\vc\include\ostream   993 LTMC_Wrapped
Error   7   error C2491: 'std::flush' : definition of dllimport function not allowed    c:\program files (x86)\microsoft visual studio 9.0\vc\include\ostream   1001    LTMC_Wrapped
Error   8   error C2491: 'std::flush' : definition of dllimport function not allowed    c:\program files (x86)\microsoft visual studio 9.0\vc\include\ostream   1009    LTMC_Wrapped
Error   9   error C2491: 'std::ws' : definition of dllimport function not allowed   c:\program files (x86)\microsoft visual studio 9.0\vc\include\istream   1068    LTMC_Wrapped
Error   10  error C2491: 'std::ws' : definition of dllimport function not allowed   c:\program files (x86)\microsoft visual studio 9.0\vc\include\istream   1103    LTMC_Wrapped 
```

我也尝试过 VS2005 和 VS2008。如果有任何关于如何在 Visual Studio 中使用 php 源的教程也会非常有帮助。非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:25:20.137

只需将项目运行时库从 Multi-thread DLL 更改为 Multi-thread

# apache - 基于查询字符串的apache htaccess身份验证

> ID：11003285
> 
> 赞同：2
> 
> 时间：2012-06-12T19:14:00.150
> 
> 标签：apache, .htaccess, query-string

我正在使用在 .htaccess 中已经具有这些重写条件和规则的原版论坛：

```
 RewriteCond %{REQUEST_FILENAME} !-d
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteRule ^(.*)$ index.php\?p=$1 [QSA,L] 
```

我现在想要的是添加一些重写规则，仅当我在页面/vanilla/index.php?p=/categories/general 上时要求身份验证（需要有效用户），即只是查询字符串“p= /类别/一般”

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:09:05.753

~~据我所知，不可能根据 URL 的查询字符串添加身份验证。~~

使用`mod_rewrite`，您只能将一个 URL 重写为另一个，而不能指定额外的配置规则。

< [Location>](http://httpd.apache.org/docs/2.2/mod/core.html#location)标记可用于匹配 URL 并要求身份验证，但`Location`不能匹配查询字符串，因此它不适用于您的情况。

您是否有理由需要使用`.htaccess`身份验证？你能轻松地将逻辑构建到 PHP 脚本中吗？

# c - 设置follow-fork模式子后如何在子进程中设置断点？

> ID：11003287
> 
> 赞同：0
> 
> 时间：2012-06-12T19:14:04.367
> 
> 标签：c, linux, debugging, gdb

我想为另一个进程 [Task A] 调用的子进程 [Task B] 设置断点。

我使用 set follow-fork mode child 从父进程切换到子进程。但是，GDB 并没有在子任务中停止，而是运行并返回到任务 B。

有没有办法可以停止子任务并调试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:54:36.440

我发现这个资源过去对这种性质的事情很有用[http://www.delorie.com/gnu/docs/gdb/gdb_26.html](http://www.delorie.com/gnu/docs/gdb/gdb_26.html)

当然，正如对您问题的第一条评论所暗示的那样，请仔细检查断点是否实际上位于子执行路径中。

# c# - HttpWebRequest 的响应不显示 UTF-8 符号

> ID：11003288
> 
> 赞同：2
> 
> 时间：2012-06-12T19:14:05.523
> 
> 标签：c#, utf-8, httpwebrequest, utf8-decode

我有从网站获取响应的简单代码，但有一个小问题。我正在尝试从俄罗斯网站和一个网站获得未知符号的响应，而从另一个网站获得正常文本。哪里可能有问题？

来自：www.kinopoisk.ru 的回复

> ������ �����...

回复来自：www.yandex.ru

> Греция - Чехия。1:2...

```
 HttpWebRequest http = (HttpWebRequest) HttpWebRequest.Create("http://");
    http.Timeout = 30000;
    http.KeepAlive = true;
    http.ContentType = "application/x-www-form-urlencoded";
    http.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0";
    http.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
    http.Proxy = null;

    WebResponse response = http.GetResponse();
    Stream istream = response.GetResponseStream();
    StreamReader reader = new StreamReader(istream);

    Response.Write(reader.ReadToEnd());

    reader.Close(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T19:17:16.527

`kinopoisk.ru`被编码为`WINDOWS-1251` （您可以在`Content-Type`标题中看到这一点）。

您需要传递`Encoding.GetEncoding(1251)`给 StreamReader 以对其进行解码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:26:35.757

这是一个字符集问题。如果要获取请求响应的字符集，HttpWebResponse 类为我们提供了一个名为 CharacterSet 的属性。此属性返回字符串类型值。

```
myWebRequest = (HttpWebRequest)HttpWebRequest.Create(url);
myWebRequest.Method = "GET";
myWebResponse = (HttpWebResponse)myWebRequest.GetResponse();
string str = myWebResponse.CharacterSet; 
```

如果您想知道使用哪种编码方法对响应进行编码，为此我们有一个名为 ContentEncoding 的 HttpWebRequest 类的属性。此属性返回字符串值。

```
myWebRequest = (HttpWebRequest)HttpWebRequest.Create(url);
myWebRequest.Method = "GET";
myWebResponse = (HttpWebResponse)myWebRequest.GetResponse();
string str = myWebResponse.ContentEncoding; 
```

# ruby-on-rails - 带有 bootstrap-sass 的颜色变量

> ID：11003289
> 
> 赞同：5
> 
> 时间：2012-06-12T19:14:13.770
> 
> 标签：ruby-on-rails, twitter-bootstrap, sass

在我最新的 rails 项目中开始使用 sass，特别是 bootstrap-sass gem 来获得所有 twitter bootstrapy 的优点。

是否可以引用已经定义的变量？供应商`/assets/stylesheets/bootstrap/_variables.scss`文件包含颜色声明。

```
$blue: #049cdb !default;
$blueDark: #0064cd !default;
$green: #46a546 !default;
$red: #9d261d !default; 
```

我需要在基本`application.css.scss`文件的顶部重新定义这些，还是可以导入/引用变量文件？我尝试了几种这样的方法：

```
$bodyBackground: $black;
@import 'bootstrap' 
```

但是由于未定义的变量而出错`$black`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T01:24:41.453

首先，定义变量`$black`：

```
$black: #000;
$bodyBackground: $black;
@import "bootstrap"; 
```

或将其更改为：

```
$bodyBackground: #000;
@import "bootstrap"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-04-19T19:49:17.557

从文件中删除以下两行`application.scss`：

```
*= require_self
*= require_tree . 
```

# h2 - org.h2.jdbc.JdbcSQLException：数据库可能已在使用中：“被另一个进程锁定”

> ID：11003290
> 
> 赞同：0
> 
> 时间：2012-06-12T19:14:16.390
> 
> 标签：h2, eclipse-virgo

我正在尝试按照指示设置 Virgo 示例项目绿页（[http://www.eclipse.org/virgo/documentation/greenpages-documentation-2.4.0.RELEASE/docs/html/ch02s03.html](http://www.eclipse.org/virgo/documentation/greenpages-documentation-2.4.0.RELEASE/docs/html/ch02s03.html)）。当我执行数据脚本时，我得到一个异常。

数据库是这样启动的：

```
start java -cp ";C:\Users\flowersj\.m2\repository\com\h2database\h2\1.3.161\h2-1.3.161.jar" 
    org.h2.tools.Server 
```

插入在此行失败的数据的脚本：

```
java -cp ";C:\Users\flowersj\.m2\repository\com\h2database\h2\1.3.161\h2-1.3.161.jar"
    org.h2.tools.RunScript 
    -url jdbc:h2:tcp://localhost/~/greenpages-db/greenpages 
    -user greenpages -password pass -script db.sql 
```

例外是：

```
Exception in thread "main" org.h2.jdbc.JdbcSQLException: Database may be already in use: "Locked by another process". Possible solutions: close all other connection(s); use the server mode [90020-161]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.store.FileLock.getExceptionAlreadyInUse(FileLock.java:435)
    at org.h2.store.FileLock.lockFile(FileLock.java:332)
    at org.h2.store.FileLock.lock(FileLock.java:128)
    at org.h2.engine.Database.open(Database.java:539)
    at org.h2.engine.Database.openDatabase(Database.java:219)
    at org.h2.engine.Database.<init>(Database.java:214)
    at org.h2.engine.Engine.openSession(Engine.java:56)
    at org.h2.engine.Engine.openSession(Engine.java:159)
    at org.h2.engine.Engine.createSessionAndValidate(Engine.java:138)
    at org.h2.engine.Engine.createSession(Engine.java:121)
    at org.h2.server.TcpServerThread.run(TcpServerThread.java:124)
    at java.lang.Thread.run(Unknown Source)

    at org.h2.engine.SessionRemote.done(SessionRemote.java:538)
    at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:109)
    at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:373)
    at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:267)
    at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:110)
    at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:94)
    at org.h2.Driver.connect(Driver.java:72)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at org.h2.tools.RunScript.process(RunScript.java:312)
    at org.h2.tools.RunScript.runTool(RunScript.java:140)
    at org.h2.tools.RunScript.main(RunScript.java:68) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:59:05.017

我发现我无法在执行 data.bat 脚本的同时运行 Virgo 服务器。我以为它是在支持多个连接的模式下启动的。

# google-apps-script - 删除新创建的文档？

> ID：11003291
> 
> 赞同：0
> 
> 时间：2012-06-12T19:14:16.937
> 
> 标签：google-apps-script

我正在使用脚本在提交表单时对其进行处理。其中一部分涉及将表单中的数据与谷歌文档合并，然后将该文档作为 pdf 通过电子邮件发送。文档一旦发送，是否有删除的方法？

如果有帮助，这是我的脚本：

```
function onFormSubmit(e) {
  //Get Form Values
    var candID = parseInt(e.values[1]);
    var emailAddress = e.values[2];

  //Get Additional Settings
    var ssMaster = SpreadsheetApp.openById("0AierVcXWELCudDY2Y3J2Z1hoX3pLOXYzTW1pOVF3Wmc");
    var settings_sheet = ssMaster.getSheetByName("Settings");
    var candCodeLength = settings_sheet.getRange("B20").getValue();
    var candCodeChars = settings_sheet.getRange("B21").getValue();
    var tempDocumentID = settings_sheet.getRange("B14").getValue();
    var candInfoSheet = ssMaster.getSheetByName("Candidate Information");
    var candInfoLastRow = candInfoSheet.getLastRow();
    var candInfoArray = candInfoSheet.getRange(2,1,candInfoLastRow,7).getValues();

  //Find Corresponding Row for Form Entry
    for(var i=0; i<candInfoArray.length; i++) {
      if (candInfoArray[i][3] === candID) {
        var row = i+2;
        }
      }
     var candIDRowNumber = row;

  //Create & Record Candidate Code
    do { 
      var candCode = createCandCode(candCodeLength, candCodeChars);
      }
      while(checkCandCode(candInfoArray, candCode) === true);
      candInfoSheet.getRange(row,6,1,1).setValue(candCode);
      candInfoSheet.getRange(row,7,1,1).setValue(emailAddress);

  //Create PDF
    var docid = DocsList.getFileById(tempDocumentID).makeCopy("Character Reference Instructions").getId();
    var doc = DocumentApp.openById(docid);
    Logger.log(candInfoArray);
    Logger.log(row);
    var firstName = candInfoArray[(row-2)][1];
    var lastName = candInfoArray[(row-2)][0];
    var body = doc.getActiveSection();
    body.replaceText("<<first>>", firstName);
    body.replaceText("<<last>>", lastName);
    body.replaceText("<<code>>", candCode);
    doc.saveAndClose();

  //Send Email
    var message = "You have successfully completed the NHS Registration form.\n\n Your Candidate Code (different from your Candidate ID) is \"" + candCode + "\" and should be given to your character reference so that they can fill out your character reference form.\n\n If you have any questions, please email Ann Perham at ann_perham@needham.k12.ma.us." ;
    var subject = "NHS Registration Confirmation & Character Reference Instructions";
    var advancedArgs = {name: "Ann Perham", replyTo: "ann_perham@needham.k12.ma.us", attachments: doc.getAs("application/pdf")};
    MailApp.sendEmail(emailAddress, subject, message, advancedArgs);
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:53:21.627

You can use [doc.setTrashed](https://developers.google.com/apps-script/reference/drive/file#setTrashed(Boolean)) right at the end of your function while it is still the active document.

# php - Facebook PHP Graph Api POST 仅适用于某些用户，但并非适用于所有用户（详细说明）

> ID：11003293
> 
> 赞同：1
> 
> 时间：2012-06-12T19:14:21.743
> 
> 标签：php, jquery, mysql, facebook, facebook-graph-api

我在 Facebook 上有一个应用程序，它有 4500 个用户。

我所做的是收集他们的 Access_Token 扩展它并将其保存在我的数据库中。

概率。是第一次，我使用它发布的 Graph Api 将代码发布到 PHP 中，但它使我的主机崩溃，因为从 4500 个用户的 Mysql DB 列表中获取令牌，然后在该用户上发送 1 个 1 个帖子 15 分钟。我的主人倒下了。

然后我尝试使用 JQuery Post，比如在循环中发送 1 个请求，它的 PHP 文件将通过获取 Post 变量来工作，但它不起作用 在我的墙上发布了消息，只有其他我检查过但根本没有结果。

这是代码：

```
if(isset($_POST['ctr'])){
$ctr=$_POST['ctr'];
$qu=mysql_query("Select access_token from fb");
echo (intval((mysql_num_rows($qu))/3));  

}else if(isset($_POST['ie'])){

$id=$_POST['ie'];

for($i=($id*3)-3;$i<$id*3;$i++){
$result=mysql_query("Select access_token from fb limit $i,1");

    if(isset($_POST['Desc'])){
$msg['description'] = $_POST['Desc'];
}

    //construct the message/post by posted data
    if(isset($_POST['message'])){
        $msg['message'] = $_POST['message'];
    }
    if(isset($_POST['url']) && $_POST['url'] != 'http://'){
        $msg['link'] = $_POST['url'];
    }
    if(isset($_POST['picture_url']) && $_POST['picture_url'] != ''){
        $msg['picture'] = $_POST['picture_url'];
    }

    if($result){

$msg['access_token'] = mysql_result($result,0);
            try {
                $facebook->api('/me/feed', 'POST', $msg);
            } catch (FacebookApiException $e) {
            }

        }} 
```

JavaScript 代码

```
function DooWork(){
sendit(0,1);

}

function sendit(mo,name)
{
   if(name==0){
  var get="ie="+mo+"&url="+document.getElementById('url').value+"&Desc="+document.getElementById('Desc').value+"&picture_url="+document.getElementById('purl').value+"&message="+document.getElementById('message').value;
   $.ajax({
    type: "POST",
    url: "Admin.php",
    data: get,
    success: function(data) {

    }
  });
  }else{
  var get="ctr=0";
   $.ajax({
    type: "POST",
    url: "Admin.php",
    data: get,
    success: function(data) {
 document.getElementById("Curr").innerHTML=data;
 dosomec(data);
    }
  });
  }

}

function dosomec(ml){

for(var i=1;i<=ml;i++){
sendit(i,0);

 document.getElementById("Text").innerHTML=ml;

}
} 
```

PHP 代码所做的是，如果 Total rows 为 4500，则执行 4500/3，然后使用 Ajax 将此值发送到 Javascript 代码，然后它将循环并发送

任何帮助将不胜感激

谢谢

# sql - SQL：从日期中提取 MON-YEAR

> ID：11003294
> 
> 赞同：-1
> 
> 时间：2012-06-12T19:14:24.287
> 
> 标签：sql, oracle

`sysdate`我想从（或者说，在 JUN-12 的任何一天）接收“01-FEB-11”的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:18:23.183

```
select TO_CHAR(sysdate,'DD-MON-YY') from dual 
```

# post - CKeditor textarea 值未通过 POST 发送

> ID：11003295
> 
> 赞同：0
> 
> 时间：2012-06-12T19:14:30.070
> 
> 标签：post, dynamic, ckeditor

我有一个表单，我用 jQuery 删除了一些 CKeditor 实例化的文本区域，`.remove()`并通过这个函数添加新的：

```
function addchapter() {
    var randomnumber = Math.floor(Math.random()*9999);
    var clone = $("#newchapter").clone(); //which is a hidden DIV containing the plain HTML to be added in form
    $(clone).attr('id',randomnumber);
    $("#chapters").prepend(clone);

    var newrandom = Math.floor(Math.random()*9999);
    $("#"+randomnumber+" textarea").attr('id',newrandom);

    CKEDITOR.replace( newrandom );
} 
```

这有效，但是当我提交表单时，新添加的 Ckeditor textarea 发送空值。

这只发生在我从表单中删除一个 CKeditor textarea 并在此之后添加一个新的时。如果我通过该函数添加任何文本区域，只要我不删除任何现有的，它就会很好。顺便说一句，现有的通过PHP循环从数据库中添加，它实际上是一个编辑表单

有任何想法吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:32:21.537

似乎我必须在删除 HTML 代码之前销毁 CKeditor 实例，无论何时我必须`.remove()`对任何条目进行操作。

所以在你删除 CKeditor textarea 之前，你应该这样做：

```
CKEDITOR.instances['textareaID'].destroy(true); 
```

干杯。

# javascript - Javascript 的正则表达式

> ID：11003297
> 
> 赞同：1
> 
> 时间：2012-06-12T19:14:44.470
> 
> 标签：javascript, regex

我正在尝试学习一些基本的 Javascript 正则表达式。作为初学者，我阅读了文档和这个 SO 问题： [如何访问 JavaScript 正则表达式中的匹配组？](https://stackoverflow.com/questions/432493/how-do-you-access-the-matched-groups-in-a-javascript-regex)

我想我已经破译了大部分表达：

```
/(?:^|\s)format_(.*?)(?:\s|$)/g 
```

除了这部分：

```
(.*?) 
```

我知道

```
.* 
```

是匹配 0 次或多次出现的任何字符（换行符或行终止符除外）。

但我无法弄清楚为什么

```
? 
```

是需要的。

我在玩类似的东西：

```
/(?:^|\s)ab(.*?)ab(?:\s|$)/
' ab4545ab ' 
```

无论有没有

```
? 
```

在

```
(.*?) 
```

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T19:17:08.870

它使`.*`非贪婪。这意味着正则表达式中下一个有效字符序列的第一次出现将停止`.*`.

如果没有`?`，`.*`将一直消耗到正则表达式中下一个有效字符序列的最后一次出现。

```
var s = "foo bar boo bar foo";

var greedy = /.*bar/;
var no_greed = /.*?bar/;

greedy.exec(s); // foo bar boo bar

no_greed.exec(s); // foo bar 
```

所以贪婪的人会从第一个“条”消耗到最后一个“条”。

非贪婪者只去第一个“酒吧”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T19:17:13.473

`?`after a `.+`or `.*`match 将使匹配变得**惰性**，而不是默认的**greedy**。意思是，它将匹配尽可能少的字符，而不是尽可能多的字符。

例子：

```
"hello".match(/.+/)    //Returns ["hello"]
"hello".match(/.+?/)   //Returns ["h"] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T19:19:14.983

使`?`量词不贪婪。没有它，`*`会吃掉尽可能多的字符，这在`.`. 但是，有了`?`那里，它会尽可能少地吃。

以这个字符串为例：`"abcccbacba"`，并将其与`/abc(.*)ba/`. 这将导致捕获`ccbac`. 另一方面，`/abc(.*?)ba/`将捕获`cc`.

# algorithm - 以下是否有快速算法？

> ID：11003302
> 
> 赞同：-3
> 
> 时间：2012-06-12T19:15:15.837
> 
> 标签：algorithm, complexity-theory

我有两个排序数组 A 和 B，每个长度为 n。

我还有一组索引 S，其中索引在 1 到 n 之间。（例如，如果 n=3，则 S 可以是 (1,2)、(2,3) 和 (1,1)）。

我想要一个非常快的算法（最好是 O(log n)），以便它从 S 中找到最大化 A[i] + B[j] 的对 (i,j)。

可以对 S 进行任何预处理（散列某些值等）。

任何 O(n log n) 预处理都可以在 A 和 B 上进行（因为无论如何都需要时间来对它们进行排序），但是一旦预处理完成，具有各种预处理 S 的后续查询应该很快。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:27:43.117

这不能在小于 O(n) 的时间内完成。

如果`S={(i,n-i+1)|1≤i≤n}`除了测试 S 的每个元素之外没有其他解决方案，因为 for `i≠j`，两者`A[i]+B[n-i+1] < A[j]+B[n-j+1]`和`A[i]+B[n-i+1] ≥ A[j]+B[n-j+1]`都是可能的。

# google-maps - 错误“数据可能仍在加载”

> ID：11003303
> 
> 赞同：0
> 
> 时间：2012-06-12T19:15:19.213
> 
> 标签：google-maps, google-fusion-tables

我遇到错误“数据可能仍在加载”。拖动或刷新页面找出答案！”在我的地图[http://www.strahlen.org/map/map.htm](http://www.strahlen.org/map/map.htm)上。

我的地图从 Fusion Tables 中提取数据。从昨天开始我没有更改我的代码或 FT，一切正常，并且错误从今天下午开始。当我直接在Fusion Tables中选择“可视化，地图”时，错误也存在，所以问题不可能出在我网站的html代码中。

这是 Google 负载/性能错误吗？

我已阅读[https://developers.google.com/fusiontables/docs/troubleshooting](https://developers.google.com/fusiontables/docs/troubleshooting)上的“地图图块显示”数据可能仍在加载“消息，但除了 F5/refresh 之外没有其他解决方案......我读了这个[“数据可能仍在加载”......但它已经在那里了？](https://stackoverflow.com/questions/10609186/data-may-still-be-loading-but-its-already-there)，这似乎并不能解决我的问题，因为我的表数据看起来不错，列标题匹配，表 ID 没问题，等等

谢谢你的帮助，弗兰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T23:34:11.430

是的。这会定期发生。不确定原因，但这绝对是 Google 服务器的问题，而不是您的代码。它最终会消失。你的地图现在看起来不错。

# iphone - 子类化 UIViewController 设计考虑

> ID：11003306
> 
> 赞同：1
> 
> 时间：2012-06-12T19:15:31.507
> 
> 标签：iphone, objective-c, ios, ipad

所以我想创建五个不同的 UIViewController。他们每个人都有一个共同点（顶部的图像视图，顶部的标签）。所以我正在考虑创建一个父 UIViewController，然后从父 UIViewController 有 5 个子类。在这个父视图控制器中，它将具有 UIImageView、标签以及与其他五个通用/共享的所有内容。问题是，每个 UIViewController 子类都有自己的 nib，但是我希望它也有父级的 UIImageView。那我该如何处理呢？

如果每个子类 UIViewController 都有自己的 nib，我想我很困惑，我如何才能在这个子类中看到父视图控制器的 xib？我知道我的措辞非常混乱，我似乎找不到比这更好的解释方式了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:42:43.977

不要为父视图控制器创建 xib。相反，子类化父视图控制器，然后为子类创建 xib 将从任何父类/视图控制器公开 IBOutlets。

想想这个例子，因为我们都在某个时候继承了 UIViewController 并为它创建了一个 xib，我们必须将 xib 中的主视图连接到“视图”IBOutlet。我们会在 UIViewController 父类中定义 IBOutlet。

# animation - Sencha Touch 2 - 按钮上的滑动动画

> ID：11003308
> 
> 赞同：0
> 
> 时间：2012-06-12T19:15:32.327
> 
> 标签：animation, extjs, sencha-touch, sencha-touch-2

我试图在容器内的按钮上获得幻灯片动画，但我无法做到。

顺便说一句，*淡入淡出*和*翻转*工作正常。

当显示所有按钮时，我想做如下所示的动画。

这是我想要实现的图像：

![http://oi47.tinypic.com/r9o8w7.jpg](../Images/8c44a0e5a8cbc77cce8fa3890d87f1a4.png)

**编辑 ：**

我`initialize()`在容器的事件中运行以下代码。

```
 Ext.Anim.run(this.getComponent('btnId'),'flip',{
            out: true,
            delay: 1000,
            duration: 500,
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:58:20.530

```
Ext.Anim.run(Ext.getCmp('btnId'), 'slide', {
    direction: 'left',
    duration: 1000
}) 
```

But the important thing is to ensure you require `Ext.Anim` in your application. Put this in your main app.js

```
Ext.requires('Ext.Anim'); 
```

or

```
Ext.application({
    name: 'myapp',
    requires: [
         'Ext.Anim'
    ]
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:03:15.663

嗨@user1452041 请试试这个，

```
Ext.Anim.run(Ext.getCmp('btnId'), 'slide', {
    direction: 'left'
}) 
```

`direction`属性取决于您是否愿意`left`或`right`

我希望这有帮助。：） 再见

# android - SeekBar 不会触发 onProgressChanged

> ID：11003309
> 
> 赞同：0
> 
> 时间：2012-06-12T19:15:48.373
> 
> 标签：android, seekbar

我在 Android 中将 SeekBar 用于我的反馈对话框。

```
LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View layout = inflater.inflate(R.layout.feedbackview, (ViewGroup) findViewById(R.id.seekHospitality));

    SeekBar hospitalitySeek = (SeekBar) layout.findViewById(
            R.id.seekHospitality);
    hospitalitySeek.setProgress(5);
    hospitalitySeek
            .setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

                public void onStopTrackingTouch(SeekBar seekBar) {
                    // TODO Auto-generated method stub

                }

                public void onStartTrackingTouch(SeekBar seekBar) {

                }

                public void onProgressChanged(SeekBar seekBar,
                        int progress, boolean fromUser) {
                    if (seekBar.getId() == R.id.seekHospitality) {
                        TextView valHospitality = (TextView) getFeedbackDialog()
                                .findViewById(R.id.valHospitality);
                        valHospitality.setText(progress);

                    }
                }
            }); 
```

但是当我改变 SeekBar 的进度时，监听器永远不会触发。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:03:50.700

I found that:

```
 View layout = inflater.inflate(R.layout.feedbackview, (ViewGroup) findViewById(R.id.seekHospitality)); 
```

Here seekHospitality is not the root. So I change it and now it works.

Thank you

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:56:28.893

我不知道您是否尝试在 OnProgressChanged 中添加调试消息，但您可以尝试替换

```
 valHospitality.setText(String.valueOf(progress)); 
```

和

```
 valHospitality.setText(progress); 
```

# c# - 创建动态变量

> ID：11003314
> 
> 赞同：0
> 
> 时间：2012-06-12T19:16:03.013
> 
> 标签：c#, sql-server

我一直在开发一个程序，该程序允许我将数据从我的 sql server DB 上传到 SOAP 服务中。我可以成功地将数据上传到服务中。问题是正在插入同一行。以下是我的代码的一部分：`

```
 List<service1.SDataRow> ArrayOfSData = new List<ne_service_demo2.service1.SDataRow>();
               //data to be uploaded. 
                    service1.SDataRow row1 = new service1.SDataRow();
                    foreach (DataRow dRow in dTable.Rows)
                    {

                         row1.SensorTimeStamp = dRow["SensorTimeStamp"].ToString();
                         row1.SensorID = dRow["SensorID"].ToString();
                         row1.PercentFull = dRow["PercentFull"].ToString();
                         row1.Temp = dRow["Temp"].ToString();
                         row1.TempReading = dRow["TempReading"].ToString();
                         row1.Sig = dRow["Sig"].ToString();
                         row1.SignalReading = dRow["SignalReading"].ToString();
                         row1.Noi = dRow["Noi"].ToString();
                         row1.NoiseReading = dRow["NoiseReading"].ToString();
                         row1.Cou = dRow["Cou"].ToString();
                         row1.CountReading = dRow["CountReading"].ToString();
                         row1.NewPercentFull = dRow["NewPercentFull"].ToString();
                         row1.Current_Gallons_In_Tank = dRow["Current_Gallons_In_Tank"].ToString();
                         ArrayOfSData.Add(row1);                                                       
                    }

                    service1.SensorData sd = new service1.SensorData();
                    sd.API_ACCESS_KEY = "7e070c1981ccc368483a207801be17aa17b2334c";
                    sd.AccountCode = "0000000";
                    sd.SData = ArrayOfSData.ToArray();

                    // Asynchronous call
                    ws.PostSensorDataCompleted += WebSeviceResult;
                    ws.PostSensorDataAsync(sd);` 
```

当我遍历我的数据库表时，所有数据都会转到相应的字段或列。同样，问题是我得到相同的行 x 次。我知道问题是“row1”，因为它会不断更新新值，同时仍然保持列表计数。但是，我不能将 row1 设为列表类型，因为它必须是 SDataRow 类型，因为这是将我的服务链接到我的数据库列的类。我还尝试使用 List.Clear() 方法在循环中清除我的列表，但没有奏效。当我尝试在每次迭代后清除列表时，我会收到一条错误消息，提示“已添加项目”。所以理论上 clear() 方法应该可以工作，它的 row1 导致了问题。有谁知道解决方法或制作方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:22:08.970

您正在循环外创建 SDataRow 的实例。在循环内部，您正在设置同一个实例的属性（每次迭代都覆盖它们），然后将同一个实例添加到列表中。

将那部分代码更改为：

```
 foreach (DataRow dRow in dTable.Rows)
  {
      service1.SDataRow row1 = new service1.SDataRow(); 
```

所以你需要在 foreach 循环中创建新实例

# android - 如何在 Android 网格视图中设置单元格大小？

> ID：11003318
> 
> 赞同：2
> 
> 时间：2012-06-12T19:16:11.397
> 
> 标签：android, android-layout, gridview

我正在尝试为应用程序制作一个带有大图标的gridview，但我找不到任何关于在an​​droid 上修改网格布局上的单元格大小的教程。任何人都可以给我一个例子或链接吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:01:45.770

就像其他[adapterViews](http://developer.android.com/reference/android/widget/AdapterView.html)一样，在gridView（扩展adapterView）上，子项的大小取决于他们想要成为的大小，如android API中所写：

> AdapterView 是一个视图，其子项由适配器确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:19:04.813

你试过了吗`android:numColumns="2"`

# iphone - RTL 语言 uipageviewcontroller 动画

> ID：11003319
> 
> 赞同：5
> 
> 时间：2012-06-12T19:16:14.253
> 
> 标签：iphone, ios5, uipageviewcontroller, right-to-left

我知道这个问题是典型的，并且在论坛中被问过很多次，但我仍然无法解决我的问题，所以如果有任何机构可以提供帮助，那就太好了:)

我正在用阿拉伯语创建一个图书应用程序，我需要执行 uipageviewcontroller 从右到左的转换。这就是我要说的。

还有一件事（如果我没有很好地解释我自己）我有这个线程的确切需求：[如何更改分页卷曲动画的 UIPageViewController 方向，](https://stackoverflow.com/questions/9705332/how-to-change-uipageviewcontroller-direction-of-paging-curl-animation)但我无法做出他们所说的解决方案，所以如果有人可以向我解释或给我一个链接，在那里我可以知道如何做到这一点已经绰绰有余了:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T17:20:03.197

可以通过这种方式完成

1.  将 pageViewController 的数据源代码交换`viewControllerBeforeViewController`为`viewControllerAfterViewController`

2.  更改`UIPageViewControllerSpineLocationMin`为`UIPageViewControllerSpineLocationMax`

要检查这一点，请将基于页面的应用程序模板启动为 Universal 并更改以下内容`ModelController.m`

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
{
    NSUInteger index = [self indexOfViewController:(DataViewController *)viewController];
    if (index == NSNotFound) {
        return nil;
    }

    index++;
    if (index == [self.pageData count]) {
        return nil;
    }
    return [self viewControllerAtIndex:index storyboard:viewController.storyboard];
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
    NSUInteger index = [self indexOfViewController:(DataViewController *)viewController];
    if ((index == 0) || (index == NSNotFound)) {
        return nil;
    }

    index--;
    return [self viewControllerAtIndex:index storyboard:viewController.storyboard];
} 
```

并在“RootViewController.m”中更改`UIPageViewControllerSpineLocationMin`并`UIPageViewControllerSpineLocationMax`滑动 (indexOfCurrentViewController % 2 == 0) 的条件

```
- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation
{
    if (UIInterfaceOrientationIsPortrait(orientation) || ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)) {
        UIViewController *currentViewController = [self.pageViewController.viewControllers objectAtIndex:0];
        NSArray *viewControllers = [NSArray arrayWithObject:currentViewController];
        [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

        self.pageViewController.doubleSided = NO;
        return UIPageViewControllerSpineLocationMax;
    }

    DataViewController *currentViewController = [self.pageViewController.viewControllers objectAtIndex:0];
    NSArray *viewControllers = nil;

    NSUInteger indexOfCurrentViewController = [self.modelController indexOfViewController:currentViewController];
    if (indexOfCurrentViewController == 0 || indexOfCurrentViewController % 2 == 0) {
        UIViewController *previousViewController = [self.modelController pageViewController:self.pageViewController viewControllerBeforeViewController:currentViewController];
        viewControllers = [NSArray arrayWithObjects:previousViewController, currentViewController, nil];
    } else {
        UIViewController *nextViewController = [self.modelController pageViewController:self.pageViewController viewControllerAfterViewController:currentViewController];
        viewControllers = [NSArray arrayWithObjects:currentViewController, nextViewController, nil];
    }
    [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

    return UIPageViewControllerSpineLocationMid;
} 
```

资料来源：[PageViewControllers Apple Doc](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/PageViewControllers.html#//apple_ref/doc/uid/TP40011313-CH4-SW14)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:48:49.867

您应该深入研究核心图形和核心动画。

1.  制作 2 层（上一个/下一个和当前）
2.  进行“手势”时（请参阅[事件处理指南](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)），您需要查看它是向左滑动还是向右滑动（上一页/下一页）
3.  然后在图层上执行 3D 旋转

这是一个关于翻页的好[例子](https://github.com/mtabini/AFKPageFlipper)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T23:57:17.737

Madev，您不想使用“PageBased Application”模板吗？

只需启动一个新的 xCode 项目：

在 iOS > Application 下，查找 Page-Based Application。点击确定，选择您的选项。您所要做的就是提供您的内容（通过“数据源”）。

现在这是复杂的部分......但这里有一些提示

[http://www.techotopia.com/index.php/Implementing_a_Page_based_iOS_5_iPhone_Application_using_UIPageViewController](http://www.techotopia.com/index.php/Implementing_a_Page_based_iOS_5_iPhone_Application_using_UIPageViewController)

[http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)

# sphinx4 - 使用带有 sphinx-4 的 HTK 声学模型

> ID：11003322
> 
> 赞同：0
> 
> 时间：2012-06-12T19:16:22.507
> 
> 标签：sphinx4, htk, acoustics

我一直在使用 sphinx-4 作为语音识别工具，我仍在尝试学习该工具。我有一个使用 HTK 开发的阿拉伯语声学模型。我想知道如何在 Sphinx-4 中使用这个声学模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:27:14.090

有3种方式：

1.  直接在 sphinx4 解码器中使用 HTK 模型，如 [http://nsh.nexiwave.com/2009/09/using-htk-models-in-sphinx4.html](http://nsh.nexiwave.com/2009/09/using-htk-models-in-sphinx4.html)中所述 确保正确调整前端

2.  使用转换脚本将 HTK 模型转换为 Sphinx 格式[http://cmusphinx.sourceforge.net/2010/08/python-htk-converter/](http://cmusphinx.sourceforge.net/2010/08/python-htk-converter/)

3.  使用 Sphinxtrain 从相同的音频数据训练模型

最后一种方法是最简单的使用方法，它将为您提供最大的准确性。对于前两个，您还需要修改前端配置。它很可能不会与 HTK 前端 100% 兼容。

# file - 在文件python 3中查找和删除行

> ID：11003325
> 
> 赞同：-1
> 
> 时间：2012-06-12T19:16:27.183
> 
> 标签：file, python-3.x

我使用python 3

好的，我有一个像这样锁定的文件：

```
id:1
1
34
22
52
id:2
1
23
22
31
id:3
2
12
3
31
id:4
1
21
22
11 
```

如何仅查找和删除文件的这一部分？

```
id:2
1
23
22
31 
```

我一直在努力做到这一点，但无法让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:36:18.627

是用于决定删除序列的 id，还是用于决定的值列表？

您可以构建一个字典，其中 id 号是键（由于稍后的排序而转换为 int），以下行将转换为作为键值的字符串列表。然后可以删除key为2的item，遍历key排序的item，输出新的id:key加上格式化后的字符串列表。

或者，您可以构建订单受保护的列表列表。如果要保护 id 的序列（即不重新编号），您还可以记住内部列表中的 id:n。

对于大小合理的文件，可以这样做。如果文件很大，您应该将源文件复制到目标文件并即时跳过不需要的序列。对于小文件，最后一种情况也相当容易。

**[澄清后添加]**

我建议学习以下在许多此类情况下有用的方法。它使用所谓的*有限自动机*来实现绑定到从一种状态转换到另一种状态的动作（参见[Mealy 机器](http://en.wikipedia.org/wiki/Mealy_machine)）。

文本行是这里的输入元素。表示上下文状态的节点在此处编号。（我的经验是不值得给它们起名字——让它们只是愚蠢的数字。）这里只使用了两种状态，并且`status`可以很容易地用布尔变量替换。但是，如果情况变得更复杂，就会导致引入另一个布尔变量，代码变得更容易出错。

代码一开始可能看起来很复杂，但是当您知道可以单独考虑每个代码时，就很容易理解了`if status == number`。这是捕获先前处理的提到的上下文。不要试图优化，让代码那样吧。它实际上可以稍后进行人工解码，并且您可以绘制类似于[Mealy 机器示例](http://en.wikipedia.org/wiki/Mealy_machine)的图片。如果你这样做了，那就更容易理解了。

想要的功能有点笼统——一组被忽略的部分可以作为第一个参数传递：

```
import re

def filterSections(del_set, fname_in, fname_out):
    '''Filtering out the del_set sections from fname_in. Result in fname_out.'''

    # The regular expression was chosen for detecting and parsing the id-line.
    # It can be done differently, but I consider it just fine and efficient.
    rex_id = re.compile(r'^id:(\d+)\s*$')

    # Let's open the input and output file. The files will be closed
    # automatically.
    with open(fname_in) as fin, open(fname_out, 'w') as fout:
        status = 1                 # initial status -- expecting the id line
        for line in fin:
            m = rex_id.match(line) # get the match object if it is the id-line

            if status == 1:      # skipping the non-id lines
                if m:              # you can also write "if m is not None:"
                    num_id = int(m.group(1))  # get the numeric value of the id
                    if num_id in del_set:     # if this id should be deleted
                        status = 1            # or pass (to stay in this status)
                    else:
                        fout.write(line)      # copy this id-line
                        status = 2            # to copy the following non-id lines
                #else ignore this line (no code needed to ignore it :)

            elif status == 2:      # copy the non-id lines
                if m:                         # the id-line found
                    num_id = int(m.group(1))  # get the numeric value of the id
                    if num_id in del_set:     # if this id should be deleted
                        status = 1            # or pass (to stay in this status)
                    else:
                        fout.write(line)      # copy this id-line
                        status = 2            # to copy the following non-id lines
                else:
                    fout.write(line)          # copy this non-id line

if __name__ == '__main__':
    filterSections( {1, 3}, 'data.txt', 'output.txt')
    # or you can write the older set([1, 3]) for the first argument. 
```

这里是给定原始编号的输出 id 行。如果要重新编号这些部分，可以通过简单的修改来完成。尝试代码并询问详细信息。

请注意，有限自动机的功能有限。它们不能用于通常的编程语言，因为它们无法捕获嵌套的成对结构（如双亲）。

PS 从计算机的角度来看，这 7000 行实际上是一个小文件；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:18:31.237

如果两者之间没有任何值会干扰这将起作用....

```
import fileinput 
...
def deleteIdGroup( number ):
    deleted = False
    for line in fileinput.input( "testid.txt", inplace = 1 ):
        line = line.strip( '\n' )
        if line.count( "id:" + number ): # > 0
            deleted = True;
        elif line.count( "id:" ): # > 0
            deleted = False;
        if not deleted:
            print( line ) 
```

**编辑：**

抱歉，这会删除 id:2 和 id:20 ...你可以修改它，以便第一个 if 检查 - *line == "id:" + number*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:26:02.603

将每一行读入一个字符串数组。索引号是行号 - 1。在阅读该行之前检查该行是否等于“id:2”。如果是，则停止读取该行，直到该行等于“id：3”。读取该行后，清除文件并将数组写回文件，直到数组结束。这可能不是最有效的方法，但应该可以。

# javascript - 如何在 Greasemonkey 中处理 __doPostBack()？

> ID：11003327
> 
> 赞同：0
> 
> 时间：2012-06-12T19:16:31.003
> 
> 标签：javascript, asp.net, function, greasemonkey, dopostback

该函数处理了一系列包含我需要的链接，我正在尝试使用 Greasemonkey 将内容保存在这些链接中。

这是我尝试过的：

```
var content;
var viewstate;
var crystalstate;

$(document).ready(function() {

viewstate = $("#__VIEWSTATE").val();
crystalstate = $("#__CRYSTALSTATEctl00$main$CrystalReportViewer1").val();

$.post("CautarePolite.aspx", { 
__EVENTTARGET: 'ctl00$main$gvPolite$ctl02$lbDetaliiPolita', 
__EVENTARGUMENT: '', 
__CRYSTALSTATEctl00$main$CrystalReportViewer1: crystalstate,
__VIEWSTATE: viewstate
}, 
function( data ) {
      content = data;
  } );

alert('');

$.post("script_url.php", { data: content } );

}); 
```

这给了我一个带有以下错误消息的页面：

“viewstate MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保配置指定相同的 validationKey 和验证算法。不能在集群中使用 AutoGenerate。”

这是页面上可能感兴趣的一些代码：

```
<form method="post" action="CautarePolite.aspx" id="aspnetForm" class="wrap">
<div class="aspNetHidden">
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__CRYSTALSTATEctl00$main$CrystalReportViewer1" id="long value*" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="*very long value*" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:31:13.360

它缺少 __VIEWSTATEENCRYPTED

输入字段在源代码中更靠后，但这解决了它。我得到了我需要的东西。

# wix - WiX 中 TARGETDIR 和 INSTALLDIR 的用途是什么？

> ID：11003336
> 
> 赞同：21
> 
> 时间：2012-06-12T19:17:13.047
> 
> 标签：wix

在旧版 Visual Studio 部署项目安装程序中，传递指定值的命令行参数`TARGETDIR`允许我覆盖默认安装位置（我的大部分安装都在没有用户交互的情况下进行，因此大量使用命令行自动化）。但是，我得到的印象是 WiX（默认情况下）`TARGETDIR`用于不同的东西。虽然我可以（并且将）更新我们的命令行工具来更改参数名称，但仍然需要手动修改我们现有的所有安装（一项非同寻常的工作）。

**有没有办法通过指定`TARGETDIR`而不破坏任何东西来覆盖 WiX 包中的安装位置？**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-12T19:52:33.157

After doing more digging, it looks like my previous experience is a result of behavior specific to VSDPROJ's (and possibly InstallShield), wheras WiX is conforming to the Windows Installer.

As I discovered at [this link](http://www.mail-archive.com/wix-users@lists.sourceforge.net/msg06706.html), `TARGETDIR` is actually supposed to represent the root of the drive with the most free space available (assuming there's more than one). That's why WiX projects have directories nested under there for Program Files, etc. Visual Studio actually adds a custom action that overrides this property to the full installation path.

I was able to accomplish what I wanted by doing two things:

1.  Change all of my components and component groups to install to `TARGETDIR` instead of `INSTALLFOLDER` (the default directory that WiX put in there)
2.  Add a custom action that sets the value of the `TARGETDIR` property to the installation path, assuming one wasn't passed in from the command line.

To do that, I added this under the `<Product>` tag:

```
<CustomAction Id="SetTARGETDIR" Property="TARGETDIR" 
              Value="[ProgramFilesFolder][Manufacturer]\[ProductName]" 
              Execute="firstSequence" /> 
```

And this within the `<InstallExecuteSequence>` tag:

```
<Custom Action="SetTARGETDIR" Before="CostFinalize">TARGETDIR=""</Custom> 
```

# c - 宏中的双斜杠注释替换

> ID：11003338
> 
> 赞同：3
> 
> 时间：2012-06-12T19:17:16.493
> 
> 标签：c, macros, c-preprocessor, pic, conditional-compilation

我正在一个符合 ansi 标准的编译器（Microchip XC8）上开发一个 PIC MCU 程序。有两种操作模式，在编译期间通过宏确定。所以我不想因为一行代码而复制一个类似函数的宏，我想知道是否有任何方法可以编写宏，例如

```
#define FOO // 
```

这样当 FOO 被替换时，它实际上会取消该行的其余部分。

编写函数而不是宏是不可能的，因为函数调用产生的延迟会破坏我程序的紧张时间（大约几微秒）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T19:41:12.740

您不能使宏扩展以注释掉该行，不。`//`在宏定义中是定义之后的注释，它没有被扩展，并且 IIRC 有一条规则说你不能构造一个`//`using 标记粘贴。即使可以，扩展它也不意味着宏开始注释。基本上，您无法使用宏更改注释语法。

你可以这样做：

```
#if DO_NOTHING_MODE
    #define FOO(ARG1)
#else
    #define FOO(ARG1) ARG1
#endif 
```

并像这样使用它：

```
#define FUNCTION_LIKE_MACRO(ARG1, ARG2) \
    required line; \
    FOO(optional line;) \ 
```

尽管更常见的习惯用法是将宏设计为接受表达式作为其参数，而不是整行：

```
#if DO_NOTHING_MODE
    #define FOO(ARG1) ((void)0)
#else
    #define FOO(ARG1) (ARG1)
#endif 
```

并像使用它一样`FOO(optional line);`

无论哪种方式，如果宏参数中包含逗号，则调用者需要将它们括在括号中`FOO((1,2))`，尽管在 C99 中您可以通过制作`FOO`可变参数宏来避免这种情况：

```
#define FOO(...) (__VA_ARGS__) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T19:20:18.753

您可以使用该`#ifndef`指令来实现相同的效果：

```
#ifndef FOO
   your_line_of_code
#endif 
```

**编辑**：@SteveJessop 让我看到我没有注意 OP 的这句话*“我不想因为一行代码而复制一个类似函数的宏”*。如果不需要复制类似函数的宏，则在这种情况下可以执行以下操作：

```
// When FOO is defined, BLA in FUNC macro is a no-operation (null statement)

#ifndef FOO
#define BLA() a++
#else
#define BLA()
#endif

#define FUNC()  \
   BLA();       \
   b++; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T19:19:39.377

在宏替换发生之前，注释会从源代码中删除，因此无法完全定义这样的宏。但是，当然可以将附加参数传递给宏以指定它应该生成的代码，或者根据您正在编译的模式有条件地定义宏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T19:40:57.360

```
#define FOO(...) __VA_ARGS__ 
```

然后在宏中使用`FOO(your code here)`而不是。`FOO your code here`

如果您的平台没有 C99，您可以改用

```
#define FOO(x) x 
```

并确保参数不包含`,`未包含在`()`.

# arrays - MIN() 在数组中

> ID：11003346
> 
> 赞同：0
> 
> 时间：2012-06-12T19:17:48.040
> 
> 标签：arrays, multidimensional-array, min

所以这是我的数组，我想做的是取消设置 [detail][$x] 键，只留下最低的总数。有人可以帮忙吗？先感谢您..

虽然有很多产品要循环，但我的意思是它不仅仅是数组中的一项。

```
[1] => Array
        (
            [name] => Product Name 1
            [detail] => Array
                (
                    [1] => Array
                        (
                            [total] => 10.14
                        )

                    [2] => Array
                        (
                            [total] => 12.18
                        )

                    [3] => Array
                        (
                            [total] => 9.90
                        ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:21:31.533

您可以找出最低的总数并覆盖整个细节。像这样的东西：

```
$lowestValue = false;
foreach ($array[1]['detail'] as $detail) {
    if ($lowestValue === false || $lowestValue > $detail['total']) {
        $lowestValue = $detail['total'];
    }
}

$array[1]['detail'] = array(0 => array('total' => $lowestValue)); 
```

# sql-server - 具有一对多关系的多个表连接

> ID：11003347
> 
> 赞同：1
> 
> 时间：2012-06-12T19:17:52.560
> 
> 标签：sql-server, sql-server-2008, tsql, join

使用 SQL Server 2008。

我有多个位置，每个位置都包含多个部门，每个部门都包含多个项目，这些项目可以有零到多个扫描。每个扫描都与一个特定的操作相关，该操作可能有也可能没有截止时间。每个项目还属于属于特定作业的特定包。每个作业包含一个或多个包含一个或多个项目的包。

```
+=============+                         +=============+
|  Locations  |                         |     Jobs    |
+=============+                         +=============+
      ^                                       ^
      |                                       |
+=============+     +=============+     +=============+
| Departments | <-- |    Items    | --> |   Packages  |
+=============+     +=============+     +=============+
                          ^
                          |
                    +=============+     +=============+
                    |    Scans    | --> | Operations  |
                    +=============+     +=============+ 
```

我试图做的是获取按位置和扫描日期分组的作业的扫描计数。棘手的部分是我只想按每个项目的日期/时间计算第一次扫描，其中操作的截止时间不为空。（注意：扫描肯定不会按表中的日期/时间顺序排列。）

我的查询让我得到了正确的结果，但是当 Job 的 Items 数量达到 75,000 左右时，它的速度非常慢。我正在推动一个新的服务器——我知道我们的硬件缺乏——但**我想知道我在查询中是否有什么事情也让它陷入困境**。

从我可以从执行计划中收集到的信息来看，查询的大部分成本似乎都在子查询中，以查找每个项目的第一次扫描。它对操作表索引（ID，Cutoff）进行索引扫描（0%），然后是惰性假脱机（19%）。它对 Scans 表索引（ItemID、DateTime、OperationID、ID）进行索引查找 (61%)。随后的嵌套循环（内连接）只有 2%，Top 运算符为 0%。（并不是说我真的很了解我刚刚输入的内容，但我正在努力提供尽可能多的信息.​​.....）

这是查询：

```
SELECT
    Departments.LocationID
    , DATEADD(dd, 0, DATEDIFF(dd, 0, Scans.DateTime))
    , COUNT(Scans.ItemID) AS [COUNT]
FROM
    Items           
    INNER JOIN Scans
        ON Scans.ID = 
    (
        SELECT TOP 1
            Scans.ID 
        FROM
            Scans
        INNER JOIN Operations
            ON Scans.OperationID = Operations.ID
        WHERE
            Operations.Cutoff IS NOT NULL
            AND Scans.ItemID = Items.ID             
        ORDER BY
            Scans.DateTime
    )
    INNER JOIN Operations
        ON Scans.OperationID = Operations.ID
    INNER JOIN Packages
        ON Items.PackageID = Packages.ID
    INNER JOIN Departments
        ON Items.DepartmentID = Departments.ID      
WHERE
    Packages.JobID = @ID        
GROUP BY
    Departments.LocationID 
    , DATEADD(dd, 0, DATEDIFF(dd, 0, Scans.DateTime)); 
```

这将返回一个结果样本，如下所示：

```
8   2012-06-08 00:00:00.000 11842
21  2012-06-07 00:00:00.000 502
11  2012-06-12 00:00:00.000 1841
15  2012-06-11 00:00:00.000 4314
16  2012-06-09 00:00:00.000 278
23  2012-06-12 00:00:00.000 1345
6   2012-06-06 00:00:00.000 2005
20  2012-06-08 00:00:00.000 352
14  2012-06-07 00:00:00.000 2408
8   2012-06-11 00:00:00.000 290
19  2012-06-10 00:00:00.000 85
20  2012-06-11 00:00:00.000 5484
7   2012-06-10 00:00:00.000 2389
16  2012-06-06 00:00:00.000 6762
18  2012-06-09 00:00:00.000 4473
14  2012-06-10 00:00:00.000 2364
1   2012-06-11 00:00:00.000 1531
22  2012-06-08 00:00:00.000 14534
5   2012-06-10 00:00:00.000 11908
9   2012-06-12 00:00:00.000 47
19  2012-06-07 00:00:00.000 559
7   2012-06-07 00:00:00.000 2576 
```

这是执行计划（不确定自原始帖子以来我进行了哪些更改，但成本百分比略有不同。瓶颈似乎仍然在同一区域）： ![执行计划](../Images/eba0e6f4e2cf438cff79e5dacdd22936.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:52:30.023

我对将其标记为答案有点怀疑，因为我相信我们仍然可以从查询中挤出一点汁液。但这确实将我的测试运行时间从 22 秒缩短到 6 秒（在 Scans 上添加了索引：OperationID，包括 DateTime 和 ItemID）：

```
WITH CTE AS 
(
    SELECT
        Items.ItemID AS ID          
        , Scans.DateTime AS [DateTime]
        , Operations.Cutoff AS Cutoff           
        , ROW_NUMBER() OVER (PARTITION BY Items.ID ORDER BY Scans.DateTime) AS RN
        FROM
            Items
            INNER JOIN Scans            
                ON Items.ID = Scans.ItemID
            INNER JOIN Operations
                ON Scans.OperationID = Operations.ID
            INNER JOIN Packages
                ON Items.PackageID = Packages.ID
        WHERE
            Operations.Cutoff IS NOT NULL
            AND Packages.JobID = @ID                        
)
SELECT
    Departments.LocationID
    , CTE.DateTime
    , COUNT(Items.ID) AS COUNT
FROM
    Items           
    INNER JOIN CTE
        ON Items.ID = CTE.ID
        AND CTE.RN = 1
    INNER JOIN Packages
        ON Items.PackageID = Packages.ID
    INNER JOIN Departments
        ON Items.DepartmentID = Departments.ID      
WHERE
    Packages.JobID = @ID
GROUP BY
    Departments.LocationID 
    , CTE.DateTime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:15:15.753

很难肯定地说，但这样的事情可能会表现得更好。[我用ROW_NUMBER](http://msdn.microsoft.com/en-us/library/ms186734.aspx)调用替换了您的嵌套查找。原始查询中的问题是嵌套查找 - 它杀死了你。

注意我面前没有SQL，所以我无法测试它，但我*认为*它在逻辑上是等价的。

```
SELECT
    Departments.LocationID
    , DATEADD(dd, 0, DATEDIFF(dd, 0, Scans.DateTime))
    , COUNT(Scans.ItemID) AS [COUNT]
FROM
    Items           
    INNER JOIN Scans
        ON Scans.ItemID = Items.ID
    INNER JOIN Operations
        ON Scans.OperationID = Operations.ID
    INNER JOIN Packages
        ON Items.PackageID = Packages.ID
    INNER JOIN Departments
        ON Items.DepartmentID = Departments.ID      
WHERE
    Operations.Cutoff IS NOT NULL
    AND
    Packages.JobID = @ID
    AND
    ROW_NUMBER () OVER (PARTITION BY Items.ID ORDER BY Scans.DateTime) = 1
GROUP BY
    Departments.LocationID 
    , DATEADD(dd, 0, DATEDIFF(dd, 0, Scans.DateTime)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T23:23:47.223

我很好奇 - 你能运行[CROSS APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)版本吗？

```
SELECT
    Departments.LocationID
    , DATEADD(dd, 0, DATEDIFF(dd, 0, CA_Scans.DateTime))
    , COUNT(CA_Scans.ItemID) AS [COUNT]
FROM
    Items 
    CROSS APPLY
    (
        SELECT TOP 1
            Scans.ID,
            Scans.OperationID,
            Scans.DateTime
        FROM
            Scans
        INNER JOIN Operations
            ON Scans.OperationID = Operations.ID
        WHERE
            Operations.Cutoff IS NOT NULL
            AND Scans.ItemID = Items.ID             
        ORDER BY
            Scans.DateTime
    ) CA_Scans
    INNER JOIN Operations
        ON CA_Scans.OperationID = Operations.ID
    INNER JOIN Packages
        ON Items.PackageID = Packages.ID
    INNER JOIN Departments
        ON Items.DepartmentID = Departments.ID      
WHERE
    Packages.JobID = @ID        
GROUP BY
    Departments.LocationID 
    , DATEADD(dd, 0, DATEDIFF(dd, 0, CA_Scans.DateTime)); 
```

# c# - 如何根据下拉值动态创建 VB.NET 控件

> ID：11003348
> 
> 赞同：1
> 
> 时间：2012-06-12T19:18:09.033
> 
> 标签：c#, asp.net, vb.net

请提供任何有用的链接。

我需要在 VB.NET 中创建一个示例问题类型 Web 表单，它允许用户执行以下操作：

1.  用户从下拉列表中选择控件类型（TextBox、RadioButton、ListBox 等）。
2.  根据 webform 上的控件类型动态生成控件。
3.  它将始终显示文本框（用户写问题的地方）和（生成的控件 - 文本框、单选按钮、列表框等）并将这些值保存到数据库中。

4.  在 Web 表单上显示生成的示例问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:31:34.650

像这样的东西应该可以工作（没有数据库交互；））。

aspx：

```
<asp:DropDownList runat="server" id="TypeDropDown" OnSelectedIndexChanged="OnTypeChanged">
  <asp:ListItem>TextBox</asp:ListItem>
  <asp:ListItem>RadioButton</asp:ListItem>
</asp:DropDownList>
<asp:Panel>
    Question: <asp:TextBox runat="server" ID="Question" /> <br />
    Answer: <asp:PlaceHolder runat="server" ID="Place" />
</asp:Panel> 
```

代码隐藏：

```
protected override void OnInit(EventArgs eventArgs) {
  base.OnInit(eventArgs);
  CreateDynamicControl(); 
}

private void CreateDynamicControl() {
  Place.Controls.Clear();
  Place.Controls.Add(ControlFactory.Create(TypeDropDown.SelectedValue);
}

private void OnTypeChanged(object sender, EventArgs eventArgs) {
  CreateDynamicControl();
} 
```

控制工厂：

```
static class ControlFactory {
  public static Control Create(string type) {
    if ("TextBox".Equals(type))
      return new TextBox();

    if ("RadioButton".Equals(type)) 
      return new RadioButtonList();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:37:31.807

我认为您正在寻找的是一个 DBMS 解决方案，您可以在其中将控件类型保存在数据库中，而不是何时显示您正在查看的类型的页面并使用占位符来生成您需要的内容。这是解释 DBMS 的维基百科链接：[http ://en.wikipedia.org/wiki/Database_management_system](http://en.wikipedia.org/wiki/Database_management_system)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:43:21.807

我使用 DataBinding 使用声明性语法做了类似的事情。

抱歉，代码太长了，但只发布没有嵌套中继器的相关部分可能没有意义。我正在为上下文发布完整的嵌套中继器代码。

在我的设置中，这是一个调查应用程序，带有**问题组**（外部中继器），由一个或多个**问题**（嵌套中继器）组成。

其工作原理的相关部分位于代码示例中的嵌套中继器中。我在标记中拥有所有可用的控件。但是每个的 .Visible 属性是根据 QuestionType 设置的。

```
 <asp:Repeater ID="Repeater1" runat="server">
        <ItemTemplate>
            <div class="questiongroup">
                <asp:HiddenField runat="server" ID="lblQuestionGroupId" Value='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "QuestionGroupId").ToString()) %>'>
                </asp:HiddenField>
                <asp:HiddenField runat="server" ID="hfSortOrder" Value='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "SortOrder").ToString()) %>'>
                </asp:HiddenField>
                <asp:HiddenField runat="server" ID="hdnPointsAwarded" Value='0'></asp:HiddenField>
                <br />
                <h3><asp:Label runat="server" ID="txtQuestionGroupName" MaxLength="50" Columns="50" Text='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "QuestionGroupName").ToString()) %>'></asp:Label>
                </h3>
                Score Section
                <asp:CheckBox runat="server" ID="chkIsScoreSection" Enabled="false" TabIndex="-1"
                    Checked='<%# Convert.ToBoolean(DataBinder.Eval(Container.DataItem, "IsScoreSection")) %>' />
                Minimum required correct answers:
                <asp:Label runat="server" ID="lblMinimumForScore" MaxLength="3" Columns="3" Text='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "CommentsRequiredMinimumYesAnswers").ToString()) %>'></asp:Label>
                  Point Value <asp:Label ID="lblPossiblePoints" runat="server" Text='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "PossiblePoints").ToString()) %>' />
                          <br />
                Group Instructions
                <br />
                <asp:Label runat="server" ID="lblGroupInstructions" TextMode="MultiLine" Columns="50" Rows="3"
                    Text='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "GroupInstructions").ToString()) %>'></asp:Label>
                <br />
                <div class='questionseditor'>
                </div>
                <br />
                <div class="questionsdiv">
                    <asp:Repeater ID="childRepeater" runat="server" DataSource='<%# ((DataRowView)Container.DataItem).Row.GetChildRows("Relation2") %>'>
                        <ItemTemplate>
                        <div class="question">
                            <asp:HiddenField ID="hdnQuestionType" runat="server" Value='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"QuestionTypeId\"]").ToString()) %>' />
                            <asp:HiddenField ID="hdnQuestionId" runat="server" Value='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"QuestionId\"]").ToString()) %>' />
                            <asp:HiddenField ID="hfQuestionSortOrder" runat="server" Value='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"SortOrder\"]").ToString()) %>' />
                            <asp:RequiredFieldValidator SetFocusOnError="True" ID="YesNoForScoreRequiredFieldValidator" runat="server"
                                ControlToValidate="lstYesNoForScore" Display="Dynamic" ErrorMessage="Required<br />"
                                Enabled='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"QuestionTypeId\"]").ToString()) == "1" %>'></asp:RequiredFieldValidator>
                            <asp:RequiredFieldValidator SetFocusOnError="True" ID="MemoRequiredFieldValidator" runat="server" ControlToValidate="txtMemoAnswer"
                                Display="Dynamic" ErrorMessage="Required<br />" 
                                Enabled='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"QuestionTypeId\"]").ToString()) == "2" %>'></asp:RequiredFieldValidator>
                            <asp:RequiredFieldValidator SetFocusOnError="True" ID="NumericAnswerRequiredFieldValidator" runat="server"
                                ControlToValidate="txtNumericAnswer" Display="Dynamic" ErrorMessage="Required<br />"
                                Enabled='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"QuestionTypeId\"]").ToString()) == "3" %>'></asp:RequiredFieldValidator>
                            <asp:RegularExpressionValidator SetFocusOnError="True" Display="Dynamic" runat="server" ID="NumericTextRegexValidator"
                                ValidationExpression="^\d*[0-9](|.\d*[0-9]|,\d*[0-9])?$" Enabled='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"QuestionTypeId\"]").ToString()) == "3" %>'
                                ErrorMessage="*Invalid<br />" ControlToValidate="txtNumericAnswer"></asp:RegularExpressionValidator>
                            <asp:RequiredFieldValidator SetFocusOnError="True" ID="RequiredFieldValidator1" runat="server" ControlToValidate="lstYesNoNonScored"
                                Display="Dynamic" ErrorMessage="Required<br />" Enabled='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"QuestionTypeId\"]").ToString()) == "5" %>'></asp:RequiredFieldValidator>
                            <asp:Label ID="lblQuestionText" runat="Server" Text='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"QuestionText\"]").ToString()) %>'></asp:Label><br />
                            <asp:RadioButtonList runat="server" ID="lstYesNoForScore" RepeatDirection="Horizontal"
                                Visible='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"QuestionTypeId\"]").ToString()) == "1" %>'>
                                <asp:ListItem Text="Yes" Value="1"></asp:ListItem>
                                <asp:ListItem Text="No *" Value="0"></asp:ListItem>
                            </asp:RadioButtonList>
                            <asp:TextBox ID="txtMemoAnswer" runat="server" Visible='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"QuestionTypeId\"]").ToString()) == "2" %>'
                                TextMode="MultiLine" Rows="3" Width="100%"></asp:TextBox>
                            <asp:TextBox ID="txtNumericAnswer" runat="server" Visible='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"QuestionTypeId\"]").ToString()) == "3" %>'
                                cols="5"></asp:TextBox>
                            <uc1:MultipleChoiceControl ID="MultipleChoiceControl1" runat="server" Visible='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"QuestionTypeId\"]").ToString()) == "4" %>'
                                QuestionId='<%# Convert.ToInt32(DataBinder.Eval(Container.DataItem, "[\"QuestionId\"]")) %>' />
                            <asp:RadioButtonList runat="server" ID="lstYesNoNonScored" RepeatDirection="Horizontal"
                                Visible='<%#  Microsoft.Security.Application.AntiXss.GetSafeHtmlFragment(  DataBinder.Eval(Container.DataItem, "[\"QuestionTypeId\"]").ToString()) == "5" %>'>
                                <asp:ListItem Text="Yes" Value="1"></asp:ListItem>
                                <asp:ListItem Text="No" Value="0"></asp:ListItem>
                            </asp:RadioButtonList>
                            <br />
                            </div>
                        </ItemTemplate>
                    </asp:Repeater>
                </div>
                Comments for this Question Group (Required if score not awarded)
                <asp:TextBox ID="txtGroupComments" runat="server" TextMode="MultiLine" Rows="3" Width="100%"></asp:TextBox>
            </div>
        </ItemTemplate>
    </asp:Repeater> 
```

# javascript - Javascript 大于或小于

> ID：11003357
> 
> 赞同：0
> 
> 时间：2012-06-12T19:19:02.277
> 
> 标签：javascript

我根据其他人的建议重写了我昨天提交的代码。我现在有了这个，但似乎仍然无法让它与大于小于一起工作。我可以添加/减去 2 个数字并得到一个有效的答案。但是，我无法让 > < 工作。希望有人可以提供一些额外的帮助，使其保持这种“If 语句”的格式。

```
if ((input.search("what is greater")!= -1) && (input.search(/\d{1,10}/)!=-1) && (input.search(/\d{1,10}/)!=-1)) 
{var numbersInString = input.match(/\d+/g); 
var num1 = parseInt( numbersInString[0], 10 ); 
var num2 = parseInt( numbersInString[1], 10 ); 
if (num1 < num2) document.result.result.value = ""+num1+" is less than "+num2+""; 
if (num1 > num2) document.result.result.value = ""+num1+" is greater than "+num2+""; 
if (num1 = num2) document.result.result.value = "Both numbers are equal"; 
return true;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:26:20.207

听起来您想以两种方式操作数字：

1）您想引用单个字符。

2）您想将该数字与另一个数字进行比较，看看一个是否大于另一个。

如果您有一个名为 的字符串`input`，则可以使用该函数`parseInt(input, 10)`将其从字符串转换为该字符串表示的数字。

如果您只想获取前两个字符，可以使用该`substring`函数。

要记住的重要一点是，对于计算机来说，字符串 '12345' 和数字 12345 是完全不同的。计算机有一组完全不同的操作，它将在每个操作上执行。

另外，@albin 正确指出在您的`if`陈述后放置分号是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:32:27.447

match 方法的输出是一个字符串数组，所以我认为您不是在比较数字而是比较字符串。在比较您的数字之前尝试这样做。

```
var num1 = parseInt( numbersInString[0], 10 );
var num2 = parseInt( numbersInString[1], 10 ); 
```

然后比较num1和num2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:44:56.657

[http://jsfiddle.net/qt3RW/](http://jsfiddle.net/qt3RW/) 简单输入框：​​​​​</p>

```
<input id="input1" value="Is 6 greater than 5"></input> 
```

解析器找到 'Is # 大于 #' 其中 # 是数字并警告此数字：

```
var IsStringValid = $("#input1").val().match(/Is \d greater than \d/g);
alert(IsStringValid);
if(IsStringValid){
    var values = $("#input1").val().match(/\d/g);
    for(var i = 0; i < values.length; i++){
        alert(values[i])
    }
} 
```

​</p>

# objective-c - 为什么这个子视图没有被删除？

> ID：11003363
> 
> 赞同：0
> 
> 时间：2012-06-12T19:19:34.767
> 
> 标签：objective-c, ios, cocoa-touch

IBAction 什么都不做。将“返回”记录到控制台，以便连接正常。当调用 IBAction 时，self.topView 也不执行任何操作

```
-(IBAction)loadSettingsView:(id)sender;

{

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        [[NSBundle mainBundle] loadNibNamed:@"settingsView_iphone" owner:self options:nil]; 
    } else {
        [[NSBundle mainBundle] loadNibNamed:@"settingsView_ipad" owner:self options:nil];
    }
    [self.view addSubview:topView];
}

-(IBAction)loadMainView:(id)sender;
{
    [topView removeFromSuperview];
    NSLog(@"back");

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:34:28.347

我希望我不会在这里做出太多假设，但这应该可以解决您的问题。我假设`topView`是当前班级的成员：

```
-(IBAction)loadSettingsView:(id)sender;

{

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        topView = [[[NSBundle mainBundle] loadNibNamed:@"settingsView_iphone" owner:self options:nil] objectAtIndex:0]; 
    } else {
        topView = [[[NSBundle mainBundle] loadNibNamed:@"settingsView_ipad" owner:self options:nil] objectAtIndex:0];
    }
    [self.view addSubview:topView];
}

-(IBAction)loadMainView:(id)sender;
{
    [topView removeFromSuperview];
    NSLog(@"back");

} 
```

基本上，`loadNibNamed`您使用的方法是返回一个包含 nib 中所有顶级视图的数组。如果你想引用这些视图（这里我假设笔尖中有一个视图），你需要实际分配你的`topView`变量。目前`topView`可能为零，所以你的`removeFromSuperview`电话什么也没做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:02:11.010

资助一个更容易的解决方案。只需在主视图的 nib 中创建一个新视图并将 IBOutlet 附加到它。像梦一样工作。

```
-(IBAction)loadSettingsView:(id)sender;
{
        [self.view addSubview:settingsView];
}

-(IBAction)loadMainView:(id)sender;
{
    [settingsView removeFromSuperview];
} 
```

# python - 这会是惰性评估的合理用例吗？

> ID：11003370
> 
> 赞同：2
> 
> 时间：2012-06-12T19:19:54.797
> 
> 标签：python, youtube-api

我有一个名为 Video 的 python 类，它代表 YouTube 视频。给定 YouTube 视频的 ID，Video 返回一个表示该视频的对象。但是，当第一次创建 Video 对象时，不会查询 YouTube。仅当要求提供需要来自 YouTube 的信息的属性时才会查询 YouTube。以下是它的工作原理：

```
>>> from video import Video
>>> video = Video('B11msns6wPU') 
# 'B11msns6wPU' is the ID of a video
>>> video
Video(youtube_id="B11msns6wPU")
### As of now, no call to YouTube's API has been made
### Next, I ask for the title attribute. The object queries YouTube's API to get 
### this information. In doing so, the object is completely initialized
>>> video.title
u'Badly Drawn Boy - Disillusion (directed by Garth Jennings)'
>>> video.duration
u'275'
# no query was made to the API because the object has been already been initialized 
```

我不确定这在技术上是否是“懒惰的评估”，但它的味道相似。在第一次调用属性之前，不会初始化视频对象。我想知道这种技术是否值得实施。显然，它使我的代码更加复杂。你怎么认为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:30:56.473

这是一种一般性的判断，而不是一个硬性的决定。

如果惰性对象（`Video`类实例）是您的应用程序的核心，那么在执行任何其他操作之前完全初始化它可能是有意义的；如果您的应用没有数据就没有用，请先获取数据。

但是，如果您的应用程序可能有成百上千个这样的`Video`实例，并且大多数都不会被使用，那么在您初始化它们时让用户等待是没有意义的。在这种情况下，将初始化推迟到真正需要时会很有意义。例如，如果您要显示“缩略图墙”显示，您可能需要每个视频和标题的缩略图，但您可能不需要任何其他内容，除非用户单击缩略图。

我确实喜欢一般方法，即使用对象的代码不需要知道或关心对象是否已预先初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T19:33:13.777

这是`lazy loading`. 如果这些属性并不总是需要，那么值得实现，并且从 api 查询它们将是一种浪费。如，我创建了一个`Video`类，但我不需要这些属性。

当类属性需要很长时间来获取/加载时，延迟加载是一个好主意。那么在您的情况下，API 调用是否昂贵，您的课程是否真的需要它`Video`？有关 Video 类的更多信息将有助于了解它是否值得实施。延迟加载只是为了延迟加载会无缘无故地增加代码的复杂性，所以是的，看看是否需要延迟加载很重要。

归根结底，这一切都取决于*您*在应用程序中对 Video 对象所做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:33:38.783

[延迟评估](http://en.wikipedia.org/wiki/Lazy_evaluation)（或[延迟加载](http://en.wikipedia.org/wiki/Lazy_loading)，或[延迟初始化](http://en.wikipedia.org/wiki/Lazy_initialization)）在**后续操作**需要对后端进行更多查询时，或者当请求非常大以至于分块执行时很有用，或者当有很好的机会时你不会使用请求的每个部分...一般来说，它是在急切行为（例如`range()`在 Python 2.x 中）和懒惰行为（`range()`在 Python 3.x 中）之间进行选择。

在这种情况下，似乎无论如何使用视频对象，最终都会发生对*单个*对象的 Youtube API 的调用。

如果你的库支持更复杂的查询或使用，惰性求值可能非常有用。类似于以下内容：

```
>>> video_list = ['B11msns6wPU', 'GuaCaMole', 'OvER9000']
>>> videos = Video.fetch(video_list)
# No API call, yet
>>> videos.filter_by('duration', lambda dur: int(dur) > 200)
# Filter by duration - still no API call
>>> for v in videos.all:
...     # Now the API call is made, and the filtering is done all at once 
```

诚然，我知道我的示例是人为设计的（而且它看起来很像一个 DB 库……），但这就是它的要点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T19:36:41.730

是的，您正在实施惰性评估，并且作为“是否值得”这个问题的其他答案，这取决于数据的使用模式以及您何时想让用户等待。要记住的另一件事是，如果提取视频数据可能需要一段时间，但您相当确定您将需要数据，您可以在另一个执行线程中提取数据以预取它。

实现您使用的惰性评估类型并避免代码复杂性的一种方法是在金字塔库中使用像 @reify 这样的装饰器。查看此博客条目中金字塔库中的 @reify 装饰器，[其中包含底部的 reify 源链接](http://me.veekun.com/blog/2012/05/23/python-faq-descriptors/)

这可能不是您想要实现它的方式，但值得看一下惰性评估的“pythonic”解决方案。

# html - CSS div:hover 排除

> ID：11003371
> 
> 赞同：0
> 
> 时间：2012-06-12T19:19:55.903
> 
> 标签：html, css

我有两个`div`s，一个在另一个里面。当我`hover`在外面的时候，我想改变它的颜色，没问题。但是当我`hover`在里面时，我只想改变它的颜色。这可能吗？换句话说，当`hover`越过内部 div 时，我希望看到红色的“环”。

```
<div id="test"><div></div></div>

#test {
    background-color: red;
    position: relative;
    width: 100px;
    height: 100px;
}
#test:hover {
    background-color: white;
}
#test div {
    background-color: green;
    position: absolute;
    top: 20px;
    left: 20px;
    width: 60px;
    height: 60px;
}
#test div:hover {
    background-color: white;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:23:32.517

不是纯 CSS。如果您将鼠标悬停在一个孩子上，那么您必然将鼠标悬停在其父级上。

然而 CSS4 计划包括一些可能有帮助的东西：

```
#test! div:hover {background-color: red;} 
```

将`!`成为`#test`选择器的主题，因此它将选择`#test`它是否包含 a `div:hover`，并重新为其应用红色背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:28:05.930

不嵌套 div 将起作用。

看到这个[小提琴](http://jsfiddle.net/qCUsy/)：

### HTML：

```
<div id="test"></div>
<div id="ttt"></div> 
```

### CSS：

```
#test {
    background-color: red;
    position: relative;
    width: 100px;
    height: 100px;
}

#test:hover {
    background-color: white;
}

#ttt {
    background-color: green;
    position: absolute;
    top: 20px;
    left: 20px;
    width: 60px;
    height: 60px;
}

#ttt:hover {
    background-color: white;
} 
```

# android - 多个 TextView 更新非常缓慢

> ID：11003375
> 
> 赞同：11
> 
> 时间：2012-06-12T19:20:08.367
> 
> 标签：android, textview, android-service

我有一个服务，它每 0.1 秒向我的 Activity 发送一个 Intent。我用它来更新 Chronometer 的自定义实现。这里一切顺利。当我想更新 Activity 的 Fragment 内的 TableView 中的 14 个 TextView 时，问题就来了。这里的应用程序很慢。

我的 Activity 中从服务接收 Intent 的方法：

```
private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        long milis = intent.getLongExtra("milis",0);
        if( mFragment != null)
        mFragment.Update(milis);
    }
}; 
```

我更新 TextViews 的片段内的代码：

```
public void actualizarTiempoJuego(long milis){
    // Se recuperan los tiempos acumulados y se aumenta la cantidad pasada como parámetro
    for(int i=0;i<7;++i) {
        long mCurrentMilis1 = mVectorMilis1.get(i);
        long mCurrentMilis2 = mVectorMilis2.get(i);
        TextView1 t1 = mListaTitularLayoutLocal.get(i);
        TextView1 t2 = mListaTitularLayoutVisitante.get(i);
        t1.setText(String.value(milis + mCurrentMilis1));
        t2.setText(String.value(milis + mCurrentMilis2));
    }
} 
```

我做错了什么，还是只是我试图在效率方面做一些非常复杂的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T20:52:02.610

@Sherif 提出了一个很好的观点，即隐藏的 alpha 值会使您的应用程序陷入困境。根据您的平台，您可能还需要检查

```
<application android:hardwareAccelerated="true"... /> 
```

您可以研究的另一件可能有助于提高性能的事情是不会触发所有这些 Intent。一旦你开始触发意图，你就会让系统参与进来，并且取决于它们是如何得到解决的，它可能需要一些额外的时间。

对于这个问题，我喜欢使用[Handlers](http://developer.android.com/reference/android/os/Handler.html)。它们比意图更轻。您可能还想查看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。这基本上就像一个线程，但也提供了在 UI 线程上运行的钩子，因此您可以执行后台操作和更新 UI，而无需发布可运行文件。

编辑：最后，您始终可以通过[layoutopt](http://developer.android.com/guide/developing/tools/layoutopt.html)工具运行您的布局。Romain Guy 亲自告诉我，如果你的画太慢，那么你就需要画得更少。只需从分析工具中查看屏幕截图（来自不太理想的视图树，但在最大值范围内）。您可以看到视图绘图占用了多少资源。如果您希望您的应用程序具有响应性，那么尽可能保持精简非常重要。 ![剖析视图绘图资源消耗](../Images/4cbb2a8ba13ff49d4106c4c00be8252a.png)

编辑：它不再被称为 layoutopt，它被称为[lint](http://tools.android.com/tips/lint/)。检查你的 ~/android-sdk/tools/

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T20:44:37.953

我曾经遇到过片段非常慢的情况。

我只是在预测您的片段具有某种 alpha，并且它是在“大量”活动上绘制的。

结论是，每次您设置 textview 的文本时，您的整个视图层次结构都会失效。

碎片似乎有这个缺陷。无论如何，使用一些布局而不是片段并检查它是否仍然“慢”。

* * *

`setText`补充：一个 wrap_content 文本视图会比一个 fill_parent 文本视图造成更多的延迟。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T19:31:34.267

由于使用 TableLayout 和 TextView 进行布局管理，您可能会遇到速度变慢的情况。每次更新其中一个文本时，都必须进行大量的视图测量，以便将字符放在屏幕上的正确位置。你真的应该使用 Traceview 自己分析应用程序来找出答案。更多信息请访问：http: [//developer.android.com/tools/debugging/debugging-tracing.html](http://developer.android.com/tools/debugging/debugging-tracing.html)

对于相同类型的布局（片段> TableLayout> 多个TextViews），我遇到了完全相同的问题。测试您的 TableLayout/TextView 设置是否应该受到责备的一种方法是简单地将所有内容替换为单个 TextView。那可能会运行得很好。然后将您的 14 个视图放入 FrameLayout 或 RelativeLayout。即使它们都重叠，您仍然应该获得不错的性能，因为 TableLayout 视图测量的复杂性才是真正导致速度下降的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T15:47:48.657

*   You can try to declare vars outside the loop :

    ```
    public void actualizarTiempoJuego(long milis){
        // Se recuperan los tiempos acumulados y se 
        // aumenta la cantidad pasada como parámetro

        long mCurrentMilis1;
        long mCurrentMilis2;
        TextView1 t1;
        TextView1 t2;

        for(int i=0;i<7;++i) {
            mCurrentMilis1 = mVectorMilis1.get(i);
            mCurrentMilis2 = mVectorMilis2.get(i);
            t1 = mListaTitularLayoutLocal.get(i);
            t2 = mListaTitularLayoutVisitante.get(i);
            t1.setText(String.value(milis + mCurrentMilis1));
            t2.setText(String.value(milis + mCurrentMilis2));
        }
    } 
    ```

*   And to `setText()` with mixed type, you can try `setText("" + milis + mCurrentMilis2);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T23:58:06.310

正如有人说您可以使用 HardwareAccelerated 但这不是一个很好的解决方案，如果您不能以其他方式解决它，您将浪费内存和 CPU。一个可能更安全的解决方案是减少 TextView 的数量。尝试将 14 减少到 7，它会快两倍。通常很难做到这一点，但如果你将对象放在一个策略位置，如果你用两行创建一个 TextView，那么一对 TextView 可以放在一起。并且不要忘记 findViewById 非常昂贵，如果您将使用视图对象，通常会一次性找到它并保存它的引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T00:20:33.013

基准对于确定缓慢的实际来源总是有用的，但我很有信心表明发送 Intent 可能比更新 14 个 TextView 慢得多。每秒发送 10 个 Intent 表明您做错了 (TM)。这不是他们的目的。

> 我做错了什么，还是只是我试图在效率方面做一些非常复杂的事情？

每秒更新 14 个 TextView 本身并不复杂；您应该能够通过更合适的应用程序设计轻松实现这一目标。[ASyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或[Handler](http://developer.android.com/reference/android/os/Handler.html)作为可能的工具浮现在脑海中，但如果不了解更多关于您正在尝试做什么的信息，就很难知道什么是最好的。

# gcc - 从 a.out 文件中提取全局变量

> ID：11003376
> 
> 赞同：10
> 
> 时间：2012-06-12T19:20:08.697
> 
> 标签：gcc, compiler-construction, cygwin, elf, dwarf

## 编辑（更新的问题）

我有一个简单的 C 程序：

```
 // it is not important to know what the code does you may skip the code 
```

**主程序**

```
#include <bsp.h>

unsigned int   AppCtr;
unsigned char  AppFlag;
int SOME_LARGE_VARIABLE;

static  void  AppTest (void);

void  main (void)
{
    AppCtr  = 0;
    AppFlag = 0;        
    AppTest();
}

static void Foo(void){
    SOME_LARGE_VARIABLE=15; 
}

static  void  AppTest (void)
{
    unsigned int  i;
    i = 0;
    while (i < 200000) {
        i++;
    }

    BSP_Test();      
    SOME_LARGE_VARIABLE=3;    
    Foo();
} 
```

**bsp.c**

```
extern int SOME_LARGE_VARIABLE;
extern unsigned char  AppFlag;

unsigned int long My_GREAT_COUNTER;

void  BSP_Test (void) {
  SOME_LARGE_VARIABLE = 5;
  My_GREAT_COUNTER = 4;
} 
```

（该程序没有做任何有用的事情......**我的目标是提取变量名它们被声明的位置和它们的内存地址**）

当我编译程序时，我得到`a.out`一个包含调试信息的 elf 文件。

5 年前，该公司的某个人在 .net 中编写了一个程序，该程序将从 a.out 文件中获取所有这些信息。这是代码返回的内容：

```
 //  Name          Display Name                    Type      Size     Address 
```

![在此处输入图像描述](../Images/f5ce40abc199f94be2483ea784e212eb.png)

对于这个小程序，它非常适用，也适用于其他大型项目。

该代码有 2000 行长，有几个错误，它不支持 .NET 版本 4。这就是我尝试重新创建它的原因。

* * *

**所以我的问题是**，我迷失了，因为我不知道要采取什么方法来解决这个问题。这些是我一直在考虑的选项：

1.  整理我在第一张图片上展示的程序的错误代码，并尝试查看它的作用以及它如何解析 a.out 文件以获取该信息。一旦我完全理解它，试着弄清楚为什么它不支持版本 3 和 4。

2.  我可以创建正则表达式，所以可以尝试通过执行以下操作在 a.out 文件![在此处输入图像描述](../Images/901111f21e2b9782e1d74a385faf6c00.png) 中查找模式：到目前为止，我能够找到只有一个文件 (main.c) 的模式。但是当有多个文件时，它会变得更加复杂。我还没试过。也许它不会那么复杂，并且有可能找到模式。

3.  安装[Cygwin](http://www.cygwin.com/install.html)以便我可以在 Windows 上使用 linux 命令，例如`objdump`,`nm`或`elfread`. 当我使用这些命令时，我还没有玩够这些命令，例如`readelf -w a.out`我获得了更多我需要的信息。为什么我没有花太多时间使用这种方法有一些缺点：

    *   缺点：在 Windows 上安装 cygwin 需要一些时间，并且在将这个应用程序提供给我们的客户时，我们不希望他们必须安装它。也许有一种方法可以只安装命令 objdump 和 elfread 而不必安装整个东西

    *   优点：如果我们找到正确的命令来使用，我们将不会重新发明轮子并节省一些时间。也许这是解析命令结果的问题，例如`objdump -w a.out`

* * *

如果您想下载 a.out 文件以便在[此处对其进行解析，则它是](http://soundeliverance.com:8080/temp/elf/a.out).

* * *

## 概括

**我将能够在 a.out 文件中获取全局变量。我想知道每个变量是什么类型（int、char、..），它们有什么内存地址，我还想知道在哪个文件上声明了变量（main.c 或 someOtherFile.c）。如果我不必使用 cygwin，我将不胜感激，因为这将使其更易于部署。**由于这个问题要求很多，我试图将其拆分为更多：

*   [objdump/readelf 获取变量信息](https://stackoverflow.com/questions/11039843/objdump-readelf-get-symbol-types)
*   [获取 a.out 文件中符号的位置](https://stackoverflow.com/questions/11038731/get-location-of-symbols-in-a-out-file)

也许我应该删除其他问题。很抱歉是多余的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T19:01:23.597

Here is what I will do. Why reinvent the wheel!

1.  Download linux commands that will be needing on windows from [here.](http://sourceforge.net/projects/mingw/files/MinGW/Base/binutils/binutils-2.22/binutils-2.22-1-mingw32-bin.tar.lzma/)

    on the bin directory there should be: `readelf.exe`

    Note we will not need Cygwin or any program so deploying will be simple!

2.  Once we have that file execute in cmd:

    ```
    // cd "path where readelf.exe is"
    readelf.exe -s a.out 
    ```

    and this is the list that will come out: ![enter image description here](../Images/39fccb6af12e4d10390973ef7e18a565.png)

    so if you take a look we are interested in getting all the variables that are of type OBJECT with size greater than 0.

3.  Once we got the variables we can use the `readelf.exe -w a.out` command to take a look at the tree and it looks like:![enter image description here](../Images/e81e129b4c9e0cde2d62fa97323a1964.png) let's start looking for one of the variable we found on step 2 (SOME_GREAT_COUNTER) Note that at the top we know the location where the variable is being declared, we got more information such as the line where it was declared and the memory address

4.  The last thing we are missing to do is to get the type. if you take a look we see that the type is = <0x522>. What that means is that we have to go to 522 of the tree to get more info about that time. If we go to that part this is what we get:![enter image description here](../Images/78004beeb0ece1f498372e387dec4ce9.png) From looking at the tree we know that SOME_LARGE_VARIABLE is of type unsigned long

# google-apps-script - 谷歌电子表格脚本

> ID：11003384
> 
> 赞同：0
> 
> 时间：2012-06-12T19:20:36.413
> 
> 标签：google-apps-script

我正在使用谷歌文档电子表格制作活跃客户列表。我正在尝试创建一个脚本，当输入完成日期时，该行（所有客户信息）将转移到另一张表和/或删除。我启动了一个脚本，但它不能正常工作。

```
function myFunction() {
'var ssdate = spreadsheet.column B'
// the "if" clause : if (date = 1) {
// the "then" clause : then ( move row to sheet 2)
} 
```

由于这是我第一次，我确信这需要一些工作，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:51:50.693

请尝试以下示例：

```
var ddate = Utilities.formatDate(new Date(), "GMT", "MM-dd-yy");

function checkDate(){

  var sheet = SpreadsheetApp.getActiveSpreadsheet();
  var rows = sheet.getDataRange();
  var rowsNumber = rows.getNumRows();
  var column = sheet.getDataRange();
  var values = column.getValues();

  for (var i = 1; i <= rowsNumber -1; i++){

    var customerData = values[i];
    var customerDate = customerData[2];
    var myRow = Math.round(i) +1;
    var conCustomerDate = Utilities.formatDate(new Date(customerDate), "GMT", "MM-dd-yy");

    if (conCustomerDate > ddate){

      sheet.getRange("D" + myRow).setValue("OK");

    } 

    else {

      sheet.getRange("D" + myRow).setValue("Old");

    }

  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T14:02:56.127

[首先阅读 Google Apps 脚本教程](https://developers.google.com/apps-script/articles.html)和[指南](https://developers.google.com/apps-script/guide)要容易得多。他们会给你一个更好的快速开始。

# string - 在 Perl 中提取文本并写入新文件

> ID：11003385
> 
> 赞同：1
> 
> 时间：2012-06-12T19:20:40.953
> 
> 标签：string, perl, file, text, extract

简而言之，我想使用 Perl 从文件中提取文本并将该文本保存到新文件中。

到目前为止，这是我的代码：

```
#!/usr/local/bin/perl

use warnings;
use strict;
use File::Slurp;
use FileHandle;

use Fcntl qw(:DEFAULT :flock :seek); # Import LOCK_* constants

my $F_IN = FileHandle->new("<$ARGV[0]");
my $F_OUT = FileHandle->new(">PerlTest.txt");

while (my $line = $F_IN->getline) {
    $line =~ m|foobar|g;
    $F_OUT->print($line);
    # I want to only copy the text that matches, not the whole line.
    # I changed the example text to 'foobar' to avoid confusion.
}

$F_IN->close();
$F_OUT->close(); 
```

显然，它正在复制行。如何从文件中提取和打印特定文本，而不是整行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:27:54.510

如果每行只能发生一次：

```
while (<>) {
   print "$1\n" if /(thebigredpillow)/;
} 
```

如果每行可能发生多次：

```
while (<>) {
   while (/(thebigredpillow)/g) {
      print "$1\n";
   }
} 
```

用法：

```
script file.in >file.out 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T19:27:32.663

您可以使用捕获括号来获取匹配的字符串：

```
while (my $line = $F_IN->getline) {
    if ($line =~ m|(thebigredpillow)|) {
        $F_OUT->print("$1\n");
    }
} 
```

请参阅[perldoc perlre](http://perldoc.perl.org/perlre.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:30:15.553

```
#!/usr/local/bin/perl

use warnings;
use strict;
use IO::All;

my @lines = io($ARGV[0])->slurp;

foreach(@lines) {
    if(/thebigredpillow/g) {
        $_ >> io('PerlTest.txt');
    }
} 
```

# php - 在 php 代码 drupal 7 中使用 drupal_add_js

> ID：11003389
> 
> 赞同：2
> 
> 时间：2012-06-12T19:20:55.773
> 
> 标签：php, javascript, drupal, drupal-7

我想将 javascript 添加到单个页面。在使用现有模块的 php 块代码中

```
<?php 
   drupal_add_js('js/leagueSettings.js');
?> 
```

我在这个特定模块所在的 modules/php 目录中有一个 js 文件夹。

我尝试过使用脚本标签也无济于事。

```
<script type = "text/javascript" src = "js/leagueSettings.js"></script> 
```

LeagueSettings.js 很简单

```
(function ($) {
alert('here');
})(jQuery); 
```

我只用警报试过了。没关系。我曾尝试使用**DIR**魔法常数代替路径.. 什么都没有。

有什么我想念的吗？

编辑---解决方案

```
//becuase the php block is 'php' module...
drupal_add_js(drupal_get_path('module', 'php') .'/js/leagueSettings.js'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:29:50.530

路径`js/leagueSettings.js`可能不起作用。

`drupal_add_js(drupal_get_path('module', 'your_module_name')`

如果你的 js 在一个模块中，你可以使用上面的语法添加它。

`<script>`标签也是如此。`src`需要是正确的。

如果您还没有查看[https://drupal.stackexchange.com/ ，它也是一个很好的资源。](https://drupal.stackexchange.com/)

# sql - 使用创建表 SQL Server 2008 的多个 SELECT 语句

> ID：11003390
> 
> 赞同：1
> 
> 时间：2012-06-12T19:20:59.570
> 
> 标签：sql, tsql, database-design

我有一张大表，将美国所有的州和县信息集中在一个地方。

表结构是

```
 fullCode   countyName   stateName   stateCode
1   01001        nowhere      AL          01
2   01003        somewhere    AL          01
3   02100        other        AK          02 
```

状态代码始终由`fullCode`列中的前两个数字标识。这些对于每个州都是独一无二的，因此没有一个州将有超过一组前两个数字。县代码的最后三个数字。

我使用下面的查询创建了一个包含所有状态的表

```
select distinct stateName, statecode
into tblStates
from tblCounties 
```

我很好奇如何一举为每个州的县创建一张表格（如果可能的话）。就像是

```
select distinct  fullCode, countyName
into tblAlabamaCounties
from tblCounties
where stateName='AL' 
```

但对于每个州。当然，我必须处理所有的 PK/FK 问题。只是想知道可能用于执行此类操作的方法。

编辑：如果这是一个设计错误，我还能如何关联特定州的县名？我可以把所有东西都放在一张大桌子上，但这似乎是糟糕的设计，想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:48:53.050

您可能会考虑以下更好的设计：

状态表：

```
STATE_ID
STATE_ABBREV
STATE_NAME 
```

县表：

```
COUNTY_ID
STATE_ID
COUNTY_NAME 
```

样本数据：

```
STATE_ID   STATE_ABBREV   STATE_NAME
01         AL             Alabama
02         AK             Alaska

COUNTY_ID  STATE_ID       COUNTY_NAME
001        01             Nowhere
003        01             Somewhere
100        02             Other 
```

您的状态表的主键将是 STATE_ID
您的县表的主键将是 COUNTY_ID ---AND---- STATE_ID (COMBINED)

使用这种结构，您只有 2 个表，您可以使用它们轻松复制原始“大”表以及“完整代码”字段。此外，基于这种（更简单/更正常）的结构，更新、查询、创建过程、函数等将变得容易得多。

FWIW

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:53:45.717

If you use Oracle, you could create a PL-SQL procedure where you create first of all the different tables, and then you only have to populate the data into the new tables recently create. IF you use PL SQL procedure you could do it.

On the other hand you can create the different tables, and create a triggers before insert, and you will insert the data in the specific table before insert in your master table.

Sorry for my English I hope you can understand all and help you.

# regex - Perl 非贪婪匹配

> ID：11003391
> 
> 赞同：-1
> 
> 时间：2012-06-12T19:21:00.237
> 
> 标签：regex, perl, regex-greedy

我只想要捕获到 slash_flash 的第一个模式。

我试过这个：

```
$var1 = slash_flash*_target_bit[*]_slash_hit\n

$var1 =~ s/^(.*)\*?(.*)$/$1/g if ($var1 =~ /\*/); 
```

我得到了整个字符串：

```
> $var1 = slash_flash*_target_bit[*]_slash_hit 
```

注意：$var1 可以以任何开头。所以你不能用特定的词或模式开始模式匹配。这就是我尝试 (.*) 的原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:40:51.853

首先，发布您实际运行的代码。你说的不是真的，因为你发布的甚至没有编译。

继续。

*   `\*?`可以匹配零个字符。
*   `.*`可以匹配零个字符。

所以一旦第一个`.*`匹配整个字符串，`\*?`并且`.*`愉快地匹配零个字符。

也许你想要

```
$var =~ s/^([^*]*)\*.*$/$1/g if ($var1 =~ /\*/); 
```

可以缩短为

```
$var =~ s/^([^*]*)\*.*$/$1/; 
```

甚至到

```
$var =~ s/^[^*]*\K\*.*$//; 
```

# ruby-on-rails - 由于捆绑程序版本冲突，无法激活 rails 3.0.1

> ID：11003395
> 
> 赞同：10
> 
> 时间：2012-06-12T19:21:12.017
> 
> 标签：ruby-on-rails, gem, bundler

所以我跑：

```
$ gem install rails --version 3.0.1

Successfully installed rails-3.0.1
1 gem installed
Installing ri documentation for rails-3.0.1...
Installing RDoc documentation for rails-3.0.1... 
```

然后我得到错误：

```
$ rails -v
/usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:1637:in `raise_if_conflicts': Unable to activate rails-3.0.1, because bundler-1.1.4 conflicts with bundler (~> 1.0.0) (Gem::LoadError)
from /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:746:in `activate'
from /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems.rb:1232:in `gem'
from /usr/local/rvm/gems/ruby-1.9.3-p125@rails3tutorial/bin/rails:18:in `<main>'
from /usr/local/rvm/gems/ruby-1.9.3-p125@rails3tutorial/bin/ruby_noexec_wrapper:14:in `eval'
from /usr/local/rvm/gems/ruby-1.9.3-p125@rails3tutorial/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T19:32:24.793

所以 Rails 3.0.1 需要 Bundler `v1.0.0`- `v1.0.22`（实际上是任何`1.0.x`版本，但不包括 1.1.0），但是当 Rails 启动时，你有一个更新版本的 Bundler。您可以卸载较新版本的 Bundler（尽管这是一种处理问题的糟糕方法），或者由于您使用的是 RVM，因此只需为 Rails 3.0.1 创建一个 gemset。

```
$ rvm gemset create rails_3.0.1
$ rvm gemset use rails_3.0.1
$ gem install rails -v 3.0.1
$ rails -v
3.0.1 
```

*注意：这要求 Bundler 不在`global`您尝试使用的 Ruby 版本的 gemset 中。如果`global`gemset 包含等于或高于 1.1.0 的 Bundler 版本，那么您将收到与以前相同的错误。*

**更新：**关于`~>`RubyGems 版本控制的一点解释可能会很方便。[RubyGems 文档中关于悲观版本约束](http://docs.rubygems.org/read/chapter/16#page74)的部分在涵盖所有内容方面做得非常出色。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T19:33:01.513

您可能需要更新到 bundler 1.1.4。

`gem update bundler`

应该做的伎俩。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T14:42:53.390

这可能是因为 Ruby v1.9.2/3 使用 bundler v1.1.4 而 Rails v3.0.1 需要 bundler v~1.0.0。因此，只需将 Rails 版本更新到 v3.2.6，冲突就解决了。通过匹配 Ruby 和 Rails 版本可以轻松解决这种冲突。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T19:36:32.823

我对mysql有同样的问题。我卸载了 mysql gem 并安装了最新版本的 mysql gem。RVM 好吗？

# java - 为我的游戏添加生命

> ID：11003400
> 
> 赞同：0
> 
> 时间：2012-06-12T19:21:42.500
> 
> 标签：java, android

我想完成几件事。首先是创造生命，从 3 开始。Game Over 0 生命。如果你被鬼击中，就会失去生命。如果跌落到一定距离以下，就会失去生命。

目前，它只是在计算生命，并且不停地变为负数。所以它忽略了我的 checkGameOver

```
public class World {
    public interface WorldListener {
        public void jump();

        public void highJump();

        public void hit();

        public void coin();

        public void dying();
    }

    public static final float WORLD_WIDTH = 10;
    public static final float WORLD_HEIGHT = 15 * 20;
    public static final int WORLD_STATE_RUNNING = 0;
    public static final int WORLD_STATE_NEXT_LEVEL = 1;
    public static final int WORLD_STATE_GAME_OVER = 2;
    public static final Vector2 gravity = new Vector2(0, -12);

    public final Hero hero;
    public final List<Platform> platforms;
    public final List<Spring> springs;
    public final List<Ghost> ghosts;
    public final List<Coin> coins;
    public Castle castle;
    public final WorldListener listener;
    public final Random rand;

    public float heightSoFar;
    public int score;
    public int state;
    public int lives=3;

    public World(WorldListener listener) {
        this.hero = new Hero(5, 1);
        this.platforms = new ArrayList<Platform>();
        this.springs = new ArrayList<Spring>();
        this.ghosts = new ArrayList<Ghost>();
        this.coins = new ArrayList<Coin>();
        this.listener = listener;
        rand = new Random();
        generateLevel();

        this.heightSoFar = 0;
        this.score = 0;
        this.state = WORLD_STATE_RUNNING;
    }

    private void generateLevel() {
        float y = Platform.PLATFORM_HEIGHT / 2;
        float maxJumpHeight = Hero.hero_JUMP_VELOCITY * Hero.hero_JUMP_VELOCITY
                / (2 * -gravity.y);
        while (y < WORLD_HEIGHT - WORLD_WIDTH / 2) {
            int type = rand.nextFloat() > 0.8f ? Platform.PLATFORM_TYPE_MOVING
                    : Platform.PLATFORM_TYPE_STATIC;
            float x = rand.nextFloat()
                    * (WORLD_WIDTH - Platform.PLATFORM_WIDTH)
                    + Platform.PLATFORM_WIDTH / 2;

            Platform platform = new Platform(type, x, y);
            platforms.add(platform);

            if (rand.nextFloat() > 0.9f
                    && type != Platform.PLATFORM_TYPE_MOVING) {
                Spring spring = new Spring(platform.position.x,
                        platform.position.y + Platform.PLATFORM_HEIGHT / 2
                                + Spring.SPRING_HEIGHT / 2);
                springs.add(spring);
            }

            if (rand.nextFloat() > 0.7f) {
                Ghost ghost = new Ghost(platform.position.x
                        + rand.nextFloat(), platform.position.y
                        + Ghost.GHOST_HEIGHT + rand.nextFloat() * 3);
                ghosts.add(ghost);
            }

            if (rand.nextFloat() > 0.6f) {
                Coin coin = new Coin(platform.position.x + rand.nextFloat(),
                        platform.position.y + Coin.COIN_HEIGHT
                                + rand.nextFloat() * 3);
                coins.add(coin);
            }

            y += (maxJumpHeight - 0.5f);
            y -= rand.nextFloat() * (maxJumpHeight / 3);
        }

        castle = new Castle(WORLD_WIDTH / 2, y);
    }

public void update(float deltaTime, float accelX) {
    updatehero(deltaTime, accelX);
    updatePlatforms(deltaTime);
    updateGhosts(deltaTime);
    updateCoins(deltaTime);
    if (hero.state != Hero.hero_STATE_HIT)
        checkCollisions();
    checkGameOver();
    checkFall();
}

private void updatehero(float deltaTime, float accelX) {
    if (hero.state != Hero.hero_STATE_HIT && hero.position.y <= 0.5f)
        hero.hitPlatform();
    if (hero.state != Hero.hero_STATE_HIT)
        hero.velocity.x = -accelX / 10 * Hero.hero_MOVE_VELOCITY;
    hero.update(deltaTime);
    heightSoFar = Math.max(hero.position.y, heightSoFar);
}

private void updatePlatforms(float deltaTime) {
    int len = platforms.size();
    for (int i = 0; i < len; i++) {
        Platform platform = platforms.get(i);
        platform.update(deltaTime);
        if (platform.state == Platform.PLATFORM_STATE_PULVERIZING
                && platform.stateTime > Platform.PLATFORM_PULVERIZE_TIME) {
            platforms.remove(platform);
            len = platforms.size();
        }
    }
}

private void updateGhosts(float deltaTime) {
    int len = ghosts.size();
    for (int i = 0; i < len; i++) {
        Ghost ghost = ghosts.get(i);
        ghost.update(deltaTime);
        if (ghost.state == Ghost.GHOST_STATE_DYING
                && ghost.stateTime > Ghost.GHOST_DYING_TIME) {
            ghosts.remove(ghost);
            len = ghosts.size();
        }
    }
}

private void updateCoins(float deltaTime) {
    int len = coins.size();
    for (int i = 0; i < len; i++) {
        Coin coin = coins.get(i);
        coin.update(deltaTime);
    }
}

    private void checkCollisions() {
        checkPlatformCollisions();
        checkGhostCollisions();
        checkItemCollisions();
        checkCastleCollisions();
    }

    private void checkPlatformCollisions() {
        if (hero.velocity.y > 0)
            return;

        int len = platforms.size();
        for (int i = 0; i < len; i++) {
            Platform platform = platforms.get(i);
            if (hero.position.y > platform.position.y) {
                if (OverlapTester
                        .overlapRectangles(hero.bounds, platform.bounds)) {
                    hero.hitPlatform();
                    listener.jump();
                    if (rand.nextFloat() > 0.5f) {
                        platform.pulverize();
                    }
                    break;
                }
            }
        }
    }

    private void checkGhostCollisions() {
        int len = ghosts.size();
        for (int i = 0; i < len; i++) {
            Ghost ghost = ghosts.get(i);
            if (hero.position.y < ghost.position.y) {
                if (OverlapTester.overlapRectangles(ghost.bounds, hero.bounds)){
                    hero.hitGhost();
                    listener.hit();
                    lives--;
                }
                break;
            } else {
            if(hero.position.y > ghost.position.y) {
                 if (OverlapTester.overlapRectangles(hero.bounds, ghost.bounds)){
                     hero.hitGhostJump();
                     listener.jump();
                     ghost.dying();
                     score += Ghost.GHOST_SCORE;
                 }
                break;
                }
            }
        }
    }

    private void checkItemCollisions() {
        int len = coins.size();
        for (int i = 0; i < len; i++) {
            Coin coin = coins.get(i);
            if (OverlapTester.overlapRectangles(hero.bounds, coin.bounds)) {
                coins.remove(coin);
                len = coins.size();
                listener.coin();
                score += Coin.COIN_SCORE;
            }

        }

        if (hero.velocity.y > 0)
            return;

        len = springs.size();
        for (int i = 0; i < len; i++) {
            Spring spring = springs.get(i);
            if (hero.position.y > spring.position.y) {
                if (OverlapTester.overlapRectangles(hero.bounds, spring.bounds)) {
                    hero.hitSpring();
                    listener.highJump();
                }
            }
        }
    }

    private void checkCastleCollisions() {
        if (OverlapTester.overlapRectangles(castle.bounds, hero.bounds)) {
            state = WORLD_STATE_NEXT_LEVEL;
        }
    }

    private void checkFall() {          
        if (heightSoFar - 7.5f > hero.position.y) {
         --lives;
                    }
    }

        public boolean checkGameOver() {
             --lives;
             return isDead();
        }
        public boolean isDead(){
             return lives<1;
        }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T19:25:33.460

`checkGameOver()`当生命数为零或更少时返回`true`，但你永远不会做任何回应。在该`update`方法中，您将需要以下内容：

```
if (checkGameOver()) {
    /* show a Game Over screen, or something like that */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:25:03.250

看来您忽略了`checkGameOver()`. 如果你打算让它返回一个布尔值来指示游戏是否结束，你可能应该检查它的返回并用它做一些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:26:21.027

checkGameOver() 返回一个布尔值，但你永远不会用这个值做任何事情来结束游戏/程序

# html - HTTP 标头 - 硬刷新 JavaScript/CSS

> ID：11003406
> 
> 赞同：3
> 
> 时间：2012-06-12T19:22:11.327
> 
> 标签：html, http, caching

我最近向我的站点添加了 HTTP 标头，以通知浏览器在每次遇到给定的 JS/CSS URL 时与服务器进行检查。我已经对其进行了测试，并且效果很好；现在所有浏览器都发出条件`GET`请求。

但问题是——人们仍然缓存了旧的标头；标题或多或少告诉浏览器“永远缓存这个；不要费心要求更新！”。这可以通过硬刷新来解决。在我们推出代码后，我不想与每个人交流，请在任何错误页面上按 F5。

是否有任何 HTTP 标头/HTML 元标记我可以放在 HTML 文档本身上说“浏览器，忽略 JS/CSS 文件上的标头并下载所有包含文件的最新版本这一页”？

随着越来越多的人清除缓存或学会自己刷新，这个问题最终会自行解决。但是，我宁愿现在修复它。然后在一个月左右的时间里，我将删除 HTML 级别的标头，以便在我想要的地方进行缓存——基于每个资源。

**编辑：**我不想重命名资源或添加查询参数。这就是我们过去使用的（?v=18、?v=19 等），每次更新资源时增加这个数字是一件苦差事。即使以编程方式进行也不是理想的解决方案。尤其是现在我们的服务器配置正确。在 HTTP 级别上执行此操作更有意义，因此无论您如何访问它，它都可以工作——包括在页面上、直接从地址栏或其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:30:35.897

将参数传递给脚本源，这将强制重新加载脚本......事实上你可以通过版本或类似来做到这一点

`<script src="/test/script/myawesomescript.js?ver=1.0&pwn=yes" ...>`

这对其他用户来说是可行的，而且看起来很简单......当你觉得它已经足够长的时候回到旧的方式。但如果您想强制用户刷新，这将起作用。

此方法用于防止某些框架缓存网页。让我知道你是否成功

[http://css-tricks.com/can-we-prevent-css-caching/——](http://css-tricks.com/can-we-prevent-css-caching/)这里是 css 概念的链接（也应该在 js 中工作）——最大的区别是你不希望它永远缓存，所以不要使用时间戳，像上面一样使用我的风格:)享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:31:46.863

基本上唯一的方法是让浏览器不使用缓存的 URL。

一种方法是在 URL 的末尾使用缓存清除虚拟参数。

`some-name.css?q=1`

这将迫使浏览器重新加载该文件（因为该 URL 不在缓存中），并且下载的文件不会因为您的新标头而被缓存。**但是：**您可能需要无限期地使用这个新名称，因为您不能保证一旦您再次离开 dummy 参数，缓存的版本仍然可以使用。

另一种方法是完全重命名文件。

`my-new-name.css`

# jquery - jQuery 在 keyup() 上更改 input.value 仅适用于 FF 3.6

> ID：11003412
> 
> 赞同：0
> 
> 时间：2012-06-12T19:22:42.357
> 
> 标签：jquery, input, keyup

好的，所以我终于进入了 jQuery，但我希望是让我的函数运行的基本问题。我在一个页面上有 3 个输入字段，其中两个被禁用。我的目标是，当用户在第一个输入字段中输入文本时，其他 2 个字段的值将在 keyup() 上更改为用户在第一个输入字段中输入的值。

我在 jsfiddle.net 上测试了我的函数，然后才能将它放在我的页面上，并且它在所有浏览器中都运行良好，但是一旦我将该函数移动到我的网页并运行它，该函数将不起作用。它似乎可以在 Firefox 3.6 中使用，但之后的任何版本都没有。由于某种原因，它也不能在 chrome 或 IE 中工作。

[jsfiddle 演示](http://jsfiddle.net/qrLV3/)

jQuery

```
$(document).ready(function () {
    var $title2 = $("#title2"),
        $title3 = $("#title3");
    $("#cheader").keyup(function () {
        $title2.val(this.value);
        $title3.val(this.value);
    });
    $("#cheader").blur(function () {
        $title2.val(this.value);
        $title3.val(this.value);
    });​
}); 
```

CSS

```
.nobox {
border: none;
text-align: center;
color: #000;
background-color: #fff;
text-decoration: underline; 
font-weight: bold;
font-size: 14px;
} 
```

HTML

```
<input type="text" onClick="if(this.value=='Click Here To Enter Text'){this.value=''}else{this.value=this.value}" onBlur="if(this.value==''){this.value='Click Here To Enter Text'}" style="width:250px;" class="nobox" value="Click Here To Enter Text" maxlength="35" id="cheader"/>

<input type="text" style="width:250px;" class="cheader nobox" value="Click Here To Enter Text" id="title2" disabled disabled="disabled"/>​

<input type="text" style="width:250px;" class="cheader nobox" value="Click Here To Enter Text" id="title3" disabled disabled="disabled"/>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:26:43.657

我更改`$(document).ready(function () {`为`$(function() {`，现在在所有浏览器上一切正常。不太清楚为什么，但它现在可以工作了：D

```
$(function() {
var $title2 = $("#title2"),
    $title3 = $("#title3");

$("#cheader").keyup(function() {
    $title2.val(this.value);
    $title3.val(this.value);
});
$("#cheader").blur(function() {
    $title2.val(this.value);
    $title3.val(this.value);
}); 
```

# sql - 如果 Column1 不为空，则按 Column1 排序，否则按 Column2 排序

> ID：11003413
> 
> 赞同：23
> 
> 时间：2012-06-12T19:22:47.270
> 
> 标签：sql, postgresql, sql-order-by

有没有一种方法可以在 sql 中组合`ORDER BY`和`IS NULL`，以便如果列不为空，我可以按列排序，但如果为空，则按另一列排序？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-12T19:25:03.673

就像是：

```
ORDER BY CASE 
    WHEN Column1 IS NOT NULL THEN Column1
    ELSE Column2
END 
```

和写法一样：

```
ORDER BY COALESCE(Column1, Column2) 
```

两者都应该在任何健全的 RDBMS 中工作。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-12T19:28:44.353

尝试这个

```
 ORDER BY COALESCE(fieldA, fieldB); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:24:49.333

您可以尝试以下方法：

```
ORDER BY ISNULL(firstField, secondField) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T19:34:38.347

我没有任何可以测试它的 Tables atm，但这可能有效，至少它在没有可用数据的情况下有效：

```
SELECT * FROM table1
LEFT JOIN table2 ON table1.id = table2.id 
WHERE 1 
ORDER BY IF( table2.id, table1.id, table1.name ) 
```

另外我不知道如果 table2.id 有时为空，订单会是什么样子，看起来很不稳定。

# java - mvn gae：部署？

> ID：11003414
> 
> 赞同：0
> 
> 时间：2012-06-12T19:22:51.593
> 
> 标签：java, playn

我正在尝试将我的 PlayN 游戏部署到 Google Appengine。使用 gae 插件。

[http://code.google.com/p/maven-gae-plugin/](http://code.google.com/p/maven-gae-plugin/)

```
mvn -f html/pom.xml gae:deploy 
```

但它不起作用！得到这个 ..

```
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Memory HTML 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] >>> maven-gae-plugin:0.9.2:deploy (default-cli) @ memory-html >>>
Downloading: http://forplay.googlecode.com/svn/mavenrepo/memory/memory-core/1.0-SNAPSHOT/maven-metadata.xml
Downloading: https://oss.sonatype.org/content/repositories/snapshots/memory/memory-core/1.0-SNAPSHOT/maven-metadata.xml
Downloading: http://forplay.googlecode.com/svn/mavenrepo/memory/memory-core/1.0-SNAPSHOT/memory-core-1.0-SNAPSHOT.pom
Downloading: https://oss.sonatype.org/content/repositories/snapshots/memory/memory-core/1.0-SNAPSHOT/memory-core-1.0-SNAPSHOT.pom
[WARNING] The POM for memory:memory-core:jar:1.0-SNAPSHOT is missing, no dependency information available
Downloading: http://forplay.googlecode.com/svn/mavenrepo/memory/memory-core/1.0-SNAPSHOT/memory-core-1.0-SNAPSHOT.jar
Downloading: https://oss.sonatype.org/content/repositories/snapshots/memory/memory-core/1.0-SNAPSHOT/memory-core-1.0-SNAPSHOT.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.508s
[INFO] Finished at: Tue Jun 12 21:16:27 CEST 2012
[INFO] Final Memory: 7M/82M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project memory-html: Could not resolve dependencies for project memory:memory-html:war:1.0-SNAPSHOT: Could not find artifact memory:memory-core:jar:1.0-SNAPSHOT in fo
rplay-legacy (http://forplay.googlecode.com/svn/mavenrepo) -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

这是什么意思？有什么问题？

--

编辑：

这是我的[/html/pom.xml](http://pastebin.com/UAdP4tLy)

# java - 两个网卡，选择哪个与每个 Java 应用程序一起使用？

> ID：11003415
> 
> 赞同：0
> 
> 时间：2012-06-12T19:23:00.423
> 
> 标签：java, networking

我有一台带两个网卡的电脑，我使用 htmlunit 进行网络测试，是否有运行 2 个 htmlunit 实例并选择哪个实例使用哪个网卡？

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:36:31.713

绑定到客户端套接字或打开服务器套接字时，指定显式本地 IP 地址以选择适配器。`java.net.NetworkInterface`API 提供了枚举适配器并获取其 IP 的方法

# bash - 使用 xargs 调用 shell 函数

> ID：11003418
> 
> 赞同：221
> 
> 时间：2012-06-12T19:23:12.483
> 
> 标签：bash, sh, xargs

我正在尝试使用 xargs 并行调用更复杂的函数。

```
#!/bin/bash
echo_var(){
    echo $1
    return 0
}
seq -f "n%04g" 1 100 |xargs -n 1 -P 10 -i echo_var {} 
exit 0 
```

这将返回错误

```
xargs: echo_var: No such file or directory 
```

任何关于如何使用 xargs 来完成此任务的想法或任何其他解决方案都将受到欢迎。

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2012-06-12T19:26:02.587

导出函数应该这样做（未经测试）：

```
export -f echo_var
seq -f "n%04g" 1 100 | xargs -n 1 -P 10 -I {} bash -c 'echo_var "$@"' _ {} 
```

您可以使用内置`printf`而不是外部`seq`：

```
printf "n%04g\n" {1..100} | xargs -n 1 -P 10 -I {} bash -c 'echo_var "$@"' _ {} 
```

此外，使用`return 0`和`exit 0`类似的方式会掩盖其前面的命令可能产生的任何错误值。此外，如果没有错误，这是默认设置，因此有些多余。

@phobic 提到 Bash 命令***可以***简化为

```
bash -c 'echo_var "{}"' 
```

`{}`直接在里面移动。**但**正如@Sasha 所指出的，它很**容易受到命令注入的影响。**

下面是一个为什么你**不应该使用**嵌入格式的例子：

```
$ echo '$(date)' | xargs -I {} bash -c 'echo_var "{}"'
Sun Aug 18 11:56:45 CDT 2019 
```

**为什么不**的另一个例子：

```
echo '\"; date\"' | xargs -I {} bash -c 'echo_var "{}"' 
```

这是**使用安全格式输出的**内容：

```
$ echo '$(date)' | xargs -I {} bash -c 'echo_var "$@"' _ {}
$(date) 
```

这相当于使用[参数化](https://blog.codinghorror.com/give-me-parameterized-sql-or-give-me-death/)SQL[查询](https://en.wikipedia.org/wiki/Prepared_statement)来避免[注入](https://rosettacode.org/wiki/Parametrized_SQL_statement)。

我在`date`这里使用命令替换或转义引号，而不是`rm`Sasha 评论中使用的命令，因为它是非破坏性的。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-09-01T06:47:45.967

使用 GNU Parallel 看起来像这样：

```
#!/bin/bash
echo_var(){
    echo $1
    return 0
}
export -f echo_var
seq -f "n%04g" 1 100 | parallel -P 10 echo_var {} 
exit 0 
```

如果您使用版本 20170822，您甚至不必`export -f`运行此命令：

```
. `which env_parallel.bash`
seq -f "n%04g" 1 100 | env_parallel -P 10 echo_var {} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-06-22T11:56:25.947

像这样的东西也应该起作用：

```
function testing() { sleep $1 ; }
echo {1..10} | xargs -n 1 | xargs -I@ -P4 bash -c "$(declare -f testing) ; testing @ ; echo @ " 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-02T01:01:11.627

也许这是不好的做法，但是如果您在`.bashrc`脚本或其他脚本中定义函数，则可以使用以下设置包装文件或至少函数定义`allexport`：

```
set -o allexport

function funcy_town {
  echo 'this is a function'
}
function func_rock {
  echo 'this is a function, but different'
}
function cyber_func {
  echo 'this function does important things'
}
function the_man_from_funcle {
  echo 'not gonna lie'
}
function funcle_wiggly {
  echo 'at this point I\'m doing it for the funny names'
}
function extreme_function {
  echo 'goodbye'
}

set +o allexport 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-09-11T16:26:31.287

看来我不能发表评论:-(

我想知道重点

```
bash -c 'echo_var "$@"' _ {}
vs
bash -c 'echo_var "{}"' 
```

第一个将 {} 替换为 bash 的 arg，而第二个替换为函数的 arg。示例 1 没有扩展 $(date) 的事实只是一个副作用。

如果您不希望函数 args 展开，请使用单引号而不是双引号。为避免嵌套混乱，请使用双引号（在另一个上展开 args）

```
$ echo '$(date)' | xargs -0 -L1 -I {} bash -c 'printit "{}"'
Fri 11 Sep 17:02:24 BST 2020

$ echo '$(date)' | xargs -0 -L1 -I {} bash -c "printit '{}'"
$(date) 
```

# opengl-es - 使用opengl后CCTransitionPageTurn不起作用

> ID：11003419
> 
> 赞同：0
> 
> 时间：2012-06-12T19:23:15.747
> 
> 标签：opengl-es, cocos2d-iphone

我正在使用 CCTansitionPageTurn 在场景之间翻转。它适用于大多数场景，但我有一个用 gl 绘制的着色场景。着色开始后，CCTransitionPageTurn 不适用于任何场景过渡，即使是之前效果很好的过渡。（我仍然可以移动到另一个场景就好了，但是翻页效果坏了）。

我认为这可能与在调用转换之前更改 gl 状态有关，但恢复默认 gl 状态不起作用。代码中可能有很多地方存在问题，但这里有一些我正在使用 gl 的代码。

```
/* ColoringGameScene : CCScene, which handles drawing menus and other cool UI things */

// In init
CCLayerColor *layer = [CCLayerColor layerWithColor:ccc4(255, 255, 255, 255)];
[self addChild:layer];
TouchDraw *drawObj = [TouchDraw node];
[drawObj setDrawPoints:_drawPoints];
[layer addChild:drawObj z:999];

// In -(void)ccTouchMoved:(UITouch *) touch withEvent:(UIEvent *)event
// drawPoints, an array of points to draw is updated.  drawObj has a reference to this array

/* In TouchDraw : CCNode, which handles gl drawing */

// In init
glEnable(GL_LINE_SMOOTH);
glEnable(GL_POINT_SMOOTH);
glEnable(GL_POINT_SMOOTH_HINT);
glEnable(GL_LINE_SMOOTH_HINT);
glHint(GL_POINT_SMOOTH_HINT,GL_NICEST);
glTexEnvf(GL_TEXTURE_ENV,GL_TEXTURE_ENV_MODE,GL_BLEND_COLOR); 
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
glLineWidth(8);
glPointSize(8);

// elsewhere

-(void)drawCircle:(CGPoint)center radius:(float)r arc:(float)a line:(NSUInteger)segs lineToCenter: (BOOL)drawLineToCenter
{
int additionalSegment = 1;
if (drawLineToCenter)
    additionalSegment++;

const float coef = 2.0f * (float)M_PI/segs;

GLfloat *vertices = calloc( sizeof(GLfloat)*2*(segs+2), 1);
if( ! vertices )
    return;

for(NSUInteger i=0;i<=segs;i++)
{
    float rads = i*coef;
    GLfloat j = r * cosf(rads + a) + center.x;
    GLfloat k = r * sinf(rads + a) + center.y;

    vertices[i*2] = j * CC_CONTENT_SCALE_FACTOR();
    vertices[i*2+1] =k * CC_CONTENT_SCALE_FACTOR();
}
vertices[(segs+1)*2] = center.x * CC_CONTENT_SCALE_FACTOR();
vertices[(segs+1)*2+1] = center.y * CC_CONTENT_SCALE_FACTOR();

glDisable(GL_TEXTURE_2D);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);
glDisableClientState(GL_COLOR_ARRAY);

glVertexPointer(2, GL_FLOAT, 0, vertices);  
glDrawArrays(GL_TRIANGLE_FAN, 0, (GLsizei) segs+additionalSegment);

// restore default state
glEnableClientState(GL_COLOR_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);
glEnable(GL_TEXTURE_2D);    

free( vertices );
}

-(void)draw
{
[super draw];

    if ([drawPoints count])
{
        for(int i = 0; i < [drawPoints count]; i += 4)
        {
            CGPoint point0 = CGPointFromString([drawPoints objectAtIndex:i]);
            CGPoint point1 = CGPointFromString([drawPoints objectAtIndex:i+1]);
            CGPoint point2 = CGPointFromString([drawPoints objectAtIndex:i+2]);
            CGPoint point3 = CGPointFromString([drawPoints objectAtIndex:i+3]);

            glColor4f(255.0f/255.0f, 0.0f/255.0f, 0.0f/255.0f, 1.0f); // Red
            glLineWidth(8);
            glPointSize(8);

            // various calls to drawCirle and ccDrawCubicBezier

            //default
            glColor4f(0.0f/255.0f, 0.0f/255.0f, 0.0f/255.0f, 0.0f);
        }
    }
} 
```

让我知道更多代码是否会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:06:47.097

我是 openGL 的初学者，但据我所知，所有程序的 OpenGL 设置都是相同的。您自己绘图的某些代码应该在此设置中更改某些内容。这可能是你的 eshue 的原因。我不能告诉你更多，但你应该解决这个问题。

# ffmpeg - ffmpeg 找不到编码器 libvpx

> ID：11003420
> 
> 赞同：52
> 
> 时间：2012-06-12T19:23:25.370
> 
> 标签：ffmpeg, libvpx

当我跑步时

```
ffmpeg -y -i test.mov -threads 8 -f webm -aspect 16:9 -vcodec libvpx -deinterlace -g 120 -level 216 -profile 0 -qmax 42 -qmin 10 -rc_buf_aggressivity 0.95 -vb 2M -acodec libvorbis -aq 90 -ac 2 OUTPUT_FILE.webm 
```

它返回一个错误说`Unknown encoder 'libvpx'`

我通过 macports 安装了 libvpx、libvorbis、libogg 和 ffmpeg

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-11-29T15:42:55.747

您的 macports 配置不是使用 libvpx 构建的。尝试卸载 ffmpeg 并使用[Homebrew](http://mxcl.github.com/homebrew/ "家酿")安装软件包而不是 macports：

```
brew install ffmpeg --with-libvpx

or

brew reinstall ffmpeg --with-libvpx 
```

然后你的命令应该工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-14T05:21:26.440

我不确定如何以及是否可以更改 Macports 上的默认配置。无论如何，您可以通过手动方式进行操作。

打开终端并 cd 到您的首选目录。在安装之前，请检查您是否安装了 ffmpeg，安装位置和版本。使用`which ffmpeg`,`port uninstall ffmpeg`然后`which ffmpeg`再次验证 ffmpeg 是否已正确卸载。

从以下位置下载源代码：

```
git clone https://github.com/FFmpeg/FFmpeg ffmpeg 
```

cd 到 ffmpeg 目录

```
cd ffmpeg 
```

使用您的配置进行配置和制作，使用“./configure --help”获取有关可能配置的信息

```
./configure --extra-cflags=-I/opt/local/include --extra-ldflags=-L/opt/local/lib --enable-gpl --enable-version3 --enable-nonfree --enable-libvpx --enable-libvorbis 
```

我建议添加额外的 c/ld 标志，因为 /opt/local/ 是默认的 macport 安装目录。

制作，安装ffmpeg

```
make
sudo make install 
```

这些步骤中有很多后备，如果您有任何问题，请在评论中询问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-24T04:50:27.490

由于从源代码构建 ffmpeg 的所有依赖项在 OS X 上是一场噩梦。要让它正确构建需要几天的时间。

不要打扰。

[相反，只需从https://www.ffmpeg.org/download.html](https://www.ffmpeg.org/download.html)下载静态二进制文件并将其复制到 /usr/local/bin

# iphone - 在 IOS 5 中发送异步调用

> ID：11003423
> 
> 赞同：0
> 
> 时间：2012-06-12T19:23:41.797
> 
> 标签：iphone, xcode, ios5, nsurlconnection

我如何将 url 发送到服务器以在我的数据库中添加一些东西？我在 ios 4 中使用 NSURLConnection 进行异步调用，但从 ios 5 开始，此方法不再存在。苹果说我应该使用：

```
sendAsynchronousRequest:queue:completionHandler: 
```

但我不知道如何实现这一点，只向我的服务器发送一个 url 而对返回的数据不做任何事情？或者如何在 ios 5 中发送异步调用

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:32:25.007

```
NSURL *url = [NSURL URLWithString:urlString];

NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];

NSOperationQueue *queue = [[NSOperationQueue alloc] init];

[NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)

{
     NSLog(@"%@", data);
}]; 
```

# javascript - JSON 是否应该包含空值

> ID：11003424
> 
> 赞同：95
> 
> 时间：2012-06-12T19:23:45.430
> 
> 标签：javascript, json, null, undefined

我正在创建一个以 JSON 形式返回结果的 API。当值为 null 时，是否应在结果中包含键是否有当前最佳实践？例如：

```
{
    "title":"Foo Bar",
    "author":"Joe Blow",
    "isbn":null
} 
```

或者

```
{
    "title":"Foo Bar",
    "author":"Joe Blow"
} 
```

由于第二个较小，我倾向于这种风格，但我不确定是否有首选风格。从客户的角度来看，这两种风格似乎在功能上是等效的。各有优劣？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-08-22T22:24:40.913

我喜欢始终明确地包含 null ，因为它具有意义。省略一个属性会留下歧义。

只要您与服务器的协议就上述任何协议达成一致，上述任何一项都可以工作，但如果您从服务器传递空值，我相信这会使您的 API 在以后更加灵活。

还应该提到，javascript 的 hasOwnProperty 函数可以让您进一步了解。

```
/* if true object DOES contain the property with *some* value */
if( objectFromJSON.hasOwnProperty( "propertyName" ) )

/* if true object DOES contain the property and it has been set to null */
if( jsonObject.propertyName === null )

/* if true object either DOES NOT contain the property
   OR
   object DOES contain the property and it has been set to undefined */
if( jsonObject.propertyName === undefined ) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-12T19:27:39.027

第二个将节省少量带宽，但如果这是一个问题，您还可以使用索引数组而不是用键填充 JSON。显然，`["Foo Bar","Joe Blow"]`比你现在拥有的要短得多。

在可用性方面，我认为它没有任何区别。在这两种情况下，`if(json.isbn)`都会跳到`else`. 通常不需要区分`null`(no value) 和`undefined`(no given value)。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-06-12T19:25:23.103

在 JavaScript 中，`null`意味着与`undefined`.

您的 JSON 输出应反映您的应用程序在使用 JSON 数据的特定上下文中使用和需要的内容。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-06-12T19:25:53.263

如果有任何需要区分`null`和`undefined`因为它们在 Javascript 中有两种不同的含义，你绝对应该包括它。您可以`null`将属性视为未知或无意义`undefined`的含义，以及属性不存在的含义。

另一方面，如果没有人需要做出这种区分，那就继续吧，把它排除在外。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-18T07:51:01.963

当 JSON 用作 API 数据载体时，是否存在 null 或空（未定义）值没有区别。可能，空的更好，因为我们节省了一些有效载荷大小。

当您想手动编辑某些内容时，JSON-config 文件会出现差异。最好有空值而不是未定义的道具。这样，您将给出有关配置道具存在的提示。

# javascript - 如何使用 MVC3 Razor 在 _layout.cshmtl 上创建悬停下拉操作链接

> ID：11003426
> 
> 赞同：0
> 
> 时间：2012-06-12T19:23:52.853
> 
> 标签：javascript, html, css, asp.net-mvc-3

我有一个像这样水平显示的导航菜单。

```
 <div id="menucontainer">
                <ul id="menu">
                    <li>@Html.ActionLink("Home", "Index", "Home")</li>
                    <li>@Html.ActionLink("About Us", "About_Us", "Home")</li>
                    <li>@Html.ActionLink("What We Do", "What_We_Do", "Home")</li>
                    <li>@Html.ActionLink("FAQ's", "Answers_To_Questions", "Home")</li>
                    <li>@Html.ActionLink("Deed Transfer Gurantee's", "Deed_Transfer_Guarantee", "Home")
                    </li>
                    <li>@Html.ActionLink("Power Point", "Index", "Home")</li>
                    <li>@Html.ActionLink("Get Help", "Index", "Home")</li>
                    <li>@Html.ActionLink("Mortgage Cancellation", "Index", "Home")</li>
                    <li>@Html.ActionLink("Contact", "Index", "Home")</li>
                </ul>
            </div> 
```

我正在寻找一种方法来创建一个只有在特定链接被鼠标悬停时才可见的下拉链接。当 Deed_Transfer_Guarantee 悬停在上方时，我需要 Deed_Transfer_Guarantee ActionLink 来显示另一个 ActionLink。我还没有找到一个明确的例子。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:28:20.843

检查[这个](http://api.jquery.com/hover/)jquery 示例。您所要做的就是将“ `<span> ***</span>`”替换为超链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:36:57.313

这可能会有所帮助：

```
$("#menu li a").each(function(){
     var $this = $(this);
     $("<a></a>").html($this.html()).attr("href",$this.attr("href")).addClass("dropdown").slideUp(0).appendTo($this);
}).hover(function(){
    $("a",$(this)).slideDown(500);        
}
,function(){
     $("a",$(this)).slideUp(500);      
}); 
```

然后你需要一些CSS：

```
#menu li>a{position:relative;}
#menu li a a.dropdown {position:absolute;left:0px;top:100%;} 
```

我认为这可以完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:39:35.173

我认为使用新的 li 标签会给你一个下拉菜单，而不是在线 jquery 示例中的“滑出”。这基本上是大黄蜂的答案。

```
<script> 
$(document).ready(function(){

$("#Deed Transfer Gurantee's").hover(function(){
 $(this).append($('<li>@Html.ActionLink(@*whatever parameters you need*@)</li>'));
    });
 });
</script> 
```

# cocos2d-iphone - Cocos2D 2.0 - 使用 CCSpriteBatchNode、CCMenuItem 和 CCmenu

> ID：11003430
> 
> 赞同：1
> 
> 时间：2012-06-12T19:24:28.277
> 
> 标签：cocos2d-iphone

我正在尝试通过使用 CCSpriteBatchNode 来减少 OpenGL 调用的数量和内存使用量。

我需要使用以下代码创建一个 CCMenu：

```
CCSpriteBatchNode *batchNode = [CCSpriteBatchNode batchNodeWithFile:@"atlasGeral.png"];

CCSprite *inputNormal = [CCSprite spriteWithSpriteFrameName:@"normalInput.png"];
CCSprite *inputPressed = [CCSprite spriteWithSpriteFrameName:@"PressedInput.png"];
[batchNode addChild:inputNormal];
[batchNode addChild:inputPressed];

CCMenuItem *input = 
    [CCMenuItemSprite itemWithNormalSprite:inputNormal
                           selectedSprite:inputPressed
                                   target:self 
                                 selector:@selector(InputMenu:)];
CCMenu *mInputMenu = [CCMenu menuWithItems:input, nil]; 
```

这是灾难性的崩溃，消息**Assertion failure in -[CCMenuItemSprite addChild:z:tag:]**

任何线索？顺便说一句，有人可以创建或指向一些教程，可以体面地解释如何将这个 CCSpriteBatchNode 与这些其他元素一起使用，如 CCMenus、CCMenuItems 和其他美女？Cocos2D 几乎没有关于所有最重要特性的文档。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:05:53.340

好吧，inputNormal 和 inputPress 精灵是批处理节点的子节点。因此，当您尝试再次将它们作为子节点添加到另一个节点后代时，coco 会抱怨，因为它们已经有了父节点。恐怕做不到。imnsho，批处理节点被严重高估了。改进增益只能在极少数和有限的用例中获得。

同样，直接来自 CCMenuItemSprite 代码（版本 1.0.1）

```
-(void) setNormalImage:(CCNode <CCRGBAProtocol>*)image
{
    if( image != normalImage_ ) {
        image.anchorPoint = ccp(0,0);
        image.visible = YES;

        [self removeChild:normalImage_ cleanup:YES];
        [self addChild:image];

        normalImage_ = image;
    }
} 
```

menuitem 尝试将（已经是子）精灵添加到自身。没有豆子。

# sql - 日期之间的 SQL - 格式化问题？

> ID：11003431
> 
> 赞同：0
> 
> 时间：2012-06-12T19:24:33.383
> 
> 标签：sql, date, format, ms-access-2007, between

我正在尝试使用 BETWEEN 函数提取日期，但想知道格式是否有所不同。现在日期的格式是“mm/dd/yyyy”。我见过很多格式为“yyyy/mm/dd”的示例。我可以使用我现在拥有的格式提取数据，还是需要转换格式？感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:30:06.350

我想你想要的是：

```
Select EmailAddress,Birthday From table1 Where Birthday Between to_date('01-01-1946','MM-DD-YYYY') AND to_date('01-01-1988','MM-DD-YYYY'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:33:15.070

between 子句根本不应该有任何日期格式。

如在

```
BETWEEN start_dt AND end_dt 
```

# regex - django URL 正则表达式可选匹配（tastypie）

> ID：11003432
> 
> 赞同：1
> 
> 时间：2012-06-12T19:24:43.203
> 
> 标签：regex, django, tastypie

我正在使用[tastepie](http://django-tastypie.readthedocs.org/)为我的应用程序提供API。我更喜欢没有尾部斜杠的 URL。我更喜欢`/api/v1/entry/set/1;3`而不是`/api/v1/entry/set/1;3/`. 我已经关闭了 django 的[APPEND_SLASH](https://docs.djangoproject.com/en/dev/ref/settings/#append-slash)并打开了[TASTYPIE_ALLOW_MISSING_SLASH](http://django-tastypie.readthedocs.org/en/latest/settings.html#tastypie-allow-missing-slash)。

这很好用，除了 get_multiple (/set)，它的文档中的 sweetpie 注释不能在没有尾部斜杠的情况下工作。sweetpie 代码中的 URL 正则表达式是：

```
# Due to the way Django parses URLs, ``get_multiple`` won't work without
# a trailing slash.
...
url(r"^(?P<resource_name>%s)/set/(?P<%s_list>\w[\w/;-]*)/$" %
             (self._meta.resource_name, self._meta.detail_uri_name),
             self.wrap_view('get_multiple'), name="api_get_multiple"),
... 
```

我已经证实这是真的。如果启用了 APPEND_SLASH，则匹配良好，但更改`/api/v1/notes/set/2;1`上述正则表达式以使其与模式不匹配。`/api/v1/notes/set/2;1/``/``/?`

当我尝试`re`手动使用模块时，模式匹配正确。为什么 django 不匹配没有斜杠的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T00:11:35.083

这已得到修复。我的[拉取请求](https://github.com/toastdriven/django-tastypie/pull/527)于 2012 年 6 月 14 日被合并。

# windows - Spy++(Spyxx) 的命令行模拟

> ID：11003438
> 
> 赞同：1
> 
> 时间：2012-06-12T19:24:52.807
> 
> 标签：windows, dialog, spy++

我正在寻找 Spy++(Spyxx) 的命令行模拟。

在输出中，我希望窗口控件（按钮、复选框等）列表像树一样。

例如：

> > [CalcFrame]计算器[CalcFrame]...[按钮]MC
> > 
> > [CalcFrame]计算器[CalcFrame]...[按钮]=
> > 
> > [CalcFrame]计算器[CalcFrame]...[按钮]1
> > 
> > [CalcFrame]计算器[CalcFrame]...[按钮]2
> > 
> > ... 很快

有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-27T21:11:24.957

合理的要求！看起来 NirSoft 的免费软件 GUIPropView [https://www.nirsoft.net/utils/gui_prop_view.html](https://www.nirsoft.net/utils/gui_prop_view.html)可能会得到你想要的。查看网页上的**保存命令行选项。**（当然，它显示“GUI”，但如果您在命令行上提供保存选项，它会创建文件并在没有 UI 的情况下退出。）

# mysql - 如何在 MySQL 'insert' 语句中使用 'select'

> ID：11003442
> 
> 赞同：19
> 
> 时间：2012-06-12T19:25:08.957
> 
> 标签：mysql, select, insert

我正在尝试将其他行插入到需要从另一个表中检索值的表中。下面是一个示例查询：

```
insert into a.grades (rollno, grade)
values(select rollno from b.students where ssn=12345, 'A'); 
```

`b.students`表结构为`rollno, ssn, name`。

我知道上面的查询是错误的。有没有办法在插入行时从其他表中检索 1 个值？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-12T19:27:33.787

```
INSERT INTO a.grades (rollno, grade)
    SELECT rollno, 'A' FROM b.students WHERE ssn = 12345; 
```

一些 DBMS 会接受以下内容，并在 SELECT 语句周围加上一组额外的括号：

```
INSERT INTO a.grades (rollno, grade)
   VALUES((SELECT rollno FROM b.students WHERE ssn = 12345), 'A'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T19:27:13.510

insert into 和 select 中的列必须相等

```
INSERT INTO grades (field1, field2)
  SELECT field1, field2 from students where ssn=12345; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-18T10:23:11.133

来自两个不同数据库的表！

## 数据库1 - 人

## Database2 - 订单

*   表 - per_details
*   表 - or_details

这里是数据库 2 下使用的插入查询！

```
INSERT INTO `or_details`(`per_name`) VALUES ( (SELECT person.per_details.per_name from person.per_details WHERE person.per_details.id=1001) ); 
```

# stl - D STL Containers Phobos - 如何使用范围？

> ID：11003443
> 
> 赞同：3
> 
> 时间：2012-06-12T19:25:14.463
> 
> 标签：stl, range, d

我找不到任何关于如何将范围与容器结合使用的好的文档。我正在尝试使用给定的 .insertAfter() 函数将元素插入到 SList 中。虽然它需要一个范围，但我不知道如何检索它。

有人可以发布一个或两个如何使用这个记录不充分的功能的例子吗？

这是容器的 D 文档 - [http://dlang.org/phobos/std_container.html](http://dlang.org/phobos/std_container.html)

我也读过范围可以像 c++ 迭代器一样使用。如果这是真的，我如何在循环中使用范围？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T19:50:52.830

使用切片运算符 ( `[]`) 获取容器的范围

要遍历容器，您可以执行以下操作：

```
foreach(el;container[]){

} 
```

范围有一个front属性，它是当前指向的元素，范围的popFront将范围移动到下一个元素，空表示范围是否在末尾

上面的 foreach 循环相当于

```
for(auto range=container[];!range.empty;range.popFront()){
    auto el = range.front;

} 
```

插入到你需要做的列表中间

```
container.insertAfter(take(container[],5),element); 
```

在最后插入它

```
container.insertAfter(container[],element); 
```

# c# - c#中的真假测验

> ID：11003446
> 
> 赞同：0
> 
> 时间：2012-06-12T19:25:21.673
> 
> 标签：c#

我正在用 C# 构建一个自动 guiz 生成器，其中从用户那里获取 pdf 文件并生成 MCQS 填空和真假。我完成了 MCQS 和填空这两个模块，但是在随机生成真假值时遇到了问题。

所以我的问题是：我怎样才能随机生成真假值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T19:27:59.910

```
public bool GetRandomBoolean(Random rnd)
{
    return rnd.Next(0, 2) == 0;
} 
```

[http://msdn.microsoft.com/en-us/library/system.random.next](http://msdn.microsoft.com/en-us/library/system.random.next)

**编辑**：请注意，您不应以这种方式使用此方法：

```
for(int i = 0; i < 1000; i++)
{
    bool randomBool = GetRandomBoolean(new Random());
} 
```

这将始终生成相同的“随机”布尔值，因为它是在同一时间*[播种的。](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)*相反，您应该以这种方式重用随机实例 fe：

```
var rnd = new Random();
for(int i = 0; i < 1000; i++)
{
    bool randomBool = GetRandomBoolean(rnd);
} 
```

# android - 谷歌地图的自定义交通层

> ID：11003448
> 
> 赞同：7
> 
> 时间：2012-06-12T19:25:23.327
> 
> 标签：android, google-maps-api-3, traffic

我一直在尝试在我的应用程序中显示谷歌地图交通层，根据我的研究，它应该在设置后显示

```
 mapView.setTraffic(true); 
```

但是，对于我的 MapActivity，我无法让它出现。

经过一些研究，我发现谷歌地图 API 至少不支持我所在地区（巴西圣保罗）的交通层，而不是通过使用他们的 API，因为如果我使用谷歌地图，可以检查我所在地区的交通层本身。

我的主要问题是：是否可以使用我自己的数据库为 Google Maps 显示的地图上的交通状况创建某种自定义交通图层？我如何根据交通状况绘制街道？我认为叠加层不足以完成这项工作。

有什么想法吗 ？

Edit1：仍在研究这个，也许唯一的方法是尝试最小化地图，使用自定义叠加层并提供标签来解释每个叠加层？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T00:52:53.757

我希望我可以发表评论而不是回答，但我仍然没有这种权力。

我猜测 Google 与为圣保罗市提供交通数据的公司之间的许可协议不允许第三方（即使用 Maps API 的开发人员）使用。[这是我为在圣保罗的谷歌地图](https://maps.google.com.br/maps?q=s%C3%A3o%20paulo&hl=pt-BR&ie=UTF8&ll=-23.54896,-46.642284&spn=0.022188,0.037465&sll=-22.89531,-47.030197&sspn=0.356758,0.599442&hnear=S%C3%A3o%20Paulo&t=m&z=15&layer=t)上有交通数据而提出的唯一合理的解释，但在 Google 自己的[Maps V3 API 交通层示例中却没有](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-traffic)

所以我认为唯一的选择是你提到的那个。如果您拥有自己的包含交通数据的数据库，则可以创建自己的`[Overlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Overlay)`子类，覆盖 `draw` 在街道上绘制的方法。您必须使用`MapView.getProjection()`来获取`Projection`对象，因此您可以将坐标映射到像素上`MapView`以绘制交通指标。

我希望我有所帮助。

# php - 指针 - 函数内部丢失的全局变量值

> ID：11003451
> 
> 赞同：-1
> 
> 时间：2012-06-12T19:25:34.620
> 
> 标签：php

请看下面的代码：

```
global $global_p, $global_var;
$global_var="lorem";
$global_p=&$global_var;

function myfunc () {
    global $global_p, $global_var;
    var_dump($global_p);
    var_dump($global_var);
}

myfunc(); 
```

输出：

对于 var_dump($global_p) - NULL

对于 var_dump($global_var) - string(5) “lorem”

为什么 var_dump($global_p) - NULL ？

如何在全球范围内保持价值？

提前致谢。

如果我将 $global_p 作为函数参数传递 - 它可以工作。但我只需要 $global_p 作为全局变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:16:19.593

我得到了正确的输出。

> 字符串（5）“lorem”字符串（5）“lorem”

# c++ - Boost.Python 包装器中的纯虚拟重载运算符

> ID：11003452
> 
> 赞同：0
> 
> 时间：2012-06-12T19:25:40.510
> 
> 标签：c++, boost, boost-python

我正在为抽象基类编写一个包装类，该基类有几个纯虚方法和一个重载运算符，如果我使用重载运算符编译，我会收到以下错误：

```
cannot allocate an object of abstract type 
```

即使我在包装类中实现了重载运算符，Boost.Python 仍然坚持认为它没有实现，有什么线索吗？

这就是我的代码的样子：

```
//abstract base class
class Test
{
    public:
    virtual void start() = 0;
    virtual void stop() = 0;
    virtual bool operator==(const Test rhs) = 0;
};

//wrapper class
struct TestWrapper: Test, wrapper<Test>
{
    public:
    void start()
    {
        this->get_override("start")();
    }
    void stop()
    {
        this->get_override("stop")();
    }

    bool operator==(const Test& rhs)
    {
        return this->get_override("operator==")(rhs);
    }

};

//boost python module
class_<TestWrapper, boost::noncopyable>("Test")
    .def("start", pure_virtual(&Test::start) )
    .def("stop", pure_virtual(&Test::stop) )
    .def("operator==", pure_virtual(&Test::operator==))
; 
```

编辑：我什至不确定这是正确的方法，我在文档中没有看到任何这样的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:29:26.297

你有两个不同的签名：

```
class Test
{
    public:
    virtual void start() = 0;
    virtual void stop() = 0;
    virtual bool operator==(const Test rhs) = 0;  // takes rhs by value
}; 
```

在派生类中：

```
bool operator==(const Test& rhs)   // takes rhs by reference
{
    return this->get_override("operator==")(rhs);
} 
```

因此，您实际上并没有从基础实现纯虚拟，而是定义了一个新函数。

# css - 比迪文字显示

> ID：11003460
> 
> 赞同：0
> 
> 时间：2012-06-12T19:26:07.910
> 
> 标签：css, jsp, struts2, bidi

我们希望在我们的应用程序中显示文本，有时同时包含 rtl 和 ltr。我能够确定文本的语言，并且可以根据语言切换 dir=ltr 或 dir=rtl。

当同一个句子既有英语又有阿拉伯语文本时，就会出现问题，在这种情况下，我的语言检测检测到阿拉伯语（因为主要语言）并且选择了 dir=rtl。我怎样才能显示这些混合句子

问候， 罗希特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:06:10.390

该`dir`属性设置方向中性文本的方向性。它不影响拉丁或阿拉伯字母的正常文本；他们遵循其固有的强方向性。好吧，至少他们应该这样做。浏览器有错误，*如果*您知道应该设置哪个方向，设置`dir`可能会有所帮助。此外，设置设置整体布局方向；例如，如果您有阿拉伯文本，其中包含一些英文文本（在最简单的情况下，示意性地，Ar1 后跟 En 后跟 Ar2），您应该设置正确（在示例中，首先是 Ar1，在右边，然后En 到它的左边，然后是 Ar2 最后，即最左边）。*`dir``dir=rtl`*

 *但是，当涉及到像括号这样的方向不明确的字符时，就会出现问题，例如，当阿拉伯文本中的英文文本具有“Hello world (42).”时。在带有 的块内`dir=rtl`，它被渲染为“(Hello world (42 .”)</p>

为了解决这个问题，您还需要识别英语片段，并将其包装在您为其设置嵌入方向性的元素中：

```
<style>
.ltr { unicode-bidi: embed; direction: ltr; }
</style>
[...]
<p dir=rtl>
مرحبا العالم. <span class=ltr>Hello world (42).</span> وكان هذا الاختبار.</p> 
```*

# asp.net - 在所有 asp.net 页面中都没有看到 Google 共享链接

> ID：11003461
> 
> 赞同：0
> 
> 时间：2012-06-12T19:26:14.883
> 
> 标签：asp.net, .net

我通过 txt 文件将 Google+ Share 放在我的网站中。意味着页面（通过 javascript）读取 txt 文件，然后将其放在某个位置。
我的 Default.aspx 页面一切顺利。
当我想在其他页面（如“产品”）上冲浪时，我看到了所有链接（它们工作正常，但 Google+ 共享没有锯切。
我真的不知道我的问题表达是否正确，这就是我为什么提供网站[http://www.panos-oliveoil.gr](http://www.panos-oliveoil.gr)，任何人都想亲眼目睹。
我还放了 google+ 行：

```
<div class="g-plus" data-action="share"></div> 
```

分别在我的“products.aspx”页面中，并且无法正常工作。

我使用的脚本是：

```
 <div id="usefulliks"  style="text-align:left; color:Black;">
  <script type="text/javascript">
  var doc = "useful_links.txt";
  var path = "../pages/announce/";
  var finallinks;
  var txtLinksFile = new XMLHttpRequest();
  txtLinksFile.open("GET", path + doc, true);
  txtLinksFile.onreadystatechange = function () {
  if (txtLinksFile.readyState === 4) {  // Makes sure the document is ready to parse.
  if (txtLinksFile.status === 200) {  // Makes sure it's found the file.
  finallinks = txtLinksFile.responseText.split("\n");
  document.getElementById("usefulliks").innerHTML = finallinks;
                                                }
                                            }
                                        }
  txtLinksFile.send();
  </script>
  </div> 
```

该脚本适用于其他文件以及所有页面中的“company_announce”。
而且它在那个特定的 txt 文件中也能正常工作（关于其他链接）。
我真的无法理解它的错误是什么。
我这么说是因为我不是 javascript 方面的专家。事实上我是一个新的学习者。

最后我发现 Google+

```
<div id="Div1" xml:lang="en" runat="server" class="g-plus" data-action="share"></div> 
```

仅在 Default.aspx 页面处于活动状态时才有效...
有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:49:19.007

您在页面上有脚本错误。你可以在萤火虫中看到它。摆脱那些错误。这些错误会阻止 google+ 按钮呈现，因为按钮是通过脚本呈现的。看图片

![在此处输入图像描述](../Images/b14f11b2667ef6dfd890ff1f215b4129.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:14:15.473

最后是……Google+ 仅在 Default.aspx 处于活动状态且不在任何其他页面中时才起作用。
我把它放在母版页的页脚上，它仅在默认页面处于活动状态时才有效....

# sqlite - sqlite3_exec 返回 SQLITE_BUSY 时如何安全地重试不透明查询？

> ID：11003465
> 
> 赞同：0
> 
> 时间：2012-06-12T19:26:32.360
> 
> 标签：sqlite, transactions

我正在运行一个看起来像这样的查询：

```
ATTACH 'db2' as db;
BEGIN TRANSACTION; 
...
END TRANSACTION; 
```

我必须这样做，因为在事务中附加是错误的。

如果在发出上述查询时另一个连接已经在运行任何类型的查询，则会出现此问题。然后整个查询似乎失败，返回 SQLITE_BUSY。

为了解决这个问题，我睡了一会儿，然后重试交易。但是，现在我收到错误“无法在事务中附加数据库”。为什么会这样？尽管返回 SQLITE_BUSY，原始附加是否成功？如果是这样，那为什么我没有得到“数据库 db2 已在使用中”呢？还是尽管返回了 SQLITE_BUSY，但之前的事务仍然打开？这对我来说没有意义，查询失败繁忙，所以交易不应该被打开。但还能是什么呢？

一般来说，执行查询的程序不知道查询是什么，它只是一个包装器。因此，我无法将查询分成两部分，一部分用于附加数据库，另一部分用于执行其余的查询。但我不确定这是否是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:37:34.073

我还没有弄清楚*为什么*会发生这种情况，但我发现一个令人满意的解决方案是在返回 SQLITE_BUSY 后调用 sqlite3_close() 然后调用 sqlite3_open() 。这消除了前一个查询的重试可能绊倒的任何未决条件。

# facebook-authentication - 无效的访问令牌

> ID：11003466
> 
> 赞同：2
> 
> 时间：2012-06-12T19:26:34.613
> 
> 标签：facebook-authentication

这是一个过时的问题，所以我试图删除它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:53:07.850

这似乎是因为一个错误。就我而言，情况变得最糟糕，几个小时内无法与 Facebook 建立联系。但现在这两个问题都解决了。相关的错误是 [http://developers.facebook.com/bugs/179301482177807?browse=search_4fd8b6bc806f30603159377](http://developers.facebook.com/bugs/179301482177807?browse=search_4fd8b6bc806f30603159377) http://developers.facebook.com/bugs/367369176650486?browse=search_4fd8b7298e1870748624294

# ruby-on-rails - 两个不同页面的两个不同 create.js.erb 文件（Ruby on rails）

> ID：11003476
> 
> 赞同：0
> 
> 时间：2012-06-12T19:27:28.160
> 
> 标签：ruby-on-rails, ajax

在我的应用程序中，我有无需重新加载即可创建的评论。

**评论控制器**

```
 def create
    ...
    @comment.save 
    respond_to do |format|
      format.html 
      format.js
    end
  end 
```

**创建.js.erb**

```
$("#id").html("<%= escape_javascript(render(:partial => @comments)) %>"); 
```

评论可以发布在两个页面上，这两个页面都使用 create.js.erb。我**只**希望第一页使用*create,js,erb*，而另一个页面使用*anothercreate.js.erb* 我该怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:14:10.947

您可以使用`render`指定要渲染的视图

```
respond_to do |format|
  format.html 
  format.js {render "anothercreate.js.erb" }
end 
```

此链接包含有关渲染的更多信息，以及您可以编写调用以`render`使其使用正确视图的所有不同方式：http: [//guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

# android - 如何在android中的按钮之间绘制连接线

> ID：11003479
> 
> 赞同：1
> 
> 时间：2012-06-12T19:27:36.893
> 
> 标签：android, button, drawing, lines

我刚开始在android中编程，我想画一条线来连接我点击的按钮。我有一个 gridLayout，其中有很多在主 XML 文件中定义的按钮。我想从第一个点击按钮的中心画一条直线到我按下的下一个按钮，依此类推（有时在我点击的第一个按钮处结束，所以它有一些形状）。我对画布、动画进行了大量研究，但不知道从哪里开始。任何帮助将不胜感激 - 谢谢。

RG

PS我最终想为连接线制作动画，但首先要做的是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:26:12.250

进行绘图的最佳方法是覆盖`draw`您的`GridLayout`. 值得注意的是，不是该`onDraw`方法，因为该方法在您的子视图绘制*之前*被调用，因此会将您的线条放入背景中。记得在绘制*之前*调用 super 方法。

在第一次布局传递之后（即`onLayout`至少被调用一次之后）按钮的位置应该被初始化。`getLeft`您可以通过对它们调用等来获取它们与父级的相对位置`getTop`。您可以使用它来计算它们的中心坐标。

您将不得不以`GridLayout`某种方式告诉您在哪些按钮上画线。最简单的方法可能是给每个按钮一个`OnClickListener`，并告诉它们的父级 ( `getParent`) 它已被单击，因此应该相应地开始绘制线条，例如通过构建一组带有单击按钮坐标的线条对象。要在每次单击后强制重绘，`GridLayout`您可以调用`invalidate`它。

# c# - 复制图片框 C#

> ID：11003481
> 
> 赞同：0
> 
> 时间：2012-06-12T19:27:39.067
> 
> 标签：c#, winforms

我有两组图片框`Pic_1 Pic_2 ...`和另一组：`Pic_1_copy, Pic_2_copy, ...`.

例如，我想要 3 份或更多份`Pic_1`. 所以：`Pic_1_copy_1, Pic_1_copy_2, Pic_1_copy_3.`

有没有什么简单的方法不用弄乱代码来做到这一点？而不是在代码中这样做：

```
Pic_1.Image = new Bitmap(Logo);
Pic_1_copy_1.Image = Pic_1.Image; 
Pic_1_copy_2.Image = Pic_1.Image;
Pic_1_copy_3.Image = Pic_1.Image;
      ...= Pic_1.Image; 
```

我搜索了 的事件`Picturebox`，但找不到类似：ImageChanged Event..

编辑：

所以我问是否有任何选项可以创建新的 Picturebox 并将 Pic_1 中的图像分配给它。因此，当 Pic_1 图像发生变化时，这个新的图片框会自动将其图像更改为来自 Pic_1 的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:46:12.957

我也没有找到任何事件，我不知道这是否是最好的方法，但我会尝试使用[LoadCompleted](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.loadcompleted.aspx)事件。

这意味着您将不得不尝试使用 LoadAsync 方法。

另一种方法是使用 Location 属性来更改图片，并且为此您有一个事件。

您可以尝试的另一件事是创建一个新类并从 PictureBox 类派生。然后您可以创建一个用于设置 Image 的事件（通过在新类上包装 Image 属性）

**更新：**经过一番搜索，我发现：[PictureBox 控件是否有图像更改事件？](https://stackoverflow.com/questions/7551339/is-there-an-event-for-an-image-change-for-a-picturebox-control)

# asp.net - 如有必要，捕获每个请求并在同意的情况下重定向到页面？

> ID：11003486
> 
> 赞同：0
> 
> 时间：2012-06-12T19:28:00.763
> 
> 标签：asp.net, .net, asp.net-mvc, httpwebrequest

**你好，**

我有一个 ASP.NET MVC 网站，最终用户可以在其中创建帐户。但是，我确实需要他们在他们第一次登录时同意，如果没有，那么他们在登录时应该无法访问该站点上的任何其他网页。

这可能吗，如果可以，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:32:06.477

一种简单的方法是创建自定义授权属性。下面的授权属性检查用户是否经过身份验证和授权，如果是，则您已进行 db 调用以了解用户是否已确认，如果未将私有变量设置`isNotConfirmed`为 true，则返回 false。

在`HandleUnauthorizedRequest`你必须检查为什么auth。失败，如果我没有确认，那么您可以将用户重定向到确认页面。

```
public class CustomAuthorize : AuthorizeAttribute
  {
    bool isNotConfirmed = false;

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {      
      if (base.AuthorizeCore(httpContext))
      {
        //if the user is not confirmed set isNotConfirmed true and return false;
        isNotConfirmed = true;

        // else return true;
      }

      return false;
    }

    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
      if (isNotConfirmed)
      {
        filterContext.Result = new RedirectResult("/Confirm");
      }
      else
      {
        base.HandleUnauthorizedRequest(filterContext);
      }
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:33:50.890

最直接的方法是使用 ASP.Net Membership 和 Profile 提供程序。

[Membership Provider](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)提供开箱即用的基础设施来管理用户（密码、密码重置等）。

[Profile Provider](http://msdn.microsoft.com/en-us/library/014bec1k.aspx)允许您[存储有关用户的信息](http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx)，包括他们是否已签署会员协议的标志。

当用户登录时，检查 Profile Provider 以查看他们是否签署了会员协议。如果他们没有，将他们重定向到适当的页面。

**更新**

根据您的评论，您可以执行以下操作：

编辑登录控制器

```
[HttpPost]
[AllowAnonymous]
public ActionResult Login(LogOnModel model, string returnUrl)
....
if (!userHasSignedTheAgreement)
{
    return RedirectToAction("Account", "ViewToAcceptAgreement");
}
else if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
    && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
{
    return Redirect(returnUrl);
}
else
{
    return RedirectToAction("Index", "Home");
}
.... 
```

当他们签署协议时，给他们分配一个额外的角色，比如 ConfirmedUser

然后，在访问受限的控制器中，添加以下内容：

```
[Authorize(Roles = "ConfirmedUser")] 
```

该属性将强制用户必须具有 ConfirmedUser 角色才能使用控制器。

# deployment - nServicebus Web 服务器部署

> ID：11003497
> 
> 赞同：1
> 
> 时间：2012-06-12T19:28:27.687
> 
> 标签：deployment, web, nservicebus

我有一个基本的 nServicebus 3.2.0 设置，带有一个 Web 应用程序端点和一个 dll 端点。它与 nservicebus 分发的异步 Web 应用程序示例非常相似。一切都在我的本地机器上运行。

我正在尝试将 Web 应用程序部署到 Web 服务器并引用在我的本地计算机上运行的 dll 端点。我的“messageEndpointMappings”web.config 条目引用了我的本地机器名称（endpoint =“server@MyMachineName”）。

它目前不会从服务器上的 Web 应用程序将消息发送到我机器上的 dll 端点。我是否需要在服务器上做任何额外的事情才能让这一切正常工作？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:02:00.670

我想到了。我不得不在我的配置中使用 IP 地址而不是机器名。

如果它对其他人有帮助，您需要确保的其他一些事情是：分布式事务服务在所有具有端点的机器上运行，msmq 在所有具有端点的机器上运行。您可以在应用程序部分的事件日志中查看 msmq 错误消息。

# c# - C#中有MulDiv吗？

> ID：11003498
> 
> 赞同：1
> 
> 时间：2012-06-12T19:28:34.883
> 
> 标签：c#

在那儿`MulDiv`

```
WINBASEAPI
int
WINAPI
MulDiv(
    _In_ int nNumber,
    _In_ int nNumerator,
    _In_ int nDenominator
    ); 
```

在 C# 中还是等效的？

还是我应该实施它？

编辑：没有 PInvoking ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-31T17:39:34.390

这是对 Hans Passant 建议的增强，但根据 MSDN 文档包括 +0.5 舍入：

```
public static int MulDiv(int number, int numerator, int denominator)
{
    return (int)(((long)number * numerator + (denominator >> 1)) / denominator);
} 
```

**注意：**此代码使用右移运算符来获得最佳性能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T20:42:59.000

此 api 函数可以追溯到 Windows 版本 3，即 Windows 的 16 位版本。很可能以前，我还不够老。让 C 编译器将两个 16 位数字（两个整数）相乘，得到一个 32 位中间结果并除以一个 16 位数字以获得 16 位结果有点困难。该操作很常见，例如计算字体大小。

微软的一大负担是，一旦他们发布了一个 api 函数，他们就必须*永远*维护它，除非它与操作系统中的必要更改完全不兼容。MulDiv() 没什么大不了的，但是*int*参数确实自动提升到 32 位，这使得该函数几乎完全没有必要。但是为 Win3 编写的程序仍然可以编译，反向兼容是神圣的。

让 api 负担这个有点错误，但动机很强烈，很难将窗口系统塞进 640 KB。公开已经存在的东西，因为操作系统需要它确实有助于减少字节。其他类似的 api 函数是 wprintf()、lstrcpyXxx() 等。Core C 运行时函数，今天*仍然*可用，甚至通过切换到 Unicode 来维护。窗户的考古记录。

pinvoking 没有任何意义，C# 可以毫无困难地做到这一点：

```
public static int MulDiv(int number, int numerator, int denominator) {
    return (int)(((long)number * numerator) / denominator);
} 
```

如果您想要溢出异常，请使用*checked关键字。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:29:56.780

不，这不是开箱即用的。你需要做[PInvoke](http://pinvoke.net)。

你当然可以自己实现它：

```
//truncation is unnecessary if you want to continue using a long
//the truncation can never overflow so it is unchecked
var result = unchecked((int)(nNumber * (long)nNumerator / nDenominator)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-14T16:38:03.447

如果您想明确表示您将竭尽全力处理两个 32 位整数可能产生大于 32 位整数的值的情况，您可以使用 Math.BigMul，然后将结果相除并将其转换回整数。我看到，正如其他答案所述，.NET 对 64 位整数的支持显然提供了 MulDiv 以前需要的所有好处（然后是一些）。

```
int result = unchecked((int)(System.Math.BigMul(nNumber, nNumerator) / nDenominator)); 
```

# javascript - HTML 文本字段限制

> ID：11003499
> 
> 赞同：0
> 
> 时间：2012-06-12T19:28:43.323
> 
> 标签：javascript, html, forms, contact

我是开发网站的新手，我创建了一个包含个人联系方式的表格。

在电子邮件文本字段中，我只想允许带有字符 @ 的电子邮件地址，如果不存在“@”字符，则会显示错误消息。

电子邮件输入的 HTML 代码是：

```
<td class="content"><input name="txtEmail" type="text" class="box" id="txtEmail" size="60" maxlength="100" /></td> 
```

确保输入字段的 Javascript 是：

```
function checkShippingAndPaymentInfo()
{
    with (window.document.frmCheckout) {
        if (isEmpty(txtEmail, 'Please enter your email address')) {
            return false;
        } else {
            return true;
        }
    }
} 
```

上面的代码有效，但没有我要求的限制。我需要的只是验证要在文本输入字段中设置的“@”字符。请有人可以帮我解决这个问题。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:32:50.860

您应该能够使用 Javascript 中的正则表达式来验证电子邮件地址。它将`@`与其他电子邮件限定符一起验证是否存在。我使用[这个stackoverflow问题的以下片段](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

```
function validateEmail(email) { 
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\
".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA
-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T19:34:01.453

替换`type="text"`为`type="email"`

# android - 库文件未在 2.3 中加载但在 4.0 中加载

> ID：11003506
> 
> 赞同：0
> 
> 时间：2012-06-12T19:29:39.517
> 
> 标签：android, android-ndk

我的项目包含一个 lib 文件**libs/armebai/libworkso** ，它在运行 android 4.0 的平板电脑上运行顺畅，但是当我尝试在 2.3 上运行相同的项目时，我的项目在注释掉后崩溃

// System.loadLibrary("work");

在我的代码中，该项目在运行 2.3 的平板电脑上运行，并且仅当我调用项目中定义的任何本机函数时才会崩溃。

**编辑：**

```
08-13 10:54:26.860: E/AndroidRuntime(1757): java.lang.ExceptionInInitializerError 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:33:36.723

重建所有可能的 CPU/ABI 组合。Android 4 经常尝试加载`armeabi-v7a`，而 Android 2.x 对`armeabi`.

为此，请在`jni`文件夹中创建/打开 Application.mk，然后放置以下内容：

```
APP_ABI := armeabi x86 armeabi-v7a mips 
```

仅当您拥有 NDK r8 时才使用 MIPS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:20:25.137

已解决 我的问题已通过在另一台机器上编译/运行来解决，我不知道这对 libworkso 文件有何影响，但现在它可以在 2.3 和 4.0 上运行。

*添加此内容以关闭我的未解决问题*

# c# - 亚马逊商城 WS 示例/指针

> ID：11003511
> 
> 赞同：1
> 
> 时间：2012-06-12T19:29:57.293
> 
> 标签：c#, asp.net, httpwebrequest, amazon-web-services

我正在尝试使用亚马逊 MWS 工作的简单示例。[我从这里](https://developer.amazonservices.com/doc/bde/feeds/v20090901/cSharp.html)下载了 c# 类库并通读了[这篇](https://images-na.ssl-images-amazon.com/images/G/01/mwsportal/doc/en_US/bde/MWSDeveloperGuide._V148508213_.pdf)文章，但似乎仍然无法让一个简单的示例正常工作。我迷失了语法以及如何使用这些类。

就集成它们的类而言，似乎没有很多文档。

我拥有创建实际请求所需的所有访问密钥和信息，但我需要使用他们的类调用它的帮助。

任何帮助/指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:34:22.740

通过 StackOverflow 检查。似乎有很多人遇到同样的问题。[我在这里](https://stackoverflow.com/questions/9510640/amazon-web-services-working-examples "这里")找到了这个线程，它显示了一些工作示例。祝你好运！

# php - How to insert data from text file in database one word per row

> ID：11003521
> 
> 赞同：0
> 
> 时间：2012-06-12T19:30:33.603
> 
> 标签：php, mysql

Test.text

```
abc,def,ghi,jkl,... 
```

Is there anyway possible to insert each one to each row in database?

```
1 abc
2 def
... 
```

Any suggest?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:43:14.897

Assuming the commas are always the separator for values, you don't even need PHP.

Check out the page [http://dev.mysql.com/doc/refman/5.0/en/load-data.html](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)

An example you can start with is

```
mysql> LOAD DATA INFILE 'C:\path\data.txt' INTO TABLE db2.my_table; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:33:08.050

Look at the php `file_get_contents();` function. [http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

Look at the php `explode();` function. [http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

This will get your string into an array which you can then insert into your database.

You can execute a MySQL `INSERT` query using the `mysqli_*` functions in php. [http://php.net/manual/en/mysqli.query.php](http://php.net/manual/en/mysqli.query.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:35:05.743

Depends on how big the Text.txt file is but if its small-ish then you can do it like:

```
<?php 
$text = file_get_contents('Test.txt');
$arrayOfTxt = explode(',',$text);

foreach($arrayOfTxt as $value){
    //Insert trim($value)
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T19:35:00.613

If I'm not wrong, you can do that with [explode](http://php.net/manual/en/function.explode.php)

```
$file = file_get_contents('file.txt');
$var = explode(",", $file); 
```

The `$var` variable will be a array containing, in this case, 4 positions(0,1,2, 3) with this('abc','def','ghi','jkl').

No you can do a `foreach` inserting the values on your table:

```
foreach($var as $x)
{
//YOUR INSERT GOES HERE. PASSING THE $x TO YOUR QUERY
} 
```

Just complementing Breland answer, you could also do this directly with MySQL like this?

```
LOAD DATA INFILE '/test.txt' INTO TABLE test TERMINATED BY ',' 
```

And if necessary, you can add this: `LINES STARTING BY 'xxx'` to define from where the insert will begin. It is useful in case you want to avoid some lines on your file.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T19:48:58.573

```
$file = fopen('test.txt', 'r');   
$csv_array = fgetcsv($file);   
foreach ($csv_array as $csv_data){
            //Do your insertion code here.

 } 
```

# ruby-on-rails - 无法使用 Rails 发送邮件，STARTTLS 无法识别？

> ID：11003523
> 
> 赞同：1
> 
> 时间：2012-06-12T19:30:44.243
> 
> 标签：ruby-on-rails

我正在使用 Ruby on Rails 开发 web 应用程序。我希望这样当用户注册时，一个唯一的哈希值会发送到他们的电子邮件中，他们必须在网站上输入该哈希值来验证他们的帐户。

当我尝试发送电子邮件时收到错误消息。

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
 :address              => "mail.XXX.com",
 :port                 => "25",
 :user_name            => 'test@XXX.com',
 :password             => 'XXXXXX',
 :authentication       => :login,
 :enable_starttls_auto => true,
 :tls                  => false}
config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = true 
```

当我使用这些设置尝试发送电子邮件时，我收到了这个错误：

![错误信息](../Images/cec5985eddff6776c906b74aae51e9c3.png)

我在本地主机上使用它，登录名以及端口和地址都是正确的。也没有电子邮件被发送。尝试从同一地址通过雷鸟发送电子邮件时遇到类似错误，它可能已链接。

从网络邮件空间发送电子邮件时，它可以工作。

我正在使用 Rails 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:56:55.957

如果您在从 Thunderbird 发送时遇到相同的错误，则您的`smtp`配置可能有问题。
请让我们知道您的电子邮件提供商是什么以及您使用的配置`SMTP`。它应该在`config/environments/$RAILS_ENV.rb`.
您还可以[在此处](http://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration)找到更多信息。

# design-patterns - 活动记录模式和约束

> ID：11003526
> 
> 赞同：1
> 
> 时间：2012-06-12T19:30:45.943
> 
> 标签：design-patterns, activerecord

在实现活动记录模式时，我应该实现 MS SQL Server`CHECK`约束以及 MySQL`ENUM`和`SET`约束吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:49:37.190

是的，这些很容易实现约束（与数据完整性约束相比），我不明白为什么不这样做！

# java - 转发所有事件

> ID：11003530
> 
> 赞同：2
> 
> 时间：2012-06-12T19:31:03.433
> 
> 标签：java, swt

我想在 SWT 中将所有事件从一个小部件转发到另一个小部件。是否有可能做到这一点？

为了记录：
我有一个针对深色背景设置的复选框小部件。在 Windows 上，无法实际设置按钮标签的颜色，Windows 使用黑色，使我的复选框难以辨认。因此，我的解决方案是创建一个没有标签的复选框，并在其旁边放置一个标准 SWT 标签。这很好用，直到我尝试点击标签。预期的行为是标签上的单击/悬停与复选框上的单击/悬停相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:43:33.850

我建议您在`paintListener`复选框中添加一个，并在其`paintControl`方法上用您想要的颜色在原始文本的相同位置重绘文本。

这样，您将无需处理额外的小部件。

编辑：正如您所说，这`PaintListener`不是一个选项，那么我建议您将要转发到复选框的所有事件添加到标签侦听器中。

在复选框上，添加相同的侦听器（不是相同的实例，相同的类型）。

最后，在添加到标签的侦听器上，只需执行

```
yourCheckBox.notifyListeners( eventType, event ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:58:03.657

您不能只创建一个侦听器实例并将其添加到两个小部件中吗？

# sql-server - 具有多行的复杂 SQL Server 更新触发器

> ID：11003531
> 
> 赞同：1
> 
> 时间：2012-06-12T19:31:07.730
> 
> 标签：sql-server, tsql, sql-server-2008-r2

我在 SQL Server 2008 R2 下的更新触发器有一个小问题。我已经安装了一个触发器来将更改记录到日志表中。这对我来说很好，但当我更新多行时就不行了。

```
CREATE TRIGGER [dbo].[TR_CompaniesUpdated]
ON  [dbo].[Companies]
AFTER UPDATE
AS 
BEGIN
SET NOCOUNT ON;
DECLARE
    @Return NVARCHAR(MAX), -- Is the JSON of the data
    @ParameterSQL VARCHAR(MAX), -- Is the select we want to retreive in JSON format

    -- Data from of the row updated
    @ID INT,
    @StatusID SMALLINT,

    -- Old data from of the row
    @StatusID2 SMALLINT

-- Declare the cursor
DECLARE InsertedCursor CURSOR FAST_FORWARD FOR
SELECT [ID], [StatusID] FROM INSERTED

-- Create the temporary table with logs so we'll need to do only one insert after this
CREATE TABLE #tempLog(
    [ID] [int] NOT NULL,
    [Data] [nvarchar](max) NOT NULL,
    [ActionID] [int] NOT NULL,
    [DtCreated] [datetime] NOT NULL,
    [CreatedBy] [int] NOT NULL)

-- Save updated values into variables
OPEN InsertedCursor
FETCH NEXT FROM InsertedCursor
INTO @ID, @StatusID

WHILE @@fetch_status = 0
BEGIN
    -- Save old values into variables
    SELECT
        @StatusID2 = [StatusID]
    FROM DELETED
    WHERE [ID] = @ID

    SELECT * INTO #tempTable
    FROM DELETED
    WHERE [ID] = @ID

    -- Build the select only to et the changed data
    SET @ParameterSQL = 'SELECT '
    IF (ISNULL(@StatusID, '') != ISNULL(@StatusID2, '')) SET @ParameterSQL = @ParameterSQL + '[StatusID],'
    IF (@ParameterSQL != 'SELECT ')
    BEGIN
        -- Update the modified date
        UPDATE [dbo].[AssessedLevelCostCentre]
        SET [DtModified] = GETDATE()
        WHERE [ID] = @ID

        SET @ParameterSQL = SUBSTRING(@ParameterSQL, 0, LEN(@ParameterSQL)) + ' FROM #tempTable'

        -- Execute the JSON function to get the result in JSON format
        EXEC [dbo].[GetJSON] @ParameterSQL, @Return = @Return OUTPUT

        -- Insert the Change Log with the old data
        INSERT INTO #tempLog
        SELECT
            [ID] AS [ID],
            @Return AS [Data],
            [ActionID] AS [ActionID],
            CASE
                WHEN [DtModified] IS NULL
                    THEN [DtCreated]
                    ELSE [DtModified]
            END AS [DtModified],
            CASE
                WHEN [ModifiedBy] IS NULL
                    THEN [CreatedBy]
                    ELSE [ModifiedBy]
            END AS [CreatedBy]
        FROM #tempTable
    END
    ELSE
    BEGIN
        UPDATE [dbo].[AssessedLevelCostCentre]
        SET [ModifiedBy] = (SELECT [ModifiedBy] FROM #tempTable)
        WHERE [ID] = @ID
    END

    DROP TABLE #tempTable

    -- Advance the Cursor
    FETCH NEXT FROM InsertedCursor
    INTO @ID, @StatusID
END

CLOSE InsertedCursor
DEALLOCATE InsertedCursor

-- Insert the Change Log with the old data
INSERT INTO [dbo].[AssessedLevelsCostCentersLogs]
SELECT *
FROM #tempLog

DROP TABLE #tempLog
END 
```

正如您所看到的，我有一个存储过程而不是返回 JSON 数据，问题是存储过程从查询中获取数据并且我无法传递 DELETED 或 INSERTED 表，这就是我使用临时表的原因似乎可以解决问题，但添加了 ID 子句。

更新

我更新了代码，现在我有了一个游标，但我可以看到它的性能真的很慢。我需要这种方式，因为我无法更改应用程序来创建 JSON，而且我认为我这样触发会正常工作。任何人有一个想法或如何提高这个性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T20:28:02.173

Sql server 中的触发器为每个批次运行一次，因此如果您在一条语句中插入 5000 条记录，则触发器恰好启动一次。您所做的是假设它将通过将您想要的值设置为标量变量来为每个单独的记录运行，这些变量当然只能保存一个值而不是 5000。您需要重新考虑您的过程以利用加入插入和删除一次没有运行一个记录。

# haskell - 这个 ghci 会话中的类型是怎么回事？

> ID：11003535
> 
> 赞同：21
> 
> 时间：2012-06-12T19:31:26.363
> 
> 标签：haskell, ghci

我正在学习 Haskell，当我遇到一些非常令人费解的事情时，我正在玩 ghci。

首先，创建一个简单的添加函数：

```
Prelude> let add x y = x + y 
```

请注意，它适用于整数和浮点数：

```
Prelude> add 3 4
7
Prelude> add 2.5 1.3
3.8 
```

现在创建一个应用函数。它与`$`（但不是中缀）相同。它就像一个无操作添加：

```
Prelude> let apply f x = f x
Prelude> apply add 3 4
7
Prelude> apply add 2.5 1.3
3.8 
```

好的，现在 make与使用`add'`相同`add'`但使用`apply`：

```
Prelude> let add' = apply add
Prelude> add' 3 4
7
Prelude> add' 2.5 1.3

<interactive>:1:9:
    No instance for (Fractional Integer)
      arising from the literal `1.3' at <interactive>:1:9-11
    Possible fix: add an instance declaration for (Fractional Integer)
    In the second argument of `add'', namely `1.3'
    In the expression: add' 2.5 1.3
    In the definition of `it': it = add' 2.5 1.3 
```

笏。

以下是类型：

```
Prelude> :t add
add :: (Num a) => a -> a -> a
Prelude> :t apply add
apply add :: (Num t) => t -> t -> t
Prelude> :t add'
add' :: Integer -> Integer -> Integer
Prelude> 
```

为什么 与`add'`有不同的类型`apply add`？

这是 ghci 的奇怪之处，还是一般来说在 Haskell 中是这样的？（我怎么能分辨出区别？）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T19:34:20.187

这是[单态性限制](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-930004.5.5)。当您使用简单的模式绑定（仅名称，没有任何函数参数）并且没有类型签名定义值时，它会获得单态类型。尝试根据[默认规则](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-790004.3.4)消除任何类型变量的歧义，如果不成功，则会出现类型错误。

在这种情况下，受`Num`约束的类型变量默认为`Integer`.

您可以关闭单态限制

```
ghci> :set -XNoMonomorphismRestriction 
```

或`-XnoMonomorphismRestriction`在命令行上使用标志。

# c++ - 使用类中的枚举 (C++)

> ID：11003537
> 
> 赞同：5
> 
> 时间：2012-06-12T19:31:37.310
> 
> 标签：c++, enums

我正在使用一个包含多个枚举的类的库。这是一个例子

```
class TGNumberFormat
{
  public:
  // ...
  enum EAttribute {   kNEAAnyNumber
    kNEANonNegative
    kNEAPositive
  };
  enum ELimit {   kNELNoLimits
    kNELLimitMin
    kNELLimitMax
    kNELLimitMinMax
  };
  enum EStepSize {   kNSSSmall
    kNSSMedium
    kNSSLarge
    kNSSHuge
  };
  // etc...
}; 
```

例如，在代码中，我必须引用这些`TGNumberFormat::kNEAAnyNumber`。我正在编写一个经常使用这些值的 GUI，并且代码越来越难看。有什么方法可以导入这些枚举并输入`kNEAAnyNumber`？我真的不希望这些名称中的任何一个重叠。我尝试了各种使用`using`关键字的方法，但都无法编译。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T19:41:18.677

如果您在代码中始终使用这些常量，则创建自己的标头以重新定义命名空间中的值可能会有所帮助。然后，您可以`using`使用该名称空间。您不需要重新定义所有值，只需重新定义枚举数的名称。例如，

```
namespace TGEnumerators
{
    static EAttribute const kNEAAnyNumber(TGNumberFormat::kNEAAnyNumber);
    // etc.
} 
```

或者，您可以`TGNumberFormat`在经常使用它的函数或源文件中将其键入更短的名称。例如，

```
typedef TGNumberFormat NF;
NF::EAttribute attribute = NF::kNEAAnyNumber; 
```

我认为后一种方法更优越，如果在块范围内明智地使用，是一种很好的做法。但是，对于跨文件使用，为了清楚起见，我认为最好使用枚举数的全名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:20:04.910

另一种可能但需要更多前期工作的方法是定义一批 const，然后您可以使用它们：

例如

```
const TGNumberFormat::EAttribute AnyNumber = TGNumberFormat::kNEAAnyNumber;
const TGNumberFormat::EAttribute NonNegative = TGNumberFormat::kNEANonNegative;
...

attribute = AnyNumber; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T21:23:13.410

两种解决方案：

1.  忍受它。
2.  `#define AnyNumber TGNumberFormat::kNEAAnyNumber`

*为掩护而奔跑……*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T19:55:08.460

如果您使用 c++11，您可以使用关键字 auto 来推断类型：

```
//the compiler will see auto and know to use: TGNumberFormat::EAttribute
auto attribute = TGNumberFormat::kNEAAnyNumber; 
```

> 编译：g++ -std=c++0x -o main main.cpp

如果您不使用 c++11，请考虑使用@James McNellis 提到的 typedef，
不推荐使用宏，因为它们不遵守范围规则 - typedef 会。

# javascript - 如何在加载数组中的所有图像后触发 Javascript 事件？

> ID：11003543
> 
> 赞同：2
> 
> 时间：2012-06-12T19:32:13.387
> 
> 标签：javascript, html, events, canvas

我正在开发一个 HTML5 Canvas 游戏，关卡需要预加载一些图像（最终还需要加载其他数据，例如音频文件）。我计划将所有这些图像存储在一个数组或一个容器对象中。我需要做的是找到一种方法，等到所有这些图像都下载完成后再继续游戏。

打开页面时不会发生这种情况。这发生在运行脚本的深处，并且图像是动态加载的。这个想法是显示“加载”消息，一旦一切完成，按预期启动关卡。

我可以使用 jQuery，但我更愿意使用直接的 Javascript 代码。window.onload 函数是否在这里工作，因为它在页面加载时实际上并没有发生？如果不存在这样的事件，有没有办法遍历图像对象并检查它们是否已加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:51:16.353

You can have a counter to check in the onload event if all the images load(or failed).
Something like

```
var loadedImages = 0;
var failedImages = 0;
var imageCount = amount of images
function loaded(){
    loadedImages++;
    if (loadedImages == imageCount){
        //all images successfully loaded
    }
    else if ((loadedImages+failedImages) == imageCount){
        //all images completed
    }
}
function failed(){
    failedImages++;
    if ((loadedImages+failedImages) == imageCount){
        //all images completed
    }
}
var images = array();
for (var i = 0; i < imageCount; i++){
    images[i].onload = loaded;
    images[i].onerror = failed;
    images[i].src = the image source
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:38:03.397

我将从这个[答案](https://stackoverflow.com/questions/821516/browser-independent-way-to-detect-when-image-has-been-loaded)开始并将其转换为适用于多个图像。它虽然使用 jquery。

# php - 安全的本地 mysql 访问

> ID：11003550
> 
> 赞同：0
> 
> 时间：2012-06-12T19:32:42.923
> 
> 标签：php, mysql, database, xampp, localhost

我正在运行 xampp 服务器并连接到 mysql 数据库。我正在编写一些 php 来与数据库交互。数据库主要是在本地使用，所以问题就变成了如果有人在本地访问数据库，他们可以简单地打开php文件并找到mysql登录信息。有没有办法保护这些信息？我可以创建一个只能查看表格的用户，然后当有人尝试编辑时，我可以提示输入另一个密码吗？

我不确定这是否有意义，但基本上我不希望有人在本地能够看到存储在 mysql_connect() 中的 mysql 密码。我也对与 mysql 交互的其他解决方案持开放态度，但我相当受限于 xampp 服务器、mysql 和 java。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:35:29.473

您必须以某种方式访问​​您的数据库凭据。如果有人可以访问您的 PHP 文件，那么您需要担心更多的安全问题。你能做的就很少了。

我建议创建一个 DSN，并确保只有授权用户才能访问该 DSN。尽管如此，攻击者可以轻松地编辑您的 PHP 文件以访问数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:01:58.237

> 我可以创建一个只能查看表格的用户，然后当有人尝试编辑时，我可以提示输入另一个密码吗？

如果您在 Web 应用程序中设计所有这些逻辑，则可以。通过管理 MySQL 中的用户，您可以创建两个，一个仅具有“选择”权限，另一个具有更广泛的权限。

不过，检测何时提示“写入密码”需要在您的自定义代码中完成，然后您可以随后为 mysql_connect() 构建不同的字符串。

总的来说，尽管我必须同意 Brad 的观点——如果你的 PHP 文件中有入侵者，你就会遇到更大的问题。

# ruby-on-rails-3 - 将 Redmine 插件迁移到 Rails 3

> ID：11003551
> 
> 赞同：2
> 
> 时间：2012-06-12T19:32:49.563
> 
> 标签：ruby-on-rails-3, redmine-plugins

我正在尝试在 Bitnami Stack 上使用 Redmine 2.0.1运行[Time Tracker 插件。](http://www.redmine.org/plugins/redmine_time_tracker)我发现它与 Redmine 2.* 不兼容，但它无法阻止我。所以，我把这个插件放在 中`../redmine/htdocs/plugins/redmine_time_tracker`，用 迁移它`rake db:migrate_plugins RAILS_ENV=production`，将路由更改为 Rails 3 样式，`redmine_time_tracker/config/routes.rb`并将所有文件`redmine_time_tracker/app/views`从 *.rhtml 重命名为 *.html.erb。在另一个Redmine重新启动后，我靠在墙上。Redmine的production.log中有一条错误消息：

```
Started GET "/redmine" for 127.0.0.1 at Tue Jun 12 22:36:05 +0400 2012
Processing by WelcomeController#index as HTML
  Rendered welcome/index.html.erb within layouts/base (9.5ms)
  Rendered plugins/redmine_time_tracker/app/views/time_trackers/_embed_menu.html.erb (203.0ms)
  Rendered plugins/redmine_time_tracker/app/views/time_trackers/_update_menu.html.erb (203.5ms)
Completed 500 Internal Server Error in 252ms

ActionView::Template::Error (undefined method `time_tracker_for' for #<#<Class:0x7f5efb458e48>:0x7f5efb322290>):
    1: <% time_tracker = time_tracker_for(User.current) %>
    2: <% if !time_tracker.nil? %>
    3:     <% if time_tracker.paused %>
    4:         <%# A time tracker is in pause, display the tracked issue, the time spent and the resume/stop actions %>
  lib/redmine/hook.rb:110:in `send'
  lib/redmine/hook.rb:110:in `view_layouts_base_body_bottom'
  lib/redmine/hook.rb:61:in `send'
  lib/redmine/hook.rb:61:in `call_hook'
  lib/redmine/hook.rb:61:in `each'
  lib/redmine/hook.rb:61:in `call_hook'
  lib/redmine/hook.rb:58:in `tap'
  lib/redmine/hook.rb:58:in `call_hook'
  lib/redmine/hook.rb:151:in `call_hook'
  app/views/layouts/base.html.erb:80:in `_app_views_layouts_base_html_erb___1317325009_70022959536540' 
```

`time_tracker_for`helper 放在`redmine_time_tracker/app/helpers/application_helper.rb`里面，我认为应该根据`redmine/htdocs/lib/redmine/plugin.rb`.

我是 Ruby 和 Rails 的新手，需要一些指导来继续对抗这种魔力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:25:53.140

终于解决了。

我在这里找到了：[http](http://www.redmine.org/boards/3/topics/31445) ://www.redmine.org/boards/3/topics/31445 答案（在阅读了我发现的关于 redmine 插件和 rails3 引擎的几乎所有内容之后）

> ## 扩展默认助手和控制器
> 
> 在 Redmine 2.0.0 之前的版本中，所有插件都在 vendor/plugins 文件夹中，因此 Rails 自动加载并添加了 app/controllers、app/helpers、app/models 等文件夹中的所有文件。
> 
> 这种方法允许通过简单地将适当的文件和方法添加到插件的文件夹来扩展现有的控制器和助手。例如，如果我们必须将方法 get_list_of_projects 添加到 SettingsHelper，我们可以简单地在插件的 app/helpers 文件夹中创建名为 settings_helper.rb 的文件。Redmine 2.x 将插件移动到应用程序根目录中的插件文件夹，并且由于上述方法根本不起作用。所以我们必须使用上面描述的修补和覆盖机制来使事情正常工作。

在链接中解释了如何制作提到的补丁机制。

我为 redmine 的 time_tracker 插件实现了该补丁并且正在工作。代码位于 github fork [https://github.com/martinllanos/redmine_time_tracker](https://github.com/martinllanos/redmine_time_tracker)

我希望它有所帮助。有任何问题在这里问:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:31:52.400

我有完全相同的问题，迁移要在 Redmine 2 上使用的时间跟踪器插件。

我一直在网上搜索，虽然我仍然无法修复它，但我发现了一些有用的信息，我认为这是解决这个问题的方法。

第一部分是 redmine 插件基本上是 Rails 引擎 [http://www.redmine.org/boards/3/topics/13419](http://www.redmine.org/boards/3/topics/13419)

所以我开始在谷歌上搜索。

我在 ruby​​-forum 上发现了两篇文章，它们讨论了使用插件中的 ApplicationHelper 从应用程序中覆盖 ApplicationHelper 的问题。他们提供了几种方法来解决这个问题，但我还没有测试它（我试图理解代码）

这是帖子。

[http://www.ruby-forum.com/topic/211017](http://www.ruby-forum.com/topic/211017)

[http://www.ruby-forum.com/topic/1455297](http://www.ruby-forum.com/topic/1455297)

如果您从那里得到具体/明确的答案，那就太好了:)

我这边的任何消息都会发布。

# c# - C# 从 .Net 访问 Turbo Pascal .DTA 文件

> ID：11003555
> 
> 赞同：2
> 
> 时间：2012-06-12T19:33:05.867
> 
> 标签：c#, pascal, turbo-pascal

**我的问题。**我有一个遗留的 Turbo Pascal 程序，仍在 MS DOS 上运行。原始来源丢失了，我需要处理在 .DTA 文件中找到的信息。

我真的很想从 .Net 访问这些信息，阅读和更新。第一个也是显而易见的问题是我没有 .DTA 文件的原始数据结构。

在列中读取数据自动排序是理想的，但我非常绝望地坐下来尝试手动设置字段。

我的**主要问题**是我不知道如何从.Net 中读取数据和写入数据。

我试过了：

```
using (BinaryReader b = new BinaryReader(File.Open(l_path, FileMode.Open), Encoding.UTF8)) 
```

和

```
OleDbConnection myConnection = 
  new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\\;
  Extended Properties=\"text;HDR=YES;FMT=FixedLength\""); 
```

1.  我能够检索数据；不幸的是，只有一列没有定界。所以，没有结构。
2.  特殊字符（#、@ 等）的存在。我也不知道应该使用哪种编码。

**有人可以帮我从.net读写Pascal .DTA文件吗？**
谢谢，莫恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:09:47.057

如果没记错的话，.DTA 扩展名是 Turbo Pascal 数据库工具包使用的默认扩展名（确切的名称让我无法理解）。我相信您仍然可以从 Delphi (Embarcadero) 网站下载 Turbo Pascal - 如果那里包含数据库工具包，那么这可能是您最好的选择 - 在 Turbo Pascal 中，将转换器编写为其他格式，例如 CSV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T03:19:04.343

不幸的是，文件中可能没有任何列分隔符。Turbo Pascal 使简单地将记录结构写入磁盘变得容易。

您将遇到三个大问题。

你肯定遇到的第一个——文件肯定不是 UTF-8。Turbo Pascal 早于 Unicode，文件中的任何文本无疑都是 ASCII。我相信您将其转换为 C# 的唯一方法是将其读取为字节并进行转换。

其次，Turbo Pascal 有一个没有 c# 等价物的数据类型。文件中的文本可能存储为字符数组（很简单，只需丢弃末尾的空格）或以长度开头的字符串类型。第一个字节表示字符串中有多少个字符，接下来的字节是字符。任何超出指定长度的字节都是垃圾，应该被丢弃。

最后，Turbo Pascal 中最常见的浮点类型是非标准的。问题是 Turbo Pascal 来自大多数机器没有数学协处理器的时代，普通类型在不支持 8087 指令的机器上要快得多。

我同意 500 - Internal Server Error 在 Delphi 或 Turbo Pascal 中执行此操作会容易得多。

# objective-c - 对象返回 NSArrayReverseEnumerator。导致无法识别的选择器发送到实例

> ID：11003558
> 
> 赞同：2
> 
> 时间：2012-06-12T19:33:13.923
> 
> 标签：objective-c, ios, ios5

我有一些应该返回 NSString 的代码。相反，它有时会返回一个 NSArrayReverseEnumerator。这会导致无法识别的选择器发送到实例异常。

```
NSString *tFirstName = nil;
NSString *tUsername = ((NSString*)[self.userObject objectForKey:USER_NAME]).length > 0 ? [self.userObject objectForKey:USER_NAME] : [self.userObject objectForKey:USER_USERNAME];
NSRange spaceRange = [tUsername rangeOfString:@" "];
if (spaceRange.location == NSNotFound) {
    tFirstName = tUsername;
} else {
    tFirstName = [tUsername substringToIndex:spaceRange.location];
}
return tFirstName; 
```

然后，我将 UITextField 文本属性设置为返回的导致异常的内容。

例外是：

-[__NSArrayReverseEnumerator isEqualToString:]：无法识别的选择器发送到实例 0xf1b8190

这是堆栈跟踪的最后几行：

```
 CoreFoundation 0x381208bf __exceptionPreprocess + 163
1 libobjc.A.dylib 0x31c061e5 objc_exception_throw + 33
2 CoreFoundation 0x38123acb -[NSObject doesNotRecognizeSelector:] + 175
3 CoreFoundation 0x38122945 ___forwarding___ + 301
4 CoreFoundation 0x3807d680 _CF_forwarding_prep_0 + 48
5 UIKit 0x354dc20d -[UILabel setText:] + 45
6 Trivial 0x000873c9 -[vcGameOver viewDidLoad] (vcGameOver.m:45)
7 UIKit 0x355117ff -[UIViewController view] + 167 
```

userObject 通常看起来像这样，无法在调试器中重现，还没有看到它在异常时的样子：

用户对象看起来像这样：

```
(PFUser *) $1 = 0x0be86fb0 <PFUser:MTsJR1DKuS> {
    answeredCorrect = "<PFRelation: 0xa847f30>";
    centsEarned = "-2353";
    centsPaidFor = 5000;
    centsUsed = 4193;
    correctAnswers = 1454;
    earnedCoinDate = "2012-06-12 19:42:44 +0000";
    eloRating = 1262;
    iq = 119;
    lastPlayedDate = "2012-06-12 19:15:46 +0000";
    locale = en;
    losses = 10;
    name = "Matt Hudson";
    status = 0;
    username = Inturbidus;
    wins = 8;
    wrongAnswers = 1157;
} 
```

我的问题是，我上面的代码中的哪一行可能返回一个 NSArrayReverseEnumerator？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:53:36.807

您*可能*有一个悬空指针，其他一些对象（在这种情况下，可能是 private-to-Apple `__NSArrayReverseEnumerator`）蹲在内存中*您*过早释放的`NSString`实例曾经所在的位置。

我建议打开僵尸 ( `NSZombieEnabled`) 并查看您是否收到“ `message sent to deallocated instance`”错误消息*而不是*您收到的错误消息。

# django - 将模型保存到数据库后的空 ID

> ID：11003561
> 
> 赞同：1
> 
> 时间：2012-06-12T19:33:19.627
> 
> 标签：django

当我将书籍模型添加到数据库中，然后在 SQL 数据库浏览器中查看书籍表时，它显示 id 字段为空白。

这很奇怪，因为我的表中有 1000 个项目。我不知道发生了什么，因为其中约 390 人的 ID 已填充。其他人的 id 为空白。

id 字段不应该本质上是主键吗？在某些情况下而不是其他情况下如何填充它。

注1：过去我手动删除了记录——不确定这是否是个问题。注意 2：当 I`print "newbook id:", repr(newbook.id)`时，id 与 SQL 数据库浏览器中看到的主键不同。

这就是我所看到的：

![在此处输入图像描述](../Images/95e671aacf4d4aa81d873a6415b87746.png)

相关代码如下：

模型：

```
class Books (models.Model):
    bookname=models.CharField(_('bookname'), max_length=255)
    publisher=models.CharField(_('publisher'), max_length=255)
    description=models.TextField(_('description'), blank=True)
    coverart = models.ImageField(upload_to="art", blank=True, null=True)
    source=models.TextField(blank=True) #source of where it came from
    last_updated=models.DateTimeField(_('added'), default=datetime.now)
    category_id=models.ManyToManyField(Category, related_name='cat')
    model = models.ManyToManyField ('model', related_name = 'model')
    shortdesc=models.TextField(_('description'), blank=True)
    url = models.TextField(_('url'), blank=True)
    uid = models.IntegerField()` 
```

保存一本书的代码：

```
try: 
    exists = Books.objects.get(bookname=bookname)
except Books.DoesNotExist:
    print "book does not exist -- adding now"
    newbook=Books(bookname=bookname, uid = uid, source='Mysourceofbooks',     publisher=publisher, description = description, shortdesc=shortdesc, url = url)
    newbook.save()
    for cat in category_ids:
        newbook.category_id.add(cat)
else:
    print "log: we found the book in the DB already"` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:32:02.577

根据聊天中的讨论：表格`id`中的列`Book`不知何故失去了其作为`PRIMARY KEY`. 把它放回去，你应该很高兴。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T19:57:20.787

首先，您可以使用函数[get_or_create](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create)来测试/保存模型。它返回元组 - 对象，已创建。

如果您可以使用新 id 保存对象：将 object.pk 设置为 None，然后保存。在您的代码中更疯狂地认为。=> Book 是 Books 模型的更好名称。

您对此有何看法：

```
for cat in category_ids:
    print cat
    newbook.category_id.add(cat) 
```

什么是 category_ids 变量？为什么将 ManyToMany 命名为“category_id”？

# c# - MySQL在线数据库

> ID：11003566
> 
> 赞同：0
> 
> 时间：2012-06-12T19:33:46.567
> 
> 标签：c#, mysql, web-services

我已经学会了如何在本地机器上使用 C# 使用 MySQL，但是如果我想在线使用它该怎么办？我的意思是，例如，我可以通过将 xml 文件放在任何服务器上来连接 XML 和 C# 以在线共享数据。MySQL 有哪些可用选项？有没有办法做类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:36:30.967

是的，您需要设置一个 Web 服务，看看[WCF](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)。

看看[这个](http://www.c-sharpcorner.com/UploadFile/1d42da/a-xml-web-service-that-exposes-the-default-table-from-sql-se/)例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:36:41.557

通常，您会编写一个与数据库交互的服务器后端。`WCF Web Service`如果您使用的是 .Net，这可能是 REST Web 服务（如果使用 Java，.Net 实际上也有 REST），或者很多不同的东西。

然后，您的前端（浏览器应用程序等）将与此服务器后端交互。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:41:01.560

其他人提到了 WCF，这是一个不错的选择，但是 MS 刚刚发布了一个测试版但稳定的 MVC 4。MVC 4 更新具有 Web API 功能。这使您能够快速轻松地创建 Web 服务。

使用 Web API 的示例代码：

```
public class RecordsController : ApiController
{
    public HttpResponseMessage Post(Record record)
    {
        var newId = _Records.Count + 1;
        record.ID = newId;
        _Records.Add(record);
        var newMessage = new HttpResponseMessage<Record>(record);
        return newMessage;
    }
 } 
```

# c# - 绑定图表系列

> ID：11003569
> 
> 赞同：0
> 
> 时间：2012-06-12T19:33:53.150
> 
> 标签：c#, mysql, winforms, charts

在我的 WinApp 中，我使用 MySql 数据源 DataReader。现在，我想使用 DevExpress Xchart 控件，但我不知道如何绑定系列或使用 DateTime 控件进行参数查询。

有人可以帮助我吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:40:54.337

[DevExpress 帮助站点上的此页面包含您需要的所有信息...](http://documentation.devexpress.com/#XtraCharts/CustomDocument3095)

# jquery - 有意重叠固定文本与视差

> ID：11003573
> 
> 赞同：0
> 
> 时间：2012-06-12T19:33:59.470
> 
> 标签：jquery, css, parallax

我正在尝试在菜单上实现这种效果：[http ://www.tokiolab.it/](http://www.tokiolab.it/)

我希望能够在滚动幻灯片时更改颜色。

这是我到目前为止所拥有的：http: [//tinyurl.com/6uqdjmq](http://tinyurl.com/6uqdjmq)

但是重叠工作得很好，菜单彼此重叠，我不希望这样。

有什么解决办法吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:44:30.310

如果我正确理解了您的问题，则在滚动第一张和第二张幻灯片时会显示您的标题。

首先，第一部分和第二部分有相同的标题元素。从那里将其删除并将其放在容器 div 之后。也是标题样式。删除`position:fixed`.

**编辑：：** 您仍然必须从这两个地方删除标题并将标题（没有 class=dark）放在 div 容器之后。并给它 z-index 100。此外，您还必须附加一个滚动功能。

```
scrollorama.onBlockChange(function() {
    alert('You just scrolled to block#'+scrollorama.blockIndex);
     //Change the css properties of header using jquery .css() method.
}); 
```

您可以通过使用此方法更改每个块的标题颜色。

# c# - 取消选择 Xceed 网格中的项目

> ID：11003576
> 
> 赞同：3
> 
> 时间：2012-06-12T19:34:22.670
> 
> 标签：c#, wpf, xaml, xceed-datagrid

我有一些 xceed 网格，我不希望默认选择任何项目。现在，当我的网格加载时，第一个项目被选中。有没有办法阻止这种行为的发生？

# android - 如何从 EditText 视图中提取文本 - Android

> ID：11003583
> 
> 赞同：0
> 
> 时间：2012-06-12T19:35:04.913
> 
> 标签：android, string, android-edittext

所以我想这很简单，就像使用 getText() 来检索信息:)

它是这样结束的：

```
public void getToast(View v) {
    EditText et = (EditText) findViewById(R.id.userText);
    String toastText = et.getText().toString();
    if (toastText == "" || toastText == null) {
        Toast.makeText(this, "This is a nice toast!", Toast.LENGTH_SHORT).show();   
    }
    else {
    Toast.makeText(this, toastText, Toast.LENGTH_SHORT).show();
    }
} 
```

我在主布局文件上创建了一个*EditText视图。*这与*userText*标识符一起引用。由于它是一个*EditText*字段，因此用户可以随时修改其中的文本；我想要完成的是检索用户在点击标识为*getToast*的按钮时输入的文本，然后将其显示为 Toast。

我目前正在使用 Resources 类（我的第一个猜测？）来检索存储在*toastText*下的字符串，但这没用，因为它正在提取存储在 main.xml 中的文本 - 这是空的，因为我声明没有“android :text" 属性，而不是我使用 "android:hint" 来告诉用户输入文本。

我已经阅读过有关意图的信息，但是如果我要将字符串发送到另一个活动，而不是在同一个活动中，那是有道理的。我曾认为这是一项简单的任务，但它花费了我希望的更多时间：P

顺便提一句：

getToast方法被定义为在 XML 上创建的*按钮*的“android:OnClickMethod”。它适用于任何其他文本字符串。

有任何想法吗？

```
package com.testlabs.one;

import android.app.Activity;
import android.content.res.Resources;
import android.os.Bundle;
import android.view.View;
import android.widget.Toast;

public class initialui extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 
}

public void getToast(View v) {
    Resources myResources = getResources();
    String toastText = myResources.getString(R.string.toast); 
    if (toastText == "" || toastText == null) {
        Toast.makeText(this, "This is a nice toast!", Toast.LENGTH_SHORT).show();   
    }
    else {
    Toast.makeText(this, toastText, Toast.LENGTH_SHORT).show();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T19:38:07.050

您只需调用`getText()`TextView 上的函数。

例子：

```
public void getToast( View v )
{
    String toastText = ( (EditText)v ).getText();
    if ( toastText.length() == 0 ) {
        toastText = getResources().getString( R.string.toast );
    }
    Toast.makeText( this, toastText, Toast.LENGTH_SHORT ).show();
} 
```

此代码将在 EditText 可用时显示带有文本的 toast，在`toast`未输入任何内容时显示资源中的默认文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:39:27.160

如果您只想通过 Intent 将字符串从一个活动发送到另一个活动

```
Intent intent = new Intent();
intent.putExtra("key","stringValue");
startActivity(intent); 
```

然后在你的其他活动中

```
Intent intent = getIntent();
String value = intent.getStringExtra("key","defaultstring"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T09:14:57.117

我认为这：

```
EditText et = (EditText) findViewById(R.id.userText);
String toastText = et.getText().toString(); 
```

应该是这样的：

```
String toastText  = findViewById(R.id.userText).toString(); 
```

如果不是，我想知道您为什么需要使用中间阶段而不是将其直接转换为 java String 对象

# ruby-on-rails - 当 ActiveRecord 关联为零时，Rails 防止错误

> ID：11003586
> 
> 赞同：1
> 
> 时间：2012-06-12T19:35:24.310
> 
> 标签：ruby-on-rails, activerecord, associations

我有一个像“组”这样的表，它存储了我的“用户”可以属于的组列表。在 User 模型中，这是通过`belongs_to :group`. 在我看来，我想显示组名。我正在尝试使用`@user.group.name`.

问题是不是每个用户都被分配到一个组中，`@user.group`例如`nil`. 所以，我得到了一个`NoMethodError: undefined method 'name' for nil:NilClass`令人沮丧的结果。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:39:03.100

最简单的方法是执行以下操作：

```
<% if @user.group.present? %>
  <%= @user.group.name %>
 <% end %> 
```

但是，根据得[墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)，模型应该只与它的直接关联/不应该知道它的关联方法。

所以，理想情况下，你应该做这样的事情（在你的用户模型中）：

```
delegate :name, :to => :group, :prefix => true, :allow_nil => true 
```

然后您可以通过`@user.group_name`. `nil`如果没有关联的组，它将返回，但不会引发异常。这相当于

```
def group_name
  group.try(:name)
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T19:39:48.970

我通常为此使用[Object#try](http://api.rubyonrails.org/classes/Object.html#method-i-try)：

```
@user.group.try(:name) # returns nil if @user.group is nil 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:45:58.750

我会创建一个名字好听的方法，这样就很容易重用代码。

```
def is_assigned?
  self.group
end

<% if @user.is_assigned? %>
  ...
<% end %> 
```

# sql-server - 服务器本地连接提供程序已停止侦听 [ \\.\pipe\SQLLocal\MSSQLSERVER ]

> ID：11003589
> 
> 赞同：2
> 
> 时间：2012-06-12T19:35:54.480
> 
> 标签：sql-server

任何人都知道具体是什么原因导致此错误消息和/或如何解决它？谢谢。

> SQL Server 警报系统：“Sev 17 错误”
> 
> 描述：由于失败，服务器本地连接提供程序已停止侦听 [ \.\pipe\SQLLocal\MSSQLSERVER ]。错误：0xe8，状态：4。服务器将自动尝试重新建立监听。

# ios - 在 iOS 应用中销售实体产品

> ID：11003591
> 
> 赞同：5
> 
> 时间：2012-06-12T19:35:57.067
> 
> 标签：ios, in-app-purchase

我想知道在 iOS 应用程序中销售实体产品有什么规则？付款不会使用苹果应用内购买。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T19:41:00.460

规则很简单：

*   您的应用程序可以使用的任何数字内容都必须使用应用内计费方式进行支付
*   任何实物都不应该通过应用内购买出售，它应该使用其他东西，例如[Paypal API](https://developer.paypal.com/)

# linux - 在 Debian Lenny (5.0) 上安装 Mono 2.0 或更高版本

> ID：11003595
> 
> 赞同：0
> 
> 时间：2012-06-12T19:36:22.187
> 
> 标签：linux, debian, embedded-linux

我正在尝试在 debian lenny (5.0) 上安装单声道 2.6.7 运行时。mono 项目网站说用于在 debian lenny (5.0) 上安装 mono 2.6.7 运行时的 apt 源列表文件应包含以下条目：

deb [http://backports.debian.org/debian-backports](http://backports.debian.org/debian-backports) main

当我将上述条目添加到 apt 源列表并运行 apt-get update 时，我得到以下响应：

E：源列表 /etc/apt/sources.list 中的第 4 行格式错误（dist 解析）

我通过在线研究尝试了许多其他 apt-sources，但它们也都失败了。

我想要的只是在我的 debian lenny 机器上安装 mono 2.0 或更高版本的运行时。我该怎么做呢？

提前感谢您的帮助。

副部

# sql - Google Cloud SQL 前端选项，还是 RAD 建议？

> ID：11003601
> 
> 赞同：1
> 
> 时间：2012-06-12T19:36:34.957
> 
> 标签：sql, web-applications, crm

我有兴趣将我们的联系人关系管理系统更改为 Google 的 Cloud SQL，但我似乎找不到可以利用它的模块化、可定制的前端应用程序。

我对 Java 和 SQL 有一点了解，但只做了几个小应用程序和几个查询，从头开始一个如此规模的项目是令人生畏的。

我更喜欢可以为用户开发前端的 RAD 工具。我们当前的 CRM 应用程序 Sage ACT！2009，有一个布局编辑器，感觉就像 Visual Basic 的设计师。它还处理所有后端 SQL 的东西。这基本上是我想要的，但需要能够连接到远程数据库。

谷歌应用程序集成会摇滚，但我对网络应用程序或 GAE 一无所知。我们有 Google Apps for Business。

简而言之，我想要一个可定制的前端数据库客户端软件（专注于用户，而不是数据库管理），或者一个有点面向 CRM 并与 SQL 开箱即用的 RAD 工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:54:20.717

我赞同这一点，并有一个建议。

`Microsoft Access`可以说是最好的，当然也是最常用的最终用户 RAD 工具之一。它的表单和子表单使得以非常直观的方式呈现和更新数据成为可能。

创建 ODBC 驱动程序有多难`Google Cloud SQL`？是否已经存在？ODBC 驱动程序将允许 Google Cloud 表在 Access 中作为附加表可见。

# extjs - How to wait until all stores are loaded in ExtJs?

> ID：11003605
> 
> 赞同：32
> 
> 时间：2012-06-12T19:36:52.123
> 
> 标签：extjs

I have a set of combo boxes that are driven by five stores and I want to fire a function once all the stores are completely loaded. What is the recommended way of doing this? I could do something like this but it feels kludgy:

```
var store1Loaded = false;
var store2Loaded = false;

store1.on('load', function(){
    store1Loaded = true;
});

store2.on('load', function(){
    store1Loaded = true;
});

store1.load();
store2.load();

function WaitForFunction()
{
    if (!store1Loaded || !store2Loaded)) {
       setTimeout( WaitForFunction, 100);
       return;
    }
    AllStoresLoaded();
}

function AllStoresLoaded(){
      //Do Something
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-13T00:11:16.367

Use the [`store.isLoading()`](https://docs.sencha.com/extjs/4.1.0/#!/api/Ext.data.Store-method-isLoading) method, I think that is what it is for. I use it and it works fine.

1.  Configure the stores that you want to be loaded before performing some logic with a `storeId` config.

2.  Put these `storeIds` into an array.

3.  Whenever one of these stores is loaded iterate through the array, lookup the store with `Ext.getStore` and call `isLoading` on it.

4.  If none of the stores in the array are still loading, perform your logic.

For example, say I want `store1` and `store2` loaded before I perform some logic (I am showing this in non-MVC pattern because it looks like you are not using MVC pattern from your snippet).

```
var store1 = Ext.create('Ext.data.Store', {
    model: myModel,
    storeId: 'store1', // store needs to be done MVC style or have this config
    proxy: {
        type: 'ajax', 
        url: 'url...',
        reader: 'json'
    },
    autoLoad: {
        callback: initData // do this function when it loads
    }
});

var store2 = Ext.create('Ext.data.Store', {
    model: myModel,
    storeId: 'store2',
    proxy: {
        type: 'ajax', 
        url: 'url...',
        reader: 'json'
    },
    autoLoad: {
        callback: initData // do this function when it loads
    }
});

// the stores to be checked
var myComboStores = ['store1', 'store2']

// function does logic if they are both finished loading
function initData() {
    var loaded = true;
    Ext.each(myComboStores, function(storeId) {
        var store = Ext.getStore(storeId);
        if (store.isLoading()) {
            loaded = false;
        }
    });
    if(loaded) {
        // do stuff with the data
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-12T22:10:40.197

Using timeouts isn't a great solution, however also having to rely on everything in the store manager isn't great either.

I'd do something like:

```
var allStores = [store1, store2],
    len = allStores.length,
    loadedStores = 0,
    i = 0;

for (; i < len; ++i) {
    allStores[i].on('load', check, null, {single: true});
}

function check() {
    if (++loadedStores === len) {
        AllStoresLoaded();
    }
}

function AllStoresLoaded() {
    //Do Something
} 
```

If you're using it alot you could even turn it into a class.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T19:40:33.790

> Extend the store - add the 'loaded' property to the child class, override 'initComponent()' and attach to 'load' event inside it, raise the 'loaded' to true inside the event handler, add the 'isLoaded()' method returning value of the 'loaded' property.
> 
> Other way, if you use http transport - store.proxy.conn.isLoading()

Take a look at [this](http://www.sencha.com/forum/showthread.php?91923-How-to-check-datastore-is-loaded&s=57ac1e3cfee37a80d116b29b615692ba&p=436473&viewfull=1#post436473)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T20:37:58.113

```
function storeLoadingHandler(justLoadedStore) {
    // I use some quick hacky flag, you can do it by your own way
    justLoadedStore.loaded = true;

    var allStoresLoaded = true;

    // just walk through all stores registered in the application
    // do not forget to use MVC-style stores or add 'storeId' manually
    // or register every store with your custom code
    Ext.StoreManager.each(function(existingStore) {
        // we have to ignore system stores
        if (existingStore.storeId != 'ext-empty-store') {
            if (!existingStore.loaded) { // our flag or undefined
                // nope, at least one of stores is not loaded
                allStoresLoaded = false;

                return false
            }
        }
    })

    if (allStoresLoaded) // then do something
        alert('All stores are loaded.');
}

// add the loading handler for all stores
Ext.StoreManager.each(function() {
    this.on('load', storeLoadingHandler);
}) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-17T11:03:16.547

If you have a problem because the combobox are not displayed/refreshed properly when the stores take too long to load, the solution is to create every store which is to be used in a combobox like this

```
Ext.create("Ext.data.Store", {
    ...,
    loading: true,
    ...
}); 
```

Comboboxes check that parameter in the stores they use to refresh the info once it's loaded, but sometimes the combobox is created and refreshed even before the store starts to load and the 'loading' flag is set to true, and then it won't refresh its value when the store finishes loading. Setting it to true explicitly fixes the issue. I don't know if that is your case, but I thought I would mention it in case it is.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-27T15:20:38.223

**Use Deft JS**

Deft JS is a addon injected via dependancy injection. It allows user to add promises in AJAX calls and the promise is resolved only when the call is done. [Link for Deft JS](http://deftjs.org/). Use **Ext.defer.All();** to load all your 5 stores and a particular callback function will be called once all the stores are loaded. In that function, Implement your logic.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-20T07:32:53.013

ExtJs Store have method **[load](https://docs.sencha.com/extjs/6.5.1/classic/Ext.data.Store.html#method-load)** and load method have callback function.

I have created a demo. you can check here [Sencha fiddle](https://fiddle.sencha.com/#view/editor&fiddle/26va)

> This function will create store and return.

```
function createStore(id) {
    return Ext.create('Ext.data.Store', {
        storeId: 'store_' + id,
        alias: 'store.store_' + id,
        proxy: {
            type: 'ajax',
            url: 'data.json',
            timeout: 300000,
            reader: {
                type: 'json',
                rootProperty: 'data'
            }
        }
    });
} 
```

> For Example I have array of store. It contain storeId or alias.

```
var storeArry = [],
    store = '';

for (var key = 0; key < 5; key++) {
    storeArry.push(createStore(key).storeId);
} 
```

> On every store callback we can remove data from storeArray or maintain a variable for checking.

```
Ext.getBody().mask('Please wait..');
Ext.defer(function () {
    Ext.getBody().unmask();
    Ext.Array.forEach(storeArry, function (storeId) {
        //For checking store is created or not
        //if store is not created we can create dyanamically using passing storeId/alias
        store = Ext.getStore(storeId);
        if (Ext.isDefined(store) == false) {
            store = Ext.create(storeId);
        }
        store.load({
            callback: function () {
                //On every store call back we can remove data from storeArray or maintain a veribale for checking.
                Ext.Array.remove(storeArry, this.storeId);
                if (storeArry.length == 0) {
                    Ext.Msg.alert('Success', 'All stored is loaded..!');
                }
            }
        });
    });
}, 3000); 
```

# java - 字符串的线性时间排序算法？

> ID：11003606
> 
> 赞同：0
> 
> 时间：2012-06-12T19:36:55.023
> 
> 标签：java, algorithm, sorting, complexity-theory, big-o

我有一个字符串数组，每个字符串都有不同的长度。例如：

```
s[0] = "sSWXk"
s[1] = "qCk"
s[2] = "sOQQXPbk"
.
.
.
s[x] = "KVfdQk"; 
```

我也被赋予了

```
n = s[0].length() + s[1].length() + ... + s[x].length() 
```

我需要一个时间复杂度为 O(n) 的排序算法来按字典顺序对这些字符串进行排序，以便（例如）

```
a < ab < b < bbc < c < ca 
```

有什么建议么？时间复杂度是算法的基本要求。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T19:38:29.953

有一种称为**[trie](http://en.wikipedia.org/wiki/Trie)**的数据结构最适合于此。如果您将所有单词插入到 trie 中，然后对 trie 执行 DFS，您将按排序顺序返回单词。这样做也需要时间 O(n)，其中 n 是所有字符串中的字符总数。

由于我认为这是家庭作业，因此我将把如何实现 trie 的细节留作练习。:-)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-09T15:46:59.200

我有一个类似的测试问题，我弄错了，但从那时起它就一直困扰着我。所以我一直在研究它，我认为还有其他两种方法可能会在线性时间内产生结果。一种是将字符串视为一系列以 26 为底的整数，并在将字符串填充为相等长度后对数组使用基数排序（以某种方式 - 可能有一种巧妙的方法可以在不大幅增加存储空间的情况下做到这一点，我只是没有弄清楚细节）。我还没有建立一个例子或测试它，所以我不能肯定地说这会起作用，但它的原理似乎是合理的。另一种方法是桶排序 - 使用包含指向 26 个列表（桶）的指针的 26 元素数组。将每个字符串排序到适当的桶链表（那些以 'a' 到第一个数组元素指向的列表中，等等）然后使用标准的 O(n log n) 方法对每个列表进行排序。我不完全理解数学，但根据 Cormen 的教科书“算法简介”，以这种方式使用桶排序最终具有线性时间复杂度。不过，看起来空间会比 Radix 样式的方法大，只要可以满足右填充要求而无需实际为其分配一堆存储空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-10T13:56:34.577

因为这是一个家庭作业问题，我只能给出一个提示。提示：使用修改后的计数排序。如果我们假设一个 char 是 8 位，这很实用。

# http-post - 将条目发布到 IBM Connections 板返回没有预期标题或新条目的现有条目

> ID：11003609
> 
> 赞同：0
> 
> 时间：2012-06-12T19:37:19.080
> 
> 标签：http-post, ibm-connections

尝试使用 c# 使用 http POST 方法将消息发布到 IBM Connections。

ATOM 格式的消息条目消息 XML：

```
<entry xmlns="http://www.w3.org/2005/Atom">
  <category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="entry"/>
  <category scheme="http://www.ibm.com/xmlns/prod/sn/message-type" term="simpleEntry"/>
  <content type="text">I posted this from C# posted at :11:43 AM</content>
</entry> 
```

网址是`http://--ServerName--/profiles/atom/mv/theboard/entries.do?key=e028cbd3-2126-455f-88b2-7e2cb4971e54`

这来自服务文档，其中 rel="http://www.ibm.com/xmlns/prod/sn/mv/theboard"

我正在请求服务文档，根据用户（我用于测试）查找上述 URL。

我得到的列表很好，但是当我发布时，我仍然只得到带有标准标题的列表，而不是文档中列出的标题。

以下是返回的标头：

```
X-LConn-Auth :: false
X-UA-Compatible :: IE=EmulateIE7
Vary :: User-Agent,Accept-Encoding
Keep-Alive :: timeout=20, max=200
Connection :: Keep-Alive
Transfer-Encoding :: chunked
Content-Language :: en-US
Cache-Control :: private, max-age=0, must-revalidate
Content-Type :: application/atom+xml; charset=UTF-8
Date :: Tue, 12 Jun 2012 19:43:33 GMT
Expires :: Thu, 01 Dec 1994 16:00:00 GMT
Last-Modified :: Tue, 12 Jun 2012 19:43:33 GMT
Set-Cookie :: <<<<DELETED>>>> ; Path=/
Server :: IBM_HTTP_Server 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T05:25:44.580

Ive also encountered this issue before. I have made a ruby script to update the status to Lotus Connections. See details here: [How to update user status message to IBM Connections (Lotus connection API)?](https://stackoverflow.com/questions/16230814/how-to-update-user-status-message-to-ibm-connections-lotus-connection-api)

# dao - Microsoft DAO 3.6 对象库

> ID：11003611
> 
> 赞同：2
> 
> 时间：2012-06-12T19:37:25.943
> 
> 标签：dao

我在 VB6 中有一个应用程序，它使用`Microsoft DAO 3.6 Object library`.

它已经包含在 MS Office 2000 及更高版本的安装中。

Microsoft DAO 3.6 Object library 是否在 Windows XP/Vista/7 默认安装中可用，以便没有安装 MS Office 的人可以运行此应用程序。

它的默认位置是`program files\Common Files\Microsoft Shared\DAO\dao360.dll`

# mysql - 在 MySQL GROUP BY 中计算“重复”

> ID：11003614
> 
> 赞同：2
> 
> 时间：2012-06-12T19:37:45.583
> 
> 标签：mysql, group-by, statistics, repeat, web-statistics

我想知道除了子查询和临时表之外，是否有其他方法可以计算您分组的行中有多少重复值。

例如，很容易获得 UNIQUE 值计数，但我想获得多次出现的值的计数。

例子：

```
SELECT url, HOUR(dttm), COUNT(DISTINCT visitorIP) UniqueVisitors,
COUNT("visitorIPs that visited more than once") RepeatVisitors
FROM table
GROUP BY url, HOUR(dttm) 
```

有任何想法吗？我能想到的只是子查询或另一个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:11:52.060

这可以通过对其自身的左外连接来实现，但前提是您在表上有一个主键来排除计数中的确切行，否则临时表可能会做得很好。

# javascript - 在网络和移动应用程序上绘制图表

> ID：11003616
> 
> 赞同：0
> 
> 时间：2012-06-12T19:37:49.160
> 
> 标签：javascript, jquery, html, charts

我正在开发一个 web 应用程序，它需要根据数据类型将各种类型的数据显示为图表（饼图、折线、条形、气泡等）。

此外，我将不得不开发一个具有相同图表的移动应用程序。

我开始使用谷歌图表进行试点，但客户不喜欢它们的外观。并问我是否可以找到其他库，即使它不是开源 ro 免费的。

所以我需要找到一个外观和填充都很好的图表库，它适用于所有主要的网络浏览器和移动操作系统，并且可以处理不同类型的图表。

我一直在研究 Sencha touch charts、gRaphael、Highcharts、Jquery Visualize 等，我可以决定哪一个更适合这个。

拜托，我需要关于它们的建议，为什么你认为它们可能更适合我正在处理的项目类型。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:27:24.410

我们一直在使用 highcharts js，到目前为止一直很开心。

# database - 插入触发器以验证唯一约束

> ID：11003617
> 
> 赞同：1
> 
> 时间：2012-06-12T19:37:50.527
> 
> 标签：database, plsql, triggers, oracle10g, constraints

我有以下触发器，它在`updated`变为时被触发`Y`。仅当表中不存在值时，我才想插入旧值`my_hist`。如果存在相同的记录，则不应插入。对于这个最好的方法是创建一个约束来检查`my_hist`表中的唯一性还是在触发器中检查这个条件？如果是这样，我怎么能在触发器中做到这一点？

或者是否可以在触发器中检查 my_hist 表的唯一约束，使其不会插入重复记录。

```
CREATE OR REPLACE TRIGGER mytrig
    AFTER UPDATE
    ON mytab
    FOR EACH ROW
WHEN (
new.updated = 'Y'
      )
BEGIN
    INSERT INTO my_hist
      VALUES   (
                        :old.id,
                        :old.no,                        
                        :old.start_date,
                        :old.end_date,
                        SYSDATE
                  );
END mytrig;
/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:44:07.180

如果要强制执行唯一性，请使用唯一性约束。这总是比自己编写代码更可取。

您可以检查该行是否已作为`INSERT`语句的一部分存在

```
INSERT INTO my_hist( id, 
                     no, 
                     start_date, 
                     end_date, 
                     some_other_column )
  SELECT :old.id, 
         :old.no, 
         :old.start_date,
         :old.end_date,
         sysdate
    FROM dual
   WHERE NOT EXISTS( SELECT 1
                       FROM my_hist
                      WHERE my_hist.id = :old.id
                        AND my_hist.no = :old.no
                        AND my_hist.start_date = :old.start_date
                        AND my_hist.end_date   = :old.end_date ); 
```

但是，这在多个会话可能同时插入同一行的多用户环境中是行不通的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:47:07.597

您可以将您的更改`insert`为以下内容，以检查是否已存在重复项。select 假定主键`my_hist`是`id`and `start_date`，如果主键值不同，则更改`where not exists`子句以仅使用主键值。

```
insert into my_hist
select :old.id, :old.no, :old.start_date, :old.end_date, sysdate
  from dual
 where not exists ( select 1
                      from my_hist
                     where id = :old.id
                       and start_date = :old.start_date
                           ) 
```

然而，这需要一个索引扫描，所以它不是最优的。

而是让异常被引发。它被明确命名为：`dup_val_on_index`. 如果这确实被提出，那么只需忽略它。

```
BEGIN
    INSERT INTO my_hist
      VALUES   (
                        :old.id,
                        :old.no,                        
                        :old.start_date,
                        :old.end_date,
                        SYSDATE
                  );
-- ignore an exception that get's raised if a duplicate value
-- gets inserted. 
EXCEPTION WHEN DUP_VAL_ON_INDEX then null;
END mytrig; 
```

# c# - 列表框控件在选择项目时抛出空异常

> ID：11003619
> 
> 赞同：1
> 
> 时间：2012-06-12T19:37:54.913
> 
> 标签：c#, asp.net, visual-studio-2010, listbox, postback

我在 asp.net 4.0 中创建一个 Web 应用程序

我有一个 Web 表单，其中有一个 ListBox 控件，它在`Page_Load`事件中添加一个字符串列表。如果我从 ListBox 中选择任何列表项并希望通过使用`Listbox.SelectedValue`它来计算它，则会`Object reference not set to an instance of an object`在`Listbox.SelectedValue`.

通过使用“QuickWatch”（在 Visual Studio 2010 中），我做了一些发现，我可以通过给出索引（比如`Listbox.Items[2]`）来获得价值，但是如果我使用`Listbox.SelectedValue`或，我得到 null 或 -1`Listbox.SelectedIndex`

我的问题是，为什么 ListBox 控件在选择项目时显示空异常错误，因为此 Listbox 不为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:43:03.660

我假设您将`ListBox`on postback 绑定到它`DataSource`，对吗？那么ListBox就会失去他的`SelectedValue`（甚至[`SelectedIndexChanged`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedindexchanged.aspx)事件不会被触发）。

相反，您应该仅在初始加载时进行数据绑定并检查[`IsPostback`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)属性：

C＃

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack) 
    {
        // pseudo code: 
        ListBox1.DatSource = GetYourDataSource();
        ListBox1.DataBind();
    }
} 
```

VB.NET

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not IsPostBack Then
        ' pseudo code: '
        ListBox1.DatSource = GetYourDataSource()
        ListBox1.DataBind()
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:08:20.047

根据我对您在重新填充`Listbox.SelectedValue`后检查的情况的理解，因此 SelectedIndex 被重置，即。然后你试图在事件处理程序中检查or ，所以它会是.`Page_Load``ListBox``-1``SelectedValue``SelectedIndex``-1`

**建议：**
1\. 在第一次Page_Load 时填充ListBox。

```
protected void Page_Load(object sender, EventArgs e)
{
 if(!IsPostBack) 
  {
    //Bind it once on first time page load
    MyListbox.DatSource = SqlDataSource1();
    MyListbox.DataBind();
  }
} 
```

2\. 然后在处理完事件后重新填充`MyListBox`.
3.您应该制定一种`protected`填充方法`ListBox`。

**注意：** “空异常”是由于没有选择项目，即`-1`（实际上是在 Page_Load 上重置）

# excel - 在 vba 中粘贴特殊值

> ID：11003620
> 
> 赞同：3
> 
> 时间：2012-06-12T19:38:02.667
> 
> 标签：excel, xlsm, vba

我正在做一个小项目，如果我在行中检测到“真”，则需要我复制和粘贴某些列。我正在尝试将这些选定的列粘贴到不同的工作表上，并且我只想粘贴它们的值而不是公式。

这是我到目前为止所拥有的，我在粘贴特殊功能方面遇到了错误。请帮忙。

```
' CopyIfTrue()
Dim Col As Range, Cell As Excel.Range, RowCount As Integer
Dim nysheet As Worksheet
Set nysheet = Sheets.Add()
nysheet.Name = "T1"

Sheets("FemImplant").Select
RowCount = ActiveSheet.UsedRange.Rows.Count

Set Col = Range("I2:I" & RowCount) 'Substitute with the range which includes your True/False values
Dim i As Integer
i = 1

For Each Cell In Col      
     If Cell.Value = "True" Then                  
        Cell.Copy
        Sheets("T1").Select 'Substitute with your sheet
        Range("b" & i).Select
        ActiveSheet.Paste

        'Get sibling cell

        Sheets("FemImplant").Select
        Dim thisRow As Integer
        thisRow = Cell.Row
        Dim siblingCell As Range
        Set siblingCell = Cells(thisRow, 2)
        siblingCell.Copy
        Sheets("T1").Select 'Substitute with your sheet
        Range("a" & i).Select
        ActiveSheet.PasteSpecial Paste:=xlPasteValues

        Sheets("FemImplant").Select
         i = i + 1
    End If
Next 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T19:56:51.080

PasteSpecial 必须是 Range.PasteSpecial 而不是 ActiveSheet.PasteSpecial。它们是不同的东西，ActiveSheet.PasteSpecial 不知道任何参数“Paste”。

```
ActiveSheet.Range("a" & i).PasteSpecial Paste = xlPasteValues 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T20:23:21.680

Is this what you are trying?

```
Option Explicit

Sub Sample()
    Dim rRange As Range
    Dim RowCount As Integer, i As Long
    Dim nysheet As Worksheet

    On Error Resume Next
    Application.DisplayAlerts = False
    Sheets("T1").Delete
    Application.DisplayAlerts = True
    On Error GoTo 0

    Set nysheet = Sheets.Add()
    nysheet.Name = "T1"

    With Sheets("FemImplant")
        RowCount = .Range("I" & Rows.Count).End(xlUp).Row

        .AutoFilterMode = False

        Set rRange = .Range("I2:I" & RowCount)

        With rRange
            .AutoFilter Field:=1, Criteria1:="True"

            .Offset(1, 0).SpecialCells(xlCellTypeVisible).Copy
            nysheet.Range("B1").PasteSpecial xlPasteValues

            .Offset(1, -7).SpecialCells(xlCellTypeVisible).Copy
            nysheet.Range("A1").PasteSpecial xlPasteValues
        End With

        .AutoFilterMode = False
    End With
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:54:42.830

我相信您提供的代码比以前快得多。但是为了帮助其他人更容易理解，为什么不发表一些评论呢？

我已经为你做到了。

```
Sub ExtractData()

Dim selectedRange As Range ' Range to check
Dim Cell As Range
Dim iTotalRows As Integer ' Selected total number of rows
Dim i As Integer ' marker to identify which row to paste in new sheet

Dim shtNew As Worksheet
Dim shtData As Worksheet

Set shtData = Sheets("data")
Set shtNew = Sheets.Add()
shtNew.Name = "Analyzed data"

iTotalRows = shtData.UsedRange.Rows.count
Set selectedRange = shtData.Range("F2:F" & iTotalRows)

i = 1

' Check the selected column value one by one
For Each Cell In selectedRange.Cells

     If Cell.Value = "True" Then
        Cell.Copy shtNew.Range("A" & i)

        ' Copy the brand to column B in "Analyzed data" sheet
        shtNew.Range("B" & i).Value = _
                       shtData.Cells(Cell.Row, 2).Value
        i = i + 1
    End If

Next ' Check next cell in selected range

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T20:08:25.727

您的复制/粘贴可以大大缩短......

```
' CopyIfTrue()
Dim Col As Range, Cell As Excel.Range, RowCount As Integer
Dim nysheet As Worksheet, shtFI As Worksheet

Set shtFI = Sheets("FemImplant")
Set nysheet = Sheets.Add()
nysheet.Name = "T1"

RowCount = shtFI.UsedRange.Rows.Count
Set Col = shtFI.Range("I2:I" & RowCount)

Dim i As Integer
i = 1

For Each Cell In Col.Cells
     If Cell.Value = "True" Then
        Cell.Copy nysheet.Range("B" & i)
        nysheet.Range("A" & i).Value = _
                       shtFI.Cells(Cell.Row, 2).Value
        i = i + 1
    End If
Next 
```

# javascript - 在 AJAX 成功函数中延迟 while 循环

> ID：11003622
> 
> 赞同：0
> 
> 时间：2012-06-12T19:38:05.697
> 
> 标签：javascript, jquery

大家好，我有以下代码

```
$.ajax({
url: "http://localhost/twee/chat/getnumcom",
type: 'POST',
data: form_data,
success: function(html) {
            var data = parseInt(html);
                page = 20 * data ;

                while ( counter < page ) {

                       $.get("http://localhost/twee/chat/"+id+"/"+counter,function(data){
                       $('#c').append($(data).find('#c').html());
                       });      
                  counter = counter + 20 ;
               } 
          }
});

alert($('#600').length);
$.scrollTo('#600'); 
```

这就是它的作用。最初它将数据附加到我的窗口，直到找到#600。从技术上讲，我有一个函数可以数学计算 600 应该在哪里。这很好，并且 div 加载得很好。

但是，我专门添加了警报以检查 div 是否已加载。值 0 表示否，值 1 表示是。在我的萤火虫控制台中，当函数启动时，while 循环仍在执行，但警报已显示值 0。因此，滚动未完成。

如果我在执行后立即再次启动该函数，我会得到一个 1，这意味着 div 已加载。

有没有办法延迟滚动功能直到while循环执行？我一直认为代码会按程序执行，并且在加载所有数据后会显示警报。

我想计时器是一种选择，但我不想使用它。我不确定我应该将计时器设置为多少毫秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:41:54.710

Ajax 调用是异步的，将`scrollTo`/`alert`放在`success`回调函数中，在`while`循环之后：

```
$.ajax({
    url: "http://localhost/twee/chat/getnumcom",
    type: 'POST',
    data: form_data,
    success: function (html) {
        var data = parseInt(html);
        page = 20 * data;

        while (counter < page) {
            $.get("http://localhost/twee/chat/" + id + "/" + counter, function (data) {
                $('#c').append($(data).find('#c').html());
                if ($('#600').length)   //if there's a #600 element inside this $.get callback
                    $.scrollTo('#600'); //scrolls to it
            });
            counter = counter + 20;
        }
    }
}); 
```

请注意，数字 ID 仅在 HTML5 中有效，如果这值得关注的话。

# php - 在 html 表格单元格中将 mysql 数据显示为工具提示

> ID：11003625
> 
> 赞同：0
> 
> 时间：2012-06-12T19:38:08.647
> 
> 标签：php, jquery, mysql, html-table

大家好，我正在尝试将 mysql 行填充为带有鼠标悬停的工具提示，但是我只是将第一行作为工具提示填充，您知道我缺少什么，非常感谢您的帮助，这里是我的代码，它只显示第一行作为工具提示框。

```
 $(function () {
        $(".test").hover(
            function () {

                            var toolTipHtml = $("#ToolTipDiv_ +'$id'").clone();

                $(this).append(toolTipHtml);
                toolTipHtml.show("slow");
            },
            function () {
                var toolTipHtml = $(this).find(".tooltip");

                toolTipHtml.hide();
                toolTipHtml.remove();
            }
        );

    });

     echo "<table>";
    while($row = mysql_fetch_array($result))
    {
          $id = $row['id_out_org'];
               echo "<tr>";  
             echo "<td>" .$row['KG']."</td>";        
            echo "<td class='test'>" .$row['B']."</td>";
            echo "<td >" .$row['B']."</td>";
            echo  "<td class='test'>"; 
            echo "<div id = 'ToolTipDiv_"/$id/"' class='tooltip' style='background-color: White; display: none; width: 20%;'>";

            echo "Total: $ "; echo $totalp = $total + $fuel;

            echo "</div>";
             "</td>";

            echo "</tr>";           
        }
        echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:03:28.673

Hardik 是对的，您只得到第一行，因为在 while 语句中创建的每个 div 的 ID 为“ToolTipDiv”，因此 jquery 只选择第一行。您可以做的是给 div 一个第二个类名并按类选择它，以便可以像您想要的那样使用所有 div。我认为这会奏效...

**jQuery：**

```
$(function() {
$(".test").hover(
function() {
    var toolTipHtml = $(this).next('.ToolTipDiv').clone();
    $(this).append(toolTipHtml);
    toolTipHtml.show("slow");
}, function() {
    var toolTipHtml = $(this).find(".tooltip");

    toolTipHtml.hide();
    toolTipHtml.remove();
});
});​ 
```

**PHP/HTML：**

```
echo "<table class='style1' border='0' >";
while($row = mysql_fetch_array($result)) {
echo "<tr>";  
echo "<td>" .$row['KG']."</td>";        
echo "<td class='test'>" .$row['A']."</td>";
echo "<td >" .$row['B']."</td>";
echo "<td class='test'>"; 
echo "<div id = 'ToolTipDIv' class='tooltip ToolTipDiv' style='background-color: White; display: none; width: 20%;'>";
echo $total = $row['A'] - $row['B'];
echo "</div>";
echo "</td>";
echo "</tr>";           
}
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:41:48.843

请更改您的 id`<div>` `<div id = 'ToolTipDIv'`

每个元素的 ID 必须是唯一的 那是代码中的问题

# mysql - mySQL 查询 - 获取与用户 x 成为朋友的用户

> ID：11003630
> 
> 赞同：0
> 
> 时间：2012-06-12T19:38:28.327
> 
> 标签：mysql

假设我有用户并且用户可以成为朋友。我有一个用户和用户数据表，以及一个友谊表（连接 id、用户 a id、用户 b id）。

有没有我可以在 mySQL 中执行的单个查询，它可以从用户表中获取与用户 x 是朋友的所有用户？用户 x 的 id 可能位于友谊表中的 a 槽或 b 槽中，这一事实使这比我想象的要复杂得多。

编辑清晰：

我需要当前用户的朋友的用户表中的所有数据。因此，如果当前用户是友谊表中的用户 a，我需要用户 b 的用户数据，反之亦然。我想根据友谊表中的关系得到所有当前用户的朋友（来自用户表）的所有数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T19:48:11.367

使用[SQL Fiddle](http://sqlfiddle.com/#!2/1729a/3)你可以：

```
SELECT u.name as friends
FROM friendship AS f
JOIN users AS u ON 
  ((u.user_id = f.user_a_id AND f.user_b_id = @user_id)
  or (u.user_id = f.user_b_id AND f.user_a_id = @user_id))
where u.user_id is not null; 
```

这`@user_id`是您要为其查找朋友的用户的 ID 号，输出是朋友的姓名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:43:37.483

```
SELECT users.user_id FROM users, friends WHERE (users.user_id=friends.user_a_id AND friends.user_b_id=x) OR (users.user_id=friends.user_b_id AND friends.user_a_id=x); 
```

# ruby-on-rails - 以编程方式将标签添加到黄瓜中的场景？

> ID：11003632
> 
> 赞同：2
> 
> 时间：2012-06-12T19:38:31.170
> 
> 标签：ruby-on-rails, cucumber, capybara

我正在尝试创建一个可以在浏览器中运行黄瓜场景的别名，以便在它们失败时可以观察它们的运行。我试过设置一个环境变量，然后做类似的事情

```
if ENV['CUCUMBER_INTERACTIVE']
  Capybara.current_driver = :selenium
end 
```

但是，@javascript 似乎不仅仅是指定驱动程序。当我像这样更改驱动程序时，我所有的测试都失败了，除非我手动添加 @javascript 标记。

无论如何我可以创建类似以下的东西吗？

```
if ENV['CUCUMBER_INTERACTIVE']
  Before do |scenario|
    scenario.add_tag('@javascript')
  end
end 
```

# php - PHP 在 For 循环中创建关联数组

> ID：11003635
> 
> 赞同：1
> 
> 时间：2012-06-12T19:38:36.100
> 
> 标签：php, arrays, for-loop, associations, push

```
<?php
    $facet_fields = array (
    "dx-tx295" => array (
    "T",1348,),
    "dx-z1" => array (
    "F",1,
    "G",2,
    "E",3,
    "D",4,
    "C",5,
    "H",6,
    "B",7,
    "I",8,
    "J",9,
    "K",10,
    "A",11,
    "L",12,
    "M",13,)
    )
    $catalogue = array();
    $value = array();
    for ($x=1;$x<count($facet_fields);$x++)
    {
         for($y=0;$y<count($facet_fields[$x]);$y+2)
         {
            $current = $facet_fields[$x];
            $spot = ($current[$y] => $current[$y+1]);
            array_push($value, $spot);
         }
    }
    for($i=0;$i<count($facet_fields);$i++)
    {
        $spot2 = ($facet_fields[$i]=>$value);
        array_push($catalogue, $spot2);
    }   
    print $catalogue
    print $value    
?> 
```

我正在尝试将第一个数组中的每个数字分配给其关联的字母，然后将关联添加到新数组值中的某个位置。然后我试图将值数组关联到 facet_field 数组并将它们添加到目录中。分配的关联有问题，例如 $spot 行。

是否有可能做到这一点？或者我不能在关联中包含这么多变量吗？我将如何在这样的数组中创建关联数组？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:13:46.137

1.  是否有可能做到这一点？

    是的，可以转换数组。

2.  或者我不能在关联中包含这么多变量吗？

    不，这不是问题。$facet_files 数组很小且可处理。只有当数组非常非常大时才会出现内存问题。

3.  我将如何在这样的数组中创建关联数组？

    通过遍历`$facet_fields`数组，获取其键和值并将它们插入到具有所需结构的新数组中。我认为您通过使用 for 循环并使用迭代器变量索引 $values 数组来使这有点复杂。当您将新值插入数组时，它们会自动按数字索引。换句话说：停止做`$facet_fields[$x]`。

    您可能会提供 ，`$catalog = array( key => value );`因为不清楚目标数组必须具有哪种结构。

# php - 具有日视图和 15 分钟增量的开源日历？

> ID：11003637
> 
> 赞同：0
> 
> 时间：2012-06-12T19:38:42.527
> 
> 标签：php, open-source, calendar

我正在寻找一个可以提供日视图以及 15 分钟增量（事件）的开源（php/mysql）日历。你知道是否有这样的东西可用（也许有管理界面）？感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:43:09.957

我过去使用过[DHTMLX 调度程序](http://dhtmlx.com/docs/products/dhtmlxScheduler/index.shtml)。这是一个 javascript 跨平台日历/调度器。是的，它有 mysql 的连接器。

# android - 在选项卡更改时调用 Android 片段 oncreateview

> ID：11003639
> 
> 赞同：16
> 
> 时间：2012-06-12T19:38:59.187
> 
> 标签：android, tabs, android-fragments

我使用 Android 已经有一段时间了，但 Fragment 对我来说有点新（可能对大多数人来说都是如此）。无论如何，我有下面的代码，它工作正常。我有三个片段，每个选项卡中都有一个。我想知道每次切换选项卡时调用 onCreateView 是否正常，这样做有意义吗？每次选项卡更改时不应该有办法不重绘片段吗？

我正在从一个有 3 个活动的应用程序转换它，每个选项卡中有一个活动，每次选项卡更改时重新创建视图似乎是一种浪费，而以前在选项卡更改之间存在视图就很好了。 .

顺便说一句，此代码借自：[http ://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

```
public class Tabs extends FragmentActivity implements
    TabHost.OnTabChangeListener {

final String MAP_TAB = "Map";
final String IMAGES_TAB = "Images";
final String SETTINGS_TAB = "Settings";

TabHost mTabHost;
HashMap<String, TabInfo> mapTabInfo = new HashMap<String, TabInfo>();
TabInfo mLastTab = null;

private class TabInfo {
    private String tag;
    private Class clss;
    private Bundle args;
    private Fragment fragment;
    TabInfo(String tag, Class clazz, Bundle args) {
        this.tag = tag;
        this.clss = clazz;
        this.args = args;
    }

}

class TabFactory implements TabContentFactory {

    private final Context mContext;

    public TabFactory(Context context) {
        mContext = context;
    }

    public View createTabContent(String tag) {
        View v = new View(mContext);
        v.setMinimumWidth(0);
        v.setMinimumHeight(0);
        return v;
    }

}

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);

    initialiseTabHost(savedInstanceState);
    if (savedInstanceState != null)
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); //set the tab as per the saved state
}

protected void onSaveInstanceState(Bundle outState) {
    outState.putString("tab", mTabHost.getCurrentTabTag()); //save the tab selected
    super.onSaveInstanceState(outState);
}

private void initialiseTabHost(Bundle args) {
    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();
    TabInfo tabInfo;

    Tabs.addTab(this,
            mTabHost,
            mTabHost.newTabSpec(MAP_TAB).setIndicator(
                    MAP_TAB,
                    getResources().getDrawable(R.drawable.ic_tab_map_states)),
            ( tabInfo = new TabInfo(MAP_TAB, HMapFragment_NEW.class, args)));
    mapTabInfo.put(tabInfo.tag, tabInfo);

    Tabs.addTab(this,
            mTabHost,
            mTabHost.newTabSpec(IMAGES_TAB).setIndicator(
                    IMAGES_TAB,
                    getResources().getDrawable(R.drawable.ic_tab_gallery_states)),
            ( tabInfo = new TabInfo(IMAGES_TAB, ImageGridFragment.class, args)));
    mapTabInfo.put(tabInfo.tag, tabInfo);

    Tabs.addTab(this,
            mTabHost,
            mTabHost.newTabSpec(SETTINGS_TAB).setIndicator(
                    SETTINGS_TAB,
                    getResources().getDrawable(R.drawable.ic_tab_settings_states)),
            ( tabInfo = new TabInfo(SETTINGS_TAB, SettingsFragment.class, args)));
    mapTabInfo.put(tabInfo.tag, tabInfo);

    // Default to first tab
    this.onTabChanged(MAP_TAB);
    mTabHost.setOnTabChangedListener(this);
}

private static void addTab(Tabs activity, TabHost tabHost, TabHost.TabSpec tabSpec, TabInfo tabInfo) {
    // Attach a Tab view factory to the spec
    tabSpec.setContent(activity.new TabFactory(activity));
    String tag = tabSpec.getTag();

    // Check to see if we already have a fragment for this tab, probably
    // from a previously saved state.  If so, deactivate it, because our
    // initial state is that a tab isn't shown.
    tabInfo.fragment = activity.getSupportFragmentManager().findFragmentByTag(tag);
    if (tabInfo.fragment != null && !tabInfo.fragment.isDetached()) {
        FragmentTransaction ft = activity.getSupportFragmentManager().beginTransaction();
        ft.detach(tabInfo.fragment);
        ft.commit();
        activity.getSupportFragmentManager().executePendingTransactions();
    }

    tabHost.addTab(tabSpec);
}

public void onTabChanged(String tag) {
    TabInfo newTab = this.mapTabInfo.get(tag);
    // if they've clicked to change tabs
    if (mLastTab != newTab) {
        FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();
        if (mLastTab != null)
            if (mLastTab.fragment != null) ft.detach(mLastTab.fragment);
        if (newTab != null) {
            if (newTab.fragment == null) {
                newTab.fragment = Fragment.instantiate(this, newTab.clss.getName(), newTab.args);
                ft.add(R.id.realtabcontent, newTab.fragment, newTab.tag);
            } else ft.attach(newTab.fragment);
        }

        mLastTab = newTab;
        ft.commit();
        this.getSupportFragmentManager().executePendingTransactions();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-12T19:54:25.947

有 3 种方法可以从视图中删除片段：

*   隐藏它（`hide`交易对象上的功能）
*   分离它（`detach`事务对象上的函数）
*   删除它（`remove`交易对象上的功能）

如果**隐藏**它，视图将被隐藏，但仍位于布局中并且应该保持不变。如果**分离**它，视图将被拆除，但片段仍由 FragmentManager 管理（例如，将在配置更改时重新创建）。如果您**删除**它，它将完全从 FragmentManager 中删除，并且它的状态将不再被管理。

# css - 如何将div定位在另一个div下方

> ID：11003641
> 
> 赞同：7
> 
> 时间：2012-06-12T19:39:06.050
> 
> 标签：css

我有两个div：

```
<div><label for="1">Some really loooong text... Which breaks the second div. Which then appears shifted to the right.</label><input type="text" id="1" name"1"></div>
<div><label for="2">Shifted.</label><input type="text" id="2" name"2"> 
```

我使用以下 css 使输入文本字段左侧的标签浮动：

```
label{
    width:200px;
    float:left;
}​ 
```

第二个 div 向左移动，而不是出现在第一个下方。它应该与第一个对齐到左侧。

这是示例：http: [//jsfiddle.net/qh37Y/](http://jsfiddle.net/qh37Y/)

现在，如果我插入一个*clear:both;* div 它有效，但这是最佳实践吗？

```
.clearer {
    clear:both;
}
<div class="clearer"><label for="2">Shifted.</label><input type="text" id="2" name"2">​ 
```

见这里：http: [//jsfiddle.net/ywUx6/](http://jsfiddle.net/ywUx6/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T19:45:15.880

看起来这实际上是 div 高度的问题。

由于内容是浮动的，它不会影响 div 的高度。因此，第二个 div 中的内容（不是 div 本身）包裹在第一个 div 的浮动标签周围。

`clear: both`是可以接受的，但是如果（例如）你想将这些 div 用作两列布局的一列，它会破坏布局。

我建议`div { overflow: hidden; }`改为。这为 div 提供了一个新的 box-context，它不允许重叠边框，从而使浮动内容的高度对 div 的高度有贡献。

编辑：[固定小提琴](http://jsfiddle.net/qh37Y/6/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T19:42:31.573

clear:both div 完全可以使用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-12T19:41:03.083

是的，`clear: both`通常是你最终使用的。请注意，您也可以使用`clear: left`等

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-12T19:42:18.933

首先，您不能使用以数字开头的标识符 - 只是说';）

如果我了解您的问题，解决方案是添加`clear: both`到您的 div：

`div { clear: both }`

将代码放在标签定义下。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-01T09:32:57.347

我注意到，如果我们处理`flex`显示类型的 div，传统的解决方案可能还不够。如果你想`flex`在一个block下面显示一个div，即使block已经`width: 100%`或者`clear: both`被使用了，flex仍然会出现在它的旁边。对此的解决方案是将 flex 元素的宽度也指定为 100%，如下所示：

CSS：

```
.top_div {
    display: block; 

}

.bottom_div {
    display:    flex;
    justify-content: center;    
    width:  100%; /*key*/
} 
```

HTML：

```
<div class="replies_container">Your block content</div>
<div class="flex_container">
Your flex content</div> 
```

旁注：也许这不是 OP 问题的直接解决方案，但可能对可能偶然发现它的未来 Google 员工（例如我自己）有用。

# date - Microsoft Access 报告创建

> ID：11003651
> 
> 赞同：0
> 
> 时间：2012-06-12T19:39:50.900
> 
> 标签：date, ms-access, grouping

我对访问非常陌生，我正在尝试根据表格中的信息创建报告。这是表中当前数据的示例...

```
id      Date          Name       Location      Model      Count
 1      06/10/2012    William    Basement      Desktop    22
 2      06/10/2012    Doug       Top Floor     Desktop    15
 3      06/10/2012    Jane       Top Floor     Laptop     12
 4      06/11/2012    William    Basement      Desktop    29
 5      06/11/2012    Doug       Top Floor     Desktop    35
 6      06/12/2012    William    Basement      Desktop    31
 7      06/12/2012    Doug       Top Floor     Desktop    41
 8      06/12/2012    Jane       Top Floor     Laptop     24 
```

现在我要做的是创建一个报告，该报告将按月份分组并汇总计数，取最后一个计数并从记录的月份的第一天减去第一个计数。所以，我的报告应该看起来像这样，省略 ID，因为这不是报告的必要数据。

```
Date          Name       Location      Model      Count
June 2012     William    Basement      Desktop    9
June 2012     Doug       Top Floor     Desktop    26
June 2012     Jane       Top Floor     Laptop     12 
```

如果有人对我如何做到这一点有任何想法，请记住我是新手，那太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:58:49.050

您可以先创建一个查询，然后以此为基础创建您的报告。包括一个控件，您可以将其设置为 MaxOfCount 和 MinOfCount 之间的差异。

```
SELECT DISTINCT Format([Date],"yyyy mm") AS Sort, 
       Format([Date],"mmm yyyy") AS [Month], 
       a.Name, a.Location, a.Model, 
       (SELECT TOP 1 [Count] 
        FROM Report b 
        WHERE a.Name=b.Name AND a.Location=b.Location AND a.Model=b.Model 
        ORDER BY [Date] DESC, Id) As MaxOfCount, 
       (SELECT TOP 1 [Count] 
        FROM Report b 
        WHERE a.Name=b.Name AND a.Location=b.Location AND a.Model=b.Model 
        ORDER BY [Date], Id) AS MinOfCount
FROM Report a 
```

# c# - Javascript QueryString 到 c#

> ID：11003652
> 
> 赞同：1
> 
> 时间：2012-06-12T19:39:59.680
> 
> 标签：c#, javascript, asp.net, query-string, client-side

我正在尝试从 devexpress aspxGridview 中的 FocusedRow 获取 KeyField 值。

以下代码我到目前为止

*   网格视图

    ```
     <dx:ASPxGridView ID="ClientenSummary" runat="server" Width="700px" 
            OnSelectionChanged="ClientenSummary_SelectionChanged" EnableCallBacks="False">

            <ClientSideEvents FocusedRowChanged="function(s, e) 
    ```

    { OnGridFocusedRowChanged(); }" />

    ```
     <SettingsBehavior AllowSelectByRowClick="True" AllowSelectSingleRowOnly="True" ProcessSelectionChangedOnServer="True" />
            <SettingsPager PageSize="50">
            </SettingsPager>
            <Settings ShowFilterRow="True" ShowFilterRowMenu="True" />
        </dx:ASPxGridView> 
    ```

*   asp页面标记中的JavaScript函数

    ```
     <script language="javascript" type="text/javascript">
     function OnGridFocusedRowChanged() {
         ClientenSummary.GetRowValues(ClientenSummary.GetFocusedRowIndex(), 'ClassNR', OnGetRowValues);
     }

     function OnGetRowValues(values) {
         window.location = "../main.aspx?FocusedRowKeyField=" + values[0];
     }
    </script> 
    ```

*   用于解析查询字符串的后端 C# 代码

    ```
     protected void Page_Load(object sender, EventArgs e)
       {
        if (!string.IsNullOrEmpty(Request.Params["FocusedRowKeyField"]))
        {
            GetClientDetails(Request.Params["FocusedRowKeyField"]);
        } 
    ```

我想不通的是，为什么 QueryString 没有解决。在对互联网进行一些调查之后，我找不到一个像样的解决方案，所以这就是我在这里问的原因。希望有人可以帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:17:23.287

好的，首先您的网格中没有`AllowFocusedRow="true"`SettingsBehavior。这将导致它忽略 FocusRowChanged 的​​任何客户端事件。

其次，您需要告诉控件您是要在服务器还是客户端上处理焦点行更改事件。我会推荐客户，并将在下面发布一些代码。（DevExpress 文档：[http](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_FocusedRowChangedtopic) ://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_FocusedRowChangedtopic ）

第三，您`ProcessSelectionChangedOnServer="True"`将触发您的 ClientenSummary_SelectionChanged 事件的代码。但是您没有发布此代码，老实说，除非这提供了您没有发布的某些特定功能，否则您不需要它来满足您的要求。

最后，我建议设置网格的客户端实例名称和 Key Fieldname。在我的 java 代码示例中，我使用“grid”和“ClassNR”。

爪哇：

```
<script type="text/javascript">
function OnGridFocusedRowChanged() {
    grid.GetRowValues(grid.GetFocusedRowIndex(), 'ClassNR', OnGetRowValues);
}

function OnGetRowValues(ClassNR) {
    window.location.href = "../main.aspx?FocusedRowKeyField=" + ClassNR;
} 
```

网格：

```
<dx:ASPxGridView ID="grid" ClientInstanceName="grid" runat="server" EnableCallBacks="false" KeyFieldName="ClassNR"> 
```

设置：

```
<SettingsBehavior AllowSelectByRowClick="True" AllowSelectSingleRowOnly="True" ProcessFocusedRowChangedOnServer="false" AllowFocusedRow="true"  /> 
```

客户端事件：

```
<ClientSideEvents FocusedRowChanged="function(s,e) { OnGridFocusedRowChanged(); }" /> 
```

下一位只是为了测试该值，随意更改它。C＃：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Page.ClientScript.RegisterStartupScript(this.GetType(), "myScript", "<script language=JavaScript>alert(" + Request.Params["FocusedRowKeyField"] + ");</script>");  
    } 
```

这是来自我为您的问题设置的测试应用程序。当焦点行更改时，它将使用 FocusedRowKeyField 更新浏览器地址窗口（仅在 IE9 中测试）。它还将调用后面的代码中的脚本，该脚本也会弹出带有该值的警报。Page_Load 事件将在每次焦点行更改时触发，您可能希望根据需要进行修改。

# sql-server - 在 A ∩ B 条件下连接表

> ID：11003657
> 
> 赞同：6
> 
> 时间：2012-06-12T19:40:18.920
> 
> 标签：sql-server

我希望基于参与连接的所有表中存在的一组列来连接两个（或更多）表。换句话说，我希望基于列的交集来连接表。但是，每个表都有额外的列，这些列对该表是唯一的。

![交集](../Images/28ef87c1ebf46400dd8b6f6a28dc7bfd.png)

## 例子

*#* : 一个数字
*-* : NULL

**表 A**

```
+------+------+------+
| Col1 | Col2 | ColA |
+------+------+------+
| A    | A    | #    |
| A    | B    | #    |
+------+------+------+ 
```

**表 B**

```
+------+------+------+
| Col1 | Col2 | ColB |
+------+------+------+
| A    | A    | #    |
| B    | B    | #    |
+------+------+------+ 
```

**结果**

```
+------+------+------+------+
| Col1 | Col2 | ColA | ColB |
+------+------+------+------+
| A    | A    | #    | #    |
| A    | B    | #    | -    |
| B    | B    | -    | #    |
+------+------+------+------+ 
```

我想出了一个解决方案，但性能很糟糕，性能是一个问题。我不想用那个解决方案污染你。我宁愿对此有新的看法:)

期待看到您的解决方案。感谢您的时间。非常感谢。

## 更新

谢谢大家的回复。但是，我似乎没有很好地解释这个问题。（尚未测试所有答案）

但请注意表 B 有一行在表 A 中不存在。

```
Table B
+------+------+------+
| Col1 | Col2 | ColB |
+------+------+------+
| B    | B    | #    |
+------+------+------+ 
```

表 A 反之亦然。

我提出的解决方案将所有表联合到列的交集上以生成骨架。

```
Skeleton:    
SELECT Col1, Col2 FROM TableA
UNION
SELECT Col1, Col2 FROM TableB 
```

一旦我有了骨架，我就为每个表留下了外部连接。

```
LEFT OUTER JOIN TableA AS a ON a.Col1=skeleton.Col1 AND a.Col2=skeleton.Col2
LEFT OUTER JOIN TableB AS b ON b.Col1=skeleton.Col1 AND b.Col2=skeleton.Col2 
```

所以最终的查询看起来像这样

```
SELECT s.*, a.ColA, b.ColB 
FROM 
(
    SELECT Col1, Col2
    FROM TableA
    UNION
    SELECT Col1, Col2
    FROM TableB
) s
LEFT OUTER JOIN TableA a ON a.Col1=s.Col1 AND a.Col2=s.Col2
LEFT OUTER JOIN TableB b ON b.Col1=s.Col1 AND b.Col2=s.Col2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:43:45.017

只是为了 a `full outer join`：

```
select  coalesce(a.Col1, b.Col1) as Col1
.       coalesce(a.Col2, b.Col2) as Col2
,       a.ColA
,       b.ColB
from    A a
full outer join
        B b
on      a.Col1 = b.Col1
        and a.COl2 = b.Col2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:50:54.407

这可能会有所帮助：

```
SELECT Col1, Col2, ColA
FROM A
GROUP BY Col1, Col2, ColA
UNION ALL
SELECT Col1, Col2, ColB
FROM B
GROUP BY ColB 
```

或者看看这里：

[将两个表合并为一个输出](https://stackoverflow.com/questions/1227835/sql-combine-two-tables-for-one-output)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:52:06.243

您可以使用联合解决双重外部联接：

```
SELECT
  TableA.Col1,TableA.Col2,
  TableA.ColA,TableB.ColB
FROM TableA
LEFT JOIN TableB ON TableA.Col1=TableB.Col1 AND TableA.Col2=TableB.Col2

UNION

SELECT
  TableB.Col1,TableB.Col2,
  TableA.ColA,TableB.ColB
FROM TableB
LEFT JOIN TableA ON TableA.Col1=TableB.Col1 AND TableA.Col2=TableB.Col2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T21:55:39.727

天啊。一厢情愿你在乎。

```
-- Sample data.
declare  @TableA as Table ( Col1 VarChar(8), Col2 VarChar(8), ColA Int NULL )
insert into @TableA ( Col1, Col2, ColA ) values
  ( 'A', 'A', 42 ), ( 'A', 'B', 7 )
declare  @TableB as Table ( Col1 VarChar(8), Col2 VarChar(8), ColB Int NULL )
insert into @TableB ( Col1, Col2, ColB ) values
  ( 'A', 'A', 999 ), ( 'B', 'B', -1 )
select * from @TableA
select * from @TableB

-- The query.  Use the aggregate(s) of your choice: SUM, MIN, MAX, AVG.
select Col1, Col2, Sum( ColA ), Sum( ColB )
  from (
  select A.Col1, A.Col2, A.ColA, Cast( NULL as Int ) as [ColB]
    from @TableA as A
  union all
  select B.Col1, B.Col2, Cast( NULL as Int ), B.ColB
    from @TableB as B ) as Edgar
  group by Col1, Col2 
```

# asp.net - ASP.net 中的全局 OnLoggedOut 事件？

> ID：11003660
> 
> 赞同：4
> 
> 时间：2012-06-12T19:40:41.910
> 
> 标签：asp.net, forms-authentication, stay-logged-in

当用户从 ASP.net 网站注销时，有没有办法得到通知？

> **注意：**用户可以在不访问或单击“注销”链接的情况下注销。

当用户注销时，我想清除一些与会话相关的信息，并写入数据库。

> **注意：**有[`LoginStatus.OnLoggedOut`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginstatus.onloggedout.aspx)事件。问题是该控件并不存在于每个页面上，用户也不必使用`LoginStatus`控件来注销（例如，当登录超时或用户注销时）

与 Global.asax 具有全局 On Session Stop 通知的方式相同：

```
void Session_End(object sender, EventArgs e) 
{
} 
```

我假设某处有一个 On User Logged Out 通知：

```
void LoggedOut(object sender, EventArgs e)
{
} 
```

## 奖金阅读

*   [FormsAuthentication.SignOut 方法](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.signout%28v=vs.80%29.aspx)
*   [LoginStatus.OnLoggedOut 方法](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginstatus.onloggedout.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:07:55.923

I disagree. There are times when you would want to know when a user logs out. For example I have an application that needs to scan all logged in users to see if there is "anyone home" at a management level. At times a manager might be surfing the site but not actually logged in. Their sessions might still be active because the manager would have recently logged out but is still surfing the site and the software needs to know that.

In this case I have made HttpRuntime.Cache logic to catch login events and data including user name and IP address, user name, etc. This method is called in:

public static void Application_AuthenticateRequest(object sender, EventArgs e)

I then use that data to perform logic calculating login status and other useful application details.

The following is quick and un-tested but if you are asking this sort of question I am sure you can clean it up :). I hope it helps.

```
 public static void HandleUserLoginLogic()
    {
        string UserName = HttpContext.Current.User.Identity.Name.ToString();
        if (UserName != null)
        {
            // if the user has logged in but we have not performed logic, do it now
            if (HttpRuntime.Cache["Authenticated_" + UserName] == null)
            {
                // absolutely confirm the user has logged in
                if (UsrMan.IsUserLoggedIn())
                {
                    // SETUP MY RUNTIME VARIABLES NOW
                    HttpRuntime.Cache["AuthenticatedIPAddress_" + System.Web.HttpContext.Current.Request.UserHostAddress] = UserName;
                    HttpRuntime.Cache["Authenticated_" + UserName] = true;
                    String[] roles = UsrMan.GetRolesForUser(UserName);
                    // handle roles for this user for future application uses in the future.
                    foreach (string role in roles)
                    {
                        // handle first time condition
                        if (HttpRuntime.Cache["AuthenticatedUserInRole_" + role] != null)
                        {
                            StringCollection scUserRole = (StringCollection)HttpRuntime.Cache["AuthenticatedUserInRole_" + role];
                            if (!scUserRole.Contains(UserName))
                            {
                                scUserRole.Add(UserName);
                                HttpRuntime.Cache["AuthenticatedUserInRole_" + role] = scUserRole;
                            }
                        }
                        // handle standard condition
                        else
                        {
                            StringCollection scUserRole = new StringCollection();
                            scUserRole.Add(UserName);
                            HttpRuntime.Cache["AuthenticatedUserInRole_" + role] = scUserRole;
                        }
                    }
                }
            }
        }

        // HANDLE LOGGED OUT CONDITION
        if ((HttpRuntime.Cache["AuthenticatedIPAddress_" + System.Web.HttpContext.Current.Request.UserHostAddress] != null) && (UserName == null))
        {
            string OldUserName = HttpRuntime.Cache["AuthenticatedIPAddress_" + System.Web.HttpContext.Current.Request.UserHostAddress].ToString();
            HttpRuntime.Cache["Authenticated_" + OldUserName] = null;
            String[] roles = UsrMan.GetRolesForUser(UserName);
            foreach (string role in roles)
            {
                StringCollection scUserRole = (StringCollection)HttpRuntime.Cache["AuthenticatedUserInRole_" + role];
                scUserRole.Remove(UserName);
                if (scUserRole.Count > 0)
                    HttpRuntime.Cache["AuthenticatedUserInRole_" + role] = scUserRole;
                else
                    HttpRuntime.Cache["AuthenticatedUserInRole_" + role] = null;
            }
        }
    }
    public static bool IsUserLoggedIn()
    {
        bool result = false;
        if (HttpContext.Current.User != null &&
      HttpContext.Current.User.Identity != null
          && HttpContext.Current.User.Identity.IsAuthenticated)
        { result = true; }
        return result;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:07:00.150

网站的一个基本问题是，如果用户关闭浏览器，网站永远不会知道。其含义指向更好的解决方案。您必须重新考虑*“登录”*到网站意味着什么。

通常，您没有理由需要知道用户何时*“退出”*我们的网站，因为没有“登录”。每次用户访问页面时，网络服务器都会*验证*他们的身份；这是否通过：

*   NTML
*   Kerberos
*   HttpAuth
*   会话 cookie
*   持久性 cookie
*   其他一些机制（例如您的 IPv6 地址）

用户在每次页面加载*时“登录” 。*浏览器获取页面后，用户不再存在（就网络服务器而言）。这意味着用户在获取页面后立即*“注销” 。*

## 但是登录很慢

有一个特殊的登录事件的通常原因是您可以缓存用户的信息（例如名称、权限）。与其每次刷新页面时都必须进行昂贵的数据库获取，为什么不从缓存中获取呢？但是，作为一名优秀的开发人员，我们还需要在不再需要该信息时使其过期。但是由于无法知道用户何时*“完成”*使用您的网站，因此无法知道何时刷新缓存信息。

所以不要缓存它。

SQL Server 有一套非常先进的数据缓存机制；只需再次查询数据。

另一个尝试可能是将数据存储在用户的`Session`. 这是完全有效的；信息将保留在那里，直到会话结束。但是很多人反对将数据存储在 a 中`Session`，因为这会占用内存。他们主张将其存储在像 SQL Server 这样的数据库中。这又回到了：*只需在 SQL Server 中再次查询*即可。

如果获取信息很昂贵或耗时，那么您*可以*缓存它 - 但使用设计为缓存的缓存：

```
Page.Cache 
```

这是一个别名

```
Page.Application.Cache 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:43:19.823

当您实际注销用户时，实现逻辑是否很重要？或者，如果你让它更全局处理，创建一个事件并订阅它，这样它将是事件驱动的......

# python - Python中的容器列表：标准列表与numpy数组

> ID：11003662
> 
> 赞同：2
> 
> 时间：2012-06-12T19:40:47.787
> 
> 标签：python, memory-management, numpy

我正在编写一些需要存储和访问不同类型元素列表的 python 代码。此列表的每个元素将属于不同的类类型。例如：

```
def file_len(fname):
    i = 0
    with open(fname) as f:
        for i, l in enumerate(f):
            pass
    return i + 1

element_list = [ ]
data = np.loadtxt(filename)

if file_len(filename) == 1 : 
            data = np.loadtxt(filename)
            param1 = data[0]
            param2 = data[1]
            element_list.append(Class1.Class1(param1,param2))
else:
    for field in data:
                    param1 = field[0]
                    param2 = field[1]
                    element_list.append(Class1.Class1(param1, param2) 
```

稍后我将需要多次访问插入在 element_list 上的 Class1 中的方法，但不需要修改列表：

```
for i in xrange(10000):
    for element in element_list:
        result += element.calculate_result(i).real #the results will be complex 
```

有没有一种有效的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:18:21.050

这不是一个完整的答案，但我发现了两件我可以贡献的东西。

这是一个改进的版本`file_len()`。如果文件长度为零，则此选项将返回 0。您的函数为长度为零的文件返回 1，为只有一行的文件返回 1。

```
def file_len(fname):
    i = 0
    with open(fname) as f:
        for i, l in enumerate(f, 1):
            pass
    return i 
```

这是进行计算循环的更快方法。

```
result = sum(e.calculate_result(i).real for i in xrange(10000) for e in element_list) 
```

使用 可能会使其更快`reduce()`，但我认为它不会更快。最大的节省`reduce()`是如果您可以避免一遍又一遍地绑定名称，但是我们需要绑定名称`e`，以便我们可以调用`e.calculate_result(i).real`，即使类型`e`可以是任何东西。

如果你能做这样的事情，它可能会快一点。

```
import itertools as it
import operator as op
result = reduce(op.add, it.imap(SomeClass.calculate_something, it.product(element_list, xrange(10000)))) 
```

同样，主要的节省是避免绑定名称。 `it.product()`返回元组，其中包括`(e, i)`where`e`是来自的元素`element_list`和来自`i`的数字`xrange(10000)`。然后`it.imap()`将调用该函数并将元组作为参数传递。然后`reduce()`将总结一切。实际上，只是跟注`sum()`可能和其他方法一样好，`reduce(op.add)`但您可以尝试两种方法，看看是否其中一种方法比另一种略快。如果你能找出一些合理的东西，`SomeClass.calculate_something`那么也许你可以做到这一点。

嗯，可能值得尝试让`sum()`（或`reduce()`）计算一个复杂的总和，然后在总和完成后丢弃虚部。这会比`.real`每个值访问一次属性更快吗？我不确定，但它可能会帮助您使`reduce()`版本正常工作。

编辑：

您应该尝试在 PyPy 下运行您的程序。

[http://pypy.org/](http://pypy.org/)

如果你这样做，请务必使用这一行而不是我展示的第一行：

```
result = sum(e.calculate_result(i).real for e in element_list for i in xrange(10000)) 
```

这样，您可以`e`连续使用每个元素进行 10000 次调用，这应该有助于 PyPy 即时编译器（“JIT”）生成更好的代码。我不知道 JIT 是否只对 10000 个呼叫有帮助，但似乎这应该是尝试它的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:58:11.213

您可以通过在实例化时传递该视图将类中的结果放入数组中的视图中。如果您访问数据的频率高于调用类方法来更新数据的频率，那么这应该可行。

类似于以下内容...

```
def file_len(fname):
    i = 0
    with open(fname) as f:
        for i, l in enumerate(f):
            pass
    return i + 1

element_list = [ ]
data = np.loadtxt(filename)

array_idx = 0

# length_of_data is the number of elements that will be in element_list
result_array = numpy.zeros(length_of_data, dtype='complex128')

if file_len(filename) == 1 : 
    data = np.loadtxt(filename)
    param1 = data[0]
    param2 = data[1]
    element_list.append(Class1.Class1(param1, param2, 
                            result_array[array_idx:array_idx+1]))
    array_idx += 1
else:
    for field in data:
        param1 = field[0]
        param2 = field[1]
        element_list.append(Class1.Class1(param1, param2,
                            result_array[array_idx:array_idx+1])
        array_idx += 1 
```

在类中，您将直接更新视图。考虑这个最小的例子：

```
import numpy

a = numpy.zeros(5, dtype='complex128')

class Foo(object):

    def __init__(self, real, imag, array_view):
        self._array_view = array_view
        self._array_view[:] = real + 1j*imag #<--- The [:] is needed

element_list = []
for n in range(0, len(a)):
    element_list.append(Foo(n, n+1, a[n:n+1]))

print(a)
print(numpy.sum(a)) 
```

# zip - 是否有直接从 Powerbuilder 12.5 创建 zip 文件的库？

> ID：11003677
> 
> 赞同：0
> 
> 时间：2012-06-12T19:41:20.010
> 
> 标签：zip, powerbuilder

在 powerbuilder 12.5 中，我需要生成一个 zip 文件以通过电子邮件发送。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:12:18.653

[Topwiz Software](http://www.topwizprogramming.com/index.html)的Roland Smith发布了一个[zlib PB 包装器](http://www.topwizprogramming.com/freecode_zlibwapi.html)，它由一个 dll 和一个 PB 对象组成。

在您需要 gzip 流的情况下，我已将 R. Smith 组件扩展为[n_zlib](http://sebastien.kirche.free.fr/powerbuilder/en.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T08:09:00.573

codeplex 上有一个有趣的新项目，名为[PbTools](http://myelkovan.codeplex.com/)。我没有尝试过，但列出的功能之一是

> 此应用程序可以制作 zip，然后复制 zip 文件。

它有一个 CDDL 许可证，并且说它支持 Powerbuilder 5-12.5。

# php - 将信息动态加载到 Twitter Bootstrap 模式

> ID：11003679
> 
> 赞同：10
> 
> 时间：2012-06-12T19:41:35.683
> 
> 标签：php, javascript, jquery, mysql, sql

**问题：**

我想通过使用 jQuery 将链接属性中的值传输到 PHP/SQL 查询。

**HTML 代码：**

```
<a data-toggle="modal" href="#myModal" id="1"><i class="pull-right icon-eye-open"></i>HTML</a> 
```

**PHP代码：**

```
<div id="myModal" class="modal hide fade">
    <div class="modal-header">
      <button class="close" data-dismiss="modal">&times;</button>
      <h3>Title</h3>
    </div>
    <div class="modal-body">            
        <?php
            $query = "SELECT * FROM table WHERE id = ID FROM JQUERY HERE";
            $result = mysql_query($query) or die ('Error (' . mysql_errno() . ') ' . mysql_error());
        ?>
    </div>
    <div class="modal-footer">
      <a href="#" class="btn btn-info" data-dismiss="modal" >Close</a>
    </div>
</div> 
```

**设想：**

当用户单击具有 data-toggle="modal" 的链接元素时，jQuery 应该获取 id-attribute 的值（在这种情况下为 1）并将其发送到 SQL 查询，以便 SQL 查询将看起来像：

```
$query = "SELECT * FROM table WHERE id = 1"; 
```

**jQuery代码：**

```
$("a[data-toggle=modal]").click(function(){
    var essay_id = $(this).attr('id');
    //Find $essay set it to essay_id in PHP
    //Alternatively create a $_SESSION['EID'] here
}); 
```

**问题：**

如何使用 jQuery 在 PHP 中设置变量（$essay）？或者如何通过 jQuery 在 PHP 中创建会话变量？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-12T20:07:37.503

这是解决方案，

```
<a href="#" id="1" class="push">click</a> 
```

在模态主体上使用 div ，就像这样

```
 <div class="modal-body">  

             <div class="something" style="display:none;">
                    // here you can show your output dynamically 
             </div>
    </div> 
```

现在将数据放入`.something`with ajax 调用中。请检查[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)以了解有关 jquery ajax 的更多信息。

```
 $(function(){

   $('.push').click(function(){
      var essay_id = $(this).attr('id');

       $.ajax({
          type : 'post',
           url : 'your_url.php', // in here you should put your query 
          data :  'post_id='+ essay_id, // here you pass your id via ajax .
                     // in php you should use $_POST['post_id'] to get this value 
       success : function(r)
           {
              // now you can show output in your modal 
              $('#mymodal').show();  // put your modal id 
             $('.something').show().html(r);
           }
    });

});

   }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-12T20:46:16.033

**最终解决方案**

HTML 代码：

```
<div id="myModal" class="modal hide fade">
    <div class="modal-header">
      <button class="close" data-dismiss="modal">&times;</button>
      <h3>Title</h3>
    </div>
    <div class="modal-body">            
        <div id="modalContent" style="display:none;">

        </div>
    </div>
    <div class="modal-footer">
      <a href="#" class="btn btn-info" data-dismiss="modal" >Close</a>
    </div>
</div> 
```

**jQuery代码：**

```
$("a[data-toggle=modal]").click(function() 
{   
    var essay_id = $(this).attr('id');

    $.ajax({
        cache: false,
        type: 'POST',
        url: 'backend.php',
        data: 'EID='+essay_id,
        success: function(data) 
        {
            $('#myModal').show();
            $('#modalContent').show().html(data);
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:44:55.317

1.  使用 jQuery 获取 ID
2.  通过 AJAX 将其传递给某个脚本
3.  取回您的结果，并随心所欲地处理它们

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - 无法使用 python 或 java 从 yahoo 下载 csv 格式的数据

> ID：11003680
> 
> 赞同：-1
> 
> 时间：2012-06-12T19:41:36.080
> 
> 标签：java, python

我有两个从 yahoo finace 下载数据的程序（java 和 python）。我正在使用这个网址

[http://finance.yahoo.com/d/quotes.csv?s=GE&f=sl1d1](http://finance.yahoo.com/d/quotes.csv?s=GE&f=sl1d1)

它一直有效，直到两天前。我尝试调试，但似乎雅虎在通过 csv 格式发送数据时存在问题。如果我使用普通雅虎 html 页面中使用的相同 URL

[http://finance.yahoo.com/q?s=GE&ql=1](http://finance.yahoo.com/q?s=GE&ql=1)

一切正常。

有人可以帮忙吗？我去年打开了相同的网址，并且一直有效...

谢谢和问候马可

这是我正在使用的示例 python 代码（打开一个 URL）

f = urllib2.urlopen(myurl) data = f.read() 打印数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:02:28.893

尝试从此链接下载数据

[http://ichart.finance.yahoo.com/table.csv?s=GE&d=5&e=12&f=2012&g=d&a=0&b=2&c=1962&ignore=.csv](http://ichart.finance.yahoo.com/table.csv?s=GE&d=5&e=12&f=2012&g=d&a=0&b=2&c=1962&ignore=.csv)

# facebook - 将 facebook Like IMAGE 添加到网站（但与 FB TOS/平台政策保持一致）

> ID：11003681
> 
> 赞同：-4
> 
> 时间：2012-06-12T19:41:39.177
> 
> 标签：facebook, button, facebook-like, facebook-social-plugins

我想要一张 facebook 外观的图片（就像本页左侧的图片一样）。应该单击该图像才能“喜欢”给定页面。

我怎么做？（并根据 Facebook 的 TOS / 平台政策执行？）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:47:12.573

所以你想要一个[分享按钮](http://developers.facebook.com/docs/share/)而不是一个喜欢按钮？

请记住，这已被弃用，取而代之的是喜欢按钮，只需创建您的共享 URL 并链接到它

```
http://www.facebook.com/sharer.php?u=<url to share>&t=<title of content> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:46:54.273

您需要参考 Facebook 上的品牌资源中心了解使用情况[https://www.facebook.com/brandpermissions/logos.php](https://www.facebook.com/brandpermissions/logos.php)

# cocos2d-iphone - “Cocos2d”复制的动作没有响应？

> ID：11003689
> 
> 赞同：0
> 
> 时间：2012-06-12T19:42:02.650
> 
> 标签：cocos2d-iphone

我在 2 个精灵上运行动画，如下所示：

```
-(void) startFootballAnimation {

CCAnimation* footballAnim = [CCAnimation animationWithFrame:@"Football" frameCount:60 delay:0.005f];
spiral = [CCAnimate actionWithAnimation:footballAnim];
CCRepeatForever* repeat = [CCRepeatForever actionWithAction:spiral];
[self runAction:repeat];
[secondFootball runAction:[[repeat copy] autorelease]];
} 
```

我遇到的问题是，当我调用此方法时：

```
 - (void) slowAnimation {

[spiral setDuration:[spiral duration] + 0.01];
} 
```

....它只会减慢第一个精灵的动画，而不是第二个。我是否需要对复制的动作做一些不同的事情来让它们对动画的减慢做出反应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:49:53.547

在对象上调用 copy`repeat`也会复制内部动作。您可以通过查看CCAction.m 中`CCRepeatForever`的实现来了解这一点。`copyWithZone:`这很好，因为一个动作只能有一个目标节点。

所以是的，要在上面的评论中回答您的问题，您确实需要为每个精灵创建一个新动作。您可以使用复制方法快速复制您的操作，但您必须`slowAnimation`单独将更改应用到他们的行为（例如您的东西）。

# io - 过滤掉断管错误

> ID：11003692
> 
> 赞同：13
> 
> 时间：2012-06-12T19:42:23.193
> 
> 标签：io, go, system-calls, broken-pipe, epipe

我`error`从一个调用中得到一个返回`io.Copy`，我已经将一个套接字 ( `TCPConn`) 作为目标传递给它。预计远程主机会在他们受够了之后简单地断开连接，而我没有收到他们的任何信息。

发生下降时，我收到此错误：

```
write tcp 192.168.26.5:21277: broken pipe 
```

但我只有一个`error`界面。如何区分断管错误和其他类型的错误？

```
if err.Errno == EPIPE... 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-12T20:20:00.197

损坏的管道错误在 syscall 包中定义。您可以使用相等运算符将错误与系统调用中的错误进行比较。检查[http://golang.org/pkg/syscall/#constants](http://golang.org/pkg/syscall/#constants)以获取系统调用错误的完整列表。在页面上搜索“EPIPE”，您会发现所有已定义的错误组合在一起。

```
if err == syscall.EPIPE {
    /* ignore */
} 
```

如果您希望获得实际的 errno 编号（尽管它非常无用），您可以使用类型断言：

```
if e, ok := err.(syscall.Errno); ok {
    errno = uintptr(e)
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-10-03T22:19:31.740

从 go 1.13 开始，您可以使用[errors.Is](https://golang.org/pkg/errors/#Is)而不是类型断言。

```
if errors.Is(err, syscall.EPIPE) {
  // broken pipe
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T19:56:27.537

除了`error`接口之外的所有内容就足以执行类型断言或类型切换以显示接口所持有的具体类型。

# extjs - 带有行编辑器的 Extjs 3.4 pivotgrid

> ID：11003693
> 
> 赞同：1
> 
> 时间：2012-06-12T19:42:24.740
> 
> 标签：extjs, grid, pivot, extjs3

有人知道如何用**编辑器创建一个****pivotgrid**吗？我真的需要它。

 **谢谢。**

# python - 将数据库内容与代码一起导入..

> ID：11003698
> 
> 赞同：1
> 
> 时间：2012-06-12T19:42:42.443
> 
> 标签：python, mysql, database, relational-database, mysql-python

我用 Python 编写了一个代码，可以访问我计算机中的 Mysql 数据库。我的问题是如何让我的程序在其他机器上运行，即如何传输数据库？感谢您阅读...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:53:41.457

use the tools that come with MYSQL installation from command line

backup

```
mysqldump -u root -p pass21 --databases yourdb > multibackup.sql 
```

restore

```
mysql -u sadmin -p pass21 Customers < multibackup.sql 
```

[Backing-up-and-restoring-your-MySQL-Database](http://www.devshed.com/c/a/MySQL/Backing-up-and-restoring-your-MySQL-Database/1/)

# excel - Excel中矩阵中的元素总和

> ID：11003717
> 
> 赞同：1
> 
> 时间：2012-06-12T19:43:49.950
> 
> 标签：excel

```
id  a   b   c

1   0   0   0
1   0   0   0
2   0   0   0
2   0   0   0
3   1   2   3
3   0   0   1 
```

鉴于上述矩阵，我想创建一个新矩阵，它将给定年份（a、b 或 c）中给定 id 的第一个矩阵中的数字相加。因此，对于上述内容，它应该如下所示：

```
 1   2   3
a   0   0   1
b   0   0   2
c   0   0   4 
```

谁能看到该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:44:54.380

尝试使用 SUMPRODUCT 而不是 SUMIFS，例如

`=SUMPRODUCT(B2:D7,(B1:D1="a")*(A2:A7=1))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:43:00.247

当数据标题已经到位且数据范围不太大时，其他回复中给出的公式解决方案将很有效。

数据透视表为您创建行和列标题，并在您单击刷新按钮时随着新数据的添加而更新，当数据范围较大时，它也会显着加快。

![在此处输入图像描述](../Images/a61ba19113da898cd4e9c5e4bb1e6f28.png)

**脚步**

A)`Insert | Table`为您的数据范围选择，并给它一个合适的名称，默认为*Table1*

B) 通过快捷方式访问数据透视表向导`Alt+D+P`（这不在默认菜单上）。

```
1)  Multiple Consolidation Ranges 
2a) I will Create the Page Fields
2b) Range: Table1[#All]  Page Fields: 0
2c) Existing Worksheet: $A$7 
```

C）点击完成，切换行和列字段并关闭总计和自动格式化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:52:30.140

我建议您尝试使用数据透视表解决该问题。
您可以使用以下 2 个链接来了解该功能：
[http://www.cpearson.com/excel/pivots.htm](http://www.cpearson.com/excel/pivots.htm)
[http://www.youtube.com/watch?v=7zHLnUCtfUk](http://www.youtube.com/watch?v=7zHLnUCtfUk)

Pivot 的唯一缺点是，如果源范围的大小发生变化，Pivot 将不会自动调整。因此，一旦您设法解决了最初的问题并了解了数据透视表的强大功能，我建议您使用[动态命名范围](http://www.cpearson.com/excel/excelF.htm#DynamicRanges)作为数据透视表的来源。

* * *

编辑：我觉得[巴里胡迪尼的解决方案](https://stackoverflow.com/a/11004602/78522)更简单。我在下面复制了它（所有功劳归他所有！） ![在此处输入图像描述](../Images/603bff0765dc14370de1cf510b8b0e12.png)

# c# - 处理从 Checkboxlist 中选择的项目

> ID：11003726
> 
> 赞同：1
> 
> 时间：2012-06-12T19:44:41.977
> 
> 标签：c#, asp.net, visual-studio-2005

感谢以下建议：我有一个名为 CBL_categ 的复选框列表，其中包含 20 多个项目。我从中选择了一些项目，并将下面的这段代码与按下按钮相关联。最后的总和总是为零。为什么？

```
protected void FButton_Click(object sender, EventArgs e)
        {
            int sum=0;

            for (int i = 1; i < 20; i++)
            {
                if (CBL_categ.Items[i].Selected)
                    sum = sum + 1;
            }
            statusLabel.Text += " " + sum;

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T20:04:05.223

我不会使用您提供的代码。它假设该列表将*始终*包含 20 个项目。这可能导致超出范围的错误，并非所有项目都被计算在内，等等。我会使用这样的东西：

```
protected void FButton_Click(object sender, EventArgs e)
    {
        int sum=0;

        foreach(ListItem item in CBL_categ.Items)
        {
          if(item.Selected){
             sum++;
          }             
        }

        statusLabel.Text += " " + sum;

    } 
```

听起来像是在实际使用此方法之前您正在重新绑定 ListBox。因此，例如，如果您的 Page_Load 方法如下所示：

```
 protected void Page_Load(object sender, EventArgs e)
 {
      //This gets called before your event on postback and will erase your selected items.
      BindListBox();
 } 
```

那有意义吗？

编辑：

如果您的 Page_Load 看起来确实像那样修改它，那么它看起来像这样来纠正问题：

```
 protected void Page_Load(object sender, EventArgs e)
 {
      if(!Page.IsPostBack){
           BindListBox();
      }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:01:30.173

当您填充您的复选框列表时，请确保您正在检查页面是否不在回发中，即在 page_load 上检查 if(!Page.IsPostBack){populate your list} 之类的内容，否则您只会覆盖选择。

# javascript - 为什么这个表单上会出现 JS 错误，这取决于所使用的标记？

> ID：11003727
> 
> 赞同：0
> 
> 时间：2012-06-12T19:44:42.697
> 
> 标签：javascript, html, forms

我正在尝试将旧的 JavaScript 计算器从旧站点移植到新站点。旧版计算器是一种包含大量表格/div 标记的表格。只有一个 JS 文件可以处理这个计算器的所有逻辑。当您填写 calc 中的每个输入字段时，onChange() 会调用 JS 文件中定义的函数。这一切都很好；Chrome 开发工具中没有显示错误，我得到了我期望的结果。

由于这个计算器是一团乱七八糟的标记，我已经去掉了很多不必要的元素和内联样式来创建一个更短（标记长度）的表单。问题是，当我尝试将计算器与我的新标记和*相同*的旧 JS 文件一起使用时，它不起作用。或者，我应该说，大约 98% 的方法都不起作用。它似乎仍在输出一些数字，但不是全部。一旦我切换回旧标记，它就会再次起作用。

使用我的新标记，我得到“无法读取未定义的属性长度”。我不知道如何解决这个问题，因为我知道一些字段正在将它们的值提交给 JS。我也不明白为什么没有错误，并且使用旧 html 的计算按预期工作（见下面的 JSFiddle 链接）。

**更新：**这是一个完整的例子： http: [//machinesandwich.com/demo.html](http://machinesandwich.com/demo.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:21:25.913

这有点难找，但缺点是*您的标记与 JavaScript 的预期不一致*（在多个地方）。

我能找到的第一个实例是您的新标记包含两个名为`ISB_Elec`.

在那种情况下，当`onchange`事件被触发时，`fnISBud(form)`被调用，随后，调用`fnStrToInt(form.ISB_Elec.value)`. `fnStrToInt`期待一个字符串，但有两个同名的表单元素，它正在传递一个[NodeList](https://developer.mozilla.org/En/DOM/NodeList)。然后`for`循环抛出异常。

这至少发生在两个表单域都被命名的地方`ISB_Trans_Other`。

最后，您的`fnISBud(form)`函数会执行一系列特定于字段的计算，并在一个地方调用`fnStrToInt(form.ISB_Ins_Auto.value)`，但是在您的标记中没有命名输入`ISB_Ins_Auto`- 再次引发异常。

**总之，仔细检查你的标记，并确保你正确地包含并命名`<input />`了你的 JS 函数所期望的每个元素。**

# asp.net - 经典 ASP '请求执行' 永远不会大于 1

> ID：11003728
> 
> 赞同：2
> 
> 时间：2012-06-12T19:44:46.687
> 
> 标签：asp.net, multithreading, asp-classic, perfmon

我们有一个复杂的应用程序，它使用简短的 ASP servlet 提供 AJAX JSON 流（使用 ADO 来获取数据）。任何给定的会话都可以同时从 10-20 个这些请求中启动。在构建负载时，我们比预期更早地遇到了严重的性能问题。（服务器是双 XEON、RAID 5、4gb 等）。在 perfmon 中进行调查，我们注意到“请求执行”数字永远停留在 1。永远不会更高。研究表明，20-50 的数字并不少见。Requests Queued 将徘徊在 10-20 左右，等待时间也会攀升。

我们已经将 ASPProcessorThreadMax 从默认的 25 设置为 40，但没有任何效果。它似乎一次只能处理一个请求，不用说，这是行不通的。我找不到任何描述这个特定问题的东西。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:07:28.327

ASP 会话对象被限制为单线程单元 (STA)。因此，对同一会话的 ASP 脚本的请求只能按顺序处理。

即使跨多个会话，您也可能只看到 1 个执行 ASP 脚本的另一个原因是已为 ASP 启用调试。这会导致 ASP 处理忽略 ASPProcessorThreadMax 并假装它被设置为 1。

要消除此问题，请[确保未启用调试](https://stackoverflow.com/a/1138210/185123)并关闭“启用会话状态”。如果您在代码中使用 Session 对象，则需要找到替代方法，例如 DB 支持的状态。

但是，您期望在现场制作中有多少活动的并发会话？也许整体用户体验不会真正受到每个会话的请求序列化的影响。

# javascript - 比较和排序javascript数组

> ID：11003730
> 
> 赞同：0
> 
> 时间：2012-06-12T19:44:53.897
> 
> 标签：javascript, jquery

这可能会有点令人困惑，我不确定它是否可能，但我会很感激任何帮助。我有以下数组（列表的项目和数量可能会改变，这只是一个例子）：

```
var list_1 = ["A - 2" , "E - 5" , "C - 7"];
var list_2 = ["D - 2" , "A - 2" , "E - 3"];
var list_3 = ["C - 1" , "E - 8" , "A - 7"]; 
```

**我的预期输出是：**

```
var final = ["A - 2" , "C - 1" , "D - 2" , "E - 3"]; 
```

**我正在尝试做的事情：**

我试图弄清楚如何遍历每个数组项，查看项开头的字母是否存在于前一个数组中，如果该项中的数字低于前一项，则将其替换为'final ' 列表。

任何想法，或者这是不可能的？

jQuery 是可以接受的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:56:46.867

```
var list_1 = ["A - 2" , "E - 5" , "C - 7"];
var list_2 = ["D - 2" , "A - 2" , "E - 3"];
var list_3 = ["C - 1" , "E - 8" , "A - 7"]; 
```

首先，合并列表（第三个 + 第二个 + 第一个）：

```
var list = list_3.concat(list_2).concat(list_1); 
```

创建一个地图，您将在其中放置每个字母的最小数字：

```
var final_map = {}; 
```

遍历所有项目，将每个项目拆分为字母 ( `parts[0]`) 和数字 ( `parts[1]`)。

您将获得给定字母的当前最低数字。如果没有数字或新数字低于当前最低的数字，则更新地图。

```
list.forEach(function (item) {
  var parts = item.split(' - ');
  var current = final_map[parts[0]];

  if (!current || parts[1] < current) {
    final_map[parts[0]] = parts[1];
  }
}); 
```

最后，将地图转换为数组。

```
var final = [];
Object.keys(final_map).sort().forEach(function (key) {
  final.push(key + ' - ' + final_map[key]);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:51:57.953

Well, you've pretty much answered your question yourself. All you need now is to change human-readable algorithm to JavaScript. Iterate over lists with `for` up to `.length` elements, use `String.substring` or regexp to split data and save maximum found number in an object, where letter will be key and number - the value. Then just create final array from this object in yet another `for` loop and `sort` it, specifying custom function.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:52:53.140

I would just create a hash table that the key will be the integer while the value will just be a list of the letters. Than when it is time for you to print it you just go through the key + value as long as the value is not used before. You can also write your own sort function that really will look at the number first

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T19:50:53.017

您必须手动遍历数组：

```
var final = [];
$.each(list_1, function(i) { 
  // get each of your elements at index i. Ex list_1[i]
  // do the comparison, and push them to an final
  // possibly split the current element to match the letter and number
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T19:54:07.057

我会使用查找来保存当前值并遍历数组。

重新排列您的列表，

```
var lists = [["A - 2" , "E - 5" , "C - 7"], 
             ["D - 2" , "A - 2" , "E - 3"], 
             ["C - 1" , "E - 8" , "A - 7"]]; 
```

使用这个，

```
var f = {}; 
for (var i = 0; i < lists.length; i++) { 
  for (var j = 0; j < lists[i].length; j++) { 
    var s = lists[i][j].split(' - '); 
    var ex = f[s[0]]; 
    if (!ex || ex > s[1]) 
      f[s[0]] = s[1];
  } 
}; 
var a = [];
for (var obj in f) {
  if (f.hasOwnProperty(obj)) { 
    a.push('' + obj + ' - ' + f[obj]);
  }
}; 
```

给

```
["A - 2", "E - 3", "C - 1", "D - 2"] 
```

# oracle - 将参数绑定到 Oracle 动态 SQL

> ID：11003733
> 
> 赞同：9
> 
> 时间：2012-06-12T19:45:05.260
> 
> 标签：oracle, parameters, dynamic-sql

我有一个接受多个参数的存储过程（即 pName、pHeight、pTeam）

我有这样的查询：

```
SQLQuery VARCHAR2(6000);
TestCursor T_CURSOR;

SQLQuery := 'SELECT ID, Name, Height, Team FROM MyTable WHERE ID IS NOT NULL ';

-- Build the query based on the parameters passed.
IF pName IS NOT NULL
  SQLQuery := SQLQuery || 'AND Name LIKE :pName ';
END IF;

IF pHeight IS > 0
  SQLQuery := SQLQuery || 'AND Height = :pHeight ';
END IF;

IF pTeam IS NOT NULL
  SQLQuery := SQLQuery || 'AND Team LIKE :pTeam ';
END IF;

OPEN TestCursor FOR SQLQuery USING pName, pHeight, pTeam; 
```

如果我执行传递所有参数的过程，它会正常运行。

但是如果我只传递了一个或两个参数，那么程序就会出错：

```
ORA-01006: bind variable does not exist 
```

如何根据使用参数值的位置有选择地将变量与参数绑定？例如，如果只传递了 pName，那么我将只执行查询：

```
OPEN TestCursor FOR SQLQuery USING pName; 
```

或者如果 pName 和 pTeam 都通过了，那么：

```
OPEN TestCursor FOR SQLQuery USING pName, pTeam; 
```

希望有人可以提出更多解决此问题的方法。谢谢。

编辑：我实际上可以使用以下内容：

-- 根据传递的参数构建查询。如果 pName 不是 NULL SQLQuery := SQLQuery || '和名字一样''' || 姓名 || ''''; 万一;

```
IF pHeight IS > 0
  SQLQuery := SQLQuery || 'AND Height = pHeight ';
END IF;

IF pTeam IS NOT NULL
  SQLQuery := SQLQuery || 'AND Team LIKE ''' || pTeam || ''' ';
END IF;

OPEN TestCursor FOR SQLQuery; 
```

但这很容易受到 SQL 注入的影响......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T20:52:43.940

您可以使用[DBMS_SQL](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_sql.htm#sthref7488)包。这提供了另一种运行动态 SQL 的方法。使用起来可能有点麻烦，但它可以更灵活，尤其是在绑定参数数量变化的情况下。

以下是您可以使用它的方法（警告：我尚未对此进行测试）：

```
FUNCTION player_search (
   pName        IN VARCHAR2,
   pHeight      IN NUMBER,
   pTeam        IN VARCHAR2
) RETURN SYS_REFCURSOR
IS 
  cursor_name   INTEGER;
  ignore        INTEGER;
  id_var        MyTable.ID%TYPE;
  name_var      MyTable.Name%TYPE;
  height_var    MyTable.Height%TYPE;
  team_var      MyTable.Team%TYPE;
BEGIN
  -- Put together SQLQuery here...

  -- Open the cursor and parse the query         
  cursor_name := DBMS_SQL.OPEN_CURSOR; 
  DBMS_SQL.PARSE(cursor_name, SQLQuery, DBMS_SQL.NATIVE); 

  -- Define the columns that the query returns.
  -- (The last number for columns 2 and 4 is the size of the
  -- VARCHAR2 columns.  Feel free to change them.)
  DBMS_SQL.DEFINE_COLUMN(cursor_name, 1, id_var); 
  DBMS_SQL.DEFINE_COLUMN(cursor_name, 2, name_var, 30); 
  DBMS_SQL.DEFINE_COLUMN(cursor_name, 3, height_var); 
  DBMS_SQL.DEFINE_COLUMN(cursor_name, 4, team_var, 30); 

  -- Add bind variables depending on whether they were added to
  -- the query.
  IF pName IS NOT NULL THEN
    DBMS_SQL.BIND_VARIABLE(cursor_name, ':pName', pName);
  END IF;

  IF pHeight > 0 THEN
    DBMS_SQL.BIND_VARIABLE(cursor_name, ':pHeight', pHeight);
  END IF;

  IF pTeam IS NOT NULL THEN
    DBMS_SQL.BIND_VARIABLE(cursor_name, ':pTeam', pTeam);
  END IF;

  -- Run the query.
  -- (The return value of DBMS_SQL.EXECUTE for SELECT queries is undefined,
  -- so we must ignore it.)
  ignore := DBMS_SQL.EXECUTE(cursor_name); 

  -- Convert the DBMS_SQL cursor into a PL/SQL REF CURSOR.
  RETURN DBMS_SQL.TO_REFCURSOR(cursor_name);

EXCEPTION 
  WHEN OTHERS THEN 
    -- Ensure that the cursor is closed.
    IF DBMS_SQL.IS_OPEN(cursor_name) THEN 
      DBMS_SQL.CLOSE_CURSOR(cursor_name); 
    END IF; 
    RAISE; 
END; 
```

（注：[`DBMS_SQL.TO_REFCURSOR`](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_sql.htm#CHDFDCDE)是 Oracle 11g 中的新增内容。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-12T20:05:19.827

这不是非常优雅，但这意味着您始终可以提供所有三个绑定变量，即使其中一些为空。您只需在需要时添加额外的`WHERE`子句。

（我尝试格式化动态 SQL 以使其更具可读性，您可以将其作为一个长字符串提供）。

```
FUNCTION myFunc (
   pName   IN VARCHAR2,
   pHeight IN VARCHAR2,
   pTeam   IN VARCHAR2
)
   RETURN T_CURSOR
IS
   -- Local Variables
   SQLQuery   VARCHAR2(6000);
   TestCursor T_CURSOR;
BEGIN
   -- Build SQL query
   SQLQuery := 'WITH t_binds '||
                ' AS (SELECT :v_name AS bv_name, '||
                           ' :v_height AS bv_height, '||
                           ' :v_team AS bv_team '||
                      ' FROM dual) '||
               ' SELECT id, '||
                      ' name, '||
                      ' height, '||
                      ' team '||
                 ' FROM MyTable, '||
                      ' t_binds '||
                ' WHERE id IS NOT NULL';

   -- Build the query WHERE clause based on the parameters passed.
   IF pName IS NOT NULL
   THEN
     SQLQuery := SQLQuery || ' AND Name LIKE bv_name ';
   END IF;

   IF pHeight > 0
   THEN
     SQLQuery := SQLQuery || ' AND Height = bv_height ';
   END IF;

   IF pTeam IS NOT NULL
   THEN
     SQLQuery := SQLQuery || ' AND Team LIKE bv_team ';
   END IF;

   OPEN TestCursor 
    FOR SQLQuery 
  USING pName, 
        pHeight, 
        pTeam;

   -- Return the cursor
   RETURN TestCursor;
END myFunc; 
```

我不在具有数据库访问权限的工作站前，所以我无法测试该功能，但它应该很接近（请原谅任何语法错误，这是漫长的一天！）

希望能帮助到你...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-23T10:13:13.700

我使用的方法是在动态 SQL 中包含一个 ELSE 案例，该案例的状态与 IF 相反。您的代码测试 pName 不为空，因此我将在生成的查询中添加一个子句来测试 pName IS Null。这样，您每次都可以传递相同的参数，而不会影响查询的结果。

```
SQLQuery VARCHAR2(6000);
TestCursor T_CURSOR;

SQLQuery := 'SELECT ID, Name, Height, Team FROM MyTable WHERE ID IS NOT NULL ';

-- Build the query based on the parameters passed.
IF pName IS NOT NULL  
  SQLQuery := SQLQuery || 'AND Name LIKE :pName ';
ELSE 
  SQLQuery := SQLQuery || 'AND :pName IS NULL';
END IF;

IF pHeight IS > 0
  SQLQuery := SQLQuery || 'AND Height = :pHeight ';
ELSE
  SQLQuery := SQLQuery || 'AND :pHeight <=0 ';
END IF;

IF pTeam IS NOT NULL
  SQLQuery := SQLQuery || 'AND Team LIKE :pTeam ';
ELSE
  SQLQuery := SQLQuery || 'AND :pTeam IS NULL';
END IF;

OPEN TestCursor FOR SQLQuery USING pName, pHeight, pTeam; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T10:57:59.137

怎么样

```
SQLQuery := 'SELECT ID, Name, Height, Team FROM MyTable WHERE ID IS NOT NULL ';

SQLQuery := SQLQuery || 'AND Name LIKE :pName ';
SQLQuery := SQLQuery || 'AND Team LIKE :pTeam ';
SQLQuery := SQLQuery || 'AND (Height = :pHeight OR :pHeight = 0)';

OPEN TestCursor FOR SQLQuery USING nvl(pName, '%'), nvl(pTeam, '%'), nvl(pHeight, 0), nvl(pHeight, 0); 
```

?

# coffeescript - CoffeeScript - 推送后删除项目

> ID：11003734
> 
> 赞同：2
> 
> 时间：2012-06-12T19:45:12.277
> 
> 标签：coffeescript

如何从被推入的数组中删除一个元素`push`？

```
animals = []

class Cat

cat = new Cat

animals.push cat 
```

现在我可以说类似

```
animals.pull cat 
```

把猫从阵列中拿走？假设`cat`变量与被推入的变量相同。我只是想创建一种动态集合..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T19:51:57.137

```
index = animals.indexOf cat
animals.splice index, 1 if index isnt -1 
```

Remember, a CoffeeScript array is just a JavaScript array, so you can look at [any appropriate documentation](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T20:28:02.343

如果您`push`将元素添加到数组中，则会将其添加到最后一个位置。然后您可以将`pop`其返回。如果您想用数组对[堆栈建模，这两种方法很有用。](http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29)

```
array = []

array.push 'hello' # array is now ['hello']
array.push 'world' # array is now ['hello', 'world']

alert array.pop() # alerts 'world', array is now ['hello']
alert array.pop() # alerts 'hello', array is now [] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T22:39:59.917

你可以这样做：

```
animals = []

class Cat

cat = new Cat

animals.push cat

anotherReferenceToCat = animals.pop()

# animals.length === 0 
```

# c# - 如何为具有相同目的的同一解决方案中的 C# 和 VB.NET 项目赋予有意义的名称？

> ID：11003736
> 
> 赞同：4
> 
> 时间：2012-06-12T19:45:24.270
> 
> 标签：c#, .net, vb.net

我有两个包含扩展方法的项目。一个项目是使用 C# 实现的，另一个项目是使用 VB.NET 实现的，因为有些事情我可以在 VB.NET 中做而我在 C# 中做不到，我想在我的扩展方法中利用这些功能。

如何命名项目以传达它们的含义，同时区分它们是用不同的语言实现的？

对于 C# 精英：

VB.NET 支持的 C# 不支持的功能之一：

[C# 扩展方法不允许通过引用传递参数吗？](https://stackoverflow.com/questions/1259103/doesnt-c-sharp-extension-methods-allow-passing-parameters-by-reference)

仅供参考：这不适用于引用类型，这是我感兴趣的。

```
public static void LoadFromXml<T>(this T targetObject, string xml)
{

    targetObject = _Serializer.DeserializeFromXML<T>(xml);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T19:56:14.590

> 如何命名项目以传达它们的含义，同时区分它们是用不同的语言实现的？

我实际上*不会*传达这一点。给这两个项目起一个有意义的名字。每个项目都应该可以被两种语言使用，因此无论用于创建项目的语言如何，名称都应该是有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T19:51:04.267

Ah... just saw your comment. I would recommend implementing most of your extension methods in C# and calling it "Core", then implement the extra features in VB.NET and call it "Extended".

Then, have the VB.NET explicitly reference Core and inherit from it. Users can then use the Core assembly for most of the tasks, or Extended for the additional features.

EDIT: I still think your users would be better off if you figured out a way NOT to split the assemblies, but obviously I don't know all of your requirements/implementation details.

# bash - 将 bash 脚本重定向到 /dev/null 未执行？

> ID：11003743
> 
> 赞同：0
> 
> 时间：2012-06-12T19:46:14.937
> 
> 标签：bash, exec

所以我对 bash 很陌生，我正在为`build-essential`and制作安装程序`OpenSSL`。问题是它总是在第一`exec`行之后停止。这是我的代码：

```
#!/bin/bash
echo "Installing build-essential"
exec sudo apt-get install build-essential > /dev/null 2>&1
echo "Finished installing build-essential"
echo ""

echo "Installing OpenSSL"
exec sudo apt-get install openssl > /dev/null 2>&1
echo "Finished installing OpenSSL"
echo ""

echo "Updates complete!" 
```

这是输出：

```
Installing build-essential
[sudo] password for matthew: 
```

请记住，我是几个小时前才开始的。抱歉转储问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:49:45.000

`exec`永远不会返回调用脚本。它用以下命令替换当前进程`exec`。只需完全删除`exec`，让 apt-get 像任何其他命令一样运行。

*注意：确实*有返回调用脚本的用途`exec`，例如*只*进行 I/O 重定向的那些。

# postgresql - PostgreSQL 可以配置为“无共享，并行数据库”吗？

> ID：11003746
> 
> 赞同：0
> 
> 时间：2012-06-12T19:46:18.963
> 
> 标签：postgresql, parallel-processing, postgis

我用谷歌搜索了很多，但只有相关的结果是 pg-pool。

所以我的问题是 PostgreSQL 是否支持分区并行数据库？更具体地说，它是否适用于 PostGIS ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:28:47.977

看看 Postgres-XC：

[http://postgres-xc.sourceforge.net/](http://postgres-xc.sourceforge.net/)

# php - 按日期排序并选择要在 php 中查看的类别

> ID：11003749
> 
> 赞同：0
> 
> 时间：2012-06-12T19:46:32.553
> 
> 标签：php, mysql, sql, sql-order-by

这段代码让我查看报告的所有问题，它们按日期排序（最旧的在上面）。我需要插入一些东西来让我查看每个类别中的问题。类别由Categorie_ID 标识。有什么帮助吗？

```
 <?php
$db=mysql_connect("localhost","username","password") or die("Kan niet verbinden: ".mysql_error());
mysql_select_db(,$db);

$sql = "SELECT * FROM Probleem ORDER BY Datum ASC";
$resultaat  = mysql_query($sql); // voer SQL code uit

echo "<table border=1>";
echo "<tr><td><b>Categorie</b></td><td><b>Datum</b></td><td><b>Omschrijving;</b></td><td><b>Gebruiker_ID</b></td></tr>"; // bovenste regel
if ($resultaat) {
    while ($rij = mysql_fetch_array($resultaat)) {

    echo "<tr>";
    echo "<td>".$rij["Categorie_ID"]."</td>";
    echo "<td>".$rij["Datum"]."</td>";
    echo "<td>".$rij["Probleem"]."</td>";
    echo "<td>".$rij["Gebruiker_ID"]."</td>";
    echo "</tr>";
    }
}
echo "</table>";
mysql_close($db);
?> 
```

您可以使用此代码选择类别。

```
<form method="post" action="<?php echo $_SERVER["../h5/PHP_SELF"] ?>">
`Selecteer een categorie:<select name="categorieid">
<?php
$db=mysql_connect(("localhost","username","password") or die("Kan niet verbinden: ".mysql_error());
mysql_select_db(",$db);

    $sql = "SELECT * FROM Categorie";

    $resultaat  = mysql_query($sql); // voer SQL code uit
    while ($rij = mysql_fetch_array($resultaat)) {
        echo "<option value=\"";
        echo $rij["Categorie_ID"]."\">";
        echo $rij["Categorienaam"]."</option>\n";
    }

mysql_close($db);
? 
```

> `

用这段代码试过了，没用，什么也没做（只显示类别）

```
<form method="post" action="<?php echo $_SERVER["../h5/PHP_SELF"] ?>">
Selecteer een categorie:<select name="categorieid">
<?php
$db=mysql_connect("localhost","username","password" or die("Kan niet verbinden: ".mysql_error());
mysql_select_db("",$db);

    $sql = "SELECT * FROM Categorie";

    $resultaat  = mysql_query($sql); // voer SQL code uit
    while ($rij = mysql_fetch_array($resultaat)) {
        echo "<option value=\"";
        echo $rij["Categorie_ID"]."\">";
        echo $rij["Categorienaam"]."</option>\n";
    }

mysql_close($db);

?>

<?php
if ($_POST["knop"]) {
$db=mysql_connect(("localhost","username","password") or die("Kan niet verbinden: ".mysql_error());
mysql_select_db("",$db);

$sql = "SELECT * FROM Probleem";
if(isset($_POST["categorieid"])){
    $cat_id = $_POST["categorieid"];
    //sanitize $cat_id to reduce injection risk here
    $sql .= " WHERE `categorieid_id` = $cat_id"; //use correct column name
}
$sql .= " ORDER BY Datum ASC";
$resultaat  = mysql_query($sql); // voer SQL code uit

echo "<table border=1>";
echo "<tr><td><b>Probleem_ID</b></td><td><b>Categorie</b></td><td><b>Datum</b></td><td><b>Omschrijving;</b></td><td><b>Gebruiker_ID</b></td></tr>"; // bovenste regel
if ($resultaat) {
    while ($rij = mysql_fetch_array($resultaat)) {

    echo "<tr>";
echo "<td>".$rij['Probleem_ID']."</td>";
echo "<td>".$rij['Categorie_ID']."</td>";
echo "<td>".$rij['Datum']."</td>";
echo "<td>".$rij['Probleem']."</td>";
echo "<td>".$rij['Gebruiker_ID']."</td>";
echo "</tr>";
    }
}
echo "</table>";
mysql_close($db);
}
?>
<form name="form1" method="post" action="">
  <input type="submit" name="Zoek" id="Zoek" value="zoek">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:59:23.627

除非我完全想念这里的问题：

提交表单后，将类别 ID 发布到您的脚本中，请尝试以下操作：

```
$sql = "SELECT * FROM Probleem";
if(isset($_POST["categorieid"])){
    $cat_id = $_POST["categorieid"];
    //sanitize $cat_id to reduce injection risk here
    $sql .= " WHERE `categorieid_id` = $cat_id"; //use correct column name
}
$sql .= " ORDER BY Datum ASC";
$resultaat  = mysql_query($sql); // voer SQL code uit 
```

然后应该获得该类别 ID 的所有结果，如果未设置，您将获得之前获得的所有结果。

# iphone - 快速显示图像时 iPad 图像重影

> ID：11003750
> 
> 赞同：0
> 
> 时间：2012-06-12T19:46:35.630
> 
> 标签：iphone, ios, ipad, drawing, core-animation

我在 iPad 上显示了一系列通过网络连接发送的图像。它似乎工作正常，但由于某种原因，图像有很多重影（见下图）。是否有某种绘图技术可以消除这种情况？我会说这是屏幕刷新率的问题，但这并不能解释为什么使用 iPad 的屏幕截图功能会捕捉到这种现象。

![iPad 上的重影](../Images/0cdf3fa9db4120c9fd117298732d5e7b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:36:01.137

您可能正在以一种触发[隐式动画](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/AnimatingLayers.html#//apple_ref/doc/uid/TP40006085-SW7)的方式在图像之间切换，该动画在旧图像和新图像之间交叉淡入淡出。

[图层操作](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Actions.html#//apple_ref/doc/uid/TP40006095-SW1)的文档解释了 CoreAnimation 如何决定运行该隐式动画，以及如何覆盖它。

恕我直言，两种最简单的方法是：

1.  更改图像时，[使用 a`CATransaction`禁用操作](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Transactions.html#//apple_ref/doc/uid/TP40006096-SW6)
2.  在您的层的委托中，[实施`-actionForLayer:forKey:`并返回`[NSNull null]`](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Actions.html#//apple_ref/doc/uid/TP40006095-SW7)。（如果您使用的是`UIView`，它已经是图层的委托。）

[这个问题](https://stackoverflow.com/questions/2244147/disabling-implicit-animations-in-calayer-setneedsdisplayinrect)提供了更多选择——它甚至可能与您的情况重复。

# php - 使用 PHP 变量创建 MySQL 表

> ID：11003751
> 
> 赞同：3
> 
> 时间：2012-06-12T19:46:35.733
> 
> 标签：php, mysql

我正在尝试创建一个表，其名称是存储在变量中的值`$name`。我尝试了许多不同的方法，但似乎没有一个对我有用。这是我目前使用的代码：

```
 mysql_connect("localhost", "peltdyou_admin", "123456") or die(mysql_error()); 
 mysql_select_db("peltdyou_orders") or die(mysql_error()); 
 mysql_query("CREATE TABLE '" .$_POST['name']. "' ( name VARCHAR(30), age INT, car VARCHAR(30))"); 
```

我知道这与它有关，`'" .$_POST['name']. "'`但我不知道是什么。我已经尝试`'$name'`过从代码中进一步获取它的价值。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T19:50:46.013

在表名周围使用反引号，而不是引号。并逃避输入！此外，虽然这适用于本地主机，但请确保在您的生产服务器上运行的用户**有权**创建表（通常它不是，AFAIK，当然在共享主机上）。

**一个警告：**你真的确定要在用户输入上创建一个表吗？你打算用这种方式创建多少张表？难道你不能重新设计整个东西以便你插入***值***吗？

```
$name = mysql_real_escape_string($_POST['name']);
mysql_query("CREATE TABLE `".$name."` ( name VARCHAR(30), age INT, car VARCHAR(30))"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:48:53.550

将它放在另一个变量中，它将起作用，与 POST 变量和 mysql_query 中的“'”字符冲突。

```
<?php
mysql_connect("localhost", "peltdyou_admin", "123456") or die(mysql_error()); 
mysql_select_db("peltdyou_orders") or die(mysql_error()); 
$name = mysql_real_escape_string($_POST['name']);
mysql_query("CREATE TABLE '$name' ( name VARCHAR(30), age INT, car VARCHAR(30))");
?> 
```

我发布了这段代码来帮助你编写代码，但你**不应该**使用 mysql_* 函数，而应该使用 mysqli_* 函数。你可以在这里阅读更多关于它们的信息：http: [//php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:59:33.010

你真的应该使用 PDO 或 MySQLi 而不是 mysql_* 函数。mysql_* 函数正在被弃用，它们充满了安全漏洞。

话虽如此，您不需要引用您的表名，而应该不使用任何内容或反引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-29T04:38:25.913

使用最新的 Mysqli 连接器，您可以执行以下操作： 1\. 从用户的输入创建一个变量，`$variable=$_POST['name']` 如下所示 2\. 在查询中使用该变量，如下面的完整代码所示

`$variable=$_POST['name']; mysqli_connect("localhost", "peltdyou_admin", "123456") or die(mysql_error()); mysqli_select_db("peltdyou_orders") or die(mysqli_connect_error()); mysqli_query("CREATE TABLE $variable ( name VARCHAR(30), age INT, car VARCHAR(30))");`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-01T10:04:19.700

```
$query = "CREATE TABLE $name" . '(
    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    age INT,
    name  varchar(30),
    car VARCHAR(30)
)'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-04T07:35:55.883

```
CREATE TABLE IF NOT EXISTS `products` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(128) NOT NULL,
  `description` text NOT NULL,
  `price` double NOT NULL,
  `created` datetime NOT NULL,
  `modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=9 ; 
```

# .net - 从 IIS7.5 提供的 PDF 仅在 Internet Explorer 中打开

> ID：11003752
> 
> 赞同：1
> 
> 时间：2012-06-12T19:46:40.963
> 
> 标签：.net, windows, pdf, iis-7.5, itextsharp

我正在尝试确定这是 IIS 问题还是代码问题。我倾向于前者，但在这种情况下，我不知道如何解决它。

我有几个 Asp.Net Web 应用程序将 PDF 创建为 MemoryStream（使用 iTextSharp），然后使用 MemoryStream.ToArray 方法在屏幕上显示 PDF。下面是我使用的基本代码。

```
Try 
    Dim m As System.IO.MemoryStream = pdfhelper.createFileMethod(filename)
    Dim data As Byte() = m.ToArray  
    Response.Clear()
    Response.Buffer = True
    Response.AddHeader("Content-Length", data.Length.ToString())
    Response.AddHeader("Content-Disposition", "inline; filename=sample")
    Response.AddHeader("Expires", "0")
    Response.AddHeader("Pragma", "cache")
    Response.AddHeader("Cache-Control", "private")
    Response.ContentType = "application/pdf"
    Response.AddHeader("Accept-Ranges", "bytes")
    Response.BinaryWrite(data)
    Response.Flush()
    Response.End()
Catch ex As Exception
    throw ex
End Try 
```

我从 Windows Server 2008 R2 标准版、64 位、版本 6.1 Build 7601 Service Pack 1 和 IIS 7.5.7600.16385 提供服务。

当我在 Internet Explorer 中使用该应用程序时，我可以毫无问题地打开 PDF 文档。当我使用 Chrome 或 Firefox 时，PDF 只是在加载时挂起。它根本不会加载。我没有收到错误消息。无论我在服务器上还是在客户端上运行，问题都是一样的。

但是，当我使用 Visual Studio 中内置的 IIS 在我的开发机器上运行时，无论使用哪种浏览器，我都没有问题。

我知道[此修补程序中解决的问题。](http://support.microsoft.com/kb/979543) 因此，我假设问题出在 IIS 中。但是，我无法应用此修补程序，因为它仅对我的 Windows 版本的 Build 7600 有效。

所以我又想知道 - 这是 IIS 吗？这是我的代码吗，只是 IE 更能容忍我犯的错误？我该如何解决？

感谢您提供的任何想法。

编辑：我发现[了这个建议](http://blog.shawnhyde.com/post/2010/07/09/pdf-files-hosted-on-IIS-75-lock-up-when-downloading-in-firefox.aspx)，它强制下载 PDF 而不是在浏览器中打开。绝对不是这个问题的理想解决方案。希望有人有另一个想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:57:54.793

我终于解决了这个问题，尽管我没有 100% 的“为什么”。

1）我将后面的代码更改为以下内容，删除了等待缓冲区然后结束响应的命令。

```
 Response.ClearContent()
    Response.ClearHeaders()
    Response.ContentType = "application/pdf" 
    Response.AppendHeader("Content-Length", data.Length.ToString())
    Response.AppendHeader("Content-Disposition", "inline; filename=" + "Sample.pdf")
    Response.AppendHeader("Accept-Ranges", "bytes")
    Response.BinaryWrite(data) 
```

2) 更新了 aspx 页面，这是其背后的代码。它仍然有所有的 html “东西”。我删除了页面上的所有内容，页面指令命令除外。

此时，PDF 将继续与 IE 一起使用。在一些安装了旧版 (9.x) Adob​​e 插件的计算机上，Firefox 在浏览器中的查看毫无困难。在装有 Adob​​e 10.1.3 的计算机上，Firefox 会提示“打开或保存”对话框。但是 Chrome (v. 19.0.1084.56) 仍然挂起。

3) 在 iPad 上使用 Safari 进行测试并且没有问题后，我认为这是 Chrome 的问题。我禁用了 Chrome Adob​​e 插件，现在 PDF 按预期显示在浏览器中。

# ajaxcontroltoolkit - AjaxControlToolkit : TabContainer

> ID：11003756
> 
> 赞同：0
> 
> 时间：2012-06-12T19:46:59.660
> 
> 标签：ajaxcontroltoolkit, tabcontainer

寻找经历过此问题并已实施有效解决方案的开发人员...

多年来，我一直在我的 VB.Net 3.5 Web 应用程序中成功使用 TabContainer 控件。它已经在我的本地计算机和实时 Web 服务器上遇到问题的 Web 应用程序中运行了至少 2 年。

但是，我已将该站点移至另一台服务器，现在 TabContainer 控件无法正常工作。我在想我需要更改服务器设置或文件权限吗？我不相信我需要更改我的代码（脚本标签、web.config 等）。

在此先感谢您的时间！

# notepad++ - Notepad++ 添加到每一行

> ID：11003761
> 
> 赞同：458
> 
> 时间：2012-06-12T19:48:01.823
> 
> 标签：notepad++

我正在使用记事本++，但我无法弄清楚：

我有很多行都以`http`. 我需要在每一行的前面添加一些文本。另外，我需要在每行的末尾添加不同的文本。每条线的结尾都不同。

在每行的开头和结尾添加文本的最快方法是什么？

* * *

## 回答 #1

> 赞同：992
> 
> 时间：2012-06-12T20:20:13.473

按着这些次序：

1.  按`Ctrl`+`H`调出查找/替换对话框。
2.  选择`Regular expression`对话框底部附近的选项。

要在每行的**开头**添加一个单词，例如`test`， ：

 **> 1.  `^`在`Find what`文本框中输入
> 2.  `test`在`Replace with`文本框中输入
> 3.  将光标放在文件的第一行以确保所有行都受到影响
> 4.  点击`Replace All`按钮

要在每行的**末尾**添加一个单词，例如`test`， ：

 **> 1.  `$`在`Find what`文本框中输入
> 2.  `test`在`Replace with`文本框中输入
> 3.  将光标放在文件的第一行以确保所有行都受到影响
> 4.  点击`Replace All`按钮

* * *

## 回答 #2

> 赞同：154
> 
> 时间：2014-09-08T15:29:55.653

1.  将光标移动到第一行的开头
2.  按住`Alt`+`Shift`并使用光标`down`键将选择范围扩展到块的末尾

这使您可以同时在每一行上键入。

我在[这里](https://superuser.com/questions/351121/add-a-string-to-every-line-of-a-selection)找到了上面的解决方案。

我认为这比使用正则表达式容易得多。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-05-07T12:16:24.690

Notepad++ 具有非常强大的编辑能力。（今天我在Sublime Text中寻找类似的功能），但是对于Notepad++，只要在拖动鼠标的时候按住**Alt即可。**然后，您键入的内容将替换每一行上的选定列。要插入而不替换现有文本，请使用**Alt-Shift**。

![在此处输入图像描述](../Images/7fbbe142a4bed75658f706f3c02cf1ff.png)

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2018-05-14T12:19:45.140

这是我的答案。添加 '）;' 到每一行的末尾，我都会执行“查找内容：$”和“替换为：\);” 你需要逃跑； [![在此处输入图像描述](../Images/bf85e5db33e728c4a119da4ab5ab37c4.png)](https://i.stack.imgur.com/k1q9e.png)

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2017-04-27T10:21:29.917

您可以通过在 Replace ( + ) 中**使用一个正则表达式在 Notepad++ 中****自动执行此操作**（在每行的开头和/或结尾添加文本）：**`Ctrl``H`**

 **[![在此处输入图像描述](../Images/f59c999899de4d386ea799356f83d28d.png)](https://i.stack.imgur.com/ao9ru.jpg)

**说明：***Replace with*`$1` input中的表达式表示*Find what* regular expressin中包含圆括号的所有字符。*`(.*)`*

 **经测试，有效。

希望有帮助。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2017-07-28T09:37:44.400

好吧，我在很长一段时间后才发布这个，但这将是最简单的。

1.  要在所有行的开头/a-certain-place-from-start 处添加文本，只需单击那里并执行 ALT+C，您将获得以下框。输入您的文本，然后单击“确定”，就完成了。

    [![在此处输入图像描述](../Images/fdbce1f513d1ee79b9daef4ab7c2cd1e.png)](https://i.stack.imgur.com/kGC6c.png)

2.  要在所有行的末尾添加特定文本，请按 CTRL+F，然后选择 REPLACE。你会得到下面的盒子。在“查找内容”中输入“$”，并在“替换为”中输入文本。确保在搜索模式中选择“正则表达式”（左下）。最后点击“全部替换”就完成了。

[![在此处输入图像描述](../Images/be23851ea92055681befc2cd32db7674.png)](https://i.stack.imgur.com/7LKUC.png)

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2020-07-20T02:13:58.817

**Notepad++ 将单词添加到每行的开头**

按照此说明使用 Notepad++ 在每一行的开头写任何内容

打开记事本++，

按**Cntrl** + **H**打开查找/替换对话框。

现在在**Find what文本框中输入****^**（输入 ^ 不带任何空格）

 ****在替换为**文本框中键入任何内容（例如在我们的示例中我正在写“John”）（在每行的文本之后添加一个/多个空格）

选择**正则表达式**选项

将光标放在文件的第一行以确保所有行都受到影响

单击**全部替换**按钮

[![在此处输入图像描述](../Images/ceaaeb70feb65ecd74a9828ffc3d9dd8.png)](https://i.stack.imgur.com/6QEiA.png)

[![在此处输入图像描述](../Images/e66a8532bfcfe1d84306016338fbdf29.png)](https://i.stack.imgur.com/W0Mmu.png)

**Notepad++ 将文本添加到每一行的末尾**

按照此说明使用 Notepad++ 在每一行的末尾写下任何内容

打开记事本++，

按**Cntrl** + **H**打开查找/替换对话框。

现在在**Find what文本框中输入****$**（输入 $ 不带任何空格）

 ****在替换为**文本框中输入任何内容（例如在我们的示例中我正在写“约翰”）（写一个/多个空格文本以在每一行的文本之前添加一个/多个空格）

选择**正则表达式**选项

将光标放在文件的第一行以确保所有行都受到影响

单击**全部替换**按钮

[![在此处输入图像描述](../Images/a6076fa2f93081863bb14ef00777ed6b.png)](https://i.stack.imgur.com/AYusB.png)

[![在此处输入图像描述](../Images/930e5f4d92339df6781edf2bd46f4d20.png)](https://i.stack.imgur.com/YaW9N.png)

对于所有 Notepadd++ 教程：**[访问 :)](http://www.joblesspanda.com/search/label/Notepad%20Plus%20Plus)**

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2016-10-04T17:02:45.280

打开记事本++，然后单击`Ctrl`+ `F`。

选择正则表达式

*查找内容：“^”（表示每行的索引 - “PREFIX”）。

替换为：“anyText”*

[![在此处输入图像描述](../Images/4a5caf5acd22f554a8105c9f7da4bc2e.png)](https://i.stack.imgur.com/Q6Lc8.png)

对于每行上的**后缀**：按照与上面相同的步骤 "Replace ^ with $" 。而已。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-04-26T09:46:24.127

为了一次性完成：

1.  **将以下示例文本**复制**并**粘贴到记事本++ 窗口中：****

 **> http:\blahblah.com
> 
> http:\blahnotblah.com
> 
> http:\blahandgainblah.com

2.  在记事本++窗口上按**Ctrl+H**
3.  在**查找内容**框中键入：`^(.+)$`。这里 ^ 代表行的开始。$ 代表行尾。(.+) 表示行首和行尾之间的任何字符，它将是第 1 组。
4.  在**替换为**框中键入：`WhateverFrontText(\1)WhatEverEndText`。这里 (\1) 表示一行中的任何文本。
5.  选中*复选框* **环绕**
6.  搜索方式：正则表达式
7.  结果：

> WhatEverEndTexthttp:\blahblah.comWhatEverEndText
> 
> WhatEverEndTexthttp:\blahnotblah.comWhatEverEndText
> 
> WhatEverEndTexthttp:\blahandgainblah.comWhatEverEndText

8.  notepad++ 选项和结果的屏幕截图： [![在此处输入图像描述](../Images/80e9e3de7f5a1c32f3d4b2df9736b44e.png)](https://i.stack.imgur.com/vb382.jpg)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-07-18T02:42:24.583

要将不同的文本附加到每行的末尾，您可以使用插件[ConyEdit](https://www.conyedit.com/)来执行此操作。
在后台运行 ConyEdit，请按照以下步骤操作。

1.  使用命令行`cc.gl a`获取行并存储在名为 a 的数组中。
2.  使用命令行在`cc.aal //$a`每行之后追加，使用数组 a 的内容。

**例子**
[![在此处输入图像描述](../Images/f058b0a2926f2119a2d58f02e04522fe.png)](https://i.stack.imgur.com/reXoT.gif)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-12-03T09:10:24.107

如果你有数千行，我想最简单的方法是这样的：

-选择作为光标起点的行

- 当您按住时`alt`+`shift`选择作为光标端点的线

而已。现在你有一个巨大的光标。您可以在所有这些行中写入任何内容。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-07-28T21:25:47.143

只需在“查找内容：”字段中输入`\r`。这意味着“行的结束”。在“替换为：”字段中，您可以输入您想要的内容`.xml`

如果您有多行，并且您的目标是将该文本添加到每行的末尾，则需要在“搜索模式”组框中标记选项“。匹配换行符”。

例子：

您有一个文件名列表，但您想添加一个扩展名，如 .xml。这将是你需要做的，砰！一枪！：

[在此处查看图片](https://i.stack.imgur.com/8ZxlH.png)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-08-23T17:50:52.750

请在下面的屏幕截图中找到一次在行首和行尾添加一个新单词

[![在Notepad ++中的每一行的开头和结尾添加一个新单词](../Images/dcfd1cc6790dcd85bf01832bff1173d2.png)](https://i.stack.imgur.com/NCNg0.png)**************

# android - android布局中的LinearLyout和ScrollView

> ID：11003768
> 
> 赞同：0
> 
> 时间：2012-06-12T19:48:45.123
> 
> 标签：android, android-layout

我正在为表单进行布局以向某人请求数据。我想给表格的外观是这样的：

[http://www.subirimagenes.com/otros-formulario-7766528.html](http://www.subirimagenes.com/otros-formulario-7766528.html)

我拥有的 xml 布局文件：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"    
android:layout_width="fill_parent"
android:layout_height="fill_parent">

    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <TextView
            android:id="@+id/MiPerfil_TxtTitulo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/MiPerfil_TxtTituloAceptar"
            android:textSize="20sp"
            android:textStyle="bold"
            android:gravity="center" />

        <TextView
            android:id="@+id/idMiPerfil_TxtDNI"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/MiPerfil_TxtDNI"
            android:textSize="16sp" />

        <EditText
            android:id="@+id/MiPerfil_EditTxtDNI"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="18sp" />
        <TextView
            android:id="@+id/idMiPerfil_TxtApellido"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/MiPerfil_TxtApellidos"
            android:textSize="16sp" />
        <EditText
            android:id="@+id/MiPerfil_EditTxtNombre"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="18sp" />
        <TextView
            android:id="@+id/idMiPerfil_TxtNombre"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/MiPerfil_TxtNombre"
            android:textSize="16sp" />

        <EditText
            android:id="@+id/MiPerfil_EditTxtApellido"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="18sp" />

        <TextView
            android:id="@+id/idMiPerfil_TxtTelefono"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/MiPerfil_TxtTelefono"
            android:textSize="16sp" />

        <EditText
            android:id="@+id/MiPerfil_EditTxtTelefono"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="18sp" />

        <TextView
            android:id="@+id/idMiPerfil_TxtEmail"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/MiPerfil_TxtEmail"
            android:textSize="16sp" />

        <EditText
            android:id="@+id/MiPerfil_EditTxtEmail"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="18sp" />

        <TextView
            android:id="@+id/idMiPerfil_TxtDireccion"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/MiPerfil_TxtDireccion"
            android:textSize="16sp" />

        <EditText
            android:id="@+id/MiPerfil_EditTxtDireccion"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="18sp" >

        </EditText>
    </LinearLayout>
</ScrollView> 
```

当我运行它时，会出现以下内容：

[http://www.subirimagenes.com/otros-form2-7766542.html](http://www.subirimagenes.com/otros-form2-7766542.html)

我不明白我错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:51:31.543

添加`android:orientation = "vertical"`到您的`LinearLayout`

A`LinearLayout`默认为水平方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:51:43.733

添加：

```
android:orientation="vertical" 
```

对你`LinearLayout`来说，它的孩子将一个接一个地放在另一个**之下**，而不是一个接一个。

# android - 为安卓构建 FIPS 模块

> ID：11003769
> 
> 赞同：1
> 
> 时间：2012-06-12T19:48:48.620
> 
> 标签：android, android-ndk, fips

我正在开发一个 android 项目，该项目需要应用程序中存在的加密库经过 FIPS 认证。据我所知，没有经过 FIPS 验证的 JAVA 安全库。Boucy Castle 不错，但未经验证。在阅读了一些论坛帖子后，我发现可以在 NDK 的帮助下使用 OpenSSL 的 FIPS 模块。

现在我正在尝试为 Android 构建 fips-openssl 模块，为此我为交叉编译的环境变量创建了一个脚本。

我在这个项目中使用[openssl-fips](http://www.openssl.org/source/openssl-fips-1.2.2.tar.gz)和 ndk-r8 。我遵循了我在谷歌上找到的 fips[指南](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CGoQFjAC&url=http%3A%2F%2Ftesthub.opensslfoundation.com%2Fosf%2Ftesting%2Fvalidation-2.0%2Fplatforms%2Fandroid%2FTestingInstructions.pdf&ei=Y5zXT7upA4eC8QThnZ3DAw&usg=AFQjCNFEzPDcoigVlgNvbk0YjYweolk-Aw&sig2=PIzKT1R0QF1S4v-z76VRzg)。我希望这可以清楚地说明我正在尝试做的事情。

```
#! /bin/sh
export ANDROID_NDK="~/Android/android-ndk-r8"
export FIPS_SIG="${ANDROID_NDK}/incore"
export GCC_C1="/usr/lib/gcc/i686-pc-linux-gnu/4.7.0/"
export PATH=$PATH:"${ANDROID_NDK}/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin";
export MACHINE=armv71
export ARCH=arm. 
export CROSS_COMPILE="arm-linux-androideabi-"
export SYSTEM=android
#export RELEASE=2.6.32.GMU 
export ANDROID_DEV="$ANDROID_NDK/platforms/android-14/arch-arm/usr" 
export HOSTCC=/usr/bin/gcc 
```

在进行制作时，这是我得到的错误。

```
arm-linux-androideabi-gcc: error trying to exec 'cc1': execvp: No such file or directory
make[1]: *** [cryptlib.o] Error 1
make[1]: Leaving directory `/home/abhiram/fips/openssl-fips-1.2.3/crypto'
make: *** [build_crypto] Error 1 
```

当我执行“查找”时，cc1 可执行文件存在于此特定目录中。

```
 find . -name cc1 
./toolchains/mipsel-linux-android-4.4.3/prebuilt/linux-x86/libexec/gcc/mipsel-linux-android/4.4.3/cc1
./toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/libexec/gcc/arm-linux-androideabi/4.4.3/cc1
./toolchains/x86-4.4.3/prebuilt/linux-x86/libexec/gcc/i686-android-linux/4.4.3/cc1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:39:18.263

看起来问题出在导出语句中，PATH 行中应该有一个空格。改变这个：

```
export PATH=$PATH:"${ANDROID_NDK}/toolchains/arm-linux-androideabi  4.4.3/prebuilt/linux-x86/bin"; 
```

对此：

```
export PATH=$PATH:"${ANDROID_NDK}/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin"; 
```

此外，您的发现表明 cc1 可执行文件不在路径中，因此也将其位置添加到路径导出中：

```
export PATH=$PATH:"${ANDROID_NDK}/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin":"${ANDROID_NDK}/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/libexec/gcc/arm-linux-androideabi/4.4.3/"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T15:47:43.737

> 现在我正在尝试为 Android 构建 fips-openssl 模块，为此我为交叉编译的环境变量创建了一个脚本。

如果您有兴趣，OpenSSL 提供了适用于 Android 的脚本。您可以在 OpenSSL wiki：[FIPS 库和 Android](http://wiki.openssl.org/index.php/FIPS_Library_and_Android)上找到它。

* * *

> 做这个是我得到的错误：
> 
> `arm-linux-androideabi-gcc: error trying to exec 'cc1'`

看起来您的`PATH`不包括交叉编译工具链。

你是如何调用脚本的？您需要包含一个前导点（“.”）以确保将更改应用于当前 shell（而不是执行脚本的子 shell（它只是退出））。

[这是位于FIPS 库和 Android](http://wiki.openssl.org/index.php/FIPS_Library_and_Android)的 OpenSSL 为 Android 构建过程的第一步。注意前导点：

```
$ . .setenv-android.sh 
```

运行脚本的结果设置了 OpenSSL 构建系统使用的一堆变量：

```
$ . ./setenv-android.sh 
ANDROID_NDK_ROOT: /opt/android-ndk-r9
ANDROID_EABI: arm-linux-androideabi-4.6
ANDROID_API: android-14
ANDROID_SYSROOT: /opt/android-ndk-r9/platforms/android-14/arch-arm
ANDROID_TOOLCHAIN: /opt/android-ndk-r9/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86_64/bin
FIPS_SIG: 
CROSS_COMPILE: arm-linux-androideabi-
ANDROID_DEV: /opt/android-ndk-r9/platforms/android-14/arch-arm/usr 
```

* * *

> “${ANDROID_NDK}/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/libexec/gcc/arm-linux-androideabi/4.4.3/”

我不相信这是必要的。

* * *

> 导出 ANDROID_NDK="~/Android/android-ndk-r8"

根据 Android NDK 用户列表上的人的说法，您应该同时设置`ANDROID_NDK_ROOT`和`ANDROID_SDK_ROOT`。各种 NDK 和 SDK 工具使用这些环境变量。我想 SDK 值将`"~/Android/android-sdk"`用于您的安装。

查看[推荐的 NDK 目录？](https://groups.google.com/d/msg/android-ndk/qZjhOaynHXc/2ux2ZZdxy2MJ)详情。

* * *

我也认为你应该使用`ANDROID_SYSROOT`. NDK 或 SDK 工具不使用它；相反，它由 OpenSSL 使用并`sysroot`在编译期间传递。

# python - Cx_freeze --- 所有用户都需要python吗？

> ID：11003770
> 
> 赞同：2
> 
> 时间：2012-06-12T19:48:49.180
> 
> 标签：python, cx-freeze

我刚刚用 cx_Freeze 创建了一个 exe 并自豪地将它交给了一位同事......它立即崩溃了（“应用程序无法正确启动”）我很想知道他是否必须已经安装了 python 并且当他运行我的 exe 或者我应该担心的其他事情时，准备好了。（如果是这样的话，我会做更多的研究）

我正在使用 Python 2.7 64 位、Wxpython 和 Cx_Freeze 4.2.7

更新：

所以我发现下载 Python 2.7 确实可以解决问题——但这不是我真正想要的。我听说在 setup.py 脚本中选择了正确的选项，我可以真正创建一个独立的——有人知道我该怎么做吗？文件大小不是对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T02:03:37.247

cx_Freeze 的目的是让用户不需要安装 Python。但有时可能有一些 DLL 依赖项没有被 cx_Freeze 自动排序。例如，请参阅我最近[关于“ImportError: DLL load failed when importing win32clipboard in application freeze freeze with cx_Freeze”的问题和答案](https://stackoverflow.com/q/11130605/60075)。

但是，如果您收到消息“应用程序无法正确启动”，那么这听起来好像问题是一些隐式链接 DLL 依赖项。尝试使用[Dependency Walker](http://www.dependencywalker.com/)追踪丢失的 DLL。让我们知道您的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T00:36:59.590

不，他不需要安装 Python - cx_Freeze 应该将 Python DLL 复制到构建文件夹中。确保构建文件夹中的所有文件在运行时仍与 EXE 一起使用。

但是，他可能需要安装 Python 所需的 Microsoft 'Visual C++ redistributable'。出于法律原因，我*认为*cx_Freeze 不能自动包含该内容（但我不是律师，我很高兴被证明是错误的）。详细信息在文档中：

[http://cx_freeze.readthedocs.org/en/latest/overview.html#microsoft-visual-c-2008-redistributable-package](http://cx_freeze.readthedocs.org/en/latest/overview.html#microsoft-visual-c-2008-redistributable-package)

或者您的应用程序的捆绑可能存在其他问题。我不知道什么会导致该错误消息。

# c# - Visual Studio c# 编译器没有注意到更改的方法名称

> ID：11003774
> 
> 赞同：3
> 
> 时间：2012-06-12T19:48:54.260
> 
> 标签：c#, visual-studio-2010

我在 ac# 程序中有一个非常奇怪的问题：

我有一个接口，它声明了一个方法和一个实现这个接口的类。当我更改方法名称（在接口和实现中）时，Visual Studio 会编译代码，但如果我运行代码，则会出现`method not found`异常。如果我手动删除目标 dll 并重新编译项目/解决方案，一切正常。

但是，还有许多其他方法和属性，也在同一个接口中声明并在同一个类中实现。如果我更改其中一个的名称，一切正常！

有谁知道，这可能是什么？

```
 public interface INode{
    //...
    IEnumerable<INode> Ancestors();
    //...
 }
 public abstract class NodeBase : INode{
    // ...
    public IEnumerable<INode> Ancestors(){

    }
    // ...
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:19:23.963

在尝试解决问题时，**我从 UI 项目中删除了对问题程序集的引用，然后重新添加。从这个时候开始，这个问题就没有了**。

可悲的是，我不能说这个非常奇怪的问题的原因是什么，现在我没有更多的机会去看这个问题了。它一定是项目中损坏的东西，但是我无法想象这可能是什么，因为实际上只涉及一个方法签名（与代码中的位置和方法的名称无关）。

感谢迄今为止发布答案的任何人（+1），让我找到了解决方案。我希望我再也不会看到这种奇怪的行为了！**对于那些有同样问题的人：尝试重新创建对发行项目的引用**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:54:24.630

您是否尝试过构建 > 清洁解决方案/项目？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:58:41.793

我总是遇到这个问题...

通常我会保存，关闭VS，打开解决方案备份，然后构建。这个过程可以暂时解决这个问题。

当您“清理”解决方案时，它会删除与解决方案关联的所有已编译文件和临时文件。它确保下一个构建将从头开始。

我认为问题在于 VS 没有正确构建解决方案并且某些东西“卡住”了。我也相信 VS 的扩展可以帮助解决这个问题。

这篇文章可能对您的需要有点极端，但您可能会发现它很有用：http: [//www.neovolve.com/post/2010/08/02/Cleaning-a-VS2010-solution-with-a-sledgehammer .aspx](http://www.neovolve.com/post/2010/08/02/Cleaning-a-VS2010-solution-with-a-sledgehammer.aspx)

# ios - Storyboards - UISplitViewController 与一个 UITabBarController 在细节

> ID：11003778
> 
> 赞同：2
> 
> 时间：2012-06-12T19:49:25.400
> 
> 标签：ios, uitabbarcontroller, uisplitviewcontroller

我正在尝试在 Storyboard 中设置 UISplitViewController，详细信息将转到 UITabBarController，然后转到 UINavigationController 包装我的第一个 ViewController。

当设备处于纵向时，我遇到的问题是让 UIBarButtonItem 显示在导航项中。UITabBarController 是否应该成为 UISplitViewController 的委托并向每个子视图控制器发送委托消息以让它们创建条形按钮项和弹出框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T01:32:43.323

我发现需要同样的解决方案。我在我的一个原型应用程序中使用它来进行家庭控制。

您引用的问题只是您将遇到的几个问题中的第一个。我相信我现在已经为 iPad/iPhone（通用应用程序）提供了完整的解决方案。

您可以在此处阅读我的帖子：[问题和解决方案描述以及我的博客中的示例代码](http://ironsheep-ios-fun.blogspot.com/2012/07/ios-using-uitabbarcontroller-as-detail.html "这里")

总而言之，您会遇到以下问题（大多数针对 iPad 实现，一些针对 iPhone 实现。在构建通用应用程序时。）：

*   appDelegate 中的模板代码为新形状错误地设置了委托（它真的不再了解详细视图中存在什么类型的控制器
*   UISplitViewController 委托调用未通过 UITabbarController 正确传播到选项卡
*   您将需要决定如何/何时通知当前详细信息选择的选项卡
*   当构建为通用应用程序时，一些通知现在需要在 prepareForSegue: 方法中发生（因为其他一些通知不会在 iPhone 平台上发生。）

（所有这些都显示在我的博客文章中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T22:05:09.897

[您可以在此站点](http://www.scienceathand.com/idevblogaday/adventures-in-uisplitviewcontroller-2/)中找到示例和理论。很好的例子。

# php - 当用户使用我网站上的应用程序时，如何发布到 Facebook 用户的墙上？

> ID：11003779
> 
> 赞同：-1
> 
> 时间：2012-06-12T19:49:29.140
> 
> 标签：php, facebook, facebook-graph-api

我使用 PHP 创建了一个 Facebook 应用程序，允许用户将照片上传到我的 Facebook 页面。

现在我希望每当用户通过这个 Facebook 应用程序在我的墙上发帖时 - 都会提示用户在他/她的墙上发布一条消息，例如“John 发布了一张 Evil Monkey's Wall 的图片”。始终让用户提示是否接受。

请问这可以完成并集成到我现有的 Facebook 应用程序中吗？你能给我一些示例代码吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:50:46.233

来自[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

```
<script> 
  FB.init({appId: "YOUR_APP_ID", status: true, cookie: true});

  function postToFeed() {

    // calling the API ...
    var obj = {
      method: 'feed',
      link: 'https://developers.facebook.com/docs/reference/dialogs/',
      picture: 'http://fbrell.com/f8.jpg',
      name: 'Facebook Dialogs',
      caption: 'Reference Documentation',
      description: 'Using Dialogs to interact with users.'
    };

    function callback(response) {
      document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
  }

</script> 
```

# javascript - 当字符串与标题 PHP 不匹配时，将列留空

> ID：11003783
> 
> 赞同：3
> 
> 时间：2012-06-12T19:49:52.580
> 
> 标签：javascript, php, arrays, html-table

现在我有一个问题，我真的不知道从哪里开始看，我想制作一个包含一天租用汽车价格的表格，表格的标题是汽车型号，左侧表的一边是租赁公司，我想把价格放在价格所属的车型下面，价格和车是一个数组，车型有时可能是5个车型，有时或多或少，所以我不知道如何用 PHP 或 JS 对其进行排序，

这是我想做的一个例子，

```
 Economy  |  Midsize  |  Fullsize
___________________________________________
Hertz  |          | 60.10     | 70.00
___________________________________________
Avis   | $55.22   | 69.10     | 81.56
___________________________________________
Budget | $50.10   |           | 70.00 
```

有时会像，

```
 Economy  |  Midsize  |  Fullsize
___________________________________________
Hertz  | 60.10    |           | 70.00
___________________________________________
Avis   | $55.22   |           | 81.56
___________________________________________
Budget | $50.10   |  69.10    | 70.00 
```

数组是这样的，

```
Array(
   [Hertz] => Array(
               [Economy] => Array(
                        [0] => 
                )
               [Midsize] => Array(
                        [0] => 60.10
                )
               [Fullsize] => Array(
                        [0] => 70.00
                )
        )
   [Avis] => Array(
               [Economy] => Array(
                        [0] => 55.22
                )
               [Midsize] => Array(
                        [0] => 69.10
                )
               [Fullsize] => Array(
                        [0] => 81.56
                )
        )
   [Budget] => Array(
               [Economy] => Array(
                        [0] => 50.10
                )
               [Midsize] => Array(
                        [0] => 
                )
               [Fullsize] => Array(
                        [0] => 70.00
                )
        )
) 
```

正如您在上面的示例中看到的那样，我想在循环数组时跳过一列，有时可能是 3 辆以上的汽车，

同样，它取决于我得到的数组的输出。

那么我在哪里可以找到一些 PHP 或 JS 脚本来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:16:30.137

你可以使用 foreach，这个功能可以帮助我作为 Web 开发人员一天中大约 20% 的时间。您需要做的就是组织您的数组，在您的情况下，您可以使用键作为 cols 的品牌和值，在 php 中它可能如下所示：

```
$aData = new array( 
  ["empty"] => new array( 
    [0] => "Economy",
    [1] => "Midsize",
    [2] => "Fullsize", 
    ),
  ["Hertz"] => new array(
    [0] => "",
    [1] => "60.10",
    [2] => "70", 
   ),
); 
```

如果您的数组具有此结构，则该表将为您完成其余的工作：

```
<table>
  <?php

  foreach( $aData as $sRowName => $aCols ) {
  ?>
    <tr>
      <td>
        <?php echo $sRowName; ?>
      </td>
      <?php
    foreach( $aCols as $sColData ) {
      if( $sColData !== "empty" ) {
        echo "<td>$sColData</td>";
      }
    } 
  ?>
    </tr>
  <?php   
  }
  ?>
</table> 
```

您可以根据需要向数组中添加任意数量的行和列，foreach 将通过它循环每个项目；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:07:50.870

您可以在购买表中插入一个空白条目，而不是将任何内容放入`<td>`. 例如，赫兹行将是：

```
<tr>
  <td>Hertz</td>
  <td></td>
  <td>60.10</td>
  <td>70.00</td>
</tr> 
```

同样，预算行将是：

```
<tr>
  <td>Budget</td>
  <td>$50.10</td>
  <td></td>
  <td>70.00</td>
</tr> 
```

要生成它，您可以执行类似的操作

```
if (is_null($price))
{
  echo "<td></td>";
}
else
{
  echo "<td>" . $price . "</td>";
} 
```

# javascript - 文本字段 - onLoad '用户名/密码'，onClick/Focus 更改颜色，onKeyDown 消失（类似于 Twitter）

> ID：11003785
> 
> 赞同：0
> 
> 时间：2012-06-12T19:50:10.530
> 
> 标签：javascript, html, css

我正在使用简单的电子邮件字段和密码字段进行登录。我拥有我想要的所有基础知识，但我无法将它们全部放在一起。我想要的是 TEXT FIELDS 的外观与 twitter 相同。我的意思是当这两个字段没有被选中时，他们会说“电子邮件”和“密码”但是当它们被选中时，文本是不可选择的并且光标出现在前面。一旦您键入它们就会消失，而您键入的任何内容都会出现。

最简单的解决方案就是向它们添加背景图像。我已经这样做了，但不想要这个样子。它对我来说不够精确。

如果您对我要查找的内容感到困惑，请访问 twitter 并查看他们说用户名/密码的登录字段。我想要同样的样子。任何帮助是极大的赞赏。谢谢你。

如果可能，请以 HTML、CSS 或 JavaScript 形式给出，但我们感谢任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:58:42.970

尝试`placeholder="your placeholder"`在输入上使用？

然后您可以使用回退 jquery 脚本为旧浏览器提供功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:05:44.510

首先，javascript....如果您使用的是 jQuery，当单击它们并使它们成为焦点时，这应该获取您的文本字段并删除其中的值（电子邮件等）。

```
 $(function() {
    $('input[type=text]').focus(function() {
     $(this).val('');
    });
 }); 
```

您的 html 应该与此类似....

```
<input type="text" name="email" value="email"/>
<input type="password" name="password" value="password" /> 
```

*要获得边框高亮效果，您可以添加一些 css....请注意，此示例将在所有*输入（文本字段、文本区域等）获得焦点时在它们周围添加一个绿色边框。您可以通过使用 id 或指定输入类型来更改此设置。

```
input:focus { border: 1px solid green;} 
```

如果您试图让默认文本在 keydown 而不是焦点上消失，一种方法是给每个输入一个 id，然后使用一个标志来检查事件处理程序（例如文本消失）已经在每个 id 上开火了...

```
 $(function() {
    var passFired = false;
    var emailFired = false;

    var email = $('#email');
    var pass = $('#password');

    email.keydown(function() {
        if(!efired){
            efired = true;
            $(this).val('');
        }
    });

    pass.keydown(function() {
        if(!pfired){
            pfired = true;
            $(this).val('');
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:49:31.417

```
<script type="text/javascript">
function clearInput(this) {

    var currValue = document.getElementById(this).value;
    if (currValue != '') {
        currValue = '';
    }
}
</script>

<input type="text" id="login" value="email" class="input-box" onchange="clearInput(this);">
<input type="password" id="password" value="password" class="input-box" onchange="clearInput(this);"> 
```

这未经测试应该工作....

您可以使用任意数量的 JS 事件，因此您必须选择能够提供所需时间的事件。

希望这可以帮助。

# java - 在@before 方法中保存状态，执行@test，然后回滚@after 中的更改

> ID：11003787
> 
> 赞同：1
> 
> 时间：2012-06-12T19:50:17.227
> 
> 标签：java, spring, junit

我想知道这是否可能。这是我的第一个问题，如果我不完全遵守协议，请耐心等待。我可以使用事务模板回滚我的事务。但现在我要做的是在标记为@before 的方法中保存一个状态，然后在@after 方法中将其回滚。

例如这是我以前的：

```
 _transactionTemplate.execute(new TransactionCallbackWithoutResult() {
            @Override
     protected void doInTransactionWithoutResult(TransactionStatus transactionStatus)
     {

                Object transactionStatusSavepoint = transactionStatus.createSavepoint();
                //do some work
                transactionStatus.rollbackToSavepoint(transactionStatusSavepoint);
      }
     }); 
```

这一切都很好。现在我想这样做：

```
@Before
    public void beforeTest() {
        _template.execute(new TransactionCallbackWithoutResult() {

            @Override
            protected void doInTransactionWithoutResult(TransactionStatus transactionStatus) {

                _transactionStatusSavepoint = _transactionStatus.createSavepoint();
            }
        });

@Test
public void foo(){//do some stuff}

@After
    public void afterTest() {
    _transactionStatus.rollbackToSavepoint(_transactionStatusSavepoint);
} 
```

如果您不明白或想详细说明，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:35:51.017

一旦 doInTransactionWithoutResult 完成，事务状态将无效，因此您不能在 afterTest 方法中使用它。

看起来您正在使用弹簧进行测试。Spring 带有测试运行器，可以在测试完成时回滚事务。

[弹簧测试](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/testing.html#testcontext-tx)

# jquery - Jquery：为什么一个有效而另一个无效？

> ID：11003788
> 
> 赞同：1
> 
> 时间：2012-06-12T19:50:23.003
> 
> 标签：jquery, select, loops

我正在开发一个 iPad 应用程序，如果 jquery 代码代码超过 1000 行，我知道它可以更短，所以我制作了一个测试页面来让我的循环工作。我有 2 个测试页面和相同的代码，但它只适用于一个。

工作[页面](http://bellswebdesign.com/alan/projects/golfapp/test4.html)：

```
 <div class="p1hole1"></div>
<div class="p1hole2"></div>
<div class="p1hole3"></div>
<div class="p1hole4"></div>
<div class="p2hole1"></div>
<div class="p2hole2"></div>
<div class="p2hole3"></div>
<div class="p2hole4"></div>
<div class="p3hole1"></div>
<div class="p3hole2"></div>
<div class="p3hole3"></div>
<div class="p3hole4"></div>
<script type="text/javascript">
(function () {
    for(p=1; p<4; p++){
        for ( i=1; i<5; i++){
                $(".p" + p + "hole" + i).html("class= 'p" + p + "hole" + i + "'");
        }
    }
})();
</script> 
```

和[不工作的代码](http://bellswebdesign.com/alan/projects/golfapp/test3.html)：

```
<div>
  <select class="parhole1">
    <option value=""></option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
  </select>
</div>
<div>
  <select class="p1hole1">
    <option value=""></option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
  </select>
</div>
<div class="p1hole1type"></div>
<div class="p1hole2"></div>
<div class="p1hole3"></div>
<div class="p1hole4"></div>
<div class="p2hole1"></div>
<div class="p2hole2"></div>
<div class="p2hole3"></div>
<div class="p2hole4"></div>
<div class="p3hole1"></div>
<div class="p3hole2"></div>
<div class="p3hole3"></div>
<div class="p3hole4"></div>
<script type="text/javascript">
(function () {
    for(p=1; p<4; p++){
        for ( i=1; i<5; i++){
            $(".p" + p + "hole" + i).change(function () {
                n = $(".p" + p + "hole" + i + "option:selected").val();
                r = $(".parhole" + i + "option:selected").val();
                if (n == 1) {
                    $(".p" + p + "hole" + i + "type").html("Hole N One");
                }else {
                    $(".p" + p + "hole" + i + "type").html("Try agian");
                }
            });
        }
    }
})();
</script> 
```

那么为什么一个有效，而另一个无效。如果我能解决这个问题，它将完成它可以将我的代码缩短超过 400 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T19:54:10.817

您的选择器之前需要一个空格`option`。

```
n = $(".p" + p + "hole" + i + "option:selected").val();
r = $(".parhole" + i + "option:selected").val(); 
```

应该读：

```
n = $(".p" + p + "hole" + i + " option:selected").val();
r = $(".parhole" + i + " option:selected").val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:15:48.093

正如另一位用户[所说](https://stackoverflow.com/a/11003853/54680)，您的选择器缺少一个关键空间。话虽如此，您的选择器不需要调用`option:selected`，因为所选选项的值在选择元素本身上可用。

我做了一些修改以增加可伸缩性，以及使用 select 元素的值：

```
$("select")
    .filter(function holeFilter(){ 
        return /^p\d+hole\d+$/.test( this.className );
    }).on("change", function(e){
        var sel = ".p" + this.className.match(/\d+/g).join("hole") + "type";
        $(sel).html( e.target.value == 1 ? "Hole in one!" : "Try again" );
    });​ 
```

小提琴：http: [//jsfiddle.net/jonathansampson/qQWT7/](http://jsfiddle.net/jonathansampson/qQWT7/)

# jquery-mobile - 更新 DOM 后 jQuery Mobile 丢失样式

> ID：11003791
> 
> 赞同：2
> 
> 时间：2012-06-12T19:50:30.850
> 
> 标签：jquery-mobile

类似的问题已多次发布，但我找不到有效的解决方案。希望有人可以提供帮助！

我正在使用 jQuery Mobile 1.1 和 jQuery 1.7.2，所以我使用的是最新的稳定版本。我想创建一个动态页眉。使用此 HTML 代码，它可以正常工作：

```
 <div data-role="page" id="levela">
     <div data-role="header" id="hdr_levela">
    <h1>Title</h1>
     </div>
</div> 
```

所以我然后去动态创建标题。我将 HTML 更改为：

```
 <div data-role="page" id="levela">
     <div data-role="header" id="hdr_levela">
     </div>
</div> 
```

并添加了以下 jQuery 代码：

```
 // Set the header
var dirHeader = $('#hdr_levela');
dirHeader.append('<h1>' + title+ '</h1>'); 
```

标题出现，但没有样式。我找到了几个关于这个的帖子。在 jQuery Mobile 文档中，它说：

“但是，如果您在客户端生成新的标记或通过 Ajax 加载内容并将其注入页面，则可以触发 create 事件来处理新标记中包含的所有插件的自动初始化。这可以触发在任何元素（甚至是页面 div 本身）上，省去了手动初始化每个插件（listview 按钮、选择等）的任务。

例如，如果通过 Ajax 加载了 HTML 标记块（例如登录表单），则触发 create 事件以自动将其包含的所有小部件（在本例中为输入和按钮）转换为增强版本。这种情况的代码是：

```
$( ...new markup that contains widgets... ).appendTo( ".ui-page" ).trigger( "create" ); 
```

所以我尝试了几件事。在上面的代码之后，我添加了以下内容：

```
dirHeader.trigger("create"); 
```

这没有效果。所以我试图把它放在实际的附加本身上：

```
dirHeader.append('<h1>' + folderName + '</h1>').trigger("create"); 
```

这没有效果。然后我在父元素上尝试了这个过程（在这种情况下，父 div 的 id 是“levela”）。所以我尝试了这个：

```
$('#levela').trigger("create"); 
```

这也没有效果。在这一点上，我完全迷失了。每个解决方案都涉及做我尝试过但不起作用的事情之一。我一定错过了一些非常基本的东西，但我似乎找不到它。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:25:19.603

您可以通过调用更新内容`.page`：

请参阅此[工作小提琴](http://jsfiddle.net/zuul/mAVWK/)示例！

```
// Set the header
var title      = 'super hyper BuBu',
    $dirHeader = $('#hdr_levela');

$dirHeader.append('<h1>' + title+ '</h1>').page(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T02:16:58.183

我刚刚解决了一个类似的问题——jQM页眉和页脚似乎没有“create”方法，所以据我所知，css类和角色需要手动添加。

作为参考，我在这个（旧）问题上发布了一个示例修复：[**JQuery Mobile trigger('create') command not working**](https://stackoverflow.com/questions/8088837/jquery-mobile-triggercreate-command-not-working)

# php - 如何在php中的服务器端验证后保留复选框的状态？

> ID：11003792
> 
> 赞同：0
> 
> 时间：2012-06-12T19:50:31.490
> 
> 标签：php, checkbox, state, validation

我有一个包含各种字段（姓名、电子邮件、密码等）的表格。它还有一组 5 个复选框。由于我必须更新数据库，因此我更喜欢进行服务器端验证，并且我正在使用 php。

如果发生验证错误，该错误将与表单和文本字段中先前输入的数据一起显示在页面顶部。我无法保留复选框和单选按钮的状态。全部恢复为未选中状态。我应该怎么做才能保留复选框和单选按钮的状态？

表格看起来像..：

```
 Password:<input type="text" name="password" size="16" maxlength="9" value="<?php echo $_POST['password']?>"/>
    Retype Password:<input type="text" name="repassword" value="<?php echo $_POST['repassword']?>"/>
    Select:<br />
    <input type="checkbox" name="option1" value="on1" id="opt1"/> <label for="opt1">Option1</label><br />
    <input type="checkbox" name="option2" value="on2" id="opt2"/> <label for="opt2">Option2</label><br />
    <input type="checkbox" name="option3" value="on3" id="opt3"/> <label for="opt3">Option3</label><br />
    <input type="checkbox" name="option4" value="on4" id="opt4"/> <label for="opt4">Option4</label><br />
    <input type="checkbox" name="option5" value="on5" id="opt5"/> <label for="opt5">Option5</label><br />
    Mobile No:<input type="text" name="mobileno" maxlength="10" value="<?php echo $_POST['mobileno']?>"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:59:02.360

你说的是粘性表格。您可以通过多种方式实现粘性表单，我的选择是使用 session. 如果验证中出现错误，只需将 POST 数据中的所有内容转储到会话中即可。在您的表单页面上，检查该值是否在会话中设置，如果是，则设置表单控件的默认值：

验证页面：

```
<?php
    session_start();
    if(/** some error condition **/) {
        foreach($_POST as $k => $v)
            $_SESSION['sticky_'.$k] = $v;

        header('Location: http://site.com/yourform.php');
        exit();
    }
?> 
```

表格页面：

```
<?php session_start(); ?>

<input type = "checkbox" name = "option1" value = "on1" id = "opt1" <?php 
    if(isset($_SESSION['sticky_option1'])) 
        echo('checked = "checked"); 
?>/>

Example TextBox: <input type = "text" name = "textBoxName" <?php 
    if(isset($_SESSION['sticky_textBoxName']))
        echo('value = "' . $_SESSION['sticky_textBoxName'] . '"');
?>

...

<?php
    // Erase the POST values from session after the HTML is constructed.
    foreach($_SESSION as $k => $v)
        if( strpos($k, 'sticky_' !== false )
            unset($_SESSION[$k]);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:52:29.257

将`checked`属性添加到值在提交数据中的任何复选框。

# java - 在 Eclipse 中为其他源 .zip 文件设置断点

> ID：11003793
> 
> 赞同：0
> 
> 时间：2012-06-12T19:50:41.130
> 
> 标签：java, eclipse, debugging

我是一个相对缺乏经验的 Java 程序员（在其他语言方面有很多经验），在我没有编写的大型复杂程序中处理一个问题。使用 Apace 轴库时会出现此问题。我下载了它的 zip 并将其作为外部存档添加到我的运行/调试配置中。我可以成功进入代码，但设置断点不起作用。任何建议将不胜感激; 请尽可能详细，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:53:46.987

该来源仅供参考（因此您可以查看内部代码）。

为了能够添加断点，您应该重新编译库，而不仅仅是使用下载的类。

# sql - SQL - 如何将列及其数据复制到同一个表中的新列？

> ID：11003802
> 
> 赞同：2
> 
> 时间：2012-06-12T19:51:06.093
> 
> 标签：sql

我知道我想使用更新语句，但查询结构有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:52:46.883

```
UPDATE table
SET column2 = column1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:52:54.330

您不能使用更新创建新列，您必须先这样做。然后它就像这样简单：

```
update TheTable set NewColumn = OldColumn 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T19:53:15.433

以下 2 个 SQL 语句中的第一个将在表中创建新列，第二个`update`语句将从旧列填充新列。

```
alter table Table1 add newColumn char(32);
update table1 set newColumn=oldColumn;
commit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T19:59:04.380

```
update table_name set column_to_be_changed = existing column 
```

# php - Android SQLite 表缺少一列

> ID：11003803
> 
> 赞同：0
> 
> 时间：2012-06-12T19:51:07.770
> 
> 标签：php, android, sqlite

该应用程序与 PHP 类交互以从 MySQL 获取数据并使用 SQLite 在设备上存储用户数据，但它给了我错误消息。有人可以帮我解决吗？

**数据库处理程序.java**

```
public class DatabaseHandler extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "sqliteData";

    // Login table name
    private static final String TABLE_LOGIN = "login";

    // Login Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
    private static final String KEY_ROLE = "role";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
                + KEY_ID + " INTEGER PRIMARY KEY," 
                + KEY_NAME + " TEXT," 
                + KEY_ROLE + " TEXT" + ")";

        db.execSQL(CREATE_LOGIN_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_LOGIN);

        // Create tables again
        onCreate(db);
    }

    /**
     * Storing user details in database
     * */
    public void addUser(String id, String name, String role) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_ID, id); // id
        values.put(KEY_NAME, name); // Name
        values.put(KEY_ROLE, role); // Role

        // Inserting Row
        db.insert(TABLE_LOGIN, null, values);
        db.close(); // Closing database connection
    }

    /**
     * Getting user data from database
     * */
    public HashMap<String, String> getUserDetails(){
        HashMap<String,String> user = new HashMap<String,String>();
        String selectQuery = "SELECT  * FROM " + TABLE_LOGIN;

        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        // Move to first row
        cursor.moveToFirst();
        if(cursor.getCount() > 0){
            user.put("id", cursor.getString(1));
            user.put("name", cursor.getString(2));
            user.put("role", cursor.getString(3));
        }
        cursor.close();
        db.close();
        // return user
        return user;
    }

    /**
     * Getting user login status
     * return true if rows are there in table
     * */
    public int getRowCount() {
        String countQuery = "SELECT  * FROM " + TABLE_LOGIN;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        int rowCount = cursor.getCount();
        db.close();
        cursor.close();

        // return row count
        return rowCount;
    }

    /**
     * Re crate database
     * Delete all tables and create them again
     * */
    public void resetTables(){
        SQLiteDatabase db = this.getWritableDatabase();
        // Delete All Rows
        db.delete(TABLE_LOGIN, null, null);
        db.close();
    }

} 
```

**日志猫**

```
E/JSON(373): {"tag":"login","success":1,"error":0,"id":"013","user":{"name":"Mike Burton","role":"Developer"}}

I/Database(373): sqlite returned: error code = 1, msg = table login has no column named role

E/Database(373): Error inserting id=013 role=Developer name=Mike Burton

E/Database(373): android.database.sqlite.SQLiteException: table login has no column named role: , while compiling: INSERT INTO login(id, role, name) VALUES(?, ?, ?); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:55:28.167

听起来您可能已经修改了架构，但没有增加版本（因此数据库没有随着您的更改而重建）。如果是这种情况，您可以删除/重新安装您的应用程序或增加数据库版本以便`onUpgrade`调用。

# javascript - workflow / option to expand other options?

> ID：11003804
> 
> 赞同：-1
> 
> 时间：2012-06-12T19:51:11.643
> 
> 标签：javascript, jquery, html

I have a question about a conference quotation form that I am building. Once the user enters various information such as the conference date, number of delegates etc, I need other options to appear dependant on the duration of the conference. ie. If the user inputs dates showing that the conference will last 3 days - then 3 "sections" needs to appear for each day of the conference with inputs regarding meals for that particular day, etc.

What route could I take to accomplish this?

I am struggling to explain - so If i am not clear, please tell me and I will try to explain better

thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:26:42.410

我相信你会在这里找到一些东西：[jquery datepicker difference](https://www.google.com/search?q=jquery+datepicker+difference)

如果您的天数有所不同，您可以简单地添加一个 for 循环

```
for(var i=0;i<differenceInDays;i++){
    $('#days').append('<input name="day'+i+'"/>');
} 
```

# permissions - Error while executing gem...Permission Denied

> ID：11003808
> 
> 赞同：3
> 
> 时间：2012-06-12T19:51:22.377
> 
> 标签：permissions, gem, overriding, taps

I am attempting to install taps from my Heroku app folder. When I type "gem install taps," I get the following error:

> ERROR: While executing gem ... (Errno::EACCES) Permission denied - /Users/jacob/.rvm/gems/ruby-1.9.3-p194/gems/taps-0.3.24/bin/taps

I attempted to remove the taps-0.3.24 folder using rm -r and got this question: override rwxr-xr-x root/staff for /Users/jacob/.rvm/gems/ruby-1.9.3-p194/gems/taps-0.3.24//bin/schema?

Upon typing yes, it tells me permission denied. Here is the whole exchange:

> Jacob-MacBook-Pro:furious-ocean-6122012 jacob$ rm -r /Users/jacob/.rvm/gems/ruby-1.9.3-p194/gems/taps-0.3.24/ override rwxr-xr-x root/staff for /Users/jacob/.rvm/gems/ruby-1.9.3-p194/gems/taps-0.3.24//bin/schema? yes rm: /Users/jacob/.rvm/gems/ruby-1.9.3-p194/gems/taps-0.3.24//bin/schema: Permission denied override rw-r--r-- root/staff for /Users/jacob/.rvm/gems/ruby-1.9.3-p194/gems/taps-0.3.24//bin/schema.cmd?

Any thoughts on how to resolve this issue would be appreciated. Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T21:04:17.373

我在尝试让 Heroku Toolbelt 运行时遇到了这个问题。我能够删除旧版本，`sudo rm -rf /path/to/gems/taps-x.x.x`然后重新安装（没有 sudo）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-13T01:38:15.583

您应该在“gem....”之前添加“sudo”

# android - 应用程序不工作，不幸的是，XML 已停止错误

> ID：11003818
> 
> 赞同：0
> 
> 时间：2012-06-12T19:52:02.283
> 
> 标签：android, eclipse, error-handling

我已经编写了这段代码来解析这个 xml：

[http://hiscentral.cuahsi.org/webservices/hiscentral.asmx/GetSeriesCatalogForBox2](http://hiscentral.cuahsi.org/webservices/hiscentral.asmx/GetSeriesCatalogForBox2)

但是当我运行它时......它说“APP停止工作”，我无法弄清楚原因......请帮忙！

代码是：

**xmlActivity.java**

```
package com.example.xml;

public class XmlActivity extends ListActivity {
    static final String URL = "http://hiscentral.cuahsi.org/webservices/hiscentral.asmx/GetSeriesCatalogForBox2";
    // XML node keys
    static final String KEY_SeriesRecord = "SeriesRecord"; // parent node
    static final String KEY_latitude = "latitude";
    static final String KEY_longitude = "longitude";
    static final String KEY_location = "location";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_SeriesRecord);

        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_SeriesRecord, parser.getValue(e, KEY_SeriesRecord));
            map.put(KEY_latitude, parser.getValue(e, KEY_latitude));
            map.put(KEY_longitude, parser.getValue(e, KEY_longitude));
            map.put(KEY_location, parser.getValue(e, KEY_location));

            // adding HashList to ArrayList
            menuItems.add(map);
        }
        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_item, new String[] { KEY_latitude, KEY_longitude,
                        KEY_location }, new int[] { R.id.name, R.id.desciption,
                        R.id.cost });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String name = ((TextView) view.findViewById(R.id.name))
                        .getText().toString();
                String cost = ((TextView) view.findViewById(R.id.cost))
                        .getText().toString();
                String description = ((TextView) view
                        .findViewById(R.id.desciption)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        SingleMenuItemActivity.class);
                in.putExtra(KEY_latitude, name);
                in.putExtra(KEY_longitude, cost);
                in.putExtra(KEY_location, description);
                startActivity(in);

            }
        });
    }
} 
```

**SingleMenuItemActivity.java**

```
package com.example.xml;

public class SingleMenuItemActivity extends Activity {

    // XML node keys
    static final String KEY_latitude = "latitude";
    static final String KEY_longitude = "longitude";
    static final String KEY_location = "location ";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.single_list_item);

        // getting intent data
        Intent in = getIntent();

        // Get XML values from previous intent
        String latitude = in.getStringExtra(KEY_latitude);
        String longitude = in.getStringExtra(KEY_longitude);
        String location = in.getStringExtra(KEY_location);

        // Displaying all values on the screen
        TextView lblName = (TextView) findViewById(R.id.name_label);
        TextView lblCost = (TextView) findViewById(R.id.cost_label);
        TextView lblDesc = (TextView) findViewById(R.id.description_label);

        lblName.setText(latitude);
        lblCost.setText(longitude);
        lblDesc.setText(location);
    }
} 
```

**xmlParser.java**

```
package com.example.xml;

public class XMLParser {

    // constructor
    public XMLParser() {

    }

    /**
     * Getting XML from URL making HTTP request
     * 
     * @param url
     *            string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * 
     * @param XML
     *            string
     * */
    public Document getDomElement(String xml) {
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is);

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
    }

    /**
     * Getting node value
     * 
     * @param elem
     *            element
     */
    public final String getElementValue(Node elem) {
        Node child;
        if (elem != null) {
            if (elem.hasChildNodes()) {
                for (child = elem.getFirstChild(); child != null; child = child
                        .getNextSibling()) {
                    if (child.getNodeType() == Node.TEXT_NODE) {
                        return child.getNodeValue();
                    }
                }
            }
        }
        return "";
    }

    /**
     * Getting node value
     * 
     * @param Element
     *            node
     * @param key
     *            string
     * */
    public String getValue(Element item, String str) {
        NodeList n = item.getElementsByTagName(str);
        return this.getElementValue(n.item(0));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:13:25.020

您不能在活动线程中进行像 HttpRequest 这样的慢速操作。您必须将它们放在单独的线程（AsyncTask）中。谷歌提到了这一点，但我失去了来源，我很抱歉。

您应该尝试创建一个 AsyncTask ，这是您应该尝试的方式：

```
public class GetSoigneurInfoTask extends AsyncTask<Document, Integer, Document>                 //Le même code s'applique pour presque tout sauf onPostExecute()
{
    Document doc;
    String xml;
    String url;

    public GetSoigneurInfoTask(String URL)
    {
        url = URL;
    }

    protected Document doInBackground(Document...params)
    {
        xml = XmlFunctions.getXML(url);                                                         
        doc = XmlFunctions.XMLfromString(xml);
        return doc;
    }

    protected void onPostExecute(Document result)
    {
            if(result != null)
        {
            NodeList nodeList = doc.getElementsByTagName("RootTag");                                //Crée une liste avec les elements sous soigneur
            for (int i = 0; i < nodeList.getLength(); i++) 
            {
                Node node = nodeList.item(i);
                if (node.getNodeType() == Node.ELEMENT_NODE) 
                {
                    Element element = (Element) node;
                    NodeList nodelist = element.getElementsByTagName("childTag");
                    Element element1 = (Element) nodelist.item(0);
                    NodeList fstNm = element1.getChildNodes();
                    soignTemp = fstNm.item(0).getNodeValue();

                }
            }
        }
    } 
```

所以你调用你的方法，`doInBackground()`然后你就可以在`onPostExecute()`!

希望这可以帮助！

# mysql - Left join and get Total records on joined table

> ID：11003821
> 
> 赞同：0
> 
> 时间：2012-06-12T19:52:16.247
> 
> 标签：mysql

I am using following query:

```
SELECT `users`.`id` as id 
FROM (`users`) 
    LEFT JOIN `work_orders` 
        ON `users`.`id` = `work_orders`.`assigned_to` 
WHERE (work_orders.status = 'approved' 
        OR work_orders.status = 'scheduled' 
        OR work_orders.status = 'published') 
    AND work_orders.is_paid = 0 
ORDER BY `users`.`id` DESC 
LIMIT 30 
```

But with this query I am getting multiple records for each `users` if they have more than one `work_orders`. What should I do to only list `users` *once* which have more than one `work_orders`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:54:38.617

您可以使用 DISTINCT 子句：

```
SELECT DISTINCT(users.id) as id FROM (`users`) LEFT JOIN `work_orders` ON `users`.`id` = `work_orders`.`assigned_to` WHERE (work_orders.status = 'approved' OR work_orders.status = 'scheduled' OR work_orders.status = 'published') AND work_orders.is_paid = 0 ORDER BY `users`.`id` DESC LIMIT 30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:55:46.853

您可以添加 GROUP BY 语句以按用户 ID 过滤，因为这是您感兴趣的所有内容。

```
SELECT `users`.`id` as id 
FROM (`users`) LEFT JOIN `work_orders` ON `users`.`id` = `work_orders`.`assigned_to` 
WHERE (work_orders.status = 'approved' 
  OR work_orders.status = 'scheduled' 
  OR work_orders.status = 'published') 
  AND work_orders.is_paid = 0 
GROUP BY `users`.`id`
ORDER BY `users`.`id` DESC LIMIT 30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:55:50.920

尝试使用 GROUP BY

```
SELECT `users`.`id` as id 
  FROM (`users`) 
  LEFT JOIN `work_orders` 
    ON `users`.`id` = `work_orders`.`assigned_to` 
 WHERE ( work_orders.status = 'approved' 
       OR work_orders.status = 'scheduled' 
       OR work_orders.status = 'published' ) 
   AND work_orders.is_paid = 0 
GROUP BY `users`.`id` DESC 
LIMIT 30 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T19:58:58.723

```
SELECT `users`.`id` as id 
  FROM (`users`) 
  WHERE exists ( select 1 from `work_orders` where work_orders.status 
                     in  ('approved' ,'scheduled' ,'published' ) 
                     AND work_orders.is_paid = 0 
                     and `work_orders`.`assigned_to` =`users`.`id` )
 ORDER BY `users`.`id` DESC 
 LIMIT 30 
```

# dojo - Dojo chart custom tooltips

> ID：11003836
> 
> 赞同：1
> 
> 时间：2012-06-12T19:53:21.783
> 
> 标签：dojo

I include

```
"dojox/charting/action2d/Tooltip" ...

... function(ready, Chart, Spider, Tooltip, Base){ 
```

I have the tooltip set up, if I do something basic like return('test'), that shows properly.

```
var tip = new Tooltip(chart, "default",
            {
                text : function(o) {

                }
            }); 
```

I add my series like so:

```
chart.addSeries("min", {data: data[0] }, { fill: "blue" });
chart.addSeries("max", {data: data[1] }, { fill: "blue" });
chart.addSeries("Answered", {data: data[2] }, { fill: "#37B549" }); 
```

How do I access the charts data?

Right now tooltips by default show:

```
Question 1 //series
test1
10 //Axis point 
```

I only want tooltips to say [10 out of [max]]

I tried using o.tdata.data to get the point(10), but that threw a lot of errors.

Any thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T17:57:29.840

您可以在系列数据集中指定自定义工具提示。喜欢：

```
mychart.addSeries("line_series", 
               [{y:1,x:1,tooltip: "bar 1"}, 
                {y: 3,x:2,tooltip: "bar 2"}, 
                {y:5,x:3,tooltip: "bar 3"}], 
                {plot: "line_plot"}); 
```

看到这个小提琴：

[http://jsfiddle.net/goinoff/5VYhN/2/](http://jsfiddle.net/goinoff/5VYhN/2/)

# javascript - Mozilla Builder 编辑器取消转义 Unicode 字符，并发 w。AMO 上传失败

> ID：11003837
> 
> 赞同：0
> 
> 时间：2012-06-12T19:53:24.960
> 
> 标签：javascript, firefox, unicode, firefox-addon, firefox-addon-sdk

从 builder.addons.mozilla.org 将我的 Firefox 附加组件的最新版本上传到 AMO 真是太难了。收到“上传失败”消息。此版本的不同之处在于，在某些用作对象`content`属性的HTML 代码中使用了转义的 Unicode 字符。`widget`一旦字符串文字用右引号关闭，字符就会在在线编辑器中取消转义。计算光标列时显然包含了转义码中的字符，因此光标悬停在该行最右侧字符右侧的几个空格处​​。将受影响的文本从在线编辑器复制到 gedit（纯文本编辑器）会显示转义序列，而不是 Unicode 字符。

```
var undo=widget.Widget({
  id:"cating",
  label:"undo most recent highlight",
  content:
   "<div style=\"height: 100%; text-align: center; vertical-align:middle;\">&#8634;</div>",

... 
```

是否存在转义字符导致上传失败？有没有办法让非标准字符显示在 HTML 内容中，并且还能够将插件上传到 AMO？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:17:44.443

这可能与[https://bugzilla.mozilla.org/show_bug.cgi?id=790318相同的问题](https://bugzilla.mozilla.org/show_bug.cgi?id=790318)

# cocoa - Binding issue between Core Data and NSArrayController

> ID：11003839
> 
> 赞同：0
> 
> 时间：2012-06-12T19:53:42.113
> 
> 标签：cocoa, core-data, tableview, cocoa-bindings, nsarraycontroller

I am trying to set up the binding between Core Data, NSArraycountroller and a NSTableView. To get a NSManagedObjectContext for the NSArrayController. I dragged an NSObject in the IB, and named it after the appDelegate and then set up the binding of objectContext between appDelegate and the arrayController.

However, whenever I tried to run the app. I get this error message:

The error message:

```
The managed object model version used to open the persistent store is incompatible with
the one that was used to create the persistent store 
```

And then followed by another error message:

```
Failed to initialize store. 
```

I googled around, most of the people can solve this issue by clean their project or delete the files under ~/Library/Application Support/AppName/*.*. But I don't have luck with those.

Another thing is that, I desperately want some good tutorial on this topic (CoreData+ArrayController+TableView). Can someone shed some light on this as well? I read through the chapter 11 of the book "Cocoa Programming for Mac OSX 4th version", but didn't find it really helpful.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:55:13.750

终于解决了这个问题。我认为这与 Reskit 有关。与 CoreData 捆绑时，Reskit 有自己的 managedObjectContext。这就是为什么它一直告诉我两个对象模型不兼容的原因。NSArrayController 应该绑定到 RKManager 中的 managedObjectContext 而不是 appDelegate 中的那个。

所以我把它放在视图控制器的init方法中：

```
RKObjectManager *objectManager = [RKObjectManager sharedManager];
currentObjectContext = objectManager.objectStore.managedObjectContextForCurrentThread; 
```

并将NSArrayController对象中的managedObjectContext指向currentObjectContext。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:59:49.483

该错误与您的托管对象模型有关；它与您的绑定或表格视图无关。如果它发生在您运行应用程序时（与您尝试打开文档时相比），则可能是在恢复自动保存的文档期间。

**尝试从~/Library/Autosave Information**中删除任何相关内容，看看是否能解决最初的问题。

# android - 如何使用 Android onItemClick 获取 ListView 项目？

> ID：11003846
> 
> 赞同：1
> 
> 时间：2012-06-12T19:53:55.980
> 
> 标签：android, json, listview, hashmap, onitemclicklistener

这是[此处 SO Q](https://stackoverflow.com/q/11001746/742030)的延续，但我仍然缺少一些东西。

我不知道如何获取从 JSONObject 映射出的项目以用于列表视图。HashMap 键值为：

```
map.put(TAG_RES_FILE, resFile); 
```

我想把那个字符串放到我的`onItemClick(){int passResFile = getResources().getIdentifier(TAG_RES_FILE, "raw", "com.andaero.app");}`

我认为通过将标签名称放入下面的方法中，系统会自动将其从该项目位置拉出 - 显然不是。那么它是如何获得的呢？？谢谢。

编辑：我添加了一个 log.i() 来查看单击位置内的值并返回：

> getIdentifier(11925): {isRawRes=true, title=Advisory Circulators, label=AC, _id=1, resFile=advisory_circulators_sort_list, description=提供遵守法规和要求的方法、程序和实践等指导。, containerID=R .id.listContainer}

这是

> resFile=advisory_circulators_sort_list

这就是我需要得到的 - 我该怎么做？

这是整个听众：

```
public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {
                    MainActivity.mLayout.toggleSidebar();
                    setHasOptionsMenu(true);

                    FragmentManager fm = getFragmentManager();
                    final FragmentTransaction lcFT = fm.beginTransaction();
                    lcFT.setCustomAnimations(R.anim.slide_in, R.anim.hyperspace_out, R.anim.hyperspace_in, R.anim.slide_out);

                    final Bundle args = new Bundle();

                    Object o = lv.getItemAtPosition(pos);
                    String resFile = (String) o.toString();
                    int passResFile = getResources().getIdentifier(TAG_RES_FILE, "raw", "com.andaero.app");
                    args.putInt("KEY_RES_FILE", passResFile);

                    boolean isRawRes = true;
                    args.putBoolean("KEY_IS_RAW_RES", isRawRes);
                    Log.i("getIdentifier", resFile );

                    // Delayed to improve animations
                    final Handler handler = new Handler();
                    handler.postDelayed(new Runnable() {
                        public void run() {
                            ListViewFragment lvf = new ListViewFragment();
                            lcFT.replace(R.id.listContainer, lvf).commit();
                            lvf.setArguments(args);
                        }
                    }, 300);
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:31:16.567

所以我继续将项目发送到 textView 并将其可见性设置为在布局文件中消失。这很好用，但我希望有一种更好/更清洁的方法。

在 onItemClick() 方法中更改为：

```
Object o = lv.getItemAtPosition(pos);
String resFile = (String) o.toString();
int passResFile = getResources().getIdentifier(TAG_RES_FILE, "raw", "com.andaero.app");
args.putInt("KEY_RES_FILE", passResFile); 
```

对此：

```
String resFile = ((TextView) view.findViewById(R.id.listResFile)).getText().toString();
int passResFile = getResources().getIdentifier(resFile, "raw", "com.andaero.app");
args.putInt("KEY_RES_FILE", passResFile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:55:31.523

TAG_RES_FILE 没有在这个方法中声明，所以它可能是一个常量。为了证明它是正确的，尝试调试这个方法，看看它是否按照你的预期改变。

事实上，在整个方法中，您甚至都不会查看最终用户单击了哪个项目，而不是通过视图的标签，也不是通过项目的位置。我也没有看到你所说的地图的任何用法。

# php - PHP：Mysql 与 ssh 主机名连接

> ID：11003848
> 
> 赞同：0
> 
> 时间：2012-06-12T19:54:04.183
> 
> 标签：php, mysql

在我的 sql 主机环境中，当我尝试连接到 mysql 时，我必须通过 ssh 主机。这是我的连接：

```
ssh hostname: server01
username : user
pwd: password

mysqlhostname : mysql01
port : 3306
username : mysqluser
pwd: mysqlpwd 
```

如何在 php 中连接到数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:06:06.053

你不能。您需要做的是设置一个从您的网络服务器到您的 SSH 主机的 SSH 隧道，然后在 PHP 中使用 localhost 和您的隧道端口。

# php - 这对于 PHP 中的用户输入是否足够安全

> ID：11003851
> 
> 赞同：1
> 
> 时间：2012-06-12T19:54:09.560
> 
> 标签：php, mysql, security, input, escaping

> **可能重复：**
> [终极清洁/安全功能](https://stackoverflow.com/questions/4223980/the-ultimate-clean-secure-function)

在阅读了 PHP 安全性之后，我觉得我编写的任何代码总是不安全的。因此，为了解决用户输入的安全问题，我创建了一个函数，允许我在任何使用情况下转义和删除用户输入。

我只想知道这实际上是否安全，以及是否可以使其更安全。这还能防止什么样的攻击？从我可以通过使用 _GET 告诉 XSS 的情况来看，HTML 输入和 MYSQL 注入会被阻止吗？

```
function _INPUT($name,$tag,$sql,$url)
{
if ($_SERVER['REQUEST_METHOD'] == 'GET')
    $filter = ($_GET[$name]);//Assign GET to filter variable

    if ($tag == true)//Remove all HTML, PHP and JAVASCRIPT tags
    {
        $filter = strip_tags($filter);
    }
    if ($sql == true)//If MYSQL escaping is enabled
    {
        $filter = mysql_real_escape_string($filter);
    }
    if ($url == true)//If URL encoding is enabled
    {
        $filter = urlencode($filter);
    }
    return $filter;     

}

$output = _INPUT('name',true,true,true); 
```

我也将为 MYSQL 使用准备好的语句，尽管我需要更多地阅读它们以完全了解它如何防止注入。

感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T19:56:38.927

再一次，**没有通用的转义函数**可以神奇地使事情变得“安全”。

看到这个： [https ://stackoverflow.com/a/7810880/362536](https://stackoverflow.com/a/7810880/362536)

不同的逃生方法用于不同的事情。你不能只通过一堆应该在特定上下文中使用的函数来运行一堆数据。您正在创建垃圾数据，并且并不比最初使用原始用户数据更安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T19:56:59.203

不，

对于 SQL 注入预防，您真的希望使用[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)。这是一种更安全的方法，而不是转义引号。您还想使用[htmlspecialchars()](http://php.net/manual/en/function.htmlspecialchars.php)来转义 HTML 标签，而不是仅仅剥离它们，但这取决于您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T20:00:30.123

这是一个永恒的问题，答案因所需用途而异：对于准备好的查询，我相信使用自己的变量系统并让它处理输入是 100% 安全的。对于 HTML 输出，剥离标签可能并不总是您想要的；此外，将允许输入的内容列入白名单比黑名单更安全，因为你知道，黑客有幻想。对于 URL 输出，您的解决方案应该没问题，但请注意，其他一些平台可能会执行一些不同的 URL 编码（请参阅 Java 标准库和 iOS/Mac 库编码的字符串 URL 之间的区别，即）。

# php - 如何将 Instagram 照片拉到我的博客并与 Fancybox 集成？

> ID：11003854
> 
> 赞同：5
> 
> 时间：2012-06-12T19:54:13.687
> 
> 标签：php, jquery, api, fancybox, instagram

我在 Instagram 开发者页面上看到了文档。[http://instagram.com/developer/endpoints/](http://instagram.com/developer/endpoints/)

但我想展示我自己的照片，所以我需要获取访问令牌。之后，我想让我的照片在 Lightbox 或 Fancybox 中工作。我能够在所有需要客户端 ID 的端点上完成这项工作。它是让我难过的访问令牌。

编辑：

我想使用 php 和/或 jquery 从我的帐户创建一个图片库。那里的任何人都可以指出我正确的方向吗？我可以使用任何教程从头到尾演示这一点吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T13:51:51.737

我刚刚写了一个教程来帮助像你这样的人操作这个 api 并生成 Fancybox 画廊。它甚至包括最终产品的源文件。这是一个链接[http://www.blueprintinteractive.com/blog/how-instagram-api-fancybox-simplified](http://www.blueprintinteractive.com/blog/how-instagram-api-fancybox-simplified)

# jquery - 如何创建一个万无一失的电话号码字段 - 并考虑复制/粘贴

> ID：11003860
> 
> 赞同：1
> 
> 时间：2012-06-12T19:54:32.020
> 
> 标签：jquery, html

我想将我的电话号码字段拆分为 3 个字段（区号、下一个 3、下一个 4）。我想说明几个条件：

1.  字段达到指定位数后，光标会自动移动到下一个字段。
2.  如果用户在第一个字段中粘贴了他们的整个电话号码，jQuery 将相应地分配这 10 位数字。

我已经得到 #1 的工作，没问题：[如何在 Silverlight 中将光标移动到下一个字段自动而不按 Tab 键？](https://stackoverflow.com/questions/8221872/how-to-move-cursor-to-next-field-auto-without-hit-tab-key-in-silverlight)

然而，#2 被证明超出了我的 jQuery 联盟 - 所以我在这里请求一些帮助。

其次，我想知道我是否在这里忽略了什么？我不这么认为，但我想我会把它扔在那里。

我应该补充一点，我已经考虑过这个：[http](http://digitalbush.com/projects/masked-input-plugin/#demo) ://digitalbush.com/projects/masked-input-plugin/#demo - 但我倾向于认为以上内容更能让用户满意......也许我错了.

**更新**- 仅限美国的电话号码 =)。

**更新 2** - 一位朋友给我发了这个： http: [//www.mathachew.com/sandbox/jquery-autotab/](http://www.mathachew.com/sandbox/jquery-autotab/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:58:27.643

像这样 - 获取字段值，删除非数字字符，测试长度，并在必要时将其拆分：

```
$('#telephone1').on('change',function(e) {
    var $this = $(this),
        phone = $this.val().replace(/\D/g, ''); // remove non-numeric characters
    if (phone.length > 3) {
        $('#telephone3').val(phone.substr(6,4));
        $('#telephone2').val(phone.substr(3,3));
        $('#telephone1').val(phone.substr(0,3));
    } else {
        $('#telephone1').val(phone);
    };
}); 
```

[http://jsfiddle.net/v6was/](http://jsfiddle.net/v6was/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T03:25:37.687

```
var num = $('.number').html();
var first = num.substr(0,3);
var second = num.substr(3,4);
var third = num.substr(7,4);
var newNum = first + ' ' + second + ' ' + third;
$('.number').html(newNum); 
```

# sql-server - 动态选择一列

> ID：11003861
> 
> 赞同：0
> 
> 时间：2012-06-12T19:54:35.250
> 
> 标签：sql-server, tsql

我有一个`SELECT`语句，我想在另一个`SELECT`语句中使用其中一个列的结果。

例子：

```
SELECT t.day, t.hour, 
    CASE t.event_name IS NULL
    THEN (SELECT t.day --I would like to select on a day(ie the value of t.day)
          FROM   other_events)
    ELSE t.event_name
    END as Event_Name
FROM   event_t t 
```

`other_event`是一个表，列是天；所以如果我没有`event`in `event_t`，我会在`other_event`特定的日子里拥有它。

当然这行不通，我想知道在 T-SQL 中是否可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:31:28.943

如果您想要的所有日子都在第一个表中，这应该有效：

```
SELECT t1.day,
       t1.hour,
       COALESCE(t1.event, t2.event) AS event
FROM   event_t t1
       LEFT OUTER JOIN other_events t2
                    ON t1.day = t2.day 
```

# media - 媒体查询 Flash Banner Q

> ID：11003867
> 
> 赞同：0
> 
> 时间：2012-06-12T19:55:17.147
> 
> 标签：media

快速提问：我有一个 1000 像素宽的 flash 横幅。我希望当用户的屏幕（如智能手机）小于 1000 像素时，替换图像。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T16:19:49.510

隐藏 flash 横幅并在宽度小于 1000px 时使用 css 中的以下代码显示图像：

```
@media screen and (min-width:1000px) {
#flash_banner {display:block;}
#image {display:none;}
}
@media screen and (max-width:999px) {
#flash_banner {display:none;}
#image {display:block;}
} 
```

希望它对你有用。

# objective-c - 当 UIImageView 到达某个位置时如何触发事件？

> ID：11003869
> 
> 赞同：1
> 
> 时间：2012-06-12T19:55:19.523
> 
> 标签：objective-c, xcode, events, uiimageview, location

我有一个`UIImageView`在屏幕上移动的，当它与另一个在一定距离内时，我试图触发一个方法`UIImageView`，也在移动。我不一定要检查任何特定时间，我想知道它在那个距离内的任何时间。帮助！

**EDIT:** I have multiple objects(the enemies) moving down the screen while the player is at the bottom of the screen. When the user taps the screen, it "shoots"(a new projectile object is created and the animation to move it up the screen is started). I am trying to detect when the "projectiles" hit the "enemies" and triggering an event(i.e. killing the enemy). I have no idea where to put the code to do this, or even what to do. Do I want to use the Notification System, or do I want to calculate if the projectile will hit the enemy as soon as it is fired?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T23:53:37.597

您可能想使用[Key-Value Observing](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVOBasics.html)。[这](https://stackoverflow.com/questions/4874288/how-can-i-get-a-callback-by-kvo-on-a-uiviews-frame-property)是一个例子。

# javascript - 当它们的分辨率不同时，我可以在我的基础图层上叠加地图吗？

> ID：11003871
> 
> 赞同：0
> 
> 时间：2012-06-12T19:55:26.943
> 
> 标签：javascript, gis, openlayers, arcgis

我正在尝试将 ArcGISCache 图层叠加在另一个 ArcGISCache 基础图层之上。我无法显示叠加层，我不确定出了什么问题。我修改了这个例子来开始我的工作：[http ://dev.openlayers.org/releases/OpenLayers-2.11/examples/arcgiscache_jsonp.html](http://dev.openlayers.org/releases/OpenLayers-2.11/examples/arcgiscache_jsonp.html)

我在[http://jsfiddle.net/Sq9hE/15/中进行原型设计](http://jsfiddle.net/Sq9hE/15/)

当我将地图构造函数更改为使用`yorkLayer`的分辨率进行实例化时，我可以看到约克地图中的图块，但看不到基础层。如何创建此地图对象以同时显示基础图层和叠加层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:38:08.737

我以前没有使用过 javascript api，但在使用适用于 Android 的 ArcGIS api 时遇到了类似的问题。如果您使用两个缓存切片图层，则可能是因为它们没有使用透明度进行缓存。可能它们都处于活动状态，但您只能看到顶层的图块。

# iphone - 显示来自 iOS 本地服务器的动态网页内容（即使用浏览器作为远程屏幕）

> ID：11003874
> 
> 赞同：3
> 
> 时间：2012-06-12T19:55:32.073
> 
> 标签：iphone, ios, http, webserver, remote-access

我想使用 iOS 应用程序作为本地服务器在本地网络的 http 页面中显示一些非常简单的图形。现在我听说在本地网络上显示一些 http 页面非常容易，例如使用[CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer)。

是否也可以从 iPhone 端动态调整页面内容？

意义

1.  用户在他选择的 desktop-pc-browser 中输入 URL
2.  用户走到他的沙发上，用他的 iPhone 浏览文本/图像，看着远程屏幕
3.  （无需到浏览器刷新页面？）

这可行吗？

当然，我也可以尝试设置一些蓝牙连接，在 iOS/MacOS 应用程序之间进行连接，但我认为浏览器版本会更加灵活:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:11:24.353

稳定的连接？不需要支持每一个浏览器？然后在您的应用程序和浏览器之间打开一个 websocket 连接。然后，您会建议您的浏览器重新加载或通过 websocket 显示另一张图片。

如果您需要支持更多浏览器，您可能需要彗星/长轮询支持。不过，我不确定 CocoaHTTPServer 是否支持它。

如果这些都不起作用，您可以让您的 web 应用程序时不时地执行 Ajax 请求，以检查是否有更改。

# c# - 您如何识别导致二进制序列化在 .NET 中失败的字段？

> ID：11003876
> 
> 赞同：7
> 
> 时间：2012-06-12T19:55:35.290
> 
> 标签：c#, .net, serialization, binaryformatter

我正在尝试使用以下方法在 .NET 中序列化对象图：

```
public static byte[] Serialize(object data)
{
    var binary = new BinaryFormatter();
    using (var ms = new MemoryStream()) {
        binary.Serialize(ms, data);
        return ms.ToArray();
    }
} 
```

但是，我遇到了以下错误：

```
FormatException: Input string was not in a correct format. 
Stack Trace: 
  at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
  at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
  at System.String.System.IConvertible.ToInt32(IFormatProvider provider)
  at System.Convert.ToInt32(Object value, IFormatProvider provider)
  at System.Runtime.Serialization.Formatters.Binary.__BinaryWriter.WriteValue(InternalPrimitiveTypeE code, Object value)
  at System.Runtime.Serialization.Formatters.Binary.__BinaryWriter.WriteMember(NameInfo memberNameInfo, NameInfo typeNameInfo, Object value)
  at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.WriteKnownValueClass(NameInfo memberNameInfo, NameInfo typeNameInfo, Object data)
  at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.WriteMembers(NameInfo memberNameInfo, NameInfo memberTypeNameInfo, Object memberData, WriteObjectInfo objectInfo, NameInfo typeNameInfo, WriteObjectInfo memberObjectInfo)
  at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.WriteMemberSetup(WriteObjectInfo objectInfo, NameInfo memberNameInfo, NameInfo typeNameInfo, String memberName, Type memberType, Object memberData, WriteObjectInfo memberObjectInfo)
  at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Write(WriteObjectInfo objectInfo, NameInfo memberNameInfo, NameInfo typeNameInfo, String[] memberNames, Type[] memberTypes, Object[] memberData, WriteObjectInfo[] memberObjectInfos)
  at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Write(WriteObjectInfo objectInfo, NameInfo memberNameInfo, NameInfo typeNameInfo)
  at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Serialize(Object graph, Header[] inHeaders, __BinaryWriter serWriter, Boolean fCheck)
  at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize(Stream serializationStream, Object graph, Header[] headers, Boolean fCheck) 
```

有没有一种直接的方法来确定哪个字段产生了这个错误？我可以递归地将对象图中的字段标记为 NonSerialized 以缩小潜在的罪魁祸首，但由于对象图非常广泛，这很麻烦而且似乎没有必要。

请注意，我不确定为什么 BinaryFormatter 不能序列化对象图中的一个或多个值。如果对象可以在运行时存储在内存中，不清楚为什么它不能被序列化。这可能是枚举的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T20:27:52.627

使用Windbg。[在此处](http://msdn.microsoft.com/en-US/windows/hardware/hh852363)下载（从安装程序中仅选择调试器。您无需下载完整的 SDK）并启动它。

然后使用`File - Open Executable`- 并启动它。您将在调试器中的异常处中断。如果没有在开始前选择

```
Debug - Event Filters - CLR Exception - Enabled 
```

在每个托管异常上启用断点。然后你需要输入

```
.loadby sos clr 
(if you are using .NET 3.5 .loadby sos mscorwks)
.prefer_dml 1
!dso 
```

这将为您提供一个列表，其中包含当前线程在失败之前使用的对象。然后单击带有蓝色下划线的 NameInfo 实例之一，以查看序列化程序在哪个成员变量处失败。我同意这需要一些耐心来学习，但是您可以在创纪录的时间内调试这些东西，而其他人需要在他们的代码中摆弄才能解决问题。您需要做的就是查看导致问题的 NameInfo 实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T20:03:15.770

我解决这个问题的方法是将对象序列化为字符串，然后将字符串写入文件。然后，您可以查看序列化字符串，查看它停止的位置，并从那里推断是哪个元素导致了问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T20:00:09.007

注释掉所有属性，并序列化对象。一次重新引入它们，直到错误返回。

这是基本调试。

如果序列化的类型不多，堆栈跟踪会给出提示。

# sql - 来自 VBA/SQL 使用 Like 的语法错误

> ID：11003881
> 
> 赞同：0
> 
> 时间：2012-06-12T19:55:56.943
> 
> 标签：sql, ms-access, vba, ms-access-2007

我在 vba (access 2007) 中有一个 sql 命令，它给了我错误，我不知道为什么。具体来说，它表示 WHERE 子句中缺少一个运算符。我无法弄清楚缺少什么。它不是 UDF ReplaceNotAN，它替换了特定的非字母数字字符。

关于发生了什么以及如何解决它的任何想法？我在 intertubez 上找到的类似错误的所有内容都是无关紧要的（主要是关于单引号和双引号问题 - 但显然这不适用于这里）。

```
dcSql = "UPDATE table SET table.Customer=ReplaceNotAN(Customer)" & _
    " WHERE table.Customer Like '*[-,.;:_'&=\/#]*';"
DoCmd.RunSQL dcSql 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:58:47.400

你在类似的短语中有一个额外的单引号......

尝试将我认为的那个加倍...

```
Like '*[-,.;:_''&=\/#]*';" 
```

# c++ - 这些有什么区别？(字符)

> ID：11003882
> 
> 赞同：-5
> 
> 时间：2012-06-12T19:55:59.350
> 
> 标签：c++, arrays, pointers, char

> **可能重复：**
> [char a[] = “string”; 之间有什么区别？和 char *p = “字符串”；](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string)

你能解释一下这些有什么区别吗？^^

```
 //difference between:
            char* sz1 = "blah";
            char  sz2[] = "blah";

            //and also please explain these
            char *sz3 = new char[512];
            char *sz4[512] = { 0, };
            char sz5[512]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:05:41.187

`"blah"`是一个`const char [5]`。在第一行中，该数组被衰减为一个指针，该指针作为指向第一个元素的指针存储在您的变量中。它也是指向 const 字符的非常量字符的指针。它应该是：

```
const char *sz1 = "blah"; 
```

在第二个中（感谢 jrok），它创建了一个实际的数组并用`{'b', 'l', 'a', 'h', '\0'}`.

```
char *sz3 = new char[512]; 
```

`512 * sizeof (char)`这为字符分配内存字节`sz3`并将指向开头。这存储在堆上，而不是堆栈上，所以不要忘记`delete[]`它。

```
char *sz4[512] = { 0, }; 
```

这将创建一个包含 512 个字符指针的数组，并将它们全部初始化为 0 (NULL)。不需要逗号，之后添加到初始化列表中会更容易。这里可以使用[螺旋法则](http://c-faq.com/decl/spiral.anderson.html)`sz4 is an array of 512 (one right) pointers (one left) to char (two left)`来确定。

```
char sz5[512]; 
```

这将创建一个包含 512 个字符的数组（在堆栈上）。

除了倒数第二个之外的所有内容都可以有效地替换为`std::string`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T20:05:14.350

前两个示例本质上是相同的，都是在运行时为它们分配内存的 char 指针。

第三个，您分配了 512 字节的内存，并为 sz3 分配了它的地址。

对于第四个，您声明了一个由 512 个字符指针组成的数组，但您的分配（据我所知）是不正确的。

最后，第五条语句创建了一个包含 512 个字符的数组。

# javascript - 函数外的 clearTimeout() 无法正常工作

> ID：11003883
> 
> 赞同：-1
> 
> 时间：2012-06-12T19:56:12.067
> 
> 标签：javascript, jquery, function

我有这行代码，但它不起作用，我猜我的函数是这里问题的原因。这是我的 JavaScript：

```
$(document).ready(function () {
    var interval;

    function move(ele) {
        $(ele).animate({
            'background-position-y': '0px'
        }, 200, function () {
            $(ele).animate({
                'background-position-y': '3px'
            }, 200, function () {
                interval = setTimeout(function () {
                    move(ele)
                }, 3);
            });
        });
    };
    $(".up").hover(function () {
        move(this), function () {
            clearTimeout(interval);
            interval = null;
            $(this).css("background-position", "80px 3px ");
        };
    }); 
```

有人可以解释一下我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:05:02.527

错误，看起来您的*实际*问题是您只将一个函数传递给`hover`，而不是两个。你有`….hover(function() { move(…), function() { … } })`而不是`….hover(function() { move(…); }, function() { … })`.

将来，如果您养成一致缩进代码的习惯，这种错误将更容易发现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:54:27.323

即使按照 David 的建议使用正确的右括号，仍然存在使动画继续进行的问题。清除计时器（间隔）不会阻止传递给的回调函数`.animate()`执行。所以`interval = setTimeout(...)`仍然会被执行并延续动画周期。

我为一个工作示例重新编写了代码，尽管可能会有一些改进（比如去掉一个全局变量）。 [http://jsfiddle.net/aKKRk/](http://jsfiddle.net/aKKRk/)

# keyboard - 使用 NumLock 键选择

> ID：11003887
> 
> 赞同：0
> 
> 时间：2012-06-12T19:56:23.857
> 
> 标签：keyboard, mapping, hotkeys

我正在寻找重新分配键盘“NumLock”键的功能。本质上，我想使用“NumLock”键来选择电子表格上的多个项目，而不是使用“Ctrl”键来选择多个项目。任何人都有快速修复或可以指导我使用第三方解决方案？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:51:51.927

您可以使用[AutoHotkey](http://www.autohotkey.com/)来实现这一点。AHK 的优点之一是它提供了[重新映射功能](http://www.autohotkey.com/docs/misc/Remap.htm)，因此您的 numlock 键可以成为第二个 ctrl。

# php - phpunit的maven php插件无法加载

> ID：11003890
> 
> 赞同：1
> 
> 时间：2012-06-12T19:56:40.123
> 
> 标签：php, maven, phpunit

在[http://www.php-maven.org/tags/2.0.0/php-lib-5min.html](http://www.php-maven.org/tags/2.0.0/php-lib-5min.html)上完成了安装步骤...

使用：Maven 3.0.3、PHP 5.3.13、maven-php-plugin 2.0.0、phpunit 3.6.10。

该项目只有通过项目构建器调用放入的存根 LibraryClass.php 和 LibraryClassTest.php。

当我在他们指南的最后一步运行'mvn package'时，我得到：

原因：org.apache.xbean.recipe.MissingAccessorException：无法找到有效的setter方法：public void org.phpmaven.phpunit.impl.PhpunitSupport360.setSingleInvocation(...)

查看 PhpunitSupport360 的 javadoc，该方法不存在。由于一切都是由 Maven（和梨）安装的，我不确定发生了什么。该指南对用户 Maven v3 说。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:15:08.130

似乎它加载了错误的插件。对我来说它有效。

您应该确保它确实加载了正确的插件版本。如果您尝试更改 php-maven 插件版本（fe 到 2.0-SNAPSHOT），您应该使用相应的 php-parent-pom 并使用属性 ${phpmaven.plugin.version} 作为版本。或者简单地从 php-maven 插件中删除任何版本号，因为版本号由 php-parent-pom 管理。

您可以查看 mvn help:effective-pom 的输出以了解发生了什么以及使用了哪些插件版本。

# ruby-on-rails - 像数组查询的地方

> ID：11003892
> 
> 赞同：0
> 
> 时间：2012-06-12T19:56:40.983
> 
> 标签：ruby-on-rails

我有一个 Track 模型，其中包含 4 列逗号分隔的字符串值，需要通过任意数量的术语进行搜索。

例如

```
Track.first.genre => "Alternative, Lite Rock, Indie Rock, Psychedelic"
Track.first.mood => "Aggressive, Angry, Dark, Driving, Energetic, Heavy"
Track.first.tempo => "Fast, Medium"
Track.first.artist => "something" 
```

然后，用户可以使用任意数量的术语来缩小显示的曲目列表。我将这些术语收集到与每列匹配的数组中。例如

```
genres = params[:genre].split(",")
moods = params[:mood].split(",") 
```

等等。因此，如果genres => ["Rock", "Alternative"]，这将匹配所有在流派列中包含这些术语的曲目，并且所有附加术语将从返回的数组中进行选择，依此类推，对于 4 个中的每一个列。

执行此操作的最佳方法是什么，以及如何使用 like 和数组作为条件编写 where 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:06:17.740

^ 考虑使用流派、情绪和节奏的模型。ActiveRecord 将使涉及这些的查询变得更加容易。

^[`serialize`](http://apidock.com/rails/ActiveRecord/Base/serialize/class)声明可以为您节省一些翻译。

^ 您可以使用 where 调用搜索所需的数组元素，例如：

```
class Track < ActiveRecord::Base
  def self.for_genre(name)
    where "genre like '%#{name}%'"
  end
end 
```

这意味着选择不是其他名称子字符串的名称。

# html - 背景图像放大，裁剪但内容是静态的

> ID：11003894
> 
> 赞同：0
> 
> 时间：2012-06-12T19:56:44.200
> 
> 标签：html, css, background, resize

```
style{ background: url...}
<body>
  <div id = 'content'>
     BLABLABLABLABLBA
  </div>
</body> 
```

我想知道如何设置背景图像（在 css 中）以确保如果我裁剪浏览器窗口，它将自动重新调整。但内容需要修复。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:42:15.050

[http://css-tricks.com/](http://css-tricks.com/)上的一篇文章叫做[perfect-full-page-background-image](http://css-tricks.com/perfect-full-page-background-image/)的文章将有助于找出您的问题。他给了你所有不同的方法。

顺便说一句，您只需要将#content 的宽度保持为固定宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:21:11.617

这是一个[**jsFiddle**](http://jsfiddle.net/ESZJC/)，它演示了在外部 div 中使用固定大小`position:fixed`而在内部 div 中保存图像的过程`background-size:contain`。

**编辑：**现在一个额外的 div 也用于包含任何边框要求！
**EDIT-2：**更新了 jsFiddle `:contain`，而不`:cover`是非抽象图像。

对于**IE6-8**等旧浏览器，有许多插件可供选择，允许使用**CSS3 样式**。[这个名为backgroundSize.js](http://louisremi.github.com/jquery.backgroundSize.js/demo/)的jQuery 插件专门供SO 成员[Louis-Rémi](https://stackoverflow.com/a/10147089)`:cover`使用和`:contain`提供，如果您需要该选项。`background-size`

# autocomplete - 删除 aptana ' 和 " 自动完成

> ID：11003897
> 
> 赞同：0
> 
> 时间：2012-06-12T19:56:48.790
> 
> 标签：autocomplete, aptana, pydev

在 Aptana(PyDev) 中是否可以只删除完成“和”的自动完成？

我无法在首选项中找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:19:01.560

转到窗口首选项-> PyDev-> 编辑器-> 键入取消选中自动文字关闭

在窗口首选项-> Aptana Studio-> 顶部附近的编辑器中找到另一个，有一个复选框自动关闭匹配字符对，我不得不取消选中它。

# iphone - 从超类调用子类中重写的方法

> ID：11003901
> 
> 赞同：0
> 
> 时间：2012-06-12T19:57:13.857
> 
> 标签：iphone, objective-c, inheritance

我有一个基类，它定义了用于返回用于构建服务 url 的各种信息的类方法。基类还定义了一个用于构建该 URL 的实例方法。我希望基类有这个方法的默认实现，这样当我需要不同的 url 时，我只需要在我的子类中覆盖它。如何让这个基方法调用被覆盖的类方法来使用子类中的类方法构建 url？下面是我现在不工作的代码：

基类方法：

```
- (NSString *)buildRequestUrlString{
    return [Utils serviceEndpointForOperationId:[[self class]operationId] version:[[self class] operationVersion] andRequestMethod:[[self class] methodType];
} 
```

operationId、operationVersion 和 methodType 是在子类中实现的类方法，但是当子类进行以下调用时：

```
[super buildRequestUrlString]; 
```

它使用基类中的类方法来构建我的端点，而不是我的子类中的类方法。我怎样才能让它不那样做？甚至可能吗？

提前致谢，

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:07:00.500

使用`self`而不是`super`.

```
[self buildRequestUrlString]; 
```

（或者解释为什么这在你的情况下不起作用）。

回应评论，听起来你的类分解不正确（或者你很困惑）。具体来说，这可能就是您收到三个全是“使用`self`”的答案的原因；我们不明白问题出在哪里。

如果您的基类需要从子类调用实例方法，那么它需要对子类实例的引用。即说你有：

```
@interface Concrete:Base 
```

然后，Base 可能会实现一个类方法，例如：

```
+ baseWithConcreteQuantity:(int)aQuant
{
    return [[self alloc] initWithConcreteQuantity:aQuant];
} 
```

它会像这样使用：

```
[Concrete baseWithConcreteQuantity:10]; 
```

也就是说，Objective-C 中的类方法——不像其他语言中的静态方法——像实例方法一样被继承。

现在，对于实例方法，您总是`super`从该方法调用特定方法的实现。使用`super`调用基类的*不同*方法几乎*从来没有*做过，并且肯定表明其他事情是错误的。

同样，基类永远不应该尝试专门调用基类中不存在的子类中的功能。

IE

```
// in base
...
[self doSomething];
...

- (void)doSomething { ; }

// where a subclass might
- (void)doSomething { ... ; [super doSomething]; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:10:29.903

在您的“buildRequestUrlString”方法中，您的 [self class] 显然属于“基类”类型。

对象继承指南强烈反对尝试从父类访问子类的属性，因为父类（并且应该）不知道子类是否存在。

猜猜，我打字的速度不够快，按照bbum所说的来解决这个问题；）

编辑：这将是一个 hack，与我刚才所说的相反，但您可以将类名作为参数移交：

```
- (NSString *)buildRequestUrlString:(Class)theClass{
    if (!theClass) theClass = [self class];
    return [Utils serviceEndpointForOperationId:[theClass operationId] version:[theClass operationVersion] andRequestMethod:[theClass methodType]];
}

[super buildRequestUrlString:[self class]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:20:18.387

我会为此使用模板模式。基本上在你的基类中创建 3 个实例方法来获取你的 operationId 等，在它们只返回 nil 的基类中。然后在您的子类中覆盖这 3 个方法以返回正确的值。

您的 buildRequestUrlString 方法使用 [self operationId] 等。

# android - 跟随市场 URL 时，Evo 4g LTE 打开浏览器而不是本机应用程序

> ID：11003908
> 
> 赞同：0
> 
> 时间：2012-06-12T19:57:38.733
> 
> 标签：android, url, redirect, google-play

作为我当前项目的一部分，我的任务是收集官方 Android 市场上各种应用程序的 URL。

我有一个市场 URL，例如：

```
https://play.google.com/store/apps/details?id=com.endomondo.android.pro 
```

在大多数设备上，当我关注这样的 URL 时，我会看到一个弹出窗口，询问我是要在浏览器中打开链接还是使用市场应用程序打开链接。

但是，在[EVO 4g LTE](http://en.wikipedia.org/wiki/HTC_Evo_4G_LTE)设备上，当我点击这样的 URL 时，我没有收到任何提示，而是立即在浏览器中打开。

是否有人遇到任何其他无法正确处理市场链接的设备？有谁知道我是否可以使用其他一些神奇的 URL 来在这个设备以及所有其他设备上正常工作？注意：我没有在这里启动意图，用户将在我的应用程序之外单击此链接，因此我不能使用 market://uri。

**编辑：**

我[在 Google Play 上发布的文档页面上找到了这个简介](http://developer.android.com/guide/publishing/publishing.html)

> 注意：如果您创建一个链接以从您的网站打开 Google Play，并且用户从 Android 设备中选择它，则设备的 Google Play 应用程序将解析该链接，以便用户可以在设备上使用 Google Play 应用程序而不是打开网站。因此，在网页上创建链接时，您应该始终使用[http://play.google.com/store/apps/ ... URI。](http://play.google.com/store/apps/)从您的 Android 应用程序中指向您的应用程序时，请在意图中使用 market:// URI，以便始终打开 Google Play 应用程序。

这似乎表明播放应用程序将“拦截”并解析链接（就像在其他所有设备上一样）。

因此，这可能只是此设备上安装的特定 Play 商店 apk 的错误。

**编辑 2：**

如果我使用市场 uri，设备会正确打开 Play 商店应用程序。不过，我的下一个障碍是我需要能够从这些链接中获取点击数据。我之前的做法是用 bit.ly 缩短它们，它也为我跟踪点击次数。但是 bit.ly 和 goo.gl 不会让我缩短`market://`uri 字符串。是否有人碰巧知道具有点击统计信息的 URL 缩短器，并且`market://`即使它在技术上不是有效的 URL，也会允许我缩短 uri 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:27:59.623

您可以尝试旧的 'market://' 方案，看看是否可行。显然，当您单击链接时显示的活动选择器存在一些专利问题，并且在某些 HTC 设备上它已被禁用。你可能会碰到这个。您可以尝试使用在本机应用程序（如 Google+、Picasa、Gmail）中打开的其他 URL 来检查您的设备如何处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T21:33:42.433

> 是否有人遇到任何其他无法正确处理市场链接的设备？

许多较新的 HTC 型号都会有这种行为。

> 有谁知道我是否可以使用其他一些神奇的 URL 来在这个设备以及所有其他设备上正常工作？

使用`market://`. 由于 HTC 更改的性质，所有`http://`URL 都将转到用户为此类 URL 建立的首选活动，通常是浏览器。

> 是否有人碰巧知道具有点击统计信息的 URL 缩短器，并且允许我缩短 market://uri 字符串，即使它在技术上不是有效的 URL？

迫在眉睫，在某个地方设置您自己的 HTTP URL，可以将您重定向到您的`market://`URL，然后使用该 URL。就用户将获得浏览器，然后是 Play 商店而言，这方面的可用性很糟糕。

> 我对专利争吵的理解是，它是扫描文本并将其链接起来的行为，而不是向用户提供的选择。

不幸的是，HTC 对专利纠纷的解决办法最好用“用别克拍苍蝇”来形容。

# java - 依赖于特定 dll 的 play(java) 项目将如何在非 Windows 机器上运行？

> ID：11003909
> 
> 赞同：0
> 
> 时间：2012-06-12T19:57:51.497
> 
> 标签：java, windows, playframework

我正在启动一个 Play Framework 项目，该项目使用加载了命令的特定**dll （从公司购买以执行某些特定操作）。**`System.load`

我的问题是：当我将它**部署**在云上时它将如何运行？（例如在 cloudbees 上）？

我知道本地正在运行（我在 Windows 7 环境中。并且可以解决 dll 依赖项）但是在将项目投入生产时如何解决这个问题？

也许这个问题听起来很愚蠢，但我根本没有这方面的具体知识:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:08:21.790

对于生产环境，Play 生成一个 WAR 文件（Java Web 应用程序）。您必须配置项目才能将 DLL 包含到此 WAR 文件中。此外，您必须确保生产环境（cloudbees）是基于 Windows 的。在其他情况下，它不会成功。

# w3c - 为什么 CSS 中的边距/填充百分比总是根据宽度计算？

> ID：11003911
> 
> 赞同：135
> 
> 时间：2012-06-12T19:58:06.010
> 
> 标签：w3c, css

如果您查看[CSS 框模型规范](http://www.w3.org/TR/CSS2/box.html#margin-properties)，您将观察到以下内容：

> [margin] 百分比是根据生成框的包含块的**宽度计算的。****请注意，“margin-top”和“margin-bottom”也是如此。**如果包含块的宽度取决于此元素，则结果布局在 CSS 2.1 中未定义。 *（强调我的）*

这确实是真的。但是*为什么*？到底是什么迫使任何人以这种方式设计它？很容易想到您想要的场景，例如某件事总是从页面顶部向下 25%，但很难想出任何理由让您希望垂直填充相对于水平尺寸父母。

这是我所指的现象的一个例子：

```
<div style="border: 1px solid red; margin: 0; padding: 0; width: 200px; height: 800px;">
  This div is 200x800.
  <div style="border: 1px solid blue; margin: 10% 0 0 10%;">
    This div has top-margin of 10% and left-margin of 10% with respect to its parent.
  </div>
</div> 
```

[http://jsfiddle.net/8JDYD/](http://jsfiddle.net/8JDYD/)

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-12T21:03:31.700

将我的评论转移到答案，因为它合乎逻辑。但请注意，这是毫无根据的猜想。以这种方式编写规范的实际原因在技术上仍然未知。

> 元素高度由子元素的高度定义。如果一个元素有 padding-top: 10% （相对于父级高度），这将影响父级的高度。由于子项的高度取决于父项的高度，而父项的高度取决于子项的高度，所以要么高度不准确，要么无限循环。当然，这只影响偏移父===父的情况，但仍然如此。这是一个很难解决的奇怪案例。

更新：最后几句话可能并不完全准确。叶元素（没有子元素的子元素）的高度会影响其上方所有元素的高度，因此这会影响许多不同的情况。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-08-18T02:40:50.953

要使“n%”边距（和填充）*与*margin-top/margin-right/margin-bottom/margin-left 相同，所有四个必须相对于同一个基数。如果 top/bottom 使用的 base 与 left/right' 不同，那么“n%”边距（和填充）在所有四个边上的含义都不相同。

（另请注意，相对于*宽度*的上/下边距会启用一个奇怪的 CSS hack，它允许您指定一个具有不变纵横比的框……即使该框被重新缩放。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-26T03:19:58.910

[在玩了这个JSFiddle](http://jsfiddle.net/8rgvnfte/4/)（在 Chrome 46.0.2490.86 上）并参考[这篇文章](http://www.zhihu.com/question/20983035)（用中文写的）之后，我投票给 @ChuckKollars 的答案。

* * *

*反对无限计算*猜想的一个主要原因是：使用`width`同样面临*无限计算*问题。

看看这个[JSFiddle](http://jsfiddle.net/8rgvnfte/4/)，`parent`显示的是`inline-block`，它有资格在其上定义边距/填充。具有`child`边际价值`20%`。如果我们遵循*无限计算*猜想：

1.  的宽度`child`取决于`parent`
2.  的宽度`parent`取决于`child`

但结果，Chrome 在某处停止了计算，结果是：

[![在此处输入图像描述](../Images/be967931514ce4775b08b6fa5404c47d.png)](https://i.stack.imgur.com/TEyhJ.png)

如果您尝试在 JSFiddle 上水平展开“结果”面板，您会发现它们的宽度不会改变。请注意，中的内容`child`被包装成**两行**（而不是一行），为什么？我猜 Chrome 只是在某个地方硬编码它。如果你编辑`child`内容使其更多（[JSFiddle](http://jsfiddle.net/8rgvnfte/5/)），你会发现只要横向有多余的空间，Chrome 就会将内容保留两行。

所以我们可以看到：**有一些方法可以防止无限计算**。

* * *

我同意这样的猜想：这种设计只是为了保持四个边距/填充值基于相同的度量。

[这篇文章](http://www.zhihu.com/question/20983035)（用中文写的）还提出另一个原因是：这是因为阅读/排版的方向。我们从上到下阅读，宽度固定，高度无限（实际上）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-05T17:16:56.817

我意识到 OP 在询问**为什么**CSS 规范将顶​​部/底部边距百分比定义为宽度的百分比（而不是假设的高度），但我认为发布潜在的解决方案也可能有用。

大多数现代浏览器现在都支持 vw 和 vh ，这使您可以根据视口宽度和视口高度指定边距数。

如果没有滚动条，100vw/100vh 分别等于 100% 宽度/100% 高度；如果有滚动条，则视口数字不考虑这一点（而 % 数字可以）。值得庆幸的是，几乎所有浏览器都使用 17px 大小的滚动条（[请参阅此处](http://www.textfixer.com/tutorials/browser-scrollbar-width.php)），因此您可以使用 css calc 函数来解决这个问题。如果您不知道是否会出现滚动条，那么此解决方案将不起作用。

例如：假设没有水平滚动条，50% 高度的上边距可以定义为“margin-top: 50vh;”。使用水平滚动条，这可以定义为“margin-top: calc(0.5 * (100vh - 17px));” （请记住，calc 中的减号和加号运算符需要两边都有空格！）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-24T12:19:58.043

我知道这个问题有点老了，但我想为 CSS3 刷新它。虽然 CSS2.1 规范确实说百分比填充和边距是相对于包含块的宽度定义的，但情况并非**总是**如此。这取决于写作模式。这直接来自[CSS3 规范](https://www.w3.org/TR/css-writing-modes-3/#dimension-mapping)：

> 作为推论，margin 和 padding 属性的百分比，在 CSS2.1 中总是根据包含块的宽度计算，在 CSS3 中是根据包含块的内联大小计算的。

我在我[的 CSS 纵横比教程中](https://www.aleksandrhovhannisyan.com/blog/dev/css-aspect-ratio/)对此进行了介绍。

具体来说，有一节是关于[水平与垂直书写模式中的百分比填充](https://www.aleksandrhovhannisyan.com/blog/dev/css-aspect-ratio/#percentage-padding-in-horizontal-vs-vertical-writing-modes)。默认情况下，元素具有水平书写模式，其中文本从左到右水平流动（在“内联”方向）。但是，使用`writing-mode`CSS 属性，您实际上可以将模式设置为垂直（文本从右到左或从左到右流动）。以下是水平与垂直书写模式的一些图表：

![一种水平书写模式，文本从上到下垂直流动。 一个箭头从左到右指向文档顶部，并标记为内联方向。 另一个箭头从上到下，标记为块方向。](../Images/7a7e5e6d2dc6f2daf1e5344879826c29.png)

![一种垂直书写模式，文字水平流动。 水平轴被标记为块方向，而垂直轴现在被标记为内联方向。 文本横向呈现。](../Images/2e698e713184787d5ad51b56e49c241a.png)

这些取自[MDN 文档 on writing patterns](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flow_Layout/Block_and_Inline_Layout_in_Normal_Flow#Elements_participating_in_a_block_formatting_context)。

在垂直书写模式下，百分比填充将相对于包含块的高度，而不是宽度。

这是证据：

```
.document {
  writing-mode: vertical-rl;
  width: 100%;
  height: 100vh;
}

.parent {
   width: 100%;
   height: 200px;
   background-color: black;
   color: white;
}

.child {
  padding: 10%;
  background-color: white;
  color: black;
  border: solid 1px;
}
```

```
<div class="document">
  <div class="parent">
    <div class="child">
      Child
    </div>
  </div>
</div>
```

孩子获得 20 像素的填充，这是其包含块高度 (200 像素) 的 10%。

至于问题中的原因，这里的其他帖子对此进行了很好的介绍。

# javascript - 如何创建 JSF 过滤器/url 模式来保护 javascript

> ID：11003912
> 
> 赞同：4
> 
> 时间：2012-06-12T19:58:06.947
> 
> 标签：javascript, jsf, resources, servlet-filters, url-mapping

我编写了一个 Java Web 过滤器来处理我的 JSF 应用程序的安全性。我有这样的过滤器映射：

```
<filter-mapping>
    <filter-name>authFilter</filter-name>
    <url-pattern>/secure/*</url-pattern>
    <url-pattern>/login.jsf</url-pattern>
    <url-pattern>/*.js.jsf</url-pattern>    <--- invalid pattern
</filter-mapping> 
```

现在我想创建一个 url 模式来过滤所有 javascript 文件。我正在使用 Primefaces，因此 .js 文件在 URL 中被检索，如下所示：

```
http://localhost:8080/MyProject/javax.faces.resource/MyJavascriptFile.js.jsf?ln=MyLibrary 
```

我不能过滤整个`javax.faces.resouces`，因为它也包含 CSS 文件。有没有办法创建一个只匹配 javascripts 的 URL 模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:00:53.300

```
<url-pattern>/*.js.jsf</url-pattern>    <--- invalid pattern 
```

这确实是一个无效的 URL 模式。通配符`*`只能位于 URL 模式的开头或结尾。在您的特定情况下，您根本不需要`/`前缀。

```
<url-pattern>*.js.jsf</url-pattern>    <--- valid pattern 
```

请注意，此问题与 JSF**无关。**Servlet 过滤器是基本 Servlet API 的一部分。

### 也可以看看：

*   [映射 servlet 以服务我的请求](https://stackoverflow.com/questions/5276297/mapping-servlet-to-serve-my-requests/5276439#5276439)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T07:49:05.553

* 通配符功能在 JSF 中受到限制，因为只允许使用一个 *，并且它必须**位于**“form-view-id”字符串的末尾。例如，（任何 xml）它可以工作。

```
<from-view-id>/customer/*</from-view-id> 
```

它永远不会匹配......</p>

```
<from-view-id>/cus*mer/</from-view-id>
<from-view-id>/c*sto*er/*</from-view-id>
<from-view-id>*/customer</from-view-id> 
```

[看看这个页面](http://www.mkyong.com/jsf2/how-to-add-a-global-navigation-rule-in-jsf/)

# javascript - AngularJS：如何从控制器功能切换视图？

> ID：11003916
> 
> 赞同：237
> 
> 时间：2012-06-12T19:58:31.720
> 
> 标签：javascript, angularjs, ngroute

我正在尝试使用 AngularJS 的*ng-click*功能来切换视图。我将如何使用下面的代码执行此操作？

索引.html

```
 <div ng-controller="Cntrl">
        <div ng-click="someFunction()">
            click me
        <div>
    <div> 
```

控制器.js

```
 function Cntrl ($scope) {
        $scope.someFunction = function(){
            //code to change view?
        }
    } 
```

* * *

## 回答 #1

> 赞同：315
> 
> 时间：2012-06-12T21:58:09.960

为了在不同视图之间切换，您可以直接更改 index.html 文件中的 window.location（使用 $location 服务！）

```
<div ng-controller="Cntrl">
        <div ng-click="changeView('edit')">
            edit
        </div>
        <div ng-click="changeView('preview')">
            preview
        </div>
</div> 
```

控制器.js

```
function Cntrl ($scope,$location) {
        $scope.changeView = function(view){
            $location.path(view); // path not hash
        }
    } 
```

并配置路由器以根据位置切换到不同的部分（如[https://github.com/angular/angular-seed/blob/master/app/app.js](https://github.com/angular/angular-seed/blob/master/app/app.js)所示）。这将具有历史记录以及使用 ng-view 的好处。

或者，您将 ng-include 与不同的部分一起使用，然后使用 ng-switch，如此处所示（[https://github.com/ganarajpr/Angular-UI-Components/blob/master/index.html](https://github.com/ganarajpr/Angular-UI-Components/blob/master/index.html)）

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-08-15T20:05:46.440

提供的答案是绝对正确的，但我想为任何可能想要更动态地做的未来访问者扩展 -

在视图中——

```
<div ng-repeat="person in persons">
    <div ng-click="changeView(person)">
        Go to edit
    <div>
<div> 
```

在控制器中 -

```
$scope.changeView = function(person){
    var earl = '/editperson/' + person.id;
    $location.path(earl);
} 
```

与已接受的答案相同的基本概念，只是添加了一些动态内容以进行改进。如果接受的答案要添加，我将删除我的答案。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-01-18T07:54:00.107

我有一个工作示例。

这是我的文档的外观：

```
<html>
<head>
    <link rel="stylesheet" href="css/main.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular-resource.min.js"></script>
    <script src="js/app.js"></script>
    <script src="controllers/ctrls.js"></script>
</head>
<body ng-app="app">
    <div id="contnr">
        <ng-view></ng-view>
    </div>
</body>
</html> 
```

这是我的部分的样子：

```
<div id="welcome" ng-controller="Index">
    <b>Welcome! Please Login!</b>
    <form ng-submit="auth()">
        <input class="input login username" type="text" placeholder="username" /><br>
        <input class="input login password" type="password" placeholder="password" /><br>
        <input class="input login submit" type="submit" placeholder="login!" />
    </form>
</div> 
```

这是我的 Ctrl 的样子：

```
app.controller('Index', function($scope, $routeParams, $location){
    $scope.auth = function(){
        $location.url('/map');
    };
}); 
```

应用程序是我的模块：

```
var app = angular.module('app', ['ngResource']).config(function($routeProvider)... 
```

希望这有帮助！

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-05-02T15:08:17.383

用于此问题的所有先前答案的方法都建议更改不必要的 url，我认为读者应该知道替代解决方案。我使用 ui-router 和 $stateProvider 将状态值与指向视图的 html 文件的 templateUrl 相关联。然后只需将 $state 注入您的控制器并调用 $state.go('state-value') 来更新您的视图。

[angular-route 和 angular-ui-router 有什么区别？](https://stackoverflow.com/questions/21023763/difference-between-angular-route-and-angular-ui-router)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-05-12T04:27:05.777

有两种方法：

如果您使用的是 ui-router 或`$stateProvider`，请执行以下操作：

```
$state.go('stateName'); //remember to add $state service in the controller 
```

如果您使用 angular-router 或`$routeProvider`，请执行以下操作：

```
$location.path('routeName'); //similarily include $location service in your controller 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-04-11T19:03:10.410

在没有对默认路由 (#/ViewName) 环境进行全面改造的情况下，我能够对 Cody 的提示进行轻微修改并使其运行良好。

控制器

```
.controller('GeneralCtrl', ['$route', '$routeParams', '$location',
        function($route, $routeParams, $location) {
            ...
            this.goToView = function(viewName){
                $location.url('/' + viewName);
            }
        }]
    ); 
```

风景

```
...
<li ng-click="general.goToView('Home')">HOME</li>
... 
```

让我想到这个解决方案的原因是，当我尝试将 Kendo Mobile UI 小部件集成到 Angular 环境中时，我失去了控制器的上下文，并且常规锚标记的行为也被劫持了。我从 Kendo 小部件中重新建立了我的上下文，并且需要使用一种方法来导航……这很有效。

感谢之前的帖子！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-21T09:43:16.537

```
Firstly you have to create state in app.js as below

.state('login', {
      url: '/',
      templateUrl: 'views/login.html',
      controller: 'LoginCtrl'
    })

and use below code in controller

 $location.path('login'); 
```

希望对你有帮助

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-01-12T20:47:20.557

这个小功能对我很有帮助：

```
 //goto view:
    //useage -  $scope.gotoView("your/path/here", boolean_open_in_new_window)
    $scope.gotoView = function (st_view, is_newWindow)
    {

        console.log('going to view: ' + '#/' + st_view, $window.location);
        if (is_newWindow)
        {
            $window.open($window.location.origin + $window.location.pathname + '' + '#/' + st_view, '_blank');
        }
        else
        {
            $window.location.hash = '#/' + st_view;
        }

    }; 
```

您不需要完整路径，只需要您切换到的视图

# sql - Oracle 将秒转换为小时:分钟:秒

> ID：11003918
> 
> 赞同：18
> 
> 时间：2012-06-12T19:58:38.350
> 
> 标签：sql, oracle, plsql, plsqldeveloper

我需要从给定的总秒数值中以 Hours:Minutes:Seconds 格式显示用户可用时间。感谢您是否知道 ORACLE 函数可以执行相同的操作。我正在使用甲骨文。

感谢您的时间。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-12T21:04:41.843

如果您只是想将给定的秒数转换为 HH:MI:SS 格式，应该这样做

```
SELECT 
    TO_CHAR(TRUNC(x/3600),'FM9900') || ':' ||
    TO_CHAR(TRUNC(MOD(x,3600)/60),'FM00') || ':' ||
    TO_CHAR(MOD(x,60),'FM00')
FROM DUAL 
```

其中`x`是秒数。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-23T12:43:52.227

试试这个。非常简单易用

```
select to_char(to_date(10000,'sssss'),'hh24:mi:ss') from dual; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-18T19:48:44.210

以下代码不太复杂，并且给出了相同的结果。请注意，“X”是要转换为小时的秒数。

在 Oracle 中使用：

```
SELECT TO_CHAR (TRUNC (SYSDATE) + NUMTODSINTERVAL (X, 'second'),
                'hh24:mi:ss'
               ) hr
  FROM DUAL; 
```

在 SqlServer 中使用：

```
SELECT CONVERT(varchar, DATEADD(s, X, 0), 108); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T20:13:19.737

如果您有一个包含 fe 1 分钟（以秒为单位）的变量，您可以将其添加到 systimestamp，然后使用 to_char 从中选择不同的时间部分。

```
select to_char(systimestamp+60/(24*60*60), 'yyyy.mm.dd HH24:mi:ss') from dual 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-06T10:09:05.297

对于vogash对答案的评论，我知道你想要一个计时器之类的东西，那是因为你可以有超过24小时。为此，您可以执行以下操作：

```
select to_char(trunc(xxx/3600)) || to_char(to_date(mod(xxx, 86400),'sssss'),':mi:ss') as time
from dual; 
```

`xxx`是你的秒数。

第一部分累积小时，第二部分计算剩余的分钟和秒。例如，拥有`150023 seconds`它会给你`41:40:23`.

但是如果你总是想要 hh24:mi:ss 即使你有超过`86000 seconds`（1天）你可以这样做：

```
select to_char(to_date(mod(xxx, 86400),'sssss'),'hh24:mi:ss') as time 
from dual; 
```

`xxx`是你的秒数。

例如，拥有`86402 seconds`它会将时间重置为`00:00:02`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-12T20:19:44.707

不幸的是，没有……但是，如果要少于 24 小时，则有一个简单的技巧。

Oracle 假定添加到日期的数字以天为单位。将秒数转换为天数。添加当天，然后使用该`to_date`功能仅获取您感兴趣的部分。假设您有`x`几秒钟：

```
select to_char(sysdate + (x / ( 60 * 60 * 24 ) ), 'HH24:MI:SS')
  from dual 
```

如果超过 24 小时，这将不起作用，但您可以再次删除当前数据并获取天、小时、分钟和秒的差异。

如果您想要类似：`51:10:05`，即 51 小时 10 分钟 5 秒，那么您将不得不使用[`trunc`](http://www.techonthenet.com/oracle/functions/trunc_nbr.php).

再次假设你有`x`几秒钟......

*   小时数是`trunc(x / 60 / 60)`
*   分钟数是`trunc((x - ( trunc(x / 60 / 60) * 60 * 60 )) / 60)`
*   因此秒数是`x - hours * 60 * 60 - minutes * 60`

留给您：

```
with hrs as (
  select x, trunc(x / 60 / 60) as h
    from dual
         )
 , mins as (
  select x, h, trunc((x - h * 60 * 60) / 60) as m
    from hrs
         )
select h, m, x - (h * 60 * 60) - (m * 60)
  from mins 
```

我已经设置了一个[SQL Fiddle](http://sqlfiddle.com/#!4/9e0ab/1)来演示。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-13T11:52:57.897

以下是另一种方式 (tm) - 仍然涉及一些计算，但提供了使用 EXTRACT 将各个字段拉出 INTERVAL 的示例：

```
DECLARE 
  SUBTYPE BIG_INTERVAL IS INTERVAL DAY(9) TO SECOND;

  i        BIG_INTERVAL;
  nSeconds NUMBER := 86400000;

  FUNCTION INTERVAL_TO_HMS_STRING(inv IN BIG_INTERVAL)
    RETURN VARCHAR2
  IS
    nHours    NUMBER;
    nMinutes  NUMBER;
    nSeconds  NUMBER;
    strHour_format  VARCHAR2(10) := '09';
    workInv   INTERVAL DAY(9) TO SECOND(9);
  BEGIN
    nHours := EXTRACT(HOUR FROM inv) + (EXTRACT(DAY FROM inv) * 24);
    strHour_format := TRIM(RPAD(' ', LENGTH(TRIM(TO_CHAR(ABS(nHours)))), '0') || '9');

    nMinutes := ABS(EXTRACT(MINUTE FROM inv));
    nSeconds := ABS(EXTRACT(SECOND FROM inv));

    RETURN TRIM(TO_CHAR(nHours, strHour_format)) || ':' ||
           TRIM(TO_CHAR(nMInutes, '09')) || ':' ||
           TRIM(TO_CHAR(nSeconds, '09'));
  END INTERVAL_TO_HMS_STRING;

BEGIN
  i := NUMTODSINTERVAL(nSeconds, 'SECOND');

  DBMS_OUTPUT.PUT_LINE('i (fields) = ' || INTERVAL_TO_HMS_STRING(i));
END; 
```

提取字段等的代码仍然必须包含将 DAY 字段转换为等效小时数的计算，这不是最漂亮的，但整齐地包裹在一个使用起来还不错的过程中。

分享和享受。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-09-18T16:39:14.090

假设您的时间在下面称为 st.etime 并以秒为单位存储，这就是我使用的。这会处理秒数大于 86399 秒（即晚上 11:59:59）的时间

如果 st.etime > 86399 然后 to_char(to_date(st.etime - 86400,'sssss'),'HH24:MI:SS') else to_char(to_date(st.etime,'sssss'),'HH24:MI: SS') 结束 readable_time

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-25T13:10:58.327

我的版本。以 DDd HHh MMm SSs 格式显示 Oracle DB 正常运行时间

```
select to_char(trunc((((86400*x)/60)/60)/24)) || 'd ' ||
   to_char(trunc(((86400*x)/60)/60)-24*(trunc((((86400*x)/60)/60)/24)), 'FM00') || 'h ' ||
   to_char(trunc((86400*x)/60)-60*(trunc(((86400*x)/60)/60)), 'FM00') || 'm ' ||
   to_char(trunc(86400*x)-60*(trunc((86400*x)/60)), 'FM00') || 's' "UPTIME"
 from (select (sysdate - t.startup_time) x from V$INSTANCE t); 
```

[来自Oracle 9/10 的日期/时间算术的](http://www.akadia.com/services/ora_date_time.html)想法

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-29T12:35:42.110

将分钟转换为小时：分钟：秒格式

```
SELECT 
   TO_CHAR(TRUNC((MINUTES * 60) / 3600), 'FM9900') || ':' ||
   TO_CHAR(TRUNC(MOD((MINUTES * 60), 3600) / 60), 'FM00') || ':' ||
   TO_CHAR(MOD((MINUTES * 60), 60), 'FM00') AS MIN_TO_HOUR FROM DUAL 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-16T16:01:26.550

对于超过 24 小时，您可以在以下查询中包含天数。返回的格式是`days:hh24:mi:ss`

询问：
`select trunc(trunc(sysdate) + numtodsinterval(9999999, 'second')) - trunc(sysdate) || ':' || to_char(trunc(sysdate) + numtodsinterval(9999999, 'second'), 'hh24:mi:ss') from dual;`

输出：
`115:17:46:39`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-08-04T09:33:08.810

```
create or replace procedure mili(num in number)
as
yr number;
yrsms number;
mon number;
monsms number;
wk number;
wksms number;
dy number;
dysms number;
hr number;
hrsms number;
mn number;
mnsms number;
sec number;
begin 
yr := FLOOR(num/31556952000);
yrsms := mod(num, 31556952000);
mon := FLOOR(yrsms/2629746000);
monsms := mod(num,2629746000);
wk := FLOOR(monsms/(604800000));
wksms := mod(num,604800000); 
dy := floor(wksms/ (24*60*60*1000));
dysms :=mod(num,24*60*60*1000);
hr := floor((dysms)/(60*60*1000));
hrsms := mod(num,60*60*1000);
mn := floor((hrsms)/(60*1000));
mnsms := mod(num,60*1000);
sec := floor((mnsms)/(1000));
dbms_output.put_line(' Year:'||yr||' Month:'||mon||' Week:'||wk||' Day:'||dy||' Hour:'||hr||' Min:'||mn||' Sec: '||sec);
end;
/

begin 
mili(12345678904234);
end; 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-11-14T08:10:26.437

```
create or replace function `seconds_hh_mi_ss` (seconds in number)     
return varchar2
is
hours_var number;    
minutes_var number;    
seconds_var number;    
remeinder_var number;    
output_var varchar2(32);    
begin    
select seconds - mod(seconds,3600) into hours_var from dual;    
select seconds - hours_var into remeinder_var from dual;    
select (remeinder_var - mod(remeinder_var,60)) into minutes_var from dual;    
select seconds - (hours_var+minutes_var) into seconds_var from dual;    
output_var := hours_var/3600||':'||minutes_var/60||':'||seconds_var;    
return(output_var);    
end;
/ 
```

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2012-06-12T20:06:50.780

你应该看看[这个网站](http://www.akadia.com/services/ora_date_time.html)。TO_TIMESTAMP 部分可能对您有用！

句法：

`TO_TIMESTAMP ( string , [ format_mask ] [ 'nlsparam' ] )`

# c++ - 选择性内联函数（用于调试目的）？

> ID：11003932
> 
> 赞同：4
> 
> 时间：2012-06-12T19:59:06.040
> 
> 标签：c++, inline

我想要的是一个构建配置，其中函数*没有*内联，*除了*一些选定的函数（可能内联也可能不内联，这取决于编译器）。

更好的是某种“内联级别”，我可以在其中为每个函数指定这样的级别，加上构建时的最低级别，并且只允许内联高于最低级别的函数。我知道这没有标准的解决方案，但编译器特定的黑客同样受欢迎。

我希望能够在调试器中单步执行我的大多数非内联函数，但是应该内联其中的一些函数，部分是出于性能原因，部分是为了避免疯狂的深度调用堆栈。该代码涉及一些非常讨厌的模板元编程，但这部分已经完成，所以我想专注于其余部分。因此，最好将属于模板元程序的函数内联，而不是其他内联函数。

有没有办法实现这样的目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T20:10:00.683

取决于您的编译器，是的。对于 g++，以下将起作用：

```
void foo() __attribute__ ((noinline));
void foo() __attribute__ ((always_inline)); 
```

在 MSVC++ 上：

```
__declspec(noinline) void foo();
__forceinline void foo(); 
```

请注意，g++**要求**属性仅应用于原型，而不是定义。因此，如果您的函数是仅定义的（没有单独的原型），那么您必须创建一个原型才能应用该属性。MSVC 没有这个要求。

`__forceinline`具体有[一些例外](http://msdn.microsoft.com/en-us/library/z8y1yy88%28v=vs.80%29.aspx)。请务必仔细阅读它们，以便了解它是否会对您的特定情况产生任何影响。g++ 没有记录该`always_inline`属性的任何异常，但有些事情是显而易见的（例如，内联对虚拟方法的调用仅在静态调用该方法时才有效）。

您可以使用宏对其进行概括：

```
#ifdef _MSC_VER
 #define NOINLINE(x) __declspec(noinline) x
 #define INLINE(X) __forceinline x
#else
 #ifdef __GNUC__
  #define NOINLINE(x) x __attribute__ ((noinline))
  #define INLINE(x) x __attribute__ ((always_inline))
 #else
  #error "I don't know how to force inline/noinline on your compiler."
 #endif
#endif

INLINE(void foo());
NOINLINE(void foo()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:11:50.903

如果有一组你想要的函数`inline`，你可以使用`#define`一些宏（假设是 GCC 或 Clang）`__attribute__(__always_inline__)`，这将

1.  始终内联函数
2.  如果由于技术原因无法实现，则给出编译错误。

# jquery - jQuery，将变量值的高度动画设置为div上的自动

> ID：11003935
> 
> 赞同：1
> 
> 时间：2012-06-12T19:59:21.200
> 
> 标签：jquery, html, jquery-animate, toggle

我想通过切换动画将 div 的高度从变量值设置为自动。我知道我没有正确调用我的变量。只是想看看如何做到这一点。

```
var scheight = $('.searchcontainer').height();
$('.searchcontainer').toggle(
    function () {
        $(".searchcontainer").animate({ height: scheight + "px" }, 500);
    },
    function () {
        $(".searchcontainer").animate({ height: auto}, 500);
    }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:20:01.800

如果您在“searchcontainer”元素中为您的内容放置另一个容器，则两种方式的动画都会更容易。这种方法可以让您检测内容的高度，并且拥有该像素值（而不是依赖于“自动”）为您提供了一个您现在可以设置动画的目标：

[http://jsfiddle.net/XdPry/3/](http://jsfiddle.net/XdPry/3/)

**html:**

```
<div style="height:200px;border:1px solid #000000">
    <div class="searchcontainer" style="background-color:#aa22aa">
        <div>content</div>
    </div>
</div>​ 
```

**jQuery：**

```
$('.searchcontainer:first').toggle(
    function () {
        $(this).animate({ height: parseInt($(this).parent('div').height()) }, 500);
    },
    function () {
        $(this).animate({ height: parseInt($(this).children('div:first').height()) }, 500);
    }
);​ 
```

# java - 分支重新集成期间的子剪辑连接错误

> ID：11003937
> 
> 赞同：1
> 
> 时间：2012-06-12T19:59:22.780
> 
> 标签：java, svn, branch, subclipse, reintegration

我的情况是这样的：我在 eclipse 中处理一个 java 项目并使用 Subclipse 进行源代码控制。最近，完成了一个分支的工作并尝试重新整合。然而，我的（糟糕的移动）宽带连接决定通过合并到主干来干扰大约 75%。现在，每当我重试相同的合并时，我都会收到错误“文件系统没有项目 svn：'/forge/!svn/bc/15895/trunk/branches/AbilityWork' path not found”。

由于实际的重新集成尚未完成，是否有某种方法可以解决此问题并有机会完成重新集成，或者可能是某种迂回的方式来“拯救”分支中的更改，因为它们非常参与。

提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:56:19.167

如果您说“合并”，则意味着对您的工作副本进行操作。因此，您可以[**恢复**](http://svnbook.red-bean.com/en/1.1/re25.html)您的工作副本（所有更改都已撤消）并重新开始您的合并。

您需要提交合并以“最终确定”您的 subversion 存储库中的结果。由于 Subversion 是基于事务的，因此不可能提交一半的合并。然后什么都不会提交（事务回滚）。

# ruby - 处理 Nokogiri 代理上的失败连接

> ID：11003939
> 
> 赞同：1
> 
> 时间：2012-06-12T19:59:41.673
> 
> 标签：ruby, screen-scraping, nokogiri

我有以下代码行，用于抓取网站的 html。如您所见，我将代理传递给此

```
doc = Nokogiri::HTML(open(Scrape.scrape_url + page.to_s, :proxy => 'http://177.19.134.66:8080')) 
```

有时这些代理会关闭，然后我会收到错误消息

> 连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。- 连接（2）

我对 ruby​​ 很陌生，但我想做的是创建一个代理 IP 地址列表。然后让它尝试使用第一个进行刮擦。如果它失败了，那么尝试下一个，直到没有剩下的检查......

我将如何创建一个列表然后处理错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T23:25:33.853

最简单的是：

```
['http://localhost:8080','http://localhost:8888','http://localhost:8000'].each do |proxy|
  break if @doc = Nokogiri::HTML(open(Scrape.scrape_url + page.to_s, :proxy => proxy)) rescue nil
end 
```

请注意“@doc”，因为“doc”将在循环结束时超出范围。

# rest - Spring 3 控制器和相对路径

> ID：11003940
> 
> 赞同：1
> 
> 时间：2012-06-12T19:59:43.163
> 
> 标签：rest, spring-mvc, controller

试图掌握 Spring MVC 控制器。但是相对路径有问题

我有一个页面： `http://localhost:8080/jeeniweb/articles` 在该页面上有一个菜单选项：

```
<li><a href="articles/writing_great_code/structure_and_dependencies/">Structure and Dependencies</a></li>` 
```

这在浏览器中解析为： `http://localhost:8080/jeeniweb/articles/writing_great_code/structure_and_dependencies/`

当用户单击此链接时，我会使用控制器拦截此请求：

```
@RequestMapping(value = "/articles/{article}/{chapter}")
public String articles(@PathVariable String article, @PathVariable String chapter) 
{
        System.out.println("Articles Page Request");
        System.out.println("article: " + article);
        System.out.println("chapter: " + chapter);

    return "articles/index";
} 
```

此方法捕获请求，然后方法`println`打印出正确的内容。但是在通话后我想： `http://localhost:8080/jeeniweb/articles` 但实际上浏览器会： `http://localhost:8080/mysite/articles/writing_great_code/structure_and_dependencies/`

当我`articles/index`从方法返回时怎么会这样？

我的 Servlet 配置是：

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
<property name="prefix" value="/WEB-INF/views/"/>
<property name="suffix" value=".jsp"/>
</bean> 
```

据我了解 Spring 这意味着处理上述代码后的结果返回应该`/WEB-INF/views/articles/index.jsp`是我想要的。那就是 index.jsp 页面所在的位置。

任何帮助深表感谢。

谢谢亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:31:14.487

控制器只知道它拦截了正确的 url，为了解析文章/索引 url，您需要让它返回到该 url 的重定向，例如：

```
return "redirect:articles/index" 
```

# android - android onCreateOptionsMenu 恢复状态时调用了两次

> ID：11003941
> 
> 赞同：7
> 
> 时间：2012-06-12T19:59:43.790
> 
> 标签：android, android-layout, android-fragments

这是我创建的一个简单的 android 应用程序来演示我的问题：

```
public class OptionMenuTest extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d("test", "create activity");
        setContentView(R.layout.options_layout);
        if(getFragmentManager().findFragmentByTag("frag") == null) {
            getFragmentManager().beginTransaction().add(R.id.option_fragment_container, new OptionMenuFragment(), "frag").commit(); 
        }

    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        Log.d("test", "saving Activity state");
        super.onSaveInstanceState(outState);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        Log.d("test", "create Activity options menu");
        menu.add("activity");
        return true;
    }
} 
```

分段：

```
public class OptionMenuFragment extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d("test", "create fragment");
        setHasOptionsMenu(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        TextView tv = new TextView(getActivity());
        tv.setText("Hello world");
        Log.d("test", "create fragment view");
        return tv;
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        menu.add("fragment");
        Log.d("test", "create fragment options menu");
    }
} 
```

布局只是一个 LinearLayout 将片段转储到：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/option_fragment_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >
</LinearLayout> 
```

很简单吧？当我运行它时，我得到了预期的以下输出：

```
06-12 15:42:51.415: D/test(957): create activity
06-12 15:42:51.446: D/test(957): create fragment
06-12 15:42:51.446: D/test(957): create fragment view
06-12 15:42:51.446: D/test(957): create Activity options menu
06-12 15:42:51.446: D/test(957): create fragment options menu 
```

现在，当我旋转手机时，我会遇到一些奇怪的行为：

```
06-12 15:43:11.251: D/test(957): saving Activity state
06-12 15:43:11.290: D/test(957): create fragment
06-12 15:43:11.290: D/test(957): create activity
06-12 15:43:11.306: D/test(957): create fragment view
06-12 15:43:11.306: D/test(957): create Activity options menu
06-12 15:43:11.306: D/test(957): create fragment options menu
06-12 15:43:11.306: D/test(957): create Activity options menu
06-12 15:43:11.306: D/test(957): create fragment options menu 
```

为什么活动 onCreateOptionMenu 和片段 onCreateOptionsMenu 被调用了两次？如果我从片段中删除选项菜单，我会按预期对活动 onCreateOptionsMenu 进行 1 次调用：

```
06-12 15:50:03.610: D/test(1076): create fragment
06-12 15:50:03.610: D/test(1076): create fragment view
06-12 15:50:03.813: D/test(1076): create Activity options menu
06-12 15:50:08.392: D/test(1076): saving Activity state // <-- rotate happens here
06-12 15:50:08.446: D/test(1076): create fragment
06-12 15:50:08.446: D/test(1076): create activity
06-12 15:50:08.462: D/test(1076): create fragment view
06-12 15:50:08.470: D/test(1076): create Activity options menu 
```

我不明白这一点，似乎没有其他人遇到过这个问题。真正的问题是我的 SearchView 无法在配置更改（手机旋转）时恢复它的状态，因为 onCreateOptionMenu 被调用了两次。第一次它似乎有它的状态，但第二次它被清除并重置。我无法弄清楚我做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T23:29:58.097

我想我找到了这个问题的答案。

看看这个：

[https://stackoverflow.com/a/7225296/48468](https://stackoverflow.com/a/7225296/48468)

该问题似乎与Android在销毁活动时（旋转设备时）不会销毁片段有关。

基本上我补充说：

```
setRetainInstance(true); 
```

到我的片段构造函数，问题就解决了。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-10T13:38:15.740

@Gerardo Contijoch 的回答具有误导性，除了一个事实：

在您的示例中，两者都在旋转时被破坏`Activity`并`Fragment`再次创建。这就是为什么`onCreateOptionsMenu()`被调用两次。这是正确和预期的行为。

通过`setRetainInstance(true)`您告诉Android不要破坏片段。这在没有 Activity 上下文的无 UI 片段的情况下可能很有用（*对于 AsyncTasks 协调和其他一些类似服务的东西很有用*）。

在其他情况下，碎片可能会导致内存泄漏，这是您要避免的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-02T13:51:51.833

我刚刚在充气和工作之前清除了菜单

```
 @Override
 public void   onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
      menu.clear();
      inflater.inflate(R.menu.call_menu, menu);
      super.onCreateOptionsMenu(menu, inflater);

 } 
```

# google-maps - Google 地方信息自动填充 API 流程

> ID：11003944
> 
> 赞同：1
> 
> 时间：2012-06-12T19:59:54.633
> 
> 标签：google-maps, google-places-api

我想使用 Google Places Autocomplete API 为 Android 应用程序提供边打字边搜索。

自动完成 API 返回 ID 和引用，需要对结果进行迭代以获取每个地点的详细信息（例如名称和几何形状），这很慢并且会导致糟糕的用户体验。此外，每次按键都会完成许多 API 调用。

有没有更好的方法来使用 Google Places 提供这种搜索功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T22:26:14.787

在 API 的每次按键之后，您是否需要为每个可能的自动完成位置设置几何图形？显示这一点似乎通常不会是一个很好的用户体验，也不是 Autocomplete API 的设计目的。

从理论上讲，名称（描述）应该足以让用户决定他们感兴趣的项目，然后在用户实际选择某些内容后，您可以根据需要请求其他详细信息。

另一方面，如果您已经有一些关于地点名称的信息，您可以使用 Places API（不是自动完成）来获取匹配附近地点的更多详细信息： [https ://developers.google.com/maps/documentation/地点/#PlaceSearchResponses](https://developers.google.com/maps/documentation/places/#PlaceSearchResponses)

# java - 如何在不使用泛型的情况下限制 ArrayList 的元素

> ID：11003951
> 
> 赞同：2
> 
> 时间：2012-06-12T20:00:52.327
> 
> 标签：java, generics, arraylist

假设我有一`Employee`堂课。如何在不使用泛型的情况下实现`ArrayList`仅包含元素？`Employee`也就是说，没有`Arraylist<Employee>`，我如何限制`ArrayList`只添加`Employee`对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T20:02:35.627

您可以使用[`Collections.checkedList()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#checkedList%28java.util.List,%20java.lang.Class%29)- 但您为什么不想使用泛型？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-12T20:02:01.733

扩展 ArrayList 并自定义`add()`和`addAll()`方法来检查正在添加的对象是`instanceof` `Employee`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-12T20:02:09.747

您可以使用一个包含私有 ArrayList 字段的包装类，例如称为employeeList，有一个

```
public void add(Employee employee) {
   employeeList.add(employee);
} 
```

以及允许外部类以受控方式与 ArrayList 交互的任何其他必要方法。

我发现为此使用组合比继承要好得多。这样，如果您想从 ArrayList 更改为其他内容，例如 LinkedList，甚至是完全不同的内容，您会更轻松。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T20:02:31.243

子类化`ArrayList`该类并将其命名为`EmployeeArrayList`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T04:36:16.603

当你“限制”时，你到底想要什么？有两个可能的地方可以设置限制：在编译时或运行时。

泛型是纯粹的编译时事物。它可以帮助您编写正确的代码，但您仍然可以绕过它并将错误的类型放入数组中，并且它不会在运行时抱怨。

另一方面，类似`Collections.checkedList()`的是运行时限制。当出现错误类型的对象时，它会在运行时引发错误。但是，如果您没有泛型，它在编译时对您没有帮助。

所以这两件事是正交的，两者都不是另一个的替代品。你到底想要什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T20:37:56.757

如果您想避免泛型本身，例如为了与非常旧版本的 Java 兼容，那么扩展或包装 ArrayList 将无济于事 - 您可能希望找到或制作另一个具有相同功能的数组实现。

基本上，ArrayList 只是一个原始数组的包装器，它在必要时将其数据复制并粘贴到更大的数组中，因此从头开始编写并不是特别困难。

# java - 有没有一种简单的方法来替换 Java 中字符串中任意位置的字符（并获取新字符串）？

> ID：11003952
> 
> 赞同：0
> 
> 时间：2012-06-12T20:01:26.347
> 
> 标签：java, string

我知道没有简单的方法可以做到这一点。假设我有以下字符串-

```
"abcdefgh" 
```

我想通过用'x'替换第三个字符'c'来获得一个字符串。

很长的路要走——

```
s1 = substring before third character = "ab" in this case
s2 = new character = "x" in this case
s3 = substring after third character = "defgh" in this case
finalString = s1 + s2 + s3 
```

有没有更简单的方法？应该有一些功能，如

```
public String replace(int pos, char replacement) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T20:04:05.290

使用[`StringBuilder#replace()`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#replace%28int,%20int,%20java.lang.String%29).

```
StringBuilder sb = new StringBuilder("abcdefgh");
sb.replace(2, 3, "x");
String output = sb.toString(); 
```

[http://ideone.com/Tg5ut](http://ideone.com/Tg5ut)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T20:05:50.523

您可以将 转换`String`为 a`char[]`然后替换字符。然后将`char[]`背面转换为`String`.

```
String s = "asdf";
char[] arr = s.toCharArray();
arr[0] = 'b';
s = new String(arr); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T20:03:06.147

不，没有比连接这些片段更简单的方法了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T20:04:02.103

尝试使用 StringBuilder 而不是[StringBuilder Java 页面](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T20:09:06.077

由于每个 String 基本上都只是一个 char[] ，因此您可以抓住它并以这种方式操作各个字符。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-12T20:05:05.523

怎么样：

```
String crap = "crap";
String replaced = crap.replace(crap.charAt(index), newchar); 
```

但这将替换该字符的所有实例

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-12T20:07:36.630

尝试该`String.replace(Char oldChar, Char newChar)`方法或使用`StringBuilder`

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-06-12T20:04:50.623

```
String yourString = "abcdef"
String newString = yourString.replaceAll("c" , "x");
System.out.println("This is the replaced String: " + newString); 
```

* * *

这是替换的字符串：abxdef

# ruby - ruby 的 rand 方法是否应该接受 Range 对象？

> ID：11003953
> 
> 赞同：1
> 
> 时间：2012-06-12T20:01:28.813
> 
> 标签：ruby, random, jruby, range

我只`rand(1..5)`在 MRI ruby​​ 1.9.3 中看到过类似的工作（没有尝试过 1.9.2）。Jruby 不支持它，即使在 1.9 模式下 - 它会引发 TypeError。

甚至 ruby​​-doc 也没有提到支持 Ranges。官方的行为是什么？

更新

正如答案和评论指出的那样，只有 1.9.3 支持它。Jruby 只有 1.9.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T20:05:29.847

[文档](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-rand) *确实*说它受支持

> 如果 max 是 Range，则返回一个伪随机数，其中 range.member(number) == true。

它也在 1.9.3[更新日志中](http://svn.ruby-lang.org/repos/ruby/tags/v1_9_3_0/ChangeLog)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T20:08:09.357

[从文档](http://apidock.com/ruby/Kernel/rand)逐字复制粘贴

```
If max is Range, returns a pseudorandom number where range.member(number) == true.
Or else converts max to an integer using max1 = max.to_i.abs. 
```

所以，是的。ruby 1.9.3 支持它

# javascript - MongoDB GeoNear - ReferenceError：未定义消息

> ID：11003958
> 
> 赞同：1
> 
> 时间：2012-06-12T20:02:06.773
> 
> 标签：javascript, node.js, mongodb

使用以下代码引发此错误。它以前可以工作，但现在不行。

```
var params;

params = {
  geoNear: 'locations',
  near: [coords.longitude, coords.latitude],
  spherical: true,
  distanceMultiplier: 6378160.0
};

db.mongo.command(params, function(err, near) {
  if (err) {
    console.log(err);
  }
}); 
```

知道什么可能导致此错误吗？

# mysql - MySql 子查询从另一个表中提取数据

> ID：11003961
> 
> 赞同：1
> 
> 时间：2012-06-12T20:02:25.510
> 
> 标签：mysql

我目前正在使用支持 MySql 5.0 的 phpMyAdmin。

我有以下两个表：

```
Master Facebook Insights
------------------------

Client ID  Client Name  Date        Top Likes By Gender
---------  -----------  ------      --------------------
1          Client1      2012-01-01  
1          Client1      2012-02-01
2          Client2      2012-01-01
2          Client2      2012-02-01
...etc. (the dates are always the beginning of each month for however many months
& clients exist) 
```

* * *

```
Likes By Demographic
----------------

Date        Demographic1  Demographic2  Demographic3  Client
------      ------------  ------------  ------------  ------
0000-00-00  M.35-44       M.45-54       M.25-34       1
2012-01-01  53            44            28            1
2012-01-02  53            46            29            1
...etc.
0000-00-00  M.18-24       M.35-44       M.25-34       1
2012-02-01  374           221           194           1
2012-02-02  374           222           195           1
...etc.
0000-00-00  F.35-44       F.25-34       M.35-44       2
2012-01-01  194           182           83            2
2012-01-02  194           182           83            2
...etc.
0000-00-00  F.35-44       F.25-34       M.35-44       2
2012-02-01  196           180           83            2
2012-02-02  197           180           83            2
...etc. 
```

对于按人口统计表的喜欢：每个客户列出每个月的所有日期；当新的一个月开始时，有一组新的人口统计数据可能与上个月完全相同，也可能不完全相同。这是因为数据是从 CSV 导入的，该 CSV 将人口统计数据按最高“喜欢”的顺序排列，因此这通常会逐月变化。这也是个人人口统计数据不是列标题的原因（因为它们不一致）。

我的问题如下：我希望在第一个表的“按性别划分的热门点赞”列中列出每个客户每月的前 3 个人口统计数据，如下所示：

```
Client ID  Client Name  Date        Top Likes By Gender
---------  -----------  ------      --------------------
1          Client1      2012-01-01  M.35-44, M.45-54, M.25-34 
1          Client1      2012-02-01  M.18-24, M.35-44, M.25-34
2          Client2      2012-01-01  F.35-44, F.25-34, M.35-44
2          Client2      2012-02-01  F.35-44, F.25-34, M.35-44 
```

子查询的使用让我感到困惑。以下是我一直在尝试修复的（不正确的）代码。问题在于，这只是为第一个客户（M.35-44、M.45-54、M.25-34）提取前三个人口统计数据，并在所有客户和日期的整个列中重复它们。我在正确的轨道上，还是有更简单/更正确的方法来做到这一点？

```
UPDATE `Master Facebook Insights`
SET `Top Likes By Gender` =
(select * from
(SELECT DISTINCT CONCAT(`Demographic1`,', ',`Demographic2`,', ',`Demographic3`)
FROM `Likes By Demographic` t1
JOIN `Master Facebook Insights` t2
ON t1.`Client` = t2.`Client ID`
WHERE  t1.`Date` = '0000-00-00'
AND t2.`Date` = 

(
SELECT MIN(`Date`)
FROM `Likes By Demographic`
WHERE `Date` > '0000-00-00'
AND `Client` = t2.`Client ID`
GROUP BY `Date`
ORDER BY `Date` ASC
LIMIT 1
)

)inner1 limit 1) 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:35:45.930

只需使用原始的 Likes_By_Demographic 表，您就可以：

```
select
  client_id,
  date,
  concat(demo1,', ',demo2,', ',demo3) `top_likes`
from likes_by_demographic
group by client_id, date
order by client_id, date; 
```

...这将产生（伪数据）：

```
| CLIENT_ID |                            DATE |             TOP_LIKES |
-----------------------------------------------------------------------
|         1 |  January, 01 2012 00:00:00-0800 | M.35-44, M.25-34, 195 |
|         1 | February, 01 2012 00:00:00-0800 | M.25-34, M.35-44, 195 |
|         1 |    March, 01 2012 00:00:00-0800 |     M.25-34, 195, 169 |
|         2 |  January, 01 2012 00:00:00-0800 |     F.45-54, 210, 195 |
|         2 | February, 01 2012 00:00:00-0800 |      F.45-54, 210, 75 | 
```

# android - 通过 Eclipse 通过 android 手机运行应用程序时出错

> ID：11003966
> 
> 赞同：0
> 
> 时间：2012-06-12T20:02:44.073
> 
> 标签：android, eclipse, lg, optimus

出于某种原因，在我的手机（LG Optimus S，运行 Android 2.3.3）而不是模拟器（使用 eclipse）上运行应用程序（Android 2.3.3）进行测试时，我收到此错误：

```
[2012-06-12 15:54:59 - test] Failed to install test.apk on device 'A0000028CD875E!
[2012-06-12 15:54:59 - test] closed
[2012-06-12 15:54:59 - test] Failed to install test.apk on device 'A0000028CD875E': closed
[2012-06-12 15:54:59 - test] com.android.ddmlib.InstallException: closed
[2012-06-12 15:54:59 - test] Launch canceled! 
```

我在手机上启用了 USB 调试。我还应该做些什么来摆脱这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:20:18.343

确保您还允许在您的设备上安装非市场应用程序。eclipse在调试过程中生成的apk与发布的应用程序签名不同。还要确保您的计算机具有手机所需的所有驱动程序。

# r - 在 R 中生成 3 个总和为 1 的随机数

> ID：11003967
> 
> 赞同：13
> 
> 时间：2012-06-12T20:02:45.863
> 
> 标签：r, random

我希望创建 3 个（非负）总和为 1 的准随机数，并一遍又一遍地重复。

基本上，我试图在多次试验中将某些东西分成三个随机部分。

虽然我知道

```
a = runif(3,0,1) 
```

我在想我可以`1-a`在 next 中用作 max `runif`，但它看起来很乱。

但这些当然不等于一个。任何想法，哦，明智的stackoverflow-ers？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T20:42:26.487

这个问题涉及的问题比起初可能明显的要微妙。查看以下内容后，您可能需要仔细考虑使用这些数字表示的过程：

```
## My initial idea (and commenter Anders Gustafsson's):
## Sample 3 random numbers from [0,1], sum them, and normalize
jobFun <- function(n) {
    m <- matrix(runif(3*n,0,1), ncol=3)
    m<- sweep(m, 1, rowSums(m), FUN="/")
    m
}

## Andrie's solution. Sample 1 number from [0,1], then break upper 
## interval in two. (aka "Broken stick" distribution).
andFun <- function(n){
  x1 <- runif(n)
  x2 <- runif(n)*(1-x1)
  matrix(c(x1, x2, 1-(x1+x2)), ncol=3)
}

## ddzialak's solution (vectorized by me)
ddzFun <- function(n) {
    a <- runif(n, 0, 1)
    b <- runif(n, 0, 1)
    rand1 = pmin(a, b)
    rand2 = abs(a - b)
    rand3 = 1 - pmax(a, b)
    cbind(rand1, rand2, rand3)
}

## Simulate 10k triplets using each of the functions above
JOB <- jobFun(10000)
AND <- andFun(10000)
DDZ <- ddzFun(10000)

## Plot the distributions of values
par(mfcol=c(2,2))
hist(JOB, main="JOB")
hist(AND, main="AND")
hist(DDZ, main="DDZ") 
```

![在此处输入图像描述](../Images/f1c306903088ae630cb64516cab20de0.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-12T20:07:29.860

只是从 (0, 1) 中随机抽取 2 个数字，如果假设它`a`，`b`那么你得到：

```
rand1 = min(a, b)
rand2 = abs(a - b)
rand3 = 1 - max(a, b) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-12T21:01:08.070

当您想随机生成加 1（或其他值）的数字时，您应该查看[Dirichlet Distribution](http://en.wikipedia.org/wiki/Dirichlet_distribution)。

包中有一个`rdirichlet`函数，`gtools`运行`RSiteSearch('Dirichlet')`会带来很多点击，可以很容易地引导您找到执行此操作的工具（对于简单的 Dirichlet 发行版，手动编写代码也不难）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-12T20:20:30.480

我想这取决于您想要的数字分布，但这是一种方法：

```
diff(c(0, sort(runif(2)), 1)) 
```

用于`replicate`获取任意数量的集合：

```
> x <- replicate(5, diff(c(0, sort(runif(2)), 1)))
> x
           [,1]       [,2]      [,3]      [,4]       [,5]
[1,] 0.66855903 0.01338052 0.3722026 0.4299087 0.67537181
[2,] 0.32130979 0.69666871 0.2670380 0.3359640 0.25860581
[3,] 0.01013117 0.28995078 0.3607594 0.2341273 0.06602238
> colSums(x)
[1] 1 1 1 1 1 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-21T15:15:07.880

我会简单地从均匀分布中随机选择 3 个数字，然后除以它们的总和。代码如下。

```
n <- 3
x <- runif(3, 0, 1)
y <- x/sum(x)
sum(y)== 1 
```

n 可以是您喜欢的任何数字。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-12T22:29:12.053

这个问题和提出的不同解决方案引起了我的兴趣。我对建议的三种基本算法以及它们为生成的数字产生的平均值做了一些测试。

```
choose_one_and_divide_rest
means:                [ 0.49999212  0.24982403  0.25018384]
standard deviations:  [ 0.28849948  0.22032758  0.22049302]
time needed to fill array of size 1000000 was 26.874945879 seconds

choose_two_points_and_use_intervals
means:                [ 0.33301421  0.33392816  0.33305763]
standard deviations:  [ 0.23565652  0.23579615  0.23554689]
time needed to fill array of size 1000000 was 28.8600130081 seconds

choose_three_and_normalize
means:                [ 0.33334531  0.33336692  0.33328777]
standard deviations:  [ 0.17964206  0.17974085  0.17968462]
time needed to fill array of size 1000000 was 27.4301018715 seconds 
```

时间测量需要谨慎，因为它们可能更多地受到 Python 内存管理的影响，而不是算法本身。我懒得用`timeit`. 我在 1GHz Atom 上做了这个，这就解释了为什么花了这么长时间。

无论如何，choose_one_and_divide_rest 是 Andrie 和他/她自己提出的问题 ( [AND](https://stackoverflow.com/a/11004564/1050373) ) 提出的算法：你在 [0,1] 中选择一个值 a，然后在 [a,1] 中选择一个值，然后看看你剩下的. 它加起来是一个，但仅此而已，第一个分区是其他两个分区的两倍。人们可能已经猜到了...

choose_two_points_and_use_intervals 是 ddzialak ( [DDZ](https://stackoverflow.com/a/11004564/1050373) ) 接受的答案。它在区间 [0,1] 中取两个点，并使用这些点创建的三个子区间的大小作为三个数字。像魅力一样工作，手段都是1/3。

choose_three_and_normalize 是 Anders Gustafsson 和 Josh O'Brien ( [JOB](https://stackoverflow.com/a/11004564/1050373) ) 的解决方案。它只是在 [0,1] 中生成三个数字，并将它们归一化为总和 1。在我的 Python 实现中工作得同样好，而且出乎意料地快了一点。方差比第二种解决方案略低。

你有它。不知道这些解决方案对应于什么 beta 分布，也不知道我在评论中提到的相应论文中的哪组参数，但也许其他人可以弄清楚这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-03-03T03:56:24.780

最简单的解决方案是**Wakefield**包**probs()**函数

probs(3) 将产生三个值的向量，总和为 1

假设你可以 rep(probs(3),x) 其中 x 是“一遍又一遍”

没有戏剧

# vb6 - 如何以普遍大于 32k 的方式将字符串写入 longvarchar？

> ID：11003973
> 
> 赞同：0
> 
> 时间：2012-06-12T20:03:24.743
> 
> 标签：vb6, pervasive

用VB6编写的应用程序。DB 是 Pervasive v9.5。

目前工作：

```
Public Sub Save()   
    if rs.State = adStateOpen Then
         rs.AddNew
         SetFields rs
         rs.Update
    End If
end sub

Public Sub SetFields(rs as ADODB.Recordset)
    rs!Name = strName
    StrToField strReport rs!Report
    StrToField strResponse rs!Response
end sub

Public Sub StrToField(ByVal str As String, fld As ADODB.Field)
    Dim Data As String
    Dim StrSize As Long, CharsRead As Long

    ' for field of LONVARCHAR type only
    If fld.Type = adLongVarChar Then
        StrSize = Len(str)
        Do While StrSize <> CharsRead
            If StrSize - CharsRead < BLOCK_SIZE_LONGVARCHAR Then
                Data = Mid(str, CharsRead + 1, StrSize - CharsRead)
                CharsRead = StrSize
            Else
                Data = Mid(str, CharsRead + 1, BLOCK_SIZE_LONGVARCHAR)
                CharsRead = CharsRead + BLOCK_SIZE_LONGVARCHAR
            End If
            fld.AppendChunk Data
        Loop
     Else
        ' do something
     End If
 End Sub

Const BLOCK_SIZE_LONGVARCHAR = 4096 
```

这工作正常，直到我的报告或响应变量大于 32000 个字符。调用 rs.update 时收到此错误消息：

**“[Pervasive][ODBC 客户端接口] 字符串长度超过列长度参数 #15。数据被截断。”**

谁能指出我正确的方向，或者让我知道我是否遗漏了什么。Pervasive Longvarchar 最大大小应为 2GB。

谢谢，格雷厄姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:47:53.770

此代码使用 PSQL v11（我没有 v9.5）对我有效。

```
Dim conn As New ADODB.Connection
Set conn = New ADODB.Connection
conn.ConnectionString = "demodata"
conn.Open
Dim sql As String
Dim cmd As New ADODB.Command
cmd.ActiveConnection = conn
cmd.CommandText = "insert into lvc (f2) values (?)"
Dim parm As New ADODB.Parameter
parm.Name = "f2"
Dim longstring As String
Open "c:\longdata.txt" For Input As #1
Do While Not EOF(1)
   Line Input #1, sNextLine
   'do something with it
   'add line numbers to it, in this case!
   sText = sText & sNextLine
Loop
longstring = sText
parm.Value = longstring
cmd.Parameters.Append cmd.CreateParameter("param1", adLongVarChar, adParamInput, Len(longstring), longstring)
cmd.Execute
conn.Close
MsgBox "done" 
```

基本上，您将使用参数化查询而不是 .AddNew 方法。

# python - 引用第一个字符时，IndexError 字符串索引超出范围

> ID：11003975
> 
> 赞同：0
> 
> 时间：2012-06-12T20:03:29.580
> 
> 标签：python, sqlite, csv

这是我的代码（当前）：

```
conn = sqlite3.connect(db)
conn.text_factory = str  #bugger 8-bit bytestrings
cur = conn.cursor()

reader = csv.reader(open(csvfile, "rU"), delimiter = '\t')
for Number, Name, Message, Datetime, Type in reader:

# populate subscriber table
if str(Number)[0] == '1': # errors on this line
  tmpNumber = str(Number)[1:]
  Number = int(tmpNumber)
cur.execute('INSERT OR IGNORE INTO subscriber (name, phone_number) VALUES (?,?)', (Name, Number))

cur.close()
conn.close() 
```

它在注释的行上返回此错误以指示错误所在的位置：

```
IndexError: string index out of range 
```

所有数字都有值，但如果电话号码以 1 开头，我想在将其插入数据库之前删除 1。为什么这行不通？在尝试引用第一个字符之前，我已将其转换为字符串，所以我不明白为什么这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:08:14.027

好像你得到一个空字符串。尝试用以下内容替换您的 if 语句，看看它是否有效。

```
if str(Number).startswith('1'): 
```

（编辑以反映@kindall 关于使用`startswith`而不是切片的建议`[:1]`）。

# networking - 如何将连接到 NAT 后面的 IP 重定向到源的 NATted（公共）IP？

> ID：11003976
> 
> 赞同：0
> 
> 时间：2012-06-12T20:03:35.550
> 
> 标签：networking, tcp, ip, nat

我有一个依赖 IP 地址进行通信的应用程序（域名根本不起作用。:(...)

它的功能是连接到另一台机器上的对等点，并在建立信任后发送数据。在“建立信任”阶段，他们都交换他们的 IP 以供将来通信。它们都位于两个不同的防火墙后面并且经过 NAT。一个在我们的经过 NAT 的办公网络中，另一个在他们的防火墙后面经过 NAT 的云中。应用程序知道它们各自的私有 IP 并交换它们（10.x.xxx.xxx 范围），当它们尝试相互连接（使用范围为 10.x.xxx.xxx 的私有 IP）以传输数据时，它们失败。连接是 TCP，端口范围非常多样。

我很好奇我是否可以硬编码（这一次）一条规则（可能是防火墙级别或我的应用程序之外的某个地方），说明是否为 IP 地址 10.x.xxx 启动了连接。 xxx 然后将其重定向到 205.x.xxx.xxx？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:22:15.813

像 10.xyz 这样的私有 IP 地址范围本质上是私有的。除非端点之间的每个节点都有适当的规则来翻译这些，否则您无法进行任何有意义的解析。

翻译很棘手，您将使用的所有主要工具都适合静态翻译（端口转发，例如将特定端口转发到特定 IP 的地方）。这是一种方法，但它是一种 hacky 方法（它需要您打开许多端口，程序更新您的路由器，并且可能有某种代理服务器来维护映射）。

或者，您可以通过 VPN 运行隔离网络，这将为您的端点提供可用于相互连接的相互私有 IP。这只是绑定到这个新地址并通过 VPN 进行通信的情况。这也可能会加密您在互联网上的通信。

其他可能性是使用允许遍历的 NAT/TCP 穿透技术，但这些实际上是对损坏的网络拓扑的修补（阅读 IPv6 以了解如何缓解这种情况）。

或者，您可以通过代理路由所有连接，但这与 VPN 相比会使事情复杂化。

* * *

要回答有关硬编码规则的问题，这里的解决方案是端口转发。这显然取决于您的路由器配置是否接受连接的对等方，但该客户端应该将端口目标端口转发到机器。这显然不会很好地扩展，并且真的正在转向一个连接的服务器/客户端架构！

根据您的硬件，您可能能够转发一系列端口（如果无法建立单个端口）并将端口转发限制为某些传入连接（外部 IP）。

有关端口转发的信息，请访问[http://portforward.com/](http://portforward.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:14:49.607

这听起来很像你想要的 VPN。无论如何，您可以设置一个吗？基本上，您和云之间的站点到站点 VPN 会说“哦，嘿，这是位于远程网络上的 ip，继续并通过链接连接”。这种解决方案适用于您的情况吗？

这些方面的东西：http: [//i.msdn.microsoft.com/dynimg/IC589512.jpg](http://i.msdn.microsoft.com/dynimg/IC589512.jpg)

# c# - 播放视频中的不同片段

> ID：11003978
> 
> 赞同：0
> 
> 时间：2012-06-12T20:03:37.287
> 
> 标签：c#, video, directx, playback

我想开发一个视频播放器，它必须在视频中播放不同的部分（由它们的开始 n 结束位置指定）。为此，我正在使用 directx.audiovideoplayback dll。开始和结束位置存储在一个数组中。例如- {2,6,8,19} 表示必须播放第 2 到第 6 秒之间的片段，然后应该播放第 8 到第 19 秒。

我的问题是，尽管我给出了条件 if(video_obj.CurrentPosition==endtime) video_obj.Stop(); 视频没有停止..视频正在从第二个位置播放到文件末尾。

代码是

```
 public static int[] seconds = { 3,8,12,16};
    public static int start, end;
    private void btnPlay_Click(object sender, EventArgs e)
    {
        vdo.Owner = panel1;
        panel1.Width = 300;
        panel1.Height = 150;
        vdoTrackBar.Minimum = 0;
        vdoTrackBar.Maximum = Convert.ToInt32(vdo.Duration);

        if (vdo != null)
        {
            vdo.Play();
            timer1.Start();
        }
    }
private void vdoTrackBar_Scroll(object sender, EventArgs e)
    {
        if (vdo != null)
        {
            vdo.CurrentPosition = vdoTrackBar.Value;
        }
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        int i;
        for (i = 0; i < seconds.Length; i = i + 2)
        {
            start = seconds[i];
            vdo.CurrentPosition = start;
            end = seconds[i + 1];
            vdoTrackBar.Value = (int)vdo.CurrentPosition;

            MessageBox.Show("Starts at " + vdo.CurrentPosition + " and Ends at " + end);
            if (vdo.Paused)
                vdo.Play();
            if (vdo.Playing)
            {
                if (vdo.CurrentPosition == vdo.Duration)
                {
                    timer1.Stop();
                    vdo.Pause();
                    vdoTrackBar.Value = 0;
                }
                if (vdo.CurrentPosition == end)
                {
                    timer1.Stop();
                    vdo.Pause();
                }

                vdoTrackBar.Value += 1;
            }
        } 
```

帮助！某处出了点问题，我对此一无所知 我该如何纠正？当我开始播放视频时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:43:37.200

因此，帖子中仍然没有足够的信息来真正明确地说明出了什么问题。我猜您的计时器没有以足够的分辨率滴答作响，以至于当计时器滴答中的 for 循环与视频的当前位置重合时恰好发生滴答声。

计时器打勾的频率是多少？视频当前位置的精度是多少？

# .htaccess - 按域阻止引荐来源垃圾邮件 - 是 403 响应有效

> ID：11003980
> 
> 赞同：2
> 
> 时间：2012-06-12T20:03:44.973
> 
> 标签：.htaccess, mod-rewrite, spam-prevention

我即将实现以下代码来阻止客户收到的一些推荐垃圾邮件。

403 是重定向请求的最有效方式（我相信标头大小为 0 字节，或至少很小），还是我应该考虑其他选项？

```
RewriteEngine on
# Options +FollowSymlinks
RewriteCond %{HTTP_REFERER} spammer-one\.com [NC,OR]
RewriteCond %{HTTP_REFERER} spammer-two\.com
RewriteCond %{HTTP_REFERER} spammer-three\.com
RewriteRule .* - [F] 
```

令人担忧的是，他们的网站正在接收来自多个垃圾邮件域的大量流量，服务器负载可能是一个因素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:05:11.317

我的实践——它是完美的（除非你想用 404 或其他代码来欺骗他们更多的响应）。

标头不是零字节长，但确实非常小（2 或 3 行 AFAIK）。零字节响应（这意味着 - 连接被丢弃而不发送任何响应标头）只能由 Apache 在非常低的级别发送（例如，当验证请求的 URL 并发现请求无效时，例如包含无效字符等），这是方式在 mod_rewrite 开始之前。

**只是一个小提示：**如果站点非常繁忙（如您所说），那么最好将其放置在 Apache 的配置文件中，而不是 .htaccess 中，每个请求都会读取该文件。

# bash - printf，忽略多余的参数？

> ID：11003981
> 
> 赞同：6
> 
> 时间：2012-06-12T20:03:46.080
> 
> 标签：bash, shell, printf, piping

我今天注意到 Bash`printf`有一个`-v`选项

```
-v var    assign the output to shell variable VAR rather than
          display it on the standard output 
```

如果我这样调用它会起作用

```
$ printf -v var "Hello world"

$ printf "$var"
Hello world 
```

来自管道它不起作用

```
$ grep "Hello world" test.txt | xargs printf -v var
-vprintf: warning: ignoring excess arguments, starting with `var'

$ grep "Hello world" test.txt | xargs printf -v var "%s"
-vprintf: warning: ignoring excess arguments, starting with `var' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T20:10:16.753

`xargs`将调用`/usr/bin/printf`（或系统上安装该二进制文件的任何位置）。它不会调用 bash 的内置函数。并且只有内置的（或采购脚本或类似的）可以修改 shell 的环境。

即使它可以调用 bash 的内置`xargs`函数，您的示例中的 the 也会在转售中运行。subshel​​l 无论如何都不能修改它的父环境。所以你正在尝试的东西是行不通的。

如果我正确理解您的示例，我会看到一些选项；样本数据：

```
$ cat input
abc other stuff
def ignored
cba more stuff 
```

简单变量（有点棘手，具体取决于您想要什么）：

```
$ var=$(grep a input)
$ echo $var
abc other stuff cba more stuff
$ echo "$var"
abc other stuff
cba more stuff 
```

如果您想要数组中的单个单词，则使用数组：

```
$ var=($(grep a input))
$ echo "${var[0]}"-"${var[1]}"
abc-other 
```

或者，如果您想要每个数组元素中的整行：

```
$ IFS=$'\n' var=($(grep a input)) ; unset IFS
$ echo "${var[0]}"-"${var[1]}"
abc other stuff-cba more stuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:10:52.307

有两个 printf——一个是 shell bultin，如果你只运行 printf 就会调用它，另一个是常规二进制文件，通常是 /usr/bin/printf。后者不带 -v 参数，因此出现错误消息。由于`printf`是`xargs`此处的参数，因此运行的是二进制文件，而不是 shell bulitin。此外，由于它位于管道的接收端，因此它作为子进程运行。变量只能从父进程继承到子进程，但不能相反，因此即使 printf 二进制文件可以修改环境，父进程也不会看到更改。因此，您的命令无法正常工作有两个原因。但你总是可以做到`var=$(something | bash -c 'some operation using builtin printf')`的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T21:38:40.273

Mat 对发生的事情和原因给出了很好的解释。

如果您想遍历命令的输出并使用 Bash 的`sprintf`-style`printf`功能 ( `-v`) 将变量设置为连续值，您可以这样做：

```
grep "Hello world" test.txt | xargs bash -c 'printf -v var "%-25s" "$@"; do_something_with_formatted "$var"' _ {} \; 
```

# mysql - 如何通过命令行转储没有外键的 MySQL 文件？

> ID：11003983
> 
> 赞同：9
> 
> 时间：2012-06-12T20:04:03.793
> 
> 标签：mysql, mysqldump

我需要导出一个没有外键的大型数据库。执行此操作的命令是什么？

这是我尝试过的，但我知道这是不正确的。

```
mysqldump -u root -p DBNAME SET FOREIGN_KEY_CHECKS = 0; | gzip > database.sql.gzip 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-02-16T03:36:21.923

您可以`--init-command`在每个会话的基础上使用该标志：

```
mysql --init-command="SET SESSION FOREIGN_KEY_CHECKS=0;" ... < dump.sql 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-12T20:21:34.007

从这个 SO 线程：

[你能自动创建一个不强制外键约束的 mysqldump 文件吗？](https://stackoverflow.com/questions/2429655/can-you-automatically-create-a-mysqldump-file-that-doesnt-enforce-foreign-key-c)

MySQL 5.0.51 中包含的 mysqldump 命令（根据 4.1.1 以来的更改日志版本）确实关闭了外键检查。默认情况下，mysqldump 在转储文件的顶部包含以下行：

`/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;`

/*!40014 ... */ 语法是一个条件注释，将在 MySQL 4.0.14 及更高版本上执行。旧的外键检查设置在转储文件的末尾恢复：

`/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-04-24T21:15:47.370

这很难看，但我最终只是修改了架构文件以删除外键。

* * *

### 仅转储模式，没有外键

```
mysqldump -uuser -ppassword --no-data dbname | sed '$!N;s/^\(\s*[^C].*\),\n\s*CONSTRAINT.*FOREIGN KEY.*$/\1/;P;D' | grep -v 'FOREIGN KEY' > dbname_schema_no_fk.sql 
```

`sed`查找外键约束声明之前的行，并用它们自己替换这些行，减去尾随的逗号。 `grep`排除外键约束。

### 只转储数据，不创建表

```
mysqldump -uuser -ppassword --no-create-info dbname > dbname_data.sql 
```

### 先加载模式，再加载数据

```
$ mysql -uuser -ppassword
> create database foo
> use foo
> source dbname_schema_no_fk.sql
> source dbname_data.sql 
```

* * *

使用 mysqldump Ver 10.13 Distrib 5.6.32-78.1 测试，适用于 Linux (x86_64)。

# jquery - 检测身体上的触摸启动，但不是我的导航

> ID：11003986
> 
> 赞同：1
> 
> 时间：2012-06-12T20:04:05.540
> 
> 标签：jquery, tablet

我有菜单

我想为平板电脑创建一个触发器，如果​​用户点击屏幕上的任何位置，它将折叠我的子导航。除了，我希望用户能够在不触发的情况下单击导航中的任何位置`closeMenu();`

我试过了：

```
$('#main-container').not('.menu').live('touchstart click', function(){
    closeMenu();
} 
```

哪里`.menu`看起来像：

```
<div id="container">
<ul>
   <li>   
     <div class="menu">
       <a class="menu-links" href="#">Menu List 1</a>
       <ul>
          <li><label><input type="radio" checked="checked" />All</label></li>
          <li><label><input type="checkbox" />Option 1</label></li>
          <li><label><input type="checkbox" />Option 2</label></li>
          <li><label><input type="checkbox" />Option 3</label></li>
       </ul>
     </div>
    </li>
    <li>
      ....more of the same
    </li>
 </ul> 
```

有几个实例`.menu`，每个实例都位于`<li>`.

最终发生的事情是，它让我点击“.menu-links”，但是当我点击任何选项时，它的行为就像我点击了一样`#main-container`，`closeMenu()`并被启动。

# sql - 在 SQL 中舍入到最接近的奇数

> ID：11003987
> 
> 赞同：4
> 
> 时间：2012-06-12T20:04:08.263
> 
> 标签：sql, rounding

我发现自己有点不太可能*需要四舍五入到 SQL 中最接近的 ODD 整数。这里有一个很好的解决方案来解决如何四舍五入到最近的 N（2,5,10 等）[，](https://stackoverflow.com/questions/8605007/round-up-or-down-to-closest-20)但没有明确说明奇数。如果有特定于 Oracle 的解决方案，请使用 Oracle 11gR2。

*需要将我的数据加入到从这项[研究](http://www.nwea.org/sites/www.nwea.org/files/resources/2012%20RIT%20Scale%20School%20Norms%20User%27s%20Guide.pdf)中剥离的表格中。作者使用了 2 的一致 bin 宽度……但有时它是偶数，而另一些则是奇数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T20:10:59.280

你可以这样做：

```
DECLARE
  n FLOAT;
BEGIN  
   n := 195.8;
   SELECT 
      CASE
         WHEN mod(FLOOR(n),2) = 0 THEN FLOOR(n)+1
         ELSE FLOOR(n)
      END NUM
      INTO n
   FROM DUAL;
   dbms_output.put_line(to_char(n));
   END;
/ 
```

有时直截了当是最好的，因为追随你的人会明白发生了什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T20:35:32.857

我认为您不需要案例陈述，应该这样做：

```
SELECT 
   ROUND((11.9-1)/2,0)*2+1
FROM DUAL 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T20:17:59.527

算术或？

```
ROUND(3.14,0)|1 
```

**编辑**

Andriy 正确地将其更正为`FLOOR(3.64)::int|1`. （[正常](http://sqlfiddle.com/#!1/d41d8/302)工作）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-12T20:27:47.263

这是一个可以执行此操作的 oracle PL/SQL 函数：

```
CREATE OR REPLACE FUNCTION ROUNDODD 
(
  IMPNUM IN NUMBER  
) RETURN NUMBER AS
roundnum number;
oddnum number;
BEGIN
roundnum := round (IMPNUM,0);

IF mod(roundnum,2) = 1
THEN RETURN roundnum;
ELSE
IF roundnum > IMPNUM
THEN RETURN roundnum-1;
ELSE RETURN roundnum+1;
end if;
end if;
END ROUNDODD; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T20:12:19.670

使用模数可以帮助您找到偶数/奇数。偶数加 1

```
select
    case when (value % 2) <> 0 then value
    else value + 1 end
from table 
```

# wordpress - wordpress 主题的图像滑块

> ID：11003988
> 
> 赞同：0
> 
> 时间：2012-06-12T20:04:09.997
> 
> 标签：wordpress

我正在研究 wordpress 主题。在那个主题中有一个菜单 在那个画廊中有一个菜单项“画廊”有三个页面汽车，自行车和卡车，我必须在滑块中显示汽车页面中的汽车图像，并在自行车页面中显示自行车图片，同样适用卡车，但问题是，当我安装一个插件时，它会在每个页面上显示，并且每个页面都有相同的图片，这不是必需的，现在告诉我这可能是我想要做的，还有任何单个插件会显示不同不同页面上的图像？？

链接在这里

[http://nhra-racing.com/](http://nhra-racing.com/)

# build - 使用 gnustl_static 构建外部模块时找不到 libstdc++

> ID：11003992
> 
> 赞同：1
> 
> 时间：2012-06-12T20:04:51.827
> 
> 标签：build, android-ndk, android-build, android-ndk-r7

我正在将 gnustl_static 添加到外部 Android 模块，并且在构建它时出现以下错误。

```
make: *** No rule to make target `prebuilt/ndk/android-ndk-r7/sources/cxx-stl/gnu-libstdc++/libs/armeabi-v7a/libstdc++.a', needed by `out/target/product/msm8960/obj/SHARED_LIBRARIES/liballjoyn_intermediates/LINKED/liballjoyn.so'.  Stop. 
```

当我查看“prebuilt/ndk/android-ndk-r7/sources/cxx-stl/gnu-libstdc++/libs/armeabi-v7a/”时，我找不到 libstdc++.a 有一个 fild libsupc++.a

构建系统正在从它声明的“build/core”文件夹中的 binary.mk 文件中获取它

```
 # LOCAL_NDK_STL_VARIANT is gnustl_static
my_ndk_stl_include_path := $(my_ndk_source_root)/cxx-stl/gnu-libstdc++/libs/$(TARGET_CPU_ABI)/include \
                           $(my_ndk_source_root)/cxx-stl/gnu-libstdc++/include
my_ndk_stl_static_lib := $(my_ndk_source_root)/cxx-stl/gnu-libstdc++/libs/$(TARGET_CPU_ABI)/libstdc++.a 
```

问题是我不知道如何克服这个错误。

预建文件夹中有许多 libstdc++ 副本，但在列出的位置中找不到它们。发现于

```
prebuild/ndk/$(ANDRIOD_NDK_VERSION)/platforms/$(ANDROID_SDK_VERSION)/$(ARCHETECTURE_TYPE)/usr/lib/libstdc++.a 
```

这是我的 Android.mk 文件的缩写形式：

```
LOCAL_PATH := $(call my-dir)

# Rules to build libabc.so

include $(CLEAR_VARS)

LOCAL_CPP_EXTENSION := .cc

LOCAL_SDK_VERSION := 8
LOCAL_NDK_VERSION := 7
LOCAL_NDK_STL_VARIANT := gnustl_static

LOCAL_CFLAGS += \
        -std=gnu++0x

LOCAL_C_INCLUDES := \
        external/abc/inc \
        external/openssl/include

LOCAL_SRC_FILES := \
        file1.cc \
        file2.cc

LOCAL_SHARED_LIBRARIES := \
        libcrypto \
        libssl \
        liblog

LOCAL_PRELINK_MODULE := false

LOCAL_REQUIRED_MODULES := \
         external/openssl/crypto/libcrypto \
         external/openssl/ssl/libssl

LOCAL_MODULE_TAGS := optional
LOCAL_MODULE := libabc

include $(BUILD_SHARED_LIBRARY) 
```

任何人都知道如何解决“无规则制定目标”构建问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:34:08.797

找到的解决方案：

简单的答案是我需要将 LOCAL_NDK_VERSION 版本从 7 更改为 5 或 6。

复杂的答案是 binary.mk 文件尚未更新以说明发布 NDK-7 时所做的更改。

在 NDK-5 和 NDK-6 中，当使用 gnustl_static 时，包含 STL 的所有内容的库文件位于位于 binary.mk 文件中指定位置的 libstdc++.a 中。当 NDK-7 发布时，库名称从 libstdc++.a 更改为 libgnustl_static.a。看起来 binary.mk 并没有被更新来解释这个变化。

这并不奇怪，因为似乎没有项目使用 gnustl_static。我对 android 存储库中的所有代码进行了 grep，我发现使用设置为 gnustl_static 的 LOCAL_NDK_VERSION 的唯一代码是我自己的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T20:40:06.470

您不应该使用`LOCAL_NDK_STL_VARIANT`选择 STL 变体。

您应该`APP_STL := gnustl_static`在`Application.mk`文件中使用。

# c# - 如何验证模型中的 Guid 类型？

> ID：11003995
> 
> 赞同：0
> 
> 时间：2012-06-12T20:05:04.790
> 
> 标签：c#, asp.net-mvc-3, validation

我的模型中有这样的属性：

```
 [Required(ErrorMessage = "Select a user!!!")]
 public Guid UserId { get; set; } 
```

在 MVC 视图中我有

```
<td>*@Html.LabelFor(model => model.UserId) :</td>
<td>@Html.DropDownList("UserId", "--Select--")</td> 
```

在我的 html 源代码中，我有：

```
<select id="UserId" name="UserId">
<option value="">--Select--</option>
<option value="30afa71d-6983-410a-bb68-26fd2438b969">User A</option>
<option value="b1d81277-72bc-4aa6-8fc4-524cd01d47a4">User B</option>

</select> 
```

我如何验证用户选择用户的这个属性

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-09-30T11:48:38.510

您可以添加一个自定义`RequiredGuidAttribute`，基于`ValidationAttribute`，不允许空 Guid 值：

```
public class RequiredGuidAttribute : ValidationAttribute
{
    public RequiredGuidAttribute() => ErrorMessage = "{0} is required.";

    public override bool IsValid(object value)
        => value != null && value is Guid && !Guid.Empty.Equals(value);
} 
```

然后在您的模型上，您可以将您的属性声明为 Guid 并按如下方式进行装饰：

```
 [RequiredGuid]
    public Guid MessageId { get; set; } 
```

当我从请求正文中省略 MessageId 时，我的 ASP.NET Core WebApi 然后在 Postman 中返回以下内容：

```
{
    "errors": {
        "MessageId": [
            "MessageId is required."
        ]
    },
    "title": "One or more validation errors occurred.",
    "status": 400,
    "traceId": "0HLQ5JBI08329:00000009"
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-31T11:42:18.200

问题是不可为空的 GUID 将始终具有 Guid.Empty 的默认值`00000000-0000-0000-0000-000000000000`- 因此您所需的验证器永远不会将该值视为空值或 null。

解决方案是使 UserId 属性可以为空：

`public Guid? UserId { get; set; }`（注意`?`属性类型之后）

或者

`public Nullable<Guid> UserId { get; set; }`（如果您不想使用速记）

因此，您的属性及其属性将如下所示：

```
[Required(ErrorMessage = "Select a user!!!")]
public Guid? UserId { get; set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T20:13:02.383

使用`RegularExpression`验证属性：

```
[RegularExpression(@"^(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}$")]
[Required(ErrorMessage = "Select a user!!!")]
public Guid UserId { get; set; } 
```

# android - Android 应用内结算问题

> ID：11003997
> 
> 赞同：1
> 
> 时间：2012-06-12T20:05:05.797
> 
> 标签：android, in-app-billing

我正在尝试运行开发人员网站上提供的示例应用内计费。

我曾经有过一些工作，在那里我可以购买药水，并且购买的东西会显示在示例应用程序中。

在某些时候，只需稍作修改，事情就会停止工作，所以我恢复到原始示例代码，事情仍然无法正常工作。起初购买页面会说我的商品不可用，即使我可以看到对话框后面的产品描述。不久之后，商店根本找不到这些物品。我的示例应用程序版本都不会显示我拥有的项目，包括测试项目。

我在 LogCat 中得到的只是这个：

> [E/Volley（1619）：[12] BasicNetwork.performRequest： https](https://android.clients.google.com/fdfe/details?doc=inapp:com.bdfun.dungeons:potion_001) ://android.clients.google.com/fdfe/details?doc= inapp:com.bdfun.dungeons:potion_001 的意外响应代码 500

和

> D/Finsky (1619)：[1] MarketBillingService.sendResponseCode：向 com.bdfun.dungeons 发送请求的响应 RESULT_ERROR。

我完全不知道为什么这完全停止工作，而且我发现无法调试它。

感谢任何人都可以提供的任何提示。