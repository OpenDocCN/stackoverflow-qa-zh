# StackOverflow 问答 1012000-1012999

# asp.net-mvc - .NET MVC - javascript 的默认 .onError 处理程序？

> ID：1012000
> 
> 赞同：0
> 
> 时间：2009-06-18T10:43:34.893
> 
> 标签：asp.net-mvc, ajax, default-value, onerror

是否可以在 ActionLinks 等中为 AjaxOptions 设置默认的 .OnError 处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-02-04T13:56:34.507

我目前使用默认 MVC javascript 文件的编辑版本。

# oracle10g - 是否有任何类似于 ProvidersHelper 但不适用于 web 的类？

> ID：1012001
> 
> 赞同：0
> 
> 时间：2009-06-18T10:43:52.803
> 
> 标签：oracle10g, codesmith, .nettiers

是否有任何类似于 ProvidersHelper 但不适用于 web 的类？我想实例化一组提供者。实际上我使用的是 CodeSmith & Nettiers，而数据库提供者是 Oracle。它生成了一个要在 app.config 中添加的提供程序部分，我不知道为什么它使用 System.Web.Configuration 类或为什么在此部分它说 SQLClient 而不是 OracleClient。

我得到的错误是：

> “System.Web.dll 中发生了“System.Configuration.ConfigurationErrorsException”类型的未处理异常

附加信息：无法加载文件或程序集“LLPA.Data.OracleClient”或其依赖项之一。该系统找不到指定的文件。”

任何想法或解决方案表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-08-11T16:51:26.730

如果它引用 SQL Server 并且您使用的是 Oracle，则它可能是一个错误。我建议在[.netTiers 问题跟踪器](http://code.google.com/p/nettiers/)上记录一个错误。我建议查看正在构建的所有 LLPA.Data.OracleClient 项目引用，并确保它们位于已编译应用程序的 bin 目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T12:16:20.183

我没有添加对`LLPA.Data.OracleClient`我的应用程序的引用，这就是它找不到它的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T11:36:43.243

Check the DLL LLPA.Data.OracleClient is in the bin folder or the GAC. If that doesn't work look into using [Fuslogvw.exe](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx).

# jquery - jquery自动完成按键数据库

> ID：1012002
> 
> 赞同：2
> 
> 时间：2009-06-18T10:43:59.933
> 
> 标签：jquery, plugins, autocomplete

我正在尝试使用 jquery 自动完成插件，我希望它建议 ItemCodes 作为用户类型...

问题是它没有显示自动完成框/框架/....

只是为了确保 webmethod 在每个 keyup 事件上返回数据，我将数据分配给 div 元素，并且它可以正常工作。

```
<script language="javascript" type="text/javascript">
    $(document).ready(function() {
        var strItmCodes;

        $("#txtItmCode").keyup(function() {
            var search;
            search = $("#txtItmCode").val();

            if (search.length > 0) {
                $.ajax({
                    type: "POST",
                    url: "Journal.aspx/loadData",
                    contentType: "application/json; charset=utf-8",
                    data: "{'Like':'" + $('#txtItmCode').val() + "'}",
                    dataType: "json",
                    success: function(retval) {
                        strItmCodes = retval.d.split("|");

                        $("#txtItmCode").autocomplete(strItmCodes);
                        $("#suggest").html(retval.d); //elemet 'suggest' is a div
                    }
                });
            }
        });
    });
</script> 
```

修改的

```
<script language="javascript" type="text/javascript">
    $(document).ready(function() {
        //$("#txtItmCode").autocomplete({url: "Journal.aspx/loadData" });

        $("#txtItmCode").keyup(function() {
            $("#txtItmCode").autocomplete({url: "Journal.aspx/loadData" });
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T13:37:38.553

我认为您应该在第一次按键之前启用自动完成插件，然后插件将添加事件处理程序。

假设您使用原始的[自动完成](http://bassistance.de/jquery-plugins/jquery-plugin-autocomplete/)插件：

```
$("#txtItmCode").autocomplete({url: "Journal.aspx/loadData"}); 
```

并确保您的服务可以回复插件格式化的 GET 请求。

# jquery - jQuery：即使元素被删除并重新创建，如何保留元素功能？

> ID：1012021
> 
> 赞同：0
> 
> 时间：2009-06-18T10:50:38.220
> 
> 标签：jquery, autocomplete

我有个问题..

我使用自动完成插件，我编辑该插件以使输入文本在用户做出选择时消失。

所以，我的目标是，当用户从自动完成列表中选择一行时：

1.  Ajax 请求将检索有关所选行的附加信息（这里没问题）
2.  带有这些附加信息的表单自动填充（在这里确定）
3.  具有自动完成功能的输入文本消失了，我在其中放置了 2 个 div，其中一个带有 X（用于“取消选择”先前的选择），另一个带有一些关于选择本身的简短信息（这里没有问题）
4.  如果用户单击 X div，则所有必须作为开始返回，输入文本具有自动完成功能。

发生在我身上的是，在第 4 点，一切正常，但是当具有自动完成功能的输入文本由

```
$("div#contact-list-container").html('<input type="text" name="contact-list" id="contact-list" value="" />'); 
```

自动完成功能不再起作用！

那么，如何在重新创建字段时将自动完成功能加入到字段中？为了让用户多次选择和取消选择它。

**ps：**我知道我可以简单地用输入文本隐藏 div 并用 X 显示那个，但我更喜欢保持 html 标记最小化，不要乱用隐藏的 div。如果可能的话，我想在每次选择时更改 innerHTML 并重新关联自动完成功能。

这就是我现在的样子：

```
$(document).ready(function(){
    $('input#contact-list').autocomplete('test-db.php', {
        multiple: false,
        dataType: "json",
        width: 400,
        scrollHeight: 300,
        max: 5,
        parse: function(data) {
            return $.map(data, function(row) {
                return {
                    data: row,
                    value: row.azienda,
                    //result that will be used in the text field, while selected
                    result: row.code + ' - ' + row.company + ' | ' + row.name + ', ' + row.surname
                }
            });
        },
        formatItem: function(item) {
            return item.code + ' - ' + item.company + '<br />' + item.name + ', ' + item.surname + '<br />' + item.email;
        }
    }).result(function(e, item) {
        //this will be triggered when the selection has made
        $.ajax({
            type: "POST",
            cache: false,
            data: "idCompany=" + item.id_company + "&idUser=" + item.id_user,
            url: "test-db-02.php",
            success: function(message){
                $("input[rel='ship']").attr("readonly", true).css("background-color", "#DFDFDF");
                $("input[rel='company']").attr("readonly", true).css("background-color", "#DFDFDF");
                var rd = json_parse(message);

                $("input#ship-nome-referente").val(rd.company.nome);
                $("input#ship-cognome-referente").val(rd.company.cognome);
                //[... and so on, i change the val of many fields..]
                //REPLACE THE INPUT-TEXT WITH THE DIVS
                $("div#contact-list-container").html('<div id="deselect-contact">X</div><div id="selected-contact">' + rd.company.code + ' - ' + rd.company.company + ' | ' + rd.company.name + ', ' + rd.company.surname + '</div>');

                $("div#deselect-contact").click(function(){
                //REPLACE THE DIVS WITH THE INPUT-TEXT.. HOW TO REASSOCIATE THE AUTOCOMPLETE?
                    $("div#contact-list-container").html('<input type="text" name="contact-list" id="contact-list" value="" />');
                    $("input[rel='ship']").attr("readonly", false).css("background-color", "#FFFFFF").val('');
                    $("input[rel='company']").attr("readonly", false).css("background-color", "#FFFFFF").val('');
                });
            }
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T11:11:48.253

从 jQuery 1.3 开始，[live()](http://docs.jquery.com/Events/live)事件具有所需的功能，它允许您将事件持久地绑定到句柄，即使句柄被销毁并重新创建。

编辑：live 在 jQuery 1.7 中被弃用并在 1.9 中被删除，所以现在你应该使用[on()](http://api.jquery.com/on/)来实现相同的效果。

有关详细信息，请参阅[http://api.jquery.com/on/](http://api.jquery.com/on/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T11:14:02.320

我写了一个函数，它附加了自动完成 onfocus。所以当你有这样的输入时：

```
<input type="text" onfocus="attach(this);"/> 
```

或者在您的情况下，将 onfocus 部分添加到您的输入字段注入中：

```
$("div#contact-list-container").html('<input type="text" name="contact-list" id="contact-list" value="" onfocus="attach(this);"/>'); 
```

您可以使用如下函数来附加自动完成插件。（注意，我设置了一个属性来防止多个附件）

```
function attach(element){

    var $element = jQuery(element);

    // check if autocomplete was already attached
    if($element.attr("autocomplete.attached")){
        return;
    }

    // attach autocomplete 
    $element.autocomplete(...);

    // set a marker
    $element.attr("autocomplete.attached", true);
} 
```

我不明白的是：为什么你不想隐藏和显示 div？“隐藏的 div 乱七八糟”是什么意思？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T11:25:57.023

您也可以`<input>`从 DOM 中删除唯一但**不**使用 jQuery 的`remove()`方法。该函数从 DOM 中删除元素，但也丢弃任何附加的事件处理程序和数据。

但是不要忘记在删除后保留对 DIV 的引用。像这样的东西：

```
var theField = document.getElementById('contact-list');
// remove it only from DOM
theField.parentNode.removeChild(theField);

// ...

// and later when you want to bring the field back into the game
$('#contact-list-container').append(theField); 
```

**注意**这会在 IE 中引入内存泄漏。您可以在页面卸载或显示和隐藏字段上使用 jQuery 的 remove() 函数。后者是迄今为止最干净的解决方案，我不明白为什么你会觉得它“*乱七八糟*”。

# database - 插入记录的最佳数据库

> ID：1012025
> 
> 赞同：2
> 
> 时间：2009-06-18T10:52:34.127
> 
> 标签：database

以非常高的速率插入记录的最佳数据库是什么。

数据库只有一张表，应用程序非常简单。在数据库中插入一行并提交，但插入率会非常高。

目标是每秒大约 5000 行插入。

任何非常昂贵的数据库，如 Oracle\SQLServer 都是不可选择的。

另外，进行数据库备份的技术是什么，是否可以从较旧的备份数据库创建一个数据库？

我不能使用任何数据库的 InMemory 功能，因为我无法承受应用程序的崩溃。我需要在收到该行后立即提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T11:34:24.603

如果您的主要目标是在短时间内插入大量数据，那么文件系统可能就是您所需要的。

为什么不将数据写入文件，可选地以 DB 友好格式（csv、xml、...）？这样一来，您就可以轻松实现 10 倍的绩效目标。如今，大多数操作系统都足够强大，可以防止应用程序故障导致数据丢失。

编辑：如下所述，jounaling 文件系统经过精心设计，以便在软件（或什至硬件，如果是 raid-arrays）故障的情况下不会丢失数据。ZFS 享有良好的声誉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T11:01:02.957

Postgres 提供了 WAL（预写日志），它本质上会插入 RAM，直到缓冲区已满或系统有时间呼吸。您将大型 WAL 缓存与 UPS（为了安全）结合起来，您将获得非常高效的插入性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T10:56:58.267

要获得高吞吐量，您需要将批量插入到大事务中。我真的怀疑你能找到任何允许你从你的客户那里每秒往返 5000 次的数据库。

Sqlite 可以处理[大量的插入](http://www.sqlite.org/speed.html)（在 tran 中每秒 25K）只要东西不是太多线程并且这些东西是批处理的。

此外，如果结构正确，我看不出 mysql 或 postgres 不支持每秒 5000 行的原因（只要行不太胖）。MySQL 和 Postgres 都对处理大量事务更加宽容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T11:05:52.993

如果你不能做 SQLite，如果我是你，我会看看[Firebird SQL 。](http://www.firebirdsql.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-08-18T09:51:56.817

即使在“传统”关系 DBMS 上，您想要的性能也并不难实现。如果您查看[非集群 TPC-C](http://www.tpc.org/tpcc/results/tpcc_perf_results.asp?resulttype=noncluster)的结果（TPC-C 是事务处理的事实上的标准基准），许多系统可以在非集群系统中提供 10 倍于您的要求。如果您想要便宜又可靠的产品，您可能需要查看[DB2 Express-C](http://www-01.ibm.com/software/data/db2/express/about.html)。它仅限于两个内核和 2 GB 内存，但这应该足以满足您的需求。

# c# - 使用 XSD.exe 生成 C# 帮助程序类：处理导入的架构失败

> ID：1012034
> 
> 赞同：2
> 
> 时间：2009-06-18T10:53:25.217
> 
> 标签：c#, xml, import, xsd, xsd.exe

我想使用 XSD.exe 工具（来自 VS2008 SDK）从[KML2.2 xml 模式生成 C# 帮助文件。](http://schemas.opengis.net/kml/2.2.0/ogckml22.xsd)使用 KML2.1，该工具运行良好。但是，KML2.2 架构包含指向[其他架构](http://docs.oasis-open.org/election/external/xAL.xsd)的导入标记，导致 XSD.exe 崩溃。

这是我收到的错误消息：

```
C:\Program Files\Microsoft Visual Studio 2008 SDK\VisualStudioIntegration\Sample
s\Sdm> xsd.exe d:\temp\kml22.xsd /c /l:CS /n:Google.Kml22 /o:D:\temp\

Microsoft (R) Xml Schemas/DataTypes support utility
[Microsoft (R) .NET Framework, Version 2.0.50727.3038]
Copyright (C) Microsoft Corporation. All rights reserved.

Schema validation warning: The 'http://www.w3.org/2005/Atom:author' element is
 not declared. Line 311, position 12.
Schema validation warning: The 'http://www.w3.org/2005/Atom:link' element is not
 declared. Line 312, position 12.
Schema validation warning: The 'urn:oasis:names:tc:ciq:xsdschema:xAL:2.0:Address
Details' element is not declared. Line 314, position 12.

Warning: Schema could not be validated. Class generation may fail or may produce
 incorrect results.

Error: Error generating classes for schema 'd:\temp\kml22'.
  - The element 'http://www.w3.org/2005/Atom:author' is missing. 
```

您对我如何生成 C# 帮助文件有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-18T13:37:07.073

您必须在命令行中指定所有涉及的 XSD，包括导入。[这是](http://www.power-programming.co.uk/post/2009/03/XSDexe-Schema-validation-warning.aspx)一个带有示例的博客文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T16:51:11.543

我写了一个快速的 LinqPad 脚本来让 XSD.EXE 完成我的任务。复制/粘贴到 LinqPad 中，将第 3 行更改为指向您的 XSD，按 F5，然后按 TADA！

```
void Main()
{
    var file = @"C:\.... some.xsd";
    Do(file);
    files.Dump();

    ("xsd.exe \"" + string.Join("\" \"", files) + "\" /classes").Dump();
}

private void Do(string file)
{
    file = file.ToLower();

    var dir = Path.GetDirectoryName(file);
    var contents = File.ReadAllText(file);
    var regex = @"schemaLocation=""(.*?)""";

    if (files.Contains(file))
    {
        return;
    }

    files.Add(file);

    var toProcess = Regex.Matches(contents, regex).OfType<Match>().Select (m => m.Groups[1].Value).Select (m => 
    {
        if (Path.IsPathRooted(m))
        {
            return m;
        }
        else
        {
            return Path.GetFullPath(Path.Combine(dir, m));
        }
    }).Select (m => m.ToLower()).Where (m => !files.Contains(m)).ToList();

    foreach (var nested in toProcess)
    {
        Do(nested);
    }
}
private List<string> files = new List<string>(); 
```

[在http://www.alexdresko.com/2015/10/08/xsd-exe-and-imports-a-solution/](http://www.alexdresko.com/2015/10/08/xsd-exe-and-imports-a-solution/)了解更多信息

# sql-server - 在生产中运行的 grails Web 应用程序出现问题：“没有这样的属性：保存类：JsecRole”

> ID：1012036
> 
> 赞同：0
> 
> 时间：2009-06-18T10:53:28.573
> 
> 标签：sql-server, grails, web-applications

我有一个 grails 1.1 Web 应用程序在开发中运行良好，但是当我尝试使用 sqlserver 数据库在生产环境中运行它时，它以一种奇怪的方式崩溃。

我的 datasource.groovy 的相关部分如下：

```
environments {
    development {
        dataSource {
            dbCreate = "create-drop" // one of 'create', 'create-drop','update'
            url = "jdbc:hsqldb:mem:devDB"
        }
    }
    test {
        dataSource {
            dbCreate = "update"
            url = "jdbc:hsqldb:mem:testDb"
        }
    }
    production {

        dataSource {
            dbCreate = "update"
            driverClassName = "com.microsoft.sqlserver.jdbc.SQLServerDriver"
            endUsername = "sa"
            password = "pw4db"
            url = "jdbc:sqlserver://localhost:1433;databaseName=ReleasePlanner;selectMethod=cursor" 
```

我收到的错误信息是：

```
Message: No such property: save for class: JsecRole
Caused by: groovy.lang.MissingPropertyException: No such property: save for class: JsecRole
Class: ProjectController
At Line: [28]
Code Snippet:
27: println "###about to create project roles"
28: userManagerService.createProjectRoles(project)
29: userManagerService.addUserToProject(session.user.id.toString(), project, 'owner')       
        }
    }
} 
```

堆栈跟踪如下：

```
org.codehaus.groovy.runtime.InvokerInvocationException: groovy.lang.MissingPropertyException: No such property: save for class: JsecRole

    at org.jsecurity.web.servlet.JSecurityFilter.doFilterInternal(JSecurityFilter.java:382)

    at org.jsecurity.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:180)

Caused by: groovy.lang.MissingPropertyException: No such property: save for class: JsecRole

    at UserManagerService.createProjectRoles(UserManagerService.groovy:9)

    at UserManagerService$$FastClassByCGLIB$$6fa73713.invoke(<generated>)

    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)

    at UserManagerService$$EnhancerByCGLIB$$fcf60984.createProjectRoles(<generated>)

    at UserManagerService$createProjectRoles.call(Unknown Source)

    at ProjectController$_closure4.doCall(ProjectController.groovy:28)

    at ProjectController$_closure4.doCall(ProjectController.groovy)

    ... 2 more 
```

任何帮助表示赞赏。

谢谢莎拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T20:55:05.373

我通过删除我的数据库并创建一个新数据库来解决我的问题。我认为当我更改域对象时，我的数据库中的某些字段没有正确映射。不过，该错误并没有真正将我指向这个方向！

莎拉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-29T14:03:17.817

这个问题在 Grails 邮件列表上的[这个线程中进行了讨论。](http://www.nabble.com/No-such-property:-save-for-class-...-td23667707.html)它应该在 Grails 1.2 中修复。Grails 早期版本的解决方法是将以下内容添加到 Bootstrap.groovy

```
JsecRole.get(-1) 
```

# asp.net-mvc - ASP.Net MVC 和验证消息

> ID：1012038
> 
> 赞同：0
> 
> 时间：2009-06-18T10:53:57.260
> 
> 标签：asp.net-mvc

我正在尝试处理 ASP.Net MVC 中的验证消息。我有以下观点

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master"  Inherits="System.Web.Mvc.ViewPage" %>

<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">

    <h2>Create User</h2>

    <%= Html.ValidationSummary("Create was unsuccessful. Please correct the errors and try again.") %>

    <% using (Html.BeginForm()) {%>

        <fieldset>
            <legend>Fields</legend>
            <p>
                Username : <%= Html.TextBox("Username") %>
            </p>
            <p>
                Forename : <%= Html.TextBox("Forename") %>
                <%= Html.ValidationMessage("Forename", "*") %>
            </p>
            <p>
                Surname : <%= Html.TextBox("Surname","") %>
                <%= Html.ValidationMessage("Surname", "*") %>
            </p>
            <p>
                <input type="submit" value="Create" />
            </p>
        </fieldset>

    <% } %>

    <div>
        <%=Html.ActionLink("Back to List", "Index") %>
    </div>

</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="head" runat="server">
    <title><%= ViewData["ProjectTitle"] %> - Create User</title>
</asp:Content> 
```

然后我在我的控制器中有这个 post 方法，如果 surname 字段为空白，它应该显示一条错误消息，我意识到这个函数中没有其他逻辑我只是试图让我的头部验证。

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Create(FormCollection formValues)
    {
        if (formValues["Surname"] == string.Empty)
            ViewData.ModelState.AddModelError("Surname", "No way");
        return View("Create");
    } 
```

当我运行它并单击以保存用户时，Create 方法运行良好并添加错误，但随后应用程序崩溃，它突出显示视图中创建姓氏文本框的行并显示“未设置为对象实例” . 如果我在姓氏文本框中输入一些内容并且没有添加错误，它运行良好。

我猜我错过了一些非常简单但可以解决的问题。

有任何想法吗？

谢谢

加文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T11:21:40.073

您是否尝试删除 TextBox 上的第二个参数？它将在 ViewData 中查找空键。

下面的行

```
Surname : <%= Html.TextBox("Surname","") %> 
```

需要像

```
Surname : <%= Html.TextBox("Surname") %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-19T07:51:19.103

我想我找到了一个解决方案，将下面的 setModelValue 行添加到我的方法之上，设置错误的行使其工作。

```
 ModelState.SetModelValue("Username", new ValueProviderResult(ValueProvider["Username"].AttemptedValue, formValues["Username"], System.Globalization.CultureInfo.CurrentCulture));
            ModelState.AddModelError("Username", "Invalid Username"); 
```

如果有人能解释为什么这会很好，如果没有，我明天会接受这个答案。除非我真的必须这样做，否则我宁愿不必在我验证的任何领域都这样做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-06-19T11:45:14.637

您应该在 if 语句中测试 Null 或空，

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Create(string Username, string Surname,  string Forename)
{
  if (String.IsNullOrEmpty(Surname))
  {
     ModelState.AddModelError("Surname", "No way");
  }

  return View();
} 
```

# resharper - StyleCop，优点/缺点

> ID：1012042
> 
> 赞同：3
> 
> 时间：2009-06-18T10:54:37.867
> 
> 标签：resharper, stylecop

[StyleCop](http://stylecop.codeplex.com/)有用吗，它的优缺点是什么？

我还下载了 StyleCop，Resharper StyleCop。

我正在使用 resharper，它有自己的编码标准，而 StyleCop 也有自己的，我很困惑将使用哪些规则？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-21T04:28:38.047

我发现 StyleCop 对于在整个开发团队中保持一致性非常有用。它不会提高代码的功能价值，但会提高易读性并消除您在协作环境中遇到的许多细微差别。

至于有很多不适用的规则，我发现最好的方法就是在机器级别关闭那些你不想遵循的规则。然后，您可以随时与其他人共享此配置文件，以使整个团队遵循相同的规则集。

至于 ReSharper，规则中有一些交叉，但其主要目的是提高编码效率，而不是遵守一组格式规则。另一件事是 ReSharper 是一个仅限 IDE 的工具，而 StyleCop 可以在 Visual Studio 之外与 msbuild 一起使用。默认情况下，ReSharper 和 StyleCop 违反规则都会显示，因此您只需选择要遵守哪些规则以及要禁用哪些规则。

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-18T12:02:32.333

我发现 ReSharper 4.5 本身就相当不错。您可以下载[StyleCop for ReSharper](http://www.codeplex.com/StyleCopForReSharper)以获取两者。但是，我发现我经常花更多的时间来配置 StyleCop 以忽略规则，而不是我从中获得的价值。

# coding-style - 用于 MVC 应用程序的 StyleCop

> ID：1012047
> 
> 赞同：1
> 
> 时间：2009-06-18T10:55:59.347
> 
> 标签：coding-style, stylecop

我们计划将[StyleCop](http://stylecop.codeplex.com/)用于我们的 MVC 应用程序。有人用过 StyleCop 的 MVC 吗？如果我能得到使用风格警察的利弊，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T11:00:27.200

我一直在使用 StyleCop 和我一直在编写的应用程序软件，它是执行标准编码风格的好工具。要接受的最重要的事情是一种态度，一般来说，一种风格与另一种风格一样好——没有一种风格在客观上是优越的。有了这种简单的理解，StyleCop 最终将成为一个强大的工具，使代码阅读、导航和维护更简单。

我还没有真正遇到过 stylecop 的真正缺点。我怀疑有些人可能会声称它的样式是不可配置的，除了一个特定的规则是否被强制执行为一个骗局，但我不认为它是。该工具的存在是为了全面实施统一的样式，如果您可以将其配置为是否需要`this.`前缀，那么这将违背目的。

# windows - 突出显示 Win32 Edit 控件以指示它是现在要填充的控件

> ID：1012053
> 
> 赞同：1
> 
> 时间：2009-06-18T10:59:33.020
> 
> 标签：windows, user-interface, winapi

我有一个 Win32 GUI 应用程序，它有几个编辑控件（普通的旧“EDIT”类名）。

逻辑是用户要填写应用程序选择的编辑框。为了更清楚现在要填充哪个，我想以某种方式突出显示“当前”编辑框。然后，当用户完成输入并要求应用程序继续时，编辑框将不得不再次变为“正常”。

理想的方法是用选择的颜色绘制其背景。我怎样才能实现这个或类似的选择 - 也许我可以暂时替换用于绘制控件的画笔？如果无法使用编辑控件，那么从 Win2k 开始的 Windows 中可用的替换控件有哪些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-18T11:11:54.760

您可以在编辑控件的父窗口中处理`WM_CTLCOLOREDIT` [通知](http://msdn.microsoft.com/en-us/library/bb761691(VS.85).aspx)。当将要绘制编辑控件时发送通知。所以一般来说，你会使用`RedrawWindow`or 东西来强制重绘，然后处理不可避免的控制颜色通知。在此，您设置与通知一起传入的设备上下文的前后颜色：

```
LRESULT OnControlColorEdit(HWND hwnd, DWORD msg, WPARAM wParam, LPARAM lParam)
{
   if( !toHighlight ) {
       return DefWindowProc( hwnd, msg, wParam, lParam );
   }
   HDC dc = reinterpret_cast<HDC>(wParam);
   ::SetBkColor(dc, whatever);
   ::SetTextColor(dc, whatever);
   HBRUSH brush = // create a solid brush of necessary color - should cache it and destroy when no longer needed
   return reinterpret_cast<LRESULT>( brush );
} 
```

# c# - 在 Visual Studio 2008 中将 Soap 标头添加到 Soap 请求

> ID：1012054
> 
> 赞同：3
> 
> 时间：2009-06-18T11:00:13.817
> 
> 标签：c#, visual-studio-2008, web-services, soap, asmx

我正在尝试使用第三方网络服务（所以我无权访问网络服务代码）。在 Visual Studio 2008 中，我创建了一个新的网站项目（ASP 和 c#），并添加了 Web 引用（不是 Web 服务！所以我猜它不是 WCF 服务......对吗？）。

问题是，从 Web 服务的文档中，我知道每个soap 请求都必须使用以下信封和标头发送，你能告诉我如何在我的Soap 请求中添加它吗？我发现的所有解决方案都需要修改 Web 服务源或代理，但我不能这样做，因为我无权访问 Web 服务源，并且 Visual Studio 2008 中客户端中的 Web 服务代理是只读的临时文件！

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<soap:Header>
<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" soap:mustUnderstand="1">
<wsse:UsernameToken xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<wsse:Username>gimme.data@stats.com</wsse:Username>
<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">Ima5tatto</wsse:Password>
</wsse:UsernameToken>
</wsse:Security>
</soap:Header>
<soap:Body xmlns:ns2="http://neighbourhood.statistics.gov.uk/nde/v1-0/discoverystructs">
<ns2:AreaAtLevelElement>
<AreaIdWithLevelType>
<AreaId>276704</AreaId>
<LevelTypeId>12</LevelTypeId>
</AreaIdWithLevelType>
</ns2:AreaAtLevelElement>
</soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T15:24:08.043

[您可以使用端点元素中的](http://msdn.microsoft.com/en-us/library/ms731320.aspx)[headers](http://msdn.microsoft.com/en-us/library/ms731749.aspx)元素将标头静态添加到配置文件中的消息。headers 元素的每个子元素都将按原样复制到消息的标题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-06-04T21:14:47.350

我正在为同样的问题而苦苦挣扎，到目前为止，我已经编写了一个[消息检查](http://msdn.microsoft.com/en-us/library/aa717047.aspx)器来访问 SOAP 标头，尽管我不确定如何在无需手动操作的情况下获取 wsse:security 内容。我希望能够使用 WS-Security 模式（以及 SAML 模式）来构建 wsse:security 东西......

下面是我的消息检查器代码的价值，如果我解决了这个问题，我会在这个线程上发布它。

这是我将行为添加到客户端的地方：

```
client.Endpoint.Behaviors.Add(new CustomBehavior());
msgOutput = client.ProvideAndRegisterDocumentSetXDR(msgInput); 
```

And here is the message inspector and custom behavior:

```
public class CustomMessageInspector : System.ServiceModel.Dispatcher.IClientMessageInspector
{
    public void AfterReceiveReply(ref WCF.Message reply, object correclationState)
    {
    }

    public Object BeforeSendRequest(ref WCF.Message request, IClientChannel channel)
    {
        MessageHeaders headers = new MessageHeaders(MessageVersion.Soap11WSAddressing10);
        MessageHeader header = MessageHeader.CreateHeader("Security", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", "");
        request.Headers.Add(header);
        return null;
    }
}

public class CustomBehavior : System.ServiceModel.Description.IEndpointBehavior
    {
        public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRunTime)
        {
            CustomMessageInspector inspector = new CustomMessageInspector();
            clientRunTime.MessageInspectors.Add(inspector);
        }

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
        {
        }

        public void Validate(ServiceEndpoint endpoint)
        {
        }
    } 
```

# iphone - 我应该使用哪个视图来显示来自 TabBar 应用程序的大照片

> ID：1012056
> 
> 赞同：0
> 
> 时间：2009-06-18T11:00:40.633
> 
> 标签：iphone, view, uitabview

嗨，我使用了带有 4 个选项卡的选项卡栏应用程序，并且我已经从 IB 设置了导航控制器。

现在对于我的[照片视图](https://stackoverflow.com/questions/1005420/how-facebook-iphone-app-shows-photos-very-fast-from-web)，当用户从列表中选择照片时，它应该显示大照片。对于较大的照片，我应该使用哪个视图？如果我将 self.view 它将同时显示标签栏和导航栏。如果我会给 tabbarcontroller..view 那么导航控制器不会显示。当用户点击图像时，我需要导航控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T13:10:06.877

如果您希望标签栏在用户点击图像时消失，您可能应该将界面基于子类 UINavigationController 并手动插入标签栏（没有控制器）。您必须在 UINavigationController 子类中处理来自标签栏的事件。当用户点击图像时，您可以简单地将其设置在由单独的 UIViewController 控制的 UIImageView 中，并将该控制器推送到导航控制器的堆栈中。

（网上有关于如何结合导航和标签栏界面的教程。您可能会找到其他方法来做您需要的事情）。

# linux-kernel - 多个网卡的相同驱动程序——性能瓶颈？

> ID：1012061
> 
> 赞同：3
> 
> 时间：2009-06-18T11:02:10.083
> 
> 标签：linux-kernel, kernel, driver, ethernet, linux-device-driver

我正在为多个英特尔网卡（英特尔 EXPI9402PT，基于 82571EB 芯片）使用驱动程序 e1000e。问题是当我尝试在多个接口上使用最大速度（1GB）时，每个接口的速度开始下降。

我在内核空间中有自己的驱动程序，旨在仅发送给定的数据包。它只是通过以下方式分配数据包：

```
skb = dev_alloc_skb(packet->len); 
```

他们通过以下方式发送它们：

```
result = dev->hard_start_xmit(skb,dev); 
```

每个接口都有**自己**的驱动程序实例。

对于一个接口，我得到：120435948 字节/秒。

对于两个接口，我得到：61080233 字节/秒和 60515294 字节/秒。

对于三个接口，我得到：28564020 字节/秒、27111184 字节/秒、27118907 字节/秒。

可能是什么原因？hard_start_xmit 函数是可重入的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T11:17:27.213

这很可能是由于主板上的带宽不足。

如果您试图通过速度低于 3 Gb/s 的总线传输 3 Gb/s 的信息，就会遇到问题。这些卡在什么类型的公共汽车上？

可能有修复，但我认为这是电路板的物理限制，不一定是您的驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T20:03:01.750

当我将 2 个接口的数字相加时，最终结果略大于单个接口的输出。对我来说，这意味着系统在使用这两个界面时效率会更高一些。一个可能的原因可能是更好的 CPU 利用率或总线利用率。但请注意，结果只是稍微好一点，可能表明导致瓶颈的资源限制为 121MB/s。一旦负载（3 个活动接口）超过此限制，性能将急剧下降至 82MB/s。

如果没有一些额外的测量，很难确定确切的原因，但我的猜测是

1.  CPU 受限：向系统添加多个 CPU 将排除此问题。
2.  内存受限：请记住，即使设备在 x4 或 x8 插槽中，与主内存（即 SKB 所在的位置）的连接也可能无法承受该负载。
3.  中断限制：每秒的数据包可能足够高，以至于切换进出中断上下文会损害性能。这不太可能，因为大多数驱动程序都擅长中断合并，但如果可能，将驱动程序切换到轮询模式以排除这种情况。

# java - 如何在 jaxb 中注释类型集合的成员

> ID：1012064
> 
> 赞同：1
> 
> 时间：2009-06-18T11:03:14.900
> 
> 标签：java, jaxb, marshalling

我已成功编组以下课程

```
@XmlRootElement(name = "Field")
private static class MyField {       
    @XmlAttribute(name = "Name")
    String name;
    @XmlElement(name = "Size")
    int size;
    ....} 
```

现在我想让我的容器类保存多个 Field 实例，所以我用以下方式声明了一个类：

```
private static class MyFieldsCollection {     
    private Collection<MyField> fields = new LinkedList<MyField>();

    public MyFieldsCollection() {}
    ....} 
```

当我只是尝试编组容器字段时，我收到以下错误：

*此上下文已知类 java.util.LinkedList 或其任何超类*

如何注释字段成员，以便将容器类编组为字段集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T16:37:36.747

您不应将 MyField 类注释为 @XmlRootElement，因为它不是 xml 根元素。我认为您可以使用 @XmlType 对其进行注释，也可以不对其进行注释。您可以尝试将@XmlElement 标记放在类中“字段”属性的**getter中。**如果它有效，您的 XML 将如下所示：

```
<MyFieldsCollection>
   <fields name="name1" size="size1"/>
   <fields name="name2" size="size2"/>
</MyFieldsCollection> 
```

如果它不起作用，并且是在黑暗中拍摄，请尝试将“集合”的类型更改为“列表”以检查它是否有一些不同。您使用的是什么版本的 Java？您用来序列化对象的代码是什么样的？

# winforms - 公共方法或订阅查看事件

> ID：1012069
> 
> 赞同：4
> 
> 时间：2009-06-18T11:05:51.450
> 
> 标签：winforms, mvp

我编写了一个 MVP 项目，其中 View 是一个实现我的 IView 接口的 WinForm。我正在审查代码，尽我所能改进它，并想询问您对视图和演示者如何交互的想法。您认为以下哪项是最佳实践？

1.  公开演示者类的方法以供视图使用。（即公开）。
2.  让演示者监听 View 类引发的事件。

例如，我的 MVP 使用通过串行端口进行通信的服务。为了连接到远程设备，我的视图调用公共 Presenter 方法 Connect()，然后调用适当的服务方法。

引发 Connect() 事件并让演示者监听它会更好吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-18T11:15:17.450

一般来说，我的工作是让视图依赖于演示者，而演示者依赖于模型。这意味着多个演示者可以使用同一个模型，并且我的多个视图（不同的 UI 布局或 Winforms 与 Web 等）可以使用同一个演示者。为了促进这一点，视图调用演示者上的公共方法并监听来自演示者的事件以说明数据何时发生变化。

例如，为什么您可能希望以这种方式工作，请想象一个界面有两个视图，一个用于初学者用户，一个用于专家用户，初学者视图显示专家命令的子集。如果相同的演示者用于这两个视图，那么初学者视图将需要公开所有专家命令的事件，因为演示者需要它们在那里以便它可以绑定到它们——即使它们永远不会被触发。另一方面，演示者可以公开所有专家选项的方法，而初学者视图永远不会调用它们，这意味着视图和演示者都没有实现未使用的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-01-20T08:58:01.840

我在这里要遵循的准则是-“演示者中的公共方法应该是无参数的。视图对象应该只访问演示者的无参数方法。另一个选项是视图可以定义演示者可以订阅的事件。无论哪种方式，都不应该有参数传递。” . 接受建议和评论。

# image - 使用 .ashx 的图像

> ID：1012073
> 
> 赞同：1
> 
> 时间：2009-06-18T11:06:56.830
> 
> 标签：image, asp.net-ajax, ashx

我正在使用 .ashx 检索图像，并将图像放置在 ajax 更新面板中，当将新图像添加到表单时它会检索图像，但是当我们更改图像时，它不会更新图像，它甚至不会调用 . ashx 文件，但是当我刷新浏览器时它可以正常工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T11:10:14.483

听起来像一个缓存问题。尝试将[此处](http://www.developerfusion.com/code/1160/preventing-caching/)找到的一些行添加到您的 ashx 文件中，它应该有望强制浏览器重新请求图像。（我知道该链接是针对 ASP 而不是 ASP.NET，但是像 Response.Expires = -1 这样的东西应该可以工作）

或者，您可以更改更新面板中图像的路径吗？如果您只是在其末尾添加一个随机参数，浏览器会将其视为新请求（我们在执行此操作时使用当前日期/时间作为参数。ASP.NET 将忽略该参数，除非您明确引用它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-08-18T18:05:04.713

做这样的事情：

var sPath = "../../handlers/ProcessSignature.ashx?type=View&UserID=" + userID + "&d=" + (((1 + Math.random()) * 0x10000) | 0).toString(16 ).substring(1);

这会将 4 个字符的字母数字字符串放在查询字符串的末尾。这不是必需的，但它会强制浏览器获取该图像的最新版本，因为 URL 不同。

我尝试了上述方法，一些浏览器忽略了标题。我把所有这些都扔进去了，Chrome/FireFox 3 没有尝试更新。

IE7有时工作

IE6只是摆弄着它的拇指，问它为什么还存在。

更改上面的路径将在所有浏览器中修复它。

# ruby - 在将哈希值打印到表格内的 pdf 上之前，如何对哈希值进行排序

> ID：1012076
> 
> 赞同：-1
> 
> 时间：2009-06-18T11:09:09.930
> 
> 标签：ruby

我有一个名为每页单个用户 pdf 的操作，它与两个模型通信，用户模型从数据库中检索信息，但仅针对所有用户的特定信息，然后它获取信息并将其发送到模型报告，然后当我检查每个用户的属性时，它以我没有从模型用户调用它的方式显示，它获取每一对并将其以不同的顺序放置，因此当我将信息写入 pdf 上的表格时，它会显示它不好，就像姓名首字母可能是我桌子上的最后一条记录，而手机可能是第一条……我必须为每个用户的信息创建一个新页面……

我的报告代码如下所示：

> def self.generate_individual_pdf（人，居民，用户，房地产=无，标题=无）

```
pdf = PDF::Writer.new
title = !title ? "Report" :title
pdf.select_font "Times-Roman"
pdf.text "<em>Compiled By: #{user.presentation_name}</em> <em>Estate: #{estate.name}</em>                                       <em>Created On: #{Time.now.strftime('%d/%m/%Y %H:%M')}</em>", :justification => :center
   x = 0
25.times do
  pdf.text ""+"                        "
  x+=1
  puts x
end
pdf.text "<em>User Report For: #{estate.name}</em> ", :font_size => 18, :bold => true, :justification => :center
if estate.logo
  pdf.image "#{RAILS_ROOT}/public"+estate.logo.public_filename,:width => 100, :height => 100, :resize => 1.1, :justification => :center
end
y = 0
#loop people to create table for every person
 people.each do |p| 
  pdf.start_new_page 
  pdf.text"                   "+p.Title.to_s+"  "+p.Firstname.to_s+"  "+p.Lastname.to_s, :font_size => 12, :justification => :center
  pdf.text ""+"                        "
  pdf.text ""+"                        "
  pdf.text "Please verify if your details below are correct, and rectify them in the third column of the table.", :font_size => 8
  pdf.text ""+"                        "
  table = PDF::SimpleTable.new
  table.column_order.push(*["head1","head2","head3"])
  headings = ["head1","head2","head3"]
  headings.each do |h|
    table.columns[h] = PDF::SimpleTable::Column.new(h)
    table.columns[h].heading = h.humanize
  end
  #display tables
   table.show_headings = false
   table.orientation = :right
   table.position = :left
   data = []
    p.attributes.each_pair do |h|
     data << { "head1" => h[0], "head2" => h[1], "head3" => "                                "}
   end

   table.data.replace data
   table.render_on(pdf)

     i = 0
   28.times do
    pdf.text ""+"                        "
    i+=1
    puts i 
  end
  pdf.text "Kind Regards"+ "                   "+p.Title.to_s+"  "+p.Firstname.to_s+"  "+p.Lastname.to_s, :font_size => 11
  pdf.text ""+"                        "
  pdf.text "Signature                          "+"......................................."

end 
```

然后它在循环通过 p.attribute.each_pair do |h| 时产生输出 data << {"head1" => h[0], "head2" => h[1], "head3" => "*这应该是 nil* "} end

请伙计们，我一直在尝试使用所有这种排序，但我无法得到正确的答案..任何可以提供帮助的人请随意..提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T11:48:46.963

Hashes in ruby are inherently unordered objects. You aren't guaranteed to get data out of them in the same order you put it in.

It sounds like the pairs of attributes are coming out in a random order (or at least not the order you want). One possible way of dealing with this is...

```
p.attributes.keys.sort do |key|
  data << { "head1" => key, "head2" => p.attributes[key], "head3" => nil }
end 
```

This will give you back all your attributes sorted alphabetically by value name

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-19T12:01:21.813

Ruby 1.9 将包含有序哈希，但是如果您使用的是 1.8，那么请查看 ruby​​ facets 中的字典类。（[http://facets.rubyforge.org/doc/api/more/classes/Dictionary.html](http://facets.rubyforge.org/doc/api/more/classes/Dictionary.html)）

这帮助我在过去做到了这一点。

# mysql - 我怎样才能获得与我的价值相距一定日期的所有结果？

> ID：1012083
> 
> 赞同：2
> 
> 时间：2009-06-18T11:11:51.263
> 
> 标签：mysql, datetime

使用 php 我想进行以下 mysql 查询

```
SELECT * FROM TABLE WHERE AUTODATE > (24HRS DIFFERENCE FROM CURRENT DATE) 
```

`AUTODATE var CURRENT_TIMESTAMP`具有格式 Ymd H:i:s 的值

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T11:15:09.200

你可能想要

```
SELECT ... WHERE yourDateField > Curdate() - 间隔 1 天
```

或者可能

```
SELECT ... WHERE yourDateField > Now() - 间隔 24 小时
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T11:15:47.810

```
WHERE DATE_SUB(CURDATE(),INTERVAL 1 DAY) <= autodate; 
```

阅读[手册](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)。

# c# - 调用基本构造函数传入一个值

> ID：1012085
> 
> 赞同：11
> 
> 时间：2009-06-18T11:12:02.077
> 
> 标签：c#

```
public DerivedClass(string x) : base(x)
{
  x="blah";
} 
```

此代码会调用值为 x 的基本构造函数作为“blah”吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-06-18T11:18:36.993

基本调用总是首先完成，但你*可以*让它调用一个静态方法。例如：

```
public Constructor(string x) : base(Foo(x))
{
    // stuff
}

private static string Foo(string y)
{
    return y + "Foo!";
} 
```

现在如果你打电话

```
new Constructor("Hello "); 
```

然后将使用“Hello Foo！”调用基本构造函数。

请注意，您*不能*在正在构造的实例上调用实例方法，因为它还没有“准备好”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-18T11:13:05.553

不，`base`调用我们在执行构造函数体之前执行：

```
//pseudocode (invalid C#):
public Constructor(string x) {
   base(x);
   x = "blah";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T11:13:15.083

不，基本构造函数总是在当前构造函数之前调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T11:14:04.817

不，它将使用传递给派生类构造函数的值调用它。在执行派生类构造函数的主体之前，总是（显式或隐式）调用基类构造函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T11:17:17.493

不，不会的。在执行 DerivedClass 构造函数**之前**，基本构造函数将传递 x 中的字符串。这可能有效：

```
public DerivedClass(string x) : base("Blah")
{ } 
```

我不确定，但你应该能够在调用基本构造函数时调用任何方法/getter，如下所示：

```
public DerivedClass(DateTime x) : base(DateTime.Now)
{ } 
```

# linq - 如何将 TypeMock 隔离器与 Linq to SQL 和 DataContext 一起使用

> ID：1012088
> 
> 赞同：0
> 
> 时间：2009-06-18T11:12:52.807
> 
> 标签：linq, unit-testing, mocking, datacontext, typemock

我正在使用 TypeMock Isolator 来伪造我的 DataContext 上的表，如下所示：

```
Isolate.Swap.CallsOn(ctx.GetTable<TTable>()).WithCallsTo(content); 
```

我现在可以在每个测试中用任意数据填充“数据库”。为了将测试场景的有意义的数据放入 DataContext 我通常必须创建 3-5 个对象。

现在，问题是我的业务逻辑使用 Linq 生成的关系属性来获取客户订单。我现在不仅要新建对象，还要连接它们。有人知道这个问题的某种解决方案吗？我花了 20 行来设置对象图，然后测试 5 行。这有点奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T19:02:24.707

不确定是否`Swap.CallsOn`是解决此问题的正确方法。首先伪造一个根对象。当你这样做时，默认情况下所有子对象都是伪造的。因此无需更新或连接它们。您只需设置对您的测试重要的行为。

如果可以，请发布您要伪造的代码。

# wpf - 如何让 StackPanel 的宽度与其内容一样宽？

> ID：1012106
> 
> 赞同：0
> 
> 时间：2009-06-18T11:16:33.643
> 
> 标签：wpf, xaml, stackpanel

以下模板在彩色框中显示**动态信息**。

但是，该框**始终是 DockPanel/屏幕的全宽**。

我可以在 Border 元素中放置一个**固定的宽度**，但是很长的客户名称可能会被截断。

**我如何告诉 Border 它应该根据其内容的宽度来扩展和收缩其宽度，就像`<table>`HTML 中的元素一样？**

**HTML：**

```
<table>
    <tr>
        <td style="background-color: #eee; padding: 5px">
            the table will be as wide as this text
        </td>
    </tr>
</table> 
```

**XAML：**

```
<Window.Resources>
    <DataTemplate x:Key="CustomerTemplateShow">
        <Border CornerRadius="5" Background="#eee" Padding="5">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding FirstName}"/>
                <TextBlock Text=" "/>
                <TextBlock Text="{Binding LastName}"/>
            </StackPanel>
        </Border>
    </DataTemplate>
</Window.Resources>

<DockPanel LastChildFill="False" Margin="10">
    <ContentControl 
        DockPanel.Dock="Top"
        Content="{Binding SelectedCustomer}" 
        ContentTemplate="{StaticResource CustomerTemplateShow}"/>
</DockPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T11:59:28.097

最简单的方法是设置边框的 Horizo​​ntalAlignment="Center"（或左或右，无论您喜欢哪种布局）。

# c# - 如何在 C# 中做一个没有表单的应用程序？

> ID：1012113
> 
> 赞同：8
> 
> 时间：2009-06-18T11:17:55.153
> 
> 标签：c#, windowless

> **可能重复：**
> [使用 .NET 编写 Windows 系统托盘应用程序](https://stackoverflow.com/questions/995195/writing-a-windows-system-tray-application-with-net)

嗨，
我正在.NET 中编写一个应用程序，我不想把它变成一个 Windows 界面。
我记得前段时间我通过继承 ApplicationContext 类来做到这一点，但现在我无法实现它。

我怎么能做到？

谢谢！

**编辑：** 这是一个由通知图标管理的应用程序。它必须出现在系统时钟附近的图标而不是表格。我正在这样做：

```
class Sync : ApplicationContext
{
    public Sync()
    {
        ...
    }
}

[STAThread]
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new Sync());
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-06-18T11:29:34.990

(obsolete now that you've edited the question to state systray; left for reference only)

If you want an exe without any UI (not even a console), but without it being a service etc - then write a windows forms app, but just don't show any forms! The fact that it is a winform app simply means you don't get a console window - but no UI is shown except that which you write. Look at the `Main` method (usually in `Program.cs` in the VS templates) to see what I mean.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-18T11:20:45.443

您可以编写控制台应用程序或服务或类似的东西。你到底想做什么？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-18T11:21:10.700

使用[控制台应用程序](http://msdn.microsoft.com/en-us/magazine/cc164014.aspx)或[Windows 服务](http://www.developer.com/net/csharp/article.php/2173801)怎么样？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T11:37:44.957

see here: [http://bluehouse.wordpress.com/2006/01/24/how-to-create-a-notify-icon-in-c-without-a-form/](http://bluehouse.wordpress.com/2006/01/24/how-to-create-a-notify-icon-in-c-without-a-form/)

Edit: added the code in the link to this answer in case the link dies. Credit goes to the author for this code.

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Text;
using System.Windows.Forms;
using System.ComponentModel;
using System.Drawing;

class ControlContainer : IContainer
{
    ComponentCollection _components;

    public ControlContainer()
    {
        _components = new ComponentCollection(new IComponent[] { });
    }

    public void Add(IComponent component) { }
    public void Add(IComponent component, string Name) { }
    public void Remove(IComponent component) { }

    public ComponentCollection Components
    {
        get { return _components; }
    }

    public void Dispose()
    {
        _components = null;
    }
}

class MainEntryClass
{
    static void Main(string[] args)
    {
        SomeClass sc = new SomeClass();
        Application.Run();
    }
}

class SomeClass
{
    ControlContainer container = new ControlContainer();
    private System.Windows.Forms.NotifyIcon notifyIcon1;

    public SomeClass()
    {
        this.notifyIcon1 = new NotifyIcon(container);
    }
} 
```

# eclipse - eclipse 在同步时显示未更改的文件

> ID：1012114
> 
> 赞同：3
> 
> 时间：2009-06-18T11:18:14.793
> 
> 标签：eclipse, merge, commit

当我对文件进行同步或尝试提交时，还会显示未更改的文件。只有当我从另一个工作区合并到我得到这些文件的工作区时。

当我查看这些文件时，它们与 svn 上的文件没有区别。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-11T09:08:49.960

似乎新版本的 Eclipse 解决了这个问题！

合并时，您将获得一个 4 步向导，并且在最后一步中，有一个选项“忽略祖先”

如果单击此按钮，则不会将其他文件带入此合并中，并且问题不存在。

太好啦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T12:20:39.207

您是否检查了文件上的 SVN**属性**是否已更改？`svn:mergeinfo`SVN在使用`svn merge`命令时将语义信息（合并的修订范围）记录在一个属性中。

在命令行或 Eclipse Team 上使用 svn merge 都没有关系。请阅读有关[mergeinfo](http://svnbook.red-bean.com/en/1.5/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.mergeinfo)的文档以了解发生了什么。该属性将在存储库中跟踪您的合并历史记录（比 CVS 等显着改进）。

（评论后编辑）

# visual-c++ - 斯坦福工程无处不在 CS106B 图书馆

> ID：1012119
> 
> 赞同：2
> 
> 时间：2009-06-18T11:19:03.340
> 
> 标签：visual-c++

我目前是一名 C# 程序员，并且有兴趣了解更多关于 C++ 和数据结构的知识。我发现通过斯坦福工程无处不在计划在线免费提供的 CS106B 课程似乎很合适。

我尝试安装他们用于课程的库文件，并不断收到一条消息，提示我必须安装 Visual Studio 2005 才能运行安装文件。我没有 2005，但我尝试过 vc++ 2008 和 vc++2005 的 express 版本。有什么办法可以让我安装正确的文件？

包含库的 zip 文件带有两个文件，一个 exe 和一个 msi。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:10:49.087

通过使用我在这里找到的一些信息让它工作：[http ://www.functionx.com/visualc/libraries/staticlib.htm](http://www.functionx.com/visualc/libraries/staticlib.htm)

我正在使用 Visual C++ 2008 Express。我是这样做的：

1.  从当前学期的 CS106B 课程网站下载作业 1 的 PC 入门代码 ZIP 文件。 [http://www.stanford.edu/class/cs106b/](http://www.stanford.edu/class/cs106b/)在该文件中，您会找到一个名为“StanfordCPPLib”的文件夹。在该文件夹中，您需要 StanfordCPPLib.lib 和要包含的 *.h 文件。
2.  在 Visual Studio 中，创建一个新项目（文件 -> 新建 -> 项目）。选择一个 Win32 控制台应用程序，选择一个名称，然后单击下一步。
3.  当应用程序向导弹出时，单击下一步（不是完成）。在应用程序设置中，选中标记为“空项目”的框。单击完成。
4.  在解决方案资源管理器中，右键单击 Source 文件夹并创建一个新的 .cpp 文件。（添加 -> 新项目 -> 代码 -> C++ 文件）
5.  在 Windows 资源管理器中找到新项目的文件夹。在该文件夹中，您应该能够找到刚刚创建的新 .cpp 文件。
6.  将之前下载的 StanfordCPPLib.lib 和所需的 *.h 文件粘贴到包含新 .cpp 文件的同一文件夹中。
7.  最后，您需要将库添加到我们的新项目中。在 Visual Studio 中，使用主菜单，单击项目 -> 添加现有项。该对话框应默认为您刚刚粘贴 StanfordCPPLib.lib 的项目文件夹。选择 StanfordCPPLib.lib 并单击添加。

您现在应该能够为`#include "example.h"`您复制到项目文件夹中的任何 .h 文件添加一个。

注意：由于您将使用斯坦福自定义库的较新版本，因此原始讲义和新库之间可能存在一些细微差别。例如，在使用 时`#include "simpio.h"`，讲义列出了一个名为 的函数`GetLine()`。在新库中，该函数的大小写不同：`getLine()`. 确保检查头文件的语法/用法是否正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-02-02T01:44:14.800

感谢Dani，在他的帮助下，我在win7上成功安装了vs2008上的库（express和professinal都可以）。在 Dani 的帮助下，到目前为止，我已经完成了 cs106X(winter2010) 中的前三个作业——life、ADT、boggle。我只是中国的一名本科生，非常感谢斯坦福大学的优秀教育和互联网的力量。 [http://abloggingattempt.blogspot.com/2010/05/stanford-cs106-lib-and-vs2008-express.html](http://abloggingattempt.blogspot.com/2010/05/stanford-cs106-lib-and-vs2008-express.html)

以下内容主要抄自Dani的博客。

斯坦福 CS106 Lib 和 VS2008 Express CS106B 是一个很棒的 CS 斯坦福课程，可以在线（例如 iTunes）以视频形式免费获得。所有作业和课程本身都使用内部开发的库（不确定它是否有名称，cslib，cs106 lib，不知道），可在所有作业 zip 中使用，也可通过 Xcode/VS2005 向导安装进行安装。问题 - VS 自定义向导将仅安装在 VS2005 上（可能是存在较新版本但我找不到）。那么如何将 VS 向导移植到 VS2008 Express（专业版）？- 我得到了 2005 自定义向导设置，PCLibs-VS2005-ADT-Installer.zip 并使用了一个小工具，LessMSIerables（通用提取器也很好用）来提取 msi 文件的内容。msi 包含四个文件夹，其中包含创建新自定义向导所需的所有内容。所以，

SourceDir |- 包括文件夹 |- 库文件夹 |- 项目文件夹 |- 向导文件夹

*   现在复制一些：
    1.  “包含文件夹”中的 CS106CPPInc 文件夹转到 C:\Program Files\Microsoft Visual Studio 9.0\VC\include （作为子文件夹！）
    2.  '库文件夹'\CS106CPPLib.lib 转到 C:\Program Files\Microsoft Visual Studio 9.0\VC\lib
    3.  'Wizard Folder\AppWiz\CS106 分配向导' 到 C:\Program Files\Microsoft Visual Studio 9.0\VC\VCWizards\AppWiz（意思是 CS106... 应该作为 AppWiz 的子文件夹出现）
    4.  “项目文件夹”中的三个文件将进入 C:\Program Files\Microsoft Visual Studio 9.0\VC\Express\VCProjects\Stanford。这三个文件之一，CS106 Assignment Wizard.vsz，需要编辑（一个文本文件），它的第二行应该变成：

向导=VsWizard.VsWizardEngine.9.0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-14T20:52:07.310

遇到了同样的问题。我在网上找到了 .h 和 .c 文件。

你可以在这里找到它们： [http ://www.ime.usp.br/~pf/Roberts/C-library/standard/cslib/](http://www.ime.usp.br/~pf/Roberts/C-library/standard/cslib/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T14:35:18.053

我建议直接去CS106B页面：

[http://www.stanford.edu/class/cs106b/](http://www.stanford.edu/class/cs106b/)

并抓住最新的任务。它们与 VS 2008 兼容。

SEE 的作业材料已过时（VS 2005）。视频中没有讨论这些作业，因此您不会错过任何内容。

只需从 CS106B 页面下载并在 VS 2008 中打开即可！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T13:03:30.743

通读[讲义 5P](http://see.stanford.edu/materials/icspacs106b/H05P-UsingVisualStudio.pdf)使安装程序看起来像是 VS2005 将创建的文件结构 - 特别是这句话：“运行（并退出）Visual Studio（如果它要求你，你可以继续注册你的副本）。重要的是在进行下一步之前，您至少已经完成了一次。”

尝试创建一个文件夹结构，例如：（在“我的文档”下）“Visual Studio 2005\Projects”，看看 setup.exe 是否可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-06-01T21:35:42.253

我正在使用visual studio express，我所做的只是解压缩它工作正常的文件.. [在这里我完成了CS106B任务](http://www.codingfriends.com/index.php/2010/06/01/cs106b-assignment-1-life-cycle/)以及该任务的完整压缩文件，我所做的只是解压缩来自 cs106b 网站的作业并在 Visual Studio Express 中打开 sln（解决方案）文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-06-16T06:21:21.303

unix 系统中没有可用于 cs106b 的 c++ 库。我希望他们在源代码中发布库。

# asp.net - ASP.NET 2 中的 ISO-8859-1 到 UTF8

> ID：1012120
> 
> 赞同：3
> 
> 时间：2009-06-18T11:19:13.420
> 
> 标签：asp.net, encoding, utf-8, iso-8859-1

我们有一个页面，它以 ISO-8859-1 将数据发布到我们的 ASP.NET 应用程序

```
<head>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
    <title>`Sample Search Invoker`</title>
</head>
<body>

<form name="advancedform" method="post" action="SearchResults.aspx">
    <input class="field" name="SearchTextBox" type="text" />
    <input class="button" name="search" type="submit" value="Search &gt;" />
</form> 
```

并在后面的代码中（SearchResults.aspx.cs）

```
System.Collections.Specialized.NameValueCollection postedValues = Request.Form;
String nextKey;
for (int i = 0; i < postedValues.AllKeys.Length; i++)
{
    nextKey = postedValues.AllKeys[i];

    if (nextKey.Substring(0, 2) != "__")
    {
        // Get basic search text
        if (nextKey.EndsWith(XAEConstants.CONTROL_SearchTextBox))
        {
            // Get search text value
            String sSentSearchText = postedValues[i];

            System.Text.Encoding iso88591 = System.Text.Encoding.GetEncoding("iso-8859-1");
            System.Text.Encoding utf8 = System.Text.Encoding.UTF8;

            byte[] abInput = iso88591.GetBytes(sSentSearchText);

            sSentSearchText = utf8.GetString(System.Text.Encoding.Convert(iso88591, utf8, abInput));

            this.SearchText = sSentSearchText.Replace('<', ' ').Replace('>',' ');
            this.PreviousSearchText.Value = this.SearchText;
        }
    }
} 
```

当我们通过 Merkblätter 时，它会从 PostedValues[i] 中提取为 Merkblëtter 原始字符串字符串是 Merkbl%ufffdtter

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-18T11:45:24.130

你有这行代码： -

```
String sSentSearchText = postedValues[i]; 
```

帖子中的八位字节解码发生在这里。

问题是 META http-equiv 没有告诉服务器有关编码的信息。

~~您可以将 RequestEncoding="ISO-8859-1" 添加到 @Page 指令并停止尝试自己摆弄解码（因为它已经发生了）。~~

那也无济于事。看来您只能在 web.config 中指定请求编码。

最好完全停止使用 ISO-8859-1 并保留默认的 UTF-8 编码。使用限制性编码我看不到任何收获，只有痛苦。

**编辑**

如果似乎不可能更改发布表单的编码，那么我们似乎别无选择，只能自己处理解码。为此，在您的接收代码隐藏中包含这两个静态方法：-

```
private static NameValueCollection GetEncodedForm(System.IO.Stream stream, Encoding encoding)
{
    System.IO.StreamReader reader = new System.IO.StreamReader(stream, Encoding.ASCII);
    return GetEncodedForm(reader.ReadToEnd(), encoding);
}

private static NameValueCollection GetEncodedForm(string urlEncoded, Encoding encoding)
{
    NameValueCollection form = new NameValueCollection();
    string[] pairs = urlEncoded.Split("&".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);

    foreach (string pair in pairs)
    {
        string[] pairItems = pair.Split("=".ToCharArray(), 2, StringSplitOptions.RemoveEmptyEntries);
        string name = HttpUtility.UrlDecode(pairItems[0], encoding);
        string value = (pairItems.Length > 1) ? HttpUtility.UrlDecode(pairItems[1], encoding) : null;
        form.Add(name, value);
    }
    return form;
} 
```

现在而不是分配： -

```
postedValues = Request.Form; 
```

采用：-

```
postValues = GetEncodedForm(Request.InputStream, Encoding.GetEncoding("ISO-8859-1")); 
```

您现在可以从其余代码中删除编码 marlarky。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T11:39:23.003

我认为将您的编码添加到 web.config 中可能会解决您的问题：

```
<configuration>
   <system.web>
      <globalization
           fileEncoding="iso-8859-1"
           requestEncoding="iso-8859-1"
           responseEncoding="iso-8859-1"
           culture="en-US"
           uiCulture="en-US"
        />
   </system.web>
</configuration> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-03-23T17:41:02.740

我们遇到了和你一样的问题。这个话题一点也不直截了当。

第一个技巧是将发布数据的页面（通常与在 .NET 中接收数据的页面相同的页面）的**响应编码设置为所需的表单发布编码。**

但是，这只是提示用户浏览器如何解释从服务器发送的字符。用户可能会选择手动覆盖编码。并且，如果用户覆盖了页面的编码，则表单中发送的数据的编码也会更改（更改为用户设置的编码）。

不过有一个小技巧。如果您**`_charset_`**在表单中添加名称（注意下划线）的隐藏字段，大多数浏览器将使用发布表单时使用的字符集名称填写此表单字段。这个表单域也是 HTML5 规范的一部分。

因此，您可能认为您可以开始了，但是，当在您的页面中时，ASP.NET 已经对发送到表单的所有参数进行了 urldecode。因此，当您在字段中实际有值时，包含**Merkblätter**`_charset_`的字段的值已经被 .NET 错误解码。

 **你有两个选择：

1.  在相关的 ASP.NET 页面中，手动执行请求字符串的解析
2.  在 Application_BeginRequest 的 Global.asax 中，手动解析请求参数，提取`_charset_`字段。当你得到值时，设置`Request.ContentEncoding`为`System.Text.Encoding.GetEncoding(<value of _charset_ field>)`. 如果您这样做，您可以像往常一样读取包含**Merkblätter**的字段的值，无论客户端将值发送到什么字符集。

在上述任何一种情况下，您都需要手动读取`Request.InputStream`, 来获取表单数据。我建议将 Response Encoding 设置为 UTF-8 以使您接受的字符数量最多，然后在用户特别覆盖字符集时处理特殊情况，如上所述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-24T00:17:56.813

```
Function urlDecode(input)
 inp = Replace(input,"/","%2F")
 set conn = Server.CreateObject("MSXML2.ServerXMLHTTP")
 conn.setOption(2) = SXH_SERVER_CERT_IGNORE_ALL_SERVER_ERRORS
 conn.open "GET", "http://www.neoturk.net/urldecode.asp?url=" & inp, False
 conn.send ""
 urlDecode = conn.ResponseText
End Function 
```

为了加快速度，只需在您的数据库上为解码和编码的 url 创建一个表，然后在 global.asa application.on_start 部分读取它们。稍后将它们放在应用程序对象上。然后为该应用程序 obj 设置一个检查程序。在上述函数中，如果应用数组中不存在解码的 url，则从远程页面请求一次（提示：urldecode.asp 应该在不同的服务器上，请参阅： http: [//support.microsoft.com/default.aspx ?scid= kb;en-us;Q316451](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q316451)）并将其插入您的数据库并附加到应用程序数组对象，否则从应用程序 obj 返回函数。

这是我找到的最好的方法。如果有人想了解有关应用程序对象、数据库操作等的更多详细信息，请通过 admin@neoturk.net 联系我

您可以在以下位置看到上述方法成功运行：lastiktestleri.com/Home

我也用过，HeliconTech 的 ISAPI_Rewrite Lite 版本用法很简单： url = Request.ServerVariables("HTTP_X_REWRITE_URL") 这将返回指向 /404.asp 的确切 url

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T11:44:23.913

那是因为您将字符串编码为 ISO-8859-1 并将其解码，就好像它是编码为 UTF-8 的字符串一样。这肯定会弄乱数据。

表单不会因为您使用该编码发送页面而将数据发布为 ISO-8859-1。您没有为表单数据指定任何编码，因此浏览器将选择能够处理表单中数据的编码。它可以选择 ISO-8859-1，但也可以选择其他编码。

数据被发送到服务器，根据浏览器指定的编码进行解码并放入 Request.Form 集合中。

您所要做的就是读取已经从 Request.Form 集合中解码的字符串。您也不必遍历集合中的所有项目，因为您已经知道文本框的名称。

做就是了：

```
string sentSearchText = Request.Form("SearchTextBox"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-24T17:20:06.567

我最终做的是强制我们的应用程序使用 ISO-8859-1。不幸的是，底层数据可能包含不适合该代码页的字符，因此我们在显示数据之前检查数据并将关于 127 字符代码的所有内容转换为实体。不理想，但对我们有用...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-27T19:12:27.450

我有同样的问题，解决如下：

```
 System.Text.Encoding iso_8859_2 = System.Text.Encoding.GetEncoding("ISO-8859-2");
  System.Text.Encoding utf_8 = System.Text.Encoding.UTF8;

  NameValueCollection n = HttpUtility.ParseQueryString("RT=A+v%E1s%E1rl%F3+nem+enged%E9lyezte+a+tranzakci%F3t", iso_8859_2);
  Response.Write(n["RT"]); 
```

A+v%E1s%E1rl%F3+nem+enged%E9lyezte+a+tranzakci%F3t 将按预期返回“A vásárló nem engedélyezte a tranzakciót”。**

# c# - 为什么这个 Upcast 不起作用？

> ID：1012122
> 
> 赞同：1
> 
> 时间：2009-06-18T11:19:59.377
> 
> 标签：c#, oop

我有 2 个类测试（基础）和程序（子）。现在我在向下转换时遇到了一些问题。

```
 Test t = new Program();// upcasting-works
        Program p = (Program)t;//Downcasting-works
        Program q = (Program)new Test();//Downcasting -throws exception. 
```

我想知道为什么它会抛出异常？可能是非常基本的，但不知何故我没有得到。是为了那个新对象吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-18T11:27:09.847

这是所有 OO 系统中的预期行为。简而言之，您不能向下转换为动态类型不匹配的东西。在这一行：

```
Program q = (Program)new Test(); 
```

您正在创建一个`Test`实例 - 该实例显然不匹配`Program`，因为`Test`它不是从`Program`. 在运行时，计算机检测到这种情况并抛出异常。

另一方面，你有：

```
 Test t = new Program(); 
```

在这里，您正在创建一个`Program`实例 - 实例匹配`Test`，因为`Program`确实派生自`Test`.

最后，你有：

```
Program p = (Program)t; 
```

在这种情况下，`t`是对 的引用`Test`，但基础类型实际上是`Program`- 在运行时，计算机能够确定是这种情况，因此允许强制转换工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-18T11:24:46.607

每个正方形都是矩形，但反之则不然。同样，派生类的每个实例都是基类的有效实例，但反之则不然。在您的示例中，每个`Program`都是 a`Test`但并非所有`Test`s 都是`Program`s。

*注意：为了澄清，这并不意味着您应该在 OOP 中从 Rectangle 继承 Square :) 这只是一个类比。具有讽刺意味的是，类比是面向对象设计中的一个众所周知的问题。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T11:26:05.277

问题是：`Test`实例**不是**`Program`. 它适用于第一种情况，因为实例被创建为`Program`（在第一行）。

对于强制转换，**实际对象**（不仅仅是变量）的类型很重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T11:25:12.907

可以这样想，您可以将 Program 转换为 Test，因为 Program IS A Test。

您不能将测试转换为程序，因为测试不是程序。

向下转换总是安全的，只有当你确定对象是那种类型时，向上转换才是安全的。

需要向上转换通常是一种代码味道，如果你发现你经常需要向上转换你的对象，那么你的设计可能有问题。

希望这可以帮助，

**编辑：**沮丧总是安全的吗？

根据我的定义，向下转换的行为是您知道对象的类型，并且将其向下转换为继承树。例如 Cat 和 Dog 都继承自 Animal， Oak 和 Birch 都继承自 Tree。

这样做总是安全的

```
public void DoThingWithCat(Cat snuggles)
{
    snuggles.Meow();
    DoThingWithAnimal(snuggles); // this is always OK, because we know 
                                 // the type of snuggles, and we know 
                                 // snuggles is an animal
} 
```

这是一个UpCast。这样做是不安全的，这也是代码是代码的味道，如果你需要这样做，你的对象层次结构可能有问题。

```
public void DoSomethingElse(Animal anAnimal)
{
    DoThingWithCat(anAnimal);    // this is NOT always OK, because we
                                 // DO NOT know the type of anAnimal, 
                                 // and it may not be a Cat
} 
```

这也是不安全的，因为它是直接铸造，不一定是向上铸造或向下铸造

```
public void DoSomethingDifferent(object anObject)
{
    DoThingWithAnimal(anObject); // this may or may not work, 
                                 // depending on the type passed in, 
                                 // this is a recipe for disaster, 
                                 // because may not be an Animal, 
                                 // it could be a Tree.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T11:26:28.973

Mehrdad 给出了正确的答案。只是为了更清楚：

你`Test`的*不是*a `Program`- 反之亦然：在你的情况下`Program`是 is-a `Test`。因此，您尝试做的不是向上转换，也是不允许的。

# html - style="clear:both" 有什么用？

> ID：1012131
> 
> 赞同：102
> 
> 时间：2009-06-18T11:21:04.740
> 
> 标签：html, css

我碰巧看到了一个`div`有风格的`clear:both`！`clear`in 有什么用`style`？

```
<div style="clear:both"> 
```

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2009-06-18T11:23:36.577

`clear:both`使元素下降到文档中它之前的任何浮动元素之下。

您还可以使用`clear:left`或`clear:right`使其仅低于那些已向左或向右浮动的元素。

```
+------------+ +--------------------+
|            | |                    |
| float:left | |   without clear    |
|            | |                    |
|            | +--------------------+
|            | +--------------------+
|            | |                    |
|            | |  with clear:right  |
|            | |  (no effect here,  |
|            | |   as there is no   |
|            | |   float:right      |
|            | |   element)         |
|            | |                    |
|            | +--------------------+
|            |
+------------+
+---------------------+
|                     |
|   with clear:left   |
|    or clear:both    |
|                     |
+---------------------+ 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-06-18T11:28:43.803

只是为了添加 RichieHindle 的答案，请查看 Floatutorial [，](http://css.maxdesign.com.au/floatutorial/)它会引导您了解 CSS 浮动和清除的工作原理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-08T18:04:29.723

当您使用不带宽度的浮点数时，该行中仍有一些空间。要阻止此空间，您可以`clear:both;`在下一个元素中使用。

# ajax - ajax4jsf 死了吗？还有哪些其他适用于 JSF 的 AJAX 库？

> ID：1012135
> 
> 赞同：3
> 
> 时间：2009-06-18T11:21:26.473
> 
> 标签：ajax, jsf, richfaces, taglib, ajax4jsf

我目前正在为我正在处理的项目使用[JBoss RichFaces](http://www.jboss.org/jbossrichfaces/) JSF 组件库。它总体上工作得很好，尤其是 ajax4jsf (A4J) 提供的 AJAX 支持，但我发现几乎每个组件都使用了通常非常不灵活的表格标记，而且 RichFaces 的所有这些“皮肤”东西都很烦人。如果有一些组件只提供功能并且只提供最少的标记/样式，那就太好了。本来我打算用 ICEfaces，但是效果也不是很好，而且还带来了很多预定义的样式，所以现在 RichFaces 似乎是最好的选择。

现在我认为开发一个干净的标签库会很好，它提供了一些在 RichFaces、ICEfaces 或 Tomahawk 中找到的有用组件（当然不是全部！），它们不使用任何预定义样式并生成可以轻松设置样式的标记CSS。

我想使用 ajax4jsf 库来支持 AJAX，因为我认为它工作得很好，并且可以通过 facelets 无缝集成到标准 JSF 中。但似乎由于它已经转移到 JBoss，它不再作为独立库提供。你只能下载我不想要的整个 RichFaces 包。

ajax4jsf (A4J) 项目死了吗？如果是，有哪些替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T12:00:23.570

您可以在这里找到许多替代方案：

[JSF AJAX 组件库功能矩阵](http://www.jsfmatrix.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T15:06:47.703

如果您阅读[ajax4jsf 论坛](http://www.jboss.org/index.html?module=bb&op=viewtopic&t=112221)，您会看到它已与 Richfaces 合并。

您不必在页面上使用 Richfaces 组件，那么您对在项目中使用 JAR 有疑问吗？

我同意许多 JSF 组件（不仅仅是 Richfaces）都是基于表的（例如 h:selectManyCheckbox）。不要忘记为其中许多编写新的渲染器很容易。我已经为[h:selectManyCheckbox](http://www.blog.locuslive.com/?p=15)完成了此操作，以便复选框在 div 而不是表格中呈现。我认为你应该能够为 Richfaces 组件做同样的事情......但如果是这样的话，那为什么要使用它们呢？

您可能会发现使用 jQuery UI 元素更容易/更好，并使用 a4j:jsFunction （或类似的）将它们绑定回您的 Bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T14:29:22.817

如果您喜欢冒险，请查看[JSF 2](http://javaserverfaces.java.net/)。它以视图技术从 JSP 到[Facelets](http://facelets.java.net/)的转变为特色，并内置了[AJAX 支持](http://javaserverfaces.java.net/nonav/docs/2.0/jsdocs/index.html)。David Geary 在 developerWorks 上发表了一系列[JSF 2 fu](http://www.ibm.com/developerworks/views/java/libraryview.jsp?search_by=JSF+2+fu)文章（尽管您必须等待第 3 部分才能了解 AJAX 内容）。[Ed Burns](http://weblogs.java.net/blog/edburns/)和[Jim Driscoll](http://weblogs.java.net/blog/driscoll/)在新 API 的开发过程中一直在演示各种功能，因此您可能还想查看他们的博客。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-28T12:05:34.807

只是一个评论。我开始使用icefaces。我也是一名网页设计师，我非常注重与我的 Web 应用程序相关的 icefaces 组件的外观和感觉。当我使用 css 覆盖 icefaces 组件的外观和感觉时，我感到非常沮丧。这些组件有很多让我恼火的嵌套表格标记。

当我搬到richfaces。我发现覆盖外观更容易，因为richfaces有一个集成系统来覆盖css中的外观。赋予组件的 css 具有相似且合理的类名，这使得预测和覆盖更容易。

# jquery - 遍历一个 JQuery 对象并替换文本

> ID：1012137
> 
> 赞同：1
> 
> 时间：2009-06-18T11:21:43.070
> 
> 标签：jquery

假设我有以下 html div 我想复制它的孩子，改变过程中每个跨度的值

```
<div><span class="foo">[Name]</span> <span class="bar">[Name]</span></div> 
```

使用 jQuery，我可以通过以下方式获得对“div”的引用

```
var $div = $("div"); 
```

然后克隆为

```
var clone = $div.children().clone(); 
```

然后如何遍历克隆并更改每个跨度的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T11:27:50.610

```
clone.find("span").text("new value"); 
```

或者

```
clone.find("span").each(function() {
  $(this).text("new text");
}); 
```

或者

```
clone.find("span.name").text("new name").siblings("span.bar").text("new bar") 
```

或许多其他方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T11:27:55.227

```
clone.find('span').each(function() {
   $(this).text('Hahahha');  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T11:28:20.013

从我的头顶上...

```
var clone = $div.children().clone().each(function(){
  var textVale = $(this).text();
  //process the text;
  $(this).text(textValue);
 }
); 
```

这没有以任何方式进行测试，但我希望你明白这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T11:28:50.730

我认为你可以这样做：

```
clone = $div.clone();
clone.children.each(function(i) {
  this.text("replacement text");
}); 
```

我现在无法测试它，但手册页在[这里](http://docs.jquery.com/Core/each)。

# javascript - 延迟 jquery 脚本，直到其他所有内容都已加载

> ID：1012140
> 
> 赞同：124
> 
> 时间：2009-06-18T11:22:48.700
> 
> 标签：javascript, jquery, dom

我有一个 jquery 脚本，我只需要在页面上的其他所有内容（包括其他一些 javascript（我无法控制））完成他们的事情后运行它。

我虽然可能有 $(document).ready 的替代品，但我一直没能找到它。

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2009-06-18T11:27:06.413

您可以`$(document).ready()`在一个页面中有多次。代码按其出现的顺序运行。

您可以将`$(window).load()`事件用于您的代码，因为这发生在页面完全加载并且各种`$(document).ready()`处理程序中的所有代码都已完成运行之后。

```
$(window).load(function(){
  //your code here
}); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-12-07T11:07:09.637

这个代码块解决了我的问题，

```
<script type="text/javascript">
  $(window).bind("load", function () {
    // Code here
  });
</script>
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-06-04T14:51:00.547

多个`$(document).ready()`将按顺序在页面上自上而下触发。最后一个`$(document).ready()`将在页面上最后触发。在最后一个内部`$(document).ready()`，您可以触发一个新的自定义事件以在所有其他事件之后触发..

将您的代码包装在新的自定义事件的事件处理程序中。

```
<html>
<head>
<script>
    $(document).on("my-event-afterLastDocumentReady", function () {
        // Fires LAST
    });
    $(document).ready(function() {
        // Fires FIRST
    });
    $(document).ready(function() {
        // Fires SECOND
    });
    $(document).ready(function() {
        // Fires THIRD
    });
</script>
<body>
... other code, scripts, etc....
</body>
</html>

<script>
    $(document).ready(function() {
        // Fires FOURTH
        // This event will fire after all the other $(document).ready() functions have completed.
        // Usefull when your script is at the top of the page, but you need it run last
        $(document).trigger("my-event-afterLastDocumentReady");
    });
</script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-18T11:37:52.757

从[这里](http://www.nabble.com/Loading-jQuery-UI-dialogs-from-GreaseMonkey--td19897312s27240.html)：

```
// Add jQuery 
var GM_JQ = document.createElement('script'); 
GM_JQ.src = 'http://jquery.com/src/jquery-latest.js';
GM_JQ.type = 'text/javascript'; 
document.getElementsByTagName('head')[0].appendChild(GM_JQ); 

// Check if jQuery's loaded 
function GM_wait() 
{ 
    if(typeof unsafeWindow.jQuery == 'undefined') 
    { 
        window.setTimeout(GM_wait,100); 
    } 
    else 
    { 
        $ = unsafeWindow.jQuery; 
        letsJQuery(); 
    } 
} 

GM_wait(); 

// All your GM code must be inside this function 
function letsJQuery() 
{
    // Do your jQuery stuff in here    
} 
```

这将等到 jQuery 加载后才能使用它，但您可以使用相同的概念，在其他脚本中设置变量（或者如果它们不是您的脚本，则检查它们）等到它们被加载后才能使用它们。

例如，在我的网站上，我将它用于异步 JS 加载并等待它们完成，然后再使用 jQuery 对它们进行任何操作：

```
<script type="text/javascript" language="JavaScript"> 
    function js(url){
        s = document.createElement("script");
        s.type = "text/javascript";
        s.src = url;
        document.getElementsByTagName("head")[0].appendChild(s);
    }       

    js("/js/jquery-ui.js");
    js("/js/jrails.js");
    js("/js/jquery.jgrowl-min.js");
    js("/js/jquery.scrollTo-min.js");
    js("/js/jquery.corner-min.js");
    js("/js/jquery.cookie-min.js");
    js("/js/application-min.js");

    function JS_wait() {
        if (typeof $.cookie == 'undefined' || // set in jquery.cookie-min.js
            typeof getLastViewedAnchor == 'undefined' || // set in application-min.js
            typeof getLastViewedArchive == 'undefined' || // set in application-min.js 
            typeof getAntiSpamValue == 'undefined') // set in application-min.js
        { 
            window.setTimeout(JS_wait, 100); 
        }
        else 
        { 
            JS_ready(); 
        }
    }

    function JS_ready() {
        // snipped
    };

    $(document).ready(JS_wait);
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-18T11:24:42.753

您是否尝试过使用 加载所有初始化函数`$().ready`，最后运行您想要的 jQuery 函数？

也许你可以`setTimeout()`在`$().ready`你想运行的函数上使用，调用你想加载的功能。

或者，使用`setInterval()`并让间隔检查以查看所有其他加载功能是否已完成（将状态存储在布尔变量中）。当条件满足时，您可以取消间隔并运行加载函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-07-17T15:52:06.013

事实证明，由于 javascript 框架的特殊混合，我需要使用其他框架之一提供的事件侦听器来启动脚本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-21T14:25:47.583

以下脚本确保`my_finalFunction`在您的页面完全加载图像、样式表和外部内容后运行：

```
<script>

    document.addEventListener("load", my_finalFunction, false);

    function my_finalFunction(e) {
        /* things to do after all has been loaded */
    }

</script> 
```

kirupa 对在正确的时间运行代码提供了很好的解释，请参阅[https://www.kirupa.com/html5/running_your_code_at_the_right_time.htm](https://www.kirupa.com/html5/running_your_code_at_the_right_time.htm)。

# vb.net - VB 应用程序中字符串的性能

> ID：1012142
> 
> 赞同：-1
> 
> 时间：2009-06-18T11:23:38.527
> 
> 标签：vb.net

在我的 VB 应用程序中，我正在使用 VB 字符串复制大量数据？这会导致性能问题。我应该用什么代替 VB 字符串来提高性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T11:32:30.333

Try to make sure you are always passing ByRef wherever possible (in VB6). In VB.Net this is not an issue. Also, maybe preallocate your strings. Analysis and a better description of your programming task can help provide a better answer.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T11:47:44.953

[This two part article](http://www.aivosto.com/vbtips/stringopt.html) is good source of information for VB6\. Some tips mentioned there are:

*   Use $ version of string functions (i.e. Replace$ instead of Replace).
*   Use LenB() to check if string is empty (or not).
*   Use vbNullString constant instead of "".

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T11:29:19.247

With VB 6 maybe [this](http://www.xtremevbtalk.com/showthread.php?t=155206) can help you out.

Taken out from the page:

> The cStringBuilder class takes a different approach. When you initialize the class, it pre-allocates a 1MB buffer of memory to store the string in, so the string can grow and shrink dynamically within that 1MB space and never need to reallocate any memory. The only time it needs to reallocate is when the string grows bigger than the currently allocated buffer. When the string buffer grows, it is always in increments of 1MB.
> 
> How Do I Use It? Here is a run-down of all the functions and properties available in cStringBuilder:
> 
> Property StringData As String Gets or sets the data stored in the StringBuilder.
> 
> Property Length As Long Gets the length of the data stored in the StringBuilder.
> 
> Sub Clear Resets the stored string to nothing, and resizes the in-memory buffer back to 1MB.
> 
> Sub Append(str As String) Adds the string str on to the end of the data stored in the cStringBuilder.
> 
> Sub Insert(index As Long, str As String) Inserts a string (str) into the StringBuilder at a specific index (index). Note that the index is zero-based, so to insert to the beginning of the string, specify 0 as the index.
> 
> Sub Overwrite(index As Long, str As String) Inserts a string (str) into the StringBuilder at a specific index (index), overwriting the data at that point, rather than moving it to the right as is the case with Insert. If the data you insert goes past the end of the stored data, the excess will be appended normally.
> 
> Sub Remove(index As Long, length As Long) Removes a section (length characters) of the stored string, starting at index. If length = 0, the entire string starting at index is removed.

And the usage is also quite easy

```
'Extremely short example:
Dim sb As New cStringBuilder

sb.StringData = "Hello, "
sb.Append "Wxld!"
sb.Insert 8, "o"
sb.Overwrite 9, "r"

MsgBox sb.StringData 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-29T07:57:45.167

您是否尝试过使用 .NET 中的 StringBuilder？它被标记为“COM Visible”，这意味着您应该能够从 VB 6 中使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T11:25:18.070

解决这个问题的一种方法是预先分配一个足够大的字节/字符数组来容纳所有连接的字符串。

如果您使用的是 VB.NET，那么就有这个`StringBuilder`类。

# c# - 无法使用 NHibernate 加入分布式事务

> ID：1012147
> 
> 赞同：3
> 
> 时间：2009-06-18T11:24:45.030
> 
> 标签：c#, oracle, nhibernate, transactions

我在单元测试中看到一个问题，其中 Oracle 抛出异常，并显示消息“无法加入分布式事务”。我们正在使用 ODP.net 和 NHibernate。在嵌套事务中对数据库进行一定数量的提交后，就会出现此问题。令人讨厌的是，这在持续集成服务器（Windows Server 2003 R2 SP1）上失败了，而不是在我的开发机器（XP SP2）上。

这是该问题的一个小（ish）再现：

```
using (new TransactionScope())
{
    for (int j = 0; j < 15; j++)
    {
        using (var transactionScope = new TransactionScope(TransactionScopeOption.Required))
        using (var session = sessionFactory.OpenSession())
        {
            for (int i = 0; i < 200; i++)
            {
                var obj = [create new NHibernate mapped obj]
                session.Save(obj);
            }
            session.Flush();
            transactionScope.Complete();
        }
    }
} 
```

我们使用的连接字符串是：

> 数据源=服务器；用户ID=用户；密码=密码；登记=真；

显然，这看起来是一件很繁重的事情，但产品代码的情况更复杂（外部事务循环和内部事务循环非常分离）。

在构建服务器上，它可靠地在外循环 (j) 的第五次迭代中崩溃。看到它在我的本地机器上传递，我想知道这是否达到了某种配置的事务或连接限制？

有人有预感我可以试试吗？解决它的明显方法是更改​​代码以更好地处理这种情况，但我只想了解为什么它可以在一台机器上运行而不是在另一台机器上运行。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-19T07:16:23.400

在我看来，这与您的 Oracle 数据库配置有关。

*   您是否在两种环境中都使用相同的数据库服务器（我假设不是）？
*   您使用哪个版本的数据库（我要 10g）？

根据这些假设，我可以找到以下内容：

*   检查[调整 Microsoft 事务服务器性能](http://download.oracle.com/docs/cd/B19306_01/win.102/b14320/perftune.htm)。该`ORAMTS_NET_CACHE_MAXFREE`参数的默认值设置为5，这*可能*与您的问题有关。不过，在采取任何行动之前阅读整个页面（您也可以尝试增加`SESSIONS`和`PROCESSES`参数）。
*   您可以[在 Oracle MTS 上启用跟踪](http://download.oracle.com/docs/cd/B19306_01/win.102/b14320/trouble.htm#sthref461)以查看那里实际发生的情况。
*   如果仍然卡住，我想您可以[在 MSDTC 上启用跟踪](http://blogs.msdn.com/distributedservices/archive/2009/02/07/the-hidden-tool-msdtc-transaction-tracing.aspx)以尝试获得更多洞察力。

# nhibernate - 使用 NHibernate 的父子树层次结构

> ID：1012155
> 
> 赞同：1
> 
> 时间：2009-06-18T11:26:33.950
> 
> 标签：nhibernate, fluent-nhibernate

我有一个小组。该组可以包含组，这需要使用 NHibernate 进行映射。我以前做过，但这次我得到了一个现有的数据库，它并没有像我想要的那样真正存储数据。

数据库如下所示：

团体

ID

Groups_Link

父 ID 子 ID

我不知道如何映射这个？

**编辑：**

好像没那么容易。一组可以作为多个组的子级存在。所以我猜它应该是一个多对多的关联。好吧，还没有弄清楚如何做到这一点。任何提示将不胜感激！

**编辑：**

我认为视图可以帮助我解决问题，但是对于插入、更新和删除的视图似乎有一些限制，这使得它变得困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T11:36:29.843

I mapped a similar structure like:

```
<class name="Folder" lazy="false">

    <id column="Id" name="Id">
        <generator class="guid"/>
    </id>

    <property name="Name" column="FolderText"></property>
    <bag  name="Children" cascade="all" fetch="subselect" inverse="true">
        <key  column="ParentId" />
        <one-to-many class="Folder" />
    </bag>

    <many-to-one class="Folder" name="Parent" column="ParentId" insert="true" /> 
```

**Edit**

I am taking a total shot in the dark now since your schema is not what I've used, and now I understand why you asked this:-) Anyways here's is a thought. Please let us know if this worked of if you find another solution:

```
 <join fetch="join" table="GroupLinks">
        <key column="ChildId"></key>
        <many-to-one name="Parent" class="Folder" column="ParentId"/>
    </join> 
```

I might have the relationship backwards, but this at least would get you the parent.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-02T21:27:32.507

正如你所说，它只是一个多对多，恰好在连接的两边都有相同的类。所以：

```
<class name="G.Group, G" table="GROUPS">

  <id column="Id" name="Id">
    <generator class="guid"/>
  </id>

  <set name="Parents" table="Groups_Link" cascade="save-update">
    <key column="ChildId"/>
    <many-to-many class="G.Group, G" column="ParentId"/>
  </set>

  <set name="Children" table="Groups_Link" cascade="save-update" inverse="true">
    <key column="ParentId" />
    <many-to-many class="G.Group, G" column="ChildId"/>
  </set>

</class> 
```

# silverlight - 从 silverlight 和针对使用 IIS 6 的自定义存储的摘要式身份验证

> ID：1012159
> 
> 赞同：0
> 
> 时间：2009-06-18T11:27:19.533
> 
> 标签：silverlight, http-authentication, digest-authentication

要求的服务器端是针对自定义凭据存储（也称为成员资格提供程序）的摘要式身份验证，以及在客户端调用 RESTful api 的 silverlight 应用程序。

我正在寻找指针。开箱即用，看起来 Digest 仅适用于 AD。从客户端，我习惯于让浏览器弹出输入凭据的提示 --- 但在这种情况下，它是一个 sliverlight (v2) 应用程序。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T21:35:45.243

身份验证故事 imo 在 Silverlight 中并不出色。我们通常做的是依赖于从浏览器发出 Silverlight 请求这一事实。因此，它们携带浏览器使用的 cookie 和标头（想想 XmlHttpRequest 对象，这里）。

你做什么：

*   使用您的提供商来保护 Silverlight 所在的页面。用户将尝试调出页面并提示输入凭据。
*   此时，Silverlight 请求（通过 WebClient 或其他任何方式）将携带该身份验证信息。只需保护对资产的访问，Silverlight 将携带访问这些资产的身份验证信息。

# linq-to-sql - linq2sql，一对多通过关系

> ID：1012161
> 
> 赞同：1
> 
> 时间：2009-06-18T11:27:39.393
> 
> 标签：linq-to-sql

我有 OrgUnits、OrgUnitJobs、
Employees、OrgUnitJobEmployee（这个在这种情况下可能看起来是多余的，在这里仅供参考）表。

组织单位在 OrgUnitJobs (1..n) 中定义了工作 员工（也可以有许多工作）在 OrgUnitJobEmployee 表中定义了工作。并且员工在 OrgUnitJobs 表中有一个 PrimaryJob (1..1)，那么我如何获取该组织单位中主要工作的所有员工的列表。

我正在使用 LINQ2SQL ORM，所以我有一个 OrgUnit 部分类，我希望能够在该部分 ORM 类中获取此员工列表，而无需编写另一个查询或 linq 选择。我只是不想去我的 OCRepository 类并在那里写一个 GetEmployeeListForOrgUnit(orgUnitId)，这听起来不对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T22:03:57.743

检查[DataContext.LoadOptions](http://msdn.microsoft.com/en-us/library/bb882681.aspx)以调整第一个查询中包含的内容。这意味着它将执行一个连接，而不是 N 个子查询。

在您的情况下，类似于：

```
DataLoadOptions dlo = new DataLoadOptions();
dlo.LoadWith<Job>(j => j.PrimaryEmployees);
dbContext.LoadOptions = dlo; 
```

# xaml - 将 StringFormat 与单个绑定一起使用的正确语法是什么？

> ID：1012174
> 
> 赞同：5
> 
> 时间：2009-06-18T11:30:53.240
> 
> 标签：xaml, binding

我可以让 MultiBinding 与 StringFormat 一起使用：

```
<TextBlock.Text>
    <MultiBinding StringFormat="{}{0} {1} (hired on {2:MMM dd, yyyy})">
        <Binding Path="FirstName"/>
        <Binding Path="LastName"/>
        <Binding Path="HireDate"/>
    </MultiBinding>
</TextBlock.Text> 
```

**但是单一绑定的正确语法是什么？**以下不起作用（尽管它似乎与[此示例](http://dotnet.org.za/rudi/archive/2008/05/16/using-binding-stringformat.aspx)的语法相同）：

```
<TextBlock Text="{Binding Path=HiredDate, StringFormat='{MMM dd, yyyy}'}"/> 
```

# 回答：

谢谢马特，我需要的是你的两个答案的组合，这很好用：

```
<TextBlock Text="{Binding Path=HiredDate, 
    StringFormat='Hired on {0:MMM dd, yyyy}'}"/> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-18T11:40:47.557

您希望在示例中将大括号从格式字符串中删除，因为您没有将它们用作占位符（就像您在 String.Format() 中使用“{0}”一样）。

所以：

```
<TextBlock Text="{Binding Path=HiredDate, StringFormat='MMM dd, yyyy'}"/> 
```

如果要在字符串内的某处引用占位符值，可以通过使用反斜杠转义花括号来实现：

```
<TextBlock Text="{Binding Path=HiredDate, StringFormat='Hired on \{0\}'}"/> 
```

# c# - Receiving CrossThreadMessagingException while Debugging WinForms Application

> ID：1012178
> 
> 赞同：0
> 
> 时间：2009-06-18T11:32:06.637
> 
> 标签：c#, winforms, debugging

I am using Wndows XP SP3 x86 + VSTS 2008 to write a simple Windows Forms application using C#. There is a button called `button1` and here is the event handler for its click event, when executing the if statement, there is `Microsoft.VisualStudio.Debugger.Runtime.CrossThreadMessagingException`. Does anyone have any good ideas what is wrong?

```
private void button1_Click(object sender, EventArgs e)
{
    string recording = ConfigurationSettings.AppSettings["recording"];

    // exception thrown when executing the following if statement
    if (recording.Equals("enable", StringComparison.InvariantCultureIgnoreCase))
    {
        CameraEncoder.Stop();
    }
} 
```

Some more code:

```
static WMEncoder CameraEncoder = new WMEncoder(); 
```

EDIT1:

I am confused how to apply Marc's idea of using `Invoke` in my code. Should I use the following code segment?

```
CameraEncoder.Invoke((MethodInvoker) delegate
{
        CameraEncoder.Stop();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T11:37:43.757

Normally, the problem when we see this (regularly) is something like a worker thread or a timer updating the UI - but a button click should be raised through the UI thread, so I don't think it is the "usual problem".

So: what is `camera`? And what is `Recording`? Neither is explained, and we can't guess without introducing extra variables...

Depending on what they are, maybe this'll work...

```
camera.Invoke((MethodInvoker) delegate
{
    if (camera.Equals("enable", StringComparison.InvariantCultureIgnoreCase))
    {
        Recording.Stop();
    }        
}); 
```

But without knowing what `canera` **is**, I'm clutching at straws...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T11:38:19.840

Maybe the camera object is created and managed by another thread.. Could you expose more code regarding the camera object?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T15:48:01.583

我知道`WMEncoder`是一个`COM`对象。您可以尝试`CameraEncoder`在 GUI 线程而不是其他线程中创建。

# python - how to generate a many-to-many-relationship FORM in web2py?

> ID：1012179
> 
> 赞同：2
> 
> 时间：2009-06-18T11:32:10.880
> 
> 标签：python, web2py

Do I need a custom validator? Do I need a custom widget?

If this helps to clear the problem, the relationship is between `member` and `language` where a member can have multiple languages and a language is spoken by multiple members.

I would like to add a multi-select box in the "add member" form (that I generate using SQLFORM).

Thanks :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-02T18:34:00.697

这取决于，我建议你把它放在 web2py 邮件列表中。一种方法是

```
db.table.field.requires=IS_IN_DB(db,'othertable.id','%(otherfield)',multiple=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-09T19:46:49.817

另一种方法：

```
db.define_table( 'make', Field( 'name' ) )

db.define_table( 'model', 
    Field( 'name' ), 
    Field( 'make', db.make, requires = IS_IN_DB( db, 'make.id', '%(name)' ) ) ) 
```

# php - 使用 PHP 的 xpath 选择属性值

> ID：1012181
> 
> 赞同：1
> 
> 时间：2009-06-18T11:32:53.330
> 
> 标签：php, xpath

我是 xpath 的新手，并且遇到了 PHP 古老的 XPath 实现的麻烦。是否正确，这`//@url`只是 的缩写形式`//attribute::url`？我正在尝试查询 flickr rss 进行测试，但缩写查询找到正确的节点，而详细查询返回 0 个元素：

```
$xml = file_get_contents('http://api.flickr.com/services/feeds/geo/?format=rss_200');
$doc = new DOMDocument();
$doc->loadXML($xml);
$xpath = new DOMXPath($doc);
$xpath->query('//media:content/@url')->length > 0;
$xpath->query('//media:content/attribute::url')->length == 0; 
```

我误解了[w3c 规范](http://www.w3.org/TR/xpath#location-paths)还是这是一个 PHP 错误？

相关问题：

成功的查询[`DOMAttr`](http://us2.php.net/manual/en/class.domattr.php)按预期返回对象。但是有没有办法直接获取这些节点的文本值呢？像`//media:content/attribute::url/child::text()`什么？我需要一个工具，其中用户将输入 xpath 查询，如果我可以预期 DOMText 对象（而不是为大量 DOM* 对象编码），错误检测会更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-18T11:39:43.393

看起来你可能在那里遇到了一个错误。对我来说，它看起来 100% 没问题。

至于您的相关问题，请使用[评估](http://us2.php.net/manual/en/domxpath.evaluate.php)而不是查询来获取 php 以尝试返回键入的结果。如果失败，则返回正常的节点列表

编辑：

您是否尝试过添加[命名空间](http://us2.php.net/manual/en/domxpath.registernamespace.php)？媒体：部分可能会抛出循环。例如

```
$xpath->registerNamespace('media', "http://search.yahoo.com/mrss/"); 
```

编辑2：仅供参考，我也在javascript中使用以下方法进行了尝试

```
function nsResolve() {
    return "http://search.yahoo.com/mrss/"
}

document.evaluate("//media:content/attribute::url",document,nsResolve,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null); 
```

它的工作原理与使用 @url 相同（目前有 7 个结果）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-16T00:30:05.423

`//*@url`行得通吗？

# python - 在 Python 中，如何用另一个列表索引一个列表？

> ID：1012185
> 
> 赞同：169
> 
> 时间：2009-06-18T11:36:06.270
> 
> 标签：python, list, indexing

我想用另一个这样的列表索引一个列表

```
L = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']
Idx = [0, 3, 7]
T = L[ Idx ] 
```

并且 T 最终应该是一个包含 ['a', 'd', 'h'] 的列表。

有没有比这更好的方法

```
T = []
for i in Idx:
    T.append(L[i])

print T
# Gives result ['a', 'd', 'h'] 
```

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2009-06-18T11:38:46.950

```
T = [L[i] for i in Idx] 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2009-06-18T12:54:26.440

如果您使用的是 numpy，则可以像这样执行扩展切片：

```
>>> import numpy
>>> a=numpy.array(['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'])
>>> Idx = [0, 3, 7]
>>> a[Idx]
array(['a', 'd', 'h'], 
      dtype='|S1') 
```

...并且可能要快得多（如果性能足以引起 numpy 导入的困扰）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-07-06T23:12:25.190

一种功能性方法：

```
a = [1,"A", 34, -123, "Hello", 12]
b = [0, 2, 5]

from operator import itemgetter

print(list(itemgetter(*b)(a)))
[1, 34, 12] 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-06-18T11:39:58.463

```
T = map(lambda i: L[i], Idx) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-04-04T14:59:55.410

我对这些方法中的任何一种都不满意，所以我想出了一个`Flexlist`允许灵活索引的类，可以通过整数、切片或索引列表：

```
class Flexlist(list):
    def __getitem__(self, keys):
        if isinstance(keys, (int, slice)): return list.__getitem__(self, keys)
        return [self[k] for k in keys] 
```

对于您的示例，您可以将其用作：

```
L = Flexlist(['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'])
Idx = [0, 3, 7]
T = L[ Idx ]

print(T)  # ['a', 'd', 'h'] 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-29T17:44:50.647

您还可以使用`__getitem__`结合`map`以下方法的方法：

```
L = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']
Idx = [0, 3, 7]
res = list(map(L.__getitem__, Idx))
print(res)
# ['a', 'd', 'h'] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-04T15:55:18.753

```
L= {'a':'a','d':'d', 'h':'h'}
index= ['a','d','h'] 
for keys in index:
    print(L[keys]) 
```

我会用一个`Dict add`想要`keys`的`index`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-20T17:11:47.880

我的问题：查找列表索引。

```
L = makelist() # Returns a list of different objects
La = np.array(L, dtype = object) # add dtype!
for c in chunks:
    L_ = La[c] # Since La is array, this works. 
```

# c# - StringDictionary To TextFile

> ID：1012196
> 
> 赞同：0
> 
> 时间：2009-06-18T11:38:41.820
> 
> 标签：c#, text, dictionary, export

I am trying to export a stringdictionary to a text file, it has over one million of records, it takes over 3 minutes to export into a textfile if I use a loop.

Is there a way to do that faster?

Regards

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-18T11:48:47.710

Well, it depends on what format you're using for the export, but in general, the biggest overhead for exporting large amounts of data is going to be I/O. You can reduce this by using a more compact data format, and by doing less manipulation of the data in memory (to avoid memory copies) if possible.

The first thing to check is to look at your disk I/O speed and do some profiling of the code that does the writing.

If you're maxing out your disk I/O (e.g., writing at a good percentage of disk speed, which would be many tens of megabytes per second on a modern system), you could consider compressing the data before you write it. This uses more CPU, but you write less to the disk when you do this. This will also likely increase the speed of reading the file, if you have the same bottleneck on the reading side.

If you're maxing out your CPU, you need to do less processing work on the data before writing it. If you're using a serialization library, for example, avoiding that and switching to a simpler, more specialized data format might help. Consider the simplest format you need: probably just a word for the length of the string, followed by the string data itself, repeated for every key and value.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-18T11:49:35.387

Note that most dictionary constructs don't preserve the insert order - this often makes them poor choices if you want repeatable file contents, but (depending on the size) we may be able to improve on the time.... this (below) takes about 3.5s (for the export) to write just under 30MB:

```
 StringDictionary data = new StringDictionary();
    Random rand = new Random(123456);
    for (int i = 0; i < 1000000; i++)
    {
        data.Add("Key " + i, "Value = " + rand.Next());
    }
    Stopwatch watch = Stopwatch.StartNew();
    using (TextWriter output = File.CreateText("foo.txt"))
    {
        foreach (DictionaryEntry pair in data)
        {
            output.Write((string)pair.Key);
            output.Write('\t');
            output.WriteLine((string)pair.Value);
        }
        output.Close();
    }
    watch.Stop(); 
```

Obviously the performance will depend on the size of the actual data getting written.

# jquery - 使用 JQuery 发布到 ASP.NET MVC [Authenticate] 包装的操作

> ID：1012201
> 
> 赞同：1
> 
> 时间：2009-06-18T11:39:31.613
> 
> 标签：jquery, asp.net-mvc, authentication

我正在尝试像这样使用 JQuery 发布：

```
$.post("NiceController/Create/", { field1: data1, field2: data2 },
function(data, textStatus) {
    if (data.Status)
        //Do something
}, "json"); 
```

问题是，当我没有通过身份验证时，我不会被重定向到登录页面，因为它不是完整的表单提交。问题是：我如何以编程方式知道我没有通过身份验证并且应该重定向到登录页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T11:44:20.903

我不知道是否有更官方的答案，但你能`$.get('NiceController/AmILoggedIn')`先吗？然后，根据那里的响应，`$.post`或者通过登录页面进行某种重定向？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T12:20:38.410

如果您使用该[`ajax`](http://docs.jquery.com/Ajax/jQuery.ajax)方法，您应该能够添加错误处理功能。我相信，既然您要的是 JSON，则`parseerror`应该返回 a，因为您将得到的是重定向，而不是 JSON。您可能还可以使用全局`ajaxError`处理程序并继续使用 post 来获得相同的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T14:23:10.177

我假设您`NiceController/Create/`重定向到登录页面，这就是您所看到的。您从登录页面获得了一堆 HTML，而不是一个好的状态。

您有 2 个选项：`Authorize`从 Create 操作中删除属性，并在内部处理它，例如通过返回 JSON 错误消息。

或者：先检查你是否登录，然后只有在用户登录时才调用 Create 动作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T11:42:12.357

您可以执行以下操作：

```
$.post("NiceController/Create/", { field1: data1, field2: data2 },
    function(data, textStatus) {
        if (data.Status)
            if(data.Status == 'authFailed') {
                window.location.href = '/login';
            }
        }
    }, "json"); 
```

# c# - System.AddIn in WCF

> ID：1012205
> 
> 赞同：3
> 
> 时间：2009-06-18T11:40:03.003
> 
> 标签：c#, .net, wcf, system.addin

I have a question about use AddIn framework, provided by .NET Framework (currently use 3.5 SP1) implemented in System.AddIn namespace. I build a prototype with simple AddIn. This AddIn is instantiated in business logic of WCF Service.

Implementation of business logic (only necessary code is shown):

```
internal class BusinessLayer : IBusinessLayer
{
    public object Execute(object toConvert, Operation operation)
    {
        IDictionary<string, AddInToken> tokens = AddIns.Store.GetAddInsTokens(@"c:\SomePathToStore");

        foreach (KeyValuePair<string, AddInToken> token in tokens)
        {
            if (operation.Name == token.Key && operation.Version == token.Value.Version)
            {
                ConversionHostView view = token.Value.Activate<ConversionHostView>(AddInSecurityLevel.FullTrust);

                object converted =  view.Convert(toConvert);

                AddInController.GetAddInController(view).Shutdown();

                return converted;
            }
        }

        throw new InvalidOperationException("No operation found!");
    }
    ...
} 
```

Implementation of service (only necessary code is shown):

```
public class Service : IServiceContract
{
    IBusinessLayer bl;

    public Service()
    {
        bl = BL.BLFactory.GetBL();
    }

    public object Execute(object toConvert, ERES.ConversionService.Entity.Operation operation)
    {
        return bl.Execute(toConvert, operation);
    }
    ...
} 
```

I created two Unit tests. One call direct method of business logic, other one WCF method. Direct call works fine, but if I activate AddIn from WCF i get this exception:

**"Unable to cast transparent proxy to type 'ERES.ConversionService.Contract.IConversionContract'**

Stack trace:

*at ConversionHostViewToContractAdapter_ConstructorInvoker(Object ) at System.AddIn.Hosting.AddInActivator.AdaptToHost[T](AddInToken pipeline, IContract addInContract) at System.AddIn.Hosting.AddInActivator.ActivateInAppDomain[T](AddInToken pipeline, AppDomain domain, AddInControllerImpl controller, Boolean weOwn) at System.AddIn.Hosting.AddInActivator.Activate[T](AddInToken token, PermissionSet permissionSet, String appDomainName) at System.AddIn.Hosting.AddInActivator.Activate[T](AddInToken token, AddInSecurityLevel level, String appDomainName) at System.AddIn.Hosting.AddInActivator.Activate[T](AddInToken token, AddInSecurityLevel level) at System.AddIn.Hosting.AddInToken.Activate[T](AddInSecurityLevel trustLevel) at ERES.ConversionService.BL.BusinessLayer.Execute(Object toConvert, Operation operation) in C:\Documents and Settings\kc\My Documents\Visual Studio 2008\Projects\ConversionServiceSolution\ERES.ConversionService.BL\BusinessLayer.cs:line 44 at ERES.ConversionService.Service.Execute(Object toConvert, Operation operation) in C:\Documents and Settings\kc\My Documents\Visual Studio 2008\Projects\ConversionServiceSolution\ERES.ConversionService\Service.svc.cs:line 25 at SyncInvokeExecute(Object , Object[] , Object[] ) at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs) at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)*

Any help?

Regards Anton Kalcik

**UPDATE:** I was able to go around this with this code:

```
ConversionHostView view = token.Value.Activate<ConversionHostView>(AppDomain.CurrentDomain); 
```

So at this case is only possible to execute AddIn only at same AppDomain as service self. But I don't understand why?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-01-04T12:33:05.473

查看引发错误的位置，这是在为主机调整插件时。

这里的问题是 MEF 正在尝试查找并转换到它找不到的接口。

您的合同程序集与您的插件程序集是否在同一个地方？

# windows - How to disable autocomplete for passwords in IE8 via GPO?

> ID：1012210
> 
> 赞同：1
> 
> 时间：2009-06-18T11:43:40.453
> 
> 标签：windows, internet-explorer-8, group-policy

In IE6 there was a registry key hidden away that would allow you to enable autocomplete but only for usernames, not passwords.

This key no longer has any effect in IE8\. I can either enable or disable autocomplete for usernames **and** passwords, but not just one of the two.

What I'm looking for is a way to enable autocomplete for usernames, but disable it for passwords.

Is there a way to do this in IE8?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-25T19:49:10.203

看来这已经不可能了;(

[https://serverfault.com/questions/27981/how-to-disable-autocomplete-for-passwords-in-ie8-via-gpo/27998](https://serverfault.com/questions/27981/how-to-disable-autocomplete-for-passwords-in-ie8-via-gpo/27998)

# sql-server-2008 - 从主数据库更新从属 SQL Server 2008 数据库同时最小化中断的模式

> ID：1012221
> 
> 赞同：4
> 
> 时间：2009-06-18T11:48:54.483
> 
> 标签：sql-server-2008, synchronization, replication, scalability

我们有一个由使用 SQL Server 2008 的许多实例的网络场托管的 ASP.NET Web 应用程序，在该应用程序中，我们将来自多个源的数据聚合和预处理为针对快速最终用户查询性能优化的格式（产生 5-10 百万某些表中的行）。聚合和优化由后端服务器上的服务完成，然后我们希望将其分发到 Web 应用程序实例使用的多个只读前端副本，以促进最大的可扩展性。

我的问题是关于将这些数据从后端数据库获取到只读前端副本的最佳方式，这种方式不会在此过程中破坏它们的性能。前端 Web 应用程序实例将处于恒定的高负载下，并且需要始终具有良好的响应能力。

后端数据库不断更新，所以我怀疑事务复制不会是最好的方法，因为对副本的持续更新流会损害它们的性能。

数据的陈旧性不是一个大问题，因此快照复制可能是可行的方法，但这会导致复制期间的性能不佳。

执行删除和批量插入将导致没有用户查询数据的时段。

我真的不想编写一个复杂的集群方法，在更新期间我们将副本从集群中删除 - 沿着这些思路我们可以不费力气地做一些事情，还是有更好的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-09-04T21:53:12.197

实际上，SQL Server 2005（和 2008）中内置了一项旨在解决此类问题的技术。[服务代理](http://msdn.microsoft.com/en-us/library/ms166043(SQL.90).aspx)（我将进一步称为 SSB）。问题是它的学习曲线非常陡峭。

我知道 MySpace 公开了如何使用 SSB 来管理他们的 SQL Server 园区：[MySpace 使用 SQL Server Service Broker 来保护 1 PB 数据的完整性](http://rusanu.com/2009/07/26/myspace-uses-sql-server-service-broker-to-protect-integrity-of-1-petabyte-of-data/)。我知道还有几个（主要）网站使用类似的模式，但不幸的是它们还没有公开，所以我不能引用名字。我亲自参与了一些围绕这项技术的项目（我是 SQL Server 团队的前成员）。

现在请记住，SSB 不是像复制这样的专用数据传输技术。因此，您将找不到与复制的发布向导和简单部署选项类似的任何内容（检查表并进行传输）。SSB 是一种可靠的消息传递技术，因此它的原语停止在消息交换级别，您必须编写代码来利用[数据更改捕获](http://msdn.microsoft.com/en-us/library/bb522489.aspx)，将其打包为消息，并将消息解包到目的地的关系表中。

为什么在您描述的任务中仍然有一些公司更喜欢 SSB 而不是复制，因为 SSB 在可靠性和可扩展性方面有更好的故事。我知道在 1500 多个站点之间交换数据的项目，远远超出了复制的能力。SSB 也是从物理拓扑中抽象出来的：您可以在不更改应用程序的情况下移动数据库、重命名机器、重建服务器。因为数据流发生在[逻辑路由上](http://technet.microsoft.com/en-us/library/ms166052(SQL.90).aspx)该应用程序可以即时添加到新拓扑。SSB 还可以抵御长时间的断开连接和停机，能够在断开连接数小时、数天甚至数月后恢复数据流。通过引擎集成实现的高吞吐量（SSB 是 SQL 引擎本身的一部分，不是卫星应用程序和复制之类的进程的集合）意味着更改的积压可以在合理的时间处理（我知道正在经历一半的站点每分钟一*百万次交易）。*SSB 应用程序通常依靠[内部激活](http://msdn.microsoft.com/en-us/library/ms171617.aspx)来处理传入数据。SSB 还具有一些独特的功能，例如具有粘性会话语义的内置[负载平衡](http://blogs.msdn.com/sql_service_broker/archive/2008/07/14/using-multiple-routes-in-service-broker.aspx)（通过路由），支持[无死锁应用程序特定相关处理](http://msdn.microsoft.com/en-us/library/ms171615(SQL.90).aspx)、[优先数据](http://msdn.microsoft.com/en-us/library/bb934439.aspx)交付、对数据库镜像的特定支持、跨域操作[的基于证书的身份验证](http://rusanu.com/2008/10/23/how-does-certificate-based-authentication-work/)、内置[持久计时器](http://msdn.microsoft.com/en-us/library/ms187804(SQL.90).aspx)等等。

这不是一个特定的答案“如何将数据从服务器 A 上的表 T 移动到服务器 B”。更多的是关于如何“在服务器 A 和服务器 B 之间交换数据”的通用技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-01T11:37:22.193

我以前从未处理过这种情况，但确实为此提出了可能的解决方案。基本上，它需要更改您的主数据库结构。您将保留对这些数据的修改记录，而不是存储数据。因此，如果添加了一条记录，则存储“表 X，插入具有这些值的新记录：...”进行修改后，只需存储表、字段和更改的值。删除时，只需存储删除了哪条记录。每个修改都将与时间戳一起存储。

您的客户端系统将保留其数据库的本地副本，并会在某个日期/时间后定期要求所有数据库修改。然后，您在本地数据库上执行这些修改，它将再次保持最新。

后端呢？好吧，它只会保留一个修改列表，也许还有一个包含基本数据的表。只保留修改还意味着您正在跟踪历史，允许您询问系统一年前的样子。

这将如何执行取决于后端数据库上的修改次数。但是，如果您每 15 分钟请求一次更改，那么每次都不应有那么多数据。

*但同样，我从来没有机会在实际应用中解决这个问题，所以它对我来说仍然是一个理论原理。*这似乎很快，但需要做很多工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-04T01:35:49.170

**选项 1**：编写应用程序以使用行级事务传输数据。这可能需要更长的时间，但不会导致站点使用数据的中断，因为行在读取发生之前和之后都存在，只是带有新数据。此处理将在单独的服务器上进行以最小化负载。

在 sql server 2008 中，您可以设置`READ_COMMITTED_SNAPSHOT`为`ON`确保正在更新的行不会导致阻塞。

但基本上，这个应用程序所做的只是读取新数据，因为它可以从一个数据库中读取到另一个数据库中。

**选项 2**：将数据（表或整个数据库）从聚合服务器移动到前端服务器。如果可能的话，将其自动化。然后切换您的 Web 应用程序以指向新的数据库或表以供将来请求。这可行，但需要控制您可能没有的网络应用程序。

**选项 3**：如果您谈论的是单个表（或者这可以与许多表一起使用），那么您可以做的是视图交换。因此，您针对指向表 A 的 sql 视图编写代码。您是否在表 B 上工作，当它准备好时，您更新视图以指向表 B。您甚至可以编写一个函数来确定活动表并自动化整个交换的事情。

**选项 4**：您也许可以使用服务器的字节级复制之类的东西。不过这听起来很吓人。这基本上是将服务器从 A 点复制到 B 点，精确到字节。它主要用于 DR 情况，这听起来可能是一种/sorta DR 情况，但实际上并非如此。

**选项5**：放弃并学习如何销售保险。:)

# eclipse - 计算 Eclipse 插件安装/下载

> ID：1012227
> 
> 赞同：2
> 
> 时间：2009-06-18T11:51:50.967
> 
> 标签：eclipse, eclipse-plugin

我目前在 sourceforge.net 上托管一个 Eclipse 插件更新站点。SF.net 不允许访问服务器日志，但我仍然想知道插件获得了多少下载。

有没有其他的方法来收集它们？

我*不会*在插件中提供任何类型的“回电”功能，所以请不要建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-19T09:06:59.667

可以在文件发布服务中托管插件 jar，然后让您的 site.xml 文件指向它们。您需要指向特定的镜子才能使其工作。

这将告诉您与正常文件版本一样，人们下载每个文件的次数。

不幸的是，在实践中，这需要大量维护工作，而且往往不可靠（我不断收到错误报告，说更新站点无法正常工作）。

您可以编写一个非常简单的 php 脚本，它只提供相关文件，并将下载记录到文件或数据库中。确保它仔细检查 URL 是否是有效的，当然可以下载给用户 :)

一旦到位，您可以更新 site.xml 以指向正确的内容，或者您​​可以使用 URL 重写来拦截对 jar 文件的请求并通过脚本传递它们。我从未在 SF 服务器上尝试过，但它可能会起作用。

**编辑：** 更好的是，只需一个 php 脚本发送如下重定向：

```
<?php
  $file = $_GET('file');

  // Now log the access to file

  header('Location: ' . $file);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T04:22:06.087

我写了一篇关于如何跟踪 Eclipse 插件更新站点下载的博客。您可以做的是为您的服务器指定一个 url，每次启动下载时，更新站点都会向该 url 发送一个 HTTP HEAD 请求，然后您可以使用该请求来计算插件下载的次数。如果您想跟踪有关谁在下载插件的一些信息，您可以传递信息，例如包名称、版本、操作系统，并将其存储在数据库中。

[http://programmingfortherestofus.blogspot.com/2014/08/tracking-downloads-to-your-eclipse.html](http://programmingfortherestofus.blogspot.com/2014/08/tracking-downloads-to-your-eclipse.html)

我希望它有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-19T08:50:39.873

只是一个想法：AFAIK，SourceForge 确实告诉您您提供了多少数据。您知道插件 JAR 的大小。将提供的数据除以插件的大小，您就可以粗略估计您的下载量。

# c# - Nullable<> 作为 ViewPage 的 TModel

> ID：1012229
> 
> 赞同：1
> 
> 时间：2009-06-18T11:52:20.420
> 
> 标签：c#, asp.net-mvc, viewmodel, nullable, reference-type

哪些 Nullable<> 类型不允许作为 System.Web.Mvc.ViewPage<TModel> 泛型的 TModel 参数传递的可能原因是什么？这有时会很方便。

在 ASP.NET MVC 源代码中定义了 TModel 应该是一个类：

```
public class ViewPage<TModel> : ViewPage where TModel : class 
```

但可空类型是值类型。也许定义可以不那么严格......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T16:44:26.947

目前这样做是没有意义的，因为 ViewPage<T> 在内部总是验证模型是 T 的实例。由于此检查，您永远无法传递 null 。

至于为什么首先不允许结构类型，有很多原因。其中：（a）它可能会鼓励人们为模型使用自定义结构类型，这几乎不是正确的做法；(b) 不能将结构类型作为参数传递给 Controller.UpdateModel()；(c) 模型应该具有引用相等性，以便过滤器可以检查和修改它们；(d) int 等内置结构类型通常不能单独用作模型对象；(e) 结构类型不支持继承，例如将 int 模型传递给 ViewPage<long> 会崩溃。

事实证明，（c）可能不是问题，因为结构类型应该是不可变的，但其他项目要求在支持结构类型之前给予充分的考虑和设计决策。支持这些的后果远远大于仅仅消除对 ViewPage<T> 的约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T11:55:22.253

单个值并不是真正的“模型”-您可以只使用字典并进行转换吗？

# eclipse - Eclipse：保存时执行程序

> ID：1012230
> 
> 赞同：21
> 
> 时间：2009-06-18T11:52:27.250
> 
> 标签：eclipse

我最近遇到了[LESS Leaner CSS](http://lesscss.org/)一个基于 ruby​​ 的 CSS 模板引擎。这个想法听起来很简洁，但实际上我们需要编译程序来获取 CSS。这很麻烦，因为我们在处理 CSS 时进行了太多更改，并且对于我们不想编译的每次编辑。

在 Eclipse 中，有“保存操作”，但它只处理格式更改。

有没有办法在 Eclipse 中保存文件，调用或触发编译？

在 Vi 或 Emacs 中很容易做到这一点。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-06-18T12:06:31.123

我认为您所需要的只是为您的项目定义一个自定义生成器。这样，您可以在某些文件更改时运行程序或 ant 脚本。

右键单击项目 -> 属性 -> 构建器 -> 新建

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-19T08:39:19.957

虽然 Builders 是一个很好的解决方案，但请记住，它们仅在发布构建时才起作用 - 使用自动构建或使用手动调用的手动构建。如果您正在寻找可以在保存后运行的东西，无论自动构建状态如何，您都需要编写一个插件来监听 Eclipse 中的资源更改。

您可以通过创建一个工作区更改侦听器并像这样安装它来做到这一点：

```
ResourcesPlugin.getWorkspace().addResourceChangeListener(
..., IResourceChangeEvent.POST_CHANGE); 
```

我相信你可以从这里拿走它:-)

# php - 使用函数 imagecreatefromjpeg() 时 php 中的图像上传错误

> ID：1012231
> 
> 赞同：1
> 
> 时间：2009-06-18T11:52:29.997
> 
> 标签：php, image-processing, image-uploading

我正在调整上传的图像大小，并在使用该函数调整大小后创建新图像`imagecreatefromjpeg()`

我也能够成功地调整大尺寸图像的大小。

但是当我尝试上传大小超过 1.5 MB 左右的图像时，我收到以下错误

**致命错误：已用尽允许的 33554432 字节内存大小（尝试分配 12288 字节）**

即使我的图像大小小于 2 MB，也会出现上述错误

谁能告诉我这里哪里出错了？

我真的很感激

谢谢，

格纳内什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T11:57:19.503

您需要增加可供 PHP 使用的内存量。尝试将此行添加到您的 .htaccess 中，它为我解决了问题：

```
php_value memory_limit 64M 
```

# c# - 如何进行多用户事件驱动的屏幕更新？

> ID：1012234
> 
> 赞同：2
> 
> 时间：2009-06-18T11:53:02.960
> 
> 标签：c#, .net, events

我在一个 Delphi 程序上工作，该程序使用 firebird 数据库来存储它的数据。它使用自家种植的 orm 系统。当两个用户查看相同的数据时，例如在数据网格中，一个用户更改了某些内容，另一个屏幕会立即更新。它的工作方式是一个程序中的对象将它们自己存储在数据库中。数据库有一个触发器，该触发器在辅助更改日志表中注册此更改。写入此更改日志表会触发一个事件。第二个程序正在侦听该事件，并从更改日志表中的条目中了解更改了哪个对象。它将重新加载该对象并在该程序内部引发一个事件。此事件将导致显示此对象的所有屏幕以及基于此对象的行为的所有对象进行更新。我们想切换到 .Net 和 MS SQL。我的问题是：1）我如何使用 MS SQL 做到这一点？2）是否有支持这一点的框架？所以我不必将它移植到.Net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-13T10:50:54.917

由于 .Net Framework 2.0 和 MSSqlServer 2005 版本支持更改通知：使用[SqlDependency](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency(VS.80).aspx)类。您在[codeproject](http://www.codeproject.com/KB/database/chatter.aspx)中有一个示例。

[还请查看有关在msdn](http://msdn.microsoft.com/en-us/library/aewzkxxh.aspx)中使用通知的一些建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T21:50:47.583

听起来这在 C# 中实现起来并不难。尝试将“观察者模式”与您想要的任何自定义模式一起使用。

# sql - SQL：选择性子查询

> ID：1012237
> 
> 赞同：4
> 
> 时间：2009-06-18T11:54:03.597
> 
> 标签：sql, conditional, subquery

我有一个 SQL 查询（MSSQLSERVER），我在其中使用子选择将列添加到结果集中：

```
SELECT P.name, 
(select count(*) from cars C where C.type = 'sports') AS sportscars,
(select count(*) from cars C where C.type = 'family') AS familycars,
(select count(*) from cars C where C.type = 'business') AS businesscars
FROM people P
WHERE P.id = 1; 
```

上面的查询只是来自一个有点废话的测试设置，但它作为我认为的示例已经足够好了。我实际上正在处理的查询跨越了许多复杂的表，这些表只会分散手头的问题。

在上面的示例中，“people”表中的每条记录还具有三个附加列：“wantsSportscar”、“wantsFamilycar”和“wantsBusinesscar”。现在我想做的只是如果人员表中的相应“想要.....”字段设置为“真”，则只对每个附加列进行子选择。换句话说，如果 P.wantsSportscar 为那个特定的人设置为 true，我只想做第一个子选择。第二个和第三个子选择应该以类似的方式工作。

因此，此查询的工作方式应该是显示特定人员的姓名以及他想要拥有的汽车类型的可用车型数量。可能值得注意的是，我的最终结果集将始终只包含一条记录，即一个特定用户的记录。

重要的是，如果一个人对某种类型的汽车不感兴趣，那么该类型的列将不会包含在最终结果集中。一个确保这一点很清楚的例子：

如果 A 想要一辆跑车和一辆家庭车，则结果将包括“名称”、“跑车”和“家庭车”列。

如果 B 想要商务车，则结果将包括“名称”和“商务车”列。

我一直在尝试将各种组合与 IF、CASE 和 EXISTS 语句结合使用，但到目前为止，我还无法获得语法正确的解决方案。有谁知道这是否可能？请注意，查询将存储在存储过程中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-18T12:04:46.260

在您的情况下，可能存在`8`列布局，为此，您将需要`8`单独的查询（或动态构建查询）。

无法在单个查询中更改结果集布局。

相反，您可以按如下方式设计查询：

```
SELECT  P.name, 
        CASE WHEN wantssport = 1 THEN (select count(*) from cars C where C.type = 'sports') ELSE NULL END AS sportscars,
        CASE WHEN wantsfamily = 1 THEN (select count(*) from cars C where C.type = 'family') ELSE NULL END AS familycars,
        CASE WHEN wantsbusiness = 1 THEN (select count(*) from cars C where C.type = 'business') ELSE NULL END AS businesscars
FROM    people P
WHERE   P.id = 1 
```

`NULL`如果一个人不想要它，它将在适当的列中选择，并`NULL`在客户端解析这些。

请注意，关系模型根据 来回答查询`relations`。

在你的情况下，关系如下：“这个人的需求满足了这么多跑车，这么多商务车和这么多家用车”。

关系模型总是用四元关系回答这个特定的问题。

它没有省略任何关系成员：相反，它只是将它们设置为`NULL`which is the `SQL`' 表示关系成员未定义、适用或有意义的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T12:02:43.690

我主要是甲骨文的人，但很有可能同样适用。除非我误解了，否则您想要的在那个级别是不可能的 - 您将始终拥有静态数量的列。您的查询可以控制该列是否为空，但由于在查询的最外层部分您指定了 X 列，因此您可以保证在结果集中获得 X 列。

正如我所说，我不熟悉 MS SQL Server，但我猜会有一些执行动态 SQL 的方法，在这种情况下你应该研究它，因为它应该允许你构建一个更灵活的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T12:08:44.177

您可以通过首先将值作为单独的行选择到临时表中，然后在该表上执行 PIVOT（将行转换为列）来执行您想要的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T12:11:10.740

> 重要的是，如果一个人对某种类型的汽车不感兴趣，那么该类型的列将不会包含在最终结果集中。一个确保这一点很清楚的例子：

您将无法在纯 SQL 中执行此操作。我建议您只将此列设为 NULL 或 ZERO。

如果您希望在添加新车时动态扩展查询，那么 PIVOTing 可以为您提供一些帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T12:33:59.243

为了使这项工作变得简单，您需要学习三个基础知识。第一个是数据规范化，第二个是 GROUP BY，第三个是 PIVOT。

首先，数据规范化。您对 people 表的设计不是第一范式。“wantsports”、“wantfamily”、“wantbusiness” 列确实是一个重复的组，尽管它们可能看起来不像一个。如果您可以修改表设计，您会发现创建第三个表是有利的，我们称之为“peoplewant”，具有两个关键列，personid 和 cartype。如果您愿意，我可以详细说明为什么这种设计会更加灵活和强大，但我现在将跳过它。

到 GROUP BY。这使您可以生成一个结果，在结果的一行中汇总每个组。

```
SELECT 
    p.name, 
    c.type, 
    c.count(*) as carcount
FROM people p, 
   INNER JOIN peoplewant pw ON p.id = pw.personid 
   INNER JOIN cars c on pw.cartype = c.type
WHERE
   p.id = 1
GROUP BY 
   p.name,
   c.type 
```

这个（未经测试的）查询为您提供了您想要的结果，除了结果对于人们想要的每种汽车类型都有一个单独的行。

最后，枢轴。DBMS 中的 PIVOT 工具允许您将此结果转换为一个表格，其中该人只有一行，并且该人想要的每种车型都有一个单独的列。我自己没有使用 PIVOT，所以我会让其他人编辑此响应以提供使用 PIVOT 的示例。

如果您使用相同的技术在一次扫描中检索多个人的数据，请记住，对于任何人想要的每种想要的类型都会出现一列，而对于不想要汽车类型的人，PIVOT 结果中将出现零那是在结果列中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-21T23:37:14.250

刚刚通过谷歌搜索看到这篇文章，所以我意识到我参加这个聚会有点晚了，但是..当然这确实是*可能*的......但是，我不建议真的这样做，因为它通常被认为是非常糟糕的事情（tm）。

动态 SQL 就是您的答案。

在我说怎么做之前，我想先说一下，如果你不清理来自应用程序的输入，动态 SQL 是一件非常危险的事情。

因此，请谨慎行事：

```
declare @sqlToExecute nvarchar(max);
declare @includeSportsCars bit;
declare @includeFamilyCars bit;
declare @includeBusinessCars bit;

set @includeBusinessCars = 1
set @includeFamilyCars = 1
set @includeSportsCars  = 1

set @sqlToExecute = 'SELECT P.name '

if @includeSportsCars = 1 
    set @sqlToExecute = @sqlToExecute + '(select count(*) from cars C where C.type = ''sports'') AS sportscars, ';
if @includeFamilyCars = 1
    set @sqlToExecute = @sqlToExecute + '(select count(*) from cars C where C.type = ''family'') AS familycars, ';
if @includeBusinessCars = 1
    set @sqlToExecute = @sqlToExecute + '(select count(*) from cars C where C.type = ''business'') AS businesscars '

set @sqlToExecute = @sqlToExecute + ' FROM people P WHERE P.id = 1;';

exec(@sqlToExecute) 
```

# php - 如何关闭这些 PHP 警告？

> ID：1012238
> 
> 赞同：5
> 
> 时间：2009-06-18T11:54:35.860
> 
> 标签：php, warnings

run.php 只是一个普通的 PHP 文件：

```
[root@www4 robot]# php run.php 
No log handling enabled - turning on stderr logging
Cannot find module (HOST-RESOURCES-MIB): At line 0 in (none)
Cannot find module (HOST-RESOURCES-TYPES): At line 0 in (none)
Cannot find module (UCD-DISKIO-MIB): At line 0 in (none)
Cannot find module (TCP-MIB): At line 0 in (none)
Cannot find module (UDP-MIB): At line 0 in (none)
Cannot find module (MTA-MIB): At line 0 in (none)
Cannot find module (NETWORK-SERVICES-MIB): At line 0 in (none)
Cannot find module (LM-SENSORS-MIB): At line 0 in (none)
Cannot find module (IP-MIB): At line 0 in (none)
Cannot find module (IF-MIB): At line 0 in (none)
Cannot find module (SNMPv2-MIB): At line 0 in (none)
Cannot find module (SNMPv2-SMI): At line 0 in (none)
Cannot find module (NOTIFICATION-LOG-MIB): At line 0 in (none)
Cannot find module (DISMAN-EVENT-MIB): At line 0 in (none)
Cannot find module (DISMAN-SCHEDULE-MIB): At line 0 in (none)
Cannot find module (UCD-SNMP-MIB): At line 0 in (none)
Cannot find module (UCD-DEMO-MIB): At line 0 in (none)
Cannot find module (SNMP-TARGET-MIB): At line 0 in (none)
Cannot find module (NET-SNMP-AGENT-MIB): At line 0 in (none)
Cannot find module (SNMP-FRAMEWORK-MIB): At line 0 in (none)
Cannot find module (SNMP-MPD-MIB): At line 0 in (none)
Cannot find module (SNMP-USER-BASED-SM-MIB): At line 0 in (none)
Cannot find module (SNMP-VIEW-BASED-ACM-MIB): At line 0 in (none)
Cannot find module (SNMP-COMMUNITY-MIB): At line 0 in (none)
Cannot find module (IPV6-ICMP-MIB): At line 0 in (none)
Cannot find module (IPV6-MIB): At line 0 in (none)
Cannot find module (IPV6-TCP-MIB): At line 0 in (none)
Cannot find module (IPV6-UDP-MIB): At line 0 in (none)
Cannot find module (IP-FORWARD-MIB): At line 0 in (none)
Cannot find module (NET-SNMP-EXTEND-MIB): At line 0 in (none)
Cannot find module (UCD-DLMOD-MIB): At line 0 in (none)
Cannot find module (SNMP-NOTIFICATION-MIB): At line 0 in (none)
Cannot find module (SNMPv2-TM): At line 0 in (none)
Cannot find module (NET-SNMP-VACM-MIB): At line 0 in (none) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2011-03-23T13:44:00.900

我刚刚关闭了 snmp 扩展

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-18T12:01:12.193

根据[这篇文章](http://bytes.com/groups/php/453256-cannot-find-module-error-messages-php#post1733682)，您没有安装正确的 SNMP 管理信息库。为您的 linux 发行版安装正确的软件包，例如*net-snmp*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-18T20:46:11.787

当某些事情给您带来错误时，最糟糕的方法就是“关闭它们”。如果您的汽车仪表板上的应急灯亮起，您是去维修还是拧下灯泡？！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-26T16:35:31.207

原因有 PHP 扩展。你试试：

```
Open Setup PHP file.
In setting PHP extensions removed extensions below:
   - PostgreSQL
   - Shared Memo....
   - SNMP
   - SOAP
   - SQLite
   - SQLite 3 
```

参考： [http ://blog.vnlives.net/2013/10/php-bug-no-log-handling-enabled-turning.html](http://blog.vnlives.net/2013/10/php-bug-no-log-handling-enabled-turning.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T22:50:46.527

如果这是 Windows 设置，您可以转到`add/remove programs`（或`program features`）并在 PHP 程序中进行**更改**`choose item to install`，并确保取消选择扩展`SNMP`和其他不需要的扩展。

完成安装向导。之后做一个`iisreset`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-18T11:59:17.877

似乎您的 php.ini 文件配置错误以加载不存在的模块。

# javascript - 关于 DOM 的变量

> ID：1012241
> 
> 赞同：0
> 
> 时间：2009-06-18T11:54:41.600
> 
> 标签：javascript, string, dom, variables

这肯定是一个 JS 初学者的问题。

我的问题是我想使用变量的值`type`来访问相关的复选框；但是它将变量视为字符串。我已经尝试了两种方式。

```
function toggleGroup(type) {
    if (document.getElementById(type).checked == true){
        alert("foo");
    }
} 
```

或者

```
function toggleGroup(type) {
    if (document.nav.type.checked == true){
        alert("foo");           
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-18T11:58:25.087

我们无法知道应该如何处理类型——你没有向我们展示函数是如何被调用的（特别是，我们不知道你作为它的参数传递了什么）。

如果它*是*一个字符串（与元素的 id 匹配），`document.getElementById(type).checked`那么应该可以工作（尽管`== true`是多余的）。

`document.nav.type.checked`不应该工作，因为点符号属性名称没有被插值。您必须为此使用[方括号表示法](http://www.dev-archive.net/articles/js-dot-notation/)：`document.forms.nav.elements[type].checked`. 这将匹配 name 或 id - 如果您有多个具有相同名称的元素，那么`document.forms.nav.elements[type]`将是一个可以视为数组的对象（并且不会具有选中的属性）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-06-18T11:58:59.657

您也可以与“真实”进行比较

# c# - C#高级查询语句字符串处理

> ID：1012242
> 
> 赞同：2
> 
> 时间：2009-06-18T11:54:42.067
> 
> 标签：c#, .net, oop, string

我正在寻找将字符串处理成对象树的最佳实践或库。

这是示例：

"[age] = '37' And [gender] 不为 Null 且 [optindate] > '2003/01/01' And [idnumber] 为 Null And ([saresident] = '52' 或 [citizenship] Like 'abc% ')"

我应该能够将其对象化为这样的树：

```
{attribute='age', operator='=', value='37', opperand='And'}
{attribute='gender', operator='Is Not Null', value='', opperand='And'}
{attribute='optindate', operator='>', value='2003/01/01', opperand='And'} 
```

ETC....

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T11:56:58.397

[动态 LINQ 库](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)怎么样？您可以“按原样”使用，也可以查看它如何构建`Expression<Func<T,bool>>`谓词（即树）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T11:57:55.400

看看[正则表达式](http://www.regular-expressions.info/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T12:06:59.297

如果需要将操作存储在树结构中，则应使用后缀或前缀表示法。例如，年龄 = 37 且性别不为空，应存储为

和 = 年龄 37 ！= 性别 null

所以树应该像

```
 and
   =         !=
age 37  gender  null 
```

您可以使用这些链接了解更多详细信息：[用于操作](http://www.cs.cas.cz/portal/AlgoMath/AlgebraicStructures/AlgebraicOperations/NotationForOperations.htm)和[表达式的符号、使用 C 进行转换和评估（您需要了解的关于表达式的所有信息）](http://www.programmersheaven.com/2/Art_Expressions_p1)

# .net - 在未安装 Visual Studio 的机器上使用 FUSLOGVW.EXE

> ID：1012252
> 
> 赞同：81
> 
> 时间：2009-06-18T11:58:06.850
> 
> 标签：.net, assembly-resolution, fusion-log-viewer

我目前在我们的开发服务器上遇到了一些程序集绑定问题。我想用 Fusion Log Viewer 进一步调查这个问题。由于机器上没有安装 Visual Studio，我将 FUSLOGVW.EXE 复制到本地文件夹并在那里启动它。

这应该有效还是需要其他东西？我没有得到应用程序正在记录任何失败的印象（是的，我的设置正确）。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-12-03T20:56:35.007

正如上面的答案和评论中提到的，您需要做两件事才能让融合记录器在没有 Visual Studio 的机器上运行：

1.  复制到那`fuslogvw.exe`台机器。您可以在安装 .NET 的任何位置找到它（例如 . `C:\Program Files (x86)\Microsoft SDKs\Windows\v8.1A\bin\NETFX 4.5.1 Tools\x64\FUSLOGVW.exe`）
2.  复制`flogvwrc.dll`到与该机器相同的位置`fuslogvw.exe`。您可以在`1033`所在的子目录中找到它`fuslogvw.exe`（例如。`C:\Program Files (x86)\Microsoft SDKs\Windows\v8.1A\bin\NETFX 4.5.1 Tools\x64\1033\flogvwrc.dll`）

一旦您将它们放在一个目录中，您就可以运行日志查看器`fuslogvw.exe`。`flogvwrc.dll`您不需要更改注册表或任何其他更改。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2009-06-18T12:04:00.473

Fuslogvw 不做日志记录。fusion loader 就是这样做的。Fuslogvw 只显示日志输出。您是否在配置的输出目录中获得任何日志？

哦，它应该可以在没有安装 Visual Studio 的机器上运行。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-03-11T20:58:29.530

执行上述操作对我不起作用..

我建议改为执行以下操作：

在：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fusion

添加：

*   ForceLog 设置值为 1 (DWORD )
*   LogFailures 将值设置为 1 (DWORD)
*   LogResourceBinds 设置值为 1 (DWORD)
*   LogPath (String) 将值设置为日志文件夹，即 C:\FusionLog\

非常简单..这对我有用！我使用的是 Windows 2012 R2。

在以下位置找到： http: [//pauliom.com/2012/01/30/how-to-log-net-binding-errors-when-you-dont-have-fuslogvw-exe/](http://pauliom.com/2012/01/30/how-to-log-net-binding-errors-when-you-dont-have-fuslogvw-exe/)

谢谢

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-07-30T20:49:57.663

您还需要创建一个值为的`LogFailures`键来打开日志。您应该在不测试时将此值设置回 0，否则它将继续填充日志。创建一个文件夹，例如。并在程序集绑定日志查看器的设置中的自定义日志路径中引用它。`HKLM\SOFTWARE\Microsoft\Fusion``DWORD``1``C:\fuslog`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-29T14:43:41.273

我编写了一个名为[Fusion++ 的程序集绑定日志查看器，并将其放在 GitHub 上](https://github.com/awaescher/Fusion)。它会写入您需要激活机器上的日志记录的注册表项，然后解析日志，这样您就不必进行文件搜索。

[您可以从这里](https://github.com/awaescher/Fusion/releases)或通过巧克力 ( `choco install fusionplusplus`)获取最新版本。

我希望你和这里的一些访客可以用它来节省一些有价值的终生时间。

[![融合++](../Images/0d14a1540d91a1ee1f72c6584dde72b9.png)](https://i.stack.imgur.com/2uOEO.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-18T12:05:25.383

您可能使用了错误版本的 fuslogvw。检查 c:\program files\microsoft SDKs 或 c:\program files\Microsoft.net\SDK 以获得不同版本的实用程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-12T07:27:54.023

必须将 HKLM\SOFTWARE\Microsoft\Fusion 设置为 0，因为它会使您的系统 Visual Studio 和其他东西变得如此缓慢，只是因为在打开数百个文件句柄时日志记录需要时间。我已经看到了我从未要求过日志的程序的条目和日志文件！

在这里，我给你一个例子，说明随着时间的推移会发生什么；我不知道 fusion / fuslogvw 记录所有类型的事件。工具启动时应该明确这一点，它会继续记录并使您的系统变慢，主要是在 VS 启动非常大的项目时。我很感谢有关如何关闭它的信息。当我需要它时，我会再次使用它，因为它是一个很好的工具。但在这方面，这只是愚蠢的。约瑟夫

```
E:\Users\C770817\fuslogvw>tree
Folder PATH listing for volume LaCie
Volume serial number is B098-2591
E:.
├───Default
│   ├───4fe3a146
│   ├───6bf3b89
│   ├───758f6436
│   ├───92c7e946
│   ├───addinutil.exe
│   ├───aspnet_regiis.exe
│   ├───b210afcc
│   ├───CreateSchedulerFolder.exe
│   ├───dbb8b39f
│   ├───devenv.exe
│   ├───Duplicati.CommandLine.exe
│   ├───DuplicatiBgMgr.exe
│   ├───e04f35ff
│   ├───EA.exe
│   ├───edd6a3ed
│   ├───ElementsHelper.exe
│   ├───Eval32.exe
│   ├───EXCEL.EXE
│   ├───FxCopCmd.exe
│   ├───FX_{b05566ac-fe9c-4368-be02-7a4cbb7cbe11}
│   ├───FX_{b05566ad-fe9c-4363-be05-7a4cbb7cb510}
│   ├───FX_{b05566ae-fe9c-4363-be05-7a4cbb7cb510}
│   ├───FX_{c7b8fb06-bfe1-4c2e-9217-7a69a95bbac4}
│   ├───FX_{c7b8fb07-bfe1-4c2e-9217-7a69a95bbac4}
│   ├───FX_{d1764f60-2007-4ad4-a1e8-e7714ed4eb5d}
│   ├───GfxUIEx.exe
│   ├───InetMgr.exe
│   ├───InstallUtil.exe
│   ├───IntelliTrace.exe
│   ├───ISSDeployer.exe
│   ├───ISSLauncherTray.exe
│   ├───ISSShortcutManager.exe
│   ├───JabraCiscoJabberDriver.exe
│   ├───JabraDeviceService.exe
│   ├───LocalAccountMgmt.exe
│   ├───MFPPrinterTool.exe
│   ├───Microsoft.VisualStudio.Web.Host.exe
│   ├───mmc.exe
│   ├───MSBuild.exe
│   ├───mscorsvw.exe
│   ├───msdeploy.exe
│   ├───MsDepSvc.exe
│   ├───msvsmon.exe
│   ├───OxygeneRegClean2.exe
│   ├───OxygeneSchemaCatalog.exe
│   ├───pcee4.exe
│   ├───powershell.exe
│   ├───powershellcustomhost.exe
│   ├───RegisterEvent.exe
│   ├───RemObjects.Everwood.LicenseManager.exe
│   ├───sdiagnhost.exe
│   ├───SmsClrHost.exe
│   ├───SMSvcHost.exe
│   ├───Spezpla.exe
│   ├───Spezpla.vshost.exe
│   ├───sqlservr.exe
│   ├───SvcConfigEditor.exe
│   ├───Toolbox2Test.exe
│   ├───TrayCtrlNotify.exe
│   ├───UITServ.exe
│   ├───UserGUI.exe
│   ├───UserInstallTool.exe
│   ├───VideoHost.exe
│   ├───VS2012.4.exe
│   ├───VSIXInstaller.exe
│   ├───vssphost4.exe
│   ├───w3wp.exe
│   ├───WCFSpezplaServiceClient.exe
│   ├───WCFSpezplaServiceClient.vshost.exe
│   ├───WcfSvcHost.exe
│   ├───WebBrowserServer.exe
│   ├───WebDev.WebServer40.exe
│   ├───WebPlatformInstaller.exe
│   ├───WINPROJ.EXE
│   └───wsmprovhost.exe
└───NativeImage
    ├───4fe3a146
    ├───6bf3b89
    ├───758f6436
    ├───92c7e946
    ├───addinutil.exe
    ├───aspnet_regiis.exe
    ├───b210afcc
    ├───CreateSchedulerFolder.exe
    ├───dbb8b39f
    ├───devenv.exe
    ├───Duplicati.CommandLine.exe
    ├───DuplicatiBgMgr.exe
    ├───e04f35ff
    ├───EA.exe
    ├───edd6a3ed
    ├───ElementsHelper.exe
    ├───Eval32.exe
    ├───EXCEL.EXE
    ├───FxCopCmd.exe
    ├───FX_{b05566ac-fe9c-4368-be02-7a4cbb7cbe11}
    ├───FX_{b05566ad-fe9c-4363-be05-7a4cbb7cb510}
    ├───FX_{b05566ae-fe9c-4363-be05-7a4cbb7cb510}
    ├───FX_{c7b8fb06-bfe1-4c2e-9217-7a69a95bbac4}
    ├───FX_{c7b8fb07-bfe1-4c2e-9217-7a69a95bbac4}
    ├───FX_{d1764f60-2007-4ad4-a1e8-e7714ed4eb5d}
    ├───GfxUIEx.exe
    ├───InetMgr.exe
    ├───InstallUtil.exe
    ├───IntelliTrace.exe
    ├───ISSDeployer.exe
    ├───ISSLauncherTray.exe
    ├───ISSShortcutManager.exe
    ├───JabraCiscoJabberDriver.exe
    ├───JabraDeviceService.exe
    ├───LocalAccountMgmt.exe
    ├───MFPPrinterTool.exe
    ├───Microsoft.VisualStudio.Web.Host.exe
    ├───mmc.exe
    ├───MSBuild.exe
    ├───mscorsvw.exe
    ├───msdeploy.exe
    ├───MsDepSvc.exe
    ├───msvsmon.exe
    ├───OxygeneRegClean2.exe
    ├───OxygeneSchemaCatalog.exe
    ├───pcee4.exe
    ├───powershell.exe
    ├───powershellcustomhost.exe
    ├───RegisterEvent.exe
    ├───RemObjects.Everwood.LicenseManager.exe
    ├───sdiagnhost.exe
    ├───SmsClrHost.exe
    ├───SMSvcHost.exe
    ├───Spezpla.exe
    ├───Spezpla.vshost.exe
    ├───SpezplaPlanTest.exe
    ├───sqlservr.exe
    ├───SvcConfigEditor.exe
    ├───Toolbox2Test.exe
    ├───TrayCtrlNotify.exe
    ├───UITServ.exe
    ├───UserGUI.exe
    ├───UserInstallTool.exe
    ├───VideoHost.exe
    ├───VS2012.4.exe
    ├───VSIXInstaller.exe
    ├───vssphost4.exe
    ├───w3wp.exe
    ├───WCFSpezplaServiceClient.exe
    ├───WCFSpezplaServiceClient.vshost.exe
    ├───WcfSvcHost.exe
    ├───WebBrowserServer.exe
    ├───WebDev.WebServer40.exe
    ├───WebPlatformInstaller.exe
    ├───WINPROJ.EXE
    └───wsmprovhost.exe

E:\Users\C770817\fuslogvw>
E:\Users\C770817\fuslogvw>tree > x.txt

E:\Users\C770817\fuslogvw> 
```

# javascript - jQuery 随机淡入图像

> ID：1012264
> 
> 赞同：6
> 
> 时间：2009-06-18T12:01:25.563
> 
> 标签：javascript, jquery, image, fade, setinterval

我有一个包含很多小图像的容器。

```
<div id="container">
   <img src="1.jpg" />
   <img src="2.jpg" />
   <img src="3.jpg" />
   ...
   <img src="100.jpg" />
</div> 
```

我将不透明度设置为 0。（不隐藏）然后我想在半秒后显示（淡入）随机图像。例如第 5、第 1、第 55...

任何建议，非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-18T12:09:24.567

试试这个

```
<script type="text/javascript">

//generate random number
var randomnumber=Math.floor(Math.random()*$("#container").children().length);
$(function() {
    //hide all the images (if not already done)
    $("#container > img").hide();

    //set timeout for image to appear (set at 500ms)
    setTimeout(function(){
       //fade in the random index of the image collection
       $("#container > img:eq(" + randomnumber + ")").fadeIn();
    }, 500);       
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T12:09:11.507

使用数字模式为每个图像添加一个 id，然后使用 javascript 中的 math.random 淡化具有随机生成的 id 的图像

```
function getImage(minim,maxim) {
    return "img" + Math.round(Math.random()*(maxim-minim)+minim);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T12:09:17.717

（对我来说）不清楚你是想在半秒后开始淡化，还是在半秒后淡入。但是，半秒*后淡入淡出。*如果你想这样做，只需忽略 setTimeout() 的东西

您想要做的一般概述是：
在页面加载后创建一个半秒后调用的函数 (setTimeout)
该函数应该生成一个随机数，最小值为 0，最大值为#container 元素的子元素减 1
使用随机数提供的索引淡化 #container 的子元素。

Pusdo代码（我已经很久没有用jQuery做过任何事情了。或者Javascript）

```
function onDocumentReady(){
    setTimeout(500, "fadeInRandom()");
}

function fadeInRandom(){    
    var numElements = $("#container").children().length;
    var randomElem = Math.random() * (numElements-1);
    $("#container").children()[randomElem].fadeIn();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-02-16T10:03:48.223

如果您想淡入所有图像，则无需使用所有随机的东西，只需 cicle 并延迟 500 毫秒到 1 秒之间的随机数。无论如何，您必须放置隐藏功能。或者使用不透明度使用动画 css。

```
$('#container img').each(function(index) {

   $(this).delay( Math.random()*500+500 ).fadeIn();

}); 
```

你不会发现没有比这更简单的了，而且效果相同

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T12:21:53.917

我会使用生成的随机数来创建图像的 'src' 属性并相应地构建 jQuery 选择器：

```
setInterval ( showRandomImage, 500 );

function showRandomImage()
{
    var randNo = Math.floor(Math.random() * 101);
    $("#container > img[src=" + randNo + "'.jpg']")
                   .animate({opacity: 0}, 500).fadeIn('slow');
} 
```

# firefox - elasticfox 插件去哪儿了？

> ID：1012269
> 
> 赞同：5
> 
> 时间：2009-06-18T12:02:57.963
> 
> 标签：firefox, amazon-web-services

我是新的开发机器，我正在设置它。我通过firefox插件选项找到了S3管理器，但是找不到elastic fox ---它去哪了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T03:36:29.450

自发布此问题以来，地址似乎已更改。

[http://s3.amazonaws.com/ec2-downloads/elasticfox.xpi](http://s3.amazonaws.com/ec2-downloads/elasticfox.xpi)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T12:06:19.487

也许我误解了你的问题，但如果安装正确，可以在 Firefox 的工具菜单下找到[Elastic Fox 。](http://developer.amazonwebservices.com/connect/entry.jspa?externalID=609)如果您正在尝试安装它，您可以转到 Elastic Fox 页面并单击下载按钮来安装插件 .xpi。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-23T07:59:10.723

在这里您可以找到独立版本以及 FF 扩展[http://elasticfox-ec2tag.s3-website-ap-northeast-1.amazonaws.com/](http://elasticfox-ec2tag.s3-website-ap-northeast-1.amazonaws.com/) (xpi / dmg / exe )

# java - 机器人类的关键事件

> ID：1012270
> 
> 赞同：2
> 
> 时间：2009-06-18T12:03:06.310
> 
> 标签：java

处理过程中出现问题 Robot.KeyPress(KeyEvent...) 是否需要每次都指定所有键...例如 Robot.KeyPress(KeyEvent.VK_A); Robot.KeyPress(KeyEvent.VK_B); Robot.KeyPress(KeyEvent.VK_C); 如果有任何不每次都重复这个的捷径......请告诉我......

并且在客户端收到的密钥的解释是不同的......而不是从服务器端发送的......

所以请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T12:17:43.037

没有一种方法可以接受来自大量按键的同时按键，因为大多数键盘在给定时间对按键的最大数量有限制，并且很少有理由同时按键超过三个。

如果您有要重复发送的特定键序列，可以将其放入数组并遍历它：

```
 int[] events = {KeyEvent.VK_A, KeyEvent.VK_B, KeyEvent.VK_C};
    Robot robot;
    try {
        robot = new Robot();
        for (int i = 0; i < events.length; i++) {
            robot.keyPress(events[i]);
            robot.keyRelease(events[i]);
        }
    } catch (AWTException e) {
        e.printStackTrace();
    } 
```

或者你可以把它放在一个函数中。

至于键的解释，我猜你忘记了 keyRelease() 调用，如果没有，你能准确地发布你在客户端/服务器端收到的内容吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T13:42:42.070

我为使用 AWT Robot 编写了一个高级、方便的 API。[查看Window Licker](http://windowlicker.googlecode.com)库中的 Gestures API 。

它解决了[键事件在不同语言环境中被解释为不同符号](https://stackoverflow.com/questions/915581/how-to-enter-text-in-a-cross-platform-way-with-the-awt-robot)的问题，但仅通过使用配置文件来描述键盘布局。我还没有找到一种仅通过使用 Java API 来自动执行此操作的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-20T22:41:05.570

你可能想看看这个[SmartRobot](http://gruimed.blogspot.com/2009/09/using-java-robot-to-type-text-strings.html)类，它实现了你所需要的

# html - Internet Explorer：在 tablerow 上设置 css 类？

> ID：1012276
> 
> 赞同：0
> 
> 时间：2009-06-18T12:05:13.623
> 
> 标签：html, css, internet-explorer

**UDPATE** 我正在传递一个 AJAX 响应。似乎 IE 不喜欢“新”CSS...如果放在样式表或初始页面请求中，效果很好...

Internet Explorer 似乎对设置在 tablerows 上的类没有反应。它是否正确？如果是这样，有解决方法吗？还是我做错了什么？

```
<style type="text/css">
    table tr.red td {background-color:red;}
</style>
<table>
    <tr class="red">
        <td>test</td>
        <td>test</td>
    </tr>
    <tr>
        <td>test</td>
        <td>test</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T12:24:24.973

我看不出有任何理由不应该这样做。

也许另一个选择器具有更多的特异性并且正在覆盖该样式。也许 JS 正在插入一个样式属性。也许您的桌子的背景已经是红色的，而您没有注意到它。有很多原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T12:33:02.303

您使用的是有效的文档类型，还是 IE 试图以怪癖模式呈现？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-19T15:21:19.427

这是（一次）正确玩 HTML 游戏的 Internet Explorer。样式表应该只出现在文档的 <head> 中，因此以后使用 AJAX 添加它们是无效的。最好的解决方案是将规则添加到头部的主样式表中。您可能会提前了解所有样式规则，因此将它们放在样式表中是有意义的——不要因为最初没有使用它们而觉得您需要错过它们。

如果您*确实*需要使用 AJAX 加载样式，最好使用 Javascript 来应用它们（在这种情况下可以使用 Javascript，因为您*知道*用户拥有 javascript，因为他们已经通过 AJAX 获取了内容）或内联样式（使用 style 属性）。jQuery 为处理 CSS 提供了许多有用的函数，所以我会看一下 - 但如果可能的话，我强烈建议将样式表中的所有样式放在头部。

# c# - nServiceBus、Rhino 服务总线、MassTransit - 视频、演示、学习资源

> ID：1012289
> 
> 赞同：13
> 
> 时间：2009-06-18T12:08:56.157
> 
> 标签：c#, nservicebus, rhino, servicebus, masstransit

嘿，人们很想听听您拥有或知道的有关 nServiceBus、Rhino Service Bus 和 MassTransit 的任何资源。

*   视频？
*   博客文章？
*   图书？
*   演示项目等

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-10-28T09:07:27.633

如果您对公共交通感兴趣，可以查看：

[入门和文档](http://docs.masstransit-project.com/en/latest/index.html)

如果您使用的是[结构图，则](http://blogs.dovetailsoftware.com/blogs/kmiller/archive/2009/08/26/producing-and-consuming-messages-using-masstransit-and-structuremap.aspx)[优雅的代码播客](http://elegantcode.com/2009/03/18/code-cast-25-masstransit/)

[Dru Sellers 博客](http://codebetter.com/drusellers/) [Chris Patterson 博客](http://blog.phatboyg.com/) [他们的 Google 群组](http://groups.google.com/group/masstransit-discuss/)

在某些时候，您会访问 [http://codebetter.com/blogs/dru.sellers/archive/2009/01/11/topshelf.aspx](http://codebetter.com/blogs/dru.sellers/archive/2009/01/11/topshelf.aspx)

希望能帮助到你

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-18T16:12:04.287

Google Groups的[讨论组](https://groups.google.com/forum/#!forum/particularsoftware)是一个非常好的资源。

到目前为止，我已经在[ArtOfBabel.com](http://ArtOfBabel.com)上写了三篇关于 nServiceBus 的文章：

*   [与 nServiceBus 的开源集成](http://artofbabel.com/specials/55-open-source-integration-with-nservicebus.html)
*   [使用 nServiceBus 1.9 启动并运行](http://artofbabel.com/specials/70-up-and-running-with-nservicebus-19.html)
*   [nServiceBus：构建解决方案](http://artofbabel.com/specials/72-nservicebusbuildingthesolution.html)

更多的文章也应该很快就会出现。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-09-29T19:26:38.060

[Udi Dahan](http://www.udidahan.com/category/nservicebus/)和[Andreas Öhlund 都](http://andreasohlund.blogspot.com/search/label/NServiceBus)写了很多关于 NServiceBus 的博客

此外，尝试使用 Twitter 井号标签[#NServiceBus](http://twitter.com/#search?q=%23nservicebus)

推特用户：

[http://twitter.com/UdiDahan](http://twitter.com/UdiDahan)

[http://twitter.com/andreasohlund](http://twitter.com/andreasohlund)

[http://twitter.com/justinramel](http://twitter.com/justinramel)

[http://twitter.com/mattburton](http://twitter.com/mattburton)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-06-22T10:38:36.667

Udi Dahan 的一些与 SOA 和 NServiceBus 相关的技术会议（视频）：

*   [NServiceBus 上的 Udi Dahan @ Bergen .NET 用户组](http://blog.torresdal.net/2010/06/08/NNUGPresentationUdiDahanOnNServiceBus.aspx)

*   [Udi Dahan 谈 CQRS、DDD 和 NServiceBus](http://www.infoq.com/interviews/dahan-cqrs-ddd-nservicebus)

不是 100% 相关，但值得一看，但有些东西是齐头并进的：

*   [DDD eXchange 2010：Udi Dahan 谈建筑创新：CQRS](http://skillsmatter.com/podcast/design-architecture/architectural-innovation-cqrs/zx-486)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-11-25T08:28:05.543

NServiceBus 文档是开始使用 NSB 的绝佳资源。这涵盖了入门的基础知识，并引导您完成 NSB 附带的示例项目，然后再继续介绍在生产中使用 NSB 所需的主要主题。任何从 NSB 开始的人都必须阅读这篇文章！你可以在这里找到它：

[http://docs.particular.net/](http://docs.particular.net/)

世界各地都有官方的 NServiceBus 商业培训课程。您还可以安排定制的现场课程或关注官方的在线培训视频。在下面的链接或 Udi Dahan 的博客上有 NSB 网站的详细[信息](http://www.udidahan.com/training/)。

[http://particular.net/onsite-training](http://particular.net/onsite-training)

Udi 还制作了高级分布式设计商业课程的视频。虽然不是专门针对 NSB，但这是密切相关的，您可以在[此处](https://www.flickrocket.com/eshop/Catalog2.aspx?CID=2956&Theme=32&SessionID=017ff3c1-44ca-4676-87cb-6df750c39a47)购买视频或点击[此博客文章](http://www.udidahan.com/2011/11/10/training-us-europe-and-now-virtual/)中的链接。

# session - Tomcat session-cluster：是生产级别的吗？它可以扩展吗？

> ID：1012294
> 
> 赞同：9
> 
> 时间：2009-06-18T12:09:52.943
> 
> 标签：session, tomcat, cluster-computing

我想知道有关 Tomcat 会话集群解决方案的任何经验。是生产水平吗？它可以扩展吗？我可以在服务器场中使用它吗？您是否为会话集群推荐任何其他解决方案？（例如：数据库、terracota、jgroups 等）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2010-02-28T21:00:56.713

另一种选择是 memcached-session-manager，这是一种用于 tomcat 的会话故障转移解决方案：[http ://code.google.com/p/memcached-session-manager/](http://code.google.com/p/memcached-session-manager/)

我创建这个项目是为了获得最佳的性能和可靠性，并且能够通过添加更多的 tomcat 和 memcached 节点来进行横向扩展。

干杯，马丁

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-07-28T21:10:44.027

从我读过的所有文档中，它可以在少数情况下正常工作，但随后成为一个问题。

我们使用 Tomcat 作为后端服务器，但设计我们的应用程序以使用尽可能少的会话信息（基本上只是登录）。然后我们在 Tomcat 前面使用 Apache 或 Nginx 等负载均衡器（我最近更喜欢后者）并使用粘性会话。如果服务器离线（这不太可能），那么用户只需要再次登录，这取决于您如何设置它可能对他们是透明的。

当我想做更多基于会话的集群时，Terracotta 看起来非常令人印象深刻。但是无状态设计使扩展更容易。

# java - 如何识别项目中包含的不必要的 jar？

> ID：1012298
> 
> 赞同：4
> 
> 时间：2009-06-18T12:11:00.070
> 
> 标签：java, jar

我正在使用 Apache 的轴 2 库的 Java 项目中工作。axis 2 库由大约 20 个 jar 文件组成，其中一些是未使用的项目。我想知道是否有一种方法可以识别哪些 jar 文件是未使用的。

我正在使用 Eclipse IDE，我认为解决问题的一种方法是每次添加一个 jar，直到我没有收到有关丢失类的错误消息。但是，我不确定这是否会起作用，因为某些缺少的类错误仅在运行时出现。

有谁知道解决这个问题的更好方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-18T12:13:23.323

流言蜚语 FTW

[http://www.jboss.org/tattletale](http://www.jboss.org/tattletale)

JBoss Tattletale 是一个工具，可以帮助您了解您正在从事的项目或您所依赖的产品。

该工具将为您提供可以帮助您的报告

*   识别 JAR 文件之间的依赖关系
*   发现一个类是否位于多个 JAR 文件中
*   发现同一个 JAR 文件是否位于多个位置
*   每个 JAR 文件需要和提供的列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T12:21:03.513

我会按照您最初的想法，即每次添加一个 jar 直到它编译。

没错，您仍然可以找到运行时错误，但除非应用程序太大而无法通过手动测试进行良好覆盖，否则我将简单地运行并测试它以添加任何丢失的 jar。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T12:21:24.823

我认为您不能可靠地删除 jar，因为类可能会在运行时解析，例如使用

```
Class.forName(className); 
```

您可能能够确定用于上述内容的类名，但这不太可能。

由于将在运行时请求/解析类，因此您可以运行（综合）测试套件以确定东西是否仍然有效。但最终我会非常谨慎地从像 Axis 这样的包中删除 jars。我想他们是有目的的。jar 文件大小真的有问题吗？

# c# - 根据内容大小调整自定义按钮的大小

> ID：1012300
> 
> 赞同：2
> 
> 时间：2009-06-18T12:11:19.913
> 
> 标签：c#, .net, wpf, xaml

我创建了以下非常简单的按钮样式：

```
<ControlTemplate x:Key="SimpleButton" TargetType="{x:Type ButtonBase}">
    <ContentPresenter x:Name="content" HorizontalAlignment="Center" VerticalAlignment="Center" />
    <ControlTemplate.Triggers>
        <Trigger Property="IsPressed" Value="True">
            <Setter Property="Opacity" TargetName="content" Value="0.4"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

我想用它来制作只显示一个没有可点击边框的小图标的小按钮。

所以我有这个图标，尺寸为 16 x 16 像素，称为 icon.png。

```
<Button Template="{StaticResource SimpleButton}">
    <Image Source="pack://application:,,,/Program;component/Art/icon.png" />
</Button> 
```

该按钮放置在水平 StackPanel 中。

现在按钮显示尺寸为 34x34。如何确保按钮的大小与图像的大小一致？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T12:28:08.130

尝试

```
<Button Template="{StaticResource SimpleButton}" HorizontalAlignment="Center" VerticalAlignment="Center">
        <Image Source="pack://application:,,,/Program;component/Art/icon.png" Stretch="None" />
</Button> 
```

# datetime - 如何在 PostgreSQL 中添加默认为 unix 时间戳（纪元）的整数列？

> ID：1012301
> 
> 赞同：3
> 
> 时间：2009-06-18T12:11:28.650
> 
> 标签：datetime, postgresql, epoch

这不起作用：

```
create table event (
...
time int default date_part('epoch', timestamp 'now'),
...
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T12:20:52.157

我不是 postgresql 专家，但这个不应该工作

```
time int default date_part('epoch', now()) 
```

# ruby - 从 ruby 在父 shell 中运行命令

> ID：1012303
> 
> 赞同：0
> 
> 时间：2009-06-18T12:11:41.813
> 
> 标签：ruby, bash, shell, scripting

我正在尝试更改 shell 的目录我通过 ruby​​ 脚本本身启动 ruby​​ 脚本表单...

我的观点是构建一个小程序来管理收藏夹目录并轻松地在它们之间进行更改。

这就是我所做的

```
#!/usr/bin/ruby
Dir.chdir("/Users/luca/mydir")

and than tried executing it in many ways...

my_script (this doesn't change the directory)
. my_script (this is interpreted as bash)
. $(ruby my_script) (this is interpreted as bash too!) 
```

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-18T12:23:03.727

无法完成。子进程不能修改其父环境（包括父进程的当前工作目录）。（`.`也称为`source`）技巧仅适用于 shell 脚本，因为您告诉 shell 在当前进程中运行该代码（而不是生成一个子进程来运行它）。只是为了好玩尝试放入`exit`你以这种方式运行的文件（剧透：你将被注销）。

如果您希望有这种工作的错觉，您需要创建调用 Ruby 脚本的 shell 函数并让 shell 函数执行实际的`cd`. 由于函数在当前进程中运行，它们可以更改目录。例如，给定这个 ruby​​ 脚本（名为 temp.rb）：

```
#!/usr/bin/ruby

print "/tmp"; 
```

您可以编写此 BASH 函数（例如，在 you 中`~/.profile`）：

```
function gotmp {
    cd $(~/bin/temp.rb)
} 
```

然后您可以`gotmp`在命令行中说并更改目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T12:14:31.623

```
#!/usr/bin/env ruby

`../your_script` 
```

像这样？

或者在您希望它执行某些操作的目录中启动您的脚本。

也许我不明白你的问题。提供更多细节。

# c# - 如何在 Windows Mobile 设备上获得以 KB 为单位的 GPRS 总使用量？

> ID：1012305
> 
> 赞同：1
> 
> 时间：2009-06-18T12:12:46.557
> 
> 标签：c#, c++, windows-mobile, gprs

任何人都知道如何以编程方式执行此操作？我查看了注册表项，但找不到任何东西。我不知道也许我错过了。在注册表项 HKLM/Software/Microsoft/shell/cumulativecalltimers/line_0/ 下有值“OutgoingDataPhoneLifeTime”和“OutgoingDataPhoneLifeTimeNumCalls”；但这些似乎不是我想要的。他们给出了时间方面的价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-19T05:52:59.420

IFAIK Windows Mobile 不包含此信息。如果你真的想要，你必须自己做。

我没有完全按照您的要求完成，但我知道只有 2 个地方可以跟踪 GPRS 信息。您要么必须使用[TAPI](http://msdn.microsoft.com/en-us/library/aa918634.aspx)（我不确定您是否可以使用它来跟踪 GPRS 信息），要么您需要下拉并使用[RIL](http://msdn.microsoft.com/en-us/library/aa920475.aspx) API 层（我相信 TAPI 层使用它）。

# c++ - C++ 文件阅读库 - ANSI 和 Unicode

> ID：1012307
> 
> 赞同：1
> 
> 时间：2009-06-18T12:13:28.893
> 
> 标签：c++, unicode, file-io

我在这里阅读了一些关于阅读 Unicode 文件等的答案，大多数人指向 UTF8-CPP 或 iconv。

我发现的所有库都不适用于 ANSI 和 Unicode 文件，理想情况下，我想要一个函数，我将文件名传递给它，它将返回该文件的内容，无论编码是什么，或者不是可能的？

如果是这样，有什么建议我会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T12:18:11.990

好吧，那不是二进制读取吗？所有其他形式都是解释问题，然后确切的编码等变得很重要。

虽然由于 BOM，在某些情况下可以自动检测 unicode，但它并不总是存在，失败的检测机制则等于损坏的程序。我想这就是大多数人拒绝它的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T14:46:32.253

如果您使用的是宽字符串，UTF8-CPP 可以检测 UTF8（utf8::is_valid 和 utf8::find_invalid）并进行转换（utf8::utf16to8）。效果很好，有什么问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-08-02T16:58:54.273

您可以使用多种技术组合：

[通常，大多数 Unicode 文件都以BOM](http://en.wikipedia.org/wiki/Byte_order_mark)开头。这意味着如果文件以 Unicode 开头，`0xfffe`或者`0xfeff`您*可以*假设它是 Unicode。使用 UTF-32 AFAIK 的人不多，但您仍然可以使用 BOM 方法进行猜测（请参阅 Wiki 页面）。

如果是 UTF-8 文件，您可以使用 UTF8-CPP 将其转换为 UTF-16 ( `wstring`)。如果它是 UTF-16 文件，则使用标准库可能难以阅读。具体可以参考我的博文：

[http://cfc.kizzx2.com/index.php/reading-a-unicode-utf16-file-in-windows-c/](http://cfc.kizzx2.com/index.php/reading-a-unicode-utf16-file-in-windows-c/)

对于 UTF-32——我不知道是否有人使用它，所以我没有经验：P

# xslt - Xslt 不同的选择/分组依据

> ID：1012321
> 
> 赞同：1
> 
> 时间：2009-06-18T12:17:12.927
> 
> 标签：xslt

```
<statisticItems>
    <statisticItem id="1" frontendGroupId="2336" caseId="50264"  />
    <statisticItem id="2" frontendGroupId="2336" caseId="50264"  />
    <statisticItem id="3" frontendGroupId="2337" caseId="50265"  />
    <statisticItem id="4" frontendGroupId="2337" caseId="50266"  />
    <statisticItem id="5" frontendGroupId="2337" caseId="50266"  />
</statisticItems>

<?xml version="1.0" encoding="utf-8"?>
  <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes"/>

  <xsl:key name="statistic-by-frontendGroupId" match="statisticItem" use="@frontendGroupId" />

  <xsl:for-each select="statisticItems/statisticItem[count(.|key('statistic-by-frontendGroupId', @frontendGroupId)[1]) = 1]">
       <xsl:value-of select="@frontendGroupId"/>
  </xsl:for-each> 
```

我所做的是通过所有不同的前端组ID。我现在想做的是对每个 distict frontendGroupId 的所有 distict caseIds 进行计数，但我似乎无法完成这项工作。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-18T14:02:28.393

你很接近：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="text" />

  <xsl:key 
    name="statistic-by-frontendGroupId" 
    match="statisticItem" 
    use="@frontendGroupId" 
  />

  <xsl:template match="statisticItems">
    <xsl:for-each select="
      statisticItem[
        count(
          . | key('statistic-by-frontendGroupId', @frontendGroupId)[1]
        ) = 1
      ]
    ">
      <xsl:value-of select="@frontendGroupId"/>
      <xsl:value-of select="' - '"/>
      <!-- simple: the item count is the node count of the key -->
      <xsl:value-of select="
        count(
          key('statistic-by-frontendGroupId', @frontendGroupId)
        )
      "/>
      <xsl:value-of select="'&#10;'"/>
    </xsl:for-each>
  </xsl:template>

</xsl:stylesheet> 
```

这导致：

```
2336 - 2
2337 - 3

```

* * *

编辑 - 哦，我看到你想要组内的不同计数。这将是：

```
<!-- the other key from the above solution is still defined -->

<xsl:key 
  name="kStatisticItemByGroupAndCase" 
  match="statisticItem" 
  use="concat(@frontendGroupId, ',', @caseId)"
/>

<xsl:template match="statisticItems">
  <xsl:for-each select="
    statisticItem[
      count(
        . | key('kStatisticItemByGroup', @frontendGroupId)[1]
      ) = 1
    ]
  ">
    <xsl:value-of select="@frontendGroupId"/>
    <xsl:value-of select="' - '"/>
    <xsl:value-of select="
      count(
        key('kStatisticItemByGroup', @frontendGroupId)[
          count(
            . | key('kStatisticItemByGroupAndCase', concat(@frontendGroupId, ',', @caseId))[1]
          ) = 1
        ]
      )
    "/>
    <xsl:value-of select="'&#10;'"/>
  </xsl:for-each>
</xsl:template> 
```

这看起来（诚然）有点可怕。它输出：

```
2336 - 1
2337 - 2

```

核心表达：

```
count(
  key('kStatisticItemByGroup', @frontendGroupId)[
    count(
      . | key('kStatisticItemByGroupAndCase', concat(@frontendGroupId, ',', @caseId))[1]
    ) = 1
  ]
) 
```

归结为：

计算“ `key('kStatisticItemByGroup', @frontendGroupId)`”中满足以下条件的节点：它们是各自“ `kStatisticItemByGroupAndCase`”组中的第一个。

仔细观察，你会发现这并不比你已经做的复杂。:-)

* * *

编辑：最后一个提示。就个人而言，我发现这比上面的表达式更具表现力，因为它比 " `count(.|something) = 1`" 方法更强调节点相等：

```
count(
  key('kStatisticItemByGroup', @frontendGroupId)[
    generate-id()
    =
    generate-id(
      key('kStatisticItemByGroupAndCase', concat(@frontendGroupId, ',', @caseId))[1]
    )
  ]
) 
```

结果是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T13:01:04.743

您正试图通过可怕的“MUENCHIAN”方法进行排序——我发现这种方法非常令人困惑，不值得尝试——所以我制定了自己的方法。

它使用两种转换而不是一种。

第一个根据您的分组要求将数据排序为正确的顺序 - 您的示例数据已经按正确的顺序排列，所以我将把它排除在这个解释之外（在这里询问您是否需要帮助）

第二个转换只是通过将一个节点与下一个节点进行比较来进行分组：

```
 <?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="statisticItems">
        <groupedItem>
            <xsl:apply-templates select="statisticItem"></xsl:apply-templates>
        </groupedItem>
    </xsl:template>

    <xsl:template match="statisticItem">
        <xsl:choose>

            <xsl:when test="position()=1">
                <xsl:apply-templates select="@frontendGroupId" />
            </xsl:when>

            <xsl:when test="@frontendGroupId!=preceding-sibling::statisticItem[1]/@frontendGroupId">
                <xsl:apply-templates select="@frontendGroupId" />
            </xsl:when>

        </xsl:choose>

        <xsl:apply-templates select="@caseId" />

    </xsl:template>

<xsl:template match="@frontendGroupId">
    <group>
        <xsl:variable name="id" select="." ></xsl:variable>
        <xsl:attribute name="count">
            <xsl:value-of select="count(//statisticItem/@frontendGroupId[.=$id])"/>
        </xsl:attribute>        
        <xsl:value-of select="." />
    </group>
</xsl:template>

    <xsl:template match="@caseId">
        <value>
            <xsl:value-of select="." />
        </value>
    </xsl:template>

</xsl:stylesheet> 
```

使用这种方法，您可以深入多个组，并且仍然具有可维护的代码。

# c# - 使用 Linq 查找连续重复的元素

> ID：1012324
> 
> 赞同：7
> 
> 时间：2009-06-18T12:19:29.053
> 
> 标签：c#, linq

假设我有一个包含类型对象的列表`Value`。`Value`有一个`Name`属性：

```
private List<Value> values = new List<Value> {
    new Value { Id = 0, Name = "Hello" },
    new Value { Id = 1, Name = "World" },
    new Value { Id = 2, Name = "World" },
    new Value { Id = 3, Name = "Hello" },
    new Value { Id = 4, Name = "a" },
    new Value { Id = 5, Name = "a" },
}; 
```

现在我想获取所有“重复”值的列表（名称属性与前一个元素的名称属性相同的元素）。
在此示例中，我希望返回一个包含两个元素“world”和“a”（id = 2 和 5）的列表。

linq 可以进行此事件吗？我当然可以。像这样：

```
List<Value> tempValues = new List<Value>();
String lastName = String.Empty();
foreach (var v in values)
{
    if (v.Name == lastName) tempValues.Add(v);
    lastName = v.Name;
} 
```

但由于我想在更复杂的上下文中使用这个查询，也许有一个“linqish”的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-18T12:29:51.093

不会有任何内置的东西，但如果你经常需要这个，你可以推出一些定制但相当通用的东西：

```
static IEnumerable<TSource> WhereRepeated<TSource>(
    this IEnumerable<TSource> source)
{
    return WhereRepeated<TSource,TSource>(source, x => x);
}
static IEnumerable<TSource> WhereRepeated<TSource, TValue>(
    this IEnumerable<TSource> source, Func<TSource, TValue> selector)
{
    using (var iter = source.GetEnumerator())
    {
        if (iter.MoveNext())
        {
            var comparer = EqualityComparer<TValue>.Default;
            TValue lastValue = selector(iter.Current);
            while (iter.MoveNext())
            {
                TValue currentValue = selector(iter.Current);
                if (comparer.Equals(lastValue, currentValue))
                {
                    yield return iter.Current;
                }
                lastValue = currentValue;
            }
        }
    }
} 
```

用法：

```
 foreach (Value value in values.WhereRepeated(x => x.Name))
    {
        Console.WriteLine(value.Name);
    } 
```

您可能想考虑如何处理三胞胎等 - 目前除了第一个之外的所有内容都会产生（与您的描述相匹配），但这可能不太正确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-18T12:23:37.923

您可以实现一个[Zip 扩展](http://blogs.msdn.com/ericlippert/archive/2009/05/07/zip-me-up.aspx)，然后使用 .Skip(1) 压缩您的列表，然后选择匹配的行。

这应该可以工作并且相当容易维护：

```
values
  .Skip(1)
  .Zip(items, (first,second) => first.Name==second.Name?first:null)
  .Where(i => i != null); 
```

这种方法的一个小缺点是你遍历列表两次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T12:32:16.750

我认为这会起作用（未经测试）——这会给你重复的单词和它的索引。对于多次重复，您可以遍历此列表并检查连续索引。

```
 var query = values.Where( (v,i) => values.Count > i+1 && v == values[i+1] )
                   .Select( (v,i) => new { Value = v, Index = i } ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T12:40:08.280

如果 ID 总是像您的示例中那样连续，那么这是另一种简单的方法：

```
var data = from v2 in values
            join v1 in values on v2.Id equals v1.Id + 1
            where v1.Name == v2.Name
            select v2; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-07-17T22:51:52.633

我知道这个问题很古老，但我只是在做同样的事情，所以......

```
static class utils
{
    public static IEnumerable<T> FindConsecutive<T>(this IEnumerable<T> data, Func<T,T,bool> comparison)
    {
        return Enumerable.Range(0, data.Count() - 1)
        .Select( i => new { a=data.ElementAt(i), b=data.ElementAt(i+1)})
        .Where(n => comparison(n.a, n.b)).Select(n => n.a);
    }
} 
```

应该适用于任何事情 - 只需提供一个比较元素的功能

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-06-18T12:27:35.653

您可以使用 GroupBy 扩展来执行此操作。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-06-18T12:32:51.913

像这样的东西

```
var dupsNames = 
  from v in values
  group v by v.Name into g
  where g.Count > 1 // If a group has only one element, just ignore it
  select g.Key; 
```

应该管用。然后，您可以在第二个查询中使用结果：

```
dupsNames.Select( d => values.Where( v => v.Name == d ) ) 
```

这应该返回一个分组 key=name, values = { elements with name }

免责声明：我没有测试上述内容，所以我可能会走得很远。

# actionscript-3 - 在运行时删除项目

> ID：1012329
> 
> 赞同：0
> 
> 时间：2009-06-18T12:20:38.800
> 
> 标签：actionscript-3, apache-flex, adobe, flex3

我在运行时通过鼠标拖动动态创建了一些形状，现在我想删除白板上的任何选定项目。我该如何实现。目前我可以通过“removeChild()”方法删除最后一个绘制的项目，但不能删除以前的项目。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T12:47:36.220

幸运的是，我很快就得到了答案。要在运行时删除多个项目，我已经动态地为它们分配了 ID，并完成了以下操作：

**parentComponent.removeChild(parent.getChildByName("itemName"));**

在尝试这个之前我正在做

**parentComponent.removeChild(item);**

干杯！！！

# c# - 在代码中为不同的实例设置两次相同的样式

> ID：1012334
> 
> 赞同：1
> 
> 时间：2009-06-18T12:21:05.290
> 
> 标签：c#, silverlight-3.0

我正在尝试重用形状数据以在代码中动态创建新形状。基本上我想[在 XAML](https://stackoverflow.com/questions/839843/reuse-path-object-in-xaml)中但在代码中执行此重用路径对象。情况如下：

```
 Path path = new Path();
        path.Style = (System.Windows.Style)this.Resources["PathStyle"];
        Path path2 = new Path();
        path2.Style = (System.Windows.Style)this.Resources["PathStyle"]; 
```

但我在第四行得到一个**ArgumentException说“***值不在预期范围内”*

该代码位于 SL 3 应用程序的 MainControl 中。资源的 XAML 代码是

```
 <UserControl.Resources>
        <Style x:Key="PathStyle" TargetType="Path">
            <Setter Property="Data" Value="M63,171 L138,117 L168,189 L99,219"/>
            <Setter Property="Fill" Value="#FFF07E7E"/>
            <Setter Property="Height" Value="103"/>
            <Setter Property="Width" Value="106"/>
            <Setter Property="Stroke" Value="#FF000000"/>
            <Setter Property="Stretch" Value="Fill"/>
        </Style>
</UserControl.Resources> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-30T06:58:14.007

看起来这确实是 SL3 Beta 中的一个错误，但有人找到了解决方法：

[http://tozon.info/blog/post/2009/06/27/Countdown-to-Silverlight-3-2-Setting-styles.aspx](http://tozon.info/blog/post/2009/06/27/Countdown-to-Silverlight-3-2-Setting-styles.aspx)

从 7 月 12 日 SL 3 击中 RTM 开始，这将不再是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T12:47:51.117

这很奇怪......我不明白为什么它会第一次工作而第二次失败。尝试使用中间变量而不是两次访问资源：

```
 Style style = (System.Windows.Style)this.Resources["PathStyle"];
    Path path = new Path();
    path.Style = style;
    Path path2 = new Path();
    path2.Style = style; 
```

# security - 从以前的开发供应商那里继承生产服务器后，如何保护它？

> ID：1012337
> 
> 赞同：0
> 
> 时间：2009-06-18T12:21:32.920
> 
> 标签：security

我们获得了对环境的访问权，但我现在需要完成保护它的过程，以便以前的供应商不能再访问它，或者在它上面运行的 Web 应用程序。这是一个运行 Ubuntu 的 Linux 机器。我知道我需要更改以下密码：

*   SSH
*   FTP
*   MySQL
*   控制面板管理员
*   主要应用程序管理员

但是，我怎么才能真正知道我已经使用最佳实践完全保护了系统，除了更改密码之外，我是否还缺少其他我需要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T13:50:00.510

**3个简单的步骤**

1.  从 HTTP / SQL 表备份配置/源文件
2.  重装操作系统
3.  遵循新操作系统上的标准强化步骤

不管是谁，他们都可以在那里安装任何你无法配置的旧垃圾（rootkits）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T12:28:52.700

您可能会在[serverfault.com](https://serverfault.com/)上获得更多关于此类问题的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T12:31:19.140

您可以通过编辑通常位于 /etc/ssh/ 中的 sshd_config 文件来保护 SSH：

1.  禁用根登录

    PermitRootLogin 否

2.  将 ssh 端口从端口 22 更改

    端口 9222

3.  手动指定哪些帐户可以登录

    允许用户 Andrew、Jane、Doe

SecurityFocus 有一篇关于[保护 MySQL](http://www.securityfocus.com/infocus/1726)的好文章，尽管它有点过时了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-20T13:54:28.370

您可以做的最好的事情是重新安装并确保当您将文件从旧系统带到新系统时，它只是数据，而不是可能令人讨厌的可执行文件。如果这太多了，请更改所有密码，并查看日志数周，以及使用 iptables 来阻止以前的供应商。此外，考虑到它可能在内核级别有一个 rootkit，将其更改出来可能是个好主意，并观察开箱即用的流量，这些流量可能会流向供应商。拿别人的机器说现在很安全真的很麻烦，我会说这几乎是不可能的。

边注。这与编程无关，因此可能不应该出现在此站点上。

# php - 使用 while 循环中的 $_POST 数据更新 mysql

> ID：1012342
> 
> 赞同：0
> 
> 时间：2009-06-18T12:22:08.580
> 
> 标签：php, mysql, post

## 使用 while 循环中的 $_POST 数据更新 mysql

我正在努力解决这个问题，但我失败得很厉害：[

我在数据库中有 3 行，我在 while() 循环中回显。用户可以更改`search_terms`然后将字段保存在 mysql 中，但是我不太清楚该怎么做，因为有 3 行，所以我不能这样做；

```
<?php
    if($_POST['update']) {
        mysql_query("....");
    }
?> 
```

这是我的代码；

```
<?php
    $box_query = mysql_query("SELECT * FROM `ta_boxs`");
    while($box = mysql_fetch_array($box_query)) {

        echo '<div class="box_content">';
        echo '<div class="box">'."\n";
        echo '<span class="box_top"></span>';
        echo '<div class="box_header"><input type="text" id="title" name="title" class="title-input" value="'.$box['title'].'" /></div>';
        echo '<span class="sept"></span>';
        echo '<div class="admin-back">';
        echo '<form id="form-'.$box['id'].'" name="form-'.$box['id'].'" method="post" action="">';
        echo '<p class="sub"><span>Includes:</span> Search for these terms in Twitter Feeds.</p>';
        echo '<p class="sub-small">Please enter one word per field or click "add word".</p>';
        echo '<p><input type="text" id="search_term_1" name="search_term_1" value="'.$box['search_term_1'].'" class="term-input" />';
        echo '<p><input type="text" id="search_term_2" name="search_term_2" value="'.$box['search_term_2'].'" class="term-input" />';
        echo '<p><input type="text" id="search_term_3" name="search_term_3" value="'.$box['search_term_3'].'" class="term-input" />';
        echo '<span class="hr"></span>';
        echo '<p class="sub"><span>Excludes:</span> Ignore these terms in Twitter Feeds.</p>';
        echo '<p class="sub-small">Please enter one word per field or click "add word".</p>';
        echo '<p><input type="text" id="search_term_1" name="search_term_1" value="'.$box['exc_search_term_1'].'" class="term-input" />';
        echo '<p><input type="text" id="search_term_2" name="search_term_2" value="'.$box['exc_search_term_2'].'" class="term-input" />';
        echo '<p><input type="text" id="search_term_3" name="search_term_3" value="'.$box['exc_search_term_3'].'" class="term-input" />';
        echo '<input type="hidden" id="update" name="update" value="yes" />'
        echo '<p><input type="submit" id="update_'.$box['id'].'" name="update_'.$box['id'].'" value="Update" /></p>';
        echo '</form>';
        echo '</div>';
        echo '</div>'."\n";
        echo '<span class="box_bottom"></span>';
        echo '</div>';  
    }
?> 
```

可能有 1 个输出，或 100 个，但我需要一种方法来保存它们，onsubmit。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T12:32:07.780

由于您以不同的方式输出每个盒子，因此`<form>`您只会得到一个。如果你改变：

```
<input type="hidden" id="update" name="update" value="yes" /> 
```

到

```
<input type="hidden" id="update" name="update" value="' . $box['id'] . '" /> 
```

然后，您将能够查看回发的是哪一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T12:40:40.040

我认为您的方法不会奏效，因为您正在生成多个表单，因此 PHP 只会获取提交的一个表单，并且您将无法保存页面上的所有更改。

您可能需要考虑使用一种形式并将输入命名为数组（请参阅[http://php.net/manual/en/faq.html.php#faq.html.arrays](http://php.net/manual/en/faq.html.php#faq.html.arrays)）。

例如（简化）

```
<form method="post">

<?php while($box = mysql_fetch_array($box_query)): ?>

<!-- div box thing -->  

<input name="box[<?php echo $box['id'];?>][search_term_1]" value="<?php echo $box['search_term_1']; ?>">
<input name="box[<?php echo $box['id'];?>][search_term_2]" value="<?php echo $box['search_term_2']; ?>">
<input name="box[<?php echo $box['id'];?>][search_term_3]" value="<?php echo $box['search_term_3']; ?>">

<input name="box[<?php echo $box['id'];?>][exc_search_term_1]" value="<?php echo $box['exc_search_term_1']; ?>">
<input name="box[<?php echo $box['id'];?>][exc_search_term_2]" value="<?php echo $box['exc_search_term_2']; ?>">
<input name="box[<?php echo $box['id'];?>][exc_search_term_3]" value="<?php echo $box['exc_search_term_3']; ?>">

<!-- end div box thing -->

<?php endwhile; ?>

</form> 
```

如果您`print_r($_POST)`在提交该表单后应该会看到循环/处理相当容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T12:31:30.980

制作一张表格，

并在此表单中设置所有字段，

一键提交，

像对带有框 id 的表单所做的那样，为每一行赋予输入元素唯一的 id

# business-process-management - 定义或描述软件开发中以过程为中心的方法

> ID：1012346
> 
> 赞同：0
> 
> 时间：2009-06-18T12:22:44.150
> 
> 标签：business-process-management

我试图弄清楚在软件开发中采用以流程为中心的方法与以数据为中心的方法之间的区别。这两种方法的优缺点是什么？

我已经用谷歌搜索了，但我没有找到关于为什么以流程为中心更好或不更好的明确答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-23T21:36:05.950

我的理解是，这是开发中的重点问题：

*   以流程为中心将围绕使用特定形式的流程作为方法的核心。例如，可能有一些地方喜欢瀑布，这就是他们不考虑其他因素而使用的地方。

*   以数据为中心将以数据为中心，并且可能涉及针对不同数据集的不同方法。因此，报告小组可能会使用以数据为中心的方法，因为他们所做的大部分工作都围绕数据和使用数据展开。相比之下，定制 CMS 的团队可能会选择更敏捷的方式来处理公司开始使用 CMS 时可能发生的不断变化的需求。

至于哪个更好，这里有几个因素需要考虑：

1.  人——他们似乎有自己喜欢控制的偏好吗？有些人可能更喜欢以流程为中心的方法，这样一切都以相同的方式完成，无论如何都坚持方法论，而在其他情况下，有些人可能会说它只取决于数据。

2.  优先级——这是否会成为团队反复使用的东西？如果是这样，那么以流程为中心可能会产生更好的结果，因为流程可以随着时间的推移而得到改进，而以数据为中心则可以定期更改方法。

3.  最终产品——如果项目是咨询业务，那么最好关注过程而不是数据，除非咨询是数据密集型的，比如数据仓库或商业智能。

4.  高管支持——如果控制金钱的人不理解为什么在特定情况下一种风格比另一种更好，那么任何一种方法都将毫无用处。

# xslt - xslt 中的子字符串、字符串长度函数

> ID：1012347
> 
> 赞同：3
> 
> 时间：2009-06-18T12:22:46.410
> 
> 标签：xslt

基本上我有一个由逗号分隔的循环创建的字符串，例如。A,B,C，我想去掉最后一个逗号。

```
<xsl:variable name="myConcatString">
   <xsl:for-each select="valueinElement">
        <xsl:value-of select="@attributeValue"/>,
   </xsl:for-each>
</xsl:variable>

<xsl:variable name="valueLength" select="string-length($myConcatString)-1"/>
<xsl:value-of select="substring($myConcatString,1,$valueLength)"/> 
```

现在最后一行应该给我 A,B,C 最后没有“，”。有人可以告诉我出了什么问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-18T12:46:37.580

由于您格式化 XML 的方式，您正在输出空格。您可以通过两种方式修复它。一种是删除格式：

```
<xsl:for-each select="valueinElement"><xsl:value-of select="@attributeValue"/>,</xsl:for-each> 
```

另一种更强大的方法是更改​​处理空格的方式：

```
<xsl:for-each select="valueinElement">
  <xsl:value-of select="@attributeValue"/>
  <xsl:text>,</xsl:text>
</xsl:for-each> 
```

这样做只是将逗号视为一个元素，以便它忽略周围的空白，而不是将`for-each`循环内的所有空白视为输出的一部分。

作为参考，我针对以下 XML 文件运行了上述 XSLT 片段：

```
<root>
  <valueinElement attributeValue="dogs"/>
  <valueinElement attributeValue="cats"/>
  <valueinElement attributeValue="mice"/>
  <valueinElement attributeValue="lasers"/>
  <valueinElement attributeValue="frogs"/>
</root> 
```

并在这两种情况下得到以下输出：

```
dogs,cats,mice,lasers,frogs 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T13:33:31.067

只需使用此替换，它将更正您的输出。

```
<xsl:value-of select="substring($myConcatString,1,$valueLength)"/> 
```

和

```
<xsl:value-of select="substring($myConcatString,0,$valueLength)"/> 
```

# c# - Unity 拦截和异常

> ID：1012348
> 
> 赞同：4
> 
> 时间：2009-06-18T12:22:47.563
> 
> 标签：c#, inversion-of-control, unity-container

我目前正在处理一个问题，我有很多 iterfaces 及其实现都是用统一创建的。这些类包含一些定期抛出异常的方法，我想围绕这些类创建一个动态代理，这样我就可以捕获方法中发生的所有异常，并在其他地方处理它们。

当我在玩 Unity 时，我想知道是否可以使用 Unity Interception 来完成这样的事情。

即创建一个TransparentProxyInterceptor 并在这些方法的invocatino 周围包装一个try-catch 块。这是可能的还是我走错了方向？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-19T05:23:43.793

是的，Unity 拦截 (AOP) 是处理异常处理的绝佳方式。您可以添加各种行为，例如：

*   写入日志文件或事件日志
*   发送电子邮件
*   增加性能计数器
*   超时或锁定异常时自动重试
*   重新抛出一个不同的错误

您的呼叫处理程序将类似于：

```
public override IMethodReturn Invoke(IMethodInvocation input, GetNextHandlerDelegate getNext)
{
    IMethodReturn result = getNext()(input, getNext);

    if (result.Exception != null)
    {
        // do something
    }

    return result;
} 
```

# python - Dict 会以相同的顺序返回键和值吗？

> ID：1012354
> 
> 赞同：8
> 
> 时间：2009-06-18T12:24:11.087
> 
> 标签：python

> **可能重复：**
> [Python 字典：keys() 和 values() 是否总是相同的顺序？](https://stackoverflow.com/questions/835092/python-dictionary-are-keys-and-values-always-the-same-order)

如果我在 python 中有一个字典，.keys 和 .values 会以相同的顺序返回相应的元素吗？

例如

```
foo = {'foobar' : 1, 'foobar2' : 4, 'kittty' : 34743} 
```

对于它返回的键：

```
>>> foo.keys()
['foobar2', 'foobar', 'kittty'] 
```

现在 foo.values() 返回元素的顺序是否总是与其对应的键相同？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-06-18T12:29:12.043

[Python 文档](http://docs.python.org/library/stdtypes.html#mapping-types-dict)很难改进：

> 键和值以非随机的任意顺序列出，在 Python 实现中有所不同，并且取决于字典的插入和删除历史。如果`items()`, `keys()`, `values()`, `iteritems()`, `iterkeys()`, 和`itervalues()`被调用而没有对字典进行干预修改，则列表将直接对应。这允许使用 和 方法创建`(value, key)`对：为对提供`zip(): pairs = zip(d.values(), d.keys()).`相同的值。创建相同列表的另一种方法是`iterkeys()``itervalues()``pairs = zip(d.itervalues(), d.iterkeys())``pairs = [(v, k) for (k, v) in d.iteritems()]`

因此，简而言之，“是”，但需要注意的是，您不能在调用 to`keys()`和调用之间修改字典`values()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T12:31:50.213

是他们会

只需在[Python doc](http://docs.python.org/library/stdtypes.html)中查看文档：

> 键和值以非随机的任意顺序列出，在 Python 实现中有所不同，并且取决于字典的插入和删除历史。如果 items()、keys()、values()、iteritems()、iterkeys() 和 itervalues() 被调用而没有对字典进行干预修改，则列表将直接对应。

最好的办法仍然是使用 dict.items()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T12:36:33.387

从 Python 2.6 文档：

> 键和值以非随机的任意顺序列出，在 Python 实现中有所不同，并且取决于字典的插入和删除历史。如果`items()`, `keys()`, `values()`, `iteritems()`, `iterkeys()`, 和`itervalues()`被调用而没有对字典进行干预修改，则列表将直接对应。这允许使用创建（值，键）对`zip(): pairs = zip(d.values(), d.keys())`。`iterkeys()`和`itervalues()`方法具有相同的关系：`pairs = zip(d.itervalues(), d.iterkeys())`为对提供相同的值。创建相同列表的另一种方法是`pairs = [(v, k) for (k, v) in d.iteritems()]`.

我有超过 99% 的把握在 Python 3.0 中也是如此。

# c# - 如何为 C# XML 序列化添加属性

> ID：1012360
> 
> 赞同：41
> 
> 时间：2009-06-18T12:26:27.497
> 
> 标签：c#, xml-serialization

我在序列化和对象方面遇到问题，我可以让它创建所有正确的输出，除了我有一个需要值和属性的元素。这是所需的输出：

```
<Root>
  <Method>Retrieve</Method>
  <Options>
    <Filter>
      <Times>
        <TimeFrom>2009-06-17</TimeFrom>
      </Times>
      <Document type="word">document name</Document>
    </Filter>
  </Options>
</AdCourierAPI> 
```

我可以全部构建但找不到设置文档类型属性的方法，这是对象类的一部分

```
[XmlRoot("Root"), Serializable]    
public class Root    
{    
    [XmlElement("Method")]    
    public string method="RetrieveApplications";    
    [XmlElement("Options")]    
    public _Options Options;    
}    
public class _Options    
{
    [XmlElement("Filter")]    
    public _Filter Filter;    
}
public class _Filter    
{
    [XmlElement("Times")]    
    public _Times Times;    
    [XmlElement("Documents")]    
    public string Documents;    
} 
```

这给了我：

```
<Document>document name</Document> 
```

而不是：

```
<Document type="word">document name</Document> 
```

但我找不到解决方法，请指教。

谢谢

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2009-06-18T12:39:17.017

你在哪里`type`存储的？

通常你可以有类似的东西：

```
class Document {
    [XmlAttribute("type")]
    public string Type { get; set; }
    [XmlText]
    public string Name { get; set; }
}

public class _Filter    
{
    [XmlElement("Times")]    
    public _Times Times;    
    [XmlElement("Document")]    
    public Document Document;    
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-18T12:37:55.257

该类`string`没有`type`属性，因此您不能使用它来创建所需的输出。您应该改为创建一个`Document`类：

```
public class Document
{
    [XmlText]
    public string Name;

    [XmlAttribute("type")]
    public string Type;
} 
```

您应该将`Document`属性更改为 type`Document`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-06-18T12:38:12.137

听起来您需要额外的课程：

```
public class Document
{
    [XmlAttribute("type")]
    public string Type { get; set; }
    [XmlText]
    public string Name { get; set; }
} 
```

其中一个实例（在示例中）将具有`Type = "word"`and `Name = "document name"`; `documents`将是一个`List<Document>`.

顺便说一句 - 公共领域很少是一个好主意......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-20T10:44:53.947

您可以使用 XmlWriter 而不是 XmlSerialization 来获得此效果。它更复杂，但如果模型中有很多字符串，它将是更清洁的解决方案。

创建您自己的CustomeAttribute，例如：

```
[System.AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
public class MyCustomAttribute : System.Attribute
{
    public MyCustomAttribute (string type)
    {
        MyType = type;
    }
    public string MyType { get; set; }
} 
```

然后在模型中添加它，如下所示：

```
public class MyModel
{
    [MyCustom("word")]
    public string Document { get; set; }
    [MyCustom("time")]
    public string Time { get; set; }
} 
```

最后一部分是使用此参数创建 xml。你可以这样做：

```
 var doc = new XmlDocument();
        MyModel myModel = new MyModel();//or get it from somewhere else
        using (Stream s = new MemoryStream())
        {
            var settings = new XmlWriterSettings();
            settings.Async = true;
            settings.Indent = true;
            var writer = XmlTextWriter.Create(s, settings);
            await writer.WriteStartDocumentAsync();
            await writer.WriteStartElementAsync(null,"Root", null);

            myModel.GetType().GetProperties().ToList().ForEach(async p =>
            {
                dynamic value = p.GetValue(myModel);
                writer.WriteStartElement(p.Name);
                var myCustomAttribute = p.GetCustomAttributes(typeof(MyCustomAttribute), false).FirstOrDefault() as MyCustomAttribute;
                if(myCustomAttribute != null)
                {
                    await writer.WriteAttributeStringAsync(null, "MyType", null, myCustomAttribute.MyType );
                }

                writer.WriteValue(value);
                await writer.WriteEndElementAsync();
            });

            await writer.WriteEndElementAsync();
            await writer.FlushAsync();
            s.Position = 0;
            doc.Load(s);                
            writer.Close();
        }
        string myXml = doc.OuterXml 
```

在 myXml 中应该是这样的：（值是示例）

```
<?xml version="1.0" encoding="utf-8"?>
<Root>
    <Document MyType="word">something</Document>
    <Time MyType="time">11:31:29</Time>
</Root> 
```

当然，你可以用其他方式来做。在这里，您有一些对我有帮助的文档： [https ://docs.microsoft.com/en-us/dotnet/api/system.xml.xmlwriter?view=netframework-4.8#writing_elements](https://docs.microsoft.com/en-us/dotnet/api/system.xml.xmlwriter?view=netframework-4.8#writing_elements)

# ios - 动态调整 UITableViewCell 到 UILabel 的高度

> ID：1012361
> 
> 赞同：15
> 
> 时间：2009-06-18T12:26:37.120
> 
> 标签：ios, objective-c, uitableview, math

我想根据标签的高度和标签的高度根据文本调整单元格的高度。或者有什么方法可以根据输入的文本调整单元格的高度`UITextView`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-25T04:26:52.127

**自 iOS 7.0 起，此方法已被弃用。**

在创建单元格或表格之前调用了一个`UITableView`委托方法。`heightForRowAtIndexPath`

您可以使用`NSIndexPath`传递给它的内容来获取特定行的文本，并使用`sizeWithFont`from 方法`UIStringDrawing.h`计算`CGSize`该行的 a。

例如：

```
CGSize size = [text sizeWithFont:font
                   constrainedToSize:maximumLabelSize
                   lineBreakMode:UILineBreakModeWordWrap]; 
```

最后你会回来`size.height`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-22T14:59:47.747

--iOS7--

基于 Josh Vera 的回答……将其放在 heightForRowAtIndexPath 中。

我将表数据存储在 NSArray *tableData 中。

```
// set the desired width of the textbox that will be holding the adjusted text, (for clarity only, set as property or ivar)
CGFloat widthOfMyTexbox = 250.0;

-(float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Get a reference to your string to base the cell size on.
    NSString *cellText = [self.tableData objectAtIndex:indexPath.row];
    //set the desired size of your textbox
    CGSize constraint = CGSizeMake(widthOfMyTextBox, MAXFLOAT);
    //set your text attribute dictionary
    NSDictionary *attributes = [NSDictionary dictionaryWithObject:[UIFont systemFontOfSize:14.0] forKey:NSFontAttributeName];
    //get the size of the text box
    CGRect textsize = [cellText boundingRectWithSize:constraint options:NSStringDrawingUsesLineFragmentOrigin attributes:attributes context:nil];
    //calculate your size
    float textHeight = textsize.size.height +20;
    //I have mine set for a minimum size
    textHeight = (textHeight < 50.0) ? 50.0 : textHeight;

    return textHeight;
} 
```

我还没有为 iOS<7 测试过它，但我相信它也应该适用。

# c# - Java 等效于 C# 的 Rfc2898DerivedBytes

> ID：1012363
> 
> 赞同：6
> 
> 时间：2009-06-18T12:27:22.983
> 
> 标签：c#, java, algorithm, encryption, rfc2898

我想知道是否有人试图做相当于

```
Rfc2898DeriveBytes key = new Rfc2898DeriveBytes(secret, saltValueBytes);
byte[] secretKey = key.GetBytes(16); 
```

在爪哇。其中 secret 是一个字符串（密码），而 saltValueBytes 是字节数组中的盐。

我已经尝试过一些东西，但似乎无法理解它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-18T12:31:27.517

我通过谷歌搜索找到[了这个实现](http://rtner.de/software/PBKDF2.html)，但我从未使用过它。

> **RFC 2898 / PKCS#5 PBKDF2 的免费 Java 实现**
> 
> 似乎没有可用的 RFC 2898 / PKCS#5 的小型且免费的 Java 实现。小到只有几个源文件，编译简单，没有依赖，像 LGPL 一样免费。
> 
> 鉴于标准 SUN JCE 加密提供程序中 HMacSHA1 的可用性，这样的实现非常简单，并且可以从 RFC 描述中完全按照字面意思推导出来。我的代码是一个无尘室实现，仅以 RFC 为基础。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-24T03:01:20.920

我知道这对游戏来说已经很晚了，但是 Java 6 及更高版本*确实*有一个内置的 PBKDF2 实现。

```
int dkLen = 64;
int rounds = 1000;
PBEKeySpec keySpec = new PBEKeySpec("Some password".toCharArray(), "SomeSalt".getBytes(), rounds, dkLen * 8);
SecretKeyFactory factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
byte[] out = factory.generateSecret(keySpec).getEncoded(); 
```

[Java 6 Security Enhancements](http://docs.oracle.com/javase/6/docs/technotes/guides/security/enhancements.html)列表声称与 PKCS#5 具有可比性，并且通过我自己的（粗略的）测试，它似乎确实生成了正确的 PBKDF2 密钥。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-09-01T02:15:20.840

这个对我有用。我仍然不相信 JRE 中不存在符合 RFC2898 的 PBKDF2 的标准实现。我想我一定是找错地方了。名称混淆（RFC2898 PKCS5 PBKDF2）没有帮助。

```
// PBKDF2.java
// ------------------------------------------------------------------
//
// RFC2898 PBKDF2 in Java.  The RFC2898 defines a standard algorithm for
// deriving key bytes from a text password.  This is also called 
// "PBKDF2", for Password-based key derivation function #2.
//
// There's no RFC2898-compliant PBKDF2 function in the JRE, as far as I
// know, but it is available in many J2EE runtimes, including those from
// JBoss, IBM, and Oracle.
//
// It's fairly simple to implement, so here it is. 
// 
// Author: Admin
// built on host: DINOCH-2
// Created Sun Aug 09 01:06:57 2009
//
// last saved: 
// Time-stamp: <2009-August-09 11:11:47>
// ------------------------------------------------------------------
//
// code from Matthias Gartner
//
// ------------------------------------------------------------------

package cheeso.examples;

import java.security.NoSuchAlgorithmException;
import java.security.InvalidKeyException;
import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;

public class PBKDF2
{
    public static byte[] deriveKey( byte[] password, 
                                    byte[] salt, 
                                    int iterationCount, 
                                    int dkLen )
        throws java.security.NoSuchAlgorithmException, 
               java.security.InvalidKeyException
    {
        SecretKeySpec keyspec = new SecretKeySpec( password, "HmacSHA1" );
        Mac prf = Mac.getInstance( "HmacSHA1" );
        prf.init( keyspec );

        // Note: hLen, dkLen, l, r, T, F, etc. are horrible names for
        //       variables and functions in this day and age, but they
        //       reflect the terse symbols used in RFC 2898 to describe
        //       the PBKDF2 algorithm, which improves validation of the
        //       code vs. the RFC.
        //
        // hLen denotes the length in octets of the pseudorandom function output
        // dklen the length in octets (bytes) of the derived key. 

        int hLen = prf.getMacLength();   // 20 for SHA1
        int l = Math.ceil( dkLen/hLen ); //  1 for 128bit (16-byte) keys
        int r = dkLen - (l-1)*hLen;      // 16 for 128bit (16-byte) keys
        byte T[] = new byte[l * hLen];
        int ti_offset = 0;
        for (int i = 1; i <= l; i++) {
            F( T, ti_offset, prf, salt, iterationCount, i );
            ti_offset += hLen;
        }

        if (r < hLen) {
            // Incomplete last block
            byte DK[] = new byte[dkLen];
            System.arraycopy(T, 0, DK, 0, dkLen);
            return DK;
        }
        return T;
    } 

    private static void F( byte[] dest, int offset, Mac prf, byte[] S, int c, int blockIndex ) {
        final int hLen = prf.getMacLength();
        byte U_r[] = new byte[ hLen ];
        // U0 = S || INT (i);
        byte U_i[] = new byte[S.length + 4];
        System.arraycopy( S, 0, U_i, 0, S.length );
        INT( U_i, S.length, blockIndex );
        for( int i = 0; i < c; i++ ) {
            U_i = prf.doFinal( U_i );
            xor( U_r, U_i );
        }

        System.arraycopy( U_r, 0, dest, offset, hLen );
    }

    private static void xor( byte[] dest, byte[] src ) {
        for( int i = 0; i < dest.length; i++ ) {
            dest[i] ^= src[i];
        }
    }

    private static void INT( byte[] dest, int offset, int i ) {
        dest[offset + 0] = (byte) (i / (256 * 256 * 256));
        dest[offset + 1] = (byte) (i / (256 * 256));
        dest[offset + 2] = (byte) (i / (256));
        dest[offset + 3] = (byte) (i);
    } 

    // ctor
    private PBKDF2 () {}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T07:51:08.480

通过添加重载的 derivedKey()，略微改进了 Cheeso 使用 HMacSHA256 或 HMacSHA512 的代码。
[通过此更改，代码使用PHP Crypt lib](https://github.com/ircmaxell/PHP-CryptLib/blob/master/test/Data/Vectors/pbkdf.custom.test-vectors)中的 PKDF2-HMAC-SHA512 测试向量运行，导致 100 个测试用例中有 6 个失败。

```
// PBKDF2.java
// ------------------------------------------------------------------
//
// RFC2898 PBKDF2 in Java.  The RFC2898 defines a standard algorithm for
// deriving key bytes from a text password.  This is also called 
// "PBKDF2", for Password-based key derivation function #2.
//
// There's no RFC2898-compliant PBKDF2 function in the JRE, as far as I
// know, but it is available in many J2EE runtimes, including those from
// JBoss, IBM, and Oracle.
//
// It's fairly simple to implement, so here it is. 
// 
// Author: Admin
// built on host: DINOCH-2
// Created Sun Aug 09 01:06:57 2009
//
// last saved: 
// Time-stamp: <2009-August-09 11:11:47>
// ------------------------------------------------------------------
//
// code from Matthias Gartner
//
// ------------------------------------------------------------------

package cheeso.examples;

import java.security.NoSuchAlgorithmException;
import java.security.InvalidKeyException;
import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;

public class PBKDF2
{
    public static byte[] deriveKey(byte[] password,
                                   byte[] salt,
                                   int iterationCount,
                                   int dkLen)
            throws NoSuchAlgorithmException,
            InvalidKeyException
    {
        return deriveKey("HmacSHA1", password, salt, iterationCount, dkLen);
    }

    public static byte[] deriveKey(String hmacAlgo,
                                   byte[] password,
                                   byte[] salt,
                                   int iterationCount,
                                   int dkLen)
            throws NoSuchAlgorithmException,
            InvalidKeyException
    {
        SecretKeySpec keyspec = new SecretKeySpec(password, hmacAlgo);
        Mac prf = Mac.getInstance(hmacAlgo);
        prf.init( keyspec );

        // Note: hLen, dkLen, l, r, T, F, etc. are horrible names for
        //       variables and functions in this day and age, but they
        //       reflect the terse symbols used in RFC 2898 to describe
        //       the PBKDF2 algorithm, which improves validation of the
        //       code vs. the RFC.
        //
        // dklen is expressed in bytes. (16 for a 128-bit key, 32 for 256)

        int hLen = prf.getMacLength();   // 20 for SHA1
        int l = Math.max( dkLen, hLen); //  1 for 128bit (16-byte) keys
        int r = dkLen - (l-1)*hLen;      // 16 for 128bit (16-byte) keys
        byte T[] = new byte[l * hLen];
        int ti_offset = 0;
        for (int i = 1; i <= l; i++) {
            F( T, ti_offset, prf, salt, iterationCount, i );
            ti_offset += hLen;
        }

        if (r < hLen) {
            // Incomplete last block
            byte DK[] = new byte[dkLen];
            System.arraycopy(T, 0, DK, 0, dkLen);
            return DK;
        }
        return T;
    } 

    private static void F( byte[] dest, int offset, Mac prf, byte[] S, int c, int blockIndex ) {
        final int hLen = prf.getMacLength();
        byte U_r[] = new byte[ hLen ];
        // U0 = S || INT (i);
        byte U_i[] = new byte[S.length + 4];
        System.arraycopy( S, 0, U_i, 0, S.length );
        INT( U_i, S.length, blockIndex );
        for( int i = 0; i < c; i++ ) {
            U_i = prf.doFinal( U_i );
            xor( U_r, U_i );
        }

        System.arraycopy( U_r, 0, dest, offset, hLen );
    }

    private static void xor( byte[] dest, byte[] src ) {
        for( int i = 0; i < dest.length; i++ ) {
            dest[i] ^= src[i];
        }
    }

    private static void INT( byte[] dest, int offset, int i ) {
        dest[offset + 0] = (byte) (i / (256 * 256 * 256));
        dest[offset + 1] = (byte) (i / (256 * 256));
        dest[offset + 2] = (byte) (i / (256));
        dest[offset + 3] = (byte) (i);
    } 

    // ctor
    private PBKDF2 () {}
} 
```

# java - java正则表达式行

> ID：1012367
> 
> 赞同：2
> 
> 时间：2009-06-18T12:27:52.937
> 
> 标签：java, regex

在java中，我想逐行读取文件并将该行打印到输出。我想用正则表达式解决这个问题。

```
while (...)
{
  private static java.util.regex.Pattern line = java.util.regex.Pattern.compile(".*\\n");
  System.out.print(scanner.next(line));
} 
```

代码中的正则表达式不正确，因为我得到 InputMismatchException。我在这个正则表达式上工作了 2 个小时。请帮忙。

使用正则表达式 powertoy，我看到 ".*\n" 是正确的。但是我的程序运行不正确。

整个来源是：

```
/**
 * Extracts the points in the standard input in off file format to the standard output in ascii points format.
 */

 import java.util.regex.Pattern;
 import java.util.Scanner;

class off_to_ascii_points 
{
    private static Scanner scanner = new Scanner(System.in);    
    private static Pattern fat_word_pattern = Pattern.compile("\\s*\\S*\\s*");
    private static Pattern line = Pattern.compile(".*\\n", Pattern.MULTILINE);

    public static void main(String[] args) 
    {
        try
        {
            scanner.useLocale(java.util.Locale.US);

                    /* skip to the number of points */
            scanner.skip(fat_word_pattern);

            int n_points = scanner.nextInt();

                    /* skip the rest of the 2\. line */
            scanner.skip(fat_word_pattern); scanner.skip(fat_word_pattern);

            for (int i = 0; i < n_points; ++i)
            {
                    System.out.print(scanner.next(line));
                      /*
                      Here my mistake is. 
                      next() reads only until the delimiter, 
                      which is by default any white-space-sequence. 
                      That is next() does not read till the end of the line 
                      what i wanted.

                      Changing "next(line)" to "nextLine()" solves the problem.
                      Also, setting the delimiter to line_separator 
                      right before the loop solves the problem too.
                      */
            }

        }
        catch(java.lang.Exception e)
        {
            System.err.println("exception");
            e.printStackTrace();
        }
    }
} 
```

示例输入的开头是：

```
OFF
4999996 10000000 0
-28.6663 -11.3788 -58.8252 
-28.5917 -11.329 -58.8287 
-28.5103 -11.4786 -58.8651 
-28.8888 -11.7784 -58.9071 
-29.6105 -11.2297 -58.6101 
-29.1189 -11.429 -58.7828 
-29.4967 -11.7289 -58.787 
-29.1581 -11.8285 -58.8766 
-30.0735 -11.6798 -58.5941 
-29.9395 -11.2302 -58.4986 
-29.7318 -11.5794 -58.6753 
-29.0862 -11.1293 -58.7048 
-30.2359 -11.6801 -58.5331 
-30.2021 -11.3805 -58.4527 
-30.3594 -11.3808 -58.3798 
```

我首先跳到数字 4999996，它是包含点坐标的行数。这些行是我试图写入输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-18T13:12:52.143

我建议使用

```
private static Pattern line = Pattern.compile(".*");

scanner.useDelimiter("[\\r\\n]+"); // Insert right before the for-loop

System.out.println(scanner.next(line)); //Replace print with println 
```

* * *

为什么您的代码不能按预期工作：

这与您使用的 Scanner 类以及该类的工作方式有关。

javadoc 指出：

> Scanner 使用分隔符模式将其输入分解为标记，默认情况下匹配空格。

这意味着当您调用 Scanner's.next* 方法之一时，扫描器会读取指定的输入，直到遇到下一个分隔符。

所以你的第一个电话`scanner.next(line)`开始阅读以下行

```
-28.6663 -11.3788 -58.8252 
```

并停在 -28.6663 之后的空间。然后它检查令牌 (-28.6663) 是否与您提供的模式 (.*\n) 匹配，而后者显然不匹配 (-28.6663)。这就是为什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T13:39:29.283

如果您只想将文件打印到标准输出，为什么要使用正则表达式？如果你知道你总是想跳过前两行，有更简单的方法来完成它。

```
import java.util.Scanner;
import java.io.File;

public class TestClass {
    public static void main(String[] args) throws Exception {
        Scanner in=new Scanner(new File("test.txt"));
        in.useDelimiter("\n"); // Or whatever line delimiter is appropriate
        in.next(); in.next(); // Skip first two lines
        while(in.hasNext())
            System.out.println(in.next());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T12:37:33.573

您必须将[Pattern](http://java.sun.com/j2se/1.5.0/docs/api/java/util/regex/Pattern.html)切换到多行模式。

```
line = Pattern.compile("^.*$", Pattern.MULTILINE);
System.out.println(scanner.next(line)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T13:35:59.460

默认情况下，扫描仪使用空白作为其分隔符。在第一次跳过后阅读该行之前，您必须将分隔符更改为新行。您需要更改的代码是在 for 循环之前插入以下行：

scanner.useDelimiter(Pattern.compile(System.getProperty("line.separator")));

并更新 Pattern 变量行如下：

private static Pattern line = Pattern.compile(".*", Pattern.MULTILINE);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T21:27:44.307

感谢大家的帮助。

现在我明白了我的错误：

API 文档指出，Scanner 类的每个 nextT() 方法首先跳过分隔符模式，然后尝试读取 T 值。但是它忘记说每个 next...() 方法只读取直到第一次出现分隔符！

# eclipse - Eclipse“服务器位置”部分已禁用，需要更改才能使用 Tomcat 安装

> ID：1012378
> 
> 赞同：115
> 
> 时间：2009-06-18T12:30:04.227
> 
> 标签：eclipse, tomcat, eclipse-wtp, tomcat5.5, eclipse-3.4

我已经在 Eclipse 中安装了一个 Tomcat 5.5 的动态 Web 项目。

我想为我们设置 Tomcat 安装而不是工作区元数据位置的服务器，但是当 Eclipse 显示服务器的“概述”屏幕时，“服务器位置”部分被禁用，因此我无法更改它。

当您打开服务器视图并双击服务器时，将显示概览屏幕。

是否可以启用“概述”屏幕的这一部分或破解配置文件以指向 Tomcat 安装？

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2009-06-18T12:48:42.537

好的，对不起我之前的回答，我以前从未见过那个概述屏幕。

这是我的做法：

1.  在“服务器”视图中右键单击我的 tomcat 服务器，选择“属性...”
2.  在“常规”面板中，单击“切换位置”按钮
3.  “位置：[工作空间元数据]”位应该已被其他内容替换。
4.  打开（或关闭并重新打开）服务器的概览屏幕。

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2011-03-16T17:07:12.163

右键单击服务器，然后单击*Add/Remove*，然后删除已配置面板中的所有项目。然后右键单击服务器并从上下文菜单中选择*“**清理**...” 。*然后将启用*服务器位置选项。*

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-10-26T11:10:11.130

我刚刚遇到了同样的问题，这对我有用：

请注意服务器对话框上的消息“必须在没有模块存在的情况下发布服务器才能进行更改”。因此，删除项目后，重新发布您的服务器，设置服务器位置的选项应该重新启用。

![在此处输入图像描述](../Images/32422dcdb6f0a188d4e0ae2d917a424a.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-25T19:13:57.810

删除并重新添加服务器后，它对我有用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-07T11:50:09.033

在没有任何项目的情况下启动服务器和发布帮助我修改了“服务器位置”。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-22T05:27:00.157

如果您的服务器没有加载繁重的配置，最好的解决方案是删除 tomcat 并重新设置它。
`It will be much easier then doing try and error for 7-10 times!` [![在此处输入图像描述](../Images/042f91c63f106106cf4e2def0de5d013.png)](https://i.stack.imgur.com/SHxDG.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-07T11:09:42.210

在对**Tomcat Server Location**进行任何更改之前，您需要删除部署在服务器上的项目。

要删除项目：在“服务器”视图中展开 tomcat 服务器
右键单击并选择删除

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-11T06:29:27.087

确保服务器中没有项目 Deploy。如果是这样，请右键单击服务器，选择添加和删除，然后删除所有项目。在此之后，您可以双击服务器，该选项将为您启用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-07-11T08:14:08.783

我以管理员身份启动了 Eclipse，它工作正常。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-11-24T08:41:41.723

您也可以在启动配置中使用 VM 参数来更改此设置。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-02-07T17:01:00.450

如果前面的操作没有效果，请备份您的服务器配置，删除服务器并重新包含它。这是我的情况。

# java - Tomcat 和虚拟机

> ID：1012379
> 
> 赞同：3
> 
> 时间：2009-06-18T12:30:38.017
> 
> 标签：java, tomcat, servlets

我真的很困惑，无法理解 tomcat 实际运行的位置。它是否在执行 servlet 的 JVM 内部执行。或者它有自己的虚拟机来执行 servlet 或 JSP。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-18T12:33:19.573

Tomcat 将在 JVM 中运行，而 servlet 在 Tomcat 进程中执行（在同一个 JVM 中）。

运行 catalina.sh（或 .bat）将为运行 Tomcat 启动一个新的 JVM。如果您需要 Web 服务器作为更大应用程序的一部分，您可以在现有 JVM 中以编程方式加载/运行 Tomcat。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-18T12:37:42.963

Java 提供 JVM 来运行任何 Java 应用程序。

Tomcat 本质上是一个 Java 程序，它实现了 Servlet 容器规范并充当 Servlet 容器。

这也意味着您需要（至少）Java JRE 来运行 Tomcat。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-18T12:39:13.553

这是一个令人困惑的主题，因为单独的 JVM 的“外观”有时会与不同的类加载器实例混淆。

Tomcat 和您的应用程序（WAR 或 servlet）共享相同的 JVM，但它们使用独立的类加载器 - 这就是为什么您可以使用不同版本的类似 log4J 的 2 个 WAR 并且一切都很好。 [这是 O'Reilly 的一篇关于类加载器的文章](http://www.onjava.com/pub/a/onjava/2005/01/26/classloading.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T12:33:35.593

Tomcat 和它的 servlet 都在 JVM 中运行。

# facebook - 谷歌 OpenID 确认页面上 Plaxo 和 Facebook 的徽标

> ID：1012385
> 
> 赞同：0
> 
> 时间：2009-06-18T12:31:55.580
> 
> 标签：facebook, openid, branding, plaxo

干杯，

在看到 Stack Overflow 对 OpenID 的出色实现以及 Google 对 OpenID 所做的出色工作之后，我在我正在开发的 Web 应用程序上实现了它。在我的研究过程中，我遇到了 Plaxo 作为另一个伟大的 RP。

最近，Facebook 添加了一些基本的 OpenID 支持。它显然用于与通常完全不同的目的：我没有找到使用 OpenID*登录的方法。*然而，有一件事引起了我的注意：在 Google 托管的 UI 上，他们有一个 Facebook 徽标，并且标题有点不同。起初我认为这可能是因为最近设计的新“弹出扩展”正是因为 Facebook。但是我编辑了授权 URL 并删除了对弹出扩展的引用，并且图标仍然存在。当我编写扩展支持时，它没有添加图标。

我环顾四周，Plaxo 在 Google 的身份验证页面上也有他们的图标。

尽管这可能是谷歌和 Plaxo 以及谷歌和 Facebook 之间的商业交易的结果，但情况可能并非如此。所以我想知道：有谁知道如何添加这个图标？

*nb 我已经在 Google 的 Federated Login API 组上[询问过这个](http://groups.google.com/group/google-federated-login-api/browse_thread/thread/6aa1975a5eece968)问题，但没有收到任何回复。我也反复在网上搜索过；显然没有多少人注意到这一点并且对此有足够的兴趣。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-19T13:54:12.943

谷歌有一个 RP 的白名单，它正在做实验性的额外功能。我不认为将徽标放在 Google 的登录页面上通常还没有提供。

# handler - 在服务器级别配置 javax.servlet.Filter 和 javax.xml.rpc.handler.GenericHandler

> ID：1012392
> 
> 赞同：1
> 
> 时间：2009-06-18T12:33:19.230
> 
> 标签：handler, servlet-filters

我有一个过滤器和几个处理程序（GenericHandler），它们在为每个 Web 应用程序或 Web 服务配置时工作正常。我只是想知道是否有一种方法可以在服务器级别（在一个公共位置）配置这些，以便部署在服务器中的每个 Web 应用程序或 Web 服务都可以隐式配置它们，这样我就不必去每个应用程序编写它们中的相同配置。我正在使用 websphere 6.1 服务器。

谢谢，尼丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-09-20T13:41:39.987

我在 JBoss 中寻找相同的东西。

至少在 Jboss 和 Tomcat 中你有一个基本的 web.xml。你可以把所有的通用配置放在那里。所以你可以把通用过滤器和它的映射放在那里。过滤器的类和资源必须位于一个公共位置。在 JBoss 中是（通常）。*`server_name`*`/lib``default/lib`

我要试试。希望它有效！

# interop - 大批 ^ TO unsigned char* :: Marshall 类 - 互操作问题

> ID：1012396
> 
> 赞同：1
> 
> 时间：2009-06-18T12:33:49.743
> 
> 标签：interop, cryptography, c++-cli, type-conversion

我想将 array< Byte>^ 转换为 unsigned char*。我试图解释我做了什么。我不知道如何进一步进行。请告诉我正确的方法。我正在使用 MS VC 2005。

```
//Managed array  
array<Byte>^ vPublicKey = vX509->GetPublicKey();

//Unmanaged array
unsigned char        vUnmanagedPublicKey[MAX_PUBLIC_KEY_SIZE]; 
ZeroMemory(vUnmanagedPublicKey,MAX_PUBLIC_KEY_SIZE);

//MANAGED ARRAY to UNMANAGED ARRAY  

// Initialize unmanged memory to hold the array.  
vPublicKeySize = Marshal::SizeOf(vPublicKey[0]) * vPublicKey->Length;  
IntPtr vPnt = Marshal::AllocHGlobal(vPublicKeySize);

// Copy the Managed array to unmanaged memory.  
Marshal::Copy(vPublicKey,0,vPnt,vPublicKeySize); 
```

这里 vPnt 是一个数字。但是如何将数据从 vPublicKey 复制到 vUnmanagedPublicKey。

谢谢拉杰_

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-19T07:43:29.710

而不是使用编组API，只需固定托管数组更容易：

```
array<Byte>^ vPublicKey = vX509->GetPublicKey();
cli::pin_ptr<unsigned char> pPublicKey = &vPublicKey[0];

// You can now use pPublicKey directly as a pointer to the data.

// If you really want to move the data to unmanaged memory, you can just memcpy it:
unsigned char * unmanagedPublicKey = new unsigned char[vPublicKey->Length];
memcpy(unmanagedPublicKey, pPublicKey, vPublicKey->Length);
// .. use unmanagedPublicKey
delete[] unmanagedPublicKey; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-18T12:36:32.297

尝试用这个替换你的最后两行：

```
Marshal::Copy(vPublicKey, 0, IntPtr(vUnmanagedPublicKey), vPublicKeySize); 
```

您已经在非托管内存中分配了一个缓冲区以将密钥复制到，因此无需使用 AllocHGlobal 分配非托管内存。您只需要将非托管指针 (vUnmanagedPublicKey) 转换为托管指针 (IntPtr)，以便 Marshal::Copy 可以使用它。IntPtr 将本机指针作为其构造函数的参数之一来执行该转换。

因此，您的完整代码可能如下所示：

```
array<Byte>^ vPublicKey = vX509->GetPublicKey();
unsigned char        vUnmanagedPublicKey[MAX_PUBLIC_KEY_SIZE]; 
ZeroMemory(vUnmanagedPublicKey, MAX_PUBLIC_KEY_SIZE);

Marshal::Copy(vPublicKey, 0, IntPtr(vUnmanagedPublicKey), vPublicKey->Length); 
```

# database - AJAX 导致更多“健谈”

> ID：1012399
> 
> 赞同：2
> 
> 时间：2009-06-18T12:34:22.597
> 
> 标签：database, ajax, performance

我们正在重新设计一个屏幕，从“旧式”编辑和提交，到每隔几秒自动保存一次的 AJAXy 风格。

结果会*更多，但*服务器/数据库往返次数会更小。例如，当用户编辑 textarea 字段时，我们将通过 AJAX 每 60 秒自动保存他们的更改。目前他们会更新一个或多个这样的字段，然后提交整个页面，整个页面会重新加载。

我们这样做是为了让页面对用户来说更加快捷——显然是 AJAX 的使用。但是你们中是否有人遇到过与迁移到这样的方法相关的服务器/数据库性能问题？从服务器/数据库往返的角度提前了解是否存在陷阱？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T12:39:29.077

我在这个与 DWR（Java AJAX 框架）相关的[答案](https://stackoverflow.com/questions/1006387/what-is-the-disadvantage-of-dwr/1006625#1006625)中提到了这个问题。

AJAX 在它提供的东西上很诱人。您将（很可能）获得更多的数据往返（就单个请求/响应而言）。我的建议是监控/衡量这一点，并确定在 AJAX 上下文中使用什么是重要的，以及往返的成本是多少（在网络和 CPU 方面）。正如您所确定的，这将影响您的服务器进程和支持数据库。

您可能会发现各种数据类型都需要缓存，或者某些数据太昂贵而无法从 AJAX 基础架构的 POV 中检索。您可以缓存在服务器端和（或课程）网页本身。

我已经看到客户端站点实现了大量启用 AJAX 的网页，但由于对后端的不可预见的影响，只能对其进行限制或回滚。只要稍加注意并努力监测影响，通常可以避免这种情况，或者至少可以提前了解并适当减轻这种影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T18:13:44.987

我从来没有遇到过让系统而不是用户来决定何时将某些内容保存到数据库中的合适的性能问题。

我可能会想象一些数据完整性问题，但我认为这些对你来说并不重要。

# c# - 如何从 javascript 调用服务器端函数？

> ID：1012400
> 
> 赞同：2
> 
> 时间：2009-06-18T12:34:36.760
> 
> 标签：c#, asp.net, javascript, .net-3.5

我有一个 javascript 函数，我试图从中调用服务器端函数 `WebSchedule.Client.RadGrid1_SelectedIndexChanged`。这是代码：

```
<script type="text/javascript">

     function RowSelected(sender, args) 
     {
         var dataKeyValue = args.getDataKeyValue("Order_No");
         document.getElementById("txtOrderno").value = dataKeyValue;
         WebSchedule.Client.RadGrid1_SelectedIndexChanged(sender, args);
     }
 </script> 
```

但是，我收到错误“WebSchedule 未定义”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-18T12:37:11.263

查看所谓的[页面方法](http://www.singingeels.com/Articles/Using_Page_Methods_in_ASPNET_AJAX.aspx)。

顺便说一句，这应该是服务器端方法还是客户端？

```
function RowSelected(sender, args) { 
    var dataKeyValue = args.getDataKeyValue("Order_No");      
    document.getElementById("txtOrderno").value = dataKeyValue;
    WebSchedule.Client.RadGrid1_SelectedIndexChanged(sender, args); 
} 
```

所以 - 在我看来这是一个 javascript 函数。

据我了解，RadScriptManager 继承自 System.Web.UI.ScriptManager。这就是 EnablePageMethods 属性的作用：“获取或设置一个值，该值指示是否可以从客户端脚本调用 ASP.NET 页面中的**公共静态页面方法。”**

这些粗体字表示 - 由于缺少视图状态，您不会在该服务器端方法中看到任何控制。

因此 - 考虑使用更新面板控件（我不知道它如何与 Telerik 控件一起使用）或确保您的服务器端方法是完全无状态的（通过 javascript 函数传递所需的数据）。

无论如何-在我看来，您应该更仔细地研究页面方法的性质。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T12:56:53.127

客户端 =/= 服务器

查看异步 Javascript 和 XML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T12:59:22.547

您的服务器端页面方法必须具有 WebMethod 属性并声明为公共静态。

然后使用 javascript 可以使用以下语法调用它们：PageMethods.MethodName()

# maven-2 - 指示父目录的 Maven2 属性

> ID：1012402
> 
> 赞同：118
> 
> 时间：2009-06-18T12:34:53.670
> 
> 标签：maven-2, properties

我有一个多模块项目，比如这个：

```
main-project/
    module1/
    module2/
        sub-module1/
        sub-module2/
        sub-module3/
        ...
    module3/
    module4/
    ... 
```

我需要在 Maven2 中定义一组属性（取决于我想要发布我的项目的环境）。我不会使用`<properties>`，因为有很多属性...因此，我使用[Properties Maven2 插件](http://mojo.codehaus.org/properties-maven-plugin)。

属性文件位于`main-project/`目录中。如何在主 pom.xml 中设置正确的目录，以便指定任何子项在哪里可以找到属性文件？

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>properties-maven-plugin</artifactId>
    <version>1.0-alpha-1</version>
    <executions>
        <execution>
            <phase>initialize</phase>
            <goals>
                <goal>read-project-properties</goal>
            </goals>
            <configuration>
                <files>
                    <file>???/env_${env}.properties</file>
                </files>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

如果我设置 only `<file>env_${env}.properties</file>`，那么当 Maven2 编译第一个模块时，它不会找到该`main-project/env_dev.properties`文件。如果我设置`<file>../env_${env}.properties</file>`，则将在父级别或任何子模块级别引发错误...

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2009-06-19T18:34:45.617

尝试在每个 pom 中设置一个属性以找到主项目目录。

在父级中：

```
<properties>
    <main.basedir>${project.basedir}</main.basedir>
</properties> 
```

在孩子们：

```
<properties>
    <main.basedir>${project.parent.basedir}</main.basedir>
</properties> 
```

在孙辈中：

```
<properties>
    <main.basedir>${project.parent.parent.basedir}</main.basedir>
</properties> 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2019-03-28T16:11:52.813

至少在当前的 Maven 版本（3.6.0）中，您可以使用`${maven.multiModuleProjectDirectory}`

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-06-22T10:20:34.517

将[directory-maven-plugin 与 directory-of 目标一起使用](https://github.com/jdcasey/directory-maven-plugin#directory-of-goal)。

与其他建议不同：

*   该解决方案适用于多模块项目。
*   无论您构建整个项目还是子模块，它都有效。
*   无论您是从根文件夹还是子模块运行 maven，它都有效。
*   无需在每个子模块中设置相对路径属性！

该插件允许您将您选择的属性设置为任何项目模块的绝对路径。在我的情况下，我将它设置为根模块......在我的项目根 pom 中：

```
<plugin>
    <groupId>org.commonjava.maven.plugins</groupId>
    <artifactId>directory-maven-plugin</artifactId>
    <version>0.1</version>
    <executions>
        <execution>
            <id>directories</id>
            <goals>
                <goal>directory-of</goal>
            </goals>
            <phase>initialize</phase>
            <configuration>
                <property>myproject.basedir</property>
                <project>
                    <groupId>com.my.domain</groupId>
                    <artifactId>my-root-artifact</artifactId>
                </project>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

从那时起，任何子模块 pom 中的 ${myproject.basedir} 始终具有项目根模块的路径。当然，您可以将属性设置为任何模块，而不仅仅是根...

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-06-19T09:22:14.397

我找到了解决问题的方法：我使用 Groovy Maven 插件搜索属性文件。

由于我的属性文件必须在当前目录、../ 或 ../.. 中，我编写了一个小的 Groovy 代码来检查这三个文件夹。

这是我的 pom.xml 的摘录：

```
<!-- Use Groovy to search the location of the properties file. -->
<plugin>
    <groupId>org.codehaus.groovy.maven</groupId>
    <artifactId>gmaven-plugin</artifactId>
    <version>1.0-rc-5</version>
    <executions>
        <execution>
            <phase>validate</phase>
            <goals>
                <goal>execute</goal>
            </goals>
            <configuration>
                <source>
                    import java.io.File;
                    String p = project.properties['env-properties-file'];
                    File f = new File(p); 
                    if (!f.exists()) {
                        f = new File("../" + p);
                        if (!f.exists()) {
                            f = new File("../../" + p);
                        }
                    }
                    project.properties['env-properties-file-by-groovy'] = f.getAbsolutePath();
            </source>
            </configuration>
        </execution>
    </executions>
</plugin>
<!-- Now, I can load the properties file using the new 'env-properties-file-by-groovy' property. -->
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>properties-maven-plugin</artifactId>
    <version>1.0-alpha-1</version>
    <executions>
        <execution>
            <phase>initialize</phase>
            <goals>
                <goal>read-project-properties</goal>
            </goals>
            <configuration>
                <files>
                    <file>${env-properties-file-by-groovy}</file>
                </files>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

这是有效的，但我真的不喜欢它。

因此，如果您有更好的解决方案，请不要犹豫发布！

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-08-29T19:07:59.133

所以我看到的问题是你无法在maven中获得父目录的绝对路径。

<rant>[我听说这是一种反模式](http://maven.40175.n5.nabble.com/Relative-path-to-parent-directory-at-multi-module-maven-project-td4611798.html)，但对于每个反模式都有真实、合法的用例，我厌倦了 maven 告诉我我只能遵循他们的模式。</咆哮>

所以我发现的解决方法是使用antrun。在子 pom.xml 中试试这个：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
        <execution>
            <id>getMainBaseDir</id>
            <phase>validate</phase>
            <goals>
                <goal>run</goal>
            </goals>
            <configuration>
                <exportAntProperties>true</exportAntProperties>
                <target>
                    <!--Adjust the location below to your directory structure -->
                    <property name="main.basedir" location="./.." />
                    <echo message="main.basedir=${main.basedir}"/>
                </target>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

如果您运行`mvn verify`，您应该会看到如下内容：

```
main:
     [echo] main.basedir=C:\src\parent.project.dir.name 
```

然后，您可以`${main.basedir}`在任何其他插件等中使用。我花了一段时间才弄清楚这一点，所以希望它对其他人有所帮助。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-10-20T15:58:57.447

另一种选择：

在父 pom 中，使用：

```
<properties>
   <rootDir>${session.executionRootDirectory}</rootDir>
<properties> 
```

在子 pom 中，您可以引用此变量。

主要警告：它强制您始终从主父 pom 目录执行命令。然后，如果您只想为某些特定模块运行命令（例如测试），请使用以下语法：

mvn 测试 --projects

用于参数化“path_to_test_data”变量的surefire配置可能是：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>${surefire.plugin.version}</version>
    <configuration>
        <systemPropertyVariables>
            <path_to_test_data>${rootDir}/../testdata</path_to_test_data>
        </systemPropertyVariables>
    </configuration>
</plugin> 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-10-25T12:33:27.507

就我而言，它的工作原理如下：

```
...
<properties>
  <main_dir>${project.parent.relativePath}/..</main_dir>
</properties>
...

<plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>properties-maven-plugin</artifactId>
        <version>1.0-alpha-1</version>
        <executions>
          <execution>
            <phase>initialize</phase>
            <goals>
              <goal>read-project-properties</goal>
            </goals>
            <configuration>
              <files>
                 <file>${main_dir}/maven_custom.properties</file>
              </files>
            </configuration>
          </execution>
        </executions>
</plugin> 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-07-02T10:46:27.773

以下小配置文件对我有用。我需要为 CheckStyle 进行这样的配置，我将其放入`config`项目根目录中的目录中，这样我就可以从主模块和子模块运行它。

```
<profile>
    <id>root-dir</id>
    <activation>
        <file>
            <exists>${project.basedir}/../../config/checkstyle.xml</exists>
        </file>
    </activation>
    <properties>
        <project.config.path>${project.basedir}/../config</project.config.path>
    </properties>
</profile> 
```

它不适用于嵌套模块，但我确信可以使用多个具有不同`exists`'s 的配置文件对其进行修改。（我不知道为什么验证标签中应该有“../..”，而被覆盖的属性本身只有“..”，但它只能以这种方式工作。）

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-09-17T12:06:22.843

```
<plugins>
  <plugin>
    <groupId>org.codehaus.groovy.maven</groupId>
    <artifactId>gmaven-plugin</artifactId>
    <version>1.0</version>
    <executions>
      <execution>
        <phase>validate</phase>
        <goals>
          <goal>execute</goal>
        </goals>
        <configuration>
          <source>
            import java.io.File
            project.properties.parentdir = "${pom.basedir}"
            while (new File(new File(project.properties.parentdir).parent, 'pom.xml').exists()) {
                project.properties.parentdir = new File(project.properties.parentdir).parent
            }
          </source>
        </configuration>
      </execution>
    </executions>
  </plugin>
  <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>properties-maven-plugin</artifactId>
    <version>1.0-alpha-2</version>
    <executions>
      <execution>
        <phase>initialize</phase>
        <goals>
          <goal>read-project-properties</goal>
        </goals>
        <configuration>
          <files>
            <file>${parentdir}/build.properties</file>
          </files>
        </configuration>
      </execution>
    </executions>
  </plugin>
  ... 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-07-13T15:57:29.440

我找到了解决这个问题的方法：使用 ${parent.relativePath}

```
<parent>
    <artifactId>xxx</artifactId>
    <groupId>xxx</groupId>
    <version>1.0-SNAPSHOT</version>
    <relativePath>..</relativePath>
</parent>
<build>
    <filters>
        <filter>${parent.relativePath}/src/main/filters/filter-${env}.properties</filter>
    </filters>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
</build> 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-11-16T20:41:19.290

您在项目 C 中，项目 C 是 B 的子模块，B 是 A 的子模块。您尝试`src/test/config/etc`从项目 C 到达模块 D 的目录。D 也是 A 的子模块。以下表达式可以获取 URI 路径：

```
-Dparameter=file:/${basedir}/../../D/src/test/config/etc 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-08-28T20:10:55.750

在[回答另一个问题时](https://stackoverflow.com/questions/1231561/how-to-share-common-properties-among-several-maven-projects/1265428#1265428)，我展示了如何扩展 maven-properties-plugin 以使用 Maven 依赖项中定义的外部属性描述符。

您可以将该想法扩展为具有多个描述符 jar，每个描述符 jar 都将环境名称作为 artifactId 的一部分，其中包含 ${env}.properties。然后可以使用属性来选择合适的jar和属性文件，例如：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>properties-ext-maven-plugin</artifactId>
  <version>0.0.1</version>
  <executions>
    <execution>
      <id>read-properties</id>
      <phase>initialize</phase>
      <goals>
        <goal>read-project-properties</goal>
      </goals>
    </execution>
  </executions>                              
  <configuration>
    <filePaths>
      <!--assume the descriptor project has a file in the root of the jar -->
      <filePath>${env}.properties</filePath>
    </filePaths>
  </configuration> 
  <dependencies>
    <!-- reference the properties jar for the particular environment-->
    <dependency>
      <groupId>some.descriptor.group</groupId>
      <artifactId>env-${env}-descriptor</artifactId>
      <version>0.0.1</version>
    </dependency>
  </dependencies>
</plugin> 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2011-12-27T21:01:50.993

我只是从上面改进了 groovy 脚本以将属性写入根父属性文件中：

```
import java.io.*;
String p = project.properties['env-properties-file']
File f = new File(p)
if (f.exists()) {
try{
FileWriter fstream = new FileWriter(f.getAbsolutePath())
BufferedWriter out = new BufferedWriter(fstream)
String propToSet = f.getAbsolutePath().substring(0, f.getAbsolutePath().lastIndexOf(File.separator))
if (File.separator != "/") {
propToSet = propToSet.replace(File.separator,File.separator+File.separator+File.separator)
}
out.write("jacoco.agent = " + propToSet + "/lib/jacocoagent.jar")
out.close()
}catch (Exception e){
}
}
String ret = "../"
while (!f.exists()) {
f = new File(ret + p)
ret+= "../"
}
project.properties['env-properties-file-by-groovy'] = f.getAbsolutePath() 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-09-18T20:31:14.827

我认为，如果您使用示例中用于 findbugs 插件和多模块的扩展模式，您可能能够设置与绝对路径相关的全局属性。它使用顶部

[多模块示例](http://mojo.codehaus.org/findbugs-maven-plugin/2.1-SNAPSHOT/examples/multi-module-config.html)

顶层 pom 有一个不相关的 build-config 项目和一个 app-parent 用于多模块项目的模块。app-parent 使用扩展将自己链接到 build-config 项目并从中获取资源。这用于将通用配置文件传送到模块。它也可能是属性的管道。您可以将顶部目录写入 build-config 使用的属性文件。（好像太复杂了）

问题是必须在多模块项目中添加一个新的顶层才能使其工作。我试图避开一个真正不相关的构建配置项目，但它很笨拙而且看起来很脆弱。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-09-08T19:21:52.593

这扩展了 romaintaz 的答案，这很棒，因为它解决了问题并且还清楚地指出了 maven 缺少的功能。我选择了更高版本的插件，并添加了项目深度可能超过 3 层的情况。

```
<pluginManagement>
  <plugins>
    ..
    <plugin>
      <groupId>org.codehaus.gmaven</groupId>
      <artifactId>groovy-maven-plugin</artifactId>
      <version>2.0</version>
    </plugin>
    ..
  </plugins>
</pluginManagement> 
```

我选择不使用属性来定义文件名。请注意，如果未找到 build.properties，这将永远旋转。我添加了一个 .git 目录检测，但不想使响应过于复杂，所以这里没有显示。

```
 <plugin>
      <groupId>org.codehaus.gmaven</groupId>
      <artifactId>groovy-maven-plugin</artifactId>
      <executions>
          <execution>
              <phase>validate</phase>
              <goals>
                  <goal>execute</goal>
              </goals>
              <configuration>
                 <source>
                    import java.io.File;
                    String p = "build.properties";
                    while(true) {
                      File f = new File(p); 
                      if(f.exists()) {
                        project.properties['project-properties-file'] = f.getAbsolutePath();
                        break;
                      }
                      else {
                        p = "../${p}";
                      }
                    }
                </source>
              </configuration>
          </execution>
      </executions>
  </plugin> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-10-13T15:57:03.173

对于放置在多模块项目的主项目中的本地存储库，我需要解决类似的问题。本质上，真正的路径是`${basedir}`/lib。最后我在我的`parent.pom`：

```
<repository>
    <id>local-maven-repo</id>
    <url>file:///${basedir}/${project.parent.relativePath}/lib</url>
</repository> 
```

这`basedir`总是向当前本地模块显示，没有办法获得“主”项目的路径（Maven 的耻辱）。我的一些子模块更深一个目录，一些更深两个目录，但它们都是定义 repo URL 的父级的**直接子模块。**

所以这通常不能解决问题。`parent.pom`您可能总是将它与 Clay 接受的答案结合起来并定义一些其他属性 - 工作正常，仅在值 from不够好的情况下才需要重新定义。或者您可能只是重新配置插件 - 您只在 POM 工件（其他子模块的父级）中执行此操作。如果您在更多地方需要它，提取到属性中的值可能会更好，特别是当插件配置中没有任何更改时。

在值中使用`basedir`是这里必不可少的部分，因为 URL`file://${project.parent.relativePath}/lib`不想这样做（我删除了一个斜杠以使其相对）。使用能给我提供良好绝对路径的属性，然后从它开始相对是必要的。

当路径不是 URL/URI 时， drop 可能不是这样的问题`basedir`。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-04-15T14:06:19.590

我使用 ${basedir}..\src\ 访问了上面的目录

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-04-27T09:23:21.227

这在多项目设置中对我有用

在父 pom 文件中：

`<properties> <main.basedir>${project.basedir}\..</main.basedir> </properties>`

在子项目中访问这些属性，例如：

```
${main.basedir}/ 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2009-06-18T16:16:11.603

你试过了`../../env_${env}.properties`吗？

当module2与子模块处于同一级别时，通常我们会执行以下操作

```
<modules>
    <module>../sub-module1</module>
    <module>../sub-module2</module>
    <module>../sub-module3</module>
</modules> 
```

我认为 ../.. 会让你跳上两个级别。如果没有，您可能需要联系插件作者，看看这是否是一个已知问题。

# java - 如何禁止在 Checkstyle 中对文件进行所有检查？

> ID：1012407
> 
> 赞同：59
> 
> 时间：2009-06-18T12:36:34.153
> 
> 标签：java, checkstyle

我正在为第三方类进行覆盖，并且我想禁止对其进行所有检查（因为我只保留它直到补丁被接受）。

有没有办法禁止对文件的所有检查？

我尝试使用“*”，但失败了。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2009-06-19T06:11:39.703

不知道您是在使用命令行还是在 IDE 中，但您基本上需要一个抑制文件。如果您正在手动编辑 Checkstyle 配置文件，请向其中添加一个新模块：

```
<module name="SuppressionFilter">
    <property name="file" value="mysuppressions.xml" />
</module> 
```

你`mysuppression.xml`可以是这样的：

```
<?xml version="1.0"?>

<!DOCTYPE suppressions PUBLIC
    "-//Puppy Crawl//DTD Suppressions 1.1//EN"
    "http://www.puppycrawl.com/dtds/suppressions_1_1.dtd">

<suppressions>
    <suppress files="TheClassToIgnore\.java" checks="[a-zA-Z0-9]*"/>
</suppressions> 
```

" `files`" 属性的值基本上是源文件的正则表达式，而 " `checks`" 属性的值是要跳过的检查的正则表达式（" `[a-zA-Z0-9]*`" 基本上意味着跳过所有内容）。我猜这就是你要找的模式？

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-06-19T17:13:30.927

我可以通过在我的 checks.xml 中添加 SuppressionCommentFilter 标记来抑制文件中的检查：

首先，我将 FileContentHolder 标记添加为 TreeWalker 标记的子标记（自 com.puppycrawl.tools:checkstyle 8.1 版以来不需要此步骤）*：*

```
<module name="TreeWalker">
    ...
    <module name="FileContentsHolder"/>
    ...
</module> 
```

然后我在 checks.xml 中添加了 SuppressionCommentFilter（因为 com.puppycrawl.tools:checkstyle 的 8.1 版 - 在“TreeWalker”节点下）：

```
<module name="SuppressionCommentFilter"/> 
```

在我想禁止检查的每个文件中，我在文件的第一行中插入了以下注释：

```
// CHECKSTYLE:OFF 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-02-23T21:51:40.967

aberrant80 的回答很有帮助。在他的提示的帮助下 - 使用正则表达式模式匹配，我还能够通过将其添加到 checkstyle-suppressions.xml 文件来抑制整个包的 checkstyle。例如。跳过对 jaxb 包下所有自动生成的 java 文件的 checkstyle 检查，

```
 <suppressions>
        <suppress checks="[a-zA-Z0-9]*" files="[\\/]jaxb[\\/]" />
    </suppressions> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-06-18T13:39:48.580

如果您为 Checkstyle 使用 Checkclipse Eclipse 插件，您可以通过转到项目属性下的 Checkclipse > File Filter 选项卡来包含或排除文件模式（包括目录）。例如，我的项目在顶层包含**src**和**test目录。**我希望 Checkstyle 仅应用于**src**目录中的文件（省略**test**），所以我添加了一个包含模式，如下所示：

```
src/.+java$ 
```

如您所见，它使用正则表达式样式的语法进行模式规范。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-17T07:36:01.880

@aberrant80 的回答非常鼓舞人心，尽管它在我的项目中不起作用。为了抑制 checkstyle 在 Foo.java 中查找的任何警告，根据[link](http://maven.apache.org/plugins/maven-checkstyle-plugin/examples/suppressions-filter.html)，如果使用了 maven：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-checkstyle-plugin</artifactId>
    ...
        <configuration>
            ...
            <configLocation>checkstyle.xml</configLocation>
            <suppressionsLocation>checkstyle-suppressions.xml</suppressionsLocation>
            ...
        </configuration>                
    ...
</plugin> 
```

在*checkstyle-suppressions.xml*

```
<!DOCTYPE suppressions PUBLIC "-//Puppy Crawl//DTD Suppressions 1.1//EN" "http://www.puppycrawl.com/dtds/suppressions_1_1.dtd">
<suppressions>
    <suppress files="Foo.java" checks="[a-zA-Z0-9]*" />
</suppressions> 
```

目前最高版本是1.1（1.2不存在）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-18T12:42:45.450

有一个选项可以忽略写保护文件。或包中的文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-19T05:46:59.337

如果您不希望检查项目中的一组文件，您可以过滤掉这些文件，以便通过创建**文件过滤器不检查它们**

文件过滤器使用正则表达式来确定要排除的文件。正则表达式对完整的文件名进行操作 - 因此，您还可以排除整个文件夹。在这种情况下，您可以根据需要排除整个包。

如果你用谷歌搜索一下——你可能会找到一些 Checkstyle 配置属性文件，其中包含你正在寻找的示例。我建议您这样做后 - 将其保存为一个模板，以便您在将来的情况下参考它

# java - 这个 HQL 有什么问题？“节点没有数据类型”

> ID：1012408
> 
> 赞同：47
> 
> 时间：2009-06-18T12:36:34.917
> 
> 标签：java, hibernate, hql

```
session.createQuery("Select attribute from GoodsSection tgs " +
    "join gs.ascendants ags join ags.attributes attribute " +
    "where attribute.outerId = :outerId and tgs = :section ")
.setString("outerId", pOuterId)
.setEntity("section", section)
.setMaxResults(1)
.uniqueResult(); 
```

对我来说看起来不错，但结果是

```
java.lang.IllegalStateException: No data type for node: org.hibernate.hql.ast.tree.IdentNode 
 \-[IDENT] IdentNode: 'attribute' {originalText=attribute}

    at org.hibernate.hql.ast.tree.SelectClause.initializeExplicitSelectClause(SelectClause.java:145)
    at org.hibernate.hql.ast.HqlSqlWalker.useSelectClause(HqlSqlWalker.java:705)
    at org.hibernate.hql.ast.HqlSqlWalker.processQuery(HqlSqlWalker.java:529)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:645)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:281)
    at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:229) 
```

为什么？怎么了？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2009-06-18T13:02:56.970

您尚未定义“gs”别名。你只有“ags”和“tgs”。

# c# - System.Diagnostics.Process 参数

> ID：1012409
> 
> 赞同：2
> 
> 时间：2009-06-18T12:36:40.033
> 
> 标签：c#

如何将参数传递给带有空格的 System.Dignostics.Process。我正在这样做：

```
System.Diagnostics.Process proc = new System.Diagnostics.Process();
proc.EnableRaisingEvents = false;
proc.StartInfo.FileName = exePath + @"\bin\test.exe";

string args = String.Format(@"{0}{1}{2}{3}", "-plot " ,path1, " -o ", path2);
proc.StartInfo.Arguments = args; 
```

当 path1 和 path2 不包含空格（假设 path1 = C:\Temp\ 和 path2 = C:\Temp\Test）那么它工作正常，但是当 path1 和 path2 包含空格时，例如 path1 = C:\Documents and Settings \user\Desktop and path2 = C:\Documents and Settings\user\Desktop\New Folder) 然后它会截断 path1 和 path2 并中止。

请让我知道这样做的正确方法。

谢谢，阿希什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T12:41:38.243

```
Process proc = new Process(); 
proc.EnableRaisingEvents = false; 
proc.StartInfo.FileName = Path.Combine(exePath, @"bin\test.exe");
proc.StartInfo.Arguments = String.Format(@"-plot ""{0}"" -o ""{1}""", path1, path2); 
```

如果使用文字（不带@），您可以转义引号：

```
\"{0}\" 
```

如果使用逐字字符串（带@），您可以加倍引号：

```
""{0}"" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T12:39:13.647

您需要将路径封装在引号中。否则，它将空格作为分隔符读取，并认为路径的其余部分是一个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T12:40:01.960

您可以将可能包含空格的参数放在双引号中，如下所示：

```
string args = String.Format(@"{0} ""{1}"" {2} ""{3}""", "-plot", path1, "-o", path2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T12:40:35.703

将路径放在引号中...例如 "\""+path1+"\""

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T12:41:05.563

尝试以下操作：

```
string args = String.Format("{0}\"{1}\"{2}\"{3}\"", "-plot " ,path1, " -o ", path2); 
```

这将在您的路径周围加上引号，以便它们作为单个字符串传递，并且忽略其中的空格。

# wpf - 如何让 RadioButtons 像 MVVM 模式中的 ComboBox 一样工作？

> ID：1012410
> 
> 赞同：1
> 
> 时间：2009-06-18T12:36:41.173
> 
> 标签：wpf, xaml, radio-button

在下面的代码中，**用户从 ComboBox 中选择一个客户，**该客户的信息显示在框中。

现在我还**想让 RadioButtons**使用相同的功能。我有 RadioButtons 来显示客户的 ObservableCollection，但我怎样才能让**IsChecked**工作，即**RadioButtons****的等价物是`SelectedItem`**什么？

**XAML：**

```
<Window.Resources>

    <DataTemplate x:Key="CustomerShowTemplate">
        <Border CornerRadius="5" 
                Background="#eee" 
                Padding="5" 
                HorizontalAlignment="Left">
            <StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock FontSize="14" FontWeight="Bold" Text="{Binding FirstName}"/>
                    <TextBlock Text=" "/>
                    <TextBlock FontSize="14" FontWeight="Bold" Text="{Binding LastName}"/>
                </StackPanel>
                <TextBlock Text="{Binding Path=HireDate, 
                    StringFormat='Hired on {0:MMM dd, yyyy}'}"/>
            </StackPanel>
        </Border>
    </DataTemplate>

    <DataTemplate x:Key="CustomerComboBoxTemplate">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding FirstName}"/>
            <TextBlock Text=" "/>
            <TextBlock Text="{Binding LastName}"/>
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="CustomerRadioButtonTemplate">
        <RadioButton GroupName="CustomerRadioButtonGroup" 
            IsChecked="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsSelected}">
            <TextBlock Text="{Binding LastName}"/>
        </RadioButton>
    </DataTemplate>

</Window.Resources>

<DockPanel LastChildFill="False" Margin="10">

    <ContentControl 
        DockPanel.Dock="Top"
        Margin="0 0 0 10"
        Content="{Binding SelectedCustomer}" 
        ContentTemplate="{StaticResource CustomerShowTemplate}"/>

    <StackPanel 
        DockPanel.Dock="Top"
        Margin="0 0 0 10">

        <ComboBox 
            ItemsSource="{Binding Customers}"
            ItemTemplate="{StaticResource CustomerComboBoxTemplate}"
            Margin="20"
            HorizontalAlignment="Left"
            SelectedItem="{Binding SelectedCustomer, Mode=TwoWay}"/>

        <ListBox 
            ItemsSource="{Binding Customers}"
            ItemTemplate="{StaticResource CustomerRadioButtonTemplate}" 
            SelectedItem="{Binding SelectedCustomer, Mode=TwoWay}"/>

        <TextBlock Text="{Binding Customers.Count}"/>

        <Button Content="Add Customer" Command="{Binding AddCustomerCommand}"/>

    </StackPanel>

</DockPanel> 
```

**视图模型：**

```
using System;
using System.Collections.ObjectModel;
using TestSelectedItem234.Models;

namespace TestSelectedItem234.ViewModels
{
    public class MainViewModel : ViewModelBase
    {

        #region ViewModelProperty: Customers
        private ObservableCollection<Customer> _customers = new ObservableCollection<Customer>();
        public ObservableCollection<Customer> Customers
        {
            get
            {
                return _customers;
            }

            set
            {
                _customers = value;
                OnPropertyChanged("Customers");
            }
        }
        #endregion

        #region ViewModelProperty: SelectedCustomer
        private Customer _selectedCustomer;
        public Customer SelectedCustomer
        {
            get
            {
                return _selectedCustomer;
            }

            set
            {
                _selectedCustomer = value;
                OnPropertyChanged("SelectedCustomer");
            }
        }
        #endregion

        #region ViewModelProperty: CustomerIsSelected
        private bool _customerIsSelected;
        public bool CustomerIsSelected
        {
            get
            {
                return _customerIsSelected;
            }

            set
            {
                _customerIsSelected = value;
                OnPropertyChanged("CustomerIsSelected");
            }
        }
        #endregion

        public MainViewModel()
        {
            LoadCustomers();

            CustomerIsSelected = false;
        }

        private void LoadCustomers()
        {
            _customers.Add(new Customer { FirstName = "Jim", LastName = "Smith", HireDate = DateTime.Parse("2007-12-31") });
            _customers.Add(new Customer { FirstName = "Jack", LastName = "Taylor", HireDate = DateTime.Parse("2005-12-31") });
            _customers.Add(new Customer { FirstName = "Jane", LastName = "Smith", HireDate = DateTime.Parse("2005-06-30") });
            _customers.Add(new Customer { FirstName = "Alice", LastName = "Jones", HireDate = DateTime.Parse("2005-08-23") });
            _customers.Add(new Customer { FirstName = "Mary", LastName = "Ashton", HireDate = DateTime.Parse("2005-12-22") });
            _customers.Add(new Customer { FirstName = "Joe", LastName = "Jones", HireDate = DateTime.Parse("2005-11-22") });
            _customers.Add(new Customer { FirstName = "Henry", LastName = "Smith", HireDate = DateTime.Parse("2005-12-11") });
            _customers.Add(new Customer { FirstName = "Allison", LastName = "Rodrigez", HireDate = DateTime.Parse("2004-12-14") });
            _customers.Add(new Customer { FirstName = "Angela", LastName = "Thompson", HireDate = DateTime.Parse("2003-03-14") });
            _customers.Add(new Customer { FirstName = "Shawna", LastName = "Quaker", HireDate = DateTime.Parse("2005-12-14") });

            SelectedCustomer = _customers[0];
        }

    }
} 
```

# 更新：

我也从 Thomas 那里试过这个，但它仍然没有将 IsChecked 与 IsSelected 连接起来：

```
<ListBox ItemsSource="{Binding Customers}">
    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                        <RadioButton Content="{Binding FirstName}" IsChecked="{Binding IsSelected, RelativeSource={x:Static RelativeSource.TemplatedParent}}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-18T13:04:29.837

ItemsControl 没有 SelectedItem 属性，您应该改用 ListBox

此示例工作正常：

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:sys="clr-namespace:System;assembly=mscorlib">
  <Page.Resources>
    <x:Array x:Key="stringList" Type="sys:String">
      <sys:String>Hello</sys:String>
      <sys:String>World</sys:String>
      <sys:String>!</sys:String>
    </x:Array>
  </Page.Resources>
  <Grid>
    <ListBox ItemsSource="{StaticResource stringList}">
      <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
          <Setter Property="Template">
            <Setter.Value>
              <ControlTemplate TargetType="{x:Type ListBoxItem}">
                <RadioButton Content="{Binding}" IsChecked="{Binding IsSelected, RelativeSource={x:Static RelativeSource.TemplatedParent}}"/>
              </ControlTemplate>
            </Setter.Value>
          </Setter>
        </Style>
      </ListBox.ItemContainerStyle>
    </ListBox>
  </Grid>
</P 
```

# c# - 如何在 c# 中将引用作为函数参数

> ID：1012418
> 
> 赞同：1
> 
> 时间：2009-06-18T12:39:13.053
> 
> 标签：c#

> **可能重复：**
> [如何在 C# 中将引用作为参数传递给方法](https://stackoverflow.com/questions/1007596/how-to-pass-references-as-arguments-in-a-method-in-c)
> 
> 重复：[如何在 C# 的方法中将引用作为参数传递](https://stackoverflow.com/questions/1007596/how-to-pass-references-as-arguments-in-a-method-in-c)

如何将 C# 中的引用作为 c 之类的参数传递？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-18T12:42:00.193

[您可以在Jon Skeet 的网站](http://www.yoda.arachsys.com/csharp/parameters.html)上阅读有关参数传递的精彩文章。我鼓励你阅读整本书，它不是很长。它有很好的解释和例子。还有一个指向[该站点](http://rapidapplicationdevelopment.blogspot.com/2007/01/parameter-passing-in-c.html)的链接，该链接用一些图片将其分解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-18T12:40:33.847

您可以使用 ref 关键字或 out 关键字。

参考： http: [//msdn.microsoft.com/en-us/library/14akc2c7 (VS.71).aspx](http://msdn.microsoft.com/en-us/library/14akc2c7(VS.71).aspx)

出： http: [//msdn.microsoft.com/en-us/library/t3c3bfhx (VS.71).aspx](http://msdn.microsoft.com/en-us/library/t3c3bfhx(VS.71).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-18T12:54:12.993

这是一个例子：

```
void addition(int a, int b, out int result, ref int count)
{
  result = a + b;
  count ++;
}

void static main()
{
  int opCount = 0;  // need initialization
  int opResult;     // don't need initialization

  addition(5, 4, out opResult, ref opCount);
  Console.WriteLine("5 + 4 = {0}", opResult); // display "5 + 4 = 9"

  addition(2, 3, out opResult, ref opCount);
  Console.WriteLine("2 + 3 = {0}", opResult); // display "2 + 3 = 5"

  Console.WriteLine("Operation count : {0}", opCount); // display "Operation count : 2"
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T12:42:43.373

在 C# 中，您可以使用 ref 关键字通过引用传递参数，也可以使用 out 关键字将参数作为输出传递。

请参阅 MSDN 文档： [ref](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx) [out](http://msdn.microsoft.com/en-us/library/t3c3bfhx.aspx)

# asp.net - YUI 库和 asp.net 自动回发下拉列表的问题

> ID：1012426
> 
> 赞同：0
> 
> 时间：2009-06-18T12:40:08.823
> 
> 标签：asp.net, drop-down-menu, yui, autopostback

我们在我们的 asp.net 项目中使用 YUI 库。我有一个 asp.net autopostback 下拉列表，它被转换为 YUI 下拉列表，如下所示。现在，当用户从下拉列表中选择某个值时，页面会发回并且 SelectedGroupChanged 事件会触发，但在此之前不会出现确认对话框。我在这里做错了什么？

代码：

```
 <asp:Button id="Groups" Enabled="false" runat="server" />
<asp:DropDownList ID="groupsDropDownList" runat="server" AutoPostBack="true" OnSelectedIndexChanged="SelectedGroupChanged" />

<script language="javascript" type="text/javascript">

var YUIGroupsDrpDown;

<%if (Groups.Visible)

{ %>
    YUIGroupsDrpDown = new YAHOO.widget.Button("<%=Groups.ClientID %>",{type:"menu", menu: "<%=groupsDropDownList.ClientID %>"});
    YUIGroupsDrpDown.set("label", "<%=groupsDropDownList.SelectedItem.Text%>" );
    YUIGroupsDrpDown.getMenu().subscribe("click",onGroupsChange);
    YUIGroupsDrpDown.on("click", {fn: TakeActions, obj: 'M'});
<%} %>

function onGroupsChange()
{

   YUIGroupsDrpDown.set("label", YUIGroupsDrpDown.getMenu().activeItem.srcElement.text );

}

function TakeActions(event, action)

{
    var message = 'some message'
        if (window.confirm(strMsg) != 1)
            return false;
        else
            return true;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-22T12:16:01.953

最后我找到了答案。实际上，YUI 正在将自己的提交事件连接到自动回发下拉列表的表单。因此，如果用户选择取消他的操作，我们需要阻止这些 YUI 事件。所以要做到这一点，这是我从 YUI 的示例页面获得的代码：

```
var onExampleSubmit = function(p_oEvent) {

            var bSubmit = 
                    window.confirm("Are you sure you want to submit?")

            if(!bSubmit) {
                YAHOO.util.Event.preventDefault(p_oEvent);
            }

        };

        YAHOO.util.Event.on(pageForm, "submit", onExampleSubmit); 
```

希望这将帮助任何在 asp.net 中使用带有客户端确认消息的自动回发下拉列表的人。

# sql-server - 在 SQL Server 2005 中使用带有 GRANT 和 DENY 的变量

> ID：1012434
> 
> 赞同：4
> 
> 时间：2009-06-18T12:41:49.413
> 
> 标签：sql-server, sql-server-2005

在 SQL Server 2005 中，如何使用用户名变量来授予或拒绝对数据库对象的权限？我试过了：

```
DECLARE @username varchar(30)
SET @username = 'DOMAIN\UserName'
GRANT SELECT ON [mytable] TO @username
GRANT UPDATE([field one], [field two], [field three]) ON [mytable] TO @username 
```

我明白`Incorrect syntax near '@username'`了，所以我把它包裹在 [ 和 ]

```
GRANT SELECT ON [mytable] TO [@username] 
```

然而，这会导致`Cannot find the user '@username', because it does not exist or you do not have permission`. 我怎样才能做到这一点而不必为每个语句输入用户名？我想这样做以减少任何拼写错误的机会（这可能导致错误的用户获得权限设置）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-18T12:50:10.427

您需要动态 sql，如果您想查看将执行的内容，请将 EXEC 更改为 PRINT 添加 quotename 函数，因为您需要域用户周围的括号

```
 DECLARE @username varchar(30)
SET @username = 'DOMAIN\UserName'

SET @username = quotename(@username)

exec  ('GRANT SELECT ON [mytable] TO ' + @username )
exec ('GRANT UPDATE([field one], [field two], [field three]) ON [mytable] TO ' + @username ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T12:48:37.497

在这种情况下使用动态 SQL 会起作用吗？

```
DECLARE @sql VARCHAR(2000)
SET @sql = 'GRANT SELECT ON [mytable] TO ' + @username
EXEC @sql 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T12:54:01.947

更新[Yoopergeek](https://stackoverflow.com/users/121366/yoopergeek)的答案，你可以

```
DECLARE @sql VARCHAR(2000)
SET @sql = 'GRANT SELECT ON [mytable] TO [' + Replace(@username, '[', '\[') + ']' + Char(13) + Char(10)
SET @sql = 'GRANT UPDATE([field one], [field two], [field three]) ON [mytable] TO [' + Replace(@username, '[', '\[') + ']'
PRINT @sql
EXEC @sql 
```

# http - 在 HTTP 响应标头中使用 content-disposition

> ID：1012437
> 
> 赞同：130
> 
> 时间：2009-06-18T12:42:17.807
> 
> 标签：http, http-headers, httpwebresponse, httpresponse, content-disposition

我发现以下 asp.net 代码在从数据库提供文件时非常有用：

```
Response.AppendHeader("content-disposition", "attachment; filename=" + fileName); 
```

这使用户可以将文件保存到他们的计算机上，然后决定如何使用它，而不是浏览器尝试使用该文件。

使用 content-disposition 响应标头可以做哪些其他事情？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2009-06-18T12:49:15.733

请注意，[RFC 6266](https://www.rfc-editor.org/rfc/rfc6266)取代了下面引用的 RFC。[第 7 节](https://www.rfc-editor.org/rfc/rfc6266#section-7)概述了一些相关的安全问题。

content-disposition 标头的权威是[RFC 1806](http://www.ietf.org/rfc/rfc1806.txt)和[RFC 2183。](http://www.ietf.org/rfc/rfc2183.txt)人们还设计[了 content-disposition hacking。](http://www.gnucitizen.org/blog/content-disposition-hacking/)重要的是要注意 content-disposition 标头不是 HTTP 1.1 标准的一部分。

HTTP 1.1 标准 ( [RFC 2616](http://www.ietf.org/rfc/rfc2616.txt) ) 还提到了内容处置可能带来的安全副作用：

> 15.5 内容处置问题
> 
> RFC 1806 [35] 是 HTTP 中经常实现的 Content-Disposition
> （参见第 19.5.1 节）标头的来源，它有许多非常
> 严重的安全考虑。Content-Disposition 不是
> HTTP 标准的一部分，但由于它被广泛实施，我们正在
> 为实施者记录它的使用和风险。有关详细信息，请参阅 RFC 2183 [49]
> （更新 RFC 1806）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-06-18T12:45:16.397

好吧，似乎 Content-Disposition 标头最初是为电子邮件而不是 Web 创建的。（[链接到相关的 RFC](http://www.ietf.org/rfc/rfc2183.txt)。）

我猜网络浏览器可能会响应

```
Response.AppendHeader("content-disposition", "inline; filename=" + fileName); 
```

保存时，但我不确定。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-01T05:14:07.110

请参阅 RFC 6266（超文本传输​​协议 (HTTP) 中 Content-Disposition 标头字段的使用）[https://www.rfc-editor.org/rfc/rfc6266](https://www.rfc-editor.org/rfc/rfc6266)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-03-06T10:10:23.527

对于 asp.net 用户，.NET 框架提供了一个类来创建内容处置标头： [System.Net.Mime.ContentDisposition](http://msdn.microsoft.com/library/system.net.mime.contentdisposition%28v=vs.110%29.aspx)

基本用法：

```
var cd = new System.Net.Mime.ContentDisposition();
cd.FileName = "myFile.txt";
cd.ModificationDate = DateTime.UtcNow;
cd.Size = 100;
Response.AppendHeader("content-disposition", cd.ToString()); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-18T12:50:22.050

此标头在[RFC 2183](http://www.ietf.org/rfc/rfc2183.txt)中定义，因此这是开始阅读的最佳位置。

允许的值是在互联网号码分配机构 (IANA) 注册的值；他们[的价值观登记](http://www.iana.org/assignments/mail-cont-disp)应被视为最终来源。

# javascript - 防止多次触发jQuery中的单击事件

> ID：1012447
> 
> 赞同：9
> 
> 时间：2009-06-18T12:45:57.270
> 
> 标签：javascript, jquery

我创建了一个[jQuery 内容切换器](http://pmck.net/jq-switcher/)。一般来说，它工作得很好，但它有一个问题。如果您多次单击侧面的链接，有时会显示多条内容。

问题很可能出在点击事件的某个地方。这是代码：

```
$('#tab-list li a').click(
    function() {
        var targetTab = $(this).attr('href');
        if ($(targetTab).is(':hidden')) {
            $('#tab-list li').removeClass('selected');
            var targetTabLink = $(this).parents('li').eq(0);
            $(targetTabLink).addClass('selected');
            $('.tab:visible').fadeOut('slow',
                function() {
                    $(targetTab).fadeIn('slow');
                }
            );
        }
        return false;
    }
); 
```

我尝试在过渡中添加锁定，以便在过渡发生时忽略进一步的点击，但无济于事。我还尝试使用以下方法防止在某些东西已经动画时触发过渡：

```
if ($(':animated')) {
    // Don't do anything
}
else {
   // Do transition
} 
```

但它似乎总是认为事情正在被动画化。有什么想法可以防止动画被多次触发吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-18T12:58:00.537

一个想法是在函数开始时删除 click 事件，然后在动画完成时重新添加 click 事件，因此在持续时间期间的点击将无效。

如果您有能力在动画完成后执行代码，这应该可以工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-18T13:04:50.163

添加一个变量以用作锁而不是 is(:animating)。

单击时，检查是否设置了锁定。如果没有，设置锁，启动进程，然后在淡入完成时释放锁。

```
var blockAnimation = false;

$('#tab-list li a').click(
    function() {
        if(blockAnimation != true){
        blockAnimation = true;
        var targetTab = $(this).attr('href');
        if ($(targetTab).is(':hidden')) {
            $('#tab-list li').removeClass('selected');
            var targetTabLink = $(this).parents('li').eq(0);
            $(targetTabLink).addClass('selected');
            $('.tab:visible').fadeOut('slow',
                function() {
                    $(targetTab).fadeIn('slow', function(){ blockAnimation=false; });
                }
            );
        }
        }
        return false;
    }
); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-08-05T07:48:55.527

好吧，我就是这样做的，而且效果很好。

```
$(document).ready(function() {
    $(".clickitey").click(function () {
        if($("#mdpane:animated").length == 0) {
            $("#mdpane").slideToggle("slow"); 
            $(".jcrtarrow").toggleClass("arrow-open");
        }
    });
}); 
```

这不是你的代码所做的，当然这是我网站上的代码，但我只是想指出我是如何忽略动画期间发生的点击的。请让我知道这是否效率低下。谢谢你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T13:50:38.527

我早些时候玩弄了代码，并提出了以下似乎可行的修改：

```
$('#tab-list li a').click(
    function() {
        $('.tab:animated').stop(true, true);
        var targetTab = $(this).attr('href');
        if ($(targetTab).is(':hidden')) {
            $('#tab-list li').removeClass('selected');
            var targetTabLink = $(this).parents('li').eq(0);
            $(targetTabLink).addClass('selected');
            $('.tab:visible').fadeOut('slow',
                function() {
                    $(targetTab).fadeIn('slow');
                }
            );
        }
        return false;
    }
); 
```

所发生的一切是，当单击一个新选项卡时，它会立即将当前动画结束，然后开始新的过渡。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T13:03:31.523

一种方法是：

```
$('#tab-list ul li').one( 'click', loadPage );
var loadPage = function(event) {
    var $this = $(this);
    $global_just_clicked = $this;
    var urlToLoad = $this.attr('href');
    $('#content-area').load( urlToLoad, pageLoaded );
}
$global_just_clicked = null;
var pageLoaded() {
    $global_just_clicked.one( 'click', loadPage );
} 
```

如您所见，这种方法充满了缺点：在当前页面加载之前单击另一个选项卡会发生什么？如果请求被拒绝怎么办？如果是满月呢？

答案是：这个方法只是一个初步的演示。适当的实施将：

1.  不包含全局变量`$global_just_clicked`
2.  不依赖`.load()`。将使用`.ajax()`并处理请求取消、单击其他选项卡等。

注意：在大多数情况下，您不需要采取这种迂回的方法。我相信您可以通过多次单击同一选项卡不会影响最终结果的方式来修正您的代码。

jrh

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-14T07:15:33.673

一种方法是使用这样`timeStamp`的事件属性在多次点击之间间隔一段时间：

```
var a = $("a"),
    stopClick = 0;

a.on("click", function(e) {
  if(e.timeStamp - stopClick > 300) { // give 300ms gap between clicks
     // logic here

    stopClick = e.timeStamp; // new timestamp given
  }

}); 
```

# devexpress - 如何制作SplitterContainerControl DevExpress的不可移动Splitter？

> ID：1012449
> 
> 赞同：0
> 
> 时间：2009-06-18T12:46:29.123
> 
> 标签：devexpress, splitter

我一直在使用 DevExpress 的 SplitterContainerControl，但我没有找到使拆分器无法移动的方法。已经google了，没有找到相关的结果。有人知道这件事吗？请分享

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T12:49:08.183

呃......不会移动的分离器只是一个面板！

# jquery - jQuery thinbox : 从 iframe 页面内容的事件中关闭灯箱

> ID：1012451
> 
> 赞同：2
> 
> 时间：2009-06-18T12:47:15.330
> 
> 标签：jquery, thickbox

我已经在我的页面中实现了 jquery 厚框以在 light bix 中显示另一个页面内容。我使用厚框的 iFrame 模式来执行此操作。现在我在页面中有一个 asp.net 链接按钮，该按钮显示在灯箱。单击此链接（在内部页面中）时，我想从客户端关闭灯箱。我必须使用哪个功能？有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-18T12:55:11.477

用于关闭厚盒的方法是 tb_remove()

要从 iframe 内容调用它，您只需调用 iframe 父级的方法。

所以

```
parent.tb_remove() 
```

应该做的伎俩。

只需在您的链接上添加事件（嵌入似乎更简单）

```
<a href="#" onClick="javascript:window.parent.tb_remove()"> ... </a> 
```

# apache - 将与 Apache Tomcat 一起使用的 Lisp 方言吗？

> ID：1012455
> 
> 赞同：5
> 
> 时间：2009-06-18T12:48:24.207
> 
> 标签：apache, tomcat, clojure, lisp

是否有像 Apache Tomcat 这样的应用程序服务器可以与 Lisp 类似的 Web 语言一起使用？

最近我一直在使用 Arc/Anarki 和 Clojure。但我真正想念的是 Apache 的 mod_arc 或 mod_clojure 之类的东西。我真正怀念的是 Lispy 网络语言的良好 Apache 集成。

Arc 和 Clojure 都使用您在代码中启动的自己的内置网络服务器。我想要 Apache httpd 为我提供的所有功能、弹性和可扩展性。有人在为 Arc 或 Clojure 开发 Apache 模块吗？是否有另一种类似 Lisp 的语言可以与 Apache 一起使用？

我来自 PHP 和 Perl 的背景。但在 C 和 /bin/sh 方面也有很多经验。自从我开始编写 Web 应用程序以来，我一直在使用 cgi-bin 和 stdin 来编写 C 二进制文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-19T17:44:27.927

您可以设置在某个端口上运行的 Clojure/Java HTTP 服务器（Jetty 等），然后使用 Apache 的[mod_proxy](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html)将某些请求从 Apache 转发到该端口上的 Clojure。在你的 Apache 配置中是这样的：

```
 ProxyPass /static !
    ProxyPass /cgi-bin !
    ProxyPass / http://localhost:8080/
    ProxyPassReverse / http://localhost:8080/ 
```

因此，Apache 将在端口 8080 上将每个请求发送到您的 Clojure 应用程序，除了对`/static`和中的事物的请求`/cgi-bin`，Apache 将自行处理。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-18T14:18:02.170

也许[mod_lisp](http://www.fractalconcept.com/asp/DXOr/sdataQkvOnIhYS7rwDM==/sdataQuvY9x3g$ecX)会起作用？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-18T15:14:30.590

[Hunchentoot](http://weitz.de/hunchentoot/)是 Common Lisp 中的一个 Web 服务器，也可以通过 mod_lisp2 在 Apache 后面使用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-06-18T15:22:04.130

使用[Clojure](http://clojure.org/)和[Compojure](http://en.wikibooks.org/wiki/Compojure)，您可以生成可以部署在几乎任何 Java EE 网络服务器（Jetty、Tomcat 等）中的 WAR 档案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-18T14:24:05.807

Clojure 是一种 JVM 语言，因此您应该能够像任何其他 Java 应用程序一样设置它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-06-18T12:49:54.623

为什么不使用 CGI？

# python - 如何在python中将字符串与二进制值连接？

> ID：1012457
> 
> 赞同：4
> 
> 时间：2009-06-18T12:48:28.667
> 
> 标签：python, string, binary, concatenation

python中将字符串与二进制值连接的最简单方法是什么？

```
sep = 0x1
data = ["abc","def","ghi","jkl"] 
```

查找`"abc0x1def0x1ghi0x1jkl"`0x1 为二进制值而不是字符串“0x1”的结果数据。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-18T12:51:12.437

我认为

```
joined = '\x01'.join(data) 
```

应该这样做。`\x01`是值为 0x01 的字节的转义序列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-18T13:03:35.003

chr() 函数将具有将变量转换为具有您正在查找的二进制值的字符串的效果。

```
>>> sep = 0x1
>>> sepc = chr(sep)
>>> sepc
'\x01' 
```

然后可以使用 join() 函数将一系列字符串与您的二进制值作为分隔符。

```
>>> data = ['abc']*3
>>> data
['abc', 'abc', 'abc']
>>> sepc.join(data)
'abc\x01abc\x01abc' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-18T13:21:16.643

我知道这不是最好的方法，但是对于同一问题，在不同情况下可能有用的另一种方法是：

```
>>> x=(str(bin(0b110011000)))
>>> b=(str(bin(0b11111111111)))
>>> print(x+b)
0b1100110000b11111111111 
```

如果需要，要删除每个字符串的最左边两位（即 0b 填充），`[2:]`值为 2 的 slice 函数可以工作：

```
>>> x=(str(bin(0b110011000)[2:]))
>>> b=(str(bin(0b11111111111)[2:]))
>>> print(x+b)
11001100011111111111 
```

# sql - 基于集合的插入到具有 1 到 0-1 关系的两个表中

> ID：1012468
> 
> 赞同：1
> 
> 时间：2009-06-18T12:50:28.850
> 
> 标签：sql, sql-server-2008, insert, identity

我有两个表，第一个表的主键是一个身份，第二个表的主键不是，但是该键有一个外键约束回到第一个表的主键。

如果我一次插入一条记录，我可以使用 Scope_Identity 来获取刚刚插入到表 1 中的 pk 值，我想插入到第二个表中。

我的问题是我有很多来自我想在两个表中插入的选择的记录，我无法想到一种基于集合的方式来进行这些插入。

我目前的解决方案是使用游标，插入第一个表，使用 scope_identity 获取键，插入第二个表，重复。

我错过了非光标解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T13:00:26.570

是的，在在线图书中查找输出子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-19T07:49:16.643

本周我遇到了这个问题：有人在使用自然键的模式中引入了一个带有无意义代理键的表。毫无疑问我会很快解决这个问题:) 在那之前，我正在通过创建一个数据表来解决它`INSERT`：这可能是一个永久或临时基表或派生表（见下文），它应该适合你无论如何都渴望基于集合的解决方案。使用此表和带有`IDENTITY`自然键列的表之间的连接来找出自动生成的值。这是一个简短的例子：

```
CREATE TABLE Test1 
(
 surrogate_key INTEGER IDENTITY NOT NULL UNIQUE, 
 natural_key CHAR(10) NOT NULL CHECK (natural_key NOT LIKE '%[^0-9]%') UNIQUE
);

CREATE TABLE Test2
(
 surrogate_key INTEGER NOT NULL UNIQUE
    REFERENCES Test1 (surrogate_key), 
 data_col INTEGER NOT NULL
);

INSERT INTO Test1 (natural_key)
SELECT DT1.natural_key
  FROM (
        SELECT '0000000001', 22
        UNION ALL 
        SELECT '0000000002', 55
        UNION ALL 
        SELECT '0000000003', 99
       ) AS DT1 (natural_key, data_col);

INSERT INTO Test2 (surrogate_key, data_col)
SELECT T1.surrogate_key, DT1.natural_key
  FROM (
        SELECT '0000000001', 22
        UNION ALL 
        SELECT '0000000002', 55
        UNION ALL 
        SELECT '0000000003', 99
       ) AS DT1 (natural_key, data_col)
       INNER JOIN Test1 AS T1
          ON T1.natural_key = DT1.natural_key; 
```

# wpf - 如何从 XAML 获取 ObservableCollection 中的项目数？

> ID：1012471
> 
> 赞同：7
> 
> 时间：2009-06-18T12:50:54.043
> 
> 标签：wpf, xaml, observablecollection

我正在显示从 ComboBox 中的 ViewModel ObservableCollectoin 属性获得的所有客户，如下所示：

```
<ComboBox 
    ItemsSource="{Binding Customers}"
    ItemTemplate="{StaticResource CustomerComboBoxTemplate}"
    Margin="20"
    HorizontalAlignment="Left"
    SelectedItem="{Binding SelectedCustomer, Mode=TwoWay}"/> 
```

有没有办法在**不创建另一个 ViewModel 属性**的情况下获取 ObservableCollection 中的项目数，例如：

**伪代码：**

```
<TextBlock Text="{Binding Customers.Count()}"/> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-18T12:54:24.537

ObservableCollection 类型公开了一个您可以使用的 Count 属性。我不知道 ObservableCollection 是否会引发 PropertyChanged 事件以通知 UI 有关此属性的更新。

# sql - 具有共同数据的新记录

> ID：1012475
> 
> 赞同：2
> 
> 时间：2009-06-18T12:52:19.923
> 
> 标签：sql, mysql

我有一个这样的表（MySQL 5.0.x，MyISAM）：

```
user{id, login, ip, banned} (Banned: 0 false, 1 true) 
```

`banned=0`如果至少有 5 个具有相同 IP 的其他用户已被禁止 ( ) ，我想查找所有未被禁止的用户 ( `banned=1`)。

谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-18T12:55:34.207

如果您有很多被禁止的用户：

```
SELECT  *
FROM    user uo
WHERE   EXISTS (
        SELECT  1
        FROM    user ui
        WHERE   ui.ip = uo.ip
                AND banned = 1
        LIMIT 4, 1
        )
        AND banned = 0 
```

如果您的被禁用户很少：

```
SELECT  *
FROM    user
WHERE   ip IN (
        SELECT  ip
        FROM    user
        WHERE   banned = 1
        GROUP BY
                ip
        HAVING  COUNT(*) >= 5
        )
        AND banned = 0 
```

在这两种情况下，建立索引`(ip, banned)`将大大改善这些查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T12:58:31.767

```
SELECT id
FROM user
WHERE ip IN (
 SELECT DISTINCT ip
 FROM user
 WHERE COUNT(*) >= 5
  AND banned = 1
 GROUP BY ip
)
 AND banned = 0 
```

# javascript - Google Maps GDirections - 地图上两点之间的路线路线

> ID：1012476
> 
> 赞同：1
> 
> 时间：2009-06-18T12:52:24.120
> 
> 标签：javascript, api, google-maps

这看起来应该有效吗？我想生成从一个纬度/经度到另一个纬度/经度的方向。

```
var dirMap = new GMap2($("#dirMap").get(0));
var wp = new Array(2);
wp[0] = new GLatLng(35.742149,139.337218);
wp[1] = new GLatLng(35.735347,139.328485);

var marker = new GMarker(wp[1]);
dirMap.addOverlay(marker);
dirMap.setCenter(wp[0], 12);
dirMap.setUIToDefault();

// load directions
directions = new GDirections(dirMap);
directions.load("from: Waypoint1@21.742149,100.337218 to: Waypoint2@15.740815,100.3267"); 
```

**地图加载正常**，但*方向不进来*。我也试过这样：

```
var dirMap = new GMap2($("#dirMap").get(0));
var wp = new Array(2);
wp[0] = new GLatLng(32.742149,119.337218);
wp[1] = new GLatLng(32.735347,119.328485);

var marker = new GMarker(wp[1]);
dirMap.addOverlay(marker);
dirMap.setCenter(wp[0], 12);
dirMap.setUIToDefault();

// load directions
directions = new GDirections(dirMap);
directions.loadFromWaypoints(wp); 
```

同样的事情......地图，但没有方向。非常感谢您的任何帮助，在此先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T13:34:30.773

乍一看你的代码我看不到任何明显的东西，所以我的第一个猜测是返回**GDirections**请求失败（我还假设你已经检查了 javascript 错误日志中是否有任何错误，如果你还没有这样做）。

我建议您为您的 GDirections 对象添加一个错误处理程序，这将为您提供一些指示您的请求发生了什么：

```
GEvent.addListener(directions, "error", handleErrors); 
```

并在 handleErrors 回调中查看：

```
directions.getStatus().code 
```

与[地理状态代码](http://code.google.com/apis/maps/documentation/reference.html#GGeoStatusCode.G_GEO_SUCCESS)进行比较。

编辑：好的，我刚刚在这里试用了[您的代码](http://www.cannonade.net/geo4.js)，它[运行良好](http://www.cannonade.net/geo.php?test=geo4)。我只能假设您的页面上存在导致问题的其他问题。您可以在问题中发布链接以便我们查看吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T13:53:39.003

检查我在[Google Maps API Reference](http://code.google.com/apis/maps/documentation/reference.html#GGeoStatusCode.G_GEO_UNKNOWN_DIRECTIONS)中尝试时得到的状态 (604)说：

> GDirections 对象无法计算查询中提到的点之间的方向。这通常是因为两点之间没有可用的路线，或者因为我们没有该地区的路线数据。

这是我使用的代码（稍作修改）：

```
$(function ()
{
    if (GBrowserIsCompatible())
    {
        var wp = [new GLatLng(35.742149,139.337218), new GLatLng(35.735347,139.328485)];

        var map = new GMap2(document.getElementById('map-canvas'));
        map.setCenter(wp[0], 12);
        map.setUIToDefault();

        var marker = new GMarker(wp[1]);
        map.addOverlay(marker);

        var directions = new GDirections(map);
        GEvent.addListener(
            directions,
            'error',
            function ()
            {
                console.log(directions.getStatus().code);
            }
        );
        directions.load('from: Waypoint1@21.742149,100.337218 to: Waypoint2@15.740815,100.3267');
    }
}); 
```

# wpf - WPF、MVVM 和菜单前景色

> ID：1012479
> 
> 赞同：0
> 
> 时间：2009-06-18T12:53:18.113
> 
> 标签：wpf, mvvm, menu, foreground

我是 WPF 和 MVVM 的新手。我已经寻找了一种在 MVVM 部分中动态创建菜单的好方法，但我没有找到任何我喜欢的东西，所以我推出了自己的解决方案。它可以工作，但由于某种原因，菜单的前景（文本）颜色有时（只是有时）不正确。

我为下面的图片添加了一个链接。

~~[http://img220.imageshack.us/img220/1912/badmenu.jpg](http://img220.imageshack.us/img220/1912/badmenu.jpg)~~（死链接）

我的最低子菜单以白色前景正确显示，但其父菜单前景变为黑色，几乎无法阅读。如果我对菜单进行了硬编码，那么父级的前景色将为白色。如果我将鼠标移到父级上，它的文本将切换回白色，子菜单将变为黑色。

此外，一旦我将鼠标从父级移开，它的所有布尔属性都`IsHighlighted, IsSubmenuOpen, etc...`变为错误，这让我感到惊讶，因为我认为它们应该保持真实。最终结果是我无法用样式触发器解决这个问题。

这是我的 XAML 。

```
<Window.Resources>
  <DataTemplate DataType="{x:Type src:ParentMenu}" >
    <Menu >
      <MenuItem Header="{Binding MenuName}" ItemsSource="{Binding ChildMenuItems}" />
    </Menu>
  </DataTemplate>

  <HierarchicalDataTemplate DataType="{x:Type src:ChildMenu}" 
                          ItemsSource="{Binding ChildMenuItems}" >
    <MenuItem Header="{Binding MenuName}" Command="{Binding Path=Command}" />
  </HierarchicalDataTemplate> 
```

' StackOverflow 为 Window.Resources 屏蔽了我的结束标记

```
<DockPanel>
   <Menu DockPanel.Dock="Top" ItemsSource="{Binding Menus}" />

  <Grid>
       <!-- Add additional content here -->
  </Grid>
</DockPanel> 
```

两者都`ParentMenu`继承自一个公共类，该类实际上包含所有菜单并通过集合`ChildMenu`公开子菜单。是一个对象列表。我公开了一个对象列表。`ChildMenuItems``ChildMenuItems``ChildMenu``ViewModels``ParentMenu`

可能有更好的方法可以在这里完成我想要的。这是一个例子：

~~img132.imageshack.us/img132/4160/bettermenu.jpg~~（死链接）

关于我做错了什么和/或如何解决显示问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T18:32:16.657

问题是您的 VM 会自动包装在 MenuItems 中，因此您基本上将 MenuItems 嵌套为 MenuItems 的 Header。

您可以通过使用 MenuItem 作为 DataType 定义一个样式（并通过 ItemContainerStyle 指向它）来解决此问题，该样式将 DataBinds 到您的 VM（名称到 Header、DelegateCommands 到 Command 等）。

下面是您可以执行此操作的一个示例。请注意，我已经放弃了 HierarchicalDataTemplate 以支持 ItemContainerStyle。我还冒昧地为您的 MainViewModel 定义了一个 DataTemplate，因为它不是很清楚它是如何绑定数据的。

```
<Window.Resources>
    <DataTemplate DataType="{x:Type src:MainViewModel}">
        <ItemsControl ItemsSource="{Binding Menus}"></ItemsControl>
    </DataTemplate>
    <DataTemplate DataType="{x:Type src:ParentMenu}" >
        <Menu>
            <MenuItem Header="{Binding Name}" 
        ItemsSource="{Binding ChildMenuItems}" ItemContainerStyle="{DynamicResource ChildMenuItemStyle}" />
        </Menu>
    </DataTemplate>
    <Style x:Key="ChildMenuItemStyle" TargetType="MenuItem">
        <Setter Property="Header" Value="{Binding Name}"></Setter>
        <Setter Property="ItemsSource" Value="{Binding ChildMenuItems}"></Setter>
    </Style>
</Window.Resources> 
```

为简单起见，我还删除了一些 Command 绑定，但您可以根据需要将其重新添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T14:21:26.467

根据要求，这是我的 ViewModel。

ViewModelBase 是工作室创建的标准模型。MainVieModel 有足够的内容来创建我用来试验的测试菜单。

基本上，我正在努力创建一个父/子菜单类，我可以将其与我们出售给广大客户的一系列应用程序一起使用。我希望让每个客户都可以根据他们的需求以及他们为哪些模块购买许可证而拥有可定制的菜单集合。

```
public abstract class ViewModelBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;

        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

公共类 MainViewModel : ViewModelBase

{

```
 public MainViewModel()  {   MakeMenus();    }

    private void MakeMenus()
    {
        // Makes some dummy menus to test with.
        Menus = new ObservableCollection<MyMenuItem>();
        ParentMenu parent;
        ChildMenu child;

        parent = new ParentMenu("First Level");
        Menus.Add(parent);
        child = new ChildMenu(parent, "second level");
        parent.ChildMenuItems.Add(child);
        ChildMenu child2 = new ChildMenu(child, "third level");
        child2.MenuCommand = new DelegateCommand(CommandTest,
                                                   CommandCanExecute_First);
        child.ChildMenuItems.Add(child2);

        child = new ChildMenu(parent, "second level 2");
        parent.ChildMenuItems.Add(child);
        child2 = new ChildMenu(child, "third level 2");
        child2.MenuCommand = new DelegateCommand(CommandTest, 
                                       CommandCanExecute_Second);
        child.ChildMenuItems.Add(child2);

        parent = new ParentMenu("Another First");
        parent.ChildMenuItems.Add(new ChildMenu(parent, "Another Second"));
        Menus.Add(parent);
        OnPropertyChanged("Menus");
    }

    private bool ExecuteToggle { get; set; }
    private void CommandTest()  {   ExecuteToggle = !ExecuteToggle; } 
    public ObservableCollection<MyMenuItem> Menus  {  get; private set;}
    public bool CommandCanExecute_First()   {   return ExecuteToggle;   }
    public bool CommandCanExecute_Second() { return !ExecuteToggle;     }
} 
```

# linux - 运行ls -l时，为什么目录上的文件大小与du的输出不匹配？

> ID：1012488
> 
> 赞同：3
> 
> 时间：2009-06-18T12:55:35.160
> 
> 标签：linux, filesystems

输出中的 4096 是什么意思`ls -l`？

```
[root@file nutch-0.9]# du -csh resume.new/
2.3G    resume.new/
[root@file nutch-0.9]# ls -l 
total 55132
drwxr-xr-x  7 root root     4096 Jun 18 03:19 resume.new 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-18T12:56:44.563

该目录占用了 4096 字节的磁盘空间（不包括其内容）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-18T13:01:31.543

我也一直在想。所以，经过搜索，我遇到了：

> “这是存储有关文件的元数据（包括该目录中包含的文件名）所需的大小。给定时间的文件/子目录的数量可能不会直接映射到报告的大小，因为一旦分配，空间如果文件数量发生变化，则不会被释放。这种行为对于大多数用例（磁盘空间很便宜，一旦目录中有很多文件，将来可能会再次拥有它们）是有意义的，并且有助于减少碎片化。”

参考：[http ://www.linuxquestions.org/questions/showthread.php?p=2978839#post2978839](http://www.linuxquestions.org/questions/showthread.php?p=2978839#post2978839)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-22T17:17:09.603

在您的示例中，4096 是目录本身使用的字节数。换句话说，这是存储目录中包含的项目列表所需的空间。正如问题标题所暗示的那样，它**不是**目录中存储的所有项目的空间总和。

你没有说你正在使用什么系统，但是在许多 UNIX/Linux 文件系统中，存储分配的最小单位是 4K，这就是为什么大小显示为 4096。两个项目的目录条目，加上“。 " 和“..”，应该占用更少的空间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-21T14:16:17.983

目录就像具有 <name, inode> 元组的文件一样，由文件系统特殊处理。ls 报告的大小就是这个“文件”的大小。[查看 Server Fault 中的这个答案，](https://serverfault.com/questions/27394/list-of-actions-that-change-a-directories-modification-time/27402#27402)了解目录是如何在后台运行的。

因此，4096 字节很可能意味着文件系统块大小为 4096，并且该目录当前使用单个块来存储此名称和 inode 表。

# python - Bash 或 Python 倒退？

> ID：1012490
> 
> 赞同：6
> 
> 时间：2009-06-18T12:56:09.807
> 
> 标签：python, bash

我有一个文本文件，其中有很多随机出现的字符串@STRING_A，我有兴趣编写一个仅删除其中一些的简短脚本。特别是扫描文件并找到以该字符串开头的行时，例如

```
@STRING_A 
```

然后检查 3 行向后是否有另一行以相同的字符串开头，例如

```
@STRING_A

@STRING_A 
```

如果发生，则向后删除 3 行。我在考虑 bash，但我不知道如何“倒退”它。所以我确信这对于 bash 是不可能的。我也考虑过python，但是我应该将所有信息存储在内存中以便倒退，然后，对于长文件，这将是不可行的。

你怎么看？是否可以在bash或python中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-19T01:10:30.550

有趣的是，经过这么多小时之后，还没有人按照实际措辞给出问题的解决方案（正如@John Machin 在评论中指出的那样）——只删除前导标记（如果后面跟着另一个这样的标记 3 行以下），而不是全部包含它的行。当然，这并不难——这是@truppo 有趣的解决方案所需的一个小模块，例如：

```
from itertools import izip, chain
f = "foo.txt"
for third, line in izip(chain("   ", open(f)), open(f)):
    if third.startswith("@STRING_A") and line.startswith("@STRING_A"):
        line = line[len("@STRING_A"):]
    print line, 
```

当然，在现实生活中，人们会使用 an`iterator.tee`而不是读取文件两次，将这段代码放在一个函数中，而不是无休止地重复标记常量，&c;-)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T13:07:59.360

当然 Python 也可以。只需将最后三行存储在一个数组中，然后检查数组中的第一个元素是否与您当前读取的值相同。然后删除该值并打印出当前数组。然后，您将移动您的元素以为新值腾出空间并重复。当然，当数组被填充时，您必须确保继续将值移出数组并放入新读取的值，每次都停下来检查数组中的第一个值是否与您的值匹配目前正在阅读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-18T22:53:20.297

这是一个更有趣的解决方案，使用两个具有三元素偏移量的迭代器:)

```
from itertools import izip, chain, tee
f1, f2 = tee(open("foo.txt"))
for third, line in izip(chain("   ", f1), f2):
    if not (third.startswith("@STRING_A") and line.startswith("@STRING_A")):
        print line, 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T13:03:05.067

为什么在 bash 中不可能？您不需要将整个文件保存在内存中，只需最后三行（如果我理解正确的话），并编写适合标准输出的内容。将其重定向到一个临时文件中，检查一切是否按预期工作，然后用临时文件覆盖源文件。

Python 也是如此。

我会提供自己的脚本，但不会经过测试。;-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-18T13:33:09.047

此代码将扫描文件，并删除以标记开头的行。默认情况下，它只在内存中保留三行：

```
from collections import deque

def delete(fp, marker, gap=3):
    """Delete lines from *fp* if they with *marker* and are followed
    by another line starting with *marker* *gap* lines after.
    """
    buf = deque()
    for line in fp:
        if len(buf) < gap:
            buf.append(line)
        else:
            old = buf.popleft()
            if not (line.startswith(marker) and old.startswith(marker)):
                yield old
            buf.append(line)
    for line in buf:
        yield line 
```

我已经通过以下方式对其进行了测试：

```
>>> from StringIO import StringIO
>>> fp = StringIO('''a
... b
... xxx 1
... c
... xxx 2
... d
... e
... xxx 3
... f
... g
... h
... xxx 4
... i''')
>>> print ''.join(delete(fp, 'xxx'))
a
b
xxx 1
c
d
e
xxx 3
f
g
h
xxx 4
i 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-18T14:57:11.950

正如 AlbertoPL 所说，将行存储在 fifo 中以备后用——不要“倒退”。为此，我肯定会在 bash+sed/awk/whatever 上使用 python。

我花了一些时间来编写这段代码：

```
from collections import deque
line_fifo = deque()
for line in open("test"):
    line_fifo.append(line)
    if len(line_fifo) == 4:
        # "look 3 lines backward"                                               
        if line_fifo[0] == line_fifo[-1] == "@STRING_A\n":
            # get rid of that match
            line_fifo.popleft()
        else:
            # print out the top of the fifo
            print line_fifo.popleft(),
# don't forget to print out the fifo when the file ends
for line in line_fifo: print line, 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-19T10:23:05.677

这个“答案”是给 lyrae 的……我会修改我之前的评论：如果针在文件的前 3 行，您的脚本将导致 IndexError 或访问不应访问的行，有时会产生有趣的副作用。

导致 IndexError 的脚本示例：

```
>>> lines = "@string line 0\nblah blah\n".splitlines(True)
>>> needle = "@string "
>>> for i,line in enumerate(lines):
...     if line.startswith(needle) and lines[i-3].startswith(needle):
...         lines[i-3] = lines[i-3].replace(needle, "")
...
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
IndexError: list index out of range 
```

这个例子不仅说明了地球是圆的，而且还说明了为什么你对“不要删除整条线”问题的“修复”应该使用`.replace(needle, "", 1)`或`[len(needle):]`代替`.replace(needle, "")`

```
>>> lines = "NEEDLE x NEEDLE y\nnoddle\nnuddle\n".splitlines(True)
>>> needle = "NEEDLE"
>>> # Expected result: no change to the file
... for i,line in enumerate(lines):
...     if line.startswith(needle) and lines[i-3].startswith(needle):
...         lines[i-3] = lines[i-3].replace(needle, "")
...
>>> print ''.join(lines)
 x  y   <<<=== whoops!
noddle
nuddle
        <<<=== still got unwanted newline in here
>>> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-18T22:23:33.447

我的 awk-fu 从来没有那么好......但以下内容可能会以 bash-shell/shell-utility 形式为您提供您正在寻找的内容：

```
sed `awk 'BEGIN{ORS=";"}
/@STRING_A/ {
  if(LAST!="" && LAST+3 >= NR) print LAST "d"
  LAST = NR
}' test_file` test_file 
```

基本上...... awk 正在为 sed 生成一个命令来删除某些行。我确信有一种相对简单的方法可以让 awk 完成所有处理，但这似乎确实有效。

不好的部分？它确实读取了 test_file 两次。

好的部分？它是一个 bash/shell 实用程序实现。

编辑：Alex Martelli 指出上面的示例文件可能让我感到困惑。（我上面的代码删除了整行，而不仅仅是 @STRING_A 标志）

这很容易通过将命令调整为 sed 来解决：

```
sed `awk 'BEGIN{ORS=";"}
/@STRING_A/ {
  if(LAST!="" && LAST+3 >= NR) print LAST "s/@STRING_A//"
  LAST = NR
}' test_file` test_file 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-06-18T13:01:17.300

在 bash 中，您可以使用`sort -r filename`and`tail -n filename`向后读取文件。

```
$LINES=`tail -n filename | sort -r`
# now iterate through the lines and do your checking 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-06-19T02:37:20.283

这可能是您正在寻找的？

```
lines = open('sample.txt').readlines()

needle = "@string "

for i,line in enumerate(lines):
    if line.startswith(needle) and lines[i-3].startswith(needle):
        lines[i-3] = lines[i-3].replace(needle, "")
print ''.join(lines) 
```

这输出：

```
string 0 extra text
string 1 extra text
string 2 extra text
string 3 extra text
--replaced --  4 extra text
string 5 extra text
string 6 extra text
@string 7 extra text
string 8 extra text
string 9 extra text
string 10 extra text 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2009-06-18T14:27:17.017

我会考虑使用 sed。gnu sed 支持定义行范围。如果 sed 失败，那么还有另一种野兽 - awk，我相信你可以用 awk 做到这一点。

好的，我觉得我应该把我的 awk POC。我无法弄清楚使用 sed 地址。我还没有尝试过 awk+sed 的组合，但在我看来这太过分了。

我的 awk 脚本的工作原理如下：

*   它读取行并将它们存储到 3 行缓冲区中

*   一旦找到所需的模式（在我的情况下是 /^data.*/），就会查找 3 行缓冲区以检查是否在三行前看到了所需的模式

*   如果已看到图案，则划出 3 条线

老实说，我可能也会选择 python，因为 awk 真的很尴尬。AWK 代码如下：

```
函数最大值（a，b）
{
    如果 (a > b)
        返回一个；
    别的
        返回 b;
}

开始 {
    w = 0; #写索引
    r = 0; #读取索引
    缓冲区 [0, 1, 2]; ＃缓冲

}

结尾 {
    # 刷新缓冲区
    # 从读取索引开始并打印到 w 索引
    for (k = r % 3; kr - max(r - 3, 0); k--) {
        #在 3 行历史记录 buf 中搜索
        if (match(buf[k % 3], /^data.*/) != 0) {
            # found -> 从历史记录中删除行
            # 通过重写它们 -> 调整写入索引
            w -= 最大值（r，3）；
        }
    }
    buf[w % 3] = $0;
    w++;
}

/^.*/ {
    # 将行存储到缓冲区中，如果是历史记录
    # 已满，打印出最旧的。
    如果 (w > 2) {
        打印缓冲区 [r % 3];
        r++;
        buf[w % 3] = $0;
    }
    别的 {
        buf[w] = $0;
    }
    w++;
}

```

# sql-server-2005 - 如何使用配置文件设置 SSIS Http 连接管理器凭据？

> ID：1012494
> 
> 赞同：1
> 
> 时间：2009-06-18T12:57:01.943
> 
> 标签：sql-server-2005, ssis

在 SSIS 包中，我有一个使用 Http 连接管理器的 Web 服务任务。我需要为连接设置凭据，以便它使用远程 Web 服务进行身份验证。我可以在设计时设置这些，但是我希望使用 XML 包配置文件将这些凭据提供给包。

问题是连接的凭据没有出现在可以配置的属性中。我已经尝试以编程方式设置它，但我似乎也无法以这种方式访问​​凭据：

```
Dim webConnMgr As ConnectionManager = Dts.Connections("My web service")
Dim webConn As Wrapper.ConnectionManagerHttpClass = _
    CType(webConnMgr.InnerObject, Wrapper.ConnectionManagerHttpClass)
webConn.? 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-23T20:07:54.587

SQL 2005 ConnectionManagerHttpClass 的成员属性非常有限。值得庆幸的是，它已在 SQL 2008 中得到解决 :)

[MSDN - SQL 2005 ConnectionManagerHttpClass 属性。](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.wrapper.connectionmanagerhttpclass_properties(SQL.90).aspx)

**VS。**

[MSDN - SQL 2008 ConnectionManagerHttpClass 属性。](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.wrapper.connectionmanagerhttpclass_properties.aspx)

根据[这个 MSDN 链接](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.wrapper.connectionmanagerhttpclass(SQL.90).aspx)，公共类 [ConnectionManagerHttpClass] 实现了 IDTSConnectionManager90、ConnectionManagerHttp。

由于我们假设您使用的是 SQL 2005（根据您的 Stackoverflow 标签），您可能还需要查看[MSDN 上的 IDTSConnectionManager90.ConnectionString 属性](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.wrapper.idtsconnectionmanager90.connectionstring(SQL.90).aspx)。

另请查看[MSDN 上的 ConnectionManagerHttpClass.ConnectionString 属性](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.wrapper.connectionmanagerhttpclass.connectionstring(SQL.90).aspx)，它实现了 IDTSConnectionManager90.ConnectionString 并且是可覆盖的。

这应该为您指明正确的方向。愿闹剧与你同在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T20:26:06.990

Sounds like you need to assign the values in the configuration file to a variable in your package. You can then access the variable from your script task (Dts.Variables("VariableName").Value.ToString if I remember rightly!).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-19T09:24:51.770

我发现无法使用配置文件或以编程方式指定凭据，但解决方法是简单地将所有凭据（在设计器中设置）保存在包中，然后为每个不同的配置提供包的不同副本. 这是通过将包的 ProtectionLevel 设置为例如 EncryptSensitiveWithPassword 来完成的。

这显然不理想。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-10T05:15:49.197

这可以通过将保护级别设置为 EncryptSensitiveWithPassword 来完成，并使用解密选项运行 ssis

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-26T14:00:34.930

SQL2008 SSIS 正确地公开了这些属性；不幸的是，2005 年是我必须工作的环境。我通过开发一个允许设置属性的自定义组件解决了这个问题。

# javascript - 如何调用 javascript 函数并从 XAML/Silverlight 传递值？

> ID：1012498
> 
> 赞同：1
> 
> 时间：2009-06-18T12:57:41.317
> 
> 标签：javascript, silverlight, xaml, syntax, function

我在没有 Visual Studio 的情况下创建 silverlight。我只有原始的 html、XAML 和 js (javascript)。

我想要做的是将值从 XAML 传递到 javascript。我可以从 XAML 调用和激活 javascript 函数。见下文。canvas 元素有一个鼠标左键向上事件，该事件在 javascript 中调用 LandOnSpace。

但是我怎么称呼 ShowMsg 呢？或者更准确地说，我将如何将值传递给该调用？通常在javascript中你可以去： ShowMsg(500, 700, "you owe us money");

但是当我在 xaml 代码中尝试时，它会破坏一些东西。我相信它抱怨javascript函数不存在。

```
 <Canvas x:Name="btnLandOnSpace" Background="LightGreen" MouseLeftButtonUp="LandOnSpace"
            Cursor="Hand" Canvas.Top ="0"  Width="70" Height="50"> 
            <TextBlock Text="LandOnSpace"  />
            </Canvas> 
```

```
function LandOnSpace(sender, e) {  //on server
if (!ShipAnimateActive && !blnWaitingOnServer) {
    blnWaitingOnServer = true;
    RunServerFunction("/sqgame/getJSLLandOnSpace");
        ShowWaitingBox();
        };
else {
    alert('Waiting on server.');
};
}

function ShowMsg(SintCost, SintRent , SstrChoiceText) { 
blnPayChoice = true;    
intCost = SintCost;     
intRent = SintRent;     
strChoiceText = SstrChoiceText;   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-19T18:13:28.367

如果您想从 Silverlight 2.0 调用 javascript 函数，您可以在 System.Windows.Browser 命名空间中使用 HtmlPage。

```
var param = new object[] {"some parameter"};
HtmlPage.Window.Invoke("myfunc",param); 
```

但是，根据您上面的示例，您似乎使用的是 Silverlight 1.0，其中您的事件处理程序是在 Javascript 中而不是在 C# 或 VB 中。

您可以迁移到 Silverlight 2.0。您用于服务器页面的服务器不会阻止您使用 Silverlight 2.0（或 3.0）。您可以在 Google App Engine 上完美运行 Silverlight 2.0 应用程序。

要开始在 2.0 中开发，请在此处下载 Silverlight 2 工具：http: [//www.microsoft.com/downloadS/details.aspx? familyid=C22D6A7B-546F-4407-8EF6-D60C8EE221ED&displaylang=en](http://www.microsoft.com/downloadS/details.aspx?familyid=C22D6A7B-546F-4407-8EF6-D60C8EE221ED&displaylang=en)

有关如何在 Silverlight 托管代码和浏览器内的 Javascript 之间进行通信的一些参考，您可以查看此页面：http: [//msdn.microsoft.com/en-us/library/cc645076 (VS.95).aspx](http://msdn.microsoft.com/en-us/library/cc645076(VS.95).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T15:15:46.170

正确的方法是使用默认参数触发 js 处理程序。然后，从 Javascript 中，使用 Silverlight 1.0 模型导航到 XAML。请参阅[Silverlight 1.0 文档](http://msdn.microsoft.com/en-us/library/cc903928(VS.95).aspx)。请参阅 FindName 方法。

# ftp - 使用 FTPS.exe (MoveIT Freely) 抑制或忽略不受信任的证书？

> ID：1012502
> 
> 赞同：0
> 
> 时间：2009-06-18T12:58:50.457
> 
> 标签：ftp, automation, certificate, sftp, ftps

我最近使用的一个 FTP 帐户开始需要安全的 FTP 连接，这破坏了我过去使用“标准”FTP 库上传到它的脚本。我编写了一个小批处理文件，它将通过 FTPS.exe (MoveIT Freely) 上传这两个文件，但我会弹出一个对话框，要求我单击是。

通常这不会是一个问题，但我在一个约 10 分钟长的脚本的末尾调用批处理文件，该脚本解析、组合和编码多个 CSV 文件（通常是无人值守的）。随着这个对话框的弹出，我必须密切关注它......我试图让它达到我可以将它作为计划任务运行并忘记它的地步。

除非您也是付费软件客户，否则似乎对这个免费软件没有太多支持，所以我想知道是否有其他人遇到过这个问题并且知道忽略错误的标志（或解决方法，或另一个免费的安全 FTP解决方案）。错误如下（服务器名称已更改）。

```
MOVEit Freely

---------------------------
Non trusted certificate
---------------------------
The certificate's CN name does not match the passed value.

Certificate issued to: funftp501

Certificate issued by: Standalone007

Do you want to proceed with the connection?
---------------------------
Yes   No   
--------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-11T15:28:15.083

如果您确定在您的脚本中使用了正确的服务器名称（意思是：颁发证书的确切名称），那么您可以尝试使用参数“-natpasv”。

您还可以使用“-z”跳过警告...

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-06-21T03:00:42.217

我参与了 MOVEit Freely 的创建。您可能还想尝试像这样运行客户端：

FTP - ？

...to dump the short help. But "JW" is right. The "-z to not warn about problems with certificates" option was what we created to avoid this exact situation. As long as the certificate isn't expired (I don't think we let that one go), the "-z" argument will eat all other errors.

# c# - 深度嵌套的视觉树中的拖放装饰器

> ID：1012503
> 
> 赞同：0
> 
> 时间：2009-06-18T12:58:57.133
> 
> 标签：c#, wpf, drag-and-drop, nested, adorner

我们有一个 WPF 应用程序，它在画布上具有自定义窗口，而该画布又包含自定义控件（包含自定义窗口的主画布再次是自定义控件显示内容）。所以基本上视觉树看起来像这样（没有隐含的边框和其他东西）：

```
- Windows
  - Canvas
    - WindowMgr
      - CustomWindow (maximized with z-index 0, functioning as background)
        - ScrollPresenter
          - CustomControl1
      - CustomWindow
        - ScrollPresenter
          - CustomControl2 
```

现在我们需要从这些自定义控件相互拖放（通常是从可移动窗口到背景窗口）。要显示拖放装饰器，需要一个装饰元素和一个装饰层。通常示例使用它们的网格或项目控件，并且还从同一元素获取装饰层。

在这里做同样的事情是行不通的，因为 ScrollPreseneter/CustomWindows 剪辑了它们的内容，这会阻止你拖出窗口。现在，我们沿着可视化树向上走，直到找到根画布并将其用作装饰元素，但这似乎有点脏（而且正如我们所经历的那样，它不是很健壮）。

有关于此的强大解决方案的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-08T17:43:29.483

如果我正确阅读了您的问题，并且由于您自己没有提及，您可能正在寻找[`AdornerDecorator Class`](http://msdn.microsoft.com/en-us/library/system.windows.documents.adornerdecorator.aspx)，*它为可视树中其下方的元素提供了一个装饰层*。

假设它的名称`ScrollPresenter`源自[`ContentPresenter`](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter.aspx)，值得注意的是，为了实现高级自定义控件，您可能希望将它们用 包围`ContentPresenter`，`AdornerDecorator`就像这样[`Window Class`](http://msdn.microsoft.com/en-us/library/system.windows.window.aspx)做一样，请参见例如[不要忘记 AdornerDecorator](http://blog.pixelingene.com/2006/11/dont-forget-the-adornerdecorator/)以获得一个不错的实际工作场景，也涉及拖放.

也就是说，通过[`AdornerDecorator`](http://msdn.microsoft.com/en-us/library/system.windows.documents.adornerdecorator.aspx)您将确保所需[`AdornerLayer`](http://msdn.microsoft.com/en-us/library/system.windows.documents.adornerlayer.aspx)的内容包含在您的自定义控件中，因此无需通过在可视化树上向上检索它来在其他地方检索它，例如：

```
 <ControlTemplate TargetType="{x:Type CustomWindow}">
     <Border ...>
         <Grid>
             <AdornerDecorator>
                 <ScrollPresenter ... />
             </AdornerDecorator>
         </Grid>
     </Border>
 </ControlTemplate> 
```

根据您的特定场景，您可能需要`AdornerDecorator`自定义窗口、自定义控件或两者兼而有之。

有关装饰器架构的更多详细信息，请参阅[装饰器概述](http://msdn.microsoft.com/en-us/library/ms743737.aspx)。

# sql - 使用 PostgreSQL 的多边形点的 SQL 查询

> ID：1012504
> 
> 赞同：12
> 
> 时间：2009-06-18T12:59:09.177
> 
> 标签：sql, postgresql, gis, rdbms, postgis

我有以下简单的表格：

```
CREATE TABLE tbl_test
(
  id serial NOT NULL,
  poly polygon NOT NULL
)
WITH (OIDS=FALSE); 
```

然后我尝试用多边形插入一行：

```
insert into tbl_test values(1, PolyFromText('POLYGON((0 0, 10 10, 10 0, 0 0))')) 
```

并遇到此错误：

> 列“poly”属于多边形类型，但表达式属于几何类型

这是蹩脚的。所以我的第一个问题是：

1.  我真的必须投吗？

无论如何，铸造后它可以工作。现在我正在尝试做一个简单的 ST_Contains 查询：

```
select id, poly from tbl_test where ST_Contains(poly, Point(GeomFromText('POINT(9 2)'))) 
```

这给出了错误：

```
ERROR:  function st_contains(polygon, point) does not exist
LINE 1: select id, poly from tbl_test where ST_Contains(poly, Point(...
                                            ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts. 
```

我应该做些什么？

以下作品：

```
select st_contains(st_geomfromtext('POLYGON((0 0, 10 10, 10 0, 0 0))'), st_geomfromtext('POINT(0 0)')) 
```

但这可能是因为这两个参数都是几何类型的。针对表数据的实际查询不起作用。

**回答：**

多伊！问题是我创建的数据库不是基于postgis模板数据库（因此没有相关的功能和几何列表等）。最后，我可以说一下，PostGIS 要求您向数据库添加数百个函数、行和几个表的方式只是为了让您获得 GIS 支持，这完全是蹩脚的。它使模式的备份变得更加复杂并且非常容易出错（如果您忽略调用 AddGeometryColumn 而只是自己添加一个几何列，那么天堂是禁止的）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-19T00:31:46.480

多边形是 PostGIS 构建在其之上的基本 Postgres 类型。您可以使用 PostGIS 功能启用几何列`select AddGeometryColumn(...)`。否则，您将使用直多边形：

```
=> create table gt (id int, space polygon);
=> insert into gt values (1, '((2,2),(3,4),(3,6),(1,1))');
INSERT 0 1
=> select point(space) from gt where id = 1;
    point    
-------------
 (2.25,3.25)
(1 row) 
```

这是多边形的中心点

```
=> select circle(space) from gt where id = 1;
             circle             
--------------------------------
 <(2.25,3.25),1.93994028704315>
(1 row) 
```

这是多边形的最小边界圆，表示为 Postgres`circle`类型。所有几何运算符都记录[在这里：http://www.postgresql.org/docs/8.3/interactive/functions-geometry.html](http://www.postgresql.org/docs/8.3/interactive/functions-geometry.html) 基础多边形没有任何投影数据、SRID 等，所以如果它与 PostGIS 一起使用它可能只是默认为预设并且很幸运。但当然，在很多情况下，您只需要亚地理空间尺度上的几何图形。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-18T13:39:59.890

好的，奇怪的是，我发现以下更简单的语法有效：

```
insert into tbl_test (poly) values ('(0,0),(0,10),(10, 10), (0, 0)')

select * from tbl_test where poly @> '(2, 8)' 
```

但我正在努力找出这些函数和运算符集之间的区别。这种较短的语法（实际上并不符合 OpenGIS）是否利用了相同的空间索引等？

# asp.net - 如何在 ASP.NET 中制作手风琴控件？

> ID：1012507
> 
> 赞同：0
> 
> 时间：2009-06-18T13:00:10.517
> 
> 标签：asp.net, accordion

如何在 ASP.NET 中找到或制作手风琴控件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-18T13:06:28.990

[http://www.asp.net/AJAX/AjaxControlToolkit/Samples/Accordion/Accordion.aspx](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/Accordion/Accordion.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-18T13:13:57.103

我更喜欢使用[jQuery UI 中的一个](http://jqueryui.com/demos/accordion/)。为什么你需要重新发明轮子？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-01T18:53:57.377

这里描述得很好 [http://www.dotnetcurry.com/ShowArticle.aspx?ID=215&AspxAutoDetectCookieSupport=1](http://www.dotnetcurry.com/ShowArticle.aspx?ID=215&AspxAutoDetectCookieSupport=1)

# xml - 使用 Web 界面配置服务

> ID：1012509
> 
> 赞同：0
> 
> 时间：2009-06-18T13:00:30.670
> 
> 标签：xml, web-applications, configuration

我有以下场景。我创建了一个作为服务运行的服务器组件。现在我想构建一些配置用户界面。

我在我的 nvidia 防火墙上看到他们正在运行一个 apache 实例，并在我的网络浏览器中提供了一个功能齐全的用户界面。

如果我想做这样的事情，什么技术可以开始？可以使用 Corba 或 COM 访问服务器。

我开始考虑设计某种向浏览器发送一些 xml 的方式，让它将 xml 转换为 xform，取回表单并进行配置。

是否有某种框架可以完成这些简单的工作？要用什么零件？（java、php、apache、xslt、xml）

* * *

我发现[wt](http://www.webtoolkit.eu/wt)看起来很安静可用于这种工作。还有其他这种类型的库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-20T15:07:13.340

我认为我的问题的答案是：

寻找类似的东西：

*   网络工具包
*   网络框架
*   cgi
*   快速cgi
*   谷歌网络工具包
*   ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-30T18:21:44.530

您可能会看一下客户端 XForms 引擎。这是一个：

[https://community.emc.com/community/edn/xmltech](https://community.emc.com/community/edn/xmltech)

# java - 我可以将参数（延迟绑定属性）传递给 GWT 编译器吗？

> ID：1012513
> 
> 赞同：11
> 
> 时间：2009-06-18T13:01:30.733
> 
> 标签：java, gwt, gwt-compiler

使用 GWT 编译器，是否可以将属性设置为 GWT 编译器的参数？我知道您可以传入某些已定义的参数，例如 -war 和 -style，但这是用于传入属性值，例如“user.agents”或“locale”。

从我可以看到的文档中，只能在模块描述符中使用属性来设置属性。但我希望能够从我的构建脚本外部控制这些属性。

我尝试查找有关 com.google.gwt.dev.Compile 支持哪些参数的文档，但该类似乎没有任何参考文档。文档中的操作方法很长，但细节却很短。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-18T15:20:17.877

答案是不！

我在提交者新闻组中问了完全相同的问题，目前没有任何可用的信息。

他们正在考虑增加对提供额外 .gwt.xml 的支持以在外部覆盖/配置事物。这将涵盖我想做的事情，但是如果您真的想要在编译时对属性进行通用访问，那么恐怕这是不可能的。

也许你应该创建一个功能请求......让我知道我也会开始它，因为从编译器命令行操作打开/关闭某些东西会非常有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-18T13:14:50.923

它确实需要争论。我写的 ant 构建文件中的一个示例：

```
<target name="compile.gwt" depends="compile">
    <java failonerror="true" classname="com.google.gwt.dev.Compiler" fork="true">
        <arg value="-war" />
        <arg value="${webcontent.dir}" />
        <arg value="-style" />
        <arg value="obfuscated" />
        <arg value="${module.name}" />
        <jvmarg value="-Xmx256m" />
        <jvmarg value="-Xss64M" />
        <classpath>
            <path refid="project.class.path" />
            <pathelement path="${gwt.home}/gwt-dev-windows.jar" />
        </classpath>
    </java>
</target> 
```

我认为这涵盖了所有标志：

[调试和编译 - Google Web Toolkit - Google Code](http://code.google.com/webtoolkit/doc/1.6/FAQ_DebuggingAndCompiling.html)

至于你是否通过用户代理，我没看过，但我也没看过。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-02-09T13:12:33.433

如果生成器是自定义类，那么您始终可以将 -Dname=value 参数传递给 java 命令并使用 System.getProperty("name") 访问它们。即使生成器是罐装的，也许您可​​以通过包装传递给超类的 GeneratorContext 并替换其 PropertyOracle 来将其子类化并注入/覆盖属性。

# tsql - T-sql 日期前星期一

> ID：1012516
> 
> 赞同：7
> 
> 时间：2009-06-18T13:01:48.140
> 
> 标签：tsql

我在一所大学工作，我们的学生管理系统学年开始日期由 8 月 1 日或之前的星期一确定。我需要在我的查询中匹配这个，有没有办法在这个日期或之前轻松获取星期一的日期。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2011-05-19T21:48:59.787

接受的答案对我不起作用，因为我在同一个查询中需要星期天和星期一。这适用于不同的“日期优先”设置：

```
SELECT DATEADD(d, -((DATEPART(WEEKDAY, '20110515') - DATEPART(dw, '19000101') + 7) % 7), '20110515') 
```

“DATEPART(dw, '19000101')” 将确定您的“日期优先”设置，因为 1900-01-01 是星期一。如果您想要一个基于星期二的星期，您可以将 19000101 更改为 19000102。

顺便说一句，“20110515”是唯一适用于所有 SQL Server 文化设置的日期格式。像“2011-05-06”这样的日期在某些国家会被误解。（感谢 Itzik Ben-Gan 指出这一点）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-18T13:11:19.527

```
set datefirst 1; -- Make Monday the first day of the week

select dateadd(dd, -1*(datepart(dw, '2009-08-01')-1), '2009-08-01') 
```

返回 2009 年 7 月 27 日，即 8 月 1 日或之前的星期一。当 8 月 1 日为星期一时，将其更改为 2005，查询将返回 08-01

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T13:07:30.097

您可以使用 datepart 来获取工作日，然后做一些数学运算以回到您的星期一。此示例使用美国默认的 datefirst 7（其中星期一是一周的第 2 天）。将要添加的天数调整为您所在地区的星期一是一周中的哪一天。

```
select dateadd(dd, -datepart(dw, '2009-08-01') + 2, '2009-08-01') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T13:19:47.340

很老套

```
DECLARE @weekday int

SELECT @weekday = DATEPART(WEEKDAY, '1-Aug-2009')

SELECT CASE
 WHEN @weekday = 1 THEN '1-Aug-2009' ELSE DATEADD ( dd,(@weekday-2)*-1, '1-Aug-2009') 
 END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T13:29:51.017

这是一个通用算法，将返回任意月份的第一个星期一 (@inputdate)：

```
DATEADD(wk, DATEDIFF(wk, 0, dateadd(dd, 6 - datepart(day, @inputDate), @inputDate)), 0) 
```

这是在 SQL Server 中获取每月第一个星期一的常用方法。此[链接](http://www.databasejournal.com/features/mssql/article.php/3076421/Examples-of-how-to-Calculate-Different-SQL-Server-Dates.htm)解释了上述计算如何与许多其他日期计算一起工作。

**以下是如何使用上述算法在一个月的第一天或之前获取星期一：**

```
-- Set month to get Monday before or at 1st of month.
DECLARE @inputDate DATETIME
SET @inputDate = '2009-08-01'

-- Get first Monday of month.
DECLARE @firstMonday DATETIME
SET @firstMonday = DATEADD(wk, DATEDIFF(wk, 0, dateadd(dd, 6 - datepart(day, @inputDate), @inputDate)), 0)

-- Determine date for first Monday on or before 1st of month.
DECLARE @startDate DATETIME
SET @startDate = @firstMonday
IF @firstMonday > @inputDate
    SET @startDate = DATEADD(wk, -1, @firstMonday)

SELECT @startDate 
```

# c# - 防止 KeyDown 事件处理到下一个表单

> ID：1012517
> 
> 赞同：0
> 
> 时间：2009-06-18T13:02:30.510
> 
> 标签：c#, keydown

嗨，我在 C# 应用程序中有一个表单。在这个表单上，我捕获了一个 KeyDown 事件 Alt+U，它将打开第二个表单。在第二种形式中，我有一个带有快捷键 Alt+U 的 toolStripButton（与我用来打开表单的相同），它可以打印文档。现在，我的问题是当我打开第二个表单时，它会自动触发单击工具条按钮的事件，因为它与我用来打开表单的快捷键相同。我怎样才能防止这种情况发生。

问候约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T13:11:34.690

这并不能回答您的问题，但您确实应该考虑为这两个非常不同的操作制作两个不同的快捷键。拥有两个相同的快捷键来执行两个完全不同的操作是非常令人困惑的 IMO。

不过，要回答您的问题，我会在第二种形式上拥有一些属性，例如“ShouldRaise”之类的，并且仅在该标志为真时才在第二种形式中引发 Alt + U 事件。最初将其设置为 false，但随后在第一个表单中的 KeyUp 中将其设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T14:19:07.847

将一个人的快捷方式更改为其他人不是更容易吗？我同意 BFree 的观点，它不是最好的设计，对于 2 个完全不同的功能具有相同的快捷方式。所有快捷键/加速键都应该是唯一的。

为什么不将表单页面的快捷方式更改为：

Ctrl+Right（转到下一页） Ctrl+Left（转到上一页）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T14:38:28.167

在第二种形式中，您实际上有 ToolStripMenuItem 吗？（ToolStripButton 没有 ShortcutKeys 属性）。

当用户在父表单上按 Alt-U 时，您是否实例化一个新表单？

您是否检查了打印文档的处理程序上的发件人对象以查看它是否是父表单？

似乎无法重现您的问题；稍微解释一下会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T14:41:20.373

另一个简单的解决方案是从事件侦听器中检查您所处的形式。您可以在第二个表单内的事件处理程序中返回。

同样不是最优雅的解决方案，但应该是一个不错的解决方案。

# c# - 如何在仅在基中实现的继承类中调用成员

> ID：1012519
> 
> 赞同：0
> 
> 时间：2009-06-18T13:03:00.697
> 
> 标签：c#, inheritance

场景是我正在更改“请求”的状态，有时新状态是暂时的，需要立即更改为另一个状态。所以我在我的基类WorkflowCommandBase中的一个方法中：

```
 public virtual Request Execute()
    {
        ChangeRequestStatus();
        QueueEmails();
        TrackRequestStatus();
        return ExecuteAutoTransitionStatus(GetTransitionStatus());
    } 
```

最后一行尝试为新的状态（从继承的类，calledType）再次执行该方法，但是我调用的方法在 calledType 中不存在，它是在基中实现的。有可能做到这一点吗？或者当这种情况存在时，我是否需要重写继承类中的 Execute 方法？

```
private Request ExecuteAutoTransitionStatus(string commandName)
{
    if (String.IsNullOrEmpty(commandName))
    {
        return Request;
    }

    Type calledType = Type.GetType(commandName);
    return (Request)calledType.InvokeMember(
           "Execute",
           BindingFlags.InvokeMethod
                | BindingFlags.Public | BindingFlags.Instance,
           null,
           null,
           new Object[]
               {Request, TarsUser, GrantRepository, TrackingRepository});
    } 
```

如果有帮助，这是类图的一部分。

[![类图](../Images/146e63c916317cdd7afc28ac6e577bfd.png)](https://i.stack.imgur.com/Mb1RT.png) .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T13:36:15.560

好吧，根据您的评论，您在问题中所写的内容和您正在尝试做的事情可能不连续。所以我会尝试覆盖所有的基础。

如果 Execute 方法是静态的并且定义在基类上，则需要将 BindingFlags.FlattenHierarchy 添加到绑定标志中：

```
 BindingFlags.InvokeMethod | BindingFlags.Public
 | BindingFlags.Static | BindingFlags.FlatternHierarchy 
```

这似乎是最有可能出现的问题，因为您说它没有找到该方法，但是此标志仅在您搜索静态成员时才有效。

另一方面，如果该方法*不是*静态的，那么您拥有的绑定标志是正确的，但是您需要一个该类型的实例来运行它。根据构造具体类型的复杂程度，您可能只需使用[Activator](http://msdn.microsoft.com/en-us/library/system.activator.aspx)类就可以逃脱，否则您可能需要创建某种类型的工厂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T16:38:11.880

@Martin：感谢您的帮助。

我发布这个以防它可能对其他人有帮助。

```
 private Request ExecuteAutoTransition(Type newStatus)
    {
        // No transition needed
        if (newStatus == null)
        {
            return Request;
        }

        // Create an instance of the type
        object o = Activator.CreateInstance(
            newStatus, // type
            new Object[] // constructor parameters
                {
                    Request,
                    TarsUser,
                    GrantRepository,
                    TrackingRepository
                });

        // Execute status change
        return (Request) newStatus.InvokeMember(
                             "Execute", // method
                             BindingFlags.Public 
                                | BindingFlags.Instance 
                                | BindingFlags.InvokeMethod, // binding flags
                             Type.DefaultBinder, // binder
                             o, // type
                             null); // method parameters
    } 
```

# sql-server - 如何学习高级ms sql server？

> ID：1012521
> 
> 赞同：-1
> 
> 时间：2009-06-18T13:03:09.590
> 
> 标签：sql-server, architecture, profiling

我有很强的数据库背景，但对 ms sql server 的实践经验很少。
我想学习工具、架构、分析和调优。
除了浏览一些零碎的信息外，我实际上还在寻找更大的指南。书籍、培训、系列文章等。
您建议我如何开始？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-18T13:19:51.880

最好的学习方式是参加新闻组和论坛。一开始你可以潜伏，但尝试获取信息......一段时间后你会注意到你知道回答一些问题......开始参与

买一些好的 sql server 书籍，如果你买不起书，看看[Good SQL Articles To Read If You Can't Afford Books](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/good-sql-articles-to-read-if-you-can-t-a)这里有一些非常好的东西

查看所有可用的 SQL Server[白皮书](http://www.microsoft.com/sqlserver/2008/en/us/white-papers.aspx)

收听 sql 播客[sqldownunder](http://www.sqldownunder.com/PreviousShows/tabid/98/Default.aspx)有 43 个

在 twitter 上关注 sql 人并查看他们链接到的内容，可以在此处找到在 twitter 上关注的人的列表[sql 目录](http://sqlserverpedia.com/wiki/Twitter#Twitter_Directory)

我还采访了一些 SQL Server 传奇人物，比如 Ken Henderson、Kalen Delaney 等等，你可以在这里找到一个列表：[我对 SQL 传奇人物进行的所有采访](http://denisgobo.blogspot.com/2008/12/all-interviews-i-did-with-sql-legends.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-18T13:06:20.597

书籍和培训只是一方面。

实际工作是值得的。如果您可以接近具有实时数据库的生产环境，并且可以访问愿意将您带到他/她的羽翼下的 DBA，请充分利用这个机会

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-18T13:25:43.867

我使用 Adam Machanic 的 Expert SQL Server 2005 Development。在线教程也很棒。尤其是有视频的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T13:08:18.567

当我第一次开始使用 MSSQL 时，我发现 Wrox“专业”系列中的 SQL2000 书是一个很好的起点，如果他们有更新版本，可能值得你寻找。其他一切我都拿起了 frmo 官方文档，其他网站，只是踢东西看看他们做了什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-18T13:16:09.783

开始看书。有很多作者努力把基础写得很清楚，然后如果你觉得还不够，互联网是最好的，而且有丰富的材料。

# ruby-on-rails - 为什么都是autoload，load_all！并要求所有在active_support.rb 中使用？

> ID：1012523
> 
> 赞同：10
> 
> 时间：2009-06-18T13:03:17.607
> 
> 标签：ruby-on-rails, ruby, autoload, activesupport

我正在寻找`active_support.rb`尝试了解它使用的加载过程。它使用三种加载方法`load_all!`：`autoload`和`require`。为什么在同一个文件中使用三种不同的加载方式？

```
module ActiveSupport
  def self.load_all!
    [Dependencies, Deprecation, Gzip, MessageVerifier, Multibyte, SecureRandom, TimeWithZone]
  end

  autoload :BacktraceCleaner, 'active_support/backtrace_cleaner'
  autoload :Base64, 'active_support/base64'
  autoload :BasicObject, 'active_support/basic_object'
  autoload :BufferedLogger, 'active_support/buffered_logger'
  autoload :Cache, 'active_support/cache'
  autoload :Callbacks, 'active_support/callbacks'
  autoload :Deprecation, 'active_support/deprecation'
  autoload :Duration, 'active_support/duration'
  autoload :Gzip, 'active_support/gzip'
  autoload :Inflector, 'active_support/inflector'
  autoload :Memoizable, 'active_support/memoizable'
  autoload :MessageEncryptor, 'active_support/message_encryptor'
  autoload :MessageVerifier, 'active_support/message_verifier'
  autoload :Multibyte, 'active_support/multibyte'
  autoload :OptionMerger, 'active_support/option_merger'
  autoload :OrderedHash, 'active_support/ordered_hash'
  autoload :OrderedOptions, 'active_support/ordered_options'
  autoload :Rescuable, 'active_support/rescuable'
  autoload :SecureRandom, 'active_support/secure_random'
  autoload :StringInquirer, 'active_support/string_inquirer'
  autoload :TimeWithZone, 'active_support/time_with_zone'
  autoload :TimeZone, 'active_support/values/time_zone'
  autoload :XmlMini, 'active_support/xml_mini'
end

require 'active_support/vendor'
require 'active_support/core_ext'
require 'active_support/dependencies'
require 'active_support/json'

I18n.load_path << "#{File.dirname(__FILE__)}/active_support/locale/en.yml" 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-06-18T16:32:28.793

我不知道为什么 Rails 使用三种不同的加载方法（实际上是两种 - 见下文）。但我知道，总的来说，为什么有人会。

`Require`意思是“立即加载”。`autoload`意思是“当你需要使用它时加载它”。使用两者的通常原因是您有一些文件，您几乎认为这些文件将在每个程序调用中使用；和其他可选的。例如，在没有使用过时方法的 Rails 应用程序中，您永远不需要`Deprecation`; 那么为什么要通过加载该文件来减慢初始设置呢？

在其他情况下，您可能会区分程序执行早期需要的文件和可以等待的文件。例如，`Gzip`在第一个请求到来之前您可能不需要。因此，通过使用自动加载，您可以减少初始设置的一些时间，但代价是第一个请求会稍微变慢。

您可能会问，为什么不只`autoload`用于所有内容？为什么在绝对需要之前加载*任何东西？*一个原因是自动加载仅适用于常量。因此，例如，`active_support/core_ext`向 Numeric 添加一堆方法，这样您就可以编写类似`3.days`、`6.minutes`和`16.seconds.ago`. 中没有常量`3.days`，因此您无法在该表达式上触发自动加载。（而且你不能 autoload `Numeric`，因为基类已经被加载了——它只是你想要添加的扩展。）

最后，这个类实际上并没有使用三种加载方法；它使用两个，并提供一个（某种）。`load_all!`被`Rails::Initializer`用来

> ```
> # Preload all frameworks specified by the Configuration#frameworks.
> # Used by Passenger to ensure everything's loaded before forking and
> # to avoid autoload race conditions in JRuby. 
> ```

我不知道细节，也不知道为什么要预加载这些特定模块（而不是其他模块）。但由于这是为了支持特定环境，您可以看到为什么它可能需要与默认加载机制分开的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T16:33:29.340

`autoload`ruby 方法可用于将常量与将在您第一次引用该常量时加载的文件名相关联。这使您不必在启动时加载整个框架。

看起来该`load_all!`方法是从 rails 调用的`initializer.rb`，用于预加载所有配置为预加载的框架。这通过调用每个框架`load_all!`方法来工作，该方法只是引用一个常量数组......这将触发自动加载。

根据`initializer.rb`评论`preload_frameworks`...

```
# Preload all frameworks specified by the Configuration#frameworks.
# Used by Passenger to ensure everything's loaded before forking and
# to avoid autoload race conditions in JRuby. 
```

这`require`是为特定框架加载核心所需的文件。

# grails - Grails：为现有数据库构建应用程序。如何生成合适的域类

> ID：1012527
> 
> 赞同：2
> 
> 时间：2009-06-18T13:03:50.853
> 
> 标签：grails, firebird, firebird1.5

我有一个旧的 Firebird 数据库，里面有很多内容。有没有一种简单的方法可以在不为 Grails 应用程序从数据库重写表的情况下获取该数据库的内容？

一个例子会很好。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T13:20:11.177

看看[GRAG](http://grag.sourceforge.net)。

从他们的主页：

> 您可以使用 Grails 应用程序生成器 (GRAG) 通过现有数据库开始使用 Grails。它将生成 Grails 域对象，包括约束和关系。生成域对象后，您可以继续使用 Grails 的全部功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-19T14:02:21.553

GRAG 是一个非常好的工具..但它不适合 Firebird 数据库。

好吧，我只是重建我的表格，一切正常。我认为这是保持它干净整洁的最佳解决方案。

感谢您的阅读。

# c - 编译关于函数是否可用的不同代码

> ID：1012530
> 
> 赞同：5
> 
> 时间：2009-06-18T13:04:30.740
> 
> 标签：c, macros, c-preprocessor, conditional-compilation

Windows 仅提供直到 Windows Vista 的 GetTickCount，并且从该操作系统开始还提供 GetTickCount64。如何通过调用不同的函数来编译**C程序？**

如何让**C**编译器检查是否在包含的头文件中声明了一个函数，并根据该特定函数是否可用来编译代码的不同部分？

```
#if ??????????????????????????????
unsigned long long get_tick_count(void) { return GetTickCount64(); }
#else
unsigned long long get_tick_count(void) { return GetTickCount(); }
#endif 
```

寻找工作示例文件而不仅仅是提示。

**编辑：**我在（64 位）Windows 7 RC 上使用 MinGW 的 gcc 3.4.5 尝试了以下操作，但没有帮助。如果这是 MinGW 问题，我该如何解决这个问题？

```
#include <windows.h>
#if (WINVER >= 0x0600)
unsigned long long get_tick_count(void) { return 600/*GetTickCount64()*/; }
#else
unsigned long long get_tick_count(void) { return 0/*GetTickCount()*/; }
#endif 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-18T22:55:24.803

基于目标 Windows 版本的 API 的编译时间选择会将构建的可执行文件锁定到该版本和更高版本。这是开源、*nix 目标项目的常用技术，假设用户将为他的平台配置源工具包并编译干净以进行安装。

在 Windows 上，这不是常用的技术，因为假设最终用户将拥有编译器通常是不安全的，更不用说要处理构建项目的复杂性了。

通常，仅使用所有版本的 Windows 中都存在的旧 API 就足够了。这也很简单：您只需忽略新 API 的存在。

如果这还不够，您可以使用[`LoadLibrary()`](http://msdn.microsoft.com/en-us/library/ms684175(VS.85).aspx)and[`GetProcAddress()`](http://msdn.microsoft.com/en-us/library/ms683212(VS.85).aspx)尝试在运行时解析新符号。如果无法解决，则回退到旧 API。

这是一个可能的实现。它检测到第一次调用，并尝试加载库并解析名称`"GetTickCount64"`。在所有调用中，如果指向已解析符号的指针不为空，则调用它并返回结果。否则，它会退回到旧 API，将其返回值转换为匹配包装器的类型。

```
unsigned long long get_tick_count(void) {
    static int first = 1;
    static ULONGLONG WINAPI (*pGetTickCount64)(void);

    if (first) {
        HMODULE hlib = LoadLibraryA("KERNEL32.DLL");
        pGetTickCount64 = GetProcAddressA(hlib, "GetTickCount64");
        first = 0;
    }
    if (pGetTickCount64)
        return pGetTickCount64();
    return (unsigned long long)GetTickCount();
} 
```

请注意，我使用了 ...A 风格的 API 函数，因为已知库名称和符号名称只会是 ASCII...如果使用此技术从可能位于文件夹中的已安装 DLL 加载符号用非 ASCII 字符命名，那么您将需要担心使用 Unicode 构建。

这是未经测试的，您的里程会有所不同，等等......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-18T13:11:12.397

[您可以使用Windows 标头中的预处理器定义](http://msdn.microsoft.com/en-us/library/aa383745.aspx)来实现它。

```
unsigned long long
get_tick_count(void)
{
#if WINVER >= 0x0600
    return GetTickCount64();
#else
    return GetTickCount();
#endif
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-18T13:30:40.830

处理此类问题的正确方法是检查该功能是否可用，但这在项目编译期间无法可靠地完成。您应该添加一个配置阶段，其详细信息取决于您的构建工具，cmake 和 scons，两个跨平台构建工具，提供设施。基本上，它是这样的：

```
/* config.h */
#define HAVE_GETTICKSCOUNT64_FUNC 
```

然后在您的项目中，您执行以下操作：

```
#include "config.h"

#ifdef HAVE_GETTICKSCOUNT64_FUNC
....
#else
...
#endif 
```

尽管它看起来与显而易见的方式相似，但从长远来看，它更易于维护。特别是，您应该尽可能避免依赖版本，而是检查功能。检查版本很快会导致复杂的交错条件，而使用上述技术，一切都由一个 config.h 控制，希望是自动生成的。

在 scons 和 cmake 中，它们会自动运行测试以检查函数是否可用，并根据检查在 config.h 中定义变量。基本思想是**将功能检测/设置与您的代码分离**。

请注意，这可以处理您需要构建在不同平台上运行的二进制文件的情况（比如在 XP 上运行，即使是在 Vista 上构建的）。只需更改 config.h 即可。如果做得好，那只是改变 config.h 的问题（你可以有一个脚本在任何平台上生成 config.h，然后为 windows xp、Vista 等收集 config.h ......）。我认为它根本不是unix特有的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T13:09:01.013

天，

您需要寻找的不是 NTDDI_VERSION 吗？

**更新：**您想检查 WINVER 是否为 0x0600。如果是，那么您正在运行 Vista。

**编辑：**对于语义啄木鸟头，我的意思是在 Vista 环境中运行编译器。该问题仅指编译，该问题仅指仅在编译时使用的头文件。大多数人都明白，您打算在 Vista 环境中进行编译。该问题未提及运行时行为。

除非有人正在运行 Vista，并且可能为 Windows XP 编译？

嘘！

高温高压

干杯，

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-18T13:12:25.047

你问的是C，但问题也被标记为C++......

在 C++ 中，您将使用 SFINAE 技术，请参阅类似问题：

[是否可以编写模板来检查函数的存在？](https://stackoverflow.com/questions/257288/possible-for-c-template-to-check-for-a-functions-existence)

但在提供时使用 Windows 中的预处理器指令。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-18T14:17:50.703

以前的答案指出检查特定情况下将出现的特定#define。无论函数是否可用，此答案适用于编译不同代码的更一般情况。

与其尝试在 C 文件本身中做所有事情，不如说这是配置脚本真正发挥作用的事情。如果您在 linux 上运行，我会毫不犹豫地向您指出[GNU Autotools 。](http://sources.redhat.com/autobook/ "GNU 自动工具")我知道有可用于 Windows 的端口，至少如果您使用的是 Cygwin 或 MSYS，但我不知道它们的效果如何。

如果您有 sh 方便（我没有方便的 Windows 设置来测试它），一个简单（而且非常难看）的脚本可能看起来像这样：

```
#!/bin/sh

# First, create a .c file that tests for the existance of GetTickCount64()

cat >conftest.c <<_CONFEOF
#include <windows.h>
int main() {
    GetTickCount64();
    return 0;
}
_CONFEOF

# Then, try to actually compile the above .c file

gcc conftest.c -o conftest.out

# Check gcc's return value to determine if it worked.
#   If it returns 0, compilation worked so set CONF_HASGETTICKCOUNT64
#   If it doesn't return 0, there was an error, so probably no GetTickCount64()

if [ $? -eq 0 ]
then
    confdefs='-D CONF_HASGETTICKCOUNT64=1'
fi

# Now get rid of the temporary files we made.

rm conftest.c
rm conftest.out

# And compile your real program, passing CONF_HASGETTICKCOUNT64 if it exists.

gcc $confdefs yourfile.c 
```

这应该很容易翻译成您选择的脚本语言。如果您的程序需要额外的包含路径、编译器标志或其他任何东西，请确保将必要的标志添加到测试编译和实际编译中。

'yourfile.c' 看起来像这样：

```
#include <windows.h>

unsigned long long get_tick_count(void) {
#ifdef CONF_HASGETTICKCOUNT64
  return GetTickCount64();
#else
  return GetTickCount();
#endif
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-18T14:45:47.980

如果您的代码要在 Vista 之前的操作系统上运行，您不能只将调用编译为 GetTickCount64()，因为在 XP 机器上不存在 GetTickCount64()。

您需要在运行时确定您正在运行哪个操作系统，然后调用正确的函数。一般来说，这两个调用都需要在代码中。

现在，如果您真的不需要在 Vista+ 机器上调用 GetTickCount64() 和在 XP- 机器上调用 GetTickCount()，那么在您的情况下这可能不是真的。无论您在什么操作系统上运行，您都可以只调用 GetTickCount()。文档中没有迹象表明我看到他们正在从 API 中删除 GetTickCount()。

我还要指出，也许 GetTickCount() 根本不适合使用。文档说它返回毫秒数，但实际上该函数的精度甚至不接近 1 毫秒。取决于机器（并且在运行时无法知道 AFAIK），精度可能是 40 毫秒甚至更多。如果您需要 1 毫秒的精度，您应该使用[QueryPerformanceCounter()](http://msdn.microsoft.com/en-us/library/ms644904.aspx)。事实上，在所有使用 GetTickCount() 的情况下，确实没有不使用 QPC 的实际理由。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-18T13:10:56.983

Microsoft 编译器在为 64 位机器编译时会定义 _WIN64。

[http://msdn.microsoft.com/en-us/library/b0084kay%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/b0084kay%28VS.80%29.aspx)

```
#if defined(_WIN64)
unsigned long long get_tick_count(void) { return GetTickCount64(); }
#else
unsigned long long get_tick_count(void) { return GetTickCount(); }
#endif 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-18T19:13:35.310

如果你必须支持 pre-Vista，我会坚持只使用 GetTickCount()。否则，您必须实现运行时代码来检查 Windows 版本，并在 Windows 的 Vista 及更高版本上调用 GetTickCount() 和 GetTickCount64()。由于它们返回不同大小的值（ULONGLONG v DWORD），您还需要单独处理它们返回的内容。仅使用 GetTickCount()（并检查溢出）将适用于这两种情况，而在可用时使用 GetTickCount64() 会增加您的代码复杂性并使您必须编写的代码量加倍。

坚持只使用 GetTickCount() 直到您可以确定您的应用程序不再需要在 Vista 之前的机器上运行。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-10-25T17:01:43.423

也许它是 GetTickCount() 的一个很好的替代品

```
double __stdcall
thetimer (int value)
{
    static double freq = 0;
    static LARGE_INTEGER first;
    static LARGE_INTEGER second;

    if (0 == value)
        {
            if (freq == 0)
            {
                QueryPerformanceFrequency (&first);
                freq = (double) first.QuadPart;
            }
            QueryPerformanceCounter (&first);
            return 0;
        }
    if (1 == value)
        {
            QueryPerformanceCounter (&second);
            second.QuadPart = second.QuadPart - first.QuadPart;
            return (double) second.QuadPart / freq;
        }
    return 0;
} 
```

# c# - 使用 OpenXml sdk 2.0 创建 Excel 文档

> ID：1012547
> 
> 赞同：16
> 
> 时间：2009-06-18T13:09:19.267
> 
> 标签：c#, excel, openxml, spreadsheetml

我已经使用 OpenXml SDK 2.0 创建了一个 Excel 文档，现在我必须设置它的样式，但我不能。

我不知道如何绘制背景颜色或更改不同单元格中的字体大小。

我创建单元格的代码是：

```
private static Cell CreateTextCell(string header, string text, UInt32Value index)
{
    Cell c = new Cell();
    c.DataType = CellValues.InlineString;
    c.CellReference = header + index;
    InlineString inlineString = new InlineString();
    DocumentFormat.OpenXml.Spreadsheet.Text t = new DocumentFormat.OpenXml.Spreadsheet.Text();
    t.Text = text;
    inlineString.AppendChild(t);
    c.AppendChild(inlineString);
    return c;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-06-29T21:12:29.800

注意：OpenXML 2.0 SDK 目前在 CTP 中，直到 Office2010 才获得生产使用许可。

我处理 OpenXML SDK 的一般方法是创建一个空白文档和一个仅包含您想学习如何实现的功能（如背景颜色）的文档，并使用 SDK 的 OpenXmlDiff 来查看需要进行哪些更改才能实现该功能。

如果您从头开始创建文档，则可以使用 DocumentReflector 为默认 Stylesheet 对象生成代码，然后添加您需要的样式。

从默认开始：

```
new Stylesheet(
new Fonts(
    new Font(
        new FontSize() { Val = 10D },
        new Color() { Theme = (UInt32Value)1U },
        new FontName() { Val = "Arial" },
        new FontFamilyNumbering() { Val = 2 })
) { Count = (UInt32Value)1U },
new Fills(
    new Fill(
        new PatternFill() { PatternType = PatternValues.None }),
    new Fill(
        new PatternFill() { PatternType = PatternValues.Gray125 })
) { Count = (UInt32Value)2U },
new Borders(...
...
...
new CellFormats(
new CellFormat() { NumberFormatId = (UInt32Value)0U, FontId = (UInt32Value)0U, FillId = (UInt32Value)0U, BorderId = (UInt32Value)0U, FormatId = (UInt32Value)0U }) { Count = (UInt32Value)1U }, ... 
```

我添加了一个大小为 12 的新字体和一个新的红色背景填充（索引值 64），并添加了引用新字体和填充索引的新 CellFormats。（确保也更新计数）

```
new Stylesheet(
    new Fonts(
        new Font(
            new FontSize() { Val = 10D },
            new Color() { Theme = (UInt32Value)1U },
            new FontName() { Val = "Arial" },
            new FontFamilyNumbering() { Val = 2 }),
        new Font(
            new FontSize() { Val = 12D },
            new Color() { Theme = (UInt32Value)1U },
            new FontName() { Val = "Arial" },
            new FontFamilyNumbering() { Val = 2 })
            ) { Count = (UInt32Value)2U },
    new Fills(
        new Fill(
            new PatternFill() { PatternType = PatternValues.None }),
        new Fill(
            new PatternFill() { PatternType = PatternValues.Gray125 }),
        new Fill(
            new PatternFill() { PatternType = PatternValues.Solid, ForegroundColor = new ForegroundColor() { Rgb = "FFFF0000" }, BackgroundColor = new BackgroundColor() { Indexed = 64 } })
            ) { Count = (UInt32Value)3U },
    new Borders(
        new Border(
            new LeftBorder(), new RightBorder(), new TopBorder(), new BottomBorder(), new DiagonalBorder())
    ) { Count = (UInt32Value)1U },
    new CellStyleFormats(
        new CellFormat() { NumberFormatId = (UInt32Value)0U, FontId = (UInt32Value)0U, FillId = (UInt32Value)0U, BorderId = (UInt32Value)0U }
    ) { Count = (UInt32Value)1U },
    new CellFormats(
        new CellFormat() { NumberFormatId = (UInt32Value)0U, FontId = (UInt32Value)0U, FillId = (UInt32Value)0U, BorderId = (UInt32Value)0U, FormatId = (UInt32Value)0U },
        new CellFormat() { NumberFormatId = (UInt32Value)0U, FontId = (UInt32Value)1U, FillId = (UInt32Value)0U, BorderId = (UInt32Value)0U, FormatId = (UInt32Value)0U },
        new CellFormat() { NumberFormatId = (UInt32Value)0U, FontId = (UInt32Value)0U, FillId = (UInt32Value)2U, BorderId = (UInt32Value)0U, FormatId = (UInt32Value)0U }
    ) { Count = (UInt32Value)3U },
    new CellStyles(
        new CellStyle() { Name = "Normal", FormatId = (UInt32Value)0U, BuiltinId = (UInt32Value)0U }
    ) { Count = (UInt32Value)1U },
    new DifferentialFormats() { Count = (UInt32Value)0U },
    new TableStyles() { Count = (UInt32Value)0U, DefaultTableStyle = "TableStyleMedium9", DefaultPivotStyle = "PivotStyleLight16" }); 
```

然后，在代码中，我将 CellStyle 索引应用于要格式化的单元格：（单元格 A2 和 A3 中已经有数据。单元格 A2 的尺寸更大，A3 的背景为红色）

```
SheetData sheetData = worksheetPart.Worksheet.GetFirstChild<SheetData>();
sheetData.Descendants<Row>().Where(r => r.RowIndex == 2U).First().Descendants<Cell>().First().StyleIndex = 1U;
sheetData.Descendants<Row>().Where(r => r.RowIndex == 3U).First().Descendants<Cell>().First().StyleIndex = 2U; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2011-10-27T12:16:50.747

非常感谢这篇文章。

经过一番挣扎（和谷歌搜索），我终于设法创建了一个*非常*易于使用的 C# 类，它接受一个数据集和一个文件名，并创建一个包含数据集数据的 Office 2007 .xlsx。

突然间，将功能添加到您的应用程序以“导出到 Excel”的过程变得像...

```
DataSet ds = CreateSampleData();                  //  Your code here !
string excelFilename = "C:\\Sample.xlsx";

CreateExcelFile.CreateExcelDocument(ds, excelFilename); 
```

我已经在以下网站上发布了完整的源代码以及使用它的示例。

这是一个 Visual Studio 2008 C# WinForms 应用程序，但如果你运行的是 VS2010，你可以让 Visual Studio 升级这个项目。

享受。

[http://www.mikesknowledgebase.com/pages/CSharp/ExportToExcel.htm](http://www.mikesknowledgebase.com/pages/CSharp/ExportToExcel.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-08-18T05:44:33.043

如何指定单元格样式？

```
new Cell() { CellReference = "B6", StyleIndex = 11U } 
```

这里的“11U”是 StylesPart.Stylesheet.CellFormats 的从零开始的索引，其中每个 CellFormat 定义了 NumberFormat、Font、Fill 和 Border 样式的组合。

您不必按程序添加所有样式，而是可以创建一个模板 xlsx 文件，其中包含您需要的所有格式，然后在程序中指定样式索引。

# vb.net - 带索引的 Select 重载的查询表示法

> ID：1012552
> 
> 赞同：3
> 
> 时间：2009-06-18T13:10:33.770
> 
> 标签：vb.net, linq, select

有一个 Select 重载，它为序列的每个元素添加一个索引：

```
Dim Letters = new string() {"a","b","c","d","e"}
Dim IndexedLetters = Letters.Select(function (aLetter, index) new with {.Index = index + 1, .Letter = aLetter})

' For LINQPad users : IndexedLetters.Dump 
```

这个查询可以用查询表示法编写吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T13:39:32.777

不，不幸的是它不能。您提到的 Select 重载不是 VB.Net（或 C#）编译器将在查询表示法中绑定到的 Select 重载之一。如您的示例所示，您必须手动将其写出来。

# c# - 实体框架多对多+计数

> ID：1012565
> 
> 赞同：1
> 
> 时间：2009-06-18T13:13:23.127
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我有三张桌子，教授，教授学生，学生。

我想要所有教授+每个教授有多少学生。

我可以做这个：

```
context.ProfessorSet.Include("Student") 
```

context.ProfessorSet.Include("Student").ToList() 将读取所有三个表。

但我不想获得学生表，我希望 Linq 只获得“教授表”+“Count(*)ProfessorStudent Group By StudentId”。

这是可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-19T13:44:14.243

我确实使用这个：

```
 var c = from tag in contexto.ProfessorSet
                select new
                {
                    Tag = tag,
                    Count = tag.Student.Count
                }; 
```

但是生成这个 SQL：

SELECT C.Id, C.Nome, C.C1 FROM (SELECT A.Id, A.Nome, (SELECT COUNT(0) FROM ProfessorStudant AS B WHERE A.Id = B.ProfessorId ) AS [C1] FROM Professor AS A )

我要这个：

Select A.Id, Count(0) from Professor A inner join ProfessorStudent B on A.Id = B.ProfessorId Group By A.Id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T18:01:58.393

```
from p in context.ProfessorSet
from s in p.Student
group s by s.StudentId into g
select new
{
    Professor = p,
    StudentCounts = from sc in g
                    select new
                    {
                        StudentId = sc.Key,
                        Count = sc.Group.Count()
                    }
} 
```

# c++ - std::string 浮动或加倍

> ID：1012571
> 
> 赞同：110
> 
> 时间：2009-06-18T13:15:58.737
> 
> 标签：c++

我正在尝试转换`std::string`为`float/double`. 我试过：

```
std::string num = "0.6";
double temp = (double)atof(num.c_str()); 
```

但它总是返回零。还有其他方法吗？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2009-06-18T13:25:56.940

```
std::string num = "0.6";
double temp = ::atof(num.c_str()); 
```

对我有用吗，将字符串转换为双精度值是一种有效的 C++ 语法。

您可以使用 stringstream 或 boost::lexical_cast 来做到这一点，但它们会带来性能损失。

* * *

啊哈哈你有一个Qt项目......

```
QString winOpacity("0.6");
double temp = winOpacity.toDouble(); 
```

额外说明：
如果输入数据是 a `const char*`，`QByteArray::toDouble`会更快。

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2012-10-17T10:41:43.597

标准库 (C++11) 提供了所需的功能[`std::stod`](http://www.cplusplus.com/reference/string/stod/)：

```
std::string  s  = "0.6"
std::wstring ws = "0.7"
double d  = std::stod(s);
double dw = std::stod(ws); 
```

通常对于大多数其他基本类型，请参阅[`<string>`](http://www.cplusplus.com/reference/string/)。C 字符串也有一些新功能。看[`<stdlib.h>`](http://www.cplusplus.com/reference/cstdlib/)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2009-06-18T13:21:51.050

词法转换非常好。

```
#include <boost/lexical_cast.hpp>
#include <iostream>
#include <string>

using std::endl;
using std::cout;
using std::string;
using boost::lexical_cast;

int main() {
    string str = "0.6";
    double dub = lexical_cast<double>(str);
    cout << dub << endl;
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-06-18T13:27:28.620

您可以使用 std::stringstream：

```
 #include <sstream>
   #include <string>
   template<typename T>
   T StringToNumber(const std::string& numberAsString)
   {
      T valor;

      std::stringstream stream(numberAsString);
      stream >> valor;
      if (stream.fail()) {
         std::runtime_error e(numberAsString);
         throw e;
      }
      return valor;
   } 
```

用法：

```
double number= StringToNumber<double>("0.6"); 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-06-18T13:19:01.600

是的，有一个词汇转换。使用 stringstream 和 << 运算符，或者使用 Boost，他们已经实现了。

您自己的版本可能如下所示：

```
template<typename to, typename from>to lexical_cast(from const &x) {
  std::stringstream os;
  to ret;

  os << x;
  os >> ret;

  return ret;  
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-06-18T13:22:35.243

您可以使用增强词法转换：

```
#include <boost/lexical_cast.hpp>

string v("0.6");
double dd = boost::lexical_cast<double>(v);
cout << dd << endl; 
```

注意： boost::lexical_cast 会抛出异常，所以当你传递无效值时你应该准备好处理它，尝试传递 string("xxx")

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-06-18T13:23:43.603

如果您不想拖入所有提升，请使用`strtod(3)`from `<cstdlib>`- 它已经返回双倍。

```
#include <iostream>
#include <string>
#include <cstring>
#include <cstdlib>

using namespace std;

int main()  {
    std::string  num = "0.6";
    double temp = ::strtod(num.c_str(), 0);

    cout << num << " " << temp << endl;
    return 0;
} 
```

输出：

```
$ g++ -o s s.cc
$ ./s
0.6 0.6
$ 
```

为什么 atof() 不起作用......你在什么平台/编译器上？

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-02-19T09:50:42.630

我在 Linux 中遇到了同样的问题

```
double s2f(string str)
{
 istringstream buffer(str);
 double temp;
 buffer >> temp;
 return temp;
} 
```

有用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-06-18T14:18:31.870

```
 double myAtof ( string &num){
      double tmp;
      sscanf ( num.c_str(), "%lf" , &tmp);
      return tmp;
   } 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-03-02T22:55:18.910

C++ 11 的方式是使用 std::stod 和 std::to_string。两者都在 Visual Studio 11 中工作。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-02-14T00:03:16.307

使用 C++17，您可以使用[`std::from_chars`](https://en.cppreference.com/w/cpp/utility/from_chars)，它是`std::stof`和`std::stod`. 它不涉及任何内存分配或查看语言环境，并且它是非抛出的。

该`std::from_chars`函数返回一个 type 的值`from_chars_result`，它基本上是一个具有两个字段的结构：

```
struct from_chars_result {
    const char* ptr;
    std::errc ec;
}; 
```

通过检查`ec`我们可以判断转换是否成功：

```
#include <iostream>
#include <charconv>

int main()
{
    const std::string str { "12345678901234.123456" };
    double value = 0.0;
    auto [p, ec] = std::from_chars(str.data(), str.data() + str.size(), value);
    if (ec != std::errc()) {
        std::cout << "Couldn't convert value";
    }

    return 0;
} 
```

**注意**：您需要一个相当最新的编译器（例如 gcc11）`std::from_chars`来处理浮点类型。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-06-18T13:38:06.947

这个答案在您的评论中支持 litb 。我非常怀疑您只是没有正确显示结果。

我曾经发生过完全相同的事情。我花了一整天的时间试图弄清楚为什么我在 64 位 int 中得到了一个错误的值，却发现 printf 忽略了第二个字节。您不能像 int 一样将 64 位值传递给 printf。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-04-09T16:55:46.870

至于为什么`atof()`在最初的问题中不起作用：它被加倍的事实让我怀疑。代码不应该在没有 的情况下编译`#include <stdlib.h>`，但是如果添加了强制转换来解决编译警告，则`atof()`没有正确声明。如果编译器假定`atof()`返回一个 int，则强制转换它会解决转换警告，但*不会*导致返回值被识别为 double。

```
#include <stdlib.h>
#include <string>

... 
  std::string num = "0.6";
  double temp = atof(num.c_str()); 
```

应该在没有警告的情况下工作。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-06-18T14:05:38.887

与其将 Boost 拖入方程式，不如将字符串（暂时）保留为 a`char[]`并使用`sprintf()`.

但是，当然，如果您无论如何都在使用 Boost，那真的不是什么大问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-10-05T03:07:18.590

无论如何，您都不希望 Boost lexical_cast 用于字符串 <-> 浮点。该用例子集是唯一一个 boost 始终比旧功能更差的集合——它们基本上将所有故障都集中在那里，因为它们自己的性能结果显示比使用 sscanf 和 printf 进行此类转换的性能要慢 20-25 倍。

自己谷歌一下。boost::lexical_cast 可以处理类似 50 次的转换，如果排除涉及浮点 #s 的转换，它与明显的替代方案一样好或更好（具有所有这些操作的单一 API 的额外优势）。但是带上花车，就性能而言，它就像泰坦尼克号撞上冰山一样。

旧的专用 str->double 函数都可以在 30 毫秒（或更好）内完成 10000 次解析。lexical_cast 需要大约 650 毫秒来完成相同的工作。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-06-03T12:59:49.247

我的问题：

1.  与语言环境无关的字符串加倍（小数分隔符始终为 '.'）
2.  字符串转换失败时的错误检测

我的解决方案（使用 Windows 函数 _wcstod_l）：

```
// string to convert. Note: decimal seperator is ',' here
std::wstring str = L"1,101";

// Use this for error detection
wchar_t* stopString;

// Create a locale for "C". Thus a '.' is expected as decimal separator
double dbl = _wcstod_l(str.c_str(), &stopString, _create_locale(LC_ALL, "C")); 

if (wcslen(stopString) != 0)
{
    // ... error handling ... we'll run into this because of the separator
} 
```

HTH ...我花了很长时间才找到这个解决方案。而且我仍然觉得我对字符串本地化和其他东西知之甚少......

# haskell - 开始使用 Haskell

> ID：1012573
> 
> 赞同：755
> 
> 时间：2009-06-18T13:17:11.043
> 
> 标签：haskell, functional-programming

几天来，我一直试图围绕 Haskell 中的函数式编程范式进行思考。我通过阅读教程和观看截屏视频来做到这一点，但似乎没有什么能坚持下去。现在，在学习各种命令式/OO 语言（如 C、Java、PHP）时，练习对我来说是一个很好的方法。但是因为我真的不知道 Haskell 有什么能力，而且因为有很多新概念可以利用，所以我不知道从哪里开始。

那么，你是如何学习 Haskell 的呢？是什么让你真正“破冰”？另外，开始练习有什么好主意吗？

* * *

## 回答 #1

> 赞同：2540
> 
> 时间：2009-06-19T08:57:11.467

我将根据您在 Haskell 中的技能水平来订购本指南，从绝对的初学者到专家。请注意，此过程将花费数月（数年？），因此相当长。

**绝对的菜鸟**

首先，Haskell 可以做任何事情，并且有足够的技能。它非常快（在我的经验中仅落后于 C 和 C++），并且可以用于从模拟到服务器、gui 和 Web 应用程序的任何事情。

然而，对于 Haskell 初学者来说，有些问题比其他问题更容易编写。数学问题和列表处理程序是很好的候选者，因为它们只需要最基本的 Haskell 知识就可以编写。

学习 Haskell 基础知识的一些很好的指南是[Happy Learn Haskell Tutorial和](http://www.happylearnhaskelltutorial.com)[Learn You a Haskell for Great Good](http://learnyouahaskell.com/)（或它的[JupyterLab 改编版](https://github.com/jamesdbrock/learn-you-a-haskell-notebook)）的前 6 章。在阅读这些内容时，用你所知道的知识解决简单的问题是一个非常好的主意。

另外两个很好的资源是[Haskell Programming from first principle](http://haskellbook.com/)和[Programming in Haskell](http://www.cs.nott.ac.uk/%7Epszgmh/pih.html)。它们都带有每章的练习，所以你有一些简单的小问题与你在最后几页学到的内容相匹配。

[haskell 99 问题页面](https://wiki.haskell.org/H-99:_Ninety-Nine_Haskell_Problems)是一个很好的尝试问题列表。这些从非常基础的开始，随着你的继续变得越来越困难。做很多这些都是很好的练习，因为它们可以让你练习递归和高阶函数的技能。我建议跳过任何需要随机性的问题，因为这在 Haskell 中有点困难。如果您想使用 QuickCheck 测试您的解决方案，请检查[此 SO 问题（请参阅下面的](https://stackoverflow.com/questions/5683911/simple-haskell-unit-testing)*中级*）。

一旦你完成了其中的一些，你就可以继续做一些[Project Euler](http://projecteuler.net/index.php?section=problems)问题。这些是按完成它们的人数排序的，这是一个相当好的难度指示。这些比以前的问题更能测试你的逻辑和 Haskell，但你应该仍然能够完成前几个问题。Haskell 解决这些问题的一大优势是整数不受大小限制。要完成其中的一些问题，阅读第 7 章和第 8 章的学习 Haskell 也会很有帮助。

**初学者**

在那之后，你应该对递归和高阶函数有了相当好的处理，所以现在是开始做一些更现实的问题的好时机。一个很好的起点是[Real World Haskell](http://book.realworldhaskell.org/)（在线书籍，您也可以购买硬拷贝）。对于以前从未做过函数式编程/使用过递归的人来说，我发现前几章介绍得太快了。但是，通过练习之前的问题，您应该会发现它完全可以理解。

解决本书中的问题是学习如何在 Haskell 中管理抽象和构建可重用组件的好方法。这对于习惯于面向对象（oo）编程的人来说至关重要，因为普通的 oo 抽象方法（oo 类）不会出现在 Haskell 中（Haskell 有类型类，但它们与 oo 类非常不同，更像 oo 接口）。我不认为跳过章节是一个好主意，因为每个章节都会引入很多新的想法，这些想法会在后面的章节中使用。

过了一会儿，你会看到第 14 章，可怕的 monads 章节（dum dum dummmm）。几乎每个学习 Haskell 的人都很难理解 monad，因为这个概念非常抽象。我想不出另一种语言中的任何概念与函数式编程中的 monad 一样抽象。Monads 允许将许多想法（例如 IO 操作、可能失败的计算、解析……）统一在一个想法下。因此，如果您在阅读了 monads 章节后并没有真正理解它们，请不要灰心。我发现阅读对 monad 的许多不同解释很有用。每个人都对问题提出了新的看法。这是一个很好[的 monad 教程列表](https://wiki.haskell.org/Tutorials#Using_monads)。我强烈推荐[All About Monads](https://wiki.haskell.org/All_About_Monads)，但其他的也不错。

此外，这些概念需要一段时间才能真正融入其中。这来自于使用，也来自于时间。我发现有时在问题上睡觉比其他任何事情都更有帮助！最终，这个想法会成功，你会想知道为什么你很难理解一个实际上非常简单的概念。当这种情况发生时真是太棒了，当它发生时，你可能会发现 Haskell 是你最喜欢的命令式编程语言 :)

为了确保你完全理解 Haskell 类型系统，你应该尝试解决[20 个中级 Haskell 练习](http://blog.tmorris.net/posts/20-intermediate-haskell-exercises/)。这些练习使用有趣的函数名称，如“furry”和“banana”，如果你还没有这些基本函数式编程概念，它们可以帮助你很好地理解它们。用一堆写满箭头、独角兽、香肠和毛茸茸的香蕉的纸来度过一个美好的夜晚。

**中间的**

一旦你理解了 Monads，我认为你已经从初级 Haskell 程序员转变为中级 Haskeller。那么从这里去哪里呢？我要推荐的第一件事（如果你还没有从学习 monad 中学到它们）是各种类型的 monad，例如 Reader、Writer 和 State。再一次，真实世界的 Haskell 和 All about monads 对此进行了很好的报道。要完成你的 monad 训练，学习 monad 转换器是必须的。这些让您可以将不同类型的 Monad（例如 Reader 和 State monad）组合成一个。刚开始这可能看起来毫无用处，但是在使用它们一段时间后，您会想知道没有它们您将如何生活。

现在，如果您愿意，您可以完成真实世界的 Haskell 书。现在跳过章节并不重要，只要你有 monads down pat。只需选择您感兴趣的内容即可。

有了你现在所拥有的知识，你应该能够使用 cabal 上的大多数包（至少有文档记录的......），以及 Haskell 附带的大多数库。要尝试的有趣库的列表是：

*   [Parsec](https://wiki.haskell.org/Parsec)：用于解析程序和文本。比使用正则表达式要好得多。优秀的文档，也有真实世界的 Haskell 章节。

*   [QuickCheck](http://www.cse.chalmers.se/%7Erjmh/QuickCheck/)：一个非常酷的测试程序。您所做的是编写一个应该始终为真的谓词（例如`length (reverse lst) == length lst`）。然后，您将谓词传递给 QuickCheck，它将生成大量随机值（在本例中为列表）并测试谓词对于所有结果是否为真。另请参阅[在线手册](http://www.cse.chalmers.se/%7Erjmh/QuickCheck/manual.html)。

*   [HUnit](http://hunit.sourceforge.net/)：Haskell 中的单元测试。

*   [gtk2hs](http://projects.haskell.org/gtk2hs/)：Haskell 最流行的 gui 框架，让您编写 gtk 应用程序。

*   [happstack](http://happstack.com/)：Haskell 的 Web 开发框架。不使用数据库，而是使用数据类型存储。非常好的文档（其他流行的框架是[snap](http://snapframework.com/)和[yesod](http://www.yesodweb.com/)）。

此外，您最终应该学习许多概念（如 Monad 概念）。这将比第一次学习 Monad 更容易，因为您的大脑将习惯于处理所涉及的抽象级别。学习这些高级概念以及它们如何组合在一起的一个很好的概述是[Typeclassopedia](http://www.haskell.org/haskellwiki/Typeclassopedia)。

*   Applicative：类似 Monads 的接口，但功能较弱。每个 Monad 都是 Applicative，但反之则不然。这很有用，因为有些类型是 Applicative 但不是 Monad。此外，使用 Applicative 函数编写的代码通常比使用 Monad 函数编写等效代码更具可组合性。请参阅《学习你的 Haskell 指南》中的[Functors、Applicative Functors 和 Monoids](http://learnyouahaskell.com/functors-applicative-functors-and-monoids#functors-redux)。

*   [Foldable](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Foldable.html) , [Traversable](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Traversable.html)：抽象列表的许多操作的类型类，以便可以将相同的功能应用于其他容器类型。另请参阅[haskell wiki 说明](https://wiki.haskell.org/Foldable_and_Traversable)。

*   [Monoid](https://wiki.haskell.org/Monoid)： Monoid 是一种类型，它具有零（或空）值，以及一个`<>`将两个 Monoid 连接在一起的操作，例如`x <> mempty = mempty <> x = x`和`x <> (y <> z) = (x <> y) <> z`。这些被称为同一性和关联性定律。许多类型是 Monoids，例如数字，带有`mempty = 0`和`<> = +`。这在许多情况下都很有用。

*   [箭头](http://www.haskell.org/arrows/)：箭头是表示接受输入并返回输出的计算的一种方式。函数是箭头的最基本类型，但还有许多其他类型。该库还有许多非常有用的箭头操作函数——即使只与普通的旧 Haskell 函数一起使用，它们也非常有用。

*   [数组](https://wiki.haskell.org/Modern_array_libraries)：Haskell 中的各种可变/不可变数组。

*   [ST Monad](https://wiki.haskell.org/Monad/ST)：让您编写具有可变状态的代码，运行速度非常快，同时在 monad 之外仍然保持纯净。请参阅链接查看更多细节。

*   FRP：Functional Reactive Programming，一种新的、实验性的编写处理事件、触发器、输入和输出的代码的方法（例如 gui）。不过我对此了解不多。[Paul Hudak 关于 yampa 的讨论](http://vimeo.com/96744621)是一个好的开始。

您应该看看许多新的语言功能。我只是列出它们，你可以从 google、[haskell](http://en.wikibooks.org/wiki/Haskell) wikibook、haskellwiki.org 站点和[ghc 文档](https://wiki.haskell.org/GHC)中找到很多关于它们的信息。

*   多参数类型类/功能依赖
*   类型族
*   存在量化类型
*   幻影类型
*   GADTS
*   其他...

很多 Haskell 都是基于[范畴论](http://en.wikipedia.org/wiki/Category_theory)的，所以你可能想研究一下。一个很好的起点是[计算机科学家的类别理论](https://rads.stackoverflow.com/amzn/click/com/0262660717)。如果不想买书，作者的相关[文章](http://repository.cmu.edu/cgi/viewcontent.cgi?article=2846&context=compsci)也很不错。

最后，您将想了解更多有关各种 Haskell 工具的信息。这些包括：

*   [ghc](https://wiki.haskell.org/GHC)（及其所有功能）
*   [cabal](http://www.haskell.org/cabal/) : Haskell 包系统
*   [darcs](http://darcs.net/)：用 Haskell 编写的分布式版本控制系统，在 Haskell 程序中非常流行。
*   [haddock](http://www.haskell.org/haddock/) : Haskell 自动文档生成器

在学习所有这些新库和概念的同时，在 Haskell 中编写一个中等规模的项目非常有用。它可以是任何东西（例如小游戏、数据分析器、网站、[编译器](http://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours)）。致力于此将使您能够应用您现在正在学习的许多东西。你在这个水平上停留了很长时间（这就是我所处的位置）。

**专家**

你需要几年时间才能达到这个阶段（你好，从 2009 年开始！），但我猜你从这里开始写 phd 论文，新的 ghc 扩展，并提出新的抽象。

**获得帮助**

最后，在学习的任何阶段，都有多个获取信息的地方。这些都是：

*   #haskell irc 频道
*   [邮件](https://wiki.haskell.org/Mailing_lists)列表。这些都是值得注册的，只是为了阅读正在进行的讨论——有些非常有趣。
*   haskell.org 主页上列出的其他地方

**结论**

好吧，结果比我预期的要长...无论如何，我认为精通 Haskell 是一个非常好的主意。这需要很长时间，但这主要是因为您正在学习一种全新的思维方式。这不像学了 Java 之后学了 Ruby，而是学了 C 之后学了 Java。另外，我发现我的面向对象编程技能由于学习了 Haskell 而得到了提高，因为我看到了许多抽象思想的新方法。

* * *

## 回答 #2

> 赞同：184
> 
> 时间：2009-06-18T13:21:33.857

[我的一些同事在Learn You a Haskell for Great Good](http://learnyouahaskell.com/)方面有很好的经验！.

> 教程面向具有命令式编程语言经验但以前没有使用函数式语言编程的人。

[并在这里](https://stackoverflow.com/questions/16918/beginners-guide-to-haskell)查看答案

* * *

## 回答 #3

> 赞同：104
> 
> 时间：2009-06-18T13:19:38.497

这是一本可以在线阅读的好书：[Real World Haskell](http://book.realworldhaskell.org/)

我做过的大多数 Haskell 程序都是为了解决[Project Euler](http://projecteuler.net/)问题。

不久前我读到的一条建议是，你应该有一套标准的简单问题，你知道如何解决（理论上），然后每当你尝试学习一门新语言时，你就用该语言实现这些问题。

* * *

## 回答 #4

> 赞同：74
> 
> 时间：2010-06-05T11:37:28.187

我很喜欢看这个关于使用 Haskell 进行函数式编程的 13 集系列。

C9 讲座：Erik Meijer 博士 - 函数式编程基础： [http ://channel9.msdn.com/shows/Going+Deep/Lecture-Series-Erik-Meijer-Functional-Programming-Fundamentals-Chapter-1/](http://channel9.msdn.com/shows/Going+Deep/Lecture-Series-Erik-Meijer-Functional-Programming-Fundamentals-Chapter-1/)

* * *

## 回答 #5

> 赞同：71
> 
> 时间：2009-06-19T09:52:02.947

添加其他人的答案 - 在编码时（例如在解决项目欧拉问题时）有一个有用的帮助： **Hoogle**。您可以使用命令行界面或[Web 界面](http://www.haskell.org/hoogle/)。

## 命令行

安装 Haskell 平台后，请务必`cabal install hoogle`

Hoogle 用法示例：

你有一个函数`f x = 3 * x + 1`，你想将它应用到 上`(5 :: Int)`，然后将它应用到结果和那个结果上等等，并获得这些值的无限列表。您怀疑可能已经存在可以帮助您的功能（`f`虽然不是专门为您服务的）。

`(a -> a) -> a -> [a]`如果需要`f 5`或`a -> (a -> a) -> [a]`如果需要，该函数将是类型`5 f`（我们假设该函数用于一般类型而不仅仅是`Int`s）

```
$ hoogle "a -> (a -> a) -> [a]"
Prelude iterate :: (a -> a) -> a -> [a] 
```

是的，您需要的功能已经存在，它被称为`iterate`. 你用它`iterate func 5`！

## 网页界面

可以在[此处](http://www.haskell.org/hoogle/?hoogle=a%20-%3E%20(a%20-%3E%20a)%20-%3E%20%5Ba%5D)找到相同示例的结果。

* * *

## 回答 #6

> 赞同：58
> 
> 时间：2009-06-21T06:23:00.043

Graham Hutton 的[《Haskell 编程》](http://www.cs.nott.ac.uk/~gmh/book.html)简明扼要，相当透彻，他多年教授 Haskell 的经验也确实表明了这一点。这几乎总是我建议人们从那里开始的，不管你从那里去哪里。

特别是第 8 章（“函数解析器”）提供了开始处理 monad 所需的真正基础，我认为这是迄今为止最好的起点，其次是[All About Monads](http://www.haskell.org/haskellwiki/All_About_Monads)。（不过，关于那一章，请注意网站上的勘误表：如果`do`没有特殊帮助，您将无法使用该表单。您可能想先了解类型类，然后自己解决这个问题。）

Haskell 初学者很少强调这一点，但值得在很早的时候学习，不仅是关于使用 monad，而且是关于构建你自己的。这并不难，定制的可以使许多任务变得更加简单。

* * *

## 回答 #7

> 赞同：55
> 
> 时间：2009-06-18T13:23:09.847

不要试图阅读所有带有有趣隐喻的 monad 教程。他们只会让你变得更糟。

* * *

## 回答 #8

> 赞同：31
> 
> 时间：2009-06-18T14:28:52.257

我建议加入[#haskell irc 频道](http://www.haskell.org/haskellwiki/Irc)并在那里提问。这就是我学习 Haskell 的方式。如果您按照上面的建议通过 Real World Haskell，实时回答您的问题将大有帮助。#haskell 上的很多聪明人写 Haskell 是为了好玩和赚钱，所以你会得到很多好的意见。尝试一下！

* * *

## 回答 #9

> 赞同：24
> 
> 时间：2011-03-03T06:59:28.040

**这些是我的最爱**

**[Haskell：类型的函数式编程](http://upload.wikimedia.org/wikipedia/commons/2/26/Haskell.pdf)**

```
Joeri van Eekelen, et al. | Wikibooks
       Published in 2012, 597 pages 
```

**[真实世界的 Haskell](http://book.realworldhaskell.org/read/)**

```
 B. O'Sullivan, J. Goerzen, D. Stewart | OReilly Media, Inc.
   Published in 2008, 710 pages 
```

* * *

## 回答 #10

> 赞同：19
> 
> 时间：2010-08-31T13:55:54.747

我还可以推荐[*另一个 Haskell 教程*](http://users.umiacs.umd.edu/%7Ehal/docs/daume02yaht.pdf)作为介绍。

另一个很好的学习资源（可能是中级），它对我有很大帮助，据我所知，其他答案中没有提到，是 Brent Yorgey 的*Typeclassopedia*，可以在[*The Monad Reader* (Issue ) 中找到13)](http://www.haskell.org/sitewiki/images/8/85/TMR-Issue13.pdf)

它以一种非常易于理解的风格编写并包含（除许多其他内容外）以下介绍性建议：

> 专家级 Haskell 黑客的智慧有两个关键：
> 
> 1.  了解类型。
>     
>     
> 2.  对每个类型类及其与其他类型类的关系有深刻的直觉，这得益于对许多示例的熟悉。

[*Monad Reader*](http://themonadreader.wordpress.com/)本身就是函数式程序员（不仅是 Haskell 程序员）的绝对宝库。

* * *

## 回答 #11

> 赞同：15
> 
> 时间：2009-06-18T13:19:04.020

尝试在其中编写简单的程序。

您可能可以在各种教科书中找到示例任务。

我不建议坚持使用 Haskell/FP 教科书，只需尝试用它做一些简单的事情：计算、字符串操作、文件访问。

在我解决了十几个之后，我打破了僵局:)

之后，阅读大量高级概念（Monads、Arrows、IO、递归数据结构），因为 Haskell 是无限的，而且数量很多。

* * *

## 回答 #12

> 赞同：14
> 
> 时间：2012-01-01T11:04:40.623

我确实认为通过示例实现 Haskell 的特性是最好的开始方式。

[http://en.wikipedia.org/wiki/Haskell_98_features](http://en.wikipedia.org/wiki/Haskell_98_features)

这是棘手的类型类，包括单子和箭头

[http://www.haskell.org/haskellwiki/Typeclassopedia](http://www.haskell.org/haskellwiki/Typeclassopedia)

对于现实世界的问题和更大的项目，请记住这些标签：GHC（最常用的编译器）、Hackage（库数据库）、Cabal（建筑系统）、darcs（另一个建筑系统）。

集成系统可以节省您的时间：[http ://hackage.haskell.org/platform/](http://hackage.haskell.org/platform/)

该系统的软件包数据库：http: [//hackage.haskell.org/](http://hackage.haskell.org/)

GHC 编译器的维基：[http ://www.haskell.org/haskellwiki/GHC](http://www.haskell.org/haskellwiki/GHC)

在 Haskell_98_features 和 Typeclassopedia 之后，我想你已经可以自己找到并阅读关于它们的文档了

顺便说一句，你可能想测试一些 GHC 的语言扩展，这可能是未来 haskell 标准的一部分。

这是我学习haskell的最佳方式。我希望它可以帮助你。

* * *

## 回答 #13

> 赞同：13
> 
> 时间：2009-06-18T23:19:49.963

我建议您首先阅读[BONUS 的教程](http://www.learnyouahaskell.com)，然后阅读[Real World Haskell（免费在线）](http://book.realworldhaskell.org/read/)。加入[irc.freenode.com 上的#Haskell IRC 频道](http://www.haskell.org/haskellwiki/Irc)并提出问题。这些人对新手绝对友好，并且随着时间的推移帮助了我很多。此外，就在 SO 上，这里是获得您无法掌握的事情帮助的好地方！尽量不要气馁，一旦点击，你的头脑就会被吹走。

BONUS 的教程将为您做好准备，让您为 Real World Haskell 带来的刺激之旅做好准备。祝你好运！

* * *

## 回答 #14

> 赞同：12
> 
> 时间：2009-06-21T21:01:56.443

如果您只有命令式/OO 语言的经验，我建议使用更传统的函数式语言作为垫脚石。Haskell*真的很不*一样，你必须理解很多不同的概念才能到达任何地方。我建议首先处理 ML 风格的语言（例如 F#）。

* * *

## 回答 #15

> 赞同：10
> 
> 时间：2010-05-31T00:57:02.707

第一个答案是一个非常好的答案。为了达到专家级别，您应该与一些专家自己一起攻读博士学位。

我建议您访问 Haskell 页面：[http](http://haskell.org) ://haskell.org 。那里有很多材料，以及很多对 Haskell 中最新内容的引用，这些内容得到了 Haskell 社区的认可。

# iphone - 将图像保存到用户首选项

> ID：1012575
> 
> 赞同：1
> 
> 时间：2009-06-18T13:18:32.133
> 
> 标签：iphone, objective-c, uiimage, preferences

有没有人在保存涉及使用相机拍摄的图像的应用程序偏好（在应用程序内，而不是在设置应用程序中）方面有任何经验？

首选项包括 NSStrings、UIImage、BOOLs 等。 UIImage 是用相机拍摄的照片。

我可以将这些全部存储在 NSMutableArray 中，然后执行以下操作：

```
[array writeToFile:[self dataFilePath] atomically:YES]; 
```

一个数组能容纳这么多的对象吗？（我猜 BOOL 并不是严格意义上的对象）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T13:32:26.177

您可以使用 NSKeyedArchiver 保存此数组，避免使用属性列表：

```
[NSKeyedArchiver archiveRootObject:array toFile:[self dataFilePath]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T13:30:01.453

您只能使用编写[属性列表](http://developer.apple.com/documentation/Cocoa/Conceptual/PropertyLists/index.html)`writeToFile:atomically:`。这意味着，数组（和可能的子容器）只能包含 NSArray、NSDictionary、NSString、NSData、NSDate 和 NSNumber 类型的对象。您必须将图像转换为 NSData，才能在属性列表中使用它。

# javascript - 让 jQuery 与 Netscape 7 和 8 一起工作

> ID：1012576
> 
> 赞同：0
> 
> 时间：2009-06-18T13:18:57.390
> 
> 标签：javascript, jquery, browser, conflict, netscape

Netscape 没能读懂很多 jQuery 写的。您采取了哪些措施来克服这些问题，网景用户占据了多少市场份额？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-18T13:23:27.177

我会采取的步骤：

1.  让它失败
2.  等待 Netscape 用户注意到他们正在使用一个长期死机的浏览器，其中存在安全漏洞

Netscape 的市场份额几乎为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T13:21:49.363

嗯，0%？

话虽如此，我不得不承认，在我古老的 Konqueror 3.5.10 中，当原型工作时，jquery 在很多网站上都失败了，所以这里可能有一个模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T13:48:25.223

虽然我是在 Netscape 上长大的 ;-) ...[**它不再维护 (RIP)**](http://blog.netscape.com/2007/12/28/end-of-support-for-netscape-web-browsers/)

因此，尽管我完全赞成“支持所有浏览器”的口头禅——支持现在“死”技术的用户似乎是一项艰巨的任务。

IIRC，[**jQuery 支持矩阵**](http://docs.jquery.com/Browser_Compatibility)基于支持主要浏览器的最新支持的主要版本（以及之前的 1 级）。***Netscape 7 和 8 都被排除在此列表之外***。

我建议为该站点提供一个简单的“请升级”通知......并且由于用户在 Netscape 上，Firefox 将是一个非常兼容的升级路径，因为概念和布局非常相似（例如书签、上下文菜单选项、 ETC。）

因此，为 Firefox 3 提供下载链接将为用户提供顺畅的升级指导路径。

也许只是一个简单的 iframe**[就](http://www.mozilla.com/en-US/firefox/upgrade.html)**可以了。

# matlab - 显示来自 MATLAB 的信息而无需换行

> ID：1012597
> 
> 赞同：18
> 
> 时间：2009-06-18T13:23:44.167
> 
> 标签：matlab, formatting, printf, disp

有没有什么方法可以在没有结束换行的情况下从 MATLAB 程序输出/显示信息？

我的 MATLAB 程序时不时地输出一个数字。在输出数字之间，程序做了很多其他的事情。这是一个主要用于指示某种进度的结构，最好不要每次都换行，只是为了让用户更容易阅读。这大约是我正在寻找的：

```
Current random seed:
4 7 1 1 
```

如果程序仍在做与以前相同的事情，则程序的下一个输出将位于同一行。

我已经阅读了有关 disp、sprintf 和 format 的文档，但没有找到我要查找的内容。这并不意味着它不存在。;)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-06-18T13:34:44.940

fprintf 函数不会添加换行符，除非您明确告诉它。省略 fid 参数以将其打印到命令行窗口。

```
fprintf('Doing stuff... ');
for i = 1:5
    fprintf('%d ', i);
    % do some work on that pass...
end
fprintf(' done.\n'); % That \n explicitly adds the linefeed 
```

使用 sprintf 不会很有效：它会创建一个没有换行符的字符串，但是如果您使用 disp() 或省略分号，则 disp 自己的显示逻辑将添加换行符。

# javascript - 在 onSuccess 函数中获取对“triggerElement”的引用？

> ID：1012599
> 
> 赞同：1
> 
> 时间：2009-06-18T13:24:25.817
> 
> 标签：javascript, asp.net-mvc, dom-events

是否可以获得对`triggerElement`在函数中调用 Ajax 请求的引用`onSuccess`？

```
<%=Ajax.ActionLink("x", a, r, New AjaxOptions With {.OnSuccess = _
         "function(context) {alert('get triggerElement reference here?');}" })%> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-07-01T12:39:00.773

页面呈现为：
<a href="/<whatever>/<action>" onclick=" **Sys.Mvc.AsyncHyperlink.handleClick** ( *this* , new Sys.UI.DomEvent(event), { injectionMode: Sys.Mvc. InsertionMode.replace, onSuccess: Function.createDelegate(this, function(context) { alert('get triggerElement reference here?'); }) });">x</a>

那么让我们看一下`Sys.Mvc.AsyncHyperlink.handleClick`内部`Scripts\MicrosoftMvcAjax.debug.js`：

```
Sys.Mvc.AsyncHyperlink.handleClick = function Sys_Mvc_AsyncHyperlink$handleClick(anchor, evt, ajaxOptions) {
    /// omitted doc comments
    evt.preventDefault();
    Sys.Mvc.MvcHelpers._asyncRequest(anchor.href, 'post', '', anchor, ajaxOptions);
} 
```

所以 ActionLink 被渲染到一个锚（“a”）标签，带有一个“onclick”事件，它使用`Sys.Mvc.AsyncHyperlink.handleClick`this*作为*参数之一，映射到*anchor*。
然后是这个`Sys.Mvc.MvcHelpers._asyncRequest`以*锚点*作为第四个参数的调用。让我们看看`Sys.Mvc.MvcHelpers._asyncRequest`：

```
Sys.Mvc.MvcHelpers._asyncRequest = function Sys_Mvc_MvcHelpers$_asyncRequest(url, verb, body, triggerElement, ajaxOptions) {
    /// omitted documentation
    if (ajaxOptions.confirm) {
        if (!confirm(ajaxOptions.confirm)) {
            return;
        }
    }
    if (ajaxOptions.url) {
        url = ajaxOptions.url;
    }
    if (ajaxOptions.httpMethod) {
        verb = ajaxOptions.httpMethod;
    }
    if (body.length > 0 && !body.endsWith('&')) {
        body += '&';
    }
    body += 'X-Requested-With=XMLHttpRequest';
    var requestBody = '';
    if (verb.toUpperCase() === 'GET' || verb.toUpperCase() === 'DELETE') {
        if (url.indexOf('?') > -1) {
            if (!url.endsWith('&')) {
                url += '&';
            }
            url += body;
        }
        else {
            url += '?';
            url += body;
        }
    }
    else {
        requestBody = body;
    }
    var request = new Sys.Net.WebRequest();
    request.set_url(url);
    request.set_httpVerb(verb);
    request.set_body(requestBody);
    if (verb.toUpperCase() === 'PUT') {
        request.get_headers()['Content-Type'] = 'application/x-www-form-urlencoded;';
    }
    request.get_headers()['X-Requested-With'] = 'XMLHttpRequest';
    var updateElement = null;
    if (ajaxOptions.updateTargetId) {
        updateElement = $get(ajaxOptions.updateTargetId);
    }
    var loadingElement = null;
    if (ajaxOptions.loadingElementId) {
        loadingElement = $get(ajaxOptions.loadingElementId);
    }
    var ajaxContext = new Sys.Mvc.AjaxContext(request, updateElement, loadingElement, ajaxOptions.insertionMode);
    var continueRequest = true;
    if (ajaxOptions.onBegin) {
        continueRequest = ajaxOptions.onBegin(ajaxContext) !== false;
    }
    if (loadingElement) {
        Sys.UI.DomElement.setVisible(ajaxContext.get_loadingElement(), true);
    }
    if (continueRequest) {
        request.add_completed(Function.createDelegate(null, function(executor) {
            Sys.Mvc.MvcHelpers._onComplete(request, ajaxOptions, ajaxContext);
        }));
        request.invoke();
    }
} 
```

所以原来的*锚点*现在是*triggerElement*，但是正如你所看到的，这个参数**从未**在函数体中使用过。
因此，如果您想对 triggerElement 进行某种“正式”（或记录）引用 - 没有这样的事情。
但是，嘿，它是 JavaScript，所以只要浏览器没有移动到另一个页面，您几乎可以访问任何东西，**包括调用堆栈**。例如：

```
<script type="text/javascript">
function a(p, q)
{
    b();
}

function b() {
    var x = arguments.caller[1];
    alert(x); // boo!
}

a(789, "boo!");

</script> 
```

所以最终你可以破解它并访问原始锚。我建议您执行以下操作：

*   编写一个要在 `OnBegin`.
*   在此函数中，访问 original `triggerElement`，并将其作为属性添加到 original `ajaxOptions`（也可以访问）
*   然后，在`OnSuccess`函数中，访问您被黑的 `ajaxOptions`.

# tfs - 在 TFS 中构建一组特定项目

> ID：1012600
> 
> 赞同：3
> 
> 时间：2009-06-18T13:25:15.240
> 
> 标签：tfs, build-automation

有人知道如何配置 TFS Build 以在解决方案中构建一组项目吗？我拥有的解决方案有 16 个项目，但对于我的一个构建定义，我希望编译其中的一些。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-22T14:33:52.393

我认为最简单的方法是创建一个新的解决方案文件。没有什么能阻止您拥有多个引用相同项目（或某个子集）的解决方案。

另一种方法是创建新配置。在解决方案资源管理器中，右键单击根节点 -> 配置管理器。除了“调试”或“发布”等标准配置之外，您还可以创建自己的自定义配置。对于配置 + 平台的每种组合，您可以使用下面的复选框来定义将构建哪些项目以及它们将使用哪些设置。

无论您选择什么，您都需要编辑 TFSBuild.proj 文件以指向所需的解决方案和/或配置。MSDN 说明：http: [//msdn.microsoft.com/en-us/library/bb399127.aspx](http://msdn.microsoft.com/en-us/library/bb399127.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T21:59:37.893

创建构建后，它将在源代码控制中创建一个 TFSBuild.proj 文件（您可以右键单击团队资源管理器中的构建并选择配置文件夹以找到它。

打开此文件并找到具有“SolutionToBuild”的标签。该标签具有用于指定目标的子标签。我认为，如果您输入要在其中构建的项目（以分号分隔），那么它只会构建这些项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T22:00:56.893

如果您还没有进行构建（正如 John Saunders 所说），您可以在构建设置中指定项目。（设置好之后就不能再这样做了。

# jquery - HTML、CSS、Javascript - 隐藏/显示元素

> ID：1012601
> 
> 赞同：0
> 
> 时间：2009-06-18T13:25:31.650
> 
> 标签：jquery, html, formatting, blueprint-css

我正在为我的 HTML 页面使用 Blueprint CSS 网格。我有一个要显示/隐藏的表格 - 使用 jQuery 将其链接到一个按钮。问题是每次我点击按钮来显示/隐藏表格时，页面上的所有内容都会稍微左右移动。

这是个常见的问题吗？有谁知道是什么原因造成的，以及我可以做些什么来修复页面的其他元素，使它们不会移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T13:28:12.050

这可能只是因为浏览器上的滚动条出现和消失，修改了页面宽度并改变了中心位置。

如果不是最小的代码片段将有助于识别问题，但我怀疑它是滚动条的事情。我也遇到过这个问题，直到我意识到发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T13:32:51.510

多一点细节会很好。您的显示/隐藏可能在某处添加了一个空 div，这可以解释这种转变。如果问题仍然存在，您可以尝试避免使用蓝图并制作自己的自定义网格，如果这不是太困难的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-22T00:43:46.623

正如cletus所说，这可能是滚动条问题。试试这个代码

```
html {
overflow: -moz-scrollbars-vertical; 
overflow-y: scroll;
} 
```

# unit-testing - 如何使用 resharper 调试 NUnit 单元测试？

> ID：1012603
> 
> 赞同：2
> 
> 时间：2009-06-18T13:25:50.463
> 
> 标签：unit-testing, debugging, nunit, resharper

我正在使用 Resharper 4.1、NUnit 2.2.7 运行 VS2008，使用 c# 编码。

在开发代码时，我想使用 NUnit 单元测试作为调试工具。

我的测试与正在测试的方法在不同的项目中，但在相同的解决方案中。

我已经在单元测试以及正在测试的方法中设置了断点。VS 设置为调试。

当我通过 resharper（也选择调试选项）运行单元测试时，设置断点的代码会在屏幕上闪烁，但不会暂停并让我查看变量的值。

我错过了哪些步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T13:27:05.610

左键单击测试方法显示的绿色符号，然后单击“调试”

或者，您可以在“单元测试会话”中选择单元测试，右键单击并选择“调试选定测试”。

# wcf - 以编程方式配置端点与 web/app.config

> ID：1012605
> 
> 赞同：3
> 
> 时间：2009-06-18T13:26:22.960
> 
> 标签：wcf, configuration, endpoints

有没有人考虑过这个？就个人而言，我认为在配置文件中管理端点很痛苦。做一个比另一个有什么优点/缺点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-18T13:28:14.187

只支持我的配置文件。

在配置文件中管理端点意味着如果（或者我应该说何时）端点发生变化，您不必更新应用程序。

您还可以让应用程序的多个实例使用不同的端点运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-18T13:57:05.423

我自己也倾向于喜欢配置方法，除了配置文件可能会变得很大。

我在 WCF 配置中注意到的一件事是，如果不添加您自己的自定义扩展，您*可以使用 XML 配置中无法**完成*的代码来做很多事情。换句话说，在代码中进行配置将提供更大的灵活性，当然您也可以只编写自己的扩展并使用配置中的扩展。

 *但是，请注意，我认为 Visual Studio 中有一个“错误”，如果您开始制作自己的扩展并将它们包含在 XML 中，那么 VS 将不再喜欢您的配置文件并将它们标记为错误，然后如果您尝试通过向导添加新服务，它将无法将端点添加到配置中。

* * *

这是对我自己的回答的一种跟进：

经过几个月的 xml 配置后，我将更改所有内容以在代码中构建端点和绑定。我发现了一个非常好的案例，可以在代码中使用它；

当您想要一个包含 WCF 客户端的可部署/可共享 .dll 时。

因此，例如，如果您有一个 CommonClients.dll，其中包含所有 WCF 接口和合同以与某个远程服务器进行通信，那么您也不想说“这里有 100 行 xml，您还必须放入您的应用程序.config 让每个客户端都能正常工作”。在这种情况下，将所有内容都构建在代码中效果会更好。

.NET 3.5 还有一个“特性”，如果你有一些 wcf 扩展，你必须指定完全限定的程序集名称。这意味着如果包含扩展的程序集更改版本号，您也必须更改配置文件中的程序集名称。它应该在 .NET 4 中修复为使用短程序集名称而不需要全名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-18T13:29:23.857

顺便说一句，配置文件中的端点在更改时不需要重新编译。这也意味着在将应用程序从开发移动到 UAT 再到生产时，您只需更新配置文件。

如果您只是在家里编写一些代码供自己使用，那么就没有真正的区别。然而，在商业环境中，在配置文件中定义 enpoint 可以省去各种麻烦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T13:31:35.150

使用 app.config 时，您的应用程序无需重新编译以适应更改。它还可以在多种情况下使用完全相同的代码重复使用。最后，硬编码你的端点（或任何可能发生变化的东西）是糟糕的编码实践。不要害怕配置文件，它是声明式编程。你说，“我想使用这个端点。” 它为您完成工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-18T14:18:09.750

我通常进行编程配置，因为我不想将我的应用程序内部结构暴露给用户。我唯一可以配置的是服务地址，但即使是这个我也保留在 userSettings 部分，而不是 system.ServiceModel。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-18T15:31:30.850

我更喜欢并推荐配置文件的方法。它通过允许对您的服务器进行更改而无需重新编译应用程序，从而提供了很大的灵活性。如果需要安全性，可以加密配置文件。

普通配置文件最大的担忧可能是最终用户可能会意外（或故意）修改它，从而导致您的应用程序崩溃。为了克服这个问题，您可以在代码中进行一些测试以检查配置文件中的配置是否正常，如果不是，则以编程方式将其初始化为一些默认值。**[我在这个](https://stackoverflow.com/questions/1009757/wcf-client-configuration-how-to-check-if-endpoint-is-in-config-file-and-fallbac/1011115#1011115)**问题的另一个答案中介绍了如何做到这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-18T13:29:25.247

这只是您需要多少灵活性的问题。通常我更喜欢配置文件的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-12-02T09:45:59.227

查看[.NET StockTrader 应用程序](http://msdn.microsoft.com/en-us/netframework/bb499684.aspx)。它使用存储库来存储配置数据，并有一个单独的应用程序来管理配置。设置和结构非常先进，对于像我这样的人来说，到目前为止只有 WCF 配置的基础知识，但我会说它值得一看。*

# iphone - 在 iPhone 上，使用屏幕控件移动 UIImageView 的最佳方式是什么？

> ID：1012606
> 
> 赞同：0
> 
> 时间：2009-06-18T13:26:44.143
> 
> 标签：iphone, uiimageview, quartz-graphics, nstimer

我正在开发这款游戏的 iPhone 版本。[http://www.students.uni-mainz.de/rathb000/Fillit/Game.html](http://www.students.uni-mainz.de/rathb000/Fillit/Game.html)

我正在使用 NSTimer 将船的位置更改 1 个像素，计时器的时间间隔为 0.002。

但是，我注意到如果我进一步缩短时间间隔，船不会更快地移动。事实上，0.05 和 0.002 之间没有区别。您必须作为 NSTimeInterval 提供的最短时间是否有限制？

目前，这艘船的移动速度太慢，以至于游戏无法令人兴奋。

此外，当我按下任何按钮移动船时，鸟类的移动（也由 NSTimer 实现）变得缓慢。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T13:44:07.120

NSTimer 不是实时机制；它作为运行循环的一部分触发，不适合创建流畅、流畅的动画。但是，有一个 SDK 是 iPhone OS 的一部分，称为 Core Animation——它提供了一个函数库，用于执行图层和视图的平滑动画。[这是一个相当不错的系列视频教程](http://www.bestechvideos.com/2008/07/07/core-animation-episode-1-getting-started-with-animations)，您可能会发现它们很有用。还有一本名为[Core Animation for Mac OS X and iPhone](https://rads.stackoverflow.com/amzn/click/com/1934356107)的优秀书籍，您可能会发现它很有用。

还有[来自 Apple 的核心动画文档](http://developer.apple.com/documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/AnimatingLayers.html#//apple_ref/doc/uid/TP40006085-SW1)，描述了如何使用 CABasicAnimation 类为任何层或视图的属性设置动画。这是文档中显式图层动画的示例：

```
CABasicAnimation *theAnimation; 

theAnimation=[CABasicAnimation animationWithKeyPath:@"opacity"];
theAnimation.duration=3.0;
theAnimation.repeatCount=1;
theAnimation.autoreverses=NO;
theAnimation.fromValue=CATransform3DTranslate(0,0,0);
theAnimation.toValue=CATransform3DTranslate(20,20,0);

[theLayer addAnimation:theAnimation forKey:@"animateTransform"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T13:38:10.050

来自`NSTimer`文档：

> 定时器不是实时机制；它仅在已添加计时器的运行循环模式之一正在运行并且能够检查计时器的触发时间是否已过时触发。由于典型的运行循环管理的各种输入源，计时器的时间间隔的有效分辨率被限制在 50-100 毫秒的数量级。如果在运行循环处于未监视计时器的模式或长时间调用期间发生计时器的触发时间，则计时器不会触发，直到运行循环下一次检查计时器。因此，定时器触发的实际时间可能是计划触发时间之后的一个重要时间段。

也许您可以尝试移动`UIView`使用`UIView`动画而不是计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T13:38:55.290

您可以考虑增加距离大小：每 0.05 秒移动船 3 或 4 像素，而不是每 0.002 秒移动 1 像素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T13:40:18.407

在我看来，您应该在游戏中的所有实体中全局使用相同的时间步，而不是专门用于玩家飞船的时间步。如果船在您的时间步长上移动得太慢，请增加它每帧移动的距离。

确实，您应该考虑以像素/秒为单位移动玩家的飞船。当 NSTimer 事件触发时，获取自上次更新以来经过的时间。使用此经过的时间来移动您的游戏实体。例如，如果您的更新时间步长为 0.05 秒，并且您希望以每秒 100 像素的速度移动玩家的飞船，那么您应该在此更新中将其移动 100 * 0.05 = 5 像素。此方法将考虑不同大小的时间步长，并且您的游戏实体将始终以一致的速度移动，即使您的计时器机制不是那么一致。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T15:04:31.200

NSTimer 不仅不是适合此类动画的正确工具，您的设计也是错误的。

间隔为 0002 的计时器每秒触发 500 次。这是为这款游戏制作动画的一种疯狂方式。

我建议你阅读 2D 游戏设计并找到一种更好的碰撞检测方法——就像匿名建议你应该在船周围有一个碰撞矩形而不是依赖于实际像素。

你也应该看看[Cocos-2D for iPhone](http://www.mobileorchard.com/cocos2d-open-source-2d-game-engine-for-iphone-developers/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-08-07T07:15:33.030

想通了。

不得不使用核心动画来移动船，并通过 NSTimer 让鸟儿移动。这种方式可以正常工作，但只能达到一定的限制。当船速增加超过一定限度时，鸟类再次减速。

# flash - 批量编译 .fla 文件的最佳方法是什么？

> ID：1012607
> 
> 赞同：-1
> 
> 时间：2009-06-18T13:26:51.617
> 
> 标签：flash

在构建过程中编译一堆 Flash 电影文件 (.fla) 的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T14:08:13.170

如果您使用的是 cs4，那么新项目面板可让您发布和管理多个 Flash 电影。看到这里了解更多信息

*   [http://help.adobe.com/en_US/Flash/10.0_UsingFlash/WSd60f23110762d6b883b18f10cb1fe1af6-7effa.html](http://help.adobe.com/en_US/Flash/10.0_UsingFlash/WSd60f23110762d6b883b18f10cb1fe1af6-7effa.html)

对于较旧的 Flash 项目，请看这里

*   [http://www.gskinner.com/products/gProject/about.php](http://www.gskinner.com/products/gProject/about.php)

# cloud - 云计算也可以扩展后端吗？

> ID：1012609
> 
> 赞同：3
> 
> 时间：2009-06-18T13:27:21.273
> 
> 标签：cloud

我正在为 Web 应用程序选择一个平台。

我了解云计算如何扩展前端服务器，但它们如何处理数据库服务器？

开发人员需要做些什么来实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T14:36:06.127

一般来说，是的。跨多台机器扩展数据库的最常见方法是使用[列存储](http://en.wikipedia.org/wiki/Column_store)。这样一来，表中的每一列都可以存储在单独的机器上，从而显着增加了可用于搜索的 CPU 功率和带宽。搜索也可以并行进行，对 company 列的搜索只会访问一台服务器，因此对 year 列的搜索不会变慢。

根据我的阅读，这就是 Google 的 MapReduce 的工作原理。

维基百科的专栏商店页面的[好处部分特别有用。](http://en.wikipedia.org/wiki/Column_store#Benefits)

同样，[OLAP](http://en.wikipedia.org/wiki/OLAP)也很有趣。OLAP 完全改变了读/写的权衡。对于大型复杂的查询，查询和读取速度很快，但写入新数据需要耗时的重建过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T13:41:35.830

**简短的回答**：是的。

**长答案**：这取决于。需要进行什么样的处理？可以缩小地图吗？这类事情有很多解决方案。分布式缓存 la memcache 还可以帮助扩展后端中的许多服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-01T00:33:50.003

这在很大程度上取决于您为后端选择的解决方案。一些应用程序使用混合来处理不同类型的数据。

当需要扩展时，很难使用 MySQL 或 PostgreSQL 等数据库。对于我们的项目，我们决定使用 Cassandra（在您询问的时候可能还不存在！），它允许您将数据存储在任意数量的后端计算机上。在这样做时，您还允许后端进程在完全独立的计算机上运行，​​这样您就可以进行各种计算，而无需降低数据库或前端（即 Apache）的速度。

我在此页面上的项目中谈到了这一点：

[http://snapwebsites.org/implementation/snap-websites-processes](http://snapwebsites.org/implementation/snap-websites-processes)

搜索“过程”一词。还有一个代表不同进程的图像，每个进程都可以在单独的计算机上运行（如果你有这么大的负载，你需要更多的马力）：

![在此处输入图像描述](../Images/76d3f0c4171965b019ee1762230b5db3.png)

实际上还有一些 Snap！该示例中显示的后端可以在多台计算机上运行，​​而一个实例处理这个网站，另一个实例将处理另一个网站。相当强大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T13:42:06.577

如果您使用的云提供商只是为您提供对虚拟机的 ssh 访问权限，则您需要实现自己的数据库扩展。如果您在 Google AppEngine、Intuit 合作伙伴平台或类似平台上运行，则可扩展性内置于提供给您的数据存储中。

基本上，云计算并没有什么神奇之处。为了获得这种内置的可扩展性，你放弃了一些自由。Google 的数据存储并没有提供完整关系数据库的所有方面，但您可以扩展到荒谬的流量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T13:47:29.920

Amazon 和 Google 使用数据存储，它不同于传统的 RDBMS。

您可以通过以下[链接找到更多背景信息](http://www.readwriteweb.com/archives/is_the_relational_database_doomed.php)

[您可以在此处](http://www.metabrew.com/article/anti-rdbms-a-list-of-distributed-key-value-stores/)找到一个简短的数据存储列表

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-18T13:37:56.557

**这取决于数据库**

Slicehost 使用 MySQL Cluster，Google 使用 map-reduce hype 等。取决于**云提供商**和**他们使用的数据库**

其他人只是提供一个虚拟机，您在具有私有 IP 的虚拟机上设置自己的数据库

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-29T19:20:21.370

至于如何，我最近发现了一篇专门针对这个的论文。在一次讲座中讨论过，所以虽然我对论文的内容很熟悉，但我自己并没有读过。尽管如此，讲座还是有非常有趣的想法：[http ://reports-archive.adm.cs.cmu.edu/anon/2008/CMU-CS-08-150.pdf](http://reports-archive.adm.cs.cmu.edu/anon/2008/CMU-CS-08-150.pdf)

# javascript - 哪种 JavaScript OOP 设计模式最能利用（新的）ECMAScript 5 特性？

> ID：1012614
> 
> 赞同：1
> 
> 时间：2009-06-18T13:28:34.780
> 
> 标签：javascript, oop, ecmascript-5

[ECMAScript 5 现在处于最终草案](http://www.ecma-international.org/publications/files/drafts/tc39-2009-025.pdf)中，包括与对象和原型相关的新功能。在围绕 SO 和 Google 寻找 OOP 设计模式时，我发现在 JavaScript 中有很多不同的“做 OOP”的方式（但是你可以定义 OOP，从尝试模拟经典 OOP 到简单地尝试减少命名空间污染） .

与 ECMAScript 5 引领 JavaScript 世界的方向相比，哪种设计模式最具前瞻性？它的主要优势是什么？其中哪些是不可能实现的或以前无法实现的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T16:12:14.350

我不认为 ECMAScript 5 改变了 JavaScript 中 OOP 的格局。对于想要使用它的人来说，经典的 OOP 仍然是一个补充。

在我看来，真实的故事是，当 ECMAScript 4 被废弃时，JavaScript 和 ActionScript 出现了分歧，JavaScript 不会像 ActionScript 那样添加类。

我怀疑支持 OOP 的库（MooTools、Prototype 等）大多会坚持他们正在做的事情，但也许他们可以在他们的实现中使用一些新的 ECMAScript 5 特性来巩固事情。

我们可能会继续看到[Joose](http://code.google.com/p/joose-js/)和[Class.js](http://jsclass.jcoglan.com/)等有趣的方法。

请记住，这需要一段时间。我们仍然有两位数的人在使用 IE6。因此，使用 ECMAScript 5 的第一个有用的地方可能是手机、Adobe AIR 和 JavaScript 服务器，在这些服务器上（大部分或严格地）浏览器是已知的。

[John Resig 在这里](http://ejohn.org/blog/ecmascript-5-objects-and-properties/)发表了一篇关于 ECMAScript 5 的对象更改的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-15T15:28:07.120

我认为 Object.create 的标准化将允许更多人使用底层基于原型的 OO 而不感到羞耻。试图在包装器后面隐藏“新 Foo”伪经典语法会使代码混乱。

# c# - C# SendKeys.发送

> ID：1012616
> 
> 赞同：5
> 
> 时间：2009-06-18T13:28:55.263
> 
> 标签：c#, sendkeys

我正在使用 C# SendKeys.Send 方法解决一个问题。我正在尝试用其他键替换键盘键，例如，当我在键盘上按“a”时，我希望该键为“s”，例如，当我在代码中执行此操作时：

```
if ((Keys)keyCode== Keys.A)
{                    
    SendKeys.Send("s");                    

} 
```

现在我在记事本中只打印了“sa”字符，但在这种情况下，我只需要打印“s”字符而不是打印“sa”，因为当我在键盘上按“a”时，必须替换“a”用“s”。

我尝试通过添加以下行来删除最后一个字符：

```
SendKeys.Send("{BS}"); 
```

但是我得到的只是删除了“s”字符，并且存在“a”字符。

我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T13:42:33.723

我可能做了一个错误的假设，但是如果您将它与文本框一起使用，您可以：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == 'a')
    {
        e.Handled = true;
    }
}

private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.A)
    {
        e.Handled = true;
        SendKeys.Send("s");
    }
} 
```

或者更简单：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == 'a')
    {
        e.Handled = true;
        SendKeys.Send("s");
    }
} 
```

或者，如果这不是仅用于文本框，那么您不能只反转退格键和 s 键发送吗？

```
if ((Keys)keyCode== Keys.A)
{                    
    SendKeys.Send("{BS}"); // remove A
    SendKeys.Send("s");    // add S
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T13:36:45.433

我会撤销我的电话：

`SendKeys.Send("{BS}");`

`SendKeys.Send("S");`

编辑（问题更新后）：

如果您正在使用字符串（对于您的特殊字符），您是否不仅可以捕获按键（“a”）生成的字符串并通过将字符串设置为您尝试的字符的 unicode 值来修改它代表？如果人们一直提到的其他解决方案不起作用，那我接下来会尝试...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-18T14:06:54.080

您的另一个选择是使用低级键盘挂钩来捕获旧字符，然后发送新字符。它需要一些 P/Invoke，但它使您能够完全捕获原始密钥，因此应用程序甚至看不到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T13:34:20.883

> 我打印了“a”，因为退格是在“s”之后立即发送的，它会删除“s”字符。我怎样才能防止这种情况发生？

嗯……

发送 s 后不要立即发送退格键？

```
if ((Keys)keyCode== Keys.A)
            {
                Sendkeys.Send("{BS}"); // Deletes the "A" (already sent)
                SendKeys.Send("s"); // Sends the "S"
            } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-18T13:36:59.177

SendKeys.SendWait

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-18T13:50:48.057

这可能不是您想要/需要的，但如果您只想重新映射一些键盘键，我建议您考虑使用其他键盘布局或创建自定义布局。您可以使用以下方法创建新布局：

[http://msdn.microsoft.com/en-ca/goglobal/bb964665.aspx](http://msdn.microsoft.com/en-ca/goglobal/bb964665.aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-18T14:10:09.593

我认为这种`SendKeys.Send("{BS}");`方法永远不会奏效（以任何一种顺序）。那是因为原始的按键/按键释放事件在`SendKeys.Send`发布后得到处理。我认为您应该在目标窗口过程（例如记事本）处理之前以某种方式取消要删除的字符的按键/按键事件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-18T13:35:40.397

您是否尝试过`.Send({BS})`切换`.Send("s")`？否则，你能澄清一下吗？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-18T22:37:19.393

我通过注册全局热键解决了这个问题。谢谢你。 [这](http://www.dotnet2themax.com/ShowContent.aspx?ID=103cca7a-0323-47eb-b210-c2bb7075ba78)是我用来解决问题的资源。

# iphone - 如何在 CFStream 中启用更多握手密码？

> ID：1012621
> 
> 赞同：0
> 
> 时间：2009-06-18T13:30:14.620
> 
> 标签：iphone, objective-c, sockets, ssl, cfreadstream

运行方法时：

```
CFReadStreamSetProperty(theReadStream, kCFStreamPropertySSLSettings (CFDictionaryRef)tlsPacket->tlsSettings); 
```

为了保护 CFReadStream 的连接，我的 iphone 客户端返回错误：

```
Error Domain=kCFStreamErrorDomainSSL Code=-9824 "Operation could not be completed. (kCFStreamErrorDomainSSL error -9824.)" 
```

并且服务器发送错误：

```
ERROR [STDERR] javax.net.ssl.SSLHandshakeException: no cipher suites in common 
```

有没有办法让 CFReadStream 在握手过程中使用额外的密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-11T20:16:25.193

对于遇到此问题的其他任何人：

事实证明，问题出在服务器端。如果您自己遇到此问题，我会敦促您检查服务器端的握手是否正常工作。

# c# - 一个项目中有3个表单时如何调用一个表单并在C#中的表单之间进行数据传输？

> ID：1012631
> 
> 赞同：-2
> 
> 时间：2009-06-18T13:32:46.130
> 
> 标签：c#, winforms, radio-button

我的项目 form1 、 form2 、 form3 中有 3 个表单，现在运行顺利，现在我在项目 form4 中又添加了一个。前三个表单已经通过 ShowDialog() 链接起来。

我不想触摸 Program.cs 文件。

**我如何首先调用表格 4 作为启动表格？**早期的表格 1 是我的项目中出现的第一个表格。

我的 form1 rdb1 和 rdb2 中还有 2 个单选按钮。在我的 form2 中，我将 openFileDialog 附加到一个按钮 Select 。现在我想当用户在 form1 中选择 rdb1 时，form2 中的 openFileDialog 过滤器应该打开仅以“.XML”作为扩展名的文件，当在 Form1 中选择 rdb2 时，在 Form2 中只能打开“.TXT”文件。

我**无法**在智能感知中找到它的语法，你能帮忙吗？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T13:40:05.177

你能解释一下为什么你不想碰你的 Program.cs 文件吗？这正是您更改启动表单的地方。

更改：

```
Application.Run(new Form1()); 
```

到：

```
Application.Run(new Form4()); 
```

其次，您可以使用 Filter 属性在 Open- 和 SaveFileDialog 上设置过滤器。将其设置为如下值：

```
XML Files|*.xml 
```

或者对于文本：

```
Text Files|*.txt 
```

**编辑添加：**

要从另一种形式执行此操作：

```
class Form1 {
  Form2 form2;

  void Form1_Load(object sender, EventArgs e) {
    form2 = new Form2();
  }

  void rdb1_CheckedChanged(object sender, EventArgs e) {
    if (rdb1.Checked) 
      form2.openFileDialog1.Filter = "XML Files|*.xml";
    else
      form2.openFileDialog1.Filter = "Text Files|*.txt";
  }
} 
```

确保您已将 Form2 设计器上 openFileDialog1 的 Modifiers 属性设置为“公共”或“内部”，以允许从类本身外部对其进行访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T13:41:11.603

您必须触摸 program.cs。这就是创建和运行初始表单的地方。

创建一个新的 winforms 项目并打开 program.cs。您可以看到 Application.Run 在哪里调用了启动表单的实例。这就是你必须做的。

不要害怕。一切都会好的。

* * *

回应评论：

Form1_Load 事件*由*Form1 在 Form1 内触发。您必须返回调用链并找到 Form1 被实例化并传递给 Application.Run 的位置。那是在program.cs 中。

去做吧。然后通过 C# 获取 CLR 的副本。你不会后悔的（只要你跳过前几章！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T13:40:17.283

> 我如何首先调用表格 4 作为启动表格？
> 
> 我不想触摸 Program.cs 文件。

为什么不想接触 Program.cs？传递给 Application.Run(..) 的表单实例决定了启动表单。

# html - 为什么我的背景没有延伸到我的内容框后面？

> ID：1012641
> 
> 赞同：3
> 
> 时间：2009-06-18T13:34:40.370
> 
> 标签：html, css

我无法让背景延伸到内容框后面。奇怪的是，它适用于 Internet Explorer，但不适用于 Firefox。

我希望给你一个链接就足够了，因为我不知道代码中的问题在哪里，所以在这里发布整个代码没有多大意义。

> [http://www.yiip.de/arbeit/testlayout/standard_template.html](http://www.yiip.de/arbeit/testlayout/standard_template.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T14:23:19.710

您还可以添加`overflow:hidden;`到`#shadow`. 这将清除浮动，而无需在您的 html 中添加额外的标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T13:43:57.543

尝试将以下“clearfix”样式添加到您的包装器中

```
.clearfix:after {
    content:"\0020";
    display:block;
    height:0;
    clear:both;
    visibility:hidden;
    overflow:hidden;
}
.clearfix {display:block;} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-06-18T13:39:04.277

您需要清除 3 个浮动 div 以使包含的 div 围绕它们垂直扩展。最简单的方法是添加

```
<br clear='both' /> 
```

在第三个浮动 div 之后（但在容器 div 内）。

# c++ - 如何在 C++ 中使用 TWAIN 设置扫描的 DPI

> ID：1012642
> 
> 赞同：3
> 
> 时间：2009-06-18T13:34:44.080
> 
> 标签：c++, twain, image-scanner

我在 C++ 中使用 TWAIN，我正在尝试手动设置 DPI，以便用户不会显示在扫描对话框中，而是页面仅使用设置的默认值进行扫描并为它们存储。我需要手动设置 DPI，但我似乎无法让它工作。我尝试使用 ICAP_XRESOLUTION 和 ICAP_YRESOLUTION 设置功能。当我查看图像的信息时，无论我使用 ICAP 将其设置为什么，它总是显示相同的分辨率。是否有另一种方法来设置扫描图像的分辨率，或者只是需要完成一个我在任何地方的文档中都找不到的额外步骤？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-18T14:29:10.307

我使用 ICAP_XRESOLUTION 和 ICAP_YRESOLUTION 来设置扫描仪的扫描分辨率，它至少适用于许多 HP 扫描仪。

代码片段：

```
float x_res = 1200;
cap.Cap = ICAP_XRESOLUTION;
cap.ConType = TWON_ONEVALUE;
cap.hContainer = GlobalAlloc(GHND, sizeof(TW_ONEVALUE));
if(cap.hContainer)
{
    val_p = (pTW_ONEVALUE)GlobalLock(cap.hContainer);
    val_p->ItemType = TWTY_FIX32;
    TW_FIX32 fix32_val = FloatToFIX32(x_res);
    val_p->Item = *((pTW_INT32) &fix32_val);
    GlobalUnlock(cap.hContainer);
    ret_code = SetCapability(cap);
    GlobalFree(cap.hContainer);
}

TW_FIX32 FloatToFIX32(float i_float)
{
    TW_FIX32 Fix32_value;
    TW_INT32 value = (TW_INT32) (i_float * 65536.0 + 0.5);
    Fix32_value.Whole = LOWORD(value >> 16);
    Fix32_value.Frac = LOWORD(value & 0x0000ffffL);
    return Fix32_value;
} 
```

该值应该是 TW_FIX32 类型，它是由 twain 定义的浮点格式（奇怪但真实）。

我希望这个对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T14:07:32.020

它应该以这种方式工作。

但不幸的是，我们并不是生活在一个完美的世界里。TWAIN 驱动程序是最容易出错的驱动程序之一。使用 TWAIN 控制扫描过程一直是一个令人头疼的问题，因为大多数驱动程序*从未*在没有扫描对话框的情况下进行过测试。

据我所知，也没有适用于 twain-drivers 的测试套件，因此它们每个人的行为都会略有不同。

我在 90 年代写了一个 OCR 应用程序，也不得不处理这些问题。我最终得到了一个受支持的扫描仪列表和一个扫描仪模块，其中包含针对每个不同驱动程序的*大量*技巧和解决方法。

以 ICAP_XRESOLUTION 为例： TWAIN 文档说您必须将分辨率作为 32 位浮点数发送。您是否尝试过使用整数来设置它？或者将其作为浮点数发送，但将整数的位表示放入浮点数中，反之亦然。所有这些都适用于您正在使用的驱动程序。或者它根本无法工作。

我怀疑从那以后情况发生了很大变化。祝你好运，让它在至少一半的机器上工作。

# direct3d - StretchRect 可以与 DF24 或 INTZ 表面一起使用吗？可以对 DF24 或 INTZ 进行多重采样吗？

> ID：1012648
> 
> 赞同：1
> 
> 时间：2009-06-18T13:36:22.533
> 
> 标签：direct3d, direct3d9, depth-buffer

您可以将 DF24 中的 StretchRect 延伸到另一个 DF24（特定于 ATI）吗？

您可以将 INTZ 中的 StretchRect 拉伸到另一个 INTZ（特定于 nVidia）吗？

您可以将 DF24 或 INTZ 创建为多重采样表面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T13:47:05.040

似乎它不能被多重采样：

资料来源：

[http://discussms.hosting.lsoft.com/SCRIPTS/WA-MSD.EXE?A2=ind0801D&L=DIRECTXDEV&P=10986](http://discussms.hosting.lsoft.com/SCRIPTS/WA-MSD.EXE?A2=ind0801D&L=DIRECTXDEV&P=10986)

> 我现在正在使用 RAWZ，我在笔记本电脑上运行了我的应用程序，winXP 和 8600go ......而且所有似乎都很好的强制软件版本与 vista 桌面和我的笔记本电脑相同（因操作系统而异）奇怪......
> 
> 让我印象深刻的另一件事是，该解决方案仅适用于非多重采样深度缓冲区和 suxx。

[http://forum.beyond3d.com/showthread.php?t=53918](http://forum.beyond3d.com/showthread.php?t=53918)

> 但是，有一个大问题 -> MultiSampling 不起作用！
> 
> 我需要关闭 MultiSampling 以将 'depthStencil_Surface' 与我的 'renderTarget' 绑定

如果无法进行多重采样，那么无论如何我对 StretchRect-ing 不太感兴趣。我想使用 StretchRect 来解决多采样数据。

# c# - 来自 C# 类的 VB 6.0 中的自动化错误

> ID：1012655
> 
> 赞同：1
> 
> 时间：2009-06-18T13:37:24.513
> 
> 标签：c#, vb6, com-interop

我创建了一个 C# 类库，并通过 VB 6.0 应用程序使用它。但是当我尝试调用任何方法（返回一个字符串）时，它会给我一个自动化错误。否则 C# 类运行良好。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T13:39:07.520

您应该对您的类库进行强签名，使用 regasm 注册它并将其放在您的类定义之前：

```
[ComVisible(true)]
[ClassInterface(ClassInterfaceType.None)]
[Guid("Class GUID")] 
```

此外，您应该定义一个接口来公开所需的方法。该接口应具有以下属性：

```
 [Guid("Interface GUID")]
 [ComVisible(true)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T15:58:13.767

正如 fbinder 所说，您应该对程序集进行强签名，并使用一些属性。我们（成功）使用的属性是：

```
[ComVisible( true )]
[ClassInterface( ClassInterfaceType.None )]
[Guid( "00000000-0000-0000-0000-000000000000" )]
[ComDefaultInterface( typeof( IExposedClass ) )]
public class ExposedClass : IExposedClass
{
    //need a parameterless constructor - could use the default
    public ExposedClass() { }

    public string GetThing()
    {
        return "blah";
    }
}

[ComVisible( true )]
[Guid( "00000000-0000-0000-0000-000000000000" )]
[InterfaceType( ComInterfaceType.InterfaceIsIUnknown )]
public interface IExposedClass
{
    string GetThing();
} 
```

# javascript - 将列表框的选项从 Mysql 加载到列表框，由其他列表控制 - Javascript

> ID：1012662
> 
> 赞同：0
> 
> 时间：2009-06-18T13:37:53.933
> 
> 标签：javascript, mysql, html

我不知道这个名字，如果我会搜索它。

我想要这样的东西，我认为它使用 javascript，但我不知道该怎么做。

在一个网页中，您有 2 个列表框，其内容来自 mysql。

数据库中有 2 个表，对于每个列表框，它们都是相关的。

然后，当您从列表框 1 中选择一个项目时，我们会根据您在列表框 1 中所做的选择动态加载列表框 2 的选项，如果您更改列表框 1 的选择，他也会更改列表框 2 的选项。

我想我表达的正确，如果它感到困惑就说出来。

再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T13:47:50.217

[http://remysharp.com/2007/09/18/auto-populate-multiple-select-boxes/](http://remysharp.com/2007/09/18/auto-populate-multiple-select-boxes/)是一个使用 PHP 和 mySQL 的 jquery 插件

乔什

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T13:48:59.387

听起来您正在寻找 Ajax + 服务器端语言 + MySQL 的组合。

Ajax 可以通过以下方式处理： - jQuery - Mootools - Home brew XmlHttpResponse

服务器端可以是： - C# - Java - PHP - Ruby

使用 JavaScript 附加到第一个列表框的 onChange 事件，然后您将使用 ajax 获取第二个列表框内容（基于第一个列表中的选定项）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T13:55:32.603

它可以使用 AJAX 来完成。

您需要从 Javascrpit 进行服务器端调用。并从服务器端调用返回 XML 响应。

干杯

# c# - 如何以编程方式将网站 (C#) 添加到 IIS 6.0？

> ID：1012668
> 
> 赞同：4
> 
> 时间：2009-06-18T13:38:35.570
> 
> 标签：c#, iis, web, installation

到目前为止，我们有一个 Web 应用程序，它安装在 IIS 的“默认网站”下。客户现在希望我们将其安装在不同的网站下，我们希望通过安装程序来完成。我的问题分为两部分：A）如何以编程方式在“默认网站”旁边添加另一个网站？B）我们正在使用 Windows Installer - 有没有办法及时触发我在安装程序中为 A 部分编写的任何代码，以便在新位置进行安装？看起来在游戏中覆盖 Install() 为时已晚......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T15:19:41.280

我们使用 js windows 脚本来更新分支之间的虚拟目录，我想你可以使用相同的对象来创建一个网站

```
var iisPath = "IIS://localhost/W3SVC/" + siteID;
var site = GetObject(iisPath); 
```

Microsoft 有一篇关于以编程方式配置 IIS 6 的[相当广泛的文章](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/2db9f530-2a10-40bd-b68d-667ba62ac5fe.mspx?mfr=true)。只要您的 MSI 可以调用批处理文件，这篇文章应该会有所帮助。

[本文](http://www.winscripter.com/WSH/ADSI/272.aspx)还有一个创建网站的完整脚本文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-08-30T19:18:03.673

下面是一些用于以编程方式创建站点的 C# 代码：

```
1    using System.DirectoryServices;
 2    using System;
 3    
 4    public class IISAdmin
 5    {
 6       public static int CreateWebsite(string webserver, string serverComment, string serverBindings, string homeDirectory)
 7       {
 8          DirectoryEntry w3svc = new DirectoryEntry("IIS://localhost/w3svc");
 9          
 10         //Create a website object array
 11         object[] newsite = new object[]{serverComment, new object[]{serverBindings}, homeDirectory};
 12         
 13         //invoke IIsWebService.CreateNewSite
 14         object websiteId = (object)w3svc.Invoke("CreateNewSite", newsite);
 15         
 16         return (int)websiteId;
 17      
 18      }
 19   
 20      public static void Main(string[] args)
 21      {
 22         int a = CreateWebsite("localhost", "Testing.com", ":80:Testing.com", "C:\\inetpub\\wwwroot");
 23         Console.WriteLine("Created website with ID: " + a);
 24      }
 25      
 26   } 
```

参考：[http ://www.it-notebook.org/iis/article/cs_create_website_iis6.htm](http://www.it-notebook.org/iis/article/cs_create_website_iis6.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T13:43:26.077

如果您使用 WiX 创建 MSI，请参阅[此问题](https://stackoverflow.com/questions/624918/using-wix-to-create-an-iis-virtual-directory)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T13:54:09.410

不是真正的 MSI 文件专家，但您可以使用 adsutil.vbs 通过脚本添加网站。穷人处理这个问题的方法是让您的安装程序将文件放在一个位置而不创建网站，然后使用脚本运行稍后的步骤以在该位置创建一个根目录的网站。对于像我这样讨厌安装程序接触 IIS 的笨拙的 IIS 管理员来说，将此选项设为可选的奖励积分。

# c++ - std::fstream 文件超过 2gb

> ID：1012683
> 
> 赞同：5
> 
> 时间：2009-06-18T13:40:36.520
> 
> 标签：c++, fstream

如果我有一个带有 32 位 std::streampos 的 std::fstream 实现，我应该使用什么策略？如果我想移动位置，我可以分几步完成（10gb - 10 次 +1gb）。我怎样才能获得职位？或者我应该将当前位置保留在 fstream 之外的某个变量中吗？

PS我不能改变STL的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T14:10:10.110

如果您无法添加 STL，则自己跟踪当前位置是最直接的答案。如果您的编译器支持该`long long`类型，我会选择它。

# grails - USER_HOME 用于 Windows 上的 grails

> ID：1012685
> 
> 赞同：3
> 
> 时间：2009-06-18T13:41:34.177
> 
> 标签：grails

有谁知道如何在 Windows 上设置 USER_HOME，这样当我创建一个应用程序时，它就不会在“文档和设置”中创建。我知道如何在应用程序中覆盖它，但我想更改它，使其默认为某个文件夹。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T14:06:14.050

默认情况下，用户主目录由 Java 系统属性 user.home 定义。使用以下 groovy 代码，您可以获得它：

System.getProperties('user.home')

通过使用 System.setProperty(key, value) 您可以根据需要设置 USER_HOME。

# java - NTEventLogAppender 能否在 Windows Server 2008 上运行？

> ID：1012688
> 
> 赞同：0
> 
> 时间：2009-06-18T13:42:22.007
> 
> 标签：java, windows-server-2008, log4j

我找不到任何关于支持 log4j NTEventLogAppender 的 Windows 版本的任何参考。我对它是否适用于 Windows Server 2008 特别感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-09-28T18:16:44.523

考虑[log4jna](http://log4jna.codeplex.com)，它是 NTEventLogAppender 的替代实现，不需要本机 32 位与 64 位 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-05T11:11:29.910

NTEventLogAppender 确实可以在 Windows Server 2008 上运行。但是，我对 64 位版本特别感兴趣，并且开箱即用的 log4j 不支持这一点。我不得不在[这个](https://issues.apache.org/bugzilla/show_bug.cgi?id=44386)log4j 错误上使用附件中的代码。

# algorithm - A* 启发式，高估/低估？

> ID：1012691
> 
> 赞同：23
> 
> 时间：2009-06-18T13:42:53.877
> 
> 标签：algorithm, search, graph, artificial-intelligence, a-star

我对高估/低估这些术语感到困惑。我完全了解 A* 算法的工作原理，但我不确定高估或低估启发式算法的影响。

当您采取直接鸟瞰线的平方时是否高估了？为什么它会使算法不正确？相同的启发式用于所有节点。

当您取直接鸟瞰线的平方根时是否低估了？为什么算法仍然正确？

我找不到一篇解释得很好很清楚的文章，所以我希望这里有人有一个很好的描述。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-06-18T14:11:00.747

当启发式的估计值高于实际的最终路径成本时，您就高估了。当它较低时你低估了（你不必低估，你只需要不要高估；*正确*的估计很好）。如果您的图表的边成本都是 1，那么您给出的示例将提供高估和低估，尽管普通坐标距离在笛卡尔空间中也很有效。

高估并不完全使算法“不正确”；这意味着您不再具有*可接受的启发式*，这是保证 A* 产生最佳行为的条件。使用不可接受的启发式算法，该算法最终可能会做大量多余的工作来检查它应该忽略的路径，并且可能会因为探索这些路径而找到次优路径。这是否真的发生取决于您的问题空间。之所以会发生这种情况，是因为路径成本与估计成本“脱节”，这实质上使算法搞砸了哪些路径比其他路径更好的想法。

我不确定您是否会找到它，但您可能想查看[Wikipedia A* 文章](http://en.wikipedia.org/wiki/A*)。我提到（和链接）主要是因为谷歌几乎不可能做到这一点。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-06-18T14:21:35.780

来自[维基百科 A* 文章](http://en.wikipedia.org/wiki/A*_search_algorithm)，算法描述的相关部分是：

> 该算法继续进行，直到目标节点的***f***值低于队列中的任何节点（或直到队列为空）。

关键思想是，在低估的情况下，只有当 A* 知道路径的总成本将超过通往目标的已知路径的成本时，它才会停止探索通往目标的潜在路径。由于路径成本的估计值总是小于或等于路径的实际成本，因此只要估计成本超过已知路径的总成本，A* 就可以丢弃一条路径。

由于高估，A* 不知道何时可以停止探索潜在路径，因为可能存在实际成本较低但估计成本高于当前已知目标路径的路径。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-05-05T22:00:35.700

## 简短的回答

@chaos 的回答有点误导 imo（可以突出显示）

> 高估并不完全使算法“不正确”；这意味着您不再具有可接受的启发式，这是保证 A* 产生最佳行为的条件。使用不可接受的启发式算法，该算法最终**可能会**做大量多余的工作

正如@AlbertoPL 暗示的那样

> 您可以通过高估更快地找到答案，但您可能找不到最短路径。

最后（除了数学最优），最优解很大程度上取决于你是否考虑计算资源、运行时间、特殊类型的“地图”/状态空间等。

## 长答案

作为一个例子，我可以考虑一个实时应用程序，其中机器人通过使用高估启发式算法更快地到达目标，因为提前开始的时间优势大于采用最短路径但等待更长时间计算此解决方案的时间优势。

为了给你一个更好的印象，我分享一些我用 Python 快速创建的示例性结果。结果源于相同的 A* 算法，只是启发式不同。每个节点（网格单元）都有边缘到所有八个邻居，除了墙壁。对角边成本 sqrt(2)=1.41

第一张图片显示了一个简单示例案例的算法返回路径。您可以从高估启发式（红色和青色）中看到一些次优路径。另一方面，有多个最佳路径（蓝色、黄色、绿色），这取决于首先找到哪一个的启发式方法。

当达到目标时，不同的图像显示所有展开的节点。颜色显示使用此节点的估计路径成本（考虑从起点到此节点的“已采用”路径；从数学上讲，它是迄今为止的成本加上该节点的启发式）。在任何时候，算法都会扩展具有最低估计总成本的节点（如前所述）。

![路径](../Images/b238aa72439efbfce0e15538f589cb6b.png)

**1\. 零**（蓝色）

*   对应于 Dijkstra 算法
*   扩展节点：2685
*   路径长度：89.669

![零](../Images/e8ccc886a9a29b2c1f9fa02386e03fb9.png)

**2\. 乌鸦飞翔**（黄色）

*   扩展节点：658
*   路径长度：89.669

![](../Images/2560feac65bcc91363f3ca901d6cc7c5.png)

**3\. 理想**（绿色）

*   没有障碍物的最短路径（如果你遵循八个方向）
*   *在不高估的情况下尽可能高的估计*（因此是“理想的”）
*   扩展节点：854
*   路径长度：89.669

![](../Images/9306cca9a10334b51e8b8c90781103b1.png)

**4\. 曼哈顿**（红色）

*   没有障碍物的最短路径（如果你不沿对角线移动；换句话说：“对角线移动”的成本估计为 2）
*   高估
*   扩展节点：562
*   路径长度：92.840

![](../Images/f7a73a717fd4aa1126c5874364795f08.png)

**5\. 乌鸦飞十倍**（青色）

*   高估
*   扩展节点：188
*   路径长度：99.811

![](../Images/7ef40803960973b2c403219e9105ff11.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-12-18T14:43:16.627

# 直观的答案

为了使 A* 正常工作（始终找到“最佳”解决方案，而不仅仅是任何解决方案），您的估计函数需要是**乐观**的。

乐观在这里意味着你的期望**总是**比现实更好。

乐观主义者会尝试许多最终可能令人失望的事情，但他们会找到所有好的机会。

悲观者期待糟糕的结果，因此不会尝试很多事情。因此，他们可能会错过一些黄金机会。

所以对于 A* 来说，乐观意味着**总是**低估成本（即“可能没那么远”）。当你这样做时，一旦你找到了一条路径，那么你可能仍然会对几个未探索的选项感到兴奋，这可能会更好。这意味着您不会停留在第一个解决方案上，而是仍然尝试其他解决方案。大多数可能会令人失望（不是更好），但它保证您总能找到最佳解决方案。当然，尝试更多选项需要更多的工作（时间）。

**悲观**的A * 总是会高估成本（例如“那个选项可能很糟糕”）。一旦它找到了解决方案并且知道了路径的真实成本，其他所有路径都会看起来更糟（因为估计总是比现实更糟），一旦找到目标，它就永远不会尝试任何替代方案。

最有效的 A* 永远不会低估，而是完美地估计或略微过度乐观。那你就不会天真去尝试太多不好的选择了。

给大家上一堂很好的课。永远保持乐观！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-18T13:50:18.573

据我所知，您通常希望低估，以便您仍然可以找到最短路径。您可以通过高估更快地找到答案，但您可能找不到最短路径。因此，为什么高估是“不正确的”，而低估仍然可以提供最佳解决方案。

很抱歉，我无法提供有关鸟瞰线的任何见解...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-10T06:16:12.403

考虑启发式，实际成本从`f(x)=g(x)+h(x)`哪里到，预测成本从哪里到。假设最优成本为：`g(x)``start-node``current-node``h(x)``current-node``goal``R`

1.  这在搜索的**早期阶段**`h(x)`有所不同。给定三个节点 A,B,C

     **```
    (*)                               => current pos: A
     A -------> B - 。。。 -> C
     |_______________________|        => the prediction range of h(x) 
    ```

    一旦你踩到 B，从 A 到 B 的成本是**真值**，预测`h(x)`不再包括它：

    ```
     (*)                    => current pos: B
     A -------> B - 。。。 -> C
                |____________|        => the prediction range of h(x) 
    ```** 
***   当我们说**低估**时，它意味着你的`h(x)`意志在前进`f(x) < R`的`x`路上`goal`。

    *   **高估**确实使算法**不正确**：

    假设`R`是`19`。鉴于这两个成本`20`，`21`是**已经达到**目标的路径的成本：

    ```
    Front                  Rear
     -------------------------        => This is a priority queue PQ.
    | 20 | 20 | 30 | ... | 99 |
      ^--------                       => This is the "fake" optimal. 
    ```

    但是说`f(y)=g(y)+h(y)`，并且`y`确实在实现最优成本的正确路径上`R`，但是由于`h(y)`被**高估了**，所以`f(y)`当前`30`在`PQ`，所以在我们可以更新`30`到之前，算法已经从 中`19`弹出并错误地假设它是“最佳”解决方案。`20``PQ`**

# .net - 带有 WinForms .NET 时间线的交互式图表

> ID：1012695
> 
> 赞同：2
> 
> 时间：2009-06-18T13:43:33.580
> 
> 标签：.net, winforms, controls, charts, components

我正在寻找支持时间线的 WinForms .NET 交互式图表控件。

交互式我的意思是 - 允许用户抓住栏的顶部并通过上下拖动来更改值。在某些方面，该栏的行为类似于水平滑块

我所说的时间线是指允许用户垂直滚动浏览回来和未来数据的东西。

你怎么看，这样的东西已经存在了吗？

干杯，

斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-06-20T19:48:54.037

我认为Software Siglo XXI 的**Super 2d/3d Graph Library**可以满足您的需求。您可以拖动垂直条并调整它们的值等等。

这是[链接](http://www.softwaresigloxxi.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-29T14:16:55.697

看看[ZedGraph](http://zedgraph.org)。它具有一些交互功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T19:35:33.473

我曾经使用过一家名为 Steema 的公司的控件，它允许您以交互方式操作图表。该库被称为 TeeChart。

想想看，National Instruments Measurement Studio 库中的一些图表控件还允许您以交互方式操作图形。

# ruby - 用于 Web 开发的最佳 Ruby 框架

> ID：1012696
> 
> 赞同：2
> 
> 时间：2009-06-18T13:43:35.903
> 
> 标签：ruby, frameworks

我正在做一个网络项目。我想在 ruby​​ 中实现相同的功能。我知道像merb，sinatra这样的ruby框架。只是我想知道哪个框架最适合使用 ruby​​ 开发基于 Web 的应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-18T13:48:35.660

Rails 是最古老、最成熟的，它有很好的文档和书籍。虽然它不被认为是轻量级的，并且有很多你可能不想使用的依赖项/包含的东西。Merb 更轻量级，具有插件架构，并且更简洁，但它的文档几乎不存在，在网上搜索基于 merb 的东西会得到基于 0.x 的答案，其中大部分已经过时.

如果您从基于 ruby​​ 的 Web 项目开始，请使用 rails。一段时间后，我建议切换到 merb，因为它更干净，但前提是您不关心蹩脚的文档。

最终 rails 3 和 merb 2 将合并，这可能会为您带来两全其美的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T13:44:50.457

试试[Rails](http://rubyonrails.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T13:45:22.843

ruby on rails (rubyonrails.org) 可能是最简单和最好的，但如今几乎所有框架都提供相同的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T13:48:37.220

如果你关心就业市场，那就选择 Rails。您不会找到很多其他框架的 Ruby 职位发布。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T13:46:37.630

都是web框架，所以都*适合*。至于哪个最好，那充其量是一个主观的话题。我会尝试 Ruby on Rails，因为它拥有最大的社区，当您构建应用程序时，这可能是天赐之物。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-18T14:24:07.553

Ruby on Rails 和 Merb。

后来在 Rails3 上（Ruby on Rails 和 Merb 的合并）

# silverlight - SL3 表单中的不同数据上下文

> ID：1012707
> 
> 赞同：1
> 
> 时间：2009-06-18T13:45:48.897
> 
> 标签：silverlight, data-binding, silverlight-3.0, datacontext

我编写了一个自定义 Silverlight 3 控件，它使用一个类作为其数据上下文（MVVM 模式）。我想通过 XAML 将此控件放在另一个控件（窗体）上。子控件公开了一个依赖属性，当通过 XAML 设置时，它将使其显示详细信息。

所以一个例子是子控件显示订单详细信息数据，我想把它放在一个显示用户订单的表单上。当您选择一个订单时，父控件（订单列表）上的选定项值是绑定到子控件的数据，以显示详细信息。

问题是子控件的依赖属性的 OnChanged 处理程序永远不会被调用。如果我没有在孩子上设置数据上下文（因此它使用父数据上下文）一切正常，但是当我设置不同的数据上下文时，它就会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-06T20:02:11.000

所以我想了更多，我理解正在发生的事情，但我认为它非常混乱，而且做得不对。如果我在主页中的控件上进行数据绑定，它应该使用该页面的上下文来进行绑定。我在控件内部进行的绑定应该使用控件的上下文。

无论我将绑定表达式放在哪里，它现在的工作方式都使用控件的上下文（除非我正在进行 E2E 绑定，然后它使用主页的上下文）。这对我来说很愚蠢。但至少我现在明白了。

我使用元素到元素绑定解决了这个问题，并让它工作。我希望 SL 团队会改变这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T14:21:00.727

理想情况下，您的 ViewModel 将用于外部 UserControl，而 ViewModel 上的属性将是 Inner/Child userControl 的 DataContext

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T19:02:36.797

确实，当父控件的 DataContext 设置时，它会向下传播到其所有子控件。但是子控件可以选择通过设置自己的 DataContext 来覆盖此行为（您在示例中似乎正在这样做）。因此，根据偏好规则，子控件的 DataContext 被赋予更多的偏好，因此它会覆盖父控件的。此外，由于孩子的 DataContext 在最初设置后永远不会改变，因此 DP 永远不会被调用。

# c# - DataGridView 选定行向上和向下移动

> ID：1012708
> 
> 赞同：15
> 
> 时间：2009-06-18T13:46:35.337
> 
> 标签：c#, .net, winforms, collections, datagridview

如何允许上移或下移 DataGridView (DGV) 中的选定行。我以前用 ListView 做过这个。不幸的是，对我来说，更换 DGV 不是一种选择（*诅咒*）。顺便说一下，DGV 数据源是一个通用集合。

DGV 的侧面有两个按钮，是的，UP 和 Down。谁能帮我指出正确的方向。如果有帮助的话，我确实有用于 ListView 的代码（它对我没有帮助）。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-03-29T17:43:19.300

只是为了扩展 Yoopergeek 的答案，这就是我所拥有的。我没有使用数据源（数据在表单关闭时被删除到注册表，并在表单加载时重新加载）

此示例将防止行从网格中移出和丢失，并重新选择该人所在的单元格。

为了使复制/粘贴更简单，我进行了修改，因此您只需将“gridTasks”更改为 DataGridView 的名称，而不是在整个代码中重命名它。

**此解决方案仅适用于选定的单个单元格/行。**

```
private void btnUp_Click(object sender, EventArgs e)
{
    DataGridView dgv = gridTasks;
    try
    {
        int totalRows = dgv.Rows.Count;
        // get index of the row for the selected cell
        int rowIndex = dgv.SelectedCells[ 0 ].OwningRow.Index;
        if ( rowIndex == 0 )
            return;
        // get index of the column for the selected cell
        int colIndex = dgv.SelectedCells[ 0 ].OwningColumn.Index;
        DataGridViewRow selectedRow = dgv.Rows[ rowIndex ];
        dgv.Rows.Remove( selectedRow );
        dgv.Rows.Insert( rowIndex - 1, selectedRow );
        dgv.ClearSelection();
        dgv.Rows[ rowIndex - 1 ].Cells[ colIndex ].Selected = true;
    }
    catch { }
}

private void btnDown_Click(object sender, EventArgs e)
{
    DataGridView dgv = gridTasks;
    try
    {
        int totalRows = dgv.Rows.Count;
        // get index of the row for the selected cell
        int rowIndex = dgv.SelectedCells[ 0 ].OwningRow.Index;
        if ( rowIndex == totalRows - 1 )
            return;
        // get index of the column for the selected cell
        int colIndex = dgv.SelectedCells[ 0 ].OwningColumn.Index;
        DataGridViewRow selectedRow = dgv.Rows[ rowIndex ];
        dgv.Rows.Remove( selectedRow );
        dgv.Rows.Insert( rowIndex + 1, selectedRow );
        dgv.ClearSelection();
        dgv.Rows[ rowIndex + 1 ].Cells[ colIndex ].Selected = true; 
    }
    catch { }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-18T14:56:50.623

这应该有效。我使用 BindingSource 而不是将我的 List 直接绑定到 DataGridView：

```
 private List<MyItem> items = new List<MyItem> {
        new MyItem {Id = 0, Name = "Hello"},
        new MyItem {Id = 1, Name = "World"},
        new MyItem {Id = 2, Name = "Foo"},
        new MyItem {Id = 3, Name = "Bar"},
        new MyItem {Id = 4, Name = "Scott"},
        new MyItem {Id = 5, Name = "Tiger"},
    };

    private BindingSource bs;
    private void Form1_Load(object sender, EventArgs e)
    {
        bs = new BindingSource(items, string.Empty);
        dataGridView1.DataSource = bs;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (bs.Count <= 1) return; // one or zero elements

        int position = bs.Position;
        if (position <= 0) return;  // already at top

        bs.RaiseListChangedEvents = false;

        MyItem current = (MyItem)bs.Current;
        bs.Remove(current);

        position--;

        bs.Insert(position, current);
        bs.Position = position;

        bs.RaiseListChangedEvents = true;
        bs.ResetBindings(false);
    }

    private void button2_Click(object sender, EventArgs e)
    {
        if (bs.Count <= 1) return; // one or zero elements

        int position = bs.Position;
        if (position == bs.Count - 1) return;  // already at bottom

        bs.RaiseListChangedEvents = false;

        MyItem current = (MyItem)bs.Current;
        bs.Remove(current);

        position++;

        bs.Insert(position, current);
        bs.Position = position;

        bs.RaiseListChangedEvents = true;
        bs.ResetBindings(false);
    }

    public class MyItem
    {
        public int Id { get; set; }
        public String Name { get; set; }
    } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-06-18T13:57:49.870

如果您以编程方式更改集合中项目的顺序，则 DGV 应自动反映这一点。

邋遢、半途而废的例子：

```
List<MyObj> foo = DGV.DataSource;
int idx = DGV.SelectedRows[0].Index;
int value = foo[idx];
foo.Remove(value);
foo.InsertAt(idx+1, value) 
```

其中一些逻辑可能是错误的，这也可能不是最有效的方法。此外，它没有考虑多行选择。

嗯，最后一件事，如果您使用的是标准列表或集合，这将不会那么顺利。List 和 Collection 不会发出 DGV 认为对数据绑定有用的事件。每次更改集合时都可以“打嗝”数据绑定，但更好的解决方案是使用 System.ComponentModel.BindingList。当您更改 BindingList 的顺序时，DGV 应自动反映更改。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-14T16:49:38.150

大多数帖子在这里都有一个更简单的方法（在我看来）。执行“向上”按钮单击的操作基本上只是与上面的行交换。如果您自己控制值（如问题所述），那么您只需要交换行的值。快速简单！

注意：这仅在数据网格上禁用多选时有效！如您所知，我只关注 SelectedRows 集合中索引 0 处的项目。

这是我使用的：

```
 private void btnUp_Click(object sender, EventArgs e)
    {
        var row = dgvExportLocations.SelectedRows[0];

        if (row != null && row.Index > 0)
        {
            var swapRow = dgvExportLocations.Rows[row.Index - 1];
            object[] values = new object[swapRow.Cells.Count];

            foreach (DataGridViewCell cell in swapRow.Cells)
            {
                values[cell.ColumnIndex] = cell.Value;
                cell.Value = row.Cells[cell.ColumnIndex].Value;
            }

            foreach (DataGridViewCell cell in row.Cells)
                cell.Value = values[cell.ColumnIndex];

            dgvExportLocations.Rows[row.Index - 1].Selected = true;//have the selection follow the moving cell
        }
    } 
```

要执行“向下”单击，您也可以执行相反的操作，相同的逻辑

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-03T17:24:37.660

首先填充你的datagridview，例如你有3列的表

```
DataTable table = new DataTable();
table.Columns.Add("col1");
table.Columns.Add("col2");
table.Columns.Add("col3");
foreach (var i in yourTablesource(db,list,etc))
{
  table.Rows.Add(i.col1, i.col2, i.col2);
}
datagridview1.DataSource = table; 
```

然后，在按钮上单击

```
int rowIndex;
private void btnUp_Click(object sender, EventArgs e)
{
    rowIndex = datagridview1.SelectedCells[0].OwningRow.Index;
    DataRow row = table.NewRow();
    row[0] = datagridview1.Rows[rowIndex].Cells[0].Value.ToString();
    row[1] = datagridview1.Rows[rowIndex].Cells[1].Value.ToString();
    row[2] = datagridview1.Rows[rowIndex].Cells[2].Value.ToString();
    if (rowIndex > 0)
    {
        table.Rows.RemoveAt(rowIndex);
        table.Rows.InsertAt(row, rowIndex - 1);
        datagridview1.ClearSelection();
        datagridview1.Rows[rowIndex - 1].Selected = true;
    }
} 
```

对按下按钮做同样的事情，只需在您的方法中更改`row index`为`rowIndex - 1``rowindex + 1``buttonDown_Click`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-11-28T20:52:37.667

正在寻找这个向上/向下按钮的东西，很高兴我找到了这个。最好将 bs.RaiseListChangedEvents = false 语句放在 return 之后，否则它不会一直工作。

在 C#3.0 中，您可以向 BindingSource 添加两个扩展方法，如下所示：

```
public static class BindingSourceExtension
{
    public static void MoveUp( this BindingSource aBindingSource )
    {
        int position = aBindingSource.Position;
        if (position == 0) return;  // already at top

        aBindingSource.RaiseListChangedEvents = false;

        object current = aBindingSource.Current;
        aBindingSource.Remove(current);

        position--;

        aBindingSource.Insert(position, current);
        aBindingSource.Position = position;

        aBindingSource.RaiseListChangedEvents = true;
        aBindingSource.ResetBindings(false);
    }

    public static void MoveDown( this BindingSource aBindingSource )
    {
        int position = aBindingSource.Position;
        if (position == aBindingSource.Count - 1) return;  // already at bottom

        aBindingSource.RaiseListChangedEvents = false;

        object current = aBindingSource.Current;
        aBindingSource.Remove(current);

        position++;

        aBindingSource.Insert(position, current);
        aBindingSource.Position = position;

        aBindingSource.RaiseListChangedEvents = true;
        aBindingSource.ResetBindings(false);
    }
} 
```

最后是扩展方法的一个很好的用途，而不是所有那些糟糕的字符串示例.. ;-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-08-04T20:12:54.337

```
 DataGridViewRow BeginingRow = new DataGridViewRow();
   int BeginingRowIndex ;   
        private void DataGridView1_CellMouseUp(object sender, DataGridViewCellMouseEventArgs e)
    {
        if (e.Button != MouseButtons.Left ||e.RowIndex < 0 ) return;
            if (BeginingRowIndex > e.RowIndex)
            {
                DataGridView1.Rows.Insert(e.RowIndex);
                foreach (DataGridViewCell cellules in BeginingRow.Cells)
                {
                    DataGridView1.Rows[e.RowIndex].Cells[cellules.ColumnIndex].Value = cellules.Value;
                }
                DataGridView1.Rows.RemoveAt(BeginingRowIndex + 1);

            }
            else
            {
                DataGridView1.Rows.Insert(e.RowIndex +1);
                foreach (DataGridViewCell cellules in BeginingRow.Cells)
                {
                    DataGridView1.Rows[e.RowIndex+1].Cells[cellules.ColumnIndex].Value = cellules.Value;
                }
                DataGridView1.Rows.RemoveAt(BeginingRowIndex);
            }

            DataGridView1.RowsDefaultCellStyle.ApplyStyle(BeginingRow.DefaultCellStyle);
            DataGridView1.Rows[e.RowIndex].Selected = true;
    }

    private void DataGridView1_CellMouseDown(object sender, DataGridViewCellMouseEventArgs e)
    {
        if (e.Button != MouseButtons.Left ||e.RowIndex < 0 ) return;
                BeginingRowIndex = e.RowIndex;
                BeginingRow = DataGridView1.Rows[BeginingRowIndex];
                BeginingRow.DefaultCellStyle = DataGridView1.Rows[BeginingRowIndex].DefaultCellStyle;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-01T14:11:08.440

```
private void butUp_Click(object sender, EventArgs e)
{
    DataTable dtTemp = gridView.DataSource as DataTable;

    object[] arr = dtTemp.Rows[0].ItemArray;
    for (int i = 1; i < dtTemp.Rows.Count; i++)
    {
        dtTemp.Rows[i - 1].ItemArray = dtTemp.Rows[i].ItemArray;
    }
    dtTemp.Rows[dtTemp.Rows.Count - 1].ItemArray = arr;

}
private void butDown_Click(object sender, EventArgs e)
{
    DataTable dtTemp = gridView.DataSource as DataTable;

    object[] arr = dtTemp.Rows[dtTemp.Rows.Count - 1].ItemArray;
    for (int i = dtTemp.Rows.Count - 2; i >= 0; i--)
    {
        dtTemp.Rows[i + 1].ItemArray = dtTemp.Rows[i].ItemArray;
    }
    dtTemp.Rows[0].ItemArray = arr;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-06-27T13:35:14.447

这是我发现的问题的最短解决方案，我只是重构了一些代码：

[http://dotnetspeaks.net/post/Moving-GridView-Rows-Up-Down-in-a-GridView-Control.aspx](http://dotnetspeaks.net/post/Moving-GridView-Rows-Up-Down-in-a-GridView-Control.aspx)

```
<body>
<form id="form1" runat="server">
<asp:GridView ID="GridView1" Font-Names="Verdana" Font-Size="9pt" runat="server" OnRowCreated="GridView1_RowCreated"
    AutoGenerateColumns="False" CellPadding="4" BorderColor="#507CD1" BorderStyle="Solid">
    <Columns>
        <asp:TemplateField HeaderText="First Name">
            <ItemTemplate>
                <asp:Label ID="txtFirstName" runat="server" Text='<%# Eval("FirstName") %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
    <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
    <AlternatingRowStyle BackColor="White" />
</asp:GridView>

<asp:Button ID="btnUp" runat="server" Text="Up" OnClick="btnUp_Click"/>
<asp:Button ID="btnDown" runat="server" Text="Down"  OnClick="btnDown_Click" />
</form> 
```

和后面的代码......

```
public int SelectedRowIndex { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            //Test Records  
            GridView1.DataSource = Enumerable.Range(1, 5).Select(a => new
            {
                FirstName = String.Format("First Name {0}", a),
                LastName = String.Format("Last Name {0}", a),
            });
            GridView1.DataBind();
        }  
    }

    protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Attributes["onmouseover"] = "this.style.cursor='pointer'";
            e.Row.ToolTip = "Click to select row";
            e.Row.Attributes["onclick"] = Page.ClientScript.GetPostBackClientHyperlink(GridView1, "Select$" + e.Row.RowIndex);
        }
    }

    protected void btnUp_Click(object sender, EventArgs e)
    {
        var rows = GridView1.Rows.Cast<GridViewRow>().Where(a => a != GridView1.SelectedRow).ToList();
        //If First Item, insert at end (rotating positions)  
        if (GridView1.SelectedRow.RowIndex.Equals(0))
        {
            rows.Add(GridView1.SelectedRow);
            SelectedRowIndex = GridView1.Rows.Count -1;
        }
        else
        {
            SelectedRowIndex = GridView1.SelectedRow.RowIndex - 1;
            rows.Insert(GridView1.SelectedRow.RowIndex - 1, GridView1.SelectedRow);
        }
        RebindGrid(rows);
    }

    protected void btnDown_Click(object sender, EventArgs e)
    {
        var rows = GridView1.Rows.Cast<GridViewRow>().Where(a => a != GridView1.SelectedRow).ToList();
        //If Last Item, insert at beginning (rotating positions)  
        if (GridView1.SelectedRow.RowIndex.Equals(GridView1.Rows.Count - 1))
        {
            rows.Insert(0, GridView1.SelectedRow);
            SelectedRowIndex = 0;
        }
        else
        {
            SelectedRowIndex = GridView1.SelectedRow.RowIndex + 1;
            rows.Insert(GridView1.SelectedRow.RowIndex + 1, GridView1.SelectedRow);
        }
        RebindGrid(rows);
    }

    private void RebindGrid(IEnumerable<GridViewRow> rows)
    {
        GridView1.DataSource = rows.Select(a => new
        {
            FirstName = ((Label)a.FindControl("txtFirstName")).Text,
        }).ToList();

        GridView1.SelectedIndex = SelectedRowIndex;
        GridView1.DataBind();
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-05T13:35:26.407

### 标题 3

private void buttonX8_Click(object sender, EventArgs e)//down { DataGridViewX grid = dataGridViewX1; 尝试 { int totalRows = grid.Rows.Count; int idx = grid.SelectedCells[0].OwningRow.Index; if (idx == totalRows - 1 ) 返回；int col = grid.SelectedCells[0].OwningColumn.Index; DataGridViewRowCollection rows = grid.Rows; DataGridViewRow 行 = 行 [idx]; 行。删除（行）；rows.Insert(idx + 1, row); grid.ClearSelection(); grid.Rows[idx + 1].Cells[col].Selected = true;

```
 private void buttonX8_Click(object sender, EventArgs e)//down
    {
        DataGridViewX grid = dataGridViewX1;
        try
        {
            int totalRows = grid.Rows.Count;
            int idx = grid.SelectedCells[0].OwningRow.Index;
            if (idx == totalRows - 1 )
                return;
            int col = grid.SelectedCells[0].OwningColumn.Index;
            DataGridViewRowCollection rows = grid.Rows;
            DataGridViewRow row = rows[idx];
            rows.Remove(row);
            rows.Insert(idx + 1, row);
            grid.ClearSelection();
            grid.Rows[idx + 1].Cells[col].Selected = true;

        }
        catch { }
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-04-29T08:10:57.430

SchlaWiener 的回答效果很好，我只想添加一些内容：

```
private void button1_Click(object sender, EventArgs e) //The button to move up
{
    int position = bs.Position;

    //.......neglected.......

    dataGridView1.ClearSelection();
    dataGridView1.Rows[position].Selected = true;
    bs.MovePrevious();

} 
```

在底部添加这 3 行也会使选择移动（bindingSource 和 dataGridView），这样我们就可以连续单击底部以向上移动一行。

向下移动只需调用 bs.MoveNext()

（我还没有足够的声誉发表评论）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-10T20:49:42.653

支持多选的数据绑定解决方案，使用 SharpDevelop 4.4 转换为 C#。

```
<Extension()>
Sub MoveSelectionUp(dgv As DataGridView)
    If dgv.CurrentCell Is Nothing Then Exit Sub
    dgv.CurrentCell.OwningRow.Selected = True
    Dim items = DirectCast(dgv.DataSource, BindingSource).List
    Dim selectedIndices = dgv.SelectedRows.Cast(Of DataGridViewRow).Select(Function(row) row.Index).Sort
    Dim indexAbove = selectedIndices(0) - 1
    If indexAbove = -1 Then Exit Sub
    Dim itemAbove = items(indexAbove)
    items.RemoveAt(indexAbove)
    Dim indexLastItem = selectedIndices(selectedIndices.Count - 1)

    If indexLastItem = items.Count Then
        items.Add(itemAbove)
    Else
        items.Insert(indexLastItem + 1, itemAbove)
    End If
End Sub

<Extension()>
Sub MoveSelectionDown(dgv As DataGridView)
    If dgv.CurrentCell Is Nothing Then Exit Sub
    dgv.CurrentCell.OwningRow.Selected = True
    Dim items = DirectCast(dgv.DataSource, BindingSource).List
    Dim selectedIndices = dgv.SelectedRows.Cast(Of DataGridViewRow).Select(Function(row) row.Index).Sort
    Dim indexBelow = selectedIndices(selectedIndices.Count - 1) + 1
    If indexBelow >= items.Count Then Exit Sub
    Dim itemBelow = items(indexBelow)
    items.RemoveAt(indexBelow)
    Dim indexAbove = selectedIndices(0) - 1
    items.Insert(indexAbove + 1, itemBelow)
End Sub 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-03-09T14:52:56.090

```
// Down
DataGridViewRow row = new DataGridViewRow();
int index = 0;

row = dgv.SelectedRows[0];
index = dgv.SelectedRows[0].Index;
dgv.Rows.Remove(dgv.SelectedRows[0]);
dgv.Rows.Insert(index + 1, row);
dgv.ClearSelection();
dgv.Rows[index + 1].Selected = true;

// Up
DataGridViewRow row = new DataGridViewRow();
int index = 0;

row = dgv.SelectedRows[0];
index = dgv.SelectedRows[0].Index;
dgv.Rows.Remove(dgv.SelectedRows[0]);
dgv.Rows.Insert(index-1, row);
dgv.ClearSelection();
dgv.Rows[index - 1].Selected = true; 
```

其中 dgv 是您的 DataGridView。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-10-05T13:29:03.437

试试这个：

```
 private void buttonX9_Click(object sender, EventArgs e)//up
    {

        DataGridViewX grid = dataGridViewX1;
        try
        {
            int totalRows = grid.Rows.Count;
            int idx = grid.SelectedCells[0].OwningRow.Index;
            if (idx == 0)
                return;
            int col = grid.SelectedCells[0].OwningColumn.Index;
            DataGridViewRowCollection rows = grid.Rows;
            DataGridViewRow row = rows[idx];
            rows.Remove(row);
            rows.Insert(idx - 1, row);
            grid.ClearSelection();
            grid.Rows[idx - 1].Cells[col].Selected = true;

        }
        catch { }

    } 
```

# wpf - Silverlight 不透明夹

> ID：1012716
> 
> 赞同：1
> 
> 时间：2009-06-18T13:47:35.070
> 
> 标签：wpf, silverlight, opacity

可以调整剪切区域的不透明度吗？你真的可以说那些不在剪辑区域中的东西，以某种程度的不透明度显示它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T14:15:18.570

您可能需要查看不透明蒙版

[http://silverlight.net/blogs/msnow/archive/2008/08/25/terrain-tutorial-part-3-creating-smooth-tile-transitions-using-opacity-masks.aspx](http://silverlight.net/blogs/msnow/archive/2008/08/25/terrain-tutorial-part-3-creating-smooth-tile-transitions-using-opacity-masks.aspx)

[http://geekswithblogs.net/Silverlight2/archive/2008/10/22/working-with-opacity-masks.aspx](http://geekswithblogs.net/Silverlight2/archive/2008/10/22/working-with-opacity-masks.aspx)

# sql-server - 针对整个表验证 UPDATE 和 INSERT 语句

> ID：1012721
> 
> 赞同：3
> 
> 时间：2009-06-18T13:48:53.383
> 
> 标签：sql-server, sql-server-2005, validation, triggers, constraints

我正在寻找向表添加约束的最佳方法，该约束实际上是记录与该表中其余记录之间*关系的唯一索引。*

想象一下下表描述了各种守卫的巡逻（来自之前的守望者场景）

```
PK  PatrolID Integer
FK  GuardID  Integer
    Starts   DateTime
    Ends     DateTime 
```

我们从一个约束开始，指定开始和结束时间必须是合乎逻辑的：

```
Ends >= Starts 
```

但是我想添加另一个逻辑约束：一个特定的守卫（GuardID）不能同时在两个地方，这意味着对于任何记录，由开始/结束指定的时间段不应与为任何其他巡逻定义的时间段重叠同一个守卫。

我可以想到两种尝试解决此问题的方法：

创建一个 INSTEAD OF INSERT 触发器。然后，此触发器将使用游标遍历 INSERTED 表，检查每条记录。如果任何记录与现有记录冲突，则会引发错误。这种方法的两个问题是：我不喜欢在现代版本的 SQL Server 中使用游标，而且我不确定如何为 UPDATE 实现相同的逻辑。INSERTED 中的记录的复杂性也可能相互冲突。

第二种似乎更好的方法是创建一个调用用户定义函数的 CONSTRAINT，传递 PatrolID、GuardID、Starts 和 Ends。然后，该函数将执行 WHERE EXISTS 查询，检查与 GuardID/Starts/Ends 参数重叠且不是原始 PatrolID 记录的任何记录。但是，我不确定这种方法可能会产生什么潜在的副作用。

第二种方法更好吗？有没有人看到任何陷阱，例如一次插入/更新多行时（这里我担心，因为该组中的行可能会发生冲突，这意味着它们“插入”的顺序会有所不同）。有没有更好的方法来做到这一点（比如一些花哨的 INDEX 技巧？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-18T18:58:52.043

使用 after 触发器检查是否违反了重叠约束：

```
create trigger Patrol_NoOverlap_AIU on Patrol for insert, update as
    begin
    if exists (select *
        from inserted i
        inner join Patrol p
            on i.GuardId = p.GuardId
            and i.PatrolId <> p.PatrolId
        where (i.Starts between p.starts and p.Ends)
        or (i.Ends between p.Starts and p.Ends))

        rollback transaction
    end 
```

注意：在触发器中回滚事务将终止批处理。与正常的约束违规不同，您将无法捕捉到错误。

您可能需要不同的 where 子句，具体取决于您定义时间范围和重叠的方式。例如，如果您希望能够说 Guard #1 从 6:00 到 7:00 在 X，那么 Y 7:00 到 8:00 则不允许。你会想要：

```
create trigger Patrol_NoOverlap_AIU on Patrol for insert, update as
    begin
    if exists (select *
        from inserted i
        inner join Patrol p
            on i.GuardId = p.GuardId
            and i.PatrolId <> p.PatrolId
        where (p.Starts <= i.Starts and i.Starts < p.Ends)
        or (p.Starts <= i.Ends and i.Ends < p.Ends))

        rollback transaction
    end 
```

其中 Starts 是保护开始的时间，而 Ends 是保护结束后的无穷小时刻。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-18T15:13:54.693

最简单的方法是对插入使用存储过程。存储过程可以在单个语句中执行插入：

```
insert into YourTable
(GuardID, Starts, Ends)
select @GuardID, @Starts, @Ends
where not exists (
    select *
    from YourTable
    where GuardID = @GuardID
    and Starts <= @Ends
    and Ends >= @Start
)

if @@rowcount <> 1
    return -1 -- Failure 
```

根据我的经验，UDF 的触发器和约束往往变得非常复杂。它们有副作用，可能需要大量调试才能弄清楚。

存储过程可以正常工作，并且它们还有一个额外的优势，即您可以拒绝客户端的 INSERT 权限，从而使您可以对进入数据库的内容进行细粒度控制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-01T11:51:48.527

```
CREATE TRIGGER [dbo].[emaill] ON [dbo].[email]
FOR INSERT

AS

BEGIN

    declare @email CHAR(50);

    SELECT @email=i.email from inserted i;

    IF @email NOT LIKE '%_@%_.__%' 
    BEGIN
            print 'Triggered Fired';
            Print 'Invalid Emaill....';
            ROLLBACK TRANSACTION
    END 

END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T21:02:21.363

也可以使用约束来完成：

[http://www2.sqlblog.com/blogs/alexander_kuznetsov/archive/2009/03/08/storing-intervals-of-time-with-no-overlaps.aspx](http://web.archive.org/web/20180424214356/http://www2.sqlblog.com/blogs/alexander_kuznetsov/archive/2009/03/08/storing-intervals-of-time-with-no-overlaps.aspx)

# javascript - XUL Firefox 插件中的 appendChild 中断

> ID：1012722
> 
> 赞同：5
> 
> 时间：2009-06-18T13:48:59.280
> 
> 标签：javascript, firefox, firefox-addon, xul

我正在开发一个 Firefox 插件，我目前需要将菜单项动态添加到 menupopup 元素。我基本上尝试了 Mozilla 开发者中心的所有方法，但都没有奏效。

```
 function populateDropdown() {
    var counter = 0;
    for (var key in services) {
        var newMenuItem = document.createElementNS("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul", "menuitem");
        newMenuItem.setAttribute("label", services[key]['title'])

        document.getElementById("mainDropdown").appendChild(newMenuItem);
    }
} 
```

此代码在 appendChild 命令处中断。任何想法为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-19T14:57:59.490

您是否 100% 肯定 document.getElementById("mainDropdown") 返回非空结果？

试着把它分解成小块，然后添加一些调试代码：

```
var dropDown = document.getElementById("mainDropdown");
if(dropDown) {
  alert("dropDown found!");
  dropDown.appendChild(newMenuItem);
} 
```

# cryptography - 究竟什么是彩虹攻击？

> ID：1012724
> 
> 赞同：60
> 
> 时间：2009-06-18T13:49:05.520
> 
> 标签：cryptography, saltedhash, rainbowattack

我正在阅读一些关于盐和密码哈希的文章，一些人提到了彩虹攻击。彩虹攻击到底是什么，防止它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-06-18T14:02:27.113

维基百科的文章有点难以理解。简而言之，您可以将 Rainbow Table 视为一个大字典，其中包含预先计算的哈希值和计算它们的密码。

Rainbow Tables 与其他字典的区别仅在于条目的存储方式。Rainbow 表针对哈希和密码进行了优化，因此在保持良好查找速度的同时实现了极大的空间优化。但本质上，它只是一本字典。

当攻击者从您那里窃取一长串密码哈希时，他可以快速检查其中是否在彩虹表中。对于那些，Rainbow Table 也将包含它们是从哪个字符串进行哈希处理的。

当然，有太多的哈希值无法将它们全部存储在彩虹表中。因此，如果哈希不在特定表中，那么黑客就不走运了。但是，如果您的用户使用简单的英文单词并且您只对它们进行了一次哈希处理，那么好的 Rainbow Table 很可能会包含密码。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-06-18T13:50:42.940

当有人使用[Rainbow 表](http://en.wikipedia.org/wiki/Rainbow_table)来破解密码时。

如果你担心这个，你应该使用[Salt](http://en.wikipedia.org/wiki/Salt_(cryptography))。还有一个[Stack Overlow 问题](https://stackoverflow.com/questions/420843/need-some-help-understanding-password-salt)可以帮助您比维基百科更好地理解盐......

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-06-18T13:54:00.953

对于外行来说，这是[一篇关于彩虹桌的有用文章。](http://kestas.kuliukas.com/RainbowTables/)（不是说你是外行，但写得很好，简洁。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-18T14:04:01.557

从广义上讲，您对大量可能的短明文字符串（即密码）进行加密，并将加密值与明文一起存储。这使得在您拥有加密值时简单地查找明文变得（相对）简单。

这对于弱和/或未加盐的密码哈希最有用。一个流行的例子是[LAN Manager hash](http://en.wikipedia.org/wiki/LM_hash)，Windows 到 XP 的版本都使用它来存储用户密码。

请注意，即使像 LM 哈希这样简单的东西，预先计算的彩虹表也需要大量的 CPU 时间来生成并占用相当多的空间（大约 10 千兆字节的 IIRC）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-18T14:08:24.123

Rainbow Tables 基本上允许某人切实可行地存储大量预先计算的哈希值。

这使得破解您的散列密码变得容易，因为不是执行一整堆散列函数，工作已经完成，他们实际上只需要进行数据库查找。

针对这种攻击的最佳保护措施是在密码中使用盐（随机字符）。即不是存储md5（密码），而是存储md5（密码+盐），甚至更好的md5（盐+ md5（密码））。

因为即使使用彩虹表，也几乎不可能存储所有可能的加盐哈希。

顺便说一句，显然您必须将您的盐与您的哈希一起存储，以便您可以对用户进行身份验证。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-06-10T13:25:16.400

聚会迟到了，但我也知道 Rainbow Tables 是一种攻击散列/未加盐密码的方法。然而，最近在 Twitter 上分享了[http://codahale.com/how-to-safely-store-a-password/](http://codahale.com/how-to-safely-store-a-password/)，这取决于您的需求和顾虑。您可能无法通过自己的方式来安全密码存储。

我希望这对您有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-18T13:52:41.877

维基百科是你的朋友：

[http://en.wikipedia.org/wiki/Rainbow_table](http://en.wikipedia.org/wiki/Rainbow_table)

# c# - ADO.NET 数据表约束如何影响性能？

> ID：1012726
> 
> 赞同：7
> 
> 时间：2009-06-18T13:49:39.793
> 
> 标签：c#, .net, ado.net

对 DataTable 的约束（例如 PrimaryKey 和 UniqueContraint）是否会像在 SQL Server 中一样使 Select 更有效率？还是他们对数据强制执行规则的唯一目的？

```
myDT.Constraints.Add("PK", myDT.Columns["UniqueID"], true); //add a primary key
myDT.Constrinats.Add(new UniqueConstraint(new DataColumn[] { //add a unique constraint for UserID
    myDT.Columns["UserID"], myDT.Columns["UniqueID"]
})); 
```

`UniqueID`在通过or查找 DataTable 中的数据时，这些示例是否可能具有更好的性能`UserID`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-18T14:07:26.653

我认为您将主键和约束（业务领域模型）的使用与索引（性能）的使用混淆了。

外键可以影响优化器，通常在外键上创建索引。

在 SQL Server 世界中，主键经常与聚集索引混淆，因为比代理键（想想自动增量标识列）更常被选择为主键和聚集索引。

本文可能会感兴趣：[ADO.NET 2.0 中的 DataSet 和 DataTable](http://msdn.microsoft.com/en-us/magazine/cc163709.aspx)。

回应您的评论：

> **使用 DataView 进行重复的非主键搜索** 如果您需要使用非主键数据重复搜索，请创建一个具有排序顺序的 DataView。这将创建一个可用于执行搜索的索引。这最适合重复搜索，因为创建索引需要一些成本。
> 
> DataView 对象公开 Find 和 FindRows 方法，以便您可以查询基础 DataTable 中的数据。如果您只执行单个查询，则创建索引所需的处理会降低使用索引获得的性能。
> 
> 创建 DataView 对象时，请使用 DataView 构造函数，该构造函数将 Sort、RowFilter 和 RowStateFilter 值作为构造函数参数以及基础 DataTable。使用 DataView 构造函数可确保索引构建一次。如果您创建一个空的 DataView 并在之后设置 Sort、RowFilter 或 RowStateFilter 属性，则索引至少会构建两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T14:04:26.080

一般来说，约束会减慢速度。但是对于选择唯一约束可以加快速度（但我可以找到一个 MS 参考），它也可能基于选择受到限制。我发现的大多数参考资料都谈到了减慢速度的限制。

因此，在您的情况下，它可以提高性能。

[http://msdn.microsoft.com/en-us/library/49z48hxc.aspx](http://msdn.microsoft.com/en-us/library/49z48hxc.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T14:09:27.647

`DataTable`s 是使用[B 树](http://en.wikipedia.org/wiki/B-Tree)（或其一些变体）实现的。快速浏览一下 Reflector 会发现，在一个类中有一个`Index`类加`LiveIndexes`属性`DataTable`，这意味着有一些索引，但我真的不知道它们在哪里。

根据我（真正有限的）经验：PK 查询非常快。

# nhibernate - 有哪些使用 nHibernate 的 web 2.0 网站的好例子？

> ID：1012728
> 
> 赞同：1
> 
> 时间：2009-06-18T13:50:03.443
> 
> 标签：nhibernate

是否有任何使用 nHibernate 的实时 web 2.0 类型的应用程序？

在高流量网站/服务上寻找一些真实世界的使用情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T19:24:20.780

查看[NHibernate 使用调查](https://forum.hibernate.org/viewtopic.php?f=25&t=952439)中的帖子。

从调查中可以看出，[FoodCandy](http://www.foodcandy.com/)（“食品社交网络”）应该是用 NHib 构建的，并且能够扩展到数百万用户。

# c# - 如何使用 C# 和 iTextSharp 在 pdf 中添加图像？

> ID：1012732
> 
> 赞同：2
> 
> 时间：2009-06-18T13:50:26.420
> 
> 标签：c#, .net, pdf, itextsharp

我需要您的帮助，将图像添加到 PDF。

我在用着：

```
string imgPath2 = localPath + "\\TempChartImages\\" + LegendPath;
img2.Save(imgPath2);
ith.WriteImage(imgPath2, 80); 
```

但是这段代码给了我错误：

> 使用未分配的局部变量 img2

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-19T15:41:37.593

当您声明一个变量时，在您的情况下为 img2，没有分配一个值，它绝对没有指向任何东西。确保在使用 img2 之前将其初始化为某些内容。

我认为您希望将您的`img2.Save`线路更改为：

```
Image img2 = Image.FromFile(yourInitialImageHere);  // You could be reading from memory as well.
img2.Save(imgPath2); 
```

不过，由于您的代码片段非常模糊，我可能会走得很远。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T13:58:47.433

[这是关于图像](http://itextsharp.sourceforge.net/tutorial/ch06.html)的 iTextSharp 教程。在没有看到更多代码的情况下，很难从中判断您需要哪段代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-08-27T02:46:40.073

这是一种预感，但如果您在`img2`Try-Catch 块内分配值，您可能会遇到阻止分配发生的异常。例如：

```
var img2;
try
{
    var x = 5 / 0; // Generate a DivideByZero exception
    img2 = GetImage(); // <-- the above exception will prevent this code from executing
}
catch
{
}
img2.Save(imgPath2); <-- img2 wasn't assigned, so another exception will occur 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-01-16T07:26:11.420

我相信你必须先实例化图像。

```
Image img2 = new Image(); 
```

它解决了我的问题。希望它能解决你的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-18T13:52:39.303

为此，您将需要一些第三方工具。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-01-16T14:47:27.070

您必须创建图像的 getinstance。

```
iTextSharp.text.Image img = iTextSharp.text.Image.GetInstance("path of the image"); 
```

# c# - 异步方法似乎没有完全执行

> ID：1012733
> 
> 赞同：0
> 
> 时间：2009-06-18T13:50:33.627
> 
> 标签：c#, .net, web-services, asynchronous

我有一个流程，正在处理对我们系统的传入用户请求。我还想在不影响主进程响应能力的情况下将一些关于请求的元数据添加到数据库表中。为了实现这一点，我添加了对异步方法的调用，如下所示：

```
public static ReturnObject ResponsiveMethod(string ip, string code)
{
   // ... some reasonably quick code

   IPDetail.InsertAsync(ip);  // <-- call to the async method

   return new ReturnObject(code);
} 
```

InsertAsync() 方法如下所示：

```
 public static void InsertAsync(string ipAddress)
   {
        Action action = () => IPDetail.Insert(ipAddress);
        action.BeginInvoke(aResult => Log.Debug("Completed Insert"), null);
   } 
```

最后，通常称为 Insert() 的非异步方法：

```
 private static void Insert(string ipAddress)
    {
        ApplicationContextHelper.LoadApplicationContext();
        var helper = new GeoLocationHelper();
        var result = helper.GetDetailsFromIP(ipAddress);
        Log.InfoFormat("Succesfully retreived IP data {0}.", ipAddress);
        result.Save();
    } 
```

在我的单元测试中， InsertAsync() 调用完美。在 Insert() 中的方法调用内部，发生了许多操作，这些操作通过日志记录进行了详细说明，并且所有预期的日志消息都在那里，以及 result.Save() 方法的最终结果。

但是，我们有一个 web 服务，它利用了上面的 ResponsiveMethod() 方法，由于某种原因，异步调用没有完成。LoadApplicationContext() 方法中的所有日志记录都被触发，但之后没有与 Insert() 相关的日志活动，并且 result.Save() 永远不会被执行。

***修改后的摘要问题更简洁***

我目前的想法是webservice已经完成了它的任务，调用异步的线程已经不存在了。这会阻止异步调用完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T14:05:41.943

我以前从未使用过 BeginInvoke，但通常在有 Begin* 的地方，您还需要对应的 End*。请添加一个，以及正确的异常处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T14:01:22.640

我的第一个想法是，由于某种原因，您可能会在 Web 服务场景中的异步调用中引发异常。我知道您可能已经将其缩减以将其发布在网络上，但是其中是否有任何“或多或少不会失败”的错误处理代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T14:16:13.560

您是否依赖 Async 方法调用中调用者的身份？从 Web 服务调用时，身份可能会丢失。

# wpf - WPF：只读说文本框和绑定

> ID：1012740
> 
> 赞同：8
> 
> 时间：2009-06-18T13:51:29.743
> 
> 标签：wpf, binding, textbox

假设我有一个网格，我单击一个对象，它会显示在详细信息屏幕中。我不希望用户编辑一些数据，所以我将 TextBox 设置为禁用？绑定会起作用吗？基本上我想要的是 TextBox 变灰或禁用？在WPF中怎么样？有人可以解释吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-06-18T14:06:42.363

是的，绑定将与禁用的文本框一起使用。要禁用文本框，您有三个选项：

*   将 IsReadOnly 属性设置为 true。这不会影响文本框的外观，但会阻止用户更改其中的值。

*   将 IsEnabled 设置为 false。这将使文本框变灰并停止接收焦点

*   使用标签或文本块。这会将文本放置在屏幕上，而不会出现在可编辑控件中。

至于绑定，无论你做什么，它都会起作用。在 Xaml 或代码隐藏中正常设置绑定，并且当支持属性像往常一样更改时，该值将更新（前提是您已实现 INotifyPropertyChanged，否则只会设置一次）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-18T13:53:48.940

TextBox上有一个`IsReadOnly`属性，设置为true即可

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-18T13:56:22.353

我会使用 <TextBlock/> 或 <Label/> 而不是 <TextBox/> 来显示静态数据。

# c++ - 代码覆盖率不好

> ID：1012741
> 
> 赞同：1
> 
> 时间：2009-06-18T13:51:50.863
> 
> 标签：c++, c, code-coverage

我已经在我的计算机上安装了仅使用 UnitTest 许可证（仅 Unit Test 许可证）作为 Visual Studio 2005 插件（ cpptest_7.2.11.35_win32_vs2005_plugin.exe ）的 C++Test。

我有一个类似于以下的示例：

```
bool MyFunction(... parameters... )
{
    bool bRet = true;

        // do something
    if( some_condition )
    {
        // do something
        bRet = CallToAFunctionThatCanReturnBothTrueAndFalse....
    }
    else
    {
        bRet = false;
        // do something
    }

    if(bRet == false)
    {
        // do something
    }

    return bRet;
} 
```

就我而言，在运行覆盖工具后，我得到以下结果（类似于前面提到的功能）：

```
[LC=100 BC=100 PC=75 DC=100 SCC=100 MCDC=50 (%)] 
```

我真的不明白为什么我在 PathCoverage (PC) 上没有 100% 的覆盖率。此外，如果有 C++Test Parasoft 经验的人可以为我解释 MCDC 覆盖率低，那就太好了。

我应该怎么做才能增加覆盖率？因为在这种情况下我没有想法。欢迎对文档（某些部分）的指示。

谢谢，

尤利安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T13:58:15.313

对于您正在使用的特定工具，我无能为力，但路径覆盖的一般想法是应该执行通过代码的每个可能路径。

如果您通过程序绘制流程图，在每个 if/break/continue 处进行分支等，您应该看到您的测试在程序中采用了哪些路径。要获得 100%（这不是完全必要的，也不能保证完美的测试），您的测试必须沿着代码的每个分支进行，执行每一行。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T14:09:48.207

这是关于各种类型的代码覆盖率的一个很好的参考：[http](http://www.bullseye.com/coverage.html) ://www.bullseye.com/coverage.html 。

**MCDC**：要提高 MCDC 覆盖率，您需要查看`some_condition`. 假设它是一个复杂的布尔表达式，您需要查看您是否正在执行必要的值组合。具体来说，每个布尔子表达式都需要进行真假。

**路径**：上面链接中提到的作为路径覆盖的缺点之一是许多路径是不可能行使的。您的示例可能就是这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T14:03:36.533

您至少需要两个测试用例才能获得 100% 的覆盖率。一个 some_condition 为真，一个不为真。如果你有，你应该得到 100% 的覆盖率。

尽管您应该看到 100% 的覆盖率是完美的。在这种情况下，您需要 3 次测试，以便可以测试所有组合。查找圈复杂度以了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T14:21:22.677

通过该函数有四个假设路径。每个 if 子句都将路径数加倍。每个 if 语句都是一个分支，您可以在其中采用两种不同的方式。因此，每当您的工具遇到“if”时，它假定代码可以采用“true”分支或“false”分支。然而，这并不总是可能的。考虑：

```
bool x = true;
if (x) {
    do_something();
} 
```

if 语句的“假”分支无法访问。这是一个明显的例子，但是当您考虑多个 if 语句时，要判断一条路径是否可行变得越来越困难。

您的代码中只有三个可能的路径。在第一个 if 语句中采用“false”分支和在第二个中采用“true”分支的路径是无法到达的。

你的工具不够聪明，无法意识到这一点。

话虽如此，即使该工具是完美的，在实际应用中也不太可能获得 100% 的路径覆盖率。但是，非常低的路径覆盖率肯定表明您的方法具有过高的圈复杂度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T14:32:47.223

就个人而言，我认为以任何功能开始都是不好的形式

布尔 retCode = true;

您正在明确假设它会默认成功，然后在某些条件下失败。

追随你的程序员不会做出同样的假设。

快速失败，早点失败。

正如其他人所说，如果你想测试失败案例，你必须编写失败的测试代码。

# c - 如何包含 math.h #include 在内核源文件上？

> ID：1012742
> 
> 赞同：7
> 
> 时间：2009-06-18T13:52:14.280
> 
> 标签：c, math, module, kernel

我正在尝试将 math.h 包含在我的 Linux 内核模块中。如果我使用，

```
#include '/usr/include/math.h' 
```

它给了我这些错误：

```
error: features.h: No such file or directory
error: bits/huge_val.h: No such file or directory
error: bits/mathdef.h: No such file or directory
error: bits/mathcalls.h: No such file or directory 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-18T14:14:45.920

您不能在内核模块中使用 C 库，对于数学库部分更是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-18T14:23:38.100

您不能在内核空间中包含用户空间 C 模块。你也确定要这样做吗？该线程可能对[http://kerneltrap.org/node/16570](http://kerneltrap.org/node/16570)有所帮助。您可以在内核中执行数学函数，只需在[http://lxr.linux.no/](http://lxr.linux.no/)上搜索您需要的函数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-18T14:43:10.637

标准库在内核中不可用。这包括 libc、libm 等。虽然这些库**中的一些函数是**在内核空间中实现的，但有些不是。如果不知道你想调用什么，就不可能确定你是否应该在内核空间中做你想做的事情。

我应该进一步指出，内核无法访问 FPU。这是为了在切换任务时节省时间（因为保存 FPU 寄存器会在执行上下文切换时增加不必要的开销）。如果你真的想要的话，你**可以**从内核空间访问 FPU，但你**需要非常小心，不要在这样做时破坏用户空间的 FPU 寄存器。**

编辑：[这](http://www.mail-archive.com/linuxppc-embedded@ozlabs.org/msg01260.html)比我更好地总结了关于 FPU 的警告。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-18T21:58:53.807

内核不支持浮点运算。这是因为从内核上下文切换到用户上下文时，必须保存寄存器。如果内核使用浮点，那么浮点寄存器也必须被保存，这将导致每次上下文切换的性能不佳。因此，因为很少需要浮点，尤其是在内核中不支持它。

如果你真的必须：

*   也许你可以编译你自己的支持浮点的内核
*   您可以在浮点操作中阻止上下文切换
*   最好的办法是使用定点算法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-18T13:56:11.293

AFAIK 内核空间与用户空间是分开的，源代码也应该如此。/usr/include 用于一般编程。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-18T14:12:23.523

[这](http://mail.rtai.org/pipermail/rtai/2007-August/017847.html)表明在内核中进行浮点数学运算并不像在用户空间代码中那样简单。[另一个](http://lwn.net/Articles/245291/)例子表明这很难。

仍在寻找更明确的答案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-18T14:41:25.833

非常感谢您的评论

使用数学函数

是否可以制作平面 C 应用程序并从内核源文件传递变量。因此 C 应用程序将计算变量并发送回信息。

***内核源文件（内核空间）*** ---> ***C 应用程序（用户空间）***

```
 |

                                   <---| 
```

***内核源文件***

所以我们可能会在内核源代码中包含头文件。如果发生任何事件，它将值传递给 C 应用程序（用户空间）

***详细信息：*** 我正在尝试修改我的 HID 操纵杆事件（绝对 x，y）所以它可能只会移动到改进的位置，这将由我的应用程序生成，并带有一些数学函数，如（pow、tan 等）。

所以我使用 hid-input.c 来获取原始事件，并修改它们。它将通过隐藏内核模块用于输入子系统-</p>

寻找您的意见

问候。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-18T14:47:18.163

好吧，你不能，你可以在你的模块中重写你需要的函数，它很脏但它应该可以工作......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-08T18:18:07.090

您不能（通常，如果没有大量内核知识来锁定和保留这些寄存器而不影响其他关键部分）在内核中使用浮点寄存器，而且在内核中进行“处理”当然是不合适的。许多其他人都提到了这一点。性能会很糟糕。因此，未为内核模块提供 math.h。我们接受这一点并继续前进……

*然而*，由于我也是别人强加给我们的疯狂要求和完全疯狂设计的受害者，这是一个合理的问题。在减少了 math.h API 的使用以最大限度地降低性能影响后，您可以通过正确的编译器设置使用浮点仿真 (soft-float) 来实现所需的功能，而无需使用浮点寄存器。内核代码应该已经使用这些软浮点设置进行编译。

为了实现`math.h`功能，您可以查看[glibc](https://sourceware.org/glibc/wiki/HomePage)或[uClibc](http://git.uclibc.org/uClibc/tree/libm)以及其他可能。这两个库都具有 libm 的通用“C”实现，`math.h`无需使用特殊的内在函数或平台特定类型即可实现，因此应该在内核中编译得很好。

uClibc：上面的链接将您直接带到 uClibc 的 libm 部分。

glibc：在“git”-ing glibc 之后，您会在 glibc/sysdeps/ieee754/flt-32 中找到您要查找的内容。

glibc 可能更难理解，因为它更复杂并且自身内部具有更多的相互依赖关系，但 uClibc 仅提供（目前）C89 math.h。如果您想要 C99+ 中的单精度（阅读：更快）或复杂的数学功能，则必须查看 glibc。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-06-18T13:55:43.400

也许尝试使用双引号（“）而不是单引号？

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2009-06-23T14:47:29.767

在专家看来，它不是在内核空间和用户空间之间传递数据的好方法。要么完全在内核空间上工作，要么只在用户空间上工作。

但是一种解决方案可以在内核模块中使用**read()**和**write()**命令在用户空间和内核空间之间发送信息。

# sql-server - 替代执行动态 sql

> ID：1012743
> 
> 赞同：0
> 
> 时间：2009-06-18T13:52:19.817
> 
> 标签：sql-server, dynamic-sql

我目前有一个对应于业务对象的“过滤器”对象。此对象具有与我希望能够过滤/搜索此类业务对象列表的不同方式相关的属性。目前，这些过滤器对象有一个方法，该方法构建 where 子句的内容，然后将其传递到 SQL Server 2000 存储过程，在该存储过程中与选择查询的其余部分连接。然后使用**Exec**执行最终字符串。

目前这工作正常，除了我担心缺乏执行计划缓存的性能问题。在一些研究中，我看到了调用**sp_executesql**的用法；这是一个更好的解决方案还是对我正在做的事情有更好的约定？

**更新：**我认为使用 sp_executesql 的部分问题是基于我的过滤器中的一个集合，我需要生成一个 OR 语句列表。我不确定“参数化”查询是否是我的解决方案。

*例子*

```
 var whereClause = new StringBuilder();
    if (Status.Count > 0)
    {
       whereClause.Append("(");
       foreach (OrderStatus item in Status)
       {
          whereClause.AppendFormat("Orders.Status = {0} OR ", (int)item);
       }          

       whereClause.Remove(whereClause.Length - 4, 3);
       whereClause.Append(") AND ");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T13:56:49.590

sp_executesql 由于计划重用而优于 exec，并且您可以使用有助于防止 sql 注入的参数。如果正确使用 sp_executesql 也不会导致过程缓存膨胀

看看这两篇文章

[通过使用 sp_executesql 而不是 Exec 来避免执行计划中的转换](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/avoid-conversions-in-execution-plans-by-)

[如果您没有正确使用参数，将 exec 更改为 sp_executesql 不会带来任何好处](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/changing-exec-to-sp_executesql-doesn-t-p)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-18T14:00:24.357

是的，sp_executesql 将“缓存”它执行的查询的执行计划。

或者，您可以在 .NET 端构建整个查询并使用 ADO.NET 命令对象执行它，而不是将部分查询传递给存储过程、在那里构建完整查询并执行动态 SQL。默认情况下，通过 ADO.NET 执行的所有查询都被“缓存”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T13:56:26.690

您应该使用 sp_executesql，因为正如您所说，查询计划已存储并且未来的执行将得到优化。它通常似乎也比执行更好地处理动态 sql。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T13:56:25.100

现代 RDBMS（不能真正说是否将 SQL Server 2000 视为“现代”）针对[即席](http://en.wikipedia.org/wiki/Ad-hoc)查询进行了优化，因此对性能的影响可以忽略不计（如果有的话）。困扰我的是您正在使用 sproc 构建动态 SQL：这是一个巨大的调试/支持 PITA。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T14:03:21.450

sp_executesql 是更好的选择。您是否考虑过为此不使用存储过程，或者至少去掉一些动态？我认为任何形式的注射都会更安全。我编写过滤器的方式很像您所说的，但我尝试处理代码中的输入，而不是存储过程中的输入。我真的很喜欢动态 sql，但有时加倍努力可能更安全。

# c - C: 通过 printf() 打印双精度可以多长时间

> ID：1012747
> 
> 赞同：5
> 
> 时间：2009-06-18T13:52:53.653
> 
> 标签：c, printf, mpi

我需要指定要从双精度值打印的字符串的确切长度，但我不想限制输出超出必要的范围。

用 printf() 格式化时，6 位精度双精度的最大长度是多少？

具体来说，我应该给 X in 什么值`printf("%X.6lg",doubleValue);`以确保没有值被截断？

我需要具体说明长度的原因是我正在定义一个 MPI 派生数据类型，它由许多双精度值的字符串表示形式组成，并且必须知道它们的确切长度才能在 MPI 进程之间划分文件区域。

我希望这很清楚。提前感谢您的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-18T14:04:38.060

`printf("%.6g", doubleValue)`请注意，在`printf("%.6Lg", doubleValue)`

精度说明符中省略前导数字（“宽度”）对值的整数部分的长度没有要求。

另请注意，小写“l”将指定您的值是长整数。大写的“L”指定一个长双精度值。

另请注意，如果您不希望将其潜在地更改为科学记数法（如果它是更短的表示形式），那么您将使用“f”而不是“g”。

请参阅[此处的 printf 参考](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T14:03:56.660

<float.h> 包含许多有用的值，其中 DECIMAL_DIG 是一个*long double*。

同一个文件很可能会告诉您平台上的*双*精度数超过 6 位...

**PS：**还要注意上面黛米的回答。他指出了您 printf() 中的各种缺陷，这些缺陷使我无法理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T14:04:34.567

IEEE double 的最大指数是 1023，所以最大的 double 将是 1 + 1/2 + 1/4 + 1/8 + ... 等 * 2^1023。这将是大约 318 个字符长，以十进制表示。

为什么不使用“e”格式说明符？

# asp.net-mvc - 将经典的 ASP.NET 自定义控件转换为 MVC

> ID：1012749
> 
> 赞同：3
> 
> 时间：2009-06-18T13:53:11.050
> 
> 标签：asp.net-mvc

好吧，这对我来说是一个非常艰巨的挑战。我们正在使用现有的 ASP.NET 网站并将（仅重新设计 PL）转换为 MVC。我们的网站非常复杂。但困难的部分是将现有的自定义控件转换为 MVC 等价物。自定义控件（我不是在谈论用户控件）当然只是当前继承 System.Web.UI.Control 并始终使用该对象的类。例如，我们在这个现有自定义类的顶部有一些属性，如下所示：

```
Dictionary<int, Control> configControls; 
DropDownList kControl; 
CheckBox confirmBox; 
```

这些都是经典 ASP.NET 中 Web 控件类型的变量。

所以我想也许我能做的（无需从头开始构建全新的自定义控件）就是使用 HtmlHelper 对象。所以我尝试了这个：

（首先包括在我们的新 Web 项目中我的新自定义类顶部包含 System.Web.MVC.Html 的 using 语句）

私有 HtmlHelper 助手；字典配置控件；helper.DropDownList

但这不起作用。我想我不能像这样使用这个对象？？我想我可以在 Dictionary 中使用 HtmlHelper，然后从 helper 中创建变量类型。但这些只是扩展方法，而不是对象

我不知道类似于我们可以从经典 ASP.NET 中继承的通用“控件”之类的东西。当然它在 MVC 中显然是不一样的（无状态和完全不同的做事方式），但是我可以在 MVC 中使用什么具有相同的概念呢？

所以我想也许我能做的（无需从头开始构建全新的自定义控件）就是使用 HtmlHelper 对象。所以我尝试了这个：

（首先包括在我们的新 Web 项目中我的新自定义类顶部包含 System.Web.MVC.Html 的 using 语句）

```
private HtmlHelper helper; 
Dictionary configControls; 
helper.DropDownList 
```

但这不起作用。我什至不知道这种方法是否适用于我的自定义控件。当我尝试使用我的辅助变量时，我没有扩展方法，除非它在签名具有 HtmlHelper 参数的现有扩展方法中。因此，当我在外部的自定义类中创建该私有变量时，我什么也得不到做“助手”时可以选择的智能感知。那么我是否需要像这样定义该对象：？

```
private HtmlHelper htmlHelper = new HtmlHelper(); 
```

但它要求 ViewContext 和 IViewDataContainer 作为参数。如果我正在构建一个对其视图一无所知的自定义方法（它不应该需要），因为我只是在这个自定义类中创建 HMTL 字符串以传递给 Extension 方法以最终吐出字段然后也许我不能在这样的自定义类中以这种方式使用 HtmlHelper。

那么我可以以某种方式使用该对象而不是“控制”吗？也许我什至可以在我的字典变量中使用类型对象来代替控制？当我需要使用或引用字典中的值时，我不知道然后将对象转换为类型 HtmlHelper？但是现在，我想我可以在 Dictionary 中使用 HtmlHelper 对象，然后从 helper 中创建变量类型。但这些只是扩展方法，而不是对象。

我希望当你读到这篇文章时我在这里有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-18T14:12:11.620

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T14:47:25.370

除了将 webforms 控件侵入您的 MVC 应用程序之外，具有许多方法的服务器控件不会映射到 MVC。

它们被部分和控制器（或子控制器，如果你喜欢这种东西）所取代。

如果您只想根据几个参数渲染一些 HTML，那么您所追求的就是 Helper。静态类，静态方法。但是，如果您需要保持状态并做一堆有状态的事情，那么您真正需要的是部分、JS 和控制器（或子控制器）。

管理自己状态的服务器控件在 MVC 中确实已成为过去。

请记住，MVC 是一种尝试以它原本的工作方式使用 Web，尤其是当您将 REST 带入图片时。Webforms 是一种使 Web 像 Windows 窗体一样工作的软糖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T14:06:14.330

我会创建所需的业务逻辑、共享部分视图（可能会附加很多结构良好的 javascript 行）和单独的控制器。

[然后我会通过部分请求](http://blog.codeville.net/2008/10/14/partial-requests-in-aspnet-mvc/)技术使用这组代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T14:12:05.363

不知道这会有多大帮助，但是，看看这个系列的博客文章

[随处可见的自定义控件](http://blog.jeffhandley.com/archive/2008/02/13/custom-controls-everywhere-and-asp.net-mvc-part-0.aspx)

还可以查看 Catharsis 项目 [Web-Application Framework - Catharsis - Part I - New Solution](http://www.codeproject.com/KB/applications/Catharsis.aspx)

相同的 codeplex URL 是 [Catharsis](http://www.codeplex.com/Catharsis)

这个项目有一些为 asp.net mvc 创建控件的好例子。

# ruby - 使用 Ruby 的 QT4 QFileSystemWatcher

> ID：1012753
> 
> 赞同：0
> 
> 时间：2009-06-18T13:53:58.847
> 
> 标签：ruby, qt4

在 QT4 库中，QFileSystemWatcher 应该在监视文件更改时发出“fileChanged”信号。

但是，在 ruby​​1.8 下，“fileChanged”被报告为“No such signal”。FileSystemWatcher 显然在那里。我可以向其中添加文件并读回 files 属性；只是改变的信号似乎没有被定义。

FileSystemWatcher 不包含在任何已安装的示例中。

这是我尝试链接信号的代码行：

```
connect(self, SIGNAL('fileChanged()'), self, SLOT('mywatcher_changed()') ) 
```

“self”是一个派生自 Qt::FileSystemWatcher 的类。

这是否已实现，如果是，如何使用它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T14:57:46.533

信号和槽的内容必须是 C++ 方法签名，包括参数的类型。这就是找不到您的信号的原因。

可能，它应该是：

```
connect(self, SIGNAL('fileChanged( QString path )'), 
     self, SLOT('mywatcher_changed( QString path )') ) 
```

或者

```
connect(self, SIGNAL('fileChanged( const QString & path )'), 
     self, SLOT('mywatcher_changed( const QString & path )') ) 
```

我不确定哪一个是正确的，因为我不记得您是否需要在信号名称中包含“const”和“&”。

有关更多信息，请参阅：[qtruby 文档](http://techbase.kde.org/Development/Languages/Ruby#Declare_signals_and_slots)

# html - 如何配置 Emacs html-mode 使其行为类似于 TextMate 的默认 HTML 包？

> ID：1012768
> 
> 赞同：3
> 
> 时间：2009-06-18T13:56:28.250
> 
> 标签：html, emacs, textmate

我的一个朋友正在考虑从 TextMate 切换到 Emacs。他习惯了 TextMate 的默认 HTML 编辑模式，该模式有 4 个空格制表位并插入制表符（即默认情况下不自动缩进）。它还允许使用“ `Cmd-Shift->`”完成打开的 HTML 标记。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-18T15:27:44.650

我认为这些设置应该可以解决问题：

```
(defun my-html-mode-hook ()
  (setq tab-width 4)
  (setq indent-tabs-mode t)
  (define-key html-mode-map (kbd "<tab>") 'my-insert-tab)
  (define-key html-mode-map (kbd "C->") 'sgml-close-tag))

(defun my-insert-tab (&optional arg)
  (interactive "P")
  (insert-tab arg))

(add-hook 'html-mode-hook 'my-html-mode-hook) 
```

中的设置说明`'my-html-mode-hook`如下：

*   将标签宽度设置为 4
*   强制插入制表符（而不是空格）
*   强制`TAB`键插入制表符（默认情况下，它必须进行缩进，而不仅仅是插入制表符
*   `'sgml-close-tag`是为您插入关闭标签的命令，此设置为您提供所需的键绑定

我有点大脑僵硬，无法弄清楚让`TAB`键插入 TAB 字符的简单方法，所以我自己写了。我不知道为什么绑定`'self-insert-command`不起作用（这就是普通键所绑定的）。

最后一行只是将 setup 函数添加到`'html-mode-hook`. 键绑定实际上只需要运行一次（而不是每次启用 html 模式），但这比使用`'eval-after-load`. 它的用途留给读者作为练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T15:37:20.777

我不具体了解 emacs 的 HTML 模式，但我可以回答有关一般编辑的问题：

*   默认情况下，Emacs 不会自动缩进，所以这里无事可做。

*   Emacs 保留制表符，除非您明确要求它们更改（签出`tabify`和`untabify`）。它们的宽度由缓冲区局部`tab-width`变量确定。 `M-x set-variable`, `(setq...)`, 随意定制。

*   您应该能够通过设置`indent-line-function`to `tab-to-tab-stop`、设置`tab-stop-list`to`(4 8 12 16...)`和`indent-tabs-mode`to 来使用 tab 键获得所需的行为`t`。

设置`indent-tabs-mode`允许 Emacs 在缩进时插入制表符。这`tab-to-tab-stop`是一种缩进形式，仅会出现在行中的特定位置，我们通过设置`tab-stop-list`为 4 的倍数来设置它以匹配制表符的预期行为。

关于完成，我的肌肉记忆唯一告诉我的是“ `C-c C-e`”，但我不记得它应该使用哪种主要模式。我在列表中看到的最接近的是`sgml-close-tag`, 绑定到`C-c /`

有点政治：不要使用制表符，特别是如果您使用不等于 8 的宽度。它只会导致不可预知的结果

# ajax - 从 HTTP 页面通过 AJAX 的 HTTPS 请求

> ID：1012777
> 
> 赞同：28
> 
> 时间：2009-06-18T13:58:28.993
> 
> 标签：ajax, https

通过 AJAX 从标准 HTTP 页面调用 HTTPS 页面（例如信用卡授权服务，即 WorldPay）会不会有任何问题？

我无法想象为什么会出现问题，响应将是一个 HTML 页面，然后我可以将其嵌入结果窗格或类似的东西中？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-06-18T14:00:54.870

是的，这将是跨域发布，并且会被浏览器阻止。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-18T14:12:12.400

Anthony 是对的，但您可以做的是创建一个 AJAX 调用的本地页面，该页面通过 cURL 或其他方式与 HTTPS 服务通信并返回。这样，一切都根据 Java 脚本在本地完成。

# sql - 如何将 3 个 SQL 查询合并为 1 个？

> ID：1012788
> 
> 赞同：5
> 
> 时间：2009-06-18T14:00:28.210
> 
> 标签：sql, mysql, date

这是为了计算过去一天访问过的人数。我还想包括在上周和一年中访问过的人数，并在不进行 3 次单独查询的情况下将其完全输出。

```
SELECT COUNT(updated_at) AS 'TODAY'
FROM parts_development.page_views p
WHERE updated_at >= DATE_SUB(NOW(),INTERVAL 1 day)
GROUP BY parts_user_id; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-18T14:09:16.040

```
SELECT  DAY(updated_at), WEEK(updated_at), COUNT(*) AS visits
FROM    parts_development.page_views p
WHERE   updated_at >= DATE_SUB(NOW(),INTERVAL 1 year)
GROUP BY
        DAY(updated_at), WEEK(updated_at) WITH ROLLUP 
```

这将计算一年内的访问次数，按天、周和总数分组。

如果您只想在三列中选择一天、一周和一年的访问，请使用：

```
SELECT  (
        SELECT  COUNT(*)
        FROM    parts_development.page_views p
        WHERE   updated_at >= DATE_SUB(NOW(),INTERVAL 1 DAY)
        ) AS last_day,
        (
        SELECT  COUNT(*)
        FROM    parts_development.page_views p
        WHERE   updated_at >= DATE_SUB(NOW(),INTERVAL 7 DAY)
        ) AS last_week,
        (
        SELECT  COUNT(*)
        FROM    parts_development.page_views p
        WHERE   updated_at >= DATE_SUB(NOW(),INTERVAL 1 YEAR)
        ) AS last_year 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T14:06:49.243

SQL UNION 运算符 [http://www.w3schools.com/sql/sql_union.asp](http://www.w3schools.com/sql/sql_union.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T21:57:51.127

无需多次加入或从表中选择。

```
 SELECT parts_user_id,
           SUM( IF( updated_at >= DATE_SUB( NOW(), INTERVAL 1 DAY ), 1, 0 ) )
            as day_visits,
           SUM( IF( updated_at >= DATE_SUB( NOW(), INTERVAL 7 DAY ), 1, 0 ) )
            as week_visits,
           count(*) as year_visits
      FROM parts_development.page_views
     WHERE updated_at >= DATE_SUB( NOW(),INTERVAL 1 year )
  GROUP BY parts_user_id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T14:09:48.567

如果您想要多两行，请使用 UNION ALL。您仍然有 3 个查询，但作为一个执行。

如果您还想要两列，请使用 SUM( [CASE](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html) (...))。基本上，您将 WHERE 子句增加到 CASE 子句 3 次，每次都有自己的条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T16:39:40.133

怎么样

```
SELECT count(*), IsToday(), IsThisWeek() 
   FROM whatever 
   WHERE IsThisYear() 
   GROUP BY IsToday(), IsThisWeek() 
```

其中 Is*() 函数是布尔函数（或表达式）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-18T14:09:19.143

```
SELECT COUNT(updated_at) AS 'TODAY'
FROM parts_development.page_views day
    INNER JOIN (SELECT COUNT(updated_at) AS 'WEEK', parts_user_id as userid 
                FROM parts_development.page_views p
                WHERE updated_at >= DATE_SUB(NOW(),INTERVAL 1 week) 
                GROUP BY parts_user_id) week
        ON day.parts_user_id = week.userid
     INNER JOIN (SELECT COUNT(updated_at) AS 'YEAR', parts_user_id as userweek 
                FROM parts_development.page_views p
                WHERE updated_at >= DATE_SUB(NOW(),INTERVAL 1 year) 
                GROUP BY parts_user_id) year
        ON day.parts_user_id = year.userid
WHERE day.updated_at >= DATE_SUB(NOW(),INTERVAL 1 day)
GROUP BY day.parts_user_id 
```

不要在“INTERVAL”语法上引用我的，我没有查，我自己就是一个 TSQL 人。这也可以通过工会来实现。您还可以将 where 子句替换为连接中的谓词。

# java - 从 Java 以不同用户身份运行 UNIX 命令

> ID：1012792
> 
> 赞同：13
> 
> 时间：2009-06-18T14:01:58.753
> 
> 标签：java, unix, ssh, passwords, aix

尝试编写能够以不同 UNIX 用户身份运行 UNIX 命令的 Java 程序。我有用户的密码，并且知道要运行的命令，但是该命令必须以该用户身份运行 - 所以我必须首先以该用户身份登录。

例如：假设我们有一个用户 jim，他想查看 bob 的主目录中的内容，并且（无论出于何种原因）jim 有权执行 ls 而 bob 没有。**我们目前以 bob 身份登录**。这是我们（可以）做的：

```
bob@host$ su jim && ls ~bob 
```

问题是，我们被提示输入 jim 的密码。由于这是从Java程序运行的，即

```
Process p = Runtime.getRuntime().exec("su jim && ls ~bob"); 
```

我们被提示输入吉姆的密码并挂断了电话。*我们知道吉姆的密码*。但是，我无法进入它。

此外，我们不能使用 Expect 脚本（没有安装它），我们也不能成为超级用户。我还研究了使用 SSH 来尝试这个，因为我们可以在技术上做到

```
bob@host$ ssh jim@host "ls ~bob" 
```

但这也不起作用，因为我无权设置无密码 SSH。

我最后的努力是尝试使用 Java 的 SSH 库，因为密码可用于 Java 程序，并且我可以使用该密码登录（并执行正确的命令）。但是由于我将在同一台主机上运行，​​这似乎有点矫枉过正。

有什么建议么？

PS：Java版本1.4.2，无法升级；AIX UNIX 5.3。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-18T14:05:45.750

已安装 sudo，让运行 Java 程序的用户在 /etc/sudoers 中输入相关命令，然后使用`sudo -u jim ls ~bob`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-18T16:30:45.423

问题解决了。使用 JSch ( [http://www.jcraft.com/jsch/](http://www.jcraft.com/jsch/) ) SSH 到已知用户名和密码的服务器，并执行命令。谢谢大家的建议！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T14:09:27.553

可能是Expect的Java实现？ [谷歌搜索时会出现ExpectJ](http://expectj.sourceforge.net/)，但我找不到任何关于在 1.4.2 下运行的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T14:09:32.200

您是否尝试过重定向 sudo 命令输入并写入。我有一段时间没有使用 Java，但我相信有一种方法可以获取输入流并写入它。你可以用它来写密码，然后换行，sudo 或 su 应该接受密码。

使用 getInputStream() 并将您的密码写入其中。

```
su jim -c ls ~Bob 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-06-18T14:11:23.243

也许这会起作用：

```
Process process = Runtime.getRuntime().exec("su jim && ls ~bob");

OutputStream standardInput = process.getOutputStream();
Writer standardInputWriter = new OutputStreamWriter(standardInput);
standardInputWriter.write("password\n");
standardInputWriter.close(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-06-18T14:18:31.747

我不确定这段代码：

```
Process p = Runtime.getRuntime().exec("su jim && ls ~bob"); 
```

将在 shell 中执行，需要评估 &&，即 shell 命令 (/bin/sh)。您应该通过 su 的命令行开关传递命令“ls ~bob”。就像是：

```
su jim -c 'ls ~bob' 
```

# c# - WM6 .Net 表单效果 C#

> ID：1012796
> 
> 赞同：2
> 
> 时间：2009-06-18T14:03:23.837
> 
> 标签：c#, .net, effects, windows-mobile-6

我想知道是否可以在紧凑的框架上创建漂亮的表单效果。

我的计划是，当用户在主表单上选择一个图像时，它会以新表单打开，这目前有效。我现在要做的是制作包含全尺寸图片的表单，以大约 4 像素高从屏幕边缘（左侧或右侧）加载，然后滑入视图。一旦表单完全显示在屏幕上，然后扩展高度，直到达到屏幕的最大值。

关闭时，我想将高度降低到 4 像素高，然后在处理表单之前再次滑出边缘。

我在实例化表单时尝试了下面的代码，无论 dp.Width == 240 如何， dp.Top 属性始终为 0

```
DisplayPicture dp = new DisplayPicture(ImageUrl);
dp.WindowState = FormWindowState.Normal;
dp.Left = dp.Width * -1;
dp.Top = (dp.Height / 2) - 2;
dp.Height = 4;
dp.ShowDialog(); 
```

在 DisplayPicture 表单中，我还可以尝试移动表单，但由于它没有设置 Top 属性，因此此代码还没有关系。

```
void t_Tick(object sender, EventArgs e)
{
    if (this.Left < 0)
        this.Left += 5;

    if (this.Left > -1)
    {
        this.Left = 0;
        if (this.Height < pictureBox1.ClientRectangle.Height)
        {
            this.Height += 4;
            this.Top -= 2;
        }

        if ((this.Left == 0) && (this.Top == 0))
            t.Enabled = false;

    }
} 
```

任何帮助将不胜感激！

TIA

OneSHOT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T15:14:01.057

为此，请从已加载图像的 PictureBox 控件开始。将 Height 设置为 4，将 Width 设置为表单的宽度，并且（非常重要）将PictureBox的**SizeMode设置为****StretchImage**。

接下来，通过将 Top 设置为 0 并将 Left 设置为 -Width 将 PictureBox 放置在屏幕之外。在窗体上放置一个 Timer 控件，间隔为 100（或其他），并使其事件逐渐向右移动 PictureBox 直到其 Left 属性为 0。一旦到达该点，让计时器事件逐渐增加 Height 直到它达到了表格的高度。

您可能必须处理闪烁，但这应该可以帮助您入门。

更新：我刚刚仔细阅读了您的问题，并意识到您实际上希望将表单本身从屏幕外移动到全屏。如果您希望整个表单（包括顶部的标题栏）以这种方式进行动画处理，这是不可能的，但是您可以通过设置表单的 FormBorderStyle 来实现这一点（或者我认为它在 Compact Framework 中只是称为 BorderStyle）为无。将 BorderStyle 设置为 None 时，更改 Height、Width、Top 和 Left 属性实际上会对表单产生可见的影响（尽管表单将是无边框的）。 **否则，这些属性在 Windows Mobile 中会被完全忽略**，这可能就是您的代码似乎没有做任何事情的原因。

更新 2：这是[我](https://stackoverflow.com/questions/302680/custom-dialog-with-a-text-field-in-winmobile/305732#305732)对类似 WM 问题的回答，它可以帮助您使动画窗口看起来像一个真实的窗口。

# latex - LaTeX：防止文本跨度中的换行符

> ID：1012799
> 
> 赞同：177
> 
> 时间：2009-06-18T14:03:57.487
> 
> 标签：latex

如何防止 LaTeX 在我的`\texttt{...}`或`\url{...}`文本区域中插入换行符？里面没有空格我可以用 替换`~`，它只是打破符号。

**更新**：我不想导致行溢出，我宁愿 LaTeX 在这些区域之前而不是在它们内部插入换行符。

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2009-06-18T18:02:04.117

`\mbox`是最简单的答案。关于更新：

TeX 更喜欢过长的行而不是在一行的单词之间添加太多的空间；我认为这个想法是你会注意到延伸到边缘的线条（以及它在这些线条之后插入的黑框），并且有机会修改内容，而如果空间太大，你可能不会注意到它。

使用[`\sloppy`](http://www.tex.ac.uk/cgi-bin/texfaq2html?label=overfull)或`\begin{sloppypar}...\end{sloppypar}`调整这种行为，至少一点点。另一种可能性是[`\raggedright`](http://www.tex.ac.uk/cgi-bin/texfaq2html?label=ragright)（或`\begin{raggedright}...\end{raggedright}`）。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2009-06-18T14:07:07.417

用一个包围它`\mbox{}`

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2009-06-18T14:17:44.930

此外，如果您在常规文本中有两个后续单词，并且希望避免它们之间出现换行符，则可以使用 ~ 字符。

例如：

```
As we can see in Fig.~\ref{BlaBla}, there is nothing interesting to see. A~better place.. 
```

这可以确保您没有以数字编号（没有 Fig. 部分）或以大写 A 开头的行。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2012-10-01T21:04:38.283

使用 \nolinebreak

> \nolinebreak[数字]
> 
> \nolinebreak 命令可防止 LaTeX 在命令点断开当前行。使用可选参数 number，您可以将 \nolinebreak 命令从需求转换为请求。数字必须是0到4之间的数字。数字越大，请求越坚持。

来源：[http ://www.personal.ceu.hu/tex/break.htm#nolinebreak](http://www.personal.ceu.hu/tex/breaking.htm#nolinebreak)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2009-06-23T16:37:06.210

定义 myurl 命令：

```
 \def\myurl{\hfil\penalty 100 \hfilneg \hbox}

I don't want to cause line overflows, 
I'd just rather LaTeX insert linebreaks before 
\myurl{\tt http://stackoverflow.com/questions/1012799/} 
regions rather than inside them. 
```

# c++ - 在 boost::spirit 的 assign_a 中缩放

> ID：1012803
> 
> 赞同：2
> 
> 时间：2009-06-18T14:04:17.733
> 
> 标签：c++, boost-spirit

我正在研究 boost::spirit 以解析基于 ASCII 的协议。我设法使用如下规则从行中提取值：

```
rule<> Speed = uint_parser<unsigned int,10,3,3>()[assign_a(buffer.speed)]; 
```

我也成功地将这些规则以一种有意义的方式联系起来。完美的一天缺少以下内容：数据值是整数，需要使用固定的转换因子（通常是 10 的幂）转换为浮点值。

我现在所做的只是在解析后应用这些缩放因子。但是，我真的很想在字段的规则定义中包含比例因子。我想象这样的事情：

```
rule<> Speed = uint_parser<unsigned int,10,3,3>()[assign_a(buffer.speed,100)]; 
```

有什么建议么？

提前感谢阿恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-22T13:41:00.267

一种方法是使用[Boost.Phoenix](http://www.boost.org/libs/spirit/phoenix/doc/html/index.html)。包括这些标题：

```
#include <boost/spirit/include/phoenix_core.hpp>
#include <boost/spirit/include/phoenix_object.hpp> // For static_cast_
#include <boost/spirit/include/phoenix_operator.hpp> // For multiplication 
```

然后使用类似的东西：

```
using namespace boost::phoenix;
using namespace boost::phoenix::arg_names;

rule<> Speed = uint_parser<unsigned int,10,3,3>()[
    ref(buffer.speed) = static_cast_<double>(arg1) * 100
]; 
```

虽然，我发现 phoenix 使用起来有点棘手，通常只[写我自己的动作](http://www.boost.org/libs/spirit/classic/doc/semantic_actions.html)：

```
struct assign_scaled
{
    double& result;
    double scale;

    assign_with_scale(double& r, double scale) : result(r), scale(scale) {}

    void operator()(unsigned int x) const
    {
        result = static_cast<double>(x) * scale;
    }
}; 
```

并像这样使用它：

```
 rule<> Speed = uint_parser<unsigned int,10,3,3>()[assign_scaled(buffer.speed, 100)]; 
```

这可能更冗长，但我发现它更容易维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-08T09:06:02.877

使用 Spirit.Qi，您可以使用`[ref(buffer.speed) = _1 * 100]`

# visual-studio - 在 Visual Studio 中反转分配方向

> ID：1012807
> 
> 赞同：25
> 
> 时间：2009-06-18T14:04:53.147
> 
> 标签：visual-studio, regex

我在 Visual Studio 中有一堆赋值操作，我想反转它们：即

```
i = j;
```

会成为

```
j = i;
```

即用等号之后的内容替换等号之前的所有内容，反之亦然

有什么简单的方法可以做到这一点，在正则表达式引擎中说些什么？

干杯，埃德

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-06-18T14:18:54.977

选择要交换的行，Ctrl+H，然后替换：

```
{:i}:b*=:b*{:i}; 
```

和：

```
\2 = \1; 
```

将“查看：”设置为“选择”

不过，它只处理 C/C++ 风格的标识符（通过“:i”）。将其替换为：

```
{.*}:b*=:b*{.*}; 
```

替换“=”两侧的任何内容。

此外，由于您在评论中提到您使用 ReSharper，因此您只需突出显示“=”、Alt+Enter 和“反向分配”。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-27T14:43:40.210

只是对克里斯的回答略有改进......

Ctrl+H，然后替换：

```
{:b*}{[^:b]*}:b*=:b*{[^:b]*}:b*; 
```

和：

```
\1\3 = \2; 
```

（更好地处理空白，尤其是在行首）

**编辑：** 对于 Visual Studio 2012 及更高版本（我在 2015 年尝试过）：替换

```
(\s*)([^\s]+)\s*=\s*([^\s]+)\s*; 
```

和：

```
$1$3 = $2; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-27T10:14:26.053

在 Visual Studio 2015+ 中选择代码块后按`Ctrl + H`（查找和替换窗口）并选中“使用正则表达式”选项，然后：

寻找：`(\w+.\w+) = (\w+);`

代替：`$2 = $1;`

例如：

```
entity.CreateDate = CreateDate; 
```

更改为：

```
CreateDate = entity.CreateDate; 
```

谢谢@Nagesh 和 Revious，添加了提到的细节。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-18T14:35:30.557

执行此操作的可靠方法是使用*重构工具*。他们知道语言的语法，因此他们了解“赋值语句”的概念，并且可以正确选择赋值运算符任一侧的整个表达式，而不是局限于单个标识符，这是我认为所有正则表达式到目前为止已经涵盖。重构工具将您的代码视为结构化代码，而不仅仅是文本。我发现提到了两个可以做到这一点的 Visual Studio 加载项：

*   [锐化器](http://www.jetbrains.com/resharper/)
*   [MZ-工具](http://www.mztools.com/)

（反转赋值在技术上并不是重构，因为它改变了程序的行为，但大多数重构工具都将其含义扩展为包括其他类似的通用代码修改。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-18T14:15:51.610

不幸的是我没有 Visual Studio，所以我不能在目标环境中尝试，但如果它使用标准正则表达式，你可能会这样做：搜索“ `(:Al) = (:Al);`”，并替换为“ `\2 = \1`”。（\1 和 \2 是对第一个和第二个捕获组的引用，在这种情况下，\w:s 周围的括号）

**编辑**
好的，不是 \w... 但根据[MSDN](http://msdn.microsoft.com/en-us/library/2k3te2cs(VS.80).aspx)，我们可以改用 :Al。上面编辑以使用它。
此外，从 MSDN 页面我收集到它应该可以工作，因为引用似乎像往常一样工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-18T14:52:34.750

请看这个问题：[有没有一种方法可以在 Visual Studio 中交换一组表达式的左侧和右侧？](https://stackoverflow.com/questions/643687?sort=votes)

我对该问题的回答有一个宏，您可以使用该宏将分配换成代码块。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-28T09:58:30.040

我稍微改进了表达方式。

代替

```
(\t+)(\s*)(\S*) = (\S*); 
```

和

```
$1$2$4 = $3; 
```

原因是，它将查找以制表符 (\t) 开头的行。它将跳过以定义开头的行。例如：

```
 TestClass tc = new TestClass();
        int a = 75;
        int b = 76;
        int c = 77;

        a = tc.a;
        b = tc.b;
        a = tc.c; 
```

将忽略 int a、int b 和 int c 并仅交换分配。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-18T14:12:51.010

替换所有（CTRL-H）怎么样

您可以替换例如“i = j;” 通过“j = i;”

您可以在该对话框中使用正则表达式。但是，我不太确定您应该如何弹出有关它们的帮助。在该对话框中，按 F1，然后搜索该页面以获取有关正则表达式的更多信息。

我喜欢这个对话框，因为它允许您完成每个替换。因为打破东西的机会很高，我认为这是一个更安全的解决方案

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-18T14:14:32.783

您可以在 Visual Studio 中使用正则表达式进行搜索和替换，但对您要更改的每个分配进行正常搜索和替换而不是批量更改会更安全。

# c# - 将 KeyEvent 从窗体发送到控件

> ID：1012808
> 
> 赞同：0
> 
> 时间：2009-06-18T14:04:55.907
> 
> 标签：c#, vb.net, datagridview, contextmenu

我有一个 Windows.Worms 应用程序。在我的一个表单中，我显示了一个 DataGridView，它带有一个与之关联的 ContextMenu（不是 ContextMenuStrip）。ContextMenu 中的 MenuItems 定义了快捷方式。

这是创建 ContextMenu 的方式：

```
 Private _contextMenu As _
        New ContextMenu( _
            New MenuItem() { _
                New MenuItem("Item A", AddressOf ItemA_Click, Shortcut.CtrlA) With {.DefaultItem = True}, _
                New MenuItem("Item B", AddressOf ItemB_Click, Shortcut.CtrlB), _
                New MenuItem("Item C", AddressOf ItemC_Click, Shortcut.CtrlC), _
                ...
            }) _
        With {.Name = "MyContextMenu"} 
```

如果我的 DataGridView 有焦点并且我按 Ctrl + A ItemA_Click 被调用。
现在我希望快捷方式适用于我的整个表单，即使 DataGridView 没有焦点。
相反的方法很简单，我只需要将 Form 的 KeyPreview 设置为`true`. 但我想将事件传递给我的 DataGridView。

我试图从 DataGridView 调用 OnKeyDown 和 OnKeyPress 方法，但似乎都不起作用。我不知道，但我想 ContextMenu 会忽略 Key... 事件并连接到消息队列，但我不知道如何将 System.Windows.Forms.KeyEventArgs 转换为 Windows 消息.

只有两个人认为：
- 关注 DataGridView 并使用 SendKeys 作为解决方案，仅针对我的尸体。
- 我无法从 ContextMenu 中提取逻辑并使用 KeyPreview 或 smth。像这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T14:24:27.927

我想你几乎想通了 - 尝试将表单的 KeyPreview 设置为 true，然后自己捕捉快捷键。当你抓住快捷键被按下时，调用适当的方法：（对不起，这是 C#，因为我更熟悉 C# 语法......）

```
private void Form_KeyDown(object sender, KeyEventArgs e) { 
   if (e.Control && e.KeyCode == Keys.A) {
      ItemA_Click(...);
   } else if (e.Control && e.KeyCode == Keys.B) { 
      ItemB_Click(...);
   } else if (e.Control && e.KeyCode == Keys.C) { 
      ItemC_Click(...);
   }
} 
```

# c# - 更新 ViewModel 属性时如何避免递归？

> ID：1012812
> 
> 赞同：1
> 
> 时间：2009-06-18T14:05:41.180
> 
> 标签：c#, wpf, mvvm, data-binding

在我的视图中，我有一个**滑块**和一个**组合框**。

当我**更改滑块**时，我希望组合框发生更改。

当我**更改组合框**时，我希望滑块更改。

我可以更新一个或另一个，但如果我尝试更新两者，我会收到**StackOverflow 错误**，因为一个属性会在无限循环中不断更新另一个属性。

我尝试过在一个地方完成更新的**Recalculate()**，但仍然遇到递归问题。

**如何在不进行递归的情况下让每个控件更新另一个控件？**

**在视图中：**

```
<ComboBox 
    ItemsSource="{Binding Customers}"
    ItemTemplate="{StaticResource CustomerComboBoxTemplate}"
    Margin="20"
    HorizontalAlignment="Left"
    SelectedItem="{Binding SelectedCustomer, Mode=TwoWay}"/>

<Slider Minimum="0" 
        Maximum="{Binding HighestCustomerIndex, Mode=TwoWay}" 
        Value="{Binding SelectedCustomerIndex, Mode=TwoWay}"/> 
```

**在视图模型中：**

```
#region ViewModelProperty: SelectedCustomer
private Customer _selectedCustomer;
public Customer SelectedCustomer
{
    get
    {
        return _selectedCustomer;
    }

    set
    {
        _selectedCustomer = value;
        OnPropertyChanged("SelectedCustomer");
        SelectedCustomerIndex = _customers.IndexOf(_selectedCustomer);
    }
}
#endregion

#region ViewModelProperty: SelectedCustomerIndex
private int _selectedCustomerIndex;
public int SelectedCustomerIndex
{
    get
    {
        return _selectedCustomerIndex;
    }

    set
    {
        _selectedCustomerIndex = value;
        OnPropertyChanged("SelectedCustomerIndex");
        SelectedCustomer = _customers[_selectedCustomerIndex];
    }
}
#endregion 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-18T14:11:53.663

尝试设置功能，例如：

```
public int SelectedCustomerIndex
{
    get
    {
        return _selectedCustomerIndex;
    }

    set
    {
        if (value != _selectedCustomerIndex)
        {
         _selectedCustomerIndex = value;
         OnPropertyChanged("SelectedCustomerIndex");
         SelectedCustomer = _customers[_selectedCustomerIndex];
        }
    }
} 
```

仅在值发生实际变化时触发事件。这样，对具有相同值的 set 属性的第二次调用不会导致另一个更改事件。

当然，您也必须为其他财产这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-31T07:01:07.100

这两个属性是相互调用的，因此是递归的。根本与绑定无关。正确的方法是在任一属性更改时相互更改并触发两个属性的更改通知：

```
 public Customer SelectedCustomer
    {
        get
        {
            return _selectedCustomerIndex;
        }

        set
        {
            _selectedCustomer = value;
            _selectedCustomerIndex = _customers.IndexOf(value);

            OnPropertyChanged("SelectedCustomer");
            OnPropertyChanged("SelectedCustomerIndex");
        }
    }

    public int SelectedCustomerIndex
    {
        get
        {
            return _selectedCustomerIndex;
        }

        set
        {
            _selectedCustomerIndex = value;
            _selectedCustomer = _customers[_selectedCustomerIndex];

            OnPropertyChanged("SelectedCustomer");
            OnPropertyChanged("SelectedCustomerIndex");
        }
    } 
```

# c# - 设置文件 VS 2008 转义 c# carraige return

> ID：1012816
> 
> 赞同：0
> 
> 时间：2009-06-18T14:06:04.253
> 
> 标签：c#, .net

我正在尝试将 C# carraige return (\r\n) 指令保留在应用程序设置文件中。然而，设计师将序列转义为 (\r\n) ，这是我不想要的行为。

我已经手动修改了 settings.designer 文件中的默认值 attritube ，但这仅适用于应用程序的生命周期，然后恢复为转义序列。

有没有办法将文字存储在设置文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T14:10:46.147

我认为直接在 VS 中没有简单的方法可以做到这一点。您可以使用实际的换行符在记事本中编写文本，然后将其复制并粘贴到设计器中的字段中。

# c# - 嵌套通用事件

> ID：1012826
> 
> 赞同：1
> 
> 时间：2009-06-18T14:07:12.283
> 
> 标签：c#, generics, events, delegates

我想要一个可以触发的通用事件，它将采用自定义 eventArgs> e

到目前为止，这是我的代码

```
public event resultsEventHandler<T> returnResults;

public delegate void resultsEventHandler<T>(object sender, resultEventArgs<ObservableEntityCollection<T>> e);

protected virtual void OnreturnResults(resultEventArgs<ObservableEntityCollection<T>> > e)
{
    if (returnResults != null)
    {
        returnResults<T>(this, e);
    }
}

public class resultEventArgs<ObservableEntityCollection<T>> : EventArgs
{
    private readonly ObservableEntityCollection<T> _results;
    public resultEventArgs(ObservableEntityCollection<T>  results)
    {
        this._results = results;
    }

    public ObservableEntityCollection<T>>  queryResult 
    { 
        get { return _results; } 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T14:20:24.207

不确定这个问题，但

```
public class resultEventArgs<ObservableEntityCollection<T>> : EventArgs 
```

应该

```
public class resultEventArgs<T> : EventArgs 
```

# asp.net - 制作“构建”涉及什么？

> ID：1012829
> 
> 赞同：5
> 
> 时间：2009-06-18T14:07:39.287
> 
> 标签：asp.net, visual-studio

在我工作的地方，我们使用固定的时间表来构建我们的应用程序。构建涉及什么？让应用程序在本地主机以外的地方构建涉及什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-18T14:09:42.763

前几天我遇到了这个......它有助于澄清一些关于构建 ASP.NET 网站的事情。不是一个确定的答案，但值得一看。

[http://msdn.microsoft.com/en-us/library/399f057w.aspx](http://msdn.microsoft.com/en-us/library/399f057w.aspx)：

> **ASP.NET 提供了两种预编译站点的选项：**
> 
> 预编译网站。此选项对于您想要提高性能和执行错误检查的现有站点很有用。
> 
> 预编译站点以进行部署。此选项创建一个特殊的输出，您可以将其部署到生产服务器。
> 
> 此外，您可以预编译站点以使其只读或可更新。以下部分提供了有关每个选项的更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-18T14:26:36.927

构建的基本目的是确保网站所需的所有文件的一致集部署在一起。

这通常是通过从源代码控制中检索文件，将它们打包到一个或多个适当的存档中（称为构建过程的工件），然后使用脚本将这些文件发送到生产或 QA 服务器，然后启动应用程序来完成。

根据技术和项目，构建脚本可能会编译文件、运行测试、创建档案、将文件复制到不同的位置以及类似的东西。

有不同的工具来支持构建过程以提供底层脚本能力。构建脚本有时可以具有独特的属性，例如确保给定任务仅运行一次，即使较大构建的不同部分需要确保它运行（例如创建目录以部署工件的任务，目录是只创建一次，并且构建脚本引擎（例如 NAnt）确保即使任务被多次调用，每次构建也只运行一次。

如果您想了解有关构建的更多信息，请四处寻找一些使用您熟悉的技术的开源项目，并查看它们的构建过程（如何更改代码和部署它）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-18T16:05:46.547

[这篇 Joel On Software](http://www.joelonsoftware.com/articles/fog0000000023.html)文章是我最喜欢的关于构建、每日构建和构建服务器的解释。

他在这篇文章和许多其他文章中的中心论点是，您创建构建（这意味着对源文件进行任何编译或转换，包括更改它们的位置以便它们可以投入生产/测试）所花费的精力越多，生产力和您的软件质量会降低，并且在部署/构建过程中容易出错。理想情况下，对于 Web 应用程序，您有一个可以双击的脚本，它从源代码管理中获取最新文件，编译它们，并将所有内容部署到目标位置。

存在许多可以帮助您实现此目的的商业产品。我喜欢 Team Foundation Server，但它可能不适合您的预算/文化/编程语言选择。拥有自定义构建脚本也不是最糟糕的主意，因为它让您的编程团队可以很好地了解您的流程。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-18T14:26:29.453

有一篇关于这个主题的[维基百科文章](http://en.wikipedia.org/wiki/Software_build)：

> 在计算机软件领域，软件构建一词是指将源代码文件转换为可以在计算机上运行的独立软件工件的过程，或者是这样做的结果。软件构建最重要的步骤之一是将源代码文件转换为可执行代码的编译过程。
> 
> 虽然对于简单的程序，该过程由正在编译的单个文件组成，但对于复杂的软件，源代码可能由许多文件组成，并且可以以不同的方式组合以产生许多不同的版本。
> 
> 构建计算机程序的过程通常由构建工具管理，构建工具是一个协调和控制其他程序的程序。此类程序的示例有 make、ant、maven 和 SCons。构建实用程序需要以正确的顺序编译和链接各种文件。如果特定文件中的源代码未更改，则可能不需要重新编译（可能不需要，因为它本身可能依赖于已更改的其他文件）。复杂的构建实用程序和链接器试图避免重新编译不需要它的代码，以缩短完成构建所需的时间。现代构建实​​用程序可以部分集成到修订控制程序中，例如 Subversion。

# templates - VB中是否有任何类型的模板引擎？

> ID：1012836
> 
> 赞同：1
> 
> 时间：2009-06-18T14:09:07.820
> 
> 标签：templates, vba

VB中是否有任何类型的模板引擎？类似于 Apache velocity 或 Freemarker 的东西？

我的目标是能够基于表单输入为 MS Access 应用程序动态生成 sql 语句标准，并且比字符串猫更强大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T11:27:38.987

你可以检查这个[MiniTemplator](http://www.source-code.biz/MiniTemplator/)。MiniTemplator 是一个紧凑的 HTML 文件模板引擎，可用于 Java、PHP 和 Visual Basic (VB/VBA)。它也可以用于非 HTML 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T14:12:53.223

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-11T02:07:56.227

我曾经在一个项目中使用过[StringTemplate](http://www.stringtemplate.org/)。它具有 C# 端口，您也应该能够从 VB 中使用它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-25T16:20:00.967

看一下[Format()](http://www.vb6.us/tutorials/using-format-function-custom-string-formats)函数。

# css - 大型信息树的无障碍导航

> ID：1012846
> 
> 赞同：2
> 
> 时间：2009-06-18T14:09:57.677
> 
> 标签：css, user-interface, tree, usability, hierarchical-data

我正在开发一个公共网站，它是有关医疗状况信息的前端。

在用户进行搜索（基于调查问卷）后，他们会看到分类为部分和子部分的结果。

信息项可以分配给部分和子部分。

目前，部分由顶部和屏幕上的选项卡表示，而子部分由侧边栏中的链接表示。侧边栏中的链接会根据选择的部分而变化。

问题是部分名称很长（几个单词），因此选项卡的组合长度对于标准屏幕分辨率（1024 x 768）来说太宽了。因此，它们会包装并破坏页面布局。我们将来还必须添加其他选项卡。

考虑到这个问题以及我们的目标受众相当广泛的事实，这是一个公共医疗网站，有哪些选项可以以普通用户可访问且易于导航的方式呈现此类信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T14:15:54.123

只是头脑风暴一些想法：

*   使用组合框允许用户选择（子）部分，然后显示适当的信息项。
*   为每个部分级别创建单独的页面，并提供面包屑控件以向用户显示他/她在页面层次结构中的位置。
*   创建某种折叠菜单，当用户阅读信息项时自动隐藏。

在另一个关于 SO 的问题中，我遇到了[Quince](http://quince.infragistics.com/ "桲")的链接，也许你也可以在那里找到一些灵感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T14:34:15.880

你可以试试：

*   iPod 风格的菜单（其中的小节是从右侧飞入的隐藏页面）：[http ://www.filamentgroup.com/lab/jquery_ipod_style_and_flyout_menus/](http://www.filamentgroup.com/lab/jquery_ipod_style_and_flyout_menus/)

或者正如大安所说：

*   级联下拉框：[http ://www.asp.net/AJAX/AjaxControlToolkit/Samples/CascadingDropDown/CascadingDropDown.aspx](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/CascadingDropDown/CascadingDropDown.aspx)

这两者的缺点（相对于传统的树视图）是在您选择一个部分之前，子部分不可见。如果您的用户不知道他们所追求的小节的名称，那么其中任何一个都非常适合。

另一方面，如果他们确实知道他们所追求的小节的名称，最好给他们一个自动完成的文本框，这样他们就可以输入几个字符并直接进入它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T22:17:27.843

小节名称有多长？*它们*会适合标签的空间吗？如果您将部分链接放在侧栏菜单中，而将小节链接放在选项卡中，而不是相反，您可能会获得更好的用户性能。请参阅[http://www.usability.gov/pubs/040106news.html](http://www.usability.gov/pubs/040106news.html)。

另一种选择是将所有内容放在侧栏菜单上。小节链接可以在其节链接下缩进显示。您还可以考虑将小节链接放在节列右侧的自己的列中。这使得部分菜单稳定，但占用了大量可能更适合用于内容的水平空间。无论哪种情况，对视觉设计的适当关注将显示当前部分、子部分以及它们之间的链接。

只要您使用链接导航到每个部分/子部分（可能基于与页面链接相关的数据库以编程方式为每个页面生成），可访问性就不应该有问题。

# c++ - 使用基类对象来表示其派生类对象

> ID：1012849
> 
> 赞同：2
> 
> 时间：2009-06-18T14:10:32.153
> 
> 标签：c++

我需要一种方法让单个变量表示从同一基类派生的两种对象。

这有点难以描述，但我会尽力而为：

说基类：

```
class Rectangle
{
   float w;
   float h;
   const float area() {return w*h;}
}; 
```

以及两个派生类：

```
class Poker : Rectangle
{
    int style;  // Diamond, Club, ....
    int point;  // A~10, J, Q, K
};

class BusinessCard : Rectangle
{
    string name;
    string address;
    string phone;
}; 
```

现在是否可以声明一个对象，可以是扑克牌或名片？

'因为下面的用法是非法的：

```
Rectangle* rec;
rec = new Poker();
delete rec;
rec = new BusinessCard(); 
```

多态性可能是一种方式，但由于它只对更改基类的成员属性有好处，所以我需要这个对象能够准确地表示任何一个派生对象。

编辑：

感谢所有的答案。公共继承、虚拟析构函数甚至 boost::variant typedef 都是很棒的提示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-18T14:20:06.300

你可以这样做。问题是类的继承修饰符是`private`. [大多数时候，`private`继承不是你想要使用](https://stackoverflow.com/questions/656224/when-should-i-use-c-private-inheritance)的。相反，将其明确声明为`public`：

```
class Rectangle
{
   float w;
   float h;
   const float area() {return w*h; }; // you missed a semicolon here, btw
   virtual ~Rectangle() { } // to make `delete` work correctly
};

class Poker : public Rectangle // note the public keyword
{
    int style;  // Diamond, Club, ....
    int point;  // A~10, J, Q, K
};

class BusinessCard : public Rectangle 
{
    string name;
    string address;
    string phone;
}; 
```

然后你的代码片段应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-18T14:22:00.740

您需要将继承的限定符更改为 public。

```
class Poker : public Rectangle
{
    int style;  // Diamond, Club, ....
    int point;  // A~10, J, Q, K
};

class BusinessCard : public Rectangle
{
    string name;
    string address;
    string phone;
}; 
```

是你想要的。现在，BusinessCard 和 Poker 这两个类都是 Rectangle 类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-18T14:18:19.203

> 我需要这个对象能够**准确**地表示任何一个派生对象。

不知道我理解是否正确，但看看[`boost::variant`](http://www.boost.org/doc/libs/1_39_0/doc/html/variant.html)

```
typedef boost::variant<Poker, BusinessCard> PokerOrBusinessCard 
```

现在您可以使用 boost 变体访问者类访问派生类。

也许这可以成为一个解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T14:14:20.663

我认为您可能正在寻找的是多重继承，其中一个对象有时可以是扑克，有时是名片。

请参阅此处获取教程：

[http://www.deitel.com/articles/cplusplus_tutorials/20060225/MultipleInheritance/index.html](http://www.deitel.com/articles/cplusplus_tutorials/20060225/MultipleInheritance/index.html)

请注意，如果您愿意，您可以决定将其设为其中之一，不必一直都是，这可能会满足您的需求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-18T14:28:55.453

更改子类以使用公共派生，并且您的代码可以工作，并进行一些清理。您还应该使用虚拟析构函数，以便删除正常工作。

```
class Rectangle
{   
    float w;   
    float h;   
    const float area() 
    {
        return w*h;
    }
public:
    virtual ~Rectangle(){};
};

class Poker : public Rectangle
{    
    int style;  // Diamond, Club, ....    int point;  // A~10, J, Q, K
};

class BusinessCard : public Rectangle
{    
    string name;    
    string address;    
    string phone;
}; 
```

# emacs - 如何将 Emacs 选项卡设置为每个新文件中的空格？

> ID：1012855
> 
> 赞同：36
> 
> 时间：2009-06-18T14:11:18.343
> 
> 标签：emacs, coding-style, indentation, convention

我想要一个 .emacs 设置，以便制表符始终由连续的空格组成。最好在每种可能的模式下。在其他编辑器中，这似乎从来都不是问题，但在 .emacs 中，恐怕我有点卡在标签上了。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-06-18T14:13:48.947

将此添加到您的 .emacs 中：

```
(setq-default indent-tabs-mode nil) 
```

或者你可以定义一个 before-save-hook 来消除硬标签

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2009-06-18T15:00:46.793

也有用，`M-x untabify`它将所有选项卡转换为当前区域中的空格。您可以使用它来删除您在`indent-tabs-mode`正确设置之前编辑的文件中的现有选项卡。

```
C-x h                   (M-x mark-whole-buffer)
M-x untabify 
```

# asp.net - 未立即设置 ASP.NET DropDownList SelectedValue 属性

> ID：1012864
> 
> 赞同：3
> 
> 时间：2009-06-18T14:12:21.837
> 
> 标签：asp.net, webforms, drop-down-menu

我有一个 ASP.NET 网络表单，我在其上使用 DropDownList 控件来允许用户选择一个项目并查看相关结果。由于某种原因，当我设置 DropDownList 的 SelectedValue 属性时，它设置的值不会立即可用。

这是我的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        DropDownList1.SelectedValue = "5";
        BindView();
    }
}

protected void BindActivities()
{
    DataClassesDataContext dc = new DataClassesDataContext();
    var query = from activity in dc.Activities
                where activity.AssignedTo == Convert.ToInt32(DropDownList1.SelectedValue);
    GridView1.DataSource = query;
    GridView1.DataBind();
} 
```

在前面的代码中，我收到 DropDownList1.SelectedValue 为空的错误。奇怪的是，如果我注释掉使用 DropDownList1.SelectedValue 的代码并让页面加载，DropDownList1 实际上设置为值 5。所以它看起来设置正确，但不是立即可用。调试器确认 DropDownList.SelectedValue 没有在设置它的代码行之后立即设置为 5。

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-18T14:18:02.560

您是否在绑定下拉列表之前设置了值？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T14:37:41.660

是的，上面的用户是对的

```
if (!Page.IsPostBack)
{
    BindView();
    DropDownList1.SelectedValue = "5";
} 
```

...应该可以正常工作。

没有执行的延迟，只有执行的顺序。

# sql - SQL 检查数据库是否为空（无表）

> ID：1012870
> 
> 赞同：11
> 
> 时间：2009-06-18T14:13:40.460
> 
> 标签：sql, mysql

我需要使用 SQL 查询检查数据库是否完全为空（没有表）。如何才能做到这一点？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-18T14:16:09.490

```
select count(*)
  from information_schema.tables
 where table_type = 'BASE TABLE'
   and table_schema = 'your_database_name_here' 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-06-18T14:18:22.073

```
SELECT COUNT(DISTINCT `table_name`) FROM `information_schema`.`columns` WHERE `table_schema` = 'your_db_name' 
```

将返回数据库中表（或视图）的实际数量。如果该数字为 0，则没有表。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-18T14:17:46.770

在 MYSQL 中：

```
use DATABASE;
show tables; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-09-03T08:32:48.140

要获取 MySQL 中没有表的所有数据库的列表：

```
use information_schema

select schema_name from `schemata` s
  left join `tables` t on s.schema_name = t.table_schema
  where t.table_name is null
; 
```

干杯，基督徒

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-18T14:18:16.427

如果您使用的是 SQL Server 2005 或更高版本，则可以使用其中一个系统视图来为当前数据库实现此目的：

```
select Count(*)
from sys.tables
where [type] = 'U' 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-18T14:20:37.607

SQLServer 实现：

```
USE database_name
SELECT COUNT(*) from information_schema.tables 
WHERE table_type = 'base table' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-18T14:17:23.340

“select * from information_schema.tables”将为您提供大多数数据库上的表列表。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-18T15:09:55.200

在 Oracle 中：从 user_tables 中选择 Count(*)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-02-09T00:54:25.027

我需要一些能给我在 Bash 中使用的退出代码的东西。这建立在@longneck 的可靠答案之上。如果数据库有表，`select`语句会将`contents`列设置为“有表”。在这种情况下， Grep 将返回成功`0`，否则将返回非零值。

```
#!/bin/bash
user=username
pw=passwd
db=database
mysql -u ${user} -p"${pw}" -D ${db} --execute="SELECT CASE COUNT(*) WHEN '0' THEN 'empty database' ELSE 'has tables' END AS contents FROM information_schema.tables WHERE table_type = 'BASE TABLE' AND table_schema = '${db}';" | grep 'has tables'
echo $? 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-10T20:32:12.740

在 bash 中：

```
db_name='my_db'
mysql -s --skip-column-names -e "SELECT COUNT(DISTINCT table_name) FROM information_schema.columns WHERE table_schema = '$db_name'" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-19T08:43:09.110

**解决方案：**为了验证您的数据库不是空的，您可以查看表列表并测量其中的实例。

**首先：**执行与您的数据库的简单连接`mysql -u <userName> -p`，运行`show databases;`选择您的数据库 `use <databaseName>;`，然后运行`show tables;`并期望获得表列表。

```
+----------------------------------------+
| Tables_in_databaseName                 |
+----------------------------------------+
| databaseA                              |
| databaseB                              |
| databaseC                              |
+----------------------------------------+ 
```

**二：**对sql上的主键/主表进行简单的count动作，对实例进行count：

```
select count(*) from <primaryKeyColumn>; 
```

计数结果应 > 0

```
+----------+
| count(*) |
+----------+
|   100    |
+----------+ 
```

# java - Hibernate 单向父/子关系 - delete() 对子表执行更新而不是删除

> ID：1012874
> 
> 赞同：9
> 
> 时间：2009-06-18T14:14:15.123
> 
> 标签：java, hibernate, mapping, one-to-many

***如果我从父表中删除一条记录，我希望删除子表中的相应记录。如何使 Hibernate 从 Child 表中删除，而不是尝试使用 null 进行更新？***

我正在使用 Hibernate 3，但此时不能使用注释。我在下面附上了 HBM、DAO 等的副本。 - 先感谢您

尝试从父/子关系中的表中删除数据时，出现以下错误：

```
Testcase: testDelete(com.dressbarn.imbo.model.data.hibernate.dao.CharityTransferDAOTest):        Caused an ERROR
Hibernate flushing: Could not execute JDBC batch update; uncategorized SQLException for SQL [update RMS12.DRS_CHARITY_TRANSFER_ITEM set TSF_NO=null, TSF_SEQ_NO=null where TSF_NO=?]; SQL state [72000]; error code [1407]; ORA-01407: cannot update ("RMS12"."DRS_CHARITY_TRANSFER_ITEM"."TSF_NO") to NULL
; nested exception is java.sql.BatchUpdateException: ORA-01407: cannot update ("RMS12"."DRS_CHARITY_TRANSFER_ITEM"."TSF_NO") to NULL

org.springframework.jdbc.UncategorizedSQLException: Hibernate flushing: Could not execute JDBC batch update; uncategorized SQLException for SQL [update RMS12.DRS_CHARITY_TRANSFER_ITEM set TSF_NO=null, TSF_SEQ_NO=null where TSF_NO=?]; SQL state [72000]; error code [1407]; ORA-01407: cannot update ("RMS12"."DRS_CHARITY_TRANSFER_ITEM"."TSF_NO") to NULL
; nested exception is java.sql.BatchUpdateException: ORA-01407: cannot update ("RMS12"."DRS_CHARITY_TRANSFER_ITEM"."TSF_NO") to NULL

Caused by: java.sql.BatchUpdateException: ORA-01407: cannot update ("RMS12"."DRS_CHARITY_TRANSFER_ITEM"."TSF_NO") to NULL

        at oracle.jdbc.driver.DatabaseError.throwBatchUpdateException(DatabaseError.java:498)
        at oracle.jdbc.driver.OraclePreparedStatement.executeBatch(OraclePreparedStatement.java:12368)
        at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)
        at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:246)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:237)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:143)
        at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)
        at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
        at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)
        at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)
        at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)
        at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:578)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:662)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:632)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:314)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:116)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
        at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:629)
        at com.dressbarn.imbo.model.data.hibernate.dao.CharityTransferDAO$$EnhancerByCGLIB$$6a21cd58.delete(<generated>)
        at com.dressbarn.imbo.model.data.hibernate.dao.CharityTransferDAOTest.testDelete(CharityTransferDAOTest.java:112)
        at org.springframework.test.ConditionalTestCase.runBare(ConditionalTestCase.java:69) 
```

我的桌子是：

**家长**：

```
CREATE TABLE DRS_CHARITY_TRANSFER
(
  TSF_NO          NUMBER(10)                    NOT NULL Primary Key,
  FROM_LOC        NUMBER(10),
  CHARITY_LOC_ID  NUMBER(10),
  STATUS          VARCHAR2(1 CHAR),
  CREATE_DATE     DATE,
  EXT_REF_NO      VARCHAR2(30 CHAR),
  COMMENT_DESC    VARCHAR2(2000 CHAR),
  USER_ID         VARCHAR2(30 CHAR)
) 
```

**孩子：**

```
CREATE TABLE DRS_CHARITY_TRANSFER_ITEM
 (
  TSF_NO      NUMBER(10)  NOT NULL PRIMARY KEY,
  ITEM        VARCHAR2(25 BYTE)  NOT NULL PRIMARY KEY,
  TSF_SEQ_NO  INTEGER,
  TSF_QTY     INTEGER
) 
```

**HBM XML**

```
<hibernate-mapping package="com.dressbarn.imbo.model.data.hibernate.transfer" schema="RMS12">
   <class name="CharityTransfer" table="DRS_CHARITY_TRANSFER">
       <id name="transferNumber" column="TSF_NO" unsaved-value="undefined">

       </id>
       <property column="FROM_LOC" length="10" name="fromLocation" type="java.lang.Long"/>
       <property column="CHARITY_LOC_ID" length="10" name="toCharityLocId" type="java.lang.Long"/>
       <property column="STATUS" name="status" type="string"/>
       <property column="EXT_REF_NO" name="documentNumber" type="string"/>
       <property column="COMMENT_DESC" name="comment" type="string"/>
       <property column="CREATE_DATE" name="createDate" type="string"/>
       <property column="USER_ID" name="userId" type="string"/>
    <list name="charityTransferItemList" cascade="all-delete-orphan" lazy="false">
        <key column="TSF_NO" />
        <list-index column="TSF_SEQ_NO"/>
        <one-to-many class="CharityTransferItem" />
    </list>
</class>

<class name="CharityTransferItem" table="DRS_CHARITY_TRANSFER_ITEM">
    <id name="item" column="TSF_NO" unsaved-value="undefined">

    </id>
    <property column="ITEM" name="item" type="string"/>
    <property column="TSF_SEQ_NO" length="10" name="sequence" type="integer"/>
    <property column="TSF_QTY" length="12" name="quantity" type="long"/>
</class> 
```

**道**

```
public class CharityTransferDAO extends HibernateDaoSupport implements ICharityTransfer {

   public void delete(CharityTransfer charityTransfer) throws IMADataException {
       try {
         getSessionFactory()
                 .getCurrentSession()
                 .delete(charityTransfer);
      }
      catch (HibernateException e) {
        throw new IMADataException("failed to delete charity shipping information", e);
      }    
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-18T14:24:52.593

**我一直**遇到这个错误。

只需在关系上加上一个 inverse="true" ，您的问题就会消失！

```
<list name="charityTransferItemList" inverse="true" cascade="all-delete-orphan" lazy="false" >
        <key column="TSF_NO" />
        <list-index column="TSF_SEQ_NO"/>
        <one-to-many class="CharityTransferItem" />
    </list> 
```

基本上相反的情况会告诉hibernate没有父母，孩子不能存在，从而导致hibernate删除孩子。

话虽如此，您还需要从父集合中删除charityTransfer 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-11-23T14:38:06.727

*（注意：这已被两个用户提出为不正确的答案）。*

Hibernate 文档说您可以将键列标记为`not-null="true"`：

```
<list name="charityTransferItemList" cascade="all,delete-orphan" lazy="false">
        <key column="TSF_NO" not-null="true" />
        <list-index column="TSF_SEQ_NO"/>
        <one-to-many class="CharityTransferItem" />
</list> 
```

来自[关于集合的 Hibernate 文档](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/collections.html#collections-onetomany)：

> 如果关联的外键列声明为 NOT NULL，则必须声明映射 not-null="true" 或使用带有标记为 inverse="true" 的集合映射的双向关联。有关详细信息，请参阅本章后面对双向关联的讨论。

我还认为您的级联样式有错字（`all-delete-orphan`应该是`all,delete-orphan`）。

# vb.net - .NET 调试/发布的不同参考列表

> ID：1012881
> 
> 赞同：7
> 
> 时间：2009-06-18T14:15:52.733
> 
> 标签：vb.net, visual-studio, visual-studio-2008

在我的调试版本中，我引用了仅在调试配置中需要的 DLL（该引用是针对 CodeSite，一种日志记录工具）。

是否可以在 Release 构建中排除此引用（我的日志记录类仅在 Debug 配置中构建时使用此引用）。

使用 VB.NET 和 VS2008。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-18T14:23:15.183

是的，这是可能的，但需要您手动编辑 .vbproj 文件。打开文件后，您将看到您引用的 DLL 的 XML 引用标记，如下所示

```
<Reference Include="SomeDllName" /> 
```

您需要添加一个条件属性，它应该只在调试期间完成

```
<Reference Include="SomeDllName" Condition="'$(Configuration)'=='Debug'" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-18T14:21:59.837

可以这样做，但您需要手动处理项目文件。

我们在[MiscUtil](http://pobox.com/~skeet/csharp/miscutil)中执行此操作，因此我们可以有一个 .NET 2.0 构建和一个 .NET 3.5 构建。例如：

```
<ItemGroup Condition=" '$(Configuration)' != 'Release 2.0' ">
  <Reference Include="System.Core">
    <RequiredTargetFramework>3.5</RequiredTargetFramework>
    <Aliases>global</Aliases>
  </Reference>
  <Reference Include="System.Xml.Linq">
    <RequiredTargetFramework>3.5</RequiredTargetFramework>
  </Reference>
</ItemGroup> 
```

这应该足以让你开始:) 基本上将当前引用从它在你的正常项目文件中的位置中取出，并在适当的条件下将它放在它自己的 ItemGroup 中。

# ruby - 从街道地址中删除街道号码

> ID：1012883
> 
> 赞同：3
> 
> 时间：2009-06-18T14:16:07.617
> 
> 标签：ruby, regex, street-address

使用 Ruby (newb) 和正则表达式，我试图从街道地址解析街道号码。我没有遇到简单的问题，但我需要一些帮助：

'6223 1/2 S FIGUEROA ST' ==> 'S FIGUEROA ST'

谢谢您的帮助！！

更新）：

'6223 1/2 2ND ST' ==> '2ND ST'

来自@pesto '221B Baker Street' ==> 'Baker Street'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T14:20:23.990

组匹配：

```
.*\d\s(.*) 
```

如果您还需要考虑公寓号码：

```
.*\d.*?\s(.*) 
```

哪个会照顾 123A 街道名称

只要字符串中没有其他数字，那应该去掉前面的数字（和空格）。只需捕获第一组 (.*)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T14:25:40.233

这将剥离字符串前面的任何内容，直到它碰到一个字母：

```
street_name = address.gsub(/^[^a-zA-Z]*/, '') 
```

如果可能有像“221B Baker Street”这样的东西，那么你必须使用更复杂的东西。这应该有效：

```
street_name = address.gsub(/^((\d[a-zA-Z])|[^a-zA-Z])*/, '') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T14:32:37.460

还有另一组stackoverflow的答案： [Parse usable Street Address, City, State, Zip from a string](https://stackoverflow.com/questions/16413/parse-usable-street-address-city-state-zip-from-a-string)

我认为谷歌/雅虎解码器方法是最好的，但取决于你谈论的频率/多少地址 - 否则选择的答案可能是最好的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T14:37:23.270

街道名称也可以是数字吗？例如

```
1234 45TH ST 
```

甚至

```
1234 45 ST 
```

您可以处理上面的第一种情况，但第二种情况很困难。

我会将地址拆分为空格，跳过任何不包含字母的前导组件，然后加入其余部分。我不了解 Ruby，但这是一个 Perl 示例，它也突出了我的方法的问题：

```
#!/usr/bin/perl

use strict;
use warnings;

my @addrs = (
    '6223 1/2 S FIGUEROA ST',
    '1234 45TH ST',
    '1234 45 ST',
);

for my $addr ( @addrs ) {
    my @parts = split / /, $addr;

    while ( @parts ) {
        my $part = shift @parts;
        if ( $part =~ /[A-Z]/ ) {
            print join(' ', $part, @parts), "\n";
            last;
        }
    }
}

C:\Temp> skip
S FIGUEROA ST
45TH ST
ST 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-10-13T01:44:24.030

哎哟! 除非您使用标准化地址，否则单独解析地址可能会非常讨厌。原因是通常称为门牌号的“主号码”可以位于字符串中的各个位置，例如：

1.  RR 2 Box 15（RR 也可以是 Rural Route、HC、HCR 等）
2.  邮政信箱 17
3.  12B-7A
4.  NW95E235
5.  等等

这不是一个微不足道的攻击。根据您的应用程序的需要，您最好使用地址验证网络服务来获得*准确的信息。*有少数提供此功能的提供商。

为了全面披露，我是 SmartyStreets 的创始人。我们有一个[地址验证 Web 服务 API](http://www.smartystreets.com/Products/LiveAddress-API/)，它将验证和标准化您的地址，以确保它是真实的，并允许您获取主要/门牌号码部分。非常欢迎您亲自与我联系并提出问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-18T14:22:00.257

`/[^\d]+$/`也将匹配相同的东西，除了不使用捕获组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-18T14:25:27.787

为了将来参考，一个很好的帮助正则表达式的工具是[http://www.rubular.com/](http://www.rubular.com/)

# dsl - 成功的领域特定语言 ? 你用哪一个？

> ID：1012886
> 
> 赞同：11
> 
> 时间：2009-06-18T14:16:15.167
> 
> 标签：dsl

我对领域特定语言的设计和实现感兴趣。我知道的大部分 DSL 都来自学术界。

你能给我一些关于工业中实际使用的 DSL 的建议吗？并且你每天都在使用……真的很方便……

（我也对声明性语言感兴趣，但不是真正基于 xml 的语言......）......

我想建立一个（非详尽的）行业部署语言列表......我知道这是巨大的......

有时，我使用通用语言来实现可以使用 DSL 轻松完成的事情。

**编辑** 我主要对面向应用程序的 DSL 感兴趣，而不是小型嵌入式语言。例如，SQL 匹配我正在寻找的内容，但嵌入在 java 中的 SQL 对我不感兴趣。我正在寻找的另一种语言示例是 X#

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-18T14:55:36.600

一个如此成功以至于拥有自己的 SO 标签的 DSL 就是正则表达式语言。当然，具体到字符串模式匹配的领域。

另一个流行的，但我没有经验的是 VHDL。VHDL 之所以受欢迎，是因为它可以很容易地转换为在 FPGA 中使用。

[编辑] 虽然它肯定不是图灵完备的，但 C 的 printf() 格式说明符可以被视为另一种特定于域的语言。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-06-18T20:36:43.833

NMake、MSBuild、lex、yacc、bison、flex、TeX、PostScript、XAML、SSIS、Wix

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-18T15:53:17.947

[EBNF](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form)可能是其领域内使用最广泛的领域特定语言——一种描述语言的语言。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-18T15:54:13.627

[Wikipedia 建议](http://en.wikipedia.org/wiki/Domain-specific_language)电子表格公式和 shell 脚本都是特定领域的语言。这将使它们可能成为最广泛传播的例子。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-18T16:01:19.697

[awk](http://en.wikipedia.org/wiki/AWK)提供了一种用于处理半结构化文本数据的领域特定语言。
许多广泛使用的更强大的 unix 命令行工具，例如 find 和 grep 可以归类为具有特定于域的语言（即使仅限于命令行参数）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-07-10T13:07:00.773

我不知道您是否也想考虑图形 DSL。我会包括

*   [NORMA](http://www.ormfoundation.org/files/folders/norma_the_software/default.aspx)，一种用于概念领域建模的 DSL，基于对象角色建模表示法 (ORM2)
*   [Web 服务软件工厂](http://www.codeplex.com/servicefactory)，它使用三个 DSL 来对 Web 服务进行建模

以上两者都是使用[DSL Toolkit](http://msdn.microsoft.com/en-us/vsx/cc677260.aspx)创建的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-18T14:20:38.387

这是我曾经问过的一个关于用 Ruby 编写的 DSL 的问题：[Ruby DSL（领域特定语言）存储库，示例](https://stackoverflow.com/questions/899665/ruby-dsl-domain-specific-language-repositories-examples)

除了 Ruby DSL，SQL 是非常流行的 DSL 的一个很好的例子，A​​WK 也是如此。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-18T20:52:48.340

MEL（Maya 表达式语言）是 AutoDesk Maya 在其整个设计中使用的命令行式语言。可以保存场景的 Maya Ascii 文件格式使用 MEL 来合成其场景。用户界面主要是使用 MEL 脚本构建和控制的。可用于驱动对象上的通道和属性的表达式是 MEL。

我想在您只是为它编写脚本的情况下，它在*技术上可以被视为一种嵌入式语言。*但是，如果没有 MEL，Maya 基本上就不会存在。没有 ascii 文件格式，没有用户界面等。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-06-25T14:34:18.320

给我印象最深的两个（尚未提及）是：

*   用于实体 3D 建模的[OpenSCAD](http://openscad.org/)
*   用于项目管理的[TaskJuggler (!)](http://www.taskjuggler.org/)

我是声明式 DSL 的忠实粉丝。可操作的 DSL（如[Maple](http://www.maplesoft.com)、[Mathematica](http://www.wolfram.com)和[R](http://www.r-project.org)也不错，但与传统语言没有太大区别）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-06-25T15:03:24.207

[Tcl](http://www.tcl.tk/)是一种语言，最初被设计为构建 DSL 的框架——提供可编程性和 I/O 等基本功能，同时为每个应用程序重新创建特定领域的部分——并发展成为一种通用脚本语言。[Expect](http://expect.nist.gov/)是最广为人知的基于 Tcl 的 DSL 之一。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-02-06T23:15:15.707

对于业务流程，我们有例如

*   以 XML 表示且可执行的[BPEL](http://en.wikipedia.org/wiki/Business_Process_Execution_Language)
*   [BPMN](http://en.wikipedia.org/wiki/Business_Process_Modeling_Notation)是一种视觉语言，用于建模

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-06-18T14:20:35.237

您可以用 Boo 等语言*编写*特定领域的语言，但我认为特定领域的定义表明大多数时候它将在特定行业甚至只是一家公司......

[维基百科](http://en.wikipedia.org/wiki/Domain-specific_programming_language)对此有一篇很好的介绍性文章。

此[概述](http://homepages.cwi.nl/~arie/papers/dslbib/#examples)有一个示例部分，其中包含一些很好的链接。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-06-18T14:24:24.277

ruby on rails 的某些部分可以被认为是特定领域的语言。特别是它用于指定关系表的语言。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-06-18T16:07:48.717

1.  Mak Stealth 用于编程字符行为的语言（不要认为它有名字）
2.  俚语 - 高盛语言（我听说过但从未使用过）
3.  [CMS-2](http://en.wikipedia.org/wiki/CMS-2_(programming_language))海军编程语言

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-06-18T16:10:30.573

谷歌的网络搜索支持一些[越来越复杂的参数化](http://www.google.com/help/cheatsheet.html)

您可能会争辩说，这是使用最广泛的 DSL 之一，即使他们的一小部分用户群曾经使用过其中的一个，而不是标准的单词列表。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-07-10T13:08:38.170

[Erlang](http://en.wikipedia.org/wiki/Erlang_%28programming_language%29)最初是一种电信专用语言，尽管它现在（偶尔）被用作通用语言。

# mysql - 如何分析 MySQL

> ID：1012887
> 
> 赞同：28
> 
> 时间：2009-06-18T14:16:39.410
> 
> 标签：mysql, sql, profiling, database-tuning

如何分析 MySQL 数据库。我想查看针对数据库运行的所有 SQL。

我知道你可以这样做：

*   `set profiling=1;`
*   运行你的慢查询（例如`SELECT * FROM messages WHERE fromaddress='xxx';`
*   `SHOW PROFILES;`

但这似乎只适用于在命令行上运行的东西，我想看看运行网站的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-18T14:26:53.400

您想要[查询日志](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)- 但显然在重型生产服务器上执行此操作可能......不明智。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T22:31:23.173

这在 Ubuntu 上对我有用。

查找并打开您的 MySQL 配置文件，通常`/etc/mysql/my.cnf`在 Ubuntu 上。查找“日志记录和复制”部分</p>

```
# * Logging and Replication
# Both location gets rotated by the cronjob.
# Be aware that this log type is a performance killer.

log = /var/log/mysql/mysql.log 
```

或者在较新版本的mysql中，注释掉这行代码

```
general_log_file        = /var/log/mysql/mysql.log
general_log             = 1
log_error                = /var/log/mysql/error.log 
```

只需取消注释该`log`变量即可打开日志记录。使用以下命令重新启动 MySQL：

```
sudo /etc/init.d/mysql restart 
```

现在我们已准备好在查询进入时开始监视它们。打开一个新终端并运行此命令以滚动日志文件，并在必要时调整路径。

```
tail -f /var/log/mysql/mysql.log 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T14:18:51.637

有一个商业产品

[http://www.webyog.com/en/](http://www.webyog.com/en/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T14:18:50.450

您可以简单地实时解析查询日志。如果在 linux 上，您可以使用 tail -f 实时查看日志

此外，您可以尝试这些家伙提供的一些免费软件：

[http://hackmysql.com/mysqlsla](http://hackmysql.com/mysqlsla)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T14:29:51.880

MySqlAdministrator 有一些有用的内置功能（包括日志视图），但对于日志，它必须与数据库在同一台机器上运行

# java - OSGi felix：可以在宿主应用程序和捆绑包之间共享一个类吗？

> ID：1012897
> 
> 赞同：3
> 
> 时间：2009-06-18T14:18:14.070
> 
> 标签：java, osgi, sharing, classloader, apache-felix

在我的宿主应用程序中，我尝试实现一个简单的 pushService，通过提供 set 和 get 方法，该服务将用于将名为 Vehicle 的类的实例传输到 OSGi 世界。为了能够使用该服务，我将服务接口和 Vehicle 类都导出到了一个 jar 文件中，并将该文件导入到应该使用该服务的包中。

每次我尝试在我的宿主应用程序中使用 Vehicle 类时，它实例化了 felix 框架和包，我得到一个链接错误。阅读以下博客条目（[http://frankkieviet.blogspot.com/2009/03/javalanglinkageerror-loader-constraint.html](http://frankkieviet.blogspot.com/2009/03/javalanglinkageerror-loader-constraint.html)）后，我明白了为什么会发生此错误。但我不知道如何解决我的问题。

是否可以在宿主应用程序和 OSGi 实例之间共享一个类？也许我必须使用反射而不是导入 jar 文件？我查看了那个库（[http://code.google.com/p/transloader/](http://code.google.com/p/transloader/)），我不确定这个库是否能够解决我的问题......

BR,

马库斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T14:43:26.690

有一次，我正在使用 Felix 来完全按照您在自定义客户端-服务器应用程序中的要求进行操作。我已经切换到 Equinox（他们正确地实现了我需要将 Swing LAF 作为 osgi 包的框架片段）。我*认为*以下内容适用于 Felix，我*知道*它适用于 Equinox。

更新：我从我的主机应用程序开始了一条非常相似的路径。我很早就意识到我需要将尽可能多的代码移动到真正的 OSGi 包中才能真正利用该平台。我的主机应用程序设置客户端/服务器通信并同步捆绑包；而已。我曾经分享的少数课程已被移入捆绑包中，我没有回头。如果您的设计/应用程序可以支持捆绑包中的大部分代码，我肯定会走这条路。即使需要重新设计，也是值得的。

在初始化 OSGi 运行时之前，设置此属性“org.osgi.framework.system.packages”以包含由分号“;”分隔的包（无通配符）。您可能还需要包含基本 osgi 包“org.osgi.framework”和基本服务“org.osgi.packageadmin”、“org.osgi.startlevel”、“org.osgi.url”。

当我还在使用 Felix 时，我刚刚挖掘了我的版本控制并找到了一个片段（Equinox 的设置几乎相同）

```
Map<String, String> configMap = new HashMap<String, String();

configMap.put(Constants.FRAMEWORK_SYSTEMPACKAGES,
    "your.package;other.package;org.osgi.framework");

// setup other properties

Bundle systemBundle = new Felix(configMap, null);
systemBundle.start();

// Now you can use classes from "your.package" with explicity 
// declaring them as imports in bundles 
```

# asp.net-mvc - 登录后立即在 ActionFilter 中检查 User.Identity.IsAuthenticated

> ID：1012910
> 
> 赞同：5
> 
> 时间：2009-06-18T14:20:01.917
> 
> 标签：asp.net-mvc, forms-authentication, action-filter

我基本上使用 ASP.NET MVC 示例中的 AccountController。它使用 FormsAuthentication 来处理用户登录。可以肯定的是，这里是处理用户登录的代码：

```
 public ActionResult LogOn(string userName, string password, bool rememberMe, string returnUrl)
    {
      if (!ValidateLogOn(userName, password))
      {
        return View();
      }

      FormsAuth.SignIn(userName, rememberMe);

      //Session["userId"] = 1;

      if (!String.IsNullOrEmpty(returnUrl))
      {
        return Redirect(returnUrl);
      }
      else
      {
        return RedirectToAction("Index", "Home");
      }
    } 
```

从注释行可以看出，我想在这个方法中设置一个 Session 变量。但是，我认为这不是直接在控制器中设置 Session 变量的最优雅的方式。对这种方法进行单元测试时也很不方便（尽管我可以模拟它，当然，但仍然如此）。

因此，我想，我创建了一个在此登录例程之后运行的自定义 ActionFilterAttribute。如果登录成功，请在此自定义属性中设置会话变量。代码是：

```
 public class SetSessionAttribute : ActionFilterAttribute
  {
    public override void OnResultExecuted(ResultExecutedContext resultContext)
    {      
      if (resultContext.HttpContext.User.Identity.IsAuthenticated)
      {
        resultContext.HttpContext.Session["userId"] = 1;
      }

      base.OnResultExecuted(resultContext);
    }
  } 
```

问题是`User.Identity.IsAuthenticated`在下一次“页面加载”之前总是返回 false。`OnResultExecuted`当我收集到它是页面生命周期中调用的最后一个方法时，我正在重写，但没有运气。我也试过`OnActionExecuting`, `OnActionExecuted`and `OnResultExecuting`，但总是错误的。

有没有一个优雅的解决方案？还是我应该放弃并直接在控制器中设置会话变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-19T09:26:27.523

我在注销时遇到了类似的问题，因为 User.Identity.IsAuthenticated 在下一页请求之前为真，但我需要一种方法来了解用户是否真的完成了应用程序的工作。

我认为您应该在控制器中设置 Session 或 ViewData 变量，或者通过 routeValues 将其传递给另一个控制器。

# c# - 没有具有 IEnumerable 类型的键“taskTypes”的 ViewData 项

> ID：1012924
> 
> 赞同：3
> 
> 时间：2009-06-18T14:21:54.017
> 
> 标签：c#, asp.net-mvc, drop-down-menu

在 ASP.NET MVC 中将 onchange 属性添加到 Html.DropDownList 时，我收到上述错误消息：

```
<td><%= Html.DropDownList("taskTypes", (IEnumerable<SelectListItem>)ViewData["TaskTypes"], "None", new { onchange = "document.getElementById('NewTask').submit()" })%></td> 
```

当视图最初加载时，我没有收到错误。仅在更改所选项目后回发时。我的控制器代码是：

```
[AcceptVerbs(HttpVerbs.Get), RequiresAuthentication]
    public ActionResult NewTask()
    {
        List<SelectListItem> dropDownData = new List<SelectListItem>();
        List<SelectListItem> statusDropDownData = new List<SelectListItem>();

        foreach (TaskStatus t in tasks.GetTaskStatus())
        {
            statusDropDownData.Add(new SelectListItem { Text = t.Status, Value = t.TaskStatusID.ToString() });
        }

        foreach (TaskType t in tasks.GetTaskTypes())
        {
            dropDownData.Add(new SelectListItem { Text = t.Reference, Value = t.TaskTypeID.ToString() });
        }

        ViewData["TaskStatus"] = statusDropDownData;
        ViewData["TaskTypes"] = dropDownData;

        if (Request["taskTypes"] != null)
        {
            string tt = Request["taskTypes"];
        }

        return View();
    } 
```

有谁知道问题可能是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T14:33:36.677

该控制器方法上的 AcceptVerbs 属性表明它将构建该 ViewData 实例并返回关联的 View 以显示您的表单。您确定负责处理表单提交（或保存数据）的控制器方法正在以相同的方式构建该 ViewData 实例吗？

# eclipse-gef - Eclipse 上下文帮助

> ID：1012929
> 
> 赞同：5
> 
> 时间：2009-06-18T14:22:23.033
> 
> 标签：eclipse-gef

现在我可以在 Eclipse WizardDialog/Editor 中注册上下文帮助。

1）我创建了一个 help_contexts.xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<?NLS TYPE="org.eclipse.help.contexts"?>
<contexts>
   <context  id="my.plugin.help.general" >
        <description>test</description>
        <topic label="test" href="http://domain.com/help.html"/>
   </context>
</contexts> 
```

2) 我在我的 plugin.xml 中引用了这个文件

```
 <extension
         point="org.eclipse.help.contexts">
         <contexts file="help_contexts.xml" plugin="my.plugin.MainEditor">
         </contexts>
   </extension> 
```

3) 我在 build.properties 中添加了一行以将此文件包含在 bin 目录中 (bin.includes = help_contexts.xml, ... )

4) 运行基于 GEF 的插件时，我在动态帮助下看到“未找到“my.plugin.MainEditor”的匹配项”。

我知道我需要在某处创建类似的东西，但我不知道在哪里为我的 WizardDialog 或至少为我的整个编辑器设置它：

```
 public void createPartControl(Composite parent) {
      ...
      PlatformUI.getWorkbench().getHelpSystem().setHelp(parent, 
         "my.plugin.help.general");
   } 
```

注意：这个问题最初包含两个问题。我已经删除了要在其他地方发布的第一个（未答复的部分）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-20T14:25:22.580

以下是您的操作方法： 1) 我创建了一个 help_contexts.xml 文件。上下文 ID 中没有句点。不要在其中包含您的插件名称。

```
<?xml version="1.0" encoding="UTF-8"?>
<?NLS TYPE="org.eclipse.help.contexts"?>
<contexts>
   <context  id="help_general" >
        <description>test</description>
        <topic label="test" href="http://domain.com/help.html"/>
   </context>
</contexts> 
```

2) 我在我的 plugin.xml 中引用了这个文件 如果您引用自己的插件，请不要包含插件 ID。

```
 <extension
         point="org.eclipse.help.contexts">
         <contexts file="help_contexts.xml">
         </contexts>
   </extension> 
```

3) 我在 build.properties 中添加了一行以将此文件包含在 bin 目录中 (bin.includes = help_contexts.xml, ... )。请注意 Manifest.MF 中的 Bundle-SymbolicName（在您的 plugin.xml 编辑器中也可见）。示例：my.plugin

4) 在 WizardPage 中设置上下文 id（归功于 @VonC）

```
public class MyWizardPage extends WizardPage
    public void createControl(Composite parent) {
        PlatformUI.getWorkbench.getHelpSystem.setHelp(parent, "my.plugin.help_general");
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-18T16:15:47.830

对于主要问题，我不确定您的 setHelp 第二个参数。看到[这个线程](http://dev.eclipse.org/newslists/news.eclipse.platform.ua/msg00638.html)：

> 在方法调用中

```
PlatformUI.getWorkbench().getHelpSystem().setHelp() 
```

> 第二个参数是`contextID`.
> 它应该以`pluginID`类似的前缀：“ `pluginID.contextID`”。
> 现在我不确定在哪里可以找到我的插件的插件 ID。
> 所以我使用了这个属性的值： ~~`Bundle-Name`~~ `Bundle-Symbolic-Name`from`MANIFEST.MF`作为插件 ID。
> 现在它起作用了。

* * *

对于旁注（帮助`WizardDialog`），[这个线程](http://dev.eclipse.org/newslists/news.eclipse.platform.ua/msg00365.html)可能会有所帮助（来自 David Kyle 和他的博客“ [Eclipse RCP](http://richclientplatform.blogspot.com/) ”）：

> 我们在向导页面中设置上下文 ID。

```
public class MyWizardPage extends WizardPage
    public void createControl(Composite parent) {
        PlatformUI.getWorkbench.getHelpSystem.setHelp(parent, 
MyPluginActivator.ID + ".mycontexthelpid");
    }
} 
```

> 我们为向导对话框设置了帮助。

```
WizardDialog dialog = new WizardDialog(.....);
PlatformUI.getWorkbench().getHelpSystem().setHelp(dialog.getShell(), 
"mycontexthelp.id"); 
```

> 我们不覆盖`performHelp()`.
> 
> 至于帮助上下文 id。在插件中定义一个上下文 xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<?NLS TYPE="org.eclipse.help.contexts"?>
<contexts>
    <context id="mycontexthelpid" >
        <description>My wizard help.</description>
        <topic label="Wizard help" href="reference/wizard/help.xhtml"/>
    </context>
</contexts> 
```

> 在你的插件中

```
<plugin>
    <extension point="org.eclipse.help.contexts">
        <contexts file="mywizard.xml" plugin="com.mypluginid"/>
    </extension>
</plugin> 
```

> 一个常见的问题是弄乱了插件和上下文帮助 ID。您可以设置几个断点来查看正在请求哪个上下文 ID。

# java - 用于*读取*文件的 java FileDescriptor .sync() 的逆

> ID：1012932
> 
> 赞同：2
> 
> 时间：2009-06-18T14:23:14.030
> 
> 标签：java, multithreading, file-io, concurrency

阅读 FileDeciptor 的 .sync() 方法的 javadoc，很明显，sync() 主要关注将任何修改过的缓冲区提交回底层存储。即，确保您的程序*输出*的任何东西实际上都会进入磁盘（或套接字或你有什么，但我的问题主要与磁盘有关）。

但是另一个方向呢，INPUT呢？假设我的程序在内存中缓冲了 java.io.RandomAccessFile 的某些部分，并且我想读取文件的这些部分，但是自从我的程序上次读取这些块以来，也许其他一些进程已经修改了文件的这些部分？

这类似于在 C 程序中将变量标记为“易失性”。其他东西可能已经改变了你只是方便副本的东西的“真实版本”。

即，您如何确定您的 java 程序读取的内容至少是最新的？

（显然，“最新”的定义很重要。仅作为示例，假设另一个进程，即写入文件的进程，以每秒一次的顺序执行此操作，并假设读取进程可能读取每分钟一次。在这种情况下，性能并不是什么大问题，只是确保读者读取的内容与写入的内容一致，例如在一秒钟内。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T16:48:46.727

在重新读取文件之前，最好使用 File.lastModified() 检查文件的最后修改时间戳。如果此时间戳不比您上次读取文件时更新，则您无需费心更多的磁盘 I/O 来重新读取您感兴趣的块。但要记住的一件事是，如果您使用网络文件系统，则更新内容时，最后修改的时间戳可能不会总是立即更新。如果您正在处理更新文件的本地进程和运行代码读取文件的另一个本地进程，您很可能不会遇到此问题。

我过去成功的一种方法是让一个单独的线程在特定时间间隔（比如 5 秒）轮询文件以获取最后修改的时间戳。如果文件更改，请重新处理文件并向注册的侦听器发送事件。就我而言，5 秒就足以获得更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T14:35:30.637

在文件被读入内部缓冲区的那一刻，内容与磁盘上的内容是最新的。

如果您想确保下次访问时获得最新内容，您还必须再次访问磁盘，跳过所有内部缓冲区和缓存。如果您真的想确定跳过所有这些层，则必须从头开始重新打开文件并寻找您想要访问的相应位置。

当然，如果您在每次可能访问数据时访问磁盘，您的性能就会下降。不要想到 3-5 倍左右，而是数量级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-19T00:20:09.843

如果您控制的另一个程序是唯一写入文件的程序，那么最好在同一个 Java 进程坐标中拥有 2 个线程。最简单的解决方案是创建一个 `java.util.concurrrent.atomic.AtomicBoolean`. writer 线程调用`set(true)`，`AtomicBoolean`reader 调用`getAndSet(false)`。如果`getAndSet()`返回`true`，则您知道阅读器需要重新读取数据。如果这是一个问题，您可以在某个对象上进行同步，以防止作者在阅读器阅读时进行写入。

您在问题中说“过程”，因此您可能担心系统上更改数据的任何其他过程。在这种情况下，我认为最好的办法是重新打开并重新读取数据。如果您真的每分钟只阅读一次，那么这对性能的影响应该可以忽略不计。

# c# - 更新到 2.2 和更新命令不起作用

> ID：1012935
> 
> 赞同：1
> 
> 时间：2009-06-18T14:23:34.670
> 
> 标签：c#, subsonic

在 2.0.3 之前，我将我的 ASP.NET/C# 项目更新到了 Subsonic 的 2.2 版本。此更新后，所有更新命令都不起作用！也不例外，什么都没有，只是数据库没有更新！

有人知道如何解决吗？我需要修改项目中的某些内容或解决我必须修改所有更新命令？

例如，这项工作在更新版本的 Subsonic 之前：

```
TblCliente.Update(codCliente, txtNomeCliente, Int32.Parse(txtPrograma.Text), txtLinha.Text, txtPrefixo.Text ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-23T12:48:58.627

Try to make this way. I´m using the 2.2 version and for now I have no problem.

```
TblCliente obj = new TblCliente();

obj.field = xx;
obj.field = yyy;

obj.Save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-15T00:21:14.567

在设置值之前尝试将其标记为 tblCliente.MarkOld, .MarkClean。

# integration - 平衡集成水平与在 Intranet 中添加新软件的便利性：门户、cms 等？

> ID：1012945
> 
> 赞同：0
> 
> 时间：2009-06-18T14:25:54.243
> 
> 标签：integration, portal, intranet

快速背景：我是我们中型公司的门户管理员。目前，我们的 Intranet 政策是尝试将所有内容集成到我们的 Intranet 门户中（我们主要将其用作 CMS，也集成了一些应用程序）。这意味着我们所有的软件在最终用户看来都来自一个站点，这很好。但这也意味着我们必须修改几乎所有想要整合到网站中的软件以适应门户。这样做的缺点是我们门户的每个组件（cms、博客、论坛等）都不是同类最佳的，老实说，与免费和开源的同类产品（wordpress）相比，它们相当糟糕，phpbb，mediawiki，都是我想到的例子）。因为用户被迫使用这些低于标准的工具，他们并不高兴。

我们目前正在研究光谱的另一端，我们内部网中的每个软件都没有集成，但我们能够使用同类最佳的免费软件。我们将能够更快地向我们的公司推出新服务，但不利的一面是这些服务不会被集成。例如，wordpress 中的用户个人资料（在我们的例子中是可移动类型）没有连接到他们在其他应用程序中的个人资料。软件重叠，查找信息比较困难，用户也不满意。

贵公司如何在快速集成新工具的能力与向用户呈现单一连贯界面的愿望之间取得平衡？您是选择一个企业平台并强迫自己停留在其边界内，还是尝试在许多不同的工具之间提供凝聚力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T15:10:33.577

不幸的是，每个工具都需要单独分析，而且难度通常取决于许多不同的因素（技术、框架、设计）。但最重要的是集成级别和集成点（身份、接口）。

编辑：顺便说一句，好主意是花一些时间进行一些原型设计和评估潜在解决方案。

# c# - 使用 System.Windows.Forms.Timer.Start()/Stop() 与 Enabled = true/false

> ID：1012948
> 
> 赞同：31
> 
> 时间：2009-06-18T14:26:34.197
> 
> 标签：c#, .net, timer

假设我们在 .Net 应用程序中使用 System.Windows.Forms.Timer，**在计时器上使用 Start() 和 Stop() 方法与使用 Enabled 属性之间是否有任何有意义的区别？**

例如，如果我们希望在进行某些处理时暂停计时器，我们可以这样做：

```
myTimer.Stop();
// Do something interesting here.
myTimer.Start(); 
```

或者，我们可以这样做：

```
myTimer.Enabled = false;
// Do something interesting here.
myTimer.Enabled = true; 
```

如果没有显着差异，**社区是否就选择哪个选项达成共识？**

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-06-18T15:21:10.233

正如[BFree](https://stackoverflow.com/questions/1012948/using-system-windows-forms-timer-start-stop-versus-enabled-true-false/1012981#1012981)和[James](https://stackoverflow.com/questions/1012948/using-system-windows-forms-timer-start-stop-versus-enabled-true-false/1012979#1012979)所说，在功能方面没有区别。但是，应根据上下文和您自己的编码风格指南来决定使用哪个。这取决于您希望代码的读者如何解释您编写的内容。[`Start`](http://msdn.microsoft.com/en-us/library/system.timers.timer.start(VS.71).aspx)`\`[`Stop`](http://msdn.microsoft.com/en-us/library/system.timers.timer.stop(VS.71).aspx)[`Enabled`](http://msdn.microsoft.com/en-us/library/system.timers.timer.enabled(VS.71).aspx)

例如，如果您希望他们看到您在启动操作和停止操作时正在做什么，您可能希望使用`Start/Stop`. 但是，如果您想给人一种您正在启用功能的可访问性或功能的印象，那么使用`Enabled`and`true/false`是更自然的选择。

我认为仅使用其中一种不需要达成共识，您确实必须根据代码及其维护的需要做出决定。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-06-18T14:32:48.443

来自微软的文档：

> 调用 Start 方法与将 Enabled 设置为 true 相同。同样，调用 Stop 方法与将 Enabled 设置为 false 相同。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.enabled.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.enabled.aspx)

所以，我想没有区别...

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-06-18T14:32:38.520

不，他们是等价的。

请参阅[Timer.Enabled](http://msdn.microsoft.com/en-us/library/system.timers.timer.enabled(VS.71).aspx)和[Timer.Start](http://msdn.microsoft.com/en-us/library/system.timers.timer.start(VS.71).aspx) / [Timer.Stop](http://msdn.microsoft.com/en-us/library/system.timers.timer.stop(VS.71).aspx)

为了补充您关于共识的问题，我想说使用 Start/Stop 方法可能是更好的做法，而且我认为它的可读性也更好。

詹姆士。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-18T15:30:16.827

就个人而言，除了更改值之外，我不喜欢将属性设置为有太多后果，所以我倾向于坚持`Start()`/`Stop()`因为我很清楚（呃）当你调用一个方法时，你要求一些东西发生。

也就是说，我不认为设置`Enabled = true`将要做什么有很多模棱两可的地方:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-03T02:18:27.513

这是一个简单的代码来测试如何相互工作`Enabled`。`Start()``Stop()`

制作一个测试 Windows 窗体应用程序，添加两个简单的按钮并将此代码粘贴到`Form1()`构造函数中：

```
int c = 0;
Timer tmr1 = new Timer()
{
    Interval = 100,
    Enabled= false
};
tmr1.Tick += delegate
{
    c++;
};

// used to continously monitor the values of "c" and tmr1.Enabled
Timer tmr2 = new Timer()
{
    Interval = 100,
    Enabled = true
};
tmr2.Tick += delegate
{
    this.Text = string.Format("c={0}, tmr1.Enabled={1}", c, tmr1.Enabled.ToString());
};

button1.Click += delegate
{
    tmr1.Start();
};
button2.Click += delegate
{
    tmr1.Stop();
}; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-01-29T03:55:46.730

我不使用`timer.Stop()`and `timer.Start()`，因为它们是`timer.Enabled`. 如果您想在应用程序开始时（加载时）将计时器设置为 false，则必须使用`timer.Enabled = false`，`timer.Stop()`不会起作用。这就是我使用`timer.Enabled = false/true`.

# asp.net-mvc - Asp.net MVC 部分视图表单提交问题

> ID：1012950
> 
> 赞同：2
> 
> 时间：2009-06-18T14:26:50.263
> 
> 标签：asp.net-mvc, partial-views

提交表单后如何在母版页内返回部分视图。基本上我要做的是显示表单验证错误，但我只能设法返回部分视图而不是母版页或它所在的完整视图。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-23T08:49:15.327

我最终做的解决方案是在 TempData 中传递 ModelState 并将错误添加回部分视图中的 ModelState 中。它适用于其他解决方案没有的地方。还执行了客户端验证，但这有点不相关，因为我在服务器端解决方案之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T14:35:54.207

我正在使用带有 spark + jquery 的 MS Mvc，所以我不确定它是否能解决您的问题，但我认为您需要做的是返回一个部分并说明必须更新页面的哪个部分（通过 DOM 元素的 id） .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T14:39:12.017

ajax 是一种选择吗？XMLHttpRequest 可以只刷新部分视图，不会破坏您的体系结构，并阻止页面刷新。我会使用jquery。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-18T14:40:02.920

[这](https://stackoverflow.com/questions/930074/ms-mvc-form-ajaxifying-techniques)可能会有所帮助。

# emacs - Emacs 中 C 键的替代品？

> ID：1012952
> 
> 赞同：5
> 
> 时间：2009-06-18T14:27:16.253
> 
> 标签：emacs, keyboard

现在在 windows 中只使用了整整一周的 emacs，我可以感觉到 CTRL 键组合开始受到伤害。没有人因为emacs而遭受RSI :-) ？

有什么办法可以暂时选择另一个键（我注意到M键可以用ESC键代替）

我想使用 Tab 键进行更改。有什么办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-18T14:29:23.627

[本指南](http://www.emacswiki.org/emacs/MovingTheCtrlKey)看起来很有希望。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-18T14:29:56.373

谷歌 Ctrl2Cap 实用程序。它允许您将 CAPS 锁定映射到附加的 Ctrl 键。不仅对 emacs 很方便，而且在一般情况下都很方便。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-18T14:29:56.153

按照有关[移动控制键的教程进行操作。](http://www.emacswiki.org/emacs/MovingTheCtrlKey)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-19T18:43:54.697

经过几年每天 16 小时的 emacs 编码后，我确实遭受了一年的 RSI。我的解决方案是使用[Kinesis Countoured](http://www.kinesis-ergo.com/contoured.htm)键盘。这意味着所有修饰键都在我的拇指之下。

如果您考虑一下，现有的键盘会鼓励我们使用小指，就好像它们是对生的拇指一样。因此，我的自定义键盘布局称为[I am not a koala](http://www.scannedinavian.com/~shae//blog/2005-11-03.html)。我比标准的 Kinesis 布局更进一步，也将 shift 键移到了我的拇指下（我交换了 Shift_L 和 DEL）。

我承认，对于大多数人来说，移动控制键就足够了，但对我来说，我的 Kinesis 和自定义键盘映射更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-25T15:24:35.670

如果您已经熟悉 vi，您可能想尝试 viper-mode。使用 vi 键绑定可以让您的手指更多地停留在主行上，并且减少对小指的压力。有时您仍然需要使用 CTRL，但频率要低得多。

# sql-server - SQL Server Management Studio 中的约束 GUI 是如何工作的？

> ID：1012960
> 
> 赞同：7
> 
> 时间：2009-06-18T14:29:05.423
> 
> 标签：sql-server, tsql, ssms

在我的 TSQL 表中，我使用以下 SQL 语句添加了一个约束

```
alter table disabledqualities
add constraint uc_uIdQualCode
unique (userId, qualitycode) 
```

我是手工完成的，因为我无法弄清楚 GUI 应该如何工作。
你添加一个约束，然后你会得到一个窗口，你应该在其中“定义”你的约束。它基本上只是一个文本框。而且无论我似乎输入了什么，它都不会验证..

我应该在框中输入什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-18T14:36:51.600

您将使用**新索引**而不是新约束来添加唯一约束（读取索引） **新约束**是添加检查约束

在**新的索引**窗口中检查唯一性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T14:35:32.383

例如，列必须介于 0 和 1 之间，

```
((0)<=[TABLE].[COLUMN] AND [TABLE].[COLUMN]<=(1)) 
```

添加唯一约束时，它实际上是一个索引，如主键，因此您单击索引/键。

# iphone - 如何滚动到 tableview 行？

> ID：1012961
> 
> 赞同：0
> 
> 时间：2009-06-18T14:29:08.807
> 
> 标签：iphone, cocoa-touch, uitableview, uiviewcontroller, uiscrollview

我有一个继承自 UITableViewDelegate 和 UIScrollViewDelegate 的 UIViewController（名为 VC）。之前的 UIViewController 加载 VC 是这样的：

```
[self.view addSubview:VC.view]; 
```

这意味着 viewWillAppear 不会触发。我可以在上述行之后添加该方法：

```
[VC viewWillAppear]; 
```

但是它会在 cellForRowAtIndexPath 之前触发，这会在我尝试滚动时导致空的 tableview 引用。

我想在加载 VC 时滚动到表中的特定行。但是因为我不知道 tableview 的 cellForRowAtIndexPath 何时完成（缺少 viewWillAppear），所以我没有任何地方可以放置滚动代码。我已经保留了对 tableview 的引用，并且可以将其用于滚动。但是我在哪里可以放置滚动代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-28T06:21:52.943

当然，当新视图控制器的视图添加并变得可见时，它将调用 viewDidAppear 而不是 viewWillAppear。我会把滚动代码贴在那里。

如果这仍然不起作用，请尝试延迟 init 方法。像这样的东西：

```
[self performSelector:@selector(myScrollingFunction) withObject:nil afterDelay:2.0]; 
```

您可以玩弄延迟时间以获得适合的东西，尽管您的视图控制器的视图可能并不总是在相同的时间后出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T14:59:34.503

你的意思是你的 UIViewController 符合 UITableViewDelegate 和 UIScrollViewDelegate 协议而不是“继承”？

您可以直接从您的父视图控制器调用 [VC viewWillAppear:]。如果 VC 处理的视图始终是另一个视图控制器视图的子视图，那么您真的需要一个完整的 UIViewController 实例来支持您的 UITableView 吗？您可以只为表视图提供委托和数据源实现。

然后，您可以在定义表视图的 NIB 中（通过在 Interface Builder 中添加对象）或在当前是 VC 父级的视图控制器的 viewDidLoad 方法中实例化您的委托和数据源。

# design-patterns - 您在我的设计中看到任何（反）模式吗？如何识别图案？

> ID：1012967
> 
> 赞同：1
> 
> 时间：2009-06-18T14:29:28.277
> 
> 标签：design-patterns, abap

我有一个用 ABAP / BSP 编码的 Web 应用程序。我有兴趣提供优秀的代码，所以也许你可以帮助我识别一些好的或坏的模式。其实我在关注。声明一个基类对象并使用子类根据某些参数动态实例化它。基类有一些获取数据的方法（），子类使用这些数据并可能对其进行操作。

这里有一些快速的基本图片（抱歉不认为它符合任何标准或语言，但应该给你一个想法）

[替代文字 http://img35.imageshack.us/img35/4351/designkdp.jpg](http://img35.imageshack.us/img35/4351/designkdp.jpg)

这样的事情可以吗？是否有任何已知的模式隐藏或者我应该重构并使用模式？我喜欢在这里提一些建议。我已经阅读了维基百科的文章，但我没有看到完全适合的模式。（还订购了一些书，但你们肯定更快:)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-18T14:32:56.490

这似乎是一种[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T14:36:23.597

这是 Gamma、Helm、Johnson 和 Vlissides 所著的《设计模式：可重用的面向对象软件的元素》一书中的工厂模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T14:37:12.800

BaseClass 和 SubClasses 在我看来像是（伪代码）

```
interface IDataProvider{
  GetData();
}

class SubClass1 implements IDataProvider{
  GetData(){
     ...
  }
} 
```

您使用的实例化策略似乎像[工厂](http://www.google.com/search?source=ig&hl=en&rlz=&q=Factory+Pattern&btnG=Google+Search&aq=f&oq=)一样工作。您可以做的是在一些 HTMLRenderingEngine 或其他任何东西（我不熟悉 ABAP/BSP）中布置渲染，只是为了让演示文稿与其余逻辑分离。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T15:53:01.800

继承很有趣，但应该作为最后的手段。我并不是说你不能像以前那样做——你的解决方案是完全有效的，只是为了建议一个替代方案......

如果你有“DataClass”，你可以在其中设置一个 processData 对象（或不）。processData 对象实际上是具有单个方法“processData”的接口。

当您调用 getData 时，它可能看起来像这样：

```
if(processDataObject == null)
    return getInformation();
else
    return processDataObject.processData(getInformation()); 
```

哎呀，如果您定义了一个“直通” processData 对象，它什么都不做并将其用作默认的“processDataObject”，那么整个 getData 方法将变为：

```
return processDataObject.processData(getInformation()); 
```

这将允许动态创建类来执行您想要的任何类型的处理——它将简化您在此设计之上构建的东西。

这种设计风格我花了一段时间才接受，你可能一开始不喜欢避免继承的想法，我只是要求你考虑一下。这些天我很少使用继承，当我使用它时，它总是在很浅的树上。

# sql-server - 为什么我的唯一约束出现在索引下而不是约束下？

> ID：1012969
> 
> 赞同：0
> 
> 时间：2009-06-18T14:29:48.120
> 
> 标签：sql-server, tsql, ssms

我在我的 tsql 表上创建了一个约束，如下所示：

```
alter table disabledqualities
add constraint uc_uIdQualCode
unique (userId, qualitycode) 
```

在 MSSMStudio 中，约束显示在索引下而不是约束下。

为什么？

--EDIT--
我知道它创建了一个索引来强制执行约束，但是为什么会有一个名为“约束”的节点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-18T14:31:11.160

SQL Server 在后台创建索引以强制执行约束

这是另一种编写方式，通过添加非聚集告诉 sql server 使用非聚集索引，您还可以在没有聚集的 PK（默认）或另一个聚集索引的情况下创建聚集索引

```
alter table disabledqualities
add constraint uc_uIdQualCode
unique nonclustered (userId, qualitycode) 
```

[edit] 该节点是添加检查约束，唯一约束添加在索引下

无论哪种方式都远离巫师

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T14:38:28.477

检查约束和默认约束显示在约束节点下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T14:31:16.603

SQL 使用索引来强制执行唯一约束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T14:36:47.793

> 我知道它创建了一个索引来强制执行约束，但是为什么会有一个名为“约束”的节点？

该节点用于显示`CHECK`约束。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-18T14:37:19.900

真正的答案是“因为微软是这么说的。如果你想知道答案，你必须问他们”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-18T14:37:47.557

因为 UNIQUE 约束可以在 sysindexes 系统视图中找到

select * from sysindexes where name = 'uc_uIdQualCode'

这很合乎逻辑要从 Studio 添加新的唯一约束，您需要单击“管理索引和键”按钮。所以如果你从索引中添加它，你必须在索引中看到它:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-18T17:25:47.297

我在想也许你不明白约束中可能会出现什么，因为你不知道检查约束是什么。检查约束将检查插入或更新的数据，以查看它是否符合某种业务规则。它用于确保数据完整性。例如，如果您有一个只应包含值 1,4 或 5 的整数字段，那么您将设置一个检查约束以确保不会将 9 添加到该字段中。日期字段的检查约束可能指定它必须晚于作为 PlannedCompletionDate 的字段的当前日期和时间，或者 CompletionDate 必须晚于 StartDate。这些都是在约束下出现的东西。

# exception - PowerShell 可以将错误输出自动转换为异常吗？

> ID：1012973
> 
> 赞同：2
> 
> 时间：2009-06-18T14:30:21.160
> 
> 标签：exception, powershell

在我的 PowerShell 脚本中，我正在调用一些命令行工具（不是 cmdlet），它们可能会输出错误文本并在错误条件下将 errorlevel 设置为非零。我希望这些工具中的任何一个出现任何错误以中止我的脚本。

最好的方法是什么？

有没有办法让 PowerShell 自动检查 $？和 stderr 在每个命令之后并抛出异常？我在想一些类似于 4NT 或 VBScript 的“错误”的东西——一个全球手表。不是很面向对象，所以我希望 PowerShell 有更好的东西。

[编辑：最后几个问题移到[这里](https://stackoverflow.com/questions/1019213/what-is-the-right-way-to-do-error-handling-in-powershell)。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T14:52:10.337

您将需要编写一个函数来执行此操作，或者在脚本中不断检查错误级别。

有关执行此操作的功能的一些信息位于：

[http://www.eggheadcafe.com/conversation.aspx?messageid=31829234&threadid=31829225](http://www.eggheadcafe.com/conversation.aspx?messageid=31829234&threadid=31829225)

和其他有用的信息可以在[windows powershell 博客](http://blogs.msdn.com/powershell/archive/2006/09/15/ErrorLevel-equivalent.aspx)上找到。

# php - 将 URL 值插入 XML 页面

> ID：1012976
> 
> 赞同：0
> 
> 时间：2009-06-18T14:31:33.937
> 
> 标签：php, xml, url

我试图编写一个 php 页面，它将获取 url 值并将它们插入到 xml 文件中。任何示例文件都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T21:10:08.167

您可以执行以下操作：

```
<?php

// get parameters
$parameters = explode ( "&", $_SERVER ['QUERY_STRING'] );

// create new dom document
$doc = new DOMDocument();

// create new root node
$root = $doc->appendChild ( $doc->createELement ( "querystring", "" ));

// iterate all parameters
foreach ( $parameters as $parameter ) {
    // get keypair from parameter
    $keypair = explode ( "=", $parameter );
    // check if we have a key and a value
    if ( count ( $keypair ) == 2 ) {    
        // add new node to xml data
        $root->appendChild ( $doc->createElement( $keypair[0],$keypair[1] ) );
    }   
}

// save XML to variable
$xml = $doc->saveXML();

// echo or output to file...
echo $xml; 
```

?>

它将获取 URL 的参数（键/值对）并将其添加到新的 XML 文档中。在 saveXML 之后，您可以对 XML 数据做任何您想做的事情。

希望有帮助。

约翰。

# flash - flash.text.TextFormat 中的多种字体

> ID：1012984
> 
> 赞同：0
> 
> 时间：2009-06-18T14:33:39.237
> 
> 标签：flash, actionscript-3

有没有办法像在 flash.text.StyleSheet 中一样在 flash.text.TextFormat 中设置多种字体？我想要做的是为我的项目中的所有文本提供全球通用的 TextFormat，我想通过提供多种字体来使其灵活。我在 flash.text.TextFormat 和 flash.text.StyleSheet 之间做出决定，最后我决定使用 flash.text.TextFormat，因为我不需要任何花哨的格式，也不想将所有文本包装到像`<span class="common">...</span>`flash.text.StyleSheet 这样的东西似乎不支持 * 选择器（如果我没记错的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-18T15:02:16.510

我使用样式表——我发现它们更容易管理。您甚至可以使用 parseCSS 函数解析外部 CSS 样式表。

您可以通过将所有内容包装在一个标签中来解决没有 * 选择器的问题 - 可能通过一个函数，然后将默认样式设置为 body 标签。

使用样式表还可以通过定义不同的样式来更轻松地设置部分文本的样式。

希望这可以帮助

乔什

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T15:55:02.083

每种文本格式只有一种字体。（您可以将多种格式应用于文本字段）

我在当前项目中一直在使用的是一个静态类，它定义了我所有的文本格式，以及一个用于从我的应用程序的其他位置检索它们的简单接口。我采用了类似于 HTML 的命名约定来帮助它们保持清晰。它看起来像这样：

```
public class TextFormats 
{
    public static const NONE:uint = 0;
    public static const H1:uint = 1;
    public static const H2:uint = 2;
    public static const H3:uint = 3;
    public static const P:uint = 4;
    public static const EM:uint = 5;
    public static const ERROR:uint = 6;
    //ect...

    static private var _initialized:Boolean;
    static private var _formats:Object;

    public static function getFormat(type:uint):TextFormat
    {
        if (!_initialized) init();
        return _formats[type] || _formats[NONE];
    }

    static private function init():void
    {
        _formats = { };
        _formats[NONE] = new TextFormat();
        ///ect...

        _initialized = true;
    }
} 
```

我知道这并不完全是您想要的，但它可能会帮助或激发一个想法。

# c# - 如何按名称对文件列表进行排序以匹配 Windows 资源管理器的显示方式？

> ID：1012985
> 
> 赞同：3
> 
> 时间：2009-06-18T14:34:08.407
> 
> 标签：c#, .net, sorting

假设我已经按名称对资源管理器中的文件列表进行了排序，如下所示：

2009-06-02-4.0.9.txt
2009-06-02-4.0.10.txt
2009-06-02-4.0.11.txt
2009-06-02-4.0.12.txt

我有一个 FileInfo 比较器，它按名称对 FileInfo 对象数组进行排序：

```
 class FileInfoComparer : IComparer<FileInfo> {
        public int Compare(FileInfo x, FileInfo y) {
            return string.Compare(x.FullName, 
                                  y.FullName, 
                                  StringComparison.OrdinalIgnoreCase);
        }
    } 
```

使用此比较器从上面对相同的文件列表进行排序会产生：

2009-06-02-4.0.10.txt
2009-06-02-4.0.11.txt
2009-06-02-4.0.12.txt
2009-06-02-4.0.9.txt

这是有问题的，因为顺序非常重要。

我想有一种方法可以模仿 Windows 在 C# 代码中所做的事情，但我还没有找到方法。任何帮助表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-18T14:44:04.660

Windows 资源管理器使用一个名为：

```
StrCmpLogicalW 
```

以“逻辑”方式执行排序。

有人还在[C#](http://www.codeproject.com/KB/recipes/csnsort.aspx)中实现了一个类，它将为您执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-18T14:42:36.050

您还可以使用 P/Invoke 调用 win32 API。这将是最一致的行为，并且可能表现更好（我将对这两个选项进行基准测试）。甚至代码项目链接也不完全符合 windows 的行为，也不是未来的证明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-18T14:44:24.767

您需要一个自然数字排序，不幸的是在 .NET 框架中没有本机实现。[CodeProject 上的这篇文章](http://www.codeproject.com/KB/recipes/csnsort.aspx)将告诉您有关制作自己的 .NET 克隆所需了解的所有信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-23T20:50:18.607

有时，根据数据，您可以这样做：

```
using System.Linq;         
...

    string[] dirs = _fileSystem.GetDirectories(_root);
    dirs = dirs.OrderBy(x => x.Length).ThenBy(x => x); 
```

这适用于您在问题中拥有的示例数据。

# podcast - 为托管在 Amazon S3 服务器上的 MP3 生成 iPod 和 Zune 兼容的 RSS 源

> ID：1012987
> 
> 赞同：0
> 
> 时间：2009-06-18T14:34:11.527
> 
> 标签：podcast

我很少有托管在 Amazon S3 服务器上的 MP3 录音。我想将这些录音（MP3 文件）作为 RSS 提要向用户公开，以便他们可以使用他们的 iPod (Itunes) 或 Zune 下载它们。

所有 MP3 都托管在 Amazon S3 服务器上，我还想知道哪个播客被下载了多少次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-18T14:39:51.890

它基本上只是构建 RSS 文件并将其托管在 HTTP 服务器上的问题。然后，您只需向用户提供该提要的 URL，他们就可以在 iTunes 中订阅。以下是 iTunes RSS 技术规范的链接：[iTunes Podcast RSS 技术规范](http://www.apple.com/itunes/whatson/podcasts/specs.html#rss) 该页面上还有一个示例供稿可以帮助您入门。

存储文件实际位置的元素就是`enclosure`元素。它有一个 URL 属性，需要设置为 MP3 的 URL。

例子：`<enclosure url="http://example.com/podcasts/everything AllAboutEverythingEpisode2.mp3" length="5650889" type="audio/mpeg"/>`

您的所有机箱元素只需要指向 Amazon S3 中的正确位置。

# xml - xslt 排序

> ID：1012989
> 
> 赞同：1
> 
> 时间：2009-06-18T14:34:26.317
> 
> 标签：xml, xslt

我有一个在 xml 中返回的项目列表。每个项目都有不同的元素。其中一个元素是“位置”，其取值在 0-6 之间

如果 Position 为 0，则不应显示该项目，但如果它在 1 到 6 之间，我需要显示它。

我该如何做 xslt 以便它按“位置”的顺序列出项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-18T15:07:15.127

```
<xsl:template match="list_of_items">
  <xsl:apply-templates select="item">
    <xsl:sort select="position" data-type="number" />
  </xsl:apply-templates>
</xsl:template>

<xsl:template match="item">
  <xsl:if test="position &gt; 0">
    <xsl:copy-of select="." />
  </xsl:if>
</xsl:template> 
```

或者

```
<xsl:template match="list_of_items">
  <xsl:apply-templates select="item[position &gt; 0]">
    <xsl:sort select="position" data-type="number" />
  </xsl:apply-templates>
</xsl:template>

<xsl:template match="item">
  <xsl:copy-of select="." />
</xsl:template> 
```

# java - Java JUnit assertEquals 与 Long

> ID：1012994
> 
> 赞同：12
> 
> 时间：2009-06-18T14:35:32.133
> 
> 标签：java, junit, long-integer

```
 assertEquals( new Long(42681241600) , new Long(42681241600) ); 
```

我试图检查两个长数字，但是当我尝试编译这个时，我得到了

```
 integer number too large: 42681241600 
```

错误。文档显示有一个 Long,Long assertEquals 方法，但它没有被调用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-06-18T14:37:55.640

你要：

```
assertEquals(42681241600L, 42681241600L); 
```

您的代码正在调用 assertEquals(Object, Object)。您还需要在数字末尾附加“L”字符，以告诉 Java 编译器该数字应编译为 long 而不是 int。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-18T14:38:22.393

42681241600 被解释为一个`int`字面量，它太大了。附加一个“L”以使其成为`long`文字。

如果您想获得所有技术知识，可以查看[JLS 的 §3.10.1](http://java.sun.com/docs/books/jls/third_edition/html/lexical.html#3.10.1)：

> 如果整数文字以 ASCII 字母或(ell)`long`为后缀，则它是类型；否则它是类型[(§4.2.1)](http://java.sun.com/docs/books/jls/third_edition/html/typesValues.html#9151)。后缀是首选，因为字母(ell) 通常很难与数字(one) 区分开来。`L``l``int` `L``l``1`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-18T17:40:21.360

您通常还应该考虑使用 Long.valueOf ，因为这可能会进行一些优化：

```
Long val = Long.valueOf(1234L); 
```

从[J2SDK](http://java.sun.com/javase/6/docs/api/java/lang/Long.html#valueOf(long))：

> public static Long valueOf(long l)
> 
> 返回一个 Long 实例，表示指定的 long 值。如果不需要新的 Long 实例，则通常应优先使用此方法而不是构造函数 Long(long)，因为此方法可能会通过缓存频繁请求的值来显着提高空间和时间性能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-18T14:38:50.317

在您的号码末尾附加一个“L”，例如：

```
new Long(42681241600L) 
```

在 Java 中，每个文字数字都被视为一个整数。