# StackOverflow 问答 11297000-11297999

# html - 链接到网站的 PDF 按钮

> ID：11297002
> 
> 赞同：0
> 
> 时间：2012-07-02T15:48:16.510
> 
> 标签：html, pdf, button, hyperlink

有谁知道如何（或者甚至可能）在 html 页面上创建一个按钮，当该网页保存为 PDF 时，该按钮仍然有效？我正在尝试将此按钮链接到网页，以便在 PDF 中，用户可以单击按钮转到链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:45:33.270

有几个选项：

1.  使用`<a/>`标签并将其设置为链接。
2.  如果您的 PDF 转换引擎支持 javascript，那么您可以提供`onclick`行为。

我会选择#1。此外，如果您正在寻找支持 javascript 的 PDF 转换工具，您可以使用[WKHTMLTOPDF](http://code.google.com/p/wkhtmltopdf/)或使用基于 API 的 HTML 到 PDF 转换工具[Sprint PDF](http://www.sprintpdf.com)。

# ssis - SSIS 平面文件源 - 文本被截断或目标代码页中的一个或多个字符不匹配

> ID：11297005
> 
> 赞同：4
> 
> 时间：2012-07-02T15:48:27.757
> 
> 标签：ssis

我正在尝试将记录从逗号分隔的平面文件导入 SQL 数据库文件，我得到“文本被截断或目标代码页中的一个或多个字符不匹配”。当源文件在特定字段中有超过 50 个字符时。该字段的目标文件目标是 1000 个字符，因此这应该不是问题。我将其缩小到文本文件中的“A123456789B123456789C123456789D123456789E123456789”确实导入了，而“A123456789B123456789C123456789D123456789E123456789F”抛出了错误。

我怎样才能让它在截断之前允许更多字符？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T16:16:02.300

我在第二个答案中找到了答案： [Importing CSV file into SQL server...](https://stackoverflow.com/questions/2910097/importing-csv-file-into-sql-server) 感谢 Eoan。

最终，在源数据文件的高级编辑器中，在 Input and Output Properties 选项卡上的 External Columns 下，有一个默认为 50 的 Length 属性。将其更改为匹配目标数据库文件就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T07:15:16.193

另一个快速解决方案：

如果您有 Microsoft Excel，请将 CSV 保存为 XLSX。而且，导入 XLSX 而不是 CSV 我发现导入向导比 CSV 更能理解 Excel。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T10:09:13.663

即使我正在导入一个 excel 文件，我也遇到了文本被截断的问题。我发现

> SSIS 系统通过检查前 8 行左右来确定 EXCEL 列的数据类型（荒谬）。因此，如果前 8 行全部小于 255 个字符，并且在第 8 行之后有大于 255 个字符的值，则会发生截断错误。
> 
> 因此解决方法是在有问题的列中放入一个具有较大（> 255 个字符）值的临时行，然后运行集成。完成后，删除临时行。-ryan1999

[（在这里](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/0c245265-79fc-406c-8ec6-6019eebc4f68/text-was-truncated-or-one-or-more-characters-had-no-match-in-the-target-code-page?forum=sqlintegrationservices)查看答案）

我的工作是：

1.  添加另一列，其中包含应该被截断的列的长度
2.  将该列从大到小排序
3.  删除列。

希望这可以帮助某人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-09T15:09:27.557

在我的情况下 - 将有问题的行作为第一行移动（如果可以的话，因为 csv/文本文件可能非常大）。

*   运行预览。
*   Turns out the field had a comma in there, but thankfully it had double quotes showing separation of fields.
*   Went to 'Choose a Data Source" dialog > General, added Text qualifier: " (double-quotes)

# javascript - 在 AJAX 请求中重定向到登录页面

> ID：11297011
> 
> 赞同：1
> 
> 时间：2012-07-02T15:48:56.783
> 
> 标签：javascript, ajax, jquery, redirect

在我的 JS 代码中，我正在检查 AJAX 响应上的 403 状态代码并重定向到这样的登录页面：

```
$.ajax({
 statusCode: {
   403: function() {
      window.location.href = "/login";
   }
 }
}); 
```

我应该使用我网站的完整网址，如下所示：

```
 403: function() {
      window.location.href = "www.mysite/login";
   } 
```

还是使用相对的就足够了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:52:22.183

使用相对 URL 就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:52:30.563

尝试使用相对 url 来查看它是否比在此处发布更快？

我认为它适用于相对网址

# ruby - 单个嵌套资源的正确路径

> ID：11297015
> 
> 赞同：3
> 
> 时间：2012-07-02T15:49:02.493
> 
> 标签：ruby, ruby-on-rails-3, url, routes, nested-resources

我有 2 个资源，一个是另一个的嵌套资源：

`parent_resource`和`child_resource`。

这给了我以下路线：

```
somesite.com/parent_resources/14
somesite.com/parent_resources/14/child_resources/1 
```

`child_resource`然而，每个人都只会有一个`parent_resource`，所以对于使用该网站的人来说，这非常令人困惑。我希望 child_resource 路径看起来像这样：

```
somesite.com/parent_resource/14/child_resource
somesite.com/parent_resource/14/child_resource/edit
etc 
```

这样做的正确方法是什么？

我的路线.rb

```
resources :parent_resources do

   resource :child_resource do
   end

end 
```

从导轨到布线：

```
A singular resourceful route generates these helpers:

new_geocoder_path returns /geocoder/new
edit_geocoder_path returns /geocoder/edit
geocoder_path returns /geocoder 
```

但是表演呢？

我的 rake 路线生成的路线：

```
parent_resource_child_resource      POST   /parent_resources/:parent_resource_id/child_resource(.:format)                 child_resources#create

new_parent_resource_child_resource  GET    /parent_resources/:parent_resource_id/child_resource/new(.:format)             child_resources#new

edit_parent_resource_child_resource GET    /parent_resources/:parent_resource_id/child_resource/edit(.:format)            child_resources#edit

                                    GET    /parent_resources/:parent_resource_id/child_resource(.:format)                 child_resources#show

                                    PUT    /parent_resources/:parent_resource_id/child_resource(.:format)                 child_resources#update

                                    DELETE /parent_resources/:parent_resource_id/child_resource(.:format)                 child_resources#destroy 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T15:56:50.510

在您的路线中，使用单数`resource`方法定义子资源：

```
resources :parent_resources do
  resource :child_resource
end 
```

按照惯例，孩子的控制器仍然是 ChildResourcesController，复数形式。

Rails 有一个很好的路由指南。请参阅有关[单一资源](http://guides.rubyonrails.org/routing.html#singular-resources)的部分。

# c++ - 使用 .tellg() 的输出来了解文件中的位置。

> ID：11297023
> 
> 赞同：0
> 
> 时间：2012-07-02T15:49:55.363
> 
> 标签：c++

我有一个下载的 C++ 实用程序，由于读取输入文件时出现错误而死机。不幸的是，它输出的只是“偏移量错误：文件中的 69570744324”；通过查看它的源代码，我发现它实际上是在那里打印出 .tellg() 输出。

我不太明白如何建设性地使用此偏移信息来理解输入文件中的错误。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:58:03.533

如果你正在处理一个文本文件，你可以使用这个简单的命令从某个偏移量开始输出它的内容：

```
tail -c +offset yourfile 
```

其中偏移量从 1 开始。查看给定偏移量周围的文件内容可能有助于您理解问题。也就是说，偏移量在我看来非常大，因此可能无法正确报告。

# java - 如何确定已弃用的权限？

> ID：11297025
> 
> 赞同：5
> 
> 时间：2012-07-02T15:50:00.557
> 
> 标签：java, android, permissions, manifest, deprecated

我正在开发一个具有庞大源代码库的 android 应用程序。我不喜欢我的应用程序需要不少权限，我开始怀疑有一些已弃用且不再需要。

问题是 -**如何确定是否如此，哪些真的被弃用了？**

我试图删除可疑权限并重新编译它（使用 Eclipse Juno），并希望编译后将其标记为错误或警告，但事实并非如此。

还尝试在代码上显式运行 Lint，但它也没有检测到它。

该应用程序已编译并在设备上运行，我猜当相关 API 将在某些代码流中调用时，这将引发带有 AccessDenied 的运行时异常。

是否有任何有效的方法来检测该 API，而无需浏览所有源代码或在多个场景中运行应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:23:42.443

使用 -Djava.security.debug=access,failure 运行您的代码。这将向您显示实际使用的所有权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:17:22.690

我不知道它的效果如何，但看起来加州大学伯克利分校的一些研究人员正在研究一个项目来扫描 Android 应用程序并显示他们使用的权限。更多信息请访问[http://www.android-permissions.org/](http://www.android-permissions.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:25:40.793

Unfortunately, the short answer is no. There's no automated way to detect it. The only tried and true methods are removing permissions one by one and testing, or stepping through your code to inspect.

There should be, though. I suspect it wouldn't be that hard to write a script that reads your project code and determines the needed permissions. The hardest part would be keeping it up to date with API changes.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T02:29:15.433

我认为你正在朝着错误的方向前进。

不要询问您可以删除哪些权限，而是查看列表并生成一个经过研究的理由，说明为什么每个权限都是必要的，以及如果删除了权限，哪些功能必须被禁用。

如果您了解权限的作用，那么生成搜索查询以找到至少在 Java 代码中使用它的更有可能的位置就不难了。但是许多清单（甚至是偶尔的 SO 答案）都具有不需要的权限；平台甚至不会授予非系统应用程序的权限请求并不少见。

# android - 第二个响应出现 org.ksoap2.serialization.SoapPrimitive 错误

> ID：11297028
> 
> 赞同：0
> 
> 时间：2012-07-02T15:50:11.087
> 
> 标签：android, soap, ksoap2

我正在使用 Android 2.1 API。我通过 ksoap 协议从网上下载数据。结果就是这个异常`org.ksoap2.serialization.SoapPrimitive`，不明白为什么。

用debugging，`for`第一轮运行正常，第二轮就挂了education `re = (SoapObject) ((SoapObject) envelope.getResponse ()). getProperty (s)`，报错`org.ksoap2.serialization.SoapPrimitive`。

这是代码：

```
request = new SoapObject(NAMESPACE, METHOD_NAME);
request.addProperty("dev", false);
request.addProperty("Cap", input_cap.getText().toString());

envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
envelope.addMapping(NAMESPACE,Offerta.Offerta_CLASS.getSimpleName(),Offerta.Offerta_CLASS);

androidHttpTransport = new HttpTransportSE(URL);
androidHttpTransport.call(SOAP_ACTION, envelope);

int nOff = ((SoapObject) envelope.getResponse()).getPropertyCount();
SoapObject re;

for (int i = 0; i < nOff; i++) {
  re = (SoapObject) ((SoapObject) envelope.getResponse()).getProperty(i);
  img.setImageBitmap(getBitmap(Integer.parseInt(re.getProperty(0).toString())));
  titolo.setText(re.getProperty(1).toString());
  descrizioneTitolo.setText(re.getProperty(3).toString());
  provincia.setText(getProvincia(Integer.parseInt(re.getProperty(13).toString())));
  sintesi.setText(re.getProperty(2).toString());
  contenitore_paese.addView(view);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:26:36.003

错误消息听起来像您在下一行中的第二个属性不是 SoapObject 而是 Soap 原语，它在运行时会破坏它，因为您正在对它进行类型转换。

```
re = (SoapObject) ((SoapObject) envelope.getResponse()).getProperty(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T21:55:32.233

只需转换为 SoapPrimitive 而不是 SoapObject。我也不知道为什么，但如果你看到代码，它可能是合乎逻辑的。

```
SoapPrimitive re = (SoapPrimitive)  envelope.getResponse().getProperty(i) ; 
```

# gwt - GWT 平台网守用户需要在页面刷新时重新登录

> ID：11297029
> 
> 赞同：0
> 
> 时间：2012-07-02T15:50:11.360
> 
> 标签：gwt, gwt-platform, gwt-gin

如果用户刷新页面，保持用户登录状态的最佳做法是什么？假设用户已经登录。

目前，看门人正在执行其职责，但当用户刷新（F5，浏览器按钮）页面时。用户被重定向到登录屏幕（也称为默认位置）。

url 中有一个 nametoken 来决定应该加载什么演示者。

有没有人找到重新登录用户的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:23:03.617

我将描述我用来保持用户登录并在 gwt 中跟踪的内容，也许这会给你一个提示：

对于会话跟踪，我有一个单例 MySecurityManager（使用入口点初始化），它通过简单的“ping”请求定期连接到服务器，如果会话过期，服务器会给出响应，并且如果您由另一个用户登录（在另一个标签）。

我实施了活动和地点支持，因此 F5 让我保持在同一个活动上。因此，当浏览器刷新时，会选择正确的位置并初始化 SecurityManager 并首先检查会话以及会话是否正常。

# python - Matplotlib - 已分箱数据的阶梯直方图

> ID：11297030
> 
> 赞同：17
> 
> 时间：2012-07-02T15:50:14.293
> 
> 标签：python, numpy, matplotlib, scipy

我正在尝试使用已经分箱的数据获得直方图。我一直在尝试使用它，但我似乎无法[从示例](http://matplotlib.org/mpl_examples/pylab_examples/histogram_demo_extended_02.png)`bar()`中弄清楚如何使它成为像这样的阶梯直方图，而不是填充直方图。

![在此处输入图像描述](../Images/19f1bd14118bc8e383ccd79b19ec1338.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T16:26:54.773

您可以通过抵消您的数据并`plot`改用以下方法来作弊：

```
from matplotlib import pyplot
import numpy as np

#sample data:
x = np.arange(30)
y = np.cumsum(np.arange(30))
#offset the x for horizontal, repeat the y for vertical:
x = np.ravel(zip(x,x+1))
y = np.ravel(zip(y,y))

pyplot.plot(x,y)
pyplot.savefig('plt.png') 
```

剧情：

![在此处输入图像描述](../Images/7282df6f615ca9a8a03831644e43b977.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-14T13:10:28.633

最简单的解决方案是将分箱数据集转换为未分箱的加权数据集（元素数 == 箱数）。未分箱的数据集将由等于箱中心的数据值和等于每个箱中的值的权重组成。例如，假设您的分箱数据是，

```
binedges = [0.0, 1.0, 2.0, 3.0]
ybinned = [11., 22., 33.] 
```

相应的加权数据集将是，

```
y =       [0.5, 1.5, 2.5]
weights = [11., 22., 33.] 
```

请注意，使用 bin 中心的选择是任意的，您可以使用 bin 内的任何点。一旦你生成了 un-binned 数据集，你就可以使用正常的 matplotlib 直方图绘图（即 Axes.hist）。

python中的示例实现如下：

```
def plot_binned_data(axes, binedges, data,
               *args, **kwargs):
    #The dataset values are the bin centres
    x = (binedges[1:] + binedges[:-1]) / 2.0
    #The weights are the y-values of the input binned data
    weights = data
    return axes.hist(x, bins=binedges, weights=weights,
               *args, **kwargs) 
```

您现在可以完全访问所有 Axes.Histogram 绘图选项，包括`histtype="step"`创建您想要的阶梯直方图。

使用此功能的示例是，

```
import numpy
import matplotlib.pyplot as plt

#Create a dataset
dataset = numpy.random.normal(size=100)
#Bin the dataset
binedges = numpy.linspace(-5.0, 5.0, num=10)
y, binedges = numpy.histogram(dataset, binedges)

#Plot the dataset
fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)
plot_binned_data(ax, binedges, y, histtype="step")
plt.show() 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:16:22.277

[来自http://matplotlib.sourceforge.net/examples/pylab_examples/histogram_demo_extended.html](http://matplotlib.sourceforge.net/examples/pylab_examples/histogram_demo_extended.html)的随附来源

这是他们绘制该图的方式：

[剪辑]

你想要的那一点似乎是

```
pylab.hist(x, bins=bins, histtype='step')
                            ^
                        right here 
```

**编辑：**如果您想知道 hist() 的工作原理，请查看源代码 - 它在 matplotlib/axes.py 中从第 7407 行开始定义。

查看第 7724 行，

```
x = np.zeros( 2*len(bins), np.float )
y = np.zeros( 2*len(bins), np.float ) 
```

对于 N 个条形，bins 是 N+1 个值的 numpy.ndarray，是每个条形的边。他们将每个条的值配对（这是 fraxel 在下面使用 np.ravel 所做的）并将数据点向左移动半条以使它们居中

```
x[0::2], x[1::2] = bins, bins
x -= 0.5*(bins[1]-bins[0]) 
```

设置每个条的高度，成对但偏移一个（相对于 x 值）以产生阶梯效果

```
# n is an array of arrays containing the number of items per bar
patches = []    # from line 7676
for m, c in zip(n, color):
    y[1:-1:2], y[2::2] = m, m
    patches.append(self.fill(x, y, closed=False, edgecolor=c, fill=False)) 
```

而这`self.fill`一点实际上是画线的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-12T15:23:46.653

出于某种原因，当我尝试时，最后一个垃圾箱没有正确关闭。如果显示最后一行，则从以前的答案中看不到，所以我决定制作自己的函数，它可以满足我的需求。

```
def make_bar_contour_plot(ax,x_input,y_input):

    x = list(np.ravel(zip(x_input[:-1],x_input[:-1]+1)))[1:]
    x += [x[-1]+20] + [300] 
    y = list(np.ravel(zip(y_input,y_input))) +[0]
    ax.plot(x,y,ls='steps')

    return ax 
```

添加的`20`and`300`分别是我的 binsize 和 end 值，如果有人想使用它需要调整。`x_input`并且`y_input`是 的返回值`np.histogram`。我的结果图（蓝色轮廓，用上面的函数绘制。红色，相同数据的条形图）：

![我在等高线绘制直方图的结果](../Images/a18efab170a808b7d9ee7c3d6d240b95.png)

# python - 扭曲的客户端协议 - 附加接口前端

> ID：11297032
> 
> 赞同：0
> 
> 时间：2012-07-02T15:50:30.017
> 
> 标签：python, client, twisted

我正在关注关于在 Twisted 中编写客户端/服务器对的教程，位于此处：

[http://twistedmatrix.com/documents/current/core/howto/clients.html](http://twistedmatrix.com/documents/current/core/howto/clients.html)

我已经为我的客户端和服务器的通信做好了一切工作，系统使用自定义前缀来表示它在“对话”中的距离。它最初发送一个 json 字符串来设置会话，然后逐行发送一个文件。这实际上只是一种锻炼，而不是其他任何东西。

客户端.py：

```
class ClientProtocol(protocol.Protocol):

    def connectionMade(self):
        json_string = json.dumps({
            'uid':ObjectId(),
            'lat':43.78,
            'lon':-72.5831
        },cls=Encoder)
        self.transport.write('OPN|'+json_string)
        self.fileObject = open('test.csv')

    def sendFile(self):
        lineData = self.fileObject.readline()
        if lineData != '':
            self.transport.write('UPD|')
            self.transport.write(lineData)
        else:
            self.transport.write('EOF|done')

    def dataReceived(self,data):
        if data in ['ELLO','RECVD']:
            self.sendFile()

class ClientFactory(protocol.Factory):
    def buildProtocol(self,addr):
        return ClientProtocol()

if __name__ == '__main__':
    point = TCP4ClientEndpoint(reactor,'localhost',5000)
    d = point.connect(ClientFactory())
    reactor.run() 
```

服务器：

```
 class TransferProtocol(protocol.Protocol):

        ran = 0

        def connectionLost(self,reason):
            print reason

        def connectionMade(self):
            self.fileObject = open('output','w')

        def dataReceived(self,data):
            methods = {'OPN':'open','UPD':'upload','EOF':'endfile'}
            if data[0:3] in methods.keys():
                func = getattr(self,methods[data[0:3]])
                func(data[4:])

        def open(self,data):
            print 'OPEN %s' % data
            self.transport.write('ELLO')

        def endfile(self,data):
            print 'END %s' % data
            self.transport.loseConnection()

        def upload(self,data):
            self.ran+=1
            self.fileObject.write(data)
            self.transport.write('RECVD')

class myProtocolFactory(protocol.Factory):
    protocol = TransferProtocol

    def doStart(self):
        pass

    def startedConnecting(self, connectorInstance):
        print connectorInstance

    def buildProtocol(self, address):
        print address
        return self.protocol()

    def clientConnectionLost(self, connection, reason):
        print reason
        print connection

    def clientConnectionFailed(self, connection, reason):
        print connection
        print reason

    def doStop(self):
        pass

if __name__ == '__main__':
    reactor.listenTCP(5000, myProtocolFactory())
    reactor.run() 
```

目前，我在一个终端上运行服务器，在另一个终端上运行客户端。正如预期的那样，两个反应器都启动并通信一次，客户端传输它的身份 json，然后是文件内容，然后终止连接。我无法理解的是如何将此协议“连接”到`cmd`接口之类的东西，以使其在结束后根据命令生成这些进程。因为客户端中的reactor无限运行，它执行一次网络会话，然后在reactor中不断循环。

我曾经用 Twisted、客户端或服务器构建的所有东西，都只是响应网络调用，所以我想知道什么是正确的方法来使它成为一个“一次性”客户端协议，该协议将在来自`cmd`. 甚至有人会将反应堆用于这样的事情吗？或者完全扭曲，而不是仅仅手动打开遵循协议的套接字？

**编辑**

我在 google 和 SO 上发现了 Twisted stdio 库，但我无法将终端输入协议连接到网络协议。

我有终端协议继承`LineReceiver`，提示正确显示。我已将网络工厂分配给终端协议的`factory`对象，然后尝试从提示符调用网络协议的方法。问题是，分配给此属性的连接器对象不使用它应该创建的协议的任何方法。

为了简洁起见，我把它放在了 GitHub 上：

[https://github.com/DeaconDesperado/swfty-share/blob/master/client.py](https://github.com/DeaconDesperado/swfty-share/blob/master/client.py)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:14:49.517

否 无需外部布线即可将您的服务器和客户端服务连接在一起。

Twisted 提供了必要的方法来确保它可以启动所有服务并在您关闭一个扭曲的应用程序时将它们关闭。它提供了执行此操作的工具。

阅读这个关于扭曲应用程序的优秀教程：

1.  [http://krondo.com/?p=2345](http://krondo.com/?p=2345)

阅读以下内容了解更多详情：

1.  [http://twistedmatrix.com/documents/current/core/howto/basics.html](http://twistedmatrix.com/documents/current/core/howto/basics.html)
2.  [http://twistedmatrix.com/documents/current/core/howto/application.html](http://twistedmatrix.com/documents/current/core/howto/application.html)
3.  [http://twistedmatrix.com/documents/current/core/howto/plugin.html](http://twistedmatrix.com/documents/current/core/howto/plugin.html)
4.  [http://twistedmatrix.com/documents/current/core/howto/tap.html](http://twistedmatrix.com/documents/current/core/howto/tap.html)

在这样：

1.  [无扭曲的扭曲应用](https://stackoverflow.com/questions/6610489/twisted-application-without-twistd)

# codeigniter - 我应该使用 Backbone.emulateHTTP 还是 php file_get_contents

> ID：11297033
> 
> 赞同：2
> 
> 时间：2012-07-02T15:50:30.900
> 
> 标签：codeigniter, rest, backbone.js

我正在使用带有 CodeIgniter 后端的 Backbone JS。

看来我有两个选择：

*   将主干设置为：

    ```
    Backbone.emulateHTTP = true;
    Backbone.emulateJSON = true; 
    ```

    它将所有内容作为表单数据发送，我可以在服务器上使用

    ```
    $this->input->post() 
    ```

*   或者我可以将 Backbone 保留为正常设置，在这种情况下，它会在请求有效负载中发送，我必须使用：

    ```
    $data = json_decode(file_get_contents('php://input')); 
    ```

这个问题有正确答案吗？第一个是否意味着它在技术上不是 RESTful？那有关系吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:55:21.383

我最近完成了一个骨干网 / ci（restful api）应用程序，并使用 codeigniter 的 $this->input 函数获取了我的所有数据。你不应该有任何问题。

# java - xtext 生成器将输入转发到输出

> ID：11297034
> 
> 赞同：1
> 
> 时间：2012-07-02T15:50:34.427
> 
> 标签：java, eclipse-emf, xtext, xtend, emf

如何在 xtend 生成器中将解析树的一部分从输入转发到输出？

例如，在某些输出代码生成的情况下，我不需要解析某些构造函数/函数的参数。我只需要将这些常量、变量名、表达式等直接放到输出代码中（前大括号内的所有内容）：

输入 DSL 代码：

```
CREATE_OBJECT_O(3, a, 5+6 ) 
```

输出（可能是一些 Java 或 C++ 代码）：

```
Object o = new Object_Impl(3, a, 5+6 ) 
```

xtext 语法的一部分：

```
ParameterList:
    (parameter+=Parameter ( "," parameter+=Parameter)* )?
    ;
Parameter:
    variableExpression=VariableExpression |(texts+=TextInParameter | macroSubstitutions+=MacroSubstitution)*; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:14:45.660

在 Xtext 中有两种不同的服务可以做到这一点：

1.  您可以注入 org.eclipse.xtext.serializer.ISerializer 服务，然后调用 serializer.serialize(EObject) 以文本格式输出对象。但是，如果它在编辑期间不起作用（例如，在 JVMModelInferrer 中使用时），这将使用序列化规则。
2.  org.eclipse.xtext.nodemodel.util.NodeModelUtils 类包含在这里有用的静态方法。这些方法使用原始文本格式，保持原始格式，因此可以在编辑时使用。

    ```
    val eObjectNode = NodeModelUtils::getNode(eObject)
    eObjectNode.text //this is the output

    // Or alternatively getTokenText returns the string without hidden tokens
    NodeModelUtils::getTokenText(NodeModelUtils::getNode(eObject)) 
    ```

# php - jQuery 长轮询（使用 PHP 服务器端）

> ID：11297035
> 
> 赞同：8
> 
> 时间：2012-07-02T15:50:35.593
> 
> 标签：php, jquery, ajax, json, getjson

我在这里做了一个噩梦，所以任何帮助将不胜感激！首先，我将解释我正在尝试做的事情：

我正在尝试使用 Yii 框架在我的本地主机 MAMP 服务器上实现如下所述的系统： [https ://stackoverflow.com/a/1086448/1034392。](https://stackoverflow.com/a/1086448/1034392)我有一个函数可以检查数据库中是否有任何新通知 - 如果有，它会解析它们并 json 对它们进行编码。我每 5 秒在一个 while 循环中调用这个函数。

所以：去 /user/unreadNotifications 触发以下

```
 Yii::log('test'); // to check it's getting called  

    $this->layout=false;

    header('Content-Type: application/json');

    // LONG POLLING 
    while (Yii::app()->user->getNotifications() == null) {
        sleep(5);
    }

    echo Yii::app()->user->getNotifications(); // prints out json if new notification

    Yii::app()->end();

    return; 
```

这工作正常 - 转到浏览器中的链接并验证 json 响应 - 一切都很好。

然后我尝试了各种 jQuery 的东西来让它工作......我发现工作的唯一方法是使用`$.ajax`POST 类型，但只有在有等待通知时（所以返回一些 json）。`$.get`或被`$.post`“中止”（显示在萤火虫中）但 URL 被调用（因为我可以看到日志文件已更新） - 奇怪。

我使用的原始设置`$.get`是：

```
 <script type="text/javascript">
            function notificationPoll() {
                $.get('<?php echo Yii::app()->createUrl('user/unreadNotifications') ?>','', function(result) {
                    $.each(result.events, function(events) {
                        alert('New Notification!');
                    });
                    notificationPoll();
                }, 'json');
            }
        </script>

        <script type="text/javascript">
            $(document).ready(function() {
                $.ajaxSetup({
                    timeout: 60 //set a global ajax timeout of a minute
                });
                notificationPoll();
            });
        </script> 
```

由于某种原因，这只是“中止”。即使它不是 CORS 请求，我也尝试过使用 'jsonp' .. 但这也不起作用。

这似乎无处可去！有人可以插队吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-23T12:02:54.930

您必须确保函数在合理的时间内终止。你可以做的是：

```
$ttl = 10;
while ($ttl--) {
    $json = Yii::app()->user->getNotifications();
    if (null != $json) {
        break;
    }
    sleep(1);
}
if (null == $json) {
    $json = json_encode(array(
        'nothing' => true
    ));
}
header('Content-Type: application/json');
echo $json;

Yii::app()->end();
return; 
```

您可以使用 setInterval() 将轮询函数设置为计时器。该函数现在将每隔 10 秒调用一次，您可能需要设置一个信号量以避免在上一次迭代返回之前调用它：

```
var timer = setInterval(
    function() {
        if (this.calling) {
            return;
        }
        var fn = this;
        fn.calling = true;
        $.post(url)
         .done(function(data) {
            ..
         })
         .always(function() {
            fn.calling = false;
         });
    },
    10000
); 
```

然后 AJAX 中的轮询函数需要检查（在`.done()`）回调中）通知是否存在：

```
function(data) {
    if (data.hasOwnProperty('nothing')) {
        alert('No notifications');
        return;
    }
    console.log(data);
    ...
} 
```

现在一件重要的事情是**您的通知是什么样的**。这里我假设它是一个 JSON 编码的**字符串**。但如果 Yii 函数返回的是数组或对象，则需要处理其编码。这可能更干净，没有任何 IF：

```
header('Content-Type: ...
die(json_encode(
    array(
        'status'         => 'success',
        'notification'   => $json /* This is NULL or an array */
    )
    // Javascript side we check that data.notification is not null.
)); 
```

解码已经由 jQuery 处理，所以上面的变量“data”已经是一个 Javascript 对象，你*不需要调用`JSON.parse`*. 您可以检查它`data` *是否是*一个对象，并且它具有预期的属性。这将警告您任何错误。

要处理到另一个页面的导航，您可以将`setInterval()`轮询 Javascript 函数的 -supplied 计时器 ID 存储在全局变量中，并在页面调用`onUnload()`以停用轮询时删除计时器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:12:16.217

如果没有通知，getNotifications 会返回什么？jQuery 期望返回 JSON 格式，但是当您只回显一个空字符串时，请求会失败，因为响应的格式不是 JSON。确保每次都回显 JSON 字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T16:34:31.660

这个怎么样。我假设 $.(get) 在一个名为 notificationPoll(); 的函数中。完成后将被重新调用。

```
$.ajax({
    url: event_feed_href,
    async: false,
    timeout: 60000,
    done: function(data) {
            var got_json=false;
            try {
                var json = JSON.parse(data);
                got_json=true;
            }
            catch(e) {
                // failed to return JSON data
                alert('Wierd!');
            } 
            if(got_json) {
                // process json data
                alert('New Notification!');
            }
        },
    always: function() {
            notificationPoll();
        }
    }); 
```

我已经使用 done 并且总是在这里，正如 jQuery 所说的贬低成功：失败：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-29T02:40:25.920

我对代码中止感兴趣，可能会有你的答案。它可能由于多种原因而发生

*   Query.get 失败。Ajax 调用由于任何原因都不起作用。解析错误。
*   错误的 JavaScript 语法。例如：成功处理程序中的代码期望输入参数中的 events 属性可能不正确。

对于 jQuery.get，正如 jQuery.get ( [https://api.jquery.com/jQuery.get/](https://api.jquery.com/jQuery.get/) ) 文档中所建议的那样，该函数可以静默失败，我建议使用 .ajaxError 来查看获取是否失败.

> 如果带有 jQ​​uery.get() 的请求返回错误代码，它将静默失败，除非脚本也调用了全局 .ajaxError() 方法。或者，从 jQuery 1.5 开始，jQuery.get() 返回的 jqXHR 对象的 .error() 方法也可用于错误处理。

对于 javascript 语法错误，我会建议逐步通过 firebug 调试器。在成功处理程序的第一行添加一个断点，然后从那里逐步执行每一行。这很乏味，但它有效。

# objective-c - 注释针

> ID：11297036
> 
> 赞同：1
> 
> 时间：2012-07-02T15:50:45.440
> 
> 标签：objective-c, xcode, annotations, mapkit, pins

所以，我在 MKMapView 上为注释图钉定位时遇到了问题。

我只是写了一个可以从 NSObject 继承的类，叫做“Annotation”，它使用协议。

所以，这里的代码：

注释.h

```
#import <Foundation/Foundation.h>

@interface Annotation : NSObject <MKAnnotation>
{
    CLLocationCoordinate2D _coordinate;
    NSUInteger _pinID;
}

@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

- (id)initWithCoordinate:(CLLocationCoordinate2D)coordinate andID:(NSUInteger)pinID;

@end 
```

注释.m

```
#import "Annotation.h"

@implementation Annotation

@synthesize coordinate=_coordinate;

- (id)initWithCoordinate:(CLLocationCoordinate2D)coordinate andID:(NSUInteger)pinID{
    self = [super init];
    if (self != nil) {
        _coordinate = coordinate;
        _pinID = pinID;
    }
    return self;
}

- (NSString *)title {
    return [NSString stringWithFormat:@"Pin %u", _pinID];
}

- (NSString *)subtitle {
    return [NSString stringWithFormat:@"%.4f, %.4f", _coordinate.latitude, _coordinate.longitude];
}

@end 
```

然后，我尝试使用以下代码将其连接到我的地图

MapViewController.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    CLLocationCoordinate2D coordinate;
    coordinate.latitude = 49.2802;
    coordinate.longitude = -123.1182;
    mapView.delegate = self;
    mapView.region = MKCoordinateRegionMakeWithDistance(coordinate, 2000, 2000); 

    CLLocationCoordinate2D newCoord = {2000, 2000};
    Annotation* annotation = [[Annotation alloc] initWithCoordinate:newCoord andID:1];
    [mapView addAnnotation:annotation];
} 
```

但这没有任何意义，引脚甚至没有显示。我究竟做错了什么？我寻求帮助和教训，但没有工作成果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:43:01.847

尝试这个

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    CLLocationCoordinate2D coordinate;
    coordinate.latitude = 49.2802;
    coordinate.longitude = -123.1182;
    mapView.delegate = self;
    mapView.region = MKCoordinateRegionMakeWithDistance(coordinate, 2000, 2000); 

    Annotation* annotation = [[Annotation alloc] initWithCoordinate:coordinate andID:1];
    [mapView addAnnotation:annotation];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:57:58.273

注解的坐标无效：

```
CLLocationCoordinate2D newCoord = {2000, 2000};
Annotation* annotation = [[Annotation alloc] initWithCoordinate:newCoord ... 
```

纬度、经度 2000、2000 无效。

您可能想改用该`coordinate`变量（您在 中定义了几行`viewDidLoad`）：

```
Annotation* annotation = [[Annotation alloc] initWithCoordinate:coordinate andID:1]; 
```

# windows - make 总是传递相同的输入文件

> ID：11297037
> 
> 赞同：0
> 
> 时间：2012-07-02T15:50:47.937
> 
> 标签：windows, compilation, makefile

我正在尝试在 Windows 7 下使用 GNU-Win make 编译一个大型项目。

```
CCFLAGS = -D__forceinline -D__GCC__ -D__PC -Wno-multichar -DCOMPILE_CODEBLOCKS -Wattributes -Winvalid-offsetof
SOURCES = $(wildcard c4d/*.cpp)
OBJECTS = $(subst .cpp,.o,$(subst c4d/,c4d/obj/,$(SOURCES)))

all: $(OBJECTS)

$(OBJECTS):$(SOURCES)
    python pr.py $< $@ 
```

该`python pr.py`程序只是将所有传递的命令打印到命令行。（`@echo`而且`echo`不工作？！）

但我在控制台中看到的是：

```
python pr.py c4d/c4d_basebitmap.cpp c4d/obj/c4d_basebitmap.o

c4d/c4d_basebitmap.cpp
c4d/obj/c4d_basebitmap.o

python pr.py c4d/c4d_basebitmap.cpp c4d/obj/c4d_basechannel.o

c4d/c4d_basebitmap.cpp
c4d/obj/c4d_basechannel.o

python pr.py c4d/c4d_basebitmap.cpp c4d/obj/c4d_basecontainer.o

c4d/c4d_basebitmap.cpp
c4d/obj/c4d_basecontainer.o

python pr.py c4d/c4d_basebitmap.cpp c4d/obj/c4d_basedocument.o

c4d/c4d_basebitmap.cpp
c4d/obj/c4d_basedocument.o

python pr.py c4d/c4d_basebitmap.cpp c4d/obj/c4d_basedraw.o

c4d/c4d_basebitmap.cpp
c4d/obj/c4d_basedraw.o

python pr.py c4d/c4d_basebitmap.cpp c4d/obj/c4d_baseeffectorplugin.o

c4d/c4d_basebitmap.cpp
c4d/obj/c4d_baseeffectorplugin.o

python pr.py c4d/c4d_basebitmap.cpp c4d/obj/c4d_baselist.o

c4d/c4d_basebitmap.cpp
c4d/obj/c4d_baselist.o

python pr.py c4d/c4d_basebitmap.cpp c4d/obj/c4d_basematerial.o

c4d/c4d_basebitmap.cpp
c4d/obj/c4d_basematerial.o 
```

您可以看到，输入文件`c4d/c4d_basebitmap.cpp`总是不同的，而输出文件总是不同的（根据需要）。

为什么输入文件总是一样的？

# msbuild - 如何使用 MSBuild/TFS2008 强制非桌面构建？

> ID：11297038
> 
> 赞同：2
> 
> 时间：2012-07-02T15:50:57.677
> 
> 标签：msbuild, jenkins, msbuild-task

**设想：**

我有一个 TFS 构建 (TFS2008)，它有几个目标覆盖：**BuildNumberOverrideTarget、AfterGet、BeforeCompileConfiguration、AfterCompileConfiguration、AfterCompile、AfterDropBuild 和 AfterEndToEndIteration**。一切正常。

但现在我将所有 CI 移植到 Jenkins 服务器。我使用 MSBuild 插件使用以下参数调用 TFSBuild.proj：

> /fileLogger /fileLoggerParameters:LogFile=TFSBuild_DesktopBuild.log;Create;Encoding=UTF-8;verbosity=normal /verbosity:normal

**问题描述：**

我的问题是只有一些自定义任务正在执行：**BeforeCompileConfiguration, AfterCompileConfiguration, AfterCompile**。

如您所见，我需要**执行 BuildNumberOverrideTarget、AfterGet、AfterDropBuild 和 AfterEndToEndIteration**。

*似乎只有编译任务和关于它的自定义任务正在执行。从 TFS 触发的构建被视为非桌面构建，而从 Jenkins 触发的构建被视为桌面构建。*

**我到目前为止所尝试的。**

如果我从本地 .cmd 文件运行构建，则会发生相同的行为。所以我认为 IsDesktopBuild 属性有问题。进一步阅读这个[msdn 链接](http://msdn.microsoft.com/en-us/library/ms181292%28v=vs.90%29.aspx)给了我阅读时的线索

> “仅执行编译和测试（如果已启用）”

. 因此，我尝试自己添加属性以强制使用 DesktopBuild：

> /fileLogger /fileLoggerParameters:LogFile=TFSBuild_DesktopBuild.log;Create;Encoding=UTF-8;verbosity=normal /verbosity:normal **/property:IsDesktopBuild=true**

但是行为是一样的，只执行了任务：**BeforeCompileConfiguration、AfterCompileConfiguration、AfterCompile**

**所以我的问题是双重的：**

1.  任何人都知道如何从命令行强制桌面构建？（似乎*/property:IsDesktopBuild=true*还不够）
2.  如果 IsDesktopBuild 不是问题，关于为什么某些自定义任务没有触发的线索有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:04:59.103

您不应该试图强制构建桌面。实际上，您应该朝着相反的方向前进 - 强制进行非桌面构建。

桌面版本是默认设置。这意味着，默认情况下 IsDesktopBuild=true。所以没有必要明确地设置它。

当 TFS Build 进行构建时，它会将 false 传递给 IsDesktopBuild。

要让 Jenkins 运行与 TFS Build 相同的任务，您应该将其传递给 IsDesktopBuild。代替：

> /fileLogger /fileLoggerParameters:LogFile=TFSBuild_DesktopBuild.log;Create;Encoding=UTF-8;verbosity=normal /verbosity:normal /property:IsDesktopBuild= **true**

您应该将 IsDesktopBuild 设置为 false：

> /fileLogger /fileLoggerParameters:LogFile=TFSBuild_DesktopBuild.log;Create;Encoding=UTF-8;verbosity=normal /verbosity:normal /property:IsDesktopBuild= **false**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T05:35:28.220

为什么只明确指定您想要的目标？/t:BuildNumberOverrideTarget;AfterGet;BeforeCompileConfiguration;AfterCompileConfiguration 等除了你提到的参数？

# javascript - javascript动画被它上面的元素减慢

> ID：11297039
> 
> 赞同：1
> 
> 时间：2012-07-02T15:51:08.503
> 
> 标签：javascript, animation, png

我在我的一个动画循环中遇到了一个非常神秘的问题。基本上我有一个动画在PNG蒙版后面运行以创建发光效果。动画无休止地运行，正如它应该的那样。但是，在很短的时间之后，动画变慢并最终停止。

这是神秘的部分：没有 png 掩码（以及其中的 div），***动画运行流畅。***

这里发生了什么？

--这里是没有掩码的页面：[http ://chrismorga.com/rainnav/closed.html](http://chrismorga.com/rainnav/closed.html)

--带面具（重新加载并立即观察减速的光芒）：[http ://chrismorga.com/rainnav/open.html](http://chrismorga.com/rainnav/open.html)

供参考，这里是javascript。功能在页面加载后运行：

```
function StartMove() {
var cssBGImage=new Image();
cssBGImage.src="img/blueshifter.jpg";

window.cssMaxWidth=cssBGImage.width;
window.cssXPos=0;
setInterval("MoveBackGround()",10);
}

function MoveBackGround () {
window.cssXPos=window.cssXPos+1;
    if (window.cssXPos>=window.cssMaxWidth) {
    window.cssXPos=0;
    }
toMove=document.getElementById("scroller");
toMove.style.backgroundPosition=window.cssXPos+"px 0px";
} 
```

...

```
<body onload="StartMove()"> 
```

我的 JavaScript 是否使用了一些不好的做法？在这一点上，任何见解都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:13:19.100

**-更新-**

我偶然发现了我的问题。我的手机运行动画很好，所以我想，为什么这个镀铬而不是电脑镀铬？

事实证明，**运行 chrome 19 导致了错误！**快速更新，我运行良好。我想我应该欢迎自己来到最前沿，哈哈。

# c - 使用opencv去除噪声像素

> ID：11297044
> 
> 赞同：5
> 
> 时间：2012-07-02T15:51:31.827
> 
> 标签：c, opencv, noise-reduction

我正在尝试使用 openCV 从输入图像中检测文本。为此，我需要从图像中去除噪声分量。使用的标准是，如果某个组件的像素数小于 15，则消除该特定组件。

例如，假设以下给定图像作为 i/p 提供给函数： ![输入图像 1](../Images/0c04358d53bdaf6600e7575353de3b02.png)

![输入图像 2](../Images/328ba573a12965374bad1be8967360d0.png)

可以看出，两张图像都包含许多不需要的噪声像素，尤其是第一个。

因此，如果有人可以提出一种可行的方法来实现它，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:42:19.713

好的，对不起，但这不在`c`并且它不使用`opencv`，但是我确信标签必须是可能的`opencv`，只是我还没有使用它......所以这可能会有所帮助......基本上这个想法是：

1.  查找并标记图像中所有单独的 blob
2.  删除所有超出特定约束（大小、形状）的 blob

在这里，我在`python`using中实现了这一点`scipy`，但只是为了尺寸（不是形状，虽然这很容易并且会摆脱下面第一张图片中的长细线）。为此，我们必须知道字母的可接受大小范围 - 但是您可以在标记后通过查看平均 blob 大小来确定这一点。您可能仍然会得到字母大小的误报 - 但这些可以通过观察它们来消除落在某个集中 blob 的区域之外（因为文本在空间上是规则的）......此外，最小句子长度可能是一个强大的约束。

无论如何，代码：

```
import scipy
from scipy import ndimage

im = scipy.misc.imread('learning2.png',flatten=1)
#threshold image, so its binary, then invert (`label` needs this):
im[im>100]=255
im[im<=100]=0
im = 255 - im
#label the image:
blobs, number_of_blobs = ndimage.label(im)
#remove all labelled blobs that are outside of our size constraints:
for i in xrange(number_of_blobs):
    if blobs[blobs==i].size < 40 or blobs[blobs==i].size>150:
        im[blobs==i] = 0
scipy.misc.imsave('out.png', im) 
```

结果：

![在此处输入图像描述](../Images/53806798a171db836ef8349a95f81980.png) ![在此处输入图像描述](../Images/86b49f150ed55e5dab63f04f30d916ea.png)

# oracle - PL/SQL：插入或更新触发器“选择计数”结果

> ID：11297048
> 
> 赞同：1
> 
> 时间：2012-07-02T15:51:43.683
> 
> 标签：oracle, plsql, triggers

我的触发器接受输入。（新：input_id）使用此输入，它将使用动态生成的查询生成新的 ID。动态生成查询的指令存储在 QUERY_REF 中。
它使用游标检索 query_ids 以生成动态查询：

```
CURSOR C_QUERY IS 
  SELECT QUERY_ID
    FROM QUERY_REF
    WHERE GENERATE_IND='Y';

OPEN C_QUERY;

LOOP
  FETCH C_QUERY INTO QUERY_ID_RET;
  EXIT WHEN C_QUERY%NOTFOUND; 
```

INPUT_ID 和 QUERY_ID_RET 已成功用于在函数 gethostID 中创建 Output_ID。

我正在尝试根据是否找到记录来运行插入、更新。选择计数返回 0。我发现选择计数返回 0 的原因——我引用了错误的表。我仍然不知道为什么这是检索旧数据。这是整个触发器：

```
create or replace
TRIGGER INPUT_AUTO_QUERY_TRIG
AFTER INSERT OR UPDATE
ON INPUT_TABLE
FOR EACH ROW
 DECLARE
   ACTION_VALUE       VARCHAR2(6);
   HOLD_EVENT_ID      VARCHAR2(256);
   HOLD_USER_ID      VARCHAR2(30);
   HOLD_PK_VALUE      INTEGER(10);
   HOLD_AUDIT_ITEM_ID INTEGER(10);
   QUERY_ID_RET       NUMBER;
   resultcount        NUMBER;
   HostID      VARCHAR2(256);
   QUERY_ID       NUMBER;
   INPUT_ID         NUMBER(38,0);
   GENERATE_IND       VARCHAR2(1);
   pragma autonomous_transaction;
CURSOR C_QUERY IS 
  SELECT QUERY_ID
    FROM QUERY_REF
    WHERE GENERATE_IND='Y';
BEGIN

OPEN C_QUERY;

LOOP
  FETCH C_QUERY INTO QUERY_ID_RET;
  EXIT WHEN C_QUERY%NOTFOUND;

 SELECT AUDIT_ID, USER_ID
   INTO HOLD_EVENT_ID, HOLD_USER_ID
   FROM AUDIT_EVENT_TEMP
   WHERE SESSION_ID = SYS_CONTEXT('USERENV', 'SESSIONID');

   OutputID:=getHostID(:NEW.INPUT_ID,QUERY_ID_RET);

  IF INSERTING THEN
    INSERT INTO DETAIL
  (
  DETAIL_ID,
  INPUT_ID,
  OUTPUT_ID,
  QUERY_ID,
  ACTIVE_IND,
  CREATED_BY,
  DATE_CREATED,
  MODIFIED_BY,
  DATE_MODIFIED
  ) VALUES
  (
    DETAIL_SEQ.NEXTVAL,
    :NEW.INPUT_ID,
    OutputID,
    QUERY_ID_RET,
    'Y',
    HOLD_USER_ID,
    SYSDATE,
    HOLD_USER_ID,
    SYSDATE
  );

ELSIF UPDATING THEN

SELECT COUNT(QUERY_ID) INTO resultcount FROM DETAIL WHERE             INPUT_ID=:NEW.INPUT_ID AND QUERY_ID=QUERY_ID_RET;
    IF resultcount>0 THEN
    UPDATE PATIENT_DATA_SOURCE
    SET
  HOST_ID = HostID,
  ACTIVE_IND ='Y',
  MODIFIED_BY =HOLD_USER_ID,
  DATE_MODIFIED =SYSDATE
  WHERE INPUT_ID=:NEW.INPUT_ID
  AND QUERY_ID=QUERY_ID_RET;

--don't want to change: DETAIL_ID,QUERY_ID,INPUT_ID,CREATED_BY,          DATE_CREATED in update

  ELSE
      INSERT INTO DETAIL
  (
  DETAIL_ID,
  INPUT_ID,
  HOST_ID,
  QUERY_ID,
  ACTIVE_IND,
  CREATED_BY,
  DATE_CREATED,
  MODIFIED_BY,
  DATE_MODIFIED
  ) VALUES
  (
  DETAIL_SEQ.NEXTVAL,
  :NEW.INPUT_ID,
  HostID,
   QUERY_ID_RET,
  'Y',
    HOLD_USER_ID,
    SYSDATE,
    HOLD_USER_ID,
    SYSDATE
  );
END IF;
--end if insert or update inside update

END IF;
--end IF UPDATING
END LOOP;
Close C_QUERY;

COMMIT;
END INPUT_AUTO_QUERY_TRIG;
--end trigger 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:39:31.800

在触发器中使用 SELECT COUNT(*) 没有任何限制 - 除非它在定义触发器的表上（可能是变异表）。

[http://psoug.org/reference/table_trigger.html](http://psoug.org/reference/table_trigger.html)

SELECT COUNT(*) FROM query_str_ref WHERE INPUT_ID=:NEW.INPUT_ID AND QUERY_ID=QUERY_ID_RET;

在 SQLPLUS 会话中单独工作并返回大于零的计数？

如果此行在触发器之外返回正确的计数，则触发器中的某些内容可能会在到达该行之前影响计数，或者根本无法到达该行。

如果此行在触发器之外没有返回正确的计数，那么检查 QUERY_STR_REF 表数据、新值输入 ID 和

另外，您确定
QUERY_REF 上设置 QUERY_ID_RET 的 CURSOR /FETCH 位于触发器内部或可从触发器访问，并且没有干扰（触发语句没有更改 QUERY_REF）？

# java - 为什么我不能用 HSSF 打开 Excel(xls)

> ID：11297058
> 
> 赞同：0
> 
> 时间：2012-07-02T15:52:24.837
> 
> 标签：java, apache-poi, poi-hssf

当我尝试使用 MS Office 2003 打开 Excel 工作表时出现错误。此 Excel 工作表是使用 HSSFWorkbook 创建的，实现了用户模型范围 org.apache.poi.hssf.usermodel

用户模型和事件模型有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T19:39:32.210

usermodel 用于创建、读取和修改 XLS 文件。eventmodel 用于快速读取 XLS 文件。如果您所做的只是读取电子表格数据，您应该使用事件模型（内存占用更小，但更难使用）。如果您正在修改电子表格数据，那么您应该使用 usermodel（内存占用更高，但使用起来更简单）。

[更多信息](http://poi.apache.org/spreadsheet/index.html)

# java - 将集合层次结构可视化为彩色编码图

> ID：11297061
> 
> 赞同：20
> 
> 时间：2012-07-02T15:52:30.857
> 
> 标签：java, javascript, data-visualization, graph-algorithm

最近我读了很多关于 Java 和 Javascript 的图形库的文章，但我还没有找到一个好方法来做我想做的事情。

本质上，我有一个关于一堆元素（多达数千个）的集合层次结构。这些集合可以完全或部分重叠、完全覆盖或完全不相交。我想做的是显示以下信息：

*   集合的大小（相对于其他集合）
*   一组的“热”值（以颜色代码表示），由其覆盖的元素计算得出
*   单个图形中集合的完整拓扑（以便向用户显示重叠、交叉点等）

* * *

**编辑：**也许我应该举一个例子来说明我所说的集合和元素以及部分重叠的层次结构。以下是我处理的那种集合的过度简化版本（请注意，数字`1`-和`10`字母`a`-代表彼此可比较的元素）：`h``X`

```
Set1 = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11}
Set2 = {1, 2, 3, 4, 5, 6}
Set3 = {1, 2, 3}
Set4 = {1, 4, 5, 6, 7}
Set5 = {a, b, c, d, e, f, g, h}
Set6 = {a, b, c, d, e}
Set7 = {a, b, c, 7}
Set8 = {2, 4, 7, 8, c, f}
Set9 = {X} 
```

* * *

我不确定如何以直观的方式显示这些信息。我已经看到了我在视觉上非常喜欢的 Voronoi [¹](http://en.wikipedia.org/wiki/Voronoi_diagram)、[²](http://mbostock.github.com/d3/ex/voronoi.html)图表，但是它们具有不同的数学背景，所以我认为我无法以适当的方式描绘我所拥有的层次结构。我想在运行时（在 Java 的情况下）创建这些图表，或者在 HTML 部署的情况下使用 Javascript，两者都很好。然而，有一个约束条件是图形需要创建或可以导出为高分辨率矢量图形。

简而言之，我的问题：

1.  有没有一种很好的方法来可视化我拥有的数据类型？如果是这样，它是否以易于实现的形式存在（即库）？
2.  如果问题没有简单的解决方案，换句话说，如果我需要在这种情况下发明轮子，我该如何自己实现这样的图表？什么是好的起点？我要特别注意什么？

谢谢！

**编辑：**我的潜在想法是将通用集合中的所有元素布局为具有所需颜色覆盖的六边形网格，然后绘制集合的边界。然而，这个想法有几个问题，特别是为元素指定位置的问题，因此集合不会在整个图上分裂。有什么意见/建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T00:33:40.090

是的，这是一个经过充分研究的问题。您所描述的称为[超图](http://en.wikipedia.org/wiki/Hypergraph)。每个元素都可以表示为图中的一个顶点，集合是超边。那么问题就变成了可视化超图的问题。

![在此处输入图像描述](../Images/68dfcc2e606c50186ee8a89a151f1728.png)

不幸的是，没有完美的通用解决方案，因为即使是最简单的图表也可能具有复杂的可视化效果。

如果您的集合相对较小（< 5 个元素），您可以使用像[graphviz](http://www.graphviz.org/)这样的常规绘图库。为此，只需连接每组中的所有顶点对并为它们着色。这将产生与此类似的解决方案：

![在此处输入图像描述](../Images/16db927c92e30313b481578b60dcf5f4.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T22:21:33.947

您是否考虑过二维网格：

*   将设定的数字放在一个轴上
*   将在所有集合中找到的独特元素放在另一个轴上
*   为在集合中找到元素的每个单元格着色（通过查看该行和列的标签）

虽然这种可视化方法通常不如目前提到的一些更复杂的方法，但它的优点是当您拥有数千个元素和数千个集合时，它实际上*是可能的。*

诀窍是以对用户有用的方式将最多信息放在一起的方式对行和列进行排序。我的直觉告诉你，你要解决的问题是让彩色细胞尽可能“像斑点”——如果每组相邻的彩色细胞都被称为一个“区域”，那么不同区域的数量最少，并且他们有最少的洞。

这本身就是一个非常复杂的问题，但至少可以通过为每个集合与其他集合计算一些邻接因子来部分解决。您正在寻找的是接近的“岛屿”——所以从一对最相似的集合开始，将它们添加到图表中，并将它们视为一个区域。用替换它所持有的对的区域重新计算您的接近度数（以某种方式平均？）。找到下一个最接近的项目对（每个项目是一个区域或一组），如果该对与图中任何现有区域的接近度在某个阈值内，则附加到该区域的一侧，否则创建一个新的，单独的区域（再次删除该对的接近度值并重新计算区域本身）。最终，所有集合都将添加到区域中，并且所有区域都将加入。

虽然这可能永远不会给出最佳配置，但与随机分布相比，它应该提供一些区域较少的东西。

最后，一些动态重新排序可能很有用，允许用户选择一个有趣的集合或元素，并将其用作完全重新排列的图形的种子，根据与*该*元素的接近度（以及随后组合后的该区域）计算每个添加与另一个元素），而不是任何整体的最低接近度。

这是结果图，对您问题中的示例数据集完成了上述逻辑过程：

![集合和元素](../Images/de7a883bbb468bf63a538e06c479b0ab.png)

决定如何对列进行排序很复杂，但基本上你可以通过将列移动到相邻的位置来获得某种合理的结果，前提是这样的移动不会干扰任何已添加段的彩色块区域。

额外的想法：

*   计算集合接近度不仅仅是它们有多少共同元素，还有它们有多少不共同的元素。如果两对集合之间有 3 个共同元素，但其中一对有 5 个非共享元素，另一对有 3 个非共享元素，则具有 3 个非共享元素的对比另一对更接近匹配。
*   将集合添加到图表后，就有机会重新排序元素。尽可能将元素堆叠在最左边是第一次放置的良好开端。在那之后，将最常见的元素堆叠在最左边似乎很好。在那之后，它崩溃了。我想知道让彩色单元格靠近对角线（从左上角到右下角）是否也是一种有用的算法——这让我想起了一点[设计结构矩阵](http://dsmweb.org/dsmweb/en/understand-dsm/technical-dsm-tutorial0/clustering.html)，尽管它只显示了单向依赖而不是两个-方式关系。
*   当彩色斑点由与所有其他集合完全不相交的集合组成时（例如您的示例中包含 X 的集合），它可以移动到单独的图表中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T22:37:36.377

[有很多方法可以解决这个问题，但就个人而言，我会使用动态生成的 SVG 和Raphael JS](http://raphaeljs.com/)之类的工具绘制一种维恩图，并按照我想要的方式着色。此外，Raphael 有类似[Set](http://raphaeljs.com/reference.html#Set)的 API ，可以让您提供有关元素及其关系的完整详细信息。那里[的 SVG 到代码转换器](http://www.irunmywebsite.com/raphael/SVGTOHTML_LIVE.php)也可能有助于理解如何生成 SVG 元素。

或者，您可以使用[维恩图](https://developers.google.com/chart/image/docs/gallery/venn_charts)等工具：

![维恩图示例](../Images/6a4d9dfb9449c92f17d10e18ff5764bf.png)

这似乎很容易适应这种情况。还有[Flotr2](http://www.humblesoftware.com/flotr2/)可以创建气泡图：

![气泡图浮动器](../Images/6af79d6fd4ece315a7dff97c33cb48d5.png)

甚至[Canvas Express](http://canvasxpress.org/)。

![Canvas Xpress 图表](../Images/62e2dea4eaf84a45172890631745f0d4.png)

使用任何后来的工具进行更多调整将使您能够正确完成它......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T22:46:21.307

我没有以正确格式获取数据的解决方案。看看这个由 MIT 创建的用于构建图形的 javascript 插件[sigmajs](http://sigmajs.org/)。没有看过它接受的数据，但可能值得一看。

# ms-access - 我不断收到错误 13 类型不匹配错误，我该如何解决？

> ID：11297062
> 
> 赞同：0
> 
> 时间：2012-07-02T15:52:33.807
> 
> 标签：ms-access, search, vba, type-mismatch

在 Access 2010 中，我正在尝试为表单上的联系人表创建一个搜索框。

这是我的代码：

```
Private Sub Command119_Click()
On Error GoTo Command119_Click_Err

If (Eval("[Forms]![frmTitlePage]![SearchBox] Is Null")) Then
    ' Clear Filter when search box empty
    DoCmd.RunCommand acCmdRemoveFilterSort
End If
' Handle "'s in search
TempVars.Add "strSearch", Replace(Forms!frmTitlePage!SearchBox, """", """""")
' Build the Filter
TempVars.Add "strFilter", "([Last Name] Like "" * " & [TempVars]![strSearch] & " * "" )"
TempVars.Add "strFilter", TempVars!strFilter & " OR ([First Name] Like "" * " & [TempVars]![strSearch] & " * "" )"
DoCmd.ApplyFilter "", TempVars!strFilter, ""
TempVars.Remove "strFilter"
TempVars.Remove "strSearch"

Command119_Click_Exit:
Exit Sub

Command119_Click_Err:
MsgBox Error$
Resume Command119_Click_Exit

End Sub 
```

我显然不擅长这种编码，所以任何清理这个搜索工具的额外帮助都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:58:02.473

您的搜索中有一些额外的空格

您生成的原始代码`Like " * Smith * "`

删除您添加的位置周围的额外空格`[TempVars]![strSearch]`以产生此：

```
TempVars.Add "strFilter", "([Last Name] Like ""*" & [TempVars]![strSearch] & "*"" )"
TempVars.Add "strFilter", TempVars!strFilter & " OR ([First Name] Like ""*" & [TempVars]![strSearch] & "*"" )" 
```

现在应该产生`Like "*Smith*"`

# html - 对于像这样 [IMG inside] 这样的布局安排，表格是否仍然被认为是好的做法？

> ID：11297065
> 
> 赞同：0
> 
> 时间：2012-07-02T15:52:58.487
> 
> 标签：html, css, html-table

![在此处输入图像描述](../Images/3412fec4802113b354b1f6bdef07a2b0.png)

如这个带有 HTML/CSS 的模型所示，在页脚中排列图像的好方法是什么？表格仍然被认为是好的做法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:58:05.210

除非您的数据是表格的，否则不要使用表格。

对于您提供的示例图像，它可以像自己设置`<img />`标签一样简单。

将图像粘贴在`<div>`元素内，将它们全部浮动，内联显示，然后添加填充/边距。

可以在这里找到一个非常基本的演示[http://jsfiddle.net/pQDP3/](http://jsfiddle.net/pQDP3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:59:58.920

您可以为此使用表格，如果随着时间的推移它将成为一组静态图像，那么这是可以接受的。如果图像数量可能随时间变化，您可以制作一个 UL，每个 LI 将是另一个图像。从那里，设置你的 css 规则，例如：

```
#footer ul {
list-style: none;
} 

#footer ul li {
display: inline;
float: left;
width: ###px;
height ###px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T01:09:59.480

表格仅用于显示数据。对于页脚，您可以轻松使用`divs`它们`float`。或者您可以使用列表并相应地设置样式，但这确实是您的选择。一张桌子可以完成这项工作，但不要因为表格不适合的事情而使用表格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T15:59:38.407

表格也很好，而且您使用表格这一事实并不意味着您是 alcheic，这是您的选择，但我认为您也可以使用列表并在 css 中设置样式...

像这样的东西

```
<ul class='abc'>
<li><img src='a.jpb' /></li>
......
</ul> 
```

在你的 CSS

```
.abc li img{ margin: 10px;} 
```

你已经完成了，风格随你喜欢

# c# - 在释放线程之前等待 ASPX 页面呈现？

> ID：11297068
> 
> 赞同：0
> 
> 时间：2012-07-02T15:53:06.567
> 
> 标签：c#, asp.net, multithreading, threadpool

我正在编写一个库，该库将某些内容写入数据库以供临时使用（仅使用一次）然后被删除（这很奇怪，但是对此有一定的实现）。为此，我正在尝试执行一个线程，该线程将数据写入数据库，等待页面完成加载，然后释放以完成执行，删除记录。我不确定如何解决这个问题。一种方法是让线程休眠，但是我冒着没有足够时间的风险，或者在页面完成其他所有操作后线程可能仍在运行。有没有办法把它绑定到页面线程中，这样我就可以在它完成后立即释放我的线程？有什么，如果有的话，接近这样的事情？因为这是一个库，我宁愿不要让另一个程序员在他的页面代码末尾调用一个函数来删除记录；它凌乱且容易被遗忘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:01:07.170

除非您出于某些其他原因（即教育）而想使用线程，否则请考虑为此使用应用程序事件 - 您可以根据需要侦听[AcquireRequestState](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.acquirerequeststate.aspx)和[ReleaseRequestState](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.releaserequeststate.aspx)或类似对并执行数据库操作。检查[应用程序生命周期](http://msdn.microsoft.com/en-us/library/ms178473%28v=vs.100%29.aspx)以查看所有事件及其顺序。

[如何：创建 ASP.NET 应用程序级事件处理程序](http://msdn.microsoft.com/en-us/library/fwzzh56s%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T15:57:29.980

为什么要创建另一个线程？在 Load 事件中写入记录，在 Unload 事件中删除。

# ruby-on-rails - Rails 3.2 链接到 Safari 中的文件

> ID：11297072
> 
> 赞同：1
> 
> 时间：2012-07-02T15:53:46.617
> 
> 标签：ruby-on-rails, download, carrierwave

我的网站上有一个区域，用户可以将文件上传到服务器。这些文件不受文件类型的限制。一切都在 Firefox 等中运行，但 safari 尝试在新窗口中打开文件，导致它无法理解的文件类型出现乱码。我可以“保存链接文件”，一切正常。但是为了可用性，我希望文件在单击链接时自动下载。我使用carrierwave上传文件。

这是我的链接的样子

```
<%= link_to document.name,"#{document.file}"%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:26:18.257

@Stefan 在评论中回答了这个问题。

在 Gemfile 中：

```
gem 'mime-types' 
```

在carrierwave生成的上传文件中：

```
require 'carrierwave/processing/mime_types'

class MyUploader < CarrierWave::Uploader::Base
  include CarrierWave::MimeTypes

  process :set_content_type
end 
```

# database - 免费的世界城市/国家数据库

> ID：11297073
> 
> 赞同：0
> 
> 时间：2012-07-02T15:53:46.773
> 
> 标签：database, country, city

> **可能重复：**
> [地理编码数据库](https://stackoverflow.com/questions/945706/geocode-database)

任何人都可以提供指向世界城市/国家的任何免费数据库/csv 资源的链接吗？我在[maxmin 站点](http://www.maxmind.com/app/worldcities)找到了一个。他们的国家信息没问题。但是城市信息一点都不好。因为我确实为我的国家（孟加拉国）获得了数千个城市信息，那里只有 64 个。所以，我想，它可能与其他国家也有同样的问题。所以，寻找可靠的来源。如果您知道，请告诉我。我想在我的网络应用程序上使用它。谢谢。

# iphone - 在 OBJ-C 中将完整的字母转换为数字

> ID：11297075
> 
> 赞同：1
> 
> 时间：2012-07-02T15:53:51.873
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试将字母转换为一串数字或整数。我可以这样做，但我想知道是否有更好的方法？我必须将 4 个字母转换为对应的数字，所以我用字母创建了一个 NSMutableArray，然后这样做是读取一个字符串，然后一次将字符串拉开。

编辑：所以如果我的消息是“MNOP”，我想要一个字符串是“13141516”

```
 alphabetArray = [[NSMutableArray alloc] init];
[alphabetArray insertObject:@"0" atIndex:0];
[alphabetArray insertObject:@"A" atIndex:1];
[alphabetArray insertObject:@"B" atIndex:2];
[alphabetArray insertObject:@"C" atIndex:3];
[alphabetArray insertObject:@"D" atIndex:4];
[alphabetArray insertObject:@"E" atIndex:5];
[alphabetArray insertObject:@"F" atIndex:6];
[alphabetArray insertObject:@"G" atIndex:7];
[alphabetArray insertObject:@"H" atIndex:8];
[alphabetArray insertObject:@"I" atIndex:9];
[alphabetArray insertObject:@"J" atIndex:10];
[alphabetArray insertObject:@"K" atIndex:11];
[alphabetArray insertObject:@"L" atIndex:12];
[alphabetArray insertObject:@"M" atIndex:13];
[alphabetArray insertObject:@"N" atIndex:14];
[alphabetArray insertObject:@"O" atIndex:15];
[alphabetArray insertObject:@"P" atIndex:16];
[alphabetArray insertObject:@"Q" atIndex:17];
[alphabetArray insertObject:@"R" atIndex:18];
[alphabetArray insertObject:@"S" atIndex:19];
[alphabetArray insertObject:@"T" atIndex:20];
[alphabetArray insertObject:@"U" atIndex:21];
[alphabetArray insertObject:@"V" atIndex:22];
[alphabetArray insertObject:@"W" atIndex:23];
[alphabetArray insertObject:@"X" atIndex:24];
[alphabetArray insertObject:@"Y" atIndex:25];
[alphabetArray insertObject:@"Z" atIndex:26];

NSRange range1 = NSMakeRange(0, 1);
NSRange range2 = NSMakeRange(1, 1);
NSRange range3 = NSMakeRange(2, 1);
NSRange range4 = NSMakeRange(3, 1);

NSString *letter1 = [msg substringWithRange:range1];  
NSString *letter2 = [msg substringWithRange:range2];
NSString *letter3 = [msg substringWithRange:range3]; 
NSString *letter4 = [msg substringWithRange:range4];

NSString *msgAsInt = [[NSString alloc]
             initWithFormat:@"%d%d%d%d",
             [alphabetArray  indexOfObject:letter1 ],
             [alphabetArray  indexOfObject:letter2 ],
             [alphabetArray  indexOfObject:letter3 ],
             [alphabetArray  indexOfObject:letter4 ]]; 
```

任何建议都会很棒。我还没有测试过，但看起来还可以

谢谢，尼克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:58:42.303

如果您只是想要'message as int'，请这样做（假设 UTF-8）：

```
NSMutableString *msgAsInt = [[NSMutableString alloc] init];
for (int i = 0; i < msg.length; i++)
    [msgAsInt appendFormat:@"%02d", [msgAsInt characterAtIndex:i] - 'A']; 
```

此外，如果您想稍后恢复消息，最好`02`在之前添加。`%d`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:37:20.297

如果性能很重要（例如，您有数千个字符串要转换），您可以使用缓冲读写：

```
NSString *string = @"MNOP";

NSUInteger bufferSize = 4;
NSRange range = NSMakeRange(0, MIN(bufferSize,[string length]));

unichar inBuffer[bufferSize];
unichar outBuffer[bufferSize * 2];

[string getCharacters:inBuffer range:range];
NSUInteger outLength = 0;

for ( NSUInteger i = 0; i < range.length; i++)
{
    unichar character = inBuffer[i];
    if ( character >= 'A' && character <= 'Z' ) {
        int value = character - 'A' + 1;
        outBuffer[outLength++] = (value / 10) + '0';
        outBuffer[outLength++] = (value % 10) + '0';
    }
    else {
        // error management
    }
}

NSString *result = [NSString stringWithCharacters:outBuffer length:outLength]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:05:21.760

如果您只处理从 A 到 Z 的大写字母，则可以依赖字符的 UTF8 值。执行以下操作：

```
NSMutableString *msgAsInt = [NSMutableString string];
char *cMsg = calloc(5);
if ([msg getCString:cMsg maxLength:4 encoding:NSUTF8StringEncoding]) {
    for (int i = 0; i < 4; i++) {
        [msgAsInt appendFormat:@"%d", (cMsg[i] - ('A' - 1))];
    }
}
else {
    // there was a problem...
} 
```

# javascript - 如何在javascript中保留变量的值

> ID：11297078
> 
> 赞同：0
> 
> 时间：2012-07-02T15:53:57.640
> 
> 标签：javascript, jquery, html

我是一个重定向到自身的页面。（带有第二天和前一天的箭头）在 document.ready 页面显示新的一天。

这些日子存储在 localStorage 中，如下所示：

```
for(var i = 0;i<status.length;i++)
  {
      localStorage["Day" + i] = status[i].name;
  } 
```

我希望每次显示的默认日期是“Day0”，然后当用户单击下一个或上一个时显示前一天。

```
 $(document).ready(function () {
           $("#CurrentDay").empty();
           $("#CurrentDay").append(GetCurrentDay());
        });

   function GetCurrentDay() {
   localStorage["CurrentDay"] = localStorage["Day0"];
   return localStorage["CurrentDay"];
} 
```

我让箭头调用这些函数：

```
 function GoToNextDay() {
    if (i != localStorage["SchoolDays"]+1) {
        i = i + 1;
        localStorage["CurrentDay"] = localStorage["Day" + i];
    }
    else {
        localStorage["CurrentDay"] = localStorage["Day" + 0];
    }
}

 function GoToPrevDay() {
    if (i != 0) {
        i = i - 1;
        localStorage["CurrentDay"] = localStorage["Day" + i];
    }
    else {

    localStorage["CurrentDay"] = localStorage["Day" + localStorage["SelectedDaysNumber"]];
    }
} 
```

我想知道当我在脚本开头用“0”初始化它时如何存储值“i”coz，每当调用页面时它都会返回到0，如果我让它没有值怎么能我知道我开始的地方吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:59:32.113

您可以使用 localStorage 或 globalStorage 来存储数据：

```
if(typeof localStorage['userName'] === "undefined") {
    // defining the localStorage variable
    localStorage.setItem('userName', 'taranfx');
}

alert("Your user is: " + localStorage.getItem('userName')); 
```

或者，即使在刷新页面后，您也可以使用 cookie 来存储值：

Cookie 可以通过 JavaScript 创建、读取和删除。它们可以通过属性 document.cookie 访问。尽管您可以将 document.cookie 视为字符串，但实际上并非如此，您只能访问名称-值对。

如果我想设置一个名称-值对 'ppkcookie1=testcookie' 的 cookie，它会在我写下这句话的那一刻起 7 天内过期，我会这样做

```
document.cookie =
  'ppkcookie1=testcookie; expires=Thu, 2 Aug 2001 20:47:11 UTC; path=/' 
```

1.  首先是名称-值对 ('ppkcookie1=testcookie')
2.  然后是分号和空格
3.  然后是正确格式的到期日期（'expires=Thu, 2 Aug 2001 20:47:11 UTC'）
4.  又是一个分号和一个空格
5.  然后是路径（路径=/）

这是一个非常严格的语法，不要更改它！

此外，即使看起来我正在将整个字符串写入字符串 document.cookie，但当我再次读出它时，我只会看到名称-值对：

```
ppkcookie1=testcookie 
```

[http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:58:03.570

将其存储在本地存储中。第一次启动脚本时，检查 if `typeof localStorage['your_var'] == "undefined"`，如果`true`将其设置为 0，如果为 false，则使用该值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T15:58:26.640

您可以在 url 中使用哈希 (#) 让脚本知道您现在是哪一天，或者您可以将该信息保存在 cookie 中。

请注意，如果您在 URL 中使用井号符号，您实际上可以将链接发送给其他人到特定日期，在 cookie 中，它是基于每个“会话”的，这意味着只有用户的浏览器会记住当前活动的日期。

例如：

```
www.example.com/#Day0 
```

将是 Day0 的 URL

```
www.example.com/#Day1 
```

将是第 1 天的 URL

然后在您的代码中，您需要执行以下操作：

```
var current_day = window.location.hash; 
```

并使用该变量来初始化您的数组。

每当有人点击转到另一天时，只需将历史推送到该位置，例如

```
var url = "#" + day_to_display;
if (history.pushState)
  history.pushState("", "", url);
else
  window.location = url; 
```

# asp-classic - 在不中断服务的情况下更新经典 ASP 网站

> ID：11297085
> 
> 赞同：1
> 
> 时间：2012-07-02T15:54:21.780
> 
> 标签：asp-classic

几个问题：

1) 如何在不中断服务（用户收到错误或服务不可用消息）或暂时关闭网站的情况下更新 Classic ASP 网站/页面？

2) 通过 SQL Server Management Studio 更新/恢复 MSSQL DB 时，网站用户会收到错误消息吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:28:05.440

一种明智的做法是使用至少一个与生产环境具有相同设置的单独开发环境，并在那里调试所有更改以确保它们正常工作。一旦您的整个站点在与您的生产环境相同的另一个环境中运行和测试，您应该能够简单地移动文件并且它们应该可以在生产环境中工作。该模型是否有效取决于实际上是否能够将环境保持尽可能接近相同。

> 更新/恢复 MSSQL DB 时

小心你的术语；UPDATE 和 RESTORE 是两个*非常*不同的命令。

如果数据库被所做的更改锁定，那么用户将无法访问它，并且可能会导致错误消息，具体取决于您的 IIS 和代码设置。安排维护期并阻止用户访问访问数据库的任何页面将有助于避免混乱错误并在进行更改时泄露有关您的基础架构的任何信息。

似乎您可能想对开发和数据库进行一些基础研究，以确保您了解自己在做什么并且可以涵盖所有基础。查找 RESTORE 和 UPDATE 等命令并正确使用它们至关重要。

> 例如，当您通过 FTP 重写一个或多个网站文件时，在重写发生的那一刻，用户将收到 500 Service Unavailable 错误。我怎样才能避免这种情况？

这确实不应该发生，尽管您可以将文件上传到不同的文件夹，避免在那里出现任何延迟，并在完成上传时使用 Winmerge 等差异工具同步文件（也帮助您跟踪更改并快速恢复）。

# sql-server - REAL 列包含超出记录范围的值

> ID：11297086
> 
> 赞同：5
> 
> 时间：2012-07-02T15:54:24.830
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, data-integrity

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms173773.aspx)，REAL 值的范围是 - 3.40E + 38 到 -1.18E - 38、0 和 1.18E - 38 到 3.40E + 38。但是，我的表中有很多超出该范围的值。

以下查询返回许多非常小的值，而没有非常大的值：

```
SELECT  MyColumn ,
        *
FROM    data.MyTable
WHERE   MyColumn <> 0
        AND ( MyColumn < CONVERT(REAL, 1.18E-38)
              OR MyColumn > CONVERT(REAL, 3.40E+38)
            )
        AND ( MyColumn < CONVERT(REAL, -3.40E+38)
              OR MyColumn > CONVERT(REAL, -1.18E-38)
            ) 
```

很容易显示这些值如何最终出现在表中。我不能直接插入它们：

```
CREATE TABLE a(r REAL NULL);
GO
INSERT INTO a(r) VALUES(4.330473E-39);
GO
SELECT r FROM a
GO
DROP TABLE a;

----
0.0 
```

但我可以划分两列并获取和超出范围值：

```
CREATE TABLE a
  (
    r1 REAL NULL ,
    r2 REAL NULL ,
    r3 REAL NULL
  ) ;
GO
INSERT  INTO a
        ( r1, r2 )
VALUES  ( 4.330473E-38, 1000 ) ;
GO
UPDATE  a
SET     r3 = r1 / r2 ;
SELECT  r1 ,
        r2 ,
        r3
FROM    a

r1            r2            r3
------------- ------------- -------------
4.330473E-38  1000          4.330433E-41 
```

所以我猜 MSDN 给出了错误的有效数据范围，对吗？我错过了什么吗？

有几个人建议这是一个错误。

这种行为的哪一部分到底是一个错误。是吗：

1.  MSDN 中记录并在 DBCC 中使用的错误常量，以及向下舍入的错误阈值。
2.  更新能够保存错误的值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T03:54:21.767

联机丛书仅记录单精度和双精度浮点数的正常范围。[IEEE 754](http://en.wikipedia.org/wiki/IEEE_754-2008)规则还指定了比最小非零正常值更接近零的浮点数，这些浮点数被称为非[规范化、非规范化和次规范化](http://en.wikipedia.org/wiki/Subnormal_numbers)数字。从最后一个链接：

> *非正规数保证浮点数的加法和减法永远不会下溢；两个相邻的浮点数总是有一个可表示的非零差。如果没有逐渐下溢，即使值不相等，减法 a−b 也会下溢并产生零。反过来，这会导致除以零错误，而使用逐渐下溢时不会发生这种错误。*

SQL Server 遵循发布示例中的[单精度浮点计算规则。](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)该错误可能是 DBCC 仅检查*正常值*，并在遇到存储的非正常值时抛出不正确的错误消息。

生成非规范单精度值的示例：

```
DECLARE
    @v1 real = 14e-39,
    @v2 real = 1e+07;

-- 1.4013e-045
SELECT @v1 / @v2; 
```

显示存储的`float`异常通过 DBCC 检查的示例：

```
CREATE TABLE dbo.b (v1 float PRIMARY KEY);
INSERT b VALUES (POWER(2e0, -1075));
SELECT v1 FROM b; -- 4.94065645841247E-324
DBCC CHECKTABLE(b) WITH DATA_PURITY; -- No errors or warnings
DROP TABLE dbo.b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:51:22.063

这是 SQL Server 中的一个错误。您发布的最后一个脚本是一个很好的复制品。在最后添加一行：

```
DBCC CHECKDB WITH data_purity 
```

这失败了：

> 消息 2570，级别 16，状态 3，第 1 行页面 (1:313)，对象 ID 357576312 中的插槽 0，索引 ID 0，分区 ID 1801439851932155904，分配单元 ID 2017612634169999360（类型“行内数据”）。列“r3”的值超出了数据类型“real”的范围。将列更新为合法值。

这证明它是一个错误。我建议您使用[Microsoft Connect for SQL Server](https://connect.microsoft.com/SQLServer/feedback/CreateFeedback.aspx)提交错误。

# ssas - 刚性属性关系的建议

> ID：11297087
> 
> 赞同：1
> 
> 时间：2012-07-02T15:54:30.527
> 
> 标签：ssas, ssas-2008

我在维度中的两个属性之间定义了严格的关系。这是一个商业案例，我们希望“父”属性永远不会改变。但是，我们看到了一种间歇性的情况，即在维度的 ProcessUpdate 期间，先执行对父属性的查询，然后在执行对子属性的查询之前，将一条记录插入到底层数据库中。因此，当执行子属性查询时，它会读取处理第一个属性时不存在的数据，因此可能会为父属性分配未知成员。在该维度的下一次 ProcessUpdate 期间，由于父属性现在拾取新数据并看到父属性不再是“未知”成员而是另一个有效成员，

这里可以采取什么行动？

1.  删除刚性关系——但如果刚性关系应该由业务案例定义，并且我们有一个有效的业务案例，这是否只是 SSAS 中的设计缺陷？
2.  安排属性的处理顺序——如果子属性在父属性之前处理，那么我们就不会遇到这个问题。在 SSAS 中是否可以安排属性处理？
3.  对维度做一个完整的流程——我们有其他维度的刚性关系，我们应该将它们都设置为 ProcessFull 吗？如果是这样，那么，为了保持僵化的关系，为什么还要有其他处理选项？
4.  是否有其他选项需要考虑，例如更改错误配置或其他什么？

请让我知道您认为最好的方法。

谢谢，格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:44:09.980

我建议使用“顺序（事务模式）处理选项”选项＃2（安排流程顺序） -[这里有更多详细信息](http://technet.microsoft.com/en-us/library/ms174774.aspx)。您可能还想运行“影响分析”来验证对象依赖关系 -[在此处实施的步骤](http://technet.microsoft.com/en-us/library/aa337509.aspx)。

# android - 程序化视频转码

> ID：11297088
> 
> 赞同：0
> 
> 时间：2012-07-02T15:54:34.723
> 
> 标签：android

是否有任何可用的库允许 Android 应用程序将视频转码为不同的格式？如果库不可用，是否有任何应用程序可以通过可以执行此操作的意图调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:59:01.257

有 ffmpeg，它非常好，但在 Android 上工作并非易事。不过，它已经完成了。请参阅此线程： [Android 上的 FFmpeg](https://stackoverflow.com/questions/4725773/ffmpeg-on-android)

# backbone.js - Backbone.js Pushstate：true 不返回回调函数

> ID：11297090
> 
> 赞同：1
> 
> 时间：2012-07-02T15:54:46.830
> 
> 标签：backbone.js, backbone-routing

我对主干 js 很陌生，在让我的应用程序的 pushstate 功能正常工作时遇到了一些问题。这是我的路线的一个例子：

```
var TodoRouter = new (Backbone.Router.extend({
    routes: {
        "": "index",
        "item/add": "AddTodoItem",
        "list/add": "AddTodoList"
    },
    AddTodoItem: function() {
        //e.preventDefault();
        alert("add new item");
    },
    AddTodoList: function(e) {
        //e.preventDefault();
        alert("add new list");
    },
    Start: function(){
            //note: my directory structure is localhost/playground/todo/
        Backbone.history.start({pushState: true, root: "/playground/todo/"});
    }, 
    initalize: function(){

    }, 
    index: function(){
        var todoListView = new TodoListView({ collection: TodoItemCollection });
    }
})); 
```

这是我如何称呼我的路线：

```
$(function() {
    TodoRouter.Start();
}); 
```

最后是我如何称呼链接：

```
<a href="#list/add" id="newList">New List</a> 
```

我遇到的问题是，当我调用链接时，页面保持不变，没有警报并且浏览器显示：

```
http://localhost/playground/todo/#list/add 
```

现在这是有趣的部分，如果我刷新页面，url 变为：

```
http://localhost/playground/todo/list/add 
```

我得到了警报。所以我有一种感觉，我在某处遗漏了一个关键点。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:28:42.783

你有`pushState: true`，这就是为什么它更喜欢斜杠`/`而不是哈希`#`

更改或删除哈希

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T02:01:39.740

您正在尝试使用 Backbone Routes 和 html5 pushState。

正如主干文档所说：

> “如果您有 /documents/100 的路由，如果浏览器直接访问该 URL，您的 Web 服务器必须能够提供该页面。”

所以如果你想通过 uri( `localhost/webapp/#about`) 触发一些功能，你只需要使用 Backbone Routes。如果你想使用 Backbone Routes 和 pushState，你需要一个后端来回答对你可读 url ( `localhost/webapp/about`) 的请求，并且需要使用 backbone.navigate 方法来避免浏览器被理解`<a href="#someRoute">`为一个 html 锚。

[在这里](https://stackoverflow.com/questions/18970933/render-backbone-view-on-click-via-router-push-state/18971232#18971232)你可以看到一个完整的例子

**您无法触发您的路线，因为当`pushState:true`它`href="#route"`具有与 html 锚点相同的行为时。**

# sql - sql分组条件太多

> ID：11297091
> 
> 赞同：0
> 
> 时间：2012-07-02T15:54:50.437
> 
> 标签：sql

我有下表：

```
Order    Product    Price  Quantity Description  
Order1   Product1   12      1       Text  
Order1   Product2   15      2       Text  
Order1   Product3   32      1       Text  
Order2   Product1   25      2       Text  
Order2   Product4   65      3       Text 
```

我需要显示订单 1 的详细信息（产品、价格、数量、描述），以及该订单的总价值。有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:59:31.700

由于`Order`是 SQL 关键字，因此您需要根据您的数据库对其进行引用。

例如，对于 SQL Server：

```
select m.*, ms.TotalValue
from MyTable m
inner join (
    select [Order], sum(Price * Quantity) as TotalValue
    from MyTable
    group by [Order]
) ms on m.[Order] = ms.[Order] 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/2090a/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:01:20.303

假设总价值 = 总和（价格 * 数量），则：

```
select t.[Order],
       t.Product,
       t.Price,
       t.Quantity,
       t.Description,
       aux.Total
from tablename t
inner join (
      select [Order],
             SUM(Price * Quantity) as 'Total'
      from tablename
      group by [Order]
) aux on t.[Order] = aux.[Order] 
```

* * *

如果你想要每一行的总数，你可以这样做：

```
select t.[Order],
       t.Product,
       t.Price,
       t.Quantity,
       t.Description,
       t.Price * t.Quantity as 'Total'
from tablename t 
```

# apache2 - Apache，分组子域

> ID：11297092
> 
> 赞同：1
> 
> 时间：2012-07-02T15:54:56.927
> 
> 标签：apache2, virtualhost

`nosoftpatents.com`我正在尝试在域内（发明）的 Apache2 中设置一些基本的虚拟主机 。我应该有两个子域，友好的和以前的，每个子域都可以从两个端口访问，80 和 8800，它们将链接到每个域的`stable`和`devel`子目录。到目前为止，我有这个：

```
<VirtualHost *:80>
    ServerName friendly.nosoftpatents.com        
    DocumentRoot /var/www/nopatents/friendly/stable
</VirtualHost>

<VirtualHost *:80>
    ServerName previous.nosoftpatents.com        
    DocumentRoot /var/www/nopatents/previous/stable
</VirtualHost>

<VirtualHost *:8800>
    ServerName friendly.nosoftpatents.com        
    DocumentRoot /var/www/nopatents/friendly/devel    
</VirtualHost>

<VirtualHost *:8800>
    ServerName previous.nosoftpatents.com        
    DocumentRoot /var/www/nopatents/previous/devel
</VirtualHost> 
```

有没有更优雅的方法呢？某种方式对来自同一端口的主机进行分组？

# facebook - facebook graph api中访问令牌的有效性

> ID：11297097
> 
> 赞同：0
> 
> 时间：2012-07-02T15:55:18.793
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

如果我有一个访问令牌，我可以以某种方式解析它以知道它什么时候到期吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:11:52.827

如果是少量令牌，您可以使用[Facebook 的调试工具来检查它](https://developers.facebook.com/tools/debug)

[在您获得令牌本身的身份验证](https://developers.facebook.com/docs/authentication/)流程中，到期时间也会与令牌一起提供给您- 所以理想情况下，您会在那时存储到期时间，并在您获得新令牌或扩展时保持最新状态当前令牌

# visual-studio-2010 - 使用 TestDriven.NET 和 NUnit 在测试类中运行所有测试

> ID：11297099
> 
> 赞同：8
> 
> 时间：2012-07-02T15:55:36.283
> 
> 标签：visual-studio-2010, unit-testing, nunit, testdriven.net

注意：我在这个项目中使用 TestDriven.NET 3.0.2749 和 NUnit 2.6.0.12051。

我已经安装了 TestDriven.NET 和 NUnit，并试图让 TestDriven.NET 通过右键单击上下文菜单运行测试类中的所有测试。

从 TestDriven.NET 文档：

> 如果选择了代码编辑器窗口，则要执行的测试将由插入符号的位置决定；通过右键单击测试方法内的任意位置并选择“运行测试”来执行单个测试，如图 2 所示；测试夹具中的所有测试都是通过在类内部（但在任何方法之外）右键单击并选择“运行测试”来执行的；命名空间中的所有测试都是通过在命名空间内右键单击并选择“运行测试”来执行的。

我可以使用右键单击上下文菜单成功运行特定的测试方法，并且 NUnit GUI 运行程序将成功运行给定类的所有测试，但我想使用 TestDriven.NET 为这个任务提供的快速访问，而我发展。

当我将插入符号放在测试方法之外时，我收到以下错误：

> 目标类型不包含来自已知测试框架或“主要”方法的测试。

**更新 1：添加了示例代码。**

要测试的示例代码：

```
namespace TDDN.Framework
{
    public class ExampleClass
    {
        public ExampleClass() { }

        public Int32 Add(Int32 x, Int32 y)
        {
            return x + y;
        }

        public Int32 Subtract(Int32 x, Int32 y)
        {
            return x - y;
        }
    }
} 
```

单元测试：

```
using NUnit.Framework;
using TDDN.Framework;

namespace TDDN.UnitTests
{
    [TestFixture] // Cursor caret placed here results in error above.
    public class ExampleClassTests
    {
        [Test] // Cursor caret placed here works.
        public void Add_SumTwoIntegers_SumReturned()
        {
            ExampleClass exampleClass = new ExampleClass();

            Assert.AreEqual(10, exampleClass.Add(5, 5));
        }

        [Test] // Cursor caret placed here works also.
        public void Subtract_SubtractTwoIntegers_DifferenceReturned()
        {
            ExampleClass exampleClass = new ExampleClass();

            Assert.AreEqual(5, exampleClass.Subtract(10, 5));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-12T19:07:55.613

I just encountered this exact problem when using the same versions of TestDriven.NET and NUnit (3.0.2749 and 2.6.0.12051).

The issue is that TestDriven.NET 3.0 doesn't support NUnit 2.6, so it won't recognize the NUnit [Test] and [TestFixture] attributes. Thus, TestDriven.NET will still run your individual test functions, but as Ad Hoc (as displayed at the end of the Pass/Fail/Skip message when testing).

I was able to solve the issue by installing a newer version of TestDriven.NET (3.3 Beta 2), which fully supports NUnit 2.6 (See: [https://groups.google.com/d/msg/nunit-discuss/pTCDx2_L8jU/TlpULzE36wEJ](https://groups.google.com/d/msg/nunit-discuss/pTCDx2_L8jU/TlpULzE36wEJ)) Now you should be able to run all the tests in the fixture at once and see (NUnit 2.6.0) displayed at the end of the test output.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T12:06:47.380

我在插入符号位置上有完全相同的错误消息和类似的行为。

我已经拥有了最新版本的 TestDriven.Net。

我的问题是我的新 TestClass 没有指定类别并且它被过滤掉了（工具 -> TestDriven.Net -> 常规 -> 类别 -> 在类别中包含测试）。

因此，只需指定正确的类别即可解决我的问题。

这是相同的错误消息，但不同的问题和解决方案。

# android - Android 浏览器和 WebView 中的图像模糊

> ID：11297105
> 
> 赞同：6
> 
> 时间：2012-07-02T15:56:13.480
> 
> 标签：android, android-ui, android-image

对于我的 android 应用程序，我需要在`WebView`. 该应用程序在 Android 2.1 (API 7) 及更高版本上运行。图像包含表格软文本，我面临的问题是，在 Android 2.1、2.2、2.3 等版本中，它们总是模糊不清，而在较新的版本中，例如 4.0.3，它们很清晰。我已经测试过高分辨率/低分辨率图像，但结果是一样的。

为什么会这样？

# visual-c++ - 如何在内联汇编中设置标签？

> ID：11297106
> 
> 赞同：1
> 
> 时间：2012-07-02T15:56:22.490
> 
> 标签：visual-c++, inline-assembly

当我需要使用内联汇编时，我如何在 c++ 视觉中设置标签，所以它看起来像这样，例如......

```
__asm
{
    PUSH EAX
    PUSH VAR1
    MOV ECX,DWORD PTR DS:[VAR2]
    CALL DWORD PTR DS:[VAR3]
    JMP VAR4
} 
```

变量在`VAR`哪里链接到一个值或地址？

我试过以下

```
DWORD   VAR2 = 0x991770;    //0x991770 is the location of the function

__asm
{
    ..code
    MOV ECX,DWORD PTR DS:[VAR2]
    ..code
} 
```

但是随后应用程序崩溃了，这是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:10:37.987

用于`offset variableName`从内联汇编访问变量。请参阅[此处](http://msdn.microsoft.com/en-us/library/y8b57x4b%28VS.80%29.aspx)的参考。

例子：

```
char format[] = "%s %s\n";
char hello[] = "Hello";
char world[] = "world";
int main( void )
{
   __asm
   {
      mov  eax, offset world
      push eax
      mov  eax, offset hello
      push eax
      mov  eax, offset format
      push eax
      call printf
      //clean up the stack so that main can exit cleanly
      //use the unused register ebx to do the cleanup
      pop  ebx
      pop  ebx
      pop  ebx
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:10:46.373

C 变量名称在内联汇编中可见。因此，如果您需要数据访问，只需编写 var 名称：

```
int var2 = 3;
__asm
{
    mov ecx, var2 
```

这将编译为适当的内存访问语句。

对于代码标签 - 你只需声明它们，就像在真正的汇编中一样：

```
Label1:
    mov ecx, 0
    jmp Label1 
```

外部功能也被视为标签。但是，名称修改适用。

如果您需要当前 IP 的数值作为通用寄存器，则没有直接命令，但有一个非常简单的解决方法：

```
 call Next
Next:
    pop eax ; eax now is the value of IP at the current point 
```

哦，忘了这些`ds:`东西。你现在在平地——在门口检查你的段寄存器。

# unit-testing - 在单独的框架中动态地对 Clojure 进行单元测试

> ID：11297108
> 
> 赞同：5
> 
> 时间：2012-07-02T15:56:24.037
> 
> 标签：unit-testing, emacs, clojure

我正在观看一个令人惊叹的“Emacs Rocks”视频，我注意到开发人员正在并排使用两个窗口，其中一个窗口是 Emacs，另一个窗口用于（几乎）不断地运行单元测试。视频在这里（IMO 真的很好看）：

[http://www.youtube.com/watch?v=Zxt-c_N82_w](http://www.youtube.com/watch?v=Zxt-c_N82_w)

使用 Clojure 时如何做同样的事情？

我想在屏幕上看到的是：

*   我当前在缓冲区中编辑的 .clj 文件
*   一个 REPL
*   另一个窗口（一个 Emacs 框架？），我可以在其中看到单元测试的结果（单元测试本身是在他们测试的每个 .clj 文件中或在单独的 .clj 文件中定义的，我不在乎）

理想情况下，我希望在另一个 Emacs 框架中显示单元测试的结果，但常规终端也可以（只要至少有一些颜色支持）。

有没有人在做类似的事情？我不介意 shell 脚本或 elisp'ing 或其他任何东西，只要它允许获得类似的设置来对 Clojure 代码进行单元测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T17:22:43.113

如果添加 lein autotest 插件

*   Ctrl-x 2 水平分割窗格
*   Ctrl-x 3 将顶部面板拆分为代码并测试
*   `clojure-jack-in`将 repl 放入底部缓冲区
*   在其中一个顶部面板中使用 Mx ansi-term 以获得一个不错的终端，然后在该终端中运行 lein autotest。

# java - SearchByEmail 打印

> ID：11297111
> 
> 赞同：0
> 
> 时间：2012-07-02T15:56:34.290
> 
> 标签：java, hashmap

我有一个`EmployeeStore`类可以存储公司员工的详细信息，例如姓名、身份证和电子邮件。我需要一种方法来通过其员工的电子邮件地址搜索哈希图，然后打印出具有匹配地址的单个员工。

我得到了在另一个答案中搜索地图的代码，但无法打印员工。

这是我的代码：

```
public class EmployeeStore {

    HashMap<String, Employee> map;

    public EmployeeStore() {
        map = new HashMap<String, Employee>();
    }

    //....

    public void add(Employee employee) {
        map.put(employee.getEmployeeName(), employee);
    }

    public Employee searchByName(String name) {
        Employee employee = map.get(name);    
        System.out.println(employee);
        return employee;
    }

    public Employee searchByEmail(String email) {
        for (Employee employee : map.values()) {
            if (email.equals(employee.getEmployeeEmail())) {
                return employee;
            }
            System.out.println(employee);
        }
        Employee employee = map.get(email);
        System.out.println(employee);

        return employee;
    }
} 
```

为此，我将代码更改为：

```
public Employee searchByEmail(String email) 
    {
        for (Employee employee : map.values())
        {
            if (email.equals(employee.getEmployeeEmail()))
            {
                System.out.println(employee);
                return employee;
            }
        }

        return null;
    } 
```

主要的：

```
public class MainApp {

    private static Scanner keyboard = new Scanner(System.in);

    public static void main(String[] args) {
        new MainApp().start();
    }

    public void start() {
        EmployeeStore Store = new EmployeeStore();
        Store.add(new Employee("James O' Carroll", 18, "hotmail.com"));

        Store.add(new Employee("Andy Carroll", 1171, "yahoo.com"));

        Store.add(new Employee("Luis Suarez", 7, "gmail.com"));
        Store.searchByName("James O' Carroll");
        //Store.print();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:13:31.747

您的`searchByxxx`方法返回 an`Employee`因此您应该读取该值然后很容易打印它：

```
Employee james = Store.searchByName("James O' Carroll");
Employee andy = Store.searchByEmail("yahoo.com");

System.out.println(james);
System.out.println(andy); 
```

并且您需要`searchByXXX`稍微清理方法并删除不必要的打印语句。

# xml - 我应该在这种情况下使用 XML 吗？

> ID：11297113
> 
> 赞同：0
> 
> 时间：2012-07-02T15:56:39.353
> 
> 标签：xml

我正在构建一个具有不同输入和输出的程序，具体取决于加载的“车辆”。我希望人们能够装载不同的车辆，所以我需要某种类型的文件来跟踪所有信息。

XML 会是最好的方法吗？我应该考虑其他选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:10:36.077

XML 通常用于您描述的情况，并且有很多工具可以帮助自动创建和解析 XML，因此它是一个可靠的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:02:21.117

`XML`用于获取和获取数据。但是如果您的程序中有大量的数据跟踪方式，XML 是不好的选择，因为文件的大小会增加。我的意见是使用以下任何一种

```
1.JSON
2.YAML 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T20:08:32.683

XML 广泛用于此类任务并且运行良好。如果您不希望将数据绑定到某个特定程序，则它特别适合，例如，您可能想对 XML 进行查询以选择要处理的数据子集：有很多工具可用于此类事情. 另一方面，根据程序是用什么语言编写的，JSON 可能更容易读写。

# javascript - Quickflip 2 插件 - 只翻转一次图像？

> ID：11297116
> 
> 赞同：0
> 
> 时间：2012-07-02T15:56:51.060
> 
> 标签：javascript, jquery

我正在使用 Quickflip 2 插件 ( [http://jonraasch.com/blog/quickflip-2-jquery-plugin/comment-page-3#comment-3562](http://jonraasch.com/blog/quickflip-2-jquery-plugin/comment-page-3#comment-3562) ) 让图像在单击时翻转到另一个图像。

但是，我试图让用户只需单击一次图像，以便他们只能将图像翻转一次而不能将其翻转回来。

在我的示例（[http://jsfiddle.net/gJh29/](http://jsfiddle.net/gJh29/)）中，您可以看到您可以无限次翻转图像。我试图让它们翻转一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:21:21.340

为了使快速翻转正常工作，需要设置高度和宽度。你也不需要调用 $(function() {} ); 2倍。你应该有这样的东西：http: [//jsfiddle.net/hitmanDX/KHYR9/2/](http://jsfiddle.net/hitmanDX/KHYR9/2/)

# html - 如何使 css 不透明度属性不从父 div 继承？

> ID：11297117
> 
> 赞同：0
> 
> 时间：2012-07-02T15:56:54.337
> 
> 标签：html, css

我想要 png 图像后面的黑条，并且我希望图像后面的黑条具有不透明度。当我对黑条应用不透明度时，他的子元素（png 图像）继承了这个不透明度。我不希望这种情况发生。

该网站是 www.tomasfleiderman.com.ar ，上面写着“为金钱而工作，为爱而设计”我想要一个不透明的黑色条。

代码如下：

```
<style type="text/css">
p {
font-size:40px;
color: white;
}
#caja
{

}
#fondofrase
{
}
</style>
<!--
<p>Work for money design for love</p>
  -->
<div  id="fondofrase">
<div  id="caja">
<div>
<img src="http://www.tomasfleiderman.com.ar/1.png" alt="Texto" height="60%" width="60%"/>
</div>
</div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:03:18.447

您可以使用半透明背景颜色来做到这一点：http: [//jsfiddle.net/alessandro_pezzato/LWh75/](http://jsfiddle.net/alessandro_pezzato/LWh75/)

```
 background: rgba(0,0,0,0.8); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:04:41.597

您可以尝试在周围的`<div>`-tag 上设置此样式：

```
background: rgba(0, 0, 0, .5); 
```

但是，rgba 的浏览器支持并不完美，在使用此解决方案之前您绝对应该考虑一些问题。它倾向于在低于 9 的 IE 版本中中断（请参阅链接：[http](http://css-tricks.com/rgba-browser-support/) ://css-tricks.com/rgba-browser-support/ ）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:00:46.623

你不能这样做，至少不容易。子元素具有与父元素相同的最大不透明度，因此如果父元素的不透明度为“0.6”，则子图像的不透明度只能为“0.6”。但是，您可以使用一些绝对定位技术将 the`div`和 the`img`彼此叠加为兄弟元素而不是父子元素。

```
<style>
    #positioner {
        position: relative;
    }

    #theText,
    #theImage {
        position: absolute;
        top: 0;
        left: 0;
    }
</style>
<div id="positioner">
    <p id="theText">Work for money design for love</p>
    <img id="theImage" />
</div>
​ 
```

# java - 解析器中的 IOException 引发

> ID：11297120
> 
> 赞同：0
> 
> 时间：2012-07-02T15:57:14.697
> 
> 标签：java, android

我正在制作一个应用程序，我可以在其中调用 web 服务并填写数据。但是由于发生了一些奇怪的事情。我遇到了带有 IOException 的 arrayIndexoutofBound 错误...我使用 SAX 解析器来解析简单的 web 服务。

错误：：

```
07-02 16:50:52.992: E/NearbyScreen(31762): SAX PARSER ERRORjava.lang.ArrayIndexOutOfBoundsException: length=8192; regionStart=-2888; regionLength=11080
07-02 16:50:52.992: W/System.err(31762): java.lang.ArrayIndexOutOfBoundsException: length=8192; regionStart=-2888; regionLength=11080
07-02 16:50:53.002: E/NearbyScreen(31762): SAX PARSER ERRORjava.io.IOException: Attempted read on closed stream.
07-02 16:50:53.002: W/System.err(31762):    at java.util.Arrays.checkOffsetAndCount(Arrays.java:1731)
07-02 16:50:53.012: W/System.err(31762):    at java.net.PlainSocketImpl.read(PlainSocketImpl.java:484)
07-02 16:50:53.012: W/System.err(31762):    at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
07-02 16:50:53.012: W/System.err(31762):    at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
07-02 16:50:53.012: W/System.err(31762):    at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)
07-02 16:50:53.012: W/System.err(31762):    at org.apache.http.impl.io.AbstractSessionInputBuffer.read(AbstractSessionInputBuffer.java:134) 
```

**代码 ：：**

```
DefaultHttpClient client = new DefaultHttpClient();
String ConcateURL = String.valueOf(newViewPortlatitude) + "," + String.valueOf(newViewPortlongitude)+"/TOUR/1000/1/5/";
URL URLPush = new URL(getString(R.string.NearbyURL)+ConcateURL);
                Log.i(TAG, "** URL ** ->" + URLPush);
                HttpGet httpGet = new HttpGet(URLPush.toURI());
                HttpParams httpParams = httpGet.getParams();
                int timeoutdConnection = 30000;
                HttpConnectionParams.setConnectionTimeout(httpParams,
                        timeoutdConnection);

                httpGet.setParams(httpParams);
                HttpResponse response = client.execute(httpGet);
                HttpEntity entity = response.getEntity();

                if (entity != null) {
                    Log.i("MyMapActivity", "--1--");
                    instream = entity.getContent();
                    Log.i("MyMapActivity", "--2--");
                }
                if (instream != null) {

                    Log.i("MyMapActivity", "--3--");

                    /********** test *******/
                    SAXParserFactory saxPF = SAXParserFactory.newInstance();
                    SAXParser saxP = saxPF.newSAXParser();
                    XMLReader xmlR = saxP.getXMLReader();
                    System.out.println("url >>>>>" + URLPush);
                    NearByHandler myXMLHandler = new NearByHandler();
                    xmlR.setContentHandler(myXMLHandler);
                    xmlR.parse(new InputSource(instream));
                    instream.close();

                    whaleWatchingInfoList = myXMLHandler.getQuotes();
                    // Fill Arraylist by Handler
                    Log.i(TAG, "whaleWatchingInfoList size "
                            + whaleWatchingInfoList.size());
                    Log.w("AndroidParseXMLActivity", "Done");
                }
            }catch (ConnectTimeoutException e) {
                Log.e(TAG, "ConnectionTimeOUT " + e);
                IsConnectionTimeoutException = true;
                //Flag ConnectionTimout
            }
            catch (Exception e) {
                Log.e(TAG, "SAX PARSER ERROR" + e);
                e.printStackTrace();

                //Flag ConnectionTimout
            } 
```

**更新：**

```
07-02 17:10:52.042: D/Process(1606): com.android.server.am.ActivityManagerService.serviceDoneExecuting(ActivityManagerService.java:12474)
07-02 17:10:52.042: D/Process(1606): android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:723)
07-02 17:10:52.042: D/Process(1606): com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1714)
07-02 17:10:52.042: D/Process(1606): android.os.Binder.execTransact(Binder.java:338)
07-02 17:10:52.042: D/Process(1606): dalvik.system.NativeStart.run(Native Method)
07-02 17:10:53.643: D/WifiStateMachine(1606): fetchRssiAndLinkSpeedNative RSSI = -66
07-02 17:10:56.656: D/WifiStateMachine(1606): fetchRssiAndLinkSpeedNative RSSI = -65
07-02 17:10:59.669: D/WifiStateMachine(1606): fetchRssiAndLinkSpeedNative RSSI = -65
07-02 17:11:02.512: D/PhoneStatusBarPolicy(1695): silentresetvalue = 0, mTimerEnabled = false
07-02 17:11:02.512: D/PhoneStatusBarPolicy(1695): updateSignalStrength(), in service, remove timer
07-02 17:11:02.542: D/PhoneStatusBarPolicy(1695): isCdma():false hasService:true mSimState=UNKNOWN gprsState=0 mDataState=-1 dataActivity=0 mPhone.htcModemLinkOn:false hspa==true
07-02 17:11:02.542: D/PhoneStatusBarPolicy(1695): updateDataIcon(), silentresetvalue = 0, mTimerEnabled = false
07-02 17:11:02.542: D/PhoneStatusBarPolicy(1695): updateDataIcon(), in data service, do nothing
07-02 17:11:02.672: D/WifiStateMachine(1606): fetchRssiAndLinkSpeedNative RSSI = -66
07-02 17:11:05.685: D/WifiStateMachine(1606): fetchRssiAndLinkSpeedNative RSSI = -65
07-02 17:11:08.688: D/WifiStateMachine(1606): fetchRssiAndLinkSpeedNative RSSI = -64
07-02 17:11:09.449: I/global(2636): In close() at SocketHttpClientConnection
07-02 17:11:09.449: I/global(2636): call socket close in SocketHttpClientConnection, socket=Socket[address=www.google-analytics.com/74.125.236.101,port=80,localPort=43849]
07-02 17:11:11.701: D/WifiStateMachine(1606): fetchRssiAndLinkSpeedNative RSSI = -65
07-02 17:11:13.833: D/AutoSetting(2358): service - handleMessage() incoming message, what:50
07-02 17:11:13.833: D/AutoSetting(2358): service - handleMessage() stop self
07-02 17:11:13.843: D/AutoSetting(2358): service - onDestroy()
07-02 17:11:13.873: D/AutoSetting(2358): service - handleMessage() incoming message, what:100
07-02 17:11:13.893: D/AutoSetting(2358): service - onDestroy() END
07-02 17:11:13.903: D/Process(1606): killProcessQuiet, pid=2358
07-02 17:11:13.903: D/Process(1606): dalvik.system.VMStack.getThreadStackTrace(Native Method)
07-02 17:11:13.903: D/Process(1606): java.lang.Thread.getStackTrace(Thread.java:599)
07-02 17:11:13.903: D/Process(1606): android.os.Process.killProcessQuiet(Process.java:837) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:03:20.427

在 NearByHandler 类中，您从标签中获取值的部分正在引发异常，原因是**具有空值而不是有效值。**

因此，请使用**try/catch 块****在您从 webServer 获取数据并解析它的地方**处理异常。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:09:26.947

您将连接超时设置为 30 秒。可能是连接超时并且流已关闭。这很容易在调试模式下发生。您可以尝试增加此期限。**

# credit-card - 如何通过号码判断信用卡的原产国？

> ID：11297121
> 
> 赞同：15
> 
> 时间：2012-07-02T15:57:25.367
> 
> 标签：credit-card, credit-card-track-data

我正在尝试开发一个应用程序，它可以让来自世界不同地区的人们访问不同的服务。

假设有人输入卡号 1111-1111-1111-1111 。我如何用它来告诉原产国？

我知道这是可能的，因为 paypal 和苹果都可以做到。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-01-22T17:05:26.257

使用[BinList](https://www.binlist.net/)。它只是通过检查卡号的前 6 位数字告诉您原产国。它也有一个简洁的基于 Json 的 API。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T16:03:22.067

起初，我质疑是否可以仅从信用卡号中收集到这些信息。

然后我在这里找到了它：

~~[http://en.wikipedia.org/wiki/List_of_Bank_Identification_Numbers](http://en.wikipedia.org/wiki/List_of_Bank_Identification_Numbers)~~

**编辑**-如果您使用信用卡号码进行付款，请不要忘记[PCI 合规性。](http://en.wikipedia.org/wiki/PCI_compliance)

**编辑**- 显然之前的维基百科页面已被删除。 [这](http://en.wikipedia.org/wiki/Bank_card_number)似乎有类似的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-23T10:37:11.383

结帐[https://binlist.io/](https://binlist.io/)开源，看起来他们在他们的 github 页面上有一个维护的 csv 文件：[https ://github.com/iannuttall/binlist-data](https://github.com/iannuttall/binlist-data)

# shader - 如何在着色器编程中检查纹理是否存在？

> ID：11297123
> 
> 赞同：0
> 
> 时间：2012-07-02T15:57:27.640
> 
> 标签：shader, hlsl, directx-9

`g_MeshTexture`: 纹理文件名

```
sampler MeshTextureSampler = 
sampler_state
{
    Texture = <g_MeshTexture>;
    MipFilter = LINEAR;
    MinFilter = LINEAR;
    MagFilter = LINEAR;
}; 
```

: 采样器

我用“ `tex2D(MeshTextureSampler, In.TextureUV)`”

HLSL 中的哪个条件类似于`if(g_MeshTexture == NULL)`C++ 中的条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:38:51.307

HLSL 没有内置任何东西可以对此进行测试。

您可以添加一个额外的客户端加载参数来告诉着色器纹理是否有效，或者创建第二个替代着色器，在没有定义纹理（并且由客户端 C++ 程序分配）的情况下，该着色器在没有读取该纹理的情况下执行)

# java - 如何使用 java 在 JSF 页面中登录

> ID：11297127
> 
> 赞同：1
> 
> 时间：2012-07-02T15:57:40.027
> 
> 标签：java, jsf, post, httpclient

我正在尝试登录 .jsf 内网页面，这是其中的一部分：

```
 <form method="POST" action="j_security_check" name="loginForm" id="loginForm">
                <input name="j_username" type="text" class="textbox" maxlength="30"/>
                <input name="j_password" type="password" class="textbox" maxlength="30"/>
                <input type=submit value="Enter" class="button">
                <input type=submit value="Exit" class="button">
    </form> 
```

我在java中搜索并尝试过类似的东西，但没有奏效，我得到与结果相同的页面：

```
 HttpPost post = new HttpPost("http://xxxx/login.jsf");   

            List <NameValuePair> parameters = new ArrayList <NameValuePair>();   
            parameters.add(new BasicNameValuePair("j_username", "92232776"));   
            parameters.add(new BasicNameValuePair("j_password", "(7110oi14)")); 

            UrlEncodedFormEntity sendentity;

            sendentity = new UrlEncodedFormEntity(parameters, HTTP.UTF_8);

            post.setEntity(sendentity);    
            HttpClient client = new DefaultHttpClient();   
            HttpResponse response = client.execute(post, httpContext);   

            System.out.print(convertInputStreamToString(response.getEntity().getContent())); 
```

（我正在使用 httpcomponents-client-4.2）

我需要做什么才能登录此页面？我需要对代码按钮“发送”做些什么吗？

谢谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T16:02:01.623

登录信息存储在会话中。会话由 cookie 支持。您需要跨请求维护 cookie。基本上，只要 cookie 有效，您就需要`Set-Cookie`在同一会话中的每个后续 HTTP 请求中将检索到的响应标头传回。

在 HttpClient 中，您需要准备一个在[`CookieStore`](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/CookieStore.html)其中设置的[`HttpContext`](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/protocol/HttpContext.html)，然后依次传递每个[`HttpClient#execute()`](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/HttpClient.html#execute%28org.apache.http.client.methods.HttpUriRequest,%20org.apache.http.protocol.HttpContext%29)调用。

```
HttpClient httpClient = new DefaultHttpClient();
CookieStore cookieStore = new BasicCookieStore();
HttpContext httpContext = new BasicHttpContext();
httpContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
// ...

HttpResponse response1 = httpClient.execute(method1, httpContext);
// ...

HttpResponse response2 = httpClient.execute(method2, httpContext);
// ... 
```

请注意，此`j_security_check`登录步骤与 JSF 无关，它也适用于所有其他基于 Java Servlet 的登录表单。一旦您打算提交由 创建的真正的 JSF 表单`<h:form>`，那么您需要考虑更多。然后前往这个更详细的答案：[我如何以编程方式将文件上传到网站？](https://stackoverflow.com/questions/8623870/how-can-i-programmatically-upload-a-file-to-a-website/8625286#8625286)虽然这处理通过 JSF 表单以编程方式上传文件，但提交 JSF 表单的基本原则是相同的（必须考虑某些隐藏的输入字段等）。

# sharepoint - SharePoint 返回额外的系统列

> ID：11297128
> 
> 赞同：1
> 
> 时间：2012-07-02T15:57:43.903
> 
> 标签：sharepoint, sharepoint-api

我向 SherePoint 查询。我创建了查询、视图查询和查询选项。Web 服务返回给我很好的结果，但它包括一些其他系统列，例如： `ows_Modified`、`ows_DocIcon`、`ows_Editor`。我不想要他们。如何仅返回 ViewQuery 字符串中的那些？

我的查询选项是：

```
@"<QueryOptions>
                    <IncludeMandatoryColumns>False</IncludeMandatoryColumns><ViewAttributes Scope='Recursive' />
                </QueryOptions>"; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:08:10.837

为了只返回选定的列（而不是全部），请使用对象`ViewFields`的属性`SPQuery`。您可以在此处找到有关它的更多信息和示例代码：http: [//msdn.microsoft.com/en-us/library/microsoft.sharepoint.spquery.viewfields.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spquery.viewfields.aspx)。

为了从 javascript 中执行此操作，您可以尝试此处编写的代码（该帖子在另一个主题上，但它仍然显示如何指定要选择的字段）：[https ://sharepoint.stackexchange.com/questions/33683/spservices -今天不返回正确结果](https://sharepoint.stackexchange.com/questions/33683/spservices-today-not-returning-correct-results)。

# html - 如何仅清除最后一个浮动块

> ID：11297136
> 
> 赞同：1
> 
> 时间：2012-07-02T15:58:15.833
> 
> 标签：html, css-float

我有多个浮动块。是否可以指定应该清除哪个块？

检查以下结构：

```
+------------+ +--------------------+
|            | |+--------+ +-------+|
| float:left | ||fl left | |fl left|| 
|            | |+--------+ +-------+|
|            | |+------------------+|
|            | ||                  ||
|            | || block that clears||
|            | || prev 2  floated  ||
|            | || blocks but doesn't|  
|            | || clear first fl.  ||
|            | || block            ||
|            | |+------------------+|
|            | +--------------------+
+------------+ 
```

在 html 中：

```
<div class="floated-left-column">
   left column content
</div>
<div class="right-column">
   <div>
       <div class="float-left">...</div>
       <div class="float-left">...</div>
   </div>
   <div>
        This block should clear only ".float-left" blocks (not ".floated-left-column")
   </div>
   <div>
        Here is some content
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:13:45.350

这是基本的 HTML/CSS 布局。看看[这个 JSFiddle 示例](http://jsfiddle.net/cMjUj/)。

当你清除一个浮动时，它通常只会清除同一容器内的浮动，或者更低。这就是为什么当您将某些东西`clear: both`放入容器的顶层时，它会清除*所有内容*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:07:19.367

您还需要在右侧“左侧”浮动父块。您可以在子容器中浮动和清除，而父容器不会清除。

我看到你现在添加了一个例子。向左浮动 DIV“右列”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:44:09.743

我已经用以下html解决了它。谢谢您的帮助。可以解决我的问题吗（它有效，但我不知道它在其他浏览器等中有效）？

```
<div class="floated-left-column">
   left column content
</div>
<div class="right-column">
   <div class="floated-left-with-100-precent-width">
       <div>
           <div class="float-left">...</div>
           <div class="float-left">...</div>
       </div>
       <div class="clearfix"></div>
   </div>

   <div>
        This block should clear only ".float-left" blocks (not ".floated-left-column")
   </div>
   <div>
        Here is some content
   </div>
</div> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-02T16:06:41.907

[使用bootstrap](http://twitter.github.com/bootstrap/scaffolding.html)可能很容易做到这一点。如果您正在从头开始设计一个新网站，那么 bootstrap 无论如何都是一个很好的起点。

# macos - 为什么我得到多个 NSDocument 实例但只有一个窗口？

> ID：11297140
> 
> 赞同：0
> 
> 时间：2012-07-02T15:58:27.153
> 
> 标签：macos, cocoa, instance, nsdocument

在我的基于文档的应用程序中，当我运行该应用程序时打开不少于**三个**文档，但只显示一个窗口。当我保存并退出时，它会保存*另一个*文档而不是属于该窗口的文档。

这怎么可能发生？特别是，我不想要多个实例`NSDocument`，如何在启动时避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:01:08.687

我发现这与在 Interface Builder 中设置应用程序的方式有关。该代码没有导致此行为。

因此，如果在启动基于文档的应用程序时打开看似随机的文档，请记住**还要检查 IB 中的 xib 设置！**

# c# - Visual Studio 2010 My.Settings 导入

> ID：11297145
> 
> 赞同：1
> 
> 时间：2012-07-02T15:58:46.140
> 
> 标签：c#, vb.net, visual-studio-2010, visual-studio

我有一个包含多个项目的解决方案，并且所有项目都需要共享相同的 My.Settings，或者至少有相同集合的本地副本。如何从其中一个项目中获取 My.Settings 到其他项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:05:47.400

我认为您可以将其添加为每个项目中的现有项目，这将为其创建快捷方式。[这是我的参考](http://blog.decarufel.net/2007/10/getting-access-to-settings-in-another.html)，所以不需要更新每个项目。
希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:48:20.713

My.settings 中定义的设置可用于所有引用定义这些设置的程序集的程序集，只要它们是公共的。

首先确保在 My.settings 的设置设计器中将“访问修饰符”设置为“公共”。

然后，要访问设置，请使用定义项目的命名空间：{My namespace}.Properties.Settings.Default.{my setting}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:33:16.423

那么您需要将设置文件添加到您的解决方案中，然后将现有项目作为链接项添加到您的项目中

[如何在 Visual Studio 中的多个项目之间共享配置设置？](https://stackoverflow.com/questions/2826812/how-can-i-share-configuration-settings-across-multiple-projects-in-visual-studio)

# c# - 为选定的 Listview 项禁用蓝色边框

> ID：11297149
> 
> 赞同：4
> 
> 时间：2012-07-02T15:59:03.007
> 
> 标签：c#, wpf, xaml, listview

我有一个 ListView，它的 ItemsPanelTemplate 为 Horizo​​ntal WrapPanel。我想摆脱所选项目的蓝色背景。它仅在所选项目的左侧可见。

SO上有很多类似的问题，我尝试了很多解决方案，但都没有奏效。

这是我已经尝试过的：

```
<ListView.Resources>
            <Style TargetType="{x:Type ListViewItem}">
                <Style.Resources>
                    <!-- Foreground for Selected ListViewItem -->
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" 
                             Color="Black"/>
                    <!-- Background for Selected ListViewItem -->
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                             Color="Transparent"/>
                    <!--SelectedItem without focus-->
                    <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent"/>
                </Style.Resources>
            </Style>
        </ListView.Resources>

<ListView.ItemContainerStyle>
            <Style TargetType="{x:Type ListViewItem}">
                <EventSetter Event="Control.MouseDoubleClick" Handler="HandleSelectedItemDoubleClick"/>
                <Style.Triggers>
                    <Trigger Property="IsSelected" Value="true">
                        <Setter Property="RenderTransform">
                            <Setter.Value>
                                <ScaleTransform ScaleX="2" ScaleY="2" CenterX="12" CenterY="12" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Panel.ZIndex" Value="150"/>
                        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                        <Setter Property="BorderBrush" Value="{x:Null}" />
                        <Setter Property="Background" Value="{x:Null}" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </ListView.ItemContainerStyle>
        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel Orientation="Horizontal" Width="210" Margin="15" />
            </ItemsPanelTemplate>
        </ListView.ItemsPanel> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T16:21:58.517

您需要覆盖`SystemColors.HighlightBrushKey`for the `ListView`to be `Transparent`（或您想要的任何颜色）

我通常把它放在里面，`ListView.Resources`所以它只适用于特定的`ListView`，而不是`ListViews`我的应用程序中的全部

```
<ListView.Resources>
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" 
                     Color="Transparent"/>
</ListView.Resources> 
```

它非常接近您在代码中已有的内容，但您需要将其设置`ListView.Resources`为`ListViewItem.Resources`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:06:05.067

这就是为我做的：

```
 <UserControl.Resources>
    <DataTemplate x:Key="ItemTemplate">
        <StackPanel Orientation="Vertical" Background="Transparent" Opacity="1" Width="185" MaxWidth="185">
            <StackPanel Orientation="Horizontal">
            <TextBlock 
                Margin="0,0,10,0"
                            Background="Transparent"
                            Foreground="DarkGoldenrod" 
                            FontSize="12" FontStyle="Italic"
                            Text="{Binding Path=EventTypeName, Mode=OneWay}" />
                <TextBlock
                    Background="Transparent"
                    Foreground="DarkGoldenrod"
                    FontSize="12" FontStyle="Italic"
                    Text="{Binding Path=AccountIdentity, Mode=OneWay}" />
            </StackPanel>
            <TextBlock 
                            Background="Transparent"
                            Foreground="DarkGoldenrod" MaxWidth="170"
                            FontSize="12" FontStyle="Italic" TextTrimming="WordEllipsis" ToolTip="{Binding Path=EventMessage,Mode=OneWay}"
                            Text="{Binding Path=EventMessage, Mode=OneWay}" />

            <TextBlock 
                                Background="Transparent" 
                                Foreground="Black" 
                                FontSize="8" 
                                Text="{Binding Path=EventLoggedOn, Mode=OneWay}"
                                TextTrimming="WordEllipsis"
                                ToolTip="{Binding Path=EventLoggedOn, Mode=OneWay}"
                                Margin="0,0,10,0" />
            <StackPanel Orientation="Horizontal">
                <TextBlock
                                Background="Transparent" 
                                Foreground="Black" 
                                FontSize="8"
                                Text="{Binding Path=QualifiedCreator, Mode=OneWay}" />
            </StackPanel>
        </StackPanel>
    </DataTemplate>
    <DataTemplate x:Key="SelectedTemplate">
        <StackPanel Orientation="Vertical" Background="LightGray" Opacity="1" Width="185" MaxWidth="185">
            <StackPanel Orientation="Horizontal">
                <TextBlock 
                    Margin="0,0,10,0"
                            Background="Transparent"
                            Foreground="Yellow" 
                            FontSize="12" FontStyle="Italic"
                            Text="{Binding Path=EventTypeName, Mode=OneWay}" />
                <TextBlock
                            Background="Transparent"
                    Foreground="Yellow"
                    FontSize="12" FontStyle="Italic"
                    Text="{Binding Path=AccountIdentity, Mode=OneWay}" />
            </StackPanel>
            <TextBlock 
                            Background="Transparent"
                            Foreground="DarkGoldenrod" MaxWidth="170"
                            FontSize="12" FontStyle="Italic" TextTrimming="WordEllipsis" ToolTip="{Binding Path=EventMessage,Mode=OneWay}"
                            Text="{Binding Path=EventMessage, Mode=OneWay}" />

            <TextBlock 
                                Background="Transparent" 
                                Foreground="Black" 
                                FontSize="8" 
                                Text="{Binding Path=EventLoggedOn, Mode=OneWay}"
                                TextTrimming="WordEllipsis"
                                ToolTip="{Binding Path=EventLoggedOn, Mode=OneWay}"
                                Margin="0,0,10,0" />
            <StackPanel Orientation="Horizontal">
                <TextBlock
                                Background="Transparent" 
                                Foreground="Black" 
                                FontSize="8"
                                Text="{Binding Path=QualifiedCreator, Mode=OneWay}" />
            </StackPanel>
        </StackPanel>
    </DataTemplate>
    <Style TargetType="ListViewItem" x:Key="ContainerStyle">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="ContentTemplate" Value="{StaticResource ResourceKey=ItemTemplate}" />
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True" >
                <Setter Property="ContentTemplate" Value="{StaticResource ResourceKey=SelectedTemplate}" />
            </Trigger>
        </Style.Triggers>
    </Style>
</UserControl.Resources> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:06:11.410

最简单的方法是在选择项目时使用触发器将背景设置为 {x:Null}。

```
<ListView>
    <ListView.ItemContainerStyle>
        <Style TargetType="{x:Type ListViewItem}">
                <Style.Triggers>
                        <Trigger Property="IsSelected"
                                         Value="True">
                                <Setter Property="Background"
                                                Value="{x:Null}" />
                                <Setter Property="BorderBrush"
                                                Value="{x:Null}" />
                        </Trigger>
                </Style.Triggers>
        </Style>
    </ListView.ItemContainerStyle>
    ...
</ListView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-19T16:03:26.857

要删除所有默认样式（悬停、选择等），只需为 ItemContainer（而不是 Item 本身）定义一个自定义模板：

```
<ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ListViewItem}">
                    <ContentPresenter />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ListView.ItemContainerStyle> 
```

[在 MSDN 论坛上找到](https://social.msdn.microsoft.com/Forums/officeapps/en-US/6bc08ba3-88d5-4e13-9300-f54067ef3a5c/get-rid-of-the-damn-blue-selection-border#eb0014d5-ca9f-4228-a48f-b0d5cd8b049a)

# extjs - 使用节点上的新 url 触发 treeloader 单击 extjs 3

> ID：11297152
> 
> 赞同：0
> 
> 时间：2012-07-02T15:59:05.907
> 
> 标签：extjs, extjs3

单击节点时，我正在尝试将子节点附加到树节点。每当单击特定节点时，都需要使用所需的 url 触发树加载器。

我尝试过这样的事情

```
tree.dataUrl = '/zport/clusterSysReg?args=/directory/'+node.attributes.name;
//alert(tree.dataUrl);
node.reload(); 
```

每当我单击一个节点时，都会创建子节点，但不是使用新的 url，而是使用旧的 url，我也尝试了 node.load 而不是 node.reload()，但是我收到了一个错误...... ...

任何想法如何进行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:23:01.720

这是上述问题的解决方案（花了我一整天的时间来解决这个问题）在listner函数内部添加了以下几行

```
listeners: {
   'render': function(tp){

            tp.getSelectionModel().on('selectionchange', function(tree, node){

            tp.getLoader().dataUrl = '/zport/clusterSysReg?args='+node.attributes.name;
            tp.getLoader().load(node);
            ...................... 
            ......................
            }
} 
```

# c# - 正则表达式查找然后替换所有实例

> ID：11297157
> 
> 赞同：0
> 
> 时间：2012-07-02T15:59:30.013
> 
> 标签：c#, regex

我有一个用 Javascript 文件的脚本标签填充的字符串，我想用 .min.js 替换所有 .js 实例。我不能假设字符串的内容将采用如下所示的相同格式。所以我需要将替换限制在 src= 部分内。

我假设正则表达式最适合这个，但是我将如何进行查找，然后替换所有实例？

```
<script type=\"text/javascript\" src=\"../../Scripts/json.js\"></script><script type=\"text/javascript\" src=\"../../Scripts/Logger.js\"></script>  <script type=\"text/javascript\" src=\"../../Scripts/PageHelper.js\"></script> 
```

另一个考虑是我不想替换已经定义为 min.js 的 .min.js。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:34:02.520

免责声明：我不建议使用正则表达式进行 html 解析......
如果脚本标签引号没有被转义（它们不应该被转义），这应该可以

=======================

原始正则表达式查找

```
<script(?=\s)(?=((?:[^>"']|"[^"]*"|'[^']*')*?)(?<=\s)src\s*=(?:(?>\s*(['"])\s*((?:(?!\g{-2}).)+)(?<!\.min)\.js\s*\g{-2})|(?>(?!\s*['"])\s*([^\s>]*)(?<!\.min)\.js(?=\s|>)))((?>(?:".*?"|'.*?'|[^>]?)+)))(?>\s+(?:".*?"|'.*?'|[^>]*?)+>)(?<!/>) 
```

原始替换

```
<script$1src="$3$4.min.js"$5> 
```

修饰符 's'，单行（表示全点）

扩展正则表达式

```
 <script 
   (?=\s) 
   (?= 
       ( (?: [^>"']|"[^"]*"|'[^']*')*? ) (?<=\s)          # (1) - before 'src'
       src \s*=
       (?:
           (?> \s* (['"])  \s* ((?:(?!\g{-2}).)+ ) (?<!\.min)\.js \s* \g{-2} )   # (2,3)
         | (?> (?!\s*['"]) \s* ([^\s>]*)           (?<!\.min)\.js (?=\s|>)   )   # (4)  - use $3.$4
       )
       ( (?> (?:".*?"|'.*?'|[^>]?)+ ) )                   # (5) - after 'src'
   )
   (?> \s+ (?:".*?"|'.*?'|[^>]*?)+ 
 >
   ) (?<! /> ) 
```

或者 ...

```
 <script
     (?= \s )
     (?=
1         (
               (?: [^>"'] | " [^"]* " | ' [^']* ' )*?
1         )
          (?<= \s )
          src\s*=
          (?:
               (?>
                    \s*
2                   ( ['"] )
                    \s*
3                   (
                         (?:
                              (?! \g{-2} )
                              .
                         )+
3                   )
                    (?<! \.min )
                    \.js\s*\g{-2}
               )
            |  
               (?>
                    (?! \s* ['"] )
                    \s*
4                   ( [^\s>]* )
                    (?<! \.min )
                    \.js
                    (?= \s | > )
               )
          )
5         (
               (?>
                    (?: ".*?" | '.*?' | [^>]? )+
               )
5         )
     )
     (?>
          \s+
          (?: ".*?" | '.*?' | [^>]*? )+
          >
     )
     (?<! /> ) 
```

# actionscript-3 - 人脸识别as3

> ID：11297162
> 
> 赞同：1
> 
> 时间：2012-07-02T15:59:40.327
> 
> 标签：actionscript-3, flash, flexbuilder, face-recognition

我想构建可以检测用户眼睛颜色和头发颜色等的 Flash 应用程序' 有人知道我可以用于此类项目的免费库吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:12:28.317

shaunhusain 我认为您将人脸检测误认为是人脸识别，尽管[face-recognition-library-as3](http://code.google.com/p/face-recognition-library-as3/)两者都启用。库源文件中的注释目前为波兰语，但该库在线提供英文文档。

在回答这个线程的主要问题时，应该可以使用这个库只检测眼睛。为此，您应该将 face.zip 文件中的 HaarCascades 替换为用于检测眼睛的那些，它们是 OpenCV 的一部分。要检测头发颜色，您可以检测面部，然后用面部分析检测区域上方的像素。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:56:32.587

也许您正在寻找这个库：

[http://code.google.com/p/face-recognition-library-as3/](http://code.google.com/p/face-recognition-library-as3/)

我自己从未尝试过，但这个[演示](http://vimeo.com/13466389)看起来很有希望。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:51:24.773

这种可视化处理通常过于密集，无法在 AS3 提供的单线程和 VM 中处理，这是一项更适合编译为机器代码并具有 C 或 C++ 等线程功能的语言的任务。

这是与该主题相关的内容，我相信您最好尝试使用 OpenCV，但如果您有时间和精神能力，它还应该包含适当的算法来移植：[http://www.quasimondo。 com/archives/000687.php](http://www.quasimondo.com/archives/000687.php)

[或者，为了避免所有繁琐的工作，您可能需要考虑使用像http://face.com/](http://face.com/)这样的服务器端解决方案

# sql - oracle相交不起作用

> ID：11297163
> 
> 赞同：-1
> 
> 时间：2012-07-02T15:59:50.593
> 
> 标签：sql, oracle

在 Oracle SQL 中，为什么这段代码不能编译？Oracle 不支持相交？intersect 只取一列值？

假设两个表具有相同的列类型。

谢谢

```
select B.name, B.id from tmp_B B where B.id in (select distinct id from tmp_A);
intersect
select distinct A.name, A.id from tmp_A A; 
```

错误信息

```
Error report:
Unknown Command 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:05:45.537

您的语句中有语法错误。`SELECT`在首字母之后和 . 之前有一个额外的分号`INTERSECT`。

```
select B.name, B.id from tmp_B B where B.id in (select distinct id from tmp_A)
intersect
select distinct A.name, A.id from tmp_A A 
```

应该是一个有效的 SQL 语句，假设在两个表`ID`中`NAME`具有相同的数据类型。

# android - 哪个是在 Android 中保存信息的更好选择？

> ID：11297164
> 
> 赞同：-1
> 
> 时间：2012-07-02T15:59:54.800
> 
> 标签：android, database, sqlite, data-storage

我正在考虑在 Android 中存储信息的两种数据类型。

信息将被结构化，例如每个条目将具有（时间、日期、类型、值、评论）值，并且我正在考虑使用 SQLite 数据库。但我也认为 Shared Preference 也是一个不错的观点，因为它易于使用（用于读取和写入）并且用于将私有数据保存在键值对中。

在这种情况下哪个是更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:03:46.917

我认为这可能会帮助您入门：[SQLite 和共享首选项的优点和缺点](https://stackoverflow.com/questions/6276358/pros-and-cons-of-sqlite-and-shared-preferences)

我不想粗鲁，但在 Google 上花一些时间不会伤害任何人：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:02:37.300

这取决于您要存储的数据的“实体”是什么。如果您必须存储相对较小的“键值”数据量，那么最好的解决方案是 SharedPreferences。另一方面，如果你的信息比较复杂，如果它们之间有关系，那么你应该考虑管理一个 SQLite 数据库解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:06:51.083

`SharedPreferences`用于存储设置等。您不想使用它来大量存储数据，这似乎是您想要做的。为此使用 SQLite 数据库。

# authentication - 将 cookie 或令牌与跨域表单身份验证一起使用

> ID：11297165
> 
> 赞同：1
> 
> 时间：2012-07-02T15:59:56.343
> 
> 标签：authentication, cookies, forms-authentication

我正在尝试在 ASP.NET MVC 3 Web 服务上使用 jQuery 和表单身份验证来实现身份验证。我的想法是我将 jQuery AJAX 发布到 Web 服务，它将执行表单身份验证并返回一个 cookie 或令牌，并且对于每个数据访问调用，我的 Web 应用程序 (jQuery) 将使用该 cookie 或令牌。

**我所拥有的**——

我已经设置了对 ASP.NET Web 服务的 AJAX 调用，并且我的 Web 服务设置如下：

```
public ActionResult Login(string userName, string password, bool rememberMe, string returnUrl)
{

    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(userName, password))
        {
            return Json(FormsAuthentication.GetAuthCookie(userName, rememberMe), JsonRequestBehavior.AllowGet);

        }
        else
        {
            return Json("Authentication Failed", JsonRequestBehavior.AllowGet);
        }
    }
} 
```

这是有效的，所以如果我使用正确的凭据进行 AJAX 调用，我会返回一个 JSON 格式的 cookie，如果不是，我会返回身份验证失败的字符串。

**我不知道**的 - 收到 JSON cookie 后如何处理它。我可以将它存储在 HTML5 本地存储中，但我不知道它的哪一部分（或整个东西）与我的数据访问调用一起发回，以及如何解释它并检查 Web 服务端的 cookie。如果我不应该使用 cookie，有没有办法生成和使用某种令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:05:27.703

对于碰巧遇到的其他任何人，这是我解决它的方法：

我意识到没有必要通过 JSON 发回 cookie。通过使用`FormsAuthentication.SetAuthCookie`，设置了仅 HTTP cookie，该 cookie 会通过 AJAX 调用自动发送。这样，服务器是唯一负责 Auth cookie 的人，并且可以使用`Request.IsValidated`.

# ios - 使用 Tibar 模块在设备 IOS 上运行应用程序失败

> ID：11297169
> 
> 赞同：1
> 
> 时间：2012-07-02T16:00:24.377
> 
> 标签：ios, titanium, appcelerator, barcode-scanner

我的 tibar 有问题（条形码扫描仪[http://code.google.com/p/tibar/](http://code.google.com/p/tibar/)），当在我的 iphone 上运行时，xcode 返回错误退出 65，我概述如下：

```
** BUILD FAILED **
The following build commands failed:
Ld build/Scannn.build/Debug-iphoneos/Scannn.build/Objects-normal/armv6/Scannn normal armv6
(1 failure)
EXIT CODE WAS: 65

Exception detected in script:
Traceback (most recent call last):
  File "/Users/xxxxx/Library/Application Support/Titanium/mobilesdk/osx/2.0.1.GA2/iphone/builder.py", line 1465, in main
execute_xcode("iphoneos%s" % iphone_version,args,False)
  File "/Users/xxxxxx/Library/Application Support/Titanium/mobilesdk/osx/2.0.1.GA2/iphone/builder.py", line 1224, in execute_xcode
output = run.run(args,False,False,o)
  File "/Users/xxxxxx/Library/Application Support/Titanium/mobilesdk/osx/2.0.1.GA2/iphone/run.py", line 41, in run
sys.exit(rc)
SystemExit: 65 
```

如果我直接在 xcode 中运行应用程序，它可以正常工作。

我的配置：

*   钛 SDK：2.0.1.GA2
*   X代码：4.3.2
*   iOS：5.1.1（iphone 4s）
*   提巴尔：0.4.2

谢谢！！！

# javascript - 单击按钮时触发事件

> ID：11297170
> 
> 赞同：1
> 
> 时间：2012-07-02T16:00:27.450
> 
> 标签：javascript, jquery

在下面的小提琴中，是否可以将监听器附加到投票按钮，以便在单击投票时触发监听器，在这种情况下只是一个警报？

我尝试将 css 附加到侦听器但不工作。：

```
$('.pds-return-poll').on('click', function () {
        alert('here');
    }); 
```

[http://jsfiddle.net/Wx5mM/2/](http://jsfiddle.net/Wx5mM/2/)

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    $(".pds-pd-link").hide();
    $(".a2a_dd.pds-share").hide();
  });
</script>
<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6343621.js"></script> 
```

[新民意调查](http://polldaddy.com/poll/6343621/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:08:35.350

如果将事件直接绑定到选择器，则该元素必须在代码触发时存在。要为将来的元素委托事件，必须将事件绑定到页面中的永久资产。通过 on() 方法，您可以使用第二个参数作为目标选择器。

在触发单击处理程序代码后，您似乎正在使用脚本添加元素

```
$(document).on('click', '.pds-vote-button',function () {
        alert('here');
}); 
```

[请参阅 on() 的完整 API 文档](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T16:03:43.380

```
$('.pds-vote-button').click(function(){
    alert('clicked');
})​​​;​ 
```

这是所需的javascript。

# excel - Excel 函数作为字符串，从 VBA 调用

> ID：11297173
> 
> 赞同：0
> 
> 时间：2012-07-02T16:00:46.170
> 
> 标签：excel, vba

如果我在单元格中输入以下 excel 函数并按回车键，它可以工作：

“=T_DisplayReport(A1)”

但如果我在 VBA 中编写以下内容：

```
Sheets("Sheet1").Cells(1, 1).Formula = "=T_LoadReport(""X"",""Y"",true)"
Sheets("Sheet1").Cells(1, 1).Calculate

Sheets("Sheet1").Cells(2, 1).Formula = "=T_DisplayReport(A1)"
Sheets("Sheet1").Cells(2, 1).Calculate 
```

它不起作用。如何将单元格 A1 硬编码到上述 VBA 中，以便识别它并且该功能起作用？

编辑：A1 包含另一个获取数据并将其保存到本地缓存的函数。T_DisplayReport() 抓取单元格 A1 以显示此数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:43:24.203

根据您使用的 Excel 版本，您的 Range.Calculate 语句可能无法正确处理异步函数依赖项。
尝试删除您的第一个 Range.Calculate 并将您的最后一个 range.calculate 替换为 Sheets("Sheet1").Calculate 或 Application.Calculate

# algorithm - 将数组元素的所有标志设置为 1 所需的最小步骤数，默认情况下最初为 0

> ID：11297175
> 
> 赞同：0
> 
> 时间：2012-07-02T16:00:51.017
> 
> 标签：algorithm

> **可能重复：**
> [关于如何根据给定条件找到标记给定数组的所有元素的最小步骤数的任何提示？](https://stackoverflow.com/questions/11291517/any-hint-on-how-to-find-minimum-number-of-steps-to-mark-all-element-of-given-arr)

假设提供了一个长度为 n 的数组。此外，我们还提供了一个子序列长度为 k

即说数组是[1,2,3,5,5]........（这里n是5）并且子序列长度是3..（这意味着可以取任何长度为3的子序列）

上例中的子序列示例为 {1,2,3} 或 {2,3,5} 或 {3,5,5}

现在，此处的“步骤”定义为从数组中获取长度为 k 的任何子序列，一旦获取，您可以将子序列的最小数组元素的标志设置为 1。 解释：。假设您的数组是 {1,2,3,5,5} 即 n 是 5，并且说“k”值为 3。然后可以进行以下选择 {1,2,3}（元素“1”标志集）， {2,3,5}（元素'2'标志集），{3,5,5}元素'3'标志集，{3,5,5}元素'5'标志集。

笔记：。一旦特定元素的标志设置为 1，则不考虑特定元素来确定子序列中的最小值。

需要动态规划或最佳方法。我的代码有效，但不是最佳的。链接到我的代码：。[http://pastebin.com/LfCH79zA](http://pastebin.com/LfCH79zA)我的代码的输入格式：。[http://pastebin.com/wHqJTy0Y](http://pastebin.com/wHqJTy0Y)

递归公式

这是我的代码：。[http://pastebin.com/5QJNLEqy](http://pastebin.com/5QJNLEqy) 基本条件非常清晰，看起来也非常正确。

但我在形成递归条件形成方面面临问题

这是我的代码，其中我清楚地提到了我的递归条件，但它似乎没有给出正确的结果。

谁能告诉它错误。

我已经提到了链接：。[关于如何根据给定条件找到标记给定数组的所有元素的最小步骤数的任何提示？](https://stackoverflow.com/questions/11291517/any-hint-on-how-to-find-minimum-number-of-steps-to-mark-all-element-of-given-arr)

# asp.net-mvc - .Net MVC3 资源文件和多租户

> ID：11297176
> 
> 赞同：4
> 
> 时间：2012-07-02T16:01:01.387
> 
> 标签：asp.net-mvc, localization, embedded-resource, multi-tenant

我学到了很多东西并解决了很多关于多租户的问题。但一个问题仍然存在。我必须提供特定于租户的资源文件，因为我们的客户想要一些与其他客户略有不同的文本。有没有办法实现多租户资源管理器？我在www中没有找到任何其他内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:02:47.097

我们在 Web 表单项目中需要相同的功能，最终实现了我们自己的 IResourceProvider，在[http://msdn.microsoft.com/en-us/library/aa905797.aspx](http://msdn.microsoft.com/en-us/library/aa905797.aspx)中找到了灵感。这样我们就可以拥有像 Def​​ault.aspx.rex、Default.aspx.da-DK.resx 和 Default.aspx.da-DK.xyz.resx 这样的文件，其中 xyz 是客户名称。这工作得很好。采用这种方式似乎意味着使用 App_LocalResources 和 App_GlobalResources 文件夹。

但是，这些文件夹不是 MVC 使用资源的方式，会导致问题。例如，它们无法在单元测试中正常工作。作为最后的手段，您可能会发现它很有用。

# google-maps-api-3 - 谷歌地图仅在多边形中搜索

> ID：11297177
> 
> 赞同：3
> 
> 时间：2012-07-02T16:01:04.087
> 
> 标签：google-maps-api-3, polygon, google-places-api

我正在制作一个在给定社区内搜索的谷歌地图（API v3）。邻域不是正方形，而是大量不同的点来构成多边形边界框。我知道如何制作多边形，但不确定如何让它只在多边形内搜索。您可以在下面看到我使用的是中心位置的半径，但我不需要半径，而只需要给定的位置。

```
var request = {
  location: centerLatlng,
  radius: 800,
  types: ["school", "church", "park", "university"]
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:47:46.370

我猜这是一个地方 API 请求？ [https://developers.google.com/maps/documentation/javascript/places](https://developers.google.com/maps/documentation/javascript/places)

API 不支持传入 artbitary 多边形。如果您真的需要这样搜索，则只需进行圆形搜索（如您的示例中所示） - 然后丢弃不符合您形状的结果。

不要认为 Maps API 本身有“边多边形中的点”测试，但可以在线找到代码 [https://www.google.com/search?q=point+in+polygon](https://www.google.com/search?q=point+in+polygon)

# css - 将自定义样式表应用于 QWebView

> ID：11297181
> 
> 赞同：3
> 
> 时间：2012-07-02T16:01:33.823
> 
> 标签：css, qt, qwebview

我的 Qt 应用程序在小部件中加载外部 html 页面`QWebView`。如何定义自己的样式表来呈现页面的内容？是否可以捆绑一个`.css`文件供 QWebView 提取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:34:14.613

您可以使用以下设置加载它`QWebView`：

```
QWebView myView;
QWebSettings * settings = myView->settings();
QUrl myCssFileURL;
settings->setUserStyleSheetUrl(myCssFileURL); 
```

# email - 如何获取发件人的电子邮件地址

> ID：11297182
> 
> 赞同：2
> 
> 时间：2012-07-02T16:01:37.513
> 
> 标签：email, google-apps-script, sender

我需要生成一个关于邮件列表和发件人的报告，我可以提取信件的主题，但不明白如何获取每封信的发件人地址，报告结果是：

主题：你好来自：frank@gmail.com

主题：你的购物篮来自：jerry@facebook.com

```
 function myFunction() {
      var emailAddress = Session.getActiveUser().getEmail();
      var threads = GmailApp.getInboxThreads();

      var output = ContentService.createTextOutput();
      for (var i = 0; i < threads.length; i++) {
        output.append(threads[i].getFirstMessageSubject()+" from:"+'\n');
      }

      GmailApp.sendEmail(emailAddress,"Mail Report", output.getContent()

        );
    } 
```

**更新**

谢谢你的回答，解决方法很简单

```
 function myFunction() {
      var emailAddress = "example@email.com" ;
      var threads = GmailApp.getInboxThreads();

      var messages = threads[0].getMessages();
      var senderEmail = messages[0].getFrom();

      var output = ContentService.createTextOutput();
      for (var i = 0; i < threads.length; i++) {
        messages = threads[i].getMessages()
        senderEmail = messages[0].getFrom();
        output.append(i + ".  " + threads[i].getFirstMessageSubject()+"   from:"+ senderEmail + '\n');
      }

      GmailApp.sendEmail(emailAddress,"Mail Report", output.getContent()

        );
    } 
```

示例结果：

1.  电子邮件验证 - 堆栈溢出来自：堆栈溢出
2.  项目更新 #10：Double Fine 和 2 人制作的 Double Fine Adventure 来自：Kickstarter

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:13:56.350

如果我了解您要做什么，那么我相信您可以从线程中获取消息，然后从消息中获取发件人

```
var threads = GmailApp.getInboxThreads();
var messages = threads[0].getMessages();
var senderEmail = messages[0].getFrom(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T15:39:57.320

```
var label = GmailApp.getUserLabelByName('inbox');
var threads = label.getThreads();

for(i in threads)
{

  threads[i].getMessages()[0].getFrom()

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-10T12:24:19.693

您需要在 oauthScopes 中添加“ [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email) ”。（appscript.json 文件）

您可以在此链接中获取更多详细信息 在 [此处输入链接描述](https://developers.google.com/gmail/add-ons/concepts/scopes#gmail_add-on_scopes)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-02T16:12:26.430

`Session.getActiveUser().getEmail()`出于安全原因，如果您使用的是消费者 Google 帐户，则无法使用该电子邮件。仅当脚本归 Google Apps 用户所有且访问者属于同一域时，它才有效。

但是，您可以尝试[这里提到的内容](https://stackoverflow.com/questions/11063749/how-do-i-get-an-access-token-using-urlfetchapp-with-gas)

# cuda - GPU 上的连续内存分配

> ID：11297184
> 
> 赞同：0
> 
> 时间：2012-07-02T16:01:46.403
> 
> 标签：cuda, gpu

cudaMalloc 是否分配连续的内存块（即彼此相邻的物理字节）？

我有一段 CUDA 代码，它使用 32 个线程简单地将 128 个字节从全局设备内存复制到共享内存。我试图找到一种方法来保证可以在一个 128 个字节的内存事务中完成此传输。如果 cudaMalloc 分配连续的内存块，那么它可以很容易地完成。

以下是代码：

```
#include <iostream>

using namespace std;
#define SIZE 32 //SIZE of the array to store in shared memory                                                                                                                        
#define NUMTHREADS 32
__global__ void copy(uint* memPointer){

  extern __shared__ uint bits[];
  int tid = threadIdx.x;

  bits[tid] = memPointer[tid];

}

int main(){
  uint inputData[SIZE];
  uint* storedData;
  for(int  i=0;i<SIZE;i++){
    inputData[i] = i;
  }
  cudaError_t e1=cudaMalloc((void**) &storedData, sizeof(uint)*SIZE);
  if(e1 == cudaSuccess){
    cudaError_t e3= cudaMemcpy(storedData, inputData, sizeof(uint)*SIZE, cudaMemcpyHostToDevice);
      if(e3==cudaSuccess){
        copy<<<1,NUMTHREADS, SIZE*4>>>(storedData);
            cudaError_t e6 = cudaFree(storedData);
            if(e6==cudaSuccess){
            }
            else{
              cout << "Error freeing memory storedData" << e6 << endl;
            }
      }
      else{
        cout << "Failed to copy" << " " << e3 << endl;
      }

  }
  else{
    cout << "Failed to allocate memory" << " " << e1 << endl;

  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:11:19.917

是的，cudaMalloc 分配连续的内存块。SDK (http://developer.nvidia.com/cuda-cc-sdk-code-samples) 中的“Matrix Transpose”示例有一个名为“copySharedMem”的内核，它几乎完全符合您的描述。

# android - 从 AsycTask 更新 UIElement

> ID：11297185
> 
> 赞同：0
> 
> 时间：2012-07-02T16:01:47.783
> 
> 标签：android, uielement

我想更新文本视图，来自 AsycTask 的微调器。实际上我在做什么

我从服务器获取数据并以 json 形式返回结果，然后我解析 JSON 并将数据填充到两个 Spinner 和一个 textview 中。当我使用 Asyctask 时如何更新数据，因为 Textview 不更新..这是我的代码

```
TAG_CONFIG = "xyz"
TAG_CONFIG1 = "yyy"
JSONParser jParser = null;
JSONObject json = null;
jParser = new JSONParser();
json = jParser.getJSONFromUrl(url);

try {
    // Getting Array of Contacts
    contacts = json.getJSONArray(TAG_CONFIG);
    for (int i = 0; i < contacts.length(); i++) {
        JSONArray c = contacts.getJSONArray(i);
        CompanyName = new String[c.length()];
        for (int j = 0; j < c.length(); j++) {
            CompanyName[j] = c.getString(j);
        }

    } 
```

tab_confg1 类似...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:04:22.840

`doInBackground`未与主 UI 线程同步...因此，您无法通过此方法直接更新您的 UI（您必须使用`Handler`or`mContext.runOnUiThread()`代替）。但是，您可以从 更新您的 UI `onPostExecute`，因为此方法是在 UI 线程上执行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:29:06.100

尝试这个...

**1.**每当我们在 Android 中**启动**应用程序时，我们都会**从 Dedicated UI Thread 开始**。

**2\. 任何线程的创建都会****从 UI 线程中**删除一个。

**3.保持UI工作在UI线程中，Non-UI工作在Non-UI线程是可取的，但****随着HoneyComb Android版本的发布，**它继续成为规则。

 ****4.**虽然**非 UI 线程可用于使用处理程序将工作从它发布到 UI 线程，但 Android 提供了 AsyncTask，它有助于将非 UI 线程上完成的工作同步回 UI 线程**

在**异步任务<>**

---> **doInBackground()** 将处理非 UI 工作。

---> **PostExectue()**将帮助将非 UI 工作发布回 UI 线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:11:27.117

使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html)从`doInBackground`.

```
@Override
protected String doInBackground(Void... params) {
    Activity_Name.this.runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    // your code here to access UI elements

                }
            });
  return "string";
} 
```**

# c - 在 Gtk 中，每个树视图行是否可以有一个单元格渲染器？

> ID：11297187
> 
> 赞同：5
> 
> 时间：2012-07-02T16:02:05.670
> 
> 标签：c, gtk

在 Gtk+ 中，每列可以有多个单元格渲染器，但是我希望在不同的行中有不同的单元格渲染器。例如，我想在树视图中列出对象的属性。对于布尔属性，使用切换按钮比编辑`GtkCellRendererText`并输入`TRUE`or更简单`FALSE`。

我知道我可以通过设置回调来对行数据做出反应`gtk_tree_view_column_set_cell_data_func()`。但是在回调中，单元格渲染器已经固定，我只能改变它的外观。

**编辑：** ptomato 指出了如何在 Vala 中完成。我获取了这些信息并构建了一个基于 C 的单元格渲染器，该渲染器采用 GObject 和列表存储（假设第一列包含属性名称）来根据属性的类型显示自定义单元格。我还对一个树视图小部件进行了子类化，它结合了它以便于使用。这两个组件都可以在[Github](https://github.com/matze/EggPropertyTreeView)上找到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T05:55:44.550

它是[如何`dconf-editor`做到](https://git.gnome.org/browse/dconf/tree/editor/dconf-view.vala?id=00926de87b14fd00a1002daedb28b636c2b8b8d1)的：`GtkCellRenderer`创建自定义渲染器的子类，根据需要创建一个名为`renderer`返回 a `GtkCellRendererText`,`GtkCellRendererToggle`等的属性，并覆盖所有`GtkCellRenderer`信号，如`get_size`, `render`,`activate`等以将它们传递给底层的`renderer`.

它是在 Vala 中完成的，但转换为 C 应该不会太难。

# javascript - 如何在 asp.net 中使用外部 javascript 文件

> ID：11297189
> 
> 赞同：1
> 
> 时间：2012-07-02T16:02:17.610
> 
> 标签：javascript, asp.net

我编写了一个脚本来隐藏和显示我的 asp.net Web 应用程序的加载程序。该脚本在内联放置时效果很好。我试图将脚本提取到外部文件并收到以下错误：

**错误：**属性“Pausing”的值为 null 或未定义，而不是 Function 对象

我试图查找错误，但我无法找到问题的解决方案。我是 asp.net 的新手，所以我可能不确定如何搜索正确的问题。

我的有效内联代码是：

```
<script type="text/javascript">

    function Pausing() {
        window.setTimeout(ShowLoader, 1);
    }

    function ShowLoader() {
        if ((typeof Page_IsValid === 'undefined') || 
            (Page_IsValid != null && Page_IsValid)) {
            var i = document.getElementById("loader");
            var img = document.getElementById("img");
            i.style.display = "block";
            setTimeout("document.images['img'].src=document.images['img'].src", 10);
            Endpausing();
        }
    }

    function HideLoader() {
        var i = document.getElementById("loader");
        i.style.display = "none";
    }

    function Endpausing() {
        window.setTimeout(HideLoader, 4000);
    }
</script> 
```

事件调用附加到下面的 asp:button 控件：

```
<asp:Button ID="btnGetReport" runat="server" OnClick="btnGetReport_Click" OnClientClick="Pausing();" /> 
```

我删除了内联脚本并替换为...

```
<script type="text/javascript" src="../../Scripts/Loader.js"></script> 
```

将脚本添加到外部文件：

```
window.onload = initAll;

function initAll() {

    function Pausing() {
        window.setTimeout(ShowLoader, 1);
    }

    function ShowLoader() {
        if ((typeof Page_IsValid === 'undefined') ||      // asp page has no validator
                (Page_IsValid != null && Page_IsValid)) {
            var i = document.getElementById("loader");
            var img = document.getElementById("img");
            i.style.display = "block";
            setTimeout("document.images['img'].src=document.images['img'].src", 10);
            Endpausing();
        }
    }

    function HideLoader() {
        var i = document.getElementById("loader");
        i.style.display = "none";
    }

    function Endpausing() {
        window.setTimeout(HideLoader, 4000);
    }
} 
```

然后我收到前面提到的错误。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:14:03.153

始终使用 ResolveUrl 像这样调用您的脚本文件

假设您的脚本位于根路径的 Script 文件夹中，文件名为 MyScriptFile.js

```
 <script type="text/javascript" src="<%= ResolveUrl ("~/Scripts/MyScriptFile.js") %>"></script> 
```

编辑：您可以根据需要使用 ResolveUrl 或 ResolveClientUrl

ResolveUrl 创建相对于根的 URL，而 ResolveClientUrl 创建相对于当前页面的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:07:24.253

根据您的问题：如何在 asp.net 中使用外部 javascript 文件

```
<script type="text/javascript" src="http://www.xyz.com/test.js"></script> 
```

# c# - 在 MVC3 中引用会话/全局用户变量的正确方法

> ID：11297190
> 
> 赞同：0
> 
> 时间：2012-07-02T16:02:18.873
> 
> 标签：c#, asp.net-mvc-3

所以我有一个在第一次用户登录期间设置的 Session 变量

```
Session["ClientID"] 
```

基本上这用于主题化（因此 ClientID 将主题/品牌设置为出现在网站上）。查看应用的代码

```
(Guid)Session["ClientID"] 
```

到处都是看起来很脏而且容易出错，这是让变量全局识别的最佳设计模式。所以我可以

```
this.CurrentClientID 
```

或所有 MVC 页面上的类似内容。理论上，我可以`Controller`使用提供此 ID 的自定义类重载该类，但我不确定如何将其公开给视图。

任何指向最佳解决方案的指针将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:04:37.063

不知道您的全局意思是什么，但是`ControllerBase`该类的扩展方法将使其在您的所有控制器中都可以访问：

```
public static class ControllerExtensions
{
    public static Guid GetCurrentClientID(this ControllerBase controller)
    {
        return (Guid)controller.ControllerContext.HttpContext.Session["ClientID"];
    }
} 
```

现在在每个控制器中，您可以访问它：

```
public ActionResult Foo()
{
    Guid id = this.GetCurrentClientID();
    ...
} 
```

如果您希望它更加全局可用，请将其作为 HttpContextBase 类的扩展方法：

```
public static class ControllerExtensions
{
    public static Guid GetCurrentClientID(this HttpContextBase context)
    {
        return (Guid)context.Session["ClientID"];
    }
} 
```

现在，您可以在任何地方访问 HttpContext（在 ASP.NET 应用程序中几乎无处不在），您只需使用扩展方法。例如在视图中：

```
@Html.ActionLink("foo link", "foo", new { clientid = Context.GetCurrentClientID() }) 
```

# arrays - 字符串到字节数组和字节数组到文件

> ID：11297196
> 
> 赞同：0
> 
> 时间：2012-07-02T16:02:38.373
> 
> 标签：arrays, string, delphi, file, binary

我需要在 Delphi 2006 中实现一个在 .net 中工作的算法

基本上我需要执行以下步骤：

1.  创建 XML 并验证 XSD
2.  将 XML 字符串序列化为 UTF-8 编码的字节数组并用 zip 压缩
3.  压缩后的信息必须再次使用 base256 格式存储到字节数组中
4.  使用 Datamatrix 2D BarCode 从此字节数组创建图像并将此图像放在报告上

对于第 1 步，我使用运行正常的 NativeXML 库创建 XML。在这个库中存在一个方法 SaveToBinaryFile 但不能正常工作。在我的测试中，我使用这个函数来创建一个二进制文件。我被迫使用二进制文件，因为我的 Zip 组件只能处理没有字符串或内存中的字节数组的文件。

我用 Zip 组件压缩了这个二进制文件，并将这个压缩文件加载到一个 blob 文件中。当我需要创建 DataMatrix 图像时，我将此 blob 文件加载到 ansistring 中并创建图像。

经过多次测试后，我发现我的错误在于我将 XML 保存到二进制文件中。现在我需要找到另一种方法将我的 xml (utf-8) 字符串保存到二进制文件中。请原谅我的英语。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:10:13.697

```
 procedure CreateXMLBarcodeș
    var
     BinarySize: Integer;
     InputString: utf8string;
     StringAsBytes: array of Byte;
     F : FIle of Byte;
     pTemp : Pointer;

    begin
     InputString := '';
     ADoc := TNativeXml.CreateName(rootName);
     try
       ... //create the XML
       InputString := ADoc.WriteToLocalString; //utf8string
       if InputString > '' then begin
          //serialize the XML string to array of bytes
          BinarySize := (Length(InputString) + 1) * SizeOf(Char);
          SetLength(StringAsBytes, BinarySize);
          Move(InputString[1], StringAsBytes[0], BinarySize);
          //save the array of bytes to file
          AssignFile( F, xmlFilename );
          Rewrite(F);
          try
           BinarySize := Length( StringAsBytes );
           pTemp := @StringAsBytes[0];
           BlockWrite(F, pTemp^, BinarySize );
          finally
           CloseFile( F );
          end;
       end;
       finally
        ADoc.Free;
       end;
     end

    ...
    //in other procedure:
         DataSet1XMLBarCode.LoadFromFile(CreateXMLBarcode);
    ...

    //when I want to create the report
    //create the DataMatrix image
    procedure xyz(Sender: TfrxReportComponent);
    var  AWidth, AHeight: Integer;
     function GetStringFromBlob: AnsiString;
     var BlobStream: TStream;
     begin
      Result := '';
      DataSet.Open;
      BlobStream := DataSet1.
                       CreateBlobStream(DataSet1XMLBarCode, bmRead);
      try
       SetLength(Result, BlobStream.Size);
       BlobStream.Position := 0;
       BlobStream.Read(Result[1], BlobStream.Size);
      finally
       BlobStream.Free;
      end;
      DataSet.Close;
     end;
    begin
     Barcode2D_DataMatrixEcc2001.Locked := True;
     Barcode2D_DataMatrixEcc2001.Barcode := GetStringFromBlob;
     Barcode2D_DataMatrixEcc2001.Module := 1;
     Barcode2D_DataMatrixEcc2001.DrawToSize(AWidth, AHeight);
     with TfrxPictureView(frxReport1.FindObject('Picture1')).Picture.Bitmap do
     begin
      Width := AWidth;
      Height := AHeight;
      Barcode2D_DataMatrixEcc2001.DrawTo(Canvas, 0, 0);
     end;
     Barcode2D_DataMatrixEcc2001.Locked := False;
    end;

    //the code was 'çopied'and adapted from the internet 
```

# java - JSONObject.append 到对象中 - 结果是嵌套数组？

> ID：11297200
> 
> 赞同：2
> 
> 时间：2012-07-02T16:02:50.140
> 
> 标签：java, json

以下代码为包含三个项目的键生成一个嵌套数组：

```
import org.codehaus.jettison.json.JSONObject;
// ...

JSONObject ret = new JSONObject();
for (Key key:keys) ret.append("blocked",key.id()); 
```

结果是：

```
{"blocked": [[["1"],"2"],"3"]} 
```

这是预期的吗？如果是，我如何构造一个逐项添加的普通数组？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T16:20:46.643

您需要创建一个`JSONArray`对象：

```
JSONObject ret = new JSONObject();
JSONArray arr = new JSONArray();
arr.put("1");
arr.put("2");
arr.put("3");
ret.put("blocked", arr); 
```

结果是：

```
{"blocked":["1","2","3"]} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T07:50:59.097

这很奇怪，因为[API 说明了以下内容](http://jettison.codehaus.org/apidocs/org/codehaus/jettison/json/JSONObject.html#append%28java.lang.String,%20java.lang.Object%29)：

> 将值附加到键下的数组中。如果 中不存在该 `JSONObject`键，则将该键放入 中`JSONObject`，其值为 `JSONArray`包含 value 参数的 a。如果键已与 a 关联`JSONArray`，则将 value 参数附加到它。

但它不能正常工作。当我做：

```
JSONObject o = new JSONObject();
o.append("arr", "123");
o.append("arr", "456"); 
```

我得到一个异常说“ `JSONObject[arr] is not a JSONArray`”。看起来有一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-19T14:57:25.680

我遇到了类似的问题。你应该使用**put**方法；不是**附加**方法。当然，您应该创建一个 JSONArray 并将其用作**put**方法的第二个参数。

# windows-phone-7 - BackgroundAgent 试图更新我的 AdControl？

> ID：11297201
> 
> 赞同：0
> 
> 时间：2012-07-02T16:02:50.507
> 
> 标签：windows-phone-7, background-agent

我尝试运行 Marketplace 测试工具包，但它在能力验证中失败，Microsoft.Advertising.Mobile.dll 试图进行一系列调用。这是可以理解的，但我绝不会尝试从 BackgroundAgent 更新 AdControl。我能想到的最接近的事情是：

```
 public ScheduledAgent()
    {
        if (!_classInitialized)
        {
            _classInitialized = true;
            // Subscribe to the managed exception handler
            Deployment.Current.Dispatcher.BeginInvoke(delegate
            {
                Application.Current.UnhandledException += ScheduledAgent_UnhandledException;
            });
        }
    } 
```

Application.Current 调用是试图参与广告控制吗？如果是这样，我该如何防止它这样做？

编辑：这是错误消息之一的输出：

```
 Unsupported API cannot be used by a background agent. Assembly Microsoft.Advertising.Mobile.dll was trying to use Microsoft.Phone.Tasks.PhoneCallTask::.ctor. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:29:39.240

好的，它根本与代码示例无关。问题是我正在通过我创建的 Windows Phone 库生成我的广告控件。后台代理正在使用该库的模型，这显然使测试套件相信该应用程序以某种方式使用了广告逻辑。

我删除了 Ads.cs 并将它正在做的事情迁移到页面本身，这解决了问题。

编辑：我认为说它不是市场测试工具包认为后台代理正在使用 AdControl 的库更安全，而是它有能力这样做。我认为这值得区分。

# java - SVN 提交日志问题

> ID：11297205
> 
> 赞同：1
> 
> 时间：2012-07-02T16:03:09.930
> 
> 标签：java, eclipse, svn, logging, svnkit

我目前正在做一个关于计算的项目。我已经完成了我项目的主要部分，还将SVN Commit功能集成到我的代码中（使用.ini文件读取具体地址等）

我可以轻松地提交文件，我正在尝试将实时日志实现到我的控制台。有没有办法将日志实现到控制台？不是一般日志，而是应该是实时的提交日志。

*   我正在使用 eclipse for mac，我听说过 SVNKit，但我对 SVN 真的很差。

提前感谢您提供任何信息

- - 编辑 - -

这是从 .ini 文件中读取 svn 命令的代码

```
public static String iniSVNOkut(String deger, String getObje, String fetchObje){

        Ini uzantilariAlIni = null;

        try 
        {
            String uzantiAyarlari = "Uzantilar.ini";    

            try 
            {
                uzantilariAlIni = new Ini(new FileReader(uzantiAyarlari));
            }
            catch (InvalidFileFormatException e)
            {
                System.err.print("Hata InvalidFileFormat : " + e.getMessage() + "\n" );
                e.printStackTrace();
            }
            catch(FileNotFoundException e)
            {
                System.err.print("Hata FileNotFoundException : " + e.getMessage() + "\n" );
                e.printStackTrace();
            }
            catch (IOException e)
            {
                System.err.print("Hata IOException : " + e.getMessage() + "\n" );
                e.printStackTrace();
            }
        return  deger = uzantilariAlIni.get(getObje).fetch(fetchObje);

        } 
        finally 
        {

        }

    } 
```

这就是 .ini 包含的内容

```
[svnAdresi]
svnAdresiniAl = svn co http://svn.svnkit.com/repos/svnkit/trunk/ /Users/sample/Documents/workspace/SatirHesaplaGUI/svnTestMAC 
```

这就是我所说的

```
String svnAdresi;
        svnAdresi = IniFonksiyon.iniSVNOkut(svnAdresi, "svnAdresi", "svnAdresiniAl");
    Runtime cmdCalistir = Runtime.getRuntime();

    try
    {
        Process islem = cmdCalistir.exec(svnAdresi);
    }
    catch (Exception e)
    {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:37:37.717

如果我正确理解您的问题，您希望将 Subversion 提交日志读入您的控制台应用程序。

最简单的方法是使用[SVNKit](http://svnkit.com/)。

这就是我的做法。

```
private static List<SVNLogEntry> logEntryList;

    /*
     * Gets the Subversion log records for the directory
     */
    LogHandler handler = new LogHandler();
    String[] paths = { directory };
    try {
        repository.log(paths, latestRevision, 1L, false, true, handler);
    } catch (SVNException svne) {
        if (svne.getMessage().contains("not found")) {
            logEntryList = new ArrayList<SVNLogEntry>();
        } else {
            CobolSupportLog.logError(
                    "Error while fetching the repository history: "
                            + svne.getMessage(), svne);
            return false;
        }
    }

    logEntryList = handler.getLogEntries(); 
```

*   directory - 指向特定目录或模块的字符串
*   latestRevision - 来自 Subversion 的最大修订号。在 log 方法调用中放置 latestRevision 第二个以最近的顺序返回日志记录。

如果您希望日志记录按从 1 到 latestRevision 的顺序排列，则 1L 将排在第二位，latestRevision 将排在第三位。

*   存储库 - 您已经过身份验证的 Subversion 存储库。

这是日志处理程序。

```
public class LogHandler implements ISVNLogEntryHandler {

    protected static final int REVISION_LIMIT = 5;

    protected List<SVNLogEntry> logEntryList;

    public LogHandler() {
        logEntryList = new ArrayList<SVNLogEntry>();
    }

    public void handleLogEntry(SVNLogEntry logEntry) throws SVNException {
        logEntryList.add(logEntry); 
    }

    public List<SVNLogEntry> getLogEntries() {
        if (logEntryList.size() <= REVISION_LIMIT) {
            return logEntryList;
        } else {
            return logEntryList.subList(0, REVISION_LIMIT);
        }
    }

} 
```

# mysql - 从 mysql 表中只返回列名值

> ID：11297207
> 
> 赞同：1
> 
> 时间：2012-07-02T16:03:12.637
> 
> 标签：mysql

抱歉，但我不知道如何在句子中解释这个问题……实际上，当我执行 mysql_fetch_array 时，我有这样的代码……

```
 [0] => 10
        [id] => 10
        [1] => 58393
        [iid] => 58393
        [2] => 0
        [ilocationid] => 0
        [3] => 38389
        [iapptid] => 38389
        [4] => 2012-06-30T00:00:00
        [ddate] => 2012-06-30T00:00:00
        [5] => 1000
        [ctimeofday] => 1000 
```

但我想返回这样的东西

```
 [id] => 10
    [iid] => 58393
    [ilocationid] => 0
    [iapptid] => 38389
    [ddate] => 2012-06-30T00:00:00
    [ctimeofday] => 1000 
```

我的意思是没有列的数字代表。我该怎么做...请帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:06:11.230

[`mysql_fetch_array()`](http://php.net/manual/en/function.mysql-fetch-array.php)如PHP函数手册中所述：

> 返回数组的类型取决于如何***`result_type`***定义。通过使用**`MYSQL_BOTH`**（默认），您将获得一个包含关联索引和数字索引的数组。使用**`MYSQL_ASSOC`**，您只能获得关联索引（按[`mysql_fetch_assoc()`](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)工作），使用**`MYSQL_NUM`**，您只能获得数字索引（按[`mysql_fetch_row()`](http://www.php.net/manual/en/function.mysql-fetch-row.php)工作）。

因此，您想要：

```
mysql_fetch_array($result, MYSQL_ASSOC); 
```

或者

```
mysql_fetch_assoc($result); 
```

但请注意警告：

> 不鼓励使用此扩展程序。相反，应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://www.php.net/manual/en/ref.pdo-mysql.php)另请参阅[MySQL：选择 API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)指南和[相关的常见问题解答](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)以获取更多信息。此功能的替代方案包括：
> 
> *   [`mysqli_fetch_array()`](http://www.php.net/manual/en/mysqli-result.fetch-array.php)
> *   [`PDOStatement::fetch()`](http://www.php.net/manual/en/pdostatement.fetch.php)

# android - 方向改变后，片段的选项菜单不会消失

> ID：11297210
> 
> 赞同：4
> 
> 时间：2012-07-02T16:03:20.023
> 
> 标签：android, screen-orientation

我根据本教程实现了我的布局：[http ://android-developers.blogspot.hu/2011/02/android-30-fragments-api.html](http://android-developers.blogspot.hu/2011/02/android-30-fragments-api.html)

区别在于：

*   根据左侧列表中的选择，我有不同的片段要显示
*   “细节片段”（右边的那些）有不同的选项菜单

我的问题是，如果我已经从左侧选择了一些东西，然后将手机旋转到纵向，最后一个选项菜单仍然存在并且可见。

我认为问题来自于在方向更改后重新创建的最后一个活动“详细信息”片段。为了测试它，我创建了这两种方法：

```
@Override
public void onStart() {
    super.onStart();
    setHasOptionsMenu(true);
}

@Override
public void onStop() {
    super.onStop();
    setHasOptionsMenu(false);
} 
```

我正在展示这样的正确片段：

```
case R.id.prefs_medicines:
        if (mDualPane) {

            // Check what fragment is shown, replace if needed.
            View prefsFrame = getActivity().findViewById(R.id.preferences);
            if (prefsFrame != null) {
                // Make new fragment to show this selection.
                MedicineListF prefF = new MedicineListF();

                // Execute a transaction, replacing any existing
                // fragment with this one inside the frame.
                FragmentTransaction ft = getFragmentManager().beginTransaction();
                ft.replace(R.id.preferences, prefF);
                ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                ft.commit();
            }

        } else {
            // Otherwise we need to launch a new activity to display
            // the dialog fragment with selected text.
            Intent intent = new Intent();
            intent.setClass(getActivity(), MedicinePrefsActivity.class);
            startActivity(intent);
        }
        break; 
```

在我的“详细信息”片段之一中。当我调试它时，在旋转后调用了 onstart。

图片中的问题：

1：横向模式没关系 [横向模式 http://img834.imageshack.us/img834/8918/error1d.png](http://img834.imageshack.us/img834/8918/error1d.png)

2：纵向：不需要选项菜单 [纵向模式 http://img860.imageshack.us/img860/8636/error2r.png](http://img860.imageshack.us/img860/8636/error2r.png)

**如何摆脱纵向模式下的选项菜单？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T11:17:59.507

我遇到了同样的问题，只有当 savedInstanceState 为空时，才通过在片段中设置 setHasOptionsMenu(true) 来解决它。如果 onCreate 得到一个包，那么片段将在方向更改为纵向时恢复，因此不要显示菜单。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if(savedInstanceState == null) {
        setHasOptionsMenu(true);
    }
} 
```

# ruby - Ruby 以一种方法获取和设置

> ID：11297215
> 
> 赞同：4
> 
> 时间：2012-07-02T16:03:31.020
> 
> 标签：ruby, getter-setter

我想知道 Ruby 中创建自定义 setter 和 getter 方法的规范方法是什么。通常，我会这样做，`attr_accessor`但我是在创建 DSL 的上下文中。在 DSL 中，setter 是这样调用的（使用`=`符号将创建局部变量）：

```
work do
 duration 15
 priority 5
end 
```

因此，它们必须像这样实现：

```
def duration(dur)
 @duration = dur
end 
```

然而，这使得实现 getter 有点棘手：创建一个具有相同名称但没有参数的方法只会覆盖 setter。

所以我编写了自定义方法来进行设置和获取：

```
def duration(dur=nil)
 return @duration = dur if dur
 return @duration if @duration
 raise AttributeNotDefinedException, "Attribute '#{__method__}' hasn't been set"
end 
```

这是一个很好的方法吗？这是测试用例的要点：

[Ruby 自定义 Getter 和 Setter](https://gist.github.com/3033911)

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T16:20:52.580

更棘手的情况是，如果您想将持续时间设置为零。我可以想到两种方法

```
def duration(*args)
  @duration = args.first unless args.empty?
  @duration
end 
```

允许人们传递任意数量的参数并根据数量决定做什么。如果传递了多个参数，您也可以引发异常。

另一种方法是

```
def duration(value = (getter=true;nil))
  @duration = value unless getter
  @duration
end 
```

这稍微利用了默认参数：它们几乎可以是任何表达式。

当不带参数调用时`getter`设置为 true，但是当提供参数时（即使它是 nil），默认值不会被计算。由于局部变量作用域的工作`getter`方式最终为零。

可能有点*太*聪明了，但方法体本身更干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:21:17.353

对于这样的事情，我更喜欢将底层类与 DSL 分开。也就是说，创建一个具有常用访问器的 Work 类，`duration`并且`duration=`. 要通过 DSL 使用该类，请使用可以根据情况调用访问器的东西来包装工作实例，如下所示：

```
class AccessorMultiplexer

  def initialize(target)
    @target = target
  end

  def method_missing(method, *args)
    method = "#{method}=" unless args.empty?
    @target.send method, *args
  end

end 
```

无论您想通过 DSL 在何处使用您的 Work 类，都可以使用`AccessorMultiplexer.new(work)`.

如果您反对在包装器中进行元编程，您总是可以制作一个特定的 WorkDSL 包装器，它可以在不使用`method_missing`. 但它会保持分离并防止您的 Work 类被 DSL 语法的怪癖污染。您可能希望在代码中的其他地方使用 Work 类，而 DSL 会妨碍您。在 rake 或脚本中，或者——谁知道呢。

（改编自我对[codereview](https://codereview.stackexchange.com/questions/9023/method-naming-and-violating-single-responsibility/9045#9045)的回答。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:13:25.180

这对我来说似乎很好，尽管如果尚未设置值，您会引发错误似乎很奇怪。这是我通常会做的：

```
def duration(dur=nil)
 @duration = dur if dur
 @duration
end 
```

然而，这是一种简单的方法，因为这意味着您不能`@duration`只`nil`使用这种方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T13:57:20.037

我通常这样做

```
def duration dur='UNDEFINED'
  @duration = dur if dur != 'UNDEFINED'
  @duration
end 
```

你可以用你最喜欢的东西代替 UNDEFINED

# wordpress - 为什么我不能在类对象中添加 register_post_type 或分类法？

> ID：11297216
> 
> 赞同：1
> 
> 时间：2012-07-02T16:03:34.443
> 
> 标签：wordpress

这是代码：

```
<?php  

// (wp_plugin_dir/My_plugin/index.php) 
class interface{
    __construct(){
    $this->get_commerce();
    }

}

$interface = new interface();

// (wp_plugin_dir/My_plugin/commerce/commerce.php) 

    class commerce{
        __construct(){
            $this->register_post_types();
        }

        function register_post_types(){
            $args = array( 'public' => true, 'label' => 'Books' );
            register_post_type( 'book', $args );
        }
    }

}
?> 
```

由于某种原因它没有注册帖子类型？但是当我将相同的 register_post_type 函数放入 index.php 时，它工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:53:04.267

您可能正在尝试在初始化之前运行寄存器。只需将您的类的该方法挂钩到 init 挂钩（或在它之后运行的任何东西，例如 theme_setup），您就可以开始了。

# javascript - 如何在函数内部传递参数？

> ID：11297218
> 
> 赞同：1
> 
> 时间：2012-07-02T16:03:36.700
> 
> 标签：javascript, jquery

我开始学习 Jquery，但在理解函数参数时遇到了麻烦：（如果您查看我的**第一个**代码并运行它：我的脚本**将起作用** *（没有参数）*。如果您查看我的**第二个**代码
*（有参数）*并运行它：**第二个脚本也可以** *工作！！*

我的第一个问题：我是否在第二个脚本中正确**设置**了参数**？**
第二个问题：我如何**检查**我的参数***设置***或是否 ***正确传递***给我的函数？
PS 抱歉，我很抱歉，**谢谢！**

```
 //First code (WITHOUT PARAMETERS!!!) 
   $(document).ready(function () {
       var addclass = $('p:first');

       function AddClass() {
           addclass.addClass('first');
           if (addclass.is($('.first'))) {
               alert('here');
           }
           else {
               alert('not here');
           }
       }
       $('.button').click(function () {
           AddClass(addclass);
       });
   });
   //Second code (WITH PARAMETERS)
   $(document).ready(function () {
       var addclass = $('p:first');

       function AddClass(addclass) {
           addclass.addClass('first');
           if (addclass.is($('.first'))) {
               alert('here');
           }
           else {
               alert('not here');
           }
       }
       $('.button').click(function () {
           AddClass(addclass);
       });
   }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:05:38.920

您的第二个参数是正确的，并且要检查传递给函数的任何参数，请使用：

```
arguments.length 
```

例如：

```
function myfunc() {
   alert( arguments.length ); //output: 1, because you passed one argument

   // and to get that

   var myarg = arguments[0];
}

myfunc(someVar); 
```

如果您不传递任何参数，则：

```
function myfunc() {
   alert( arguments.length ); //output: 0, because you passed no argument
}

myfunc(); 
```

对于您的功能：

```
 function AddClass(addclass) {

                      ^-- declaring addclass is not necessary if you use like following

       // checking for argument

       if( arguments.length ) {
         // arguments[0] will give you addclass
         // you may not write addclass to function like above
       }

       addclass.addClass('first');
       if (addclass.is($('.first'))) {
           alert('here');
       }
       else {
           alert('not here');
       }
   } 
```

带参数调用函数`addclass`：

```
 $('.button').click(function () {
       AddClass(addclass);
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:30:14.707

Yes you passed correctly the arguments to your second function, to see the arguments passed to your function can see them in two ways:

individually using the array notation

```
function AddClass(addClass) {
    console.log(arguments[0]); // This will show you the first parameter
    // Some code...
} 
```

With the jQuery function `$.each();`

```
function AddClass(addClass) {
    $.each(arguments, function (key, value) {
        console.log(value); // Output the value of all of your arguments
    });
} 
```

In this case don't matter if you pass or not the parameters because the addClass variable that you access and modify in the function AddClass are in the same scope.

You should take a look to this post [JavaScriptVariableScope](https://stackoverflow.com/questions/500431/javascript-variable-scope) to understand what is happening in your actual code and why your two samples of code works properly.

# javascript - JQuery.getJSON() 读取本地文件

> ID：11297219
> 
> 赞同：6
> 
> 时间：2012-07-02T16:03:41.817
> 
> 标签：javascript, jquery, json, local-files

如何使用 JQuery.getJSON() 读取当前目录中的文件？

我正在尝试一些简单的事情（我的 data.json 文件与我的 html 文件位于同一目录中）：

```
$.getJSON("./data.json") 
```

我得到了错误：

> XMLHttpRequest 无法加载 file:///C:/Projects/test/data.json。Access-Control-Allow-Origin 不允许 Origin null。

我尝试了各种路径组合，但它似乎不起作用......

编辑：我正在使用 Chrome，但我想在所有浏览器中工作......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T16:07:14.780

如果您使用的是 Google Chrome，则故意使`file:///`路径上的 AJAX 永远不起作用。

[crbug/40787](http://code.google.com/p/chromium/issues/detail?id=40787)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-02T04:51:20.857

安装本地 LAMP 服务器的另一种方法是使用 python 的简单 HTTP 服务器。只要您安装了 python，只需打开 bash 并使用 python 解释器。

对于 python 2 使用：

```
python -m SimpleHTTPServer 8000 
```

对于 python 3 使用：

```
python -m http.server 8000 
```

然后只需将浏览器指向 localhost:8000 ，如果文件位于同一目录中，则访问该文件应该没有任何问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T16:08:04.950

这是因为您直接从硬盘驱动器运行 Web 文件。这有很多陷阱，你已经发现了其中一个。理想情况下，您希望在服务器环境中工作，甚至在本地工作。您可以安装（免费）本地 LAMP 服务器，例如[XAMPP](http://www.xampp.org)。然后，您将能够使用本地 AJAX。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T16:07:11.753

这与路径无关

这是一个跨域问题

基本上你需要在你的 URL 中添加一个回调，以便 jQuery 可以自动将请求类型从 json 更改为 jsonp

详细看这个[帖子](https://stackoverflow.com/questions/3595515/xmlhttprequest-error-origin-null-is-not-allowed-by-access-control-allow-origin)

# cakephp - 在 CakePHP 2.1 中将上传的文件保存在特定文件夹中

> ID：11297222
> 
> 赞同：0
> 
> 时间：2012-07-02T16:04:07.463
> 
> 标签：cakephp

在 CakePHP 中，是否可以将上传的文件保存在相应的用户目录中`user_id_directory`？

如果是，那么如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:46:55.480

```
$userid = $this->User->find('first', array('conditions' => array('User.id' => $this->Auth->user('id')));

$folder = new Folder (WWW_ROOT . 'img' . DS . 'user' . DS . $userid['User']['id'], true); 
```

此示例基于登录的用户在 webroot/img/user/ 中创建一个文件夹。您可以将 ['id'] 替换为 ['username'] 等。

# php - 在 PHP/MySQL 插入中转义单引号不起作用

> ID：11297223
> 
> 赞同：3
> 
> 时间：2012-07-02T16:04:08.143
> 
> 标签：php, mysql

我正在尝试使用 JavaScript/Ajax 和 PHP 的组合将字符串插入 MySQL 表。在使用 Ajax 将所需的 (JavaScript) 字符串传递给 PHP 脚本后，我尝试使用 PHP 将其插入到表中。

PHP 脚本正在运行，但是一旦遇到单引号 (')，插入就会在该点停止。我尝试过以各种组合使用 mysql_real_escape_string()、addslashes()、htmlentities() 和 str_replace()，尝试打开和关闭魔术引号，无论如何，单引号都无法处理。我只想保留它们或让它们正确转义，但没有什么对我有用 - 字符串本身来自推文，所以我想知道是否可能是一些编码冲突导致了这种情况？任何有关如何克服这一点的建议将不胜感激。

例如，为了更好地说明，如果我将此字符串传递给 PHP 脚本：

答应我你不会投票

然后在使用上述任何方法清理字符串并插入 MySQL 表后，它在 MySQL 表中将始终如下所示：

答应我你赢了

这是我的php代码：

```
include("dbconnect.php"); //connect to DB
$tweet = mysql_real_escape_string($_POST['tweet']); //escape the string

if($tweet != '') { //check it's not empty

$query = "insert into Tory (Content) values('$tweet')"; //insert statement

$link = mysql_query($query);
if (!$link) {
  echo "3";
  die($result);
}
echo "<p>".$tweet."</p>"; //for Ajax callback
} 
```

这是 Javascript/Ajax 代码：

```
$.ajax({  
    type: 'POST',  
    url: 'buildTable.php', //previous php code
    data: "tweet=" + content, //content is the tweet string as javascript var
    success: function(thetweet) {
         $(document.body).append(thetweet);
    }
}); 
```

编辑：感谢您提供的所有评论和建议。我使用的一个临时解决方案是在将字符串传递给 PHP 脚本之前，在客户端用反斜杠替换单引号的所有实例。然后在 PHP 或 JavaScript 中检索时将其切换回单引号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-10T12:37:29.937

在mysql中插入带单引号（`'`）或双引号（ ）的字符串`"`

仅用于`addslashes();`插入和`stripslashes();`获取数据。

```
$str = "Hello Friend's.. Hows you all"s.";
// Outputs: Hello Friend\'s..Hows you all\"s.
echo addslashes($str); 
```

stripslashes — 用 . 引用的取消引用字符串`addslashes()`。返回一个去掉反斜杠的字符串。(`\'`变成`'`等等。) 双反斜杠 ( `\\`) 被制成一个反斜杠 ( `\`)。

```
$str = "Hello Friend\'s.. Hows you all"s."; // Outputs: Hello Friend's.. Hows you all"s.
echo stripslashes($str); 
```

现在我们进入正题。如果我们用单引号或双引号将字符串插入数据库，如下所示：

```
$str = “Hello Friend's.. Hows you all"s.”;
$query = “INSERT INTO tbl (description) VALUES (‘$str’)”; 
```

这会发生错误，但是如果我们使用`addslashes($str)`下面的函数然后插入数据库，则不会发生错误。

```
$str = “Hello Friend's.. Hows you all"s.”;
$desc_str = addslashes($str);
$query = “INSERT INTO tbl (description) VALUES (‘$desc_str’)”; 
```

同样，我们可以`stripslashes($str)`像这样打印该表字段值：

```
echo stripslashes($str); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T01:36:46.113

如果您将 mysqli 或[PDO](http://www.php.net/manual/en/pdostatement.execute.php)与准备好的语句一起使用，您可以轻松避免整个转义。无论如何，这些`mysql_*`功能已被弃用，因此这将是切换的绝佳机会。

您的代码将类似于（PDO，使用您的代码）：

```
$query = "insert into Tory (Content) values (:tweet)";
$stmt = $db->prepare($sql);    // $db being your PDO object
$stmt->execute(array(':tweet' => $_POST['tweet']));    // assuming you are not verifying the tweet somewhere else 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:00:47.520

我不确定这是否相关，我知道这有点晚了，但我在尝试创建 CSV 文件时遇到了类似的问题。我不明白为什么我的单引号没有被转义。

## 解决方案

原来我的字符串中的单引号是智能引号，即花引号而不是直引号。

运行下面的函数后（[感谢 Chris Shiflett](http://shiflett.org/blog/2005/oct/convert-smart-quotes-with-php "感谢 Chris Shiflettquot;")），我的引号被转换并且我的转义问题得到解决。

**通过此函数传递要存储的每个字段/单元格值/列值，以将智能字符（如弯引号和破折号）转换为 HTML 实体（如直引号和连字符）**

```
$smart_string = "String containing smart quotes";
$safe_string = convert_smart_quotes($smart_string);

function convert_smart_quotes($string) 
{ 
    $search = array(chr(145), 
                    chr(146), 
                    chr(147), 
                    chr(148), 
                    chr(151)); 

    $replace = array("'", 
                     "'", 
                     '"', 
                     '"', 
                     '-'); 

    //return string with smart characters replaced by html safe characters
    return str_replace($search, $replace, $string); 
} 
```

就像我说的，不确定这是否会直接帮助您解决问题，但将来可能会帮助您和其他人！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T16:15:42.757

Replace:

```
$link = mysql_query($query);
if (!$link) {
  echo "3";
  die($result);
} 
```

With:

```
mysql_query($query);
if(mysql_errno() != 0)
  die(mysql_error()); 
```

# php - PHP PDO 准备更新语句

> ID：11297227
> 
> 赞同：0
> 
> 时间：2012-07-02T16:04:31.427
> 
> 标签：php, mysql, pdo

以下是我对准备语句的尝试。它导致页面此刻死掉，所以显然出了点问题。

```
function telephoneinsert($elector,$inputs,$outputs){
            global $dbh;
            $sql = "UPDATE electors SET $inputs WHERE ID=?";
            $q = $dbh->prepare($sql);
            $q->execute(array($outputs,$elector));
            //UPDATE STATS
        } 
```

就是这样在页面上调用的函数

```
telephoneinsert($Ielector,$inputs,$outputs); 
```

其中 $inputs = 已发布的数组，如果回显看起来像这样`name = ?, type =?`。故意删除最后一个逗号。

如果回显看起来像，则与 $outputs 的原理相同`benjamin,socialist`

错误报告不显示

```
$this->pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING );
        print_r($dbh->errorInfo()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:24:38.937

`$outputs`包含一个逗号分隔的字符串，但`execute()`希望参数作为数组元素传递。因此，您必须将字符串分开：

```
$q->execute(explode(',', "$outputs,$elector")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:15:01.783

在您的数组中，您有 2 个元素

```
$q->execute(array($outputs,$elector)); 
```

但`?`在你的sql中只有一个，数组元素的数量需要与它们出现的顺序的问号数量相匹配

# c# - 如何在 C# 中取消 CellEnter/CellLeave 事件？

> ID：11297232
> 
> 赞同：6
> 
> 时间：2012-07-02T16:05:11.857
> 
> 标签：c#, events, datagridview

我有`DataGridView`。在某些单元格中，我添加了一些数据。如果我当前正在编辑的单元格是空的并且我要离开它，则会向用户显示一条消息“bla-bla-bla”，并且处于编辑模式的单元格必须重新获得焦点。

为此，我正在使用`CellEnter`,等`CellLeave`，`CellEndEdit`并且我想在检查单元格中输入的值后取消这些事件。但我是菜鸟，它不起作用。请帮我。很高兴看到任何建议。

这是我的代码的一个变体。我尝试过其他事件，但它非常**幼稚**。

```
private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
    if (dataGridView1[e.ColumnIndex, e.RowIndex] == null)
    {
        MessageBox.Show("Empty cell!");

        dataGridView1.CurrentCell = dataGridView1[e.ColumnIndex, e.RowIndex];
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T19:52:08.873

我认为您必须`CellValidating`根据`DataGridView`.

它仅在`DataGridView`即将离开编辑模式时触发，并允许您不接受用户输入的值。要拒绝输入的值，在事件处理程序的代码中，您必须将 设置`e.Cancel`为`True`。

```
private void dataGridView1_CellValidating(object sender,
    DataGridViewCellValidatingEventArgs e)
{

    if (!IsValueValid(e.FormattedValue))
    {
        e.Cancel = true;

        MessageBox.Show("Not Valid!");
    }
} 
```

网上有很多例子，可以直接在 MSDN 的文档`DataGridViewCellValidatingEventArgs`中[找到](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcellvalidatingeventargs.aspx)。*还可以查看属性[DataGridViewCellValidatingEventArgs.FormattedValue的文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcellvalidatingeventargs.formattedvalue.aspx)*

请注意，该方法`IsValueValid(Object o)`不是`DataGridView`组件的一部分，只是一个命名示例，您应该在代码中声明它并提供验证主体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:28:12.983

您**不能**为某些单元格或行禁用 DataGrids CellEnter CellLeave 事件。

您可以做的是存储一个列表<>的单元格，这些单元格是空的/不应调用进入/离开事件的位置，并且在 CellEnter / CellLeave 中执行操作之前检查该单元格是否在禁用单元格列表中。

# c# - 使用 Gremlin 在 Neo4J 中遍历节点但在结果中包含起始节点

> ID：11297233
> 
> 赞同：2
> 
> 时间：2012-07-02T16:05:16.167
> 
> 标签：c#, neo4j, gremlin, neo4jclient

我有一个代表用户的图表和他们写的一些文章。我需要创建类似活动流的东西，包括用户及其朋友撰写的文章。

[http://twitpic.com/a342f4](http://twitpic.com/a342f4)

我可以拥有所有用户朋友的帖子，如下所示：

```
g.v(4).out("KNOWS").out("POSTED") 
```

并返回

```
v[9]
v[11] 
```

但我还需要包含使用查询检索到的原始用户的帖子：

```
g.v(4).out("POSTED") 
```

这返回

```
v[10] 
```

我怎样才能拥有所有帖子而不必进行 2 次查询然后稍后合并它们？我需要得到这样的回报：

```
v[9]
v[10]
v[11] 
```

谢谢

PD：我正在使用 Gremlin 和 Neo4jClient，但如果有人有更好的解决方案，其他的也可以，此时我仍然可以更改我正在使用的一些工具

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:22:47.033

使用 Gremlin 的聚合步骤和 Groovy 的独特方法：

```
posts = []
g.v(4).out('POSTED').aggregate(posts).iterate()
g.v(4).out('KNOWS').out('POSTED').aggregate(posts).iterate()
return posts.unique() 
```

看...

*   [https://github.com/tinkerpop/gremlin/wiki/Gremlin-Steps](https://github.com/tinkerpop/gremlin/wiki/Gremlin-Steps)
*   [http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:58:57.987

我知道您要了一个 gremlin，但您说您也对 cypher 持开放态度，这可能代表不同格式的查询

```
START
    user=node(4)
MATCH
    user-[:POSTED]->posts,
    user-[:KNOWS]->()-[:POSTED]->friendPosts
RETURN
    posts, friendPosts 
```

这将返回您使用 Cypher 寻求的结果。

//EDIT 说明：这将首先遍历并抓取用户的所有帖子，然后将遍历到朋友，因为我们实际上并不需要朋友信息，所以现在是匿名的，然后遍历朋友的帖子。

# c# - 谁应该负责选择合适的派生类？

> ID：11297236
> 
> 赞同：8
> 
> 时间：2012-07-02T16:05:26.377
> 
> 标签：c#, oop, class-design

我最近编写了一个类库，其中包含一些对某些类型的文件进行建模的对象。比如有一个抽象`Document`类，有派生类`PdfDocument`(concrete)和`OfficeDocument`(abstract，有具体派生类如`WordDocument`and `ExcelDocument`)等。

目前，客户端创建新对象的方式是选择适当的派生类并将其传递给字节数组。因此，例如，如果我有一个 PdfDocument 和一个 WordDocument 的字节数组，我会执行以下操作：

```
var wordDocument = new WordDocument(wordDocumentByteArray);
var pdfDocument = new PdfDocument(pdfDocumentByteArray); 
```

这是可接受的设计吗，客户端必须知道要使用什么派生类？或者我最好隐藏除抽象`Document`类之外的所有内容并使用抽象工厂模式之类的东西来返回正确的派生类型？例如：

```
var wordDocument = DocumentFactory.GetDocument(wordDocumentByteArray, "docx");
// pass file extension so we know what the file is 
```

请注意，派生类型不会向抽象类添加额外的属性/方法，它们只是以不同的方式实现抽象方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T16:09:38.760

第二种方法比第一种方法好得多，因为它向图书馆的用户隐藏了 Word 和 Pdf 文档存在的事实。当您决定添加更多文档类型（例如 Rtf、Html 等）时，这一点变得尤为重要：用户无需重新编译代码即可从新添加的类型中受益。事实上，他们甚至不会注意到您已经更改了任何内容：如果操作正确，他们的代码将“正常”处理他们从未知道存在的类型的文档。

PS 如果您可以扫描字节数组并从中找出正确的类型，则您的 API 可以通过消除第二个参数来“为风格赢得一些分数”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T16:10:34.737

如果派生类型不添加任何属性/方法，并且您具有确定给定字节 [] 使用哪种类型的技术能力，我什至不会公开派生类......它们只会增加消费者在学习你的图书馆时必须解析的东西。只需要像`public static Document OpenDocument(byte[] data)`Document 类中那样的静态工厂方法。

# html - 在单个网页中的 iframe 内单击播放 youtube 视频

> ID：11297237
> 
> 赞同：0
> 
> 时间：2012-07-02T16:05:29.850
> 
> 标签：html, iframe, youtube, anchor

```
<a href="http://www.youtube.com/watch?v=NxO8LanzoiU"
   target="vid1">Geriatrics Informatiion</a> 

<iframe height="315" name="vid1" width="560"></iframe> 
```

当我单击锚链接时，youtube 视频应该在 iframe 中播放。iframe 的 src 属性应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:08:04.590

要自动开始播放，请附加`autoplay=1`到 URL。例如：
[http ://www.youtube.com/watch?v=NxO8LanzoiU&autoplay=1](http://www.youtube.com/watch?v=NxO8LanzoiU&autoplay=1)

上一个链接加载包含评论等的视频。要仅显示播放器，请使用`/embed`URL：
[http ://www.youtube.com/embed/NxO8LanzoiU?autoplay=1](http://www.youtube.com/embed/NxO8LanzoiU?autoplay=1)

# sql-server - 如何从表的列中删除默认约束？

> ID：11297239
> 
> 赞同：0
> 
> 时间：2012-07-02T16:05:36.883
> 
> 标签：sql-server

我通过向其添加附加列“AOTProcessRealTime”来更改表“luAffinity”。我在“AOTProcessRealTime”列中添加了一个默认约束。以下是我解雇的查询：

`ALTER TABLE luAffinity ADD AOTProcessRealTime BIT NOT NULL CONSTRAINT DF_luAffinity_ProcessRealTime DEFAULT 0`

现在我想删除列 AOTProcessRealTime。为此，我必须先删除默认约束。所以我写了以下查询来删除约束：

`ALTER TABLE luAffinity DROP CONSTRAINT DF_luAffinity_ProcessRealTime`

在运行上述查询时，我遇到了一个错误：

`DF_luAffinity_ProcessRealTime is not a constraint. Could not drop constraint.`

但是，约束已成功创建，但我无法删除它。我只是想删除列 AOTProcessRealTime。但我无法删除它。难道我做错了什么？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:17:43.917

对于 SQL Server，您的语法应该可以工作。也许约束名称中有一个微妙的错字？采用

```
SELECT *
 from sys.default_constraints
 where parent_object_id = object_id('luAffinity') 
```

检查它当前是如何设置的。

# java - 如何查询与 JPA2 的 M:N 关系？

> ID：11297241
> 
> 赞同：7
> 
> 时间：2012-07-02T16:05:44.513
> 
> 标签：java, hibernate, jpa-2.0, jpql, criteria-api

我有一个包含 M:N 元素（标签）集合的对象（BlogPost）。

如何使用 JPA2（Hibernate）查询一个对象（BlogPost），其中至少一个它的标签与一组标签（由用户定义）中的一个元素匹配。

```
findBlogPostWithAtLeastOneMatchingTag(Collection<Tag> tags){ ???? } 
```

我的主要问题是，我实际上需要比较两个标签集合： - BlogPost 的标签集合。- 我搜索的收藏

我试过`Select p from Post p where p.tags in(:tags)`但它不起作用，因为我的帖子实体不止一个标签。

那么我能做些什么呢？

我的 BlogPost 实体看起来像这样。它有几个标签。

```
@Entity
public class BlogPost{

    /** The tags. */
    @ManyToMany()
    @NotNull
    private Set<Tag> tags;

    @NotBlank
    private String content;

    ...
} 
```

* * *

解决方案不能是 JPQL，JPA-Criteria（不是 Hibernate-Criteria）也可以。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T16:59:34.623

如果您喜欢 JPA Criteria，这是适合您的解决方案：

```
List<Integer> myTagsIds = new ArrayList<Integer> ();
myTagsIds.add(1);
myTagsIds.add(2);

CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<BlogPost> cq = cb.createQuery(BlogPost.class);
Root<BlogPost> blogPost = cq.from(BlogPost.class);
SetJoin<BlogPost, Tag> tags = blogPost.join(BlogPost_.tags);
Predicate predicate = tags.get(Tag_.id).in(myTagsIds);
cq.distinct(true);
cq.where(predicate);
TypedQuery<BlogPost> tq = em.createQuery(cq);
return tq.getResultList(); 
```

此解决方案使用[规范的 MetaModel](http://wiki.eclipse.org/UserGuide/JPA/Using_the_Canonical_Model_Generator_%28ELUG%29)类`BlogPost_`，`Tag_`并且应该由您的 JPA 实现生成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T14:55:00.117

### 方法一：

在 SQL 中，它可能类似于：

```
SELECT p FROM Post p WHERE (p.tags INTERSECT :tags IS NOT EMPTY); 
```

然后应用`@SqlResultSetMapping`.

### 方法二：

您可以`Criteria API`像以前一样使用和启动，但循环`Collection<Tag> tags`如下：

```
* make a union of single query results from `Select p from Post p where p.tags in(:tags)`;
* take distinct over result of union. 
```

查询将是服务器端的，您不必在 Java 中做脏活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:14:06.930

你可以做类似的事情

Select t from Post t where t.tag in (select p.tag from Post p where p.id=:id)

id 是当前帖子的 id。基本上，您正在选择带有当前帖子标签中标签的帖子。

# sql - 为什么 SQL Server 需要具有如此精确的日期格式？

> ID：11297244
> 
> 赞同：0
> 
> 时间：2012-07-02T16:05:49.053
> 
> 标签：sql, sql-server, sql-server-2008

我知道这可能是一个新手问题，但我很好奇为什么 SQL 中的日期需要看起来像这样：

```
FieldBeginDate
2010-04-01 00:00:00.000

FieldEndDate
2010-12-31 23:59:00.000 
```

为什么是三位小数或精度？有没有办法只将日期显示为月-日-年？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:07:25.730

SQL Server 2008 有一种`DATE`类型，它可以忽略时间。

使用`DATE`类型，而不是`DATETIME`类型也只需要一个`int`来存储值......而不是*两个* `int`s 需要存储一个`DATETIME`

**编辑：**您还问为什么会有三位小数...这是因为*默认情况下*存储值的精度（@AaronBetrand 在下面的评论中恰当地指出您*可以获得*扩展精度）。SQL Server 以*一三百分之一秒的*增量存储时间。

这是关于该主题的 SQLDenis：http:
[//blogs.lessthandot.com/index.php/DataMgmt/DataDesign/how-are-dates-stored-in-sql-server](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/how-are-dates-stored-in-sql-server)

# objective-c - Objective-C - 使用块和内存管理？

> ID：11297250
> 
> 赞同：0
> 
> 时间：2012-07-02T16:06:16.340
> 
> 标签：objective-c, memory-management, objective-c-blocks, grand-central-dispatch

我正在阅读有关 Grand Central Dispatch 的文档，其中有两个函数称为`Block_copy`和`Block_release`。根据文档，这些方法在调用`dispatch_async`以处理块的内存管理时被使用。我想在我的代码中做同样的事情吗？

我下面的代码有问题吗？

```
typedef void (^MyCompletionHandler)(NSError *error)

@interface ServiceClient

- (void)fetchWithCompletionHandler:(MyCompletionHandler)completionHandler;

@property (nonatomic, assign) MyCompletionHandler completionHandler;

@end

@implementation ServiceClient
@synthesize completionHandler = _completionHandler;

- (void)fetchWithCompletionHandler:(MyCompletionHandler)completionHandler 
{
   self.completionHandler = completionHandler;
   [self performSelectorInBackground:@selector(fetchInBackground)];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:12:32.780

您应该在将块分配给变量时复制它们——在这种情况下，您可以将`completionHandler`属性更改为具有`(nonatomic, copy)`属性，或者`Block_copy`在分配块时使用，就像您说的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:11:03.027

您应该使用以下声明：

```
@property (nonatomic, copy) MyCompletionHandler completionHandler; 
```

随着`assign`你的块不会被保留，但`copy`会`Block_copy`自动执行。

# jquery - 交替显示两个 div 的 ajax 显示/隐藏脚本

> ID：11297251
> 
> 赞同：0
> 
> 时间：2012-07-02T16:06:23.630
> 
> 标签：jquery, ajax, show-hide

有人可以告诉我如何使 ajax 隐藏/显示切换脚本在显示另一个元素块的内容之间交替显示。例如，我有这个 iframe（隐藏在页面上）：

```
<iframe class="slidingframe" id="thisframe" name="search" src="content.html"></iframe> 
```

该 iframe 的隐藏/显示状态由此表单按钮控制：

```
<form accept-charset="UTF-8" class="fsearch" action="./Affiliates/search_db/search.php" method="get" target="search">
<input type="submit" value="Search" class="send-button" />
<input type="hidden" name="search" value="1" />
<label for="sitesearch">
<input id="sitesearch" class="tfield" type="text" name="query" size="30" />
</label>
</form> 
```

现在我想要的是当我单击按钮时，它应该显示我指定的 iframe，同时也隐藏这个：

```
<div id="my_div">some content here</div> 
```

而且，一旦我单击第一个 iframe 区域之外或它之外的任何内容，我希望它返回隐藏状态，只留下我指定的第二个 div (myDiv)，这非常重要，因为所有内容都是加载到这个 div 中。当单击表单按钮时会触发站点搜索并将数据加载到 iframe 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:07:55.473

你可以这样做

**[现场演示](http://jsfiddle.net/rajaadil/hetsE/1/)**

```
$(document).ready(function() {    
    $('.show_hide').click(function() {
        if ($('#div_one').is(':visible')) {
            $('#div_one').hide(2000);
            $('#div_two').show(2000);
        }
        else {
            $('#div_one').show(2000);
            $('#div_two').hide(2000);
        }    
    });
});​ 
```

# java - Spring MVC 将参数映射到 .jsp 而不是 @RequestMapping

> ID：11297252
> 
> 赞同：0
> 
> 时间：2012-07-02T16:06:25.143
> 
> 标签：java, spring, url, maven, spring-mvc

我使用 maven 原型创建了一个示例 spring-mvc 应用程序

```
mvn archetype:generate -D groupId=test.tool -D artifactId=test-D version=0.1-SNAPSHOT -D archetypeArtifactId=spring-mvc-jpa-archetype -D archetypeGroupId=org.fluttercode.knappsack 
```

我一直在尝试从 URL 中读取一些参数：

```
package test.tool.controller;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping(value = "/testReadRest", method = RequestMethod.GET)
public class TestReadRestController {

private static final Logger logger = LoggerFactory
        .getLogger(TestReadRestController.class);

// No Params
@RequestMapping(method = RequestMethod.GET)
public void getMainModel(Model model) {
    model.addAttribute("varFromClient","[NOT SET]");
    model.addAttribute("tokenFromClient","[NOT SET]");
    return;
}

// http://localhost:8080/test/testReadRest/varPost
// read "varPost"
@RequestMapping(value = "/{varPost}", method = RequestMethod.GET)
public void getVarFromURI(@PathVariable("varPost") String theVar, Model model) {
    model.addAttribute("varFromClient",theVar);
    model.addAttribute("tokenFromClient","[NOT SET]");
    return;
   }
} 
```

但尝试时未读取参数 `http://localhost:8080/test/testReadRest/varPost`

相反，我收到一个错误：

```
Problem accessing /soctoolset/WEB-INF/views/testReadRest/varPost.jsp. Reason: NOT_FOUND 
```

有什么建议么？

[编辑]

这里是豆子

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"   
    xsi:schemaLocation="
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <!-- Imports user-defined @Controller beans that process client requests -->
    <beans:import resource="controllers.xml" />

</beans:beans> 
```

和控制器.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd  
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <!-- Scans within the base package of the application for @Components to 
        configure as beans -->
    <context:component-scan base-package="test.tool" />

    <tx:annotation-driven />
    <mvc:annotation-driven />

    <mvc:resources mapping="/resources/**" location="/resources/" />

    <bean id="validator"
        class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" />

</beans> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T18:17:03.927

我使用您使用的原型建立了一个新项目。

您正在`void`从该`@Controller`方法返回，因此[文档中的本节](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-return-types)适用：

> **`void`**如果方法本身处理响应（通过直接编写响应内容，为此目的声明 ServletResponse / HttpServletResponse 类型的参数）或者如果视图名称应该通过[RequestToViewNameTranslator](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/RequestToViewNameTranslator.html)隐式确定（不在处理程序中声明响应参数方法签名）。

因此，[视图是根据路径解析的](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/view/DefaultRequestToViewNameTranslator.html)，在您的情况下是“varPost”或您在路径末尾放置的任何内容。由于此默认配置，附加了扩展名“.jsp”：

```
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean> 
```

您可以添加丢失的文件，但我想这不是您想要做的。相反，您可以更改处理程序方法的签名并显式设置视图，如下所示：

```
@RequestMapping(value = "/{varPost}", method = RequestMethod.GET)
public String getVarFromURI(@PathVariable("varPost") String theVar,
        Model model) {
    model.addAttribute("varFromClient", theVar);
    model.addAttribute("tokenFromClient", "[NOT SET]");
    return "someview";
} 
```

这会导致以下合理错误：

> 请求的资源 (/testapp/WEB-INF/views/someview.jsp) 不可用。

现在，您只需要创建该视图。然后，您可以使用路径变量而不会干扰视图分辨率。

如果您不想呈现 JSP，可以从阅读有关[“支持的方法返回类型”](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-return-types)的文档开始。如果您想完全自己处理响应，您可以`void`再次返回[并将请求和响应添加为 arguments](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-methods)。

# c - C - 打开并读取目录，然后确定文件类型

> ID：11297253
> 
> 赞同：1
> 
> 时间：2012-07-02T16:06:25.803
> 
> 标签：c, stat, opendir, readdir

好的，所以我遇到了一些问题。这是我的代码（在此之前调用的 opendir() ）：

```
while( (dp = readdir(dfd)) != NULL ) {
        if( strcmp(dp->d_name, ".") == 0 ||  strcmp(dp->d_name, "..") == 0)
            continue;

        lstat(dp->d_name, &stbuf);

        printf("%s: ", dp->d_name);

        if( S_ISDIR(stbuf.st_mode) )
            puts("Directory");
        else if ( S_ISREG(stbuf.st_mode) )
            puts("File");
        else if ( S_ISCHR(stbuf.st_mode) )
            puts("Character Device");
        else if ( S_ISBLK(stbuf.st_mode) )
            puts("Block Device");
        else if ( S_ISFIFO(stbuf.st_mode) )
            puts("Fifo");
        else if ( S_ISLNK(stbuf.st_mode) )
            puts("Link");
        else
            puts("Socket");
    }
    return;
} 
```

我正在阅读一个目录并确定里面的文件类型。唯一的问题是这将始终打印“目录”，我相信这与对 lstat 的调用有关。我不确定如何适当地更改它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T16:09:19.493

> ```
> lstat(dp->d_name, &stbuf); 
> ```

事情只`dp->d_name`包含文件的名称，而不是完整路径。所以它可能会失败，但你不会注意到，因为你没有测试它的返回值。

您需要预先添加目录的路径（即，您传递给的路径`opendir`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T16:10:07.143

我可以看到两个明显的担忧原因：

1.  你没有建立正确的路径。除非你*在*目录中（即你做了`opendir(".")`），否则你将错误的路径传递给`lstat()`. 您需要将目录名称与每个文件的名称连接起来。打开目录并不意味着将其设为当前目录。
2.  `lstat()`在检查其返回值之前，您没有检查是否成功。

# wcf - 如何设置导入位置以使用客户端请求的相同主机（http 标头）

> ID：11297268
> 
> 赞同：0
> 
> 时间：2012-07-02T16:07:36.760
> 
> 标签：wcf, wsdl

我想部署 WCF Web 服务，但要做到完美，必须从任何计算机访问 WSDL，从 LAN 和 WAN。

问题是当使用local lan ip时，通过公网IP访问的WAN用户无法下载引用（导入），因为WDSL在URL中使用了本地ip。

因此，这非常令人沮丧，因为正确的方法是 WSDL 生成器使用“主机”HTTP Header 进行包含以便在任何情况下工作（本地 lan ip、公共 ip），因为这是客户端查看资源的方式

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:32:03.187

如果您设置元素的`httpGetUrl`属性，那么您可以控制 WCF 服务在 WSDL 中发布哪些 URL，如此[处](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicemetadatabehavior.httpgeturl%28v=vs.100%29.aspx)所述的 WCF 从版本 3.5 开始。如果您设置绝对地址以使用 DNS 注册的主机名，那么您的所有客户端都可以访问它。`serviceMetadata`

在某些情况下（例如负载平衡服务器），您可能还需要[设置`useRequestHeadersForMetadataAddress`](http://msdn.microsoft.com/en-us/library/system.servicemodel.configuration.userequestheadersformetadataaddresselement%28v=vs.100%29.aspx)WCF 4.0 及更高版本的特性[。](http://msdn.microsoft.com/en-us/library/system.servicemodel.configuration.userequestheadersformetadataaddresselement%28v=vs.100%29.aspx)

# asp.net - ASP.net - insert record if absent

> ID：11297270
> 
> 赞同：-1
> 
> 时间：2012-07-02T16:07:39.863
> 
> 标签：asp.net, sql, sql-server, formview

I have a form view which people use to update a record in the database. However initially the record will not exist, and all fields will show their default values. The first time the submit button is clicked, the record should be created in the database. Subsequent submits should update the existing record. The record is identified by it's primary key, which is passed to be page via Request.QueryString.

Does ASP.net provide a simple way of doing this, or do I need to roll my own implementation of the insert/update logic?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:14:33.983

Read the value and do a GET request to your data source/Repositary. Check whether there is already an Entity / Record exist for this key. If yes call your Update method, else Insert.

Something like this

```
 //check the queystring param value is valid numeric expression 
//before trying to convert

 int itemId=Convert.ToInt32(Request.QueryString["itemId"]);

 var item=repo.GetItemById(itemId);
 if(item==null)
 {
   repo.InsertItem(item);
 }
 else
 {
    repo.UpdateItem();
 } 
```

Assuming `repo` is an object of your Repositary implementation where you have the Insert and UupdateItem methods present which will do the updation/insertion of data to your persistant storage.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:25:54.893

```
UPDATE dbo.table SET col = @col WHERE id = @id;

IF @@ROWCOUNT = 0
BEGIN
  INSERT dbo.table(id, col) SELECT @id, @col;
END 
```

In 2008+ you can also use [`MERGE`](http://msdn.microsoft.com/en-us/library/bb510625.aspx) but I find the syntax quite daunting (and it doesn't isolate you from potential collisions as well as you might think it does).

# javascript - ASP.net VB DetailsView 插入：javascript Postback on Cancel 问题

> ID：11297271
> 
> 赞同：0
> 
> 时间：2012-07-02T16:07:40.730
> 
> 标签：javascript, asp.net, insert, detailsview

在我的 ASP.net 应用程序中，在 Detailsview 上使用 ItemInserting，我使用 javascript 函数向用户显示确认框。确认框基本上显示来自数据库的查询结果。

这工作正常，除了即使用户单击取消也会发生回发。

我确定我在这里遗漏了一些基本的东西，专家可以帮忙吗？感谢您的回复。我确实在整个网站上进行了搜索，但大多数解决方案都在按钮上使用了 onClick 事件。我不知道如何在这里工作。

更新：根据 TheGeekYouNeed 的建议，我尝试在我的脚本中加入一个条件。现在弹出窗口不再出现。任何人？

```
 Protected Sub CustomerDetail_ItemInserting(sender As Object, e As System.Web.UI.WebControls.DetailsViewInsertEventArgs)
    Dim args As String = e.Values("WriteID").ToString()

    For Each drv As Data.DataRowView In SqlDataSource3.[Select](DataSourceSelectArguments.Empty)
        If drv("WriteID") = args Then

            Dim ConnString As String = "Data Source=75409CHQ4034\SQLEXPRESS;Initial Catalog=ExpenseTracker;Integrated Security=True"
            Dim SQLConn As New SqlConnection()
            Dim SQLCmd As New SqlCommand()
            Dim SQLdr As SqlDataReader

            SQLConn.ConnectionString = ConnString 'Set the Connection String
            SQLConn.Open() 'Open the connection
            SQLCmd.Connection = SQLConn 'Sets the Connection to use with the SQL Command
            SQLCmd.CommandText = "Select  Top 1 Budget - Difference as 'Remaining' FROM ExpenseImageAudit where WriteID =" + "'" + args + "' Group by ID, Budget-Difference order by ID desc "

            'Sets the SQL String
            SQLdr = SQLCmd.ExecuteReader 'Gets Data

            While SQLdr.Read() 'While Data is Present

                TextBox8.Text = SQLdr("Remaining")

                Dim script As String = String.Format("<script type='text/javascript'>confirmBudget({0});</script>", TextBox8.Text)
                Page.ClientScript.RegisterStartupScript(Me.[GetType](), "script", script)
            End While
        SQLdr.Close() 'Close the SQLDataReader
        SQLConn.Close() 'Close the connection

        End If

    Next
End Sub 
```

脚本：

```
 <script type="text/javascript">
    function confirmBudget(amount) {
        return confirm('Based on your last transaction, your amount left is' + amount + '. Do you want to proceed?');
    }        
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:30:49.977

将此脚本放在您的 aspx 页面的 head 部分。

```
<script type="text/javascript">
   function confirmBudget(amount)
   {
      if(confirm('Based on your last transaction, your amount left is' + amount + '. Do you want to proceed?'))
      {
         document.getElementById("btnDoSomethingOnOK").click();
      }

   }
</script> 
```

从您的服务器端代码中这样调用它：

```
string script = string.Format("<script type='text/javascript'>confirmBudget({0});</script>", TextBox8.Text);

Page.ClientScript.RegisterStartupScript(this.GetType(), "script", script); 
```

对不起 C# 语法。我不知道vb。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:13:45.697

在您的 Javascript 中，返回答案。

```
Dim script As String = "<script language='javascript'>var a=' " + TextBox8.Text & "'; var answer = confirm('Based on your last transaction, your amount left is '+ a + '. Do you want to proceed?'); return answer; </script>" 
```

# linux - 配置和制作：source、test 和 doc

> ID：11297272
> 
> 赞同：1
> 
> 时间：2012-07-02T16:07:45.847
> 
> 标签：linux, makefile, autotools, configure

我正在尝试创建一个配置脚本来构建源代码、测试和文档。文件夹如下：

*   源代码
*   测试

我要生成的文档来自源代码，由 Doxygen 处理。

在运行配置脚本后，我希望能够执行以下操作：

```
$ make  // to compile the source

$ make test // to compile the tests

$ make run_test <test_name> // to run an specific test

$ make doc // to run Doxygen and generate the documentation in a folder called "doc" 
```

我需要什么来执行这些？我正在研究 Autotools 文档，但我还没有找到执行此操作的方法。

谢谢

# android - android中XML SAX解析器、Pull解析器和DOM解析器的区别

> ID：11297273
> 
> 赞同：15
> 
> 时间：2012-07-02T16:07:48.507
> 
> 标签：android, saxparser, xmlpullparser, domparser

我想知道Android中的XML **SAX解析器、拉解析器和DOM解析器**有什么区别。在什么条件下，性能和实现上哪一个更好？

谢谢。霍拜卜。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-07-02T10:40:41.537

**Dom Parser -** 它使用***基于对象的***方法。即，它首先将整个 XML 加载到内存中，将 XML 节点转换为对象，然后开始解析它们。所以，它相当慢。

**SAX 和 PULL Parser -**他们使用***基于事件的***方法。两者在内存和性能方面几乎相同。然而，关于何时使用它们的区别情况很少，如下所述。

**Dom Parser -**当您需要在解析之前***验证***整个 XML 时使用它。当 XML 太大并且验证可能会受到影响时，切勿使用它。一旦开始解析，它就会从起始节点解析到结束节点。没有办法只解析特定的节点。

**SAX -**当您想要解析整个 XML 时使用它。一旦开始解析，它就会从起始节点解析到结束节点。没有办法只解析特定的节点。

**PULL -**当您不想解析整个 XML 时使用它。它比 SAX 更容易实现，因为您不必维护解析器的状态。您只能拉取您感兴趣的特定节点。

我的建议是 - 需要***验证 - Go for DOM***，文件大小***小***或者您对解析整个 XML-Go 不感兴趣，文件大小***很大***或者您需要解析***整个 XML***文件 - Go ***for*** ***SAX***。

 **** * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-02T16:18:24.753

**Sax Parser :** XML Parse node to node 的简单 API，使用自上而下的遍历，解析而不存储 xml，与 Dom 相比更快 允许插入或删除节点操作。需要 SAXParserFactory

**Dom Parser：**文档对象模型在处理之前将整个xml存储在内存中，沿任何方向遍历，不允许像插入或删除这样的节点操作。需要 DocumentBuilderFactory

**拉解析器：**它提供了以上两者的更多控制和速度。需要 pullParserFactory

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:18:29.277

就性能而言，SAX 通常会使用更少的内存。而且您只处理您想要的事件，例如 startElement()、startDocument()、endElement() 等，因此您只会保存您想要的特定数据。DOM 会将整个 XML 文件加载到内存中。***

# android - 如何更改通过代码添加的微调器的大小？

> ID：11297276
> 
> 赞同：0
> 
> 时间：2012-07-02T16:07:54.573
> 
> 标签：android, spinner

我正在做一个类似字典知识测试器的项目。我想要 2 通过代码向微调器添加语言名称，但我有一个问题，它让我发疯。

当我使用标记在“1”下方的部分时，我没有问题，但另一方面，如果我使用标记为“2”的部分，则会出现错误。同时，如果我使用“1”，它看起来像全屏，但我还没有找到将其大小更改为更小的方法。

请帮助我，提前谢谢。

1)`Spinner spin = new Spinner(this); spin.setAdapter(dataAdapter); setContentView(spin);`

2)`Spinner spin2 = (Spinner) findViewById(R.id.spinner1); spin2.setAdapter(dataAdapter); setContentView(spin2);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:40:35.160

您在 1 中使用它的方式是将微调器的视图设置为唯一可见的视图。

您需要在 XML 文件中定义视图，然后将其设置为内容视图

例如 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<Spinner
    android:id="@+id/spinner2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

然后在你的 .java 文件中

```
 /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //setting up the adapters
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item);
    ArrayAdapter<String> dataAdapter2 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item);

    //adding things to the adapters
    dataAdapter.add("English");
    dataAdapter2.add("Spanish");

    //setting the spinners up from their id in the XML file
    Spinner spinner1 = (Spinner)findViewById(R.id.spinner1);
    Spinner spinner2 = (Spinner)findViewById(R.id.spinner2);

    //setting the spinners adapters
    spinner1.setAdapter(dataAdapter);
    spinner2.setAdapter(dataAdapter2);      

} 
```

应该这样做，如果我对问题的解释有误，请更详细地回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:40:47.967

我解决了这个问题。问题是我同时添加了相对和线性布局，程序无法正确访问微调器。现在我删除线性布局并仅添加相对布局并设计我的屏幕。现在没有问题了。感谢所有对此主题感兴趣并给出答案的人。

# javascript - 将数据传递到 .jsp Javascript 数组

> ID：11297280
> 
> 赞同：2
> 
> 时间：2012-07-02T16:08:01.640
> 
> 标签：javascript, json, jsp, google-maps-api-3

我将数据硬编码到 .jsp 文件中。我想要做的是用从服务器发送的数据填充一个 JavaScript 数组。

我试图从另一个 .jsp 页面发送数据，但我不知道如何将其转换为 JavaScript var 以便我能够在我的页面中使用它，我也已经开始使用 JSON 对象，但在我继续之前我只需要一些指导，说明最好的方法是什么。

即：在来自服务器的 .html 或 .jsp 文件上填充 JavaScipt 数组。然后该数组将用于 Google Maps API。

如果您有任何问题，请告诉我：

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:20:32.620

如果是硬编码的，为什么不直接把它变成 JS 变量呢？

```
var foo = [{
    "name1": "value1a",
    "name2": "value2a"
},{
    "name1": "value1b",
    "name2": "value2b"
}]; 
```

或者，如果它在 Java 端进行了硬编码，并且您也打算在 JS 端使用它，则使用许多可用的 JSON 序列化器/解析器之一将 Java 对象转换为 JSON。在[json.org](http://json.org)的底部，您可以找到 Java 中所有可用 JSON API 的概述。其中之一是[谷歌 Gson](http://code.google.com/p/google-gson/)。例如，它能够将 a 转换为`List<SomeBean>`JSON 字符串，如下所示

```
String jsonString = new Gson().toJson(someBeans); 
```

然后你可以让 JSP 打印它，就好像它是一个 JS 变量一样，假设它被存储为一个请求属性：

```
var foo = ${jsonString}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:17:56.007

这很简单：

1.  您必须确保您的 JSP 生成正确的 JavaScript 作为输出。
2.  包括带有`<script>`标签的 JSP（即 JSP 需要通过 URL 访问；将该 URL 放入`src`属性中）。

JSP 代码示例：

```
var data = [<% ...generate array elements here... %>]; 
```

这将允许您访问`data`之后执行的所有 JavaScript 中的变量。在您的情况下，您会将脚本作为页面中的第一件事包含在内，以便其他所有脚本都可以使用它。

巧妙的技巧：添加一个查询参数来指定变量名：

```
var <%=request.getParameter("name") %> = [<% ...generate array elements here... %>]; 
```

并将其包含在

```
<script src="...url...?name=data" type="text/javascript"> 
```

# clearcase - 更新 ClearCase 快照视图时出错

> ID：11297283
> 
> 赞同：3
> 
> 时间：2012-07-02T16:08:08.430
> 
> 标签：clearcase, clearcase-ucm

我有一个用户（只有一个，其他都很好）试图更新他们的 ClearCase 视图。
直到今天，它在过去 6 个月里一直为他们工作。

当他们更新时，他们得到：

```
Unable to read directory "."  Permission denied

Errors were encountered in loading "\VOB" 
```

我做了一个“ `gpresult`”，似乎他们在正确的组中，并且没有为他锁定流。
CC Doctor 也没有出现任何错误。
自从他上周五使用 CC 以来，没有任何变化。

还有其他我应该看的地方吗？
我没有想法，我相信我已经到了谷歌搜索的尽头......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:28:29.807

通常要检查的元素是：

*   环境[变量`CLEARCASE_PRIMARY_GROUP`](http://www-01.ibm.com/support/docview.wss?uid=swg21135509)
*   视图的特点：

```
cleartool lsview -l -full -pro viewTag 

```

由于用户没有进行任何更改，因此可以将其链接到 Windows 配置文件问题。确保重新启动后问题仍然存在。

还要确保没有 Windows 组策略更改或登录权限演变（如撤销管理员权限），这可以解释为什么用户无法读取 ClearCase 快照视图的根目录。这可能是 Windows ACL 问题（即与 ClearCase 没有直接关系。

* * *

[`CLEARCASE_PRIMARY_GROUP`](http://www-01.ibm.com/support/docview.wss?uid=swg21135509)OP 报告说，ClearCase 不再考虑引用的组，因为该组不在用户注册的前 32 个 Windows 组中。

技术说明“[关于 CLEARCASE_GROUPS 变量](http://www-01.ibm.com/support/docview.wss?uid=swg21124574)”详细说明了正确的解决方法：

> 此变量用于抵消 ClearCase 使用的[SUNRPC 协议](http://en.wikipedia.org/wiki/Open_Network_Computing_Remote_Procedure_Call)中的限制，即任何属于超过 32 个 Microsoft Windows 组（域或本地）的成员的用户都可能遇到访问问题。
> 
> 如果存在任何用户的用户环境变量`CLEARCASE_GROUPS`，ClearCase 将在确定（或显示）用户所属的组时首先考虑在该变量的值中指定的以分号分隔的组列表。
> 
> 实质上，当您登录 Windows 时，您会收到一个**[Access Token](http://en.wikipedia.org/wiki/Access_token)**。
> ClearCase 将按照 Windows 提供它们的顺序处理这些令牌（这是完全随机的，不能以任何方式配置）。
> ClearCase 将在达到 32 个组后停止处理令牌。
> 
> 该`CLEARCASE_GROUPS`变量是解决此问题的唯一方法。
> 设置变量后，ClearCase 将`CLEARCASE_GROUPS`按照列表的写入顺序查看列表中的每个组名，并将其与提供的 Windows 访问令牌进行比较。
> 如果组名与 Windows 访问令牌中的组匹配，那么 ClearCase 将创建一个 ClearCase 访问令牌供该组使用。
> 
> 当 CLEARCASE_GROUPS 变量用完后，ClearCase 将返回 Windows Access Token 列表，任何尚未添加到 ClearCase 令牌中的组将从剩余列表中按提供的顺序添加，直到 Windows 中的所有组使用令牌（如果低于 32）或达到 32 组限制。

![设置环境变量 CLEARCASE_GROUP](../Images/b8b2eed2b875ebc999d31e4d6df1d025.png)

# linux - linux CFS 调度程序如何防止具有非常小的 vruntime 的任务使处理器挨饿？

> ID：11297285
> 
> 赞同：5
> 
> 时间：2012-07-02T16:08:29.483
> 
> 标签：linux, runtime, scheduler

所以当一个任务吃完它的时间片后，它会被重新插入到红黑树中。如果任务之前已经休眠了很长时间，导致vruntime与runqueue中的其他任务相比非常小，那么它会被重复地重新插入到红黑树的最左边，对吧？因此，它总是会被选为下一个要运行的任务？我检查了 core.c 和 fair.c 中的源代码，我没有看到该任务应该让给其他任务的任何地方。尽管在函数 pick_next_entity() 中，我确实看到了一些任务，例如 cfs_rq->next、cfs_rq->last 等。它们可能具有更高的运行优先级，但我认为这不是阻止非常小的任务的正确位置vruntime 不会占用处理器太长时间，对吗？有人有线索吗？谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:38:31.010

我找到了答案。当任务从运行队列出队时，会调用： se->vruntime -= cfs_rq->min_vruntime 当任务再次入队到运行队列时，会调用： se->vruntime += cfs_rq->min_vruntime 所以实际上只有vruntime 的偏移量将在任务休眠时存储，并在任务唤醒时再次添加偏移量。

# javascript - 将 javascript 正则表达式转换为 asp.net vb

> ID：11297286
> 
> 赞同：1
> 
> 时间：2012-07-02T16:08:32.767
> 
> 标签：javascript, .net, regex

我正在使用以下正则表达式来验证 javascript 中的电子邮件地址文本框：-

```
var regex = /^[\_]*([a-z0-9]+(\.|\_*)?)+@([a-z][a-z0-9\-]+(\.|\-*\.))+[a-z]{2,6}$/i; 
```

我还需要在 asp.NET(4) VB 站点的后端运行它以防止注入。

当我将它转换为我认为它应该适用于 .NET 并在[http://myregextester.com/](http://myregextester.com/)中运行它设置为使用 .NET 和 VB 时，它通过了：-

```
^[_]*([a-z0-9]+(.|_*)?)+@([a-z][a-z0-9\-]+(.|-*.))+[a-z]{2,6}$ 
```

但是，当我将其放入代码中时，它不起作用：-

```
If (Not Regex.IsMatch(theEmail, "^[_]*([a-z0-9]+(.|_*)?)+@([a-z][a-z0-9\-]+(.|-*.))+[a-z]{2,6}$")) Then                    
    Return False
Else
    Return True
End If 
```

任何有关转换为 VB 的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:12:49.863

替换`\-`为`-`

```
^[_]*([a-z0-9]+(.|_*)?)+@([a-z][a-z0-9-]+(.|-*.))+[a-z]{2,6}$ 
```

并且还设置`RegexOptions.IgnoreCase`。既然`/i`是定的。

这里`i`表示`IgnoreCase`。

您的代码将是

```
If (Not Regex.IsMatch(theEmail, "^[_]*([a-z0-9]+(.|_*)?)+@([a-z][a-z0-9-]+(.|-*.))+[a-z]{2,6}$", RegexOptions.IgnoreCase)) Then                    
    Return False
Else
    Return True
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:47:58.243

正则表达式之间的唯一区别似乎是原始表达式使用文字点`\.`，而第二个使用点`.`元字符。元字符将匹配任何内容，文字点将仅匹配点字符。

尝试将逃生点放回原点。

你的两个正则表达式，

老的

```
 ^ [\_]* 
 (
      [a-z0-9]+ 
      ( \. | \_* )?
 )+
 @
 (
      [a-z] [a-z0-9\-]+ 
      ( \. | \-*\. )
 )+
 [a-z]{2,6} $ 
```

新的

```
 ^ [_]* 
 (
      [a-z0-9]+ 
      ( . | _* )?
 )+
 @
 (
      [a-z] [a-z0-9\-]+ 
      ( . | -*. )
 )+
 [a-z]{2,6} $ 
```

# iphone - iOS 上的 Chrome 显示 jQuery Mobile 页面（ASP.NET MVC）的奇怪 URL

> ID：11297287
> 
> 赞同：4
> 
> 时间：2012-07-02T16:08:33.357
> 
> 标签：iphone, asp.net-mvc-3, jquery-mobile

我有一个 jQuery Mobile 页面，可以在 iPhone (iOS 5+) 上的 Safari 中正常工作。当点击这个链接时......

```
@Html.ActionLink("Click to download", "Download", "Home") 
```

...我被带到**myapp.com/Home/Download**

在 iPhone 上的 Chrome 中单击相同链接时，我被带到**myapp.com/** (F(LzXF8gDEEPPgR7F_UZ0wf2uWg1e-aK1mgwtvzxCTIgflM43gYVEY06XIIq91OLlyjnRXo78AXHQLoXMUXRjOLKQltEhrsYgmTnSNsHzBfl01)) **/Home/Download**

有谁知道为什么 URL 变得如此混乱？（从该网址没有后续链接有效..）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T16:12:08.493

您的用户代理（浏览器）不支持 cookie 或禁用了 cookie。在这种情况下，ASP.NET 陷入了一种兼容模式，在这种模式下，它通过在 url 中附加会话 id 来跟踪用户会话。所以现在你所有的 url 都会有这个 id。这是完全正常的行为。

不仅 ASP.NET Session 会发生同样的情况，Forms Authentication cookie 也会发生同样的情况。您可以通过强制始终使用 cookie 为 web.config 中的 ASP.NET 会话禁用此行为：

```
<sessionState cookieless="UseCookies" /> 
```

显然，如果用户禁用 cookie，您的应用程序将简单地崩溃，因为它无法跟踪用户。表单身份验证 cookie 也是如此：

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/LogOn" timeout="2880" cookieless="UseCookies" />
</authentication> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T00:12:47.993

我意识到这是一个较旧的帖子，但是..

我相信这是最新版本的 chrome iOS v 30.0.1599 的错误

正如 Daren 所说，这是使用 URL 来保存身份验证数据的 .net 框架，否则这些数据将在身份验证 cookie 中。这称为无cookie 会话。

.net 不应将用户代理解释为不支持 cookie 的代理。

我将测试 Request.Browser.Cookies 添加到我的登录页面，并且看到此版本的 chrome 显示为错误。这肯定是 chrome 版本中的一个错误。这似乎只发生在一些回发之后，即使清除 cookie 和数据并兑现内容设置也不会自行解决。

解决的唯一方法是卸载 chrome 并使用 Safari。我正在使用ios7。

我很想知道如何解决这个问题，但目前我们建议使用 iOS chrome 的客户不要更新或使用 Safari 并卸载....

标记

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:54:41.103

我有同样的问题，

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/LogOn" timeout="2880" cookieless="UseCookies" />
</authentication> 
```

解决了我的问题..

我认为您必须强制浏览器使用 cookie，因为当我检查 ipad 上的设置时，chrome 已经允许它们。

再次感谢..

# java - 使用 flash() 显示所有验证错误

> ID：11297291
> 
> 赞同：3
> 
> 时间：2012-07-02T16:08:40.640
> 
> 标签：java, html, playframework, playframework-2.0

我正在使用具有自定义验证和 play.data.validation.constraints 的 Java Play 2.0.1，并且正在寻找一种方法来显示表单中发生的每个错误，无论我的代码是否正在验证或 Play 是否正在验证。

我目前正在做什么来显示所有错误，是我的控制器中有一个方法可以添加从中检索到的 Map 中包含的所有错误`form.errors()`，然后将它们添加到 flash 范围内，这意味着所有错误将被检测到，但不会在第一次重定向时显示，直到 play.data.validation 错误得到修复。

```
public static void addFlashError(Map<String, List<ValidationError>> errors){
      for(String key : errors.keySet()){
          List<ValidationError> currentError = errors.get(key);
          for(ValidationError error : currentError){
              flash(key, error.message());
          }
      }   
  } 
```

然后在我的 scala.html 中显示错误

```
 <div class="alert-message error">
        @for((key, value) <- flash){
            <strong>Error : </strong> @value<br />
        }
    </div> 
```

但这似乎不是最简单的解决方案，并且 Play 不会在 play.data.validation 错误的同时显示自定义验证错误，因为看起来好像显示了 play.data.validation 错误，并且然后如果没有 Play 检查`String validate()`表单包装的类中是否包含公共内容。

是否有一种简单的方法来显示表单中的所有错误，而不是 play.data.validation 错误，如果 play.data.validation 错误不存在则自定义验证错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:07:19.203

我所做的是调用`form.hasErrors()`该值并将其存储在一个变量中。接下来，您将执行所有自定义验证。抓取`form.errors()`（就像您所做的那样），如果您发现任何错误，则将它们直接插入该地图。如果有任何验证错误，然后`badRequest()`像往常一样返回您的 Form 实例（其中包含带有所有错误的错误映射）。

# security - 如何判断我的邮件系统是否已被入侵？

> ID：11297292
> 
> 赞同：2
> 
> 时间：2012-07-02T16:08:41.727
> 
> 标签：security, email

我的网站管理员万能电子邮件地址开始收到来自各种电子邮件系统的大量“交付状态通知（失败）”回复。每小时 1 次。

显然是垃圾邮件被发送，因为内容是关于药物的。我想弄清楚是否

1）不是由我们发送，而是在我们的站点上设置了回复字段，因此我们收到了失败通知或 2）我们的系统已被破坏并且由我们发送，损害了我们的声誉。另外 - 如果是这种情况，我在哪里寻找解决问题？！

谢谢！

这是一个例子：

```
 Delivery to the following recipient failed permanently:

 grdchurch@mail.calvinseminary.edu

 Technical details of permanent failure:
 Google tried to deliver your message, but it was rejected by the recipient domain. We         recommend contacting the other email provider for further information about the cause of    this error. The error that the other server returned was: 550 550 5.1.1   <grdchurch@calvinseminary.edu>... User unknown (state 13).

 ----- Original message -----

 Received: by 10.204.152.70 with SMTP id f6mr6872450bkw.7.1341224023720;
 Mon, 02 Jul 2012 03:13:43 -0700 (PDT)
 Received: by 10.204.152.70 with SMTP id f6mr6872447bkw.7.1341224023673;
 Mon, 02 Jul 2012 03:13:43 -0700 (PDT)
 Return-Path: <Ester7CB4674@mysite.com>
 Received: from 94.98.142.218 ([94.98.142.218])
 by mx.google.com with ESMTP id hi9si10538192bkc.151.2012.07.02.03.13.38;
 Mon, 02 Jul 2012 03:13:39 -0700 (PDT)
 Received-SPF: neutral (google.com: 94.98.142.218 is neither permitted nor denied by   best guess record for domain of Ester7CB4674@mysite.com) client-ip=94.98.142.218;
 Authentication-Results: mx.google.com; spf=neutral (google.com: 94.98.142.218 is neither permitted nor denied by best guess record for domain of Ester7CB4674@mysite.com)    smtp.mail=Ester7CB4674@mysite.com
 Date: Mon, 02 Jul 2012 03:13:39 -0700 (PDT)
 Message-Id: <20120702131340.6C18454BE719A3A513E9@USER-PC>
 From: Leslie Browning <Ester7CB4674@mysite.com>
 To: grdchurch <grdchurch@calvinseminary.edu>
 Reply-To: Maryanne Whitehead <Terry1DA24@starlane411.com>
 Subject: For grdchurch
 Mime-Version: 1.0
 Content-Type: text/plain; charset=utf-8
 Content-Transfer-Encoding: 7bit

 best ED meds! Be confident! Buy here http://www.akermedic.ru/

 B3B0ED3F2E14A898C2C644020D7E9A8071
 30DA492A4CF3EB0A0E3DE1371040BE5C81
 4C9CF9C9AC2D7881DACD5D1B0A9A460 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:38:02.503

您可以在邮件标题中看到

```
Received: from 94.98.142.218 ([94.98.142.218]) 
```

如果那里的 IP 不等于任何主机的 ip，则它只是欺骗的`From`标头。标`Received`头不是由发件人创建的，而是由（可能）也向您发送`Delivery Status Notification (Failure)`消息的中间邮件服务器创建的。这不能轻描淡写。攻击者也不需要欺骗，因为他已经*将*您的系统作为欺骗。

所以我认为这指向一个指向你的欺骗`From`标题的方向。当然没有保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:18:03.470

Try installing some anti-virus and anti-malware like:

[http://www.malwarebytes.org/](http://www.malwarebytes.org/)

[http://www.microsoft.com/security/pc-security/mse.aspx](http://www.microsoft.com/security/pc-security/mse.aspx)

and run a full system scan, see what you come up with.

# javascript - 具有可变属性的Javascript对象：可能吗？

> ID：11297293
> 
> 赞同：0
> 
> 时间：2012-07-02T16:08:45.727
> 
> 标签：javascript, jquery, oop, object, properties

> **可能重复：**
> [javascript 对象，访问变量属性名称？](https://stackoverflow.com/questions/4255472/javascript-object-access-variable-property-name)

我确信它可以完成，但我可以使用一些帮助......

```
$('.red_button')
    .each(function() {
        var someVariable = $(this).attr('name');
        myObject.someVariable = 0;
    }); 
```

非常感谢我的救星！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:09:20.400

是的，您可以为此使用括号：

```
myObject[ someVariable ] = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:10:49.203

您所指的称为动态对象属性。为了实现此功能，您将使用以下语法：

```
myObject[someVariable] = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:10:52.057

```
$('.red_button')
    .each(function() {
        var someVariable = $(this).attr('name');
        myObject[someVariable] = 0;
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T16:14:19.530

这是正确的，假设您`myObject`在使用它之前已经创建了：

[http://jsfiddle.net/73WZ3/1/](http://jsfiddle.net/73WZ3/1/)

# delphi - 使用带hotmail SMTP的delphi发送电子邮件

> ID：11297295
> 
> 赞同：0
> 
> 时间：2012-07-02T16:09:01.990
> 
> 标签：delphi, smtp, hotmail

我正在尝试使用以下代码使用 delphi 发送带有 hotmail 服务器的电子邮件：

```
SMTP.Username := 'MYEMAIL@hotmail.com';
SMTP.Password := 'PASSWORD';
SMTP.Host := 'smtp.live.com';
SMTP.Port := 25;
SMTP.IOHandler := SSLHandler;
SSLHandler.SSLOptions.Method := sslvTLSV1;
SMTP.UseTLS := utUseImplicitTLS;
SMTP.Connect; 
```

但每次我尝试发送时都会收到此错误：“套接字错误 #10060，连接超时。”

但是当我尝试用谷歌发送电子邮件时它工作正常

```
SMTP.Username := 'MYEMAIL@hotmail.com';
SMTP.Password := 'PASSWORD';
SMTP.Host := 'smtp.gmail.com';
SMTP.Port := 465;
SMTP.IOHandler := SSLHandler;
SSLHandler.SSLOptions.Method := sslvTLSV1;
SMTP.UseTLS := utUseImplicitTLS;
SMTP.Connect; 
```

知道为什么吗？

# jquery - 用 jQuery 更新 HTML 表格行数据？

> ID：11297296
> 
> 赞同：0
> 
> 时间：2012-07-02T16:09:02.480
> 
> 标签：jquery

我花了一个小时的大部分时间阅读各种文档——其中一些我解释为“它无法完成”，而另一些则暗示它可以。

我有一个最初填充的简单的 HTML 表。在每一行中，我想要一个“更新”链接，它会触发 Web 服务查询并返回与该行相关的更新数据。

现在，我知道我可以使用 .load 来更新特定的“项目”（即价格），但是我需要能够返回一些位 - 上次更新、状态等。

到目前为止，我已经掌握了这一点，并且我拥有的代码（如下）可以在返回数据的程度上起作用 - 但不是在正确的位置，也没有格式化（如果我最后一小时的研究是正确的，那就是因为 .load 不能返回 html）。

我的问题是 - 有没有办法简单地修改我必须完成的工作，或者有没有更好的方法来实现它？目前，“外部”文件处理 Web 服务请求，更新数据库，然后从数据库返回数据。

理论上，我可以触发多个 .load 请求，但我必须多次查询 Web 服务（效率低下）或延迟某些元素，以便它们获得“发布 Web 服务”数据。我相信一定有更好的方法！

下面的现有代码...

```
<!--- The Table --->
<tbody>
<div id="prices">
<cfoutput query="getprices">
<tr>
    <td>#merchant_name#</td>
    <td>#price#</td>
    <td><a href="#deeplink#">Link</a></td>
    <td>#last_checked,Now())#</td>
    <td>#updateflag#</td>
    <td><a href="##" onclick="$('#prices').load('/tasks/prices_update.cfm?pid=#getproduct.ID#');">Update</a></td>
</tr>
</cfoutput>
</div>
</tbody> 
```

# android - 手动暂停和恢复的下载管理器

> ID：11297298
> 
> 赞同：5
> 
> 时间：2012-07-02T16:09:11.277
> 
> 标签：android, download-manager

我需要使用暂停和恢复机制来实现下载管理器。

下载大型视频文件或任何其他类型需要此管理器。

我考虑过使用 Android 的 DownloadManager，但据我所知，DownloadManager 不支持用户手动暂停和恢复。

除了自己编写这个组件之外，我还有哪些其他 Android 内置选项？或者也许有人知道如何使用 DownloadManager 手动暂停和恢复？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:18:42.760

您必须自己实现它，记住服务器需要支持恢复。当服务器这样做时，可以向它发送一个请求参数，以告诉它从哪里恢复发送数据。

有关如何实现此功能的示例，请参阅以下 SO 问题。

[在java中恢复http文件下载](https://stackoverflow.com/questions/6237079/resume-http-file-download-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T05:30:20.103

看看[这个开源](https://github.com/yingyixu/android-download-manager)，他们声称已经实现了暂停/恢复，虽然还没有测试过。

# excel - 根据匹配值将相应值从一张纸复制到另一张纸

> ID：11297301
> 
> 赞同：1
> 
> 时间：2012-07-02T16:09:19.677
> 
> 标签：excel, vba

我一直在互联网上寻找解决方案，但我无法找到它。大多数答案都以某种方式引用了解决方案，而且我认为我对 Advanced V.Basic 的了解不足使我无法找到解决方案。

我有一个包含 Sheet1 和 Sheet2 的 Excel 文件。Sheet1:ColumnA 包含零件编号列表，Sheet2:ColumnA 包含相似但更多的零件编号，Sheet2:ColumnB 包含相关零件编号的描述/标题。目标是在“Sheet2:ColumnA”中搜索“Sheet1:ColumnA.Value”，如果找到，将描述（Sheet2:ColumnB）复制到“Sheet1:ColumnB”。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:15:48.950

Use `VLOOKUP` in a formula (tutorial is [here](http://www.techonthenet.com/excel/formulas/vlookup.php))

# ruby-on-rails - 是否可以动态更改 Rails 中的 cache_classes 配置设置？

> ID：11297307
> 
> 赞同：1
> 
> 时间：2012-07-02T16:09:31.453
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个小的交互式脚本可以用我的 Rails 应用程序做很多事情。通常我会在禁用 cache_classes 配置选项的情况下运行它，这样我就可以修改和重新加载视图而无需重新启动它，但是某些测试只能在启用 cache_classes 的情况下工作。特别是当 cache_classes 被禁用时，集成测试表现出非常奇怪的行为。

理想情况下，我想做的是能够在脚本中打开和关闭 cache_classes 而无需重新启动脚本，但是虽然我可以更新这个变量的值，但它没有任何效果。

有谁知道动态更新 cache_classes 的方法？

或者，如果有一种方法可以在 cache_classes 开启时告诉 rails 视图更改，那会更好，因为我可以永久保持 cache_classes 开启。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:42:34.807

为了其他可能遇到此问题的人的利益，有一种相对直接的方法可以使用自定义方法来确定是否应缓存视图。

首先我们需要重写 ActionView::Resolver 类中的一个方法，如下所示

```
module ActionView
  class Resolver
    def caching?
      @caching = some_custom_method
    end
  end
end 
```

然后我们可以使用我们的自定义方法根据我们想要的任何标准打开和关闭视图缓存。

我发布了这篇文章，希望通过 Rails 源代码为其他人节省大量时间，但有一些警告：

a) 我只在 Rails 3.0.14 上检查过这个，因为这是现在适用于我的当前版本。它可能适用于其他版本，也可能不适用于其他版本。

b）如果你在这里放一个慢的方法，你绝对会扼杀你的性能，因为这个方法会在每个请求中被调用很多次。我很高兴这样做，因为在我的情况下，该代码仅在我的本地测试环境中使用，并且我必须在需要时明确包含它，但就个人而言，我可能没有胆量/胃来放置类似的东西这在生产代码中。

希望这可以帮助某人。

# c# - 线程之间的通信而不杀死线程

> ID：11297310
> 
> 赞同：1
> 
> 时间：2012-07-02T16:09:39.537
> 
> 标签：c#, .net, wpf, multithreading

我正在创建一个 WPF 应用程序，在该应用程序中我需要一个线程，该线程应该不断地从文件夹中读取空文件（文件名包含 pid 和进程名称以及唯一的计划名称），并且应该检查具有相同进程名称的 pid存在于系统中不不存在。

如果线程发现任何已崩溃且系统中不存在的进程，它应该将计划名称发送到主 UI 线程而不退出并继续其工作。

我已经实现了 1 部分。但不知道如何实现 2 部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:11:28.543

“发送到主线程”通常意味着使用主线程的 Dispatcher，并调用`Invoke`或`BeginInvoke`编组将在主 (UI) 线程上运行的委托。

您可以根据需要使用它将“计划名称”添加回主线程上的集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:29:42.053

I would do this by creating a shared collection that contains the crashed process details. I would then create a UI timer that at set intervals polled the collection to see what was in it. This scheme would obviously need some kind of lock (probably a ReaderWriterLock) to prevent faulty reads from the collection.

# java - JOOX 命名空间支持

> ID：11297311
> 
> 赞同：0
> 
> 时间：2012-07-02T16:09:39.847
> 
> 标签：java, xml, xpath, namespaces, joox

我正在尝试对一些包含名称空间的 XML 运行一些 xpath 查询。不幸的是，它给了我一个相当可怕的错误消息，因为它不理解 xpath 查询或 XML 中的命名空间。

一个示例 xpath 查询是：`//b:menuBarItem[@label='Risk']/@id`

我可以在[JOOX (1.1.0)](http://code.google.com/p/joox/)中配置命名空间吗，就像我在这里使用内置的 java 库完成它的方式一样？

```
 private static NamespaceContext createXPathNameSpaceContext( final Map<String, String> namespaces ) {
    NamespaceContext nsContext = new NamespaceContext() {
      public Iterator<String> getPrefixes( String namespaceURI ) {
        return null;
      }
      public String getPrefix( String namespaceURI ) {
        return null;
      }
      public String getNamespaceURI( String prefix ) {
        if ( namespaces.containsKey( prefix ) ) {
          return namespaces.get( prefix );
        } else {
          return XMLConstants.NULL_NS_URI;
        }
      }
    };
    return nsContext;
  } 
```

我正在使用以下代码调用 JOOX。

```
import static org.joox.JOOX.$;

private void extractResponseData( Document responseXML, String xpath ) {
  String match = $( responseXML ).xpath( xpath ).get( 0 ).getNodeValue();
  // .. etc..
} 
```

显而易见的事情是我没有注册命名空间，但我不知道如何注册。我怀疑我是相当短视的，并且忽略了 API 中的某些内容。我从 JOOX 获得的堆栈跟踪如下。

```
java.lang.RuntimeException: javax.xml.xpath.XPathExpressionException
    at org.joox.Impl.xpath(Impl.java:494)
    at org.joox.Impl.xpath(Impl.java:467)
    at org.joox.Impl.xpath(Impl.java:93)
    at end2end.http.HttpAction$XML.extractResponseData(HttpAction.java:181)
    at end2end.http.XMLPostAction.extractResponseData(XMLPostAction.java:26)
    at end2end.http.HttpAction.perform(HttpAction.java:58)
    at end2end.TestXML$UserAction.fire(TestXML.java:176)
    at end2end.TestXML$FireAction.fire(TestXML.java:148)
    at end2end.TestXML.multipleUsers(TestXML.java:119)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:702)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:894)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1219)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:336)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:65)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:88)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1198)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1122)
    at org.testng.TestNG.run(TestNG.java:1030)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:215)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175)
Caused by: javax.xml.xpath.XPathExpressionException
    at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.compile(XPathImpl.java:402)
    at org.joox.Impl.xpath(Impl.java:486)
    at org.joox.Impl.xpath(Impl.java:467)
    at org.joox.Impl.xpath(Impl.java:93)
    at end2end.http.HttpAction$XML.extractResponseData(HttpAction.java:181)
    at end2end.http.XMLPostAction.extractResponseData(XMLPostAction.java:27)
    at end2end.http.HttpAction.perform(HttpAction.java:58)
    at end2end.TestXML$UserAction.fire(TestXML.java:176)
    at end2end.TestXML$FireAction.fire(TestXML.java:148)
    at end2end.TestXML.multipleUsers(TestXML.java:120)
    ... 24 more
Caused by: com.sun.org.apache.xpath.internal.domapi.XPathStylesheetDOM3Exception: Prefix must resolve to a namespace: 
    at com.sun.org.apache.xpath.internal.compiler.XPathParser.errorForDOM3(XPathParser.java:653)
    at com.sun.org.apache.xpath.internal.compiler.Lexer.mapNSTokens(Lexer.java:638)
    at com.sun.org.apache.xpath.internal.compiler.Lexer.tokenize(Lexer.java:265)
    at com.sun.org.apache.xpath.internal.compiler.Lexer.tokenize(Lexer.java:96)
    at com.sun.org.apache.xpath.internal.compiler.XPathParser.initXPath(XPathParser.java:110)
    at com.sun.org.apache.xpath.internal.XPath.<init>(XPath.java:176)
    at com.sun.org.apache.xpath.internal.XPath.<init>(XPath.java:264)
    at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.compile(XPathImpl.java:394)
    at org.joox.Impl.xpath(Impl.java:486)
    at org.joox.Impl.xpath(Impl.java:467)
    at org.joox.Impl.xpath(Impl.java:93)
    at end2end.http.HttpAction$XML.extractResponseData(HttpAction.java:181)
    at end2end.http.XMLPostAction.extractResponseData(XMLPostAction.java:26)
    at end2end.http.HttpAction.perform(HttpAction.java:58)
    at end2end.TestXML$UserAction.fire(TestXML.java:176)
    at end2end.TestXML$FireAction.fire(TestXML.java:148)
    at end2end.TestXML.multipleUsers(TestXML.java:119)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:702)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:894)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1219)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:87)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1197)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1122)
    at org.testng.TestNG.run(TestNG.java:1030)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    ... 1 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:26:54.427

jOOX 还不支持 XML 命名空间。此处有关于此主题的待处理功能请求：

[http://code.google.com/p/joox/issues/detail?id=9](http://code.google.com/p/joox/issues/detail?id=9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T12:45:48.683

jOOX 目前支持 XML 命名空间（从 1.2.0 开始），但它的 xpath 方法只允许匹配元素。所以这会起作用：

```
$(document).namespace("b", "http://test").xpath("//b:menuBarItem[@label='Risk']") 
```

但这不会：

```
$(document).namespace("b", "http://test").xpath("//b:menuBarItem[@label='Risk'/@id]") 
```

因为它会匹配属性。

# php - Oracle SQL 和 PHP 搜索范围

> ID：11297312
> 
> 赞同：1
> 
> 时间：2012-07-02T16:09:41.523
> 
> 标签：php, html, sql

我正在构建字典，并希望限制用户可以获得的结果数量。在我的 HTML 页面中，我有一组单选按钮，用于定义用户可以限制搜索的范围。1 = 简单，2 = 简单，3 = 中等，4 = 困难，7 = 全部。这是由附加到条目的数据库值定义的，难度。我正在尝试使用以下代码限制搜索，但它没有返回任何结果。$search_limit 是单选值。

```
if(strcmp($search_limit, '1'))
        {
            $sql .= ') and (Difficulty is null or Difficulty = 1) and          rownum<=500' . $search_order;
        }
    elseif (strcmp($search_limit, '2')) 
    {
            $sql .= ') and (Difficulty  >= 1 or Difficulty <= 3) and     rownum<=500' . $search_order;
        }
        elseif (strcmp($search_limit, '3')) 
        {
            $sql .= ') and (Difficulty  >= 4 or Difficulty <= 6) and     rownum<=500' . $search_order;
        }
        else
        {
            $sql .= ') and (Difficulty <= 7) or rownum<=500' . $search_order;
        } 
```

我遇到的问题是（难度> = x或难度<= x）。如果我将搜索限制默认为 else 语句，它将正确返回难度为 7（最大值）及以下的所有内容。同样，如果我将 else 语句中的 7 替换为 7 以下的任何其他数字，它也可以正常工作。我只是无法让定义的搜索工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:18:44.337

> 难度 >= 1 或难度 <= 3

总是如此（除非 Difficulty 为空）：每个数字都大于 1 或小于 3。

你一定是说

```
Difficulty >= 1 AND Difficulty <= 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:21:31.533

搜索范围时，您应该使用`x >= y AND x <= z`... 否则，如果您使用`OR`，您将返回所有内容。

所以换...

```
Difficulty >= 1 or Difficulty <= 3 
```

到...

```
Difficulty >= 1 and Difficulty <= 3 
```

此外，您`else`有不同的逻辑，就像`or rownum<=500`所有其他人都有`and rownum<=500`

# jquery - Node.JS：如何检查 jQuery 是否已加载

> ID：11297313
> 
> 赞同：2
> 
> 时间：2012-07-02T16:09:48.747
> 
> 标签：jquery, node.js, npm

我用过`npm install jquery`，我把这段代码放在我的`server.js`里面来检查 jQuery 是否存在：

```
io.sockets.on('connection', function(socket) {

    console.log("Connection " + socket.id + " accepted.");

    // Check if jQuery is loaded
    if (jQuery) {  
        console.log("jQuery loaded!");
    }
    if (typeof jQuery == 'undefined') {  
        console.log('jQuery has not been loaded!');  
    }

}); 
```

当我跑步时`server.js`，我得到了`ReferenceError: jQuery is not defined`。

有没有更好的方法来检查是否加载了 jQuery，或者这条消息是否意味着我没有成功安装 jQuery？

**编辑：**

***客户端.html***

```
<body>

<script>
    function send() {
        var user_message = $("#message_box").val();
        socket.send(user_message);
    };
</script>

<input id="message_box" type="text" placeholder="Message" />
<button id="sender" onClick='send()'/>Send Message</button>

</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T16:15:37.067

那不是网络浏览器，您应该自己使用`require`jQuery 模块并定义`jQuery`变量（就像使用 SocketIO 一样）。

```
var jQuery = require('jQuery') 
```

结帐[文档](https://github.com/coolaj86/node-jquery)以获取详细信息。

* * *

**更新**

关于问题更新。

您不需要`npm install jquery`使库在您的 HTML 页面中工作（因为其中的 javascript 将在用户的浏览器中执行，而不是在节点中执行）。您需要做的是在您的 HTML 文档中包含远程脚本，如下所示：

```
<html>
  <head>
    <!-- Embedd jQuery into HTML page to make it available in browser -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
      // So, browser now knows about jQuery, but don't know about anything in <body>
      // We should wait, untill page will be fully loaded, and only then
      // read html input values, initiate connections, etc.
      $(function() {
        // this code will be executed after DOM is ready
        send();
      });

      // here is your send function
      function send() {
        var user_message = $("#message_box").val();
        socket.send(user_message);
      };
    </script>

  </head>
<!-- ... --> 
```

IMO，您真的应该阅读一些有关客户端 javascript 编程的教程（使用或不使用 jQuery — 并不重要）。然后，查看一些关于使用 Node 作为站点后端的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:12:06.497

您正在查看变量 JQuery 是否存在，在您的代码中，您尚未定义变量 JQuery。JQuery 不是变量，因此它不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:13:15.343

您可以尝试检查 window.jQuery，该窗口应该存在，因此您应该得到 undefined 。

我实际上会设置其他东西，尽管可能像

```
$(function () {
  Console.log( 'jQuery loaded');
}); 
```

然后，您可以根据需要在服务器上对其进行响应。

我对 socket.io 不是很熟悉，所以我怀疑可能有更好的方法，但这至少可以为您提供所需的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:04:37.723

如果我正确理解了这个问题，那么您只是想确保在加载 jQuery 并在浏览器上准备好之前，您不会将 socket.io 数据发送到 Web 浏览**器**吗？如果是这种情况，那么您所要做的就是在 html 中像往常一样添加引用 jQuery 的脚本标记，然后在`$(document).ready`. 类似于以下内容：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="socket.io/socket.io.js"></script>
<script>
    $(document).ready(function() {
        var socket = io.connect('http://localhost');
        socket.on('news', function (data) {
            $('#news').append(data);
        });
    });
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T16:16:07.363

Using `typeof jQuery == 'undefined'` will not crash if `jQuery` is undefined, so you could just use something like this :

```
if (typeof jQuery == 'undefined') {  
    console.log('jQuery has not been loaded!');  
}
else {
    console.log('jQuery loaded!');
} 
```

# z3 - Z3 中的位向量 VS 整数

> ID：11297314
> 
> 赞同：2
> 
> 时间：2012-07-02T16:09:54.607
> 
> 标签：z3

我使用定点 phi(Real,Real, Int,Int,Int,Int) 实现了一个 z3，并在定点中添加了一些规则。它给了我一个答案，但是，当我将 Int 类型更改为 BitVector 类型时，它无法解决问题，最后“超时”。我曾认为使用 bitvector 而不是 int 会更快，但是，这是不正确的，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:27:57.407

我猜你正在使用 DL_ENGINE=1。这会调用 PDR 引擎，该引擎目前仅适用于纯布尔变量和线性实数算术（通常也适用于线性整数算术）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T15:04:01.417

DL_ENGINE=0 调用自下而上的数据记录引擎。它使用有限表，因此它处理表域中的位向量和布尔值。
当前的两个选项是：

```
DL_ENGINE=0: use a Datalog engine for saturation. It works for finite domains.
DL_ENGINE=1: use a PDR engine. 
```

[http://rise4fun.com/z3py/tutorial/fixedpoints](http://rise4fun.com/z3py/tutorial/fixedpoints)上的教程 说明了使用这两个选项的示例。

# php - 在 PHP 中使用带有 cURL 的 try/catch

> ID：11297320
> 
> 赞同：14
> 
> 时间：2012-07-02T16:10:26.920
> 
> 标签：php, curl

我以为我已经解决了这个问题，但我显然没有，并且希望有人能够阐明我做错了什么。我正在尝试获取一段 PHP 代码来检查服务器上的文件并根据响应执行操作。该文件是一个简单的文本文件，上面写有“真”或“假”字样。如果文件存在或返回为“真”，则脚本转到一个 url。如果它不存在（即服务器不可用）或返回为“false”，则脚本转到第二个 url。以下是我到目前为止使用的代码片段。

```
$options[CURLOPT_URL] = 'https://[domain]/test.htm';

$options[CURLOPT_PORT] = 443;
$options[CURLOPT_FRESH_CONNECT] = true;
$options[CURLOPT_FOLLOWLOCATION] = false;
$options[CURLOPT_FAILONERROR] = true;
$options[CURLOPT_RETURNTRANSFER] = true;
$options[CURLOPT_TIMEOUT] = 10;

// Preset $response var to false and output
$fb = "";
$response = "false";
echo '<p class="response1">'.$response.'</p>';

try {
    $curl = curl_init();
    echo curl_setopt_array($curl, $options);
    // If curl request returns a value, I set it to the var here. 
    // If the file isn't found (server offline), the try/catch fails and var should stay as false.
    $fb = curl_exec($curl);
    curl_close($curl);
}
catch(Exception $e){
    throw new Exception("Invalid URL",0,$e);
}

if($fb == "true" || $fb == "false") {
    echo '<p class="response2">'.$fb.'</p>';
    $response = $fb;
}

// If cURL was successful, $response should now be true, otherwise it will have stayed false.
echo '<p class="response3">'.$response.'</p>'; 
```

这里的这个例子，只经过文件测试的处理。“test.htm”的内容是“true”或“false”。

这似乎是一种复杂的方法，但文件位于第三方服务器上（我无法控制）并且需要检查，因为第三方供应商可能决定强制故障转移到第二个 url，而对第一个 url 进行维护工作。因此，为什么我不能只检查文件是否存在。

我已经在本地设置上进行了测试，并且一切都按预期运行。当文件不存在时，就会出现问题。$fb = curl_exec($curl); 不会失败，它只是返回一个空值。我曾认为，由于这是在 IIS PHP 服务器上，问题可能与服务器上的 PHP 相关，但我现在在本地（在 Unix 系统上）看到了这个问题。

如果有人能阐明我可能做错了什么，我将不胜感激。测试这个文件可能还有更短的方法，我可能会走很长的路来做这个，所以非常感谢任何帮助。

吨

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-02T16:21:27.103

cURL 不会抛出异常，它是它绑定到的 C 库的薄包装器。

我已经修改了您的示例以使用更正确的模式。

```
$options[CURLOPT_URL] = 'https://[domain]/test.htm';

$options[CURLOPT_PORT] = 443;
$options[CURLOPT_FRESH_CONNECT] = true;
$options[CURLOPT_FOLLOWLOCATION] = false;
$options[CURLOPT_FAILONERROR] = true;
$options[CURLOPT_RETURNTRANSFER] = true; // curl_exec will not return true if you use this, it will instead return the request body
$options[CURLOPT_TIMEOUT] = 10;

// Preset $response var to false and output
$fb = "";
$response = false;// don't quote booleans
echo '<p class="response1">'.$response.'</p>';

$curl = curl_init();
curl_setopt_array($curl, $options);
// If curl request returns a value, I set it to the var here. 
// If the file isn't found (server offline), the try/catch fails and var should stay as false.
$fb = curl_exec($curl);
curl_close($curl);

if($fb !== false) {
    echo '<p class="response2">'.$fb.'</p>';
    $response = $fb;
}

// If cURL was successful, $response should now be true, otherwise it will have stayed false.
echo '<p class="response3">'.$response.'</p>'; 
```

# jquery - 即使我给出错误的用户/密码，jQuery ajax 错误总是“超时”

> ID：11297331
> 
> 赞同：1
> 
> 时间：2012-07-02T16:10:54.987
> 
> 标签：jquery

我正在使用 jQuery ajax 方法调用 SOAP Web 服务。如果没有问题，它可以正常工作，但现在我正在做一些测试，例如提供错误的用户名/密码并且我收到的错误不是预期的 401：未经授权。调用一直等到超时，然后返回超时错误...

我在 SOAPUI 上尝试了使用错误凭据的 Web 服务，并收到未经授权的即时错误消息。我的javascript调用如下：

```
$.ajax({
    url : soapURL,
    type : 'POST',
    username : settings.get('user'),
    password : settings.get('pwd'),
    timeout : '30000',
    dataType : 'xml',
    data : soapReq,
    success : soapSuccess,
    error : soapError,
    contentType : 'text/xml; charset=\"utf-8\"',
    beforeSend : function() {
        $('#loader').show();
    },
    complete : function() {
        $('#loader').hide();
    }
}); 
```

这里是错误回调函数：

```
function soapError(jqXHR, textStatus, errorThrown) {
alert('Ajax error: ' + textStatus);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:06:32.973

我对这个问题做了更多的研究。有很多人在使用基本身份验证 + phonegap 进行跨域调用的 AJAX 调用时遇到问题，我没有找到完美的解决方案来解决这个问题。

但是多亏了这个[google groups post](https://groups.google.com/forum/?hl=es&fromgroups#!searchin/phonegap/401/phonegap/HkS-8QG-A40/SJkRDlIuUhMJ)，至少我发现通过对任何服务的同步调用，我可以验证用户和密码并在此之后继续使用异步。

另一种可能的解决方案是在 401 错误后更改服务器响应，但我不允许修改它。

# javascript - 在 Javascript 中呈现时取消编码服务器端字符串

> ID：11297332
> 
> 赞同：0
> 
> 时间：2012-07-02T16:10:55.323
> 
> 标签：javascript, razor

我正在从我的控制器返回一个显示网格的模型。工作正常。我还需要使用相同的数据在谷歌地图上生成点。我在需要替换的原型中设置了以下代码：

```
 var locationsAll = [
                ["Pretty", 40.1508, -83.21],
                ["Little", 40.1308, -83.11],
                ["Smug", 40.001, -83.01],
                ["Troublemaker", 40.109, -83.291],
                ["Smallest", 40.08, -83.20]
                ];

            PlotpointsonMap(locationsAll); 
```

到现在为止还挺好。这有效，所以我将其转换为 javascript，如下所示：

```
 @{
                    var locations = "[";
                   foreach (var gmap in Model.MapPoints )
                   {
                       locations += "['" + gmap.EventStringData + "'," + gmap.Latitude + "," + gmap.Longitude + "],";
                   }

                    locations = locations.TrimEnd(',') + "]";

                }

            var myLocations = @locations;
            PlotpointsonMap(myLocations); 
```

但是，这一半有效。当我查看生成的源代码时，我的 javascript 块中出现以下代码：

```
var myLocations = [[&quot;update&quot;,40.080398,-83.139141] 
```

我需要它像这样渲染：

```
var myLocations = [["update",40.080398,-83.139141] 
```

任何关于如何实现这一点的想法都非常感谢。我试过：

```
var myLocations = @Server.HtmlDecode(locations); 
```

它给了我同样的结果:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:21:26.073

呜呜，不！**请不要手动操作 JSON**。请不要逗号，不要引号，不要修剪，不要括号。那颗心。

只需使用 JSON 解析器：

```
<script type="text/javascript">
    var locationsAll = @Html.Raw(Json.Encode(
        Model.MapPoints.Select(x => new object[] 
        { 
            x.EventStringData, x.Latitude, x.Longitude 
        })
    ));
    PlotpointsonMap(locationsAll);
</script> 
```

JSON 解析器现在向您保证，无论您在其中拥有什么数据，`MapPoints`它都将始终被正确编码。

# objective-c - 如何使用局部变量初始化对象

> ID：11297336
> 
> 赞同：0
> 
> 时间：2012-07-02T16:11:05.667
> 
> 标签：objective-c, ios

这是一个非常基本的问题。当我像这样初始化一个对象时......

```
UIView *view;
if (!view) {
    view = [[UIView alloc] init];
}
// Do something with view 
```

我没有收到编译器错误，但我注意到 Xcode 并没有`UIView`像往常那样突出显示。我是否使用不良做法进行初始化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:16:22.217

我看到该代码有两个问题：

1.  Objective-C 不保证局部变量的初始化，所以`view`可能是 0、指向其他东西的指针或垃圾值。
2.  即使 Objecitve-C 确实为您初始化了变量，在声明后立即测试它的值也没有多大意义。

您实际上是在其他地方将其声明为实例变量吗？

至于突出显示，哪个“UIView”没有突出显示？两个都？我会尝试重新加载文件或重新启动 Xcode。

要解决我命名的两个问题，请将其替换为以下代码：

```
UIView *view = [[UIView alloc] init]; 
```

这引发了另一个问题：在 ARC 下，当变量超出范围时，您新分配的视图将被释放，除非您将其存储在实例变量中或框架（例如 superview）将其存储在其他地方。

如果您使用手动保留释放而不是 ARC，则每次调用该方法时都会泄漏 UIView。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:16:06.677

你不会声明一个本地变量然后检查它是否为 nil - 没有意义。

另一方面，如果它是一个属性，那么是的，惰性实例化：

```
if (!myView) {
    myView = [[UIView alloc] init];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:16:12.500

请让第一行和第二行之间有一些代码。因为如果不是，您正在读取未初始化的局部变量的值，这是未定义的行为。这意味着 - 它可能纯粹是偶然的非零。

如果 view 是 ivar，那就不同了。这些在实例构造时被初始化为零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T16:13:05.310

是的，这是一个很好的方法。如果你愿意，你可以把 if 语句放在一个叫做 view 的方法中，让它自己返回；这被称为惰性实例化，非常普遍和被接受。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T16:16:52.057

事实上，这很混乱，没有真正的意义。为什么要在分配局部变量之前检查它？如果这被更改并且这实际上是一种延迟加载实例变量或属性的方法，那么是的，这是一个好方法。如果这只是一个普通变量，那么它充其量只是噪音，最坏的情况是您创建了一个悬空指针。

# javascript - 当 450Mhz 机器有 1000 多个元素时，jquery 选择器很慢

> ID：11297339
> 
> 赞同：1
> 
> 时间：2012-07-02T16:11:22.927
> 
> 标签：javascript, jquery

我得到了这样的东西，其中包含大约 1000 个 dom 元素

```
 <table id="tableId">
    <tr class="selected"><td>Text 1</td></tr>
    <tr><td>Text 2</td></tr>
    ...
    <tr><td>Text 500</td></tr>
  </table> 
```

问题是我需要做这样的事情：

```
y = new selected tr;
$("#tableId").find("tr").removeClass("selected").eq(y).addClass("selected"); 
```

这里的问题是选择器本身需要大约 600 毫秒来处理，这对于我们正在做的事情来说有点太长了。

我使用的机器使用浏览器**opera10**，在linux上运行只有**450Mhz**！
你们认为问题出在机器那么慢吗？

有没有办法改进选择器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:58:00.867

我不确定是否有一个好的答案。您需要尝试几件事并比较基准。这是我的两分钱（再次）：

```
$("#tableId").children("tr").removeClass("selected").eq(400).addClass("selected"); 
```

请注意，`.find`递归地沿着节点向下移动，其中 as`.children`仅查看紧接在指定项目下方的元素。匹配的元素至少会减少 50%。

# [jsperf](http://jsperf.com/speed-selectors-999/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:14:03.133

您可以使用以下方法改进脚本：

```
$("#tableId tr").removeClass("selected").eq(y).addClass("selected"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:17:10.437

我会告诉你如何通过编程逻辑来做到这一点：

*   存储对“选定元素”的引用
*   取消选择它
*   选择新的

通过存储当前选定的元素，您无需遍历大量 tr 元素即可找到选定的元素。

也许对您来说更简单的选择是为当前选择的选项提供“currentlySelectedTr”的 id。id 查找确实由 Web 浏览器优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T16:13:54.187

您应该像这样缓存选择器：

```
var myTableRow = $('#tableId').find('tr'); 
```

然后为了切换一个类，你可以这样做：

```
myTableRow.toggleClass('selected'); 
```

- 编辑 -

我首先像这样创建了缓存选择器：

```
var myTableRow = $('#tableId tr'); 
```

然而，在阅读了 Scott Kosman 的这篇 24ways[文章](http://24ways.org/2011/your-jquery-now-with-less-suck)后，我了解到[.find()](http://api.jquery.com/find/)方法更快。

# django - 如何在 django-crispy-forms 的两列布局上传播表单字段？

> ID：11297348
> 
> 赞同：2
> 
> 时间：2012-07-02T16:11:42.000
> 
> 标签：django, twitter-bootstrap, django-crispy-forms

我收到了一些使用 django-crispy-forms 在 Django 中创建表单的建议。

我一直在寻找文档几个小时，但无法弄清楚如何将表单字段分布在两列中。

[在这里](https://gist.github.com/1838193#file_forms.py)看这个例子

```
 helper = FormHelper()
        helper.form_class = 'form-horizontal'
        helper.layout = Layout(
            Field('text_input', css_class='input-xlarge'),
            Field('textarea', rows="3", css_class='input-xlarge'),
            'radio_buttons',
            ...
        ) 
```

我可以看到如何设置出现的顺序。但是布局还是和平原没什么两样`{{ form.as_p }}`。我希望我在这里遗漏了一些东西，否则使用这个附加组件几乎没有用处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:47:00.387

确保包含引导 css 文件，将应用程序添加到`INSTALLED_APPS`.

然后你必须`{% load crispy_forms_tags %}`在你的模板中包含 django-crispy-forms 标签，最后`{% crispy form %}`像示例中那样做。您链接的示例中显示的所有内容。这应该产生一个水平的形式。

没有什么接近的`as_p`，这是一个可自定义的布局，无需编写模板，非常容易出错。[这些幻灯片](https://speakerdeck.com/u/maraujop/p/django-crispy-forms)可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T05:08:15.563

我只是`django-crispy-forms`简单地使用过，并没有将它与表单助手一起使用。下面是使用 mako-templates 编写的，但您应该能够轻松地将其转换为 django 模板。

```
<form class="form-horizontal">
    <fieldset>
    %if form.non_field_errors():
        <div class='alert alert-error'>${form.non_field_errors()}</div>
    %endif
        ${form.as_crispy}
    <div class="form-actions">
        <button type="submit" class="btn btn-primary" id="some-id"> 
            Find
        </button>
        <button type="reset" class="btn" id="clear-filter">
            Clear
        </button>
    </div>
    </fieldset>
</form> 
```

这使用字段集呈现表单，这几乎是使用 twitter-bootstrap 呈现表单的默认方式。如果默认渲染不适合您，请仅使用助手（我认为..）。我没有

# java - 单个 mangedQuery 扫描多个文件夹中的音频文件

> ID：11297350
> 
> 赞同：1
> 
> 时间：2012-07-02T16:11:57.697
> 
> 标签：java, android, sqlite

我有一个 ArrayList 包含文件夹名称，其中包含歌曲：

```
private ArrayList<String> searchableDir = new ArrayList<String>();
searchableDir.add("/mnt/sdcard/Tracks/U2/");
searchableDir.add("/mnt/sdcard/Tracks/Coldplay/"); 
```

现在我想运行一个托管查询，该查询将从这两个文件夹中获取歌曲。目前我一次只能获取一个文件夹：

```
String abc = "/mnt/sdcard/Tracks/U2/";
cursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            projection, MediaStore.Audio.Media.DATA + " LIKE \""
            + abc + "%\"", null, MediaStore.Audio.Media.TITLE
            + " ASC"); 
```

以上查询的工作方式如下：

```
select _id from audio where _data like "/mnt/sdcard/Tracks/U2/%"; 
```

但我想制作一个托管查询，它将从 searchableDir 数组列表中的所有文件夹中获取曲目。请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:56:30.570

使用以下获取 sdcard 中可用的所有音频文件：

> 字符串[] 星 = { "*" };
> Uri allaudiosong = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
> 字符串音频选择 = MediaStore.Audio.Media.IS_MUSIC + "!= 0";
> 光标 cursor = mContext.managedQuery(allaudiosong, STAR, audioselection, null, null);

# r - 通过使用 `data.table` 避免 `foreach`：错误“将 j 中的 := 与 by 组合尚未实现”

> ID：11297351
> 
> 赞同：1
> 
> 时间：2012-07-02T16:12:00.053
> 
> 标签：r, foreach, data.table

几周前我使用库创建了一个函数`foreach`。这个函数在我的数据集中找到公司上个月的市值。由于这个数据集非常大，我试图`data.table`只使用（完全摆脱`foreach`）重写这个函数，但到目前为止我还没有成功。

这是我所拥有的：我的 data.table 对象包含（除其他列外）一列，其中包含一个整数，指定当前月份 (TM)、公司编号 (PERMNO)、该月末的市值 (MKTCAP) 和上个月 (PM) 的整数列。以下是 1962 年表格的摘要：

```
> summary(results62)
       TM             PERMNO          MKTCAP                PM        
 Min.   :196201   Min.   :10006   Min.   :      41   Min.   :196112  
 1st Qu.:196205   1st Qu.:18382   1st Qu.:   11462   1st Qu.:196204  
 Median :196208   Median :24328   Median :   37367   Median :196207  
 Mean   :196207   Mean   :24349   Mean   :  215224   Mean   :196201  
 3rd Qu.:196210   3rd Qu.:29866   3rd Qu.:  132181   3rd Qu.:196209  
 Max.   :196212   Max.   :86239   Max.   :31349066   Max.   :196211  
                                                     NA's   :25 
```

（例如，这里的 196201 表示 1962-JAN）

为了让我开始，我创建了一个新对象，其中包含公司 PERMNO = 10006 的数据

```
> data1006 <- results62[PERMNO == 10006,]
> data10006
          TM PERMNO    MKTCAP     PM
 [1,] 196201  10006 104171.00 196112
 [2,] 196202  10006 104527.75 196201
 [3,] 196203  10006  97036.00 196202
 [4,] 196204  10006 102565.62 196203
 [5,] 196205  10006  85263.25 196204
 [6,] 196206  10006  84193.00 196205
 [7,] 196207  10006  98077.50 196206
 [8,] 196208  10006  97532.62 196207
 [9,] 196209  10006  92265.50 196208
[10,] 196210  10006  98804.00 196209
[11,] 196211  10006 105887.38 196210
[12,] 196212  10006 112062.62 196211 
```

然后我创建了一个名为 LAGMKTCAP 的列，其中 NAs 作为占位符

```
> data1006[,LAGMKTCAP := NA_real_] 
```

包括我使用的每个观察值的上个月市值

```
> data1006[,LAGMKTCAP := data1006$MKTCAP[match(data1006$PM,data1006$TM)]]
          TM PERMNO    MKTCAP      PM LAGMKTCAP
 [1,] 196201  10006 104171.00  196112        NA
 [2,] 196202  10006 104527.75  196201 104171.00
 [3,] 196203  10006  97036.00  196202 104527.75
 [4,] 196204  10006 102565.62  196203  97036.00
 [5,] 196205  10006  85263.25  196204 102565.62 
 [6,] 196206  10006  84193.00  196205  85263.25 
 [7,] 196207  10006  98077.50  196206  84193.00
 [8,] 196208  10006  97532.62  196207  98077.50
 [9,] 196209  10006  92265.50  196208  97532.62
[10,] 196210  10006  98804.00  196209  92265.50
[11,] 196211  10006 105887.38  196210  98804.00
[12,] 196212  10006 112062.62  196211 105887.38 
```

这是完美的。现在我需要使用包含数千家公司的整个数据集为每家公司执行此操作。我最好的尝试是

```
> results62[,LAGMKTCAP := results62$MKTCAP[match(results62$PM,results62$TM)],by=PERMNO] 
```

但我得到了错误

> ( results62 , `[.data.table`, `:=`(LAGMKTCAP, results62$MKTCAP[match(results62$PM, : Combining := in j with by 尚未实现。请让维护者('data.table') 知道你是否对此感兴趣。

我不知道如何做到这一点，除非使用`foreach`：我可以创建一个具有唯一公司编号的向量并按如下方式迭代它：

```
conumb <- unique(results62$PERMNO)

lag.mkt.cap <- function(results62){
results62$MKTCAP[match(results62$PM,results62$TM)]
}

lagmktcap <- foreach(i=1:length(conumb),.combine=c) %do% lag.mkt.cap(results62[PERMNO == conumb[i],]) 
```

这对我之前的功能已经有了很大的改进（它需要 1/6 的时间），但我真的很想避免使用`foreach`并充分利用`data.table`. 有任何想法吗？

PS：使用这个包含 3 家公司跨越 4 个月的数据的示例数据集可能会有所帮助：

```
dataexample <- data.table(TM = c(196201L, 196202L, 196203L, 196204L, 196201L, 196202L, 196203L, 196204L, 196201L, 196202L, 196203L, 196204L), 
PERMNO = c(10006L, 10006L, 10006L, 10006L, 10014L, 10014L, 10014L, 10014L, 10030L, 10030L, 10030L, 10030L), 
MKTCAP = c(104171, 104527.75, 97036, 102565.625, 13290.75, 14499, 13693.5, 12485.25, 81600, 83232, 81600, 82416), 
PM = c(196112L, 196201L, 196202L, 196203L, 196112L, 196201L, 196202L, 196203L, 196112L, 196201L, 196202L, 196203L)) 
```

# java - Hibernate：在没有 Java 类的情况下保留 XML 值

> ID：11297356
> 
> 赞同：0
> 
> 时间：2012-07-02T16:12:21.423
> 
> 标签：java, hibernate

是否有任何休眠实用程序允许将 xml 值保留在数据库中而不将其编组到 java 类中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:34:57.747

不。虽然我可以想象 Hibernate 可以做到这一点，但它是完成任务的错误工具。Hibernate 是专门为将实体映射到数据库行而创建的。

您要么必须实现一个类似 DOM 的结构，它定义了 Hibernate 应该使用的实体，要么使用普通的 JDBC 编写导入器，或者可能创建一些您从 XML 填充的简单实体，然后使用 Hibernate 持久化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:26:45.940

我认为您使用了错误的持久性库，也许尝试使用 iBatis。

# java - jvisualvm 1.3.2 拒绝为某些本地应用程序而不是其他应用程序显示 CPU

> ID：11297361
> 
> 赞同：2
> 
> 时间：2012-07-02T16:12:35.000
> 
> 标签：java, jvisualvm

OSX 狮子，Java 1.6.0_33

目前正在运行的一个程序，在 jvisualvm 中显示 CPU

```
Overview:

Host: localhost
Main class: org.jetbrains.idea.maven.server.RemoteMavenServer
Arguments: <none>

JVM: Java HotSpot(TM) 64-Bit Server VM (20.8-b03-424, mixed mode)
Java: version 1.6.0_33, vendor Apple Inc.
Java Home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
JVM Flags: <none> 
```

另一个没有：

```
Host: localhost
Main class: com.basistech.ntt.SocialSecurityDeathMasterToDistribution
Arguments: /data/ssdm/SSDM.txt target/ssdm.dist.txt

JVM: Java HotSpot(TM) 64-Bit Server VM (20.8-b03-424, mixed mode)
Java: version 1.6.0_33, vendor Apple Inc.
Java Home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
JVM Flags: <none>

Heap dump on OOME: disabled 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:07:40.590

我不确定您是否仍有问题，但此答案可能对其他人有所帮助

我在 linux 上，并且行为与您的行为完全相同：

*   本地 jvm cpu 采样在某些 vm 上禁用，但在其他 vm 上工作（例如 jvisualvm 本身）
*   当 cpu 采样不工作时，jvisualvm 需要 5-6 分钟才能连接到 vm

在我的`/etc/hosts`文件中， 127.0.0.1 条目不包含我的主机名，所以我将其更改为：

> 127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4

至

> 127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4 **my_host_name**

（**my_host_name**：运行 cmd 时得到的内容：主机名）。

（我在阅读了第 5 点后尝试过：http: [//docs.oracle.com/javase/1.5.0/docs/guide/management/faq.html](http://docs.oracle.com/javase/1.5.0/docs/guide/management/faq.html)这不是我面临的问题，但因为我没有尝试的东西......）

在更改`/etc/hosts`命令之前：`hostname -i`返回我的 eth0 ip 地址。它回来后`127.0.0.1`

我真的不明白为什么，但它解决了我的问题。

# php - simpleXML 中的 PHP 访问数组

> ID：11297365
> 
> 赞同：1
> 
> 时间：2012-07-02T16:12:43.837
> 
> 标签：php, simplexml

我有一个返回 ID 数组的 SOAP 请求。出于某种原因，我无法访问 SimpleXML 元素中的数组。

我做了一个simplexml对象的vardump：

```
die(var_dump($POList));
object(SimpleXMLElement)#7 (1) { ["int"]=> array(10) { [0]=> string(5) "20622" [1]=> string(5) "20868" [2]=> string(5) "20880" [3]=> string(5) "20883" [4]=> string(5) "21034" [5]=> string(5) "21065" [6]=> string(5) "21136" [7]=> string(5) "21160" [8]=> string(5) "21202" [9]=> string(5) "21247" } } 
```

然后是我认为的数组的 var 转储：

```
die(var_dump($POList->int));
object(SimpleXMLElement)#8 (1) { [0]=> string(5) "20622" } 
```

我如何访问这个数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:16:30.520

`SimpleXMLElement`implements `Traversable`，所以你应该能够做到：

```
foreach( $POList->int as $el)
    echo $el; 
```

或者可能从 xpath 查询数组：

```
$array = $POList->xpath( '/int')[0];
foreach( $array as $el)
    echo $el; 
```

# php - 如何 preg_match_all() + 提取 + 替换 + 删除？

> ID：11297368
> 
> 赞同：0
> 
> 时间：2012-07-02T16:12:53.400
> 
> 标签：php, preg-replace, preg-match-all, str-replace

我对 preg_match_all 和类似的经验不是很丰富，我正在寻找一种简单的方法来执行以下操作：

考虑这段文字：

```
$string = 'This text was written on [set_stamp]1341066037[/set_stamp] and this one on [set_stamp]1340903119[/set_stamp].'; 
```

我需要做什么：

1.  获取所有标签之间的数据（此处为时间戳）`[set_stamp]`和`[/set_stamp]`
2.  将所有捕获的时间戳替换为其相应的日期，例如：`date('Y-m-d H:i:s', $timestamp)`
3.  删除所有`[set_stamp]`和`[/set_stamp]`标签

最终输出将类似于以下内容：

> “这篇文章写于 2012 年 7 月 12 日 14:26，这篇文章写于 2012 年 7 月 11 日 17:10。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:19:09.483

您可以使用`preg_replace_callback()`以下正则表达式：

```
#\[set_stamp\](.+)\[/set_stamp\]#iU 
```

示例代码：

```
$string = 'This text was written on [set_stamp]1341066037[/set_stamp] and this one on [set_stamp]1340903119[/set_stamp].';
echo preg_replace_callback('#\[set_stamp\](.+)\[/set_stamp\]#iU', function($m) {
    return date('Y-m-d H:i', $m[1]);
}, $string); 
```

该代码的输出是：

> 这篇文章写于 2012-06-30 16:20，这篇文章写于 2012-06-28 19:05。

请注意，匿名函数至少需要 PHP 5.3。如果您使用的是旧版本并且确实无法更新，只需创建一个普通函数并将其名称作为字符串传递。

# remote-desktop - 远程桌面取代其他人断开的会话

> ID：11297372
> 
> 赞同：1
> 
> 时间：2012-07-02T16:12:58.523
> 
> 标签：remote-desktop

我们在远程服务器上有一个用户帐户。当计算机 A 启动远程会话，然后断开与它的连接，并且计算机 B 启动远程连接时，计算机 B 正在连接到 A 的会话。

如何确保只有同一设备可以重新连接到其远程会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:18:37.260

如果是单个用户帐户，我认为您不能。您需要确保他们注销而不是断开连接，然后他们可以使用正确的帐户开始新会话。

请参阅[此处](https://superuser.com/questions/62178/multiple-rdp-sessions-on-a-single-computer)了解更多信息。

# ios - 睡眠命令不起作用

> ID：11297375
> 
> 赞同：0
> 
> 时间：2012-07-02T16:13:00.487
> 
> 标签：ios, ipad, sleep, segue

我的 iPad 应用程序有一个带有一些选项的模式。选择一个选项后，我想删除模态然后转到新屏幕。

我希望在新的转场发生之前看到原始屏幕（启动模态）两秒钟。为什么这段代码不起作用？

```
[self dismissModalViewControllerAnimated:YES];
sleep(2.0);
[self performSegueWithIdentifier:@"normalPushSegue" sender:self]; 
```

这就是发生的情况：当按下模式上的按钮时，它会冻结两秒钟，然后非常快速地转换到`normalPushSegue`屏幕。即使我将 sleep 命令放入 `prepareForSegue`其中，它仍然会做同样的事情。

有任何想法吗？还有其他方法可以延迟转场吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:38:32.257

改用`performSelector:afterDelay:`：

```
[self performSelector:@selector(performSegueWithIdentifier::) withObject:@"normalPushSegue" withObject:self afterDelay:2]; 
```

# c++ - GCC 4.6 和缺少可变参数模板扩展

> ID：11297376
> 
> 赞同：1
> 
> 时间：2012-07-02T16:13:04.480
> 
> 标签：c++, gcc, c++11, g++, variadic-templates

我正在使用此代码使用可变参数模板创建多个函数包装器：

```
// Compile with g++ -std=c++0x $(pkg-config sigc++-2.0 --cflags --libs) test.cpp -o test
#include <iostream>
#include <type_traits>
#include <sigc++/sigc++.h>

template <typename R, typename G, typename... Ts>
class FuncWrapper
{
public:
  FuncWrapper(G object, std::string const& name, sigc::slot<R, Ts...> function) {};
};

int main()
{
  FuncWrapper<void, int, int, bool, char> tst(0, "test", [] (int a, bool b, char c) {});

  return EXIT_SUCCESS;
} 
```

由于已知问题，此代码可以使用 clang++ 正确编译，但不能使用 g++ 编译：

> test.cpp:9:73：抱歉，未实现：无法将“Ts ...”扩展为固定长度的参数列表

我知道 gcc-4.7 应该正确处理这个问题，但我现在无法升级......所以我想有一个解决方法来`Ts...`正确解包。我已经测试了这里在类似问题中的建议[，](https://stackoverflow.com/questions/7539716/implementing-meta-function-zip-in-c11)但他们似乎并没有解决这里的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:41:07.023

您可以使用以下方法解决该错误：

```
template<template <typename...> class T, typename... Args>
struct Join
{ typedef T<Args...> type; }; 
```

然后替换`sigc::slot<R, Ts...>`为`typename Join<sigc::slot, R, Ts...>::type`

（感谢 Chris Jefferson 对[GCC 错误报告](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=35722#c12)的建议）

# extjs - 网格 - 按钮单击处理程序

> ID：11297378
> 
> 赞同：3
> 
> 时间：2012-07-02T16:13:14.967
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.1

在我的`Grid`中，当我单击 Action 按钮（下面代码中显示的删除和编辑按钮）时，我需要弹出一个窗口而不用警告消息提醒用户；

在下面的代码中，我使用 HANDLER`handler: buttonClicked`并尝试访问我从下面的不同函数中单击的行值

```
buttonClicked :function (){...} 
```

1.  我不知道该怎么做，有人可以帮我吗？

2.  我可以访问我单击的行并从`Controller`类中显示其名称吗？

* * *

**代码片段**

```
Ext.define('CountryAppTest.view.user.Gridview', {
    extend: 'Ext.grid.Panel',
    initComponent: function() {
        this.store = 'store';
        this.columns = [{
            xtype: 'ac',
            items: [{
                icon: 'lib/extjs/examples/restful/images/delete.png',
                handler: buttonClicked
            }]
        }, {
            text: "username",
            dataIndex: 'username'
        }];
        this.viewConfig = {
            forceFit: true
        };
        this.callParent(arguments);
    },
    buttonClicked: function(grid, rowIndex, colIndex) {
        var rec = grid.getStore().getAt(rowIndex);
        Ext.Msg.alert("Info", "name " + rec.get('username'));
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:30:33.433

将参数添加`(grid, rowIndex, colIndex)`到您的`buttonClicked`声明中。

# python - python 的 win32com.client.dispatch() 无法识别已注册的 COM 对象

> ID：11297381
> 
> 赞同：4
> 
> 时间：2012-07-02T16:13:29.550
> 
> 标签：python, com, win32com

我正在尝试使用 Python 加载 COM 对象。我正在使用 win32com.client.Dispatch("Name.Of.Object") 加载它，并且 COM 对象已在 regsvr32 中注册，并在我的注册表中显示为 HKLM/CLSID 和 HKLM/Wow6432Node/CLSID 中的条目. 我可以使用 VBScript 打开它，但是 Python 的 win32com.client.Dispatch() 给了我这个错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\site-packages\win32com\client\__init__.py", line 95, in Dispatch
    dispatch, userName = dynamic._GetGoodDispatchAndUserName(dispatch,userName,clsctx)
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 108, in _GetGoodDispatchAndUserName
    return (_GetGoodDispatch(IDispatch, clsctx), userName)
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 85, in _GetGoodDispatch
    IDispatch = pythoncom.CoCreateInstance(IDispatch, None, clsctx, pythoncom.IID_IDispatch)
pywintypes.com_error: (-2147221164, 'Class not registered', None, None) 
```

我读过 32 位和 64 位存在问题；我在使用 32 位 python 和 32 位 win32com 的 64 位机器上运行它。有什么建议么？

请注意，VBScript 中的这段代码可以正常工作：

```
Set obj = WScript.CreateObject( "Name.Of.Object" ) 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T13:15:03.147

通过安装 Python 64 位和 win32com 64 位解决了这个问题。

# java - 为什么 Apache HttpClient 4.2 无法检索此页面？

> ID：11297387
> 
> 赞同：0
> 
> 时间：2012-07-02T16:13:52.060
> 
> 标签：java, apache-commons-httpclient

我正在尝试使用 Apache HttpClient 检索此页面：http: [//quick-dish.tablespoon.com/](http://quick-dish.tablespoon.com/)

不幸的是，当我尝试这样做时，它只返回以下内容（由 JSoup 返回，因此可能它实际上只是返回 HTTP... 字符串本身）：

```
<html>
 <head></head>
 <body>
  HTTP/1.1 200 OK [Server: nginx/1.0.11, Content-Type: text/html;charset=UTF-8, Last-Modified: Mon, 02 Jul 2012 15:30:40 GMT, Vary: Accept-Encoding, Cookie,Accept-Encoding, X-Powered-By: PHP/5.3.6, X-Pingback: http://quick-dish.tablespoon.com/xmlrpc.php, X-Powered-By: ASP.NET, Content-Encoding: gzip, X-Blz: lb1.blaze.io, Date: Mon, 02 Jul 2012 16:06:21 GMT, Content-Length: 11723, Connection: keep-alive]
 </body>
</html> 
```

这是我的代码（请注意，我正在模拟 Google Bot，因为我发现 Web 服务器的行为往往更好）：

```
URL sourceURL = new URL("http://quick-dish.tablespoon.com/");
HttpClient httpClient =  new ContentEncodingHttpClient();
httpClient.getParams().setBooleanParameter("http.protocol.handle-redirects", true);

final HttpGet httpget = new HttpGet(sourceURL.toURI());
httpget.setHeader("User-Agent", "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)");
httpget.setHeader("Accept", "text/html");
httpget.setHeader("Accept-Charset", "utf-8");

final HttpResponse response = httpClient.execute(httpget);
return Jsoup.parse(response.toString()); 
```

不用说，该页面在我的网络浏览器中返回正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:21:25.857

您需要获取响应实体而不是 toString

```
// Get hold of the response entity
 HttpEntity entity = response.getEntity(); 
```

然后你可以得到它的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:29:43.970

```
HttpEntity entity = response.getEntity();
String pageHTML = EntityUtils.toString(entity);
Jsoup.parse(response.toString()); 
```

# pdf - 我可以在 XMP 中为 PDF 定义新属性吗？

> ID：11297389
> 
> 赞同：0
> 
> 时间：2012-07-02T16:13:55.793
> 
> 标签：pdf, xmp

我知道 XMP 中有一些用于 PDF 文件的属性，例如：

```
 <xap:ModifyDate>2009-12-10T09:54:47-05:00</xap:ModifyDate>
     <xap:CreateDate>2009-12-10T09:42:54-05:00</xap:CreateDate>
     <xap:MetadataDate>2009-12-10T09:54:47-05:00</xap:MetadataDate>
     <xap:CreatorTool>Adobe InDesign CS4 (6.0.4)</xap:CreatorTool> 
```

但我想定义自定义属性，例如：

```
 <xap:ViewTitle>2009-12-10T09:54:47-05:00</xap:ViewTitle>
     <xap:GUID>2009-12-10T09:42:54-05:00</xap:GUID> 
```

我可以做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T18:21:46.853

是的你可以。

根据 XMP 规范

> 可以将新属性添加到现有名称空间而不会“破坏”应用程序。
> 
> 现有命名空间中的属性定义应始终保持不变；否则，应用程序可能会产生不正确的行为。如果需要更改属性的含义，则应创建一个新属性（并将旧属性声明为已弃用）。

您可以创建新的自定义模式。这可能是比扩展现有模式更好的方法。

更多信息可以在 XMP 规范*中的模式扩展中找到。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:29:10.893

您可以使用 XMP 桥库来编辑 XMP。Marijan Tompa 在其博客上发表了深刻的见解：http: [//indisnip.wordpress.com/2010/09/07/storing-custom-data-into-indesign-file-xmp/](http://indisnip.wordpress.com/2010/09/07/storing-custom-data-into-indesign-file-xmp/)

# ruby-on-rails - 无法在主页显示邀请框

> ID：11297394
> 
> 赞同：0
> 
> 时间：2012-07-02T16:14:13.543
> 
> 标签：ruby-on-rails, models

我想发出测试邀请。但是我在主页上看不到邀请表。

/static_pages/home.html.erb：（很快）

```
<% if signed_in? %>
  <div class="row">
    <aside class="span2">
      <section>
                <%= render 'shared/invitation_form' %>
      </section>
    </aside>
    <div class="span6 hero-unit">       
            <ol class="topics-signedin">
            <%= render 'shared/topics' %>
            </ol>
    </div>
  </div>  
<% else %>
  <div class="row">
        <div class="span10">
            <div class="center hero-unit">
                <h2>Giripedia</h2>  
                        <ol class="topics">
                        <%= render 'shared/topics' %>
                        </ol>
                <%= link_to "Üye Olun!", signup_path, 
                                class: "btn btn-large btn-primary center" %> 
        <p>Sitemiz ş....</p>

                <% form_for Invitation.new do |f| %>
                    <p>
                        <%= f.label :recipient_email, "Emailiniz:" %>
                        <%= f.text_field :recipient_email %>
                        <%= f.submit 'Gönder' %>
                    </p>
                <% end %>
            </div>
        </div>
<% end %> 
```

耙路线：

```
new_invitation GET    /invitations/new(.:format)            invitations#new
edit_invitation GET    /invitations/:id/edit(.:format)       invitations#edit
     invitation GET    /invitations/:id(.:format)            invitations#show
                PUT    /invitations/:id(.:format)            invitations#update
                DELETE /invitations/:id(.:format)            invitations#destroy 
```

我的 static_pages_controller.rb：

```
 def home
        if signed_in?
        @topic = current_user.topics.build if signed_in?
        end
        @topics = Topic.paginate :page => params[:page], :per_page => 20
    @invitation = Invitation.new
  end 
```

还有我的_invitation_form.html.erb：

```
<% form_for @invitation do |f| %>
  <p>
    <%= f.label :recipient_email, "Arkadaşının email adresi" %><br />
    <%= f.text_field :recipient_email %>
  </p>
  <p><%= f.submit "Davet et!" %></p>
<% end %> 
```

日志显示：

```
 (0.1ms)  SELECT COUNT(*) FROM "topics" WHERE "topics"."user_id" = 1
  Rendered shared/_user_info.html.erb (2.4ms)
  Rendered shared/_error_messages.html.erb (0.4ms)
  Rendered shared/_topic_form.html.erb (2.9ms)
  Rendered shared/_invitation_form.html.erb (1.8ms)
  Topic Load (0.1ms)  SELECT "topics".* FROM "topics" ORDER BY topics.created_at DESC LIMIT 20 OFFSET 0.. 
```

但它没有显示 User.form。你知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:31:22.133

您缺少`=`_invitation_form.html.erb 中的一个。尝试：

```
<%= form_for @invitation do |f| %>
  <p>
    <%= f.label :recipient_email, "Arkadaşının email adresi" %><br />
    <%= f.text_field :recipient_email %>
  </p>
  <p><%= f.submit "Davet et!" %></p>
<% end %> 
```

同样`<% form_for ... %>`在 home.html.erb 中的行

# c# - 使用 Fluent nHibernate 将集合映射到子选择

> ID：11297395
> 
> 赞同：1
> 
> 时间：2012-07-02T16:14:14.807
> 
> 标签：c#, nhibernate, fluent-nhibernate

我有一个看起来像这样的课程：

```
public class Competitor
{
    public virtual int CompetitorId { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }

    public virtual IEnumerable<string> SportsCompeted { get; set; }
} 
```

`SportsCompeted`是这样解析的 SportID（字符串）列表：

```
SELECT DISTINCT SportID FROM results WHERE competitorId = xxx 
```

我将如何映射这样的东西？
查看 HasMany 我可以指定一个`Where`子句，但我认为这不是我在这种情况下要寻找的吗？

我正在使用 Fluent Mappings，为简洁起见省略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:37:08.160

你应该能够做到这一点`.Element()`。就像是：

```
HasMany(x => x.SportsCompeted)
    .KeyColumn("CompetitorId")
    .Element("SportID") // You can define element type as second parameter
    .Table("results"); 
```

更多信息：
[使用 NHibernate](https://stackoverflow.com/questions/606607/mapping-collection-of-strings-with-nhibernate)
[Fluent NHIbernate 自动映射 List<string>? 映射字符串集合？](https://stackoverflow.com/questions/1942001/fluent-nhibernate-automapping-of-liststring)

* * *

**编辑：**

假设你有你的`Result`和`Sport`实体：

```
public class Sport
{
    public virtual int SportId { get; set; }
    // Other properties
}

public class Result : Entity
{
    public virtual ResultId { get; set; }
    public virtual Competitor Competitor { get; set; }
    public virtual Sport Sport { get; set; }
    // Other properties
}

public class Competitor
{
    public virtual int CompetitorId { get; set; }
    public virtual IList<Result> Results { get; set; }
    // Other properties
} 
```

你`HasMany`现在看起来像这样：

```
// For this, you would need to have Result and Sport classes mapped
// This property isn't necessary for your Sports Competed query
HasMany(x => x.Results)
    .KeyColumn("CompetitorId")
    .Table("results"); 
```

然后你可以使用ie。Linq 得到你想要的结果：

```
var sports = session.Query<Result>()
    .Where(x => x.Competitor.CompetitorId = competitorId)
    .Select(x => x.Sport) // Or .Select(x => x.Sport.SportId)
    .Distinct(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:37:31.393

我最终做的是在 SQL 中创建一个视图来基本上做：

```
SELECT DISTINCT SportID, CompetitorID FROM results 
```

然后，在我的映射中：

```
HasMany(x => x.CompetitorDisciplines)
    .Not.LazyLoad()
    .Inverse()
    .AsBag()
    .KeyColumn("competitorId")
    .Element("DisciplineCode")
    .Table("vCompetitorDisciplines"); 
```

这似乎产生了预期的结果。
慢，但它只是一次（或每天一次）操作....

# javascript - 在 d3 中拖动事件的两个“调用”

> ID：11297399
> 
> 赞同：3
> 
> 时间：2012-07-02T16:14:34.530
> 
> 标签：javascript, d3.js, drag, force-layout

我在 d3 中使用强制导向布局，但在开发中遇到了一些障碍。

```
 var circle = svg.append("svg:g").selectAll("circle") 
     .data(force.nodes()) 
   .enter().append("svg:circle")   
     .attr("r", function( d ) { 
      return d.fValue; 
     }) 
     .style('fill', function( d ) { 
       return strokeColor( d.name );   
     })
     .call(force.drag); 
```

基本上，我想向 force.drag 定义的“拖动”行为添加更多事件侦听器 - 即，我想确保节点在拖动时改变颜色（而不是在鼠标悬停时）。我能想到的唯一两种方法是以某种方式更改 force.drag 函数或定义新的拖动行为。

我不知道第一种方法是怎么做的，但是当我尝试第二种方法时，方法链接只会接受第二个拖动事件，而忽略第一个 force.drag 事件。

```
.call(customDrag)
.call(force.drag); // This would work 
```

如何附加另一个拖动事件侦听器或修改现有 force.drag 以适应我要添加的新动画？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:59:32.933

定义你自己的监听器，`force.drag`只调用`force.tick()`afaik：

```
 var node_drag = d3.behavior.drag()
        .on("dragstart", dragstart)
        .on("drag", dragmove)
        .on("dragend", dragend);
  vis.selectAll("g.node").call(node_drag) 
```

那么只要确保你打电话给你`tick()`。`dragmove`

我这样做是为了通过强制布局添加拖放支持。 [请参阅我的 stackoverflow 问题和答案以获取示例](https://stackoverflow.com/questions/10899725/d3-js-force-directed-graph-with-support-for-drag-and-drop-to-make-selected-node/10919260#10919260)

# grails - Grails 瞬态属性未在对象创建时获取

> ID：11297401
> 
> 赞同：12
> 
> 时间：2012-07-02T16:14:44.763
> 
> 标签：grails, grails-domain-class, grails-2.0

从 Grails 1.3.7 迁移到 2.0.4 后，我注意到我的一个域类存在问题，我使用瞬态属性来处理密码。

我的域类看起来像这样（简化）：

```
 package test

   class User {
String email 
String password1
String password2
//ShiroUser shiroUser

static constraints = {
    email(email:true, nullable:false, unique:true)
    password1(nullable:true,size:5..30, blank: false, validator: {password, obj ->

        if(password==null && !obj.properties['id']){
          return ['no.password']
        }
        else return true
      })
    password2(nullable:true, blank: false, validator: {password, obj ->
         def password1 = obj.properties['password1']

         if(password == null && !obj.properties['id']){
          return ['no.password']
        }
        else{
          password == password1 ? true : ['invalid.matching.passwords']
        }
      })

}
static transients = ['password1','password2']
   } 
```

在 1.3.7 中，这曾经在我的 Bootstrap 中工作：

```
 def user1= new User (email: "test@test.com", password1: "123456", password2: "123456")
    user1.save() 
```

但是，在 Grails 2.0.x 中，这将导致错误提示 password1 和 password2 都为空。如果我尝试这样做，我的控制器也会发生同样的事情：

```
 def user2= new User (params)// params include email,password1 and password2 
```

为了使其工作，我必须执行以下解决方法：

```
 def user2= new User (params)// params include email,password1 and password2 
    user2.password1=params.password1
    user2.password2=params.password2
    user2.save() 
```

这很丑陋——而且很烦人。

谁能说我对瞬态的使用在 grails 2.x 中是否无效，或者这可能是某种框架错误？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-02T17:09:42.350

出于安全原因，瞬态不再自动绑定。但是您可以通过添加“可绑定”约束轻松使其工作（请参阅[http://grails.org/doc/latest/ref/Constraints/bindable.html](http://grails.org/doc/latest/ref/Constraints/bindable.html)）。改变

```
password2(nullable:true, blank: false, validator: {password, obj -> 
```

至

```
password2(bindable: true, nullable:true, blank: false, validator: {password, obj -> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T16:20:19.833

我认为作为 grails 2.x 中数据绑定改进的一部分 - 它不会绑定瞬态属性。

# php - 基于关键字的 PHP 中的 MySQL 搜索

> ID：11297402
> 
> 赞同：0
> 
> 时间：2012-07-02T16:14:47.033
> 
> 标签：php, mysql, search, search-engine

我正在用 PHP（MySQL 后端）编写原型拍卖/列表项目。

我有一个列表表 (listings) 和一个关键词表 (listings_keyphrases)，其中包含多个描述每个项目的关键词。每个列表都有多个关键词（尽可能多），但每个关键词的字符限制为 20 个字符。

因此，在 listings_keyphrases 中，一个列表可能有 6 行，每行都有不同的关键词。Listings_keyphrases 表中的关键词是有序的。

我想实现一个搜索功能：

1.  搜索与特定项目相关的所有关键词
2.  排序结果基于：
    *   短语（如果搜索短语与特定关键字完全匹配）
    *   关键词顺序（我假设如果搜索匹配位置 1 上更相关的关键词）。

我研究了 MySQL FULLTEXT 和其他一些选项，但还没有找到最好的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:37:48.317

我会尝试以下搜索引擎之一：

[http://lucene.apache.org/solr/](http://lucene.apache.org/solr/)

[http://sphinxsearch.com/](http://sphinxsearch.com/)

它们都是开源的，有据可查且易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:43:36.327

我认为您必须使用全文进行搜索，因为您给出的排序结果之一是：如果搜索短语与特定关键字完全匹配。使用全文搜索将是具有更高分数的结果。

对于您给出的第二个订单，您必须定义某种相关性（而不是全文的相关性）。当你搜索一些关键词时，mysql 不关心它是第一个还是最后一个，你必须告诉它。如果插入关键阶段的顺序很重要，您可以通过全文搜索和 ID_keyphrase 的相关性对结果进行排序（假设 ID_keyphrase 是自动数字的），或者您可以添加一个字段来指示您的相关性，或者您可以使用位置（但位置作为字段数据库）。

一个例子：

```
Keyphrase_table
-----------
ID
listing_table_id
keyphrase
relevance 
```

有了这个，你可以拥有：

```
1   1  keyphrase2  1
2   1  keyphrase1  2
3   2  keyphrase1  1 
```

id=1 的列表有 2 个关键词（keyphrase2 和 keyphrase1），id=2 的列表有 1 个关键词（keyphrase1）

如果您使用全文搜索“keyphrase1”，结果将是记录 2 和 3。所有 2 个结果都与全文具有相同的相关性，因为两者是相同的，但是如果您将新字段“相关性”作为订单添加到您的搜索中( `Order by THE_RELEVANCE_OF_FULLTEXT DESC,relevance ASC`) 记录 3 将始终是第一个，因为它满足全文的要求并且处于结果最低位置。

# c# - 如何交织两个字符串或数组，可能使用 String.Join()

> ID：11297403
> 
> 赞同：2
> 
> 时间：2012-07-02T16:14:49.050
> 
> 标签：c#, arrays, string, cartesian-product

我有以下字符串数组：

```
var myArray1 = new string[] {"A", "B", "C"};
var myArray2 = new string[] {"t1", "t2"}; 
```

我希望能够生成如下所示的最终字符串：

```
var myFinalString = "t1.A, t2.A, t1.B, t2.B, t1.C, t2.C"; 
```

我知道我可以遍历数组的每个元素并手动构建字符串。但是，我想知道是否有更好的方法。我试图弄清楚如何使`String.Join()`方法起作用，但不能:-(。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T16:18:03.293

I don't know that any direct method exists, but this one-liner

```
return 
  from a in myArray 
  from b in tTerms 
  select string.Format("{0}.{1}", b, a) 
```

should do it.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T16:19:51.280

这有效：

```
var query = from x in new[]{"A", "B", "C"}
        from y in new[]{"t1", "t2"}
        select y + "." + x;

var result = string.Join(", ", query.ToArray()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T16:22:39.233

这种序列的术语是[“笛卡尔积”](http://en.wikipedia.org/wiki/Cartesian_product)。

这是 Eric Lippert 关于[使用 LINQ 计算笛卡尔积的长博客](http://ericlippert.com/2010/06/28/computing-a-cartesian-product-with-linq/)

正如其他答案中已经显示的那样，可以使用以下代码获得元组序列，然后聚合（在字符串的情况下使用 Join，或在其他类型的结果中使用 Aggregate）以生成最终字符串：

```
var product =
    from first in s1
    from second in s2
    select new[] { first, second };
var result String.Join(", ", 
   product.Select(p => String.Format("{0}.{1}", p.first, p.second)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-02T16:21:22.633

如果这两个序列的长度相同，您可能可以让[Enumerable.Zip](http://msdn.microsoft.com/en-us/library/dd267698.aspx)为您工作。

```
var myFinalString = myArray.Zip(mySecondArray, (f, s) => f + "." + s); 
```

# coldfusion - 表中具有唯一标识符类型的 cfqueryparam

> ID：11297405
> 
> 赞同：2
> 
> 时间：2012-07-02T16:14:52.073
> 
> 标签：coldfusion, uniqueidentifier, cfquery, cfqueryparam

我有一个查询，我试图将值插入表中，其中一个值（ImportID）是数据库中的 uniqueidentifier 类型。我查看了 adobe CF 文档，发现 cf_sql_char 和 cf_sql_idstamp 都应该适用于我的 uniqueidentifier 类型的 cfquery 参数。我还阅读了这个线程，它说了同样的话：[什么是最适合用于 MS SQL 的 uniqueidentifier 字段类型的 Coldfusion cfsqltype？](https://stackoverflow.com/questions/1949884/what-is-the-most-appropriate-coldfusion-cfsqltype-to-use-for-ms-sqls-uniqueiden)

我发现其他一些地方使用 cfqueryparam 标记的“maxlength”参数和 cf_sql_char 作为类型，但无法使我的代码工作。我不断收到“从字符串转换为唯一标识符时转换失败”的错误。我将我的代码包含在我生成 UID 的位置并尝试在下面插入（我替换了一些变量名称并取出了所有其他列以进行导入）：

```
<cfscript>
    ImportID = createUUID();
</cfscript>

<cfquery name="INSERTTableName" datasource="#Application.Datasource#">
    INSERT INTO TableNameImport(
        ImportID
    )
    VALUES(
        <cfqueryparam value="#variables.ImportID#" cfsqltype="CF_SQL_CHAR">
    )
</cfquery> 
```

任何帮助将不胜感激。提前致谢。

*********************************编辑**************** ******************

找到了答案：

```
<cfquery name="INSERTTableName" datasource="#Application.Datasource#">
    DECLARE @ImportID uniqueidentifier
    SET @ImportID = NEWID()

    INSERT INTO TableNameImport(
        ImportID
    )
    VALUES(
        @ImportID
    )
</cfquery> 
```

问题是从 Coldfusion 调用创建的 UUID 与在 Microsoft SQL Server 中创建的格式不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:16:00.890

你是对的。SQL 使用 GUID，createUUID 使用 UUID。两者都是 32hex 值，但使用不同的文本格式（破折号的位置）。并且使用不同的计算来生成随机值。如果您将文本格式更改为具有 GUID 破折号位置或发送二进制值，则可以使用 UUID。对于上面的示例，如果 cf 需要对该值的引用，您可能还希望返回 GUID。

# php - 将两个数组合并为一个数组

> ID：11297407
> 
> 赞同：2
> 
> 时间：2012-07-02T16:15:02.030
> 
> 标签：php, xml

`RichText`我有以下代码为我的 xml 源中的每个元素创建两个数组。其中一个数组用于带有前缀的属性，另一个数组用于没有任何前缀的属性。这是我能弄清楚如何做到这一点的唯一方法：

```
<?php
$url = "http://testvipd7.scene7.com/is/agm/papermusepress/HOL_12_F_green?&fmt=fxgraw";    
$xml = simplexml_load_file($url);       
$xml->registerXPathNamespace('default', 'http://ns.adobe.com/fxg/2008');
$xml->registerXPathNamespace('s7', 'http://ns.adobe.com/S7FXG/2008');
$textNode = $xml->xpath("//default:RichText[@s7:elementID]");

function pr($var) { print '<pre>'; print_r($var); print '</pre>'; }

$result = array();
$result1 = array();
foreach($textNode as $node){
    $result[] = $node->attributes('http://ns.adobe.com/S7FXG/2008');
    $result1[] = $node->attributes();

}

$text = array_merge($result,$result1);

pr($text);

?> 
```

**输出**

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [caps] => none
                    [colorName] => 
                    [colorValue] => #518269
                    [colorspace] => rgb
                    [elementID] => smalltext
                    [fill] => true
                    [fillOverprint] => false
                    [firstBaselineOffset] => ascent
                    [joints] => miter
                    [maxFontSize] => 11
                    [miterLimit] => 4
                    [referencePoint] => inherit
                    [rowCount] => 1
                    [rowGap] => 18
                    [rowMajorOrder] => true
                    [stroke] => false
                    [strokeOverprint] => false
                    [warpBend] => 0.5
                    [warpDirection] => horizontal
                    [warpHorizontalDistortion] => 0
                    [warpStyle] => none
                    [warpVerticalDistortion] => 0
                    [weight] => 1
                )

        )

    [1] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [caps] => none
                    [colorName] => 
                    [colorValue] => #518269
                    [colorspace] => rgb
                    [elementID] => largetext
                    [fill] => true
                    [fillOverprint] => false
                    [firstBaselineOffset] => ascent
                    [joints] => miter
                    [maxFontSize] => 19
                    [miterLimit] => 4
                    [referencePoint] => inherit
                    [rowCount] => 1
                    [rowGap] => 18
                    [rowMajorOrder] => true
                    [stroke] => false
                    [strokeOverprint] => false
                    [warpBend] => 0.5
                    [warpDirection] => horizontal
                    [warpHorizontalDistortion] => 0
                    [warpStyle] => none
                    [warpVerticalDistortion] => 0
                    [weight] => 1
                )

        )

    [2] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [x] => 278.418
                    [y] => 115.542
                    [columnGap] => 18
                    [columnCount] => 1
                    [textAlign] => left
                    [fontFamily] => Trade Gothic LT Pro Bold Cn
                    [fontSize] => 11
                    [color] => #518269
                    [whiteSpaceCollapse] => preserve
                    [width] => 212.582
                    [height] => 33
                )

        )

    [3] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [x] => 278.998
                    [y] => 86.7168
                    [columnGap] => 18
                    [columnCount] => 1
                    [textAlign] => left
                    [fontFamily] => Bootstrap
                    [fontSize] => 19
                    [color] => #518269
                    [whiteSpaceCollapse] => preserve
                    [trackingRight] => 4%
                    [width] => 240
                    [height] => 29
                )

        )

) 
```

我的`array_merge`after 循环创建了一个巨大的数组，其中包含 4 个嵌套数组。两个数组是 的默认属性`RichText`，另外两个数组是带`s7:`前缀的属性。但我需要的是`$result`并在 foreach 循环中合并，这样每个包含所有属性的`$result1`合并数组只有一个。`$textNode`因此，在这个示例 url 中，我最后应该有两个数组，因为只有两个`RichText`元素。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:23:56.707

您的这段代码：

```
$text[] = array_merge($result,$result1); 
```

正如我猜你几乎知道的那样，逻辑上属于你的 foreach 循环内部。但是，它在那里不起作用。SimpleXML 喜欢返回可以迭代的 SimpleXMLElement 对象，但本身不是数组，所以我们需要`array_merge`用其他东西替换。

总而言之：

```
$attributesByNode = array();

foreach($textNode as $node) {
    $result1 = $node->attributes('http://ns.adobe.com/S7FXG/2008');
    $result2 = $node->attributes();

    foreach ($result1 as $attribName => $attributeValue) 
    { 
        $attributesByNode[$attribName] = $attribVal; 
    } 
    foreach ($result2 as $attribName => $attributeValue) 
    { 
        $attributesByNode[$attribName] = $attribVal; 
    } 
} 
```

# php - PHP - 分块文件副本（通过 FTP）缺少字节？

> ID：11297409
> 
> 赞同：2
> 
> 时间：2012-07-02T16:15:30.793
> 
> 标签：php, ftp, eof, chunked

因此，我正在编写一个分块文件传输脚本，旨在将文件（无论大小）复制到远程服务器。它几乎工作得非常好（我测试了一个 26 字节的文件，哈哈）但是当我开始做更大的文件时，我注意到它不太工作。例如，我上传了一个 96,489,231 字节的文件，但最终的文件是 95,504,152 字节。我用一个 928,670,754 字节的文件对其进行了测试，复制的文件只有 927,902,792 字节。

有没有其他人经历过这种情况？我猜`feof()`可能会做一些不稳定的事情，但我不知道如何替换它或测试它。为了您的方便，我评论了代码。:)

```
<?php

// FTP credentials
$server = CENSORED;
$username = CENSORED;
$password = CENSORED;

// Destination file (where the copied file should go)
$destination = "ftp://$username:$password@$server/ftp/final.mp4";

// The file on my server that we're copying (in chunks) to $destination.
$read = 'grr.mp4';

// If the file we're trying to copy exists...
if (file_exists($read))
{
    // Set a chunk size
    $chunk_size = 4194304;

    // For reading through the file we want to copy to the FTP server.
    $read_handle = fopen($read, 'rb');

    // For appending to the destination file.
    $destination_handle = fopen($destination, 'ab');

    echo '<span style="font-size:20px;">';
    echo 'Uploading.....';

    // Loop through $read until we reach the end of the file.
    while (!feof($read_handle))
    {
        // So Rackspace doesn't think nothing's happening.
        echo PHP_EOL;
        flush();

        // Read a chunk of the file we're copying.
        $chunk = fread($read_handle, $chunk_size);

        // Write the chunk to the destination file.
        fwrite($destination_handle, $chunk);

        sleep(1);
    }
    echo 'Done!';
    echo '</span>';
}

fclose($read_handle);
fclose($destination_handle);
?> 
```

## 编辑

我（可能已经）确认脚本最终以某种方式死亡，并且没有损坏文件。我创建了一个简单的文件，每行对应于行号，最多 10000，然后运行我的脚本。它在第 6253 行停止。但是，脚本仍然返回“完成！” 最后，所以我无法想象这是一个超时问题。奇怪的！

## 编辑 2

我已经确认问题存在于`fwrite()`. 通过`$chunk`在循环内回显，完整的文件被返回而不会失败。但是，写入的文件仍然不匹配。

## 编辑 3

如果我在 fwrite() 之后立即添加 sleep(1)，它似乎可以工作。然而，这使得脚本需要一百万年才能运行。PHP的附加是否有可能存在一些固有的缺陷？

## 编辑 4

好吧，不知何故，进一步将问题隔离为 FTP 问题。当我在本地运行此文件副本时，它工作正常。但是，当我使用文件传输协议（第 9 行）时，字节丢失了。尽管`fopen()`. 这可能是什么原因造成的？

## 编辑 5

我找到了解决办法。修改后的代码在上面——我会尽快自己发布一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:28:14.553

我找到了一个修复程序，但我不确定它为什么会起作用。只需在写入每个块后睡觉即可解决问题。我将块大小提高了很多以加快速度。虽然这可以说是一个糟糕的解决方案，但它应该适用于我的用途。无论如何，谢谢，伙计们！

# javascript - jQuery .animate() 无法正常工作

> ID：11297415
> 
> 赞同：0
> 
> 时间：2012-07-02T16:16:02.970
> 
> 标签：javascript, jquery, animation, colors

我正在设计一个网站，对于效果，我遇到了下面的一组 jquery 代码，用于通过动画实现文本颜色变化。但这不起作用，我不确定出了什么问题。

[JSFIDDLE](http://jsfiddle.net/FMTDp/14/)

以下是我目前遇到问题的代码：

**jQuery：**

```
$('.list-5 li a').hover(function() {
    $(this).stop().animate({ color: '#fff' })
}, function() {
    $(this).stop().animate({ color: '#0e1b23' })
}) 
```

**HTML：**

```
 <div class="list-5">
    <ul>
     <li>
       <a href="#">Hello world</a> 
     </li>
    </ul>
  </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T16:17:26.973

`#FFFF`是无效的颜色。使用`#FFF`或`#FFFFFF`。

此外，默认的 jQuery`.animate`不会为颜色设置动画。您必须为此使用 jQuery UI（或[Color 插件](https://github.com/jquery/jquery-color)）。

*   使用颜色插件的演示：http: [//jsfiddle.net/FMTDp/13/](http://jsfiddle.net/FMTDp/13/)
*   使用 jQuery UI 的演示：http: [//jsfiddle.net/FMTDp/15/](http://jsfiddle.net/FMTDp/15/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:19:03.283

**你不能为颜色设置动画！**

```
.animate({
        color: '#ffff'
    }); 
```

除非您添加对 jQuery UI 的引用。

> 所有动画属性都应动画为单个数值，除非以下说明；大多数非数字属性无法使用基本的 jQuery 功能进行动画处理（例如，宽度、高度或左侧可以设置动画，但背景颜色不能设置，除非使用 jQuery.Color() 插件）。

[**使用 jQuery UI 工作的 DEMO**](http://jsfiddle.net/FMTDp/16/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:19:15.320

您需要使用 jQuery UI 或 jQuery 插件来为颜色设置动画。您还使用了错误的颜色代码，使用`#fff`or `#ffffff`。

从[动画](http://api.jquery.com/animate/)：

> 例如，宽度、高度或左侧可以设置动画，但背景颜色不能设置，除非使用 jQuery.Color() 插件
> 
> 注意：jQuery UI 项目扩展了 .animate() 方法，允许对一些非数字样式（例如颜色）进行动画处理。该项目还包括通过 CSS 类而不是单个属性指定动画的机制。

# c# - 给对象一个成员对象的排他锁

> ID：11297429
> 
> 赞同：2
> 
> 时间：2012-07-02T16:16:47.983
> 
> 标签：c#, concurrency, dao

我的网络应用程序中的每个请求都可以通过 MVC3 自己的依赖注入机制获得一个数据访问对象实例（类型为 UnitofWork）。到现在为止还挺好。

我正在创建一个 Idisposable UnitofWorkScope 对象来聚合对此数据访问对象的一些存储调用，然后将它们一起调用。实际上 UnitofWorkScope 只控制 UnitofWork 对象，该对象具有将商店添加到列表并稍后调用它们的功能。我相信 UnitofWorkScope 对象应该对数据访问对象具有独占访问权限。

**现在的问题是：**我想知道是否有人反对使用 Monitor.Enter() 在构造函数中获得排他锁，然后使用 Monitor.Exit() 在 dispose 方法中释放；

通过描述我为什么要问这个问题，我已经把水弄得一团糟，但请随意评论我在这里放的任何东西。

```
public class UnitofWorkScope : IDisposable
{
    public UnitofWorkScope(UnitOfWork UnitofWork)
    {
        if (UnitofWork == null)
        {
            throw new ArgumentException("UnitofWork argument null");
        }  
        this._unitofWork = UnitofWork;
        Monitor.Enter(_unitofWork); // obtaining exclusive access to the DAO of this request
        this._unitofWork.AggregateDbChanges = true; //switched back off in dispose method
    }

    private readonly UnitOfWork _unitofWork;

    bool _disposed;

    public void Dispose(bool disposing)
    {
        if (!_disposed)
        {
            _unitofWork.CallFuncList();
            Monitor.Exit(_unitofWork); //releasing the lock
            _disposed = true;
            GC.SuppressFinalize(this);
        }
    }

    public void Dispose()
    {
        Dispose(true);
    }

    ~UnitofWorkScope()
    {
        if (!_disposed)
        {
            Dispose(false);
        }
    }
} 
```

我们的想法是像这样使用这个 UnitofWorkScope：

```
UnitofWork _unitofWork = Resolver.GetService<UnitofWork>(); //gets the UnitofWork DAO

using (UnitofWorkScope UnitofWorkScope = new UnitofWorkScope(_unitOfWork))
{
    // do a store

    _unitofWork.Store<SomeClass>(_someInstance);

   // do some more stores 

   try
   {
        UnitofWorkScope.Dispose(true); 
   }
   catch (exception ex)
   {
     //try to undo those stores.
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:33:58.607

是的，这对于实现锁来说并不是一个糟糕的模式。但是：我会推荐一个稍微不同的 Dispose 版本，以保证即使`_unitofWork.CallFuncList()`抛出异常也会释放锁，您依赖它来检测是否需要执行某种回滚。

```
private void Dispose(bool disposing) 
{ 
    if (!_disposed) 
    { 
        try
        {
            _disposed = true; 
            _unitofWork.CallFuncList(); 
        }
        finally
        {
            Monitor.Exit(_unitofWork); //releasing the lock 
            GC.SuppressFinalize(this); 
        }
    } 
} 
```

但是，您可能希望将“提交”从锁定“释放”逻辑中分离出来，这样您就不必显式调用`Dispose()`，而 using 语句会自动为您执行此操作。

```
public void Commit()
{
    _unitofWork.CallFuncList(); 
}

private void Dispose(bool disposing) 
{ 
    if (!_disposed) 
    { 
        try
        {
            _disposed = true; 
        }
        finally
        {
            Monitor.Exit(_unitofWork); //releasing the lock 
            GC.SuppressFinalize(this); 
        }
    } 
} 
```

然后你可以像这样使用它：

```
using (var unitofWorkScope = new UnitofWorkScope(_unitOfWork))     
{     
    // do a store     

    _unitofWork.Store<SomeClass>(_someInstance);     

   // do some more stores      

   try     
   {     
        unitofWorkScope.Commit();
   }     
   catch (exception ex)     
   {     
     //try to undo those stores.     
   }     
}  // unitofWorkScope.Dispose() automatically called here 
```

# php - 使用 .htaccess 重定向 404 内容的规则

> ID：11297441
> 
> 赞同：1
> 
> 时间：2012-07-02T16:17:32.960
> 
> 标签：php, .htaccess, http-status-code-404

对我们来说，将正在进行的站点放在上面是很常见的`www.domain.com/dev/`，然后一旦客户签署了站点以将其移动到顶层`www.domain.com`，我们希望能够将 .htaccess 文件放在顶层，这样一旦我们'如果客户端不小心转到`www.domain.com/dev/apage.php`他们被重定向到的站点，则已将站点移出 /dev `www.domain.com/apage.php`，但前提`www.domain.com/dev/apage.php`是不存在。

有时 dev 文件夹会被称为其他各种东西，理想情况下，我们不希望编辑 .htaccess 文件以匹配文件夹名称。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:56:16.333

你可以做类似的事情

*根据评论编辑：*

```
RewriteEngine On

RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule dev/(.*)$ $1 [R=301,L] 
```

这基本上意味着如果文件不存在`RewriteCond %{REQUEST_FILENAME} !-f`- 然后将任何对 dev 的请求重写回根目录。您必须在重写规则中指定 dev/，否则您将陷入重定向循环。

但是，这仅在您使用显式文件而不是包含所有路由的框架时才有效`index.php`，例如

# javascript - JQuery Hover Code: Adding an If Statement breaks it

> ID：11297443
> 
> 赞同：-3
> 
> 时间：2012-07-02T16:17:51.080
> 
> 标签：javascript, jquery, css, class, if-statement

I have this code that makes a box with information follow the mouse. It's really simple, just checks the custom attribute "description" in the div that you hover over and puts that in the box. However, I want to make it so if that div also has a certain CSS class, then it would put other information in the box, in addition to the other code still working.

```
$(document).ready(function(){
$(".hover").mousemove(function(e){
    if ("div").hasclass("item"){
        alert("div hasclass item");
    } else {
        var description = $(this).attr("description");
        $("#hoverdiv").text(description).show();
        $("#hoverdiv").css("top", e.clientY+10).css("left", e.clientX+5);
    }

}).mouseout(function(){
    $("#hoverdiv").hide();
}); 
```

});

that's the code I have now. None of the hovers in my page work at all. This is the code that works. It's identical in every way, except no if statement.

```
$(document).ready(function(){
$(".hover").mousemove(function(e){
    var description = $(this).attr("description");
    $("#hoverdiv").text(description).show();
    $("#hoverdiv").css("top", e.clientY+10).css("left", e.clientX+5);
}).mouseout(function(){
    $("#hoverdiv").hide();
}); 
```

});

I've tried time and time again to get this to work, and through my testing, it would seem that simply adding an if statement breaks the entire thing. I have absolutely no idea how to proceed or how to fix it.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:19:24.347

罪魁祸首。。

```
 if ("div") 
```

也许你在尝试

```
if($("div").something()){
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:20:12.330

```
if ("div").hasclass("item") { 
```

应该：

```
if ( $("div").hasClass("item") ) { 
```

对于更多，您还可以测试：

```
if ( $("div").is(".item") ) { 
```

阅读有关 jQuery 的信息**[*`.is()`*](http://api.jquery.com/is)**

# git - 如何在 git 中检出单个二进制文件的版本？

> ID：11297445
> 
> 赞同：0
> 
> 时间：2012-07-02T16:17:55.183
> 
> 标签：git

我熟悉从 git 存储库中检索单个文件版本的方法：

```
git checkout <hash> -- <path/file-name> 
```

...它就像我所有的代码文件的魅力一样。我想恢复我的存储库中的一个图像，并且在运行 git 命令后我的二进制文件中没有看到任何变化。我找出更改所在的提交

```
git log --stat 
```

...，在 git 控制台中使用 '/<file-name>'，然后尝试按上述方式签出文件，但无济于事。

在 Git 中检索二进制版本时，我应该使用哪些特殊开关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:21:12.933

不，相同的命令应该适用于文本和二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:23:41.423

```
git checkout <Hash> binary file works fine 
```

# kohana - Kohana: Completely remove index.php from url (not repeated issue)

> ID：11297448
> 
> 赞同：0
> 
> 时间：2012-07-02T16:18:01.383
> 
> 标签：kohana

===== CLARIFICATION =====

Please note this, there are hundred of answers to posts similar to this one, but people only cover a part of the problem, not the real one i'm asking here.

=====

I'm using Kohana 3.2, and i want to completely remove index.php from the url. For example, i want to access to the controller foo, action bar.

Normally, with bootstrap and htaccess correctly setted up, i can access like this:

> www.domain.com/foo/bar.

But i can also access like this:

> www.domain.com/index.php/foo/bar

I want to allow users to ONLY access like the first way, and not like the second way.

I have this section in bootstrap.php:

```
Kohana::init(array(
    'base_url'   => '/',
    'index_file' => '',
)); 
```

i tried taking off index_file line, changing its value to FALSE, and i am still able to access foo/bar both ways.

I think the solution is modifying htaccess, but i tried some changes and it isnt working as i want. I'm using the original htaccess which came with kohana:

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /knisu/

# Protect hidden files from being viewed
<Files .*>
    Order Deny,Allow
    Deny From All
</Files>

# Protect application and system files from being viewed
RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT] 
```

Any help would be appreciated :)

EDIT: I found an answer that could make it work in another post:

```
 # Redirect from:
  # http://localhost/index.php/welcome
  # to
  # http://localhost/welcome
  #
  RewriteCond %{REQUEST_FILENAME} -f
  RewriteRule ^index\.php/?(.*)?$ $1 [R,L]

  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ ?/$1 [L] 
```

The thing is, the author says: "this works but the problem is with the files and dirs that exists he must put the complete path for the images, css, js, etc... I will fix later"

May be that helps to find the final solution?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:05:24.613

我认为使用原始的 htaccess 更好，但有改进。

之后...

```
RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L] 
```

这应该做“index.php/”的重定向，

```
# Redirect any "index.php/user/profile/" to "/user/profile/"
RewriteRule ^index.php/(.*)$ /$0 [L,R=302] 
```

以我的经验，通过控制器传递 css/js 比纯 apache/nginx 请求慢。

# android - android SurfaceView 的糟糕 FPS

> ID：11297456
> 
> 赞同：0
> 
> 时间：2012-07-02T16:18:32.093
> 
> 标签：android, surfaceview, frame-rate

我知道有很多关于这个主题的帖子，但没有真正帮助我解决我的问题。我对 android 编程相当陌生，并在教程的帮助下构建了我的线程，问题是我的模拟器不会超过 15 fps，程序应该以 50 运行（FPS 初始化为 50）。这是我的线程中的代码：

```
 public class MainThread extends Thread {

private static final String TAG = MainThread.class.getSimpleName();

// desired fps
private final static int MAX_FPS = 50;
// maximum number of frames to be skipped
private final static int MAX_FRAME_SKIPS = 5;
// the frame period
private final static int FRAME_PERIOD = 1000 / MAX_FPS;

/* Stuff for stats */
private DecimalFormat df = new DecimalFormat("0.##"); // 2 dp
// we'll be reading the stats every second
private final static int STAT_INTERVAL = 1000; // ms
// the average will be calculated by storing
// the last n FPSs
private final static int FPS_HISTORY_NR = 10;
// last time the status was stored
private long lastStatusStore = 0;
// the status time counter
private long statusIntervalTimer = 0l;
// number of frames skipped since the game started
private long totalFramesSkipped = 0l;
// number of frames skipped in a store cycle (1 sec)
private long framesSkippedPerStatCycle = 0l;

// number of rendered frames in an interval
private int frameCountPerStatCycle = 0;
private long totalFrameCount = 0l;
// the last FPS values
private double fpsStore[];
// the number of times the stat has been read
private long statsCount = 0;
// the average FPS since the game started
private double averageFps = 0.0;

// Surface holder that can access the physical surface
private SurfaceHolder surfaceHolder;
// The actual view that handles inputs
// and draws to the surface
private MainGamePanel gamePanel;

// flag to hold game state
private boolean running;

public void setRunning(boolean running) {
    this.running = running;
}

public MainThread(SurfaceHolder surfaceHolder, MainGamePanel gamePanel) {
    super();
    this.surfaceHolder = surfaceHolder;
    this.gamePanel = gamePanel;
}

@Override
public void run() {
    Canvas canvas;
    Log.d(TAG, "Starting game loop");
    // initialise timing elements for stat gathering
    initTimingElements();

    long beginTime; // the time when the cycle begun
    long timeDiff; // the time it took for the cycle to execute
    int sleepTime; // ms to sleep (<0 if we're behind)
    int framesSkipped; // number of frames being skipped

    sleepTime = 0;

    while (running) {
        canvas = null;
        // try locking the canvas for exclusive pixel editing
        // in the surface
        try {
            canvas = this.surfaceHolder.lockCanvas();
            synchronized (surfaceHolder) {
                beginTime = System.currentTimeMillis();
                framesSkipped = 0; // resetting the frames skipped
                // update game state
                this.gamePanel.update();
                // render state to the screen
                // draws the canvas on the panel
                this.gamePanel.render(canvas);
                // calculate how long did the cycle take
                timeDiff = System.currentTimeMillis() - beginTime;
                // calculate sleep time
                sleepTime = (int) (FRAME_PERIOD - timeDiff);

                if (sleepTime > 0) {
                    // if sleepTime > 0 we're OK
                    try {
                        // send the thread to sleep for a short period
                        // very useful for battery saving
                        Thread.sleep(sleepTime);
                    } catch (InterruptedException e) {
                    }
                }

                while (sleepTime < 0 && framesSkipped < MAX_FRAME_SKIPS) {
                    // we need to catch up
                    this.gamePanel.update(); // update without rendering
                    sleepTime += FRAME_PERIOD; // add frame period to check
                                                // if in next frame
                    framesSkipped++;
                }

                if (framesSkipped > 0) {
                    Log.d(TAG, "Skipped:" + framesSkipped);
                }
                // for statistics
                framesSkippedPerStatCycle += framesSkipped;
                // calling the routine to store the gathered statistics
                storeStats();
            }
        } finally {
            // in case of an exception the surface is not left in
            // an inconsistent state
            if (canvas != null) {
                surfaceHolder.unlockCanvasAndPost(canvas);
            }
        } // end finally
    }
}

/**
 * The statistics - it is called every cycle, it checks if time since last
 * store is greater than the statistics gathering period (1 sec) and if so
 * it calculates the FPS for the last period and stores it.
 * 
 * It tracks the number of frames per period. The number of frames since the
 * start of the period are summed up and the calculation takes part only if
 * the next period and the frame count is reset to 0.
 */
private void storeStats() {
    frameCountPerStatCycle++;
    totalFrameCount++;
    // assuming that the sleep works each call to storeStats
    // happens at 1000/FPS so we just add it up
    // statusIntervalTimer += FRAME_PERIOD;

    // check the actual time
    statusIntervalTimer += (System.currentTimeMillis() - statusIntervalTimer);

    if (statusIntervalTimer >= lastStatusStore + STAT_INTERVAL) {
        // calculate the actual frames pers status check interval
        double actualFps = (double) (frameCountPerStatCycle / (STAT_INTERVAL / 1000));

        // stores the latest fps in the array
        fpsStore[(int) statsCount % FPS_HISTORY_NR] = actualFps;

        // increase the number of times statistics was calculated
        statsCount++;

        double totalFps = 0.0;
        // sum up the stored fps values
        for (int i = 0; i < FPS_HISTORY_NR; i++) {
            totalFps += fpsStore[i];
        }

        // obtain the average
        if (statsCount < FPS_HISTORY_NR) {
            // in case of the first 10 triggers
            averageFps = totalFps / statsCount;
        } else {
            averageFps = totalFps / FPS_HISTORY_NR;
        }
        // saving the number of total frames skipped
        totalFramesSkipped += framesSkippedPerStatCycle;
        // resetting the counters after a status record (1 sec)
        framesSkippedPerStatCycle = 0;
        statusIntervalTimer = 0;
        frameCountPerStatCycle = 0;

        statusIntervalTimer = System.currentTimeMillis();
        lastStatusStore = statusIntervalTimer;
        // Log.d(TAG, "Average FPS:" + df.format(averageFps));
        gamePanel.setAvgFps("FPS: " + df.format(averageFps));
    }
}

private void initTimingElements() {
    // initialise timing elements
    fpsStore = new double[FPS_HISTORY_NR];
    for (int i = 0; i < FPS_HISTORY_NR; i++) {
        fpsStore[i] = 0.0;
    }
    Log.d(TAG + ".initTimingElements()",
            "Timing elements for stats initialised");
} 
```

}

我所有的绘图方法都是这样的：

```
 public void render(Canvas canvas) {
    canvas.drawColor(Color.BLACK);
    happy.draw(canvas);
    // display fps
    displayFps(canvas, avgFps); 
```

那里也有一些更新，但这只是为了让我的精灵移动。如果 any1 可以看到问题或有任何提示，请告诉我。谢谢！}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T09:47:52.087

不要依赖您的模拟器进行性能基准测试。虽然模拟器有助于检查应用程序的功能和正确性，但执行某些操作可能需要比真实设备更多（或更少）的时间。特别是在模拟器上的绘图操作似乎更长。我在模拟器上以 9-16 fps 的速度运行游戏，而在旧的真实设备上运行 50+。

如果您的应用程序/游戏在真实设备上运行仍然太慢，您可以分析您的应用程序（例如使用 TraceView）以准确查看占用您所有时间的内容，并尝试优化或删除它（如果可能）。

作为一个额外的提示：如果可能的话，尽量让你的surfaceView格式与它上面的所有资源相同，并尝试提前预缩放所有内容（在编译时或在应用程序启动/初始化阶段），缩放和转换是执行每一帧的昂贵操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T10:08:23.997

如果使用 Windows，您可以尝试 BlueStacks。以下是我的一些结果：

```
 *****************************************************
   ARM Emulator 2.4 GHz Core 2 Duo

 Android Java OpenGL Benchmark 06-Mar-2013 21.17

           --------- Frames Per Second --------
 Triangles WireFrame   Shaded  Shaded+ Textured

   9000+       2.66     3.97     3.29     1.61
  18000+       1.48     1.84     1.72     0.88
  36000+       0.82     0.95     0.87     0.46

      Screen Pixels 320 Wide 480 High

 *****************************************************
      BlueStacks Emulator on 3 GHz Phenom

 Android Java OpenGL Benchmark 06-Mar-2013 21.25

           --------- Frames Per Second --------
 Triangles WireFrame   Shaded  Shaded+ Textured

   9000+      41.72    42.02    32.90    20.72
  18000+      22.11    22.09    19.28    11.58
  36000+      11.16    11.14    10.35     5.89

      Screen Pixels 1024 Wide 600 High

 *****************************************************
  Samsung EXYNOS 5250 Dual 2.0 GHz Cortex-A15, Android 4.2.2
             Mali-T604 Quad Core GPU

 Android Java OpenGL Benchmark 09-Aug-2013 09.42

           --------- Frames Per Second --------
 Triangles WireFrame   Shaded  Shaded+ Textured

   9000+      39.13    41.52    32.19    27.25
  18000+      22.03    20.73    19.69    16.30
  36000+      12.24    12.23    10.75     8.68

      Screen Pixels 1920 Wide 1032 High 
```

# regex - 您会为此任务推荐哪种脚本语言？

> ID：11297457
> 
> 赞同：-2
> 
> 时间：2012-07-02T16:18:32.743
> 
> 标签：regex, automation

我想实现一个简单的脚本来在我的媒体电脑上做一些无聊的家务，但我不确定哪种脚本语言适合这项任务。

我想做的伪代码是：

```
1) Scan a directory for sub directories matching a name like:

"Foo 1x01 bar"
"Foo 1x02 bar"
or 
"Foo s01e01 bar"
"Foo s01e02 bar"

2) Then for each matching sub directory:
  - Make a directory "Foo" if it doesn't already exist.
  - Copy the largest file under the matching sub directory into "Foo".
  - Delete the matched sub directory and anything left in it. 
```

就是这样。尽管我可能想扩展它以随着时间的推移做更多的事情。对于用于此任务的最优雅的脚本工具有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:28:03.737

PowerShell 可以轻松完成您正在寻找的工作。查看[Microsoft 的脚本中心](http://gallery.technet.microsoft.com/ScriptCenter/)。它有足够的示例和教程可以很快地解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:29:44.150

我推荐 Python，因为你说你也想在你的 Mac 上使用它。使用`shutil`and`os`模块（查看[os.walk](http://docs.python.org/library/os.html#os.walk)）应该很容易。这是一个示例，它从`top`变量中的文件夹开始获取所有文件的大小。

```
import os
from os.path import join, getsize
for root, dirs, files in os.walk('python/Lib/email'):
    print root, "consumes",
    print sum(getsize(join(root, name)) for name in files),
    print "bytes in", len(files), "non-directory files"
    if 'CVS' in dirs:
        dirs.remove('CVS')  # don't visit CVS directories 
```

# batch-file - 检查批处理脚本中的错误/查找字符串

> ID：11297463
> 
> 赞同：0
> 
> 时间：2012-07-02T16:18:58.407
> 
> 标签：batch-file, findstr

如何批量查找和比较多组字符串以检查错误？？？我知道如何用一组字符串做到这一点：

```
FINDSTR /C:"successful" someFile.txt && (ECHO It was successful.)|| ECHO It failed. 
```

在这里，它在 someFile.txt 中查找单词“successful”，如果找到字符串，则打印出第一个回显，如果找不到字符串，则打印出第二个回显。现在，我不仅要搜索 1 组，而且要一次搜索 2 或 3 组单词/字符串。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:32:00.967

如果您不使用该`/C`选项，`findstr`您可以列出几个以空格分隔的单词来查找：

```
findstr "foo bar baz" someFile.txt 
```

将搜索`foo`,`bar`或之一`baz`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:20:33.573

我想，这里最好的方法是正确使用那些条件执行命令。或者，就像@DocBrown 所说，多次使用 FINDSTR。

# joomla - YooTheme Zoo 应用程序博客首页

> ID：11297465
> 
> 赞同：0
> 
> 时间：2012-07-02T16:19:06.600
> 
> 标签：joomla, pagination

我在首页上使用 YooTheme 的 ZOO Blog 应用程序。我有两件事想要实现；

*   单击文章标题时，您将进入一个完整查看文章的页面，包括您可能/可能没有的任何阅读更多内容。当转到此页面时，您仍然拥有分配给“主”菜单项的所有模块。不幸的是，为了让应用程序“博客”显示在首页 - 它必须分配给“主页”菜单项。

我希望完整的文章页面只是将菜单模块放在顶部，也许我确实“启用”了任何模块。

*   一个奇怪的 - 我想在我的首页底部没有分页
    。我只是想鼓励用户转到
    列出所有新闻的单独页面。

我希望有人能帮帮忙！

我会利用 YooTheme 拥有的“出色”社区——但不幸的是，在 3 个月后（当您购买产品时，这是最低级别），所有支持都停止了。这包括主要基于社区帮助的票务系统。

如果需要，我可以提供屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-22T17:33:53.530

I found the answers to this problem. (I'm not native english speaker, but I hope you'll understand)

**First method** - sh404sef, I don't know whether it's a feature or a bug in that component, but that what you need to do:

1.  Unpublish your default homepage menu item(zoo category for example) to wich there were assigned modules that you dont need to be shown, then create and make it Default Page(star sign) new menu item(or use existing one), and assign to it the modules that you want to appear in the full item view(I'm using product not a blog zoo app) or article full view when you click link from homepage and opens zoo item page or zoo category page.
2.  In joomla Globa Configuration turn on - Use URL rewriting, then in sh404sef Control Panel turn on - Enable URL optimization and Rewriting mode with .htaccess . Errase all the url links in sh404SEF: URL manager(if any exist), we need it (sh404SEF) to create new links.
3.  Now when you open new default home page with modules you need to be shown in the zoo item full view, you start to going on ALL the zoo links you wish to open then with that quantity of modules. sh404sef creates SEF link in it backend (in URL manager). And that links will open with exactly with that quantity of modules with zoo.
4.  Now you can publish back again your previos homepage and make it default page. And there will be modules that you want on homepage, but because of links that sh404sef created when you were clicking, the zoo items or article links will open with different modules that we asigned to our second default page you use to create those links. For that purpose I commonly use existing menu item where will be another set of modules not like in the homepage. When you have new link on site you have to partially repeat that. You have to go on that link first time from the page where quantity of modules suits you (and to be on the safe side make that page your default page for that time)

**Second method** - JoomlaXTC Zoo Item Wall, its a module you don't have to make menu item to show zoo items on a homepage. But, I didn't tried it myself I only read about it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:06:09.283

您可以通过单击动物园管理员面板中的图标来编辑完整和任何布局。在那里，您可以编辑应用类型名称下的链接中的每个元素！在“默认”或您的模板旁边有完整链接、预告片、提要等。完整是项目的完整视图，预告片是类别/首页视图！在 Yootheme 的网站上，您还可以找到有关动物园的综合文档！需要帮助请叫我

# web-services - 为什么 RESTful 应用程序更容易扩展

> ID：11297471
> 
> 赞同：13
> 
> 时间：2012-07-02T16:19:25.600
> 
> 标签：web-services, rest, architecture

我总是读到，选择 RESTful 架构的一个原因是（除其他外）为高负载的 Web 应用程序提供更好的可扩展性。

这是为什么？我能想到的一个原因是，由于每个客户端都定义了相同的资源，缓存变得更容易。在第一个请求之后，后续请求由一个 memcached 实例提供服务，该实例也可以很好地水平扩展。

但是你不能用传统的方法来完成这个，其中动作在url中编码，例如（booking.php/userid=123&travelid=456&foobar=789）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-02T16:26:11.530

REST 的一部分确实是 URL 部分（它是 REST 中的 R），但 S 对于扩展更重要：状态。

REST 的服务器端是无状态的，这意味着服务器不必跨请求存储任何内容。这意味着服务器之间不必（太多）通信，使其可以*水平扩展*。

当然，R（representational）有一个小小的好处，如果你有很好的 URL，*负载均衡器*可以轻松地将请求路由到正确的服务器，并且 GET 可以发送到从站，而 POST 发送到主站。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T16:30:48.470

我认为 Tom 所说的非常准确，但是可扩展性的另一个问题是在扩展时改变的障碍。因此，按照预期，REST 的最大租户之一是超媒体。基本上，服务器将拥有路径并在运行时将它们传递给客户端。这使您可以在不破坏现有客户端的情况下更改代码。但是，您会发现大多数 REST 实现只是 RPC 隐藏在 REST 的幌子后面......这是不可扩展的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-21T13:29:47.940

当涉及到 Web、云和 REST 时， “可扩展”或[“网络规模”](https://www.youtube.com/watch?v=b2F-DItXtZs)是最常被滥用的术语之一，主要用于说服管理层获得他们的支持，让他们的开发团队加入 REST 列车。

这是一个没有价值的流行语。如果你在网上搜索“REST 可扩展性”，你会发现很多人在没有任何具体证据的情况下互相模仿。

REST 服务与通过 SOAP 接口公开的服务完全一样可扩展。两者都只是应用程序服务的 HTTP 接口。该服务的实际扩展程度**完全**取决于该服务的实际实施方式。可以编写无法在 REST 和 SOAP 中完全扩展的服务。

是的，您可以使用 SOAP 做一些使其扩展性更差的事情，例如依赖状态和会话。开箱即用的 SOAP 不会这样做。这需要您使用更智能的负载均衡器，如果您真的关心任何形式的扩展，无论如何都需要它。

REST 允许 SOAP 不允许的一件事，以及这里的一些其他答案解决的问题是，通过 HTTP 缓存代理或在客户端缓存可缓存的响应。当许多操作的响应是可缓存的时，这*可能*会使 REST 服务比 SOAP 服务负载更轻。这意味着更少的请求最终会出现在您的服务中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-26T10:23:46.987

The main reason behind saying a rest application is scalable is, Its built upon a HTTP protocol. Because HTTP is stateless. Stateless means it wont share anything between other request. So any request can go to any Server in a load balanced cluster. There is nothing forcing this user request go to this server. We can overcome this by using token.

Because of this statelessness,All REST application are very easy to scale. But if you want get high throughput(number of request capable in one second) in each server, then you should optimize blocking things from the application. Follow the following tips

*   Make each REST resource is a small entity. Don't read data from join of many tables.
*   Read data from near by databases
*   Use caches (Redis) instead of databases(You can save DISK I/O)
*   Always keep data sources as much as near by because these blocks will make server resources (CPU) ideal and it no other request can use that resource while it is ideal.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T16:33:14.570

**一个**原因（也许不是**原因**）是 RESTful 服务是无会话的。这意味着您可以轻松地使用负载平衡器将请求定向到各种 Web 服务器，而无需在所有 Web 服务器之间复制会话状态或确保来自单个会话的所有请求都转到同一 Web 服务器。

# php - SQL 结果中的最大和最小 PHP 函数

> ID：11297472
> 
> 赞同：1
> 
> 时间：2012-07-02T16:19:32.060
> 
> 标签：php, sql, arrays, max, min

我是 PHP 开发的新手，我找不到解决问题的方法。
我必须清理 Mysql 数据库中的一些数据。我的数据库中有一个`date`充满时间段的列，例如

```
-520;-510;0;-500;-530;-599;-499;-510;-490;-500;0;-450 
```

我想从中提取最小值和最大值，这样我就只剩下 2 个时间段了。

我试过这个：

```
$sql = "SELECT date FROM records WHERE serial = 1";
$requete = mysql_query($sql,$cnx) or die(".mysql_error().");
while($result = mysql_fetch_array($requete))
{
    $res = $result[date];
    $min = min($res);
    $max = max($res);
} 
```

我知道它不能工作，因为 min 和 max 函数仅适用于数组，但我不知道如何将我的数组转换`$result[date]`为新数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:21:24.480

在 SQL 中执行此操作，这样的事情应该可以工作：

```
$sql = "SELECT MAX( date) as maximum, MIN( date) as minimum
            FROM records 
        WHERE serial = 1
        GROUP BY serial"; 
```

然后要检索结果，您需要一行：

```
$requete = mysql_query($sql,$cnx) or die( mysql_error());
$row = mysql_fetch_array($requete);
echo $row['maximum'] . ' ' . $row['minimum']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:27:22.490

假设数据库“日期”字段包含一串由 ; 分隔的数字 就像您描述的那样，您可以使用 explode() 函数将该字符串转换为数组，然后在该数组上使用 max() 和 min()

```
$arr = explode(";",$string);
$max = max($arr);
$min = min($arr); 
```

如果每行有一个数字，则使用 SQL 进行操作，如另一个答案中所述

# javascript - 骨干网.js 3路模型同步

> ID：11297475
> 
> 赞同：4
> 
> 时间：2012-07-02T16:20:02.043
> 
> 标签：javascript, html, backbone.js, persistence, web-sql

我正在开发一个使用客户端持久存储的（HTML5）Web 应用程序，它会定期同步到服务器。我最近遇到了backbone.js，印象非常深刻。但是，我对如何实现我的（假设很常见）用例有点困惑。

因此，需要在三个单独的存储区域之间进行同步。内存中的 Backbone.Model 对象、本地 HTML5 SQL 存储和服务器本身。我对backbone.js 的阅读似乎总是双向同步，即在本地/服务器和模型之间。例如，使用backbone-websql 插件允许同步到本地存储，但是这会覆盖服务器同步！？我应该如何处理这种“三通”案件？

与持久存储（尤其是服务器）同步时，需要发送所有相关的当前记录 ID 及其上次修改日期，以便仅返回/更新修改的记录。但是，根据我的阅读，整个记录在查询期间被发送到服务器，这在我的情况下是太多的数据。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:53:31.657

您应该阅读有关[Backbone.sync](http://backbonejs.org/docs/backbone.html#section-162)`Backbone.sync`的内容。在诸如骨干网-websql 之类的适配器中 ，有一个重新定义方法的约定。因此，存储原始同步功能以进行内存到服务器同步，然后添加插件。`Backbone.sync`“上次修改”逻辑也可以轻松实现

# php - 使用 Web 浏览器在本地打开编辑器并使用 php 在服务器上检索数据？

> ID：11297482
> 
> 赞同：2
> 
> 时间：2012-07-02T16:20:39.313
> 
> 标签：php, zend-framework, file-upload, editor

我为解决这个问题苦苦挣扎了好几天，似乎找不到任何有用的指导。所以问题是我想在我的 Web 应用程序中实现一个功能，让用户可以选择在他们本地拥有的任何编辑器上编辑文本，然后保存文件（保存的文件将在线）。

建议的解决方案：我的想法是：

1）在浏览器文件位置本地为用户创建一个文件夹。

2）使用 exec() 打开应用程序（在此之前检查用户使用哪种操作系统并创建适当的错误处理）

3）保存文件应该在创建的文件中（第1点）。

4）从文件夹中检索数据。

如果你有更好的主意，请给我建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:27:13.223

你试图做的事情是不可能的。PHP 是服务器端的，它无法控制客户端，它只能向它发送一系列字符来呈现（显示的页面）。

有一些基于 javascript 的富编辑器，例如 CKEditor 和 TinyMCE，您可以提供给客户端使用，但您只能做到这些。此外，由于每个 Web 浏览器都与其他浏览器略有不同，并且在运行客户端 javascript/DOM 操作时都有自己的怪癖和错误，因此您可以预期在一个特定版本的一个特定版本中会发生很多奇怪的小问题浏览器，但在其他浏览器中没有。如果客户端关闭了 javascript，他们将根本看不到任何编辑器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:30:12.900

简而言之，你不能做到这一切。你可以做一些。请记住，使用 HTTP，用户完全可以控制，您“在用户的机器上”什么也做不了。如果可以的话，这将被称为“危险的安全漏洞”，并且一旦各种浏览器的编码人员接触到它就会停止工作。

您可以使用适当的 MIME 类型将输出发送给用户，这将打开您选择的编辑器。您甚至可以发明自己的 MIME 类型来做到这一点（用户必须自己安装编辑器）。

然后用户将文本保存在他的机器上。您不能在远程机器上保存（不是在所有编辑器中），因为它不是“保存”，而是您想要的“上传”。

最后，用户可以恢复他或她刚刚保存的文件，并通过例如 POST 表单将其提交给您。

坦率地说，在我住的地方，我们称之为“如何把自己的屁股放在别人的脚下”。想想所有可能的编辑器，每个可能都有自己的格式：如果用户（不）故意选择了一些奇怪的东西，比如“保存为 Word 2015 额外格式（压缩）”，并将文件上传到你的服务器 - 你是准备好理解文件格式并用它做一些有意义的事情了吗？

一个非常常见的替代方案是在 HTML 中实现多个富文本编辑器中的任何一个 - 例如，有 CKEdit 或 TinyMCE，等等。他们将让用户生成干净的 HTML 并自动将其上传到您的服务器上。

# hlsl - 我可以在应用顶点着色器之前计算 HLSL 中的全局变量吗？

> ID：11297483
> 
> 赞同：0
> 
> 时间：2012-07-02T16:20:40.827
> 
> 标签：hlsl, directx-9

有三个全局变量 g_A、g_B、g_C 我要这样做；`g_C = g_A * g_B`

我试过这个；

```
technique RenderScene
{
    g_C = g_A * g_B;

    pass P0
    {          
        VertexShader = compile vs_2_0 RenderSceneVS();
        PixelShader  = compile ps_2_0 RenderScenePS(); 
    }
} 
```

但是，这是不正确的语法。我该怎么办？

在渲染之前我必须在 C++ 代码中计算这个变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:59:23.830

DirectX 9 和 10 效果支持“预着色器”，其中静态表达式将被拉出以在 CPU 上自动执行。

请参阅`D3DXSHADER_NO_PRESHADER`文档，这是一个禁止此行为的标志。这是一个网络链接： http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb205441 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205441(v=vs.85).aspx)

您的声明`g_C`同时缺少`static`类型，例如`float`. 您还需要将其移至全局范围。

当你用 fxc 编译它时，你可能会看到类似下面的内容（注意注释`preshader`块后面的块）：

```
technique RenderScene
{
    pass P0
    {
        vertexshader = 
            asm {
            //
            // Generated by Microsoft (R) HLSL Shader Compiler 9.29.952.3111
            //
            // Parameters:
            //
            //   float4 g_A;
            //   float4 g_B;
            //
            //
            // Registers:
            //
            //   Name         Reg   Size
            //   ------------ ----- ----
            //   g_A          c0       1
            //   g_B          c1       1
            //

                preshader
                mul c0, c0, c1

            // approximately 1 instruction used
            //
            // Generated by Microsoft (R) HLSL Shader Compiler 9.29.952.3111
                vs_2_0
                mov oPos, c0

            // approximately 1 instruction slot used
            };

        pixelshader = 
            asm {
            //
            // Generated by Microsoft (R) HLSL Shader Compiler 9.29.952.3111
                ps_2_0
                def c0, 0, 0, 0, 0
                mov r0, c0.x
                mov oC0, r0

            // approximately 2 instruction slots used
            };
    }
} 
```

我编译了以下内容：

```
float4 g_A;
float4 g_B;
static float4 g_C = g_A * g_B;

float4 RenderSceneVS() : POSITION
{
    return g_C;
}

float4 RenderScenePS() : COLOR
{
    return 0.0;
}

technique RenderScene
{
    pass P0
    {          
        VertexShader = compile vs_2_0 RenderSceneVS();
        PixelShader  = compile ps_2_0 RenderScenePS();
    }
} 
```

生成`fxc /Tfx_2_0 t.fx`列表。他们不是很有趣的着色器......

# vb.net - 使用变暗变量的事件

> ID：11297498
> 
> 赞同：0
> 
> 时间：2012-07-02T16:21:43.650
> 
> 标签：vb.net, events, variables

如何将事件用于不是控件的变暗变量。
这是我的变暗变量：

```
Dim engine As New Speech.Recognition.SpeechRecognitionEngine 
```

我想使用事件“engine.SpeechRecognized”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:24:51.110

对于要显式添加处理程序的任何其他内容，您执行此操作的方式相同：

```
AddHandler engine.SpeechRecognized, AddressOf HandleSpeechRecognized 
```

有关详细信息，请参阅[声明的](http://msdn.microsoft.com/en-us/library/7taxzxka.aspx)[文档`AddHandler`](http://msdn.microsoft.com/en-us/library/7taxzxka.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:05:33.443

在 VB.NET 中添加错误处理程序有两种方法。您可以使用以下`AddHandler`语句“手动”执行此操作，例如：

```
Dim engine As New SpeechRecognitionEngine()
AddHandler engine.SpeechDetected, AddressOf OnSpeechDetected 
```

使用这种方法，您将需要手动实现`OnSpeechDetected`事件处理程序方法，例如：

```
Private Sub OnSpeechDetected(ByVal sender As Object, ByVal e As SpeechDetectedEventArgs)
    ' Do something
End Sub 
```

但是，第二种方法通常更容易。第二种方法是处理控件事件的方式。但是，只有当您的对象变量被声明为一个字段（在类级别，在任何方法之外）时才有可能。您需要做的就是`WithEvents`在变量名之前添加关键字，例如：

```
Dim WithEvents engine As New SpeechRecognitionEngine() 
```

然后，该变量名称将与所有控件一起显示在代码窗口顶部的左侧下拉框中。当您在该下拉框中选择它时，您可以在右侧下拉框中选择它的任何事件，它会自动为您创建事件处理程序方法：

```
Private Sub engine_SpeechDetected(ByVal sender As Object, ByVal e As SpeechDetectedEventArgs) Handles engine.SpeechDetected

End Sub 
```

# javascript - 解析文本以格式化内容中的 URL 并缩短 URL

> ID：11297501
> 
> 赞同：0
> 
> 时间：2012-07-02T16:22:01.667
> 
> 标签：javascript

我想将以下文本解析为带有锚标记的格式化 URL：

```
something is wrong with http://www.gbin1.com/index.html,  but cannot find the reason in http://www.google.com 
```

如何`<a href="url">url</a>`使用 JavaScript 替换上面的文本 URL 并缩短它，如下所示：

```
something is wrong with <a href="http://www.gbin1.com/index.html">gbin1.com</a>,  but cannot find the reason in <a href="http://www.gbin1.com">google.com</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:38:12.197

检查此解决方案。

```
var x = "something is wrong with http://www.gbin1.com/index.html,  but cannot find the reason in http://www.google.com";
var expression = /[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi;
var regex = new RegExp(expression);
var split = x.split(" ");
for(var i=0; i< split.length; i++){
    if(split[i].match(regex)){
        var text = split[i].split(".").slice(1).join(".").split("/")[0];

        split[i] = '<a href=\"' +split[i]+'\">'+text+'</a>';
    }
}
console.log(split.join(" ")); 
```

[http://jsfiddle.net/4JGY7/](http://jsfiddle.net/4JGY7/)

# c++ - 运算符 +' ：重新定义；不同的类型修饰符

> ID：11297502
> 
> 赞同：-1
> 
> 时间：2012-07-02T16:22:09.300
> 
> 标签：c++, operator-keyword, redefinition

我有代码：

```
// class declaration
class Vector3D;

// class declaration and definition
class Point3D { 
    // ...

    // function declaration (only needs class declarations)
    Point3D operator+(const Vector3D &);
};

// class definition
class Vector3D {
    // ...
};

// function definition (needs class definitions)
inline Point3D Point3D::operator+(const Vector3D &vector) {
    // ...
} 
```

但我得到错误： *'Graphic::Point3D::operator +' : redefinition; 不同的类型修饰符*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:23:08.093

您问题中的代码格式正确。Visual C++ 2012 Release Candidate 接受代码没有错误（我提到这一点是因为您的错误文本与 Visual C++ 错误 C2373 的文本相同）。

您的编译器有错误，或者您在问题中提供的代码与您正在编译的代码不同。

* * *

在任何情况下：an`operator+`不需要是成员函数。使用非成员函数（或两个，处理不同的操作数排序）会更简单：

```
Point3D operator+(Point3D  const& lhs, Vector3D const& rhs);
Point3D operator+(Vector3D const& lhs, Point3D  const& rhs); 
```

如果您确实保留了`operator+`成员函数，则它们应该是 const 限定的，以便可以使用 const 限定的左侧参数调用它们：

```
Point3D operator+(const Vector3D &) const;
                                    ^ const required 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:45:36.367

您发布的代码没有任何问题（假设内联函数定义放置在正确的文件中，除了缺少的`return`声明`operator+`和可能的设计问题）。它在几个编译器上编译时没有任何报告性质的错误。

如果您的编译器在类中未声明该函数这一事实存在问题，`inline`则这是您的编译器中的一个错误。在 C++ 语言中，完全由您决定要将其放置在何处`inline`：在类中、在函数定义中或两者中。所有都是合法的，并且都具有相同的效果。

编译器似乎将其`inline`称为“类型修饰符”这一事实是另一个迹象表明它有问题。`inline`不是类型修饰符。

但是，更有可能编译器完全正常，错误消息实际上是由其他一些错误引起的：`const`例如，一个错误放置的说明符，在您发布的代码中未显示或错误表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:31:17.690

尝试这个：

```
// class declaration
class Vector3D;

// class declaration and definition
class Point3D { 
    // ...

    // function declaration (only needs class declarations)
    inline Point3D operator+(const Vector3D &);
};

// class definition
class Vector3D {
    // ...
};

// function definition (needs class definitions)
inline Point3D Point3D::operator+(const Vector3D &vector) {
    // ...
} 
```

# ant - 在 ANT 应用操作中创建新目录

> ID：11297503
> 
> 赞同：0
> 
> 时间：2012-07-02T16:22:09.653
> 
> 标签：ant, minify

我正在尝试缩小目录中的 css 文件并将缩小的项目放入另一个目录中。我已经有了：

```
 <target name="css.minify">
        <apply executable="java" parallel="false" force="true" dest="FDN/css/min">
            <fileset dir="FDN/css" includes="**/*.css"/>
            <arg value="-jar"/>
            <arg path="lib/yuicompressor-2.4.7.jar"/>
            <srcfile/>
            <arg value="-o"/>
            <mapper type="glob" from="*.css" to="*-min.css"/>
            <targetfile/>
        </apply>
    </target> 
```

当 FDN/css/min 中的目录结构与 FDN/css 相同时，这可以正常工作。但是，如果添加新目录，则会发生 FileNotFound，因为它在目标中不存在。

如果目录尚不存在，如何强制创建目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:39:53.557

您可以在执行任务**之前**创建目录。`apply`

这是一个如何做到这一点的示例：

```
 <touch mkdirs="true">
        <fileset dir="src">
            <include name="**/*.css"/>
        </fileset>
        <regexpmapper from="^(.*)/[^/]*$$" to="dest/\1/.tmp" handledirsep="true"/>
    </touch>
    <delete>
      <fileset dir="dest" includes="**/.tmp"/>
    </delete> 
```

它基于[我](https://stackoverflow.com/a/1028031/127035)对另一个问题的回答。

# asp.net - 如何在查询字符串中传递“#”

> ID：11297504
> 
> 赞同：5
> 
> 时间：2012-07-02T16:22:10.850
> 
> 标签：asp.net, .net, html, query-string

我想将 '#' 传递给查询字符串，例如`?page.aspx?someParam=1234#5`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-02T16:23:11.673

请`Server.UrlEncode`在您的查询字符串上使用它将为您解析“#”

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-02T16:23:36.347

尝试使用`%23`. 这是 的 url 编码值`#`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-02T16:23:34.897

URL 编码锐字符：`%23`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-30T14:01:56.180

传递`#`,`&`和其他**特殊字符**而不会导致 asp.net 查询字符串出现问题的最佳方法是使用`Server.UrlEncode()`
参见以下示例。

```
 private void btnSubmit_Click(object sender, System.EventArgs e)
  {
     Response.Redirect("page.Aspx?"+"someParam="+Server.UrlEncode("1234#5")); 
  } 
```

或使用`%23`替换`#`，但我认为更合适的方法是使用`Server.UrlEncode()`，这样您就可以毫无问题地使用其他特殊字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-03T13:25:45.703

尝试在 url 中使用 escape(url parameter value) 方法而不是仅使用参数值

# python - 将数据拟合到 ODE 系统 - 使用带有 Scipy/Numpy/Python 的 lambda 函数键入错误

> ID：11297505
> 
> 赞同：0
> 
> 时间：2012-07-02T16:22:22.010
> 
> 标签：python, numpy, scipy, differential-equations, data-fitting

运行代码时出现以下错误：

类型错误：lambda() 正好需要 4 个参数（给定 3 个）

这是我的代码 - 我的错误来自我试图实现 Scipy 优化算法的最后一行代码（我认为）`fmin`

```
from pylab import * 
import pylab as pl
from numpy import *
from scipy.optimize import fmin
from scipy import integrate
import numpy as np

def ode(s,t,k1,k2):
    A = s[0]
    B = s[1]
    C = s[2]
    dA = -k1*A
    dB = k1*A-k2*B
    dC = k2*B
    ds = [dA,dB,dC]
    return ds

def myllsq(teta,s0,t,s):
    y_obs = s
    k1 = teta[0]
    k2 = teta[1]
    s = integrate.odeint(ode,s0,t,args=(k1,k2))
    y_cal = s[:,1]
    lsq = sum(y_obs-y_cal)**2
    return lsq 

e = lambda teta,s0,t,s: myllsq(teta,s0,t,s)

if __name__ == '__main__': 
    n = 10
    tmin = 0.0
    tmax = 9
    k1 = 0.3
    k2 = 0.2
    s0 = [1,0,0]
    t = linspace(tmin,tmax,n)
    s = [0.000,0.416,0.489,0.595,0.506,0.493,0.458,0.394,0.335,0.309]
    teta = [k1,k2]
    print e(teta,s0,t,s)
    fmin(e,teta,args=(t,s),maxiter=10000,maxfun=10000) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:26:21.480

我认为它应该是这样的：

```
fmin(e,teta,args=(s0,t,s),maxiter=10000,maxfun=10000) 
```

代替：

```
fmin(e,teta,args=(t,s),maxiter=10000,maxfun=10000) 
```

您没有将`s0`列表传递给您的函数。

作为旁注，这里没有真正的需要`lambda`。您可以直接通过`myllsq`-`e`只是效率较低的`myllsq`.

# java - Java缩放像素？

> ID：11297513
> 
> 赞同：1
> 
> 时间：2012-07-02T16:22:57.580
> 
> 标签：java, android, scale, pixel

我在 android 上做一个 2D 游戏，一切正常。问题是这个角色在我的手机（Xperia）上移动得非常快，但在屏幕更宽的手机上，他跑得非常慢。我尝试获取屏幕宽度并除以 100 并将其设置为步长，因此角色将根据宽度有一个步长 - 不起作用。有没有办法获得某种缩放像素或其他东西。感谢帮助:)

这是我做的人：

```
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
height = displaymetrics.heightPixels;
width = displaymetrics.widthPixels; 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:35:27.780

这对我有用。

```
int height = Resources.getSystem().getDisplayMetrics().heightPixels;
int width = Resources.getSystem().getDisplayMetrics().widthPixels; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:28:40.587

将步幅乘以`displaymetrics.density`。这有效地将“px”值转换为“dp”值，即它应该在所有设备上具有相同的物理宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:29:22.337

您想要根据默认值 160 的密度比例，它是一个乘数，当您获得以像素为单位的高度和宽度时，您可以在代码中使用这个乘数来正确缩放。

请参阅下面链接的开发人员页面的密度部分。

[http://developer.android.com/reference/android/util/DisplayMetrics.html#density](http://developer.android.com/reference/android/util/DisplayMetrics.html#density)

# actionscript-3 - ActionScript 3 删除所有 RESIZE 事件侦听器

> ID：11297518
> 
> 赞同：0
> 
> 时间：2012-07-02T16:23:11.387
> 
> 标签：actionscript-3, events, resize, listeners

我正在开发一个 Flash 项目，该项目被分成不同的场景。

在场景 1 中，我有多个 MovieClip（其中包括 RESIZE（和其他）的事件侦听器）。

在场景 2 中，我有一些常见的 MovieClip 和新的（其中还包括 RESIZE（和其他）在其中的事件侦听器）。

单击场景 1 中的按钮转到场景 2 后，一切正常，除非我调整舞台大小，然后出现以下错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference. 
```

我知道它与事件侦听器有关，但是单独删除它们是不现实的，因为预计会有很多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:08:52.750

如果我正确理解了您的情况，我认为您最终将需要单独删除每个侦听器，或者只添加一次调整大小侦听器。既然你提到了场景，我可以假设你正在处理时间线吗？我还假设空对象引用错误来自已从舞台上删除的场景，引用了一个不再存在的显示对象，场景被删除后对舞台的引用，或者只是调用了一个函数（调整大小处理程序）在不再存在的对象上。

处理这个问题的一些方法是：

1.  在侦听器处理函数中添加一些检查

    如果 (!this.stage) 返回

    为避免错误，但如果函数作为方法的对象已被删除，则无济于事。

2.  为了避免需要记住删除数百个侦听器，请创建 removeAllListeners 和 addCustomEventListener 函数。代替通常的 addEventListener，调用 addCustomEventListener，然后调用 addEventListener。让 addCustomListener 将目标、侦听器函数和事件字符串存储在字典或对象数组中。removeAllListeners 可以遍历字典或数组并删除所有侦听器。这有点像建立一个事件中心，但并没有那么远。

3.  不要将 RESIZE 事件侦听器添加到每个场景，只需添加一次。然后在侦听器函数中调用一个函数，无论哪个场景是活动场景或视图。最后一种是我最常看到的方法，也是最防弹的方法。在时间线上实现可能会很棘手，我一直对时间线变量范围有点模糊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:48:43.107

是的，据我所知，没有很好的自动化方法可以做到这一点，但是创建一个 registerAllListeners 和一个 removeAllListeners 方法来手动添加和删除适当的侦听器到您的对象是一个好习惯。

# python - 词典特例

> ID：11297521
> 
> 赞同：1
> 
> 时间：2012-07-02T16:23:18.437
> 
> 标签：python, dictionary

我有一个案例，到目前为止，当输入文件如下时，我成功地实现了字典：

```
line1 field1   field2   field3   field4   field5  
line2 field1   field2   field3   field4   field5 
```

等等.....

我将行号作为键，并将其`tuple (field1, field2, field3, field4)`作为字典的相应值。现在，我想将 field5 作为`key (field1, field2, field3, field4)`. 这意味着，`tuple (field1, field2, field3, field4)`需要同时成为关键和价值。在 python 中可以实现这种实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:37:13.487

如果我理解你的问题是正确的，是的。但是你会为一个大的集合浪费大量的空间。

```
dic     = {}
tuple1  = ("field1","field2","field3","field4")

dic["line1"] = tuple1
dic[tuple1]  = "field5"

print dic["line1"]
print dic[tuple1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:08:17.867

> [http://docs.python.org/library/functions.html?highlight=tuple#tuple](http://docs.python.org/library/functions.html?highlight=tuple#tuple)
> 
> tuple 是不可变的序列类型，如序列类型 — str、unicode、list、tuple、bytearray、buffer、xrange 中所述。对于其他容器，请参阅内置的 dict、list 和 set 类以及 collections 模块。

元组是不可变的，这意味着您不能从元组中追加或删除项目。您必须重建变量才能更改它。如果您打算及时更改可迭代变量，请使用`list`.

除了元组是不可变的之外，这个问题有点模糊。

这是一种附加`field5`到字典的方法。

```
a = {1:(f1,f2,f3,f4), 2:(f1,f2,f3,f4)} # this is our dictionary contains tuple

for key, value in a.iteritems(): # iterate over dictionary
    a[key] += (field5,) # comma is important, you can only concanate tuple with tuple.

# or you can do
a[linenumber] += (field5,) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:55:52.733

> 这意味着，元组 (field1, field2, field3, field4) 需要同时是键和值。在 python 中可以实现这种实现吗？

是的。没有什么能阻止你这样做：

```
key = ("f1", "f2", "f3", "f4", "f5")
value = ("f1", "f2", "f3", "f4", "f5")
d = {key: value} 
```

如果我理解正确，那么到目前为止，您一直在做这样的事情：

```
line_no = 1
d = {}
for line in open(FILE):
    d[line_no] = line  # line = ("f1", "f2", "f3", "f4")
    line_no += 1 
```

..？

如果没有，请详细说明我错在哪里或发布您的源代码:)

编辑：

好的，谢谢你的评论，我想我现在明白了。我会这样做：

```
d = {}
for line in open(FILE):
    d[line] = []
    d[line].append(f5)  # line = ("f1", "f2", "f3", "f4"), f5 = timestamp 
```

这样，您将使用整个元组作为键，并可以从具有相同 f1、f2、f3、f4 的记录中减去时间戳 (f5)。对我来说，这似乎更容易在 SQL 中完成。

这样，随着负载的增加，您将拥有恒定的查找时间和线性时间。但我认为如果密钥大小不一，你会受到一些性能影响。

让我想想你如何从彼此中提取时间戳..

编辑2：

是的，您可以列出该对中的第一个元素： fl = [p[0] for p in pairs]] 然后过滤掉出现次数超过 1 的任何人：

像这样的东西 l2 = [l for l in fl if len(l) > 1]

但这似乎不是很有效..

# vb.net - 在 VB.NET 中拖放

> ID：11297535
> 
> 赞同：0
> 
> 时间：2012-07-02T16:24:30.450
> 
> 标签：vb.net

我正在 VB.NET 中准备一个国际象棋程序。所以我想要创建的是一个拖放事件。在拖放事件中，原始图像保持不变，副本放置在您想要放置的任何位置。

但我想做的是，我想在选择图像后立即删除原件。知道我该怎么做吗？

我的用户界面由 64 个图片框组成，每行 8 个。它们上面都有各自的图片。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:24:36.287

@Hans 是正确的；将其作为一个 PictureBox 执行此操作会容易得多。但是，如果您卡在当前使用的方法上，请将源 PictureBox 上的 MouseMove 函数中的代码更改为如下所示。它基本上将图像复制到一个变量，然后将源图像设置为 Nothing。当然，如果未进行移动（将源图像设置回 nImage 的值），您将不得不处理，以及在移动完成后处理变量的处置。

```
Private Sub PictureBox1_MouseMove(ByVal sender As Object, ByVal e As  _
System.Windows.Forms.MouseEventArgs) Handles PictureBox1.MouseMove
    If m_MouseIsDown Then
        ' Initiate dragging and allow either copy or move.
        Dim iImage As Image
        iImage = PictureBox1.Image
        PictureBox1.Image = Nothing
        PictureBox1.DoDragDrop(iImage, DragDropEffects.Copy Or _
DragDropEffects.Move)

    End If
    m_MouseIsDown = False
End Sub 
```

# drupal - 在 drupal Commerce 中的产品视图中仅显示唯一术语

> ID：11297544
> 
> 赞同：0
> 
> 时间：2012-07-02T16:25:01.267
> 
> 标签：drupal, drupal-7, views, commerce

我在 drupal 商业中作为产品进口了一堆葡萄酒，我想制作一个“区域”页面，以列出所有区域的列表，这些区域通过从每个产品中拉出“区域”而自动填充，但仅显示唯一值.

目前，我有一个列表，列出了具有相同区域的所有产品，列出了很多次，但我无法在视图中找到只显示区域一次的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:06:38.070

尝试转到视图的“格式”部分下的“**设置**”，并将您的区域设置为“**分组字段 Nr.1** ” - 然后您可以在下方列出该区域的产品或不列出......

============== 编辑 ==================

如果您不想在术语下显示葡萄酒，只需从头开始创建一个新视图，然后在创建它时，选择您希望将其设为分类术语视图，而不是内容视图。应该这样做！！

![在此处输入图像描述](../Images/f0681b364cb38e55baa88ba57e81650c.png)

# sql - 报告 EAV 数据库模型的行业标准是什么？

> ID：11297546
> 
> 赞同：0
> 
> 时间：2012-07-02T16:25:09.813
> 
> 标签：sql, database, reporting, entity-attribute-value, cognos

在我所见的任何地方，我都能看到解释和深入探讨 EAV 为何不好，以及我们应该做些什么。

我还没有找到实际显示 EAV 数据库报告方面的解决方案的帖子。

我被要求提供一些基本报告，以及对数据库中的各种键进行切片和切块。（想想用户资料 - 有多少人住在这个邮政编码中并且喜欢狗）。

我有 Cognos 10，数据存储在 SQL 2005 机器上。我怎样才能以合理的方式完成报告这些数据？

# javascript - 使用 jQuery 防止 html 输入中的值

> ID：11297547
> 
> 赞同：1
> 
> 时间：2012-07-02T16:25:13.883
> 
> 标签：javascript, jquery, regex, validation, input

如果该输入与其最新按键的**组合**值未传递正则表达式，如何防止用户更改输入框中的字符串？

我看到了各种关于如何使用 keypress 测试单个字符的示例，但我需要将**整个值**与正则表达式匹配，而不仅仅是他们按下的键。

例如，文本框需要符合以下正则表达式：

```
"^023-[0-9]{0,7}$" 
```

因此，如果他们想更改`"023"`为，则应在删除字符`"23"`时阻止他们。删除after`0`也是如此。一旦他们输入超过 7 个数字，它也应该阻止他们。**这不能在模糊上完成。**必须在每次击键后完成。**性能不是问题。**`-``023``023`

 ****如果我在 jQuery 中使用 keypress() 事件，并像这样获取输入元素的值：

```
$(this).val() 
```

然后我只会在他们按下键之前得到值 - 而不是之后。因此，无法针对我的正则表达式测试输入。我不能简单地将按下的键附加到这个字符串，因为我**不能假设他们只在字符串的最右侧输入键**。

我研究了 keydown/keyup 事件，虽然 keyup 似乎在用户按下一个键后给了我输入的当前值，但我发现很难消除他们键入的内容的影响...... which keypress()显然没有问题。

```
var regex = new RegExp("^023-[0-9]{0,7}$");

$("#number").keyup(function(event) {
    var number = $(this).val();

    if(!regex.test(number)) {
        event.preventDefault();

        return false;
    }
}); 
```

上面的代码只是不起作用。似乎 keypress() 使我能够停止他们键入的内容，但 keyup 使我能够获取当前值。我需要一个两者兼得的解决方案；）

问题实际上源于浏览器没有 MVC 架构这一事实。模型就是视图。不幸的是，我们无法在视图更新之前验证更新的模型......因为我们需要在 keyup 事件期间更新视图以获取更新的模型数据......到那时，阻止它们更新为时已晚查看，因为它已经更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:29:36.693

How about this:

```
var prevValue = "";
$("#number").keydown(function(e) {
   prevValue = $(this).val();
});

$("#number").keyup(function(e) {
...
   if(!regex.test(number))
      $(this).val(prevValue);
      // show error or other processing you need to do
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:33:33.847

尝试这个：

```
var pattern = new RegExp("^023-[0-9]{0,7}$");

$("#number").change(function(e){
if (!pattern.test($(this).val())) {
      return false
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:35:54.427

如果您可以使用 jQuery Validate 插件，您可以创建自定义验证器来匹配您的 RegEx。然后您所要做的就是将验证器映射到该输入。您仍然需要在服务器端进行验证，但您可能已经在这样做了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T16:30:18.467

您拥有的`event`参数将包含您正在处理的事件的所有详细信息。这将包括被按下的键。

值得注意的是，`keydown`and `keyup`events 将返回按下的键，而`keypress`将返回输入的字符，这可能更适合您的选择。

请参阅此处的帮助页面：http: [//api.jquery.com/keypress/](http://api.jquery.com/keypress/)了解更多详细信息。

总之，虽然`event.which`应该做你想做的事。您可以将其与文本框的原始值结合起来，并从中获取新值。如果它无效，则取消该事件，如果它有效，则放手...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T12:08:32.867

要执行您想要的操作，需要[jquery caret 插件](http://code.google.com/p/jcaret/downloads/list)。请注意，您需要从文件开头删除注释（或至少移动它们），否则代码开头的字节顺序标记将[导致错误](http://code.google.com/p/jcaret/issues/detail?id=1)。

因此，您需要做的是捕获按键，在字符串中的正确位置插入字符，检查新字符串是否有效，然后显示新插入或不显示。我认为以下内容可以满足您的需求：

```
$(document).ready(function(){
    var regex = new RegExp("^023-[0-9]{0,7}$");
    var caretpos;

    $('#number').keypress(function(event){
        // get the caret position
        caretpos = $(this).caret().start;
        //split the current value according to where the caret is
        valuestart = $(this).val().substring(0,caretpos);
        valueend = $(this).val().substring(caretpos);
        // insert the fired character into the string
        valuetocheck = valuestart + String.fromCharCode(event.which) + valueend;
        // check if the proposed new value passes the regex
        if (!regex.test(valuetocheck)) {
            // failed, prevent the character being shown
            event.preventDefault();
        }
    });
}); 
```

我已经在最新版本的 FF、Chrome、Safari、Opera 和 IE9 中对此进行了测试。在 FF 和 Opera 中，光标按键在其他浏览器中像往常一样移动插入符号时被完全忽略，因此您可能需要添加一些代码以确保其行为一致。您可能还想添加一些代码来处理如果用户选择某些字符而不是单击输入会发生的情况。jquery caret 插件[有选择的使用示例](http://www.jquery-plugin.buss.hk/my-plugins/jquery-caret-plugin)。****

# javascript - JavaScript function call passes x && y as parameters

> ID：11297550
> 
> 赞同：1
> 
> 时间：2012-07-02T16:25:42.493
> 
> 标签：javascript, extjs, extjs4

> **Possible Duplicate:**
> [&& operator in Javascript](https://stackoverflow.com/questions/8720645/operator-in-javascript)

In the sample code of the [ExtJS web desktop demo](http://docs.sencha.com/ext-js/4-1/#!/example/desktop/desktop.html) there is the following call:

```
this.setActiveButton(activeWindow && activeWindow.taskButton); 
```

to method:

```
setActiveButton: function(btn) {
    if (btn) {
        btn.toggle(true);
    } else {
        this.items.each(function (item) {
            if (item.isButton) {
                item.toggle(false);
            }
        });
    }
} 
```

What is the purpose of the `&&` in the function call?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:28:04.587

It's to make sure that, before trying to find a property on an object referenced by the variable "activeWindow", the variable actually does reference something. If it's `null` (or a few other things; we'll assume the code knows that it's either an object reference or `null`), that would cause an exception. This way, the function is passed either the button reference (whatever that is), or `null`.

To put it another way, it's the same as this:

```
this.setActiveButton(activeWindow != null ? activeWindow.taskButton : null) 
```

The `&&` operator in JavaScript is kind-of special compared to the `&&` in C or Java or other languages like that. In JavaScript, the left side is evaluated first. If that value is "falsy" (`null`, `undefined`, `false`, zero, or an empty string), then that's the value of the expression. Otherwise, the value of the expression is the value of the right-hand side.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:29:16.990

See [Short-circuit evaluation](http://en.wikipedia.org/wiki/Short-circuit_evaluation) for additional information regarding this method.

> The short-circuit expression x Sand y (using Sand to denote the short-circuit variety) is equivalent to the conditional expression if x then y else false; the expression x Sor y is equivalent to if x then true else y.

# mysql - SQL 一对一关系与扁平化

> ID：11297552
> 
> 赞同：4
> 
> 时间：2012-07-02T16:25:47.750
> 
> 标签：mysql, sql

我正在使用一个标准的 SQL 数据库，我试图弄清楚是否要展平表格或使其更加“面向对象”。对我来说，较小的表格更容易阅读，但它需要连接表格并具有一对一的关系。这通常是一种很好的做事方式，还是在 SQL 世界中不受欢迎？

我有一个具有以下属性的表：

```
MYTABLE
- ID
- NAME
- LABEL
- CREATED_TS
- MODIFIED_TS
- CREATED_USER
- MODIFIED_USER 
```

对我来说，创建/修改的字段将是它们自己的对象。实际上还有更多字段，所以它不仅仅是这么小。我认为创建另一个名为“MYTABLE_MODINFO”的表或类似的表将具有 CREATED 和 MODIFIED 字段，并且在需要来自它们的数据时将它们连接起来。这些表不是高访问量表，它们每分钟不会有大量查询，甚至不会有数百行，所以我认为效率不会成为问题。

所以我主要想知道的是这会是一个普遍接受的设计，还是你应该保持你的表格结构平坦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:34:35.240

您应该在同一个表中创建审计信息。原因是这些数据是行的一部分并且是一对一的关系，因此没有必要将其分开。

如果您想存储审计信息（审计跟踪/历史），那么您可以创建另一个表，但是在大多数情况下，我看到这是通过“复制”数据并创建代理键和映射回原始行来构建的。我在引号中列出重复的原因是因为审计本质上需要复制旧数据......如果它在写入后被链接并且可以更改，那么它并不是真正的审计。

只是我的两分钱。如果它没有意义，那么我可以提供一些例子。但是，要点是每一行只会有一个当前的修改信息，那么如果它永远不会超过一个，为什么要打破它呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:34:14.863

避免数据库“一对一”，您将失去性能、可伸缩性和独立性。如果您想为每个 ID 存储 2 张图片，您能想象会发生什么吗？您会创建另一个字段还是重复该行？？...当您想要升级时更容易创建关系以获得更多自由，请查看本教程。

[http://www.youtube.com/watch?v=Onzm-PxSjtE](http://www.youtube.com/watch?v=Onzm-PxSjtE)

[http://folkworm.ceri.memphis.edu/ew/SCHEMA_DOC/comparison/erd.htm](http://folkworm.ceri.memphis.edu/ew/SCHEMA_DOC/comparison/erd.htm)

[http://www.visual-paradigm.com/product/vpuml/provides/dbmodeling.jsp](http://www.visual-paradigm.com/product/vpuml/provides/dbmodeling.jsp)

除此之外，您应该规范化数据库以确保一切都处于最佳状态。请记住，最重要的是获取您需要的内容并进行调整。

[http://databases.about.com/od/specificproducts/a/normalization.htm](http://databases.about.com/od/specificproducts/a/normalization.htm)

[http://www.youtube.com/watch?v=xzeuBwHkKxw](http://www.youtube.com/watch?v=xzeuBwHkKxw)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:41:40.290

在我看来，RDBMS 设计与面向对象的方法不同。您提到的示例不是不同的对象域，而是记录的数据继承。由于不会有任何大量查询/执行表的开销，因此您应该将它们保存在同一个表中以进行审计，并且在规范化数据时也更容易使用。

# python - 如何将一个列值除以前一行列（不是同一列）并将结果作为新维度添加到 numpy 数组？

> ID：11297553
> 
> 赞同：0
> 
> 时间：2012-07-02T16:25:48.303
> 
> 标签：python, arrays, numpy

我想要做的是采用这样的 numpy 数组：

```
[[1, 2,  4, 7,  9, 15,  0],
 [3, 4,  3, 5, 10,  2, -2],
 [5, 6, 56, 7, 20,  1,  2]] 
```

我想将每一行的最后一列除以前一行的第 4 列，然后将结果作为新维度添加到数组中，我想要的输出应该如下所示

```
[[1, 2,  4, 7,  9, 15,  0,  0],
 [3, 4,  3, 5, 10,  2, -2, -.2857],
 [5, 6, 56, 7, 20,  1,  2, .4]] 
```

这可以在没有 for 循环的情况下完成吗？（好吧，我想如果没有 for 循环这样做效率不高）但我仍然不确定如何用一个来做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:49:42.347

```
import numpy as np
myarray = np.array([[1,2,4,7,9,15,0.0], [3, 4,3,5,10,2,-2], [5,6,56,7,20,1,2]])
#the division:
column_divs = myarray[:,-1][1:] / myarray[:,3][:-1]
#adds a 'placeholder' zero value, as the first element:
column_divs = np.hstack(([0], column_divs))
#adds the required column to the end of the array:
print np.hstack((myarray, column_divs.reshape(-1,1)))
#output:
[[  1\.      2\.       4\.       7\.       9\.      15\.      0\.       0\.        ]
 [  3\.      4\.       3\.       5\.      10\.       2\.     -2\.      -0.28571429]
 [  5\.      6\.      56\.       7\.      20\.       1\.      2\.      0.4        ]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:40:32.937

```
import numpy as np
lis=[[1, 2,  4, 7,  9, 15,  0],
 [3, 4,  3, 5, 10,  2, -2],
 [5, 6, 56, 7, 20,  1,  2]]
new_lis=[lis[i][:]+[lis[i][-1]/lis[i][3]] for i in range(len(lis))]
nparray=np.matrix(new_lis) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:43:20.697

你会想要使用[np.concatenate](http://docs.scipy.org/doc/numpy/reference/generated/numpy.concatenate.html)：

```
np.concatenate((a, np.concatenate(([[0]], a[1:, [-1]] / a[:-1, [3]].astype(float)))), axis=1) 
```

如果您的`astype(float)`数组具有 int dtype，则 Python 2.x 需要 。

这也可以用`hstack`and来写`vstack`：

```
np.hstack((a, np.vstack(([[0]], a[1:, [-1]] / a[:-1, [3]].astype(float))))) 
```

与其对行进行切片，不如使用`roll`：

```
np.hstack((a, np.vstack((a[:, [-1]] / np.roll(a[:, [3]], 1).astype(float))))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T16:39:25.403

提前为未回答的问题道歉，但除非您优先考虑算法纯度而不是性能，否则您肯定希望使用 for 循环或类似结构来做到这一点。

可能有一种方法可以完全通过矩阵运算来完成此操作（将原始值乘以自定义内核并将结果连接为原始矩阵上的新列），但效率不高。`O(n^log7)`考虑Strassen算法（两个方阵的有效乘法示例`O(n^2.807)`）`n`是 一个 for 循环将是`O(m)`，其中`m`是相关矩阵中的行数。

# url - AppleScript 创建 URL 和锚文本，作为 URL 类型数据传递到剪贴板

> ID：11297555
> 
> 赞同：4
> 
> 时间：2012-07-02T16:25:55.690
> 
> 标签：url, applescript, clipboard

有没有办法获取文本标签和 URL 并使用 Applescript 将它们添加到 Mac 剪贴板，以便富文本应用程序将数据视为 URL 并在粘贴数据时制作链接的锚文本。

我有需要具有“屏幕”标题（锚文本）的无标题参考 URL（通过代码生成）。我可以创建 URL 和锚文本。但是，如何组合它们以便 Mac 剪贴板将数据视为 URL？我试过：

```
set the clipboard to "<a href=\"" & theURI & "\" target=\"_blank\">" & theAnchor & "</a>" 
```

..但是当使用来自其他应用程序的这些数据时，我得到了 HTML 字符串，而不是带有锚文本的链接作为可见的屏幕文本。

StandardAdditions 有“URL”和“网页”类，但我看不到如何应用它们。这编译但运行时失败：

```
set myURL to theURI as URL
set myLinkAnchor to theAnchor as text
set linkURL to {URL: myURL, name: myLinkAnchor} as web page 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-01T23:47:12.657

AppleScript 确实支持将十六进制编码的 HTML 放入剪贴板：

```
set the clipboard to «data HTML3c6120687265663d22687474703a2f2f7777772e69727261646961746564736f6674776172652e636f6d22207461726765743d225f626c616e6b223e4972726164696174656420536f6674776172653c2f613e» 
```

这是相当迂回的，但这里是如何做你想做的事：

```
set theURI to "http://www.irradiatedsoftware.com"
set theAnchor to "Irradiated Software"
set the clipboard to "<a href=\"" & theURI & "\" target=\"_blank\">" & theAnchor & "</a>"
set theHEX to do shell script "pbpaste | hexdump -ve '1/1 \"%.2x\"'"
if theHEX is "" then
    beep
else
    run script "set the clipboard to «data HTML" & theHEX & "»"
end if 
```

YMMV。我尝试将其粘贴到 Word 2011 中，效果很好。我无法让 Pages 接受粘贴。另外，我尝试粘贴到新电子邮件（Mail.app）中，链接很好，但您无法单击它。但是，收件人可以单击该链接。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T16:33:25.817

您不能假设所有应用程序都接受 HTML 并将其自动转换为可点击的字符串。您执行此操作的能力取决于目标应用程序如何处理富文本。有些人可能使用 Cocoa 的内置富文本区域类，而其他人可能有自己的完全自定义的文本区域，每个区域都以自己的方式处理 URL。您可以查看目标应用程序的 Dictionary 以查看它是否允许您以可识别的方式创建 URL。

# html - How to hide only a part of the content of a li with CSS?

> ID：11297556
> 
> 赞同：1
> 
> 时间：2012-07-02T16:26:02.727
> 
> 标签：html, css

In the following code I would like to hide "Hello world" but keep visible my ul.myphotos with CSS.

Here is a sample of what I have:

```
<ul class="content">
    <li>
        Hello world
        <ul class="myphotos">
            <li>Photo1</li>
            <li>Photo2</li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:29:06.567

你不能用你有 atm 的代码来做到这一点（嗯，是的，你可以用一些相当“hacky”的技巧......）。

我会提出一个干净的解决方案：将该文本包装在一个单独的标签中，例如：

```
<ul class="content">
    <li>
        <span>Hello world</span>
        <ul class="myphotos">
            <li>Photo1</li>
            <li>Photo2</li>
        </ul>
    </li>
</ul> 
```

现在您可以轻松地说：

```
li > span{
   display:none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:29:40.980

Put Hello World in `<span>` tags with an id and then hide that.

# c# - 如何将带有动画的 3DS 模型导入 Silverlight Web 应用程序？

> ID：11297557
> 
> 赞同：1
> 
> 时间：2012-07-02T16:26:03.927
> 
> 标签：c#, visual-studio-2010, silverlight-5.0, 3dsmax, 3ds

我使用 3dsMax 2012 创建了一个 3D 人物角色。然后我使用 morpher 技术对角色的面部表情进行动画处理。我将把这个角色嵌入到 Silverlight Web 应用程序中。我正在使用 Silverlight 版本 5 和 Visual Studio 2010。

为了获得 3D 模型，我将使用 silvermotion 方法。 [http://www.postvision.net/SilverMotion/Default.aspx](http://www.postvision.net/SilverMotion/Default.aspx) 但是当我使用它时，它需要 .3DS 文件格式才能查看角色。当我将角色导出为 .3DS 文件格式（使用我以 .max 文件格式创建的面部动画）时，它不会包含我使用的动画。我通过使用关键帧在多边形中使用了动画（动画为角色说话）。

如果有人可以帮助我尽快回复我。如果有另一种方法可以将带有 3D 模型的动画放入 silverlight 网页，请回复我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T05:56:34.080

请查看以下网络链接：http: [//blogs.microsoft.co.il/maxim/2009/03/31/daily-tip-how-to-import-3d-model-to-wpf-from- 3d-max/](http://blogs.microsoft.co.il/maxim/2009/03/31/daily-tip-how-to-import-3d-model-to-wpf-from-3d-max/)

# java - 如何在并发 java 编程中指定线程执行？

> ID：11297558
> 
> 赞同：0
> 
> 时间：2012-07-02T16:26:07.377
> 
> 标签：java, jsp, java.util.concurrent

我正在使用 Callable、Executor 和 Future 对象从单独的线程并行调用 web 服务。执行完所有 web 服务调用后，我在 jsp 中显示结果。

在这里我有一个疑问：如果其中一个 web 服务调用失败，如何在 jsp 中显示成功调用的结果？

如果在这种情况下一个线程需要更多时间来执行，我想跳过该响应并在 jsp 中显示其余结果。

我试图在一个网络服务中添加一个`Thread.sleep(1000)`，但响应在 jsp 中也有延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:36:54.317

您可能需要在启动所有其他线程的主线程中考虑[CountdownLatch](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html)。

这个想法是，在你产生所有线程之后，你开始在给定超时的闩锁上等待。每个线程在完成时都必须调用`countDown()`闩锁上的方法。因此，当所有线程都完成或超时已过期时，主线程将继续进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:17:19.097

有人发布了这个并删除了他的答案，但我认为这可能会有所帮助。

* * *

您可以使用[ExecutorCompletionService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html)

您可以简单地提交到 ExecutorService 并准备好在`poll`ExecutorService 上呈现。它会给你最近完成的未来，或者坐在那里等到一个准备好。

```
ExecutorCompletionService e = new ExecutorCompletionService(...);

for(int i =0; i < n ; i++)
    e.submit(..); 
```

当你准备好时

```
for(int i =0 ; i < n; i++){
   T t = e.poll(); //or with a timeout: T t = e.poll(100, TimeUnit.MILLISECONDS); 
   //do rendering
} 
```

应该考虑您的用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:49:14.363

如果您使用的是执行器服务，您可以在提交所有可调用对象后通过超时终止它：

```
executor.shutdown();
boolean terminated = executor.awaitTermination(1, TimeUnit.SECONDS); 
```

如果您在提交作业时存储了执行程序返回的期货，您可以遍历列表并检查哪个任务尚未完成：

```
if (!terminated) {
    for (Future f : futureList) {
        if (!f.isDone()) { System.out.println("This task " + f + " did not complete"); }
    }
} 
```

# internet-explorer-7 - 在ie7中用jquery绑定mouseout

> ID：11297561
> 
> 赞同：0
> 
> 时间：2012-07-02T16:26:29.970
> 
> 标签：internet-explorer-7, mouseevent, jquery

我需要在 jquery 中重新绑定 mouseout 事件，因为当鼠标转到主 div 的子项（我绑定了 mouseout 事件）时，会调用 mouseout 事件并且我不想要它。所以我这样做：

```
$('.div-hidden').live('mouseout', function (event) {
    e = event.toElement || event.relatedTarget;
    if (e.parentNode.parentNode == this || e == this || e.parentNode == this) {
        return;
    }
    if ($(this).parent().css('overflow') == "visible") {
        var parent_height = parseInt($(this).parent().parent().css('height').substr(0, $(this).css('height').length), 10);
        $(this).parent().animate({
            top: (parent_height - 40) + "px"
        }, 500, function () {
            $(this).css('overflow', 'hidden');
        });
    }
}); 
```

这在 ie8/9 和其他浏览器中运行良好，但在 ie7 中不行。我也尝试用 bind() 改变 live() 但它不起作用。我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:31:33.567

似乎您想要 mouseleave 事件：

```
$('.div-hidden').live('mouseleave', function (event) {
    if ($(this).parent().css('overflow') == "visible") {
        var parent_height = parseInt($(this).parent().parent().css('height').substr(0, $(this).css('height').length), 10);
        $(this).parent().animate({
            top: (parent_height - 40) + "px"
        }, 500, function () {
            $(this).css('overflow', 'hidden');
        });
    }
}); 
```

`.live`除非您的 jQuery 版本 < 1.4.2 或其他版本，否则不应使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:28:55.563

在这种情况下，也许您最好使用 mouseenter / mouseleave 事件？

# android - 从多表 SQLite DB 填充 Listview

> ID：11297567
> 
> 赞同：1
> 
> 时间：2012-07-02T16:26:49.137
> 
> 标签：android, database, sqlite, android-listview, android-sqlite

我有一个带有多个表的 SQLite DB，我想从其中一个表中读取所有内容，并使用它来填充列表，但我不知道为什么当我尝试从表中读取所有数据时应用程序崩溃.

这是我的代码：活动：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.app.ListActivity;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView.OnItemLongClickListener;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class Manage_Groups extends ListActivity implements OnClickListener{

    Button create_group_button;

    DB_Handler db;
    Groups_DB_Adapter groups_db;

    ListView groupsList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.manage_groups);

        // Initializing the buttons according to their ID
        create_group_button = (Button)findViewById(R.id.create_group_button);

        //Defines listeners for the buttons
        create_group_button.setOnClickListener(this);

        groups_db = new Groups_DB_Adapter(this);

        // Opens the Main DB for read
        db = new DB_Handler(this);
        db.openToRead();

        // Opens the Groups DB for read
        groups_db.openToRead();

        // This is where it crashes...
        Cursor mCursor = groups_db.getAllGroups();
        startManagingCursor(mCursor);
        String[] from = new String[]{Groups_DB_Adapter.GROUP_NAME};
        int[] to = {};
        SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, 
                                    mCursor, from, to = new int[] { android.R.id.text1 });

        setListAdapter(cursorAdapter);
        groupsList = getListView();

        // Listens for a long click, and then pops up a delete dialog
        groupsList.setOnItemLongClickListener(new OnItemLongClickListener() {

            public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                    int pos, long id) {
                AlertDialog.Builder delete_group_alert = new AlertDialog.Builder(Manage_Groups.this);
                delete_group_alert.setMessage("Are you sure you want to delete this group?");
                final int positionToRemove = pos;

                // No - closes the dialog and does nothing
                delete_group_alert.setNegativeButton("No", null);

                // Yes - Deletes the clicked group from the DB
                delete_group_alert.setPositiveButton("Yes", new AlertDialog.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        groups_db.deleteGroup(positionToRemove);
                    }});
                delete_group_alert.show();

                return true;
            }
        });
    }

    //@Override
    public void onClick(View src) {
        Intent i;
        switch (src.getId())
        {
        case R.id.create_group_button:

            finish();

            i = new Intent(this, Create_Group.class);
            startActivity(i);
            break;  
    }

}
} 
```

组适配器：

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class Groups_DB_Adapter {

    // A reference to the database used by this application/object
    private SQLiteDatabase db;
    private OpenHelper db_open_helper;

    // Groups table
    static final String GROUPS_TABLE_NAME = "groups_table";
    static final String GROUP_ID = "group_id";
    static final String GROUP_NAME = "group_name";

    // The Activity or Application that is creating an object from this class
    private final Context context;

    private static class OpenHelper extends SQLiteOpenHelper {

        OpenHelper(Context context) {
            super(context, DB_Handler.DATABASE_NAME, null, DB_Handler.DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        }
    }

    public Groups_DB_Adapter(Context ctx) {
        this.context = ctx;
    }

    // Opens the DB for write
    public Groups_DB_Adapter openToWrite() throws SQLException {
        this.db_open_helper = new OpenHelper(this.context);
        this.db = this.db_open_helper.getWritableDatabase();
        return this;
    }

    // Opens the DB for read
    public Groups_DB_Adapter openToRead() throws SQLException {
        this.db_open_helper = new OpenHelper(this.context);
        this.db = this.db_open_helper.getReadableDatabase();
        return this;
    }

    // Closes the DB
    public void close() {
        this.db_open_helper.close();
    }

    // Adds a new group
    public void addNewGroup(String groupName)
    {
        // this is a key value pair holder used by android's SQLite functions
        ContentValues values = new ContentValues();
        values.put(GROUP_NAME, groupName);

        // ask the database object to insert the new data 
        try{db.insert(GROUPS_TABLE_NAME, null, values);}
        catch(Exception e)
        {
            Log.e("DB ERROR", e.toString());
            e.printStackTrace();
        }
    }

    // Deletes a specific group
    public boolean deleteGroup(long rowId) {

        return this.db.delete(GROUPS_TABLE_NAME, GROUP_ID + "=" + rowId, null) > 0;
    }

    // Returns a Cursor with all the groups
    public Cursor getAllGroups() {

        return this.db.query(GROUPS_TABLE_NAME, new String[] { GROUP_ID,
                GROUP_NAME }, null, null, null, null, null);
    }

    // Returns a specific group
    public Cursor getGroup(long rowId) throws SQLException {

        Cursor mCursor =

        this.db.query(true, GROUPS_TABLE_NAME, new String[] { GROUP_ID, GROUP_NAME}, 
                GROUP_ID + "=" + rowId, null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    // Updates a group
    public boolean updateGroup(long rowId, String name){
        ContentValues args = new ContentValues();
        args.put(GROUP_NAME, name);

        return this.db.update(GROUPS_TABLE_NAME, args, GROUP_ID + "=" + rowId, null) >0; 
    }

} 
```

主数据库处理程序：

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteStatement;
import android.util.Log;

import java.util.ArrayList;
import java.util.List;

public class DB_Handler {

    // The database's name and version
    public static final  String DATABASE_NAME = "my_db";
    public static final int DATABASE_VERSION = 2;

    // A reference to the database used by this application/object
    static SQLiteDatabase db;
    private OpenHelper db_open_helper;

    // The Activity or Application that is creating an object from this class
    private static Context context;

    // Contacts table
    static final String CONTACTS_TABLE_NAME = "contacts_table";
    static final String CONTACT_PHONE_NUMBER = "contact_phone_number";
    static final String CONTACT_NAME = "contact_name";
    private static final String CONTACTS_TABLE_CREATE = "CREATE TABLE " + CONTACTS_TABLE_NAME +
                                                        " (" +
                                                        CONTACT_PHONE_NUMBER + " INTEGER, " +
                                                        CONTACT_NAME + " TEXT);";

    // Groups table
    static final String GROUPS_TABLE_NAME = "groups_table";
    static final String GROUP_ID = "group_id";
    static final String GROUP_NAME = "group_name";
    private static final String GROUPS_TABLE_CREATE = "CREATE TABLE " + GROUPS_TABLE_NAME +
                                                      " (" +
                                                      GROUP_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                                                      GROUP_NAME + " TEXT);";

    // Contacts <-> Groups Relations table
    static final String CONTACT2GROUP_TABLE_NAME = "contact2group_table";
    private static final String CONTACT2GROUP_TABLE_CREATE = "CREATE TABLE " + CONTACT2GROUP_TABLE_NAME +
                                                             " (" +
                                                             CONTACT_PHONE_NUMBER + " INTEGER, " +
                                                             GROUP_ID + " INTEGER);";

    // Constructor to simplify Business logic access to the repository 
    public DB_Handler(Context context) {
        DB_Handler.context = context;
    }

    public DB_Handler openToRead() throws android.database.SQLException {
        db_open_helper = new OpenHelper(context, DATABASE_NAME, null, DATABASE_VERSION);
        db = db_open_helper.getReadableDatabase();
        return this;    
    }

    public DB_Handler openToWrite() throws android.database.SQLException {
        db_open_helper = new OpenHelper(context, DATABASE_NAME, null, DATABASE_VERSION);
        db = db_open_helper.getWritableDatabase();
        return this;    
    }

    public void close(){
        db_open_helper.close();
    }

    public class OpenHelper extends SQLiteOpenHelper {

        public OpenHelper(Context context, String name,
                CursorFactory factory, int version) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        // Creates the DB
        @Override
        public void onCreate(SQLiteDatabase db) {
            // Creating the Contacts table
            db.execSQL(CONTACTS_TABLE_CREATE);

            // Creating the Groups table
            db.execSQL(GROUPS_TABLE_CREATE);

            // Creating the Contact2Group table
            db.execSQL(CONTACT2GROUP_TABLE_CREATE);
        }

        // Upgrades the DB if a newer version is available
        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + CONTACTS_TABLE_NAME);
            db.execSQL("DROP TABLE IF EXISTS " + GROUPS_TABLE_NAME);
            db.execSQL("DROP TABLE IF EXISTS " + CONTACT2GROUP_TABLE_NAME);
            onCreate(db);
        }
    }

} 
```

**编辑：添加了日志** 这是日志：

```
07-02 17:05:35.340: E/AndroidRuntime(1281): FATAL EXCEPTION: main
07-02 17:05:35.340: E/AndroidRuntime(1281): java.lang.RuntimeException: Unable to start activity ComponentInfo{meetapp.pack/meetapp.pack.Manage_Groups}: android.database.sqlite.SQLiteException: no such table: groups_table: , while compiling: SELECT group_id, group_name FROM groups_table
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.os.Looper.loop(Looper.java:137)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at java.lang.reflect.Method.invokeNative(Native Method)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at java.lang.reflect.Method.invoke(Method.java:511)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at dalvik.system.NativeStart.main(Native Method)
07-02 17:05:35.340: E/AndroidRuntime(1281): Caused by: android.database.sqlite.SQLiteException: no such table: groups_table: , while compiling: SELECT group_id, group_name FROM groups_table
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1449)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1405)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1485)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at meetapp.pack.Groups_DB_Adapter.getAllGroups(Groups_DB_Adapter.java:127)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at meetapp.pack.Manage_Groups.onCreate(Manage_Groups.java:53)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.app.Activity.performCreate(Activity.java:4465)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-02 17:05:35.340: E/AndroidRuntime(1281):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-02 17:05:35.340: E/AndroidRuntime(1281):     ... 11 more 
```

有任何想法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:18:57.530

```
Cursor mCursor = groups_db.getAllGroups(); 
```

这不起作用，因为您可以错误地看到您没有创建`groups_table`.

```
@Override
public void onCreate(SQLiteDatabase db) {

} 
```

您的方法`onCreate`也是`onUpgrade`空的，并且您的**groups_table**从未创建过。

所以你需要在你的**Groups_DB_Adapter**`db.execSQL(GROUPS_TABLE_CREATE);`类的内部类中调用这里。

# vba - Autofilter 宏，用于在数据范围内查找一个值 - 如果没有找到数据如何显示错误消息

> ID：11297569
> 
> 赞同：1
> 
> 时间：2012-07-02T16:26:55.643
> 
> 标签：vba, excel, autofilter

我有一个包含员工列表的电子表格。我想运行一个宏，当在输入框中输入员工编号时，该宏将过滤特定员工。但是，如果该号码不存在，我希望显示一条错误消息，让您可以选择重试。

我的尝试如下：

```
Option Explicit

Sub AmendWeeklyHours()

'Find employee number
Dim EmployeeNumber As String
Dim Continue As Boolean
Dim aCell As Range

Continue = True

Do While Continue = True
    EmployeeNumber = InputBox("Please enter the employee number", "Enter Employee Number")

If StrPtr(EmployeeNumber) = 0 Then
        '~~> User pressed cancel
        Exit Sub
    Else
        '~~> User pressed OK with something filled
        If EmployeeNumber <> "" Then
            With ActiveSheet
                Set aCell = .Columns(3).Find(What:=EmployeeNumber, LookIn:=xlValues, _
                LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)

                If Not aCell Is Nothing Then
                    Selection.AutoFilter field:=3, Criteria1:=EmployeeNumber
                    Continue = False
                'If an invalid entry is entered
                Else
                    If MsgBox("You entered an invalid employee number - Try again?", _
                    vbYesNo + vbQuestion, "Search again?") = vbNo Then Exit Sub
                    Continue = False
                End If
            End With
        '~~> User pressed OK WITHOUT anything filled
        Else
            MsgBox "You didn't enter a value. Please enter the employee number or press cancel."
            Continue = True
        End If
    End If
Loop

'Find Week Ending Date
Dim WeekEnding As String
Dim Continue1 As Boolean
Dim bCell As Range

Continue1 = True

Do While Continue1 = True
    WeekEnding = InputBox("Please enter the week ending date", "Enter Week Ending Date")

If StrPtr(WeekEnding) = 0 Then
        '~~> User pressed cancel
        ActiveSheet.ShowAllData
        Exit Sub
    Else
        '~~> User pressed OK with something filled
        If WeekEnding <> "" Then
            With ActiveSheet
                Set bCell = .Columns(6).Find(What:=WeekEnding, LookIn:=xlValues, _
                LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)

                If Not bCell Is Nothing Then
                    Selection.AutoFilter field:=6, Criteria1:=WeekEnding
                    Continue1 = False
                Else
                'If an invalid entry is entered
                    If MsgBox("You entered an invalid week ending date - Try again?", _
                    vbYesNo + vbQuestion, "Search again?") = vbNo Then Exit Sub
                    Continue1 = False
                End If
            End With
        Else
            '~~> User pressed OK WITHOUT anything filled
            MsgBox "You didn't enter a value. Please enter the week ending date or press cancel."
            Continue1 = True
        End If
    End If
Loop

'Control + home
Dim Rng As Range
With ActiveSheet.AutoFilter
    Set Rng = .Range.Offset(1, 0).Resize(.Range.Rows.Count - 1)
    Rng.SpecialCells(xlCellTypeVisible).Cells(1, 1).Select
End With

'Select hours column
ActiveCell.Offset(0, 4).Activate

'Enter hours
Dim NewHours As String
Dim Continue2 As Boolean

Continue2 = True

Do While Continue2 = True
NewHours = InputBox("Please enter the new hours", "Enter New Contracted Hours")

If StrPtr(NewHours) = 0 Then
        '~~> User pressed cancel
        ActiveSheet.ShowAllData
        Exit Sub

        'User pressed OK WITH something filled
        ElseIf NewHours <> "" Then
        ActiveCell = NewHours
        Continue2 = False
    Else
        '~~> User pressed OK WITHOUT anything filled
        MsgBox "You didn't enter a value. Please enter the number of hours or press cancel."
        Continue2 = True
End If
Loop

'Completion message
MsgBox ("Hours have been amended")

'Show all data
ActiveSheet.ShowAllData    
End Sub 
```

**上面修改的代码**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:30:32.743

如果您希望用户输入数字，这是一种方法

```
Option Explicit

Sub Sample()
    Dim EmployeeNumber As String
    Dim Continue As Boolean
    Dim aCell As Range

    Continue = True

    Do While Continue = True
        EmployeeNumber = InputBox("Please enter the assignment number")

        If EmployeeNumber <> "" Then             
            With Sheets("Sheet1")
                '~~> Change .Columns(1) to the relevant range
                Set aCell = .Columns(1).Find(What:=EmployeeNumber, LookIn:=xlValues, _
                LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)

                If Not aCell Is Nothing Then
                    '~~> Rest of your code
                    'Selection.AutoFilter field:=3, Criteria1:=FindVal1
                Else
                    If MsgBox("You entered an invalid employee number - Try again?", _
                    vbYesNo + vbQuestion, "Search again?") = vbNo Then _
                    Continue = False
                End If
            End With
        Else
            Continue = False
        End If
    Loop
End Sub 
```

**跟进**

```
Sub Sample()
    Dim EmployeeNumber As String
    Dim Continue As Boolean
    Dim aCell As Range

    Continue = True

    Do While Continue = True
        EmployeeNumber = InputBox("Please enter the assignment number")

        If StrPtr(EmployeeNumber) = 0 Then
            '~~> User pressed cancel
            Exit Sub
        Else
            '~~> User pressed OK with something filled
            If EmployeeNumber <> "" Then
                With Sheets("Sheet1")
                    Set aCell = .Columns(3).Find(What:=EmployeeNumber, LookIn:=xlValues, _
                    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                    MatchCase:=False, SearchFormat:=False)

                    If Not aCell Is Nothing Then
                        Selection.AutoFilter field:=3, Criteria1:=EmployeeNumber
                        Continue = False
                    Else
                        If MsgBox("You entered an invalid employee number - Try again?", _
                        vbYesNo + vbQuestion, "Search again?") = vbNo Then _
                        Continue = False
                    End If
                End With
            '~~> User pressed OK WITHOUT anything filled
            Else
                Msgbox "You didn't enter anything. Please enter the employee number in the next box which pops up"
                Continue = True
            End If
        End If
    Loop
End Sub 
```

# algorithm - Dungeon Keeper 2 风格地图，顶点压缩

> ID：11297570
> 
> 赞同：2
> 
> 时间：2012-07-02T16:26:58.653
> 
> 标签：algorithm

所以在做一个小项目，但考虑让地图更高效。我有一个数字网格说

```
100110
011011
010110 
```

如果你曾经玩过地牢守卫，那么这个想法是 0 是一个平坦的挖出的方块，而 1 是一个静止的方块。我想利用网格布局并能够最大限度地减少使用的顶点数量。因此，不要将单个立方体用于以下区域：

```
1111
1111
1111 
```

我只想使用 8。关于最佳方法的任何想法？甚至只知道我应该使用的算法类型的名称。可以在运行中快速完成的东西会比瓶颈渲染更可取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:46:47.220

我同意这可能不会是性能问题，但是您可以通过使用（稍作修改的）不平衡四叉树在压缩地图中表示您的地图。

*   从只包含 1 的地图开始。您可以将其存储为一个大小为 n*n 的盒子在树的根节点中。

*   如果您想挖掘其中一个框，则递归地沿着树向下走，使用默认的四叉树规则拆分 n*n 框（或您在其中找到的任何内容）（= 将 n*n 框拆分为四个 n/2* n/2 盒等）。在某些时候，您会到达仅包含单个框（您要挖出的框）的树的叶子，您可以将其从 1 更改为 0。

*   此外，在叶子发生变化并且您的递归调用返回后（= 您沿着树返回根节点），您可以检查相邻的框是否可以合并。（如果你有两个相邻的盒子都被挖出来，你可以合并它们）。

有时在索引此类低维数据时使用的另一种技术是空间填充曲线。具有良好平均局部性且可逆的一种是希尔伯特曲线。基本上，您可以沿空间填充曲线枚举您的盒子（挖出的和填充的），然后使用简单的行程压缩。

树的想法允许您减少渲染几何的数量（您可以重新缩放纹理等，以通过单个更大的框来模拟 n*n 框）。空间填充曲线可能只会为您节省一些内存。

# php - Symfony 2.0 会话区域设置不是从 URL 设置的？

> ID：11297571
> 
> 赞同：0
> 
> 时间：2012-07-02T16:27:08.317
> 
> 标签：php, symfony

我正在创建一个网页 URL 供外部应用程序访问，例如：`http://my.site/en/page/1`或 `http://my.site/fr/page/1`. 在 Twig 模板中，我使用了`app.session.locale`变量。

`app.session.locale``url()`工作正常，但`path()`函数有时会随机使用默认语言环境——它们在 /fr/ 页面上生成 /en/ URL 而不是 /fr/。这不会以稳定的方式重现。

添加`_locale`参数 like`url('_foobar_action', {'something': model.fooId, '_locale': app.session.locale} )`没有帮助。这听起来像这样的[讨论，这](https://groups.google.com/forum/#!topic/symfony2/23lvS2dBZYU)不是一个好消息。

访问此 URL 的外部应用程序中没有会话，可以安全地认为它是`wget`.

这里有什么问题？这是一个已知问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:20:27.210

今天在 master 分支中进行了重大更改。即使您使用的是 2.0，您也可能想检查一下。[http://github.com/symfony/symfony/pull/4692](http://github.com/symfony/symfony/pull/4692)

# c - 无法为变量和指针赋值

> ID：11297576
> 
> 赞同：12
> 
> 时间：2012-07-02T16:27:23.247
> 
> 标签：c, pointers

我对 C 很陌生，但不知道为什么这个程序会中断。如果我删除与 相关的行，程序将编译并运行`i`，但如果我分配`i`，我将无法再分配任何东西而`*ptr`不会破坏程序。

```
int main(void)
{
    int i;
    int *ptr;

    i = 2;
    *ptr = 5;
    printf("%d",*ptr);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T16:30:22.707

您将指针保留为未初始化的值。因此，当您取消引用它 ( `*ptr`) 时，您会访问内存中的任意位置，从而导致分段错误。

通过将变量的地址（如）或一些新分配的内存（如）分配给自身（而不是）来指向`ptr`某物。`ptr``*ptr``&i``malloc(sizeof(int))`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T16:31:31.260

这是C的答案：

```
int main(void) {
    int i;
    int * ptr = (int *)malloc(sizeof(int));

    i = 2;
    *ptr = 5;     
    printfn("%d",*ptr); 
    free(ptr);
} 
```

或者，您可以为 i 和 *ptr 分配行使用如下内容：

```
int main(void) {
    int i;
    int * ptr;

    i = 2;
    ptr = &i;     
    printfn("%d",*ptr); // should print 2
} 
```

另请注意，免费出来了！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:31:35.973

你声明了 ptr 但没有让它指向任何东西。然后，您尝试写入它指向的内容。这从来都不是一个好主意。尝试通过添加行使 ptr 指向 i

```
ptr = &i; 
```

在您尝试写入 *ptr 之前

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T16:30:00.370

在 C 中使用指针之前，您需要将指针设置为现有的内存块，您需要为其分配内存，就像这样。

```
int *ptr = (int *)malloc(sizeof(int)); 
```

# python - 如何在 Python 中无缝封装 Bash shell IO

> ID：11297579
> 
> 赞同：1
> 
> 时间：2012-07-02T16:27:43.770
> 
> 标签：python, bash

如何在 Python 脚本中包装 bash shell 会话，以便 Python 可以将 stdout 和 stderr 存储到数据库，并偶尔写入 stdin？

我尝试使用带有类似 tee 的 Python 类的 subprocess 来重定向 IO，但它似乎使用 fileno 来完全绕过 Python。

外壳.py：

```
import os
import sys
from StringIO import StringIO
from subprocess import Popen, PIPE

class TeeFile(StringIO):
    def __init__(self, file, auto_flush=False):
        #super(TeeFile, self).__init__()
        StringIO.__init__(self)
        self.file = file
        self.auto_flush = auto_flush
        self.length = 0

    def write(self, s):
        print 'writing' # This is never called!!!
        self.length += len(s)
        self.file.write(s)
        #super(TeeFile, self).write(s)
        StringIO.write(self, s)
        if self.auto_flush:
            self.file.flush()

    def flush(self):
        self.file.flush()
        StringIO.flush(self)

    def fileno(self):
        return self.file.fileno()

cmd = ' '.join(sys.argv[1:])
stderr = TeeFile(sys.stderr, True)
stdout = TeeFile(sys.stdout, True)

p = Popen(cmd, shell=True, stdin=PIPE, stdout=stdout, stderr=stderr, close_fds=True) 
```

例如 Running`python shell.py ping google.com`运行正确的命令并显示输出，但 Python 永远不会看到标准输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:11:17.427

```
#!/usr/bin/env python

# Copyright (c) Twisted Matrix Laboratories.
# See LICENSE for details.

from twisted.internet import protocol
from twisted.internet import reactor
import re

class MyPP(protocol.ProcessProtocol):
    def __init__(self, verses):
        self.verses = verses
        self.data = ""
    def connectionMade(self):
        print "connectionMade!"
        for i in range(self.verses):
            self.transport.write("Aleph-null bottles of beer on the wall,\n" +
                                 "Aleph-null bottles of beer,\n" +
                                 "Take one down and pass it around,\n" +
                                 "Aleph-null bottles of beer on the wall.\n")
        self.transport.closeStdin() # tell them we're done
    def outReceived(self, data):
        print "outReceived! with %d bytes!" % len(data)
        self.data = self.data + data
    def errReceived(self, data):
        print "errReceived! with %d bytes!" % len(data)
    def inConnectionLost(self):
        print "inConnectionLost! stdin is closed! (we probably did it)"
    def outConnectionLost(self):
        print "outConnectionLost! The child closed their stdout!"
        # now is the time to examine what they wrote
        #print "I saw them write:", self.data
        (dummy, lines, words, chars, file) = re.split(r'\s+', self.data)
        print "I saw %s lines" % lines
    def errConnectionLost(self):
        print "errConnectionLost! The child closed their stderr."
    def processExited(self, reason):
        print "processExited, status %d" % (reason.value.exitCode,)
    def processEnded(self, reason):
        print "processEnded, status %d" % (reason.value.exitCode,)
        print "quitting"
        reactor.stop()

pp = MyPP(10)
reactor.spawnProcess(pp, "wc", ["wc"], {})
reactor.run() 
```

这就是将命令 IO 作为协议处理的 Twisted 方式。顺便说一句，您也使用 StringIO 使您的脚本复杂化。而是检查 Popen.communicate() 方法。请注意，stdin/stdout 是文件描述符，需要并行读取，因为如果输出较长，它们的缓冲区将溢出。如果您想通过它流式传输大量数据，请使用 Twisted 方式，或者如果 Popen 方式触发单独的线程来读取标准输出，可能会逐行并立即将它们放入 DB。 [关于处理协议的扭曲方法。](http://twistedmatrix.com/documents/current/core/howto/process.html)

# .htaccess - 301 htaccess 重定向不起作用（对于单个页面）

> ID：11297583
> 
> 赞同：1
> 
> 时间：2012-07-02T16:28:00.447
> 
> 标签：.htaccess, redirect, http-status-code-301

把它放在我的 htaccess 文件的顶部不会做任何事情：

```
Redirect 301 /taxonomy/term/6%207%208%209 http://mysite.com/taxonomy/term/all 
```

这也不是：

```
Redirect 301 http://mysite.com/taxonomy/term/6%207%208%209 http://mysite.com/taxonomy/term/all 
```

我正在使用一个使用自己的 htaccess 文件的 CMS，所以我的规则会被覆盖吗？我认为将代码放在文件顶部可以解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:50:18.767

转义符在通过 mod_alias 之前被解码，所以`%20`' 会变回空格。您需要将它们放在引号中：

```
Redirect 301 "/taxonomy/term/6 7 8 9" http://mysite.com/taxonomy/term/all 
```

# javascript - Facebook 移动 Safari 无法正常工作

> ID：11297587
> 
> 赞同：3
> 
> 时间：2012-07-02T16:28:10.633
> 
> 标签：javascript, facebook, mobile, mobile-safari, facebook-javascript-sdk

我已将 Facebook Connect SSO 实施到我的网站[http://pocketly.com/login](http://pocketly.com/login)它似乎适用于所有桌面浏览器。但由于某种原因，它在我的 iPhone 上不起作用，我尝试了 Mobile Safari 和 Mobile Chrome，它所做的只是打开 Facebook auth 页面然后死掉。我第一次登录浏览器时，它会正确地进行身份验证，然后关闭窗口，该窗口又会返回到我的网站，但似乎没有调用回调。每次我尝试调用它时，它都会在 Facebook 网站上以白屏死掉。我正在使用带有 FB.login 函数的 Javascript SDK。我不知道还能做什么或如何调试它，我什至在新的 ios6 移动 safari 上尝试了网络检查器。如果有人有任何建议，请告诉我，如果您想查看一些代码示例或了解更多信息，我很乐意分享。

[Facebook JS SDK 无法在 Safari](https://stackoverflow.com/questions/9100601/facebook-js-sdk-not-working-on-safari)
[上运行 Facebook JS SDK 无法在 Safari 移动版（使用 iPad）上加载](https://stackoverflow.com/questions/10658413/facebook-js-sdk-not-loading-on-safari-mobile-using-ipad)
[Facebook FB.login 可以在 Safari 中运行，但不能在移动版 Safari 中运行](https://stackoverflow.com/questions/10407544/facebook-fb-login-works-in-safari-but-not-mobile-safari)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:37:32.397

事实证明，JS SDK 在移动 safari 上似乎有问题，我在其他网站上也遇到了这个问题。我最终做的是使用涉及重定向的 PHP SDK，而不是尝试通信的窗口。事实证明，这种方法更容易。任何对 JS SDK 有问题的人都应该先尝试 PHP 的。

# velocity - 在另一个中使用一个速度模板的输出

> ID：11297588
> 
> 赞同：2
> 
> 时间：2012-07-02T16:28:15.063
> 
> 标签：velocity, confluence, vtl

我有一个速度模板（在 Confluence 用户宏中），如下所示：

```
## This macro takes a jiraissues macro in the body with "Show Total Only" configured to TRUE.
## It then parses the return and puts a green check if the number returned is ZERO or a red X otherwise.
## @noparams 

#set ($start = $body.indexOf("{") + 1)
#set ($end  = $body.indexOf("}") )

Printf debugging...<br />
body.substring($start, $end) = $body.substring($start, $end) <br />

<ac:rich-text-body>
  <ac:image ac:thumbnail="false">
## BUG BUG This substring is ALWAYS zero.  Dunno why.
  #if ($body.substring($start, $end) == "0")
    <ri:url ri:value="/images/icons/emoticons/check.png" />
  #else
    <ri:url ri:value="/images/icons/emoticons/error.png" />
  #end
  </ac:image>
</ac:rich-text-body> 
```

该模板有一个嵌套的其他速度模板，由用户配置以查询数据库并返回匹配某些条件的错误数量。这个想法是，如果返回的数字是零，那么一切都是 hunkydory。否则，好吧……你明白了。

现在，我的想法显然搞砸了。

1.  $body 字符串似乎返回了类似`{0} issues`.
2.  这`{0}`似乎是一个变量或其他东西，但如果我能找到任何文档，那就见鬼了。

**问题**

*   首先评估哪个模板？
*   我什至可以将一个模板的逻辑建立在另一个模板的输出上吗？
*   ~~为什么我的生活是这样的？~~没关系，我知道那个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:47:15.553

像这样的字符串`{0}`表明您看到的不是实际的最终结果，而是应该用真实数据填充的消息模板。对我来说，它看起来像是[MessageFormat](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html)使用的一个键，但它可能是别的东西。

您是否也有内部宏的代码？

# java - SOAP 响应中的额外/重复成员阻止了序列化（Axis、Java、Gson）

> ID：11297591
> 
> 赞同：1
> 
> 时间：2012-07-02T16:28:28.873
> 
> 标签：java, json, wsdl, axis, gson

我正在使用 Axis 调用基于 SOAP 的 Web 服务。然后，我尝试使用 Google Gson 库将返回的远程对象序列化为 JSON。

JSON 的序列化失败，Gson 抱怨“有多个名为 __equalsCalc() 的元素”。

当我在我的 IDE (Eclipse) 中检查返回的对象时，我可以看到这是真的——返回的对象有三个名为 __equalsCalc() 的成员和另外三个名为 __hashCode 的成员。

我环顾四周知道这些是由 WSDL2Java（我认为）添加的，以避免递归。我的问题是，为什么每个都有三个？我怎样才能让序列化程序忽略这些？它们实际上并不是对象定义的一部分（它被称为 RemoteProject，以供参考）。我可以做一些骇人听闻的事情，比如将 RemoteProject 转换为 RemoteProject 以使其删除这些成员吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:26:48.670

事实证明，这并不难解决。我有同一个实例 var 的多个副本，因为被序列化的类是来自超类的同名字段的阴影。由于我不关心这些字段，因此 Gson 中最好的方法是编写一个自定义的 ExckusionStrategy ，它可以根据名称选择性地忽略字段：

[http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/ExclusionStrategy.html](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/ExclusionStrategy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:38:04.550

我不认识GSon。
使用[Jackson](http://jackson.codehaus.org/)，您可以使用 @JsonIgnore 注释属性（即，根据 Java bean 约定具有 getter/setter 的字段）。
通过这种方式，您可以防止递归/没有匹配的 setter 或 getter 等问题...
尝试找出您在 GSon 是否有同样的问题或使用 Jackson。

# javascript - 在 Symfony2/Twig 中使用 javascript

> ID：11297594
> 
> 赞同：12
> 
> 时间：2012-07-02T16:28:29.260
> 
> 标签：javascript, symfony, twig

我有一个名为contact.html.twig 的视图。它有一个带有一些文本字段的表单。我想使用 javascript 来验证所有字段都不是空的，以及其他一些规则。但我不知道将 .js 与定义放在哪里。我也不知道如何使用 Twig 表示法调用 .js 脚本。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-02T17:05:33.003

这是关于如何处理 javascript 的通用答案......不是特别是验证部分。我使用的方法是将单独的功能存储在单独的 JS 文件中作为 bundles`Resources/public/js`目录中的插件，如下所示：

```
(function ($) {

    $.fn.userAdmin = function (options) {
        var $this = $(this);

        $this.on('click', '.delete-item', function (event) {
            event.preventDefault();
            event.stopPropagation();

            // handle deleting an item...
        });
    }
}); 
```

然后，我使用资产将这些文件包含在我的基本模板中：

```
{% javascripts
    '@SOTBCoreBundle/Resources/public/js/user.js'
%}
    <script src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

在我的基本模板中，我在末尾有一个`<body>`块`$(document).ready();`

```
<script>
    $(document).ready(function () {
        {% block documentReady %}{% endblock documentReady %}
    });
</script>
</body> 
```

然后在具有“用户管理员”功能的页面中，我可以像这样调用 userAdmin 函数：

```
{% block documentReady %}
    {{ parent() }}
    $('#user-form').userAdmin();
{% endblock documentReady %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:39:33.360

对于客户端验证来说，基本的 HTML5 功能还不够吗？它由 Form 组件提供。您还可以检查：

*   [资产](http://symfony.com/doc/current/cookbook/assetic/asset_management.html)
*   [资产文章](http://richardmiller.co.uk/2011/05/10/symfony2-using-assetic-for-css-and-javascript-management/)

# facebook - Rails 3 创建由用户控制的动态业务页面

> ID：11297596
> 
> 赞同：1
> 
> 时间：2012-07-02T16:28:30.103
> 
> 标签：facebook, ruby-on-rails-3, model, social, dynamic-pages

这是我的问题，

我有一个可以创建业务“页面”的用户。该用户可以通过执行诸如关注其他用户等操作来代表该业务页面行事，就像 facebook 业务页面一样。

我的应用程序的用户部分是创建的，其他部分也是如此动态的。IE用户可以切换到业务“A”并关注用户，该业务将关注用户，然后切换到业务“B”并做同样的事情。

有人推荐宝石吗？也许一大段代码可以让我继续前进。我很难想象从哪里开始，我已经创建了一个商业模式，但需要一个火花来推动它。

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:32:33.830

您可能想查看 declarative_authorization gem，它允许您在允许用户在模型上使用某些方法时设置规则。例如，如果用户是页面的代表，您可以有一个模型表，然后在 declarative_authorization 中使用的规则中使用该表/模型。

# php - 格式化 die(); PHP 中的消息

> ID：11297597
> 
> 赞同：1
> 
> 时间：2012-07-02T16:28:34.563
> 
> 标签：php, html, formatting, message, die

有没有办法设置 php`die();`消息的输出样式？

我想在错误消息周围添加一些 HTML 和 CSS，以便我可以在生产环境中使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:31:34.560

如果您使用的是实际`die()`功能，它总是会准确地打印出您传递给它的文本（可能是 HTML，但使用起来可能很尴尬）。

但是，您可以简单地创建自己的函数，该函数很好地打印出错误消息然后调用`exit`- 这样您就不必重复您可能`die()`每次传递给的 HTML。

```
function die_nicely($msg) {
    echo <<<END
<div id="critical_error">$msg</div>
END;
    exit;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:38:14.847

```
<?php
if('1'=='1')
echo '<font color=red>';
die('Its true');
echo 'its false';
?> 
```

* * *

```
 <?php
    if('1'=='1')
   {    
      echo '<font color=red>Itss true too.</font>';
      exit();
   }
    echo 'its false';
    ?> 
```

* * *

以上两者都有效，只是为了消除您的疑虑。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:31:26.733

您可以将 html 添加到您要输入的字符串中`die`，但更简单的方法是在调用之前回显您想要的 html `die`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T16:31:32.927

是的，你可以这样做，

```
die("<div>Error: ".mysql_error()."</div>"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T16:30:55.933

为什么不改变`die()`它的包装？

# iphone - iOS中的内存泄漏

> ID：11297604
> 
> 赞同：2
> 
> 时间：2012-07-02T16:29:08.107
> 
> 标签：iphone, objective-c, ios, memory-management, ios4

我的 iOS 应用程序中有内存泄漏，有时会导致它崩溃。泄漏点在这里。有人知道我将如何调试吗？

```
 0  0x269760    Malloc 32 Bytes Malloc  1   00:03.718.759   32  libsystem_info.dylib    si_item_to_addrinfo 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T16:33:51.240

一个 32 字节的泄漏不会导致内存消耗 jetsam。

首先，发布崩溃的回溯。其次，使用分配工具查看内存是否随着时间的推移而增加。

如果内存在增加并且您有一些重复的操作（例如，访问一些 UI 并返回应用程序的主屏幕），[Heapshot 分析](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)可以创造奇迹。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-10T07:09:07.380

对我来说，这是 Testflight SDK 1.1。当我注释掉 [TestFlight takeoff:] 方法时，泄漏不再出现。

# linux - （sed 初学者）替换环境变量中的字符

> ID：11297610
> 
> 赞同：2
> 
> 时间：2012-07-02T16:29:23.633
> 
> 标签：linux, shell, sed

使用 sed 时如何“即时”替换字符？例子 ：

我希望执行此命令： /bin/sed 's/HOSTNAME=.*/HOSTNAME= **server_domain_com** /g' /etc/sysconfig/network

而不是这个： /bin/sed 's/HOSTNAME=.*/HOSTNAME= **server.domain.com** /g' /etc/sysconfig/network

字符串“server.domain.com”包含在一个环境变量中，我想在替换 /etc/sysconfig/network 中的相应行之前用下划线替换点。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T16:34:01.237

```
HOSTNAME=$(echo $HOSTNAME | sed s/from/to/g) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:41:51.673

您也可以使用 bash 替换来做到这一点：

```
/bin/sed -i "s/HOSTNAME=.*/HOSTNAME=${HOSTNAME//./_}/g" /etc/sysconfig/network 
```

`//`指示它更改所有出现（如 sed 中的 g）。不要忘记`-i`实际更改文件的标志，而不仅仅是打印它。

# gradle - 从依赖项中提取特定的 JAR

> ID：11297612
> 
> 赞同：15
> 
> 时间：2012-07-02T16:29:27.630
> 
> 标签：gradle

我是 gradle 新手，但学习很快。我需要从 logback 中获取一些特定的 JAR 到我的发布任务中的新目录中。依赖关系解决得很好，但我不知道如何在发布任务中将 logback-core-1.0.6.jar 和 logback-access-1.0.6.jar 提取到名为“lib/ext”的目录中'。以下是我的 build.gradle 的相关摘录。

```
dependencies {
    ...
    compile 'org.slf4j:slf4j-api:1.6.4'
    compile 'ch.qos.logback:logback-core:1.0.6'
    compile 'ch.qos.logback:logback-classic:1.0.6'
    runtime 'ch.qos.logback:logback-access:1.0.6'
    ...
}
...
task release(type: Tar, dependsOn: war) {
    extension = "tar.gz"
    classifier = project.classifier
    compression = Compression.GZIP

    into('lib') {
        from configurations.release.files
        from configurations.providedCompile.files
    }

    into('lib/ext') {
        // TODO:  Right here I want to extract just logback-core-1.0.6.jar and logback-access-1.0.6.jar
    }
    ...
} 
```

如何遍历依赖项以找到这些特定文件并将它们放入由 into('lib/ext') 创建的 lib/ext 目录中？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-02T16:52:37.110

[配置](http://gradle.org/docs/current/dsl/org.gradle.api.artifacts.Configuration.html)只是（惰性）集合。您可以对它们进行迭代、过滤等。请注意，您通常只想在构建的*执行阶段执行*此操作，而不是在*配置阶段*。下面的代码通过使用惰性[FileCollection.filter()](http://gradle.org/docs/current/javadoc/org/gradle/api/file/FileCollection.html#filter(groovy.lang.Closure))方法实现了这一点。另一种方法是将*闭包*传递给[Tar.from()](http://gradle.org/docs/current/dsl/org.gradle.api.tasks.bundling.Tar.html#org.gradle.api.tasks.bundling.Tar:from(java.lang.Object...))方法。

```
task release(type: Tar, dependsOn: war) {
    ...
    into('lib/ext') {
        from findJar('logback-core') 
        from findJar('logback-access')
    }
}

def findJar(prefix) { 
    configurations.runtime.filter { it.name.startsWith(prefix) }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-07T10:15:08.617

接受的答案在集合中过滤是毫无价值的`Configuration`，`FileCollection`因此您只能访问文件的属性。如果您想过滤依赖项本身（组、名称或版本）而不是缓存中的文件名，那么您可以使用以下内容：

```
task copyToLib(type: Copy) {
  from findJarsByGroup(configurations.compile, 'org.apache.avro')
  into "$buildSrc/lib"
}

def findJarsByGroup(Configuration config, groupName) {
  configurations.compile.files { it.group.equals(groupName) }
} 
```

`files`需要一个dependencySpecClosure，它只是一个过滤器函数`Dependency`，参见：[https ://gradle.org/docs/current/javadoc/org/gradle/api/artifacts/Dependency.html](https://gradle.org/docs/current/javadoc/org/gradle/api/artifacts/Dependency.html)

# ruby-on-rails - 未启动创建操作的自定义 POST 路由

> ID：11297623
> 
> 赞同：27
> 
> 时间：2012-07-02T16:30:06.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3

# # 解释上下文

```
puts "I am learning Rails, building a simple forum application."
puts "I am pretty satisfied to where I got so far but routes... "
puts "...still figuring them out."
puts "Been 2 days trying all sorts of things."
puts "This is where I am now, and something is not working as expected."
puts "Any help/pointers would be appreciated! :)" 
```

# ＃ 问题

```
puts "I want my forum's create path to be '/helpcenter' and not '/helpcenter/cat'."
puts "When I access the form to create a new forum and I hit submit, "
puts "the form post to '/helpcenter' correctly (firebuged)"
puts "but I get the index, not the create!"
puts "I even put debugger in my create action but it is not being called." 
```

# # 配置/路由.rb

```
scope "/helpcenter" do
  resources :cat, :controller => "forums", :as => :forums do
    resources :topics , :controller => "forum_topics", :as => :topics
    resources :posts, :controller => "forum_posts", :as => :posts
  end
end

match "/helpcenter" => "forums#index", :as => :forums
match "/helpcenter" => "forums#create", :via => :post, :as => :create_forum 
```

我希望这个问题出在我创建路线的方式上。我尝试了很多不同的东西。

# # _form.html.erb

```
<%= form_for(@forum) do |f| %>
....
<% end %> 
```

我正在使用标准的 form_for 助手。

# # 为论坛获取路由

```
$ CONTROLLER=forums rake routes
delete_forum GET    /helpcenter/cat/:id/delete(.:format) forums#delete
      forums GET    /helpcenter/cat(.:format)            forums#index
             POST   /helpcenter/cat(.:format)            forums#create
   new_forum GET    /helpcenter/cat/new(.:format)        forums#new
  edit_forum GET    /helpcenter/cat/:id/edit(.:format)   forums#edit
       forum GET    /helpcenter/cat/:id(.:format)        forums#show
             PUT    /helpcenter/cat/:id(.:format)        forums#update
             DELETE /helpcenter/cat/:id(.:format)        forums#destroy
      forums        /helpcenter(.:format)                forums#index
create_forum POST   /helpcenter(.:format)                forums#create 
```

我们清楚地看到 POST /helpcenter 的路由绑定到论坛控制器的创建操作。

# # 日志

```
Started POST "/helpcenter" for 127.0.0.1 at 2012-07-02 12:25:00 -0400
Processing by ForumsController#index as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"d5iVKCh234234=", "forum"=>{"name"=>"", "description"=>""}, "commit"=>"Save Changes"} 
```

日志清楚地显示我正在 /helpcenter 上进行 POST，但它会启动 index 操作而不是 create 操作！

# ＃ 我究竟做错了什么？

```
puts "Thanks!" 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-02T16:42:10.713

我认为该请求与您的第一个`forums`路由匹配，因为您没有指定 HTTP 方法。这应该有效：

```
match "/helpcenter" => "forums#index", :via => :get, :as => :forums
match "/helpcenter" => "forums#create", :via => :post, :as => :create_forum 
```

或速记版本：

```
get "/helpcenter" => "forums#index", :as => :forums
post "/helpcenter" => "forums#create", :as => :create_forum 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:47:27.380

乍一看表明，针对 /helpcenter 的 POST 通过了 forums#index 匹配的规则，这是首先遇到的，所以这就是你得到的

```
match "/helpcenter" => "forums#index", :as => :forums
match "/helpcenter" => "forums#create", :via => :post, :as => :create_forum 
```

关于什么：

```
match "/helpcenter" => "forums#index", :via => :get, :as => :forums
match "/helpcenter" => "forums#create", :via => :post, :as => :create_forum 
```

# javascript - Backbone.js: Passing value From Collection to each model

> ID：11297624
> 
> 赞同：5
> 
> 时间：2012-07-02T16:30:06.487
> 
> 标签：javascript, backbone.js, backbone-relational

I need to pass a value from the view to each models inside a collection, while initializing.

Till Collection we can pass with 'options' in the Backbone.Collection constructor.

After this, is there any technique where I can pass the some 'options' into each models inside the collection?

```
var Song = Backbone.Model.extend({
    defaults: {
        name: "Not specified",
        artist: "Not specified"
    },
    initialize: function (attributes, options) {
        //Need the some_imp_value accessible here
    },
});

var Album = Backbone.Collection.extend({
    model: Song

    initialize: function (models, options) {
        this.some_imp_value = option.some_imp_value;
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T16:59:10.387

您可以覆盖“_prepareModel”方法。

```
var Album = Backbone.Collection.extend({
    model: Song

    initialize: function (models, options) {
        this.some_imp_value = option.some_imp_value;
    },

    _prepareModel: function (model, options) {
        if (!(model instanceof Song)) {
          model.some_imp_value = this.some_imp_value;
        }
        return Backbone.Collection.prototype._prepareModel.call(this, model, options);
    }
}); 
```

现在您可以查看在“初始化”中传递给模型的属性，您将获得 some_imp_value，然后您可以在模型上适当设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T15:29:39.087

虽然它似乎没有记录，但我发现至少在最新版本的骨干网（v1.3.3）中，传递给集合的选项对象被传递给每个子模型，并扩展到由集合生成的其他选项项。我没有花时间确认旧版本是否是这种情况。

例子：

```
var Song = Backbone.Model.extend({
    defaults: {
        name: "Not specified",
        artist: "Not specified"
    },
    initialize: function (attributes, options) {
        //passed through options
        this.some_imp_value = options.some_imp_value

        //accessing parent collection assigned attributes
        this.some_other_value = this.collection.some_other_value
    },
});

var Album = Backbone.Collection.extend({
    model: Song

    initialize: function (models, options) {
        this.some_other_value = "some other value!";
    }
});

var myAlbum = new Album([array,of,models],{some_imp_value:"THIS IS THE VALUE"}); 
```

注意：我不确定选项对象是否传递给后续的 Collection.add 事件

# basic - How do to block comments in Liberty Basic?

> ID：11297626
> 
> 赞同：3
> 
> 时间：2012-07-02T16:30:11.040
> 
> 标签：basic

Each day has its own data, and I need to run some science stuff without using the recent data.

Basically I need to block comment it out. How is that done in Liberty Basic?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:45:39.510

Liberty Basic 不支持多行注释。它只支持这两种单行格式：

```
'This is a comment
REM This is a comment 
```

所以最好的选择是重复输入：'+向下箭头+向左箭头

一些 BASIC 编程语言支持多行注释，如下所示：

```
/' This is
a multi-line
comment '/ 
```

# wordpress - 任何插件或建议用户对 Wordpress 内容执行自定义操作的设计

> ID：11297631
> 
> 赞同：0
> 
> 时间：2012-07-02T16:30:19.807
> 
> 标签：wordpress

我需要制作一个包含大量食谱的 Wordpress 网站。用户将被允许阅读并单击与该特定文章关联的“Cooked”按钮。我想存储所有用户已经煮过该食谱的人，并在我显示食谱时显示它。

是否有任何可用的插件可以将用户活动存储在内容上（比如我们有评论插件），否则最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:28:06.857

看看[**`WP Favorite Posts`**](http://wordpress.org/extend/plugins/wp-favorite-posts/)允许访问者添加最喜欢的帖子的插件。

并将标签设置为“Cooked”而不是“添加到收藏夹”，这将是最简单的方法，但如果您准备进行一些自定义编码，那么只需将食谱帖子 ID 保存在用户元中使用[**`update_user_meta`**](http://codex.wordpress.org/Function_Reference/update_user_meta)

# sencha-touch-2 - sencha touch 2 应用程序未完全显示在 android 浏览器中

> ID：11297634
> 
> 赞同：1
> 
> 时间：2012-07-02T16:30:32.573
> 
> 标签：sencha-touch-2

我的笔记本电脑上的 python 单线程服务器（类似 django 的 runserver）上运行了一个完整的 Sencha Touch2 示例应用程序。它使用 jsonp 为轮播加载图像，类似于此处的示例[http://edspencer.net/2012/02/building-a-data-driven-image-carousel-with-sencha-touch-2.html](http://edspencer.net/2012/02/building-a-data-driven-image-carousel-with-sencha-touch-2.html)

它适用于我的 Chrome，部分适用于 Firefox。

我按照指南从 Sencha Touch 2 中的文档进行生产构建。在 Chrome 上也很好。这是我看到的请求。

```
127.0.0.1 - - [03/Jul/2012 00:21:15] "GET /static/build/production/cache.manifest HTTP/1.1" 200 -
127.0.0.1 - - [03/Jul/2012 00:21:16] "GET /static/build/production/app.json?1341246076009 HTTP/1.1" 200 -
127.0.0.1 - - [03/Jul/2012 00:21:16] "GET /static/build/production/src/log/Logger.js?_dc=1341246076006 HTTP/1.1" 200 -
127.0.0.1 - - [03/Jul/2012 00:21:16] "GET /static/build/production/deltas/app.js/812d759b7c7a366ab0976c13044b2cd38f3444dc.json?1341246076040 HTTP/1.1" 200 -
127.0.0.1 - - [03/Jul/2012 00:21:16] "GET /static/build/production/src/log/Base.js?_dc=1341246076130 HTTP/1.1" 200 -
127.0.0.1 - - [03/Jul/2012 00:21:16] "GET /static/build/production/src/log/writer/Console.js?_dc=1341246076307 HTTP/1.1" 200 -
127.0.0.1 - - [03/Jul/2012 00:21:16] "GET /favicon.ico HTTP/1.1" 404 -
127.0.0.1 - - [03/Jul/2012 00:21:16] "GET /static/build/production/src/log/writer/Writer.js?_dc=1341246076347 HTTP/1.1" 200 -
127.0.0.1 - - [03/Jul/2012 00:21:16] "GET /static/build/production/src/log/formatter/Formatter.js?_dc=1341246076386 HTTP/1.1" 200 -
127.0.0.1 - - [03/Jul/2012 00:21:16] "GET /static/build/production/src/log/formatter/Default.js?_dc=1341246076449 HTTP/1.1" 200 -
127.0.0.1 - - [03/Jul/2012 00:21:16] "GET /w00t/?_dc=1341246076539&page=1&start=0&limit=25&callback=Ext.data.JsonP.callback1 HTTP/1.1" 200 - 
```

现在我在 wifi 上使用我的 android Samsung Galaxy Tab 10.1 (android 3.x) 通过 LAN IP 访问 sencha 应用程序（我也尝试过 android 手机）

在这里，我看到了我的加载指示器，然后 blam... 黑色的空白屏幕。我看到请求不完整。以下是要求：

```
192.168.0.109 - - [03/Jul/2012 00:24:24] "GET /static/build/production/index.html HTTP/1.1" 200 -
192.168.0.109 - - [03/Jul/2012 00:24:24] "GET /static/build/production/cache.manifest HTTP/1.1" 200 -
192.168.0.109 - - [03/Jul/2012 00:24:24] "GET /static/build/production/app.json?1341246263383 HTTP/1.1" 200 -
192.168.0.109 - - [03/Jul/2012 00:24:24] "GET /favicon.ico HTTP/1.1" 404 -
192.168.0.109 - - [03/Jul/2012 00:24:24] "GET /static/build/production/resources/css/app.css?1341246263429 HTTP/1.1" 200 -
192.168.0.109 - - [03/Jul/2012 00:24:24] "GET /static/build/production/sdk/sencha-touch.js?1341246263432 HTTP/1.1" 200 -
192.168.0.109 - - [03/Jul/2012 00:24:25] "GET /static/build/production/app.js?1341246263436 HTTP/1.1" 200 -
192.168.0.109 - - [03/Jul/2012 00:24:26] "GET /static/build/production/src/log/Logger.js?_dc=1341246265378 HTTP/1.1" 200 -
192.168.0.109 - - [03/Jul/2012 00:24:26] "GET /static/build/production/app.json?1341246265382 HTTP/1.1" 200 -
192.168.0.109 - - [03/Jul/2012 00:24:27] "GET /static/build/production/src/log/Base.js?_dc=1341246265428 HTTP/1.1" 200 -
192.168.0.109 - - [03/Jul/2012 00:24:27] "GET /static/build/production/src/log/writer/Console.js?_dc=1341246265780 HTTP/1.1" 200 -
192.168.0.109 - - [03/Jul/2012 00:24:27] "GET /static/build/production/src/log/writer/Writer.js?_dc=1341246265830 HTTP/1.1" 200 -
192.168.0.109 - - [03/Jul/2012 00:24:27] "GET /static/build/production/src/log/formatter/Formatter.js?_dc=1341246265870 HTTP/1.1" 200 -
192.168.0.109 - - [03/Jul/2012 00:24:27] "GET /static/build/production/src/log/formatter/Default.js?_dc=1341246265912 HTTP/1.1" 200 - 
```

它总是卡在 Default.js

我不是 JS 忍者，我正在评估 Sencha touch 2 是否适合我的网站的触控版本。很遗憾我不能尝试我漂亮的触摸滑动轮播:(我必须在我的 chrome 上滑动鼠标并满足于我蹩脚的成就。让它发挥作用一直是我昨晚的目标，我很想看到它发挥作用。

PS 实际的例子确实很好地在标签上工作。但它可能是在 ST2 的不同（旧）版本中制作的。我在这里使用 2.0.2。我复制粘贴了示例中的大部分代码，并更改了一些小东西以适应我的审美需求。

TIA

# xcode - Xcode iPad 模拟器键盘在屏幕中间打开

> ID：11297635
> 
> 赞同：0
> 
> 时间：2012-07-02T16:30:39.983
> 
> 标签：xcode, ipad, keyboard

我正在运行 xcode 4.3.2 并且刚刚开始遇到以下问题。

在模拟器中运行的所有项目都将弹出式键盘定位在 IPAD 模拟器的中心。IPHONE 模拟器很好，普通键盘位于屏幕底部。即使是带有单个文本字段的简单新项目，也会在屏幕中间显示键盘，上方和下方有相同数量的空白。这发生在所有方向。

有趣的是，UIPickerViews 也表现出相同的行为。

这让我发疯了，因为它已经好几个月了，现在所有的对象（文本字段等）都被隐藏了，当键盘啪地一声落在屏幕中间时。

请帮忙。提前致谢。

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:34:55.073

这是 iPad 的一个功能。您可以使用键盘右下角的拖动手柄“拖动”键盘。[Rob Rogers的这篇博](http://www.tech-recipes.com/rx/16957/ios-5-how-to-enable-the-ipads-split-keyboard/)文中的图片说明了如何使用它。我的猜测是您无意中移动了键盘。

![在此处输入图像描述](../Images/bb9645755e044fca5593724fbf9987e5.png)

# css - 移动 Webkit 回流问题

> ID：11297641
> 
> 赞同：14
> 
> 时间：2012-07-02T16:31:03.630
> 
> 标签：css, webkit, touch, css-position, mobile-webkit

我在 webkit 的移动版本中遇到了一个问题（特别是 iOS 5.1.1 上的 Webkit 534.46 作为移动 Safari，现在是 iOS 版 Chrome），这在我见过的任何桌面浏览器上都没有发生。**（即下面的演示应该在 webkit 的移动版本上查看。）**

[这是这个问题的一个活生生的例子。](http://bl.ocks.org/d/3757332/)CSS 的核心非常简单。它在页面左侧放置一个字母索引：

```
#index {
    left:0; margin:0; padding:0; position:fixed; top:0; width:3em;
} 
```

当元素固定在主体顶部上方时，就会出现此问题。它完全能够与之交互，直到滚动发生变化，然后它停止接受输入。如果我（手动）摇动滚动甚至一个像素，那么它会再次变为活动状态。该示例尽可能简单，不使用任何 JavaScript。在真正敲定它之后，我发现该元素似乎认为它是滚动的，但在视觉上是固定的。换句话说，如果您单击“A”然后尝试再次单击“A”，有时您会再次单击，但它会在列表的下方。这对我来说似乎是一个 CSS 重排问题。我知道移动 webkit 试图减少回流的次数。

[这是解决方法的一个实时示例。](http://bl.ocks.org/d/3757332/reflow.html)

我可以使用 JS 强制整个文档的 CSS 在滚动时重排（使用一个油门防止它在滚动后 100 毫秒内发生），这在简单示例中似乎解决了这个问题。不幸的是，这对这个问题的真实世界版本没有帮助。

[这是问题页面和解决方法脚本的代码。](https://gist.github.com/1e661854044177a95064)

**我的问题是这里发生了什么，是否有我缺少的 CSS 解决方法？**具体来说，我很好奇是否有任何 CSS 专家可以弄清楚阻止点击点击固定元素上正确位置的布局情况是什么？更好的理解可能有助于找到真正的解决方法。

**编辑：**我忘了提到该示例明确地将视口强制为窗口大小。所以用户不能放大/缩小，这意味着 position:fixed 应该将元素锚定到窗口的左侧。

**更新 (2012-09-20)：**这似乎已在 iOS 6 上的 Mobile Safari（以及 UIWebView）中得到修复。任何解决方法都应首先检查以确保它在 iOS < 6 上。例如，使用[CssUserAgent](http://cssuseragent.org)这将如下所示：

```
if (parseFloat(cssua.ua.ios) < 6) { /* ... */ } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T21:51:46.013

实际上解决了我的特定问题的答案是[在@Paul Sweatte 的链接之一中](https://stackoverflow.com/a/10439425/43217)找到的解决方案的变体：

本质上，添加了一个比身体高的普通 div。当它被移除时，它会导致正文有效地滚动或重排。将添加/删除之间的延迟设置为 0 毫秒就足以让 DOM 重新计算而不会导致任何闪烁。这是我能找到的最小脚本，它完全解决了*我这个问题的特定*实例中所有`position:fixed`元素的问题。

 *```
var hack = document.createElement("div");
hack.style.height = "101%";
document.body.appendChild(hack);
setTimeout(function(){
    document.body.removeChild(hack);
    hack = null;
}, 0); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T22:20:46.000

具有讽刺意味的是，我最初的回流修复（链接到问题中）现在也在我的真实应用程序中工作。将它的变体放在这里以防万一对其他人有用。它可以在任何容器元素上调用，或者如果没有传递任何内容，它会重排整个文档。

```
var forceReflow = function(elem){
    elem = elem || document.documentElement;

    // force a reflow by increasing size 1px
    var width = elem.style.width,
        px = elem.offsetWidth+1;

    elem.style.width = px+'px';

    setTimeout(function(){
        // undo resize, unfortunately forces another reflow
        elem.style.width = width;
        elem = null;
    }, 0);
}; 
```

这样做的好处是它不需要创建/添加/删除元素，只需调整容器即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T22:46:28.657

看起来这是一个[已知的错误](http://www.openradar.me/11207363)：

> 核心问题是：如果页面以编程方式移动（即用户没有导致滚动），则修复元素内的元素不可用。

使用绝对定位、[更改标记](http://mobile.dzone.com/articles/issues-position-fixed)或使用混合[解决方法](https://stackoverflow.com/questions/8752220/mobile-safari-bug-on-fixed-positioned-button-after-scrolltop-programmatically-ch#comment12047676_9407174)之一。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T22:07:17.303

我的 iWebInspector 安装现在非常失败，但是在弄乱了 jsfiddle 和 iOS sim 之后，你的预感似乎是正确的——尽管位置：固定，浏览器认为页面已经滚动，并搞砸了点击目标。

看起来这与[iOS Safari 的问题很相似：固定定位元素内的锚点只能工作一次](https://stackoverflow.com/questions/7968499/ios-safari-anchors-within-a-fixed-positioned-element-only-work-once)，这也没有用纯 CSS 解决。还相关：[固定位置导航栏只能在 iOS5 上的 Mobile Safari 中单击一次](https://stackoverflow.com/questions/7826868/fixed-position-navbar-only-clickable-once-in-mobile-safari-on-ios5#10030251)。

切线，我确信它已经被注意到了，不可能滚动左侧，所以在 iPhone 上，索引只显示 AM。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T19:15:26.587

我相信这会更好，并且可以达到相同的效果，允许在固定页脚中单击链接。不知何故，隐藏 urlbar 会导致固定页脚中的链接无法点击，直到您滚动一点。我在聚焦输入时也看到了这一点，并且我将一个事件处理程序附加到所有聚焦事件以触发它。我使用 dojo 执行此操作以附加事件。

```
 if(navigator.userAgent.match(/iPhone/i)){
        /* The famous iOS can't-click-links until touch fix, I attach onfocus */
            query('input,textarea,select', this.domNode).on('focus', function(el){
                document.documentElement.style.paddingRight = '1px';
                setTimeout(function () {
                document.documentElement.style.paddingRight = '';
                }, 0);
            });
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T09:16:24.723

这是 McKamey 解决方法的一种变体。它避免了两次回流，并且可能有助于闪烁（取决于您的应用程序）：

```
setTimeout(function(){
    document.body.style.borderBottom = 
        document.body.style.borderBottom === 'none' ? '1px solid white' : 'none';
}, 0); 
```*

# .net - 为什么 ClassInitialize 修饰的方法会使我的所有测试都失败？

> ID：11297646
> 
> 赞同：8
> 
> 时间：2012-07-02T16:31:26.473
> 
> 标签：.net, unit-testing, mstest

我从 MSDN 了解到，这`ClassInitialize`是标记一种方法，该方法将在所有测试运行之前为所有测试执行一次设置代码。当我在下面的节略夹具中包含这样的方法时，所有测试都失败了。一旦我将其注释掉，它们就会再次通过。

```
[TestClass]
public class AuthenticationTests
{
    [ClassInitialize]
    public void SetupAuth()
    {
        var x = 0;
    }

    [TestMethod]
    public void TestRegisterMemberInit()
    {
        Assert.IsTrue(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-02T16:32:39.757

`[ClassInitialize]`装饰方法应该是静态的，并且只采用一个类型的参数`TestContext`：

```
[ClassInitialize]
public static void SetupAuth(TestContext context)
{
    var x = 0;
} 
```

事实上，如果我将您的代码复制粘贴到一个干净的 VS 项目中，测试运行程序会在错误消息中准确解释这一点：

> 方法 UnitTestProject1.AuthenticationTests.SetupAuth 的签名错误。该方法必须是静态的、公共的、不返回值并且应该采用 TestContext 类型的单个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:56:06.787

标有 的方法`[ClassInitialize]`：

1.  仅适用于测试类的一种方法。
2.  该类必须是密封的，即不能继承。
3.  该方法必须是公共静态的。
4.  该方法必须传递一个`TestContext`参数。
5.  该方法不返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-07T20:08:30.810

在 VS2015 中，没有 TestContext 参数会导致在运行测试时输出这个最无用的错误（以防有人像我一样搜索异常）：

> 抛出异常：Microsoft.VisualStudio.TestPlatform.Extensions.VSTestIntegration.dll 中的“Microsoft.VisualStudio.TestPlatform.MSTestFramework.TypeInspectionException”

# objective-c - 电子邮件附件的多选表视图控制器项目

> ID：11297653
> 
> 赞同：1
> 
> 时间：2012-07-02T16:31:39.047
> 
> 标签：objective-c, xcode

这是我的 XCode 4.3.2 问题...我有一个表格，在表格控制器中显示多选 NSArray 数据。我想在表格中选择多个项目，单击视图控制器底部的按钮，然后将表格的 NSArray 中引用的项目中选定的文档附加到电子邮件中。我的电子邮件部分工作正常，但没有附加任何内容。我的多选复选标记也可以正常工作。关于完成多选附件的任何想法？我假设我必须构建一个 mutableArray，其中表格数据单元格文本 = 本地 PDF 文件名。？？？

这是我认为必须编辑才能构建数组的一些代码？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
if ([selectedCell accessoryType] == UITableViewCellAccessoryNone) {
    [selectedCell setAccessoryType:UITableViewCellAccessoryCheckmark];
    [selectedIndexes addObject:[NSNumber numberWithInt:indexPath.row]];
    NSLog(@"Items I selected @ %d:", indexPath.row);
    NSLog(@"Items I selected: %@", selectedIndexes);
} else {
    [selectedCell setAccessoryType:UITableViewCellAccessoryNone];
    [selectedIndexes removeObject:[NSNumber numberWithInt:indexPath.row]];
    NSLog(@"Items I de-selected @ %d:", indexPath.row);
}
[tableView deselectRowAtIndexPath:indexPath animated:NO]; 
```

}

邮件组件：

```
- (IBAction)sendMailButton:(id)sender {
{
    if ([MFMailComposeViewController canSendMail])
    {
        MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc]      init];

        mailer.mailComposeDelegate = self;

        [mailer setSubject:@"Documentation Attached"];
        [mailer setMessageBody:@"Attached are documents from staff." isHTML:NO];

                   //[mailer setMessageBody:emailBody isHTML:NO];

        //iPad presentation enhancement:
        mailer.modalPresentationStyle = UIModalPresentationPageSheet;

        [self presentModalViewController:mailer animated:YES];

    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message:@"Your device doesn't support the composer sheet"
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];

    }
} 
```

}

# javascript - 如何在ajax请求的回调中设置ngInclude元素的src属性？

> ID：11297658
> 
> 赞同：0
> 
> 时间：2012-07-02T16:32:21.620
> 
> 标签：javascript, javascript-framework, angularjs

[ngInclude](http://docs.angularjs.org/api/ng.directive%3angInclude)的示例展示了如何更新 ngInclude 元素的 src 属性。

以类似的方式，我试图将模板路径分配给一个变量，但在 ajax 请求的回调中。分配后，我正在做`$rootScope.$apply($scope.setMainTemplatePath)`。
我还将 $rootScope 注入到包含回调的函数中。

但我收到以下错误：

```
Error: 10 $digest() iterations reached. Aborting!
Watchers fired in the last 5 iterations: [["fn: function (){var a=d.url();if(!n||a!=f.absUrl())n++,c.$evalAsync(function(){c.$broadcast(\"$locationChangeStart\",f.absUrl(),a).defaultPrevented?f.$$parse(a):(d.url(f.absUrl(),f.$$replace),f.$$replace=!1,h(a))});return n}; newVal: 30; oldVal: 29"],["fn: function (){var a=d.url();if(!n||a!=f.absUrl())n++,c.$evalAsync(function(){c.$broadcast(\"$locationChangeStart\",f.absUrl(),a).defaultPrevented?f.$$parse(a):(d.url(f.absUrl(),f.$$replace),f.$$replace=!1,h(a))});return n}; newVal: 31; oldVal: 30"],["fn: function (){var a=d.url();if(!n||a!=f.absUrl())n++,c.$evalAsync(function(){c.$broadcast(\"$locationChangeStart\",f.absUrl(),a).defaultPrevented?f.$$parse(a):(d.url(f.absUrl(),f.$$replace),f.$$replace=!1,h(a))});return n}; newVal: 32; oldVal: 31"],["fn: function (){var a=d.url();if(!n||a!=f.absUrl())n++,c.$evalAsync(function(){c.$broadcast(\"$locationChangeStart\",f.absUrl(),a).defaultPrevented?f.$$parse(a):(d.url(f.absUrl(),f.$$replace),f.$$replace=!1,h(a))});return n}; newVal: 33; oldVal: 32"],["fn: function (){var a=d.url();if(!n||a!=f.absUrl())n++,c.$evalAsync(function(){c.$broadcast(\"$locationChangeStart\",f.absUrl(),a).defaultPrevented?f.$$parse(a):(d.url(f.absUrl(),f.$$replace),f.$$replace=!1,h(a))});return n}; newVal: 34; oldVal: 33"]]
        at Error (unknown source)
        at Object.$digest (http://localhost:3000/assets/angular-1.0.1.min.js?body=1:85:413)
        at Object.$apply (http://localhost:3000/assets/angular-1.0.1.min.js?body=1:87:58)
        at HTMLDivElement.<anonymous> (http://localhost:3000/assets/web/angularjs/controllers.js?body=1:40:27)
        at HTMLDivElement.<anonymous> (http://localhost:3000/assets/jquery.js?body=1:3257:9)
        at HTMLDivElement.<anonymous> (http://localhost:3000/assets/jquery.js?body=1:2876:28)
        at Object.trigger (http://localhost:3000/assets/jquery.js?body=1:3145:12)
        at HTMLDivElement.<anonymous> (http://localhost:3000/assets/jquery.js?body=1:3782:17)
        at Function.each (http://localhost:3000/assets/jquery.js?body=1:659:20)
        at [object Object].each (http://localhost:3000/assets/jquery.js?body=1:272:17) 
```

请指出我是否遗漏了什么或做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:04:12.667

你不应该调用 scope.$apply 除非你正在处理 Angular 控制之外的东西。更多代码会有所帮助。

# java - 从不同的 Java 文件引用方法

> ID：11297664
> 
> 赞同：1
> 
> 时间：2012-07-02T16:32:54.737
> 
> 标签：java

我是 Java 编程的新手，并且面临一个（很可能）我似乎无法理解或理解的简单问题。

我有三个不同的 java 文件，一个是我创建界面（SimulatorGui.java），另一个是我创建一个面板以在界面中创建的 jTabbedPanel 上使用（CollisionPanel.java - CollisionPanel 类）和第三个，我在其中运行将创建所需输出的代码（Collision.java - Colision 类）。

在 Collision.java 主方法中，我正在执行以下操作：

```
 public static void main (String[] args) {

    //<editor-fold defaultstate="collapsed" desc="Simulation start procedures">
    Tally statC = new Tally ("Statistics on collisions");
    Collision col = new Collision (100, 50);
    col.simulateRuns (100, new MRG32k3a(), statC);
    //</editor-fold>

    new SimulatorGUI().setVisible(true);
    CollisionPanel update = new CollisionPanel();
    update.updatepanel(); 
```

第一个块将创建所需的输出。然后我想将该输出发送到更新面板！我没有向该方法传递任何参数，因为我仍在尝试调试它。updatepanel 方法在 CollisionPanel 文件中创建，如下所示：

```
public void updatepanel(){
    System.out.println ("debug");
    jTextArea1.setText("update\n");
} 
```

然后发生的是，当我运行 Collision.java 文件时，它会输出“调试”文本，但不会将文本设置为 jTextArea1（附加也不起作用）。然后我创建了一个按钮来尝试这样做，在这种情况下它可以工作。在 CollisionPanel.java 中：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
    updatepanel();
} 
```

这是诀窍！我已经搜索并尝试了不同的东西，但似乎无法理解为什么这不起作用。

提前感谢您的帮助，希望我已经解决了问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:51:40.640

好的，我认为我最终遇到了问题，这是因为 IDE，您在 main 方法中看到您启动了一个新的`CollisionPanel`，这是错误的，netbeans 已经在 中添加并启动了该面板`SimulatorGUI`，所以现在您需要什么要做的是在 中添加一个 get 方法`SimulatorGUI`来获取启动的面板，然后在该面板上调用更新方法。

因此，将其添加到`SimulatorGUI`：

```
public CollisionPanel getCollisionPanel1() {
    return collisionPanel1;
} 
```

将您的旧`updatePanel()`方法替换为：

```
 void updatepanel(String str) {
            System.out.println ("debug");
            jTextArea1.setText(str);
         //   jTextArea1.revalidate();
            jLabel1.setText("test");
        } 
```

之后改变你的主要看起来像这样：

```
 SimulatorGUI simulatorGUI = new SimulatorGUI();
            simulatorGUI.setVisible(true);
            CollisionPanel cp=simulatorGUI.getCollisionPanel1();
            cp.updatepanel("Hi"); 
```

并且不要忘记`updatePanel()`从您的构造函数中删除旧的方法调用`CollisionPanel`，因为现在您可以简单地调用`cp.updatePanel("text here");`您的`SimulatorGUI`类而不是仅在构造函数中调用它。

我希望这很容易掌握，如果您不确定，请告诉我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:51:41.073

您在哪里将您的 CollisionPanel 添加到主 GUI？我担心这是您的问题，您需要这样做才能使您的代码正常工作。事实上，你的三个类中的任何一个在哪里得到对其他类的引用？为了使不同的类在一个程序中工作，它们之间必须有一些通信。了解如果您在 GUI 内创建一个 CollisionPanel 对象，并在主方法内创建另一个 CollisionPanel 对象，则在一个对象上调用一个方法对另一个对象*没有影响*，因为它们是两个完全不同的实体。

例如，这段代码：

```
new SimulatorGUI().setVisible(true);
CollisionPanel update = new CollisionPanel();
update.updatepanel(); 
```

看来您实际上是在 CollisionPanel 上调用 updatePanel()，但它不在 GUI 中可视化的任何 CollisionPanel 上。

考虑为 SimulatorGUI 提供一种方法，该方法允许将 CollisionPanel 传递给它，以便它可以使用它。这实际上可能是一个构造函数参数：

```
CollisionPanel update = new CollisionPanel();
SimulatorGUI simulatorGUI = new SimulatorGUI(update);
update.updatePanel(); 
```

这意味着 SimulatorGUI 的构造函数必须类似于：

```
public SimulatorGUI(CollisionPanel update) {
   this.update = update;
   // add update to GUI somewhere
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:53:03.133

开发时有三个不同的级别`GUI`：

*   视图：图形组件
*   模型：你运行的代码
*   控制器：检查模型是否更新以刷新视图。

因此，当您第一次启动程序时，视图将具有代码中分配的值；例如，假设您在这里`JTextArea`使用初始值**类型**创建了您的。该视图将在此处显示`JTextArea`带有文本**类型的**。
当对模型进行更改时，视图不*知道*它，控制器的工作是检查模型的更新然后刷新视图。

所以这：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
    updatepanel();
} 
```

将生成一个表示属性已被修改的事件。所以控制器将更新视图。

除此之外，更改不会出现在视图上。

希望这可以帮助..

# java - 在linux服务器上运行java

> ID：11297675
> 
> 赞同：0
> 
> 时间：2012-07-02T16:33:42.510
> 
> 标签：java

我想运行一个从我的 java 项目中提取的 jar 文件，以便在我通过 SSH 隧道连接的 Linux 服务器上运行。有几个问题，首先是显示器有问题：我得到错误

```
No X11 DISPLAY variable was set, but this program performed an operation which requires it.
    at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:173)
    at java.awt.Window.<init>(Window.java:437)
    at java.awt.Frame.<init>(Frame.java:419)
    at java.awt.Frame.<init>(Frame.java:384)
    at javax.swing.JFrame.<init>(JFrame.java:174)
    at random_v2.v2Frame.<init>(v2Frame.java:127)
    at random_v2.Wrapper.main(Wrapper.java:25) 
```

其次是我不确定是否还必须安装其他应用程序。在我的代码中，java 程序需要运行其他应用程序，如 weka，我是否必须使用与我的 mac 中相同的目录名称和规格安装 weka？我提前感谢您的帮助。最良好的祝愿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:40:08.487

假设您正在使用 PuTTY 进入这个 unix 机器：

*确保在 PuTTY 设置中启用 X11 转发。*

![在此处输入图像描述](../Images/d92d586aaa1b6ababffe2e36812332dc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:44:48.513

使用以下命令通过命令行连接：

```
ssh -X user@server 
```

**-X**选项启用 X11 转发。

# android - 向 listView 添加值

> ID：11297676
> 
> 赞同：1
> 
> 时间：2012-07-02T16:33:45.957
> 
> 标签：android, listview

我正在尝试填充`ListView`...。但我无法从...中使用的数据库中添加 2 个字符串值。`SimpleCursorAdapter`任何一个，帮帮我

代码

列表视图.java

```
public class ListView extends ListActivity {

SQLiteDatabase messagedb;
List<String> senderArray = new ArrayList<String>();
List<String> bodyArray = new ArrayList<String>();

String[] simpleSenderArray = new String[ senderArray.size() ];

String[] simpleBodyArray = new String[ bodyArray.size() ];

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_list);

    senderArray.toArray( simpleSenderArray );
    bodyArray.toArray( simpleBodyArray );

    messagedb=ListView.this.openOrCreateDatabase("message",0, null);

            //This database created already and add sender and body values...here just open that database
    Cursor  cur=messagedb.rawQuery("select sender, body from tab2", null);
    while(cur.moveToNext())
    {
        String sender = cur.getString(cur.getColumnIndex("sender"));
        String body = cur.getString(cur.getColumnIndex("body"));
        senderArray.add(sender);
        bodyArray.add(body);
    }
    cur.close();

    messagedb.close();

     int[] to = new int[] { R.id.sender_entry, R.id.body_entry };

     SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, R.layout.my_list_entry, cur,simpleSenderArray, to);

     this.setListAdapter(mAdapter);

}

} 
```

my_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

<ListView

    android:id="@android:id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

my_list_entry.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
<TextView
    android:id="@+id/sender_entry"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="28dip" />
 <TextView
    android:id="@+id/body_entry"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="28dip" />
</LinearLayout> 
```

有人可以帮我填充我的`ListView`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:49:05.887

您已经将 Activity 命名`ListView`为内置类名，我强烈建议您将其更改为独特的名称，以防止任何混淆或命名冲突。

在你的SQLite表中，你应该有一个`_id INTEGER`列设置为你自己。）`PRIMARY KEY``_id`

```
 messagedb.execSQL(
        "CREATE TABLE IF NOT EXISTS tab2(" +
        " _id INTEGER PRIMARY KEY," +
        " sender INT(13)," +
        " body varchar)"); 
```

您的代码应该看起来更像这样：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_list);

    // Using a SQLiteOpenHelper might be best, but I'll assume that this command works
    messagedb=ListView.this.openOrCreateDatabase("message",0, null);

    Cursor cur = messagedb.rawQuery("select _id, sender, body from tab2", null);
    String[] from = new String[] { "_id", "sender", "body" }
    int[] to = new int[] { R.id.sender_entry, R.id.body_entry };

    SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, R.layout.my_list_entry, cur, from, to);

    this.setListAdapter(mAdapter);
} 
```

您可能要考虑使用 SQLiteDatabase.query() 方法，我相信它会更快一点：

```
Cursor cur = messagedb.query("tab2", new String[] {"_id", "sender", "body"}, null, null, null, null, null); 
```

我还建议为所有列名定义静态变量，以方便将来编码。

最后，这应该适用于没有 _id 列的表，但我再次不推荐它：

```
Cursor cur = messagedb.rawQuery("select rowid as _id, sender, body from tab2", null); 
```

# github - 有没有办法在查看代码导航时关闭 github 中的动画？

> ID：11297682
> 
> 赞同：8
> 
> 时间：2012-07-02T16:34:05.830
> 
> 标签：github

有没有办法在查看代码导航时关闭 github 中的动画？例如，如果您单击一个目录，则会出现一个 javascript 动画，因为它会更改以显示新目录的内容列表。它让我发疯，所以我想把它关掉。我在 github 设置中找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:36:56.513

如果您的浏览器支持扩展，那么创建一个在所有 GitHub 页面上禁用 jQuery FX 应该很容易。在 Safari 中用作“结束脚本”时，以下内容对我有用：

```
var killFX = document.createElement("script");
killFX.text = "jQuery.fx.off=true;";
document.body.appendChild(killFX); 
```

**2013 年 10 月 4 日更新：** GitHub 已添加或更改 Content-Security-Policy 标头以禁止内联 JavaScript：

```
X-WebKit-CSP : default-src *; script-src https://github.com https://a248.e.akamai.net https://jobs.github.com https://ssl.google-analytics.com https://secure.gaug.es https://gist.github.com; style-src https://github.com https://a248.e.akamai.net https://jobs.github.com https://ssl.google-analytics.com https://secure.gaug.es https://gist.github.com 'unsafe-inline'; object-src https://github.com https://a248.e.akamai.net 
```

…这破坏了 Safari 扩展：

```
Refused to execute inline script because of Content-Security-Policy. 
```

调查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T23:06:16.730

在 github 页面上，在您的 url 栏中输入以下内容：

```
javascript:(function(){jQuery.fx.off=true;})(); 
```

您还可以创建一个小[书签](http://en.wikipedia.org/wiki/Bookmarklet)以避免一直粘贴它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T22:11:01.620

好吧，您可以在 github.com 上禁用 Javascript，但是不会加载其他数据，您只会看到文件夹名称而没有最后一次签入。我认为这是唯一的方法。

# maven - org.apache.maven.plugins 目标执行失败

> ID：11297686
> 
> 赞同：15
> 
> 时间：2012-07-02T16:34:18.750
> 
> 标签：maven, maven-plugin

我正在尝试使用 maven 生成一个战争文件，但我收到了这个错误（大部分下载日志输出被省略以使日志更清晰）：

```
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-war-plugin/2.1.1/maven-war-plugin-2.1.1.pom
Downloaded: 
...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building tn.talan.selenium Maven Webapp 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ tn.talan.selenium ---
...
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ tn.talan.selenium ---
...
[INFO] --- maven-war-plugin:2.1.1:war (default-cli) @ tn.talan.selenium ---
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-archiver/2.4.1/maven-archiver-2.4.1.pom
Downloaded: 
...
[INFO] BUILD FAILURE
...
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-war-plugin:2.1.1:war (default-cli) on project tn.talan.selenium: Execution default-cli of goal org.apache.maven.plugins:maven-war-plugin:2.1.1:war failed: Plugin org.apache.maven.plugins:maven-war-plugin:2.1.1 or one of its dependencies could not be resolved: Could not transfer artifact org.codehaus.plexus:plexus-io:jar:1.0.1 from/to central (http://repo.maven.apache.org/maven2): GET request of: org/codehaus/plexus/plexus-io/1.0.1/plexus-io-1.0.1.jar from central failed: Read timed out -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
... 
```

这是我的 pom.xml 文件代码：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-
 v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>selenium</groupId>
  <artifactId>tn.talan.selenium</artifactId>
  <packaging>war</packaging>
  <version>0.0.1-SNAPSHOT</version>
  <name>tn.talan.selenium Maven Webapp</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>

  <build>
    <finalName>tn.talan.selenium</finalName>

    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
      </plugin>

      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>tomcat-maven-plugin</artifactId>
        <version>1.0-beta-1</version>
      </plugin>

    </plugins>

  </build>

</project> 
```

我的pom怎么了？请问有什么想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-03T06:32:40.303

指定版本`maven-war-plugin`，例如

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-war-plugin</artifactId>
  <version>2.2</version>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-15T16:17:17.313

为了解决这个错误，您不需要做任何事情，只需更改您的 jdk 版本即可。您可以喜欢任何 jdk 版本，但不喜欢最新版本。尝试使用旧版本。推荐：JDK 11.0.11

# c++ - 从控制台调用 doxygen 搜索

> ID：11297694
> 
> 赞同：-1
> 
> 时间：2012-07-02T16:35:12.490
> 
> 标签：c++, documentation, doxygen

我在 Linux 下的 C++ 项目中使用 doxygen。可以使用文档主页上的搜索框进行搜索，但是有没有办法从命令行调用搜索？例如，通过使用类似`firefox myHelp.html/+search for myClass+`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:50:06.323

你真的想用你的 doxygen 文档中的搜索结果来启动浏览器吗？

在 doxygen 文档页面中执行搜索的 URL 具有以下形式：

```
 ...Doxygen/html/search.php?query=searchterm 
```

所以你可以尝试类似

```
 firefox file:///somepath/Doxygen/html/search.php?query=searchterm 
```

但是，我不确定这是否能解决您的问题。

此外，您还可以使用典型的命令行工具在文件系统中查找术语：

```
 grep -R searchterm 
```

# c# - MVC3：让助手知道模型属性在图中的位置

> ID：11297695
> 
> 赞同：1
> 
> 时间：2012-07-02T16:35:22.803
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, c#-4.0, reflection

我的一个页面有一个相当复杂的模型；它由几个嵌套的模型对象组成。在一个使用带有子集合的子对象的部分中，我`EditorFor`像这样使用帮助器：

```
@Html.EditorFor(m => m.CAS.LERoles[i].LE, "TinyText") 
```

，我最终会得到类似的东西：

```
<input id="CAS_LERoles_0__LE" class="tinyText" type="text" value="0" name="CAS.LERoles[0].LE" data-val-required="The Legal Entity field is required." data-val-number="The field Legal Entity must be a number." data-val="true"> 
```

... 这很棒。但是，我编写了自己的助手来将枚举转换为选择列表，如下所示：

```
public static HtmlString EnumSelectListFor<TModel, TProperty>(
    this HtmlHelper<TModel> htmlHelper,
    Expression<Func<TModel, TProperty>> forExpression,
    object htmlAttributes,
    bool blankFirstLine)
    where TModel : class
    where TProperty : struct
{
    //MS, it its infinite wisdom, does not allow enums as a generic constraint, so we have to check here.
    if (!typeof(TProperty).IsEnum) throw new ArgumentException("This helper method requires the specified model property to be an enum type.");

    //initialize values
    var metaData = ModelMetadata.FromLambdaExpression(forExpression, htmlHelper.ViewData);
    var propertyName = metaData.PropertyName;
    var propertyValue = htmlHelper.ViewData.Eval(propertyName).ToStringOrEmpty();

    //build the select tag
    var returnText = string.Format("<select id=\"{0}\" name=\"{0}\"", HttpUtility.HtmlEncode(propertyName));
    if (htmlAttributes != null)
    {
        foreach (var kvp in htmlAttributes.GetType().GetProperties()
            .ToDictionary(p => p.Name, p => p.GetValue(htmlAttributes, null)))
        {
            returnText += string.Format(" {0}=\"{1}\"", HttpUtility.HtmlEncode(kvp.Key),
                HttpUtility.HtmlEncode(kvp.Value.ToStringOrEmpty()));
        }
    }
    returnText += ">\n";

    if (blankFirstLine)
    {
        returnText += "<option value=\"\"></option>";
    }

    //build the options tags
    foreach (var enumName in Enum.GetNames(typeof(TProperty)))
    {
        var idValue = ((int)Enum.Parse(typeof(TProperty), enumName, true)).ToString();
        var displayValue = enumName;

        // get the corresponding enum field using reflection
        var field = typeof(TProperty).GetField(enumName);
        var display = ((DisplayAttribute[])field.GetCustomAttributes(typeof(DisplayAttribute), false)).FirstOrDefault();
        var titleValue = string.Empty;
        if (display != null)
        {
            // The enum field is decorated with the DisplayAttribute =>
            // use its value
            displayValue = display.Name;
            titleValue = display.Description.ToStringOrEmpty();
        }

        returnText += string.Format("\t<option value=\"{0}\" title=\"{1}\"",
            HttpUtility.HtmlEncode(idValue), HttpUtility.HtmlEncode(titleValue));
        if (enumName == propertyValue)
        {
            returnText += " selected=\"selected\"";
        }
        returnText += string.Format(">{0}</option>\n", HttpUtility.HtmlEncode(displayValue));
    }

    //close the select tag
    returnText += "</select>\n";
    return new HtmlString(returnText);
} 
```

当我像这样在我的页面中使用它时：

```
@Html.EnumSelectListFor(m => m.CAS.LERoles[i].APMasterRole) 
```

我最终得到了这个：

```
<select name="APMasterRole" id="APMasterRole">
(stuff)
</select> 
```

回想起来，我想我认为这会被恰当地翻译，现在我意识到我有点天真。我真的希望 MVC 框架中内置了一种机制，我可以使用它来生成正确的名称和 id；否则这看起来像一个反射的迷宫。

所以问题是，是否有一种机制可以为这样的复杂模型对象创建名称和 ID 字符串？如果是这样，它将如何使用？如果没有，有没有比较简单的方法来生成name和id，从而可以将表单数据绑定回对象模型？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:40:01.243

> 我真的希望 MVC 框架中内置了一种机制，我可以使用它来生成正确的名称和 id；否则这看起来像一个反射的迷宫。

当然有这样的机制。你认为内置助手是如何做到的？你没有读过 ASP.NET MVC 框架的源代码吗？或者使用反射器什么的？

```
string name = ExpressionHelper.GetExpressionText(forExpression);
var ti = htmlHelper.ViewContext.ViewData.TemplateInfo;
string fullHtmlFieldName = ti.GetFullHtmlFieldName(name);
string id = ti.GetFullHtmlFieldId(fullHtmlFieldName);
// Now go ahead and use fullHtmlFieldName and id

var returnText = string.Format(
    "<select id=\"{0}\" name=\"{1}\"", 
    id, 
    fullHtmlFieldName
); 
```

啊，在我忘记之前：请使用 a`TagBuilder`来生成 DOM 元素，`<select>`而不是这种可怕的字符串连接，它不能正确编码任何东西。更不用说`+=` 循环内字符串的运算符了。字符串是不可变的，这会花费您的内存分配！至少使用一个`StringBuilder`.

# ruby - XML中奇怪的日期格式，转换为Ruby DateTime对象

> ID：11297704
> 
> 赞同：2
> 
> 时间：2012-07-02T16:36:19.367
> 
> 标签：ruby, xml, datetime

这是一个很难用谷歌搜索的。我有一个一百万行长的 XML 文档，我正在使用 Ruby 来解析它并删除我不关心的条目。我的标准之一是创建日期。这些 XML 块中的日期看起来很有趣

```
<attribute name="datemodified" type="date">362895460.21263897418975830078</attribute>
<attribute name="datecreated" type="date">356831173.15324598550796508789</attribute> 
```

我从来没有见过这样格式的日期。如果你做了类似的事情，它们看起来很相似`Time.now.to_f`。即便如此，我也不知道如何将它们转换为 Ruby DateTime 对象。如果您甚至可以确定这些时间是如何产生的，或者它们的含义，那将非常有帮助。

如果有帮助，这个 XML 文件最初是由一个名为“Things”的 Mac OS X 应用程序创建的。

谢谢阅读！

**更新：我又创建了两个条目并记录了创建它们的时间：**

从 2012 年 7 月 2 日上午 9:57 开始

```
<attribute name="datemodified" type="date">362941035.01687598228454589844</attribute> 
<attribute name="datecreated" type="date">362940986.89370900392532348633</attribute> 
```

从 2012 年 7 月 2 日上午 9:58 开始

```
<attribute name="datemodified" type="date">362941107.69538801908493041992</attribute>
<attribute name="datecreated" type="date">362941080.53793197870254516602</attribute> 
```

我无法精确到秒，但我确实让它们相隔大约一分钟......这使得它们看起来实际上是秒......但是......从某个随机日期开始。也许是开发者的生日:)

做一些快速的数学运算，为了便于记忆，随机日期似乎在 2000-12-31 16:09:43 -0800 左右，或者可能是 01/01/01... 并且 978336000 以秒为单位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:45:35.017

该`Time.at`方法从 1970 年以来的秒数转换为一个`Time`实例：

```
[1] pry(main)> Time.at 362895460.21263897418975830078
=> 1981-07-02 00:17:40 -0400 
```

如果该日期不正确，但单位是秒，则可以添加一个常量以获取正确的日期，例如

```
[2] pry(main)> Time.parse('2001-01-01') - Time.at(0)
=> 978325200.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:04:21.360

这些数字在我看来就像整数部分是儒略日期，而小数部分是一天的小数部分。我没有详细调查过。作为参考，撒克逊语中用于从“朱利安瞬间”转换日期/时间的代码是：

```
public static DateTimeValue fromJulianInstant(/*@NotNull*/ BigDecimal instant) {
        BigInteger julianSecond = instant.toBigInteger();
        BigDecimal microseconds = instant.subtract(new BigDecimal(julianSecond)).multiply(DecimalValue.BIG_DECIMAL_ONE_MILLION);
        long js = julianSecond.longValue();
        long jd = js / (24L * 60L * 60L);
        DateValue date = DateValue.dateFromJulianDayNumber((int)jd);
        js = js % (24L * 60L * 60L);
        byte hour = (byte)(js / (60L * 60L));
        js = js % (60L * 60L);
        byte minute = (byte)(js / (60L));
        js = js % (60L);
        return new DateTimeValue(date.getYear(), date.getMonth(), date.getDay(),
                hour, minute, (byte)js, microseconds.intValue(),0 , true);
} 
```

加

```
public static DateValue dateFromJulianDayNumber(int julianDayNumber) {
        if (julianDayNumber >= 0) {
            int L = julianDayNumber + 68569 + 1;    // +1 adjustment for days starting at noon
            int n = (4 * L) / 146097;
            L = L - (146097 * n + 3) / 4;
            int i = (4000 * (L + 1)) / 1461001;
            L = L - (1461 * i) / 4 + 31;
            int j = (80 * L) / 2447;
            int d = L - (2447 * j) / 80;
            L = j / 11;
            int m = j + 2 - (12 * L);
            int y = 100 * (n - 49) + i + L;
            return new DateValue(y, (byte) m, (byte) d, true);
        } else {
            // add 12000 years and subtract them again...
            DateValue dt = dateFromJulianDayNumber(julianDayNumber +
                    (365 * 12000 + 12000 / 4 - 12000 / 100 + 12000 / 400));
            dt.year -= 12000;
            return dt;
        }
    } 
```

# simulator - 具有触觉、本体感受、力/扭矩、关节传感器的机器人模拟器

> ID：11297714
> 
> 赞同：0
> 
> 时间：2012-07-02T16:37:25.450
> 
> 标签：simulator, robotics

我正在寻找具有触觉、本体感受、力/扭矩、关节传感器甚至手臂中更多传感器的机械臂模拟器或人形模拟器。有没有免费的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T21:26:20.447

那里有很多免费的机器人模拟器。这个问题列出了很多：[Robotics Simulator](https://stackoverflow.com/questions/2533321/robotics-simulator)。

但从我认为你想要的来看，你可能想要一个带有物理引擎后端的模拟器，比如 Gazebo 或 Microsoft Robotics Studio。对于手臂/抓握，我还会提到 GraspIt！[http://www.cs.columbia.edu/~cmatei/graspit/](http://www.cs.columbia.edu/~cmatei/graspit/)和 OpenRAVE [http://openrave.org/](http://openrave.org/)。虽然我不确定 OpenRAVE 是否包含物理。

我不确定您对哪种触觉感兴趣，但我怀疑这些模拟器是否足够准确以模拟表面纹理。我想你会发现这些模拟器很粗糙。我会说所有允许构建和控制关节的模拟器因此将允许您测量关节扭矩和角度，从而为您提供本体感觉。其中一些模拟器将允许您创建自定义传感器并将其添加到手臂。

# android - 为什么 iframe 在 Android 4.0+ ICS 上的 webview 中工作？

> ID：11297717
> 
> 赞同：2
> 
> 时间：2012-07-02T16:37:30.583
> 
> 标签：android, iframe, webview, powerpoint

我将 Google Docs 的 iframe 加载到 Android 中的 webview 中，此 iframe 正在从 Google Docs 的外部服务器加载 PPT 文件（Power Point 文件）。这是安卓代码：

```
public class Test_iframeActivity extends Activity {

private WebView webView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    webView = (WebView) findViewById(R.id.wv);
    webView.getSettings().setJavaScriptEnabled(true);

    //String customHtml = "<html><body><h1>Hello, WebView</h1></body></html>";
    String customHtml = "<iframe src='http://docs.google.com/viewer?url=http://www.iasted.org/conferences/formatting/presentations-tips.ppt&embedded=true' width='100%' height='100%' style='border: none;'></iframe>";
    webView.loadData(customHtml, "text/html", "UTF-8");
}} 
```

我的问题是......为什么我可以看到 iframe 在 Android 4.0 中运行良好，但在 Android 2.1 到 2.3 中却看不到它？（我不知道在 Android 3 中是否有效）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:31:40.000

解决了！

错误是 ASCII 编码...我应该替换 #、%、/ 和 ? 通过其他字符，请查看[http://developer.android.com/reference/android/webkit/WebView.html#loadData(java.lang.String](http://developer.android.com/reference/android/webkit/WebView.html#loadData(java.lang.String) , java.lang.String, java.lang.String) 了解更多信息。

# mysql - MySQL使用垂直数据选择多个字段

> ID：11297725
> 
> 赞同：1
> 
> 时间：2012-07-02T16:38:30.917
> 
> 标签：mysql

我有一个 MySQL 数据库，其中设置了表以垂直方式存储数据：

```
Userid -- Field -- Data
186       30       New York
186       31       Phone
186       32       Delta

187       30       Los Angeles
187       31       Website
187       32       US Air 
```

如果它们已经是水平的，我可以选择列，但希望能够组织输出，所以它看起来像这样：

```
Userid -- Data30   --   Data31 -- Data32
186       New York      Phone     Delta
187       Los Angeles   Website   US Air 
```

我怎么说“选择 DATA30 显示此列，但前提是 FIELD 等于 30”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:42:48.437

这是一个经典的数据透视表。使用`MAX()`聚合和`GROUP BY`with `CASE`，您可以将行转换为列。这只有在值`Field`有限且定义明确的情况下才能正常工作。

聚合的目的`MAX`只是消除`NULL`每个值，因此不是每行`Userid`只有一个非空值的 3 行，而是将它们折叠成一行。

```
SELECT
  Userid,
  MAX(CASE WHEN Field = 30 THEN Data ELSE NULL END) AS Data30,
  MAX(CASE WHEN Field = 31 THEN Data ELSE NULL END) AS Data31,
  MAX(CASE WHEN Field = 32 THEN Data ELSE NULL END) AS Data32
FROM yourtable
GROUP BY Userid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:47:30.167

试试这个：

```
select Userid, 
if(Field=30,Data,null),
if(Field=31,Data,null),
if(Field=32,Data,null) 
from table1
group by Userid; 
```

# java - JMS 连接池或会话池

> ID：11297728
> 
> 赞同：9
> 
> 时间：2012-07-02T16:38:33.377
> 
> 标签：java, session, connection, jms, connection-pooling

我对 JMS 连接池和 JMS 会话池感到困惑。

我有一个 Java 应用程序，它有大约 20 个线程处理从供应商产品接收到的消息。在推送到 JMS 主题（所有 20 个线程的主题相同）之前，每个线程都会对消息进行一些处理。

我想确保没有线程在等待免费的 JMS 连接，因为性能至关重要。但是，当我查看 JMS 连接工厂时，我看不到任何为我的 JMS 连接配置池大小的方法。

现在我真的很困惑。是我应该汇集的 JMS 会话吗？

对此非常感谢的任何帮助

谢谢乔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-30T20:26:39.857

从[J2EE 6 api](http://docs.oracle.com/javaee/6/api/javax/jms/package-summary.html) javax.jms.Connection

> 通常表示客户端和服务提供商软件之间的开放 TCP/IP 套接字。

和

> Session 对象是用于产生和使用消息的单线程上下文。

会话（或会话池）发生在连接的上下文中。

您可能希望根据在您所涉及的特定技术堆栈、框架和应用程序的上下文中从头开始创建这些资源的成本来确定是池化会话、连接还是两者都不池化。

我的资源：

*   [http://docs.oracle.com/javaee/6/api/javax/jms/package-summary.html](http://docs.oracle.com/javaee/6/api/javax/jms/package-summary.html)
*   [JMS 连接、会话和生产者/消费者之间的关系](https://stackoverflow.com/questions/4741713/relationship-between-jms-connections-sessions-and-producers-consumers)
*   [http://hjb.berlios.de/connections-sessions.html](http://hjb.berlios.de/connections-sessions.html)
*   [http://www.precisejava.com/javaperf/j2ee/JMS.htm#JMS106](http://www.precisejava.com/javaperf/j2ee/JMS.htm#JMS106)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:05:22.257

我知道 PooledConnectionFactory 类中的一种方法，您可以使用该方法设置最大连接数。方法是 setMaxConnections。然而，这是您问题的部分答案。

# mysql - MySQL，无法创建 UNIX 套接字 (12)

> ID：11297729
> 
> 赞同：4
> 
> 时间：2012-07-02T16:38:39.543
> 
> 标签：mysql

```
SQLSTATE[HY000] [2001] Can't create UNIX socket (12) 
```

在我的本地机器上，我的项目运行良好。一旦我将更改推送到服务器，我就会收到此错误消息。

mysql 日志完全是空的。

Mysql 配置：[my.cnf](http://dpaste.com/hold/765833/)

然而，另一个使用相同 mysql 服务器的站点工作正常。

* * *

以下是更多信息： 我的 vServer 正在运行 ubuntu 10.04 并且有 2 GB 的 RAM。

```
/root$ ps -le | grep mysqld
0 S     0  9502     1  0  85   0 -  1025 wait   ?        00:00:00 mysqld_safe
4 S   109  9539  9502  0  76   0 - 77209 stext  ?        00:01:02 mysqld
/root$ ps -le | grep mysqld
0 S     0  9502     1  0  85   0 -  1025 wait   ?        00:00:00 mysqld_safe
4 S   109  9539  9502  0  75   0 - 77209 stext  ?        00:01:03 mysqld

/root$ ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 20
file size               (blocks, -f) unlimited
pending signals                 (-i) 16382
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) unlimited
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

也许只是为了查看内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T19:55:01.553

这是[CR_SOCKET_CREATE_ERROR](http://dev.mysql.com/doc/refman/5.0/en/error-messages-client.html#error_cr_socket_create_error)，由客户端代码生成的错误。

12 可能是您客户的`errno`. 您的系统上的错误 12 是什么？对我来说，使用 mysql`perror`命令行实用程序，它是“操作系统错误代码 12：无法分配内存”

# java - java中的包与项目分离

> ID：11297730
> 
> 赞同：5
> 
> 时间：2012-07-02T16:38:43.493
> 
> 标签：java, namespaces, projects-and-solutions

首先，我从 C# 回到（返回）Java，如果我的术语或哲学没有完全一致，请道歉。

背景是这样的：我们有越来越多的为 Web 编写的内部支持工具。他们在前端使用 HTML5/AJAX/其他流行语，后端使用 Java。这些工具利用一个轻量级的内部框架，因此它们可以共享一个用于安全和其他配置的管理界面。每个工具都是由一个单独的作者编写的，我希望这种趋势会继续下去，所以我想让未来的作者更容易在我们已经决定使用的第三方库上保持“标准化”比如DI、单元测试、ORM等。

我们的包命名目前如下所示：

*   com.ourcompany.tools.framework
*   com.ourcompany.tools.apps.app1name
*   com.ourcompany.tools.apps.app2name

...等等。

所以这是我的问题：为了 Maven 设置、Eclipse 等，这些应用程序（和框架）中的每一个是否应该被视为一个单独的项目？

随着时间的推移，我们可能会有很多应用程序出现在这里，所以看起来分离会让依赖关系更清晰，让人们更容易地使用一个工具。另一方面，（1）可能在多个项目中“拆分”包结构的更深部分是一种代码异味，并且（2）将它们结合起来会使工具编写者更倾向于使用已经为另一个项目准备的第三方库工具。

FWIW，我最初的直觉是将它们分开。

你说什么，Java 大师？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T16:42:35.237

我绝对会把它们分开。出于 Maven 的目的，请确保每个应用程序/项目对框架/应用程序具有适当的依赖关系，这样当您只想构建单个应用程序时就不必构建所有内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T16:45:56.163

我将我的项目分开，但使用父 pom 来包含所有依赖项和其他常见属性。单个工具/项目具有名称和对父项目的引用，以及任何特定于项目的依赖项（如果有）。这有助于保持公共库和依赖项，因为公共库和依赖项已经全部配置，但允许我专注于我需要使用的代码库的特定部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T16:47:54.780

我肯定会把这些东西分成不同的项目。

您应该使用 Maven 自动处理依赖项/构建过程（包括您自己的内部共享库和第三方依赖项）。多个应用程序引用相同的共享库不会有任何问题 - 如果需要，您甚至可以保留多个版本。

这种方法的几个好处：

*   这迫使您仔细考虑共享项目的 API 设计，从长远来看，这将是一件好事。
*   它可能还会为您提供正确的源代码控制粒度 - 即您的开发人员可以单独检查并处理特定的应用程序或后端模块

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T16:44:58.270

如果项目的某个部分可能用于多个项目，那么将其拉出是有意义的。如果您需要更新其中一个常用项目中的代码，它也会使其更简洁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T04:23:09.560

如果您将它们放在一起，您将在开发、构建和部署工具时遇到更少的障碍。

我们有相反的情况，有许多单独的项目。将它们合并到一个项目树中后，我们的工作效率更高，这对我们来说比任何流行的约定都更重要。

# php - 在我的 mac OS X 10.5 上升级 PHP

> ID：11297732
> 
> 赞同：2
> 
> 时间：2012-07-02T16:38:59.340
> 
> 标签：php, macos, upgrade

我在 OS X 10.5 (Leopard) 上运行，我想将我必须的 PHP 5.2.15 (cli) 的当前版本更新到 PHP 5.3 甚至 5.4。

问题是我需要在终端中运行一些 PHP 片段，而我拥有的版本（*PHP 5.2.15 (cli) (built: May 5 2011 18:56:00)*）不允许某些功能。这就是为什么我需要升级我当前的版本。

我在网上搜索，但没有找到任何东西。我该怎么做 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:19:23.770

步骤 1\. 安装[Homebrew](https://brew.sh/)

步骤 2\. 安装[Homebrew-php](https://web.archive.org/web/20130809154123/https://github.com/josegonzalez/homebrew-php)

Step 3\. 安装你想要的php版本

第 4 步。快乐的 php 编码。

或者，如果您无法使其正常工作（应该不是问题，但以防万一），您可以尝试使用[MAMP](https://www.mamp.info/en/mac/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T16:56:52.180

你不应该更新默认的 PHP 版本，而是安装它，我相信它`tmp`在 MacOSX 中。从 PHP 的网站下载源代码，然后进行正常的命令行解压缩，这在网上很容易找到。文件本身知道将所有内容放在哪里。然后只需确保您的路径可以指向新的 PHP 安装。

通过输入“which php-filename”，您可以查看它是否已经在您的路径中。希望这能给你一个更好的主意。

编辑：好的，我更正了我之前的部分`/tmp`。从我看到它的`/var`. 这就是 OSX 默认新安装的地方。这是你应该做的，以免弄乱内置的东西。你永远不知道什么时候可能需要它。

# eclipse - Eclipse 在调试 GWT 应用程序时挂起

> ID：11297733
> 
> 赞同：2
> 
> 时间：2012-07-02T16:39:09.043
> 
> 标签：eclipse, debugging, gwt

我们正在使用 JAVA GWT-P 框架（版本 2.4）开发我们的 Web 应用程序。我们使用 Eclipse（3.7 版）Indigo 作为开发 GUI。当我们调试应用程序时，eclipse 普遍被挂起，令人惊讶的是这是一种随机行为。

这并不仅仅发生在程序的一部分中。任何时候，当我们调试时，Eclipse 都会挂在不同的模块中。

为了解决这个问题，我们尝试使用不同的操作系统，例如 Windows XP（开发 gui：Eclipse 版本 3.7 Indigo）、Fedora 版本 16（开发 gui：Eclipse 版本 Helios Service Release 2）、Cent OS（开发 gui：Eclipse 版本） Helios 服务版本 2)。但没有运气。

谁能帮我决定我们应该使用哪个操作系统、eclipse或版本，这样才能解决挂起的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:13:28.457

Use a machine with at least 8G RAM, quad core for GWT development. Anything less than that would be catastrophic and unproductive.

Ideally 8 core, 12 GB.

*   Increase your eclipse jvm vm heap size max, at startup. Default eclipse startup is either 256M or 512M. It should be at least 768M. I have tried 1024M which made only a marginal difference above 768M. I found 900M seems to be the most that would be used in my cases.

*   You may have to increase your permgen memory allocation too. I think permgen space is used for storing class definition and are never garbage-collected. I presume that when my eclipse hung indefinitely was when there was no more permgen space to store new class defn.

I have never had to redefine the stackspace allocation for eclipse.

You can google around to find out the jvm startup arguments to define mem allocation. e.g. -Xmx, etc.

*   Initially develop only for a single browser. Decide between using FF or Chrome as your dev browser. Then tune your entrypoint gwt.xml to set the user-agent property for that browser. Google on gwt set property user-agent. Compiling for only one browser, I have found, speeds up the compilation a lot.

*   Don't ever store your projects, source files, resources or libs that are accessed by the compiler, in a network or usb drive. All your compilable/includable resources should be on your local drive.

Try to use maven or some other tool for dependency management, so that you do not need to access your jars or dependent projects over the network.

*   Do not, ever, let your development strategy roll down the hill by depending on live-project dependencies. Having workspace with 50 or more projects is disaster and signifies a development team in crisis. The compulsive and persistent compilation, scanning of projects by eclipse background take a huge toll on the performance of eclipse.

*   Try to disable as much validation as possible. e.g., disable html and javascript validation.

If you have a huge number of server side projects ... You need to re-architect your development strategy to cluster your 50 - 100 projects into project packages, so that each project package has no more than 20 compilable/validateable project members (ideally less than 5 projects). Each package is frozen by versions and packaged as jars. Use only the jars for development dependencies.

Your programmers need to learn not to have the impulse to work on a workspace with 200 projects. Enhancements are reserved for bugzillas of each project package. Having a 200 project workspace is bad project management. It wastes your programmers' time by having eclipse slow down now and then.

*   Have sufficient temp space (or for Windows sufficient slack space on the user disk). I have experienced that insufficient disk space for compiler buffering/caching has caused slow-downs and hang-ups. Having a 5G slack space is the minimal - the more the merrier so as to preclude having to clear the trash or search for files to delete or clear the GWT compiler generated temp files. A 5G slack space is still very inconvenient.

AFAI have experienced, neither windows 7/vista or linux made much performance difference except that eclipse seems to start up much slower on Windows.

*   Therefore, if you know how to tune your anti-virus, may be you should tell the anti-virus software to skip scanning the workspace and project folders.

*   Unless you have an 8-core 12GB machine, you should disable most of windows aero, trasparency. But you need to keep windows compositing (otherwise you would destroy your eyesight looking at the bad fonts).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:47:42.837

**问题**

我有一个 GWT 项目，在我的旧 core2 机器上运行良好。当我最近获得一个新的核心 i7、8GB 内存（Dell XPS Ubuntu 开发者版）时，我发现当我尝试通过单击“开发”下的浏览器链接开始调试时，Eclipse 经常挂起（大约 90% 的初创公司挂起）模式”日食视图。必须有一个线程同步错误（死锁），只有在“时间与正常测试用例不同”时才会发生。这是一个计时错误死锁这一事实，这就是为什么它看起来如此“随机”并且尚未被发现和修复的原因。在我写这篇文章的时候，我拥有所有最新的 GWT，以及最新的 Eclipse 等。

**解决方法：**

幸运的是，我发现如果我复制该链接并将其粘贴到已启动的 Firefox 实例（在 Eclipse 之外）中，则永远不会有任何挂起。我 100% 确定这在我的代码中不是问题。我有 95% 的把握这是 GWT 中发生的僵局。所以不要点击“开发模式”链接，你会没事的。希望对这篇文章的人有所帮助。

# android - 为什么当我从活动 onResume 调用 AsyncTask 时，我看不到进度对话框？

> ID：11297734
> 
> 赞同：1
> 
> 时间：2012-07-02T16:39:10.370
> 
> 标签：android, android-asynctask, android-activity, progressdialog

当用户在我的应用程序中按下选项卡时 - 我希望启动一个显示进度条的后台任务。

我通过从我的活动的 onResume() 启动 AsyncTask 来做到这一点。问题是执行此操作时未显示我的进度对话框 - 后台任务成功运行并且在 onPostExecute 运行后焦点返回到我的活动并且应用程序正常继续。

如何从 onResume = 启动 AsyncTask，或者在启动活动时仍显示在 onPreExecute 上创建的活动布局/进度条？

目前代码的作用如下：

[http://pastebin.com/KUsg3Mri](http://pastebin.com/KUsg3Mri)但是，当我更改选项卡并调用 onCreate 时，异步任务被启动 - 无需更改选项卡的内容或显示进度条，当异步任务完成时 - 活动然后显示其所有 gui元素成功

好像我这样做了：[http](http://pastebin.com/KUsg3Mri) : //pastebin.com/KUsg3Mri 并从 onCreate 或 onResume 开始 findReplays - 这将显示进度对话框 - 但 publishProgress 从不调用 onProgressUpdate - 所以它更接近，但没有雪茄！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:14:54.500

尝试这个....

在从 UI 线程**执行 AsyncTask<> 的 execute() 方法之前**使用ProgressDiaglog 初始化，并**在返回语句之前在 AsyncTask<> 的 doInBackground() 方法中调用 dismiss()...**

**一个更好地解释它的例子......**

```
public class AsyncTaskExampleActivity extends Activity 
{
        protected TextView _percentField;
        protected Button _cancelButton;
        protected InitTask _initTask;
        ProgressDialog pd;

    @Override
    public void onCreate( Bundle savedInstanceState ) 
    {
        super.onCreate(savedInstanceState);

        setContentView( R.layout.main );

        _percentField = ( TextView ) findViewById( R.id.percent_field );
        _cancelButton = ( Button ) findViewById( R.id.cancel_button );
        _cancelButton.setOnClickListener( new CancelButtonListener() );

        _initTask = new InitTask();

         pd = ProgressDialog.show(AsyncTaskExampleActivity.this, "Loading", "Please Wait");

        _initTask.execute( this );
    }

    protected class CancelButtonListener implements View.OnClickListener 
    {
                public void onClick(View v) {
                        _initTask.cancel(true);
                }
    }

    /**
     * sub-class of AsyncTask
     */
    protected class InitTask extends AsyncTask<Context, Integer, String>
    {
        // -- run intensive processes here
        // -- notice that the datatype of the first param in the class definition matches the param passed to this method 
        // -- and that the datatype of the last param in the class definition matches the return type of this method
                @Override
                protected String doInBackground( Context... params ) 
                {
                        //-- on every iteration
                        //-- runs a while loop that causes the thread to sleep for 50 milliseconds 
                        //-- publishes the progress - calls the onProgressUpdate handler defined below
                        //-- and increments the counter variable i by one
                        int i = 0;
                        while( i <= 50 ) 
                        {
                                try{
                                        Thread.sleep( 50 );
                                        publishProgress( i );
                                        i++;
                                } catch( Exception e ){
                                        Log.i("makemachine", e.getMessage() );
                                }
                        }
                        pd.dismiss(); 
                        return "COMPLETE!";
                }

                // -- gets called just before thread begins
                @Override
                protected void onPreExecute() 
                {
                        Log.i( "makemachine", "onPreExecute()" );

                        super.onPreExecute();

                }

                // -- called from the publish progress 
                // -- notice that the datatype of the second param gets passed to this method
                @Override
                protected void onProgressUpdate(Integer... values) 
                {
                        super.onProgressUpdate(values);
                        Log.i( "makemachine", "onProgressUpdate(): " +  String.valueOf( values[0] ) );
                        _percentField.setText( ( values[0] * 2 ) + "%");
                        _percentField.setTextSize( values[0] );
                }

                // -- called if the cancel button is pressed
                @Override
                protected void onCancelled()
                {
                        super.onCancelled();
                        Log.i( "makemachine", "onCancelled()" );
                        _percentField.setText( "Cancelled!" );
                        _percentField.setTextColor( 0xFFFF0000 );
                }

                // -- called as soon as doInBackground method completes
                // -- notice that the third param gets passed to this method
                @Override
                protected void onPostExecute( String result ) 
                {

                        super.onPostExecute(result);
                        Log.i( "makemachine", "onPostExecute(): " + result );
                        _percentField.setText( result );
                        _percentField.setTextColor( 0xFF69adea );
                        _cancelButton.setVisibility( View.INVISIBLE );
                }
    }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T23:55:52.433

好的！最终通过 android-dev IRC 频道找到了解决方案。

任务正在工作但progressPublish调用没有过滤回UI的原因是因为我正在调用AsyncTask执行，然后立即调用.get（）方法 - 这会阻塞 - 在asynctask试图时占用UI线程用它！

所以我删除了 .get() 方法，并将相关的代码部分放入 onPostExecute - 一切正常！

# jquery-mobile - 返回到 JQuerymobile 中的筛选列表视图

> ID：11297736
> 
> 赞同：0
> 
> 时间：2012-07-02T16:39:22.567
> 
> 标签：jquery-mobile

我正在使用 listview 来过滤大量项目。每个项目都是指向另一个页面的链接，我用它来编辑所选项目的详细信息。如何返回我的列表视图并让它记住我之前输入的过滤器文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:45:40.217

您应该将过滤器数据作为 url 查询字符串发送到后端框架，并让它处理数据和请求重定向。例如：

*   当有人点击链接时，发送到 url，例如 www.example.com/page.html?filter1=xyz&filter2=abc
*   使用过滤器创建表单提交数据，或者您希望它保留。您可能希望使用包含过滤器数据的信号或发布查询。

# ios - ios应用程序在重新打开时崩溃

> ID：11297739
> 
> 赞同：1
> 
> 时间：2012-07-02T16:39:30.253
> 
> 标签：ios, cocoa-touch, crash, instruments

我已经完成并确保我的应用程序的内存使用情况良好，并且一切似乎都已签出。大多数情况下，当您切换应用程序并切换回来时，该应用程序就可以正常打开。但是，如果您经常使用该应用程序，然后让手机闲置直到它关闭然后重新打开 - 解锁设备后该应用程序将崩溃。我该如何剖析原因是什么？设备上是否偶然保存了某种崩溃日志？

*注意我不能在这种特殊情况下使用 xcode 工具，因为当手机连接到电缆时，它永远不会空闲它自己进入睡眠状态，而且我无法通过手动睡眠设备来崩溃。我不认为闲置睡觉是问题，这只是我在崩溃发生之前注意到的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:44:20.923

您应该能够在同步时访问设备的崩溃日志。

OS X：~/Library/Logs/CrashReporter/MobileDevice//

Windows XP：C:\Documents and Settings\Application Data\Apple 计算机\Logs\CrashReporter\\

Windows Vista：C:\Users\AppData\Roaming\Apple 电脑\Logs\CrashReporter\MobileDevice\\

# jquery - Jquery滚动到页面底部

> ID：11297743
> 
> 赞同：1
> 
> 时间：2012-07-02T16:39:34.560
> 
> 标签：jquery, scroll

我需要一些适当的滚动解决方案来处理底部的标签。可以在以下位置查看工作代码：[此链接](http://design.online-folio.com/xhtml/sc/index.html)

检查网页设计等的页脚链接。jquery代码是：

```
$(document).ready(function() {    
    $('.locations div').hide();
    $('#footer ul.left li a').click(function() {
        $('#footer ul.left li').removeClass('active');
        $(this).parent().addClass('active');
        var currentTab = $(this).attr('href');
        $('.locations div').hide("normal");
        $(currentTab).show("normal");
        $("html, body").animate({
            scrollTop: $(document).height()
        }, "normal");
        return false;
    });    
});​ 
```

问题是：当单击一个链接时，窗口会正确向下滚动，但是当单击另一个链接时，页面中有一个小混蛋。也再次单击相同的链接。滚动向上，但内容没有隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:11:29.760

我只在第二次单击同一链接时才看到问题。尝试通过检查您的课程是否“活动”来检查链接是否被点击。如果它已经被点击，不要重新加载任何东西：

```
$(document).ready(function(){
 $('.locations div').hide();
  $('#footer ul.left li a').click(function(){
   if (!$(this).hasClass('active')){  //If it HASN'T been clicked yet
    $('#footer ul.left li').removeClass('active');
    $(this).parent().addClass('active');
    var currentTab = $(this).attr('href');
    $('.locations div').hide("normal");
    $(currentTab).show("normal");
    $("html, body").animate({ scrollTop: $(document).height() }, "normal");
    return false;
   }
 }); 
}); 
```

[在这里](http://jsfiddle.net/UxPut/)看我的小提琴

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:22:34.293

您的点击处理程序代码可以分解为以下步骤

1.  从所有 li 中删除课程
2.  将类添加到单击的 li。
3.  隐藏所有信息 div。
4.  显示点击了 li 的信息 div。

如您所见，您始终显示单击的 li 的信息 div。这就是您遇到第二个问题的原因（单击相同的链接不会隐藏信息）。

关于第一个问题，如果我们删除动画以滚动到文档底部，那么混蛋就不再存在了。仅当信息 div 不存在时，您才可以选择实现滚动到底部，即没有类“活动”的 li。

点击处理程序的伪代码

```
find li with class active.
- if not found
  - add class to current li. show current li's info div. scroll to bottom.
- if found,
  - check whether li is same as the li we clicked on.
    - if yes,
      - hide the current li's info div. exit the function.
    - if no,
      - hide the info div for the currently active li.
      - show the info div for the li clicked on. 
```

如果您需要 js 代码，请在评论中询问。

# iphone - 当我点击已选择的段部分时，UIControlEventValueChanged 不起作用

> ID：11297745
> 
> 赞同：0
> 
> 时间：2012-07-02T16:39:36.090
> 
> 标签：iphone, objective-c, uisegmentedcontrol, ipad-2, uicontrolevents

我的目标是在我点击已选择的段时再次触发 **UIControlEventValueChanged委托。**

所以我参考了以下链接

[uisegmentedcontrol-register-点击选定的段](https://stackoverflow.com/questions/1620972/uisegmentedcontrol-register-taps-on-selected-segment)

[维护选择中的分段控制](https://stackoverflow.com/questions/3468012/maintaining-selection-in-uisegmentedcontrol)

根据链接，我创建了一个 uisegmentedcontrol 子类，实现了该`- (void) setSelectedSegmentIndex:(NSInteger)toValue {`方法并编写了代码（来自上面的链接）。

它在 Ipad1 上运行良好。但是，当点击已选择的段时，继承/子类中的**setSelectedSegmentIndex**不会在 Ipad2 中触发！！！！但是，当我点击未选择的段索引时，它工作正常。

我完成的代码如下

**主班**

```
ReselectableSegmentControl *firstNextSegmentedControl = [[ReselectableSegmentControl alloc] init];
firstNextSegmentedControl.frame = CGRectMake(xCordinate, 255, 188, 50);
firstNextSegmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
firstNextSegmentedControl.tag = index + 1;      
[firstNextSegmentedControl addTarget:self action:@selector(firstNextThenSegmentedControlValueChanged:) forControlEvents:UIControlEventValueChanged];
[firstNextSegmentedControl insertSegmentWithImage:[UIImage imageNamed:@"NoTimerCounter.png"] atIndex:0 animated:YES];
[firstNextSegmentedControl insertSegmentWithImage:[UIImage imageNamed:@"Timer.png"] atIndex:1 animated:YES];
[firstNextSegmentedControl insertSegmentWithImage:[UIImage imageNamed:@"Counter.png"] atIndex:2 animated:YES];              
firstNextSegmentedControl.selectedSegmentIndex = 0;

[self.view addSubview:firstNextSegmentedControl];
[firstNextSegmentedControl release];
firstNextSegmentedControl = nil; 
```

**UISegmentSubClass .h 文件**

```
#import <Foundation/Foundation.h>

@interface ReselectableSegmentControl : UISegmentedControl {    

}

@end 
```

**UISegmentSubClass .m 文件**

```
-(void)setSelectedSegmentIndex:(NSInteger )selectedValue{

    if (selectedValue==self.selectedSegmentIndex) {

           [self sendActionsForControlEvents:UIControlEventValueChanged];
    }
       [super setSelectedSegmentIndex:selectedValue];  
} 
```

或者

```
-(void)setSelectedSegmentIndex:(NSInteger )selectedValue{

    if (self.selectedSegmentIndex == selectedValue) {           

              //doing my operation if tapped again the selected value.

    else {

        super.selectedSegmentIndex = selectedValue;
    }
} 
```

或者

```
- (void) setSelectedSegmentIndex:(NSInteger)toValue {

      if (self.selectedSegmentIndex == toValue) {

          [super setSelectedSegmentIndex:UISegmentedControlNoSegment];

    } else {

       [super setSelectedSegmentIndex:toValue];        
   } 
```

}

以上所有方法都不适用于 Ipad2。

对此问题的任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T10:22:15.627

呼...终于我得到了解决方案..

我使用**了 UITapGestureRecognizer**而不是使用`addTarget:self action:@selector()`

现在我的代码看起来像，

```
UISegmentedControl *firstNextSegmentedControl = [[UISegmentedControl alloc] init];
firstNextSegmentedControl.frame = CGRectMake(xCordinate, 255, 188, 50);
firstNextSegmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
firstNextSegmentedControl.selectedSegmentIndex = 0; 

[firstNextSegmentedControl insertSegmentWithImage:[UIImage imageNamed:@"NoTimerCounter.png"] atIndex:0 animated:YES];
[firstNextSegmentedControl insertSegmentWithImage:[UIImage imageNamed:@"Timer.png"] atIndex:1 animated:YES];
[firstNextSegmentedControl insertSegmentWithImage:[UIImage imageNamed:@"Counter.png"] atIndex:2 animated:YES];          

               //Added UITapGestureRecognizer instead of using addTarget: method        
                UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] init];         
                tapGesture addTarget:self action:@selector(firstNextThenSegmentedControlValueChanged:) ];
                [firstNextSegmentedControl addGestureRecognizer:tapGesture];
                [tapGesture release];
                tapGesture = nil;

[self.view addSubview:firstNextSegmentedControl];
[firstNextSegmentedControl release];
firstNextSegmentedControl = nil;

-(void)firstNextThenSegmentedControlValueChanged:(UITapGestureRecognizer *)tapGesture{  

   UISegmentedControl *segmentControl = (UISegmentedControl *)tapGesture.view;      

   switch (segmentControl.selectedSegmentIndex) {

    case 0:
     [self doIt:segmentControl];                
    break;  

    default:    
    break;

    }
} 
```

# android - 自 4.1 sdk 更新以来无法在 Eclipse 中创建新的 Android 项目

> ID：11297746
> 
> 赞同：0
> 
> 时间：2012-07-02T16:39:38.907
> 
> 标签：android, eclipse

自 4.1 更新以来，我刚刚安装了新的 SDK 更新（Windows）

现在，在 Eclipse 中，当我尝试创建一个新项目时，我可以按照向导完成操作，当我单击“完成”按钮时，我会在包资源管理器中看到新项目，但现在我遇到了问题：

A）向导没有关闭 B）当我单击取消关闭它时，我看到一个完全空的项目，如...没有什至没有 Eclipse 生成的 R 文件。

如何解决？我真的很想创建一个新项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:09:29.973

昨天遇到了同样的问题。不知道究竟有什么帮助，但重新启动 Eclipse 可能就是这样。此外，虽然 eclipse 没有找到任何更新，但选择“安装新软件”并选择 ADT-Plugin Server (https://dl-ssl.google.com/android/eclipse/) 会安装一些新东西，所以你可能也想试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:00:20.827

事实证明，当您创建启动器图标时，它实际上只是文本选项中的错误。

它现在起作用了，因为我选择了不同的东西。

# http-headers - 内容长度已经存在错误soapUI 4.5.1

> ID：11297747
> 
> 赞同：15
> 
> 时间：2012-07-02T16:39:39.320
> 
> 标签：http-headers, soapui

我最近开始使用soapUI 4.5.1，但我仍然不熟悉所有设置。我已经设置了一些网络请求，除了一个之外，所有请求都正常工作。我正在尝试发送 application/xml 类型的内容，但我得到：

> 由 org.apache.http.ProtocolException 引起的 org.apache.http.client.ClientProtocolException：Content-Length 标头已存在。

在 4.5.0 中，同样的请求对我来说总是很好。请求的内容是这样的：

```
POST http://exampleHost.com/exampleRequest HTTP/1.1
Accept-Encoding: gzip,deflate
Accept: text/xml
Content-Type: application/xml
Content-Length: 456
Host: exampleHost.com
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5) 
```

其次是xml。

我认为内容长度被发送了两次，但我不知道在哪里，因为我没有在任何地方设置它。SoapUI 显示`Additional HTTP Headers for this message`为`0`.

任何指针都会很棒！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-08T14:03:58.833

通过检查 Authenticate Preemptively 标志，我得到了错误消失（在 SoapUI 4.5.1 中）

首选项 -> HTTP 设置 -> 抢先验证

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T17:28:01.523

我与 SmartBear 支持人员取得了联系，该问题似乎已在最新的夜间版本中得到修复 @ [http://soapui.org/Downloads/soapui-pro-nightly-builds.html](http://soapui.org/Downloads/soapui-pro-nightly-builds.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:39:07.390

我使用正在请求用户凭据但实际上接受空白或任何其他密码的身份验证开发服务器遇到了同样的问题。因此，我将密码留空，这在soapUI 4.5.0 中运行良好，但按照您在4.5.1 中描述的方式失败了。但我发现简单地在密码中输入一些文本似乎可以解决问题。

不知道这是否与您的情况有关，但以防万一它有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T02:11:29.030

我在使用 Soap UI pro 4.5.1 版时遇到了同样的问题。

最后发现问题出在代理设置上。

**解析度：**

1.  在代理设置的排除列表中添加目标服务器已解决该问题。即使端点 url 是本地主机也是如此。
2.  首选项 --> 代理设置 ---> 排除
3.  可以通过逗号分隔值指定多个服务器

**对我的系统的研究/观察：**

1.  奇怪的是，相同的测试套件在同一办公室的其他系统上运行没有问题。必须与系统的配置方式有关。

2.  在 Internet 选项中使用代理设置无效。

3.  对于我的请求，需要代理身份验证。但是当我启用代理设置时，我得到 Http Client 协议异常，内容长度重复错误。
4.  发送请求后，我们可以从 http 日志中找到它……但是我们没有配置它的选项。
5.  一个有趣的观察是内容长度标头之一在传入请求中，另一个在传出请求中......但这不应该抛出请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T23:27:10.737

导致此错误的另一种方法是使用错误的密码（我被告知是错误的诚实）多次调用 Web 服务并锁定您的帐户。

重置密码并且帐户解锁“org.apache.http.ProtocolException 引起的 org.apache.http.client.ClientProtocolException：Content-Length 标头已经存在”异常消失并且 Web 服务调用按预期工作.

# javascript - 函数参数的 JavaScript 执行上下文

> ID：11297748
> 
> 赞同：2
> 
> 时间：2012-07-02T16:39:41.253
> 
> 标签：javascript

```
function Apple(){
    this.name="apple";
}
function Orange(){
    this.name="orange";

    this.apple = new Apple();
    this.apple.onCalled=function(){
        alert(this.name);
    }
}
Orange.prototype.onCalled=function(){
    this.apple.onCalled();
}
var orange = new Orange();
orange.onCalled(); 
```

目前代码显示“苹果”。如何修改“this.apple.onCalled=function()”行使其显示“橙色”？

即我想将函数传递给另一个对象，但是当调用该函数时，访问传递函数的对象的变量，而不是执行函数的对象的变量。一个明显的解决方案是使用全局变量（例如 orange.name），但我正在寻找更好的方法，因为有很多对象，我不想全局化所有内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T16:42:06.783

使用闭包。

```
function Orange(){
    this.name="orange";

    this.apple = new Apple();
    var that = this;
    this.apple.onCalled=function() {
        alert(that.name);
    }
} 
```

阅读关键字`this`在 JS 中的工作原理，这有点棘手但很容易掌握。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:42:03.473

你可以写：

```
Orange.prototype.onCalled=function(){
    this.apple.onCalled.call(this);
} 
```

很难给出一个普遍的答案。要理解的是，`this`它受任何函数调用的约束。这可以通过`call`or函数显式控制，或者在将函数作为对象的属性访问时`apply`由操作员控制。`.`

Kos 给出的关于使用闭包的答案也可能是相关的；这取决于你想要的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:42:12.680

```
Orange.prototype.onCalled=function(){
    this.apple.onCalled.call(this);
} 
```

示例：http: [//jsfiddle.net/XrtZe/](http://jsfiddle.net/XrtZe/)

看看：[JavaScript 中的作用域](http://www.digital-web.com/articles/scope_in_javascript/)

# python - Beautifulsoup4 与 lxml 与 Beautifulsoup3

> ID：11297749
> 
> 赞同：5
> 
> 时间：2012-07-02T16:39:41.840
> 
> 标签：python, profiling, html-parsing, beautifulsoup, lxml

我正在将一些解析器从 BeautifulSoup3 迁移到 BeautifulSoup4，我认为考虑到 lxml 速度非常快并且它是我与 BS4 一起使用的解析器，我认为分析它的速度将是一个好主意，以下是配置文件结果：

对于 BS3：

```
43208 function calls (42654 primitive calls) in 0.103 seconds

Ordered by: standard name

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
    1    0.000    0.000    0.000    0.000 <string>:2(<module>)
   18    0.000    0.000    0.000    0.000 <string>:8(__new__)
    1    0.000    0.000    0.072    0.072 <string>:9(parser)
   32    0.000    0.000    0.000    0.000 BeautifulSoup.py:1012(__init__)
    1    0.000    0.000    0.000    0.000 BeautifulSoup.py:1018(buildTagMap)
... 
```

对于使用 lxml 的 BS4：

```
164440 function calls (163947 primitive calls) in 0.244 seconds

Ordered by: standard name

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
    1    0.040    0.040    0.069    0.069 <string>:2(<module>)
   18    0.000    0.000    0.000    0.000 <string>:8(__new__)
    1    0.000    0.000    0.158    0.158 <string>:9(parser)
    1    0.000    0.000    0.008    0.008 HTMLParser.py:1(<module>)
    1    0.000    0.000    0.000    0.000 HTMLParser.py:54(HTMLParseError)
... 
```

为什么`BS4`要调用 4 倍的函数？`HTMLParser`如果我将它设置为使用，为什么它完全使用`lxml`？

我从 BS3 到 BS4 最明显的变化是：

```
 BeautifulSoup(html, convertEntities=BeautifulSoup.HTML_ENTITIES)  --->
 BeautifulSoup(html, 'lxml')

 [x.getText('**SEP**') for x in i.findChildren('font')[:2]] --->
 [x.getText('**SEP**', strip=True) for x in i.findChildren('font')[:2]] 
```

其他一切都只是一些名称更改（例如 findParent --> find_parent）

编辑：

我的环境：

```
python 2.7.3
beautifulsoup4==4.1.0
lxml==2.3.4 
```

编辑2：

这是一个小代码示例来尝试一下：

```
from cProfile import Profile

from BeautifulSoup import BeautifulSoup
from bs4 import BeautifulSoup as BS4
import urllib2

def parse(html):

    soup = BS4(html, 'lxml')
    hl = soup.find_all('span', {'class': 'mw-headline'})
    return [x.get_text(strip=True) for x in hl]

def parse3(html):

    soup = BeautifulSoup(html, convertEntities=BeautifulSoup.HTML_ENTITIES)
    hl = soup.findAll('span', {'class': 'mw-headline'})
    return [x.getText() for x in hl]

if __name__ == "__main__":
    opener = urllib2.build_opener()
    opener.addheaders = [('User-agent', 'Mozilla/5.0')]
    html = ''.join(opener.open('http://en.wikipedia.org/wiki/Price').readlines())

    profiler = Profile()
    print profiler.runcall(parse, html)
    profiler.print_stats()

    profiler2 = Profile()
    print profiler2.runcall(parse3, html)
    profiler2.print_stats() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:05:48.510

我相信主要问题是 Beautiful Soup 4 中的一个错误。我已经[提交了它](https://bugs.launchpad.net/beautifulsoup/+bug/1020268)，并将在下一个版本中发布修复程序。感谢您找到这个。

也就是说，鉴于您使用的是 lxml，我完全不知道您的个人资料为什么会提到 HTMLParser 类。

# c++ - 打开对象的实际类型的正确方法是什么？

> ID：11297752
> 
> 赞同：1
> 
> 时间：2012-07-02T16:39:57.033
> 
> 标签：c++, oop, qt, design-patterns, sax

我正在编写一个 xml 解析器，我需要将对象添加到一个类中，打开对象的实际类型。问题是，我想保留一个简单的接口 addElement(BaseClass*) 然后正确放置对象。

```
void E_TableType::addElement(Element *e)
{
    QString label = e->getName();
    if (label == "state") {
        state = qobject_cast<E_TableEvent*>(e);
    }
    else if (label == "showPaytable") {
        showPaytable = qobject_cast<E_VisibleType*>(e);
    }
    else if (label == "sessionTip") {
        sessionTip = qobject_cast<E_SessionTip*>(e);
    }
    else if (label == "logoffmedia") {
        logoffMedia = qobject_cast<E_UrlType*>(e);
    }
    else {
        this->errorMessage(e);
    }
} 
```

* * *

这是调用类，一个对象工厂。myElement 是 E_TableType 的一个实例。

```
F_TableTypeFactory::F_TableTypeFactory()
{
    this->myElement = myTable = 0;
}

void F_TableTypeFactory::start(QString qname)
{
     this->myElement = myTable = new E_TableType(qname);
}

void F_TableTypeFactory::fill(const QString& string)
{
  // don't fill complex types.
}

void F_TableTypeFactory::addChild(Element* child)
{
    myTable->addElement(child);
}

Element* F_TableTypeFactory::finish()
{
    return myElement;
}

void F_TableTypeFactory::addAttributes(const QXmlAttributes &attribs) {
    QString tName = attribs.value(QString("id"));
    myTable->setTableName(tName);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:34:11.913

您是否考虑过在这里使用多态性？如果您的每个具体类都可以实现一个通用接口，那么所有这些代码都会消失，并且将来会变得简单且易于更改。例如：

```
class Camera {
public:
    virtual void Init() = 0;
    virtual void TakeSnapshot() = 0;
}

class KodakCamera : Camera {
public:
    void Init() { /* initialize a Kodak camera */ };
    void TakeSnapshot() { std::cout << "Kodak snapshot"; }
}

class SonyCamera : Camera {
public:
    void Init() { /* initialize a Sony camera */ };
    void TakeSnapshot() { std::cout << "Sony snapshot"; }
} 
```

因此，假设我们有一个包含硬件设备的系统，在这种情况下是相机。每个设备都需要不同的逻辑来拍照，但代码必须支持带有任何支持的相机的系统，所以我们不希望 switch 语句在我们的代码中乱七八糟。所以，我们创建了一个抽象类`Camera`。

每个具体的类（即 , `SonyCamera`）`KodakCamera`实现将包含不同的头文件，链接到不同的库等，但它们都共享一个公共接口；我们只需要预先决定要创建哪一个。所以...

```
std::unique_ptr<Camera> InitCamera(CameraType type) {
    std::unique_ptr<Camera> ret;
    Camera *cam;
    switch(type) {
    case Kodak:
        cam = new KodakCamera();
        break;
    case Sony:
        cam = new SonyCamera();
        break;
    default:
        // throw an error, whatever
        return;
    }

    ret.reset(cam);
    ret->Init();
    return ret;
}

int main(...) {
    // get system camera type
    std::unique_ptr<Camera> cam = InitCamera(cameraType);
    // now we can call cam->TakeSnapshot 
    // and know that the correct version will be called.
} 
```

所以现在我们有一个具体的实例来实现`Camera`. 我们可以`TakeSnapshot`在代码中的任何地方调用而不检查正确的类型，因为这无关紧要；我们知道将调用正确硬件的正确版本。希望这有帮助。

根据您在下面的评论：

> 我一直在尝试使用多态性，但我认为元素差异太大。例如，E_SessionTip 有一个数量和状态元素，而 E_Url 只有一个 url。我可以在一个属性系统下统一它，但是我完全失去了所有漂亮的打字。如果您知道这种方法可以工作，我愿意接受建议。

我建议将编写 XML 数据的责任传递给共享公共接口的类型。例如，而不是这样的：

```
void WriteXml(Entity *entity) {
   switch(/* type of entity */) {
      // get data from entity depending
      // on its type and format
   }

   // write data to XML
} 
```

做这样的事情：

```
class SomeEntity : EntityBase {
public:
    void WriteToXml(XmlStream &stream) {
        // write xml to the data stream.
        // the entity knows how to do this,
        // you don't have to worry about what data
        // there is to be written from the outside
    }
private:
    // your internal data
}

void WriteXml(Entity *entity) {
    XmlStream str = GetStream();
    entity->WriteToXml(stream);
} 
```

那对你有用吗？我以前做过这个，它对我有用。让我知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:15:54.320

[双重派送](http://en.wikipedia.org/wiki/Double_dispatch)可能是有意义的。该表（在您的情况下）将调用基本元素的虚拟方法，该方法又调用回表中。第二次调用是使用对象的动态类型进行的，因此可以在`Table`类中找到适当的重载方法。

```
#include <iostream>

class Table;  //forward declare
class BaseElement
{
public:
   virtual void addTo(Table* t);
};
class DerivedElement1 : public BaseElement
{
   virtual void addTo(Table* t);
};
class DerivedElement2 : public BaseElement
{
   virtual void addTo(Table* t);
};
class Table
{
public:
   void addElement(BaseElement* e){ e->addTo(this); }
   void addSpecific(DerivedElement1* e){ std::cout<<"D1"; } 
   void addSpecific(DerivedElement2* e){ std::cout<<"D2"; } 
   void addSpecific(BaseElement* e){ std::cout<<"B"; } 
};
void BaseElement::addTo(Table* t){ t->addSpecific(this); }
void DerivedElement1::addTo(Table* t){ t->addSpecific(this); }
void DerivedElement2::addTo(Table* t){ t->addSpecific(this); }

int main()
{
Table t;
DerivedElement1 d1;
DerivedElement2 d2;
BaseElement b;

t.addElement(&d1);
t.addElement(&d2);
t.addElement(&b);
} 
```

[输出：D1D2B](http://ideone.com/wGs1D)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T21:08:33.440

看看访客模式，它可能会对你有所帮助

# java - 什么是最好的密钥库？

> ID：11297754
> 
> 赞同：0
> 
> 时间：2012-07-02T16:40:06.480
> 
> 标签：java, groovy

我想在我即将进行的项目中使用[Keystore 。](http://en.wikipedia.org/wiki/Keystore)我看到 Java 中有一个[Keystore API](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/KeyStore.html)。但这似乎非常复杂。

是否还有其他可以与 Java/Groovy 很好地配合使用的好的密钥库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:22:59.320

从来没听说过。从我的角度来看，API 是尽可能少地提供它需要提供的东西。

```
KeyStore keyStore = keyStore.getInstance(KeyStore.getDefaultType());
keyStore.load( inputStream, storePassword.getBytes() );

// Get a key
if ( keyStore.isKeyEntry(alias) ) {
   Key key = keyStore.getKey(alias, keyPassword.getBytes());
}

// Store a new key
KeyFactory keyFactory = KeyFactory.getInstance(KeyStore.getDefaultType());
KeySpec keySpec ...; // depends on what kind of key you want to create (ie. rsa, etc..)
Key key = keyFactory.generatePrivate(keySpec);
// sign the key here
Certificate certChain[] = ...; // get the cert chain
keyStore.setKeyEntry(newAlias, newKey, newKeyPassword.getBytes(), certChain);
keyStore.store(outputStream, storePassword.getBytes()); 
```

这是处理密钥库需要做的事情的相对最少的代码。

# c# - DataGridView 排序 - 保持两个同步

> ID：11297757
> 
> 赞同：0
> 
> 时间：2012-07-02T16:40:21.943
> 
> 标签：c#, .net, winforms, .net-3.5, datagridview

如果我在 C# Win Forms 应用程序中有两个 DataGridView 项，并且它们始终设置相同的列，我如何确保它们始终以相同的方式排序？

当一个网格或其他网格排序时，我可以收到通知，但是如果我尝试使用该通知以相同的方式对另一个网格进行排序，我会得到堆栈溢出（原因很明显）。

我确信我可以通过一些丑陋的黑客来解决堆栈溢出问题，但我认为必须有一种正常的方法来做到这一点。当用户对它们进行排序时，我不能成为第一个需要保持两个 DataGridView 同步的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:57:58.703

> 我得到一个堆栈溢出（原因很明显）。

如果没有示例代码，它们可能并不明显。您是否因为每个更新通知都会更新另一个导致无限循环的网格而导致堆栈溢出？

那你为什么不保持 bools 像这样跟踪状态：

```
bool Grid1Fired = false;
bool Grid2Fired = false;

void handler_Grid1(..)
{
    if(Grid1Fired == false && Grid2Fired == false)
    {
        Grid1Fired = true;
        SortGrids();
    }
}
void handler_Grid2(..)
{
    if(Grid1Fired == false && Grid2Fired == false)
    {
        Grid2Fired = true;
        SortGrids();
    }
}

void SortGrids()
{
    if(Grid1Fired)
    {
        // sort grid 2
    }
    else if(Grid2Fired)
    {
        // sort grid 1
    }
    Grid1Fired = false;
    Grid2Fired = false;
} 
```

# mysql - MySQL 计数子查询

> ID：11297759
> 
> 赞同：6
> 
> 时间：2012-07-02T16:40:32.010
> 
> 标签：mysql, sql, subquery, aggregate-functions

我有一个包含 3 个表的数据库：

*   股票
*   股票分割
*   股息

股票和股票分割之间以及股票和股息之间存在一对多的关系。对于每个股票，我想显示股票分割和股息的数量：

```
SELECT equities.Symbol, 
       (SELECT COUNT(*) 
          FROM stocksplits 
         WHERE stocksplits.EquityID = equities.InstrumentID) as `# Splits`,
       (SELECT COUNT(*) 
          FROM dividends 
         WHERE dividends.EquityID = equities.InstrumentID) as `# Dividends`
FROM equities 
```

该查询似乎运行良好，但我怀疑它效率低下。如何将其重构为更快？没有 DBMS（通过 .net 到 MySQL 服务器的 SQL 查询），假设索引存在于每个表的主 ID 上。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T18:01:51.400

计算 PK 而不是 * 可能已经有帮助：

```
SELECT equities.Symbol, 
           (SELECT COUNT(stocksplitsID) 
              FROM stocksplits 
             WHERE stocksplits.EquityID =     equity.InstrumentID) as `# Splits`,
           (SELECT COUNT(dividendsid) 
              FROM dividends 
             WHERE dividends.EquityID = equities.InstrumentID) as `# Dividends`
FROM equities 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:48:56.793

这是您的原始查询

```
SELECT equities.Symbol, 
       (SELECT COUNT(*) 
          FROM stocksplits 
         WHERE stocksplits.EquityID = equities.InstrumentID) as `# Splits`
FROM equities 
```

我只是在想一个`LEFT JOIN`会更干净

```
SELECT equities.Symbol,
    SUM(IF(IFNULL(stocksplits.EquityID,0)=0,0,1)) StockSplits,
    SUM(IF(IFNULL(dividends.EquityID  ,0)=0,0,1)) Dividends
FROM
    equities
    LEFT JOIN stocksplits ON equities.InstrumentID = stocksplits.EquityID
    LEFT JOIN dividends   ON equities.InstrumentID = dividends.EquityID
GROUP BY equities.Symbol; 
```

IFNULL 涵盖任何没有股票分割的股票

试一试，看看它跑得更快

让我解释一下表达式`SUM(IF(IFNULL(stocksplits.EquityID,0)=0,0,1))`

*   如果 LEFT JOIN 在右侧表中没有对应的条目，IFNULL 会将 NULL 变为 0。
*   如果 LEFT JOIN 有一个右侧条目，则 IF 函数返回 1
*   如果 LEFT JOIN 没有右侧条目，IF 函数返回 0
*   SUM 将所有的 1 和 0 相加，模拟 COUNT

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T05:01:14.417

根据我的经验，MySQL 的`correlated subquery`性能很差。

**Q1 - 加入**

```
SELECT t1.Symbol, t1.cnt_splits, t2.cnt_dividends
FROM (
    SELECT equities.Symbol AS Symbol, COUNT(*) AS cnt_splits
    FROM equities LEFT JOIN stocksplits
        ON stocksplits.EquityID = equities.InstrumentID
    GROUP BY equities.Symbol
) t1,
(
    SELECT equities.Symbol AS Symbol, COUNT(*) AS cnt_dividends
    FROM equities LEFT JOIN dividends
        dividends.EquityID = equities.InstrumentID
    GROUP BY equities.Symbol
) t2 ON t1.Symbol = t2.Symbol; 
```

**Q2 - 联合**

`Q1`没有`correlate subquery`并且产生与您相同的结果。但是需要额外的连接，这需要时间。以下`UNION`模式更快，但输出应在客户端转换。

```
SELECT equities.Symbol AS Symbol, COUNT(*) AS cnt_splits
FROM equities LEFT JOIN stocksplits
    ON stocksplits.EquityID = equities.InstrumentID
GROUP BY equities.Symbol

UNION

SELECT equities.Symbol AS Symbol, COUNT(*) AS cnt_dividends
FROM equities LEFT JOIN dividends
    dividends.EquityID = equities.InstrumentID
GROUP BY equities.Symbol 
```

# html - 按钮标签内的 ActionLink 在 Firefox 中不起作用

> ID：11297762
> 
> 赞同：0
> 
> 时间：2012-07-02T16:40:42.580
> 
> 标签：html, asp.net-mvc-3, firefox

此代码在 Chrome 中运行良好，但在 Firefox 中无法运行。如果`<button>`标签被删除，它将在 Firefox 中工作。

我可以做些什么来使这项工作在 Firefox 中发挥作用吗？

```
<button>
     @Html.ActionLink("Continue","Index","AlternateName")
</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:52:59.100

哦不，`<a>`里面无效`<button>`。根据 HTML 规范，这是无效的标记。而且，当您编写损坏的标记时，您得到的只是未定义的行为，此外，用户代理之间的行为可能会有所不同，顺便说一句，这就是您所观察到的。

因此，要完成这项工作，只需修复您的标记。您不能期望浏览器正确解释无效的内容，除非您当然编写自己的浏览器。

我不知道您的情况是什么，但我想您将不得不从此按钮中删除锚点。如果您无法控制生成的标记（例如，因为您正在使用一些吐出此无效标记的第三方组件）作为最后的手段，您可以使用 javascript/jquery 在创建 DOM 以移动锚点后对其进行操作离开这个按钮，这样你就不会遇到如此破碎的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:50:17.403

我没有将动作链接包装在按钮标签中并在样式表中格式化按钮标签，而是像这样向 actionLink 添加了一个 css 类。

@Html.ActionLink("添加地址", "创建", "地址", null, new { @class = "actionLinkBut​​ton" })

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-22T13:46:24.217

在mvc中的Hyperlink标签内添加Button，编写Controller和action方法

用于传递任何参数：

# android - 如何通过覆盖 BackButton 使我的 PhoneGap android 应用程序 onPause？

> ID：11297763
> 
> 赞同：1
> 
> 时间：2012-07-02T16:40:43.350
> 
> 标签：android, plugins, cordova, onpause, localnotification

我正在尝试使用 phonegap 和 LocalNotification 插件开发一个 android 应用程序。我想在我的 index.html 上的 onPause 中运行我的应用程序

```
document.addEventListener("pause", onPause, false); 
```

function onPause() { // 处理暂停事件

```
setInterval( function() {
    Ext.data.JsonP.request({
            url: 'http://convert4mobile.net/backend/API/qr/push.php',
            callbackKey: 'callback',
            success: function(data)
            {

                if(data.success == true)
                {
                    if (typeof plugins !== "undefined") {
              window.plugins.localNotification.add({
                        date : new Date(),
                        message : data.time+"\r\n"+data.msg,
                        ticker : "A new code was generated",
                        repeatDaily : false,
                        id : 4
                });
                }
                }
            }
           });
} , 2000); 
```

}

当应用程序被主页按钮/结束通话按钮关闭/最小化时，它工作正常。我想通过点击 BackButton 来做同样的事情。任何想法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:53:42.850

在此方法中输入您想要的任何代码：

```
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
} 
```

教程在这里：[http ://chrisrisner.com/31-Days-of-Android--Day-10%E2%80%93The-Back-Button](http://chrisrisner.com/31-Days-of-Android--Day-10%E2%80%93The-Back-Button)

# javascript - JQuery 对象似乎没有在模块中分配值

> ID：11297768
> 
> 赞同：-1
> 
> 时间：2012-07-02T16:41:16.407
> 
> 标签：javascript, jquery, jquery-mobile

```
 var Foo = Foo || {};

Foo.Controller = (function ($) {
    var $page = $("#bar");
    var init = function () {
            console.log($page); // outputs: []
            console.log($.isEmptyObject($page)); // outputs: false
        }
    var public = {
        init: init
    }
    return public;
})(jQuery);
$("#FooPage").bind("pageinit", function () {
    Foo.Controller.init();
}); 
```

为什么 $page 似乎没有被赋予它的价值？我正在使用 JQuery Mobile 并且 pageinit 是文档准备好的移动设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:48:12.270

`$page`未分配`pageinit`，立即分配。尝试这个：

```
var init = function () {
    console.log($page); // outputs: []
    console.log($('#bar'); // TELL US IF THIS LOGS THE RIGHT THING!
    console.log($.isEmptyObject($page)); // outputs: false
}; 
```

**编辑（Esailija 指出了另一个问题）：**

Esailija 的眼睛比我好得多。`Foo.Controller`被设置为[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)的结果。由于该函数不返回任何内容，因此将其设置为`undefined`. 也许您想返回一个具有您的`init`功能的对象？`$page`在这种情况下，您可以通过设置inside of来避免整个问题`init`。

```
var Foo = Foo || {};

Foo.Controller = (function($) {
    var init = function () {
        var $page = $("#bar");
        console.log($page); // outputs: []  <-- not anymore (if #bar is really on the page)
        console.log($.isEmptyObject($page)); // outputs: false
    };
    return {init:init};
})(jQuery);
$("#FooPage").bind("pageinit", function () {
    Foo.Controller.init();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:48:15.563

即使您推迟了对 的调用*，*在页面加载之前`.init`（应该是）创建函数的立即调用的函数表达式也会`init`定义。`var $page = $("#bar");`

# zend-framework - Zend Framework setHttpResponseCode 没有修改响应头

> ID：11297770
> 
> 赞同：1
> 
> 时间：2012-07-02T16:41:30.997
> 
> 标签：zend-framework, header

我正在使用zend框架ErrorController，但是由于某种原因，当发生应用程序错误时，setHttpResponseCode应该将其设置为500，但是当我

> 回声 get_headers("my_url")

，我还在

> 数组（[0] => HTTP/1.1 200）

知道如何将标头修改为标头（'HTTP/1.1 403 Forbidden'）；当我在 get_headers() 之前写下这一行时，我仍然得到相同的 200 个标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:15:47.353

我认为您需要在 settHttpResponseCode() 之后调用 sendHeaders()。

这是来自 ZF 中的 doc 块：

```
/**
 * Send all headers
 *
 * Sends any headers specified. If an {@link setHttpResponseCode() HTTP response code}
 * has been specified, it is sent with the first header.
 *
 * @return Zend_Controller_Response_Abstract
 */
public function sendHeaders() 
```

# python - a[:]=b 和 a=b[:] 有什么区别

> ID：11297774
> 
> 赞同：12
> 
> 时间：2012-07-02T16:41:55.190
> 
> 标签：python, list, slice

```
a=[1,2,3]
b=[4,5,6]
c=[]
d=[] 
```

这两种说法有什么区别？

```
c[:]=a
d=b[:] 
```

但两者都给出了相同的结果。

c 是 [1,2,3]，d 是 [4,5,6]

并且在功能方面有什么不同吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-02T16:43:50.970

`c[:] = a`这意味着用 a 的元素替换 c 的所有元素

```
>>> l = [1,2,3,4,5]
>>> l[::2] = [0, 0, 0] #you can also replace only particular elements using this 
>>> l
[0, 2, 0, 4, 0]

>>> k = [1,2,3,4,5]
>>> g = ['a','b','c','d']
>>> g[:2] = k[:2] # only replace first 2 elements
>>> g
[1, 2, 'c', 'd']

>>> a = [[1,2,3],[4,5,6],[7,8,9]]
>>> c[:] = a      #creates a shallow copy
>>> a[0].append('foo') #changing a mutable object inside a changes it in c too
>>> a
[[1, 2, 3, 'foo'], [4, 5, 6], [7, 8, 9]]
>>> c
[[1, 2, 3, 'foo'], [4, 5, 6], [7, 8, 9]] 
```

`d = b[:]`表示创建 b 的**浅表副本**并将其分配给 d ，它类似于`d = list(b)`

```
>>> l = [1,2,3,4,5]
>>> m = [1,2,3]
>>> l = m[::-1] 
>>> l
[3,2,1]

>>> l = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
>>> m = l[:] #creates a shallow copy 
>>> l[0].pop(1) # a mutable object inside l is changed, it affects both l and m
2
>>> l
[[1, 3], [4, 5, 6], [7, 8, 9]]
>>> m
[[1, 3], [4, 5, 6], [7, 8, 9]] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T16:50:20.537

阿什维尼说的。:) 我会详细说明一下：

```
In [1]: a=[1,2,3]

In [2]: b = a

In [3]: c = a[:]

In [4]: b, c
Out[4]: ([1, 2, 3], [1, 2, 3])

In [5]: a is b, a is c
Out[5]: (True, False) 
```

另一种方式：

```
In [1]: a = [1,2,3]

In [2]: aold = a

In [3]: a[:] = [4,5,6]

In [4]: a, aold
Out[4]: ([4, 5, 6], [4, 5, 6])

In [5]: a = [7,8,9]

In [6]: a, aold
Out[6]: ([7, 8, 9], [4, 5, 6]) 
```

走着瞧吧？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T16:43:30.790

没有太大区别。 更新引用 `c[:]=a`的列表。创建一个新列表，它是 b 的副本（忘记您在第 4 行创建的旧列表）。在大多数应用程序中，除非您有其他对数组的引用，否则您不太可能看到差异。当然，对于该版本，您必须已经有一个列表。`c``d=b[:]``c[:]=...``c`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T17:01:30.483

[Ashwini 的回答](https://stackoverflow.com/a/11297805/505154)准确地描述了正在发生的事情，以下是两种方法之间差异的一些示例：

```
a=[1,2,3]
b=[4,5,6]
c=[]
c2=c
d=[]
d2=d

c[:]=a                            # replace all the elements of c by elements of a
assert c2 is c                    # c and c2 should still be the same list
c2.append(4)                      # modifying c2 will also modify c
assert c == c2 == [1,2,3,4]
assert c is not a                 # c and a are not the same list

d=b[:]                            # create a copy of b and assign it to d
assert d2 is not d                # d and d2 are no longer the same list
assert d == [4,5,6] and d2 == []  # d2 is still an empty list
assert d is not b                 # d and b are not the same list 
```

# wpf - “幽灵”ContentControl 抢焦点

> ID：11297778
> 
> 赞同：2
> 
> 时间：2012-07-02T16:42:03.927
> 
> 标签：wpf, focus, webbrowser-control

我有一个使用模板选择器的选项卡式控件，选择了包含 WebBrowser 组件的正确模板，当使用键盘（向上/向下箭头）时，KeyBoardFocus 在应用程序的其余部分和网页之间切换。

使用 snoop，我可以通过将包含 ContentControl 的 Focusable 属性设置为 false 来获得 WebBrowser 控件的行为，但是我无法弄清楚在哪里/如何以编程方式设置 ContentControl 属性！

来自 snoop 的片段：

```
    PART_SelectedContentHost 来自主题（Focusable == False）
    ContentControl (Focusable == **True**) [这从何而来？它的“内容”是一个 ViewModel]
    ContentPresenter (Focusable == False) [这是从哪里来的？]
    WebPageView（我创建的组件，Focusable == False）
    ...（可聚焦 == 错误）
    wbContent（可聚焦 == True）

```

我尝试在 PART_SelectedContentHost 的 ContentPresenter 中使用目标样式资源，但没有成功。

有人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:28:52.570

尝试从选项卡控件派生。重写 OnApplyTemplate 方法并按名称查找内容控件。一旦发现改变它的属性。

# wordpress - WordPress

> ID：11297780
> 
> 赞同：0
> 
> 时间：2012-07-02T16:42:08.180
> 
> 标签：wordpress, tags

`<!..more..>`我用来做起点和终点的标签可以吗，如下所示

```
<h2>Post Details</h2>

<!--more Just the text in here to appear on the home page nothing else above or below. more!--> 
```

我想要的只是出现在主页上的小文本，但是以传统方式使用标签，如下所示意味着标题“帖子详细信息”也出现在主页上

```
<div class="page-header">
    <h2>Details</h2>
</div>
This is small text that should appear on the home page without showing the header

<!..more--> 
```

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:58:49.153

找到解决方案。它只是简单地使用`the_excerpt();`which 忽略除标题等文本之外的所有内容

# jquery - Jquery选择多个事件

> ID：11297785
> 
> 赞同：0
> 
> 时间：2012-07-02T16:42:16.680
> 
> 标签：jquery, focus, selector, blur

```
$('.searchbox').blur(function() {
   $("#gohan").hide();
});
$('.dropdown').blur(function() {
   $("#gohan").hide();
}); 
```

嗨，我有一个搜索框，当我输入字母时，会出现一个下拉列表（id=gohan），其中包含一个带有许多 li “搜索结果”的 ul。我希望下拉菜单在下拉菜单或搜索框上的焦点消失时消失，即他们点击不在搜索框/ul/li 中的内容。这两个事件处理程序分别工作正常，但我不知道如何让它们一起工作。我试着把它们串在一起

```
$('.dropdown, .searchbox').blur(function() { 
```

但这导致了灾难性的失败。关于解决此问题的条件/选择器的任何想法？我还尝试将下拉列表和搜索框封装到一个包含它们并选择大容器的 div 中，但这也不起作用。如果搜索框没有失焦，则必须再次检查下拉菜单是否也没有失焦。只有这样，如果两者都不是焦点，请隐藏。这是正确的逻辑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:48:36.023

`#gohan`如果您只是查看 document.body 的点击和焦点，然后检查触发事件的目标，那么隐藏您的会更容易。本质上，如果用户单击或关注不在您的“小部件”或“小部件元素”集内的内容，您将隐藏您的控件并让用户继续做他们正在做的事情。

```
var handler = function(e){
    var isMyWidget = $(e.target).hasClass('searchbox') || $(e.target).hasClass('dropdown');
    if(!isMyWidget ){
        $('#gohan').hide();
    }
}

$(document.body).click(handler).focus(handler); 
```

根据您的 DOM 和您正在观看的元素，您可能还可以检查搜索框/下拉列表的祖先，并检查目标元素是否具有特定的祖先。

例子：

```
var isMyWidget = $(e.target).closest('.widgetContainer').length > 0; 
```

这将使得如果您的小部件演变为包含其他控件，使用这些新控件将不会隐藏小部件（只要它们在同一个祖先中，即某个父 div）。

# c# - 列表 显示列表值

> ID：11297786
> 
> 赞同：2
> 
> 时间：2012-07-02T16:42:16.760
> 
> 标签：c#, winforms

我有生成`List<string[]>`变量的代码，但无法弄清楚如何让它正确显示在文本框中。

```
List<string[]> test = parseCSV();
for (int i = 0;  i < test.Count; i++)
{
  Console.WriteLine("i = {0}",i);
  Console.WriteLine("test[i] = {0}", test[i]);
  nameList.Text = test[i].ToString() + "\n" + nameList.Text;
} 
```

当我输出`test[i]`到控制台时，它会正确显示字符串信息，但是当我输出`test[i]`到文本框时，我得到：

```
System.String[]
System.String[]
System.String[]
System.String[]
System.String[]
System.String[] 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:44:18.637

这是一种常见的误解，`ToString`它出现在[各种情况下](https://stackoverflow.com/questions/3483745/odd-method-behavior-tostring-of-a-function)。它不是一个神奇的格式化向导，即使原始类型看起来“如您所愿”。ToString 只是提供手头数据的合理表示。

在数组数据的情况下，.Net 为每个 ToString 调用（调试器大量使用）输出整个数组是令人讨厌的并且可能不正确。想象一个 60x60x10 的 3D 字符串数组。我不想仅仅因为我将鼠标放在调试器中的一个数组上而不得不等待它被渲染。

在这种情况下，您可以使用[`String.Join`](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)：

```
for (int i = 0;  i < test.Count; i++)
{
    Console.WriteLine("i = {0}",i);
    Console.WriteLine("test[i] = {0}", test[i]);
    nameList.Text = String.Join(", ", test[i]) + "\n" + nameList.Text;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T16:44:29.083

`test[i]`是一个字符串数组。数组不会覆盖`ToString()`，因此您只是获得了默认实现，它显示了对象的类型（`System.String[]`在这种情况下）。

目前还不清楚你*想*用它做什么。例如，您可以使用：

```
Console.WriteLine("test[i] = {0}", string.Join(", ", test[i])); 
```

...从数组中的所有字符串创建一个逗号分隔的字符串。

编辑：请注意：

```
Console.WriteLine("test[i] = {0}", test[i]); 
```

实际上是从每个字符串数组中打印出*第一个字符串。*它使用数组协方差`string[]`将`object[]`. 为了更清楚地执行相同的操作，您可以使用：

```
Console.WriteLine("test[i] = {0}", test[i][0]); 
```

因此，如果您*只想*将每个数组中的第一个值放入文本框中，您可以使用：

```
nameList.Text = test[i][0] + "\r\n" + nameList.Text; 
```

（请注意，这将有效地颠倒“行”的顺序。）我已更改`\n`为，`\r\n`因为这就是 Windows 上用于换行的文本框。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:45:14.720

您正在列表中存储字符串数组。正确的代码是：

```
foreach (string[] items in test)
   foreach (string item in items)
   {
       ...
   } 
```

这将遍历列表中的所有数组，然后遍历当前数组中的所有项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T16:47:33.627

你在 test[i] 上使用 ToString() 方法。ToString() 请像这样使用它 test[i]

对于您的知识， Object.ToString() 返回代表当前对象的字符串。

因此你得到

```
System.String[]
System.String[]
System.String[]
System.String[]
System.String[]
System.String[] 
```

# sql-server - TSQL 中视图的性能

> ID：11297787
> 
> 赞同：2
> 
> 时间：2012-07-02T16:42:25.893
> 
> 标签：sql-server, views

SQL Server 如何处理视图更新。我担心性能，并想了解视图如何以及何时更改的概述。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:51:35.767

[非物化] 视图只是一个存储查询，当您在查询中使用视图名称时会运行该查询。

[非物化] 视图的性能来自缓存的查询，因为视图的基础查询不会改变。一旦视图查询被更改，第一次将比后续的时间长一点，因为查询缓存中没有任何内容。

您可以使用[sp_refreshview](http://msdn.microsoft.com/en-us/library/ms187821.aspx)，但我是否经历过锁定（即使在 READUNCOMMITTED 事务中）。

具体化（TSQL/SQL Server 中的“索引”）视图是另一回事。

# css-float - css 四列左浮动布局，左右边距相等

> ID：11297790
> 
> 赞同：0
> 
> 时间：2012-07-02T16:42:29.383
> 
> 标签：css-float, margins, multiple-columns

我有一个四列的左浮动布局。我希望左右边距的边距相等。我将四列浮动到左侧，并在每个浮动上分配了 20px 的右边距。全宽列 div 看起来正确，但边距和列在不同宽度的列上显示不正确。我已经复习了几次数学，我的眼睛在燃烧，试图弄清楚我做错了什么。

关于执行此操作的最佳方法或如何执行此操作的任何建议？我可以为总共五列创建一个 20 像素宽的第一列，或者使用表格。但我一直在寻找一种更优雅的方式来做到这一点，但也许这是不可能的。我也必须支持IE7。谢谢。

[此处的代码 - 4 列边距不正确](http://jsfiddle.net/Chris22/w3YRF/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:07:34.393

我猜你的 CSS 的问题是你没有考虑到填充。

为了更优雅地做到这一点，您应该以相等的边距居中所有块。

我检查了您的代码并对其进行了一些修改:)

[http://jsfiddle.net/w3YRF/5/](http://jsfiddle.net/w3YRF/5/)

无论如何，我建议您使用 Grid960 (http://960.gs/) 之类的网格系统，它会在您的路上助您一臂之力！

干杯!

# c++ - 为什么以这种方式删除二维数组会失败（C++）？

> ID：11297795
> 
> 赞同：1
> 
> 时间：2012-07-02T16:43:02.350
> 
> 标签：c++

在下面的代码中，我尝试用 c++ 构建一个二维数组，但是当我运行这个程序时它失败了。

```
#include <iostream>
#include <vector>
using namespace std;

int obtain_options(  char ** optionLine)
{
   vector< char*> options;
   options.push_back("abc");
   options.push_back("def");

   std::copy(options.begin(), options.end(), const_cast< char**>(optionLine));

   return options.size();
}

int main(int ac, char* av[])
{
    char** optionLine;
    int len;
    optionLine = new char* [2];
    for (int i= 0; i<2; i++)
    {
       optionLine[i] = new char [200];
    }
     obtain_options(optionLine);
    for (int i=0; i<2; i++)
    {
        cout<<optionLine[i]<<endl;
     }

    for (int i=0; i<2; i++)
        delete  [] (optionLine[i]);
    delete []optionLine;

   return 0;

} 
```

我了解在函数 gain_options() 中为 optionLine 分配内存存在一些问题，如果我以这种方式更改 gain_options()，它将起作用：

```
int obtain_options(  char ** optionLine)
{
    vector< char*> options;
    char *t1 = new char [100];
    t1[0] = 'a';
    t1[1] = 'b';
    t1[2] = 'c';
    t1[3] = '/0';
   options.push_back(t1);
    char *t2 = new char [100];
    t2[0] = 'd';
    t2[1] = 'e';
    t2[2] = 'f';
    t2[3] = '/0';
   options.push_back(t2);

   std::copy(options.begin(), options.end(), const_cast< char**>(optionLine));

   return options.size();
} 
```

我的问题是，如果我不更改 get_options()，我怎么能以正确的方式删除 2D 数组 optionLine。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:53:09.520

您的向量包含一组字符指针。但是，这些字符串指向的实际内存并不像您期望的那样连续。所以，这个调用不会像你期望的那样工作。

```
std::copy(options.begin(), options.end(), const_cast< char**>(optionLine)); 
```

在最坏的情况下，您可以这样做，这就是您现在几乎要自己做的事情。

```
for (int i= 0; i<2; i++)
{
     strcpy(optionLine[i],options[i]);
} 
```

但是除非您正在学习指针和分配，否则请避免所有这些内存处理。

看看你可以在 C++ 中编写这样的代码多么简洁：

```
int obtain_options( vector<string>& anOptions_out)
{
    anOptions_out.push_back("abc");
    anOptions_out.push_back("def");

    return anOptions_out.size();
}

int main(int ac, char* av[])
{
    vector<string> anOptions;
    obtain_options( anOptions );
    for (int i=0; i<anOptions.size(); i++)
    {
        cout<< anOptions[i].c_str() <<endl;
    }

    return 0;
} 
```

没有自己的分配/解除分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:49:30.017

~~您发布的代码不会调用`obtain_options`. 但是，我注意到在该函数中，您将字符指针从本地对象 ( `options`) 复制到参数指向的数组`optionLine`。这将是一个问题，因为一旦您从`obtain_options`.~~

正如其他人指出的那样，以上是对问题的误诊。

我现在看到您的代码在调用后执行此操作`obtain_options`：

```
for (int i=0; i<2; i++)
    delete  [] (optionLine[i]); 
```

这意味着它`delete`在指向`"abc"`and的静态指针上调用运算符`"def"`。

抛开“政治正确”不谈，我认为我最初的建议仍然有效：

尝试替换`char*`为`std::string`，并替换`char**`为`vector<std::string>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T17:14:24.970

由于这里的大多数人都关心为您所感知的问题提供政治上正确的解决方案，而不是回答问题，因此这是我的贡献：

您没有将字符串的内容复制到手动分配的向量中，而是将分配的指针替换为内部的指针`vector< char*> options;`

当你这样做时：

```
char *a = "abc"; 
```

虽然在技术上使用更正确`const char`，但据说`a`将保存指向静态分配的 C 字符串的指针`"abc"`（即常量）。当你这样做时：

```
options.push_back("abc"); 
```

你把这个指针放在里面`vector`，当你这样做时：

```
std::copy(options.begin(), options.end(), const_cast< char**>(optionLine)); 
```

您只需将原始指针替换为 in`optionsLine`中的指针即可`options`。与 Dan Breslau 所说的相反，从函数中返回这些指针不会有问题，因为它们是静态的，即在整个程序期间都存在。在使用原始`obatin_options`功能时，您可以简单地将其作为主要功能：

```
int main(int ac, char* av[])
{
   char** optionLine;
   int len;
   optionLine = new char* [2];
   obtain_options(optionLine)
   for (int i=0; i<2; i++)
     {
       cout<<optionLine[i]<<endl;
     }

   delete []optionLine;

   return 0;
} 
```

请注意，我没有分配 optionLine 的内容，因为它会在里面丢失`obtain_options()`，也是`obtain_options()`一个非常不安全的函数，因为无法确保内容适合提供的数组。`size`使用提供的数组的大小传递另一个参数会更安全`optionLine`，那么您不能复制超出其限制。

```
int obtain_options(  char ** optionLine, int size)
{
   vector< char*> options;
   options.push_back("abc");
   options.push_back("def");

   if(size > options.size())
      size = options.size();
   std::copy(options.begin(), options.begin() + size, const_cast< char**>(optionLine));

   return size;
} 
```

或者，您应该使用 PermanentGuest 提供的更安全的解决方案。

# codemirror - 空闲时使用 40% cpu 的代码镜像

> ID：11297798
> 
> 赞同：0
> 
> 时间：2012-07-02T16:43:30.393
> 
> 标签：codemirror

初步猜测为什么页面空闲时 cpu 为 40%？

![在此处输入图像描述](../Images/968aea2229259d1675c17fc292324103.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:51:46.853

如果我在 Chrome 中打开[http://codemirror.net/mode/xml](http://codemirror.net/mode/xml)并查看任务管理器，我发现它占用了 0% 的 CPU。因此，这很可能与您正在使用的扩展程序（绿色/黄色的装订线边框看起来不熟悉）或页面上的某些其他元素有关。

# java - 格式化的 Pdf word 到 html

> ID：11297800
> 
> 赞同：0
> 
> 时间：2012-07-02T16:43:31.190
> 
> 标签：java, php, html, pdf, ms-word

我需要将格式化的 pdf 和 word 文档转换为 html。此转换用于将文档显示到 Web 浏览器中。进入网络浏览器，您还可以选择文本。我不知道在后端（例如使用 Java）或使用 php 是否更好，或者有一个 jquery/javascript 插件？

我的目标是在 iPaper 等网络浏览器中显示这些文档。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:59:17.927

您可以使用[pdftohtml](http://pdftohtml.sourceforge.net/)并自动在服务器端运行它，或者用它批处理您的 pdf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-28T17:55:44.200

这是我正在改进的 PowerShell 解决方案：

[https://github.com/suzumakes/ReplaceIT](https://github.com/suzumakes/ReplaceIT)

如果您遇到的问题是 Word 吐出大量垃圾并声称它是一个 HMTL 文件，那么这应该会有很大帮助。iPaper 拥有如此庞大的团队是有原因的，那是因为您希望从文档中构建网页，通过单击按钮打印到网络，结果证明这非常困难。

# jquery-ui - Jquery 对话框打开/关闭

> ID：11297802
> 
> 赞同：2
> 
> 时间：2012-07-02T16:43:42.110
> 
> 标签：jquery-ui, modal-dialog, jquery-ui-dialog

我正在尝试在 jquery 中创建一个模型对话框。我想让我的按钮打开对话框。目前，一旦打开它，它也会关闭它。我从来没有告诉它关闭它，但是当我单击按钮时它会打开然后立即关闭。知道为什么吗？

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>

<body>
<form id="form1" runat="server">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.8.21/jquery-ui.min.js" type="text/javascript"></script>
<script src="http://jquery-ui. googlecode.com/svn/tags/latest/external/jquery. bgiframe-2.1.2.js" type="text/javascript"></script>
<script src="http://jquery-ui. googlecode.com/svn/tags/latest/ui/minified/i18n/jquery-ui-i18n.min.js" type="text/javascript"></script>

<asp:Button ID="rejctbutton" runat="server" Text="Reject" />
<div id="rejectiondiv">
<h3>
Reason of Rejection for Insurance Claim
</h3>
<h4>
This will email the borrower the reason for the rejection.
</h4>
<asp:Label ID="rejectLabel" runat="server" Text="Reason"></asp:Label>
<asp:TextBox ID="rejectTB" runat="server"></asp:TextBox>
</div>

<script type="text/javascript">
$("#rejectiondiv").dialog({ autoOpen: false, modal: true })
$("#rejctbutton")
.button()
.click(function () {
$("#rejectiondiv").dialog("open");

});
</script>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:57:37.500

将您的 javascript 放在您的`<head>`标签中，并将您的对话框`<div>`放在`<form>`. 工作示例：http: [//jsfiddle.net/T4gz3/](http://jsfiddle.net/T4gz3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:53:40.223

试试 $('#rejectiondiv').dialog('open');

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T09:23:10.600

```
$("#rejctbutton")
.button()
.click(function () {
$("#rejectiondiv").dialog("open");
return false;
}); 
```

也许这会有所帮助。我在另一个回复中找到了这个解决方案：

[模态关闭问题](https://stackoverflow.com/questions/14466999/why-does-my-jquery-ui-modal-dialog-disappear-immediately-after-it-opens)

# objective-c - 斯堪的纳维亚字符 æ、ø、å 转义不正确

> ID：11297804
> 
> 赞同：0
> 
> 时间：2012-07-02T16:43:45.680
> 
> 标签：objective-c, macos, utf8-decode

我的程序与其他国家的服务器交互，并且经常需要处理包含外来字符的 URL。在我们考虑斯堪的纳维亚字符（例如`æ`,`ø`和`å`. 当我收到一个 URL 时，我将其解码如下：

```
-(NSString*)urlDECODE:(NSString*)string
{
    NSString*   s = [string stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    return (s)?s:string;
} 
```

但是，这无法正确解码这些字符：

```
filename: æøåa.rtf
input: %C3%83%C2%A6%C3%83%C2%B8a%C3%8C%C2%8Aa.rtf
output: Ã¦Ã¸aÌa.rtf 
```

编辑：这是编码功能：

```
NSString * URLEncode(NSString * url)
{
    NSString* out = nil;
    @try
    {
        NSLog(@"BEFORE=%@",url);
        out = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        NSLog(@"AFTER=%@",out);
    }
    @catch (NSException * e)
    {
        NSLog(@"Encoding error: %@", e);
    }

return out;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:36:06.387

您的原始 URL 似乎已错误地以 UTF-8 编码。

```
"Ã¦Ã¸aÌŠa.rtf" == "\xc3\xa6\xc3\xb8a\xcc\x8aa.rtf"
               == "æ"      "ø"    "a\u030a" "a.rtf"  // in UTF-8
               == "æøåa.rtf" 
```

请检查传递给 URLEncode() 的构造 NSString。您显示的其他代码是正确的（除了在 Objective-C 中很少处理异常）。

# java - 如何将 XML 文件展平为一组 xpath 表达式？

> ID：11297807
> 
> 赞同：5
> 
> 时间：2012-07-02T16:43:57.787
> 
> 标签：java, xml, xpath

考虑我有以下示例 XML 文件：

```
<ns1:create xmlns:ns1='http://predic8.com/wsdl/material/ArticleService/1/'>
   <article xmlns:ns1='http://predic8.com/material/1/'>
      <name xmlns:ns1='http://predic8.com/material/1/'>foo</name>
      <description xmlns:ns1='http://predic8.com/material/1/'>bar</description>
      <price xmlns:ns1='http://predic8.com/common/1/'>
         <amount xmlns:ns1='http://predic8.com/common/1/'>00.00</amount>
         <currency xmlns:ns1='http://predic8.com/common/1/'>USD</currency>
      </price>
      <id xmlns:ns1='http://predic8.com/material/1/'>1</id>
   </article>
</ns1:create> 
```

将其展平为一组 xpath 表达式的最佳（最有效）方法是什么。另请注意：我想忽略任何命名空间和属性信息。（如果需要，这也可以作为预处理步骤来完成）。

所以我想得到输出：

```
/create/article/name
/create/article/description
/create/article/price/amount
/create/article/price/currency
/create/article/id 
```

我正在用Java实现。

**编辑：** PS，在文本节点没有数据的情况下，我可能还需要它来工作，因此例如，以下应该生成与上面相同的输出：

```
<ns1:create xmlns:ns1='http://predic8.com/wsdl/material/ArticleService/1/'>
  <article xmlns:ns1='http://predic8.com/material/1/'>
    <name />
    <description />
    <price xmlns:ns1='http://predic8.com/common/1/'>
      <amount />
      <currency xmlns:ns1='http://predic8.com/common/1/'></currency>
    </price>
    <id xmlns:ns1='http://predic8.com/material/1/'></id>
  </article>
</ns1:create> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T20:46:20.413

使用 XSLT 可以很容易地做到这一点。查看您的示例，您似乎只想要包含文本的元素的 XPath。如果不是这样，请告诉我，我可以更新 XSLT。

我创建了一个新的输入示例来展示它如何处理同名的兄弟姐妹。在这种情况下，`<article>`。

**XML 输入**

```
<ns1:create xmlns:ns1='http://predic8.com/wsdl/material/ArticleService/1/'>
    <article xmlns:ns1='http://predic8.com/material/1/'>
        <name xmlns:ns1='http://predic8.com/material/1/'>foo</name>
        <description xmlns:ns1='http://predic8.com/material/1/'>bar</description>
        <price xmlns:ns1='http://predic8.com/common/1/'>
            <amount xmlns:ns1='http://predic8.com/common/1/'>00.00</amount>
            <currency xmlns:ns1='http://predic8.com/common/1/'>USD</currency>
        </price>
        <id xmlns:ns1='http://predic8.com/material/1/'>1</id>
    </article>
    <article xmlns:ns1='http://predic8.com/material/2/'>
        <name xmlns:ns1='http://predic8.com/material/2/'>some name</name>
        <description xmlns:ns1='http://predic8.com/material/2/'>some description</description>
        <price xmlns:ns1='http://predic8.com/common/2/'>
            <amount xmlns:ns1='http://predic8.com/common/2/'>00.01</amount>
            <currency xmlns:ns1='http://predic8.com/common/2/'>USD</currency>
        </price>
        <id xmlns:ns1='http://predic8.com/material/2/'>2</id>
    </article>
</ns1:create> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="text()"/>

    <xsl:template match="*[text()]">
        <xsl:call-template name="genPath"/>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:template>

    <xsl:template name="genPath">
        <xsl:param name="prevPath"/>
        <xsl:variable name="currPath" select="concat('/',local-name(),'[',
        count(preceding-sibling::*[name() = name(current())])+1,']',$prevPath)"/>
        <xsl:for-each select="parent::*">
            <xsl:call-template name="genPath">
                <xsl:with-param name="prevPath" select="$currPath"/>
            </xsl:call-template>
        </xsl:for-each>
        <xsl:if test="not(parent::*)">
            <xsl:value-of select="$currPath"/>
            <xsl:text>&#xA;</xsl:text>
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
/create[1]/article[1]/name[1]
/create[1]/article[1]/description[1]
/create[1]/article[1]/price[1]/amount[1]
/create[1]/article[1]/price[1]/currency[1]
/create[1]/article[1]/id[1]
/create[1]/article[2]/name[1]
/create[1]/article[2]/description[1]
/create[1]/article[2]/price[1]/amount[1]
/create[1]/article[2]/price[1]/currency[1]
/create[1]/article[2]/id[1] 
```

* * *

**更新**

要使 XSLT 对所有元素起作用，只需`[text()]`从`match="*[text()]"`. 这将输出每个元素的路径。如果您不希望包含其他元素（如 create、article 和 price）的元素的路径输出，请添加 predicate `[not(*)]`。这是一个更新的示例：

**新的 XML 输入**

```
<ns1:create xmlns:ns1='http://predic8.com/wsdl/material/ArticleService/1/'>
    <article xmlns:ns1='http://predic8.com/material/1/'>
        <name />
        <description />
        <price xmlns:ns1='http://predic8.com/common/1/'>
            <amount />
            <currency xmlns:ns1='http://predic8.com/common/1/'></currency>
        </price>
        <id xmlns:ns1='http://predic8.com/material/1/'></id>
    </article>
    <article xmlns:ns1='http://predic8.com/material/2/'>
        <name xmlns:ns1='http://predic8.com/material/2/'>some name</name>
        <description xmlns:ns1='http://predic8.com/material/2/'>some description</description>
        <price xmlns:ns1='http://predic8.com/common/2/'>
            <amount xmlns:ns1='http://predic8.com/common/2/'>00.01</amount>
            <currency xmlns:ns1='http://predic8.com/common/2/'>USD</currency>
        </price>
        <id xmlns:ns1='http://predic8.com/material/2/'>2</id>
    </article>
</ns1:create> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="text()"/>

    <xsl:template match="*[not(*)]">
        <xsl:call-template name="genPath"/>
        <xsl:apply-templates select="node()"/>
    </xsl:template>

    <xsl:template name="genPath">
        <xsl:param name="prevPath"/>
        <xsl:variable name="currPath" select="concat('/',local-name(),'[',
            count(preceding-sibling::*[name() = name(current())])+1,']',$prevPath)"/>
        <xsl:for-each select="parent::*">
            <xsl:call-template name="genPath">
                <xsl:with-param name="prevPath" select="$currPath"/>
            </xsl:call-template>
        </xsl:for-each>
        <xsl:if test="not(parent::*)">
            <xsl:value-of select="$currPath"/>
            <xsl:text>&#xA;</xsl:text>
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
/create[1]/article[1]/name[1]
/create[1]/article[1]/description[1]
/create[1]/article[1]/price[1]/amount[1]
/create[1]/article[1]/price[1]/currency[1]
/create[1]/article[1]/id[1]
/create[1]/article[2]/name[1]
/create[1]/article[2]/description[1]
/create[1]/article[2]/price[1]/amount[1]
/create[1]/article[2]/price[1]/currency[1]
/create[1]/article[2]/id[1] 
```

如果删除`[not(*)]`谓词，则输出如下所示（为每个元素输出一个路径）：

```
/create[1]
/create[1]/article[1]
/create[1]/article[1]/name[1]
/create[1]/article[1]/description[1]
/create[1]/article[1]/price[1]
/create[1]/article[1]/price[1]/amount[1]
/create[1]/article[1]/price[1]/currency[1]
/create[1]/article[1]/id[1]
/create[1]/article[2]
/create[1]/article[2]/name[1]
/create[1]/article[2]/description[1]
/create[1]/article[2]/price[1]
/create[1]/article[2]/price[1]/amount[1]
/create[1]/article[2]/price[1]/currency[1]
/create[1]/article[2]/id[1] 
```

这是 XSLT 的另一个版本，它的速度大约提高了 65%：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="text()"/>

    <xsl:template match="*[not(*)]">
        <xsl:for-each select="ancestor-or-self::*">
            <xsl:value-of select="concat('/',local-name(),'[',count(preceding-sibling::*[local-name()=local-name(current())])+1,']')"/>
        </xsl:for-each>
        <xsl:text>&#xA;</xsl:text>
        <xsl:apply-templates select="node()"/>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:01:11.087

我的建议是使用 SAX 解析器。[SAX 的 wiki 条目](http://en.wikipedia.org/wiki/Simple_API_for_XML)，[Xerces：Apache 的 Java 的 SAX 解析器](http://xerces.apache.org/xerces2-j/)

在每个起始元素上，将元素的名称添加到列表的末尾。在每个结束元素上，删除最后一个列表条目。当您遇到内容并且想要输出 xpath 时，可以通过迭代列表来检索它。

# warnings - 格子钻石：设置时钟

> ID：11297814
> 
> 赞同：2
> 
> 时间：2012-07-02T16:44:13.153
> 
> 标签：warnings, delay, verilog, led, lattice-diamond

我正在学习 Verilog 并使用 CPLD，但我被困住了。我编写的代码切换了一个 LED，但在综合过程中我不断收到警告。

```
//toggles LED on and off after 1000000 clock cycles

module LEDON(
LED,
clk
);

output LED;
reg LED;

input clk ;
wire clk;

reg [31:0] count;
wire count_max = 32'd1_000_000;

assign count_nxt = (count >= count_max) ? 32'd0 : count + 32'd1;
assign led_state_nxt = (count == count_max) ? ~LED : LED;

always @(posedge clk)

begin
    count <= count_nxt;
    LED <= led_state_nxt;

end

endmodule 
```

我收到这些警告：

> @W：MT420 |发现推断时钟 LEDON|clk 周期为 1000.00ns。请在对象“p:clk”上声明一个用户定义的时钟
> 警告 - 地图：C:/Documents and Settings/belo/Desktop/LedOn2/LedON2.lpf (4): FREQUENCY NET "clk" 2.080000 MHz 中的错误；
> 警告 - 地图：首选项解析结果：检测到 1 个语义错误
> 警告 - 地图：首选项文件“C:/Documents and Settings/belo/Desktop/LedOn2/LedON2.lpf”中有错误。
> 警告 - 地图：首选项文件“C:/Documents and Settings/belo/Desktop/LedOn2/LedON2.prf”中存在语义错误。

我的 LPF 文件如下所示：

```
BLOCK RESETPATHS ;
BLOCK ASYNCPATHS ;
LOCATE COMP "LED" SITE "41" ;
FREQUENCY NET "clk" 2.08 MHz ; 
```

那么有谁知道如何解决这些时钟警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:34:01.297

我不确定这条线是否：“wire count_max = 32'd1_000_000;” 是可综合的。除了在模拟中它可能会被忽略（这可能取决于您的工具链 - 它对于 ASIC 是不可合成的，但对于 FPGA ......也许！！）。

行 count>= count_max 将 count 与 0（而不是 count max）进行比较，因此这被优化掉了（见警告）。这就是为什么它设法合成但不做任何事情的原因。

有多种解决方案。1) 改用参数（就像 C++ 中的 const 或 C 中的 #define）：

```
parameter count_max = 32'd1_000_000; 
```

2）只需使用较小的计数器并在溢出时切换

```
reg [16:0] count; // counts 131,072 cycles

assign led_next = (count == 0 ? ~LED : LED);
always @(posedge clk)
begin
    count <= count + 1;
    LED <= led_next;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-22T12:35:18.897

解决您的第一个警告可以通过制作一个 SDC 约束文件来告知您希望拥有的时钟速度。

以下是创建运行在大约 2.08 MHz 的时钟的示例：

```
create_clock  -period 480.769 -name {clk} [get_ports {clk}] 
```

周期以ns为单位。如果您要约束的时钟不是输入，您可以使用 get_nets 而不是 get_ports。

# c# - Decimal.GetHashCode 取决于尾随零

> ID：11297815
> 
> 赞同：17
> 
> 时间：2012-07-02T16:44:17.803
> 
> 标签：c#, .net

> **可能重复：**
> [C# 为什么相等的小数会产生不相等的哈希值？](https://stackoverflow.com/questions/8533449/c-sharp-why-can-equal-decimals-produce-unequal-hash-values)

我在我的 .NET 3.5 应用程序（x86 或 x64，我都尝试过）中遇到了一个问题，其中尾随零数量不同的小数具有不同的哈希码。例如：

```
decimal x = 3575.000000000000000000M;
decimal y = 3575.0000000000000000000M;

Console.WriteLine(x.GetHashCode());
Console.WriteLine(y.GetHashCode());
Console.WriteLine(x == y);
Console.WriteLine(x.GetHashCode() == y.GetHashCode()); 
```

在我的机器上输出以下内容：

```
1085009409
1085009408
True
False 
```

我认为哈希码的差异归结为由不同比例因子引起的两个数字的不同内部表示。

虽然我可以通过删除尾随零来解决这个问题，但我总是假设 GetHashCode 应该为 x 和 y 返回相同的值，如果 x == y。这个假设是错误的，还是 Decimal.GetHashCode 的问题？

编辑：要清楚我正在使用 Visual Studio 2008 SP1、.NET 3.5 的版本。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-02T16:48:29.773

**这是`Decimal.GetHashCode`**.NET Framework 3.5 及更低版本的问题。根据指南，当两个值被认为相等时，它们必须返回相同的哈希码；在这种情况下，`decimal`显然没有。您应该始终期望两个相等的对象具有相同的哈希码。

[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)：

> 如果两个对象比较相等，则每个对象的 GetHashCode 方法必须返回相同的值。

# 复制

我已经针对不同版本的 .NET Framework 尝试了您的确切代码，结果是：

```
╔══════════════════╤══════════════════╗
║Framework version │ Hashcode equal ? ║
╟──────────────────┼──────────────────╢
║      2.0         │  No.             ║
║      3.0         │  No.             ║
║      3.5         │  No.             ║
║      4.0         │  Yes.            ║
║      4.5         │  Yes.            ║
╚══════════════════╧══════════════════╝ 
```

换句话说，您似乎偶然发现了 .NET 框架中的一个错误，该错误已在 .NET Framework 4 中得到修复。

以上结果是使用Visual Studio 2012 RC，使用属性页切换框架达到的。

微软[在这里承认了这个错误](https://connect.microsoft.com/VisualStudio/feedback/details/314630/system-decimal-gethashcode-violates-equality-contract)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-02T17:19:11.157

这是 .NET 4 之前的 .NET 版本中相当[臭名昭著的错误](https://stackoverflow.com/questions/3841602/why-is-valuetype-gethashcode-implemented-like-it-is/3842515#3842515)。 Decimal.GetHashCode() 实现依赖于十进制值中的位值。它们是不同的，因为十进制跟踪分数中已知数字的数量。您可以通过对值使用 Decimal.GetBits() 来查看。这是否是一个错误实际上是有争议的，小数*确实*有不同的值，这取决于你戴什么样的眼镜。

尽管如此，Microsoft 同意这是不直观的行为，并在 .NET 4 中对其进行了修复，相关的反馈文章[在此处](https://connect.microsoft.com/VisualStudio/feedback/details/314630/system-decimal-gethashcode-violates-equality-contract)。

# php - 使用 .htaccess 重写 Url 中的 PHP 值

> ID：11297820
> 
> 赞同：0
> 
> 时间：2012-07-02T16:44:38.137
> 
> 标签：php, .htaccess, url-rewriting, vhosts

我有一个错误`.htaccess`：

```
RewriteCond %{REQUEST_URI}  !^(.*)/modalbox/.*
RewriteCond %{HTTP_HOST} !^www\.wiglost\.com$
RewriteCond %{HTTP_HOST} !^wiglost\.com/modalbox/$
RewriteCond %{HTTP_HOST} ^([^.]+)\.wiglost\.com$
RewriteRule ^([\a-zA-Z0-9\-\_\.\/]*)\.php$ index\.php?acc=%1 [L]

RewriteCond %{HTTP_HOST} !^www\.wiglost\.com$
RewriteCond %{HTTP_HOST} ^(.*)\.wiglost\.com$
RewriteRule ^show\.html$ index\.php?acc=%1&show [L] 
```

域`example.wiglost.com`正常但`example.wiglost.com/show.html`不对应`wiglost.com?acc=example&show`但未`show`执行操作但与操作`acc`正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:38:56.280

`show.html`重定向到`index.php`，但随后`index.php`将被第一个规则匹配，因为`index.php`匹配 `^([\a-zA-Z0-9-_./]*).php$，并且显示参数将被覆盖。

尝试`RewriteRule ^index\.php$ - [L]`在其他规则之前添加。

# java - ApplicationDispatcher 异常

> ID：11297823
> 
> 赞同：0
> 
> 时间：2012-07-02T16:44:45.353
> 
> 标签：java, servlets

每当我尝试使用从我的方法调用的此调度方法重定向到某个页面时`doGet`，我都会收到以下异常。我不知道为什么！

**帐户控制器 servlet**

```
protected void dispatch(HttpServletRequest request,
            HttpServletResponse response, String page)
            throws javax.servlet.ServletException, java.io.IOException {
        RequestDispatcher dispatcher = getServletContext()
                .getRequestDispatcher(page);
        try {
            dispatcher.forward(request, response);
        } catch (java.lang.NullPointerException e) {
            System.out.println("NullPointerException: attribute expected in view");
        }
    } 
```

**错误信息**

```
 java.lang.NullPointerException
        org.apache.jasper.JasperException: java.lang.NullPointerException
        org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:502)
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:430)
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        controller.AccountController.dispatch(AccountController.java:91)
        controller.AccountController.doExecute(AccountController.java:72)
        controller.AccountController.doGet(AccountController.java:34)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

    java.lang.NullPointerException
        org.apache.jsp.content.edit_jsp._jspService(edit_jsp.java:109)
        org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        controller.AccountController.dispatch(AccountController.java:91)
        controller.AccountController.doExecute(AccountController.java:72)
        controller.AccountController.doGet(AccountController.java:34)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:08:40.053

我发现了 NullPointerException 背后的原因：servlet 和 JSP 中的请求参数不匹配。JSP 需要一个不存在的参数以触发异常。

**小服务程序：**

```
request.setAttribute("Account", currentClient);
request.setAttribute("RentFilmList", rentFilmList);

dispatch(request, response, ApplicationRessource.getInstance()
                    .getAccountPage()); 
```

**JSP**

```
<%
    ClientBean client = (ClientBean)request.getAttribute("Account");
    ArrayList<FilmBean> rentFilmList = (ArrayList<FilmBean>)request.getAttribute("RentFilmList");
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:51:14.660

调用该方法时检查页面字符串的值。

`getServletContext().getRequestDispatcher(page);`正在返回 null，因此当您尝试在调度程序上调用 forward 时，您会得到一个 NPE。

我怀疑页面字符串是空的，或者它不是您在进入该方法时所认为的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:57:21.617

您必须检查是否`RequestDispatcher dispatcher = getServletContext() .getRequestDispatcher(page);`返回`null`，因为

```
This method returns `null` if the servlet container cannot return a
RequestDispatcher. 
```

[getRequestDispatcher](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletRequest.html#getRequestDispatcher%28java.lang.String%29)
**像下面的代码：**

```
try {
      if(dispatcher!=null){
        dispatcher.forward(request, response);
      }
    } catch (java.lang.NullPointerException e) {
        System.out.println("NullPointerException: attribute expected in view");
    } 
```

# php - 创建基于相关关键字搜索 1+ 个数据库的函数时遇到问题

> ID：11297825
> 
> 赞同：1
> 
> 时间：2012-07-02T16:44:46.460
> 
> 标签：php, mysql, keyword

好的，所以我已经编写了这个脚本，它可以让我找到但是它不能正常工作。我遇到了编程问题 - 对其进行编程以使其正常工作。它似乎无法正常工作。

此函数在显示在充满银行对帐单付款的数据库中的每一行上声明。这`$a, $b, $c, $d`只是类型（BAC、TRS 等）、描述（35 QUEENS ROAD RENT）和金额（500.00 英镑）。

我正在尝试创建一个函数来核对特定用户的付款，具体取决于与他们相关的地址/属性、他们的姓名以及他们的租金是多少。

这是我到目前为止所拥有的：

```
 function reconcile($a,$b,$c,$d) {

    //when the user clicks on the text fild, jquery loads the various names needed from the database
    //when the user clicks on the selected field, the value is saved via ajax and saved on the server the reconciled field

    //break down the inputs into an array
    //create SQL query that matches all of these key words

    //create keywords database
    $keywords = $a . " " . $b . " " . $c . " " . $d;

    //remove commas, dashes and other keywords from database that might be a nuisance
    //change names like ave to avenue
    $keywords = str_replace("'", "", $keywords);
    $keywords = str_replace("-", "", $keywords);
    $keywords = str_replace(",", "", $keywords);
    $keywords = str_replace("A/C", "", $keywords);
    $keywords = str_replace("TO", "", $keywords);
    $keywords = str_replace("CALL", "", $keywords);
    $keywords = str_replace("REF.NO.", "", $keywords);
    $keywords = str_replace("TO", "", $keywords);
    $keywords = preg_replace("/\s+/", " ", $keywords);
    $keywords = str_replace("  ", "", $keywords);
    $keywords = addslashes($keywords);
    $keywords = mysql_real_escape_string($keywords);

    $keywords = explode(" ", $keywords);
    //$keywords = remove_from_array($keywords, 2);

    //match keywords to keywords database

    $matches = array();

    //search 5 databases...

    $i=0;

    foreach($keywords as $keyword) {

        //add more fields
        //check distinct

        //do not allow any keywords that are smaller than 3
        if(strlen($keyword) < 3) {
            continue;
        }

        $get = mysql_query("SELECT DISTINCT `users`.`id` FROM `users` LEFT JOIN `addresses` ON `users`.`id` = `addresses`.`user` WHERE (`users`.`fname` LIKE '%$keyword%' OR `users`.`lname` LIKE '%$keyword%') OR (((`addresses`.`flat` LIKE '%$keyword%' OR `addresses`.`address` LIKE '%$keyword%') OR (`addresses`.`district` LIKE '%$keyword%' OR `addresses`.`town` LIKE '%$keyword%')) OR (`addresses`.`county` LIKE '%$keyword%' OR `addresses`.`postcode` LIKE '%$keyword%'));") or die("Error: " . mysql_error());
        if(mysql_num_rows($get) > 0) {
            while($fetch = mysql_fetch_array($get)) {
                list($uid) = $fetch; //$uid = user id
                //insert $uid into array
                //1 => 3 times
                //find number if exists and then add to that number

                //search array and echo attempts (if any)

                if(in_array($uid, $matches)) {
                    //add one to the key
                    $matches[$uid]++;
                } else {
                    array_push($matches, $uid);
                }

                $i++;

                //save search to database

            }

            //create array for user
            //add up relevance for that user

        }

    }

    $relevance = 0;

    if($i > $relevance) {
        //change javascript function and link with ajax.php
        echo "<span onClick=\"javascript:void(0)\" style=\"cursor:pointer;\" class=\"label label-success\">Accept</span>\n\r";
        //change to jquery function that allows a drop down of names from the database
        echo "<input type=\"text\" style=\"width:140px\" value=\"" . $matches[0] . "\" />\n\r";
    }

} 
```

我正在考虑添加一个这样做的数组：

`[0] (user id) => 3 (how many times that user id is found through one row of a bank statement)`

因此，例如，如果用户 3 在 37 Kings Avenue 拥有一处房产，并且关键字是“大道”，`[3] => 1`那么对于额外的用户，结果将是依此类推。

“接受”按钮意味着用户将接受系统的核对，并且文本输入将显示其他相关名称/所有名称和地址的下拉列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:43:10.100

如果你想从你的数据库/表/视图中搜索一些数据，你可以使用[SQLyog 的](http://www.webyog.com) [数据搜索](http://www.webyog.com/blog/2011/06/09/mysql-data-search-data-at-your-finger-tips/)功能。它在您的服务器中搜索数据。它像谷歌搜索一样工作！“数据搜索”功能让您无需实际编写任何 SQL 即可查找特定数据。您可以按数据库或表的数据类型/子集过滤数据。

您可以尝试下载[30 天试用版](http://www.webyog.com/en/downloads.php)并评估此 MySQL GUI。

![在此处输入图像描述](../Images/57a204dae0a3287b64fa61271adb991a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:07:31.270

还有[狮身人面像](https://stackoverflow.com/questions/5036666/guide-to-using-sphinx-with-php-and-mysql)（[官方网站](http://sphinxsearch.com/)），检查一下你是否对你的服务器有root访问权限，这样你就可以运行它需要的服务器进程。它易于设置，并且提供相关结果非常好，您可以获得关键字或一组关键字的所有匹配项，因此您基本上可以将所有关键字扔给它，它会给您所有结果，最好的匹配在上面。

此外，它非常快，允许进行增量索引（添加新数据而无需遍历所有数据来重建索引），因此您可以在非高峰时间运行完整的重新索引。

如果你想要它真的很简单，我建议使用 MySQL 插件[SphinxSE](http://sphinxsearch.com/docs/1.10/sphinxse-snippets.html)，它可以让你像普通的 mysql 表一样查询它，并连接到原始表以便于访问。

如果您使用[gentoo ，您可以使用这个](http://www.gentoo.org/)[ebuild](https://github.com/castiel/gentoo-overlay/blob/master/dev-db/mysql/mysql-5.1.59-r1.ebuild)简单地添加带有插件的 mysql

# html - HTML5 日期输入类型干扰 jQuery Datepicker

> ID：11297827
> 
> 赞同：16
> 
> 时间：2012-07-02T16:44:52.833
> 
> 标签：html, jquery-ui

我在我的网站上使用 jQuery UI 的 datepicker 进行日期选择。我的一位用户刚刚升级到最新版本的 Chrome，它具有内置的 HTML5 原生日期选择器。两个 UI 相互重叠的大问题。另一个问题是当用户提交日期时，数据库中的日期恢复为“0000-00-00”并产生错误数据。

如果我删除 jQuery 日期选择器，大多数不使用最新最好的浏览器的用户将没有弹出日期选择器。而且，那些拥有最新浏览器的人将有两个重叠的日历，这会破坏应用程序。我的问题是如何禁用最新的浏览器显示内置日期功能并继续使用 jQuery Datepicker？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-02T16:50:46.247

使用[Modernizr](http://modernizr.com/)或类似的库来检测浏览器是否支持`input type=date`，如果不支持则加载 jQuery UI 日期选择器。

```
if (!Modernizr.inputtypes.date) {
    $('input[type=date]').datepicker();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:59:24.313

从使用切换`input[type=date]`到`input[type=text]`或使用 Modernizr 来检测对本机日期选择器的支持。我在这里写了一篇关于这两个选项的含义的帖子 - [http://tjvantoll.com/2012/06/30/creating-a-native-html5-datepicker-with-a-fallback-to-jquery-ui/](http://tjvantoll.com/2012/06/30/creating-a-native-html5-datepicker-with-a-fallback-to-jquery-ui/) .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:58:27.167

有时您无法修改表单类型。例如，我使用 Symfony2 Bundle 的 FormType。

我使用 Genemu jQuery Datepicker 遇到了这个问题，我通过添加日历图像按钮和少量 css 代码解决了这个问题。

[您可以在此链接中看到最终结果](https://dl.dropbox.com/u/46575078/datepicker.png)

在这里您可以阅读添加图像图标的文档：[jQuery UI Datepicker](http://jqueryui.com/datepicker/#icon-trigger)

然后，我简单地添加了一个这样的 css（也许样式规则对你来说会有所不同）：

```
form input[type=date] + img {
    position: relative;
    left: -25px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-23T17:29:35.967

向表单添加`novalidate`属性以删除浏览器的内置验证。

```
<form action="login.htm" novalidate> 
```

有关更多信息，请参阅此[链接](http://www.w3schools.com/tags/att_form_novalidate.asp)。

# javascript - 将 JQuery UI 的不同自动完成添加到动态创建的输入中

> ID：11297830
> 
> 赞同：0
> 
> 时间：2012-07-02T16:45:07.513
> 
> 标签：javascript, jquery, jquery-ui, dom, jquery-ui-autocomplete

更新 1 我需要将自动完成添加到新创建的克隆中。

```
 $('input[name^="numEmp"]').autocomplete({

    source: Empleados,select: function(event, ui) {$(this).val(ui.item.value);return false;}});         

$('input[name^="servicioNom"]').autocomplete({

    source: Servicios,select: function(event, ui) {$(this).val(ui.item.value);return false;}});

   $(".Nuevo").on("click", function() {
   $(".readdireccion:last").clone().insertAfter(".readdireccion:last").

   find('.emp').autocomplete({
   source: Empleados,select: function(event, ui) {$(this).val(ui.item.value);}}).

   find('input[name^="servicioNom"]').autocomplete({
   source: Servicios,select: function(event, ui) {$(this).val(ui.item.value);}});   

}); 
```

似乎无法让他们进去

更新 2！感谢 SALMAN A ！

```
 $('input[name^="numEmp"]').autocomplete({

    source: Empleados,select: function(event, ui) {$(this).val(ui.item.value);return false;}});         

$('input[name^="servicioNom"]').autocomplete({

    source: Servicios,select: function(event, ui) {$(this).val(ui.item.value);return false;}});

   $(".Nuevo").on("click", function() {
   $(".readdireccion:last").clone().insertAfter(".readdireccion:last")

   $('input[name^="numEmp"]').autocomplete({

    source: Empleados,select: function(event, ui) {$(this).val(ui.item.value);return false;}});         

$('input[name^="servicioNom"]').autocomplete({

    source: Servicios,select: function(event, ui) {$(this).val(ui.item.value);return false;}});

}); 
```

希望这可以帮助任何人解决这些问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:28:44.207

看看[这个小提琴](http://jsfiddle.net/salman/SzMWk/7/)。在您的情况下，最好不要使用 vanilla JavaScript 来克隆元素。用于[`jQuery.clone()`](http://api.jquery.com/clone/)克隆您的元素；并调用[`.autocomplete()`](http://jqueryui.com/demos/autocomplete/)新创建的元素。同样正如我的评论中所建议的，不要克隆具有（或包含具有）ID 属性的元素的元素。重复的 ID 元素不好。

# javascript - scrollLeft 不适用于 Android 中的溢出 div？

> ID：11297831
> 
> 赞同：3
> 
> 时间：2012-07-02T16:45:09.037
> 
> 标签：javascript, android, webview

我设置了一个非常简单的 Android 应用程序，其 webview 显示以下内容：

```
<style>
div { 
    overflow-x:scroll;
    overflow-y:hidden;
    white-space:nowrap;
}​
</style>
<div id="main">
    <img src="https://www.google.com/images/srpr/logo3w.png">
    <img src="https://www.google.com/images/srpr/logo3w.png">
    <img src="https://www.google.com/images/srpr/logo3w.png">
    <img src="https://www.google.com/images/srpr/logo3w.png">
    <img src="https://www.google.com/images/srpr/logo3w.png">
    <img src="https://www.google.com/images/srpr/logo3w.png">
    <img src="https://www.google.com/images/srpr/logo3w.png">
    <img src="https://www.google.com/images/srpr/logo3w.png">
    <img src="https://www.google.com/images/srpr/logo3w.png">
    <img src="https://www.google.com/images/srpr/logo3w.png">
    <img src="https://www.google.com/images/srpr/logo3w.png">
    <img src="https://www.google.com/images/srpr/logo3w.png">
    <img src="https://www.google.com/images/srpr/logo3w.png">
    <img src="https://www.google.com/images/srpr/logo3w.png">
</div>​
<script>
window.setTimeout(function () {
    var main = document.getElementById('main');
    main.scrollLeft = 300;
}, 5000);
</script>
​ 
```

[在这里](http://jsfiddle.net/amjibaly/qVyjb/2/)拉小提琴。

我正在做的是创建一个简单的可滚动区域，但是我想将内容偏移一定量。它在 Chrome 中运行良好，但在 Android 网络视图中似乎根本不起作用。我什至打印了`main.scrollLeft`之前和之后的值，它在 logcat 中显示为已修改，但显示中没有任何内容显示已更改。关于发生了什么的任何想法？我已经在 Gingerbread 和 ICS 上对此进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T19:07:35.163

**CSS**

```
#main {
    position: relative;
    left: 0px;
    -webkit-transition: -webkit-transform 0s linear;
    -webkit-transform: translateZ(0);
} 
```

**Javascript**

```
// Offset is negative to scroll left, positive to scroll right...
$('#main').css('webkitTransform', 'translateX(' + offset +  'px) translateZ(0)'); 
```

# xslt - 获取超链接的url

> ID：11297840
> 
> 赞同：1
> 
> 时间：2012-07-02T16:45:55.797
> 
> 标签：xslt, xpath, xslt-1.0, xslt-2.0

我必须将 xslt 写入 wordml (2007) 文档。有像下面这样的超链接。

```
< w:p w:rsidR="00FD086A" w:rsidRDefault="00425A76" w:rsidP="00FD086A">
< w: hyperlink r:id="rId4" w:history="1">
< w:r w:rsidR="00FD086A" w:rsidRPr="00425A76">
< w:rPr>
< w:rStyle w:val="Hyperlink"/>
< /w:rPr>
< w:t>google</w:t>
< /w:r>
< /w:hyperlink>
< /w:p> 
```

我想获取链接名称的 url。在这里，我想获取“google”链接的 url。我知道它在关系中，但我无法使用 xslt 访问它。有人知道吗？（可能写一个模板？）请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T03:51:09.953

假设声明了以下命名空间前缀：

```
xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
xmlns:pkg="http://schemas.microsoft.com/office/2006/xmlPackage"
xmlns:rel="http://schemas.openxmlformats.org/package/2006/relationships"
xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" 
```

以下 XPath 可用于使用 的值`w:hyperlink/@r:id`（在此示例中为“rId5”的硬编码值）选择 URL 的值：

```
/pkg:package
  /pkg:part
     /pkg:xmlData
       /rel:Relationships
         /rel:Relationship[@Id='rId5']/@Target 
```

您可以在模板匹配的上下文中使用它`w:hyperlink`来生成 HTML 锚元素，如下所示：

```
<xsl:template match="w:hyperlink">
    <a href="{/pkg:package
                /pkg:part
                  /pkg:xmlData
                    /rel:Relationships
                      /rel:Relationship[@Id=current()/@r:id]/@Target}">
        <xsl:apply-templates/>
    </a>
</xsl:template> 
```

# signalr - 信号器客户端应用程序未连接到集线器

> ID：11297843
> 
> 赞同：0
> 
> 时间：2012-07-02T16:46:11.313
> 
> 标签：signalr

我想要实现的是一个控制台应用程序，它能够连接到使用 SignalR 托管在网站上的特定集线器并向其发送消息。

我有一个控制台应用程序尝试连接到网站上的“聊天”中心。控制台将尝试连接，然后发送消息并关闭。

```
 static void Main(string[] args)
    {
        var connection = new HubConnection("http://mysite:101/");
        IHubProxy myHub = connection.CreateProxy("Chat");

        connection.Start().ContinueWith(task =>
        {

            if (task.IsFaulted)
            {
                Console.WriteLine("There was an error opening the connection:{0}", task.Exception.GetBaseException());
            }
            else
            {

                Console.WriteLine("Client Connected");
            }

        }).Wait();

        myHub.Invoke("Send", "Console App is Online!. ").ContinueWith(task =>
        {
            if (task.IsFaulted)
            {
                Console.WriteLine("There was an error calling send: {0}", task.Exception.GetBaseException());
                Console.WriteLine(task.Status.ToString());
            }
            else
            {
                Console.WriteLine("Send Complete.");
            }
        }).Wait(); 
```

在本地一切正常，（我猜这将是同一个应用程序域。）

我的 asp 集线器只是基于 wiki [https://github.com/SignalR/SignalR/wiki/中的聊天示例](https://github.com/SignalR/SignalR/wiki/)

```
 using SignalR.Hosting.AspNet;
 using System.Threading.Tasks;

     namespace HubSignalrTest
     {

   //[HubName("Hubtest")]
   public class Chat : Hub , IDisconnect , IConnected
   {

    public void Send(string message)
    {
        // Call the addMessage method on all clients
        Clients.addMessage(message);
    } 
```

Jscript 也与示例中的几乎相同。

```
 <script type="text/javascript" src="Scripts/jquery-1.7.2.js"></script>
 <script type="text/javascript" src="Scripts/jquery.signalR-0.5.1.js"></script>

<script src='<%= ResolveClientUrl("~/signalr/hubs") %>'> type="text/javascript">   </script>
<script type="text/javascript">

  jQuery.support.cors = true;

  $(function () {
      // Proxy created on the fly
      var chat = $.connection.chat;

      // Declare a function on the chat hub so the server can invoke it
      chat.addMessage = function (message) {
          $('#messages').append('<li>' + message + '</li>');
      };

      $("#broadcast").click(function () {
          // Call the chat method on the server
          chat.send($('#msg').val())
              .done(function () {
                  console.log('Success!');
              })
              .fail(function (e) {
                  console.warn(e);
              });
      });

      // Start the connection
      $.connection.hub.start();
  }); 
```

我尝试设置 jQuery.support.cors = true; 省略或添加集线器名称，我调查了在同一台服务器上使用正确设置运行控制台应用程序（仍然无法连接到集线器），并且似乎不是防火墙问题。有没有人对类似的项目有好运或知道我做错了什么？我真的很想实现这种基本的交流，以扩展 SignalR 带来的许多想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:40:50.597

如果您尝试跨域，请在此处阅读[https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs)。滚动到底部

# jquery - Sitecore、jQuery ajax 和 WebMethod 返回页面本身

> ID：11297847
> 
> 赞同：0
> 
> 时间：2012-07-02T16:46:34.547
> 
> 标签：jquery, ajax, sitecore, webmethod

我正在尝试使用 jQuery ajax 在我的应用程序中的 aspx 页面上调用 WebMethod。我正在关注这篇文章：[http ://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

我注意到，当我尝试进行 ajax 调用时，它给了我页面本身（myPage.aspx），而不是我的 WebMethod 的结果。在这一点上，我基本上直接使用上面文章中的代码。javascript是：

```
$(document).ready(function () {
// Add the page method call as an onclick handler for the div.
$("#Result").click(function () {
    $.ajax({
        type: "POST",
        url: "myPage.aspx/GetDate",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            // Replace the div's content with the page method's return.
            $("#Result").text(msg.d);
        }
    });
});
}); 
```

WebMethod 的 myPage.aspx 代码隐藏是：

```
 [WebMethod]
    public static string GetDate()
    {
        return DateTime.Now.ToString();
    } 
```

奇怪的是我让它在一个单独的测试页面上工作，但是当我试图将它集成到我想要使用它的实际页面中时，它没有。在搜索网站和网络时，我找不到任何可以解决我的问题的东西。

我正在运行 Sitecore 6.5 和 .NET Framework 4.0 版。任何人都可以提供帮助或提供见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:11:13.057

通常，当请求不是 POST 或没有`application/json`设置 Content-Type 时，就会发生这种情况。

我不熟悉 Sitecore，但其他人似乎在干扰页面方法时遇到了麻烦：[How to use jquery ajax and webmethod with sitecore](https://stackoverflow.com/questions/7560111/how-to-use-jquery-ajax-and-webmethod-with-sitecore)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:23:47.380

我只熟悉 PHP，但通常你必须在返回之前 json_encode() 你的数组。所以例如在 php

```
$TestArray['d'] = "All My HTML";
echo json_encode($TestArray);

//Then in Jquery

$("#Result").html(msg.d); 
```

并确保有一个 id 为 Result 的 div ...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T12:04:22.417

我认为问题在于 Sitecore 的 URL 重写器将处理请求并忽略`/GetDate`您的 url 部分。

因此，您必须将您的 aspx 添加到`<setting name="IgnoreUrlPrefixes" />`设置中。

# c++ - 非常基本的继承：错误：“{”标记之前的预期类名

> ID：11297849
> 
> 赞同：27
> 
> 时间：2012-07-02T16:46:47.567
> 
> 标签：c++, inheritance

我正在尝试学习 c++，但在尝试找出继承时偶然发现了一个错误。

编译：daughter.cpp 在 /home/jonas/kodning/testing/daughter.cpp:1 中包含的文件中：/home/jonas/kodning/testing/daughter.h:6：错误：“{”标记之前的预期类名进程以状态 1 终止（0 分钟，0 秒）1 个错误，0 个警告

我的文件：main.cpp：

```
#include "mother.h"
#include "daughter.h"
#include <iostream>
using namespace std;

int main()
{
    cout << "Hello world!" << endl;
    mother mom;
    mom.saywhat();
    return 0;
} 
```

母亲.cpp：

```
#include "mother.h"
#include "daughter.h"

#include <iostream>

using namespace std;

mother::mother()
{
    //ctor
}

void mother::saywhat() {

    cout << "WHAAAAAAT" << endl;

} 
```

妈妈.h：

```
#ifndef MOTHER_H
#define MOTHER_H

class mother
{
    public:
        mother();
        void saywhat();
    protected:
    private:
};

#endif // MOTHER_H 
```

女儿.h：

```
#ifndef DAUGHTER_H
#define DAUGHTER_H

class daughter: public mother
{
    public:
        daughter();
    protected:
    private:
};

#endif // DAUGHTER_H 
```

和女儿.cpp：

```
#include "daughter.h"
#include "mother.h"

#include <iostream>

using namespace std;

daughter::daughter()
{
    //ctor
} 
```

我想做的是让女儿从母类（=saywhat（））继承所有公共的东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-02T16:49:51.037

你忘了在`mother.h`这里包括：

```
#ifndef DAUGHTER_H
#define DAUGHTER_H

#include "mother.h"  //<--- this line is added by me.    

class daughter: public mother
{
    public:
        daughter();
    protected:
    private:
};

#endif // DAUGHTER_H 
```

您需要包含此标头，因为`daughter`它源自`mother`. 所以编译器需要知道`mother`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-02T16:53:40.300

在daughter.cpp中，切换include的两行。IE

```
#include "mother.h"
#include "daughter.h" 
```

发生的事情是编译器正在查看类`daughter`的定义，但找不到基类的定义`mother`。所以它告诉你“我期待该`mother`行中“{”前面的标识符

```
class daughter: public mother { 
```

成为一个类，但我找不到它的定义！”

在`mother.cpp`中，删除 的包含`daughter.h`。编译器不需要知道 ; 的定义`daughter.h`。ie 类`mother`可以不用`daughter`. 添加包含`daughter.h`在类定义之间引入了不必要的依赖关系。

另一方面，恕我直言，在类的定义（.cpp）而不是类的声明（.h）中保留包含标题总是更好。这样，当包含标题时，您不太可能需要解决标题包含噩梦，而这些标题又包含您无法控制的其他标题。但是许多生产代码在标头中包含标头。两者都是正确的，只是在这样做时需要小心。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-10-03T03:30:24.030

与 OP 的问题无关，但对于任何其他偶然发现此问题的 C++ 学习者来说，我因为不同的原因而收到此错误。如果你的父类是模板化的，你需要在子类中指定类型名称：

```
#include "Parent.h"

template <typename ChildType>
class Child : public Parent<ChildType> { // <ChildType> is important here

}; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-01-28T14:47:21.003

检查`#ifndef`并`#define`在您的头文件中是唯一的。

```
#ifndef BASE_CLIENT_HANDLER_H
#define BASE_CLIENT_HANDLER_H

#include "Threads/Thread.h"

class BaseClientHandler : public threads::Thread {
public:
    bool isOn();
};
#endif //BASE_CLIENT_HANDLER_H 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-02T16:50:18.420

首先，您在实现文件中包含警卫。删除它们。

其次，如果您从一个类继承，则需要包含定义该类的标头。

# asp.net - 在 ASP 上使用按钮显示更多字段

> ID：11297858
> 
> 赞同：0
> 
> 时间：2012-07-02T16:47:34.977
> 
> 标签：asp.net, visual-studio-2010, visual-studio, button

我正在做员工可以写简历的网站，我有一部分过去的工作，我想显示员工可以写此信息的字段（公司，职位等），但是，我只想显示其中一个部分，如果员工想要添加更多旧工作，他将单击“添加更多”，然后为那些过去的工作显示 2 或 3 个更多字段，目前我有 3 个这样声明的部分：

```
 <asp:Label ID="Label6" runat="server" Text="Empresa" Style="z-index: 1; left: 10px;
        top: 165px; position: absolute"></asp:Label>
    <asp:TextBox ID="TextBox3" runat="server" Style="z-index: 1; left: 80px; top:  165px;
        position: absolute" Width="200px"></asp:TextBox>
    <asp:Label ID="Label7" runat="server" Text="Fecha" Style="z-index: 1; left: 10px;
        top: 195px; position: absolute"></asp:Label>
    <asp:DropDownList ID="DropDownList1" runat="server" Style="z-index: 1; left: 80px;
        top: 195px; position: absolute">
        <asp:ListItem>Enero</asp:ListItem>
        <asp:ListItem>Febrero</asp:ListItem>
        <asp:ListItem>Marzo</asp:ListItem>
        <asp:ListItem>Abril</asp:ListItem>
        <asp:ListItem>Mayo</asp:ListItem>
        <asp:ListItem>Junio</asp:ListItem>
        <asp:ListItem>Julio</asp:ListItem>
        <asp:ListItem>Agosto</asp:ListItem>
        <asp:ListItem>Septiembre</asp:ListItem>
        <asp:ListItem>Octubre</asp:ListItem>
        <asp:ListItem>Noviembre</asp:ListItem>
        <asp:ListItem>Diciembre</asp:ListItem>
    </asp:DropDownList>
    <asp:DropDownList ID="DropDownList2" runat="server" Style="z-index: 1; left: 172px;
        top: 195px; position: absolute" OnSelectedIndexChanged="DropDownList2_SelectedIndexChanged">
    </asp:DropDownList>
    <asp:Label ID="Label8" runat="server" Text="a" Style="z-index: 1; left: 235px; top: 195px;
        position: absolute"></asp:Label>
    <asp:DropDownList ID="DropDownList3" runat="server" Style="z-index: 1; left: 250px;
        top: 195px; position: absolute">
        <asp:ListItem>Enero</asp:ListItem>
        <asp:ListItem>Febrero</asp:ListItem>
        <asp:ListItem>Marzo</asp:ListItem>
        <asp:ListItem>Abril</asp:ListItem>
        <asp:ListItem>Mayo</asp:ListItem>
        <asp:ListItem>Junio</asp:ListItem>
        <asp:ListItem>Julio</asp:ListItem>
        <asp:ListItem>Agosto</asp:ListItem>
        <asp:ListItem>Septiembre</asp:ListItem>
        <asp:ListItem>Octubre</asp:ListItem>
        <asp:ListItem>Noviembre</asp:ListItem>
        <asp:ListItem>Diciembre</asp:ListItem>
    </asp:DropDownList>
    <asp:DropDownList ID="DropDownList4" runat="server" Style="z-index: 1; left: 342px;
        top: 195px; position: absolute" OnSelectedIndexChanged="DropDownList4_SelectedIndexChanged">
    </asp:DropDownList>
    <asp:Label ID="Label9" runat="server" Text="Puesto:" Style="z-index: 1; left: 10px;
        top: 225px; position: absolute"></asp:Label>
    <asp:TextBox ID="TextBox4" runat="server" Style="z-index: 1; left: 80px; top: 225px;
        position: absolute" Width="200px"></asp:TextBox>
    <asp:Label ID="Label10" runat="server" Text="Funciones:" Style="z-index: 1; left: 10px;
        top: 255px; position: absolute"></asp:Label>
    <asp:TextBox ID="TextBox5" runat="server" Rows="5" TextMode="MultiLine" Style="z-index: 1;
        left: 80px; top: 255px; position: absolute" Width="200"></asp:TextBox> 
```

所以，我只想隐藏其他 2 个，然后在单击“添加更多”按钮时显示它们，我是 ASP 上的新手，不知道该怎么做，以及这会如何影响其他标签和文本框我有，因为每个人都有一个左上角的位置，如果他们需要移动或者他们会发生什么。

我希望我正在解释我的问题，你可以帮助我：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:19:22.173

这听起来像你需要一些 javascript 魔法。在您的 aspx 页面内单击按钮时，您可以执行类似的操作。只需要让您想要切换的部分默认具有“无”的显示属性（样式=“显示：无”）。然后单击“添加更多”时，显示属性将更改为“块”，显示隐藏部分：

```
<script type="text/javascript">
    function toggle_visibility(id) {
        var e = document.getElementById(id);
        if(e.style.display == 'block')
        {
            e.style.display = 'none';
        }
        else
        {
            e.style.display = 'block';
         }
    }
</script> 
```

然后像这样在按钮或链接所在的地方调用这个javascript函数：

```
<a href="javascript:toggle_visibility('#idOfDiv');">Add More</a> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:00:51.587

```
protected void btnShowMore_Click(object sender, EventArgs e)
{
DropDownList1.Visible=false;
DropDownList2.Visible=false;
DropDownList3.Visible=true;
} 
```

如果您希望显示控件但用户无法对其执行操作，则可以使用属性“已启用”。

# matlab - 相同的矩阵运算在 Matlab 中返回不同的结果

> ID：11297860
> 
> 赞同：1
> 
> 时间：2012-07-02T16:47:50.660
> 
> 标签：matlab, floating-point-precision

我在使用 Matlab 时遇到了一点问题，我认为这与 Matlab 的精度有关，但我真的很想解决这个问题。我有三个矩阵，一个`f`以 296x3118 的尺寸调用，另一个`mapping.mean`以 1x3118 的尺寸调用，最后一个`mapping.M`以 3118x100 的尺寸调用。
以下操作的结果应该是 1，但不是。生成的矩阵`f_s_1`和`f_s_2`具有仅在 10^-12 范围内不同的值。有谁知道为什么，或者如何解决这个问题？

```
f_s_1 = ((f(1:296,:)-repmat(mapping.mean,296,1))*mapping.M)';
f_s_2 = ((f(1:295,:)-repmat(mapping.mean,295,1))*mapping.M)';
isequal(f_s_1(:,1:295),f_s_2)

ans =

 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T18:12:42.970

您看到的是 MATLAB 中[舍入错误](http://en.wikipedia.org/wiki/Round-off_error)的结果，可能来自大型矩阵运算的并行化。对于非常大的矩阵运算，MATLAB[会自动切换到运算符的并行版本以提高速度](http://www.mathworks.com/support/solutions/en/data/1-4PG4AN/?solution=1-4PG4AN)，这意味着解决方案的各个部分都可以同时计算，然后在最后进行组合。由于不同部分可能迟早完成，或者由原始问题的不同部分组成，因此您可以获得不同的结果。

因为您的计算机仅使用少量位来表示您的数字（在您的 matlab 版本上它可能使用 64 位），所以您通常会有一小部分十进制数在执行操作时被截断。事实上，当您将一个非常大的数字添加到一个非常小的数字时，计算机可能只返回非常大的数字作为结果，因为“没有更多空间”来表示较小的数字。

例如，尝试运行以下代码：

```
mybase = 1e17;

sum1 = mybase + sum(1e-4*ones(2^14,1)) - mybase
sum2 = mybase - mybase + sum(1e-4*ones(2^14,1)) 
```

你应该得到：

```
sum1 =

     0

sum2 =

    1.6384 
```

即使总和只是重新排列，它们也会产生不同的数字。如果你玩弄它，你会发现 MATLAB 将数字从左到右相加，当数字的大小相差很大时，就会出现问题。由于 1.6384 是 1e17 的一小部分，我们可能认为它根本不是真正的错误……但显然答案是错误的，这完全是因为我们的总和的顺序。

为什么这在这里相关？正如我们之前提到的，如果 MATLAB 选择并行化操作，那么问题的每个部分将同时计算然后合并。根据许多事情（问题大小、计算机正在做的其他事情等），这些片段可能会以不同的顺序添加。这意味着结果会略有不同。如果您在我的版本（R2012a）上将矩阵设置为相同大小，那么您可能会得到相同的答案......或者您可能不会。此外，这将取决于大小。

这种行为是一个“功能”，即使使用时我也得到了相同的答案`maxNumCompThreads(1)`

# iphone - 是否有通过打开应用程序一部分的 web 视图创建链接？

> ID：11297862
> 
> 赞同：1
> 
> 时间：2012-07-02T16:47:56.700
> 
> 标签：iphone, ios, three20

例如：facebook 应用程序基本上只是一个使用 html5 的 webview，那么当您尝试在某人的墙上写东西时，它如何链接到默认消息编辑器之类的东西？我知道该应用程序的一部分可能正在使用 Three20。那么他们是否只是使用他们的应用程序 url 链接到应用程序的那一部分？（例如 fb://profile/122605446）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:56:53.550

是的，您可以使用`UIWebView`委托方法`webView:shouldStartLoadWithRequest:navigationType:`方法来做到这一点。您将需要使用自定义 URL 方案来触发您的自定义代码，否则您让它正常通过。所以在你的例子`fb`中是自定义方案。使用 URL 的其余部分导航到用户 122605446 的配置文件屏幕。

这里有一些示例代码可以提供帮助：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    NSURL *url = request.URL;
    NSString *scheme = [url scheme];
    if ([scheme isEqualToString:@"fb"]) {
        //Do something with the rest of the url and take any action you like.
    }
    else {
        return YES;    
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:52:50.837

是的，你可以这样做。查看[UIWebViewDelegate Protocol Reference](http://developer.apple.com/library/IOs/documentation/UIKit/Reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webView%3ashouldStartLoadWithRequest%3anavigationType%3a)，具体来说`webView:shouldStartLoadWithRequest:navigationType:`

将`NSURLRequest`在单击链接时通知您。您可以在链接中有特定的参数，并且根据您可以自定义处理要在 iOS 应用程序中打开的视图的参数。`NO`或者，如果您想阻止加载请求，您只需返回此方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:53:14.420

UIWebViewDelegate 有一个名为`webView:shouldStartLoadingRequest:navigationType`. 您可以使用此方法拦截某些链接、按钮点击等。您也可以通过这种方式创建自己的链接：

`<a href="myApp://dosomething">Click!</a>`委托方法的第二个参数现在有一个 NSURLRequest，其 URL 是“myApp://dosomething”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T16:52:17.050

您可以在您的应用程序中简单地注册多种 url 类型（或仅一种，fb://）。

然后解析 url 并根据收到的 URL 打开应用程序的不同部分。

请参阅[http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)以获得良好的概述和教程。

（在这种情况下，应用程序中的视图是否用 HTML5 编写并不重要。）

# javascript - 使用 Javascript 的电影或幻灯片创建者

> ID：11297864
> 
> 赞同：2
> 
> 时间：2012-07-02T16:47:59.703
> 
> 标签：javascript, animation, css, open-source

我正在寻找一个开源 JS 工具，它使用户能够在一组幻灯片上创建动画，并将该动画作为具有特定时间范围的电影播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:48:09.470

“Javascript MotionJPEG/AVI Builder”与 Firefox 配合得很好。但似乎它们是 Google Chrome 和 IE 的问题。我认为您还可以构建 Java 或 python 扩展并通过 AJAX 发送幻灯片。但这是很多工作：p

[http://ushiroad.com/mjpeg/](http://ushiroad.com/mjpeg/)

# sublimetext2 - Sublime Text (v 2.0) - 如何在括号后的新行上停止自动缩进？

> ID：11297868
> 
> 赞同：4
> 
> 时间：2012-07-02T16:48:26.413
> 
> 标签：sublimetext2, indentation, auto-indent

我正在尝试从 Notepad++ 跳转到 Sublime Text 2。但是一个问题是阻止我这样做：

在 CSS、JavaScript 或 PHP 中工作时 - 每当我输入一个括号并按 [ENTER] 时，都会添加一个额外的缩进。例如，如果我输入括号并按 Enter，下面会显示插入符号结束的位置：

```
 {
        | 
```

我需要插入符号出现在与括号相同的水平点，如下所示：

```
 {
    | 
```

我试过弄乱缩进设置无济于事。这是我当前的用户设置：

```
{
"auto_indent": true,
"auto_match_enabled": false,
"bold_folder_labels": true,
"color_scheme": "Packages/Color Scheme - Default/Twilight.tmTheme",
"detect_indentation": false,
"font_face": "Courier New",
"font_size": 10,
"highlight_modified_tabs": true,
"ignored_packages":
[
    "Vintage"
],
"indent_to_bracket": false,
"line_padding_bottom": 1,
"line_padding_top": 1,
"smart_indent": false,
"trim_automatic_white_space": false
} 
```

更新：如果我将**auto_indent**设置为**false**，这会产生不同的问题。在这种情况下，插入符号将始终放置在行首。例如

```
 {
| 
```

我也尝试过使用 Packages/JavaScript 中的文件，但无济于事。

真的很感激一个解决方案，因为我真的很想开始使用这个编辑器！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:25:00.690

为了防止在例如 Ruby 中“智能”缩进或自动下一级/额外级别缩进，您需要编辑`%AppData%\Sublime Text 2\Packages\Ruby\Miscellaneous.tmPreferences`文件，而不是`%AppData%\Sublime Text 2\Packages\Default\Indentation Rules.tmPreferences`文件，尽管`increaseIndentPattern`两者都存在类似的设置。也就是说，编辑后者（例如，注释掉内部的标签）不会产生任何效果。适用于版本 2.0.1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:35:46.730

我发现如果你使用 SHIFT+Enter，你会得到你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T17:16:30.977

将 的值更改`auto_indent`为`false`。那会为你解决的！

# python - 如何在 django 中禁用缓存以进行开发？

> ID：11297873
> 
> 赞同：15
> 
> 时间：2012-07-02T16:48:42.220
> 
> 标签：python, django

在我的一些模板中，我使用`{% cache %}`模板标签来缓存某些部分，但对于开发，我不希望缓存任何内容。我尝试使用设置变量在单独的设置文件中将 dev 的缓存过期时间设置为零，并使用 a 调用它`context_processor`，尽管它不起作用。

有谁知道禁用开发环境缓存的方法？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-02T16:49:44.733

您可以使用 django 虚拟缓存进行开发：

```
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.dummy.DummyCache',
   }
} 
```

[https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs/#dummy-caching-for-development](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs/#dummy-caching-for-development)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:51:25.977

确保永远不会缓存您的媒体文件（包括样式表）可能是个问题。这是一种对我有用的方法：

[http://lee-phillips.org/djangoStatic/](http://lee-phillips.org/djangoStatic/)

# python - Python SocketServer 适用于 localhost 但不适用于服务器

> ID：11297875
> 
> 赞同：4
> 
> 时间：2012-07-02T16:48:51.177
> 
> 标签：python, sockets

下面是我目前使用的代码：

```
#! /usr/bin/python
print 'Content-type: application'
print '\n\n'

import SocketServer
import cgitb
cgitb.enable()

class MyTCPHandler(SocketServer.BaseRequestHandler):
    """
    The RequestHandler class for our server.

    It is instantiated once per connection to the server, and must
    override the handle() method to implement communication to the
    client.
    """

    def handle(self):
        # self.request is the TCP socket connected to the client
        self.data = self.request.recv(1024).strip()
        print "{} wrote:".format(self.client_address[0])
        print self.data
        # just send back the same data, but upper-cased
        self.request.sendall(self.data.upper())
        self.request.sendall('Data Received')

if __name__ == "__main__":
    HOST, PORT = "localhost", 9989

    # Create the server, binding to localhost on port 9989
    server = SocketServer.TCPServer((HOST, PORT), MyTCPHandler)

    # Activate the server; this will keep running until you
    # interrupt the program with Ctrl-C
    server.serve_forever() 
```

该代码在本地主机上按预期工作，但在公共服务器上无响应。

此外，执行代码两次会导致以下错误消息：

> 错误：（98，'地址已在使用'）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:59:54.020

我认为问题在于您绑定到`"localhost"`，即在环回接口上。尝试替换`"localhost"`为您要绑定的公共 IP 地址。如果您不确定那是什么，请在命令行输入 ifconfig；选择不在指定用于私人使用的任何 IP 块中的地址（即，不以 10\. 或 192.168\. 等开头）。

我不确定它是否会专门与 TCPServer 一起使用，但通常需要您绑定到特定接口的软件将接受`"0.0.0.0"`所有接口，或者空字符串以达到相同的效果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T16:56:22.990

> 错误：（98，'地址已在使用'）

你需要这个：

```
socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1) 
```

* * *

> 但在公共服务器上无响应。

通常在共享主机的情况下，您无法通过创建套接字来完成。在任何情况下，您都可以尝试以下方法，看看是否有帮助：

```
HOST, PORT = "", 9989 # or (public_IP,9989) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-12T05:53:22.007

您必须`"localhost"`按`gethostbyname()`功能使用：

`server = SocketServer.TCPServer((socket.gethostbyname(HOST), PORT), MyTCPHandler)`

但是您必须记住，有些机器不理解`"localhost"`，您必须使用本地主机 IP 地址`127.0.0.1`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-02T16:57:20.523

您不能运行它两次，因为您有一个静态端口地址 (9989)。只能有一个监听器绑定到一个端口。该端口可以有多个传入连接，但只有一个侦听器。

另外，您是否检查了防火墙设置。无论您的 python 服务器在哪里运行，防火墙都必须授予端口 9989 接受传入连接的权限。此外，如果您的服务器位于集线器后面，则必须告知集线器哪个主机将处理端口 9989。

# javascript - 拉斐尔命中检测

> ID：11297877
> 
> 赞同：2
> 
> 时间：2012-07-02T16:48:53.703
> 
> 标签：javascript, html, svg, raphael

我正在尝试确定何时将新创建的路径拖到另一条路径上。我已经尝试了一些东西，但没有任何东西可以可靠地工作。

onDragOver - 我尝试将 onDragOver 事件用于目标路径，但这似乎永远不会被调用。

getElementsByPoint() - 这是非常不可靠的。这将返回我的目标大约五分之一。

我在[这里有一个小提琴](http://jsfiddle.net/acabler/Uk765/43/)可以显示问题。（我意识到偏移量略有偏差，但它仍然显示问题。）

要查看问题，请从底线拖到顶部。一旦超过顶行，应该打印一条控制台消息，但这只是有时发生。

我想知道以下几点：1）我做错了吗？2）有没有办法让它工作？3) Raphael 中是否有已知的错误阻止它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:31:59.590

[Graphiti](http://draw2d.org/graphiti/jsdoc/#!/example)是 raphaelJS 的抽象，确实有一个针对线/折线和曲线的 hitTest。

# java - 使用 READ BINARY 读取超过 256 个字节

> ID：11297880
> 
> 赞同：11
> 
> 时间：2012-07-02T16:49:10.543
> 
> 标签：java, smartcard

我正在尝试使用 javax.smartcardio读取智能卡（[德语 Gesundheitskarte ）](http://de.wikipedia.org/wiki/Elektronische_Gesundheitskarte)

在 EF“PD”的[定义](http://imgur.com/b54eq)中，它的长度被指定为 850 字节。内容应该是[此处指定的 gzip 压缩的 ISO5589-15 编码 XML 字符串](http://www.cardwerk.com/smartcards/smartcard_standard_ISO7816-4_6_basic_interindustry_commands.aspx#chap6_1)

作为我发送的 CommandAPDU

```
00 B0 00 00 00 
```

获取前 256 个字节。发送后

```
00 B0 00 FF 00 
```

我得到接下来的 256 个字节。

但是我怎么得到剩下的呢？

我怎么知道二进制数据何时结束？

[德国规范第 1 部分](http://www.gematik.de/cms/media/dokumente/release_0_5_3/release_0_5_3_egk/gematik_eGK_Spezifikation_Teil1_V2_2_0.pdf)| [德国规范第 2 部分](http://www.gematik.de/cms/media/dokumente/release_0_5_3/release_0_5_3_egk/gematik_eGK_Spezifikation_Teil2_V2_2_0.pdf)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-02T17:28:46.417

`READ BINARY`APDU 允许**2**个字节作为文件偏移量，在 P1 和 P2 中编码，并使用 Le 作为长度，作为`READ BINARY`响应中的字节数。P1 是*高字节*，或最高有效字节。然而，P1 的最高位被保留以指示 P1 是否还包含一个*短文件标识符*。`0`如果您已经在读取文件，它应该保持在值，从而使您的最大偏移量为 32Ki - 1。

我无法阅读您链接的规格，但我们假设`READ BINARY`您卡上的 APDU 以相同的方式工作。

您读取前 256 个字节的命令似乎是正确的，注意这`Le==0x00`表示读取了 256 个字节。

要读取从偏移量 256、512 等开始的字节，请开始递增 P1，例如：

```
00 B0 01 00 00
00 B0 02 00 00
00 B0 03 00 00 
```

要读取从偏移量 257 (0x101) 开始的 256 个字节：

```
00 B0 01 01 00 
```

偏移量 600 (0x258)：

```
00 B0 02 58 00 
```

在您的代码中，如果您使用 Java`int`来存储偏移量，您通常最终会使用以下内容递增 P1：

```
int offset;
int P1, P2;

while (continueReading)
{
    // ...
    P1 = (offset >> 8) & 0xFF;
    P2 = offset & 0x00FF;
    // ...
    // send APDU
} 
```

如何指示文件的大小取决于实现。通常，您可以从 EF ( ) 上的 SELECT 返回的文件控制信息 (FCI) 结构中获取文件大小`00 A4 00 00 02 fileId`。然而，文件的大小也可以嵌入到文件的内容中。如果可能，您不应依赖状态字来告诉您文件的大小。

* * *

**加法：Le、Ne 和奇数 INS**

重要的是，您只能根据您在响应数据 (RDATA) 中*实际接收到的字节数来增加偏移量。*请注意，如果 P3 = Le，则 Le 编码 Ne，这是响应数据的*最大*大小。你收到的可能少于这个。

如果文件大小为 32Ki 或更大，则需要使用带有奇数 INS ( `B7`) 的 READ BINARY 来读取 32Ki 以上的数据。在这种情况下，RDATA 也可能包含开销。显然，这反过来可能会影响偏移计算以及要读取到文件末尾的计算。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T17:28:29.920

偏移量在`P1`&中`P2`，尽管最高位用于指示您要选择具有给定 SFI 的内容。所以你也可以使用`P1`字节。之后，您将不得不向`READ BINARY with an odd INS`( `B1`) 移动。

因此，您最多可以使用普通读取二进制文件读取 2^15 - 1 个字节。那是 32Ki - 1。当然还有额外的几个字节，因为 APDU 返回的字节。

我总是使用以下方法从智能卡中读取文件： 1 确定文件大小，例如使用 SELECT by FILE ID ( ) 返回的 FCI（文件控制信息）`00 A4 02 00 02 ${FILE_ID}`，您需要解析响应。然后每次将偏移量增加*返回的字节数。*永远不要询问超过最大文件大小，因为大多数卡的行为不同，没有定义或完全错误）。

进阶话题：如果使用`READ BINARY with ODD INS`，每次增加offset都需要减去DO的header。在这种情况下，读到最后会有点麻烦，因为您需要将标头的开销添加到`Le`字节中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-31T14:29:22.357

Maarten Bodewes 对 IMO 的一个小补充，非常有用的回答是关于读取更大的文件，以及 stajo 建议使用扩展 Le。我希望这可以为其他人节省一些时间和精力。

尝试使用 Le 进行长读很棘手：

*   扩展 Le 也需要使用扩展 Lc。
*   根据标准，扩展 Lc 不能为 0，因此您不能从偏移量 0 开始
*   如果你的 Lc 不是 0，你需要使用“B1”INS。
*   正如 Maarten Bodewes 解释的那样，B1 使得计算正确尺寸变得更加复杂。

除此之外，您首先需要了解该卡是否完全支持扩展Lc/Le；有关此的信息分布在 ATR 历史字节、EF.ATR 和当前 EF 信息中。

因此，虽然理论上可以从单个文件中读取大量数据，但在实践中需要付出很多努力，而且您也无法使用一个命令读取整个文件。

在您努力使用扩展 Le 进行阅读之前，请考虑以上内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T11:08:19.610

如果卡支持它，您可能可以使用扩展长度格式。如果您在 lc/le 字段中指定 00，您可以使用以下两个字节作为长度

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-19T23:53:17.627

我尝试使用上述示例读取护照的 DG2 文件，但最后我无法获取图像文件。这是我在 kotlin 中所做的：

```
do {
            val offsetStart = (offset shr 8) and 0xFF
            val offsetEnd = offset and 0xFF

            LogUtils.d(offsetStart)
            LogUtils.d(offsetEnd)
            var offsetStartString = if(offsetStart < 10){
                "0$offsetStart"
            }else {
                "$offsetStart"
            }
            val offsetEndString = if(offsetEnd < 10){
                "0$offsetEnd"
            }else {
                "$offsetEnd"
            }
            LogUtils.d(offsetStartString)
            LogUtils.d("00B0${offsetStartString}${offsetEndString}00")
            val commandByte = toByteArray("00B0${offsetStartString}${offsetEndString}00")
            resultCommand = this.nfc.transmit(commandByte,commandByte.size)
            val resultHex = StringUtil.toHexString(resultCommand)
            LogUtils.d(resultHex)
            baos.write(resultCommand)
            offset += 1
            LogUtils.d(resultCommand.size)
        } while (resultCommand.size > 4) 
```

# java - JavaFX 场景构建器：具有与 AnchorPane 不同的根节点

> ID：11297889
> 
> 赞同：5
> 
> 时间：2012-07-02T16:49:37.443
> 
> 标签：java, javafx

JavaFX 场景构建器开始编辑 AnchorPane。JavaFX 不要求根节点是 AnchorPane，在某些情况下最好使用另一个类。
有没有办法在 JavaFX Scene Builder 中更改根容器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T17:18:19.647

选择菜单项：

> 文件 | 带有根容器的新功能

使用 SceneBuilder 的 b44，可用选项包括锚窗格、边框窗格或堆栈窗格

您也可以直接在文本编辑器中编辑 fxml 以将根窗格设置为例如 Flow Pane，然后将编辑后的 ​​fxml 加载到 SceneBuilder 并且 SceneBuilder 将识别它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-27T18:05:37.230

要将另一个窗格设置为 root 而不是下面可用的三个替代方法`New with root container > ...`（不直接编辑 fxml），请执行以下操作：

1.  插入您想要作为新根的窗格，作为您拥有的任何旧根的子级。
2.  将您拥有的任何其他内容作为旧根的直接后代放入新根中。
3.  标记新根并从菜单中选择`Edit > Trim document to selection`。

瞧！

提示：使用菜单选择：`Arrange > Wrap in > ...`和`Arrange > Unwrap`在子项周围插入或删除容器。

# java - 将 d.getDay() 转换为星期一、星期二

> ID：11297895
> 
> 赞同：-3
> 
> 时间：2012-07-02T16:49:48.743
> 
> 标签：java, android, date

我得到了 d.getDay，但它给了我周日的 0，有没有直接的方法来获得周日而不是 0。我已经搜索但找不到任何东西。我不想比较 0 然后用“Sun”创建字符串等等......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:53:55.910

采用[`SimpleDateFormat`](http://docs.oracle.com/javase/1.6/docs/api/java/text/SimpleDateFormat.html)

```
//US locale is used 
DateFormat dateFormat = new SimpleDateFormat("EEE", Locale.US);
//dateFormat.setTimeZone(); optionally specify timezone
String day = dateFormat.format(dateInstance); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:59:27.577

这应该这样做。

```
SimpleDateFormat sdf = new SimpleDateFormat("EEE");
String dayString = sdf.format(date)); 
```

`SimpleFormat`如果您想获取其他语言的日期名称，请使用自定义构造函数（请参阅[此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html#SimpleDateFormat%28java.lang.String,%20java.util.Locale%29)的文档）：示例：

```
SimpleDateFormat sdf = new SimpleDateFormat("EEE",Locale.FRENCH);
String dayString = sdf.format(date)); 
```

将以法语返回当天的名称。

# c++ - 静态成员函数的未定义引用错误

> ID：11297897
> 
> 赞同：-1
> 
> 时间：2012-07-02T16:49:55.153
> 
> 标签：c++, undefined-reference

> **可能重复：**
> [C++：对静态类成员的未定义引用](https://stackoverflow.com/questions/272900/c-undefined-reference-to-static-class-member)

我的目标是制作一个可以容纳对象的容器对象。我决定使用指针向量来做到这一点。

除了容器对象，还有一个抽象基类，它有一个函数 print。这是一个虚函数，因为派生类将能够覆盖该函数。最后我从这个派生类创建一个对象并尝试将它存储在容器中。

下面是包含抽象类定义的头文件

元素.h

```
#ifndef ELEMENT_H
#define ELEMENT_H

using namespace std;

//Abstract class with pure virtual functions
class Element{
public:
    virtual void print()=0;     
};
#endif 
```

下面我正在尝试为容器创建一个模板类。连同成员函数来操作容器，如反转顺序、打印等。

元素.h

```
#include <vector>
#include <Element.h>

using namespace std;

//Creating a class which will hold the vector of pointers
class Elements{

    public:
    static vector<Element*> elements;

    static void addElement(Element*e){
        elements.push_back(e);
    }

    static unsigned int size() {
        return elements.size();
    }
    static void print_all() {
    for (int i=0;i<elements.size();i++){
        elements[i]->print ();

        }
    }
    static void reverse(){
        int i=0;
        int j=elements.size()-1;

        while(!(i==j)&&!(i>j)){
            Element*temp;
            temp=elements[i];
            elements[i]=elements[j];
            elements[j]=temp;
            i++;
            j--;
        }
    }
}; 
```

下面我将创建一个抽象类 Element 的实例以及一些成员函数。我正在尝试构建的容器将容纳这种对象。

伊赫

```
#include <iostream>
#include <istream>
#include <ostream>
#include <vector>
#include <Element.h>

using namespace std;

class I:public Element{
int myInteger;

public:
I();
I(int);
void setI(int);
int getI(void);
void print();
};

I::I(int inInteger){
setI(inInteger);}

void I::setI(int inInteger){
myInteger=inInteger;
}

int I::getI(){
return myInteger;
}

void I::print(){
   cout<<"\nThe value stored in the Integer:"<<getI();
} 
```

下面我尝试创建类型 I 的对象。在其中输入一个值，获取其输出。然后将它们“推”入容器中。主文件

```
#include <iostream>
#include <istream>
#include <ostream>
#include <vector>
#include "Element.h"
#include "I.h"
#include "Elements.h"

using namespace std;

int main() {
int userInt;
Element*element;
cout<<"enter an integer";
cin>>userInt;
element = new I(userInt);
element->print();    

Elements::addElement(element);

Element*element2;
cout<<"enter an integer";
cin>>userInt;
element2=new I(userInt);
element2->print();

Elements::addElement(element2);

Elements::print_all();
Elements::reverse();
int i=Elements::size();
cout<<i; 
```

}

我正在使用 Codeblocks 10.05 进行编译，使用 gcc GNU 编译器。当我构建上面的 main.cpp 时，它给了我错误：'undefined reference to 'Elements::elements' in Elements.h in each funcions: addElement,size,....etc

这是我第一次在这个论坛上发帖。非常欢迎任何帮助和/或评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:07:50.740

这是正当的，因为您声明`elements`了，但没有定义它。为了做到这一点，只需在类之后添加一个定义：

```
vector<Element*> Elements::elements; 
```

另外，您应该在单独的文件（*.hpp 和 *.cpp）中分离您的标头和定义，并且不要使用仅具有公共静态成员的类，这是有名称空间的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:57:49.213

您已在类声明中声明*。* `Elements::elements`它是一个静态数据成员，所以现在您必须在某个源文件中*定义它。*例如，

```
vector<Element::Element*> Elements::element; 
```

这需要在一个且唯一的源文件中的文件范围内。否则，您将违反单一定义规则。

# javascript - 嵌入在“index.html”中的“index.swf”在一页中显示同一网站两次。HTML 标题标签/属性也显示值“未定义”

> ID：11297898
> 
> 赞同：0
> 
> 时间：2012-07-02T16:50:03.343
> 
> 标签：javascript, html, css, flash

我当前的网站有问题。托管此 Online 后，.SWF 将显示在页面顶部，大致覆盖 1/4，并再次显示在底部，覆盖 3/4。如果我放大和缩小，页面的下半部分会稍微覆盖顶部，但顶部仍然显示。好像.SWF 已经嵌入了两次。这是我的代码；

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="author" content="Kush Kouture" />
<meta name="keywords" content="Kush Kouture" />
<meta name="description" content="Kush Kouture" />

<title>Kush Kouture</title>

<script type="text/javascript" src="swfobject.js"></script>
<script type="text/javascript" src="swfaddress.js"></script>
<script type="text/javascript" src="swffit.js"></script>
<script type="text/javascript">
var flashvars = {};
flashvars.url_config = "xml/configuration_site.xml";
flashvars.initServices = true;
var params = {};
params.allowfullscreen = true;
params.allowScriptAccess = "always";
var attributes = {};
attributes.id = 'flashObject';
attributes.bgcolor = '#000000';

swfobject.embedSWF("flash/index.swf", "Alternative", "100%", "100%", "11.0.0", false, flashvars, params, attributes);
</script>

<style type="text/css">
/* hide from ie on mac \*/
html {
height: 100%;
overflow: hidden;
}

#flashcontent {
height: 100%;
}
/* end hide */

body {
height: 100%;
margin: 0;
padding: 0;
background-color: #ffffff;
}
p {

font-size: 10px;
font-family: Verdana;
line-height:17px;
color:#ffffff;

} 
.style1 {
font-size: 11px;
font-family: Verdana;
color:#ffffff;
text-transform:uppercase;
}
</style>

</head>
<body>

<div id="flashContent>
<object id="flashObject" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"           codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=11,0,0,0" width="100%" height="100%">
<param name="movie" value="flash/index.swf" />
<param name="wmode" value="transparent" />
<param name="width" value="100%" />
<param name="height" value="100%" />
<param name="scale" value="noscale" />
<object type="application/x-shockwave-flash" data="flash/index.swf" align=""      scale="noscale" wmode="transparent" width="100%" height="100%">
</object>
</object>
</div>

<div id="Alternative"> 
<p style="color:#999999">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Kush Kouture | You require the latest version of Adobe Flash Player in order to view this site. Please use the button below to download the latest version.</p>
<p><a href="http://get.adobe.com/flashplayer/"><img src="flash.jpg" alt="Get Adobe Flash player" /></a></p>
</div>

</body>
</html> 
```

* * *

我还注意到页面标题显示正确，但旁边的值“underfined”..

例如。应该是“主页”，显示“主页未定义”

对于上述问题，我非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:34:08.940

一个问题可能是您没有正确关闭报价

```
<div id="flashContent> 
```

应该

```
<div id="flashContent"> 
```

我在这里看不到菜单代码，你也可以发布吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:12:58.940

这很有意义，因为您已经将 .swf 嵌入了`<object>`标签和 .swf 中`SWFObject`。只需使用一个，您就会看到一个.swf 实例。

# winforms - Winforms 应用程序中的键盘处理

> ID：11297899
> 
> 赞同：0
> 
> 时间：2012-07-02T16:50:03.823
> 
> 标签：winforms, events, keyboard, focus

我正在构建一个大致如下所示的 WinForms 应用程序：

![在此处输入图像描述](../Images/7a89784b75bc00fb12f358fb0c4cfb52.png)

有一个表单，带有菜单、工具栏、状态栏、导航树、自定义绘图画布（这是一个接受键盘输入并绘制文本并呈现插入符号的用户控件）和一个查找面板，它允许用户搜索文本。

我很难让这些行为发挥作用：

1) 查找面板上的加速键（例如，'c' 表示大小写匹配，'w' 表示整个单词）可防止将这些字符输入到画布中，即使画布具有焦点也是如此。

2）当焦点在任何地方但画布应将焦点返回到画布时，按 ESC。特别是，当 Find 文本框具有焦点时，这应该有效。这可以通过将键盘挂在一个点而不是每个可能的焦点控件来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:58:00.480

如果您有多个控件竞争键盘输入，请将 Forms 设置为[`KeyPreview Property`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview.aspx)以便`True`在 Form 的 KeyPress 事件处理程序中处理您的 KeyPress 事件。然后，您可以相应地引导键盘输入。

从上面的 MSDN 链接：

> 获取或设置一个值，该值指示在将事件传递给具有焦点的控件之前窗体是否将接收键事件。

* * *

看看这样的东西是否适合你，它仍然允许你同时执行+ 加速键，但如果它有焦点并且被按下`Alt`，它会将焦点设置回用户控件：`Alt`

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        if (ActiveControl.Name == userControl11.Name )
        {
            if (e.Alt)
            {
                e.Handled = true;
                userControl11.Focus();
            }
        }
    } 
```

# hyperlink - Prestashop - 创建产品所属类别的链接

> ID：11297900
> 
> 赞同：3
> 
> 时间：2012-07-02T16:50:04.677
> 
> 标签：hyperlink, categories, prestashop

我在 prestashop 相当新。在主页上，我使用的是“特价中心”模块，它只显示正在销售的产品列表。我想显示产品属于哪个类别。我编辑了 SpecialsCenter.tpl 并使用了以下代码：

```
<a href="#">Category: {$Specials.category}</a></h2> 
```

这会正确显示特定产品所属的相应类别名称。参见图片：[产品类别](http://i.imgur.com/YVY38)。我唯一遇到的问题是创建指向该类别的链接。应该相当简单，但 Prestashop 论坛似乎如此空置。所有问题。没有答案。用于链接到类别页面的变量是什么？

谢谢你的帮助。

做了更多的研究......这就是我现在的位置......

```
<a href="{$link->getCategoryLink({$Specials.id_category}, {$Specials.category})}">Category: {$Specials.category}</a> 
```

所以这会输出这个链接：mysiteurl/0-laptops - 这部分是正确的，除了**类别 ID**是错误的。笔记本电脑类别的 id 是 4。应该是：mysiteurl/ **4** -laptops。所以第一个 smarty 标签`{$Specials.id_category}`是不正确的。我需要知道如何使用某种变量来绘制类别 ID。所以它应该是这样的：

```
<a href="{$link->getCategoryLink('category-id', {$Specials.category})}">Category: {$Specials.category}</a> 
```

再次感谢！！！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T18:03:21.073

找到的解决方案：啊！谢谢 Niclas Larsson - 这很有帮助！我早该想到的！:) 你是对的，它没有拉“id_category”正确的用法如下：

```
<a href="{$link->getCategoryLink({$Specials.id_category_default} , {$Specials.category})}">{$Specials.category}</a> 
```

# sql-server - 消息 102，级别 15，状态 1，

> ID：11297901
> 
> 赞同：0
> 
> 时间：2012-07-02T16:50:15.487
> 
> 标签：sql-server, sql-server-2005

我在 SQL Server 2005 中编写了以下存储过程，并收到错误消息：

> 消息 102，级别 15，状态 1，过程 sp_InsertCustTrans，第 12 行
> “@TrID”附近的语法不正确。

我的存储过程是：

```
ALTER PROCEDURE [dbo].[sp_InsertCustTrans] 
-- Add the parameters for the stored procedure here
@CuID int, @TrType nvarchar(10), @TrAmt int
AS
BEGIN
SET NOCOUNT ON;
    declare @TrID int;
    Select @TrID = MAX(TransactionID) from CustTrans;
    if Isnull(@TrID)
        @TrID = @TrID + 1
    else
        @TrID = 1

-- Insert statements for procedure here
if (@TrType = 'Deposit')
    begin
        INSERT INTO CustTrans (TransactionID, TransactionDate, CustID, TransactonType, CreditAmount)
            Values(@TrID, GetDate(), @CuID, @TrType, @TrAmt);
    end
else
    begin
        INSERT INTO CustTrans (TransactionID, TransactionDate, CustID, TransactonType, DebitAmount)
            Values(@TrID, GetDate(), @CuID, @TrType, @TrAmt);
    end
END
GO 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T16:54:35.720

所有赋值操作都必须以关键字开头`set`。

```
Set @TrID = @TrID + 1 
```

正如伊万指出的那样，您也错误地使用了 IsNull 。正确的用法是：

```
If @TrID Is Null 
```

# shell - 远程外壳，将脚本的输出更改为 csv

> ID：11297904
> 
> 赞同：1
> 
> 时间：2012-07-02T16:50:23.380
> 
> 标签：shell, csv

我目前有一个 shell 脚本，其中有一段代码运行远程 shell 命令，如下所示：

```
grep -v "^[     ]*#" ${CONFIG_FILE} |
while read SERVER USER LOGDIR
do
{
echo "Stats for" $date
echo "${USER}"
echo "iTunes:"
time /bob/shared/ted/remote/rssh ${SERVER} "gzgrep -c \"iTunes Music\" ${LOGDIR}/*${date}*.gz | awk '-F:' '{total+=\$NF}END{print \"Total=\" total}'" 2>&1
echo
echo "Default"
time /bob/shared/ted/remote/rssh ${SERVER} "gzgrep -c \"Default Player\" ${LOGDIR}/*${date}*.gz | awk '-F:' '{total+=\$NF}END{print \"Total=\" total}'" 2>&1
echo
echo "The Rest"
time /bob/shared/ted/remote/rssh ${SERVER} "gzgrep -c \"Junk\"     ${LOGDIR}/*${date}*.gz | awk '-F:' '{total+=\$NF}END{print \"Total=\" total}'" 2>&1
} </dev/null 2>&1

done 2>${ERROR_FILE} >${STATS_FILE} 
```

这给了我这样的输出：

```
Stats for 20120628
Rich
iTunes:
Total=0

real 0m2.09s
user 0m0.22s
sys  0m0.03s

Default:
Total=0

real 0m2.03s
user 0m0.23s
sys 0m0.00s

The Rest:
Total=0

real 0m2.03s
user 0m0.23s
sys 0m0.00s

Stats for 20120628
Ian
iTunes:
Total=2

real 0m21.44s
user 0m0.22s
sys 0m0.00s

Default:
Total=2

real 0m21.48s
user 0m0.21s
sys 0m0.02s

The Rest:
Total=0

real 0m2.03s
user 0m0.23s
sys 0m0.00s 
```

等等等等……

我想要的是像这样以 CSV 格式输出：

```
Rich,0,0,0
Ian,2,2,0 
```

修改上述代码以获得我需要的输出格式的最简单方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:56:10.257

```
grep -v "^[     ]*#" ${CONFIG_FILE} |
while read SERVER USER LOGDIR
do
{
echo "${USER},"
time /bob/shared/ted/remote/rssh ${SERVER} "gzgrep -c \"iTunes Music\" ${LOGDIR}/*${date}*.gz | awk '-F:' '{total+=\$NF}END{print total \",\"}'" 2>&1
time /bob/shared/ted/remote/rssh ${SERVER} "gzgrep -c \"Default Player\" ${LOGDIR}/*${date}*.gz | awk '-F:' '{total+=\$NF}END{print total \",\"}'" 2>&1
time /bob/shared/ted/remote/rssh ${SERVER} "gzgrep -c \"Junk\"     ${LOGDIR}/*${date}*.gz | awk '-F:' '{total+=\$NF}END{print total}'" 2>&1
} </dev/null 2>&1 | tr -d '\n'

done 2>${ERROR_FILE} >${STATS_FILE} 
```

我删除了多余的回声，附加了逗号并确保它在一行上。尝试一下。

如果您也不想要时间信息，只需删除所有`time`调用。

# git - 使用 git，我如何创建一个几乎没有历史记录的存储库克隆

> ID：11297905
> 
> 赞同：1
> 
> 时间：2012-07-02T16:50:25.333
> 
> 标签：git, repository, revision-history

我有一个 2 年历史的存储库，它最初是一个私有存储库，因此它包含在不同点的历史记录中：密钥文件、加密密钥、不同地方的大量图像集等，在存储库的历史记录中，所有这些都不再被追踪，但仍然存在于历史中。

由于我们引入了新的开发人员，源代码现在变得共享，我想从一个基本干净的存储库开始一个干净的开始。但是，在这个过渡期间，我可能还必须处理旧存储库，在两个存储库之间共享补丁/提交。

在 git 中摆脱以前的历史，同时保持~~向后兼容性~~，尽可能干净地在旧存储库和新的干净存储库之间共享提交的能力的最佳方法是什么？

目标：

1.  以新存储库中不可用的历史记录的方式进行敏感提交。
2.  允许新存储库中的全部功能（克隆、推送、获取，对 git 来说是正常的一切）
3.  最大化旧仓库识别来自新仓库的补丁/提交的能力
4.  [不太重要] 由于工作副本中不存在的古代提交中没有二进制文件，因此使新的 repo 更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:55:56.380

仅在现有存储库中创建一个新的、清晰的分支将无济于事：如果用户可以阅读此分支，他们还可以访问包含您的敏感信息的旧分支。为了克服这个问题，您必须创建一个对过去没有（或只有有限）知识的新存储库。

为此，我将执行以下操作：

*   获取你的 repo 的一个相对较新的状态（例如，最后一个标记的版本或类似的东西`V1.0`），并以此为开始创建一个**新**的repo ( `newrepo`)，供你的新开发人员使用。

*   然后，在您的机器上，添加一个[远程](http://linux.die.net/man/1/git-remote)调用`oldrepo`，指向保存旧敏感数据的旧存储库。

*   接下来，将所有的提交从`V1.0`最新的到最新的`oldrepo`提交[`cherry-pick`](http://linux.die.net/man/1/git-cherry-pick)到你的新仓库中。此时，您的新仓库与`oldrepo`没有脏历史的状态相同。

*   现在，从( )[克隆](http://linux.die.net/man/1/git-clone)一个裸仓库。您的所有开发人员都克隆并处理它。`newrepo``newrepo.git``newrepo.git`

如果涉及到取补丁等，`newrepo.git`反之亦然`oldrepo`，此操作将由**您**完成，即您的同事将您生成的所需补丁发送给您，`format-patch`并将`am`它们发送到旧仓库中。如果您在 中完成了一些修复`oldrepo`，您可以将`cherry-pick`它们重新放入`newrepo.git`并提供给您的开发人员。

这限制了`oldrepo`对您的访问，您的同事将永远不会看到任何敏感数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:21:48.273

您可以尝试的（我不知道这是否可行）是创建一个单独的分支来跟踪新开发，该分支从空提交（即没有父级）开始，然后将内容复制进去。然后合并分支回到旧主（手动）。之后，您应该能够在新分支上进行开发并将更改从它拉入旧分支。而且您不必将旧分支发布给其他人。

就像和图像一样，`O`原始分支在哪里，`C`是在新的无父分支中复制，`M`是手动合并，`m`是后续合并。

```
# -- # -- # -- O --- M ------------ m -- m
                    /              /    /
                   /              /    /
                  C -- # -- # -- # -- # -- # 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:16:10.927

这取决于您对“向后兼容性”的具体含义，但您应该能够指定一个`--depth 1`参数`git clone`（如[git-clone 手册页](http://git-scm.com/docs/git-clone)中所述）并获得可以共享*补丁的东西（尽管**提交*本身将无法通过您可能习惯的正常推/拉机制共享。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T21:03:53.970

使用 git branch 创建一个新分支。然后 git rebase 你的第一个到最后一个提交，以获得旧分支的无历史版本。

您可以随时返回旧分支以获取提交的具体细节。

# asp.net - 缓存时，关闭视图状态？

> ID：11297906
> 
> 赞同：0
> 
> 时间：2012-07-02T16:50:36.837
> 
> 标签：asp.net, c#-4.0

我有一个返回搜索结果（文本和图像）的页面。该页面有两个选项卡，一个加载公司和其他产品。

当我单击任一选项卡以加载结果时，似乎需要相当长的时间。我正在考虑缓存结果。关闭视图状态是否有助于提高性能/加载时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:01:39.143

必须禁用 ViewState，因为隐藏的输入字段可以存储非常大的数据，这可能会使页面膨胀并可能导致回发性能

阅读这篇文章作者给出了很好的解释[http://scottonwriting.net/sowblog/archive/2005/09/07/163107.aspx](http://scottonwriting.net/sowblog/archive/2005/09/07/163107.aspx)

我建议您对它们中的任何一个如何适合您的应用程序进行更多调查

# svn - 从特定标签创建 SVN 分支并合并到主干

> ID：11297910
> 
> 赞同：9
> 
> 时间：2012-07-02T16:50:41.293
> 
> 标签：svn, tags, branch

最近我们搬到了svn。

我这里有两个问题，

1.  我们已经发布并创建了标签 TAG1。一周后出现了生产问题，产品代码库是 TAG1，后来在主干上我们做了一些我们不想推送到生产的更改，所以最好的方法是从 TAG1 获取代码并进行更改，我们已经导出来自标签但无法提交的数据，我们不想提交到该标签，发布后需要一个单独的分支基于该分支创建另一个标签（TAG2），然后最终合并到主干。合并到主干不是问题。问题是如何从基于标签的代码创建分支并提交更改？

2.  我们每两个月发布一次，所有这些更改都直接在主干上进行，发布后我们创建一个 TAG 并继续下一个版本。另一端，我们将开始一个新项目 XYZ，该项目将在年底发布（日期尚未确定），在这里，这个分支需要从以前的 TAG 而不是从主干创建，因为已经对主干进行了一些更改，以便即将发布，我们如何才能实现它？

谢谢KV

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-02T16:57:44.097

```
svn copy your.repo.URL/tags/your-tag-name your.repo.URL/branches/your-new-branch-name -m "message" 
```

然后开始工作

```
svn checkout your.repo.URL/branches/your-new-branch-name 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-02T17:05:04.960

分支和标签是一回事：从一个 URL 和版本到另一个 URL 的廉价副本。

有关复制命令的参考，请参阅[http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.ref.svn.c.copy](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.ref.svn.c.copy)。你只需要：

```
svn copy http://svn.foo.com/project/tags/TAG1 http://svn.foo.com/project/branches/maintenance-TAG1 
```

# mysql - 在 MySQL 数据库中，如何添加新列并使其成为主键？

> ID：11297912
> 
> 赞同：0
> 
> 时间：2012-07-02T16:50:49.747
> 
> 标签：mysql, sql, primary-key

在 MySQL 数据库中，如何添加新列并使其成为主键？db 已经有四列，其中一列是主键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:52:10.527

```
alter table t1 add column col1 varchar(20);

alter table t1 add primary key (columnname); 
```

编辑：

如果你做“ `show create table tablename`”commmnd你会看到包括PK的结构，如果你想删除它你可以

`alter table tablename drop primary key`然后重新创建索引

另一种可能的解决方案是创建唯一索引它作为主键，只有唯一键让您可以决定它是否为空，并且每个表可以有多个。

```
alter table t1 add unique key (columnname); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:55:16.570

```
ALTER TABLE foo ADD COLUMN bar int, DROP PRIMARY KEY, ADD PRIMARY KEY(bar); 
```

如果您的表很大以加快处理速度，最好在一个查询中运行它。

# php - 复选框已选中且未分配新值

> ID：11297916
> 
> 赞同：0
> 
> 时间：2012-07-02T16:51:16.130
> 
> 标签：php

无论选择什么，它仍然为所有复选框分配值 1，而不是将选定的复选框更改为值 0。从语法的角度来看，这是正确的代码，但无论我不这样做，默认为 1看看为什么它没有将选定的框值更改为“0”

```
//Correct answer variables
$chkBox1 = '1';
$chkBox2 = '1';
$chkBox3 = '1';
$chkBox4 = '1';
$chkBox5 = '1';

if (isset($_POST['chkBox1'])) {

if ($chkBox1 == 'chkBox1Selected') {
$chkBox1 = '0';
}

}//End of chkBox1Selected logic

if (isset($_POST['chkBox2'])) {

if ($chkBox2 == 'chkBox2Selected') {
$chkBox2 = '0';
}

}//End of chkBox2Selected logic

if (isset($_POST['chkBox3'])) {

if ($chkBox3 == 'chkBox3Selected') {
$chkBox3 = '0';
}

}//End of chkBox3Selected logic 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T16:53:28.240

您的`if`陈述永远不会评估为`true`.

看一个复选框：

```
$chkBox1 = '1';

if (isset($_POST['chkBox1'])) {
    if ($chkBox1 == 'chkBox1Selected') {
        $chkBox1 = '0';
    }
} 
```

`$chkBox1`设置为`'1'`，并且它永远不会改变，所以它永远不会等于`'chkBox1Selected'`。

话虽如此，您不必担心复选框的值，因为**只有选中的复选框才会发送到服务器**。

从理论上讲，您可以这样做：

```
if (isset( $_POST['chkBox1'])) {
    $chkBox1 = '0';
} 
```

但是，如果您想读取复选框的值，您应该可以这样做：

```
if (isset( $_POST['chkBox1'])) {
    if ($_POST['chkBox1'] == 'chkBox1Selected') {
        $chkBox1 = '0';
    }
} 
```

或者，更简洁地说：

```
if( isset( $_POST['chkBox1']) && ($_POST['chkBox1'] == 'chkBox1Selected')) {
        $chkBox1 = '0';
} 
```

# git - 合并两个存储库（原始项目和没有历史的更改项目）

> ID：11297917
> 
> 赞同：5
> 
> 时间：2012-07-02T16:51:23.927
> 
> 标签：git, version-control, merge, git-svn

我有两个存储库：

*   Gephi（大型开源项目）托管在 github 上
*   我公司基于gephi的项目

7 个月前，当我们的项目开始时，有人在 github 上拍摄了 gephi 项目的快照并将其保存到企业 svn => 更改历史记录丢失

现在我决定将我们的项目移动到 git 存储库并将更改与原始项目合并

我现在已经使用 git-svn 从 svn 迁移了 git 存储库

我的文件在我们的项目开始之后没有更改历史记录

我可以将我们存储库的初始状态映射到原始存储库的状态吗？换句话说，我想开始将我们的更改从特定版本应用到原始存储库。

**更新：**

今天我发现了另一个障碍。架构优先：

![在此处输入图像描述](../Images/7bf2477d31f2f22a4fe66a8a650847f5.png)

*   红色分支是原始项目

*   `<alpha1>`并且`<alpha2>`是主项目的插件提交（与提交的代码无关`<E' E'' E'''>`）

*   in`<E'> <E''> <E'''>`是从主项目（红色）存储库添加的代码`<E>`（在每个提交 cca 三分之一的项目中`<E>`）

我已将红色和蓝色存储库合二为一。在第二个模式上，我有想要的状态。是否有可能做到这一点？（例如，`<E' E'' E''>`只从一个提交（`<E'>`）中制作，然后将该提交标记为从分支合并，`<ABCD>`然后`<alpha1 alpha2>`）

谢谢朱利安的回复。这似乎很有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T17:27:23.443

免责声明：我现在已经对此进行了测试，它似乎可以按预期工作（当然，假设我理解正确）。但是，仍然有很多地方可能出错。**绝对只在项目存储库的单独工作副本上尝试此操作，并确保在将其推送到任何地方之前检查所有内容。在执行此操作之前保留状态的完整目录备份。**

所以我假设你有两个独立的存储库。原始项目（Gephi）：

```
A---B---C---D---E
                ^ HEAD of Gephi 
```

还有您的项目，其第一个修订版看起来与原始项目的最后一个修订版相同：

```
E'---V---W---Y---...---Z
                       ^ HEAD of your project 
```

（可能有一些分支，但这并不重要。）

你想要的（如果我理解正确的话）是：

```
A---B---C---D---E---V---W---Y---...---Z 
```

您可以尝试以下方法。**同样，在您自己的独立工作树上执行此操作，并确保在将其推送到任何中央存储库之前一切都井井有条！**

在您自己的工作树目录中，获取原始 Gephi 存储库的头和对象：

```
git fetch /path/to/original/gephi 
```

如果您还没有克隆 Gephi 存储库，您不妨指定 github URL 而不是本地文件系统路径。

这将在您当前的工作树中导致以下情况：

```
A---B---C---D---E
                ^ FETCH_HEAD

E'---V---W---Y---...---Z
                       ^ HEAD 
```

我们并没有太大的改变。目前，这两个头和平共处，彼此完全独立，但您现在可以访问两个存储库中的对象并可以尝试将它们组合起来。

我们现在要丢弃 E'（它应该与 E 相同），而是将 E 作为项目第一次提交的父级，即 V。为此，您可以使用`git filter-branch`：

```
git filter-branch -f --parent-filter 'test $GIT_COMMIT = <V> && echo "-p <E>" || cat' 
```

分别用 V 和 E 的提交哈希替换`<V>`和。`<E>`要找出这些，您可以`git log`检查项目的提交，并且由于我们已经获取了它们，`git log FETCH_HEAD`因此可以检查 Gephi 的提交。

这将有效地将 V 直接连接到 E。

如果事实证明原始 Gephi 存储库的头部（即最新提交）不是您的项目所基于的，这甚至应该可以工作，这意味着 Gephi 中有新的提交，而您还没有（还没有？）已搞定。请确保，再次`<E>`用您所做的更改所基于的提交的哈希代替，而*不是*用头部。

相反，请确保用*您所做的第一个更改*`<V>`的哈希值替换。也许您的存储库不包含与 E 相同的 E'，但第一次提交已经包含对原始版本的更改。那么这个第一个提交哈希将是你的，而不是它之后的那个。*`<V>`*

 *总结最后两段：如果您的情况如下所示，上述命令也应该有效，例如：

```
A---B---C---D---E---F---G---H---I
                ^               ^ FETCH_HEAD
                point where your project branched off

V---W---Y---...---Z
^                 ^ HEAD
first change based on E 
```

只要确保使用在这种情况下有意义的提交哈希。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:47:41.247

听起来您可能想要调查[移植](https://git.wiki.kernel.org/index.php/GraftPoint)（或可能的[替换](https://www.kernel.org/pub/software/scm/git/docs/git-replace.html)）——这些方法的不同之处`filter-branch`在于`rebase`它们添加元数据以更改存储库的可见状态，而不是重写历史以实际影响更改。当您有人使用现有分支时，这很有用，因为它避免了从它们下面更改历史。

在您的情况下，您需要为 增加一个嫁接，作为额外的父母`E'`给予。`E`*

# python - 在 OSX 10.7.4 上删除一个版本的 python 而不是另一个版本的最轻松的方法是什么？

> ID：11297919
> 
> 赞同：2
> 
> 时间：2012-07-02T16:51:27.353
> 
> 标签：python, macos, uninstallation

几周前我不小心安装了 64 位 python，现在我的所有程序都默认跳转到它，而不是功能更强大的 32 位 python。有没有一种轻松的方法来卸载 64 位 python 而不是 32？

谢谢！

# swing - 如何滚动到 JScrollPane 中显示的文档中的给定位置

> ID：11297925
> 
> 赞同：1
> 
> 时间：2012-07-02T16:52:08.267
> 
> 标签：swing, jscrollpane

在具有 Java Swing 组件的应用程序中，我有`JTextPane`一个不可编辑的内部`JScrollPane`和一些其他字段，用户可以在其中输入一些条件。如果用户单击某个按钮或菜单项，则会在文档中搜索`JTextPane`满足给定条件的部分，如果找到匹配项，则该部分将突出显示。

那部分解决了；我可以找到相关的文档段，知道它在哪里开始和结束（就整数偏移而言），并突出显示它。

但是那个突出显示的部分可能已经滚出屏幕，我需要将它滚动到 JScrollPane 的可见部分内。我看到有一种方法似乎可以完成这项工作，但我看不到如何从文本文档位置整数转换`scrollRectToVisible(Rectangle)`为.`JComponent``Rectangle`

请注意，它是不可编辑的 JTextPane，我不想将光标移动到突出显示的段（用户无论如何都看不到光标），我只想让段显示在 JScrollPane 的可见区域内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:18:40.007

那么您可以使用[modelToView(...)](http://docs.oracle.com/javase/7/docs/api/javax/swing/plaf/TextUI.html#modelToView%28javax.swing.text.JTextComponent,%20int%29)，它可以返回一个`Rectangle`对象，您可以将其用于您的案例。

这是@camickr 的一个[例子](https://stackoverflow.com/a/3318949/1057230)

这里还有一个[例子](https://stackoverflow.com/questions/10462725/actionlistener-for-a-specific-text-inside-a-jtextarea/10463120#10463120)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:56:56.820

如果您的文本行高度相同，则 Rectangle 的 y 值是文档位置 * 行高。

如果您的文本行的高度不同，则 Rectangle 的 y 值是直到但不包括文档位置的行高的总和。

Rectangle 的 x 值将为零，或者一些对您的文本有意义的偏移量。

# c# - Watin，选择 html 选项列表，由 Javascript 生成

> ID：11297929
> 
> 赞同：0
> 
> 时间：2012-07-02T16:52:27.407
> 
> 标签：c#, list, watin

我无法选择与 javascript 混合的列表。页面上的原始代码是这样的：

```
 <select id="List_1" name="List_1">
 <option value="">Select..</option>
 <option value="val_1" >Orange</option>
 <option value="val_2" >Apple</option>
 <option value="val_3" >Peach</option>
 </select> 
```

但是当 JS 文件加载时，它会修改 List，当我查看 Generated Source 时，我得到了这个：

```
 <div tabindex="0" style="-moz-user-select: none;" role="listbox" title="Fruit" class="fruit-box k-select">Select..</div> 
```

而且 WatiN 再也找不到列表框了。

我试过：

```
 browser.Element(Find.ById("Fruit")).Focus();
  browser.Element(Find.ById("Fruit")).Click(); 
```

但这并没有触发下拉列表下降。然后我尝试使用 GoToNoWait(); 请求页面 然后使用循环查找列表，在加载 JS 之前修改它：

```
 while (browser.SelectLists.Count <= 0)
                {
                    Thread.Sleep(100); // wait until the first option list is loaded
                }

                foreach (WatiN.Core.SelectList a in brower.SelectLists)
                {
                    if (a.IdOrName == "Fruit")
                    {
                        a.SelectByValue("val_1");
                    }
                } 
```

我首先可以看到列表在浏览器（不是 JS）中正常显示，但是在页面加载时循环挂起，并且在 foreach 循环有机会执行之前加载了 JS。

我唯一的解决方案是：

```
 browser.Div(Find.ByTitle("Fruit")).Focus();
                    browser.Div(Find.ByTitle("Fruit")).Click();
                    browser.Div(Find.ByTitle("Fruit")).FireEvent("onClick");
                    SendKeys.SendWait("{DOWN}");
                    SendKeys.SendWait("{DOWN}");
                    SendKeys.SendWait("{ENTER}"); 
```

但是在使用 SendKeys 时，我需要将 firefox 窗口置于焦点，否则击键会发送到我当前打开的任何对我不起作用的应用程序。

有没有办法在添加 JS 之前选择选项列表？或者有没有办法使用 SendKeys 并将其指向特定的应用程序而不是当前专注的应用程序？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T04:20:06.277

我假设一组 LI 项目由 javascript 生成，然后可以在 UI 上选择。如果这是真的，你可能想试试这个

```
Div fruitdiv = browserinstance.Div(Find.ByTitle("Fruit"));
fruitdiv.Click();
fruitdiv.KeyDown();
WatiN.Core.List autocompletelist = (WatiN.Core.List)fruitdiv.NextSibling; // or whatever the relation is
autocompletelist.WaitUntilExists();
string value = "Value to select in the list";
ListItem datavaluelistitem = autocompletelist.ListItem(Find.ByText(new Regex("^" + value + "*")));
datavaluelistitem.MouseDown();
fruitdiv.WaitForComplete();
browserinstance.WaitForComplete(); 
```

# android-intent - 在 android 中为 instagram 使用共享意图

> ID：11297930
> 
> 赞同：-2
> 
> 时间：2012-07-02T16:52:29.927
> 
> 标签：android-intent

我想在我的应用程序中分享一些图片到 Instagram。使用 facebook、twister... 我知道，我可以使用 Share Itent 来做到这一点，但我不知道 instagram。请帮我。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:45:50.377

这是使用共享意图的解决方案

*这是样本*

```
Intent share = new Intent(Intent.ACTION_SEND);
                share.setType("image/jpeg");
                share.putExtra(Intent.EXTRA_STREAM,
             Uri.parse("file://"+Environment.getExternalStorageDirectory()+"/Pictures/jusgramm.jpg"));
                //share.putExtra(Intent.EXTRA_STREAM,data);
                startActivityForResult(Intent.createChooser(share, "Share Image Via"),SHARE_PIC_REQUEST); 
```

# php - 在数据库和检索过程中存储图像 URL

> ID：11297931
> 
> 赞同：2
> 
> 时间：2012-07-02T16:52:36.033
> 
> 标签：php, mysql

我是 php/mysql 的新手。我正在尝试通过 URL（图像位置）将图像存储在我的数据库中，此时我的 php 代码将图像存储在名为上传的目录中的文件夹中。这是不安全的，所以我想将 url 放入数据库中。我的代码基于此[IMAGEUPLOAD-WEBSITE](http://dondedeportes.es/uploader-previewer/)这是我的代码生成的 url 示例：

[http://www.example.com/imageupload/uploads/medium/uniqueimagename.jpg](http://www.example.com/imageupload/uploads/medium/uniqueimagename.jpg)

1.  我将如何构建一个将存储 URL 的有效表？它应该与 Varchar 一起使用吗？
2.  如何从我的数据库中检索此 url 并显示图像？php查询数据库中的文件名还是原始url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:57:39.013

如果您打算存储*任何*图像 URL（而不仅仅是您自己的），那么您可以安全并`VARCHAR(2000)`根据 http 标准的 URL 长度限制将该字段设置为：

请参阅以下内容：
[不同浏览器中 URL 的最大长度是多少？](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)

至于检索和显示图像，您可以简单地从您的数据库中获取值（基于您设计的某些键）并将查询结果用作您的图像源 URL。

**编辑：**这是对这个主题的一个很好的探索：
[Storing Images in DB - Yes or Nay?](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:59:36.920

`1\. How would i construct a valid table that will store URL's? Should it be with Varchar?`

我不会将 URL 的完整路径存储到数据库中。所以，如果你有：

`http://www.example.com/imageupload/uploads/medium/uniqueimagename.jpg`

我只会存储：

```
size: 2 (medium)
name: uniqueimagename
ext: jpg 
```

`2\. How can I retrieve this url from my database and display the image? php query of the filename in the database or original url?`

只需从数据库中获取数据并将原始数据放入您的 html

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T16:59:54.973

您最好的选择是在成功上传后使用 PHP 重命名文件。将其命名为易于检索的名称（某种 ID）。将其存储在数据库中，或存储整个路径。使用 PHP 查询文件名或 ID，然后输出完整路径。将列设置为 VARCHAR(2000) 将适用于所有情况，但完全没有必要。如果您使用 ID 而不是抽出的文件名，则可以使其更短。

# c# - 闭包中是否提升了静态只读值类型？

> ID：11297941
> 
> 赞同：3
> 
> 时间：2012-07-02T16:53:09.557
> 
> 标签：c#, closures

如果我有以下情况：

```
static readonly TimeSpan ExpiredAfter = TimeSpan.FromMilliseconds(60000);

foreach (ModuleInfo info in moduleList.Where(i => DateTime.Now - i.LastPulseTime > ExpiredAfter).ToArray())
    moduleList.Remove(info); 
```

ExpiredAfter 是否被解除或编译器是否知道它可以直接访问它？像这样写会更有效吗：

```
static readonly TimeSpan ExpiredAfter = TimeSpan.FromMilliseconds(60000);

static bool HasExpired(ModuleInfo i) { return DateTime.Now - i.LastPulseTime > ExpiredAfter; }

foreach (ModuleInfo info in moduleList.Where(HasExpired).ToArray())
    moduleList.Remove(info); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:00:06.733

> ExpiredAfter 是否被解除或编译器是否知道它可以直接访问它？

最简单的检查方法是编译你的代码，然后在 Reflector 等中反编译。我*希望*编译器只生成一个直接访问静态变量的静态方法。

> 像这样写会更有效吗：

再一次，自己测试一下 :) 即使这样写*更*有效，也不*一定*是正确的选择。哪个更适合您？这段代码对性能有多关键？它已经*足够*快了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:28:23.870

不可能捕获静态（或就此而言，任何）字段。

从语言规范：

> **7.15.5 外部变量**范围包括 lambda 表达式或匿名方法表达式的任何局部变量、值参数或参数数组都称为匿名函数的外部变量。在类的实例函数成员中， `this`值被视为值参数，并且是函数成员中包含的任何匿名函数的外部变量。
> 
> **7.15.5.1 捕获的外部变量**当一个外部变量被匿名函数引用时，就说该外部变量已被匿名函数捕获。

静态字段绝不是局部变量、值参数或参数数组。

也就是说，我见过[一些奇怪的极端情况](https://stackoverflow.com/questions/8419079/is-this-object-lifetime-extending-closure-a-c-sharp-compiler-bug)，编译器`this`会无缘无故地捕获，但这似乎不是其中之一。我使用反编译器验证了在实例和静态封闭方法的情况下，C# 4.0 编译器为 lambda 生成的代码与您的“手动”版本几乎相同......*除了*编译器似乎是*仅*针对 lambda 情况缓存和重用对结果委托（在静态字段中）的引用。在这种情况下（通过多次执行封闭方法），这可能会违反直觉地使 lambda 方式比方法组方式*更快*（并增加更少的内存压力）！您必须以两种方式对其进行基准测试才能确定...

# php - 将 $_GET 参数传递给 cron 作业

> ID：11297945
> 
> 赞同：42
> 
> 时间：2012-07-02T16:53:34.347
> 
> 标签：php, linux, get, cron

我是 cron 工作的新手，不确定这是否可行。

出于安全目的，我考虑制作一个单页脚本来查找某些 GET 值（用户名、密码和安全代码），以确保只有计算机和知道所有 3 个值的人才能运行该命令。

我制作了脚本，它可以在浏览器中运行它，但是是否可以使用 GET 值运行 cron 作业？

一个例子是我跑步

```
* 3 * * * /path_to_script/cronjob.php?username=test&password=test&code=1234 
```

这可能吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-07-02T16:57:55.140

`$_GET[]`&关联数组仅在您的`$_POST[]`脚本通过 Web 服务器调用时才被初始化。通过命令行调用时，参数在[`$argv`](http://us3.php.net/manual/en/reserved.variables.argv.php)数组中传递，就像 C 一样。

> 包含从命令行运行时传递给脚本的所有参数的数组。

你的命令是：

```
* 3 * * * /path_to_script/cronjob.php username=test password=test code=1234 
```

然后，您将使用[parse_str()](http://us3.php.net/parse_str)设置和访问参数：

```
<?php

var_dump($argv);

/*
array(4) {
  [0]=>
  string(27) "/path_to_script/cronjob.php"
  [1]=>
  string(13) "username=test"
  [2]=>
  string(13) "password=test"
  [3]=>
  string(9) "code=1234"
}
*/

parse_str($argv[3], $params);

echo $params['code']; // 1234 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-02T16:55:52.290

不是直接回答您的问题，而是我认为更好的解决方案：

如果您不希望除 cron 之外的任何人运行脚本，只需将其放在 web-root 之外。这样就根本无法通过网络服务器进行访问。

如果您确实需要以特殊用户身份运行命令，请不要使用`GET`但有用户登录并检查登录会话（某个设置的会话变量......）并仅在该页面中包含脚本.

您可公开访问的脚本如下所示：

```
session_start();

if (isset($_SESSION['user']))
{
  include '/path/to/script/outside/of/web-root';
}
else
{
  die('No access.');
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-15T07:56:17.263

```
* 3 * * * /path_to_script/cronjob.php?username=test&password=test&code=1234 
```

这行不通

```
* 3 * * * /path_to_script/cronjob.php username=test password=test code=1234 
```

这有效

此外，您需要使用 parse_str() 函数并获取值

```
$str = "first=value&arr[]=foo+bar&arr[]=baz";
parse_str($str);
echo $first;  // value
echo $arr[0]; // foo bar
echo $arr[1]; // baz 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-01-03T17:01:40.523

我意识到这篇文章已经有好几年了，但这篇文章对我帮助最大，所以让我分享我的发现也可以帮助其他人。

我正在使用 DirectAdmin，并且我的 cron 示例都可以正常工作。我从“将所有 Cron 输出发送到电子邮件”中删除了我的电子邮件地址，因此我没有收到有关我的 cronjobs 的电子邮件通知。

我从每 20 分钟运行一次的 cURL 请求开始：

```
*/20 * * * * /usr/local/bin/curl --silent 'https://demo.tld/app/stats/?update&key=1234' 
```

*请注意URL周围的''，否则不能添加多个参数！*

我使用该页面作为一种受 API 启发的方式来触发更新我从另一个网站收集的一些统计数据，其他人可以从我的网站以 JSON 形式获取这些数据。参数 'update' 触发更新过程，参数 'key' 将在验证后触发其他更新操作，我只想在 cronjob 请求更新时完成。

由于上面的 cronjob 基本上在两个方向上都消耗带宽，所以我想使用基于 PHP 的 cronjob，但是遇到了参数问题......所以我发现这篇文章拯救了我的一天:)

```
*/20 * * * * /usr/local/bin/php /home/path/to/public_html/app/stats/index.php update key=1234 
```

如您所见，文件名 (index.php) 现在包含在路径中，然后是参数（没有 ? 和 &'s）。

这样你就可以让 cronjob 工作了，但你只完成了一半，因为参数不会通过`$_GET`... 传递，当你用检查键对脚本进行编码时，这有点烦人`$_GET`！

那么，它是如何工作的呢？很简单（至少经过一些研究），cronjob 通过名为`$argv`.

因此，有了这些知识，我搜索了一种将其转换为的`$argv`方法`$_GET`：

1.  我可以手动和通过 cronjob 触发更新。
2.  我不必重写我的整个剧本。

我找到了以下解决方案，我们只想在`$argv`实际设置时执行，所以我将它包装在`if isset`检查中：

```
if( isset( $argv ) )
{
    foreach( $argv as $arg ) {
        $e = explode( '=', $arg );
        if( count($e) == 2 )
            $_GET[$e[0]] = $e[1];
        else    
            $_GET[$e[0]] = 0;
    }
} 
```

希望这对你也有帮助:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-02T16:56:00.053

这将起作用：

```
* 3 * * * /path_to_script/cronjob.php username=test password=test code=1234 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-02T17:00:55.600

您应该查看[get_opt()](http://www.php.net/manual/en/function.getopt.php)或[$argv](http://www.php.net/manual/en/reserved.variables.argv.php)函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-04T07:58:23.053

`getopt()`当我需要来自 cron 或控制台命令的参数时，我发现使用该函数很有用。

> 此函数将返回一个选项/参数对数组，或失败时返回 FALSE。

**以下示例直接取自 PHP 文档。**

```
$options = getopt("f:hp:");
var_dump($options);

shell> php example.php -fvalue -h 
```

上面的示例将输出：

```
array(2) {
    ["f"]=>
    string(5) "value"
    ["h"]=>
    bool(false)
} 
```

有关更多选项和不同参数，请查看完整文档。

### 资源

*   [getopt() - PHP 文档](http://php.net/manual/en/function.getopt.php)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-28T08:36:00.040

`username=test&password=test&code=1234`

将变成：

`php -r "$_GET["username"]="test"; $_GET["password"]="test"; $_GET["code"]="1234"; include "wp-cron.php";'`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-02-04T10:48:41.317

如果您的脚本在多个地方被调用（不仅在您的 cronjob 中），并且您不想更改原始代码（即继续使用`$_GET['foo'], $_GET['bar']`or `$_POST['foo'], $_POST['bar']`），您可以使用[wget](https://www.gnu.org/software/wget/)（假设它存在/安装在您的服务器上）。

例如：

```
* 3 * * * wget -qO- 'http://yoursite.com/path_to_script/cronjob.php?username=test&password=test&code=1234' > /dev/null 2>&1 
```

where`-q`是用于安静模式（无输出）的选项，`O-`表示`Output to stdout`.

由于响应不是您通常会保留的内容（保存到文件），因此该`/dev/null 2>&1`位确保您的脚本返回的任何响应（`echo`、`printf`等）都不会保存在任何地方。

# c# - 从另一个静态类访问表单方法

> ID：11297946
> 
> 赞同：6
> 
> 时间：2012-07-02T16:53:35.613
> 
> 标签：c#, .net, forms, static

所以，我现在几乎没有线索，甚至不确定这是否可能。我有一个 Visual C# 表单，它由 Program.cs 运行（标准方式 - VS 完成了所有的设置工作）。

除此之外，我在单独的 C# 文件中有一个带有静态方法的类，只是因为我喜欢在一个文件中保留一个类。

我的表单代码有一个公共功能：

```
public void print(String text)
{
    rtb_log.appendText("\n" + text);
} 
```

在某个时间点，我从另一个类调用静态函数。

是否有可能从我的其他班级实际访问该打印方法？由于它指的是 rtb_log （一个富文本框），它只有在实例化时才可用，当然不是静态的。但是由于静态方法只能访问静态成员，所以我对如何从另一个类在我的表单上附加一些文本有点想法。

这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T16:57:37.237

> 但是由于静态方法只能访问静态成员，所以我对如何从另一个类在我的表单上附加一些文本有点想法。

静态成员可以访问实例成员——他们只需要知道在哪个实例上调用方法。所以你可以写：

```
public static void Foo(OtherForm myOtherForm)
{
    // Do some stuff...
    myOtherForm.Print(); // Case changed to comply with naming conventions
} 
```

然后，当您*调用*该方法时，您需要提供对相关表单的引用。基本上*，*必须确定要调用哪个实例`Print`。找出谁拥有这些信息，然后从那里传递出去。我建议*不要*使用静态变量来保存这些信息。（全局状态使代码的可重用性降低，更难推理，也更难测试。）

编辑：鉴于评论，听起来你想要：

```
// Within the form
private void HandleClick(object sender, EventArgs e)
{
    SomeClass.StaticMethod(this);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:00:15.783

见下文

```
class SomeMainClass
{
    private ClassB form = null;

    private void SomeMethod()
    {
        form = new ClassB();
        form.Show();
        ClassA foo = new ClassA(this);
    }

    // Use an accessor.
    public ClassB Form
    {
        get { return this.form; }
    }
}

class ClassA
{
    private SomeMainClass mainClass = null;

    // Constructor.
    public ClassA(SomeMainClass _mainClass)
    {
        this.mainClass = _mainClass;
    }

    private void SomeMethod()
    {
        this.mainClass.Form.Print("Something to print");
    }
}

class ClassB : Form
{
    // Constructor.
    public ClassB()
    {
        InitializeComponent();
    }

    public void Print(String text) 
    {     
        rtb_log.appendText("\n" + text); 
    } 
} 
```

*编辑：这是响应您的评论的基本方法。它在资源方面不是那么有效，但可以做你想做的......*

我希望这有帮助。

# f# - 将新运算符泛化到多种类型

> ID：11297953
> 
> 赞同：2
> 
> 时间：2012-07-02T16:54:11.343
> 
> 标签：f#, typeclass, functor, generic-programming, f#-unquote

我正在使用 Unquote 并没有看到任何近似的比较。所以我决定写一个。

```
let inline (=~=) x y = abs x-y <  1.E-10 
```

然而，运营商没有被映射到，比如 Lists

```
let test  = [1;2] =~= [1;2]  //---> error 
```

是否可以声明此运算符为流式`(=)`？

还是需要定义一个新的特征，比如“StructuralEquality-ishness”？

[用http://code.google.com/p/fsharp-typeclasses/](http://code.google.com/p/fsharp-typeclasses/)定义一个新的运算符会更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T17:41:24.373

我不知道 Unquote，但关于近似函数/运算符，我不确定是否有办法通过结构比较来实现它。

如果你想“手工”完成，使用类似于 F# Typeclasses 项目的技术（或技巧），这里有一个例子：

```
type Approximate = Approximate with
    static member inline ($) (Approximate, x:^n       ) = fun (y:^n) -> float (abs (x-y)) <  1.E-10
    static member inline ($) (Approximate, x:list< ^n>) = 
        fun (y:list< ^n>) -> 
            x.Length = y.Length && (List.zip x y |> List.forall ( fun (a,b) -> (Approximate $ a) b))
// More overloads
let inline (=~=) x y = (Approximate $ x) y 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T17:14:27.097

（我没有使用 Unquote，所以这可能不适用。）

看看你的函数的签名

```
'a -> 'b -> bool (requires member ( - ) and member Abs) 
```

`List`不支持这些运算符中的任何一个。是的，您的函数是通用的，但约束排除了它与列表的使用。

`(=)`另一方面，它没有约束，这意味着它可以与任何类型一起使用。如果您的函数可以重写以删除约束，那么它可以类似地使用（但我不知道考虑使用`-`and是如何可能的`abs`——您希望 a`list`如何与这些运算符一起表现？）。

# javascript - IE可以同时执行两个JavaScript函数吗

> ID：11297954
> 
> 赞同：1
> 
> 时间：2012-07-02T16:54:13.317
> 
> 标签：javascript, c#, .net, dom-events, watin

我们使用 C# 中的 WatiN 与浏览器（目前只有 IE）进行交互。

WatiN 的一些方法是一个简单的包装器，它向某些 web 元素发送一个`onchanged()`和。`onclick()`

WatiN 还为此提供了一个即发即弃的版本，它基本上提供了一个非阻塞版本。

我的问题是，浏览器是否也有两个JS函数同时执行？

例如，假设以下代码：

```
// Uses FireEventAsync("onchanged")
SelectList.SelectNoWait()

SelectList.FireEventAsync("onclick") 
```

JS函数onclick和onchanged可以同时执行吗？

我相信我们遇到了类似的问题，`onchanged()`当我们触发另一个事件时，一个函数仍在执行，我想知道这在技术上是否可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:27:12.697

不，只要您不专门使用[webworkers](https://developer.mozilla.org/Using_DOM_workers)，您就不能同时进行多个执行。只有一个用户线程可以在浏览器上下文中处于活动状态。

通常你只执行在事件上调用的小函数，大多数长任务与资源和异步有关。

当您认为“基于事件”并且（最重要的是）不要尝试从自然异步的内容（我想到 AJAX）进行同步调用时，您就没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:28:56.720

简而言之：没有。JavaScript 执行是单线程的。

但是，使用异步操作（ajax、计时器、worker 等），可以将函数的某些部分设置为稍后在线程空闲时执行。

一个人为的例子是：

```
function foo() {
    setTimeout(function () {
        console.log('three');
    }, 10);

    console.log('one');
}

function bar() {
    console.log('two');
}

foo();
bar(); 
```

虽然`foo`和`bar`是同步调用的，并且日志是按 的顺序写入的`three, one, two`，但它们会按 的顺序执行，`one, two, three`因为计时器会延迟 ' 的日志以`three'`供以后使用。

而且，即使您的处理程序不使用任何异步的东西，`SelectNoWait`并且`FireEventAsync`很可能这样做。

# xml - 在现实世界的使用中，是否值得为 Restful Web 服务实现 HATEOAS？

> ID：11297955
> 
> 赞同：18
> 
> 时间：2012-07-02T16:54:26.453
> 
> 标签：xml, rest, web-services, hateoas

如果我要将现有的 Restful Web 服务尽可能地转换为 HATEOS，我已经阅读了很多关于潜在好处的信息。我理解在有效负载中提供链接以减轻消费者记住下一个有效可用操作的负担的重要性。然而，我似乎无法理解它将如何在现实中帮助我的 Restful Web 服务的消费者。

为了说明，我从关于制作咖啡订单的[Rest In Practice书中举了这个例子：-](https://rads.stackoverflow.com/amzn/click/com/0596805829)

```
<order xmlns="http://schemas.restbucks.com">
  <location>takeAway</location>
  <item>
    <name>latte</name>
    <quantity>1</quantity>
    <milk>whole</milk>
    <size>small</size>
  </item>
  <cost>2.0</cost>
  <status>payment-expected</status>
  <link rel="payment" href="https://restbucks.com/payment/1234" />
</order> 
```

基本上，这允许消费者进行由`<link>`标签定义的付款。然而，实际上，消费者仍然需要知道该 Web 服务调用的所有语义，例如，使用什么方法（POST 或 PUT）、在有效负载中使用什么请求参数以进行支付等。 .. 换句话说，消费者仍然需要依赖 WADL 文档才能知道如何成功调用此 Web 服务。如果这些标签都在一个特定项目上使用 GET，则它们可能更有意义。否则，我真的看不到在这里定义链接有什么好处……除了消费者知道他们接下来可以调用什么动作，然后参考 WADL 来确定如何正确调用它。

我的下一个担忧是最终可能会导致带有所有`<link>`标签的非常重的有效负载。例如，如果 /projects/1/users 上的 GET 返回属于项目 1 的所有用户信息，我假设我最终会得到以下标签：-

```
<project>
    <users>
        <user id="12" name="mike" ... />
        <user id="23" name="kurt" ... />
        <user id="65" name="corey" ... />
    </user>
    <links>
        <link rel="self" href="http://server/projects/1/users"/>
        <link rel="create_user" href="http://server/projects/1/users"/>

        <link rel="get_user_mike" href="http://server/projects/1/users/12"/>
        <link rel="get_user_kurt" href="http://server/projects/1/users/23"/>
        <link rel="get_user_corey" href="http://server/projects/1/users/65"/>
        ...
    </links>
</project> 
```

如果一个项目包含 500 个用户……我不会在有效负载中有 500 个用户链接吗？否则，重新设计我的 Web 服务以处理这种情况的最佳方法是什么？或者这在现实世界中是否可以接受？

任何想法或建议都非常感谢这里。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T03:44:39.453

要考虑为什么这是正确的做法，请想象您的 API 没有 HATEOAS 方法：您必须在文档中（或在您的 WADL 中，如果那是您的事情）中发布每个可能的 URI 方案，并且从那时起在不破坏客户的情况下，您**无法更改它们。**

从本质上讲，您的客户将与您选择的 URI 布局密不可分。这是一种耦合级别，您可以通过仅记录*链接*在您的媒体类型中的位置而不是记录*链接的外观*来轻松避免。

也就是说，您的应用程序需要采用这种方法可能没问题，这很好。请记住，您将在很长一段时间内被 URI 布局所困扰。不过，你会相处得[很好](https://dev.twitter.com/docs/api)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T08:32:27.107

对于您的特定示例，我认为回到 HTML 是有意义的。如果您在 HTML 中显示 500 个资源的列表，您会为每个资源包含一个链接，以便用户可以获得更多信息吗？你可能会。一个 REST API 并没有太大的不同——如果你返回一个包含 500 个资源的列表，你需要包含 500 个链接，这样用户才能获得关于每个资源的更多信息。

期望客户端基于某些 ID 或名称构建 URL 就像要求用户在浏览器的地址栏中手动键入 URL。

这是一篇[非常好的文章](http://weblogs.java.net/blog/mkarg/archive/2010/02/14/what-hateoas-actually-means)（死链接），特别是：

> 就像 HTML 文件通过标签相互链接，或者就像 XML 文件通过 XLink 相互链接一样，所有状态传输都必须仅作为对在表示中找到的链接的反应来完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-28T18:59:45.983

这并不是真正的答案，只是采用 HATEOAS 的一些提示。您不需要包含数百个链接，您可以包含 1 个链接到 500 个完整列表，1 个链接到链接的分页子集，或者在响应中包含一个分页子集并添加下一页链接。

为了响应 WADL，您应该使用任何内容格式的内置设施，例如在 HTML 中，`LINK`以及`A`指示客户端应该发出 GET 请求的`FORM`元素和用于 POST 请求的元素。显然，其他格式和 API XLink 和 XMLHTTPRequest 比 HTML 更好地支持 HTTP。您可能想查看[https://datatracker.ietf.org/doc/html/draft-nottingham-link-hint](https://datatracker.ietf.org/doc/html/draft-nottingham-link-hint)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-28T04:29:23.617

只是关于 500 个用户的问题：我不是专家，但我的理解是您可以放心地提供分页：

/project/1/users/pages/1

```
<links>
    ...
    <link rel="get_user_mike" href="http://server/projects/1/users/12"/>
    <link rel="get_user_kurt" href="http://server/projects/1/users/23"/>
    <link rel="get_user_corey" href="http://server/projects/1/users/65"/>
    <link rel="get_page_2" href="http://server/projects/1/users/pages/2"/>
</links> 
```

# android - 将类包含在 xml 布局中时，Eclipse 查看器无法实例化 com.mopub.mobileads.MoPubView

> ID：11297960
> 
> 赞同：2
> 
> 时间：2012-07-02T16:55:06.953
> 
> 标签：android, eclipse, mopub

我能够下载并导入适用于 android 的 moPub 库。按照 moPub 网站上的简单示例进行操作后，该应用程序在模拟器中运行良好。但是，添加控件后，eclipse 查看器无法正常显示屏幕。

xml包含[基于示例]

```
 <com.mopub.mobileads.MoPubView
        android:id="@+id/adview"
        android:layout_width="fill_parent"
        android:layout_height="50px" /> 
```

当我尝试转到“图形布局”选项卡时导致以下错误

```
The following classes could not be instantiated:
- com.mopub.mobileads.MoPubView (Open Class, Show Error Log)
See the Error Log (Window > Show View) for more details.
Tip: Use View.isInEditMode() in your custom views to skip code when shown in Eclipse 
```

虽然这比炫耀更令人讨厌，但这是我宁愿做的事情。非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T22:49:36.787

为了快速修复自己在 MoPub SDK 项目中编辑 MoPubView（假设您以这种方式添加源代码与项目的其余部分一起编译），如果是这样，则在构造函数中的 super 调用之后添加以下行上下文和属性集参数：

```
 if (isInEditMode()) return; 
```

这是一个更大的片段，显示了上述行的位置：

```
public MoPubView(Context context, AttributeSet attrs) {
    super(context, attrs);

    if (isInEditMode()) return;

    mContext = context;
    //[...the rest of the constructor's code...]
} 
```

添加这条线（风格口味）导致异常不会被抛出并在我的设备上运行，并且能够在测试中拉下 320x50 横幅广告（迄今为止，我从未向模拟器提供过广告。）

我在 github 上进行了这个更改并提出了拉取请求。发布：版本 1.14.1.0 [https://github.com/mopub/mopub-android-sdk](https://github.com/mopub/mopub-android-sdk)

Android SDK 对整个 isInEditMode() 使用的看法：http: [//developer.android.com/reference/android/view/View.html#isInEditMode()](http://developer.android.com/reference/android/view/View.html#isInEditMode())

# integer-division - 在 RVDS 下使用 Cortex-M0 进行整数除法

> ID：11297965
> 
> 赞同：0
> 
> 时间：2012-07-02T16:55:21.460
> 
> 标签：integer-division, cortex-m, rvds

我正在尝试将 64 位整数类型划分为 32 位整数类型，并且我使用 RVDS 4.1 作为工具链。

Cortex-M0没有硬件除数，可以进行下面的操作吗？如果有怎么办？

```
unsigned long int b = 2590202;
unsigned long long int a = 953502716552001ULL;
unsigned long long int result;
result = a/b; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:56:15.833

编译器会将除法运算编译为对执行软件 64 位除法算法的库子程序的调用。您可能还必须告诉编译器链接到数学库，我没有专门使用 RVDS 的经验。

为什么不尝试自己编译代码，看看会发生什么？尝试反汇编生成的机器代码，看看它是如何工作的：它应该很有教育意义。

# twitter-bootstrap - Twitter-Bootstrap：并排的两个下拉切换按钮无法正常工作

> ID：11297969
> 
> 赞同：11
> 
> 时间：2012-07-02T16:55:53.430
> 
> 标签：twitter-bootstrap

**简介：**我网站的一个部分需要一个小工具栏，其中包含两个并排的下拉菜单。我试图通过以下标记（简化）来实现这一点：

```
<div class="btn-group">
    <button class="btn btn-mini dropdown-toggle" data-toggle="dropdown">
        <span id="uniqueId">Text1</span> <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <li><a onclick="javascript:someFunction()">Item1</a></li>
        <li><a onclick="javascript:someFunction()">Item2</a></li>
        ...
    </ul>
    <button class="btn btn-mini dropdown-toggle" data-toggle="dropdown">
        <span id="uniqueId2">Text2</span> <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <li><a onclick="javascript:someOtherFunction()">Item1</a></li>
        <li><a onclick="javascript:someOtherFunction()">Item2</a></li>
        ...
    </ul>
</div> 
```

我想要一个漂亮的两按钮工具栏，只有工具栏的外侧有圆角。

**问题：**

当我单击任一按钮时，两个按钮都显示为“已按下”，我无法从视觉上区分我刚刚单击了哪个按钮。所有其他功能都可以正常工作 - 即菜单显示正确且选项正确。

有没有办法让这些按钮分别改变它们的样式？

**更新：**

我确实知道通过将我的按钮分成两个`btn-group`s 或（如@Sherbrow 建议的那样）使用 div 来完成这项工作是很有可能的。[Bootstrap 文档](http://twitter.github.com/bootstrap/components.html#buttonGroups)还建议

> 带有下拉菜单的按钮必须单独包装在 .btn-toolbar 内自己的 .btn-group 中，以便正确呈现。

我想知道 - 是否有可能以某种方式避免这种单独的包装并在单个 btn 组内有两个行为正确的下拉列表？

我认为我问的是非常非标准和无证的行为，如果没有人能提出一种方法，我会接受“那是不可能的”的答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T17:31:41.810

你忘了你的`.dropdown`包装纸。

**更新 2**：忘记了一些组代码。并提出了[要点（github）](https://gist.github.com/3035209)

**更新**：做了一个更好的包装，和按钮的样式。这基本上是另一种按钮式样式，但没有`.btn`类的包袱。

```
<div class="btn-group">
    <div class="dropdown dropdown-btn">
        <div class="dropdown-toggle" data-toggle="dropdown">
            <span id="uniqueId">Text1</span><span class="caret"/>
        </div >
        <ul class="dropdown-menu">
            <li><a onclick="javascript:someFunction()">Item1</a></li>
            <li><a onclick="javascript:someFunction()">Item2</a></li>
            <!-- ... -->
        </ul>
    </div>
    <div class="dropdown dropdown-btn">
        <div class="dropdown-toggle" data-toggle="dropdown">
            <span id="uniqueId2">Text2</span><span class="caret"/>
        </div >
        <ul class="dropdown-menu">
            <li><a onclick="javascript:someOtherFunction()">Item1</a></li>
            <li><a onclick="javascript:someOtherFunction()">Item2</a></li>
            <!-- ... -->
        </ul>
    </div>
</div> 
```

有一个大的 css 调整（buttons.less 和 button-groups.less 重用从这里更改`.btn`为[（github）](https://github.com/twitter/bootstrap/tree/master/less)）：`.dropdown-btn`

```
.dropdown-btn {
    display: inline-block;
    *display: inline;
    /* IE7 inline-block hack */
    *zoom: 1;
    padding: 4px 10px 4px;
    margin-bottom: 0;
    font-size: 13px;
    line-height: 18px;
    *line-height: 20px;
    color: #333333;
    text-align: center;
    text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
    vertical-align: middle;
    cursor: pointer;
    background-color: #f5f5f5;
    background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: -ms-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6));
    background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: linear-gradient(top, #ffffff, #e6e6e6);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#e6e6e6', GradientType=0);
    border-color: #e6e6e6 #e6e6e6 #bfbfbf;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    *background-color: #e6e6e6;
    /* Darken IE7 buttons by default so they stand out more given they won't have borders */
    filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
    border: 1px solid #cccccc;
    *border: 0;
    border-bottom-color: #b3b3b3;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    *margin-left: .3em;
    -webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
    -moz-box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
}
.dropdown-btn:hover,
.dropdown-btn:active,
.dropdown-btn.active,
.dropdown-btn.disabled,
.dropdown-btn[disabled] {
    background-color: #e6e6e6;
    *background-color: #d9d9d9;
}
.dropdown-btn:active,
.dropdown-btn.active { background-color: #cccccc \9 }
.dropdown-btn:first-child { *margin-left: 0 }
.dropdown-btn:hover {
    color: #333333;
    text-decoration: none;
    background-color: #e6e6e6;
    *background-color: #d9d9d9;
    /* Buttons in IE7 don't get borders, so darken on hover */
    background-position: 0 -15px;
    -webkit-transition: background-position 0.1s linear;
    -moz-transition: background-position 0.1s linear;
    -ms-transition: background-position 0.1s linear;
    -o-transition: background-position 0.1s linear;
    transition: background-position 0.1s linear;
}
.dropdown-btn:focus {
    outline: thin dotted #333;
    outline: 5px auto -webkit-focus-ring-color;
    outline-offset: -2px;
}
.dropdown-btn.active,
.dropdown-btn:active {
    background-color: #e6e6e6;
    background-color: #d9d9d9 \9;
    background-image: none;
    outline: 0;
    -webkit-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
    -moz-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
    box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
}
.dropdown-btn.disabled,
.dropdown-btn[disabled] {
    cursor: default;
    background-color: #e6e6e6;
    background-image: none;
    opacity: 0.65;
    filter: alpha(opacity=65);
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
}
.dropdown-btn-large {
    padding: 9px 14px;
    font-size: 15px;
    line-height: normal;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}
.dropdown-btn-large [class^="icon-"] { margin-top: 1px }
.dropdown-btn-small {
    padding: 5px 9px;
    font-size: 11px;
    line-height: 16px;
}
.dropdown-btn-small [class^="icon-"] { margin-top: -1px }
.dropdown-btn-mini {
    padding: 2px 6px;
    font-size: 11px;
    line-height: 14px;
}
.dropdown-btn-primary,
.dropdown-btn-primary:hover,
.dropdown-btn-warning,
.dropdown-btn-warning:hover,
.dropdown-btn-danger,
.dropdown-btn-danger:hover,
.dropdown-btn-success,
.dropdown-btn-success:hover,
.dropdown-btn-info,
.dropdown-btn-info:hover,
.dropdown-btn-inverse,
.dropdown-btn-inverse:hover {
    color: #ffffff;
    text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
}
.dropdown-btn-primary.active,
.dropdown-btn-warning.active,
.dropdown-btn-danger.active,
.dropdown-btn-success.active,
.dropdown-btn-info.active,
.dropdown-btn-inverse.active { color: rgba(255, 255, 255, 0.75) }
.dropdown-btn {
    border-color: #ccc;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
}
.dropdown-btn-primary {
    background-color: #0074cc;
    background-image: -moz-linear-gradient(top, #0088cc, #0055cc);
    background-image: -ms-linear-gradient(top, #0088cc, #0055cc);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#0088cc), to(#0055cc));
    background-image: -webkit-linear-gradient(top, #0088cc, #0055cc);
    background-image: -o-linear-gradient(top, #0088cc, #0055cc);
    background-image: linear-gradient(top, #0088cc, #0055cc);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#0088cc', endColorstr='#0055cc', GradientType=0);
    border-color: #0055cc #0055cc #003580;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    *background-color: #0055cc;
    /* Darken IE7 buttons by default so they stand out more given they won't have borders */
    filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.dropdown-btn-primary:hover,
.dropdown-btn-primary:active,
.dropdown-btn-primary.active,
.dropdown-btn-primary.disabled,
.dropdown-btn-primary[disabled] {
    background-color: #0055cc;
    *background-color: #004ab3;
}
.dropdown-btn-primary:active,
.dropdown-btn-primary.active { background-color: #004099 \9 }
.dropdown-btn-warning {
    background-color: #faa732;
    background-image: -moz-linear-gradient(top, #fbb450, #f89406);
    background-image: -ms-linear-gradient(top, #fbb450, #f89406);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#fbb450), to(#f89406));
    background-image: -webkit-linear-gradient(top, #fbb450, #f89406);
    background-image: -o-linear-gradient(top, #fbb450, #f89406);
    background-image: linear-gradient(top, #fbb450, #f89406);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fbb450', endColorstr='#f89406', GradientType=0);
    border-color: #f89406 #f89406 #ad6704;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    *background-color: #f89406;
    /* Darken IE7 buttons by default so they stand out more given they won't have borders */
    filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.dropdown-btn-warning:hover,
.dropdown-btn-warning:active,
.dropdown-btn-warning.active,
.dropdown-btn-warning.disabled,
.dropdown-btn-warning[disabled] {
    background-color: #f89406;
    *background-color: #df8505;
}
.dropdown-btn-warning:active,
.dropdown-btn-warning.active { background-color: #c67605 \9 }
.dropdown-btn-danger {
    background-color: #da4f49;
    background-image: -moz-linear-gradient(top, #ee5f5b, #bd362f);
    background-image: -ms-linear-gradient(top, #ee5f5b, #bd362f);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ee5f5b), to(#bd362f));
    background-image: -webkit-linear-gradient(top, #ee5f5b, #bd362f);
    background-image: -o-linear-gradient(top, #ee5f5b, #bd362f);
    background-image: linear-gradient(top, #ee5f5b, #bd362f);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ee5f5b', endColorstr='#bd362f', GradientType=0);
    border-color: #bd362f #bd362f #802420;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    *background-color: #bd362f;
    /* Darken IE7 buttons by default so they stand out more given they won't have borders */
    filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.dropdown-btn-danger:hover,
.dropdown-btn-danger:active,
.dropdown-btn-danger.active,
.dropdown-btn-danger.disabled,
.dropdown-btn-danger[disabled] {
    background-color: #bd362f;
    *background-color: #a9302a;
}
.dropdown-btn-danger:active,
.dropdown-btn-danger.active { background-color: #942a25 \9 }
.dropdown-btn-success {
    background-color: #5bb75b;
    background-image: -moz-linear-gradient(top, #62c462, #51a351);
    background-image: -ms-linear-gradient(top, #62c462, #51a351);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#62c462), to(#51a351));
    background-image: -webkit-linear-gradient(top, #62c462, #51a351);
    background-image: -o-linear-gradient(top, #62c462, #51a351);
    background-image: linear-gradient(top, #62c462, #51a351);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#62c462', endColorstr='#51a351', GradientType=0);
    border-color: #51a351 #51a351 #387038;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    *background-color: #51a351;
    /* Darken IE7 buttons by default so they stand out more given they won't have borders */
    filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.dropdown-btn-success:hover,
.dropdown-btn-success:active,
.dropdown-btn-success.active,
.dropdown-btn-success.disabled,
.dropdown-btn-success[disabled] {
    background-color: #51a351;
    *background-color: #499249;
}
.dropdown-btn-success:active,
.dropdown-btn-success.active { background-color: #408140 \9 }
.dropdown-btn-info {
    background-color: #49afcd;
    background-image: -moz-linear-gradient(top, #5bc0de, #2f96b4);
    background-image: -ms-linear-gradient(top, #5bc0de, #2f96b4);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#5bc0de), to(#2f96b4));
    background-image: -webkit-linear-gradient(top, #5bc0de, #2f96b4);
    background-image: -o-linear-gradient(top, #5bc0de, #2f96b4);
    background-image: linear-gradient(top, #5bc0de, #2f96b4);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#5bc0de', endColorstr='#2f96b4', GradientType=0);
    border-color: #2f96b4 #2f96b4 #1f6377;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    *background-color: #2f96b4;
    /* Darken IE7 buttons by default so they stand out more given they won't have borders */
    filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.dropdown-btn-info:hover,
.dropdown-btn-info:active,
.dropdown-btn-info.active,
.dropdown-btn-info.disabled,
.dropdown-btn-info[disabled] {
    background-color: #2f96b4;
    *background-color: #2a85a0;
}
.dropdown-btn-info:active,
.dropdown-btn-info.active { background-color: #24748c \9 }
.dropdown-btn-inverse {
    background-color: #414141;
    background-image: -moz-linear-gradient(top, #555555, #222222);
    background-image: -ms-linear-gradient(top, #555555, #222222);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#555555), to(#222222));
    background-image: -webkit-linear-gradient(top, #555555, #222222);
    background-image: -o-linear-gradient(top, #555555, #222222);
    background-image: linear-gradient(top, #555555, #222222);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#555555', endColorstr='#222222', GradientType=0);
    border-color: #222222 #222222 #000000;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    *background-color: #222222;
    /* Darken IE7 buttons by default so they stand out more given they won't have borders */
    filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}
.dropdown-btn-inverse:hover,
.dropdown-btn-inverse:active,
.dropdown-btn-inverse.active,
.dropdown-btn-inverse.disabled,
.dropdown-btn-inverse[disabled] {
    background-color: #222222;
    *background-color: #151515;
}
.dropdown-btn-inverse:active,
.dropdown-btn-inverse.active { background-color: #080808 \9 }
button.dropdown-btn,
input[type="submit"].dropdown-btn {
    *padding-top: 2px;
    *padding-bottom: 2px;
}
button.dropdown-btn::-moz-focus-inner,
input[type="submit"].dropdown-btn::-moz-focus-inner {
    padding: 0;
    border: 0;
}
button.dropdown-btn.dropdown-btn-large,
input[type="submit"].dropdown-btn.dropdown-btn-large {
    *padding-top: 7px;
    *padding-bottom: 7px;
}
button.dropdown-btn.dropdown-btn-small,
input[type="submit"].dropdown-btn.dropdown-btn-small {
    *padding-top: 3px;
    *padding-bottom: 3px;
}
button.dropdown-btn.dropdown-btn-mini,
input[type="submit"].dropdown-btn.dropdown-btn-mini {
    *padding-top: 1px;
    *padding-bottom: 1px;
}
.btn-group {
    position: relative;
    *zoom: 1;
    *margin-left: .3em;
}
.btn-group:before,
.btn-group:after {
    display: table;
    content: "";
}
.btn-group:after { clear: both }
.btn-group:first-child { *margin-left: 0 }
.btn-group + .btn-group { margin-left: 5px }
.dropdown-btn-toolbar {
    margin-top: 9px;
    margin-bottom: 9px;
}
.dropdown-btn-toolbar .btn-group {
    display: inline-block;
    *display: inline;
    /* IE7 inline-block hack */
    *zoom: 1;
}
.btn-group > .dropdown-btn {
    position: relative;
    float: left;
    margin-left: -1px;
    -webkit-border-radius: 0;
    -moz-border-radius: 0;
    border-radius: 0;
}
.btn-group > .dropdown-btn:first-child {
    margin-left: 0;
    -webkit-border-top-left-radius: 4px;
    -moz-border-radius-topleft: 4px;
    border-top-left-radius: 4px;
    -webkit-border-bottom-left-radius: 4px;
    -moz-border-radius-bottomleft: 4px;
    border-bottom-left-radius: 4px;
}
.btn-group > .dropdown-btn:last-child,
.btn-group > .dropdown-toggle {
    -webkit-border-top-right-radius: 4px;
    -moz-border-radius-topright: 4px;
    border-top-right-radius: 4px;
    -webkit-border-bottom-right-radius: 4px;
    -moz-border-radius-bottomright: 4px;
    border-bottom-right-radius: 4px;
}
.btn-group > .dropdown-btn.large:first-child {
    margin-left: 0;
    -webkit-border-top-left-radius: 6px;
    -moz-border-radius-topleft: 6px;
    border-top-left-radius: 6px;
    -webkit-border-bottom-left-radius: 6px;
    -moz-border-radius-bottomleft: 6px;
    border-bottom-left-radius: 6px;
}
.btn-group > .dropdown-btn.large:last-child,
.btn-group > .large.dropdown-toggle {
    -webkit-border-top-right-radius: 6px;
    -moz-border-radius-topright: 6px;
    border-top-right-radius: 6px;
    -webkit-border-bottom-right-radius: 6px;
    -moz-border-radius-bottomright: 6px;
    border-bottom-right-radius: 6px;
}
.btn-group > .dropdown-btn:hover,
.btn-group > .dropdown-btn:focus,
.btn-group > .dropdown-btn:active,
.btn-group > .dropdown-btn.active { z-index: 2 }
.btn-group .dropdown-toggle:active,
.btn-group.open .dropdown-toggle { outline: 0 }
.btn-group > .dropdown-toggle {
    padding-left: 8px;
    padding-right: 8px;
    -webkit-box-shadow: inset 1px 0 0 rgba(255,255,255,.125), inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
    -moz-box-shadow: inset 1px 0 0 rgba(255,255,255,.125), inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
    box-shadow: inset 1px 0 0 rgba(255,255,255,.125), inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
    *padding-top: 4px;
    *padding-bottom: 4px;
}
.btn-group > .dropdown-btn-mini.dropdown-toggle {
    padding-left: 5px;
    padding-right: 5px;
}
.btn-group > .dropdown-btn-small.dropdown-toggle {
    *padding-top: 4px;
    *padding-bottom: 4px;
}
.btn-group > .dropdown-btn-large.dropdown-toggle {
    padding-left: 12px;
    padding-right: 12px;
}
.btn-group.open .dropdown-toggle {
    background-image: none;
    -webkit-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
    -moz-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
    box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
}
.btn-group.open .dropdown-btn.dropdown-toggle { background-color: #e6e6e6 }
.btn-group.open .dropdown-btn-primary.dropdown-toggle { background-color: #0055cc }
.btn-group.open .dropdown-btn-warning.dropdown-toggle { background-color: #f89406 }
.btn-group.open .dropdown-btn-danger.dropdown-toggle { background-color: #bd362f }
.btn-group.open .dropdown-btn-success.dropdown-toggle { background-color: #51a351 }
.btn-group.open .dropdown-btn-info.dropdown-toggle { background-color: #2f96b4 }
.btn-group.open .dropdown-btn-inverse.dropdown-toggle { background-color: #222222 }
.dropdown-btn .caret {
    margin-top: 7px;
    margin-left: 0;
}
.dropdown-btn:hover .caret,
.open.btn-group .caret {
    opacity: 1;
    filter: alpha(opacity=100);
}
.dropdown-btn-mini .caret { margin-top: 5px }
.dropdown-btn-small .caret { margin-top: 6px }
.dropdown-btn-large .caret {
    margin-top: 6px;
    border-left-width: 5px;
    border-right-width: 5px;
    border-top-width: 5px;
}
.dropup .dropdown-btn-large .caret {
    border-bottom: 5px solid #000000;
    border-top: 0;
}
.dropdown-btn-primary .caret,
.dropdown-btn-warning .caret,
.dropdown-btn-danger .caret,
.dropdown-btn-info .caret,
.dropdown-btn-success .caret,
.dropdown-btn-inverse .caret {
    border-top-color: #ffffff;
    border-bottom-color: #ffffff;
    opacity: 0.75;
    filter: alpha(opacity=75);
} 
```

[现场演示（jsfiddle）](http://jsfiddle.net/Sherbrow/3R3EV/1/)

[现场演示（jsfiddle）更新](http://jsfiddle.net/Sherbrow/3R3EV/5/)

[现场演示（jsfiddle）更新 2](http://jsfiddle.net/Sherbrow/3R3EV/6/)

PS：不要尝试版本 3 或 4 ......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-02T12:40:22.223

或者，您可以将 CSS 类添加到 btn-group div 并改为执行以下操作：

[http://jsfiddle.net/plankmeister/JsPcg/](http://jsfiddle.net/plankmeister/JsPcg/)

HTML：

```
 <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <div class="pull-left">
                    <div class="btn-group btn-group-merge">
                        <a class="btn" href="#" data-toggle="dropdown"><i class="icon icon-certificate"></i></a>
                        <ul class="dropdown-menu">
                             <li><a href="#">One</a></li>
                             <li><a href="#">Two</a></li>
                             <li><a href="#">Three</a></li>
                        </ul>                            
                    </div>
                    <div class="btn-group btn-group-merge">
                        <a class="btn" href="#" data-toggle="dropdown"><i class="icon icon-comment"></i></a>
                        <ul class="dropdown-menu">
                             <li><a href="#">A B C</a></li>
                             <li><a href="#">D E F</a></li>
                             <li><a href="#">G H I</a></li>
                        </ul>                            
                    </div>                        
                </div>
            </div>
        </div>
    </div> 
```

CSS：

```
 .navbar-fixed-top .btn-group-merge {
        margin-left : -5px;
    }
    .navbar-fixed-top .btn-group-merge:first-child {
        margin-left : 0;
    }
    .navbar-fixed-top .btn-group-merge .btn {
        border-radius: 0 4px 4px 0;
    }
    .navbar-fixed-top .btn-group-merge:first-child .btn {
        border-radius: 4px 0 0 4px;
    } 
```

这将适用于按钮组中的任意数量的按钮，但只有第一个和最后一个会正确呈现。您可以使用一些 CSS-fu 来修复它，但它不会在 IE<10 上呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-29T21:16:38.610

在它自己的 btn-group div 中添加每个集合对我来说是成功的。现在 2 个下拉菜单中的每一个都出现在同一行，并正确打开了它们的相关菜单选项。只需确保每组的 id 都是唯一的。（SP 2016 OnPrem）

```
<div class="btn-group">
            <button class="btn btn-primary dropdown-toggle" id="TranslatorActions" type="button" data-toggle="dropdown" style="display:none"> Translator Actions <span class="caret"></span></button>
            <ul id="TranslatorActionsMenu" class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="TranslatorActions">
                <!–– Drop downs are added via script as needed -->
            </ul>
        </div>
        <div class="btn-group">
            <button class="btn btn-primary dropdown-toggle" id="AdminActions" type="button" data-toggle="dropdown" style="display:none">Admin Actions <span class="caret"></span></button>
            <ul id="AdminActionsMenu" class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="AdminActions">
                <li><a role="menuitem" tabindex="-1" href="javascript:void(0);" onclick="OpenAdminForm();">Open Admin Form</a></li>
            </ul>
        </div> 
```

# ios - 将 Google Calendar API 集成到应用程序中？

> ID：11297972
> 
> 赞同：0
> 
> 时间：2012-07-02T16:56:04.013
> 
> 标签：ios, api, google-calendar-api

是否可以将 Google 日历集成到 iPhone 或 Android 设备的应用程序中？

如果是这样，我会从哪里开始？因为，我已经阅读了整个谷歌日历 API 文档，并且似乎对从哪里开始迷失了方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T08:50:22.677

使用 Google Calendar API 的示例 Objective-C 应用程序在[这里](http://code.google.com/p/google-api-objectivec-client/source/browse/trunk/Examples/CalendarSample/CalendarSampleWindowController.m)。

# asp.net-mvc-3 - 自动填充其他日期时如何使日期保持为空？

> ID：11297975
> 
> 赞同：0
> 
> 时间：2012-07-02T16:56:15.457
> 
> 标签：asp.net-mvc-3

我对此非常陌生，并且正在为一份不应该涉及编程的工作进行编程，所以请保持温和。:)

这个应用程序在 MVC 3 中，我的代码可以很好地使其他两个日期依赖于第一个。但是，第一个日期可以为空。在我添加此代码之前，您可以在不填写该字段的情况下创建一个项目。现在，如果该字段留空，它就会爆炸。我究竟做错了什么？

```
 [HttpPost]
    public ActionResult Create(Procedure procedure)
    {
        if (ModelState.IsValid)
        {
            context.Procedures.Add(procedure);
            if (procedure.Effective != DateTime.MinValue)
            {
                procedure.ScheduledReview = procedure.Effective.Value.AddMonths(-1);
                procedure.UserReview = procedure.Effective.Value.AddMonths(-3);
            }
            context.SaveChanges();
            return RedirectToAction("Index");  
        }

        ViewBag.PossibleProTypes = context.ProTypes;
        ViewBag.PossibleStatus = context.Status;
        ViewBag.PossiblePendingActions = context.PendingActions;
        ViewBag.PossibleOffices = context.Offices;
        return View(procedure);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:07:44.657

尝试这个：

```
 if (procedure.HasValue)
    {
        procedure.ScheduledReview = procedure.Effective.Value.AddMonths(-1);
        procedure.UserReview = procedure.Effective.Value.AddMonths(-3);
    } 
```

空日期时间不等于 DateTime.MinValue，因此您的`if`表达式为真，然后当您尝试使用分配值时可能会抛出 NullReferenceException`procedure.Effective.Value`

# python - 在Linux上批量运行python脚本？

> ID：11297980
> 
> 赞同：-4
> 
> 时间：2012-07-02T16:56:36.987
> 
> 标签：python, linux, batch-file

请让我知道是否有一种方法可以在 Linux 上批量运行多个 python 脚本，就像可以在 Windows 上使用 .bat 文件批量运行多个 python 脚本的方式一样？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T16:59:24.377

创建脚本...

```
#!/bin/sh
# This file is called ~/script.sh

python script1.py
python script2.py 
```

使脚本可执行...

```
chmod +x ~/script.sh 
```

运行脚本...

```
~/script.sh 
```

# mysql - Solr索引mysql和搜索

> ID：11297984
> 
> 赞同：1
> 
> 时间：2012-07-02T16:56:49.720
> 
> 标签：mysql, search, solr, lucene

我想索引我的数据库表。如果我在浏览器中运行：`http://localhost:8983/solr/dataimport?command=full-import`它会返回：

```
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">0</int>
        <lst name="params">
            <str name="command">full-import</str>
        </lst>
    </lst>
    <lst name="initArgs">
        <lst name="defaults">
            <str name="echoParams">explicit</str>
            <str name="config">data-config.xml</str>
            <str name="df">text</str>
        </lst>
    </lst>
    <str name="command">full-import</str>
    <str name="status">idle</str>
    <str name="importResponse"/>
    <lst name="statusMessages">
        <str name="Total Requests made to DataSource">21</str>
        <str name="Total Rows Fetched">743</str>
        <str name="Total Documents Skipped">0</str>
        <str name="Full Dump Started">2012-07-02 18:52:47</str>
        <str name="">Indexing completed. Added/Updated: 20 documents. Deleted 0 documents.</str>
        <str name="Committed">2012-07-02 18:52:57</str>
        <str name="Total Documents Processed">20</str><str name="Time taken">0:0:9.977</str>
    </lst>
    <str name="WARNING">This response format is experimental.  It is likely to change in the future.</str>
</response> 
```

如果我运行`http://localhost:8983/solr/select/?q=pasticceria`它返回这个**错误**

> HTTP 错误 400
> 
> 访问 /solr/select/ 时出现问题。原因：
> 
> 路径中缺少 solr 核心名称

这是我的配置文件：

**数据配置.xml**

```
<dataConfig>
<dataSource type="JdbcDataSource"
            driver="com.mysql.jdbc.Driver"
            url="jdbc:mysql://myhost/mydb"
            user="myuser"
            password="mypsw"/>
<document name="doc">
    <entity name="place" query="SELECT * FROM Place">
        <field column="id_place" name="id_place" />
        <field column="name_place" name="name_place" />
    </entity>
</document> 
```

**架构.xml**

```
<fields>

   <field name="id_place" type="string" indexed="true" stored="true" required="true" /> 
   <field name="name_place" type="text_general" indexed="true" stored="true"/>
   <dynamicField name="*" type="ignored" multiValued="true" />
 </fields>

 <uniqueKey>id_place</uniqueKey>
 <defaultSearchField>text</defaultSearchField>
<solrQueryParser defaultOperator="OR"/> 
```

**solrconfig.xml**

```
 <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
 <lst name="defaults">
   <str name="echoParams">explicit</str>
   <str name="config">data-config.xml</str>
   <str name="df">text</str>
 </lst> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:20:43.323

根据您正在使用多核设置的错误消息，您需要将核心放在 url 中（想象它称为 core0）：

```
http://localhost:8983/solr/core0/select/?q=pasticceria 
```

# dynamic-content - 动态组合框，使用js的动态字段中的文本框（ASP.NET）

> ID：11297991
> 
> 赞同：1
> 
> 时间：2012-07-02T16:57:13.070
> 
> 标签：dynamic-content

我的目的是在动态字段中创建动态文本框和组合框（该字段包括两个文件上传和一个添加动态文本框和组合框的按钮）。一切正常，但是当我尝试删除动态 tb 和 cb 时，它只适用于第一个字段（并且不适用于下一个字段）。所以请帮我解决它！！！！以及如何将数据从数据库填充到动态组合框？？？

我有以下代码：

```
 <html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title> 

<script type = "text/javascript">
    var counter = 2;
    function AddFileUpload() {
        var div = document.createElement('DIV');
        div.setAttribute("id", "FileUploadContainer");
        var nextcounter = counter + 1;

        var input1 = document.createElement("input");
        input1.setAttribute("id", "file" + counter);
        input1.setAttribute("name", "file" + counter);
        input1.setAttribute("type", "file");
        div.appendChild(input1);

        var input2 = document.createElement("input");
        input2.setAttribute("id", "file" + nextcounter);
        input2.setAttribute("name", "file" + nextcounter);
        input2.setAttribute("type", "file");
        div.appendChild(input2);

        var button = document.createElement("input");
        button.setAttribute("id", "remove");
        button.setAttribute("type", "button");
        button.setAttribute("value", "Remove");
        button.setAttribute("onclick", "RemoveFileUpload(this)");
        div.appendChild(button);

        var button1 = document.createElement("input");
        button1.setAttribute("id", "add");
        button1.setAttribute("type", "button");
        button1.setAttribute("value", "Add");
        button1.setAttribute("onclick", "AddCombobox(this)");
        div.appendChild(button1);

        document.getElementById("dynamicForm").appendChild(div);
        counter+=2;
    }
    function RemoveFileUpload(obj) {
        document.getElementById("dynamicForm").removeChild(obj.parentNode);
    }
</script>
<script type = "text/javascript">
    var cbcounter = 1;
    function AddCombobox(obj) {
        var div = document.createElement('DIV');
        div.setAttribute("id", "ComboboxContainer");

        var select = document.createElement("select");
        select.setAttribute("name", "sl" + cbcounter);
        select.setAttribute("runat", "server");

        var option1 = document.createElement("option");
        var text = document.createTextNode(cbcounter.toString());
        option1.appendChild(text);
        select.appendChild(option1);

        var option2 = document.createElement("option");
        text = document.createTextNode((cbcounter + 1).toString());
        option2.appendChild(text);
        select.appendChild(option2);
        div.appendChild(select);

        var textbox = document.createElement("input")
        textbox.setAttribute("name", "txt" + cbcounter);
        textbox.setAttribute("type", "text");
        div.appendChild(textbox);

        var button = document.createElement("input");
        button.setAttribute("id", "removecb");
        button.setAttribute("type", "button");        
        button.setAttribute("onclick", "RemoveCombobox(this)");
        div.appendChild(button);

        obj.parentNode.appendChild(div);
        cbcounter++;
    }
    function RemoveCombobox(obj) {
        document.getElementById("FileUploadContainer").removeChild(obj.parentNode);
    }
</script>

</head>
<body>
    <form id="form1" runat="server" enctype="multipart/form-data" method = "post">

        <span style ="font-family:Arial">Click to add files</span>&nbsp;&nbsp;

        <input id="Button1" type="button" value="add field" onclick = "AddFileUpload()" />
        <br /><br />

        <div id = "FileUploadContainer">

            <input id="file0" name = "file0" type="file" runat="server" />            
            <input id="file1" name = "file1" type="file" runat="server" />  
            <input id="addcb" type="button" value="add" onclick = "AddCombobox(this)" />         

            <div id="ComboboxContainer" runat="server"> 
                <select id="sl0" runat="server">
                    <option value="0"></option>
                    <option value="1"></option>
                </select> 
                <input type="text" name="txt0" value="txt0" />
            </div>

        </div>

        <br />

        <span id="dynamicForm">
        </span>                 

        <asp:Button ID="btnUpload" runat="server" Text="Upload" />
    </form>
</body>
</html> 
```

我非常感谢您的帮助！！！

# sql-server - 字符串数据，右截断错误

> ID：11297993
> 
> 赞同：3
> 
> 时间：2012-07-02T16:57:16.983
> 
> 标签：sql-server, asp-classic

我正在调用一个通过 ASP 将 html 数据插入 varchar(max) 字段的存储过程，原始 html 的大小约为 56kb。proc 的参数也是 varchar(max)。我所做的所有研究都参考了缓冲区大小。关于如何解决这个问题的任何想法？我使用托管服务，因此 SQL 配置更改可能很棘手。

我得到的错误是“字符串数据，右截断”。这是调用存储过程的asp代码。

```
Dim addRS, addCMD
Set addCMD = Server.CreateObject("ADODB.Command")
addCMD.ActiveConnection = objconn
addCMD.CommandType = adCmdStoredProc
addCMD.CommandText = "insert_emailjob"

addCMD.Parameters.Append(addCMD.CreateParameter("emailbody",adVarchar,adParamInput,10000000,emailbody))
set addRS = server.createobject("ADODB.Recordset")
addRS.CursorLocation = adUseClient
addRS.open addCMD 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T11:09:21.177

尝试创建这样的参数：

```
addCMD.Parameters.Append(addCMD.CreateParameter("emailbody", adLongVarchar, adParamInput, Len(emailbody), emailbody)) 
```

# php - 有没有其他方法可以在不威胁安全的情况下在 web 中启用 shell_exec 命令？

> ID：11297995
> 
> 赞同：0
> 
> 时间：2012-07-02T16:57:18.263
> 
> 标签：php, hosting, shell-exec

我有一个带有`shell_exec`脚本中命令的应用程序。由于安全原因，当我使用该脚本时无法托管它会影响服务器。有没有其他方法可以在`shell_exec`不威胁服务器的情况下仍然使用该命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:06:52.083

shell_exec 旨在在服务器上运行。所以回答你的问题，不。除非您的主机为您提供命令行访问权限。然后 PHP 可以利用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:07:31.350

[也许您可以在 Amazon http://aws.amazon.com/free/](http://aws.amazon.com/free/)上使用微型实例，
但对于初学者来说不太可能

# jquery - JQuery：将 HTML 代码添加到 div 的方法？

> ID：11297996
> 
> 赞同：0
> 
> 时间：2012-07-02T16:57:19.300
> 
> 标签：jquery, html, parsing, tags

所以我有这个代码

```
if ($(this).is(".item")) {
    $("#hoverdiv").text("This div has the Item class<br>Test").show();
} 
```

而且我发现了使用 .text 不会使 HTML 代码解析的困难方法。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:58:01.417

使用[html](http://api.jquery.com/html/)而不是`text`：

```
if ($(this).is(".item")){
    $("#hoverdiv").html("This div has the Item class<br>Test").show();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:58:24.287

当你添加`tags`你应该使用[`html()`](http://api.jquery.com/html/)而不是`text()`：

> 设置匹配元素集中每个元素的 HTML 内容。

```
if ($(this).is(".item")){
      $("#hoverdiv").html("This div has the Item class<br>Test").show();
} 
```

# iphone - 如何在 Xcode 模拟器中删除物理形状

> ID：11297997
> 
> 赞同：-2
> 
> 时间：2012-07-02T16:57:19.367
> 
> 标签：iphone, ios, xcode

如何在 Xcode 模拟器中删除物理形状。当我在 Xcode 模拟器中运行我的测试应用程序时，我得到以下形状组合，如何删除它。

![在此处输入图像描述](../Images/7c0ccc2da0636daa9f53885198c0b7f7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:13:59.323

[这](http://www.raywenderlich.com/606/how-to-use-box2d-for-just-collision-detection-with-cocos2d-iphone "这")就是你要找的。祝一切顺利。！:)

# java - 使用泛型多个边界的未经检查/未经确认的强制转换

> ID：11297999
> 
> 赞同：5
> 
> 时间：2012-07-02T16:57:20.617
> 
> 标签：java, generics, casting, sonarqube, findbugs

以下代码使用 Sonar + FindBugs 引发“未经检查/未经确认的演员表”严重违规：

```
1    public static <P extends ComponentContainer & AlignmentHandler> void addComponentAligned(P parent, Component child, Alignment alignment) {
2        parent.addComponent(child);
3        parent.setComponentAlignment(child, alignment);
4    } 
```

关于如何避免这种违规行为的任何想法？

编辑：违规在第 3 行

编辑：方法签名如下： ComponentContainer#addComponent(Component) AlignmentHandler#setComponentAlignment(Component, Alignment)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:10:04.183

您的源代码中没有强制转换，但在编译产生的字节码中有。在字节码中，泛型类型被擦除。擦除`P`是它的第一个界限，`ComponentContainer`. 所以字节码（几乎）等同于以下字节码：

```
public static void addComponentAligned(ComponentContainer parent, Component child, Alignment alignment) {
    parent.addComponent(child);
    ((AlignmentHandler)parent).setComponentAlignment(child, alignment);
} 
```

Findbugs 查看该字节码，并得出结论，转换为 AlignmentHandler 可能会失败，因为（就 findbugs 所见）该方法接受任何 ComponentContainer。

这是一个 findbugs 错误；你应该打开一个错误报告。在我看来，它就像不需要分析源代码就可以修复的东西。字节码还包含真正的（通用）类型，findbugs 应该使用它。