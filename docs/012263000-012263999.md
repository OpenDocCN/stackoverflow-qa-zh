# StackOverflow 问答 12263000-12263999

# jenkins - CloudBees Jenkins SaaS PCI 是否兼容？

> ID：12263003
> 
> 赞同：0
> 
> 时间：2012-09-04T11:56:53.713
> 
> 标签：jenkins, cloudbees

我正在寻找符合 PCI 标准的托管 Jenkins 解决方案，CloudBees 是否提供此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:25:31.677

是的，对于 Jenkins SaaS 的付款 - CloudBees 符合 PCI（即我们如何处理您的 CC） - 假设这就是您的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:59:26.370

CloudBees 会知道答案；问他们。

# json - 如果变量是 JSON 对象，如何检查 node.js？

> ID：12263007
> 
> 赞同：20
> 
> 时间：2012-09-04T11:56:56.253
> 
> 标签：json, node.js

例如，我有变量

```
var x = "this is X value"; 
```

如果变量是 JSON 对象，如何检查 node.js？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-04T12:13:36.240

您的问题不清楚，但假设您要检查变量是否具有未解析的 JSON 字符串：

```
try {
    JSON.parse(x);
} catch (e) {
    console.log("not JSON");
} 
```

# asp.net - 如何使用 asp.net 在内容页面中设置默认按钮？

> ID：12263011
> 
> 赞同：18
> 
> 时间：2012-09-04T11:57:05.183
> 
> 标签：asp.net, button, master-pages, content-pages

我需要设置内容页面默认按钮。我的代码是这样的：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent" 
defaultbutton="BtnSearch" defaultfocus="TxtSearchValue"> 
```

它工作正常，但我的母版页菜单有一个像聊天一样的图像按钮，我可以按回车键触发图像按钮单击事件，但它不会触发内容页面中的默认按钮。

如何处理此类问题？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-04T12:03:12.480

1）您只需要做：

```
this.Form.DefaultButton = this.btnId.UniqueID; 
```

**或者**

2）使用Javascript：

```
function clickButton(e, buttonid)
{

  var evt = e ? e : window.event;

  var bt = document.getElementById(buttonid);

  if (bt)
  {
      if (evt.keyCode == 13)
      {
            bt.click();
            return false;
      }
  }
} 
```

从后面的代码：

```
ContentPage.Attributes.Add("onkeypress", "javascript:return 
clickButton(event,'" + btnSearch.ClientID + "');"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-09T11:03:53.023

我用以下代码解决了类似的问题。

谢谢：http : [//www.w3schools.com/aspnet/prop_webcontrol_panel_defaultbutton.asp](http://www.w3schools.com/aspnet/prop_webcontrol_panel_defaultbutton.asp)

```
<form runat="server">
    <asp:Panel runat="server" DefaultButton="bt1">

        <asp:TextBox runat="server" />
        <asp:Button id="bt1" Text="Default" runat="server" />

    </asp:Panel>
</form> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-09T07:51:37.643

将所有 asp.net 控件和按钮包装在 Panel 内，并使用按钮的 id 设置面板的默认按钮属性。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-04T10:31:47.690

试试这个代码

```
protected void Page_Load(object sender, EventArgs e)
    {
        this.form1.DefaultFocus = txtSearch.ClientID;
        this.Form.DefaultButton = btnSearch.UniqueID;
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-06T05:35:15.447

```
this.Page.Form.DefaultButton = btnSave.ID; 
```

# c++ - 静态 boost::wregex 实例是线程安全的吗？

> ID：12263013
> 
> 赞同：5
> 
> 时间：2012-09-04T11:57:10.923
> 
> 标签：c++, boost

用固定的 boost::wregex 声明一个静态/全局变量是否安全，然后从多个线程使用它而不用担心正则表达式的内部状态（如果 Boost 已使用 BOOST_HAS_THREADS 编译）？

例如

```
boost::wregex g_regex( L"common|test" ); 
```

然后有多个线程调用：

```
if ( boost::regex_search( test_str, g_regex ) )
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T12:01:40.907

[http://www.boost.org/doc/libs/1_51_0/libs/regex/doc/html/boost_regex/background_information/thread_safety.html](http://www.boost.org/doc/libs/1_51_0/libs/regex/doc/html/boost_regex/background_information/thread_safety.html)

> **类 basic_regex 及其类型定义 regex 和 wregex 是线程安全的，因为编译后的正则表达式可以在线程之间安全地共享。匹配算法 regex_match、regex_search 和 regex_replace 都是可重入和线程安全的。**类 match_results 现在是线程安全的，因为匹配的结果可以安全地从一个线程复制到另一个线程（例如，一个线程可能找到匹配项并将 match_results 实例推送到队列中，而另一个线程将它们从另一端弹出），否则为每个线程使用单独的 match_results 实例。

# excel - 是否有 Application.GetOpenFilename 的 Mac/PC 变体？

> ID：12263016
> 
> 赞同：2
> 
> 时间：2012-09-04T11:57:25.067
> 
> 标签：excel, vba, macos

是否有通用的操作系统变体？我希望这段代码可以在 Mac 和 PC 上运行，但这似乎只能在 PC 上运行。

```
strFile = Application.GetOpenFilename("Text Files (.csv),.csv", , "Please selec text file...") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T21:52:29.960

我发现我可以`Application.GetSaveAsFileName`在 PC 和 Mac 上毫无问题地使用。

```
FName = Application.GetSaveAsFilename(fileFilter:=filterString, InitialFileName:=myInitialFileName) 
```

但是我也发现这`Application.GetOpenFilename`在 Mac 上不起作用，所以我做了一些谷歌搜索并想出了这个功能作为 Mac 上的解决方法：

```
#If Mac Then
    tempfnameList = Select_File_Or_Files_Mac()
#Else
    tempfnameList = Application.GetOpenFilename(fileFilter:=filterString, Title:="Select File(s) to Open", MultiSelect:=True)
#End If 
```

这里是实现`Select_File_Or_Files_Mac`：

```
Function Select_File_Or_Files_Mac() As String()
    Dim MyPath As String
    Dim MyScript As String
    Dim MyFiles As String
    Dim MySplit As Variant
    Dim N As Long
    Dim FName As String
    Dim mybook As Workbook

    On Error Resume Next
    MyPath = MacScript("return (path to documents folder) as String")
    'Or use MyPath = "Macintosh HD:Users:Ron:Desktop:TestFolder:"

    ' In the following statement, change true to false in the line "multiple
    ' selections allowed true" if you do not want to be able to select more
    ' than one file. Additionally, if you want to filter for multiple files, change
    ' {""com.microsoft.Excel.xls""} to
    ' {""com.microsoft.excel.xls"",""public.comma-separated-values-text""}
    ' if you want to filter on xls and csv files, for example.
    MyScript = _
    "set applescript's text item delimiters to "","" " & vbNewLine & _
               "set theFiles to (choose file of type " & _
             " {""public.comma-separated-values-text""} " & _
               "with prompt ""Please select a file or files"" default location alias """ & _
               MyPath & """ multiple selections allowed true) as string" & vbNewLine & _
               "set applescript's text item delimiters to """" " & vbNewLine & _
               "return theFiles"

    MyFiles = MacScript(MyScript)
    Dim returnList() As String
    On Error GoTo 0

    If MyFiles <> "" Then
        With Application
            .ScreenUpdating = False
            .EnableEvents = False
        End With

        'MsgBox MyFiles
        MySplit = Split(MyFiles, ",")
        ReDim returnList(LBound(MySplit) To UBound(MySplit))
        For N = LBound(MySplit) To UBound(MySplit)

            returnList(N) = MySplit(N)

        Next N
        With Application
            .ScreenUpdating = True
            .EnableEvents = True
        End With
        Select_File_Or_Files_Mac = returnList
    Else
        ReDim returnList(0 To 0)
        returnList(0) = "False"
        Select_File_Or_Files_Mac = returnList
    End If
End Function 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:41:30.620

它也适用于 MAC (Excel 2011)。看屏幕截图

![在此处输入图像描述](../Images/2c46b566a706fd2ee3ce6509adb47e86.png)

**跟进** 在聊天中进行讨论后，我怀疑错误不是与`Application.GetSaveAsFilename`其他错误有关。在这种情况下，它是`Application.GetOpenFilename`

现在`Application.GetOpenFilename`肯定会在 Mac 中出现问题。我建议您查看此线程，该线程也可以解决您的问题。

[在 VBA 用户窗体中关闭打开的工作簿时出错](https://stackoverflow.com/questions/10612502/error-when-closing-an-opened-workbook-in-vba-userform)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T04:31:50.570

查看 MSDN 上的解决方案 - [Programmatically Selecting Files in Excel for Windows and Excel for Mac](http://msdn.microsoft.com/en-us/library/office/hh710200%28v=office.14%29.aspx)

# asp.net - 2 个中继器控制读取 1 个 XML 文件，但仅显示第一个

> ID：12263017
> 
> 赞同：0
> 
> 时间：2012-09-04T11:57:29.373
> 
> 标签：asp.net, xml, repeater, datarepeater

我现在有两个中继器需要查看 1 个 XML 文件，但只有第一个有效。

XML 当前如下所示：

```
<catalog>
    <categories>
        <ST>Example 1</ST> 
    </categories>

    <SOW>
        <hello>Data Displays</hello>                                                                                    
    </SOW>

</catalog> 
```

我的第一个中继器看起来像：

```
 <form runat="server">
<asp:Repeater id="categories" runat="server">
<HeaderTemplate>
</HeaderTemplate>
<ItemTemplate>
<table width="832" border="0" bgcolor="#FFFFFF">

  <tr>
    <td width="134" align="left"  class="list-content-requirement" style="padding-left: 15px;">ST:</td>
    <td width="688" colspan="6" align="left" style="padding-left: 15px;"><%#Container.DataItem("ST")%></td>
  </tr>

 </table>
</ItemTemplate>
<footertemplate>
</footertemplate>
</asp:Repeater> 
```

我的第二个看起来像这样（在第一个之后）：

```
<asp:Repeater id="SOW" runat="server">
<HeaderTemplate>
</HeaderTemplate>
<ItemTemplate>
<table width="832" border="0" bgcolor="#FFFFFF">

  <tr>
    <td width="134" align="left"  class="list-content-requirement" style="padding-left: 15px;">hello:</td>
    <td width="688" colspan="6" align="left" style="padding-left: 15px;"><%#Container.DataItem("hello")%></td>
  </tr>

 </table>
</ItemTemplate>
<footertemplate>
</footertemplate>
</asp:Repeater> 
 </form> 
```

最后但并非最不重要的是我的脚本：

```
<script  runat="server">
Public Sub Page_Load()
    If Not Page.IsPostBack Then
        Dim cat As String = Request.QueryString("cat")
        Dim mycategories As DataSet = New DataSet()
        mycategories.ReadXml(MapPath("XML/" + cat + ".xml"))
        categories.DataSource = mycategories
        categories.DataBind()
    End If
End Sub

</script> 
```

没有抛出错误，但第二个中继器似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:05:59.717

```
<script  runat="server">
Public Sub Page_Load()
    If Not Page.IsPostBack Then
        Dim cat As String = Request.QueryString("cat")
        Dim mycategories As DataSet = New DataSet()
        mycategories.ReadXml(MapPath("XML/" + cat + ".xml"))

        categories.DataSource = mycategories.Tables("categories")
        categories.DataBind()

        SOW.DataSource = mycategories.Tables("SOW")
        SOW.DataBind()

    End If
End Sub

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:05:03.803

您还没有数据绑定您的母猪中继器控件

添加

```
sow.DataSource = mycategories
sow.DataBind() 
```

# html - 对齐表格中数字的小数点，单元格中出现伪“中心”对齐

> ID：12263023
> 
> 赞同：6
> 
> 时间：2012-09-04T11:58:14.310
> 
> 标签：html, css, html-table, alignment, decimal

我想要一个包含一列十进制数字的表格，小数点前后长度不同，小数点全部对齐。

列宽必须具有“液体”大小，根据需要扩展以容纳任何数据单元中的非常长的数字，或者与该列有关的非常长的 HEADER。

包含整数（无小数点）的单元格仍应显示数字，其数字对齐在同一位置，就好像存在小数字符一样。（例如，数字 512 的数字仍应与仅包含“512”而不是“512”的单元格正确对齐。）

字体应该是无关紧要的；等宽不应该是一个要求。

最后，数字还必须尽可能在列中居中，同时保持小数（可见和隐含！）对齐。具体来说，小数点前字符最多的单元格的“左侧空白间隙”（如果没有十进制字符，则为大多数字符）必须与单元格的“右侧空白间隙”具有相同的宽度第一个十进制字符后字符最多的单元格。

对于最终要求，我特别说“字符”而不是“数字”，因为表格布局应该处理符号字符，例如数字前面的正/负号，以及数字后面的测量单位首字母缩写词等字母。

HTML 4.01 规范，“by the book”，允许使用简单的 HTML 表格轻松完成这样的布局。（在 4 列 colgroup 的两个内部单元格中拆分数据的十进制字符，外部两个 col`width="*"`和内部两个 col `width="0*"`。将单元格与数字的整数部分右对齐，并将单元格左对齐带有小数字符和数字的小数部分。将这两个单元格设置为`nowrap`，然后设置表格的`cellpadding="0" cellspacing="0" rules="groups"`。）

但是很多人说这很糟糕，应该使用 CSS 而不是表格来进行格式化。我也明白，一个包含语义正确数据的表格应该将这些数字完整地保存在一个单元格中。但我还没有找到任何实现所需格式的 CSS 方法！

简单地将单列的文本对齐设置为“中心”并不能保持小数点对齐。

除非我弄错了，否则使用 align="char" 无法处理没有明确小数点的整数，但仍需要像它们一样对齐。

将十进制字符附加到整数，即使隐藏它，在技术上也会破坏数据完整性。

使用不间断空格填充数据不适用于比例（非等宽）字体。而且这种黑客攻击也会破坏数据的完整性。

通过固定像素偏移指定位置不允许列具有真正的“液体”宽度，根据需要呈现以适合列中所有单元格的内容，包括标题单元格，它可以随时包含任何长度的数据.

JavaScript 在渲染后读取表格的结果宽度，然后动态计算像素偏移量，然后通过 DOM 重写格式以“滑动”数据对齐，速度很慢，并且随着数据的跳跃而在视觉上受到干扰。这是一个彻头彻尾的肮脏黑客，甚至比使用表格进行布局还要肮脏！

在我看来，“纯粹主义者”的 CSS-layout + HTML-semantic-data 方法几乎无法完成这种简单但经常需要的布局！我希望有人可以证明我错了，并告诉我如何“正确”地进行这种布局。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-25T17:25:52.893

有一个纯 html/css 解决方案，但它并不漂亮。您需要将十进制对齐的列分成两列，它们之间没有填充。第一列具有整数值并右对齐，第二列具有小数和十进制值。

```
<table>
 <thead>
  <th>customers</th>
  <th colspan="2">balance</th>
 </thead>
 <tbody>
  <tr><td>John</td>  <td>4</td><td>.45</td></tr>
  <tr><td>Jane</td>  <td>20</td><td></td></tr>
  <tr><td>Jim</td>   <td>2,300</td><td>.64</td></tr>
 </tbody>
</table>

<style>
    th {
        text-align: center;
    }
  td:nth-child(2) { 
      text-align: right;
      padding-right: 0;
    }
  td:nth-child(3) { 
      position: relative;
      left: -0.2em;
      text-align: left;
      padding-left: 0;
    }
</style> 
```

您还可以使用“.integer”和“.decimal”之类的类，而不是 :nth-child 选择器。那会更健壮，但我试图保持标记简短。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:14:02.170

原始 HTML 没有办法做到这一点。我写了一个jQuery插件来解决这个问题。见[https://github.com/ndp/align-column](https://github.com/ndp/align-column)

与未损坏的表一起使用很简单：

`$('table').alignColumn(3);`对齐列索引 3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:09:39.053

我认为“charoff”属性是您所需要的。不幸的是，许多浏览器不支持它......

[http://www.w3.org/TR/1999/REC-html401-19991224/struct/tables.html#adef-charoff](http://www.w3.org/TR/1999/REC-html401-19991224/struct/tables.html#adef-charoff)

您是否尝试将每个数字分成 2 个字符串？例如

“1234.567”将是“1234”。和“567”

然后你可以把第一个字符串放在一个单元格中（右对齐），另一部分放在下一个单元格中（左对齐）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T19:58:10.450

鉴于您的要求，没有解决方案（即使是更简单的对齐小数点的问题）。

# php - WordPress模板文件中的PHP if/else结构不起作用

> ID：12263027
> 
> 赞同：2
> 
> 时间：2012-09-04T11:59:01.873
> 
> 标签：php, wordpress

关于 WordPress 模板文件中的一段 PHP 代码的问题。

该模板包含以下代码：

```
<h1><?php the_title(); ?></h1> 
```

我希望仅在标题不是“主页”时才打印标题。

但是这段代码不起作用：

```
<?php if (the_title()!='Home'); ?>
   <h1><?php the_title(); ?></h1>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T12:00:46.243

[`the_title()`](http://codex.wordpress.org/Function_Reference/the_title)回声，它不返回它的标题。

改为使用[`get_the_title()`](http://codex.wordpress.org/Function_Reference/get_the_title)。

```
<?php if (get_the_title() != 'Home'): ?>
   <h1><?php the_title(); ?></h1>
<?php endif; ?> 
```

顺便说一句，您似乎正在尝试检测您是否在主页上。检查标题可能很不稳定，因为它可能会改变。

改为使用[`is_home()`](http://codex.wordpress.org/Function_Reference/is_home)。

```
<?php if ( ! is_home()): ?>
   <h1><?php the_title(); ?></h1>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:01:19.253

`<?php if (the_title()!='Home'): ?>`

```
 ^ 
```

使用`:`代替`;`

[关联](http://php.net/manual/en/control-structures.elseif.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:07:05.207

或者你可以使用

[http://codex.wordpress.org/Function_Reference/is_front_page](http://codex.wordpress.org/Function_Reference/is_front_page)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T13:52:47.833

另一个简单的解决方案：

```
<?php if (the_title()!='Home') { ?>
   <h1><?php the_title(); ?></h1>
<?php } ?> 
```

# python - 如何从python中的xml sax解析器获取结果

> ID：12263029
> 
> 赞同：7
> 
> 时间：2012-09-04T11:59:04.400
> 
> 标签：python, xml, sax

我正在使用 xml sax 解析器来解析 xml 文件，下面是我的代码

**xml文件代码：**

```
<job>
    <title>Registered Nurse-Epilepsy</title>
    <job-code>881723</job-code>
    <detail-url>http://search.careers-hcanorthtexas.com/s/Job-Details/Registered-Nurse-Epilepsy-Job/Medical-City/xjdp-cl289619-jf120-ct2181-jid4041800?s_cid=Advance
    </detail-url>
    <job-category>Neuroscience Nursing</job-category>
    <description>
        <summary>
            <div class='descriptionheader'>Description</div><P STYLE="margin-top:0px;margin-bottom:0px"><SPAN STYLE="font-family:Arial;font-size:small">Utilizing the standards set forth for Nursing Practice by the ANA and ONS, the RN will organize, modify, evaluate, document and maintain the plan of care for Epilepsy and/or Neurological patients. It will include individualized, family centered, holistic, supportive, and safe age-specific care.</SPAN></P><div class='qualificationsheader'>Qualifications</div><UL STYLE="list-style-type:disc"> <LI>Graduate of an accredited school of Professional Nursing.</LI> <LI>BSN preferred </LI> <LI>Current licensure with the Board of Nurse Examiners for the State of Texas</LI> <LI>Experience in Epilepsy Monitoring and/or Neurological background preferred.</LI> <LI>ACLS preferred, within 6 months of hire</LI> <LI>PALS required upon hire</LI> </UL>
       </summary>
    </description>
    <posted-date>2012-07-26</posted-date>
    <location>
       <address>7777 Forest Lane</address>
       <city>Dallas</city>
       <state>TX</state>
       <zip>75230</zip>
       <country>US</country>
    </location>
    <company>
       <name>Medical City (Dallas, TX)</name>
      <url>http://www.hcanorthtexas.com/careers/search-jobs.dot</url>
    </company>
</job> 
```

**Python代码**：（部分代码清除我的疑问，直到开始元素功能）

```
from xml.sax.handler import ContentHandler
import xml.sax
import xml.parsers.expat
import ConfigParser

class Exact(xml.sax.handler.ContentHandler):
  def __init__(self):
    self.curpath = []

  def startElement(self, name, attrs):
    print name,attrs
    self.clearFields()

  def endElement(self, name):
    pass

  def characters(self, data):
    self.buffer += data

  def clearFields():
    self.fields = {}
    self.fields['title'] = None
    self.fields['job-code'] = None
    self.fields['detail-url'] = None
    self.fields['job-category'] = None
    self.fields['description'] = None
    self.fields['summary'] = None
    self.fields['posted-date'] = None
    self.fields['location'] = None
    self.fields['address'] = None
    self.fields['city'] = None
    self.fields['state'] = None
    self.fields['zip'] = None
    self.fields['country'] = None
    self.fields['company'] = None
    self.fields['name'] = None
    self.fields['url'] = None

    self.buffer = ''

if __name__ == '__main__':
  parser = xml.sax.make_parser()
  handler = Exact()
  parser.setContentHandler(handler)
  parser.parse(open('/path/to/xml_file.xml')) 
```

**result** : 上述打印语句的结果如下所示

```
job     <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
title   <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
job-code <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
detail-url <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
job-category <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
description  <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
summary       <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
posted-date   <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
location      <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
address       <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
city          <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
state         <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
zip           <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
country       <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
company       <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
name          <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70>
url           <xml.sax.xmlreader.AttributesImpl instance at 0x2c0ba70> 
```

正如您在上面看到的那样，我从 print 语句中获取`name`和获取`attrs`，但现在我的全部意图是获取该名称的值，如何获取上面所有这些标签的值，因为我只获取节点名称而不是值。

**编辑代码：**

我真的很困惑如何将数据从节点映射到字典中的键，如上所述

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T12:18:12.157

要获取元素的内容，您需要覆盖`characters`方法...将其添加到您的处理程序类：

```
def characters(self, data):
    print data 
```

但是请注意这一点：解析器不需要在一个块中为您提供所有数据。您应该使用内部缓冲区并在需要时读取它。在我的大部分 xml/sax 代码中，我执行以下操作：

```
class MyHandler(xml.sax.handler.ContentHandler):
    def __init__(self):
        self._charBuffer = []

    def _flushCharBuffer(self):
        s = ''.join(self._charBuffer)
        self._charBuffer = []
        return s

    def characters(self, data):
        self._charBuffer.append(data) 
```

...然后在我需要数据的元素末尾调用 flush 方法。

对于您的整个用例 - 假设您有一个包含多个职位描述的文件并想要一个包含职位的列表，其中每个职位都是字段的字典，请执行以下操作：

```
class MyHandler(xml.sax.handler.ContentHandler):
    def __init__(self):
        self._charBuffer = []
        self._result = []

    def _getCharacterData(self):
        data = ''.join(self._charBuffer).strip()
        self._charBuffer = []
        return data.strip() #remove strip() if whitespace is important

    def parse(self, f):
        xml.sax.parse(f, self)
        return self._result

    def characters(self, data):
        self._charBuffer.append(data)

    def startElement(self, name, attrs):
        if name == 'job': self._result.append({})

    def endElement(self, name):
        if not name == 'job': self._result[-1][name] = self._getCharacterData()

jobs = MyHandler().parse("job-file.xml") #a list of all jobs 
```

如果您一次只需要解析一个作业，您可以简化列表部分并丢弃该`startElement`方法 - 只需将 _result 设置为 dict 并直接在`endElement`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T12:16:08.167

要获取节点的文本内容，需要实现 characters 方法。例如

```
class Exact(xml.sax.handler.ContentHandler):
  def __init__(self):
    self.curpath = []

  def startElement(self, name, attrs):
    print name,attrs

  def endElement(self, name):
    print 'end ' + name

  def characters(self, content):
    print content 
```

会输出：

```
job <xml.sax.xmlreader.AttributesImpl instance at 0xb6d9baec>

title <xml.sax.xmlreader.AttributesImpl instance at 0xb6d9bb0c>
Registered Nurse-Epilepsy
end title

job-code <xml.sax.xmlreader.AttributesImpl instance at 0xb6d9bb2c>
881723
end job-code

detail-url <xml.sax.xmlreader.AttributesImpl instance at 0xb6d9bb2c>
http://search.careers-hcanorthtexas.com/s/Job-Details/Registered-Nurse-Epilepsy-Job/Medical-City/xjdp-cl289619-jf120-ct2181-jid4041800?s_cid=Advance

end detail-url 
```

（狙击）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T12:21:50.017

我建议使用 pulldom。这允许您使用 sax 解析器加载 doc，当您找到感兴趣的节点时，仅将该节点加载到 dom 片段中。

这是一篇关于使用它的一些示例的文章：[https ://www.ibm.com/developerworks/xml/library/x-tipulldom/index.html](https://web.archive.org/web/20150108212346/https://www.ibm.com/developerworks/xml/library/x-tipulldom/index.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T12:16:59.740

您还需要实现一个[`characters`处理程序](http://docs.python.org/library/xml.sax.handler.html#xml.sax.handler.ContentHandler.characters)：

```
def characters(self, content):
    print content 
```

但这可能会为您提供块中的文本，而不是每个标签一个块。

不过，请帮自己一个大忙，改用[ElementTree API](http://docs.python.org/library/xml.etree.elementtree.html)；该 API 远比 XML DOM API 更 Pythononic 且更易于使用。

```
from xml.etree import ElementTree as ET

etree = ET.parse('/path/to/xml_file.xml')
jobtitle = etree.find('job/title').text 
```

如果您想要的只是直接转换为字典，请查看这个方便的 ActiveState Python Cookbook 食谱：[将 XML 转换为字典并返回](http://code.activestate.com/recipes/573463-converting-xml-to-dictionary-and-back/)。请注意，它也使用 ElementTree API。

如果您有一组想要查找的现有元素，只需在`find()`方法中使用这些元素：

```
fieldnames = [
    'title', 'job-code', 'detail-url', 'job-category', 'description',
    'summary', 'posted-date', 'location', 'address', 'city', 'state',
    'zip', 'country', 'company', 'name', 'url']
fields = {}

etree = ET.parse('/path/to/xml_file.xml')

for field in fieldnames:
    elem = etree.find(field)
    if field is not None and field.text is not None:
        fields[field] = elem.text 
```

# java - 使用 ajax primefaces 渲染 panelgrid

> ID：12263034
> 
> 赞同：2
> 
> 时间：2012-09-04T11:59:21.520
> 
> 标签：java, jakarta-ee, jsf-2, primefaces, rendering

我有这个

```
<p:selectOneMenu  id="dec" value="#{editCommandController.myCom.decision}" >  
                        <f:selectItems value="#{editCommandController.decisions}" />  
                        <p:ajax update="etat :myform:alors" event="change" />
                    </p:selectOneMenu> 
```

它允许禁用此功能

```
<p:selectOneMenu  id="etat" value="#{editCommandController.myCom.etat}" disabled="#{editCommandController.myCom.decision eq 'rejettée'}" >  
                        <f:selectItems value="#{editCommandController.etats}" />   
                    </p:selectOneMenu> 
```

当检查条件时，我还想在检查相同条件时隐藏此面板网格：

```
 <h:panelGrid id="alors"   rendered="#{editCommandController.myCom.decision ne 'rejettée'}" >
                    <p:dataTable id="cars" style="width: 80px;" var="car" value="#{editCommandController.pdm}" paginator="true" rows="10"  
                                 selection="#{editCommandController.selectedPapier}" selectionMode="single" >  

                        <p:ajax event="rowSelect" listener="#{editCommandController.onRowSelect()}"   
                                update=":myform:jesuis" />  

                        <f:facet name="header">  
                            RadioButton Based Selection  
                        </f:facet>                    

                        <p:column headerText="libelle">  
                            #{car.libelle}  
                        </p:column>  

                        <p:column headerText="format">  
                            #{car.format}  
                        </p:column>  

                        <p:column headerText="stock" >  
                            #{car.stock}  
                        </p:column>  

                    </p:dataTable>  

                    <h:outputText  id="jesuis" value=" c est la papier : #{editCommandController.selectedPapier.libelle}"  />

                    <h:panelGrid columns="2" cellpadding="5" style="margin-top: 22px;">  
                        <h:outputLabel value="Reliure :" for="city" />
                        <p:selectOneMenu id="city" value="#{addPapierController.choixReliure}">  
                            <f:selectItem itemLabel="choisir reliure" itemValue="" />  
                            <f:selectItems value="#{addPapierController.libelleReliures}" />  
                            <p:ajax 
                                listener="#{addPapierController.handleCityChange}" />  
                        </p:selectOneMenu>
                    </h:panelGrid>

                </h:panelGrid> 
```

但我注意到它在第一次加载页面时检查了 panelgrid

你有什么想法让这个功能像上面的 selectonemenu 一样一直工作，谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T12:05:59.140

用 . 包围 panelGrid `p:outputPanel`。然后，在“dec”selectOneMenu 中，也更新了 outputPanel。假设所有这些组件都在同一个表单中，它看起来像这样：

```
<p:selectOneMenu  id="dec" value="#{editCommandController.myCom.decision}" >  
       <f:selectItems value="#{editCommandController.decisions}" />  
       <p:ajax update="etat gridContainer :myform:alors" event="change" />
</p:selectOneMenu>  

<p:outputPanel id="gridContainer" layout="block" >
    <h:panelGrid id="alors" rendered="#{editCommandController.myCom.decision ne 'rejettée'}" >
         <!-- panel grid contents here.. -->  
    </h:panelGrid>
</p:outputPanel> 
```

# javascript - ExtJS 自动调整大小选项卡面板

> ID：12263035
> 
> 赞同：0
> 
> 时间：2012-09-04T11:59:21.697
> 
> 标签：javascript, extjs, extjs4.1

我们有一个视口，在其中我们有一个用于导航树的*西部区域*和一个用于内容（网格、表单等）的*中心区域，其中有一个**选项卡面板*。

*单击导航树*中的任何子菜单项，我们会动态地将内容（选项卡）添加到此选项卡面板。

这些选项卡不会在窗口重新调整大小时重新调整大小。

动态添加标签的功能是：

```
function AddNewTab(title, url, closable) {
    var tabs = Ext.getCmp('tabs');
    tabs.add({
        xtype: 'panel',
        title: title,
        closable: closable,
        autoScroll: true,
        layout: 'fit',
        autoLoad: {
            url: url,
            scripts: true
        }
    });
    tabs.setActiveTab(tabs.items.length - 1);
} 
```

**更新**：这是一切正常的正常状态 ![这是一切正常的正常状态](../Images/bafd219c4144aff0b6d93a405bbad249.png)

但是当我们调整窗口大小或折叠右侧面板时，选项卡面板不会重新调整大小以填充整个区域。 ![但是当我们调整容器大小时，选项卡面板不会重新调整大小以填充整个区域。](../Images/31457dfbcc6a9d6ec44cd961042dee4f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:42:59.403

中心区域的布局应该是 'fit' 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T23:46:23.417

这帮助了我。

```
Ext.EventManager.onWindowResize(myEvilPanel.doLayout, myEvilPanel); 
```

# ios - iOS推送通知监听器？

> ID：12263039
> 
> 赞同：0
> 
> 时间：2012-09-04T11:59:40.827
> 
> 标签：ios, push-notification, listener, utility

我不知道是否可以编写一个在后台运行的实用程序。如果可能，如何阅读所有推送通知？Apple 允许吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:05:56.677

您有多种选择：

**推送通知** 这是对电池和设备资源最友好的；但是，需要通知系统的服务器端实现。--- 可能不是您当前正在寻找的，但在即时通知和网络丢失处理方面绝对是“最佳”解决方案。

**在后台运行应用程序** 应用程序可以在后台运行并不断检查服务器是否有新数据等......但是，由于iOS的进程管理器可能会使您的应用程序进入睡眠状态，因此不能保证应用程序可以运行很长时间或意外退出。--- 可能更接近您正在寻找的内容，并且可能适用于基本测试；但不是很可靠。

**支持多任务处理** 这显然是“最好”的方式。实现对多任务处理的支持，并让 iOS 在检测到流量时唤醒您的应用程序。这可以使用“voip”背景模式来完成。

UIApplication 委托有方法

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

您需要实施。这会在应用程序运行时收到通知。

如果您的应用程序当前未运行并且收到通知，则可以启动您的应用程序

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

# jquery - jquery导航栏：子子菜单的onmouseover和onmouseout工作不顺畅

> ID：12263044
> 
> 赞同：0
> 
> 时间：2012-09-04T12:00:09.420
> 
> 标签：jquery, navigationbar

当我将鼠标悬停在#subsubmenu1 上时，onmouseover 和 onmouseout 事件处理程序无法正常工作。当我尝试将鼠标悬停在公司价格链接上时，#subsubmenu1 立即消失。我哪里错了？

我的代码在：http: [//jsfiddle.net/DhA2Z/6/](http://jsfiddle.net/DhA2Z/6/)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:15:47.597

CSS继承有问题。包含“公司价格”的无序列表未显示为块元素。因此，除非您直接将鼠标悬停在文本上，否则它不会注册悬停事件。根据 Chrome 调试器，它正在尝试实现`display: block;`，但其他东西正在覆盖它。这几乎可以肯定是由于列表继承了其所有祖先列表的样式属性。

我不认为有一个简单的解决方法。菜单上还有一些其他错误元素可能与相关问题有关。

# ruby-on-rails - 如何使用谷歌图形 API 绘制每列具有多个值的折线图

> ID：12263046
> 
> 赞同：1
> 
> 时间：2012-09-04T12:00:20.220
> 
> 标签：ruby-on-rails, google-groups, google-groups-api

我想使用 google graph API 以如下方式绘制折线图

```
 I have 24 values mean (1 day = 24 hours) in x-axis from 0 to 23
 And i have 3 column in y-axis today , yesterday and week. 
```

所以我想在一天中的一小时内分别显示今天、昨天和一周的 12 个值。

例如，我有 6 小时，然后最多 36 个值应显示在 y 轴上。今天、本周和昨天各 12 个。

我如何使用下面的代码来做到这一点。

```
 <html>
  <head>
   <script type="text/javascript" src="https://www.google.com/jsapi"></script>
   <script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
      var data = google.visualization.arrayToDataTable([
          ['Year', 'Sales', 'Expenses'],
          ['2004',  1000,      400],
          ['2004',  1011,      420],
          ['2004',  1004,      430],
          ['2005',  1170,      460],
          ['2006',  660,       1120],
          ['2007',  1030,      540]
      ]);

      var options = {
          title: 'Company Performance' ,
          hAxis: { minValue: 0, maxValue: 15},
          vAxis: { minValue: 0, maxValue: 15},
          legend: 'none'

      };

      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
  }
 </script>
</head>
 <body>
     <div id="chart_div" style="width: 680px; height: 285px;margin-top: 10px;margin-left: 10px;"></div>
  </body>
 </html> 
```

谢谢

# php - 如何找到 Google 快讯提要网址？

> ID：12263048
> 
> 赞同：2
> 
> 时间：2012-09-04T12:00:24.930
> 
> 标签：php, rss, google-api, google-alerts

如何找到特定关键字的 Google 快讯提要网址？

**示例网址：** [http ://www.google.com/reader/view/?hl=tr#stream/user/13172112245289928208/state/com.google/alerts/10573968695315493577](http://www.google.com/reader/view/?hl=tr#stream/user/13172112245289928208/state/com.google/alerts/10573968695315493577)

红框内的数字表示用户ID，黄框内的数字表示Feed url。

> 我怎样才能生成这个网址？是否有生成这些数字的算法？

也许这些数字是随机生成的。

![在此处输入图像描述](../Images/8e326c1146a8e6831c2de001ddd72fac.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:01:45.320

我相信您已经创建了一个 google 警报，并且您在阅读器部分获得了这个 url。红色整数表示用户 ID，黄色表示唯一的警报 ID。

有两种方法可以获得这个 url。这个 url 实际上是一个 rss 提要。实际的提要 url 将是-

[http://www.google.com/alerts/feeds/userid/alertid](http://www.google.com/alerts/feeds/userid/alertid)

在您的情况下，它将是-

[http://www.google.com/alerts/feeds/13172112245289928208/10573968695315493577](http://www.google.com/alerts/feeds/13172112245289928208/10573968695315493577)

这指向您的用户查询儿子 dakika。

现在，您可以使用正则表达式获取这些数字，然后将它们附加到网址 www.google.com/alerts/feeds/ 以创建正确的提要。

问候， Vibhor Jaiswal

# search - 在editedField BlackBerry 中显示默认文本

> ID：12263050
> 
> 赞同：2
> 
> 时间：2012-09-04T12:00:36.287
> 
> 标签：search, blackberry, label

当用户输入文本“搜索：”时，我正在尝试将默认标签添加到 searchField 中。我试过这个

```
editedField.setLabel("search:") 
```

但这不起作用，因为当我放置字符串搜索时，不要擦除。例如，如果我输入“a”，它会显示 searcha。你能帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:15:43.543

基本上，您需要在`TextField`.

您需要覆盖其`paint`方法，您可以使用以下代码：

```
protected void paint(Graphics graphics) {
   if (beditfield.getText().length() == 0) 
   {
        graphics.setColor(Color.GRAY);
        graphics.drawText("Search", 0, 0);
   }
   graphics.setColor(Color.WHITE);
   invalidate();
   super.paint(graphics);
} 
```

它检查文本字段的长度。当它为零时，它会在那里绘制提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:22:36.637

重写[onFocus](http://tinyurl.com/d9lk57e)方法，当字段获得焦点时，清除其内容。

要设置文本字段内容，请使用[setText](http://tinyurl.com/cmojvdw)方法，而不是`setLabel`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T13:14:12.117

试试这个 -

```
private String test="";
final EditField email_edit = new EditField("", "", 30,BasicEditField.FILTER_DEFAULT) {
    String emptyString = "Search";
    protected void paint(Graphics g) {
        int oldColor = g.getColor();
        try {
             g.setColor(0x959595);
             test = super.getText();
             if ( test == null || test.length() < 1 ) {
                 g.drawText(emptyString, 0, 0); 
             }
             super.paint(g);
        } finally {
             g.setColor(oldColor);
        }
    }
}; 
```

# php - SugarCRM CE 6.5.4 中帐户和活动模块之间的一对一关系

> ID：12263059
> 
> 赞同：0
> 
> 时间：2012-09-04T12:01:20.700
> 
> 标签：php, crm, sugarcrm

我想在 Account 和 Campaign 模块之间创建一对一的关系（默认情况下已经存在一对多的关系）。之后，我想在广告系列编辑视图中显示一个字段（自动完成或搜索）以选择与该广告系列相关的帐户。

我无法找到正确的路径天气来改变现有的一对多关系或创建新关系。任何帮助将不胜感激。

如果可能，请指导我如何定义“VarDefs”定义，我想在没有工作室的情况下在代码级别执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:32:20.153

您可以通过 Studio 添加新的一对一关系。有关更多详细信息，请参阅本指南...

[http://support.sugarcrm.com/02_Documentation/01_Sugar_Editions/05_Sugar_Community_Edition/Sugar_Community_Edition_6.5/Sugar_Community_Edition_Administration_Guide_6.5.0/07_Developer_Tools#Creating_Relationships](http://support.sugarcrm.com/02_Documentation/01_Sugar_Editions/05_Sugar_Community_Edition/Sugar_Community_Edition_6.5/Sugar_Community_Edition_Administration_Guide_6.5.0/07_Developer_Tools#Creating_Relationships)

# weblogic - weblogic 10.3.6 上的 Bean 验证 ADF 和 myFaces extVal

> ID：12263062
> 
> 赞同：0
> 
> 时间：2012-09-04T12:01:32.047
> 
> 标签：weblogic, bean-validation, jsf-1.2, oracle-adf, weblogic11g

我尝试在 Weblogic 10.3.6（JSF 1.2，将 JPA 修补到 2.0）和 ADF Faces 上使用 myFaces extVal Bean Validation。是否可以在 Weblogic 10.3.6 上同时使用“ADF Faces”和“Apache myFaces extVal Bean Validation”？

我尝试添加以下库：

```
asm-1.5.3.jar
cglib-2.1_3.jar
myfaces-extval-bean-validation-1.2.5.jar
myfaces-extval-core-1.2.5.jar
myfaces-extval-property-validation-1.2.5.jar
myfaces-extval-trinidad-support-1.2.5.jar
validation-api-1.0.0.GA.jar 
```

结果是以下异常：

```
java.lang.ClassCastException:    
org.apache.myfaces.trinidadinternal.renderkit.core.CoreRenderingContext cannot be cast to oracle.adf.view.rich.render.RichRenderingContext
at oracle.adf.view.rich.render.RichRenderer.getRichRenderingContext(RichRenderer.java:1230)
at oracle.adf.view.rich.render.RichRenderer.encodeAll(RichRenderer.java:1259)
at org.apache.myfaces.trinidad.render.CoreRenderer.encodeEnd(CoreRenderer.java:341)
at org.apache.myfaces.extensions.validator.core.renderkit.ExtValLazyRendererProxy.encodeEnd(ExtValLazyRendererProxy.java:77)
at org.apache.myfaces.extensions.validator.core.renderkit.ExtValRendererWrapper.encodeEnd(ExtValRendererWrapper.java:312)
at org.apache.myfaces.trinidad.component.UIXComponentBase.encodeEnd(UIXComponentBase.java:767)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:937)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:933)
at com.sun.faces.application.ViewHandlerImpl.doRenderView(ViewHandlerImpl.java:266)
at com.sun.faces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:197)
at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:189)
at org.apache.myfaces.trinidadinternal.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:193)
at oracle.adfinternal.view.faces.lifecycle.LifecycleImpl._renderResponse(LifecycleImpl.java:911)
at oracle.adfinternal.view.faces.lifecycle.LifecycleImpl._executePhase(LifecycleImpl.java:367)
at oracle.adfinternal.view.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:222)
at org.apache.myfaces.extensions.validator.core.startup.ExtValLifecycleWrapper.render(ExtValLifecycleWrapper.java:79)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:266)
at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at oracle.adf.model.servlet.ADFBindingFilter.doFilter(ADFBindingFilter.java:205)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at oracle.adfinternal.view.faces.webapp.rich.RegistrationFilter.doFilter(RegistrationFilter.java:106)
at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:446)
at oracle.adfinternal.view.faces.activedata.AdsFilter.doFilter(AdsFilter.java:60)
at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl$FilterListChain.doFilter(TrinidadFilterImpl.java:446)
at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl._doFilterImpl(TrinidadFilterImpl.java:271)
at org.apache.myfaces.trinidadinternal.webapp.TrinidadFilterImpl.doFilter(TrinidadFilterImpl.java:177)
at org.apache.myfaces.trinidad.webapp.TrinidadFilter.doFilter(TrinidadFilter.java:92)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at oracle.adf.library.webapp.LibraryFilter.doFilter(LibraryFilter.java:179)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at oracle.security.jps.ee.http.JpsAbsFilter$1.run(JpsAbsFilter.java:119)
at java.security.AccessController.doPrivileged(Native Method)
at oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:315)
at oracle.security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:442)
at oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:103)
at oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:171)
at oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:71)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:139)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3715)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:178) 
```

所以原因是我把 ADF 的实现和 myFaces 的实现混在一起了，对吧？所以我想在 Weblogic 10.3.6 上将 extVal 用于 JSF 1.2 和 ADF 是不可能的。

我看过以下网站： [http](http://buttso.blogspot.de/2011/05/jsf-20-jpa-20-and-bean-validation-on.html) : //buttso.blogspot.de/2011/05/jsf-20-jpa-20-and-bean-validation-on.html Weblogic 10.3 上使用了 JSF 2.0、JPA 2.0 和 BeanValidation . 所以就我而言，不可能使用 JSF 2.0。我必须使用 ADF（Faces）。

我只是想确保没有其他可能让它工作。

问候，

最大限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:47:37.880

“Weblogic 10.3 上使用了 JSF 2.0、JPA 2.0 和 BeanValidation。所以在我的情况下，不可能使用 JSF 2.0。而且我必须使用 ADF（Faces）。”

实际上它的 JDeveloper 11g R2 (11.1.2.2) 支持带有 ADF Faces 的 JSF 2.0。尽管 JDeveloper 11g R2 基于 WLS 10.3.6，但它需要来自客户支持的特定补丁才能工作。因此您可以升级到 JSF 2.0 和 ADF Faces，但您需要一个特定的 JDeveloper（因此是 ADF Faces）版本和一个补丁

# android - 使用 aSmack、Eclipse 和增强的调试器调试 XMPP Android 客户端。

> ID：12263064
> 
> 赞同：1
> 
> 时间：2012-09-04T12:01:32.873
> 
> 标签：android, eclipse, xmpp, smack, asmack

我正在使用带有 Eclipse的 Android XMPP 库[aSmack制作应用程序。](https://github.com/flowdalic/asmack)我无法按照 smack 文档的说明在单独的窗口中启动调试：

[http://www.igniterealtime.org/builds/smack/docs/latest/documentation/debugging.html](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/debugging.html)

我在 libs 文件夹中导入了 smackx-debug.jar 并将这一行添加到代码中：

Connection.DEBUG_ENABLED = false;

调试发生，但在 logcat 的控制台中，而不是增强的调试器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T07:39:12.010

aSmack 无法使用 smack 的增强调试器。Android 应用程序不可能在您运行 eclipse 的 PC 上绘制一个新窗口。

相反，所有 XMPP 流量都会记录到 Android 日志中，并且可以使用 DDMS 或`adb shell logcat`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-12T19:20:23.913

我正在使用 smack 4.3.0 在 logcat 中启用调试

```
XMPPTCPConnectionConfiguration conf = XMPPTCPConnectionConfiguration.builder()
            .setXmppDomain(mServiceName)
            .setHost(mServiceName)
            .setResource("Rooster+")

            .setSendPresence(true)
            .enableDefaultDebugger() 
```

.enableDefaultDebugger()，这让我明白了

# php - 将 magento 移动到新服务器会破坏其功能

> ID：12263068
> 
> 赞同：0
> 
> 时间：2012-09-04T12:02:01.967
> 
> 标签：php, javascript, mysql, magento, magento-1.6

我已将 magento 安装从当前的共享主机移至新的 VPS。我还将它移到了登台服务器上。

它在登台服务器上运行良好，但在 VPS 上却不行。

我得到的问题（尝试添加产品时）是：

```
Uncaught ReferenceError: productAddToCartForm is not defined 
```

我在两个系统上移动了数据库和完整的源代码库......所以我真的不明白为什么它不能在生产 VPS 上运行。

通过*谷歌搜索*，它似乎经常是 jQuery 和 Prototype 之间的冲突，但我使用的是*noConflict*（然后它在登台服务器上工作......）

**这里有什么问题？**

我也尝试过重新配置文件夹权限，但 Web Inspector 没有找到任何 404。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:32:09.533

弹出 firebug 打开，关闭浏览器缓存，然后在 .net 面板中查找任何未加载的 js。这可能引用了旧网址，您需要在系统->配置->网络管理设置中修复它。

# html - 使用 dojo.buttons 加载外部 Dojo HTML 片段文件

> ID：12263070
> 
> 赞同：1
> 
> 时间：2012-09-04T12:02:02.407
> 
> 标签：html, dojo, load, external

我正在尝试通过单击按钮来加载外部 HTML 文件（这是一个 dojo 片段）。

所以类似于：

索引.html

```
<div dojoType="dojox.mobile.View" id="homepageView">
    <button data-dojo-type="dojox.mobile.Button" id="reportNew">Report a New Incident</button>
</div> 
```

view1.html

```
<div data-dojo-type="dojox.mobile.View">
   <h1 data-dojo-type="dojox.mobile.Heading" data-dojo-props='back:"Home">View 1</h1>
</div> 
```

如何将 view1.html 加载到 homepageView 视图中？

*我知道以下方法：*

索引.html

```
<ul data-dojo-type="dojox.mobile.RoundRectList">
   <li data-dojo-type="dojox.mobile.ListItem" data-dojo-props='transition:"slide", url:"view1.html"'>
      External View #1 (sync)
   </li>
</ul> 
```

view1.html

```
<div data-dojo-type="dojox.mobile.View">
    <h1>view1.html</h1>
    <ul data-dojo-type="dojox.mobile.EdgeToEdgeList">
    <li data-dojo-type="dojox.mobile.ListItem">
        Jack Coleman
    </li>
    </ul>
</div> 
```

由于某种原因`data-dojo-props='transition:"slide", url:"view1.html"'` ，就我所尝试的而言，它不适用于按钮 dojo 类型。

# c# - 带有 MVVM 的上下文相关命令

> ID：12263080
> 
> 赞同：2
> 
> 时间：2012-09-04T12:02:34.417
> 
> 标签：c#, wpf, mvvm, key-bindings, relaycommand

我有一个自定义组件，它基本上是一个带有附加按钮的文本框。该按钮应该对文本框执行操作；例如，单击按钮可以用一些随机字符串填充文本框。

文本字段绑定到 ViewModel 中的属性。它基本上看起来像这样：

![三个自定义组件，每个组件都有一个附加按钮](../Images/8a2d717ca4755573b8097b052697b462.png)

设置对组件通用的命令的最佳方法是什么？

到目前为止，我所做的是`RelayCommand`在我的 ViewModel 中有一个需要参数的通用。每个按钮都将其命令设置为该单个命令，我使用该`CommandParameter`属性添加一些关于我实际谈论的文本字段组件的信息。然后 ViewModel 使用该信息找出正确的属性并更改其值（通过绑定更新文本框）。

虽然这很好用，但我不喜欢我必须手动插入有关相关文本框或*上下文*的信息。理想情况下，我希望在已经知道它正在谈论哪个文本框或绑定属性的上下文范围内执行命令。有没有办法做到这一点？

我遇到的另一个问题是我想将按钮操作绑定到一个键盘命令。所以当我关注一个文本框并按下一个快捷键时，我希望它表现得好像我点击了*正确*的按钮，即执行命令并传递正确的上下文信息。我的替代方法是将其放入代码隐藏中，基本上从当前焦点中提取命令参数，但我更喜欢更清洁的解决方案。

有什么好方法可以使这个工作与 MVVM 一起工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:31:37.427

沿着这些思路怎么样：

```
public class TextBoxAndCommandPresenter : INotifyPropertyChanged
{
    private readonly Action<TextBoxAndCommandPresenter> _action;

    public TextBoxAndCommandPresenter(string description,
                                      Action<TextBoxAndCommandPresenter> action)
    {
        Description = description;
        _action = action;
    }

    public string Description { get; private set; }
    public string Value { get; set; }
    public ICommand Command
    {
        get { return new DelegateCommand(() => _action(this)); }
    }
} 
```

像这样使用：

```
var presenter = new TextBoxAndCommandPresenter("Field 1",
                                               p => p.Value = "hello world"); 
```

使用 XAML：

```
<UserControl ...>
    <UserControl.Resources>
        <DataTemplate DataType="{x:Type TextBoxAndCommandPresenter}">
            <StackPanel Orientation="Horizontal">
                <Label Content="{Binding Description}"/>
                <TextBox Text="{Binding Value}"/>
                <Button Command="{Binding Command}">Click</Button>
            </StackPanel>
        </DataTemplate>
    </UserControl.Resources>

    <ContentPresenter Content="{Binding}"/>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:26:45.367

由于我已经有一个用于文本框和按钮组合的自定义控件，因此创建 UserControl 对我来说并不是一个必要的选项。我的控件为按钮的命令和命令参数公开了可绑定属性，现在，我坚持我在问题中解释的内容；使用命令参数更新视图模型中的相应属性，然后通过数据绑定进行更新。

根据以后它的重复程度，我可能会将其封装在多个自定义控件中，或者构建一个类似于 Scroog1 所示的帮助程序。

至于键盘命令，这实际上是我最关心的问题，我意识到这最终是视图单独处理的事情。所以我的视图模型完全忘记了键盘命令。

我知道有一个标准命令绑定到窗口的代码隐藏，它查找当前聚焦的元素，检查它是否属于我的自定义控件的类型，然后简单地执行底层命令。因此，代码隐藏本质上只是将命令执行委托给重点控制。

虽然这不是一个完美的解决方案，因为我宁愿对命令有一些实际的“上下文敏感性”，但这目前工作正常，并且仍然正确地将视图与逻辑分开。

# android - 用于运动检测的多个 Android 相机预览缓冲区？

> ID：12263081
> 
> 赞同：0
> 
> 时间：2012-09-04T12:02:38.347
> 
> 标签：android, camera

我想尝试通过比较连续的相机预览帧来进行运动检测，我想知道我是否正确解释了 android 文档。告诉我这是否正确：

如果我希望相机预览使用我自己分配的缓冲区，我必须调用 addCallbackBuffer()，至少两次以获取两个单独的缓冲区进行比较。

然后我必须使用回调的 setPreviewCallbackWithBuffer() 形式，以便预览将填充到我分配的缓冲区中。

一旦我到达至少第二个回调，我可以做任何我喜欢的冗长处理来比较缓冲区，相机会让我一个人呆着，不再做任何回调或覆盖我的缓冲区，直到我将最旧的缓冲区返回给相机通过再次调用 allCallbackBuffer() （并且最新的缓冲区将保持不变，供我在下一个回调中使用以进行比较）。

最后一个是我最不清楚的。我不会得到错误或任何东西，因为它会用完缓冲区吗？它真的只会默默地丢弃预览帧而不进行回调吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:09:44.397

好吧，我去实现了上述算法，它们确实有效，所以我想我正确地解释了文档:-)。

如果有人想查看我经过大量修改的 CameraPreview 代码，请查看我的网页：

[http://home.comcast.net/~tomhorsley/hardware/scanner/android-scanner.html](http://home.comcast.net/~tomhorsley/hardware/scanner/android-scanner.html)

# jquery - 如何同时使用图像标题和图像替代？

> ID：12263082
> 
> 赞同：1
> 
> 时间：2012-09-04T12:02:42.937
> 
> 标签：jquery, fancybox

```
$("a.img").click(function(){
$.fancybox([{href:'images/img1.jpg', title: 'Sed elementum lorem purus, et hendrerit enim. Ut dignissim dolor eget ante gravida scelerisque. Suspendisse bibendum malesuada pharetra.'},{href:'images/img2.jpg', title: 'Aenean dictum volutpat magna ut posuere. Proin nec diam mi.'}], {
          openEffect:'none',
          closeEffect:'none',
          helpers:{
               title:{
                    type:'inside'
               }
          },
          closeBtn:false
     });
return false;
}); 
```

我为每个图像使用标题，但同时我想要一个类别的文本（使用 alt 或其他方式）。此标题文本在 fancybox 画廊视图中显示图像的底部。如果我可以使用类别的 alt 属性，我认为使用图像的顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:08:32.337

使用 attr() 方法..

有关更多详细信息，请查看以下链接： [http ://api.jquery.com/attr/](http://api.jquery.com/attr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:04:11.130

如果您正在使用`HTML5 DOCTYPE`，那么您可以将`data-*`属性用于此目的，例如

```
<a class="img" title="my title" data-category="image category name"><img src="thumb.jpg" alt="alternate" /></a> 
```

...然后使用`beforeShow`API 选项来构造标题，如

```
beforeShow : function(){
 this.title = this.title + " - Category: " + this.data("category");
} 
```

唯一的问题是您必须在`title`

.... 或者您可以使用相同的`beforeShow`选项来附加任何 HTML，例如

```
'<span class="category">'+this.data("category")+'</span>' 
```

到`.fancybox-inner`选择器，然后使用`afterClose`选项将其删除。

# jasper-reports - PieChart：我们应该何时以及如何使用增量类型？

> ID：12263085
> 
> 赞同：1
> 
> 时间：2012-09-04T12:02:51.093
> 
> 标签：jasper-reports, ireport, pie-chart

我的 servlet 的代码：

```
JasperCompileManager.compileReportToFile(jrxmlSourcePathMain,
                    jrxmlDestPathMain);

InputStream isRef = new FileInputStream(new File(jrxmlDestPathMain));

ServletOutputStream sosRef = response.getOutputStream();
response.setContentType("application/pdf");
JasperRunManager.runReportToPdfStream(isRef, sosRef, new HashMap(),
        new JRBeanCollectionDataSource(buyBookInfoList));
sosRef.flush();
sosRef.close(); 
```

*jrxml*文件片段：

```
<summary>
    <band height="265" splitType="Stretch">
        <pieChart>
            <chart isShowLegend="true" renderType="svg" theme="default">
                <reportElement uuid="c6a09cc9-bd15-4b09-8657-05868a148f18" x="0" y="0" width="554" height="265"/>
                <chartTitle position="Top" color="#FF0000">
                    <font fontName="宋体" size="18" pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H" isPdfEmbedded="true"/>
                    <titleExpression><![CDATA["报表演示"]]></titleExpression>
                </chartTitle>
                <chartSubtitle color="#0000FF">
                    <font fontName="宋体" size="14" pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H" isPdfEmbedded="true"/>
                    <subtitleExpression><![CDATA["子标题"]]></subtitleExpression>
                </chartSubtitle>
                <chartLegend textColor="#33FF33" backgroundColor="#6666FF" position="Right">
                    <font size="12" pdfFontName="STSong-Light" pdfEncoding="UniGB-UCS2-H" isPdfEmbedded="true"/>
                </chartLegend>
            </chart>
            <pieDataset>
                <keyExpression><![CDATA[$F{username}]]></keyExpression>
                <valueExpression><![CDATA[$F{buyBookNum}]]></valueExpression>
            </pieDataset>
            <piePlot isShowLabels="true" isCircular="false" labelFormat="姓名为:{0}">
                <plot orientation="Horizontal" labelRotation="180.0"/>
                <itemLabel/>
            </piePlot>
        </pieChart>
    </band>
</summary> 
```

我用不同的值为*PieChart*值设置了***Increment Type***属性： **none**、**report**、**page**。但我没有注意到生成的报告有任何不同。

 *******所以我的问题是如何使用*PieChart 的* ***增量类型***属性？

这个属性的目的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:00:52.260

增量类型允许您告诉饼图何时选择要使用的值。例如，如果您想创建一个饼图来显示美国、加拿大和墨西哥的销售额，您可以在“国家”组上递增。*******

# asp.net - 控制器 SessionStateBehavior 是只读的，我可以更新会话变量

> ID：12263086
> 
> 赞同：33
> 
> 时间：2012-09-04T12:02:52.373
> 
> 标签：asp.net, asp.net-mvc, session-variables

我希望如果控制器具有属性，`SessionStateBehavior.ReadOnly`那么我无法更改此控制器内的会话变量，但我可以更改值。

我试试这段代码

```
 [SessionState(System.Web.SessionState.SessionStateBehavior.ReadOnly)]
    public class GLobalController : Controller
    {
      public  ActionResult Index()
        {
            Session["xxx"] = DateTime.Now.ToString();
            return View();
        } 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-05T01:26:59.893

请参阅[在 MVC 3+ 中写入只读会话](https://stackoverflow.com/questions/8939188/writing-to-a-read-only-session-in-mvc-3)

该帖子声称该行为不一致。我绝对可以使用 ReadOnly 写入控制器中的会话。

我会这样对待它：

*   必需表示您正在请求对 Session 的独占锁定（即，不对同一 sessionID 的请求进行并行处理）*   ReadOnly 表示您正在请求 Session 上的非排他锁（即您的请求仍然必须等待具有排他锁的请求完成，但您可以并行处理具有非排他锁的请求。但是由您来确保你的代码不会写入 Session。它不一定由框架强制执行）

    我意识到这与[http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatebehavior.aspx背道而驰](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatebehavior.aspx)

    > 为请求启用只读会话状态。这意味着无法更新会话状态。

    但似乎您实际上可以在某些情况下更新会话状态。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-08-03T08:26:47.820

根据设计和开发ASP.NET**会话状态引擎的 Patrick Y. Ng（***微软软件工程师）的说法：*

 **> 即使 EnableSessionState 被标记为 ReadOnly，在 InProc 状态下，用户仍然可以修改会话。唯一的区别是在请求期间会话不会被锁定。此限制是设计使然。很抱歉，它没有在 MSDN 中记录。

[在这篇文章](https://forums.asp.net/t/7504.aspx?Understanding+session+state+modes+FAQ "Patrick 在 ASP.NET 论坛上发帖")中有更多关于会话状态的有用信息。真的很值得一读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-27T09:14:56.730

这只是我的解释：

我看到您可以`Session`在操作方法期间添加 - 毕竟 Session 真的只是一本字典。但是会话最后没有保存。

看起来它确实应该抛出一个异常，但也许因为这个特性后来出现在框架中，他们决定不每次都检查。

结果也可能因您使用的会话状态存储（inproc / sql server）而异。**

# android - 对话框中的图像

> ID：12263093
> 
> 赞同：3
> 
> 时间：2012-09-04T12:03:14.353
> 
> 标签：android, imageview, android-dialog

我正在尝试在对话框中显示 ImageView，我已经遵循了几个示例，但是当我打开应用程序关闭的对话框时，它们似乎都不起作用。

```
<ImageView android:id="@+id/image"
           android:contentDescription="@string/desc1"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content" /> 
```

这就是我的 MainActivity

```
button1.setOnLongClickListener(new OnLongClickListener()
    {
        public boolean onLongClick(View v)
        {
            AlertDialog dialog = new AlertDialog.Builder(MainActivity.this).create();

            dialog.setTitle("Title");
            ImageView img = (ImageView) findViewById(R.id.image);
            img.setImageResource(R.drawable.dust);
            dialog.setView(img);

            dialog.show();
            return false;

        }

    });

} 
```

使用这个新代码，我已经能够在里面显示带有图像的对话框，并且我还能够旋转图像

```
 button1.setOnLongClickListener(new OnLongClickListener()
    {
        public boolean onLongClick(View v)
        {
            Dialog dialog = new Dialog(MainActivity.this);
            LayoutInflater inflater = LayoutInflater.from(MainActivity.this);

            RotateAnimation anim = new RotateAnimation(0f, 360f, 200f, 200f);
            anim.setInterpolator(new LinearInterpolator());
            anim.setRepeatCount(Animation.INFINITE);
            anim.setDuration(10000);

            dialog.setTitle("You have found the easter egg!");
            View view = inflater.inflate(R.layout.activity_main2, null);
            dialog.setContentView(view);
            view.startAnimation(anim);

            dialog.show();
            return false;

        }

    });

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:05:25.327

您不应将 AlertDialog 用于自定义对话框。使用常规的 Dialog 类，它是 setContentView() 方法。或者您可以使用 DialogFragment。

UPD：有人告诉我 AlertDialog 有 setView() 方法。你可以试试看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:14:08.473

```
when I open the dialog the app closes. 
```

因为你的对话框`ImageView img`是**空的**

```
ImageView img = (ImageView) dialog.findViewById(R.id.image); // <--- img is not visible through dialog..
img.setImageResource(R.drawable.dust); // <--- this line throw exception 
```

只需像这样更改您的代码，

```
AlertDialog dialog = new AlertDialog.Builder(MainActivity.this).create();
LayoutInflater inflater = LayoutInflater.from(MainActivity.this);
dialog.setTitle("Title");
View view = inflater.inflate(R.layout.<xml_image>, null); // xml Layout file for imageView
ImageView img = (ImageView) view.findViewById(R.id.image);
img.setImageResource(R.drawable.dust);
dialog.setView(view);
dialog.show(); 
```

# java - Android：将简单的光标链接到列表视图

> ID：12263095
> 
> 赞同：0
> 
> 时间：2012-09-04T12:03:25.813
> 
> 标签：java, android, sqlite, android-listview

我已经有了如何从 sqlite db 获取数据的基本前提，并且我已经得到了它来记录返回到 logcat 的项目。但是，我似乎无法找到将该数据输出到列表视图的最佳方法。

起初我以为我会将数据放入一个数组中，并使用该数组设置一个列表视图，但是环顾四周，您可以将光标直接作为数据源链接到列表视图，但我无法完全理解它.

这是我的 MainActivity （一旦我做了更多的工作，我会将 sql 放入它自己的辅助类中，但现在这一切都来自主要活动）

我的主要活动是：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

       SQLiteDatabase db = openOrCreateDatabase("MyDB", MODE_PRIVATE, null);
       Cursor c = db.rawQuery("SELECT * FROM MyTable", null);
       c.moveToFirst();
       Log.e("TomDebug", c.getString(c.getColumnIndex("FirstName")));
       db.close();

    }

} 
```

我的布局activiy_main.xml 是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="fill" >

    <ListView
        android:id="@+id/derooms"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >
    </ListView>

</RelativeLayout> 
```

我的表有三列，但现在我很高兴它只是将数据库中的所有名字都喷到一个列表视图中

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:31:59.263

您似乎没有在列表视图中编码任何行，由于您的贡献不足，您的问题不应该得到回答。无论如何，这是答案的演示代码（不是完全满足您的所有要求）：

(1) 创建`list_view_item.xml`以在列表视图中显示您的信息，例如：a 以显示您的数据字段。

(2) 创建`DataBoundAdapter`绑定到 DB 游标的结果：

```
public class DataBoundAdapter extends CursorAdapter 
{
    Context _context;

    public DataBoundAdapter(Context context, Cursor c, boolean autoRequery) {
        super(context, c, autoRequery);
        _context = context;
    }

    @Override
    public void bindView(View view, Context c, Cursor cur) 
    {
        // TODO: handle data when binding to your list view
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) 
    {
        int item_view_id = R.layout.list_view_item;

        //inflate item view to list view holder
        LinearLayout holderView = new LinearLayout(_context);
        String inflaterName = Context.LAYOUT_INFLATER_SERVICE;
        LayoutInflater inflater = (LayoutInflater) _context.getSystemService(inflaterName);
        inflater.inflate(item_view_id, holderView, true);

        return holderView;
    }
} 
```

(3) 在`MainActivity.onCreate(..)`：

```
ListView myListView = (ListView)findViewById(R.id.derooms);
DataBoundAdapter dbAdapter = new DataBoundAdapter(this, your_db_cursor, true);
myListView.setAdapter(dbAdapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:16:38.413

你需要一个 CursorAdapter。见[http://developer.android.com/reference/android/widget/CursorAdapter.html](http://developer.android.com/reference/android/widget/CursorAdapter.html)

您可以使用 SimpleCursorAdapter 开始。如果您的目标是 11+，则需要查看[http://developer.android.com/reference/android/content/CursorLoader.html](http://developer.android.com/reference/android/content/CursorLoader.html)

# jquery-ui - 在 jquery 中通过 append 方法添加后事件不会触发

> ID：12263098
> 
> 赞同：0
> 
> 时间：2012-09-04T12:03:40.437
> 
> 标签：jquery-ui, jquery

```
 <div class="sortable-sections">
            <fieldset class="section draggable" id="flSectionType">
                <div class="btn-drag section-handle hidden-view">
                </div>
                <div class="section-header">
                    <span class="section-label">Job Requirements</span> <a class="section-info" href="#more-info"
                        title="Minimum Education, Minimum Work Experience, Required Licenses/Certifications, Required Skills, Knowledge, and Abilities needed to perform the job.">
                        ?</a>
                </div>
                <div class="sortable-items">
                </div>
                <a class="section-add-item hidden-view" id="addJR" href="#add-item" data-item='{"id":"addJR","template":"requirement","item_type":"Job Requirement"}'>
                    Add a new Job Requirement</a>
            </fieldset>
       <fieldset class="section draggable">
       </fieldset>
       <fieldset class="section draggable">
       </fieldset>
     <div> 
```

上面的代码将生成一个可以在 sortable-sectons 中拖动的部分列表。

我正在使用以下脚本手动删除部分并将其添加回可排序部分，但它没有注册 jquery 事件。

```
 var $section = $('.sortable-sections').find($('#flSectionType');
 $('.sortable-sections').find($('#flSectionType').remove();
 ......
 .......
 $('.sortable-sections').append($section.val()); 
```

附加部分后，为 section-add-item css 类注册的事件不会触发。注意：使用“ **live** ”方法代替“ **on ”。**但它并不具备所有属性。

 ****编辑**：事件代码：

```
 $('.section-add-item').on('click', function (e) {
        that.addSection(this);
        e.preventDefault();
    }); 
```

我正在手动订购初始加载部分，而不是拖放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:17:44.343

`.section-add-item`添加事件时必须已经存在并且使用`on`错误

```
$('body').on('click', '.section-add-item', function (e) {

}); 
```

而不是身体，你可以添加另一个在创建`.section-add-item`之前已经存在的父级。`.section-add-item`**

# c# - 克隆任意对象的函数

> ID：12263099
> 
> 赞同：6
> 
> 时间：2012-09-04T12:03:42.713
> 
> 标签：c#, reflection, clone

我正在寻找一种克隆在编译时（或运行时，我认为）未知的对象的方法。问题的确切措辞是“编写一个可以克隆任意对象的函数”例如

*   将未知对象传递给函数。
*   返回对象的深层副本。

我猜我需要使用反射来读取函数和变量，然后是一些如何创建一个新对象并将这些值分配给它的方法。我可以只使用 Type.GetType() 来查找类型并创建一个新实例，然后使用这个**已知**对象的复制构造函数。但是我不确定给定的类是否会实现（深度），或者问题是否要求这样的解决方案（我不明白所需的结果是什么，这无济于事！）。

有人可以指导我正确的方向，需要类/接口和伪代码，如果你感觉很慷慨的话，来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T12:11:14.407

您可以简单地`Serialize`和`Deserialize`一个对象进行克隆。
以下函数将执行此操作：

```
public object Clone(object obj)
{
    MemoryStream ms = new MemoryStream();
    BinaryFormatter bf = new BinaryFormatter();
    bf.Serialize(ms, obj);
    ms.Position = 0;
    object obj_clone = bf.Deserialize(ms);
    ms.Close();
    return obj_clone;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:11:22.207

这可以通过利用

```
Type newObjectType = orgObject.GetType() 
```

然后调用 Activator.CreateInstance(newObjectType)。然后，您要做的是遍历对象的所有属性并将它们设置在新对象上。这也可以通过反射来完成。

遍历 orgObject.GetType().GetProperties() 中的每个 PropertyInfo 并在新对象上设置值。

这确实应该创建对象的“深层”副本，与它的类型无关。

编辑：我上面解释的方法的未经测试的代码示例。

```
Type newObjectType = orgObject.GetType();
object newObject = Activator.CreateInstance(newObjectType);

foreach (var propInfo in orgObject.GetType().GetProperties())
{
    object orgValue = propInfo.GetValue(orgObject, null);

    // set the value of the new object
    propInfo.SetValue(newObject, orgValue, null);
} 
```

希望你有一些清楚！

# uiview - 自定义 UIbutton down 部分无法识别里面的 touchup

> ID：12263101
> 
> 赞同：1
> 
> 时间：2012-09-04T12:03:52.530
> 
> 标签：uiview, uibutton, touch

我创建了一个自定义 UIbutton 并将其放置在一个显示有关包的某些信息的视图上。我希望整个区域作为按钮是可触摸的，这是我的起点。问题是只有自定义按钮的上半部分是可触摸的，并且向下部分被忽略。我将背景颜色设置为纯色，框架似乎没问题。

更新：如果我将相同的自定义按钮添加到超级视图似乎没问题，但在这种情况下坐标不正确。我需要将子视图的坐标转换为超级视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:39:32.073

在挣扎了这么多小时后，我发现我的外框比预期的要小。

# javascript - 为什么 node.js 中非交互式函数对象内的上下文不同？

> ID：12263104
> 
> 赞同：2
> 
> 时间：2012-09-04T12:04:01.933
> 
> 标签：javascript, node.js, eval, require, anonymous-function

我想从需要另一个模块的字符串创建一个函数（不要问）。

当我尝试在节点交互式外壳中执行此操作时，一切都很好而且花花公子：

```
> f = new Function("return require('crypto')");
[Function]
> f.call()
{ Credentials: [Function: Credentials],
  (...)
  prng: [Function] } 
```

但是，当我将完全相同的代码放入文件时，我被告知 require 函数不可用：

```
israfel:apiary almad$ node test.coffee 

undefined:2
return require('crypto')
       ^
ReferenceError: require is not defined
    at eval at <anonymous> (/tmp/test.coffee:1:67)
    at Object.<anonymous> (/tmp/test.coffee:2:3)
    at Module._compile (module.js:446:26)
    at Object..js (module.js:464:10)
    at Module.load (module.js:353:31)
    at Function._load (module.js:311:12)
    at Array.0 (module.js:484:10)
    at EventEmitter._tickCallback (node.js:190:38) 
```

如何解决？

此外，它告诉我我对 node.js 上下文/范围一无所知。那是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:25:04.140

问题是范围。

参数 to`new Function()`正在全局范围内进行评估。然而，Node 仅定义`require`为其交互模式/shell 的全局变量。[否则，它会在闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)中执行每个模块，其中`require`、`module`、`exports`等被定义为局部变量。

因此，要定义`require`在范围内的函数（[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)），您必须使用[`function`operator/keyword](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/function)：

```
f = function () { return require('crypto'); } 
```

或者，CoffeeScript中的[`->`运算符：](http://coffeescript.org/#literals)

```
f = -> require 'crypto' 
```

# java - 如何在 jboss 6.0.0 中将 jndi 远程查找更改为本地查找

> ID：12263114
> 
> 赞同：2
> 
> 时间：2012-09-04T12:04:52.247
> 
> 标签：java, jndi, ejb-2.x

我正在经历我们项目的 Permormace 活动。本项目已部署在 JBOSS 6.0.0 中。使用远程 JNDI 查找的 EJB 之间的 Presenlty 通信在同一容器内使用，这不是必需的，而且需要时间。所以我想将远程 JNDI 查找转换为本地 JNDI 查找。它会起作用吗？请解释谁将远程 JNDI 查找转换为本地 JNDI。

或者请建议其他技术来解决这个问题，以便我可以提高我们的应用程序性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:08:46.987

如果正在使用您的客户端`EJB`在同一个 Jboss 中，您可以这样做，或者`Remote`如果正在使用的客户端`EJB's`在不同的 Jboss 中，则使用。

# android - 如何在我的 Android 应用程序中使用系统图标？

> ID：12263115
> 
> 赞同：19
> 
> 时间：2012-09-04T12:04:58.260
> 
> 标签：android, icons

我正在编写一个 android 应用程序，我想在这个应用程序中使用邮件、电话、日历和联系人的系统图标。问题是，这些图标因系统而异（不同的 android 版本和不同的智能手机），我想保持应用程序和系统一致。有没有简单的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-04T12:11:03.080

在 XML 中使用来自 @android:drawable/... 的默认 android drawables，在代码中使用 android.R.drawable...。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T12:07:57.000

您可以在 java 代码中的 xml 文件 android.R.drawable.[icon_name] 中使用 @android:drawable/[icon_name] 使用标准可绘制对象

您可以在 [SDK PATH]/platforms/platforms/[ANDROID_VERSION]/data/res 的文件系统中看到不同的图标

有些图像是标准的……比如联系人、日历:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-04T12:10:00.060

你不能保持系统一致。为了什么？新版本的 Android 通常比旧版本更漂亮（嗯，这是我的看法）。

为您的应用程序保持系统图标相同的唯一方法 - 将它们复制到您的可绘制对象中，而不是使用对它们的直接引用（如`@android:drawable/`）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-04T12:15:03.940

首先，如果您打算对 mail 、 phonr 等使用默认图像（图标）。

此默认值可用作代码中的 android.R.drawable.name 或 xml 中的 @android:drawable/`http://docs.since2006.com/android/2.1-drawables.php`

但因为这会因操作系统版本而异。

因此，如果您需要为所有版本和设备的应用程序使用独特的 GUI。

请不要使用 android 提供的图像，只需使用您自己的图形或您在可绘制资源中为您的应用明确提供的图像。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T12:07:24.480

如果您对每个系统的图标都满意，您可以通过 PackageManager 和 getApplicationInfo 方法获取它。

如果不是，您应该将平台上的资源复制到您自己的应用程序中。

# asp.net-mvc - 下拉列表错误

> ID：12263119
> 
> 赞同：0
> 
> 时间：2012-09-04T12:05:12.317
> 
> 标签：asp.net-mvc, vb.net, razor

我正在尝试根据 Stack Overflow 上的另一篇文章为我的 DropDown 列表定义一个默认值：

```
@Html.DropDownList(Function(model) model.Type, DirectCast(ViewBag.Type, IEnumerable(Of SelectListItem)), "None Selected", "No Payment") 
```

但我得到一个错误：

“Lambda 表达式无法转换为 'String'，因为 'String' 不是委托类型。”

我如何实现这一点，所以如果没有选择返回“无付款”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:19:31.547

嗯，首先，我认为你必须选择`DropDownListFor`，而不是`DropDownList`，如果你的第一个论点是`Expression(Of Func(Of TModel, TProperty))`

在这两种情况下，都没有`DropDownList/For`最后采用 2 个字符串的重载，一个用于默认文本，另一个用于默认值。

如果你这样做

```
@Html.DropDownList(Function(model) model.Type, DirectCast(ViewBag.Type, IEnumerable(Of SelectListItem)), "None Selected") 
```

当“无选选中”是ChoOp选项时，您将获得型号的空值。

如果您想完全管理默认值和文本，则必须将其直接添加到您的`SelectListItem`(so in `ViewBag.Type`).

并使用

```
@Html.DropDownList(Function(model) model.Type, DirectCast(ViewBag.Type, IEnumerable(Of SelectListItem))) 
```

但不确定它是否有用。使用其他解决方案，您可以检查是否已通过类似的方式选择“未选择”（我使用 c#，请原谅语法错误）

```
If Model.Type is Nothing Then 
```

# javascript - 将处理后的图像发送到服务器进行保存

> ID：12263120
> 
> 赞同：1
> 
> 时间：2012-09-04T12:05:14.727
> 
> 标签：javascript, asp.net, file-upload

我正在使用 imageFx javascript 库，这真的很棒我只是想知道他们是否有任何方式在处理保存后将处理后的图像发送回服务器？我正在使用 asp.net c#

```
http://www.nihilogic.dk/labs/imagefx/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:52:58.443

看起来这使用 2D 画布来处理图像，您应该能够使用 Javascript 在 DOM 中找到画布，然后将画布数据作为图像发送到服务器。

使用类似的东西（假设 jQuery 存在）：

```
$.post('/upload',
        {
            uid : uid,
            img : canvas.toDataURL('image/jpeg')
        },
        function(data) {}); 
```

这会将其作为 base64 编码的图像数据发送，然后您可以对其进行解码并将生成的图像存储在服务器上。

此处讨论该过程： [将“画布”图像数据上传到服务器](https://stackoverflow.com/questions/1590965/uploading-canvas-image-data-to-the-server)

# c# - 编译时出现奇怪的问题，然后反编译 Select Case

> ID：12263123
> 
> 赞同：1
> 
> 时间：2012-09-04T12:05:24.560
> 
> 标签：c#, vb.net, compiler-construction, il, decompiler

在更改以下 VB.net 代码时，我看到了一些奇怪的行为。这是原始源代码：

```
Private Function ValidateSelectedId(ByVal purposeId As String) As Boolean
    Dim possiblePurposes As New InfoCollector.Purpose
    Dim isPurposeValid As Boolean = False

    'Any of the following purposes (but only these)
    'should be considered valid
    Select Case UCase(purposeId)
        Case UCase(possiblePurposes.FirstPurpose), _
             UCase(possiblePurposes.SecondPurpose), _
             UCase(possiblePurposes.ThirdPurpose), _
             UCase(possiblePurposes.FourthPurpose)

                isPurposeValid = True
            Case Else
                isPurposeValid = False
        End Select

        Return isPurposeValid
End Function 
```

这是新版本。唯一的变化是增加了第五个有效目的：

```
Private Function ValidateSelectedId(ByVal purposeId As String) As Boolean
    Dim possiblePurposes As New InfoCollector.Purpose
    Dim isPurposeValid As Boolean = False

        Select Case UCase(purposeId)
            Case UCase(possiblePurposes.FirstPurpose), _
             UCase(possiblePurposes.SecondPurpose), _
             UCase(possiblePurposes.ThirdPurpose), _
             UCase(possiblePurposes.FourthPurpose), _
             UCase(possiblePurposes.FifthPurpose) 

                isPurposeValid = True
            Case Else
                isPurposeValid = False
        End Select

        Return isPurposeValid
End Function 
```

我在本地 PC 上编译了这个新版本并测试了功能，它运行良好。在将它检查到我们的中央代码存储库并在服务器上构建它之后，使用失败（它似乎忽略了新目的）。在试图弄清楚缺少什么时，我反编译了在服务器上找到的 .DLL，这就是它给我的（注意：我已经更改了变量名并稍微重新格式化）：

```
Private Function ValidateSelectedId(ByVal purposeId As String) As Boolean 
    Dim ValidateSelectedId As Boolean
    Dim possiblePurposes As Purpose = New Purpose()
    Dim isPurposeValid As Boolean = False
    Dim str As String = Strings.UCase(purposeId)

    If (Operators.CompareString(str, Strings.UCase(possiblePurposes.FirstPurpose), False) <> 0) Then
        If (Operators.CompareString(str, Strings.UCase(possiblePurposes.SecondPurpose), False) <> 0 
            AndAlso (Operators.CompareString(str, Strings.UCase(possiblePurposes.ThirdPurpose), False) = 0 
            OrElse Operators.CompareString(str, Strings.UCase(possiblePurposes.FourthPurpose), False) <> 0)) Then

                If (Operators.CompareString(str, Strings.UCase(possiblePurposes.FifthPurpose), False) = 0) Then
                    Return True
                End If

                isPurposeValid = False
        End If
    End If

    Return isPurposeValid
End Function 
```

我还尝试将其反编译成 C#，这对我们中的某些人来说可能更容易阅读：

```
private bool ValidateSelectedId(string purposeId)
{
    bool ValidateSelectedId;
    Purpose possiblePurposes = new Purpose();
    bool isPurposeValid = false;
    string str = Strings.UCase(purposeId);

    if (Operators.CompareString(str, Strings.UCase(possiblePurposes.FirstPurpose), false) != 0)
    {
        if (Operators.CompareString(str, Strings.UCase(possiblePurposes.SecondPurpose), false) != 0 
            && (Operators.CompareString(str, Strings.UCase(possiblePurposes.ThirdPurpose), false) == 0 
            || Operators.CompareString(str, Strings.UCase(possiblePurposes.FourthPurpose), false) != 0))
        {
            if (Operators.CompareString(str, Strings.UCase(possiblePurposes.FifthPurpose), false) == 0)
            {
                return true;
            }
            isPurposeValid = false;
        }
    }
    return isPurposeValid;
} 
```

**然而，这似乎与我想要的相反，而不是原始源代码所说的！**

我看不出原始源代码是如何编译成这个的。我的反编译器是否有问题（我使用的是 Telerik 的 Just Decompile）？如果是这样，该逻辑如何在我的本地 PC 上运行，而不是在服务器上运行？

编译过程中是否真的存在某种错误？还是我是一个完整的 Id**t，只是误解了反编译代码中的逻辑？

任何解释这一点的相关理论将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:18:04.037

**傻我。**
我最终发现了这在服务器上不起作用的原因：还有另一个相关的错误已在本地修复，但在服务器上没有。

**愚蠢的反编译器。**
我对反编译器的结果感到困惑，这显然是一团糟。我以前用过 JustDecompile 很多次，但从来没有遇到过这样的问题。显然，它无法以任何合理的方式从上述方法中反编译代码。

我的假设是在编译期间进行了某种形式的优化，JustDecompile 无法正确理解和显示。

我只是想验证我的更改是否已发布到服务器。相反，我被派去追逐一只幽灵虫。**经验教训：在需要时使用反编译器，但不要自动相信它告诉你的一切。**

# php - 创建拇指时尝试分配内存的致命错误

> ID：12263125
> 
> 赞同：0
> 
> 时间：2012-09-04T12:05:39.640
> 
> 标签：php, fatal-error, php-gd

我想分享一些在路上发生在我身上的事情。

我上传了一张图片到我的网站，然后我创建了一些拇指。那些从相对较大的文件（大约 5mb 的 jpeg 图像）中自动裁剪的拇指，我这样做了很多次。突然，当上传一个大文件并从裁剪的图像（不是原始图像）中进行拇指操作时，我发现了这个错误：

```
Fatal error:  Allowed memory size of 134217728 bytes exhausted (tried to allocate 22464 bytes) 
```

我怎么会耗尽 128Mb 的内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:25:30.460

我也遇到过这个问题

增加以下变量，使您的页面执行不会停止：

```
max_input_time
memory_limit
max_execution_time 
```

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:05:39.640

主要问题是我使用的内存比可用内存多。当然，首先要检查的是我上传的文件是否正确，而不是太大。好的，3Mb。那么，问题出在哪里？

通常，这种错误伴随着它完全耗尽可用内存的确切行。就我而言，在这个里面：

```
$orig = imagecreatefromjpeg($fullPathFilename); 
```

**因此，在将新图像分配到内存**时，服务器崩溃了。然后，我想到了：**我没有释放任何以前的分配调用**！如前所述，我碰巧从多种尺寸的图像中生成了很多拇指。愚蠢的我，我没有释放任何这些。因此，如果您在裁剪/调整大小/更改多个图像时碰巧看到此错误，请在代码中检查此调用：

```
imagedestroy($orig); 
```

所以，总结一下。

## 如果您没有找到该`imagedestroy()`功能，那么您可能已经找到了您的问题！

# c++ - 用于指针生成的递归模板

> ID：12263127
> 
> 赞同：2
> 
> 时间：2012-09-04T12:05:45.143
> 
> 标签：c++, templates, pointers

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

我想创建一个模板，它接受一个类型 T 和一个参数 N 作为参数，并“给”一个 T 的第 N 级指针（例如，如果 T 是`int`并且 N 是`2`它应该给出`int**`）

到目前为止，我的代码是：

```
template<class T,int N>
struct ptr
{
  typedef ptr<T*,N-1>::t t;
};

template<class T>
struct ptr<T,0>
{
  typedef T t;
};

int main()
{
  ptr<int,3>::t a; //a should be int***
} 
```

但它给了我这个编译器错误：

`source.cpp:6:11: error: need 'typename' before 'ptr<T*, (N - 1)>::t' because 'ptr<T*, (N - 1)>' is a dependent scope`

这是什么意思，如何解决（如果在 C++ 中可能的话）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:08:33.383

该错误意味着它`ptr<T*, (N - 1)>::t`是一个*从属名称*。

模板定义中 used 的含义`t`取决于模板参数，因此编译器无法自动确定它`t`是类型而不是对象。

要更正错误，您必须给编译器一个提示，即按照消息建议的字面意思做：在它前面加上`typename`

```
typedef typename ptr<T*,N-1>::t t; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:07:29.583

```
template<class T,int N>
struct ptr
{
  typedef typename ptr<T*,N-1>::t t;
};

template<class T>
struct ptr<T,0>
{
  typedef T t;
};

int main()
{
  ptr<int,3>::t a; //a should be int***
} 
```

编译器告诉那`t`是`dependent name`，所以使用`typename`之前`ptr<T*, (N - 1)>::t`

# ruby-on-rails - 如果时间类型字段无效，则默认日期时间会变差

> ID：12263135
> 
> 赞同：0
> 
> 时间：2012-09-04T12:06:23.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, activerecord

可怕的标题，但这就是我所拥有的：

```
Loading development environment (Rails 3.2.8)
1.9.3p194 :001 > Product
 => Product(id: integer, name: string, date: datetime, created_at: datetime, updated_at: datetime, end_time: datetime, start_time: time) 
1.9.3p194 :002 > p = Product.new
 => #<Product id: nil, name: nil, date: nil, created_at: nil, updated_at: nil, end_time: nil, start_time: nil> 
1.9.3p194 :003 > p.start_time = "foo"
 => "foo" 
1.9.3p194 :004 > p.start_time
 => 2000-01-01 00:00:00 UTC 
```

我不希望将无效时间解析为有效时间。这导致我在表单提交中的验证出现问题。

这有点相关：[Rails 3 - Validation for Time exists](https://stackoverflow.com/questions/10371519/rails-3-validation-for-time-existance)

并导致 github 中出现此问题：[https ://github.com/rails/rails/issues/6045](https://github.com/rails/rails/issues/6045)

我试着用眼睛追踪代码，但除了“foo”不应该解析并且它应该返回 nil 之外，什么都没有出现。

编辑：我创建了一个示例应用程序来显示这种确切的行为[https://github.com/danbeaulieu/test-app](https://github.com/danbeaulieu/test-app)

但实际上它只是一个具有单一模型的简单应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:18:07.463

您可以使用[validates_timeliness](https://github.com/adzap/validates_timeliness)来验证日期、时间和日期时间。

然后在你的模型中你可以做

```
validates_time :start_time 
```

或者看看我的[GIST](https://gist.github.com/3621130)来处理默认日期验证

# wpf - 无法选中 DataGrid CheckBox

> ID：12263140
> 
> 赞同：0
> 
> 时间：2012-09-04T12:06:44.707
> 
> 标签：wpf, datagrid, checkbox

我遇到了 datagrid 和 DataGridCheckBoxClumn 的问题。首先我为数据网格项目创建结构：

```
public struct taxRateFromDatabase
{
    public int rate { get; set; }
    public string mark { get; set; }
    public CheckBox c { get; set; }
} 
```

之后在我的课堂上添加列、绑定等：

```
 StackPanel tSp = new StackPanel();
    DataGrid taxRateDataGrid = new DataGrid();
    DataGridTextColumn col0 = new DataGridTextColumn();
    DataGridTextColumn col1 = new DataGridTextColumn();
    DataGridCheckBoxColumn col2 = new DataGridCheckBoxColumn();
    Binding b = new Binding("checkBox");
    b.Mode = BindingMode.TwoWay;

    b.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;

    taxRateDataGrid.Columns.Add(col0);
    taxRateDataGrid.Columns.Add(col1);
    taxRateDataGrid.Columns.Add(col2);

    col0.Binding = new Binding("rate");
    col1.Binding = new Binding("mark");
    col2.Binding = b;

    CheckBox c = new CheckBox();
    c.Content = "a";

    col0.Header = "Stawka";
    col1.Header = "Oznaczenie";
    col2.Header = "Status";

    taxRateDataGrid.Items.Add(new taxRateFromDatabase { rate = 0, mark = "E", c = c });
    taxRateDataGrid.Items.Add(new taxRateFromDatabase { rate = 1, mark = "G", c = c }); 
```

问题是我无法真正选中/取消选中我刚刚添加的复选框。我也尝试过在结构定义中没有复选框（只是空的datagridcheckboxcolumn），但这也不起作用。我在将返回数据网格的类中创建它，所以我不能真正访问 xaml。

任何建议将不胜感激；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:18:16.167

我建议您使用 class 而不是 struct（看看[这里](https://stackoverflow.com/questions/842575/why-does-wpf-support-binding-to-properties-of-an-object-but-not-fields)）并实现[INotifyPropertyChanged](http://msdn.microsoft.com/it-it/library/system.componentmodel.inotifypropertychanged%28v=vs.95%29.aspx)接口以使绑定正常工作。

就像是

```
public class TaxRateFromDatabase : INotifyPropertyChanged
        {
            private int _rate;
            public int Rate
            {
                get { return _rate; }
                set { _rate = value; OnPropertyChanged("Rate"); }
            }

            private string _mark;
            public string Mark
            {
                get { return _mark; }
                set { _mark = value; OnPropertyChanged("Mark"); }
            }

            private bool _isChecked;
            public bool IsChecked
            {
                get { return _isChecked; }
                set { _isChecked = value; OnPropertyChanged("IsChecked"); }
            }

            public event PropertyChangedEventHandler PropertyChanged;
            private void OnPropertyChanged(string propertyName)
            {
                if (PropertyChanged != null)
                    PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }

        } 
```

例如

```
DataGrid taxRateDataGrid = new DataGrid();
        DataGridTextColumn col0 = new DataGridTextColumn();
        DataGridTextColumn col1 = new DataGridTextColumn();
        DataGridCheckBoxColumn col2 = new DataGridCheckBoxColumn();

        taxRateDataGrid.Columns.Add(col0);
        taxRateDataGrid.Columns.Add(col1);
        taxRateDataGrid.Columns.Add(col2);

        col0.Binding = new Binding("Rate");
        col1.Binding = new Binding("Mark");
        col2.Binding = new Binding("IsChecked");

        col0.Header = "Stawka";
        col1.Header = "Oznaczenie";
        col2.Header = "Status";

        List<TaxRateFromDatabase> list = new List<TaxRateFromDatabase>();

        list.Add(new TaxRateFromDatabase { Rate = 1, Mark = "E", IsChecked = true });
        list.Add(new TaxRateFromDatabase { Rate = 23, Mark = "F", IsChecked = false });

        taxRateDataGrid.ItemsSource = list; 
```

# bioinformatics - 在一个区域中查找 RNA 和信息

> ID：12263141
> 
> 赞同：0
> 
> 时间：2012-09-04T12:06:51.500
> 
> 标签：bioinformatics, sequencing

我想在大约 10 KB 的序列中找到新的和已知的 RNA 和转录本。如果该序列在 ensembl 和 UCSC 浏览器中没有得到很好的注释，那么使用生物信息学工具最简单的方法是什么？剪接 EST 和 RNA 测序数据是一种选择吗？我是生物信息学的新手，您的建议对我很有用。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:01:25.113

我有点不清楚您想要的最终产品或输出到底是什么样子。但我可能会建议做多个序列比对并寻找那些得分高的。如果这个 10KB 的序列有一些已知的序列，但它们不会完全匹配，那么我认为您需要一个程序，它可以为您提供比对分数，而不仅仅是简单的匹配。我将 Perl 与[Clustal结合使用](http://clustal.org)进行对齐。基本上，您需要根据这些文件格式的各自约定制作具有 10KB 序列和已知感兴趣序列的 .fasta 或 .aln 文件。如果您不太精通编程，可以使用 clustal 的 GUI 版本。如果你想使用 Perl，这是我编写的用于对齐整个 .fasta 文件目录的脚本。它可以一口气执行许多对齐。注意：您必须编辑最后一行（系统调用）中的 clustal 可执行路径以匹配其在您的计算机上的位置，以便此脚本运行。

```
#!/usr/bin/perl 

use warnings;

print "Please type the list file name of protein fasta files to align (end the directory    path with a / or this will fail!): ";
$directory = <STDIN>;
chomp $directory;

opendir (DIR,$directory) or die $!;

my @file = readdir DIR;
closedir DIR;

my $add="_align.fasta";

foreach $file (@file) {
 my $infile = "$directory$file";
 (my $fileprefix = $infile) =~ s/\.[^.]+$//;
 my $outfile="$fileprefix$add";
 system "/Users/Wes/Desktop/eggNOG_files/clustalw-2.1-macosx/clustalw2 -INFILE=$infile -OUTFILE=$outfile -OUTPUT=FASTA";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:21:00.250

您是否有 linux 服务器或计算机，或者您是否依赖基于 web 和 windows 的程序？

为了对齐 RNA-seq 读取，人们通常使用像 Tophat 这样的剪接读取对齐器，尽管 BLAST 可能也可以。

最初我写了很长的回复来解释如何在 Linux 中做到这一点，但我刚刚意识到 Galaxy 对于初学者来说可能是一个更容易的解决方案。Galaxy 是一个具有非常用户友好界面的在线生物信息学工具；它专为初学者设计。您可以在此网站注册并登录：[https ://main.g2.bx.psu.edu/](https://main.g2.bx.psu.edu/)

有关于如何做事的教程（请参阅“帮助”菜单），但我为您的实验的基本工作流程将是这样的：

*   登录银河
*   上传 RNA-seq 读数、EST 读数和 10K 基因组序列
*   在左侧菜单中，单击展开“NGS-RNA 测序”，然后单击“Tophat for Illumina（假设您的 RNA-seq 读取是 Illumina fastq 读取）”
*   使用 Tophat 对齐您的 RNA-seq 读数，确保选择您的 10K 序列作为参考基因组。
*   尝试将您的 EST 读数与其中一个程序对齐。我不确定这会有多成功，Tophat 并非设计用于处理长序列，因此您可能需要玩一些游戏或有点创意才能让它发挥作用。
*   根据您的 RNA-seq 读数和/或 EST 序列，使用袖扣为新的基因模型创建注释。

关于查看输出，我不确定 Windows 上的自定义参考序列有什么可用的，您可能需要做一些研究。对于 Linux/Mac，我推荐 IGV。

# magento - Magento 在一步结账中删除运输步骤

> ID：12263142
> 
> 赞同：2
> 
> 时间：2012-09-04T12:06:55.257
> 
> 标签：magento, magento-1.6

我使用本教程 - [http://www.justwebdevelopment.com/blog/removed-shipping-address-and-shipping-method-from-onepage-checkout-in-magento/](http://www.justwebdevelopment.com/blog/removed-shipping-address-and-shipping-method-from-onepage-checkout-in-magento/)删除了一页结帐中的运输步骤。现在，当您订购时，它会跳过运输步骤，但仍会显示这些运输步骤。我想将它们从网页中删除，该怎么做？这是页面的屏幕截图 - [http://imagebin.org/227116](http://imagebin.org/227116)，网站网址 - [http://homehero.in](http://homehero.in) 此外，跳转到下一步需要更多时间（即跳过运输步骤）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:54:07.453

试试这个。[http://sapnandu-magento.blogspot.com/2012/04/magento-onestep-checkout-remove.html](http://sapnandu-magento.blogspot.com/2012/04/magento-onestep-checkout-remove.html)

# jpa - 使用 JPA 的 TopLink 获取更多连接

> ID：12263144
> 
> 赞同：1
> 
> 时间：2012-09-04T12:07:04.637
> 
> 标签：jpa, connection, toplink

在我的应用程序中，我们将 Toplink 与 Jpa 一起使用。这里的问题是我们在这个应用程序中使用存储过程，我们使用 Jndi 连接进行存储过程调用，我们使用 EntityManger 进行剩余查询。但是在这里，如果我们启动应用程序，它会从连接池中获取两个连接。应用程序启动后，我调用存储过程（sp）一个 sp 我正在建立一个连接，但在 websphere 连接池中它正在创建两个连接？你能帮我解决这个问题吗.....

我不会使用 JTA 来获取我正在使用的 JDBC 连接

EntityManager em = getJpaTemplate().getEntityManagerFactory().createEntityManager();

这样我就得到了 JDBC 连接......并且我按照代码配置了 persitence.xml 文件......

```
<properties>
    <property name="toplink.logging.level" value="OFF"/>
    <property name="toplink.cache.type.default" value="NONE"/>
    <property name="com.thoughtinc.runtime.persistence.sql.syntax" value="db2" />
</properties> 
```

所以，请仔细研究一下，如果我在这里做错了，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:40:12.003

您使用的是 JTA 还是非 JTA？使用后是否将连接释放回池？

根据您的配置（包括您的 persistence.xml），如果您配置了非 JTA 登录，TopLink 可能会将其用于非事务性读取查询。这可以在您的 persistence.xml 中进行配置。

要从 TopLink (EclipseLink) EntityManager 获取 JDBC 连接，请使用 em.unwrap(Connection.class)

# mysql - 比较2个具有相同结构的Mysql表数据

> ID：12263150
> 
> 赞同：0
> 
> 时间：2012-09-04T12:07:18.467
> 
> 标签：mysql, data-comparison

我有 2 个表**city_sessions_1**和**city_sessions_2** 两个表的结构相似

```
CREATE TABLE `city_sessions_1` (
  `city_id` int(11),
  `session_date` date,
  `start_time` varchar(12),
  `end_time` varchar(12) ,
  `attendance` int(11) ,  
  KEY `city` (`city_id`),
  KEY `session_date` (`session_date`)
) ENGINE=MyISAM; 
```

请注意，这些表没有任何主键，但定义了它们的索引。两个表的行数相同。但预计某些数据会有所不同。

如何比较这两个表的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:15:37.870

```
-- We start with the rows in city_session_1, and their fit in city_session_2
SELECT
  * -- or whatever fields you are interested in
FROM city_sessions_1 
  LEFT JOIN city_sessions_2 ON city_sessions_1.city_id=city_sessions_2.city_id
WHERE 
  -- Chose only those differences you are intersted in
  city_sessions_1.session_date<>city_session_2.session_date
  OR city_sessions_1.start_time<>city_session_2.start_time
  OR city_sessions_1.end_time<>city_session_2.end_time
  OR city_sessions_1.attendance<>city_session_2.attendance

UNION 

-- We need those rows in city_session_2, that have no fit in city_session_1
SELECT
  * -- or whatever fields you are interested in
FROM city_sessions_2 
  LEFT JOIN city_sessions_1 ON city_sessions_1.city_id=city_sessions_2.city_id
WHERE city_sessions_1.city_id IS NULL 
```

# ruby-on-rails - Rails 3 与 Authlogic 并调用 reset_session

> ID：12263152
> 
> 赞同：4
> 
> 时间：2012-09-04T12:07:22.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, authlogic, session-fixation

[RoR 安全指南](http://guides.rubyonrails.org/security.html#session-fixation-countermeasures)指出，您应该使用 reset_session 方法“发出新的会话标识符并在成功登录后声明旧的会话标识符无效”以对抗会话固定。

在使用 Authlogic 时，我无法找到有关调用 reset_session 的任何指导。是否只是将方法包含在控制器方法中（如下所示）的情况？

我只是担心会导致 Authlogic 出现问题，因为在调用 reset_session 之前，我可以在会话哈希中看到 user_credentials 和 user_credentials_id 键和值。

```
class UserSessionsController < ApplicationController

  def create
    @user_session = current_client.user_sessions.new(params[:user_session])
    if @user_session.save
      reset_session
      flash[:success] = I18n.t(:msg_login_success)
      redirect_back_or_default application_root_path
    else
      render :action => :new
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:41:00.353

作为参考，这是我目前的方法：

```
def create
  @user_session = current_client.user_sessions.new(params[:user_session])

  if @user_session.save
    # reset session to counter session fixation
    # whilst retaining values except for those that the application has created specific to the current user
    temp_session = session.merge("current_user" => {}).clone
    reset_session
    session.reverse_merge!(temp_session)
    # set flash msg and redirect
    flash[:success] = I18n.t(:msg_login_success)
    redirect_back_or_default application_root_path
  else
    render :action => :new
  end
end 
```

根据[http://guides.rubyonrails.org/security.html#session-fixation-countermeasures中的建议，在成功登录后仍会调用 reset_session](http://guides.rubyonrails.org/security.html#session-fixation-countermeasures)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:33:58.323

是的，在您登录用户后重置会话（这看起来像发生了什么？）绝对是不对的。您想在用户登录之前执行此操作。

理想情况下，您希望在登录用户之前执行此操作，但前提是登录实际上会成功 - 但我不确定您是否可以让 auth_logic 做到这一点，我对 auth_logic 不是很有经验，虽然这对于 auth_logic 来说是一个非常好的问题，但如果我是你，我会将它作为支持票提交给 auth_logic。

但与此同时，您可能只想尝试将 放在操作方法`reset_session`的*顶部*，*before* `@user_session = current_client.user_sessions.new(params[:user_session])`。我*认为*这会起作用，更糟糕的是在某些情况下您确实不需要重置会话（如果用户的凭据无效），但我*认为*这不会导致严重问题。（嗯，哦，除非它导致您丢失验证错误？）

但同样，这里不是 auth_logic 专家。我不希望您接受这个答案，因为我没有*真正*回答它的专业知识，只是分享我的想法以防万一它对您有所帮助并为您提供一些关于如何思考它的指示。

# python - 访问属性时，发送到另一个实例

> ID：12263154
> 
> 赞同：3
> 
> 时间：2012-09-04T12:07:24.163
> 
> 标签：python

```
class x():
    def __init__(self):
        self.z=2

class hi():
    def __init__(self):
        self.child=x()

f=hi()
print f.z 
```

我希望它打印出来`2`。

基本上我想将对该班级的任何呼叫转发给另一个班级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:14:31.067

最简单的方法是实施[`__getattr__`](http://docs.python.org/reference/datamodel.html#object.__getattr__)：

```
class hi():
    def __init__(self):
        self.child=x()

    def __getattr__(self, attr):
        return getattr(self.child, attr) 
```

这有一些缺点，但它可能适用于您有限的用例。您可能还想实施`__hasattr__`and `__setattr__`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:10:38.823

Python 语法是：

```
class hi(x): 
```

要说`hi`继承（应该是子级）`x`。

.

*注意：为了`hi`拥有属性`z`（因为这是在`hi`'s中`__init__`）`x.__init__`需要显式运行在`x`. 那是，*

```
class hi(x):
    def __init__(self):
        x.__init__(self) 
```

# c - 在 c 中设置基数

> ID：12263164
> 
> 赞同：0
> 
> 时间：2012-09-04T12:07:52.620
> 
> 标签：c, hex, set, base

我需要为十六进制数字实现算术算法。所以我希望每一个算术运算，即加法、乘法、减法和除法都在基数 16 中执行。

反正有没有什么基础？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:10:58.680

请。

现代计算机通过直接在代表 1 和 0 的电压上运行以二进制方式工作。这只是他们的工作方式，你不能在软件中改变它。

您可以做的是更改用于 I/O 的基数，以便以十六进制打印数字，例如：

```
int a = 47, b = 95;
int c = a + b;  /* Look, we add two integers! */

printf("%x + %x = %x\n", a, b, c);  /* Print terms and sum in HEX. */ 
```

这将打印：

```
2f + 5f = 8e 
```

请注意，变量是从十进制数初始化的，但我们仍然可以以十六进制*打印*值。

# unit-testing - Akka - 在运行 ActorSystem 时替换演员

> ID：12263168
> 
> 赞同：1
> 
> 时间：2012-09-04T12:08:10.467
> 
> 标签：unit-testing, actor, akka

我需要对我的应用程序进行单元测试，包括向参与者发送消息。我想启动整个系统，然后用我的“模拟”实例替换一些演员，保持原始演员的包装。这样做的目的是摆脱 Thread.sleep(xxxx) 并使单元测试更加健壮而不依赖于 JVM 时间。被嘲笑的演员应该“拦截”对演员的调用。调用原始参与者并将通知发送回单元测试，以便它可以验证后置条件。

我不想更新现有的“工人”演员以发回此类通知。我可以重构代码以传递在 ActorSystem 中注册的演员，但这是不希望的。因此，如果有一种方法可以获取演员并将其替换为新演员-那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:39:23.543

[Akka TestKit](http://doc.akka.io/docs/akka/2.0.2/scala/testing.html)是根据您的需求量身定制的。

# wix - Wix 刻录自定义主题可防止 exe 在其他计算机上运行

> ID：12263170
> 
> 赞同：3
> 
> 时间：2012-09-04T12:08:23.197
> 
> 标签：wix, installation, wix3.6, burn

基本上我已经创建了一个带有自定义主题的小包，它在我的开发计算机上运行良好，但是当我尝试在任何其他计算机上运行它时，exe 甚至都无法运行。我发现这是自定义主题的原因，如果我删除它并使用默认主题，那么 exe 运行良好。

我尝试将 xml 文件添加到项目中，尝试了不同的引用文件的方法，但没有任何改进。我需要做些什么来将主题与安装打包在一起吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:11:52.247

如果您的主题基于标准 HyperlinkLicense 或 RtfLicense 主题，您可以使用 BalExtension 添加主题和徽标文件：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:bal="http://schemas.microsoft.com/wix/BalExtension"> 
```

并将 BootstrapperApplicationRef 更改为包含以下内容：

```
<BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense">
  <bal:WixStandardBootstrapperApplication
    ThemeFile="path/to/theme.xml"
    LicenseFile="path/to/license.rtf"
    LogoFile="path/to/logo.png" />
</BootstrapperApplicationRef> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T01:53:39.770

我的猜测：你试图在 Windows XP 上运行这些，而这些机器没有安装 GDI+。可能意味着您正在为您的一个图形使用不受支持的图像文件类型。尝试使用 .ICO 文件而不是 JPG 文件或 BMP 文件。那么XP肯定会支持它们。

Burn 不能提供最好的错误报告，因此您必须进行大量试验和错误。

# php - 在没有标签的情况下在 textarea 中重新填充 nl2br 保存的内容？

> ID：12263172
> 
> 赞同：3
> 
> 时间：2012-09-04T12:08:25.900
> 
> 标签：php, nl2br

当用户从文本区域保存文本时：

```
bfajsdb fkjasdfasjkdfasdfasdf asdf asdf sdf

asdfasdfasdfasdf asd asdf asdf 

sdfasdfasdf 
```

从 textarea 使用 codeignter 中的 nl2br_except_pre 函数将其保存在数据库中，如下所示：

```
bfajsdb fkjasdfasjkdfasdfasdf asdf asdf sdf
<br>
asdfasdfasdfasdf asd asdf asdf 
<br>
sdfasdfasdf 
```

很适合在 div 或 p 标签中输出。或一般在 html 输出中。

但是，当再次在 textarea 中重新填充时，它会显示
标签，这很丑陋并且会让用户感到困惑。

如何在从数据库重新填充保存的值之前清理输出，使其在 textarea 中看起来像这样：

```
bfajsdb fkjasdfasjkdfasdfasdf asdf asdf sdf

asdfasdfasdfasdf asd asdf asdf 

sdfasdfasdf 
```

而不是这样：

```
bfajsdb fkjasdfasjkdfasdfasdf asdf asdf sdf
<br>
asdfasdfasdfasdf asd asdf asdf 
<br>
sdfasdfasdf 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T12:14:00.893

好吧，粗略的答案将是“只使用[strip_tags](http://php.net/manual/en/function.strip-tags.php) ”：

```
$raw_textarea = 'bfajsdb fkjasdfasjkdfasdfasdf asdf asdf sdf
<br>
asdfasdfasdfasdf asd asdf asdf 
<br>
sdfasdfasdf';

$clean_textarea = strip_tags($raw_textarea);
echo $clean_textarea; 
```

但是，事实上，还有更多：也许您需要担心*清理*输出，而不仅仅是清除不相关的标签。我建议阅读有关该主题的[讨论](https://stackoverflow.com/questions/2090080/php-markdown-xss-sanitizer)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T12:14:34.467

不要在数据库中保存 nl2br() 数据；您的目标应该是在您的数据库中存储数据而不是 html。

在必要时在视图中呈现时将 nl2br() 应用于数据库值。顺便说一句，Textarea 字段不需要 nl2br() 处理。

当然，当你输出它时，你也应该在 nl2br() 之前应用 htmlspecialchars() 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:14:37.480

试试nl2br php函数

它将产生您想要的输出。

是的，这是正确的。如果您在显示数据时使用 nl2br 函数，它将起作用。

# thunderbird - 如何在 Thunderbird 列中显示图像？

> ID：12263175
> 
> 赞同：3
> 
> 时间：2012-09-04T12:08:34.863
> 
> 标签：thunderbird

Thunderbird 插件[显示联系人照片](https://addons.thunderbird.net/en-us/thunderbird/addon/display-contact-photo/)在邮件标题旁边和收件人列表中显示用户的精美图片（或可选他们的[gravatar](https://en.gravatar.com/) /identicon/wavatar/monsterid）。是否可以将该图标也显示在 Recepient 列中（或者更好的是，来自[Show InOut](https://addons.thunderbird.net/en-US/thunderbird/addon/show-inout/)的 Correspondent ）或默认邮件列表中的单独列？

也就是说，我想在此屏幕截图中显示联系人左侧的图像

[![](../Images/24f2a038ca7b9f281610ca1c6835a27f.png)](https://i.stack.imgur.com/ZVZMo.png)
[（来源：[Mozilla.net](https://addons.cdn.mozilla.net/img/uploads/previews/full/59/59132.png?modified=1321995412)）]

也在电子邮件概述中，因此我可以很快看到每封电子邮件的发件人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T09:33:27.377

如果邮件是垃圾邮件、正常邮件或不确定邮件，[Thunderbayes++会在电子邮件概览中显示一个图标。](https://code.google.com/p/thunderbayes/)也许这个扩展的代码可以帮助你实现它。

# cakephp - 加载不在 Elements 或 View 文件夹中的文件？

> ID：12263180
> 
> 赞同：1
> 
> 时间：2012-09-04T12:08:46.230
> 
> 标签：cakephp

嗨，我正在尝试制作带有小部件的 CMS 之类的东西，所以我的 app 文件夹中有一个文件夹小部件，其中有我的小部件，例如 app/Widgets/UsersOnline/UserOnline.php 我在 appController 中的 beforefilter 方法中使用小部件模型从 db 加载它们然后我将它们传递给视图，因此我想使用小部件助手将它们呈现在位置上。但是我无法使用 view->element() 方法访问文件夹 widgets/UserOnline/view.ctp，此方法要求文件位于 Elements/ 中。

**TLDR / 实际问题：**

有没有办法在 view/ 和 /elements 之外加载文件？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T14:41:26.910

调用元素时可以使用相对路径：

```
<?php echo $this->Element('../../Widgets/UsersOnline/UserOnline'); ?> 
```

不要忘记将您的元素文件命名为“UserOnline.ctp”。

# ios - iOS - 推送内容

> ID：12263181
> 
> 赞同：0
> 
> 时间：2012-09-04T12:08:46.293
> 
> 标签：ios, push, apple-push-notifications, payload

我google了很多，但我找不到答案。

我正在尝试在应用程序处于后台时获取推送通知的内容/有效负载。

方法：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

和

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:17:21.340

如果您没有任何`background mode`应用程序（音频、gps 或 voip 之一），`-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo`则不会立即调用该方法，而是在用户按下“打开”按钮后将应用程序置于前台。如果他或她决定跳过通知，则您无能为力，这意味着您需要在应用程序返回前台时刷新状态，您不能依赖推送通知来更新数据。

更好的选择可能是使用徽章计数器来跟踪更改，您需要在服务器端进行计算。然后，如果前台的应用程序具有正徽章编号，则您会更新数据并重置计数器。然而，这并不完美，因为没有保证通知已交付 - 您仍然需要手动检查徽章计数器（或者您可以说检查更改的数量）。

# asp.net - 如果数据库中已经存在数据，如何防止数据被添加

> ID：12263184
> 
> 赞同：0
> 
> 时间：2012-09-04T12:08:57.107
> 
> 标签：asp.net, sql

我希望用户在网站上注册，如果他的电子邮件已经存在，则不应添加他的数据。

现在这是我使用的功能：

```
IF exists( SELECT        SU_ID, SU_Email
           FROM            SystemUser
           WHERE        (SU_Email = @email)
           )
Begin
    return 0
END
else
begin
    return -1
end 
```

但即使选择语句返回一个值，它也不会返回 0 并返回 -1。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:14:28.617

尝试这个

```
DECLARE @FOUND INT
SET @FOUND = (SELECT COUNT(*) AS F FROM SystemUser WHERE (SU_Email = @email))
IF @FOUND > 0 THEN
 RETURN 0
ELSE
 RETURN -1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:47:14.427

将唯一定义为 SQL Server 数据列中的约束。处理相同的异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:12:03.850

如果不存在则尝试插入

```
 IF Not exists( SELECT * FROM  SystemUser  WHERE SU_Email = @email)
 Begin
     --Insert statment here
 END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T12:13:06.870

当我们编写一个函数时，我们还声明了一个返回变量，你错过了，按照下面的代码

```
Create function CheckUser(@Email @Varchar(50))
RETURNS Bit
DECLARE @ans bit  -- Declare a bit variable

IF exists( SELECT        SU_ID, SU_Email
       FROM            SystemUser
       WHERE        (SU_Email = @email)
       )
    Begin
       set @ans = 1
    END
else
    Begin
       set @ans = 0
    End

RETURNS @ans 
```

# event-handling - 在 ClientHandler 谷歌应用程序脚本中获取 TextBox 值

> ID：12263185
> 
> 赞同：1
> 
> 时间：2012-09-04T12:09:04.083
> 
> 标签：event-handling, google-apps-script, client-side-scripting

我想做的是以下几点：

```
var handler1 app.createClientHandler().
              forTargets(textbox2).setText(textbox1.getText()); 
```

但是 .getText 在客户端不存在。

我可以使用 ServerHandler 和 e.parameter.textbox1 让它工作：

```
v3.setText(e.parameter.textbox1); 
```

是否有其他解决方案或解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T22:47:09.950

不，不可能在客户端处理程序中读取小部件的值。

# mysql - mysqlcheck 与 --optimize 但仅适用于 MyISAM 表

> ID：12263190
> 
> 赞同：3
> 
> 时间：2012-09-04T12:09:28.853
> 
> 标签：mysql, relational-database, myisam

我一直在阅读[http://dev.mysql.com/doc/refman/5.0/en/mysqlcheck.html](http://dev.mysql.com/doc/refman/5.0/en/mysqlcheck.html)，试图弄清楚如何优化我的所有 MyISAM 表，但似乎无法理解。我发现它看起来像是一个手写脚本，但我无法让它工作，我宁愿真正理解它。

这就是我遇到的：

`for i in mysql -e 'select concat(table_schema,".",table_name) from information_schema.tables where engine="MyISAM"'; do mysql -e "optimize table $i"; done`

但是按照文档中描述的内容使用更多的东西会很棒，`mysqloptimize --all-databases`但我绝对不希望它尝试优化我的 InnoDB 表..

任何指针？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:09:55.487

您可以使用存储的例程来优化表。但是，显然，这需要运行 mysql 服务。存储例程的示例如下所示。此过程中定义的游标选择当前数据库（其中定义了此 sp）中的所有表。您可以在 WHERE 中添加条件来检查带有条件的 MISAM 表，例如：

```
DELIMITER //
CREATE PROCEDURE util_optimize_all_tables()
SQL SECURITY INVOKER
BEGIN
    DECLARE endloop INT DEFAULT 0;
    DECLARE tableName CHAR(100);
    DECLARE rCursor CURSOR FOR SELECT `TABLE_NAME`
        FROM `information_schema`.`TABLES`
        WHERE `TABLE_SCHEMA` = DATABASE() AND `ENGINE`='MyISAM';
    DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET endloop = 1;

    OPEN rCursor;
    FETCH rCursor INTO tableName;

    WHILE endloop = 0 DO
        SET @sql = CONCAT('OPTIMIZE TABLE `', tableName, '`;');
        PREPARE statement FROM @sql;
        EXECUTE statement;

        FETCH rCursor INTO tableName;
    END WHILE;

    CLOSE rCursor;
END//
DELIMITER ; 
```

# lucene - 正确解析 Lucene 查询

> ID：12263195
> 
> 赞同：2
> 
> 时间：2012-09-04T12:09:44.037
> 
> 标签：lucene

我的 Lucene (3.6) 文档中有“标题”和“关键字”字段。当我有一个对象`title=Testfair 2012-09`和关键字时`someTest`，我将文档编写为：

```
Document doc = new Document();
doc.add(new Field("title", title, Field.Store.NO, Field.Index.ANALYZED));
doc.add(new Field("keyword", keyword, Field.Store.NO, Field.Index.ANALYZED)); 
```

对于搜索，我使用

```
QueryParser queryParser = new MultiFieldQueryParser(Version.LUCENE_36, new String[] { "title", "keyword" }, new StandardAnalyzer(Version.LUCENE_36));
queryParser.setDefaultOperator(QueryParser.AND_OPERATOR);
queryParser.setAllowLeadingWildcard(true);
Query query = queryParser.parse(queryString);

IndexSearcher searcher = createSearcher();
TopScoreDocCollector collector = TopScoreDocCollector.create(1000, true);
searcher.search(query, collector);
ScoreDoc[] hits = collector.topDocs().scoreDocs; 
```

在索引中，我可以看到（通过[Luke](http://code.google.com/p/luke/)）`title`索引中的字段具有值`"Testfair", "2012"`和`"09"`。

现在我在搜索时想要以下行为：

```
Testfair 2012-09 -> match     (1)
estfair          -> match     (2)
Testfair baz     -> no match  (3) 
```

我不确定如何处理这个问题，因为我需要对 case (2) 进行隐式通配符搜索。如果我在空格处拆分搜索词`*`并在每个单词之前和之后添加，我会搜索到`+(title:*testmesse*) +(title:*2012-09*)`，因此`2012-09`不会拆分并且找不到结果。如果我理解正确，问题出在使用中，`MultiFieldQueryParser`但我不知道如何正确设置搜索，或者我是否应该以某种方式修改索引过程。

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:32:44.053

与此同时，我得到了《Lucene in Action》一书并从那里得到了建议：创建一个“catch all”字段，其中包含一个字段中的所有可搜索字段并仅搜索该字段。在这个技巧的帮助下，我可以跳过，`MultiFieldQueryParser`因为我只有一个字段可以搜索。现在我可以简单地分析搜索词并按照我需要的方式修改它。

# c - 使用相同的左值多次调用 strdup()

> ID：12263196
> 
> 赞同：2
> 
> 时间：2012-09-04T12:09:47.743
> 
> 标签：c, pointers, memory-leaks, free, strdup

在我从前辈那里继承的程序中，有以下格式的函数：

```
 somefunc(some_type some_parameter, char ** msg) 
```

换句话说，最后一个参数是 a `char **`，用于返回消息。即：`somefunc()`会“变” `msg`。在某些情况下，所讨论的变化是以下形式：

```
 sprintf(txt,"some text. Not fixed but with a format and variables etc");
    LogWar("%s",txt);   //call to some logging function that uses txt
    *msg = strdup(txt); 
```

我知道每次调用都`strdup()`应该有一个相关的调用`free()`来释放它分配的内存。

由于该内存用于返回某些内容，因此显然不应在`somefunc()`.

但然后在哪里？

如果使用*相同*`somefunc()`的消息多次调用，那么该指针将四处移动，我想。那么*之前*调用分配的空间会丢失，对吧？

 **我当然应该在程序结束之前的某个地方`free(*msg)`。（在这种情况下`*msg`，是在调用中用作参数的版本`somefunc()`。）但我认为该调用只会释放*最后*分配的内存，而不是在*早期*调用中分配的内存`somefunc()`，对吧？

那么，我是否正确地说`somefunc()`应该如下所示：

```
 sprintf(txt,"some text. Not fixed like here, but actually with variables etc");
    LogWar("%s",txt);   //call to some logging function that uses txt
    free(*msg); //free up the memory that was previously assigned to msg, since we will be re-allocating it immediatly hereafter
    *msg = strdup(txt); 
```

所以用`free()` *之前*的`strdup()`.

我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:13:07.807

是的，你是对的。从返回的任何旧指针在覆盖之前`strdup()`必须为d，否则会泄漏内存。`free()`

为了清楚起见，我确定您在哪里很简单，但我当然会投票赞成这样的事情：

```
const char * set_error(char **msg, const char *text)
{
  free(*msg);
  *msg = strdup(text);
} 
```

接着：

```
LogWar("%s",txt);   //call to some logging function that uses txt
set_error(msg, txt); 
```

看看我是如何使用*封装*来使这个非常重要的序列更加明确，甚至命名的？**

# php - Doctrine2 组合/连接实体属性

> ID：12263197
> 
> 赞同：2
> 
> 时间：2012-09-04T12:09:57.843
> 
> 标签：php, doctrine-orm

我有 2 个实体：类型和资产，您可以看到下面的定义。

为了在我的网络应用程序中显示资产列表，我需要生成一个资产名称，它是`Type->name`和的串联`Asset->id`（例如：cat-158 或 dog-15）

我刚刚向`getName()`资产实体添加了一个方法，该方法获取类型名称并将其与资产 ID 连接起来。有没有办法使用注释来做到这一点，以便在获取资产时使用连接语句构建名称？基本上是资产实体上的一个属性，在获取资产时填充了正确的名称/id 组合，而在调用时不获取类型`getName()`？

```
<?php
class Asset
{
    /**
     * @ORM\Id
     * @ORM\GeneratedValue("IDENTITY")
     * @ORM\Column(type="integer")
     * @var integer
     */
    private $id;

    /**
     * @ORM\ManyToOne(targetEntity="\Type")
     * @var \Type
     */
    private $type;

    /**
     * Constructs a name from the type and id
     * @return string
     */
    public function getName()
    {
        return $this->getType()->getName() . '-' . $this->getId();
    }

    // SNIP ...
}

class Type
{
    /**
     * @ORM\Id
     * @ORM\GeneratedValue("IDENTITY")
     * @ORM\Column(type="integer")
     * @var integer
     */
    private $id;

    /**
     * @ORM\Column(type="string", length=200, unique=true, nullable=false)
     * @var string
     */
    private $name;

    // SNIP ...
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-06T07:48:06.717

尝试这个 ？

资产类扩展类型{

}

# java - SWT 从 StyledText 中删除所有侦听器

> ID：12263199
> 
> 赞同：5
> 
> 时间：2012-09-04T12:10:00.693
> 
> 标签：java, swt, listener

`StyledText`如果缺少实例，如何从 SWT 中删除所有侦听器？我尝试使用该`StyledText.getListeners(int)`方法获取所有实例，然后能够将它们删除。但是找到所有必需的 int 值是很累的。这是最直接的方法吗？谢谢！

这是我的临时解决方案：

```
public void removeAllListener(StyledText st) {
    int[] eventTypes = { 3007, 3011, SWT.Resize, SWT.Move, SWT.Dispose,
            SWT.DragDetect, 3000, SWT.FocusIn, SWT.FocusOut, SWT.Gesture,
            SWT.Help, SWT.KeyUp, SWT.KeyDown, 3001, 3002, SWT.MenuDetect,
            SWT.Modify, SWT.MouseDown, SWT.MouseUp, SWT.MouseDoubleClick,
            SWT.MouseMove, SWT.MouseEnter, SWT.MouseExit, SWT.MouseHover,
            SWT.MouseWheel, SWT.Paint, 3008, SWT.Selection, SWT.Touch,
            SWT.Traverse, 3005, SWT.Verify, 3009, 3010 };

    for (int eventType : eventTypes) {
        Listener[] listeners = st.getListeners(eventType);
        for (Listener listener : listeners) {
            st.removeListener(eventType, listener);
        }
    }
} 
```

我不得不复制一些值，因为它们是`StyledText`使用 default 修饰符声明的类的一部分。所以我无法访问它们。

我希望，我没有错过任何 int 值；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T12:45:56.767

一般来说，没有机制可以做到这一点。但是，我设法通过子类化让它工作`StyledText`。新类称为`StyledTextWithListeners`。如果你愿意，你可以重命名它；）。但是，您将不得不使用

```
styledText.addListenerByUser(int eventType, Listener listener); 
```

加你`Listener`而不是

```
styledText.addListener(int eventTyle, Listener listener); 
```

这对于区分`Listener`您添加的 s 和 SWT 在创建时添加的 s 是必要的。

**要删除用户（您）添加的**所有侦听器，只需调用

```
styledText.removeAllListeners(); 
```

这是代码：

```
import java.util.HashMap;

import org.eclipse.swt.SWT;
import org.eclipse.swt.custom.StyledText;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Event;
import org.eclipse.swt.widgets.Listener;
import org.eclipse.swt.widgets.Shell;

public class MiniExample {

    public static void main(String[] args) {
        Display display = Display.getDefault();
        final Shell shell = new Shell(display);
        shell.setLayout(new GridLayout(1, false));

        StyledTextWithListeners text = new StyledTextWithListeners(shell, SWT.BORDER);

        text.setText("TEXT");

        text.addListenerByUser(SWT.Verify, new Listener() {

            @Override
            public void handleEvent(Event arg0) {

            }
        });

        text.removeAllListeners();

        shell.pack();
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
    }

    public static class StyledTextWithListeners extends StyledText
    {
        HashMap<Integer, Listener> listeners;
        public StyledTextWithListeners(Composite parent, int style) {
            super(parent, style);
        }

        public void addListenerByUser(int eventType, Listener listener)
        {
            addListener(eventType, listener);
            System.out.println("Adding: " + listener.getClass().toString());

            if(listeners == null)
                listeners = new HashMap<Integer, Listener>();

            listeners.put(eventType, listener);
        }

        public void removeAllListeners()
        {
            for(Integer type : listeners.keySet())
            {
                System.out.println("Removing: " + listeners.get(type).getClass().toString());
                removeListener(type.intValue(), listeners.get(type));
            }
            listeners = new HashMap<Integer, Listener>();
        }
    }
} 
```

它基本上保存了`Listener`您在 a 中添加的所有 s`HashMap`并在您调用 时将它们删除`removeAllListeners`。

**请记住**，我没有处理您添加第二个`Listener`与之前相同`eventType`的`StyledText`情况。在这种情况下，旧的`Listener`将在 HashMap 中被替换，但不会从`StyledText`. 如果您的场景中可能出现这种情况，您只需自己添加一些代码即可。

# entity-framework - EF Power Tools Beta 2 - 调用目标引发了异常

> ID：12263200
> 
> 赞同：6
> 
> 时间：2012-09-04T12:10:06.520
> 
> 标签：entity-framework

我有 EF 5.0 代码优先 VS 2012 项目，所有实体框架菜单命令（查看实体数据模型 DDL SQL）都会产生“调用目标引发异常”弹出窗口。我认为还发生了变化的是 EF Power Tools Beta 1（或 VS 2010，我不确定）用于在输出窗口中显示 EF Power Tools 消息。现在我得到的只是弹出窗口......这是VS还是Power Tools问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:20:08.177

这是我的工作：

将构造函数注释掉，并将静态 MyDbContext 保持原样 -->

```
public class MyDbContext: DbContext
{
    public static string ConnectionName = "Name = SMS_ADvTECHContext";
    static MyDbContext()
    {
        Database.SetInitializer<SMS_ADvTECHContext>(null);
    }

/*  public SMS_MyDbContext()
        : base(ConnectionName)
    {
    }*/
} 
```

然后，如果您右键单击上下文类 --> Enityframework --> 查看实体数据模型（只读），它会生成视图！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T15:56:39.990

遇到了这个错误，这是一个更简单的问题......包含我的上下文的项目不是启动项目。一旦我将项目设置为**启动项目**，它就开始工作了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T18:42:13.163

当我没有在**包含我的 DbContext 类的项目中的 App.config 中**配置正确的默认连接工厂时，我遇到了这个错误。我更新了它以使用正确的工厂，这个错误就消失了。就我而言，我将其设置为使用 LocalDbConnectionFactory：

```
 <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
        <parameters>
            <parameter value="v11.0" />
        </parameters>
    </defaultConnectionFactory>
</entityFramework> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:24:15.213

当您选择实体框架菜单命令时，Visual Studio 可能无法确定用于 DBContext 的连接字符串。

在我的例子中，我能够通过验证我的 dbContext 有一个“默认”连接字符串来解决这个问题。因此，当您右键单击数据库上下文并选择实体框架时，您将与数据库建立连接。

换句话说，我修改了我的 DBContext 以从命令行参数中选择连接字符串到我的应用程序。因此，通常情况下，我的数据库上下文没有“默认”值。

```
public class MyDbContext : DbContext
{
    public static string ConnectionName; 

    public DnnDbContext()
        : base( "Name=" + ConnectionName)  {     
    } 
```

如您所见，默认情况下我没有 ConnectionString。

我改为：

```
 public static string ConnectionName = "DefaultConnNameInAppConfig"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-19T21:30:38.337

当我在 web.config 中配置了多个具有相同名称的连接字符串时，我遇到了这个问题。

# php - 使用原始 PHP 的linkedin API

> ID：12263202
> 
> 赞同：1
> 
> 时间：2012-09-04T12:10:06.157
> 
> 标签：php, linkedin

我想在获取令牌后获取个人资料信息

```
<?php

    session_start ();

    if (!$_SESSION['linkedin_access_token'])
    {
        echo 'Grant access first';
        exit ();
    }

    ## step 0
    define ('LINKEDIN_KEY', 'xxxxxx');
    define ('LINKEDIN_SECRET', 'xxxxxxx');

    function urlencode_oauth ($str)
    {
        return str_replace ('+', ' ', str_replace ('%7E', '~', rawurlencode ($str)));
    }

    $links = array (
        'request_token' => 'https://api.linkedin.com/uas/oauth/requestToken',
        'authorize' => 'https://www.linkedin.com/uas/oauth/authorize',
        'access_token' => 'https://api.linkedin.com/uas/oauth/accessToken',
    );

    ## step 2
    $params = array (
        'oauth_consumer_key' => LINKEDIN_KEY,
        'oauth_nonce' => sha1 (microtime ()),
        'oauth_signature_method' => 'HMAC-SHA1',
        'oauth_timestamp' => time (),
        'oauth_token' => $_SESSION ['linkedin_access_token'],
        'oauth_version' => '1.0'
    );

    ## step 3
    // sort parameters according to ascending order of key
    // sort parameters according to ascending order of key
    ksort ($params);

    // prepare URL-encoded query string
    $q = array ();
    foreach ($params as $key => $value)
    {
        $q [] = urlencode_oauth ($key) . '=' . urlencode_oauth ($value);
    }
    $q = implode ('&', $q);

    // generate the base string for signature
    $parts = array (
        'POST',
        urlencode_oauth ('https://api.linkedin.com/v1/people/~'),
        urlencode_oauth ($q)
    );
    $base_string = implode ('&', $parts);

    ## step 4
    $key = urlencode_oauth (LINKEDIN_SECRET) . '&' . urlencode_oauth ($_SESSION ['linkedin_access_token_secret']);
    $signature = base64_encode (hash_hmac ('sha1', $base_string, $key, true));

    ## step 5
    $params ['oauth_signature'] = $signature;
    $str = array ();
    foreach ($params as $key => $value)
    {
        $str [] = $key . '="' . urlencode_oauth ($value) . '"';
    }
    $str = implode(', ', $str);
    $headers = array (
        'POST /v1/people/~ HTTP/1.1',
        'Host: api.linkedin.com',
        'Authorization: OAuth ' . $str,
        'Content-Type: text/xml;charset=UTF-8',
        'Content-Length: 0',
        'Connection: close'
    );

    ## step 6
    $fp = fsockopen ("ssl://api.linkedin.com", 443, $errno, $errstr, 30);
    if (!$fp)
    {
        echo 'Unable to connect to LinkedIn';
        exit();
    }
    $out = implode ("\r\n", $headers) . "\r\n\r\n";
    fputs ($fp, $out);

    // getting LinkedIn server response
    $res = '';
    while (!feof ($fp)) $res .= fgets ($fp, 4096);
    fclose ($fp);

    echo '<pre>';
    echo $res . "\n\n";
    echo $_SESSION ['linkedin_access_token'] . "\n" . $_SESSION ['linkedin_access_token_secret'];

 ?> 
```

它出什么问题了？它向我展示了

```
HTTP/1.1 405 Method Not Allowed
Server: Apache-Coyote/1.1
x-li-request-id: H8M76QXW5O
Date: Tue, 04 Sep 2012 12:09:21 GMT
Vary: *
x-li-format: xml
Content-Type: text/xml;charset=UTF-8
Content-Length: 262

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<error>
  <status>405</status>
  <timestamp>1346760561727</timestamp>
  <request-id>H8M76QXW5O</request-id>
  <error-code>0</error-code>
  <message>Unsupported POST target {/v1/people/~}</message>
</error>

xxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxx 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T07:20:29.593

```
define('LINKEDIN_KEY', 'YOUR_KEY');
define('LINKEDIN_SECRET', 'YOUR SECRET');

function urlencode_oauth($str) {
return str_replace('+',' ',str_replace('%7E','~',rawurlencode($str)));
}
$links = array(
 'request_token'=>'https://api.linkedin.com/uas/oauth/requestToken',
  'authorize'=>'https://www.linkedin.com/uas/oauth/authorize',
  'access_token'=>'https://api.linkedin.com/uas/oauth/accessToken'
);
$params = array(
  'oauth_callback'=>"YOUR CALLBACK URL",
  'oauth_consumer_key'=>LINKEDIN_KEY,
  'oauth_nonce'=>sha1(microtime()),
  'oauth_signature_method'=>'HMAC-SHA1',
  'oauth_timestamp'=>time(),
  'oauth_version'=>'1.0'
);
    // sort parameters according to ascending order of key
    ksort($params);

    // prepare URL-encoded query string
    $q = array();
    foreach ($params as $key=>$value) {
      $q[] = urlencode_oauth($key).'='.urlencode_oauth($value);
    }
    $q = implode('&',$q);

    // generate the base string for signature
    $parts = array(
      'POST',
      urlencode_oauth($links['request_token']),
      urlencode_oauth($q)
    );
    $base_string = implode('&',$parts);
    $key = urlencode_oauth(LINKEDIN_SECRET) . '&';
    $signature = base64_encode(hash_hmac('sha1',$base_string,$key,true));

    $params['oauth_signature'] = $signature;
    $str = array();
    foreach ($params as $key=>$value) {
      $str[] = $key . '="'.urlencode_oauth($value).'"';
    }
    $str = implode(', ',$str);
    $headers = array(
      'POST /uas/oauth/requestToken HTTP/1.1',
      'Host: api.linkedin.com',
      'Authorization: OAuth '.$str,
      'Content-Type: text/xml;charset=UTF-8',
      'Content-Length: 0',
      'Connection: close'
    );
    $fp = fsockopen("ssl://api.linkedin.com",443,$errno,$errstr,30);
    if (!$fp) { echo 'Unable to connect to LinkedIn'; exit(); }
    $out = implode("\r\n",$headers) . "\r\n\r\n";
    fputs($fp,$out);

    // getting LinkedIn server response
    $res = '';
    while (!feof($fp)) $res .= fgets($fp,4096);
    fclose($fp);

    $parts = explode("\n\n",str_replace("\r",'',$res));
    $res_headers = explode("\n",$parts[0]);
    if ($res_headers[0] != 'HTTP/1.1 200 OK') {
      echo 'Error getting OAuth token and secret.'; exit();
    }
    parse_str($parts[1],$data);
    if (empty($data['oauth_token'])) {
      echo 'Failed to get LinkedIn request token.'; exit();
    } 
```

替换三个东西 1\. ' `YOUR_KEY`' 2\. ' `YOUR_SECRET`' 和 3.' `oauth_callback`'。

谢谢，

阿南德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:37:11.353

如[文档所示](https://developer.linkedin.com/documents/profile-api)，Profile API 不支持 POST 方法。尝试使用 GET 来检索配置文件数据。

# android - 在图像上绘制具有列数和行数的度量

> ID：12263207
> 
> 赞同：1
> 
> 时间：2012-09-04T12:10:26.907
> 
> 标签：android, image, imageview

我想在图像上绘制一个具有一定数量的列和行的指标，该图像的单元格编号为 1,2,3 ... 等等。

我正在尝试这个，但没有找到任何解决方案，任何人都可以帮助摆脱这个。我希望它可以用作网格视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:18:23.853

我得到了使用这个的解决方案..

```
for (float row = (r.top/size1); row < PosterActivity.mNoOfRows+(r.top/size1); row++) {
                        float y = (row * size1);
                        for (float col = (r.left/size); col < PosterActivity.mNoOfColumns+(r.left/size); col++) {
                            float x = (col * size);
                            //                      canvas.drawRect(x, y, x + size, y + size1, paint1);

                            if ((int)col == myX && (int)row == myY) {
                                canvas.drawRect(x,y, x + size,y + size1, paint);
//                              Log.i("Draw X"+x,"Draw Y"+y);
                                Log.i("Touch Event Occured:","==>"+num);
                                //Toast.makeText(getContext(), "" + num,Toast.LENGTH_SHORT).show();

                            }
                            num++;
                        }
//                  } 
```

# objective-c - 当窗口改变大小时，带有填充（图案图像）的 NSView 滚动

> ID：12263208
> 
> 赞同：2
> 
> 时间：2012-09-04T12:10:29.200
> 
> 标签：objective-c, macos, cocoa, nsview, drawrect

我有一个带有 drawRect 的 NSView

```
- (void)drawRect:(CGRect)rect {
    // Drawing code
    NSPoint origin = [self visibleRect].origin;
    [[NSGraphicsContext currentContext]
     setPatternPhase:NSMakePoint(origin.x, origin.y)];
    [[NSColor colorWithPatternImage: self.image] set];
    [NSBezierPath fillRect: [self bounds]];
} 
```

它完美地绘制了我的图案，但是当我更改窗口的大小时，我可以看到图案滚动。

我试图将视图 isFlipped 设置为 YES 但这并没有改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:01:23.760

您需要先进行一些离屏绘图，然后将结果绘制到视图上。例如，您可以使用与视图完全相同大小的空白 NSImage，在该图像上绘制图案，然后在视图上绘制该图像。

您的代码可能看起来像这样：

```
- (void)drawRect:(NSRect)dirtyRect
{
  // call super
  [super drawRect:dirtyRect];

  // create blank image and lock drawing on it    
  NSImage* bigImage = [[[NSImage alloc] initWithSize:self.bounds.size] autorelease];
  [bigImage lockFocus];

  // draw your image patter on the new blank image
  NSColor* backgroundColor = [NSColor colorWithPatternImage:bgImage];
  [backgroundColor set];
  NSRectFill(self.bounds);

  [bigImage unlockFocus];

  // draw your new image    
  [bigImage drawInRect:self.bounds
            fromRect:NSZeroRect 
           operation:NSCompositeSourceOver 
            fraction:1.0f];
}

// I think you may also need to flip your view
- (BOOL)isFlipped
{
  return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-06T15:17:07.740

迅速

发生了很多变化，现在事情变得更容易了，不幸的是，objective-C 的部分遗产丢失了，而对于 Cocoa，Swift 就像一个孤儿。无论如何，基于 Neovibrant 的我们可以推断解决方案。

1.  子类 NSView
2.  覆盖绘制方法
    *   调用父方法（这很重要）
    *   在视图边界内设置缓冲区填充
    *   在缓冲区上绘制填充

代码

```
 override func draw(_ dirtyRect: NSRect) {
         super.draw(dirtyRect)

         let bgimage : NSImage = /* Set the image you want */
         let background = NSColor.init(patternImage: bgimage)
         background.setFill()

         bgimage.draw(in: self.bounds, from: NSZeroRect, operation: .sourceOver, fraction: 1.0)
    } 
```

# ruby-on-rails - 在 Ruby on Rails 中按多个条件查找

> ID：12263209
> 
> 赞同：2
> 
> 时间：2012-09-04T12:10:29.727
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

RoR 中有一个搜索操作可以处理一些参数，例如：

```
params[:name] # can be nil or first_name
params[:age]        # can be nil or age 
params[:city]    # can be nil or country
params[:tag]    # can be nil or country 
```

型号名称是`Person`。它也`has_many :tags`。

在寻找我需要的人时，我喜欢和所有存在的条件。当然，它不合理也不干燥。

我试图做的事情：

```
conditions = []
conditions << [ "name like ?", params[:name]+"%" ] if params[:name].present?
conditions << [ "age = ?", params[:age] ] if params[:age].present?
conditions << [ "city = like ?", params[:city]+"%" ] if params[:city].present?
@persons = Person.all(:conditions => conditions )
#What about tags?  How do include them if params[:tag].present? 
```

当然，我希望我的代码是 DRY。现在不是了。`params[:age]`更重要的是，如果并且不存在`params[:name]`，它将导致异常。`params[:city]`

我该如何解决？以及如何包含由`tag.name=params[:tag]`(if `params[:tag].present?`) 过滤的人员的标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:02:11.047

要在查询中包含标签条件：

```
if params[:tag].present?
  @persons = Person.all(:conditions => conditions).includes(:tags).where("tags.name = ?", params[:tag])
else
  @persons = Person.all(:conditions => conditions)
end 
```

至于当 params[:age] .. 不存在时出现的错误 - 这很奇怪，因为如果未在 params 中设置密钥，它应该返回 false。你能粘贴你得到的错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:40:08.280

你应该这样做：

假设过滤器参数包括：

```
filters = {
  :name_like => "Grienders",
  :age_equal => 15
} 
```

现在你为每个定义方法

```
class Person
  def search_with_filters(filters)
    query = self.scoped
      filters.each do |key, values|
        query = query.send(key, values)
      end
    return query
  end

  def name_like(name)
    where("name like ?", name)
  end

  def age_equal(age)
    where(:age => age
  end
end 
```

您是否看到方法 search_with_filters 将是“控制”方法，它将采用一组查询条件（name_like、age_equal 等）并使用 send 方法将它们传递给匹配的方法名称，同时我们还传递将成为方法参数的条件。这种方式之所以好的原因是因为您可以扩展到任意数量的条件（您的过滤器可以说变得很大）并且代码非常干净，因为您所要做的就是填充您的过滤器参数。该方法可读性强，模块化且易于测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T19:17:25.490

我会为此广泛使用范围。从默认范围开始，根据条件合并其他范围。

编写范围（或类方法）：

```
class Person << AR::Base
  ...
  NAME_PARTS = ['first_name', 'last_name']
  scope :by_name, lambda { |q| where([NAME_PARTS.join(' LIKE :q OR ') + ' LIKE :q', { :q => "%#{q}%" }]) }
  scope :by_email, lambda { |q| joins(:account).where(["accounts.email LIKE :q", { :q => "%#{q}%" }]) }
  scope :by_age, where(["people.age = ?", q])
  scope :tagged, lambda { |q| joins(:tags).where(["tags.name LIKE :q", { :q => "%#{q}%" }]) }
end 
```

参考：

1.  [Rails 3 中的作用域](http://ablogaboutcode.com/2011/02/19/scopes-in-rails-3/)
2.  [Rails 3 如何让您的生活更美好](http://railsdispatch.com/posts/rails-3-makes-life-better)中的范围大修部分

现在，仅在满足条件时才合并范围。据我了解您的情况，特定搜索项的值是否为零（例如，未给出年龄），请勿搜索该范围。

```
 ...      
  def search(object)
    interested_fields = ['name', 'age', 'email', 'tags']
    criteria = object.attributes.extract!(*interesting_fields) # returns { :age => 20, ... }

    scope = object.class.scoped

    build(criteria).each do |k, v|
      scope = scope.send(k.to_sym, v)
    end

    scope.all
  end

  # This method actually builds the search criteria.
  # Only keep param which has value and reject the rest.
  def build(params)
    required = ['name', 'age', 'email', 'tags']
    params.delete_if { |k, v| required.include?(k) && v.blank? }

    params
  end
... 
```

参考：

1.  [提炼！](http://apidock.com/rails/Hash/extract!)

# java - Java等待特定间隔通知不起作用

> ID：12263210
> 
> 赞同：0
> 
> 时间：2012-09-04T12:10:31.037
> 
> 标签：java, wait, intervals, notify

代码片段：

```
class Counter implements Runnable {
    Object s = new Object();

    @Override
    public void run() {
        try {
            synchronized (s) {
                s.wait(10000);
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        //...do Something
    }

    public void stopCounter() {
        synchronized (s) {
            s.notifyAll();
        }   
    }
} 
```

无论我是否调用 stopCounter，...do Something 代码始终仅在等待间隔之后执行。即使在通知之后它仍然等待 10 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:19:09.360

我无法从您的示例中看出您要达到的目标。如果要尝试替换某种轮询，请考虑在 Java 5 中发布的[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)接口。既然已经出现，我就不需要等待/通知了。它使用起来要简单得多，并且 java 在幕后为您完成了等待/通知的等价物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:16:14.513

这取决于你使用它的方式。我刚刚通过添加一个主要方法并运行它来尝试它，看起来等待/通知机制工作正常，而不是你描述的方式。请自行尝试：

```
public static void main(String[] args) {
  Counter c = new Counter();
  new Thread(c).start();
  try {
    Thread.sleep(1000);
  } catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
  }
  c.stopCounter();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:17:37.730

我的猜测是您在类的不同实例上调用`run`and方法。因此，他们使用不同的监视器（您的）并且停止调用不会通知其他计数器。`stopCounter``Counter``s = new Object()`

例如，这将与您描述的类似（除非您得到虚假唤醒）：

```
public static void main(String[] args) throws InterruptedException {
    Counter c = new Counter();
    new Thread(c).start();
    Thread.sleep(200);
    new Counter().stopCounter();
}

static class Counter implements Runnable {

    Object s = new Object();

    @Override
    public void run() {
        try {
            System.out.println("in");
            synchronized (s) {
                s.wait(10000);
            }
            System.out.println("out");
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        //...do Something
    }

    public void stopCounter() {
        synchronized (s) {
            s.notifyAll();
        }
        System.out.println("notified");
    }
} 
```

# jquery - JQuery 没有按顺序运行以淡出框阴影

> ID：12263212
> 
> 赞同：2
> 
> 时间：2012-09-04T12:10:37.227
> 
> 标签：jquery, css

出于某种原因，我不能让 jQuery 按顺序运行。

请参阅：http: [//jsfiddle.net/Az9E2/](http://jsfiddle.net/Az9E2/)

我想单击一个按钮，并按顺序执行以下功能：

1.  给`focus`文本区域
2.  添加`box-shadow`到文本区域
3.  延迟为`100ms`
4.  `transition`向文本区域添加一个类
5.  删除`box-shadow`并`fade out`很好地观看

但是，当我这样做时，它会一次性完成所有操作，因此`box-shadow`永远不会出现。

或者，如果我删除最后阶段，那么 box shadow `fades in`，这意味着 (4) 发生在 (2) 之前。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:13:58.647

> .delay() 方法最适合在排队的 jQuery 效果之间进行延迟。因为它是有限的——例如，它不提供取消延迟的方法——.delay() 不能替代 JavaScript 的原生 setTimeout 函数，这可能更适合某些用例。

来源：[http ://api.jquery.com/delay/](http://api.jquery.com/delay/)

* * *

当然，您提到的其他几点都是（*在眼睛*上）同时发生的，因为没有任何延迟可以阻止它。

* * *

试试：http: [//jsfiddle.net/JH4fM/2/](http://jsfiddle.net/JH4fM/2/)

```
$('#change').on('click', function () {
  var $el = $(".snapp_view_ask_question_textarea");

  $el.focus().css("box-shadow", "rgba(139, 0, 0, 0.5) 0px 0px 30px 2px");
  setTimeout(function () {
    $el.css("box-shadow", "");
  }, 400);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:27:02.080

```
function ChangeStory(){

 $(".snapp_view_ask_question_textarea").focus().css("box-shadow", "rgba(139, 0, 0, 0.5) 0px 0px 30px 2px").addClass("textarea_transition");
 setTimeout(function(){$(".snapp_view_ask_question_textarea").css("box-shadow", "");}, 400);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:30:37.497

使用 jquery 的`delay`函数构建一些东西。

[你可以在这里](http://jsfiddle.net/Az9E2/9/)找到演示

# python - Numpy 数组操作太慢 np.asarray()

> ID：12263214
> 
> 赞同：2
> 
> 时间：2012-09-04T12:10:40.277
> 
> 标签：python, arrays, pointers, opencv, numpy

我正在使用 Numpy 和 OpenCV2.4.1，我的 IP 摄像机有一个 SDK，它通过回调函数返回图片缓冲区。简化后的功能如下：

```
def py_fDecodeCallBack(lPort, pBuffer, lSize, pFrameInfo, lReserved1, lReserved2):
    frameInfo = pFrameInfo.contents
    pBufY = np.asarray( pBuffer[:frameInfo.lHeight*frameInfo.lWidth],dtype=np.uint8).reshape(frameInfo.lHeight,frameInfo.lWidth, 1) 
```

$

pBuffer 是 POINTER(c_ubyte) 类型，因为我正在使用 ctypes。

我尝试获取 pBuffer 的 Y 通道，它是 YV12 格式，并将其放入 Numpy Array 中供 OpenCV 处理。

但是，np.asarray() 有一个很大的瓶颈，获取帧数据并放入 3D numpy 数组（高度、宽度、通道）需要很长时间。我已经测试过用于切出 Y 数据的 pBuffer 的指针访问操作不是瓶颈。此回调只能在具有 4GB 内存的双核计算机上以每秒 3 帧的速度运行。如果没有 np.asarray() 操作，回调可以以每秒 30 帧的速度运行。

请建议一种方法，以便将 pBuffer 数据放入一个 3D numpy 数组中，该数组足够快，可以每秒获得 30 帧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:28:51.727

如果您不需要复制数据（即您的回调将处理它然后丢弃它），您可以直接使用缓冲区构造数组：

```
array = (ctypes.c_ubyte * frameInfo.lHeight * frameInfo.lWidth * 1
          ).from_address(ctypes.addressof(pBuffer.contents))
pBufY = np.ndarray(buffer=array, dtype=np.uint8,
                   shape=(frameInfo.lHeight, frameInfo.lWidth, 1)) 
```

# javascript - Javascript 是否可以在 VPS/远程服务器上执行 Ruby 脚本？

> ID：12263216
> 
> 赞同：-1
> 
> 时间：2012-09-04T12:10:55.473
> 
> 标签：javascript, ruby, database, execute

是否可以创建一个在 VPS 上执行 Ruby 脚本的系统（根据在客户端浏览器中输入的内容），然后从 Ruby 脚本或数据库中检索数据？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:23:40.943

您可以使用 AJAX。如果你搜索，有一个关于[W3Schools](http://www.w3schools.com/ajax/)和其他地方的教程。这是一个例子：

```
<script type="text/javascript">

    function loadXMLDoc() {
        var xmlhttp;
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else {
            // code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.onreadystatechange=function() {
            if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                document.getElementById("exampleDiv").innerHTML=xmlhttp.responseText;
            }
        }

        xmlhttp.open("GET","http://example.com/",true);
        xmlhttp.send();
    }

</script> 
```

如果您使用 jQuery 或类似的库，代码会更简单，但这会起作用。在此示例和教程之间，我认为您将能够使其工作。您只需插入您的 URL 并将处理响应的行更改为您需要的任何内容。让我知道事情的后续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:23:56.463

如果我理解正确，您希望 JS 脚本调用并获取托管在远程服务器上的 ruby​​ 脚本的结果。

你可以用 AJAX 做到这一点。使用`XMLHttpRequest`jQuery 或更高级别的库（如 jQuery），您可以让 JS 脚本通过 HTTP 向 ruby​​ 脚本发送请求并取回结果。

例如，该脚本可以响应 JSON 格式的数据。

请参阅[http://en.wikipedia.org/wiki/XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)。

# java - H2 不保存价值，不抛出任何异常

> ID：12263222
> 
> 赞同：0
> 
> 时间：2012-09-04T12:11:14.770
> 
> 标签：java, database, spring, h2

我开始使用 h2 数据库。

我正在使用以下代码在数据库中保留一个值 -

```
public class MyDao extends NamedParameterJdbcDaoSupport {
  public void save() {
    System.out.println("Saving..");
    getNamedParameterJdbcTemplate().update(
        "insert into mytable values(:time)",
        new MapSqlParameterSource("time", new Date()));
    System.out.println("Saved..");
  }
} 
```

弹簧配置 -

```
<bean id="dataSource" class="org.h2.jdbcx.JdbcConnectionPool"
        destroy-method="dispose">
    <constructor-arg>
        <bean class="org.h2.jdbcx.JdbcDataSource">
            <property name="URL" value="jdbc:h2:tcp://localhost:8082/test/" />
            <property name="user" value="sa" />
            <property name="password" value="" />
        </bean>
    </constructor-arg>
</bean> 
```

代码打印`Saving..`然后从不打印`Saved..`。它在更新语句处冻结。

没有异常被抛出。为什么是这样？

编辑：

```
Full thread dump Java HotSpot(TM) Client VM (23.4-b01 mixed mode, sharing):

"Thread-5" prio=6 tid=0x03fd9c00 nid=0x1dcc runnable [0x0887f000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.io.BufferedInputStream.fill(Unknown Source)
        at java.io.BufferedInputStream.read(Unknown Source)
        - locked <0x23a9d4d0> (a java.io.BufferedInputStream)
        at java.io.DataInputStream.readInt(Unknown Source)
        at org.h2.value.Transfer.readInt(Transfer.java:151)
        at org.h2.engine.SessionRemote.done(SessionRemote.java:560)
        at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:111)
        at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:395)
        at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:287)
        at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:108)
        at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:92)
        at org.h2.Driver.connect(Driver.java:72)
        at org.h2.jdbcx.JdbcDataSource.getJdbcConnection(JdbcDataSource.java:181)
        at org.h2.jdbcx.JdbcDataSource.getXAConnection(JdbcDataSource.java:315)
        at org.h2.jdbcx.JdbcDataSource.getPooledConnection(JdbcDataSource.java:341)
        at org.h2.jdbcx.JdbcConnectionPool.getConnectionNow(JdbcConnectionPool.java:226)
        at org.h2.jdbcx.JdbcConnectionPool.getConnection(JdbcConnectionPool.java:199)
        - locked <0x23c127d8> (a org.h2.jdbcx.JdbcConnectionPool)
        at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
        at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77)
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:573)
        at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:812)
        at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:834)
        at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.update(NamedParameterJdbcTemplate.java:260)
        at com.kshitiz.data.db.MyDao.save(MyDao.java:14)
        at com.kshitiz.data.db.DatabaseDaemon.run(DatabaseDaemon.java:17)

   Locked ownable synchronizers:
        - None

"Thread-3" prio=6 tid=0x063e8000 nid=0x1be4 waiting on condition [0x075cf000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
        at java.lang.Thread.sleep(Native Method)
        at com.kshitiz.ReadDaemon.run(ReadDaemon.java:25)

   Locked ownable synchronizers:
        - None

"Prism Font Disposer" daemon prio=10 tid=0x03e2b000 nid=0x1918 in Object.wait() [0x072ff000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x28f10b98> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        - locked <0x28f10b98> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        at com.sun.t2k.Disposer.run(Disposer.java:71)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"Thread-2" daemon prio=6 tid=0x03ee3400 nid=0x10d0 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
        - None

"JavaFX Application Thread" prio=6 tid=0x03ede800 nid=0x1080 runnable [0x04b2f000]
   java.lang.Thread.State: RUNNABLE
        at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
        at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
        at com.sun.glass.ui.win.WinApplication$2$1.run(WinApplication.java:67)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"Disposer" daemon prio=10 tid=0x03eb2c00 nid=0x48c in Object.wait() [0x0416f000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x28d107b0> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        - locked <0x28d107b0> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        at com.sun.glass.utils.Disposer.run(Disposer.java:69)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"QuantumRenderer-0" daemon prio=6 tid=0x03eb2400 nid=0xee4 waiting on condition [0x040df000]
   java.lang.Thread.State: WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0x28d10848> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
        at java.util.concurrent.locks.LockSupport.park(Unknown Source)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
        at java.util.concurrent.LinkedBlockingQueue.take(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:98)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"JavaFX-Launcher" prio=6 tid=0x03e17c00 nid=0xb1c waiting on condition [0x03c8f000]
   java.lang.Thread.State: WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0x28d220b8> (a java.util.concurrent.CountDownLatch$Sync)
        at java.util.concurrent.locks.LockSupport.park(Unknown Source)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(Unknown Source)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(Unknown Source)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(Unknown Source)
        at java.util.concurrent.CountDownLatch.await(Unknown Source)
        at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:330)
        at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
        at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"Service Thread" daemon prio=6 tid=0x015f4000 nid=0x1ed4 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
        - None

"C1 CompilerThread0" daemon prio=10 tid=0x015ee400 nid=0x1df8 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
        - None

"Attach Listener" daemon prio=10 tid=0x015ed000 nid=0x950 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
        - None

"Signal Dispatcher" daemon prio=10 tid=0x015e3400 nid=0x1b38 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
        - None

"Finalizer" daemon prio=8 tid=0x015d7400 nid=0xb54 in Object.wait() [0x03a7f000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x28d10d58> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        - locked <0x28d10d58> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        at java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"Reference Handler" daemon prio=10 tid=0x015d2800 nid=0x1294 in Object.wait() [0x038cf000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x28d104e8> (a java.lang.ref.Reference$Lock)
        at java.lang.Object.wait(Object.java:503)
        at java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)
        - locked <0x28d104e8> (a java.lang.ref.Reference$Lock)

   Locked ownable synchronizers:
        - None

"main" prio=6 tid=0x016bc400 nid=0x1f40 waiting on condition [0x016af000]
   java.lang.Thread.State: WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0x28d10de0> (a java.util.concurrent.CountDownLatch$Sync)
        at java.util.concurrent.locks.LockSupport.park(Unknown Source)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(Unknown Source)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(Unknown Source)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(Unknown Source)
        at java.util.concurrent.CountDownLatch.await(Unknown Source)
        at com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:134)
        at com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:75)
        at javafx.application.Application.launch(Application.java:209)
        at com.kshitiz.ui.Main.main(Main.java:73)

   Locked ownable synchronizers:
        - None

"VM Thread" prio=10 tid=0x015d1400 nid=0x1f44 runnable

"VM Periodic Task Thread" prio=10 tid=0x01615c00 nid=0x1114 waiting on condition

JNI global references: 309 
```

服务器端线程转储 -

```
Full thread dump Java HotSpot(TM) Client VM (23.4-b01 mixed mode, sharing):

"H2 Console thread" prio=6 tid=0x05ea2000 nid=0x15d8 runnable [0x04baf000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.io.BufferedInputStream.fill(Unknown Source)
        at java.io.BufferedInputStream.read(Unknown Source)
        - locked <0x239da8c0> (a java.io.BufferedInputStream)
        at org.h2.server.web.WebThread.readHeaderLine(WebThread.java:212)
        at org.h2.server.web.WebThread.process(WebThread.java:114)
        at org.h2.server.web.WebThread.run(WebThread.java:93)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"H2 Console thread" prio=6 tid=0x05ea1400 nid=0x1f54 runnable [0x04eef000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.io.BufferedInputStream.fill(Unknown Source)
        at java.io.BufferedInputStream.read(Unknown Source)
        - locked <0x23c120b8> (a java.io.BufferedInputStream)
        at org.h2.server.web.WebThread.readHeaderLine(WebThread.java:212)
        at org.h2.server.web.WebThread.process(WebThread.java:114)
        at org.h2.server.web.WebThread.run(WebThread.java:93)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"H2 Console thread" prio=6 tid=0x05ea0c00 nid=0xd7c runnable [0x04e1f000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.io.BufferedInputStream.fill(Unknown Source)
        at java.io.BufferedInputStream.read(Unknown Source)
        - locked <0x23c141c8> (a java.io.BufferedInputStream)
        at org.h2.server.web.WebThread.readHeaderLine(WebThread.java:212)
        at org.h2.server.web.WebThread.process(WebThread.java:114)
        at org.h2.server.web.WebThread.run(WebThread.java:93)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"H2 Console thread" prio=6 tid=0x05ea0800 nid=0x15f0 runnable [0x04caf000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.io.BufferedInputStream.fill(Unknown Source)
        at java.io.BufferedInputStream.read(Unknown Source)
        - locked <0x28ffe380> (a java.io.BufferedInputStream)
        at org.h2.server.web.WebThread.readHeaderLine(WebThread.java:212)
        at org.h2.server.web.WebThread.process(WebThread.java:114)
        at org.h2.server.web.WebThread.run(WebThread.java:93)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"H2 Console thread" prio=6 tid=0x05ea0000 nid=0xe54 runnable [0x0468f000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.io.BufferedInputStream.fill(Unknown Source)
        at java.io.BufferedInputStream.read(Unknown Source)
        - locked <0x29000498> (a java.io.BufferedInputStream)
        at org.h2.server.web.WebThread.readHeaderLine(WebThread.java:212)
        at org.h2.server.web.WebThread.process(WebThread.java:114)
        at org.h2.server.web.WebThread.run(WebThread.java:93)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"H2 Console thread" prio=6 tid=0x05e9fc00 nid=0x328 runnable [0x03d0f000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.io.BufferedInputStream.fill(Unknown Source)
        at java.io.BufferedInputStream.read(Unknown Source)
        - locked <0x29009958> (a java.io.BufferedInputStream)
        at org.h2.server.web.WebThread.readHeaderLine(WebThread.java:212)
        at org.h2.server.web.WebThread.process(WebThread.java:114)
        at org.h2.server.web.WebThread.run(WebThread.java:93)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"H2 Log Writer TEST" daemon prio=6 tid=0x0409e800 nid=0x31c in Object.wait() [0x04d8f000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x29000688> (a org.h2.store.WriterThread)
        at org.h2.store.WriterThread.run(WriterThread.java:104)
        - locked <0x29000688> (a org.h2.store.WriterThread)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"H2 File Lock Watchdog C:/Users/kshitiz/test.lock.db" daemon prio=10 tid=0x03ed6400 nid=0x1154 waiting on condition [0x0498f000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
        at java.lang.Thread.sleep(Native Method)
        at org.h2.store.FileLock.run(FileLock.java:492)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"H2 TCP Server (tcp://192.168.1.145:9092) thread" prio=6 tid=0x03f08800 nid=0x1764 runnable [0x04bfe000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.io.BufferedInputStream.fill(Unknown Source)
        at java.io.BufferedInputStream.read(Unknown Source)
        - locked <0x29004920> (a java.io.BufferedInputStream)
        at java.io.DataInputStream.readInt(Unknown Source)
        at org.h2.value.Transfer.readInt(Transfer.java:151)
        at org.h2.server.TcpServerThread.process(TcpServerThread.java:246)
        at org.h2.server.TcpServerThread.run(TcpServerThread.java:149)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"H2 Console thread" prio=6 tid=0x04008400 nid=0x17c0 runnable [0x04b1f000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.io.BufferedInputStream.fill(Unknown Source)
        at java.io.BufferedInputStream.read(Unknown Source)
        - locked <0x28f309c0> (a java.io.BufferedInputStream)
        at org.h2.server.web.WebThread.readHeaderLine(WebThread.java:212)
        at org.h2.server.web.WebThread.process(WebThread.java:114)
        at org.h2.server.web.WebThread.run(WebThread.java:93)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"DestroyJavaVM" prio=6 tid=0x017eb800 nid=0x1b38 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
        - None

"H2 PG Server (pg://192.168.1.145:5435)" prio=6 tid=0x03fd3000 nid=0xb3c runnable [0x0629f000]
   java.lang.Thread.State: RUNNABLE
        at java.net.DualStackPlainSocketImpl.accept0(Native Method)
        at java.net.DualStackPlainSocketImpl.socketAccept(Unknown Source)
        at java.net.AbstractPlainSocketImpl.accept(Unknown Source)
        at java.net.PlainSocketImpl.accept(Unknown Source)
        - locked <0x28f30ba0> (a java.net.SocksSocketImpl)
        at java.net.ServerSocket.implAccept(Unknown Source)
        at java.net.ServerSocket.accept(Unknown Source)
        at org.h2.server.pg.PgServer.listen(PgServer.java:182)
        at org.h2.tools.Server.run(Server.java:544)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"H2 TCP Server (tcp://192.168.1.145:9092)" prio=6 tid=0x03fda000 nid=0xa10 runnable [0x04f9f000]
   java.lang.Thread.State: RUNNABLE
        at java.net.DualStackPlainSocketImpl.accept0(Native Method)
        at java.net.DualStackPlainSocketImpl.socketAccept(Unknown Source)
        at java.net.AbstractPlainSocketImpl.accept(Unknown Source)
        at java.net.PlainSocketImpl.accept(Unknown Source)
        - locked <0x28e03a88> (a java.net.SocksSocketImpl)
        at java.net.ServerSocket.implAccept(Unknown Source)
        at java.net.ServerSocket.accept(Unknown Source)
        at org.h2.server.TcpServer.listen(TcpServer.java:239)
        at org.h2.tools.Server.run(Server.java:544)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"AWT-EventQueue-0" prio=6 tid=0x03f30c00 nid=0x18a4 waiting on condition [0x04a6f000]
   java.lang.Thread.State: WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0x28e03c90> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
        at java.util.concurrent.locks.LockSupport.park(Unknown Source)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
        at java.awt.EventQueue.getNextEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"AWT-Windows" daemon prio=6 tid=0x03efa800 nid=0x1cd8 runnable [0x0471f000]
   java.lang.Thread.State: RUNNABLE
        at sun.awt.windows.WToolkit.eventLoop(Native Method)
        at sun.awt.windows.WToolkit.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"AWT-Shutdown" prio=6 tid=0x03f6a000 nid=0x1920 in Object.wait() [0x047af000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x28e03df8> (a java.lang.Object)
        at java.lang.Object.wait(Object.java:503)
        at sun.awt.AWTAutoShutdown.run(Unknown Source)
        - locked <0x28e03df8> (a java.lang.Object)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"Java2D Disposer" daemon prio=10 tid=0x03f3c000 nid=0x18bc in Object.wait() [0x045df000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x28e03e88> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        - locked <0x28e03e88> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        at sun.java2d.Disposer.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"H2 Console Server (http://192.168.1.145:8082)" prio=6 tid=0x03edd800 nid=0x1298 runnable [0x03b0f000]
   java.lang.Thread.State: RUNNABLE
        at java.net.DualStackPlainSocketImpl.accept0(Native Method)
        at java.net.DualStackPlainSocketImpl.socketAccept(Unknown Source)
        at java.net.AbstractPlainSocketImpl.accept(Unknown Source)
        at java.net.PlainSocketImpl.accept(Unknown Source)
        - locked <0x28e03f68> (a java.net.SocksSocketImpl)
        at java.net.ServerSocket.implAccept(Unknown Source)
        at java.net.ServerSocket.accept(Unknown Source)
        at org.h2.server.web.WebServer.listen(WebServer.java:341)
        at org.h2.tools.Server.run(Server.java:544)
        at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"Service Thread" daemon prio=6 tid=0x0199f000 nid=0x15ac runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
        - None

"C1 CompilerThread0" daemon prio=10 tid=0x0198ec00 nid=0x18d0 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
        - None

"Attach Listener" daemon prio=10 tid=0x0198d000 nid=0x103c waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
        - None

"Signal Dispatcher" daemon prio=10 tid=0x0198a000 nid=0x1efc runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
        - None

"Finalizer" daemon prio=8 tid=0x01973400 nid=0x1d0c in Object.wait() [0x03abf000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x28e04220> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        - locked <0x28e04220> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        at java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)

   Locked ownable synchronizers:
        - None

"Reference Handler" daemon prio=10 tid=0x01971c00 nid=0x1e30 in Object.wait() [0x0185f000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x28e03970> (a java.lang.ref.Reference$Lock)
        at java.lang.Object.wait(Object.java:503)
        at java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)
        - locked <0x28e03970> (a java.lang.ref.Reference$Lock)

   Locked ownable synchronizers:
        - None

"VM Thread" prio=10 tid=0x01970800 nid=0x15b0 runnable

"VM Periodic Task Thread" prio=10 tid=0x019a9c00 nid=0x19e8 waiting on condition

JNI global references: 604 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:29:22.657

问题出在 jdbc url 中，它应该包含`localhost:9092`而不是`localhost:8082`.

从上面的评论中引用托马斯·穆勒的话——

> Web 服务器的默认端口是 8082，但那是错误的服务器。您不想连接到 Web 服务器，而是想连接到 TCP 服务器。那里的默认端口是 9092。

# gruntjs - 如何在 grunt cssmin 任务中使用多个 src 和 dest？

> ID：12263223
> 
> 赞同：9
> 
> 时间：2012-09-04T12:11:17.527
> 
> 标签：gruntjs

我正在尝试在两个文件上使用 grunt cssmin：style.css 和 ie.css（不连接它们）。

目前我的 grunt.js 中有这个：

```
cssmin: {
  dist: {
    src: ['<banner:meta.wpblock>', '../style.css'],
    dest: '../style.css'
  }
}, 
```

是否可以指定多个 src（../style.css 和 ../ie.css）和多个 dest（../style.css 和 ../ie.css）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T21:29:33.157

Currently no, although when grunt 0.4 is released and the task is updated accordingly, you'll be able to do:

```
cssmin: {
  dist: {
    files: {
        '../style.css': ['<banner:meta.wpblock>', '../style.css'],
        '../style.css': ['<banner:meta.wpblock>', '../style.css']
    }
  }
}, 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T22:17:18.647

我认为您可以使用 grunt 的[紧凑格式](https://github.com/gruntjs/grunt/blob/master/docs/api.md#thisfile--grunttaskcurrentfile)来执行此操作。

例如：

```
cssmin: {
    'production/css/style.css': ['<banner:meta.wpblock>', 'css/style.css'],
    'production/css/ie.css': ['<banner:meta.wpblock>', 'css/ie.css']
}, 
```

# javascript - android phonegap jquery点击动态列表中的元素

> ID：12263226
> 
> 赞同：2
> 
> 时间：2012-09-04T12:11:25.530
> 
> 标签：javascript, android, jquery, cordova, html-lists

我正在尝试实现单击以触发列表元素上的功能。该列表在运行时填充。我正在使用 jQuery 1.8.0 和 PhoneGap 2.0。

```
 $(".myList").on("click", "li", function(event) {
       $(this).effect("highlight", {}, 150).queue(function() {
          someFunc((this).attr("id"));
       });
    }); 
```

在使用 PhoneGap 在 Android 上对其进行测试时，使用被点击的 li 元素的 id 的正确参数触发该功能，但整个列表获得蓝色点击效果（除了点击的 li 元素的 jquery 效果）。在firefox中测试时，整个列表没有蓝色点击效果，只有jquery高亮效果。有谁知道为什么设备上有差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:42:55.997

所有列表都有蓝色点击效果；因为您将`click`事件绑定到整个列表，然后委托给`li`元素。Android 浏览器将点击区域突出显示为默认行为。但是，您可以通过 CSS 覆盖它 -`webkit-tap-highlight-color`像这样的属性：

```
.myList {
  webkit-tap-highlight-color: rgba(0,0,0,0); 
} 
```

# android - Android 应用程序激活和停用触发器

> ID：12263227
> 
> 赞同：1
> 
> 时间：2012-09-04T12:11:29.427
> 
> 标签：android, lifecycle

我正在寻找一种在 Android 上知道我的应用程序何时处于活动状态（正在运行、可查看）和停用的方法。我知道我可以使用 onStart 方法，但有一个问题：如果我切换到另一个活动，我不希望应用程序认为“我已停用，嘿，再次激活！” 甚至短期内也没有。

为什么我要这样做：当应用程序处于活动状态时，我需要订阅服务器，而当用户转到另一个应用程序时，我需要取消订阅，这可能发生在应用程序的每个活动中。因此，当用户切换到我的应用程序的另一个活动时，该应用程序必须保持订阅服务器。

是否有某种广播我可以像 wifi 状态一样捕捉？还是我真的必须在每个活动中加入一些逻辑（超类并不总是可能的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:17:55.107

创建一个扩展应用程序的类并监视那里的状态。

# algorithm - 估计图中的流量

> ID：12263228
> 
> 赞同：6
> 
> 时间：2012-09-04T12:11:46.900
> 
> 标签：algorithm, graph, flow

给定无向图，所有边的权重为 1；N, M 约为 10^6 我需要找出源和汇之间的流量是否大于某个值 X。X 非常小。

使用 bfs 直到流量等于 X 给出 O(M*X) 这对我来说太慢了。

有没有更快的方法来估算流量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:40:06.217

你需要的基本上是maxflow，见[http://en.wikipedia.org/wiki/Maximum_flow_problem](http://en.wikipedia.org/wiki/Maximum_flow_problem)

并且建议使用[Dinic 算法](http://en.wikipedia.org/wiki/Dinic%27s_algorithm)以提高实用效率。

如果您需要一些示例，您可以参考我的代码之一，位于[http://wiki.attiix.com/index.php?title=Maxflow](http://wiki.attiix.com/index.php?title=Maxflow)

# c# - 两个相似的代码，一个工作，一个随机超时。为什么？

> ID：12263229
> 
> 赞同：1
> 
> 时间：2012-09-04T12:11:50.730
> 
> 标签：c#, wcf, asynchronous, timeout

这是关于两个示例的基本代码：

```
private void AsyncTest()
{   
    //GetServiceObject Will add custom bindings and more..
    Client client = ClientBuilder.GetServiceObject();

    while (true)
    {
         Semaphore semaphore = new Semaphore(0,1);
         client.BeginTest(BeginTestCallback, new AsyncState
         {
             Client = client,
             Semaphore = semaphore
         });

         semaphore.WaitOne();   
    }   
}

private void BeginTestCallback(IAsyncResult asyncResult)
{
    try
    {
        AsyncState state = asyncResult.AsyncState as AsyncState;

        Client client = state.Client;
        Semaphore semaphore = state.Semaphore;

        Client.EndTest(asyncResult);    

        semaphore.Release();
    }
    catch (Exception e)
    {
        //Will catch the exception here because of Client.EndTest(asyncResult) in the first example
        Debug.Assert(false, e.Message);
    }
} 
```

我们知道回调是在 .net 线程池的线程中调用的。

如果我这样调用 AsyncTest() ：

```
Task.Factory.StartNew(() => AsyncTest()); 
```

这意味着 AsyncTest 将在 .net 线程池的线程中运行。在这种情况下，一切都会按预期工作，无一例外。

但是，如果我以这种方式启动线程：

```
ThreadStart ts = new ThreadStart(() => AsyncTest());
Thread t = new Thread(ts);
t.Start(); 
```

即使我把它放在 10 分钟，它也会在“SendTimeout”上执行随机 TimeoutException。当我检查wireshark时，它会随机从我什至没有看到Syn到我们只发送soap标头并关闭连接（仅在超时时）。

请注意，我正在运行 10 个线程，每秒执行 30 个请求。第二个示例可能需要一分钟才能失败。

为什么？

# unix - 来自 unix ksh 脚本的分段错误

> ID：12263230
> 
> 赞同：0
> 
> 时间：2012-09-04T12:11:54.597
> 
> 标签：unix, ksh

在刚刚安装了 IBM Infosphere 版本 8 的新 unix 服务器上运行 ksh 脚本时，我遇到了 SIGSEGV 错误。当 unix 脚本更新配置文件中的提取日期时间时，我收到错误消息。该脚本由 Datastage 序列调用。

脚本因以下问题中止：“程序“/bin/sh”终止。[SIGSEGV] 分段违规”。

对该问题的网络搜索表明该问题是由对内存的无效引用引起的。

下面提到的是执行脚本的命令。

```
"ksh shUpdate_Config.sh MEARS MSDS_MP_ATTRIBUTES_BS_VW /data/projects/scver_etl/EXTRACTS_pub/configurationfiles/MEARS.MSDS_MP_ATTRIBUTES_BS_VW.Lastupdseqno.dat /data/projects/scver_etl/EXTRACTS_pub/configurationfiles/ '2012-08-08 12:35:24'" 
```

这是脚本的内容 -

```
 #!/bin/ksh
    #########################################################################
    #Script Name:-shUpdate_Config.sh
    #
    #Script Description:- The script updates the STATUS_TABLE with the Extraction Date time and updates the sequence number by 1.
    #
    #Created By:- Vineet
    #
    #Job History:-
    #
    #Sl No          Version           Modification Date         Modified by                Modification Desc
    #01\.            Initial               11/04/2012                   Vineet                    Initial Version
        #########################################################################################################################################

if [ $# -ne 5 ]
then
    print "Incorrect number of parameters passed, Quiting ..."
    exit 1
fi
# Enter the Source Id From the user
srcid=$1
# Enter the source table name by user
tabnme=$2
# Enter the Status File Name from User
filename=$3
#Enter the Temp file Path from User
file_path=$4
#Enter the Server time to be updated
Server_datetime=$5
if [ ! -f $filename ]
then
    print "Configuration File not present at the required path, Quiting ..."
    exit 1
fi

grep $srcid $filename >> /dev/null

if [ $? -ne 0 ]
then

    print "Source system name not found in configuration file, Quiting ..."
    exit 1
fi

grep $tabnme $filename >> /dev/null

if [ $? -ne 0 ]
then

    print "Source view name not found in configuration file, Quiting ..."
    exit 1
fi

while [ 1 ]
do
    if [ -f $filename.lock ]
   then
            sleep 60
    else
            break
    fi
done
touch $filename.lock

DT=`echo $Server_datetime|cut -c1-10`
TM=`echo $Server_datetime|cut -c12-19`

awk '{FS="|";OFS="|"};{a=$3;b=$4;if ($1=="'$srcid'"&& $2=="'$tabnme'") {$3=a+1;$4="'$DT'"" ""'$TM'"} else{}{print $0}}' $filename > $file_path$srcid.$tabnme.tmp

if [ $? -ne 0 ]

then
    print "Process failed, Quiting ..."
    /bin/rm $filename.lock
    exit 1
fi

#fi
mv  $file_path$srcid.$tabnme.tmp $filename

if [ $? -ne 0 ]

then
    print "Process failed, Quiting ..."
    /bin/rm $filename.lock
    exit 1
fi

/bin/rm $filename.lock

if [ $? -ne 0 ]

then
    print "Process failed, Quiting ..."
    exit 1    
fi
exit 0 
```

这是我们正在尝试更新的文件（MEARS MSDS_MP_EVENTS_BS_VW Lastupdseqno）的内容 -

```
Source_sys_name|Source_tbl_name|Seq_No|Extraction_date|Extraction_Mode
MEARS|MSDS_MP_EVENTS_BS_VW|37|2012-08-08 11:51:19|D 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:08:17.030

> 该脚本由 Datastage 序列调用。脚本因以下问题而中止：
> 
> ```
> "Program "/bin/sh" terminated. [SIGSEGV] segmentation violation". 
> ```

从上面，我了解到该脚本是从您的调用字符串定义的不同程序中调用的：`"ksh shUpdate_Config.sh ... "`

其工作方式是，您定义的任何外部命令（称为*Datastage 序列*）都由 unix`system(string)`库调用执行。这反过来又调用：

```
/bin/sh -c <string> 
```

显然，该调用有问题，因为它不是`ksh`崩溃，而是`/bin/sh`.

首先要检查的是命令行`"ksh shUpdate_Config.sh ..."` 对于初学者，您的定义是否实际上*包含*双引号`"`，或者您是否为本示例添加了这些？

# web-services - Monotouch：WSDL 和 WebService 参数

> ID：12263232
> 
> 赞同：2
> 
> 时间：2012-09-04T12:11:58.600
> 
> 标签：web-services, xamarin.ios, wsdl, monodevelop

我正在使用 Monotouch 开发 iPhone 应用程序并使用 ASMX 网络服务。WebReference 已正确添加（感谢 .wsdl 文件），我开始使用我的 WS 参考：

```
public static string CallWs(string[] arrData_, 
                                        List<string[]> lstObject_)
{
    WebService webService = new Service ();
    webService.CallMethod(arrData_, lstObject_);
} 
```

我的网络服务有一个正确的方法`public void CallMethod(string[] arrData_, List<string[]> lstObject_)`，.wsdl 文件正确地描述了它（`ArrayOfArrayOfString`）但 MonoTouch 认为它像`public void CallMethod(string[] arrData_, string lstObject_)`。

所以，我试图将我的方法修改为`string[][]`：**同样的问题**

我尝试使用 NewtonSoft.Json DLL 来解析我的数据，但这需要 System.Drawing 隐式（Monotouch 不存在，CoreGraphics 替换它），因此可以找到并解决它。

**编辑 ：**

当前的解决方案是编辑参考文件并更改参数类型。

还有其他解决方案吗？为什么 MonoDevelop 不能正确识别我的网络服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:30:53.837

`IList<string>`尚不完全支持诸如此类的集合类型。

这里有两个主要问题：

*   从 WSDL 创建客户端代理。

    您可以通过`SLSvcUtil.exe`在 Windows 上使用来解决此问题。

*   消息序列化

    这是更严重的问题，因为它会阻止您与远程服务交谈。

上周我已经实现了一些缺失的部分，但还没有完成。字典类型仍然缺失，我还需要对数组和更复杂的类型（例如数组数组）进行更多测试。

另一个问题更美观：两者之间没有区别

```
 [OperationContract]
    IList<int> GetSimpleList(); 
```

和

```
 [OperationContract]
    int[] GetArray(); 
```

在 WSDL 中（两者都是`ArrayOfint`）。Visual Studio 允许您配置应在生成的客户端代理中使用的集合类型（右键单击您的服务引用，选择“配置服务引用”，该对话框中间有“集合类型”）。

MonoDevelop 还不支持它并使用数组（或者更好：它*应该*使用数组；目前，它只是崩溃。我会看看那个）。

# xtext - 如何检索规则在 Xtext 中没有直接访问权限的节点？

> ID：12263234
> 
> 赞同：1
> 
> 时间：2012-09-04T12:12:00.333
> 
> 标签：xtext

这是示例规则（只需将其替换为 MyDsl 语法）：

```
Start:
    elem += (integer)*
;   

int_rule:
    'int' (name += integer ('=' values += INT)?) (',' name+=integer ('=' values += INT)?)* ';'
;

/* I have to put the rule name as "integer", so when users hover
 * on variable names, they see exactly type "integer". This is a bit
 * adhoc, but it's acceptable for the time being. However, using this method
 * If some other rules refer to "integer", it can only either retrieve the name
 * in this "integer" rule or its
 */
integer:
    name = ID
;

/*
 * Example: assignment like num1 = 2, num2 = 3.... the variable name of type
 * integer can't be referred, since I have to either refer to "int_rule" rule to
 * retrieve its value or "integer" to retrieve its name. I can't get both.
 */
assignment:
    name = [integer] // or name = [int_rule]
; 
```

我在评论中解释了。基本上，整数规则由两个规则组成：`int_rule`并且`integer`我想在规则中使用这两个`assignment`规则。但是，Xtext 只能让我引用一个规则，并且该`name`功能只能引用规则的一个名称实例，而不能像示例中那样在同一规则中引用多个名称实例。我真的需要这两个规则中的两个信息，但我只能参考其中一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:29:54.760

I would suggest a different design for your problem: define the terms variable, reference and value in your grammar. A variable is only a definition - a place where you can present the available type information. Where you want to use this variable, you have to use a variable reference - when evaluating the code described in your language, you have to find what variable it refers to - Xtext helps this by connecting your reference on the EMF level. Finally, values can be constants and variable references - use them accordingly in your grammar.

As an example, look something as follows (it is not tested in Xtext, so minor error might be present):

```
Variable:
  (type = 'int')? //Optional type definition - you could use any type here
  name = ID
  ('=' initialValue = Value)? //Optional initial declaration;

Value:
  Integer | VariableReference;

Integer:
  value = int;

VariableReference:
  referredVariable = [Variable];

Assignment:
  'let' lhs = [VariableReference] '=' rhs = [Value]; 
```

I hope, this is helpful this way - or if I have misunderstood your problem, please clarify, and I will try to update my answer.

# c# - LogParser 访问被拒绝错误

> ID：12263235
> 
> 赞同：3
> 
> 时间：2012-09-04T12:12:01.723
> 
> 标签：c#, asp.net, iis, logging, logparser

我使用 Logparser 解析 IIS 日志并在网页上显示信息。在我的开发环境中一切正常，但是一旦我将应用程序发布到服务器，我就会收到以下错误：

> 由于以下错误，检索具有 CLSID {8CFEBA94-3FC2-45CA-B9A5-9EDACF704F66} 的组件的 COM 类工厂失败：80070005 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.UnauthorizedAccessException：检索具有 CLSID {8CFEBA94-3FC2-45CA-B9A5-9EDACF704F66} 的组件的 COM 类工厂失败，原因是以下错误：80070005 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）。

这个错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T18:44:55.853

IIS 7+ 可能未配置为运行 32 位应用程序。从您的应用程序池中，导航到高级设置，然后启用 32 位应用程序。

我遇到了您描述的相同问题，我为解决它所采取的步骤包括：

*   在应用程序池下启用 32 位应用程序
*   从日志文件夹 (inetpub/logs/LogFiles/{site}，授予对应用程序池身份的访问权限
*   将 LogParser.dll 和 Interop.MSUtil.dll 复制到站点的 bin 文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T22:21:12.067

我用来解决问题的步骤如下：

1.  转到 IIS 管理器
2.  导航到有问题的网站
3.  为您的默认网站启用 ASP.NET 身份验证

这应该可以解决权限问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:42:31.150

由于缺少权限，出现此错误。您需要为虚拟目录中的 IIS 用户/访客授予读/写权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:31:48.993

您可能需要授予在服务器 DCOM 上运行它的用户运行它的权限。DCOM 配置位于组件服务中，您可以看到每个条目的 GUID，因此您应该能够识别相关条目。

然后为其编辑安全权限，并赋予相关用户启动和激活权限以及访问权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-13T01:47:01.927

为站点创建专用应用程序池并将其标识切换为“网络服务”。为我解决了这个问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-30T18:23:39.987

我不得不尝试三件事：

1-查看LogParser.dll是否注册到regsvr32.exe；
2-将应用程序池的权限更改为网络服务；
3- 在应用程序池上接受 32 位应用程序；

# mongodb - 如何在 Ubuntu 上安装 MongoDb 并在安装时设置配置

> ID：12263244
> 
> 赞同：3
> 
> 时间：2012-09-04T12:12:25.883
> 
> 标签：mongodb, ubuntu

我正在为云服务器创建一个自动化部署，我需要在一个脚本中安装、配置和运行 Mongodb。当部署服务器从 git 中提取我的脚本时，我将无法访问服务器。

我的问题是我需要将 logpath 和 dbpath 设置到另一个位置。我如何使用 apt-get 来做到这一点。我目前使用的内容如下，但它将路径设置为默认位置。

```
apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10
echo "deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen" | tee -a /etc/apt/sources.list.d/10gen.list
apt-get -y update
apt-get -y install mongodb-10gen 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T12:50:51.553

要轻松做到这一点，请先自己编写 mongodb.conf（使用 sudo，将其创建为 /etc/mongodb.conf，权限为 644 和 root:root） - 使用现有模板作为模板或[从 git](https://github.com/mongodb/mongo/blob/master/debian/mongodb.conf)获取并更改dbpath 和 logpath 适当。

也很容易 - 只需删除那些默认文件夹并创建符号链接以指向您想要的安装路径 - 根本不需要修改文件。

如果由于某种原因您不想这样做，并且想要在安装后进行，那么您将不得不停止使用配置的文件启动服务，这样它就不会启动，预分配文件等。有几个选项可以做到这一点，[这里](http://ubuntuforums.org/showthread.php?t=856815)已经详细介绍了这些选项。

如那里所述，您的选择是暂时阻止所有新服务启动或使用 apt-get 进行仅下载获取并操作文件以在安装之前不自动启动 mongod，或者更改软件包以在之前操作配置文件开始。

或者，最后，您可以正常安装并让它启动，然后停止 mongod 服务（`service mongod stop`），删除在配置路径中创建的文件，然后使用新值更改 mongodb.conf（或用您自己的值覆盖)，重启服务。

# ajax - 从 Bean 打开链接

> ID：12263245
> 
> 赞同：-1
> 
> 时间：2012-09-04T12:12:34.907
> 
> 标签：ajax, jsf, user-interface, primefaces

如何从 bean 打开链接？我将打开类似 www.google.de 的内容。它应该会打开目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:30:08.343

您无法从 bean 打开链接。链接需要最终用户交互。

而是直接告诉浏览器在给定的 URL 上发送一个新的 GET 请求。你可以用[`ExternalContext#redirect()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#redirect%28java.lang.String%29)这个。

```
public void action() throws IOException {
    FacesContext.getCurrentInstance().getExternalContext().redirect("http://www.google.de");
} 
```

* * *

但是，如果这是 bean 的唯一动作，这将毫无意义。而是使用`<h:outputLink>`或只是`<a>`代替`<h:commandLink action="#{bean.action}">`或其他东西。

```
<h:outputLink value="http://www.google.de">link</h:outputLink>
<a href="http://www.google.de">link</a> 
```

# python - 当模块需要在导入前设置时使用 sphinx 记录 sqlalchemy 类

> ID：12263247
> 
> 赞同：2
> 
> 时间：2012-09-04T12:12:40.853
> 
> 标签：python, sqlalchemy, python-sphinx

我想记录一组 sqlalchemy 数据库类。我在编写这些类时遵循了这种类型的逻辑。在分贝。**init** .py，我有一个 init_model() 函数，它建立一个数据库连接并将其绑定到 declarative_base。然后我在我的 db.objects.py 中导入该 declarative_base 并使用它从数据库实例中自动加载表。不幸的是，当我尝试对 db.objects 进行自动文档化时，sphinx 尝试导入 db.objects 并找到未绑定的元数据，因为没有首先调用 init_model。关于在这里做什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:24:37.773

Michael Bayer 很好地提供了这个潜在的解决方案：

[https://groups.google.com/d/topic/sqlalchemy/lLR233kwHFw/discussion](https://groups.google.com/d/topic/sqlalchemy/lLR233kwHFw/discussion)

# sql - SQL 帮助：如何从需要求和的多个表中产生数据输出并找出 MAX 日期？

> ID：12263254
> 
> 赞同：0
> 
> 时间：2012-09-04T12:12:57.703
> 
> 标签：sql, ms-access, ms-access-2007

为了生成“生产报告”，我需要将许多表连接在一起，并找出每批生产的产品线数量的总和，以及每条生产线生产的最新活动是什么。

我可以在单独的 SQL 查询中汇总数据并找出 MAX 活动，但是当我加入它们时，查询显示错误。所以你能帮帮我吗？非常感谢。

我的表格如下：

```
tbl_pdtn_startup
pdtn_st_id | pd_id | pdtn_st_date
   3       |  001  |  3/9/12
   4       |  002  |  4/9/12

tbl_pdtn_sizecolor
pdtn_szcl_id | pdtn_st_id | pdtn_st_color | pdtn_st_size | pdtn_st_qty_est
    23       |    3       |   Blue        |    S         |    100
    26       |    3       |   Pink        |    S         |    100
    27       |    3       |   Green       |    S         |    100
    28       |    4       |   Blue        |    M         |    200
    30       |    4       |   Green       |    M         |    200

tbl_production
pdtn_id | pdtn_szcl_id | pdtn_st_id | pdtn_date | pd_making_id | lb_id
  24    |     23       |    3       |   4/9/12  |    1         |  12
  26    |     23       |    3       |   5/9/12  |    2         |  12
  27    |     26       |    3       |   4/9/12  |    1         |  15
  28    |     27       |    3       |   5/9/12  |    1         |  15 <--MAX(pdtn_date)
  29    |     28       |    4       |   4/9/12  |    4         |  15
  30    |     30       |    4       |   6/9/12  |    5         |  12 <--MAX(pdtn_date)

tbl_product
  pd_id | Name
   001  | product A
   002  | product B

tbl_pdWk_process
 pd_making_id | wk_stage | pd_id | cost
     1        | step 1   |  001  |  12
     2        | step 2   |  001  |  15
     3        | step 1   |  003  |  12
     4        | step 1   |  002  |  18
     5        | step 2   |  002  |  10

tbl_labor
lb_id | lb_name
 12   | john
 15   | Mary 
```

我需要如下所示的输出：

```
pd_id | pd_name  | pdtn_st_date | sum(pdtn_st_qty_est)*|MAX(pdtn_date)**| wk_stage | lb_name
 001  | product A|   3/9/12     |   300                |   5/9/12       |  step 1  |  Mary
 002  | product B|   4/9/12     |   400                |   6/9/12       |  step 2  | John 
```

注意
* Sum(pdtn_st_qty_est) 来自同一 pdtn_st_id (production_startup_id) 中所有 pdtn_st_qty_est 的总和（例如：- 蓝色=100，粉红色=100，绿色=100，pdtn_st_id = 3）

** MAX(pdtn_date) 来自最新工人为每个产品批次所做的活动（例如：- 5/9/12 来自 pdtn_st_id = 3 ）

以下是我尝试将 3 个电源表连接在一起但失败的尝试。

```
SELECT U.pd_id,  A.SumOfpdtn_st_qty_est, S.MaxOfpdtn_date
FROM (tbl_pdtn_startup AS U INNER JOIN 
    [SELECT  Sum(tbl_pdtn_sizecolor.pdtn_st_qty_est) AS SumOfpdtn_st_qty_est FROM tbl_pdtn_sizecolor GROUP BY tbl_pdtn_sizecolor.pdtn_st_id]. AS A ON U.pdtn_st_id = A.pdtn_st_id) 
         INNER JOIN 
        [SELECT Max(tbl_production.pdtn_date) AS MaxOfpdtn_date FROM tbl_production GROUP BY tbl_production.pdtn_st_id]. AS S ON (A.pdtn_szcl_id = S.pdtn_szcl_id) AND (U.pdtn_st_id = S.pdtn_st_id) 
```

**我的下一次尝试：**
我想出了进行单独查询并将它们连接在一起的想法，它可以产生我想要的部分数据。现在只有 2 个数据我无法正确检索。分别是 lb_name 和 wk_stage。那么任何人都可以帮助我。非常感谢。

q_maxdate

```
SELECT tbl_pdtn_startup.pdtn_st_id, tbl_pdtn_startup.pd_id, Max(tbl_production.pdtn_date) AS MaxOfpdtn_date, tbl_product.pd_name, tbl_pdtn_startup.pdtn_st_pdNote, tbl_pdtn_startup.pdtn_st_date
FROM (((tbl_pdtn_startup INNER JOIN tbl_pdtn_sizecolor ON tbl_pdtn_startup.pdtn_st_id=tbl_pdtn_sizecolor.pdtn_st_id) INNER JOIN tbl_production ON tbl_pdtn_sizecolor.pdtn_szcl_id=tbl_production.pdtn_szcl_id) INNER JOIN tbl_product ON tbl_pdtn_startup.pd_id=tbl_product.pd_id) INNER JOIN tbl_pdWk_process ON (tbl_production.pd_making_id=tbl_pdWk_process.pd_making_id) AND (tbl_product.pd_id=tbl_pdWk_process.pd_id)
GROUP BY tbl_pdtn_startup.pdtn_st_id, tbl_pdtn_startup.pd_id, tbl_product.pd_name, tbl_pdtn_startup.pdtn_st_pdNote, tbl_pdtn_startup.pdtn_st_date; 
```

然后我在这个查询中加入了它......

```
SELECT q_maxdate.pdtn_st_id, Sum(tbl_pdtn_sizecolor.pdtn_st_qty_est) AS SumOfpdtn_st_qty_est, q_maxdate.MaxOfpdtn_date, q_maxdate.pd_name, q_maxdate.pdtn_st_pdNote, q_maxdate.pd_id, q_maxdate.pdtn_st_date
FROM q_maxdate INNER JOIN tbl_pdtn_sizecolor ON q_maxdate.pdtn_st_id = tbl_pdtn_sizecolor.pdtn_st_id
GROUP BY q_maxdate.pdtn_st_id, q_maxdate.MaxOfpdtn_date, q_maxdate.pd_name, q_maxdate.pdtn_st_pdNote, q_maxdate.pd_id, q_maxdate.pdtn_st_date; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:19:25.627

这是示例 SQL。您的劳工姓名似乎与您的样本数据不匹配。

```
SELECT tbl_pdtn_startup.pd_id,
       tbl_product.name,
       tbl_pdtn_startup.pdtn_st_date,
       tbl_pdwk_process.wk_stage,
       tbl_labor.lb_name,
       SUM(tbl_pdtn_sizecolor.pdtn_st_qty_est) AS SumOfpdtn_st_qty_est,
       Max(tbl_production.pdtn_date)           AS MaxOfpdtn_date
FROM   (((tbl_production
          INNER JOIN tbl_labor
                  ON tbl_production.lb_id = tbl_labor.lb_id)
         INNER JOIN (tbl_pdtn_sizecolor
                     INNER JOIN tbl_pdtn_startup
                             ON tbl_pdtn_sizecolor.pdtn_st_id =
                                tbl_pdtn_startup.pdtn_st_id)
                 ON tbl_production.pdtn_szcl_id =
                    tbl_pdtn_sizecolor.pdtn_szcl_id)
        INNER JOIN tbl_pdwk_process
                ON tbl_production.pd_making_id = tbl_pdwk_process.pd_making_id)
       INNER JOIN tbl_product
               ON tbl_pdtn_startup.pd_id = tbl_product.pd_id
GROUP  BY tbl_pdtn_startup.pd_id,
          tbl_product.name,
          tbl_pdtn_startup.pdtn_st_date,
          tbl_pdwk_process.wk_stage,
          tbl_labor.lb_name; 
```

# wpf - 应用程序显示 mainpage.xaml 的多个实例

> ID：12263259
> 
> 赞同：0
> 
> 时间：2012-09-04T12:13:08.640
> 
> 标签：wpf

> **可能重复：**
> [MainWindow 构造函数被调用两次](https://stackoverflow.com/questions/12102336/mainwindow-constructor-getting-called-twice)

我正在按照以下链接按照**MVVM 模式**开发 WPF 应用程序。 [http://msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

我从示例中复制了一些文件（即视图模型库、Relaycommang 等） 该应用程序工作正常，但在启动时它显示了两个 Mainwindow.xaml 实例。

我尝试了很多解决但无法追踪。

```
 public partial class App : Application
{
    static App()
    {
        // This code is used to test the app when using other cultures.
        //
        //System.Threading.Thread.CurrentThread.CurrentCulture =
        //    System.Threading.Thread.CurrentThread.CurrentUICulture =
        //        new System.Globalization.CultureInfo("it-IT");

        // Ensure the current culture passed into bindings is the OS culture.
        // By default, WPF uses en-US as the culture, regardless of the system settings.
        //
        FrameworkElement.LanguageProperty.OverrideMetadata(
          typeof(FrameworkElement),
          new FrameworkPropertyMetadata(XmlLanguage.GetLanguage(CultureInfo.CurrentCulture.IetfLanguageTag)));
    }

    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        MainWindow window = new MainWindow();

        // Create the ViewModel to which 
        // the main window binds.
        string path = "Data/customers.xml";
        var viewModel = new MainWindowViewModel(path);

        // When the ViewModel asks to be closed, 
        // close the window.
        EventHandler handler = null;
        handler = delegate
        {
            viewModel.RequestClose -= handler;
            window.Close();
        };
        viewModel.RequestClose += handler;

        // Allow all controls in the window to 
        // bind to the ViewModel by setting the 
        // DataContext, which propagates down 
        // the element tree.
        window.DataContext = viewModel;

        window.Show();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:20:32.443

检查您的 App.xaml 文件。您的视图可以在那里实例化，也可以在代码中实例化。否则很难在没有更多信息的情况下说出问题所在。

# php - 数据库：检查重复错误

> ID：12263260
> 
> 赞同：0
> 
> 时间：2012-09-04T12:13:10.160
> 
> 标签：php, mysql, database, duplicates

我在数据库中有一个 PHP 代码和一个字段，这是一个唯一字段。如果人们填写表格并且`$_POST['name']`已经在数据库中，则会出现错误。

这就是我所拥有和想要的，但现在我想检查是否有错误，以便我可以在`if`/`else`语句中处理它。

**这是我的代码：**

```
$db = new database();
$sql = "INSERT INTO product_groepen (name) VALUES (".$_POST['name'].")";
$result = $db->executeQuery($sql);
if ($result)
{
    $db->executeQuery($sql);
    $page .= 'Yes';
} else {
    $page .= 'No';
} 
```

**错误：**

> 警告：PDO::query() [pdo.query]: SQLSTATE[23000]: 完整性约束违规： 1062 第 26 行 /classes/database.class.php 中键 2 的重复条目 's'

它可以工作，当它不工作时，它会说“不”，但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:17:02.433

`INSERT IGNORE`如果它是重复的，请尝试忽略插入。此外，如果您仍在使用`mysql_*`，则存在`mysql`注入漏洞，请避开它​​：

```
$db = new database();
$sql = "INSERT IGNORE INTO product_groepen (name) VALUES ('".mysql_real_escape_string($_POST['name'])."')";
$result = $db->executeQuery($sql);
$affected = mysql_affected_rows($result); // you must have that function something like $db->affectedRows ?
if ($affected){
    $page .= 'Yes';
} else {
    $page .= 'No';
} 
```

and make sure you don't execute the query twice

# php - 使用关联实体字段设置 slug

> ID：12263262
> 
> 赞同：3
> 
> 时间：2012-09-04T12:13:25.573
> 
> 标签：php, symfony, doctrine-orm

我正在使用`DoctrineExtensions`为我的实体获取 sluggable 行为。我的实体之一我想将相关地址实体的城市字段用于蛞蝓。但是，我不知道如何访问它：

```
/**
 * @var Foo\SiteBundle\Entity\Address
 *
 * @ORM\ManyToOne(targetEntity="Foo\SiteBundle\Entity\Address", cascade={"persist"})
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="address_id", referencedColumnName="id")
 * })
 */
private $address;

/**
 * @Gedmo\Slug(fields={"address->city", "name"})
 * @ORM\Column(length=128, unique=true)
 */
private $slug; 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:31:38.633

你可以执行它：[https ://github.com/l3pp4rd/DoctrineExtensions/issues/86](https://github.com/l3pp4rd/DoctrineExtensions/issues/86)

但在这里[https://github.com/l3pp4rd/DoctrineExtensions](https://github.com/l3pp4rd/DoctrineExtensions)：

> 2012-02-26
> 
> 删除了 slug 处理程序，此功能带来了无法维护的复杂性。

不幸的是，这个功能被删除了！

所以我认为你必须改变你的逻辑：例如，你可以使用包含地址和当前实体的路由并加载实体作为响应：

```
@Route("/user/{slugUser}/{slugAddress}.html", requirements={"slugUser"="^[a-z0-9-]+", "slugAddress"="^[a-z0-9-]+"}) 
```

或者也许是一个解决方案，尝试[手动](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/sluggable.md#setting-the-slug-manually)设置它......并使用[生命周期](http://symfony.com/doc/current/book/doctrine.html#lifecycle-callbacks)自动设置，但我不确定它是否有效：

```
/**
 * @Gedmo\Slug(fields={})
 * @ORM\Column(length=128, unique=true)
 */
private $slug;

/**
 * @ORM\PrePersist
 */
public function updateSlug()
{
    $this->setSlug($this->name.$this->address->getCity());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:34:38.493

您不能直接执行此操作，因为 sluggable 扩展只能使用实体的直接字段。尽管有点笨拙，但我能想到的唯一方法是添加一个跟踪地址所在城市的字段。就像是：

```
/**
 * @ORM\Column(length=128)
 */
private $city;

/**
 * @Gedmo\Slug(fields={"city", "name"})
 * @ORM\Column(length=128, unique=true)
 */
private $slug;

//setter for Address
public function setAddress($address) {
    $this->address= $address;
    $this->city = $address->getCity();
} 
```

我不确定是否需要将 city 持久化到数据库中（即，如果您需要使用 @ORM\Column ）或者扩展是否可以使用未持久化的属性，只需尝试不使用 @ORM 注释看看它是否有效。

# c# - 如何使用 C# box-api 下载或上传文件

> ID：12263263
> 
> 赞同：0
> 
> 时间：2012-09-04T12:13:28.913
> 
> 标签：c#, visual-studio-2010, visual-studio, cloud, box-api

如何使用 C# 从 box.com 下载文件和上传文件。是否有任何简单的方法可以使用 dll 来执行上述任务。我正在使用 Visual Studio 2010。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-06T11:13:25.740

我知道这是一个较旧的问题，但想分享最新的更新。根据 Box 的最新 API，[GitHub Box SDK V2](https://github.com/box/box-windows-sdk-v2#download-a-file)，要下载文件，我们可以使用：

```
Stream stream = await client.FilesManager.DownloadStreamAsync(fileId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:31:59.653

如果您使用 Box 的 V2 API，我们还没有准备好 C# 库。您可以编写自己的代码来执行上传和下载（http://developers.box.com/docs/#files-download-a-file），或者从我们的旧库中复制一些指向 V1 API 的代码：[https://github.com/box/box-csharp-sdk](https://github.com/box/box-csharp-sdk)。

# android - 用于登录的android模式

> ID：12263264
> 
> 赞同：0
> 
> 时间：2012-09-04T12:13:30.067
> 
> 标签：android, android-activity

我想看看您对如何在 Android 上处理登录有何看法。我现在正在开发一个需要您登录才能使用的应用程序。到目前为止，我有两个活动。主屏幕和登录屏幕。我已经这样设置了。

登录屏幕是主屏幕。它要求用户登录。如果登录成功，它将启动主屏幕，我在登录活动中调用完成。当用户注销时，我完成主屏幕活动并开始登录活动。

这无法正常工作，因为当我离开应用程序然后返回时，即使成功登录，登录屏幕也会显示。

我在想，我将不得不跟踪用户登录或未登录服务的天气。然后，如果我登录，登录活动将自动启动主屏幕。

或者，如果用户未登录，我可以启动将启动登录屏幕的主屏幕活动。

这种场景的典型安卓模式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-01T21:54:27.527

首先，为了更有条理，您应该`MyApplication extends Application`在此类中创建类似的内容，您可以创建一个静态方法 onSessionsCreated 并传递一个布尔值，表示是否显示您的 MainScreen（不是登录屏幕）。

public static void onSessionCreated(Context context, CurrentFan currentFan, boolean startMainScreenActivity) { if (startMainScreenActivity) { Intent intent = new Intent(context, MainActivity.class); 意图.setFlags（意图.FLAG_ACTIVITY_NEW_TASK）；意图.setFlags（意图.FLAG_ACTIVITY_CLEAR_TASK）；context.startActivity(intent); }

如果您使用 MVC，您应该创建一个 SessionsController 以在您的 API 中登录用户，之后在回调登录时您应该调用 onSessionCreated 并传递当前用户。

```
 if (activity instanceof LoginActivity)
    ((LoginActivity)mActivity).onSessionCreated(user); 
```

然后在您的 LoginActivity 中，您可能会调用：

```
public void onSessionCreated(User currentUser) {
        MyApplication.onSessionCreated(this, currentUser, true);
        finish();
} 
```

使用此模型，您将： - 使用您的 MVC 模型 - 使用您的 API 与您的用户一起登录 - 使用 MyApplication 类

我认为这应该是一个很好的方法。希望对你有用。

# javascript - 在主干视图中调用 render() 方法的好方法

> ID：12263268
> 
> 赞同：2
> 
> 时间：2012-09-04T12:13:51.957
> 
> 标签：javascript, backbone.js

很久以前，我有点相信这`render()`是观点本身的特权，而不是父母观点的关注。

然而最近我在骨干网读到了关于`delegateEvents`我如何实现的复杂感觉。到目前为止，我到处都在方法中调用`render()`方法`initialize`。

我还没有进行详尽的测试，也没有找到可能遇到问题的用例。然而，它让我感觉到我所做的方式潜伏着潜在的问题。

你能分享你的经验吗？`render()`在内部调用方法有什么问题`initialize`？你会怎么做？

父母是否指示孩子在哪里以及何时呈现自己 r 是否仍在 SoC 的范围内（关注点分离）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:01:07.220

基本上我看到了大约 3 种不同的渲染场景，前 2 种是在父级中渲染，

```
// parent view's render
render: function() {
  var child = new ChildView({el: this.$('.foo'), model: bar, ...});
  this.$el.append(child.render().el);
} 
```

这基本上是父母决定渲染孩子的地点或时间的情况，以及自身的渲染，

```
// parent view's render
render: function() {
  var child = new ChildView({el: this.$('.foo'), model: bar, ...});
  this.$el.append(child.el);
}

// child view's initialize
initialize: function() {
  ...
  this.render();
} 
```

这是子视图指示何时完成渲染的情况。我的看法是后者更好。您的应用程序应该安排好，以便只有视图本身知道应该何时呈现它（应该是在初始化之后或获取模型/集合之后）。即使在它之后调用，`render`我也没有看到调用 inside 的任何问题。填充不应该对其功能产生任何影响。`initialize``delegateEvents``el`

调用 inside`render`是`initialize`一种很好的做法，因为它在任何情况下都可以工作，并且统一了您的渲染方式（您将添加在获取后渲染的视图，其方式与其他视图相同）。以这种方式渲染我还没有遇到任何问题，显然你也没有！

希望这会有所帮助（或有助于让您放心）！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:47:59.413

“......很久以前，我有点相信自己 render() 是视图本身的特权，而不是父视图的关注。”

你走在正确的轨道上。虽然人们经常将其视为`render`公共方法，但您会发现从视图外部调用渲染只会导致意大利面条式代码和混乱。

最佳实践是将渲染（或安排渲染）作为初始化的一部分，并响应相关模型上的适当事件。

# android - 重新启动任务中的所有活动

> ID：12263272
> 
> 赞同：3
> 
> 时间：2012-09-04T12:14:00.677
> 
> 标签：android, android-intent, android-activity

我正在为我的应用程序实现一个设置，该设置允许用户切换主题，用户在切换主题时将处于设置活动中，并且在任务上方将是主屏幕。

我希望在`activity`主题更改后重新启动当前，但我也希望重新启动主屏幕，因此当用户从设置页面返回时，他会看到带有新活动的主屏幕。

重新启动当前`activity` [很容易](https://stackoverflow.com/questions/5530473/how-do-i-restart-an-activity-in-android)，但是如何强制`activities`当前中的前一个`task`也重新启动？

我已尝试将`FLAG_ACTIVITY_CLEAR_TOP`/添加`FLAG_ACTIVITY_CLEAR_TASK`到`intent`，但它会从 中删除这些活动`task`，因此当我从设置中回击时，我将返回主屏幕而不是我的应用程序主屏幕。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:20:30.873

也许您可以检查您是否有任何配置更改`onRestart`方法，因此当您按下返回时，应该触发此方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T16:56:51.603

一种可能的方法是在用户返回时重新启动主要活动。如果您使用 来打开您的 Preferences 活动`startActivityForResult`，那么在完成该活动时，您可以使用`setResult`来告诉主要活动是否需要重新启动。最后，在主活动中，`onActivityResult`您可以查看传递的结果并在必要时重新启动主活动。

# javascript - KineticJS 鼠标事件问题

> ID：12263274
> 
> 赞同：4
> 
> 时间：2012-09-04T12:14:04.187
> 
> 标签：javascript, html, canvas, mouseover, kineticjs

我正在尝试使用 KineticJS 制作某种交互式地图，其中悬停的地方可以加载其他图像。但我不能让鼠标事件正常工作。事情是，一切正常，**但只有第一次鼠标悬停**尝试，当我第二次悬停时，鼠标悬停**触发器**不起作用:(

**即当我第二次执行“mouseout”时，我希望地图部分再次变为浅蓝色（n_amer 图像），但它仍然是深蓝色（n_amer_sel 图像）。**

这是您可以看到此错误的链接：http: [//kinlibtst.elitno.net/](http://kinlibtst.elitno.net/)

我将非常感谢您的帮助！

代码：

```
 function loadImages(sources, callback) {
    var assetDir = 'PROJECT/';
    var images = {};
    var loadedImages = 0;
    var numImages = 0;
    for(var src in sources) {
      numImages++;
    }
    for(var src in sources) {
      images[src] = new Image();
      images[src].onload = function() {
        if(++loadedImages >= numImages) {
          callback(images);
        }
      };
      images[src].src = assetDir + sources[src];
    }
  }
  function initStage(images) {
    var stage = new Kinetic.Stage({
      container: 'container',
      width: 900,
      height: 452
    });

    var imagesLayer = new Kinetic.Layer();

    // img vars
    var n_amer = new Kinetic.Image({
      image: images.n_amer,
      x: 0,
      y: 0
    });

    var n_amer_sel = new Kinetic.Image({
      image: images.n_amer_sel,
      x: 0,
      y: 0
    });

    // mouse events
    n_amer.on('mouseover', function() {
        imagesLayer.add(n_amer_sel)
        stage.draw();
    });
    n_amer_sel.on('mouseout', function() {  
        imagesLayer.remove(n_amer_sel);
        stage.draw();
    });

    // imageBuffer for transparent pixels
    n_amer.createImageBuffer(function() {
      imagesLayer.drawBuffer();
    });
    n_amer_sel.createImageBuffer(function() {
      imagesLayer.drawBuffer();
    });        

    // add to stage
    imagesLayer.add(n_amer);
    stage.add(imagesLayer);
  }

  window.onload = function() {
    var sources = {
      n_amer: 'N-Amer.png',
      n_amer_sel: 'N-Amer_sel.png'
    };
    loadImages(sources, initStage);
  }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:07:41.363

不要使用新的图像对象，而是更改现有对象上的图像：

```
function loadImages(sources, callback) {
    var assetDir = 'http://kinlibtst.elitno.net/PROJECT/';
    var images = {};
    var loadedImages = 0;
    var numImages = 0;
    for (var src in sources) {
        numImages++;
    }
    for (var src in sources) {
        images[src] = new Image();
        images[src].onload = function() {
            if (++loadedImages >= numImages) {
                callback(images);
            }
        };
        images[src].src = assetDir + sources[src];
    }
}

function initStage(images) {
    var stage = new Kinetic.Stage({
        container: 'container',
        width: 900,
        height: 1000
    });

    var imagesLayer = new Kinetic.Layer();

    // img vars
    var n_amer = new Kinetic.Image({
        image: images.n_amer,
        x: 0,
        y: 0
    });

    // mouse events
    n_amer.on('mouseover', function() {
        this.setImage(images.n_amer_sel);
        stage.draw();
    });
    n_amer.on('mouseout', function() {
        this.setImage(images.n_amer);
        stage.draw();
    });

    // imageBuffer for transparent pixels
    n_amer.createImageBuffer(function() {
        imagesLayer.drawBuffer();
    });

    // add to stage
    imagesLayer.add(n_amer);
    stage.add(imagesLayer);
}

window.onload = function() {
    var sources = {
        n_amer: 'N-Amer.png',
        n_amer_sel: 'N-Amer_sel.png'
    };
    loadImages(sources, initStage);
};​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:58:55.230

尝试在未选择的图像上添加两个处理程序，例如：

```
n_amer.on('mouseover', function() {
    imagesLayer.add(n_amer_sel)
    stage.draw();
});
n_amer.on('mouseout', function() {  
    imagesLayer.remove(n_amer_sel);
    stage.draw();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T13:07:13.117

这是一个非常奇怪的行为......可能与图像缓冲区有关......您可以尝试重绘侦听器内的缓冲区。

无论如何，我建议同时添加图像并使用`show()`and `hide()`。此操作通常比添加/删除子节点更快。

> ```
> var n_amer_sel = new Kinetic.Image({
>     image: images.n_amer_sel,
>     x: 0,
>     y: 0,
>     visible: false
> }); 
> ```

```
n_amer.on('mouseover', function() {
    n_amer_sel.show();
    stage.draw();
});
n_amer_sel.on('mouseout', function() {  
    n_amer_sel.hide();
    stage.draw();
});

// add to stage
imagesLayer.add(n_amer);
imagesLayer.add(n_amer_sel);
stage.add(imagesLayer); 
```

[您可以在这个小提琴](http://jsfiddle.net/jbalsas/pEHMg/1/)中看到它正在工作（除了受污染的画布问题）

# linux - Linux 2.3.36 设备文件系统省略

> ID：12263279
> 
> 赞同：-2
> 
> 时间：2012-09-04T12:14:13.267
> 
> 标签：linux, linux-kernel

我在一本书中读到，将来应该省略设备文件系统。

内核 2.3.36 是这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:18:34.007

2.3.36 绝对不是这种情况，而且我怀疑在可预见的将来不会是这种情况：虽然内核本身可能不再依赖于`/dev`，但用户态中接近无限的软件集是。我真的怀疑大规模破解软件是内核开发的目标。

# ruby - Ruby on Rails - 使用电子表格 RubyGem 读取 xls 文件

> ID：12263282
> 
> 赞同：1
> 
> 时间：2012-09-04T12:14:25.810
> 
> 标签：ruby

我正在使用以下代码使用`Spreadsheet`gem 读取 excel 文件。

```
require 'spreadsheet'
Spreadsheet.client_encoding = 'UTF-8'    

book = Spreadsheet.open('C:\Users\Lev Berlin\Documents\Personal\Projects\FactsRus\Nutritional Analysis Models\Data for Rails model import.xls')
sheet1 = book.worksheet('Sheet1') 
```

但是文件没有被正确读取。

当我取消注释`require 'parseexel'`另一个文件中的行时，文件将被正确处理。

请帮我; 这里有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:57:59.493

一旦你加载了工作表（这就是你对“sheet1 = ...”所做的），你需要从该工作表中读取行。你这样做是这样的：

```
sheet1.each do |row|
    # do something interesting with a row
  end 
```

查看[http://spreadsheet.rubyforge.org/files/GUIDE_txt.html](http://spreadsheet.rubyforge.org/files/GUIDE_txt.html)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T06:14:48.267

尝试使用如下..

```
require 'spreadsheet'

@workbook = Spreadsheet.open(MyFile.first.attachment.to_file)

@worksheet = @workbook.worksheet(0)

0.upto @worksheet.last_row_index do |index|

  row = @worksheet.row(index)

  @contact = Contact.new
  #row[0] is the first cell in the current row, row[1] is the second cell, etc...
  @contact.first_name = row[0]

 @contact.last_name = row[1]

  @contact.save

end 
```

# extjs4 - ExtJS 4 或 4.1 MessageBox 自定义按钮

> ID：12263291
> 
> 赞同：6
> 
> 时间：2012-09-04T12:14:46.120
> 
> 标签：extjs4, extjs4.1

```
Ext.MessageBox.show({
    title:'Messagebox Title',
    msg: 'Are you sure want to delete?',
    buttons: {yes: "Some Button 1",no: "Some Button 2",cancel: "Some Button 3"}
}); 
```

ExtJS 4 或 4.1 不支持此代码。按钮不显示。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-22T21:54:03.147

刚刚发现如何做到这一点，希望它可以帮助某人。如您所见，您可以随心所欲地处理按钮。请注意，该框架默认只有 4 个按钮，这是一个不容易克服的限制。在源代码中有多个从 0 到 < 4 的硬编码循环。

```
Ext.MessageBox.show({
    title:'Messagebox Title',
    msg: 'Are you sure want to delete?',
    buttonText: {yes: "Some Button 1",no: "Some Button 2",cancel: "Some Button 3"},
    fn: function(btn){
        console.debug('you clicked: ',btn); //you clicked:  yes
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T12:31:58.940

您不能在方法 show 中执行此操作，因为方法中的按钮配置将标识要显示的按钮的数字作为参数。您可以做的是预先定义您的消息框，然后显示它。

```
 var win = Ext.create('Ext.window.MessageBox', {
     width:300,
     height: 100,
     buttons: [
      {text: 'My button 1'},{
        text: 'My button 2'}
    ]
});

win.show({
     title:'Messagebox Title',
     msg: 'Are you sure want to delete?',
    icon: Ext.Msg.QUESTION
});​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-09T07:08:40.687

使用以下代码：

```
Ext.MessageBox.show({
    title:'Messagebox Title',
    msg: 'Are you sure want to delete?',
    buttonText: {                        
        yes: 'Some Button 1',
        no: 'Some Button 2',
        cancel: 'Some Button 3'
    }
}); 
```

希望它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T17:02:17.577

试试这个解决方案：

```
<script type="text/javascript">
            (function () {
                Ext.override(Ext.MessageBox, {
                    buttonText: { yes: "Sí", no: "No", cancel: "Cancelar" }
                });
            })();
    </script> 
```

# java - 检查与谷歌地图路线的偏差

> ID：12263293
> 
> 赞同：3
> 
> 时间：2012-09-04T12:14:47.157
> 
> 标签：java, android, google-maps, navigation, polyline

我正在为学校做一个涉及地图和导航的项目。到目前为止，我所做的只是使用 Google Directions Web API 来检索 JSON 输出，然后对其进行解析以获取我的方向。导航时，用户可能会偏离路径，这是我想要重新路由的地方。我认为这可能有点模糊，但是，我如何检查是否偏离了某条路线？

# phalcon - Phalcon\Text camelize/uncamelize 用法

> ID：12263294
> 
> 赞同：1
> 
> 时间：2012-09-04T12:14:48.187
> 
> 标签：phalcon

我遇到了驼峰化/非驼峰化的问题 ( `\Phalcon\Text`)

我的理解是这个函数创建骆驼大小写字符串，如[`ucwords()`](http://php.net/ucwords)或[`ucfirst()`](http://php.net/ucfirst)

以下测试显示： 此测试通过：

**骆驼化：**

*   不错 -> 不错
*   好天气-> NiceWeather（不确定这是否应该是那样。空间被剥离了。如果这是预期的行为，那么我们需要将它添加到文档中）
*   nice_weather -> NiceWeather（为什么下划线会消失？如果这是预期的行为，那么我们需要将它添加到文档中）
*   不错 -> 不错

**非骆驼化：**

*   不错->不错
*   好天气->好天气
*   Nice_Weather -> nice_weather
*   NICE -> nic_e（大写字母切换为下划线）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:46:35.197

camelize/uncamelize 方法旨在将带下划线的字符串转换为驼峰式字符串。具体来说，这些方法用于`Phalcon\Model`将表名转换为它们各自的类，反之亦然。因此，我们可以从类名中获取表的名称。

参考： [http ://docs.phalconphp.com/en/latest/api/Phalcon_Text.html](http://docs.phalconphp.com/en/latest/api/Phalcon_Text.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:40:24.153

参考：[http ://docs.phalconphp.com/en/latest/api/Phalcon_Text.html](http://docs.phalconphp.com/en/latest/api/Phalcon_Text.html)

您好，我们需要更改 uncamelize 的示例：

0.4.x：

```
- <?php Phalcon_Text::camelize('CocoBongo'); //coco_bongo
+ <?php Phalcon_Text::uncamelize('CocoBongo'); //coco_bongo 
```

0.5.x：

```
- <?php Phalcon\Text::camelize('CocoBongo'); //coco_bongo
+ <?php Phalcon\Text::uncamelize('CocoBongo'); //coco_bongo 
```

# configure - 生成 configure.ac 和配置脚本

> ID：12263295
> 
> 赞同：1
> 
> 时间：2012-09-04T12:15:00.960
> 
> 标签：configure, autoconf

这是我的源代码树：

```
 client (dir with a lot of c files inside)
FTPUtils --> bin /
                 \server (dir with a lot of c files inside)
                |
                 proto.h
                 function.c 
```

我已经阅读了一些 autoconf 教程，但我不明白如何制作**通用的** *configure.ac*、*Makefile.am*和*配置*脚本。
有人可以向我解释一下吗？
我还必须添加*-lcurl*和*-lcrypto*！
提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T20:03:08.693

我写了一个关于这个主题的[教程](http://ptomato.name/advanced-gtk-techniques/html/real-life-app-setup.html)——它面向 GTK 编程，但第一部分不是 GTK 特定的，所以它们可能会让你开始。

# objective-c - 无法接收带有分发证书的推送通知

> ID：12263300
> 
> 赞同：0
> 
> 时间：2012-09-04T12:15:32.950
> 
> 标签：objective-c, ios, xcode

我目前正在为我的应用程序实施推送通知。我已经使用开发人员临时配置文件成功实现了 PNS，并且能够接收通知。但是当我通过分发临时配置文件来实现它并在设备中添加 ipa 文件时，它会请求许可，但是当发送通知时，它不会在设备上接收。

你知道问题是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:27:04.743

1) 要在开发人员证书上发送 pns，您必须在沙箱上，当您想要在分发证书上发送 pns 时，您必须在沙箱上关闭。

2) 在创建 ipa 文件时检查您的代码签名是否使用正确的分发证书签名。

3）检查您的分发证书是否具有临时性。

4）检查您的设备是否已注册您的证书。！

我希望这能帮到您。！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:18:53.410

可能是您忘记从“推送链接”中删除“沙盒”

# php - 如何在 ActionScript 中设置 php xdebug 标志？

> ID：12263302
> 
> 赞同：0
> 
> 时间：2012-09-04T12:15:34.530
> 
> 标签：php, actionscript-3, debugging, xdebug, remote-debugging

我的服务器运行 PHP，启用了 xdebug。我正在通过 PhpStorm 远程调试 php 代码。

那么如何在 ActionScript 中设置 php xdebug 标志？

在 iOS 代码中，很简单：[pairs addObject:@"XDEBUG_SESSION_START=PHPSTORM"];

但是如何在 ActionScript 中做类似的事情呢？

仅供参考：http: [//xdebug.org/docs/remote](http://xdebug.org/docs/remote)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T03:10:39.313

只需在服务器 URL 中添加调试会话标志作为查询字符串的一部分：www.abc.com/xyz.php??XDEBUG_SESSION_START=PHPSTORM

# c# - 如何反序列化以下 xml？

> ID：12263305
> 
> 赞同：-1
> 
> 时间：2012-09-04T12:15:46.593
> 
> 标签：c#, .net, xml, serialization

我想在一个类中反序列化以下 xml（具有特定属性）：

```
<test1>
    <field1>0</field1>
    <field2>1</field2>
    <field3>2</field3>
</test1>
<test2>
    <field4>0</field4>
    <field5>1</field5>
    <field6>2</field6>
</test2>
<test3>
    <field7>0</field7>
    <field8>1</field8>
    <field9>2</field9>
</test3> 
```

我编写的课程如下：

```
 [Serializable]
    public class Result
    {
        [XmlElement("test1")]
        public Test1 T1{ get; set; }

        [XmlElement("test2")]
        public Test2 T2 { get; set; }

        [XmlElement("test3")]
        public Test3 T3 { get; set; }

    }

    [Serializable]
    public class Test1
    {
        [XmlElement("Field1")]
        public Test1 Field1{ get; set; }

        [XmlElement("Field2")]
        public Test2 Field2{ get; set; }

        [XmlElement("Field3")]
        public Test3 Field3 { get; set; }

    }
.... 
```

不幸的是，我在反序列化时收到以下错误：

> 输入 xmlns='' 不是预期的。

谢谢你的帮助。

亲切的问候，亲

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:17:41.707

在 XML 周围添加一个`<Result>...</Result>`元素。如果它们丢失，请预先添加并附加它们。如果存在不同的根元素，则将该`[XmlRoot("name")]`元素添加到`Result`类中。

解决 XML 序列化问题的最简单方法是填充一个对象，然后使用它进行序列化`XmlSerializer.Serialize()`并查看生成的 XML。

# php - PHP 简单的 HTML Dom 不能正常工作

> ID：12263306
> 
> 赞同：0
> 
> 时间：2012-09-04T12:15:50.007
> 
> 标签：php, html, arrays, dom, simple-html-dom

这是我的代码：

```
include('simple_html_dom.php');
$page = file_get_html($_REQUEST['url']);
$page = $page->find('table[class=cf-table-style sorted]',0)->find('tbody',0);
echo ($page); 
```

`echo $page`假设要打印 HTML，但它会打印 a `Array`，这意味着`find('tbody',0)`正在返回数组。我认为不应该那样做

我的代码中的错误在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:20:29.163

我相信该`find`函数无论如何都会返回数组。只需回显第一个元素： `echo($page[0]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:20:40.867

您需要使用 foreach 提取它，然后回显，例如

```
foreach($page as pg){
echo pg;
} 
```

试试这个它可能会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:20:48.743

```
$page = $page->find('table[class=cf-table-style sorted]',0)->find('tbody',0)->innertext; 
```

**编辑 1**

`innertext`返回 HTML！以这种方式尝试：

```
$chunk = $page->find('table[class=cf-table-style sorted] tbody',0)->innertext;

echo $chunk; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:22:51.710

尝试这个：

```
$page = $page->find('table[class=cf-table-style sorted]',0)->find('tbody',0)->plaintext;
print_r($page); 
```

# javascript - JSON：在另一个 JSON 对象中重用 JSON 对象

> ID：12263313
> 
> 赞同：3
> 
> 时间：2012-09-04T12:16:27.343
> 
> 标签：javascript, json, reusability, code-reuse

考虑这个 JSON 对象，它可以用作 HTML 中选择元素的选项数据：

```
{"dropdown_options" : [
          {"id" : "received", "title" : "Received", "value" : "received"},   
          {"id" : "approved", "title" : "Approved", "value" : "approved"}, 
          {"id" : "rejected", "title" : "Rejected", "value" : "rejected"}
]} 
```

如何重用上述 JSON 对象来定义另一个 JSON 对象？
像这样的东西：

```
{"select" : {"id" : "message_carriers", "options" : "dropdown_options"}} 
```

**编辑：上面的代码示例是 .json 文件的一部分。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:20:29.157

你的意思是

```
var jsonobj={"dropdown_options" : [{"id" : "received", "title" : "Received", "value" : "received"}, {"id" : "approved", "title" : "Approved", "value" : "approved"}, {"id" : "received", "title" : "Received", "value" : "received"}]};
var selectobj={"select" : {"id" : "message_carriers", "options" : jsonobj}} 
```

请注意，在第二行中给出了变量名称 - 所以没有引号。

**编辑**

根据我的评论，JSON 对象是从文件创建的。所以，假设第一个对象是 in`jsonobj`和第二个（没有“选项”） in `selectobj`，你只需要

```
selectobj.options=jsonobj; 
```

或者

```
selectobj.options=jsonobj.dropdown_options; 
```

将它们链接在一起，而无需主定义中的变量。

# c# - 公共属性的默认 MongoDB 序列化

> ID：12263315
> 
> 赞同：5
> 
> 时间：2012-09-04T12:16:33.693
> 
> 标签：c#, mongodb, serialization

我知道我必须在我的类上具有公共读写属性，以便 MongoDB 驱动程序序列化/反序列化我的对象。但是我想知道是否有方法/首选方法可以从我的其余代码中隐藏写入属性？

例如。

```
class Product
{
    private List<Release> releases;

    public List<Release> Releases
    {
        get
        {
            return new List<Release>(releases); //I can protect 'releases' when reading by passing a copy of it
        }
        set
        {
            releases = value; //BUT how can I protect release when writing?
        }
    }
} 
```

我希望 MongoDB 能够序列化/反序列化我的类型，但我不希望我的其余代码能够覆盖它原本应该是私有的字段/属性。有没有一种模式来处理这个？我曾考虑过有一个单独的`ProductDoc`类，它只是用作将 Product 对象进出 MongoDB 的中介，但我不确定是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T12:39:25.053

我已经很长时间没有使用 mongo 了。但是您可以尝试阅读此线程[MongoDb Map Setters](https://stackoverflow.com/questions/5744430/c-sharp-mongodb-how-to-correctly-map-a-domain-object)或尝试像这样保护您的 setter：

```
public List<Release> Releases
{
    get
    {
        return new List<Release>(releases); //I can protect 'releases' when reading by passing a copy of it
    }
    protected set
    {
        releases = value; //BUT how can I protect release when writing?
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-26T05:46:17.847

如果您的属性由构造函数设置，另一种方法是将它们保持为只读，并用于`MapCreator`告诉 MongoDB 如何创建您的类的实例，并传入您要设置的属性。

例如，我有一个`Time`用三个只读属性调用的类：`Hour`和`Minute`一个`Second`公共构造函数，它需要一个小时、一分钟和一个秒的值。

以下是我如何让 MongoDB 将这三个值存储在数据库中并`Time`在反序列化期间构造新对象。

```
BsonClassMap.RegisterClassMap<Time>(cm =>
{
    cm.AutoMap();
    cm.MapCreator(p => new Time(p.Hour, p.Minute, p.Second));
    cm.MapProperty(p => p.Hour);
    cm.MapProperty(p => p.Minute);
    cm.MapProperty(p => p.Second);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T18:45:56.947

此页面上的最佳答案目前存在一些重要的缺陷。

正如目前编写的解决方案：

```
public List<Release> Releases
{
    get
    {
        return new List<Release>(releases); //I can protect 'releases' when reading by passing a copy of it
    }
    protected set
    {
        releases = value; //BUT how can I protect release when writing?
    }
} 
```

这不像写的那样工作。

```
obj.Releases.Add(new Release()); 
```

**将通过向其添加新版本来影响基础集合。** 这与将设置的例程设为私有的既定目标直接矛盾。

但是，如果您更改公开的属性类型以实现 IEnumerable 而不是 List 并返回列表的只读版本。如...

```
public IEnumerable<Release> Releases
{
    get
    {
        return new List<Release>(releases).AsReadOnly();
    }
    protected set
    {
        releases = value;
    }
} 
```

然后两者

```
obj.Releases.Add(new Release()); 
```

和

```
obj.Releases = new List<Release>(); 
```

都会抛出构建错误并阻止修改底层集合。

# jboss - JBOSS - 如何防止配置的多个实例启动

> ID：12263318
> 
> 赞同：0
> 
> 时间：2012-09-04T12:16:39.090
> 
> 标签：jboss

我们正在使用 JBOSS AS。

我们已经创建了一个我们自己的配置（类似于最小，默认）

用户可以使用 run.sh 来启动应用程序。

我不想让用户启动相同配置的多个实例来运行。

让我知道是否有任何方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:28:53.880

好吧，您没有提及有关您的 JBoss 环境的任何信息，但是实际上，如果您尝试在同一台机器上启动应用程序服务器的两个实例（使用相同的配置），第二个实例将失败，并引发[Bind Exception](http://www.mastertheboss.com/jboss-configuration/solving-javanetbindexception-address-already-in-use-jvm_bind)。如果您提供更多详细信息，我会尽力为您提供更多帮助。问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:01:09.957

在您的脚本中添加一行将 PID 放入文件中，然后如果 pid 文件在您启动脚本时在这里，它将停止。

# c# - SocketAsyncEventArgs 中的发送函数

> ID：12263325
> 
> 赞同：1
> 
> 时间：2012-09-04T12:17:08.613
> 
> 标签：c#, socketasynceventargs

我正在开发一个 C# 客户端/服务器应用程序并使用 SocketAsyncEventArgs 类。我可以从客户端发送一条消息，我可以通过服务器接收（并直接回答），但我不能从服务器“随意”发送。这是我为发送创建的一些代码，有没有人可以看到我的错误？如果您查看下面的代码，我的 handleSend 中的一切看起来都很好（消息看起来正确并且 t.Connection.SendAsync(completeArgs); 被调用，但客户端没有显示任何内容......（除了直接答案我得到...）

服务器代码：

```
 internal SocketListener(Int32 numConnections, Int32 bufferSize, Service1 parent)
{
try
{
 this.parent = parent;

 this.todo = new ArrayList();
 this.tokenPool = new ArrayList();
 this.numConnectedSockets = 0;
 this.numConnections = numConnections;
 this.bufferSize = bufferSize;
 this.readWritePool = new SocketAsyncEventArgsPool(numConnections);
 this.semaphoreAcceptedClients = new Semaphore(numConnections, numConnections);

 for (Int32 i = 0; i < this.numConnections; i++)
 {
  SocketAsyncEventArgs readWriteEventArg = new SocketAsyncEventArgs();
  readWriteEventArg.Completed += new EventHandler<SocketAsyncEventArgs> (OnIOCompleted);

  readWriteEventArg.SetBuffer(new Byte[this.bufferSize], 0, this.bufferSize);

  this.readWritePool.Push(readWriteEventArg);
 }
  Thread t = new Thread(handleSend);
  t.Start();
 }
 catch (Exception e)
 {
 }
}

public void handleSend()
{
 try
 {
 foreach (Token t in tokenPool)
  {
  if (t.ID != "" && t.ID != null)
   {
   if (parent.cStructHandler.gotMsg(t.ID))
        {
         MsgStruct tmpCs = parent.cStructHandler.getNextMsg(t.ID);
         if (tmpCs.getMsg().Length != 0)
         {
          byte[] ba = Encoding.UTF8.GetBytes(tmpCs.getMsg());
          if (tmpCs.getCrc() == "")
          {
           ulong tmp = CRC.calc_crc(ba, ba.Length);
           tmpCs.setCrc(tmp.ToString("X"));
          }
          if (tmpCs.canSendByTimeout())
          {
           string crcStr = "?" + tmpCs.getCrc() + "?";
           byte[] bb = Encoding.UTF8.GetBytes(crcStr);
           crcStr = Encoding.UTF8.GetString(bb);
           byte[] fullMsg = new byte[ba.Length + bb.Length];
           bb[0] = 254;
           bb[bb.Length - 1] = 255;
           ba.CopyTo(fullMsg, 0);
           bb.CopyTo(fullMsg, ba.Length);
           SocketAsyncEventArgs completeArgs = new SocketAsyncEventArgs();
           completeArgs.SetBuffer(fullMsg, 0, fullMsg.Length);
           completeArgs.UserToken = t;
           completeArgs.RemoteEndPoint = t.Connection.RemoteEndPoint;
           completeArgs.Completed += new EventHandler<SocketAsyncEventArgs>(OnIOCompleted);
           t.Connection.SendAsync(completeArgs);
          }
         }
        }
   }
  }

  Thread.Sleep(500);
  handleSend();
 }
 catch (Exception e)
 {
 }
} 
```

客户代码：

```
private void OnReceive(object sender, SocketAsyncEventArgs e)
{
 Console.WriteLine("\nOnReceive: " +  System.Text.UTF8Encoding.ASCII.GetString(e.Buffer) + "\n");

 autoSendReceiveEvents[SendOperation].Set();
}
private void OnSend(object sender, SocketAsyncEventArgs e)
{
 // Signals the end of send.
 autoSendReceiveEvents[ReceiveOperation].Set();
 if (e.SocketError == SocketError.Success)
 {
  if (e.LastOperation == SocketAsyncOperation.Send)
  {

   Socket s = e.UserToken as Socket;
   byte[] receiveBuffer = new byte[255];
   e.SetBuffer(receiveBuffer, 0, receiveBuffer.Length);
   e.Completed += new EventHandler<SocketAsyncEventArgs>(OnReceive);
   s.ReceiveAsync(e);
  }
 }
 else
 {
  this.ProcessError(e);
 }
}
public void sendloop()
{
 try
 {
  byte[] data = new byte[1024];
  string input, stringData;

  bool gotData = true;
  lastTime = DateTime.Now;
  String bilId = ini.GetFromIni("CONFIG", "BIL");
  MsgStruct hello = new MsgStruct("I;1;" + bilId);

  while (gotData)
  {
   try
   {
        this.parent.isConnected = true;
        DateTime tmpDate = lastTime.AddSeconds(30);
        if (DateTime.Now > tmpDate)
        {

          gotData = false;
         }
         tmpDate = lastTime.AddSeconds(13);
         if (sendPing && DateTime.Now > tmpDate)
         {
           MsgStruct ping = new MsgStruct("X;" + DateTime.Now.ToLongTimeString() + ";" + Convert.ToString(this.parent.carPos.Y) + ";" + Convert.ToString(this.parent.carPos.X));
           ping.setAckNeeded(true);
           buffert.Add(ping);
           sendPing = false;
          }
          while (true)
          {
                if (canUseBuffert)
                {
                  canUseBuffert = false;
                  if (buffert.Count > 0)
                  {
                   if (buffert[0] != null && buffert[0].getMsg().Length != 0)
                   {
                          byte[] ba = Encoding.UTF8.GetBytes(buffert[0].getMsg());
                          if (buffert[0].getCrc() == "")
                          {
                                ulong tmp = CRC.calc_crc(ba, ba.Length);
                                buffert[0].setCrc(tmp.ToString("X"));
                           }
                           if (buffert[0].canSendByTimeout())
                           {
                                string crcStr = "?" + buffert[0].getCrc() + "?";
                                byte[] bb = Encoding.UTF8.GetBytes(crcStr);
                                crcStr = Encoding.UTF8.GetString(bb);
                                byte[] fullMsg = new byte[ba.Length + bb.Length];
                                bb[0] = 254;
                                bb[bb.Length - 1] = 255;
                                ba.CopyTo(fullMsg, 0);
                                bb.CopyTo(fullMsg, ba.Length);
                                string s = System.Text.UTF8Encoding.ASCII.GetString(fullMsg);

                                if(buffert[0].getMsg()[0] != 'X')

                           SocketAsyncEventArgs completeArgs = new SocketAsyncEventArgs();
                           completeArgs.SetBuffer(fullMsg, 0, fullMsg.Length);
                           completeArgs.UserToken = this.clientSocket;
                           completeArgs.RemoteEndPoint = this.hostEndPoint;
                           completeArgs.Completed += new EventHandler<SocketAsyncEventArgs>(OnSend);
                           clientSocket.SendAsync(completeArgs);

                           AutoResetEvent.WaitAll(autoSendReceiveEvents);

                           Console.WriteLine( Encoding.ASCII.GetString(completeArgs.Buffer, completeArgs.Offset, completeArgs.BytesTransferred));

                           if (!buffert[0].isAckNeeded())
                                buffert.Remove(buffert[0]);

                          }
                         }
                        }
                        canUseBuffert = true;
                        break;
                   }
                  }
                 }
                 catch (Exception e)
                 {
                 }
                }
                Console.WriteLine("Disconnecting from server...");
           }
           catch (Exception e)
           {
                canUseBuffert = true;
           }
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:39:30.630

也许你应该试试这个[https://stackoverflow.com/a/8933509/907732](https://stackoverflow.com/a/8933509/907732) 这对我很有帮助。

Greg Hewgill 描述的可能存在错误。

看**OnReceive** (object sender, SocketAsyncEventArgs e)

**autoSendReceiveEvents** [SendOperation].Set() 方法表示接收结束。所以这个代码停止接收“*在部分长度被写入缓冲区之后*”。

# database-connection - ilog jrules与数据库连接-详解

> ID：12263328
> 
> 赞同：0
> 
> 时间：2012-09-04T12:17:14.713
> 
> 标签：database-connection, ilog, jrules

我正在使用 IBM ILOG JRules 进行 POC，而且我是 JRules 的新手。我有一个业务需求：

1.  我将在数据库中拥有文档类及其属性。
2.  在 Rule Studio 中，我将为每个角色创建一个具有以下条件的决策表：

    `If Document Class is <abc> and User Role is <xyz> Then Return Properties <P1, P2,…&gt; as editable.`

3.  我必须找到一种方法来整合数据库和决策表，以便决策表可以识别属性值。

谁能帮助我如何使用 IRL 代码以简单的方式实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:33:36.993

如果您是 JRules 的新手，请记住您在 JRules 中定义并“口头化”的任何内容上编写业务规则工件（业务规则、决策表、决策树）。

从 BRMS 的角度来看，您尝试做的只是错误的。

在决策表 (DT) 中，您可能有数百行，这意味着数百个个人规则。每一行都被翻译成一条规则。
因此，如果您这样做，您将调用数百次 DB，这不是您想要的。
有人可能会争辩说您可以在规则任务中使用 fastPath 算法，但您是 JRules 的新手，我只想提醒您这一点。

您想要的是：
1/ 在 Java 中创建一个对象模型。
2/ 基于对象模型（Java 库）在 JRules 中创建 BOM。
3/ 详细说明您的 BOM（可以在 JRules 中导入期间在设计时自动执行）。
4/ 编写您的 DT
5/ 在 Java 中的编排层中创建对数据库的调用。
6/ 从编排层填充对象实例和属性。
7/ 使用正确的输入/输出（规则集参数）从规则项目中导出规则集。
8/ 使用您的规则集调用引擎
9/ 检索结果

作业已完成

请记住，在执行时从规则引擎调用数据库很可能是一个错误的想法，因为您的规则可以被多次测试，因此调用 DB n 次，效率不高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:28:47.033

Try loading the data from the data base beforehand. JRules should be called with the loaded data and should return the result to the calling system which then stores the data back to the DB. A direct integration with the DB is not something I would recommend.

If the data from the DB doesn't change often and you can redeploy whenever a change happen, you can load the data into the BOM itself. If this is the case, you can load the data using the dynamic domain plug-in which inserts the data into your BOM, but as I said, this requires a redeployment of your RuleApp.

# java - 为什么 GradientDrawable 的大小没有变化？

> ID：12263329
> 
> 赞同：0
> 
> 时间：2012-09-04T12:17:19.670
> 
> 标签：java, android, drawable

我正在尝试使用 setSize() 方法更改 GradientDrawable 的大小（用作 Button 的背景可绘制对象），但没有任何反应：可绘制对象仍然具有相同的大小。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:50:43.340

最后，我找到了解决方案：改用 setBounds() 方法。

# asp.net-mvc - 通过单击 mvc4 中带有查询字符串的 sumit 按钮，将一个模型重定向到另一个模型

> ID：12263331
> 
> 赞同：0
> 
> 时间：2012-09-04T12:17:24.017
> 
> 标签：asp.net-mvc

我正在尝试通过单击视图页面的按钮将视图页面重定向到另一个视图页面。前任，

我有两页 1\. 学生 2\. BookIssue

我必须过滤 StudentName。在这个 viewPage 中，我有一个文本框和一个提交按钮。当我单击提交按钮时，它应该将我带到 BookIssue 控制器，并在文本框中输入了 studentName。

我必须使用 TempData 才能在另一个模型中获取值但我认为在代码中使用它不是一个好习惯

请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:41:48.593

使用路由参数尝试`RedirectToAction`结果`studentName`

```
public ActionResult Student(string studentName)
{
    //...
    return RedirectToAction("index", "BookIssue", new { studentName });
} 
```

然后接收`studentName`。`BookIssueController`

您也可以通过以学生页面的形式输入`action`姓名和姓名来重定向`controller`

```
@using (Html.BeginForm("index", "BookIssue"))
{
    @Html.TextBox("StudentName")
    <input type="submit" name="Go to Book Issue"/>
} 
```

# internet-explorer - 除非用户单击兼容模式，否则 Internet Explorer 不会播放我的视频。

> ID：12263334
> 
> 赞同：0
> 
> 时间：2012-09-04T12:17:43.593
> 
> 标签：internet-explorer, video

我有一个网站：

www.nurseresumetips.com

我正在使用 Flowplayer 播放 h.264 编码的视频。这适用于所有浏览器，包括 ios 设备。

问题出在 Internet Explorer 上。我正在运行 ie 9，除非用户打开兼容模式，否则视频不会播放。

我正在使用 Wordpress 插件 JVPress。

我想挥动一根魔杖，让我的视频在任何版本的 IE 7 及更高版本中自动播放。

和建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:24:06.317

尝试使用以下命令强制兼容模式：

`<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" />`

有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/cc817574.aspx)。

# sql-server - 如何捕获 CMDEXEC SQL Server 作业的退出代码？

> ID：12263337
> 
> 赞同：4
> 
> 时间：2012-09-04T12:17:59.430
> 
> 标签：sql-server, exit-code, sql-server-agent, sql-server-job

下面的 SQL Server 作业总是以返回代码 0 退出，表示成功，而实际上它没有完成它的工作，即它没有删除“test.txt”。如何捕获实际的退出代码（例如 %ERRORLEVEL%，或类似“权限被拒绝”的消息，或任何有意义的响应，指示在 msdb.dbo.sp_add_jobstep 上 @command 的成功或失败）？

评论：

*   *{DBname}*是我拥有的数据库的名称
*   *{proxyName}*是 SQL Server 代理的名称（对“操作系统 (CmdExec)”子系统有效）属于凭据，该凭据映射到 SQL Server 中对*{folderUNC}具有完全控制权的 Windows 域登录*
*   *{folderUNC}*是“test.txt”所在文件夹的完整 UNC 路径

一些可能有用的细节：

*   服务器：Microsoft SQL Server 企业版（64 位）版本 9.00.4060.00
*   操作系统：Microsoft Windows NT 5.2 (3790)
*   我不是系统管理员，只是数据库*{DBname}的所有者*

代码：

```
USE {DBname}
GO

DECLARE @returnCode AS INT
DECLARE @jobName NVARCHAR(128)
DECLARE @jobStep1Name SYSNAME

SET @jobName = 'CMDEXEC Test Job' 
SET @jobStep1Name = 'CMDEXEC Test Job Step 1'

EXEC @returnCode = msdb.dbo.sp_add_job 
    @job_name = @jobName,
    @enabled = 1,
    @start_step_id = 1,
    @notify_level_eventlog = 2,
    @delete_level = 0;

 IF (@@ERROR <> 0 OR @returnCode <> 0)
     PRINT N'Error @ sp_add_job. @@ERROR = ' + CONVERT(VARCHAR(10), @@ERROR) + 
          N' @returnCode = ' + CONVERT(VARCHAR(10), @returnCode

EXEC @returnCode = msdb.dbo.sp_add_jobstep
    @job_name = @jobName, 
    @step_id = 1, 
    @step_name = @jobStep1Name, 
    @subsystem = 'CMDEXEC', 
    @command = 'DEL {folderUNC}\test.txt',
    @cmdexec_success_code = 0,
    @on_success_action = 1,
    @on_fail_action = 2,
    @proxy_name = '{proxyName}';

 IF (@@ERROR <> 0 OR @returnCode <> 0)
     PRINT N'Error @ sp_add_job. @@ERROR = ' + CONVERT(VARCHAR(10), @@ERROR) + 
          N' @returnCode = ' + CONVERT(VARCHAR(10), @returnCode

EXEC @returnCode = msdb.dbo.sp_add_jobserver 
    @job_name = @jobName;

 IF (@@ERROR <> 0 OR @returnCode <> 0)
     PRINT N'Error @ sp_add_job. @@ERROR = ' + CONVERT(VARCHAR(10), @@ERROR) + 
          N' @returnCode = ' + CONVERT(VARCHAR(10), @returnCode

EXEC @returnCode = msdb.dbo.sp_start_job 
    @job_name = @jobName,
    @step_name = @jobStep1Name;

 IF (@@ERROR <> 0 OR @returnCode <> 0)
     PRINT N'Error @ sp_add_job. @@ERROR = ' + CONVERT(VARCHAR(10), @@ERROR) + 
          N' @returnCode = ' + CONVERT(VARCHAR(10), @returnCode

EXEC @returnCode = msdb.dbo.sp_delete_job 
    @job_name = @jobName;

 IF (@@ERROR <> 0 OR @returnCode <> 0)
     PRINT N'Error @ sp_add_job. @@ERROR = ' + CONVERT(VARCHAR(10), @@ERROR) + 
          N' @returnCode = ' + CONVERT(VARCHAR(10), @returnCode 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:58:58.303

问题似乎在于它失败时`del`没有设置。`errorlevel`有几种方法可以“解决”这个问题，但我个人会选择编写自己的 delete.exe 或通过 .bat 文件。

示例：（删除.bat）

```
@echo off

del "%1"
if exist "%1" GOTO FAIL
EXIT /B 0

:FAIL
ECHO "File still there ! (%1)"
EXIT /B 1 
```

你可以这样称呼它（`@command`）：

```
delete.bat c:\test.txt 
```

当文件在据称被删除后仍然存在时，它将返回失败。

# php - 提交前获取ajaxLink按钮的id

> ID：12263342
> 
> 赞同：0
> 
> 时间：2012-09-04T12:18:13.957
> 
> 标签：php, ajax, jquery, yii

我在 Yii 框架（不是 ajax 表单提交按钮）中创建了一个 ajax 链接（CHTML::ajaxLink），它通过 ajax 将一些值传递给控制器​​。有多个链接将不同的值传递给控制器​​。我想在将值传递给控制器​​之前获取单击链接的 id/class 属性（在 jquery.ajax 选项的“beforeSend”中）。只是我只想获取生成 ajax 请求的 id/class 属性。帮助！！！

更新::这是代码

```
echo CHtml::ajaxLink ("Click Here",
                              Yii::app()->createUrl('default/del/id/6'), 
                              array(
                                    'beforeSend' => 'function(){
                        //I want to get the id of the link here     
    }',
                                    'complete' => 'function(){
                            }',

                                    'update' => '#loadContent'),

        );
The above code will generate the following a tag:-
<a href="#" id="yt1">Click Here</a> 
```

当用户单击上面的链接时，我想在 ajaxLink 的 beforeSend 部分中获取 id (yt1)。

我尝试了以下代码：

```
 'beforeSend' => 'function(){
 $("a").click(function(){
    var a = $(this).attr("id");
    alert(a); 
 } 
```

上面的代码有效，但只有在点击链接两次时才会提醒 id。在第三次点击时，id 会收到两次警报，并在随后的点击中不断增加。我对这个奇怪的问题一无所知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:41:06.830

您可以使用[`$.proxy()`](http://api.jquery.com/jQuery.proxy/ "http://api.jquery.com/jQuery.proxy/"), 将函数的上下文更改为来自当前 ajax 对象的锚标记：

```
'beforeSend' => '$.proxy(function(jqXHR,settings){
        console.log($(this).attr("id"));// or alert($(this).attr("id"))
        // rest of your function
        // you can still use the jqXHR object, and the settings map to manipulate the ajax call
},this)' 
```

**编辑：**

让我告诉您为什么警报数量会随着后续点击而增加。

发生这种情况是因为每次单击时，都会有一个新的单击处理程序与 相关联`<a>`，因为这一行：

```
$("a").click(function(){...}) 
```

所以第一次点击的时候，函数调用的顺序是：

```
beforeSend callback
assign click handler (1) 
```

所以还没有警报。

第二次：

```
1st click handler's alert
beforeSend callback
assign click handler (2) 
```

第三次：

```
1st click handler's alert
2nd click handler's alert
beforeSend callback
assign click handler (3) 
```

等等，因为它不断增加。

**编辑2**：

另一种更好的方法是，您可以使用`context`选项来制作上下文，即刚刚单击的链接：

```
'context'=>'js:this', // right now 'this' is link, so we can pass it
'beforeSend'=>'function(){// i would suggest using the signature 'function(jqXHR,settings)' so that 
    // you can modify the ajax call if you need to

    console.log($(this).attr("id"));// or alert($(this).attr("id"))
    // rest of your function
}' 
```

来自[jquery 的 ajax 文档](http://api.jquery.com/jQuery.ajax/ "http://api.jquery.com/jQuery.ajax/")：

> 默认情况下，上下文是一个对象，表示调用中使用的 ajax 设置（$.ajaxSettings 与传递给 $.ajax 的设置合并）。

**编辑3**：

另一种选择：将链接的 id 作为附加设置键传递：

```
'idOfLink'=>'js:$(this).attr("id")',
'beforeSend'=>'function(){
     // now you can access the id like:
     console.log(this.idOfLink);// or alert(this.idOfLink)
}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:27:16.900

如果您正在使用`jQuery`，您可以这样做来获取元素属性：`$("#element_id").attr("id")`或者如果您正在使用`HTML5`，您可以使用`data`链接上的标签，例如：

```
<a href="bla.php" data-name="your_data_here">Link</a> 
```

并且还使用`jQuery`你这样做：`$("#element_id").data("name")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:22:40.293

您可能需要详细说明/发布代码片段，以便我们对您的问题有更好的了解。但是根据您在此处的解释，我假设您希望处理您的 Ajax 请求的任何内容都知道它源自哪个链接。假设异步处理在其他地方（在您的浏览器之外）完成，它将无法访问您的 DOM。因此，您需要将 id 作为参数嵌入到您的 ajax 请求中。换句话说，将发送请求的元素的 id 作为请求的一部分传递。

# xml - ASP.Net Web API XML 序列化 ArrayOf

> ID：12263345
> 
> 赞同：1
> 
> 时间：2012-09-04T12:18:18.767
> 
> 标签：xml, wcf, serialization, asp.net-web-api

我正在使用 ASP.Net Web API (WCF 4.0) 方法返回一个`List<WorkItem>`.

这是返回一个带有 ArrayOf... 形式的 xml

```
<ArrayOfworkitem xmlns="http://schemas.datacontract.org/2004/07/AgilePortalServices.DataContracts" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <workitem>
        <id>28</id>
        <title>Test</title>
    </workitem>
    <workitem>
        <id>27</id>
        <title>Test Bug</title>
    </workitem>
</ArrayOfworkitem> 
```

但我希望它返回为

```
<workitems>
    <workitem>
        <id>28</id>
        <title>Test</title>
    </workitem>
    <workitem>
        <id>27</id>
        <title>Test Bug</title>
    </workitem>
</workitems> 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:22:39.677

这是由于使用 WCF XML 序列化程序的序列化程序，而不是默认的 XmlSerializer。

您可以通过设置默认格式化程序来修改它（如果您选择，您可以将其替换为第 3 方）。

```
var xml = GlobalConfiguration.Configuration.Formatters.XmlFormatter;
xml.UseXmlSerializer = true; 
```

[此 web-api 概述](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#xml_media_type_formatter)中的更多信息

# python-sphinx - 如何使用 -D 参数指定 html_theme_path 到 sphinx-build？

> ID：12263347
> 
> 赞同：1
> 
> 时间：2012-09-04T12:18:28.463
> 
> 标签：python-sphinx

我正在使用[Sphinx](http://sphinx.pocoo.org/)生成我的一些项目的文档。我编写了一个简单的构建脚本，它克隆了他们所有的 git repos，找到 docs 目录并执行：

```
sphinx-build -b html -D html_theme=treffynnon -D html_theme_path=/home/user/_themes /home/user/sphinx/src /home/user/output/docs 
```

不幸的是，虽然`html_theme`设置正确，`html_theme_path`但没有。这当然会导致 Sphinx 在找不到主题时吐出错误。

我应该如何格式化这个命令？甚至可以以`html_theme_path`这种方式指定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:23:52.830

这看起来像是一个已知的错误：[https ://bitbucket.org/birkenfeld/sphinx/issue/925/allow-html_theme_path-to-be-provided-to](https://bitbucket.org/birkenfeld/sphinx/issue/925/allow-html_theme_path-to-be-provided-to)

为了解决这个问题，我刚刚使用 sed 为我在配置文件中进行了替换：

```
sed -i "s|#*html_theme = '.*'|html_theme = 'simonholywell'|g" conf.py                
sed -i "s|#*html_theme_path = .*$|html_theme_path = ['$BASE_DIR/sphinx/_themes']|g" conf.py 
```

由于我的 Sphinx 项目都在 git 中，因此我可以执行以下操作：

```
git checkout -- conf.py 
```

在完成构建过程后删除 sed 引入的更改。

# jquery - Jquery下拉搜索rails 2

> ID：12263351
> 
> 赞同：1
> 
> 时间：2012-09-04T12:18:40.777
> 
> 标签：jquery, ruby-on-rails

如何进行选择（下拉）搜索。我有 3 个选择，当用户选择下拉列表时，结果 div 将重新加载以显示主题的结果。

```
Senario:

     select year | select semester | select course

    <div id="result">
     list of subjects base on the 3 selections
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:02:18.130

我不确定下面的代码是否适用于 rails 2.3，但它适用于 rails 3

```
$("#third_select_box_id").change ->
  first_select_box_data = $("#first_select_box_id").val()
  second_select_box_data = $("#second_select_box_id").val()
  third_select_box_data = $("#third_select_box_id").val()
  #add code to check that the first n second dropdown list have some data that has been    selected
  if (the data has been selected in all dropdown lists then )
    $.ajax
      type: "GET"
      data: "year="+first_select_box_data+"&semester="+second_select_box_data+"&course="+third_select_box_data
      url:"/courses/get_results" 
```

如果即使没有选择年份或学期也想显示数据，请不要在上面的咖啡脚本中进行检查。在路线中

```
resources: courses do
  get 'get_results'
end 
```

在课程控制器

```
def get_results
  @results = #ur logic to collect all results based on received params. Handle the condition that year or semester isnt selected(if u want to)
  respond_to do |format|
    format.js{}
  end
end 
```

在 get_results.js.haml

```
$("#result").html("#{escape_javascript(render :partial => 'results')}") 
```

在 _results.html.haml

```
#ur logic to display the @results 
```

请考虑使用数据表进行列表，因为它会提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:29:37.653

发送 ajax 并收集搜索结果。在 search.js.haml 中，将 div 'result' 替换为将列出搜索结果的部分内容。

# android - 偏好android错误

> ID：12263353
> 
> 赞同：0
> 
> 时间：2012-09-04T12:18:52.490
> 
> 标签：android

我的这一行有问题，eclipse 给我写信“addPreferencesFromResource 未为 MainActivity 定义”，并在这一行为我写了错误：

```
addPreferencesFromResource(R.xml.preferences); 
```

我也进口：

```
import android.net.ConnectivityManager;
import android.net.wifi.WifiManager;
import android.os.BatteryManager;
import android.os.Bundle;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.telephony.TelephonyManager;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.CheckBox;
import android.preference.PreferenceActivity;
import android.widget.SeekBar;
import android.view.View.OnClickListener;
import android.preference.EditTextPreference;
import android.preference.PreferenceActivity;
import android.preference.PreferenceManager; 
```

我该如何解决？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:21:04.447

`addPreferenceFromResource`是一种`PreferenceActivity`方法。确保您的 MainActivity 扩展它。

# rhino-mocks-3.5 - 使用不同的 T 存根通用方法

> ID：12263357
> 
> 赞同：0
> 
> 时间：2012-09-04T12:19:04.003
> 
> 标签：rhino-mocks-3.5

我有一个带有通用方法的服务工厂`GetService`。根据我所传递的信息，`T`它可以让我为该特定课程提供服务。

现在我有一个方法，它使用多个这些服务，我需要对所有这些服务进行存根。`Ex: GetService<Coffee> , GetService<Tea>`.

```
mockrepo.Stub(x => x.GetService<Coffee>().Expect(c => c.RetrieveList(coffeeCollection)).IgnoreArguments());
mockrepo.Stub(x => x.GetService<Tea>().Retrieve(1)).Return(testrefDataRefEle1); 
```

在上面的代码中，在第二个存根上出现错误“对象引用未设置为对象的实例”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:53:51.773

你不能在 Rhino.Mocks 中做这样的递归模拟。您必须为具有该`Retrieve`方法的任何对象创建一个存根并将其设置为 return `testrefDataRefEle1`。然后设置存根`GetService<Tea>`以返回另一个模拟对象。

# sql - 从 access 2007 更改为 2010 后查询出错

> ID：12263362
> 
> 赞同：0
> 
> 时间：2012-09-04T12:19:17.560
> 
> 标签：sql, ms-access, ms-access-2007, ms-access-2010

我制作了一个 MS Access db 应用程序，它工作正常。

当我想从 2007 年到 2010 年更改计算机和访问版本时。当我想查看查询结果时，它会显示错误。我可以更改我的查询还是其他错误？

> 我的查询：

```
SELECT Kalendar.id_kalendar, Os_udaje.Meno, Os_udaje.Priezvisko, Os_udaje.id_os_udaje
FROM Os_udaje, Kalendar
WHERE ((((Kalendar.id_kalendar) Between [Pociatocný dátum] And [Koncový dátum]))) 
AND ((Kalendar.volno)=No) 
AND ((Kalendar.vikend)=No) 
AND (((Os_udaje.Nastupil)< Kalendar.id_kalendar ) AND ((Os_udaje.Odisiel)>Kalendar.id_kalendar)) 
AND ((NOT Exists (SELECT *
              FROM Pracoval
              WHERE Os_udaje.id_os_udaje = Pracoval.id_os_udaje
              AND Kalendar.id_kalendar = Pracoval.id_kalendar))) 
AND ((NOT Exists (SELECT *
              FROM REZERVACIA 
              WHERE Kalendar.id_kalendar BETWEEN REZERVACIA.platnost_od AND REZERVACIA.platnost_do 
              AND Os_udaje.id_os_udaje = REZERVACIA.id_os_udaje))) 
AND ((NOT Exists (SELECT *
              FROM DOVOLENKA 
              WHERE Kalendar.id_kalendar BETWEEN DOVOLENKA.od AND DOVOLENKA.do 
              AND Os_udaje.id_os_udaje = DOVOLENKA.id_os_udaje))); 
```

> 错误：

```
This expression is typed incorrectly, or it is too complex to be evaluated. For example, a numeric expression may contain too many complicated elements. Try simplifying the expression by assigning parts of the expression to variables. (Error 3071) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:57:33.557

关于这个查询在 Access 2007 中执行但在 Access 2010 中不是这样的事实：很难说为什么会出现这种情况，因为两者之间的大多数已发布差异都处理特定数据类型而不是允许 SQL 的规范句法。

正如其他评论所暗示的那样，我猜罪魁祸首在于`AND NOT EXISTS (SELECT * FROM ...)`条件句。

话虽如此，我将提出一个等效的查询（理论上），以及提高其性能的技巧。

### 简化示例

首先，让我们解决这个查询试图使用单词完成的任务。`Os_udaje`您正在寻找具有某些相关字段的表和的交叉连接（笛卡尔积），`Kalendar`并删除在三个不同表中具有满足两个条件的相关记录的行。后一个要求是通过`NOT EXISTS`子句来完成的，这就是我们要重写的。

举个例子：

```
SELECT TableA.Field1, TableB.Field2
FROM TableA, TableB WHERE
NOT EXISTS (SELECT *
    FROM TableC
    WHERE TableA.Field1=TableC.Field1
    AND TableB.Field2=TableC.Field2); 
```

无需详细说明原因，我们可以将此查询重写为具有一组不同`WHERE`条件的三表交叉连接：

```
SELECT TableA.Field1, TableB.Field2
FROM TableA, TableB, TableC WHERE
    (TableA.Field1=TableC.Field1)
    AND
    (TableB.Field2<>TableC.Field2); 
```

### 完全等价查询

将此关系应用于原始查询，我们有：

```
SELECT Kalendar.id_kalendar, Os_udaje.Meno, Os_udaje.Priezvisko, Os_udaje.id_os_udaje
FROM Os_udaje, Kalendar, Pravocal, REZERVACIA, DOVOLENKA
WHERE ((((Kalendar.id_kalendar) Between [Pociatocný dátum] And [Koncový dátum]))) 
AND ((Kalendar.volno)=No) 
AND ((Kalendar.vikend)=No) 
AND (((Os_udaje.Nastupil)< Kalendar.id_kalendar ) AND ((Os_udaje.Odisiel)>Kalendar.id_kalendar)) 
AND (
    Os_udaje.id_os_udaje = Pracoval.id_os_udaje
    AND Kalendar.id_kalendar <> Pracoval.id_kalendar) 
AND (
    Kalendar.id_kalendar BETWEEN REZERVACIA.platnost_od AND REZERVACIA.platnost_do 
    AND Os_udaje.id_os_udaje <> REZERVACIA.id_os_udaje) 
AND (
    Kalendar.id_kalendar BETWEEN DOVOLENKA.od AND DOVOLENKA.do 
    AND Os_udaje.id_os_udaje <> DOVOLENKA.id_os_udaje); 
```

### 提高性能的技巧

由于此查询执行 5 表交叉连接，因此效率可能非常低（取每个表中行数的乘积）。提高性能的两种技术是：

使用`INNER JOIN`语句而不是完整的笛卡尔连接：

```
SELECT * FROM
(SELECT  * FROM Table1,Table2) As SubQry 
INNER JOIN
Table3
ON (SubQry.Field2=Table3.Field2 AND SubQry.Field1<>Table3.Field1); 
```

首先执行子查询条件以减少行数：

```
SELECT Kalendar2.id_kalendar, Os_udaje.Meno, Os_udaje.Priezvisko, Os_udaje.id_os_udaje
FROM Os_udaje,
(SELECT * FROM Kalendar
WHERE ((((Kalendar.id_kalendar) Between [Pociatocný dátum] And [Koncový dátum]))) 
AND ((Kalendar.volno)=No) 
AND ((Kalendar.vikend)=No)) AS Kalendar2,
Pravocal,
... 
```

### 可能的完整答案

我无法测试这个查询，也不知道`BETWEEN`语句是否可以作为`JOIN`条件，但这里是使用连接和嵌套子查询的答案：

```
SELECT Kalendar.id_kalendar, Os_udaje.Meno, Os_udaje.Priezvisko, Os_udaje.id_os_udaje
FROM
(((
    SELECT Kalendar.id_kalendar, Os_udaje.Meno, Os_udaje.Priezvisko, Os_udaje.id_os_udaje
    FROM Os_udaje, Kalendar
    WHERE ((((Kalendar.id_kalendar) Between [Pociatocný dátum] And [Koncový dátum]))) 
    AND ((Kalendar.volno)=No) 
    AND ((Kalendar.vikend)=No) 
    AND (((Os_udaje.Nastupil)< Kalendar.id_kalendar ) AND ((Os_udaje.Odisiel)>Kalendar.id_kalendar))
) As SubQry
INNER JOIN
Pravocal
ON
    (SubQry.id_os_udaje = Pracoval.id_os_udaje
    AND SubQry.id_kalendar <> Pracoval.id_kalendar))
INNER JOIN
REZERVACIA
ON
    (SubQry.id_kalendar BETWEEN REZERVACIA.platnost_od AND REZERVACIA.platnost_do 
    AND SubQry.id_os_udaje <> REZERVACIA.id_os_udaje))
INNER JOIN
DOVOLENKA
ON
    (SubQry.id_kalendar BETWEEN DOVOLENKA.od AND DOVOLENKA.do 
    AND SubQry.id_os_udaje <> DOVOLENKA.id_os_udaje); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:09:38.663

问题出在我的操作系统的设置中。我已将数据集格式化为带有空格的“1\. 1\. 2012”，并且我正在使用没有空格的访问格式“1.1.2012”。当我在 Windows 中更改日期格式时，所有开始工作正常。

# spring - 长度为 1 的列表的 Spring Restful 问题

> ID：12263363
> 
> 赞同：1
> 
> 时间：2012-09-04T12:19:19.290
> 
> 标签：spring, list, rest

我们有一个 json，它显示了一个对象列表，如下所示：

```
skillCheckAnswers: [
{
optionId: 6786,
optionText: "Copy constructor",
optionWeight: "1.00"
},
{
optionId: 6787,
optionText: "Friend constructor",
optionWeight: "2.00"
},
{
optionId: 6788,
optionText: "Default constructor",
optionWeight: "3.00"
},
{
optionId: 6789,
optionText: "Parameterized constructor",
optionWeight: "4.00"
}
] 
```

只要列表中有超过 1 个对象就可以了。但如果列表仅包含 1 项，则 json 显示：

```
{
optionId: 6785,
optionText: "Friend class",
optionWeight: "4.00"
} 
```

请注意，第二个 Json 不是作为 List 而是作为单个对象给出的（缺少方括号 []）。

有没有办法可以用方括号输出长度为 1 的列表？

编辑——我们可以将 foreach 用于第一个 JSON，但如果对象的数量变为 1，则 foreach 开始给出错误。为了处理这个问题，我们有一个 if else 循环来检查列表的长度是否为 1 或大于 1。如果列表很长，然后我们将其作为单个对象处理。这似乎是一个愚蠢的解决方案，我想会有一个简单的出路。

谁能告诉我这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:35:42.313

您应该执行以下操作：

从弹簧控制器：

```
@RequestMapping(method = RequestMethod.GET, value = "/myquestions")
public @ResponseBody
List<Answer> generateQuestions() {

  List<Answer> answers = new ArrayList<Answer>();
  Answer ans1 = new Answer();
  ans1.setOptionId("6785");
  ans1.setOptionText("Friend class");
  ans1.setOptionWeight("4.00");
  answers.add(ans1);

  return answers;
} 
```

输出如下：

```
[
   {
       "optionId": "6785",
       "optionText": "Friend class",
       "optionWeight": "4.00"
   }
] 
```

到目前为止，我了解到，您的问题与 JSON 转换器有关。我已经使用 Spring MappingJacksonHttpMessageConverter 消息转换器进行了测试。您可以查看 Spring 文档以了解如何配置 JSON 转换器。[http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch18s02.html](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch18s02.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:38:16.850

你提到你使用Spring。Spring 不会自动为您提供的 restful API 处理 JSON 转换。你可以把这样的东西放在你的conext文件中：

您可以使用[org.springframework.http.converter.json.MappingJacksonHttpMessageConverter](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/http/converter/json/MappingJacksonHttpMessageConverter.html)并在您的上下文文件中设置它来为您进行 JSON 转换。

然后，您可以使用 Spring MVC 的 @ResponseBody 注释来提供一个安静的服务，而不必手动编码 JSON 响应。

# jquery - JQuery 将隐藏元素检测为可见，将可见元素检测为隐藏

> ID：12263364
> 
> 赞同：0
> 
> 时间：2012-09-04T12:19:20.507
> 
> 标签：jquery, ruby-on-rails-3

我试图根据元素是否隐藏来调用一些函数。奇怪的是，相似的条件在两个元素的相同代码中运行良好，保存一个。

我正在做这样的事情：

1.  单击链接，隐藏链接并显示备用链接

> ```
>  $('#link1').click(function() {
>       $('#alt_link1').show();
>       $('#link1').hide();
>       $('#link2').hide();
>       $('#link3').show(); 
> ```

1.  基于隐藏链接的知识，我做了其他事情

> ```
>  if ( $("#link1").is(':hidden') && $("#link2").is(':hidden') ) {
>     $('#link3').click(function() {
>     ..... }
>  } 
> ```

现在点击了链接 1，链接 1 和链接 2 应该被隐藏，链接 3 应该是可见的，它们实际上是，正如我在 Firebug 中看到的那样，但仅在一种情况下，JQuery 检测到条件中的隐藏元素是可见的，可见的也是隐藏的。现在，在我在同一个代码文件中的其余两种情况下，类似的条件都可以正常工作，但奇怪的是，另一种情况却没有。

我尝试以多种不同的方式进行此操作，但均无济于事。我真的坚持这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:56:26.973

如果链接一和二被隐藏，则立即评估 if （参考您的评论，它们在相同的 if 正文中）如果没有为链接 3 附加事件处理程序，则附加事件处理程序。如果您稍后更改 link1 和 link2 的状态，这不会影响您的第二个片段的结果，除非再次执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:23:55.007

假设以下顺序，并假设只需单击一次绑定（仅单击一次），您应该不会真正看到原始代码存在问题：

```
$('#link1').one('click', function() {
      $('#alt_link1').show();
      $('#link1').hide();
      $('#link2').hide();
      $('#link3').show();
 if ( $("#link1").is(':hidden') && $("#link2").is(':hidden') ) {
    $('#link3').one('click', function() {
    ..... }
 }
}); 
```

# charts - PHPExcel 饼图标签和图例

> ID：12263366
> 
> 赞同：5
> 
> 时间：2012-09-04T12:19:26.067
> 
> 标签：charts, phpexcel, pie-chart

我的库 PHPExcel (1.7.7) 有问题：当我想创建饼图时，不显示标签和图例。但是，对于其他图形，我没有这个问题。你有什么解决办法吗？

谢谢。

这是使用的代码：

```
$categories = array(
new PHPExcel_Chart_DataSeriesValues('String', 'RECAPITULATIF!$B$6:$B$8', null, 3),
    );

$values = array(
new PHPExcel_Chart_DataSeriesValues('Number',  'RECAPITULATIF!$F$6:$F$8', null, 3),
);

$series = new PHPExcel_Chart_DataSeries(
    PHPExcel_Chart_DataSeries::TYPE_PIECHART,       // plotType
    PHPExcel_Chart_DataSeries::GROUPING_CLUSTERED,  // plotGrouping
    array(0),                                       // plotOrder
    null,                                           // plotLabel
    $categories,                                    // plotCategory
    $values                                         // plotValues
    );

$plotarea = new PHPExcel_Chart_PlotArea(null, array($series));
$title = new PHPExcel_Chart_Title('Pie chart');
$legend = new PHPExcel_Chart_Legend(PHPExcel_Chart_Legend::POSITION_RIGHT, null, false);

$chart = new PHPExcel_Chart(
    'chart2',                                       // name
    $title,                                         // title
    $legend,                                        // legend
    $plotarea,                                      // plotArea
    true,                                           // plotVisibleOnly
    0,                                              // displayBlanksAs
    null,                                           // xAxisLabel
    null                                            // yAxisLabel
    ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-12T06:27:49.800

我们必须通过声明 setShowVal(TRUE) 来启用数据标签。

找到我应用的以下代码

```
$series = new PHPExcel_Chart_DataSeries(
PHPExcel_Chart_DataSeries::TYPE_BARCHART,       // plotType
PHPExcel_Chart_DataSeries::GROUPING_CLUSTERED,  // plotGrouping
array(0, 1),                                    // plotOrder
$labels,                                        // plotLabel
$categories,                                    // plotCategory
$values                                         // plotValues
);

$layout1 = new PHPExcel_Chart_Layout();
$layout1->setShowVal(TRUE);      // Initializing the data labels with Values
$layout1->setShowPercent(TRUE);  // Initializing the data labels with Percentages 
```

申请的地块面积需要申报

```
$series->setPlotDirection(PHPExcel_Chart_DataSeries::DIRECTION_COL);
$plotarea = new PHPExcel_Chart_PlotArea($layout1, array($series));
$legend = new PHPExcel_Chart_Legend(PHPExcel_Chart_Legend::POSITION_RIGHT, null, false);
$chart = new PHPExcel_Chart(
        'chart1',                                       // name
        null,                                           // title
        $legend,                                        // legend
        $plotarea,                                      // plotArea
        true,                                           // plotVisibleOnly
        0,                                              // displayBlanksAs
        null,                                           // xAxisLabel
        null                                            // yAxisLabel
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T12:35:25.410

你是不是因为忘记设置 xAxisLabel 和 yAxisLabel 而遇到这个问题？

尝试创建一个数组来获取你想要设置的标签，然后像你一样将它加载到这个数组中，但是设置 plotLabel。例如：对于标签：

```
$labels = array(
    new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$B$1', null, 1),
    new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$C$1', null, 1),
);

$series = new PHPExcel_Chart_DataSeries(
PHPExcel_Chart_DataSeries::TYPE_PIECHART,       // plotType
PHPExcel_Chart_DataSeries::GROUPING_CLUSTERED,  // plotGrouping
array(0),                                       // plotOrder
$labels,                                           // plotLabel <----- u were setting null
$categories,                                    // plotCategory
$values                                         // plotValues
); 
```

然后你可以做这样的事情：

```
$xAxisLabel = new PHPExcel_Chart_Title('xAxisLabel');
$yAxisLabel = new PHPExcel_Chart_Title('yAxisLabel'); 
```

接着：

```
$chart = new PHPExcel_Chart(
'chart2',                                       // name
$title,                                         // title
$legend,                                        // legend
$plotarea,                                      // plotArea
true,                                           // plotVisibleOnly
0,                                              // displayBlanksAs
xAxisLabel,                                     // xAxisLabel
yAxisLabel                                      // yAxisLabel
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-08T11:59:28.370

我知道已经很晚了，但我认为应该在这里给出答案。我正在使用 PHPExcel 1.8.0 版。我有同样的问题，我找到了解决方案。

要显示图例，您必须将`plotGrouping`选项设置为`null`

```
$series = new PHPExcel_Chart_DataSeries(
    PHPExcel_Chart_DataSeries::TYPE_PIECHART,       // plotType
    null,                                           // plotGrouping
    range(0, count($values)-1),                     // plotOrder
    $labels,                                        // plotLabel
    $categories,                                    // plotCategory
    $values                                         // plotValues
); 
```

为了显示饼图标签，您必须使用布局启用数据标签。

```
$layout = new PHPExcel_Chart_Layout();
$layout->setShowVal(TRUE);      
$plotarea = new PHPExcel_Chart_PlotArea(null, array($series)); 
```

# ios - 在 ios UIKeyboard 上启用了向上键和向下键

> ID：12263371
> 
> 赞同：0
> 
> 时间：2012-09-04T12:19:47.293
> 
> 标签：ios, cocoa-touch, uikeyboard

我们正在尝试创建一个 uikeyboard，它将收集用户在每次按下字符时的上下键。常规的 UITextField 事件只给我们按下的变化，而不是两个时间。

我曾考虑尝试在键盘上放置一个透明视图，但无法获得对键盘视图的引用。还想过创建自己的键盘，但找不到任何开源或在线示例。

最终目标是在键盘上被按下的每个键上获得 2 次回调，并为每次点击创建一个具有 2 个时间戳（一个用于向上，一个用于向下）和按下的字符的事件。

**已解决：** 使用实现 touchesBegin、touchesMoved、touchesEnded 方法并使用 hiTest 函数将触摸转发回主 UIWindow 的自定义 UIView 解决。

乌里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:32:24.943

通过将视图添加到窗口本身（在键盘弹出之后！），您可以在整个窗口上放置一个透明视图。记录所有触地得分和触地得分并转发。当您收到按键被按下的委托消息时，您想知道最后一次触摸对。

# delphi - 从泛型的参数继承在 Delphi XE 中不起作用

> ID：12263372
> 
> 赞同：4
> 
> 时间：2012-09-04T12:19:49.233
> 
> 标签：delphi, generics, inheritance, delphi-xe

我一直在尝试通过覆盖该基类中定义的虚拟方法来扩展一堆从同一基类继承的库类。修改总是相同的，所以我决定创建一个由库类类型参数化的泛型类，而不是创建库类的 N 个后继类，它继承自参数指定的类并覆盖基类的方法。问题是下面的代码无法编译，编译器不允许从 T 继承：

```
program Project1;

type
  LibraryBaseClass = class
    procedure foo; virtual;
  end;

  LibraryClassA = class(LibraryBaseClass)
  end;

  LibraryClassB = class(LibraryBaseClass)
  end;

  LibraryClassC = class(LibraryBaseClass)
  end;

  LibraryClassD = class(LibraryBaseClass)
  end;

  MyClass<T:LibraryBaseClass> = class(T) //Project1.dpr(20) Error: E2021 Class type required
    procedure foo; override;
  end;

procedure LibraryBaseClass.foo; 
begin
end;

procedure MyClass<T>.foo; 
begin
end;

begin
  MyClass<LibraryClassA>.Create.foo;
  MyClass<LibraryClassB>.Create.foo;
  MyClass<LibraryClassC>.Create.foo;
  MyClass<LibraryClassD>.Create.foo;
end. 
```

任何想法如何使这项工作？也许有一种方法可以诱使编译器接受等价的东西，例如，从`Dictionary<T,T>`编译器继承而不会出现问题。

或者如果你和我有同样的目标你会怎么做？请记住，在实际情况中，我需要覆盖多个方法并添加一些数据成员。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T14:12:09.907

正如您已经被告知的，这对 C++ 模板有效，对 C# 或 Delphi 泛型无效。模板和泛型之间的根本区别在于，从概念上讲，每个模板实例化都是一个完全独立编译的类型。对于所有可能的类型，泛型编译一次。从类型参数派生时这根本不可能，因为您可以获得诸如

```
type
  LibraryBaseClass = class
    procedure foo; virtual;
  end;

  LibraryClassA = class(LibraryBaseClass)
    procedure foo; reintroduce; virtual;
  end;

  LibraryClassB = class(LibraryBaseClass)
  end;

  MyClass<T:LibraryBaseClass> = class(T)
    procedure foo; override; // overrides LibraryClass.foo or LibraryClassA.foo ?
  end; 
```

然而这在 C++ 中可以工作，因为在 C++`MyClass<LibraryClassA>`中`MyClass<LibraryClassB>`是完全分离的，并且在实例化时`MyClass<LibraryClassA>`，在找到基类方法之前`foo`查找并找到。`LibraryClassA`

> 或者如果你和我有同样的目标你会怎么做？请记住，在实际情况中，我需要覆盖多个方法并添加一些数据成员。

可以在运行时创建类型，但几乎可以肯定这是一个*非常**糟糕*的主意。我不得不利用它一次，并且很想避免它。它包括读取 VMT、创建它的副本、在`LibraryBaseClass.foo`某处存储原始方法指针的副本、修改 VMT 以指向自定义方法，以及从该覆盖函数调用原始存储的方法指针。它当然没有内置的语言支持，也没有办法从代码中引用派生类型。

我后来也曾在 C# 中对此有过需求，但在那种情况下，我很幸运只有四个可能的基类。我最终手动创建了四个独立的派生类，实现了四次方法，并使用查找结构 ( `Dictionary<,>`) 将正确的基类映射到正确的派生类。

请注意，对于特定情况有*一个*技巧不适用于您的问题，但可能对其他读者有所帮助：如果您的派生类必须全部实现相同的接口，并且不需要新的数据成员或函数覆盖，则可以避免编写多次执行：

```
type
  IMySpecialInterface = interface
    procedure ShowName;
  end;

  TMySpecialInterfaceHelper = class helper for TComponent
    procedure ShowName;
  end;

procedure TMySpecialInterfaceHelper.ShowName;
begin
  ShowMessage(Name);
end;

type
  TLabelWithShowName = class(TLabel, IMySpecialInterface);
  TButtonWithShowName = class(TButton, IMySpecialInterface); 
```

在这种情况下，类帮助方法实现将是接口方法的有效实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T18:09:09.227

在 Delphi XE 及更高版本中，您还可以尝试一些完全不同的东西：[`TVirtualMethodInterceptor`](http://docwiki.embarcadero.com/CodeSamples/en/TVirtualMethodInterceptor_%28Delphi%29).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T13:59:50.520

Delphi 泛型根本无法实现您尝试做的事情。

对于它的价值，等效代码在 C# 泛型中也是无效的。但是，您的设计可以使用 C++ 模板。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T14:13:29.640

我可能误解了您对问题的描述，但从您的简化示例来看，您似乎可以“扭转局面”并在中间的层次结构中插入一个类，如下所示：

```
program Project1;

type
  LibraryBaseClass = class
    procedure foo; virtual;
  end;

  LibraryBaseFooClass = class(LibraryBaseClass)
    procedure foo; override;
  end;

  LibraryClassA = class(LibraryBaseFooClass)
  end;

  LibraryClassB = class(LibraryBaseFooClass)
  end;

  LibraryClassC = class(LibraryBaseFooClass)
  end;

  LibraryClassD = class(LibraryBaseFooClass)
  end;

procedure LibraryBaseClass.foo; 
begin
end;

procedure LibraryBaseFooClass.foo; 
begin
end;

begin
  LibraryClassA.Create.foo;
  LibraryClassB.Create.foo;
  LibraryClassC.Create.foo;
  LibraryClassD.Create.foo;
end. 
```

# android - 从android中的指定组获取联系人

> ID：12263377
> 
> 赞同：4
> 
> 时间：2012-09-04T12:20:07.753
> 
> 标签：android, android-contacts

我正在尝试从一组已知 id 的特定组中获取联系人。我能够获取该组中的组 id 和联系人姓名。但我无法获取联系人号码。尝试了一些来自谷歌搜索的解决方案，但每次我得到的电话号码与组 id 相同，如果我使用 Phone.number、Phone.DISPLAY_NAME 查询组的电话号码和联系人姓名。如果我使用以下方法我收到错误请帮助我找出我的错误代码。

代码 ：

```
 protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.group_contacts);
        addGroups = (Button) findViewById(R.id.selectGroup);

        groupAdapter = new SimpleCursorAdapter(getApplicationContext(),
                android.R.layout.select_dialog_singlechoice, GroupCursor(),
                new String[] { ContactsContract.Groups.TITLE },
                new int[] { android.R.id.text1 });
        setListAdapter(groupAdapter);
        getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);

        addGroups.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent intent = new Intent(myGroups.this, Main.class);
                Bundle carry = new Bundle();
                carry.putStringArrayList("numbers", cNumbers);
                carry.putStringArrayList("name", cNames);
                intent.putExtras(carry);
                setResult(RESULT_OK, intent);
                finish();
            }
        });

    }

    private Cursor GroupCursor() {

        String[] projection = { ContactsContract.Groups.TITLE,
                ContactsContract.Groups._ID };
        Cursor gCursor = getContentResolver().query(
                ContactsContract.Groups.CONTENT_URI, projection, null,                   null,
                ContactsContract.Groups.TITLE);

        // int idcolumn = gCursor.getColumnIndex(ContactsContract.Groups._ID);
        // String id = gCursor.getString(idcolumn);

        // Log.d(E, "group id : " + id );
        return gCursor;

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        super.onListItemClick(l, v, position, id);
        Log.d(E, "id : " + id);
        String groupId = Long.toString(id);

        String[] cProjection = { Phone.NUMBER, Phone.DISPLAY_NAME ,Contacts.DISPLAY_NAME, Contacts._ID};

        Cursor groupCursor = getContentResolver().query(Data.CONTENT_URI,
                cProjection,
                CommonDataKinds.GroupMembership.GROUP_ROW_ID + "= ?",
                new String[]{groupId}, null);
        if (groupCursor != null) {
            groupCursor.moveToFirst();
            do {

                int nameCoumnIndex = groupCursor
                        .getColumnIndex(Phone.DISPLAY_NAME);

                String name = groupCursor.getString(nameCoumnIndex);

                String cId = groupCursor.getString(groupCursor.getColumnIndex(Contacts._ID));

                Cursor numberCursor = getContentResolver().query(Phone.CONTENT_URI, new String[]{Phone.NUMBER}, Phone._ID +"="+cId, null, null);
                numberCursor.moveToFirst();
                int numberColumnIndex = numberCursor
                        .getColumnIndex(Phone.NUMBER);
                Log.d(E, "numberindex : " + numberColumnIndex);

                String number = numberCursor.getString(numberColumnIndex);

                cNumbers.add(number);

                Log.d(E, "contact " + name + ":" + number);

                cNames.add(name);
            } while (groupCursor.moveToNext());
        }
    }
} 
```

日志 ：

```
 09-04 17:59:24.943: D/dalvikvm(18084): GC_EXTERNAL_ALLOC freed 23K, 48% free 2844K/5379K, external 1032K/1039K, paused 24ms
09-04 17:59:26.054: D/(18084): id : 14
09-04 17:59:26.074: D/(18084): numberindex : 0
09-04 17:59:26.074: D/AndroidRuntime(18084): Shutting down VM
09-04 17:59:26.074: W/dalvikvm(18084): threadid=1: thread exiting with uncaught exception (group=0x40015568)
09-04 17:59:26.084: E/AndroidRuntime(18084): FATAL EXCEPTION: main
09-04 17:59:26.084: E/AndroidRuntime(18084): android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
09-04 17:59:26.084: E/AndroidRuntime(18084):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at android.database.CursorWrapper.getString(CursorWrapper.java:135)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at hm.swarna.groupsms.myGroups.onListItemClick(myGroups.java:117)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at android.widget.ListView.performItemClick(ListView.java:3535)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1827)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at android.os.Handler.handleCallback(Handler.java:587)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at android.os.Looper.loop(Looper.java:130)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at android.app.ActivityThread.main(ActivityThread.java:3703)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at java.lang.reflect.Method.invokeNative(Native Method)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at java.lang.reflect.Method.invoke(Method.java:507)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
09-04 17:59:26.084: E/AndroidRuntime(18084):    at dalvik.system.NativeStart.main(Native Method)
09-04 17:59:27.556: I/Process(18084): Sending signal. PID: 18084 SIG: 9 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T07:07:51.650

尝试在 onListItemClick 方法中使用以下代码：

```
long groupId = id;
    String[] cProjection = { Contacts.DISPLAY_NAME, GroupMembership.CONTACT_ID };

    Cursor groupCursor = getContentResolver().query(
            Data.CONTENT_URI,
            cProjection,
            CommonDataKinds.GroupMembership.GROUP_ROW_ID + "= ?" + " AND "
                    + ContactsContract.CommonDataKinds.GroupMembership.MIMETYPE + "='"
                    + ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE + "'",
            new String[] { String.valueOf(groupId) }, null);
    if (groupCursor != null && groupCursor.moveToFirst())
    {
        do
        {

            int nameCoumnIndex = groupCursor.getColumnIndex(Phone.DISPLAY_NAME);

            String name = groupCursor.getString(nameCoumnIndex);

            long contactId = groupCursor.getLong(groupCursor.getColumnIndex(GroupMembership.CONTACT_ID));

            Cursor numberCursor = getContentResolver().query(Phone.CONTENT_URI,
                    new String[] { Phone.NUMBER }, Phone.CONTACT_ID + "=" + contactId, null, null);

            if (numberCursor.moveToFirst())
            {
                int numberColumnIndex = numberCursor.getColumnIndex(Phone.NUMBER);
                do
                {
                    String phoneNumber = numberCursor.getString(numberColumnIndex);
                    Log.d("your tag", "contact " + name + ":" + phoneNumber);
                } while (numberCursor.moveToNext());
                numberCursor.close();
            }
        } while (groupCursor.moveToNext());
        groupCursor.close();
    } 
```

在查询属于指定组的联系人时，您需要指定 mimetype。而且由于单个联系人可以有多个电话号码，您可能需要查询所有电话号码。

**编辑：** 要获得至少有一个电话号码联系人的所有组，您可以使用以下查询：

```
ContentResolver cr = getContentResolver();
Uri groupsUri = ContactsContract.Groups.CONTENT_SUMMARY_URI;
String where = "((" + ContactsContract.Groups.GROUP_VISIBLE + " = 1) AND (" 
                + ContactsContract.Groups.SUMMARY_WITH_PHONES + "!= 0))";
Cursor cursor = cr.query(groupsUri, null, where, null, null); 
```

至于从指定组中获取具有电话号码的联系人 - 我不知道简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T09:55:35.403

这是您所要求的答案。从特定组#name 获取所有电话号码。这个意大利面肯定可以更短，如果你花一些时间来优化它。

```
public ArrayList<String> getAllNumbersFromGroupId(String navn)
{
    String selection = ContactsContract.Groups.DELETED + "=? and " + ContactsContract.Groups.GROUP_VISIBLE + "=?";
    String[] selectionArgs = { "0", "1" };
    Cursor cursor = context.getContentResolver().query(ContactsContract.Groups.CONTENT_URI, null, selection, selectionArgs, null);
    cursor.moveToFirst();
    int len = cursor.getCount();

    ArrayList<String> numbers = new ArrayList<String>();
    for (int i = 0; i < len; i++)
    {
        String title = cursor.getString(cursor.getColumnIndex(ContactsContract.Groups.TITLE));
        String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Groups._ID));

        if (title.equals(navn))
        {
            String[] cProjection = { Contacts.DISPLAY_NAME, GroupMembership.CONTACT_ID };

            Cursor groupCursor = context.getContentResolver().query(
                    Data.CONTENT_URI,
                    cProjection,
                    CommonDataKinds.GroupMembership.GROUP_ROW_ID + "= ?" + " AND "
                            + ContactsContract.CommonDataKinds.GroupMembership.MIMETYPE + "='"
                            + ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE + "'",
                    new String[] { String.valueOf(id) }, null);
            if (groupCursor != null && groupCursor.moveToFirst())
            {
                do
                {

                    int nameCoumnIndex = groupCursor.getColumnIndex(Phone.DISPLAY_NAME);

                    String name = groupCursor.getString(nameCoumnIndex);

                    long contactId = groupCursor.getLong(groupCursor.getColumnIndex(GroupMembership.CONTACT_ID));

                    Cursor numberCursor = context.getContentResolver().query(Phone.CONTENT_URI,
                            new String[] { Phone.NUMBER }, Phone.CONTACT_ID + "=" + contactId, null, null);

                    if (numberCursor.moveToFirst())
                    {
                        int numberColumnIndex = numberCursor.getColumnIndex(Phone.NUMBER);
                        do
                        {
                            String phoneNumber = numberCursor.getString(numberColumnIndex);
                            numbers.add(phoneNumber);
                        } while (numberCursor.moveToNext());
                        numberCursor.close();
                    }
                } while (groupCursor.moveToNext());
                groupCursor.close();
            }
            break;
        }

        cursor.moveToNext();
    }
    cursor.close();

    return numbers;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-13T12:13:09.387

我的解决方案

```
public static HashMap<String, String> getContactsForGroup(String groupID, Activity activity){
    Cursor dataCursor = activity.getContentResolver().query(
            ContactsContract.Data.CONTENT_URI,
            new String[]{                                                     // PROJECTION
                    ContactsContract.Data.CONTACT_ID,
                    ContactsContract.Data.DISPLAY_NAME,         // contact name
                    ContactsContract.Data.DATA1                 // group
            },
            ContactsContract.Data.MIMETYPE + " = ? " + "AND " +               // SELECTION
            ContactsContract.Data.DATA1 +    " = ? ",           // set groupID
            new String[]{                                                     // SELECTION_ARGS
                    ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE,
                    groupID
            },
            null);
    dataCursor.moveToFirst();
    HashMap<String, String> map = new HashMap<>();
    while (dataCursor.moveToNext()) //
    {
        String s0 = dataCursor.getString(0);                //contact_id
        String s1 = dataCursor.getString(1);                //contact_name
        String s2 = dataCursor.getString(2);                //group_id
        Log.d("tag", "contact_id: " + s0 + "  contact: " + s1 + "   groupID: "+ s2);
        map.put(s0, s1);
    }
    return map;
} 
```

# ruby-on-rails - 检查网站是否已在搜索引擎和目录中列出的代码

> ID：12263378
> 
> 赞同：2
> 
> 时间：2012-09-04T12:20:08.863
> 
> 标签：ruby-on-rails, seo, bing, yelp, yellow-pages

我目前正在 Rails 中开发一个应用程序，它需要检查一个网站是否已在 Google、Bing、Yahoo、Yelp 和 Yellow Pages 中列出。根据我的研究，最好的方法是在 Google 和 Bing 上检查 site: domain.com 并查找结果并在 Yahoo 目录中检查该域。

还有其他方法吗？我的意思是一些代码片段来检查域的主页或使用他们的 API 或类似的东西。还有如何查看 Yelp 和黄页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:13:35.793

You can use mechanize and write web-style drivers Google: do a search on your domain with this on the search term

```
site:checkmeout360.com
https://www.google.com/search?q=site%3A<SITE_NAME>.com 
```

Try to see how yelp, yahoo, bing and yellow pages do indexing. Then you can use mechanize to automate the searching process for you, you can use mechanize to do the search like above with google, then write asserts (check if stuff you are looking for is on the search result)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:36:27.600

搜索引擎不喜欢按照他们的方式发送的自动查询。

以下是[谷歌对此的评价](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=66357)：

> 未经 Google 事先明确许可， Google 的[服务条款](http://accounts.google.com/TOS)不允许向我们的系统发送任何类型的自动查询。发送自动查询会消耗资源，包括使用任何软件（例如 WebPosition Gold）向 Google 发送自动查询，以确定网站或网页在各种查询的 Google 搜索结果中的排名。除了排名检查，其他类型的未经许可自动访问 Google 也违反了我们的[网站管理员指南](http://support.google.com/webmasters/bin/answer.py?answer=35769)和服务条款。

# javascript - Windows.Networking.EndpointPair 构造函数参数

> ID：12263379
> 
> 赞同：1
> 
> 时间：2012-09-04T12:20:09.493
> 
> 标签：javascript, windows-8, microsoft-metro

我想创建一个新的 EndpointPair 对象：

```
// hostname is a string
// port is an integer

var endpointPair = new Windows.Networking.EndpointPair(null, null, hostname, port); 
```

但我总是得到这个错误：

> 0x800a000d - JavaScript 运行时错误：类型不匹配

我已经尝试过以下方法：

*   将端口转换为字符串
*   为前两个参数传递 "" 而不是 null。（如果此处的文档在备注部分下是正确的，则 null 应该没问题）
*   不传递任何参数，但最终会出现“参数太少”错误消息

最重要的是，有关构造函数的文档已被删除（截至 2012 年 9 月 4 日）：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.networking.endpointpair.endpointpair.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.endpointpair.endpointpair.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:36:31.263

看起来文档完全错误。构造函数实际上是：

```
EndpointPair(Windows.Networking.HostName, string, Windows.Networking.HostName, string); 
```

所以你可以这样使用它：

```
var remoteHost = new Windows.Networking.HostName("foo");
var ep = new Windows.Networking.EndpointPair(null, null, remoteHost, "80"); 
```

当您查看 remoteHost 属性的元数据键入为时，您可以看到这一点`Windows.Networking.HostName`

# android - 使用 Canvas 将圆转换为圆环？

> ID：12263380
> 
> 赞同：3
> 
> 时间：2012-09-04T12:20:23.877
> 
> 标签：android, android-canvas

我正在使用创建圆圈的自定义视图：

```
canvas.drawCircle(width/2, width/2, radius, paint1); 
```

现在，我想从里面清空圆圈，就像[一个戒指](http://i.stack.imgur.com/qgFW9.png)。

绘制另一个较小的白色圆圈会引发另一个问题。我打算让我的视图听取用户点击。我只想听戒指上的点击声*！*

有没有办法排除画布的某些部分？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-15T20:00:40.793

为了画一个圆环（即一个没有填充但只有一个边框的圆，里面的区域是透明的）这样做：

```
Paint myPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
myPaint.setStyle(Paint.Style.STROKE);
int strokeWidth=4;  // or whatever
myPaint.setStrokeWidth(strokeWidth);
myPaint.setColor(0xffff0000);   //color.RED
float radius=(float) (0.5*(w+h)*0.5);
canvas.drawCircle((float)0.5*w, (float)0.5*h, radius, myPaint); 
```

对 drawCircle 的调用也可以用 drawArc 代替，如下面的代码。任何一种方法都行得通。秘诀是将绘画风格设置为 Paint.Style.STROKE。

```
RectF oval = new RectF(w/2 - radius, w/2 - radius, w/2 + radius, w/2 + radius);
canvas.drawArc(oval, 0, 360, false, myPaint); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:24:38.017

要绘制圆环，请使用 drawArc ：

```
RectF oval = new RectF(width/2 - radius, width/2 - radius, width/2 + radius, width/2 + radius);
canvas.drawArc(oval, 0, 360, false, paint1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T08:43:53.253

我通过绘制一个内部白色圆圈并根据我拥有的两个半径长度过滤点击来解决这个问题。

所以，你不能画一个空的圆圈，但你可以让一个圆圈表现得像一个空的圆圈。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-08T14:04:28.123

此解决方案有效：

```
Paint paintPath;

int circleRadius = (int)
    TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 10, context.getResources()
    .getDisplayMetrics());

paintPath = new Paint();
paintPath.setStrokeWidth(circleRadius);
paintPath.setColor(Color.WHITE);
paintPath.setStyle(Paint.Style.FILL_AND_STROKE);
paintPath.setAntiAlias(true);
paintPath.setPathEffect(null);
paintPath.setRasterizer(null); 
```

里面抽奖

```
RectF rectF = new RectF(centerx - radius, centery - radius,
    centerx + radius, centery + radius);

Path myPath = new Path();
for (int i = 0; i <= 360; i += 1)
{
    myPath.addArc(rectF, i, 1);
}
canvas.drawPath(myPath, paintPath); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-21T16:16:43.317

更短的方式：

```
draw = function() {
    ctx.globalCompositeOperation = "lighter";
    ctx.beginPath();
    // ctx.fillStyle = "green";
    ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2, false);
    // ctx.fill();
ctx.strokeStyle = "yellow";
ctx.stroke();
    ctx.closePath();
} 
```

# mysql - Sphinx - 无法使用 sql_attr_multi 按类别过滤

> ID：12263387
> 
> 赞同：0
> 
> 时间：2012-09-04T12:20:35.343
> 
> 标签：mysql, sphinx

我正在尝试按我的事件索引中的类别进行过滤 - 这是一个多对多的关系，并且`event_category_event_rel` 是我的数据透视表。`view_event_search`是一个 mysql 视图“非规范化”我的事件数据。它不加入`event_category`表。

这是我的配置：

```
(...)
sql_query  = SELECT * FROM view_event_search 
             WHERE id <= (SELECT max_doc_id FROM search_indexes WHERE `index`='events_primary')

# Attribute config
sql_attr_uint      = user_id
sql_attr_timestamp = created_on
sql_attr_multi     = UINT categories FROM QUERY; SELECT event_id, event_category_id FROM event_category_event_rel ORDER BY event_id;
(...) 
```

我正在使用 PHP 并过滤属性，如下所示

```
$client->SetFilter('categories', array(1)); 
```

并得到以下错误：

```
Search Error: no such filter attribute 'categories' 
```

以下是我认为我已经理解的内容：

1.  在 UINT 类别中 FROM QUERY；“类别”是属性名称。
2.  并且 sql 查询部分必须返回索引 0 处的文档 ID 和索引 1 处的过滤器值。然后 Sphinx 将返回的文档 ID 匹配到 sql_query 文档 ID。如果 MVA 中有重复的文档 ID (event_id)，则值 (event_category_id) 将“附加”到该文档的值。

我是不是误会了？以及如何按类别过滤？非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:07:15.860

Your configuration looks fine. I suspect you havent correctly rebuilt the index after changing the config.

using indexer with --rotate is the best option.

Otherwise, shutdown, searchd, rebuild the index, and then start searchd again.

(other thing to check that the event_id is the first column in view_event_search, you probably have this, but its not clear from what you wrote, so just making sure)

# c# - 我们如何使用 c# 对列表进行分组？

> ID：12263390
> 
> 赞同：-1
> 
> 时间：2012-09-04T12:20:40.213
> 
> 标签：c#

我需要找到失败的测试用例的数量。这里 TC003 包含（3 个 SUB 测试用例），其中 2 个通过，1 个失败。

我需要计算总测试用例（4）通过：-（3）失败-（1）。我该怎么做。

```
TC001-Passed
TC002-Passed
TC003-Passed
TC003-Passed
TC003-Failed
TC004-Passed 
```

我有一个数据表，即`ItemArray[0]`包含 TestCaseID 和`ItemArray[3]`包含状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:30:06.220

好的，这很尴尬，但让我们直截了当：

```
void Main()
{
    List<string> AllTheTestCasesStrings = new List<string>();
    AllTheTestCasesStrings.Add("TC001 Passed");
    AllTheTestCasesStrings.Add("TC002 Passed");
    AllTheTestCasesStrings.Add("TC003 Passed");
    AllTheTestCasesStrings.Add("TC003 Passed");
    AllTheTestCasesStrings.Add("TC003 Failed");
    AllTheTestCasesStrings.Add("TC004 Passed");

    List<TestCase> AllTheTestCases = new List<TestCase>();

    foreach(string CurrentTest in AllTheTestCasesStrings)
    {
        TestCase NewTest = new TestCase();
        NewTest.Name = CurrentTest.Split(' ')[0];
        NewTest.Passed = CurrentTest.Split(' ')[1].Equals("Passed");

        AllTheTestCases.Add(NewTest);
    }

    int FailedTestCases = AllTheTestCases.Where<TestCase>(x => !x.Passed).GroupBy<TestCase, string>(x => x.Name).Count();
    int PassedTestCases = AllTheTestCases.Where<TestCase>(x => x.Passed).GroupBy<TestCase, string>(x => x.Name).Count();

    Console.WriteLine("Failed: " + FailedTestCases);
    Console.WriteLine("Passed: " + PassedTestCases);
}

public class TestCase
{
    public string Name;
    public bool Passed;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:34:27.360

假设您有 LINQ 可用，您可以尝试这样的解决方案，`dt`您的数据表的列索引`0`为 testcase-id (1, 2, 3, 4)，列索引`3`为状态 ( `Passed`, `Failed`)：

```
var rows = dt.Select();
var results = rows.GroupBy (r => r[0])
    .Select (r => new {
        TestCaseID = r.Key,
        Status = r.Any (x => x[3].Equals("Failed")) ? "Failed" : "Passed"
    } );

var total = results.Count();
var passed = results.Count(r => r.Status == "Passed");
var failed = results.Count (r => r.Status == "Failed");

Console.WriteLine("Total Testcases: " + total);    // 4
Console.WriteLine("Passed: " + passed);            // 3
Console.WriteLine("Failed: " + failed);            // 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:36:55.817

> 我有一个数据表，即 ItemArray[0] 包含 TestCaseID 和 ItemArray[3] 包含状态

好的，这是一种使用 DataTable 和的方法`Linq-To-DataSet`：

```
var tcaseGroups = tbl.AsEnumerable()
    .GroupBy(r => r.Field<String>("TestCaseID"))
    .Select(g => new
    {
        Testcase = g.Key,
        Count = g.Count(),
        CaseInfo = g.GroupBy(r => r.Field<String>("Status"))
                     .Select(gStatus => new
                     {
                         Status = gStatus.Key,
                         Count = gStatus.Count()
                     })
    });

// output the result
foreach (var x in tcaseGroups)
    Console.WriteLine("Testcase:{0}, Count:{1} Results:[{2}]", x.Testcase, x.Count
        , String.Join(",", x.CaseInfo.Select(xx => 
            String.Format("Status:{0} Count:{1}", xx.Status, xx.Count)))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T12:59:25.237

使用 Linq 按 ItemArray[0] 分组，然后计算 ItemArray[1] 的实例。

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication
{
    internal class Program
    {
        private static void Main()
        {
            //table to mimik your structure
            var table = new List<string[]>(new[]
                {
                    new[] {"TC001", null, null, "Passed"},
                    new[] {"TC002", null, null, "Passed"},
                    new[] {"TC003", null, null, "Passed"},
                    new[] {"TC003", null, null, "Passed"},
                    new[] {"TC003", null, null, "Failed"},
                    new[] {"TC004", null, null, "Passed"}
                });

            //calculate
            var grouped = from itemArray in table
                          //group by the testid
                          group itemArray by itemArray[0]
                          into g select new
                              {
                                  TestCaseId = g.Key,
                                  //add up the passes and fails
                                  PassedCount = g.Count(i => i[3] == "Passed"),
                                  FailedCount = g.Count(i => i[3] == "Failed")
                              };

            //enumerate and output to screen
            foreach (var group in grouped)
            {
                Console.WriteLine("TestCase {0} Passed: {1}, Failed: {2}",
                                  group.TestCaseId, group.PassedCount,
                                  group.FailedCount);
            }
            Console.ReadLine();
        }
    }
} 
```

# installation - 从执行文件夹复制文件并粘贴到 installshield（InstallScript 项目）中的安装文件夹

> ID：12263393
> 
> 赞同：0
> 
> 时间：2012-09-04T12:20:49.737
> 
> 标签：installation, setup-project, installshield, installscript

我正在 installshield 2011 中创建一个 InstallScript 项目，我的问题是

**我想知道设置的执行路径**

假设有一个文件夹名称“project_setup”，其中存在 setup.exe 和 abc.txt 文件。现在在运行时我想复制 abc.txt 文件并将其粘贴到安装程序的安装位置。

**编辑：** 现在我可以复制文件，但在我的 Release 文件夹中有 2 个设置

*   在 Disk Image/Disk1 文件夹中（此设置复制并粘贴 .txt 文件并执行正常）
*   其他在 Package 文件夹中（此设置不复制和粘贴但执行正常）

那么如何在 Single exe 中进行设置，以便它执行以及复制和粘贴 .txt 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:17:04.340

CopyFile(SRCDIR ^ "abc.txt", TARGETDIR ^ "abc.txt");

# iphone - 如何对包含每个按钮的标记值的 UIbutton 数组执行谓词，并且我想匹配每个按钮的标记

> ID：12263397
> 
> 赞同：0
> 
> 时间：2012-09-04T12:21:00.403
> 
> 标签：iphone, ios, ios4, nspredicate

我有一个`UIbutton`对象数组。我想要做的是我想匹配每个 UIbutton 对象的`tag`值。为此，我想写一个谓词。这应该是什么谓词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:29:11.523

试试这个：

```
 UIButton *btnSelected = [self.view  viewWithTag:1];
 NSArray* filteredArray = [[yourButtonArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"tag  == %d",[btnSelected tag]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:45:03.587

我喜欢非核心数据谓词的块谓词，我认为它更清楚它正在评估什么。

```
NSInteger tagToSearchFor = 13;
NSPredicate *p = [NSPredicate predicateWithBlock:^BOOL(UIButton *button, NSDictionary *bindings) {
    return (button.tag == tagToSearchFor);
}]; 
```

# html - div不换行

> ID：12263399
> 
> 赞同：3
> 
> 时间：2012-09-04T12:21:06.823
> 
> 标签：html, css

是一种更有效的方法......出于某种原因，我觉得这是一种旧的方法。

我有这个页面[HERE](http://www.kimwilddesigns.com/TrailGuide_website/) `(I'm re-creating a lynda.com webpage for a lesson)`并且包装器实际上并没有环绕该部分`id="trailInfo"`。

为了做到这一点，我会添加 br `class="br_clear"`/

有没有更正确的方法来做到这一点？如果我添加`clear=both`到该部分不起作用，我必须将其添加到`br`. 谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T12:23:03.733

`overflow:hidden`使用父 div中的属性更新 CSS

```
#wrapper {
    background-color: #FFFFFF;
    margin: 0 auto;
    overflow: hidden;
    position: relative;
    width: 960px;
} 
```

**`Explanation About Clearing floats`**

**基于浮动的**布局的一个常见问题是**父 div**不想拉伸以适应**子浮动 div**。如果要在**父 div**周围添加边框，则必须以某种方式命令浏览器一直拉伸**父 div**。

现在看看你所面临的问题：[**demo**](http://tinkerbin.com/oS5bm0bE)

那是因为你当时没有清除花车。

所以这个问题的**旧解决方案**是`clear:both;`

如果您将在**子浮动**元素之后添加额外的 div，如下面的代码所示，这将清除浮动：

```
<div class="parent">
  <div class="left-child"></div>
  <div class="right-child"></div>
  <div style="clear:both;"></div>
</div> 
```

**新的解决方案**是`overflow:hidden;` 如果你给`overflow:hidden`你的`parent div`this 将自动清除**父 div**内的所有**子浮动元素**。

 **查看**新的解决方案演示**：**[tinkerbin.com/WKqFS7Lc](http://tinkerbin.com/WKqFS7Lc)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:23:27.807

嗨，现在给`#wrapper overflow:hidden;`

像这样

```
#wrapper{
overflow:hidden;
} 
```

***[演示](http://i.stack.imgur.com/HgKcD.png)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:24:04.367

添加`height: auto;`到包装类。有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:32:47.610

你应该使用溢出：隐藏；包装器上的属性。

```
#wrapper{
overflow:hidden;
height:auto;
} 
```**

# web - Web API 内部错误 500

> ID：12263400
> 
> 赞同：1
> 
> 时间：2012-09-04T12:21:10.897
> 
> 标签：web, asp.net-web-api

我正在使用最新版本的 web api。我正在返回一个`IQuerable`值，并且收到此错误：

```
iisexpress.exe Error: 0 : Operation=QueryableAttribute.ActionExecuted, Status=200 (OK), Exception=System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at System.Web.Http.OData.Builder.EdmTypeBuilder.CreateStructuralTypeBody(EdmStructuredType type, IStructuralTypeConfiguration config)
   at System.Web.Http.OData.Builder.EdmTypeBuilder.CreateEntityTypeBody(EdmEntityType type, IEntityTypeConfiguration config)
   at System.Web.Http.OData.Builder.EdmTypeBuilder.CreateEdmTypeBody(IStructuralTypeConfiguration config)
   at System.Web.Http.OData.Builder.EdmTypeBuilder.<GetEdmTypes>d__0.MoveNext()
   at System.Linq.Enumerable.<OfTypeIterator>d__aa`1.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey](IEnumerable`1 source, Func`2 keySelector)
   at System.Web.Http.OData.Builder.EdmModelHelperMethods.BuildEdmModel(String containerNamespace, String containerName, IEnumerable`1 entityTypeConfigurations, IEnumerable`1 entitySetConfigurations)
   at System.Web.Http.OData.Builder.ODataModelBuilder.GetEdmModel()
   at System.Web.Http.OData.Builder.ODataConventionModelBuilder.GetEdmModel()
   at System.Web.Http.HttpActionDescriptorExtensions.<>c__DisplayClass1.<GetEdmModel>b__0(Object _)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at System.Web.Http.HttpActionDescriptorExtensions.GetEdmModel(HttpActionDescriptor actionDescriptor, Type entityClrType)
   at System.Web.Http.QueryableAttribute.OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
   at System.Web.Http.Tracing.Tracers.ActionFilterAttributeTracer.<>c__DisplayClass4.<OnActionExecuted>b__1()
   at System.Web.Http.Tracing.ITraceWriterExtensions.TraceBeginEnd(ITraceWriter traceWriter, HttpRequestMessage request, String category, TraceLevel level, String operatorName, String operationName, Action`1 beginTrace, Action execute, Action`1 endTrace, Action`1 errorTrace)
iisexpress.exe Error: 0 : Operation=InteractionDataController.ExecuteAsync, Exception=System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at System.Web.Http.OData.Builder.EdmTypeBuilder.CreateStructuralTypeBody(EdmStructuredType type, IStructuralTypeConfiguration config)
   at System.Web.Http.OData.Builder.EdmTypeBuilder.CreateEntityTypeBody(EdmEntityType type, IEntityTypeConfiguration config)
   at System.Web.Http.OData.Builder.EdmTypeBuilder.CreateEdmTypeBody(IStructuralTypeConfiguration config)
   at System.Web.Http.OData.Builder.EdmTypeBuilder.<GetEdmTypes>d__0.MoveNext()
   at System.Linq.Enumerable.<OfTypeIterator>d__aa`1.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey](IEnumerable`1 source, Func`2 keySelector)
   at System.Web.Http.OData.Builder.EdmModelHelperMethods.BuildEdmModel(String containerNamespace, String containerName, IEnumerable`1 entityTypeConfigurations, IEnumerable`1 entitySetConfigurations)
   at System.Web.Http.OData.Builder.ODataModelBuilder.GetEdmModel()
   at System.Web.Http.OData.Builder.ODataConventionModelBuilder.GetEdmModel()
   at System.Web.Http.HttpActionDescriptorExtensions.<>c__DisplayClass1.<GetEdmModel>b__0(Object _)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at System.Web.Http.HttpActionDescriptorExtensions.GetEdmModel(HttpActionDescriptor actionDescriptor, Type entityClrType)
   at System.Web.Http.QueryableAttribute.OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
   at System.Web.Http.Tracing.Tracers.ActionFilterAttributeTracer.<>c__DisplayClass4.<OnActionExecuted>b__1()
   at System.Web.Http.Tracing.ITraceWriterExtensions.TraceBeginEnd(ITraceWriter traceWriter, HttpRequestMessage request, String category, TraceLevel level, String operatorName, String operationName, Action`1 beginTrace, Action execute, Action`1 endTrace, Action`1 errorTrace)
   at System.Web.Http.Tracing.Tracers.ActionFilterAttributeTracer.OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
   at System.Web.Http.Filters.ActionFilterAttribute.CallOnActionExecuted(HttpActionContext actionContext, HttpResponseMessage response, Exception exception)
   at System.Web.Http.Filters.ActionFilterAttribute.<>c__DisplayClass2.<System.Web.Http.Filters.IActionFilter.ExecuteActionFilterAsync>b__0(HttpResponseMessage response)
   at System.Threading.Tasks.TaskHelpersExtensions.<>c__DisplayClass41`2.<Then>b__40(Task`1 t)
   at System.Threading.Tasks.TaskHelpersExtensions.ThenImpl[TTask,TOuterResult](TTask task, Func`2 continuation, CancellationToken cancellationToken, Boolean runSynchronously) 
```

有人可以解释一下问题是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:14:38.050

我遇到了同样的错误。我将其追溯到 ODataModelBuilder 调用 GetEdmModel() 时。我正在使用 ODataConventionModelBuilder 并声明 EntitySets 来创建我的模型。就我而言，我有一个带有子集合的父类。我尝试了不同类型的集合，IList、List、ICollection、IEnumerable，但我继续收到此错误。我知道这不是最好的解决方案，但我将子集合声明为对象。我使用 Linq 将集合分配为 IEnumerable。我会继续研究这个，但至少我可以继续我的项目。我将不得不继续研究 ODataConventionModelBuilder。我希望这至少可以为您指明正确的方向。

-杰森

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:06:36.817

这似乎是 WebApi.OData 包 (0.1.0-alpha-120815) 中的一个已知问题。请参阅[http://aspnetwebstack.codeplex.com/discussions/394626](http://aspnetwebstack.codeplex.com/discussions/394626)

# iphone - 苹果手机 。按钮图像不切换

> ID：12263408
> 
> 赞同：0
> 
> 时间：2012-09-04T12:21:54.593
> 
> 标签：iphone, ios, ipad

我已经在我的一个应用程序上实现了一个单选按钮，就像这个解决方案一样：

[http://www.developers-life.com/radio-buttons-in-iphone-application.html](http://www.developers-life.com/radio-buttons-in-iphone-application.html)

但我的 checkboxButton 方法是这样的：

```
- (IBAction)checkboxButton:(UIButton *)button{

     for (UIButton *but in self.arrayButtons) {
         if (but == button)
             [but setSelected:YES];
         else
             [but setSelected:NO];
     }
} 
```

我有两个属于同一个单选按钮组的按钮。当我选择其中一个按钮时，其图像会切换到已切换的按钮。完美的。问题是，当我选择另一个时，它不会选择选择状态，并且显示为选中的第一个继续显示为选中状态。

任何线索？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T12:37:47.553

```
for (UIButton *but in [Your_View subviews]) {

if ([but isKindOfClass:[UIButton class]] && ![but isEqual:button]) {

            [but setSelected:NO];

        }

}

if (!button.selected)  {

        button.selected = !button.selected;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:28:32.320

你为什么要使用这么复杂的只是使用下面来选择..

```
- (IBAction)checkboxButton:(UIButton *)button
{
    button.selected = !button.selected;
} 
```

并确保您的按钮图像根据需要在每个状态的 xib 中设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:31:44.167

为了实现所需的功能，您必须在下一个运行循环中**选择按钮。**

因此，从“checkboxButton:”调用另一个方法。

做类似的事情，

```
- (IBAction)checkboxButton:(UIButton *)button
{
    [self performSelector:@selector(highlighButton:) withObject:button afterDelay:0.0];
} 
```

其中“highlightButton：”定义为：

```
-(void) highlighButton:(UIButton*)aButton
{
    [aButton setHighlighted:YES];
    for (UIButton* button in self.arrayButtons) {
        if (button != aButton) {
            [button setHighlighted:NO];
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T14:00:37.573

我只是做了一些细微的调整，我刚刚测试了它并且它有效。

viewDidLoad: //确保所有按钮都分配了相同的选择器

```
[button1 addTarget:self action:@selector(checkboxButton:) forControlEvents:UIControlEventTouchUpInside];
[button2 addTarget:self action:@selector(checkboxButton:) forControlEvents:UIControlEventTouchUpInside];
[button3 addTarget:self action:@selector(checkboxButton:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后只需稍微修改循环以扫描按钮子视图而不是任意数组中的对象（应该更准确）

```
- (IBAction)checkboxButton:(UIButton *)button{

    for (UIButton *but in self.view.subviews) {//Change "self.view" to what ever view you are adding these subviews to.
        if (but == button){
            [but setSelected:YES];
        }else{
            [but setSelected:NO];
        }
    }
} 
```

请记住，您分配的选定状态图像/文本在释放按钮之前不会出现。当按钮在释放之前被按下时，它处于突出显示状态。这只是一个注释，因此您可以相应地进行设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T01:26:00.207

在尝试了这里给出的所有解决方案并且都失败了之后，我尝试了一种新的方法并且效果很好。

解决方案是改变这个

```
- (IBAction)checkboxButton:(UIButton *)button{

     for (UIButton *but in self.arrayButtons) {
         if (but == button)
             [but setSelected:YES];
         else
             [but setSelected:NO];
     }
} 
```

对此

```
- (IBAction)checkboxButton:(UIButton *)button{

     for (UIButton *but in self.arrayButtons) {
         if (but == button)
             [but setImage:selectedImage forState:UIControlStateNormal];
         else
             [but setImage:normalImage forState:UIControlStateNormal];
     }
} 
```

显然，改变按钮的状态不会改变它的形象。至少对我没有用。

# javascript - 如何在 JQuery fullcalender 周模式中选择多天

> ID：12263409
> 
> 赞同：1
> 
> 时间：2012-09-04T12:21:58.913
> 
> 标签：javascript, jquery, fullcalendar

我想在 jQuery fullcalender in week 选项的选择事件中选择多天。它在月选项中工作，与我在周选项中想要的相同。在周选项中，可以只选择一天。

如何使用不定期选项选择多天？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:14:14.317

您应该可以`all-day`在周模式的部分中执行此操作。这是第一行 - 就在显示的星期几的下方。

# maven - 用于生成输出的 Maven JAXB 插件和语言环境

> ID：12263411
> 
> 赞同：0
> 
> 时间：2012-09-04T12:22:04.653
> 
> 标签：maven, jaxb, locale, maven-jaxb2-plugin

我正在使用`maven-jaxb2-plugin`(from `org.jvnet.jaxb2.maven2`) 从 XSD 模式生成类。一切正常，生成的类就是我所需要的。除了一件事，这些类中所有生成的评论都使用我的计算机语言环境（法语）。

我希望能够更改生成的评论的语言环境（例如使用英语）。可以通过插件配置或者项目配置中的方式来完成`pom.xml`吗？还是必须在我运行`mvn`命令时在我的 shell 中完成？

我尝试设置，`project.build.sourceEncoding`但这不会改变语言环境。我尝试设置`user.language`or`user.country`但这对输出没有任何影响。

有一个选项可以将一些参数传递给`xjc`我可以使用的命令，但是在调用`xjc`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:24:45.497

最好的办法是将以下内容放入您的 pom 中：

```
<project>
  ...
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  ...
</project> 
```

以上也会影响 maven-compiler-plugin 等。此外，jaxb2-maven-plugin 也会受到上述属性 (${project.build.sourceEncoding}) 的影响。

# android - Android org.xmlpull.v1.XmlPullParserException：意外类型

> ID：12263423
> 
> 赞同：1
> 
> 时间：2012-09-04T12:22:46.950
> 
> 标签：android, web-services, asmx, xmlpullparser

我正在编写一个使用 asmx 调用 Web 服务的 Android 应用程序。我想要的 JSON 响应在 xml 中，所以我试图提取一个名为“string”的标签，这就是 JSON 所在的位置。我得到了上述异常。

我已经完成了一些日志记录，并且得到了一个流，所以 url 可以正常传递。异常发生在 parser.nextTag() 上。这是文件并打印出来。有任何想法吗？谢谢。

```
public class MainActivity extends Activity {

    private static final String TAG = MainActivity.class.getSimpleName();
     private static final String URL = "http://212.169.27.217:84/rotaservice.asmx/GetRota?CarerID=36&RotaDate=04-09-2012";
     TextView tv = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv = (TextView)findViewById(R.id.textview1);
        Log.e(TAG, "about run DownloadXmlTask");
        new DownloadXmlTask().execute(URL);
        Log.e(TAG, "finished running DownloadXmlTask");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private class DownloadXmlTask extends AsyncTask<String, Void, String> {

        @Override
        protected String doInBackground(String... urls) {
            try {
                Log.e(TAG, "url = " + urls[0].toString());
                return loadXmlFromNetwork(urls[0]);
            } catch (IOException e) {
               e.printStackTrace();
            } catch (XmlPullParserException e) {
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            setContentView(R.layout.activity_main);
            // Displays the HTML string in the UI via a WebView
           tv.setText(result);
        }
    }

    private String loadXmlFromNetwork(String urlString) throws XmlPullParserException, IOException {
        InputStream stream = null;
        XmlParser xmlParser = new XmlParser();
        List<WebServiceString> entries = null;
        String string = null;

        try {
            stream = downloadUrl(urlString);
            Log.e(TAG, "stream = " + stream.toString());
            entries = xmlParser.parse(stream);
        // Makes sure that the InputStream is closed after the app is
        // finished using it.
        } finally {
            if (stream != null) {
                stream.close(); 
            }
        }

        for (WebServiceString entry : entries) {
           Log.e("main", "WebserviceString  = " + entry.toString());
           string = entry.toString();
        }
        return string;

    }

 // Given a string representation of a URL, sets up a connection and gets
    // an input stream.
    private InputStream downloadUrl(String urlString) throws IOException {
        URL url = new URL(urlString);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setReadTimeout(10000 /* milliseconds */);
        conn.setConnectTimeout(15000 /* milliseconds */);
        conn.setRequestMethod("GET");
        conn.setDoInput(true);
        // Starts the query
        conn.connect();
        InputStream stream = conn.getInputStream();
        return stream;
    }
}// end of class 
```

.

```
public class XmlParser {

    private static final String TAG = XmlParser.class.getSimpleName();
        // We don't use namespaces
        private final static String ns = null;

        public List parse(InputStream in) throws XmlPullParserException, IOException {
            try {
                XmlPullParser parser = Xml.newPullParser();
                parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);
                parser.setInput(in, null);
                parser.nextTag();
                Log.e(TAG, "nextTag = " + parser.nextTag());
                return readFeed(parser);
            } finally {
                in.close();
            }
        }

        private List readFeed(XmlPullParser parser) throws XmlPullParserException, IOException {
            List string = new ArrayList();

           // parser.require(XmlPullParser.START_TAG, ns, "feed");
            while (parser.next() != XmlPullParser.END_TAG) {
                if (parser.getEventType() != XmlPullParser.START_TAG) {
                    continue;
                }
                String name = parser.getName();
                // Starts by looking for the entry tag
                if (name.equals("string")) {
                    string.add(readString(parser));
                } else {
                    skip(parser);
                }
            }  
            return string;
        }

        public static class WebServiceString {

        public final String string;

        private WebServiceString(String string ) {
            this.string = string;

        }

        }

    // Parses the contents of an entry. If it encounters a title, summary, or link tag, hands them off
    // to their respective "read" methods for processing. Otherwise, skips the tag.
    private WebServiceString readEntry(XmlPullParser parser) throws XmlPullParserException, IOException {
        parser.require(XmlPullParser.START_TAG, ns, "string");
        String string = null;

        while (parser.next() != XmlPullParser.END_TAG) {
            if (parser.getEventType() != XmlPullParser.START_TAG) {
                continue;
            }
            String name = parser.getName();
            if (name.equals("string")) {
                string = readString(parser);
            }  else {
                skip(parser);
            }
        }
        return new WebServiceString(string);
    }

    private String readString(XmlPullParser parser) throws IOException, XmlPullParserException {
        parser.require(XmlPullParser.START_TAG,  ns, "string");
        String string = readText(parser);
        parser.require(XmlPullParser.END_TAG,  ns, "string");
        return string;
    }

    private void skip(XmlPullParser parser) throws XmlPullParserException, IOException {
        if (parser.getEventType() != XmlPullParser.START_TAG) {
            throw new IllegalStateException();
        }
        int depth = 1;
        while (depth != 0) {
            switch (parser.next()) {
            case XmlPullParser.END_TAG:
                depth--;
                break;
            case XmlPullParser.START_TAG:
                depth++;
                break;
            }
        }
     }

    private String readText(XmlPullParser parser) throws IOException, XmlPullParserException {
        String result = "";
        if (parser.next() == XmlPullParser.TEXT) {
            result = parser.getText();
            parser.nextTag();
        }
        return result;
    }

    } 
```

.

```
09-04 13:20:51.890: E/MainActivity(12076): about run DownloadXmlTask
09-04 13:20:51.900: E/MainActivity(12076): finished running DownloadXmlTask
09-04 13:20:51.900: E/MainActivity(12076): url = http://212.169.27.217:84/rotaservice.asmx/GetRota?CarerID=36&RotaDate=04-09-2012
09-04 13:20:52.200: D/libEGL(12076): loaded /system/lib/egl/libEGL_tegra.so
09-04 13:20:52.280: D/libEGL(12076): loaded /system/lib/egl/libGLESv1_CM_tegra.so
09-04 13:20:52.290: D/libEGL(12076): loaded /system/lib/egl/libGLESv2_tegra.so
09-04 13:20:52.330: D/OpenGLRenderer(12076): Enabling debug mode 0
09-04 13:20:52.410: E/MainActivity(12076): stream = libcore.net.http.FixedLengthInputStream@40d80638
09-04 13:20:52.610: W/System.err(12076): org.xmlpull.v1.XmlPullParserException: unexpected type (position:TEXT {"0":{"StartDate...@2:8360 in java.io.InputStreamReader@40d85e20) 
09-04 13:20:52.610: W/System.err(12076):    at org.kxml2.io.KXmlParser.nextTag(KXmlParser.java:2035)
09-04 13:20:52.610: W/System.err(12076):    at com.carefreegroup.XmlParser.parse(XmlParser.java:30)
09-04 13:20:52.610: W/System.err(12076):    at com.carefreegroup.MainActivity.loadXmlFromNetwork(MainActivity.java:80)
09-04 13:20:52.610: W/System.err(12076):    at com.carefreegroup.MainActivity.access$1(MainActivity.java:67)
09-04 13:20:52.610: W/System.err(12076):    at com.carefreegroup.MainActivity$DownloadXmlTask.doInBackground(MainActivity.java:50)
09-04 13:20:52.610: W/System.err(12076):    at com.carefreegroup.MainActivity$DownloadXmlTask.doInBackground(MainActivity.java:1)
09-04 13:20:52.610: W/System.err(12076):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
09-04 13:20:52.610: W/System.err(12076):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-04 13:20:52.610: W/System.err(12076):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-04 13:20:52.620: W/System.err(12076):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
09-04 13:20:52.620: W/System.err(12076):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
09-04 13:20:52.620: W/System.err(12076):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
09-04 13:20:52.620: W/System.err(12076):    at java.lang.Thread.run(Thread.java:864) 
```

.

```
09-04 13:39:44.950: I/RestClient(14037): <?xml version="1.0" encoding="utf-8"?>
09-04 13:39:44.950: I/RestClient(14037): <string xmlns="http://tempuri.org/">{"0":{"StartDate":"04/09/2012 07:30:00","EndDate":"04/09/2012 07:50:00","Duration":"20","CallStatusID":"1","CallStatusName":"Completed","ClientSurname":"Brown","ClientForename":"Margaret","NeedName":"Assist With Dressing, Careline, Diabetic Type 2, Empty Commode, KEY SAFE, Leave A Drink, Make A Hot Drink, Meds - Level II Administer, Prepare Breakfast, Strip Wash, TIME BAND - Early Breakfast","CarerAwayReason":"","CallID":"7862d5a1-4cc3-4931-bb76-b23f723087b9","DoubleUpCallID":"","ActualTimeIn":"07:51","ActualTimeOut":"07:53"},"1":{"StartDate":"04/09/2012 07:30:00","EndDate":"04/09/2012 07:55:00","Duration":"25","CallStatusID":"1","CallStatusName":"Completed","ClientSurname":"Ebbs","ClientForename":"Vera","NeedName":"Assist With Dressing, Laundry, Leave A Drink, Leave A Sandwich For Later, Make A Hot Drink, Prepare Breakfast, Shower, TIME BAND - Early Breakfast","CarerAwayReason":"","CallID":"5e6f77b5-651b-4e4a-9876-0a52192a7b47","DoubleUpCallID":"","ActualTimeIn":"07:25","ActualTimeOut":"07:40"},"2":{"StartDate":"04/09/2012 08:00:00","EndDate":"04/09/2012 08:40:00","Duration":"40","CallStatusID":"1","CallStatusName":"Completed","ClientSurname":"Weaver","ClientForename":"Margaret","NeedName":"KEY SAFE, Morning Call - Get Up And Breakfast, Personal Care","CarerAwayReason":"","CallID":"286bee6d-3994-4785-998f-7ea02bd871c4","DoubleUpCallID":"","ActualTimeIn":"08:19","ActualTimeOut":"08:59"},"3":{"StartDate":"04/09/2012 08:08:00","EndDate":"04/09/2012 00:00:00","Duration":"0","CallStatusID":"0","CallStatusName":"Unknown or incomplet","ClientSurname":"Brown","ClientForename":"Margaret","NeedName":"","CarerAwayReason":"","CallID":"d02a6072-bbdd-481d-b9da-f057180ce2ea","DoubleUpCallID":"","ActualTimeIn":"08:08","ActualTimeOut":"00:00"},"4":{"StartDate":"04/09/2012 09:00:00","EndDate":"04/09/2012 09:20:00","Duration":"20","CallStatusID":"1","CallStatusName":"Completed","ClientSurname":"Howarth","ClientForename":"Edith","NeedName":"Change Incontinence Pads, KEY SAFE, Make Bed / Change As Neccessary, Meds - Level II Administer, Personal Care, Prepare Breakfast, TIME BAND - Late Breakfast","CarerAwayReason":"","CallID":"3199a956-647e-4737-9ca3-fea6356f807e","DoubleUpCallID":"","ActualTimeIn":"09:43","ActualTimeOut":"10:19"},"5":{"StartDate":"04/09/2012 09:00:00","EndDate":"04/09/2012 09:50:00","Duration":"50","CallStatusID":"1","CallStatusName":"Completed","ClientSurname":"Kastik","ClientForename":"Lydia","NeedName":"Keys Needed, Leave A Drink, Leave A Sandwich For Later, Make A Hot Drink, Make Bed / Change As Neccessary, Medication Prompt, Meds - Level II Administer, Personal Care, Shower, TIME BAND - Early Breakfast","CarerAwayReason":"","CallID":"71fd1754-9f15-4898-90cf-3af5c0c06e6e","DoubleUpCallID":"","ActualTimeIn":"09:07","ActualTimeOut":"09:35"},"6":{"StartDate":"04/09/2012 10:30:00","EndDate":"04/09/2012 11:00:00","Duration":"30","CallStatusID":"1","CallStatusName":"Completed","ClientSurname":"Terett","ClientForename":"Mamie","NeedName":"Assist With Dressing, Meds - Self Medicating, Morning Call, Personal Care, Strip Wash, TIME BAND - Late Breakfast","CarerAwayReason":"","CallID":"84fb31f7-507d-4a6b-a1d4-ae1ca5122a35","DoubleUpCallID":"","ActualTimeIn":"10:26","ActualTimeOut":"11:37"},"7":{"StartDate":"04/09/2012 12:00:00","EndDate":"04/09/2012 12:15:00","Duration":"15","CallStatusID":"1","CallStatusName":"Completed","ClientSurname":"Garland","ClientForename":"Mavis","NeedName":"Empty Catheter Bag, Medication Prompt, Meds - Level II Administer, TIME BAND - Early Lunch, Toiletting / Commode","CarerAwayReason":"","CallID":"d36d8bcf-8993-4529-99bb-9b16798f1dfe","DoubleUpCallID":"","ActualTimeIn":"11:51","ActualTimeOut":"12:07"},"8":{"StartDate":"04/09/2012 12:30:00","EndDate":"04/09/2012 12:50:00","Duration":"20","CallStatusID":"1","CallStatusName":"Completed","ClientSurname":"Weaver","ClientForename":"Margaret","NeedName":"KEY SAFE, Lunch Call, Make A Hot Drink, Make Lunch","CarerAwayReason":"","CallID":"6cc0c046-79a8-4 
```

# jquery - 为什么 jQuery 的“on”比“live”更好

> ID：12263424
> 
> 赞同：3
> 
> 时间：2012-09-04T12:22:50.473
> 
> 标签：jquery

我看到越来越多的开发人员现在使用`$('#element-id').on()`方法而不是`$('#element-id').live()`方法。

为什么？该`live`方法没有什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T12:24:39.077

绑定的事件处理程序绑定`.live`到`document`. 绑定的事件处理程序绑定`.on`到您指定的元素。`.live`这意味着您可以减少事件冒泡到将接收它的元素所花费的时间，这也意味着您可以停止传播（因为它已经到达文档，所以不可能）。

该`.on`方法还允许您对所有事件处理程序使用单一方法 -`.live`将始终委托事件处理程序，而`.on`仅在您将选择器作为第二个参数传递时才会委托。如果没有，它将绑定到匹配的元素集。

[jQuery 文档](http://api.jquery.com/live/)中列出了更多缺点：

> *   jQuery 会在调用方法之前尝试检索选择器指定的元素`.live()`，这在大型文档上可能会很耗时。
>     
>     
> *   不支持链接方法。例如， `$("a").find(".offsite, .external").live( ... );`无效且无法按预期工作。
>     
>     
> *   由于所有`.live()`事件都附加在文档元素上，因此事件在处理之前会采用最长和最慢的路径。
>     
>     
> *   在移动 iOS（iPhone、iPad 和 iPod Touch）上，对于大多数元素，点击事件不会冒泡到文档正文，并且不能与`.live()`...
>     
>     
> *   调用`event.stopPropagation()`事件处理程序在停止附加在文档下方的事件处理程序方面是无效的；该事件已经传播到文档。
>     
>     
> *   该`.live()`方法以令人惊讶的方式与其他事件方法交互，例如，`$(document).unbind("click")`删除所有通过调用`.live()`!

由于所有这些原因，您应该*始终*使用`.on()`而不是`.live()`. 如果您卡在旧版本的 jQuery（低于 1.7）上，您可以`.delegate()`改用。

* * *

*旁注*- 所有事件绑定方法都在后台调用，因此用于所有事件处理需求`.on()`是有意义的。`.on()`不要为诸如`.click()`;之类的快捷方式烦恼。您可以从[1.7.2 源代码](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.fn.click)中看到，他们所做的只是调用`.on`：

```
return arguments.length > 0 ? this.on(name, null, data, fn) : this.trigger(name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:26:59.113

完整答案：[http ://www.jquery4u.com/jquery-functions/on-vs-live-review/#.UEXy7NZSskU](http://www.jquery4u.com/jquery-functions/on-vs-live-review/#.UEXy7NZSskU)

短读：

不再推荐使用 .live() 方法，因为更高版本的 jQuery 提供了没有缺点的更好方法。特别是，使用 .live() 会出现以下问题：

*   jQuery 在调用 .live() 方法之前尝试检索选择器指定的元素，这在大型文档上可能很耗时。
*   不支持链接方法。例如，$(“a”).find(“.offsite, .external”).live( ... ); 无效且无法按预期工作。
*   由于所有 .live() 事件都附加在文档元素上，因此事件在处理之前会采用最长和最慢的路径。
*   在事件处理程序中调用 event.stopPropagation() 无法停止附加在文档下方的事件处理程序；该事件已经传播到文档。
*   .live() 方法以令人惊讶的方式与其他事件方法交互，例如，$(document).unbind(“click”) 删除所有通过调用 .live() 附加的点击处理程序！

另外，请记住 .on() 函数仅包含在 jQuery 1.7 中，它不适用于早期版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:28:44.053

首先，`live()` 从 jQuery 1.7 开始，该方法已被弃用，您应该开始逐步淘汰其在代码中的使用。使用此方法不正确支持链式。

有**一篇很好的文章**比较`jQuery .bind() , .live() , .delegate() , .on()`

[http://www.elijahmanor.com/2012/02/differences-between-jquery-bind-vs-live.html](http://www.elijahmanor.com/2012/02/differences-between-jquery-bind-vs-live.html)

# c++ - 为什么在两个不同的类中调用同一对象时，TinyXPath 会给出不同的结果？

> ID：12263426
> 
> 赞同：0
> 
> 时间：2012-09-04T12:22:59.993
> 
> 标签：c++, xml, linux, tinyxml, tinyxpath

我正在 Ubuntu 上构建一个项目，其中我使用 TinyXPath 库和 TinyXml 来解析以下 xml：

```
<nodes>
    <node attribute1="1" attribute2="2" />
    <node attribute1="2" attribute2="3" />
    ...
    <node attribute1="10" attribute2="11" />
</nodes> 
```

要找出包含的节点条目数，我使用：

```
TinyXPath::i_xpath_int( xml_root,"count(/nodes/node)") 
```

显然，在一个对象中使用这个函数调用会返回实际的节点数，10；但是在另一个对象（不同的类类型）中使用它，它总是返回 0。我检查了 xml_root 在这两种情况下是否是同一个对象，并且两个对象具有相同的地址。打印内容给了我相同的xml。

相反，如果我使用 TinyXML，我会得到正确的结果，甚至可以访问所有属性并获得正确的结果。以下代码给出了正确的 no_nodes：

```
for(node = xml_root->FirstChild(); node; node = node->NextSibling())
    no_nodes++; 
```

奇怪的部分来了。如果我在 Windows 7 上构建这个项目，它工作得很好。函数调用总是返回正确数量的节点。有没有人遇到过这种问题？

PS：我知道我没有就这个问题给出很多细节，但这是一个巨大的项目，我需要几天时间来解释它。所以这只是在黑暗中的一个镜头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:24:05.010

通过使用 gdb，我发现“count(/products/product)”没有解析问题，正如我最初所想的那样。

问题是我的项目使用了很多不同的库。其中一个库使用的 tinyxml 版本与 tinyxpath 使用的版本不同。

当我从 tinyxpath 不起作用的项目中链接类的二进制文件时，我在 makefile 中使用了以下命令：

```
g++ -o binary -lahttplib -ltinyxpath [...] 
```

ahttplib 已经包含了一个旧版本的 tinyxml。因此，当 tinyxpath 被链接进来时，它会链接到已经包含在 ahttplib 中的 tinyxml 库，而不是它自己的版本。ahttplib 中的 tinyxml 版本和 tinyxpath 中的版本不兼容。

我的项目中tinyxpath运行良好的类的二进制文件只包括tinyxpath，所以问题没有发生在那里。

简单的解决方案是更改链接顺序：在 ahttplib 之前的 tinxypath。解决这个问题的正确方法是让 httplib 和 tinyxpath 引用同一个 tinyxml 库。

# jenkins - Jenkins MSTestRunner 插件无法启动 mstest.exe

> ID：12263430
> 
> 赞同：1
> 
> 时间：2012-09-04T12:23:05.693
> 
> 标签：jenkins, mstest, visual-studio-2012, jenkins-plugins

我已将 Jenkins [MSTestRunner](https://wiki.jenkins-ci.org/display/JENKINS/MSTestRunner+Plugin)插件配置为使用 MSTest 可执行文件的以下路径：'C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\mstest.exe'。然而，虽然这条路径是正确的，但构建失败如下：

```
cmd.exe /C "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\mstest.exe" "/resultsfile:/resultsfile testresults" /testcontainer:Project.Tests/bin/Debug/Project.Tests.dll && exit %%ERRORLEVEL%%
'C:\Program' is not recognized as an internal or external command, operable program or batch file. 
```

这里有什么问题，我认为这将是配置 MSTestRunner 插件的正常方式，因为 mstest.exe 安装在 Visual Studio 下，而 Visual Studio 又通常安装在“C:\Program Files (X86)”下？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:22:17.040

已收到插件作者的确认，即 MSTestRunner 0.2.0 不处理 MSTest 路径中的空格。我通过在 Jenkins 中创建一个直接调用 mstest.exe 的“执行 Windows 批处理命令”构建步骤来解决这个问题，其中我用双引号将 mstest.exe 路径括起来：

```
"C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\MSTest.exe" /testcontainer:Project.Tests\bin\Debug\Project.Tests.dll /resultsfile:testresults.trx 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-14T19:40:45.463

发现我的问题是 2 倍。

1.  文件条目来自本地工作区目录
2.  您必须在全局工具中配置 mstest，然后在构建步骤中选择该实例。

# c# - 子类构造函数的一些问题

> ID：12263433
> 
> 赞同：0
> 
> 时间：2012-09-04T12:23:13.493
> 
> 标签：c#, .net, inheritance, constructor

假设我有这个例子：

```
class A : SomeAbstractClassWithProperties
{
  public A(string id, int size)
  {
    this.Name = "Name1";
    this.Something = new SomethingElse(id, size);
  }

  //...some stuff
}

class B : A
{
  public B(string id, int size)
  {
    this.Name = "Name2";
    this.Something = new SomethingElse(id, size);
  }
} 
```

好的，这行不通：

```
Inconsistent accessibility: base class A is less accessible than class 'B'
'A' does not contain a constructor that takes 0 arguments 
```

但正如我们所见，**A 类**和**B**类的构造函数几乎相同。只是**this.Name**不同。我怎么能重写**B 类**？有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:24:45.407

请更新您的代码

```
class B : A
{
  public class B(string id, int size) : base(id, size) 
  { 
     this.Name = "Name2";
  }
} 
```

情况是您 B 构造函数尝试调用不存在的 A() 默认构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:30:15.003

您应该将默认（不带参数）构造函数添加到 A 类或像这样修改 B 类的构造函数

```
public class B(string id, int size) : base(id, size)
  {
    this.Name = "Name2";
    this.Something = new SomethingElse(id, size);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:35:33.250

当您创建 B 的实例时，由于 B 从 A 扩展，因此您也必须调用 A 的构造函数。由于您正在为 A 类定义一个构造函数，因此您不再拥有默认的无参数构造函数，因此您必须在 B 构造函数中调用 A 的构造函数并传递所需的参数。

```
public A(string id,int size):base(param1,param2...paramX) 
```

# java - 如何使用 Java 在 Excel 电子表格中获取单元格的内容？阿帕奇 POI

> ID：12263437
> 
> 赞同：0
> 
> 时间：2012-09-04T12:23:28.703
> 
> 标签：java, excel, apache-poi

我正在创建一个 Java 应用程序，我需要它来读取特定的单元格，文档上的单元格将包含字符串和一些整数。你能帮忙吗，我在下面找到了这个示例代码，但现在我被卡住了。我需要将电子表格上的数据保存到数据库中。谢谢你

```
InputStream inp = new FileInputStream("workbook.xls");
    //InputStream inp = new FileInputStream("workbook.xlsx");

    Workbook wb = WorkbookFactory.create(inp);
    Sheet sheet = wb.getSheetAt(0);
    Row row = sheet.getRow(2);
    Cell cell = row.getCell(3); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:17:01.810

我将您的代码更改为工作示例：

```
 InputStream inp = new FileInputStream("workbook.xls");
    HSSFWorkbook wb = new HSSFWorkbook(inp);
    Sheet sheet = wb.getSheetAt(0);
    Row row = sheet.getRow(2);
    Cell cell = row.getCell(3);
    if (cell.getCellType() == Cell.CELL_TYPE_STRING) {
        System.out.println("string: " + cell.getStringCellValue());
    }
    if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC) {
        System.out.println("numeric: " + cell.getNumericCellValue());
    }
    System.out.println("any: " + cell.toString()); 
```

我希望它有帮助！

# facebook - Facebook like 社交插件按赞后显示错误

> ID：12263438
> 
> 赞同：0
> 
> 时间：2012-09-04T12:23:30.153
> 
> 标签：facebook, facebook-graph-api, social-networking

我在我的 android 应用程序中使用 facebook 社交插件“喜欢”按钮。为了实现，我使用 android webview 加载从 URL [http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)单击“获取代码”时获得的 URL 。问题是有时在单击“赞”按钮后，它会以红色显示文本“错误”。如果我们点击它，它会显示一个对话框，上面写着警告：... 下面我添加了包含错误和警告的图像（取自桌面 Firefox）。

![在此处输入图像描述](../Images/9a494f44c5cb97faee46f12194b2906b.png)

**请让我知道任何人都面临同样的问题，以及如何解决它？**

提前致谢

@nish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:42:21.450

您尝试通过“赞”按钮分享的邮件内容被标记为垃圾邮件**。**您应该重新检查您的消息包含的 URL。

以下是 Facebook 对此消息的评价： [https ://blog.facebook.com/blog.php?post=18347337130](https://blog.facebook.com/blog.php?post=18347337130)

# c# - 如何在变量中检索查询结果以将其导出为 pdf？

> ID：12263450
> 
> 赞同：0
> 
> 时间：2012-09-04T12:24:10.210
> 
> 标签：c#, asp.net-mvc-3, pdf

我会在这里更好地解释一个安静的。我有这个方法，它根据我在文本框中通知的搜索字符串返回一些 ma 表行。

```
 public ActionResult Index(string site, string searchString)
    {
        var user = from m in db.OrderDetails
                   select m;

        if (!String.IsNullOrEmpty(searchString))
        {
            user = user.Where(s => s.Order.ClientID.Contains(searchString));                
        }

        if (!String.IsNullOrEmpty(site))
        {
            user = user.Where(c => c.Order.SiteNumber.Contains(site));
        }

            return View(user);            
    } 
```

在同一个类中，我有另一种生成pdf文件的方法（所有后端进程都设置在第二个项目中，包括第一个）。

```
 public ActionResult PrintOrders()
    {
        var user = from m in db.OrderDetails   
                   select m;                               

        return this.ViewPdf("Facture", "PrintView", user);
    } 
```

第二种方法，当它生成我的 pdf 文件时，会显示我的表的所有条目。我希望这样，当我单击我的链接（在显示我的表格条目的同一页面视图上）以生成我的 pdf 文件时，如果我之前进行过搜索，我就会有与我的搜索字符串（或网站字符串）匹配的字段。

我该如何实施？有办法吗？感谢您的帮助，对于可能不太相关的标题感到抱歉。也对不起我的英语，希望你能理解我的目的。

**编辑信息**

看完之后，当我像我的 Index() 方法一样设置我的 PrintOrders() 方法时，如下所示：

```
public ActionResult PrintOrders(string searchString, string username)        
{
            var user = from m in db.OrderDetails select m;

            if (!String.IsNullOrEmpty(searchString))
            {
                user = user.Where(s => s.Order.ClientID.Contains(searchString));               
            }

            if (!String.IsNullOrEmpty(site))
            {
                user = user.Where(c => c.Order.SiteNumber.Contains(site));               
            }

            return this.ViewPdf("Facture Krys-Group", "PrintView", user);
        } 
```

并像这样设置我的视图：

```
@using (Html.BeginForm("PrintOrders", "Historic", FormMethod.Get))
{ 

      Seach by ID : @Html.TextBox("searchString")

      Search by Site : @Html.TextBox("site")

      <input type="submit" value="Search" /></p>
} 
```

然后它工作。**但是在我的视图中，我已经为“Index”而不是“PrintOrders”使用了相同的表单。我怎样才能将两者结合起来？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:07:03.860

I am not sure I follow you completely but I think you achieve what you are looking for with the use of partial views. The form you mention can be a partial view that gets rendered into the pdf view and like that you really have one form but displayed in both pages. Hopefully I understood what you were after and this helps you.

# dom - PhantomJS：onLoadFinished 什么时候触发，它可以在外部资源（如图像）完成之前触发吗？

> ID：12263454
> 
> 赞同：1
> 
> 时间：2012-09-04T12:24:27.953
> 
> 标签：dom, phantomjs

我正在将一些 HTML 加载到 WebPage 对象中并监听“onLoadFinished”事件。当 onLoadFinished 被触发时，我将网页渲染为 png。

我看到的问题是，当我使用像[http://example.com/image.png这样的 SRC 属性时，HTML 内容中的某些图像会始终呈现，但是当我使用](http://example.com/image.png)[https://example.com](https://example.com/image.png)时不会一致呈现[/image.png](https://example.com/image.png)在 SRC 属性中（当我通过浏览器访问 SSL 和非 SSL 风格时，它们都可以正常提供）。

渲染问题是由于时间问题吗？onLoadFinished 可以在加载图像之前触发吗？如果是这样，是否有一种干净的方法可以在渲染为 PNG 之前验证图像是否已加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:40:26.137

我注意到与 PhantomJS 类似的东西。在多个页面上抓取链接时，有时会触发两次 onLoadFinished-event。一个还为时过早，还没有提供所有资源。我的解决方法是在 onResourceReceived 上等待页面的状态代码，然后只有在正确的触发时才执行“onLoadFinished”（拒绝那个早期调用）。

# sencha-touch - 从 localStorage 获取值以在 Sencha Touch AJAX 代理中使用

> ID：12263457
> 
> 赞同：2
> 
> 时间：2012-09-04T12:24:35.090
> 
> 标签：sencha-touch, sencha-touch-2

在我的 Sencha Touch 应用程序中，我将一些值存储在 localStorage 中，它们存储得很好。稍后我需要将这些值用于对商店的请求，并且需要将这些值作为请求标头传递。代码如下所示：

```
Ext.define('AppName.store.storeName', {
    extend: 'Ext.data.Store',

    requires: [
        'AppName.model.modelName'
    ],

    config: {
        model: 'AppName.model.modelName',
        storeId: 'storeName',
        proxy: {
            type: 'ajax',
            url: 'http://dynamic',
            headers: {
                auth_token: localStorage.getItem('activeUserToken'),
                user_email: localStorage.getItem('userEMail')
            },
            reader: {
                type: 'json'
            }
        }
    }
}); 
```

但是，当我在 Chrome 开发人员工具中清楚地看到这些值时，auth_token 和 user_email 值都被返回为“未定义”。除此之外，我在我的 Sencha Touch 应用程序的许多其他地方访问这些值，但不能在商店本身中这样做。

谁能告诉我我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:06:52.020

我已经通过以下方式解决了这个问题。在加载存储之前，我没有在存储中传递标头，而是在请求期间传递标头。这是代码：

```
 Ext.getStore('storeName').getProxy().setUrl(someURL);

    Ext.getStore('storeName').getProxy().setHeaders(
         {
             "auth_token" : activeUserToken,
             "user_email" : userEmail
         }
    );

    Ext.getStore('storeName').load(); 
```

# batch-file - 批处理文件的for循环中带有空格的路径

> ID：12263458
> 
> 赞同：4
> 
> 时间：2012-09-04T12:24:36.277
> 
> 标签：batch-file

我正在尝试这个命令：

```
for /f "tokens=3 usebackq" %%i in (`"%~dp0imagex.exe" /info "%~dp0DVD\sources\install.wim" ^| findstr /c:"Image Count:"`) do set ImageCount=%%i 
echo %ImageCount% 
```

如果路径 %~dp0 包含诸如“D:\my work”之类的空格，我会收到错误消息。虽然我使用了 usebackq 和反引号而不是单引号。

错误信息是：'D:\my' 不是内部或外部命令、可运行程序或批处理文件。

我的命令有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:03:43.577

如果这不起作用：

```
for /f "tokens=3 usebackq" %%i in (`"%~dp0imagex.exe" /info "%~dp0DVD\sources\install.wim" ^| findstr /c:"Image Count:"`) do set ImageCount=%%i 
echo %ImageCount% 
```

* * *

试试这个：

```
pushd %~dp0
for /f "tokens=3 usebackq" %%i in (`imagex.exe" /info "DVD\sources\install.wim" ^| findstr /c:"Image Count:"`) do set ImageCount=%%i 
echo %ImageCount%
popd 
```

# jquery - 禁用具有 href="javascript:;" 的链接 直到选择选项

> ID：12263459
> 
> 赞同：0
> 
> 时间：2012-09-04T12:24:37.440
> 
> 标签：jquery

我有一个链接需要禁用，直到从选择框中进行选择

```
<select id="shippingSelect" onchange="simpleCart.update();">
                    <option value="nothing" selected="selected">Choose Shipping Location</option>
                    <option value="uk">UK - FREE</option>
                    <option value="world">Rest of World + £2.00</option>
                </select>

<a href="javascript:;" class="simpleCart_checkout"> Place Order </a> 
```

在客户选择发货地点之前，如何禁用下订单链接？

这就是我目前所拥有的：

```
<script>
    $('#shippingSelect').change(function() {
       if ($(this).val() != "nothing") {

          $('.place_order').slideDown();
       } else {
          $('.place_order').slideUp();

       }
    });
    </script> 
```

哪个有效，但我宁愿让链接一直可见，只是不可点击。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T12:28:38.280

在您的链接处理程序上，您可以检查是否`nothing`选择了与

```
 $('a.simpleCart_checkout').click(function(e) {
     if ($('#shippingSelect').val() == 'nothing') {
        e.preventDefault(); // disable link navigation
     }        
     // your logic for the case that something is selected
 }); 
```

在任何情况下，最好添加一些视觉指示来指示链接已禁用，例如灰色字体或其他内容，并在组合框中选择有效元素时将其删除。

另一种考虑链接样式的方法

**HTML**

```
<a href="javascript:;" class="simpleCart_checkout disabled"> Place Order </a> 
```

**CSS**

```
.disabled
{ 
    color: #AAA
} 
```

**​JS**

 **```
$('#shippingSelect').change(function() {
   if ($(this).val() == "nothing") {
      $('a.simpleCart_checkout').addClass('disabled');
   } 
   else {
      $('a.simpleCart_checkout').removeClass('disabled');
   }
});

$('a.simpleCart_checkout').click(function(e) {
    if ($(this).hasClass('disabled')) {
       e.preventDefault(); // disable link navigation
    }        
    // your logic for the case that something is selected
}); 
```

**[演示第二个方法](http://jsfiddle.net/LtaAZ/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:28:52.117

您可以使用此脚本禁用/启用按钮

```
<script>
    $('#shippingSelect').change(function() {
       if ($(this).val() != "nothing") {

          $('.place_order').removeAttr("disabled");
       } else {
          $('.place_order').attr("disabled", "disabled");

       }
    });
    </script> 
```**

# javascript - 将 Java 对象转换为 JSON？

> ID：12263468
> 
> 赞同：1
> 
> 时间：2012-09-04T12:25:01.070
> 
> 标签：javascript, jquery, json, struts2

我将 struts2 用于 Action，将 jquery 用于 UI ...

我想知道如何将 Map 对象转换为 JSON 对象并将其发送回 UI，

现在可以在 JSP 页面中打印普通的 java Map 对象：

```
{71=Heart XXX, 76=No Heart YYY} 
```

但我希望它是这样的：

```
{71:Heart XXX, 76:No Heart YYY} 
```

我将如何实现这一目标....？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T15:20:59.930

我个人`struts2-json`为此使用插件。它非常易于使用，您可以通过一些 struts.xml 条目轻松地将 Map 转换为 Json，反之亦然。创建地图及其 getter/setter。

```
private Map<String, String> map= new HashMap<String, String>(); 
```

将全局结果定义为

```
 <result-type name="json" class="org.apache.struts2.json.JSONResult" default="false" /> 
```

在您`struts.xml`的会话堆栈中添加拦截器。

```
<interceptor name="json" class="org.apache.struts2.json.JSONInterceptor" />

<action name="YouAction" class="YourActionClass" method="executeMethod">
         <result type="json"></result>
</action> 
```

[更多文档可以在这里找到](http://struts.apache.org/2.2.3/docs/json-plugin.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T04:42:20.323

要添加到 Ashish 的答案，那就是在添加 struts2-json-plugin 之后。

我喜欢在可能的情况下使用 struts2-conventions-plugin，因为我的 struts.xml 中只有很少的内容，并且更喜欢主要使用注释。

要让您的操作在使用约定时返回 json，有两个步骤：1) 让您的操作使用 json-default 包，2) 将操作定义为具有 json 结果类型。

**JSON 注释示例**

```
package org.test.action;

import com.opensymphony.xwork2.ActionSupport;
import org.apache.struts2.convention.annotation.ParentPackage;
import org.apache.struts2.convention.annotation.Result;
@ParentPackage("json-default")
@Result(type = "json")
public class JsonTest extends ActionSupport{
    private String name = "Hello World";
    private String language = "Java, I mean English";

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getLanguage() {
        return language;
    }

    public void setLanguage(String language) {
        this.language = language;
    }
} 
```

有时值比原始值更复杂，您会想要修剪返回的 json，或者有时您会想要将多个操作放入单个类中（有时您会得到一个复杂的结构，并通过修剪它以某些方式可以使您的工作在客户端更容易）。为此，我们使用包含或排除参数。

**示例排除语言**

将上述结果注解修改为：

```
@Result(type = "json", params = {
    "excludeProperties",
    "language"}) 
```

实现上述目标的另一种方法是明确说明我们想要的属性：

```
@Result(type = "json", params = {
    "includeProperties",
    "name"}) 
```

**示例 使用带排除参数的通配符** 未提供操作代码，适用于修剪复杂对象

```
@Result(type = "json", params = {
    "excludeProperties",
    "punches.*.punchesCollection, *.punchesCollection.*"}) 
```

您可以使用插件看到它比 xml 或注释方法更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:30:00.947

[在http://www.json.org/](http://www.json.org/)上有一堆用于 Java 的 JSON 库。我会检查其中之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T12:33:43.860

尝试[Gson](http://code.google.com/p/google-gson/)：

```
Gson gson = new Gson();
String json = gson.toJson(yourMap); 
```

不过，我不建议将这种代码放入 JSP。像这样的东西应该存在于像 Servlet 或 Action 类这样的控制器中。

您也绝对不希望输出为：

```
{71:Heart XXX, 76:No Heart YYY} 
```

而是像正确的 JSON（引用的名称，引用的字符串值）：

```
{"71":"Heart XXX", "76":"No Heart YYY"} 
```

Gson 将输出后者。

# cocoa - 基于视图的 NSTableView 视图控制器

> ID：12263469
> 
> 赞同：1
> 
> 时间：2012-09-04T12:25:04.377
> 
> 标签：cocoa, nstableview, cocoa-bindings

我不确定我是否做对了，但这是我的问题：

我有一个基于视图的 NSTableView 使用绑定到数组控制器。

我需要在每一行上做一些自定义绘图，这取决于表示的对象以及在某些区域捕获点击，所以为此我需要为每一行设置一个控制器并在我的自定义单元格视图中为子视图设置出口，但我不明白我怎么能做到这一点。

如果我只是将一个对象添加到笔尖并与之建立连接，那么我无法判断哪些视图正在被绘制（或已被单击）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:31:39.080

您必须实现委托方法：

```
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row 
```

表格视图使用它来获取给定单元格（列、行）的视图。然后通过使用“makeViewWithIdentifier:owner:”，您可以获得具有给定标识符和给定所有者（视图控制器）的可重用单元格。最简单的方法是在 Interface Builder 中设计您的单元格，并为每个单元格设置不同的标识符。然后方法“makeViewWithIdentifier:owner”会自动为你创建一个给定标识符的视图。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T14:11:39.727

我刚刚发现有人问了一个[类似的问题](https://stackoverflow.com/questions/12266701/how-to-trigger-an-action-from-a-nstablecellview-in-view-based-nstableview-when-u)，并且它的答案也满足了我的需求，所以对于最终来到这里的任何人，这就是我所做的：

*   我将我的`NSTableCellView`控制器设置为`NSTableView`.

*   在我的`NSTableCellView`子类中，我实现了所需的方法（`drawRect:`等等`mouseUp:`）并在控制器中调用相应的方法。

*   要访问控制器，我得到它`NSTableView`，然后是它的委托，如下所示：

    ```
    NSTableView *tableView = (NSTableView*)myView.superview.superview.superview;
    MyControllerClass *controller = (MyControllerClass*)tableView.delegate;
    [controller view:myView drawRect:dirtyRect] 
    ```

*   在控制器上，为了告诉哪个视图正在发送事件，我使用它们的标识符。

# java - 警报对话框中的上下文

> ID：12263471
> 
> 赞同：1
> 
> 时间：2012-09-04T12:25:10.787
> 
> 标签：java, android, this, android-alertdialog

这是我正在使用的警报对话框的代码：

```
new AlertDialog.Builder(AlertDemo.this)
    .setTitle("This is Alert Demo")
    .setMessage("Here is an Alert Message!")
    .setNeutralButton("Close", new DialogInterface.OnClickListener() 
    {
        public void onClick(DialogInterface dlg, int sumthin) 
        {
            // do nothing – it will close on its own
        }
    })
    .show(); 
```

当我写`this`而不是`AlertDemo.this`显示错误时`The constructor AlertDialog.Builder(new View.OnClickListener(){}) is undefined`..这是什么意思？`this`和有什么区别`AlertDemo.this`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:01:05.587

如果简单地使用`this`，它是内部类 View.onClickListener 的一个实例

为了在单击按钮时显示 alertdialog，您需要传递 AlertDemo 类的实例。

这就是你使用的原因`AlertDemo.this`

# jquery - 为什么 jQuery.data 不起作用？

> ID：12263472
> 
> 赞同：2
> 
> 时间：2012-09-04T12:25:13.740
> 
> 标签：jquery

这是我正在处理的一些 HTML 页面的 Javascript 代码：

```
var widgetsList = $("[widgetId]");
ToLogger("Init: " + widgetsList.length + " widgets found.");
for (var i=0; i<widgetsList.length; i++)
{
  var widget = widgetsList[i];
  var jqID = "#" + widget.id;

  var refreshInterval = $(jqID).attr("refreshInterval");
  if (refreshInterval == undefined)
    refreshInterval = "30";

  $(jqID).data("refreshCounter", "0");
  var x = $(jqID).data("refreshCounter");
  ToLogger(" = widget[ " + widget.id + " ].refreshCounter(init1) = " + x);

  var widgetObj = $(jqID);
  jQuery.data(widgetObj, "refreshCounter", "0");
  x = jQuery.data(widgetObj, "refreshCounter");
  ToLogger(" = widget[ " + widget.id + " ].refreshCounter(init2) = " + x);
} 
```

但在日志输出中我看到：

```
DashboardInit: 1 widgets found.
= widget[ Q.RecordCounters ].refreshInterval = 30
= widget[ Q.RecordCounters ].refreshCounter(init1) = undefined
= widget[ Q.RecordCounters ].refreshCounter(init2) = 0 
```

为什么 '$(jqID).data("refreshCounter")' 返回 'undefined'？一个月前，这个 javascript 代码运行良好！现在它有什么问题？我已经使用 jQuery 1.7.2 和 1.8.1 进行了尝试——工作方式相同。难道是因为浏览器更新了？(火狐15.0)

下一个问题 - 甚至 jQuery.data(...) 在计时器函数中也不起作用：

```
var timerLock = false;
function OnTimer()
{
  if (timerLock) return ;
  timerLock = true;
  for (var i=0; i<widgetsList.length; i++)
  {
    var widget = widgetsList[i];
    var jqID = "#" + widget.id;
    var widgetObj = $(jqID);
    var x = jQuery.data(widgetObj, "refreshCounter");
    var counter = parseInt(x);
    ToLogger(" = widget[ " + widget.id + " ].refreshCounter = " + x + " / " + counter);
  }
} 
```

但在日志输出中我看到：

```
= widget[ Q.RecordCounters ].refreshCounter = undefined / NaN 
```

为什么是“未定义”？！如果 .data("refreshCounter") 之前已成功分配，那么我认为它一定不是“未定义”。你看到了吗 - 它可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:04:57.720

我在评论中看到你有一个点“。” 在对象 ID 中。您仍然可以使用以下语法选择该元素： Let id be`'abc.456'` 选择器将是`$("[id='abc.456']")`

我希望你会发现我的回答很有帮助。

# .htaccess - 如何将整个域重定向到特定文件夹

> ID：12263475
> 
> 赞同：0
> 
> 时间：2012-09-04T12:25:24.053
> 
> 标签：.htaccess

我想使用 .htaccess 文件重写 url，我的所有数据都保存在服务器上的工作文件夹中，我想在用户输入完整的网址时显示该文件夹

`www.example.com`使用`www.example.com/work`mod_rewrite

我的代码是

```
RewriteRule ^(.*)$ /work/$1 [L,QSA]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L] 
```

当我输入类似`www.example.com/folder/`的东西时，此代码会产生问题，它会将我重定向到外部`www.example.com/work/folder/`并显示 404 页面未找到，即使工作包含该文件夹并且该文件夹包含 index.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:04:22.153

尝试这个 ：

```
RewriteCond %{REQUEST_URI} !^/?work/
RewriteRule ^(.*)$ /work/$1 [L,QSA]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.+)$ $1.php [NC,L] 
```

# javascript - 单击文本时删除文本框的默认数据

> ID：12263479
> 
> 赞同：0
> 
> 时间：2012-09-04T12:25:36.687
> 
> 标签：javascript

如您所知，我想在单击文本框时删除它的默认值，此代码有效。但是，当我单击该框，然后再次单击屏幕的另一部分（我的意思是超出文本框）时，数据将不会返回。我该怎么办？

```
 <html><head><title>(Type a title for your page here)</title>

  <script type="text/javascript">
  function make_blank()
  {
  document.form1.type.value ="";
  }
  </script>

  </head>
  <body >

  <form name=form1 method=post action='test.php'>
  <input type=text name=type value='Enter your user id' onclick="make_blank();">Enter User ID
     <b>Type</b>
  <input type=submit value=Submit> </form>

  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:45:57.047

您的问题的解决方案是以下之一，具体取决于您使用的是 HTML5 还是 XHTML（或 HTML4）。由于您没有说明您使用的是哪一个，因此我将两者都添加。

顺便说一句，你真的想使用焦点事件，而不是点击事件。这是因为用户还可以使用他/她的键盘或其他访问键导航到表单字段。

正如 Quentin 正确[指出](https://stackoverflow.com/questions/12263479/removing-default-data-of-a-text-box-while-clicking-the-text/12263782#comment16442906_12263782)的那样，[规范](http://www.w3.org/TR/html5/common-input-element-attributes.html#the-placeholder-attribute)清楚地说明了占位符文本应该用于什么。因此，我已将您使用的文本更新为更合适的内容。

**HTML5**

```
<input type="text" name="type" placeholder="email@example.com"> 
```

**XHTML**

HTML：

```
<input type="text" name="type" value="email@example.com"
    onfocus="make_blank(this);"  onblur="restore_placeholder(this);" /> 
```

Javascript：

```
function make_blank (oInput)
{
    if (!('placeholder' in oInput))
        oInput.placeholder = oInput.value;
    if (oInput.value != oInput.placeholder)
        oInput.value = '';
}

function restore_placeholder (oInput)
{
    if (oInput.value == '' && 'placeholder' in oInput)
        oInput.value = oInput.placeHolder;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T10:44:57.380

HTML5 和 JavaScript（用于 HTML4）的以下组合对我来说很好用：

HTML：

```
<input type="text" name="type" placeholder="email@example.com" 
       onfocus="make_blank(this);"
       onblur="restore_placeholder(this);" /> 
```

Javascript：

```
function make_blank(oInput) {
    if (oInput.value == 'placeholder') {
        oInput.value = '';
    }
}

function restore_placeholder(oInput) {
    if (oInput.value == '') {
        oInput.value = 'placeholder';
    }
} 
```

# jquery - jQuery在第三个之后隐藏表格行

> ID：12263480
> 
> 赞同：2
> 
> 时间：2012-09-04T12:25:38.153
> 
> 标签：jquery, html-table

我想使用 jQuery 在第三行之后隐藏表中的所有行。这是我的方法：

```
<table>
    <tr id="duplicate">
        <td style="text-align:center;">1</td>
    </tr>
    <tr id="duplicate">
        <td style="text-align:center;">2</td>
    </tr>
    <tr id="duplicate">
        <td style="text-align:center;">3</td>
    </tr>
    <tr id="duplicate">
        <td style="text-align:center;">4</td>
    </tr>
    <tr id="duplicate">
        <td style="text-align:center;">5</td>
    </tr>
</table> 
```

jQuery：

```
$(document).ready(function() {
    $('#duplicate'):nth-child(n+3).hide();
    alert('123');
}); 
```

当然，警报显示得很好，所以它会被执行，但我的表没有任何结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T12:31:52.437

`id`永远不要对每个都使用相同的`tr`......永远不要。`Id`在 HTML 中具有唯一的名称。您不会收到警告，但代码不会被正确处理。

使用类而不是 id。

```
 <tr class="duplicate">
        <td style="text-align:center;">1</td>
    </tr>
    <tr class="duplicate">
        <td style="text-align:center;">2</td>
    </tr>
    <tr class="duplicate">
        <td style="text-align:center;">3</td>
    </tr>
    <tr class="duplicate">
        <td style="text-align:center;">4</td>
    </tr>
    <tr class="duplicate">
        <td style="text-align:center;">5</td>
    </tr>
... 
```

和 Javascript：

```
$(document).ready(function() {
    $('.duplicate:gt(2)').hide();
    alert('123');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T12:32:44.777

首先 id 名称必须是唯一的。你应该使用类。

```
$(document).ready(function() {
    $('.duplicate:gt(2)').hide();
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T12:33:27.407

使用**gt()**选择器

```
 $('.duplicate').gt(2).hide(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-04T12:34:33.437

不要为每个人设置 ID，只为 table ：

```
<table id="duplicate">
    <tr>
        <td style="text-align:center;">1</td>
    </tr>
    <tr>
        <td style="text-align:center;">2</td>
    </tr>
    <tr>
        <td style="text-align:center;">3</td>
    </tr>
    <tr>
        <td style="text-align:center;">4</td>
    </tr>
    <tr>
        <td style="text-align:center;">5</td>
    </tr>

</table> 
```

并将脚本更改为：

```
$(document).ready(function() {
    $('#duplicate tr:nth-child(n+3)').hide();
    alert('123');
}); 
```

[**演示**](http://jsfiddle.net/n59yz/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T12:33:13.407

好的，首先，不要使用 ID 属性将 ID 替换为类...

```
<table>
    <tr class="duplicate">
        <td style="text-align:center;">1</td>
    </tr>
    <tr class="duplicate">
        <td style="text-align:center;">2</td>
    </tr>
    <tr class="duplicate">
        <td style="text-align:center;">3</td>
    </tr>
    <tr class="duplicate">
        <td style="text-align:center;">4</td>
    </tr>
    <tr class="duplicate">
        <td style="text-align:center;">5</td>
    </tr> 
```

`$('.duplicate').gt(2).hide();`

应该做的很好...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-04T12:34:39.183

尝试这个：

```
$(document).ready(function() {
 $("table tr:first").nextAll().hide();
)); 
```

并为所有人设置不同的标识符`<tr>`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-04T12:34:13.823

尝试这个

```
 $(document).ready(function ()
{

    $("table tr").each(function (indx, ob)
    {

        if (indx > 2)
        {
            $(ob).hide();
        }
    })

});​ 
```

小提琴：http: [//jsfiddle.net/w3yjH/](http://jsfiddle.net/w3yjH/)

# c# - 为什么 VB.Net 代码中的此错误在 C# 中运行良好（语法更改后）

> ID：12263482
> 
> 赞同：3
> 
> 时间：2012-09-04T12:25:47.087
> 
> 标签：c#, vb.net

我来自 C# 背景，现在必须在 VB.Net 中编码（新工作）

我正在 VB.Net 中编写代码，该代码在 C# 中运行良好（在语法更改后），但在 VB.Net 中它给出了`Array bounds cannot appear in type specifiers`.

**C# 代码**

```
TimeSpan yesterday = new TimeSpan(1, 19, 0);

DateTime today = new DateTime(2012, 9, 4, 8, 48, 0);

DateTime ts = today.Add(new TimeSpan(9, 0, 0)).Subtract(yesterday); 
```

**VB.Net代码**

```
Dim yesterday As New TimeSpan(1, 19, 0)

Dim today As New DateTime(2012, 9, 4, 8, 48, 0)

Dim ts As today.Add(New TimeSpan(9, 0, 0)).Subtract(yesterday) 
```

它在 VB 代码的第 3 行给出了这个错误`New`。我哪里错了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T12:27:18.403

```
Dim ts As today.Add(New TimeSpan(9, 0, 0)).Subtract(yesterday) 
```

应该

```
Dim ts = today.Add(New TimeSpan(9, 0, 0)).Subtract(yesterday) 
```

或者

```
Dim ts As DateTime = today.Add(New TimeSpan(9, 0, 0)).Subtract(yesterday) 
```

* * *

声明变量时，您使用`As`作为类型说明符。

```
Dim x As Int32
x = 10 
```

或者

```
Dim x As Int32 = 10 
```

在为同一行的变量赋值时，可以省略类型说明符。

```
Dim x = 10 
```

* * *

正因为如此，我一般不会混淆`As`和`New`喜欢这个

```
Dim x As New FooBar() 
```

因为我认为这有点令人困惑。我更喜欢

```
Dim x = New Foobar() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:30:33.353

您必须显式声明数据类型，尤其是对于“已知”数据类型。请记住，Visual Basic 是`CASE INSENSITIVE`

```
Dim ts As datetime = today.Add(New TimeSpan(9, 0, 0)).Subtract(yesterday) 
```

但如果已设置，您可以省略变量的数据类型

```
Option Infer ON 
```

默认情况下，它是`ON`

# java - exec 命令在 Linux 服务器上不起作用

> ID：12263484
> 
> 赞同：2
> 
> 时间：2012-09-04T12:25:56.987
> 
> 标签：java, php, linux

我使用 PHP 调用 Java 函数。代码是：

```
exec('pushd d:\xampp\htdocs\file_excecute\class & java Autoingestion username password id   Sales Daily Summary 20120902',$output,$return); 
```

此代码在 Windows 机器上运行，但在 Linux 服务器上不运行。代码是：

```
exec('pushd \var\www\domainname.com\itune_report\class & java Autoingestion username password id Sales Weekly Summary 20120901',$output,$return); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:47:31.430

您使用了错误的斜杠作为字段分隔符，但这可能不是您唯一的问题。

该命令的输出出现在 $output 中，因为您使用了该`exec(command, output, return)`表单。

然而，这只给你标准输出。shell 会将错误消息发送到 stderr。

不幸的是，没有`exec()`读取标准错误的版本。

您可以通过在 shell 命令末尾`$output`添加来合并两个输出：`2>&1`

```
exec("mycommand 2>&1", $output, $return); 
```

查看 $output，您将*找到*成功命令的输出*或*错误消息，您可以使用它们来找出它不起作用的原因。

如果您想编写更严格的东西来分别处理 stdout 和 stderr，则需要`proc_open()`改用：[PHP StdErr after Exec()](https://stackoverflow.com/questions/2320608/php-stderr-after-exec)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:30:43.490

在启用 SELinux 的机器上尝试从 PHP 脚本和 PHP 调用的外部脚本执行 sudo 命令时，存在（也许是无法克服的）困难。

确保在命令中使用 Linux 目录路径

默认情况下，Linux 不会让 apache 更改进程的组 ID。

您可能需要使用另一种解决方案，例如让 PHP 脚本将文件存放在由 cron 或 inotify 监视的目录中，该目录将以 root 权限调用另一个脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:31:01.770

显然它不适用于 Linux。命令`pushd`仅在 windows shell 中定义。linux 上的路径必须使用正斜杠而不是反斜杠作为分隔符。

# asp.net - 如何模拟 WCF REST 服务

> ID：12263485
> 
> 赞同：0
> 
> 时间：2012-09-04T12:25:57.247
> 
> 标签：asp.net, asp.net-mvc-3, wcf, wcf-binding, wcf-client

如何模拟 WCF REST 服务：

HttpWebResponse 响应；

```
 HttpWebRequest request;

        try
        {
            request = (HttpWebRequest)HttpWebRequest.Create(System.Configuration.ConfigurationManager.AppSettings["TransferUrl"] + "/Download/" + ID1 + "/" + ID2 );

            request.Method = "GET";

            response = (HttpWebResponse)request.GetResponse();
        } 
```

即使在服务中的代码中也可以做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:32:00.510

想到几个方法：

*   使用 Mocking 框架（例如[Rhino Mocks](http://hibernatingrhinos.com/open-source/rhino-mocks)）来替换调用。
*   将您的客户端代理放在接口后面，以便您可以在运行时指定行为。换句话说，在生产中，您的代码将访问服务，在测试中，您会访问一些您已经放在一起的测试实现。
*   将您的客户端指向 REST 服务的测试实现。

# javascript - Firefox - 不在输入控件上时隐藏焦点突出显示

> ID：12263487
> 
> 赞同：0
> 
> 时间：2012-09-04T12:26:11.150
> 
> 标签：javascript, jquery, html, firefox

我们有一个要求，一个页面可以由一个包含多个部分的表单组成。可以添加或删除部分。在用户选择添加一个部分后，表单被提交并返回一个新页面，其中添加了新部分。浏览器应该滚动到新部分的顶部。这很好，我有一个通用的 jquery“滚动到锚点”解决方案工作。但是，除了简单的设置之外`window.location()`，我还需要确保对于键盘用户，点击 tab 会将他们带到锚点之后的下一个字段。我正在使用这个[问题](https://stackoverflow.com/questions/10593111/focus-on-textarea-based-from-anchor-link)的解决方案来做到这一点。

这在 IE 8/9 中运行良好，但在 Firefox(15) 中，我看到在锚标记所在的位置呈现了一个小的焦点方块。我想抑制这一点，我尝试设置`display:none`，但当然这会停止滚动工作。我试图创建一个[小提琴](http://jsfiddle.net/7egKz/1/)，但 jsFiddle 没有证明这个问题，因为 fddle 站点本身正在干扰焦点设置 - 但在本地运行的同一浏览器中的相同代码确实如此。

这是我的代码的简化版本，它演示了这个问题。

```
<html>
  <head>
     <title>test scroll</title>
  </head>
  <body>
        <form>
            <div>Blah</div>
            <div>
            <label for="a">Section 1: <input id="a" type="text" /></label>
        </div>
        <a id="scrollToAnchorSection2"></a>
        <div>
            <label for="b">Section 2: <input id="b" type="text" /></label>
        </div>
    </form>
</body>
</html> 
```

和我的jQuery

```
$(document).ready(function() {
     /* Find any "scroll to anchors" that have been set */
    var anchors = $('[id*=scrollToAnchor]:first');
    if (anchors.length == 1) {
        window.location = "#" + anchors.attr("id");

        // Set tab position
        anchors.attr("tabindex", -1).focus();

    }
}); 
```

和CSS

```
div {
    margin-left:5em;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:53:48.240

按照要求...

模糊功能负责输入失去焦点。

`$('input').blur(function (){...})?`这不是你需要的吗？

jquery[文档](http://api.jquery.com/blur/)有这个有趣的评论。

*"The blur event is sent to an element when it loses focus. Originally, this event was only applicable to form elements, such as . In recent browsers, the domain of the event has been extended to include all element types."*

# php - Heroku 上的 Lithium PHP

> ID：12263488
> 
> 赞同：1
> 
> 时间：2012-09-04T12:26:24.627
> 
> 标签：php, heroku, lithium

我正在尝试在 Heroku 上部署 Lithium 应用程序，但 Heroku 对应用程序使用只读文件系统。这会导致 app/resources 文件夹出现问题。我尝试寻找设置锂配置来更改此文件夹的路径，但它似乎是硬编码的。

谁能推荐如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:31:56.363

Lithium 使用该`/resources`文件夹来写入临时文件，例如日志、文件缓存、编译的 PHP 模板等。

该路径可`Libraries::add()`在应用程序初始化时进行配置。在`config/bootstrap/libraries.php`中，您可以将应用程序的`Libraries::add()`调用替换为如下所示：[https ://github.com/orchestra-io/sample-lithium/blob/master/app/config/bootstrap/orchestra.php#L10](https://github.com/orchestra-io/sample-lithium/blob/master/app/config/bootstrap/orchestra.php#L10)

此配置使用系统的临时目录，并检查/初始化 Lithium 将使用的子目录。

# javascript - 用于编码标准的 javascript 工具

> ID：12263490
> 
> 赞同：2
> 
> 时间：2012-09-04T12:26:33.427
> 
> 标签：javascript, coding-style, automation, rubymine

我正在寻找一种理想情况下可以集成到 ruby​​mine 中的工具（但命令行也可以），当我针对某些编码标准编写 javascript 时会警告我。该工具应该能够允许我添加额外的规则，以便我可以做一些事情，比如在程序员使用框架中不推荐的某些方法时警告他们等

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:35:51.063

你看过 JsLint 吗？

[JSLint，JavaScript 代码质量工具](http://www.jslint.com/)

有可用的命令行工具，但也可以将其集成到您的 ide 中。

[http://www.javascriptlint.com/download.htm](http://www.javascriptlint.com/download.htm)

# magento - 是否可以在 Magento 1.4.0.1 中锁定 SKU 字段以防止进一步编辑？

> ID：12263491
> 
> 赞同：1
> 
> 时间：2012-09-04T12:26:46.703
> 
> 标签：magento, magento-1.4

因为如果现有产品有两个不同的 sku 编号，我们的仓库导入脚本就会崩溃。

是否可以在初始创建后将 SKU 字段设置为只读？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:09:06.673

在呈现管理员编辑/新视图（可能来自某些观察者）之前，您可以尝试使用在产品模型上调用的方法“lockAttribute（SattributeCode）”。

# sql - 如何通过 SQL 自动将月度记录插入表中？

> ID：12263492
> 
> 赞同：1
> 
> 时间：2012-09-04T12:26:53.007
> 
> 标签：sql, ms-access, select, insert, ms-access-2007

我正在尝试根据另一个表中的说明在一个表中生成月度记录。软件 - MS Access 2007，虽然我在这里寻找 SQL 解决方案。为了大大简化问题，假设以下描述了这些表格：

```
 TaskManager:
  - DayDue
  - TaskName

 Task:
  - DateDue
  - TaskName 
```

所以发生的情况是TaskManager中可能有一个条目{15，“Accounts due”}，因此这应该会导致Task表中的“Account due”记录到期日为每月15日。我希望它能为过去几个月和明年创造记录。

我认为我需要做的是首先创建一个 SELECT 查询，该查询会为 TaskManager 表中的每条记录生成 x 条记录，每个月都有一个日期。之后，我执行一个 INSERT 查询，如果记录在上述 SELECT 查询中不存在，则将记录插入到 Task 表中。

我想我可以管理 INSERT 查询，尽管我无法弄清楚如何执行 SELECT 查询。有人可以给我指点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:42:29.700

您可以使用日历表。

```
INSERT INTO Task ( DateDue, TaskName )
SELECT calendar.CalDate, TaskManager.TaskName
FROM calendar, TaskManager
WHERE (((Day([CalDate]))=TaskManager.DayDue) 
AND ((calendar.CalDate)<#7/1/2013#)); 
```

日历表将仅包含所有日期和其他相关字段，例如工作日 (yesno)。日历表通常非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T06:16:59.307

这是我使用 Remou 的日历表想法开发的解决方案。

首先创建一个日历表，它只包含所需范围的所有日期。在 Excel 中制作日期并将其粘贴到表格中很容易。这也是一种非常可靠的方法，因为 Excel 可以正确处理现代日期范围的闰年。

构建此表后，要运行三个查询。第一个是 SELECT，它根据日期和频率选择 TaskManager 生成的每个可能的任务。此查询称为 TaskManagerQryAllOptions，并具有以下代码：

```
SELECT TaskManager.ID, Calendar.CalendarDate
FROM TaskManager INNER JOIN Calendar ON
        TaskManager.DateDay = Day(Calendar.CalendarDate)
WHERE (TaskManager.Frequency = "Monthly")
    OR (TaskManager.Frequency = "Yearly" AND
            TaskManager.DateMonth = Month(Calendar.CalendarDate))
    OR (TaskManager.Frequency = "Quarterly" AND
            (((Month(Calendar.CalendarDate)- TaskManager.DateMonth) Mod 3) =  0)); 
```

以上大部分内容是涵盖季度日和月对可能涵盖的不同选项。下一步是另一个 SELECT 查询，它从 TaskManagerQryAllOptions 中选择日期在所需范围内的记录。此查询称为 TaskManagerQrySelect。

```
SELECT TaskManagerQryAllOptions.ID, TaskManager.TaskName,
        TaskManagerQryAllOptions.CalendarDate
FROM TaskManagerQryAllOptions INNER JOIN TaskManager
        ON TaskManagerQryAllOptions.ID = TaskManager.ID
WHERE (TaskManagerQryAllOptions.CalendarDate > Date()-60)
    AND (TaskManagerQryAllOptions.CalendarDate < Date()+370)
    AND (TaskManagerQryAllOptions.CalendarDate >= TaskManager.Start)
    AND ((TaskManagerQryAllOptions.CalendarDate <= TaskManager.Finish) 
            OR (TaskManager.Finish Is Null))
ORDER BY TaskManagerQryAllOptions.CalendarDate; 
```

最后一个查询是一个 INSERT。由于我们会经常使用这个查询，我们不希望它产生重复，所以我们需要过滤掉已经创建的记录。

```
INSERT INTO Task ( TaskName, TaskDate )
SELECT TaskManagerQrySelect.TaskName, TaskManagerQrySelect.CalendarDate
FROM TaskManagerQrySelect
WHERE Not Exists(
    SELECT *
    FROM Task
    WHERE Task.TaskName = TaskManagerQrySelect.TaskName
        AND Task.TaskDate = TaskManagerQrySelect.CalendarDate); 
```

此方法的一个限制是，如果重复日期（例如每个月的 15 日）发生更改，则将保留错误日期的未来记录。对此的解决方案是使用调整后的日期更新所有未来的记录，然后运行插入。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T12:29:17.687

一种可能性是创建一个月份表和一个年份表（上一年、当前和下一年）。我可以运行一个 SELECT 查询，该查询从 TaskManager 表中获取 Day，从 Month 表中获取 Month，从 Year 表中获取 Year——我想这可能会以某种方式为单个 TaskManager 记录创建我想要的多个记录。虽然我不确定确切的 SQL 是什么。

# php - Twilio rest api，发送短信

> ID：12263493
> 
> 赞同：3
> 
> 时间：2012-09-04T12:26:54.170
> 
> 标签：php, twilio

我正在尝试（并且必须）使用 twilio [rest api 发送短信](https://www.twilio.com/docs/api/rest/sending-messages)，而不是使用 helper php 库。下面是我的代码：我面临的问题是，它给了我 91xxxxxxxxxx 不是有效电话号码的错误。但是我将电话号码传递给带有'+'前缀的rest api。

我正在使用试用帐户，并且该号码已通过 twilio 验证，并使用帮助程序库进行了测试。

```
<?php
$url = "https://api.twilio.com/2010-04-01/Accounts/MYID/SMS/Messages.json";
$from = "MY_TWILIO_NUMBER without + prefix";
$to = "+91xxxxxxxxxx"; // twilio trial verified number
$body = "using twilio rest api";
$id = "MY_ID";
$token = "MY_TOKEN";
$data = array (
        'From' => $from,
        'To' => $to,
        'Body' => $body,

    );
$post = '';
foreach ($data as $parameter => $value)
{
    $post .= "&$parameter=$value";
}
$x = curl_init($url );
curl_setopt($x, CURLOPT_POST, true);
curl_setopt($x, CURLOPT_RETURNTRANSFER, true);
curl_setopt($x, CURLOPT_USERPWD, "$id:$token");
curl_setopt($x, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($x, CURLOPT_POSTFIELDS, $post);
$y = curl_exec($x);
var_dump($y);
curl_close($x);
?> 
```

curl请求的完整转储

```
string(157) "{"status":400,"message":"The 'To' number  91xxxxxxxxxx is not a valid phone number.","code":21211,"more_info":"http://www.twilio.com/docs/errors/21211"}" 
```

它确实显示了错误的数字（缺少“+”），但我不知道在哪里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T13:06:19.400

好吧，错过了一些东西，所以终于解决了。

这是代码

```
<?php
$url = "https://api.twilio.com/2010-04-01/Accounts/MYID/SMS/Messages.json";
$from = "MY_TWILIO_NUMBER without + prefix";
$to = "+91xxxxxxxxxx"; // twilio trial verified number
$body = "using twilio rest api";
$id = "MY_ID";
$token = "MY_TOKEN";
$data = array (
        'From' => $from,
        'To' => $to,
        'Body' => $body,

    );
$post = http_build_query($data);
$x = curl_init($url );
curl_setopt($x, CURLOPT_POST, true);
curl_setopt($x, CURLOPT_RETURNTRANSFER, true);
curl_setopt($x, CURLOPT_USERPWD, "$id:$token");
curl_setopt($x, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($x, CURLOPT_POSTFIELDS, $post);
var_dump($post);
$y = curl_exec($x);
var_dump($y);
curl_close($x);
?> 
```

# iphone - iphone键盘和滚轮没有出现

> ID：12263497
> 
> 赞同：0
> 
> 时间：2012-09-04T12:27:14.783
> 
> 标签：iphone, xcode

我在使用 webview 时遇到问题。这个 webview 加载了一个带有一些输入字段和一些下拉列表的网页。问题是没有出现键盘和滚轮。我看到一个快速的“闪烁”，光标确实进入了选定的输入字段，但键盘没有出现。

我正在使用 xcode 4.3.3

我的 Appdelegate.h

```
#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate> {
    UIWindow *windowTB;
    UIViewController *tabBarVC;
//    UIWebView *homeWebView;
}

@property (strong, nonatomic) IBOutlet UIWindow *windowTB;
@property (strong, nonatomic) IBOutlet UIViewController *tabBarVC;
//@property (strong, nonatomic) IBOutlet UIWebView *homeWebView;

@end 
```

Appdelegate.m（相关部分）

```
#import "AppDelegate.h"

#import "tabBarVC.h"
#import "homeVC.h"

@implementation AppDelegate

@synthesize windowTB;
@synthesize tabBarVC;
//@synthesize homeWebView;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self.windowTB setRootViewController:tabBarVC];

    [self.windowTB makeKeyAndVisible];
    return YES;
} 
```

homeVC.h

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface homeVC : UIViewController <UIWebViewDelegate>{
    IBOutlet UIWebView *homeWebView;
}

@property (nonatomic, retain) UIWebView *homeWebView;
@end 
```

最后一个homeVC.m

```
#import "AppDelegate.h"

#import "homeVC.h"

@implementation homeVC

@synthesize homeWebView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    return self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [homeWebView loadRequest:[NSURLRequest requestWithURL: [NSURL URLWithString:@"http://rolfdeenen.nl/test.html"]]];
} 
```

我一直在寻找大约一天的时间，但这对我来说毫无意义。谁能帮我？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:32:12.600

也许问题出在您的网页上，因为 webview 具有标准行为，您无法对其进行修改。

# android - 如何保存片段？当我旋转屏幕时

> ID：12263503
> 
> 赞同：5
> 
> 时间：2012-09-04T12:27:33.060
> 
> 标签：android, android-fragments

> **可能的重复：**
> [ViewPager 和片段——存储片段状态的正确方法是什么？](https://stackoverflow.com/questions/7951730/viewpager-and-fragments-whats-the-right-way-to-store-fragments-state)

如何保存片段？（它位于活动中）当我旋转屏幕时，活动被重新启动，片段被重新创建![在此处输入图像描述](../Images/6ef8147b6ea7b9aa94f62ce7be39246a.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T12:32:45.967

尝试`setRetainInstance(true);`在片段的 onCreate中使用

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T12:31:39.357

您需要在 AndroidManifest.xml 中为**android:configChanges添加****方向。**每个例子：

 **```
 android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" 
```**

# forms - 如何在 Play Framework 2.0 中有效地使用 bean 验证

> ID：12263505
> 
> 赞同：1
> 
> 时间：2012-09-04T12:27:47.303
> 
> 标签：forms, model, playframework, playframework-2.0, bean-validation

使用 Play Framework 2，我正在尝试使用此示例代码使用自定义消息进行“必需”验证：

**一个简单的学生模型：**

```
@Id                    private Long      id;    
@Required              private String    studentName;
@Required  @ManyToOne  private Classroom classroom; 
```

**一个简单的学生表格（视图）：**

```
@inputText(form("studentName"), '_label -> "Student Name", '_help -> "Please enter name.")
@select(form("classroom.id"), options(Classroom.options), '_label -> "Class", '_default -> "-- Choose an Classroom --") 
```

**1.**验证确实适用于文本输入，但不适用于选择框。选择框的默认值。为什么？

**2.**此外，当显示错误时，我收到 2 条消息。帮助文本和验证消息。有什么想法可以让我获得一条自定义消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:31:51.157

1.  您可以通过将“_showConstraints -> false”添加到视图中的输入字段来隐藏约束。

2.  要在控制器中添加自定义错误消息，您可以使用

    myform.reject("字段","错误信息")

其中字段应等于实体属性的名称和输入元素的名称。

我还在想像你一样玩，所以我不确定如何解决你的选择列表问题的正确方法，但我会调试你的应用程序，看看你的表单是否不包含任何验证错误但是它只是没有显示出来。

# perl - 使用 open/print 执行 SQL 语句时如何捕获退出代码？

> ID：12263510
> 
> 赞同：6
> 
> 时间：2012-09-04T12:28:10.253
> 
> 标签：perl

我正在使用 open/print 使用 sqlplus 执行 SQL 语句，如下所示：

```
open (PLSQL, "|sqlplus -s $db_url");
print PLSQL <<ENDSQL;
... some SQL statements ...
exit;
ENDSQL
close(PLSQL); 
```

我的问题是如果遇到一些错误，如何捕获执行 sql 语句的退出代码。我认为使用 DBI 应该会好得多，但我更喜欢对上述问题有一个解决方案。非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T19:22:08.270

[`close()`](http://p3rl.org/close)应该告诉你你想知道的：

> 如果文件句柄来自管道打开，则如果涉及的其他系统调用之一失败或者如果其程序以非零状态退出，则关闭返回 false。如果唯一的问题是程序以非零值退出，$! 将设置为 0 。关闭管道还会等待在管道上执行的进程退出——以防你想在之后查看管道的输出——并隐式将该命令的退出状态值放入 $? 和 ${^CHILD_ERROR_NATIVE}。

要点是`close()`任何错误都将返回 false，`$!`仅在系统调用有错误时设置，`$?`并将设置为退出状态。有关详细信息，请参阅[perlvar](http://p3rl.org/perlvar#Error-Variables)中的错误变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T14:29:55.533

`sqlplus`正如您所说，使用 DBI 模块比进行数据库操作要好得多。该实用程序仅用作命令行便利，不适用于任何主要的数据库操作，并且使用该模块您可以更好地控制处理可能遇到的任何错误，这似乎是您问题的重点

Perl 本身不允许连接到进程的 STDIN 和 STDOUT。为此，您需要使用[`IPC::Open2`](https://metacpan.org/module/IPC::Open2)CPAN 中的模块。阅读[与另一个进程的双向通信中的问题](http://perldoc.perl.org/perlipc.html#Bidirectional-Communication-with-Another-Process)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T12:31:21.710

我没有看到 SQLPlus 为 SQL 语句返回正确的退出代码，只有连接失败或身份验证失败。

```
echo "SELECT * FROM NO_EXIST;" | sqlplus64 -S  USER/PASS@my.db/MYAPP ; echo $?
SELECT * FROM NO_EXIST
           *
ERROR at line 1:
ORA-00942: table or view does not exist

0 
```

如果您可以管理它，我强烈推荐一个语言库。我不能，所以将 grep 输出`ORA-\d\d\d\d\d\d`作为失败的指示。

希望有帮助。

# css - 编辑jsf组件primefaces的样式

> ID：12263512
> 
> 赞同：0
> 
> 时间：2012-09-04T12:28:16.820
> 
> 标签：css, jsf-2, primefaces

我有这个页面：

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

    <body>

        <ui:composition template="./template_admin.xhtml">

            <ui:define name="tohead">
            </ui:define>

            <ui:define name="content">

                <p:panel header="Edition d'une commande"  style="height: 490px;" id="panel"  >
                    <p:messages id="msgs"/>
                    <h:panelGrid columns="3" style="float:left;" columnClasses="column" cellpadding="5">

                        <h:outputLabel  for="idd" value="Id : " />   
                        <p:inputText  disabled="true" value="#{editCommandController.myCom.id}" id="idd" required="true" requiredMessage="veuillez saisir un nom" label="Nom"  />  
                        <p:message for="idd" display="icon"/>

                        <h:outputLabel for="dteenvoi" value="Date d'envoi : " />  
                        <p:inputText disabled="true" id="dteenvoi" value="#{editCommandController.myCom.dateEnvoi}" required="true" requiredMessage="veuillez saisir un prénom" label="Prénom" />  
                        <p:message for="dteenvoi" display="icon"/>

                        <h:outputLabel for="division" value="Date de livraison recommandée : " />  
                        <p:inputText disabled="true"  id="division" value="#{editCommandController.myCom.dateLivraisonRecommande}" />  
                        <p:message for="division" display="icon"/>

                        <h:outputLabel for="poste" value="Nombre de page : " />  
                        <p:inputText id="poste" disabled="true" value="#{editCommandController.myCom.nbrePage}" />  
                        <p:message for="poste" display="icon"/>

                        <h:outputLabel for="email" value="Nombre d'exemplaire : " />  
                        <p:inputText id="email" disabled="true" value="#{editCommandController.myCom.nbreExemplaire}" />
                        <p:message for="email" display="icon"/>

                        <h:outputLabel for="autres" value="Type d'impression : " />  
                        <p:inputText id="autres" disabled="true" value="#{editCommandController.myCom.typeImpression}"  />  
                        <p:message for="autres" display="icon"/>

                        <h:outputLabel for="identifiant" value="Observation : " />  
                        <p:inputTextarea id="identifiant" disabled="true" value="#{editCommandController.myCom.observation}" required="true" validator="#{addUserController.validateIdentifiant}" requiredMessage="veuillez saisir un identifiant" label="Identifiant" />  
                        <p:message for="identifiant" display="icon"/>

                        <h:outputLabel for="dec" value="Decision : " />  
                        <p:selectOneMenu  id="dec" value="#{editCommandController.myCom.decision}" >  
                            <f:selectItems value="#{editCommandController.decisions}" />  
                            <p:ajax update="etat gridContainer :myform:alors" event="change" />
                        </p:selectOneMenu>  
                        <p:message for="dec" display="icon"/>

                        <h:outputLabel for="etat" value="Etat : " />  
                        <p:selectOneMenu  id="etat" value="#{editCommandController.myCom.etat}" disabled="#{editCommandController.myCom.decision eq 'rejettée'}" >  
                            <f:selectItems value="#{editCommandController.etats}" />   
                        </p:selectOneMenu>  
                        <p:message for="etat" display="icon"/>

                        <h:outputLabel for="calen" value="Date de Livraison réelle: *" />
                        <p:calendar  label="Date de Livraison reelle" id="calen" showOn="button" effect="slide" value="#{editCommandController.myCom.dateLivraisonReelle}" pattern="MM/dd/yyyy HH:mm" >
                        </p:calendar>  
                        <p:message for="calen" id="msgSurname4" display="icon"/>

                    </h:panelGrid>  

                    <p:outputPanel id="gridContainer" layoyut="block" >
                        <h:panelGrid id="alors"   rendered="#{editCommandController.myCom.decision ne 'rejettée'}" >
                            <p:dataTable id="cars" style="width: 80px;" var="car" value="#{editCommandController.pdm}" paginator="true" rows="10"  
                                         selection="#{editCommandController.selectedPapier}" selectionMode="single" >  

                                <p:ajax event="rowSelect" listener="#{editCommandController.onRowSelect()}"   
                                        update=":myform:jesuis" />  

                                <f:facet name="header">  
                                    RadioButton Based Selection  
                                </f:facet>                    

                                <p:column headerText="libelle">  
                                    #{car.libelle}  
                                </p:column>  

                                <p:column headerText="format">  
                                    #{car.format}  
                                </p:column>  

                                <p:column headerText="stock" >  
                                    #{car.stock}  
                                </p:column>  

                            </p:dataTable>  

                            <h:outputText  id="jesuis" value=" c est la papier : #{editCommandController.selectedPapier.libelle}"  />

                            <h:panelGrid columns="2" cellpadding="5" style="margin-top: 22px;">  
                                <h:outputLabel value="Reliure :" for="city" />
                                <p:selectOneMenu id="city" value="#{addPapierController.choixReliure}">  
                                    <f:selectItem itemLabel="choisir reliure" itemValue="" />  
                                    <f:selectItems value="#{addPapierController.libelleReliures}" />  
                                    <p:ajax 
                                        listener="#{addPapierController.handleCityChange}" />  
                                </p:selectOneMenu>
                            </h:panelGrid>

                        </h:panelGrid>
                    </p:outputPanel>

                    <h:panelGrid columns="2" style="float:none;display: block;" >
                        <p:commandButton value="Editer" ajax="false" action="#{editCommandController.updateCommand()}" update="panel" ></p:commandButton>
                        <p:commandButton value="Annuler"  immediate="true" action="commandesUser" ajax="false" ></p:commandButton>

                    </h:panelGrid>
                </p:panel>  

            </ui:define>

        </ui:composition>

    </body>
</html> 
```

我想将面板分为三个部分：页面左侧的第一部分，页面右侧的第二部分和页面底部的第三部分

我设法把第一和第二部分，但第三部分就在第二部分下面，我只想把它放在底部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:39:28.760

您的第一个面板向左浮动`float:left;`。因此，只要*至少有一些*垂直空间，在 DOM 中出现的任何内容都会出现在它的右侧。如果您希望元素逃脱此浮动并因此以新行结束，那么您需要`clear`浮动。这不是`float:none;`您尝试的那样：

```
<h:panelGrid columns="2" style="float:none;display: block;" > 
```

而是通过`clear:left;`：

```
<h:panelGrid columns="2" style="clear:left;" > 
```

请注意，我将其`display:block;`作为 HTML删除`<table>`（生成的`<h:panelGrid>`已经*是*块[级元素](http://htmlhelp.com/reference/html40/block.html)。

* * *

**与具体问题无关**，这与 JSF 关系不大。它只是一个 HTML 代码生成器。在未来与 CSS 相关的问题中，如果您忽略 JSF 部分并仅专注于其生成的 HTML 输出（您可以通过右键单击，在网络浏览器中*查看源代码），这对 CSS 专家会更有帮助。*一旦您从 CSS 专家那里得到答案，您需要做的就是回溯负责的 JSF 组件并相应地对其进行更改，以便获得所需的生成 HTML 输出。

# entity-framework - 为什么 DbContext 不实现 IDbContext 接口？

> ID：12263514
> 
> 赞同：58
> 
> 时间：2012-09-04T12:28:32.590
> 
> 标签：entity-framework, unit-testing, testing, mocking, moq

`IDbContext`为什么实体框架中没有接口？如果有一个现有接口，其中包含 SaveChanges() 等方法，您可以从中派生您的自定义数据库上下文接口，那么测试事情不是更容易吗？

```
public interface ICustomDbContext : IDbContext
{
    // add entity set properties to existing set of methods in IDbContext
    IDbSet<SomeEntity> SomeEntities { get; }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-26T21:49:51.093

我看到这个`IDbContext`：

[请参阅此链接](https://archive.codeplex.com/?p=genericdbcontext)然后您使用该接口为您的实体上下文创建一个新的部分类。

```
public partial class YourModelEntities : DbContext, IDbContext 
```

编辑：我编辑了这篇文章，这对我有用。我的背景

```
namespace dao
{
    public interface ContextI : IDisposable
    {
        DbSet<TEntity> Set<TEntity>() where TEntity : class;
        DbSet Set(Type entityType);
        int SaveChanges();
        IEnumerable<DbEntityValidationResult> GetValidationErrors();
        DbEntityEntry<TEntity> Entry<TEntity>(TEntity entity) where TEntity:class;
        DbEntityEntry Entry(object entity);
        string ConnectionString { get; set; }
        bool AutoDetectChangedEnabled { get; set; }
        void ExecuteSqlCommand(string p, params object[] o);
        void ExecuteSqlCommand(string p);
    }
} 
```

YourModelEntities 是你自动生成的分部类，你需要创建一个新的同名分部类，然后添加你的新上下文接口，这个例子是 ContextI

注意：该接口并未实现所有方法，因为这些方法是在您的自动生成代码中实现的。

```
namespace dao
{
    public partial class YourModelEntities :DbContext, ContextI
    {
        public string ConnectionString
        {
            get
            {
                return this.Database.Connection.ConnectionString;
            }
            set
            {
                this.Database.Connection.ConnectionString = value;
            }
        }

        bool AutoDetectChangedEnabled
        {
            get
            {
                return true;
            }
            set
            {
                throw new NotImplementedException();
            }
        }

        public void ExecuteSqlCommand(string p,params object[] os)
        {
            this.Database.ExecuteSqlCommand(p, os);
        }

        public void ExecuteSqlCommand(string p)
        {
            this.Database.ExecuteSqlCommand(p);
        }

        bool ContextI.AutoDetectChangedEnabled
        {
            get
            {
                return this.Configuration.AutoDetectChangesEnabled;
            }
            set
            {
                this.Configuration.AutoDetectChangesEnabled = value;
            }
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-27T03:41:15.237

只需创建一个模拟 DbContext 扩展您的生产 DbContext 覆盖使测试复杂化的方法。这样，对生产 DbContext 的任何更改都会自动反映在测试中，除了覆盖的方法。对于任何其他处理持久性并采用 DbContext 的类，只需扩展它们以及传入扩展的模拟 DbContext。

```
namespace Test.Mocks
{  
    public sealed class MockDatabaseContext : MainProject.Persistence.Database.DatabaseContext
    {
        public MockDatabaseContext(ConfigurationWrapper config) : base(config)
        {

        }      
        protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
        {

            var dbPath = "test.db";
            optionsBuilder.UseSqlite($"Filename={dbPath}");

        }
    }
}

namespace Test.Mocks
{

    public class MockInventoryFacade : InventoryFacade
    {        
        public MockInventoryFacade(MockDatabaseContext databaseContext) : base(databaseContext)
        {

        }    
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-22T01:52:07.567

我也在考虑这个问题，我假设你会用它来**模拟** `DbContext`。我找不到这样做的理由，除了你需要`DbSet`在你的模拟类中手动实现你自己的（所以无论如何都需要重写你自己的接口）。

* * *

## 回答 #4

> 赞同：-13
> 
> 时间：2013-09-11T22:39:39.053

没有 IDbContext，因为它没有用，唯一的实现是 DbContext。

如果您查看此[设计会议记录，EF 团队也将采用 IDbSet 的方式](https://entityframework.codeplex.com/wikipage?title=Design%20Meeting%20Notes%20-%20May%2016,%202013)

对我来说，EF 在单元测试方面的真正问题是 DbContext 中的 DbConnection，幸运的是，[Effort](https://effort.codeplex.com/)是 codeplex 上的一个不错的项目，它开始填补这个问题。

> Effort 是一个强大的工具，可以方便地为基于实体框架的应用程序创建自动化测试。它基本上是一个 ADO.NET 提供程序，它在轻量级进程内主内存数据库而不是传统的外部数据库上执行所有数据操作。它还提供了一些直观的帮助器方法，可以很容易地将此​​提供程序与现有的 ObjectContext 或 DbContext 类一起使用。对现有代码的简单添加可能足以创建可以在没有外部数据库存在的情况下运行的数据驱动测试。

有了这个，你可以让你的 DbContext 和 DbSet 保持原样并轻松地进行单元测试。唯一的缺点是 Linq 提供者之间的差异，其中一些单元测试可能通过努力而不是真正的后端。

**使用 EF7 更新**

我仍然认为 IDbContext 没有用，问题来自 DbConnection。

EF7 也没有 IDbContext，为了进行单元测试，他们现在提供了一个内存提供程序。

你可以在这里看到 Rowan Miller 做一个演示：[Modern Data Applications with Entity Framework 7](http://channel9.msdn.com/events/Ignite/2015/BRK3727)

# ios - 尝试从 UITableViewController 文本框将数据保存在核心数据中

> ID：12263517
> 
> 赞同：0
> 
> 时间：2012-09-04T12:28:46.473
> 
> 标签：ios, uitableview, core-data, uitextfield

我有一个表格视图控制器，其中一行中有 5 个文本框，当我们单击添加按钮时，这些文本框添加了空值。

我正在尝试通过 Core Data 将数据保存在数据库中。

我的问题是，当我单击文本框并完成输入值并通过触摸屏尝试输入数据时，光标会转到另一个文本框，但在我按下 Return 之前不允许我输入文本键盘上的键。

这是我对文本框的编码：

-(void)textFieldDidEndEditing:(UITextField *)textField

```
{

   row1=textField.tag;

    NSLog(@"Row is %d",row1);

    path = [NSIndexPath indexPathForRow:row1 inSection:0];

    Input_Details *inputDetailsObject1=[self.fetchedResultsController objectAtIndexPath:path];

    /*
     Update the Input Values from the values in the text fields.
     */

    EditingTableViewCell *cell;

    cell = (EditingTableViewCell *)[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:row1 inSection:0]];
    inputDetailsObject1.mh_Up= cell.cell_MH_up.text;
    inputDetailsObject1.mh_down=cell.cell_MH_dn.text;
    inputDetailsObject1.sewer_No=[NSNumber numberWithInt:[cell.cell_Sewer_No.text intValue]];
    inputDetailsObject1.mhup_gl=[NSNumber numberWithFloat:[cell.cell_gl_MHUP.text floatValue]];
    inputDetailsObject1.mhdn_gl=[NSNumber numberWithFloat:[cell.cell_gl_MHDN.text floatValue]];
    inputDetailsObject1.pop_Ln=[NSNumber numberWithInt:[cell.cell_Line_pop.text intValue]];
    inputDetailsObject1.sew_len=[NSNumber numberWithFloat:[cell.cell_Sewer_len.text floatValue]];
    [self saveContext];
    [textField resignFirstResponder];
    NSLog(@"Saving the MH_up value %@ is saved in save at index path %d",inputDetailsObject1.mh_Up,row1);

}

-(void)saveContext

{

NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];

 NSError *error = nil;

if (![context save:&error]) 

{

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

} 
```

[这是](http://i.stack.imgur.com/KuYMD.png)表格视图和文本框的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:17:37.053

`didEndEditing`表示您按下了返回键或将响应者移动到另一个对象。

如果您想通过其他机制移动到下一个文本框，那么您需要实现其他一些委托方法。例如，`textField:shouldChangeCharactersInRange:replacementString:`每次更改文本字段中的字符时都会触发此方法。例如，您可以使用它来根据输入更改响应者。

告诉下一个文本框成为您呼叫的第一响应者`[mySecondField becomeFirstResponder]`。

希望这可以帮助。

# windows-8 - 如何解决在 windows 8 bing 地图中找不到 sdk microsoft.vclibs version=11.0 错误？

> ID：12263522
> 
> 赞同：6
> 
> 时间：2012-09-04T12:28:56.203
> 
> 标签：windows-8

我在 Windows 8 中运行 bing 地图示例应用程序时遇到了找不到 sdk microsoft.vclibs version=11.0 错误。请告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:34:06.580

您是否在项目引用中添加了对“Microsoft Visual C++ 运行时包”的引用？（Windows -> 扩展）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T10:21:30.060

从此处下载适用于 Windows Store 应用程序的 Bing Maps SDK： [https](https://visualstudiogallery.msdn.microsoft.com/224eb93a-ebc4-46ba-9be7-90ee777ad9e1) ://visualstudiogallery.msdn.microsoft.com/224eb93a-ebc4-46ba-9be7-90ee777ad9e1 应该可以解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T18:57:27.560

在配置管理器（构建 -> 配置管理器）中，检查活动解决方案平台下拉菜单是否未设置为“任何”，而是设置为适用的 x86、x64 或 ARM。

这解决了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:14:52.273

尝试添加对“C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\platform.winmd”而不是“Microsoft.VCLibs”的引用

# asp.net - 通过 Querystring 传递用户输入值，无需代码

> ID：12263523
> 
> 赞同：1
> 
> 时间：2012-09-04T12:29:00.010
> 
> 标签：asp.net, vb.net, hyperlink, query-string

我正在尝试通过我的网站生成报告。

Default.aspx 有一个下拉列表和 2 个文本框。报告（在不同的页面上生成）必须在用于从 SQL Server 收集数据的 sql 查询中使用这 3 个控件中的所有值。

**概念**
用户可以保留所有 3 个字段的默认值，或更改其中任何一个。在确定用户希望查看报告的值后，他们可以单击 a`HyperLink control`在新选项卡中打开报告页面。

DropDownList 中的值通过设置在 上的 Session 变量传递给 Report.aspx `SelectedIndexChanged`。Report.aspx 会读取此内容，并且还应读取 2 个文本框的 Text 值。

**问题**
我不知道如何将 TextBoxes 的值发送到 Report.aspx。我想过做以下事情：

```
<asp:HyperLink runat="server" id="lnkReport"
  NavigateUrl="Report.aspx?fromdate=<%# Eval('txtFromDate.Text') %>&todate=<%# Eval('txtToDate.Text') %>"
  target="_blank" Text="Generate Report"></asp:HyperLink> 
```

我不确定这是否可行，因为 Eval 通常需要父控件进行数据绑定——据我所知。

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:37:22.463

使用 jQuery 或 Javascript 您可以只调用客户端函数来从表单元素中获取值、构造 url 并打开一个新窗口吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:54:21.477

在我问了这个问题之后，我记得 Dropdownlist 和文本框用于在 Default.aspx 上绑定一个 GridView，我在这里使用它来发挥我的优势。

我知道在单击生成报告之前，**必须**以一种或另一种方式绑定 GridView ，因此我在那里设置会话变量以存储报告所需的信息。

```
Dim db As New Database

Dim sql As String = "select * from users where userid = @id and dateregistered between @fromdate and @todate"

Dim args As New List(Of SqlParameter)
args.Add(New SqlParameter("@id", ddlUsers.SelectedItem.Value))
args.Add(New SqlParameter("@fromdate", txtFromDate.Text))
args.Add(New SqlParameter("@todate", txtToDate.Text))

gvItems.DataSource = db.GetDataReader(sql, args.ToArray())
dvItems.DataBind()

Session("userid") = ddlUsers.SelectedItem.Value
Session("fromdate") = txtFromDate.Text
Session("todate") = txtToDate.Text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T14:21:09.590

您可以使用链接按钮来进行跨页面发布，而不是使用超链接。

```
<asp:LinkButton runat="server" id="lnkReport"
  NavigateUrl="~/Report.aspx"
  target="_blank" Text="Generate Report"></asp:LinkButton> 
```

然后在**Report.aspx.cs**上：

从[Page.PreviousPage](http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage.aspx)中获取值，如下所示：

```
DropDownList userid = (DropDownList)Page.PreviousPage.FindControl("ddlUsers");
TextBox fromdate = (TextBox)Page.PreviousPage.FindControl("fromdate");
TextBox todate = (TextBox)Page.PreviousPage.FindControl("todate"); 
```

在报告页面中根据需要使用这些。

# android - 自定义类中的自定义对话框返回布尔值

> ID：12263532
> 
> 赞同：3
> 
> 时间：2012-09-04T12:29:25.407
> 
> 标签：android, class, dialog

我已经搜索了答案并没有找到它，所以请帮助我:)

我有一个自定义类：

```
public class CustomClass {

    private final Context ctx;
    public CustomClass(Context ctx) {
        this.ctx = ctx;
    }

    public boolean setDialog(int head, int text) {
        final boolean value;

        final Dialog d = new Dialog(ctx);
        d.requestWindowFeature(Window.FEATURE_NO_TITLE);
        d.setContentView(R.layout.custom2_dialog);

        TextView txtHead = (TextView) d.findViewById(R.id.custom2_txtHead);
        txtHead.setText(ctx.getResources().getString(head));
        TextView txtText = (TextView) d.findViewById(R.id.custom2_txtText);
        txtText.setText(ctx.getResources().getString(text));

        Button btnOK = (Button) d.findViewById(R.id.custom2_btnOK);
        btnOK.setText("OK");
        btnOK.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                value = true;
                d.dismiss();
            }
        });

        Button btnNO = (Button) d.findViewById(R.id.custom2_btnNO);
        btnNO.setText("NO");
        btnNO.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                value = false;
                d.dismiss();
            }
        });

        d.show();

        return value;
    }
} 
```

您可以看到我在自定义类中创建了一个自定义对话框，因为我不想在每个活动中创建一个对话框。现在，当我在 Activity 中使用它时：

```
CustomClass cC = new CustomClass(this);
if(cC.setDialog(R.string.head, R.string.text)) {
    // user checked OK
} else {
   // user checked NO
} 
```

如何知道用户是否选中了 OK 或 NO，因为返回 true、false 值在自定义类中不起作用，对话框不会在用户点击之前等待，它会自动返回一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:59:03.087

这是您问题的解决方案。首先，如果您正在创建自定义对话框，那么您必须扩展**Dialog**类来读取响应并实现**OnClickListener**。

```
class CustomizeDialog extends Dialog implements OnClickListener
{
  // some code
public CustomizeDialog(Activity activity, String title, String msg, int i, Typeface typeface) 
    {
        super(activity);        
        this.activity = activity;
        intFlag = i;
        setContentView(R.layout.relative);
        dialogButtonYes = (Button) findViewById(R.id.buttonCustomDialogYes);
        dialogButtonNo = (Button) findViewById(R.id.buttonCustomDialogNo);
        textView = (TextView) findViewById(R.id.textViewCustomTitle);
        this.msg = msg;
        dialogButtonNo.setOnClickListener(this);
        dialogButtonYes.setOnClickListener(this);
    }
}

@Override
public void onClick(View v) {
        if (v == dialogButtonYes)
        {
            Intent intent =new Intent(activity, CallForOne.class);
            activity.startActivity(intent);
            dismiss();
        }
        else
            dismiss();
    }
    else if(intFlag == 2)
    {
        if (v == dialogButtonYes)
        {
            Intent intent =new Intent(activity, CallMe.class);
            activity.startActivity(intent);
            dismiss();
        }
        else
            dismiss();
} 
```

和**relative.xml**文件

```
<TextView
    android:id="@+id/textViewCustomTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textViewCustomTitle"
    android:orientation="horizontal"
    android:paddingBottom="1.0dip"
    android:paddingLeft="4.0dip"
    android:paddingRight="4.0dip"
    android:paddingTop="5.0dip" >

    <Button
        android:id="@+id/buttonCustomDialogYes"
        style="@style/styleNormalButton"
        android:layout_width="0.0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1.0"
        android:text="@string/yes" />

    <Button
        android:id="@+id/buttonCustomDialogNo"
        style="@style/styleNormalButton"
        android:layout_width="0.0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1.0"
        android:text="@string/no" />
</LinearLayout> 
```

和主班

```
 class Main implements OnClickListener
    {
    onCreate()
    {
    //your code
    }

    public void on click()
    {
    customizeDialog = new CustomizeDialog(CustomDialogExample.this,getString(R.string.title_for_one),getString(R.string.msg_for_one),1,"String");
    customizeDialog.show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-25T14:05:08.233

我在这里遇到了同样的问题，然后我找到了一个解决方案，通过在**自定义对话框**中单击按钮打开**活动**。但是您也可以将此逻辑用于其他操作。

 **我的自定义方法：

```
public class Extension extends Activity{

  public void showDialogConfirma(Activity localActivity, Class destActivity, String titulo, String mensagem){

    final Dialog dialog = new Dialog(localActivity);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(R.layout.dialog_um_btn);

    TextView textTitulo = dialog.findViewById(R.id.txtTitle);
    textTitulo.setText(titulo);

    Button btnOk = dialog.findViewById(R.id.btnOk);
    btnOk.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            dialog.dismiss();
            // here I can open any activity from any class
            localActivity.startActivity(new Intent(localActivity, destActivity));
        }
    });

    dialog.show();

  }
} 
```

你这样调用这个方法：

```
Extension extension = new Extension();
// here you gonna pass your parameters to your Dialog on create it
// on my case the activity that I want open
extension.showDialogConfirma(ThisActivity.this, DestActivity.class, titulo, mensagem); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T13:18:24.490

首先来自@user370305 的评论是正确的方法。毫无疑问，还有其他方法。

您面临的问题是因为当您调用自定义类的方法时

```
 if(cC.setDialog(R.string.head, R.string.text)); 
```

即使没有点击任何内容，您也会获得价值

```
 return value; 
```

as false 这是您声明时设置的默认值

```
final boolean value; 
```

相反，您应该听“取消”和“确定”点击**

# python - 使用 `is` 检查空字符串

> ID：12263541
> 
> 赞同：1
> 
> 时间：2012-09-04T12:29:52.897
> 
> 标签：python, equals, identity

`is`在 Python中检查空字符串是否正确？它进行身份检查，同时`==`测试相等性。

考虑以下内容（使用的想法是从[这个答案](https://stackoverflow.com/a/1504742/493928)`join`中借用的）：

```
>>> ne1 = "aaa"
>>> ne2 = "".join('a' for _ in range(3))
>>> ne1 == ne2
True
>>> ne1 is ne2
False
>>> 
```

所以这里`is`可以按预期工作。现在看看这段代码：

```
>>> e1 = ""
>>> e2 = "aaa".replace("a", "")
>>> e3 = "" * 2
>>> e4 = "bbb".join(range(0))
>>> e1, e2, e3, e4
('', '', '', '')
>>> e1 is e2
True
>>> e1 is e3
True
>>> e1 is e4
True
>>> id(e1), id(e2), id(e3), id(e4)
(35963168, 35963168, 35963168, 35963168) # why? 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T12:30:55.830

检查空字符串的正确方法是：

```
if yourstring:
   print "string is not empty" 
```

例如`bool(yourstring)`，`False`如果您的字符串为空。您的示例有效的原因是因为 CPython 缓存了某些字符串和整数并重用它们以提高效率。这是一个实现细节，不应依赖。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T12:32:55.280

Python 实现可能会选择实习小字符串（好吧，它可能会选择实习任何不可变的东西，真的）；Cpython 就是这样做的。

你永远不应该依赖这种行为。如果要检查字符串是否为空字符串，请始终使用`mystring == ""`.

如果您确定要检查的对象始终是一个字符串，您也可以在布尔上下文中评估它（例如，`if mystring:`），但请记住，这不会将空字符串与`0`、`False`或区分开来`None`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:38:34.447

检查空序列（字符串、列表...）的最佳方法是：

```
if variable:
  pass 
```

来自[真值测试](http://docs.python.org/library/stdtypes.html#truth-value-testing)

> 以下值被认为是错误的：
> 
> 任何空序列，例如，''、()、[]

另请阅读有关[比较](http://docs.python.org/reference/expressions.html#not-in)的文档：

*   `is`比较身份
*   `==`根据类型比较相等性

> Strings are compared lexicographically using the numeric equivalents (the result of the built-in function ord()) of their characters. Unicode and 8-bit strings are fully interoperable in this behavior

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:39:50.340

The "is" operator returns true if you are pointing to the same object, as python try to not repeat the strings (it checks if this strings already exists in memory) it will return the same object.

I wouldn't use "is" to compare strings, it's like the "==" operator in Java, it usualy works, but maybe you can get new instances and it will return false, I prefer using == that it will call the method **eq** and returns True if both strings are equals, even if they are different objects.

# java - 速度空值和空字符串

> ID：12263548
> 
> 赞同：30
> 
> 时间：2012-09-04T12:30:09.970
> 
> 标签：java, templates, velocity

在速度中，我有一个变量，其值为*null*。在这种情况下，我不想显示任何内容。

目前模板引擎将“”转换为*空*，所以我必须这样做。

```
#set ( $a = "")
#if ($a) 
   assert("never prints a neither gets here: " + $a)
#end 
```

有没有办法我可以直接做到这一点？我希望能够做出类似的东西：

```
This is the variable $a. ## in case that $a is null i don't want 'dollar a' to be displayed 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-04T13:54:50.670

`$!a`成功了。您可以直接使用此表格而无需`if`检查。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-02-14T12:14:20.733

## 你想要安静的参考符号：`$!a`

这是您的示例：

```
This is the variable $!a. 
```

如果`$a`是`null`或`""`，Velocity 将呈现：

```
This is the variable . 
```

官方指南部分： [https ://velocity.apache.org/engine/devel/user-guide.html#quietreferencenotation](https://velocity.apache.org/engine/devel/user-guide.html#quietreferencenotation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-31T22:07:00.663

另一种选择是根据*[Checking for Null](https://wiki.apache.org/velocity/CheckingForNull)*`if`修改您的语句（感谢链接@xavi-lópez）：

> 方法 2：使用 null 在安静引用中被评估为空字符串的事实。（参见 [http://velocity.apache.org/engine/devel/user-guide.html#quietreferencenotation](http://velocity.apache.org/engine/devel/user-guide.html#quietreferencenotation)）

因此，您的代码将是：

```
#set ( $a = "")
#if ("$a" != "") 
   assert("never prints a neither gets here: " + $a)
#end 
```

# cpu - 上下文切换与内存访问，哪个更快？

> ID：12263549
> 
> 赞同：20
> 
> 时间：2012-09-04T12:30:11.523
> 
> 标签：cpu

面试时被问到的。他们要求在速度方面订购以下产品：

*   CPU寄存器访问，
*   上下文切换
*   内存访问
*   磁盘寻道。

很确定磁盘寻道是最慢的，寄存器访问是最快的，但不太确定两者之间的关系。谁能解释一下？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-04T12:34:58.997

我碰巧在[Yahoo!上找到了一个令人惊讶的好答案！](http://answers.yahoo.com/question/index?qid=20060802094209AARBDkW)：

最快到最慢：

> 1.  中央处理器
> 2.  记忆
> 3.  上下文切换
> 4.  磁盘

虽然：

> **由于缓存，磁盘访问**有时可能会明显更快......内存访问也是如此（CPU有时会从主内存管理缓存以帮助加快访问速度并避免对总线的竞争）。
> 
> **由于虚拟内存页面交换，内存访问**有时也可能与磁盘访问一样慢或稍慢。
> 
> **一般来说，上下文切换**需要非常快......如果速度很慢，那么当多个进程同时运行时，您的 CPU 可能会开始花费更多时间在进程之间切换，而不是实际执行有意义的工作。
> 
> **寄存器访问**几乎是即时的。

（强调我的）

我同意这个答案。

# asp.net-mvc - [MVC3]无法绑定 JSON 数组

> ID：12263554
> 
> 赞同：0
> 
> 时间：2012-09-04T12:30:33.860
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-binding

我认为 MVC3 默认可以将 JSON 数据绑定到模型。

但是这段代码

服务器：

```
[HttpPost]
public ActionResult Save(IList<int> IDs)
{
    return null;
} 
```

客户：

```
$.post('@Url.Action("Save", "Users")', {'IDs' : [1, 2, 3]}, function() {}); 
```

不工作。为什么 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:52:38.803

您需要将数据作为 application/json 发送：

```
$.ajax({
    type: 'post',
    url: '/Users/Save'
    data: JSON.stringify({'IDs' : [1, 2, 3]}),
    contentType: 'application/json; charset=utf-8',
    success: function() {
       // ...
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:28:32.987

您的代码发送`IDs[]=1&IDs[]=2&IDs[]=3`.

你需要发送`IDs=1&IDs=2&IDs=3`。

设置`traditional:true`参数以使用传统的参数序列化样式。

```
$.ajax({
    url: '@Url.Action("Save", "Users")',
    type: 'post',
    data: {'IDs' : [1, 2, 3]},
    traditional:true,
    success: function() {
        // ...
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:46:17.653

这可能与我前段时间遇到的问题相同。查看这个 SO 问题[Post Array as JSON to MVC Controller](https://stackoverflow.com/questions/10007722/post-array-as-json-to-mvc-controller)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:57:15.867

你必须申请`JSON.stringify`

```
$.post('@Url.Action("Save", "Users")', JSON.stringify({'IDs' : [1, 2, 3]}), function() {}); 
```

# opengl - 为什么这个正方形不在屏幕中间？

> ID：12263558
> 
> 赞同：0
> 
> 时间：2012-09-04T12:30:45.890
> 
> 标签：opengl, glulookat

我写了一些代码，期望在屏幕中间看到一个正方形，而不是正方形看起来更高，在屏幕顶部附近的某些纵横比中，稍微向左。

![这是我屏幕上绘制的内容](../Images/970d1c80ddafca9ae1e4333cfc9584d5.png)

使用另一个纵横比：

![另一个例子](../Images/9e892813e5ccdc51866f1b0d611f7148.png)

这是我的代码的相关部分：

```
void resize(uint32_t height, uint32_t width){
    glViewport(0, 0, width, height);

    glMatrixMode (GL_PROJECTION); //set the matrix to projection
    glLoadIdentity();
    gluPerspective(60, (GLfloat)width / (GLfloat)height, 1.0, 1000.0);
}

void draw(){
    glMatrixMode(GL_MODELVIEW);
    glPushMatrix();
    glLoadIdentity();

    glClear(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT);

    //set up camera
    glLoadIdentity();
    gluLookAt(0,10,0,0,0,0,0.001,0.999,0);

    //draw a square in the center of the screen
    glBegin(GL_TRIANGLE_FAN);
    glColor4f(0,1,1,1);
    glVertex3f(-1,0,-1);
    glVertex3f(-1,0,1);
    glVertex3f(1,0,1);
    glVertex3f(1,0,-1);
    glEnd();

    glPopMatrix();
} 
```

0,0,0 不应该是屏幕的中间吗？gluLookAt 不应该将我指定的任何坐标放在屏幕的中心吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:06:49.487

改变`up`向量的值

```
gluLookAt(0,10,0,0,0,0,0,0,1); 
```

你的眼睛在正`y`轴，中心的参考点和`up`（头部）矢量必须沿着 -`z`轴。您在调整大小功能中又犯了一个错误

```
void resize(uint32_t height, uint32_t width){
glViewport(0, 0, width, height);
.....................
gluPerspective(60, (GLfloat)width / (GLfloat)height, 1.0, 1000.0);
} 
```

您的变量`height`存储屏幕宽度和变量`width`存储高度，您已经定义了`glViewport`并且`gluPerspective`您认为您的比例`width`为`height`，但实际上您的比例`height`为`width`，因此出现了问题。编辑你的代码如下：

```
void resize(uint32_t width, uint32_t height){
glViewport(0, 0, width, height);
..................
gluPerspective(60, (GLfloat)width / (GLfloat)height, 1.0, 1000.0);
} 
```

# php - fpdf 单元格未正确显示连接的 php 字符串

> ID：12263562
> 
> 赞同：3
> 
> 时间：2012-09-04T12:30:52.350
> 
> 标签：php, mysql, fpdf

我有一个 fdpf 单元 $DocRef->Cell(23,10,'Re: Patient: '.$patientdata,0,0,'L');

$patientdata 是从 mysql 语句中获取的

如果我使用以下内容并将 $patientdata 放在上面的单元格中，我会得到所需的结果，例如它将在 pdf 文档中显示为 Smith John Michael

```
 if (($uppatientID <> '') and ($uppatientID <> 0))
  {
    $patientsql =   "
      SELECT
        Concat_Ws(' ', `PatientLastName`, `PatientFirstName`, `PatientMiddleName`)
      FROM
        `Patient`
      Where
        `PatientID` = $uppatientID
    ";

    $patientresult=mysql_query ($patientsql) or die (mysql_error ());
    while ($patienttrow=mysql_fetch_row($patientresult))
      {
        $patientdata = $patienttrow[0];
      }
    mysql_free_result($patientresult);
   }
  else
    {
      $patientdata = ' ';
    } 
```

因为患者姓名是加密的，所以我需要执行以下操作来解密它们

```
if (($uppatientID <> '') and ($uppatientID <> 0))
  { 
    $patientsql =   "
      SELECT
        `PatientLastName`, `PatientFirstName`, `PatientMiddleName`
      FROM
        `Patient`
      Where
        `PatientID` = $uppatientID
    ";

    $patientresult=mysql_query ($patientsql) or die (mysql_error ());
    while ($patienttrow=mysql_fetch_row($patientresult))
      {
        $PatientLastNames = $patienttrow[0];
        $PatientFirstNames = $patienttrow[1];
        $PatientMiddleNames = $patienttrow[2];

        $patientdata = $PatientLastNames.$PatientFirstNames.$PatientMiddleNames;

      }
    mysql_free_result($patientresult);
   }
  else
    {
      $patientdata = ' ';
    } 
```

但是上面的单元格现在将它们显示在 pdf 文档上，每个名称之间有很多空格，这仅在我使用 php 加入每个字符串时发生。加入他们。是否有一些格式可以用来纠正这个问题。

有趣的是，如果我选择 pdf 文档上的名称并将其粘贴，那么所有添加的空格都会被删除

谢谢，

伊万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:42:47.220

我可以从您的第一种和第二种方法中看出的唯一区别是删除 $patientdata 变量中的空白间距您是否尝试过使用 php 将其放回

```
$patientdata = $PatientLastNames." ".$PatientFirstNames." ".$PatientMiddleNames; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:05:27.790

感谢您的回复，您帮我解决了问题。因为我需要解密表格数据，所以它们用 \u0000 填充以提供 32 个字符的字符串。要删除它，我需要添加 str_replace("\x0", '', $str);

$patientdata = str_replace("\x0", '', PatientLastName . " " . PatientFirstName . " " . PatientMiddleName);

现在可以正确显示 pdf

# wso2 - Wso2 API MANAGER WSDL 安全性

> ID：12263569
> 
> 赞同：0
> 
> 时间：2012-09-04T12:31:07.670
> 
> 标签：wso2, wso2-am

我已经下载了 API Manager 1.0.0 GA 的新版本。

我对发布 WSDL 感到困惑，因为它没有相关的 API KEY，每个人都可以访问它。

出于这个原因，我试图从 ESB 添加访问令牌，但这不会验证 API Manager 的用户（如 Apisubscriber）只有 ESB 内的用户（即使我已经为 APIManager 和 ESB user-mgt 配置了外部 JDBC db .xml）。

那么，有没有一种方法可以从 API Manager 为 WSDL 创建 API 密钥？或者如何控制对 API 存储中已发布 WSDL 的访问？

非常感谢

* * *

**编辑：**

在 ESB 中，我使用内置的安全方案为服务添加了安全性，在我的例子中，我使用了“ **UsernameToken** ”。这会根据 ESB“admin/everyone...”中定义的角色对用户进行身份验证，并且只接受在 ESB 的用户存储“admin/admin”中定义的用户（以及您可能创建的其他用户）。

我已将 ESB 和 AM 配置为**共享相同的 mysqlDB**用于用户存储，但这在我之前描述的安全场景中不起作用：如果我在 AP 内创建用户“apicreator”并在 ESB 内创建“usertest”，它们会存储用户在同一个 MySQL 数据库中，但在**不同的“tentant”**下，即“apicreator”不是在我的安全场景（UsernameToken）中进行身份验证的有效用户。我希望这个描述有助于澄清问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T11:26:48.037

使用 WSO2 API Manager，您无法控制对 API Store 中已发布 WSDL 的访问。目前无法从 API Manager 为 WSDL 创建 API 密钥。但必须通过您的后端进行控制服务。但是，从 WSO2 API Manager 创建 API 时，将 Wsdl url 作为输入不是必需字段，而是可选字段。

除此之外，我不清楚您的以下短语。“因此，我尝试从 ESB 添加访问令牌，但这不会仅对 ESB 内的用户进行身份验证 API Manager 的用户（如 Apisubscriber）”。你能多解释一下“从 ESB 添加访问令牌”是什么意思？

谢谢;

/拉拉吉

# android - 使用来自服务器的数据列表

> ID：12263572
> 
> 赞同：0
> 
> 时间：2012-09-04T12:31:25.000
> 
> 标签：android, sqlite

我要将数据从服务器填充到列表视图（无休止）。这样做的最佳做法是什么？我应该将此数据缓存到本地数据库吗？

更新：通常列表包含的每个项目的数据不多。但是那些项目类型（比如“公司信息”）我也将用于收藏夹，这些收藏夹应该始终存储在本地。所以我想为收藏夹和临时从服务器下载的项目重用同一张表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:49:42.257

首先，根据您的问题，请具体说明您的要求。

要处理从服务器到列表视图的数据.. 从服务器获取的数据（即解析的 json、xml 等）需要存储在一些集合中，比如 ArrayList 或 Hash map 等。

这些列表可以从上述集合中填充。

但是，如果您打算永久存储应用程序中的数据，即离线浏览等，那么您应该将数据保存在 sqlite db 中并使用 Cursor Adpater 等来显示列表。

因此，您使用 android 推荐的小部件和视图的方式取决于您的需求 + 以有效方式处理这些事情的优化方式。

# javascript - RabbitMQ + Web Stomp 和安全性

> ID：12263579
> 
> 赞同：5
> 
> 时间：2012-09-04T12:31:44.053
> 
> 标签：javascript, rabbitmq, stomp

RabbitMQ + Web Stomp 很棒。但是，我有一些我希望以只读或只写方式保护的主题。

似乎保护这些的唯一机制是使用rabbitmqctl。我可以创建一个虚拟主机、一个用户，然后应用一些权限。然而，这就是 Stomp 和 Rabbit 实现开始崩溃的地方。

主题形式为：stomp 中的 /topic/blah，它使用路由键“blah”路由到 Rabbit 中的“amq.topic”。似乎没有办法为路由键设置权限。似乎：

```
rabbitmqctl set_permissions -p vhost user ".*" ".*" "^amq\.topic" 
```

是我能做的最好的，这仍然是“所有”的话题。我也研究过交换，但在 javascript 中无法动态定义这些。

我在这里错过了什么吗？

参考：[http ://www.rabbitmq.com/blog/2012/05/14/introducing-rabbitmq-web-stomp/](http://www.rabbitmq.com/blog/2012/05/14/introducing-rabbitmq-web-stomp/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-26T08:35:53.947

试试这个[https://github.com/simonmacmullen/rabbitmq-auth-backend-http](https://github.com/simonmacmullen/rabbitmq-auth-backend-http) 灵活多了。基本上它是一个用于rabbit的小型身份验证插件，它将ACL决定委托给一个通过http（你可以完全控制它）的脚本，它只需要回复“允许”或“拒绝”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T11:12:32.970

是的，使用 RabbitMQ-WebStomp，您几乎只能使用普通的 RabbitMQ 权限集。这并不理想，但您应该能够正确设置基本权限。看看 RabbitMQ 文档：

[http://www.rabbitmq.com/access-control.html](http://www.rabbitmq.com/access-control.html)

快速查看 stomp 文档：

[http://www.rabbitmq.com/stomp.html](http://www.rabbitmq.com/stomp.html)

是的，您不能为特定的路由密钥设置权限。也许您应该使用“交换”语义，并明确地将交换与队列绑定（即：不要使用主题）：

/exchange/exchange_name[/routing_key]。

请在 rabbitmq-discuss 邮件列表上询问有关 RMQ 权限的具体问题。那里的人真的很有帮助。

不幸的是，对于一些更复杂的场景，RMQ 权限集是不够的。在这种情况下，您可能想要：

*   仅使用 STOMP 来*读取*数据，并且仅使用一些可以在内部直接与 rabbit 对话的外部 AJAX 接口发布消息。
*   或者，不要使用 web-stomp 插件并手动编写 SockJS 和 RabbitMQ 之间的简单桥梁。这为您提供了更大的灵活性，但需要更多的工作。

# python - 如何检测并断开与 Fabric 的空闲连接？

> ID：12263585
> 
> 赞同：1
> 
> 时间：2012-09-04T12:32:03.820
> 
> 标签：python, fabric

```
#import ssh
import socket
from fabric.operations import run

def connect_and_wait():
    #ssh.config.socket.setdefaulttimeout(5)
    socket.setdefaulttimeout(5)
    print('SSTART')
    run('echo START')
    run('sleep 10')
    run('echo END')
    print('EEND') 
```

上面的脚本打印所有内容，没有任何错误/异常。

Python 2.6.5，织物 1.4.2。

*   `socket.setdefaulttimeout()`不起作用。
*   `ssh.config.socket.setdefaulttimeout()`不起作用。
*   `fabric.api.env['timeout']`我想仅用于连接阶段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:36:09.560

Fabric 使用“惰性”连接到远程主机，并且可以在主机上执行任务并且连接丢失时自动重新连接。似乎没有办法显式删除空闲连接，但您可以关闭所有连接并让结构重新连接到“活动”主机。`fabric.network.disconnect_all()`做的伎俩。

# ios - 如何在 iOS 中裁剪视频

> ID：12263586
> 
> 赞同：3
> 
> 时间：2012-09-04T12:32:06.180
> 
> 标签：ios, video, avfoundation

我正在查看 Apple 提供的 RosyWriter 示例代码作为起点，我想找到一种方法来裁剪视频。

所以我有来自 iPhone 相机的全分辨率视频，但我只想使用它的裁剪部分（并旋转这个子部分）。

我想`captureOutput:didOutputSampleBuffer: fromConnection:`我可以通过修改我传入的 CMSampleBufferRef 来修改每一帧。

所以我现在的问题是：

1.  这是裁剪我的视频的正确位置吗？

2.  我在哪里指定最终视频（保存到光盘）的分辨率小于 AVCaptureSession 捕获的完整视频？设置`AVVideoWidthKey`and`AVVideoHeightKey`没有效果。

3.  如何裁剪视频并仍然具有良好的性能？

任何帮助表示赞赏！

非常感谢！

编辑：

也许我只需要知道如何通过将视频图像旋转 90 度然后再次放大以适应宽度来将纵向拍摄的视频制作成横向视频...？！？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T18:18:35.893

在 AVVideoSetttings.h 中有 AVVideoScalingModeKey。此键与定义的值相结合，控制在将图像编码到视频容器时如何缩放/裁剪视频。例如，如果您指定了 AVVideoScalingModeFit 的值，则使用裁剪。查看标题以了解其他值如何影响视频图像。

# iphone - XCode 4 中的 OCUnit，访问要测试的类时出现问题

> ID：12263593
> 
> 赞同：0
> 
> 时间：2012-09-04T12:32:27.313
> 
> 标签：iphone, objective-c, xcode4, ocunit

我在现有的 iPhone 应用程序中添加了一个 Cocoa Touch 测试包，默认测试似乎运行（失败！）很好，但是当我尝试将我的类从我的项目添加到测试目标时，我无法从中访问该类文件。

我将要测试的文件添加到单元测试目标中，但是如果我尝试创建要测试的类的实例，则它是未知的。

知道我可能会错过什么吗？

# gps - NMEA (GPS) 语句到地图位置

> ID：12263599
> 
> 赞同：7
> 
> 时间：2012-09-04T12:32:52.220
> 
> 标签：gps, nmea

我很难理解如何在地图上看到某个位置 NMEA 语句给我的位置：

敌人示例：给定句子

```
$GPRMC,225446,A,4916.45,N,12311.12,W,000.5,054.7,191194,020.3,E*68 
```

我在哪里输入什么信息，才能在地图上看到这个位置？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-03-08T23:04:39.087

它是`ddmm.mmmm`纬度格式和`dddmm.mmmm`经度格式

要将其转换为 dd.dddd 格式，您需要这样做

```
dd + mm.mmmm/60 for latitude
ddd + mm.mmmm/60 for longitude 
```

在你的情况下

```
4916.45,N,12311.12,W 
```

将会

```
49 + (16.45/60) = 49.2741 N
123 + (11.12/60) = 123.1853 W 
```

只需在谷歌地图上输入（49.2741 N 123.1853 W）即可查看位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:48:11.683

只需将这些参数放入 [http://www.findlatitudeandlongitude.com/](http://www.findlatitudeandlongitude.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-09T13:31:00.340

去这个网站： [https ://www.gpsvisualizer.com](https://www.gpsvisualizer.com)

点击“绘制数据点”

现在您将看到文本框。在那里复制您的 NMEA 字符串。它将在地图上显示位置

# php - Halogy CMS - 自定义导航

> ID：12263600
> 
> 赞同：0
> 
> 时间：2012-09-04T12:32:54.373
> 
> 标签：php, codeigniter, content-management-system, codeigniter-2, halogy

嗨，我最近才开始使用 Halogy，它是一个基于 codeigniter 的 cms。我目前只是在检查它，所以我使用的是免费版本，但我无法将注意力集中在自定义导航选项上。

首先，我无法访问导航部分，也无法使用此 {navigation(custom)} 在模板中显示自定义导航

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:42:10.690

出色地！我很高兴有人在使用它。对于您的问题，请转到页面创建页面保存并发布它，它将可供使用。就这样。

# ruby-on-rails-3 - 使用目标的范围作为关联条件

> ID：12263607
> 
> 赞同：4
> 
> 时间：2012-09-04T12:33:19.103
> 
> 标签：ruby-on-rails-3, activerecord, scope, associations

我有像

```
class Employee < ActiveRecord::Base
  belongs_to :branch, :foreign_key => :branch_code, :primary_key => :branch_code,
    :conditions => proc{["? BETWEEN enabled_day AND expiration_day", Date.current]}
end

class Branch < ActiveRecord::Base
  has_many :employees, :foreign_key => :branch_code, :primary_key => :branch_code

  scope :valid, lambda {where(["? BETWEEN enabled_day AND expiration_day", Date.current])}
end 
```

员工属于一个分支（简单），但分支有多个相同分支代码的记录，并且应该始终使用“此时有效”的记录。

（您可能会猜到，该项目正在移植旧应用程序并且它继承了旧模式）

现在，它确实有效，但我必须写两次完全相同的 where 条件（实际上分支与更多表相关联，所以 5 或 6 次）。

想知道我是否可以使用 Branch 的范围作为关联的条件，或者任何其他方式来干掉事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:18:59.743

将 has_many_through 与 default_scope 一起使用会起作用吗？

类似于以下内容：

```
class Employee < ActiveRecord::Base
  has_many :assignments
  has_one :branch, :through => :assignments
end

class Branch < ActiveRecord::Base
  has_many :assignments
  has_many :employees, :through => :assignments
end

class EmployeeAssignments < ActiveRecord::Base
  attr_accessible :enabled_day, :expiration_day

  belongs_to :employee
  belongs_to :branch

  def self.default_scope
    where '? BETWEEN enabled_day AND expiration_day', Date.current
  end
end 
```

# perl - Padre 给出一条关于不存在的行的错误消息

> ID：12263611
> 
> 赞同：1
> 
> 时间：2012-09-04T12:33:24.190
> 
> 标签：perl, padre

我有这个程序在 Windows 上运行正常，在命令提示符下使用“perl program.pl”或“perl program.pl file1.txt file2.txt”。

```
use strict;
use warnings;

print "there were ",scalar(@ARGV), " arguments passed to this program\n";
if ( scalar(@ARGV) > 1 )
{
    print "First Argument: $ARGV[0]\n";
    print "Second Argument: $ARGV[1]\n";
}

sub process_file($)
{
        my $filename = shift;
        print "will process file $filename\n";
        #open(INPUT_FILE,"<$filename") || die("could not open $filename");     
} 
```

即使在退出并返回 Padre 后，当我运行它时也会出现此对话框（如果单击“是”按钮，它仍然会运行正常）：

> 警告 X 第 31 行：使用 | char 在没有 a 的情况下打开 | 在开头或结尾通常是一个错字。你要继续吗？
> 
> [是] [否]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:30:18.247

我使用`or`而不是`||`with `open`。顺便说一句，我一直被告知`open`应该使用的三个参数形式。我知道 Perl 并不总是引用有问题的行。当然，我理所当然地认为注释掉的行是有问题的行，而您将其注释为测试？

# wpf - 我可以为 TextBox 控件组合 WPF (MVVM) 中 UpdateSourceTrigger 的不同设置吗？

> ID：12263615
> 
> 赞同：0
> 
> 时间：2012-09-04T12:33:34.540
> 
> 标签：wpf, xaml, binding, textbox

我有一个带有 TextBox 控件的 MVVM 应用程序，我想验证它是否为空。由于应该对每个击键执行评估，我更改了绑定，使其包含

`Text={Binding ..., UpdateSourceTrigger=PropertyChanged}`

现在我还想在 TextBox 控件失去焦点时执行一个操作，因此 TextBox 控件的默认行为将是合适的。我的问题是我不知道如何组合这两个设置（如果可能的话）。

任何的想法？如何对击键**和**LostFocus 事件做出反应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:38:17.460

您可以使用[附加行为](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)将`LostFocus`事件映射到 ViewModel 中的命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:41:05.567

您通常`IDataErrorInfo`会在.`INotifyDataErrorInfo``ViewModels``MVVM`

此外，`attributes`它们真的很强大，可能会根据您的要求为您提供一个很好的解决方案。在您的`ViewModel`.

```
[Required(ErrorMessage = "Field 'Range' is required.")]
[Range(1, 10, ErrorMessage = "Field 'Range' is out of range.")]
public int Range
{
    get
    {
        return this.range;
    }
    set
    {
        if (this.range != value)
        {
            this.range = value;
            this.OnPropertyChanged("Range");
        }
    }
} 
```

![在此处输入图像描述](../Images/b66ce44ee80129974b28f343506f2623.png)

我建议你看看这些文章。

**WPF MVVM 应用程序中基于属性的验证** [http://www.codeproject.com/Articles/97564/Attributes-based-Validation-in-a-WPF-MVVM-Applicat](http://www.codeproject.com/Articles/97564/Attributes-based-Validation-in-a-WPF-MVVM-Applicat)

**验证用户输入 - WPF MVVM** [http://www.codeproject.com/Articles/98681/Validating-User-Input-WPF-MVVM](http://www.codeproject.com/Articles/98681/Validating-User-Input-WPF-MVVM)

**在 MVVM 中使用属性和 IDataErrorInfo 接口进行 WPF 验证** [http://weblogs.asp.net/marianor/archive/2009/04/17/wpf-validation-with-attributes-and-idataerrorinfo-interface-in-mvvm.aspx](http://weblogs.asp.net/marianor/archive/2009/04/17/wpf-validation-with-attributes-and-idataerrorinfo-interface-in-mvvm.aspx)

**使用 IDataErrorInfo 在具有 Silverlight 和 WPF 的 MVVM 中进行验证** [http://www.arrangeactassert.com/using-idataerrorinfo-for-validation-in-mvvm-with-silverlight-and-wpf/](http://www.arrangeactassert.com/using-idataerrorinfo-for-validation-in-mvvm-with-silverlight-and-wpf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:43:27.720

您应该考虑使用`IDataErrorInfo`接口和`ValidatesOnErrorInfo`属性进行绑定。可以在这里找到一篇关于如何使用这两者的简单的博客文章：http: [//asimsajjad.blogspot.de/2010/08/input-validation-using-mvvm-pattern.html](http://asimsajjad.blogspot.de/2010/08/input-validation-using-mvvm-pattern.html)

# operating-system - 页面错误的数量？

> ID：12263619
> 
> 赞同：-2
> 
> 时间：2012-09-04T12:34:03.360
> 
> 标签：operating-system

这是问题所在：

大小为 460 字节的程序将访问一系列地址：`10,11,104,170,73,309,185,245,246,434 and 364`. 页面大小为`100`字节，程序仅在主存中使用 200 字节。如果 OS 使用 FIFO 算法，会发生多少次缺页中断？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:00:37.660

我想可能是这样的。
地址 | 当前记忆 | 状态
10 0-100 页面错误

11 0-100

104 0-100|100-200 页面错误

170 0-100|100-200

73 0-100|100-200

309 100-200|300-400 页面错误

185 100-200|300-400

245 300-400|200-300 页面错误

246 300-400|200-300 页面错误

434 200-300|400-500 页面错误

364 400-500|300-400 页面错误

我对吗？我注意到这个程序是 460 字节。页面对齐为 100byte。

# c# - 在 C# 中，将分配多少内存来保存指向被引用对象的指针？

> ID：12263623
> 
> 赞同：0
> 
> 时间：2012-09-04T12:34:12.703
> 
> 标签：c#, memory-management

据我所知，在 32 位机器上，指针占用 4 个字节（32 位）。但是，当我在我的应用程序上运行 CLRProfiler 时，令我惊讶的是，它显示分配的内存为 32 字节，仅用于保存一个接口指针。

![为引用类型分配的内存](../Images/ffc6845ce9572979bf895b1046126e80.png)

从上图中可以看出，377910 个对象消耗了 12 MB，这意味着每个对象 32 个字节。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:47:10.823

引用（而不是指针）存储了其他内容，例如 C# 'lock' 关键字的[监视器](http://msdn.microsoft.com/en-us/library/system.threading.monitor.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:58:53.473

每个对象都有开销。此外，您还必须考虑 CLR 会不时进行填充。请参阅[使用 C# 获取字段的大小（以字节为单位）](https://stackoverflow.com/questions/207592/getting-the-size-of-a-field-in-bytes-with-c-sharp#207605)

此外，列表在内部保留了当前使用的更多内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T13:09:33.720

尝试增加细节以查看它是否包括引用的实际对象的大小。

相比之下，请尝试以下程序：

```
class MemTest
{
    private static object[] TakeUpSpace = new object[1024 * 1024];
    public static void Main(string[] args)
    {
        var arr = TakeUpSpace;//make sure it's instantiated.
        Console.ReadKey(true);//keep running so we can profile.
    }
} 
```

在 32 位机器上分析它显示了一个 4MB 大小的数组 - 4 * 1024 * 1024，但没有引用实际对象。

然而这：

```
class MemTest
{
    private static object[] TakeUpSpace = new object[1024];
    public static void Main(string[] args)
    {
        var arr = TakeUpSpace;//make sure it's instantiated.
        for(var i = 0; i != 1024; ++i)
            arr[i] = new object();
        Console.ReadKey(true);//keep running so we can profile.
    }
} 
```

显示数组为 16KB。它`object[]`本身是 1024 * 4 = 4KB，但每个对象至少大 3 * 指针大小（字段大小至少为一个指针大小，加上每个对象的两个指针大小的标题）。

请求标题的解释。

每个 .NET 对象显然都包含为其定义的字段。如果没有字段，或者字段小于引用的大小，那么无论如何它至少会占用这么多。

每个 .NET 对象都包含一个同步块，其中包含有关是否在其上持有锁的信息，以及用于编组的一些其他信息。

每个 .NET 对象都包含一个类型句柄，我们可以从中找出它是哪种类型、虚拟成员的实现以及其他与类型相关的信息。

因此，当你有一个实际的对象——而不是一个空引用时，你可以保证为该对象占用至少 12 个字节的内存，以及对它的引用 4 个字节（当然可以有多个引用到同一个对象）。如果对象具有更多字段或更大的字段，您可能会占用更多，而且通常会如此。

# c# - LinkFinder.find 无法在 webcrawler 应用程序中工作

> ID：12263627
> 
> 赞同：0
> 
> 时间：2012-09-04T12:34:18.300
> 
> 标签：c#

编写代码作为从网页抓取链接的网络爬虫的开始。

按照此页面的说明进行操作：

[http://www.dotnetperls.com/scraping-html](http://www.dotnetperls.com/scraping-html)

我似乎收到无法找到 LinkFinder 的错误？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Diagnostics;

namespace WebCrawler
{
class Program
{
    static void Main(string[] args)
    {
        WebClient url = new WebClient();
        String initialLink = url.DownloadString("http://www.FAKEADDRESS.org.uk/");

        for (LinkItem i in LinkFinder.find(initialLink))
        {

            System.Diagnostics.Debug.WriteLine(initialLink);
        }
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T13:25:27.793

`LinkFinder`是包含在您提供的 URL 的代码中的类。确保您还以某种方式将该类复制到您的项目中（一个文件本身，另一个文件，等等）。

# c - 如何确定数字中的小数位数？

> ID：12263628
> 
> 赞同：1
> 
> 时间：2012-09-04T12:34:21.373
> 
> 标签：c, decimal

我正在用 C 编写一个程序。

有没有办法确定浮点数中的小数位数（即`0.123 = 3`等`0.123456 = 6`）？

除了将数字转换为字符串并使用字符串函数提取小数点后的字符之外？

我有一个名为 computeFare() 的函数

```
float computeFare()
{
  totalFare =  (3.40 + basicFare) * (1 + surchargePercent);
  return totalFare; // **in this case totalFare = 34.567**
}

printf("Total fare is $%.2f\n", 
            computeFare()); 
```

结果：总票价为 $34.56

我这样做了，它返回 34.56... 我希望它是 34.57 美元

谢谢，劳伦斯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T12:37:04.837

并非如此，小数位数是数字内部表示的函数。当您显示数字时，您看到的是数字作为打印字符串。

因此，如果您对显示的值感兴趣，您可以首先使用格式化指令来控制小数位数，例如`%5.2f`，或者使用您在帖子中提到的字符串函数方法，一旦您将数字作为细绳。

另外，顺便说一句，你会计算尾随零吗？

也许说明您想要这样做的目标会有所帮助？可能还有其他方法可以完成您想做的事情。

**更新**：

根据您的更新，问题实际上不在于计算小数位，而是您遇到了表示问题/舍入错误（并不罕见）。问题是某些小数值不能以 2 为底精确表示。这里有一个详尽的解释：[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

看看这个 SO 问题：[Understanding floating point representation errors；我的想法有什么问题？](https://stackoverflow.com/questions/6275327/understanding-floating-point-representation-errors-whats-wrong-with-my-thinkin)

您可以尝试这种方法来舍入该值：

```
float rounded_val = floorf(value * 100.0 + 0.5) / 100.0; 
```

维基百科有一整篇关于[舍入](http://en.wikipedia.org/wiki/Rounding)的文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T12:39:39.627

这些数字（通常）以 2 为底数存储，因此小数不太可能与简明的十进制字符串精确对应。为了得到整齐的小数，您可能必须先四舍五入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T12:37:27.383

`printf`您可以指定小数位数。

*   `%.0f`不等于小数位
*   `%.4f`等于浮点数，显示四位小数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T12:42:52.917

答：我不这么认为。即使你能得到尾数（指数值），它也会以 2 为底。
B. 此外，浮点数不准确，所以如果你没有完美的整数，你有无限个小数位. 当您打印数字时您不会看到它们，因为它们会被削减。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T13:09:26.137

在您最近一次编辑之后，听起来您只是想四舍五入，而不是您真正关心数字中的小数位数。

如果是这种情况，您可以使用如下代码：

```
#include <math.h>

float computeFare() 
{   
    float totalFare;
    totalFare =  (3.40 + basicFare) * (1 + surchargePercent);
    totalFare = floorf(totalFare * 100 + 0.5) / 100; //round the answer
    return totalFare; // **in this case totalFare = 34.567** 
}  
printf("Total fare is $%.2f\n",              computeFare()); 
```

# windows - 使用 makecert.exe 创建自签名 CA 证书

> ID：12263633
> 
> 赞同：5
> 
> 时间：2012-09-04T12:34:40.043
> 
> 标签：windows, ssl, ssl-certificate, makecert

我正在尝试在 32 位 Windows 7（虚拟）上创建自签名 CA 证书。makecert 是 v7.1，位于`C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin>`.

每当我尝试执行此命令（提升）...

```
makecert.exe -r -n “CN=MyCert CA” -pe -sv MyCert.pvk -a sha1 -len 2048
             -b 09/04/2012 -e 09/04/2018 -cy authority MyCert.cer 
```

...我收到提示输入密码，但当我确认时，我得到：

> 错误：CryptCertStrToNameW 失败 => 0x80092023 (-2146885597) 失败

任何帮助将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T12:42:21.497

我将您的命令复制到命令提示符中并得到了同样的错误。但是，我重新输入了命令并且它起作用了。我怀疑 name 参数`"CN=MyCert CA"`中的一个字符是一个特殊字符，可能是从文字处理器复制的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-06T21:36:04.043

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-24T05:04:05.973

You can also get the same error if you don't have CN= in the name.

For example I had this error with `-n "My Name"` , but it succeeded with `-n "CN=My Name"`

# objective-c - 将复杂对象写入文件objective-c

> ID：12263634
> 
> 赞同：0
> 
> 时间：2012-09-04T12:34:43.507
> 
> 标签：objective-c, serialization

我发现很难写入/读取自定义对象数组。在我的应用程序中，Contact 类有一个 NSDictionary 作为属性，而这个字典有一个数组作为键的对象。我用*NSCoder*和*NSKeyedArchiever*序列化/反序列化我的对象，甚至尝试*了 NSPropertyList*序列化。一旦开始序列化 NSDictionary，我总是在序列化时出错。这是我的代码，我并没有真正找到关于如何序列化具有复杂结构的自定义对象的一般答案？

```
//Contact.m
//phoneNumbers is a NSDictionary
#pragma mark Encoding/Decoding
-(void)encodeWithCoder:(NSCoder *)aCoder
{
    NSLog(@"Encoding");
    [aCoder encodeObject:self.firstName forKey:@"firstName"];
    NSLog(@"First name encoded");
    [aCoder encodeObject:self.lastName forKey:@"lastName"];
    NSLog(@"Last name encoded");
    [aCoder encodeInt:self.age forKey:@"age"];
    NSLog(@"Age encoded");

    NSString *errorStr;
    NSData *dataRep = [NSPropertyListSerialization dataFromPropertyList:self.phoneNumbers
                                                                 format:NSPropertyListXMLFormat_v1_0
                                                       errorDescription:&errorStr];
    NSLog(@"Data class %@", [dataRep class]);
    if(!dataRep)
    {
        NSLog(@"Error encoding %@", errorStr);
    }

    [aCoder encodeObject:dataRep forKey:@"phones"];

    NSLog(@"Encoding finished");

}

- (id) initWithCoder: (NSCoder *)coder
{
    if (self = [super init])
    {
        [self setFirstName:[coder decodeObjectForKey:@"firstName"]];
        [self setLastName:[coder decodeObjectForKey:@"lastName"]];

        [self setAge:[coder decodeIntForKey:@"age"]];

        NSString *errorStr;
        NSData *data=[coder decodeObjectForKey:@"phones"];
        NSDictionary *propertyList = [NSPropertyListSerialization propertyListFromData:data mutabilityOption:NSPropertyListImmutable format:NULL errorDescription:&errorStr];
        if(!propertyList)
        {
            NSLog(@"Error %@", errorStr);
        }

        [self setPhoneNumbers:propertyList];
    }
    return self;
}

//Serializing/Deserializing an array of Contact objects:
#pragma mark Import/Export

//Export Contacts to file
-(void)exportContactsToFile
{
    BOOL done=[NSKeyedArchiver archiveRootObject:self.contacts toFile:[PathUtility getFilePath:@"phonebook"]];
    NSLog(@"Export done: %i", done);
}

//Import Contacts from file

-(void)importContactsFromFile
{

    self.contacts = [NSKeyedUnarchiver unarchiveObjectWithFile:[PathUtility getFilePath:@"phonebook"]];
} 
```

有没有一种通用的好方法来序列化/反序列化objective-c中的对象？谢谢我得到的错误是：0objc_msgSend 1 CF_Retain ...这是堆栈跟踪，但我没有其他错误（

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:57:55.507

您不需要使用`NSPropertyListSerialization`self.phoneNumbers。NSDictionary 遵守`NSCoding`协议。

所以，`[aCoder encodeObject:self.phoneNumbers forKey:@"phones"];`应该够用了。

只要一个类遵守 NSCoding （几乎所有 Apple 提供的类都这样做），您就可以使用`-encodeObject:forKey:`，因为该方法将调用该对象的实现`-encodeWithCoder:`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T13:08:05.607

我的专有库中有一个特殊的类，它会自动读取其属性列表并使用 getter 和 setter 对对象进行编码和解码。对不起，我不能在这里分享代码，但我至少可以一步一步地告诉你我的课程是如何工作的：

1.  首先，类必须是实现`NSCoding`和`NSCopying`协议。

2.  在内部，使用和`+ (void)initialize`遍历类属性的定义。有关这些函数的详细信息，请参阅[Objective-C 运行时编程指南](https://developer.apple.com/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtPropertyIntrospection.html)。`class_copyPropertyList()``property_getName()``property_copyAttributeList()`

3.  对于每个属性，通过其属性列表运行并获取属性`strncmp(attribute.name, "T", 1) == 0`（是的，它是一个 c 字符串）。使用该属性值来确定属性的类型。例如，“i”表示`int`，“I”表示`unsigned int`，如果它以“{”开头，那么它就是一个`struct`等等。请参阅[此页面上的类型编码](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html#//apple_ref/doc/uid/TP40008048-CH100-SW1)。

4.  将属性名称-类型对存储在`NSDictionary`. 在属性迭代结束时，`NSMutableDictionary`使用类名作为键将此字典存储在静态和全局中。

5.  为了支持自动编码，实现`- (void)encodeWithCoder:(NSCoder *)aCoder`遍历属性名称-类型对，调用属性getter方法（通常）并使用适当的方法（例如，，，等）`- (returnType)propertyName`在编码器内部对其进行编码。`encodeType:``encodeInt:``encodeFloat:``encodeObject:``encodeCGPoint:`

6.  为了支持自动解码，实现通过属性名称-类型对进行迭代，使用适当的方法（例如, ,等）`- (id)initWithCoder:(NSCoder *)aDecoder`从解码器中对其进行解码。并调用属性设置器方法（通常）。`decodeTypeForKey:``decodeIntForKey:``decodeFloatForKey:``decodeObjectForKey:``decodeCGPointForKey:``- (void)setPropertyName:`

7.  实现一个触发编码的实例方法（幸运的是我可以在这里分享这个方法^__^）：

    ```
    NSMutableData *data = [NSMutableData data];
    NSKeyedArchiver *arc = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    [arc encodeRootObject:self];
    [arc finishEncoding];
    [arc release];
    return data; 
    ```

8.  一旦你有了它，`NSData`你就可以用它做任何事情，比如 call`writeToFile:atomically:`甚至`[[NSUserDefaults standardUserDefaults] setObject:[self wrapInNSData] forKey:key]`.

9.  此外，实现一个类方法，该方法返回从文件加载的对象的新实例：

    ```
    NSKeyedUnarchiver *unarc = [[NSKeyedUnarchiver alloc] initForReadingWithData:[NSData dataWithContentsOfFile:dataFilePath]];
    MyCoolFileDataStore *data = [unarc decodeObject];
    [unarc release];
    return data; 
    ```

10.  最后，为了使另一个对象类支持这种自动编码-解码，该类需要扩展特殊类。

抱歉，有点啰嗦，但就我而言，创建这个类所花费的额外麻烦确实节省了很多时间。今天奋斗，明天轻松；）

# jquery - jquery 链动画 mouseenter mouseleave

> ID：12263635
> 
> 赞同：1
> 
> 时间：2012-09-04T12:34:43.490
> 
> 标签：jquery, animation, mouseevent, chaining

您好，我有以下问题，我有 12 个图像，悬停时会根据鼠标输入的位置在每个图像上播放一系列动画。我希望每个动画一个接一个地执行，但是当我将鼠标快速悬停在图像上时，或者即使动画未完成，动画也无法按预期工作。我整个早上都在试图弄清楚但没有运气。在 mouseleave 事件中，我并没有仅仅出于调试目的制作链式动画，但我需要将其链接起来。在此处查看问题的现场演示：[http](http://www.evented.gr/evd2/main.php) ://www.evented.gr/evd2/main.php（4x3 = 12 图像）。

这是代码：

```
$('#upcoming-events .upcoming-event').mouseenter(function(){
    $(this.parentNode).find('div.ue-category').stop(true,true).animate({height:'0px',queue:false},100,function(){
        $(this.parentNode.parentNode).animate({backgroundColor:'#a00000',queue:false},250,function(){
            $(this.parentNode).find('div.slider').animate({height:'221px',queue:false},250,function(){
                $(this.parentNode).find('div.ue-corner').animate({width:'58px',queue:false},100,function(){

                });     
            });
        });
    });

});

$('#upcoming-events .upcoming-event').mouseleave(function(){

    $(this.parentNode).find('div.slider').animate({height:'50px',queue:false},250);
    $(this).animate({backgroundColor:'#fff',queue:false},250);
    $(this.parentNode).find('div.ue-category').animate({height:'20px',queue:false},100);    
    $(this).find('div.ue-corner').animate({width:'0px',queue:false},100);

}); 
```

# asp.net-mvc - ASP.NET MVC 将表单值传递给操作方法

> ID：12263637
> 
> 赞同：6
> 
> 时间：2012-09-04T12:35:23.447
> 
> 标签：asp.net-mvc, forms

我有以下表格

```
<form name="SearchForm" method="post" id="SearchForm" action="/Search/"> 
```

和下面的按钮

```
<input type="button" onclick="javascript:document.SearchForm.submit();" class="btn-leftsearch"> 
```

单击此按钮时，表单提交并调用此方法

```
[HttpPost]
public ActionResult Index(string querystring)
{
   return View();
} 
```

当然查询字符串为空。我想将查询字符串或最好是代表表单中字段的其他内容传递给控制器​​。我试过在表单标签中使用 action 属性。我试图将数据添加到按钮中的 onclick 方法中。没有任何工作。我想做的就是传递一些这样的数据

```
Search?pri=all&amenity=pool etc 
```

在控制器中我会有类似的东西

```
[HttpPost]
public ActionResult Index(string pri, List<string> amenities)
{
   ...
} 
```

有人可以告诉我如何将这些数据传递给视图吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T12:53:28.050

我想建议您可以使用以下代码片段来解决您的问题。

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Index(FormCollection collection)
{
     string valueFromNameTextBox = collection["name"];
} 
```

关于收藏请在搜索文本框中输入名称。您将获得实际输入的值。您可以使用表单上所有输入的名称对该集合进行索引。

# c++-cli - C++.net/C++ CLI 中的 GetDirectories

> ID：12263639
> 
> 赞同：0
> 
> 时间：2012-09-04T12:35:30.153
> 
> 标签：c++-cli, directory-listing

按照微软为 Directory::GetDirectory 提供的示例，我来到了这段代码：

```
auto k = System::IO::Directory::GetDirectories(installpath);
auto dir = k->GetEnumerator();
while (dir->MoveNext())
    {
       String^ subdirectory = safe_cast<String^>(dir->Current);
       MessageBox::Show(subdirectory);
    } 
```

这应该列出安装路径中的所有目录，对吗？好吧，它似乎不起作用！（没有消息框）我该如何解决这个问题？

注意： installpath 存在并且有子目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:36:06.107

哦，愚蠢的我！安装路径更深 1 个文件夹，里面什么都没有！带来不便敬请谅解！

# c# - 使用 BouncyCastle 进行数字签名验证 - 带有 SHA 256、C# 的 ECDSA

> ID：12263641
> 
> 赞同：3
> 
> 时间：2012-09-04T12:35:33.530
> 
> 标签：c#, bouncycastle

以下是我的场景 - 我从条形码中读取数据并将其转换为纯文本。此文本是条码数据+数字签名的组合。数字签名附加到末尾，这使我能够分离出实际数据和数字签名数据。使用 sha256 对数字签名数据进行散列 - 用户向我发送一个公钥作为 Windows 证书文件 ( `.cer extension`)。

所需实现： - 需要从证书中提取公钥，并根据条形码数据和提供的数字签名验证公钥。

这是我试图用来验证签名的代码

```
//Note : 
//1\.  certPath : is the path where my certificate is located 
//2\. GetStreamdata  get the stream of data from the certificate. 

//Get the certificate data here 
                Org.BouncyCastle.X509.X509Certificate cert1 = new X509CertificateParser().ReadCertificate(GetStreamData(cerPath)); 
//get the public key 
                ECPublicKeyParameters ecPublic = (ECPublicKeyParameters)cert1.GetPublicKey(); 
//create a signerutility with type SHA-256withECDSA 
                ISigner signer = SignerUtilities.GetSigner("SHA-256withECDSA"); 
//initial signer with the public key 
                signer.Init(false, ecPublic); 
//get signature in bytes : digitalsignature parameter contains signature that should be used. 
                byte[] dBytes = encoding.GetBytes(digitalsignature); 
//block/finalise update to signer : data : is the actual data. 
                signer.BlockUpdate(data, 0, data.Length); 
                    try 
                    { 
//verify signature 
                         verified =  signer.VerifySignature(dBytes); 
                    } 
                catch(Exception ex) 
                    { 
                        _log.LogException(ex); 
                    } 
```

我能够实现的是：使用充气城堡库提取公众

问题 ：

```
Exception thrown on signer.verifysignature
  Message=Unable to cast object of type 'Org.BouncyCastle.Asn1.DerApplicationSpecific' to type 'Org.BouncyCastle.Asn1.Asn1Sequence'. 
  Source=BouncyCastle.Crypto 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:34:22.603

问题是我必须在 iso-8859-1 中编码数字签名值。我以前是用 ASCII 编码的。这解决了问题，我能够验证签名。

# c# - 在 C# VS 2012 中没有结果的 if 语句

> ID：12263644
> 
> 赞同：0
> 
> 时间：2012-09-04T12:35:42.563
> 
> 标签：c#, 64-bit, visual-studio-2012

我在 VS 2012 中有这样的代码：

```
private void Form1_Load(object sender, EventArgs e)
    {
        if (Properties.Settings.Default["Database"] != null)
        {
            MessageBox.Show("We landed on spot 1");
        }
        else
        {
            MessageBox.Show("We landed on spot 2");
        }
    } 
```

我很确定我搞砸了条件语法，但我希望其中一种会发生：

1.  编译器警告错误/项目无法运行。
2.  显示第一条消息
3.  显示第二条消息。

但这些都没有真正发生。我已经盯着这个看了一个小时，我能找到的资源非常少。如果有经验的人可以解释一下这里到底发生了什么？

**编辑：** 感谢[JMK 的链接](https://stackoverflow.com/questions/7572995/how-can-i-get-winforms-to-stop-silently-ignoring-unhandled-exceptions)，我发现这基本上是在 Windows x64 下的 VS 调试器中弹出的 wontfix 错误。如果应用程序在调试器之外运行，则会触发错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:41:54.773

它默默地出错。

```
 try
    {
        if (Properties.Settings.Default["Database"] != null)
        {
            MessageBox.Show("We landed on spot 1");
        }
        else
        {
            MessageBox.Show("We landed on spot 2");
        }
    }
    catch (Exception ee)
    {
        MessageBox.Show(ee.Message);
    } 
```

返回“未找到设置属性‘数据库’”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:52:30.367

尝试在`Properties`

```
if (WindowsFormsApplication2.Properties.Settings.Default.Database != null) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T13:28:36.350

可能抛出异常并且调试器没有注意到。这发生在 64 位 Windows 版本上的 Windows 窗体项目（并且不是特定于 .NET 的行为，而是一般的 Windows）。

此处有更多详细信息：[Visual Studio 不会因 Form_Load 事件中的异常而中断](https://stackoverflow.com/questions/1624156/visual-studio-does-not-break-at-exceptions-in-form-load-event)

尝试按下`STRG + ALT + E`并标记“Common Language Runtime Exceptions”的复选框“Thrown”。现在调试器将中断 Form_Load() 中的任何异常

因为我知道我的解决方法是完全避免使用 Load 事件。

我的大多数表单都是对话框，所以我隐藏 ShowDialog() 方法并调用 Init() 函数。

```
public class Form1
{

    public new DialogResult ShowDialog()
    {
        Init();
        return base.ShowDialog();
    }

    public new DialogResult ShowDialog(IWin32Window owner)
    {
        Init();
        return base.ShowDialog(owner);
    }

    public void Init()
    {
        // code goes here
    }
} 
```

# android - Android JSONObject 和微软通用反序列化

> ID：12263648
> 
> 赞同：0
> 
> 时间：2012-09-04T12:36:12.243
> 
> 标签：android, wcf

> **可能重复：**
> [JSON 顺序混淆](https://stackoverflow.com/questions/3948206/json-order-mixed-up)

通过 Microsoft 约定，我需要将 Json 作为字符串发送，其中 __type 首先出现。

但是在 Android 中，当我尝试将 json 对象作为 StringEntity 发送，然后 JSONObject 调用 toString 方法时，它是混合字段，而 __type 排在第二位。

在网络反序列化站点上，它崩溃了，因为它无法反序列化对象。

如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:39:30.767

JSON 对象中的字段本质上是无序的；看到[JSON 顺序混淆了](https://stackoverflow.com/questions/3948206/json-order-mixed-up)。

如果您需要特定的排序，则必须手动构建 JSON 数据。

# asp.net - 在 ASP.net MVC 中加载相关数据

> ID：12263659
> 
> 赞同：0
> 
> 时间：2012-09-04T12:37:05.350
> 
> 标签：asp.net, asp.net-mvc, entity-framework

一些非常简单的事情，但我正在寻找最好的方法来做到这一点。我有一个电影实体，每部电影只能使用一种语言（英语、法语等查找表）。现在我正在尝试在电影创建页面的查找中加载所有可用的语言，即电影视图模型：

```
namespace Project.ViewModels {
    public class Movie {

        [Key]
        public int ID { get; set; }

        public string Title { get; set; }

        public string Rating { get; set; }
        public string Director { get; set; }
        public string Plot { get; set; }
        public string Link { get; set; }
        public string Starring { get; set; }
        public int DateCreated { get; set; }

        public string Genre { get; set; }

        [Display(Name = "Language")]
        public int LanguageID { get; set; }

        // Navigational Properties
        public virtual MovieLanguage Language { get; set; }
    }
} 
```

MovieLanguage 视图模型：

```
namespace MAKANI.ViewModels {
    public class MovieLanguage {

        [Key]
        public int ID { get; set; }

        public string Language { get; set; }

        public virtual ICollection<Movie> Movies { get; set; }
    }
} 
```

控制器动作：

```
public ActionResult MovieCreate() {

    using (MAKANI.Models.Entities db = new MAKANI.Models.Entities()) {

        List<Models.MoviesLanguages> enLanguages = db.MoviesLanguages.ToList();

        IEnumerable<SelectListItem> selectList =
                   from m in enLanguages
                   select new SelectListItem {                              
                       Text = m.Language,
                       Value = m.ID.ToString()
                   };
        ViewBag.SelectLanguage = selectList.ToList();

        return View();
    }          
} 
```

在查看页面中我有

```
 <div class="editor-field">
        @Html.DropDownList("Language", ViewBag.SelectLanguage);            
    </div> 
```

但是，我在视图中收到此错误： *“System.Web.Mvc.HtmlHelper”没有名为“DropDownList”的适用方法，但似乎具有该名称的扩展方法。扩展方法不能动态调度。考虑强制转换动态参数或在没有扩展方法语法的情况下调用扩展方法*

不确定问题可能是什么？

关于这种方法的另一个问题：

*   是否应该首先为 MovieLanguage 实体创建一个视图模型，知道它仅作为查找表提供服务（因此它不需要任何创建/编辑/删除操作，可能仅列出/读取），我是否应该取决于在那种情况下直接EF实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:47:20.103

`Languages`在您的ViewModel 中有一个Collection 属性`Movie`和一个 SelectedLanguage 属性，以便在提交表单时获取选定的语言 ID。您的 ViewModel 不必像您的域模型一样具有所有属性。**仅具有视图需要的那些属性。**

```
public class Movie 
{
  public int ID { set;get;}
  public string Title { set;get;}
  //Other Relevant Properties also.

  public IEnumerable<SelectListItem> Languages { set;get;}
  public int SelectedLanguage { set;get;}

  public Movie()
  {
     Languages =new List<SelectListItem>();
  }
} 
```

现在在您的`GET`Action 中，创建`Movie`ViewModel 的对象并设置 Languages Collection 属性并将其发送到 View。尽量[避免](https://stackoverflow.com/a/4705446/40521)使用 ViewBag 来传递这样的数据。`ViewBag`使我们的代码变脏。为什么不充分使用强类型 ViewModels 呢？

```
public ActionResult CreateMovie()
{
  var vm=new Movie();    

  // TO DO : I recommend you to abstract code to get the languages from DB 
  //         to a different method so that your action methods will be
  //         skinny and that method can be called in different places.
  var enLanguages = db.MoviesLanguages.ToList();
  vm.Languages= = from m in enLanguages
               select new SelectListItem {                              
                   Text = m.Language,
                   Value = m.ID.ToString()
               };

  return View(vm);
} 
```

在您对我们的 ViewModel 进行强类型化的视图中`Movie`，使用 DropDownListFor Hemml 辅助方法

```
@model Movie
@using(Html.Beginform())
{
    @Html.DropDownListFor(x => x.SelectedLanguage, 
            new SelectList(Model.Languages, "Value", "Text"), "Select Language")
   <input type="submit" />
} 
```

现在，当您发布表单时，您将在`SelectedLanguage`ViewModel 的属性中获得选定的语言 ID

```
[HttpPost]
public ActionResult CreateMovie(Movie model)
{
   If(ModelState.IsValid)
   {
       //check model.SelectedLanguage property here.
      //Save and Redirect (PRG pattern)
   }
   //you need to reload the languages here again because HTTP is stateless. 
   return View(model);
} 
```

# php - Php - 邮件到电子邮件地址，检索并存储在 MySQL 数据库中

> ID：12263663
> 
> 赞同：2
> 
> 时间：2012-09-04T12:37:22.050
> 
> 标签：php

我正在开发一个系统，如果客户提交订单，他们会收到一封确认电子邮件。但是，我想让以下事情发生。如果客户随后点击回复并回复此电子邮件地址，我希望他们的消息不会发送到该电子邮件地址，而是存储在服务器上的 MySQL 数据库中。

有没有办法以这种方式“拦截”和发送电子邮件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T12:40:13.117

将回复地址设置为直接进入邮箱，您可以使用 PHP 的[imap_open](http://au.php.net/imap_open)访问该邮箱来访问和*阅读*电子邮件。有了这些，根据需要将数据插入数据库应该是一件简单的事情。

```
<?php
$mbox = imap_open("{imap.example.org:143}", "username", "password");

echo "<h1>Mailboxes</h1>\n";
$folders = imap_listmailbox($mbox, "{imap.example.org:143}", "*");

if ($folders == false) {
    echo "Call failed<br />\n";
} else {
    foreach ($folders as $val) {
        echo $val . "<br />\n";
    }
}

echo "<h1>Headers in INBOX</h1>\n";
$headers = imap_headers($mbox);

if ($headers == false) {
    echo "Call failed<br />\n";
} else {
    foreach ($headers as $val) {
        echo $val . "<br />\n";
    }
}

imap_close($mbox);
?> 
```

[PHP IMAP 函数](http://au.php.net/manual/en/book.imap.php)的完整列表非常详尽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:40:24.340

没有邮箱直接是不可能的。

但是您可以为此创建一个特殊邮箱，并`imap_*`从 PHP 获取电子邮件到函数，并基于`subject`or`email`将它们保存在数据库中，然后删除该电子邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:41:03.990

使用[PHP IMAP](http://php.net/manual/en/book.imap.php)函数，您可以阅读发送到特定地址的邮件。但是，您不能让它不发送到该地址。但是您可以使用邮件，将其放入数据库并删除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:39:42.747

我认为没有办法轻松做到这一点。您可以做的是在您的电子邮件中添加一个回复标题并将其发送到一个受监控的邮箱，一个守护程序类型的服务会定期检查新电子邮件并完成其工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T12:43:35.940

您可以查看以下链接和资源：

1.  [http://framework.zend.com/manual/en/zend.mail.read.html](http://framework.zend.com/manual/en/zend.mail.read.html)

2.  [http://code.google.com/p/php-imap](http://code.google.com/p/php-imap)

或者你可以按照这个[SO question](https://stackoverflow.com/questions/3468937/how-to-insert-incoming-e-mail-message-into-mysql-database)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T12:46:17.250

是的，有可能。看看这里：[http ://www.mddhosting.com/support/knowledgebase/1011/Email-Piping-to-a-PHP-Script-in-cPanel-x3-Theme.html](http://www.mddhosting.com/support/knowledgebase/1011/Email-Piping-to-a-PHP-Script-in-cPanel-x3-Theme.html)

另一个：[http ://harrybailey.com/2009/02/send-or-pipe-an-email-to-a-php-script/](http://harrybailey.com/2009/02/send-or-pipe-an-email-to-a-php-script/)

# svg - 在Firefox，IE中d3上的提示工具提示定位

> ID：12263666
> 
> 赞同：6
> 
> 时间：2012-09-04T12:37:32.993
> 
> 标签：svg, tooltip, d3.js, tipsy

我正在绘制[d3 线图](https://github.com/mbostock/d3/wiki)和附在圆圈上的[醉酒工具提示。](https://github.com/jaz303/tipsy)

工具提示在 Chrome/Safari 中运行良好，但在 Firefox 和 IE 中，当您将鼠标悬停在某个点上时，虽然确实出现了相应的工具提示，但它显示在屏幕左上角的图形/SVG 元素之外（html 元素）的旁边。

这就是我附加工具提示的方式：

```
 jQuery('g circle').tipsy({
        gravity: 'w', 
        html: true,
        title: function() {
            return this.textContent;
        }
    }) 
```

任何关于我做错了什么的建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T17:55:44.443

[该](https://github.com/ajah/tipsy/commit/b9cf0e1c0731d3265cd0cebded44a2af2278f979)补丁为 Tipsy 添加了适当的 SVG 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:57:31.767

Tipsy 在元素上使用 offsetWidth 和 offsetHeight。它假设这样的事情适用于 SVG 元素，不幸的是，这种假设在 Chrome/Safari 之外是不正确的。

CSSOM规范说 offsetWidth/offsetHeight 是 html 元素属性[。](http://www.w3.org/TR/cssom-view/#offset-attributes)似乎 Chrome/Safari 已将这些放在其 SVG 元素上，但没有规范说明应该如此。

您要么需要修复醉醺醺的跨浏览器，要么让作者去做。使用 getTransformToElement 和/或 getBBox 可能是需要的。

# html - 如何解决对象无效值：因为属性 'og:image:url' 的给定值 '' 无法解析为类型 'url'

> ID：12263670
> 
> 赞同：0
> 
> 时间：2012-09-04T12:37:59.673
> 
> 标签：html, facebook-graph-api, facebook-opengraph

当我运行*developers.facebook.com/tools/debug/og/object?q=www.joyatwork.co*时出现此错误。页面代码包含：

```
<meta property="og:image" content="" /> 
```

是“”被误解为“还是有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:20:02.497

`og:image`是空的，要么删除它，要么提供图像的 url。还为您的元属性使用双引号

例如

```
<meta property="og:title" content="Príbeh o novom začiatku" /> 
```

# android - AudioTrack Android 从原始文件夹播放声音

> ID：12263671
> 
> 赞同：7
> 
> 时间：2012-09-04T12:38:05.213
> 
> 标签：android, inputstream, audiotrack

`AudioTrack`是否可以从资源文件夹 raw播放 wav 文件？它尝试了很多方法来引用我的 Android 项目中的原始文件，但我遇到了很多异常。

这就是我现在所拥有的，但是当我按下按钮时，没有声音播放。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Button buttonPlayAudioTrack = (Button) findViewById(R.id.buttonPlayAudioTrack);
    buttonPlayAudioTrack.setOnClickListener(this);

    int minBufferSize = AudioTrack.getMinBufferSize(44100, AudioFormat.CHANNEL_CONFIGURATION_MONO, 
                        AudioFormat.ENCODING_PCM_16BIT);

    audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, 44100, AudioFormat.CHANNEL_CONFIGURATION_MONO, 
                     AudioFormat.ENCODING_PCM_16BIT, minBufferSize, AudioTrack.MODE_STREAM); 
}
public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v.getId() == R.id.buttonPlayAudioTrack) 
        playSound();
}

private void playSound() {
    audioTrack.play();
    int i = 0;
    int bufferSize = 512;
    byte [] buffer = new byte[bufferSize];
    InputStream inputStream = getResources().openRawResource(R.raw.piano12);
    try {
        while((i = inputStream.read()) != -1)
            audioTrack.write(buffer, 0, i);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        inputStream.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T09:18:20.277

你的代码一切都很好，你只需要改变

```
while((i = inputStream.read()) != -1) 
```

到

```
while((i = inputStream.read(buffer)) != -1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-14T10:48:09.327

...并且您应该在将 PCM 内容写入缓冲区后放置 audioTrack-play-call ;)

# html - soundcloud播放器是如何编程的？

> ID：12263672
> 
> 赞同：15
> 
> 时间：2012-09-04T12:38:06.773
> 
> 标签：html, soundcloud

这可能是一个过于宽泛的问题，但 soundcloud 是如何实际编程的？

更加具体，

1.  用什么语言来编程它？

2.  它如何显示频率数据？

3.  如果用户以不同于 MP3 的格式上传文件，它是转换为 MP3 还是按原样播放？如果是前者，转换是如何工作的？

4.  它是如何“以图形方式”出现在浏览器上的？它也是我一无所知的HTML 5吗？

我是 soundcloud 的忠实粉丝，我一直想知道所有这些是如何工作的！请帮帮我:)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-04T22:05:43.503

SoundCloud 开发者在这里，

1.  API 和当前网站是使用 Rails 构建的。有关架构/基础架构及其在过去 5 年中如何演变的信息，请查看[SoundCloud 架构的演变](http://backstage.soundcloud.com/2012/08/evolution-of-soundclouds-architecture/)。该网站的[“下一个”版本](http://next.soundcloud.com)（仍处于私有测试阶段）完全使用 Javascript 构建，并且仅使用 API 来获取其数据。[Building The Next SoundCloud](http://backstage.soundcloud.com/2012/06/building-the-next-soundcloud/)中提供了更多详细信息。

2.  我不确定究竟使用什么语言/库来处理音频，但许多音频库确实提供了频率数据，我们只是将其提取出来。

3.  用户可以上传[AIFF、WAVE (WAV)、FLAC、OGG、MP2、MP3、AAC、AMR 或 WMA 文件](http://help.soundcloud.com/customer/portal/articles/247477-what-formats-can-i-upload-)。原件与下载选项完全相同，但对于网站上的流媒体，它们被转换为 128kbps MP3 文件。同样，我不确定软件/库，但我很确定它会是 ffmpeg。

4.  为了显示波形，在后端处理音频文件上传时，将波形数据保存为PNG文件。在当前版本的网站上，我们只需加载该文件。在 Next 上，处理 png 以获取原始数据，然后以所需的确切尺寸将其绘制到画布上（以保持图像清晰）。我们目前正在尝试以 JSON 格式获取波形数据以加快此过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:55:55.500

我正在复制 David Noël在 2010 年在[其他地方](http://www.quora.com/SoundCloud/What-technologies-is-SoundCloud-built-on)发布的以下信息。

> Web 层：varnish、nginx、haproxy、thin
> 
> 数据管理：Cassandra、MongoDB、mySQL 主/从集群、memcached
> 
> Web 框架：Ruby on Rails
> 
> CDN：Akamai 和 Edgecast
> 
> 转码/存储：AWS EC2/S3

# c# - PageIndexChange 在 BindData 之后没有得到处理

> ID：12263674
> 
> 赞同：2
> 
> 时间：2012-09-04T12:38:15.693
> 
> 标签：c#, gridview, .net-3.5, asp.net-3.5, page-index-changed

使用`<asp:GridView`and `<asp:SqlDataSource`，我可以`AllowPaging="True"`在 GridView 中添加分页并完美运行。

但是，如果我使用`<asp:GridView`但不使用`<asp:SqlDataSource`，相反，如果我使用 C# 编码方法并创建一个`BindData()`函数，则一切正常，除非我尝试实际使用分页。

我得到错误：

```
The GridView 'GridView1' fired event PageIndexChanging which wasn't handled. 
```

为什么这在和一起使用时会自动`<asp:SqlDataSource`处理，但在和一起使用`AllowPaging="True"`时不会被处理？`<asp:SqlDataSource``BindData()`

# mysql - 在mysql中存储带前缀的日期

> ID：12263679
> 
> 赞同：0
> 
> 时间：2012-09-04T12:38:31.480
> 
> 标签：mysql, database

我需要使用前缀（公元前 100 年或 1940 年）存储和排序日期，通常它将是两个日期时间类型的字段。在这种情况下它应该是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:44:21.743

您不想在一列中存储两种类型的信息。我可以提醒你第一范式吗？

提供有关您想做什么的更多信息，否则我们将无法为您提供帮助。

# iphone - 如何在tableview中插入和删除单元格

> ID：12263683
> 
> 赞同：0
> 
> 时间：2012-09-04T12:39:04.087
> 
> 标签：iphone, ios, tableview

实际上我的要求是，我有数据，我在我的 tableview 单元格上显示这些数据。当我单击任何单元格时，tableview 应在单击的单元格之后立即再插入三个单元格，当您单击另一个单元格时，旧的单元格应再次缩小并再次展开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:40:34.100

您需要使用这些方法：

```
[self.tableView insertRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

和

```
[self.tableView deleteRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

您可以根据需要设置路径。

```
NSArray *paths = [NSArray arrayWithObjects: [NSIndexPath indexPathForRow:0 inSection:0], ..., nil]; 
```

**更新：**

您还需要更新`numberOfRowsInSection`. 你可以`BOOL`在你的类中设置一个告诉当前显示的额外单元格是否被隐藏，然后检查它`BOOL`以知道要返回什么数字。例如：

```
if (extraCellsAreShowing) {
    return 4;
}
else {
    return 1;
} 
```

此外，如果您为表视图数据源使用一组值，您可能还需要更改这些值。我真的不能举一个例子，因为这取决于你的具体情况。

# java - 在tomcat 7上部署战争时的无限循环

> ID：12263684
> 
> 赞同：7
> 
> 时间：2012-09-04T12:39:05.090
> 
> 标签：java, tomcat, deployment, war, webarchive

我尝试将战争部署到 Tomcat 7.0.29 中。我有以下日志堆栈：

```
GRAVE: Error waiting for multi-thread deployment of context descriptors to complete
java.util.concurrent.ExecutionException: java.lang.StackOverflowError
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:574)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:470)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1413)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:313)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:401)
    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:346)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1140)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:785)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.StackOverflowError
    at java.util.HashSet.<init>(HashSet.java:86)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2208)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2227)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2227)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2227)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2227)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2227)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2227)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2227) 
```

（省略了许多堆栈帧...）

有人面临同样的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T09:42:48.263

这在上游报告为 Tomcat 中的问题[#53871](https://issues.apache.org/bugzilla/show_bug.cgi?id=53871)。问题似乎与注释扫描有关，并且 Tomcat 7.0.38 包含更清晰的错误消息。

从错误报告中：

> 由于依赖管理问题，我部署了一个 WAR 文件，其中包含两个 JAR 文件，其中包含不同版本的库，其中版本 1 包含从 B 继承的类 A 和另一个版本 2，其中包含从 A 继承的类 B。这些类被加载到这样的顺序 A 和 B 循环地相互继承，这会导致 populateSCIsForCacheEntry 中的堆栈溢出，因为它没有检测到继承树中的循环。

这正是我的问题所在：旧版本`dom4j`捆绑了不兼容的`jaxen`. 7.0.38 中的新错误诊断准确显示了哪些类形成了循环，我通过升级这些依赖项来修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T11:51:30.927

我在 Tomcat 7.0 中也遇到了这个问题。**29**和 Tomcat 7.0。**30** . 但是使用 Tomcat 7.0。**28**一切正常，所以我怀疑这是最近引入的 Tomcat 问题。

在 7.0 中遇到的错误。**29**和 7.0。**30**、启动Tomcat并部署war文件时：

```
14:01:06,380 ERROR [HostConfig:576] Error waiting for multi-thread deployment of context descriptors to complete java.util.concurrent.ExecutionException: java.lang.StackOverflowError
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:574)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:470)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1413)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:313)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:401)
    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:346)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1140)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:785)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.StackOverflowError
    at java.util.HashSet.<init>(HashSet.java:103)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2243)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2260)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2260) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T09:10:43.710

使用较低版本的**Tomcat**。您使用的**Tomcat**版本存在问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T14:45:42.300

一种解决方法：我更改了**WAR**的名称（pom.xml 中没有 finalName 并更改了工件版本）并且它有效....为什么？我到现在都不知道！

一个真正的和真正的解决方案？绝对是一个新的**Tomcat**版本。. .

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T20:24:21.210

对我来说，当我将应用程序上下文设置为与 .pom 文件中的 Maven atrifactId 相同的名称时，这种行为在 IntelliJ Idea 中重现。例如，我的 artifactId 是“test”，然后我将应用程序上下文（编辑配置 -> Tomcat 服务器 -> 部署，选择分解的工件）设置为“/test”。一旦我更改了应用程序上下文，一切正常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-01T06:15:29.150

我有同样的问题。我认为它是由**Tomcat 7**引起的，所以当我更改为**Tomcat 6.0.35**时，问题像魅力一样自行解决。

# java - 是否可以在不激活插件的情况下触发 RCP-Plugin 中的一系列操作？

> ID：12263685
> 
> 赞同：0
> 
> 时间：2012-09-04T12:39:08.890
> 
> 标签：java, eclipse, plugins, eclipse-plugin, eclipse-rcp

如果我激活 Eclipse 插件（例如，通过单击菜单中插件的命令），则会自动触发一些操作 - 例如设置首选项等。

我想问一下是否可以在Eclipse启动时自动激活插件而不点击任何操作？

可能重复：[启动时在 Eclipse RCP 中启动操作](https://stackoverflow.com/questions/2220586/launch-an-action-in-eclipse-rcp-at-startup)

我不确定是否和我的情况一样。如果是，那么抱歉重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:42:27.313

[我并不完全清楚你的意思，但据我所见，它似乎确实是一个完全相同的副本......]

如果您想在启动 Eclipse 时启动 Eclipse 插件，您可以使用 OGSi 的启动级别或使用`org.eclipse.ui.startup`扩展点... frmer 是最通用的，而 later 可能是最简单的，如果您可以更改`plugin.xml`插件的...

# objective-c - Objective-C 编译错误：“SEL”之前的预期表达式

> ID：12263691
> 
> 赞同：0
> 
> 时间：2012-09-04T12:39:42.183
> 
> 标签：objective-c

我在实现某事时遇到了奇怪的编译问题，[例如](https://stackoverflow.com/questions/4446883/objective-c-calling-method-dynamically-with-a-string)

作品：

```
 [self performSelector:NSSelectorFromString(member)]; 
```

不工作：

```
 SEL method=NSSelectorFromString(member);
  [self performSelector:method]; 
```

编译器哭着：

```
methods.m:31: error: expected expression before ‘SEL’
methods.m:32: error: ‘method’ undeclared (first use in this function)
methods.m:32: error: (Each undeclared identifier is reported only once
methods.m:32: error: for each function it appears in.) 
```

完整方法：

```
 - (void)printArgs:(NSString *)member
{   
   //int val=[self compareIt:member];
    switch ([self compareIt:member])
    {
        case 1:
            //dynamically call method
            SEL method;
            method = NSSelectorFromString(member);
            NSLog(@"\n%@ is a object Member , with value: %i\n", member, [self performSelector:method]);            
            break;
        default:
            NSLog(@"\nWrong option :%@ \n", member);
    } 

}
@end 
```

请指出我正确的方向。（请注意我是 Objective-C 的新手）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:48:24.610

这实际上是一个 C 问题，而不是一个 Objective-C 问题。它不喜欢在 a 中定义变量`case`而不限制其范围。

这应该有效：

```
case 1: {
    //dynamically call method
    SEL method;
    method = NSSelectorFromString(member);
    NSLog(@"\n%@ is a object Member , with value: %i\n", member, [self performSelector:method]);
}
break; 
```

# java - 如何在 Vaadin Bean 验证中使用 UTF8 属性文件

> ID：12263696
> 
> 赞同：2
> 
> 时间：2012-09-04T12:40:13.357
> 
> 标签：java, properties, character-encoding, vaadin, hibernate-validator

我目前正在使用 Vaadin 和一个名为[Vaadin Bean Validation](https://vaadin.com/directory#addon/vaadin-bean-validation)的附加组件，用于 Java Bean Validation API 1.0 (JSR-303)。这个 API 的实现是 hibernate-validator。

我有一个以 UTF8 作为字符集的自定义属性文件。但是使用这种机制，像“éèà”这样的特殊字母总是显示错误。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T16:45:41.067

属性文件按照使用 ISO-8859-1 读取的[规范。](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)

> ...输入/输出流以 ISO 8859-1 字符编码进行编码。不能用这种编码直接表示的字符可以使用 Unicode 转义来编写；转义序列中只允许使用单个 'u' 字符。native2ascii 工具可用于将属性文件与其他字符编码进行转换。

[因此， ISO-8859-1](http://en.wikipedia.org/wiki/ISO_8859-1#Codepage_layout)范围未涵盖的任何字符都需要在[Unicode 转义序列](http://en.wikibooks.org/wiki/Java_Programming/Syntax/Unicode_Escape_Sequences) `\uXXXX`中进行转义。您可以使用 JDK 提供的`native2ascii`工具来转换它们。您可以在 JDK 的`/bin`文件夹中找到它。

这是一个示例，假设它`foo_utf8.properties`是您使用 UTF-8 保存的并且`foo.properties`是您想在应用程序中使用的示例：

```
native2ascii –encoding UTF-8 foo_utf8.properties foo.properties 
```

如果您使用的是 IDE，例如 Eclipse，那么您可以只使用内置的属性文件编辑器，它应该自动与`.properties`文件关联。如果您使用此编辑器而不是纯文本编辑器，那么它将自动转义 ISO-8859-1 范围未涵盖的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:41:27.740

转义 UTF-8 字符是属性文件。

例如：

```
foo.bar.max=Foo \u00E1 \u00E9 and \u00F6bar 
```

将显示为：

```
Foo á é and öbar 
```

这是一个可以帮助您转换字符的工具：[http ://rishida.net/tools/conversion/](http://rishida.net/tools/conversion/)

# c++ - 请求-响应系统

> ID：12263697
> 
> 赞同：1
> 
> 时间：2012-09-04T12:40:14.430
> 
> 标签：c++

我有具有相应响应对象的请求对象。Sender 对象发出请求，然后侦听响应。一个发送者/监听者对象可以发送不同的请求。每个请求都进入一个全局队列，处理完毕后，相应的响应将发送到每个侦听器对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:58:04.613

您的问题有几种解决方案。一种是，收发器通知所有`Request`对象它的破坏。为此，您需要一种方法 `Transceiver::addRequest()`，`Request`对象用于注册自身。在你的析构函数中`Transceiver`你必须通知所有注册`Request`的。例如：

```
class Transceiver
{
    virtual ~Transceiver()
    {
        for (auto request : m_requests)
            request->deleteTransceiver(this);
    }

    void addRequest(Request* r)
    {
        m_requests.push_back(r);
    }

    void removeRequest(Request* r)
    {
        m_requests.erase(std::remove(m_requests.begin(), m_requests.end(), r), 
                         m_requests.end());
    }

    std::vector<Request*> m_requests;
};

class Request
{
    virtual void deleteTransceiver(Transceiver* t) = 0;
    virtual void notify() = 0;
};

class RequestImpl : public Request
{
    RequestImpl(Transceiver* t)
        : m_target(t)
    {
        if (t)
            t->addRequest(this);
    }

    ~RequestImpl()
    {
        if (m_target)
            m_target->removeRequest(this);
    }

    virtual void deleteTransceiver(Transceiver* t)
    {
        if (m_target == t)
            m_target = 0;
    }

    virtual void notify() 
    { 
        if (m_target)
            m_target->process(ResponseType()); 
    }

    Transceiver* m_target;
}; 
```

第二种方法当然是防止在`Transceiver`使用时破坏 a。您可以`std::shared_ptr<Transceiver> m_target`在 `Request`类中使用 a ，这意味着收发器的寿命至少与相关请求一样长。

为了获得更多的灵活性，还可以使用`std::weak_ptr<Transceiver>`. 然后，当请求仍然存在时，收发器可能会被破坏。但是，当您尝试 a`std::weak_ptr<Transceiver>::lock()`并且它失败时，您就知道a`Transceiver`已经死了。

**编辑：**添加了一种方法来删除 a`Request`如果它在其`Transceiver`.

# actionscript-3 - 在 as3 中发现 url 并将其保存为字符串

> ID：12263700
> 
> 赞同：0
> 
> 时间：2012-09-04T12:40:26.163
> 
> 标签：actionscript-3, facebook-graph-api

我在图形 api 上使用 as3 发出请求。

例如，我请求这个 url。

```
http://graph.facebook.com/100001217469714/picture 
```

但我被重定向到这个网址。

```
http://profile.ak.fbcdn.net/hprofile-ak-snc6/274715_100001217469714_1254733069_q.jpg 
```

我想将此重定向的 url 作为字符串获取到我的 AS3 代码。
我该怎么做？

我这样做是因为我正在将个人资料图片从 Facebook 加载到我的游戏中。但我必须发现用户是否上传了照片或有 facebook 预定义的照片。

```
var url : String = 'http://graph.facebook.com/'+id+'/picture?width=100&height=100';
var urlRequestPicture : URLRequest = new URLRequest(url);
urlRequestPicture.method = URLRequestMethod.GET;            
var loaderPicture : Loader = new Loader();
loaderPicture.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompletePicture);
loaderPicture.load(urlRequestPicture);

function onCompletePicture(e:Event){
    var bitmap:Bitmap = e.target.content;
    bitMapArray.push(bitmap);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:21:01.960

目标中的 url 属性应该为您提供图像的 url：

```
function onCompletePicture(e:Event){
    var bitmap:Bitmap = e.target.content;
    trace(e.target.url);
} 
```

# c# - 将 SQL NVARCHAR 的值返回到 C# 字符串

> ID：12263702
> 
> 赞同：2
> 
> 时间：2012-09-04T12:40:31.653
> 
> 标签：c#, sql, variables

所有，这是我以前没有做过的事情，由于某种原因我找不到类似的问题。我希望在 C#中返回`NVARCHAR @columnHeaders`到 a 。`String`将构建我想要的字符串的 SQL 查询是这个

```
DECLARE @columnHeaders NVARCHAR(MAX); 
SELECT @columnHeaders = 
    COALESCE (@columnHeaders + ',[' + Field + ']', '[' + Field + ']') 
FROM SomeTable; 
```

但是，我如何将变量`@columnHeaders`拉回 C#？注意，我可以使用函数等，但我不想使用存储过程、视图或函数，除非绝对必要......

我可以选择使用的列`DataTable`标题

```
DECLARE @columnHeaders NVARCHAR(MAX); 
SELECT COALESCE (@columnHeaders + ',[' + Field + ']', '[' + Field + ']') 
FROM SomeTable; 
```

并在 C# 中进行操作，但最好直接从 SQL 返回字符串。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:44:11.370

如果您不想使用存储过程，这可能会起作用。

```
DECLARE @columnHeaders NVARCHAR(MAX);  
    SELECT @columnHeaders =  
    COALESCE (@columnHeaders + ',[' + Field + ']', '[' + Field + ']')  
    FROM SomeTable; 
    select @columnHeaders 
```

并用于`ExecuteScalar()`获取结果。

但是，我个人会推荐存储过程更加整洁，因为它将 SQL 保留在 SQL Server 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:50:33.080

我相信第二个语句是不返回的，它会变成一个赋值过程：

```
DECLARE @columnHeaders NVARCHAR(MAX); 
SELECT @columnHeaders = 
    COALESCE (@columnHeaders + ',[' + Field + ']', '[' + Field + ']') 
FROM SomeTable; 
```

您必须这样做，只需在最后一行添加@columnHeaders 的选择：

```
DECLARE @columnHeaders NVARCHAR(MAX); 
SELECT @columnHeaders = 
    COALESCE (@columnHeaders + ',[' + Field + ']', '[' + Field + ']') 
FROM SomeTable;
select @columnHeaders as ch; 
```

然后在你的 C# 上：

```
da.Fill(dt);
Console.WriteLine(dt.Rows[0]["ch"]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:45:52.027

如果您只想让查询返回它，您不想将数据存储在一个可病毒变量中。

尝试这个：

```
SELECT CAST(COALESCE (@columnHeaders + ',[' + Field + ']', '[' + Field + ']')  AS NVARCHAR(MAX))
FROM SomeTable; 
```

# c# - Excel VSTO 2010 加载项可以在 Office 2007 中运行吗？

> ID：12263705
> 
> 赞同：3
> 
> 时间：2012-09-04T12:40:42.430
> 
> 标签：c#, vsto, excel-2007, excel-2010

我们创建了一个 VSTO 2010 项目，其中包含一个用于 Excel 的功能区栏，它运行良好，但现在我们的一些客户将运行 Office 2007。

我们试图在 2007 年安装它，但没有成功（功能区被列为正在运行的加载项，但它没有出现在 Excel 的功能区选项卡中）。我已经尝试按照[这个 SO 问题](https://stackoverflow.com/questions/4072104/can-an-excel-vsto-add-in-be-compatible-with-excel-2007-and-2010)中提到的步骤（用 2007 参考 dll 替换 2010 参考 dll），但没有成功。

任何避免创建新的 2007 项目的建议（据我了解，这将涉及在我们的开发机器上卸载 Office 2010，并改为安装 2007）将**不胜**感激。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T13:27:39.183

嘎。原来是功能区 XML 上的架构存在问题，我们在将功能区 XML 剥离为单个标签时发现了该问题，以查看是否是 XML 中的任何控件等导致不兼容。

我们正在使用（很可能从示例中复制）

```
xmlns="http://schemas.microsoft.com/office/2009/07/customui" 
```

但是一旦我们将其更改为：

```
xmlns="http://schemas.microsoft.com/office/2006/01/customui" 
```

功能区立即出现，这与功能区的症状相吻合，显示为正在运行的加载项，但在 Excel 本身中不可见。如前所述（有关详细信息，请参阅[此 SO 帖子](https://stackoverflow.com/questions/4072104/can-an-excel-vsto-add-in-be-compatible-with-excel-2007-and-2010)），必须使用 v12 office 和互操作 dll。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:53:23.323

您可以并排安装 2007 和 2010，并通过在命令行中运行以下命令或将其放在批处理文件中来避免两者之间切换的任何问题，这两种方法都可以：

```
reg add HKCUSoftwareMicrosoftOffice14.0WordOptions /f /v NoReReg /t REG_DWORD /d 1
reg add HKCUSoftwareMicrosoftOffice14.0ExcelOptions /f /v NoReReg /t REG_DWORD /d 1
reg add HKCUSoftwareMicrosoftOffice14.0PowerPointOptions /f /v NoReReg /t REG_DWORD /d 1
reg add HKCUSoftwareMicrosoftOffice14.0AccessOptions /f /v NoRepairNeeded /t REG_DWORD /d 1

reg add HKCUSoftwareMicrosoftOffice12.0WordOptions /f /v NoReReg /t REG_DWORD /d 1
reg add HKCUSoftwareMicrosoftOffice12.0ExcelOptions /f /v NoReReg /t REG_DWORD /d 1
reg add HKCUSoftwareMicrosoftOffice12.0PowerPointOptions /f /v NoReReg /t REG_DWORD /d 1
reg add HKCUSoftwareMicrosoftOffice12.0AccessOptions /f /v NoRepairNeeded /t REG_DWORD /d 1 
```

至于您的代码，我发现 12 和 14 的 Excel 互操作代码或多或少是可互换的。您是否在 Excel Interop 14 中使用了 12 中没有的任何内容？

两个项目可能看起来并不理想，但您可能需要走这条路。好处是您将能够或多或少地复制和粘贴所有内容，特别是如果您为 2007 项目编写所有内容，然后复制/粘贴到 2010 项目，而不是相反。

希望这可以帮助

# doctrine-orm - 获取 Doctrine 2 实体的列的值 - 不是对象，只是值

> ID：12263706
> 
> 赞同：1
> 
> 时间：2012-09-04T12:40:46.270
> 
> 标签：doctrine-orm

假设我有一个名为的实体`Game`，它有一个`home_school_id`. 如果我想要那所学校的 id当然可以`$myGame->getHomeSchool()->getId()`，但这会占用太多内存。我怎样才能直接得到`home_school_id`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:50:50.877

In your GameRepository.php. Then, do a $game->getHomeSchoolId($id); You'll just have to work with your select, from and where, but that's really easy.

```
 public function getHomeSchoolId($id)
    {
        return $this
                ->_em
                ->createQueryBuilder()
                ->select('q.home_school_id')
                ->from('BundleMyBundle:HomeSchool', 'q')
                ->where('q.something = :id')
                ->setParameter('id', $id)
                ->getQuery()
                ->getResult();
    } 
```

If you want the ID of another entity, which is linked through a relation, you'll have to do a join. Just ask if you need more informations.

# ruby-on-rails - Rails 和 date_select

> ID：12263709
> 
> 赞同：0
> 
> 时间：2012-09-04T12:41:00.590
> 
> 标签：ruby-on-rails, date, select

我正在尝试将 date_select 与我的一些表单一起使用。

```
<div class="field">
  <%= f.label :begin_date %>
  <br/>
  <%= f.date_select(:begin_date,:start_year => Time.now.year) %>
</div> 
```

通读文档，我期望得到三个选择标签。我得到的是：begin_date(1i)、begin_date(2i)、begin_date(3i)

如果我在我的模型中包含这些：

```
attr_accessible :begin_date(1i), :begin_date(2i), :begin_date(3i), 
```

IDE 不喜欢它。我究竟做错了什么？此外，是否有一个日期选择方法可以返回单个标签中的值，而不是 3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:48:47.330

你可以这样做`attr_accessible :begin_date`，它会为你将日期组件拼接成一个`Date`值。

# iphone - 为什么我的 iPhone 应用程序图标有竖线？

> ID：12263711
> 
> 赞同：0
> 
> 时间：2012-09-04T12:41:02.510
> 
> 标签：iphone, xcode, xcode4.4

使用 XCode 4.4.1 创建了一个 iOS 应用程序，存档应用程序的图标和部署到我的设备的图标被扭曲了。它似乎比分配的空间更宽，并且有垂直的白线。这不是 XCode 4.5 的问题，但我还不能使用它。

有没有人经历过这个？我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:17:52.647

我刚刚将模式更改为使用“生成最佳调色板”选项进行索引，并进行了另一次导出，这似乎已经解决了这个问题。

# mysql - 多值插入在 mysql 程序中有效？

> ID：12263714
> 
> 赞同：1
> 
> 时间：2012-09-04T12:41:09.437
> 
> 标签：mysql, insert, procedure, multivalue

多值插入示例 - 它手动工作，但不在 mySQL 存储过程中。

```
INSERT INTO input_data1(mobile) VALUES (9619825525),(9619825255),(9324198256),(9013000002),(9999999450),(9999999876) ; 
```

我在下面的过程中的“str”字附近遇到语法错误，谁能告诉我如何在过程中实现这个多值插入工作？

```
DELIMITER |
DROP PROCEDURE IF EXISTS mobile_series1;
CREATE PROCEDURE mobile_series1(IN str text)  
    LANGUAGE SQL     READS SQL DATA  
    BEGIN    
         DROP TABLE IF EXISTS input_data1 ;  
         CREATE TEMPORARY TABLE input_data1 (mobile varchar(1000)) engine=memory;
         INSERT INTO input_data1(mobile) VALUES str;

    END |
DELIMITER ; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:24:07.860

我没有 MySQL 服务器，因此可能存在语法错误和 +1 错误（即可能没有捕获列表中的最后一项，可能无法超过第一项等，通过在代码中添加 +1 解决了问题），但你基本上想用这个替换你的 INSERT 语句。

```
DECLARE INT _CURSOR 0;
DECLARE INT _TOKENLENGTH 0;
DECLARE VARCHAR _TOKEN NULL;

SELECT LOCATE(str, ",", _CURSOR) - _CURSOR INTO _TOKENLENGTH;

LOOP

    IF _TOKENLENGTH <= 0 THEN
        SELECT RIGHT(str, _CURSOR) INTO _TOKEN;
        INSERT INTO input_data1(mobile) VALUE _TOKEN;
        LEAVE;
    END IF;

    SELECT SUBSTRING(str, _CURSOR, _TOKENLENGTH) INTO _TOKEN;

    INSERT INTO input_data1(mobile) VALUE _TOKEN;

    SELECT _CURSOR + _TOKENLENGTH + 1 INTO _CURSOR;

    SELECT LOCATE(str, ",", _CURSOR + 1) - _CURSOR INTO _TOKENLENGTH;

END LOOP; 
```

您的函数调用将类似于

```
EXEC mobile_series1('9619825525,9619825255,9324198256') 
```

# c# - 可能的意外参考比较

> ID：12263715
> 
> 赞同：32
> 
> 时间：2012-09-04T12:41:11.557
> 
> 标签：c#

我有以下代码发出警告

> 可能的意外参考比较；要进行值比较，请将左侧转换为类型“字符串”

```
if (lblStatus.Content == "ACTIVE")
{
  //Do stuff
}
else
{
  //Do other Stuff
} 
```

我假设警告是因为`lblStatus.Content`可能不一定总是字符串类型？

我尝试使用以下各项来修复它，但我仍然收到警告

```
if (lblStatus.Content.ToString() == "ACTIVE")
if ((string)lblStatus.Content == "ACTIVE")
if (lblStatus.Content === "ACTIVE") 
```

请有人解释我仍然收到警告的原因以及处理这个问题的最佳实用方法吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-09-04T12:45:46.863

警告是因为*编译时*类型`lblStatus.Content`是`object`. 因此，运算符重载选择`==(object, object)`只是参考身份比较的重载。*这与值的执行时*类型无关。

不过，您的第一个或第二个选项*应该*已经修复了警告：

```
if (lblStatus.Content.ToString() == "ACTIVE")
if ((string)lblStatus.Content == "ACTIVE") 
```

`lblStatus.Content`请注意，如果为 null ，则其中的第一个将引发异常。我更喜欢第二种形式。

如果您认为此时您仍然看到警告，我怀疑您没有重建 - 或者您的构建中仍然“脏”的东西。完全重建*绝对*应该删除警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:51:56.690

我更喜欢坚持这种`string.Equals(string,string,StringComparison)`方法，如下所示：

```
 string contentStr = (lblStatus.Content ?? string.Empty).ToString();
    if (string.Equals("ACTIVE", contentStr, StringComparison.OrdinalIgnoreCase))
    { 
        // stuff
    } 
```

因为它明确说明了它的作用+它没有给出你提到的警告。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-06-04T01:55:42.257

使用以下方法修复代码后重建项目：

```
if (lblStatus.Content.ToString() == "ACTIVE")
if ((string)lblStatus.Content == "ACTIVE")
if (lblStatus.Content === "ACTIVE") 
```

# iphone - 如果未安装应用程序，则在 Safari 中显示自定义弹出窗口

> ID：12263716
> 
> 赞同：2
> 
> 时间：2012-09-04T12:41:17.300
> 
> 标签：iphone, url-scheme, custom-url

我已经在 iOS 中编写了代码，用于从 safari 中的自定义 url 启动我的应用程序，只要安装了我的应用程序，它就可以正常工作。但是如果没有安装，safari 会显示一个弹出窗口，说它无法打开页面，因为地址无效。但是，我的停止页面仍然在后台打开，提示用户在应用商店中访问应用的链接。

我的问题是，如何更改此弹出窗口以显示自定义消息，该消息可能与即时显示的停止页面相关。

# assembly - 如果更改 CS 段寄存器会发生什么？（你会怎么做？）

> ID：12263720
> 
> 赞同：7
> 
> 时间：2012-09-04T12:41:27.220
> 
> 标签：assembly, x86, x86-16

我读了这篇文章：[http ://static.patater.com/gbaguy/day3pc.htm](http://static.patater.com/gbaguy/day3pc.htm)

它包括句子

> 永远不要改变 CS！

但是如果你确实修改了`CS`段寄存器会发生什么呢？为什么这么危险？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T13:27:45.377

`cs`是代码段。`cs:ip`，这意味着`cs`与`ip`（指令指针）一起指向下一条指令的位置。因此，对或对两者的任何更改`cs`都会`ip`更改将获取和执行下一条指令的地址。

通常你会`cs`用`jmp`（跳远）、`call`（长呼）、`retf`、`int3`或`int`来改变`iret`。在 8088 和 8086`pop cs`中也可用（操作码 0x0F）。`pop cs`在 186+ 中不起作用，其中操作码 0x0F 保留用于多字节指令。 [http://en.wikipedia.org/wiki/X86_instruction_listings](http://en.wikipedia.org/wiki/X86_instruction_listings)

跳远或远叫没有本质上的危险。您只需要知道您跳转或呼叫的位置，并且在保护模式下您需要有足够的权限来执行此操作。在 16 位实模式（例如 DOS）中，您可以跳转并调用您想要的任何地址，例如。`jmp 0xF000:0xFFF0`设置`cs`为`0xF000`和`ip`，`0xFFF0`这是 BIOS 代码的起始地址，从而重新启动计算机。不同的内存地址有不同的代码，因此会导致不同的结果，理论上一切可能都会发生（如果你跳转到用于格式化硬盘驱动器的 BIOS 代码，具有有效的寄存器和/或堆栈值，那么硬盘驱动器将被格式化'按照要求'）。在实践`jmp`中和`call`'s 到大多数地址可能很快就会导致无效的操作码或其他一些异常（除以零、除法溢出等）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-07T23:50:01.347

在保护模式和长模式（即不是16位模式）下，包括CS在内的段寄存器不再只是额外的4位地址。它们索引到段描述符表中，具有基数+限制（正常基数=0 限制=4GiB，即平面内存模型），但也具有其他属性。

代码段描述符决定了 CPU 模式（例如 32 位兼容模式与 64 位长模式）。在 64 位内核上，64 位用户空间进程可以`far jmp`生成一些 32 位代码。这在实践中没有用，甚至可能在操作系统在上下文切换后返回您的进程时中断。

TODO：挖掘一个链接，其中有人展示了如何做到这一点。我认为最近甚至有一个关于此的问题，其中详细回答了如何找到正确的段号。

# jquery - 如何在不点击的情况下打开 PhotoSwipe？

> ID：12263726
> 
> 赞同：1
> 
> 时间：2012-09-04T12:42:05.147
> 
> 标签：jquery, jquery-mobile, photoswipe

我使用移动[PhotoSwipe](http://www.photoswipe.com/)画廊。我的问题是我不需要通过单击图像来加载它，而是通过单击页面上的其他元素来加载它。可能对ti有一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:41:09.033

initialize photoswipe with:

```
photoswipe = $('.gallery a').photoSwipe()

$('#element').click(function (){
    photoswipe.show(1)
}); 
```

Index inside show are ipmortant, but you can use your value.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:06:37.760

您可以在任何元素上添加“单击”功能，只要您使用 正确围绕元素编写链接`rel="external"`，并且该链接包含在具有`gallery`类的元素内。如果您有任何疑问，我可以发布一些示例代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T12:56:42.030

那么你可以做这样的事情......如果使用jQuery......

```
$('#other_element').click(function (){
  $('#target').trigger('click');
}); 
```

我必须承认，对 PhotoSwipe 或移动版本没有太多经验，但在普通的 jquery 上，这是你会做的。我无法想象它会有很大的不同......希望它有帮助......

# git - 从现有提交创建新分支，现在源和源/主不同步

> ID：12263728
> 
> 赞同：3
> 
> 时间：2012-09-04T12:42:16.160
> 
> 标签：git, version-control, github

我有一个与 GitHub 一起使用的存储库。以前，repo 只有 1 个分支（即 master），并且与远程 repo 完全保持同步，但是在完成了 2 次本地提交的新实验工作后，我决定我想做的是创建一个新分支“开发”分支上的这 2 个提交仍然可以在 GitHub 上作为替代分支访问。

因此，我做了以下事情：

```
git branch dev             # create new branch
git reset --hard HEAD~2    # roll back 2 commits on HEAD
git checkout dev           # make dev the active branch 
```

在本地，现在一切都很好。我现在有两个本地分支：（`master`在稳定版本上落后了 2 个提交），`dev (HEAD)`在当前的实验工作中。

但是，在 GitHub 方面，一切都不好：我有两个分支，`master (HEAD)`并且`dev`，但是它们都**完全相同**（即两个最新的提交都在`master` 分支上，而实际上我只希望它们在`dev`分支上）。

所以总结一下，如果我们调用最新的不稳定提交（开发工作）、提交 10 和稳定提交编号 8，那么我们有以下内容：

10 - `dev`, `origin/master`, `origin/dev`,`origin/HEAD`

9

8 -`master`

所以问题是我如何`origin/master`正确指向提交 8。（而且我对`origin/HEAD`所有这一切中的角色感到困惑......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:49:50.303

如果你想改变 的历史`master`，你需要`git push -f origin master`为了让 GitHub 为 master 记录新的 HEAD。（请务必警告任何协作者该更改：他们需要将本地主分支重置为该新 HEAD）。
推`dev`是不够的。

`origin/HEAD`参考`HEAD`远程 GitHub 存储库的 （应该是`origin/master`，除非您通过 GitHub 存储库管理界面明确更改它）。

# asp.net - 使用 convertApi.dll 将网页转换为 pdf 时 CSS 不呈现

> ID：12263733
> 
> 赞同：2
> 
> 时间：2012-09-04T12:42:30.107
> 
> 标签：asp.net, convertapi

我有一个 50-60 页的大型 pdf。[我使用ConvertApi web2pdf](http://www.convertapi.com/web-pdf-api)在线 api将 pdf 转换为网页，然后在需要时在页面上添加了一些输入控件。

当用户填写所有必需的输入并提交时，我渲染了整个页面并向用户显示预览以检查用户是否正确填写了输入。之后，当用户单击提交时，它将存储到数据库中并生成相同的 pdf。

我使用 convertApi.dll 并编写了以下代码来生成 pdf。

```
MemoryStream outStream = new MemoryStream();
Web2Pdf convertApi;
convertApi = new Web2Pdf();
convertApi.SetPageSize("A4");
convertApi.SetPageWidth("100%");
convertApi.ConvertHtml(HtmlText, outStream); 
```

我的问题是当我们生成 pdf 时，它不会采用页面中使用的所有样式。和pdf看起来不同。我需要提供客户提供的非常相似的 pdf。任何人都可以建议我以更好的方式做到这一点。谢谢。

# xdebug - eclipse + xdebug 2.2.1 调试打开过时文件

> ID：12263736
> 
> 赞同：1
> 
> 时间：2012-09-04T12:42:40.623
> 
> 标签：xdebug, easyphp

我将 EasyPhp 更新到版本 12，

如果我在 Eclipse 中将断点设置为**/work/abc.php**，则在调试期间 Eclipse 会打开一个**c:\www\work\abc.php**

然后，如果我修改 /work/abc.php Eclipse 仍然显示旧文件！

Xdebug 2.2.1 更稳定，但是这个本地文件拷贝是什么东西呢？ ![在此处输入图像描述](../Images/68aa07475dfff56c0a116092e32b8124.png) 这是 php.ini

```
;Xdebug
zend_extension = "${path}\php\php5314x120809150232\php_xdebug-2.2.0-5.3-vc9.dll"
xdebug.default_enable=0
xdebug.remote_enable=1
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_autostart = false
xdebug.dump_globals=1
xdebug.dump=COOKIE,FILES,GET,POST,REQUEST,SERVER,SESSION
xdebug.dump.SERVER=REMOTE_ADDR,REQUEST_METHOD,REQUEST_URI
xdebug.show_local_vars=1
xdebug.show_mem_delta=1
xdebug.collect_includes=1
xdebug.collect_vars=1
xdebug.collect_params=4
xdebug.collect_return=1
xdebug.auto_trace=0
xdebug.trace_options=0
xdebug.trace_format=0
xdebug.trace_output_dir="${path}\xdebug\trace"
xdebug.trace_output_name="trace.%t"
xdebug.profiler_enable=0
xdebug.profiler_append=1
xdebug.profiler_enable_trigger=1
xdebug.profiler_output_dir="${path}\xdebug\profiler"
xdebug.profiler_output_name="cachegrind.out.%s.%t"
;/Xdebug 
```

我正在使用 Eclipse for PHP Developers 版本：3.0.2（Eclipse 平台版本：3.7.1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:09:38.157

当您远程工作时，您需要将远程文件映射到本地目录。也许 Eclipse 尝试在本地打开文件，当您更改文件时它不知道它必须远程更新文件？我不太了解 Eclipse，但我将 Komodo 与 php 和 xdebug 一起使用。

# facebook-graph-api - 使用应用程序令牌检索分数

> ID：12263737
> 
> 赞同：1
> 
> 时间：2012-09-04T12:42:43.337
> 
> 标签：facebook-graph-api, token, facebook-access-token

所以我设置了一个应用程序，我试图通过服务器而不是从应用程序发送分数。这让我可以长期保持分数，同时也拥有 Facebook 的社交优势。

现在，我遇到的问题是使用应用程序令牌检索分数。我可以使用应用程序令牌或用户令牌绝对正常发布，但是在使用应用程序令牌检索分数时，我收到以下信息：

```
{
  "data": [
  ]
} 
```

如果它完全不起作用或权限问题，我希望收到返回的错误，但它返回一个空数组的事实令人费解。更令人费解的是，使用用户访问令牌检索分数绝对没问题，因此很明显它正确地到达了 Facebook 后端。

这只是在这种情况下使用应用程序访问令牌的问题吗？文档说我应该可以使用一个，但也许是错误的？

我还想澄清一下，我已经在代码中和通过 Graph Explorer 运行了它，但总是没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T06:23:18.200

确保您从上面的链接中授予了 developer.facebook.com/tools/explorer 上的 user_games_activity 和 friends_games_activity 权限，您将获得一个应用程序 access_token 并将其添加到您的代码中，如下所示

```
public void sendDataToFacebookGraphServer()
    {

            // TODO Auto-generated method stub
            final Session session = Session.getActiveSession();

             List<String> permissions = session.getPermissions();
                if (!isSubsetOf(PERMISSIONS, permissions)) {

                    Session.NewPermissionsRequest newPermissionsRequest = new Session
                            .NewPermissionsRequest(UnityPlayer.currentActivity, PERMISSIONS);
                session.requestNewPublishPermissions(newPermissionsRequest);
                    return;
                }
            HttpClient client = new DefaultHttpClient();            
            HttpPost post = new HttpPost("https://graph.facebook.com/user_id/scores");
            List<NameValuePair> pairs = new ArrayList<NameValuePair>();
            pairs.add(new BasicNameValuePair("score", "3000")); 
                   // add this line and try             
                   pairs.add(new BasicNameValuePair("access_token", "add_app_access_token_here"));

            try{
                post.setEntity(new UrlEncodedFormEntity(pairs));
            }
            catch(UnsupportedEncodingException e)
            {

            }
            try{            
                response = client.execute(post);

                Log.i("*********Response*******************************************************", response.toString());
                UnityPlayer.currentActivity.runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        Toast.makeText(UnityPlayer.currentActivity,""+response.toString(),Toast.LENGTH_LONG).show();
                    }
                });

            }
            catch (IOException e1) 
            {

            }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:16:34.563

这应该与应用访问令牌一起使用吗？我不认为它是。

根据[分数文档](https://developers.facebook.com/docs/scores/)，您可以

*   `/USER_ID/scores`使用用户或应用访问令牌 ( )检索用户的分数
*   `/APP_ID/scores`使用用户访问令牌 ( )为您的应用检索用户朋友的分数
*   `/USER_ID/scores`使用用户访问令牌（

# android - 使用 dlclose(Android NDK) 从应用程序中删除本机库的实例

> ID：12263739
> 
> 赞同：2
> 
> 时间：2012-09-04T12:42:47.440
> 
> 标签：android, android-ndk, ffmpeg, java-native-interface, android-ndk-r7

我已经编译了`FFmpeg`库，`NDK`并使用它来修剪视频并从我的应用程序中的视频中获取缩略图，所以基本上我已经启动`ffmpeg.so`并`video-trimmer.so`运行了库。

然而问题很奇怪，trim 或 getThumbnail 操作成功但只有一次，即第一次，第二次操作失败。但是第三次​​成功了，我用谷歌搜索了两个与我的问题相关的类似帖子

[帖子 1：](https://stackoverflow.com/questions/11898338/android-video-trimming-via-ffmpeg)

[帖子 2：](https://stackoverflow.com/questions/10649119/calling-native-method-twice-of-third-party-library-in-an-activity-causes-the-and)

有趣的是，他们提出了相同的解决方案，而我无法解决`C`编程语言幼稚的问题。

这是我所做的

```
void Java_com_example_demo_natives_LibraryLoader_loadTrimmerLibrary(JNIEnv* env, jclass class, jstring libffmpeg_path, jstring inputFile, jstring outFile,
        jstring startTime, jstring length)
{
        const char* path;
        void* handle;
        int *(*Java_com_example_demo_natives_VideoTrimmer_trim)(JNIEnv *, jclass, jstring, jstring, jstring, jstring);

        path = (*env)->GetStringUTFChars(env, libffmpeg_path, 0);

        handle = dlopen(path, RTLD_LAZY);

        Java_com_example_demo_natives_VideoTrimmer_trim = dlsym(handle, "Java_com_example_demo_natives_VideoTrimmer_trim");
        (*Java_com_example_demo_natives_VideoTrimmer_trim)(env, class, inputFile, outFile, startTime, length);

        (*env)->ReleaseStringUTFChars(env, libffmpeg_path, path);

        dlclose(handle);
} 
```

尽管调用`dlclose`库实例仍然存在于内存中，但我在这里做错了什么？

我知道库实例仍然存在，因为当我在其他活动中再次加载库时，错误消息显示库已经存在于 CL 中。

我想从内存中删除该库的实例，请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:24:01.627

尝试移动“ReleaseString...”的位置

它应该在“dlopen”之后

它应该在调用其他共享库之前...

```
(*env)->GetStringUTFChars
dlopen
(*env)->ReleaseStringUTFChars
make the main call
dlclose 
```

# oracle - Oracle：返回最早的日期

> ID：12263740
> 
> 赞同：0
> 
> 时间：2012-09-04T12:42:48.767
> 
> 标签：oracle

我有一个存储过程，我用它来返回日期列中最早的可用日期。我只需要返回最早的，目前正在使用日期算术来减少返回的行数。但是，这样做，我的程序会陷入前两个返回值的循环中，这意味着我有几行从未读取过。*有人可以让我知道在下面的WHERE*子句中我需要在哪里使用 MIN 函数吗？谢谢：

```
SELECT        **COLS**                
INTO          **VARS**
FROM          **TABLE**

INNER JOIN    **TABLE TO JOIN**
ON            **JOIN TARGET**

WHERE         ROWNUM = 1 AND LASTREADTIME < SYSDATE - (30/86400) 

ORDER BY      LASTREADTIME DESC; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:49:33.003

如果您只需要最早的日期

```
SELECT MIN(LastReadTime)
INTO  **VARS**
FROM table 
```

如果您需要其他数据

```
SELECT t2.col1, t1.col1, t1.col2, t1.LastTreadTime
INTO **VARS**
FROM table t1
JOIN table2 t2 on t1.col1 = t2.col1
WHERE t1.LastReadTime = (SELECT MIN(t2.LastReadTime) FROM table t2); 
```

# grails - Grails + BlazeDS 插件

> ID：12263743
> 
> 赞同：0
> 
> 时间：2012-09-04T12:43:02.697
> 
> 标签：grails, blazeds, grails-plugin

我们目前正在我们的 grails 应用程序中使用您的 BlazeDS 插件。

我们遇到了一个问题，即在 BlazedsOpenSessionInViewFilter 类中引发的空指针异常正在迅速填满我们的日志文件

我们日志中的错误消息如下

```
[TP-Processor26] ERROR [/].[grails]  - Servlet.service() for servlet grails threw exception
java.lang.NullPointerException
        at grails.plugin.blazeds.BlazedsOpenSessionInViewFilter.doFilterInternal(BlazedsOpenSessionInViewFilter.java:65)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
        at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
        at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
        at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776)
        at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705)
        at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898)
        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
        at java.lang.Thread.run(Thread.java:722) 
```

我们在 Tomcat 6 上运行，这个 NullPointerException 正在迅速填满日志文件。我在想我们可以创建我们自己的过滤器版本来捕获这个异常并在插件中更新 BlazedsGrailsPlugin.groovy 的适当部分 有人会看到开发团队更新第三方插件的任何部分有任何问题吗？如果有人对解决此问题有任何其他建议，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:44:03.350

在将此项目的修复推送到 GIT 并且没有收到所有者的回复后，我决定只为自己在本地修复插件，现在一切正常

# c - 在 C 中，给定参数的变量列表，如何使用它们构建函数调用？

> ID：12263745
> 
> 赞同：17
> 
> 时间：2012-09-04T12:43:09.563
> 
> 标签：c, assembly, ffi, libffi

假设有一个以某种方式存储的参数列表，例如在一个数组中。

**给定一个函数指针**，我如何通过存储的参数列表调用它？

我不是想将数组作为参数传递好。你明白了，好吗？我想将它的每个元素作为参数传递。数组只是为了说明，我可以将参数存储在一些元组结构中。另外，看看**我手头有一个函数指针，并且可能有一个字符串格式的签名**。我不想仅仅定义一个能够处理可变参数列表的函数。

我看到如何做到这一点的唯一方法是使用汇编（由`__asm push`等人）或这个：

```
void (*f)(...);

int main()
{
    f = <some function pointer>;
    int args[]; <stored in a array, just to illustrate>
    int num_args = <some value>;

    switch(num_args)
    {
        case 0:
            f();
        break;

        case 1:
            f(args[0]);
        break;

        case 2:
            f(args[0], args[1]);
        break;

        /* etc */
    }

    return 0;
} 
```

我不太喜欢这种方法...

还有另一种便携式和更短的形式吗？

几种脚本语言能够调用 C 函数。

Python 或 Ruby 等脚本语言如何做到这一点？他们如何以可移植的方式实现它？他们最终是否只是将程序集用于多个平台或以上平台？

看，我真的不是在询问参数封送处理的细节以及从脚本语言到 C 的其他内容，我只对最终在内部如何构建脚本语言对 C 函数的调用感兴趣。

### 编辑

我会保留问题的标题，但我认为更好的提问方式是：

*如何使用仅在运行时可用的指针和签名调用 C 函数？*

## 更新

从[PLT 方案的外部接口](http://repository.readscheme.org/ftp/papers/sw2004/barzilay.pdf)：

> 调出是正常的函数调用。在动态设置中，我们创建一个指定（二进制）输入/输出类型的“调用接口”对象；此对象可与任意函数指针和输入值数组一起使用，以执行对函数的调用并检索其结果。这样做需要操作堆栈并知道如何调用函数，这些都是**libffi**处理的细节。

感谢@AnttiHaapala 搜索、查找和指向[libffi](http://en.wikipedia.org/wiki/Libffi)。这是我一直在寻找的，它被一堆脚本语言使用，它是一个可移植的库，跨多个架构和编译器实现。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T14:43:10.377

您询问了使用给定数量的参数调用*任何函数指针的可移植方式是什么。*正确的答案是*没有这样的方法*。

例如，python 能够通过 ctypes 模块调用 C 函数，但这仅在您知道确切的原型和调用约定的情况下是可移植的。在 C 中实现相同的最简单方法是在编译时知道函数指针的原型。

## 更新

对于 python / ctypes 示例，在启用 ctypes 模块的每个平台上，python 知道如何为给定的一组参数编写调用堆栈。例如，在 Windows 上，python 知道 2 个标准调用约定 - cdecl 具有 C 堆栈上的参数顺序，而 stdcall 具有“pascal 样式排序”。在 Linux 上，它确实需要担心是调用 32 位还是 64 位共享对象等等。如果 python 编译到另一个平台，ctypes 也需要更改；ctypes 模块中的 C 代码本身不是可移植的。

## 更新 2

对于 Python，魔法就在这里：[ctypes source code](http://hg.python.org/cpython/file/82ae284cd5f1/Modules/_ctypes)。值得注意的是，它似乎链接了[http://sourceware.org/libffi/](http://sourceware.org/libffi/)这可能正是您所需要的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T19:54:07.557

我是 libffi 的作者。它会做你所要求的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-04T16:12:27.603

@AnttiHaapala 指出[libffi](http://sourceware.org/libffi/)。以下是有关它的一些信息：

> # 什么是libffi？
> 
> 有些程序在编译时可能不知道要传递给函数的参数。例如，解释器可能会在运行时被告知用于调用给定函数的参数的数量和类型。'libffi' 可用于此类程序，以提供从解释程序到编译代码的桥梁。
> 
> “libffi”库为各种调用约定提供了可移植的高级编程接口。这允许程序员在运行时调用由调用接口描述指定的任何函数。
> 
> FFI 代表外部功能接口。外来函数接口是接口的通称，它允许用一种语言编写的代码调用用另一种语言编写的代码。'libffi' 库实际上只提供了功能齐全的外部函数接口的最低、机器相关层。'libffi' 上方必须存在一个层，用于处理在两种语言之间传递的值的类型转换。
> 
> 'libffi' 假设您有一个指向您希望调用的函数的指针，并且您知道要传递它的参数的数量和类型，以及函数的返回类型。

* * *

# 历史背景

> libffi 最初由 Anthony Green（SO 用户：[anthony-green](https://stackoverflow.com/users/546791/anthony-green)）开发，灵感来自 Silicon Graphics 的 Gencall 库。Gencall 由 Gianni Mariani 开发，然后被 SGI 雇用，目的是允许按地址调用函数并为特定调用约定创建调用框架。Anthony Green 改进了这个想法并将其扩展到其他架构和调用约定以及开源 libffi。

* * *

## 使用 libffi 调用 pow

```
#include <stdio.h>
#include <math.h>
#include <ffi.h>

int main()
{
  ffi_cif     call_interface;
  ffi_type    *ret_type;
  ffi_type    *arg_types[2];

  /* pow signature */
  ret_type = &ffi_type_double;
  arg_types[0] = &ffi_type_double;
  arg_types[1] = &ffi_type_double;

  /* prepare pow function call interface */
  if (ffi_prep_cif(&call_interface, FFI_DEFAULT_ABI, 2, ret_type, arg_types) == FFI_OK)
  {
    void *arg_values[2];
    double x, y, z;

    /* z stores the return */
    z = 0;

    /* arg_values elements point to actual arguments */
    arg_values[0] = &x;
    arg_values[1] = &y;

    x = 2;
    y = 3;

    /* call pow */
    ffi_call(&call_interface, FFI_FN(pow), &z, arg_values);

    /* 2^3=8 */
    printf("%.0f^%.0f=%.0f\n", x, y, z);
  }

  return 0;
} 
```

* * *

我想我可以断言 libffi 是一种可移植的方式来做我所要求的，这与 Antti Haapala 的断言相反，即没有这样的方式。如果我们不能将 libffi 称为可移植技术，考虑到它在编译器和体系结构之间的移植/实现程度，以及哪个接口符合 C 标准，我们也不能将 C 或任何东西称为可移植的。

信息和历史提取自：

[https://github.com/atgreen/libffi/blob/master/doc/libffi.info](https://github.com/atgreen/libffi/blob/master/doc/libffi.info)

[http://en.wikipedia.org/wiki/Libffi](http://en.wikipedia.org/wiki/Libffi)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T13:26:03.710

为了安全起见，您应该在发送变量之前解压缩它们。使用汇编程序破解参数堆栈可能无法在编译器之间移植。调用约定可能会有所不同。

我不能代表 Ruby，但我已经使用 Perl 和 Python 的 C 接口编写了很多程序。Perl 和 Python 变量不能与 C 变量直接比较，它们有更多的特性。例如，一个 Perl 标量可能有双重字符串和数值，在任何时候只有其中一个是有效的。

Perl/Python 变量和 C 之间的转换是使用`pack`and完成`unpack`的（`struct`在 Python 的模块中）。在 C 接口中，您必须调用特定的 API 来进行转换，具体取决于类型。所以，它不仅仅是一个直接的指针传输，它当然不涉及汇编程序。

# c# - Windows 8 中的 C# JavasScriptSerializer

> ID：12263747
> 
> 赞同：0
> 
> 时间：2012-09-04T12:43:17.750
> 
> 标签：c#, serialization, windows-8, windows-runtime, .net-4.5

在此线程中：[如何使用 C#/LINQ 将 XML 转换为 JSON？](https://stackoverflow.com/questions/12037085/how-to-convert-xml-to-json-using-c-linq) 我找到了将 XML 转换为 Json 的代码。我试图在 Windows 8 上实现这一点，但我有一个问题：

```
 JavaScriptSerializer 
```

在 Windows 8 中不存在。有人知道 JavaScriptSerializer 的程序集吗？

```
 var json = new JavaScriptSerializer().Serialize(dic); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:52:20.080

`System.Web.Scripting.Serialization.JavaScriptSerializer`

需要`System.Web.Extensions.dll`作为参考。

编辑：如果您受限于 WinRT，请查看[http://json.codeplex.com/](http://json.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T20:50:23.440

你有没有看过

```
JSonSerialiserHelper 
```

例如：

```
string objectText = GetJSONObj();
MyJsonObj myJsonObj = JSonSerialiserHelper.Deserialize<MyJsonObj>(objectText); 
```

# xpages - 搜索后“浏览”视图

> ID：12263748
> 
> 赞同：0
> 
> 时间：2012-09-04T12:43:20.607
> 
> 标签：xpages

我有一个计算搜索的视图。我想逐行浏览搜索到的视图，例如 getFirstEntry()，做一些事情然后 getNextEntry() 等等......我试过了：

```
var entryCount = view1.getEntryCount();
var viewControl = getComponent( 'viewPanel1' );
var rowCount = viewControl.getRowCount();
// If search is active -> rowcount, else entrycount
var entries = viewControl.getDataSource().getSearch();
var count = ( viewControl.getDataSource().getSearch() ) ? rowCount :entryCount;
// next line is the problem 
var currentEntry = entries.getFirstEntry();
country = currentEntry.getColumnValues().elementAt(0); 
```

这给出了一个错误：

> Java 类“java.lang.String”中的未知成员“getFirstEntry”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:12:29.963

您应该能够使用此行获得视图：

```
viewControl.getDataSource().getView() 
```

**编辑 - 更完整的片段**

```
var viewControl = getComponent( 'viewPanel1' );
var view = viewControl.getDataModel().getDominoViewData().getDataObject();
var entries = view.getAllEntries();
var entry = entries.getFirstEntry();
while( entry ){
    // your code
    entry = entries.getNextEntry();
} 
```

# java - 意外的标记 < 这可能是由于删除了上述两行中的空白字符

> ID：12263749
> 
> 赞同：0
> 
> 时间：2012-09-04T12:43:25.283
> 
> 标签：java, javascript, ajax, json, xhtml

下面的行中是否有任何空白字符。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

因为，我收到了一个语法错误，例如上述行的意外标记。

我只想知道上面两行是否有空格字符，因为

1）在我们的服务器中，我们有缩小选项来删除空白字符。必须启用缩小选项。但是，如果我禁用 minify，那么我不会收到上述语法错误。

2）只是想是否有任何空白字符从上面两行中删除

并因此得到语法错误。

请问我上面两行中是否有空格字符。

谢谢， 巴拉吉

# jquery - jquery 处理 mouseover mouseleave 选项

> ID：12263750
> 
> 赞同：1
> 
> 时间：2012-09-04T12:43:26.253
> 
> 标签：jquery

我有以下问题：

我有一个这样的选择菜单：

```
<select id="selectClass" name="bookClass" data-native-menu="false" data-mini="true">
    <option selected="selected" value="A">CLASS A</option>
    <option value="B">CLASS B</option>
    <option value="C">CLASS C</option>
    <option value="D">CLASS D</option>
</select> 
```

我想为每个选项元素处理`mouseover`and`mouseleave`事件`<select>`（我不想为选择处理 mouseover、mouseleave 事件）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T12:44:51.327

An`<option>`本身不是可见元素。它只是一个`<select>`元素的数据，在大多数情况下是使用本机 O/S 控件呈现的。

AFAIK 这不能完成，至少不能以跨浏览器的方式完成。它似乎在 Firefox 中工作。

**编辑**它实际上也可以在 Webkit 浏览器中工作，但前提是`<select>`元素具有一个`size`属性，这样多个属性`<option>`是可见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:50:16.140

你可以做到 -[演示](http://jsfiddle.net/usXP6/)

```
$("option").on("mouseover", function(e) {
    e.stopPropagation();

    $("p").text( $(this).val() );
}); 
```

**更新：**遗憾的是仅在**Firefox中有效**

# jquery - 在 Ajax 完成之前不要开火

> ID：12263752
> 
> 赞同：1
> 
> 时间：2012-09-04T12:43:29.157
> 
> 标签：jquery, ajax, mobile

我正在使用 PhoneGap、JQuery 开发应用程序

我有 2 个标准的 javascript 函数。

`LoadLanguage()`将进行 Ajax 调用以获取语言文件，然后设置 Javascript 对象。

SetLanguage() 将使用之前的对象（在 LoadLanguage() 中设置），然后使用正确的语言设置一些变量。

所以在我的 js 文件中我有这个代码：

```
function LoadLanguage()
{
    ....make ajax call and set up an object
}

function SetLanguage()
{
    ....set language based of previous LoadLanguage()
}

$( '#startpage' ).live( 'pagebeforecreate',function(event)
{
    LoadLanguage();
    ....
}

$( '#startpage' ).live( 'pagebeforeshow',function(event)
{
    SetLanguage();
    ....
} 
```

问题是`SetLanguage()`意志在完成之前触发`LoadLanguage()`。我可以解决`SetLanguage()`在`LoadLanguage ajax.complete`. 但这不好，因为我需要调用`SetLanguage()`我的代码的其他部分。

那么我该如何以一种好的方式解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:48:32.010

ajax 请求完成并收到响应后，您需要调用 SetLanguage() 函数。如果您使用的是 jquery，那么在您发出 ajax 请求的 LoadLanguage 函数中

```
success: function(response)
{
    SetLanguage();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:48:26.830

您可以将 ajax 调用的异步属性设置为 false。这可能会有所帮助：[如何让 jQuery 执行同步而不是异步的 Ajax 请求？](https://stackoverflow.com/questions/133310/how-can-i-get-jquery-to-perform-a-synchronous-rather-than-asynchronous-ajax-re)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T12:49:39.283

你提出的方法对我来说似乎很好。您的问题 - 或者更准确地说，您的兴趣点似乎与语言无关。

据我了解，您认为`SetLanugage`从脚本的其他部分以及函数之后调用函数存在问题`LoadLanguage`。我在这里根本看不到问题。如果`SetLanguage`从脚本的其他部分调用是安全的，那么在加载一种语言后，它的行为应该相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T12:50:07.593

您还可以在函数调用之外设置一个全局变量，该变量只有在加载语言时才会变为真。然后在 SetLanguage 中对此进行测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T12:50:27.620

如果你想锁定 ajax 调用使用这个

```
if($.active){ 
  //there's an ajax function running
}else{ 
  //there's no ajax function running
} 
```

# java - 单例类识别

> ID：12263756
> 
> 赞同：1
> 
> 时间：2012-09-04T12:43:38.360
> 
> 标签：java, design-patterns, singleton

谁能告诉我这是否是单例课程？

```
public class Final_output{

  Cafe_factory obj=null;

  private Final_output()
  {
    obj = new Cafe_factory();
    obj.getOrder("French Fries");
    obj.getOrder("Biryani");
    obj.getOrder("Ice-cream");
  }

  public static void main(String args[])
  {
    new Final_output();
  }
} 
```

`Cafe_factory`是同一个包中的另一个类。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T12:45:58.527

这不是[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)。

单例的例子是：

```
public class Singleton {
    private static final Singleton instance = new Singleton();

    private Singleton() {}

    public static Singleton getInstance() {
        return instance;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:46:44.283

不，不是。因为你不能在它之外创建这个类的实例（至少应该存在一个实例）。另一方面 - 您可以根据需要在内部创建`main`任意数量的实例（因此它也不是单例）。

这是一个单例的例子：

```
public class MySingleton{
    private MySingleton(){}

    private static InstanceHolder{
        private static final MySingleton instance = new MySingleton();
    }

    public static MySingleton getInstance(){
        return InstanceHolder.instance;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T12:48:14.297

它不是。

单例的目标是将可以创建的同一类的实例数限制为 1，并提供静态方法来检索此实例。

这通常通过私有构造函数和静态方法来检索这个唯一实例。这里既不`Final_output`也不`Cafe_factory`尊重这个契约，所以他们都没有使用单例模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T12:48:44.457

由于您也可以在 Final_output 类之外的代码中创建 n 个新的 Cafe_Factory 对象，因此它不是单例。永远不会使用 new 关键字创建单例。相反，您通过静态方法获取它的实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T13:02:57.250

这个 ：

```
public class Final_output{

    private static Cafe_factory obj = null;

    private Final_output()
    {
       obj = getCafeInstance();
    }

    public static getCafeInstance(){
        if(null == obj){
             obj = new Cafe_factory();
             obj.getOrder("French Fries");
             obj.getOrder("Biryani");
             obj.getOrder("Ice-cream");
           }else{
               return obj;
           }
    }

    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-04T12:49:09.150

不，这不是单吨

```
public class Final_output{
   private static Final_output ourInstance = new Final_output();
   Cafe_factory obj=null;    

   private Final_output() {
     obj = new Cafe_factory();
     obj.getOrder("French Fries");
     obj.getOrder("Biryani");
     obj.getOrder("Ice-cream");
   }

   public Final_output getINstance(){
       return ourInstance;
   }

} 
```

# objective-c - 使用字符串创建 128 位 UUID

> ID：12263758
> 
> 赞同：8
> 
> 时间：2012-09-04T12:43:43.570
> 
> 标签：objective-c, bluetooth, uuid, energy

我尝试使用 iOS CoreBluetooth 框架创建一个 128Bit。

我写的代码在这里：

```
//16Bit Value-String
static NSString * const ADVERTISING_SERVICE_16=@"FFC0";

//Var for 128Bit String
static NSString * ADVERTISING_SERVICE;

//A Base UUID 
static NSString * const BASE_UUID=@"0405060708090A0B0C0D0E0F";

+ (NSString*) get128BitUUID:(NSString*)uuid{
    return [[NSString alloc] initWithFormat:@"0000%@%@",uuid,BASE_UUID];
}

ADVERTISING_SERVICE = [UUIDFuncs get128BitUUID:ADVERTISING_SERVICE_16]; 
```

现在，当我尝试使用此获取 UUID 时：

```
if([service.UUID isEqual:[CBUUID UUIDWithString:ADVERTISING_SERVICE] ]){
    [peripheral discoverCharacteristics:nil forService:service];
} 
```

我收到此错误消息：

```
2012-09-04 14:18:06.127 blukiiFirmwareTest[3154:707] *** Terminating app due to uncaught
exception 'Invalid UUID string', reason: 'String 0000FFC00405060708090A0B0C0D0E0F 
does not represent a valid UUID' 
```

我不明白为什么；该字符串是一个 16 字节长的 UUID，这是 128 位，为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-18T18:23:03.153

On the command line type `uuidgen` to create a new random uuid:

```
0C50D390-DC8E-436B-8AD0-A36D1B304B18 
```

You'll see it is the form of 8-4-4-4-12 as mentioned by the wikipedia page linked by @PenguinCoder too.

Creating a `CBUUID` with a string in this format will work:

```
CBUUID *uuid = [CBUUID UUIDWithString:@"0C50D390-DC8E-436B-8AD0-A36D1B304B18"]; 
```

# php - Zend PDF 和 PHP：绘制的文本每次绘制时都有另一个位置？

> ID：12263759
> 
> 赞同：0
> 
> 时间：2012-09-04T12:43:46.567
> 
> 标签：php, zend-pdf

我正在使用 Zend PDF 来绘制文本，如下所示：

```
$page->drawText('Hinweis: ' . $note, $this->getAlignCenter('Hinweis: ' . $note, 66, 100, $font, $fontSize), $this->y, 'UTF-8'); 
```

根据多长时间`$note`，文本被放置在其他地方。我怎么能总是从左边框对齐完整的文本，比如 30px？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:54:27.773

`getAlignCenter()`计算文本需要居中对齐的位置。如果您只是想左对齐，请提供所需的`x`坐标而不是使用`getAlignCenter()`.

# c# - 如何使用 C# 读取 XML？

> ID：12263760
> 
> 赞同：-2
> 
> 时间：2012-09-04T12:43:52.210
> 
> 标签：c#, xml

> **可能重复：**
> [如何使用 C# 从 URL 读取 XML 节点？](https://stackoverflow.com/questions/12246449/how-to-read-xml-node-from-url-using-c)

我有以下 XML，我想使用 C# 阅读这个 XML URL

```
<result>
<Accounts>
<row no="1">
<FL val="ACCOUNTID">012345678</FL>
<FL val="SMOWNERID">012345678</FL>
<FL val="Account Owner">
<![CDATA[ demo name]]>
</FL>
<FL val="Account Name">
<![CDATA[ demo ]]>
</FL>
<FL val="Phone">
<![CDATA[ +12 34 5567 345]]>
</FL>
<FL val="Account Site">
<![CDATA[ demo]]>
</FL> 
```

我已经使用下面的代码从 URL 读取 XML，但我在控制台中的输出低于

```
<FL val="Account Name">
<![CDATA[ demo ]]>
</FL>
<FL val="Phone">
</FL>
<FL val="Account Site">
</FL> 
```

我的代码如下：

```
String xmlURL = "http://localhost/my.xml";
        XmlTextReader xmlReader = new XmlTextReader(xmlURL);
        while (xmlReader.Read())
        {
            switch (xmlReader.NodeType)
            {
                case XmlNodeType.Element: // The node is an element.
                    Console.Write("<" + xmlReader.Name);

                    while (xmlReader.MoveToNextAttribute()) // Read the attributes.
                        Console.Write(" " + xmlReader.Name + "=’" + xmlReader.Value + "’");
                    Console.WriteLine(">");
                    break;
                case XmlNodeType.Text: //Display the text in each element.
                    Console.WriteLine(xmlReader.Value);
                    break;
                case XmlNodeType.EndElement: //Display the end of the element.
                    Console.Write("</" + xmlReader.Name);
                    Console.WriteLine(">");
                    break;
            }
        }
        Console.WriteLine("Press any key to continue…");
        Console.ReadLine(); //Pause 
```

请帮忙看内部资料

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:49:51.120

`XmlReader`和子类几乎是最难的方法。除非您需要避免将整个解析的对象图加载到内存中，否则最好避免。

使用[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)and `XPath`(`using System.Xml.XPath`来获取[扩展名](http://msdn.microsoft.com/en-us/library/system.xml.xpath.extensions.xpathevaluate.aspx)) 更容易：

```
var doc = XDocument.Load(path);
var iterator = doc.XPathSelectElements("/result/Accounts/row/FL");
foreach (var flNode in iterator) {
  var text = flNode.Value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:59:05.607

尝试创建 XMLDocument，然后用文件填充它，最后通过 for 循环传递。

```
string output;

XmlDocument myxml = new XmlDocument(); //create XML document object

myxml.LoadXml("path to your document"); //populate doc with youe doumnet

XmlElement my_xml_element = myxml.DocumentElement; 

XmlAttributeCollection attribute = myElement.Attributes;

foreach (XmlAttributeCollection test_atribute in attribute )
{
   output = test_attribute.Name
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:53:23.187

使用 LINQ2XML ..它**很酷**

```
XElement doc=XElement.Load("yourXML");
foreach(XElement x in doc.Descendants("results").Descendants("Accounts").Descendants("row").Elements())
{
x.Name;//Its name
x.Attribute("val").Value;//its val attributes value
x.Value;//its value
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:48:35.067

看看使用 XPath 而不是像您正在做的原始 XML 解析。

有关 XPath 的更多信息，请参阅[此](http://support.microsoft.com/kb/308333)链接。

# .net - 将 VS MBCS 源代码表达式转换为 Unicode

> ID：12263765
> 
> 赞同：1
> 
> 时间：2012-09-04T12:44:10.403
> 
> 标签：.net, windows, visual-studio, visual-c++

我想将我的 Visual Studio 项目从 MBCS 转换为 Unicode CS。但是我的源代码中有 900 个 const char 数组，有没有自动的方法呢？一行一行地做很多事情。在这样做时，我指的是将 _T("asd") 添加到“asd”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:53:47.350

没有办法解决这个问题。

字符串文字被解释/编码为“char *”，除非您`L`用来告诉编译器始终将其编码为 Unicode（WCHAR/宽字符串），或者您使用`_T`宏对其进行编码，具体取决于“字符集”是否为设置为 ANSI/MBCS 或 Unicode..

您可能很想使用“文件 | 高级保存选项”将源文件的编码更改为 Unicode...认为这将改变您的字符串文字的编码方式...但不...它们仍将被视为窄弦。

一些可能有助于理解选项的链接。

*   [http://www.i18nguy.com/unicode/c-unicode.html](http://www.i18nguy.com/unicode/c-unicode.html)

*   [Visual C++：将传统的 C 和 C++ 字符串代码迁移到 Unicode 世界](https://stackoverflow.com/questions/2055849/visual-c-migrating-traditional-c-and-c-string-code-to-a-unicode-world)

*   [http://www.nubaria.com/en/blog/?p=289](http://www.nubaria.com/en/blog/?p=289)

*   [http://www.codeproject.com/Articles/2995/The-Complete-Guide-to-C-Strings-Part-I-Win32-Chara](http://www.codeproject.com/Articles/2995/The-Complete-Guide-to-C-Strings-Part-I-Win32-Chara)

* * *

最好的办法是在 Visual Studio 中编写一个可以运行的“宏”，它将遍历包含字符串文字的源代码文件集，并将`_T( )`or`L`前缀添加到这些字符串。

您制作宏的复杂程度取决于您...但是应该可以让宏与字符串进行模式匹配，然后要求您确认是否为字符串文字添加前缀/包装（使用 L 或 _T( ))....因为您不想转换源中的所有字符串...因为有些需要保留为窄字符串。

* * *

另一种选择是您可以使用“查找”对话框查找字符串，然后直观地查看它们是否需要修改并手动进行修改。

*   [搜索字符串文字](https://stackoverflow.com/questions/164393/searching-for-string-literals)

* * *

最后，您也许可以利用“翻译工具”，它遵循“就地本地化替换源文件中的字符串，然后重新编译”本地化技术（而不是“将字符串提取到资源”技术.. .这是更常见的一种）。我知道有这样的工具，可以从源文件中提取字符串...建立这些字符串的表/数据库...然后被翻译，然后重新插入....（实际上我写了一些东西过去这样做）。也许你可以找到一个工具来做到这一点......但稍微修改它以在插入字符串时插入 L 前缀。

事实上，如果您不厌其烦地使您的应用程序成为 Unicode...那么我想在某些时候您将打算支持您的应用程序的不同本地化...所以您可以做的就是将所有字符串移动到资源...并且资源将它们保存为 Unicode...您必须修改代码才能从资源等中加载字符串。

*   [http://www.lingobit.com/extractor/cplusplus_extract_hardcoded_string.html](http://www.lingobit.com/extractor/cplusplus_extract_hardcoded_string.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-25T19:01:10.867

我做了一个正则表达式替换，我在 VIM 中使用它在一个混合了“abc”、_T(“abc”) 和其他字符串的大型项目中执行此操作：

```
:%s/\([^T][^(L]\)"\([^"()]*\)"/\1_T("\2")/g 
```

然后我使用版本控制 (TortoiseSVN-diff) 来查看更改，并在必要时恢复它们。YMMV，但这是我项目中最快的选择。

# java - 写入 android USB 端口并将其发送到 RS232 微型机器人端口

> ID：12263773
> 
> 赞同：3
> 
> 时间：2012-09-04T12:45:01.307
> 
> 标签：java, android, usb, serial-port

我有一部旧的 android 手机 (2.2)，我需要使用它来使用 USB 串行转换器将 (.tok) 文件传输到 Basic Stamp micro RS232。所以蓝牙是没有问题的。我唯一的选择是写入我的 android 的 USB 端口并让 BS2 micro 接收它。

我从未编写过 Android 程序，因此需要一些关于如何执行此操作的指导，特别是当我的 api 级别为 8 时。我需要一个简单的程序，从 sdcard 读取下载的（从处理本地 linux PC 的）文件，然后将其发送到USB口无需任何处理。然后该文件由 bot 的 RS232 端口接收。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:32:09.943

Android 2.2 API 没有 USB 主机功能。

主机功能直到 Android 3.1 才可用。

这意味着您不能在您的 v2.2 手机上编写控制 USB 通信的 android 程序。

我还猜测即使您确实更新了操作系统，手机也没有为总线供电所需的 USB-A 端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T23:38:17.117

不需要“usb 主机”，可以使用旧的 android 设备，如 2.2 [http://code.google.com/p/android-serialport-api/](http://code.google.com/p/android-serialport-api/)

# php - 用数组更新 sql 值，该数组有几次出现的项目

> ID：12263774
> 
> 赞同：6
> 
> 时间：2012-09-04T12:45:10.513
> 
> 标签：php, sql, query-optimization

在编写购物网站时，我需要更新产品库存。但问题是，购物车自然可以有几次相同的物品。更新它的最佳方法是什么？

我尝试过`IN`，但以下 SQL 查询返回 3 个项目。

```
SELECT * 
FROM  `products` 
WHERE id
IN ( 3, 4, 4, 6 ) 
LIMIT 0 , 30 
```

这是我的解决方案，但我认为这不是最好的解决方案。

```
$cart = array(1,3,4,4,5,8,22,22);
$itemlist = array_count_values($cart);

foreach($itemlist as $itemid=>$ocurrence){
    $SQL = "UPDATE products SET stock = stock-".$ocurrence." WHERE id = ".$itemid;
    mysql_query($SQL);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:26:47.310

你可以这样做：

```
SELECT * FROM menu WHERE item_id = 1
  UNION ALL
SELECT * FROM menu WHERE item_id = 1
  UNION ALL
SELECT * FROM menu WHERE item_id = 2 
```

检查此链接： [MySQL 表 -> 您可以在同一个查询中多次返回同一行吗？](https://stackoverflow.com/questions/1109113/mysql-table-can-you-return-the-same-row-multiple-times-in-the-same-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:44:25.827

如果可能，创建一个单独的 item_cart 表，其中 (cart_id, item_id, product_id) 作为主键。从这里您可以通过 product_id 进行分组，以查看售出的产品数量。

```
select product_id, count(product_id) as "No of Product Sold" from item_cart
group by product_id 
```

您的 php 代码将完美地更新库存列中的所有产品。

如果可能，您尝试在任何产品售出时为更新库存列设置触发器。

# iphone - 在应用程序启动时更改 XIB 视图

> ID：12263776
> 
> 赞同：0
> 
> 时间：2012-09-04T12:45:30.437
> 
> 标签：iphone, xcode

根据某些应用程序设置，更改在应用程序启动时加载的 XIB 视图的正确方法是什么。我当然知道如何获得我需要的所有设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:29:28.653

在您的应用程序的委托中，在方法中

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
if(yourSettings)
     myViewController = [[MyViewController alloc] initWithNibName:@"FirstNibName" bundle:nil];
else
     myViewController = [[MyViewController alloc] initWithNibName:@"SecondNibName" bundle:nil];
self.window.rootViewController = self.myViewController;
[self.window makeKeyAndVisible];
return YES;
} 
```

就是这样。可能您可能希望将设置保存在用户默认值中，以便正确加载视图。

但是，我会使用 2 个不同的视图控制器，因为您可能希望它们做不同的事情，而不仅仅是修改一些图形。

编辑-

让我看看我是否明白。您将始终加载第一个视图控制器，如果满足某些条件，您通常希望呈现第二个视图控制器，该控制器将在某个时候被关闭，将用户返回到第一个视图控制器。如果是这种情况，我建议您将代码移动到您的第一个视图控制器中，在 viewDidLoad 中或更好的是在 viewDidAppear 中，因为此视图控制器将始终被加载。同样通过这种方式，用户可以看到他最终会转到该视图控制器。我在用户需要登录的应用程序中使用类似的东西，这样对他来说很明显他在登录之前无法继续。

我不能说这是正确的做法，因为这取决于程序员如何安排他的代码，但在我看来，控制视图及其显示方式的地方属于视图控制器和不在委托中，特别是考虑到您的第一个视图控制器总是被加载。应该由该视图控制器来查看它是否呈现第二个。

# python - 如何获取外部程序的内存使用情况 - python

> ID：12263779
> 
> 赞同：1
> 
> 时间：2012-09-04T12:45:50.197
> 
> 标签：python, memory, external-process

我正在尝试在我的 python 脚本中获取外部程序的内存使用情况。我尝试使用脚本[http://code.activestate.com/recipes/286222/](http://code.activestate.com/recipes/286222/)如下：

```
m0 = memory()
subprocess.call('My program')
m1 = memory(m0)
print m1 
```

但这似乎只是给了我 python 脚本的内存使用情况，而不是“我的程序”。有没有办法输出程序的内存使用情况以在 python 脚本中使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T14:02:53.407

尝试使用[Psutil](http://code.google.com/p/psutil/wiki/Documentation)

```
import psutil
import subprocess
import time

SLICE_IN_SECONDS = 1
p = subprocess.Popen('calling/your/program')
resultTable = []
while p.poll() == None:
  resultTable.append(psutil.get_memory_info(p.pid))
  time.sleep(SLICE_IN_SECONDS) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T13:09:44.703

您可能需要查看 psutil 模块：[http](http://code.google.com/p/psutil/) ://code.google.com/p/psutil/ 。主页上的进程管理部分为您提供了获取由 pid 指定的正在运行的进程的内存使用情况的示例。

您是否也想在脚本中生成您正在监视的进程？如果是这样，您可能不想使用 subprocess.call ，因为这将等待程序退出并且您将无法在它运行时对其进行监控。如果你想生成进程然后监视它，你可能想使用 Popen [http://docs.python.org/library/subprocess.html#subprocess.Popen](http://docs.python.org/library/subprocess.html#subprocess.Popen)。这将允许您生成进程，获取 pid，将 pid 交给 psutil，然后监控内存使用情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T13:13:29.177

如果你看一下食谱，你会看到这一行：

```
_proc_status = '/proc/%d/status' % os.getpid() 
```

我建议你用`os.getpid()`你的子进程的进程ID替换。正如@Neal 所说，*当我输入此*内容时，您需要使用`Popen`并获取`pid`返回对象的属性。

但是，您可能会遇到竞争条件，因为您不知道子进程处于什么状态，并且内存使用量无论如何都会有所不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-04T21:52:05.893

我知道这是一篇较旧的帖子，但它是我在谷歌上搜索此问题时唯一出现的帖子，因此，我想添加此更新版本：

```
import psutil
import humanfriendly

proc = subprocess.Popen("...Your process...")
SLICE_IN_SECONDS = 1
while proc.poll() is None:
    p = psutil.Process(proc.pid)
    mem_status = "RSS {},  VMS: {}".format(humanfriendly.format_size(p.memory_info().rss),
                humanfriendly.format_size(p.memory_info().vms))
    time.sleep(SLICE_IN_SECONDS)
    print(mem_status) 
```

我在这里使用了humanfriendly，以使值更具可读性，但这不是必需的。

RSS 和 VMS 值在所有操作系统上，根据您使用的操作系统可能还有其他值：[https ://psutil.readthedocs.io/en/latest/#psutil.Process.memory_info](https://psutil.readthedocs.io/en/latest/#psutil.Process.memory_info)

# typo3 - getTypoLink_URL 不起作用

> ID：12263786
> 
> 赞同：1
> 
> 时间：2012-09-04T12:46:03.473
> 
> 标签：typo3

我正在做一个现有的项目。我累了

```
$params = array(
                            $this->prefixId.'[cmd]' => 'SINGLE',
                            $this->prefixId.'[uid]' => intval( $item['uid'] ),
                            $this->prefixId.'[chash]' => substr( md5( $item['uid'] ), 0, 8 ),
                            $this->prefixId.'[page]' => $this->GPvars['page'],
                        );
$link = '<a href="'.str_replace( '&', '&amp;', $this->pi_getPageLink( $this->conf['pidSingle'], '_self', $params ) ).'" target="_self" title="'.$submarks['###SINGLE###'].'">'; 
```

$this->pi_getPageLink 没有返回任何内容。

class.tslib_pibase.php 是

```
function pi_getPageLink($id,$target='',$urlParameters=array())  {
     return $this->cObj->getTypoLink_URL($id,$urlParameters,$target);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:00:58.487

该函数需要参数。您应该收到错误消息。阅读[API](http://api.typo3.org/typo3v4/current/html/classtslib__c_obj.html#a6e2b01459c401caf9d6e7370da8be830)。

```
$this->cObj->getTypoLink_URL(
   123, // ID of the page where you link to
   array('test' => 1, 'bar' => 'yes'),
   ''
); 
```

但我通常使用typolink功能。您可以使用任何打字稿选项来进行打字链接：

```
$this->cObj->stdWrap_typolink(
   '',  
   array(
      'returnLast' => 'url',
      'parameter' => 123,
      'additionalParams' => '&test=1&bar=yes',
   )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T23:46:36.750

此解决方案不起作用：

```
$this->cObj->stdWrap_typolink(
   '',  
   array(
      'returnLast' => 'url',
      'parameter' => 123,
      'additionalParams' => '&test=1&bar=yes',
   )
); 
```

这个有效：

```
$this->cObj->stdWrap_typolink(
   '',  
   array('typolink' => array(
      'returnLast' => 'url',
      'parameter' => 123,
      'additionalParams' => '&test=1&bar=yes',
   )
); 
```

# python - python和底图并从视图中删除墨西哥/加拿大

> ID：12263792
> 
> 赞同：4
> 
> 时间：2012-09-04T12:46:27.017
> 
> 标签：python, plot, matplotlib, matplotlib-basemap

我在 Matplotlib 中使用 Basemap 来绘制美国地图。但是，我似乎无法删除墨西哥或加拿大来只显示美国。我还需要绘制状态。目前，我的代码是：

```
self.map = Basemap(llcrnrlon=-119, llcrnrlat=22, urcrnrlon=-64,
                               urcrnrlat=49, projection='lcc', lat_1=33, lat_2=45,
                               lon_0=-95, resolution='i', area_thresh=10000,ax=self.axes)

self.map.drawcoastlines()
self.map.drawcountries()
self.map.drawstates()
self.figure.canvas.draw() 
```

这吸引了美国，并展示了一些墨西哥和加拿大。如果我注释掉`self.map.drawcountries()`，那么美国南部和北部边界将被删除，所以这无济于事。如果我注释掉`self.map.drawcoastlines()`，这将删除东西边界。我找不到任何其他命令可以让我只绘制美国（与州）。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T05:00:37.607

您需要自己绘制多边形。这可以通过读取 shapefile 来完成。请参阅[fillstates.py 示例](https://github.com/matplotlib/basemap/blob/master/examples/fillstates.py)，该示例绘制了美国各州（不包括墨西哥或加拿大）。

# sql-server-2008 - SQL - 使用 INNER JOIN 获取 XML，修改 XML

> ID：12263794
> 
> 赞同：3
> 
> 时间：2012-09-04T12:46:32.570
> 
> 标签：sql-server-2008, sqlxml

我在 SQL Server 2008 中有一个将 XML 数据存储在 XML 列中的表。一个典型的 XML 片段是：

```
<validation>
    <Field1 author="56234" date="20120101" />
    <Field2 author="23232" date="20120101" />
        [...etc...]
</validation> 
```

我正在尝试解决的问题-我不知道该怎么做-使用 INNER JOIN 将这些数据选择到另一个表并修改结果集中的 XML 数据，即，所以我得到了这个：

```
<validation>
    <Field1 author="56234" date="20120101" authorFullName="Bob Smith" />
    <Field2 author="23232" date="20120101" authorFullName="Jane Hill" />
        [...etc...]
</validation> 
```

现在我知道我可以`CROSS APPLY`将 XML 数据直接拉入记录集并进行内部连接 ​​- 例如：

```
select xmldata.a, people.personname
    from xmldata
        cross apply xmldata.x.nodes('/validation/node()') vdata(fielddata)
        inner join people 
            on people.personid = vdata.fielddata.value('@author','NVARCHAR(20)') 
```

但我真正想做的是返回原始 XML，但添加了一个新属性，将 people.PersonName 映射到新的 @authorFullName 属性。

我不能完全弄清楚语法（或者即使它确实可能）。我假设我会`cross apply`做一个`modify`-`insert attribute`一些基于

```
select xmldata.a, xmldata.x
    from xmldata
        cross apply xmldata.x.modify('insert attribute authorFullName {sql:column("people.personfullname")} into /validation/node()')
        inner join people 
            on people.personid = [...what goes here?...] 
```

但是正确的语法让我无法理解。我越来越认为这是不可能的，我最好在两个查询中执行此操作并将结果合并到非 SQL 业务逻辑中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:04:29.880

您不能`modify`在 select 语句中使用。

来自[modify() 方法（xml 数据类型）](http://msdn.microsoft.com/en-us/library/ms187093.aspx)

> xml 数据类型的 modify() 方法只能在 UPDATE 语句的 SET 子句中使用。

我认为你有两个选择。

1.  切碎 XML 并使用`for xml path`您想要的方式重建 XML 文档，并在适当的位置插入人名。
2.  将 XML 提取到变量并用于`set @XML.modify(insert...`插入人名。

如果选择第二个选项，则必须使用 while 循环，因为[插入（XML DML）](http://msdn.microsoft.com/en-us/library/ms175466.aspx)中的表达式2 必须是单个节点。

选项 2 的代码可能看起来像这样。

```
declare @XML xml
declare @C int
declare @PersonName varchar(50)
declare @PersonID int

-- Store your XML in a XML variable
set @XML = 
'<validation>
    <Field1 author="56234" date="20120101" />
    <Field2 author="23232" date="20120101" />
</validation>'

-- Get number of nodes to be modified
set @C = @XML.value('count(/validation/*)', 'int')

-- For each node
while @C > 0
begin
  -- Get person id from XML
  set @PersonID = @XML.value('(/validation/*[sql:variable("@C")]/@author)[1]', 'int')

  -- Get person name
  select @PersonName = personname
  from people
  where personid = @PersonID 

  if @@rowcount = 1
  begin
    -- add person name to XML
    set @XML.modify('insert attribute authorFullName {sql:variable("@PersonName")} 
                        into (/validation/*[sql:variable("@C")])[1]')
  end

  -- next node
  set @C = @C - 1
end 
```

# .net - .NET 安全属性。是否可以制作自定义安全模型？

> ID：12263799
> 
> 赞同：0
> 
> 时间：2012-09-04T12:46:49.387
> 
> 标签：.net, security, authentication, custom-attributes

常见问题：如何使用类/方法属性在任何.NET应用程序（例如WCF应用程序）中实现用户访问权限区分系统？

所以，我们有：

1.  一组用户
2.  一组角色（例如， enum `Role`）
3.  每个用户都有自己的一套角色。
4.  可以为特定角色指定每个类/方法。

    [AuthorizationAttribute(Roles = new Role[] { Role.Admin })] 公共类 UserService : IUserService {

    }

5.  如果用户的角色集不包含此角色，则用户不能访问该方法。

更新。我试图使问题描述更清楚。Akton 的解决方案很好地解决了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:35:39.743

可以像您建议的那样创建属性安全模型，但这并不容易。您的安全对象必须从[ContextBoundObject](http://msdn.microsoft.com/en-us/library/system.contextboundobject.aspx)继承，您的安全属性必须从[ContextAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.contexts.contextattribute.aspx)继承（或实现[IContextAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.contexts.icontextattribute.aspx)接口）。然后：

1.  实现[IContextAttribute.GetPropertiesForNewContext(IConstructionCallMessage)](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.contexts.icontextattribute.getpropertiesfornewcontext.aspx)方法。您创建一个对象，调用它`MySecurityProperty`，实现`IContextProperty`和`IContributeObjectSink`接口并将其添加到`IConstructionCallMessage.ContextProperties`集合中。
2.  在[MySecurityProperty.GetObjectSink(MarshalByRefObject, IMessageSink)](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.contexts.icontributeobjectsink.getobjectsink.aspx)的实现中构造一个对象，调用它`MySecurityAspect`，它实现了 IMessageSink 接口。
3.  在[MySecurityAspect.SyncProcessMessage(IMessage)](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.imessagesink.syncprocessmessage.aspx)的实现中，您实际上会检查调用是否有效。如果它转换为[IMethodMessage](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.imethodmessage.aspx)，表示方法调用，您可以查询 的属性`IMethodMessage`以查看它是否正在使用您的安全属性调用方法或类，并进行适当的检查。如果调用未经授权，则抛出适当类型的异常。

您需要几个小时才能使其正常工作，但是一旦成功，它就有意义了。它只是 .Net 框架中支持不足的部分。除了复杂性之外，最大的问题是它迫使您的安全类继承自 ContextBoundObject 而不是任何其他库类。ContextBoundObject 也继承自[MarshalByRef](http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx)，这可能会干扰序列化。

有关更深入的说明，请参阅[http://www.developerfusion.com/article/5307/aspect-orientated-programming-using-net/3/ 。](http://www.developerfusion.com/article/5307/aspect-oriented-programming-using-net/3/)

# android - Android：具有多个可点击元素的 ListView 元素

> ID：12263800
> 
> 赞同：3
> 
> 时间：2012-09-04T12:46:52.760
> 
> 标签：android, android-layout

我有一个`ListView`列表中的每个元素都包含一个 TextView 和两个不同的按钮。像这样的东西：

```
ListView
--------------------
[ImageView][Text][CheckBox][Button]
--------------------
[ImageView][Text][CheckBox][Button]
--------------------
... (and so on) ... 
```

`OnItemClickListener`使用此代码，我可以为整个项目创建一个：

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> list, View view, int position, long id) {
        Log.i(TAG, "onListItemClick: " + position);

        }

    }
}); 
```

但是，我不希望整个项目都是可点击的，而只是每个列表元素的复选框和按钮。

所以我的问题是，如何使用以下参数为这两个按钮实现 onClickListener：

*   `int id`（与列表中的每个项目相关联的一些 id）
*   `int position`（这是列表中发生按钮单击的元素）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-01T23:39:52.350

我以这种方式解决了同样的问题：在 ListViewItem 的 layout.xml 中给元素一个标签，您要在其中添加 OnClickListener：

```
 android:id="@+id/CheckBox"
       android:tag="CheckBox" /> 
```

……

```
 android:id="@+id/Button"
       android:tag="Button" /> 
```

在代码中，您的 ListView 被夸大了，使用以下代码添加 OnClickListener：

```
 listView.findViewWithTag("CheckBox").setOnClickListener(createCheckBoxOnClickListener(act));
       listView.findViewWithTag("Button").setOnClickListener(createButtonOnClickListener(act)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:50:40.163

你需要制作 baseAdapter 来实现这个

```
public class ContactsAdapter extends BaseAdapter {

    ArrayList<ContactInfo> mlist;
    Context mcontext;

public BluetoothChatadpter(Context context,ArrayList<ChatInfo> mchtlist) {      
        mlist =  mchtlist;
        mcontext = context;

    }

    @Override
    public int getCount() {
        return mlist.size();
    }

    @Override
    public Object getItem(int postion) {
        return mlist.get(postion);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
        public View getView(int position, View convertview, ViewGroup viewgroup){
            View view = null;
            if(convertview == null){
                LayoutInflater inflater = context.getLayoutInflater();
                view = inflater.inflate(R.layout.contactrow, null);

                ContactHolder holder = new ContactHolder();

                holder.txtviewfirstname = (TextView)view.findViewById(R.id.firstname);
                holder.txtviewphone = (TextView)view.findViewById(R.id.phone);
                holder.chkselected = (CheckBox)view.findViewById(R.id.check);

                setOnClickListener(new OnClickListener() {
        @Override
            public void onClick(View arg0) {
            // to open the selected file in resp

                  // do your work here
                 }});

    chkselected .setOnClickListener(new OnClickListener() {
        @Override
    public void onClick(View v) {
    // Toast.makeText(context,// "checked is clicke="+pos, 12).show();
            if (chkselected.isChecked())          
                       {            

                        // do your work here
            } else {

     // do your work here                               
            }
        }
});

            view.setTag(holder);

        }
            else{
                view = convertview;
            }
            ContactHolder holder2 = (ContactHolder) view.getTag();
            holder2.txtviewfirstname.setText(list.get(position).firstname);
            holder2.txtviewphone.setText(list.get(position).phonenumber);
            holder2.chkselected.setChecked(list.get(position).selected);
            return view;
        }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:49:24.253

您必须`getView`在适配器中的方法中执行此操作..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:54:39.097

不要为列表视图添加 onItemClickListener 而是为您所需的按钮添加 onClick 并为复选框这样做

```
 CheckBox cbox = new CheckBox(this);// find your checkbox from the view here.
        cbox.setOnCheckedChangeListener(new OnCheckedChangeListener() { `@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub
            if(isChecked){
                // do what ever you want.
            }
        }
    });` 

            回答 #5

赞同：0

时间：2012-09-04T12:50:27.747

很简单，只需`OnClickListener`为这两个按钮实现，并获取您从中获取的位置，`getView()`确保将位置设置为`final`以获取它`OnClickListener`

            回答 #6

赞同：0

时间：2012-09-04T12:50:57.260

您可以在适配器的 getView() 方法中添加侦听器。

            回答 #7

赞同：0

时间：2012-09-04T13:11:24.387

检查下面的代码它可能会帮助你。

```
private class ListViewAdapter extends BaseAdapter {

        private LayoutInflater mInflater;

        public ListViewAdapter(Context con) {
            // TODO Auto-generated constructor stub
            mInflater = LayoutInflater.from(con);
        }

        public int getCount() {
            // TODO Auto-generated method stub
            return main_genral_class.review_name.size();
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub

            return position;
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            ListContent holder;

            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.review_row, null);
                holder = new ListContent();

                holder.img = (ImageView) convertView
                        .findViewById(R.id.imageView1);
                holder.name = (TextView) convertView
                        .findViewById(R.id.textView1);
                holder.check_date = (TextView) convertView
                        .findViewById(R.id.textView2);

                holder.img.setOnClickListener(mOnTitleClickListener);
                holder.name.setOnClickListener(mOnTitleClickListener1);
                holder.check_date.setOnClickListener(mOnTitleClickListener2);

                convertView.setTag(holder);
            } else {

                holder = (ListContent) convertView.getTag();
            }

            holder.text2.setText(main_genral_class.review_shout.get(position));
            return convertView;
        }
    } 
```

```
private OnClickListener mOnTitleClickListener = new OnClickListener() {
        public void onClick(View v) {
            final int position = mListView.getPositionForView((View) v
                    .getParent());

                Toast.makeText(review_activity.this, "click on Image View",
                        Toast.LENGTH_SHORT).show();

        }
    }; 
```

```
private OnClickListener mOnTitleClickListener1 = new OnClickListener() {
            public void onClick(View v) {
                final int position = mListView.getPositionForView((View) v
                        .getParent());

                    Toast.makeText(review_activity.this, "click on Text View",
                            Toast.LENGTH_SHORT).show();

            }
        }; 
```

```
private OnClickListener mOnTitleClickListener2 = new OnClickListener() {
            public void onClick(View v) {
                final int position = mListView.getPositionForView((View) v
                        .getParent());

                    Toast.makeText(review_activity.this, "click on Date Text View",
                            Toast.LENGTH_SHORT).show();

            }
        }; 
```

```

# multithreading - 多对一线程模型

> ID：12263803
> 
> 赞同：0
> 
> 时间：2012-09-04T12:47:16.453
> 
> 标签：multithreading, operating-system

我已经阅读了多对一线程模型，但我怀疑那些许多用户线程属于一个进程还是可能属于不同的进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:49:27.900

在多对一线程模型中，来自一个进程的多个用户线程被映射到一个内核线程。

# google-chrome - chrome中的表单提交参数

> ID：12263804
> 
> 赞同：0
> 
> 时间：2012-09-04T12:47:19.887
> 
> 标签：google-chrome, forms

chrome有什么方法或任何扩展，我可以通过它检查提交表单时提交的表单参数。

例如

```
<form action="post.php" type="post">
<input name="fname" type="text">
<input type="submit" name="submit" value="Submit Form">
</form> 
```

所以我想在提交表单时查看文本字段的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:04:14.833

是的，如果它是使用 jquery $.ajax 的 ajax 提交表单，那么您执行以下步骤来查看表单数据：

1.  右键单击 > 检查元素 > 网络选项卡
2.  这里最后一个请求将是您使用 ajax 所做的“发布”或“获取”请求
3.  单击请求，右侧您将获得“表单数据”信息

如果不是 ajax 提交，那么您需要在后端检查它（在发送表单数据的函数中）。

PHP：您可以执行 print_r($_POST) 或 var_dump($_POST) 来查看从浏览器表单发布到您的函数的数据。

# c# - linq 加入两个具有动态大小的列表

> ID：12263810
> 
> 赞同：-4
> 
> 时间：2012-09-04T12:47:53.943
> 
> 标签：c#, .net, linq

我有两个清单`List<Collection> collections`和`List<Invoice>`发票。两者都有一个 CurrencyID 字段和一个 Value 字段。我需要的是按 currencyID 对这两个列表进行分组，并将收集到的值减去发票值。而且这仅在匹配的情况下，否则，无论在哪个列表中都会出现不匹配，我将在最终列表中需要它。例如：

```
invoices        collections         final
30 EUR              10 USD          10 EUR
40 CAN              20 EUR          40 USD     
50 USD              50 JPN          40 CAN
                                    50 JPN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:29:07.790

给定以下类和列表：

```
class Collection { public string CurrencyID; public Int32 Value; }
class Invoice { public string CurrencyID; public Int32 Value; }

...

List<Collection> collections = new List<Collection> {
    new Collection() {CurrencyID="USD", Value=10},
    new Collection() {CurrencyID="EUR", Value=20},
    new Collection() {CurrencyID="JPN", Value=50}
};

List<Invoice> invoices = new List<Invoice> {
    new Invoice() {CurrencyID="USD", Value=50},
    new Invoice() {CurrencyID="EUR", Value=30},
    new Invoice() {CurrencyID="CAN", Value=40}
}; 
```

你可以通过两个简单的查询得到你想要的，然后使用`Union`.

```
var result1 = (from i in invoices
               let o = collections.SingleOrDefault(x => x.CurrencyID == i.CurrencyID)
               select new 
               {
                  CurrencyID = i.CurrencyID,
                  Value = i.Value - (o != null ? o.Value : 0)
               }).ToList();

var result2 =  from c in collections
               where !result1.Any(x => x.CurrencyID == c.CurrencyID)
               select new 
               {
                CurrencyID = c.CurrencyID,
                Value = c.Value
               };

var result = result1.Union(result2).OrderBy (r => r.Value); 
```

**结果**

![在此处输入图像描述](../Images/471256cfabe156808de64c3f71389247.png)

# android - 如何知道正在启动或访问哪个 URI

> ID：12263815
> 
> 赞同：1
> 
> 时间：2012-09-04T12:48:07.077
> 
> 标签：android, events, android-intent, uri

我想捕捉当某人或某个应用程序想要访问图像、文件、短信或电子邮件或任何其他 URI 时触发的意图。如何在android中完成？

# oracle - pl/sql 中用于将 bfile 读入 blob 的函数不显示结果

> ID：12263816
> 
> 赞同：3
> 
> 时间：2012-09-04T12:48:12.523
> 
> 标签：oracle, function, plsql, blob

你能告诉我，为什么这个函数会返回一个空的 blob 值吗？它甚至不会在循环后关闭 BFILE 类型变量。我无法想象问题出在哪里。

```
FUNCTION f$bfile_to_blob
  (I_FID_ID IN INTEGER)
  RETURN BLOB IS
   bf            BFILE;
   Amount        INTEGER := 32767;
   Position      integer := 1;
   buffer        RAW(32767);
   bl            LONG RAW := '';

   bb            BLOB;

BEGIN
  select fid_bckp into bf
   from filedoc
  where fid_id = I_FID_ID;

  dbms_lob.open(bf, dbms_lob.lob_readonly);

  DBMS_LOB.CREATETEMPORARY(bb, TRUE, DBMS_LOB.SESSION);
  LOOP
    dbms_lob.read(bf, Amount, Position, buffer);
    dbms_lob.writeappend(bb,amount,buffer);
    Position := Position + Amount;
  END LOOP;

  dbms_lob.close(bf);

  return bb;

END; 
```

我这样调用函数

```
select F$BFILE_TO_BLOB(fid_id) from filedoc where fid_id = 2150; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:05:36.377

您的逻辑很复杂，您混合了许多可能产生错误的元素：即 CLOB 和 BFILE。您应该首先尝试找出函数中的哪个元素导致了这种异常行为。

我建议您运行一个简单的函数来确保您的 BLOB 逻辑正常：

```
create or replace FUNCTION f$bfile_to_blob
  RETURN BLOB IS
   bb            BLOB;
BEGIN
  DBMS_LOB.CREATETEMPORARY(bb, TRUE, DBMS_LOB.SESSION);
  bb := hextoraw('FFFFFFFF');
  return bb;
END;

select rawtohex(dbms_lob.substr(f$bfile_to_blob, 4000, 1)) from dual; 
```

这应该会产生 FFFFFFFF。现在您知道问题在于您对 BFILE 对象的读取。我们可以在您的代码中看到您有一个没有退出条件的循环。由于程序退出，我们推断您的循环退出并出现错误。

该[文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_lob.htm#i999170)解释说该过程引发了异常`READ`：

> 实际读取的字节数或字符数在 amount 参数中返回。如果输入偏移量超过 LOB 的末尾，则将 amount 设置为 0，并引发**NO_DATA_FOUND**异常。

引发异常并且函数退出而不返回任何内容。

您可能知道，`NO_DATA_FOUND`异常不被视为 SQL 语句中的错误。该错误被查询解释`NULL`为`SELECT`。

您应该修改您的函数以捕获此错误并优雅地退出循环：

```
FUNCTION f$bfile_to_blob(I_FID_ID IN INTEGER)
   RETURN BLOB IS
   bf       BFILE;
   Amount   INTEGER := 32767;
   Position INTEGER := 1;
   buffer   RAW(32767);
   bl       LONG RAW := '';
   bb       BLOB;
BEGIN
   SELECT fid_bckp
     INTO bf
     FROM filedoc
    WHERE fid_id = I_FID_ID;
   dbms_lob.open(bf, dbms_lob.lob_readonly);
   DBMS_LOB.CREATETEMPORARY(bb, TRUE, DBMS_LOB.SESSION);

   LOOP
      BEGIN
         dbms_lob.read(bf, Amount, Position, buffer);
      EXCEPTION 
         WHEN NO_DATA_FOUND THEN
            EXIT;
      END;
      dbms_lob.writeappend(bb, amount, buffer);
      Position := Position + Amount; 
   END LOOP;

   dbms_lob.close(bf);

   RETURN bb;
END; 
```

# tridion - 如何在 SDL Tridion 消息栏中显示自定义消息？

> ID：12263827
> 
> 赞同：2
> 
> 时间：2012-09-04T12:48:42.630
> 
> 标签：tridion, tridion-2011

我想在 SDL Tridion CME 消息栏中显示我的自定义消息（例如：当触发页面保存事件时需要显示一些消息）。这该怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T12:53:54.197

在事件系统中，您只能显示 ERROR 消息。

如果您的事件代码引发错误，“消息”将显示在消息栏中。

对于其他类型的消息，您需要使用 Javascript/CM 扩展。[您可以在此处](http://nunolinhares.blogspot.com/2012/07/validating-content-on-save-part-1-of.html)找到显示消息的事件系统示例。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T14:12:33.487

Nuno 很好地涵盖了您的选择。

如果你想从你的***JavaScript***代码中显示一条消息，这通常是我的出发点：

```
$messages.registerNotification("Hello world"); 
```

如果你把它放在你的 JavaScript 代码中（或者只是将它粘贴到 JavaScript 控制台中），它将显示一个带有“Hello World”的蓝色条。

有许多类型的消息，每种消息的显示方式略有不同。如果我需要的不仅仅是通知，我通常会做的是：

1.  `$messages.`在加载 Web GUI 的浏览器中键入JavaScript 控制台
2.  浏览相关方法列表，看看最有希望的方法（它们都以 开头`register`）
3.  对我正在寻找的方法的源代码执行文本搜索

这让我看到了一个如何在 GUI 中使用该方法的示例，并且是我自己的代码的一个很好的起点。

**更新**

Alexander Klock 最近在他的博客上对[可用的消息类型进行了详尽的解释。](http://codedweapon.com/2012/10/anguilla-framework-adding-messages-with-messagecenter/)

# php - 搜索结果作为 php 页面的链接

> ID：12263830
> 
> 赞同：-1
> 
> 时间：2012-09-04T12:48:49.907
> 
> 标签：php

对于这个问题，请考虑 ebay 如何通过不太详细的相关拍卖表的名称和图像将搜索结果与更详细的拍卖描述联系起来。

我猜这需要名称和图像成为新 php 页面的超链接，但我不确定如何通过超链接传递 php 变量，以便新的 php 页面可以获取与单击的项目相关的详细信息。

到目前为止，我的 php 脚本看起来像这样：

```
<tr class = "resultindex">
        <input type="hidden" value="<?php echo $ID; ?>" />
        <td class = "imgholder"><?php echo $img; ?></td>
        <td class = "infoholder">
            <div style ="height:4px;"></div>
            <div class = "infodiv"><?php echo $name; ?></div>
            <div class = "locdiv"></div>
            <div class = "userdiv"><span class="fromuser">From user: </span><br/><?php echo $owner; ?></div>
        </td> 
```

其中 php 变量是从 mysql 数据库中获取的字段。我希望能够通过超链接传递隐藏的输入 $ID，因此新的 php 页面可以再次使用它作为参考从 mysql 检索信息，并填充更详细的信息页面这如何完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:52:14.193

您可以使用与某些`GET`功能相结合的超链接来实现您想要的效果，如下所示：

```
$id=4; // assume ID of some item you want to link to
$href="<a href='somePHPPage.php?myID=".$id."'>some text</a>";
echo $href; // will output the hyperlink in your page. 
```

然后在页面中您可以查询发送的数据，如下所示：

```
$idYouWant=$_REQUEST['myID'];
// dp stuff with this variable to display the correct item... 
```

# iphone - 如何更新ios中的文本字段值

> ID：12263832
> 
> 赞同：-2
> 
> 时间：2012-09-04T12:48:53.627
> 
> 标签：iphone, ios, ios5, uitextfield

我有一个使用 NSNumberFormatter 的文本字段值，例如 100,000，现在我想编辑我的文本字段，再添加一个 0 。在我想像 1,000,000 这样的文本进行更改后，但我的文本字段值更改为 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:55:19.600

试试这个代码。它可以帮助你

```
 NSNumberFormatter *numberFormatter = [[[NSNumberFormatter alloc] init] autorelease];
    [numberFormatter setFormat:@"#,###"];
    NSNumber *averageResponseTime = [NSNumber numberWithInt:[textfield.text intValue]];

//If you print text 

 [NSString stringWithFormat: @"%@ms",[numberFormatter stringForObjectValue:averageResponseTime]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T12:51:33.820

试试这样

```
 int x=[textfield.text intValue]; 
```

你可以得到正确的值......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T13:11:19.093

```
numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle: NSNumberFormatterNoStyle];
[numberFormatter setGroupingSize:3];
[numberFormatter setGroupingSeparator:@","];
[numberFormatter setUsesGroupingSeparator:YES];
number= [NSNumber numberWithInt:[textFieldString intValue]];
NSString *numberString = [NSString stringWithFormat:@"$%@",[numberFormatter stringForObjectValue:number]]; 
```

尝试这个

# c# - 如何显示用户帐户的信息？

> ID：12263836
> 
> 赞同：0
> 
> 时间：2012-09-04T12:49:12.067
> 
> 标签：c#, asp.net, asp.net-membership, user-roles

我有一个正在开发的网站，并设置了一个组“管理员”的角色，我希望能够选择一个用户并显示有关该用户的信息......名称、密码、安全问题等。完成这项工作的最简单方法是什么？此外，我已经修改了默认登录步骤以包含一些额外的要求，例如名字和姓氏、公司等。我希望“管理员”组能够快速轻松地查看所有这些信息，所以如果客户另一家公司打电话给我们说他们解雇了那个人，我们可以根据他们的实际姓名而不是用户名删除用户。

**编辑** 我可以做类似的事情：

```
MembershipUser user = System.Web.Security.Membership.GetUser(RegisterUser.UserName);
user.Comment = fnametxt.Text.ToString() + " " + lnametxt.Text.ToString() + " " + companytxt.Text.ToString();
System.Web.Security.Membership.UpdateUser(user); 
```

存储附加信息，然后在需要时从 sql 数据库中调用 user.Comment？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:58:18.327

好的，您还没有说“在哪里”存储您的会员信息，但我假设它在使用由 aspnet_regsql.exe 生成的开箱即用的 Membership & RoleProvider 模式的 SQL 数据库中

除了使用ASP.NET 网站中[的内置用户配置工具](http://msdn.microsoft.com/en-us/library/yy40ytx0%28v=vs.100%29.aspx)外，您还可以使用一些第 3 方应用程序与您的会员用户进行交互。

我很久以前使用[过 MyWSAT](http://mywsat.codeplex.com/)，但它似乎不再维护了。

您应该注意的一件事是，您不能也不应该能够在系统中显示最终用户的“密码”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:06:42.743

It would appear that what you are looking for is a Profile provider. This can be used to store addition information about users such as first and last names and other miscellanea.

in Web.config

```
<profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider"
             type="System.Web.Profile.SqlProfileProvider"
             connectionStringName="yourConnectionString"<!--Same as membership provider-->
             applicationName="/"/>
      </providers>
      <properties>
        <add name="FirstName" type="string"/>
        <add name="LastName" type="string"/>
        <add name="Company" type="string"/>
      </properties>
    </profile> 
```

Add/edit profile properties:

```
var username = User.Identity.Name;
ProfileBase profile = ProfileBase.Create(username);
profile["FirstName"] = "John";
profile["LastName"] = "Smith";
profile["Company"] = "WalMart";
profile.Save(); 
```

Read profile properties:

```
var username = User.Identity.Name;
var profile = ProfileBase.Create(username);
var firstName = profile["FirstName"] as string;
var lastName = profile["LastName"] as string;
var company = profile["Company"] as string; 
```

I think this would be the way to go and a bit cleaner and easier to maintain that using comments.

# jsp - 调用另一个站点的 jsp 页面并从该页面获取响应

> ID：12263837
> 
> 赞同：0
> 
> 时间：2012-09-04T12:49:20.367
> 
> 标签：jsp, servlets

我有一个 JSP 页面，它有一个表单，它在提交时调用一个 servlet，它从数据库中获取更多数据。在获取所有需要的数据后，我需要用所有数据构建一个 URL，并从另一个处理数据并返回字符串响应的站点调用 JSP 页面。然后我必须解析响应并在 UI 上显示适当的消息。

我尝试使用 HTTPUrlConnection 从数据访问层调用 JSP 页面，但我得到了`HTTP 505 error`.

```
try{ 
    URL url = new URL(mainURL+urlSB.toString()); 
    HttpURLConnection connection = (HttpURLConnection) url.openConnection(); 
    connection.setRequestMethod("GET");
    connection.setDoOutput(true);
    connection.connect();
    InputStreamReader isr = new InputStreamReader(connection.getInputStream(), Charset.forName("UTF-8")); 
    BufferedReader br = new BufferedReader(isr); 
    String htmlText = ""; 
    String nextLine = ""; 
    while ((nextLine = br.readLine()) != null){ 
        htmlText = htmlText + nextLine; 
    } 
    System.out.println(htmlText);
}catch(MalformedURLException murle){ 
    System.err.println("MalformedURLException: "+ murle.getMessage()); 
}catch(IOException ioe){ 
    System.err.println("IOException: "+ ioe.getMessage()); 
} 
```

然后我得到了 servlet 的 URL 并使用了`request.getRequestDispatcher(url).include(request, response)`，我得到了`javax.servlet.ServletException: File &quot;/http:/xxxx:8090/test/create.jsp&quot; not found`

我已确认的另一个站点正在运行。我无权访问其他站点，因此无法对其进行调试。

任何人都可以解释什么是错的或我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:51:57.173

[`ServletRequest#getRequestDispatcher()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRequestDispatcher%28java.lang.String%29)不采用 URL，例如，`http://example.com`而仅采用相对的网络内容路径，例如`/WEB-INF/example.jsp`.

改用[`HttpServletResponse#sendRedirect()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#sendRedirect%28%29)：

```
response.sendRedirect(url); 
```

然而，这显示了整个资源。当您使用`RequestDispatcher#include()`时，您似乎想要包含它的输出（但这在这种情况下几乎没有意义，但除此之外）。另一种方法是`<c:import>`在您的 JSP 中使用。因此，在您的 servlet 中：

```
request.setAttribute("url", url);
request.getRequestDispatcher("/WEB-INF/your.jsp").forward(request, response); 
```

并在`/WEB-INF/your.jsp`：

```
<c:import url="${url}" /> 
```

# asp.net - 由于以下错误，检索具有 CLSID {88D969C1-F192-11D4-A65F-0040963251E5} 的组件的 COM 类工厂失败：80040154

> ID：12263840
> 
> 赞同：4
> 
> 时间：2012-09-04T12:49:28.713
> 
> 标签：asp.net, web, 32bit-64bit

我正在使用 Visual Studio 2010 Express。我在 asp.net 中创建了一个网站。它适用于 XP，但不适用于 Windows 7 高级版（64 位）
我面临着[这里提到的同样问题。](https://stackoverflow.com/questions/1036856/retrieving-the-com-class-factory-for-component-with-clsid-xxxx-failed-due-to-t)
我尝试使用 regsvr32 注册 DLL，但显示错误为

```
The Module "c:\MyProject\bin\MyDll.dll" was loaded but the entry-point 
DllRegisterServer was not found.
Make sure that "c:\MyProject\bin\MyDll.dll" is a valid DLL or OCX and 
then try again. 
```

我也没有在属性下找到任何选项来设置**平台目标**或**目标 CPU**，以便我可以将我的网站转换为运行 32 位平台。
我是 ASP.NET 新手，请帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:23:31.333

第一个概念是您的应用程序在 IIS 中的 64 位应用程序池下运行，该应用程序池未启用 32 位应用程序，在这种情况下，无法将 32 位 DLL 加载到 64 位进程空间中。检查托管您站点的应用程序池是否允许 32 位应用程序。

VS 2010 Express 应该默认创建 32 位可执行文件；虽然我没有亲自使用过它，但我相信我已经读过要在 2010 Express 版本中构建 64 位可执行文件，您必须下载额外的 SDK，因此您可能构建了一个 32 位目标，从而导致了所描述的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-05T18:58:50.770

我得到这个对话框试图运行 Visio x32 FlowChartSampleVBNET 加载项。该对话框出现了指向 Excel 的 CLSID{00024500-0000-0000-C000-000000000046}。我在 x64 机器上安装了 Excel x64。显然，Visio x32 和 Excel x64 之间的不匹配导致了问题。卸载 Microsoft Office 2013 x64 并重新安装 Microsoft Office 2013 x32 后，我可以正常运行加载项。

# qt - qmake 不正确的目标生成

> ID：12263841
> 
> 赞同：1
> 
> 时间：2012-09-04T12:49:30.130
> 
> 标签：qt, makefile, qmake, qtestlib

我有一个看起来像这样的 .pro 文件：

```
BASEDIR = ../../..
CLEBS *= buildplugin apextools apexdata apexmain
TARGET = maintest
TEMPLATE = app
include($$BASEDIR/clebs.pri)

CONFIG *= qtestlib

QT *= testlib gui

SOURCES *= \
apexmaintest.cpp \

HEADERS *= \
apexmaintest.h \ 
```

但是，它生成的 makefile 具有以下目标：

```
QMAKE_TARGET  = maintest
DESTDIR       = ../../../bin/debug/
TARGET        = libmaintest.so
TARGETD       = libmaintest.so 
```

因此 gcc 生成了一个库。但是，我希望按照 .pro 文件中的指定生成可执行文件。

我不明白为什么会发生这种尴尬的事情？任何指针表示赞赏。

谢谢

PS 这是使用 qtestlib 框架进行单元测试的 .pro 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T11:50:56.333

解决了。CLEBS *= buildplugin 强制生成库。

# scala - scala 是否有“test-if-match”运算符？

> ID：12263842
> 
> 赞同：7
> 
> 时间：2012-09-04T12:49:30.163
> 
> 标签：scala, pattern-matching

> **可能重复：**
> [Scala：返回布尔值的模式匹配的简短形式](https://stackoverflow.com/questions/4437061/scala-short-form-of-pattern-matching-that-returns-boolean)

在我的 scala 代码中，我发现自己经常写如下内容：

```
x match{
   case Type(params) => doStuffWith(params)
   case _ => /* do nothing*/
} 
```

是否已经有一些预定义的运算符来执行此操作？我认为如果我能写出这样的东西会更清楚：

```
if( x match Type(params)) {
    doStuffWith(params)
} 
```

基本上避免了奇怪的情况。我还遇到过其他情况，如果能够以内联方式验证某些内容是否与模式匹配，这将为我节省一对额外的大括号。

我知道这种事情可能只会在编写更多迭代代码时更有用，但 Scala 似乎有很多隐藏的功能，我想知道是否有人对此有一个简单的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T13:46:32.763

您可以`lift`将部分函数 from `Any`to`A`转换为 from `Any`to函数`Option[A]`。

为了使语法更好，首先定义一个辅助函数：

```
def lifted[A]( pf: PartialFunction[Any,A] ) = pf.lift 
```

然后，赚取利润：

```
val f = lifted {
  case Type(i) => doStuff(i)
}

scala> f(2)
res15: Option[Int] = None

scala> f(Type(4))
res16: Option[Int] = Some(8) 
```

`doStuff`只有当参数匹配时才会调用该方法。你可以有几个case子句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T13:07:09.023

我能想到的最短方法是将值包装在一个选项中并使用 collect 方法：

```
Option(x).collect { case Type(params) => doStuffWith(params) } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T17:37:03.460

使用@phant0m 提供的链接，将其拼写出来：

```
import PartialFunction.condOpt

condOpt(x){ case Type(params) => doStuffWith(params) } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T07:36:04.507

如果这种模式经常出现在您的代码中，您应该考虑将`doSomeStuff`其转换为`Type`. Scala 中的案例类是普通类，您应该在有意义的时候使用面向对象的特性。

否则，您可以在层次结构的顶部添加一个方法，假设您的所有案例类都扩展了一个公共特征。例如：

```
class Base {
  def whenType(f: (T1, T2) => Unit): Unit = this match {
    case Type(t1, t2) => f(t1, t2)
    case _ => ()
  }
} 
```

然后你可以使用`x whenType doSomeStuff`

# multithreading - 为什么使用线程时上下文为空？

> ID：12263843
> 
> 赞同：0
> 
> 时间：2012-09-04T12:49:31.287
> 
> 标签：multithreading, jsf

我正在使用 primefaces 3.2，在 JSF 中使用线程时遇到问题。我无法`FacesContext`从该线程获得对当前的引用。

如何在该线程中获取对该上下文的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:57:27.167

当前`FacesContext`存储在静态线程局部变量中。Servlet 容器使用特定线程来处理到达容器的每个请求/响应，因此，将其存储`FacesContext`在线程局部变量中可确保每个请求处理生命周期只有一个实例，这就是它应该的样子。

当您尝试`FacesContext`从另一个线程获取对 a 的引用时，会发生什么情况，因为它被存储为线程局部变量，并且由于您的新线程尚未初始化它：您获得了一个`null`引用。

如果您想要/需要另一个新线程中的 faces 上下文，唯一可能的方法是通过`FacesContextFactory`. 但是，您将需要对 a `HttpServletRequest`、 a`HttpServletResponse`和 a的引用来`ServletContext`实例化它（我猜您将无法从单独的线程中获取对这些对象的有效引用）。

# android - 在 Android 上使用 SSL 使用 RESTful 服务

> ID：12263845
> 
> 赞同：1
> 
> 时间：2012-09-04T12:49:35.820
> 
> 标签：android, tomcat, ssl-certificate, jax-rs

我创建了一个应用程序，它可以通过 RESTful 服务从我的数据库中获取数据。

我尝试过的是我已经使用自签名证书（目前）在服务级别实现了 SSL，并且为了让 android 应用程序与服务通信，我在我的 android 应用程序中导入了相同的 SSL 证书。

我想确认我的方法以及它是否安全，因为我认为有人可以通过逆向工程从 android 应用程序获取证书。如果没有，那么最安全的选择是什么？

# pdf - 在 indesign 中制作按钮转到导出 PDF 中的特定页面

> ID：12263850
> 
> 赞同：3
> 
> 时间：2012-09-04T12:49:49.243
> 
> 标签：pdf, navigation, adobe-indesign

在 InDesign 中，我可以定义按钮并向它们添加不同的操作。其中一项操作是“转到页面”，但显然该功能仅在将 InDesign 文档导出为 SWF 时可用。但是，我们要导出交互式 PDF。

当我们在 Adob​​e Acrobat Professional 中打开导出的 PDF 时，我们可以修改文档中的每个按钮并将页面设置为我们想要的页面，但这当然是非常乏味的工作，尤其是当您进行多次验证运行时。

所以，我的问题是：如何让 InDesign 中的按钮跳转到特定页面，而无需在 Adob​​e Acrobat Professional 中后期进行润色？当然必须可以在页面之间导航？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T15:42:12.187

不久前我也偶然发现了这个问题，我想出了如何通过按钮链接到交互式 PDF 文档中的某个位置：

1) 在要链接的页面上创建书签。（我通常在页面顶部以“纸张颜色”制作文本并从中创建书签）

2) 按钮动作“前往目的地” -> 书签

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T22:47:16.797

在 inDesign 中制作一个盒子。选择框。打开超链接面板“创建超链接目标”我使用页码然后转到您要在其中制作按钮的 inDesign 文档中的页面。制作一个框并选择它打开超链接面板“制作超链接”并选择您使用下拉菜单制作的目标（不是页码计数器，这对我不起作用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:31:08.623

我试过一段时间，但现在我知道了（在 Windows上的**CS5上）。**我只有德语版本，所以也许我会标记一些错误的东西：

当您创建按钮并确定“操作”时，您将获得一个包含可用选项的列表。上面的选项在 PDF 和 SWF 中有效，但有些选项“仅在 swf 中”和“仅在 pdf 中可用”。

“转到某个页面”在 PDF 中不可用 :( 所以您必须通过 Acrobat 编辑文档。

另一件事：在编写交互式 pdf 文件时，使用“文件”下的“导出...”选项，这里您在文件类型下选择了“Adobe PDF（交互式）”。

**也许**（作为一种想法）有一种方法可以在 InDesign 和/或 Acrobat 中使用 Javascript 来自动分配按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-13T17:05:49.703

interactiv-> 超链接，然后从右上角下拉菜单中的菜单中选择“新建超链接目标”。并选择页面。

# c# - 使用 JavaScriptSerializer 将 Json 转换为 Xml

> ID：12263857
> 
> 赞同：0
> 
> 时间：2012-09-04T12:50:18.870
> 
> 标签：c#, javascriptserializer

如何使用 JavaScriptSerializer 将 json 字符串转换为 xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:04:38.620

首先，您需要使用 [http://nuget.org/packages/newtonsoft.json](http://nuget.org/packages/newtonsoft.json)将 json 转换为对象， 并使用 XMLSerializer 将对象转换为 xml

# sql - 将 SQL 导入 SQL DB：如何填充存在于目标而不是源中的列？

> ID：12263865
> 
> 赞同：0
> 
> 时间：2012-09-04T12:50:48.610
> 
> 标签：sql, ssis, mapping

我正在使用 SSIS 将数据从一个数据库导入另一个现有数据库。目标表中的某些列在源表中不存在。似乎导入和导出向导只允许我从源中选择未映射的列并将它们与目标中的这些新列匹配。我希望能够只提供一条数据以导入这些新列的所有行。如果可能的话，我想使用 GUI，因为我不擅长编写脚本。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:08:28.753

In SSIS, you can add a "derived column" component that will add columns to the buffer rows with the value you want (either a string or an expression).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:54:54.950

我不相信这在 GUI 中是可能的。但是，在使用 SSIS 加载数据后，这将是一个简单的脚本：

```
UPDATE table SET newcolumn = new value 
```

如果您需要过滤行，只需添加

```
WHERE column = value ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T14:27:15.977

您可以将源更改为选择查询并列出列以及要映射的静态值。

```
SELECT SOURCECOLUMN_1,SOURCECOLUMN_2,....,SOURCECOLUMN_N,'VALUE' AS DESTINATIONCOLUMN FROM Source_Table 
```

我最初的想法是您可以在 Import & Export 向导中直接使用查询。如果您进入并编辑软件包，您显然可以做更多事情，但听起来您对此没有太多经验。以下是您在向导中执行此操作的方法。

选择源数据库和目标数据库后，您可以指定表复制或查询。选择**编写查询以指定要传输的数据**选项 ![指定表复制或查询](../Images/57500c03b9d76546701d81ce0f41fa0e.png)

在下一个屏幕上输入列出所有列的查询并添加静态列。 ![查询屏幕](../Images/dde7f96fdd7b03006d177e59731626bc.png)

在 Next 屏幕上，您将需要选择 Destination 表，否则它将默认创建一个名为*Query*的新表。您应该可以从下拉列表中进行选择。只要您使用相同的名称为额外的列添加别名，它就应该正确映射。如果需要，您可以在此处进入并编辑映射。 ![目的地](../Images/ffa9695c8dabc1ddddabd2c239f49d69.png)

然后，您可以保存 SSIS 包，它将从查询中获取源。

或者，如果您已经创建了没有额外列的 SSIS 包，您可以进入数据流并将 OLE DB 源中的**数据访问模式**更改为 SQL 命令而不是表或视图。在此处添加您的查询。

![在此处输入图像描述](../Images/1a314938abe1ca2cc2a08572c3536c9c.png)

然后，您可以进入数据流中 OLE DB Desitination 的属性并映射新列。您还可以通过添加派生列任务并将静态信息放在这里然后映射，将派生列添加为@DominicGoulet。如果您也想看到该解决方案，请告诉我。

# php - 过滤要在集合字段中显示的项目

> ID：12263869
> 
> 赞同：0
> 
> 时间：2012-09-04T12:51:10.023
> 
> 标签：php, symfony, symfony-forms

我有一个使用此类类型的表单：

```
class DespesasContainerType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('despesas', 'collection', array(
                'type' => new DespesasFamiliasType(),
                'by_reference' => false,
            ))
        ;
    }

    // ...
} 
```

这样它会显示`despesas`对象属性中的所有项目。

有没有办法过滤要使用的项目？类似于字段类型`query_builder`上的选项。`entity`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:40:35.627

FormTypeInterface 没有办法，但是您可以在将它传递给 Form 之前过滤这个集合。

另一个棘手的提示：

在您的实体上定义一个公共 getter `getFilteredDespeas`，它返回过滤后的 despeas 列表。在您的表单中，只需调用该字段 `filteredDespeas`而不是`despeas`. 这涉及您通过向`setFilteredDespeas`您的实体添加公共或任何其他方式来专门管理表单绑定......

# c# - 非常奇怪 - 读取“动态”COM 对象的简单属性时线程挂起

> ID：12263873
> 
> 赞同：2
> 
> 时间：2012-09-04T12:51:29.780
> 
> 标签：c#, c#-4.0, com

我有一个非常奇怪的情况，我以前从未见过这样的事情。

我正在使用第三方应用程序的COM接口与程序进行通信。它是进程内 COM 服务器。我使用动态类型来访问目标应用程序的对象模型。

```
dynamic app = Activator.CreateInstance(Type.GetTypeFromProgID("SomeProgId")); 
```

我使用该`app`对象来获取应用程序的其他`dynamic`对象。其中一个对象代表相当大的数组，其中的元素具有许多属性。我遍历这个数组的所有元素，并读取它们的所有属性，即我在一个大循环中解析所述对象（执行几分钟）。

问题如下：有时，假设十次尝试，线程在读取其中一个属性时“挂起”（每次都不同）：

```
string someString = app.SomeArrayObject.Get(i).SomeStringProperty; 
```

我使用后台工作人员来执行此操作，它只是挂在上述任务上。快速说明：上面的语句是一行简化，实际上我一次访问一个级别的对象（“每个语句中只有一个点”），所以它实际上挂在读取`SomeStringProperty`属性上。不会抛出异常或任何东西，只是无限期地挂起。我注意到`The thread '<No Name>' (0x1240) has exited with code 0 (0x0).`在此之前该消息已发布在调试器的输出窗口中，因此我相信某些线程会意外终止（尽管没有记录异常！）。当我中断调试时，调用堆栈实际上是无用的，因为在这种情况下（在 COM 对象内部）它的使用非常有限。

我不知道为什么会这样，也不知道这怎么可能。读取简单字符串属性会导致永久挂起。你有什么想法？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:56:50.717

据透露，COM 服务器被注册为支持 MTA，但实际上只为 STA 模式设计。该框架假设可以在 MTA 模式下使用它（因为注册表中的相应注册条目表明支持 MTA），并且可能正在定期创建一些导致异常的后台线程。将线程模式设置为 STA，或者将注册表中的 COM 服务器参数更改为仅报告 STA，解决了这个神秘的随机崩溃问题。

# mysql - 如何在mysql中获取两个日期之间的数据？

> ID：12263878
> 
> 赞同：-3
> 
> 时间：2012-09-04T12:51:41.507
> 
> 标签：mysql

表字段结构：

```
id fdate tdate name
1 2012-07-07 2012-07-30
2 2012-08-07 2012-09-30
3 2012-07-17 2012-08-30 
```

这里

fdate--->表中的一个字段 tdate--->表中的另一个字段

我将传递两个值，例如`2012-07-07`和`2012-09-30`

我需要上述范围的输出：

你必须像下面这样检查条件 `fdate between`2012-07-07 `and`2012-09-30 `and tdate between`2012-07-07 `and`2012-09-30 这样

预期输出：

```
month  Days
07     43
08     53
09     30 
```

编辑：根据作者的评论，问题是 - 我如何计算所有天数并在传递日期范围并将其与表中的数据进行比较时显示按月分组的总数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:18:14.817

我知道这不会给你你想要的确切结果，但我认为它至少会帮助你朝着正确的方向前进：

```
mysql> create table dateTest (id int(2), fdate date, tdate date);
Query OK, 0 rows affected (0.04 sec)

mysql> insert into dateTest values(1, '2012-07-07', '2012-07-30');
Query OK, 1 row affected (0.00 sec)

mysql> insert into dateTest values(1, '2012-08-07', '2012-09-30');
Query OK, 1 row affected (0.00 sec)

mysql> insert into dateTest values(1, '2012-07-17', '2012-08-30');
Query OK, 1 row affected (0.00 sec)

mysql> select month(tdate) as month, datediff(tdate, fdate) as tally from dateTest group by month(fdate), month(tdate);
+-------+-------+
| month | tally |
+-------+-------+
|     7 |    23 |
|     8 |    44 |
|     9 |    54 |
+-------+-------+
3 rows in set (0.00 sec) 
```

如您所见，当我按 fdate 分组时，它正在跳过中间月份，但这对您来说是朝着正确方向迈出的一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:00:09.397

看看 MySQL 中的 TIMESTAMPDIFF() 函数。

这允许您做的是传递两个 TIMESTAMP 或 DATETIME 值（甚至是 MySQL 将自动转换的 DATE）以及您想要基于差异的时间单位。

您可以在第一个参数中指定 MONTH 作为单位：

```
mysql>SELECT TIMESTAMPDIFF(MONTH, '2012-05-05', '2012-06-04')
-- Outputs: 1

mysql> SELECT TIMESTAMPDIFF(YEAR,'2002-05-01','2001-01-01');
        -> -1
mysql> SELECT TIMESTAMPDIFF(MINUTE,'2003-02-01','2003-05-01 12:05:55');
        -> 128885 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T13:03:17.363

你的问题虽然不清楚。但我有这个给你。

您需要使用 php 从 MySQL 表中获取数据。然后你可以在那里计算日期差异。

您可以参考这个 stackoverflow 问题**[如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)**以及关于[http://php.net/manual/en/function.date-diff.php](http://php.net/manual/en/function.date-diff.php)`date_diff`的官方 php 文档

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-04T12:53:51.690

您可以在我的 sql 中使用 between 子句：

```
 select * from tbl where datetime between '2012-07-07' and '2012-09-30'; 
```

举个例子

# java - 将内容从数据库加载到 TreeTable

> ID：12263880
> 
> 赞同：3
> 
> 时间：2012-09-04T12:51:46.327
> 
> 标签：java, jsf, jsf-2, primefaces, treetable

Primefaces TreeTable 节点似乎以相反的方式工作。

你创建了一个父母，然后你创建了一个孩子，然后你告诉孩子它属于哪个父母。父母应该了解他们的孩子，而不是相反。

所以......我的问题是：

我需要从我的数据库（祖父母、父母、孩子和孙子）中加载未定义的数据量。

如何动态地将它们加载到 TreeTable 中？我想不出在我的 for-each 中创建 TreeNodes 并设置它的父母的方法。

任何人都可以给我和想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:34:15.300

我还没有测试过这个解决方案，但我认为它应该可以工作。primefaces 展示中的示例都是硬编码的。要使其动态化，您必须使用数组。
例如下面的硬编码代码部分：

```
 TreeNode documents = new DefaultTreeNode(new Document("Documents", "-", "Folder"), root);  
 TreeNode pictures = new DefaultTreeNode(new Document("Pictures", "-", "Folder"), root);  
 TreeNode music = new DefaultTreeNode(new Document("Music", "-", "Folder"), root); 
```

可以替换为：

```
 Map<String, TreeNode> rootNodes = new HashMap<String, TreeNode>();

 //Retrieve the list of root Nodes. eg Tables in the database.
 for(Table table : databaseTables){

    //table.getTableName() will be the name of the node, it could be something like "music" or "documents"
    rootNodes.add(table.getTableName(), new DefaultTreeNode(table.getTableName(), new Document......, root);
 } 
```

我将它们添加到地图的原因是，如果您想引用它们，可以使用密钥作为参考。现在如果您想将节点添加到图片节点，例如

```
 //Create a new map
 Map<String, TreeNode> pictureNodes = new HashMap<String, TreeNode>();

 //now loop through your picture objects
for(picture : pictures){
    pictureNode.add(new DefaultTreeNode(picture.getName(), ......., root.get("pictures"));
} 
```

使用此方法，您可以递归循环尽可能多的层次结构。我无法测试这段代码（只是记事本++），因为我目前在办公室。但是试试看，如果你仍然卡住，我可以在几个小时后回家后做一些更详细的事情。

# java - Android日期时区问题

> ID：12263882
> 
> 赞同：1
> 
> 时间：2012-09-04T12:51:50.893
> 
> 标签：java, android, date, timezone

一个）。我有 3 个字符串代表日期、时间和时区；前任。：

```
String date = "2012-09-04";
String time = "01:30:17";
String timeZone = "UTC"; 
```

我想使用这些字符串创建一个日期。

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss z");
Date createdDate = formatter.parse(date + " " + time + " " + timeZone); 
```

不起作用 - 我收到消息“无法解析的日期”。

乙）。如何获取特定时区的 Android 设备日期？我找到了一种将当前时间转换为例如 UTC 时区的方法：

```
Calendar cldr = Calendar.getInstance();
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
String dateInUTCTimeZone = sdf.format(cldr.getTime()); 
```

但我希望结果是一个 Date 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:26:53.177

字符串“UTC”不是日期解析器可以识别的。如果您需要使用此常量来定义 UTC，那么以下日期格式应该适合您

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss 'UTC'"); 
```

但我强烈建议你使用 rfc3990 标准：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'"); 
```

然后将您的日期表示为以下字符串 (2012-09-04T13:24:59Z)。

最后，如果要将 UTC 日期表示为某个时区，请在格式化之前使用以下内容：

```
sdf.setTimeZone(TimeZone.getDefault()); //Choose the TimeZone you need 
```

# perl - Perl Net::Appliance::Session 等待？

> ID：12263883
> 
> 赞同：1
> 
> 时间：2012-09-04T12:51:55.677
> 
> 标签：perl

我对 Net::Appliance::Session 有疑问。我创建了一个会话，执行了我的命令。执行后它会提示我一些问题（是/否）。我想回答它，但没有找到办法。下面你可以看到我的试验：

```
$session->cmd($command);
$session->waitfor(Match=>'/.*yes*/');
$session->print("no");
$session->waitfor(Match=>'');
$session->print("y"); 
```

我不知道问题出在哪里。根据 CPAN 文档 Net::Telnet 有方法等待。但是 Session 文档告诉我们可以使用 waitfor()。另一件事是“cmd”方法有一个成员 Match，其中包括 waitfor() 的所有功能。所以我改变了我的代码，如下所示：

```
$session->cmd($command, Match=>'/.*yes*/');
$session->print("no"); 
```

执行此报告以下错误：

> /usr/lib/perl5/vendor_perl/5.8.8/Net/Appliance/Session.pm 第 245 行的哈希分配中的奇数个元素。

有什么想法我该怎么做？为什么我会收到此错误消息？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:41:07.817

来自[meta::cpan的](https://metacpan.org/)[Net::Appliance::Session](https://metacpan.org/module/Net%3a%3aAppliance%3a%3aSession)页面

要处理更复杂的交互，例如提示确认或可选参数的命令，您应该使用宏。这些在短语手册中设置并通过`$s->macro($name)`方法调用发出。有关详细信息，请参阅[短语手册](https://metacpan.org/module/Net%3a%3aCLI%3a%3aInteract%3a%3aPhrasebook)和[食谱](https://metacpan.org/module/Net%3a%3aCLI%3a%3aInteract%3a%3aManual%3a%3aCookbook)手册页。

因此，您在短语手册中设置了一个宏（脚本调用和响应），然后告诉您的会话使用该宏。

# asp.net - Webmatrix 2：存储静态值

> ID：12263892
> 
> 赞同：4
> 
> 时间：2012-09-04T12:52:43.140
> 
> 标签：asp.net, webmatrix, webmatrix-2

**哪里是存储静态值的最佳位置。我将如何访问它。**

**我希望能够从任何页面访问静态值。但只需要在一个地方定义它们。**

例如“电子邮件”和“电话号码”

我已经尝试过`Session`和`PageData`，并在我的标题中定义变量（所有页面都使用），但这不起作用。

部分是在页面之后初始化的，所以它要么根本不起作用，要么在第一次加载时不起作用。

例如第一次加载：

> 已加载页面 <- 尝试访问变量。未初始化。
> 
> 标头部分加载<-变量初始化。

结果。页面不**显示**变量。

我已经考虑将它存储在配置文件中。但我不知道如何从 Webmatrix 2 访问它。我可以创建一个 txt/ini 文件或其他东西，但解析文件肯定不是最好的方法。- 我已经尝试过这个，它似乎不像在 mvc3 (config) 中那样有效，而且对于每个请求，txt 文件都不实用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T20:19:06.390

对于“静态”，如果您的意思是在应用程序的整个生命周期内不会更改的值，您通常会使用[HelperPage.App 属性](http://msdn.microsoft.com/en-us/library/system.web.webpages.helperpage.app%28v=vs.111%29)进行存储。它基于`dynamic`类型，因此您可以创建任意属性：

```
App.Email = "someone@somewhere.com"; 
```

或者，您可以将更传统的名称/值收集方法与[AppState](http://msdn.microsoft.com/en-us/library/system.web.webpages.webpageexecutingbase.appstate%28v=vs.111%29)一起使用：

```
AppState["email"] = "someone@somewhere.com"; 
```

但是，如果您的“静态”变量是特定于用户的，则应使用 Session ，因为它的范围仅限于用户。或者，如果您想永久存储它们，请使用数据库。

您可以在 _PageStart.cshtml（可能需要创建）或 global.asax 文件的 Session_Start 事件中设置会话值，然后在您想要的任何部分/视图中访问它们。

# android - 循环的 Horizo ntalScrollView

> ID：12263893
> 
> 赞同：0
> 
> 时间：2012-09-04T12:52:50.963
> 
> 标签：android, view, android-linearlayout, android-view, horizontalscrollview

我想在 Horizo​​ntallScrollView 中循环视图。

例子：

```
HorizontalScrollView holding 5 Views 
When swiping through the Views the behaivior should be like this:
1 -> 2 -> 3 -> 4 -> 5 -> 1 -> 2 . . . 
Or backwards: 
1 <- 5 <- 4 <- 3 . . . 
```

我正在寻找一个很好的方法来实现它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:46:57.860

这对于`HorizontalScrollView`. 一个正确编写的`PagerAdapter`——一个返回非常高的值`getCount()`并返回相同的 N 个视图的——可能能够用`ViewPager`. 我不会使用任何内置的基于片段的`PagerAdapter`实现，因为它们可能会对您的视图回收会违反的适配器行为做出一些假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T16:04:02.553

好吧，即使问题很老，它也值得回答:)

简单地获取 scrollViews 的宽度或高度，并获取在 x/y 中滚动的量。

```
HorizontalScrollView scroller;
int scrollerWidth = scroller.getMeasuredWidth();
int scrollX = scroller.getScrollX();
int activeViewCount = 0;
activeViewCount = (activeViewCount > 0) ? activeViewCount - 1 : 0;
scroller.smoothScrollTo(activeViewCount * scrollerWidth, 0);

if (scrollX >= scrollerWidth) {
   scroller.scrollTo(0, 0);
} 
```

这将形成一个连续循环。

# c# - 检查是否重定向到默认页面

> ID：12263895
> 
> 赞同：-1
> 
> 时间：2012-09-04T12:53:09.957
> 
> 标签：c#, asp.net, .net

如果发生“重定向”到“默认文档”，如何使用 C# 检查？例如，在浏览器中输入 URL：**mysite.com/**。当我在服务器上检查`HttpContext.Current.Request.Url.AbsoluteUri`时，我收到**mysite.com/default.aspx** ...

如何获取用户在其浏览器中的确切 URL？
谢谢

**编辑：**关于需求的一些问题后，我会提供更多细节。我有一个带有 default.aspx 的页面，里面有 iframe。iframe src 不是同源（default.aspx 是http，iframe 内容是https）。在服务器端，我需要将查询字符串参数设置为 iframe 的 src 以包含用户在浏览器中的确切 URL。我需要它才能在 iframe 客户端设置 parent.location = parentURL + '#myparam'。
目前一切工作正常，除非在不提供文件名的情况下对域名提出请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:58:32.443

您输入了 mysite.com/。

你会得到 mysite.com/default.aspx ...

因为您已将 default.aspx 设置为站点中的默认 / 启动页面。浏览器总是重定向到默认页面。我认为当我们键入`mysite.com`asp.net 时会自动在 URL 中附加默认页面，所以当我们使用时，`Request.Url`我们会得到`mysite.com/default.aspx`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:04:27.123

试试 HttpContext.Current.Request.RawUrl

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T14:00:52.907

看了你的意图`IFrame`，也许你正在寻找 Framset Script 来确定重定向？

```
if (parent.location.href==window.location.href) 

    {
        // you re-direction codes...
    } 
```

**编辑：** 给出不同的**HTTP**和**HTTPS**，很可能是[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)启动了。有一种解决方法，您可以使用`PostMessage`跨站点界面。

其他选项将由 Server(IIS) 管理，以便将 http/https url 请求设置为默认文档，这样您就无需更改客户端脚本来进行此类复杂处理。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-04T13:09:07.200

你应该`'Default.aspx' page`从你的`IIS Default document list`. 然后您将获得用户输入的确切 URL。

# joomla2.5 - Joomla 2.5.6：扩展 Youtube 频道视频和他们的评论

> ID：12263896
> 
> 赞同：1
> 
> 时间：2012-09-04T12:53:12.430
> 
> 标签：joomla2.5

我搜索了 Joomla 2.5.6: extension to poll youtube 频道视频及其评论，但如果有人知道，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:57:30.237

在 joomla 论坛上得到了它们，但都是商业的，请检查这些是否可以帮助你[http://extensions.joomla.org/search?q=poll+youtube](http://extensions.joomla.org/search?q=poll%20youtube)

# ruby - 在不同的文件中设置断点无效

> ID：12263900
> 
> 赞同：6
> 
> 时间：2012-09-04T12:53:34.543
> 
> 标签：ruby, debugging, breakpoints

ruby 调试器不会在我在与执行开始时不同的文件中设置的断点处停止。例如，考虑这两个文件*foo.rb*：

```
# foo.rb
class Foo
  def bar
    puts "baz"
  end
end 
```

和*main.rb*：

```
# main.rb
require './foo'
Foo.new.bar 
```

我开始使用`ruby -r debug .\main.rb`. 现在，当我尝试使用 在另一个文件的特定行上设置断点时`b ./foo.rb:4`，我收到消息*Set breakpoint 1 at foo.rb:4*，但是当 I 时`cont`，程序执行到最后，并且调试器永远不会停止。但是，如果我在*main.rb*中的一行（例如`b ./main.rb:3`）或方法（例如`b Foo.bar`）中中断，则调试器会按预期停止。

为什么调试器不会在主文件以外的文件中的断点处停止？

*更新：*我已经在 Windows 7 和 OS X 10.8 上使用 Ruby 1.9.3 进行了尝试；它在这两种环境中都不起作用。

我也刚刚意识到调试器在脚本运行到结束后退出：我开始调试*main.rb*， use `cont`，然后*baz*打印在控制台上，我又回到了 shell 中。这是预期的行为，还是调试器可能已经崩溃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:02:43.060

哇，这很奇怪。不确定这是否有帮助，但也许你可以这样做。使用 next 跳过 require 以便加载 Foo 然后

```
b Foo:bar 
```

至少应该在酒吧打破

# c# - 是否可以将 ASP 面板中的所有内容导出为 .DOC、.XLS

> ID：12263902
> 
> 赞同：1
> 
> 时间：2012-09-04T12:53:35.883
> 
> 标签：c#, asp.net, export

在遇到麻烦之前，我想和你确认几件事。我正在一个包含大量控件的仪表板项目中工作。一切都将被插入到单个面板控件中。控件将是表格、网格、图像、图表、一些 jquery 插件。

我想为 word、excel、pdf 提供导出选项。是否可以在 asp.net 中将具有所有控件的单个面板导出到 word 文档。

说出你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:56:53.780

是的，其实很简单。这是一个将 Gridview 导出到 Excel 的示例。你可以用任何控件做同样的事情。代替 this.gvRequests.RenderControl，替换为您的 Panel control.RenderControl。玩弄它，看看它是怎么回事。

```
 //Export the datagrid to Excel
        System.IO.StringWriter sw = new System.IO.StringWriter();
        HtmlTextWriter htw = new HtmlTextWriter(sw);

        Response.AddHeader("content-disposition", "attachment; filename=SearchResults.xls");
        Response.ClearContent();

        Response.ContentType = "application/vnd.ms-excel";
        this.gvRequests.RenderControl(htw);
        Response.Write(sw.ToString());
        Response.Flush();
        Response.End(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:39:37.407

您可以使用 Javascript html2Canvas 制作屏幕截图，例如它根据页面中的信息构建屏幕，我不确定，但您可以将此信息发送到服务器，创建 PDF 然后将其发送到浏览器（理论上至少可能）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T13:29:23.710

如果您有任何动态客户端代码，那么您不能这样做。

无法将文档客户端的一部分转换为 .doc（最接近您可以做的是打印到 pdf，它没有那么有用）

通常，您会通过使用 aspose 之类的库生成 .doc 来执行类似服务器端的操作 - 但如果您要展示涉及 jquery 插件的内容，那么您自己做这将是一件非常痛苦的事情。

要获得您想要的结果，您可能不得不咬紧牙关，在服务器端重新创建所有内容以生成客户端可以下载的 .doc。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-24T08:16:11.920

是的，

> 静态公共无效 RenderToExcel（面板 panelReport1，面板 panelReport2，面板 panelReport3，字符串 strFileName）{ HttpContext.Current.Response.Clear(); 字符串附件=“附件；文件名=”+ strFileName+“.xls”；//HttpContext.Current.Response.AddHeader("content-disposition", attachment); HttpContext.Current.Response.ContentType = "应用程序/vnd.ms-excel"; HttpContext.Current.Response.AddHeader("content-disposition", attachment); HttpContext.Current.Response.Charset = ""; //HttpContext.Current.Response.ContentType = "application/vnd.xls";
> 
> ```
>  //HttpContext.Current.Response.ContentEncoding = System.Text.Encoding.GetEncoding(1252);
>     StringWriter sw = new StringWriter();
>     HtmlTextWriter htw = new HtmlTextWriter(sw);
>     panelReport1.RenderControl(htw);
>     if (panelReport2 != null)
>     {
>         panelReport2.RenderControl(htw);
>         if (panelReport3 != null)
>             panelReport3.RenderControl(htw);
>     }
>     HttpContext.Current.Response.Write(sw.ToString());
>     Response.End();
> 
> } 
> ```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-04T13:31:36.690

您可以在代码中使用 WebBrowser 控制服务器端在服务器内存中请求您自己的页面并以这种方式生成图像，或者使用这个库（更简单）[http://www.websitesscreenshot.com/](http://www.websitesscreenshot.com/)

编辑

经过一番思考，你想要的东西已经可用了！

用户转到网页，按 ALT + 打印屏幕，转到 Word 或 Excel，然后按 CTRL + P !!! 工作完成，一切都内置在 \0/ 早点回家 :)

# android - 搜索建议安卓

> ID：12263903
> 
> 赞同：1
> 
> 时间：2012-09-04T12:53:37.910
> 
> 标签：android, search, android-contentprovider

我正在使用`ContentProvider`搜索建议，但在处理建议点击时遇到问题：我解释搜索效果很好，但是当我点击建议时，我会转到搜索活动，但没有任何内容，所以我该如何处理点击建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:12:45.387

您的 XML\searchable.xml （或等效）应包括

```
android:searchSuggestIntentAction = android.intent.action.VIEW 
```

否则不会调用您的意图。

[http://developer.android.com/guide/topics/search/searchable-config.html](http://developer.android.com/guide/topics/search/searchable-config.html)将此字段定义为：

> 当用户点击自定义搜索建议（例如“android.intent.action.VIEW”）时使用的默认意图操作。如果所选建议未覆盖此值（通过 SUGGEST_COLUMN_INTENT_ACTION 列），则当用户单击建议时，此值将放置在 Intent 的操作字段中。

# unit-testing - 使用 monodroid 和 Visual Studio 2010 进行单元测试

> ID：12263908
> 
> 赞同：1
> 
> 时间：2012-09-04T12:53:49.913
> 
> 标签：unit-testing, xamarin.android

有没有人设法在安卓设备上运行用 vs2010 创建的单元测试？使用 monodrod 时，是否有其他解决方案可以对 android 应用程序进行单元测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:38:16.140

您可以查看[Andr.Unit](https://github.com/spouliot/Andr.Unit)库，它为 NUnit 测试提供了一个运行器，可以在模拟器或 Android 设备上运行。还有一个为 Visual Studio 测试提供支持的[monodroid-unittest库。](https://bitbucket.org/mayastudios/monodroid-unittest/wiki/Home)

# java - 春季WebFlow2。我应该使用 Ajax 还是转换？

> ID：12263912
> 
> 赞同：0
> 
> 时间：2012-09-04T12:54:06.580
> 
> 标签：java, ajax, spring, spring-webflow

Spring WebFlow2 问题。我应该使用 Ajax 还是转换？

我有一个屏幕，我的用户必须填写一些数据。

用户看到许多单选按钮，并且基于选择的单选按钮，他必须从下拉列表中选择一个商店。下拉列表中的值会根据选择的单选按钮而变化。

每次用户选择单选按钮以重新加载下拉列表中的值时，我是否应该对服务器进行 ajax 调用？

我应该使用 Spring WebFlow2 转换来重新加载下拉列表吗？

或者你知道其他更好的方法吗？我想听听一些选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:25:03.537

大概下拉列表中的项目不是静态的？如果是这样，您应该首先加载它们并使用javascript显示和隐藏相应的下拉单选按钮。

您可以对具有 renderFragment 的 Spring Webflow 转换进行 Ajax 调用，以便页面只需替换下拉 div。我使用 renderFragments 来加载瓦片，但你并没有被瓦片所束缚，我相信你可以使用其他做模板的框架。

像这样的东西：

```
<transition on="radioClick">
  <evaluate expression="formAction.bind" />
  <evaluate expression="formAction.getItems" />
  <render fragments="dropdownCombo" />
</transition> 
```

这是您要求的javascript：

```
function showstuff(boxid){
   document.getElementById(boxid).style.visibility="visible";
}

function hidestuff(boxid){
   document.getElementById(boxid).style.visibility="hidden";
} 
```

# image-processing - 成像插值 - 创建中间图像？

> ID：12263915
> 
> 赞同：3
> 
> 时间：2012-09-04T12:54:15.600
> 
> 标签：image-processing, opencv, camera, interpolation

我们正在就图像处理进行辩论/讨论，想知道是否有人可以提供帮助？

是否有可能在 0 度（正面）和另一个 45 度的对象的图片，并插入这两个图像以创建 22.5 度的主体的中间图像？

以前有过这样的事情吗？我很确定可以做到，我的同事说不行。

谢谢，

凯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:00:20.597

它是为了渲染目的而完成的，为了预测图像的部分而不是渲染整个图像。我只知道学术实现，在特定产品中没有。

然而，这种方法存在一个固有问题 - 漏洞或不完整的信息

如果显示对象的几何形状与简单的球体不同，则它的某些部分可能在 0 度时也不可见。也不在45度。这应该在 22.5 度时可见，但您无法对其进行插值，因为它们被其他几何图形遮挡，因此您只是错过了这些视觉信息。

只需旋转一个重要的对象，例如茶杯或甜甜圈，您就应该能够明白我的意思。

在处理具有多个对象的复杂场景时，问题会变得更糟。

还有几种方法可以解决这个问题，比如使用多个移位的摄像头，尝试从视觉上检测孔洞并相应地调整摄像头的数量和位置。但是没有一种方法可以保证完全没有伪影。

# forms - 使用 Play 2 处理很长的表单

> ID：12263918
> 
> 赞同：4
> 
> 时间：2012-09-04T12:54:31.247
> 
> 标签：forms, scala, playframework-2.0

我的应用程序包含 18 个字段的大表单。它使用标准表单映射进行处理，如下所示：

```
val bigForm = Form(
  mapping(
    "id"    -> of[ObjectId],
    "title" -> text,
    // And another 16 fields...
    ...
  )
) 
```

一切都很好，但今天我决定再添加一个字段，问题来了——`mapping`不能接受超过 18 个参数。

那我该怎么办？我正在考虑将一些字段组合到结构中，但是额外的结构需要额外的格式化程序、JSON 序列化器和反序列化器，工作量太大。我正在寻找一个通用的解决方案，未来可能会出现更多的领域。

我正在考虑的另一个解决方案是手动处理表单，没有`Form`'s.

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:35:52.823

您可以使用嵌套映射，例如

```
val bigForm = Form(
  mapping(
    "id"    -> of[ObjectId],
    "title" -> text,
    "general" -> mapping(
      ...
    )(GeneralInfo.apply)(GeneralInfo.unapply),
    "advanced" -> mapping(
      ...
    )(AdvancedInfo.apply)(AdvancedInfo.unapply)
  )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:40:24.430

另一种可能性是使用视图对象并仅更新提交的部分（例如，通过单独的表单或 AJAX）：

```
val generalForm = Form(
  mapping(
    "title" -> text,
    ...
  )
)

def updateGeneral(id: ObjectId) = Action { implicit request =>
  MyObject.findById(id).map { myObj =>
    generalForm.bindFromRequest.fold(
      fail => BadRequest(...),
      form => {
        val newObj = myObj.copy(title = form.title, ...)
        MyObject.save(newObj)
        Ok(...)
      }
    )
  }.getOrElse(NotFound)
} 
```

# c++ - 如何正确销毁放置在堆中的窗口？

> ID：12263920
> 
> 赞同：1
> 
> 时间：2012-09-04T12:54:37.440
> 
> 标签：c++, window, wtl

我有一个遗留代码。代码是这样工作的：在一个`Event1`事件发生之后，它`CWindowImpl`在堆中创建一个窗口对象（继承自类）。发生后，`Event2`它会应用在窗口中所做的更改，通过调用将其关闭并通过调用`DestroyWindow()`释放堆中的内存`delete`。

此代码有问题，因为它在处理此窗口的所有消息之前删除了窗口对象。如何确定何时调用`delete`window 对象是安全的？

我发现的唯一解决方案是覆盖`OnFinalMessage`并在那里调用`delete this`。我不喜欢它，因为它必须保证对象只在堆中创建。有更好的想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:17:28.533

完成后`DestroyWindow`，您已经销毁了窗口的句柄，因此`delete`在窗口类指针上使用它是安全的。届时不会有迟到的消息到达。

`OnFinalMessage`来自内部 WTL 的`WM_NCDESTROY`消息处理程序。

# oracle - pl/sql：函数

> ID：12263922
> 
> 赞同：-1
> 
> 时间：2012-09-04T12:54:39.293
> 
> 标签：oracle, function, plsql

我在excel表中有三列值

```
 A: # of unsuccessful transfers to CCR  (CTI) =11986
  B: # of calls NOT wrapped =8585
  C: # of wrapped calls= 15283 
```

三列的总和是来电数（CTI）= 37017（这是已打包的呼叫数 + 到 CCR 的不成功转移数（CTI）的总和 + 未打包的呼叫数）

我还计算了未计入呼叫的数量（这是已打包呼叫数的减法 - 向 CCR (CTI) 的不成功转移数 - 未打包的呼叫数）

所以我的不明电话数 = 1163

现在我必须找出未计入电话的百分比，所以我除以 37017/1163

所以我的百分比是 3%，理想情况下应该是 0%，我如何在 oracle 中找出 3% 中有多少百分比落在 A、B 或 C 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:25:53.197

> ABC 来自数据库 qry，来源相同，但 AB 和 C 的每个 qry 都有不同的过滤器

这可能允许您在任何 A、B 或 C 都没有拾取的行中发现一个模式，尽管您仍然需要计算出您期望每行（或行模式）的三个查询中的哪一个被接走，以及为什么他们被错过了。

由于具有附加过滤器的三个查询的计数总和低于没有这些过滤器的查询的计数，因此过滤器本身似乎存在差距。如果我不得不猜测，那么我首先要寻找的是对`null`值的错误处理，试图将它们等同起来[（因为`null`既不等于也不等于任何东西，甚至它本身）](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements005.htm#i59110)。但这显然是推测，如果没有看到过滤器并且不知道哪些列可以为空，这并不是很有帮助。

您可以隔离未显示的 1163 行，方法是使用[`minus`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/queries004.htm)查找“total”查询拾取的行，并且不包含在任何产生 A、B 和 C 的行中；就像是：

```
select *
from xx_new.xx_cti_call_details@appsread.prd.com
where dealer_name = 'XYG'
and TRUNC(CREATION_DATE) BETWEEN '01-JUL-2012' AND '31-JUL-2012'
minus
select *
from xx_new.xx_cti_call_details@appsread.prd.com
where dealer_name = 'XYG'
and TRUNC(CREATION_DATE) BETWEEN '01-JUL-2012' AND '31-JUL-2012'
and <additional filters for A>
minus
select *
from xx_new.xx_cti_call_details@appsread.prd.com
where dealer_name = 'XYG'
and TRUNC(CREATION_DATE) BETWEEN '01-JUL-2012' AND '31-JUL-2012'
and <additional filters for B>
minus
select *
from xx_new.xx_cti_call_details@appsread.prd.com
where dealer_name = 'XYG'
and TRUNC(CREATION_DATE) BETWEEN '01-JUL-2012' AND '31-JUL-2012'
and <additional filters for C> 
```

不过，我很好奇您`distinct`在初始查询中是否有 a，因为它表明您正在计算 switch 调用是来自而不是调用本身。这也可能意味着计数不应该相加——尽管在这种情况下，我可能期望 A+B+C 比简单的要大，因为可能存在重叠——并且`select *`实际上可能返回超过 1163 行；在这种情况下，您可能只想选择您认为可能有问题的列。

顺便说一句，如果`creation_date`被索引，那么你可能会得到更好的性能`where creation_date >= date '2012-07-01' and creation_date < date '2012-08-01'`，因为`trunk()`函数会阻止索引被使用。不过对你来说可能不是问题。

# c++ - 类析构函数和指针释放

> ID：12263923
> 
> 赞同：1
> 
> 时间：2012-09-04T12:54:39.163
> 
> 标签：c++, memory, pointers, destructor

我正在编写一个类（virtual_flight_runtime_environment），它主要是非静态的，除了一个用于 Win32 线程的静态函数，将其用作其函数。该类声明了struct simaircraftdata* aircraftdata（一个数据结构），并调用'aircraftdata = new aircraftdata;' 在构造函数中（公共：virtual_flight_runtime_environment()）。

我的问题是关于析构函数和内存释放。我这样写了析构函数：

```
 ~virtual_flight_runtime_environment(void) {
         /*..Other code, i.e. closing win32 handles, etc.*/
        delete aircraftdata;
    } 
```

现在，该类在另一个函数（.Net 后台工作程序的 DoWork 函数）中声明，如下所示：

```
 virtual_flight_runtime_environment* this_environment = new virtual_flight_runtime_environment; 
```

就在函数结束之前，我调用了“delete this_environment;”。紧接着，“this_environment”将超出范围，并且应该调用析构函数。

它是否正确？我确实注意到随着时间的推移内存使用量持续增加，我想知道我是否做错了什么。对指针调用 delete 只是使其成为空指针，还是在它的末尾解除分配数据？

任何意见，将不胜感激，

科林·比登卡普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:59:08.250

你几乎是正确的。

`delete this_environment`调用 的析构函数`virtual_flight_runtime_environment`。析构函数执行`delete aircraftdata`。

紧接着，实例占用的内存被`virtual_flight_runtime_environment`释放。

请注意，该`delete`语句不会将指针设置为`NULL`.

因此，鉴于问题中的信息，我认为您的代码没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:59:43.580

这看起来是正确的。在 this_environment 上调用 delete 将导致该类的析构函数在其内存被释放之前被调用。析构函数删除飞机数据。看起来正确。

您可能会考虑使用**auto_ptr**或 c++11 中的**unique_ptr来代替包含指向***飞机*数据的原始指针的成员变量， 这将确保在构造包含类时自动删除它。查一下，这里不是教它的地方，这只是一个建议，不是必需品。

 ****编辑：我也同意皮特贝克尔对这个问题的评论，即质疑这是否需要一个指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T13:18:37.653

程序中的删除与是否在任务管理器中直接可见之间没有直接联系，因为操作系统试图优化内存利用率。当您查看任务管理器时，您通常会看到应用程序的工作集大小，这是衡量应用程序请求的内存量但不一定是当前使用量的量度。

对于您的问题，是的，像您那样删除内存是 WTG，尽管正如其他人指出的那样，使用智能指针通常更好地处理内存以避免以后的麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T13:00:24.570

您确实应该明确调用“删除 this_environment”。否则，只有指针本身（存在于堆栈中）将被销毁。指向堆上的数据仍然存在。

另一种解决方案是简单地摆脱指针并声明您的变量：

```
virtual_flight_runtime_environment this_environment; 
```

这样，您的对象将直接存在于堆栈中，其生命周期将取决于声明它的范围 - 此时将自动调用析构函数，依次调用内部数据的删除。****

# c++ - 如何按值对 **boost::unordered_map** 进行排序并仅按该顺序返回键？

> ID：12263925
> 
> 赞同：1
> 
> 时间：2012-09-04T12:54:39.127
> 
> 标签：c++, boost

如何按值对**boost::unordered_map**进行排序并仅按该顺序返回键？我有像**boost::unordered_map**这样的地图，我需要只需要按 asc/desc 中的 int 值排序的枚举列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:23:44.690

`unordered_map`顾名思义，An本质上不能就地排序或排序。您可以将值对插入到`set`按值排序的 a 中并从那里获取键（使用 Boost.Range 使这些东西更容易）。我使用 a`std::set<T*>`来不支付复制对对象的成本。

```
#include <iostream>
#include <set>
#include <unordered_map>
#include <boost/range/adaptor/map.hpp>
#include <boost/range/adaptor/indirected.hpp>
#include <boost/range/adaptor/transformed.hpp>

struct compare_second{
  template<class Pair>
  bool operator()(Pair* lhs, Pair* rhs) const{
    return lhs->second < rhs->second;
  }
};

template<class T>
struct make_pointer{
  typedef T* result_type;
  T* operator()(T& v) const{ return &v; }
};

int main(){
  using namespace boost::adaptors;
  std::unordered_map<int, int> m{{0,4},{1,3},{2,2},{3,1},{4,0}};
  typedef std::unordered_map<int,int>::value_type pair_type;
  auto p = m | transformed(make_pointer<pair_type>());
  std::set<pair_type*, compare_second> value_ordered(p.begin(), p.end());
  for(auto x : value_ordered | indirected | map_keys)
    std::cout << x << " ";
} 
```

[活生生的例子。](http://liveworkspace.org/code/3728661e999cf016707fd01c256767c0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T01:06:18.483

您可以使用[Boost Multi-Index Library](http://www.boost.org/doc/libs/release/libs/multi_index/doc/index.html)。boost::multi_index_container 可以有有序状态和无序状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T13:22:33.677

最简单的方法是将值复制到向量中并按映射类型对其进行排序：

```
std::vector<value_type> values(std::begin(map), std::end(map));
boost::sort(boost::make_range(values),
    [](const value_type &x, const value_type &y) { return x.second < y.second; });
std::vector<key_type> keys;
boost::push_back(keys, boost::make_range(values) | boost::map_keys)); 
```

# asp.net-mvc-3 - RadioButtonFor 不绑定空值

> ID：12263926
> 
> 赞同：3
> 
> 时间：2012-09-04T12:54:47.103
> 
> 标签：asp.net-mvc-3

我有这个代码

```
@Html.RadioButtonFor(model => model.LivStato, 1, Model.LivStato == 1)
@Html.RadioButtonFor(model => model.LivStato, -1, Convert.ToString(Model.LivStato) == string.Empty) 
```

如果`Model.LivStato == 1`为真，则选中单选按钮。

我不明白为什么如果`Convert.ToString(Model.LivStato) == string.Empty`为真，则未选中单选按钮

我也试试这个

```
@Html.RadioButtonFor(model => model.LivStato, -1, !Model.LivStato.HasValue) 
```

但不工作。

在模型中：

```
public short? LivStato { get; set; } 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-27T02:36:06.850

**更新的答案**

*糟糕，如果null*单选按钮不是列表中的第一个，我的原始答案不起作用。正如@sohtimsso1970 所指出的，单选按钮会有一个选中的属性，即使值不为空，它通常也会被选中，*除非稍后在 DOM 中有另一个选中的单选按钮*，当然如果真/假绑定单选按钮低于空绑定单选按钮。

考虑到这一点，这里有一个更好的解决方案：

```
@{
    var dict = new Dictionary<string, object>();
    if (!Model.LivStato.HasValue) { dict.Add("checked", "checked"); }
}
<label>@Html.RadioButtonFor(model => model.LivStato, "", dict) Null</label>
<label>@Html.RadioButtonFor(model => model.LivStato, 1) +1</label>
<label>@Html.RadioButtonFor(model => model.LivStato, -1) -1</label> 
```

无论空绑定单选按钮在 DOM 上的哪个位置，这都会起作用，并且还会呈现正确的 HTML。

* * *

**原答案：**

使用以下单选按钮将绑定到*null*：

```
<%: Html.RadioButtonFor(model => model.LivStato, "", new { @checked = !Model.LiveStato.HasValue }) %> 
```

该`checked`属性是必需的，以便在 ViewModel 属性为空时正确检查单选按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T13:16:51.560

看看`HtmlHelper.RadioButtonFor`重载：没有人使用布尔第三个参数作为“如果值 == 某物的检查按钮”。第三个参数（当它存在时）仅用于 htmlAttributes。

[http://msdn.microsoft.com/en-us/library/ee830415%28v=vs.108%29](http://msdn.microsoft.com/en-us/library/ee830415%28v=vs.108%29)

如果您的 firstLine 有效，那只是因为您`1`用作第二个参数（`Model.LivStato == 1`不做任何事情）。

你可以试试（未经测试）

```
@Html.RadioButtonFor(model => model.LivStato, 1)
@Html.RadioButtonFor(model => model.LivStato, -1) 
```

并在您的控制器中将 -1 更改为 null 。

# matlab - 将循环从 Fortran 转换为 MATLAB

> ID：12263927
> 
> 赞同：0
> 
> 时间：2012-09-04T12:54:47.507
> 
> 标签：matlab, loops, fortran

我目前正在手动将代码从 Fortran 翻译到 MATLAB，但我不确定如何翻译其中的一部分。（整个代码实际上是一个 2,000 行的子程序。）代码如下。

```
C  Has series crossed neckline?
120        neckext=x(trough(peaknum-1))+
 *              dydx*real((t-trough(peaknum-1)))

        if(x(t).lt.neckext) goto 130
C      NO.  Here if series has not crossed neckline, nor new trough found
C           Check to see if new trough has been found.
        t=t+1
        if(t.ge.lastobs) goto 900
        if(x(t).lt.min) then
              min=x(t)
              mindate=t
              end if
        troughid=min*(1.0+cutoff)
        if(x(t).ge.troughid) goto 150
        goto 120

C      YES. Here if series crossed neckline before new trough found
130         dblcount=0
      if(poscount.ge.1) then
          DO 132 i=1,poscount
           if((enterdt(i)-2.le.t).and.(t.le.enterdt(i)+2)) then
           dblcount=dblcount+1
           end if    
132          continue
           if(dblcount.ge.1) then
C                write(30,2583) t,Cutnum
2583            format('DoubleCounting episode occurred at ',I5,
 *             ' with Cutoff = ',F3.1)
            goto 150
          end if
       end if 
```

我的问题是这部分代码：

```
 if(x(t).ge.troughid) goto 150
        goto 120 
```

当我在 MATLAB 中翻译这部分内容时，我正在编写如下内容：

```
if x(t,:)>=troughid
    t=marker;
    minimum=x(t,:);
end 
```

但是我不知道如何处理标签120。当我翻译它时，我是否再次写了那部分？因为据我了解，当我回到 120 时，代码将再次运行。谢谢！

编辑：作为对 Chris 关于标签 150 和 900 做什么的问题的回应，我将在此处发布它们。

```
150        t=marker
           min=x(t) 
```

这是针对标签 900 的。

```
C  Last observation found.  This iteration finished.
900        continue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:13:58.147

您可以包装代码的前半部分，直到`goto 120`循环`while`之后。然后，您可以在满足条件时跳出此 while 循环`if(x(t) .lt. neckext)`。例如，逻辑可能如下所示。请注意，我没有尝试将其全部转换为 MATLAB（这是您的工作！！），但希望它能让您入门。

```
% Has series crossed neckline?
neckext = x(trough(peaknum-1)) + dydx*real((t-trough(peaknum-1)));

if (x(t) < neckext)
    % Code below `goto 120` here...

else
    while (x(t) >= neckext)
        % Code above `goto 120` here...
    end 
end

% `goto 150` code here? 
```

我不太确定以上内容是否是您所需要的，因为没有完整的代码，我不知道应该对程序流程做什么`goto 150`和`goto 900`应该做什么（除了难以理解之外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:23:00.783

现在应该清楚了，Matlab 不包含“goto”命令的任何变体。核心 Matlab 命令集似乎是围绕“结构化编程”理念设计的。（如果我没记错我的 CS 古代历史，那是面向对象编程之前的一场大辩论。）维基百科[对结构化编程有很好的讨论](http://en.wikipedia.org/wiki/Structured_programming)。

在结构化编程之前的黑暗日子里，人们曾经对流程图非常兴奋，因为这是使用大量`goto`语句（现在通常称为意大利面条代码）可视化和理解一段代码的最简单方法之一。

我怀疑您将需要绘制整个子例程的流程图，然后决定哪些控制流构造最适合用于重新创建您的代码。如果是比较简单的图，那么你应该可以用`if`语句或`case`语句重新创建整个代码，虽然一系列的小辅助函数可能更优雅。如果它的结构更复杂，那么翻译可能需要更多的创造力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T23:40:14.607

Fortran 中几乎所有允许`goto`的 ' 都可以通过使用 // 构造转换`while`为MATLAB `break`。`continue`我编写了一个（未发布的）程序来自动`goto`从 Fortran 代码中删除 's，然后我使用我的程序 f2matlab 将代码转换为 MATLAB/Octave。

# android - 如何在不允许从未知来源安装的情况下将更新推送到预安装的应用程序

> ID：12263928
> 
> 赞同：2
> 
> 时间：2012-09-04T12:54:48.163
> 
> 标签：android, rom

我有一堆 Android 设备，这些设备将使用自定义 ROM 进行刷新并分发给客户。作为该 ROM 的一部分，将是一个与设备绑定的“支持”应用程序。它无法发布到 Google Play。我需要能够为用户提供下载和安装软件更新版本的机会。我已经检查、下载和安装了已经实现的代码，但是它依赖于被配置为能够安装来自未知来源的应用程序的设备。我需要设备能够下载和安装这个特定的 apk，同时仍然不允许安装来自未知来源的任何其他应用程序。

这可能吗？

（编辑：澄清选择的答案最终如何起作用）

添加到活动的代码是这样的：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() +"/update.apk")), "application/vnd.android.package-archive");
intent.putExtra(Intent.EXTRA_NOT_UNKNOWN_SOURCE, true);
intent.putExtra(Intent.EXTRA_ALLOW_REPLACE, true);

startActivityForResult(intent, 0); 
```

在 android 清单中，添加了以下代码：

```
<uses-permission android:name="android.permission.INSTALL_PACKAGES" /> 
```

安装应用程序后，我使用根文件资源管理器将 apk 移动`/user/apps`到`/system/apps`重置手机后，应用程序能够自行安装，而不是提示用户启用不受信任的来源。安装提示，列出应用程序所需的权限并让用户选择安装或不安装仍然出现，但这很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:10:10.463

**此方法仅适用于系统应用程序（[来源](https://code.google.com/p/android/issues/detail?id=42253)）**

尝试通过添加和额外的字段来安装 apk。

```
intent.putExtra(Intent.EXTRA_NOT_UNKNOWN_SOURCE, true); 
```

从来没有试过这个。[文档](http://developer.android.com/reference/android/content/Intent.html#EXTRA_NOT_UNKNOWN_SOURCE)说你需要调用 startActivityforResult 才能工作。但这需要 API 级别 14。也请尝试

```
intent.putExtra(Intent.EXTRA_ALLOW_REPLACE, true); 
```

编辑：再想一想，如果您有自定义 ROM，则将 shareduserid 系统添加到您的安装程序应用程序并直接调用任何`PackageInstallerActivity`调用来安装应用程序

编辑2：

检查此[代码](http://androidxref.com/4.0.4/xref/packages/apps/PackageInstaller/src/com/android/packageinstaller/PackageInstallerActivity.java#340)。OnClick 用于安装应用程序，因此将整个代码复制到您的应用程序并添加

```
<uses-permission android:name="android.permission.INSTALL_PACKAGES" /> 
```

允许。

并添加到 App 的 Android.mk

```
 LOCAL_CERTIFICATE := platform 
```

# octave - GNU Octave 矩阵除法是如何工作的？出现意外行为。

> ID：12263932
> 
> 赞同：7
> 
> 时间：2012-09-04T12:54:58.690
> 
> 标签：octave, division, matrix-multiplication

**在 GNU Octave 中，矩阵除法是如何工作的？**

而不是做

```
1./[1;1] 
```

我不小心做了

```
1/[1;1] 
```

令我惊讶的是，这会产生：

```
[0.5, 0.5] 
```

横向案例：

```
1/[1,1] 
```

给出预期：

```
error: operator /: nonconformant arguments (op1 is 1x1, op2 is 1x2) 
```

有人可以解释 [0.5, 0.5] 结果吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-04-03T07:57:25.630

考虑以下示例：

```
>> A = [5 10];

>> B = [2 2]; 
```

如果要按元素除法，请使用 A ./ B 且两个元素的矩阵大小相等，即如果 A 的大小为 m∗n B 的大小必须为 m∗n

```
>> A ./B
ans =

    2.5000   5.0000 
```

如果您想要矩阵除法，请使用 A / B，其中元素 A 的矩阵大小为 m∗n，B 为 q∗n 或 m∗n。/ 运算符试图返回 x∗y−1（即 x * pinv(y) 以八度音阶格式）。

```
>> A / B
ans =  3.7500 
```

这与

```
>> A * pinv(B)
ans =  3.7500 
```

OCTAVE/MATLAB 中的 pinv() 函数返回矩阵的 Moore-Penrose 伪逆矩阵，而 inv() 函数返回矩阵的逆矩阵。如果您对使用什么感到困惑，请使用 pinv() 如果您想进一步澄清[pinv 和 inv 之间的区别是什么？](https://www.quora.com/What-is-the-difference-between-pinv-and-inv/answer/Shraman-Bhaduri?srid=k0tQ)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T06:03:24.167

这是我在 coursera 机器学习课程讨论论坛上从 Alan Boulton 那里得到的答案：

这个想法的要点是 x / y 的定义相当普遍，以便它可以处理矩阵。从概念上讲，/ 运算符试图返回 x∗y−1（或 Octave 语言中的 x * inv(y)），如下例所示：

```
octave:1> eye(2)/[1 2;3 4]
ans =
  -2.00000   1.00000
   1.50000  -0.50000

octave:2> inv([1 2;3 4])
ans =
  -2.00000   1.00000
   1.50000  -0.50000 
```

当 y 是列向量时会发生棘手的情况，在这种情况下 inv(y) 是未定义的，因此使用 y 的伪逆 pinv(y)。

```
octave:1> pinv([1;2])
ans =
   0.20000   0.40000

octave:2> 1/[1;2]
ans =
   0.20000   0.40000 
```

向量 y 需要与 x 兼容，以便 x * pinv(y) 是明确定义的。所以如果 y 是一个行向量就可以了，只要 x 是兼容的。有关说明，请参见以下 Octave 会话：

```
octave:18> pinv([1 2])
ans =
   0.20000
   0.40000

octave:19> 1/[1 2]
error: operator /: nonconformant arguments (op1 is 1x1, op2 is 1x2)
octave:19> eye(2)/[1 2]
ans =
   0.20000
   0.40000

octave:20> eye(2)/[1;2]
error: operator /: nonconformant arguments (op1 is 2x2, op2 is 2x1)
octave:20> 1/[1;2]
ans =
   0.20000   0.40000 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T14:46:57.323

## Octave 矩阵除法解释：

从这里开始对八度矩阵划分的正式描述

[http://www.gnu.org/software/octave/doc/interpreter/Arithmetic-Ops.html](http://www.gnu.org/software/octave/doc/interpreter/Arithmetic-Ops.html)

```
x / y
    Right division. This is conceptually equivalent to the expression
    (inverse (y') * x')'

    But it is computed without forming the inverse of y'.

    If the system is not square, or if the coefficient matrix is 
    singular, a minimum norm solution is computed. 
```

**这意味着这两个应该是相同的：**

```
[3 4]/[4 5; 6 7]
ans =
   1.50000  -0.50000

(inverse([4 5; 6 7]') * [3 4]')'
ans =
   1.50000  -0.50000 
```

**首先，要了解 Octave 矩阵除法不可交换，就像矩阵乘法不可交换一样。**

这意味着 A / B 不等于 B / A

```
1/[1;1]
ans =
   0.50000   0.50000

[1;1]/1
ans =
   1
   1 
```

**一除以具有单个值的矩阵一为一：**

```
1/[1]
ans = 1 
```

**1 除以具有单个值 3 的矩阵是 0.33333：**

```
1/[3]
ans = .33333 
```

**一除以 (1x2) 矩阵：**

```
1/[1;1]
ans =
   0.50000   0.50000

Equivalent:

([1/2;1/2] * 1)'
ans =
   0.50000   0.50000 
```

请注意上面的说明，就像说明所说的那样，我们采用向量的范数。所以你看到了`[1;1]`是如何变成 的`[1/2; 1/2]`。'2' 来自向量的长度，1 来自提供的向量。我们再做一个：

**一除以 (1x3) 矩阵：**

```
1/[1;1;1]
ans = 
    0.33333   0.33333   0.33333 
```

相等的：

```
 ([1/3;1/3;1/3] * 1)'
 ans =
    0.33333   0.33333   0.33333 
```

**如果其中一个元素是负数怎么办...**

```
1/[1;1;-1]
ans =
    0.33333   0.33333  -0.33333 
```

相等的：

```
([1/3;1/3;-1/3] * 1)'
ans =
   0.33333   0.33333  -0.33333 
```

因此，现在您对不提供方阵时 Octave 的作用有了大致的了解。要了解 Octave 矩阵除法在传递方阵时的作用，您需要了解逆函数在做什么。

我一直在手动规范你的向量，如果你想要八度音程来做它们，你可以添加包来这样做，我认为下面的包将做我一直在做的向量规范化：

[http://octave.sourceforge.net/geometry/function/normalizeVector.html](http://octave.sourceforge.net/geometry/function/normalizeVector.html)

因此，现在您可以将除法转换为等效的乘法。阅读这篇关于矩阵乘法如何工作的文章，您可以回溯并找出矩阵除法背后发生的事情。

[http://www.purplemath.com/modules/mtrxmult2.htm](http://www.purplemath.com/modules/mtrxmult2.htm)

# mongodb - 简单开始使用 Doctrine2 mongoDB ODM

> ID：12263933
> 
> 赞同：1
> 
> 时间：2012-09-04T12:54:58.753
> 
> 标签：mongodb, doctrine, doctrine-orm, mongodb-php, doctrine-odm

我想通过 Doctrine2 开始使用 mongoDB，我安装了 MongoDB 并开始工作！(Windows8 64bit, PHP 5.4, Xampp, NetBeans7.2)

但我的问题：

[我从https://github.com/doctrine/mongodb-odm](https://github.com/doctrine/mongodb-odm)下载了 Doctrine 2 mongoDB ODM并在此处阅读文档[http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/ Introduction.html](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/introduction.html)但我还不能设置学说 2！:(

我不是通过大型 freamworks（ZF 或 Sym）工作，通常使用轻量级 MVC 模式！

任何人都可以通过 Doctrine 2 MongoDB ODM 创建（或告诉我如何开始使用它！）与像用户这样的对象一起工作的**简单项目吗？**

# php - 谷歌地图和 Jquery .Load 问题

> ID：12263934
> 
> 赞同：0
> 
> 时间：2012-09-04T12:55:07.490
> 
> 标签：php, jquery, maps

在加载包含谷歌地图的页面内容时，我遇到了一个似乎无法解决的问题。下面是 index.php 页面，其中包含父标头和 google api 信息。

```
<html>
<head>
    <script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery/jquery-1.7.2.min.js"></script>

    <!-- Google Maps -->
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("location-wedding"),
            mapOptions);
      }
    </script>
    <!-- Switch Layout -->
    <script type="text/javascript">
        $(document).ready(function() {
            $('.Theme_Page').load("test.php");
        });
    </script>

</head> 

<body onload="initialize()">

    <!-- Page Change -->
    <div class="theme_holder">

    </div>

    <div class="Theme_Page">
        <!-- Content To Go Here -->
    </div>

</body> 
```

正在加载的页面如下：

```
<div id="location-wedding" style="width:700px; height:250px"></div> 
```

问题是，如果上面的 div 在 index.php 中，那么地图就存在，只要将它放在要加载的页面中，它就根本不显示。我希望它出现在 .load() 页面中的原因是因为我将使用 Jquery 更改此页面上的内容（使用 onclick 事件）

任何帮助或指导将不胜感激。

干杯李。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:04:15.560

猜测一下，因为在加载 div`onload="initialize()"`之前就开始了。`test.php`将`initialize()`语句放在加载的页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:27:06.857

正如 yoda 所说，您的初始化函数在加载 load.php 之前启动。所以不会有 div 可以在其中 javascript 放入 map 而不是从 body onload 调用初始化函数你应该在 load.php 中调用这个函数.....试试这个:: 从 body 中删除 onload 函数并在加载时放置以下 javascript 代码.php

```
<script type="text/javascript">
    $(document).ready(function() {
        initialize()
    });
</script> 
```

# enterprise-architect - Enterprise Architect：为 RTF 报告中的包链接生成显示文本

> ID：12263936
> 
> 赞同：1
> 
> 时间：2012-09-04T12:55:15.390
> 
> 标签：enterprise-architect

在 Sparx Enterprise Architect 中，可以在注释和链接文档中插入指向其他模型元素的超链接，特别是其他包的超链接。这些超链接也会出现在生成的 RTF 报告中。毫不奇怪，它们显示的标签与工具中定义的标签相同。但是，对于包的链接（成为文档中的部分），我希望超链接与文档中与包关联的部分编号一起显示。

例如，我希望在文档中包含“参见第 4.2 节”，而不是“参见 ThatOtherPackage”。

这可能吗，如果是的话：我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:35:00.940

这是不可能的，至少在 EA 的当前版本 (9.3.935) 中是不可能的。

原因是在 RTF 模板中，元素注释是不可分割的。换句话说，您不能“获取”注释的内容（例如超链接）来执行任何预处理（例如替换）。

此外，很难在“编译时”确定一个包将获得什么节号。EA API 虽然功能丰富，但不提供将代码插入 RTF 生成过程的任何方法。

超链接在 EA 中是相当薄弱的东西，如果您使用连接器代替，您将有更多选择。但是我仍然看不到在生成过程中找到节号的方法。

# object - 新对象 psobject 增值

> ID：12263938
> 
> 赞同：1
> 
> 时间：2012-09-04T12:55:16.607
> 
> 标签：object, powershell

我知道自定义对象是这样创建的：

```
$obj=new-object psobject 
```

然后我知道您可以像这样添加成员（和值）：

```
$obj | Add-Member noteproperty name Jeff 
```

现在的问题是，如何填充对象、添加和删除值的“行”？

我发现的唯一方法是创建一个数组，然后将对象推入其中，如下所示：

```
$array = @()
$array+=new-object PSObject -Property @{Name="Jeff"}
$array+=new-object PSObject -Property @{Name="Joe"}
$array+=new-object PSObject -Property @{Name="John"} 
```

ETC..

有没有直接的方法来“增加”对象中成员的值？

```
$obj+=(Name=John) 
```

不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-24T01:08:38.837

一个很晚的回复，但我希望它可以帮助需要计算对象的人。

让我们从我们希望计算的用户列表开始。

```
> $users = 1..10 | % {New-object psobject -Property @{ Name = "User $_"; Age = $_ } }
> $users
Age Name
--- ----
  1 User 1
  2 User 2
  3 User 3
  4 User 4
  5 User 5
  6 User 6
  7 User 7
  8 User 8
  9 User 9
 10 User 10 
```

要计算它们，请将它们放入计数器的哈希表中

```
 > # Create hash table
 > $counter = @{}
 > # Assign users as keys in the table
 > $users  | % { $counter.Add($_, 0) }
 > $counter
Name                           Value
----                           -----
@{Age=4; Name=User 4}          0
@{Age=1; Name=User 1}          0
@{Age=3; Name=User 3}          0
@{Age=5; Name=User 5}          0
@{Age=10; Name=User 10}        0
@{Age=9; Name=User 9}          0
@{Age=8; Name=User 8}          0
@{Age=7; Name=User 7}          0
@{Age=6; Name=User 6}          0
@{Age=2; Name=User 2}          0 
```

然后，您可以在脚本中遇到用户时递增计数器。例如，要增加“用户 1”两次和一次“用户 4”

```
> $counter[$users[0]] += 1
> $counter[$users[0]] += 1
> $counter[$users[3]] += 1
> $counter

Name                           Value
----                           -----
@{Age=4; Name=User 4}          1
@{Age=1; Name=User 1}          2
@{Age=3; Name=User 3}          0
@{Age=5; Name=User 5}          0
@{Age=10; Name=User 10}        0
@{Age=9; Name=User 9}          0
@{Age=8; Name=User 8}          0
@{Age=7; Name=User 7}          0
@{Age=6; Name=User 6}          0
@{Age=2; Name=User 2}          0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:21:33.427

在上面的示例中，我相信您最终会得到 System.Management.Automation.PSCustomObject，而不是数组。当我构建包含自定义对象的报告时，我会使用类似于您正在做的事情。但是，如果您真的只是使用它来存储一个属性，那可能就有些矫枉过正了。你可以这样做：

```
$names += "John"
$names += "Fred" 
```

如果您真的想在整个脚本中为对象添加新的注释属性，我就是这样做的。请记住 PowerShell 不喜欢添加具有相同名称的注释属性，因此如果您这样做，您必须简单地使用 = 设置属性

这是我所做的一个例子：

```
$params += @{Name = $_.Name}
$params += @{Calculation = $someCalculatedValue}
$collection += New-Object -Type PSObject -Property $params 
```

# sql - 如何计算每行的剩余金额？

> ID：12263940
> 
> 赞同：0
> 
> 时间：2012-09-04T12:55:24.450
> 
> 标签：sql

我有一张表，我想为每一行查找总数中剩余的金额。但是，金额的顺序是按升序排列的。

```
id   amount
1    3
2    2
3    1
4    5 
```

结果应如下所示：

```
id   remainder
1    10
2    8
3    5
4    0 
```

关于如何做到这一点的任何想法？我猜over子句是要走的路，但我不能把它拼凑起来。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:06:58.620

由于您没有指定您的 RDBMS，我将假设它是 Postgresql ;-)

```
select  *, sum(amount) over() - sum(amount) over(order by amount) as remainder
from tbl; 
```

输出：

```
| ID | AMOUNT | REMAINDER |
---------------------------
|  3 |      1 |        10 |
|  2 |      2 |         8 |
|  1 |      3 |         5 |
|  4 |      5 |         0 | 
```

它是如何工作的：[http ://www.sqlfiddle.com/#!1/c446a/5](http://www.sqlfiddle.com/#!1/c446a/5)

它也适用于 SQL Server 2012：[http ://www.sqlfiddle.com/#!6/c446a/1](http://www.sqlfiddle.com/#!6/c446a/1)

SQL Server 2008 解决方案的思考...

* * *

顺便说一句，您的 ID 只是一个行号吗？如果是，请执行以下操作：

```
select 
  row_number() over(order by amount) as rn
  , sum(amount) over() - sum(amount) over(order by amount) as remainder
from tbl
order by rn; 
```

输出：

```
| RN | REMAINDER |
------------------
|  1 |        10 |
|  2 |         8 |
|  3 |         5 |
|  4 |         0 | 
```

但是，如果您确实需要完整的 ID 并在顶部移动最少的数量，请执行以下操作：

```
with a as
(
  select  *, sum(amount) over() - sum(amount) over(order by amount) as remainder,
      row_number() over(order by id) as id_sort,
      row_number() over(order by amount) as amount_sort
  from tbl
)
select a.id, sort.remainder
from a
join a sort on sort.amount_sort = a.id_sort
order by a.id_sort; 
```

输出：

```
| ID | REMAINDER |
------------------
|  1 |        10 |
|  2 |         8 |
|  3 |         5 |
|  4 |         0 | 
```

在此处查看查询进度：[http ://www.sqlfiddle.com/#!6/c446a/11](http://www.sqlfiddle.com/#!6/c446a/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T13:21:20.370

我只想提供一种更简单的方法来按降序执行此操作：

```
select id, sum(amount) over (order by id desc) as Remainder
from t 
```

这将适用于 Oracle、SQL Server 2012 和 Postgres。

一般的解决方案需要一个自连接：

```
select t.id, coalesce(sum(tafter.amount), 0) as Remainder
from t left outer join
     t tafter
     on t.id < tafter.id
group by t.id 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T14:05:53.383

SQL Server 2008 回答，我无法提供 SQL Fiddle，似乎它剥离了`begin`关键字，导致语法错误。我在我的机器上测试了这个：

```
create function RunningTotalGuarded()
returns @ReturnTable table(
    Id int, 
    Amount int not null, 
    RunningTotal int not null, 
    RN int identity(1,1) not null primary key clustered
)

as
begin

  insert into @ReturnTable(id, amount, RunningTotal) 
  select id, amount, 0 from tbl order by amount;

  declare @RunningTotal numeric(16,4) = 0;
  declare @rn_check int = 0;

  update @ReturnTable
    set 
        @rn_check = @rn_check + 1
        ,@RunningTotal = 
        case when rn = @rn_check then
            @RunningTotal + Amount
        else
            1 / 0
        end
        ,RunningTotal = @RunningTotal;     
  return;    
end; 
```

为了达到你想要的输出：

```
with a as
(
    select *, sum(amount) over() - RunningTotal as remainder
        , row_number() over(order by id) as id_order
    from RunningTotalGuarded()
)
select a.id, amount_order.remainder
from a
inner join a amount_order on amount_order.rn = a.id_order; 
```

保护运行总数的基本原理：[http ://www.ienablemuch.com/2012/05/recursive-cte-is-evil-and-cursor-is.html](http://www.ienablemuch.com/2012/05/recursive-cte-is-evil-and-cursor-is.html)

选择较小的邪恶;-)

# c++ - 反转链表的非迭代等效项

> ID：12263941
> 
> 赞同：3
> 
> 时间：2012-09-04T12:55:33.313
> 
> 标签：c++

我正在阅读 RobertSedwick 的算法书中的列表遍历。函数定义如下所示。提到可以有 traverse 和 remove 函数可以有迭代的对应部分，但 traverseR 不能有。我的问题为什么 traverseR 不能有迭代对应部分？是不是如果递归调用不是函数的结尾，即像遍历那样我们不能进行迭代，我的理解对吗？

感谢您的时间和帮助。

```
void traverse(link h, void visit(link))
  { 
    if (h == 0) return;
    visit(h); 
    traverse(h->next, visit);
  }
void traverseR(link h, void visit(link))
  { 
    if (h == 0) return;
    traverseR(h->next, visit);
    visit(h); 
  }
void remove(link& x, Item v)
  { 
    while (x != 0 && x->item == v) 
      { link t = x; x = x->next; delete t; }
    if (x != 0) remove(x->next, v); 
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T13:08:21.643

`traverseR`使用调用堆栈来存储指向列表中所有节点的指针，以便在调用堆栈展开时可以以相反的顺序访问它们。

为了在没有调用堆栈（即非递归）的情况下执行此操作，您需要一些其他类似堆栈的数据结构来存储这些指针。

其他函数只是在当前节点上工作并继续前进，无需在递归函数调用返回后存储任何内容以供使用。这意味着可以用循环替换*尾递归*（通过修改代码或取决于编译器，让它确定这是可能的并自行进行转换）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T13:06:23.037

假设列表是单链接的，则不可能以向后的顺序迭代地访问它，因为没有从一个节点指向前一个节点的指针。

递归实现`traverseR`本质上所做的是它隐式地反转列表并以正向顺序访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T13:09:30.910

您可以编写`traverseR`使用堆栈的迭代版本：在循环中从一个节点迭代到另一个节点，将节点推入堆栈。当您到达列表末尾时，在另一个循环中，弹出并访问您访问过的节点。

但他基本上是递归版本所做的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T15:00:50.660

可以仅使用 O(1) 额外空间以相反的顺序遍历单链表——即，没有以前访问过的节点的堆栈。然而，它有点棘手，而且根本不是线程安全的。

这样做的诀窍是从头到尾遍历列表，在执行此操作时将其反转到位，然后将其遍历回到开头，在返回时再次反转它。

由于它是一个链表，因此将其反转相当简单：当您到达一个节点时，保存其`next`指针的当前值，并用链表中前一个节点的地址覆盖它（有关更多详细信息，请参见代码):

```
void traverseR(node *list, void (*visit)(node *)) { 
    node *prev = nullptr;
    node *curr = list;
    node *next;

    if (!curr)
        return;

    // Traverse forwards, reversing list in-place as we go.
    do {
        next = curr->next;
        curr->next = prev;
        prev = curr;
        curr = next;
    } while (curr->next);

    // fix up so we have a fully reversed list
    curr->next = prev;
    prev = nullptr;

    // Traverse the reversed list, visiting each node and reversing again
    do { 
        visit(curr);
        next = curr->next;
        curr->next = prev;
        prev = curr;
        curr = next;
    } while (curr->next);
} 
```

就像几乎所有处理链表的事情一样，我觉得有必要补充一点（至少在 IMO），它们几乎总是应该被视为纯粹的智力练习。在实际代码中使用它们*通常*是净损失。您通常会得到缓慢、脆弱且难以理解的代码，并且通常会浪费相当多的内存（除非您存储在每个节点中的数据非常大，否则指针通常可以使用与数据一样多的空间本身）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T13:23:56.297

> 我的问题为什么 traverseR 不能有迭代对应部分？是不是如果递归调用不是函数的结尾，即像遍历那样我们不能进行迭代，我的理解对吗？

正确的。函数`traverse`并`remove`以对自身的调用结束。它们是尾递归函数。对自身的调用`traverseR`不在函数的末尾；`traverseR`不是尾递归。

递归通常会产生创建和随后销毁堆栈帧的费用。通过将递归更改为迭代，尾递归函数可以完全避免这种开销。大多数编译器识别尾递归函数并将递归转换为迭代。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T13:59:11.597

`traverseR`可以根据迭代的含义编写迭代版本。如果你受限于单次遍历列表，那是不可能的。但是，如果您可以牺牲大量处理时间，则可以完成。在经典的速度与内存权衡中，它确实使用了更少的内存。

```
void traverseRI(link h, void visit(link))
{
    if (h == 0) return;

    link last = 0;

    while (last != h)
    {
        link test = h;
        while (test->next != last)
        {
            test = test->next;
        }

        visit(test);
        last = test;
    }
} 
```

# jquery - JSON IE7 jQuery 问题

> ID：12263942
> 
> 赞同：0
> 
> 时间：2012-09-04T12:55:44.167
> 
> 标签：jquery, json

我有以下JS代码：

```
 var data = jQuery.parseJSON('{"name":"John"}');
  $('#name').live("change", function() {
    name = data[$(this).val()];
    alert(name);
  }); 
```

它在 FireFox 中运行良好，但在 IE7 中出现以下 JS 错误：

```
 Object doesn't support this property or method. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:02:47.967

你公布名字了吗？

变量名 = ob...

IE需要声明js变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:00:00.207

你的问题不合时宜。

```
 var data = jQuery.parseJSON('{"name":"John"}');  
     $('#name').live("change", function() {
         name = obj[$(this).val()];
         alert(name);   }); 
```

什么是obj？

你在哪里得到错误（意味着哪一行）

我认为任何对象都返回空值或js的函数，没有定义

# jquery - 使用 jquery 从 css 类中删除“宽度”

> ID：12263944
> 
> 赞同：0
> 
> 时间：2012-09-04T12:55:50.747
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在研究 jQuery UI DatePicker。当我使用`changeMonth`和`changeYear`属性时，月份和年份`select`控件看起来都很奇怪。我想让它们彼此相邻并有一个空间

![在此处输入图像描述](../Images/039441bf320adcff9aa9fec9ea074b00.png)

我使用开发者工具挖掘了一下，发现它的宽度固定为**49%**

尽管我手头有 css 文件，但我不应该更改其中的任何部分。

我尝试了几种解决方法...

我创建了一个名为`widthClass`

```
.widthClass{
   width : '0px !important';
 } 
```

将其添加到月份控制器

```
$('.ui-datepicker-month').addClass('widthClass'); 
```

第二种方法是，

```
$('.ui-datepicker-month').css('width', ''); 
```

但他们都没有给出正确的结果。帮帮我...

这就是我的控制器应该是什么样子......

![在此处输入图像描述](../Images/1dba32c010f85c36616d2a3057efb600.png)

**更新：**

我可以通过将`.click()`处理程序添加到文本字段来修改月份和年份控件的宽度。我能够看到欲望o / p。但是当我点击日期选择器中的任何其他导航控件时，它会被重置并且看起来像旧的一样。

我在`.click()`通话中所做的是..

```
$("<text-field-class>").click(function(){
     $('.ui-datepicker-month, .ui-datepicker-year').css('wdith', '30%');
}); 
```

即使我使用下一个/上一个/今天控件，如何保持这种应用样式永久化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:59:12.813

尝试

```
$('.ui-datepicker-month').css('width', 'auto'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:00:00.223

尝试 Maverick 解决方案**或**

```
$('.ui-datepicker-month').css('width', '0px !important'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T13:10:23.477

您可以参考和试验[http://jqueryui.com/demos/datepicker/#dropdown-month-year](http://jqueryui.com/demos/datepicker/#dropdown-month-year)

链接中有一个现场演示。还有一个**主题**选项卡可以自定义您的日期选择器。还要检查您的页面 CSS 以检查 CSS 冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T13:03:02.750

`DOCTYPE`我在我的应用程序中使用的页面中添加了一个属性。这已经自动调整了彼此相邻的下拉菜单。此外，它还解决了控件的另一个问题。

# cuda - driver.Context.synchronize()- 还有什么要考虑的——清理操作失败

> ID：12263945
> 
> 赞同：5
> 
> 时间：2012-09-04T12:55:51.433
> 
> 标签：cuda, pycuda

我在这里有 [这段](https://stackoverflow.com/questions/12159709/cuda-out-of-memory-threads-and-blocks-issue-address-is-out-of-bounds/12230988#comment16400460_12230988)代码（由于答案而修改）。

信息

> 32 字节堆栈帧，0 字节溢出存储，0 字节溢出加载
> ptxas 信息：使用 46 个寄存器，120 字节 cmem[0]，176 字节 cmem[2]，76 字节 cmem[16]

我不知道还要考虑什么才能使其适用于点“numPointsRs”和“numPointsRp”的不同组合

例如，当我使用 Rs=10000 和 Rp=100000 运行代码时，block=(128,1,1),grid=(200,1) 很好。

我的计算：

> 46 个寄存器*128 线程=5888 个寄存器。
> 
> 我的卡有限制 32768 个寄存器，所以 32768/5888=5 +some => 5 块/SM
> （我的卡有限制 6）。
> 
> 使用占用率计算器，我发现使用 128 个线程/块给了我 42% 并且在我的卡的限制范围内。
> 
> 此外，每个 MP 的线程数为 640（限制为 1536）

现在，如果我尝试使用 Rs=100000 和 Rp=100000（对于相同的线程和块）它会给我标题中的消息，其中：

> cuEventDestroy 失败：启动超时
> 
> cuModuleUnload 失败：启动超时
> 
> 1）我不知道/理解还需要计算什么。
> 
> 2）我不明白我们如何使用/查找块的数量。我可以看到，大多数情况下，有人放（threads-1+points）/threads，但这仍然不起作用。

**- - - - - - - 更新 - - - - - - - - - - - - - - - - - - ------------**

使用 driver.Context.synchronize() 后，代码适用于许多点（1000000）！

但是，这个添加对代码有什么影响？（对于许多点，屏幕冻结 1 分钟或更长时间）。我应该使用它还是不使用它？

**--------------已更新2----------------------------------- ------------**

现在，代码在不做任何事情的情况下无法再次工作！

代码快照：

```
import pycuda.gpuarray as gpuarray
import pycuda.autoinit
from pycuda.compiler import SourceModule
import numpy as np
import cmath
import pycuda.driver as drv
import pycuda.tools as t

#---- Initialization and passing(allocate memory and transfer data) to GPU -------------------------
Rs_gpu=gpuarray.to_gpu(Rs)
Rp_gpu=gpuarray.to_gpu(Rp)

J_gpu=gpuarray.to_gpu(np.ones((numPointsRs,3)).astype(np.complex64))
M_gpu=gpuarray.to_gpu(np.ones((numPointsRs,3)).astype(np.complex64))

Evec_gpu=gpuarray.to_gpu(np.zeros((numPointsRp,3)).astype(np.complex64))
Hvec_gpu=gpuarray.to_gpu(np.zeros((numPointsRp,3)).astype(np.complex64))
All_gpu=gpuarray.to_gpu(np.ones(numPointsRp).astype(np.complex64))

#-----------------------------------------------------------------------------------    
mod =SourceModule("""
#include <pycuda-complex.hpp>
#include <cmath>
#include <vector>

typedef  pycuda::complex<float> cmplx;
typedef float fp3[3];
typedef cmplx cp3[3];

__device__ __constant__ float Pi;

extern "C"{  

    __device__ void computeEvec(fp3 Rs_mat[], int numPointsRs,   
         cp3 J[],
         cp3 M[],
         fp3 Rp,
         cmplx kp, 
         cmplx eta,
         cmplx *Evec,
         cmplx *Hvec, cmplx *All)

{

            while (c<numPointsRs){

        ...                      
                c++;

                }        
        }

__global__  void computeEHfields(float *Rs_mat_, int numPointsRs,     
        float *Rp_mat_, int numPointsRp,     
    cmplx *J_,
    cmplx *M_,
    cmplx  kp, 
    cmplx  eta,
    cmplx E[][3],
    cmplx H[][3], cmplx *All )
    {

        fp3 * Rs_mat=(fp3 *)Rs_mat_;
        fp3 * Rp_mat=(fp3 *)Rp_mat_;
        cp3 * J=(cp3 *)J_;
        cp3 * M=(cp3 *)M_;

    int k=threadIdx.x+blockIdx.x*blockDim.x;

      while (k<numPointsRp)  
     {

        computeEvec( Rs_mat, numPointsRs,  J, M, Rp_mat[k], kp, eta, E[k], H[k], All );
        k+=blockDim.x*gridDim.x;

    }

}
}

""" ,no_extern_c=1,options=['--ptxas-options=-v'])

#call the function(kernel)
func = mod.get_function("computeEHfields")

func(Rs_gpu,np.int32(numPointsRs),Rp_gpu,np.int32(numPointsRp),J_gpu, M_gpu, np.complex64(kp), np.complex64(eta),Evec_gpu,Hvec_gpu, All_gpu, block=(128,1,1),grid=(200,1))

#----- get data back from GPU-----
Rs=Rs_gpu.get()
Rp=Rp_gpu.get()
J=J_gpu.get()
M=M_gpu.get()
Evec=Evec_gpu.get()
Hvec=Hvec_gpu.get()
All=All_gpu.get() 
```

我的卡：

```
Device 0: "GeForce GTX 560"
  CUDA Driver Version / Runtime Version          4.20 / 4.10
  CUDA Capability Major/Minor version number:    2.1
  Total amount of global memory:                 1024 MBytes (1073283072 bytes)
  ( 0) Multiprocessors x (48) CUDA Cores/MP:     0 CUDA Cores   //CUDA Cores    336 => 7 MP and 48 Cores/MP 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T00:56:31.933

“启动超时”似乎表明内核运行时间过长并被看门狗定时器杀死。这可能发生在也用于图形输出（例如图形桌面）的 GPU 上，其中看门狗计时器的任务是防止桌面锁定超过几秒钟。最好我记得看门狗的时间限制大约是 5 秒左右。

在任何给定时刻，GPU 都可以运行图形或 CUDA，因此在运行 GUI 时需要看门狗定时器，以防止 GUI 长时间锁定，从而导致机器无法通过 GUI 操作。

如果可能，请避免将此 GPU 用于桌面和/或其他图形（例如，如果您在 Linux 上，请不要运行 X）。如果在没有图形的情况下运行不是一个选项，为了减少内核执行时间以避免遇到看门狗定时器内核终止，您将不得不在每次内核启动时做更少的工作，优化代码以便内核在相同的工作量下运行得更快，或者部署更快的 GPU。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T03:33:38.057

有很多问题需要你处理。@njuffa 提供的答案 1 是最好的通用解决方案。我将根据您提供的有限数据提供更多反馈。

1.  46 个寄存器的 PTX 输出不是内核使用的寄存器数。PTX 是一种中间表示。离线或 JIT 编译器会将其转换为设备代码。设备代码可以使用更多或更少的寄存器。Nsight Visual Studio Edition、Visual Profiler 和 CUDA 命令行分析器都可以为您提供正确的寄存器计数。

2.  占用计算不仅仅是RegistersPerSM / RegistersPerThread。寄存器是基于粒度分配的。对于 CC 2.1，粒度是每个线程每个线程 4 个寄存器（128 个寄存器）。2.x 设备实际上可以以 2 个寄存器粒度进行分配，但这可能会导致稍后在内核中出现碎片。

3.  在您的入住计算中，您声明

> 我的卡有限制 32768 个寄存器，所以 32768/5888=5 +some => 5 块/SM（我的卡有限制 6）。

我不确定 6 是什么意思。您的设备有 7 个 SM。对于 2.x 设备，每个 SM 的最大块数是每个 SM 8 个块。

1.  您提供的代码数量不足。如果您提供代码片段，请提供所有输入的大小、每个循环将执行的次数以及每个函数的操作描述。查看代码，您可能每个线程执行了太多循环。在不知道外循环的数量级的情况下，我们只能猜测。

2.  鉴于启动超时，您可能应该按如下方式进行调试：

一种。在代码开头添加一行

```
if (blockIdx.x > 0) { return; } 
```

运行前面提到的分析器之一中的确切代码，以估计单个块的持续时间。使用分析器提供的启动信息：每个线程的寄存器、共享内存……使用分析器中的占用计算器或 xls 来确定可以同时运行的最大块数。例如，如果理论块占用率是每个 SM 3 个块，并且 SM 的数量是 7 个，那么您一次可以运行 21 个块，对您来说发射 9 个波。注意：这假设每个线程的工作量相等。更改提前退出代码以允许 1 波（21 个块）。如果此启动超时，那么您需要减少每个线程的工作量。如果通过了，那么计算你有多少波并估计你什么时候超时（在 Windows 上为 2 秒，在 Linux 上为 ?）。

湾。如果你有太多的波浪然后减少你必须减少启动配置。鉴于您按 gridDim.x 和 blockDim.x 进行索引，您可以通过将这些维度作为参数传递给内核来做到这一点。这将要求您对您的索引代码进行最低限度的更改。您还必须传递一个 blockIdx.x 偏移量。更改您的主机代码以背靠背启动多个内核。由于不应该有冲突，您可以在多个流中启动这些，以从每个波结束时的重叠中受益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-18T15:26:16.003

要为@njuffa 的答案提供更多输入，在 Windows 系统中，您可以按照以下步骤增加启动超时或**TDR （超时检测和恢复）：**

1：打开**Nsight Monitor**中的**选项**。

 **[![在此处输入图像描述](../Images/e12d50e39dab6dbd1cdad7551636bf3a.png)](https://i.stack.imgur.com/j6DpU.png)

**2：为WDDM TDR 延迟**设置适当的值

 **[![在此处输入图像描述](../Images/63530c4ce647694937af1f9b12a8fe7f.png)](https://i.stack.imgur.com/10Hhk.png)

**注意**：如果此值很小，您可能会收到超时错误，并且对于更高的值，您的屏幕将保持冻结状态，直到内核完成它的工作。

[来源](https://docs.nvidia.com/gameworks/content/developertools/desktop/nsight/timeout_detection_recovery.htm)****

# migration - Open laszlo 5.0 中的 this.__LZtextclip.text 的合适替代品是什么

> ID：12263950
> 
> 赞同：2
> 
> 时间：2012-09-04T12:56:36.823
> 
> 标签：migration, openlaszlo, lzx

我想知道这条线的合适替代品是什么。

```
this.__LZtextclip.text 
```

我正在使用它来获取文本节点中存在的字符串。这在 Openlaszlo 3.3 中运行良好，但在 4.9 和 5.0 中却出现了问题

我尝试将其更新为

```
this.sprite.__LZtextclip.text 
```

我收到一个错误：

```
79: Error: Access of possibly undefined property __LZtextclip through a reference with static type LzSprite, in line: Debug.write(this.sprite.__LZtextclip.text); 
```

知道为什么会发生这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:57:52.190

如果您尝试访问文本字段的文本内容，为什么不直接访问属性*text*？

```
<canvas> 

    <text name="sample" id="gRead" />

    <handler name="oninit">
      gRead.setAttribute('text',"HI");
      Debug.info(gRead.text);
    </handler>

</canvas> 
```

在 OpenLaszlo 3.3 中有方法 getText()，它为您提供相同的值。在您的代码中访问 mx.textfield 不适用于 DHTML 运行时。

**编辑：添加了有关去除 HTML 标记**
的信息 Flash Textfield 类[flash.text.Textfield](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#text)提供了一个 API 以在 Textfield 实例中启用 HTML 标记内容。有两种不同的属性，一种称为[text](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#text)，另一种称为[htmlText](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#htmlText)。如果要直接访问 lz.text 实例的 Flash Textfield 对象，它是 lz.text 实例的显示对象的属性：

```
// Flash Textfield instance
gRead.getDisplayObject().textfield
// Pure text content
gRead.getDisplayObject().textfield.text
// Formatted text
gRead.getDisplayObject().textfield.htmlText 
```

您应该知道 Flash 会自动将 HTML 格式添加到您设置为内容的任何文本字符串中。当你这样做

```
gRead.setAttribute('text',"HI"); 
```

textfield.htmlText 值为

```
<P ALIGN="LEFT"><FONT FACE="Verdana" SIZE="11" COLOR="#000000" LETTERSPACING="0" KERNING="1">HI</FONT></P> 
```

对于 DHTML 运行时，文本内容作为 <div> 标记的 innerHTML 添加，并且没有标准化的 API 来检索具有内容的标记的 DOM 结构的纯文本内容。您可以编写自己的函数来提取文本内容，或者使用现有框架中的 JavaScript 函数（如[jQuery text() 函数](http://api.jquery.com/text/#text1)）来为 DHTML 运行时实现相同的结果。

我猜原因是 Laszlo 从 OpenLaszlo 4.0 或 4.1 开始使用基于 Dojo 的富文本编辑器进行带有 HTML 格式的文本输入。

剥离标签时在运行时保持一致行为的最佳方法是在服务器端进行转换。如果您希望在多行文本中对空格进行一致的处理，则尤其需要这样做，因为浏览器处理空格的方式存在差异。之前在 Stackoverflow 上已经回答了如何最好地从 JavaScript 中的字符串中去除标签的问题，例如[JavaScript：如何从字符串中去除 HTML 标签？](https://stackoverflow.com/questions/5002111/javascript-how-to-strip-html-tags-from-string)

这是一个跨运行时示例，它在 DHTML 中与 Firefox、Chrome 一起工作，它应该与 IE9+ 一起工作：

```
<canvas> 

    <text name="sample" id="gRead" />

    <handler name="oninit"><![CDATA[
      gRead.setAttribute("text", 'Hello <b>World</b> <a href="http://www.openlaszlo.org">OL</a>');
      Debug.info("gRead.text=" + gRead.text);
      if ($dhtml) {
        Debug.info(gRead.getDisplayObject().textContent);
      } else {
        Debug.info(gRead.getDisplayObject().textfield.text);
      }
    ]]></handler>

</canvas> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T13:55:01.360

我发现了问题所在。问题是我必须声明一个变量并且必须从中引用属性。

```
<canvas> 
<library>
    <text name="sample" id="gRead">         
        <method name="getTextFrom">
            Debug.write("this.text" , this.sprite);
            var mx = this.sprite;           
            Debug.write("this.text" , mx.textfield.text);

        </method>
    </text>

</library>
<handler name="oninit">
    gRead.setAttribute('text',"HI");
    gRead.getTextFrom();

</handler>
</canvas> 
```

# css - 使用媒体查询优化 iOS 时，网站标题被推到一侧

> ID：12263953
> 
> 赞同：1
> 
> 时间：2012-09-04T12:56:43.267
> 
> 标签：css, ios, media-queries

我的网站 ( [http://amosjackson.com](http://amosjackson.com) ) 使用 css 媒体查询来调整网站大小，使其适合 iPhone 屏幕。当我查看该站点时（在 iPhone 4 上），标题右侧显示了一块背景。标题是宽度：100%，所以应该是从边缘到边缘。我没有为非视网膜 iOS 正确编码 css（在旧的 iDevices 上看起来更糟）所以请不要对此发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:05:00.800

问题是与元素`padding: 10px;`的结合。放下填充它应该可以工作。`width: 100%;``#nav`

# javascript - 在没有焦点的画布上捕获第一次单击事件

> ID：12263954
> 
> 赞同：2
> 
> 时间：2012-09-04T12:56:46.220
> 
> 标签：javascript, html, dom, canvas, dom-events

我有一个 Canvas 可以响应`mousedown`上面的事件。然后，我将一个输入元素添加到 DOM，并将其绝对定位，使其位于画布上。

然后用户点击输入元素并输入一些文本，然后他们点击回到画布。我的问题是第一次单击只是将焦点设置回画布，但没有注册为`mousedown`画布元素上的事件。

我可以做些什么来确保第一次点击被注册？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:11:49.140

你是如何附加事件的？这应该“正常工作”，除非有情有可原。

这是一个例子：

[http://jsfiddle.net/bSpe4/](http://jsfiddle.net/bSpe4/)

根据您的代码的外观，为您的画布提供一个选项卡索引值也可能会有所帮助。

`theCanvas.tabIndex = 0; // might fix your particular issue`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-10T05:59:17.283

我刚刚遇到了这个问题。我需要同时听左键和右键，并且使用的是`mousedown`.

以防有人像我一样发现这个。我通过将事件附加到`mouseup`而不是`mousedown`.

这样，焦点发生在 on`mousedown`和事件触发上`mouseup`，这对我正在做的事情来说很好。

# android - 如何在android中通信两个线程

> ID：12263955
> 
> 赞同：0
> 
> 时间：2012-09-04T12:56:48.100
> 
> 标签：android, multithreading

嗨，伙计，我在 android 中有两个线程加上主线程。第一个线程称为 A，检查当前片段中某些视图的配置，并将请求发送到称为 B 的第二个线程，该线程具有通向串行设备的蓝牙通道。线程B通过蓝牙读取值并向线程A发送响应。当线程a接收响应时，将响应发送给在主线程视图中设置响应值的主线程，并将其他请求发送给线程A。但是如何用于线程之间的通信呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:59:49.500

如果你确保你的线程有 Looper，你可以使用 Handler：http: [//developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:54:38.293

为什么不看一个更简单的解决方案：

[LocalBroadcastManager](https://stackoverflow.com/questions/12277265/android-sub-thread-call-main-thread-ui/12277885#12277885)（将 android 支持库添加到您的应用程序的惩罚）。它将节省您开发和维护代码的时间。

不要忘记投票/纠正！

# java - oauth 可以在 java 中使用，但不能在 android 中使用

> ID：12263956
> 
> 赞同：0
> 
> 时间：2012-09-04T12:56:59.530
> 
> 标签：java, android, oauth, oauth-2.0, oauth-provider

我有一个 Java 程序与服务器通信以进行身份​​验证并显示正确的响应：

```
public class Example {

 private static final String PROTECTED_RESOURCE_URL = "http://testwebsite.com/";

  public static void main(String[] args)
  {
    OAuthService service = new ServiceBuilder()
                                .provider(TwoLeggedOAuth.class)
                                .apiKey("my_key")
                                .apiSecret("my_secret")
                                .build();
    Token token = new Token("", "");   
    OAuthRequest request = new OAuthRequest(Verb.GET, PROTECTED_RESOURCE_URL);  
    service.signRequest(token, request);         
    Response response = request.send();            

    System.out.println("Response: " + response.getBody());
   }
} 
```

当集成到 Android 应用程序中时，相同的程序不起作用。
我得到消息：`oAuth Verification Failed`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:55:48.667

我正在使用 android 版本 2.2 进行尝试，当我尝试使用 2.3 时它开始工作。

# xquery - xquery-如何获取紧接在具有已知文本的节点之后的节点的内容

> ID：12263958
> 
> 赞同：0
> 
> 时间：2012-09-04T12:56:59.880
> 
> 标签：xquery

我正在尝试从 XHTML 文档中提取内容——在该文档中，在一个 div 中，有许多“b”元素，每个元素后跟一个链接。

例如——

```
<div id="main">
    <b> Bold text 1</b>
    <a href="http://link.com/"> some link 1</a>
      <b> Bold text 2</b>
    <a href="http://link.com/"> some link 2</a>     
    <b> ABRACADABRA</b>
    <a href="http://link.com/"> abracadbralink</a>
</div> 
```

现在，我想提取链接“abracadabralink”——问题是，我不知道在这个特定链接之前有多少和元素——在不同的文档中有不同数量的这样的元素——有时有很多链接紧接在一个元素之后——我所知道的是，在我想要的链接之前出现的元素的文本始终是固定的。

所以唯一固定的信息是我希望在具有已知文本的元素之后立即链接——我如何使用 XQuery 获得这个链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:34:46.417

我想以下内容应该适合您：

```
$yournode/b[. = ' ABRACADABRA']/following-sibling::a/@href/string() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:34:55.423

如果我猜对了，您对`@href`属性的值感兴趣吗？这可以使用标准 XPath 语法来完成：

```
doc('yourdoc.xml')//*[. = ' abracadbralink']/@href/string() 
```

有关 XPath 的更多信息，我建议您查看一些在线教程，例如[http://www.w3schools.com/xpath/default.asp](http://www.w3schools.com/xpath/default.asp)

# wpf - PRISM RegionManager - TabControl 选项卡顺序

> ID：12263961
> 
> 赞同：3
> 
> 时间：2012-09-04T12:57:17.493
> 
> 标签：wpf, prism, tabcontrol

我有一个 TabControl 区域，我在其中添加新选项卡会抛出 RequestNavigate 方法。一切正常。但问题是，新标签被放置在右边的最后一个位置。但我需要将它们添加到活动标签旁边。因此，当我有 10 个打开的选项卡，但第一个选项卡处于活动状态时 - 我想将新打开的选项卡添加到第二位并将其他选项卡向右移动。多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T19:44:38.973

好的，感谢 Sam 的解决方案[https://stackoverflow.com/a/4285764/1027262](https://stackoverflow.com/a/4285764/1027262)我发现 IRegion 类的 SortComparison 属性负责对区域内的视图进行排序。

所以我的 View 类实现了 ISortableView 接口，其中包含

```
public int SortIndex {get;set;} 
```

然后使用此 SortIndex 对区域中的视图进行排序。SortComparison 方法如下所示：

```
private static int CompareViews(object x, object y) 
{ 
    return ((ISortableView)x).SortIndex.CompareTo(((ISortableView)y).SortIndex); 
} 

this._regionManager.Regions["MyRegion"].SortComparison = CompareViews; 
```

然后我必须制作服务类，负责管理 Views 索引。我发送的父视图索引抛出 INavigationAware 接口的 OnNavigatedFrom 方法。但请注意在 OnNavigatedTo 方法中设置 SortIndex。此方法称为 AFTER region sort its views。

# ruby-on-rails - Restful-Authentication：“未初始化的常量 User::Authentication”和“未定义的方法‘key？’ 对于零：NilClass”

> ID：12263964
> 
> 赞同：1
> 
> 时间：2012-09-04T12:57:23.260
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, authentication, restful-authentication

在尝试在我的 Ruby on Rails 站点上安装“Restful-Authentication”插件后，我遇到了一些问题。

我对 Ruby on Rails 和一般编程仍然很陌生，所以我可能忘记了一些东西，也许。

我正在运行 Ruby 1.9.3p125 和 Rails 3.2.1

浏览注册页面时，我收到以下错误消息：

```
uninitialized constant User::Authentication 
```

然后，如果我刷新页面，我会收到其他错误消息：

```
undefined method `key?' for nil:NilClass 
```

完整跟踪：

```
actionpack (3.2.1) lib/action_controller/metal/hide_actions.rb:36:in `visible_action?'
actionpack (3.2.1) lib/action_controller/metal/hide_actions.rb:18:in `method_for_action'
actionpack (3.2.1) lib/action_controller/metal/implicit_render.rb:14:in `method_for_action'
actionpack (3.2.1) lib/action_controller/metal/compatibility.rb:61:in `method_for_action'
actionpack (3.2.1) lib/abstract_controller/base.rb:115:in `process'
actionpack (3.2.1) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.1) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.1) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.1) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `call'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:30:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:589:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.1) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `_run__960052277__call__392212310__callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.1) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.1) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.1) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/static.rb:53:in `call'
railties (3.2.1) lib/rails/engine.rb:479:in `call'
railties (3.2.1) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.1) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

应用程序/控制器/users_controller.rb

```
class UsersController < ApplicationController
  # Be sure to include AuthenticationSystem in Application Controller instead
  include AuthenticatedSystem

  # render new.rhtml
  def new
    @user = User.new
  end

  def create
    logout_keeping_session!
    @user = User.new(params[:user])
    success = @user && @user.save
    if success && @user.errors.empty?
      redirect_back_or_default('/', :notice => "Thanks for signing up!  We're sending you an email with your activation code.")
    else
      flash.now[:error]  = "We couldn't set up that account, sorry.  Please try again, or contact an admin (link is above)."
      render :action => 'new'
    end
  end

  def activate
    logout_keeping_session!
    user = User.find_by_activation_code(params[:activation_code]) unless params[:activation_code].blank?
    case
    when (!params[:activation_code].blank?) && user && !user.active?
      user.activate!
      redirect_to '/login', :notice => "Signup complete! Please sign in to continue."
    when params[:activation_code].blank?
      redirect_back_or_default('/', :flash => { :error => "The activation code was missing.  Please follow the URL from your email." })
    else 
      redirect_back_or_default('/', :flash => { :error  => "We couldn't find a user with that activation code -- check your email? Or maybe you've already activated -- try signing in." })
    end
  end

  def forgot  
  if request.post?  
    user = User.find_by_email(params[:user][:email])  

    respond_to do |format|  
      if user  
        user.create_reset_code  
        flash[:notice] = "Reset code sent to #{user.email}"  

        format.html { redirect_to login_path }  
        format.xml { render :xml => user.email, :status => :created }  
      else  
        flash[:error] = "#{params[:user][:email]} does not exist in system"  

        format.html { redirect_to login_path }  
        format.xml { render :xml => user.email, :status => :unprocessable_entity }  
      end  
    end  

  end  
end  

def reset  
  @user = User.find_by_reset_code(params[:reset_code]) unless params[:reset_code].nil?  
  if request.post?  
    if @user.update_attributes(:password => params[:user][:password], :password_confirmation => params[:user][:password_confirmation])  
      self.current_user = @user  
      @user.delete_reset_code  
      flash[:notice] = "Password reset successfully for #{@user.email}"  
      redirect_to root_url  
    else  
      render :action => :reset  
    end  
  end  
end  

end 
```

应用程序/视图/用户/new.html.erb

```
<h1>Sign up as a new user</h1>
<% @user.password = @user.password_confirmation = nil %>

<%= error_messages_for :user %>
<%= form_for :user, :url => users_path do |f| -%>
<p><%= label_tag 'login' %><br/>
<%= f.text_field :login %></p>

<p><%= label_tag 'email' %><br/>
<%= f.text_field :email %></p>

<p><%= label_tag 'password' %><br/>
<%= f.password_field :password %></p>

<p><%= label_tag 'password_confirmation', 'Confirm Password' %><br/>
<%= f.password_field :password_confirmation %></p>

<p><%= submit_tag 'Sign up' %></p>
<% end -%> 
```

配置/路由.rb

```
Blog::Application.routes.draw do
  resources :users

  resource :session, :only => [:new, :create, :destroy]

  match 'signup' => 'users#new', :as => :signup

  match 'register' => 'users#create', :as => :register

  match 'login' => 'sessions#new', :as => :login

  match 'logout' => 'sessions#destroy', :as => :logout

  match    'forgot', :controller => 'users', :action => 'forgot'  
  match    'reset/:reset_code', :controller => 'users', :action => 'reset'  

  match '/activate/:activation_code' => 'users#activate', :as => :activate, :activation_code => nil

  resources :posts do
    resources :comments
  end

(...) 
```

如果您需要更多文件，请告诉我。谢谢！

# visual-studio-2012 - 如何在签入时禁用任务的自动完成状态

> ID：12263972
> 
> 赞同：59
> 
> 时间：2012-09-04T12:57:38.920
> 
> 标签：visual-studio-2012, tfs

我们刚刚开始使用 TFS 2012，这似乎是 2008 年 VS2012 可用性的巨大升级。

但是，如果您将工作与某个任务联系起来，“我的工作”功能有一个非常烦人的功能。将任务与工作项连接后，对任何分支的任何签入都会将该任务标记为“完成”状态。我怎样才能禁用它？我想要开发分支，这样我就可以在开发过程中进行小提交，但是如果我这样做，我无法将任务与我当前的工作联系起来。做到这一点的唯一方法（我知道）是在我将个人分支中的所有小提交合并到 master 之前为我当前的工作选择任务。是的，这是可行的，但它不像它可能的那样好的工作流程。

使用 scrum 模板中的任务板功能，在工作完成后将任务移动到完成无论如何都是工作流程中微不足道且常见的部分。自动完成的运动是非常烦人的自动化，不应该存在。

所以我的问题是：如何禁用它？此功能是模板的一部分还是与 TFS 工作项管理更深入的集成？

我们正在使用 Microsoft 的 Scrum 2.0 模板。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-09-04T13:40:54.160

当您在 Pending Changes 面板中准备签入您的修复并将您的工作项与变更集相关联时，您应该将“Resolve”更改为“Associate”（或 Scrum 中的任何内容）。

![待更改](../Images/9be89f6796ffc52fc09ac2ab897ffefb.png)

* * *

为了使这个默认值更复杂。

您将需要为正在使用的工作项类型（Bug、任务等）[编辑工作项模板定义。](http://www.dotnetcurry.com/ShowArticle.aspx?ID=753)

**一种**选择是完全删除“解决”选项，您可以按如下方式执行此操作：

打开您的 Work Item Type 的 XML（或 Power Toys 中的 GUI，如果您愿意）： 查找并删除：

*   `<ACTION> <ACTION value="Microsoft.VSTS.Actions.Checkin" /> </ACTION>`

模板中的部分 - 它将`<TRANSITIONS>`针对 2 个状态之间的特定转换。

这样做意味着 TFS 永远不会在签入过程中转换您的工作项，您每次都必须这样做。

**另一个**选项是添加一个没有签入操作的新工作项“状态”（例如“开发中”）。然后，您可以将您的工作项目转换到此状态，然后对其进行处理，然后返回到“已分配”（或其他），然后再将它们签入并“解决”它们。

Wrox的[Professional Team Foundation Server 2010 书籍](http://www.amazon.co.uk/Professional-Team-Foundation-Server-Programmer/dp/0470943327)将有助于 WIT 编辑。

可能有更多方法可以做到这一点，这完全取决于您工作的团队和环境:)。

* * *

还有另一种仅影响[您](http://blogs.msdn.com/b/mitrik/archive/2010/12/03/how-to-make-associate-the-default-action-for-work-items.aspx)**的客户端计算机的**方法：

要使“关联”成为默认操作（而不是“解决”），请设置注册表项

`HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\12.0\TeamFoundation\SourceControl\Behavior\ResolveAsDefaultCheckinAction`到`False`.

**注意**用VS2015、VS 2012 或VS 2010替换`12.0`（对于 VS2013） 。`14.0``11.0``10.0`

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-11-05T16:04:09.590

现在您可以升级到 VS2015（如果尚未这样做）并取消选中[新复选框](https://visualstudio.uservoice.com/forums/121579-visual-studio-2015/suggestions/3418758-in-the-team-explorer-change-default-state-value-o)工具 > 选项 > 源代码管理 > Visual Studio Team Foundation > “在签入时解决关联的工作项”。之后，“关联”成为默认选项，您无需在提交时手动更改它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-25T11:22:36.047

在 Visual Studio 2015 中，这可以通过在“选项”菜单中取消选中“在签入时解决关联的工作项”来完成。

```
Tools > Options > Source Control > Visual Studio Team Foundation Server 
```

[![Visual Studio 屏幕截图](../Images/90a00517d908467323cd7a5adbc8845d.png)](https://i.stack.imgur.com/gChGs.png)

编辑：错别字

# java - Java Gradle：如何使用 java-plugin jar 任务包含外部 jar？

> ID：12263973
> 
> 赞同：1
> 
> 时间：2012-09-04T12:57:42.453
> 
> 标签：java, build, gradle, dependency-management

```
apply plugin: 'java'

archivesBaseName = 'foo-client'
sourceCompatibility = JavaVersion.VERSION_1_7
targetCompatibility = JavaVersion.VERSION_1_7
//version = '1.0'
dependencies{
    compile 'foo:bar:1.0-SNAPSHOT', 
            'foo:bar-common:1.0-SNAPSHOT', 
            'foo:bar-communication-api:1.0-SNAPSHOT'
}
repositories{ 
    flatDir{
        dirs '/lib'
    }
} 
```

执行继承`jar`任务时，会`foo-client.jar`在`build/lib`项目目录下创建。我需要做的是在同一个目录中包含几个 jar，否则项目将无法正常运行。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:11:40.397

您可以将外部 jar 定义为运行时依赖项，然后使用复制任务将它们复制到 build/lib，例如：

```
task copyLibs(type: Copy) {
    from configurations.runtime
    into "$buildDir/libs"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:36:30.017

使用 Gradle 1.1 可以解决问题，

```
apply plugin: 'java'

archivesBaseName = 'foo-client'
sourceCompatibility = JavaVersion.VERSION_1_7
targetCompatibility = JavaVersion.VERSION_1_7

task copyToLib(type: Copy){
    into 'bar\\lib'
    from configurations.runtime
    from configurations.default.allArtifacts.getFiles()
}

dependencies{
    compile 'foo:bar-agent-dist:2.0.0-SNAPSHOT', 
            'foo:bar-common:2.0.0-SNAPSHOT', 
            'foo:bar-communication-api:2.0.0-SNAPSHOT'
}

repositories{ 
    flatDir{
        dirs '/lib'
    }
} 
```

# c# - 接口和基类的类成员

> ID：12263974
> 
> 赞同：2
> 
> 时间：2012-09-04T12:57:46.150
> 
> 标签：c#, .net

我有一个名为的基类`Graph`和一个名为`IDataTip`.

我有许多实现这两个的类，例如：

```
class TreeGraph : Graph, IDataTip
{
  //interface implementation
} 
```

我想知道是否有办法声明*另一个*类的成员，使得成员的类型需要与抽象类和接口匹配的类*？*

例如，在以下类中：

```
class GraphExporter
{
    public Object GraphWithDataTip {set; get;}
} 
```

我希望能够`Object`用指示`GraphWithDataTip`应该继承`Graph`和实现的东西替换类型`IDataTip`。有没有办法做到这一点？或者如果没有，有人可以推荐一个更明智的设计吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T13:01:16.213

您可以使用*通用约束*：

```
public class FooClass<T> where T: Graph, IDataTip
{
    public T Foo { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T13:02:05.260

听起来好像您想要：

*   `abstract class thing : Graph, IDataTip`用于您的参数的新基本类型 ( )
*   形式的通用方法`void MyMethod<T>(T thing) where T : Graph, IDataTip`

或者，您可以在方法中强制转换参数并在不合适时抛出异常，但这将是仅运行时检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T13:02:23.820

您可以定义 Graph 和 IDataTip 都实现的接口，然后让*另一个*类的成员成为该新接口的实例。

```
//new interface
interface IGraphAndDataTip
{
}

class Graph : IGraphAndDataTip
{
}

interface IDataTip : IGraphAndDataTip
{
}

class AnotherClass
{
    //implements both graph and IDataTip
    IGraphAndDataTip MyMember;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T13:03:51.430

我假设您的意思是基类的派生类？你是这个意思吗？

```
public abstract class Graph {
    public abstract void SomeMethod();
}

public interface IDataTip {
    void SomeMethod();
}

public class MyClassDerivedFromGraph: Graph, IDataTip {
    void SomeMethod() {
       // This method matches both the interface method and the base class method.
    }
} 
```

# c - 带有 16 位灰度图像的 cvSobel

> ID：12263979
> 
> 赞同：1
> 
> 时间：2012-09-04T12:58:06.007
> 
> 标签：c, opencv

我有一个 10 位灰度图像，我喜欢使用 cvSobel 函数。文档不清楚它是否可以接受 16 位灰度图像。当我尝试完成这项工作时，我得到了 OpenCV 的异常。

在我的 VC++ 中，当我查看函数时，这就是我所看到的。

```
 CVAPI(void) cvSobel( const CvArr* src, CvArr* dst,
            int xorder, int yorder,
            int aperture_size CV_DEFAULT(3)); 
```

我试图使目的地 32F 但仍然崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T01:49:55.880

它[在这里](http://www710.univ-lyon1.fr/~bouakaz/OpenCV-0.9.5/docs/ref/OpenCVRef_ImageProcessing.htm#decl_cvSobel)说：

> 为避免溢出，如果源图像为 8 位，则该函数需要 16 位目标图像。可以使用 cvConvertScale 或 cvConvertScaleAbs 函数将结果转换回 8 位。除了 8 位图像，该函数还可以处理 32 位浮点图像。源和目标都必须是相同大小或 ROI 大小的单通道图像。

因此，您可以将源转换为 8 位，然后将目标声明为 16 位。

如果这不起作用，您可以发布代码的特定部分也会有所帮助。

# c# - 将数据类型 varchar 转换为 datetime 时出错

> ID：12263980
> 
> 赞同：0
> 
> 时间：2012-09-04T12:58:11.953
> 
> 标签：c#, sql-server-2008

我在 DB 表中有 2 列，`EntryDate`它的类型是`datetime`，另一列`EntryTime`是`Time`

我创建了一个需要日期时间参数`@DatetimeParam`的过程，就像

```
select * from [TableName] where EntryDate+EntryTime <=@DatetimeParam 
```

它不起作用*将数据类型 varchar 转换为 datetime 时出错*。

我正在使用 sql2008 和 c#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:02:34.677

对于初学者，您的表结构是多余的。您的`DateTime`列能够存储日期和时间组件，但即便如此。您的 C# 代码中必须有一个未发布的错误，因为如果 @DateTimePAram 是一个有效值，那么您的 sql 将起作用。

```
use TempDB

CREATE TABLE #temp (a DateTime, b Time)
INSERT INTO #temp (a,b) values ('2012-01-01', '12:00:00.000')
SELECT * FROM #temp where a+b < getdate()
DROP TABLE #temp 
```

# c# - Excel 服务无法打开工作簿

> ID：12263984
> 
> 赞同：2
> 
> 时间：2012-09-04T12:58:32.060
> 
> 标签：c#, excel, sharepoint

我正在尝试使用服务器上的 Excel 服务在 sharepoint 2010 中打开工作簿（excel 2010）。无论我尝试打开哪个工作簿（即使我从头开始创建一个），excel 服务的“OpenWorkbookForEditing”方法都会失败，并显示“无法打开您选择的工作簿。工作簿可能是不受支持的文件格式，或者它可能腐败。”

我已经用谷歌搜索了这一天，网上的所有答案似乎都不合适。我已经重置了 IIS，我已经删除了 excel 信任中心中的所有安全设置，我尝试了 .xls、.xlsx、.xlsm 文件，我确保 excel 文件位于 SharePoint 中的受信任位置。

我对此完全感到困惑。

```
 SPListItem newListItem = SPContext.Current.Web.GetListItem(SPContext.Current.Web.Lists[Constants.SharePointListName.TemporaryFileLibrary].RootFolder.ServerRelativeUrl + "/" + SPContext.Current.Web.Properties[SPContext.Current.Web.CurrentUser.LoginName].ToString());

        Microsoft.Office.Excel.Server.WebServices.ExcelService cli = new Microsoft.Office.Excel.Server.WebServices.ExcelService();
        Microsoft.Office.Excel.Server.WebServices.Status[] status;

        // Open the workbook. - THIS IS THE POINT OF FAILURE.
        string sessionId = cli.OpenWorkbookForEditing(SPContext.Current.Web.Url + "/" + newListItem.File.Url, "", "", out status); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:26:48.447

确保为 Web 应用程序配置了 Excel 服务“服务应用程序关联”。

您可以在以下位置启用该功能

应用程序管理->Web 应用程序->管理 Web 应用程序->选择您的 Web 应用程序->服务连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:51:51.663

尝试记录以下值：

```
 SPContext.Current.Web.Url + "/" + newListItem.File.Url 
```

这可能不是一个excel文件。

# mongodb - Mongodb java - 如何查询特定的参考id值

> ID：12263987
> 
> 赞同：0
> 
> 时间：2012-09-04T12:58:34.253
> 
> 标签：mongodb, mongodb-java, dbref

我有两个收藏

```
 checkone
    {"_id":1,"name":"alex"},
    {"_id":2,"name":"sandy"}
  checktwo
    {"_id":11,"password":"alex",tenant_id:{$ref:"checkone","$id":1}}
    {"_id":12,"password":"alex",tenant_id:{$ref:"checkone","$id":2}} 
```

我正在查询特定字段的tenant_id 值。

```
 DB database = mongo.getDB("testcheck");
    DBCollection tenant = database.getCollection("checktwo");
    BasicDBObject query = new BasicDBObject();
    BasicDBObject field = new BasicDBObject();
    field.put("tenant_id.$id", 1);
            DBCursor cursor = tenant.find(query,field);
                while (cursor.hasNext()) {
        System.out.println("cursor value");
        System.out.println(cursor.next().get("tenant_id.$id"));
    } 
```

输出：

游标值 null 游标值 null

但是当我查询 System.out.println(cursor.next().get("_id"));

输出：光标值 11.0 光标值 12.0

如何单独查询tenant_id 值？输出必须是光标值1，光标值2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:25:48.383

你想使用这个`DBRef`类。`while()`这是对原始循环的重写。

```
 BasicDBObject query = new BasicDBObject();
    BasicDBObject field = new BasicDBObject();
    DBCursor cursor = tenant.find( query, field );

    while( cursor.hasNext() ) {
        System.out.println( "cursor value" );
        DBRef ref = ( DBRef )cursor.next().get( "tenant_id" );
        System.out.println( ref.getId() );
    } 
```

# asp.net-mvc - 在 VB ASP.NET MVC 中调度任务

> ID：12263988
> 
> 赞同：0
> 
> 时间：2012-09-04T12:58:44.933
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, scheduled-tasks, quartz-scheduler

我正在阅读使用 Quartz [http://quartznet.sourceforge.net/tutorial/lesson_3.html](http://quartznet.sourceforge.net/tutorial/lesson_3.html)但我不明白如何实现。我也在阅读此[https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)，也不明白如何实现，具体来说，我应该把它放在哪里以及我该怎么做访问我的控制器/操作？

上面链接的文章有一条评论建议使用“...... global.asax 中的简单计时器”。如何做到这一点？

基本上，我想知道如何（以及最好的方法）在以下控制器上安排以下操作？

```
Public Class RssController
    Inherits System.Web.Mvc.Controller

    Function InsertRssFeedItem(ByVal url as String) As ActionResult

      ' code to get RSS and insert into database '

    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:26:04.513

我通常认为让 Web 服务器进行自动化是不好的做法，我更喜欢将其保留在更适合自动化工作的服务中。

也就是说，使用上面的文章，我会将标题为 using Quartz.net 的部分放入 global.asax 中的 application_start

在 application_end 中，关闭作业调度程序。

最后，在一个文件夹中，编写如下类：

**C＃**

```
public class InsertRssFeedJob : IJob
{
     public void Execute(JobExecutionContext context)
     {
          var rssController = new RssController();
          rssController.InsertRssFeedItem("");
     }
} 
```

**VB.net**

```
Public Class InsertRssFeedJob
    Implements IJob

    Public Sub Execute(context as JobExecutionContext)
        Dim rssContoller = new RssController()
        rssController.InsertRssFeedItem("")
    End Sub

End Class 
```

~~抱歉，我不太了解 VB，无法在 IDE 之外编写它，因此您需要转换此 c#。~~

```
 private static IScheduler _scheduler; 
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        _scheduler = new StdSchedulerFactory().GetScheduler();

        JobDetail jobDetail = new JobDetail("rssFeedJob", null, typeof(InsertRssFeedJob));
        // fire every hour
        Trigger trigger = TriggerUtils.MakeHourlyTrigger();
        // start on the next even hour
        trigger.StartTime = TriggerUtils.GetEvenHourDate(DateTime.UtcNow);
        trigger.Name = "myTrigger";

        _scheduler.ScheduleJob(jobDetail, trigger); 

    }

    protected void Application_End()
    {
        _scheduler.Shutdown();
    } 
```

此外，如果 RssController 需要访问任何上下文信息，则需要从 HttpContext 类中获取。

硅

# android - 如何在 Android 中更改按钮单击时的 WebView 内容？

> ID：12263991
> 
> 赞同：1
> 
> 时间：2012-09-04T12:58:54.840
> 
> 标签：android, android-webview

我正在实现一个小项目，我在我的 web 视图中显示本地图像（为了使用缩放和平移功能），然后单击按钮，将加载下一个图像。我可以加载图像，但在按钮上单击我无法使用新图像重新加载 web 视图。

任何建议都会非常有帮助。:)

下面是我的 WebViewActivity.java 代码：

```
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.web_view_activity);

    // Initialize all View Components

    flippy = (ViewFlipper)findViewById(R.id.viewFlipper1);
    WebView mWebView = (WebView) findViewById(R.id.webView);
    next = (ImageButton)findViewById(R.id.next);
    next.setAlpha(100);
    previous = (ImageButton)findViewById(R.id.previous);
    previous.setAlpha(100);

    mWebView.setInitialScale(0);
    WebSettings webSettings = mWebView.getSettings();
    webSettings.setUseWideViewPort(true);

    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadUrl("file:///android_asset/start.png");
    mWebView.getSettings().setBuiltInZoomControls(true);

}

public void onClickFeature (View v)
{
    int id = v.getId ();
    switch (id) {
    case R.id.next :    
            imagename = /*nextImagename*/;
           mWebView.loadUrl(imagename)
               flippy.showNext();
            break;

    case R.id.previous:
            imagename = /*previousImagename*/;
    mWebView.loadUrl(imagename)
        flippy.showNext();
    break;
    default:
    break;
}
} 
```

以下是 web_view_activity.xml

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<ViewFlipper
         android:id="@+id/viewFlipper1"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent" >

    <WebView
        android:id="@+id/webView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</ViewFlipper>

    <ImageButton
        android:id="@+id/previous"
        android:layout_width="59dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center|left"
        android:background="@null"
        android:onClick="onClickFeature"
        android:src="@drawable/previous" />

    <ImageButton
        android:id="@+id/next"
        android:layout_width="59dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center|right"
        android:background="@null"
        android:onClick="onClickFeature"
        android:src="@drawable/next" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:32:09.183

```
next.setOnClickListener(new View.OnClickListener() 
{
 public void onClick(View v) {
    WebViewActivity.this.mWebView.loadUrl("your url array");
 }
}); 
```

您需要手动处理 url 数组的递增和递减。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:06:33.283

这个问题可以帮助你解决问题： [android how to create a try it own editor](https://stackoverflow.com/questions/11644156/android-how-to-create-a-try-it-yourself-editor/11644543#11644543)

您可以动态准备和上传数据到您的 WebView（或从网络设置 url）

# c# - Crystal Reports 仅打印一页数据 C# VIsual Studio 2010

> ID：12263998
> 
> 赞同：1
> 
> 时间：2012-09-04T12:59:08.257
> 
> 标签：c#, visual-studio-2010, crystal-reports

我正在使用 Visual Studio 2010，C#。我有以下代码来打印水晶报告-

```
crtDiaryLabel.RecordSelectionFormula = "{PANEL_RESULT.PANEL_NUM} = " + lPanelStudyNum + " AND {PANEL_RESULT.PANEL_LEG} ='" + tPanelLeg + "' AND {PANEL_RESULT.GENERIC_PANELIST_NUM} = " + iGenPanelistNum + " AND {PANEL_RESULT.USE_NUM} <> {PANEL_RESULT.BKUP_NUM}";    
 foreach (Table tblTable in crtDiaryLabel.Database.Tables)
    {
         tiInfo = tblTable.LogOnInfo;
         tiInfo.ConnectionInfo = ciConnection;
         tblTable.ApplyLogOnInfo(tiInfo);
    }
 crtDiaryLabel.PrintToPrinter(1, false, 0, 0); 
```

它将打印我选择的所有记录，但只有第一条记录将包含 RecordSelectionFormula 中设置的任何数据。此报告上还有一个条形码，并且仅打印出第一个记录。第二条记录仅包含没有实际数据的标签。

我试图乱序打印并且没有效果，无论我选择第一个还是第二个记录，只有第一个打印的记录会有任何数据。

关于为什么会发生这种情况以及如何解决它的任何想法？

谢谢。