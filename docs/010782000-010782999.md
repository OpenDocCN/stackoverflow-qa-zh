# StackOverflow 问答 10782000-10782999

# salesforce - java.lang.ClassCastException：com.force.sdk.jdo.ForceJDOPersistenceManagerFactory 无法转换为 javax.jdo.PersistenceManagerFactory

> ID：10782002
> 
> 赞同：1
> 
> 时间：2012-05-28T09:05:13.653
> 
> 标签：salesforce, jboss5.x, datanucleus, force.com

在将我的 EAR 应用程序重新部署到 JBoss EAP 5 时，我遇到了这个异常。在服务器启动期间部署应用程序时，一切正常。

```
Caused by: javax.jdo.JDOFatalInternalException: The PersistenceManagerFactory class must define a static method 
PersistenceManagerFactory getPersistenceManagerFactory(Map props). 
The class "com.force.sdk.jdo.ForceJDOPersistenceManagerFactory"
has the wrong return type for the getPersistenceManagerFactory(Map props) method.
NestedThrowables:
java.lang.ClassCastException: com.force.sdk.jdo.ForceJDOPersistenceManagerFactory cannot be cast to javax.jdo.PersistenceManagerFactory
    at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1180)
    at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:803)
    at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:698)
    at org.datanucleus.jpa.EntityManagerFactoryImpl.initialisePMF(EntityManagerFactoryImpl.java:572)
    at org.datanucleus.jpa.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:375)
    at com.force.sdk.jpa.ForceEntityManagerFactory.<init>(ForceEntityManagerFactory.java:63)
    at com.force.sdk.jpa.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:79)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:52)
    at org.springframework.orm.jpa.LocalEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalEntityManagerFactoryBean.java:92)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:308)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 53 more
Caused by: java.lang.ClassCastException: com.force.sdk.jdo.ForceJDOPersistenceManagerFactory cannot be cast to javax.jdo.PersistenceManagerFactory
    at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1159)
    ... 64 more 
```

我的 /lib 目录内容：

```
asm-3.3.1.jar               datanucleus-enhancer-2.1.3.jar   force-jpa-22.0.8-BETA.jar      force-wsc-22.0.0.jar           gss-force-proxy-jpa-1.0-SNAPSHOT.jar  js-1.7R2.jar
cglib-2.2.jar               datanucleus-jpa-2.1.3.jar        force-metadata-api-22.0.0.jar  geronimo-jpa_2.0_spec-1.0.jar  javax.inject-1.jar                    transaction-api-1.1.jar
datanucleus-core-2.2.3.jar  force-connector-22.0.8-BETA.jar  force-partner-api-22.0.0.jar   gson-1.7.1.jar                 jdo2-api-2.3-eb.jar 
```

有什么想法/线索吗？谢谢

# extjs - 重新加载 Ext.data.Store 模型？

> ID：10782007
> 
> 赞同：0
> 
> 时间：2012-05-28T09:05:34.810
> 
> 标签：extjs, model, store, reload, extjs3

我正在尝试解决 ExtJs 网站的一些问题，但不确定如何继续。基本上，我有一个加载`Ext.data.Store`模型的表单。对于新模型，模型对象最初没有 ID。保存后，Web 服务会为其分配一个 ID。

问题是这个`Ext.data.Store`模型在保存后没有被重新加载，所以它没有ID，这在以后会导致一些问题。

那么有什么办法可以强制 ExtJs 保存后重新加载 store 模型呢？我检查了文档，`Ext.data.Store`但看不到任何“reload()”或“refresh()”方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:46:25.660

你不需要做任何特别的事情。`phantom`ExtJs 有一个逻辑，在更新过程之后用从商店收到的新副本替换带有标志的模型。检查几件事：

确保您已`idProperty`在模型中正确指定。这就是 ExtJs 将如何检测记录是否是新的。

确保您的商店在响应消息中正确返回新的/更新的记录。

确保您的数据阅读器正确解析响应消息中的这些记录。

# c++-cli - 将 MyClass 值存储在 List 中

> ID：10782010
> 
> 赞同：1
> 
> 时间：2012-05-28T09:05:45.400
> 
> 标签：c++-cli, generic-collections

我对 C++\CLI 完全陌生，并且遇到以下问题：例如，我有一个名为 MyClass 的类，其中一些值需要存储在内存中。我决定使用 List，因为它是我最熟悉的，因为我长期使用 C#。所以这里是代码：

```
//Header File
ref class MyClass
{
public:
    MyClass(void);
private:
    System::Collections::Generic::List<MyClass^> values;
};
//CPP file
MyClass::MyClass(void){
this->values=gcnew System::Collections::Generic::List<MyClass^>();
} 
```

编译器一直说有一个错误[C2582](http://msdn.microsoft.com/en-us/library/aa983787%28v=vs.71%29.aspx)。但是如果没有赋值运算符，那么我应该如何初始化列表呢？
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:35:26.493

`values`不应该是一个`List<...^>`，而是一个`List<...^>^`。您要分配引用，而不是创建列表的另一个克隆。

# c# - 如何在独立 mdf 中恢复和备份数据

> ID：10782014
> 
> 赞同：0
> 
> 时间：2012-05-28T09:06:05.917
> 
> 标签：c#, sql, mdf

我正在 c# Visual Studio 2010 中开发一个 Windows 窗体应用程序，我想在其中创建一个允许用户自行恢复和备份数据库的功能。问题是我使用的是独立的 mdf 文件。

我通过将 mdf 文件附加到应用程序来使用 sql server express，当我尝试使用查询进行备份时，它可以工作，但是当我尝试使用查询恢复数据库时，它说它没有更改表的权限。然后我尝试使用 smo 但它说无法打开文件。所以我想知道是否有任何选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:43:45.603

要使用 t-sql 创建备份，您可以使用：

```
BACKUP DATABASE AdventureWorks 
TO DISK = 'C:\BACKUP\AdventureWorks.bak'
GO 
```

要恢复使用：

```
RESTORE DATABASE AdventureWorks FROM DISK = 'C:\BACKUP\AdventureWorks.bak'
GO 
```

添加`WITH REPLACE`以替换现有数据库。

您可以使用`ExecuteNonQuery`.

*注意：*这适用于标准 SQL Server，但我没有在带有附加数据库文件的 SQL Server Express 上使用它。

# android - 如何在android中更改位图的宽度高度

> ID：10782021
> 
> 赞同：2
> 
> 时间：2012-05-28T09:06:30.297
> 
> 标签：android, bitmap

在我的应用程序中，我必须获得一个位图，然后通过将其乘以 3/4 来更改此位图的宽度。这样做的最好方法是什么？

# youtube-javascript-api - 为 Youtube Chromeless Player 指定质量不起作用？

> ID：10782023
> 
> 赞同：1
> 
> 时间：2012-05-28T09:06:42.127
> 
> 标签：youtube-javascript-api

我正在使用 Youtube Chromeless 播放器进行开发。
我的播放器尺寸是 400 x 225px。

默认情况下，Youtube 将这些尺寸的视频质量设置为“小”级别。
然而，由于“小”质量的视频看起来很难看，我想将它们升级到“中等”质量水平。

这是我的代码：

```
ytplayer.loadVideoById(youtube_id, start, "medium"); 
```

不幸的是，它似乎不起作用......当我在控制台上进行一些检查时：

```
ytplayer.getPlaybackQuality();
"small" 
```

有人在使用 Youtube API 时遇到同样的问题吗？如果不是，您如何指定 Youtube 视频的质量？

**====== 编辑 =======**

我意识到一旦视频开始播放，setPlaybackQuality 函数就会起作用。因此，我尝试了下面的 hack。它完美地工作，但宁愿找到另一种解决方案......

```
ytplayer.loadVideoById(YOUTUBE_ID, START);
setTimeout(function(){
    // If medium quality available
    if(ytplayer.getAvailableQualityLevels().indexOf("medium") != -1){
        ytplayer.setPlaybackQuality("medium");
    }
},1000) 
```

非常感谢，

坝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:27:48.537

好的，我终于设法解决了这个问题。

我做了一个不同的黑客，但不那么丑陋。这里是：

```
function onYoutubePlayerReady(playerId){
    [...]

    // Add event listener to monitor quality
    ytplayer.addEventListener("onPlaybackQualityChange","onQualityChange");

    // Triggers the video
    ytplayer.loadVideoById(youtube_id, start, "medium");

    [...]

} 
```

这是负责将视频质量强制为“中等”的事件侦听器

```
function onQualityChange(qualityState){
    if(qualityState != "medium" && ytplayer.getAvailableQualityLevels().indexOf("medium") != -1){
        ytplayer.setPlaybackQuality("medium");
    }
} 
```

现在就像一个魅力。

如果您有任何建议，请告诉我。

# mime-types - css mime 类型返回为 text/plain 而不是 text/css

> ID：10782024
> 
> 赞同：6
> 
> 时间：2012-05-28T09:06:42.810
> 
> 标签：mime-types

我正在使用此代码从给定文件中获取 mime 类型

```
$finfo = new \finfo(FILEINFO_MIME_TYPE);
$mime  = $finfo->buffer(file_get_contents($file)); 
```

如果我给它一个 PHP 文件，那么我会得到

```
text/x-php 
```

但是如果我给它一个 CSS 文件，我会得到

```
text/plain 
```

我一直试图解决这个问题无济于事，我的 Apache 中有 AddType 以允许 CSS 文件类型。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-03T03:06:10.350

只要*扩展名为*.css **，**您就需要告诉 Apache 将文件作为**text/css**提供。服务器区分样式表和任何其他类型的文本文件的唯一合理方法是通过文件名。

 ***您可以通过编辑名为**mime.types的 Apache 的***MIME 类型配置文件*（它位于不同的文件夹中，具体取决于您的发行版，可能尝试*/etc/apache2*）以进行以下关联：

 ***```
text/css                    css 
```

或者，如果您没有管理员访问权限，您可以在自己的 Web 根目录中创建一个**.htaccess文件。**有关这两种方法的更多信息，请[点击此处](http://www.hypercosm.com/support/howto6.html)

希望这可以帮助！

重读我们的问题后，也许我误解了您，您已经完成了上述步骤？

如果是这样，你能检查一下你的操作系统正在读取什么 mimetype 吗？有适当的命令来检查 mimetype，[在这里](http://blog.max.berger.name/2010/01/find-mime-type-for-file.html)：

此外，添加后续检查以查看文件扩展名是否以 .css 结尾似乎是务实的。有没有理由为什么这不起作用？******

# jquery - 将 jsTree 与 MVC .net 一起使用

> ID：10782029
> 
> 赞同：4
> 
> 时间：2012-05-28T09:07:20.297
> 
> 标签：jquery, asp.net-mvc, json

我有一个 MVC 项目，我试图在控制器对象中调用一个方法，但该方法没有被调用，这是代码。

## 。网

```
Namespace WindowTreeView
Public Class DefaultController
    Inherits System.Web.Mvc.Controller

    '
    ' GET: /Default

    Function Index() As ActionResult
        Return View()
    End Function

    Function GetTreeNodes() As JsonResult

    End Function

End Class
End Namespace 
```

## 查询

```
$(document).ready(function () {

$("#divJsTreeDemo").tree({
    data: {
        method: "POST",
        dataType: "json",
        url: "Default/GetTreeNodes",
        async: true,
        contentType: "application/json; charset=utf-8",
        data : "{}"
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:25:52.567

由于您正在请求数据，请尝试 GET 请求 - 不要发布！

```
method: "POST" 
```

然后您可以返回您的 JSON 结果并在 js 中解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:32:38.007

我基本上从他们的网站上复制了这个（看看[最后一个示例](http://www.jstree.com/demo)（PHP 和 mySQL 演示 + 事件顺序）），然后启动并运行它。稍微修改了粘贴的示例。

```
 $(function () {
        $("#demo")
            .jstree({
                "plugins": ["..."],
                "json_data": {
                    "ajax": {
                        "url": '@Url.Action("GetChildren")',
                        "data": function (n) {
                            return {
                                "id": n.attr ? n.attr("id") : -1
                            };
                        }
                    }
                },  
            });
    } 
```

但这可能不是您的问题... $("#divJsTreeDemo") **.tree** ({

# objective-c - 正确停止 AVAudioPlayer。目前在后台运行

> ID：10782030
> 
> 赞同：1
> 
> 时间：2012-05-28T09:07:21.157
> 
> 标签：objective-c, avaudioplayer, overlap

我已经为这个问题苦苦挣扎了很长一段时间。

我正在尝试制作一个包含播放列表并仅播放存储在应用程序中的音乐文件的播放器。

现在，我正在使用 AVAudioPlayer 播放 mp3 文件。我的问题是，当我加载播放列表时，我无法停止播放以前的 mp3，因此我在第一个音频和我从播放列表加载的所有其他音频文件之间得到混合声音。

所以，这是我的代码：

```
#import "MainViewController.h"
#import <Foundation/Foundation.h>

#pragma mark Audio session callbacks_______________________

@implementation MainViewController

@synthesize artworkItem;            
@synthesize userMediaItemCollection;    
@synthesize playBarButton;          
@synthesize pauseBarButton;         
@synthesize musicPlayer;            
@synthesize navigationBar;          
@synthesize noArtworkImage;             
@synthesize backgroundColorTimer;       

@synthesize nowPlayingLabel, AudFile;           
@synthesize appSoundButton;             
@synthesize addOrShowMusicButton;       

@synthesize appSoundPlayer;             
@synthesize soundFileURL;               
@synthesize interruptedOnPlayback;      

@synthesize playedMusicOnce;            

@synthesize playing;                    

#pragma mark Music control________________________________

- (IBAction) playOrPauseMusic: (id)sender {

}

- (IBAction) AddMusicOrShowMusic: (id) sender {    

        [audioPlayer stop];

    // Load the Playlist direcly 

    MusicTableViewController *controller = [[MusicTableViewController alloc] initWithNibName: @"MusicTableView" bundle: nil];
    controller.delegate = self;

    controller.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

    [self presentModalViewController: controller animated: YES];
    [controller release];

   }

#pragma mark Application playback control_________________

- (IBAction) playAppSound: (id) sender {

 //   [appSoundPlayer play];
//  playing = YES;
//  [appSoundButton setEnabled: NO];
}

// delegate method for the audio route change alert view; follows the protocol specified
//  in the UIAlertViewDelegate protocol.
- (void) alertView: routeChangeAlertView clickedButtonAtIndex: buttonIndex {

    if ((NSInteger) buttonIndex == 1) {
        [appSoundPlayer play];
    } else {
        [appSoundPlayer setCurrentTime: 0];
        [appSoundButton setEnabled: YES];
    }

    [routeChangeAlertView release];         
}

#pragma mark AV Foundation delegate methods____________

- (void) audioPlayerDidFinishPlaying: (AVAudioPlayer *) appSoundPlayer successfully: (BOOL) flag {

}

- (void) audioPlayerBeginInterruption: player {

}

- (void) audioPlayerEndInterruption: player {

}

#pragma mark Table view delegate methods________________

// Invoked when the user taps the Done button in the table view.
- (void) musicTableViewControllerDidFinish: (MusicTableViewController *) controller {

    [self dismissModalViewControllerAnimated: YES];
}

#pragma mark Application setup____________________________

#if TARGET_IPHONE_SIMULATOR
#warning *** Simulator mode: iPod library access works only when running on a device.
#endif

//play audio 2 

- (void)playAudio2:(NSString*) name type:(NSString*)type 
{
    [self stopAudio];

    [audioPlayer stop];
    [audioPlayer release];

    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]

                                         pathForResource:name

                                         ofType:type]];

    NSError *error;

    audioPlayer = [[AVAudioPlayer alloc]

                   initWithContentsOfURL:url

                   error:&error];

    if (error)

    {

        NSLog(@"Error in audioPlayer: %@", 

              [error localizedDescription]);

    } else {

        audioPlayer.delegate = self;

        [audioPlayer prepareToPlay];

    }  

    [audioPlayer play];

}

-(void)playAudio
{

    [appSoundPlayer play];

}
- (void)stopAudio
{

        [appSoundPlayer stop];

}

// Configure the application.
- (void) viewDidLoad {

    [super viewDidLoad];

    [self setPlayedMusicOnce: NO];

    [self setNoArtworkImage:    [UIImage imageNamed: @"no_artwork.png"]];       

    [self setPlayBarButton:     [[UIBarButtonItem alloc]    initWithBarButtonSystemItem: UIBarButtonSystemItemPlay
                                                                                 target: self
                                                                                 action: @selector (playOrPauseMusic:)]];

    [self setPauseBarButton:    [[UIBarButtonItem alloc]    initWithBarButtonSystemItem: UIBarButtonSystemItemPause
                                                                                 target: self
                                                                                 action: @selector (playOrPauseMusic:)]];

    [addOrShowMusicButton   setTitle: NSLocalizedString (@"Add Music", @"Title for 'Add Music' button, before user has chosen some music")
                            forState: UIControlStateNormal];

    [appSoundButton         setTitle: NSLocalizedString (@"Play App Sound", @"Title for 'Play App Sound' button")
                            forState: UIControlStateNormal];

    [nowPlayingLabel setText: NSLocalizedString (@"Instructions", @"Brief instructions to user, shown at launch")];

    // Configure a timer to change the background color. The changing color represents an 
    //      application that is doing something else while iPod music is playing.
    [self setBackgroundColorTimer: [NSTimer scheduledTimerWithTimeInterval: 3.5
                                                                    target: self
                                                                  selector: @selector (updateBackgroundColor)
                                                                  userInfo: nil
                                                                   repeats: YES]];

    [self setupAudioSession];

}

// Invoked by the backgroundColorTimer.
- (void) updateBackgroundColor {

    [UIView beginAnimations: nil context: nil];
    [UIView setAnimationDuration: 3.0];

    CGFloat redLevel    = rand() / (float) RAND_MAX;
    CGFloat greenLevel  = rand() / (float) RAND_MAX;
    CGFloat blueLevel   = rand() / (float) RAND_MAX;

    self.view.backgroundColor = [UIColor colorWithRed: redLevel
                                                green: greenLevel
                                                 blue: blueLevel
                                                alpha: 1.0];
    [UIView commitAnimations];
}

#pragma mark Application state management_____________

- (void) didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void) viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

-(void) setupAudioSession
{
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    NSError *setCategoryError = nil;
    [audioSession setCategory:AVAudioSessionCategoryPlayback error:&setCategoryError];
    if (setCategoryError){/* Handle Error COndition*/}
    NSError *activationError = nil;
    [audioSession setActive:YES error:&activationError];
    if (activationError){
        /*handle error*/
    }
}

// just for test , delete after

-(void) myInstanceMethod: (id)sender{

    [self setupAudioSession];
    [audioPlayer stop];
    [audioPlayer release];
    AudFile = sender;
    NSLog(@"My Instance metthod called ok with item : %@", sender);
   [self playAudio2:[NSString stringWithFormat:@"%@",AudFile] type:@"mp3"];

//[self setupApplicationAudio: sender];   

    NSLog(@"New Audfile is: %@", AudFile);
//    [self setupApplicationAudio];

}
+(void) myClassMethod{

    NSLog(@"Class Called ok");

}

- (void)dealloc {

/*
    // This sample doesn't use libray change notifications; this code is here to show how
    //      it's done if you need it.
    [[NSNotificationCenter defaultCenter] removeObserver: self
                                                    name: MPMediaLibraryDidChangeNotification
                                                  object: musicPlayer];

    [[MPMediaLibrary defaultMediaLibrary] endGeneratingLibraryChangeNotifications];

*/
    [[NSNotificationCenter defaultCenter] removeObserver: self
                                                    name: MPMusicPlayerControllerNowPlayingItemDidChangeNotification
                                                  object: musicPlayer];

    [[NSNotificationCenter defaultCenter] removeObserver: self
                                                    name: MPMusicPlayerControllerPlaybackStateDidChangeNotification
                                                  object: musicPlayer];

    [musicPlayer endGeneratingPlaybackNotifications];
    [musicPlayer                release];

    [artworkItem                release]; 
    [backgroundColorTimer       invalidate];
    [backgroundColorTimer       release];
    [navigationBar              release];
    [noArtworkImage             release];
    [nowPlayingLabel            release];
    [pauseBarButton             release];
    [playBarButton              release];
    [soundFileURL               release];
    [userMediaItemCollection    release];

    [super dealloc];
} 
```

我正在将播放列表中的文件名发送到我的播放器

```
-(void) myInstanceMethod: (id)sender{

    [self setupAudioSession];
    [audioPlayer stop];
    [audioPlayer release];
    AudFile = sender;
    NSLog(@"My Instance metthod called ok with item : %@", sender);
   [self playAudio2:[NSString stringWithFormat:@"%@",AudFile] type:@"mp3"];

//[self setupApplicationAudio: sender];   

    NSLog(@"New Audfile is: %@", AudFile);
//    [self setupApplicationAudio];

} 
```

我使用方法中的 UIModalTransition 从我的主视图控制器加载我的播放列表

```
- (IBAction) AddMusicOrShowMusic: (id) sender {    

        [audioPlayer stop];

    // Load the Playlist direcly 

    MusicTableViewController *controller = [[MusicTableViewController alloc] initWithNibName: @"MusicTableView" bundle: nil];
    controller.delegate = self;

    controller.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

    [self presentModalViewController: controller animated: YES];
    [controller release];

   } 
```

正如你所看到的，当我加载我的播放列表时，我告诉播放器停止播放

```
[audioPlayer stop]; 
```

但由于某种原因，它无法停止播放，因此会产生声音重叠。

这是我正在尝试解决的问题。

谢谢

和最好的问候！

# android - Android 中的错误代码 (200,-82)、MEDIA_ERROR_NOT_VALID_FOR_PROGRESSIVE_PLAYBACK

> ID：10782038
> 
> 赞同：1
> 
> 时间：2012-05-28T09:08:10.260
> 
> 标签：android, android-videoview

以下代码用于播放我的远程视频：

```
Uri uri = Uri.parse(URLPath);

vv.setVideoURI(uri);
vv.setOnCompletionListener(new OnCompletionListener() {
@Override
public void onCompletion(MediaPlayer mp) {
//play next one
}
});

vv.setOnErrorListener(new OnErrorListener() {
@Override
public boolean onError(MediaPlayer mp, int what, int extra) {
return false;
}
}); 
```

它适用于我的大多数设备。
但它不适用于某些设备（例如三星 Galaxy S2）。
我得到错误代码`Error (200,-82)`。
我发现它是`MEDIA_ERROR_NOT_VALID_FOR_PROGRESSIVE_PLAYBACK`。这是什么意思？
以及如何避免？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:14:13.280

[MEDIA_ERROR_NOT_VALID_FOR_PROGRESSIVE_PLAYBACK](http://developer.android.com/reference/android/media/MediaPlayer.html)正如文档所说：

> 视频是流式传输的，其容器对于渐进式播放无效，即视频的索引（例如 moov atom）不在文件的开头。

MediaPlayer在播放视频时经常会进入error状态，然后提示“can't play this video”对话框，所以你必须通过记住播放时间和重置MediaPlayer引擎后重新播放视频来处理这些错误。

您可以 `OnErrorListener`在代码中实现以处理此类错误：

```
private MediaPlayer.OnErrorListener mOnErrorListener = new MediaPlayer.OnErrorListener() {

 public boolean onError(MediaPlayer mp, int what, int extra) {

   switch (what) {

    case MediaPlayer.MEDIA_ERROR_SERVER_DIED:
         Toast.makeText(PlayerActivity.this, "MEDIA_ERROR_SERVER_DIED",
                                                    Toast.LENGTH_SHORT).show();                         
         return true;
    case MediaPlayer.MEDIA_ERROR_NOT_VALID_FOR_PROGRESSIVE_PLAYBACK:
        Toast.makeText(PlayerActivity.this,
                                            "MEDIA_ERROR_NOT_VALID_FOR_PROGRESSIVE_PLAYBACK",
                                                    Toast.LENGTH_SHORT).show();
         break;
     case MediaPlayer.MEDIA_ERROR_UNKNOWN:
         Toast.makeText(PlayerActivity.this, "MEDIA_ERROR_UNKNOWN",
                                                    Toast.LENGTH_SHORT).show();
         break;
        }

         setProgressContainer(true, getString(R.string.msg_handle_error));
        int position=mVideoView.getCurrentPosition();
        if(position>0){
                   mCurPosition=position;
        }
         mVideoView.setVideoPath(mCurrentMediaUrl,position);

         return true;
         }

}; 
```

# java - 当 EditText 中没有任何内容时，Android 程序崩溃

> ID：10782042
> 
> 赞同：0
> 
> 时间：2012-05-28T09:08:51.743
> 
> 标签：java, android, crash, android-edittext

当 ab EditText 没有任何价值时，任何人都知道如何防止 Android 应用程序崩溃？

编辑：对不起，我用手机发布了这个。干得好：

```
import java.util.Random;

import android.app.Activity;
import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.TextView;

public class RandomButtonActivity extends Activity implements SensorEventListener
{
    public float x = 0, y = 0, z = 0;           
    public float a = 10, b = 10, c = 10;
    public float k = 4;
    public int j = 0, i = 0;
    public int rand = 0;
    public String j1;
    public String i1;

    TextView testo;
    TextView ultimo;

    EditText limiteMin;
    EditText limiteMax;

    Random generator = new Random();

    SensorManager sm;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        testo = (TextView) findViewById(R.id.textView1);
        ultimo = (TextView) findViewById(R.id.textView4);

        limiteMin = (EditText) findViewById(R.id.editText2);
        limiteMax = (EditText) findViewById(R.id.EditText01);

        sm = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        sm.registerListener(this, sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);

        random();
    }

    public void onSensorChanged(SensorEvent event)
    {
        x = event.values[0];
        y = event.values[1];
        z = event.values[2];        

        if(x>a+k || x<a-k || y>b+k || y<b-k || z>c+k || z<c-k)
        {
            rand = random();
        }
        a = x;
        b = y;
        c = z;
    }

    public int random() 
    {
        j = Integer.parseInt(limiteMin.getText().toString());
        i = Integer.parseInt(limiteMax.getText().toString());
        int v = 0;

            if(i==0 && j==0)
            {
                v = generator.nextInt();                       
            }
            else if(j>=i && j!=0)
            {               
                v = 0;
            }           
            else
            {
                i = i+1;
                do
                {
                v = generator.nextInt(i);
                testo.setText("Random: "+v);
                }
                while(v<j);
            }
            testo.setText("Random: "+v);   
            ultimo.setText("Random precedente: "+rand);

        return v;
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) 
    {
    }
} 
```

仅当 2 个 EditTexts 中的 1 个为空并且调用 random() 方法时，程序才会崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:14:54.693

应用以下代码，

```
 EditText et= (EditText)findViewById(R.id.editText);
  if(et.getText.toString.equals(null) || et.getText.toString.equals(""))
   {
       Toast.makeText(this,"please enter something in text box",Toast.LENGTH_LONG).show(); 
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:17:19.913

您应该使用 == 操作符检查空值。

```
et.getText() == null 
```

对 null 值调用 toString() 会引发 NullPointer。这是你崩溃的原因吗？

# php - 将英国城市映射到邮政编码上

> ID：10782043
> 
> 赞同：0
> 
> 时间：2012-05-28T09:08:51.730
> 
> 标签：php

我想知道是否有人知道将英国城市映射到邮政编码的任何 PHP 脚本。

我发现了这样的东西：

```
 case'North West England, England': {
    $postcode = 'M1 2NQ';
    break;
  }
  case'North East England, England': {
    $postcode = 'NE1 6AD';
    break;
  }
  case'South West England, England': {
    $postcode = 'EX1 3AX';
    break;
  } 
```

但它仅涵盖您可以看到的区域，而不是诸如“曼彻斯特，爱丁堡”等城市。

任何投入将不胜感激。

谢谢，美联社

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:14:36.423

您可能会考虑使用[Google Map API](http://www.tomanthony.co.uk/blog/geocoding-uk-postcodes-with-google-map-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T15:59:30.477

您可以使用[ONS 邮政编码目录 (ONSPD)](http://www.ons.gov.uk/ons/guide-method/geography/products/postcode-directories/-nspp-/index.html)。您必须建立一个数据库并导入所有数据，然后围绕它构建您的应用程序。

# hibernate - 如何使用struts和hibernate在jsp页面上显示从数据库中获取的数据

> ID：10782047
> 
> 赞同：0
> 
> 时间：2012-05-28T09:09:12.590
> 
> 标签：hibernate, struts, struts-1

我正在尝试使用带有 struts 2 的 Hibernate 将数据从我的数据库显示到 Jsp 页面。虽然没有错误，但没有显示任何内容。我试图从其他帖子中找到解决方案，但找不到。这是动作类。

```
 public class ListeActeurAction  extends Action{

public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest req, HttpServletResponse res) throws Exception {
    System.out.println("Action");

    ListeActeur ListeActeur= (ListeActeur) form;
            String query = "select nomActeur from Acteur " ;
            ListeActeur.setLis( HibernateUtil.ListeActeur(query, req)); 
    req.setAttribute("ListeActeur", ListeActeur.getLis()) ;
                    return mapping.findForward("s"); 
```

方法：HibernateUtil.ListeActeur（查询，请求）

```
 public   static List <Acteur> ListeActeur(String query,HttpServletRequest req){

System.out.print("hutil");
Session session = HibernateUtil.getSessionFactory().getCurrentSession();
session.beginTransaction();
 Iterator results = session.createSQLQuery(query).list().iterator();
 List <Acteur> list = new ArrayList<Acteur>();

 while((results.hasNext()))
 {
     Acteur gg =new Acteur();
    //Object[] row = (Object[]) results.next();
    //gg.setActeurId((Integer)row[0]);
    gg.setNomActeur(( java.lang.String)results.next());

list.add(gg);
 }

req.getSession(true).setAttribute("ListeActeur", list);
 session.getTransaction().commit();
 HibernateUtil.getSessionFactory().close(); 
 return list; 
```

}

```
<html:form action="Liste" >
  <table>
    <tr>  
      <logic:iterate  name="ListeActeur" property= "lis"  id="Acteur" >
        <td><b>Nom Acteur:<bean:write name="Acteur" property="nomActeur"/></b> <br></td>
        <td><b>Adresse IP :<bean:write name="Acteur" property="adresseIp"/></b> <br>  </td>
      </tr>
    </logic:iterate>
  </table>
</html:form> 
```

struts-配置

```
 <!DOCTYPE struts-config 
    PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.0//EN" 
     "http://jakarta.apache.org/struts/dtds/struts-config_1_3.dtd">
    <struts-config>

<form-beans type="org.apache.struts.action.ActionFormBean">
  <form-bean name="ListeActeur" type="mesForms.strust.ListeActeur"/>
</form-beans>
    <action-mappings >
   <action path="/Liste" 
    parameter="/vue/Invitation.jsp"
    name="ListeActeur"
    scope="session"
    validate="false"
    type="mesAction.struts.ListeActeurAction">  
    <forward name="s" path="/vue/Invitation.jsp" redirect="false" />
    </action>
   </action-mappings>

 </struts-config> 
```

我不明白我在做什么错，请帮忙。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:03:49.207

您三次使用相同的属性名称：

```
<form-bean name="ListeActeur" type="mesForms.strust.ListeActeur"/>
<action path="/Liste" name="ListeActeur" scope="session" ... 
```

意味着 Struts在调用 action 时`mesForms.strust.ListeActeur`会在 session 属性中存储一个 bean 类型。`ListeActeur``/Liste`

在这个动作中，你正在做

```
req.setAttribute("ListeActeur", ListeActeur.getLis()); 
```

所以在这里，您将 a 存储`java.util.List`在 request 属性`ListeActeur`中。这个请求属性是完全没有必要的，因为相同的列表已经在已经存储在会话中的 bean ListeActeur 中可用。

但是等一下，在这之前，从 Hibernate 获取一些数据的代码决定做

```
req.getSession(true).setAttribute("ListeActeur", list) 
```

并用相同的`java.util.List`.

因此，要恢复，在此操作方法调用结束时，您有

*   请求`ListeActeur`中的类型属性`java.util.List`
*   `ListeActeur`会话中的类型属性`java.util.List`，与请求中存储的列表相同。

现在执行 JSP：

```
<html:form action="Liste" > 
```

这一行告诉 Struts 从会话中获取与 Liste 操作相关联的类型的表单 bean，或者创建并存储它。它通常应该已经存在，但是您将其替换为 java.util.List，因此 Struts 从会话中删除您的 List 并用全新的`mesForms.strust.ListeActeur`.

```
<logic:iterate name="ListeActeur" property= "lis"  id="Acteur" > 
```

现在您尝试遍历存储在`lis`bean 属性中的集合`ListeActeur`。我不知道 Struts 到底是怎么做的，但是它要么`java.util.List`在请求中找到你的，它没有`lis`属性，要么`ListeActeur`在会话中找到 bean，但由于它是全新的，它的`lis`属性为空或 null列表。

解决此问题的步骤：

*   尊重命名约定：变量和属性以小写字母开头。表单 bean 类应该命名为 SomethingForm，动作类应该命名为 SomethingAction。struts-config 中的表单 bean 名称应该命名为 somethingForm。
*   表单bean 几乎不应该存储在struts-config.xml 中的会话范围内。将它们存储在请求范围内。
*   您永远不应该自己在任何范围内存储表单 bean。Struts 为您完成。
*   负责从数据库获取数据的代码不必处理请求和会话属性。它接受参数中的参数，并返回对象。让您的操作处理请求和会话。
*   由于您选择将查询结果存储在表单 bean 中，因此无需将其存储在其他地方。Struts 将您的表单bean 存储在请求中。您将查询结果存储在表单 bean 中。不需要其他任何东西。
*   为您的属性选择有意义的名称。`lis`没有任何意义。如果您有 Acteur 的列表，请调用它`acteurs`。

这是您的操作方法的外观（看看它是如何正确缩进的）：

```
public ActionForward execute(ActionMapping mapping, 
                             ActionForm actionForm,
                             HttpServletRequest request, 
                             HttpServletResponse response) throws Exception {
    ListeActeurForm form = (ListeActeurForm) actionForm;
    List<Acteur> acteurs = acteurService.findAll();
    form.setActeurs(acteurs); 
    return mapping.findForward("success");
} 
```

以下是您的 JSP 的外观（使用 JSTL，因为逻辑标签已被弃用多年）：

```
<table>
    <thead>
        <tr>
            <th>Name of the acteur</th>
            <th>IP address of the acteur</th>
        <tr>
    </thead>
    <tbody>
        <%-- one row per acteur --%>
        <c:forEach var="acteur" items="${listeActeurForm.acteurs}">
            <tr>
                <td><c:out value="${acteur.name}"/></td>
                <td><c:out value="${acteur.ipAddress}"/></td>
            </tr>
        </c:forEach>
    </tbody>
</table> 
```

# php - 使用 PHP 导出 XLS 文件时出现 Google Chrome 错误

> ID：10782050
> 
> 赞同：8
> 
> 时间：2012-05-28T09:09:24.887
> 
> 标签：php, google-chrome

我一直在使用 PHP 脚本将数据从我的数据库 (mysql) 导出到 XLS 文件。

虽然文件导出过程在 Firefox 和 IE 上运行良好。

尝试使用 Google Chrome 导出时出现错误。

谷歌浏览器错误是

```
 Duplicate headers received from server

The response from the server contained duplicate headers. This problem is generally the result of a misconfigured website or proxy. Only the website or proxy administrator can fix this issue.

Error 349 (net::ERR_RESPONSE_HEADERS_MULTIPLE_CONTENT_DISPOSITION): Multiple distinct Content-Disposition headers received. This is disallowed to protect against HTTP response splitting attacks. 
```

我需要一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T09:54:50.470

我在 PHP 导出代码的标题部分发现了我的问题。错误和正确的行如下：

不正确

```
header("Content-Disposition: attachment;filename=\"".$this->filename."\""); 
```

正确的

```
header("Content-Disposition: attachment; filename=\"".$this->filename."\""); 
```

更正是在**附件之间添加空格；**和**文件名**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-05T13:56:37.060

我有同样的问题。然而，仅很少出现。原因相似但不完全相同。

不正确

```
header("Content-Disposition: attachment; filename=$filename"); 
```

正确的

```
header("Content-Disposition: attachment; filename=\"$filename\""); 
```

$filename 有时包含空格，从而导致提及 Chrome 错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-07T07:33:05.487

我也面临同样的问题。下载名称中带有逗号的文件时，它说“**收到了重复的标头**”，并且仅在 chrome 中。在 Firefox 中没问题。之后，我将代码从
`header("Content-Disposition: attachment; filename=$myfilename");`to 更改为`header("Content-Disposition: attachment; filename=\"$myfilename\"");`，它运行良好。希望它对你有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-28T19:57:49.463

试试这个可能对你有帮助， header('Content-Disposition: attachment; filename= **"'.$file_name.'"'** );

代替

header('Content-Disposition: attachment; filename='.$file_name);

# css - “~”（波浪线/波浪线/旋转）CSS 选择器是什么意思？

> ID：10782054
> 
> 赞同：1024
> 
> 时间：2012-05-28T09:10:00.950
> 
> 标签：css, css-selectors

寻找`~`角色并不容易。我正在查看一些 CSS 并发现了这个

```
.check:checked ~ .content {
} 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：1543
> 
> 时间：2012-05-28T09:29:20.363

选择`~`器实际上是[General 兄弟组合器（在](https://www.w3.org/TR/css3-selectors/#general-sibling-combinators)[选择器 Level 4](https://www.w3.org/TR/selectors-4/#general-sibling-combinators)中重命名为 Subsequent-sibling 组合器）：

> 通用兄弟组合符由分隔两个简单选择器序列的“波浪号”（U+007E，~）字符组成。两个序列表示的元素在文档树中共享相同的父元素，并且第一个序列表示的元素在（不一定立即）第二个序列表示的元素之前。

考虑以下示例：

```
.a ~ .b {
  background-color: powderblue;
}
```

```
<ul>
  <li class="b">1st</li>
  <li class="a">2nd</li>
  <li>3rd</li>
  <li class="b">4th</li>
  <li class="b">5th</li>
</ul>
```

`.a ~ .b`匹配第 4 和第 5 个列表项，因为它们：

*   是`.b`元素
*   是兄弟姐妹吗`.a`
*   出现`.a`在 HTML 源代码顺序之后。

同样，`.check:checked ~ .content`匹配与其同级并出现在其之后`.content`的所有元素。`.check:checked`

* * *

## 回答 #2

> 赞同：267
> 
> 时间：2016-09-16T21:46:36.333

还可以检查家族中的其他[组合](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors#Combinators)子并回到这个特定的组合子是什么。

*   `ul li`
*   `ul > li`
*   `ul + ul`
*   `ul ~ ul`

示例清单：

*   `ul li`-***向内看***- 选择放置（任何地方）的所有**元素**；**后代选择器**`li``ul`
***   `ul > li`-***向内看***- 仅选择;**的直接** `li`元素 `ul`即它只会选择 ; 的直接子`li`级`ul`。**子选择器**或**子组合器选择器***   `ul + ul`-***向外看***- 选择`ul`紧随其后的`ul`; 它不是向内看，而是向外寻找紧随其后的元素；**相邻兄弟选择器***   `ul ~ ul`-***向外看***- 选择`ul`后面的所有内容，`ul`不管它在哪里，但两者都`ul`应该有相同的父级；**通用兄弟选择器****

 *** * *

我们在这里看到的是**通用兄弟选择器**

* * *

## 回答 #3

> 赞同：181
> 
> 时间：2012-05-28T09:11:54.367

**一般兄弟组合子**

> 一般的兄弟组合器选择器与相邻的兄弟组合器选择器非常相似。不同之处在于被选择的元素不需要立即接替第一个元素，而是可以出现在它之后的任何位置。

[更多信息](http://css-tricks.com/child-and-sibling-selectors/)

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2015-07-06T10:42:55.813

`General sibling combinator`@Salaman 的回答很好地解释了这一点。

我确实错过的`Adjacent sibling combinator`是`+`与`~`.

例子是

```
.a + .b {
  background-color: #ff0000;
}

<ul>
  <li class="a">1st</li>
  <li class="b">2nd</li>
  <li>3rd</li>
  <li class="b">4th</li>
  <li class="a">5th</li>
</ul> 
```

*   匹配以下元素`.b`
*   毗邻`.a`
*   在`.a`HTML之后

在上面的示例中，它将标记为第二`li`而不是第四。

```
 .a + .b {
     background-color: #ff0000;
   }
```

```
<ul>
  <li class="a">1st</li>
  <li class="b">2nd</li>
  <li>3rd</li>
  <li class="b">4th</li>
  <li class="a">5th</li>
</ul>
```

[JSFiddle](http://jsfiddle.net/81yrmd5d/)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-01-24T19:45:52.383

请注意，在属性选择器（例如`[attr~=value]`）中，波浪号

> 表示属性名称为*attr*的元素，其值是以空格分隔的单词列表，其中一个恰好是*value*。

[https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors](https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors)**

# java - 我应该使用什么 eclipse rcp 或 eclipse scout？

> ID：10782056
> 
> 赞同：5
> 
> 时间：2012-05-28T09:10:05.537
> 
> 标签：java, eclipse-plugin, eclipse-rcp, eclipse-scout

我打算使用 java 代码开发桌面应用程序，并想使用任何现成
的框架，然后我了解了 eclipse RCP / eclipse scout，但我怀疑我应该使用哪个框架，无论是**[eclipse rcp](http://wiki.eclipse.org/index.php/Rich_Client_Platform)**还是**[eclipse scout](http://www.eclipse.org/scout/)**？有人可以建议我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T06:56:52.140

首先，我想添加另一个选项：[Eclipse Riena](http://www.eclipse.org/riena/)。Eclipse Riena 可与 Eclipse Scout 相媲美，因为它基于 Eclipse RCP 并提供了一些有用的抽象。你应该看看它。

但是为了帮助您决定使用哪一个：如果您是在 Eclipse RCP 中迈出第一步，我建议您首先使用一点简单的 Eclipse RCP。如果只是从更高级别的框架（如 Scout/Riena）开始，就会有一些复杂性会影响您。

根据您的桌面应用程序的计划，这可能已经足够好了。

Scout/Riena 确实可以帮助您解决更高级的主题，例如重用/标准化、远程处理、经过验证的应用程序架构。但是像大多数框架一样，你失去了一些灵活性。

我特别喜欢 Eclipse Riena 的地方：

*   专注于易于使用的 GUI（并不适合每个项目）
*   SWT/JFace (Ridgets) 上的抽象为控制器测试提供了很好的工具，将 GUI 测试的需求降至最低
*   用于（动态）构建和验证您的应用程序的不错的 API
*   简化远程处理（客户端上没有 Java EE 容器依赖项）
*   您可以独立使用 Riena 的部分内容。假设您可以使用脊而不添加其他可能不需要的东西。

我喜欢 Eclipse Scout 的原因

*   专注于 Java EE 环境中的集成
*   无处不在的向导：创建 GUI 的第一张和第二张照片非常简单
*   支持 GUI 技术的交换：您可以非常迅速地从 SWT 迁移到 Swing，尽管我认为这对于大型应用程序来说并不容易。;)

高温高压

问候，

霍尔格

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T15:27:59.183

我无法评论/判断您对 Riena 的评论。但是，我想添加一些关于 Scout 的评论/说明

Scout 附带 Scout SDK 工具这一事实对初学者有很大帮助。这使其成为开始编写桌面应用程序的理想选择。由于所有向导的输出只是 Java 代码和一些需要在 plugin.xml 中的接线等。这意味着您可以在不使用 Scout SDK 的情况下自由地执行 Scout 应用程序（您甚至可以让混合团队处理相同的代码） . 这是可能的，因为 Scout 应用程序模型只是一堆 Java 类。

Holger 正确地提到您可以将 UI 技术与 Scout 应用程序交换。这在程序员编写 UI 模型时是可能的。对于每种支持的 UI 技术（当前为 Swing、SWT、RAP（用于 Web 应用程序）），一个特定的插件将根据可用的 UI 模型实际绘制 UI。这是 UI 技术和应用程序模型的非常清晰的分离。因此，即使对于非常大的应用程序，交换也有效（当然，这条规则有一些例外：如果您的桌面应用程序在客户端有一些 Microsoft Office 集成部分，您会发现很难在 Web 应用程序中支持它）。

尝试一些[Scout 教程，并在](http://wiki.eclipse.org/Scout/Tutorial/3.8)[论坛](http://www.eclipse.org/forums/index.php?t=thread&frm_id=174)中告诉我们您的想法。

最好的问候马蒂亚斯

# eclipse - 从 Eclipse 自动发布 maven 项目不会发布 maven 依赖项

> ID：10782057
> 
> 赞同：0
> 
> 时间：2012-05-28T09:10:06.223
> 
> 标签：eclipse, maven, jar, publish

这些是我遵循的步骤：

1.  在eclipse中创建了一个maven项目。
2.  将项目转换为多面形式。
3.  将项目添加到服务器。

现在，每当我对项目资源进行任何更改时，它都会反映在服务器中。但我的 WEB-INF/lib 目录不包含任何 maven 依赖 jar 文件。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:28:52.227

如果您使用 Eclipse WTP，Maven 依赖项由 WTP 使用某种特殊的类路径容器（正如您在 Eclipse 项目中看到的那样）提供给应用程序服务器。因此它们不会被复制到`WEB-INF/lib`目录，而是被 WTP 扩展以某种方式“注入”。但是，如果您构建 Maven 工件 ( `mvn package`)，一切都应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:46:26.870

我为 WTP 安装了 m2e 集成，现在它将 maven 依赖项 jar 复制到服务器安装的应用程序目录的 WEB-INF/lib 中。

# php - PDO 准备好的查询

> ID：10782061
> 
> 赞同：-1
> 
> 时间：2012-05-28T09:10:28.097
> 
> 标签：php, pdo

> **可能重复：**
> [从 PDO 准备好的语句中获取查询](https://stackoverflow.com/questions/2243177/get-query-back-from-pdo-prepared-statement)

是否存在任何方法显示，查询在 PDO 语句对象中执行 sql 查询？

前任：

```
$sql="SELECT * FROM table WHERE id=?";
$res=$con->prepare($sql);
$res->execute(array(1)); 
```

我喜欢查看类似这样的查询：“SELECT * FROM table WHERE id=1”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:23:09.603

`$res->queryString`应该包含你需要的东西。您可以在此处查看文档[。](http://www.php.net/manual/en/class.pdostatement.php)

# java - 如何知道 WCF 是否与 java 兼容（无需代码）

> ID：10782063
> 
> 赞同：1
> 
> 时间：2012-05-28T09:10:36.803
> 
> 标签：java, wcf

我有一个应该从 java 客户端使用的 WCF web 服务。
我从未使用过 WCF 或 web 服务，所以我如何首先知道它是否以与 java 客户端兼容的方式编写（例如，如果我可以从 wsdl 中知道）。

从 Eclipse 生成客户端时。我得到了 MyWcfServiceLocator 和 MyWcf。MyWcf 没有方法

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:21:14.457

您应该只使用提供的 wsdl 和与之关联的端点。你真的不需要关心服务器端的实现，它肯定会迎合提供的 wsdl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:54:16.500

要启用非 WCF 客户端，WCF 服务应通过 basicHttpBinding 公开端点，这是 microsoft 提供的最大互操作性绑定。如果端点通过 wsHttpBinding（这是一种默认的 IIRC）暴露出来，这可能会给您带来一些问题。

# php - 如何管理 memcached 中的服务器池？

> ID：10782064
> 
> 赞同：0
> 
> 时间：2012-05-28T09:10:55.857
> 
> 标签：php, memcached

假设我将 memcached 与一个命名池一起使用，并添加了一些服务器。它可能看起来像这样：

```
<?php
$mc = new Memcached('mc');
$mc->setOption(Memcached::OPT_LIBKETAMA_COMPATIBLE, true);
if (!count($mc->getServerList())) {
    $mc->addServers(array(
        array('mc1.example.com',11211),
        array('mc2.example.com',11211),
    ));
}
?> 
```

现在，假设我想重新安排服务器。我知道我可以通过简单地执行 addServer(s) 方法将服务器添加到命名池中。但是我可以删除服务器吗？或者干脆替换整个列表？

# joomla1.5 - 在 joomla 的 kksou 谷歌天气模块中使用邮政编码查找澳大利亚城市的天气

> ID：10782066
> 
> 赞同：0
> 
> 时间：2012-05-28T09:11:09.297
> 
> 标签：joomla1.5, joomla-extensions

我正在使用模块 kksou Google 天气模块。它显示特定城市的天气（对于美国和英国仅使用邮政编码并显示城市的天气）。如果我只想使用邮政编码显示澳大利亚城市的天气，不想输入城市名称。我必须做什么？ [请查看演示](http://www.kksou.com/t1510/index.php?option=com_content&view=article&id=78&Itemid=59)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:19:06.663

我刚刚为一个城市安装并尝试了这些步骤，没有问题：
从管理员那里，编辑模块并将*Default City*设置为**Sydney**，并将*Hide Input Field*设置为**yes**。

它仅支持您提到的邮政编码，因此如果您想完成此操作，您需要以某种方式自行映射它们。

# c++ - OpenGL glCallLists 在 Windows 7 上绘制不正确的字符

> ID：10782067
> 
> 赞同：6
> 
> 时间：2012-05-28T09:11:10.950
> 
> 标签：c++, opengl, windows-7

我有一个用 Visual C++ 6 编写的旧应用程序。这个应用程序的一部分是将文本绘制到位图中。这在 Windows XP 上运行良好，但是当在 Windows 7 上运行相同的代码时，所有文本都在 ASCII 表中移动了一个位置。

例如，`"Category"`变成`"B'sdfnqx"`。

任何想法是什么导致了这个以及如何解决它？

编辑：抱歉，以上内容略有不正确。当我在代码中看到 DrawText 函数时，我认为它是 GDI 函数。当我踏入其中时，事实证明作者已经创建了自己的`DrawText`函数，该函数正在使用`OpenGL`. 我不知道`OpenGL`，所以现在已经失控了。它调用`glCallLists`which 将文本（存储在 a 中`CString`）传递给此函数。

完整的课程代码如下。注意：这是导致问题的 DrawText 函数中的 glCallLists 函数。

```
OGLFontClass::OGLFontClass()
{
    m_id = -1;
}

OGLFontClass::~OGLFontClass()
{
    Clear();
}

void OGLFontClass::Clear()
{
    if( m_id != -1 )
    {
        glDeleteLists(m_id,255);
        m_id = -1;
    }
}

void OGLFontClass::Initialise(CString fontname, int size, HDC hDC)
{
    m_HDC = hDC;
    m_id = glGenLists(255);
    ::DeleteObject( m_FONT );

    m_FONT = CreateFont(    -size,              // Height Of Font ( NEW )
                            0,              // Width Of Font
                            0,              // Angle Of Escapement
                            0,              // Orientation Angle
                            FW_NORMAL,          // Font Weight
                            FALSE,              // Italic
                            FALSE,              // Underline
                            FALSE,              // Strikeout
                            ANSI_CHARSET,           // Character Set Identifier
                            OUT_TT_PRECIS,          // Output Precision
                            CLIP_DEFAULT_PRECIS,        // Clipping Precision
                            ANTIALIASED_QUALITY,        // Output Quality
                            FF_DONTCARE|DEFAULT_PITCH,  // Family And Pitch
                            fontname);          // Font Name

    HFONT oldfont = (HFONT)SelectObject(hDC, m_FONT);       // Selects The Font We Want
    wglUseFontBitmaps(hDC, 0, 255, m_id );          // Builds 96 Characters Starting At Character 32
    ::SelectObject( hDC, oldfont );
}

void OGLFontClass::DrawText( float x, float y, CString str )
{
    glRasterPos3f(x,y, 0);

    glPushAttrib(GL_LIST_BIT);
        glListBase(m_id);
        glCallLists(str.GetLength(), GL_UNSIGNED_BYTE, str.GetBuffer(0));
    glPopAttrib();
}

void OGLFontClass::DrawText(int x, int y, int r, int g, int b, CString text)
{
    glMatrixMode(GL_PROJECTION);

    glPushMatrix();
    glLoadIdentity();// Reset The View

    HWND hWnd = ::WindowFromDC(wglGetCurrentDC() );

    RECT rc;
    ::GetClientRect( hWnd, &rc );

    int CX = rc.right;//::GetSystemMetrics( SM_CXSCREEN );
    int CY = rc.bottom;//::GetSystemMetrics( SM_CYSCREEN );

    gluOrtho2D (0,::GetSystemMetrics(SM_CXSCREEN),::GetSystemMetrics(SM_CYSCREEN), 0);

    glMatrixMode(GL_MODELVIEW);
    glPushMatrix();
    glLoadIdentity();

    glColor3ub(r,g,b);  

    glRasterPos2d( x, y );   // had to do this to get the text to line up where i want it

    //glDisable(GL_TEXTURE_2D);

    glPushAttrib(GL_LIST_BIT);      // Pushes The Display List Bits     ( NEW )
    glListBase(m_id);               // Sets The Base Character to 32    ( NEW )

    unsigned char* szTemp = new unsigned char[text.GetLength()+1];
    strcpy((char*)szTemp, text);

    glCallLists(strlen((char*)szTemp), GL_UNSIGNED_BYTE, szTemp);   // Draws The Display List Text  ( NEW )

    delete[] szTemp;

    glPopAttrib();                      // Pops The Display List Bits   ( NEW )

    glPopMatrix();

    glMatrixMode(GL_PROJECTION);

    glPopMatrix();

    glMatrixMode(GL_MODELVIEW);
}

void OGLFontClass::DrawRightText( int x, int y, int r, int g, int b, CString text )
{
    glMatrixMode(GL_PROJECTION);

    glPushMatrix();
    glLoadIdentity();// Reset The View

    HWND hWnd = ::WindowFromDC(wglGetCurrentDC() );

    RECT rc;
    ::GetClientRect( hWnd, &rc );

    float CX = (float)::GetSystemMetrics( SM_CXSCREEN );
    float CY = (float)::GetSystemMetrics( SM_CYSCREEN );
    float fMultiplier = CX / CY;

    gluOrtho2D (0,::GetSystemMetrics(SM_CXSCREEN),::GetSystemMetrics(SM_CYSCREEN), 0);

    glMatrixMode(GL_MODELVIEW);
    glPushMatrix();
    glLoadIdentity();

    int nPos = x;

    glColor3ub(r,g,b);  
    //glDisable(GL_TEXTURE_2D);

    glPushAttrib(GL_LIST_BIT);      // Pushes The Display List Bits     ( NEW )

    glListBase(m_id);               // Sets The Base Character to 32    ( NEW )

    for( int i = text.GetLength() - 1; i >= 0; i-- )
    {
        CString sChar = text.GetAt(i);

        glRasterPos2d(nPos,y);   // had to do this to get the text to line up where i want it
        glCallLists(1, GL_UNSIGNED_BYTE, sChar);    // Draws The Display List Text  ( NEW )

        if ( i > 0 )
        {
            CString sNextChar = text.GetAt(i-1);

            SIZE szWidth = GetTextExtent(sNextChar);
            szWidth.cx += 1;
            szWidth.cx *= fMultiplier;
            szWidth.cx += 1;

            nPos -= szWidth.cx;
        }
    }

    //glCallLists(strlen(text), GL_UNSIGNED_BYTE, text);    // Draws The Display List Text  ( NEW )

    glPopAttrib();                      // Pops The Display List Bits   ( NEW )

    glPopMatrix();

    glMatrixMode(GL_PROJECTION);

    glPopMatrix();

    glMatrixMode(GL_MODELVIEW);

}

CSize OGLFontClass::GetTextExtent(CString text, float fFactor)
{
    SIZE sz;
    HFONT oldfont = (HFONT) SelectObject(m_HDC, m_FONT);
    GetTextExtentPoint32(m_HDC,text,strlen(text),&sz);

    SelectObject(m_HDC, oldfont);

    sz.cx *= 0.2;
    sz.cy *= 0.2;

    return sz;
} 
```

现在我根本不知道openGL，但我假设`glCallLists`只是将字符串重新解释为字节数组，在Windows XP和Windows 7之间出现了问题。也许是unicode问题或什么？可能是 32 位 Windows 操作系统与 64 位操作系统？

现在这是否显示出更明显的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:25:40.713

这条线显然没有按照它的评论所说的那样做：

```
wglUseFontBitmaps(hDC, 0, 255, m_id );          // Builds 96 Characters Starting At Character 32 
```

这也不是：

```
glListBase(m_id);               // Sets The Base Character to 32    ( NEW ) 
```

不知何故，您的`m_id`变量与应有的值相差了一个。将此行替换为

```
glListBase(m_id+1); 
```

它发生在两个地方，并且在 Windows 7 上一切都应该很好。但是 XP 会崩溃。

正如随附的评论所建议的那样，更好的解决方法是实际仅生成可打印的字符。如果其中一台计算机缺少非打印字符，您将不会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T12:51:38.060

> 这在 Windows XP 上运行良好，但是当在 Windows 7 上运行相同的代码时，所有文本都在 ASCII 表中移动了一个位置。

windows 7 和 windows 8 的 opengl32.dll 在 glNewList/glEndList 之间的显示列表调用有问题

查看示例“glCallLists(strlen(text), GL_UNSIGNED_BYTE, text);”的答案

**我的解决方案：**

简单地将“旧”opengl32.dll 从 XP (windows\system32) 复制到您的程序文件夹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:12:19.457

我发现了这个，因为这是我所怀疑的。我实际上怀疑这是一个 UNICODE 的东西。几年前，当我尝试迁移到 Visual C++ 的更高版本时，我注意到了这一点。问题很可能是 2003 年以后的编译器自动将 CStrings 类型定义为 wchar_t。看看下面的链接项目。

[http://social.msdn.microsoft.com/forums/en-US/vclanguage/thread/fa43f4aa-1822-405e-a95f-9b6377b64352](http://social.msdn.microsoft.com/forums/en-US/vclanguage/thread/fa43f4aa-1822-405e-a95f-9b6377b64352)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-18T14:55:27.810

从 XP 更改为 Windows 7 后，我可以确认此错误。如果您使用 Windows 中的本机 opengl32.dll 驱动程序（没有图形卡中的驱动程序，如在 RDP 下），那么 glNewList/glEndList 之间的 glCallLists() 会出现问题。

请参阅第 13 课 von NeHe [http://nehe.gamedev.net/tutorial/bitmap_fonts/17002](http://nehe.gamedev.net/tutorial/bitmap_fonts/17002) 并更改 glPrint() 以写入在 ASCII 表中移动了一个位置的行和第二个正确的行。（使用带有 RDP 屏幕的 Windows 7）

```
GLvoid glPrint(const char *fmt, ...)                    // Custom GL "Print" Routine
{
    char        text[256];                              // Holds Our String
    va_list     ap;                                     // Pointer To List Of Arguments

    if (fmt == NULL)                                    // If There's No Text
        return;                                         // Do Nothing

    va_start(ap, fmt);                                  // Parses The String For Variables
        vsprintf_s(text, fmt, ap);                      // And Converts Symbols To Actual Numbers
    va_end(ap);                                         // Results Are Stored In Text

    //first text line
    glRasterPos2f(-0.8f, 0);
    GLuint List1 = glGenLists (1);
    glNewList(List1, GL_COMPILE);
      glPushAttrib(GL_LIST_BIT);                            // Pushes The Display List Bits
      glListBase(base1);                                // Sets The Base Character to 32
      glCallLists(strlen(text), GL_UNSIGNED_BYTE, text);    // Draws The Display List Text
      glPopAttrib();                                        // Pops The Display List Bits
    glEndList();
    glCallList(List1);

    //second text line
    glRasterPos2f(-0.8f, -0.2f);
    glPushAttrib(GL_LIST_BIT);                          // Pushes The Display List Bits
    glListBase(base1);                              // Sets The Base Character
    glCallLists(strlen(text), GL_UNSIGNED_BYTE, text);  // Draws The Display List Text
    glPopAttrib();                                      // Pops The Display List Bits

} 
```

这种麻烦的迹象： [http](http://www.opengl.org/sdk/docs/man2/xhtml/glNewList.xml) ://www.opengl.org/sdk/docs/man2/xhtml/glNewList.xml glCallList 和 glCallLists 可以输入到显示列表中。显示列表中的命令或由 glCallList 或 glCallLists 执行的列表不包含在正在创建的显示列表中，即使列表创建模式为 GL_COMPILE_AND_EXECUTE。

# xml - xmlschema 格式

> ID：10782069
> 
> 赞同：2
> 
> 时间：2012-05-28T09:11:16.777
> 
> 标签：xml, xsd

**什么是为包含属性、子元素和子元素**的 xml 元素定义模式的正确格式也包含子元素
例如： **我的 xml**

```
<element1 attribute1="hello">
 <element-sub1>
       <element-sub-sub1 attribute-sub-1="hi"/>
 <elementsubsub1>
</element1> 
```

我尝试使用以下架构

```
 <xs:element name="element1">
         <xs:complexType>
         <xs:sequence>
         <xs:element name="element-sub1" type="xs:anyType" maxOccurs="unbounded"/>
          <xs:complexType> 
          <xs:sequence>
      <xs:element name="element-sub-sub1" type="xs:anyType" maxOccurs="unbounded"/>
      </xs:sequence>
    <xs:attribute name="attribute-sub-1" type="xs:string"/>
      </xs:complexType>

          </xs:sequence>
      <xs:attribute name="attribute1" type="xs:string"/>
      </xs:complexType>
       </xs:element> 
```

但我收到以下错误

```
The content of 'sequence' must match (annotation?, (element | group | choice | sequence | any)*). A problem was found st
arting at: complexType. 
```

为什么我会收到此错误？为我的要求编写架构的正确格式是什么？
**注意**
元素“element-sub-sub1”也可以有文本。
**更新 1**

```
<element1 URI="">
 <element-sub1>
 <element-sub-sub1 Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
 <element-sub-sub1 Algorithm="http://www.w3.org/TR/1999/REC-xslt-19991116">
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
 <xsl:output method="text"/>
<xsl:template match="/">
Pan : <xsl:copy-of select="//Pp"/>

MobileNo : <xsl:copy-of select="//Mm"/>

TotalAmount : <xsl:copy-of select="//Total"/>
</xsl:template>
</xsl:stylesheet>
 element-sub-sub1
 </element-sub1>
 </element1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:25:58.120

您的架构无效，甚至格式正确。这是您需要的：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:test:1">

   <xs:element name="element1">
      <xs:complexType>
         <xs:sequence>
            <xs:element name="element-sub1" maxOccurs="unbounded">
               <xs:complexType>
                  <xs:sequence>
                     <xs:element name="element-sub-sub1" maxOccurs="unbounded">
                        <xs:complexType>
                           <xs:attribute name="attribute-sub-1" type="xs:string" />
                        </xs:complexType>
                     </xs:element>
                  </xs:sequence>
               </xs:complexType>
            </xs:element>
         </xs:sequence>
         <xs:attribute name="attribute1" type="xs:string" />
      </xs:complexType>
   </xs:element>

</xs:schema> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:26:04.830

首先，你不能同时拥有一个`type="xs:anyType"`属性和一个`<xs:complexType>`元素`<xs:element>`

其次， 的定义`<xs:complexType>`只能直接出现在一个`<xs:element>`或作为一个全局类型的子类型`<schema>`

最后但并非最不重要的。如果您希望元素包含属性，请使其类型复杂。

```
 <xs:element name="element1">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="element-sub1" maxOccurs="unbounded">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="element-sub-sub1" maxOccurs="unbounded">
                            <xs:complexType mixed="true">
                                <xs:any minOccurs="0" maxOccurs="1"/>
                                <xs:attribute name="attribute-sub-1" type="xs:string" />
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="attribute1" type="xs:string" />
    </xs:complexType>
</xs:element> 
```

如评论中所述，该元素允许您在该位置插入任何 xml 元素。无论元素是否根据某些标准实际上有效，验证都会通过。它只需要格式良好。

如果要验证整个样式表，请使用 an`xs:import`来访问命名空间，其中定义了 xsl 样式表：http: [//www.w3.org/XML/2000/04schema-hacking/xslt.xsd](http://www.w3.org/XML/2000/04schema-hacking/xslt.xsd)并引用样式表或转换 xsd 中的元素。内部`<xs:element name="sub-sub1>`：

```
 <xs:complexType mixed="true">
                                <xs:choice minOccurs="0" maxOccurs="1">
                                    <xs:element ref="xsl:stylesheet"/>
                                    <xs:element ref="xsl:transform"/>
                                <xs:choice>
                                <!-- You'll have to define a prefix for the xslt namespace imported -->
                                <xs:attribute name="attribute-sub-1" type="xs:string" />
                            </xs:complexType> 
```

选择元素允许您为 XSL 样式表使用两个可接受的顶部标记之一，`<stylesheet`> 或`<transform>`

更新：为可选样式表/转换添加了 minOccurs、maxOccurs 属性

# java - 如何使用 JSch 在 SFTP 服务器上复制文件？

> ID：10782070
> 
> 赞同：1
> 
> 时间：2012-05-28T09:11:39.787
> 
> 标签：java, ssh, sftp, jsch

我遇到了将文件从一个 SFTP 文件夹复制（复制）到同一服务器上的另一个文件夹的问题。

所以，问题：有没有一种有效的方法可以远程进行（即不将数据复制到客户端，反之亦然）？

我将 Java 与[JSch 库](http://www.jcraft.com/jsch/)一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T20:45:46.493

SFTP 协议本身只支持客户端和服务器之间的数据传输，不支持服务器本身。

不过，您可以使用底层 SSH 协议的其他部分（以及 JSch 的实现）在服务器上执行命令。在这种情况下，正如 Joop 所提到的，使用[Exec 通道](http://epaul.github.com/jsch-documentation/simple.javadoc/com/jcraft/jsch/ChannelExec.html)是正确的选择。您可以将用于[ChannelSftp](http://epaul.github.com/jsch-documentation/simple.javadoc/com/jcraft/jsch/ChannelSftp.html)的相同[会话](http://epaul.github.com/jsch-documentation/simple.javadoc/com/jcraft/jsch/Session.html)用于任意数量的其他通道，例如用于您的 exec 通道。只需确保在使用后关闭所有频道。（查看 JSch wiki 上的[Shell、Exec 或 Subsystem Channel](http://sourceforge.net/apps/mediawiki/jsch/index.php?title=Shell,_Exec_or_Subsystem_Channel)页面了解更多信息。

如果服务器不支持命令执行，这当然不会起作用，例如，如果它被配置为只支持 SFTP。那么您唯一的解决方案是下载并重新上传此文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:47:26.050

在 SFTP 中，一个可能执行`! ...`的是执行本地命令。

```
! cp a.txt a-backup.txt 
```

由于 JSch 也可以提供 SSH 连接，即使是感叹号也没有实际意义。[对于代码，您可能会在示例](http://www.jcraft.com/jsch/examples/)中找到一些起点。Exec 示例应该可以。

# c# - c# xna 4.0 spritebatch错误

> ID：10782074
> 
> 赞同：-2
> 
> 时间：2012-05-28T09:11:57.540
> 
> 标签：c#, xna-4.0

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace Project
{
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
       SpriteBatch spriteBatch;
        Texture2D myTexture;
        Rectangle myRectangle;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            // TODO: Add your initialization logic here

            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()

        {

            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            Texture myTexture = Content.Load<Texture2D>("character");

            myRectangle = new Rectangle(10, 100, 30, 50);
            // TODO: use this.Content to load your game content here
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            // TODO: Add your update logic here

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.Black);

            // TODO: Add your drawing code here
            spriteBatch.Begin();

            spriteBatch.Draw(myTexture,myRectangle,Color.White);

            spriteBatch.End();

            base.Draw(gameTime);
        }
    }
} 
```

这是我的代码，但这会在调试时返回一个错误，该错误将突出显示

```
spriteBatch.Draw(myTexture,myRectangle,Color.White); 
```

并告诉 ArgumentNullExcerption 未处理此方法不接受此参数的 null。参数名称：纹理是什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:17:29.170

在 LoadContent 中，您创建一个新变量并将纹理分配给它，而 myTexture 保持为空。

代替

```
Texture myTexture = Content.Load<Texture2D>("character"); 
```

和

```
myTexture = Content.Load<Texture2D>("character"); 
```

# algorithm - 如何生成范围内的数字

> ID：10782078
> 
> 赞同：0
> 
> 时间：2012-05-28T09:12:06.217
> 
> 标签：algorithm

我有一个生成分数的公式，例如 score = UnixTimeOfNow()，但我想得到 (1,n) 范围内的最终分数，例如 (1,100)。那么如何将分数映射到特定范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:13:45.123

要映射`score`到`(1, n)`包含范围内的值，您可以这样做

```
score = 1 + (score % n); 
```

（那是 Java，C/C++ 语法。）

`%`是表示例如`205 % 100`is的模运算符`5`。

# oracle - plsql中的布尔算术

> ID：10782079
> 
> 赞同：0
> 
> 时间：2012-05-28T09:12:08.507
> 
> 标签：oracle, plsql

我有一组 pl/sql 函数，都返回一个布尔类型。
我从另一个 pl/sql 函数中一一调用这些函数。我想“累积”结果并从该函数返回。

例如：

```
 v_res  boolean;
  v_res2 boolean := true;
begin
  v_res := f1('aa');
  if v_res = false then
    v_res2 := false;
  end if;

  v_res := f2('aa');
  if v_res = false then
    v_res2 := false;
  end if;

  -- some other calls to other functions

  return v_res2;
end; 
```

我想知道，我可以在 pl/sql 中进行布尔运算吗？
我的意思是这样的：

```
 v_res boolean := true;
begin
  v_res := v_res * f1('aa');
  v_res := v_res * f2('aa');
  -- more calls to functions
  return v_res;
end; 
```

我试过了：

```
v_res := v_res * false; 
```

和

```
v_res := v_res and false; 
```

但似乎唯一可行的是将布尔值转换为 int（我尝试使用 sys.diutil.bool_to_int），这感觉不对...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T01:05:47.430

```
begin
  return f1('aa')
     and f2('aa')
     ... etc. ...
     ;
end; 
```

# lambda - 第二个 lambda 中的参数有什么作用？

> ID：10782081
> 
> 赞同：2
> 
> 时间：2012-05-28T09:12:14.640
> 
> 标签：lambda, scheme, sicp

这是来自 SICP Video Lectures，Lecture 2a 大约 39:51 左右。

```
(DEFINE (SQRT X)
   (FIXED-POINT
      (AVERAGE-DAMP (LAMBDA Y (/ X Y)))
      1)) 

(DEFINE AVERAGE-DAMP
   (LAMBDA f
      (LAMBDA x (AVERAGE (f x) x)))) 
```

`x`第二个 lambda 在 AVERAGE-DAMP 中做了什么以及如何访问它？我不明白到底传递给它的是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:14:18.673

```
(DEFINE AVERAGE-DAMP
   (LAMBDA f
      (LAMBDA x (AVERAGE (f x) x)))) 
```

棘手的事情是这里正在传递一个函数。

average-damp 是 的函数`f`定义为 的函数`x`定义为`f(x)`("f of x") 和的平均值`x`。

换句话说，average-damp 是一个函数，它接受另一个函数，将一个函数包裹在它周围，然后返回这个新函数。

如果您有机会熟悉 JavaScript，这可能会有所帮助：

```
function average(a, b) {
    return (a + b)/2;
}

function averageDamp(f) {
    return function(x) {
        return average(f(x), x);
    }
} 
```

所以现在想一想，下面是什么？

```
var something = averageDamp(function (c) { return c * 2 }); 
```

`something`是一个函数，它接受一个参数 ，`x`并返回 x * 2 和 x 的平均值。

换句话说，它就像：

```
function (x) {
    return average(x * 2, x);
} 
```

如果你有：

```
var something = averageDamp(function (c) { return c * 2 });
something(5); //average(5*2, 5) = (10 + 5) / 2 
```

将函数包装在函数内部就是您的 lisp 代码段所发生的事情。

编辑：出于好奇，我在 JavaScript 中完全实现了定点 sqrt 方法：http: [//jsfiddle.net/tXDQL/](http://jsfiddle.net/tXDQL/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:33:48.120

```
(DEFINE (SQRT X)
   (FIXED-POINT
      (AVERAGE-DAMP (LAMBDA Y (/ X Y)))
      1)) 

(DEFINE AVERAGE-DAMP
   (LAMBDA F
      (LAMBDA X (AVERAGE (F X) X)))) 
```

起初可能看起来令人困惑，我在学习时试图帮助我澄清这一点的是用“Y”替换 AVERAGE-DAMP 中的“X”。所以这将有助于区分“X”作为 SQRT 中的参数。

```
(DEFINE (SQRT X)
   (FIXED-POINT
      (AVERAGE-DAMP (LAMBDA Y (/ X Y)))
      1)) 

(DEFINE AVERAGE-DAMP
   (LAMBDA F
      (LAMBDA Y (AVERAGE (F Y) Y)))) 
```

所以这里发生的是：
F -> (LAMBDA Y (/XY))，
然后是 (FY) -> (/XY)，
然后是 (AVERAGE-DAMP (LAMBDA Y (/XY))) -> (LAMBDA Y (AVERAGE) (/ XY) Y))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T10:15:52.873

的值`x`将是`fixed-point`传递给函数的参数。

现在您没有提供 的定义`fixed-point`，但是从我想象的名称来看，它将首先使用参数调用函数`1`（因为这是作为 的第二个参数给出的`fixed-point`），然后将继续使用其调用函数之前的结果作为参数，直到结果与之前的结果相同。

所以第一次调用`x`是 1，第二次调用是`(average (f 1) 1)`，第三次调用是 1，`(average (f (average (f 1) 1)) (average (f 1) 1))`以此类推。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T10:16:59.270

`AVERAGE-DAMP`只是定义为一个函数（一个 lambda），当给定一个参数时`f`，它返回另一个函数（另一个 lambda），当给定一个参数时`x`计算和的平均值`x`，`f(x)`其中`f`是先前接收到的函数。

然后，在 中`SQRT`，注意如何`AVERAGE-DAMP`使用*一个*参数（恰好是一个函数，一个 lambda）调用它。这会将调用转换为另一个函数（ 中的第二个 lamda `AVERAGE-DAMP`），给定一个值，将给定函数评估`(LAMBDA Y (/ X Y))`为给定值。该`FIXED-POINT`函数将负责处理该函数并为它认为合适的每个值评估前一个函数。

# php - 在php中传递复选框和文本字段值

> ID：10782092
> 
> 赞同：0
> 
> 时间：2012-05-28T09:13:03.290
> 
> 标签：php

我正在尝试为每个选中的复选框将文本值字段传递到下一页，但我只获取最后一个文本字段值，例如：

```
checkbox textfield
selected ABCD
selected ABCDE 
```

**我每次只取回 ABCDE**

**page1.php**

```
echo "<td width='10px'><input name='question[$rowid][]' type='checkbox' value='1' /></td>";
echo "<td width='230px'><input name='newname' type='text' value='$certn'/></td>"; 
```

**page2.php**

```
foreach ($_POST['question'] as $key => $ans) {
$nn = $_POST['newname'];
echo $key . $nn;
echo "</br>";
} 
```

帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:25:00.970

弄清楚你在这里做什么有点困难，但我认为你的陈述`I'm only getting the last text fields value`表明了你的问题——你有多个同名的字段。如果您这样做并且不将它们放入数组 ( `[]`) 中，您将只能获得页面上的最后一个值。

我想你想要更像这样的东西：

*第 1 页：*

```
echo "<td width='10px'><input name='question[$rowid]' type='checkbox' value='1' /></td>";
echo "<td width='230px'><input name='newname[$rowid]' type='text' value='$certn'/></td>"; 
```

*第2页：*

```
foreach ($_POST['question'] as $key => $ans) {
  // $_POST['newname'] is now also an array, and the keys should correspond to
  // those in the $_POST['question'] array
  $nn = $_POST['newname'][$key];
  echo $key . $nn;
  echo "</br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:17:22.807

该行：

```
echo "<td width='10px'><input name='question[$rowid][]' type='checkbox' value='1' /></td>"; 
```

不会被正确解释。您必须将其更改为：

```
echo "<td width='10px'><input name='" . $question[$rowid][] . "' type='checkbox' value='1' /></td>"; 
```

数组不会在字符串中替换。

# c# - 通过反射将参数数组通过 ref 传递给 C# DLL

> ID：10782093
> 
> 赞同：0
> 
> 时间：2012-05-28T09:13:09.323
> 
> 标签：c#, reflection, dll, pass-by-reference

总之，我有许多 C# DLL，我想在运行时使用`System.Reflection`. 我使用的核心代码类似于

```
DLL = Assembly.LoadFrom(Path.GetFullPath(strDllName));
classType = DLL.GetType(String.Format("{0}.{0}", strNameSpace, strClassName));
if (classType != null)
{
    classInstance = Activator.CreateInstance(classType);
    MethodInfo methodInfo = classType.GetMethod(strMethodName);
    if (methodInfo != null)
    {
        object result = null;
        result = methodInfo.Invoke(classInstance, parameters);
        return Convert.ToBoolean(result);
    }
} 
```

我想知道如何将参数数组传递给 DLL，`ref`以便从 DLL 内部发生的事情中提取信息。清楚地描述我想要的（但当然不会编译）将是

```
result = methodInfo.Invoke(classInstance, ref parameters); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:16:59.500

对`ref`参数的更改会反映在您传入的数组中`MethodInfo.Invoke`。你只需使用：

```
object[] parameters = ...;
result = methodInfo.Invoke(classInstance, parameters);
// Now examine parameters... 
```

请注意，如果有问题的参数是参数数组（根据您的标题），则需要将其包装在另一个数组级别中：

```
object[] parameters = { new object[] { "first", "second" } }; 
```

就 CLR 而言，它只是一个参数。

如果这没有帮助，请展示一个简短但*完整*的示例 - 您不需要使用单独的 DLL 来演示，只需一个带有`Main`方法和被反射调用的方法的控制台应用程序就可以了。

# perforce - 我如何在 perforce 中本地释放签出的文件

> ID：10782097
> 
> 赞同：2
> 
> 时间：2012-05-28T09:13:43.023
> 
> 标签：perforce, p4v

我是新手。我需要澄清以下内容。

我创建了工作区，并且错误地检查了整个项目（所有文件）。我没有在本地工作区做任何改变。几天后，我尝试从服务器获取最新版本，它显示了一些合并冲突错误。

现在，我怎样才能在不影响远程文件的情况下释放签出的文件。如果我在本地恢复操作，它会影响远程文件吗？

感谢您的善意建议。塞尔瓦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:20:18.813

如果您没有进行任何更改，那么只需还原签出将“释放签出的文件”。这不会影响在其他地方签出或修改的任何文件，因为它只是对您的文件副本起作用的操作。

您可以执行的任何操作只会影响您的本地副本和仓库中的文件。您不能直接影响其他人机器上的文件。

# wpf - 过时的 UI 自动化树

> ID：10782100
> 
> 赞同：7
> 
> 时间：2012-05-28T09:13:58.413
> 
> 标签：wpf, visual-studio-2010, visual-c++, user-interface, ui-automation

我正在尝试使用新的本机 Microsoft UI 自动化接口 3.0（在 VC++ 2010、Win7 中）编写自动化测试器应用程序。被测应用程序 (AUT) 是一个 WPF 应用程序。

几乎一切正常...我可以安装事件处理程序，在树中导航，使用各种条件搜索元素并使用它们的模式控制找到的元素。

但是昨天我发现了一个让我绝望的行为：我的 AUT 的 UIA 树在通过单击其主菜单按钮之一切换其 GUI 主面板后根本没有更新。

单击主菜单按钮后，我可以在 AUT 的 GUI 中*看到*新的小部件，但 UIA 树仍然包含单击主菜单按钮*之前存在的控件。*（过时的）UIA 树仍然可以使用搜索功能或使用 walker 完全读取，但当然它不能被写入，因为小部件不再存在。

这看起来就像会有一个过时的缓存......但是我根本不使用任何缓存 UIA 函数。没有任何。绝不。无处。

我无法以编程方式更新 UIA 树……既不是通过调用任何 UIA 函数，也不是通过重新启动测试器应用程序，也不是通过来回切换 AUT 的 GUI。这并非每次都会发生。有时单击主按钮后，树似乎是最新的并且一切正常。然而，大多数运行它都失败了。只有一种（神秘的）方法可以可靠地更新 UIA 树：使用 inspect.exe。当使用 inspect.exe 工具简要查看 AUT 的 UIA 子树时，问题突然消失了，我的测试应用程序可以立即访问实际更新的树！当然，重新启动 AUT 后问题再次出现。

inspect.exe 做了什么来更新 UIA 树（另一个应用程序！！！）？怎么可能在不使用任何缓存的情况下访问消失的元素？我错过了什么？

我真的需要帮助。

* * *

好的，还有一些发现：

1.  UISpy.exe 能够以与 inspect.exe 相同的神秘方式刷新 UIA 树（这特别奇怪，因为 inspect.exe 使用与我相同的本机接口，但 UISpy.exe 使用 .NET 接口 AFAIK）。这意味着这是一种系统范围和持久的 UIA 问题，而不是纯原生 UIA 问题。

2.  如果我在切换视图*之前*不访问树，则不会发生此问题。即，如果我的测试应用程序在通过单击主菜单按钮切换视图之前没有访问 AUT 的视图，它会毫无问题地看到新的小部件。这强烈表明本机 UIA API 的一些缓存问题 - 即使我不知道这是如何发生的，因为我根本不缓存。有人知道是否发生了一些内部缓存吗？

我认为这可能是一个 API 错误。但是，考虑到我目前使用 Microsoft Connect 的经验，我有点迷失了那个炫技 :-(

有人知道吗？

* * *

我还测试了 Snoop 工具。使用 Snoop 不会像 Inspect 和 UISpy 那样暂时解决问题。关于Inspect.exe，还有一个细节……折叠和展开AUT的子树就足以暂时治愈问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T15:03:25.840

好的，更新这个。UIA 看起来非常糟糕。我发现读取元素的内容数组和该数组的长度会更新隐藏的缓存。我还遇到过一个选项卡的子树没有更新但可以通过切换到另一个选项卡并返回来更新的情况（在这种情况下，按模式读取内容没有帮助）。这两种情况都是可重现的，但我找不到任何方法来预测或阻止它们。很多第三方 WPF 组件似乎也有问题。我们最终放弃了使用该 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-17T15:33:40.510

我知道这个问题已经很老了，但我想出了*Inspect.exe*为其他应用程序刷新 UIA 树所做的工作：查看“选项”菜单；有一个标记`SPI_SCREENREADER flag`为默认选中的项目。

在您的代码中执行以下操作，您可能会得到一个新的 UIA 树：

```
SystemParametersInfo( SPI_SETSCREENREADER, TRUE, NULL, SPIF_UPDATEINIFILE | SPIF_SENDCHANGE);

PostMessage( HWND_BROADCAST, WM_WININICHANGE, SPI_SETSCREENREADER, 0); 
```

# ios - 核心数据实体 findFirst 每次都返回不同的实体，尽管事实上只有一个实体

> ID：10782101
> 
> 赞同：0
> 
> 时间：2012-05-28T09:13:59.617
> 
> 标签：ios, core-data, entity, restkit

我有一个核心数据模型，该模型由具有多个位置的 Trail 组成。我也在使用 RestKit。我获取线索的代码如下所示：

```
Trail *trail = [Trail findFirst]; 
```

我的问题是每次都会返回不同的 Trail。对 [Trail findFirst] 的三个连续调用返回：

```
<Trail: 0xf489c70> (entity: Trail; id: 0xf489a60 <x-coredata://77BCA7AD-4C71-437D-8A7C-C047B8E64567/Trail/p1> ; data: <fault>)

<Trail: 0xf476ca0> (entity: Trail; id: 0xf489110 <x-coredata://77BCA7AD-4C71-437D-8A7C-C047B8E64567/Trail/p1> ; data: <fault>)

<Trail: 0xf48c660> (entity: Trail; id: 0xf48c430 <x-coredata://77BCA7AD-4C71-437D-8A7C-C047B8E64567/Trail/p1> ; data: <fault>) 
```

如果我执行 [Trail allObjects]，我会看到一个 Trail 项目，下次我调用 [Trail findFirst] 时将返回该项目。如果我再次执行 [Trail allObjects]，我会看到一个不同的跟踪对象，下次我调用 [Trail first] 时将返回该对象；

这让我心烦意乱。CoreData 如何每次都返回不同的实体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:21:57.937

您正在查看错误的 ID。重要的是`x-coredata://77BCA7AD-4C71-437D-8A7C-C047B8E64567/Trail/p1`，所有这些都显示相同的数字。

您正在查看的 ID 是对象的地址。它们*是*不同的对象，但它们指向相同的底层核心数据对象。

想想一个假设的数字对象。我创建了一个并将数字 1 放入其中。我创建了另一个数字对象，并在其中也放入了 1。对象相等（都包含 1）但它们不相同（具有不同地址的不同对象）。

# javascript - HTML/DOM：更改按钮的鼠标事件

> ID：10782103
> 
> 赞同：0
> 
> 时间：2012-05-28T09:14:01.777
> 
> 标签：javascript, html, dom, dom-events, mouseevent

在 IE9 中，此代码不会按预期更改按钮的大小...

```
<html><head>
<script language="JavaScript">
    function fun1()
    {
        alert("clicked");
        document.form1.chk1.disabled=true;
    }
    function m1()
        {
            document.form1.chk1.width=60;
        }
    function m2()
        {
            document.form1.chk1.width=40;
        }
</script>
</head><body>
<form name="form1"><!-- creating radio button group -->
    <input type="button" name="chk1" value="red" onClick="fun1()"
    onMouseOver="m1()" onMouseOut="m2()">
</form>
</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:40:44.867

好吧，您的代码中缺少此样式属性。尝试更换这个

```
document.form1.chk1.style.width="60%"; 
```

这对我有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:42:18.897

您的代码不仅在 IE9 中有效，而且在例如 FF13 和 Chrome19 中也无效。要解决此问题，您可以尝试将您的`m1()`和`m2()`功能替换为：

```
function m1()
{
    document.form1.chk1.style.width=60+"px";
}
function m2()
{
    document.form1.chk1.style.width=40+"px";
}​ 
```

# ios - iOS，在滑块值 n 处触发一次 UIViewAnimation？

> ID：10782104
> 
> 赞同：1
> 
> 时间：2012-05-28T09:14:12.550
> 
> 标签：ios, uislider, uiviewanimation

我有一组滑块，我正在使用 Value Changed 将数字提供给 % 指示器。我也使用这个值来检查滑块是否低于某个点。如果是，我想运行一个 UIViewAnimation （我就是，一切正常）。但是，如果滑块移动到阈值以下，则动画会不断调用，这意味着被动画的项目从 a 点移动到 b 点，然后一遍又一遍地返回。那么，我可以只在阈值点触发一次动画吗？

这就是我获得像素值的方式：

```
_sizeSliderRange = _sizeSlider.frame.size.width - _sizeSlider.currentThumbImage.size.width;
_sizeSliderOrigin = _sizeSlider.frame.origin.x + (_sizeSlider.currentThumbImage.size.width / 4.0);
_sizeSliderValueToPixels = (_sizeSlider.value * _sizeSliderRange) + _sizeSliderOrigin; 
```

我在链接的 Value Changed IBAction 函数中使用条件来检查他的值并完成工作：

```
if (_sizeThumbX < 85) {  //if within 60px of the left margin we animate the label to sit float left
    [UIView transitionWithView:_sizeLabel duration:0.25f options:UIViewAnimationCurveEaseInOut animations:^(void) { etc etc 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:30:25.017

就像@Luis 所说，只需使用这样的 BOOL 属性：

```
if (_sizeThumbX < 85) {  //if within 60px of the left margin we animate the label to sit float left
    if (!self.passedBelowThreshold) {
        [UIView transitionWithView:_sizeLabel duration:0.25f options:UIViewAnimationCurveEaseInOut animations:^(void) { /* ... */ }
    }
}
self.passedBelowThreshold = _sizeThumbX < 85; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:31:15.767

您的代码根据您的逻辑工作，即每次更改滑块值并且低于 85 时，将调用动画。您只能以以下方式触发动画一次：-

1>你可以保持动画发生的绝对值。类似于`_sizeThumbX == 85`

2>或者你可以有多少次值变化的计数器。在不同的函数中计算并存储滑块更改的值。如果滑块值在 85 范围内，请不要增加计数器值，如果滑块仍在 85 范围以下，请在动画部分检查计数器标志和滑块的当前位置如果计数器值已经为 1 即动画已经触发，则不调用动画，否则调用并增加动画计数器。

3>我不知道你的情况，因为你没有清楚地提到，但我认为如果你的滑块超出范围并再次返回，你想再次调用动画，在这种情况下将计数设为零（滑块跨越指定范围) .

# ios - 简单的益智游戏 iOS：分析 alpha 像素问题

> ID：10782113
> 
> 赞同：0
> 
> 时间：2012-05-28T09:14:44.117
> 
> 标签：ios, uiimage, cgimage

我创建了简单的益智游戏，并为此使用 next：

我有一个名为 Piece 的课程。Piece 类继承自`UIImageView`并包含下一个字段：

```
@property(nonatomic, strong) NSString *pieceName;
@property(nonatomic) CGFloat pos_x;
@property(nonatomic) CGFloat pos_y;
@property(nonatomic) BOOL snapped; 
```

在我的游戏中，每个棋子都有颜色（红色、绿色、蓝色等）。每一块都有不规则的形状。这是带有 alpha 颜色的图像。当我点击 alpha 颜色时，我不必选择这件作品。

为此，我使用下一个方法：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{   

    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    NSArray *views = [self.view subviews];

    for (UIView *v in views) {
        if([v isKindOfClass:[Piece class]]){
            if (CGRectContainsPoint(v.frame, touchLocation) && ((Piece *)v).snapped == FALSE) { 

                UITouch* touchInPiece = [touches anyObject]; 
                CGPoint point = [touchInPiece locationInView:(Piece *)v];
                BOOL solidColor = [self verifyAlphaPixelImage:(Piece *)v atX:point.x * resolution atY:point.y * resolution];

                if (solidColor) {                

                    NSArray *tempViews = [self.view subviews];
                    [tempViews reverseObjectEnumerator];

                    for (UIView *tv in tempViews) {
                        if (tv == v) {
                            [tv setExclusiveTouch:YES];
                            dragging = YES;
                            oldX = touchLocation.x;
                            oldY = touchLocation.y;
                            piece = (Piece *)v;
                            [self.view bringSubviewToFront:piece];
                            break;
                        }
                    }

               }

            }
        }
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    if (dragging) {        
        CGRect frame = piece.frame;
        frame.origin.x = piece.frame.origin.x + touchLocation.x - oldX;
        frame.origin.y =  piece.frame.origin.y + touchLocation.y - oldY;
        if ([self verifyOutOfScopeCoordX:touchLocation.x CoordY:touchLocation.y]) {
            piece.frame = frame;
        }               
        [self snapPiece];
    }

    oldX = touchLocation.x;
    oldY = touchLocation.y;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{    
    dragging = NO;
}

- (BOOL)verifyAlphaPixelImage:(Piece *)image atX:(int)x atY:(int)y{

    CGImageRef imageRef = [image.image CGImage];
    NSUInteger width = CGImageGetWidth(imageRef);
    NSUInteger height = CGImageGetHeight(imageRef);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));
    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;
    CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                                 bitsPerComponent, bytesPerRow, colorSpace,
                                                 kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
    CGContextRelease(context);

    int byteIndex = (bytesPerRow * y) + x * bytesPerPixel;

    CGFloat red   = (rawData[byteIndex]     * 1.0) / 255.0;
    CGFloat green = (rawData[byteIndex + 1] * 1.0) / 255.0;
    CGFloat blue  = (rawData[byteIndex + 2] * 1.0) / 255.0;
    CGFloat alpha = (rawData[byteIndex + 3] * 1.0) / 255.0;
    /*
    NSLog(@"red:   %f", red);
    NSLog(@"green: %f", green);
    NSLog(@"blue:  %f", blue);
    NSLog(@"alpha:   %f", alpha);
    */    
    free(rawData);    
    if(alpha==0 && red == 0 && green == 0 && blue == 0) return NO;
    else return YES;

} 
```

我移动我的棋子没有任何问题。但有时我会`verifyAlphaPixelImage`在这一行中使用一种方法得到奇怪的错误。`CGFloat red = (rawData[byteIndex] * 1.0) / 255.0;``EXC_BAD_ACCESS`

verifyAlphaPixelImage - 我需要这种方法来分析 alpha 像素。如果我点击 alpha 像素，我不必选择这件作品。

现在主要问题是`EXC_BAD_ACCESS`我使用 rawData 的在线。

现在我用这个：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    NSArray *views = [self.view subviews];

    for (UIView *v in views) {
        if([v isKindOfClass:[Piece class]]){

            CGFloat pos_x = touchLocation.x - v.frame.origin.x;
            CGFloat pos_y = touchLocation.y - v.frame.origin.y;         

            if (CGRectContainsPoint(v.frame, touchLocation) && ((Piece *)v).snapped == FALSE) { 

                BOOL solidColor = [self verifyAlphaPixelImage:(Piece *)v atX:pos_x * resolution atY:pos_y * resolution];

                if (solidColor) {                

                    NSArray *tempViews = [self.view subviews];
                    [tempViews reverseObjectEnumerator];

                    for (UIView *tv in tempViews) {
                        if (tv == v) {
                            [tv setExclusiveTouch:YES];
                            dragging = YES;
                            oldX = touchLocation.x;
                            oldY = touchLocation.y;
                            piece = (Piece *)v;
                            [self.view bringSubviewToFront:piece];
                            break;
                        }
                    }

                }

            }
        }
    }
} 
```

而这项工作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:29:40.223

请注意，在您的第一种方法中，您使用两种**不同**的触摸来实现相同的目的。

首先你做：

```
UITouch *touch = [[event allTouches] anyObject];
CGPoint touchLocation = [touch locationInView:self.view]; 
```

用于检查您的触摸是否在一个片段视图内。

但是然后你再接触一下：

```
UITouch* touchInPiece = [touches anyObject]; 
CGPoint point = [touchInPiece locationInView:(Piece *)v]; 
```

如果您有多个触摸事件，则第二次触摸可能不是第一次触摸，甚至可能不在检测到第一次触摸的视图内。第二次触摸可能超出第一次触摸检测到的片段视图的范围

# asp.net-mvc - MVC 动作导致 slickgrid

> ID：10782119
> 
> 赞同：0
> 
> 时间：2012-05-28T09:15:03.583
> 
> 标签：asp.net-mvc, slickgrid

我是使用 slickgrid 的新手。

我想知道是否有人可以帮助将 actionresult 或 jsonresult 返回到 slickgrid。我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T02:34:29.457

您应该能够将模型作为 JsonResult 返回到 slickgrid，如下所示：

```
return Json(JsonConvert.SerializeObject(YOUR_MODEL_INSTANCE)); 
```

看看[http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

# android - 来自 Vimeo 的视频无法播放到 UiWebView Android

> ID：10782127
> 
> 赞同：1
> 
> 时间：2012-05-28T09:15:30.430
> 
> 标签：android, ajax, video, uiwebview, vimeo

我们正在开发一个包含 vimeo 视频的原生应用程序到 UiWebView Android 中。旧视频和新闻视频（flash 和 html5）不能在有/没有 Flash 插件的情况下播放。发生错误 ：

（第一个）E/Web Console(661): Uncaught TypeError: Cannot read property 'clientHeight' of null at [http://a.vimeocdn.com/p/1.4.16/js/player.mobile.js:47](http://a.vimeocdn.com/p/1.4.16/js/player.mobile.js:47)

（第二个错误） XMLHttpRequest 无法加载[http://a.vimeocdn.com/p/1.4.16/html_opt/ming_overlay_outro.html?1337676085504](http://a.vimeocdn.com/p/1.4.16/html_opt/ming_overlay_outro.html?1337676085504)。起源 player.vimeo 在 null:1

似乎有一个ajax域问题。那么是否有任何解决方法......在vimeo播放器选项或android代码中？谢谢。

最好的问候，尼古拉斯

# javascript - Tinymce 错误无法调用 undefined 的 uniqueId

> ID：10782132
> 
> 赞同：2
> 
> 时间：2012-05-28T09:16:02.033
> 
> 标签：javascript, tinymce

我正在使用 jquery 版本的 tinymce 我之前使用过它并且工作正常，但现在它不再工作了

我的代码是：

```
$('textarea.tinymce').tinymce({
        // Location of TinyMCE script
        script_url : '../js/tiny_mce/tiny_mce.js',

        // General options
        theme : "advanced",
        plugins : "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",

        // Theme options
        theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,fontselect,fontsizeselect,forecolor,|,bullist,numlist,|,hr,|,link,unlink,image,|,code",
        theme_advanced_buttons2 : "",
        theme_advanced_buttons3 : "",
        theme_advanced_buttons4 : "",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_resizing : false,

        // Drop lists for link/image/media/template dialogs
        template_external_list_url : "lists/template_list.js",
        external_link_list_url : "lists/link_list.js",
        external_image_list_url : "lists/image_list.js",
        media_external_list_url : "lists/media_list.js",

    }); 
```

它显示错误：

* * *

未捕获的类型错误：无法调用未定义的方法“uniqueId”

任何想法，如何解决？

# android - 哪一个最适合计算两点之间的距离？

> ID：10782135
> 
> 赞同：8
> 
> 时间：2012-05-28T09:16:29.447
> 
> 标签：android, distance

我试图计算谷歌地图中两点之间的距离。我发现他们正在使用的一些链接
`distanceTo()`以及在某处使用`distanceBetween()`. 哪个最好计算距离？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:25:24.440

此[链接](http://www.movable-type.co.uk/scripts/latlong.html)可能对您有所帮助。

它允许计算两个纬度经度点之间的距离：

此脚本使用“Haversine”公式计算两点之间的大圆距离（即）地球表面上的最短距离。

```
var R = 6371; // Radius of the earth in km
var dLat = (lat2-lat1).toRad();  // Javascript functions in radians
var dLon = (lon2-lon1).toRad(); 
var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(lat1.toRad()) * Math.cos(lat2.toRad()) * 
        Math.sin(dLon/2) * Math.sin(dLon/2); 
var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
var d = R * c; // Distance in km. 
```

# c++ - CreateFile vs fopen vs ofsteam优缺点？

> ID：10782137
> 
> 赞同：11
> 
> 时间：2012-05-28T09:16:42.043
> 
> 标签：c++, c

`CreateFile`vs `fopen`vs `ofsteam`-*优势和劣势*？

我听说 CreateFile 功能强大但仅适用于 windows。
你能告诉我应该使用什么（在 Windows 上）以及为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T09:27:44.780

这取决于你在做什么。对于顺序读取和写入文本文件，iostream 绝对是要走的路。对于涉及交易安全或非标准设备的任何事情，您必须直接访问系统（`CreateFile`或`open`）。即使这样，对于文本的顺序读取和写入，最好的解决方案是定义自己的`streambuf`，并将其与 iostream 一起使用。

我想不出任何`fopen`更可取的上下文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T09:24:24.207

除非您需要 Windows 文件函数提供的功能（例如重叠 I/O），否则我的建议是使用 C++ 中的 iostreams 或 C 中的`FILE`（`fopen`和朋友）。

除了更便携之外，您还可以对文本文件使用格式化的输入/输出，而对于 C++，很容易为您的类重载输出/输入运算符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T09:34:54.210

如果您想使用 Windows 文件*内存映射*，您应该使用`CreateFile`（例如，`HANDLE`传递给[CreateFileMapping](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537%28v=vs.85%29.aspx) API 的是 的返回值`CreateFile`）。此外，`CreateFile`提供比 C 和 C++ 标准文件 API 更高的自定义选项。

但是，如果您想编写*可移植代码*，或者如果您不需要 Windows 特定的功能，C 和 C++ 标准文件 API 就可以了。在一些测试中，当处理大数据时，我注意到 C++ I/O 流与原始 C 文件 API 的一些性能开销；如果您碰巧遇到这种情况，您可以简单地将原始 C 文件 API 包装在某个 C++ RAII 类中，并仍然在 C++ 代码中使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T09:31:40.130

除非您绝对需要 OS API 函数（如[`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)）提供的额外功能，否则我建议您使用标准库函数（如`fopen`或`ofstream`）。这样，您的程序将更具可移植性。

我能想到的唯一真正的优势`CreateFile`是重叠的 I/O 和更细粒度的访问权限。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T09:22:11.693

在大多数情况下，最好在 C 中使用 fopen 或在 C++ 中使用 ofstream。CreateFile 对共享和缓存提供了一些额外的控制，但不提供格式化功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-03T18:34:59.500

我复制了我的答案

[Windows 中的 fopen 或 CreateFile](https://stackoverflow.com/questions/31225742/fopen-or-createfile-in-windows)

由于某种原因而关闭，这让我无法理解......

1.  fopen() 没有定义返回系统错误代码的方法。可能有一种未定义的方式来访问 errno，但这可能与系统错误代码相同，也可能不同。
2.  另外，我不认为有一种定义的方式来访问真正的系统句柄（类型为 HANDLE），而您可能希望使用它来传递给期望这样一个系统句柄的许多 win64 系统调用之一（例如内存映射IO）
3.  使用 open() 一个整数表示文件句柄，它不是系统句柄（在 Windows 上）。
4.  fopen() 发生错误时不会抛出异常。为了获得一些 RAII，您需要将其包装到一个类中。
5.  将 CreateFile() 封装到一个类中并不比将 fopen() 或 open() 封装到一个类中更昂贵。
6.  使用 C++ 特性（std::ofstream、std::ifstream）写入/读取文件会遇到与 fopen() 相同的问题：
    *   默认情况下它不会抛出错误。为了启用此功能，您需要调用一些方法而不是能够使用一些构造函数参数——这意味着对于 RAII，您需要派生此类（为了将其用作引发错误的成员/基类） .
    *   如果能够从抛出的异常中检索系统错误代码，或者从 what() 返回的消息是否告诉您有关系统错误的任何信息，则未定义。
    *   使用这个流接口没有真正的可插入接口来定义读取或写入的源或目标。重载流接口非常麻烦且容易出错。
7.  使用类似 C 的编程（注意或忽略返回代码并手动编写清理代码）是许多邪恶的根源（还记得心脏出血吗？）...

结论：

1.  为 CreateFile()/CloseHandle() 编写资源包装器。资源包装器是一个类，它在构造函数中执行do-action，在析构函数中执行undo-action，并在出错时抛出异常。每个操作系统中都有很多这样的系统调用对，尤其是在 Win64 中。
2.  编写一个系统错误异常类（在 CreateFile() 失败的情况下用于上述类以及所有其他系统错误）或调查新的 system_exception 类（在 C++0x 中）实际在做什么以及它是否足够了。
3.  为 ReadFile() 和 WriteFile() 编写一个功能包装器，它将系统错误转换为抛出的系统异常对象...
4.  可能定义您自己的接口以写入某处并从某处读取，以便您可以实现独立于要读取/写入的源/目标类型的其他内容。
5.  编写一个允许您缓存从某处读取或写入某处的缓存类也是儿童游戏。当然，缓存类不应该知道也不关心您正在写入/读取的源/目标。

不要害怕这些小任务。您实际上会知道，与调用它的代码相比，您的代码中发生了什么，并且这些小代码片段应该可以忽略不计（以代码行数计）。此外，如果您对所有事情都使用 RAII，那么调用这些实用程序类的代码将比不使用 RAII 并且必须使用两步甚至更多步初始化时要少得多，并且容易出错的可能性要小得多。用其他操作系统的等效实用程序类替换这些实用程序类也是小菜一碟（在 UNIX 上使用 open()/close()/read()/write()）。

为了过去的几千年，不要阅读谷歌编程指南！

# ruby-on-rails-3 - rake thinking_sphinx:start 时思考 sphinx 错误

> ID：10782140
> 
> 赞同：1
> 
> 时间：2012-05-28T09:16:49.783
> 
> 标签：ruby-on-rails-3, sphinx, thinking-sphinx

我正在使用 gem 'thinking-sphinx', '2.0.10' 进行搜索功能。我正在关注[http://railscasts.com/episodes/120-thinking-sphinx](http://railscasts.com/episodes/120-thinking-sphinx)教程。

```
script/plugin install git://github.com/freelancing-god/thinking-sphinx.git
rake thinking_sphinx:index 
```

这两个步骤执行没有任何问题，但是当我 rake thinking_sphinx:start 时出现以下错误：

```
Failed to start searchd daemon. Check /home/user/newsvn/alumnicell/log/searchd.log.
Failed to start searchd daemon. Check /home/user/newsvn/alumnicell/log/searchd.log 
```

我在网上搜索过这个问题，但即使尝试了很多解决方案，我也无法解决这个错误。此外，在网上查看时，我知道配置中应该有 sphinx.yml 文件，但我的项目中不存在。

如何解决这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T05:36:29.543

解决了...我只是在配置中添加了 sphinx.yml 文件并为每个环境指定了端口号，如下所示：

```
development:
  port: 9310
  morphology: stem_en

test:
  port: 9310
  morphology: stem_en

production:
  port: 9310
  morphology: stem_en 
```

然后将 development.sphinx.conf 中的监听地址更改为 searchd 如下：

```
searchd
{
  listen = 127.0.0.1:9310
} 
```

然后在控制台上运行命令：

```
rake thinking_sphinx:rebuild 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:25:44.627

可能是`/home/user/newsvn/alumnicell/log/searchd.log`有解决问题的办法。

就张贴吧！

# entity-framework - 添加迁移引发错误，未找到配置

> ID：10782141
> 
> 赞同：0
> 
> 时间：2012-05-28T09:16:52.200
> 
> 标签：entity-framework

当我尝试使用 EF Code-First 创建新迁移时，包管理器控制台给我一个错误提示：“在程序集 'Project.DataAccess' 中找不到迁移配置类型。（在 Visual Studio 中，您可以使用包管理器控制台中的 Enable-Migrations 命令添加迁移配置）。

我以前在这个项目上成功地使用过这种方法，并且该项目确实有一个具有所有正确继承的配置文件。

我还尝试指定所有参数 -Name、-StartupProjectName 等，但没有变化。当尝试重新启用迁移时，VS 无法成功创建配置并继承自我的上下文类。

对这个问题有什么建议吗？使用 EF 4.3.1 和代码优先

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:42:49.350

此问题已通过使用包管理器控制台安装 EF 4.3.1 得到解决。我已经进行了手动升级，但由于某种原因没有成功。

# python - 使用 Python apiclient 从 Google GWT Appengine 对 Freebase 进行多个 MQL 查询

> ID：10782144
> 
> 赞同：1
> 
> 时间：2012-05-28T09:17:01.323
> 
> 标签：python, freebase, google-api-python-client

如何使用 Python 的 Google API 客户端库 ( [http://wiki.freebase.com/wiki/Google_API_Client_Libraries#Python](http://wiki.freebase.com/wiki/Google_API_Client_Libraries#Python) )重现以下 MQL 查询

```
https://api.freebase.com/api/service/mqlread?queries={"q1":[{"name~=":"*doubt*","name": None,"type": "/media_common/quotation","author": [{"name": "William Shakespeare"}]}], "q2":[{"name~=":"*law*","name": None,"type": "/media_common/quotation","author": [{"name": "William Shakespeare"}]}]} 
```

以下单个查询有效：

```
from apiclient import discovery
from apiclient import model
import json
from pprint import pprint

DEVELOPER_KEY = ''

model.JsonModel.alt_param = ""
freebase = discovery.build('freebase', 'v1', developerKey=DEVELOPER_KEY)
query = [{"name~=":"*doubt*","name": None,"type": "/media_common/quotation","author": [{"name": "William Shakespeare"}]}]
response = json.loads(freebase.mqlread(query=json.dumps(query)).execute())
pprint (response) 
```

我看不到如何将参数“查询”更改为“查询”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:03:38.403

该`queries`参数已在新 API 中消失。您可以改用类似以下的方式使用[文档较少的 RPC 接口：](http://wiki.freebase.com/wiki/API_Changes)

```
import urllib
import urllib2
import json

url = 'https://www.googleapis.com/rpc'
requests = [{
  'method': 'freebase.text.get', 
  'apiVersion': 'v1', 
  'params': {
   'id': ['en','bob_dylan']
  }
},{
  'method': 'freebase.text.get', 
  'apiVersion': 'v1', 
  'params': {
    'id': ['en','blade_runner']
  }
}]
headers = { 'Content-Type': 'application/json' }
req = urllib2.Request(url, json.dumps(requests), headers)
response = urllib2.urlopen(req)
print response.read() 
```

[代码片段由 Google 开发人员 Shawn Simister 提供]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T21:16:21.277

[在Google API Python 客户端](http://code.google.com/p/google-api-python-client/)的下一个版本（1.0 beta 9）中，您将能够将多个查询批处理在一起，如下所示：

```
from apiclient import discovery, model
from apiclient.http import BatchHttpRequest
import json

DEVELOPER_KEY = open('DEVELOPER_KEY').read()
query1 = [{"name~=":"*doubt*","name":None,"type":"/media_common/quotation","author":[{"name":"William Shakespeare"}]}]
query2 = [{"name~=":"*law*","name":None,"type":"/media_common/quotation","author":[{"name":"William Shakespeare"}]}]

model.JsonModel.alt_param = ""
freebase = discovery.build('freebase', 'v1', developerKey=DEVELOPER_KEY)

def display_results(request_id, response):
    for topic in response['result']:
        print topic['name']

batch = BatchHttpRequest(callback=display_results)
batch.add(freebase.mqlread(query=json.dumps(query1)))
batch.add(freebase.mqlread(query=json.dumps(query2)))
batch.execute(http) 
```

使用这种技术，您可以组合多个查询，甚至 MQL 查询与搜索查询，它只会创建一个 HTTP 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:40:32.830

假设发现文档包含`queries`参数，我相信它会是：

```
queries = {"q1":[{"name~=":"*doubt*","name": None,"type": "/media_common/quotation","author": [{"name": "William Shakespeare"}]}], "q2":[{"name~=":"*law*","name": None,"type": "/media_common/quotation","author": [{"name": "William Shakespeare"}]}]}
response = json.loads(freebase.mqlread(queries=json.dumps(queries)).execute())
pprint (response) 
```

客户端使用发现文档来确定每个 API 方法接受的参数。因此，只需更改 python 参数的名称就可以了。

# c# - Outlook 2010 拖放错误

> ID：10782145
> 
> 赞同：3
> 
> 时间：2012-05-28T09:17:04.640
> 
> 标签：c#, outlook-addin, outlook-2010

我有一个用户在或`Outlook 2010 Add-In`上拖放电子邮件的地方。要获取这些电子邮件，我使用以下代码：`TreeView``ListView`

```
Outlook._Application myOlApp = new Outlook.ApplicationClass();
Outlook.Selection droppedMails = myOlApp.ActiveExplorer().Selection; 
```

问题是，例如，如果用户选择三封电子邮件，dropMails 将有三封电子邮件，但在第一次选择之后，如果他选择一个，则 dropMails 将是四封。

我的问题是为什么 myOlApp.ActiveExplorer().Selection 第二次没有被清除？我必须释放 Outlook 对象吗？

**编辑：**

Outlook 中的电子邮件预览也停止工作。因此，拖放后每个选定的电子邮件都不会更改预览。

当用户单击 Outlook 中的另一个文件夹时，该问题将得到解决。

感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T12:34:18.290

经过一些研究，我发现问题在于丢弃的电子邮件`COM`对象没有被释放。释放它们最简单的方法是`e.Data.GetData("RenPrivateMessages");`在`DragDrop Event Handler`.

# security - 组电子邮件的更好的重置密码

> ID：10782147
> 
> 赞同：2
> 
> 时间：2012-05-28T09:17:08.167
> 
> 标签：security, forgot-password

我已经阅读了这两个关于忘记密码的链接，以及根据几种情况和情况重置密码的更好方法......

[忘记密码：实现忘记密码功能的最佳方法是什么？](https://stackoverflow.com/questions/522967/forgot-password-what-is-the-best-method-of-implementing-a-forgot-password-funct) [最好的“忘记密码”方法是什么？](https://stackoverflow.com/questions/901639/what-is-the-best-forgot-my-password-method)

但我手头有一点不同的事情。

我们正在考虑重置密码/忘记密码的事情，但挑战是我们有属于群组电子邮件的用户

例如engineering@mycorporate.com、h.resource@mycorporate.com 等

每个群组邮箱有很多用户，他们的邮箱是群组的一部分，他们需要使用群组邮箱登录本地内网系统。

如果我们有一个忘记密码链接让他们重置密码，我在这里看到了一些可能性：

1.  用户在群组电子邮件中输入密钥，验证群组电子邮件，发送带有一些唯一字符串但临时 1 小时的链接，单击电子邮件中的唯一链接，输入新密码并确认新密码。

2.  用户在群组邮箱中输入密钥，验证群组邮箱，向群组邮箱发送随机生成的新密码，要求他们在 1 小时内登录并更改密码。

但不知何故，问题仍然来自群组电子邮件，任何属于群组的用户都会知道随机密码（第 2 点）

但是，如果使用第 1 点或第 2 点的任何一种方法，Y 人执行忘记并重置密码，Z 人或其他任何人都不知道新重置的密码......

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:20:58.637

对群组电子邮件的收件人保密是没有意义的，因为他们每个人都可以启动并完成密码重置过程并将密码设置为他们喜欢的任何内容。如果有问题的帐户不应该可供电子邮件组的所有成员访问，则应将其更改为引用个人电子邮件地址而不是组一。

如果您确实打算让电子邮件组的所有成员都知道密码，那么无论您为实际更改实施何种机制，您都需要有一些渠道将新密码分发给所有成员。如果您可以依靠公钥加密并确保只有实际授权的收件人能够读取密码，则电子邮件是可以的，或者如果它不是一个非常关键的系统，您可以忽略安全最佳实践并发送新密码纯文本电子邮件。

# postgresql - postgres 中表格的图形视图

> ID：10782154
> 
> 赞同：0
> 
> 时间：2012-05-28T09:17:32.743
> 
> 标签：postgresql, graphics, sybase

我是postgres的新手。这是 Sybase 数据库中整个数据库（包含所有表和关系）的图形示例。 ![在此处输入图像描述](../Images/01b9b248428893ebf1518982390eddf5.png) 是否可以在 postgres 9 中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:53:45.687

我从未使用过它，但我认为您可以在 pgDesigner [http://sourceforge.net/projects/pgdesigner/中做到这一点](http://sourceforge.net/projects/pgdesigner/)

# javascript - 当用户在 html 文件中选择一些文本时执行 JavaScript 函数

> ID：10782155
> 
> 赞同：2
> 
> 时间：2012-05-28T09:17:33.507
> 
> 标签：javascript, html, javascript-events

我有一个显示一些文本的 html 文件。当用户在上面选择一些文本时，我需要调用一个 javascript 函数。我有以下代码，但 highlightSelection() 函数永远不会被调用。

```
window.onselect = highlightSelection;

function highlightSelection() {

} 
```

当用户选择一些文本时，还有其他方法可以调用 JS 函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T14:00:45.053

您需要将文本放在适当的元素中，例如：

```
<input type="text" value="This is some selectable text" onselect="showMsg()" />

function showMsg(){

} 
```

# google-app-engine - 未找到 AsyncDatastoreService 的类异常

> ID：10782167
> 
> 赞同：3
> 
> 时间：2012-05-28T09:19:01.380
> 
> 标签：google-app-engine

我试过在网上搜索，但我似乎找不到这个错误的原因：

```
Caused by: java.lang.ClassNotFoundException: com.google.appengine.api.datastore.AsyncDatastoreService
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:176)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 98 more 
```

这真的很奇怪，因为我可以正确运行访问 Datastore 和 Blobstore API 的 Junit 测试。只有当我运行应用程序时，才会显示此错误。

# facebook - 使用 Flex 和 ActionScript SDK 的 user_work_history

> ID：10782168
> 
> 赞同：1
> 
> 时间：2012-05-28T09:19:04.957
> 
> 标签：facebook, apache-flex, graph

我正在使用 Flash Builder 和 Flex 为 Facebook 开发一个示例应用程序。现在，我已经把所有东西都启动并运行起来了——但是有一个问题，特别是工作历史部分。当我尝试显示用户的工作历史时..这是登录代码：

```
protected function login():void
    {
        FacebookDesktop.login(loginHandler, ["user_birthday", "user_work_history"]);

    } 
```

在这里，loginHandler 是一个回调函数，然后继续显示有关用户的数据：

```
protected function loginHandler(success:Object,fail:Object):void 
    { 

        if (success){
            currentState = "LoggedIn";
            fname.text = success.user.name;
            userImg.source=FacebookDesktop.getImageUrl(success.uid,"small");
            birthdayLbl.text=success.user.birthday;
            workLbl.text=success.user.work;

        }

    } 
```

现在，success.user.work 出现问题 - 它最终打印以下内容：

```
[object,Object],[object,Object],[object,Object],[object,Object] 
```

显然，我做错了什么......但我无法弄清楚它到底是什么。将不胜感激一些指点！

谢谢！

鲁迪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:17:02.170

success.user.work 中包含的对象很可能是一个对象数组，每个项目代表一个工作周期，因此您必须这样对待它。为每个项目使用列表和自定义渲染器，或者通过遍历数组并附加您感兴趣的字段来创建字符串。

要查看各个对象包含的内容，请在调试期间使用断点并检查它们，或者检查它们是否记录在 facebook 开发文档中。

# gwt - RequestFactory：手动创建代理进行单元测试

> ID：10782170
> 
> 赞同：0
> 
> 时间：2012-05-28T09:19:14.283
> 
> 标签：gwt, requestfactory

我想测试一个以 a`MyDomainProxy extends EntityProxy`作为参数的自定义单元格。自定义单元格根据 的值呈现不同的单元格`MyDomainProxy.getState()`。例如，它可以渲染 a`TextCell`或 a `SelectionCell`。

我要运行的测试是：

```
MyDomainProxy proxy = ... <- I don't know how to do that part.
MyCell cell = new MyCell();
cell.setActiveCell(proxy);
assertTrue(cell.getActiveCell() == MyCellType.TEXT_CELL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:03:25.357

我终于结束了使用`Mockito`.

```
MyDomainProxy proxy = Mockito.mock(MyDomainProxy.class);
when(proxy.getState()).thenReturn(DomainState.DELETED); 
```

# objective-c - CLLocationManagerDelegate 中的街道名称

> ID：10782172
> 
> 赞同：1
> 
> 时间：2012-05-28T09:19:29.543
> 
> 标签：objective-c, ios, cllocationmanager

如何实现这一点以**始终**显示街道名称？现在我有时只有街道名称，但总是城市名称。这个怎么运作？

我`CLLocationManagerDelegate`在课堂上使用，我想拥有：

```
Warsaw, Mickiewicza 
```

但有时在同一个位置我只得到：

```
Warsaw 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:17:04.713

地理编码将尝试返回其对用户位置的“最佳猜测”。这取决于诸如可用精度、附近地标等因素。如果它没有返回街道名称，可能 GPS 精度不足以估计最近的街道，并且数据库中没有附近的其他地标。GPS 子系统需要几分钟来“预热”并获得准确的锁定。

尝试稍等片刻，然后重试地理编码查找。请注意，尽管反向地理编码非常昂贵，并且如果您过于频繁地发出请求，服务器通常会限制您的客户端。

*   [位置感知编程指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/UsingGeocoders/UsingGeocoders.html#//apple_ref/doc/uid/TP40009497-CH4-SW5)

# xml - Eclipse，如何在 XML 文件中激活折叠？

> ID：10782174
> 
> 赞同：20
> 
> 时间：2012-05-28T09:19:54.630
> 
> 标签：xml, eclipse, folding

我在用 XML 编写代码时遇到折叠问题。实际上，当我编写 Java 代码时没有问题，我可以展开/折叠我的代码。

然而，在 XML 中没有折叠图标，虽然它是活动的。在侧边栏（行号）中，我右键单击然后选择`Folding > Enable Folding`栏的宽度变宽但我看不到折叠图标。我的屏幕背景是黑色的，这种颜色可能覆盖折叠图标吗？我不这么认为，因为当我点击这些区域时，什么也没有发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-26T11:46:11.947

**日食火星 (4.5.1)**

1.  **具有.xml 扩展名**的 XML 文件

     **只需编辑/打开文件，**折叠**选项将可用：

    [![在此处输入图像描述](../Images/093f155dff6caaf47d28b698f18141d1.png)](https://i.stack.imgur.com/b7Yjt.png)

    但是，如果您禁用然后通过右键单击左侧栏启用折叠：

    [![在此处输入图像描述](../Images/aa5dcaa9b6909ef6ef07bcd60071e813.png)](https://i.stack.imgur.com/bLna9.png)

    有一个**错误**：折叠将不可用。

    **解决方法**：将选项卡更改为另一个文件，然后再次返回上一个选项卡。图标会回来。

    [![在此处输入图像描述](../Images/ee7132a35213e179675c09144c134654.png)](https://i.stack.imgur.com/DZDCz.png)** 
***   具有**不同扩展名**的 XML 文件（例如：.xaml）

    您可以尝试通过右键单击使用 XML 编辑器打开文件：

    [![在此处输入图像描述](../Images/a413cefcf30c87a9ee1e473913d46a14.png)](https://i.stack.imgur.com/qlsNN.png)

    [![在此处输入图像描述](../Images/b4afcd7bd2d4faf79e5c399f7e41a2ca.png)](https://i.stack.imgur.com/a27gp.png)

    如果失败，只需从 Window > Preferences > General > Content Types将文件扩展名添加到**XML（Illformed） ：**

    [![在此处输入图像描述](../Images/fbcd9e32f4bdc72cdebaa273a57f9292.png)](https://i.stack.imgur.com/QcVbi.png)

    [![在此处输入图像描述](../Images/0f56fa67ba6400d50f17d0593e7273f2.png)](https://i.stack.imgur.com/fJB1m.png)

    [![在此处输入图像描述](../Images/31c7f73adf0d30d5bbd32aaff648d211.png)](https://i.stack.imgur.com/6Y0wx.png)** 

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T10:48:31.390

我使用 Eclipse-Java EE Juno。默认情况下启用 XML 折叠并且可以看到图标。但是在禁用并启用“启用折叠”选项后，看不到折叠图标。似乎是 Eclipse 中的一个错误。解决方法可能是在启用该选项后，尝试添加一个新标签（可能是虚拟标签）。然后可以看到折叠图标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T09:59:58.577

回答太晚了 3 年，但谷歌把我带到了这里，我想我的回答仍然有用:)

来自 Eclipse 的原生 xml 编辑器能够折叠/展开 xml。整洁的。android xml 编辑器不是这种情况（我猜是 ADT 插件附带的）。

如果您需要折叠 android xml 文件，只需右键单击它，使用 XML 编辑器打开。这将使用具有折叠功能的 eclipse 的 xml 编辑器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-29T05:41:17.713

使用 WST。[WST 主项目](http://www.eclipse.org/webtools/)它带有支持格式化和代码折叠等的 XML 编辑器。**

# javascript - Javascript 的 getElementById 的使用

> ID：10782175
> 
> 赞同：1
> 
> 时间：2012-05-28T09:20:00.450
> 
> 标签：javascript, getelementbyid

在 yui 库的示例代码中，我看到了这个符号：

```
var obj = document.getElementById("coffee_msg");
obj.style.display = 'block'; 
```

由于 obj 只使用一次，我宁愿这样：

```
document.getElementById("coffee_msg").style.display = 'block'; 
```

在 yui 库和许多其他地方使用第一个符号有什么原因吗？是否与某些浏览器不兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:21:41.163

没有“真正的”原因，只是为了使代码更具可读性。

就像：

```
var myAge = 26;
var myAgeNextYear = myAge + 1; 
```

对比：

```
var myAgeNextYear = 26 + 1; 
```

我*个人的偏好*是仅在我多次使用 obj 时才保留对它的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:23:01.443

如果您只需要设置一个属性，则根本没有关系（只要您不想在尝试访问它的属性之前检查返回值是否有效）。

但是，如果您有多个属性，您将只想进行一次查找（即使 id 查找非常快），因此将元素分配给变量是这种情况下的方法。

当然，您可以使用 jQuery 将其缩短：`$('#coffee_msg').show()`
如果元素由于某种原因不存在，您也不会收到错误消息。如果你想设置多个 CSS 属性等，你可以简单地使用一个函数来为你做这件事，一个调用或链接多个调用到不同的 jQuery 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T09:23:22.413

这两种不同的方式工作方式完全相同。使用临时`obj`变量可能有助于提高代码的可读性（但应该给它一个比`obj`这种情况更好的名称）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T09:26:42.827

第一个选项很有用，因为它提高了可读性，它还使 obj 变量可以立即用于其他用途。我会亲自使用这个例子。

# c# - url重写后AspImage无法显示

> ID：10782181
> 
> 赞同：1
> 
> 时间：2012-05-28T09:20:21.477
> 
> 标签：c#, image, url-rewriting, relative-path, binaryfiles

我有以下 C# 代码，从数据库设置图像值。图像不显示，无法显示图像。它一直有效，直到我重写了 url。

```
ASPxBinaryImage Icon = (ASPxBinaryImage)e.Item.FindControl("IconImage");
Icon.Value = Convert.FromBase64String(string.IsNullOrEmpty(N.Icon) ? "" : N.Icon); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:35:34.403

生成的图标标签是什么？它可以帮助您获取错误源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:30:54.433

我已经更改了 url 重写的规则，现在它正在工作。

# sql - 来自 sql 查询的休眠和布尔映射

> ID：10782183
> 
> 赞同：1
> 
> 时间：2012-05-28T09:20:37.017
> 
> 标签：sql, hibernate, javabeans

我有一个本机 sql 查询将 (aliasToBean) 转换为具有布尔值的 bean。

我的查询可能是这样的：

```
select val IS NOT NULL as boolValue , ... 
```

或这个：

```
select 1=0 as boolValue, ... 
```

我不明白如何让 Hibernate 知道我的 bean.boolValue 是一个布尔值，因为我在类型转换中遇到错误，在第一种情况下我得到一个 java.math.BigInteger 在第二种情况下是一个 java.lang.Integer。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:25:31.097

[您需要使用SQLQuery.addScalar() 方法](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/SQLQuery.html#addScalar%28java.lang.String,%20org.hibernate.type.Type%29)告诉 Hibernate 该列是布尔值。

# android - 如何在 Android 中使用 AES 加密 SD 卡中的文件？

> ID：10782187
> 
> 赞同：40
> 
> 时间：2012-05-28T09:20:59.397
> 
> 标签：android, file, encryption, aes

我想加密来自 SD 卡的图像并再次使用 AES 将其再次存储在 SD 卡中。主要思想是应用程序浏览图像，然后在我按下按钮时对其进行加密，然后将其存储在 sd 卡中。所以我的形象是安全的。

[我已经成功使用本教程http://www.androidsnippets.com/encryptdecrypt-strings](http://www.androidsnippets.com/encryptdecrypt-strings)中的AES 进行字符串加密，但我不知道如何使用图像而不是字符串来执行此操作。

这就是我使用字符串的方式：

```
public static String encrypt(String seed, String cleartext) throws Exception  
{
    byte[] rawKey = getRawKey(seed.getBytes());
    byte[] result = encrypt(rawKey, cleartext.getBytes()); 
    return toHex(result);
}

private static byte[] encrypt(byte[] raw, byte[] clear) throws Exception 
{
    SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
    byte[] encrypted = cipher.doFinal(clear);
    return encrypted;
} 
```

谁能帮我提供如何使用 AES加密**图像的示例代码？**

也许它必须使用 I/O 文件流，但我不知道如何使用此代码实现。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-05-28T09:27:19.137

**如果您接受用户输入的密码，请务必阅读[此答案](https://stackoverflow.com/a/3452620/1188357)。**

你应该看看： [CipherInputStream](http://developer.android.com/reference/javax/crypto/CipherInputStream.html)和[CipherOutputStream](http://developer.android.com/reference/javax/crypto/CipherOutputStream.html)。它们用于加密和解密字节流。

我有一个名为`cleartext`. 该文件包含：

> ```
> Hi, I'm a clear text.
> How are you?
> That's awesome! 
> ```

现在，您有一个`encrypt()`功能：

```
static void encrypt() throws IOException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException {
    // Here you read the cleartext.
    FileInputStream fis = new FileInputStream("data/cleartext");
    // This stream write the encrypted text. This stream will be wrapped by another stream.
    FileOutputStream fos = new FileOutputStream("data/encrypted");

    // Length is 16 byte
    // Careful when taking user input!!! https://stackoverflow.com/a/3452620/1188357
    SecretKeySpec sks = new SecretKeySpec("MyDifficultPassw".getBytes(), "AES");
    // Create cipher
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, sks);
    // Wrap the output stream
    CipherOutputStream cos = new CipherOutputStream(fos, cipher);
    // Write bytes
    int b;
    byte[] d = new byte[8];
    while((b = fis.read(d)) != -1) {
        cos.write(d, 0, b);
    }
    // Flush and close streams.
    cos.flush();
    cos.close();
    fis.close();
} 
```

执行此函数后，应该有一个文件名`encrypted`。该文件包含加密字符。

对于解密，您具有以下`decrypt`功能：

```
static void decrypt() throws IOException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException {
    FileInputStream fis = new FileInputStream("data/encrypted");

    FileOutputStream fos = new FileOutputStream("data/decrypted");
    SecretKeySpec sks = new SecretKeySpec("MyDifficultPassw".getBytes(), "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, sks);
    CipherInputStream cis = new CipherInputStream(fis, cipher);
    int b;
    byte[] d = new byte[8];
    while((b = cis.read(d)) != -1) {
        fos.write(d, 0, b);
    }
    fos.flush();
    fos.close();
    cis.close();
} 
```

执行解密后，应该有一个名为`decrypted`. 该文件包含自由文本。

您写道您是“菜鸟”，但根据加密的用例，如果您没有以正确的方式进行操作，您可能会造成很多伤害。了解你的工具！

CipherOutputStream [Oracle 文档](http://docs.oracle.com/javase/1.5.0/docs/guide/security/CryptoSpec.html#CipherOutput)的用法：

```
SecretKeySpec skeySpec = new SecretKeySpec(y.getBytes(), "AES");

FileInputStream fis;
FileOutputStream fos;
CipherOutputStream cos;
// File you are reading from
fis = new FileInputStream("/tmp/a.txt");
// File output
fos = new FileOutputStream("/tmp/b.txt");

// Here the file is encrypted. The cipher1 has to be created.
// Key Length should be 128, 192 or 256 bit => i.e. 16 byte
SecretKeySpec skeySpec = new SecretKeySpec("MyDifficultPassw".getBytes(), "AES"); 
Cipher cipher1 = Cipher.getInstance("AES");  
cipher1.init(Cipher.ENCRYPT_MODE, skeySpec);
cos = new CipherOutputStream(fos, cipher1);
// Here you read from the file in fis and write to cos.
byte[] b = new byte[8];
int i = fis.read(b);
while (i != -1) {
    cos.write(b, 0, i);
    i = fis.read(b);
}
cos.flush(); 
```

因此，加密应该起作用。当您反转该过程时，您应该能够读取解密的字节。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-06-16T18:28:55.340

从 android 10 开始，存在巨大的存储限制，因此 DocumentFile 将比 File 类更常见。所以我也使用 Uri 提供答案。

```
fun Activity.encrypt(curLocUri: Uri, newLocUri: Uri, password: String, salt: String) : Boolean{
    // opening file input/outputStreams
    val fis = contentResolver.openInputStream(curLocUri) ?: return false
    val fos = contentResolver.openOutputStream(newLocUri) ?: return false

    try {
        var key: ByteArray = ("$salt$password").toByteArray(Charsets.UTF_8)
        val sha: MessageDigest = MessageDigest.getInstance("SHA-1")
        key = sha.digest(key)
        key = key.copyOf(16)
        val sks = SecretKeySpec(key, "AES")
        val cipher: Cipher = Cipher.getInstance("AES")
        cipher.init(Cipher.ENCRYPT_MODE, sks)
        val cos = CipherOutputStream(fos, cipher)
        var b: Int
        val d = ByteArray(8)
        while (fis.read(d).also { b = it } != -1) {
            cos.write(d, 0, b)
        }
        cos.flush()
        cos.close()
        return true
    } catch (e: Throwable){
        fis.close()
        fos.close()
        return false
    }
}

fun Activity.decrypt(curLocUri: Uri, newLocUri: Uri, password: String, salt: String): Boolean {
    // opening file input/outputStreams
    val fis = contentResolver.openInputStream(curLocUri) ?: return false
    val fos = contentResolver.openOutputStream(newLocUri) ?: return false

    try {
        var key: ByteArray = ("$salt$password").toByteArray(Charsets.UTF_8)
        val sha = MessageDigest.getInstance("SHA-1")
        key = sha.digest(key)
        key = Arrays.copyOf(key, 16)
        val sks = SecretKeySpec(key, "AES")
        val cipher = Cipher.getInstance("AES")
        cipher.init(Cipher.DECRYPT_MODE, sks)
        val cis = CipherInputStream(fis, cipher)
        var b: Int
        val d = ByteArray(8)
        while (cis.read(d).also { b = it } != -1) {
            fos.write(d, 0, b)
        }
        fos.flush()
        fos.close()
        cis.close()
        return true
    } catch (e: Throwable){
        fos.flush()
        fos.close()
        return false
    }
} 
```

这里`Uri`s 是从 onActivityResult 的文件选择器收到的。

例如，您可以在[此处找到](https://github.com/SomeoneAndNoone/AndroidBasicsExamples/tree/fil-encryption-decrytion)

# vba - Excel VBA：循环单元格并将值复制到另一个工作簿

> ID：10782189
> 
> 赞同：4
> 
> 时间：2012-05-28T09:21:05.923
> 
> 标签：vba, loops, excel

我已经在这个问题上花费了几个小时，但我没有成功找到一个可行的解决方案。

这是我的**问题描述**：

我想遍历一个工作簿中的特定范围的单元格并将值复制到另一个工作簿。根据第一个工作簿中的当前列，我将值复制到第二个工作簿中的不同工作表中。当我执行我的代码时，我总是得到`runtime error 439: object does not support this method or property`.

我的**代码**看起来或多或少是这样的：

```
Sub trial()

Dim Group As Range
Dim Mat As Range
Dim CurCell_1 As Range
Dim CurCell_2 As Range

Application.ScreenUpdating = False

Set CurCell_1 = Range("B3") 'starting point in wb 1

For Each Group in Workbooks("My_WB_1").Worksheets("My_Sheet").Range("B4:P4")
    Set CurCell_2 = Range("B4") 'starting point in wb 2
    For Each Mat in Workbooks("My_WB_1").Worksheets("My_Sheet").Range("A5:A29")
        Set CurCell_1 = Cells(Mat.Row, Group.Column) 'Set current cell in the loop
        If Not IsEmpty(CurCell_1)
            Workbooks("My_WB_2").Worksheets(CStr(Group.Value)).CurCell_2.Value = Workbooks("My_WB_1").Worksheets("My_Sheet").CurCell_1.Value 'Here it break with runtime error '438 object does not support this method or property
            CurCell_2 = CurCell_2.Offset(1,0) 'Move one cell down
        End If
    Next
Next

Application.ScreenUpdating = True

End Sub 
```

我已经进行了广泛的研究，如果您为对象（工作表和范围）使用显式名称，我知道如何将值从一个工作簿复制到另一个工作簿，但我不知道为什么它不像我使用它实现它那样工作变量。我还搜索了 stackoverlow 和 - 显然 - 谷歌，但我没有找到可以回答我的问题的类似问题。

所以我的**问题**是：你能告诉我代码中的错误在哪里，或者是否有另一种更简单的方法可以使用不同的方式完成相同的操作？

这是我在这里的第一个问题，所以我希望我的代码格式、提出的问题和提供的信息一切正常。否则让我知道。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T11:24:20.843

**5 件事...**

**1）**你不需要这条线

`Set CurCell_1 = Range("B3") 'starting point in wb 1`

这条线毫无意义，因为您将其设置在循环内

**2）**您每次都在循环中设置它

`Set CurCell_2 = Range("B4")`

你为什么要这样做？它每次都会简单地覆盖这些值。还有这个范围在哪张纸上？？？（见第 5 点）

**3)**`CurCell_2`是一个范围，正如 JohnB 指出的那样，它不是一种方法。

改变

`Workbooks("My_WB_2").Worksheets(CStr(Group.Value)).CurCell_2.Value = Workbooks("My_WB_1").Worksheets("My_Sheet").CurCell_1.Value`

到

`CurCell_2.Value = CurCell_1.Value`

**4）**您不能仅通过设置“=”符号来分配范围

`CurCell_2 = CurCell_2.Offset(1,0)`

将其更改为

`Set CurCell_2 = CurCell_2.Offset(1,0)`

**5)**在处理两个或多个对象时，始终指定完整的声明，以减少混淆。你的代码也可以写成

```
Option Explicit

Sub trial()
    Dim wb1 As Workbook, wb2 As Workbook
    Dim ws1 As Worksheet, ws2 As Worksheet
    Dim Group As Range, Mat As Range
    Dim CurCell_1 As Range, CurCell_2 As Range

    Application.ScreenUpdating = False

    '~~> Change as applicable
    Set wb1 = Workbooks("My_WB_1")
    Set wb2 = Workbooks("My_WB_2")

    Set ws1 = wb1.Sheets("My_Sheet")
    Set ws2 = wb2.Sheets("Sheet2") '<~~ Change as required

    For Each Group In ws1.Range("B4:P4")
        '~~> Why this?
        Set CurCell_2 = ws2.Range("B4")
        For Each Mat In ws1.Range("A5:A29")
            Set CurCell_1 = ws1.Cells(Mat.Row, Group.Column)
            If Not IsEmpty(CurCell_1) Then
                CurCell_2.Value = CurCell_1.Value
                Set CurCell_2 = CurCell_2.Offset(1)
            End If
        Next
    Next

    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T09:24:16.017

```
Workbooks("My_WB_2").Worksheets(CStr(Group.Value)).CurCell_2.Value 
```

这是行不通的，因为 CurCell_2 不是 Worksheet 的方法，而是一个变量。替换为

```
Workbooks("My_WB_2").Worksheets(CStr(Group.Value)).Range("B4").Value 
```

# php - 按日期订购特色和非特色的 wordpress 帖子

> ID：10782194
> 
> 赞同：-1
> 
> 时间：2012-05-28T09:21:14.113
> 
> 标签：php, wordpress, posts

我正在尝试按日期订购特色和非特色帖子......无论状态如何......我尝试了以下查询但不太工作......我正在使用 TwentyEleven

```
 <?php query_posts('cat=-89&orderby=date&order=DESC');?> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:26:30.290

这是我采用的解决方案。

```
query_posts('ignore_sticky_posts=1&posts_per_page=3&cat=6'); 
```

# .htaccess - htaccess 阻止直接访问

> ID：10782200
> 
> 赞同：0
> 
> 时间：2012-05-28T09:21:40.200
> 
> 标签：.htaccess

你能帮我阻止索引并阻止直接访问我的数据，所以任何人都无法下载域/数据/File1.pdf，他们只能下载文件并在这种情况下从我的显示页面打开 view.php，在文件视图中。 php 我使用了 google docs。我在我的 htaccess 中使用了这个，但它没有用

```
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{REQUEST_URI} !^/(view.php|view).* [NC]
RewriteCond %{HTTP_REFERER} !^http://www.domain.com.*$ [NC]
RewriteRule \.(pdf|zip|doc|rar)$ - [F,NS,L] 
```

这是我的文件夹结构

```
- include
- data/
--- File1.pdf
--- File2.zip
--- File3.doc
--- File3.rar
- index.php
- view.php
- themes.js 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:37:04.100

您应该寻找的是[.htaccess 防盗链](http://www.google.com/search?btnG=1&pws=0&q=.htaccess%20hotlinking%20prevention)

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?yourdomain.com [NC]
RewriteRule \.(jpg|jpeg|png|gif|pdf)$ - [NC,F,L] 
```

# xslt - 将某些字段包装在 CDATA 中，但不包装其他具有相同名称的字段

> ID：10782202
> 
> 赞同：0
> 
> 时间：2012-05-28T09:21:44.597
> 
> 标签：xslt

[从我问的上一个问题](https://stackoverflow.com/questions/9465560/how-do-i-force-xslt-transformation-to-load-data-into-cdata-sections)分叉出来，我如何确保`example/one/field`和`example/three/field`包含在 CDATA 中，而`example/two/field`不是？

**输入：**

```
<?xml version="1.0"?>
<example>
  <one>
    <field>CDATA required here</field>
  </one>
  <two>
    <field>No CDATA thanks</field>
  </two>
  <three>
    <field>More CDATA please</field>
  </three>
</example> 
```

**所需输出：**

```
<?xml version="1.0"?>
<example>
  <one>
    <field><![CDATA[CDATA required here]]></field>
  </one>
  <two>
    <field>No CDATA thanks</field>
  </two>
  <three>
    <field><![CDATA[More CDATA please]]></field>
  </three>
</example> 
```

我可以指定`<xsl:output cdata-section-elements="field"/>`，但这也会影响`example/two/field`。我曾尝试输入类似的路径，`<xsl:output cdata-section-elements="example/one/field example/three/field"/>`但这会产生错误（*错误 XTSE0280: Invalid element name. Invalid QName {example/one/field}*）。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:07:19.053

使用您当前的标记，我认为 XSLT 没有干净的方法。您至少需要使用不同的元素名称或不同的名称空间，以允许您和 XSLT 处理器的序列化程序区分哪些元素作为 CDATA 部分输出，哪些不是。

或者您需要考虑使用禁用输出转义，例如

```
<xsl:template match="one/field | three/field">
  <xsl:copy>
    <xsl:text disable-output-escaping="yes"><![CDATA[<![CDATA[]]></xsl:text>
    <xsl:value-of select="."/>
    <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
  </xsl:copy>
</xsl:template> 
```

[编辑] 这是一个完整的示例样式表：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="one/field | three/field">
  <xsl:copy>
    <xsl:text disable-output-escaping="yes"><![CDATA[<![CDATA[]]></xsl:text>
    <xsl:value-of select="."/>
    <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

但是请注意，disable-output-escaping 是一种可选的序列化功能，并非所有 XSLT 处理器都支持。

# character-encoding - 奇怪的编码替换

> ID：10782205
> 
> 赞同：0
> 
> 时间：2012-05-28T09:21:56.893
> 
> 标签：character-encoding

我有一个文件。我不知道它是如何处理的。这可能是双重编码。我发现这个关于双重编码的链接几乎解决了我的问题：

[http://www.spamusers.com/encoding.htm](http://www.spamusers.com/encoding.htm)

它具有所有双重编码替换，例如：

```
ÃƒÂ€    À
ÃƒÂ     Á
ÃƒÂ‚    Â 
```

不幸的是，我还有其他奇怪的角色，例如：

```
ÃÂº
ÃÂ§
ÃÂ¶ 
```

你知道如何清理这些奇怪的字符吗？对于我知道的那些我刚刚制作了一个 bash 脚本并且我刚刚替换了它们。但我不知道如何识别其他人。我在 linux 上运行，所以如果你有一些魔法命令，我会喜欢的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:49:47.857

您链接到的“双重编码替换”页面似乎包含旨在修复双重 UTF-8 编码的字符数据的映射。因此，正确的修复程序是反转此类映射并查看结果是否有意义。

例如，如果您使用重音符号 A、À、U+00C0 和 UTF-8 对其进行编码，您将得到字节 C3 A0。例如，如果这些被错误地理解为根据 windows-1252 的单字节编码，则会得到字符 U+00C3 U+00A0（字母 Ã 和不间断空格）。如果这些是 UTF-8 编码的，则前者为 C3 83，后者为 C2 80。如果这些字节依次根据 windows-1252 进行解释，您将获得页面上的 ÃƒÂ€。

但你实际上并没有“ÃƒÂ€”，对吗？*你有一些数字数据，字节，如果*根据 windows-1252 解释，就会以这种方式显示。但这将是一个错误的解释。

您应该首先以 UTF-8 编码读取数据，将其解码为字符，检查所有代码是否小于 100 个十六进制（如果不是，则在某处涉及另一个错误），然后再次 UTF-9 解码。

# javascript - 在客户端清除 PlaceHolder 控件

> ID：10782210
> 
> 赞同：0
> 
> 时间：2012-05-28T09:22:18.293
> 
> 标签：javascript, asp.net, placeholder

是否可以使用 JavaScript 清除`asp:PlaceHolder`客户端的所有控件？

类似的东西：`placeHolder.Controls.Clear()`- 但这是在服务器端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:26:50.527

您可以使用以下 jQuery 代码：

```
$("#placeHolder").html(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:39:02.963

不优雅，但有效。用另一个 div 包围你的 PlaceHolder：

```
<div id="masterDiv">
        <asp:PlaceHolder runat="server" ID="placeHolder1" >
            Some stuff
            <input type="text" />
            <input type="submit" value="Don't click!" />
        </asp:PlaceHolder>
 </div> 
```

如果可以使用 jQuery，则使用**空**函数或**html('')**

```
$('#masterDiv').empty(); 
```

或者

```
$('#masterDiv').html(''); 
```

如果您必须使用 JavaScript，请执行以下操作：

```
document.getElementById('masterDiv').innerHTML = ""; 
```

# javascript - Cordova (PhoneGap) 在 jQuery Mobile 应用程序的每个页面上重新初始化

> ID：10782211
> 
> 赞同：1
> 
> 时间：2012-05-28T09:22:19.217
> 
> 标签：javascript, jquery, cordova

我一直在使用 Cordova 和 jQuery Mobile 编写一个简单的四屏 Android 应用程序。不同的屏幕作为具有 data-role="page" 属性的 DIV 排列在一个 HTML 页面中。我基本上从 jQuery Mobile 文档中复制了多页示例模板。

[http://jquerymobile.com/test/docs/pages/page-anatomy.html](http://jquerymobile.com/test/docs/pages/page-anatomy.html)

页面之间的导航通过固定在每个页面底部的持久导航栏进行。同样，我使用了 jQuery Mobile 文档中建议的代码，几乎没有修改。

```
<div data-role="footer" data-id="appNavBar" data-position="fixed">
    <div data-role="navbar">
        <ul>
            <li><a href="#homePage" data-icon="home" data-transition="none" class="ui-btn-active ui-state-persist">Home</a></li>
            <li><a href="#historyPage" data-icon="grid" data-transition="none">History</a></li>
            <li><a href="#settingsPage" data-icon="gear" data-transition="none">Settings</a></li>
            <li><a href="#aboutPage" data-icon="info" data-transition="none">About</a></li>
        </ul>
    </div>
</div> 
```

各种 Javascript 库包含在 HTML 页面的 head 部分中，如下所示（application.js 包含应用程序的逻辑）。

```
<head> 
    <title>Redacted</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="jquery/RedactedTheme.min.css" />
    <link rel="stylesheet" href="jquery/jquery.mobile.structure-1.1.0.min.css" />
    <link rel="stylesheet" href="application.css" />
    <script type="text/javascript" src="jquery/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="jquery/jquery.mobile-1.1.0.min.js"></script>
    <script type="text/javascript" src="flot/jquery.flot.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script> 
    <script type="text/javascript" charset="utf-8" src="statusbarnotification.js"></script>
    <script type="text/javascript" charset="utf-8" src="application.js"></script>
</head> 
```

当 Cordova 完成加载并准备好使用时，它会发出“deviceready”信号。Cordova 文档建议将所有设置代码绑定到与该信号相关的事件侦听器。我在 application.js 中这样做了：

```
function onDeviceReady() {
    console.debug("Cordova initialized.");
    setup();
}
document.addEventListener("deviceready", onDeviceReady); 
```

[setup() 是一个从浏览器 Web SQL 数据库和存储（使用此处](http://docs.phonegap.com/en/1.7.0/cordova_storage_storage.md.html#Storage)定义的 Cordova API）读取信息的函数，以便在应用程序启动之间维护用户偏好和使用信息。

现在问题来了：我的印象是 jQuery Mobile 会使用 jQuery ajax 方法来加载第一页之后的任何后续页面，这样做会去掉 head 部分并直接跳到带有数据的 DIV -role="page" 属性和适当的 ID。相反，我观察到的是，每当我访问应用程序的新页面时，head 部分中的脚本似乎都会重新加载。这发生在第一次在会话中访问页面时，然后停止发生。

似乎 Cordova 正在重新初始化，并且它再次发出 deviceready 信号。在 Eclipse 中使用 LogCat，我可以看到我放置在 onDeviceReady 函数中的调试消息。setup() 函数也被再次调用。这大大减慢了速度。

有人知道我哪里出错了吗？有没有办法确保 Cordova 只加载一次？

谢谢，埃文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:12:13.840

I know that this issue is about 9 months old, but just in case my solution helps someone else with the same issue

Don't build your pages with display per HTML, instead build one long HTML page with each display part in it's own DIV with `data-role="page"`

Now, when you're changing page, you can use JQM's call of `$.mobile.changePage()` to change the display page

e.g. your page could look like this:

```
<div data-role="page" id="startingPage">
<p onClick="$.mobile.changePage('page2')">Page Link</p>
</div>

<div data-role="page" id="page2">
<p>more content here</p>
</div> 
```

I know this seems counter-intuitive for most web development, but working with PhoneGap & JQM means **NOT** working in standard web development

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:39:32.153

我在使用 phonegap facebook connect 插件时遇到了同样的问题。唯一的解决方法是将整个应用程序设计为一个 html 文档，其中的面板显示和隐藏为不同的屏幕。如果要将面板保存在单独的文件中，可以使用 require.js 之类的东西

# django - Pass url parameters to Django wizard

> ID：10782212
> 
> 赞同：2
> 
> 时间：2012-05-28T09:22:27.217
> 
> 标签：django, django-urls

As the title implies, is there a way to pass url parameters to a Django wizard?

For example, in a normal view you can use the *some_parameter* value of the urlpattern:

```
r'^blah/(?P<some_parameter>\d{8})/$ 
```

Is it possible to do the same when there is a wizard at the specified address? Perhaps add it to the initial data dictionary for each form?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:30:27.230

If this view is based on regular Django class-based views it should take any URL arguments you pass to it, and make it accessible to its methods under `self.args` and `self.kwargs`.

See [example for ListView in Django docs](https://docs.djangoproject.com/en/1.4/topics/class-based-views/#dynamic-filtering). In your case you'd see the argument in `self.kwargs['some_parameter']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:30:42.917

Many of the generic class based views offer this functionality probably the most extensible one to capture any value that you could use would be TemplateView(). Sub-class TemplateView() and it will give you access to a context object name called params. It will be populated with variables from the url that invokes TemplateView() which it parses any variable parameters you give it.

The above answer is the most correct answer for a single model based list.

# java - 格式化 hql 查询

> ID：10782216
> 
> 赞同：1
> 
> 时间：2012-05-28T09:22:54.080
> 
> 标签：java, hql

#我怀疑 Product 表中的 partId 可以为 null ，所以如果 partId 为 null 我看不到产品。如果我的产品表有 11 个条目，并且 2 个条目的 partId 为 null ，我只能看到 9 个条目

```
 String hql = "from " + Product.class.getName() + " bs, "
                + Part.class.getName() + " dm, "
                          + Manufacturer.class.getName() + " m where "
                          + " m.id = bs.manufacturerId and dm.id = bs.partId ";
======================================== 
```

输出必须像这样 productName | 零件名称 | 制造商名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:35:28.813

你需要做左连接而不是内连接。但这只有在您的实体关联在一起而不是包含彼此的 ID 时才有可能。

事实上，使用 HQL 是完全不可能的。

根据您的查询，您可能应该在 Product 和 Manufacturer 之间有一个 ManyToOne，在 Product 和 Part 之间有一个 ManyToOne。

此外，如果您没有连接类名并且使用正确的别名，您的查询将更具可读性：

```
String hql = "from Product product, Part part, Manufacturer manufacturer"
             + " where manufacturer.id = product.manufacturerId"
             + " and part.id = product.partId"; 
```

一旦关联存在，查询应该只是

```
String hql = "select product.name, part.name, manufacturer.name"
             + " from Product product"
             + " left join product.part part"
             + " left join product.manufacturer manufacturer"; 
```

# objective-c - Objective-C 委托

> ID：10782217
> 
> 赞同：0
> 
> 时间：2012-05-28T09:22:54.393
> 
> 标签：objective-c, ios, sockets, gcdasyncsocket

我是 iOS 和 Objective-c 的新手，但我尝试使用[GCDAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket) 我正在使用它来联系整个应用程序的 TCP/IP 服务器，在每个视图控制器中我想开始从/到服务器发送和接收，所以每次我分配 cocaSocket 的新实例，并像我新客户端一样发送到服务器。

那么我如何确保 cocaSocket 的一个实例可以应用于整个应用程序。

感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:59:52.707

好吧，您可以在 AppDelegate 中创建 Socket 并将其存储在属性中。

```
 // pseudo code - did not check the documentation how to actually create such a beast
 self.socket = [[GCDAsyncSocket alloc] init]; 
```

然后在其他类中，您可以通过以下方式访问应用程序委托

```
(myAppDelegate *) [[[UIApplication sharedApplication] delegate] socket]; 
```

我认为您在这里不需要单身人士。

# javascript - 有没有办法覆盖 Google Directions 服务缩放值？

> ID：10782218
> 
> 赞同：7
> 
> 时间：2012-05-28T09:22:59.743
> 
> 标签：javascript, google-maps-api-3, map-directions

我正在使用下面的代码来获取两点之间的路线：

```
directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
    }
} 
```

它工作正常，但我不想在绘制路线时更改我的地图位置和缩放级别。因此，当我使用不同的纬度和经度值调用上面的代码时，我希望保持我的地图位置和缩放级别。任何的想法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-28T13:23:49.597

创建`DirectionsRenderer`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRenderer)时，您可以将`DirectionsRendererOptions`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions)对象传递给构造函数，或者`DirectionsRenderer.setOptions`如果您想在创建后的某个时间更改选项，则可以调用该方法。

您可以使用对象的`preserveViewport`属性`DirectionsRendererOptions`来控制渲染器与地图的交互方式。设置`preserveViewport`为`true`将保持地图显示不变：

```
directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setOptions({ preserveViewport: true });
        directionsDisplay.setDirections(response);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T02:46:43.020

这使得错误停止显示，但路线仍然没有画好，看起来有一些数据丢失：

```
directionsDisplay.setOptions({ preserveViewport: true });
directionsDisplay.setDirections(response); 
```

# c# - 如何在 MVC 中的局部视图上返回 json？

> ID：10782220
> 
> 赞同：6
> 
> 时间：2012-05-28T09:23:06.453
> 
> 标签：c#, asp.net-mvc, json, asp.net-mvc-3, jsonresult

我有以下代码：

```
[HttpPost]
public JsonResult Index2(FormCollection fc)
{
    var goalcardWithPlannedDate = repository.GetUserGoalCardWithPlannedDate();
    return Json(goalcardWithPlannedDate.Select(x => new GoalCardViewModel(x)));
} 
```

但是我想在局部视图上使用它，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:35:31.960

如果我正确理解您的需求，您可以尝试以下操作

```
public JsonResult Index2(FormCollection fc)
{
    var goalcardWithPlannedDate = repository.GetUserGoalCardWithPlannedDate();
    return Json(goalcardWithPlannedDate.Select(x => new GoalCardViewModel(x)), "text/html", JsonRequestBehavior.AllowGet);
} 
```

设置 c 内容类型很重要，因为如果您使用`Html.RenderAction`. 这不是一个好的解决方案，但它在某些情况下有效。

相反，您也可以尝试更好的解决方案：

```
var scriptSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();
var jsonString = scriptSerializer.Serialize(goalcardWithPlannedDate.Select(x => new GoalCardViewModel(x))); 
```

然后你可以用字符串表示做任何你想做的事情。它实际上`JsonResult`是在它里面做的。顺便说一句，您可以在这里使用任何 json 序列化程序，取得同样的成功。

如果你想在客户端访问它。您无需更改代码。如果使用 jQuery：

```
$.post('<%= Url.Action("Index2") %>', { /* your data */ }, function(json) { /* actions with json */ }, 'json') 
```

如果你想将它传递给你的视图模型，那么：

```
[HttpPost]
public ActionResult Index2(FormCollection fc)
{
    var goalcardWithPlannedDate = repository.GetUserGoalCardWithPlannedDate();
    return PartialView(new MyModel { Data = goalcardWithPlannedDate.Select(x => new GoalCardViewModel(x)) });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:40:47.667

您还可以返回部分视图而不是 Json。

```
[HttpPost]
public ActionResult Index2(FormCollection fc)
{
   var goalcardWithPlannedDate = repository.GetUserGoalCardWithPlannedDate();
   return PartialView(goalcardWithPlannedDate.Select(x => new GoalCardViewModel(x)));
} 
```

# javascript - Firefox 和 Chrome 有什么区别？

> ID：10782226
> 
> 赞同：0
> 
> 时间：2012-05-28T09:23:48.417
> 
> 标签：javascript, browser

我希望它可以工作，但它只能在 Chrome、firefox 和 IE 上工作，它什么都不提醒，这是我的代码：

```
 var name;
function say() {
    alert(name);
}
function execute(someFunction, value) {
    name = value;
    someFunction;
}
execute(say(), "Hello"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:25:08.697

代码显然是错误的：

```
execute(say(), "Hello"); 
```

这会将*返回值*传递给`say()`to `execute`。但是，您想传递*函数*，因此`execute(say, "Hello");`在该函数中使用 and`someFunction()`来执行它。

* * *

尽管它可能/希望不再重要，但代码*确实*在 Firefox 中工作 - 它会发出警报`undefined`，因为它`say()`是在运行之前`execute()`执行的。同样的事情发生在 Chrome - 然而，它使用一个空的警报框而不是显示字符串`undefined`，因为显然 chrome（或至少它的开发者控制台）有一个全局变量 ?name? 默认定义为空字符串。

# android - 列表视图中一个角的圆形背景

> ID：10782227
> 
> 赞同：1
> 
> 时间：2012-05-28T09:24:02.413
> 
> 标签：android, listview

在一个 Android 应用程序中，我有一个列表视图，其中背景仅在一个角上圆角。

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
>
<stroke
    android:width="0dip"
    android:color="@color/content_screen_scroll_view_border"
    />
<padding
    android:left="0dip"
    android:top="@dimen/content_screen_scroll_view_border"             
    android:right="0dip" 
    android:bottom="@dimen/content_screen_scroll_view_border"
    />
<corners
    android:bottomRightRadius="20dip"
    />
<gradient
    android:angle="270"
    android:startColor="@color/listview_selected_item_start"
    android:endColor="@color/listview_selected_item_end"
    android:type="linear"
    /> 
```

当我上下翻页然后选择底部条目时，所选条目超出圆角。我尝试了各种解决方案，但没有找到一种似乎只适用于一个圆角的解决方案。

![在此处输入图像描述](../Images/92fc2f6c69d20fba26bad40b69033956.png)

所以，我使用了我找到的以下代码（不记得在哪里）：

```
package org.pskink.roundlist;

import android.app.Activity;
import android.graphics.Canvas;
import android.graphics.ColorFilter;
import android.graphics.Paint;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.drawable.Drawable;
import android.graphics.drawable.GradientDrawable;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class RoundListTest extends Activity {
    private ListView mList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mList = (ListView) findViewById(R.id.list);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1);
        adapter.add("One");
        adapter.add("Two");
        adapter.add("Three");
        adapter.add("Four");
        adapter.add("Five");
        adapter.add("Six");
        adapter.add("Seven");
        adapter.add("Eight");
        adapter.add("Nine");
        adapter.add("Ten");
        adapter.add("Eleven");
        adapter.add("Twelve");
        mList.setAdapter(adapter);
        mList.setSelector(new Selector(mList));
        mList.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

        GradientDrawable gd = new GradientDrawable();
        gd.setColor(0xffaaaaaa);
        gd.setCornerRadii(new float[]{0,0,0,0,0,0,20,20});
        mList.setBackgroundDrawable(gd);
    }

    class Selector extends Drawable {
        private static final String TAG = "Selector";
        private Paint mPaint;
        private AdapterView mList;
        private RectF mRectF;

        public Selector(AdapterView list) {
            mList = list;
            mPaint = new Paint();
            mPaint.setColor(0x80ff8000);
            mRectF = new RectF();
        }

        @Override
        public void draw(Canvas canvas) {
            Rect b = getBounds();
            int position = mList.getSelectedItemPosition();

            canvas.save();
            canvas.clipRect(b.left, b.top, b.right, (b.bottom + b.top) / 2);
            drawHalf(canvas, b, position == 0);
            canvas.restore();
            canvas.save();
            canvas.clipRect(b.left, (b.bottom + b.top) / 2, b.right, b.bottom);
            drawHalf(canvas, b, position == mList.getAdapter().getCount() - 1 && b.bottom == mList.getHeight());
            canvas.restore();
            Log.d(TAG, "draw " + b);
        }

        private void drawHalf(Canvas canvas, Rect b ,boolean round) {
            if (round) {
                mRectF.set(b);
                canvas.drawRoundRect(mRectF, 20, 20, mPaint);
            } else {
                canvas.drawRect(b, mPaint);
            }
        }

        @Override
        public int getOpacity() {
            return 0;
        }

        @Override
        public void setAlpha(int alpha) {
        }

        @Override
        public void setColorFilter(ColorFilter cf) {
        }
    }
}

package org.pskink.roundlist;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Path;
import android.graphics.Path.Direction;
import android.graphics.RectF;
import android.graphics.drawable.GradientDrawable;
import android.graphics.drawable.GradientDrawable.Orientation;
import android.graphics.drawable.StateListDrawable;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.ListView;

public class RoundedRectListView extends ListView {

    private static final float RADIUS = 16;
    private Path mClip;

    public RoundedRectListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    private void init() {
        GradientDrawable gd = new GradientDrawable();
        gd.setCornerRadius(RADIUS);
        gd.setColor(0xff208020);
        setBackgroundDrawable(gd);
        setCacheColorHint(0);
        setVerticalFadingEdgeEnabled(false);

        StateListDrawable sld = new StateListDrawable();
        sld.addState(
                PRESSED_ENABLED_STATE_SET,
                new GradientDrawable(Orientation.LEFT_RIGHT, new int[] {0xffa58cf5, 0xffa13f99}));
        sld.addState(
                EMPTY_STATE_SET,
                new GradientDrawable(Orientation.LEFT_RIGHT, new int[] {0xff058cf5, 0xff013f99}));
        setSelector(sld);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        Log.d("onSizeChanged", "sizes" + w + " , " + h + " , " + oldw + " , " + oldh + " , ");
        mClip = new Path();
        RectF rect = new RectF(0, 0, w, h);
        mClip.addRoundRect(rect, RADIUS, RADIUS, Direction.CW);
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {
        Log.d("dispatchDraw","");
        canvas.save();
        canvas.clipPath(mClip);
        super.dispatchDraw(canvas);
        canvas.restore();
    }
} 
```

并使用 RoundedRectListView 作为布局中列表视图的对象：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="8dip"
>
    <org.pskink.roundlist.RoundedRectListView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/list"
    />
</LinearLayout> 
```

然后发生的事情是，除了左下角之外，它会绕过所有角落。我似乎无法弄清楚如何让它只圆左下角的那个。

# python - Python - 尝试打破 urllib2.urlopen 的语句

> ID：10782230
> 
> 赞同：0
> 
> 时间：2012-05-28T09:24:05.080
> 
> 标签：python, proxy, urllib2

我正在用 Python 编写一个程序，该程序必须发出 http 请求，同时被迫进行直接连接以避免代理。这是我使用的成功管理此代码的代码：

```
print "INFO: Testing API..."
proxy = urllib2.ProxyHandler({}) 
opener = urllib2.build_opener(proxy)
urllib2.install_opener(opener)
req = urllib2.urlopen('http://maps.googleapis.com/maps/api/geocode/json?address=blahblah&sensor=true')
returneddata = json.loads(req.read()) 
```

然后我想在'req'周围添加一个try语句，以处理用户未连接到互联网的情况，我尝试过这样的情况：

```
try:
   req = urllib2.urlopen('http://maps.googleapis.com/maps/api/geocode/json?address=blahblah&sensor=true')
except urllib2.URLError:
   print "Unable to connect etc etc" 
```

问题在于，这样做总是会引发异常，即使地址完全可以访问并且代码在没有它的情况下也能正常工作。

有任何想法吗？干杯。

# sql-server - SQL server：这个sql语句是什么意思

> ID：10782233
> 
> 赞同：2
> 
> 时间：2012-05-28T09:24:26.657
> 
> 标签：sql-server

我一直在使用 vs 2010 方案比较工具比较数据库，它产生了一些不清楚的东西。例如，在脚本的末尾有以下语句：

```
ALTER TABLE [dbo].[My_table] WITH CHECK CHECK CONSTRAINT [FK_FOREIGN_ID]; 
```

谁能解释这意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:26:33.220

这意味着在添加现有数据时应根据约束检查现有数据。

未能`CHECK CHECK`使您的约束[不受信任](http://www.mssqltips.com/sqlservertip/1539/avoid-untrusted-constraints-in-sql-server/)，并且查询优化器无法使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:31:01.863

这告诉 SQL Server 针对新行验证约束。反例将`WITH NOCHECK`用于临时禁用对新行的验证检查。

[ALTER TABLE (Transact-SQL) (WITH CHECK | WITH NOCHECK)](http://msdn.microsoft.com/en-us/library/ms190273.aspx)

# performance - 在 jvisualvm 中获取方法执行时间的细分

> ID：10782234
> 
> 赞同：3
> 
> 时间：2012-05-28T09:24:27.163
> 
> 标签：performance, profiling, jvisualvm

我正在使用 jvisualvm 分析 Web 应用程序。我可以看到各种方法需要多长时间，例如 methodA 需要 5 秒......但是，我看不到双击这个方法来查看 5 秒的去向。可以这么说，我可以“向下钻取”。

我如何在 jvisualvm 中实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T23:21:22.577

如果您在分析 CPU 使用情况后点击 Sampler 或 Profiler 窗口中的“快照”按钮，它会显示一个调用树，其中包含每个方法的 CPU 时间摘要以及自身时间。

# regex - 正则表达式查找和提取符合过滤条件的行

> ID：10782237
> 
> 赞同：2
> 
> 时间：2012-05-28T09:24:48.497
> 
> 标签：regex, notepad++

我正在使用 Notepad++ 并尝试在本地处理日志文件并尝试使用正则表达式函数从包含以下内容的文件中提取任何数据：-1 或？我对 reg 表达式不是很好，但认为这样的事情可以解决问题，但无济于事：

```
 ^.*\b(-1|?)\b.*$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:29:53.207

你可以在这里阅读：

[你如何使用 Notepad++ 正则表达式管道 | 对于超过一个字符的字符串？](https://stackoverflow.com/questions/820740/how-do-you-use-notepad-regex-pipe-for-strings-longer-than-one-character)

Notepad++ 不支持管道 '|' 低于 6.1.1 版本的正则表达式中的字符。更新您的 notepad++ 版本并使用正则表达式：

```
^.*(\-1|[\?]).*$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T09:36:48.937

你需要逃避吗？字符使用 . 我会为你分解它，以便它帮助你学习正则表达式。

```
^(.*(?:-1|\?).*)$ 
```

*   `(?:-1|\?)`- 匹配的非捕获组？或 -1
*   `(.*(?:-1|\?).*)`- 包裹在一个匹配任何东西的捕获组中然后？或 -1 然后是任何东西

使用行边界，这将导致捕获的行列表包含 -1 或 ?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T09:30:56.930

试试这个正则表达式：

```
(.*-1.*|.*\?.*) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T09:32:59.253

首先，如果你想 find `?`，你应该转义它`\?` 其次，我不知道 Notepad++ 但通常`-`不被认为是一个单词符号，因此 firs`\b`不能作为“单词的开头”，应该被删除，同样is for`?`既不是单词的开头也不是单词的结尾，因此对于它来说两者`\b`都是无用的。

# python - Apple 会在 IOS App Store 中允许使用 Python 中的 Kivi 框架吗？

> ID：10782238
> 
> 赞同：2
> 
> 时间：2012-05-28T09:24:51.640
> 
> 标签：python, ios, iphone

据说这里[http://kivy.org/docs/gettingstarted/intro.html?highlight=iphone](http://kivy.org/docs/gettingstarted/intro.html?highlight=iphone)

> 在您的计算机上，您可以创建在以下设备上运行的应用程序：
> 
> 台式电脑：MacOSX、Linux、Windows。
> 
> iOS 设备：iPad、iPhone
> 
> Android 设备：平板电脑、手机。和任何其他触摸启用
> 
> 支持 TUIO 的专业/自制设备。

但苹果会允许使用它制作的 ios 应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:31:21.313

他们的常见问题页面 ( [http://kivy.org/docs/guide/packaging-ios.html#faq](http://kivy.org/docs/guide/packaging-ios.html#faq) ) 声明这些应用程序将被接受。他们以[http://itunes.apple.com/us/app/defletouch/id505729681](http://itunes.apple.com/us/app/deflectouch/id505729681)为例，使用 kivy 构建。

# java - 使用 SOAP 上传文件

> ID：10782239
> 
> 赞同：-1
> 
> 时间：2012-05-28T09:24:58.553
> 
> 标签：java, google-app-engine, soap, web, soap-client

我正在尝试创建一个允许用户上传文件的 Web 应用程序。该文件将被加密并通过 SOAP 传输到 Web 服务。Web 服务将执行简单的操作，例如“storeFileToCloud(byte[])”和“downloadFile(string)”。

到目前为止，我使用 Google App Engine 创建了 Web 服务，但是，我不确定如何使用 SOAP 对文件进行编码。我还为用户创建了上传他/她文件的表单，但我一直坚持在此之后该怎么做。任何提示或指南都将非常有帮助。

我使用的工具包括 Java、Google App Engine 和 Eclipse Indigo。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:41:50.010

JAX-RPC 使用 xsd:base64Binary。请参阅[JAX-RPC 规范，第 10 章](http://java.sun.com/developer/Books/j2ee/jwsa/JWSA_CH10.pdf)。你可能比复制它们做得更糟。请注意，数据的大小将扩大约 33%。

# java - 添加 ImageButton 后，ExpandableListActivity onChildClick 不起作用

> ID：10782241
> 
> 赞同：0
> 
> 时间：2012-05-28T09:25:01.617
> 
> 标签：java, android, onclicklistener

我有带有自定义**CursorTreeAdapter的****ExpandableListActivity**。一切正常，直到我在 ChildView 中添加**ImageButton 。**添加后**onChildClick**停止工作。**ImageButton 的OnClick**操作工作正常。当我删除/隐藏图像按钮 onChildClick 开始再次起作用。有没有将这两者结合起来的选项？

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:44:48.860

将可聚焦选项设置为 false **button.setFocusable(false)**起到了作用，类似于 Samir 的建议。******

# zend-framework - Zend 框架和fuelphp

> ID：10782244
> 
> 赞同：0
> 
> 时间：2012-05-28T09:25:07.577
> 
> 标签：zend-framework, fuelphp

我想知道是否可以在fuelphp 中使用zend 1.11 中的zend 框架库？Fuel 看起来不错，我开始研究它，因为我相信它是任何 CI 开发人员的下一个合乎逻辑的步骤。

有没有使用 zend 库和燃料的网站或操作指南？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:00:39.960

这实际上取决于您要使用 Zend Framework 的哪些部分。有些部分，例如 Zend_View 被绑定到框架的 MVC 部分，但是像 Zend_Pdf 或 Zend_Service_* 这样的组件只有很少的依赖关系，并且应该在其他框架中也能正常工作。

您应该查看[参考手册，了解您尝试使用的组件还需要哪些其他组件](http://framework.zend.com/manual/en/requirements.introduction.html#requirements.dependencies)。然后将它们放在库文件夹中。或者，如果您不介意随身携带自重的重量，只需将整个 Zend Framework 放在一个文件夹中即可。

我一直在独立使用 ZF-components，发现将它添加到 include_path 中很有用，就像使用 ZF 作为 MVC 框架时一样，因为某些 ZF 类是动态实例化的，即不是通过`require_once`，并且没有包含 Zend/ 的文件夹位于 include_path 中。

最后，您必须将文件夹添加到自动加载器，这应该很简单：

```
Autoloader::add_namespace('Zend', __DIR__.'/path/to/Zend/library'); 
```

# c# - 查明进程是否正在使用 Internet 连接

> ID：10782253
> 
> 赞同：0
> 
> 时间：2012-05-28T09:26:13.410
> 
> 标签：c#

是否可以通过 C# 找出特定应用程序是否正在使用 Internet 连接？有这方面的图书馆吗？

基本上一些非常简单的东西，比wireshark所做的更简单！给定一个进程 ID，如果正在使用 Internet 连接，我会返回，即下载或上传的类型以及速率。

有这样的东西存在吗？我有可能把一些东西放在一起来实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:28:17.573

您可以`netstat -ob`从命令提示符运行。

# javascript - 如何计算自定义属性具有一定值的所有元素？

> ID：10782254
> 
> 赞同：1
> 
> 时间：2012-05-28T09:26:31.037
> 
> 标签：javascript, jquery

我怎样才能确定“是”`div`的`td`地方的总量？`data-something`

```
<td id='tableData'>
  <div class="test" data-something="yes"></div>
  <div class="test" data-something="no"></div>
  <div class="test" data-something="yes"></div>
</td> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:27:07.937

它可以通过以下方式完成：

```
var len = $("#tableData div[data-something='yes']").length; 
```

或者：

```
var len = $("#tableData div").filter(function() {
    return $(this).data("something") == "yes";
}).length; 
```

**演示：http:** [//jsfiddle.net/7c4cA/](http://jsfiddle.net/7c4cA/)

# jasmine - 如何检查 jasmine.js 中的值是整数还是字符串？

> ID：10782259
> 
> 赞同：27
> 
> 时间：2012-05-28T09:26:46.717
> 
> 标签：jasmine

我正在使用 BackboneJS 在 Web 应用程序中使用 Jasmine 编写单元测试。
有很多示例向您展示如何以这种方式检查值：

```
 it("should set the id property to default value", function()
        {
            expect(this.task.get("id")).toEqual(null);
        }); 
```

但是我找不到任何使用 Jasmine 检查属性是否是 Javascript 中的数字或字符串的示例。

做这样的检查合适吗？
如果是，那么制作它的正确方法是什么？

示例：我想检查 是否`id`是一个大于 0 的整数。如何在 Jasmine 中制作它？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2014-01-21T21:21:01.167

对于后代，这里提出的问题之一是测试一个值是否是一个数字。来自[茉莉花文档](http://jasmine.github.io/2.0/introduction.html#section-Matching_Anything_with_<code>jasmine.any</code>)：

```
expect(12).toEqual(jasmine.any(Number)); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T09:45:14.663

我会做这样的事情：

```
 describe("when instantiated", function() 
    {
        it("should exhibit attributes", function () 
        {  
            .....
            expect(this.task.get("id")).toMatch(/\d{1,}/);
            .....
        });
    }); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-29T02:04:03.837

老实说，我不知道正确的方法是什么，但我会写这样的东西：

```
 it("should set the id property to default value", function () {
        var id = this.task.get("id");
        expect(typeof id).toEqual('number');
        expect(id).toBeGreaterThan(0);
 }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-28T17:56:26.570

```
expect( this.task.get("id") ).toBeGreaterThan( 0 ); 
```

如果我们考虑到：

```
expect( 1 ).toBeGreaterThan( 0 );   // => true
expect( "1" ).toBeGreaterThan( 0 ); // => true
expect( "a" ).toBeGreaterThan( 0 ); // => false 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-07T19:36:28.167

你可以试试：

```
it('should be integer', function()
{
    var id = this.task.get("id");

    expect(id).toEqual(jasmine.any(Number));
    expect(id).toBeGreaterThan(0);
    expect(Math.trunc(id)).toEqual(id);
}); 
```

如果你有一个不是整数的数字，截断它应该会导致一个不同的数字，这将导致相应的测试失败。

如果你不支持 ES6，你可以使用 floor 代替。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-17T16:58:42.007

我用[underscorejs](http://underscorejs.org/)来检查这种事情：

```
it('should be a number', function() {
  expect(_.isNumber(this.task.get('id'))).toBeTruthy();
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-08T16:50:48.063

这将确保结果是一个数字。

```
it("expect the result to be a number", () => {
    expect(5).not.toBeNaN;
}); 
```

虽然这将确保结果不是数字

```
it("expect the result not to be a number", () => {
    expect('five').toBeNaN;
}); 
```

这确保数字大于或等于零

```
it("expect the result to be >=0", () => {
    expect(5).toBeGreaterThanOrEqual(0)
}); 
```

# php - 从 mysql 语句到 PDO

> ID：10782262
> 
> 赞同：-3
> 
> 时间：2012-05-28T09:26:55.337
> 
> 标签：php, mysql, sql, database, pdo

我需要重写我所有的代码。上次有人告诉我，我需要在 mysqli 或 PDO 之间进行选择。现在我选择了 PDO——但我必须说我什么都不懂。 .

例如我有这段代码：

```
//get the email
$email = mysql_real_escape_string($_POST['email']);

//mysql query to select field email if it's equal to the email that we check '
$result = mysql_fetch_array(mysql_query("SELECT email FROM business_members WHERE email = '".$email."'"));

//if number of rows fields is bigger them 0 that means it's NOT available '
if($result['email'] == $email){
//and we send 0 to the ajax request
echo "0";
}else{
//else if it's not bigger then 0, then it's available '
//and we send 1 to the ajax request
echo "1";
} 
```

是否有任何网站可以帮助我更好地理解，我曾尝试在 php-net 上阅读，但它非常令人困惑..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:42:45.347

PDO 最好的地方在于它是面向对象的。因此，保持这种形式并充分利用它，我们可以创建一个 PDO CRUD 类来处理所有数据库查询等。

这是一个示例，可以添加自定义方法/功能以增强功能等：

```
<?php 
Class PDO_CRUD{
    private $db;

    function __construct($host,$dbname,$user,$pass){
        $this->dbhost = $host;
        $this->dbname = $dbname;
        $this->dbuser = $user;
        $this->dbpass = $pass;
    }

    private function connect(){
        if (!$this->db instanceof PDO){
            $this->db = new PDO('mysql:dbname='.$this->dbname.';host='.$this->dbhost, $this->dbuser, $this->dbpass);
            $this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        }
    }

    /*Raw Select*/
    public function rawQuery($sql){
        $this->connect();
        return $this->db->query($sql)->fetchAll(PDO::FETCH_ASSOC);
    }

    public function get($table,$fieldname=null, $id=null){
        $this->connect();
        $sql = "SELECT * FROM $table WHERE $fieldname = :id";
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':id', $id, PDO::PARAM_STR);
        $statement->execute();
        return $statement->fetchAll(PDO::FETCH_ASSOC);
    }

    /*Insert*/
    public function put($table,$values){
        $this->connect();
        $fieldnames = array_keys($values[0]);
        $sql = "INSERT INTO $table ";
        $fields = '('.implode(' ,', $fieldnames).')';
        $bound = '(:'.implode(', :', $fieldnames).')';
        $sql .= $fields.' VALUES '.$bound;

        $statement = $this->db->prepare($sql);
        foreach($values as $vals){
            $statement->execute($vals);
        }
    }

    /*Update*/
    public function update($table,$fieldname, $value, $pk, $id){
        $this->connect();
        $sql = "UPDATE $table SET $fieldname = :value WHERE $pk = :id";
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':id', $id, PDO::PARAM_STR);
        $statement->bindParam(':value', $value, PDO::PARAM_STR);
        $statement->execute();
    }

    /*Update Hits*/
    public function add_hit($table,$id){
        $this->connect();
        $sql = "UPDATE $table SET hits = hits + 1 WHERE url = :id";
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':id', $id, PDO::PARAM_STR);
        $statement->execute();
    }

    /*Delete*/
    public function delete($table,$id){
        $this->connect();
        $sql = "DELETE FROM $table WHERE url = :id";
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':id', $id, PDO::PARAM_STR);
        $statement->execute();
    }
}

//Then we have a nice way to access all our querys from one class.
//ini the model class
$model = new PDO_CRUD('localhost','yourDB','User','Password');

$insert = array(array('id'=>NULL,'somecol'=>'someval'));
$model->put('someTable',$insert);

//multiple inserts
$insert = array(array('id'=>NULL,'somecol'=>'someval123'),
                array('id'=>NULL,'somecol'=>'someval1234'),
                array('id'=>NULL,'somecol'=>'someval12345'));
$model->put('someTable',$insert);

//or delete a row
$model->delete('someTable',1);

//or a raw query
$model->rawQuery('DELETE FROM someTable');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:41:26.407

包含 PDO 函数的 PHP 文件：

```
<?php
class example {
    public function __construct() {
        $this->db = new PDO('mysql:host=localhost;dbname=testdb;', 'user', 'password');
    }

    public function checkMail($email) {
        // This is the prepared SQL statement
        // The values which you want to filter for in your WHERE clause, are replaced by ?
        $sql = "SELECT
                    email
                FROM
                    business_members
                WHERE
                    email = ?";

        // Prepare the statement
        $stmt = $this->db->prepare($sql);

        // Bind a value to a question mark (the 1 means, the position of occurence of the question mark)
        $stmt->bindParam(1, $email);

        // Query the db, output debug info if query failed
        if(!$stmt->execute()) {
            // Only for debugging, don't use in production
            var_dump($stmt->errorInfo());
        }

        // Load result to var
        $result = $stmt->fetchAll(PDO::FETCH_ASSOC);

        // Check amount of records
        if(count($result) > 0) {
            // Records found
            return 1;
        } else {
            // No records found
            return 0;
        }
    }
}
?> 
```

主文件：

```
<?php
include 'includes/pdo.include.php';

$example = new example;

echo $example->checkMail($_POST['email']);
?> 
```

# c# - WPF 中的多个绑定

> ID：10782266
> 
> 赞同：0
> 
> 时间：2012-05-28T09:27:18.447
> 
> 标签：c#, .net, wpf, data-binding

是否可以在 wpf 控件的 xaml 中有多个项目源绑定。

目前我正在使用 mvvm 模式并且有一个绑定到一种对象类型的项目绑定。

```
ItemSource="{Binding ProcessModel}" 
```

这然后有一个 ItemTemplate

```
ItemTemplate="{DynamicResource PMDataTemplete}" 
```

这目前很好，因为我只使用一种类型的对象。我想扩展它，以便我可以拥有一种或第二种不同类型的对象，但它不需要能够同时绑定到两者。

我想要实现的情况是，可以根据用户选择的内容绑定一种对象类型，并且绑定将再次起作用，如果用户采用不同的路线，另一种类型的对象将显示在同一个控件上。

因此，几乎是基于 itemsource 的对象类型的 case 语句的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:32:02.047

编写自己的[ItemTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplateselector.aspx)（更灵活，但更复杂）或为需要在 ItemsControl 中呈现的类型定义数据模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:33:21.633

有两种选择：

1.  您可以为不同类型定义数据模板。
2.  您可以像 Dennis 提到的那样编写 DataTemplateSelector。

# xtk - XTK 是为多渲染器查看完成的吗？

> ID：10782269
> 
> 赞同：0
> 
> 时间：2012-05-28T09:27:22.740
> 
> 标签：xtk

第 07 课倾向于给我一个想法，即我们可以在许多渲染器中加载一个对象，以便从不同的视图中查看它。但是我有很多问题：属性dirty是对象及其属性的属性，而不是渲染器的功能：所以当第一个渲染器完成时，他将所有属性都设置为true，下面的渲染器什么都没有去做。

例如，如果我的对象（根）是具有 2 个子对象（child1，child2）的空对象，其中不包含空对象： - 第一个渲染器工作正常（即它添加根、child1 和 child2），但其他渲染器只添加空对象对象，因为 root.dirty==false（参见 renderer3D.hs，第 591 行） - 第一个渲染器计算适合场景的边界框，另一个不计算，因为 root/child1/child2.points.dirty==false（参见 renderer3D .js 在第 793 行）

所以我的问题是：**是否有可能拥有 1 个复杂对象并在不同的渲染器中管理它（而每个对象都有一个取决于渲染器的属性：脏）？**或者我应该复制它并链接事件，以便在其他渲染中报告 1 个渲染中的转换？还是我应该做更多的修改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T23:41:05.050

我刚刚创建了一个 jsfiddle 来创建一个你说的场景

[http://jsfiddle.net/haehn/ZdzeR/](http://jsfiddle.net/haehn/ZdzeR/)

一切正常：

场景是一个 X.object，它包含一个网格和一个立方体。将它添加到所有 3 个渲染器可以正常工作并显示两个对象。

# wix - wix：将 ARP 中的联系信息显示为超链接

> ID：10782272
> 
> 赞同：0
> 
> 时间：2012-05-28T09:27:35.757
> 
> 标签：wix, nsis

我的应用程序需要将 ARP 条目中的联系方式显示为超链接... 谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T18:48:35.613

设置 URLInfoAbout 或[此处](http://nsis.sourceforge.net/Add_uninstall_information_to_Add/Remove_Programs#Optional_values)或[此处](http://windowssucks.wordpress.com/win-registry-uninstall-values/)列出的其他字符串之一（MSDN 在此处列出了其中的一些，[但](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372105%28v=vs.85%29.aspx)列表不完整，并将 MSI 特定的东西混在一起）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:15:02.043

设置 wix 属性 ARPURLINFOABOUT：

```
<Property Id="ARPURLINFOABOUT" Value="www.company.com/product" /> 
```

以下是一些其他[WiX ARP 属性](http://blogs.technet.com/b/alexshev/archive/2008/02/09/from-msi-to-wix-part-2.aspx)，您可以使用它们来配置添加/删除程序中显示的内容。

# c# - 在 OnItemDataBound 期间获取中继器中的项目数

> ID：10782277
> 
> 赞同：4
> 
> 时间：2012-05-28T09:27:41.567
> 
> 标签：c#, asp.net, .net, collections, web-controls

我试图在处理`OnItemDataBound`事件时获取转发器中的项目数。我要实现的目标非常简单；我试图在中继器中的**最后一项上****隐藏某个标签。**目前我正在连接and ，但是在 期间，索引和计数一起增加。**`ItemIndex``Items.Count``OnItemDataBound`**

 **这是我到目前为止所得到的：

```
Label myLabel = e.Item.FindControl<Label>("MyLabel");
if (myLabel != null)
{
    // as the item index is zero, I'll need to check against the collection minus 1?
    bool isLastItem = e.item.ItemIndex < (((Repeater)sender).Items.Count - 1);
    myLabel.Visible = !isLastItem;
} 
```

我知道我可以将它`DataSource`转换为绑定的数据项的集合，但是`OnItemDataBound`事件处理程序正在多个转发器中使用，所以我需要一些更通用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:35:29.363

您可以按照以下方式做一些事情，`Visible`默认情况下设置为 false：

```
if (e.Item.ItemIndex > 0)
{
     var previousItem = ((Repeater)sender).Items[e.Item.ItemIndex - 1];
     var previousLabel = previousItem.FindControl<Label>("MyLabel");
     if (previousLabel != null)
     {
         previousLabel.Visible = true;
     }
} 
```

我*不确定*这是否可行——在我看到你的代码之前我不知道你可以访问`repeater.Items`——但这似乎是合理的。**

# android - 控制用于 Android 缓存的 Google 地图

> ID：10782284
> 
> 赞同：1
> 
> 时间：2012-05-28T09:28:22.190
> 
> 标签：android, google-maps, caching

我有一个支持地图的应用程序，用户想要使用它的位置有时没有网络的可能性很高。有什么方法可以控制谷歌地图的离线缓存功能 - 所以我可以在用户仍然有网络的情况下预先进行缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:57:13.720

> 有什么方法可以控制谷歌地图的离线缓存功能 - 所以我可以在用户仍然有网络的情况下预先进行缓存？

不，对不起。首先，Android 的 Google Maps 插件几乎没有缓存，而且这些都不是 SDK 应用程序可以控制的。

# python - python列表排列

> ID：10782285
> 
> 赞同：-3
> 
> 时间：2012-05-28T09:28:38.330
> 
> 标签：python, list

> **可能重复：**
> [如何在 Python 中生成列表的所有排列](https://stackoverflow.com/questions/104420/how-to-generate-all-permutations-of-a-list-in-python)

我得到一个列表`[1,2,3]`，任务是创建该列表的所有可能排列。

预期输出：

```
[[1, 2, 3], [1, 3, 2], [2, 3, 1], [2, 1, 3], [3, 1, 2], [3, 2, 1]] 
```

我什至想不出从哪里开始。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:32:11.503

[itertools.permutations](http://docs.python.org/library/itertools.html#itertools.permutations)为你做这件事。

否则，一个简单的方法是递归查找排列：您连续选择输出的第一个元素，然后要求您的函数查找剩余元素的所有排列。

可以在[https://stackoverflow.com/a/104436/42973](https://stackoverflow.com/a/104436/42973)找到一个略有不同但类似的解决方案。它找到剩余（非第一个）元素的所有排列，然后在所有可能的位置连续插入第一个元素。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T12:29:39.673

这是一个基本的解决方案......这个想法是使用递归来遍历所有排列并拒绝无效的排列。

```
 def perm(list_to_perm,perm_l,items,out):
        if len(perm_l) == items:
            out +=[perm_l]
        else:
            for i in list_to_perm:
                if i not in perm_l:
                    perm(list_to_perm,perm_l +[i],items,out)

a = [1,2,3]
out = []
perm(a,[],len(a),out)
print out 
```

输出：

```
[[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]] 
```

# php - 从两个输入多个上传filephp

> ID：10782290
> 
> 赞同：0
> 
> 时间：2012-05-28T09:28:46.963
> 
> 标签：php, jquery, upload, multifile-uploader

我需要使用 jquery 和 php 上传一些文件（图像但没关系）。我找到了一个 jquery 插件插件来制作多个上传文件，[http://www.fyneworks.com/jquery/multiple-file-upload/](http://www.fyneworks.com/jquery/multiple-file-upload/)。所以我有这两个输入：

```
<script type="text/javascript" language="javascript">                  
      $(function(){                    
        $('#immagini').MultiFile({       
        list: '#lista-immagini'          
      });           
      });            
</script>     
<input type="file" name="immagini[]" id="immagini" accept="gif|jpg|tiff" maxlength="10" />  

<script type="text/javascript" language="javascript">                  
      $(function(){                    
        $('#plan').MultiFile({       
        list: '#lista-plan'          
      });           
      });            
</script>     
<input type="file" name="plan[]" id="plan" accept="gif|jpg|tiff" maxlength="10" /> 
```

从表单调用的 php 文件是：

```
$files = array();
$fdata = $_FILES['immagini'];

if(isset($_FILES['immagini']))
if(is_array($fdata['name']) && !empty($fdata['name'])){
        for($i=0;$i<count($fdata['name']);++$i){
            $files[]=array(
                'name'    =>$fdata['name'][$i],
                'tmp_name'=>$fdata['tmp_name'][$i],
                'type' => $fdata['type'][$i],
                'size' => $fdata['size'][$i],
                'error' => $fdata['error'][$i],
        );
        }

        foreach($files as $file){
            $tmpName = $file['tmp_name'];
            $fp = fopen($tmpName, 'r');
            $immagine = fread($fp, filesize($tmpName));
            $immagine = addslashes($immagine);
            $DB->query('INSERT INTO immagini(id_annuncio, immagine) values('.$_GET['id'].', "'.$immagine.'")');
            fclose($fp);
        }
}

    $files = array();
$fdata = $_FILES['plan'];

    if(isset($_FILES['plan']))
if(is_array($fdata['name']) && !empty($fdata['name'])){
        for($i=0;$i<count($fdata['name']);++$i){
            $files[]=array(
                'name'    =>$fdata['name'][$i],
                'tmp_name'=>$fdata['tmp_name'][$i],
                'type' => $fdata['type'][$i],
                'size' => $fdata['size'][$i],
                'error' => $fdata['error'][$i],
            );
        }
        foreach($files as $file){
            $tmpName = $file['tmp_name'];         
            $fp = fopen($tmpName, 'r');
            $immagine = fread($fp, filesize($tmpName));
            $immagine = addslashes($immagine);
            $DB->query('INSERT INTO planimetrie(id_annuncio, planimetria) values('.$_GET['id'].', "'.$immagine.'")');
            fclose($fp);
        }
} 
```

问题是，当我仅从一个输入上传文件时，另一个输入无论如何都会上传一个空文件。我能怎么做？

谢谢， 马蒂亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:50:50.540

以下代码对我来说很好，因此它可能与您在 for 语句中所做的事情有关：

```
<?
    if(isset($_FILES['immagini']))
    {
        foreach($_FILES['immagini']['name'] as $index => $name)
        {
            if($_FILES['immagini']['size'][$index] > 0)
            {
                echo '<br />' . $name;
            }
        }
    }

    if(isset($_FILES['plan']))
    {
        foreach($_FILES['plan']['name'] as $index => $name)
        {
            if($_FILES['plan']['size'][$index] > 0)
            {
                echo '<br />' . $name;
            }
        }
    }

?>
<form method="post" enctype="multipart/form-data">
    <input type="file" name="immagini[]" />
    <input type="file" name="immagini[]" />
    <input type="file" name="immagini[]" />
    <input type="file" name="plan[]" />
    <input type="file" name="plan[]" />
    <input type="file" name="plan[]" />
    <input type="submit" />
</form> 
```

然后，您只需在代码当前回显上传文件的名称的地方进行插入。

# javascript - 检测到提交时的警报文本

> ID：10782293
> 
> 赞同：0
> 
> 时间：2012-05-28T09:29:08.523
> 
> 标签：javascript, jquery, submit

在一个名为的函数`outputProducts`中，我向我的表添加了一个提交按钮：

```
$(addToCartCell).append("<input type='submit' id='addToCart' value='Add To Cart'>"); 
```

为了检查提交按钮是否被按下，我做了另一个功能：

```
function addToCart()
{
    $(#addToCart).submit(function() {
        alert('Submit Detected.');
    });
} 
```

但这不起作用，之前在函数中创建的表甚至没有出现，但是当我摆脱 addToCart 函数时它会出现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T09:30:47.057

您有语法错误，而不是`$(#addToCart)`您需要`$('#addToCart')`.

除此之外，您需要将`submit`事件绑定到**表单**，而不是提交按钮（您将绑定`click`到按钮，但由于您想在提交时做一些事情，将提交事件绑定到表单是要走的路）。

如果您没有表单，请使用，`type="button"`因为无论如何都没有要提交的内容并将`click`事件绑定到按钮。

如果您需要在按钮存在*之前*绑定事件，请使用委托。`#container`应该是一个已经存在的元素并且是按钮的父元素：

```
$('#container').on('click', '#addToCart', function() { ... }); 
```

而且由于您似乎有多个产品，请记住**ID 必须是唯一的**- 因此，如果您有多个按钮，请改用一个类并将选择器更改为`.addToCart`相应的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:34:04.413

您有语法错误。试试`$('#addToCart')`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T09:32:26.347

请尝试以下代码

```
function addToCart()
{
    $("#addToCart").live("submit", (function() {
        alert('Submit Detected.');
    });
} 
```

注意：我尝试过相同的方法，但由于您在运行时添加了元素，因此您需要将事件绑定到元素。

# windows-phone-7 - 循环选择器 WP7 的突出显示项

> ID：10782301
> 
> 赞同：0
> 
> 时间：2012-05-28T09:30:08.307
> 
> 标签：windows-phone-7

我想知道如何在window phone 7 上获取循环选择器工具包的突出显示项索引。我通过与数据源绑定来使用循环选择器。有谁能帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:14:29.457

此控件公开一个`SelectedItem`属性。将其绑定到绑定集合中具有相同数据类型的项目。

# visual-studio-2010 - Visual Studio 2010 中的 LDAP

> ID：10782303
> 
> 赞同：0
> 
> 时间：2012-05-28T09:30:25.933
> 
> 标签：visual-studio-2010, ldap

通过 Visual Studio 2010 使用 LDAP 服务器，我在这里的代码暗示了这个导入：

```
Imports System.DirectoryServices 
```

但是这个导入显然在 VS 10 中不存在。它没有给出任何错误，但它给了我一个警告，并且连接的其余代码也变得无效，因为它需要重新确认导入才能工作。有没有人曾经使用过这个并且可以确定如何启动和运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:00:32.903

如果您现在还没有弄清楚这一点，我认为您的意思是您收到“编译器错误”，因为引用不存在

我认为您需要将对 System.DirectoryServices DLL 的引用添加到您的项目中。

尝试在 Visual Studio 中将项目引用添加到位于 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.DirectoryServices.dll 中的 DLL

希望这可以帮助。

# actionscript-3 - AS3：精灵高速跟随路径

> ID：10782306
> 
> 赞同：0
> 
> 时间：2012-05-28T09:30:30.160
> 
> 标签：actionscript-3, sprite

首先对一些英语错误感到抱歉。葡萄牙语是我的第一语言（我来自巴西）

我试图在 AS3 中从头开始制作太空游戏，而移动飞船的方式就像在游戏 Air Traffic Chief 中一样。

我在某个时候成功了。但是，当船非常快时，它开始摇晃，并且不像我想要的那样非常光滑和干净。

这是我所做的：http: [//megaswf.com/s/2437744](http://megaswf.com/s/2437744)

由于代码非常大，所以我粘贴在 pastebin：pastebin.com/1YVZ23WX 我还写了一些英文文档。

这是我的第一场比赛，也是我在这里的第一篇文章。我真的希望你们能帮助我。

提前致谢。

编辑：由于代码非常大，我将在这里尝试澄清。

当用户 MouseDown 和 MouseMove 船舶时，每个坐标都被传递给一个数组。当用户 MouseUP 时，这个数组被传递给一个修复数组的函数。

例如：如果两个坐标之间的距离大于 5px，函数会在两个坐标的中间创建一个坐标。

如果我取消这个功能，问题就会被解决。但是如果用户移动鼠标非常慢，它仍然会发生。它还产生了一个我试图用该功能解决的问题。由于两个坐标的距离很大，当船到达一个坐标时，大部分线路路径消失。

我上传了一个没有修复数组功能的版本。[http://megaswf.com/s/2437775](http://megaswf.com/s/2437775)

我认为有两种方法可以解决这个问题

1- 尝试修复坐标数组中的噪声 2- 去掉在两点之间创建坐标的功能，尝试修复线路径消失的问题。

这是两个重要的功能：

这个函数移动船

```
 private function mover():void 
    {
        if (caminhoCoords[0]!=null) // caminhoCoords is the array that contain the path
        {

            var angulo:Number = Math.atan2(this.y - caminhoCoords[0][1], this.x - caminhoCoords[0][0]);
            this.rotation = angulo / (Math.PI / 180);
            this.x = this.x - velocidade * (Math.cos(angulo)); 
            this.y = this.y - velocidade * (Math.sin(angulo));

            var testex:Number = Math.abs(this.x - caminhoCoords[0][0]); //test to see the distance between the ship and the position in the array
            var testey:Number = Math.abs(this.y - caminhoCoords[0][1]);

            if (testey<=velocidade+2 && testex<=velocidade+2) // if is velocidade+2 close then go to the next coordnate
            {
                caminhoCoords.shift();
            }   
        }
    } 
```

这个函数画线：

```
 private function desenhaCaminho():void //draw the black Path
    {
        if(caminhoCoords.length>=1) 
        {
            caminho.graphics.clear();
            caminho.graphics.lineStyle(1, 0x000000, 1,true);
            caminho.graphics.moveTo(caminhoCoords[0][0],caminhoCoords[0][1]);
            for (var i:int = 1; i < caminhoCoords.length; i++)
            {
                caminho.graphics.lineTo(caminhoCoords[i][0], caminhoCoords[i][1]);
            }
        }else 
        {
            caminho.graphics.clear();
        }
    } 
```

每次船到达一个坐标时，都会将该坐标从数组中取出并重新绘制数组。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:42:39.530

从口吃的样子来看，我猜你需要把“线”弄平一点。它可能会在线路中拾取大量噪音，然后将其转化为飞机的旋转。要么平滑平面的旋转/位置，要么平滑线本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T05:44:50.180

我相信如果您将飞机的注册点设置为中心并使用`.snapto(path)`，它将改善动作。

# c# - 创建实现接口的每种类型的对象

> ID：10782310
> 
> 赞同：1
> 
> 时间：2012-05-28T09:30:41.950
> 
> 标签：c#, reflection, interface

在我的程序中，我使用多个来源来获取数据。实际的实现并不重要，但它们都实现了一个“Source”接口，该接口调用在给定特定输入的情况下获取数据。

当我需要数据时，我想一次调用所有源并对数据进行处理。

目前我这样做：

```
List<Source> sources = new List<Source>()
sources.Add(new SourceA());
sources.Add(new SourceB());
//...

//----

foreach (Source source in sources)
{
string data = source.getData(input);
//do something with the data
} 
```

问题是我需要硬编码将源插入到列表中。有没有办法（也许使用反射）自动化这个过程？我希望该列表包含所有实现“源”接口的对象 - 而不必自己对其进行硬编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:33:21.970

您可以使用反射在程序集中搜索实现您的接口并创建实例的类。除非基类中有共享代码，否则我会考虑重命名为 ISource。

```
foreach (var type in Assembly.GetExecutingAssembly().GetTypes())
{
    if (typeof(ISource).IsAssignableFrom(type))
    {
        sources.Add((ISource)Activator.CreateInstance(type));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:37:36.597

这是我用来加载存储在外部程序集中的插件的一些代码。底部的位显示了如何使用名为“IWAPAddon”的特定接口获取所有类型，这是您可以使用的代码部分：

```
//If the plugin assembly is not aleady loaded, load it manually
if ( PluginAssembly == null )
{
    PluginAssembly = Assembly.LoadFile( oFileInfo.FullName );
}

if ( PluginAssembly != null )
{
    //Step through each module
    foreach ( Module oModule in PluginAssembly.GetModules() )
    {
        //step through the types in each module
        foreach ( Type oModuleType in oModule.GetTypes() )
        {
            foreach ( Type oInterfaceType in oModuleType.GetInterfaces() )
            {
                if ( oInterfaceType.Name == "IWAPAddon" )
                {
                    this.Addons.Add( oModuleType );
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:32:28.583

根据 Slugart 的建议：

```
foreach (var type in Assembly.GetExecutingAssembly().GetTypes())
            {
                if (type.GetInterfaces().Contains(typeof(ISource)) && type.IsInterface == false
                {
                    sources.Add((ISource)Activator.CreateInstance(type));
                }
            } 
```

# c# - 如何阅读目录及其内容

> ID：10782313
> 
> 赞同：1
> 
> 时间：2012-05-28T09:30:51.723
> 
> 标签：c#, asp.net

我有 1 个目录，它由大约 12K + Folders 的许多文件夹组成。每个文件夹包含两个文件：

1) .ini 文件

2).xml 文件。

我想通过批量插入到 Sql Server Table 中一次性读取所有文件。

目前我已经完成，直到：

我能够从 .xml 和 .ini 文件中读取特定记录，并将特定记录插入到 sql server 中。但是我想将所有记录一一插入。

我如何从 Windows 目录文件夹中编写批量记录插入代码，并且如果创建了新文件夹，它应该自动插入到 Sql server 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:42:40.060

实现[IDataReader](http://msdn.microsoft.com/en-us/library/system.data.idatareader.aspx)，它将逐个**读取记录，并将其传递给**[SqlBulkCopy.WriteToServer](http://msdn.microsoft.com/en-us/library/434atets.aspx)重载。您可以使用迭代器和 XmlTextReader 来做到这一点，以最大限度地减少内存使用。

# linq-to-sql - linqpad - 大 NOT IN 子句超出限制 - 还有其他方式吗？ - Linq to SQL

> ID：10782317
> 
> 赞同：2
> 
> 时间：2012-05-28T09:31:05.000
> 
> 标签：linq-to-sql, exception, rpc, linqpad, notin

所以我正在接受 linqpad 挑战： [http](http://www.linqpad.net/Challenge.aspx) ://www.linqpad.net/Challenge.aspx我有一份报告可以从一个表而不是另一个表中创建所有潜在客户，我的 linq 是：

```
//get customers from one table
var salesNotCancelled = Sales.Where(a=>a.Canceled == 2).Select(x => x.Customer_ID).ToArray();

//query against the other table removing customers based on id
var query=Customers.Where(
        !salesNotCancelled.Contains(a.Customer_ID)
    );
query.Dump(); 
```

SQL 输出按预期使用“where not in (ids...)”

但是错误是 RPC 调用的硬限制：

传入的表格数据流 (TDS) 远程过程调用 (RPC) 协议流是

> 不正确。此 RPC 请求中提供的参数过多。最大值为 2100。

这是 SQL 更适合报告的情况，还是我（可能）做错了？

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:25:39.370

如果您的数据库有外键约束，LINQPad 将自动创建关联属性。因此，您可以在一个步骤中构建您的查询，如下所示：

```
Customers.Where (c => !c.Sales.Any (s => s.Canceled == 2)) 
```

换句话说，“给我没有任何取消销售的客户”。这是查询语法中的相同内容：

```
from c in Customers
where !c.Sales.Any (s => s.Canceled == 2)
select c 
```

如果没有外键约束，则需要添加谓词来执行连接：

```
Customers.Where (c => !Sales.Any (s => s.Customer_ID == c.Customer_ID && s.Canceled == 2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:44:35.340

删除对 的调用`.ToArray()`。这样做可以防止一半的查询在服务器上执行。

# xml - XSLT：如果孩子存在于指定路径中，则返回 true

> ID：10782318
> 
> 赞同：1
> 
> 时间：2012-05-28T09:31:10.967
> 
> 标签：xml, xslt

如何检查指定路径中是​​否存在节点？例如，我有这个 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<books>
  <bookgroup name="group1">
    <book name="BookName1"/>
    <book name="BookName2"/>
    <book name="BookName3"/>
    <book name="BookName4"/>
    <book name="BookName5"/>
  </bookgroup>
  <bookgroup name="group2">
    <book name="BookName6"/>
    <book name="BookName7"/>
  </bookgroup>
  <selected>
    <book name="BookName2"/>
    <book name="BookName3"/>
  </selected>
</books> 
```

由于子节点：BookName2 和 BookName 3 存在于选定的标记中，因此期望输出返回 true，而返回 false，因为其子节点都不在选定的标记中。

这是我尝试过的：

```
 <xsl:template name="IsChildExist">
    <xsl:param name="bookGroupName"/>
    <xsl:variable name="isExist">
        <xsl:for-each select="//bookgoup[@NAME=$bookGroupName]/book">
            <xsl:variable name="childNode" select="./@name"/>
            <xsl:choose>
                <xsl:when test="count(//selected/book[@name=$childNode])>0">
                    <xsl:value-of select="true()"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="false()"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each>
    </xsl:variable>
    <xsl:value-of select="$isExist"/>
</xsl:template> 
```

但是仍然在 for-each 循环中的中断上战斗。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:39:14.433

XSLT 没有“打破”循环的概念。它是一种函数式语言，因此您需要改变您的思维定势，远离命令式语言中正常的控制流程。

为了解决您的特定问题，您可以使用一个键来查找所选书籍

```
<xsl:key name="selected" match="selected/book" use="@name" /> 
```

您实际上根本不需要**xsl:for-each**。您可以查找以选择是否有任何元素列表属于键，而不仅仅是特定元素

```
<xsl:template name="IsChildExist">
  <xsl:param name="bookGroupName" select="@name"/>
  <xsl:variable name="isExist">
     <xsl:choose>
        <xsl:when test="key('selected', //bookgroup[@name=$bookGroupName]/book/@name)">
           <xsl:value-of select="true()"/>
        </xsl:when>
        <xsl:otherwise>
           <xsl:value-of select="false()"/>
        </xsl:otherwise>
     </xsl:choose>
  </xsl:variable>
  <xsl:value-of select="$isExist"/>
</xsl:template> 
```

但是，您是否需要使用命名模板？根据您尝试输出的内容，您可以使用 XSLT 中的普通模板模式匹配来完成此操作。试试这个 XSL

```
<xsl:output method="xml" indent="yes"/>
   <xsl:key name="selected" match="selected/book" use="@name" />

   <xsl:template match="bookgroup[key('selected', book/@name)]">
      <bookgroup>
         <xsl:apply-templates select="@*"/>
         <xsl:text>TRUE</xsl:text>
      </bookgroup>
   </xsl:template>

   <xsl:template match="bookgroup">
      <bookgroup>
         <xsl:apply-templates select="@*"/>
         <xsl:text>FALSE</xsl:text>
      </bookgroup>
   </xsl:template>

   <xsl:template match="selected" />

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 XML 时，将输出以下内容：

```
<books>
   <bookgroup name="group1">TRUE</bookgroup>
   <bookgroup name="group2">FALSE</bookgroup>
</books> 
```

# c# - 我已将我的 MVC3 应用程序连接到 MySQl 数据库。我可以将整张桌子放入 m3

> ID：10782323
> 
> 赞同：0
> 
> 时间：2012-05-28T09:31:16.497
> 
> 标签：c#, mysql

我已将我的 C# MVC3 应用程序连接到 MySQL 数据库。我可以将整个表格放入我的应用程序中。但我只需要通过查询获得特定数据。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:32:59.987

查看实体框架。[https://nuget.org/packages/EntityFramework/4.3.1](https://nuget.org/packages/EntityFramework/4.3.1)

# facebook - 替换 FBML fb:visible-to-connection

> ID：10782327
> 
> 赞同：0
> 
> 时间：2012-05-28T09:31:29.473
> 
> 标签：facebook, facebook-fbml

FBML[已被弃用](http://developers.facebook.com/docs/reference/fbml/)。`fb:visible-to-connection`用于仅向粉丝显示部分页面的 最简单的替代品是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:08:47.540

这在 PHP 中很容易做到（使用 Facebook SDK）。如果您解码`signed_request`发布到您的页面的数据，您可以查看用户是否喜欢您的应用所在的页面。

如果您解码数据（例如在 PHP 中，您可以执行以下操作：`print_r( $facebook->getSignedRequest() );`打印解码后的版本），您将看到如下内容：

```
Array
(
    ...
    [page] => Array
        (
            [id] => 1234567890
            [liked] => 1
            [admin] => 1
        )
    [user] => Array
        (
            ...
        )
) 
```

如果用户喜欢该页面，则将`$response['page']['liked']`是，否则。然后，您可以将您的粉丝特定内容包装在条件语句周围：`1``0`

```
if ( $response['page']['liked'] === 1 ) {
    // user if fan
} else {
    // not a fan
} 
```

# php - TCPDF 错误：无法打开图像文件：/var/www/html/tcpdf/cache/

> ID：10782329
> 
> 赞同：10
> 
> 时间：2012-05-28T09:31:33.920
> 
> 标签：php, tcpdf

我有一个基于数据生成 PDF 文件的网站。

我在一个免费的虚拟主机上试过，没问题，但是当我把它上传到我的服务器时，我得到了这个错误：

**TCPDF 错误：无法打开图像文件：/var/www/html/tcpdf/cache/mska_1d34cb1ba2c1951624fbccb7556c6d1d**

在缓存文件夹中，文件夹中不存在 mska_1d34cb1ba2c1951624fbccb7556c6d1d。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-29T09:10:51.240

我现在得到了答案。

对于所有能够遇到此问题的人来说，这些都是可能的解决方案。

原因之一是 tcpdf 中的文件夹没有读写权限。确保缓存和图像文件夹具有 644 或 755（推荐）权限。这些权限非常重要，因为在生成 pdf 时有一个过程，它会写入缓存或读入图像。

另一个原因是 tcpdf 不接受 png 文件或透明图像。我的解决方案是将图像制作成 jpeg 并为其应用白色背景。所以避免使用透明的png。

希望它有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-13T03:42:35.477

在 Ubuntu 中，通过在文件夹上设置 777 权限来修复此错误`tcpdf/cache/`：

```
chmod 777 cache 
```

我尝试使用 755 或 775 并没有工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T10:20:34.257

猜测一下（使用这样的名称），它正在尝试写入该文件夹。检查 PHP/Apache 对该文件夹有写权限。

稍后它也想从中读取，因此请授予读取和写入权限。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-03T19:37:28.433

除了 Bert 建议检查文件夹权限之外，检查 HTTP/HTTPS 问题，并注意如果没有自动正确计算，您可以将 K_PATH_MAIN 服务器路径设置为 tcpdf 文件夹。（在 tcpdf_config.php 中）

`define ('K_PATH_MAIN', '/my/absoulte/path/tcpdf/');`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T21:18:35.083

只需从库文件夹 TCPPDF 创建一个名为 cache 的文件夹

在有配置文件夹、字体和图像的地方，还创建一个缓存文件夹，如果不起作用，则授予权限 777 或 755。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-12T23:12:40.643

强制执行 SELinux 也可能导致此问题。需要添加一个例外。可以使用 setenforce 0 轻松测试，然后重试生成 pdf。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-25T21:35:00.487

检查您的文件的扩展名是否为 pdf（全部小写）而不是 PDF（全部大写）。或者以一种或另一种方式使它们保持一致。我在 Windows / Linux 系统之间遇到了这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-03T12:47:12.153

就我而言，该文件受到保护，TCPDF 尝试使用 CURL (!?!?) 获取该图像，但出现 403 错误，因为 Apache 未找到正确的 cookie。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-08-26T12:29:01.463

我修复了用图像 /home/image/img1.jpg 的绝对路径替换 url [http://www.example.com/img1.jpg](http://www.example.com/img1.jpg)

# linux - 在终端上同时打印到文件中？

> ID：10782332
> 
> 赞同：4
> 
> 时间：2012-05-28T09:31:45.747
> 
> 标签：linux, shell, terminal

我有一个 greps 一些数据的 shell 脚本。我想将结果打印到一个文件中，但是这样做会阻止结果显示在终端上。有没有办法既可以在屏幕上打印结果又可以写入文件。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-28T09:34:58.210

将您的输出通过管道传输到[`tee`](http://en.wikipedia.org/wiki/Tee_%28command%29)命令。

例子：

```
[me@home]$ echo hello | tee out.txt
hello
[me@home]$ cat out.txt 
hello 
```

请注意，stdout 的`echo`打印输出以及写入 thr`tee`命令指定的文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-21T11:29:11.163

请注意，您可以添加`-a`标志`tee`以附加到输出文件

```
[me@home]$ echo hello | tee out.txt
hello
[me@home]$ echo hello again | tee -a out.txt
hello again
[me@home]$ cat out.txt
hello
hello again 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T09:34:26.943

做你的事

[http://linux.die.net/man/1/tee](http://linux.die.net/man/1/tee)

# python - Django 表单：在 Meta 中动态定义模型

> ID：10782340
> 
> 赞同：0
> 
> 时间：2012-05-28T09:32:38.750
> 
> 标签：python, django, django-models, django-forms

我有以下表格：

```
class EmailPreferences(forms.ModelForm):
    """ Base form used for fields that are always required """
    def __init__(self, *args, **kw):
        super(EmailPreferences, self).__init__(*args, **kw)

    class Meta:
        model = teacher_email_preferences
        exclude = ['id', 'c_user']

    def save(self, force_insert=False, force_update=False, commit=True):
        obj = super(EmailPreferences, self).save(commit=commit)
        return obj 
```

如您所见，型号名称是固定的，即`teacher_email_preferences`. 但我的网站有两种类型的用户，一种`Teacher`是`Student`. 我不想创建单独的表单。所以我想`student_email_preferences`在启动此表单时将模型更改为。做的时候如何在这里传递模型`form = EmailPreferences()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:39:41.387

你不能。但是您可以改用闭包。

```
def emailform(emailmodel):
    class EmailPreferences(forms.ModelForm):
         ...

        class Meta:
            model = emailmodel

         ...

    return EmailPreferences

 ...

form = emailform(teacher_email_preferences)() 
```

# ios - 为 Cox De Boor 算法计算节点向量的正确方法是什么？

> ID：10782341
> 
> 赞同：1
> 
> 时间：2012-05-28T09:32:39.910
> 
> 标签：ios, bezier, curve

我目前正在尝试实现用于绘制贝塞尔曲线的 Cox De Boor 算法。我已经设法产生了具有设定度数、控制点数和预定义节点向量的可接受的东西，但我想调整我的代码，以便它在给定任意数量的控制点和任意度数的情况下运行。我 90% 确定我目前遇到的问题，即路径徘徊到点 0/0，是由于我没有正确计算节点向量。如果有人能给我一两个提示，我将不胜感激。请注意，我目前正在单独计算每个维度（在本例中为 x 和 y）；我最终将调整此代码以对所有维度使用相同的预计算。我也可以调整它以使用 C 数组而不是 NSArrays，但据我所知，这样做并没有真正的速度优势。

我目前正在使用 5 个控制点生成一条 3 度曲线，其节点向量为 {0, 0, 0, 0, 1, 2, 2, 2, 2}。

```
- (double) coxDeBoorForDegree:(NSUInteger)degree span:(NSUInteger)span travel:(double)travel knotVector:(NSArray *)vector
{
    double k1 = [[vector objectAtIndex:span] doubleValue];
    double k2 = [[vector objectAtIndex:span+1] doubleValue];
    if (degree == 1) {
        if (k1 <= travel && travel <= k2) return 1.0;
        return 0.0;
    }

    double k3 = [[vector objectAtIndex:span+degree-1] doubleValue];
    double k4 = [[vector objectAtIndex:span+degree] doubleValue];
    double density1 = k3 - k1;
    double density2 = k4 - k2;
    double equation1 = 0.0, equation2 = 0.0;

    if (density1 > 0.0) equation1 = ((travel-k1) / density1) * [self coxDeBoorForDegree:degree-1 span:span travel:travel knotVector:vector];
    if (density2 > 0.0) equation2 = ((k4-travel) / density2) * [self coxDeBoorForDegree:degree-1 span:span+1 travel:travel knotVector:vector];

    return equation1 + equation2;
}

- (double) valueAtTravel:(double)travel degree:(NSUInteger)degree points:(NSArray *)points knotVector:(NSArray *)vector
{
    double total = 0.0;
    for (NSUInteger i = 0; i < points.count; i++) {
        float weight = [self coxDeBoorForDegree:degree+1 span:i travel:travel knotVector:vector];
        if (weight > 0.001) total += weight * [[points objectAtIndex:i] doubleValue];
    }
    return total;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:20:13.777

没关系，我发现这个非常有用的网页： [http ://www.cs.mtu.edu/~shene/COURSES/cs3621/NOTES/INT-APP/PARA-knot-generation.html](http://www.cs.mtu.edu/~shene/COURSES/cs3621/NOTES/INT-APP/PARA-knot-generation.html)

因此任何有相同问题的人都可以使用以下方法生成合适的节点向量，其中“controls”是影响线段的控制点的数量，“degree”是……嗯，曲线的度数！不要忘记度数不能等于或超过曲线中控制点的数量：

```
- (NSArray *) nodeVectorForControlCount:(NSUInteger)controls degree:(NSUInteger)degree
{    
    NSUInteger knotIncrement = 0;
    NSUInteger knotsRequired = controls + degree + 1;
    NSMutableArray *constructor = [[NSMutableArray alloc] initWithCapacity:knotsRequired];
    for (NSUInteger i = 0; i < knotsRequired; i++) {
        [constructor addObject:[NSNumber numberWithDouble:(double)knotIncrement]];
        if (i >= degree && i < controls) knotIncrement++;
    }

    NSArray * returnArray = [NSArray arrayWithArray:constructor];
    [constructor release];
    return returnArray;    
} 
```

# javascript - value==num 时的停止间隔？

> ID：10782343
> 
> 赞同：-1
> 
> 时间：2012-05-28T09:32:43.333
> 
> 标签：javascript, intervals

我的代码有问题。我只知道如何在按钮内制作停止功能。

有没有办法让我们在 if...else 检查函数中实现 stopInterval 或 clearInterval 函数？

例如：

```
if (theValue ==5){
   clearInterval;
} 
```

下面是我的代码：http: [//jsfiddle.net/qHL8Z/52/](http://jsfiddle.net/qHL8Z/52/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:38:48.273

更改`var value = value + 1;`为`value = value + 1;`

# android - 使用线程显示进度条

> ID：10782344
> 
> 赞同：2
> 
> 时间：2012-05-28T09:32:43.737
> 
> 标签：android

我正在尝试使用线程显示进度条。我接受我没有那么多线程概念。

**这是代码**

```
public class Progress extends Activity {

    static String[] display;
    private static final int Progress = 0;      
    private ProgressBar mProgress;
    private int mProgressStatus = 0;
    private Handler mHandler = new Handler();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.progress);

        mProgress = (ProgressBar) findViewById(R.id.progressBar);

        // Start lengthy operation in a background thread
        new Thread(new Runnable() {
            public void run() {
                while (mProgressStatus < 100) {
                    mProgressStatus = doWork();

                    // Update the progress bar
                    mHandler.post(new Runnable() {
                        public void run() {
                            mProgress.setProgress(mProgressStatus);
                        }
                    });
                }
            }

            private int doWork() {                  
                display = new Logic().finaldata();
                // TODO Auto-generated method stub
                return 100;
            }
        }).start();
    }
} 
```

运行时，logcat 消息是

> java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:36:20.423

所以你的问题将在其他地方。我用 Handler 尝试了你的例子，它对我有用。

```
package com.sajmon.threadsDemo;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.widget.ProgressBar;
import android.widget.TextView;

    public class ThreadsDemoActivity extends Activity {

        ProgressBar bar;
        TextView label;
        Handler handler = new Handler();

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            bar = (ProgressBar) findViewById(R.id.progBar);

            new Thread(new Runnable() {

                int i = 0;
                int progressStatus = 0;

                public void run() {
                    while (progressStatus < 100) {
                        progressStatus += doWork();
                        try {
                            Thread.sleep(500);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }

                        // Update the progress bar
                        handler.post(new Runnable() {
                            public void run() {
                                bar.setProgress(progressStatus);
                                i++;
                            }
                        });
                    }
                }
                private int doWork() {

                    return i * 3;
                 }

                }).start();         

        }
    } 
```

和 XML：

```
<ProgressBar 
        android:id="@+id/progBar" style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        /> 
```

因此，请查看并编辑与此类似的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:47:18.423

找到以下使用线程更新进度条的示例代码

```
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;
import android.widget.ProgressBar;
import android.widget.TextView;

public class ThreadDemo1ProgressBar extends Activity
{
    ProgressBar bar;
    TextView msgWorking;
    boolean isRunning = false;

    Handler handler = new Handler(){
        @Override
        public void handleMessage(Message msg) {
            bar.incrementProgressBy(5);
            if (bar.getProgress() == bar.getMax()) {
                msgWorking.setText("Done");
                bar.setVisibility(View.INVISIBLE);
            } else {
                msgWorking.setText("Working..." +
                        bar.getProgress());
            }
        }// handleMessage
    };

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        bar = (ProgressBar) findViewById(R.id.progress);
        bar.setMax(100);
        msgWorking = (TextView) findViewById(R.id.TextView01);
    }

    public void onStart() {
        super.onStart();
        bar.setProgress(0);

        Thread background = new Thread(new Runnable() {
            public void run() {
                try
                {
                    for (int i = 0; i < 20 && isRunning; i++) {

                        Thread.sleep(1000);
                                handler.sendMessage(handler.obtainMessage());
                    }
                }
                catch(Throwable t) {
                    // just end the background thread
                }
            }
        });
        isRunning = true;
        background.start();
    }// onStart

    public void onStop() {
        super.onStop();
        isRunning = false;
    }
}// ThreadDemo1ProgressBar 
```

about 示例每 5 秒更新一次进度条。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:00:46.043

我实际上只创建了一次线程实例，它仍然可以工作。此代码是在启动活动中编写的。您需要做的就是调用`showSpinner1()`方法来显示/隐藏微调器。

确保 `getWindow().requestFeature(Window.FEATURE_INDETERMINATE_PROGRESS);`在您的`onCreate()`方法中执行此操作，并使用此代码打开和关闭微调器。

```
// Spinner related code - The thread is created just once and is used multiple times (works!!)
boolean toShow = false;
Thread spinner1Thread = new Thread("Show/Hide Spinner Thread") {

    @Override
    public void run() {
        setProgressBarIndeterminateVisibility(toShow);
    }

};

/**
 * Shows and hides the spinner
 * @param pShow
 */
public void showSpinner1(boolean pShow) {
    toShow = pShow;
    runOnUiThread(spinner1Thread);
} 
```

# python - 网络集群和python

> ID：10782345
> 
> 赞同：3
> 
> 时间：2012-05-28T09:32:51.650
> 
> 标签：python, graph, cluster-analysis, data-visualization

我有一个网络图数据，想根据节点之间的距离将节点划分为集群。是否有任何 python 库或其他工具，我可以通过 python 脚本向其提供输入并可以查询节点所属的集群。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T09:36:44.210

scikit-learn 包括各种[聚类算法](http://scikit-learn.org/stable/modules/clustering.html)，包括一些接受距离矩阵作为输入的算法。

[免责声明：我参与了 scikit-learn 项目。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:20:17.213

您应该使用[NetworkX](http://networkx.lanl.gov/)来执行此操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:37:49.520

请参阅此 python 库[python-graph](http://code.google.com/p/python-graph/source/browse/trunk/core/pygraph/algorithms/traversal.py?r=707) 。可能对你有用。

# objective-c - 如何从自定义操作中进入删除确认状态 UITableViewCell？

> ID：10782348
> 
> 赞同：3
> 
> 时间：2012-05-28T09:33:04.133
> 
> 标签：objective-c, ios, uitableview

我有一个问题，我想显示我的 UITableView 单元格的右删除确认按钮。滑动删除效果很好，但我也希望在不滑动的情况下发生这种情况。

我想将单元格的状态从默认更改为显示删除确认。有 bool 属性显示DeleteConfirmation 但它是只读的。

```
 [self setEditing:YES animated:YES]; 
```

从自定义单元格的类不做任何事情。

如何在不滑动的情况下更改单元格的状态以显示删除确认？

即在单元格上的滑动手势被识别后被称为什么？我想手动调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:53:16.297

这是一个委托方法，这意味着您不应该自己调用它，因为它是 tableView 类的进程句柄的一部分。

相反，您需要覆盖调用类，准备方法以显示您的按钮（或您想要显示的任何内容）并为其他视图设置动画以修剪它们的框架。这样做您将了解委托和实例消息之间的区别，因为您可能需要通知 tableView 或其委托您的方法已完成，显示按钮并且其他视图也动画。

# c# - 从按钮清除屏幕

> ID：10782353
> 
> 赞同：0
> 
> 时间：2012-05-28T09:33:35.400
> 
> 标签：c#, winforms, button

我试图删除我的 WinForm 中的所有按钮。但不知何故，它在表单中保留了几个按钮。如何删除表单中的所有按钮？我的代码有什么错误？！

```
void ClearScreen()
    {
        foreach (Control c in this.Controls)
        {
            if (c is Button)
                this.Controls.Remove(c);

        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:42:32.730

您的代码不起作用的原因是您在使用枚举器循环遍历集合时正在修改集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T09:58:13.450

尝试这个：

```
void ClearScreen()
{
    List<Button> _buttons = this.Controls.OfType<Button>().ToList();

    foreach (var button in _buttons)
    {
        this.Controls.Remove(button);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:06:41.043

```
foreach (Button btn in this.Controls.OfType<Button>())
            {
                this.Controls.Remove(bbb);
            } 
```

这是从表单中删除所有按钮的通用方法

# java - Java/Android 的 zxing QR 阅读器库的替代品？

> ID：10782354
> 
> 赞同：46
> 
> 时间：2012-05-28T09:33:36.267
> 
> 标签：java, android, ios, zxing, qr-code

除了 Zxing 之外，还有没有其他库可以用来创建二维码阅读器，**即使它不是免费的。**

当然，免费的会很棒。但我也愿意花钱买一个易于定制并节省时间的库。

谢谢你。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-29T16:21:38.083

我在这里找到了我的问题的答案[http://sourceforge.net/news/?group_id=189236](http://sourceforge.net/news/?group_id=189236)

它比 zxing 快得多，也更容易实现。

谢谢你。

**对于 iOS：**

适用于 iOS (zbar.sourceforge.net/iphone) 和文档 (zbar.sourceforge.net/iphone/sdkdoc/install.html)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-28T10:56:06.807

不需要安装 zxing 来实现 qr 阅读器，只需创建一个类**IntentIntegrator.java** 和 IntentResult.java 文件并从您的活动中调用。

这是这个的源代码......

[在此处查看完整的源代码](https://code.google.com/p/dwivedi-ji-qr-code-reader/source/checkout)

```
import java.util.Arrays;
import java.util.Collection;
import java.util.Collections;
import java.util.List;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.ActivityNotFoundException;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.net.Uri;
import android.util.Log;

public final class IntentIntegrator {

  public static final int REQUEST_CODE = 0x0000c0de; // Only use bottom 16 bits
  private static final String TAG = IntentIntegrator.class.getSimpleName();

  public static final String DEFAULT_TITLE = "Install Barcode Scanner?";
  public static final String DEFAULT_MESSAGE =
      "This application requires Barcode Scanner. Would you like to install it?";
  public static final String DEFAULT_YES = "Yes";
  public static final String DEFAULT_NO = "No";

  private static final String BS_PACKAGE = "com.google.zxing.client.android";

  // supported barcode formats
  public static final Collection<String> PRODUCT_CODE_TYPES = list("UPC_A", "UPC_E", "EAN_8", "EAN_13", "RSS_14");
  public static final Collection<String> ONE_D_CODE_TYPES =
      list("UPC_A", "UPC_E", "EAN_8", "EAN_13", "CODE_39", "CODE_93", "CODE_128",
           "ITF", "RSS_14", "RSS_EXPANDED");
  public static final Collection<String> QR_CODE_TYPES = Collections.singleton("QR_CODE");
  public static final Collection<String> DATA_MATRIX_TYPES = Collections.singleton("DATA_MATRIX");

  public static final Collection<String> ALL_CODE_TYPES = null;

  public static final Collection<String> TARGET_BARCODE_SCANNER_ONLY = Collections.singleton(BS_PACKAGE);
  public static final Collection<String> TARGET_ALL_KNOWN = list(
          BS_PACKAGE, // Barcode Scanner
          "com.srowen.bs.android", // Barcode Scanner+
          "com.srowen.bs.android.simple" // Barcode Scanner+ Simple
          // TODO add more -- what else supports this intent?
      );

  private final Activity activity;
  private String title;
  private String message;
  private String buttonYes;
  private String buttonNo;
  private Collection<String> targetApplications;

  public IntentIntegrator(Activity activity) {
    this.activity = activity;
    title = DEFAULT_TITLE;
    message = DEFAULT_MESSAGE;
    buttonYes = DEFAULT_YES;
    buttonNo = DEFAULT_NO;
    targetApplications = TARGET_ALL_KNOWN;
  }

  public String getTitle() {
    return title;
  }

  public void setTitle(String title) {
    this.title = title;
  }

  public void setTitleByID(int titleID) {
    title = activity.getString(titleID);
  }

  public String getMessage() {
    return message;
  }

  public void setMessage(String message) {
    this.message = message;
  }

  public void setMessageByID(int messageID) {
    message = activity.getString(messageID);
  }

  public String getButtonYes() {
    return buttonYes;
  }

  public void setButtonYes(String buttonYes) {
    this.buttonYes = buttonYes;
  }

  public void setButtonYesByID(int buttonYesID) {
    buttonYes = activity.getString(buttonYesID);
  }

  public String getButtonNo() {
    return buttonNo;
  }

  public void setButtonNo(String buttonNo) {
    this.buttonNo = buttonNo;
  }

  public void setButtonNoByID(int buttonNoID) {
    buttonNo = activity.getString(buttonNoID);
  }

  public Collection<String> getTargetApplications() {
    return targetApplications;
  }

  public void setTargetApplications(Collection<String> targetApplications) {
    this.targetApplications = targetApplications;
  }

  public void setSingleTargetApplication(String targetApplication) {
    this.targetApplications = Collections.singleton(targetApplication);
  }

  /**
   * Initiates a scan for all known barcode types.
   */
  public AlertDialog initiateScan() {
    return initiateScan(ALL_CODE_TYPES);
  }

  /**
   * Initiates a scan only for a certain set of barcode types, given as strings corresponding
   * to their names in ZXing's {@code BarcodeFormat} class like "UPC_A". You can supply constants
   * like {@link #PRODUCT_CODE_TYPES} for example.
   */
  public AlertDialog initiateScan(Collection<String> desiredBarcodeFormats) {
    Intent intentScan = new Intent(BS_PACKAGE + ".SCAN");
    intentScan.addCategory(Intent.CATEGORY_DEFAULT);

    // check which types of codes to scan for
    if (desiredBarcodeFormats != null) {
      // set the desired barcode types
      StringBuilder joinedByComma = new StringBuilder();
      for (String format : desiredBarcodeFormats) {
        if (joinedByComma.length() > 0) {
          joinedByComma.append(',');
        }
        joinedByComma.append(format);
      }
      intentScan.putExtra("SCAN_FORMATS", joinedByComma.toString());
    }

    String targetAppPackage = findTargetAppPackage(intentScan);
    if (targetAppPackage == null) {
      return showDownloadDialog();
    }
    intentScan.setPackage(targetAppPackage);
    intentScan.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intentScan.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
    activity.startActivityForResult(intentScan, REQUEST_CODE);
    return null;
  }

  private String findTargetAppPackage(Intent intent) {
    PackageManager pm = activity.getPackageManager();
    List<ResolveInfo> availableApps = pm.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
    if (availableApps != null) {
      for (ResolveInfo availableApp : availableApps) {
        String packageName = availableApp.activityInfo.packageName;
        if (targetApplications.contains(packageName)) {
          return packageName;
        }
      }
    }
    return null;
  }

  private AlertDialog showDownloadDialog() {
    AlertDialog.Builder downloadDialog = new AlertDialog.Builder(activity);
    downloadDialog.setTitle(title);
    downloadDialog.setMessage(message);
    downloadDialog.setPositiveButton(buttonYes, new DialogInterface.OnClickListener() {
      @Override
      public void onClick(DialogInterface dialogInterface, int i) {
        Uri uri = Uri.parse("market://details?id=" + BS_PACKAGE);
        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        try {
          activity.startActivity(intent);
        } catch (ActivityNotFoundException anfe) {
          // Hmm, market is not installed
          Log.w(TAG, "Android Market is not installed; cannot install Barcode Scanner");
        }
      }
    });
    downloadDialog.setNegativeButton(buttonNo, new DialogInterface.OnClickListener() {
      @Override
      public void onClick(DialogInterface dialogInterface, int i) {}
    });
    return downloadDialog.show();
  }

  /**
   * <p>Call this from your {@link Activity}'s
   * {@link Activity#onActivityResult(int, int, Intent)} method.</p>
   *
   * @return null if the event handled here was not related to this class, or
   *  else an {@link IntentResult} containing the result of the scan. If the user cancelled scanning,
   *  the fields will be null.
   */
  public static IntentResult parseActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == REQUEST_CODE) {
      if (resultCode == Activity.RESULT_OK) {
        String contents = intent.getStringExtra("SCAN_RESULT");
        String formatName = intent.getStringExtra("SCAN_RESULT_FORMAT");
        byte[] rawBytes = intent.getByteArrayExtra("SCAN_RESULT_BYTES");
        int intentOrientation = intent.getIntExtra("SCAN_RESULT_ORIENTATION", Integer.MIN_VALUE);
        Integer orientation = intentOrientation == Integer.MIN_VALUE ? null : intentOrientation;
        String errorCorrectionLevel = intent.getStringExtra("SCAN_RESULT_ERROR_CORRECTION_LEVEL");
        return new IntentResult(contents,
                                formatName,
                                rawBytes,
                                orientation,
                                errorCorrectionLevel);
      }
      return new IntentResult();
    }
    return null;
  }

  /**
   * Shares the given text by encoding it as a barcode, such that another user can
   * scan the text off the screen of the device.
   *
   * @param text the text string to encode as a barcode
   */
  public void shareText(CharSequence text) {
    Intent intent = new Intent();
    intent.addCategory(Intent.CATEGORY_DEFAULT);
    intent.setAction(BS_PACKAGE + ".ENCODE");
    intent.putExtra("ENCODE_TYPE", "TEXT_TYPE");
    intent.putExtra("ENCODE_DATA", text);
    String targetAppPackage = findTargetAppPackage(intent);
    if (targetAppPackage == null) {
      showDownloadDialog();
    } else {
      intent.setPackage(targetAppPackage);
      intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
      intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
      activity.startActivity(intent);
    }
  }

  private static Collection<String> list(String... values) {
    return Collections.unmodifiableCollection(Arrays.asList(values));
  }

} 
```

和 IntentResult.java 用于包含所选条形码或二维码的信息。

/** * */

```
public final class IntentResult {

      private final String contents;
      private final String formatName;
      private final byte[] rawBytes;
      private final Integer orientation;
      private final String errorCorrectionLevel;

      IntentResult() {
        this(null, null, null, null, null);
      }

      IntentResult(String contents,
                   String formatName,
                   byte[] rawBytes,
                   Integer orientation,
                   String errorCorrectionLevel) {
        this.contents = contents;
        this.formatName = formatName;
        this.rawBytes = rawBytes;
        this.orientation = orientation;
        this.errorCorrectionLevel = errorCorrectionLevel;
      }

      /**
       * @return raw content of barcode
       */
      public String getContents() {
        return contents;
      }

      /**
       * @return name of format, like "QR_CODE", "UPC_A". See {@code BarcodeFormat} for more format names.
       */
      public String getFormatName() {
        return formatName;
      }

      /**
       * @return raw bytes of the barcode content, if applicable, or null otherwise
       */
      public byte[] getRawBytes() {
        return rawBytes;
      }

      /**
       * @return rotation of the image, in degrees, which resulted in a successful scan. May be null.
       */
      public Integer getOrientation() {
        return orientation;
      }

      /**
       * @return name of the error correction level used in the barcode, if applicable
       */
      public String getErrorCorrectionLevel() {
        return errorCorrectionLevel;
      }

      @Override
      public String toString() {
        StringBuilder dialogText = new StringBuilder(100);
        dialogText.append("Format: ").append(formatName).append('\n');
        dialogText.append("Contents: ").append(contents).append('\n');
        int rawBytesLength = rawBytes == null ? 0 : rawBytes.length;
        dialogText.append("Raw bytes: (").append(rawBytesLength).append(" bytes)\n");
        dialogText.append("Orientation: ").append(orientation).append('\n');
        dialogText.append("EC level: ").append(errorCorrectionLevel).append('\n');
        return dialogText.toString();
      }

    } 
```

现在如何从您的活动中调用这些类

```
 btnScanBarCode.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                    IntentIntegrator integrator = new IntentIntegrator(BarCodeReaderActivity.this);
                integrator.initiateScan();  

                    }
                }); 
```

并在 onActivityResult

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub

        IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, data);
          if (scanResult != null) {

            // handle scan result
             contantsString =  scanResult.getContents()==null?"0":scanResult.getContents();
             if (contantsString.equalsIgnoreCase("0")) {
                 Toast.makeText(this, "Problem to get the  contant Number", Toast.LENGTH_LONG).show();

             }else {
                 Toast.makeText(this, contantsString, Toast.LENGTH_LONG).show();

            }

          }
          else{
              Toast.makeText(this, "Problem to secan the barcode.", Toast.LENGTH_LONG).show();
          }
    } 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-27T11:55:55.513

我有同样的问题。我下载了 ZXing 库并将其集成到我的项目中。集成非常困难和垃圾，我花了很多时间清理项目并仅使用 QRCode 部分。现在它可以工作了，但是某些摩托罗拉设备 Atrix 和 DroidX (Android 2.3) 存在一个已知问题，其中 CaptureActivity 显示白屏而不是相机。这是图书馆的问题，但 ZXing 的人不会解决它。似乎这个问题也出现在 Htc Nexus One 上。这是一个帖子：[https](https://groups.google.com/forum/#!topic/zxing/BofniyFVZaQ) ://groups.google.com/forum/#!topic/zxing/BofniyFVZaQ 。

@肖恩

我知道你是ZXing的创始人。条码扫描器应用程序很棒，但将其用作应用程序的库则不然。我建议将应用程序和库解耦并为其编写良好的文档。另外我不明白你为什么放弃对 iOS 的支持。

# tridion - 是否可以在 SDL Tridion UI 2012 中编辑组件链接？

> ID：10782355
> 
> 赞同：10
> 
> 时间：2012-05-28T09:33:49.317
> 
> 标签：tridion, tridion-2011

来自 Tridion 星球的所有人类的一个大大的“嗨” :)。

我正在尝试使组件链接在 SDL Tridion UI 2012 中可编辑。

我有一个组件包含多值组件链接作为字段之一。

当我在 DWT 中添加以下内容时

```
<!-- TemplateBeginRepeat name="componentLink" -->
 <!-- TemplateBeginIf cond="TemplateRepeatIndex<3" -->
  <li> 
   <a href="#" tridion:href="@@RenderComponentField(FieldPath+"componentLink",TemplateRepeatIndex)@@">
    Link${TemplateRepeatIndex}
   </a>  
  </li> 
 <!-- TemplateEndIf -->
<!-- TemplateEndRepeat --> 
```

结果在模板生成器内部，我得到了以下信息：

```
<li><a href="#" tridion:href="<tcdl:ComponentField name="componentLink" index="0">tcm:8-625</tcdl:ComponentField>">Link0</a></li> 
<li><a href="#" tridion:href="<tcdl:ComponentField name="componentLink" index="1">tcm:8-626</tcdl:ComponentField>">Link1</a></li> 
<li><a href="#" tridion:href="<tcdl:ComponentField name="componentLink" index="2">tcm:8-627</tcdl:ComponentField>">Link2</a></li> 
```

正如预期的那样，页面级别的“默认完成操作”发生错误

> 无法找到 tridion:href 的正确值

是否需要在之前的某个操作中提取 C# TBB 中的组件链接或存在任何其他方式来解决此问题（为 SDL Tridion UI 启用组件链接）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T10:02:01.550

在我的“新 UI VM”中，我的设计中有以下代码：

```
<tcdl:ComponentField name="LinkText">
  <a tridion:href="@@Component.Fields.Target@@">${LinkText}</a>
</tcdl:ComponentField> 
```

链接的组件在新 UI 中是可编辑的。处理 tcdl:ComponentField 以将适当的上下文编辑指令包装在链接周围。您应该能够很容易地将其转换为您的代码......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T11:29:14.037

谢谢杰里米，手动添加`<tcdl:ComponentField>`标签解决了这个问题。

这是在页面级别正确解析组件链接的最终代码：

```
<!-- TemplateBeginRepeat name="componentLink" --> 
    <!-- TemplateBeginIf cond="TemplateRepeatIndex<3" --> 
        <li>
            <tcdl:ComponentField name="componentLink">
                 <a tridion:href="@@Field@@">Link${TemplateRepeatIndex} </a>
            </tcdl:ComponentField>  
        </li>
    <!-- TemplateEndIf -->
<!-- TemplateEndRepeat --> 
```

# spring-webflow-2 - spring webflow2 - 提交后没有反应

> ID：10782357
> 
> 赞同：0
> 
> 时间：2012-05-28T09:34:02.947
> 
> 标签：spring-webflow-2

我在 Spring Webflow 2 中遇到了一个奇怪的问题：我的流程中有三个状态：1）要填写的表单 2）确认页面 3）保存模型的操作状态

第一个状态完美运行，没问题第二个状态不回复任何提交按钮。完全死了，客户端和服务器端都没有反应。你有什么想法为什么？

这是我的流程定义：

```
<view-state id="step1" view="profile/step1_profile" model="profile">
<on-render>
    <evaluate expression="profileReferenceData.getNationalities(flowRequestContext)"/>
    <evaluate expression="profileReferenceData.getRaces(flowRequestContext)"/>
    <evaluate expression="profileReferenceData.getReligions(flowRequestContext)"/>
</on-render>
    <transition on="submit_step_1" to="step2">
    </transition>
</view-state>

<view-state id="step2" view="profile/step2_confirmData" model="profile">
    <!--            <secured attributes="ROLE_USER" /> -->
    <transition on="submit_step_2" to="step3"/>
    <transition on="review" to="step1" />
</view-state>

<!--  step3\. Save data  -->
 <action-state id="step3"> 
     <evaluate expression="profileServiceImpl.createProfileForWebFlow(profile)" /> 
     <transition on="ok" to="done" /> 
     <transition on="error" to="notDone" /> 
 </action-state> 
```

这里是第二步 .jsp

```
<tr>
    <td><spring:message code="label.nationality"/>:</td>
    <td><c:out value="${profile.personalData.nationality}"/></td>
</tr>   
<tr>
    <td><spring:message code="label.race"/>:</td>
    <td><c:out value="${profile.personalData.race}"/>
</tr>   
<tr>
    <td><spring:message code="label.religion"/>:</td>
    <td><c:out value="${profile.personalData.religion}"/>
<tr>
    <td><input type="submit" value="Submit" name="_eventId_submit_step_2" /></td>
    <td><input type="submit" name="_eventId_review" value="Review"/></td>
    <td><input type="submit" name="_eventId_cancel" value="Cancel"/></td>
</tr> 
```

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:45:47.053

我想看看您如何声明表单...无论如何，请检查是否已将操作和方法属性添加到表单标记中。例如：

```
<form id="formId" action="${flowExecutionUrl}" method="post">
...
</form> 
```

或者在你的情况下：

```
<form:form id="formId" action="${flowExecutionUrl}" method="post" modelAttribute="profile">
...
</form:form> 
```

希望这可以帮助。

# css - CSS：绝对位置问题

> ID：10782359
> 
> 赞同：0
> 
> 时间：2012-05-28T09:34:13.607
> 
> 标签：css, position, absolute

事实上，我对 HTML 和 CSS 非常熟悉，但是当涉及到设置具有相对和绝对位置的多个分层 div 时，这给我带来了麻烦。

我所拥有的是下面

```
<div id="firstdiv">

   <div id="secdiv">

      <div id="thirddiv">

         <div id="forthdiv">

         </div>

      </div>

   </div>

</div> 
```

现在我想在绝对位置上对齐大多数 div 所以我设置相对于#firstdiv的位置现在将位置绝对设置为#secdiv，一切顺利

现在我想将我的#forthdiv absolute 设置为#thirddiv，所以我将#thirddiv 设置为相对位置，将#forthdiv 设置为绝对位置，听说我遇到了麻烦。

#forthdiv 不考虑父（#thriddiv）关系，但它正在考虑#firstdiv 关系并根据#firstdiv 获取位置。

现在如何设置这一切，所以绝对位置 div 只考虑它自己的父级而不是根级

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:40:56.500

尝试这样的事情

[http://jsfiddle.net/Mcp6L/](http://jsfiddle.net/Mcp6L/)

# postgresql - 使用 Postgresql GIN/GiST 突出显示搜索结果

> ID：10782365
> 
> 赞同：2
> 
> 时间：2012-05-28T09:34:29.533
> 
> 标签：postgresql, full-text-search, search-engine, highlight

使用 Postgresql 的 GIN 或 GiST 索引时，是否有内置的方式来突出显示匹配的搜索关键字？或者，如果没有，在 Postgresql 之外执行此操作的方法？

我正在使用 PHP 5.3.10 和 Postgresql 9.1.3。

所有的想法都受到赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:35:08.923

查看 ts_headline 函数[ts_headline](http://www.postgresql.org/docs/9.1/interactive/textsearch-controls.html#TEXTSEARCH-HEADLINE)。

```
SELECT ts_headline('english',
  'The most common type of search
is to find all documents containing given query terms
and return them in order of their similarity to the
query.',
  to_tsquery('query & similarity'));
                        ts_headline                         
------------------------------------------------------------
 containing given <b>query</b> terms
 and return them in order of their <b>similarity</b> to the
 <b>query</b>. 
```

# google-app-engine - 与 Ancestor 的事务中的 Objectify 查询和 Key 上的过滤器同时返回 0 个元素

> ID：10782366
> 
> 赞同：1
> 
> 时间：2012-05-28T09:34:32.010
> 
> 标签：google-app-engine, objectify

嗨，我正在使用 Objectify，我有以下内容：

```
public static final Key<A> TopParent = new Key<A>(A.class,1)

class A {
}

class B {

 @Parent
 Key parent;

 Key referenceKeyToC 
}

class C {
  @Parent 
  Key parent;
} 
```

然后，我尝试使用 Ancestor(TopParent) 和一些引用键 C 在 TRANSACTION 中获取所有 B 对象-但它一直返回 0 个元素。

这是我的查询： List> bKeys = oft.query(B.class).ancestor(TopParent).filter("referenceKeyToC", new Key(C.class), b.referenceKeyToC).listKeys();

当我保存 B 时，它的 parent 和 referenceKeyToC 都设置正确..

如果我在没有密钥过滤器的情况下运行查询，例如： List> bKeys = oft.query(B.class).ancestor(TopParent).listKeys();

它返回所有 B 对象 - 并且那些 B 对象都包含它们的 referenceKeyToC 有
什么想法吗？

杰斯珀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:43:19.127

这几乎可以肯定是一个索引问题。为了使该查询起作用，您必须定义两个索引：

*   referenceKeyToC 上的单一属性索引
*   {ancestor, referenceKeyToC} 上的多属性索引

在 Objectify 3.x 中，属性默认具有单属性索引，但如果您已将 @Unindexed 添加到类 B 中，则需要将 @Indexed 放在 referenceKeyToC 上。

多属性索引在 datastore-indexes.xml 中定义。如果您在开发模式下运行此查询，环境应该为您提供所需的 xml 片段。

# javascript - 修改 CSS 内容编辑器 yui

> ID：10782368
> 
> 赞同：0
> 
> 时间：2012-05-28T09:34:36.137
> 
> 标签：javascript, editor, yui

我创建了一个切换按钮来显示或不显示 div 边框。如何修改内容编辑器的 CSS？

任何想法 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:54:07.143

如果你想给你的编辑器换皮，你最好访问[这里](http://developer.yahoo.com/yui/examples/editor/skinning_editor.html)

# facebook - Facebook 应用程序画布页面未加载

> ID：10782369
> 
> 赞同：1
> 
> 时间：2012-05-28T09:34:53.617
> 
> 标签：facebook

我已经使用 PHP 开发了一个应用程序。该应用程序在使用画布 url 启动时可以正常工作，但是当使用应用程序（画布页面）启动时，应用程序没有加载。

连接超时才来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T10:05:20.333

这可能是因为您在 Facebook URL ( **https://apps.facebook.com/yourapp** ) 中使用了 HTTPS，而您的服务器不支持 HTTPS。尝试在 URL 中没有 HTTPS 的情况下访问您的应用程序。

# tridion - 我们可以使用 SiteEdit 2009 在 Tridion 中编辑 XML 文档吗？

> ID：10782372
> 
> 赞同：6
> 
> 时间：2012-05-28T09:34:59.013
> 
> 标签：tridion, tridion-2011

我们已经开始探索 SiteEdit。我们可以为 html 页面启用和使用它，但是如果内容作为 XML 文档发布，任何人都可以指导我们是否可以使用它。我们已尝试这样做，但通过 SiteEdit 代理（在端口 84 上）访问时，已发布的 XML 页面上未显示 SiteEdit 按钮。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T11:41:58.257

SiteEdit 允许您在您的网站的**HTML中编辑您的内容。**因此，如果您将内容呈现为（有效的）HTML 并将正确的 SiteEdit 命令添加到该 HTML，您就可以对其进行编辑。

SiteEdit 将无法编辑您发布的原始 XML。通常我希望在网站的其他地方找到与 HTML 相同的内容并在那里启用 SiteEdit。

如果您真的认为在类似 XML 的视图中编辑内容很有价值，我建议找到[一个将 XML 转换为 HTML 视图（如 Internet Explorer 显示的那样）的 XSLT，并将其](http://www.dpawson.co.uk/xsl/sect2/microsoft.html#d6898e200)作为动态组件模板添加到 Tridion。如果您随后将[必要的 SiteEdit 命令](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SiteEdit_2009_SP3/concept_SECLRef1247BCB0533849F2B3BBD6ADD51AD9B0)嵌入到该 HTML 中，则可以在 SiteEdit 中编辑结果。它当然会变成 HTML，但看起来您仍然在编辑原始 XML。

# java - 寻找合适的算法

> ID：10782373
> 
> 赞同：1
> 
> 时间：2012-05-28T09:35:04.867
> 
> 标签：java, algorithm

我有一个问题要从[类似 SPOJ](http://spoj.pl/)的平台上解决，我不知道如何解决这个问题。这是问题，用 G 翻译器翻译，但如果丢失了我可以尝试更好地翻译它

该条目给出了测试的数量 T (10 <= T <= 100)。对于每个测试，给出数字 N (3 <= N <= 100)。这个数字是边为 1 的等边 N 角（例如，等边五边形，N = 5）。在 N 边形的 N 个顶点中的每一个上都播种了蜗牛。每只蜗牛作为“目标”都设置了一只蜗牛去到达另一只蜗牛——站在相邻顶点的那个（事实上，相邻节点选择的方向始终相同，即每只蜗牛“追逐”只是一个螺丝，每只蜗牛都被一只蜗牛“追逐”——蜗牛在开始时只做出一次选择，直到追逐结束才改变）。有那么一刻，蜗牛开始朝着它的目标移动（在任何时候都与它的目标完全成一条直线）。它一直持续到所有蜗牛在某一时刻都没有相互接触。为了更好地说明这种情况，请看下图：

[图解说明](http://i2.lulzimg.com/96537c41e5.jpg)

箭头显示如何选择目标，每只蜗牛。十字表示所有人相互接触的大致位置。你的任务是确定每只蜗牛的距离（所有蜗牛的距离都完全相同）。如果结果多于两位小数，则四舍五入小数点后第二位。

总之：

> 输入
> 
> 测试次数 T
> 
> 在接下来的 T 行 N
> 
> 输出

对于每次测试，追逐过程中每只蜗牛的距离（结果四舍五入到小数点后两位）。

样本输入：

> 5
> 
> 3
> 
> 5
> 
> 7
> 
> 9
> 
> 91

输出：

> 0.67
> 
> 1.45
> 
> 2.66
> 
> 4.27
> 
> 419.69

我的愿望是有人向我解释了如何从样本输入中获得所需的输出，并可能提出一些我可以使用的算法。

提前感谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:35:58.887

你需要一些物理在这里。从其中一只蚂蚁的参照系来看。所以一只蚂蚁总是朝着它移动。现在沿着加入蚂蚁的线取相对速度。这将是 v(1-cos(2*pi)/N)（解决这个问题。这很容易）

现在它们在位移等于边长时相遇。因此所用时间为 1/v(1-cos((2*pi)/n))。行驶距离为 v*t，因此距离为 1/(1-cos((2*pi)/N))。

您可以在此处查看直接公式。

[http://mathworld.wolfram.com/MiceProblem.html](http://mathworld.wolfram.com/MiceProblem.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:09:51.047

您也可以这样看：蜗牛从正多边形的顶点开始，因此，由于它们都以相同的速度移动并直接朝目标移动，因此它们将始终保持在正多边形的顶点。因此，从中心到蜗牛的射线与蜗牛运动方向之间的角度是恒定的。这意味着蜗牛的路径是[对数螺旋](http://en.wikipedia.org/wiki/Logarithmic_spiral)。

和 0`z(t) = e^{ct}`之间的对数螺旋部分的长度是。`|z| = 1``|c|/|Re c|`

对于给定的情况，`c = e^{2π i/N} - 1 = (cos(2π/N) - 1) + i*sin(2π/N)`是（按比例缩放）螺旋的参数。

现在`|c| = 2*sin(π/N)`和`|Re c| = 1 - cos(2π/N) = 2*sin²(π/N)`，所以如果起点和汇合点之间的距离是 1，那么每只蜗牛都会移动`1/sin(π/N)`。但条件是多边形的边是1，而不是中心和顶点之间的距离，所以我们必须缩放。方便的是，如果中心和顶点之间的距离为 1，则边长为`|c|`，因此行进距离的公式简化`1/|Re c| = 1/(1 - cos(2π/N)`为边长为`1`。^((1))

(¹) 当然，这与@sukun007 的结果完全相同，只是得出的结果不同。

# android - android设置中的内联ListPreference

> ID：10782374
> 
> 赞同：1
> 
> 时间：2012-05-28T09:35:09.903
> 
> 标签：android, settings, listpreference

如果我`ListPreference`在我的 settings.xml 中添加一个，框架会显示一个列表条目，单击该列表条目会显示选项列表。是否可以显示列表“内联”我的意思是无需用户单击条目即可查看列表？

我需要的是显示当前选择的选项，然后当用户单击它时，列出所有可用选项的列表，以允许用户选择另一个选项。

我找到[了这个例子](http://sagistech.blogspot.co.uk/2011/05/display-listpreference-value-in.html)，但我想知道我的 HTC 如何在辅助功能设置中显示组合（对于“触摸和保持延迟”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:42:29.343

您需要子类化`Preference`并使其表现得像 a`Spinner`或 a `ListView`。要么这样，要么您可以在 XML 中设置标签的`android:layout`属性`<Preference>`以返回包含`ListView`. 检查[这个问题](https://stackoverflow.com/questions/10651523/in-place-edittextpreference)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:47:35.763

使用`Spinner`小部件。在此处查看[文档。](http://developer.android.com/reference/android/widget/Spinner.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:38:44.680

查看这篇文章 [如何在首选项摘要中显示 Android 首选项的当前值？](https://stackoverflow.com/questions/531427/how-do-i-display-the-current-value-of-an-android-preference-in-the-preference-su)

最重要的是，您需要为首选项注册一个更改侦听器，并`ListPreference`使用列表中的选定值手动更新摘要（第二行）。该链接提供了有关如何操作的所有信息和示例。

另外，有些人报告说使用`android:summary="%s"`工作，但我从来没有让它在 2.x 中工作。

# vba - Word VBA - 替换页脚文本

> ID：10782385
> 
> 赞同：0
> 
> 时间：2012-05-28T09:36:01.500
> 
> 标签：vba, ms-word

我们有一个第 3 方 VBA 模块，我们正在对其进行调整以满足我们的需求。我们正在尝试做的是在 Word 文档的页脚中搜索文件路径，并将文件路径替换为（第三方生成的）文档 ID。

该代码实际上目前非常简单，几乎可以工作。我们用所需的文档 ID 覆盖文档页脚中的文件路径没有问题，但是目前我们的代码正在覆盖Word 文档页脚中的**所有**文本（页码、编写文档的人的首字母等）。我们只想要文件路径被替换。

任何人都可以建议我们在下面的代码中哪里出错了吗？该代码当前搜索现有 ID；如果找不到，但找到了它试图覆盖的文件路径；否则它会从头开始将文档 ID 写入文档：

```
Set tSearch = doc.Sections(1).Footers(wdHeaderFooterPrimary).Range.Find
tSearch.Text = idStr
If Not tSearch.Execute() Then
    'Current ID wasn't found; look for and replace an older one.
    tSearch.MatchWildcards = True
    tSearch.Text = "?:\*"
    If Not tSearch.Execute(ReplaceWith:=idStr) Then
        doc.Sections(1).PageSetup.DifferentFirstPageHeaderFooter = False
        doc.Sections(1).Footers(wdHeaderFooterPrimary).Range.Text = idStr
        doc.Sections(1).Footers(wdHeaderFooterPrimary).Range.Font.Size = 8
    End If
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:12:19.220

对于初学者来说，搜索可能总是会失败。查找文本需要更像：

```
tSearch.Text = "?:\\* " 
```

反斜杠是控制字符，需要用文字字符标记，偶然是反斜杠。此外，* 不是真正的“查找所有内容”符号，而是将其视为“查找所有内容，直到”。在这种情况下，是一个空格字符，但它可以是句点、行尾等。

# php - 无法使这个准备好的选择语句工作

> ID：10782387
> 
> 赞同：0
> 
> 时间：2012-05-28T09:36:06.590
> 
> 标签：php, mysql, prepared-statement

我对这个准备好的声明有一些真正的问题，我不知道为什么。我想知道是否有人可以帮助我。我知道我正在发送正确的信息，并且我知道信息存在于我要查找的位置，但是准备好的语句根本不返回任何内容。

我这样调用PHP文件

```
$.ajax({
            type: "POST",
            url: "include/main.php",
            data: {func:'LoadThisFile',thefile:NewItemFilename},
            success: function(server_response)
            {
                if(server_response)
                {
                    Doing stuff....
                }
                return;
            }
        }); 
```

这是准备好的声明

```
$stmt = $mysqli->prepare("SELECT `FileData` FROM `DataTable` WHERE `Filename`=?");
$stmt->bind_param("s", $tTheFilename);
$tTheFilename = $ThisFileName;
$stmt->execute();
$stmt->bind_result($result);
$stmt->fetch();
echo $result;
$stmt->close();
$mysqli->close(); 
```

我已经检查并再次检查：
发送到准备好的语句的变量 NewItemFilename 包含我期望它包含的内容。

数据库和表都存在，我试图返回的数据也存在，事实上，如果我在 phpMyAdmin 中使用完全相同的语句，以及我试图返回的文件名，我会从准备好的结果中得到我想要的结果陈述。

通过使用 echo 命令，我可以知道正在建立数据库连接，并且语句本身似乎没有抛出任何错误。除了没有返回任何内容之外，一切似乎都正常工作。

谁能告诉我我做错了什么？

非常感谢，BS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:48:37.940

必须存储执行结果。

试试 $stmt->store_result(); 在 $stmt->fetch(); 之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:45:55.950

你没有展示你是如何初始化`$tTheFilename`的。假设它的内容是正确的，你应该绑定参数

```
$stmt->bindParams(1, $tTheFilename); 
```

[http://php.net/manual/de/pdostatement.bindparam.php](http://php.net/manual/de/pdostatement.bindparam.php)

# ios - iOS 从将重定向到文件的 URL 下载文件

> ID：10782388
> 
> 赞同：0
> 
> 时间：2012-05-28T09:36:14.437
> 
> 标签：ios, xcode, nsurlconnection, nsurl, nsurlrequest

我已经尝试了 2 天，但无法解决这个问题。

基本上我有一个 URL，我尝试使用 ASIHTTPRequest 下载与之关联的文件，但我拥有的 URL 不是文件本身的链接，但该 URL 将重定向到实际文件的链接。我尝试将该链接提供给 ASIHTTPRequest 以供下载，但没有。所以我认为我必须以某种方式获取重定向的 url 并将其提供给 ASIHTTPRequest 以下载文件。

我怎样才能做到这一点？

感谢大家阅读：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:05:24.750

您实现了 ASIHTTPRequest 的这个委托方法 **- (void)request:(ASIHTTPRequest *)request willRedirectToURL:(NSURL *)newURL**方法被调用，但是在请求没有像我假设的那样重定向之后。您必须自己重定向请求：

```
 - (void)request:(ASIHTTPRequest *)request willRedirectToURL:(NSURL *)newURL 
  {
   // modify request here, e.g. set request headers again...
   [request redirectToURL:newURL];
  } 
```

# oracle - 带有.a rc扩展名的存档文件在oracle数据库中增长非常快

> ID：10782391
> 
> 赞同：1
> 
> 时间：2012-05-28T09:36:17.863
> 
> 标签：oracle, archive

我正在使用 Linux 操作系统。我的应用程序在 Java 上运行，Oracle 是我的数据库。在我的`/ora2/DB/archive`文件夹中，我写入了越来越多的日志文件，这些文件现在占据了文件系统的 85%。

我有很多 .arc 文件，`/ora2/DB/archive`其中的名称为`DB1_5218.arc`etc。每个文件至少占用 20 MB。我一天至少写了 100 个 .arc 文件。

是什么让 .arc 文件被写入？

为什么存档文件夹中有如此大量的文件？

我是 oracle 日志的新手，是否为数据库操作运行了太多线程并且数据库最终未提交、关闭或回滚会导致这些文件被写入存档中？

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-10T12:15:08.863

通过备份存档文件，您可以从系统中删除旧存档文件并为新存档留出一些空间。但是，从硬盘中删除是不够的，您应该使用`RMAN`.

1.  从硬盘中删除它们。
2.  连接`RMAN>`交叉检查归档日志全部；
3.  `RMAN>`全部删除过期的归档日志；这样，您就可以为 oracle 提供更多空间来编写新的存档文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:13:31.810

这里的文档中有非常完整的解释：http: [//docs.oracle.com/cd/B19306_01/server.102/b14231/archredo.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14231/archredo.htm)

简而言之，这些是数据库更改生成的重做日志文件的备份。它们用于从介质故障中恢复数据库。它们也可以被另一个充当故障转移的数据库“消耗”。

# vba - 弹出 Excel 状态栏？

> ID：10782394
> 
> 赞同：16
> 
> 时间：2012-05-28T09:36:28.483
> 
> 标签：vba, excel, statusbar, excel-2010

我正在开发一个需要很长时间才能运行的 excel 应用程序，所以最好弹出一个进度条并给出一些进度指示。我正在查看`Statusbar`Excel 中的属性，它似乎涵盖了我需要的内容，只是它不是很明显，即左下角的一个很小的通知，如果我没有预料到我不会注意到我觉得很不满意。

有没有办法让状态栏在新样式窗口中弹出，`MsgBox`类似于您在 Windows 上进行文件传输时所期望的？[像此示例](http://support.microsoft.com/kb/211736)中实际显示在 Excel 工作表中的进度条类型对象并不理想，我正在寻找更好的解决方案。

我在 Windows 上使用 Office 2010。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-28T16:06:11.303

我刚刚为您创建了 4 个进度条。随便挑吧：）

饼图进度条基于`Stephen Bullen's PastePicture code`. 其余的进度条很容易创建。最后我附上了一个示例文件，您可以下载和测试。

**几个快照**

![在此处输入图像描述](../Images/76be2edd11797aa651755226f470753c.png)

![在此处输入图像描述](../Images/3dfd8ed1630d1864237156f8f911c533.png)

![在此处输入图像描述](../Images/9af7170fd72fe12f8b4831d980c12b90.png)

**代码**

*在用户表单中*

```
Option Explicit

Private Sub UserForm_Activate()
    Dim i As Long, j As Long, k As Long, l As Long, m As Long

    j = 0: k = 0: l = 500: m = 100

    For i = 1 To 11
        '~~> Pie Progressbar Stephen Bullen's PastePicture Function
        Sheets("Sheet2").Shapes(i).CopyPicture
        Set Me.Image1.Picture = PastePicture(xlPicture)
        Me.Caption = "Progress - " & j & " %"

        '~~> 2nd Progressbar
        Label1.Width = k
        Label1.BackColor = &HFF8080
        TextBox1.Text = j & " %"

        '~~> 3rd Progressbar
        Select Case j
            Case 10: CommandButton1.Visible = True
            Case 20: CommandButton2.Visible = True
            Case 30: CommandButton3.Visible = True
            Case 40: CommandButton4.Visible = True
            Case 50: CommandButton5.Visible = True
            Case 60: CommandButton6.Visible = True
            Case 70: CommandButton7.Visible = True
            Case 80: CommandButton8.Visible = True
            Case 90: CommandButton9.Visible = True
            Case 100: CommandButton10.Visible = True
        End Select

        '~~> 4th Progressbar (Reverse)
        Label2.Width = l
        Label2.BackColor = &HC000&
        TextBox2.Text = m & " % Left"

        Wait 5

        j = j + 10: k = k + 50
        l = l - 50: m = m - 10
    Next i

    Unload Me
End Sub

Private Sub Wait(ByVal nSec As Long)
    nSec = nSec + Timer
    While nSec > Timer
        DoEvents
    Wend
End Sub 
```

*在模块中（Stephen Bullen 的 PastePicture 函数）*

```
Option Explicit

'***************************************************************************
'*
'* MODULE NAME:     Paste Picture
'* AUTHOR & DATE:   STEPHEN BULLEN, Office Automation Ltd
'*                  15 November 1998
'*
'* CONTACT:         Stephen@oaltd.co.uk
'* WEB SITE:        http://www.oaltd.co.uk
'*
'* DESCRIPTION:     Creates a standard Picture object from whatever is on the clipboard.
'*                  This object can then be assigned to (for example) and Image control
'*                  on a userform.  The PastePicture function takes an optional argument of
'*                  the picture type - xlBitmap or xlPicture.
'*
'*                  The code requires a reference to the "OLE Automation" type library
'*
'*                  The code in this module has been derived from a number of sources
'*                  discovered on MSDN.
'*
'*                  To use it, just copy this module into your project, then you can use:
'*                      Set Image1.Picture = PastePicture(xlPicture)
'*                  to paste a picture of whatever is on the clipboard into a standard image control.
'*
'* PROCEDURES:
'*   PastePicture   The entry point for the routine
'*   CreatePicture  Private function to convert a bitmap or metafile handle to an OLE reference
'*   fnOLEError     Get the error text for an OLE error code
'***************************************************************************

Option Compare Text

''' User-Defined Types for API Calls

'Declare a UDT to store a GUID for the IPicture OLE Interface
Private Type GUID
    Data1 As Long
    Data2 As Integer
    Data3 As Integer
    Data4(0 To 7) As Byte
End Type

'Declare a UDT to store the bitmap information
Private Type uPicDesc
    Size As Long
    Type As Long
    hPic As Long
    hPal As Long
End Type

'''Windows API Function Declarations

'Does the clipboard contain a bitmap/metafile?
Private Declare Function IsClipboardFormatAvailable Lib "user32" (ByVal wFormat As Integer) As Long

'Open the clipboard to read
Private Declare Function OpenClipboard Lib "user32" (ByVal hwnd As Long) As Long

'Get a pointer to the bitmap/metafile
Private Declare Function GetClipboardData Lib "user32" (ByVal wFormat As Integer) As Long

'Close the clipboard
Private Declare Function CloseClipboard Lib "user32" () As Long

'Convert the handle into an OLE IPicture interface.
Private Declare Function OleCreatePictureIndirect Lib "olepro32.dll" (PicDesc As uPicDesc, RefIID As GUID, ByVal fPictureOwnsHandle As Long, IPic As IPicture) As Long

'Create our own copy of the metafile, so it doesn't get wiped out by subsequent clipboard updates.
Declare Function CopyEnhMetaFile Lib "gdi32" Alias "CopyEnhMetaFileA" (ByVal hemfSrc As Long, ByVal lpszFile As String) As Long

'Create our own copy of the bitmap, so it doesn't get wiped out by subsequent clipboard updates.
Declare Function CopyImage Lib "user32" (ByVal handle As Long, ByVal un1 As Long, ByVal n1 As Long, ByVal n2 As Long, ByVal un2 As Long) As Long

'The API format types we're interested in
Const CF_BITMAP = 2
Const CF_PALETTE = 9
Const CF_ENHMETAFILE = 14
Const IMAGE_BITMAP = 0
Const LR_COPYRETURNORG = &H4

''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''' Subroutine: PastePicture
'''
''' Purpose:    Get a Picture object showing whatever's on the clipboard.
'''
''' Arguments:  lXlPicType - The type of picture to create.  Can be one of:
'''                          xlPicture to create a metafile (default)
'''                          xlBitmap to create a bitmap
'''
''' Date        Developer           Action
''' --------------------------------------------------------------------------
''' 30 Oct 98   Stephen Bullen      Created
''' 15 Nov 98   Stephen Bullen      Updated to create our own copies of the clipboard images
'''

Function PastePicture(Optional lXlPicType As Long = xlPicture) As IPicture

'Some pointers
Dim h As Long, hPicAvail As Long, hPtr As Long, hPal As Long, lPicType As Long, hCopy As Long

'Convert the type of picture requested from the xl constant to the API constant
lPicType = IIf(lXlPicType = xlBitmap, CF_BITMAP, CF_ENHMETAFILE)

'Check if the clipboard contains the required format
hPicAvail = IsClipboardFormatAvailable(lPicType)

If hPicAvail <> 0 Then
    'Get access to the clipboard
    h = OpenClipboard(0&)

    If h > 0 Then
        'Get a handle to the image data
        hPtr = GetClipboardData(lPicType)

        'Create our own copy of the image on the clipboard, in the appropriate format.
        If lPicType = CF_BITMAP Then
            hCopy = CopyImage(hPtr, IMAGE_BITMAP, 0, 0, LR_COPYRETURNORG)
        Else
            hCopy = CopyEnhMetaFile(hPtr, vbNullString)
        End If

        'Release the clipboard to other programs
        h = CloseClipboard

        'If we got a handle to the image, convert it into a Picture object and return it
        If hPtr <> 0 Then Set PastePicture = CreatePicture(hCopy, 0, lPicType)
    End If
End If

End Function

''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''' Subroutine: CreatePicture
'''
''' Purpose:    Converts a image (and palette) handle into a Picture object.
'''
'''             Requires a reference to the "OLE Automation" type library
'''
''' Arguments:  None
'''
''' Date        Developer           Action
''' --------------------------------------------------------------------------
''' 30 Oct 98  Stephen Bullen      Created
'''

Private Function CreatePicture(ByVal hPic As Long, ByVal hPal As Long, ByVal lPicType) As IPicture

' IPicture requires a reference to "OLE Automation"
Dim r As Long, uPicInfo As uPicDesc, IID_IDispatch As GUID, IPic As IPicture

'OLE Picture types
Const PICTYPE_BITMAP = 1
Const PICTYPE_ENHMETAFILE = 4

' Create the Interface GUID (for the IPicture interface)
With IID_IDispatch
    .Data1 = &H7BF80980
    .Data2 = &HBF32
    .Data3 = &H101A
    .Data4(0) = &H8B
    .Data4(1) = &HBB
    .Data4(2) = &H0
    .Data4(3) = &HAA
    .Data4(4) = &H0
    .Data4(5) = &H30
    .Data4(6) = &HC
    .Data4(7) = &HAB
End With

' Fill uPicInfo with necessary parts.
With uPicInfo
    .Size = Len(uPicInfo)                                                   ' Length of structure.
    .Type = IIf(lPicType = CF_BITMAP, PICTYPE_BITMAP, PICTYPE_ENHMETAFILE)  ' Type of Picture
    .hPic = hPic                                                            ' Handle to image.
    .hPal = IIf(lPicType = CF_BITMAP, hPal, 0)                              ' Handle to palette (if bitmap).
End With

' Create the Picture object.
r = OleCreatePictureIndirect(uPicInfo, IID_IDispatch, True, IPic)

' If an error occured, show the description
If r <> 0 Then Debug.Print "Create Picture: " & fnOLEError(r)

' Return the new Picture object.
Set CreatePicture = IPic

End Function

''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
''' Subroutine: fnOLEError
'''
''' Purpose:    Gets the message text for standard OLE errors
'''
''' Arguments:  None
'''
''' Date        Developer           Action
''' --------------------------------------------------------------------------
''' 30 Oct 98   Stephen Bullen      Created
'''

Private Function fnOLEError(lErrNum As Long) As String

'OLECreatePictureIndirect return values
Const E_ABORT = &H80004004
Const E_ACCESSDENIED = &H80070005
Const E_FAIL = &H80004005
Const E_HANDLE = &H80070006
Const E_INVALIDARG = &H80070057
Const E_NOINTERFACE = &H80004002
Const E_NOTIMPL = &H80004001
Const E_OUTOFMEMORY = &H8007000E
Const E_POINTER = &H80004003
Const E_UNEXPECTED = &H8000FFFF
Const S_OK = &H0

Select Case lErrNum
Case E_ABORT
    fnOLEError = " Aborted"
Case E_ACCESSDENIED
    fnOLEError = " Access Denied"
Case E_FAIL
    fnOLEError = " General Failure"
Case E_HANDLE
    fnOLEError = " Bad/Missing Handle"
Case E_INVALIDARG
    fnOLEError = " Invalid Argument"
Case E_NOINTERFACE
    fnOLEError = " No Interface"
Case E_NOTIMPL
    fnOLEError = " Not Implemented"
Case E_OUTOFMEMORY
    fnOLEError = " Out of Memory"
Case E_POINTER
    fnOLEError = " Invalid Pointer"
Case E_UNEXPECTED
    fnOLEError = " Unknown Error"
Case S_OK
    fnOLEError = " Success!"
End Select

End Function 
```

**样本文件**

[https://www.dropbox.com/s/5k9f79yewqehdup/progressbar%20example.xlsm?dl=0](https://www.dropbox.com/s/5k9f79yewqehdup/progressbar%20example.xlsm?dl=0)

# session - 休息 PHP Json 身份验证

> ID：10782395
> 
> 赞同：0
> 
> 时间：2012-05-28T09:36:33.433
> 
> 标签：session, rest, state

如何在 PHP 中不使用 cookie/会话协议构建安全的 HTTP 身份验证。我知道我可以使用 HTTP 摘要，但是如何在我的 RESTFull 后端实现它，它究竟是如何工作的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:38:51.357

您可以使用基于令牌的身份验证。

1.  客户端：发送用户名、密码。
2.  服务器：发回一个令牌。
3.  然后使用令牌进行身份验证。

# javascript - 如何在 Three.js 中用 ShaderMaterial 替换 Collada 导入的纹理？

> ID：10782398
> 
> 赞同：2
> 
> 时间：2012-05-28T09:36:47.080
> 
> 标签：javascript, webgl, three.js, collada

有没有办法替换通过 Three.js 库中的 Collada 加载器导入的简单 3D 模型中的所有纹理？

我想要完成的是通过 ShaderMaterial 将颜色、镜面反射和法线贴图应用于模型，方法是指向具有模型材质名称但添加了“-color”、“-normal”和“-spec”字样的新文件：

“brochureFrontCover”->“brochureFrontCover-color.jpg”、“brochureFrontCover-normal.jpg”、“brochureFrontCover-spec.jpg”

如果有好心人能告诉我这样的功能应该是什么样子，我将不胜感激。

脚本： [http ://dev.printhouse.co.uk/uv-simulator/j/Brochure.js](http://dev.printhouse.co.uk/uv-simulator/j/Brochure.js)

Collada 模型： [http ://dev.printhouse.co.uk/uv-simulator/m/Brochure.dae](http://dev.printhouse.co.uk/uv-simulator/m/Brochure.dae)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:16:40.850

我认为应该是这样的：

```
THREE.SceneUtils.traverseHierarchy( dae, function ( child ) {

    if ( child.material ) {

        var shader = THREE.ShaderUtils.lib[ "normal" ];
        var uniforms = THREE.UniformsUtils.clone( shader.uniforms );

        uniforms[ "tDiffuse" ].texture = THREE.ImageUtils.loadTexture( child.material.name + "-color.jpg" );
        uniforms[ "tNormal" ].texture = THREE.ImageUtils.loadTexture( child.material.name + "-normal.jpg" );
        uniforms[ "tSpecular" ].texture = THREE.ImageUtils.loadTexture( child.material.name + "-spec.jpg" );

        uniforms[ "enableDiffuse" ].value = true;
        uniforms[ "enableSpecular" ].value = true;

        child.geometry.computeTangents();

        child.material = new THREE.ShaderMaterial( {
            uniforms: uniforms,
            vertexShader: shader.vertexShader,
            fragmentShader: shader.fragmentShader,
            lights: true
        } );

    }

} ); 
```

如果您需要调整制服，[这个例子应该是一个很好的参考。](http://mrdoob.github.com/three.js/examples/webgl_materials_normalmap2.html)

# r - 显示 R 中函数的源代码

> ID：10782403
> 
> 赞同：21
> 
> 时间：2012-05-28T09:37:00.107
> 
> 标签：r, open-source, statistics, machine-learning

我可以使用`lm`或`class::knn`查看源代码，但我未能显示 princomp 的代码。这个函数（或其他东西）是用 R 或其他字节码编写的吗？我也无法使用[如何在包中显示 S4 函数的源代码？](https://stackoverflow.com/questions/5937832/r-show-source-code-of-an-s4-function-in-a-package). 谢谢你的帮助。

```
> princomp
function (x, ...) 
UseMethod("princomp")
<bytecode: 0x9490010>
<environment: namespace:stats> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-28T12:04:48.087

您必须使用该功能使用的相应方法来询问。尝试这个：

```
princomp # this is what you did without having a good enough answer
methods(princomp) # Next step, ask for the method: 'princomp.default'
getAnywhere('princomp.default') # this will show you the code 
```

您正在寻找的代码是：

```
function (x, cor = FALSE, scores = TRUE, covmat = NULL, subset = rep(TRUE, 
    nrow(as.matrix(x))), ...) 
{
    cl <- match.call()
    cl[[1L]] <- as.name("princomp")
    if (!missing(x) && !missing(covmat)) 
        warning("both 'x' and 'covmat' were supplied: 'x' will be ignored")
    z <- if (!missing(x)) 
        as.matrix(x)[subset, , drop = FALSE]
    if (is.list(covmat)) {
        if (any(is.na(match(c("cov", "n.obs"), names(covmat))))) 
            stop("'covmat' is not a valid covariance list")
        cv <- covmat$cov
        n.obs <- covmat$n.obs
        cen <- covmat$center
    }
    else if (is.matrix(covmat)) {
        cv <- covmat
        n.obs <- NA
        cen <- NULL
    }
    else if (is.null(covmat)) {
        dn <- dim(z)
        if (dn[1L] < dn[2L]) 
            stop("'princomp' can only be used with more units than variables")
        covmat <- cov.wt(z)
        n.obs <- covmat$n.obs
        cv <- covmat$cov * (1 - 1/n.obs)
        cen <- covmat$center
    }
    else stop("'covmat' is of unknown type")
    if (!is.numeric(cv)) 
        stop("PCA applies only to numerical variables")
    if (cor) {
        sds <- sqrt(diag(cv))
        if (any(sds == 0)) 
            stop("cannot use cor=TRUE with a constant variable")
        cv <- cv/(sds %o% sds)
    }
    edc <- eigen(cv, symmetric = TRUE)
    ev <- edc$values
    if (any(neg <- ev < 0)) {
        if (any(ev[neg] < -9 * .Machine$double.eps * ev[1L])) 
            stop("covariance matrix is not non-negative definite")
        else ev[neg] <- 0
    }
    cn <- paste("Comp.", 1L:ncol(cv), sep = "")
    names(ev) <- cn
    dimnames(edc$vectors) <- if (missing(x)) 
        list(dimnames(cv)[[2L]], cn)
    else list(dimnames(x)[[2L]], cn)
    sdev <- sqrt(ev)
    sc <- if (cor) 
        sds
    else rep(1, ncol(cv))
    names(sc) <- colnames(cv)
    scr <- if (scores && !missing(x) && !is.null(cen)) 
        scale(z, center = cen, scale = sc) %*% edc$vectors
    if (is.null(cen)) 
        cen <- rep(NA_real_, nrow(cv))
    edc <- list(sdev = sdev, loadings = structure(edc$vectors, 
        class = "loadings"), center = cen, scale = sc, n.obs = n.obs, 
        scores = scr, call = cl)
    class(edc) <- "princomp"
    edc
}
<environment: namespace:stats> 
```

我想这就是你所要求的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T09:37:00.370

```
> stats:::princomp.default 
```

我在这个中找到了它：[查看 R 中的源代码](https://stackoverflow.com/questions/3485228/view-source-code-in-r)

# c# - 通过自动化发送邮件（c#）[带附件的邮件]

> ID：10782406
> 
> 赞同：0
> 
> 时间：2012-05-28T09:37:11.900
> 
> 标签：c#, selenium

我在 Visual Studio(c#) 中使用 selenium RC 运行了一些录制的脚本。

我很容易收到这些脚本的报告。（我将所有结果保存在一个文本文件中）

现在，我想通过自动化将这些报告以邮件的形式发送给客户。

如何配置这些设置以及需要什么？

生成的所有报告都应交付给客户。

建议存在示例的站点或链接。

还提供有关配置和设置的步骤。

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T11:14:06.370

这比 Selenium 问题更基于 C#。

有一个完整的网站专门用于详细解释如何使用 C# 和 System.Net.Mail 命名空间发送电子邮件：

[http://www.systemnetmail.com/](http://www.systemnetmail.com/)

一个简单的例子：

```
using System.Net;
using System.Net.Mail;

var fromAddress = new MailAddress("from@gmail.com", "From Name");
var toAddress = new MailAddress("to@example.com", "To Name");
string fromPassword = "fromPassword";
string subject = "Subject";
string body = "Body";

var smtp = new SmtpClient
           {
               Host = "smtp.gmail.com",
               Port = 587,
               EnableSsl = true,
               DeliveryMethod = SmtpDeliveryMethod.Network,
               UseDefaultCredentials = false,
               Credentials = new NetworkCredential(fromAddress.Address, fromPassword)
           };
using (var message = new MailMessage(fromAddress, toAddress)
                     {
                         Subject = subject,
                         Body = body
                     })
{
    smtp.Send(message);
} 
```

您需要做的就是通过阅读您提到的“报告”的内容来构建消息正文。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T12:37:12.930

谢谢你的代码。

我找到了一些代码来发送带有附件的电子邮件。

```
using System.Net;
using System.Net.Mail;

public void email_send()
    {
        MailMessage mail = new MailMessage();
        SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");
        mail.From = new MailAddress("your mail@gmail.com");
        mail.To.Add("to_mail@gmail.com");
        mail.Subject = "Test Mail - 1";
        mail.Body = "mail with attachment";

        System.Net.Mail.Attachment attachment;
        attachment = new System.Net.Mail.Attachment("c:/textfile.txt");
        mail.Attachments.Add(attachment);

        SmtpServer.Port = 587;
        SmtpServer.Credentials = new System.Net.NetworkCredential("your mail@gmail.com", "your password");
        SmtpServer.EnableSsl = true;

        SmtpServer.Send(mail);

    } 
```

阅读[使用 SmtpClient 发送电子邮件以](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)获取更多信息。

谢谢..

# php - PHP：将变量传递给 file_get_contents()

> ID：10782407
> 
> 赞同：1
> 
> 时间：2012-05-28T09:37:20.703
> 
> 标签：php

有没有办法让这成为可能？

```
// file.php
echo $foo; 
```

然后在

```
// test.php
$foo = 'bar';
echo file_get_contents('file.php'); 
```

test.php 的输出应该是“bar”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:41:55.777

我会这样做：

```
// file.php
function outputFoo($foo) {
  echo $foo;
}

// test.php
$foo = 'bar';
include 'file.php';
outputFoo($foo); 
```

但实际上，您的情况实际需要的是：

```
// file.php
echo $foo;

// test.php
$foo = 'bar';
include 'file.php'; 
```

因为 file.php 也可以访问您的`$foo`-variable。（这只适用于 file.php 和 test.php 在同一个域中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:50:39.380

我用：

```
$foo = 'bar';
require_once('./file.php'); 
```

而在 file.php 它只是：

```
echo $foo; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:39:17.283

```
ob_start();
include 'file.php';
echo ob_get_clean(); 
```

但实际上，这似乎是一件相当荒谬的事情。如果您只想`file.php`评估并让它输出其内容，只需`include`文件。

# c - 在 C 中读取进程内存

> ID：10782408
> 
> 赞同：0
> 
> 时间：2012-05-28T09:37:22.277
> 
> 标签：c, windows

我尝试从我编写的进程内存中读取，我的代码是：

```
 #include <stdio.h>
 void main()
 {
    int x,y;
    scanf("%d",&x);
    scanf("%d",&y);
    x = y;
    scanf("%d",&y);
    printf("%d",x);
    scanf("%d",&y);
 } 
```

好的，我在作弊引擎中找到了地址，并成功编辑等等，我在谷歌搜索了至少 5 个小时，找到了很多代码，我的意思是看不懂。有效的代码，即使在进程关闭时也能运行 -_-' 有人可以帮助我构建一个从内存中的地址读取值的典型代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:40:16.223

由于平台是 Windows，请参见 WINAPI 函数[ReadProcessMemory()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553%28v=vs.85%29.aspx)。

发布的代码是从标准输入读取并写入标准输出，它没有尝试读取内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:40:09.740

您的代码没有做任何与您在问题文本中所说的内容相似的事情，这使得这非常混乱。

[在大多数实现虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)和[内存保护](http://en.wikipedia.org/wiki/Memory_protection)的现代操作系统中，您无法轻松读取其他进程的内存。

即使您有一个进程打印出其中一个变量的地址，该地址也是*virtual*，因此如果您的进程尝试访问同一虚拟地址的内存，它将*不会*访问相同的物理内存。

# excel - 通过 Erlang 编写 Excel 文件

> ID：10782409
> 
> 赞同：3
> 
> 时间：2012-05-28T09:37:22.277
> 
> 标签：excel, erlang

我正在尝试通过 erlang 编写 excel 文件。我使用以下代码编写excel文件

```
-module(excel).
-export([start/1]).

start(Val)->
        case  file:open("office-test.xls",[append]) of
        {ok,Fd} -> io:format(" file created"),
                io:fwrite(Fd,"~p\t~p\t~p~n", ["Name","Date","Number"]),
                export(Fd,Val),
                file:close(Fd);
        {error,_} ->  io:format("~nerror in creation of file")
        end.

export(_,0)->
        ok;

export(Fd,Val) ->
        io:fwrite(Fd, "~p\t~p\t~p\t~n" ,["B123","2012/10/11 12:12:12","val"++integer_to_list(Val)]),
        export(Fd,Val-1). 
```

它能够成功写入，但是当我在 LibreOffice 中打开时。我弹出一个窗口询问分隔的数据。我不希望最终用户处理它。

1）有什么办法可以让office（ms office或libre office）自动解析它。？？

2）还有其他方法可以通过erlang编写excel表吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T05:53:36.937

你必须写一个`CSV , Comma delimited text file`. 您必须使用`.csv` 文件扩展名保存它。您逐行写入此文件。确保每行以 . 结尾`\r\n`。这个文件可以很好地从 excel 中读取。

您确保标题出现在第一行，如下所示：

```
姓名、性别、项目\r\n
Joe Armstrong，男，二郎\r\n
Klacke Wickstrom,男性,Yaws\r\n
Rusty R,男性,氮气\r\n
比尔·盖茨，男，\r\n
Muzaaya Joshua，男，ZeePay\r\n

```

此外，文件编码也很重要。ANSI编码更好。您也可以通过首先将文件转换/重新保存为`.csv , comma delimited file`使用 excel 来处理 Erlang 中的 Excel 文件。
然后用这个**`csv file parser module`**

```
%%% --- Erlang 中的 csv 解析器。------
%%% 帮助处理大型 csv 文件而不将它们加载到
％％％ 记忆。类似于 SAX 的 xml 解析技术

-模块（csv）。
-编译（export_all）。

解析（文件路径，ForEachLine，不透明）->
    案例文件：open(FilePath,[read]) of
        {_,S} ->
            start_parsing(S,ForEachLine,不透明);
        错误 -> 错误
    结尾。

start_parsing(S,ForEachLine,不透明)->
    Line = io:get_line(S,''), 
    case Line of
        eof -> {ok，不透明}；
        "\n" -> start_parsing(S,ForEachLine,Opaque);
        "\r\n" -> start_parsing(S,ForEachLine,Opaque);
        _ ->
            NewOpaque = ForEachLine(scanner(clean(clean(Line,10),13)),Opaque),
            start_parsing(S,ForEachLine,NewOpaque)
    结尾。

扫描(InitString,Char,[Head|Buffer]) 当 Head == Char ->
    {lists:reverse(InitString),Buffer};
当 Head =/= Char -> 时扫描(InitString,Char,[Head|Buffer])
    scan([Head|InitString],Char,Buffer);
当 Buffer == [] -> {done,lists:reverse(X)} 时扫描(X,_,Buffer)。
扫描仪（文本）-> 列表：反向（traverse_text（文本，[]））。

traverse_text(Text,Buff)->
    case scan("",$,,Text) of
        {done,SomeText}-> [SomeText|Buff];
        {Value,Rem}-> traverse_text(Rem,[Value|Buff])
    结尾。

清洁（文本，字符）->
    字符串：条（字符串：条（文本，右，字符），左，字符）。

```

如何使用此模块从 Excel 解析 csv 文件。上面我们简单的 csv 文件的示例，在 shell 中

```
C:\Windows\System32>erl
Eshell V5.9（使用 ^G 中止）
1> ForEachLine = fun(Line,Buffer)-> io:format("Line: ~p~n",[Line]),缓冲结束。
#Fun<erl_eval.12.111823515>
2> 初始缓冲区 = []。
[]
3> csv:parse("E:/erlang_projects.csv",ForEachLine,InitialBuffer)。
行：[“姓名”，“性别”，“项目”]
行：[“乔·阿姆斯特朗”，“男”，“二郎”]
线路：["Klacke Wickstrom","Male","Yaws"]
行：["Rusty R","Male","Nitrogen"]
行：[“比尔盖茨”，“男”，[]]
线路：["Muzaaya Joshua","Male","ZeePay"]
{行，[]}
4> ForEachLine2 = fun(Line,Buffer)-> io:format("Line: ~p~n",[Line]),[Line|Buffer] end.
#Fun<erl_eval.12.111823515>
5> csv:parse("E:/erlang_projects.csv",ForEachLine2,InitialBuffer)。
行：[“姓名”，“性别”，“项目”]
行：[“乔·阿姆斯特朗”，“男”，“二郎”]
线路：["Klacke Wickstrom","Male","Yaws"]
行：["Rusty R","Male","Nitrogen"]
行：[“比尔盖茨”，“男”，[]]
线路：["Muzaaya Joshua","Male","ZeePay"]
{好的，[[“Muzaaya Joshua”，“Male”，“ZeePay”]，
     [“比尔盖茨”，“男”，[]]，
     [“生锈的 R”，“男性”，“氮气”]，
     [“Klacke Wickstrom”，“男性”，“Yaws”]，
     [“乔·阿姆斯特朗”，“男”，“二郎”]，
     ["姓名","性别","项目"]]}
6>

```

因此，您稍后也可以使用此模块从 Excel 解析您的 csv 文件。现在，只需学习如何逐行编写 csv 文件，阅读文件章节中的实用 Erlang Programming Book 或 erlang 文档。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T10:19:26.250

以下链接中的以下信息，它直接创建excel数据并满足您的要求：

[http://www.erlang.org/documentation/doc-5.0.1/lib/comet-1.0/doc/html/ch_examples.html](http://www.erlang.org/documentation/doc-5.0.1/lib/comet-1.0/doc/html/ch_examples.html)

3 个例子

Comet 3.1 Comet 实例使用详解

本章详细介绍了 Comet 使用的一些示例；最简单的在前，最先进的在后。

给出了四个例子：

```
Browsing to a specified address

Opening Excel, dumping some data, showing a graph

Calling a function in a C++ library 
```

这些源代码包含在发行版中，位于 comet/examples 目录中。

缩写 VB 和 VBA 用于 Visual Basic 和 Visual Basic for Applications。3.2 要求

第一个示例要求安装 Internet Explorer 4.0 或更高版本。

示例 2 需要 Office 97 或 Office 2000 中的 Excel。

最后一个示例可以按原样运行，但要修改 COM 库，需要 Visual C++ 5.0 或更高版本。3.3 示例一，打开浏览器到特定的URL

此示例说明如何打开浏览器 (Internet Explorer)，并通过它导航到特定地址。

为了获得浏览器的 COM 接口，我们使用 OLE/COM Object Viewer 等工具，该工具包含在 Microsoft 的 Windows Platform SDK、Visual C 和 Visual Basic 中。

检查 Internet Explorer 的界面，我们发现了一些我们需要的东西。首先，我们需要类 ID。然后我们需要创建和使用浏览器所需的函数和属性的名称和参数列表。

由于启动浏览器不是性能关键任务，我们可以使用 Erlang 中最慢和最安全的方式来完成它。这意味着将 erl_com 作为端口进程启动，并使用 IDispatch 接口访问 Internet Explorer。

尽管 Internet Explorer 提供了双重接口（即同时具有方法表和 IDispatch 接口的接口），但 IDispatch 接口更安全且速度更慢。给它一个错误的参数列表，返回一个错误代码，而不是核心转储。

要使用 COM 对象，我们必须启动服务器（它启动端口）并启动一个线程。然后我们可以创建对象，并用它做我们想做的事。

为了能够使用常量，我们将源代码放在一个模块中，而不是在 Erlang shell 中以交互方式调用它。

```
-module(win_browse).

-include("erl_com.hrl").

-export([open/1, example/0]).
open(Url) ->
    {ok, Pid}= erl_com:start_process(),
    T= erl_com:new_thread(Pid),
    Obj= erl_com:create_dispatch(T, "InternetExplorer.Application", 
                                 ?CLSCTX_LOCAL_SERVER),
    erl_com:invoke(Obj, "Navigate", [Url]),
    erl_com:property_put(Obj, "Visible", true),
    Obj.

example() ->
    open("www.erlang.org"). 
```

Internet Explorer 应用程序有一个调度接口，它实现了 IWebBrowser 接口。有很多方法。我们使用 Navigate 方法打开特定的 URL，并使用 Visible 属性显示浏览器。（默认情况下，浏览器是不可见的，就像从 COM 中使用的其他 Microsoft 程序一样。） 3.4 示例二，在 Excel 中制作图形

在此示例中，我们还启动了 Excel 应用程序的一个实例。我们使用程序名称“Excel.Application”，可以使用它来代替类 ID。这将选择已安装的 Excel；Office 97 或 Office 2000 中的 Excel。

使用 Excel 执行任何操作的最简单方法是首先录制 VBA 宏。生成的 VBA 宏如图 1 所示。这个宏被手动重写了一点，以使其更简单。我们试了一下，结果如图2所示。

现在，要在 Erlang 中执行此操作，我们有两个选择：或者我们可以使用来自 Erlang 的 COM 将 VB 代码作为子程序调用，或者我们可以在 Erlang 中重新实现 VB 宏。由于这是用户指南，我们当然选择后者。

要访问接口，我们使用 OLE/COM 对象查看器，并获取 Excel 的 IDL。有一个 Excel 类型库可用。我们不想要所有这些，因为它很大。我们只选择需要的接口，即_Application、_Graph 和_Range。我们还提取了一些枚举，它们是用于 COM 调用中的参数的常量。

从 Erlang 调用 COM 时有一些棘手的问题

首先，VB 隐式处理 COM 接口的释放。Erlang 和 COM 不这样做，因此我们必须为我们获得的每个接口调用 erl_com:release/1。例如，我们从属性 _Application.Range 获得的每个 _Range 都必须被释放。我们在辅助函数 data_to_column/3 中执行此操作。

其次，当一个接口返回时，它作为一个整数返回。这个整数实际上是 erl_com_drv 端口程序中包含的接口数组的索引。当调用 erl_com 中的函数时，我们必须同时提供 pid 和线程号，因此有一个辅助函数 erl_com::package_interface/2，它将接口整数与给定线程或其他接口重新打包。但是，当将接口作为参数提供给 COM 函数（通过 erl_com:call 或 erl_com:invoke）时，应将接口转换为指针，这是使用 COM 类型的元组表示法完成的：{vt_unknown, Interface}。

当 Excel 启动时，我们执行一系列 Excel 命令来输入数据并绘制图形。这些命令是从我们使用 Excel 的标准宏记录器获得的 VBA 宏转换而来的。

我们使用 Excel 命令所需的一些常量。这些取自从 Excel 接口生成的 Visual Basic 代码。虽然这些可以使用 COM 从 Excel 中获取，但 erl_com 还不支持这一点。（未来的版本将包括代码生成，这将大大简化大型 COM 接口的使用。

```
-module(xc).
-author('jakob@erix.ericsson.se').

-include("erl_com.hrl").

%% enum XlChartFormat
-define(XlPieExploded, 69).
-define(XlPie, 5).

%% enum XlChartLocation
-define(xlLocationAsNewSheet, 1).
-define(xlLocationAsObject, 2).
-define(xlLocationAutomatic, 3.

%% enum XlRowCol
-define(xlColumns, 2).
-define(xlRows, 1).

-export([populate_area/4, f/3, make_graph/6, sample1/0]).

to_cell_col(C) when C > 26 ->
        [C / 26 + 64, C rem 26 + 64];
to_cell_col(C) ->
        [C+64].

populate_area(E, _, _, []) ->
        ok;
populate_area(E, Row, Col, [Data | Resten]) ->
        Cell= to_cell_col(Col)++integer_to_list(Row),
        io:format(" ~s ~n ", [Cell]),
        N= erl_com:property_get(E, "range", [Cell]),
        Range= erl_com:package_interface(E, N),
        erl_com:property_put(Range, "Value", Data),
        erl_com:release(Range),
        populate_area(E, Row+1, Col, Resten).

f(E, _, []) ->
        ok;
f(E, Startcell, [Data | Resten]) ->
        {R, C}= Startcell,
        Cell= "R"++integer_to_list(R)++"C"++integer_to_list(C),
        io:format(" ~p ~n ", [Cell]),
        f(E, {R+1, C}, Resten).

make_graph(E, Row1, Col1, Row2, Col2, Title) ->
        Charts = erl_com:package_interface(E, erl_com:property_get(E, "Charts")),
        erl_com:invoke(Charts, "Add"),
        ActiveChart= erl_com:package_interface(E, erl_com:property_get
                                               (E, "ActiveChart")),
        erl_com:property_put(ActiveChart, "ChartType", {vt_i4, ?XlPieExploded}),
        erl_com:invoke(ActiveChart, "Location", [{vt_i4, ?xlLocationAsObject}, 
                                                 "Sheet1"]),
        Chart= erl_com:package_interface(E, erl_com:property_get(E, "ActiveChart")),
        R= to_cell_col(Col1)++integer_to_list(Row1)++":"
         ++to_cell_col(Col2)++integer_to_list(Row2),
        io:format(" ~s ~n ", [R]),
        Range= erl_com:property_get(E, "Range", [R]),
        erl_com:invoke(Chart, "SetSourceData", [{vt_unknown, Range}, 
                                                {vt_i4, ?xlColumns}]),
        erl_com:property_put(Chart, "HasTitle", true),
        ChartTitle= erl_com:package_interface(E, erl_com:property_get
                                              (Chart, "ChartTitle")),
        erl_com:property_put(ChartTitle, "Caption", Title).
        %erl_com:release(erl_com:package_interface(E, Range)),
        %erl_com:release(ActiveChart),
        %erl_com:release(Charts).

sample1() ->
        {ok, Pid}= erl_com:start_process(),
        T= erl_com:new_thread(Pid),
        E= erl_com:create_dispatch(T, "Excel.Application", ?CLSCTX_LOCAL_SERVER),
        erl_com:property_put(E, "Visible", true),
        Wb= erl_com:package_interface(T, erl_com:property_get(E, "Workbooks")),
        erl_com:invoke(Wb, "Add"),
        populate_area(E, 1, 1, ["Erlang", "Java", "C++"]),
        populate_area(E, 1, 2, ["25", "100", "250"]),
        make_graph(E, 1, 1, 3, 2, "Programming errors, by programming language"),
        {T, E, Wb}. 
```

3.5 示例三、C++调用COM对象

要完成。

# javascript - 如何修复 jqgrid 列选择器垃圾布局

> ID：10782410
> 
> 赞同：0
> 
> 时间：2012-05-28T09:37:24.977
> 
> 标签：javascript, jquery, html, css, jqgrid

jqgrid 列选择器中的列列表显示为单列并被截断：

![布局无效](../Images/5a14067c53d70fd21227921ab22b93d5.png)

如何解决这个问题？问题出现在 FireFox、Chrome、IE 页面定义如下。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<link rel="stylesheet" href="jquery-ui-1.8.12.custom.css" type="text/css" title="ui-theme" />
<link href="ui.jqgrid.css" rel="stylesheet" />
<link href="ui.multiselect.css" />
<link href="Site.css" rel="stylesheet" />
<script src="jquery-1.7.1.js" type="text/javascript"></script>
<script src="jquery-ui-git.js" type="text/javascript"></script>
<script src="jqgrid/plugins/ui.multiselect.js" type="text/javascript"></script>
<script src="jquery.contextmenu-fixed2.js" type="text/javascript"></script>
<script src="grid.locale-en.js" type="text/javascript"></script>
<script type="text/javascript" src="jquery.jqGrid.src-multiselect1-deleteandsortpatches.js"></script>
    <script src="json2.js" type="text/javascript"></script>
    <script src="erp.js" type="text/javascript"></script>

    <script type="text/javascript">
    var $grid = $("#grid");
    $(function() {
      "use strict";
      $grid.jqGrid({
    ...

    $grid.jqGrid('navButtonAdd', '#grid_toppager', {
        onClickButton: function () {
            $(this).jqGrid('columnChooser', {
            });
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:43:27.143

如果你会得到一些使用 columnChooser 并且工作正确的工作演示，然后删除`ui.multiselect.css`所需的，那么你会得到非常接近你的结果。

查看显示[的演示](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithColumnChooserWithError.htm)

![在此处输入图像描述](../Images/810f868645ad5f2af54fba369cbf0f69.png)

因此，我建议您在 Fiddler 或 Firebug 中验证`ui.multiselect.css`是否真正正确加载到您的解决方案中。可能你应该只更换线路

```
<link href="ui.multiselect.css" /> 
```

用线

```
<link href="jqgrid/plugins/ui.multiselect.css" /> 
```

对应于您使用的另一行

```
<script src="jqgrid/plugins/ui.multiselect.js" type="text/javascript"></script> 
```

# java - 如何在 Eclipse 中使用 JAVA 将完整的 csv 导入 Microsoft Access 数据库

> ID：10782414
> 
> 赞同：0
> 
> 时间：2012-05-28T09:37:37.017
> 
> 标签：java, database

我在 DAIKIN JAPAN 上 inetrn

我在 ECLIPSE 中用 JAVA 编写代码......我必须使用 Microsoft Access 数据库进行一些数据分析......

我想知道将整个 csv 文件导入我的数据库的查询..?????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:41:34.473

使用[OpenCSV](http://opencsv.sourceforge.net/)读取 CSV 文件的内容。创建插入查询并将您的 csv 内容处理到数据库。

如何阅读 -[链接](http://opencsv.sourceforge.net/#how-to-read)

# .net - 将数据库数据映射到列表列表

> ID：10782415
> 
> 赞同：1
> 
> 时间：2012-05-28T09:37:40.870
> 
> 标签：.net, sql-server, database, c#-3.0

我有一个形式的数据模型：

A类：

*   ID

*   日期

*   `List<B>`

B类

*   姓名

*   ID

我调用了返回数据集的 DB sp

`A_Id, A_Date, B_Name, B_Id`

将此数据集映射到类型对象的最易读的方法是`List<A>`什么？

我尝试了 dataSet 和 DataReader - 两者看起来都很复杂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:50:04.367

假设你有一个表，你可以使用 Linq-to-DataTable：

```
List<A> aList = dataTable.AsEnumerable()
    .GroupBy(row => row.Field<int>("A_Id"))
    .Select(grp => new A {
        Id = grp.Key,
        Name = grp.First().Field<DateTime>("A_Date"),
        Bs = grp.Select(m => new B { Id = m.Field<int>("B_Id"), Name = m.Field<string>("B_Name") }).ToList(),
    })
    .ToList() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:45:18.707

我假设你有理由不使用像 NHibernate 这样的 ORM 工具，它为你消除了这种事情。如果是这样，那么我倾向于为此使用数据阅读器。恕我直言，这很费力而不是复杂。

`A.Id`在遍历阅读器时跟踪变量中的当前值，并将“当前”实例也保留`A`在变量中。阅读器中的每一行，如果`A.Id`已更改，则将此当前设置`A`为一个新实例，并将其添加到列表中。并且在阅读器中的每一行，创建一个`B`并将其添加到 current`A`的`List<B>`属性中。

```
var result = new List<A>();
int currentId = -1;
A currentA;
while (reader.Read())
{
    int id = reader.GetInt32(reader.GetOrdinal("A_Id"));
    if (id != currentId)
    {
        currentId = id;
        currentA = new A
            {
                Id = id,
                Date= reader.GetDateTime(reader.GetOrdinal("A_Date")),
                List = new List<B>()
            };
        result.Add(currentA);
    }
    currentA.List.Add(new B
        {
            Id = reader.GetInt32(reader.GetOrdinal("B_Id")),
            Name = reader.GetString(reader.GetOrdinal("B_Name"))
        };
} 
```

之后别忘了处理你的读者......

# java - 在 Webpshere 7 中使用 Hibernate 最新版本

> ID：10782416
> 
> 赞同：1
> 
> 时间：2012-05-28T09:37:44.603
> 
> 标签：java, hibernate, orm, websphere-7

WebSphere 7 只支持 JEE5，不支持 6。所以它不支持 JPA2 规范（我知道 Hibernate 实现了 JPA2 规范）。但是 Hibernate 如何与 Tomcat 和 Jetty 一起工作（它们只是 servlet 容器，不是应用服务器，而且它们不支持 EE 和 JPA2）？如果 Hibernate 可以与 Tomcat 一起使用，为什么最新版本不能与 WAS 7 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:42:18.340

您需要安装 IBM WebSphere Application Server V7 Feature Pack for OSGi Applications 和 Java Persistence API 2.0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:03:30.843

Another option would be to put all JPA api JARs you need into the WAR or EAR and set the class loader to PARENT_LAST. We've done that on a number of occasions when WebSphere has been behind the curve.

# android - 在不使用imageview的情况下在android中缩放和旋转图像

> ID：10782418
> 
> 赞同：0
> 
> 时间：2012-05-28T09:37:56.550
> 
> 标签：android

我是 android 新手，我想在***不***使用`Imageview`. 我可以拖动图像。

代码：

```
public class SimpImageView extends BaseView{

    private Bitmap image = null;

    private Paint borderPaint = null;

    PointF start = new PointF();
    PointF lastPosition = new PointF();

    private Matrix savedMatrix = new Matrix();

    private Paint imagePaint = null;

    private Matrix matrix = new Matrix();

    float initialRotation;
    float currentRotation;

    private float initialScale;

    private float currentScale;

    PointF mid = new PointF();
    float oldDist = 1f;

    private Bitmap rotatedImage;

    public Bitmap getImage() {
        return image;
    }

    public void setImage(Bitmap image) {
        this.image = image;
    }

    public SimpImageView(Bitmap image,int x,int y,int width,int height){
        super(x, y, width, height);
        this.image = image;
        imagePaint = new Paint();
        imagePaint.setARGB(32, 255, 255, 255);
        imagePaint.setStyle(Paint.Style.FILL);

    }

    /* (non-Javadoc)
     * @see com.simplogics.surfaceview.Views.BaseView#onDraw(android.graphics.Canvas)
     */
    @Override
    public void onDraw(Canvas canvas) {

        canvas.drawBitmap(getImage(), getBounds().left,getBounds().top, new Paint());

    }

    /* (non-Javadoc)
     * @see com.simplogics.surfaceview.Views.BaseView#onTouchEvent(android.view.MotionEvent)
     */

    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        boolean handled = false;

        Log.d("SimpEditText", "(int)event.getX() " + (int)event.getX());
        Log.d("SimpEditText", "(int)event.getY() " + (int)event.getY());

        if(isTouchedInBounds((int)event.getX(), (int)event.getY())){
            Log.d("SimpEditText", "Touched in Bounds");
            handled = true;
            switch (event.getAction() & MotionEvent.ACTION_MASK) {
            case MotionEvent.ACTION_DOWN:
                savedMatrix.set(matrix);
                start.set(event.getX(), event.getY());
                lastPosition.x = getBounds().left;
                lastPosition.y = getBounds().top;

                Log.d("VerticalLabelView", "mode=DRAG");
                mode = DRAG;
                break;
            case MotionEvent.ACTION_POINTER_DOWN:
                mode = ZOOM;

                initialScale = spacing(event);
                midPoint(mid, event);
                Log.d("VerticalLabelView", "mode=ZOOM");
                currentRotation = rotation(event);

                break;
            case MotionEvent.ACTION_UP:
                mode = NONE;
                break;
            case MotionEvent.ACTION_POINTER_UP:
                mode = NONE;
                Log.d("VerticalLabelView", "mode=NONE");
                break;
            case MotionEvent.ACTION_MOVE:
                if (mode == DRAG) {
                    int x = (int)(event.getX() - start.x);
                    int y = (int)(event.getY() - start.y);
                    setPosition((int)lastPosition.x + x, (int)lastPosition.y + y);

                }else if(mode == ZOOM){

                    currentScale = spacing(event);
                    float scale =currentScale/initialScale;
                      this.image = rotatedImage;
                      this.setScale(0, 0,(int) (getBounds().width()*scale),(int) (getBounds().height()*scale));

                }
                break;
            }

        }

        return handled;

    }

    private float spacing(MotionEvent event) {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }
    private void midPoint(PointF point, MotionEvent event) {
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }
    private float rotation(MotionEvent event) {
        double delta_x = (event.getX(0) - event.getX(1));
        double delta_y = (event.getY(0) - event.getY(1));
        double radians = Math.atan2(delta_y, delta_x);
        Log.d("Rotation ~~~~~~~~~~~~~~~~~", delta_x + " ## " + delta_y + " ## "
                + radians + " ## " + Math.toDegrees(radians));
        return (float) Math.toDegrees(radians);
    }

} 
```

和`BaseView.java`类：

```
public abstract class BaseView {

    private int id = -1;

    private Object tag = null;

    private Rect bounds = null;

    public Rect getBounds() {
        return bounds;
    }

    public BaseView() {
        bounds = new Rect();
    }

    public BaseView(int x, int y, int width, int height) {
        bounds = new Rect(x, y, x + width, y + height);
    }

    public abstract void onDraw(Canvas canvas);

    public abstract  boolean onTouchEvent(MotionEvent event);

    public void setBounds(int x, int y, int width, int height){
        bounds.set(x, y, x + width, y + height);
    }

    public void setPosition(int x, int y){
        if(x <= 0 || y <= 0){
            Log.e("SimpEditText1", "----------------------------------------------------------");
            Log.e("SimpEditText1", "-------------0000000000000000000000000000000000------------");
            Log.e("SimpEditText1", "----------------------------------------------------------");
        }
        bounds.set(x, y, x + bounds.width(), y + bounds.height());
    }

    public void setScale(int x,int y,int width,int height){
        bounds.set(x, y, width,height);
    }

    protected boolean isTouchedInBounds(int xPos, int yPos){
        return bounds.contains(xPos, yPos);
    }

    public Object getTag() {
        return tag;
    }

    public void setTag(Object tag) {
        this.tag = tag;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    /**
     * @param w
     * @param h
     * @param oldw
     * @param oldh
     */
} 
```

请告诉我代码中的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:43:22.260

来自：[像photoshop一样在android中旋转图像缩放](https://stackoverflow.com/questions/10549066/image-scaling-with-rotation-in-android-like-photoshop/10549876#10549876)

它可以帮助你：

[http://android-er.blogspot.in/2010/07/skew-bitmap-image-using-matrix.html](http://android-er.blogspot.in/2010/07/skew-bitmap-image-using-matrix.html)

# php - 根据mysql中colum内爆的值检索数据

> ID：10782419
> 
> 赞同：0
> 
> 时间：2012-05-28T09:37:59.410
> 
> 标签：php, mysql

我的表中有一个名为 的列`users`。我需要从此表中检索行。

列中的值采用`users`以下格式：`45br67br89br96`. 表示表中的用户列由`br`（换行符）内爆

如果列中存在某个值，我需要检索表的行，例如我需要检索用户包含 89 的行。

我该如何为此编写查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:44:31.893

使用 MySQL[`LIKE`](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)运算符。它执行给定表达式（例如列中字段的值）与给定模式的简单比较。在您的情况下，模式是用户 ID（例如`89`），表达式是列名（`users`）：

```
SELECT * FROM `my_table` WHERE `users` LIKE "%89%" 
```

`%`角色非常有用。它匹配任意数量的字符，甚至是零个字符。（另一个是`_`- 它完全匹配一个字符。）
上面当然是一个例子。对于 PHP 脚本中的正常使用，您必须将模式作为变量传递：

```
<?php
$i_search_for = 89;
$query = 'SELECT * FROM `my_table` WHERE `users` LIKE "%' . $i_search_for . '%"';
?> 
```

我还向您推荐这堂课：[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:55:11.017

只需查询单元格的整个值并应用 preg_match_all 即可提取所有用户 ID。

```
$str ="45br67br89br96";

preg_match_all('#([0-9])+#', $str, $array, PREG_PATTERN_ORDER);

$matches = $array[0];

foreach($matches as $var)
{    
   print($var." ");
} 
```

产出：45 67 89 96

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:55:42.540

如果我理解你的问题，我会爆炸价值然后搜索用户。

像这样：

```
$arr = explode("br", $users_value);
$row = array_search('89', $arr); 
```

# .net - 使用变量来设置使用powershell的路径变量

> ID：10782421
> 
> 赞同：0
> 
> 时间：2012-05-28T09:38:01.877
> 
> 标签：.net, powershell, environment-variables

我在用 powershell 编写的登录脚本中遇到问题。我想在用户空间中设置环境路径。我首先声明一个新变量，然后将其添加到最后的路径变量中。新变量不会扩展为路径中的值。以下是代码

想法是每次我登录时更新 gat_path，但只在第一次更新路径。将 GAT_PATH 仅附加一次到路径变量。在此之后，每当我更新 GAT_PATH 时，路径应该自动具有新值。

```
$gat_path="S:\common\tools\sqlite;"
[environment]::SetEnvironmentVariable("GAT_PATH",$gat_path,[system.environmentvariabletarget]::User)
$res=$env:path.ToLower().Contains("s:\common") # if gat_path already added, then dont add again.
IF($res -eq "True")
{
echo "GAT Path is already set."
}
ELSE
{
     [environment]::SetEnvironmentVariable("PATH",$env:path+";%GAT_PATH%",[system.environmentvariabletarget]::User) 
} 
```

在上面的代码中， GAT_PATH 变量是在环境变量中创建的，但 path 的值是`c:\python26\;%GAT_PATH%`. `GAT_PATH`不会扩展到其实际值。我使用变量设置路径的原因是因为每次登录时都会运行此脚本。我不想在路径末尾添加 sqlite 路径，因为每次我登录时它都会在末尾添加 sqlite。我希望能够在脚本中随时更新 GAT_PATH，并且路径应该自动具有 GAT_PATH 的新值。

请注意，我`cannot`执行以下操作，因为它会产生与不使用变量直接设置路径相同的问题。每次我登录时，它都会将 gat_path 连接到路径变量。

```
$gat_path="S:\common\tools\sqlite;"
[environment]::SetEnvironmentVariable("PATH",$env:path+";"+$gat_path,[system.environmentvariabletarget]::User) 
```

使用powershell以编程方式定义路径变量时使用变量的正确方法是什么？

问候， 阿洛克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:50:56.953

而不是使用`%GAT_PATH%`你应该使用`$env:gat_path`

# android - 如何将android sdk添加回eclipse？

> ID：10782422
> 
> 赞同：3
> 
> 时间：2012-05-28T09:38:13.820
> 
> 标签：android, sdk

我这里有问题。

我刚刚下载了 eclipse 3.7，之前使用的是 3.6。

现在我想把 android SDK 放到 3.7

我无法下载和安装[SDK](http://developer.android.com/sdk/eclipse-adt.html#downloading)，因为已经安装。

但是我单击菜单-> 窗口-> 首选项并没有看到 android 路径。

那么如何将android插件添加回eclipse 3.7？

*p/s: 黑莓插件也需要在安卓之后安装

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:39:53.270

您需要将 Android 开发工具 (ADT) 安装到 Eclipse 中。

有关说明，请参见此处：

[http://developer.android.com/sdk/eclipse-adt.html](http://developer.android.com/sdk/eclipse-adt.html)

完成后，如果您的 Eclipse 尚未指向 Android SDK，您可以通过找到 Preferences 屏幕的 Android 部分并将其指向 SDK 目录来添加它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:40:16.677

请执行下列操作...

menu--> window --> preference --> android --> （提供你的 android 文件夹所在的 android sdk 路径。）

# c# - 在不同的线程上执行 2 个任务错误 C#

> ID：10782427
> 
> 赞同：0
> 
> 时间：2012-05-28T09:38:42.013
> 
> 标签：c#, threadpool, nullreferenceexception

我正在尝试将一个字符串数组分成 2 个，创建 2 个线程并在这 2 个线程上搜索这些数组。我知道我正在正确地创建线程，并且搜索功能是正确的，但我仍然收到此错误：

```
System.NullReferenceException was unhandled
Object reference not set to an instance of an object. 
```

这是代码：

```
// Create first and second array:
string[] firstarray = pieces.Take(pieces.Length / 2).ToArray();
string[] secondarray = pieces.Skip(pieces.Length / 2).ToArray();
string[] results = new string[pieces.Length];
string inputword = textBox5.Text.Trim();

ManualResetEvent[] calls = new ManualResetEvent[2];
calls[0] = new ManualResetEvent(false);
calls[1] = new ManualResetEvent(false);

// Set 2 new threads:
ThreadPool.QueueUserWorkItem((t) => {
    // SearchThruPieces searches an array for a string and returns the items
    // that contains the string
    // SearchThruPieces(string[] pieces, string word);
    SearchThruPieces(firstarray, inputword).CopyTo(results, 0);
    calls[0].Set();
});

ThreadPool.QueueUserWorkItem((t) => {
    SearchThruPieces(secondarray, inputword).CopyTo(results, firstarray.Length);
    calls[1].Set();
});

WaitHandle.WaitAll(calls);
string firststring = results[0]; // This line throws an exception 
```

现在我知道这个错误与任何线程或`SearchThruPieces`方法无关，因为它发生在我使用时：

```
results[0] 
```

它返回错误。

请帮我解决这个问题或告诉我他们是否是做我想要完成的事情的更好方法。

谢谢

编辑：

这是 SearchThruPieces 的代码：

```
delegate string[] Search(string[] pieces, string word);

        static Search SearchThruPieces = (string[] pieces, string word) =>
        {
            object locker = new object();
            lock (locker)
            {
                int a = 0;
                string[] afterpieces = new string[pieces.Length];
                for (int b = 0; b < (pieces.Length / 4); b++)
                {
                    if (pieces[a].Trim().ToLower().Contains(word.Trim().ToLower()) && pieces[a].Trim().Length > 0)
                    {
                        afterpieces[a] = pieces[a].Trim();
                        afterpieces[a + 1] = pieces[a + 1].Trim();
                        afterpieces[a + 2] = pieces[a + 2].Trim();
                        afterpieces[a + 3] = pieces[a + 3].Trim();
                    }

                    a += 4;
                }
                return afterpieces;
            }
        }; 
```

编辑2：

所以我设置了一个断点：

```
afterpieces[a] = pieces[a].Trim(); 
```

看看它是否被调用，它确实如此。我认为该错误与将 results[] 设置为`SearchThruPieces`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:57:51.260

假设`pieces`其中定义了元素，并假设您要搜索的字符串实际上是 in `pieces`，并假设搜索字符串实际上是在`secondarray`数组除法之后，那么`results`将是空的，因为您的第二次`ThreadPool`调用`firstarray`再次通过，而不是`secondarray`.

# asp.net - .net 中的版本控制软件是什么

> ID：10782431
> 
> 赞同：0
> 
> 时间：2012-05-28T09:38:58.177
> 
> 标签：asp.net, .net

> **可能重复：**
> [.Net 人的源代码控制](https://stackoverflow.com/questions/694596/source-control-for-a-net-guy)

任何人都可以帮助我了解 .net 中的版本控制软件是什么，并为我的启动用户提供任何好的教程。

谢谢，@nag。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:46:19.717

如果您是新手，请从一开始就尝试使用 Visual Studio Express，以后会有所收获。

TFS 11 Express 最多可供 5 位用户免费使用，而且易于使用

[http://www.microsoft.com/visualstudio/11/en-us/downloads#express](http://www.microsoft.com/visualstudio/11/en-us/downloads#express)

而这个小的PDF文件将简单地解释如何使用它：

[http://sstjean.blogspot.com/2006/10/document-from-vss-to-tfs-introduction.html](http://sstjean.blogspot.com/2006/10/document-from-vss-to-tfs-introduction.html)

# iphone - 如何在 iphone 应用程序中创建自定义 UIAlertView

> ID：10782434
> 
> 赞同：6
> 
> 时间：2012-05-28T09:38:59.647
> 
> 标签：iphone, ios, xcode

我有一个 iphone 应用程序，点击一个按钮，它应该通过在右上角的窗口上显示一些文本和“X”十字符号来打开一个自定义警报视图，就像我们在任何 Web 应用程序的灯箱中一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:48:41.903

这是链接，我认为它可以解决您的问题。

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:54:17.067

如果您想实现自定义警报视图，那么您应该在 ViewController 的帮助下拥有非常有吸引力的警报视图集合的示例代码。试试这个示例代码链接 [https://github.com/eigner/CODialog](https://github.com/eaigner/CODialog)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T00:06:32.937

这是一个示例如何创建自己的类，其行为类似于警报视图，但您可以放置​​任何您想要的背景/按钮图形：

[http://iosdevtricks.blogspot.com/2013/04/creating-custom-alert-view-for-iphone.html](http://iosdevtricks.blogspot.com/2013/04/creating-custom-alert-view-for-iphone.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T09:45:49.827

```
- (void)willPresentAlertView:(UIAlertView *)alertView; 
- (void)didPresentAlertView:(UIAlertView *)alertView; 
```

在上述任何消息中，检查子视图及其类并根据需要更改值。请参阅 UIActionSheet 的此示例代码。使用 ns log 搜索所有组件的类并自定义您想要的类。这是 uiactionsheet 代码

```
for (UIView* view in [actionSheet subviews])
    {
        NSLog(@"%@",[view class]);
        if ([[[view class] description] isEqualToString:@"UIAlertButton"] && [view respondsToSelector:@selector(setAlpha:)])
        {
            [view setAlpha:2.0];
            [view setOpaque:YES];
            if ([view respondsToSelector:@selector(title)])
            {
                NSString* title = [view performSelector:@selector(title)];
                if ([title isEqualToString:@"Cancel"] && [view respondsToSelector:@selector(setBackgroundImage:forState:)] && [view respondsToSelector:@selector(setFrame:)] && [view respondsToSelector:@selector(setFrame:)] && [view respondsToSelector:@selector(setTitleColor:forState:)])
                {

                    [view setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
                    [view setBackgroundImage:[UIImage imageNamed:@"btn-cancel.png"] forState:UIControlStateNormal];
                    [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y+10, view.frame.size.width,view.frame.size.height)];

                }
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-18T10:32:16.907

**在 ReturnAlert.xib 中创建自定义视图**

[![在此处输入图像描述](../Images/499a745fc2d5de6649f283763a237194.png)](https://i.stack.imgur.com/P6VZo.png)

```
class ReturnView: UIView, UITextFieldDelegate {

}

class ReturnAlert: UIAlertController {
   var returnView: ReturnView?

   public convenience init(id message: String?) {
      self.init(title: nil, message: "message", preferredStyle: .alert)

      guard let view = UINib(nibName: "ReturnAlert", bundle: Bundle(for: ReturnView.self)).instantiate(withOwner: ReturnView.self, options: nil)[0] as? ReturnView else{
        fatalError("Return view not found")
    }

    self.returnView = view
    view.alert = self
    let parent = self.view.subviews[0].subviews[0]

    for sv in parent.subviews {
        sv.removeFromSuperview()
    }

    view.bounds = CGRect(x: parent.bounds.origin.x, y: parent.bounds.origin.y, width: view.frame.size.width, height: view.frame.size.height)

    parent.addSubview(view)

    let xConstraint = NSLayoutConstraint(item: view, attribute: .centerX, relatedBy: .equal, toItem: parent, attribute: .centerX, multiplier: 1, constant: 0)

    let yConstraint = NSLayoutConstraint(item: view, attribute: .centerY, relatedBy: .equal, toItem: parent, attribute: .centerY, multiplier: 1, constant: 0)

    parent.addConstraint(xConstraint)
    parent.addConstraint(yConstraint)
  }
} 
```

# c - GetEnvironmentStrings 和 stange 值“=::=::\”

> ID：10782435
> 
> 赞同：8
> 
> 时间：2012-05-28T09:38:59.950
> 
> 标签：c, winapi, environment-variables

> **可能重复：**
> [这些奇怪的环境变量是什么？](https://stackoverflow.com/questions/10431689/what-are-these-strange-environment-variables)

我正在尝试使用 GetEnvironmentStrings Win32API 函数来获取环境变量，我收到了一些非常奇怪的键=值对（用 [] 括起来的示例）：

```
[=::=::\]
[=C:=C:\Users\username\value]
[=ExitCode=00000001]
[ALLUSERSPROFILE=C:\ProgramData]
[APPDATA=C:\Users\artik\AppData\Roaming]
[CommonProgramFiles=C:\Program Files (x86)\Common Files]
[CommonProgramFiles(x86)=C:\Program Files (x86)\Common Files]
[CommonProgramW6432=C:\Program Files\Common Files]
... 
```

显然它似乎不是那里描述的环境字符串的正确值[http://msdn.microsoft.com/en-us/library/windows/desktop/ms683187%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683187%28v=vs.85%29.aspx)

问题：

*   预期的行为是什么？
*   如果有“像`=ExitCode`为什么这样的特殊变量，例如`getenv()`不显示它们（`getenv("=ExitCode")`返回NULL）
*   任何人都可以提供指向这些东西的文档/规范的指针。

# c - 当缓冲区小于生产者的输入时，生产者/消费者似乎陷入僵局

> ID：10782438
> 
> 赞同：0
> 
> 时间：2012-05-28T09:39:12.577
> 
> 标签：c, deadlock, producer-consumer, circular-buffer

我制作了一个循环缓冲区，多个客户端写入（最后我希望他们将不同大小的消息）写入缓冲区。服务器将它们读出。它基于消费者/生产者问题中的代码：

```
#include <stdio.h>
#include <malloc.h>
#include <string.h>
#include <pthread.h>
#include <unistd.h>

#define BUFFER_SIZE 10

struct cBuf{
    char    *buf;  
    int     size; 
    int     start; 
    int     end;    
    pthread_mutex_t mutex;
    pthread_cond_t  buffer_full;
    pthread_cond_t  buffer_empty;
};

struct cBuf cb;

void buf_Init(struct cBuf *cb, int size) {
    int i;
    cb->size  = size + 1; 
    cb->start = 0;
    cb->end   = 0; 
    cb->buf = (char *)calloc(cb->size, sizeof(char));   
}
void buf_Free(struct cBuf *cb) {
    free(cb->buf);
}
int buf_IsFull(struct cBuf *cb) {
    return (cb->end + 1) % cb->size == cb->start; 
}
int buf_IsEmpty(struct cBuf *cb) {
    return cb->end == cb->start; 
}

int buf_Insert(struct cBuf *cb, char *elem) {

    int i,j;
    pthread_mutex_lock(&(cb->mutex));
    for (i=0; i < strlen(elem); ++ i){
        if (buf_IsFull(cb)==1) printf("\nProducer (buf_Insert) is waiting ");
        while(buf_IsFull(cb)){                      
            pthread_cond_wait(&(cb->buffer_empty),&(cb->mutex));
        } 

        cb->buf[cb->end] = elem[i]; 
        cb->end = (cb->end + 1) % cb->size;     
        printf("%c-",elem[i]);
    }

    pthread_cond_signal(&(cb->buffer_full));
    pthread_mutex_unlock(&(cb->mutex));     
    return 0;       
}

int buf_Read(struct cBuf *cb, char *out) {
    int i,j;
    pthread_mutex_lock(&(cb->mutex));
    if (buf_IsEmpty(cb))printf("\nConsumer (buf_Read) is waiting ");
    while(buf_IsEmpty(cb)){
        pthread_cond_wait(&(cb->buffer_full),&(cb->mutex));
    }

    for (i=0;i<BUFFER_SIZE-1;i++){
        if (cb->start == cb->end) break;

        out[i] = cb->buf[cb->start];
        cb->buf[cb->start] = '_';
        cb->start = (cb->start + 1) % cb->size;

        printf("%c-",out[i]);
    }
    pthread_cond_signal(&(cb->buffer_empty));
    pthread_mutex_unlock(&(cb->mutex)); 
    return 0;
}

void * client(void *cb){
    pthread_detach(pthread_self());

    struct cBuf *myData;
    myData = (struct cBuf*) cb;

    char input[]="Hello World!";

    if (buf_Insert(myData, input)) printf("\n");
    return 0;
}

int main(void) {
    char out[60];
    pthread_t thread;
    int i;

    pthread_cond_init(&(cb.buffer_full),NULL);
    pthread_cond_init(&(cb.buffer_empty),NULL);

    buf_Init(&cb, BUFFER_SIZE);

    for (i = 0; i<1; i++){
            if(pthread_create (&thread,NULL, client, (void *) &cb) !=0){
            #ifdef DEBUG
            printf("\nDEBUG (Main Thread) - Error while creating thread");
            #endif
        } else {
            #ifdef DEBUG
            printf("\nDEBUG (Main Thread) - Thread created");
            #endif
        }
    }

    while (1){
        if (buf_Read(&cb,out)) printf ("succes");
    }

    buf_Free(&cb);
    return 0;
} 
```

它主要在缓冲区大于单个客户端的消息时起作用（通过`buffer_size`增大，例如 16）。然而，当我把它变小时，它似乎陷入僵局，即使经过大量研究，我也无法弄清楚为什么。当我在调试器中运行代码时，代码似乎停止运行

```
pthread_cond_wait(&(cb->buffer_empty),&(cb->mutex)); 
```

为什么代码在这里停顿，如何防止它停顿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:51:08.863

您是用单数形式说“小于消息”吗？如果缓冲区不够大，甚至无法存储一条消息，那么生产者将在中途停止将其写入队列，并且永远不会通知消费者它有东西要消费。

对代码的简短扫描似乎证实了——即使一条消息都无法写入，你会阻塞在写入循环中，并且不会`pthread_cond_signal`在函数结束时调用，所以你永远不会通知消费者和它无法释放缓冲区。

这个问题是主要的。消费者可以开始消费的基本单位必须适合队列。您可以通过两种方式解决问题——确保缓冲区足够大以容纳消息，或者使消息可以以较小的单元处理并`pthread_cond_signal`在每个单元之后通知使用者 ( )。

# mysql - MySQL 用户转储存储过程的权限

> ID：10782441
> 
> 赞同：1
> 
> 时间：2012-05-28T09:39:17.850
> 
> 标签：mysql

我正在创建一个 MySQL 用户来备份存储过程。此备份用户正在工作，只是它不导出转储文件上的存储过程。

这些是我在备份用户中启用的权限。

```
GRANT LOCK TABLES, SELECT 
```

我应该添加`EXECUTE ON`或特权中缺少什么？

root 用户正在工作并且能够导出存储过程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T15:04:20.673

您必须授予对表的`SELECT`权限。`mysql.proc`

[http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_routines](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_routines)

# php - 如何制作一个mysql_fetch_array while循环的php数组

> ID：10782443
> 
> 赞同：3
> 
> 时间：2012-05-28T09:39:22.763
> 
> 标签：php, mysql, arrays, loops, while-loop

目前我有大量的php文件，每个文件都有一个数组语句，格式为：

```
$array1 = array ( array ( 'Husband' => 'bob',
                          'Wife' => 'ann' ),
                  array ( 'Husband' => 'fred',
                          'Wife' => 'donna' ),
                  array ( 'Husband' => 'john',
                          'Wife' => 'mary' ) ); 
```

这当然从`print_r ($array1)`输出（A）返回：

```
 Array ( [0] => Array (
                  [Husband] => bob [Wife] => ann ) 
           [1] => Array ( 
                  [Husband] => fred [Wife] => donna ) 
           [2] => Array ( [Husband] => john [Wife] => mary ) ) 
```

在一个单独的类文件中，我使用如下语句访问 $array1 数据：

```
for ($col = 0; $col < sizeof($array1); $col++)
{
  echo $array[$col]['Wife']."<br />";
} 
```

基于大量任何东西都是数据库的理论，我想将多个 php 数组文件数组中的数据迁移到 MySQL 数据库中，并从我的类文件中访问 MySQL 数据。所以我在 MySQL 中设置了以下内容：

```
CREATE TABLE IF NOT EXISTS `arrays` (
  `id` int(5) NOT NULL auto_increment,
  `husband` varchar(255) collate utf8_unicode_ci NOT NULL,
  `wife` varchar(255) collate utf8_unicode_ci NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

INSERT INTO `arrays` (`id`, `husband`, `wife`) VALUES
(1, 'bob', 'ann'),
(2, 'fred', 'donna'),
(3, 'john', 'mary'); 
```

然后我从 PHP 访问这个 MySQL 数据库：

```
$sql = "SELECT * FROM `database`.`arrays`";
$link  = mysql_connect ('localhost', 'username', 'password' ) or die(mysql_error());
mysql_select_db ('database', $link) or die(mysql_error());
$result = mysql_query ($sql) or die(mysql_error());
while($row = mysql_fetch_array($result))
{
  $array2 = array ( 'Husband' => $row['husband'],
                    'Wife' => $row['wife'] );
  print_r ($array2);
} 
```

这将产生输出（B），如：

```
Array ( [Husband] => bob [Wife] => ann ) 
Array ( [Husband] => fred [Wife] => donna ) 
Array ( [Husband] => john [Wife] => mary ) 
```

我的问题是如何制作 mysql_fetch_array while 循环的 php 数组，以便输出 B 看起来像输出 A。我希望能够继续以`$array[$col]['Wife']`MySQL 数据库的方式访问我的类文件中的数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T09:43:22.833

您在这里需要做的就是使用以下方法将返回的数组推`mysql_fetch_array()`送到更大的数组中`[]`：

```
$MultiDimArray = array();

while($row = mysql_fetch_array($result))
{
  $MultiDimArray[] = array ( 'Husband' => $row['husband'], 'Wife' => $row['wife'] );
}

print_r($MultiDimArray); 
```

现在，一些评论：

*   *请*不要使用`mysql_*`扩展编写新代码，请改用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。
*   除非您明确需要数字索引键以及关联键，否则请使用[`mysqli_fetch_assoc()`](http://php.net/manual/en/mysqli-result.fetch-assoc.php)and[`mysqli_fetch_row()`](http://php.net/manual/en/mysqli-result.fetch-row.php) 代替。`mysqli_fetch_array()`
*   如果您以与在代码中使用键相同的方式命名列（包括大写），则只需将返回值压入`mysqli_fetch_assoc()`数组即可。

例如：

```
while ($MultiDimArray[] = mysql_fetch_assoc($result)) continue; 
```

*   不要使用`or die(mysql_error());`构造。您*永远不*应该在生产环境中显示`mysql_error()`（或它的 PDO/MySQLi 等效项）的结果，如果您必须这样做以进行调试，请确保在之后立即将其从代码中删除。
*   不要`sizeof($array1)`直接用作循环条件。这是非常低效的，唯一一次你应该这样做是如果你的数组的大小在循环期间可能会改变。您应该在循环之前调用`sizeof()`一次，将结果存储在一个变量中，然后`$col`与该变量进行比较。

例如：

```
for ($col = 0, $size = sizeof($array1); $col < $size; $col++)
{
  echo $array1[$col]['Wife']."<br />";
}

// Also, don't forget you could simply do this:
foreach ($array1 as $row)
{
  echo $row['Wife']."<br />";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:44:29.343

尝试以这种方式更改您的代码

```
$array2 = array();
$sql = "SELECT * FROM `database`.`arrays`";
$link  = mysql_connect ('localhost', 'username', 'password' ) or die(mysql_error());
mysql_select_db ('database', $link) or die(mysql_error());
$result = mysql_query ($sql) or die(mysql_error());
while($row = mysql_fetch_array($result))
{
  $array2[] = array ( 'Husband' => $row['husband'],
                    'Wife' => $row['wife'] );
}

print_r ($array2); 
```

我相信这就是您正在寻找的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:45:48.773

也许尝试类似：

```
while($row = mysql_fetch_array($result))
{
  $temparray = array ( 'Husband' => $row['husband'],
                    'Wife' => $row['wife'] );
  array_push($array2, $temparray);
}

print_r ($array2); 
```

# jquery - 通过具有一个脚本的 jquery 动态加载 html 时出错

> ID：10782449
> 
> 赞同：-1
> 
> 时间：2012-05-28T09:39:55.367
> 
> 标签：jquery, html

我已经编写了一个通过 jQuery 动态加载 html 的代码

```
$("table").eq(5).html('<table><tr><td>some data</td></tr></table><script language="JavaScript">function TCN_reload(from){}</script><table><tr><td>some data</td></tr></table>'); 
```

如果我使用此代码，则遇到页面加载错误。但是如果我删除该脚本，则没有错误，但我也想要该脚本。

请帮帮我！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:01:13.637

没有理由在 dom 元素中动态插入 javascript。删除javascript。它会起作用

要添加 javascript，您可以按照此操作

[将 javascript 放入 jquery .html 函数中](https://stackoverflow.com/questions/8693959/put-javascript-into-jquery-html-function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:48:42.637

更改`<script language="javascript">`为`<script type="text/javascript">`。查看下面的详细说明

`type = content-type :`

```
This attribute specifies the scripting language of the elements contents and overrides the default scripting language. The scripting language is specified as a content type (e.g., "text/javascript" ). We have to supply a value for this attribute. There is no default value for this attribute. 
```

`language ="JavaScript" :`

```
This attribute specifies the scripting language of the contents of this element. Its value is an identifier for the language, but since these identifiers are not standard, this attribute has been deprecated(outdated by newer constructs) in favor of type. 
```

# android - 在另一个活动中显示结果

> ID：10782450
> 
> 赞同：0
> 
> 时间：2012-05-28T09:39:55.597
> 
> 标签：android, android-activity

我是android开发的新手，所以请尝试解释复杂的步骤。

我想知道为以下过程编写哪些代码：-

**Activity1**通过**EditText**接受数字输入，然后对其执行一些操作，假设它乘以 2，然后将*这个新数字*发送到另一个显示它的活动**Activity2 。**

主要是我想知道如何在活动中显示新号码。

提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:43:18.547

您需要将数据从一个活动传递到另一个活动..

**主.java**

```
Intent it=new Intent(Main.this,Expense.class);
it.putExtra("a", food);
startActivity(it); 
```

**二.java**

```
Bundle b=getIntent().getExtras();
if(b!=null)
{
    String fud=b.getString("a");
}
textview.setText(fud); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T09:44:13.977

以下问题的答案显示了如何在活动之间传递数据。在此之前，请仔细阅读意图。

[如何在 Android 应用程序的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T09:44:58.783

参考这个例子

在活动 1 中添加此内容

```
Intent myIntent = new Intent(Activity1.this, Activity2.class);
myIntent.putExtra("UserId",UserId);
myIntent.putExtra("UserName",UserName);
startActivity(myIntent); 
```

在活动 2 中添加此内容

```
Intent intent = getIntent();
UserId=intent.getStringExtra("UserId");
UserName=intent.getStringExtra("UserName"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T09:42:55.680

[Android 中的 Intents](http://developer.android.com/reference/android/content/Intent.html)正是您所寻找的

# php - 安装 wamp 后无法加载 phpmyadmin

> ID：10782456
> 
> 赞同：3
> 
> 时间：2012-05-28T09:40:17.333
> 
> 标签：php, mysql, apache, wampserver

我正在尝试在我的本地机器上安装最新版本的 wamp server 2.2。我在端口 80 上运行了 IIS，所以我在端口 8080 上安装了 wamp，除了 phpmyadmin 之外一切正常. 我还测试了 php 和 mysql 连接都可以正常工作，其他别名 sqlbuddy 和 webgrind 也可以正常工作。我也测试了 xampp，但是 wamp 也有同样的问题？任何帮助将不胜感激。

这是每次我访问 phpmyadmin 时的 apache 错误日志更新...

```
[Mon Jun 04 16:15:16.701238 2012] [mpm_winnt:notice] [pid 1852:tid 392] AH00428: Parent: child process exited with status 255 -- Restarting.
[Mon Jun 04 16:15:16.763242 2012] [mpm_winnt:notice] [pid 1852:tid 392] AH00455: Apache/2.4.2 (Win64) PHP/5.4.3 configured -- resuming normal operations
[Mon Jun 04 16:15:16.763242 2012] [mpm_winnt:notice] [pid 1852:tid 392] AH00456: Server built: May 13 2012 19:54:49
[Mon Jun 04 16:15:16.763242 2012] [core:notice] [pid 1852:tid 392] AH00094: Command line: 'c:\\wamp\\bin\\apache\\apache2.4.2\\bin\\httpd.exe -d C:/wamp/bin/apache/apache2.4.2'
[Mon Jun 04 16:15:16.764242 2012] [mpm_winnt:notice] [pid 1852:tid 392] AH00418: Parent: Created child process 476
[Mon Jun 04 16:15:17.190266 2012] [mpm_winnt:notice] [pid 476:tid 288] AH00354: Child: Starting 64 worker threads. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:17:49.797

您可以通过 WAMP 设置进行更改

1.  转到您的 wamp 文件夹并编辑 wampmanager.tpl
2.  找到 phpmyadmin 引用 (localhost/phpmyadmin) 并添加端口 8080 (localhost:8080/phpmyadmin/)
3.  重启 wamp

（这假设 WAMP 的其余部分已经在侦听端口 8080 - 否则您还需要在 httpd.conf 中的该端口上添加一个侦听器，并更改 wampmanager.tpl 中的其他引用。但是正如您所说的那样，我假设您'rve已经这样做了）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-13T02:43:19.047

这似乎已经得到解答，但是在 Windows 7 上对我有用的简单方法。只需右键单击 WAMP 图标，选择工具，找到“Apache2 使用的端口”，测试端口 80，如果出现带有“已被 X 应用程序使用”，然后选择“使用 80 以外的其他端口”选项。

我选择了8080，它工作正常。

然后您可以使用：[http://localhost:8080/phpmyadmin/](http://localhost:8080/phpmyadmin/)来访问 phpMyAdmin。

如果 8080 不起作用，请检查可能正在使用它的应用程序，然后退出该应用程序，或者尝试另一个端口。

**如果端口 80 已经被使用，它会带来什么** [![我想退出 IIS 会有意义](../Images/b01986993b2d891df666484d7a533ef8.png)](https://i.stack.imgur.com/Uzfe7.jpg)

**这就是它应该的样子** [![在此处输入图像描述](../Images/f3fbd21ff2a1e255c23b8f950a19c584.png)](https://i.stack.imgur.com/SNa5C.jpg)

这个设置对我有用，所以我希望它有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T06:49:52.880

I changed both *"wampmanager.ini"* and *"wampmanager.tpl"* using steps mentioned by ***Robbie*** and it's working fine on port 8080\. (If you still see Access denied error, make sure to clear browser cache and refresh browser page.)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:35:04.003

phpmyadmin 的步骤：

1.  在浏览器中输入：localhost:3306/phpmyadmin
2.  它会打开一条线（我不明白那条线是什么意思:-)）
3.  现在不要关闭浏览器并输入：localhost/phpmyadmin
4.  那么它将起作用。

我也一样

# xml - 格式化嵌入的 XML

> ID：10782457
> 
> 赞同：0
> 
> 时间：2012-05-28T09:40:17.753
> 
> 标签：xml, xml-parsing

我在尝试将值列表格式化为 XML 时遇到问题。到目前为止，我可以创建节点并添加值，但是当这些字段之一包含 XML 而不是单个值时，就会出现问题。我在下面有一个模拟示例。1 & 3 显示正确，但 2 不正确。理想情况下，我希望在值 2 的值中添加标签，以显示它们都是该值字段的一部分，但这并不像将 XML 格式化为可读格式那么重要。

```
<FieldValues>
    <FieldName>Name1</FieldName>
    <FieldValue>Value1<FieldValue>
</FieldValues>
<FieldValues>
    <FieldName>Name2</FieldName>
    <FieldValue><Value2>2</Value2><List>1</List><ID>58</ID><FieldValue>
</FieldValues>    
<FieldValues>
    <FieldName>Name3</FieldName>
    <FieldValue>Value3<FieldValue>
</FieldValues> 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:33:55.350

Linux [xmllint](http://linux.about.com/library/cmd/blcmdl1_xmllint.htm)程序对于检查 XML 的有效性和格式化它都非常有用，如下所示：

```
$ xmllint --format data.xml
<?xml version="1.0"?>
<data>
  <FieldValues>
    <FieldName>Name1</FieldName>
    <FieldValue>Value1</FieldValue>
  </FieldValues>
  <FieldValues>
    <FieldName>Name2</FieldName>
    <FieldValue>
      <Value2>2</Value2>
      <List>1</List>
      <ID>58</ID>
    </FieldValue>
  </FieldValues>
  <FieldValues>
    <FieldName>Name3</FieldName>
    <FieldValue>Value3</FieldValue>
  </FieldValues>
</data> 
```

**笔记：**

*   您在上面的示例中提交的 XML 格式不正确。

# javascript - 错误 document.getElementById 为空

> ID：10782458
> 
> 赞同：0
> 
> 时间：2012-05-28T09:40:19.113
> 
> 标签：javascript

我正在实现一些动态创建新 iframe 和删除它的相关按钮的 javascript 函数。

这是我为创建按钮而编写的代码：

```
function addButton(iframeId, num) {
    var butt = document.createElement('button');
    var butt_text = document.createTextNode(num);
    butt.appendChild(butt_text);
    butt.id = num + 100;
    butt.onclick = function() { removeButton(butt.id); removeIframe(iframeId, butt.id); }
    document.body.appendChild(butt);
    numButt++;
} 
```

这就是我所说的：

```
addElement(iframe.id, cont); 
```

参数“cont”是一个从1开始的计数器，并在函数中增加以创建新的iframe，因此第一个按钮将命名为101并消除iframe＃1，第二个按钮将命名为102并消除帧#2，依此类推。

“numButt”是一个从0开始的计数器，计算创建了多少个按钮，所以要知道最后创建的按钮的id。

删除按钮的功能是这样的，它工作正常：

```
function removeButton(buttonId) {
    butt = document.getElementById(buttonId);  
    if (butt) { 
        butt.parentNode.removeChild(butt);
    }
} 
```

现在我想重新分配按钮的 onclick 事件。因为如果我删除 iframe #3，所有 id 高于 3 的 iframes.id 都将使用此函数重命名（我需要重命名，因为我的 resizeIframe 函数适用于相应的 ID）：

```
function renameIds(elim) {
    for (i = 1; i <= cont; i++) {
        if (i > elim) {
            document.getElementById(i).id = i-1;
        }
    }
} 
```

我需要更改按钮的 onclick 事件，以便名为 104 的按钮将消除 iframe #3，按钮 105 将消除帧 #4，依此类推。

我在 removeIframe 函数中执行此操作，但它不起作用，因为 Firefox 错误控制台返回“document.getElementById(a) is null”：

```
function removeIframe(iframeId, buttId) {
    iframe = document.getElementById(iframeId);
    var a;
    if (iframe) {
        iframe.parentNode.removeChild(iframe);
        renameIds(iframeId);
        cont--;
        resizeIframe();
        for (a = 101; a <= 100+numButt; a++) {
            if (a > buttId) {
                document.getElementById(a).onclick = function() { removeButton(a); removeIframe(a-101, a); }
            }
        }
    }
} 
```

有什么问题？？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:45:58.797

你应该减少

> numButt

当删除一个即 numButt--; 在函数 removeButton 中。

# php - PHP preg_match() 函数用于搜索 HTML 元素

> ID：10782464
> 
> 赞同：0
> 
> 时间：2012-05-28T09:40:58.457
> 
> 标签：php, preg-match, dom

我有 HTML 输出并想在 HTML DOM 上搜索特定元素，让我们说：

```
<html>
    <body>
        <div id="post">
            <div>
                <h3><a>Post Title Here</a></h3>
            </div>
        </div>
    </body>
</html> 
```

通过该 HTML 输出，我想使用 preg_match 函数获取标签内的文本。我将如何在 preg_match 上对其进行格式化？

答案非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:43:13.077

您不应该 :) 使用适当的 HTML 解析器解析 HTML：减少头痛，更好的处理。看这里：

[您如何在 PHP 中解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:45:50.240

您可以像这样使用[phpQuery](http://code.google.com/p/phpquery/)：

```
phpQuery::newDocumentHTML($yourHTML);
$resultData = pq('div#post h3 > a');
echo $resultData; // Post Title Here 
```

# c++ - 如何将默认解码器设置为 playbin2？

> ID：10782466
> 
> 赞同：0
> 
> 时间：2012-05-28T09:41:06.537
> 
> 标签：c++, gstreamer

我正在尝试接收视频流，现在是 mjpeg 流。为了使程序独立于广播协议和视频流格式，我使用的是 playbin2。它可以工作，但是 playbin 连接到流需要很长时间。我猜问题出在解码器上，因为当我测试时：

```
gst-launch-0.10 soupthhpsrc location=http://some_location timeout 5 ! jpegdec ! autoaudiosink 
```

它工作得很好。连接大约需要 1 秒。所以问题是：有没有办法将 jpegdec 设置为我的 playbin 的默认解码器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:56:46.050

我认为不可能将 mjpeg 解码器指定为 playbin2 的默认值。t 对我来说听起来很合乎逻辑，因为 playbin2 应该自动检测适用的流的格式。在格式未知的情况下playbin2必须报错（[见代码示例](http://www.massapi.com/class/pl/PlayBin2.html)）。我认为您需要正确设置 mjpeg 流，以便可以使用 playbin2 正确检测到它。

但是，要实现您的想法，您可以使用以下技巧：

首先，您应该尝试运行能够解码和播放不同类型流的通用 playbin2 管道。如果它有效，那么别无他法。否则，您需要运行一个替代管道，它只解码 mjpeg。

如何制作仅解码 mjpeg 的替代管道？您可以尝试使用 playbin2 制作它（不确定是否可行）。为此，您必须在信号处理程序[source-setup中将大写字母（使用](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-base-plugins/html/gst-plugins-base-plugins-playbin2.html#GstPlayBin2-source-setup)[gst_pad_set_caps](http://developer.gnome.org/gstreamer/unstable/GstPad.html#gst-pad-set-caps)）明确指定为“image/jpeg” 。否则，有必要选择另一个管道，例如您在问题中指定的管道。

# excel - excel中的日期时间差异（毫秒精度）

> ID：10782468
> 
> 赞同：1
> 
> 时间：2012-05-28T09:41:16.070
> 
> 标签：excel, ms-office

我在 csv 文件中有一些数据：

`21-05-2012 15:41:49.354 | 21-05-2012 15:41:54.376|`

他们的格式是`general`

如何在 excel 中计算两列之间的 dateTime 差异？

（需要毫秒精度）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:33:06.780

我还体验过 Excel 在某些情况下会忽略日期值的毫秒部分。我可以建议的最佳解决方案是将日期值作为文本导入，然后使用如下公式转换为日期

```
=VALUE(LEFT(A1;19))+VALUE(RIGHT(A1;3)/86400000) 
```

一旦有了包括毫秒部分在内的值，计算差异就不成问题了，对吧？（例如，`=(Value1-Value2)*86400`以秒为单位获得差异。）

# forms - 模式对话框中的 Drupal 7 表单提交

> ID：10782470
> 
> 赞同：1
> 
> 时间：2012-05-28T09:41:25.587
> 
> 标签：forms, jquery-ui, drupal-7

我在商业产品表单中嵌入了一个视图，它显示了指向引用该产品的任何产品显示节点的链接。还有一个“编辑”链接，它在 jQuery 模式对话框中加载产品显示编辑表单（从产品表单中的空 div 创建一个对话框窗口，然后将整个节点编辑页面加载到其中）。

我希望能够在同一个对话框中显示表单提交的结果，而不是替换整个页面。Media 和 Views 模块做了类似的事情，但我很难确定到底是怎么回事。有人可以概述实现这一目标的必要步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:09:37.337

您可以按照本教程在 ctools 模式窗口中处理 Web 表单：http: [//drupal.org/node/1196150](http://drupal.org/node/1196150)。它工作正常：webform 和确认消息都将显示在模式窗口中，而无需重新加载页面。

Ctools[自动模式](http://drupal.org/project/ctools_automodal)模块也可能是一个解决方案（尽管我努力让它与 webform 一起工作）

# c - C中的for循环和char

> ID：10782472
> 
> 赞同：1
> 
> 时间：2012-05-28T09:41:33.793
> 
> 标签：c, string, for-loop, char

我正在尝试学习 C 语言，在这里我需要一些帮助。

我正在尝试为井字游戏制作程序。我尝试在 main 函数中执行它的第一部分，但它不起作用。但是，当我使用另一个功能时，它起作用了。它是如何以及为什么起作用的？（这两个程序都附在下面）。

另外，我在带有“square 1”和“square 2”的scanf中使用了“%s”而不是“%c”。为什么“%c”在这里不能正常工作？

在此先感谢您的帮助。

```
// first program

#include <stdio.h>  

int main ()

{

int player;                                         
char square1; 
char square2;
char Nesta[9]={'1','2','3','4','5','6','7','8','9'}; 
int player1;
int player2;

printf("choose one for x or two for o\n");  

scanf("%i", &player); 

if (player==1) 
{
    player1='x';
    player2='o';
}
else
{
    player1 ='o';
    player2='x';
}

printf(
       "1  +  2 + 3   \n"
       "---+----+-----\n"
       "4  +  5 + 6   \n"
       "---+----+-----\n"
       "7  +  8 + 9   \n"
       );

for (int i=0; i<3; ++i)
{
    printf("please enter the number of the sqaure "); 
    scanf("%s",&square1 );

    printf("please enter the number of the sqaure "); 
    scanf("%s",&square2 );

    for (int j=0; j<9; ++j)
    {
        if (square1 == Nesta[j])

        {
            Nesta[j]=player1;
            printf(
                   "%c  +  %c + %c \n"
                   "----+-----+--- \n"
                   "%c  +  %c + %c \n"
                   "----+-----+--- \n"
                   "%c  +  %c + %c \n", Nesta[0],Nesta[1], Nesta[2], Nesta[3],Nesta[4],Nesta[5],Nesta[6],Nesta[7],Nesta[8]);
        }
    }

    for (int k=0; k<9; ++k)
    {
        if (square2 == Nesta[k])

        {
            Nesta[k]=player2;
            printf(
                   "%c  +  %c + %c \n"
                   "----+-----+--- \n"
                   "%c  +  %c + %c \n"
                   "----+-----+--- \n"
                   "%c  +  %c + %c \n", Nesta[0],Nesta[1], Nesta[2], Nesta[3],Nesta[4],
                                         Nesta[5],Nesta[6],Nesta[7],Nesta[8]);
         }

       }
     }
      return 0; 
   } 
```

使用 gamecont 功能时它工作得很好！

```
// the second program
#include <stdio.h> 

char Nesta[9]={'1','2','3','4','5','6','7','8','9'}; 
int player1;
int player2;

int gamecont ()
{

char square2;

printf("please enter the number of the square "); 
scanf("%s",&square2 ); 

for (int j=0; j<9; ++j)

    if (square2 == Nesta[j])
      {
        Nesta[j]=player2;
        printf(
               "%c  +  %c + %c \n"
               "----+-----+--- \n"
               "%c  +  %c + %c \n"
               "----+-----+--- \n"
               "%c  +  %c + %c \n", Nesta[0],Nesta[1], Nesta[2], Nesta[3],Nesta[4],
                                    Nesta[5],Nesta[6],Nesta[7],Nesta[8]);
        }
    }

int main ()
{

int player;                                         
char square1; 

printf("choose one for x or two for o\n");  

scanf("%i", &player); 

if (player==1) 
{
    player1='x';
    player2='o';
}
else
{
    player1 ='o';
    player2='x';
}

printf(
       "1  +  2 + 3   \n"
       "---+----+-----\n"
       "4  +  5 + 6   \n"
       "---+----+-----\n"
       "7  +  8 + 9   \n"
       );

 for (int i=0; i<3; ++i)
 {
 printf("please enter the number of the square  "); 
 scanf("%s",&square1 ); 

 for (int j=0; j<9; ++j)
 {
   if (square1 == Nesta[j])
    {  
        Nesta[j]=player1;

        printf(
               "%c  +  %c + %c \n"
               "----+-----+--- \n"
               "%c  +  %c + %c \n"
               "----+-----+--- \n"
               "%c  +  %c + %c \n", Nesta[0],Nesta[1], Nesta[2], Nesta[3],Nesta[4],Nesta[5],Nesta[6],Nesta[7],Nesta[8]);

gamecont() ;   
            }
}
  }
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:00:15.793

当你说某事“不起作用”时，你需要清楚。在什么意义上不起作用？电脑坏了？或者发生了一些你没有预料到的具体事情？然后具体一点。

WRT `%c`vs `%s`，请记住，当您从控制台输入数据时，您需要点击“enter”，这会将 '\n' 字符提供给 stdin 缓冲区。 **'\n' 仍在输入缓冲区中，等待下一个读取`scanf`。**

使用 时`%s`，如果缓冲区中有换行符，则会跳过该换行符，因为`%s`字符串不包含空格，并且大多数类型说明符都会跳过前导空格。但是，`%c`始终是单个字符。考虑：

```
char c;
while (scanf("%c", &c)) printf("%d\n", c); 
```

每次你输入一个字符（然后按回车键）你会得到*两个*数字，其中第二个是 10（ascii `\n`）。

不幸的是，您对 %s 的使用是不安全的。试试这个：

```
scanf("%c%*c", &square); 
```

意味着忽略，因此这`*`将删除换行符，使标准输入缓冲区为空。但是，如果用户输入了多个字母（或空格），仍然会留下一些东西。您可以创建`square`一个字符串并只使用第一个字符，但这也有缺陷。刷新输入缓冲区的一种可靠方法是：

```
while (fgetc(stdin) != '\n'); 
```

如果您在使用 scanf 后这样做，它会在您捕获后吃掉缓冲区中的任何内容，并在下一次时将其清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:58:24.390

在第一个代码转储中，您将带有 %s 的 c 字符串扫描到字符变量（square1 和 square2）。这是不安全的，您应该将 c 字符串扫描到字符数组，而不是单个字符。

# makefile - 在规则部分执行 Makefile 特定命令

> ID：10782475
> 
> 赞同：0
> 
> 时间：2012-05-28T09:41:45.043
> 
> 标签：makefile

假设我有一个`include`指令：

`include dep/dep.mk`

包括我的构建所需的其他信息。但是，我只希望在构建某些目标之后将其包含在内。我怎样才能做到这一点？

例如：

```
test: foo.c bar.c
     include dep/dep.mk 
```

在这种情况下，`include`将不起作用，因为 Make 将其理解为 shell 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T20:03:53.173

你不能那样做。如果您使用的是足够现代的 GNU make，您可以使用`$(eval include dep/dep.mk)`，但请注意，包含的 makefile*不能*定义任何规则。一旦 make 开始构建目标，就不能定义新的规则/目标，即使使用`$(eval ...)`.

您可以做的最好的事情是让那些想要包含该文件的命令递归地调用make，以便子make将包含该文件。

但是我同意埃尔达的观点；你需要重新考虑你的要求。也许如果您解释了为什么要这样做，我们可以提供更好的建议。

# c# - 在选定区域写入文本

> ID：10782478
> 
> 赞同：1
> 
> 时间：2012-05-28T09:42:07.327
> 
> 标签：c#, wpf, silverlight, windows-phone-7, textblock

我有这个 wpf 代码。

```
<TextBlock Name="TB" TextWrapping="Wrap" Text="das   asd     asdasd  asd asd as d as   2323213      123123" Style="{StaticResource PhoneTextTitle1Style}"/> 
```

我需要在其中一个红色区域写一段文字。

![在此处输入图像描述](../Images/af4d08edecf318acd65c50f57d833e56.png)

同时我需要像这样指定文本的位置：

```
 TB.Inlines.Add(new Run() { Text="123", ContentX = 4, ContetLine= 1});
    TB.Inlines.Add(new Run() { Text="B", ContentX = 6, ContentLine= 2});
    TB.Inlines.Add(new Run() { Text="55555", ContentX = 7, ContentLine= 4}); 
```

可以使用具有自定义文本颜色和样式的内联添加文本。

而且我不知道字体大小和文本将在哪里换行。

**编辑 1**：

文本可以不同。

字符可以设置样式（颜色、字体大小、文本样式）。

我需要完整的字符和指针数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:50:58.933

可能是正则表达式？（使用 System.Text.RegularExpressions）要找到第一个空格，代码将是：

```
 [a-z]+ 
```

然后您只需计算找到的字符并剪切字符串。

# android - Android - 布局在 3.1 选项卡中不占据整个屏幕

> ID：10782481
> 
> 赞同：0
> 
> 时间：2012-05-28T09:42:24.107
> 
> 标签：android, android-layout

我正在 3.1 选项卡上测试我的应用程序。尽管为其中一个布局包含了一个 fill_parent 属性，但它并没有占据整个屏幕。这个 Android 版本有什么特别的问题吗？我需要做哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:49:45.800

// 你需要在 android manifest,xml 中添加支持屏幕

```
<supports-screens android:resizeable=["true"| "false"]
                  android:smallScreens=["true" | "false"]
                  android:normalScreens=["true" | "false"]
                  android:largeScreens=["true" | "false"]
                  android:xlargeScreens=["true" | "false"]
                  android:anyDensity=["true" | "false"]
                  android:requiresSmallestWidthDp="integer"
                  android:compatibleWidthLimitDp="integer"
                  android:largestWidthLimitDp="integer"/> 
```

# java - servlet 中的 Chrome PDF 打印预览错误

> ID：10782482
> 
> 赞同：0
> 
> 时间：2012-05-28T09:42:27.443
> 
> 标签：java, google-chrome, pdf, crystal-reports

当我尝试打印从 servlet 生成的 pdf 时，我在 google-chrome 中的打印预览出现问题。错误仅出现在默认的 pdf 插件中，它适用于 Adob​​e pdf 插件。servlet中pdf输出的代码：

```
response.setContentType("application/pdf");
        response.setHeader("Cache-Control","public");
        response.setHeader("Content-Disposition", "inline; filename=\"crreport.pdf\""); 

        /*if (byteArrayInputStream != null){
            byteArray = new byte[1024];
            while((bytesRead = byteArrayInputStream.read(byteArray)) != -1) {
                response.getOutputStream().write(byteArray, 0, bytesRead);  
            }
        }else {
            throw new Exception("byteArrayInputStream is null!");
        }*/

        if (byteArrayInputStream != null){
            byteArray = new byte[byteArrayInputStream.available()];
            byteArrayInputStream.read(byteArray);
            response.setContentLength(byteArray.length);

            response.getOutputStream().write(byteArray);

        }else {
            throw new Exception("byteArrayInputStream is null!");
        }

        System.out.println("End");
        response.getOutputStream().flush();
        response.getOutputStream().close(); 
```

在 Chrome 错误日志中，当我尝试预览生成的 pdf 时： *Ignoring plugin with unexpected MIME type application/pdf (expected application/x-google-chrome-print-preview-pdf)*

但是，如果我使用 chrome 页面右下角的默认保存按钮保存此 pdf 并从本地计算机打开它，则预览有效。

我尝试了 googleit，但在大量关于 chrome pdf 插件的问题中找不到任何有用的信息。有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:09:38.940

使用 available as 文件长度是错误的；根据定义，它是可以立即读取而不会阻塞的部分（= 等待读取下一部分）。它可能经常给出长度。不应关闭响应的输出流。

```
 if (byteArrayInputStream == null){
        throw new Exception("byteArrayInputStream is null!");
    }
    ByteArrayOutputStream byteArrayOS = new ByteArrayOutputStream();
    org.apache.commons.io.IOUtils.copy(byteArrayInputStream, byteArrayOS);

    byteArray = byteArrayOS.toByteArray();
    response.setContentLength(byteArray.length);
    response.getOutputStream().write(byteArray);

    System.out.println("End");
    response.getOutputStream().flush();
    //response.getOutputStream().close(); 
```

导致错误的原因：可能在两个插件的不同资源使用情况下可用的行为不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:00:05.033

最后，我弄清楚了我的主要问题是什么。我尝试使用 Eclipse 插件的水晶报告生成 pdf 报告。似乎 CR4E 生成的 byteArrayInputStream 以某种方式损坏，以至于它仅在 Chrome 默认 pdf 插件中不起作用。它可以使用 iText 库解决。基于 CR4E byteArrayInputStream 使用 iText 组装的 PDF 可以正常预览和打印。

# iphone - 使用http请求xcode请求谷歌主页 - 目标C

> ID：10782487
> 
> 赞同：1
> 
> 时间：2012-05-28T09:42:44.057
> 
> 标签：iphone, objective-c, xcode, ipad

以下是我用于 http 请求的代码行。在运行模拟器时，我只得到“显示的连接”.. 有人可以帮助我使用正确的代码以显示谷歌主页。谢谢。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http:www.google.com"] cachePolicy: NSURLRequestUseProtocolCachePolicy timeoutInterval: 15.0];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest: request delegate:self];

    if(connection){
        //connect
        label.text = @"connecting .....";

    }else{
        //error

    }
}

-(void) connection: (NSURLConnection *)conenction didReceiveData:(NSData *)data{

    response =  [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

}

-(void) connectionDidFinishLoading:(NSURLConnection *)connection{
    connection = nil;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-28T09:51:05.820

试试这个

```
NSURL *url = [NSURL URLWithString:@"http://www.google.com"];

if (![[UIApplication sharedApplication] openURL:url])
   NSLog(@"%@%@",@"Failed to open url:",[url description]); 
```

# iphone - 如何将用户设置的值保留为 UISwitch？

> ID：10782489
> 
> 赞同：0
> 
> 时间：2012-05-28T09:42:51.357
> 
> 标签：iphone, ios, uiswitch

我从界面生成器中获取了 UISwitch。那个时候它的状态是ON。运行应用程序后当我将它的位置更改为OFF并转到另一个屏幕并再次返回该屏幕时，开关状态显示ON而不是我之前设置的OFF。任何人都可以告诉我如何显示我设置的 UISwitch 位置或状态。现在，当我来到这个开关屏幕时，它总是显示为 ON。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:47:23.527

当您更改值时，将其保存到 NSUserDefault，因此当您再次返回该屏幕时，您会查看首选项值并将其设置为开关

```
- (void)saveValue  {
    NSUserDefaults *preferences = [NSUserDefaults standardUserDefaults];
    [preferences setBool:value forKey:@"switchOnOff"];
    [preferences synchronize];
}

- (BOOL)readValue  {
    NSUserDefaults *preferences = [NSUserDefaults standardUserDefaults];
    return [preferences boolForKey:@"switchOnOff"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:48:02.667

当您更改开关状态时，将值作为整数存储在 NSUserDefaults 中，以及您的开关所在的 viewController 的 viewDidAppear 方法中。只需通过像这样从 NSUserDefaults 获取值来设置开关状态

```
//store value to nsuserdefaulrs
    [[NSUserDefaults standardUserDefaults] setBool:switch.on forKey:@"switchStatus"];

//get value from nsuserdefaulrs

[switch setOn:[[NSUserDefaults standardUserDefaults] boolForKey:@"switchStatus"]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T09:49:22.310

有一个 UISwitch 的插座，

```
@property (retain, nonatomic) IBOutlet UISwitch *sswitch; 
```

并建立连接。

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if( [[NSUserDefaults standardUserDefaults] boolForKey:@"switch"] )
    {
        [sswitch setOn:YES]
    }
    else
    {
        [sswitch setOn:NO]
    }
} 
```

并且每当开关状态改变时，将值保存在`NSUserDefaults`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T09:49:50.603

您必须将值保存在
1\. 模型类
2\. NSUserDefaults
3\. Plist
4\. 文档文件中。

最好的方法是模型类。您将在 Stackoverflow 中轻松获得这些代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T09:51:15.663

如果它是您在 IB 中添加的开关，您可以在那里设置其初始状态。否则，在将开关链接到 IBOutlet 后，您可以在 viewDidLoad 中添加如下内容：

[保存密码设置：否]；

它会将开关设置为关闭状态。您需要确保开关链接到 IBOutlet 变量。

# javascript - javascript。ajax完成功能后，'a'不再可点击，为什么？

> ID：10782492
> 
> 赞同：0
> 
> 时间：2012-05-28T09:43:13.737
> 
> 标签：javascript, html, ajax

我还有一个小问题。我正在使用 ajax 并且工作正常。但是在 ajax 完成他的工作之后，我想更改元素属性，例如 backgroundImage。它也工作正常。但是更改后的元素现在第二次无法再点击了..有人可以帮我吗..这是我的代码：

```
function ajaxdelete(){
        $.ajax({
            url: "/ajaxdelete/",
        }).complete(function(){
            kids = document.getElementById('table1').getElementsByTagName('td');
            for (var i=0; i < kids.length; i++) {
              kids[i].style.backgroundImage = "none";
            };

        });

    } 
```

我的html是这样的：

```
<td style="background-image: url("../static/images/ok.png");"><a onclick="postajax1()"><input type="hidden" name="arg1" value="10"/><input type="hidden" name="arg2" value="3"/>0,24*</a></td> 
```

所以在ajax调用之后，背景必须再次干净，并且'a'标签必须第二次再次点击......换句话说，postajax1（）函数必须是可调用的并且能够再次设置背景图像回到初始状态。

请帮忙！

非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:05:48.633

使用 Jquery 来定位你的类名怎么样？

`function ajaxdelete(){`

```
 $.ajax({
        url: "/ajaxdelete/",
    }).complete(function(){
        kids = $('#table1 td.className');
        kids.css('background-image','none');
    });
} 
```

# jquery - JQuery CSS 选择器 e.fn.e.init

> ID：10782493
> 
> 赞同：6
> 
> 时间：2012-05-28T09:43:14.867
> 
> 标签：jquery, html, css

有时我使用 jquery 来测试我的 css。通常我会使用一个简单的选择器（在 Chrome Web Developer 控制台中）

我会输入类似的东西`$('.topclass div')`然后回来

```
e.fn.e.init[125] 
```

作为`object`包含节点的javascript。（通常它是一个相当复杂的选择器，但有时它很简单）。

为什么我会得到这个？这是否意味着缺少标签或我的选择器错误？

编辑：html基本上是嵌套的div（可能是因为它也有它的子div吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T09:59:47.150

这意味着您的选择包含太多匹配项，并且开发人员工具会缩短它们在控制台中的表示。

在控制台中试试这个：

```
var a = []
for (var i = 0; i < 10; i++) { a.push('foobar'); } 
```

如果你尝试检查`a`，你会看到`["foobar", "foobar", "foobar", "foobar", "foobar", "foobar", "foobar", "foobar", "foobar", "foobar"]`。现在，添加更多元素：

```
for (var i = 0; i < 100; i++) { a.push('foobar'); } 
```

现在，如果您尝试检查它，您将看到`Array[110]`.

本质上并不意味着您的选择器是错误的，但如果您期望更少的元素，那么它可能是错误的。

# c# - 从类访问表单方法而不创建新实例

> ID：10782497
> 
> 赞同：1
> 
> 时间：2012-05-28T09:43:21.507
> 
> 标签：c#, methods, delegates, controls

我最近稍微更改了我的项目以包含一个接口以更好地集成，但这意味着要移动一些最初位于主窗体上的方法而不是其他类。我真的很困惑如何从继承自我的界面的类中访问我的主表单（用于更新表单控件）上的方法。下面是一些应该有助于清晰的代码片段。

首先，这是我在主窗体上的方法，它更改窗体控件并位于我的主窗体上。

```
//main form
public partial class BF2300 : Form
{
public void setAlarmColour(byte[] result, int buttonNumber)
    {
        if (result != null)
        {
            this.Invoke((MethodInvoker)delegate
            {

                if (result[4] == 0x00)
                {
                    this.Controls["btn" + buttonNumber].BackColor = Color.Green;
                }
                else
                {
                    this.Controls["btn" + buttonNumber].BackColor = Color.Red;
                }

            });

        }
    }
 } 
```

最后是我需要访问的类方法：

```
//class which needs to access method in main form

class bf2300deviceimp : IdeviceInterface
{
 public void start(string address, int port, int i)
    {
        if (timer == null)
        {
            timer = new System.Timers.Timer(1000);

            timer.Elapsed += delegate(object sender, ElapsedEventArgs e) { timerElapsed(sender, e, address, port, i); };
        }
        timer.Enabled = true;
        // MessageBox.Show("Thread " + i + " Started.");
    }

    public void timerElapsed(object sender, ElapsedEventArgs e, string address, int port, int i)
    {
        this.newconnect(address, port, i);
    }

   public void newconnect(string address, int port, int buttonNumber)
    {

        try
        {
            byte[] result = this.newSendCommandResult(address, port, bData, 72);

           // needs to access it here.

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }

    }
} 
```

任何建议将不胜感激。我只是不知道该怎么做。我不能简单地创建我的主表单的新实例，因为我需要引用当前表单。起初我认为将 setAlarmColour 移动到表单中可以让我可以访问表单控件，这是真的，但后来我无法访问该方法本身，所以我真的没有更好的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:45:30.967

您可以将该`setAlarmColour`方法声明为静态，然后简单地`BF2300.SetAlarmMethod`从您的界面调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:57:35.557

最好的方法是使用事件。否则，如果它是父表单，您可以使用

((MainForm) currentform.Parent).SetAlarmColor()

事件：

```
 public delegate void SetDelegate(byte[] result, int buttonNumber);
        public event SetDelegate SetAlarmColor; 
```

在你的孩子班上做一个代表和活动。

```
Child child = new Child();

     child.SetAlarmColor += new Child.SetDelegate(child_SetAlarmColor); 
```

在创建子表单时使用该事件

# c# - Asp.net 自动回发

> ID：10782500
> 
> 赞同：0
> 
> 时间：2012-05-28T09:43:33.630
> 
> 标签：c#, asp.net, autopostback

有没有办法将项目添加到下拉列表（或任何其他带有列表的控件），并且当 SelectedIndexChange 发生时，它不会在每次事件发生时继续添加所有项目？我想一种方法是在添加代码之前清除列表，但还有另一种方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:46:19.073

检查`Page.ISPostBack`Page_Load 事件。

```
if (!page.IsPostBack)
{

//Fill the Drop down

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T09:46:41.793

看起来您正在将项目添加到`Page_Load`事件列表中。如果您这样做，在这种情况下，一旦`SelectedIndexChanged`发生，它将再次添加项目。您可以检查其 PostBack 是否不添加项目。

```
if(!Page.IsPostBack) // First time only 
 {
  //Add items to list
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T09:47:38.233

我假设您在 PageLoad 事件内的 PostBack 上绑定下拉菜单。采用

```
if(!Page.IsPostback)
{
//do the binding here ...
} 
```

并且当您的页面回发时（下拉值更改后，它不会再次绑定，因为该页面不是新加载，现在是回发）

# jquery - 在 jquery cookie 中设置一个值的过期时间

> ID：10782501
> 
> 赞同：0
> 
> 时间：2012-05-28T09:43:36.763
> 
> 标签：jquery, cookies

我正在使用 jQuery cookie 设置 3 个值说`x`，`y`并且`z`我想`z`在 365 天后过期`x`，但不会过期`y`。

```
$.cookie("MyTestCookie", xyz, { expires: 999999 }); 
```

我使用以下方法拆分了值：

```
var xVal =  my_cookie_value.substring(0);
var yVal =  my_cookie_value.substring(1);
var zVal =  my_cookie_value.substring(2);

$.cookie("MyTestCookie", zVal, { expires: 365 }); 
```

提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:51:48.060

你正在做的是

```
$.cookie("MyTestCookie", xyz, { expires: 999999 });  
$.cookie("MyTestCookie", zVal, { expires: 365 }); 
```

这只是用第二个 cookie 替换第一个 cookie 并更新值和过期时间，因为名称 ( `MyTestCookie`) 相同

你可以做的是：

```
$.cookie("X-MyTestCookie", xVal, { expires: 99999 }); 
$.cookie("Y-MyTestCookie", yVal, { expires: 99999 }); 
$.cookie("Z-MyTestCookie", zVal, { expires: 365 }); 
```

请注意 cookie 名称不同 ( `X-MyTestCookie`,`Y-MyTestCookie`和`Z-MyTestCookie`) - 这会将值放在不同的 cookie 中...

或者

```
$.cookie("MyTestCookie", xVal + "%" + yVal, { expires: 99999 }); 
$.cookie("Z-MyTestCookie", zVal, { expires: 365 }); 
```

在第一行中，该`%`字符用作分隔值的分隔符 - 然后您需要在获取 cookie 时拆分值。

# api - 关闭窗口，登录后重定向到旧页面[客户端程序]

> ID：10782503
> 
> 赞同：0
> 
> 时间：2012-05-28T09:43:45.463
> 
> 标签：api, redirect, youtube, oauth-2.0, client-side

我正在使用 youtube api，因此使用 Oauth 2.0 进行客户端授权。

> [https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Client_Side_Web_Applications_Flow](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Client_Side_Web_Applications_Flow)

当单击登录打开一个新窗口以使用 google oauth 2.0 进行授权并被重定向时，它会在新窗口中打开重定向的 Url（用于授权），登录后如何/无论成功还是失败，我都会关闭登录窗口并使用令牌和结果返回原始站点。

如果您要建议一个会话变量来实现这一点，我认为使用客户端编程方法这是不可能的。

我需要与此处类似的登录/授权方法：

> [http://gdata-samples.googlecode.com/svn/trunk/gdata/youtube_upload_cors.html](http://gdata-samples.googlecode.com/svn/trunk/gdata/youtube_upload_cors.html) 我试图破译代码，但它没有成功。

我更喜欢客户端方法，因为我打算做的事情是纯粹的客户端驱动（JS）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T18:26:02.473

最好的方法可能是 HTML5 postMessage。

`window.opener`但是，在我*的 OAuth 2.0 入门*书（由 O'Reilly 出版）中，我有一个使用标准 JavaScript 的可行方法。这在最近的浏览器中运行良好：

我有一个页面叫做`oauth2callback.html`. 此页面是您的`redirect_uri`. 它从 URL 中的哈希片段中解析出访问令牌`#`，调用 JS 函数`window.opener`来设置访问令牌，然后自行关闭：

```
<html>
<body>
<script type="text/javascript">
var oauthParams = {};

// parse the query string
// from http://oauthssodemo.appspot.com/step/2
var params = {}, queryString = location.hash.substring(1),
    regex = /([^&=]+)=([^&]*)/g, m;
while (m = regex.exec(queryString)) {
  oauthParams[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
}

window.opener.setOauthParams(oauthParams);
window.opener.callApi();
window.close();
</script>
</body>
</html> 
```

父页面（通过在弹出窗口中打开 OAuth 流来启动整个过程）有一个简单的 JavaScript 函数`setOauthParams`，它接受参数并将它们存储在全局变量中：

```
function setOauthParams(oauthParamsPassed) {
  this.oauthParams = oauthParamsPassed;
} 
```

我还有其他代码可以启动 OAuth 流程并使用 jQuery 调用 API（在我的例子中是 Google 联系人），但听起来你不需要那样。

# linux - Count 每行出现的次数

> ID：10782504
> 
> 赞同：1
> 
> 时间：2012-05-28T09:43:50.437
> 
> 标签：linux, unix, awk, grep

我有以下文件

```
ENST001 ENST002 4 4 4 88 9 9
ENST004 3 3 3 99 8 8
ENST009 ENST010 ENST006 8 8 8 77 8 8 
```

基本上我想计算ENST *在每一行中重复了多少次，所以预期的结果是

```
2
1
3 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T09:47:34.897

试试这个（并[在此处查看它的实际效果](http://ideone.com/1rleL)）：

```
awk '{print gsub("ENST[0-9]+","")}' INPUTFILE 
```

# javascript - “在后台”执行 JavaScript

> ID：10782505
> 
> 赞同：2
> 
> 时间：2012-05-28T09:43:52.123
> 
> 标签：javascript, performance, rendering

您是否遇到过以下问题：JavaScript 必须运行数百个性能密集型函数调用，这些函数调用无法跳过并导致浏览器在几秒钟内感觉崩溃（例如，没有滚动和单击）？示例：假设需要 500 次调用来获取元素高度，然后进行数百次 DOM 修改，例如设置类等。不幸的是，没有办法避免性能密集型任务。网络工作者可能是一种方法，但它们并没有得到很好的支持（IE ...）。我正在考虑基于超时或回调的逐步渲染，让浏览器有时间在两者之间做一些事情。在这方面你有什么经验可以分享吗？

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:56:55.837

看看这个主题，这是与您的问题相关的一些事情。

[如何提高页面中 java 脚本的性能？](http://jqfaq.com/how-to-improve-the-performance-of-your-java-script-in-your-page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:20:10.873

如果你做了这么多的 DOM 操作，你可能应该克隆有问题的元素或 DOM 本身，并在缓存版本上进行更改，然后一次性或在更大的部分中替换整个 ting，而不是在时间。

需要时间的不是计算和函数等，而是 DOM 操作本身，并且只做一次，或者分部分做几次，将大大提高你正在做的事情的速度。

据我所知，网络工作者并不是真正用于 DOM 操作，而且我认为使用它们不会有太多优势，因为问题可能是您正在一个一个地更改大量元素的事实而不是在一批中将它们全部替换在 DOM 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:03:27.953

在这种情况下，我可以推荐以下内容：

1.  再次检查代码。尝试按照建议应用一些标准优化，例如减少查找，使 DOM 修改离线（例如使用 document.createDocumentFragment()...）。使用 DOM 片段只能以有限的方式工作。检索元素高度和进行复杂的格式化是不够的。
2.  如果 1\. 不能解决问题，请创建按需运行的渲染解决方案，例如由滚动事件触发。或者：使用超时逐步渲染，让浏览器有时间在两者之间执行某些操作，例如单击按钮或滚动。

2中逐步渲染的简短示例：

```
var elt = $(...);
function timeConsumingRendering() {

    // some rendering here related to the element "elt"

    elt = elt.next();
    window.setTimeout((function(elt){
        return timeConsumingRendering;
    })(elt));
}
// start
timeConsumingRendering(); 
```

# mysql - SQL查询——动态子查询

> ID：10782506
> 
> 赞同：2
> 
> 时间：2012-05-28T09:43:54.243
> 
> 标签：mysql, sql

我在尝试创建查询时遇到问题：

选择所有在特定周内未完成*所有*同行评审的学生。

背景：每周，每个学生都必须对同一组的同龄人进行同行评审。

每个组的大小可以不同，这是我遇到的问题。

这是我目前的测试数据：

![同行评审表](../Images/1c21a1f29492cc6bf7e1a8cdf2518a28.png)

![学生桌](../Images/70f4ab69099e594791132ec4d7495219.png)

表 1：同行评审表
表 2：学生表。

这是我的初始查询，根据他们所做的同行评审的数量对所有学生进行分组。我现在需要检查是否`count(*)`小于每个学生的小组规模：

```
SELECT * 
FROM peerreview
RIGHT JOIN student 
ON student. studentID = peerreview.reviewer
WHERE week = 11
GROUP BY studentID
HAVING Count(*) < ???? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:55:44.183

以下查询将返回已查看同一组中所有学生的学生。

```
 SELECT a.reviewer, 
       a.groupid 
FROM   (SELECT student2.studentID AS reviewer, 
               student1.groupid, 
               Count(*)           AS cnt 
        FROM   student student1 
               INNER JOIN peerreview 
                       ON student1.studentID = peerreview.reviewee 
               INNER JOIN STUDENT STUDENT2 
                       ON student2.studentID = peerreview.reviewer 
        WHERE  student2.groupid = student2.groupid 
               AND peerreview.week = 11 
        GROUP  BY student1.groupid, 
                  student2.studentID) a 
       INNER JOIN (SELECT groupid, 
                          Count(*) - 1 AS cnt 
                   FROM   student 
                   GROUP  BY groupid) b 
               ON a.groupid = b.groupid 
                  AND a.cnt = b.cnt 
```

[见 SqlFiddle](http://www.sqlfiddle.com/#!2/bab2e/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:18:24.197

```
Select S.StudentId As Reviewer
    , S1.StudentId As StudentYetToBeReviewed
    , Weeks.WeekNum
From Student As S
    Join Student As S1
        On S1.GroupId = S.GroupId
            And S1.StudentId <> S.StudentId
    Cross Join  (
                Select 7 As WeekNum
                Union All Select 11
                ) As Weeks
Where Not Exists    (
                    Select 1
                    From PeerReview As P1
                    Where P1.reviewee = S1.StudentId
                        And P1.Week = Weeks.WeekNum
                    )
Order By WeekNum, reviewer 
```

这会按周为您提供审阅者和他们需要审阅的人员的列表。在真正的解决方案中，您可能希望用不同的周列表替换周的交叉连接，在这些周中应该进行审查。

[SQL 小提琴](http://www.sqlfiddle.com/#!2/b02c4/1)版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:54:41.330

```
 select distinct s1.* 
  from student s1 inner join student s2 on s1.groupId = s2.groupeId
               left join peerreview pr on pr.revieweer = s1.studentId
                    and pr.reviewee =  s2.studentId
  where pr.Week = ? and  pr.revieweer is null and s1.studentId <> s2.studentId 
```

# ios - 将视图更改为 Storyboard 中的另一个视图并将数据共享到新视图

> ID：10782507
> 
> 赞同：0
> 
> 时间：2012-05-28T09:43:55.277
> 
> 标签：ios, objective-c, uitextfield, uistoryboard, uidatepicker

有一个问题，我正在尝试返回到以前的视图并将一些数据共享到我要返回的框架。数据将是日期和时间，我想将其发送到 textField。

例如，我调用日期 *returneddate 和我调用 *dateTime 的 textField。视图调用 *PickDateTime 和 SubmitEventsP2。

如果您需要更多信息，请询问我，如果可以的话，我会添加它，以便您更轻松地帮助我。

我正在使用 Xcode 4.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:51:39.747

好的..它很简单..您应该使用委托...如果我理解正确，您在辅助视图上，当您返回主视图时，您希望将数据从第二个视图发送回主视图， 对？

因此，在您的第二个视图中，在 .h 文件中，在界面顶部，您将声明委托：

```
@class nameOfTheViewController;

@protocol nameOfTheViewControllerDelegate <NSObject>
-(void)methodNameOfDelegateReturning:(NSString *)string otherString:(NSString *)string2;
@end 
```

在您的界面中，仍然在 .h 中，您将创建此委托的引用，例如：

```
@property(nonatomic, weak) id <nameOfTheViewControllerDelegate> delegate; 
```

之后，在 nameOfTheViewController 的 .m 中，您将执行以下操作：

```
@synthesize delegate = _delegate; 
```

在 nameOfTheViewController 文件中创建委托后，您将调用刚刚创建的委托方法，准确地在何时何地返回到前一个视图，并用您想要传回的参数填充它......当然，在您的 mainViewController，就在您的 didPrepareForSegue 方法中，您将创建一个 nameOfTheViewController 类的实例并将其委托属性设置为 self...为了使这成为可能，在您的 mainViewController .h 中，您必须符合 nameOfTheViewControllerDelegate 协议。

# backbone.js - Backbone - 在集合中创建多个模型 - 服务器端

> ID：10782510
> 
> 赞同：1
> 
> 时间：2012-05-28T09:44:22.263
> 
> 标签：backbone.js, backbone-views, backbone-routing

我提供了一个表格供用户上传自己的数据。我使用 ajax-form-submit 然后解析数据以创建大量模型（上传的 csv 中每行一个）。

现在，我想将模型创建到预定义的集合中。

我可以使用 add 来获取模型数组，但不幸的是，它不会在服务器端发送 PUSH。我知道我可以为每个模型迭代和创建 .create 但假设我有 10k 个模型，它会创建 10k 个调用。听起来不合理。我错过了什么吗？

另一种方法是在服务器上接受多个模型并使用 .ajax 调用，然后手动添加到集合中以进行 UI 渲染。

寻找最佳路线。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:30:59.943

Backbone 和 REST 根本无法涵盖所有​​实际用例，例如您的批量创建示例。他们也没有批量删除的官方模式，这也非常普遍。我对他们为什么拒绝解决这些极其常见的用例感到困惑，但无论如何，你在这里留给你自己的良好判断。所以我建议在你的集合中添加一个`bulkSave`or`import`方法。这应该将带有 CSV 表单数据的 AJAX POST 请求发送到服务器，服务器应该保存信息，如果一切顺利，返回新创建的模型的 JSON 数组。您的集合应该在 POST 响应中获取该 JSON 数组并将其传递给`reset`（`parse`以及如果您需要特殊解析）。

绝对不要为每个模型（CSV 中的行）发出 POST 请求，尤其是如果您计划拥有 10K 个模型。但是，需要明确的是，如果您的 UI 显示基于每条记录的实时进度和错误处理（例如，保存了 65 个中的 23 个），那么为几十个模型执行该模式并不是完全糟糕的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T18:16:24.940

我喜欢@PeterLyons 的务实方法，但另一个想法可能是尝试将您的*非 REST*功能转换为*REST*功能。

你想要的是一次创建一堆模型。REST 不允许同时创建多个资源。REST 喜欢一次*创建*一个资源。

`Bulk`没问题，我们用它自己的 url 和它自己的*POST*动词创建一个新的资源调用。此`attributes`模型的 是您要创建的模型数组。

使用这种方法，您还可以解决未来的功能，例如一次*修改*和*删除*多个模型。

现在您只需要弄清楚如何将模型数组与这个新模型相关联，以及如何使`Bulk.toJSON`方法正确响应。

# sql-server - SQL Server 通用触发器创建

> ID：10782515
> 
> 赞同：2
> 
> 时间：2012-05-28T09:44:34.103
> 
> 标签：sql-server, triggers, ntext

我正在尝试在 SQL Server 中创建一个通用触发器，它可以复制表 A 中的所有列数据并将它们插入表 B 中的相应字段中。

我面临的问题很少。

我需要在以下三种情况下出现此副本`INSERT`：`DELETE`和`UPDATE`。

1.  触发器需要在 CUD 操作之后触发。使用 AFTER 会引发 SQL 错误，说`ntext`在插入时不支持 etc。如何解决此错误？

2.  而不是 if used 可以用于`INSERT`但不能用于删除。有没有办法为删除操作做到这一点？

3.  有没有办法可以在触发器中编写一个通用代码，它可以适用于各种表（我们可以假设表 a 中的所有列都存在于 b 列中）

我不精通触发器或 SQL Server 中的 DDL。

欣赏是否有人可以为我提供一些解决方案。

谢谢本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:10:08.957

[创建触发器 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189799%28v=sql.105%29.aspx)

1.  使用`nvarchar(max)`而不是`ntext`.
2.  您可以有一个`instead of`删除触发器。
3.  您可以有一个触发器来处理一张表的插入/更新/删除，但您不能将触发器连接到多个表。

# css - 不透明度为 0.5 的 CSS 背景图像

> ID：10782516
> 
> 赞同：1
> 
> 时间：2012-05-28T09:44:44.973
> 
> 标签：css, background-image, opacity

我想要一个背景图像，来自一个不透明度低的 URL（所以我不能手动编辑它的不透明度）
并在它上面写内容：
但内容应该是正常的 1 不透明度

[http://jsfiddle.net/ca11111/BAJN5/](http://jsfiddle.net/ca11111/BAJN5/)

编辑： http: [//jsfiddle.net/ca11111/BAJN5/1/](http://jsfiddle.net/ca11111/BAJN5/1/)稍微好一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:53:43.857

`opacity`财产是继承的。如果您`opacity`为一个元素设置 < 1，则其所有子元素也将具有该 < 1 值，`opacity`并且*您无法更改 this*。

实现您想要的最简单的方法是使用*多个背景*并在图像顶部使用半透明背景。当然，这会引发一些浏览器兼容性问题（参见[多背景支持](http://caniuse.com/#feat=multibackgrounds)和[渐变支持](http://caniuse.com/#feat=css-gradients)）。

此处的示例：http: [//dabblet.com/gist/2818293](http://dabblet.com/gist/2818293)（应该在 IE10、Opera 11+ 和其他桌面浏览器的每个非恐龙版本中工作）

还可以选择不在父级上设置背景，而是在没有自己的子级（或伪元素）的子级上设置背景，该子级是*绝对定位*的，并且具有`z-index`比父级（具有`rgba`背景）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:06:31.687

你的意思是这样的？[http://jsfiddle.net/BAJN5/2/](http://jsfiddle.net/BAJN5/2/)

尝试这样设置：

```
<div style="position:relative"> <!-- wrapper div (relative) -->
    <div style="background:url(an-image-url) no-repeat center center; opacity:0.5; height:220px"></div> <!-- half opacity background -->
    <span style="opacity:1; position:absolute; z-index:1"><!-- full opacity (absolute) -->
        some text
        ......
    </span>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T10:12:25.617

看到我通过伪元素制作：之前和：之后

**HTML**

```
<div class="addFav">
 <div>asdfasfasfafs</div>
</div> 
```

**CSS**

```
.addFav:before {
    background:url(http://lorempixel.com/400/200/sports) no-repeat;
    border:1px solid red;
    height:200px;
    width:400px;
    color:#000;
    padding:15px;
    position:absolute;
    content:"";
    opacity:0.1;    
}

.addFav {
    height:200px;
    width:400px;
    color:red;
    padding:15px;
    position:relative
} 
```

看演示：- [http://jsfiddle.net/8LFLd/66/](http://jsfiddle.net/8LFLd/66/)

在这里更新了演示 [http://jsfiddle.net/8LFLd/68/](http://jsfiddle.net/8LFLd/68/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T09:49:39.373

[此页面](http://nicolasgallagher.com/css-background-image-hacks/)显示了一种使用伪元素模拟背景图像不透明度的技术

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T09:53:31.163

嘿，我想你应该想要这个

定义您的 Main Div **rgba**属性

```
div {
   background: rgba(200, 54, 54, 0.5);
} 
```

更多信息[http://css-tricks.com/rgba-browser-support/](http://css-tricks.com/rgba-browser-support/)

# java - 为什么这个java代码不工作没有错误

> ID：10782518
> 
> 赞同：-2
> 
> 时间：2012-05-28T09:44:54.197
> 
> 标签：java, sql, runtime-error

```
package setup;

import com.mysql.jdbc.Connection;
import com.mysql.jdbc.Statement;
import java.sql.DriverManager;
import java.sql.ResultSet;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

public class frnd_list extends javax.swing.JFrame {
String x=null;

public frnd_list(){
    initComponents();
    DefaultTableModel x=(DefaultTableModel)tbl.getModel();

    try {
    int zx=0;

Class.forName("java.sql.Driver");

Connection c=(Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/dtb","root","");
Statement s=(Statement) c.createStatement();
String q="select fullname, username from acc ;";

ResultSet rs=s.executeQuery(q);

while (rs.next())
{
    String a1=rs.getString("fullname");
    String a2=rs.getString("username");
String a3=a1+"  ("+a2+")";
zx=zx+1;

x.addRow(new Object[]{a3});}
System.out.print(zx);

}

catch(Exception e){JOptionPane.showMessageDialog(null,e.getMessage());

} 
    }

    @SuppressWarnings("unchecked")
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        tbl = new javax.swing.JTable();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        tbl.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null}
            },
            new String [] {
                "friend List"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane1.setViewportView(tbl);

        jButton1.setText("Dashboard");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jButton2.setText("Profile");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 370, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
            .addGroup(layout.createSequentialGroup()
                .addGap(23, 23, 23)
                .addComponent(jButton1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jButton2)
                .addGap(68, 68, 68))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 263, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(7, 7, 7)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1)
                    .addComponent(jButton2))
                .addGap(0, 14, Short.MAX_VALUE))
        );

        pack();
    }                      

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         

this.setVisible(false);
dashboard obj = new dashboard(x);
obj.setVisible(true);
    }                                        

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    this.setVisible(false);
    new profile().setVisible(true);
    }                                        

    public static void main(String args[]) {
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(frnd_list.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(frnd_list.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(frnd_list.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(frnd_list.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }

        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new frnd_list().setVisible(true);
            }
        });
    }
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable tbl;
} 
```

此代码中没有一个错误。但是每次我调试它而不是打开 gui 界面时，它只显示绿色焦点中的下一行“public frnd_list（）{”行获得绿色焦点我不知道这意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:48:16.927

可能是因为您在该行创建了一个断点。尝试删除它或尝试运行而不是调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T09:54:42.743

将 Class.forName("java.sql.Driver") 替换为 Class.forName("com.mysql.jdbc.Driver") 并为 MySql Driver 设置类路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:53:09.540

使用**调试器**启动应用程序时，您可以处于单步模式，在源代码中，当前执行的行以绿色突出显示。通常有一个“运行”按钮（右指三角形）。有调试教程；这为这项基本任务提供了更好的见解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T09:53:25.647

如果您在 Eclipse 中调试，请尝试按 F6 进行下一步，然后按 F8 运行（直到下一个断点）。

# c# - 创建一个未绑定到会话或域的 HttpCookie？

> ID：10782522
> 
> 赞同：0
> 
> 时间：2012-05-28T09:45:07.300
> 
> 标签：c#, asp.net, cookies, session-cookies

我正在尝试将 cookie 从一个应用程序传递到另一个应用程序。这两个应用程序位于不同的服务器上。第一个应用程序（SharePoint 站点）在弹出窗口中打开第二个应用程序。在打开网站之前，应将 cookie 放入浏览器，其中包含登录用户（在 SharePoint 中）的用户名和密码 - 当然，出于安全目的，cookie 的值已加密。

另一方面，在作为 ASP.NET MVC3 Web 应用程序的第二个应用程序中，我创建了一个`HttpModule`尝试在浏览器中定位此 cookie、解密内容并针对 WCF 服务公开的某些用户存储对用户进行身份验证的程序。

这是模块中的代码：

```
 void httpApplication_AuthenticateRequest(object sender, EventArgs e)
    {
        HttpApplication httpApplication = sender as HttpApplication;
        if (httpApplication != null)
        {
            HttpCookie authCookie = httpApplication.Context.Request.Cookies["SPAuthentication"];
            if (authCookie != null)
            {
                String cookievalue = EncryptionManager.Current.DecryptStringAES(authCookie.Value, "p@s$w0Rd_Mo3T");
                String[] parts = cookievalue.Split(';');
                if (parts.Length == 2)
                {
                    String username = this.GetToken(parts[0]);
                    String password = this.GetToken(parts[1]);
                    FedAuthentication.Current.Signin(String.Format(@"{0}\IPREmployee", username), password);
                    httpApplication.Context.Request.Cookies.Remove("SPAuthentication");
                }
            }
        }
    } 
```

`authCookie`尽管我实际上可以在浏览器中看到 cookie（使用 FireBug），但它始终为空。我注意到的一件事是 cookie 绑定到会话，所以它应该随着会话过期。我认为这可能是问题所在。然后我做了一些研究，发现 ASP.NET 不允许跨域 cookie。那么有没有办法解决这个问题？

PS：我无法访问 SharePoint 应用程序的源代码，因此我无法确定那里发生了什么。我唯一确定的是 cookie 实际上被放入浏览器中。

# window - PyGTK 透明窗口

> ID：10782527
> 
> 赞同：2
> 
> 时间：2012-05-28T09:45:31.153
> 
> 标签：window, pygtk, transparent, cairo, pango

我希望窗口透明，但标签的不透明度为 100%。我怎样才能做到这一点？顺便说一句：当我升级到 Ubuntu 12.04 的统一界面时，我注意到 window.set_opacity 并没有像在 GNOME 上那样工作，但即使它确实如此，窗口内的所有内容也会变得透明。

这是我开始使用的代码...

```
#!/usr/bin/env python

import pygtk
pygtk.require('2.0')
import gtk
import pango
import time

class Clock:

  def __init__(self):
    me = gtk.Window(gtk.WINDOW_TOPLEVEL)
    me.connect("destroy", lambda w: gtk.main_quit())
    me.set_decorated(False)
    me.set_has_frame(False)
    me.set_resizable(False)
    me.set_property('skip-taskbar-hint', True)
    self.label = gtk.Label()
    self.label.modify_font(pango.FontDescription("FreeSerif Bold 50"))
    attr = pango.AttrList()
    fg_color = pango.AttrForeground(65535, 0, 0, 0, 65535)
    attr.insert(fg_color)
    self.label.set_attributes(attr)

    me.add(self.label)
    me.show_all()

  def update(self):
    self.label.set_text(time.strftime('%H:%M:%S'))
    return True

clock = Clock()
gtk.timeout_add(200, clock.update)
gtk.main() 
```

我在 askubuntu 上找到[了这个](https://askubuntu.com/questions/93088/making-gtk-window-transparent)主题，这正是我一直在寻找的，但是现在我在显示数字时钟时遇到了问题。任何帮助将不胜感激。

这是我的代码。

```
#!/usr/bin/env python

import pygtk
pygtk.require('2.0')
import gtk
import pango
import time
import cairo

class Clock (gtk.Window):
  def __init__(self):
    super(Clock, self).__init__()
    self.connect("destroy", lambda w: gtk.main_quit())
    self.set_decorated(False)
    self.set_has_frame(False)
    self.set_resizable(False)
    self.set_property('skip-taskbar-hint', True)
    self.label = gtk.Label()
    self.label.modify_font(pango.FontDescription("FreeSerif Bold 50"))
    attr = pango.AttrList()
    fg_color = pango.AttrForeground(65535, 0, 0, 0, 65535)
    attr.insert(fg_color)
    self.label.set_attributes(attr)

    self.screen = self.get_screen()
    self.visual = self.screen.get_rgba_visual()
    self.set_visual(self.visual)
    self.set_app_paintable(True)
    self.connect("draw", self.area_draw)

    self.add(self.label)
    self.show_all()

  def update(self):
    self.label.set_text(time.strftime('%H:%M:%S'))
    return True

  def area_draw(self, widget, cr):
    cr.set_source_rgba(.2, .2, .2, 0.5)
    cr.set_operator(cairo.OPERATOR_SOURCE)
    cr.paint()
    cr.set_operator(cairo.OPERATOR_OVER)

clock = Clock()
gtk.timeout_add(200, clock.update)
gtk.main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T23:17:04.263

好吧，你必须做很多事情才能制作这样的标签。最好的办法是重新发明轮子：做一个轮子。

绘制自己的标签。获取窗口上下文 (mywin.window.cairo_create())) 并跟踪 x、y。

```
def draw(*args):
    ctx = win.window.cairo_create()
    ctx.set_source_rgba(0, 0, 0, 0)
    ctx.set_operator(0) # OPERATOR_CLEAR
    ctx.paint()
    ctx.set_source_rgba(0, .6, 1, .3)
    ctx.arc(w/2, h/2, w/2, 0, 2*3.1415)
    ctx.fill()
    ctx.set_source_rgba(1, .8, 0, 1)
    ctx.show_text('29-May-1234') #you have some work for font, style and so on 
```

google 为您提供了一个使用 ctypes 从文件加载 ttf 字体的 hack；它在Linux上运行良好（我不知道win）。注意：以上假设您有一个合成管理器，或者... rgba for widget 是 None。还放一个

```
colormap = self.win.get_screen().get_rgba_colormap()
if colormap == None: colormap = self.win.get_screen().get_rgb_colormap()
gtk.widget_set_default_colormap(colormap) 
```

如果可能，设置 rgba，也值得一试：

```
if self.win.is_composited():print ('OK!')
else:self.bg = self.capt_screen()

...........

def capt_screen(self):
    x, y = self.win.get_position()
    win = gtk.gdk.get_default_root_window()
    w, h = win.get_size()
    pb = gtk.gdk.Pixbuf(0 , False, 8, w, h)
    self.win.hide()
    pb = pb.get_from_drawable(win, win.get_colormap(), 0, 0, 0, 0, w, h)
    self.win.show_all()
    if (pb != None):
        im = Image.fromstring('RGB', (w, h), pb.get_pixels())
        im = im.crop((x, y, x + self._w, y + self._h))
        im = im.convert('RGBA') 
        return im #or pb 
```

以上是“xp”透明效果：用你的胜利复制bg和bledit。仅当它不是正在运行的合成管理器时。可以用于小部件 - 留在桌面上，但 flickr 用于其他事情：在每个刷新窗口都必须隐藏自己，捕获 gb，绘图和显示。

PS：我有一个工作时钟示例，但我使用的是 png。如果您愿意，我可以通过邮件向您发送 tar.gz

# jsf - 如何在 GlassFish 中更新 Mojarra 版本

> ID：10782528
> 
> 赞同：13
> 
> 时间：2012-05-28T09:45:45.517
> 
> 标签：jsf, jsf-2, glassfish, upgrade, mojarra

我想更新我的 JSF 应用程序以使用 Mojarra 版本 2.1.8。我将这些行添加到 WAR 包的 POM 文件中：

```
<dependency>
    <groupId>org.glassfish</groupId>
    <artifactId>javax.faces</artifactId>
    <version>2.1.8</version>
</dependency> 
```

我还添加了 JSF 存储库。我的包是用 Mojarra 2.1.8 版成功构建的。但是当我打开 GlassFish 日志时，我看到部署了 Mojarra 版本 2.1.6。我错过了什么？我需要对 GlassFish 服务器进行一些配置吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-28T11:45:30.473

GlassFish 本身已经捆绑了 JSF，默认情况下，类加载优先于 webapp 中捆绑的类加载。您基本上需要告诉 GlassFish 改用 webapp 捆绑的 JSF。

编辑 webapp `/WEB-INF/glassfish-web.xml`（或者`/WEB-INF/sun-web.xml`如果您使用的是第一个 GF3 版本）以添加以下两个条目：

```
<class-loader delegate="false" />
<property name="useBundledJsf" value="true" /> 
```

然后，GlassFish 将改用 webapp 捆绑的 JSF。

或者，如果您对 GlassFish 具有完全的管理员控制权，那么您也可以将其复制到`/glassfish/modules`目录中，替换旧版本，以便将其应用于所有 web 应用程序。

# haskell - Haskell parsec 解析为可能

> ID：10782543
> 
> 赞同：1
> 
> 时间：2012-05-28T09:46:31.483
> 
> 标签：haskell, parsec

只是一个我无法解决的简单问题。

我想将字符串解析为 String 或 Maybe Double，其中空字符串或“n/a”被解析为 Nothing。例如：

```
data Value = S String | N (Maybe Double)

value::CharParser () Value
value = val <* spaces
    where val = N <$> v_number
           <|> S <$> v_string
           <|> N <$> v_nothing 
```

我在使用 v_nothing（以及引导和训练空白）时遇到问题。

谢谢。

编辑：

```
v_number :: CharParser () (Maybe Double)
v_number = do s <- getInput
          case readSigned readFloat s of
            [(n, s')] -> Just n <$ setInput s'
            _         -> empty

v_string :: CharParser () String
v_string = (many1 jchar)
    where jchar = char '\\' *> (p_escape <|> p_unicode)
          <|> satisfy (`notElem` "\"\\") 
```

我为 v_nothing 尝试了各种各样的事情，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:36:50.560

也许是这样的？

```
value = do skipMany space
           choice $ map try [
            do string "n/a" <|> (eof >> return [])
               return $ N Nothing,
            do d <- many digit
               return $ N $ Just (read d)
            -- do ...       
                            ] 
```

# autohotkey - 自动热键 - 图像搜索

> ID：10782545
> 
> 赞同：0
> 
> 时间：2012-05-28T09:46:36.327
> 
> 标签：autohotkey, errorlevel

我正在尝试通过将当前屏幕与所需屏幕的图像进行比较并查看它们是否匹配来测试 GUI。我为此使用 AutoHotKey 的 ImageSearch。

```
CoordMode, Pixel
ImageSearch,x,y,0,0,A_ScreenWidth,A_ScreenHeight,*255 C:\Documents and Settings\XYZ\Desktop\AutoHotkey\help window.bmp
if ErrorLevel=1
    Msgbox 0,Fail,Fail
if ErrorLevel=0
{
    MouseClick, left,  50,  191
    Sleep, 100
} 
```

我不断得到一个ErrorLevel = 1。关于如何解决此问题的任何建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-16T19:43:07.780

*255 把你弄乱了。这基本上使图像搜索无效，因为屏幕上的所有内容都将匹配图像。尝试更低的东西。您不太可能需要高于 *100

此外，作为一般提示，请尝试使用您正在搜索的图像的最小版本。

# java - GrailsParameterMap 在 Grails 中不可序列化

> ID：10782548
> 
> 赞同：4
> 
> 时间：2012-05-28T09:47:05.930
> 
> 标签：java, grails

在我在 tomcat 上运行并在应用程序服务器之间进行会话复制的 grails 应用程序中，当我按如下方式在 http 会话中保存地图时，出现异常 GrailsParameterMap is not Serializable -

```
session.nextUrl = [controller: controllerName,
                               action: actionName,
                               params: params] 
```

当我如下更改上面的代码片段时，即使 java.util.HashMap 实现了 Serializable，我也得到了同样的异常。

```
java.util.Map nextUrl = new java.util.HashMap()

nextUrl.put("controller", controllerName)
nextUrl.put("action", actionName)
nextUrl.put("params", params)
session.setAttribute("nextUrl", nextUrl) 
```

我还可以看到会话中的获取/设置工作正常。

我该如何解决这个问题。

在此先感谢，普拉尚特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T10:00:42.690

问题是在控制器中保存参数的`params`映射类型（`GrailsParameterMap`）没有实现`Serializable`接口，这就是你得到异常的原因。我现在想到的解决方案要求您专门为创建一个新的哈希图`params`并在那里复制所有参数并将其保存`HashMap`到会话中，例如：

```
// this is my pseudocode - haven't been doing groovy and java for long time
java.util.Map paramMap = new java.util.HashMap() // copy params here

foreach(p in params)
{
  paramMap.put(p.Key, p.Value)
}

java.util.Map nextUrl = new java.util.HashMap()

nextUrl.put("controller", controllerName)
nextUrl.put("action", actionName)
nextUrl.put("params", paraMap) // <- note paramMap, not params!

session.setAttribute("nextUrl", nextUrl) 
```

# php - 在 .htaccess 或 PHP 中进行 301 重定向是更好的做法吗

> ID：10782550
> 
> 赞同：1
> 
> 时间：2012-05-28T09:47:22.947
> 
> 标签：php, apache, .htaccess, redirect

简单的问题：

出于搜索引擎优化的原因，我正在尝试维护 301 重定向列表，我想知道将 .htaccess 与重定向规则一起使用是否更好，或者我应该在 PHP 中维护重定向列表。

如果您能解释为什么其中一个更好，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:52:40.307

将重定向保存在 .htaccess 中会更好地提高性能，因为每次重定向都不需要 PHP 解释器初始化。另一方面，如果您在 PHP 中进行处理（统计数据等），则可以进行额外的处理。如果您只想要简单的重定向而不需要其他任何东西，请将它们放在 .htaccess 中，只是为了提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:57:56.657

出于搜索引擎优化的目的，两者都不会产生影响，因为两者都会产生相同的结果；位置更改。两者都由服务器处理，并且对搜索引擎具有相同的影响。因此，在此基础上，选择对您来说最有效的处理方式。

# java - Android HttpClient 会挂起同时请求，直到我向另一台主机执行请求

> ID：10782553
> 
> 赞同：1
> 
> 时间：2012-05-28T09:47:27.800
> 
> 标签：java, android, httpclient

我在使用 DefaultHttpClient 时遇到问题。

如果我同时对同一台服务器（> 2）执行一些请求，它将挂起它们（不会收到任何响应）。所有下一个请求也将挂起。

这是代码。

```
public class ConnectionService {

    // Should be called once with application context
    public static void initWithContext(Context ctx) {
        // Creating custom multithread connection manager to handle multiple simultaneous requests
        HttpParams params = new BasicHttpParams();
        SchemeRegistry schemeRegistry = new SchemeRegistry();
        schemeRegistry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        ClientConnectionManager cm = new ThreadSafeClientConnManager(params, schemeRegistry);
        ConnManagerParams.setMaxTotalConnections(params, 200);
        ConnPerRoute cpr = new ConnPerRoute() {
            @Override
            public int getMaxForRoute(HttpRoute httpRoute) {
                return 50;
            }
        };
        ConnManagerParams.setMaxConnectionsPerRoute(params, cpr);

        httpClient = new DefaultHttpClient(cm, params);
        httpClient.setCookieStore(new PersistentCookieStore(ctx));
    }

    static private DefaultHttpClient httpClient = null;

    private JsonExecutorInterface requestExecutorForRelativePathAndParams(String path, WebParams params) throws UnsupportedEncodingException {
        HttpPost postRequest = new HttpPost(rootUrl.toString() + path);

        if(params != null) {
            postRequest.setEntity(params.getFormEntity());
        }

        JsonExecutorProxy executor = new JsonExecutorProxy();
        executor.setRequest(postRequest);
        executor.setErrorsHandlerDelegate(this);

        return executor;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:04:27.510

这很可能是由于您如何构建`ThreadSafeClientConnManager`您正在使用的。如果您稍微更改顺序，您应该会得到更好的结果。

```
 HttpParams params = new BasicHttpParams();
    // The params are read in the ctor of the pool constructed by
    // ThreadSafeClientConnManager, and need to be set before constructing it.
    ConnManagerParams.setMaxTotalConnections(params, 200);
    ConnPerRoute cpr = new ConnPerRoute() {
        @Override
        public int getMaxForRoute(HttpRoute httpRoute) {
            return 50;
        }
    };
    ConnManagerParams.setMaxConnectionsPerRoute(params, cpr);
    SchemeRegistry schemeRegistry = new SchemeRegistry();
    schemeRegistry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
    ClientConnectionManager cm = new ThreadSafeClientConnManager(params, schemeRegistry); 
```

# c++ - 如何组织 C++ 项目

> ID：10782554
> 
> 赞同：22
> 
> 时间：2012-05-28T09:47:27.957
> 
> 标签：c++, tree, directory, project-structure

我想知道在组织我的项目时什么是 C++ 最佳实践。我读过我应该将所有源文件 (.cpp) 放在 src 文件夹中，而头文件 (.h) 应该放在 include 文件夹中。它是应该的方式，还是应该将我的头文件放在源文件文件夹中？

这是我的文件夹树结构

```
- Project
|
+--- src (.cpp)
|
+--- include (.h) ????
|
+--- test (cpp unit test)
|
+--- doc (docs) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-28T09:48:46.567

这实际上是一个偏好问题，但代码库的组织有助于可维护性以及易于理解代码。应该尽可能采用模块化方法。您的代码组织看起来几乎正确，理想情况下我会：

```
- Project
|
+--- src (.cpp)
|
+--- include (.h) ????
|
+--- test (cpp unit test)
|
+--- doc (docs)
|
+--- bin (generated binaries)
|
+--- lib (external dependencies) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-28T09:51:25.533

> 头文件 (.h) 应放在包含文件夹中。

不是所有的人。只有那些在公共领域。如果一个`class`或一个函数特定于一个模块，它应该在该模块内。包含文件夹应该包含可以被任何其他模块包含的标题。

您可能还想添加：

*   `bin`- 保存你的图书馆
*   `lib`- 相同的
*   `exe`- 在这里生成可执行文件（可选，也可以在`bin`）
*   `etc`- 配置文件

# backbone.js - 骨干网和延迟销毁事件

> ID：10782557
> 
> 赞同：1
> 
> 时间：2012-05-28T09:47:37.350
> 
> 标签：backbone.js

骨干又是一些简单的问题。这里没有冗长的描述，而是一些示例代码：

```
var Group = Backbone.Model.extend({

    defaults: {
        Product: new Products()
    },

    initialize: function(data){
        var _this = this;

        var products = new Products(data.Product);
        this.set('Product', products);

        this.get('Product').each(function(product){
            product.on('destroy', function(){
                _this.trigger('change');
            }, _this);
        });

        this.bind('change', this.update, this);
    },

    update: function(){
        console.info("something changed");

        console.log(this.get('Product').toJSON());
    },

}); 
```

所以组模型包含 Product-collection，其中显然包含产品。在初始化时，我试图确保在更改和销毁产品时调用组的更新方法。一切似乎都运行良好，事件被调用，属性看起来很棒但是当我在产品模型中调用destroy方法时它失败了。在更新中，我尝试打印产品集合的内容，我得到的是在删除完成之前的产品。如果我在 500 毫秒超时后调用此调试行，则内容正常。产品被删除等。

因此，根据我的理解，调用产品的销毁事件，然后在实际从集合中删除之前将其传递给组。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:24:41.757

Backbone 通过侦听模型上的事件来处理集合中已销毁模型的删除`destroy`：请参阅[Backbone.Model - destroy](http://documentcloud.github.com/backbone/docs/backbone.html#section-59)和[Backbone.Collection - _onModelEvent](http://documentcloud.github.com/backbone/docs/backbone.html#section-105)的源代码。

无法保证处理程序的执行顺序，您将不得不使用其他东西。例如，监听`destroy`集合上的事件，该事件将在模型实际删除**后触发：**

```
initialize: function(data){
    var _this = this;

    var products = new Products(data.Product);
    this.set('Product', products);

    this.get('Product').on("destroy", this.update, this);
    this.bind('change', this.update, this);
}, 
```

查看此 Fiddle [http://jsfiddle.net/NUtmt/](http://jsfiddle.net/NUtmt/)以获取完整示例。

# .net - Windows 8 是否支持 System.Device.Location？

> ID：10782560
> 
> 赞同：4
> 
> 时间：2012-05-28T09:47:42.117
> 
> 标签：.net, windows

我正在使用 编写 Windows 7 应用程序`System.Device.Location`，这取决于 Windows 传感器和位置平台。我下载了消费者预览版，但我找不到它。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T09:49:38.747

根据文档，它位于 .NET Framework 4.5 中：

[http://msdn.microsoft.com/en-us/library/system.device.location(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.device.location(v=vs.110).aspx)

但是，Windows 8 *Metro*应用似乎没有这个命名空间：

[http://msdn.microsoft.com/en-us/library/windows/apps/br230232(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br230232(v=vs.110).aspx)

然而，*看起来*命名空间中的一些类`System.Device.Location`已经迁移到`Windows.Devices.Geolocation`Metro 中的命名空间：

[http://msdn.microsoft.com/en-us/library/windows/apps/br229921.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br229921.aspx)

它**没有**告诉你的是它们是否相等。您可能无法仅更改名称空间，因此可能需要进行一些代码修复。从表面上看，他们看起来像是在解决同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:55:06.767

请改用以下命名空间

```
using Windows.Devices.Geolocation; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-01T19:11:16.450

GeoLocation 课程适合您！它的作用是获取你的纬度和经度

# c - 传递给函数的 const char 没有反射回来

> ID：10782563
> 
> 赞同：0
> 
> 时间：2012-05-28T09:47:59.877
> 
> 标签：c, linux

我想更改`constant-character-array`( `const array[64]`) 的内容。
下面是我的代码。
我的**问题**`const char *append`是，当作为常量字符指针（ ）传递给函数时，为什么常量字符数组不改变（不反映回来）

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int function(char *d,const char *append)
{
 append = d; //changing the location of append.
 printf ("%s\n",append); //displays as sachintendulkar.
}

int main()
{
    char *d = NULL;
    const char append[]={'s','a','c','h','i','n'};
    d = calloc(sizeof(char),sizeof(append));
    strcpy(d,append);
    strcat(d,"tendulkar"); //appending
    function(d,append);
    printf ("%s\n",append); //Its displays as sachin instead of sachintendulkar???
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:51:05.240

函数参数是按值传递的，当您为`append`内部的指针分配一个新值`function()`时，函数外部不会发生任何事情。

目前还不是很清楚你想要做什么......恒定数据的重点当然是你不应该改变它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:24:22.697

It is just a coincidence that the names of the parameters are the same as the variables in main. There is no connection between the names.

Your function works the same as if it was

```
int function(char *x, const char *y)
{
 y = x; //changing the location of y.
 printf ("%s\n", y); //displays as sachintendulkar.
} 
```

You wouldn't expect that function to change the values inside main.

# groovy - 为什么每个空集合上的每个闭包至少运行一次？

> ID：10782566
> 
> 赞同：8
> 
> 时间：2012-05-28T09:48:08.423
> 
> 标签：groovy

我有一个从 Web 服务器下载文件的功能，该服务器有时会收到一个空集合。在该函数中，我在该集合上调用了每个函数，而我期望发生的是该函数只是退出，而每个闭包根本没有运行。问题是它确实使用一个空`filename`参数运行，并且当它被提供一个目录而不是一个文件时，FileOutputStream 的创建会蓬勃发展。

```
def get(String baseUrl, List files, String targetDir) {
    files.each { filename ->
    // Goes BOOM on next line
    def fos = new FileOutputStream(targetDir + File.separator + filename)
    ...
} 
```

为什么 Groovy 会有这样的行为，我应该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T09:50:41.920

它没有，所以我假设`files`包含一些东西（比如`null`？）

```
[].each {
  println "boom"  // This doesn't appear
}

[null].each {
  println "pow!"  // this does
} 
```

假设它是`null`您的文件列表中的 s 导致问题，您可以通过以下方式摆脱它们：

```
files.findAll().each { filename ->
  def fos = new FileOutputStream( new File( targetDir, filename ) )
  ... 
```

或者，当然，首先使生成列表的东西不添加空值

### 编辑

实际上，听起来您有一个包含空字符串的列表...

该修复应该仍然有效，因为在 Groovy Truth 下`findAll`评估为空字符串`false`

### 编辑 2

作为一个快速说明，您可能可以更改：

```
def fos = new FileOutputStream( new File( targetDir, filename ) )
... 
```

至：

```
new File( targetDir, filename ).withOutputStream { fos ->
  ... 
```

它将[确保为您关闭流](http://groovy.codehaus.org/groovy-jdk/java/io/File.html#withOutputStream%28groovy.lang.Closure%29):-)

# android - Android：导航回其工作的屏幕后，菜单未在某些操作系统版本上显示

> ID：10782567
> 
> 赞同：0
> 
> 时间：2012-05-28T09:48:11.573
> 
> 标签：android, menu

在我的应用程序中，我在导航时切换到各种视图。所以让我们假设我有view1、view2 和view3。每个视图都加载在一个单独的 Activity 中。当我的应用程序启动时，会显示 view1，如果您按下设备上的菜单按钮，则会出现选项菜单。如果您导航到 view2 并按下菜单按钮，将出现菜单。但是，如果您返回上一个视图，当您按下菜单按钮时菜单将不会出现。它应该显示出来。如果我退出应用程序并重新启动它，然后从 view1 导航到 view2 再到 view3，菜单总是显示在每个视图上，但是一旦我回到上一个视图，菜单就不再显示。这只发生在运行 OS 2.3 的设备上。它不会发生在运行 OS 2.2 的设备上

菜单是全局的，onCreateOptionsMenu 仅存在于我的应用程序的一个位置。知道问题可能是什么吗？谢谢！

# ruby-on-rails-3 - 水豚::ElementNotFound:

> ID：10782568
> 
> 赞同：1
> 
> 时间：2012-05-28T09:48:12.867
> 
> 标签：ruby-on-rails-3, capybara, rspec2

我正在使用 RSpec 和 Capybara 测试我的 Rails 应用程序的注册表单。当我想测试它时，我遇到了这个错误，

```
Failures:

  1) user registration allows new users to register with an email address and password
     Failure/Error: fill_in "Confirmation",          :with => "foo"
     Capybara::ElementNotFound:
       no text field, text area or password field with id, name, or label 'Confirmation' found
     # ./user_spec.rb:9:in `block (2 levels) in <top (required)>' 
```

这是我的表格，它是一个注册表单，

```
<div id="box">
  <div class="block" id="block-signup">
    <h2>Sign up</h2>
    <div class="content">
      <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :class => "form login"}) do |f| %>
          <% if @user.errors.any? %>
              <div id="errorExplanation">
                <h2><%= pluralize(@user.errors.count, "error") %> prohibited
                  this post from being saved:</h2>
                <ul>
                  <% @user.errors.full_messages.each do |msg| %>
                      <li><%= msg %></li>
                  <% end %>
                </ul>
              </div>
              <%end%>
        <div class="group wat-cf">
          <div class="left">
            <label class="label"><%= f.label :email %></label>
          </div>
          <div class="right">
            <%= f.email_field :email %>
            <span class="description">Ex: test@example.com</span>
          </div>
        </div>
        <div class="group wat-cf">
          <div class="left">
            <label class="label"><%= f.label :password %></label>
          </div>
          <div class="right">
            <%= f.password_field :password %>
            <span class="description">Must contains the word 'yeah'</span>
          </div>
        </div>
        <div class="group wat-cf">
          <div class="left">
            <label class="label"><%= f.label :confirmation %></label>
          </div>
          <div class="right">
            <%= f.password_field :password_confirmation %>
            <span class="description">Don't miss any letters</span>
          </div>
        </div>

        <div class="group navform wat-cf">
          <button class="button" type="submit">
            <%= f.submit "Sign in", :type => :image, :src => "http://pilu.github.com/web-app-theme/images/icons/tick.png" %>
          </button>
        </div>
      <% end %>
    </div>
    <div id="links-sup">
      <h4><%= render "links" %></h4></div>
  </div>
</div> 
```

我的测试文件是 spec/requests/user_spec.rb

```
require 'spec_helper'

describe "user registration" do
  it "allows new users to register with an email address and password" do
    visit "/users/sign_up"

    fill_in "Email",                 :with => "user@eample.com "
    fill_in "Password",              :with => "foo"
    fill_in "Confirmation",          :with => "foo"

    click_button "Sign up"

    page.should have_content("Welcome! You have signed up successfully.")
  end
end 
```

你有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:00:07.833

好吧，这里的错误表明它找不到带有“确认”标签的文本框。在这里，您遇到了 html 问题。没有**带有确认标签的文本框**。您可以通过单击该标签“确认”进行测试，光标不会在`password_confirmation`文本框中。

看看为什么点击“密码”标签的区别，光标在密码文本框中。这就是为什么现场没有错误的原因`password`。

您可以将标记稍微更改为`f.label :password_confirmation`.

当您看到错误`Capybara::ElementNotFound`时，仅表示它找不到您引用的元素。因此，您需要检查您的标记是否正确。

# centos - 试图在centos 5上安装流星

> ID：10782572
> 
> 赞同：1
> 
> 时间：2012-05-28T09:48:21.447
> 
> 标签：centos, meteor

操作系统：Red Hat Enterprise Linux Server 5.5 (Tikanga)

尝试运行此命令来安装流星：

```
curl install.meteor.com | /bin/sh 
```

```
============= Output Error ===============
Installing /tmp/meteor-install-Nv47529/meteor-0.3.6-1.x86_64.rpm
error: Failed dependencies:
        libc.so.6(GLIBC_2.6)(64bit) is needed by meteor-0.3.6-1.x86_64
        libc.so.6(GLIBC_2.7)(64bit) is needed by meteor-0.3.6-1.x86_64
        libc.so.6(GLIBC_2.9)(64bit) is needed by meteor-0.3.6-1.x86_64
        libstdc++.so.6(GLIBCXX_3.4.9)(64bit) is needed by meteor-0.3.6-1.x86_64
Installation failed.
============= Output Error =============== 
```

glib 缺少显示，但使用检查 glib

```
rpm -qa --qf="%{n}-%{v}-%{r}.%{arch}\n" | grep glibc | sort 
```

给我看

```
compat-glibc-2.3.4-2.26.i386
compat-glibc-2.3.4-2.26.x86_64
compat-glibc-headers-2.3.4-2.26.x86_64
glibc-2.5-49.el5_5.7.i686
glibc-2.5-49.el5_5.7.x86_64
glibc-common-2.5-49.el5_5.7.x86_64
glibc-devel-2.5-49.el5_5.7.i386
glibc-devel-2.5-49.el5_5.7.x86_64
glibc-headers-2.5-49.el5_5.7.x86_64
glibc-utils-2.5-49.el5_5.7.x86_64 
```

所以知道是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:08:42.837

`GLIBC_2.6`是 RPM 所必需的，您只有`GLIBC_2.5`因此才需要升级。

或者，这种依赖关系可能比它需要的更严格；尝试自己打包 Meteor。

# java - Hibernate / JBoss - “服务 jboss-as 具有循环依赖” 对 new Configuration()

> ID：10782573
> 
> 赞同：1
> 
> 时间：2012-05-28T09:48:22.597
> 
> 标签：java, hibernate, jboss7.x

当试图打开一个 Hibernate 会话时，初始化新 Hibernate 配置的代码部分因“服务 jboss-as 具有循环依赖”异常而中断。

从控制台应用程序调用相同的代码可以正常工作。

尝试了包含 JBoss 7.1 的 Hibernate 4.1.3 和 4.0.1，但得到了相同的错误。

如果有人可以将我推向正确的方向，我将不胜感激。

```
Configuration configuration = new Configuration(); 
```

JBoss 输出：

```
...
11:30:00,482 INFO  [org.jboss.as] (MSC service thread 1-4) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 3324ms - Started 173 of 250 services (76 services are passive or on-demand)
11:30:00,571 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "JBCXFRS.war"
11:30:10,903 INFO  [org.jboss.resteasy.spi.ResteasyDeployment] (http-localhost-127.0.0.1-8080-2) Deploying javax.ws.rs.core.Application: class hr.spi.rs.MyApplication
11:30:24,081 INFO  [org.hibernate.annotations.common.Version] (http-localhost-127.0.0.1-8080-3) HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
11:30:24,144 INFO  [org.hibernate.Version] (http-localhost-127.0.0.1-8080-3) HHH000412: Hibernate Core {4.1.3.Final}
11:30:24,213 INFO  [org.hibernate.cfg.Environment] (http-localhost-127.0.0.1-8080-3) HHH000206: hibernate.properties not found
11:30:24,233 INFO  [org.hibernate.cfg.Environment] (http-localhost-127.0.0.1-8080-3) HHH000021: Bytecode provider name : javassist
11:30:24,432 INFO  [org.hibernate.cfg.Configuration] (http-localhost-127.0.0.1-8080-3) HHH000043: Configuring from resource: /hibernate.cfg.xml
11:30:24,437 INFO  [org.hibernate.cfg.Configuration] (http-localhost-127.0.0.1-8080-3) HHH000040: Configuration resource: /hibernate.cfg.xml
11:30:24,825 INFO  [org.hibernate.cfg.Configuration] (http-localhost-127.0.0.1-8080-3) HHH000041: Configured SessionFactory: 
11:30:25,466 INFO  [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (http-localhost-127.0.0.1-8080-3) HHH000402: Using Hibernate built-in connection pool (not for production use!)
11:30:25,473 INFO  [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (http-localhost-127.0.0.1-8080-3) HHH000115: Hibernate connection pool size: 1
11:30:25,479 INFO  [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (http-localhost-127.0.0.1-8080-3) HHH000006: Autocommit mode: false
11:30:25,488 INFO  [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (http-localhost-127.0.0.1-8080-3) HHH000401: using driver [com.microsoft.sqlserver.jdbc.SQLServerDriver] at URL [jdbc:sqlserver://MyDbServer;databaseName=MyDatabase]
11:30:25,496 INFO  [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (http-localhost-127.0.0.1-8080-3) HHH000046: Connection properties: {user=sa, password=****}
11:30:38,571 INFO  [org.hibernate.dialect.Dialect] (http-localhost-127.0.0.1-8080-3) HHH000400: Using dialect: org.hibernate.dialect.SQLServerDialect
11:30:38,837 INFO  [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (http-localhost-127.0.0.1-8080-3) HHH000399: Using default transaction strategy (direct JDBC transactions)
11:30:38,897 INFO  [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (http-localhost-127.0.0.1-8080-3) HHH000397: Using ASTQueryTranslatorFactory
11:30:39,868 INFO  [org.hibernate.validator.util.Version] (http-localhost-127.0.0.1-8080-3) Hibernate Validator 4.2.0.Final
11:30:40,289 INFO  [org.jboss.as.controller] (MSC service thread 1-2) JBAS014774: Service status report
JBAS014775:    New missing/unsatisfied dependencies:
      service jboss.naming (missing) dependents: [service jboss.data-source.java:jboss/datasources/ExampleDS, service jbosgi.xservice."javax.naming.InitialContext", service jbosgi.xservice."javax.naming.spi.InitialContextFactoryBuilder", service jboss.deployment.unit."JBCXFRS.war".CLEANUP] 
      service jboss.naming.context.java (missing) dependents: [service jboss.naming.context.java.TransactionManager] 

11:30:40,303 ERROR [stderr] (http-localhost-127.0.0.1-8080-3) Initial SessionFactory creation failed.org.jboss.msc.service.CircularDependencyException: Service jboss-as has a circular dependency 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T22:36:43.273

在 hibernate.cfg.xml 的 session-factory 部分中删除 name 参数后，一切都开始工作而没有“循环依赖”错误。

我不知道为什么运行它有任何问题，或者有人应该如何从神秘的 JBoss 异常中推断出来。

将其发布为答案，希望它可以为某人节省一天的时间。

```
<hibernate-configuration>
    <session-factory name="">
        ... 
```

变成：

```
<hibernate-configuration>
    <session-factory>
        ... 
```

# java - 无会话的身份验证、授权和用户跟踪

> ID：10782578
> 
> 赞同：1
> 
> 时间：2012-05-28T09:48:53.420
> 
> 标签：java, session, jakarta-ee, tomcat

使用 Java Web 应用程序（JSP/Servlets，无 EJB），不使用`HttpSession`'s 来验证用户并授权他们的操作的最佳方法是什么？

**注意**这种方法/问题的原因是我希望我们的应用程序保持无状态，因此我不需要在*地理上分散*的数据中心内复制完整的会话，并且可以更轻松地从集群中添加和删除服务器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:08:45.773

公钥基础设施。创建您自己的 CA，签署并分发用户证书。在您的服务器上启用客户端身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:19:58.503

成功登录后生成令牌，并在每个请求中仅验证此令牌。令牌当然需要复制，但它不应超过 100 字节的数据，因此与典型的“重”权重相比`HttpSession`，对性能的影响会非常低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:24:54.387

您可以使用“隐藏表单域”或“URL 重写”

# windows - 默认打印机设置被忽略

> ID：10782586
> 
> 赞同：3
> 
> 时间：2012-05-28T09:49:42.400
> 
> 标签：windows, delphi, printing, spooler, printer-properties

使用 Windows Print Spooler API，我们可以打印出 XPS 文件。

问题是打印**后台处理程序忽略**了**默认打印机设置**。

（我们已经放弃尝试[*应用*打印机设置](https://stackoverflow.com/questions/10345179/resetdc-does-nothing-print-spooler-apis-for-windows)。默认打印机设置就足够了。）

例如......无论控制面板中的设置如何，打印输出始终以彩色打印，每页一张纸：黑白/彩色，双面/非双面，每张纸多页/单页每张纸。

MS Word 和 Adob​​e 等其他应用程序遵循默认打印机设置。

我们使用的是 Delphi XE2 和 Windows 7 64 位。

此测试代码是自包含的，因此您可以将其粘贴到其中进行测试...

使用打印机名称填充组合框：

```
uses
  Printers

ComboBox1.Items.Assign(Printer.Printers); 
```

打印程序：

```
uses
  Winapi.WinSpool

procedure PrintXPS(PrinterName, FileNameXPS: string; ParentFormHandle: THandle = 0);

  //  Printer handle

  procedure Printer_Open(out Printer: THandle; Defaults: PPrinterDefaultsW = nil);
  begin
    if  not OpenPrinterW(PWideChar(PrinterName), Printer, Defaults) then
      RaiseLastOSError;
  end;

  procedure Printer_Close(Printer: THandle);
  begin
    if  not ClosePrinter(Printer) then
      RaiseLastOSError;
  end;

  //  Print jobs

  function  JobCreate(Printer: THandle; FileName: string): Cardinal;
  var
    lBufferSize: Cardinal;
    lAddJobInfo: PAddJobInfo1W;
  begin
    //  Create job
    AddJobW(Printer, 1, nil, 0, lBufferSize);
    GetMem(lAddJobInfo, lBufferSize);
    try
      if  not AddJobW(Printer, 1, lAddJobInfo, lBufferSize, lBufferSize)  then
        RaiseLastOSError;
      Result  := lAddJobInfo.JobId;
      //  Copy the file into place
      CopyFile(PWideChar(FileName), lAddJobInfo.Path, True);
    finally
      FreeMem(lAddJobInfo, lBufferSize);
    end;
  end;

  procedure JobStart(Printer: THandle; JobID: Cardinal);
  begin
    if  not ScheduleJob(Printer, JobID) then
      RaiseLastOSError;
  end;

var
  PrinterA: THandle;
  JobID: Cardinal;
begin
  if  not FileExists(FileNameXPS)  then
    raise Exception.Create('File not found: ' + FileNameXPS);

  Printer_Open(PrinterA, nil);
  try
    JobID := JobCreate(PrinterA, FileNameXPS);
    JobStart(PrinterA, JobID);
  finally
    Printer_Close(PrinterA);
  end;

end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:33:20.390

据我所知，您无法更改 .xps 文件的外观。

XPS 代表 XML Paper Specification，它实际上是一种“电子纸”，屏幕上的文档**和打印的文档正是作者想要的方式**。任何曾经体验过，共享计算机上的 Office 文档的页面布局如何因默认打印机不同而发生变化的人，不胜感激。

编辑

测试

1.) 默认黑白打印机设置。打开。xps 文件打印。

*   使用 IE == 彩色输出。
*   使用 XPS 查看器 EP == 彩色输出。

**默认打印机设置 == 被忽略。**

2.) 对话框：打印机设置手动打印黑白设置。

*   IE == 黑白输出。
*   XPS Viewer EP == 黑白输出。

# objective-c - NSURLErrorDomain Code=-1000 "bad URL": 这到底是什么意思？

> ID：10782591
> 
> 赞同：4
> 
> 时间：2012-05-28T09:50:20.860
> 
> 标签：objective-c, ios, xcode, json, get

我有这个令人困惑的错误。我通过 GET 方法发送 JSON，网站将解析并显示数据。问题是我收到错误“NSURLErrorDomain Code -1000”或更简单的“错误 URL”。问题是当我检查服务器时，我发送的数据被成功解析并显示。所以我真的很困惑为什么我会收到这个“错误的 URL”错误。任何人都可以帮助我吗？

这是我收到的错误：

> 错误域=NSURLErrorDomain 代码=-1000“错误 URL”UserInfo=0xff73df0 {NSUnderlyingError=0xff73810“错误 URL”，NSLocalizedDescription=错误 URL}

编辑：

```
http://sample.com/imwebjson.php?sid=5amp13&job=sendNotes&im_flds={\"im_uid\":"1",\"im_bookid\":"57",\"im_pagenr\":"1",\"im_notes\":"Testing%5C%5Cn"} 
```

好的，您可能会问为什么 JSON 字符串的某些部分已经编码。这些编码部分是特殊字符。我意识到 stringByAddingPercentEscapesUsingEncoding 非常不完整。它不会对所有特殊字符进行编码，而且当它对某些特殊字符进行编码时，根本无法识别 URL。所以我决定手动将特殊字符编码到字符串中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T10:48:52.023

冒号字符`:`（至少，可能还有其他类似`"`和`{`）需要在 URL 中进行百分比编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T22:22:52.167

在 GET 参数中，您必须为“%20”更改空格“”

# ruby - ruby - 无法创建线程 (35) (ThreadError)

> ID：10782594
> 
> 赞同：0
> 
> 时间：2012-05-28T09:50:29.217
> 
> 标签：ruby, nokogiri

我对 ruby​​ 很陌生，我正在学习如何在多个线程中进行处理。我所做的是使用 Nokogiri 解析一个 170mb 的 xml 文件，并将数据库（Postgresql）插入到我的 .each() 中的一个新线程中。请提出一种更好的方法来处理这个非常大的文件并在多个线程中进行。这是我到目前为止所拥有的。

```
 conn = PGconn.connect("localhost", 5432, "", "", "oaxis","postgres","root")

    f = File.open("metadata.xml")
    doc = Nokogiri::XML(f)

    counter = 0

    threadArray = []

    doc.xpath('//Title').each do |node|
        threadArray[counter] = Thread.new{
        titleVal = node.text
        random_string = (0...10).map{ ('a'..'z').to_a[rand(26)] }.join

        conn.prepare('ins'+random_string, 'insert into sample_tbl (title) values ($1)')
        conn.exec_prepared('ins'+random_string, [titleVal])

        puts titleVal+" ==>"+random_string+ " \n"

        counter += 1
       }

    end

threadArray.each {|t| t.join}

f.close 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:07:33.377

与单线程情况相比，您所做的不会导致数据更快地插入数据库。MRI Ruby 有一个全局解释器锁，并且一次只能运行一个线程。在 MRI Ruby 中使用线程仅在线程执行 IO 操作（或等待能够这样做）时提高性能，并且程序进度不依赖于这些 IO 操作的结果（因此您不会主动等待它们）。

我建议您在这里停止使用线程，而是计算您希望插入的所有值，然后将它们批量插入。代码也将更容易理解和推理。即使从单个线程中一个一个地插入它们也会更快，但没有理由这样做。

# hibernate - 如果 name 属性（类元素）是可选的，那么 Hibernate 怎么知道要映射到哪个类呢？

> ID：10782599
> 
> 赞同：0
> 
> 时间：2012-05-28T09:50:59.377
> 
> 标签：hibernate, hibernate-mapping, hbmxml

根据[文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch05.html)（搜索“名称（可选）：完整”字符串以定位句子），类元素的名称属性在映射（hbm.xml）文件中是可选的。如果是这样，Hibernate 如何知道要将表映射到哪个类？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:55:41.227

name（可选）：持久类或接口的全限定 Java 类名。如果缺少此属性，则假定映射是针对非 POJO 实体的。

# r - 将日期时间字符串作为 x 值的等高线图

> ID：10782600
> 
> 赞同：2
> 
> 时间：2012-05-28T09:51:00.807
> 
> 标签：r, contour

我正在尝试生成一个颜色等高线图，显示沿 x 轴的时间、沿 y 的深度和作为 z 值的温度。时间如下：

```
"2011-01-01 00:01"

i.e. "%Y-%m-%d %H:%M" 
```

有没有一种方法可以从这些生成颜色等高线图，并使用

```
filled.contour(Time,Depth,temp) 
```

例子：

```
time <- c("2011-01-01 01:00", "2011-01-01 02:00", "2011-01-01 03:00",
    "2011-01-01 04:00")
depth <- seq(1,10,by = 1)
seq1 <-  seq(1:40)
temp <- matrix(seq1, 10) 
```

temp 的每一列代表不同的时间，每一行代表不同的深度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:34:30.400

这对我有用：

```
time2 <- as.POSIXct(time) 
```

结果：

```
> time2
## [1] "2011-01-01 01:00:00 EST" "2011-01-01 02:00:00 EST"
## [3] "2011-01-01 03:00:00 EST" "2011-01-01 04:00:00 EST" 
```

现在绘制它：

```
filled.contour(time2,depth,t(temp)) 
```

![在此处输入图像描述](../Images/a07a613e435cc36dd73e08cc827d3b71.png)

# java - 位置管理器在 Android 4.0.2 模拟器中不起作用

> ID：10782601
> 
> 赞同：3
> 
> 时间：2012-05-28T09:51:03.523
> 
> 标签：java, android, gps

我`Location Manager`在我的应用程序中使用 GPS 跟踪。`Android`该应用程序在2.2、2.3.3 模拟器和设备中使用时返回 apt 位置。但是，奇怪的是我在**Emulator 4.0.2**中测试了该应用程序。**它返回与logcat**`05-28 15:13:46.584: E/AndroidRuntime(4458): at com.package.TestRun.registerLocationListeners(TestRun.java:191)`中一样的强制关闭错误。我已经实现了如下代码：

 **```
 LocationManager lm;
    LocationManager lmNet;
    private void registerLocationListeners() {
    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    if (myGPSLocationListener == null || mynetworkprovider == null)
    {
        createLocationListeners();  
    }  
    lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER ,0,0,mynetworkprovider);
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER ,60000,0,myGPSLocationListener);

}
private void createLocationListeners() {
    mynetworkprovider = new LocationListener() {  
       public void onLocationChanged(Location argLocation) {
           if (argLocation != null) {
            gps[0] = argLocation.getLatitude(); 
            gps[1] = argLocation.getLongitude(); 
            //Toast.makeText( getApplicationContext(),"Network provider Lat =" + gps[0] + " Lon = " + gps[1] , Toast.LENGTH_SHORT).show();
            }
                //Toast.makeText( getApplicationContext(),"On Location change" , Toast.LENGTH_SHORT).show();
            }
            public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub
            //  Toast.makeText( getApplicationContext(),"Disable" , Toast.LENGTH_SHORT).show();
            }
            public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub
            //  Toast.makeText( getApplicationContext(),"enabled" , Toast.LENGTH_SHORT).show();
            }
            public void onStatusChanged(String provider,
             int status, Bundle extras) {
            // TODO Auto-generated method stub
                //Toast.makeText( getApplicationContext(),"Status change" , Toast.LENGTH_SHORT).show();

            }
            };

            myGPSLocationListener = new LocationListener() {  
                   public void onLocationChanged(Location argLocation) {
                       if (argLocation != null) {
                        gps[0] = argLocation.getLatitude(); 
                        gps[1] = argLocation.getLongitude(); 
                        //Toast.makeText( getApplicationContext(),"GPS Lat =" + gps[0] + " Lon = " + gps[1] , Toast.LENGTH_SHORT).show();
                        }
                            //Toast.makeText( getApplicationContext(),"On Location change" , Toast.LENGTH_SHORT).show();
                        }
                        public void onProviderDisabled(String provider) {
                        // TODO Auto-generated method stub
                            //Toast.makeText( getApplicationContext(),"Disable" , Toast.LENGTH_SHORT).show();
                            //launchGPS();
                        }
                        public void onProviderEnabled(String provider) {
                        // TODO Auto-generated method stub
                            //Toast.makeText( getApplicationContext(),"enabled" , Toast.LENGTH_SHORT).show();
                        }
                        public void onStatusChanged(String provider,
                         int status, Bundle extras) {
                        // TODO Auto-generated method stub
                            //Toast.makeText( getApplicationContext(),"Status change" , Toast.LENGTH_SHORT).show();

                        }
            };
} 
```

**更新**：这是我的日志：

```
 05-28 15:42:46.375: E/AndroidRuntime(5585): FATAL EXCEPTION: main
   05-28 15:42:46.375: E/AndroidRuntime(5585): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.package/com.package.TestRun}: java.lang.IllegalArgumentException: provider=network
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at android.os.Handler.dispatchMessage(Handler.java:99)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at android.os.Looper.loop(Looper.java:137)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at android.app.ActivityThread.main(ActivityThread.java:4340)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at java.lang.reflect.Method.invokeNative(Native Method)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at java.lang.reflect.Method.invoke(Method.java:511)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at dalvik.system.NativeStart.main(Native Method)
   05-28 15:42:46.375: E/AndroidRuntime(5585): Caused by: java.lang.IllegalArgumentException: provider=network
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at android.os.Parcel.readException(Parcel.java:1331)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at android.os.Parcel.readException(Parcel.java:1281)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at android.location.ILocationManager$Stub$Proxy.requestLocationUpdates(ILocationManager.java:646)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at android.location.LocationManager._requestLocationUpdates(LocationManager.java:582)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at android.location.LocationManager.requestLocationUpdates(LocationManager.java:446)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at com.package.TestRun.registerLocationListeners(TestRun.java:191)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at com.package.TestRun.onCreate(TestRun.java:135)
   05-28 15:42:46.375: E/AndroidRuntime(5585):  at android.app.Activity.performCreate(Activity.java:4465)
    05-28 15:42:46.375: E/AndroidRuntime(5585):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    05-28 15:42:46.375: E/AndroidRuntime(5585):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919) 
```

API`Location Manager`中是否有任何更新？`Android 4.0`如果有人遇到同样的问题，请分享视图/解决方案链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:19:12.677

这是一个问题。看看[这个](http://code.google.com/p/android/issues/detail?id=19857)。

它说：

不要使用直接`provider`字符串，因为不能保证它会在运行时存在。

仅使用`providers`从 中获得的内容`LocationManager`，如下所示：

```
 LocationManager locationManager = (LocationManager)context.getSystemService( Context.LOCATION_SERVICE );

    Criteria criteria = new Criteria();
    criteria.setAccuracy( Criteria.ACCURACY_COARSE );
    String provider = locationManager.getBestProvider( criteria, true );

    if ( provider == null ) {
        Log.e( TAG, "No location provider found!" );
        return;
    }

    lastLocation = locationManager.getLastKnownLocation(provider); 
```

或者

另一个有用的方法`locationmanager`是`LocationManager.getAllProviders()`

```
/**
 * Returns a list of the names of all known location providers.  All
 * providers are returned, including ones that are not permitted to be
 * accessed by the calling activity or are currently disabled.
 *
 * @return list of Strings containing names of the providers
 */ 
```**

# javascript - 日期格式化和比较日期

> ID：10782605
> 
> 赞同：0
> 
> 时间：2012-05-28T09:51:09.470
> 
> 标签：javascript, date

我想检查日期是否早于今天。如果是，那么我想显示日期而不是时间，如果是今天，那么我想显示时间而不是日期。我正在检查的日期是 dd-mm-yyy hh:mm 格式，因此它们不进行比较。

请看我到目前为止的内容：

```
var created = '25-05-2012 02:15';
var now = new Date();

if (created < now) { 
  created_format = [ format the date to be 25-05-2012 ]
} else {
  created_format = [ format the date to be 02:15 ]
} 
```

在其他示例中看到这些后，我尝试过使用`now.dateFormat()`，`now.format()`但我收到“不是函数”错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:12:01.447

首先获取日期字符串的各个部分：

```
var created = '25-05-2012 02:15';
var bits = created.split(/[-\s:]/);
var now = new Date(); 

// Test if it's today    
if (bits[0] == now.getDate() &&
    bits[1] == (now.getMonth() + 1) &&
    bits[2] == now.getFullYear() ) {

  // date is today, show time

} else {
  // date isn't today, show date
} 
```

当然还有其他的方法，但我认为上面是最简单的。例如

```
var otherDate = new Date(bits[2], bits[1] - 1, bits[0]);
now.setHours(0,0,0,0);
if (otherDate < now) {
  // otherDate is before today
} else {
  // otherDate is not before today
} 
```

同样，将字符串转换为日期后，您可以使用`getFullYear`, `getMonth`,`getDate`相互比较，但这与第一种方法基本相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:57:29.483

您可以使用[getTime](http://www.w3schools.com/jsref/jsref_gettime.asp)方法并获取时间戳。然后您可以将其与当前日期时间戳进行比较。

# javascript - 将闭包编译器的类型安全与 AMD（requirejs）一起获得的最可靠的方法是什么？

> ID：10782612
> 
> 赞同：8
> 
> 时间：2012-05-28T09:51:31.960
> 
> 标签：javascript, requirejs, google-closure-compiler, type-safety

尽管 JavaScript 及其许多库（jQuery、[RequireJS](http://requirejs.org/)）允许创建许多出色的网站，但在考虑构建更大的网站时，我发现它缺乏类型安全性令人生畏。

Google 有一个很棒的[闭包编译器](https://developers.google.com/closure/compiler/)，它允许您使用 JSDoc[注释](https://developers.google.com/closure/compiler/docs/js-for-compiler)您的 JavaScript 并对其进行类型检查。在尝试了其丰富的类型系统后，我希望这将极大地提高寿命较长的 JavaScript 项目的可维护性。

唯一的问题是它不能很好地与RequireJS 等[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)库配合使用。有一个实验性的[--transform_amd_modules](http://www.nonblocking.io/2011/12/experimental-support-for-common-js-and.html)标志可以连接您的 JavaScript 文件并通过消除它来处理范围。然而，这似乎有点反模式，消除了 RequireJS 的大部分好处（但保留了模块化文件结构）。还有一个问题是未来将获得多少支持

最终目标是类型安全，而不是以 RequireJS 的好处为代价，我最好的选择是什么？

PS：虽然我使用 RequireJS 作为 AMD 库的选择，但我不会反对使用不同 AMD 库的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T22:39:43.973

虽然[Closure Compiler](https://developers.google.com/closure/compiler/)可以与各种 JavaScript 库一起使用，但与具有自己的模块和依赖系统的[Closure Library一起使用时可以获得最大的好处。](https://developers.google.com/closure/library/)**使用 Closure 库的 Web 应用程序通常编译成一个 JavaScript 文件，不需要异步模块加载。**但是，Closure 确实提供了对模块的支持，这些模块可以异步加载。[Chad Killingsworth提供了一个很好的例子来说明如何在](https://stackoverflow.com/users/1211524/chad-killingsworth)[这里](https://stackoverflow.com/questions/10395810/order-of-files-compiled-with-the-google-closure-compiler)设置模块。此外，[plovr](http://plovr.com/)工具提供附加[模块支持](http://plovr.com/modules.html)以简化它们的使用。

如果您决定使用 Closure 编译器（并且您没有绑定到大型[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)代码库），您可能会通过在新代码中采用 Closure 库及其模块/依赖系统来最大限度地提高生产力。如果您确实打算使用 AMD 代码库，那么正如您所提到的，新的实验性编译器标志`--transform_amd_modules`并且`--process_common_js_modules`可能会有所帮助，但是当使用未注释的库时，您会错过编译器的大部分功能。

展望未来，如果[ECMAScript Harmony 模块](http://wiki.ecmascript.org/doku.php?id=harmony:modules)成为官方标准，那么 Closure、Dojo 和 YUI 等库很可能最终会符合该标准。这最终可能使无缝集成来自不同库的 JavaScript 代码成为可能。同时，如果你想编写 JavaScript 应用程序并享受类型检查、死代码消除、缩小、高级内存管理、浏览器不可知论和非凡的标准库，那么我强烈建议将 Closure Compiler 与 Closure 结合使用图书馆。

# directory - 如何在 kloxo 中更改我的域的根目录？

> ID：10782615
> 
> 赞同：0
> 
> 时间：2012-05-28T09:51:46.850
> 
> 标签：directory, root

我想更改我的域的根目录。我的根目录是`/home/mrdownloader.com/` ，但我想将其更改为`/home/mrdownloader/`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T03:04:45.170

只需单击左侧树中的域 -> 单击下面的地球（xxx.tld 的域）-> 文档根目录-> 更改文件夹，就是这样

# javascript - 添加 tr 标签会导致函数停止工作

> ID：10782617
> 
> 赞同：1
> 
> 时间：2012-05-28T09:52:01.200
> 
> 标签：javascript, jquery, html, ajax

我有一个可以正常工作的函数：

```
function insertQuestion(form) {   
    var $tbody = $('#qandatbl > tbody'); 
    var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
    var $noofanswers = $("<td class='noofanswers'></td>");
    var $questionType = '';

    $('.numberAnswerTxt', context).each(function() {
        var $this = $(this);
        var $noofanswersText = '';

        if ($questionType == 'True or False' || $questionType == 'Yes or No') {
            $noofanswersText = $("<span class='naRow string' style='display: block;'>Only 1 Answer</span><input type='text' class='numberAnswerTxtRow answertxt' style='display: none;' onkeyup='numberKeyUp(this)' onkeypress='return isNumberKey(event)' onChange='getButtons()'>").attr('name', $this.attr('name')).attr('value', $this.val());
        }
        else {
            $noofanswersText = $("<span class='naRow string' style='display: none;'>Only 1 Answer</span><input type='text' class='numberAnswerTxtRow answertxt' style='display: block;' onkeyup='numberKeyUp(this)' onkeypress='return isNumberKey(event)' onChange='getButtons()'>").attr('name', $this.attr('name')).attr('value', $this.val());  
        }

        $noofanswers.append($noofanswersText);
    }); 

    $tr.append($noofanswers);
    $tbody.append($tr); 
} 
```

但我想`$noofanswers`包含在它自己的表格行中，所以我更改`$noofanswers`为包含`<tr></tr>`这样的代码：

```
var $noofanswers = $("<td class='noofanswers'></td>"); 
```

现在变成：

```
var $noofanswers = $("<tr><td class='noofanswers'></td></tr>"); 
```

但是，如果我这样做，那么`$('.numberAnswerTxt', context).each(function() {`就不能正常工作。所以我的问题是，如果我添加`<tr>`标签，那么我需要在函数中进行哪些更改才能让它再次工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:54:47.507

该函数已经将元素`insertQuestion`包装在 a 中：`td``tr`

```
var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
//...
$tr.append($noofanswers); 
```

您可以简单地修改`$tr`而不是添加`tr`to `$noofanswers`，或者您可以删除对的调用`append`并保留`tr`in `$noofanswers`。

```
//var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
var $noofanswers = $("<tr><td class='noofanswers'></td></tr>");
//...
//$tr.append($noofanswers);
$tbody.append($noofanswers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:55:43.550

你有

```
var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
var $noofanswers = $("<td class='noofanswers'></td>"); 
```

然后

```
$tr.append($noofanswers);
$tbody.append($tr); 
```

所以你不能`td`用另一个包裹你，`tr`因为它已经被包裹了。然后你应该像这样改变你的代码：

```
var $noofanswers = $("<tr><td class='noofanswers'></td></tr>");
...
$tbody.append($noofanswers); 
```

# java - 使用telerik grid clientTemplate将带空格的字符串参数发送到java函数

> ID：10782619
> 
> 赞同：0
> 
> 时间：2012-05-28T09:52:19.340
> 
> 标签：java, grid, telerik

我使用带有 ajax 绑定的 Telerik 网格，我需要将字符串（带空格）参数发送到 java 函数，例如：

```
 n.Bound(c => c.Item).ClientTemplate("<button onclick=AddToInvoice('<#=ItemName#>');>Add </button>").Title(""); 
```

当我发送没有空格的字符串时没问题，但是当我发送空格时，例如“Hello world”，我收到错误未终止的字符串文字，请帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:03:08.793

我认为你应该使用一些东西而不是空间，当你的 Java 函数接收到参数时，你可以解析它，你就可以把你的空间放回去。

# javascript - 使用哪一个 - Kml 或 Google Map Api

> ID：10782620
> 
> 赞同：-1
> 
> 时间：2012-05-28T09:52:27.430
> 
> 标签：javascript, google-maps, google-maps-api-3, kml, google-maps-api-2

我想根据用户搜索条件在谷歌地图上显示位置，即；如果用户选择伦敦，那么应该显示来自伦敦的所有记录，如果用户输入他的邮政编码，那么它应该在谷歌地图上显示他的邮政编码 25 英里内的结果（所有数据将来自数据库 php/mysql）。

现在的问题是我应该使用什么？KML 或 google map api V3，因为我想为用户提供选项以查看有关位置的简要信息，当他将鼠标悬停在该标记上时，以及该标记的 onClick 我想显示位置和评论计数以及距离的图像（根据他的邮政编码动态计算。），我也想创建自定义标记。我之前在 api V3 上做过一些工作，但想了解 KML。它支持我的需要吗？根据我的理解，KML 只是一个静态文件，不能给出这样的动态。如果是这样，您能否提供任何示例以及如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:57:07.187

您的理解是正确的，KML 只是静态文件。您应该能够结合使用 google maps api v3 方法（如 geocode、computeDistance 等）来完成您的要求。

# c# - 机会实体的 crm2011 插件问题

> ID：10782621
> 
> 赞同：3
> 
> 时间：2012-05-28T09:52:34.490
> 
> 标签：c#, dynamics-crm-2011

我创建了在 Opportunity 上的更新消息（Pre_operation）上触发的 crm2011 插件。在插件中，我使用电子邮件模板并使用电子邮件模板发送电子邮件。当我运行时，尽管模板 ID 正确，但插件无法使用电子邮件模板发送电子邮件。我收到此错误消息“对象引用未设置为对象的实例。” 请帮助我...这是我的插件代码..

```
namespace Ppp.CRM.Plugin.OpptBidOwnerChange
{
 public class BidOwnerChange : IPlugin
 {
    #region Class Level Variables
    IServiceProvider _serviceProvider;
    IOrganizationServiceFactory _serviceFactory = null;
    IOrganizationService _service = null;
    IPluginExecutionContext _context = null;

    Entity _target = null;
    Entity _preImage = null;
    Entity _postImage = null;
    Guid _currentUser;
    Guid pre_bidownerid = Guid.Empty;
    Guid tag_bidownerid = Guid.Empty;
    Guid ownerid = Guid.Empty;
    Guid opportunityid = Guid.Empty;
    #endregion

    #region  IPlugin Members
    public void Execute(IServiceProvider serviceProvider)
    {
        try
        {
            string message = null;
            _serviceProvider = serviceProvider;
            _context = (IPluginExecutionContext)
                                         serviceProvider.GetService(typeof(IPluginExecutionContext));

            _serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
            _currentUser = _context.UserId;
            message = _context.MessageName.ToLower();

            if (message == "update")//message == "create" || 
            {
                if (_context.InputParameters.Contains("Target") && _context.InputParameters["Target"] != null)
                    _target = (Entity)_context.InputParameters["Target"];

                if (_context.PreEntityImages.Contains("PreImage") && _context.PreEntityImages["PreImage"] != null)
                    _preImage = (Entity)_context.PreEntityImages["PreImage"];

                if (_context.PostEntityImages.Contains("PostImage") && _context.PostEntityImages["PostImage"] != null)
                    _postImage = (Entity)_context.PostEntityImages["PostImage"];

                if (_preImage.Attributes.Contains("hm_bidowner"))
                {
                    EntityReference owner = (EntityReference)_preImage.Attributes["hm_bidowner"];
                    pre_bidownerid = owner.Id;
                    _target.Attributes["hm_previousbidowner"] = new EntityReference("systemuser", owner.Id);
                }
                if (_target.Attributes.Contains("hm_bidowner"))
                {
                    EntityReference owner = (EntityReference)_target.Attributes["hm_bidowner"];
                    tag_bidownerid = owner.Id;
                }
                if (_preImage.Attributes.Contains("ownerid"))
                {
                    EntityReference owner = (EntityReference)_preImage.Attributes["ownerid"];
                    ownerid = owner.Id;
                }

                opportunityid = _target.Id;

                ActivityParty emailFrom = new ActivityParty { PartyId = new EntityReference("systemuser", _context.UserId) };
                List<ActivityParty> emailTo = new List<ActivityParty>();

                // alert user
                if (_preImage.Attributes.Contains("ownerid"))
                {
                    emailTo.Add(new ActivityParty { PartyId = new EntityReference("systemuser", ownerid) });
                }
                if (_preImage.Attributes.Contains("hm_bidowner"))
                {
                    emailTo.Add(new ActivityParty { PartyId = new EntityReference("systemuser", pre_bidownerid) });
                }
                if (_target.Attributes.Contains("hm_bidowner"))
                {
                    //emailTo.Add(new ActivityParty { PartyId = ((EntityReference)_target["hm_bidowner"]) });
                    emailTo.Add(new ActivityParty { PartyId = new EntityReference("systemuser", tag_bidownerid) });
                }

                Email email = new Email();
                email.From = new ActivityParty[] { emailFrom }; ;
                if (emailTo.Count() > 0)
                    email.To = emailTo;

                Guid templateId = Guid.Empty;
                templateId = new Guid("EC361CDE-6C9E-E111-BF90-D8D3855BE525");//ACE17A0C-279B-E111-9E28-080027332B48

                SendEmailFromTemplateRequest emailUsingTemplateReq = new SendEmailFromTemplateRequest
                {
                    Target = email,
                    TemplateId = templateId,
                    RegardingId = opportunityid,
                    RegardingType = Opportunity.EntityLogicalName
                };

                SendEmailFromTemplateResponse emailUsingTemplateResp = (SendEmailFromTemplateResponse)_service.Execute(emailUsingTemplateReq);

            }
        }
        catch (Exception ex)
        {
            throw new InvalidPluginExecutionException(ex.Message, ex);
        }
    }
    #endregion

    #region CRM Service
    private void CreateCRMService()
    {
        try
        {
            _service = _serviceFactory.CreateOrganizationService(_currentUser);
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }
    #endregion

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:00:41.757

正如弗兰克刚刚提到的 _service 仍然为空。在 Execute 方法中遵循此模板：

```
public void Execute(IServiceProvider serviceProvider){

// Obtain the execution context from the service provider.
Microsoft.Xrm.Sdk.IPluginExecutionContext context = (Microsoft.Xrm.Sdk.IPluginExecutionContext)
            serviceProvider.GetService(typeof(Microsoft.Xrm.Sdk.IPluginExecutionContext));

// Obtain the organization service reference.
IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory   serviceProvider.GetService(typeof(IOrganizationServiceFactory));

IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T10:46:15.053

```
SendEmailFromTemplateResponse emailUsingTemplateResp = (SendEmailFromTemplateResponse)_service.Execute(emailUsingTemplateReq); 
```

`_service`您的代码中的 vlaue 仍然为**null**。
这意味着您尚未重新初始化该值。

请参考那些链接

1.[使用 CRM 2011 服务从代码创建记录](http://links.dynamicscrmteam.com/2011/07/17/using-crm-2011-service-to-create-record-from-code-c-iorganizationservice/)
2\. [CRM 2011 SecurityNegotiationException 试图访问 Web 服务](https://stackoverflow.com/a/6454185/900284)
3.[在 CRM 2011 插件中模拟 IOrganizationService.Execute 的问题](https://stackoverflow.com/a/6903462/900284)

# php - 如何有效地缓存数据库中非常大的 ID 集？

> ID：10782623
> 
> 赞同：0
> 
> 时间：2012-05-28T09:52:45.143
> 
> 标签：php, caching

假设我们有具有数百万个 ID（整数、主键）的表 'Items' 用户可以在 url 上看到项目，例如 '/goods/ID/'

所以在我的控制器中，我需要一种方法来知道给定的 ID 是否真的存在。

1.  由于高负载，我根本不想访问数据库。
2.  纯内存缓存（如 memcache）不适合这里，因为缺乏持久性。

有没有一种解决方案可以让我快速可靠地访问整套 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:16:40.143

我会缓存范围以最小化存储的 ID 数量，如果您决定使用带有缓存的 SQL，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:00:22.673

Memcache 没问题 - 如果 ID 未缓存，请检查数据库。我们将 Memcached 用于 1000 万用户的应用程序...

或者您正在寻找[Amazon DynamoDB ？](http://aws.amazon.com/dynamodb/)

# php - Kohana orm 继承

> ID：10782629
> 
> 赞同：0
> 
> 时间：2012-05-28T09:53:08.110
> 
> 标签：php, orm, kohana

我想在创建孩子时自动创建父记录。

例子。

```
CREATE TABLE IF NOT EXISTS `front_end_users` (
    `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `userid` int(11) unsigned NOT NULL,
  `tel` varchar(20) NOT NULL,
  `addr1` varchar(255) NOT NULL,
  `addr2` varchar(255) NOT NULL,
  `city` int(11) NOT NULL,
  `zip` varchar(10) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_userid` (`userid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `users` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `email` varchar(127) NOT NULL,
  `username` varchar(32) NOT NULL DEFAULT '',
  `password` char(64) NOT NULL,
  `logins` int(10) unsigned NOT NULL DEFAULT '0',
  `last_login` int(10) unsigned DEFAULT NULL,
  `reset_token` char(64) NOT NULL DEFAULT '',
  `status` varchar(20) NOT NULL DEFAULT '',
  `last_failed_login` datetime NOT NULL,
  `failed_login_count` int(11) NOT NULL DEFAULT '0',
  `created` datetime NOT NULL,
  `modified` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uniq_username` (`username`),
  UNIQUE KEY `uniq_email` (`email`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ;

CREATE TABLE IF NOT EXISTS `promouter` (
  `userid` int(10) unsigned NOT NULL,
  `balance` float NOT NULL,
  `commision` float NOT NULL,
  `mountly_fee` float NOT NULL,
  `verified` tinyint(1) NOT NULL DEFAULT '0',
  KEY `promouter_ibfk_1` (`userid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

ALTER TABLE `front_end_users`
  ADD CONSTRAINT `front_end_users_ibfk_1` FOREIGN KEY (`userid`) REFERENCES `users` (`id`) ON DELETE CASCADE;

ALTER TABLE `promouter`
  ADD CONSTRAINT `promouter_ibfk_1` FOREIGN KEY (`userid`) REFERENCES `front_end_users` (`userid`) ON DELETE CASCADE;

users->front_end_users->promouter 
```

如果我`promouter`使用登录名、密码和地址创建而不是自动在 users `(login, password)`、 front_end_users`(addr1, addr2, userid)`和 promouter中插入适当的字段，我想要`(userid)`。

我有几个角色。所以我不能将 have_one 添加到用户模型中。但是我将 have_one 添加到 front_end_users 和 promouter 模型中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:18:31.313

如果您想在子创建时触发父创建，那么我认为您应该在数据库级别使用触发器。

编辑：

使用以下方案创建一个表：

```
Rules(ID, TableName, ColumnName, Event, Action, Parameters) 
```

然后，您将拥有一套规则，您将能够为此进行一般实施。在您的业务层中，您将调用您的规则解析器（也必须由您实现），这样您就可以在业务层中进行任何逻辑触发器。我希望这有帮助。

# javascript - 如何在javascript中测量斜体字体悬垂

> ID：10782632
> 
> 赞同：1
> 
> 时间：2012-05-28T09:53:24.433
> 
> 标签：javascript, textbox, typography

我需要计算 javascript 中的斜体文本悬垂。在这里您可以找到图片的含义：[ms 知识库](http://support.microsoft.com/kb/74298)。我使用以下链接来计算文本宽度： [Calculate text width with Javascript](https://stackoverflow.com/questions/118241/calculate-text-width-with-javascript?answertab=votes#tab-top)。我添加了模拟 div 并测量了文本宽度，但问题是最后一个符号是倾斜的，如果我使用文本宽度进行右对齐，最后一个符号的上半部分超出了所需的框。**我想知道**是否可以**计算斜体的斜体文本角度**或**悬垂的距离，**以减去该值并使我的文本在框中正确对齐？

# c - 如何编写宏以在 C 中访问内存中的数据？

> ID：10782639
> 
> 赞同：3
> 
> 时间：2012-05-28T09:54:00.183
> 
> 标签：c, macros, memory-address, c-preprocessor

上周我接受了一次采访。我被要求编写一个宏来读取内存位置（比如`0x2000`）。我在正常编程中编写了代码，但我无法编写宏。
请帮我弄清楚如何为下面的代码编写宏：

```
char *address = (char*)0x2000; // address is a pointer to address 3000 char val

*address = 36; // write 36 to 8 bit location at address

val = *address; // read 8 bit value from address 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T09:59:47.947

像这样的东西？

```
#define READ_CHAR_AT(address) *((char *) (address)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T10:06:18.570

```
#define MEMVAL(addr) ((*((char*)(addr)) = 36), *((char*)(addr))) 
```

如果要将其设置为 36，然后再次读取该值，请使用序列运算符。（&& 也可以，因为 36 是真的......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T10:00:13.250

```
#define memval(addr) *((char*)(addr)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T10:34:43.807

```
#define VALUE_AT_ADDRESS(address,type) *((type*) (address)) 
```

# c++ - 如何解释函数count位数是奇数还是偶数

> ID：10782645
> 
> 赞同：1
> 
> 时间：2012-05-28T09:54:36.780
> 
> 标签：c++, c, bit-manipulation

在“计算机系统”上找到功能：

```
int fun_a(unsigned x){
    int val = 0;
    while(x){
        val ^= x;
        x >>= 1;
    }
    return val & 0x1;
} 
```

如果 x 包含奇数“1”，则返回 1，如果 x 包含偶数“1”，则返回 0。我知道“val & 0x1”检查 val 是奇数还是偶数，但我不知道它如何计算 val 上的位数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:59:50.323

它不会精确计算位，但 XOR 会`val`为`x`. `1`如果它被翻转奇数次，那将使它成为一个。

它还会在 中翻转许多其他位`val`，但这无关紧要，因为它们在 return 语句中被屏蔽了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:06:35.707

在进行位旋转时，您通常不想考虑数字，而是考虑位数组。`^`对每一位执行加法 mod 2。既然只有低位的`val`事情，它发生了什么？

`val`不过，确实应该是无符号的，尽管大多数计算机体系结构不会给您带来问题。真的，在你使用这样的函数的情况下，你真的应该使用固定宽度的整数类型，比如`uint32_t`.

# android - 如何使用用户的值创建 ListNavigation

> ID：10782655
> 
> 赞同：0
> 
> 时间：2012-05-28T09:55:13.187
> 
> 标签：android, actionbarsherlock

ActionBarSherlock 中的 ListNavigation 从 res 中的 array.xml 中获取值。

```
Context context = getSupportActionBar().getThemedContext();
ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(context, R.array.locations, R.layout.sherlock_spinner_item);
list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item); 
```

是否可以使用用户的值作为导航器列表中的文本？即以编程方式将字符串值传递给ArrayAdapter，而不是createFromResource。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:06:04.390

是的，您可以添加自己的字符串数组列表，然后添加到数组列表或数组适配器，它应该可以正常工作

```
ArrayList<String> mItems = new ArrayList<Strings>(); 
```

. . .

```
Context C = getSupportActionBar().getThemedContext(); 
ArrayAdapter<String> list = new ArrayAdapter<String>(context, R.layout.sherlock_spinner_item, mItems);
list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item); 
```

然后你可以在你的字符串数组列表中添加/删除/更新项目

```
mItems.add("Some Item") or list.add("Other item"); 
```

应该这样做

# paypal - 我可以在 Paypal 上设置最高和最低付款金额吗

> ID：10782658
> 
> 赞同：1
> 
> 时间：2012-05-28T09:55:18.277
> 
> 标签：paypal, payment-gateway

我是支付网关方式的新手，需要将购买限制在预定义的最小值和最大值之间。我搜索了谷歌，发现[这](https://www.paypal-community.com/t5/How-to-use-PayPal/Can-I-set-a-minimum-payment-amount/td-p/6010)是最有用的结果。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:11:20.323

您可以设置最大值`MAXAMT`-[阅读更多](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout)

但是，没有选项可以使用 Paypal 设置最小值。但是您可以编写一个简单的 JS 来检查提交表单字段的值，如果数量少于预期，则抛出错误：

```
function checkMinimum() {
    var min = 5;
    if( parseFloat( document.formName.fieldName.value ) < min ) {
        alert("Minimum amount should be not less than $" + min + ". Spend more.");
        return false;
    }
    return true;
} 
```

# php - 使用 PHP 显示目录中的图像

> ID：10782659
> 
> 赞同：-1
> 
> 时间：2012-05-28T09:55:30.597
> 
> 标签：php, jquery, html, .htaccess

我是 PHP 和 jQuery 的新手，但我想对我正在使用 easySlider 和 Lightbox 插件开发的投资组合做以下事情：

1.  每个“li”标签显示六个图像或六个 div 图像的限制，并从目录中关闭它。

    *   如果目录中的图像超过六张，则创建一个新的“li”标签并再显示六张图像，直到加载该目录中的所有图像。

    *   如果图像的名称后带有数字 -> 显示：隐藏。例如： beta1 但我只想显示第一个“beta”

    *   按名称对图像进行排序。

2.  如果不是代码本身，请不要让任何人访问该目录中的图像。

投资组合的代码如下：

```
<div id="portfolio_hold">
   <ul>

     <li>
      <div class="portfolio_pic_hold">

        <a href="large.jpg" rel="lightbox[]" >
          <img src="thumb.jpg"/>
        </a>

      </div>
     </li>

   </ul>
</div> 
```

这是我想要展示的 html 示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:58:06.080

这可能会奏效

```
$thumbsPath = "trabalhos/design/thumbs/";
$imagespath = "trabalhos/design/images/";
$file_display = array('jpg', 'jpeg', 'png', 'gif');

if (file_exists($thumbsPath) == false)
{
    echo 'Directory \'', $thumbsPath, '\' not found.';
}
else
{
    $thumbs = glob($thumbsPath."*.[".implode($file_display,"|")."]");
    if (file_exists($imagesPath) == false){
            echo 'Directory \'', $imagesPath, '\' not found.';
    } else
    {
            $counter = 0;
            $filesPerPage = 6;
            foreach ($thumbs as $file)
            {
                    if($counter % $filesPerPage) echo "<li>";
                    $counter++;
                    $info = pathinfo($file);
                    $sFile =  basename($file,'.'.$info['extension']);

                    $aFiles = glob($images.$sFile."[0-9]+.[".implode($file_display,"|")."]"); //Este array tem todas as imagens relativas ao thumbnail que estás a ver
                    echo "<div><img /></div>";
                    if($counter == $filesPerPage) echo "</li>";
            }
    }
} 
```

# photolibrary - 我不能在 ZBarSDK 中使用 sourceType 作为 UIImagePickerControllerSourceTypePhotoLibrary

> ID：10782660
> 
> 赞同：2
> 
> 时间：2012-05-28T09:55:32.160
> 
> 标签：photolibrary, zbar-sdk

[我在http://zbar.sourceforge.net/download.html](http://zbar.sourceforge.net/download.html)下载 ZBarSDK 1.2 当我将 ZBarReaderViewController 的 sourceType 设置为 UIImagePickerControllerSourceTypeCamera 时效果很好。但是当我将 sourceType 设置为 UIImagePickerControllerSourceTypePhotoLibrary 或 UIImagePickerControllerSourceTypeSavedPhotosAlbum 时，应用程序崩溃了，我收到如下错误：

> 2012-05-28 17:23:03.476 Wow[4137:10703] *** 断言失败 -[ZBarReaderViewController setSourceType:], /Users/spadix/zbar/hg/sdk/iphone/ZBarReaderViewController.m:650 2012-05-28 17:23:03.626 Wow[4137:10703] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“尝试为 sourceType 属性设置不受支持的值 (1)”

我有谷歌这个问题，但找不到解决方案。谁能告诉我如何解决这个问题？剂量 1.2 版仅支持 UIImagePickerControllerSourceTypeCamera？剂量我下载的源女巫不好？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T03:01:49.510

如果您想选择保存的图像，基本上呈现标准的 iOS 媒体视图控制器。用户从标准 iOS 媒体控制器中选择图像后，您实例化 ZBarImageScanner 的副本以扫描图像。如果这有意义，请跳到第 5 步，看看我如何使用 ZBarImageScanner 扫描 UIImage。否则，请尝试按照以下步骤操作。希望这可以帮助。

1.  首先向用户显示带有选项的警报。

    ```
    UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:@"" delegate:self  
                                              cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Camera", @"Camera   Roll", @"Photo Library", nil];
    [sheet showInView:self.view]; 
    ```

2.  选择时，

    ```
    - (void)actionSheet:(UIActionSheet *)actionSheet willDismissWithButtonIndex:(NSInteger)buttonIndex {
        UIImagePickerControllerSourceType sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
        switch (buttonIndex) {
            case 0: sourceType = UIImagePickerControllerSourceTypeCamera; break;
            case 1: sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum; break;
            case 2: sourceType = UIImagePickerControllerSourceTypePhotoLibrary; break;
            default: break;
        }
        if ( buttonIndex <= 2 ) {
            [self presentBarcodeReader:sourceType];
        }
    } 
    ```

3.  当且仅当 sourceType == UIImagePickerControllerSourceTypeCamera 时才使用 ZBar 来呈现图像捕获界面。

    ```
    - (void)presentBarcodeReader:(UIImagePickerControllerSourceType)sourceType {
        if ( sourceType == UIImagePickerControllerSourceTypeCamera ) {
            ZBarReaderViewController *reader = [ZBarReaderViewController new];
            reader.readerDelegate = self;
            reader.showsZBarControls = YES;
            reader.supportedOrientationsMask = ZBarOrientationMaskAll;

            ZBarImageScanner *scanner = reader.scanner;
            [scanner setSymbology: ZBAR_I25
                           config: ZBAR_CFG_ENABLE
                               to: 0];
            [self presentModalViewController:reader animated:YES];
        } else {
            UIImagePickerController *mediaUI = [[UIImagePickerController alloc] init];
            mediaUI.sourceType = sourceType;
            mediaUI.mediaTypes = [UIImagePickerController         availableMediaTypesForSourceType:UIImagePickerControllerSourceTypeSavedPhotosAlbum];
            mediaUI.allowsEditing = NO;
            mediaUI.delegate = self;
            [self presentModalViewController:mediaUI animated:YES];
        }
    } 
    ```

4.  我们可以通过几种方法检测使用了哪个媒体选择器

    ```
    - (void)imagePickerController:(UIImagePickerController*)reader didFinishPickingMediaWithInfo:(NSDictionary*)info {
        id<NSFastEnumeration> results = [info objectForKey: ZBarReaderControllerResults];
        if ( results ) {
            ZBarSymbol *symbol = nil;
            for (symbol in results) break;

            [reader dismissViewControllerAnimated:YES completion:^{
                [self partLookup:symbol.data];
            }];
        } else {
            UIImage *image = [info objectForKey:UIImagePickerControllerEditedImage] ?         [info objectForKey:UIImagePickerControllerEditedImage] : [info         objectForKey:UIImagePickerControllerOriginalImage];
            [self scanImage:image];
        }
    } 
    ```

5.  和多汁的部分

    ```
    - (void)scanImage:(UIImage*)image {
        ZBarImage *zImage = [[ZBarImage alloc] initWithCGImage:image.CGImage];
        ZBarImageScanner *scanner = [[ZBarImageScanner alloc] init];
        [scanner setSymbology: ZBAR_I25
                       config: ZBAR_CFG_ENABLE
                           to: 0];
        [scanner scanImage:zImage];
        ZBarSymbolSet *set = [scanner results];

        for (ZBarSymbol *symbol in set) {
            NSLog(@"%@", symbol.data);
            // process symbol.data however you please.
        }
    } 
    ```

# cqrs - Saga , 命令, 事件 & ReadModel

> ID：10782668
> 
> 赞同：1
> 
> 时间：2012-05-28T09:56:16.923
> 
> 标签：cqrs, event-sourcing, saga

我目前正在编写我的第一个 saga，我对读取模型有点困惑。让我们用一个例子来解释它：

我有三个有界上下文：**编程**、**承包商**和**控制**。它们中的每一个都有其特定的读取模型。

工作流程：

*   **编程**发送事件“ *JobScheduled* ”
*   **Saga**收到此事件并告诉**承包商**“*安排工作*”。
*   完成后，**承包商**发送事件“ *JobDone* ”。
*   **Saga**接收到这个事件并告诉**控制**“*开始控制周期*”。

事实证明这里一切都很好。我们处于写入端，因此我们正在传递重要信息以使流程继续进行。

我的问题带有不必要的信息。假设事件“ *JobScheduled* ”有一个备注字段：“测试备注”，在此作业完成之前，该字段更改为“测试备注重要”。这种变化对所描述的工作流并不重要，但重要的是，**承包商在查看****承包商**有界上下文的读取模型时可能会看到现场的变化。

我是给传奇事件*NoteChanged*并对其进行处理，还是应该创建一个在我的**承包商**有界上下文中直接监听此事件的投影？

将它交给**saga**在我看来像是不必要的工作，因为我只是在这里更新 readmodel，没有涉及更改的域。

另一方面，在两个有界上下文之间进行直接耦合会删除 sagas 的一个资产，即修改有界上下文在工作流中彼此之间的交互的可能性。

感谢您的阅读，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:41:51.217

就我个人而言，我会发送一个命令“更改注释”，因为我认为它就像一个必须保存在聚合事件流中的信息。如果您的传奇不会“感觉”告诉任何人有关此命令的信息，或者只是将信息提供给悄悄更新您的读取模型的处理程序，我想这很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:11:03.327

如果更改注释很重要，则应显式建模。这可以通过像您已经做过的那样引入一个事件来完成。

如果所述事件与流程有任何相关性，则可以由 Saga 处理。如果它只需要在不同的读取模型中表示，那么只需在它们各自的投影中处理它就可以了。

一个上下文可以很好地监听和处理另一个上下文的事件，甚至跨越应用程序边界。至少这是跨上下文集成在以事件为中心的架构中的工作方式。

# c# - 更改代码生成的 HTML 标记

> ID：10782671
> 
> 赞同：0
> 
> 时间：2012-05-28T09:56:24.767
> 
> 标签：c#, asp.net, html, xhtml

以下代码：

```
 public virtual string LookupFeatureImages(string ProductID)
    {
        string[] features;
        using (SqlConnection con = new SqlConnection(DB.GetDBConn()))
        {
            con.Open();
            string query = @"SELECT     ExtensionData5
            FROM         Product
            WHERE     (ProductID = @ProductID)";
            using (IDataReader dr = DB.GetRS(query, new SqlParameter[] { new SqlParameter("@ProductID", ProductID) }, con))
            {
                if (dr.Read())
                {
                    if (String.IsNullOrEmpty(dr["ExtensionData5"].ToString()))
                    {
                        return "";
                    }
                    else
                    {
                        features = dr["ExtensionData5"].ToString().Split(',');
                    }
                }
                else
                {
                    return "";
                }
            }
            con.Close();
        }
       string s = "<script type=\"text/javascript\" src=\"skins/Skin_1/jquery.fancybox-1.3.1/fancybox/jquery.mousewheel-3.0.2.pack.js\"></script><script type=\"text/javascript\" src=\"skins/Skin_1/jquery.fancybox-1.3.1/fancybox/jquery.fancybox-1.3.1.js\"></script><link rel=\"stylesheet\" type=\"text/css\" href=\"skins/Skin_1/jquery.fancybox-1.3.1/fancybox/jquery.fancybox-1.3.1.css\" media=\"screen\" />";
       s += "<script type=\"text/javascript\">$(document).ready(function() {    $(\"a.iconClick\").fancybox({'hideOnContentClick': true, 'autoDimensions' : false, 'width' : 400, 'height' : 300 }); });</script>";

        s += "<table><tr>";
        for (int i = 0; i <= features.GetUpperBound(0); i++)
        {
            string name = features[i].Split(':')[0];
            bool isChecked = Boolean.Parse(features[i].Split(':')[2]);

            if (isChecked)
            {
                //s += "<td><img src=\"skins/skin_1/images/" + name + ".gif\" alt=\"" + name + "\" title=\"" + name + "\"></td>";
                s += "<td>";
                s += "<a class=\"iconClick\" rel=\"icons\" href='popup.aspx?title=" + name + "&topic=feature_" + name + "' title='" + name + "'><img src=\"skins/skin_1/images/" + name + ".gif\" alt=\"" + name + "\" title=\"" + name + "\"></a>";
                s += "</td>";

            }
        }
        s += "</tr><tr>";
        for (int i = 0; i <= features.GetUpperBound(0); i++)
        {
            string specification = features[i].Split(':')[1];
            bool isChecked = Boolean.Parse(features[i].Split(':')[2]);

            if (isChecked)
            {
                s += "<td>" + specification + "</td>";
            }
        }
        return s + "</tr></table>";
    } 
```

像这样输出 HTML：

```
<table id="FeatureBox">
<tbody>
<tr>
<td>
<div id="productInfoGrid">
<p id="ProductIconsTitle">Product Features At-A-Glance (<a href=
"JavaScript:newPopup('t-featureicons.aspx');">key</a>)</p>
<script src=
"skins/Skin_1/jquery.fancybox-1.3.1/fancybox/jquery.mousewheel-3.0.2.pack.js"
type="text/javascript">
</script><script src=
"skins/Skin_1/jquery.fancybox-1.3.1/fancybox/jquery.fancybox-1.3.1.js"
type="text/javascript">
</script><script type="text/javascript">
$(document).ready(function() {       $("a.iconClick").fancybox({'hideOnContentClick': true, 'autoDimensions' : false, 'width' : 400, 'height' : 300 }); });
</script>
<table>
<tbody>
<tr>
<td><a title="classification" href=
"popup.aspx?title=classification&amp;topic=feature_classification"
rel="icons" class="iconClick"><img title="classification" alt=
"classification" src=
"skins/skin_1/images/classification.gif"></a></td>
<td><a title="maxcapacityadults" href=
"popup.aspx?title=maxcapacityadults&amp;topic=feature_maxcapacityadults"
rel="icons" class="iconClick"><img title="maxcapacityadults" alt=
"maxcapacityadults" src=
"skins/skin_1/images/maxcapacityadults.gif"></a></td>
<td><a title="maxcapacitychildren" href=
"popup.aspx?title=maxcapacitychildren&amp;topic=feature_maxcapacitychildren"
rel="icons" class="iconClick"><img title="maxcapacitychildren" alt=
"maxcapacitychildren" src=
"skins/skin_1/images/maxcapacitychildren.gif"></a></td>
<td><a title="maxloadcapacity" href=
"popup.aspx?title=maxloadcapacity&amp;topic=feature_maxloadcapacity"
rel="icons" class="iconClick"><img title="maxloadcapacity" alt=
"maxloadcapacity" src=
"skins/skin_1/images/maxloadcapacity.gif"></a></td>
<td><a title="numberofinflatablechambers" href=
"popup.aspx?title=numberofinflatablechambers&amp;topic=feature_numberofinflatablechambers"
rel="icons" class="iconClick"><img title=
"numberofinflatablechambers" alt="numberofinflatablechambers" src=
"skins/skin_1/images/numberofinflatablechambers.gif"></a></td>
<td><a title="packagingsize" href=
"popup.aspx?title=packagingsize&amp;topic=feature_packagingsize"
rel="icons" class="iconClick"><img title="packagingsize" alt=
"packagingsize" src=
"skins/skin_1/images/packagingsize.gif"></a></td>
<td><a title="sizeinflated" href=
"popup.aspx?title=sizeinflated&amp;topic=feature_sizeinflated" rel=
"icons" class="iconClick"><img title="sizeinflated" alt=
"sizeinflated" src="skins/skin_1/images/sizeinflated.gif"></a></td>
<td><a title="standard" href=
"popup.aspx?title=standard&amp;topic=feature_standard" rel="icons"
class="iconClick"><img title="standard" alt="standard" src=
"skins/skin_1/images/standard.gif"></a></td>
<td><a title="weight" href=
"popup.aspx?title=weight&amp;topic=feature_weight" rel="icons"
class="iconClick"><img title="weight" alt="weight" src=
"skins/skin_1/images/weight.gif"></a></td>
</tr>
<tr class="featureNames">
<td>III,B</td>
<td>1</td>
<td>0</td>
<td>130 kg</td>
<td>3</td>
<td>79 x 28 x 51 cm</td>
<td>305 x 84 cm</td>
<td>ISO 6185-1</td>
<td>10.6 kg</td>
</tr>
</tbody>
</table>
<div class="c1"></div>
</div>
</td>
</tr>
</tbody>
</table> 
```

如何将输出更改为 DIV？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:01:25.043

我不太确定你在问什么。如果您希望您的代码显示在 div 而不是 table、tr 和 td 中，可以从代码中轻松实现。只需从输出中删除 table 和 tr 标签并将所有 td 标签替换为 div 标签。这应该有效地删除任何表格格式并将所有内容更改为 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:01:36.990

使用 jQuery 更改您的输出。例如，您可以获得 $("#FeatureBox") 表（或任何您需要的），之后，使用 css 或 html 方法

# android - 如何让片段的 onActivityCreated 方法再次运行？

> ID：10782672
> 
> 赞同：0
> 
> 时间：2012-05-28T09:56:32.157
> 
> 标签：android, android-fragments, android-viewpager

我有一个 Activity 实例化一些片段：

```
List<Fragment> fragments = new ArrayList<Fragment>();
fragments.add(Fragment.instantiate(this, HomeFragment.class.getName()));
fragments.add(Fragment.instantiate(this, BorrowedFragment.class.getName()));
fragments.add(Fragment.instantiate(this, LentFragment.class.getName()));
fragments.add(Fragment.instantiate(this, PeopleFragment.class.getName())); 
```

这些片段链接到 ViewPager。每个片段运行一个 SELECT 语句并将内容作为列表显示给用户。

问题是在 HomeFragment 中，我有一个按钮，单击该按钮时，它会向用户显示一个表单，因此他可以向该表添加信息。当用户添加信息时，我完成（）活动并再次显示 HomeFragment。当我滑动到 BorrowFragment 时，那里没有显示任何内容。我必须浏览到 PeopleFragment（列表的最后一个）并返回 BorrowedFragment。只有这样，才会显示信息。

插入信息时，我唯一要做的就是：

```
Button btDone = (Button) findViewById(R.id.buttonDone);
        btDone.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if(ck1.isChecked())
                    isIOwe = true;
                else
                    isIOwe = false;
                insertRecord();
                Toast.makeText(getApplicationContext(), "Record added", Toast.LENGTH_SHORT).show();
                /*FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
                ft.add(Fragment.instantiate(ctx, PeopleFragment.class.getName()), "test");
                ft.commit();*/
                finish();

            }
        }); 
```

我一直想知道是否应该对 FragmentTransaction 做些什么，以便能够重新启动 Fragment 的生命周期。

有什么帮助吗？

谢谢，费利佩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:05:46.160

我认为在片段的 getView 方法中执行您的查询应该可以解决问题。

如果不是，还有另一种可能。我不知道 ViewPager 非常好，但如果它有一个在显示其片段之一时将被调用的侦听器，我不会感到惊讶。如果你让你的片段实现一个接口，让它的后代实现一个 executeQuery 方法，你可以遍历你的片段列表并在事件发生时调用它。

# iphone - UILabel 的双色背景

> ID：10782680
> 
> 赞同：1
> 
> 时间：2012-05-28T09:56:59.567
> 
> 标签：iphone, ios, background, uilabel, layer

我有要求`UILabel`在两种颜色之间显示背景拆分，如下图所示：

![在此处输入图像描述](../Images/95356b7eae8e3fcc0dab648e1bc78029.png)

（这里的颜色底部是黑色，顶部是 50% 灰色 - 但这并不重要）。我尝试在界面生成器中将标签的背景颜色设置为 50% 灰色，然后在代码中执行此操作：

```
CALayer *sl1 = [[[CALayer alloc] init] autorelease];
sl1.frame = CGRectMake(0, lbl.frame.size.height / 2, lbl.frame.size.width, score1.frame.size.height/2);
sl1.backgroundColor = [[UIColor blackColor] CGColor];
[lbl.layer insertSublayer:sl1 atIndex:0]; 
```

不幸的是，这导致黑色部分被绘制在文本上，因此标签如下所示：

![在此处输入图像描述](../Images/c62bd321ce6b300997da19490ec3fc64.png)

不用说，这不是我需要的。那么如何在不使用自定义图像的情况下获得这个背景呢？问题是我需要`UILabel`在几个不同大小的地方都有这样的 - 所以我需要创建多个版本的背景图像。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:36:30.063

这有效：

```
UILabel* myLabel = [[UILabel alloc] initWithFrame:CGRectMake(100, 100, 100, 50)];
myLabel.text = @"Ciao";
myLabel.textColor = [UIColor greenColor];

UIGraphicsBeginImageContext(CGSizeMake(100, 50));   
CGContextRef context = UIGraphicsGetCurrentContext();
// drawing with a gray fill color
CGContextSetRGBFillColor(context,  0.4, 0.4, 0.4, 1.0);
// Add Filled Rectangle, 
CGContextFillRect(context, CGRectMake(0.0, 0.0, 100, 50));

// drawing with a black fill color
CGContextSetRGBFillColor(context,  0., 0., 0., .9);
// Add Filled Rectangle, 
CGContextFillRect(context, CGRectMake(0.0, 25, 100, 25));

UIImage* resultingImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

myLabel.backgroundColor = [UIColor colorWithPatternImage:resultingImage];
[self.view addSubview:myLabel]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:18:20.670

使用. `UIColor`_ `+colorWithPatternImage:`传入 1px`UILabel`的高度图像，它将在视图的宽度上“平铺”。

```
myLabel.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"label-background.png"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:20:37.267

首先，您必须对渐变背景进行子类化`UILabel`并覆盖它的`drawRect:`方法

```
- (void)drawRect:(CGRect)rect 
{
    //////////////GET REFERENCE TO CURRENT GRAPHICS CONTEXT
    CGContextRef context = UIGraphicsGetCurrentContext();

    //////////////CREATE BASE SHAPE WITH ROUNDED CORNERS FROM BOUNDS
CGRect activeBounds = self.bounds;
CGFloat cornerRadius = 10.0f;   
CGFloat inset = 6.5f;   
CGFloat originX = activeBounds.origin.x + inset;
CGFloat originY = activeBounds.origin.y + inset;
CGFloat width = activeBounds.size.width - (inset*2.0f);
CGFloat height = activeBounds.size.height - (inset*2.0f);

CGRect bPathFrame = CGRectMake(originX, originY, width, height);
CGPathRef path = [UIBezierPath bezierPathWithRoundedRect:bPathFrame cornerRadius:cornerRadius].CGPath;

//////////////CREATE BASE SHAPE WITH FILL AND SHADOW
CGContextAddPath(context, path);
CGContextSetFillColorWithColor(context, [UIColor colorWithRed:210.0f/255.0f green:210.0f/255.0f blue:210.0f/255.0f alpha:1.0f].CGColor);
CGContextSetShadowWithColor(context, CGSizeMake(0.0f, 1.0f), 6.0f, [UIColor colorWithRed:0.0f/255.0f green:0.0f/255.0f blue:0.0f/255.0f alpha:1.0f].CGColor);
CGContextDrawPath(context, kCGPathFill);

//////////////CLIP STATE
CGContextSaveGState(context); //Save Context State Before Clipping To "path"
CGContextAddPath(context, path);
CGContextClip(context);

//////////////DRAW GRADIENT
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
size_t count = 3;
CGFloat locations[3] = {0.0f, 0.57f, 1.0f}; 
CGFloat components[12] = 
{   0.0f/255.0f, 0.0f/255.0f, 0.0f/255.0f, 1.0f,     //1
    5.0f/255.0f, 5.0f/255.0f, 5.0f/255.0f, 1.0f,     //2
    10.0f/255.0f, 10.0f/255.0f, 10.0f/255.0f, 1.0f};    //3
CGGradientRef gradient = CGGradientCreateWithColorComponents(colorSpace, components, locations, count);

CGPoint startPoint = CGPointMake(activeBounds.size.width * 0.5f, 0.0f);
CGPoint endPoint = CGPointMake(activeBounds.size.width * 0.5f, activeBounds.size.height);

CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
CGColorSpaceRelease(colorSpace);
CGGradientRelease(gradient);
} 
```

这将绘制黑色到白色的渐变背景可能这将帮助你快乐编码:) 上面的代码来自这个网站[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/)

# asp.net - 在 IIS 上部署 asp.net 网站会出现问题，为什么？

> ID：10782681
> 
> 赞同：0
> 
> 时间：2012-05-28T09:57:06.827
> 
> 标签：asp.net, deployment, iis-7, website-deployment

我使用基于表单的身份验证开发了一个 asp.net 站点，当我从 Visual Studio 内置服务器运行时，该站点正在工作，但是当我将它部署在 IIS 服务器中时，它在我尝试登录时显示以下错误

```
Failed to generate a user instance of SQL Server due to failure in retrieving the user's local application data path. Please make sure the user has a local user profile on the computer. The connection will be closed. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlClient.SqlException: Failed to generate a user instance of SQL Server due to failure in retrieving the user's local application data path. Please make sure the user has a local user profile on the computer. The connection will be closed.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 
```

我正在使用 asp.net 默认模板，但我通过 web.config 文件配置了用户授权，例如

```
<authentication mode="Forms">
  <forms loginUrl="~/Login.aspx" 
         name=".ASPXAUTH"
         path="/"
         requireSSL="false"
         slidingExpiration="true"
         defaultUrl="~/Admin/OrderHistory.aspx"
         cookieless="UseDeviceProfile"
         enableCrossAppRedirects="false"
         >
    <credentials passwordFormat="Clear">
      <user name="Admin" password="adm123$"/>
      <user name="Administrator" password="adm234%"/>
    </credentials>
  </forms>
</authentication> 
```

## 展示信息

我可以使用 VS 内置服务器登录，但无法使用 IIS 登录

## 编辑

嗨，将流程模型标识更改为 NetworkService 后，早期的错误消失了，但我无法登录

每次显示错误的凭据错误消息

我使用 asp.net 会员登录控制来获取用户名和密码

它在VS内置服务器中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:09:11.580

尝试从您的本地 PC 连接到您的实时数据库，这将清楚它是否与您使用的用户名/密码有关，或者必须进行一些 IIS 配置。

您还可以查看此链接[http://blogs.iis.net/bills/archive/2009/10/07/error-connecting-to-sql-server-from-windows-7-windows-2008-r2-with- asp-net.aspx](http://blogs.iis.net/bills/archive/2009/10/07/error-connecting-to-sql-server-from-windows-7-windows-2008-r2-with-asp-net.aspx)

# c++ - cin 会将键盘输入的 \n 识别为换行符吗？

> ID：10782682
> 
> 赞同：3
> 
> 时间：2012-05-28T09:57:12.817
> 
> 标签：c++, newline

我是 C++ 的初学者，所以如果这个问题听起来很愚蠢，我很抱歉。

我制作了这个小程序来帮助我熟悉以下属性`cin`：

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
    string next;
    cout<<"Enter your input.\n";
    cin>>next;
    cout<<next;
    return 0;
} 
```

当我`\n`从键盘输入中输入时，我被退回`\n`。

此外，当我将变量*next*从字符串更改为字符并为其提供与上面相同的输入时，我只返回了一个`\`.

我的问题是：为什么我没有返回一个新行呢？不能将键盘输入`cin`识别`\n`为换行符？还是仅适用于`cout`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:10:15.373

如果您需要您的程序`\n`在输入时识别为换行符，您可以查看： [https ://stackoverflow.com/a/2508814/815812](https://stackoverflow.com/a/2508814/815812)

迈克尔所说的完全正确。

你可以尝试类似的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T10:10:29.623

从技术上讲，这取决于您的程序之外的事情，但假设您的终端只是传递与“\”和“n”字符相对应的各个字节（我认为任何理智的人都会这样做），那么您所看到的行为是预期的.

"\n" 只不过是添加到编程语言和环境中的快捷方式，让您更轻松地表示 ASCII 返回键的概念。它本身不是一个字符，只是一个命令告诉程序生成一个对应于按 Enter 键的不可打印字符。

假设您在记事本或其他任何东西中，然后按 Tab 键。它在一个点上标记。键入“\t”只输入文字字符“\”和“t”。在内部，写记事本的人必须说明当用户按下 Tab 时它应该做什么，他通过使用像这样的助记符来做到这一点

```
if(key == '\t') {
    // tab over 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T10:17:53.630

`\n`是 C++ 中的转义序列；当它出现在字符常量或字符串文字中时，这两个字符序列被替换为代表默认基本编码中的新行的单个字符（在现代系统中几乎总是 0x0A）。C++ 定义了许多这样的转义序列，都以`\`.

输入的映射方式不同，在许多情况下，取决于设备。从键盘读取时，大多数系统会缓冲一整行，并且仅在按下 Enter 键时从其中返回字符；回车键发送给 C++ 程序的内容可能会有所不同，文件是否以文本模式或二进制模式打开也会有所不同——在文本模式下，C++ 库应与操作系统协商以确保回车键总是产生由 . 表示的单个字符`\n`。（`std::cin`始终以文本模式打开。）键盘驱动程序是否执行特殊操作`\`取决于驱动程序，但大多数都没有。`\`从键盘输入时，C++ 从不做任何特别的事情（和`\n`在 C++ 源代码中，除了字符串文字和字符常量之外没有特殊含义）。

# mongodb - 在不替换整个文档的情况下一次更新多个对象字段（但对象字段的一个子集）（Spring 3.1 和 MongoTemplate for MongoDB）

> ID：10782684
> 
> 赞同：2
> 
> 时间：2012-05-28T09:57:13.957
> 
> 标签：mongodb, spring-3

我正在尝试同时更新“用户”文档中的多个字段。但是，我只想更新一些字段而不是替换整个文档，而我似乎无法避免后者。我这样做的方法如下所示：

```
public void mergeUser(User user) {
    Update mergeUserUpdate = new Update();
    mergeUserUpdate.set("firstName", user.getFirstName());
    mergeUserUpdate.set("lastName", user.getLastName());
    mergeUserUpdate.set("username", user.getUsername());

    mongoTemplate.updateFirst(new Query(Criteria.where("_id").is(user.getId())), mergeUserUpdate, User.class);
} 
```

我的用户对象确实包含其他字段 - 一个`password`字段就是其中之一 - 但如果在它被立即替换为空字符串或完全删除之前将其设置为一个值。所以在数据库中，这个：

```
{
  "_id" : ObjectId("4fc34563c3276c69248271d8"),
  "_class" : "com.test.User",
  "password" : "d26b7f5c0ed888e46889dd1e3d217816d070510596f495e156e9efe4b035fec5a1fe1be643955359",
  "username" : "john@gmail.com",
  "alias" : "john"
} 
```

在我调用方法后被替换为`mergeUser`：

```
{
  "_id" : ObjectId("4fc34563c3276c69248271d8"),
  "_class" : "com.test.User",
  "username" : "john@gmail.com",
  "firstName" : "John",
  "lastName" : "Doe",
  "address" : {
    "addressLine1" : ""
  }
} 
```

如果我查看 Update 对象，我会看到它包含以下内容：

```
{$set={firstName=John, lastName=Doe, username=john@gmail.com}} 
```

这对我来说是正确的，根据我对 MongoDB`$set`函数的理解，这应该只设置指定的值。因此，我希望密码字段保持不变，并相应地添加或更改其他字段。

作为一般讨论点，我最终试图实现某种“合并”功能，Spring 将自动神奇地检查提供的 User 对象中存在哪些字段，并且只使用填充的值更新数据库，而不是所有领域。这在理论上应该是可能的，我会想到的。有人知道这样做的好方法吗？

这是我的用户对象以防万一：

```
/**
 * Represents an application user.
 */
@Document(collection = "users")
public class User {

    @Id
    private String id;

    @NotEmpty( groups={ChangePasswordValidationGroup.class} )
    private String password;

    @Indexed
    @NotEmpty
    @Email
    private String username;

    private String firstName;

    private String lastName;

    private Date dob;

    private Gender gender;

    private Address address;

    public enum Gender {
        MALE, FEMALE
    }

    // /////// GETTERS AND SETTERS ///////////

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public Date getDob() {
        return dob;
    }

    public void setDob(Date dob) {
        this.dob = dob;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public Gender getGender() {
        return gender;
    }

    public void setGender(Gender gender) {
        this.gender = gender;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getAlias() {
        return alias;
    }

    public void setAlias(String alias) {
        this.alias = alias;
    }

    public Address getAddress() {
        return address;
    }

    public void setAddress(Address address) {
        this.address = address;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:41:06.833

上面的代码确实工作得很好。我犯了一个愚蠢的错误，在正确更新后我继续保存用户对象，用新文档替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T04:34:19.553

使用 Spring MongoTemplate 有另一种解决方案来更新没有某些字段的实体：

```
DBObject userDBObject = (DBObject) mongoTemplate.getConverter().convertToMongoType(user);
//remove unnecessary fields    
userDBObject.removeField("_id");
userDBObject.removeField("password");

//Create setUpdate & query
Update setUpdate = Update.fromDBObject(new BasicDBObject("$set", userDBObject));
mongoTemplate.updateFirst(new Query(Criteria.where("_id").is(user.getId())), setUpdate , User.class);

//Or use native mongo
//mongoTemplate.getDb().getCollection("user").update(new BasicDBObject("_id",user.getId())
        , new BasicDBObject("$set", userDBObject), false, false); 
```

因为它使用自动转换器，所以当您的实体有很多字段时非常有用。

# python - "$ python -FLAG" 指定要在 Python 中加载的模块？

> ID：10782686
> 
> 赞同：0
> 
> 时间：2012-05-28T09:57:22.040
> 
> 标签：python, module, pip

```
$ python minitwit_tests.py 
Traceback (most recent call last):
  File "minitwit_tests.py", line 12, in <module>
    import minitwit
  File "/.../flask/examples/minitwit/minitwit.py", line 17, in <module>
    from flask import Flask, request, session, url_for, redirect, \
ImportError: No module named flask 
```

我没有成为 root 的权限，所以我需要一些标志或环境变量来指定加载烧瓶的位置

```
$ pip install -E lib Flask &> /dev/null 
```

现在我需要将 lib 指定为目录，如何添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:58:13.877

您需要通过`source lib/bin/activate`在 shell 中运行来启用 virtualenv。

如果`lib`是您刚刚手动创建的文件夹（即不使用`virtualenv`），请将其删除并重新创建为 virtualenv：

```
virtualenv --no-site-packages --distribute lib
source lib/bin/activate
pip install flask 
```

如果您对选项感到好奇`virtualenv`：

*   `--no-site-packages`阻止它使用全局安装的 python 包。这可确保您确切知道哪些软件包可用并具有您需要的版本。
*   `--distribute`确保您拥有`pip`

# matlab - Matlab：UTF-8 到位串表示

> ID：10782688
> 
> 赞同：0
> 
> 时间：2012-05-28T09:57:27.480
> 
> 标签：matlab, file-io, utf-8, binary

我有一个文件，其中包含一个 16 字符长的 UTF-8 序列，我想将其读出然后转换为 128 位字符串。该文件通过以下方式读出：

```
fid      = fopen('file_0','r','n','UTF-8')
utf8_val = fgetl(fid); 
```

现在有人知道如何将 utf8_val 转换为 128 位字符串表示吗？希望Matlab为此提供一些功能:)。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:03:16.693

为什么不直接从文件中读取字节

```
%# read bytes
fid = fopen('file.txt', 'rb');
b = fread(fid, '*uint8')';
fclose(fid); 
```

然后，如果您希望可以将其转换为 UTF-8 字符串

```
%# convert to Unicode string
s = native2unicode(b, 'UTF-8'); 
```

# c# - String 和 Char 类型如何存储在 .NET 的内存中？

> ID：10782690
> 
> 赞同：11
> 
> 时间：2012-05-28T09:57:30.463
> 
> 标签：c#, memory, memory-management, garbage-collection, clr

我需要存储一个语言代码字符串，例如“en”，它总是包含 2 个字符。

将类型定义为“String”还是“Char”更好？

```
private string languageCode; 
```

对比

```
private char[] languageCode; 
```

或者还有其他更好的选择吗？

这两个如何存储在内存中？分配值时将为它们分配多少字节或位？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T09:58:50.583

**它们是如何存储的**

the`string`和 the`char[]`都存储在堆上 - 所以存储是相同的。在内部，我会假设一个`string`简单的封面`char[]`包含**许多**额外的代码，以使其对您有用。

此外，如果您有很多重复的字符串，您可以使用[Interning](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)来减少这些字符串的内存占用。

**更好的选择**

我更喜欢字符串 - 数据类型是什么以及您打算如何使用它会立即变得更加明显。人们也更习惯于使用字符串，因此可维护性不会受到影响。您还将从为您完成的所有样板代码中受益匪浅。微软也付出了很多努力来确保该`string`类型不是性能猪。

**分配大小**

我不知道分配了多少，我相信字符串非常有效，因为它们只分配足够的空间来存储 Unicode 字符——因为它们是不可变的，所以这样做是安全的。如果不分配新数组中的空间，数组也无法调整大小，所以我再次假设它们只抓取他们需要的东西。

[.NET 数组的开销？](https://stackoverflow.com/questions/1589669/overhead-of-a-net-array)

**备择方案**

根据您的信息，只有 20 种语言代码并且性能是关键，您可以声明自己的枚举以减少表示代码所需的大小：

```
enum LanguageCode : byte
{
    en = 0,
} 
```

这将只需要 1 个字节，而不是 4+ 两个`char`（在一个数组中），但它确实将可用`LanguageCode`值的范围限制为`byte`- 对于 20 个项目来说足够大。

您可以使用运算符查看值类型的大小`sizeof()`：`sizeof(LanguageCode)`。枚举只不过是底层的类型，它们默认为`int`，但正如您在我的代码示例中看到的那样，您可以通过“继承”新类型来更改它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T10:03:39.210

简短回答：使用字符串

长答案：

```
private string languageCode; 
```

AFAIK 字符串存储为以长度为前缀的字符数组。在堆上实例化一个 String 对象来维护这个原始数组。但 String 对象不仅仅是一个简单的数组，它支持基本的字符串操作，如比较、连接、子字符串提取、搜索等

尽管

```
private char[] languageCode; 
```

将存储为一个字符数组，即一个数组对象将在堆上创建，然后它将用于管理您的字符。但它仍然有一个长度属性，该属性存储在内部，因此与字符串相比没有明显的内存节省。虽然大概 Array 比 String 更简单，并且可能具有更少的内部变量，因此提供了更低的内存占用空间（这需要验证）。

但是 OTOH 你失去了在这个 char 数组上执行字符串操作的能力。即使是字符串比较之类的操作现在也变得很麻烦。长话短说使用字符串！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T17:25:09.037

> 这两个如何存储在内存中？分配值时将为它们分配多少字节或位？

.NET 中的每个*实例*都按如下方式存储：一个`IntPtr`大小的字段用于类型标识符；另一个用于锁定实例；余数是四舍五入的实例字段数据`IntPtr`。因此，在 32 位平台上，每个*实例*占用 8 个字节 + 字段数据。

这适用于 a`string`和 a `char[]`。这两者也将数据的长度存储为一个 IntPtr 大小的整数，然后是实际数据。因此，一个两个字符`string`和一个两个字符`char[]`，在 32 位平台上，将占用 8+4+4 = 16 个字节。

在恰好存储两个字符时减少这种情况的唯一方法是将实际字符或包含字符的结构存储在字段或数组中。所有这些将只消耗 4 个字节的字符：

```
// Option 1
class MyClass
{
    char Char1, Char2;
}

// Option 2
class MyClass
{
    CharStruct chars;
}
...
struct CharStruct { public char Char1; public char Char2; } 
```

`MyClass`每个实例最终将使用 8 个字节（在 32 位机器上）加上 4 个字节用于字符。

```
// Option 3
class MyClass
{
    CharStruct[] chars;
} 
```

这将使用 8 个字节作为 MyClass 开销，加上 4 个字节作为`chars` *reference*，加上 12 个字节作为数组的开销，加上数组`CharStruct`中的每个字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T10:00:04.203

如果您想准确存储 2 个字符，并且最有效地做到这一点，请使用结构：

```
struct Char2
{
 public char C1, C2;
} 
```

使用此结构通常不会导致新的堆分配。它只会扩大现有对象的大小（尽可能少的数量）或消耗非常便宜的堆栈空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T05:45:33.313

字符串确实有一个指针长度的大小开销，即 32 位进程为 4 个字节，64 位进程为 8 个字节。但话又说回来，字符串提供的回报比 char 数组要多得多。

如果您的应用程序使用许多短字符串，并且您不需要经常使用它们的字符串属性和方法，那么您可能可以保护几个字节的内存。但是如果你想将它们中的任何一个用作字符串，你首先必须创建一个新的字符串实例。我看不出这将如何帮助您获得足够的内存以值得麻烦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-17T11:43:29.707

String 只是在内部实现了一个 char 类型的索引器，我们可以说这`string`相当于`char[]`type 有很多额外的代码来使它对你有用，因此，就像一个数组一样，它总是存储在堆上。

一个数组不能在不分配新空间的情况下进行操作，字符串也是如此，因此它是不可变的

字符串实现`IEnumerable<char>`

值得注意的一点：当您将字符串传递给函数时，它是**按值传递，**除非使用`ref`

# eclipse - 如何删除 Eclipse SWT 表的边框

> ID：10782692
> 
> 赞同：-1
> 
> 时间：2012-05-28T09:57:36.030
> 
> 标签：eclipse, swt, eclipse-rcp, border

我在 Eclipse 表单中添加了一个 SWT 表，但我想删除表的外边框。需要的怎么做。

![在此处输入图像描述](../Images/ff29e8539bec45c83260e8110bc8d8ed.png)

上面是我创建的表格，但我不希望它周围有边界/边界。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:21:41.243

不知道是不是这样，但从图片上看，外边框看起来像使用 SWT.Border 标志时绘制的外边框。也许您正在将您的表格添加到复合材料中，并将此标志用作样式常量。去掉这个常量，外边框就消失了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:57:22.553

尝试寻找`SWT.BORDER`并用其他东西替换它，比如`SWT.NONE`

它可能是您创建表或容器的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-17T05:06:35.687

即使您不使用`SWT.BORDER`. 但如果没有`TableColumn`，则不呈现边框。只要删除`TableColumn`，如果你想删除边框。

# objective-c - iOS以编程方式重新加载UITabViewController中的所有选项卡

> ID：10782693
> 
> 赞同：0
> 
> 时间：2012-05-28T09:57:41.270
> 
> 标签：objective-c, ios, tabs

我的应用程序有一个带有 3 个选项卡的 UITabViewController。前两个选项卡将从磁盘读取一些数据并显示（在前两个选项卡的 viewDidLoad 中完成）。

第三个选项卡有某种配置信息。如果用户更改第三个选项卡中的配置信息，我希望刷新前两个选项卡，即应重新调用 viewDidLoad。

我不能在前两个选项卡中使用 viewWillAppear，因为从磁盘部分读取内容有点密集，我不想每次单击选项卡时都这样做。另外，在编辑第三个选项卡数据时，我需要做一些辅助任务（除了更新前两个选项卡），所以我想通过 viewDidLoad 重新加载选项卡，同时执行这些辅助任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:32:28.603

使用 NSNotifications 来做到这一点。

由于第三个选项卡是您的配置设置，因此您可能希望将这些设置存储在其中，`NSUserDefaults`因此请使用`NSUserDefaultsDidChangeNotification`来在您的`viewDidLoad`方法中注意这一点，并将您的 reloadData 代码移动到它自己的方法中。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];
    [notificationCenter addObserver:self
                           selector:@selector(userDefaultsChanged:)  
                               name:NSUserDefaultsDidChangeNotification
                             object:nil];

    [self reloadData];
} 
```

现在，只要您的默认值发生更改，这将触发对该方法的调用，`userDefaultsChanged:`请按如下方式添加该方法。

```
- (void)userDefaultsChanged:(NSNotification *)notification
{
    [self reloadData];
}

- (void)viewDidUnload
{
    [super viewDidUnLoad];

    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

编辑：查看特定默认值的替代方法

```
[[NSUserDefaults standardUserDefaults] addObserver:self
                                        forKeyPath:@"SomeDefaultKey"
                                           options:NSKeyValueObservingOptionNew
                                           context:NULL];

- (void)observeValueForKeyPath:(NSString *) keyPath ofObject:(id) object change:(NSDictionary *) change context:(void *) context
{
    if([keyPath isEqual:@"SomeDefaultKey"])
    {
       // Do Something
    }
    if([keyPath isEqual:@"SomeOtherKey"])
    {
       // Do Something else
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:02:05.717

您可以使用该`-(void)viewWillAppear:(BOOL)animated`方法在其他两个视图控制器上触发刷新。

如果您不想在每次用户单击选项卡时重新加载数据，您可以使用 NSNotifications 来触发刷新。详细解释见：[http ://www.numbergrinder.com/2008/12/patterns-in-objective-c-observer-pattern/](http://www.numbergrinder.com/2008/12/patterns-in-objective-c-observer-pattern/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T10:04:50.863

我会用`-(void)viewWillAppear:(BOOL)animated`. 为了避免从磁盘读取“有点密集”，您可以在第三个选项卡中的配置更改时设置一个标志，然后如果设置了该标志，则仅在其他选项卡中从磁盘读取

# visual-studio-2010 - 实时媒体服务器在流式传输时每次发送多少字节

> ID：10782694
> 
> 赞同：2
> 
> 时间：2012-05-28T09:57:43.187
> 
> 标签：visual-studio-2010, visual-c++, streaming, live, rtsp

我有以下实时媒体库代码，因为我试图理解它，我**想知道实时媒体服务器在流式传输视频文件 test1.264 时每次发送多少字节？如何找出流媒体时间，我拔出头发但无法找出，任何人都可以帮助我找到上述查询....**

```
#include "liveMedia.hh"
#include "BasicUsageEnvironment.hh"

UsageEnvironment* env;

// To make the second and subsequent client for each stream reuse the same
// input stream as the first client (rather than playing the file from the
// start for each client), change the following "False" to "True":
Boolean reuseFirstSource = False;

// To stream *only* MPEG-1 or 2 video "I" frames
// (e.g., to reduce network bandwidth),
// change the following "False" to "True":
Boolean iFramesOnly = False;

static void announceStream(RTSPServer* rtspServer, ServerMediaSession* sms,
               char const* streamName, char const* inputFileName); // fwd

static char newMatroskaDemuxWatchVariable;
static MatroskaFileServerDemux* demux;
static void onMatroskaDemuxCreation(MatroskaFileServerDemux* newDemux, void* /*clientData*/) {
  demux = newDemux;
  newMatroskaDemuxWatchVariable = 1;
}

int main(int argc, char** argv) {
  // Begin by setting up our usage environment:
  TaskScheduler* scheduler = BasicTaskScheduler::createNew();
  env = BasicUsageEnvironment::createNew(*scheduler);

  UserAuthenticationDatabase* authDB = NULL;
#ifdef ACCESS_CONTROL
  // To implement client access control to the RTSP server, do the following:
  authDB = new UserAuthenticationDatabase;
  authDB->addUserRecord("username1", "password1"); // replace these with real strings
  // Repeat the above with each <username>, <password> that you wish to allow
  // access to the server.
#endif

  // Creating the RTSP server:
  RTSPServer* rtspServer = RTSPServer::createNew(*env, 8554, authDB);
  if (rtspServer == NULL) {
    *env << "Failed to create RTSP server: " << env->getResultMsg() << "\n";
    exit(1);
  }

  char const* descriptionString
    = "Session streamed by \"testOnDemandRTSPServer\"";
 // A H.264 video elementary stream:
  {
    char const* streamName = "h264ESVideoTest";
    char const* inputFileName = "test1.264";
    ServerMediaSession* sms
      = ServerMediaSession::createNew(*env, streamName, streamName,
                      descriptionString);
    sms->addSubsession(H264VideoFileServerMediaSubsession
               ::createNew(*env, inputFileName, reuseFirstSource));
    rtspServer->addServerMediaSession(sms);

    announceStream(rtspServer, sms, streamName, inputFileName);
  }
    if (rtspServer->setUpTunnelingOverHTTP(80) || rtspServer->setUpTunnelingOverHTTP(8000) || rtspServer->setUpTunnelingOverHTTP(8080)) {
    *env << "\n(We use port " << rtspServer->httpServerPortNum() << " for optional RTSP-over-HTTP tunneling.)\n";
  } else {
    *env << "\n(RTSP-over-HTTP tunneling is not available.)\n";
  }

  env->taskScheduler().doEventLoop(); // does not return

  return 0; // only to prevent compiler warning
}

static void announceStream(RTSPServer* rtspServer, ServerMediaSession* sms,
               char const* streamName, char const* inputFileName) {
  char* url = rtspServer->rtspURL(sms);
  UsageEnvironment& env = rtspServer->envir();
  env << "\n\"" << streamName << "\" stream, from the file \""
      << inputFileName << "\"\n";
  env << "Play this stream using the URL \"" << url << "\"\n";
  delete[] url;
} 
```

# bash - 如何在 bash 中设置 4 个空格制表符

> ID：10782699
> 
> 赞同：34
> 
> 时间：2012-05-28T09:58:19.293
> 
> 标签：bash, space

它看起来像`set tabstop=4`在 VIM 中，但我不知道如何在**bash中设置它**

例如：

```
echo -e "1234567890\t321\n1\t2\n123\t1" 
```

电流输出：

```
1234567890      321
1       2
123     1 
```

我想要这样的输出：

```
1234567890  321
1   2
123 1 
```

它可以在任何地方显示，就像`cat somefile`或`php -r 'echo "\t123";'`

如何在 bash 中设置标签宽度？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-05-28T10:09:44.213

这不是你的 shell（或 php 或 cat）的属性。管理输出的是您的终端。

使用[`tabs`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/tabs.html)命令更改行为：

```
$ tabs 4

$ echo -e "a\tb"      
a   b
$ tabs 12

$ echo -e "a\tb" 
a           b 
```

（`tabs`在 POSIX 中指定，上面的输出是“伪造的”：它仍然是两个字母之间的制表符。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:38:54.817

`tabs`您可以使用该实用程序设置定期或不定期的时间间隔。无论您是在进行自己的输出、`cat`用于输出已经包含选项卡的文件还是使用您无法控制的程序的输出，它都可以工作。

但是，如果您要控制输出，最好使用`printf`而不是`echo`格式化字符串而不是制表符。

```
$ printf '%-12s%8.4f %-8s%6.2f\n' 'Some text' 23.456 'abc def' 11.22
Some text    23.4560 abc def  11.22
$ format='%*s%*.*f %*s%*.*f\n'
$ printf "$format" -12 'Some text' 8 4 23.456 -8 'abc def' 6 2 11.22
Some text    23.4560 abc def  11.22 
```

除非您希望其他人能够使用该`tabs`实用程序控制您的程序的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-11T22:04:14.643

您可以使用 setterm 来设置它

```
setterm -regtabs 4 
```

我把它放在我的 .bash_profile 中，但它与 bash 无关

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-07T21:26:38.167

`tabs 4`导致以下制表位位置。这不是你所要求的。

```
tab stop positions 4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80
         1         2         3         4         5         6         7         8
12345678901234567890123456789012345678901234567890123456789012345678901234567890
   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   * 
```

你问这个..

```
tab stop positions 5,9,13,17,21,25,29,33,37,41,45,49,53,57,61,65,69,73,77,80
         1         2         3         4         5         6         7         8
12345678901234567890123456789012345678901234567890123456789012345678901234567890
    *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *  * 
```

使用单个数字指定选项卡会创建一个从 0 开始的隐式列表
。创建一个显式列表，例如您所要求的。提供逗号或空格分隔的制表位位置列表。
像这样：`tabs 5,9,13,17,21,25,29,33,37,41,45,49,53,57,61,65,69,73,77`

请参阅`man tabs`和`tabs -v`了解更多详情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-08T09:04:49.503

这对我有用。

`~/.bash_profile`

```
# Set the tab stops
if [ -f ~/.bash_tab_stops ]; then
    . ~/.bash_tab_stops
fi 
```

`~/.bash_tab_stops`

```
tab_width=4
terminal_width=$( stty size | awk '{print $2}' )

set_tab_stops() {
    local tab_width=$1 terminal_width=$2 tab_stops=''
    for (( i=1+$tab_width; $i<$terminal_width; i+=$tab_width )); do
        tab_stops+=$i','
    done
    tabs $tab_stops
}

set_tab_stops $tab_width $terminal_width 
```

`GNU bash, version 4.2.46(2)-release (x86_64-redhat-linux-gnu)`
`PuTTY Release 0.73 Build platform: 64-bit x86 Windows`
`Linux VPS 3.10.0-1127.18.2.el7.centos.plus.x86_64`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-25T08:19:22.750

如果您想要第一个选项卡的偏移量（例如 for `git diff`），您可以使用 shell 扩展来获取步进数字：

```
tabs {5..300..4} 
```

在上面，5 是第一个选项卡的宽度，第二个数字是您的终端宽度，最后一个是您的常规选项卡宽度。

# css - 使用 Dreamweaver CS5.5 检查浏览器兼容性错误

> ID：10782703
> 
> 赞同：1
> 
> 时间：2012-05-28T09:58:27.623
> 
> 标签：css, dreamweaver, flash-cs5

我遇到了检查浏览器兼容性功能的问题，它似乎在 HTML 文件中发现了问题，但忽略了 CSS 文件中的错误。

我已经对 Dreamweaver CS4 进行了检查，它工作正常。

失败的简单 CSS 文件示例。

@charset "utf-8";

/* CSS 文档 */

h2

{

颜色：透明；

}

应该给出以下错误 - Unsupported value: 'transparent' ;

它在 PC 上运行，版本 11.5 Build 5344。

有没有人遇到过这个？如果是这样，任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:02:13.917

你为什么期望它给出一个错误？[规范](http://www.w3.org/TR/css3-color/#transparent)说这是该属性`transparent`的有效值`color`：

> CSS3 扩展了颜色值以包含“透明”关键字，以允许其与所有接受`<color>`值的属性一起使用。

[W3C CSS 验证器](http://jigsaw.w3.org/css-validator/#validate_by_input)也同意您的示例是有效的 CSS 。

# php - sql查询还是php？

> ID：10782707
> 
> 赞同：-2
> 
> 时间：2012-05-28T09:58:35.457
> 
> 标签：php, mysql

我想看看哪里做错了，但我找不到问题，我无法更新我的数据库，有人能看到我的代码缺少什么吗？总是说我“数据库错误”

代码：

```
<?php
if(isset($_POST['enviar'])) {
    $types="";
    for ($i=0; $i<count($_POST['texames']);$i++)
        $types=$types.$_POST['texames'][$i].',';

    $meta_desc=$_POST['meta_desc'];
    $meta_info=$_POST['meta_info'];

    $id_meta=$_POST['id_meta'];

    if($meta_desc && $meta_info) {
        $sql="update metainfo set meta_desc, meta_info='$meta_desc', '$meta_info' where id_meta=$id_meta";
        mysql_query($sql) or die("DAtabase Error ...");
        header("Location: list.php");
    } else {
        echo '<script language="javascript">alert("Fill  Form!");</script>';
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:00:32.347

您的查询的问题：

```
update metainfo set meta_desc, meta_info='$meta_desc', '$meta_info' 
```

应该

```
update metainfo set meta_desc='$meta_desc', meta_info='$meta_info' 
```

您不能以您正在做的方式同时设置多个列

您需要考虑在代码中更改很多事情，但首先尝试更改

```
mysql_query($sql) or die("DAtabase Error ..."); 
```

至

```
mysql_query($sql) or die("Database Error - " . mysql_error()); 
```

这将为您提供正确的错误消息。

您还应该阅读有关[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)的内容并考虑将代码更新为[mysqli](http://php.net/manual/en/mysqli.overview.php)或[PDO](http://uk.php.net/manual/en/intro.pdo.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T10:02:40.383

*您同时设置两列；*

```
set meta_desc, meta_info='$meta_desc', '$meta_info' where 
```

将您的查询更改为：

```
update metainfo set meta_desc = '$meta_desc', meta_info = '$meta_info'
where id_meta = $id_meta 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T10:02:32.127

尝试

```
$sql="update metainfo set meta_desc='$meta_desc', meta_info='$meta_info' where id_meta=$id_meta"; 
```

此外，如果您在 die 语句中回显错误，您将获得更好的调试信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T10:02:58.043

您的问题似乎是无效的 sql 语法：

```
update metainfo set meta_desc, ... 
```

你搞砸了字段/值语法。没有值`meta_desc`也`$meta_info`没有应用于字段，它应该是这样的：

```
update metainfo set meta_desc = '$meta_desc', meta_info = '$meta_info' 
```

其中 id_meta = $id_meta

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T10:04:27.980

您在“meta_desc”之后的查询中缺少“=”：

```
$sql="update metainfo set meta_desc=, meta_info='$meta_desc', '$meta_info' where id_meta=$id_meta"; 
```

而且我不确定它应该像上面还是这样：

```
$sql="update metainfo set meta_desc='$meta_desc', meta_info='$meta_info' where id_meta=$id_meta"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T10:06:45.853

你也可以试试这个：

```
$sql="UPDATE metainfo SET (meta_desc, meta_info) VALUES ('" . $meta_desc . "', '" . $meta_info . "') WHERE id_meta = " . $id_meta; 
```

# python - Python将引号插入CSV中的列

> ID：10782712
> 
> 赞同：0
> 
> 时间：2012-05-28T09:59:23.553
> 
> 标签：python

我对python一无所知。我想要做的是创建一个脚本，该脚本将编辑一个 CSV 文件，以便它将第 3 列中的每个字段都包含在引号中。我一直没能找到太多帮助，这是否又快又容易做到？谢谢。

```
column1,column2,column3
1111111,2222222,333333 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:57:54.430

这是一个相当粗略的解决方案，非常适合您的请求（假设您的源文件名为“csvfile.csv”并且位于 C:\Temp 中）。

```
import csv

newrow = []
csvFileRead = open('c:/temp/csvfile.csv', 'rb')
csvFileNew = open('c:/temp/csvfilenew.csv', 'wb')

# Open the CSV
csvReader = csv.reader(csvFileRead, delimiter = ',')

# Append the rows to variable newrow
for row in csvReader:
    newrow.append(row)

# Add quotes around the third list item
for row in newrow:
    row[2] = "'"+str(row[2])+"'"

csvFileRead.close()

# Create a new CSV file
csvWriter = csv.writer(csvFileNew, delimiter = ',')

# Append the csv with rows from newrow variable
for row in newrow:
    csvWriter.writerow(row)

csvFileNew.close() 
```

有很多更优雅的方式来做你想做的事，但我试图把它分解成基本的块来展示每一位是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:05:01.330

我将从查看[`csv`模块](http://docs.python.org/library/csv.html)开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:32:44.630

```
import csv
filename = 'file.csv'
with open(filename, 'wb') as f:
    reader = csv.reader(f)
    for row in reader:
        row[2] = "'%s'" % row[2] 
```

然后将其写回到 csv 文件中。

# c# - 如何在 Visual Studio Web 2010 Express 中将 XNA 内容管道添加到 Silverlight 5？

> ID：10782715
> 
> 赞同：4
> 
> 时间：2012-05-28T09:59:42.967
> 
> 标签：c#, silverlight-toolkit, xna-4.0, silverlight-5.0, visual-studio-express

[Silverlight 5 XNA 示例](http://blogs.msdn.com/b/eternalcoding/archive/2011/09/01/silverlight-5-rc-what-s-new-in-the-3d-world.aspx)，我认为是在 Visual Studio 专业版中构建的，因为在 Visual Web Express 2010 中打开它们时，它无法打开内容项目。

注意：我已经[在这里报告了这个问题](https://connect.microsoft.com/VisualStudio/feedback/details/745085/cannot-create-and-edit-silverlight-5-xna-content-pipeline-projects-using-visual-studio-web-developer-2010-express)，所以请注意那里的解决方案。

如何使用 Visual Studio 2010 速成版将内容管道用于 Silverlight 5 应用程序？或者如果这是不可能的 - 我至少如何使用 ContentManager 导入预构建的 .xnb 文件？

（我有所有的要求，除了专业版，并且可以绘制原语。我实际上可以运行平台游戏示例，所以必须有办法）

![在此处输入图像描述](../Images/0f50f824159ce743beecd0f3dd4f1c91.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T16:02:35.240

Microsoft Visual Web Developer 2010 Express 产品 SKU 不支持 Microsoft XNA Game Studio 4.0。请参阅此处的 MSDN 文章[http://msdn.microsoft.com/en-us/library/bb203916.aspx](http://msdn.microsoft.com/en-us/library/bb203916.aspx)，为方便起见，此处复制了其中的部分内容。

> **微软视觉工作室 2010**
> 
> XNA Game Studio 4.0 Refresh 利用 Microsoft Visual Studio 2010 开发环境，将其扩展到游戏开发。XNA Game Studio 4.0 Refresh 适用于以下任何 Microsoft Visual Studio 2010 产品。
> 
> *   适用于 Windows Phone 的 Microsoft Visual Studio 2010 Express
> *   Microsoft Visual C# 2010 速成版
> *   Microsoft Visual Studio 2010 专业版

要创建或修改 XNA 内容项目，请在受支持的 Express SKU 版本中打开项目。

# mysql - 使用 LOCAL_INFILE 设置从 MySQL 加载 Rails 中的数据时出错

> ID：10782719
> 
> 赞同：3
> 
> 时间：2012-05-28T09:59:48.570
> 
> 标签：mysql, ruby-on-rails

当我尝试加载 .cvs 文件时出现此错误

> Mysql2::Error: 此 MySQL 版本不允许使用的命令：加载数据本地 infile 'db/fixtures/devel_countries.csv'

我检查了mysql服务器配置并设置了`LOCAL_INFILE = 'ON'`

这是我的配置中的一些数据：

*   Mysql Server 版本：5.5.16 MySQL Community Server (GPL)
*   红宝石：1.9.2p136（2010-12-25 修订版 30365）[x86_64-darwin10.8.0]
*   导轨：3.1.1

我用来执行这个的命令是：

```
ActiveRecord::Base.connection.execute( "load data local infile 'db/fixtures/devel_regions.csv' into table regions fields terminated by ',' enclosed by '\"' lines terminated by '\n' (id, iso_code, name, country_id, created_at, updated_at);") 
```

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:51:09.453

查看您的 MySQL 命令：

```
load data local infile 'db/fixtures/devel_regions.csv' 
into table regions 
fields terminated by ',' enclosed by '\"' 
lines terminated by '\n' 
(id, iso_code, name, country_id, created_at, updated_at); 
```

一般来说，该命令对我来说是正确的。

我注意到您将`LOCAL`命令包含在其中。根据文档：

> 如果指定了 LOCAL，则该文件由客户端主机上的客户端程序读取并发送到服务器。该文件可以作为完整路径名给出以指定其确切位置。如果作为相对路径名给出，则该名称被解释为相对于启动客户端程序的目录。

可能是您尝试运行的应用程序无法处理`local`命令的一部分，尽管看起来您正在正确使用它。

我要尝试的第一件事是从数据库控制台运行命令并查看它是如何工作的。你可以通过运行来获得它`bundle exec rails db`。

# css - CSS 列站点地图导航

> ID：10782723
> 
> 赞同：2
> 
> 时间：2012-05-28T10:00:03.880
> 
> 标签：css

我想在我的页面的页脚中有一个站点地图，它有一个高度限制，并如下图所示排列链接。该站点是CMS，因此必须灵活。可能吗？

任何帮助表示赞赏。

![CSS 列](../Images/603970c7b7e1a259363b1ad1b802e184.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:05:36.400

嗨，您可以使用为此，您可以使用**column-count 属性：**

**HTML**

```
<div id="multicolumn1">
<div class="child">Link 1</div>
<div class="child">Link 2</div>
<div class="child">Link 3</div>
<div class="child">Link 4</div>
<div class="child">Link 5</div>
<div class="child">Link 6</div>
<div class="child">Link 7</div>
<div class="child">Link 8</div>
<div class="child">Link 9</div>
 <div class="child">Link 10</div>
 <div class="child">Link 11</div>
 <div class="child">Link 12</div> 
```

**CSS**

```
div#multicolumn1{
    -moz-column-count: 3;
    -moz-column-gap: 33%;
    -webkit-column-count: 3;
    -webkit-column-gap: 33%;
    column-count: 3;
    column-gap: 33%;
}
.child{
    height:20px;
} 
```

现场演示[http://jsfiddle.net/pMbtk/397/](http://jsfiddle.net/pMbtk/397/)

注意：它在 IE 中不起作用。

对于 IE，你可以使用这个 JavaScript：CSS3 - [Multi Column Layout Demonstration](http://www.csscripting.com/css-multi-column/)

# json - Google Refine：遍历 JSON 字典

> ID：10782737
> 
> 赞同：5
> 
> 时间：2012-05-28T10:00:53.517
> 
> 标签：json, dictionary, openrefine

我在 Google Refine 中有一些 JSON - [http://mapit.mysociety.org/point/4326/0.1293497,51.5464828](http://mapit.mysociety.org/point/4326/0.1293497,51.5464828)完整版，但缩写如下：

```
{1234: {'name': 'Barking', 'type': 'WMC'},
 5678: {'name': 'England', 'type': 'EUR'} } 
```

我只想提取具有（假定唯一）类型的对象的名称`WMC`。

[在 Google Refine 中解析 JSON](https://stackoverflow.com/questions/10304238/parse-json-in-google-refine)没有帮助，它适用于数组，而不是字典。

有什么建议我应该考虑解决这个问题吗？

* * *

**编辑**：我不知道初始键是什么：我相信它们是我无法提前预测的唯一标识符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T14:18:20.890

Refine 目前不知道如何遍历 dict 的键，它们的键是未知的（尽管我即将实现该功能）。

使用当前实现的技巧是将 JSON 对象转换为 JSON 数组。以下 GREL 表达式将执行此操作，将结果解析为 JSON，遍历数组的所有元素并为您提供类型为“WMC”的名字。

```
filter(('['+(value.replace(/"[0-9]+":/,""))[1,-1]+']').parseJson(),v,v['type']=='WMC')[0]['name'] 
```

将该表达式与“基于此列添加列”命令一起使用以创建新的 WMC 名称列。如果有可能会有多个这种类型的名称并且您想要它们全部，您可以添加一个 forEach 循环并按照以下方式加入

```
forEach(filter(('['+(value.replace(/"[0-9]+":/,""))[1,-1]+']').parseJson(),v,v['type']=='WMC'),x,x['name']).join('|') 
```

这将为您提供一个管道分隔的名称列表，您可以使用“拆分多值单元格”将其拆分。

希望在下一个版本中会更容易！

# powershell - 如何在 PowerShell 中切换到临时目录？

> ID：10782739
> 
> 赞同：7
> 
> 时间：2012-05-28T10:00:59.127
> 
> 标签：powershell, temp

在 PowerShell 中，我可以回显`%TEMP%`使用命令的值`$Env:TEMP`。这是我机器上的输出：

```
PS> $Env:temp
C:\Users\IAIN~1.COR\AppData\Local\Temp 
```

当我尝试使用`cd`命令切换到目录时，我收到此错误：

```
PS> cd $Env:temp
Set-Location : An object at the specified path C:\Users\IAIN~1.COR does not exist.
At line:1 char:3
+ cd <<<<  $Env:temp
    + CategoryInfo          : InvalidArgument: (:) [Set-Location], PSArgumentException
    + FullyQualifiedErrorId : Argument,Microsoft.PowerShell.Commands.SetLocationCommand 
```

我怀疑 PowerShell 是按字面意思解释 8.3 文件名。目录的长文件名是`C:\Users\iain.CORP\AppData\Local\Temp`. 当我尝试`cd C:\Users\Iain.CORP\AppData\Local\Temp`时，目录更改成功。

如何打开`$Env:TEMP`使用 PowerShell 的路径？我必须先有长文件名吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T10:43:07.437

您不需要`%TEMP%`直接访问环境变量。

.NET 提供了一种`GetTempPath`方法作为更通用的解决方案。

```
$TempDir = [System.IO.Path]::GetTempPath()
cd $TempDir 
```

在我的机器上，这将更改为 directory `C:\Users\Iain.CORP\AppData\Local\Temp`。

[文档](http://msdn.microsoft.com/en-us/library/system.io.path.gettemppath.aspx)中的注释：

> 此方法按以下顺序检查环境变量是否存在，并使用找到的第一个路径：
> 
> 1.  TMP 环境变量指定的路径。
>     
>     
> 2.  TEMP 环境变量指定的路径。
>     
>     
> 3.  USERPROFILE 环境变量指定的路径。
>     
>     
> 4.  Windows 目录。

感谢[Joe Angley](http://joelangley.blogspot.co.uk/2009/06/temp-directory-in-powershell.html)分享这项技术。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-28T15:52:05.227

`$env:temp`通过首先解析其全名来打开，如下所示：

```
cd (gi $env:temp).fullname 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T13:09:13.333

`cd $env:temp`

这对我有用。

# django - Django：在新旧应用程序模型之间创建连接

> ID：10782741
> 
> 赞同：0
> 
> 时间：2012-05-28T10:01:01.707
> 
> 标签：django, model

**情况：**

我有一个拥有数千名用户的数据库。

我创建了一个名为“ **my_app** ”的新应用程序。

**my_app**有一个名为“ **my_Object** ”的对象。

**my_object**与 Django 用户具有**one_to_one**关系。

```
class my_object(models.Model):
    user = models.OneToOneField(User) 
```

**我的问题是：**

如何为数据库中已有的所有用户创建一个寄存器？我知道我可以将 post_save 用于新对象，但是如何将这个新对象向后关联/连接？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:08:41.490

在您喜欢的数据库管理器中运行 SQL 查询，为所有现有记录创建`User`记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:20:55.830

您也可以从`django shell`. 以查询列表的形式访问旧用户群中的所有记录，然后`my_object`为它们创建一个。如上所述，无需设置信号，因为该任务只需执行一次。如果可能的话，这种基于应用程序的信号也会更麻烦。

```
old_users = Old_users.objects.all() for user in old_users:
    object = my_object(user = user)
    object.save() 
```

顺便问一下，您是如何添加旧用户的`django user`？

# wpf - 组合框选择显示 System.Data.DataRowView

> ID：10782744
> 
> 赞同：1
> 
> 时间：2012-05-28T10:01:26.650
> 
> 标签：wpf, combobox

我有简单的组合框模板，如下所示：

```
<SolidColorBrush x:Key="NormalForegroundBrush" Color="Black" />
<SolidColorBrush x:Key="GlyphBrush" Color="#4c4c4c" />
<SolidColorBrush x:Key="WindowBackgroundBrush" Color="#FFF" />

<Style x:Key="ComboBoxStyle" TargetType="{x:Type ComboBox}" >               
    <Setter Property="TextElement.Foreground" Value="{StaticResource NormalForegroundBrush}"/>
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ComboBox}">
                <Grid>
                    <ToggleButton ClickMode="Press" x:Name="ToggleButton" IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Focusable="False" Grid.Column="2" />
                    <ContentPresenter Margin="3,3,23,3" HorizontalAlignment="Left" x:Name="ContentSite" VerticalAlignment="Center" ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                            Content="{TemplateBinding SelectionBoxItem}" IsHitTestVisible="False" />
                    <TextBox Margin="3,3,23,3" Visibility="Hidden" HorizontalAlignment="Left" x:Name="PART_EditableTextBox" Background="Transparent"
                            VerticalAlignment="Center" Style="{x:Null}" IsReadOnly="False" Focusable="True" xml:space="preserve" />
                        <Popup Placement="Bottom" x:Name="Popup" Focusable="False" AllowsTransparency="True" IsOpen="{TemplateBinding IsDropDownOpen}" PopupAnimation="Fade">
                            <Grid MinWidth="{TemplateBinding ActualWidth}" MaxHeight="{TemplateBinding MaxDropDownHeight}" x:Name="DropDown" SnapsToDevicePixels="True">
                                <Border BorderBrush="#FF646464" BorderThickness="1,1,1,1" x:Name="DropDownBorder" Background="{StaticResource WindowBackgroundBrush}"/>
                                <ScrollViewer Margin="4,6,4,6" SnapsToDevicePixels="True" >
                                        <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Contained" Margin="5,0,0,0" />
                                </ScrollViewer>
                           </Grid>
                        </Popup>
                     </Grid>
                <ControlTemplate.Triggers>                        
                    <Trigger Property="IsEditable" Value="True">
                        <Setter Property="KeyboardNavigation.IsTabStop" Value="False"/>
                        <Setter Property="Visibility" TargetName="PART_EditableTextBox" Value="Visible"/>
                        <Setter Property="Visibility" TargetName="ContentSite" Value="Hidden"/>
                    </Trigger>                     
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>       
</Style> 
```

和WPF窗口如下图：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="40"></RowDefinition>
        <RowDefinition Height="40"></RowDefinition>
        <RowDefinition Height="40"></RowDefinition>
        </Grid.RowDefinitions>
    <ComboBox Name="combo1" ItemsSource="{Binding}" Style="{StaticResource ComboBoxStyle}"></ComboBox>

</Grid> 
```

C#代码是：

```
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        DataTable table = new DataTable("table1");
        table.Columns.Add("Dosage", typeof(int));           
        table.Columns.Add("Patient", typeof(string));

        table.Rows.Add(25, "David");
        table.Rows.Add(50, "Sam");
        table.Rows.Add(10, "Christoff");
        table.Rows.Add(21, "Janet");
        table.Rows.Add(100, "Melanie");

        combo1.DataContext = table;
        combo1.DisplayMemberPath = "Patient";
        combo1.SelectedValuePath = "Dosage";
    } 
```

当我将属性设置为 IsEditable=True 时，组合框可以正常工作，但当该属性为 False 时，它​​会将所选项目显示为 System.Data.DataRowView。风格有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:50:13.763

正如我所说，这是样式问题，我错过了在 ContentPresenter 中添加 ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" 。当我添加它时，这已解决。

# asp.net - asp.net ajax 不在异步回发中保留 textarea 值

> ID：10782751
> 
> 赞同：2
> 
> 时间：2012-05-28T10:02:11.710
> 
> 标签：asp.net, ajax, updatepanel, scriptmanager

我有一个带有文本区域、两个列表框和一个按钮的对话框弹出窗口。通过在第一个列表框中选择一个值并按下按钮“>”，所选值将传递到第二个列表框。这是用 asp.net ajax 完成的。

```
<td>
    <div align="center">
           <textarea style="height:50px; overflow:hidden;";rows="20"
              cols="40"
              id="editor1" 
              class="tinymce">
           </textarea>
    </div>
</td> 
```

我将 2 个列表框和按钮放在了 asp.net 上传面板之间。像这样：

```
<td>
                        <asp:UpdatePanel runat="server" id="updatePanel1">
                            <ContentTemplate>
                            <table width="100%" align="left">
                                            <tr>
                                                <td colspan="5">
                                                    <hr align="left" style="width:95%" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td valign="top">
                                                    <cc1:SWCListBox
                                                        ID="SWCListBox1" 
                                                            runat="server" 
                                                            Width="100"
                                                            SelectionMode="Single" 
                                                            CssClass="VW1">

                                                        </cc1:SWCListBox>
                                                </td>
                                                <td 
                                                    valign="top" 
                                                    width="50" 
                                                    align="center">
                                                    <cc1:SWCButton
                                                        Text=" > " 
                                                        ID="SWCBtnAddValue" 
                                                        CssClass="VW1 VWButton" 
                                                        runat="server" 
                                                        ToolTip="Add to list"
                                                        OnClick="AddValue_Click"
                                                        CausesValidation="false"
                                                        />

                                                <td valign="top">
                                                            <cc1:SWCListBox
                                                                id="SWCListBox2"
                                                                CssClass="VW1" 
                                                                runat="server" 
                                                                Width="100" 
                                                                SelectionMode="Single"
                                                        />

                                                </td>
                                                </tr>
                                        </table>
                                      </ContentTemplate>
                                    </asp:UpdatePanel> 
```

问题是，当我在 textarea 中输入内容并进行异步回发时，输入的文本会消失。

如何将 textarea 值保留在异步回发中？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:09:37.567

这个问题是因为你使用UpdatePanel，而textarea不是asp.net控件。你有两个解决方案。

1）通过放置 run="server"（或）使其成为 asp.net 控制
2）手动将回发值放置为：

```
<div align="center">
       <textarea style="height:50px; overflow:hidden;";rows="20"
          cols="40"
          id="editor1" 
          name="editor_1"
          class="tinymce">
       <asp:Literal runat="server" id="txtEditor1" />
       </textarea>
</div> 
```

和后面的代码

```
txtEditor1.Text = Server.HtmlEncode(Request.Form["editor_1"].ToString()); 
```

（因为您使用 UpdatePanel 重要的是使用 Literal 添加此值而不是使用`<%=%>`，否则它会引发错误。

# iphone - 为什么某些 Https url 没有加载到 WebView 中？

> ID：10782754
> 
> 赞同：0
> 
> 时间：2012-05-28T10:02:16.247
> 
> 标签：iphone, ios, xcode, cocoa-touch, uiwebview

为什么有些 https 链接没有加载 WebView。我可以看到一些 https url 在 safari 浏览器中完美加载，但是当我尝试在 webview 中加载相同的 url 时，它没有加载。可能是因为https有自签名证书？？我们不能在具有自签名证书的 WebView 中加载 url 吗？

编辑：现在我可以打电话了

```
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace 
{
    return YES;
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge 
{
    [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
} 
```

我的 https url 仍然没有加载到 WebView 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:31:39.360

试试这个 ：

```
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace 
{
  return YES;
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
NSArray *trustedHosts = [NSArray arrayWithObjects:@"mytrustedhost",nil];

if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust]){
    if ([trustedHosts containsObject:challenge.protectionSpace.host]) {
    [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
    }
}
[challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
} 
```

# vb.net - 使用类不工作 vb.net 的单选按钮列表的 RenderControl

> ID：10782755
> 
> 赞同：2
> 
> 时间：2012-05-28T10:02:21.410
> 
> 标签：vb.net, radiobuttonlist

我建立了一个简单的类 Imports Microsoft.VisualBasic Imports System.IO

公共类 buildcntrl 函数 buildcontrol() As String

```
 Dim SB As New StringBuilder()
    Dim SW As New StringWriter(SB)
    Dim o As New HtmlTextWriter(SW)
    Dim d As New RadioButtonList
    d.Items.Add("True")
    d.Items.Add("False")
    d.RenderControl(o)
    Return SB.ToString()
End Function 
```

结束类当我从这样的 asp.net 页面使用类时 Dim t As New buildcntrl Response.Write(t.buildcontrol) 它工作正常，但是当使用类调用同一个类时，我收到错误 System.NullReferenceException: Object引用未设置为对象的实例。在 System.Web.UI.WebControls.RadioButtonList.Render(HtmlTextWriter writer) 当我调试问题时，它会在尝试执行 d.RenderControl(o) 时引发错误 这适用于除 RadioButtonList 之外的所有其他对象

# inheritance - 为什么接口的多重继承比一组类的多重继承要容易得多？

> ID：10782756
> 
> 赞同：1
> 
> 时间：2012-05-28T10:02:29.063
> 
> 标签：inheritance, interface

为什么接口的多重继承比一组类的多重继承要容易得多？我被一个大学问题困住了。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:07:04.267

如果你从不同的类继承了两个具有相同签名的方法，那么在调用这个方法时就会产生歧义。它可以解决，但可以说是一个混乱的情况。

如果你用相同的方法签名实现两个接口，那没关系，因为调用方法时仍然只有一个实现可供选择。

[钻石问题](http://en.wikipedia.org/wiki/Diamond_problem)是上述问题的延伸，它使情况更加混乱。当将多重继承限制为接口时，这个问题基本上就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:04:29.600

也许是因为粒度：你可以选择你的类应该实现哪些接口。而如果你扩展一个类，你会自动继承整个类的层次结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:19:56.060

两个可能的原因：1.）钻石问题（在维基百科中查找），2.）对象身份。

```
class A { }
class B { }
class C : A, B { }

C * c = new C ();
A * a = c;
B * b = c; 
```

然后，您无法通过简单地测试 a == b 来验证对象身份。如果您尝试在语言中实现此功能，则不能在后台使用简单的指针运算，这样*每次*访问类（独立于多重继承）都会变得更加昂贵，因为 a 和 b 不再是普通指针。

如果 A 和 B 是接口，您就知道问题所在（您知道它们将被继承），这样您就可以区别对待对接口的访问与对类的访问。

*顺便说*一句：多类继承并不难实现。

编辑：加法。它引入了概念问题：

```
class C0 { virtual int meth { return 0; } };
class C1 : C0 { virtual int meth { return 1; } };
class C2 : C1, C0 { } 
```

如果我们定义

```
C2 * c2 = new C2; 
```

什么应该

```
((C1 *) c2)->meth() 
```

和

```
((C0 *) c2)->meth() 
```

回来是为了不迷惑人？（编辑：更正了这个例子。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T22:48:39.127

至少在 .net 中指出，接口方法仅适用于声明为或约束为接口类型的对象。因此，如果 a`C1`具有方法`Foo`，并且还实现了接口`Intf1`，并且`Intf2`每个接口都声明了一个方法`Foo`，那么在大多数情况下，存在三个命名的方法这一事实`Foo`并不重要，因为它们将存在于本质上是独立的域中。

此外，如果一个 interface`IDerived1`和`IDerived2`inherit `IBase`，其中包括 member `Foo`，一个实现这两个接口的类，或者一个继承这两个接口的接口，将只定义 的一个定义`IBase.Foo`。、和/或从两者派生的接口可以声明它们自己的成员`IDerived1`，但任何此类定义都将与. 将派生接口转换为并调用它总是会产生相同的方法，无论是否直接转换为`IDerived2``Foo``IBase.Foo``IBase``Foo``IBase.Foo``IBase`，或者先转换到其他接口。相比之下，如果一个类派生自其他两个类，而这两个类都覆盖了一个公共基类的同一个成员，那么如果将派生类的一个对象强制转换为基类然后尝试使用该成员会发生什么就不清楚了.

顺便说一句，有几种情况可能会产生歧义。如果一个接口继承了两个具有相同名称成员的接口，则可能需要使用一些技巧来强制编译器偏爱一个，或者让派生接口添加自己的同名成员，这会影响两个原件。此外，在使用泛型时，可以约束泛型类型以实现多个接口并从类继承。完成此操作后，如果接口和/或类共享成员名称，则可能会产生歧义。

# iphone - iCarousel 以编程方式停在索引处

> ID：10782758
> 
> 赞同：0
> 
> 时间：2012-05-28T10:02:31.877
> 
> 标签：iphone, ios, xcode, ios5

有没有办法让 UIScrollView/iCarousel 在特定部分停止，`index`或者像这里一样以编程方式： `([[images objectAtIndex:index] intValue] == 75)`

这是我滚动 iCarousel 的方式：

`[carousel scrollByNumberOfItems:-35 duration:10.7550f];`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:20:57.440

您可以使用滚动到特定索引

```
[carousel scrollToItemAtIndex:5 duration:10.0f]; 
```

我不是 100% 确定我理解你想要做什么 - 你的示例代码没有任何意义，因为在这段代码中你试图将图像转换为整数，这只会崩溃：

```
([[images objectAtIndex:index] intValue] == 75) 
```

# android - Android：淡入所选行

> ID：10782760
> 
> 赞同：0
> 
> 时间：2012-05-28T10:02:35.047
> 
> 标签：android, listview, animation

我有类似这样的列表视图：![在此处输入图像描述](../Images/5688f86cf4e0259214f58c41ab8d3563.png)

添加代码，不多，但可能有帮助：

自定义适配器：

```
public class MyAdapter extends BaseAdapter{

private LayoutInflater mInflater;
private Animation fadeIn;
private Animation fadeOut;

public MyAdapter(Activity c) {
    mInflater = c.getLayoutInflater();
    fadeIn = AnimationUtils.loadAnimation(c.getApplicationContext(), R.anim.alpha_show);
    fadeIn.setFillAfter(true);
    fadeOut = AnimationUtils.loadAnimation(c.getApplicationContext(), R.anim.alpha_dissappear);
    fadeOut.setFillAfter(true);
}

public int getCount() {
    return MainButtonsList.getList().getSize() + 
            GlobalPrefs.getEmptyRowsAtEnd() + 
            GlobalPrefs.getEmptyRowsAtStart();
}

public View getView(int position, View v, ViewGroup parent) {
    View convertView = v;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.main_list_item, null);
    }
    ImageView iv = (ImageView) convertView.findViewById(R.id.image);
    if ((position > GlobalPrefs.getEmptyRowsAtStart() - 1) && (position < getCount() - GlobalPrefs.getEmptyRowsAtEnd())) {
        iv.setImageResource(MainButtonsList.getList().getListImageResource(position - GlobalPrefs.getEmptyRowsAtStart()));
        iv.setAlpha(255);
        iv.setTag(MainButtonsList.UNPRESSED_BUTTON_TAG);
    } else {
        iv.setTag(MainButtonsList.UNUSED_BUTTON_TAG);
        iv.setAlpha(0);
        iv.setVisibility(0);
        iv.setClickable(false);
        iv.setImageResource(R.drawable.logo_list_null);

    }
    iv.setMaxHeight(GlobalPrefs.getRowHeight());
    iv.setMaxWidth(GlobalPrefs.getRowWidth());
    iv.setBackgroundResource(0);

    return convertView;
}

public Object getItem(int position) {
    return MainButtonsList.getList().getObject(position);
}

public long getItemId(int position) {
    return position;
}

} 
```

自定义列表视图：

```
public class CopyOfListView3d extends ListView{
private final Camera mCamera = new Camera();
private final Matrix mMatrix = new Matrix();
private Context context;
private Paint mPaint;

public CopyOfListView3d(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.context = context;
    this.setChildrenDrawingOrderEnabled(true);

}

@Override
protected int getChildDrawingOrder (int childCount, int i) {
      //sets order number to each child, so makes overlap and center is always on top
    }

@Override
protected boolean drawChild(Canvas canvas, View child, long drawingTime) {
    // get top left coordinates
    boolean isCenter = false;
    final int top = child.getTop();
    final int bottom = child.getBottom();
    Bitmap bitmap = child.getDrawingCache();
    if (bitmap == null) {
        child.setDrawingCacheEnabled(true);
        child.buildDrawingCache();
        bitmap = child.getDrawingCache();
    }

    final int centerY = child.getHeight() / 2;
    final int centerX = child.getWidth() / 2;
    final int radius = getHeight() / 2;
    final int absParentCenterY = getTop() + getHeight() / 2;
    final int absChildCenterY = child.getTop() + centerY;
    final int distanceY = (absParentCenterY - absChildCenterY) / 2;
    final int absDistance = Math.min(radius, Math.abs(distanceY));

    final float translateZ = (float) Math.sqrt((radius * radius) - (absDistance * absDistance));
    mCamera.save();
    float myTranslateX = (float) (translateZ * (1.5f));

    int density = GlobalPrefs.getDensity();
    if (density < DisplayMetrics.DENSITY_LOW) {
        myTranslateX = (float) myTranslateX - 80;
    } else if (density == DisplayMetrics.DENSITY_LOW) {
        myTranslateX = (float) myTranslateX - GlobalPrefs.getScreenWidth() + density + 40;
    } else if (density <= DisplayMetrics.DENSITY_MEDIUM) {
            myTranslateX = (float) myTranslateX - ((float)(GlobalPrefs.getScreenWidth()*0.75)) + density/2;
    } else
        if (density <= DisplayMetrics.DENSITY_HIGH) {
            myTranslateX = (float) myTranslateX - 320;
        } else
            if (density > DisplayMetrics.DENSITY_HIGH) {
                //Log.i("density", "this is more than high");
                myTranslateX = (float) myTranslateX;
            }
    if ((top < absParentCenterY) && (bottom > absParentCenterY)) {
        //make center row bigger
        isCenter = true;
        mCamera.translate((float) myTranslateX, 0, (float) -160);//130
        child.setPressed(true);
        child.setTag(MainButtonsList.PRESSED_BUTTON_TAG);
    }  
    else {
        //top
        child.setTag(MainButtonsList.UNPRESSED_BUTTON_TAG);
        child.setPressed(false);
        mCamera.translate((float) myTranslateX, 0, -150);//120;
    };
    mCamera.getMatrix(mMatrix);
    mCamera.restore();

    // create and initialize the paint object
    if (mPaint == null) {
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setFilterBitmap(true);
    }
    //calculates alpha for each row, so far from center, rows are barely visible
    mPaint.setAlpha(calculateAlpha(absChildCenterY));

    mMatrix.postTranslate((float) (-centerX * 1.5f), top);
    canvas.drawBitmap(bitmap, mMatrix, mPaint);
    return false;
}

} 
```

它们由 ImageViews 组成，其中白色为选中状态，蓝色为未选中状态，我通过屏幕坐标更改选中/未选中，因此始终选择中心。

我有自定义 3dListView，它扩展了 ListView 并制作了自定义适配器，我在其中将 imageviews 设置为行。代码太多了，但有很简单的

其中之一可能会有所帮助：

1）我怎样才能使中心行淡入（也许也淡出）（我可以在给父母或孩子计数时找到哪一行是中心）？（更好的）

2) 如果有任何 OnStateChange 监听器来监听视图的按下，它也可能会有所帮助。然后，当视图被按下和淡出时，我可以随时淡入，当松开按下时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:29:13.070

我自己找到了答案。在 drawChild 方法结束时将此代码段添加到我的自定义 ListView 中：

```
final ImageView iv = (ImageView) child.findViewById(R.id.image);
            child.setTag(MainButtonsList.PRESSED_BUTTON_TAG);

            Animation anim = fadeOut();
            anim.setAnimationListener(new Animation.AnimationListener() {

                public void onAnimationStart(Animation animation) {
                    // TODO Auto-generated method stub

                }

                public void onAnimationRepeat(Animation animation) {
                    // TODO Auto-generated method stub

                }

                public void onAnimationEnd(Animation animation) {
                    child.setPressed(true);
                    iv.startAnimation(fadeIn());
                }
            });

            iv.clearAnimation();
            iv.startAnimation(anim); 
```

在列表项布局中，添加了另一个图像，它放在项下，现在看起来很漂亮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T12:16:17.287

您需要在列表视图的适配器中进行淡入淡出。

在您的适配器中

```
private List<YourListObject> deleteItems;

// Constructor to init list and other vars

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    // Draw stuff
    // including your object

    for(YourListObject obj : deleteItems){
            if(currentObj.equals(obj)){
                Animation fadeOutAnimation = new AlphaAnimation(1.0f, 0.0f);
                fadeOutAnimation.setDuration(300);
                DeleteAnimationListener listener = new DeleteAnimationListener(currentObj);
                fadeOutAnimation.setAnimationListener(listener);
                someView.startAnimation(fadeOutAnimation);
            }
        }

    return someView;
}

   public void remove(YourListObject obj){
        deleteItems.add(obj);
        notifyDataSetChanged();
    }

   protected class DeleteAnimationListener extends EndAnimationListener {

        private final YourListObject obj;

        public DeleteAnimationListener(YourListObject obj) {
            this.obj = obj;
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            yourObjects.remove(obj);
            deleteItems.remove(obj);
            notifyDataSetChanged();
        }
    }; 
```

currentObj 是您当前正在操作的列表中的视图

yourObjects 是您存储数据的列表。

deleteItems 是一个新列表。

你调用`.remove(obj)`你的适配器来移除一个。一旦动画完成，getView 将从列表中删除它（带有淡出动画），AnimationListener 将从数据集中删除实际对象。

# python - AttributeError：“模块”对象没有属性“代码”

> ID：10782763
> 
> 赞同：-6
> 
> 时间：2012-05-28T10:02:41.223
> 
> 标签：python, mongodb, pymongo, mongoengine

我正在编写这样的 MongoDB 查询： Message.objects.filter( Q(author_id=user.id) | Q(for_user_id=user.id) | Q( shared_with_id=user.id)).order_by( "-timestamp") [:10]

版本是

MongoDB = 1.8.2 Pymonogo：1.11

```
Traceback (most recent call last):

File "/mnt/install/wwm/thirdparty/django/core/handlers/base.py", line 100, in    get_response
response = callback(request, *callback_args, **callback_kwargs)

File "/mnt/install/wwm/thirdparty/django/contrib/auth/decorators.py", line 25, in _wrapped_view
return view_func(request, *args, **kwargs)

 File "/mnt/install/wwm/main/views.py", line 1232, in user_messages
 mesg_list = list(Message.objects( Q(author_id=user.id) | Q(for_user_id=user.id) | Q( shared_with_id=user.id)).order_by( "-timestamp")[:10])

 File "/mnt/install/wwm/thirdparty/mongoengine/queryset.py", line 223, in call
 self._where_clause = q_obj.as_js(self._document)

  File "/mnt/install/wwm/thirdparty/mongoengine/queryset.py", line 89, in as_js
  return pymongo.code.Code(' '.join(js), js_scope)

 AttributeError: 'module' object has no attribute 'code' 
```

同一行代码在 pymongo 上运行良好：2.0.1 mongodb：2.1.0

由于我不想更新 pymongo，您能说出错误的确切位置或任何解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:27:41.400

正如github上提到的：

> Pymongo 1.11 不再受支持。如果可能，我建议更新 pymongo。如果不可能，您需要查看导入，因为代码和其他已移至 bson 模块。

您使用的是什么版本的 MongoEngine？

# windows-phone-7 - 输入提示WP7中的多个文本框

> ID：10782765
> 
> 赞同：0
> 
> 时间：2012-05-28T10:02:46.497
> 
> 标签：windows-phone-7

coding4fun 工具包的输入提示有一个文本框，但我找不到任何方法来添加另一个！这是我从谷歌找到的示例：

```
InputPrompt input = new InputPrompt();
        input.Completed += new EventHandler<PopUpEventArgs<string, PopUpResult>>(input_Completed);
        input.Title = "Test Title";
        input.Message = "Test message !";                        
        input.InputScope = new InputScope { Names = { new InputScopeName() { NameValue = InputScopeNameValue.EmailSmtpAddress } } };            
        input.Show(); 
```

在这里我只能添加单个输入范围......但我需要在这里添加多个文本框！谁能帮我 ？提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:58:38.463

Coding4Fun 控件不支持这一点。您需要为这样的界面创建自己的控件。（提示。您可以扩展 C4F 控件的代码。）

我对 C4F 控件的理解和期望是，它旨在快速收集一条信息，而无需保证需要它自己的页面。
如果您希望要求用户在“多个文本框”中输入数据，如果您使用单独的页面收集此类信息。

# objective-c - 我们可以在 iphone sdk 中添加 .shp 文件吗？

> ID：10782768
> 
> 赞同：2
> 
> 时间：2012-05-28T10:03:05.217
> 
> 标签：objective-c

实际上，我需要将**SharpMap**文件添加为具有扩展名**.shp**的 mapView，因此任何人都对我们如何在 ios 中将此 .shp 文件用作 mapview 有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:15:31.127

.shp 文件是ESRI[标准的](http://www.esri.com/library/whitepapers/pdfs/shapefile.pdf)[Shapefile](http://en.wikipedia.org/wiki/Shapefile)，[SharpMap](http://sharpmap.codeplex.com/)是一个开源 .Net 项目，它使用包括 Shapefile 在内的各种地图格式提供空间特征和地图显示。

要读取/解析 shapefile 并在 ios 中显示它们的几何图形，您可以尝试以下操作：
[grgcombs / iOS-Shapefile](https://github.com/grgcombs/iOS-Shapefile)

# asp.net - 哪个事件被解雇？

> ID：10782776
> 
> 赞同：-2
> 
> 时间：2012-05-28T10:03:51.487
> 
> 标签：asp.net

Gridview 包含第一列`checkbox.Header`，它选择所有复选框。在gridview中选中datarow的复选框时，哪个控件被触发？我正在尝试`onrowdatabound`事件，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:09:35.427

如果我*认为*您的要求是什么，我会继续创建该列作为模板字段，并使用 TemplateHeader 作为与“单击”处理程序进行交互的元素（可能是 asp:LinkBut​​ton）启用代码隐藏中的所有复选框。

我之前做过这个，它似乎工作正常，但我早就失去了澄清的来源。

# javascript - 如何使绝对定位的图像区域地图可以用鼠标点击？

> ID：10782777
> 
> 赞同：10
> 
> 时间：2012-05-28T10:03:58.493
> 
> 标签：javascript, jquery, mouseevent, imagemap

我使用绝对定位将几张图像放在一起。这些图像是部分透明的，并且有一个 html`area`并且`map`只使可见部分可点击。在 jQuery 中，我将鼠标事件附加到`area`标签上。

这适用于一个图像：mouseenter 和 mouseleave 仅在输入图像的映射部分时触发。

问题是它只适用于顶部图像。对于所有其他人，它不会触发事件，CSS 悬停也不会起作用，因为它上面还有另一个图像。尽管`area`s 不重叠并且`map`s 位于图像的前面，但这仍然存在。

这是问题的演示：http: [//markv.nl/stack/imgmap2/](http://markv.nl/stack/imgmap2/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T13:24:09.130

您可以在所有单独的图像之上放置一个完全透明的图像，并将所有图像映射区域附加到该图像。它将充当鼠标事件的捕获元素，您仍然可以更改所有单个图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T13:29:55.300

这不是直接的答案/解决方案......

为什么不使用画布/SVG 进行绘图？有很多库可以使任务变得容易。其中之一是[RaphaëlJS](http://raphaeljs.com/)（查看此[示例](http://raphaeljs.com/polar-clock.html)）。这个库的优点是它允许鼠标交互。

您可能会考虑的另一个库是[EaselJS](http://www.createjs.com/#!/EaselJS)，但它在不支持的浏览器中不起作用`<canvas>`，因此不支持 IE < 9。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-08T13:35:36.067

它仅在图像不重叠时才有效（见图）。在您的情况下，所有图像都具有完全相同的大小并且彼此堆叠。由于浏览器将图像视为实体对象（它们不关心透明度），因此无法确定您现在要悬停哪个图像？

```
 +-----------+-----------+
  |           |           |
  |   img1    |   img2    |
  |           |           |
  |           |           |
  +-----------+-----------+
  |           |           |
  |   img3    |   img4    |
  |           |           |
  |           |           |
  +-----------+-----------+ 
```

但是，您可以解决此问题：

只需在包含所有区域的图像之一上使用单个图像映射，并使用一点 javascript，您就可以触发所有其他图像的悬停效果。

```
$("area").hover(function(){
    var $target = $("#"+$(this).data("target")); // getting the target image
    $target.attr("src",$target.attr("src").replace("slice","slice-focus")); //replacing the src with the src of the hover image
},function(){
    var $target = $("#"+$(this).data("target"));
    $target.attr("src",$target.attr("src").replace("focus-","")); //revert the changes
});​ 
```

基于您的代码的工作示例：**[jsFiddle-Demo](http://jsfiddle.net/9crV3/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T15:53:11.683

您还可以使用具有固定高度和宽度的透明 div，该 div 将具有带有绑定功能的 onclick() 事件。像：

```
<div style="position: absolute; top: 10px; left: 10px; width: 100px; height: 100px;" onclick="dosomething();"></div> 
```

# javascript - 带有特殊字符的 Optgroup 过滤

> ID：10782778
> 
> 赞同：1
> 
> 时间：2012-05-28T10:04:19.800
> 
> 标签：javascript, jquery

```
var branches = $('#branch_name').html();
var filtrate = optgroup[label="Abe's Milk"]
var options = $(branches).filter(filtrate).html(); 
```

我明白了：

```
throw new Error ( "Syntax error, unrecognized expression: " + msg ); 
```

但如果我说：

```
var filtrate = optgroup[label="Abes Milk"] 
```

没有错误。

我尝试使用正则表达式自动转义 Abe's 中的单引号，但这也失败了，因为没有 optgroup 匹配 Abe\'s Milk。

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:06:49.100

> 我尝试使用正则表达式自动转义 Abe's 中的单引号，但这也失败了，因为没有 optgroup 匹配 Abe\'s Milk。

尝试：

```
optgroup[label="Abe\'s Milk"] 
```

# opengl - OpenGL不会绘制，为什么？

> ID：10782785
> 
> 赞同：0
> 
> 时间：2012-05-28T10:04:50.253
> 
> 标签：opengl, textures, draw, lwjgl

我是 OpenGL 的新手，所以我尝试绘制一个带纹理的 2D 矩形。我不知道为什么，但这不起作用：

```
 GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glLoadIdentity();
    GL11.glViewport(0, 0, frameWidth, frameHeight);
    GL11.glOrtho(0, 640, 0, 480, 0, 128);
    GL11.glEnable(GL11.GL_TEXTURE_2D);
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, renderer.getTexture("/textures/menu/title.png"));
    GL11.glEnable(GL11.GL_ALPHA_TEST);
    GL11.glAlphaFunc(GL11.GL_GREATER, 0.1F);
    GL11.glBegin(GL11.GL_QUADS);
    GL11.glTexCoord2f(0, 0);
    GL11.glVertex3f(-frameWidth/2, -frameHeight/2, -1);
    GL11.glTexCoord2f(1, 0);
    GL11.glVertex3f(+frameWidth/2, -frameHeight/2, -1);
    GL11.glTexCoord2f(1, 1);
    GL11.glVertex3f(+frameWidth/2, +frameHeight/2, -1);
    GL11.glTexCoord2f(0, 1);
    GL11.glVertex3f(-frameWidth/2, +frameWidth/2, -1);
    GL11.glEnd();
    GL11.glEnable(GL11.GL_CULL_FACE);
    GL11.glCullFace(GL11.GL_BACK); 
```

frameWidth 是窗口的宽度，frameHeight 是高度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:28:28.633

因为您实际上并没有写出哪里出了问题，所以我只能猜测，但是在这里，您指定了 z 在 (0,128) 范围内的正交投影。

```
 GL11.glOrtho(0, 640, 0, 480, 0, 128); 
```

然后将您的顶点设置为 z = -1。当然它不会被绘制，因为所有的顶点都会被剪掉。

```
 GL11.glVertex3f(-frameWidth/2, -frameHeight/2, -1); 
```

尝试更改`glOrtho`为`gluOrtho2D`（或硬编码等效项），并将所有顶点更改为`glVertex2f`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:23:22.073

您应该`glEnable(GL_CULL_FACE); glCullFace(GL_BACK)`在渲染之前调用。如果您使用`glOrtho`2D，您应该`glOrtho(..., ..., ..., ..., -1, 1);`为您的 2D 顶点执行和使用 glVertex2f。

# c# - 使用 .net 发送短信

> ID：10782798
> 
> 赞同：0
> 
> 时间：2012-05-28T10:05:55.073
> 
> 标签：c#, .net, sms, sms-gateway

我正在申请，我希望在某些情况下得到提醒。我想让应用程序在我的手机上发送短信。

如何通过 C# 使用一些免费的 smsgate。我有 T-Mobile CZ。

我读到我可以通过一些特殊的电子邮件地址发送电子邮件，它会向手机发送短信。但我不知道我该怎么做，我不知道消息可以有多长，我是否可以使用变音符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:28:36.810

查看这个网站，他们列出了一大堆运营商以及如何将电子邮件作为文本发送

我知道在加拿大 铃铛手机可以这样发短信

```
6135551234@txt.bell.ca 
```

[http://appscout.pcmag.com/e-mail/276407-how-to-send-email-to-sms-cell-phones-by-carrier](http://appscout.pcmag.com/e-mail/276407-how-to-send-email-to-sms-cell-phones-by-carrier)

**编辑**

下一个链接有一个 CZ T-Mobile [http://mutube.wordpress.com/projects/open-email-to-sms/gateway-list/](http://mutube.wordpress.com/projects/open-email-to-sms/gateway-list/)

在捷克共和国：

*   沃达丰 – name@vodafonemail.cz（最大 9×160=1460 个字符）
*   O2 – n@sms.cz.o2.com（最多 60 个字符）
*   T-Mobile – name@click.cz（仅限付费客户）

查看此链接以了解如何发送电子邮件

[使用 C# 通过 Gmail SMTP 服务器发送电子邮件](https://stackoverflow.com/questions/704636/sending-email-through-gmail-smtp-server-with-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:13:12.383

您应该使用 SMPP 协议，但您需要了解 smsgate 的必要条件。看看这个库：[inetlab](http://www.inetlab.com/Products/Inetlab.SMPP.aspx)，[easysmpp](http://sourceforge.net/projects/easysmpp/)

# java - 动态可编辑复选框

> ID：10782799
> 
> 赞同：2
> 
> 时间：2012-05-28T10:06:02.080
> 
> 标签：java, android

我正在尝试构建一个 android 活动屏幕，该屏幕显示一个表格，其中最后一列作为可编辑复选框。有人可以帮助开始吗？

另外我想知道是否有一个类似的工具`ArrayAdapter`，`Listadapter`它可以显示数组中的数据，除了我想要的是每行的复选框。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:20:02.677

我遇到了一个这样的问题，为此我创建了一个看起来像表格的自定义列表视图，并且每一行都可以使用自定义列表视图适配器动态填充数据。

对于可编辑复选框，单击该行时，您可以在对话框中打开一个编辑文本，然后将其替换为复选框文本。

# php - 在 PHPExcel 中重写已编辑的 XLSX 文件

> ID：10782801
> 
> 赞同：0
> 
> 时间：2012-05-28T10:06:15.543
> 
> 标签：php, phpexcel, xlsx

在这个页面中，我找到了一些代码示例，在将它们粘在一起后，我试图让它工作。页面可以读取上传的 XLSX 文件并打印表单文本字段中的每个单元格。但我不知道，如何将编辑的信息添加到以前的相同单元格中？请帮忙！

```
<?php
require_once('Classes/PHPExcel.php');
$objReader = PHPExcel_IOFactory::createReader('Excel2007');
$objReader->setReadDataOnly(true);
$objPHPExcel = $objReader->load("Ataskaita3.xlsx");
$objWorksheet = $objPHPExcel->setActiveSheetIndex(0);
echo '<form name="forma" method="post" action="'.$_SERVER['REQUEST_URI'].'">';
echo '<table border=1>' . "\n";
foreach ($objWorksheet->getRowIterator() as $row) {
  echo '<tr>' . "\n";
  $cellIterator = $row->getCellIterator();
  $cellIterator->setIterateOnlyExistingCells(false); 
  foreach ($cellIterator as $cell) {
    echo '<td><input type="text" name="laukelis" value="' . $cell->getValue() . '"/></td>' . "\n";
  }
  echo '</tr>' . "\n";
}
echo '</table>' . "\n";
echo '<input type="submit" name="submit" value="Redaguoti" />';
echo '</form>';

if(isset($_POST['submit'])){
error_reporting(E_ALL);
require_once 'Classes/PHPExcel/IOFactory.php';

$excel2 = PHPExcel_IOFactory::createReader('Excel2007');
$excel2 = $excel2->load('Ataskaita3.xlsx');
$excel2->setActiveSheetIndex(0);
$excel2->getActiveSheet()->setCellValue('A1', '4')
    ->setCellValue('A2', '5')
    ->setCellValue('A3', '6')       
    ->setCellValue('A4', '7');
$objWriter = PHPExcel_IOFactory::createWriter($excel2, 'Excel2007');
$objWriter->save('Ataskaita_redaguota.xlsx');
}else{
echo 'edit';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:24:18.687

从...开始：

```
echo '<td><input type="text" name="' . $cell->getCoordinate() . '" value="' . $cell->getValue() . '"/></td>' . "\n"; 
```

# php - 具有递归功能的回声菜单树

> ID：10782810
> 
> 赞同：1
> 
> 时间：2012-05-28T10:06:36.477
> 
> 标签：php, mysql, html, recursion

**问题：**我想不出针对我的具体情况创建递归函数的方法。

**情况：**

`Mysql DB`
`id | root | name |`
在哪里`root`显示女巫类别，这是子类别。

HTML 应该如何看待：

```
 <li><a href="#"><p class="Tier0">Datori</p></a>
                    <ul style="display: block">
                         <li><a href="#"><p class="Tier1">Cookies</p></a></li>
                         <li><a href="#"><p class="Tier1">Events</p></a></li>
                         <li><a href="#"><p class="Tier1">Forms</p></a></li>
                         <li><a href="#"><p class="Tier1">Games</p></a></li>
                         <li><a href="#"><p class="Tier1">Images</p></a>
                            <ul>
                                <li><a href="#"><p class="Tier2">CSS</p></a></li>
                                <li><a href="#"><p class="Tier2">JavaScript</p></a></li>
                                <li><a href="#"><p class="Tier2">JQuery</p></a></li>
                            </ul>
                         </li>
                         <li><a href="#"><p class="Tier1">Navigations</p></a>
                            <ul>
                                <li><a href="#"><p class="Tier2">CSS</p></a></li>
                                <li><a href="#"><p class="Tier2">JavaScript</p></a></li>
                                <li><a href="#"><p class="Tier2">JQuery</p></a></li>
                            </ul>
                        </li>
                         <li><a href="#"><p class="Tier1">Tabs</p></a></li>
                    </ul>
                </li>
                <li><a href="#"><p class="Tier0">Washing Machines</p></a> 
```

我需要什么样的 PHP 函数才能将其全部打印出来？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T10:19:28.077

怎么样：

```
function recurse($categories, $parent = null, $level = 0)
{
    $ret = '<ul>';
    foreach($categories as $index => $category)
    {
        if($category['root'] == $parent)
        {
            $ret .= '<li><a href="#"><p class="Tier' . $level . '">' . $category['name'] . '</p></a>';
            $ret .= $this->recurse($categories, $category['id'], $level+1);
            $ret .= '</li>';
        }
    }
    return $ret . '</ul>';
} 
```

此函数要求您首先查询数据库以获取可用类别的完整列表，并假定您的根类别的值为 null，但该函数可以更改为接受 -1 或 0，具体取决于您当前模式的工作方式。

```
$categories = { get from database into an multi-dimensional array };
$Tree = $this->recurse($categories);
echo $Tree; 
```

您可以考虑执行以下操作，以防止在父级不存在子级时出现任何空 UL：

```
function recurse($categories, $parent = null, $level = 0)
{
    $ret = '<ul>';
    foreach($categories as $index => $category)
    {
        if($category['root'] == $parent)
        {
            $ret .= '<li><a href="#"><p class="Tier' . $level . '">' . $category['name'] . '</p></a>';
            $sub = $this->recurse($categories, $category['id'], $level+1);
            if($sub != '<ul></ul>')
                $ret .= $sub;
            $ret .= '</li>';
        }
    }
    return $ret . '</ul>';
} 
```

但是，最好的解决方案是选择您的数据以包含一个包含每个类别有多少子类别的列。

```
select Category.*, (select count(distinct c1.id) from Category as c1 where c1.root = Category.id) as ChildCount from Category 
```

您的功能将是：

```
function recurse($categories, $parent = null, $level = 0)
{
    $ret = '<ul>';
    foreach($categories as $index => $category)
    {
        if($category['root'] == $parent)
        {
            $ret .= '<li><a href="#"><p class="Tier' . $level . '">' . $category['name'] . '</p></a>';
            if($category['ChildCount'] > 0)
                $ret .= $this->recurse($categories, $category['id'], $level+1);
            $ret .= '</li>';
        }
    }
    return $ret . '</ul>';
} 
```

希望有帮助吗？

# c# - 如何在页面视图或按钮单击之间增加 ASP.NET (C#) 中的变量

> ID：10782811
> 
> 赞同：3
> 
> 时间：2012-05-28T10:06:37.020
> 
> 标签：c#, asp.net

我觉得我在这里遗漏了一些关键。

我已经尝试在[http://msdn.microsoft.com/en-us/magazine/cc300437.aspx](http://msdn.microsoft.com/en-us/magazine/cc300437.aspx) 和谷歌上遵循指南，但我看不到我没有做什么。

我有一些非常基本的代码，我写这些代码只是为了让它工作：

Default.aspx 代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" EnableSessionState="True" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Demo Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Label ID="myLabel" runat="server" Text="foo"></asp:Label>
        <asp:LinkButton ID="lnkClickButton" runat="server" OnClick="lnkClickButton_Click" CommandName="Clicky">Click Me</asp:LinkButton>
    </div>
    </form>
</body>
</html> 
```

Default.aspx.cs 代码：

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Session["clickcount"] = 0;
        Cache["clickscount"] = 0;
    }
    protected void lnkClickButton_Click(object sender, EventArgs e)
    {
        Session["clickcount"] = (int)Session["clickcount"] + 1;
        Cache["clickscount"] = (int)Cache["clickscount"] + 1;

        Label myLabel = ((Label)this.FindControl("myLabel"));
        if (myLabel != null)
        {
            myLabel.Text = "Session: " + Session["clickcount"] + "; Cache: " + Cache["clickscount"] + ";";
        }
    }
} 
```

我尝试使用会话对象和缓存对象来增加值，但无济于事。我每次只得到1。

注意这是我的第一个 asp.net 项目，我对 c# 也很陌生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T10:08:56.727

`Page_Load`每次回发以及初始加载时都会运行。您需要在您的`Page_Load`：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack){
       Session["clickcount"] = 0;
       Cache["clickscount"] = 0;
    }
} 
```

更好的是，指定它只有在它还没有值时才应该设置：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Session["clickcount"] == null){
       Session["clickcount"] = 0;
    }
} 
```

澄清一下，最好只设置尚未设置的值的原因是每次有人直接访问页面时 Page.IsPostBack 都是 false 。比如说你有你的页面[http://example.com/Demo/Default.aspx](http://example.com/Demo/Default.aspx)并且在顶部你有一个你在 logo 中包装的[标志](http://example.com/Demo/Default.aspx)，每次有人点击这个标志时会话都会被重置，即使他们实际上并没有离开页面。如果他们在浏览器上刷新而不重新发布最后一篇文章，也会发生这种情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T10:09:39.460

在 MSDN 上阅读：[**Page.IsPostBack 属性**](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx) - 获取一个值，该值指示页面是第一次呈现还是正在加载以响应回发。

如果页面正在加载以响应客户端回发，则属性的 vlue 为**true ；**否则，**false**。

像这样的代码......你需要把代码 `!IsPostBack`像下面这样

```
protected void Page_Load(object sender, EventArgs e)     
{
     if(!IsPostBack)
    {
         Session["clickcount"] = 0;
         Cache["clickscount"] = 0;
    }
 } 
```

服务器端控件生成回发以对其自身进行分页，因此您不需要在每个 postbck 上执行的代码需要按上述方式放置

这将轻松解决您的问题...

除此之外，您可以像这样为计数创建静态属性

查看我的帖子：[**服务器端状态维护变量的编程实践**](http://pranayamr.blogspot.com/2011/01/programming-practice-for-server-side.html)

```
private int ClickCount
{
  get 
   {
     if (Session["clickcount"] == null)
     {         Session["clickcount"] = 0; return 0;      }
     else 
        return (int)Session["clickcount"] ; 
   }
   set
   {
      Session["clickcount"] = value;
   }
} 
```

比最终代码

```
protected void Page_Load(object sender, EventArgs e)     
{
         if(!IsPostBack)
        {
            ClickCount = 0; 
        }
}

protected void lnkClickButton_Click(object sender, EventArgs e)
{
              int val = ClickCount ;
              ClickCount  = val + 1; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T10:14:24.627

写作：

```
Session["clickcount"] = 0; 
```

在 Page_Load 中，**每次用户进入页面时**都会导致计数器被重置。

在我看来你想要这样的东西：

```
protected void lnkClickButton_Click(object sender, EventArgs e)
{
    if (Session["clickcount"] == null)
    {
            Session["clickcount"] = 1;
    }
    else
    {
           Session["clickscount"] = (int)Session["clickscount"] + 1;
    }

    Label myLabel = ((Label)this.FindControl("myLabel"));
    if (myLabel != null)
    {
        myLabel.Text = "Session: " + Session["clickcount"] + "; 
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T10:51:50.530

您得到 1，因为每次回发您的会话和缓存变量都等于 0。

```
protected void Page_Load(object sender, EventArgs e)
{
    Session["clickcount"] = 0;
    Cache["clickscount"] = 0;
} 
```

并且按钮单击发生在 page_load 之后，因此您应该使用 IsPostback 属性。

```
 protected void Page_Load(object sender, EventArgs e) 
```

{

```
 if(!IsPostBack)
{
     Session["clickcount"] = 0;
     Cache["clickscount"] = 0;
} 
```

}

现在这些变量仅在页面加载时初始化。

您应该通过以下链接。它描述了 Asp.net 页面的寿命。

[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

# java - 为什么不需要将方法的返回值分配给变量？

> ID：10782814
> 
> 赞同：12
> 
> 时间：2012-05-28T10:06:47.977
> 
> 标签：java, return-value

> **可能重复：**
> [如果不引用 Java 中的对象会发生什么情况，例如：myString.concat(“that”)](https://stackoverflow.com/questions/7281160/what-happens-to-an-object-in-java-if-you-do-not-reference-it-like-here-mystri)

```
public class ReturnTest
{
    public static void main(String[] args)
    {
        ReturnTest rt = new ReturnTest();
        rt.show();
    }

    public String show()
    {
        return "Hello";
    }
} 
```

在上面的代码中，该`show()`方法返回一个`String`未被任何变量捕获的值。编译器和 JVM 都不会引发任何警告、错误或异常。原始返回类型也是如此。为什么？

编译器不应该确保方法返回的重要值不会因此丢失吗？

我怎样才能从外壳解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T10:11:13.730

这就是语言的设计。

在许多情况下，方法返回一个您不关心的值。例如`StringBuilder.append()`返回对象本身。

确实，在某些情况下，重要的返回值可能会丢失。例如，`InputStream.skip(long n)`返回跳过的字节数。并`read`返回读取的字节数。有一些工具（[Checkstyle](http://checkstyle.sourceforge.net/)，[FindBugs](http://findbugs.sourceforge.net/)）可以检测到此类错误。但是语言本身并不要求检查返回值。即使是这样，程序也可以选择忽略该值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T10:10:09.237

因为您不一定需要返回值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-28T10:12:30.713

`@CheckReturnValue`您可以使用是否应始终使用其返回值来注释方法。像 FindBugs 这样的静态代码分析会考虑此注释并在您违反它时发出警告。

至少当方法返回某种需要在调用者负责的末尾进行最终处理的对象时，这是非常合理的。这对于必须在最后关闭的资源是正确的。最后必须释放的锁...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T10:12:27.503

在 java 中，函数不是纯函数，所以它们可能只是为了副作用而运行。只是在这种情况下没有副作用......考虑一下

```
public String show() {
    System.out.println("Hello");
    return "Hello";
} 
```

现在你想要一个警告吗？编译器不知道你是为了副作用还是为了价值而运行它，所以为什么要坚持呢？

# javascript - 获取用户选择文本的 html 时出错

> ID：10782816
> 
> 赞同：1
> 
> 时间：2012-05-28T10:06:53.623
> 
> 标签：javascript, html, dom

我有以下代码用于获取用户选择文本的 html 代码。它在没有打开`<span>`标签的情况下完美运行。

```
function getHtml() {
var html = "";
if (typeof window.getSelection != "undefined") {
    var sel = window.getSelection();
    if (sel.rangeCount) {
        var container = document.createElement("div");
        for (var i = 0, len = sel.rangeCount; i < len; ++i) {
            container.appendChild(sel.getRangeAt(i).cloneContents());
        }
        html = container.innerHTML;
    }
} else if (typeof document.selection != "undefined") {
    if (document.selection.type == "Text") {
        html = document.selection.createRange().htmlText;
    }
}
alert(html); } 
```

如果`<span>`用户选择的文本的代码中有一个打开标签，它会自动添加一个结束`</span>`标签。有解决这个问题的方法吗？

使用的 HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/2000/REC-xhtml1-20000126/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<SCRIPT LANGUAGE="JavaScript" SRC="HighlightedString.js">
</SCRIPT>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Red and Louis</title>
    <link rel="stylesheet" media="screen" type="text/css" href="screen.css" />
    <link rel="stylesheet" media="print" type="text/css" href="other.css" />

</head>
<body onmouseup="getHtml()">
<div id="story">
<h1>Red and Louis</h1>

<p>Once upon a time in the middle of a large forest in Western Massachusetts, there lived a little girl who was about 14 years old and who loved baseball.  
<span style="font-family:Verdana, sans-serif; font-size:10pt">Text Within Span </span>
She thought that if she had grown up in the Midwest where there were hardly any trees, she would have been one of the best baseball players ever, but since she lived in the middle of a forest, there was no way for her to practice.  She had tried once but every ball had headed straight for the trees and though she thought they probably would have been homeruns, she couldn&rsquo;t tell for sure.</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:30:27.237

没有一种简单的方法可以得到你想要的。该函数为您返回内容的一种可能的 HTML 表示形式。它没有做的是将服务器返回的原始 HTML 的子字符串返回给浏​​览器。

在 IE < 9 以外的浏览器中，它会将所选内容的副本创建为 DOM DocumentFragment。为此，它必须通过仅复制部分选定节点的选定部分来创建节点树。正是这棵树被序列化回 HTML 字符串。

将克隆的选择内容与原始节点进行比较，并从输出中省略部分选择的节点的结束标签，可能会做一些复杂的事情，但我认为这样做没有什么大的收获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:34:32.130

您将所选文本转换为 html 并将其插入到元素中，这也将关闭所有打开的标签。

不确定您将其用于什么，但`html = container.innerText;`应该将其作为文本插入，并省略标签，如果这是您想要的？

# iphone - 你如何在 iOS5 的 UISearchBar 中更改字体？

> ID：10782817
> 
> 赞同：0
> 
> 时间：2012-05-28T10:06:56.567
> 
> 标签：iphone, ios, xcode, ios5

我正在尝试使用 iOS5 的新“外观”代理更改所有 UISearchBar 对象的字体，例如：

```
 [[UISearchBar appearance] setTitleTextAttributes:
 [NSDictionary dictionaryWithObjectsAndKeys:
  [UIColor whiteColor], UITextAttributeTextColor, 
  [UIFont fontWithName:@"Trebuchet MS" size:0.0], UITextAttributeFont,
  nil]]; 
```

每次我运行这个，我都会收到这个错误：

“2012-05-28 03:01:52.264 DirectDx_ClientApp [30039:15503] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[_UIAppearance setTitleTextAttributes:]：无法识别的选择器发送到实例 0x8460cf0”***第一次抛出调用堆栈: (0x1ea8022 0x3a4fcd6 0x1ea9cbd 0x1e0eed0 0x1e0ecb2 0x5e695 0x5dd78 0x217aa 0x789386 0x78a274 0x799183 0x799c38 0x78d634 0x203bef5 0x1e7c195 0x1de0ff2 0x1ddf8da 0x1dded84 0x1ddec9b 0x789c65 0x78b626 0x2164d 0x2895 0x1) terminate called throwing an exception"

上面的方法与 UITabBar 和 UINavigationBar 配合得很好。

有什么见解吗？

首先十分感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-03T13:45:29.203

试试这个，它适用于 iOS 5.0 及更高版本（也适用于 iOS 7）：

```
- (void)viewDidLoad
{
    [[UITextField appearanceWhenContainedIn:[UISearchBar class], nil] setFont:[UIFont fontWithName:@"Helvetica" size:20]];
} 
```

对于 iOS 8

```
- (void)viewDidLoad
{
        [[UITextField appearanceWhenContainedIn:[UISearchBar class], nil] setDefaultTextAttributes:@{
            NSFontAttributeName: [UIFont fontWithName:@"Helvetica" size:20],
      }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:13:55.257

查看 uisearchbar 的 Apple 参考指南，在自定义外观下，您可以查看哪些方法可用于 uisearchbar。SetTitleAttributes 对于 uisearchbar 是不可能的，我看不到另一种通过外观更改 uisearchbar 字体的方法。

试图调用一个对象不支持的方法，总是会给你一个错误。在您的情况下，其他类支持 setTitleArtributes，但遗憾的是不支持 uisearchbar。

有一个[解决方法](https://stackoverflow.com/questions/4697689/changing-font-size-of-uisearchbar)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-10T08:36:09.033

尝试使用此代码

```
UITextField *textField = [self.searchBar valueForKey: @"_searchField"];
[textField setFont:[UIFont fontWithName:@"HelveticaNeue-Light" size:17.0]]; 
```

希望这对你有用。

# c# - 如何在 Sharepoint 2010 中自动在页面中添加讨论区？

> ID：10782818
> 
> 赞同：0
> 
> 时间：2012-05-28T10:06:57.830
> 
> 标签：c#, javascript, asp.net, sharepoint-2010

我们毫不费力地在 Sharepoint 2010 中创建了一个讨论板，但我正在寻找一种解决方案，可以将讨论板及其所有回复自动添加到特定区域。即最终用户不需要添加讨论区，通过进入页面进入编辑模式然后添加Web部件的过程。但是相反，一旦用户创建了讨论区，所有讨论和消息都会自动添加到页面（到页面中的某个区域）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:00:12.990

将此代码添加到 Web 事件处理程序 (ListAdded) 以便自动运行此代码。在该代码中，您需要检查列表类型是否为讨论。在事件接收器中，您需要获取对要在其中添加 Web 部件的 SPWeb 以及要使用的列表（在本示例中为联系人列表）的引用。接下来创建 ListViewWebPart 类的实例，您可以在其中设置 ZoneID、ListName 和 ViewGuid。这是棘手的部分，ListName 属性应该包含列表的 ID（GUID），而不是列表的名称！！但是 ListName 属性属于字符串类型，因此您需要使用 .ToString(“B”).ToUpper() 将 List GUID 转换为字符串。ViewGuid 也是如此。最后，您需要获取对要在其中添加 Web 部件的页面的 WebPartCollection 引用（在本示例中，主页为 default.aspx）。现在，您可以使用 Add 方法添加 Web 部件。

```
using Microsoft.SharePoint;
using Microsoft.SharePoint.WebPartPages;

// Get a reference to a web and a list
SPSite site = new SPSite("http://localhost:8000");
SPWeb web = site.OpenWeb();
SPList list = web.Lists["Contacts"];

// Instantiate the web part
ListViewWebPart wp = new ListViewWebPart();
wp.ZoneID = "Left";
wp.ListName = list.ID.ToString("B").ToUpper();
wp.ViewGuid = list.DefaultView.ID.ToString("B").ToUpper();

// Get the web part collection
SPWebPartCollection coll = 
    web.GetWebPartCollection("default.aspx", 
    Storage.Shared);

// Add the web part
coll.Add(wp); 
```

# excel - 根据下拉列表选择输出数据

> ID：10782824
> 
> 赞同：0
> 
> 时间：2012-05-28T10:07:32.703
> 
> 标签：excel, drop-down-menu

我的 Excel 工作表中有一个下拉列表，其中包含一系列月份`(Jan - 2012, Feb - 2012 etc..)`

我的下拉菜单工作得很好，但在另一张纸上说。我想要文本`Today the month is <insert drop down text>`我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:25:08.987

1）单击该下拉单元格

2) 在编辑栏左侧的名称框中键入该单元格的名称。让我们将此单元格命名为**MyDate**

![在此处输入图像描述](../Images/fe3135ae9b50c192bf525a30351a6ee4.png)

3）在你的另一张纸上，使用这个公式：

**="月份是" & MyDate**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:28:51.930

没关系..我想通了:)

我所做的是首先给所有月份一个参考号（所以第一个月是 1 然后是 2 等等）。

然后在我的下拉列表中。我确定是否在下一列中使用参考编号引用月份列表，然后将其链接到同一张表上的单元格 A1。

这个数字对应于月份列表中列出的月份，并且会根据下拉列表中选择的项目动态变化。

然后我做了一个简单的 VLOOKUP 公式，将数字与月份匹配，然后......瞧！

这是我使用的 vlookup 公式。

`=VLOOKUP(A1,A3:D14,2,FALSE)`

# cryptography - 使用 openssl 对文件进行数字签名

> ID：10782826
> 
> 赞同：51
> 
> 时间：2012-05-28T10:07:34.110
> 
> 标签：cryptography, openssl, rsa

有没有办法使用 openssl 对 x509 证书或任何文档进行数字签名？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-08-21T14:09:41.290

**生成私钥**

```
openssl genrsa -out privatekey.pem 2048 
```

**签署**

```
openssl dgst -sha256 -sign privatekey.pem -out data.txt.signature data.txt 
```

**生成公钥**

`dgst -verify`需要公钥

```
openssl rsa -in privatekey.pem -outform PEM -pubout -out publickey.pem 
```

**核实**

```
openssl dgst -sha256 -verify publickey.pem -signature data.txt.signature data.txt 
```

*   如果成功：打印`"Verified OK"`，返回码`0`
*   如果失败：打印`"Verification Failure"`，返回码`1`

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-05-28T10:21:45.927

是的，OpenSSL 的[dgst](http://www.openssl.org/docs/apps/dgst.html#)和[rsautl](http://www.openssl.org/docs/apps/rsautl.html)组件可用于计算给定 RSA 密钥对的签名。

### 签署：

```
openssl dgst -sha256 data.txt > hash
openssl rsautl -sign -inkey privatekey.pem -keyform PEM -in hash >signature 
```

### 仅验证签名：

```
openssl rsautl -verify -inkey publickey.pem -pubin -keyform PEM -in signature 
```

*更新：从下面捕获 Reto 的评论，因为这是一个重要的细微差别。大概如果您要麻烦进行验证，您想知道签名是在它所附加的明文上生成的：*

这对某些人来说可能听起来很明显，但是：注意，`rsautl verify`只是解密文件`signature`。此调用的输出保证由私钥的所有者生成，但除此之外没有任何其他检查。因此，要真正验证一致性，`data.txt`您必须重新生成摘要，然后将其与`openssl rsautl -verify`.

### 验证私钥的所有者确实保证`data.txt`：

```
openssl dgst -sha256 -verify publickey.pem -signature signature data.txt 
```

对于此操作，*openssl*需要公钥、签名和消息。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-05T08:54:16.790

要在 openssl 中对文档进行**数字签名**，它将起作用

首先，您的证书应该是可信的，它看起来像这样

```
-----BEGIN TRUSTED CERTIFICATE-----
MIIDbjCCAlYCCQCOyunl25ProDANBgkqhkiG9w0BAQUFADB5MQswCQYDVQQGEwJJ
...
-----END TRUSTED CERTIFICATE----- 
```

然后使用以下命令

```
smime -sign -signer certificate.pem -inkey private.key -in test.txt \
    -out test1.txt -from ashish -to singhal 
```

# basic-authentication - 使用基本身份验证访问 msmdpump.dll 时性能下降

> ID：10782829
> 
> 赞同：1
> 
> 时间：2012-05-28T10:07:46.667
> 
> 标签：basic-authentication, ssas-2008

我启用了对我的 SSAS 2008 项目的 http 访问。我能够通过 http:///olap/msmdpump.dll 连接到项目和多维数据集我尝试了匿名身份验证和基本身份验证。为了生产用途，我将不得不使用基本身份验证。

在这两种设置中，我都可以快速访问项目和立方体。但是使用基本身份验证绘制报告需要花费 10 倍的时间。在生产环境中使用太慢了。绘制报告后，可以在多维数据集内导航（过滤器、钻取）而不会出现性能问题。

在 SQL Server 探查器中，我比较了两种身份验证。Con-string 具有相同的设置。“发现开始>发现结束”和“查询开始>>查询子立方体>>查询结束”只需要10倍的时间。NTUserName 在两种变体中都是相同的，因为我将相同的用户用于匿名身份验证。

我尝试了 Windows Server 2003 和 2008。同样的问题。我试图改变几个Con-settings

在这两种变体中，服务器都不使用主动缓存。

任何想法？

谢谢！

# linux - Vim 独特的选项

> ID：10782830
> 
> 赞同：1
> 
> 时间：2012-05-28T10:07:52.813
> 
> 标签：linux, vim

我想在 gvim 窗口中打开一个文件，但前提是该文件尚未在 vim 中打开。最好使用命令行选项。我试过了

```
file=...
gvim --cmd ':drop $file' 
```

但是，如果文件已经打开，这会在我的 linux 环境中打开一个额外的可见新空窗口。是否有不同的选项/命令来实现其他编辑器的独特行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:21:32.670

```
$ gvim --remote filename 
```

完全按照您的描述进行。但是，您可能需要在`~/.vimrc`.

```
set switchbuf=useopen,usetab 
```

# javascript - Nowjs expressjs 3.0

> ID：10782832
> 
> 赞同：0
> 
> 时间：2012-05-28T10:08:11.563
> 
> 标签：javascript, node.js, express, nowjs-sockets

我正在尝试让 nowjs 与 expressjs 3.0alpha4 一起使用。我已经将脚本添加到我的视图中，如下所示：

```
<script src="/nowjs/now.js"></script> 
```

并且还尝试过：

```
<script src="https://localhost/nowjs/now.js"></script> 
```

但我得到的只是一个：

```
GET https://localhost/nowjs/now.js 403 (Forbidden) 
```

有没有人让它与 expressjs 3.0 一起使用？

即使我托管 now.js 文件，我仍然得到：`Now is not defined`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:22:04.050

您需要将 HTTPServer 对象传递给 now 初始化程序。Express 3.0 不像 2.x 那样显示这个对象。

所以做类似的事情：

```
var server = http.createServer(app).listen(app.get('port'), function() {
  console.log('Express server listening on port ' + app.get('port'));
}

var everyone = require('now').initialize(server); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:57:04.283

首先检查您是否有静态中间件设置。

```
app.use( express.static(__dirname + '/public' ) ) 
```

其次，确保将 nowjs 目录与 nowjs 目录中的 now.js 文件放在 public 目录中。

# jquery - 使用 contains 查找重复的字符串

> ID：10782835
> 
> 赞同：0
> 
> 时间：2012-05-28T10:08:21.343
> 
> 标签：jquery

我有两个用于计费的文本框`item name`，`amount`在填写这两个字段并单击`Add`按钮后，我将数据存储到一个 html 表中，例如，

```
$("#BillTable > tbody").find("tr:gt(0)").remove();
  for (var i = 0; i < feesItemList.length; i++) {          

          tab = "<tr><td class='close16' onclick='DeleteBillItem(" + i + ")'>" 
                   "</td><td>" + " <span class='bid'>" + feesItemList[i].ItemName
                   + " </span> </td><td>" + feesItemList[i].Amount + "</td></tr>";

          $("#BillTable > tbody").append(tab);

  } 
```

这里`item name`不应该是重复的。所以我只是在`tab`like之前提出了一个条件

```
if($('bid').contains(feesItemList[i].ItemName){
    alert("Duplicate ItemName");
}
else{
    tab +=............//
} 
```

但它不工作，我该如何解决这个问题，任何人都可以在这里帮助我，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:41:29.867

```
$(function () {

    var data = [2, 5, 10, 20, 2, 5, 10, 25, 2, 5, 50, 20, 10];
    var myArray = new Array();
    var temp = data;

    function RemoveDublicates() {

        for (var i = 0; i < data.length; i++) {
            var dublicate = false;
            for (var j = i + 1; j < data.length; j++) {
                if (data[i] == temp[j]) {
                    dublicate = true;
                    break;
                }
            }

            if (!dublicate) {
                myArray.push(data[i]);
            }

        }
    }
    //print
    for (var k = 0; k < myArray.length; k++) {
        $('body').append(myArray[k] + "<br/>");
    }

}); 
```

在运行 for 循环之前，请将此代码删除数组具有的任何重复值。

# php - jquery 多维

> ID：10782836
> 
> 赞同：0
> 
> 时间：2012-05-28T10:08:25.073
> 
> 标签：php, jquery

我正在克隆表中的最后一行，但我需要为每个输入提供唯一的多维名称......

```
 <tr>
<td><input type="text" name='input[1][Name]'></input></td>
<td><input type="text" name='input[1][address]'></input></td>
<td><input type="text" name='input[1][contactInfo]'></input></td>
</tr> 
```

下一行应该是

```
<tr>
<td><input type="text" name='input[2][Name]'></input></td>
<td><input type="text" name='input[2][address]'></input></td>
<td><input type="text" name='input[2][contactInfo]'></input></td>
</tr> 
```

...... jQuery

```
 $(".alternativeRow").click(function(){
i=2;
                $("table tr:last").clone().find("input").each(function() {
                    $(this).attr({
                        'id': function(_, id) { return id + i },
                        'name': function(_, name) { return name + i },
                        'value': ''               
                    });
                }).end().appendTo("table");
                i++;
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:18:30.373

对于多维名称，无需为名称提供显式索引。直接可以这样写。

```
<input type="text" name='input[][Name]'></input> 
```

当您在服务器端收到表单数据时，这将自动获取索引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:13:01.167

```
 $(".alternativeRow").click(function(){
i=2;
                $("table tr:last").clone().find("input").each(function() {
                   this.name = this.name.replace(/\[(\d+)\]/, function(){
                        return '[' + i +']';
                    });
                })
                .end().appendTo("table");
                i++;
      }); 
```

# jquery - 如何使文本框只读，并在使用 jQuery 单击时显示日历？

> ID：10782838
> 
> 赞同：2
> 
> 时间：2012-05-28T10:08:34.333
> 
> 标签：jquery, readonly

我有 3 个文本框的女巫，我想将其更改为只读。在您单击文本框的那一刻，会出现一个日历，您可以在其中选择一个日期。这就是我想要的，但用户也可以输入日期，我希望将其删除，因为它是一个 ipad 应用程序，然后调出键盘。

有人可以告诉我如何将我的文本框设置为只读吗？

```
$('#AdvertiserSignDate').attr('readonly', true);
$('#ContinentalSignDate').attr('readonly', true);
$('#WitnessSignDate').attr('readonly', true); 
```

如果这是错误的方法，请给我一个很好的重定向。

提前致谢 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:26:41.883

**工作演示** [http://jsfiddle.net/h9bFb/5/](http://jsfiddle.net/h9bFb/5/) **或** [http://jsfiddle.net/6JAYJ/2/](http://jsfiddle.net/6JAYJ/2/)

希望这可以帮助;

**代码**

```
 $(function () {

                $("#fromDate, #toDate").datepicker({
                    defaultDate: "+1w",
                    changeMonth: true,
                    numberOfMonths: 1

                }).attr('readonly','true');

            });
​ 
```

**或者**

```
 $(function () {

                var dates = $("#fromDate, #toDate").datepicker({
                    defaultDate: "+1w",
                    changeMonth: true,
                    numberOfMonths: 1

                });

            }); 
```

**html**

```
<label for="from">From</label>
<input type="text" id="fromDate" name="fromDate" readonly='true'/>
<label for="to">to</label>
<input type="text" id="toDate" name="toDate" readonly='true'/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:14:06.570

试试 jQuery UI 日历。在这里，您将获得所有配置选项。 [http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:14:31.720

试试这个

```
$('#AdvertiserSignDate').keydown(function(event){
  return false;
}); 
```

# excel - 将大量记录从 Excel 导入 MsAccess - 下标超出范围错误

> ID：10782841
> 
> 赞同：0
> 
> 时间：2012-05-28T10:08:43.733
> 
> 标签：excel, ms-access, vba

我在 Excel (2007) 文件中有大量行 (220,000) 和 30 列，我试图将其导入到某些数据库中，或者某些报告的 MsAccess。

我尝试使用 Visual Basic 6.0 进行编程以从 Excel 中读取并插入 msAccess，但它花费了太多时间（大约 4-5 小时，没有用）。

接下来我尝试使用导入向导导入 MsAccess，它在向导结束时显示“下标超出范围”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T03:29:06.343

我尝试使用 Visual Basic 而不是 Excel 单元格读取来解决 ADO 的问题。这要快得多（所有记录大约需要 2-3 分钟）。

我刚刚创建了一个名称范围，并通过 ODBC 我使用 ADO 作为记录进行访问，并将其插入 MySQL 中。它解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T01:38:02.077

我也遇到了这个问题，所以我添加这个以防其他人遇到它。

将网络文件复制到本地驱动器，包括 DB 和 excel。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T10:12:51.170

我怀疑您超出了 Access 数据库中施加的限制之一：

[Access 博客 - Access 2007 限制](http://web.archive.org/web/20130525073743/http://blogs.office.com/b/microsoft-access/archive/2006/06/05/access-2007-limits.aspx)

也许您可以通过创建多个具有相同列的表来缩小问题范围，然后导入数据块，这样您就不会遇到全有或全无的情况。

然后，您将能够缩小错误源的范围，或者，如果可行，则将表合并为一个。

# javascript - Myfunc=_emptyFunc 与 Myfunc=null

> ID：10782848
> 
> 赞同：3
> 
> 时间：2012-05-28T10:09:07.870
> 
> 标签：javascript, function

如果我想发布一个`Myfunc`
名为什么是实现此类任务的最佳方法？
`_emptyFunc=function(){}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:11:20.330

1.  第一个是可调用的
2.  第二个将导致 TypeError 异常。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:14:42.247

`_emptyFunc`调用时可调用`null`抛出`TypeError`：

```
js> _emptyFunc=function(){}
(function () {})
js> _nullFunc=null;
null
js> _emptyFunc()
js> _nullFunc()
typein:5: TypeError: _nullFunc is not a function 
```

因此，使用无操作函数的优点是您可以简单地无条件地调用它，而不必检查它是否为空/未定义，甚至可能测试它是否是可调用的。

使用`null`or`undefined`的优点是您的代码可以避免仅在传递回调时才执行必要的操作。

如果您确实打算让 JS 引擎释放之前存储在变量中的任何函数使用的内存，请将其设置为`null`. 分配一个不同的函数还将删除（可能）对该函数的最后一个引用，从而允许 GC 收集它，但您将拥有一个显然也使用一些内存的新函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T10:15:34.680

将 MyFunc 设置为 null，如果没有更多可访问的引用，这将导致 GC 收集 Function 对象。一般来说，你不需要做这样的事情。

# iframe - SimpleModal 在 IE 9 中不起作用（在 Iframe 中）

> ID：10782849
> 
> 赞同：5
> 
> 时间：2012-05-28T10:09:10.907
> 
> 标签：iframe, internet-explorer-9, simplemodal

使用 IE 9 时出现以下错误（Chrome 和 FireFox 效果很好）：

> SCRIPT438：对象不支持属性或方法“removeExpression”jquery.simplemodal.1.4.2.min.js，第 16 行字符 133

在 Iframe 中调用 Simple Modal。jQuery.min (1.7.1) 包含在 Iframe 中 SimpleModal (1.4.2) 之前。

负责显示模态对话框的代码：

```
function OpenContextByClass(cssClass, posY, posX) {
    var winHeight = $(window).height();
    var winWidth = $(window).width();

    $('.' + cssClass).modal({
        overlayClose: true,
        position: [posY, posX],
        appendTo: 'form',
        onOpen: function (dialog) { dialog.overlay.fadeIn('fast', function () { dialog.container.slideDown('fast', function () { dialog.data.fadeIn('fast'); }); }); },
        onShow: function (d) {
            var self = this;
            self.container = d.container[0];
            var title = $('.' + cssClass, self.container);
            title.show();
            $('.' + cssClass, self.container).show();

            setTimeout(function () {
                var currentPositionX = posX;
                var currentPositionY = posY;
                var currentWidth = $('.' + cssClass, self.container).width() + 50;
                var currentHeight = $('.' + cssClass, self.container).height() + 50;
                posY = (currentPositionY + currentHeight) < winHeight ? currentPositionY : (winHeight - currentHeight);
                posX = (currentPositionX + currentWidth) < winWidth ? currentPositionX : (winWidth - currentWidth);

                d.container.animate(
                                { left: posX, top: posY },
                                500,
                                function () {
                                    $('.' + cssClass, self.container).show();
                                }
                            );
            }, 550);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:55:29.750

我有同样的问题。我发现这篇文章：[http ://help.dottoro.com/ljuvxilu.php](http://help.dottoro.com/ljuvxilu.php)

*Internet Explorer 9 中删除了对动态属性的支持，因此不支持 getExpression、removeExpression、setExpression 和 recalc 方法。这些方法存在于版本 8 中，但使用它们会引发异常。*

# asp.net - 5秒后使用thickbox打开弹出窗口

> ID：10782853
> 
> 赞同：0
> 
> 时间：2012-05-28T10:09:28.113
> 
> 标签：asp.net, popup, thickbox

我正在开发网络应用程序。我想在用户进入入口页面 5 秒后使用厚框打开一个弹出窗口。

任何人都可以给出一些想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:23:03.937

您可以将`setTimeout()`from javascript 与来自thickbox 的命令一起使用，例如：

```
// when dom is ready
$(document).ready(function() {
      // set a timer thats run 5sec
     setTimeout(function(){    
      // open the pop
      var me = $('#ElementToOpen');
      var t = "title"
      var a = "openurl";
      var g = false;
      tb_show(t,a,g);    
    },5000);
}); 
```

# python - 使用 setdefault，但不想重新分配回 map/dict

> ID：10782862
> 
> 赞同：1
> 
> 时间：2012-05-28T10:09:45.713
> 
> 标签：python, setdefault

我使用 setdefault 来计算这样的实例（这是精简版）：

```
user_to_count_map = {}
for username in list_of_usernames:
    x = user_to_count_map.setdefault(username, 0)
    x += 1
    user_to_count_map[username] = x + 1
for username in sorted(usernmae_to_count_map):
    print username, user_to_count_map[username] 
```

我不喜欢分配回地图，因为真正的代码更复杂，有多个计数增加。但我似乎确实需要这样做。有没有简单的方法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T10:13:16.580

要计算元素，您应该使用[`Counter`](http://docs.python.org/dev/library/collections.html#collections.Counter)：

```
import collections
user_counts = collections.Counter(list_of_usernames)
print(user_counts.most_common()) 
```

或者， a 的[`get`](http://docs.python.org/library/stdtypes.html#dict.get)方法与的方法`dict`相同`setdefault`，但没有将值存储在 dict 中的副作用：

```
user_to_count_map = {}
for username in list_of_usernames:
    user_to_count_map[username] = user_to_count_map.get(username, 0) + 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:15:55.790

您可以使计数器成为一个包含一个元素的列表，从而有效地使其成为可变的：

```
user_to_count_map = {}
for username in list_of_usernames:
    x = user_to_count_map.setdefault(username, [0])
    x[0] += 1
for username, counter in sorted(user_to_count_map.items()):
    print username, counter[0] 
```

我不确定这是否会使您的代码更具可读性，因为显式优于隐式。

或者，如果使用 python 2.7 或更新版本（或[使用方便的 backport](http://code.activestate.com/recipes/576611-counter-class/)），您可以使用[`Counter`object](http://docs.python.org/library/collections.html#counter-objects)：

```
from collections import Counter
user_to_count_map = Counter()
for username in list_of_usernames:
    user_to_count_map[username] += 1
for username, counter in sorted(user_to_count_map.items()):
    print username, counter[0] 
```

请注意，通过使用 a`Counter`您有一个字典会*自动*为您提供默认值 0。否则它就像一个保存整数值的字典，因此您可以以任何您喜欢的方式递增和递减这些值（包括添加超过 1）。

使用 , 也可以在 collections 模块中获得相同的效果[`defaultdict`](http://code.activestate.com/recipes/576611-counter-class/)，但请注意`Counter`该类提供了功能。`defaultdict`存在于 python 2.5 及更高版本中；例子：

```
from collections import defaultdict
user_to_count_map = defaultdict(lambda: 0)
for username in list_of_usernames:
    user_to_count_map[username] += 1 
```

或者，您可以完全放弃 setdefault ，因为无论如何您总是分配回映射：

```
user_to_count_map = {}
for username in list_of_usernames:
    x = user_to_count_map.get(username, 0)
    x += 1
    user_to_count_map[x] = x
for username, counter in sorted(user_to_count_map.items()):
    print username, counter[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:41:45.233

如果你不喜欢 setdefault 并且总是从 0 开始，你可以这样做：

```
from collections import defaultdict

user_to_count_map = defaultdict(lambda: [0])
for username in list_of_usernames:
    # no set_default
    user_to_count_map[username][0] += value

for username, counter in sorted(user_to_count_map.items()):
    print username, counter[0] 
```

# c++ - cout << a++ << a; 的正确答案是什么？

> ID：10782863
> 
> 赞同：100
> 
> 时间：2012-05-28T10:09:54.620
> 
> 标签：c++, c++-faq

最近在一次采访中出现了以下客观类型的问题。

```
int a = 0;
cout << a++ << a; 
```

答案：

一种。10
湾。01
℃。未定义的行为

我回答了选项 b，即输出为“01”。

但令我惊讶的是，后来一位面试官告诉我正确答案是选项 c：未定义。

现在，我确实知道 C++ 中序列点的概念。以下语句的行为未定义：

```
int i = 0;
i += i++ + i++; 
```

但根据我对声明的理解`cout << a++ << a`，`ostream.operator<<()`将被调用两次，首先是 with `ostream.operator<<(a++)`，然后是`ostream.operator<<(a)`。

我还在 VS2010 编译器上检查了结果，它的输出也是 '01'。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-05-28T10:17:17.497

你可以想到：

```
cout << a++ << a; 
```

作为：

```
std::operator<<(std::operator<<(std::cout, a++), a); 
```

C++ 保证先前评估的所有副作用都将在[序列点](http://en.wikipedia.org/wiki/Sequence_point)执行。函数参数评估之间没有序列点，这意味着`a`可以在参数之前`std::operator<<(std::cout, a++)`或之后评估参数。所以上面的结果是不确定的。

* * *

**C++17 更新**

在 C++17 中，规则已更新。尤其：

> 在移位运算符表达式`E1<<E2`and`E1>>E2`中， 的每个值计算和副作用`E1`都排在 的每个值计算和副作用之前`E2`。

这意味着它需要代码产生结果`b`，然后输出`01`。

有关更多详细信息，请参阅[P0145R3 惯用 C++ 的优化表达式评估顺序](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0145r3.pdf)。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-05-28T10:16:27.537

从技术上讲，总的来说这是**Undefined Behavior**。

但是，答案有两个重要方面。

代码声明：

```
std::cout << a++ << a; 
```

被评估为：

```
std::operator<<(std::operator<<(std::cout, a++), a); 
```

该标准没有定义函数参数的评估顺序。
所以要么：

*   `std::operator<<(std::cout, a++)`首先评估或
*   `a`首先评估或
*   它可能是任何实现定义的顺序。

根据标准，此订单**未指定**^([参考 1])。

^([参考 1]) **C++03 5.2.2 函数调用**
**第 8 段**

> **参数的评估顺序未指定**。参数表达式评估的所有副作用在输入函数之前生效。后缀表达式和参数表达式列表的求值顺序未指定。

此外，在对函数的参数求值之间没有序列点，但序列点仅在对所有参数进行求值后才存在^([Ref 2])。

^([参考 2]) **C++03 1.9 程序执行 [intro.execution]：**
**第 17 段：**

> 调用函数时（无论函数是否内联），在对所有函数参数（如果有）求值之后都会有一个序列点，该序列点发生在函数体中的任何表达式或语句执行之前。

请注意，这里的值`c`被多次访问而没有中间序列点，关于这个标准说：

^([参考 3]) **C++03 5 表达式 [expr]：**
**第 4 段：**

> ....
> **在前一个和下一个序列点之间，一个标量对象的存储值最多只能通过表达式的评估修改一次。此外，只能访问先验值以确定要存储的值**。对于完整表达式的子表达式的每个允许排序，都应满足本段的要求；**否则行为未定义**。

代码`c`在不干预序列点的情况下多次修改，并且没有被访问以确定存储对象的值。这明显违反了上述条款，因此标准规定的结果是**未定义行为**^([参考 3])。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-05-28T11:27:27.860

序列点仅定义*部分*排序。在您的情况下，您有（一旦完成重载解决方案）：

```
std::cout.operator<<( a++ ).operator<<( a ); 
```

在`a++`第一次调用和第一次调用 `std::ostream::operator<<`之间有一个序列点，在第二次`a`和第二次调用之间有一个序列点，但是在和`std::ostream::operator<<`之间没有序列点；唯一的排序约束是在第一次调用之前完全评估（包括副作用），并且在第二次调用之前完全评估第二个。（也有因果顺序约束：第二次调用不能在第一次调用之前，因为它需要第一次调用的结果作为参数。）§5/4 (C++03) 指出：`a++``a``a++``operator<<``a``operator<<``operator<<`

> 除非另有说明，否则未指定单个运算符的操作数和单个表达式的子表达式的求值顺序，以及副作用发生的顺序。在前一个和下一个序列点之间，一个标量对象的存储值最多只能通过表达式的评估修改一次。此外，只能访问先验值以确定要存储的值。对于完整表达式的子表达式的每个允许排序，都应满足本段的要求；否则行为未定义。

您的表达式的允许顺序之一是`a++`, `a`, 第一次调用`operator<<`, 第二次调用`operator<<`; `a`这会修改( )的存储值`a++`，并访问它而不是确定新值（第二个`a`），行为未定义。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-29T21:06:08.217

正确答案是质疑问题。这种说法是不可接受的，因为读者看不到明确的答案。另一种看待它的方式是，我们引入了副作用 (c++)，使语句更难解释。简洁的代码很棒，只要它的含义很清楚。

# jquery - 将 JSONArray 传递给 JQuery 输出对象

> ID：10782864
> 
> 赞同：0
> 
> 时间：2012-05-28T10:10:09.143
> 
> 标签：jquery, highcharts, arrays

我想使用 JSON 格式将一个系列传递给 HighCharts。我在后端成功生成了格式。而且我得到的回应如下：

```
[
    {
        "type":"pie",
        "name":"HighCharts Pie Chart",
        "data": [["xyz",30],["abc",32]]
    }
] 
```

我想像在 HighChart 中一样使用这个 JSONArray。如果我想打印它，它会得到`[Object object]`. 我也试过分配给`div`。它也不起作用。

你能告诉我如何在 HighCharts jQuery 中直接使用它吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:50:11.017

我自己解决了这个问题:)

实际上 document.write 将字符串作为参数，所以当我试图打印响应时，它的类型转换为字符串，这就是它打印 [Object object] 的原因。

解决方案很简单，只是我已将响应分配给 highchart 中的系列。

```
option.series = response; 
```

它的工作非常好:)

# sql-server - Sharepoint Server：将数据移动到 sql server 的分步指南

> ID：10782867
> 
> 赞同：1
> 
> 时间：2012-05-28T10:10:12.663
> 
> 标签：sql-server, sharepoint, migration

我有一个用于多个客户端的共享点服务器，我使用默认设置安装在我的内部服务器上。现在我想将其移至网站主机。

我需要将所有这些数据从集成 SP 服务器传输到 SQL 服务器，但我找不到实现此目的的分步指南。我什至不知道数据当前存储在哪里（我假设在当前运行 sharepoint 的本地文件系统中）如何导出然后重新导入，然后在新的托管环境中将其绑定到新的 Sharpoint 站点。

有没有人有关于如何实现这一目标的分步指南？我似乎找不到使用谷歌的解决方案。

提前致谢

斯图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T00:19:29.910

好的，这是一个起点：

1.  询问您的托管服务提供商他们支持什么格式。

然后从那里工作...

更有帮助的是，看看使用[Backup-SPSite](http://technet.microsoft.com/en-us/library/ff607901.aspx) cmdlet，而不是考虑 SQL 级别。您可以备份单个站点/网站，然后使用[Restore-SPSite](http://technet.microsoft.com/en-us/library/ff607788.aspx)将其放在其他地方。

# jquery - 在 jQuery datepicker 中捕捉用户 是否点击了上个月或下个月

> ID：10782871
> 
> 赞同：1
> 
> 时间：2012-05-28T10:10:19.353
> 
> 标签：jquery, datepicker

我在 jQuery datepicker 的 onChangeMonthYear 事件处理程序中编写自定义代码。有没有办法可以确定用户是单击月份按钮上的上一个还是下一个？初始选项看起来有点像这样

```
dpOpts = { dateFormat: dpDisplayFormat,
        beforeShowDay: setSelectable,
        beforeShow: handleBeforeShow,
        onChangeMonthYear: handleMonthYearChange,
        ...} 
```

在我的 handleMonthYearChange 中，我想访问`window.event.target.id`或其他一些属性`inst`告诉我用户正在向哪个方向缠绕日历。我尝试了一个内联调用，以便我可以手动传递事件，但内联函数无法直接访问年和月参数。

有任何想法吗？

谢谢 d'avance :) 马克

# windows-phone-7 - 从 XNA 下载远程图片（在 Windows Phone 下执行）

> ID：10782872
> 
> 赞同：0
> 
> 时间：2012-05-28T10:10:23.080
> 
> 标签：windows-phone-7, xna

有没有办法从 XNA 加载远程图片？我有 http 网址。谢谢。

JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:33:31.407

您可以使用来自 silverlight 的库。

像这样的东西。

```
 Texture2D texture;

    HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result);
    using (Stream stream = response.GetResponseStream())
    {
       texture = Texture2D.FromStream(gd.GraphicsDevice, stream); 
    } 
```

[读这个](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.95%29.aspx)

# c# - Web 服务中的异步调用

> ID：10782874
> 
> 赞同：1
> 
> 时间：2012-05-28T10:10:30.600
> 
> 标签：c#, web-services, windows-phone-7, asynchronous

我正在为我的 wp7 应用程序使用 Web 服务，但我很难确定对服务的异步调用是否返回值。我有一个验证取决于响应（结果）。下面是调用 Web 服务的代码片段以及应该对 UI 进行的适当更改。

```
private void TLP_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    objevnt.indexChanged(1, lpcountry.SelectedIndex, "depart");
    if(objevnt.CName.Count>0)
    lpcity.ItemsSource = objevnt.GetCityDetails();
}
public void indexChanged(int Travel,int index,string journey)
{
    string slCountry = null;
    switch (Travel)
    {
        case 1:
            slCountry = lstCtryDetails.lstCtrylist[index].countryId.ToString();
            //= "depart";
            travelMode = journey;
            break;
        case 2:
                slCountry = lstCtryDetails.lstCtrylist[index].countryId.ToString();
                travelMode = journey;
                break;
        case 3:
                slCountry = lstCtryDetails.lstCtrylist[index].countryId.ToString();
                travelMode = journey;
                break;
    }

    GetCities = "http://Solutions/mobileservice/Citylist/countrycode/" + slCountry;
    WebClient myClientcity = new WebClient();
    myClientcity.DownloadStringAsync(new Uri(GetCities, UriKind.RelativeOrAbsolute));
    myClientcity.DownloadStringCompleted += new DownloadStringCompletedEventHandler(myClientcity_DownloadStringCompleted);
}

private void myClientcity_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    string _Countries = null;
    if (e.Error == null)
    {
        _Countries = e.Result;
        parseCtry(_Countries);
    }
}

private void parseCtry(string xml)
{
    XDocument myXdoc = XDocument.Load(new StringReader(xml));
    IEnumerable<XElement> lstElm = myXdoc.Descendants("GetCityList");
    lstCtryDetails.lstCitylist.Clear();
    foreach (XElement ele in lstElm.Elements())
    {
        if (ele.Name.ToString() != "Message")
        {
            // Fetch t Details
            if (!ele.IsEmpty && ele.Name.ToString() == "City")
            {
                lstCtryDetails.lstCitylist.Add(new cityList() { CityId = ele.Element("CityCode").Value, CityName = ele.Element("CityName").Value, CityLatitude = ele.Element("Latitude").Value, CityLongitude = ele.Element("Longitude").Value });
                CName.Add(ele.Element("CityName").Value);
                //Countchk = true;
            }
        }
    }

    lsCity = lstCtryDetails.lstCitylist;

    //chkloop = true;
}

public List<cityList> GetCityDetails()
{
    if (lsCity.Count > 0)
        return lsCity;
    return null;
} 
```

现在我需要从 getcitydetails() 方法中获取值列表。但由于异步调用，这是返回 null 。如何获取列表计数，进行适当的验证。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:35:44.560

您是否尝试在执行 webrequest 之前添加回调？

```
myClientcity.DownloadStringCompleted += new DownloadStringCompletedEventHandler(myClientcity_DownloadStringCompleted);
myClientcity.DownloadStringAsync(new Uri(GetCities, UriKind.RelativeOrAbsolute)); 
```

=== 更新 ===

从您的评论中，我想我理解这个问题。您想要的是将[数据绑定](https://www.google.co.uk/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#sclient=psy-ab&hl=en&site=webhp&q=databinding%20windows%20phone%207&oq=data%20binding%20windows%20&aq=2s&aqi=g-s3g-K1&aql=&gs_l=serp.3.2.0i10l3j0i30.1228.2456.0.3575.10.9.0.0.0.0.126.652.7j2.9.0...0.0._6rnRxTuc2Y&pbx=1&bav=on.2,or.r_gc.r_pw.,cf.osb&fp=56d372ad768dfec4&ion=1&biw=1383&bih=828)到`ObservableCollection<T>`您的 UI 元素`lpCity`。例如，如果`lpCity`数据绑定到`lsCity`（实现`ObservableCollection<T>`），一旦`lpCity`通过异步 Web 请求更新，UI 元素将自动更新。

我会为你写一个代码框架，我不在我的 Windows PC 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:27:04.713

您在返回结果`ItemsSource`之前设置了可能`WebClient`，也没有机会调用`parseCtry`.

如果你搬家：

```
lpcity.ItemsSource = objevnt.GetCityDetails(); 
```

到末尾`parseCtry`（即评论所在的`//chkloop = true;`位置），然后它将评估为具有正确的计数 - 但您可能会遇到跨线程 UI 访问问题，但您应该能够检查类似（在开头`DownloadStringCompleted`）的内容：

```
if (Dispatcher.CheckAccess())
    Dispatcher.BeginInvoke(new DownloadStringCompletedEventHandler(myClientcity_DownloadStringCompleted), xml) // put us back on the UI thread if required 
```

您最好将类型更改`lsCity`为 an`ObservableCollection<cityList>`并绑定到它。

# java - Java 7 中泛型类变量访问的变化

> ID：10782876
> 
> 赞同：17
> 
> 时间：2012-05-28T10:10:44.557
> 
> 标签：java, generics, compiler-construction, java-7, access-modifiers

下面是一些使用 Java 6 编译但在 Java 7 中不编译的代码的简单示例。

```
public class Test<T extends Test> {

  private final int _myVar;

  public Test(int myVar) {
    _myVar = myVar;
  }

  public int get(TestContainer<T> container){
    T t = container.get();
    return t._myVar;
  }

  private static class TestContainer<T extends Test> {
    private final T _test;
    private TestContainer(T test) {
      _test = test;
    }
    public T get(){
      return _test;
    }
  }
} 
```

在 Java 7 中，它无法在`get(TestContainer<T> container)`方法中编译，并出现错误：

> 错误：_myVar 在测试中具有私有访问权限

我不明白为什么这不再编译 - 在我看来它应该。变量`t`的类型`T`是必须扩展的`Test`。它试图从类中访问`_myVar`实例的字段。`Test``Test`

事实上，如果我将方法更改`get(TestContainer<T> container)`为以下，它会编译（没有警告）：

```
public int get(TestContainer<T> container){
  Test t = container.get();
  return t._myVar;
} 
```

*   为什么这不再编译？
*   这是 Java 6 中的错误吗？如果是，为什么？
*   这是 Java 7 中的错误吗？

我有一个谷歌并在 Oracle 错误数据库中搜索，但没有找到任何关于此的...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T12:16:10.670

> [§4.9](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.9) ...然后交集类型与具有空主体的类类型（§8）具有相同的成员，直接超类Ck和直接超接口T1'，...，Tn'，在同一个包中声明出现交集类型。

根据我对 JLS 部分的理解，您使用类型变量的情况`<T extends Test>`会创建以下交集：

```
package <the same as of Test>;

class I extends Test {} 
```

因此，当您访问类型的成员时，`T`您实际上访问的是交集类型的成员`I`。由于访问此类成员的子类型永远不会继承私有成员，因此会因编译错误而失败。另一方面，由于交集是允许的，因此可以访问包私有（默认）和受保护的成员

> ...在出现交集类型的同一包中声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T22:27:43.737

一种解决方法是将通用实例转换为声明私有字段的具体超类型，例如

```
public int get(TestContainer<T> container){
  T t = container.get();
  return ((Test) t)._myVar;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T03:46:18.483

请参阅@pingw33n 的评论以获取答案，但解决此问题的方法是删除嵌套类上的泛型参数。除非您有一个内部和外部 T 可以不同的用例，否则它们是多余的。他们所做的只是造成这种悲伤。

# ruby-on-rails - Gemfile.lock 中是否存在仅限 Windows 的 gem 的问题？

> ID：10782877
> 
> 赞同：2
> 
> 时间：2012-05-28T10:11:05.540
> 
> 标签：ruby-on-rails, ruby, windows, gem, bundler

在 Windows 上运行 bundle install 时，Gemfile.lock 会获得一些仅适用于 Windows 的 gem，例如：

```
bcrypt-ruby (3.0.1)
bcrypt-ruby (3.0.1-x86-mingw32) 
```

Gemfile.lock 上的那些并将它们部署到生产（Linux）有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:37:37.043

如果捆绑程序较新版本`1.1.2`，它将`bcrypt-ruby (3.0.1-x86-mingw32)` 自动删除。

以下是围绕该问题的讨论：

[https://github.com/carlhuda/bundler/issues/635](https://github.com/carlhuda/bundler/issues/635)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:20:09.463

在 Gemfile.lock 中包含许多仅限 Windows 的语句并部署到 Heroku 和我们自己的服务器之后，我可以确认不，这不是问题，至少对于最近的 bundler 副本没有问题（当时是 1.1.4这篇文章）。

# c++ - 测试一个函数是虚函数还是构造函数

> ID：10782878
> 
> 赞同：2
> 
> 时间：2012-05-28T10:11:11.297
> 
> 标签：c++, reflection, coding-style, constructor, destructor

我正在阅读Scott Meyer 的[Never Call Virtual Functions during Construction or Destruction](http://www.artima.com/cppsource/nevercall.html)关于基本 C++ 用法的文章。

我想知道 g++ 是否有一些编译器标志来警告这种真正有效的错误编码。如果不是，有什么方法可以编写代码来执行此检查？

如果我要编写这样的检查代码，我会通过使用堆栈并在每次调用时插入一条信息来完成这项工作（一种实现调用堆栈的方法。

我仍然需要一种方法来测试一个函数是虚函数还是构造函数：你知道有没有办法做到这一点？类似于.NET“反思”的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:21:21.233

```
> cat nevercall.cpp             
class Transaction {
public:
    Transaction();
    virtual void logTransaction() const = 0;

    // ...
};

Transaction::Transaction()
{
    //...
    logTransaction();
}

class BuyTransaction: public Transaction {
public:
    virtual void logTransaction() const;

    //...
};

class SellTransaction: public Transaction {
public:
    virtual void logTransaction() const;

    // ...
};

int main()
{
    BuyTransaction b;
} 
```

当（且仅当）是*pure*时使用`-Weffc++`警告，就像在 Meyer 的示例代码中一样：`virtual void Transaction::logTransaction() const`

 *```
> g++ -Weffc++ nevercall.cpp -o nevercall
nevercall.cpp:1:7: warning: 'class Transaction' has virtual functions and accessible non-virtual destructor [-Wnon-virtual-dtor]
nevercall.cpp: In constructor 'Transaction::Transaction()':
nevercall.cpp:12:20: warning: pure virtual 'virtual void Transaction::logTransaction() const' called from constructor [enabled by default]
nevercall.cpp: At global scope:
nevercall.cpp:15:7: warning: 'class BuyTransaction' has virtual functions and accessible non-virtual destructor [-Wnon-virtual-dtor]
nevercall.cpp:22:7: warning: 'class SellTransaction' has virtual functions and accessible non-virtual destructor [-Wnon-virtual-dtor] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T23:32:21.117

[PC-Lint](http://www.gimpel.com/html/pcl.htm)会做到的！

我在这个测试程序上运行它：

```
#include <stdio.h>

class Base
{
public:
        Base() { moo(); }
        virtual ~Base() { ; }
        virtual void moo(void) { printf("Base::moo\n"); }
};

class Derived : public Base
{
public:
        Derived() { ; }
        virtual void moo(void) { printf("Derived::moo\n"); }
};

int main(void)
{
        Derived j; // Outputs 'Base::moo'
} 
```

它抱怨道：

> 警告 1506：在构造函数或析构函数中调用虚函数“Base::moo(void)”*

# javascript - 检测html5画布是否暂停

> ID：10782886
> 
> 赞同：2
> 
> 时间：2012-05-28T10:11:46.057
> 
> 标签：javascript, html5-canvas

我正在使用 HTML5 画布和 JavaScript 开发游戏。

为了给游戏计时，我从现在开始计算系统毫秒数，从最后一帧发生时减去系统毫秒数，这样我就得到了最后一帧渲染所用的毫秒数。

这工作正常，但如果我在 Firefox 中打开一个新选项卡，画布似乎被 Firefox 暂停，当我回来时，当前系统时间比系统时间晚几秒钟，最后一帧发生并且一切都跳转，因为它的移动是相对于最后一帧时间的。

我需要一些方法来检测画布目前没有运行，或者 Firefox（当然还有其他浏览器）已经切换到另一个选项卡，所以我可以暂停我的游戏，并在返回时更新“最后一帧”时间'以防止跳跃。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:28:09.903

您还可以使用 window onblur 事件来检测选项卡何时更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:07:12.070

这只是时钟跳变的原因之一。您仍然容易受到强制进程睡眠、高系统负载、计算机睡眠模式、休眠和其他十几种情况的影响。

您需要限制时间增量。在我的项目（爱好游戏）中，我发现 80 毫秒是功能最大值。

（此外，没有上限，碰撞检测要困难得多。）

# set - Notepad ++如何删除一行中的第二组相同字符

> ID：10782888
> 
> 赞同：0
> 
> 时间：2012-05-28T10:11:56.667
> 
> 标签：set, character, notepad++

我有一个包含多行的文本文件，每行具有以下格式

```
string1/string2/string3 
```

所有 3 个字符串都是任意的。我想删除`/string3`所有行。

有人有什么建议吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:18:48.323

1.  `CTRL + H`

2.  选择`Regular expression`

3.  输入`/(\w)+$`_`Find what`

4.  什么都换

当然，您可能不得不根据您的数据摆弄正则表达式，但这就是要走的路。

# c++ - 在一个点周围创建一个圆圈中的对象

> ID：10782890
> 
> 赞同：0
> 
> 时间：2012-05-28T10:11:59.840
> 
> 标签：c++, trigonometry, geometry, irrlicht

我需要围绕空间中的参考点创建一圈规则间隔的门。每次程序运行时，圆圈中都会有不同数量的项目，因此它会自动重新调整以适应增加的项目数量。我知道这更像是一个数学问题而不是编程问题，但我很难过！以下代码与我得到的一样接近：

```
block->setPosition(core::vector3df(sin(segdeg*itemnumber)*radius+referencepoint.X,
                                   0,
                                   cos(segdeg*itemnumber)*radius+referencepoint.Z)); 
```

block 是对象，并且为每个项目运行此代码。segdeg 是 360/项目数。也就是说，SEGment DEgrees。半径是项目需要离中心点多远。Itemnumber 是相关项目的索引 - 它是哪个编号项目。

出于某种原因，此代码使每扇门都非常接近，但仍然偏离约 10-15 度。（虽然第一扇门总是正确的）但是这些物品离中心点的距离都是正确的。我确信这是一个非常明显的已回答问题，但我已经好几个小时没能解决它，而且我已经用谷歌搜索了我的屁股。

谁能修复我的算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:14:45.587

`sin`并`cos`以弧度而不是度数表示他们的论点。你想要`segrad = 2 * pi / the_number_of_items`（SEGment RADians）而不是`segdeg = 360.0 / the_number_of_items`（SEGment DEGrees）。

您的实现可能会为 pi 提供一个值，但标准中没有，因此您可能必须使用`boost::math::constants::pi<double>()`或放入自己的值。

您的第一项是正确的，因为 0 在任何方面都是 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T10:51:43.403

```
int doors = 5;
double rotation = 2 * M_PI / doors;
for(int door = 0; door < doors; ++door)
{
    double door_rotation = door * rotation;
    double door_x = reference_x + cos(door_rotation);
    double door_y = reference_y + sin(door_rotation);
} 
```

# jquery - 1.5.1 和 1.7.2 之间的相邻兄弟选择器不一致

> ID：10782894
> 
> 赞同：1
> 
> 时间：2012-05-28T10:12:06.747
> 
> 标签：jquery, jquery-selectors

HTML：

```
<div>
    <div class="t-dropzone">
        <input id="files" >
    </div>
    <ul></ul>
</div> 
```

jQuery

```
$('#files').parents('.t-dropzone:first + ul') 
```

在`jquery-1.5.1.min.js`它返回一个`ul`元素的情况下，但`jquery-1.7.2.min.js`返回`null`.

哪个库包含错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:15:37.357

该语句应该返回一个空的 jQuery 对象。您正在寻找`#files`该 matches的祖先`.t-dropzone:first + ul`，因此该祖先必须是一个`ul`元素，其中没有。

稍微更详细一点，该选择器会找到`ul`紧跟第一个元素的`.t-dropzone`元素。第一个`.t-dropzone`元素是 的祖先`#files`，紧随其后的是 a `ul`，但它`ul`不是 的父元素`#files`，因此不应返回。

因此，要回答您的问题，jQuery 1.5.1（及以下）包含错误，并且在 jQuery 1.7.1 中已修复（据我所知，通过更改[jsfiddle.net](http://jsfiddle.net/47zNV/)上的 jQuery 版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:19:04.600

它不会那样工作。您需要选择第`div`一个，然后获取它的`ul`兄弟：

```
$('#files').closest('.t-dropzone').next('ul') 
```

有关原因的详细解释，请参阅[詹姆斯的回答。](https://stackoverflow.com/a/10782951/298479)

# objective-c - 无法“点击”广告

> ID：10782904
> 
> 赞同：1
> 
> 时间：2012-05-28T10:12:37.247
> 
> 标签：objective-c, ios, cocos2d-iphone

我的 applicationDidFinishLaunching 方法中有以下内容：

```
ADBannerView* iAdView = [[ADBannerView alloc] initWithFrame:CGRectZero];
iAdView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
[[[CCDirector sharedDirector] openGLView] addSubview:iAdView]; 
```

广告可见，但我无法点击其中任何一个。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:04:01.577

如果您在控制台中看到一个空白的白框和一个未处理的错误（“没有委托或委托未实现 didFailToReceiveWithError”），那么触摸不起作用，因为尚未收到任何广告。如果要处理接收错误，则需要实现委托方法。

如果您稍等片刻，可能会出现一个广告。然后你就可以和它互动了。如果没有，可能是您尚未在 iTunes Connect 中注册 iAd 计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:53:27.890

查看这些链接，您似乎并不了解 iAd 实际需要的所有委托方法和设置。

[http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Reference/iAd_ReferenceCollection/_index.html](http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Reference/iAd_ReferenceCollection/_index.html)

[http://developer.apple.com/library/ios/documentation/userexperience/Reference/ADBannerView_Ref/Reference/Reference.html](http://developer.apple.com/library/ios/documentation/userexperience/Reference/ADBannerView_Ref/Reference/Reference.html)

[http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Conceptual/iAd_Guide/](http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Conceptual/iAd_Guide/)

# java - Liferay 重启问题

> ID：10782905
> 
> 赞同：0
> 
> 时间：2012-05-28T10:12:39.330
> 
> 标签：java, configuration, jboss, liferay

我是菜鸟。我刚刚用 jboss 7.0.2 下载了 liferay。我通过观看 youtube 将它安装在 mt 笔记本电脑上。我只是使用命令行控制台开始的。我成功地设置并在本地主机上运行。完成后我关闭了命令行控制台。

然后我尝试通过浏览器打开它`localhost`，但它现在无法正常工作。现在我不能回到平台。

我尝试再次进入cmd并输入

```
{the folder}\jboss-7.0.2\bin\standalone.bat 
```

它告诉我它正在调用另一个名为“standalone.conf.bat”的文件

现在我的环境变量是

```
JAVA_HOME C:\Program Files\Java\jdk1.7.0_04\bin
JAVA C:\Program Files\Java\jdk1.7.0_04\bin 
```

我需要开始事情开始..请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:44:55.920

如果您使用 Tomcat（根据您最后的评论），那么您应该转到 bin/startup.bat 文件（windows）或 startup.sh（linux）。

现在 ：

1）如果您的控制台没有启动，这意味着tomcat配置（CATALINA_HOME变量）或java配置（JAVA_HOME）有问题

2) 如果它启动，但在配置数据时挂起（默认 sql 脚本），那么您在 portal.properties 文件或默认 HS SQL DB 中所做的数据库配置存在问题。

3）如果它挂在其他地方，服务器的默认端口一定有问题。

希望这可以帮助。

# jboss - 如何在安装过程中检测 Jboss 版本？

> ID：10782906
> 
> 赞同：0
> 
> 时间：2012-05-28T10:12:42.443
> 
> 标签：jboss, jboss7.x

我们目前正在从 Jboss AS 4.2.3 迁移到 Jboss AS 7.1.1。在运行安装过程时，我们需要检测客户端是否已经安装了 Jboss 以及它是哪个版本。

据我所知，在 Jboss 4.2.3 中有一个 readme.html 文件，而在 Jboss 7 下它被称为 readme.txt，有没有更统一/通用的方法来检测它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:00:57.663

如果有一个standalone.xml 文件应该意味着它是jboss as 7

# javascript - jQuery 上线还是直播？

> ID：10782910
> 
> 赞同：1
> 
> 时间：2012-05-28T10:12:59.853
> 
> 标签：javascript, dom, jquery

我最近向我构建的应用程序部署了无限滚动，发现有时我需要单击两次才能发生某些事情。

我的应用程序有喜欢，一旦加载了dom，我需要在它改变之前点击两次喜欢按钮，然后一旦我点击其他按钮就可以了，但我总是必须点击一次应用程序几乎“唤醒” "

有更好的解决方案吗？

```
$(document).ready(function() {
    function runUpdate(url, item) {
        $.ajax({
            type: "GET",
            url: url,
            cache: false,
            success: function(data){
                if (data == '200') {
                    removeAddColor(item);
                }
            }
        });
    }

    $('.mini-like').live('click', function(){
        $('.mini-like').toggle(
            function() {
                var item = $(this);
                var href = item.attr('href');
                runUpdate(href, item);
            },
            function() {
                var item = $(this);
                var rel = item.attr('rel');
                runUpdate(rel, item);
            }
        );
    });

    function removeAddColorFollow(item) {
        var href = $(this).attr('href');
        var rel = $(this).attr('rel');
        if (item.hasClass('btn-success')) {
            $(item).removeClass('btn-success').attr('href', href).attr('rel', rel);
            $(item).find('i').removeClass('icon-white');
        } else {
            $(item).addClass('btn-success').attr('href', rel).attr('rel', href);
            $(item).find('i').addClass('icon-white');
        };
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:22:49.107

好吧，除非我完全错了，否则您只需在单击一次后将切换事件附加到 .mini-like 。尝试更换

```
$('.mini-like').live('click', function() {... 
```

和

```
$(function() {... 
```

在文档就绪而不是单击时附加切换事件处理程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:17:24.847

代码`$('.mini-like').live('click',...`应该放在里面`$(document).ready()`

您可以使用`.on`. `.live`作为`.on`一种新方法，`.live`现在已弃用，您应该使用`.on`

**更新** 重写的版本将是

```
$(document).ready(function(){
 $('.mini-like').on('click', function(){
    $('.mini-like').toggle(
        function() {
            var item = $(this);
            var href = item.attr('href');
            runUpdate(href, item);
        },
        function() {
            var item = $(this);
            var rel = item.attr('rel');
            runUpdate(rel, item);
        }
    );
 });

});

function runUpdate(url, item) {
    $.ajax({
        type: "GET",
        url: url,
        cache: false,
        success: function(data){
            if (data == '200') {
                removeAddColor(item);
            }
        }
    });
}

function removeAddColorFollow(item) {
    var href = $(this).attr('href');
    var rel = $(this).attr('rel');
    if (item.hasClass('btn-success')) {
        $(item).removeClass('btn-success').attr('href', href).attr('rel', rel);
        $(item).find('i').removeClass('icon-white');
    } else {
        $(item).addClass('btn-success').attr('href', rel).attr('rel', href);
        $(item).find('i').addClass('icon-white');
    };
} 
```

# exception - *._FieldSerializer 上的错误，GWT 的生成类

> ID：10782917
> 
> 赞同：2
> 
> 时间：2012-05-28T10:13:23.567
> 
> 标签：exception, gwt, serialization, rpc

我编写了自己的异常类型（从 java Exception 扩展）。我在 GWT 生成的类 xxx_FieldSerializer 上遇到了异常。错误消息如下所示：

```
 Object reference not set to an instance of an object.    
    com.xxx.shared.csharpsystem.exception.MyException_FieldSerializer   Method name : instantiate  LINE_NUMER : 16 
            com.xxx.shared.csharpsystem.exception.MyException_FieldSerializer   Method name : create  LINE_NUMER : 25 
            com.google.gwt.user.client.rpc.impl.SerializerBase   Method name : instantiate  LINE_NUMER : 115 
            com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader   Method name : deserialize  LINE_NUMER : 111 
            com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader   Method name : readObject  LINE_NUMER : 119 
            com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter   Method name : onResponseReceived  LINE_NUMER : 216 
            com.google.gwt.http.client.Request   Method name : fireOnResponseReceived  LINE_NUMER : 287 
            com.google.gwt.http.client.RequestBuilder$1   Method name : onReadyStateChange  LINE_NUMER : 395 
            sun.reflect.NativeMethodAccessorImpl   Method name : invoke0  LINE_NUMER : -2 
            sun.reflect.NativeMethodAccessorImpl   Method name : invoke  LINE_NUMER : 57 
            sun.reflect.DelegatingMethodAccessorImpl   Method name : invoke  LINE_NUMER : 43 
            java.lang.reflect.Method   Method name : invoke  LINE_NUMER : 601 
            com.google.gwt.dev.shell.MethodAdaptor   Method name : invoke  LINE_NUMER : 103 
            com.google.gwt.dev.shell.MethodDispatch   Method name : invoke  LINE_NUMER : 71 
            com.google.gwt.dev.shell.OophmSessionHandler   Method name : invoke  LINE_NUMER : 172 
            com.google.gwt.dev.shell.BrowserChannelServer   Method name : reactToMessagesWhileWaitingForReturn  LINE_NUMER : 337 
            com.google.gwt.dev.shell.BrowserChannelServer   Method name : invokeJavascript  LINE_NUMER : 218 
            com.google.gwt.dev.shell.ModuleSpaceOOPHM   Method name : doInvoke  LINE_NUMER : 136 
            com.google.gwt.dev.shell.ModuleSpace   Method name : invokeNative  LINE_NUMER : 561 
            com.google.gwt.dev.shell.ModuleSpace   Method name : invokeNativeObject  LINE_NUMER : 269 
            com.google.gwt.dev.shell.JavaScriptHost   Method name : invokeNativeObject  LINE_NUMER : 91 
            com.google.gwt.core.client.impl.Impl   Method name : apply  LINE_NUMER : -1 
            com.google.gwt.core.client.impl.Impl   Method name : entry0  LINE_NUMER : 213 
            sun.reflect.NativeMethodAccessorImpl   Method name : invoke0  LINE_NUMER : -2 
            sun.reflect.NativeMethodAccessorImpl   Method name : invoke  LINE_NUMER : 57 
            sun.reflect.DelegatingMethodAccessorImpl   Method name : invoke  LINE_NUMER : 43 
            java.lang.reflect.Method   Method name : invoke  LINE_NUMER : 601 
            com.google.gwt.dev.shell.MethodAdaptor   Method name : invoke  LINE_NUMER : 103 
            com.google.gwt.dev.shell.MethodDispatch   Method name : invoke  LINE_NUMER : 71 
            com.google.gwt.dev.shell.OophmSessionHandler   Method name : invoke  LINE_NUMER : 172 
            com.google.gwt.dev.shell.BrowserChannelServer   Method name : reactToMessages  LINE_NUMER : 292 
            com.google.gwt.dev.shell.BrowserChannelServer   Method name : processConnection  LINE_NUMER : 546 
            com.google.gwt.dev.shell.BrowserChannelServer   Method name : run  LINE_NUMER : 363 
            java.lang.Thread   Method name : run  LINE_NUMER : 722 
```

并且文件 MyException.java 的代码是：

```
 public class MyException extends Exception implements java.io.Serializable
    {
         public MyException ()
         {
              super();
         }

public MyException (String Exception, String StackTrace)
{
    super(Exception);
    if (!StackTrace.equals(""))
    {
        StackTraceElement[] xStackTraceElementColl = new StackTraceElement[1];

        String strDeclaringClass = "";
        String strMethodName = StackTrace;
        String strFileName = "";
        int iLineNo = 0;
        xStackTraceElementColl[0] = new StackTraceElement(strDeclaringClass, strMethodName, strFileName, iLineNo);
        this.setStackTrace(xStackTraceElementColl);
    }
} 
```

}

我不知道为什么会这样。感谢您的帮助。

# android - 如何在渲染脚本中为网格（不是 a3d 对象！）加载纹理？

> ID：10782935
> 
> 赞同：1
> 
> 时间：2012-05-28T10:14:27.067
> 
> 标签：android, textures, mesh, renderscript

我一直在使用方程式创建网格，但应用纹理似乎是一个问题。我创建了一个立方体和圆柱体，但是当应用纹理时，没有分配纹理，只有对象可见。我在这个链接的帮助下成功地创建了一个圆柱体 -[如何在渲染脚本中制作一个圆柱体](https://stackoverflow.com/questions/10732813/how-to-make-a-cylinder-in-renderscript) ，我已经创建了一个自己的立方体。这 2 个对象是可见的，但不是应用于它们的纹理。我只能为我创建的 a3d 对象分配纹理，但不能为使用方程式创建的网格分配纹理。有什么想法我哪里出错了吗？请提出可能是什么问题，或者无法为此类网格应用纹理？

我使用的 CustomShader 是 shaderv.glsl 和 shaderf.glsl - 与示例中的相同

```
public Mesh cubeMesh(float ltf, float lbf, float rbf, float rtf, float ltb, float lbb, float rbb, float rtb){

    Mesh.TriangleMeshBuilder mbo= new TriangleMeshBuilder(mRSGL,3, Mesh.TriangleMeshBuilder.TEXTURE_0);
    //front
    mbo.setTexture(0, 0); 
    mbo.addVertex(-lbf, -lbf,lbf);  //lbf
    mbo.setTexture(1, 0);
    mbo.addVertex( rbf, -rbf,rbf);  //rbf
    mbo.setTexture(1, 1);
    mbo.addVertex( rtf, rtf, rtf);  //rtf
    mbo.setTexture(0, 1);
    mbo.addVertex(-ltf, ltf, ltf);  //ltf

    //top
    mbo.setTexture(0, 0);
    mbo.addVertex(-ltf, ltf,ltf);   //ltf
    mbo.setTexture(1, 0);
    mbo.addVertex(rtf, rtf,rtf);    //rtf
    mbo.setTexture(1, 1);
    mbo.addVertex(rtb, rtb,-rtb);   //rtb
    mbo.setTexture(0, 1);
    mbo.addVertex(-ltb, ltb,-ltb);  //ltb

    //back
        mbo.setTexture(0, 0);
    mbo.addVertex(rbb, -rbb,-rbb);  //rbb
    mbo.setTexture(1, 0);
    mbo.addVertex(-lbb, -lbb,-lbb); //lbb
    mbo.setTexture(1, 1);
    mbo.addVertex(-ltb, ltb,-ltb);  //ltb
    mbo.setTexture(0, 1);
    mbo.addVertex(rtb, rtb,-rtb);   //rtb

    //bottom
    mbo.setTexture(0, 0);
    mbo.addVertex(-lbb, -lbb,-lbb); //lbb
    mbo.setTexture(1, 0);
    mbo.addVertex(rbb, -rbb,-rbb);  //rbb
    mbo.setTexture(1, 1);
    mbo.addVertex(rbf, -rbf,rbf);   //rbf
    mbo.setTexture(0, 1);
    mbo.addVertex(-lbf, -lbf,lbf);  //lbf

    //left
    mbo.setTexture(0, 0);
    mbo.addVertex(-lbb, -lbb,-lbb); //lbb
    mbo.setTexture(1, 0);
    mbo.addVertex(-lbf, -lbf,lbf);  //lbf
    mbo.setTexture(1, 1);
    mbo.addVertex(-ltf, ltf,ltf);   //ltf
    mbo.setTexture(0, 1);
    mbo.addVertex(-ltb, ltb,-ltb);  //ltb

    //right
    mbo.setTexture(0, 0);
    mbo.addVertex(rbf, -rbf,rbf);   //rbf
    mbo.setTexture(1, 0);
    mbo.addVertex(rbb, -rbb,-rbb);  //rbb
    mbo.setTexture(1, 1);
    mbo.addVertex(rtb, rtb,-rtb);   //rtb
    mbo.setTexture(0, 1);
    mbo.addVertex(rtf, rtf,rtf);    //rtf

    mbo.addTriangle(0,1,2);//1
    mbo.addTriangle(2,3,0);

    mbo.addTriangle(4,5,6);//2
    mbo.addTriangle(6,7,4);

    mbo.addTriangle(8,9,10);//3
    mbo.addTriangle(10,11,8);

    mbo.addTriangle(12,13,14);//4
    mbo.addTriangle(14,15,12);

    mbo.addTriangle(16,17,18);//5
    mbo.addTriangle(18,19,16);

    mbo.addTriangle(20,21,22);//6
    mbo.addTriangle(22,23,20);

    return mbo.create(true);
}

private Mesh cylinder(){
    float radius=1.25f, halfLength=5;
    int slices=16;

    Mesh.TriangleMeshBuilder mbo= new TriangleMeshBuilder(mRSGL,3, Mesh.TriangleMeshBuilder.TEXTURE_0);

    /*vertex at middle of end*/
    mbo.addVertex(0.0f, halfLength, 0.0f);
    mbo.addVertex(0.0f, -halfLength, 0.0f);

    for(int i=0; i<slices; i++) {
         float theta = (float) (i*2.0*Math.PI / slices);
         float nextTheta = (float) ((i+1)*2.0*Math.PI / slices);

         /*vertices at edges of circle*/
         mbo.addVertex((float)(radius*Math.cos(theta)), halfLength, (float)(radius*Math.sin(theta)));
         mbo.addVertex((float)(radius*Math.cos(nextTheta)), halfLength, (float)(radius*Math.sin(nextTheta)));

         /* the same vertices at the bottom of the cylinder*/
         mbo.addVertex((float)(radius*Math.cos(nextTheta)), -halfLength, (float)(radius*Math.sin(nextTheta)));
         mbo.addVertex((float)(radius*Math.cos(theta)), -halfLength, (float)(radius*Math.sin(theta)));

         /*Add the faces for the ends, ordered for back face culling*/
         mbo.addTriangle(4*i+3, 4*i+2, 0); 
         //The offsets here are to adjust for the first two indices being the center points. The sector number (i) is multiplied by 4 because the way you are building this mesh, there are 4 vertices added with each sector
         mbo.addTriangle(4*i+5, 4*i+4, 1);
         /*Add the faces for the side*/
         mbo.addTriangle(4*i+2, 4*i+4, 4*i+5); 
         mbo.addTriangle(4*i+4, 4*i+2, 4*i+3);
    }

return mbo.create(true);
}

public void initMesh(){     

    m1= cubeMesh(1,1,1,1,1,1,1,1);
    mScript.set_gCubeMesh(m1);      //cube

    m2 = cylinder();
    mScript.set_gCylinder(m2);      //Cylinder
} 
```

我最初像这样加载纹理：

```
 private void loadImages() {
    cubetex = loadTextureRGB(R.drawable.crate);
    cylindertex = loadTextureRGB(R.drawable.torusmap);
    mScript.set_cubetex(cubetex);
    mScript.set_gTexCylinder(cylindertex);
 } 
```

在 rs 侧，由根调用的立方体和圆柱体函数：

```
static void displayCustomCube() 
{   

// Update vertex shader constants
// Load model matrix
// Apply a rotation to our mesh
gTorusRotation += 50.0f * gDt;
if (gTorusRotation > 360.0f) 
{
    gTorusRotation -= 360.0f;
}

// Setup the projection matrix
 if(once<1)
{
    float aspect = (float)rsgGetWidth() / (float)rsgGetHeight();
    rsMatrixLoadPerspective(&gVSConstants->proj, 40.0f, aspect, 0.1f, 1000.0f);
    once++;
}      

// Position our model on the screen    

rsMatrixLoadTranslate(&gVSConstants->model, 0,2,-10);   

setupCustomShaderLights();
rsgBindProgramVertex(gProgVertexCustom);

// Fragment shader with texture
rsgBindProgramStore(gProgStoreBlendNoneDepth);
rsgBindProgramFragment(gProgFragmentCustom);
rsgBindSampler(gProgFragmentCustom, 0, gLinearClamp);    
rsgBindTexture(gProgFragmentCustom, 0, cubetex);    

// Use no face culling
rsgBindProgramRaster(gCullNone);
rsgDrawMesh(gCubeMesh); // load cube model

}

static void displayCustomCylinder() 
{   

// Update vertex shader constants
// Load model matrix
// Apply a rotation to our mesh
gTorusRotation += 50.0f * gDt;
if (gTorusRotation > 360.0f) 
{
    gTorusRotation -= 360.0f;
}

// Setup the projection matrix

if(once<1)
{
    float aspect = (float)rsgGetWidth() / (float)rsgGetHeight();
    rsMatrixLoadPerspective(&gVSConstants->proj, 40.0f, aspect, 0.1f, 1000.0f);
    once++;
}    

// Position our model on the screen   

rsMatrixLoadTranslate(&gVSConstants->model, 0,2,-10);   

setupCustomShaderLights();
rsgBindProgramVertex(gProgVertexCustom);

// Fragment shader with texture
rsgBindProgramStore(gProgStoreBlendNoneDepth);
rsgBindProgramFragment(gProgFragmentCustom);
rsgBindSampler(gProgFragmentCustom, 0, gLinearClamp);
rsgBindTexture(gProgFragmentCustom, 0, gTexCylinder);

// Use no face culling
rsgBindProgramRaster(gCullNone);
rsgDrawMesh(gCylinder); // load cylinder model
} 
```

setCustomShaderLights() 的定义是：

```
static void setupCustomShaderLights() 
{

float4 light0Pos = {xLight0Pos, yLight0Pos, zLight0Pos, aLight0Pos};    
float4 light1Pos = { 0.0f, 0.0f,  20.0f, 1.0f};

float4 light0DiffCol = {xDiffColLight0, yDiffColLight0, zDiffColLight0, aDiffColLight0};   
float4 light0SpecCol = {xSpecColLight0, ySpecColLight0, zSpecColLight0, aSpecColLight0};

float4 light1DiffCol = {0.5f, 0.5f, 0.9f, 1.0f};
float4 light1SpecCol = {0.5f, 0.5f, 0.9f, 1.0f};

gLight0Rotation += 50.0f * gDt;
if (gLight0Rotation > 360.0f) 
{
    gLight0Rotation -= 360.0f;
}
gLight1Rotation -= 50.0f * gDt;
if (gLight1Rotation > 360.0f) 
{
    gLight1Rotation -= 360.0f;
}

// Set light 0 properties
gVSConstants->light0_Posision = light0Pos;    
gVSConstants->light0_Diffuse = DiffLight0Val;
gVSConstants->light0_Specular = SpecLight0Val;
gVSConstants->light0_CosinePower = Light0Cos;

// Set light 1 properties
gVSConstants->light1_Posision = light1Pos;
gVSConstants->light1_Diffuse = 1.0f;
gVSConstants->light1_Specular = 0.7f;
gVSConstants->light1_CosinePower = 25.0f;

rsgAllocationSyncAll(rsGetAllocation(gVSConstants));

// Update fragmetn shader constants
// Set light 0 colors
gFSConstants->light0_DiffuseColor = light0DiffCol;
gFSConstants->light0_SpecularColor = light0SpecCol;
// Set light 1 colors
gFSConstants->light1_DiffuseColor = light1DiffCol;
gFSConstants->light1_SpecularColor = light1SpecCol;
rsgAllocationSyncAll(rsGetAllocation(gFSConstants));

} 
```

和 loadTextureRGB() 是：

```
private Allocation loadTextureRGB(int id) 
{
    return Allocation.createFromBitmapResource(mRSGL, mRes, id,
                                               Allocation.MipmapControl.MIPMAP_ON_SYNC_TO_TEXTURE,
                                               Allocation.USAGE_GRAPHICS_TEXTURE);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:26:05.510

对这些网格进行纹理化绝对是可能的。它可能不是解决您的问题的唯一方法，但是您没有获得任何圆柱体纹理的原因之一是您在创建该网格时从未声明该网格的纹理坐标。不过，您支持多维数据集，因此只需将该方法转移过来。至于为什么没有显示纹理，我没有立即看到您的代码有任何问题。您的自定义着色器的 GLSL 代码是什么？它与 MiscSamples 示例中的相同吗？你对 setupCustomShaderLights() 和 loadTextureRGB() 的定义如何？示例代码中的它们是否也相同？

# php - 显示最后查看的数据

> ID：10782942
> 
> 赞同：0
> 
> 时间：2012-05-28T10:14:58.357
> 
> 标签：php

当我访问一个页面时，例如查看用户信息。这是场景。用户查看了 A 的信息，然后查看了 B 的信息，但浏览器上显示的是 A 的信息，只有刷新浏览器才会消失。你认为这里的问题是什么？

这是一个示例代码：

```
<?php foreach($select as $row){ ?>
            <tr>
                <input type="hidden" name="schedule_id[]" value="<?php echo $row->schedule_id; ?>"/>
                <td><input type="text" id="description_<?php echo $row->schedule_id; ?>" name="description[]" value="<?php echo $row->quarter; ?>"/></td>
                <td><input type="text" id="range_from_<?php echo $row->schedule_id; ?>" name="range_from[]" value="<?php echo $row->new_range_from; ?>"/></td>
                <td><input type="text" id="range_to_<?php echo $row->schedule_id; ?>" name="range_to[]" value="<?php echo $row->new_range_to; ?>"/></td>
                <td><input type="text" id="sched_from_<?php echo $row->schedule_id; ?>" name="sched_from[]" value="<?php echo $row->sched_from; ?>"/></td>
                <td><input type="text" id="sched_to_<?php echo $row->schedule_id; ?>" name="sched_to[]" value="<?php echo $row->sched_to; ?>"/></td>
            </tr>
            <?php } ?> 
```

这只是一个普通的代码，我并没有真正做任何事情。但我怀疑配置是问题，所以如果你愿意看看我的 php.ini 文件： [http ://dl.dropbox.com/u/27328449/php.ini](http://dl.dropbox.com/u/27328449/php.ini)

我在开发过程中使用了 Wampserver，但在生产中我分别安装了 php、apache 和 mysql。所以我认为这与配置有关。

感谢您的所有评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:17:55.180

您的浏览器可能正在缓存您页面的 html。使固定：

在 php 页面的顶部添加这两行：

```
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past 
```

通过[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

# c# - TransformToVisual 方法不适用于动态控件

> ID：10782945
> 
> 赞同：1
> 
> 时间：2012-05-28T10:15:14.003
> 
> 标签：c#, silverlight, transformtovisual

我正在尝试使用以下代码行通过 TransformToVisual 方法获取用户控件的位置：

```
this.TransformToVisual(ParentElement).Transform(new Point()); 
```

如果控件是在 XAML 中定义的，那么坐标就可以了。但现在我想像这样动态定义控件：

```
stackPanel.Children.Add(new Control()); 
```

坐标被移动，TransformToVisual 方法忽略边距和对齐（返回堆栈面板的左上角）。

XAML 层次结构如下：

```
<Grid x:Name="ParentElement">
    <StackPanel>
        <StackPanel>
            <Border>
                <StackPanel>
                    <TextBlock  />
                    <StackPanel x:Name="stackPanel" />
                </StackPanel>
            </Border>
        </StackPanel>
    </StackPanel>
</Grid> 
```

所以我的问题是：有没有办法再次正确获取坐标？

谢谢，奎蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T05:54:54.197

我能够自己解决问题：

如果我在调用 TransformToVisual() 之前调用 UpdateLayout() 方法，坐标不再是坏的。ActualWidth 和 height 属性还有其他一些小问题，它们返回为零。我通过在 Dispatcher.BeginInvoke 委托中调用这些属性来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-10T03:02:43.577

我想为此添加一些东西，因为我遇到了一个非常相似的问题，它给我带来了一段时间的问题。当我在 WinRT for Windows 8.1 中的 UIElement 上访问 Dispatcher 时，我找不到 BeginInvoke 方法，因此我无法尝试您列出的解决方案。

经过一些测试，虽然我认为我的问题的根本原因是更改 UI 的布局，然后在系统有时间正确更新布局之前调用 TransformToVisual。这可能与您上面提到的问题相同。我发现在没有影响其布局的 UI 片段上运行 TransformToVisual 会返回正确的结果，只有在存在问题的地方更新布局的 UI 片段。

似乎当更改布局以使 TransformToVisual 正常工作时，UI 必须有机会对布局更新做出“反应”。在我的情况下，我正在更改布局，然后在调用 TransformToVisual 之后立即更改（在 Tapped 事件处理程序中，一行紧随其后）。由于这些调用都在相同的方法中，UI 可能无法在布局更新和调用 TransformToVisual 之间处理任何新消息（我假设布局更新作为消息推送到 UI 处理循环上） . 如果我将 TransformToVisual 移到 MouseUp 事件中（当时我正在使用鼠标），那么一切正常。可能在您的情况下调用 BeginInvoke 在它“推动”的地方做了很多相同的事情

# javascript - 在不更改页面的情况下更改页面的 URL

> ID：10782947
> 
> 赞同：1
> 
> 时间：2012-05-28T10:15:23.073
> 
> 标签：javascript, url, url-rewriting

我想在不更改页面的情况下更改页面 URL `Javascript`，我想完全更改包括主机域在内的 URL。

```
For example: Origional URL: http://host-one.com/page.html  
             New URL      : http://host-two.com/another-page.html 
```

但不改变内容。

在此先感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:19:27.950

简单地说：你不能。

一些网站（尤其是 Facebook）这样做的方式是在 URL 中使用锚点

**编辑**

看来您可以在 Chrome、Safari、FF4+ 和 IE10pp4+ 中使用：

[在不重新加载页面的情况下修改 URL](https://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:21:47.163

不，你不能这样做。

HTML5`history.pushState()`允许您更改当前 URL 的*路径*，但不能更改域。

# ef-code-first - 关于数据库生成和播种的困惑

> ID：10782954
> 
> 赞同：0
> 
> 时间：2012-05-28T10:15:49.167
> 
> 标签：ef-code-first, code-first, entity-framework-4.3, entity-framework-migrations

我首先使用实体​​框架代码，还有数据种子代码

现在，当我运行我的应用程序时，我的数据库会生成，但不会使用我的虚拟数据作为种子。我必须再次运行实体框架来填充所有数据。

知道为什么以及如何解决这个问题，这样我就不必运行我的应用程序 2x 来获取数据库和数据？

谢谢

我的上下文定义文件是：

```
 public class Context : DbContext
    {
        public DbSet<Task> Tasks { get; set; }
        public DbSet<Agency> Agency { get; set; }

      protected override void OnModelCreating(DbModelBuilder modelBuilder)
     {
        base.OnModelCreating(modelBuilder);
     }
    } 
```

这是我的种子文件

```
public class Configuration : DbMigrationsConfiguration<Context>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;
        AutomaticMigrationDataLossAllowed = true;
    }

    protected override void Seed(Context context)
    {
        GenerateTasks(context);
        context.SaveChanges();
    }

    private static void GenerateTasks(Context context)
    {
        if (context.Task.Any()) return;
        context.Task.Add(new Task() { Name = "Received" });            
    }
} 
```

创建数据库的钩子是：

```
 Database.SetInitializer(new MigrateDatabaseToLatestVersion<Context, Configuration>());
  var context = new Context();
  context.Database.Initialize(true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:27:01.363

如果您的应用程序是**ASP.NET**并且是与数据层**分开的程序集**，那么您可以直接在 web.config 中配置它，而不是像以前那样配置初始化。也许这就是你的问题的原因。

因此，如果它是 ASP.NET 应用程序，您可以尝试以下操作：

**(1)**

注释掉这个：

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<Context, Configuration>());
var context = new Context();
context.Database.Initialize(true); 
```

**(2)**

在 web.config 中，在结束**/configuration**标记之前插入此权利：

```
<entityFramework>
<contexts>
  <context type="**fully-qualified name of your context class**,
                 **assembly name of your context**">
    <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[[**fully-qualified name of your context class**, **assembly name of your context**],
                               [**fully-qualified configuration type**, **assembly name of your context**, Version=1.0.0.0, Culture=neutral]], EntityFramework"/>
  </context>
</contexts> 
```

其中**完全限定的配置类型**是具有您的迁移配置的类（类似于 [...]Context.Migrations.Configuration）

我在我的项目中为自己使用了这种配置方法，并且效果很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:38:10.180

确实如此。调用`context.Tasks.Find(1)`，然后它将访问数据库。EF 代码优先使用这个技巧来推迟每一件事。这样应用程序的启动时间*似乎*要快得多。（但实际上不是！）

# java - 用什么代替 sun.net.www.protocol.http.HttpURLConnection.userAgent？

> ID：10782957
> 
> 赞同：3
> 
> 时间：2012-05-28T10:15:56.280
> 
> 标签：java, httpurlconnection

我收到此警告

> [javac] SSLTunnelSocketFactory.java:120：警告：sun.net.www.protocol.http.HttpURLConnection 是 Sun 专有 API，可能会在将来的版本中删除 [javac] + sun.net.www.protocol.http.HttpURLConnection。用户代理

为了

```
 if(NetworkUtils.isIPV6Compatible()&& NetworkUtils.isValidIPV6Address(host)){
     msg = "CONNECT [" + host + "]:" + port + " HTTP/1.0\n"
       + "User-Agent: "
       + sun.net.www.protocol.http.HttpURLConnection.userAgent
       + "\r\n\r\n";
  } 
```

你知道我可以用什么代替（最好不是外部 jar，而是来自已安装的 JVM）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:45:01.297

默认情况下，该变量定义如下：

```
String javaVersion = "Java/" + System.getProperty("java.version");
String userAgent = System.getProperty("http.agent") == null ? javaVersion : System.getProperty("http.agent") + " " + javaVersion; 
```

因此，您可以用这个变量或应用程序的名称或您喜欢的任何其他字符串替换该变量（因为生成的字符串不是普通浏览器的用户代理，我假设没有 JavaScript 或任何其他代码会检查它）。

# javascript - 从选项选择中单击打开 2 个 URL

> ID：10782959
> 
> 赞同：-1
> 
> 时间：2012-05-28T10:16:01.620
> 
> 标签：javascript, jquery

在我的表单中有一个下拉列表，单击按钮时我需要打开 2 个 URL，如果用户选择选项 1，则在单击按钮后会出现一个感谢页面，并且应该打开另一个 URL。

我目前只能打开一个 URL。请看看我的小提琴。

[http://jsfiddle.net/ty65E/5/](http://jsfiddle.net/ty65E/5/)

此外，在我的页面中，按钮很少，我希望它们最初应该被禁用，这样它们就不再起作用了。我想强制用户先填写表格，然后只有他可以访问其他按钮。

伙计们感谢您的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:33:14.123

您可以存储多个 URL，用类似的东西分隔它们`'|'`，然后用于[`split`](http://www.w3schools.com/jsref/jsref_split.asp)创建 URL 列表。第一个值将始终存在（如果您只有一个 url，split 将生成一个包含单个元素的数组），第二个值将仅存在于您指定两个 URL 的选项。

```
<option value="google.com|stackoverflow.com">Two URLs</option>

val = val.split('|');
window.open(val[0]);
if ( val.length > 1 )
    window.open(val[1]); 
```

至于您的其他问题，请`disabled`在您的按钮上添加属性，以及必须填写的每个输入：

```
$(selector_with_all_fields).change(function() {
    var allFilled = true;
    $(selector_with_all_fields).each(function() { 
        allFilled = allFilled && $(this).val() !== "";
    });
    $(my_buttons).attr("disabled",allFilled); // If that doesn't work, try removeAttr when allFilled is false
}); 
```

请记住以 HTML 开头`"disabled"="true"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T11:39:16.687

您可以尝试的一件事是从选择选项中调用 onchange 函数。我认为它更清洁，以后会帮助你。这是我尝试过的

```
<select name="interest_c" id="interest_c" class="required" onchange="report(this.value)">
  <option selected="selected" value="">Indicate your interest...</option>
  <option value="1">I want a Free Trial</option>
   <option value="2">I want to see a pre-recorded  demo</option>

                                </select>​

<script type="text/javascript">
function report(selectval) {
    switch(parseInt(selectval))  {

        case 1:
            window.open("http://www.stackoverflow.com");
            window.open("http://www.google.com");
            break;   
        case 2:
        window.open("http://www.facebook.com");
        window.open("http://www.php.net");
        break;

    } 

}​
</script> 
```

我在 jsfiddle [http://jsfiddle.net/eXSND/上试过](http://jsfiddle.net/eXSND/1/)

希望这可以帮助

# linux - vim过滤命令中断时执行命令

> ID：10782960
> 
> 赞同：0
> 
> 时间：2012-05-28T10:16:05.720
> 
> 标签：linux, vim

我在 vim 中使用过滤器命令来调用有时需要中断的 bash 脚本。我通过在 vim 窗口中按 Ctrl+C 来完成此操作。然后 bash 脚本终止（至少 vim 停止过滤命令），但我传递给过滤命令的文本（通常是视觉选择）将丢失。如果我通过 Ctrl+C 中断执行或 bash 脚本以 0 以外的退出状态结束，我希望 vim 返回到 filter 命令之前的状态。请注意，我知道我可以按 u 撤消，但我想修改过滤器命令以执行此操作，因为我可能忘记按 u 并松开文本而没有注意到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:17:56.007

您可以在 bash 中设置信号和/或退出处理程序。`man bash`,`/trap.*sigspec`

就像是：

```
trap "your_commands"  SIGINT
my_program 
```

为了让它“保留”文本，你可能需要这样的东西：

```
TIN=`mktemp`
TOUT=`mktemp`
cat > $TIN
trap "cat $TIN; rm -f $TIN; rm -f $TOUT" EXIT
do_something < $TIN > $TOUT || cp $TIN $TOUT
mv $TOUT $TIN 
```

检查了我的 Vim，似乎工作正常。（使用`sed`并`sleep`作为 do_something 进行测试）

# browser - 网络浏览器 - 代码全屏

> ID：10782961
> 
> 赞同：1
> 
> 时间：2012-05-28T10:16:15.553
> 
> 标签：browser

我阅读了很多关于该主题的帖子，但没有找到具体答案：是否可以在互联网浏览器上触发 F11 或以某种方式使浏览器进入全屏模式？有很多解决方法，但没有一个是真正的全屏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:45:55.317

因为您没有指定操作系统（并且如果嵌入了网络浏览器），我只能给您这个答案。

您可以使用 sendkeys“接口”发送一个键，它模拟按键，例如“F11”。

更多信息：谷歌发送键

也许这个答案可以引导你走向正确的方向。

# crystal-reports - 如何更改水晶报告中的日期格式

> ID：10782966
> 
> 赞同：0
> 
> 时间：2012-05-28T10:16:55.413
> 
> 标签：crystal-reports, inet

谁能告诉我如何更改水晶报表中的日期格式。

这是我的编码。

FormulaField for_date_of_birth = fields.addFormulaField("f_date_of_birth","Totext({hr_rpt_employee.date_of_birth}) = \"1900-01-01\"",FormulaField.FORMULA_PROPERTY);

在这里我想要 MM/DD/YYYY 格式，但就像 YYYY/MM/DD 格式一样

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:12:40.647

您可以使用`Totext`可选参数，即指定如何格式化字符串表示的字符串。默认值取决于系统区域设置。

```
Totext({hr_rpt_employee.date_of_birth}, "MM/dd/yyyy" ) 
```

例子

```
ToText( CurrentDate, "MM/dd/yyyy") 
```

输出： `01/11/2013`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T12:41:31.270

选择列并右键单击然后图片日期格式[![在此处输入图像描述](../Images/d4fdd063de00df86687a5a248bc2ef2b.png)](https://i.stack.imgur.com/qX7Vj.png)

# c# - c#水晶报表导出错误

> ID：10782967
> 
> 赞同：0
> 
> 时间：2012-05-28T10:16:55.943
> 
> 标签：c#

我试图将水晶报告导出为 pdf 格式。但我出现错误，例如“System.IO.MemoryStream”是“类型”，但用作“变量”......这是我的代码，请验证并纠正我..

```
protected void Button1_Click(object sender, EventArgs e)
    {
        MemoryStream MS;
        MS = (MemoryStream);
        MR.ExportToStream(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat);
        Response.Clear();
        Response.Buffer = true;
        Response.ContentType = "application/pdf";
        Response.BinaryWrite(MS.ToArray());
        Response.End();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:58:04.347

问题是线路

`MS = (MemoryStream);`

你似乎在这里遗漏了一些东西。您是否尝试将某些内容投射到内存流中，如果是这样，那又如何？

如果你想构造一个 MemoryStream obj，你需要使用类似的东西

`MemoryStream memStream = new MemoryStream(100)`

请注意，MemoryStream 实现了 IDisposable，因此您可能希望将其包装在 using 子句中。

# java - 每个用户只允许一个会话

> ID：10782968
> 
> 赞同：6
> 
> 时间：2012-05-28T10:16:57.770
> 
> 标签：java, spring, session, struts2

我们有一个使用 struts2、spring 和 hibernate 开发的 web 应用程序。

该应用程序需要一个用户只能从一个浏览器登录的功能。

假设用户 x, 在 pc-1 浏览器 ff 上登录，那么他无法从任何其他地方登录。

我通过实现会话映射进行了尝试，并将会话存储在全局映射中，但是当用户注销并尝试再次登录时这会失败。

如果用户没有注销和会话超时，即使它严重失败，但地图没有被清除。

实现此功能的任何更好的想法。

我们不想阻止用户登录，但不希望用户通过允许他共享信用并允许多个用户使用相同的登录来利用应用程序。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-28T10:46:00.827

由于您已经在使用 Spring，我建议您将应用程序与 Spring Security 集成。

Spring security 允许您定义每个用户同时允许的最大会话数。

```
<session-management>
        <concurrency-control max-sessions="1" />
</session-management> 
```

如果在具有有效会话的用户尝试再次登录时设置，它将通知用户最大并发访问设置为 1。

在 Spring Security 的参考文档中阅读更多内容：[v3.2.x](https://docs.spring.io/spring-security/site/docs/3.2.x/reference/htmlsingle/html5/#ns-concurrent-sessions)、[v4.2.x](https://docs.spring.io/spring-security/site/docs/4.2.x/reference/htmlsingle/#ns-concurrent-sessions)或[v5.1.x](https://docs.spring.io/spring-security/site/docs/5.1.x/reference/htmlsingle/#ns-concurrent-sessions)。

如果弹簧安全不是您的选择，那么：

1.  使用`SessionInterceptor`将检查会话有效性，如果会话有效，它将检查用户是否已经登录到应用程序（为此，您必须在某处维护会话，例如每次成功登录的数据库），如果找到有效登录，使用自定义消息再次将用户重定向到登录页面，或注销已经有效的会话，然后将他重定向到再次登录。如果您注销较早的会话，则意味着该浏览器会话中的任何后续操作都必须处理无效会话。

2.  如果您也在`Servlet`应用程序中使用 Interceptor，那么 Interceptor 将不适合您，在这种情况下，您应该使用 a`Filter`并按照上面针对 Interceptor 详述的相同步骤进行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T10:24:44.210

最好的解决方案是在用户登录新会话时从其他会话中注销。通常情况下，用户在关闭浏览器时不会注销并限制他登录其他窗口将是陷阱。

自动关闭任何以前的用户会话是好的，因为在正常使用中是没有问题的，但是在共享登录名和密码时，没有两个人可以同时使用您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T12:08:42.753

Create a map. At the time of logging check that user id is present into that map or not. If its not exist then put user id into map, at the time of logout remove that user id.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T10:23:27.703

在登录时为用户提供与用户数据一起存储的生成的 ID/cookie（sessionid 即可）。如果用户使用旧 ID/cookie 向服务器发出请求，则说他在其他地方登录。

反过来，禁止新的登录尝试也有其缺点——正如您所经历的那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-03T13:47:55.580

在 servlet 上下文中维护用户堆栈，因为它将是 web 容器的堆栈。在用户登录之前执行检查，如果在 servlet 上下文中找到用户名将他重定向到登录页面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T11:06:08.050

老实说，我会重新审视您必须将用户限制为一次登录的原因。虽然阻止他们从两个不同的浏览器登录很容易 - 提供的任何建议都可以工作 - 如果可以的话，Spring Security 选项是最容易实现的 - 当您的用户打开第二个选项卡时它们都会崩溃浏览器。这被认为是同一会话的一部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-29T06:53:10.967

您应该做的就是在数据库 userprofile 表中添加一个字段：*alreadyLogin*。如果用户登录，则设为 Y。如果用户注销，则设为 N。现在每次用户尝试从新位置登录时，检查此值并阻止登录，如果值为 Y。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-12T21:07:57.797

正如许多人所说，您可以拥有 (sessionId, user) 的活动用户的 Map<String, User> （静态 Map 或更好的 ServletContext 中的属性）。

当用户尝试登录时，首先检查**theMap.values()**中是否存在，如果可以，将其添加到**theMap**中。

不是在注销时从**theMap中删除，而是实现一个****javax.servlet.http.HttpSessionListener**，然后在**sessionDestroyed**方法上，从中删除项目（该方法的参数为您提供 sessionId）。这样，如果用户关闭浏览器，在会话超时时间之后，它将自动被删除。

注销时，使会话无效，因此它将被销毁，并再次执行此侦听器。

不要忘记将侦听器添加到您的**web.xml**中。

# jquery - 将自定义过滤器字段添加到 jQuery 数据表

> ID：10782975
> 
> 赞同：2
> 
> 时间：2012-05-28T10:17:33.467
> 
> 标签：jquery, datatable

我正在使用外部表单来使用自定义过滤器，就像在[这个链接](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/external.html)中一样。但是，即使我尝试向页面添加类似的代码，我也无法创建自定义过滤器字段`index.html`。

这是我的附加过滤器列：

```
<div id="renderingEngineFilter" class="filterOption"></div>
<div id="browserFilter" class="filterOption"></div>
<div id="platformsFilter" class="filterOption"></div>
<div id="engineVersionFilter" class="filterOption range"></div>
<div id="cssGradeFilter" class="filterOption"></div>
<div id="customFilter"></div> <!-- this one --> 
```

我将它添加到我的 jQuery 函数中，如下所示：

```
$(document).ready( function () {
    $('#example').dataTable({
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    })
    .columnFilter({
        aoColumns: [
            { type:"select", sSelector: "#renderingEngineFilter" },
            { sSelector: "#browserFilter" },
            { sSelector: "#platformsFilter" },
            { type:"number-range", sSelector: "#engineVersionFilter" },
            { type:"select", values : ["A", "B", "C", "X"], sSelector: "#cssGradeFilter" },
            { type:"select", values : ["vannkorn", "ravy", "rayuth"], sSelector: "#customFilter"}    //here is where I add it
        ]
    });
}); 
```

不幸的是，它没有显示这个自定义字段。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:06:54.830

这是因为你的表，我确信只有 5 列，所以你不能在那里应用第六个过滤器。如果您仔细观察，您会`columnFilter`发现`aoColumns`

# vbscript - 在 vbs 中禁用错误

> ID：10782976
> 
> 赞同：0
> 
> 时间：2012-05-28T10:17:44.723
> 
> 标签：vbscript

我使用此代码下载链接，但**如果 objXMLHTTP.Status 不是 200**则脚本显示错误，无法下载或找不到链接 &...
如何添加命令，如果 objXMLHTTP.Status 不是 200，脚本不显示有什么错误吗？

```
function download(sFileURL, sLocation)

'create xmlhttp object
Set objXMLHTTP = CreateObject("MSXML2.XMLHTTP")

'get the remote file
objXMLHTTP.open "GET", sFileURL, false

'send the request
objXMLHTTP.send()

'wait until the data has downloaded successfully
do until objXMLHTTP.Status = 200 :  wcript.sleep(1000) :  loop

'if the data has downloaded sucessfully
If objXMLHTTP.Status = 200 Then

        'create binary stream object
    Set objADOStream = CreateObject("ADODB.Stream")
    objADOStream.Open

        'adTypeBinary
    objADOStream.Type = 1
    objADOStream.Write objXMLHTTP.ResponseBody

        'Set the stream position to the start
    objADOStream.Position = 0    

        'create file system object to allow the script to check for an existing file
        Set objFSO = Createobject("Scripting.FileSystemObject")

        'check if the file exists, if it exists then delete it
    If objFSO.Fileexists(sLocation) Then objFSO.DeleteFile sLocation

        'destroy file system object
    Set objFSO = Nothing

        'save the ado stream to a file
    objADOStream.SaveToFile sLocation

        'close the ado stream
    objADOStream.Close

    'destroy the ado stream object
    Set objADOStream = Nothing

'end object downloaded successfully
End if

'destroy xml http object
Set objXMLHTTP = Nothing 
```

结束功能

下载“http://remote-location-of-file”、“C:\name-of-file-and-extension”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:30:41.670

有关代码中的错误，请参阅我的其他答案。这是一个使用 overwrite 参数的更简洁的版本，因此不需要检查 fso。

```
function download2(url, destination)
  download2 = false
  on error resume next
  set xml = CreateObject("Microsoft.XMLHTTP")
  xml.Open "GET", url, False
  xml.Send
  if err.number = 0 then
    if xml.readystate = 4 then
      if xml.status = 200 then 
        set oStream = createobject("Adodb.Stream")
        const adTypeBinary = 1,  adSaveCreateOverWrite = 2, adSaveCreateNotExist = 1 
        oStream.type = adTypeBinary
        oStream.open
        oStream.write xml.responseBody
        oStream.saveToFile destination, adSaveCreateOverWrite
        oStream.close
        set oStream = nothing
        download2 = true
      end if
    end if
  end if
  set xml = Nothing
end function

if download2("http://www.textpad.com/download/v60/txpeng600.zig", "txpeng600.zip") then
  wscript.echo "download ok"
else
  wscript.echo "download nok"
end if

'download nok 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:00:08.047

您的代码错过了结束函数，并且您在 wcript.sleep 行出现错误，没有注释要简洁，它应该类似于

```
function download(sFileURL, sLocation, async)
  set objXMLHTTP = CreateObject("MSXML2.XMLHTTP")
  objXMLHTTP.open "GET", sFileURL, async
  on error resume next
  objXMLHTTP.send()
  if err.number = 0 then
    if objXMLHTTP.Status = 200 Then
      set objADOStream = CreateObject("ADODB.Stream")
      objADOStream.Open
      objADOStream.Type = 1
      objADOStream.Write objXMLHTTP.ResponseBody
      objADOStream.Position = 0    
      set objFSO = Createobject("Scripting.FileSystemObject")
      if objFSO.Fileexists(sLocation) then
        objFSO.DeleteFile sLocation
      end if
      set objFSO = Nothing
      objADOStream.SaveToFile sLocation
      objADOStream.Close
      set objADOStream = Nothing
      download = true
    end if
  else
    download = false
  end if
  set objXMLHTTP = Nothing
end function

if download("http://stackoverflow.com/questions/10782976/disable-error-in-vbs", "question.html", false) then
  wscript.echo "download ok"
else
  wscript.echo "download nok"
end if 
```

# git - 恢复添加到索引但随后被 git reset 删除的文件

> ID：10782978
> 
> 赞同：13
> 
> 时间：2012-05-28T10:17:46.680
> 
> 标签：git, git-commit, git-reset, git-add, git-reflog

我在索引中添加了一些文件，但后来我错误地用`git reset --hard`. 我该如何恢复它们？这是发生的事情：

1.  我使用添加了所有文件`git add .`
2.  然后我承诺
3.  当我检查状态时，仍然有文件未包含在 add 的提交中，这很奇怪
4.  我再次添加了未跟踪的文件，这次成功了
5.  但我希望所有内容都在 1 次提交中，所以我查找了如何取消我刚刚提交的内容
6.  我用过`git reset --hard HEAD^`——显然是个坏主意，所有文件都被删除了
7.  所以我过去常常`git reflog`找到我离开的地方
8.  然后我过去常常`git reflog ______`回到我的最后一次提交。
9.  然后我曾经`git reset HEAD`取消提交提交（我最初应该做的）但是我在提交之后添加的文件（见上文）仍然消失了。

我如何取回这些文件？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-28T11:29:52.293

**首先，对您的 Git 存储库进行完整备份！**

当你`git add`创建一个文件时，git 会从这个文件的内容中创建一个 blob 并将其添加到它的对象数据库（`.git/objects/??/*`）中。

让我们一一看看你的命令：

> 我使用 git add 添加了所有文件。

```
$ git add . 
```

这会将当前目录及其子目录中包含的所有文件添加到 Git 的对象数据库中。`.gitignore`将不会添加与文件中的模式匹配的未跟踪文件。树文件也将被写入。请看我回答的结尾。

> 然后我承诺

```
$ git commit -m'added all files' 
```

这会将一个新的提交对象写入对象数据库。此提交将引用一棵树。树引用 blob（文件）和其他树（子目录）。

> 当我检查状态时，仍然有文件未包含在 add 的提交中，这很奇怪

```
$ git status 
```

我可以想到发生这种情况的两种情况：修改了您的文件或在您背后添加了新文件。

> 我再次添加了未跟踪的文件，这次成功了

```
$ git add . 
```

我假设您`add`再次使用了相同的命令，就像在步骤 1 中一样。

> 但我希望所有内容都在 1 次提交中，所以我查找了如何取消我刚刚提交的内容

我会在这个答案的最后告诉你一个更好的方法，它不需要用户发出潜在的危险`reset`

> 我使用了 git reset --hard HEAD^ — 显然是个坏主意，所有文件都被删除了

```
$ git reset --hard HEAD^ 
```

此命令会将您当前的工作树和索引设置为恰好在提交处`HEAD^`（倒数第二个提交）。换句话说，它将丢弃任何本地未提交的更改并将分支指针移回一次提交。它不会触及未跟踪的文件。

> 所以然后我用 git reflog 找到我离开的地方

```
$ git reflog 
```

这显示了最近签出的最后一次提交（与 相同`git reflog HEAD`）。如果您指定分支名称，它将显示该分支最近指向的最后一次提交。

> 然后我使用 git reflog **__**回到我的上一次提交。

不确定这个。`git reflog`是（大部分）只读命令，不能用于“返回”提交。您只能使用它来查找分支（或`HEAD`）指向的提交。

> 然后我使用 git reset HEAD 取消提交（我最初应该做的）但是我在提交之后添加的文件（见上文）仍然消失了。$ git重置头

这不会取消暂存此提交，但会取消暂存索引中所有已暂存（但未提交）的更改。最初（第 1 步），您想说`git reset HEAD^`（或`git reset --mixed HEAD^`）——这将使您的工作树保持不变，但将索引设置为匹配由 命名的提交指向的树`HEAD^`。

* * *

现在，要取回您的文件，您必须使用`git fsck --full --unreachable --no-reflog`. 它将扫描 Git 对象数据库中的所有对象并执行可达性分析。你想寻找`blob`对象。还应该有一个`tree`对象，描述你第二次之后的状态`git add .`

`git cat-file -p <object hash>`将打印文件内容，因此您可以验证您是否拥有正确的对象。对于 blob，您可以使用 IO 重定向将内容写入正确的文件名。对于树，您必须使用 git 命令 ( `git read-tree`)。如果只有几个文件，最好将它们直接写入文件。

* * *

这里有几点注意事项：

如果您想将文件添加到最后一次提交（或编辑其提交消息），您可以简单地使用`git commit --amend`. 它基本上是一个包装器`git reset --soft HEAD^ && git commit -c HEAD@{1}`。

此外，使用`git add .`. 通常，您只想在创建新存储库时第一次使用它。更好的选择是`git add -u`, `git commit -a`，它将暂存对跟踪文件的所有更改。要跟踪新文件，最好明确指定它们。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-20T19:18:42.003

我有一个类似的问题，但是我的仓库中有很多悬空的 blob 和树，所以我最终过滤了`grep`所有悬空 blob 的输出并打印了匹配的 blob。假设`${UNIQUE_CODE}`某些代码对于您在索引中拥有的文件是唯一的，那么这应该为您提供您正在寻找的 blob 的哈希值：

```
for b in $(git fsck --lost-found | grep blob | awk '{print $3}'); do git cat-file -p $b | grep -q ${UNIQUE_CODE} && echo $b; done 
```

# pyqt4 - QStatusBar.showMessage 问题：

> ID：10782984
> 
> 赞同：1
> 
> 时间：2012-05-28T10:18:01.413
> 
> 标签：pyqt4

我在尝试调用 QStatusBar.showMessage() 时遇到了两种情况。
- 第一个：得到错误：`TypeError: 'QStatusBar' object is not callable`
- 第二个：它不起作用，什么也没有发生。我得到一个空白状态栏，没有任何错误消息。

# 这里的细节：

## MainWindow 类：

```
 self.statusbar = QtGui.QStatusBar(MainWindow)
    self.statusbar.setObjectName(_fromUtf8("statusbar"))
    MainWindow.setStatusBar(self.statusbar) 
```

该模块已导入主文件。然后，在主文件中，我调用了`QtGui.QStatusBar`'`showMessage()`方法，得到了以下两个问题。

## 1\. TypeError: 'QStatusBar' 对象不可调用

我使用以下代码语句来调用`QtGui.QStatusBar`'s`showMessage()`方法：
`self.ui.statusbar().showMessage("You have selected: %s" % self.filename, msecs= 5)`

## 2.空白状态栏；没有效果，并且有任何错误消息。

我已经使用了这个代码语句：
`self.ui.statusbar.showMessage("You have selected: %s" % self.filename, msecs= 5)`
我没有任何错误，但它也没有生效。

有人可以帮我弄清楚我有什么问题以及如何解决它？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:21:44.177

你用`msecs= 5`. 这意味着“显示消息 5 毫秒”！请尝试使用`msecs=5000`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-04T15:05:46.820

您需要删除“状态栏”后面的“（）”，因为它不是一种方法。

# iphone - 访问 NSPredicate 中自定义对象中的自定义对象

> ID：10782985
> 
> 赞同：0
> 
> 时间：2012-05-28T10:18:20.133
> 
> 标签：iphone, ios, cocoa

我有一个可变的自定义联系人对象数组，这些对象又具有地址对象。我想按对象的属性过滤该数组，例如使用contact.address.pincode

```
[myContacts filterUsingPredicate:myPredicate]; 
```

所以我创建了一个这样的谓词：

```
[NSPredicate predicateWithFormat:@"Address.pincode BEGINSWITH[cd] %@ OR Address.pincode CONTAINS[cd] %@",searchText,[NSString stringWithFormat:@" %@",searchText]]; 
```

这显然是行不通的。

我的问题是如何访问谓词格式字符串中的 Contact.Address.pincode ？谢谢

# android-emulator - 使用新建的源音乐应用程序启动模拟器

> ID：10782988
> 
> 赞同：0
> 
> 时间：2012-05-28T10:18:28.033
> 
> 标签：android-emulator, makefile, launch, android-music-player

我已经使用“make -j4”构建了 ICS 源，然后我修改了源代码中的音乐应用程序（“packages/apps/Music”）并使用“make Music”成功构建了它。它生成“out/target/product/generic/system/app/Music.apk”。现在我想用这个新源启动一个模拟器并测试我在音乐应用程序中的更改。这该怎么做 ？我需要重建整个源代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:15:17.743

我在这里找到了解决方案：-

[http://devtcg.blogspot.in/2009/03/building-running-and-debugging-android.html](http://devtcg.blogspot.in/2009/03/building-running-and-debugging-android.html)

还要设置你的路径： -

导出 PATH=$PATH:/home/yourname/android-sdk/tools:/home/yourname/android-sdk/platform-tools

你可能还需要：-

export ANDROID_SDK_ROOT=/usr/local/Cellar/android-sdk/rXX （你的Android SDK路径），如果你得到像“未知皮肤名称”这样的错误

您还可以使用 sdcard 启动模拟器：-

mksdcard -l mySdCard 1024M newsdcard.img

模拟器 -partition-size 256 -sdcard newsdcard.img -skin WXGA720

# spring - 调用 Spring 验证所需的错误对象

> ID：10782991
> 
> 赞同：1
> 
> 时间：2012-05-28T10:18:36.363
> 
> 标签：spring, validation

我正在使用 spring 开发一个应用程序。我想使用 spring 验证框架来验证来自注入了验证器的服务层的不同域/模型对象。我计划使用 ValidationUtils 来调用验证器，但我不确定我需要将哪些错误实现传递给 invokeValidator 方法。

ValidationUtils 中的签名：

```
 invokeValidator(Validator validator, Object obj, Errors errors) 
```

使用 BeanPropertyBindingResult 是否正确。

```
 BeanPropertyBindingResult result = new BeanPropertyBindingResult(javaProduct, "javaProduct"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:19:40.660

是的当然。您可以将**BeanPropertyBindingResult**对象的对象传递给错误。

它实现了接口**Errors**。

希望这对您有所帮助。干杯。

# c# - 如何在 MS Dynamics AX 2012 中使用 X++ 列表编组 C# 列表

> ID：10782993
> 
> 赞同：2
> 
> 时间：2012-05-28T10:18:57.203
> 
> 标签：c#, interop, axapta, x++, dynamics-ax-2012

我有一个 MS Dynamics AX 2012 项目，我正在使用 .Net 互操作。`static class`在被调用的内部有一个 C# 方法`Database`：

```
 public static List<String> GetAllDatabases(string dataSource) 
```

引用此程序集后，我可以在 X++ 中执行：

```
ADOMD.ADOMD.Model.Database::GetAllDatabases(); 
```

但我无法读取它返回的字符串列表。我想使用类似的东西：

```
List databaNameCollection = new List( Types::String ); 
;

databaNameCollection =  ADOMD.ADOMD.Model.Database::GetAllDatabases(); 
```

但它会引发一个错误：

```
Error executing code:  (object) has no valid runable code in method 'GetSID'. 
```

我怎么能做到？

**--------已编辑-----**

我找到了这篇文章：

[http://blogs.msdn.com/b/x/archive/2010/01/19/traversing-elements-in-an-ienumerable-from-x.aspx](http://blogs.msdn.com/b/x/archive/2010/01/19/traversing-elements-in-an-ienumerable-from-x.aspx)

但那是在 2010 年，可能是 AX 2009，我试图分配：

```
ClrObject enumerator; 
str theValue;
;

enumerator = ADOMD.ADOMD.Model.Database::GetAllDatabases();
while (enumerator.MoveNext()) 
    { 
        theValue = enumerator.get_Current(); 
        print theValue; 
    } 
```

GetallDatabases 方法正在与另一个 .Net 项目一起使用，它返回 10 个对象，但在 X++ 代码中，没有返回任何内容。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:06:38.513

要回答有关 X++ 和`get_{x}`and中 .NET 类型的问题`set_{x}`：

.NET 属性在 X++ 中显示为方法。例如，C# 中的 get & set 属性

```
string Name {get;set;} 
```

将在 X++ 中显示为

```
string get_Name();
void set_Name(str value); 
```

基本上 C# 属性只是语法糖。C# 编译器将为每个 get 属性创建一个 get_{x} 方法，并为每个 set 属性创建一个 set_{x}。

在您的情况下，如果您想访问`Name`cubeDef 对象中的属性，您必须在 X++ 中编写类似这样的内容：

```
info(cubeDef.get_Name()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:54:47.913

我使用以下示例制作它：http: [//blogs.msdn.com/b/x/archive/2010/01/19/traversing-elements-in-an-ienumerable-from-x.aspx](http://blogs.msdn.com/b/x/archive/2010/01/19/traversing-elements-in-an-ienumerable-from-x.aspx)

但是没有`enumerator.MoveNext()`，因为它不是 X++ 对象，所以将其更改为`for`循环有效，最终代码为：

```
ClrObject enumerator;  
str theValue;
int i;
int length = 0; 
List databaNameCollection = new List( Types::String );
;  

try
  { 
    permission = new InteropPermission(InteropKind::CLRInterop);
    if (permission == null)
    {
            return;
    }
    permission.assert();
    enumerator = ADOMD.ADOMD.Model.Database::GetAllDatabases();
    length = enumerator.get_Count();

    for (i = 0; i < length; i++)
    {
        stringElement = enumerator.get_Item(i);
        databaNameCollection.addStart(stringElement);
    }
     CodeAccessPermission::revertAssert();
 }
 catch (Exception::CLRError)
 {
     CodeAccessPermission::revertAssert();
     info(CLRInterop::getLastException().ToString());
 } 
```

但仍然存在一些**问题：**

1）我不能`databaNameCollection.addStart(enumerator.get_Item(i));`直接分配。

2）我无法访问复杂的对象属性，例如：

```
cubeDef  = enumerator.get_Item(i);
info(cubeDef.Name); 
```

其中`cubeDef`是类型：`Microsoft.AnalysisServices.AdomdClient.CubeDef`.

3) 我找不到描述这些方法的[CLRObject的文档。](http://msdn.microsoft.com/en-us/library/clrobject.aspx)`get_{propertyName}`前任：`get_Item`

最好的祝福

# asp.net - ajax 控制工具包日历 startdate=datetime.now FromDate To Date Validation

> ID：10782995
> 
> 赞同：1
> 
> 时间：2012-05-28T10:19:03.570
> 
> 标签：asp.net, vb.net, ajaxcontroltoolkit

如何验证 FromDate 和 ToDat？我正在使用两个文本框 id-'FromDate'、'ToDate'

这是客户端代码

```
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
</asp:ToolkitScriptManager>

<asp:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="FromDate">
</asp:CalendarExtender>
<asp:TextBox ID="FromDate" runat="server" width="158px"></asp:Textbox>

<asp:CalendarExtender ID="CalendarExtender2" runat="server" TargetControlID="FromDate">
</asp:CalendarExtender>
<asp:TextBox ID="ToDate" runat="server" width="158px"></asp:Textbox> 
```

这是后端代码

```
CalendarExtender1.startdate=datetime.now
CalendarExtender2.startdate=datetime.now 
```

我想知道，如果我选择 fromdate(5/1/2012)，'Todate' 的选择应该等于或大于 fromdate，，它不应该小于'fromdate' lesserdays 应该被禁用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:46:37.300

您可以结合使用客户端和服务器端验证。

下面的验证将在客户端工作以从用户那里获取有效日期。

```
<ajaxtoolkit:MaskedEditValidator ID="MaskedEditValidator3" runat="server" ControlExtender="MaskedEditExtender3" ControlToValidate="FromDate" EmptyValueMessage="Prosim vpišite Datum začetka."  InvalidValueMessage="Please enter valid date." Display="None" TooltipMessage="Prosim vpišite Datum začetka."  EmptyValueBlurredText="Empty" ValidationGroup="Offers" /> 
```

然后你可以在服务器端有一个日期验证方法来比较从和到日期。如下

```
int result = DateTime.Compare(Convert.ToDateTime(FromDate.Text), Convert.ToDateTime(ToDate.Text));
                if (result < 0 || result == 0)
                {
                    // user input passed
                }
                else
                {
                    // error msg: "'To date' should be greater then 'From date'";
                } 
```

# ios - 以编程方式加载视网膜（高质量）图像（在按钮上）

> ID：10782997
> 
> 赞同：5
> 
> 时间：2012-05-28T10:19:05.190
> 
> 标签：ios

我有一个我无法弄清楚的问题。我已经完成了一个应用程序，它将从正面拍摄一张照片，从背面摄像头拍摄一张照片，然后将它们合并在一起。

该应用程序的名称是**GroupCam**

但是我有一个问题，我的 UIButtons 从一开始就不会作为视网膜图像加载。如果我在界面生成器上将它们设置为@2x，它们确实会以高质量显示，但是一旦我以编程方式重新加载它们，就会出现低版本。

这是因为，在拍摄照片并且屏幕发生变化后，按钮图像会发生变化，但是当用户按下后退按钮时，相机图标会看起来很糟糕（因为正在加载低质量版本）。

请检查以下图片：

**第一个屏幕：**　只有右上角的按钮出现失真，因为我正在检查相机闪光灯的值并以编程方式“加载”相应的图像。

![第一个屏幕](../Images/27069b6d14b5126ca33ac83710e6d8af.png)

**第二个屏幕：**　用户移动到另一个屏幕并返回到第一个屏幕，所有按钮都重新加载，现在看起来都变形了。

![第二屏](../Images/f75fd6b9dd0201bb764bdd604191cfd8.png)

为什么会这样？

编辑：

这就是我加载图像的方式。

```
[self.flashButton setImage:[UIImage imageNamed:@"flashOff"] 
                          forState:UIControlStateNormal]; 
```

我在互联网上的某个地方读到，这样做会自动加载最合适的图像版本。

我也试过这个，但结果是一样的：

```
[self.takeButton setImage:[UIImage imageNamed:@"takePhoto.png"] forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:17:43.640

首先，它可能值得验证低分辨率版本是否正在实际显示。我最近跳到了类似的假设，用不同的东西换掉了图像的低分辨率版本，并确认高分辨率版本实际上仍在显示，但被扭曲了。

我的实际问题，我已经设置

`<uibutton_superview>.layer.shouldRasterize = YES;`

如果任何按钮祖先有这个设置，它可能是你的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T19:20:16.427

图像文件名的大小写在模拟器上无关紧要，但在设备上却很重要。

使用所有一致的案例。Image.png 和 image@2x.png 被识别并且可以在模拟器中一起工作，但不能在设备上工作。使用 image.png 和 image@2x.png。或者，只要大小写匹配，您也可以使用 .jpg。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T01:50:24.077

如果您的应用从前置摄像头和后置摄像头拍摄一张照片并将它们合并在一起，则该设备需要前置摄像头。所有具有前置摄像头的 iOS 设备也有视网膜显示器（只要你不是为 iPad 2 开发的，但那是另一回事）所以你根本不需要有正常的图像，所以你的所有图像都应该是视网膜图像。如果没有正常的图像，那么这个问题根本不应该发生。制作一个备份副本，并尝试删除所有正常图像，然后尝试。因为你使用 UIImage imageNamed:@"ImageName"，就像你说的，应该自动选择图像！祝你好运！