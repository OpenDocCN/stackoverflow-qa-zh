# StackOverflow 问答 10473000-10473999

# php - PHP for 循环内的 for 循环。尝试对多个数组列求和以获得组合

> ID：10473001
> 
> 赞同：4
> 
> 时间：2012-05-06T18:19:41.663
> 
> 标签：php

我正在尝试遍历二维数组并自动获取列组合的总和。

假设我有一个名为 $a 的数组，它有 4 列：0、1、2、3，

```
$a=array();
$a[0][0]=1;
$a[0][1]=3;
$a[0][2]=5;

$a[1][0]=10;
$a[1][1]=2;  
$a[1][2]=5;
$a[1][3]=7;

$a[2][0]=9;
$a[2][1]=8;  
$a[2][2]=9;
$a[2][3]=8;

$a[3][0]=9;
$a[3][1]=8;  
$a[3][2]=9;
$a[3][3]=8;
$a[3][4]=1; 
```

我正在尝试使用此代码对 sum(0,0;1,0;2;0,3;0) 等列的所有组合求和

```
for($i=0;$i<count($a[0]);$i++){
for($l=0;$l<count($a[1]);$l++){ 
for($s=0;$s<count($a[2]);$s++){ 
for($m=0;$m<count($a[3]);$m++){
 echo $sum[]= $a[0][$i]+$a[1][$l]+$a[2][$s]+$a[3][$m]; 
 echo $sum;
  echo "<br>";
   } 
   } 
 }
 }

 ?> 
```

并且代码有效，问题是我正在手动执行这些for循环，必须有某种方法可以通过某种方式插入列数的计数来简化它？

我尝试了类似的东西

```
$numberofcolumns=4; 

for($n=0;$n<$numberofcolumns;$n++){
for($i=0;$i<count($a[$n]);$i++){
for($m=0;$m<count($a[$n+1]);$m++){
echo $sums[]= $a[$n][$i]+$a[$n+1][$m];
}
}
} 
```

但这不起作用，必须有某种方法来简化 for 循环，这样我就不必在每列中手动输入 for 循环

有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:22:13.870

您可以使用`RecursiveIteratorIterator`

尝试

```
$a = array ();
$a [0] [0] = 1;
$a [0] [1] = 3;
$a [0] [2] = 5;

$a [1] [0] = 10;
$a [1] [1] = 2;
$a [1] [2] = 5;
$a [1] [3] = 7;

$a [2] [0] = 9;
$a [2] [1] = 8;
$a [2] [2] = 9;
$a [2] [3] = 8;

$a [3] [0] = 9;
$a [3] [1] = 8;
$a [3] [2] = 9;
$a [3] [3] = 8;
$a [3] [4] = 1;

$sum = 0;
$array = new RecursiveIteratorIterator ( new RecursiveArrayIterator ( $a ) );
foreach ( $array as $key => $value ) {
        $sum += $value;
}
echo $sum; 
```

输出

```
 102 
```

用于`$array = new RecursiveIteratorIterator ( new RecursiveArrayIterator ( $a[1] ) );`获取每个部分的总和...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:49:18.670

您可以为此使用递归，或者只是直接嵌套循环，但是在使用组合或排列时，可能性的总数可能会爆炸并变成一个巨大的数字，消耗大量内存，以至于您无法运行代码。使用迭代器是用 CPU 效率换取内存效率的好方法。这是我写的一个迭代器。

```
class CartesianProductIterator implements Iterator {
    protected $iterators;

    function __construct(array $iters) {
        $this->iterators = $iters;
    }

    function rewind() {
        foreach ($this->iterators as $it) {
            $it->rewind();
        }
    }

    function current() {
        $values = array();
        foreach ($this->iterators as $it) {
            $values[] = $it->current();
        }
        return $values;
    }

    function key() {
        return null;
    }

    function next() {
        /*      
        loop them in reverse, but exclude first
        why? example, odometer: 55199
        you always check the rightmost digit first to see if incrementing it would roll it over and need to be "rewound" to 0, 
        which causes the digit to the left to increase as well, which may also cause it to roll over as well, and so on...
        looping in reverse operates from right column to the left.
        we dont rewind the first column because if the leftmost column is on its last element and needs to roll over
        then this iterator has reached its end, and so rewind() needs to be explicitly called 
        */
        for ($i = count($this->iterators) - 1; $i > 0; --$i) {
            $it = $this->iterators[$i];
            $it->next();
            if ($it->valid()) {
                // were done advancing because we found a column that didnt roll over
                return;
            } else {
                $it->rewind();
            }
        }

        //if execution reached here, then all of the columns have rolled over, so we must attempt to roll over the left most column
        $this->iterators[0]->next();
    }

    function valid() {
        return $this->iterators[0]->valid();
    }
} 
```

然后将其用作

```
$iterators = array();
foreach ($a as $columnNumber => $values) {
    $iterators[] = new ArrayIterator($values);
}
foreach (new CartesianProductIterator($iterators) as $combo) {
    // combo has 1 value from each of the ArrayIterators we instantiated
    printf("summing %s = %d\n", join('+', $combo), array_sum($combo));
} 
```

这是一个演示[http://codepad.org/UasdgvWf](http://codepad.org/UasdgvWf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T18:31:24.707

如果我对您的理解正确，则此功能应该可以解决问题：

```
<?php
function recursive_sum($arr) { 

    $sum = 0;

    foreach($arr as $value) { 
        if(is_array($value)) {
            $sum += recursive_sum($value);
        }
        else { 
            $sum += $value;
        }
    }

    return $sum;
}  
?> 
```

只需调用`recursive_sum($a)`即可获取数组中所有值的总和，如下所示：

```
<?php
    echo recursive_sum($a);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T20:07:45.843

```
<? //PHP 5.4+
$a=[];
$a[0][0]=1;
$a[0][1]=3;
$a[0][2]=5;

$a[1][0]=10;
$a[1][1]=2;  
$a[1][2]=5;
$a[1][3]=7;

$a[2][0]=9;
$a[2][1]=8;  
$a[2][2]=9;
$a[2][3]=8;

$a[3][0]=9;
$a[3][1]=8;  
$a[3][2]=9;
$a[3][3]=8;
$a[3][4]=1;

//This is downright evil, but it works.
eval(\array_reduce(
  \array_reverse(\array_keys($a)),
  static function($eval, $key){
    return "foreach(\$a[$key]as\$i$key)$eval+\$i$key";
  },
  '{echo$sum[]=0') . ';echo"$sum<br/>";}');
?> 
```

# c# - 使用绑定字段的 Gridview 排序

> ID：10473011
> 
> 赞同：2
> 
> 时间：2012-05-06T18:21:10.013
> 
> 标签：c#, asp.net, .net

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        AllowPaging="true" AllowSorting="true" PageSize="10" DataKeyNames="CategoryID" 
        onselectedindexchanged="GridView1_SelectedIndexChanged" 
        GridLines="Vertical" onrowediting="GridView1_RowEditing" 
        onrowcancelingedit="GridView1_RowCancelingEdit" 
        onrowupdating="GridView1_RowUpdating" onsorted="GridView1_Sorted" 
        onsorting="GridView1_Sorting">
        <Columns>
        <asp:BoundField DataField="categoryid" HeaderText="ID" SortExpression="CategoryID" />        
        </Columns>        
    </asp:GridView> 
```

排序不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:33:09.977

在您的排序事件处理程序中，您可以更改数据表上的排序属性。

```
 dt.DefaultView.Sort = e.SortExpression + " ASC";
  gv.DataSource = dt;
  gv.DataBind(); 
```

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sorting.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sorting.aspx)

# git - Git 显示来自其他项目的更改

> ID：10473017
> 
> 赞同：0
> 
> 时间：2012-05-06T18:21:46.697
> 
> 标签：git

我的 /rails 目录中有三个项目：test_app/、dma4/ 和 test2_app/。我目前正在 test_app/ 目录（已经为 git 初始化）并提交了更改。提交后，我做了一个“git status”来查看更改。出于某种原因，它告诉我没有任何变化，除了 ../dma4 和 ../test2_app 这是其他项目！

为什么它会告诉我当前项目之外的变化？我不应该忽略我的 .gitignore 文件中的其他项目......

这是确切的消息：

```
test_app $ git status
# On branch master
# Changed but not updated:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#   modified:   ../dma4 (modified content)
#   modified:   ../test2_app (modified content)
#
no changes added to commit (use "git add" and/or "git commit -a")
test_app $ 
```

这些其他项目不是当前项目的子文件夹，这是层次结构的外观：

rails/test2_app rails/dma4 rails/test_app

为什么会这样？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:31:45.953

您在目录树中将 Git 存储库初始化得太高了。如果您上一层并执行 a `ls -a`，您可能会在`.git`那里看到 a 。

尝试进入项目的实际文件夹并在`git init`那里进行。

# .net - 我什么时候需要调用 ReleaseComObject？

> ID：10473021
> 
> 赞同：8
> 
> 时间：2012-05-06T18:22:06.727
> 
> 标签：.net, com, office-interop

在 Microsoft Office 插件中，我们通过事件传递 COM 对象。举一个特定的例子，当 Word 打开一个文档时，我们被调用并传递了一个 Document 对象。那么我们什么时候需要调用 Marshal.ReleaseComObject() 呢？

1.  如果我们访问 Document 对象，是否需要对其调用 release？或者我们可以假设 Word 已经访问过它并会清理它吗？
2.  如果我们访问给我们一个字符串的 Document.Name。由于字符串不是 COM 对象，我们不需要清理它——对吗？
3.  但是，如果我们访问返回包装 COM 对象的类的任何成员（这是由成员方法/函数返回的任何类），我们确实需要调用 release - 对吗？

如果我们错过了发布，会发生什么？我们持有的任何 COM 对象的时间不确定，我们将其包装在一个实现了 IDisposable 的类中。完成后我们调用 Dispose()。但是一些处理这个的代码很复杂，我猜我们偶尔会遇到我们不调用 Dispose 的情况。

我们最好有一个终结器，然后为这些对象的每个实例增加开销（很多！）？还是我们最好使用少量从未发布的 Word COM 对象？

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:38:44.823

简而言之，**您对 COM 对象的每一次引用都必须被释放**。如果不这样做，该过程将保留在内存中。

这*不包括*您未明确引用的值类型（字符串等）和子 COM 对象。

一个例外可能是作为事件参数传递给您的 COM 对象。我认为您不需要释放它们，但我不确定。但是，快速测试应该可以证实这一点。（在释放和不释放 COM 对象的情况下尝试您的加载项。查看加载项是否开始表现得滑稽，或者在应用程序关闭后是否有任何相关进程仍在运行。）

要解决您的具体问题：

1.  *如果我们访问 Document 对象，是否需要对其调用 release？或者我们可以假设 Word 已经访问过它并会清理它吗？*——你必须释放它。

2.  *如果我们访问给我们一个字符串的 Document.Name。由于字符串不是 COM 对象，我们不需要清理它——对吗？*-- 你不需要清理值类型。

3.  *但是，如果我们访问返回包装 COM 对象的类的任何成员（这是由成员方法/函数返回的任何类），我们确实需要调用 release - 对吗？*-- 如果你没有明确引用它，你不需要释放它。（有一些例外。例如，在我的这个[问题中，](https://stackoverflow.com/a/2525645/65775)我发现一个特定的 COM 方法正在实例化一个 COM 对象并且从不释放它。由于我无法控制方法实现，我唯一的选择是避免使用该方法。）

4.  *如果我们错过了发布，会发生什么？*-- 进程（winword.exe、excel.exe等）将保留在内存中。随着时间的推移，所有这些未终止的进程将耗尽机器上的所有可用内存。

5.  *我们最好有一个终结器，然后为这些对象的每个实例增加开销（很多！）？还是我们最好使用少量从未发布的 Word COM 对象？*-- 你最好使用终结器。总是释放你的 COM 对象！我发现[这里](http://www.xtremevbtalk.com/showthread.php?t=160433)列出的步骤是最有效的。（这些步骤使用 FinalReleaseComObject，它比 ReleaseComObject 更受欢迎。）我还建议不要杀死 Office 进程作为不释放 COM 的替代方法。随着时间的推移，这将导致 Office 互操作出现问题（我从未完全理解）。

# kannel - Kannel PlaySMS 配置

> ID：10473022
> 
> 赞同：1
> 
> 时间：2012-05-06T18:22:11.927
> 
> 标签：kannel

我已经配置了 Kannel 并且可以发送和接收消息 throw Web 浏览器，并尝试安装 PlaySMS 并配置 PlaySMS 但现在无法从 PlaySMS 界面发送或接收消息，并且 PS 没有写入任何日志。在我的 Apache 日志中，我看到：

"GET /playsms/index.php?app=menu&inc=send_sms&op=sendsmstopv&message=Hi+u+there%2C+good+morning%21%21&errid=46 HTTP/1.0" 200 2843 "$

如果有人有使用连接 Kannel+PlaySMS 的经验，请提供一些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:04:39.057

您是否将 Kannel 设置为 PlaySMS 中的网关？

将 Kannel 设置为网关：

*   以管理员身份登录 PlaySMS
*   单击网关 > 管理 KAnnel
*   输入您的用户名（playsms）和安装了 Kannel 的服务器的 IP 地址。如果 Kannel 与 PlaySMS 安装在同一台服务器上，请输入“localhost”
*   输入发送 SMS 端口（来自您的 kannel.conf 文件中名为“smsbox”的部分，其中显示“sendsms-port”）
*   输入 playSMS 网址（可能`http://localhost/playsms`）

确保您的 kannel.conf 中有一个条目用于连接 playms，这样的东西应该可以工作：

```
group = sendsms-user
username = playsms
password = playsms
user-deny-ip = "*.*.*.*"
user-allow-ip = "<<see note below>>" 
```

请注意，您应该在“user-allow-ip”下输入安装 PlaySMS 的服务器的 IP 地址，或者如果 playSMS 和 Kannel 的服务器相同，则输入“localhost”作为 IP。

不要忘记停止并启动 kannel 以重新加载配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T06:00:26.087

您需要让 kannel 将其存储在 playms 正在使用的 mysql 数据库中 - 查看 smsbox 程序以了解如何处理 sms 承载盒有一个连接到它的客户端 smsbox，并且该 smsbox 正在处理 sms 的分发以及是否回复

# c - 我将如何打印这个？

> ID：10473025
> 
> 赞同：0
> 
> 时间：2012-05-06T18:22:31.890
> 
> 标签：c, pointers, casting, structure

请看我的最后一行。我将如何打印这个？我该如何施放它？我要投它`(word*)table_p -> buckets_array[0] -> data -> key`吗`(word*)table_p -> buckets_array[0] -> data -> frequency`？

```
typedef struct data_{
  char *key;
  void *data;
  struct data_ *next;
}data_el;

typedef struct hash_table_ {
  /* structure definition goes here */
  data_el **buckets_array;
} hash_table, *Phash_table;

typedef struct word_{
  char key[WORD_SIZE];
  int frequency;
} word;

word *new_word;
new_word = (word *)malloc(sizeof(word));

new_word->frequency = 5;
new_word->key = "Lalalal";

Phash_table table_p;
table_p = (Phash_table)malloc(sizeof(hash_table));
table_p->buckets_array = (data_el **)malloc(sizeof(data_el *)*(size+1));
table_p->buckets_array[0]->data = (void*)new_word;

/*Is this right? How do I cast this? (word*) ?*/
printf("Key :%s Frequency:%d ",table_p->buckets_array[0]->data->key,
            table_p->buckets_array[0]->data->frequency); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:08:15.080

[给你](http://ideone.com/L50Eg)。在此过程中修复了几个错误，其中包括您正在寻找的疯狂演员：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define WORD_SIZE 1024

typedef struct data_{
  char *key;
  void *data;
  struct data_ *next;
}data_el;

typedef struct hash_table_ {
  /* structure definition goes here */
  data_el **buckets_array;
} hash_table, *Phash_table;

typedef struct word_{
  char key[WORD_SIZE];
  int frequency;
} word;

int main()
{

int size=0;
word *new_word;
new_word = (word *)malloc(sizeof(word));

new_word->frequency = 5;
strcpy(new_word->key, "Lalalal");
//      ^ ^ ^ ^               - ooops! you need to copy lalalal bytes into key[] array   

Phash_table table_p;
table_p = (Phash_table)malloc(sizeof(hash_table));
table_p->buckets_array = (data_el **)malloc(sizeof(data_el *)*(size+1));

table_p->buckets_array[0] = (data_el *)malloc(sizeof(data_el));
//      ^ ^ ^ ^                - ooops! you might need some data_el

table_p->buckets_array[0]->data = (void*)new_word;

/*Is this right? How do I cast this? (word*) ?*/
word* pdata=table_p->buckets_array[0]->data;
//      ^ ^ ^ ^                - the readable way

printf("Key :%s Frequency:%d ",((word*)(table_p->buckets_array[0]->data))->key, //<--the insane cast way (promote void* data_el.data to a word*)
            pdata->frequency);

            return 0;
} 
```

# facebook - facebook社交插件中的可点击网址

> ID：10473031
> 
> 赞同：2
> 
> 时间：2012-05-06T18:23:19.043
> 
> 标签：facebook, url, hyperlink, facebook-social-plugins

在 Facebook 社交插件评论中插入可点击网址/链接的正确标记是什么？

我无法在 Google 中找到此信息，现在已经尝试了几个小时......我什至“Binged”了一次，哈哈。我知道这是可能的，因为我之前在插件评论中多次看到可点击的 url。

有人可以帮忙吗？请问好看吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-08T11:44:16.790

您不能在 fb 插件中插入可点击的 url，而且 facebook 也不允许谷歌抓取其内容。你更了解 facebook 的原因是 google 的最大竞争对手。

# haskell - 使用列表列表进行类型检查怪异

> ID：10473033
> 
> 赞同：1
> 
> 时间：2012-05-06T18:23:27.487
> 
> 标签：haskell, types

我不是 Haskell 专业人士。今天我对今天的类型系统有一个有点奇怪的经历。第二行将导致类型错误。问题是`maxdiag (as:bs:cs:ds)`第二行的一点：

```
maxdiag ((a:as):(b:bs):(c:cs):(d:ds):xs) len =
  maximum [a*(bs !! 0)*(cs !! 1)*(ds !! 2), maxdiag (as:bs:cs:ds) (len-1)] 
```

它失败并出现以下错误：

```
Occurs check: cannot construct the infinite type: a0 = [a0]
Expected type: [[a0]]
  Actual type: [a0]
In the second argument of `(:)', namely `ds'
In the second argument of `(:)', namely `cs : ds' 
```

当我将第二行的违规部分更改为`maxdiag (as:bs:cs:ds:xs)`, 使其显示为

```
maxdiag ((a:as):(b:bs):(c:cs):(d:ds):xs) len =
  maximum [a*(bs !! 0)*(cs !! 1)*(ds !! 2), maxdiag (as:bs:cs:ds:xs) (len-1)] 
```

...那么就没有错误了。同样，如果我用它替换`maxdiag (as:bs:cs:(ds:xs))`它成功。我的问题是

1.  这个错误是什么意思？
2.  为什么会发生？
3.  为什么这两个看似不同的东西可以解决它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T18:32:06.503

要记住的是，它`(:)`具有 type `a -> [a] -> [a]`，所以它的第一个参数是一个元素，而第二个参数是一个具有该元素类型的列表。如果元素本身是列​​表，则变为`[a] -> [[a]] -> [[a]]`.

在您的示例中`as`，`bs`,`cs`和`ds`all 都有 type `[a]`， while`xs`有 type `[[a]]`，所以`cs:ds`是一个错误，而`ds:xs`is well-typed 。

该特定错误消息的原因是，当您尝试`(:)`在两个相同类型`b`的事物上使用时，唯一可行的方法是 if`b`与 的类型相同`[b]`，但这将是一个不允许的无限类型。

对于另一个问题，`(:)`运算符是右结合的，因此与and`as:bs:cs:ds:xs`相同。`as:(bs:(cs:(ds:xs)))``as:bs:cs:(ds:xs)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T18:34:33.610

错误：

```
A.hs:2:63:
    Occurs check: cannot construct the infinite type: a0 = [a0]
    Expected type: [[a0]]
      Actual type: [a0]
    In the second argument of `(:)', namely `ds'
    In the second argument of `(:)', namely `cs : ds' 
```

意味着您对类型有递归约束，这是非法的。即你的类型`a`必须是`a`and `[a]`。

“[发生检查](http://en.wikipedia.org/wiki/Occurs_check)”是此时正在执行[的类型检查算法](http://en.wikipedia.org/wiki/Hindley%E2%80%93Milner#Algorithm_W)部分的技术名称。“发生检查”可防止构造无限递归类型。

以我的经验，发生类似列表错误的检查失败意味着您混淆`(:)`了`(++)`. 那就是您有时将值用作列表元素，有时将其用作列表本身。

在这种情况下，它是`(:)`在表达式中的使用`as:bs:cs:ds`。可能您的意思是：

```
[as,bs,cs,ds]++xs 
```

请注意，您的代码非常复杂 - 它对列表中元素的数量和形状做出了很多假设，而这些假设在任何时候都不太可能是正确的。我会非常害怕这段代码。这样做会更安全：

*   使用模式匹配来排除其他情况（例如空列表、缺少元素）
*   用模式匹配替换索引 (!!)。

并认真思考如何简化算法。

# android - xml中的Android位图泄漏内存？

> ID：10473038
> 
> 赞同：5
> 
> 时间：2012-05-06T18:24:08.110
> 
> 标签：android, memory-leaks, resources, bitmap, drawable

以下是一些新手内存管理观察，我想听听经验丰富的意见。

似乎在 xml 布局中设置 android:backgound="@drawable/xyz" 会导致我的应用程序出现内存丢失。相应的活动不断堆积，直到我收到 OOM 错误。如果我旋转设备方向，尤其如此。

但是，如果我使用 setBackgoundResource() 加载相同的资源，然后清除回调并将背景引用设置为 null，则不会有任何泄漏。

也就是先在 onCreate()

```
 mMainLayout.setBackgroundResource(R.drawable.background_general_android); 
```

然后在 onDestroy()

```
mMainLayout.getBackground().setCallback(null);
mMainLayout.setBackgroundDrawable(null); 
```

这是大致正确的，还是我错过了一些重要的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:30:45.957

仅当您将可绘制对象的副本保存在静态缓存中时，才会发生这种情况。您也可能会泄漏您的活动并将可绘制对象设置为 null 只会将问题隐藏更长时间。您应该使用 MAT 之类的工具来检查堆的内容并弄清楚发生了什么。

# c - 判断一个页面是否在内存中？

> ID：10473040
> 
> 赞同：3
> 
> 时间：2012-05-06T18:24:30.680
> 
> 标签：c, unix

有没有办法告诉（在 UNIX 上）进程的哪些内存页在 RAM 中，哪些已被换出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:30:42.090

不是以便携的方式。

即使有可能，也多半是无用的。您检查过的页面在您准备好使用时很可能会被换出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:27:25.190

没有便携的方式。您可以*防止*`mlock`页面被or换出`mlockall`（但这需要足够的权限），或者您可以使用不可移植的方法。在 Linux 上， 中的`kpageflags`文件`/proc`以及`pagemap`下的进程目录中的文件`/proc`应该足以为您提供信息。它们记录在 Linux 源代码`Documentation`树中。

# z3 - 在 z3 中列出 concat

> ID：10473042
> 
> 赞同：3
> 
> 时间：2012-05-06T18:24:41.423
> 
> 标签：z3

有没有办法在 z3 中连接两个列表？类似于 ML 中的 @ 运算符？我正在考虑自己定义它，但我认为 z3 不支持递归函数定义，即

```
define-fun concat ( (List l1) (List l2) List 
   (ite (isNil l1) (l2) (concat (tail l1) (insert (head l1) l2)) )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T07:52:39.630

## 2021 更新

以下答案写于 2012 年；9年前。它在很大程度上仍然是正确的；`define-fun-rec`除了 SMTLib 现在通过构造显式允许递归函数定义。然而，求解器的支持仍然很弱，关于这些函数的大多数感兴趣的属性仍然不能被证明是开箱即用的。底线仍然是这样的递归定义会导致归纳证明，而 SMT 求解器根本不具备进行归纳的能力。也许再过 9 年他们就能做到这一点，大概允许用户指定他们自己的不变量。目前，Isabelle、Coq、ACL2、HOL、Lean 等定理证明器仍然是处理这类问题的最佳工具。

## 2012年的回答

您是正确的，SMT-Lib2 不允许递归函数定义。（在 SMT-Lib2 中，函数定义更像宏，它们适合缩写。）

通常的*技巧*是将这些符号声明为未解释的函数，然后将定义方程断言为量化公理。当然，一旦量词发挥作用，求解器就可以开始返回`unknown`或`timeout`处理“困难”查询。然而，Z3 非常擅长于典型软件验证任务产生的许多目标，因此它应该能够证明许多感兴趣的属性。

这是一个示例，说明如何定义`len`和`append`遍历列表，然后证明有关它们的一些定理。请注意，如果证明需要归纳，则 Z3 可能会超时（如下面的第二个示例所示），但 Z3 的未来版本也可能能够处理归纳证明。

这是 Z3 网站上此示例的永久链接，如果您想尝试一下：[http ://rise4fun.com/Z3/RYmx](http://rise4fun.com/Z3/RYmx)

```
; declare len as an uninterpreted function
(declare-fun len ((List Int)) Int)

; assert defining equations for len as an axiom
(assert (forall ((xs (List Int)))
          (ite (= nil xs)
               (= 0                     (len xs))
               (= (+ 1 (len (tail xs))) (len xs)))))

; declare append as an uninterpreted function
(declare-fun append ((List Int) (List Int)) (List Int))

; assert defining equations for append as an axiom
(assert (forall ((xs (List Int)) (ys (List Int)))
            (ite (= nil xs)
                 (= (append xs ys) ys)
                 (= (append xs ys) (insert (head xs) (append (tail xs) ys))))))

; declare some existential constants
(declare-fun x () Int)
(declare-fun xs () (List Int))
(declare-fun ys () (List Int))

; prove len (insert x xs) = 1 + len xs
; note that we assert the negation, so unsat means the theorem is valid
(push)
(assert (not (= (+ 1 (len xs)) (len (insert x xs)))))
(check-sat)
(pop)

; prove (len (append xs ys)) = len xs + len ys
; note that Z3 will time out since this proof requires induction
; future versions might very well be able to deal with it..
(push)
(assert (not (= (len (append xs ys)) (+ (len xs) (len ys)))))
(check-sat)
(pop) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T11:11:40.870

虽然 Levent 的代码有效，但如果您愿意设置递归深度的界限，那么 Z3 通常对您的断言的麻烦要少得多。您甚至不需要依赖 MBQI，这通常需要花费太多时间才能实用。从概念上讲，您需要执行以下操作：

```
; the macro finder can figure out when universal declarations are macros
(set-option :macro-finder true)

(declare-fun len0 ((List Int)) Int)
(assert (forall ((xs (List Int))) (= (len0 xs) 0)))

(declare-fun len1 ((List Int)) Int)
(assert (forall ((xs (List Int))) (ite (= xs nil)
                                       0
                                       (+ 1 (len0 (tail xs))))))

(declare-fun len2 ((List Int)) Int)
(assert (forall ((xs (List Int))) (ite (= xs nil)
                                       0
                                       (+ 1 (len1 (tail xs)))))) 
```

... 等等。手动写下所有这些可能会很痛苦，所以我建议使用编程 API。（无耻的插件：我一直在研究[球拍绑定](https://github.com/sid0/z3.rkt)，[这就是](https://github.com/sid0/z3.rkt/blob/master/examples/list-helpers.rkt)你在那里的做法。）

# javascript - 带有 $(window).load(function() 的 Lab.js 和 jQuery 启动得太早了

> ID：10473044
> 
> 赞同：2
> 
> 时间：2012-05-06T18:25:27.767
> 
> 标签：javascript, jquery, labjs

我使用lab.js 2.0.3 来并行加载我的脚本。问题是，在 10 次中的 1 次中，“$(window).load”部分启动得太早了。带有“$(document).ready”的部分工作正常。

例子：

```
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script src="http://cdnjs.cloudflare.com/ajax/libs/labjs/2.0.3/LAB.min.js" type="text/javascript"></script>

<script>
    $LAB
        .script("script1.js")
        .script("script2.js")
        .script("script3.js")

        .wait(function(){

            $(window).load(function() {
                // Function 1
                $("jQuery Function 1");
                // Function 2
                $("jQuery Function 2");
            });

            $(document).ready(function() {
                // Function 3
                $("jQuery Function 3");
                // Function 4
                $("jQuery Function 4");
            });

        });
</script> 
```

我想，我做错了什么，但不知道是什么:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T18:45:43.763

这可能是因为`$(window).load()`每页只触发一次。如果您在等待脚本加载时错过了它，那么您就错过了它。因此，在`.wait`和之间`.load`，您的比赛条件无法真正预测您是否会赢或输。

`$(document).ready()`另一方面，它类似于延迟对象，因为可以在事件触发后添加新的回调，并且仍然会被调用。

你可以在这里看到这个演示：http: [//jsfiddle.net/coiscir/AFszS/1/](http://jsfiddle.net/coiscir/AFszS/1/)

```
$(window).load(function () {
    console.log('outer window.load');

    // bind after the event
    setTimeout(function () {
        $(window).load(function () {
            console.log('inner window.load'); // you'll never see this
        });
    }, 10);
}); 
```

`.ready`如果您想要与for类似的效果`.load`，您可以使用[延迟对象](http://api.jquery.com/category/deferred-object/)在实际事件和回调之间进行调解：http: [//jsfiddle.net/coiscir/m4D46/](http://jsfiddle.net/coiscir/m4D46/)

```
var windowLoad = $.Deferred();

$(window).load(windowLoad.resolve);

$LAB
    .script("script1.js")
    .script("script2.js")
    .script("script3.js")

    .wait(function(){

        windowLoad.done(function() {
            // Function 1
            $("jQuery Function 1");
            // Function 2
            $("jQuery Function 2");
        });

        $(document).ready(function() {
            // Function 3
            $("jQuery Function 3");
            // Function 4
            $("jQuery Function 4");
        });

    }); 
```

# cuda - CUDA开发在不同的卡上？

> ID：10473046
> 
> 赞同：0
> 
> 时间：2012-05-06T18:25:58.263
> 
> 标签：cuda

我刚刚开始学习如何进行 CUDA 开发（使用版本 4），并且想知道是否可以在我打算使用的不同卡上进行开发？据我所知，很高兴知道这一点，这样我就可以密切关注差异是否会影响我。

我有一个 2010 年中期的带有 Nvidia GeForce 320M 显卡的 macbook pro（它是一个非常基本的笔记本电脑集成卡），但我计划在 EC2 的 NVIDIA Tesla “Fermi” M2050 GPU 上运行我的代码。我想知道是否可以在我的笔记本电脑上进行本地开发，然后在 EC2 上以最小的更改运行它（我这样做是为了个人项目，不想花 2.4 美元进行开发）。

一个具体的问题是，我听说较新的卡（可能不在我的笔记本电脑中）支持递归，如果我在笔记本电脑的 gpu 上运行递归怎么办？它会踢出错误还是会运行但不利用硬件功能？（我不需要对此的具体答案，但这就是我所得到的）。

如果这将是一个问题，是否有我当前卡中没有的功能的模拟器？还是 SDK 会为我模拟它？

对不起，如果这个问题太基本了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T18:50:05.657

是的，使用不同的 GPU 进行开发和生产是很常见的做法。nVidia GPU 代是向后兼容的，因此如果您的程序在旧卡上运行（即如果 320M (CC1.3)），它肯定会在 M2070 (CC2.0) 上运行）。

但是，如果您想获得最大的性能，您应该在您将要使用它的相同架构上对您的程序进行概要分析，但是从 1.x 迁移到 2.0 时，通常一切都运行良好，没有任何更改。任何模拟器都比在不管旧的 GPU 上运行时所提供的更糟糕的视图。

关于递归：尝试为 1.3 架构编译具有明显递归的程序会产生编译时错误：

```
nvcc rec.cu -arch=sm_13
./rec.cu(5): Error: Recursive function call is not supported yet: factorial(int) 
```

在更复杂的情况下，程序可能会编译（我不知道编译器在检测递归方面有多聪明），但肯定不会工作：在 1.x 架构中没有调用堆栈，所有函数调用实际上都是内联的，所以递归在技术上是不可能的。

但是，我强烈建议您不惜一切代价避免递归：它违背了 GPGPU 编程范式，并且肯定会导致性能非常差。大多数算法在不使用递归的情况下很容易重写，而且使用它们是更可取的方式，不仅在 GPU 上，在 CPU 上也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T18:53:16.760

Cuda 版本起初并不那么重要。更重要的是卡的计算能力。

如果您使用 cc 1.0 对内核进行编程并且它们在未来是可扩展的，那么您将不会遇到任何问题。

为您的应用选择所需的最低 cc 级别。

**使用属性计算必要参数并使用 ptx jit 编译：**

如果您的内核可以处理任意输入大小的数据，并且您的内核启动配置可以跨数千个线程扩展，那么它将跨未来版本扩展。

在我的项目中，我的所有内核都使用每个块的固定线程数，这等于每个流式多处理器的常驻线程数除以每个流式多处理器的常驻块数，以达到 100% 的占用率。一些内核每个块需要两个线程数的倍数，所以我也处理了这种情况，因为并非对于所有 cc 版本，上述等式都保证了两个块大小的倍数。

一些内核使用共享内存，它的大小也被 cc 级别的属性扣除。

此数据是在实用程序类中使用 (cudaGetDeviceProperties) 接收的，并且使用 ptx jit 编译我的内核在所有设备上都没有任何更改。我在 cc 1.1 设备上编程并在最新的 cuda 卡上运行测试，没有任何更改！

所有内核都被编程为使用 64 位长度的输入数据并利用 3D 网格的所有维度。（我很确定一年后我会继续从事这个项目，所以这是必要的）

我所有的内核除了一个没有超过 cc 1.0 寄存器限制，同时具有 100% occ。因此，如果使用的卡 cc 低于 1.2，我在内核中添加了一个 maxregcount 命令以仍然强制执行 100% occ。

**这并不能保证最佳性能！**

为了获得可能的最佳性能，应就其参数和资源对每个内核进行分析。

**这可能不适用于所有应用程序和要求**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T15:57:00.647

带有 CUDA 5 的 NVidia Kepler K20 GPU 将于 2012 年第四季度推出，将支持递归算法。

# nservicebus - 为什么选择 NServiceBus ForwardRecievedMessagesTo 以及使用它对性能有何影响？

> ID：10473047
> 
> 赞同：0
> 
> 时间：2012-05-06T18:26:07.943
> 
> 标签：nservicebus, nservicebus3

ForwardRecievedMessagesTo 的预期用途是什么？

我读了一些支持审计的地方。将其用作解决方案以确保消息已被处理并且如果不重新处理它们是否有任何危害？假设一条消息被发送到 queue_A@server_A 并转发到 q_All@server_All 并且在处理消息之前，machine_A 不可恢复地死了。在这种情况下，我可以让处理程序从 q_All@sever_All 中提取消息，并检查数据库表是否已处理该消息。如果不重新处理（发布或发送）消息或将其保存在数据库表中。

另外，使用 forwardreceivedmessageto 对性能有何影响？它与日记有什么不同？

是的，我试图不使用 msmq 集群。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:38:46.970

该功能用于支持审计。如果您的机器在处理过程中死机，则消息将在发送机器上备份，并在机器恢复后继续流动。这意味着您必须适当地调整发送机器上的磁盘大小。您可以利用审计来完成此任务，并且开销将是最小的。这意味着将分布式事务完成到您的审计队列所在的另一台机器所需的时间应该非常小。

# paypal - 没有收到任何 PayPal IPN

> ID：10473051
> 
> 赞同：1
> 
> 时间：2012-05-06T18:26:33.090
> 
> 标签：paypal, paypal-ipn

我正在尝试在我的网站上实施贝宝支付系统。我有点卡在接收 IPN 上。该网站是用 PHP 开发的，基于 ZendFramework 和 Doctrine 1.2.3

我使用位于贝宝网站上的示例脚本来接收 IPN，但是它不起作用。出于调试目的，我留在了 IPN 页面代码上，该代码只是在我的 mysql 数据库中的表中插入一个新条目，所以每次我加载页面时，都会在数据库中插入一个新条目。

我再次尝试使用 PayPal 的即时付款通知 (IPN) 模拟器，并尝试向该页面发送一个新的 IPN，但是数据库中没有插入任何内容，所以我最好的猜测是，paypal 无法访问我的页面，即使它表示IPN成功发送。

ipn url 类似于： http: [//mydomain.com/shop/paypal/ipn](http://mydomain.com/shop/paypal/ipn)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T22:19:02.270

我终于明白了。看起来，paypal 不会将 IPN 数据发送到以下网址： domain.com/shop/ipn 。我创建了一个单独的 php 文件，与我使用的框架无关，因此 ipn url 看起来像：domain.com/ipn.php。现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T08:58:28.283

我回来了一个正确的答案。它不起作用的原因不是任何 paypal ipn url-form 限制。我使用 Zend_Translate 进行多语言支持，并将访问者浏览器发回给我的默认语言用作默认语言。问题是当 paypal 向我发送它没有提供的 IPN 时任何默认语言，这会在我的代码中生成异常并导致应用程序崩溃，因此没有收到任何 IPN。

此外，如果有人需要在 Zend 中使用自定义 URL，他们可以使用 Zend_Controller_Router_Route_Regex，更多信息在这里：

[http://framework.zend.com/manual/1.10/en/zend.controller.router.html#zend.controller.router.routes.regex](http://framework.zend.com/manual/1.10/en/zend.controller.router.html#zend.controller.router.routes.regex)

# ruby-on-rails - rails中的部分和文本字段

> ID：10473053
> 
> 赞同：0
> 
> 时间：2012-05-06T18:26:51.090
> 
> 标签：ruby-on-rails, model-view-controller

我的rails应用程序中有这样的部分（使用haml标记）：

```
%p
    = line_item.ART_ID
    &times
    = line_item.quantity
    = line_item.total_price 
```

但我想使用 ajax 编辑这个 line_item.quantity 字段，使用来自 html 的文本字段，但是如何正确执行此操作，以便文本字段值必须是 line_item.quantity ？我尝试了所有简单的视图，但不是部分视图......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:43:46.477

```
= %input{ :value => line_item.quantity } 
```

这将创建一个带有数量初始值的标签。您也可以使用 rails 中的 text_field 助手来完成，但它们完成了同样的事情。要使用 ajax 编辑它，您可能需要给它一个 ID

```
= %input#someID{ :value => line_item.quantity } 
```

# .net - 获取 Windows 窗体的干净图像

> ID：10473056
> 
> 赞同：-1
> 
> 时间：2012-05-06T18:27:22.147
> 
> 标签：.net, windows, vb.net, winforms

我想知道如何在 .NET 中获取 Windows 窗体的图像/屏幕截图，因为它正在运行**，就像它在设计器中看到的那样/当它第一次打开时**，即控件中没有任何文本等。基本上我会就像表格的图像一样，因为它是干净的副本。有没有办法做到这一点？

我认为一种方法可能是打开表单后立即获取表单的图像，但我的情况是我不知道主应用程序中会有哪些表单（我正在开发一个类库） ，据我所知，没有全局表单加载事件或解决此问题的方法。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:33:31.323

不，没有办法。你最好的选择是使用打印屏幕

# php - 一些重写规则，导致404不能正常工作

> ID：10473058
> 
> 赞同：0
> 
> 时间：2012-05-06T18:27:25.913
> 
> 标签：php, mod-rewrite

我有一个前端控制器执行以下操作：

```
$pages = array('home', 'login', 'create-account', 'activate');
$page = ((empty($_GET['p'])) ? 'home' : $_GET['p']);

if (in_array($page, $pages) && file_exists($page . '.php'))
    include $page . '.php';
else
    include '404.php'; 
```

然后我有这个`mod_rewrite`

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z-]+)$ index.php?p=$1 [L]
RewriteRule ^(activate)/([\w-]+)$ index.php?p=$1&f=$2 
```

如果我访问

[http://localhost/文件夹/登录](http://localhost/folder/login)

有用：

如果我访问：

[http://localhost/文件夹/](http://localhost/folder/) $$$$

它会给我一个真正的 404（不是我的自定义 :P），而不是把我送到 404 页面。这是因为重写规则：

RewriteRule ^([az-]+)$ index.php?p=$1 [L] 因为它只接受 az 和 -

如果我将其重写为：

```
RewriteRule ^(.*)$ index.php?p=$1 [L] 
```

它可以工作并发送到 404，但是这种重写不起作用：

```
RewriteRule ^(activate)/([\w-]+)$ index.php?p=$1&f=$2 
```

由于第一个将匹配。

如果我尝试改变位置：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(activate)/([\w-]+)$ index.php?p=$1&f=$2 [L]
RewriteRule ^(.*)$ index.php?p=$1 [L] 
```

我在所有页面上都收到 404。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-11T12:46:37.890

问题解决了。使用不同的方法，我用 PHP 解析了 url。

# c - 欧拉项目练习 5 方法

> ID：10473060
> 
> 赞同：-1
> 
> 时间：2012-05-06T18:27:36.630
> 
> 标签：c

问题：2520 是可以除以 1 到 10 的每个数字而没有余数的最小数字。

能被 1 到 20 的所有数整除的最小正数是多少？

所以，我试图在项目 euler 上做练习 5，我得出了以下代码：

```
#include <stdio.h>
#define TRUE 1
#define FALSE 0

int main () {
   int n, fnd = FALSE, count, i; 

   for (i = 1; fnd == FALSE; i++) {       
      count = 0;
      for (n = 1; n <= 20; n++) {
         count += i % n;
      }
      printf ("testing %d, count was: %d\n", i, count);
      if (count == 0) {
         fnd = TRUE;
         printf ("%d\n", i); 
      }
   }
   return 0;
} 
```

我相信我的方法是正确的，它肯定会找到可被 1 到 20 整除的数字。但是它已经计算了 5 分钟，仍然没有结果。我的方法正确吗？如果是，那么还有其他方法吗？我想不出另一种方法来解决这个问题，非常感谢提示。先感谢您。

编辑：所以，根据你们给我的建议，我想通了，非常感谢！所以，它仍然是蛮力，但不是在最后一个数字上加 1，而是现在加 2520，即 1 到 10 的 LCM。因此，计算 2520 的倍数的余数之和是否从 11 到20 是 0。由于 2520 已经可以被 1 整除到 10，所以我只需要除以 11 到 20。

```
#include <stdio.h>
#define TRUE 1
#define FALSE 0

int main () {
   int n, fnd = FALSE, count, i; 

   for (i = 2520; fnd == FALSE; i = i + 2520) {       
      count = 0;
      for (n = 11; n <= 20; n++) {
         count += i % n;
      }
      printf ("testing %d, count was: %d\n", i, count);
      if (count == 0 && i != 0) {
         fnd = TRUE;
         printf ("%d\n", i); 
      }
   }
   return 0;
} 
```

非常感谢，如果没有你的帮助，我不会解决它 :) PS：它现在计算时间不到 10 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T18:34:21.457

您的方法耗时太长，因为它是一种蛮力解决方案。你需要稍微聪明一点。

我给你的提示是：一个数可以被另一个数整除是什么意思？或者低于某个数字的每个数字？**数的素因数**有共性吗？关于可分性的[维基百科页面](http://en.wikipedia.org/wiki/Divisibility)应该是一个很好的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T18:36:33.070

提示：您应该查找“最小公倍数”。

* * *

下一个提示：

1.  答案是数字 1、2、3、...、20 的最小公倍数 (LCM)。
2.  *n*个数的 LCM可以依次找到：如果 LCM(1, 2) = *x*，则 LCM(1, 2, 3) = LCM( *x* , 3)；如果 LCM(1, 2, 3) = *y*，则比 LCM(1, 2, 3, 4) = LCM( *y* , 4) 等。所以知道如何找到任何 2 个数字的 LCM 就足够了。
3.  为了找到 2 个数字的 LCM，我们可以使用以下公式：LCM( *p* , *q* ) = *pq* /GCD( *p* , *q* )，其中 GCD 是最大公约数
4.  为了寻找 GCD，有一个著名的 Euclid 算法（也许是地球上第一个非平凡算法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T19:05:56.030

我认为您应该首先计算从 2 到 20 的每个数字的质因数。由于所需的数字应该能被 1 到 20 的每个数字整除，它也必须能被这些数字的每个质因数整除。

此外，重要的是要跟踪主要因素的多样性。例如，4 = 2 * 2，因此所需的数字必须能被 2 * 2 整除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T19:41:03.310

我用 Python 3 快速烘焙的东西：

```
primary_list = []
for i in range(2, 4097):
    j = i
    k = 2
    delta_list = primary_list[0:]
    alpha_list = []
    while j > 1:
        if j % k == 0:
            j /= k
            alpha_list.append(k)
            k = 2
        else:
            k += 1
    for i in alpha_list:
        try:
            delta_list.remove(i)
        except:
            primary_list.append(i)
final_number = 1
for i in primary_list:
    final_number *= i
print(final_number) 
```

*这在慢速*机器下只需几秒钟即可计算。Python 非常擅长处理抽象数字。工作的最佳工具。

算法比较简单。我们有一个基本列表**primary_list**，我们在其中存储数字的倍数。然后是我们估计要计算的数字范围的循环。我们使用一个临时变量**j**作为一个可以轻松除、切和征服的数字。我们使用**k**作为除数，从**2**开始。delta_list是 primary_list 的主要工作副本，**我们****在**其中一个接一个地拆分数字，直到只剩下所需的“**逻辑**”。然后我们将这些数字添加到我们的主要列表中。

1：**1**
2：**2** 1
3：**3** 1
4：2 **2** 1
5：**5** 1
6：2 3 1
7：**7** 1
8：2 2 **2** 1
9：3 **3** 1
10：2 5 1

最终数字是通过将我们在**primary_list**中的数字相乘得到的。
1 * 2 * 3 * 2 * 5 * 7 * 2 * 3 = 2520

如前所述，Python **_really_**擅长处理数字。这是完成这项工作的最佳工具。这就是为什么你应该使用它而不是 C、Erlang、Go、D 或任何其他动态/静态语言来进行欧拉练习。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T19:40:03.083

我用C解决了它。下面是算法！

```
#include <stdio.h>
#include <stdio.h>
int main()
{
 int i;
 int count;
 for(i=21;i>0;i++)
  {  count = 0;
  for( int j=2;j<21;j++)
 {
  if (i%j!=0)
  break;
  count++;
  } 
  if (count==19)
  break;
   }

 printf("%d\n",i);
 return 0;
   } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-18T23:34:28.087

只是对以上评论的一些想法，

@pg190 你说“它实际上只需要被 1 到 20 之间的素数整除，即 2、3、5、7、11、13、17、19。” 取 9699690，不偏离 1-20 的所有值。

所以这可能是一个很好的解决方案，

给定数字集 [1-20]

最小公倍数可以如下计算。

前任。对于数字 2,6,9

用素数乘法表示它们 2 2

6 2 3

9 3 3

LCM = 每个素数的最高幂的倍数。= 2*3^2 = 18

这可以通过将每个数字表示为素数乘法然后做这个数学来解决手头的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-28T06:45:49.467

```
$num=20;
        for($j=19;$j>1;$j--)
        {
            $num= lcm($j,$num);
        }
        echo $num;
        function lcm($num1, $num2)
        {
            $lcm = ($num1*$num2)/(gcd($num1,$num2));
            return $lcm;
        }
        function gcd($n1,$n2)
        {
            $gcd=1;
            $min=$n1;
            if($n1>$n2)
            {
                $min=$n2;
            }
            for($i=$min;$i>1;$i--)
            {
                if($n1%$i==0 && $n2%$i==0)
                {
                    $gcd*=$i;
                    $n1/=$i;
                    $n2/=$i;
                }
            }
            return $gcd;
        } 
```

用php解决

# android - 如何绘制超出视图翻译限制？

> ID：10473063
> 
> 赞同：0
> 
> 时间：2012-05-06T18:27:44.660
> 
> 标签：android, graphics, translation, invalidation

以下程序绘制了一个饼图（部分圆形，一个扇区），而我希望它绘制整个（整圆）圆形。如何画出整个圆圈？

自定义视图代码：

```
public class CentralCircleView extends View {

private Paint circlePaint = new Paint();
{
    circlePaint.setColor(Color.RED);
    circlePaint.setAntiAlias(true);
}

public CentralCircleView(Context context) {
    super(context);
}

public CentralCircleView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawCircle(0, 0, 100, circlePaint);
}
} 
```

活动代码：

```
public class TransformsActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    CentralCircleView centralCircleView = (CentralCircleView) findViewById(R.id.centralCircleView);
    centralCircleView.setTranslationX(200f);
    centralCircleView.setTranslationY(200f);
    centralCircleView.invalidate();
}
} 
```

布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"

>

<com.inthemoon.incubation.CentralCircleView
    android:id="@+id/centralCircleView"
    android:layout_marginLeft="0dp"
    android:layout_marginTop="0dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     />

</RelativeLayout> 
```

这就是它所绘制的。圈子的其余部分在哪里？

![在此处输入图像描述](../Images/56be83262ee3fd631412ec8aea0ca7d3.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T19:31:31.823

您的 View 将其高度设置为 wrap_content 这意味着您需要实现 onMeasure() 方法来告诉 RelativeLayout 视图想要多大。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-05-07T15:41:41.367

To draw "outside the view" one should use `clipRect()` method. For example, in my case, I was to write `onDraw()` in the following way:

```
protected void onDraw(Canvas canvas) {
    canvas.clipRect(new Rect(-100,-100,100,100), Region.Op.UNION);
    canvas.drawCircle(0, 0, 100, circlePaint);
} 
```

# java - JComboBox 项目监听器

> ID：10473065
> 
> 赞同：0
> 
> 时间：2012-05-06T18:27:59.470
> 
> 标签：java, swing, jcombobox, itemlistener, comboboxmodel

我有两个组合框。第一个包含一些运算符 (+ , - ,* ,/)，第二个包含一些从 0 到 10 的值。当用户在第一个组合框中选择 (/) 时，我希望第二个显示一个从 2 到 10 的值从 0 到 10。

我试过这个：

```
String[] operators = {"+","-" ,"*", "/"};

String[] number = {"0","1","3"....."10"};

divisionModel= new DefaultComboBoxModel(new String[]{"2","3","4","5".."10"});

    operatorCombo = new JComboBox(operators);

    numberCombo = new JComboBox(number);

operatorCombo.addItemListener(new ItemListener() {
    public void itemStateChanged(ItemEvent e) {

    if (operatorCombo .getSelectedItem().equals("/")){

        numberCombo .setModel(divisionModel);
  } 
```

我的问题是当我选择（“/”）时 numberCombo 工作正常并显示从 2 到 10 的数字但是当我点击另一个运算符时它仍然显示从 2 到 10 而不是 0 到 10 的数字。我该如何解决这个问题问题？！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:15:31.813

```
// always compare objects using equals()
if (operatorCombo.getSelectedItem().equals("/")) {.. 
```

至于更新第二个组合，为其创建一个新模型并调用[`setModel(ComboBoxModel)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#setModel%28javax.swing.ComboBoxModel%29).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T20:32:39.940

您可能会查看此[示例](https://stackoverflow.com/a/3191882/230513)，该示例显示了在 one`JComboBox`中所做的选择如何`JComboBox`通过使用不同的`DefaultComboBoxModel`.

# iphone - iOS/iPhone 上的 Facebook 身份验证屏幕不同

> ID：10473066
> 
> 赞同：0
> 
> 时间：2012-05-06T18:28:02.053
> 
> 标签：iphone, objective-c, facebook

我将 facebook-ios-sdk 用于我的 iPhone 应用程序，并在用户按下按钮时启动授权屏幕。但我总是得到不同的授权屏幕。我在高级设置中启用了“增强的身份验证对话框”...

![在此处输入图像描述](../Images/1fbfc54b35c2459c3915e1a1e0df2b27.png)

其他应用程序使用这个：

![在此处输入图像描述](../Images/26b22f8287be30ba8680d256b20e04d0.png)

```
facebook = [[Facebook alloc] initWithAppId:@"167080433419201" andDelegate:self];

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
   facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
   facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}

if (![facebook isSessionValid]) {
   NSArray *permissions = [[NSArray alloc] initWithObjects:@"user_about_me",nil];
   [facebook authorize:permissions];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:37:56.703

如果用户的应用隐私列表中没有权限，OAuth 要求用户登录以获得授予的权限。登录并允许应用权限请求后，我们可以从重定向的 url中获取**access_token 。**

因此，您的情况是您必须先登录，并且您的 ios 测试应用程序可能已经存在于 facebook 应用程序隐私列表中。

第二个屏幕已经登录，但第一个屏幕没有。您应该采用 FBSessionDelegate 来存储 access_token 和到期日期。

```
- (void)fbDidLogin {
     NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:38:49.007

检查您在授权 facebook 时设置的权限。

这只是一个例子

```
NSArray *permissions = [[NSArray alloc] initWithObjects:
            @"user_likes", 
            @"read_stream",
            nil];
        [facebook authorize:permissions]; 
```

您可以在此处找到更多权限类型：[https ://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:41:18.067

我找到了解决方案，我尝试了不同的权限。但是授权屏幕需要一段时间才能切换到正确的屏幕......

# java - 使用 Spring MVC 请求后接收 HTTP 状态

> ID：10473067
> 
> 赞同：4
> 
> 时间：2012-05-06T18:28:05.953
> 
> 标签：java, spring-mvc, http-headers

我正在向服务器发送数据，并且我想接收 HTTP 响应状态以检查此状态并提供适当的视图

```
 @RequestMapping(method = RequestMethod.POST)
     public String Login(@ModelAttribute("Attribute") Login login, Model model,HttpServletRequest request) {

          // Prepare acceptable media type
          ArrayList<MediaType> acceptableMediaTypes = new ArrayList<MediaType>();
          acceptableMediaTypes.add(MediaType.APPLICATION_XML);

          // Prepare header
          HttpHeaders headers = new HttpHeaders();
          headers.setAccept(acceptableMediaTypes);

          HttpEntity<Login> entity = new HttpEntity<Login>(login, headers);

          // Send the request as POST
          try {
           ResponseEntity<Login> result = restTemplate.exchange("http://www.../user/login/", 
                   HttpMethod.POST, entity, Login.class);
          } catch (Exception e) {
          }
      //here i want to check the received status
      if(status=="OK"){
         return "login"
      }
      else          
      return "redirect:/home";
     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T18:51:14.543

有什么问题：

```
HttpStatus status = result.getStatusCode();
if(status == HttpStatus.OK) 
```

请参阅：[`ResponseEntity`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/http/ResponseEntity.html)JavaDoc。

顺便说一句，您不应使用`==`此处的运算符比较字符串：

```
status=="OK" 
```

而是使用以下成语：

```
"OK".equals(status) 
```

Java中的方法名称也倾向于以小写字母开头。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T18:50:09.737

[ResponseEntity](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/http/ResponseEntity.html)对象包含 HTTP 状态代码。

```
// Prepare acceptable media type
ArrayList<MediaType> acceptableMediaTypes = new ArrayList<MediaType>();
acceptableMediaTypes.add(MediaType.APPLICATION_XML);

// Prepare header
HttpHeaders headers = new HttpHeaders();
headers.setAccept(acceptableMediaTypes);

HttpEntity<Login> entity = new HttpEntity<Login>(login, headers);
// Create status variable outside of try-catch block
HttpStatus statusCode = null;

// Send the request as POST
try {
  ResponseEntity<Login> result = restTemplate.exchange("http://www.../user/login/", 
  HttpMethod.POST, entity, Login.class);
  // Retrieve status code from ResponseEntity
  statusCode = result.getStatusCode();
} catch (Exception e) {
}
// Check if status code is OK
if (statusCode == HttpStatus.OK) {
  return "login"
}
else          
  return "redirect:/home"; 
```

# magento - 如何在我的主页上的新产品部分获得评分摘要？

> ID：10473071
> 
> 赞同：1
> 
> 时间：2012-05-06T18:28:51.663
> 
> 标签：magento, rating, product

在我的主页上，我有“新产品”部分。我使用以下代码创建了它：

```
<block type="catalog/product_new" name="home.catalog.product.new" alias="product_homepage2" template="catalog/product/new.phtml">
<action method="setColumnCount"><columns>3</columns></action>
<action method="setProductsCount"><count>3</count></action>
</block> 
```

这很好，但我还想在我的主页上显示评分摘要（星级和评论数量）：

```
<?php if($_product->getRatingSummary()): ?>
<div class="ratingsum">
<?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
</div> 
```

上面的代码没有任何回报。好像没有评论，但我绝对知道有评论！

问题似乎是块类型，对于新产品：`catalog/product_new`对于畅销书`bestsellers/list`，这可能吗？

我的主页上还有一个“畅销书”部分。获得评级摘要没有问题。

还：

```
$_productCollection=$this->getLoadedProductCollection(); 
```

在我的`new.phtml`. 它不返回任何集合/产品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T07:14:44.193

下面是检索产品评级摘要的代码。

```
$storeId    = Mage::app()->getStore()->getId();
     $summaryData = Mage::getModel('review/review_summary')
       ->setStoreId($storeId)
       ->load('product_id');
       if($summaryData->getRatingSummary()){
       ?>
       <div class="rating-box" style="float:left;">
            <div class="rating" style="width: <?php echo $summaryData->getRatingSummary().'%'; ?>"></div>
       </div>
       <?php 
       } 
```

请务必将正确的产品 ID 号传递给它。

# http - 什么是带有获取参数的图像请求

> ID：10473072
> 
> 赞同：0
> 
> 时间：2012-05-06T18:29:33.383
> 
> 标签：http, google-analytics

在尝试了解[google 关键字工具](https://adwords.google.com/o/Targeting/Explorer?__c=6116085536&__u=2263864376&__o=cues&ideaRequestType=KEYWORD_IDEAS)如何请求数据时，我发现它请求带有 GET 参数的 .gif 文件。例如：

```
https://ssl.google-analytics.com/__utm.gif?utmwv=&utms=&utmn=&utmhn=&utmt=&utme=&utmcs=utmsr=&utmvp=&utmsc=&utmul=&utmje=&utmfl=&utmdt=&utmhid=&utmr=&utmp=&utmac=&utmcc=&utmu= 
```

（*我省略了所有参数的数据*）

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:15:07.477

虽然这是一个请求，但其目的是在查询字符串参数中发送分析数据。有关详细说明，请参阅[Google Analytics 为什么使用 __utm.gif？](https://stackoverflow.com/questions/4170190/why-does-google-analytics-use-utm-gif).

有关 GIF 请求的实际参数的更多详细信息，请参阅：[https ://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting#gifParameters](https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting#gifParameters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:36:49.870

此 GET 请求由 Google 的分析服务器处理。它可能不只是直接从文件系统的某个地方提供 __utm.gif ；它可能会执行一个包含所有参数的脚本，进行一些处理，并将请求记录在他们的分析数据库中，*然后*提供一个 1x1 透明的 GIF。

# layout - JavaFX FXML 的工作方式与 SceneBuilder (sceencast) 中的不同

> ID：10473074
> 
> 赞同：1
> 
> 时间：2012-05-06T18:30:09.563
> 
> 标签：layout, resize, javafx-2, fxml, scenebuilder

我有这个在 SceneBuilder Preview 中完美运行的 FXML，并且在 NetBeans JavaFX 示例应用程序上的行为完全不同（因此没有任何额外的东西可以破坏它的行为）。（见[截图](http://screencast.com/t/9PR9snLd)）

我需要 2 个 TitledPanes 来根据窗口自动调整大小（一半和一半）（因为它在 SceneBuilder 预览中工作）。

```
<AnchorPane id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefWidth="798.0" xmlns:fx="http://javafx.com/fxml" fx:controller="javafxapplication2.Sample">
  <children>
    <VBox id="vBox1" prefWidth="770.0" spacing="25.0" AnchorPane.bottomAnchor="25.0" AnchorPane.leftAnchor="25.0" AnchorPane.rightAnchor="25.0" AnchorPane.topAnchor="25.0">
      <children>
        <TitledPane id="titledPane1" fx:id="test" prefWidth="748.0" text="Admin" VBox.vgrow="ALWAYS">
          <content>
            <AnchorPane id="Content" minHeight="0.0" minWidth="0.0">
              <children>
                <TableView id="tableView1" prefWidth="718.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0" />
              </children>
            </AnchorPane>
          </content>
        </TitledPane>
        <TitledPane id="titledPane2" prefWidth="748.0" text="Resellers" VBox.vgrow="ALWAYS">
          <content>
            <AnchorPane id="Content" minWidth="0.0" prefWidth="744.0">
              <children>
                <TableView id="tableView2" prefWidth="200.0" AnchorPane.bottomAnchor="14.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="14.0" />
              </children>
            </AnchorPane>
          </content>
        </TitledPane>
      </children>
    </VBox>
  </children>
</AnchorPane> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T21:55:01.363

SceneBuilder Preview 和 NetBeans JavaFX 示例应用程序使用不同版本的 JavaFX。可能 SceneBuilder 使用的是 2.1 和 NetBeans 2.0.2。通过升级您机器的 Java 版本或将新的 jfxrt.jar 版本导入您的类路径（即导入 netbeans 应用程序库）来升级应用程序的版本。

# java - 我需要使用 Apache POI 在 Excel 工作表上迭代到 Java 列的末尾

> ID：10473075
> 
> 赞同：0
> 
> 时间：2012-05-06T18:30:22.117
> 
> 标签：java, excel, nullpointerexception, apache-poi, xlsx

我正在迭代一列值，直到它出现空白。我需要收集整个列并存储它，而不需要其他值。我试图检查空白、null、0、"" 和 CELL_TYPE_BLANK (int = 3)，但我无法避免空指针异常。代码片段和错误如下。我能做些什么？这不是整个方法或程序，只是相关部分。

```
String s = list[i];
//find the directory from the list array to locate the file
InputStream input = new FileInputStream(s);
//create a new workbook object to hold the excel file
Workbook wb = new XSSFWorkbook(input);
//create an arbitrary starting location
int column = 2; //absolutely the correct number
int rownum = 10;
//get the value from the first sheet
org.apache.poi.ss.usermodel.Sheet insheet = wb.getSheetAt(0);       
//of the second columm
Row row = insheet.getRow(rownum);
//in the 11th row (arbitrary number used to reduce iterations and skip whitespace)
Cell cell = row.getCell(column); 
System.out.println("Skimming sheet: " + insheet.getSheetName());
//iterate until the very end of the column is found
System.out.println("Cell value B" + (rownum-1) +  ": " + cell);

//3 denotes CELL_TYPE_BLANK
while (cell.getCellType() != 3 ) {
    //go to the next location
    //update to the next cell
    System.out.println("Cell value B" + rownum +  ": " + cell);
    row = insheet.getRow(rownum);
    if(row.getCell(column).getCellType() != 3){
        cell = row.getCell(column); //error occurs here, line 241
    }
    rownum++;
}

Exception in thread "main" java.lang.NullPointerException
    at FileTest.skim(FileTest.java:241)
    at FileTest.main(FileTest.java:121) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:40:04.400

你得到错误是因为你试图访问的行是空的，而不是单元格。您想看看[Apache POI 迭代器](http://poi.apache.org/spreadsheet/quick-guide.html#Iterator)示例。

```
//taken from the example
Sheet sheet = wb.getsheetat(0);
for (Iterator<Row> rit = sheet.rowiterator(); rit.hasnext(); ) {
    Row row = rit.next();
    //now, based in your needs
    Cell cell = row.getCell(column);
    //do what you need with the row-column
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:41:47.457

将 for 循环中的行迭代到最后一行，这将防止遇到该异常：

```
 for(int i =0 ; i< insheet.getLastRowNum(); i++){
//do stuff
} 
```

# multithreading - 如何为用户线程提供比内核线程更高的优先级（work_queues）

> ID：10473076
> 
> 赞同：1
> 
> 时间：2012-05-06T18:30:34.397
> 
> 标签：multithreading, linux-kernel, kernel, thread-priority

我正在运行一个应用程序，其中某些用户线程不能被内核抢占。我将解释我的设置：操作系统：Linux 2.6.32 内核

内核级别： 1.有许多模块被嵌入到内核中。2.Work_queues 也在一些模块中被初始化（我猜为work_queues 创建了单独的线程） 3.如果我得到任何硬件中断，我会在我的isr 期间将这项工作排队在任何这些初始化的work_queue 中。

应用层：有多个线程并行运行，其中一些线程的优先级高于进程中的任何其他线程。（甚至内核）

目标：1.如果我收到任何硬件中断，将自动调用isr，其中工作将排队等待任何work_queue。但是，如果在此期间运行更高优先级的用户级线程，我不希望调度这些work_queues。即，某些用户级线程不应被内核中的任何工作队列处理抢占。现在，我观察到内核比任何其他用户线程都具有优先级。2.我在内核中有多个work_queues。如何为不同的工作队列赋予不同的优先级。我还没有看到任何api为内核中的work_queues设置优先级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:37:34.637

用户线程必须始终被内核模式线程抢占，因为内核模式线程需要响应硬件事件。这是设计使然。

如果您的用户模式线程需要与硬件交互或者是实时的，因此不能被抢占，请考虑将它们设为内核模式线程。

如果您只是遇到由于您的线程在关键操作期间被取消调度并最终导致另一个线程践踏您的操作而导致的错误，那么您应该实施锁定。

如果您有打破 linux 内核的基本设计的自定义需求，您将需要更改内核模式调度程序的行为。

# android - OpenGL-ES 中的材质影响其他纹理

> ID：10473079
> 
> 赞同：0
> 
> 时间：2012-05-06T18:30:54.103
> 
> 标签：android, opengl-es, light

我在使用适用于 android 的 OpenGL-ES (1.0) 时遇到了一个问题，我无法理解。我有多个通过 OpenGL-ES 显示的 3D 对象，我决定使用以下方法提供一些材料：

> gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_... , ... , 0);

对于我正在绘制的每个对象，我都会这样做：

```
gl.glPushMatrix();
*make some adjustment to object*
gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_AMBIENT, ambient, 0);
gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_DIFFUSE, diffuse, 0);
gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_SPECULAR, specular, 0);
gl.glPopMatrix(); 
```

其中“环境”、“漫反射”和“镜面反射”对每个对象都是唯一的。

结果是，如果我在一种材质中使用更多的红色环境光，这将影响另一个可见物体也显示出一点点红色。

如下所示，左侧三分之二的对象被设置为在其材质中获得更多的红色环境。右边的材料不应该发光，因为它的材料没有发光，但它仍然发光。（图片显然有点修改，使其更清晰）。

![](../Images/be6cc24416bd942157ef847e4a02eff9.png)

我使用的每个对象都有一个自己的材质类，其中包含有关其材质的信息。

任何关于我错过的东西的想法，或者这就是材料在 OpenGL 中的实际工作方式？

（我使用定向光在一个方向照亮整个场景）

编辑：为了使这一点更清楚，影响其他对象的不仅仅是环境颜色，例如，如果一个对象的材质在环境、镜面反射和漫反射中接收到所有颜色的 0.2 接近另一个具有更高值的对象，例如镜面反射，第一个物体也会变得更加明亮。

编辑2：

这是绘制所有对象的功能

```
 gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_NORMAL_ARRAY);

    Enumeration<String> key = objects.keys();
    while (key.hasMoreElements())
    {
        String k = key.nextElement();

        if(objects.get(k).visible)
        {
            gl.glPushMatrix();
            try
            {
                gl.glBindTexture(GL10.GL_TEXTURE_2D, texturemanager._tm.get(k.trim())
                    .getTexture()[filter]);
            }
            catch(Exception e){};

            adjust(gl, objects.get(k));
            objects.get(k).draw(gl, 1);
            gl.glPopMatrix();
        }
    }

    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glDisableClientState(GL10.GL_NORMAL_ARRAY); 
```

在对象类中绘制时发生的情况如下

```
 protected void draw(GL10 gl, int filter)
{
    updatePhysics();
    bounds.center.set(this);
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, data.vertexBuffer);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, data.textureBuffer);
    gl.glNormalPointer(GL10.GL_FLOAT, 0, data.normalBuffer);

    gl.glDrawElements(GL10.GL_TRIANGLES, data.numIndices,
            GL10.GL_UNSIGNED_SHORT, data.indicesBuffer);
} 
```

**调整（gl，objects.get（k））；**导致跟随

```
// rotating, translating and scaling object

    if (obj.blend)
    {
        gl.glEnable(GL10.GL_BLEND);
        gl.glDisable(GL10.GL_DEPTH_TEST);
    } else
    {
        gl.glDisable(GL10.GL_BLEND);
        gl.glEnable(GL10.GL_DEPTH_TEST);
    }
    if(obj.enableMaterial)
    {
        obj.getMaterial().enable(gl);
    } 
```

并且在哪里**obj.getMaterial().enable(gl);** 将是对象的材料。以下是我的材料课

```
 public void enable(GL10 gl)
{
    gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_AMBIENT, ambient, 0);
    gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_DIFFUSE, diffuse, 0);
    gl.glMaterialfv(GL10.GL_FRONT_AND_BACK, GL10.GL_SPECULAR, specular, 0);
    gl.glMaterialf(GL10.GL_FRONT_AND_BACK, GL10.GL_SHININESS, shininess);
} 
```

环境、漫反射、镜面反射和光泽的变量设置如下

```
 public void setAmbient(float r, float g, float b, float a)
{
    ambient[0] = r;
    ambient[1] = g;
    ambient[2] = b;
    ambient[3] = a;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:19:06.983

那么如果你有一个“enableMaterial”为假的对象会发生什么？你有没有重置过材料？它似乎仍将应用于任何未来的对象。

# animation - 如何控制css3动画旋转方向

> ID：10473080
> 
> 赞同：4
> 
> 时间：2012-05-06T18:31:12.853
> 
> 标签：animation, css, transform, rotation, direction

我想用 css3 动画和变换属性旋转一个元素，从 20 度到 -20 度

```
@-moz-keyframes oneRotate{
    0%{
        -moz-transform: rotate(20deg);
    }
    100%{
        -moz-transform:rotate(-20deg);
    }
}

.oneRotate
{
    -moz-transform-style: preserve-3d;

   -moz-animation-name:oneRotate;
   -moz-animation-duration:2s;
   -moz-animation-timing-function:ease-in-out;
   -moz-animation-delay:0s;
   -moz-animation-iteration-count:infinite;
   -moz-animation-direction:normal;
} 
```

旋转顺序是 20 -> 0 -> -20... 是逆时针的

但我希望顺序是 20 -> 90 -> 180 -> ...顺时针

我能做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T18:38:40.980

将 100% 旋转角度设置为 340 度。由于 -20 + 360 = 340，它与 -20 度的角度相同，但由于 340 > 20 但 -20 < 20，它将沿相反方向旋转。

# .net - 自定义 Windows Phone 消息框/弹出窗口

> ID：10473083
> 
> 赞同：0
> 
> 时间：2012-05-06T18:31:36.530
> 
> 标签：.net, windows-phone-7

我想在我的 Windows Phone 应用程序中使用自定义 MessageBox，类似于 Bing 应用程序识别歌曲时使用的消息框。有没有办法将自定义内容组件添加到 MessageBox，或者我需要创建自己的 Popup 窗口来复制系统样式？

我知道有一些库（和 StackOverflow 问题）允许开发人员自定义按钮 - 我正在寻找比这更多的自定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:26:02.153

我建议您应该使用 CustomMessageBox（它是 wptoolkit 的一部分）。我创建了一个消息框，其中包含一个列表框，用户可以从中选择列表中的一个项目。将 content 属性更改为您希望在消息框内显示的任何内容。尝试这样的事情：

```
ListBox _list = new ListBox();
_list.ItemSource = MySource;
_list.ItemTemplate = MyTemplate;

CustomMessageBox custom = new CustomMessageBox() { Message = "Your message", Content = _list };
custom.Show() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T09:19:25.140

看看[这个](http://blogs.microsoft.co.il/blogs/tomershamam/archive/2010/10/19/windows-phone-7-custom-message-box.aspx)。**它基本上涉及一个名为NotificationBox**的自定义控件

# c++ - 包在 libnetfilter_queue 中永远循环

> ID：10473087
> 
> 赞同：1
> 
> 时间：2012-05-06T18:31:46.547
> 
> 标签：c++, c, linux, networking, netfilter

我想为 TCP/UDP 流量实现网络延迟模型，如[Linux libnetfilter_queue 延迟数据包问题](https://stackoverflow.com/questions/6237536/linux-libnetfilter-queue-delayed-packet-problem)中所述。我已经按照安迪那里的建议，将整个数据包复制到我的程序中并将其放置在优先级队列中。随着时间的推移，优先队列中的数据包将被删除并使用 RAW 套接字进行分派。

我面临的问题是：libnetfilter_queue 对数据包的初始捕获是通过匹配端口来完成的（sudo iptables -A OUTPUT -p udp --dport 8000 -j NFQUEUE --queue-num 0）。当这些数据包被 RAW 套接字重新注入时，它们会再次被 libnetfilter_queue 拾取（因为端口保持不变），因此会一直循环下去。

我真的很迷茫，想不出出路。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:07:16.720

使用 skb-> 标记。这是一个仅存在于您主机的 IP 堆栈中的标记。它不会影响网络数据包本身的任何内容。

您可以使用 iptables 使用“--mark”过滤器对其进行过滤。使用它从您的延迟链返回，以便您重新插入的数据包不会再次延迟。

```
iptables -A DELAY -m mark --mark 0xE -j RETURN
iptables -A DELAY -j DELAY 
```

您可以配置原始套接字以应用标记，使用`setsockopt(fd, SOL_SOCKET, SO_MARK, ...)`. 您只需在打开套接字后执行一次。标记值将自动应用于您通过套接字发送的每个数据包。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-06T18:48:16.953

这可能不是最好的方法，但这是一种可能的解决方案。您可以使用 IP 标头中的 DSCP 字段来区分新数据包和您重新注入的数据包。将您的 iptables 规则更改为仅将 DSCP 为 0 的数据包排入队列（请参阅[http://www.frozentux.net/iptables-tutorial/iptables-tutorial.html#DSCPMATCH](http://www.frozentux.net/iptables-tutorial/iptables-tutorial.html#DSCPMATCH)）。这假设当您的操作系统发送数据包时，它将 DSCP 设置为 0。现在操作系统生成的所有新数据包都将发送到您的程序，因为它们仍然匹配 iptables 规则。当您在程序中使用 RAW 套接字创建新数据包时，请将 DSCP 值设置为非零值。当您的新数据包被重新注入时，它将不再符合 iptables 规则，并将通过网络发送出去。

如果您不希望数据包在设置了 DSCP 值的情况下通过网络发送出去，您可以添加另一个 iptables 规则以将 dscp 值重新写入 0。

# php - 通过 xpath 选择多个索引的更好方法

> ID：10473088
> 
> 赞同：3
> 
> 时间：2012-05-06T18:31:48.513
> 
> 标签：php, xpath

我尝试在复杂的表结构中选择“tr”内的多个“td”。

```
$name = $sxml->xpath("
                //table[@cellspacing=0 and @cellpadding=2 and @class='mn2']
                    /tr[not(contains(@class, 'mn'))]/td[2] 
                | 
                //table[@cellspacing=0 and @cellpadding=2 and @class='mn2']
                        /tr[not(contains(@class, 'mn'))]/td[5]
                |
                //table[@cellspacing=0 and @cellpadding=2 and @class='mn2']
                        /tr[not(contains(@class, 'mn'))]/td[7]
                "); 
```

一切正常，我得到了我想要的，但这似乎有点矫枉过正。我如何选择多个“td”像这样“td [2,5,7]”而不是使用联合表达式“|” ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T18:40:59.970

它可以在以下帮助下完成`or`：

```
//table[@cellspacing=0 and @cellpadding=2 and @class='mn2']
    /tr[not(contains(@class, 'mn'))]/td[position()=2 or position()=5 or position()=7] 
```

# android - Android 互联网连接检查

> ID：10473094
> 
> 赞同：1
> 
> 时间：2012-05-06T18:32:04.797
> 
> 标签：android, connection

我正在尝试检查可用的互联网连接，我发现很多主题都在谈论这个，但是当我尝试验证互联网连接时我仍然遇到问题，正在使用的代码是流动的：

```
public boolean isOnline() {
    ConnectivityManager conMgr =
        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

    if (conMgr.getActiveNetworkInfo() != null && conMgr.getActiveNetworkInfo().isAvailable() &&    conMgr.getActiveNetworkInfo().isConnected()) {
        return true;
    } else {
        return false; 
    }
} 
```

请问有什么办法可以帮助我？PS：对不起我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T18:37:14.987

你的方法是正确的。您还需要在您的 android 清单文件中：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

但请记住，低信号、服务器停机、强制门户、内容过滤器和其他网络问题可能会阻止您的应用程序到达服务器。因此，拥有一个活动的网络接口并不能保证特定的网络服务可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:56:47.280

在此代码中，您在私有 var 中有红色状态：

```
 private boolean mIsConnected;
    @Override
    protected void onResume()
    {
            super.onResume();

            //red status broadcast
            IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);        
            registerReceiver(mNetworkStateReceiver, filter);
    }
    private BroadcastReceiver mNetworkStateReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            NetworkInfo networkInfo =
                    (NetworkInfo)intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
            mIsConnected= networkInfo.isConnected();
            Log.i("TAG", String.format("Status red: %b", mIsConnected))

        }
    }; 
```

# android - 带有 Java EE 服务器的 Android 客户端应用程序

> ID：10473098
> 
> 赞同：0
> 
> 时间：2012-05-06T18:32:34.203
> 
> 标签：android

我有一个带有 EJB 和数据库服务器的 Java EE 应用程序。我现在正试图让我的应用程序的客户端版本成为安卓版本。我在服务器（台式电脑）上有实体 bean 和数据库，我想获取这些数据，并及时访问 android 应用程序并查看我的数据库内容的更新状态。

我的问题是，我将如何让 android 应用程序与服务器通信。我试图阅读要使用的协议，但我仍然不清楚它们。我是否像以前开发 tcp/ip 聊天应用程序时那样使用 java 套接字？或者，REST（我对此一无所知或......）

提前感谢您的精明建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:39:02.080

传统的 Java EE 应用程序利用具有合理延迟的相对可靠的宽带网络连接。android 设备的网络连接不显示这些属性（它不可靠，随时可能中断并且速度很慢）。在设计交换协议时，您必须考虑到这一点。

可用的解决方案是具有合理短消息和协议的 REST 服务以容忍网络故障。如今，在 Java EE 服务器中创建 REST 端点非常容易（服务器品牌之间存在差异，但差异很小）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:40:36.120

您可以使用 REST。[Android 支持 REST，您可以在Google IO 2010](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)上观看此视频，网络上也充满了可以帮助您的工作示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-18T15:01:13.720

使用 Java EE 7 后端演示使用原生移动 Android 和 iOS 客户端的示例应用程序。服务器端包含一个聊天 WebSocket API 和一个使用 Java API 实现的 WebSocket、JSON-P、JAX-RS 2、CDI、Bean Validation、EJB 3 和 JPA 的待办事项列表 REST API。

[https://github.com/m-reza-rahman/javaee-mobile](https://github.com/m-reza-rahman/javaee-mobile)

# php - CakePHP Router::url 无法正常工作

> ID：10473100
> 
> 赞同：2
> 
> 时间：2012-05-06T18:33:09.390
> 
> 标签：php, routing, cakephp-2.0

我正在将 CakePHP 2.0 用于网站的一个小型管理部分。如果用户正确登录，我会将他们重定向到管理员仪表板。我这样做如下：

```
$this->redirect(Router::url(array('controller' => 'admin', 'action' => 'dashboard'))); 
```

重定向是正确的，但由于某种原因，它重定向到的 URL 没有正确构建。URL 的结构如下（注意 URL 中的双 [root] 部分 - 这是错误的）：

```
http://localhost/[root]/[root]/admin/dashboard 
```

当然，它们会显示错误，因为此控制器/操作不存在。URL 应该不在此表单中：

```
http://localhost/[root]/admin/dashboard 
```

我似乎找不到确切的问题，因为 cakePHP 不是我的核心甜点，有没有人可以指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:17:08.460

你可以这样简单

```
$this->redirect(array('controller' => 'admins', 'action' => 'dashboard')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T10:32:12.977

```
$this->redirect("YOUR URL");

example $this->redirect('/admins/dashboard'); 
```

这样您就可以轻松重定向！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T08:53:43.360

您可以在 Router::url 中使用 'full_base' 参数。例如

```
$url = Router::url( array( 
    'controller' => 'posts',
    'action' => 'view',
    'id' => $post[id],

    'full' => true
    ) ); 
```

这将为您提供完整的基本网址。当我在 localhost 的子目录中运行 CakePHP 时，我发现了这个固定的路由问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-14T05:26:53.183

你可以简单地纠正这个
`Router::connect('/', array('controller' => 'users', 'action' => 'index'));`

# windows-phone-7 - 我可以从计划的后台工作人员修改 ShellTile BackTitle 和 BackContent 吗？

> ID：10473102
> 
> 赞同：1
> 
> 时间：2012-05-06T18:33:26.903
> 
> 标签：windows-phone-7, windows-phone

我正在尝试更新应用程序磁贴背面的 BackTitle 和 BackContent 属性以显示一些简单的文本。当我运行我的应用程序时，我可以毫无问题地设置它并且效果很好。我已经开始设置一个后台工作者项目，以便在后台定期计划中更新它。

如何从后台工作人员的调用方法访问 ShellTile 对象？这甚至可能吗。

非常感谢猪

解决方案：

获得 ShellTile 有点复杂。不知道为什么我不能像在我的应用程序中那样直接使用 ShellTile.ActiveTiles.First，但我是这样做的：

```
 IEnumerator<ShellTile> it = ShellTile.ActiveTiles.GetEnumerator();
    it.MoveNext();
    ShellTile tile = it.Current; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:20:09.433

是的 - 这是相当标准的做法。要访问`ShellTile`您使用的`ShellTile.ActiveTiles`（在`Microsoft.Phone.Shell`命名空间中）。这将返回所有用户当前`ShellTile`s 的列表。集合中的第一项始终是您的主应用程序磁贴 - 即使用户没有将您的应用程序固定到开始屏幕，它也会出现在列表中。您必须想出自己的方案来识别哪个瓷砖是哪个瓷砖，因为唯一的标识符是`NavigationUri`.

值得注意的是，根据[Unsupported APIs for Background Agents for Windows Phone](http://msdn.microsoft.com/en-us/library/hh202962%28v=vs.92%29.aspx "Windows Phone 后台代理不支持的 API")，您只能使用`Update()`,`Delete()`和`ActiveTiles`from`ShellTile`类。

# php - 如何在 Netbeans 中启用 PHP 支持？

> ID：10473109
> 
> 赞同：51
> 
> 时间：2012-05-06T18:34:00.200
> 
> 标签：php, netbeans, ubuntu, netbeans-7, netbeans-plugins

在 Ubuntu 上，我安装了 netbeans，但它没有任何选项来启动 php 项目。我查看了插件列表，php 不在列表中，也不在要下载的插件列表中。

我已经访问了 netbeans 网站，但不确定要下载哪个 php 插件。

有人可以帮我吗？

Ubuntu 12.04 64bit 在软件存储库中有 netbeans 7.0.1。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-05-06T18:47:28.420

去`Tools->Plugins`。

在`Settings`选项卡中确保更新中心`Netbeans Distribution`处于活动状态。

然后在`Available Plugins`选项卡中单击`Reload Catalog`，您应该会看到 PHP。

您还必须进行 LAMP 配置，此[链接](http://netbeans.org/kb/docs/php/configure-php-environment-ubuntu.html#separate-packages)可以帮助您。

如果您已经下载了完整的捆绑包，请进入`Installed`选项卡并激活 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:37:04.430

请尝试从此页面中选择 php 选项并安装 [http://netbeans.org/downloads/index.html](http://netbeans.org/downloads/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T18:00:45.060

单击菜单**文件**>**新建项目**，然后从**类别**
列表中 选择**PHP**，单击后您将看到 PHP 正在自动初始化...

 **详细答案请访问

[http://digitdrive.blogspot.in/2013/11/developing-php-project-on-netbeans-ide.html](http://digitdrive.blogspot.in/2013/11/developing-php-project-on-netbeans-ide.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-11-09T07:18:57.173

转到工具 > 插件 > 可用插件

搜索 PHP 增强功能。

但首先你应该下载支持 PHP 的 netBeans 版本。

有两种可用的发行版，一种用于 PHP 和 JavaScript，另一种是支持多种编程语言的成熟版本，当然也包括 PHP。

任何发行版都应该适用于 PHP。**

# c - free() 不释放内存？

> ID：10473116
> 
> 赞同：0
> 
> 时间：2012-05-06T18:34:34.017
> 
> 标签：c, memory-management, free

```
free(str);
printf("%d\n", str->listeners); 
```

对 printf 的调用成功（与对 str 成员的任何其他调用一样）。这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T18:43:25.573

这是一个类比：假设您正在租一间公寓（即内存）并且您终止了租约但保留了密钥的副本（即指针）。如果它没有被拆除，如果没有更换锁等，你*也许可以稍后回到公寓，如果你马上这样做，你**可能会*找到你离开它们的方式。但这是一个非常糟糕的主意，在可能的情况下，你会让自己陷入一堆麻烦中...​​...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T18:35:50.513

这被称为未定义的行为。您正在取消引用指向已释放内存的指针。任何事情都可能发生，即不能假设程序会崩溃或发生其他任何事情；行为**未定义**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T18:36:17.827

你只是（不）幸运。该代码表现出未定义的行为 - 任何事情都可能发生，包括看起来内存没有被释放。

内存*被*释放了，但是主动清除没有意义，所以它的原始内容很可能还在。但你不能依赖它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T18:36:55.857

只要`str`不是`NULL`并且相应的内存没有被其他分配覆盖它仍然可以工作，因为内存内容没有被更改`free`（如果运行时没有覆盖内存区域`free`）。但这绝对是未定义的行为，您不能依赖它以这种方式工作......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-17T21:10:39.607

要记住的事情...

*   在几乎所有当前操作系统上，`free()`永远不会将内存返回给操作系统。即使它在理论上能够做到这一点，它几乎永远不会真正发生。这是因为内存只能在通常 4kB 的对齐页面中返回，因为这就是 MMU 的工作方式，并且，如果找到它，将其撕掉可能会分割一个包含其上方和下方内存的块，从而使整个过程适得其反。（碎片化是有效利用动态内存的敌人。）
*   此外，大多数程序通常只是使用更多内存，因此花在寻找真正返回操作系统的东西上的时间将被完全浪费掉。如果它没有返回给操作系统然后受到保护，那么当你触摸它时它就不会成为你的程序的核心。
*   因此，相反，您提供给 free 的块只是放在一个列表或其他一些数据结构上，然后可能合并到它上面或下面的块中。
*   记忆仍然存在并且可以访问。某些块可能会被 malloc() 和 free() 后面的库代码的指针和其他内部结构覆盖。但它可能不是。
*   最终，它可能会在您的程序的其他地方交还。但它可能不是。

# forms - Symfony2 中的嵌入式表单并保存到数据库

> ID：10473117
> 
> 赞同：1
> 
> 时间：2012-05-06T18:34:54.163
> 
> 标签：forms, symfony, doctrine-orm, persistence

在我的 Symfony2 应用程序中，有两个实体：地址和城镇。Address 实体有一个 4 位数的邮政编码属性（“pcNum”），它指的是 Town 实体的 id。一个地址只能有一个邮政编码，因此只能指一个城镇（但是反过来也是可能的：一个城镇可以有更多的邮政编码）。

对于这两个实体，我创建了一个名为 TownType 和 AddressType 的表单。用户可以输入并保存城镇（这很好用）。Address 实体的表单允许用户填写地址，包括邮政编码。邮政编码链接到 Town 实体的 ID。

但是，当我尝试保留从 AddressType 表单中检索到的新地址实体时，我收到了 MySql 错误，即 pc_num 字段（实体中的 pcNum）为空：

> SQLSTATE [23000]：违反完整性约束：1048 列 'pc_num' 不能为空

（这是 Address 实体的字段，应该包含一个 Town 的 ref 键。）在持久化 Address 实体之前，它的值不知何故丢失了。如果我在控制器中手动填写该字段，无论用户在表单中输入什么，我都可以保留新地址而不会出现错误。如果我删除到 Town 实体的链接并使用不知道的表单字段，只要邮政编码恰好存在，我也可以安全而不会出错。但是以它应该的方式，使用两种形式和实体关联，我无法让它工作。在过去的几周里，我尝试了很多不同的事情，但我没有想法。下面是我的代码。随意评论任何事情，也许我的整个方法都是错误的。

这是我的城镇实体：

```
namespace Xx\xBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Check;

 /**
 *
 * Xx\xBundle\Entity\Town
 *
 * @ORM\Table(name="lib_towns")
 * @ORM\Entity
 */

class Town
{
    #id
    /**
     * @ORM\Id
     * @ORM\Column(type="integer", length="4", nullable=false)
     * @ORM\GeneratedValue(strategy="AUTO")
     * @Check\NotBlank()
     * @Check\MaxLength(4)
     */
    protected $id;

    #name
    /**
     * @ORM\Column(name="name", type="string", length="100", nullable=true)
 * @Check\NotBlank()
     * @Check\MaxLength(100)
     */
    protected $name;

    //some more properties

    #getters and setters

    /**
     * Set id
     *
     * @param integer $id
     */
    public function setId($id)
    {
        $this->id = $id;
    }

    /**
     * Get id
     *
     * @return integer $id
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this->name = $name;
    }

    /**
     * Get name
     *
     * @return string $name
     */
    public function getName()
    {
        return $this->name;
    }

  //some more getters ans setters

} 
```

这是我的地址实体：

```
namespace Xx\xBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Check;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;
use Xx\xBundle\Entity\Town;

 /**
 *
 * Xx\xBundle\Entity\Address
 *
 * @ORM\Entity
 * @ORM\Table(name="addresses")
 */

class Address
{
    #id
    /**
    * @ORM\Id
     * @ORM\Column(type="integer", length="6", nullable=false)
     * @ORM\GeneratedValue(strategy="AUTO")
 * @Check\NotBlank()
 * @Check\MaxLength(6)
     */
    protected $id;

    #town
    /**
    * @orm\OneToOne(targetEntity="town")
 * @ORM\JoinColumn(name="pc_num", referencedColumnName="id", nullable=false)
    */
    protected $town;

    //some other properties...

    #getters and setters

    /**
     * Set id
     *
     * @param integer $id
     */
    public function setId($id)
    {
        $this->id = $id;
    }

    /**
     * Get id
     *
     * @return integer $id
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set town entity linked to this address
     *
     */
    public function setTown(town $town = null)
    {
        $this->town = $town;
    }

    /**
     * Get town entity linked to this address
     *
     */
    public function getTown()
    {
        return $this->town;
    }

    //some other functions...

} 
```

接下来，这是我为地址创建的表单：

```
namespace Xx\xBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
use Doctrine\ORM\EntityRepository;

class AddressType extends AbstractType
{
    public function buildForm(Formbuilder $builder, array $options)
    {
        $builder->add('id', 'hidden'); //necessary for updates
        $builder->add('town', 'entity', array
            (
                'label' => 'Postal code (4 digits):*',
                'class' => 'XxxBundle:Town',
                'query_builder' => function(EntityRepository $er) {
        return $er->createQueryBuilder('t')
            ->orderBy('t.id', 'ASC'); },            
                //'empty_value' => '----',
                'property'=> 'Id',
                'property_path'=> false,
                'expanded' => false,
                'multiple' => false,
                'required'  => true
            ));
        $builder->add('street', 'text', array
            (
                'label' => 'Street:*',
                'required'  => true
            ));
        //some more fields...
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Xx\xBundle\Entity\Address'
        );
    }

    public function getName()
    {
        return 'address';
    }
} 
```

这是我的地址控制器中的相关操作功能：

```
public function editAddressAction($id = null)
{
$em = $this->getDoctrine()->getEntityManager();
$address = new Address();
$isNew = is_null($id);
     //this also tests positve after a form has been sent
    if($isNew)
    {
           #fill address object with some defaults
            $address->setCreated(new \DateTime("now"));
         } else
         {
            #fill address object with existing db data
            $address = $em->getRepository('XxxBundle:Address')->find($id);
         }
         #create form and fill it with address object data
         $form = $this->createForm(new AddressType(), $address);
            #if form sent: check input
            $request = $this->get('request');
            if ($request->getMethod() == 'POST')
            {
               $form->bindRequest($request); //calls setters
               if ($form->isValid())
               {
                  //if I leave the following lines in: no error (but also no sense)
                  //because the pcNum should be retrieved from the form
                  $pcNum = 2222;
                  $town = $em->getRepository('XxxBundle:Town')->find($pcNum);
                  $address->setTown($town);
                  //end

                  #persist and flush

                     $id_unknown = is_null($address->getId());
                     if($id_unknown)
                     {
                        #insert address
                        $em->persist($address);
                     }   else
                     {
                        #update address
                        $address->setModified(new \DateTime("now"));
                        $em->merge($address);
                     }
                     #commit
                     $em->flush();
                  #get id of update or insert and redirect user
                     $address_id = $address->getId();
                     return $this->redirect($this->generateUrl('displayAddress', array('id'=>$address_id)));
               }
            }
         return $this->render('XxxBundle:Forms:address.html.twig', array('form'=>$form->createView(), 'new' => $isNew, 'id' => $id));
   } 
```

总而言之，这是相关的 Twig 片段：

```
 <form action="{{ path('addAddress') }}" method="post" {{ form_enctype(form) }}>
      {{ form_errors(form) }}
      <div class="form_row">
         {{ form_errors(form.town) }}
         {{ form_label(form.town, 'Postal code:*') }} 
         {{ form_widget(form.town, {'attr': { 'class': 'form_pcNum', 'maxlength': '4', 'size': '4' } } ) }} 
      </div>
      <div class="form_row">
        <!-- some more fields here -->
      </div>
      <div class="form_row">
         <button name="btn_add" id="do_add" type="submit" class="" value="btn_add" title="Ok!">Ok</button>
      </div>
      {{ form_rest(form) }}
   </form> 
```

任何帮助表示赞赏......如果您知道相关（工作）示例，那也很棒。干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:52:06.143

我在外键违规方面遇到了类似的问题，我解决了。请阅读 [Symfony2 表单和 Doctrine2 - 更新分配实体中的外键失败 [已解决]](https://stackoverflow.com/questions/10590159/symfony2-form-and-doctrine2-update-foreign-key-in-assigned-entities-fails-sol)

# javascript - 如何使用 JavaScript 从 tynt API 中提取关键字？

> ID：10473120
> 
> 赞同：0
> 
> 时间：2012-05-06T18:35:20.460
> 
> 标签：javascript, html, api

我有这个 API：

[https://api.tynt.com/publisher/v1/keyword/inbound?site_guid=c4l6yC_Ler4kAMacwqm_6r&api_key=secretkey&hours=1](https://api.tynt.com/publisher/v1/keyword/inbound?site_guid=c4l6yC_Ler4kAMacwqm_6r&api_key=secretkey&hours=1)

我将如何从这个 api 中提取我的入站关键字并返回它的关键字值以使用 JavaScript 显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:36:29.760

[Tynt API](http://www.tynt.com/tynt-api)似乎还不支持 CORS（跨域资源共享），没有实现“ **Access-Control-Allow-Origin:*** ”响应头。因此，您应该尝试使用与 CORS 兼容的 Yahoo (YQL) 等代理服务来读取此 API。

假设我们有一个全局函数：readKeywords()，它是从 jQuery getJSON 调用中调用的：

```
// remember to complete it with your secretkey!
var api_url = "http://api.tynt.com/publisher/v1/keyword/inbound?site_guid=c4l6yC_Ler4kAMacwqm_6r&api_key=secretkey&hours=24";

function readKeywords ( data) {
    var keywords = data.query.results.data; // keywords array
    var items = [];

    $.each(keywords, function(index, value) {
        items.push('<li>' + value.json[0] + ': ' + value.json[1] + '</li>');
    });

    $('<ul/>', {
        html: items.join('')
    }).appendTo('body');
}

$.getJSON("http://query.yahooapis.com/v1/public/yql?format=json&q=select * from json where url='" + encodeURIComponent( api_url ) + "' and itemPath='json.data'", readKeywords); 
```

此示例从 Yahoo 的 json 中读取 Tynt 的 json 响应，并将其作为列表写入 document.body，其中 value.json[0] 和 value.json[1] 是每个入站关键字的入站文本和计数器。

# c# - 使用 Windows Phone 7 解析 JSON 对象

> ID：10473126
> 
> 赞同：0
> 
> 时间：2012-05-06T18:36:34.563
> 
> 标签：c#, json, windows-phone-7

我正在尝试从我创建的 Uri 中读取并将其显示在 Windows Phone 7 应用程序上。（我正在做这个教程：http: [//msdn.microsoft.com/en-us/windowsmobile/Video/hh237494](http://msdn.microsoft.com/en-us/windowsmobile/Video/hh237494)）。

我的问题是程序没有进入 OpenReadCompletedEventHandler，我不知道为什么。（我为了调试而放置了消息框，我发现程序没有进入 OpenReadCompletedEventHandler）。以下是相关代码：

```
 void myButton_Click(object sender, RoutedEventArgs e)
    {

        try
        {
            WebClient webClient = new WebClient();
            Uri uri = new Uri("http://localhost:44705/Service1.svc/GetAllBrands");
            webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);
            try
            {
                webClient.OpenWriteAsync(uri);
                MessageBox.Show("opening sucsseded");
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
    void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        MessageBox.Show("OpenRead Handler");

      //  OpenWriteCompletedEventArgs temp = (OpenWriteCompletedEventArgs)e;
        DataContractJsonSerializer serializer = null;
        try
        {
            serializer = new DataContractJsonSerializer(typeof(ObservableCollection<Brand>));
            ObservableCollection<Brand> Brands = serializer.ReadObject(e.Result) as ObservableCollection<Brand>;
            foreach (Brand b in Brands)
            {
                int id = b.BrandId;
                string name = b.BrandName;
                listBrands.Items.Add(id + "             " + name);

            }

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:48:29.407

我从来没有使用过这个，但是一个快速的谷歌将我带到 MSDN 上的这个页面 - [http://msdn.microsoft.com/en-us/library/system.net.webclient.openreadcompleted.aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient.openreadcompleted.aspx)

这应该告诉您为什么它不起作用 - 因为您正在使用读取事件进行写入操作。您应该按照MSDN 上的此页面使用`OpenWriteCompletedEventHandler`with - [http://msdn.microsoft.com/en-us/library/system.net.webclient.openwritecompleted.aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient.openwritecompleted.aspx)`OpenWriteAsync`

# javascript - GitHub 页面上的 Processing.js 和 File Empty 或 File Not Found 问题

> ID：10473127
> 
> 赞同：2
> 
> 时间：2012-05-06T18:36:39.887
> 
> 标签：javascript, processing.js, github-pages

设置 Github 页面后，尝试加载 Processing.js .pde 文件时，我收到以下错误：

```
# <file.pde> is in https://raw.github.com/
# <canvas data-processing-sources="https://raw.github.com/.../file.pde"></canvas>

# On Firefox:
NetworkError: 404 Not Found - <file.pde>
uncaught exception: Processing.js: Unable to load pjs sketch files: <file.pde> ==> File is empty.

# On Chrome:
OPTIONS <file.pde> 404 (Not Found)
XMLHttpRequest cannot load <file.pde>. Origin is not allowed by Access-Control-Allow-Origin.
Uncaught Processing.js: Unable to load pjs sketch files: <file.pde> ==> File is empty. 
```

他们似乎都说`<file.pde>`不存在，但是当我尝试从浏览器访问它时，我能够检索它。此外，如果我将文件的内容直接复制并粘贴到`<script>`index.html 中的标记中，那么一切正常。

有人知道可能导致这种情况的原因吗？

# android-emulator - 不幸的是，您的应用程序已停止工作——android

> ID：10473129
> 
> 赞同：-1
> 
> 时间：2012-05-06T18:36:54.570
> 
> 标签：android-emulator

这是日志猫。请帮忙

```
04-30 11:52:45.716: E/AndroidRuntime(1430): FATAL EXCEPTION: main
04-30 11:52:45.716: E/AndroidRuntime(1430): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.calc/my.calc.CalcActivity}: java.lang.NullPointerException
04-30 11:52:45.716: E/AndroidRuntime(1430):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at android.os.Looper.loop(Looper.java:137)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at java.lang.reflect.Method.invokeNative(Native Method)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at java.lang.reflect.Method.invoke(Method.java:511)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at dalvik.system.NativeStart.main(Native Method)
04-30 11:52:45.716: E/AndroidRuntime(1430): Caused by: java.lang.NullPointerException
04-30 11:52:45.716: E/AndroidRuntime(1430):     at my.calc.CalcActivity.onCreate(CalcActivity.java:47)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at android.app.Activity.performCreate(Activity.java:4465)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-30 11:52:45.716: E/AndroidRuntime(1430):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-30 11:52:45.716: E/AndroidRuntime(1430):     ... 11 more
04-30 11:53:59.415: E/AndroidRuntime(1445): FATAL EXCEPTION: main
04-30 11:53:59.415: E/AndroidRuntime(1445): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.calc/my.calc.CalcActivity}: java.lang.NullPointerException
04-30 11:53:59.415: E/AndroidRuntime(1445):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at android.os.Looper.loop(Looper.java:137)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at java.lang.reflect.Method.invokeNative(Native Method)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at java.lang.reflect.Method.invoke(Method.java:511)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at dalvik.system.NativeStart.main(Native Method)
04-30 11:53:59.415: E/AndroidRuntime(1445): Caused by: java.lang.NullPointerException
04-30 11:53:59.415: E/AndroidRuntime(1445):     at my.calc.CalcActivity.onCreate(CalcActivity.java:47)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at android.app.Activity.performCreate(Activity.java:4465)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-30 11:53:59.415: E/AndroidRuntime(1445):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-30 11:53:59.415: E/AndroidRuntime(1445):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:50:15.923

您的错误消息显示“NullPointerException”，它似乎是`onCreate()`由`CalcActivity`. 转到该类的代码的第 47 行，如下所示：

```
04-30 11:53:59.415: E/AndroidRuntime(1445): Caused by: java.lang.NullPointerException
04-30 11:53:59.415: E/AndroidRuntime(1445):     at my.calc.CalcActivity.onCreate(CalcActivity.java:47) 
```

确保您没有对尚未初始化的对象或基本上具有`null`值的对象进行调用。例如，

```
List<String> strings;
strings.get(0); // you should have done something like this one first:
                // strings = new ArrayList<String>(); 
```

# codeigniter - codeigniter 路由问题

> ID：10473142
> 
> 赞同：0
> 
> 时间：2012-05-06T18:37:55.623
> 
> 标签：codeigniter, routing, routes

我的用户资料位于

```
www.domain.com/user/username 
```

并将其移至

```
www.domain.com/username 
```

但这需要在配置文件中添加大部分`classes functions`内容`routes.php`，如果我想向我的应用程序添加新功能，我需要将所有功能添加到`routes.php`文件中，这听起来不是很好的做法......

其他人在 CodeIgniter 上处理它的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:40:13.607

也许，您可以反过来做 - 制作一个无法使用的用户名白名单（这些用户名将是您的控制器的名称，如`admin`,`contact`等...）并路由除白名单项目之外的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:55:33.943

似乎我得到了答案

我所做的是为我拥有的每个控制器添加以下代码

```
$route['controller'] = "controller";
$route['controller/(:any)'] = "controller/$1"; 
```

这个代码在底部

```
$route['(:any)'] = "user/$1"; 
```

# vb.net - 为每个 ComboBox 项存储一个值

> ID：10473143
> 
> 赞同：0
> 
> 时间：2012-05-06T18:37:59.850
> 
> 标签：vb.net, winforms

在缺少`Value`属性的情况下，我计划使用类来存储我的物品`Text`并使用属性。到目前为止，我已经成功了。`Value``ComboBox`

这是我的课：

```
Public Class clCombobox
Public cname As String
Public cvalue As Integer

    Public Property Display() As String
    Get
        Return Me.cname
    End Get
    Set(ByVal value As String)
        Me.cname = value
    End Set
End Property
Public Property Value() As String
    Get
        Return Me.cvalue
    End Get
    Set(ByVal value As String)
        Me.cvalue = value
    End Set
End Property

Public Sub New(ByVal name As String, ByVal value As String)
    cname = name
    cvalue = value
End Sub

Public Overrides Function ToString() As String
    Return cname
End Function
End Class 
```

数据被添加到`ComboBox`这样的：

```
cmbComboxBox.Items.Add(New clCombobox("Text", 1)) 
```

到目前为止，这似乎有效。但是我如何取回数据。就像我想要所选`CheckBox`项目的价值一样？

我尝试使用：

```
CType(cmbCombobox.SelectedItem, clCombobox).Value() 
```

不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:41:26.360

根据[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx)，使用[SelectedItem 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selecteditem.aspx)检索您存储在其中的对象。

检索您想要的值的代码：

```
Dim selectedItem as clCombobox = CType(cmbComboBox.SelectedItem, clCombobox)
Dim value As Integer = selectedItem.cvalue 
```

# django - 查询集交集上的Django过滤器？

> ID：10473149
> 
> 赞同：8
> 
> 时间：2012-05-06T18:38:39.287
> 
> 标签：django, django-models, many-to-many, set, intersection

```
class Item(models.Model):
    ...

class ItemSet(models.Model):
    items = models.ManyToManyField(Item, related_name="itemsets") 
```

我有一个 ItemSet 列表。我想在至少一个 ItemSet 对象的“items”M2M 字段中找到所有 Item 对象。

我怎样才能做到这一点？

PS这是我尝试过的，但无济于事：

```
itemset_list = [itemset1, itemset2, itemset3]    
items = Item.objects.filter(itemsets__in=itemset_list) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-06T19:02:22.193

如果您需要您的项目集列表并且您没有从查询中获得它们，请尝试以下操作：

```
itemset_list = [itemset1, itemset2, itemset3]
itemset_list_ids = [itemset.id for itemset in itemset_list]
itemset_queryset = ItemSet.objects.filter(id__in=itemset_list_ids)
items = Item.objects.filter(itemsets__in=itemset_queryset) 
```

如果您可以通过查询获得您的项目集列表，那么它会缩短一点：

```
itemset_queryset = ItemSet.objects.filter(SOME FILTER HERE)
items = Item.objects.filter(itemsets__in=itemset_queryset) 
```

# c++ - 简单的 boost 智能指针语法问题

> ID：10473152
> 
> 赞同：0
> 
> 时间：2012-05-06T18:39:12.943
> 
> 标签：c++, boost, shared-ptr, smart-pointers

使用`boost::scoped_ptr`或者`boost::shared_ptr`我得到错误

> 1> *** \algomanager.cpp(28) : 错误 C2064: 术语不计算为带 1 个参数的函数

我有这样的代码。. .

```
class X{
  boost::shared_ptr<cPreFilterProcess> preProcess;
public:
  X(){
    preProcess(new cPreFilterProcess(pars));
  }
}; 
```

我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T18:56:26.447

我神秘的魔法调试玻璃球告诉我你正在做这样的事情：

```
class X{
  boost::shared_ptr<cPreFilterProcess> preProcess;
public:
  X(){
    preProcess(new cPreFilterProcess(pars));
  }
}; 
```

您需要使用成员初始化程序，例如：

```
X() : preProcess(...){} 
```

或使用`.reset`，因为您不能只分配这样的指针：

```
X() { preProcess.reset(...); } 
```

我强烈推荐第一个选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T18:46:48.503

如果你只是把它写成一个声明：

```
preProcess ( new cPreFilterProcess(pars) ); 
```

它是无效的，因为`preProcess`它已经被构造了，所以语法试图像函数一样“调用”它。

这也无效：

```
preProcess = new cPreFilterProcess(pars); 
```

因为您不能将 a 分配`cPreFilterProcess*`给 a`shared_ptr<cPreFilterProcess>`

也许你的意思是：

```
preProcess.reset( new cPreFilterProcess(pars) ); 
```

或者

```
preProcess = boost::shared_ptr<cPreFilterProcess>( new cPreFilterProcess(pars) ); 
```

# ios - 通用应用程序中的广告 + 即使 viewController 更改，广告也会持续存在

> ID：10473158
> 
> 赞同：0
> 
> 时间：2012-05-06T18:40:24.783
> 
> 标签：ios, ios5, iad, adwhirl

我第一次在一个通用的应用程序中实施广告。我已经学习了一些教程，并且有点工作 - 使用 adWhirl、iAd、adMob。虽然教程有点简单，但我想知道是否有任何开源通用广告模板/库项目。

我已经看到[了这一点](https://stackoverflow.com/questions/6322323/adwhirl-for-ipad)，虽然有帮助，但教程代码有点损坏/有限。

我的具体问题（iOS5+ 通用应用）：

*   在带有 navController 的应用程序中，UIViewController 可以多次与其他控制器分离，然后再返回，我是否需要在*每个*viewController 中设置广告内容，或者有什么方法可以让广告层/视图在多个 VC 中持续存在意见？

*   广告尺寸 - 在我的测试应用程序中，在 iPad 上运行，我收到了广告，但尺寸适用于 iPhone。在 adWhirl 中，似乎无法指定 *通用*- 只有 iPhone 或 Android。我已经看到其他 iPad 应用程序由于尺寸问题似乎无法展示广告 - 广告出现在奇怪的地方等。*通用应用程序中的广告尺寸问题是否有一些**通用*解决方案？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:56:42.480

对于您的第一个问题，我建议您对 adView 使用单例方法。[您可以在此处](https://stackoverflow.com/a/10096375/953654)找到适用于 AdMob adView 的类似单例方法。用您的 AdWhirl 视图调整它一点也不差。对于随后显示的每个视图，您可以执行以下操作：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    shared = [AdWhirlMasterViewController singleton];
    [shared resetAdView:self];
} 
```

对于您的第二个问题，我想知道您是否不能对适配器代码进行一些小的修改以显示 iPad 广告。因此，例如，对于 AdMob 适配器的`getAd:`方法，您可能会有如下所示的内容：

```
 if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) { 
        adSize = kGADAdSizeLeaderboard; 
 } else { 
        adSize = kGADAdSizeBanner; 
 } 
```

然后创建你的 GADBannerView 做类似的事情：

```
GADBannerView *view =
      [[GADBannerView alloc] initWithAdSize:adSize]; 
```*

# powershell - Powershell：文件元数据中的 NTFS 路径与 New-ItemProperty、Set-ItemProperty？

> ID：10473161
> 
> 赞同：1
> 
> 时间：2012-05-06T18:40:43.857
> 
> 标签：powershell, properties, wmi, metadata, ntfs

我有兴趣在特定范围内向我的文件添加一个属性，该属性包含它们在我的文件系统中的当前位置，以跟踪文件移动。我认为这可以使用 New-ItemProperty 完成，使用类似于以下的命令：

Get-ChildItem -recurse | foreach { New-ItemProperty -Path $ *.FullName -Name "OriginalLocation" -PropertyType 字符串 -Value $* .FullName }

但是，当我尝试这个时，我收到了以下错误的垃圾邮件：

**New-ItemProperty：无法使用接口。此提供程序未实现 IDynamicPropertyCmdletProvider 接口。**

经过一番搜索，似乎 New-ItemProperty 除了使用注册表之外几乎没有用处。美好的。Windows 有无数其他文件属性，我应该能够劫持以完成此操作。“标签”和“标签”浮现在脑海中。因此，让我们尝试通过 Set-ItemProperty 设置它们。

**Set-ItemProperty : 属性 System.String Label=D:\test\file.txt 不存在。**

看来我毕竟需要创建这些属性。这是 New-ItemProperty 的缺点吗？也许在任意项目上设置诸如此类的属性是我不知道的一些 WMI 事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T08:20:06.743

这是我使用重定向（'<' & '>'）的解决方案，允许在`CMD.EXE`. 它在 Powershell 中工作，没有任何扩展

```
# AlternateDataStream.ps1

$scriptBlockSetStream = {cmd /C `"echo $($Args[0])`>$($Args[1]):$($Args[2])`"}
$scriptBlockGetStream = {cmd /C `"more `<$($Args[0]):$($Args[1])`"}

$streamName = "NativeFilePath"
$File = "C:\Temp\ADSTest\toto.txt"
$streamContent = Split-Path -Path $File -Parent

# Set the data stream
Invoke-Command -ScriptBlock $scriptBlockSetStream  -ArgumentList $streamContent,$File,$streamName
# Get the Data Stream
$res = Invoke-Command -ScriptBlock $scriptBlockGetStream  -ArgumentList $File,$streamName
$res 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:40:39.357

另一种选择可能是使用[备用数据流](http://thepowershellguy.com/blogs/posh/archive/2007/01/27/powershell-accessing-alternative-data-streams-of-files-on-an-ntfs-volume.aspx)来存储您的路径。如果您运行的是 PowerShell 3.0，则可以很容易地[操作它们。](http://rkeithhill.wordpress.com/2012/03/04/powershell-v3-betabetter-ntfs-alternate-data-stream-handling/)根据第一篇文章，你会有类似的东西：

```
"echo test" | out-file c:\powershell\test.ps1                                                                                         

$fs = new NTFS.FileStreams('c:\powershell\test.ps1')                                                                                  
$fs.add('OriginalPath')                                                                                                                  

$stream = $fs.Item('OriginalPath').open()                                                                                                
$sw = [System.IO.streamwriter]$stream                                                                                                 
$sw.writeline('<path>')                                                                                                  
$sw.close()                                                                                                                           
$stream.close() 
```

# html - 之后防止换行

> ID：10473164
> 
> 赞同：9
> 
> 时间：2012-05-06T18:40:57.280
> 
> 标签：html, css

在`<span>`HTML 叙述流中的元素中，为了扩大检测到点击的区域（一些跨度只有一个字符的内容），我在定义为的类中添加填充（用负边距偏移）

```
.expand-click-area {
    display:inline-block;
    padding:5px;
    margin:-5px;
    position:relative;
} 
```

这在点击行为方面效果很好。问题是 Chrome 19 在以下情况下有时会在跨度和以下逗号之间换行：

```
<span class="expand-click-area">this is span text</span>, 
```

关于如何防止这种情况的任何想法？本质上，我希望破坏行为等同于`<span>`根本不存在或没有`display:inline-block`.

这种行为似乎没有出现在 IE10 中。[请参阅http://jsfiddle.net/58XdJ/1/](http://jsfiddle.net/58XdJ/1/)中的示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T19:00:56.850

尝试将整个不可破坏的文本包装到`<nobr>`标签中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-20T18:26:50.347

如果有人遇到这个问题并且上述解决方案都没有解决我的问题，我发现将它添加到跨度将解决它。

```
display: contents; 
```

希望这对某人有帮助；）

# ruby-on-rails - Rails - 选择匹配两个独立关联条件的模型

> ID：10473166
> 
> 赞同：0
> 
> 时间：2012-05-06T18:41:16.390
> 
> 标签：ruby-on-rails, associations

我有三个模型，`Model`，`ModelType`和`ModelCategory`。它们通过关联表（例如`ModelTypeRelationship`和）相互连接`ModelCategoryRelationship`。

```
# app/models/model.rb
class Model < ActiveRecord::Base
  has_many :model_type_relationships, dependent: :destroy
  has_many :model_category_relationships, dependent: :destroy
  has_many :types, through: :model_type_relationships
  has_many :categories, through: :model_category_relationships
  ...
end 
```

注意：将返回与关联`model1.type`的对象数组。可能与多个或相关联。`ModelType``model1``models``model_types``model_categories`

我希望能够选择一个随机`Model`数，使其属于`type1`和`category1`。

`Model`我在选择 a of方面取得了一些成功`type1`，但在那之后我陷入了困境。这是我的选择代码：

```
ModelType.find_by_name("type1").models.find(:first, :order => "Random()") 
```

注意：返回一个对象`model_type1.models`数组。`Model``type1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:40:02.933

首先，为您的 ModelType 和 ModelCategory 模型添加一个范围：

```
scope :named, lambda { |name| where(arel_table[:name].eq(name)) } 
```

您想选择“模型”，因此很自然地从模型类开始查询：

```
Model.joins(:types).scoped.merge(ModelType.named("type1")) 
```

最后，您可以通过这种方式组合范围：

```
Model.joins(:types, :categories).scoped.merge(ModelType.named("type1"))
  .scoped.merge(ModelCategory.named("category1")) 
```

Obs：我假设 ModelType 和 ModelCategory 具有属性：name，因此您可以按此过滤。

# classpath - Android SDK 工具第 19 版：外部 jar 文件问题

> ID：10473170
> 
> 赞同：0
> 
> 时间：2012-05-06T18:41:47.487
> 
> 标签：classpath, noclassdeffounderror, apk, android-sdk-tools

我知道这个问题在stackoverflow上被问过几次——但我仍然面临一些问题，试图向现有的android项目添加一个额外的jar文件——使用android sdk tools rev。19.

概括：

*   我使用 eclipse 版本：3.6.2
*   该项目已编译，人工制品与 android sdk tools rev 一起使用。14/任何安卓>2.2 (>= API 8)
*   该项目确实使用 sdk 工具 rev 编译。19/任何 android >2.2 但工件不包含类路径中定义的 jar - 所以我不断收到 java.lang.NoClassDefFoundError 异常
*   我尝试将“jar.libs.dir=lib”添加到我的 project.properties - 因为 lib 包含所有 jars 而没有任何积极影响。
*   我还尝试像往常一样创建一个添加 jar 的新虚拟项目（所有 jar 添加到项目中的 lib 文件夹中，右键单击 jar > 添加到构建路径）
*   我尝试使用导入添加罐子

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:16:17.900

将“lib”文件夹重命名为“libs”。

# ruby-on-rails - 我应该什么时候实施我的身份验证方案？

> ID：10473173
> 
> 赞同：0
> 
> 时间：2012-05-06T18:42:23.717
> 
> 标签：ruby-on-rails, authentication, devise

我肯定会使用具有 3 个角色的身份验证方案（设计）：用户、管理员和赞助商。问题是：我应该立即实施身份验证还是等到我的其他模型/视图先到位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:47:18.260

一个相当出乎意料的问题，但您可以立即安全地创建身份验证例程。在我创建的任何项目中，身份验证绝对是我编写的第一件事，大多数时候使用 Sorcery 而不是 Devise。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:47:54.977

我认为首先这样做很有用，因此您可以轻松地将它们集成到其他模型中，例如。记录用户所做的事情，您还可以设置用户应该有权访问特定控制器的天气。

除非，你有充分的理由不这样做......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:09:11.833

IMO这并不重要，但为什么不早点做呢？它是预先构建的，允许进行早期测试（并经常进行测试），并允许访问控制需求有机地发展，而不是等到它们全部堆积起来而您必须一次完成所有操作。

# python - 可以记录一些块位置的模板引擎

> ID：10473174
> 
> 赞同：0
> 
> 时间：2012-05-06T18:42:54.043
> 
> 标签：python, templates, python-2.7

我正在编写一个电子邮件客户端，我想`%CURSOR`从 kmail 模板中实现类似的东西：在显示生成的电子邮件消息后标记应该放置光标的位置。什么模板引擎可以做这种事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:43:08.497

```
from mako.runtime import Context
class CursorContext(Context):
    __slots__=set(('lines', 'position'))

    def __init__(self, *args, **kwargs):
        super(CursorContext, self.__class__).__init__(self, self, *args, **kwargs)
        self.lines=['']
        self.position=None

    def write(self, v):
        ls=s(v).split('\n')
        self.lines[-1]+=ls.pop(0)
        self.lines+=ls

    def _record_position(self):
        if self.position is not None:
            raise ValueError('Position already defined')
        self.position=(len(self.lines), len(self.lines[-1]) if self.lines else 0)

    def _get_position(self):
        if self.position is None:
            self._record_position()
        return self.position

<...>

context=CursorContext(**env) # env is a dictionary with template environment variables
template.render_context(context) # template is mako.template.Template object
# Now template is in context.lines and 
# cursor position can be obtained by context._get_position() 
```

# c# - 可编辑的 WPF 组合框不会触发 PropertyChanged

> ID：10473180
> 
> 赞同：0
> 
> 时间：2012-05-06T18:43:33.680
> 
> 标签：c#, wpf, combobox, propertychanged

我有一个不可编辑的组合框来显示 SQL 数据库的所有表。

```
 <ComboBox Grid.Column="1" 
                      Grid.Row="2" 
                      Height="23"  
                      Margin="3,3,3,3" Name="cbLogTable" VerticalAlignment="Top"
                      ItemsSource="{Binding}"
                      TextSearch.TextPath="TABLE_NAME"
                      SelectedValue="{Binding Path=LogTable, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, ValidatesOnDataErrors=True}"
                      >
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding Path=TABLE_NAME}"/>
                        </StackPanel>

                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox> 
```

包含 UserControl 的属性看起来像这样，并且还实现了 INotifyPropertyChanged：

```
 public string LogTable
    {
        get
        {
            return _logTable;
        }
        set
        {
            if (_logTable == value) return;
            _logTable = value;
            OnPropertyChanged("LogTable");
        }
     } 
```

我使用以下数据绑定来填充 ComboBox：

```
 private void UpdateLogTable()
    {
        var connection = new SqlConnection(_connectionString);
        connection.Open();
        DataTable t = connection.GetSchema("Tables");
        cbLogTable.DataContext = t;
        connection.Close();
    } 
```

但是我没有收到关于更改组合框的选定值的 PropertyChanged 通知。我的错在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T20:02:05.557

在绑定中`SelectedValue`：

```
SelectedValue="{Binding Path=LogTable, 
                        UpdateSourceTrigger=PropertyChanged,
                        Mode=TwoWay,
                        ValidatesOnDataErrors=True,
                        RelativeSource={RelativeSource FindAncestor,
                                        AncestorType={x:Type UserControl}}}" 
```

否则，绑定正在寻找类型的`LogTable`属性`DataTable`（这是 Combobox 的 DataContext），并且静默失败。

# c# - 从生成的表中检索数据时对象名称“dbo.TableName”无效

> ID：10473184
> 
> 赞同：4
> 
> 时间：2012-05-06T18:44:34.897
> 
> 标签：c#, .net, sql-server, entity-framework, ef-code-first

我首先使用实体​​框架代码来创建我的表。请注意 - 创建表，而不是数据库，因为我在托管环境中工作并且我没有允许创建数据库的用户。

提交数据库更新工作正常，但检索数据会出现异常：

> 异常详细信息：System.Data.SqlClient.SqlException：对象名称“dbo.EventHosts”无效。

我读过它的发生是因为我没有使用 EF Code First 来创建数据库。很好，但我该如何优雅地解决这个问题？

所有生成的表都没有像 dbo 这样的前缀。像这样的解决方案不起作用，而且一点也不优雅：

```
[Table("EventHosts", Schema = "")] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-05-31T09:40:17.520

好的，对我来说，问题是我有一个名为的表，并且在 C# EF 中因为复数 `dbo.UserState`而试图访问。`dbo.UserStates`

解决方案是将`Table`属性放在类之上并指定确切的表名：

```
[Table("UserState")]
public class UserState
{
    [Key]
    public int UserId { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T09:47:07.287

要回答您的第一个问题：使用您的托管服务提供商为您创建的架构。

要回答您的第二个问题：不，目前没有直接的方法来全局更改默认架构，因为您无法修改现有约定或创建新约定。你可以尝试破解它。

例如，您可以覆盖`OnModelCreating`并使用反射来获取`DbSet<>`在您的上下文中声明的所有属性。您可以在这些属性上使用简单的循环，并使用属性`ToTable`名称作为表名和您的自定义模式创建映射调用。这将需要一些反射来完成这项工作。

或者，您可以尝试通过实现自定义约定来做一些可重用的方法。您可以找到许多关于在 EF 中使用您自己的约定的不同文章。一些例子：

*   [Entity Framework Code First v 4.1 中的自定义约定](http://dotnetspeak.com/2011/03/custom-conventions-in-entity-framework-code-first-v-4-1)
*   [Entity Framework 4.1 Final 中的约定](http://sessionfactory.blogspot.com/2011/04/conventions-in-entity-framework-41.html)

我的高级未经测试的想法是遵循相同的原则并创建程序集级属性，该属性将由约定机制处理并应用于您的所有实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:04:37.183

尝试在 SQL SERVER 中将默认模式名称设置为“dbo”。

[http://msdn.microsoft.com/en-us/library/ms173423.aspx](http://msdn.microsoft.com/en-us/library/ms173423.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-07T13:40:41.217

此错误的原因之一是名为“EventHosts”的表可能不存在或该表已重命名为其他名称，请检查..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-06T18:54:09.633

[https://stackoverflow.com/a/12808316/3069271](https://stackoverflow.com/a/12808316/3069271)

我有同样的问题，这是映射和数据库之间的多元化问题。

# javascript - 正则表达式 JavaScript 图像文件扩展名

> ID：10473185
> 
> 赞同：50
> 
> 时间：2012-05-06T18:44:44.080
> 
> 标签：javascript, regex, image

我需要一个正则表达式来验证 javascript 中的图像文件扩展名。你是否有一个 ？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-05-06T18:49:45.377

你能解释一下目的吗？

无论如何，这是假设您支持几种图像类型的情况。

```
(/\.(gif|jpe?g|tiff?|png|webp|bmp)$/i).test(filename) 
```

我将整个正则表达式放在括号 () 中，以便消除斜杠 (/) 运算符和 RegExp 对象之间的歧义。有关更多详细信息，请参阅 JSLint。

这也是原始的正则表达式。

```
/\.(gif|jpe?g|tiff?|png|webp|bmp)$/i 
```

此正则表达式还假定您在扩展名之前包含点。`\.`如果不是，请删除。

# actionscript-3 - 与 stagewebview 通信

> ID：10473186
> 
> 赞同：0
> 
> 时间：2012-05-06T18:44:45.910
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.5

我正在使用 StageWebView 在我的 flex 应用程序中显示 html 内容，因为我必须在我的 flex 应用程序中显示另一个应用程序（在 html5 中开发）。现在我需要从 stagewebview 的 html 内容中获取值。但我搜索了很多，我无法找到解决方案。即使在 Adob​​e 的文档中，也有人说我们无法通过 stagewebview 进行交流。但我必须与它沟通。我的应用程序是适用于 ios 的 flex 移动应用程序。

请就这个问题向我提出建议。

在此先感谢文盖特什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T12:11:25.530

我想你正在寻找这个： [http ://code.google.com/p/stagewebviewbridge/](http://code.google.com/p/stagewebviewbridge/)

对我来说，由于某种原因（编译器错误）它不起作用，但也许它可以帮助你。

# opengl - VAO 性能

> ID：10473190
> 
> 赞同：0
> 
> 时间：2012-05-06T18:45:07.637
> 
> 标签：opengl, graphics, 3d

我目前的想法是在我的引擎中有一个模型管理器。它将有一个网格字典，每个网格接受一个字符串，将自身从内存加载到 GPU 内存（RAII 样式），并公开原始信息（用于剔除）以及渲染器的渲染信息。我没有绑定缓冲区并拥有指向这些缓冲区的指针，而是考虑为该网格创建一次 VAO，并且只公开 VAO 指针，然后在销毁（从字典中删除）时，网格会自行清理，删除 vao 和缓冲区。

这种方法是否存在性能问题？VAO 是否占用更多额外空间，绑定 VAO 是否比绑定缓冲区并每次都指向它们花费更多？或者这是一种可行的方法，我正在考虑也许我必须在屏幕上显示很多模型，并且每帧绑定 VAO 这么多次可能会很昂贵。

# html - 输入号码的边框？

> ID：10473191
> 
> 赞同：0
> 
> 时间：2012-05-06T18:45:10.727
> 
> 标签：html, css, input

我试图在它周围设置一个边框，但我做不到。这是我所拥有的CSS：

```
body{ margin:1em; }
body *{ font-family: RussellSquare}
body{background-color: #363636;}

input[type=number]{
    font-size:1em;
    width:2.5em;
    padding:3px;
    margin:0;
    border-radius:3px; 
    border: 1px solid #000;
    text-align:center;
}

input[type=number]:focus{
    outline:none;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:29:43.273

它工作得很好。[在此处](http://jsfiddle.net/eUQtU/)在不同的浏览器上亲自尝试。

简短的解释是：

`border`是所有主流浏览器都支持的 CSS 属性。

`border-radius`是在所有现代浏览器上运行的 CSS3 属性。IE 6/7/8**不是**其中之一。

如果您想了解有关 Internet Explorer 支持的更多信息`border-radius`

阅读：[在 IE 中支持“border-radius”](https://stackoverflow.com/questions/635851/support-for-border-radius-in-ie)

# java - 使用 jar 文件和资源创 建一个 exe

> ID：10473194
> 
> 赞同：0
> 
> 时间：2012-05-06T18:45:39.790
> 
> 标签：java, resources, exe

有没有办法创建一个包含资源文件夹的exe文件？我正在寻找类似mac的应用程序捆绑包的东西。我还希望能够在资源文件夹中写入和读取文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:55:02.697

如果您使用其中的资源构建 jar，那么您可以使用[launch4j](http://launch4j.sourceforge.net/)将其包装为可执行文件（免费！）。

您仍然需要 JRE，否则它将像普通的 .exe 一样运行。

# web-services - 为什么 RailwayJS 不被视为 RESTful 网络服务器？

> ID：10473198
> 
> 赞同：0
> 
> 时间：2012-05-06T18:46:01.903
> 
> 标签：web-services, node.js, rest, networking, architecture

我正在考虑使用 RailwayJS 来构建我的网络服务器。以前我用的是express，它被认为是RESTful。然而，从我一直在阅读的内容来看，RailwayJS 似乎不被认为是 RESTful，即使它使用 express！

RailwayJS 是什么使它不是 RESTful 的？如果它使用 JSON 传递消息，那它不是 RESTful 的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T20:25:11.910

我很好奇您在哪里和/或如何得出关于 REST 和 Express/RailwayJS 的结论？

Express 允许您以任何您希望的方式自由地设置您的路由器；你可以很容易地创建一个非常 RESTful 风格的应用程序，或者你可以很容易地打破 REST 架构中的每条规则。Express 不会对您发表任何意见。

然而，RailwayJS 似乎更喜欢 RESTful 风格的界面——至少，在与您在 Ruby on Rails 等相同的上下文中使用“REST”时。Railway 支持[基于资源的路由](http://railwayjs.com/#routing)，它将资源映射到七个非常类似于 Rails 的 URL/HTTP 动词：

> 基于资源的路由提供 HTTP 动词和控制器动作之间的标准映射：
> 
> ```
> map.resources('posts'); 
> ```
> 
> 将提供以下路线：
> 
> ```
>  helper | method | path                   | controller#action
> ---------------------------------------------------------------
>      posts GET      /posts                   posts#index
>      posts POST     /posts                   posts#create
>   new_post GET      /posts/new               posts#new
>  edit_post GET      /posts/:id/edit          posts#edit
>       post DELETE   /posts/:id               posts#destroy
>       post PUT      /posts/:id               posts#update
>       post GET      /posts/:id               posts#show 
> ```

因此，我的结论是，在大多数人在设计基于 MVC 的 Web 应用程序时使用“REST”时，Express*可以*是 RESTful 的，这取决于您如何设计应用程序，但本质上不是 RESTful，而且 RailwayJS更喜欢 RESTful 设置（尽管您也不必*在*RailwayJS 中使用基于资源的路由）。

# objective-c - 出现 ModalViewController 时 TabBar 控制器不旋转

> ID：10473199
> 
> 赞同：1
> 
> 时间：2012-05-06T18:46:11.350
> 
> 标签：objective-c, ios, ipad, rotation

我正在将 UIViewController 呈现为来自 TabBarController 的 Modal，如下所示（控制器具有自定义形状，因此我需要它的背景可见）：

```
SubsInfoViewController * sivc = [[SubsInfoViewController alloc] init];

AppDelegate * delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
delegate.tabBarController.modalPresentationStyle = UIModalPresentationCurrentContext;
[delegate.tabBarController presentModalViewController:sivc animated:YES]; 
```

当我旋转设备（在这种情况下为 Ipad）时，问题出现了，模态视图控制器旋转得很好，但后面的控制器没有，当我关闭模态时它会旋转，如果我的模态覆盖就好了孔屏，但由于它使背景可见，旋转发生时感觉不对。

任何想法？谢谢！

# list - 如何从递归和尾递归列表中获取最后两个值？

> ID：10473204
> 
> 赞同：0
> 
> 时间：2012-05-06T18:46:55.047
> 
> 标签：list, prolog

我需要一个谓词`last_two(LST,Y,Z)` ，将列表的最后一个值分配给 Z，将倒数第二个值分配给 Y。我怎样才能在递归中做到这一点？我怎么能在尾递归中做到这一点？谢谢！

这是一个带有尾递归的代码，我可以让它更高效吗？

```
last2_2([_|[H1|[H2|T]]],Y,Z):-last2_2([H1|[H2|T]],Y,Z).

last2_2([H1,H2],H1,H2). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:48:35.793

您可以简化递归案例：

```
last2_2([_|T],X,Y) :- last2_2(T,X,Y). 
```

这将使每个递归案例更快（更少的模式匹配），但会导致它走得太远，并且必须回溯以获取最后两个元素。随着列表变长，这可能会更有好处（因为回溯的数量与列表的长度无关）。

您可以更进一步，将递归案例替换为：

```
last2_2([_,_|T],Y,Z):-last2_2(T,Y,Z).
last2_2([_,A,B],A,B). 
```

在这里，递归案例一次剥离 2 个元素（以更多的模式匹配为代价），我们需要第二个基本案例来处理奇数长度的列表。

# android - Android twitter 连接/身份验证意图形成错误？

> ID：10473210
> 
> 赞同：0
> 
> 时间：2012-05-06T18:47:28.847
> 
> 标签：android, android-intent, twitter, twitter-oauth

一段时间以来，我一直在尝试通过 android 连接到 Twitter。我目前正在使用这个 api： http: [//kenai.com/projects/twitterapime/forums/forum/topics/13327-Twitter-API-ME-1-8-Now-with-OAuth-support](http://kenai.com/projects/twitterapime/forums/forum/topics/13327-Twitter-API-ME-1-8-Now-with-OAuth-support)

我用他们的例子和我的钥匙，一切都没有问题。所以配置没有问题。但是在我具有完全相同代码的项目中，我无法使其工作。

我相信它与创建新意图有关（这也是日食指向错误的地方）

我正在尝试使用自定义布局，但我不知道我需要更改什么才能使这个特定的 Twitter 布局正常工作。在主要活动中，我有一个按钮：

```
public void onClick(View v)
{
   startActivity(new Intent(this,Twitter.class));
} 
```

在推特课上

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //this.webView = (WebView) findViewById(R.id.webView1);

    WebView myWebView = new WebView(this);
    setContentView(myWebView);

    authenticate();             
}

private void authenticate()
{
    WebViewOAuthDialogWrapper page = new WebViewOAuthDialogWrapper(webView);

    page.setConsumerKey(CONSUMER_KEY);
    page.setConsumerSecret(CONSUMER_SECRET);
    page.setCallbackUrl(CALLBACK_URL);
    page.setOAuthListener(this);

    page.login();
} 
```

对 Twitter 活动进行/更改需要哪些要求/调整？

我相信我需要更改意图过滤器中的某些内容，但我什至不了解意图的工作。我一直在做简单的布局。

请注意，我也已经授予了 Internet 权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:35:18.583

看起来我犯了2个错误。

首先，我试图在 WebViewOAuthDialogWrapper 中使用“webView”变量而不是“myWebView”，所以它没有被初始化......

第二个看起来我忘记了加载外部库的顺序....所以一定要把外部库放在eclipse项目的顶部。

由于这些问题失去了大约 2 天的时间......哦，好吧

# sharepoint - 在线 SharePoint 试用版中是否可以进行基于表单的身份验证

> ID：10473213
> 
> 赞同：1
> 
> 时间：2012-05-06T18:48:12.637
> 
> 标签：sharepoint, authentication, forms-authentication

我认为，Microsoft 默认使用基于声明的身份验证来在线试用 SharePoint 的试用版，但可能可以在专用 O365 中使用基于表单的身份验证。我需要测试或编写应用程序来验证 SharePoint Online 的用户身份，这些用户可能具有基于声明或基于表单的身份验证。那么有没有办法创建使用基于表单的身份验证的 SharePoint 在线网站？或者是否有任何 SharePoint 在线测试站点？

我还有一个问题：在 SharePoint Online 中，我邀请了一位外部（hotmail）用户。我想知道有关如何对外部用户进行身份验证的详细步骤？

谢谢

# javascript - Javascript中的“new”和“prototype.constructor”之间有什么联系？

> ID：10473219
> 
> 赞同：1
> 
> 时间：2012-05-06T18:49:20.343
> 
> 标签：javascript

这似乎是许多人讨论过的事情。但不幸的是，我找不到我的问题的答案。这是一段关于 Javascript 继承的代码（来自一本书）：

```
function Car() {
    var self = this;
    self.type = "Car"
    self.go = function() {
        console.log("Going...");
    };
};

Toyota = function() { console.log("Original called"); };
Toyota.prototype = new Car();
Toyota.prototype.constructor = function() {
    var self = this;
    self.type = "Toyota";
    self.go = function() {
        console.log("A Toyota car is going...");
    }
};
Toyota.prototype.isJapaneseCar = true;

function TestCar() {
    console.log("Toyota.prototype.constructor: " + Toyota.prototype.constructor);
    var t = new Toyota();
    console.log("t.constructor: " + t.constructor);
    console.log(t.type);
}; 
```

Firefox 控制台中的输出：

```
Toyota.prototype.constructor: function () {
    var self = this;
    self.type = "Toyota";
    self.go = function () {
        console.log("A Toyota car is going...");
    };
    }
Original called
t.constructor: function () {
    var self = this;
    self.type = "Toyota";
    self.go = function () {
        console.log("A Toyota car is going...");
    };
    }
Car 
```

从输出中可以看出，**新的 Toyota()**调用：

```
var t = new Toyota(); 
```

没有像预期的那样调用**Toyota.prototype.constructor**函数，而是仍然调用最初定义的函数：

```
Toyota = function() { console.log("Original called"); }; 
```

高票数的[帖子给出了相当详细的解释和示例：它说“](https://stackoverflow.com/questions/1646698/what-is-the-new-keyword-in-javascript) **3.它执行构造函数，只要提到这个，就会使用新对象。** ”提到的“构造函数”是指prototype.constructor吗？以下 3 行如何相关：

1.  Toyota = function() { console.log("原来叫"); }
2.  Toyota.prototype.constructor = function() { ...
3.  var t = new Toyota();

[**编辑**] 最让我困惑的是为什么当我调用**new Toyota()时没有调用****构造函数**（Toyota.prototype.constructor） ？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:03:24.460

object 中的`constructor`属性`prototype`包含对构造该类型对象实例的函数的引用。希望我不是想在这里混淆。

对于字符串对象，您会看到`constructor`引用`String`函数的属性（非正式地称为构造函数。）

```
console.log("".constructor); // would print function String() { [native code] } 
```

这就是为什么我们通常会将类（即函数）`constructor`属性重新分配给它自己的原因。

```
Toyota.prototype.constructor = Toyota;

var t = new Toyota();
console.log(t.constructor); // prints function Toyota() { /* definition */ } 
```

希望这能回答你的问题。**

# php - 如何防止在地址栏中显示文件？

> ID：10473223
> 
> 赞同：-3
> 
> 时间：2012-05-06T18:49:47.640
> 
> 标签：php

我有一个站点，我想创建一个包含所有用户日志的 log.txt 文件。例如，用户随时登录并注销。也就是说，用户登录和退出的时间。我可以用数据库来做这个，但是会有很多行，我不想要它。如果我将 log.txt 文件放入 /logs/log.txt，任何将 domain.com/log/log.txt 写入地址栏的用户都会看到该文件。我该如何防止这种情况。（我使用 PHP）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:09:01.773

`.htaccess`确实，您可以使用或通过在其他 Apache 配置位置放置类似规则来隐藏网站访问者的文件。但是这种事情不是小事，很容易出错。对站点访问者隐藏文件的最佳方法是通过项目的目录结构。例如：

*   `www/`包含网站访问者需要直接使用浏览器访问的所有文件的目录。这将是我们在您的 Apache 配置中用作网站根目录的目录。如果浏览器不需要获取文件，它不应该在这里。
*   其他目录，例如`logs/`日志、`lib/`包含在脚本中的源代码、`config/`设置和配置文件等。由于它们不在网站根目录 ( `www/`) 内，因此用户无法将浏览器指向这些文件中的任何一个。

如果您在共享主机上，并且他们只给您一个文件夹，即您的网站根目录，那么您就不能这样做。不过，我不会从这样的公司购买托管帐户，因为有很多可以让您将文件放在 Web 根目录之外的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:55:17.440

使用 .htaccess

```
 <Files "log.txt">
        order deny,allow
        deny from all
        allow from 1.2.3.4
    </Files> 
```

1.2.3.4 是您的 IP，如果您希望能够通过网站从浏览器访问它。否则删除该行，因此您将只能通过 FTP 或脚本访问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T18:52:10.470

您可以使用包含以下内容的 .htaccess 文件来阻止对日志文件夹的 http 访问

```
deny from all 
```

# lua - 字符串拆分在lua中返回零值错误

> ID：10473231
> 
> 赞同：3
> 
> 时间：2012-05-06T18:50:34.717
> 
> 标签：lua

我正在关注关于字符串拆分的[lua 文档页面](http://lua-users.org/wiki/SplitJoin)，我自己尝试时出错。例如，

```
Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio
split("a,b,c", ",") 
```

返回

```
stdin:1: attempt to call global 'split' (a nil value)
stack traceback:
stdin:1: in main chunk
[C]: ? 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T20:30:38.207

[那](http://lua-users.org/wiki/SplitJoin)不是“lua 文档页面”。这是一篇 wiki 文章，解释了拆分和连接字符串的*概念*，而不是 Lua 中的任何实际函数。[Lua 文档](http://www.lua.org/manual/5.1/)明确指出没有“拆分”功能。wiki 文章正在解释如何*创建*这样的函数和/或这样的函数如何工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:17:29.870

消息很清楚：您已尝试调用名为 的全局函数`split`，但未定义。

# html - node.js express.js 路由斜线 css

> ID：10473233
> 
> 赞同：2
> 
> 时间：2012-05-06T18:50:44.030
> 
> 标签：html, node.js, express

当我写 localhost/profil 时，css 可以工作。但是当我写 localhost/profil/ 时，css 不起作用。

```
app.use(express.static(__dirname+'/public'));
app.get('/profil',[checkCo],require('./routes/profil.js')); 
```

为什么？

谢谢！

**编辑：**

这是因为它认为 profile/ 是一个文件夹，所以我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T20:31:00.390

您可能需要在 HTML 中使用绝对路径。

例如，而不是

```
<link rel="stylesheet" href="style.css"> 
```

你需要做

```
<link rel="stylesheet" href="/style.css"> 
```

在第一个示例中，浏览器尝试访问`style.css`用户导航到的当前目录。因此，如果用户导航到`/profil/`，它会尝试从`/profil/style.css`. 在第二个示例中，浏览器被告知`/style.css`无论如何都加载 css。

# python - 无法修复 binascii 奇数长度字符串问题

> ID：10473234
> 
> 赞同：2
> 
> 时间：2012-05-06T18:50:55.157
> 
> 标签：python

我在这里有一个小脚本，我需要一些帮助：

```
for song in songs:
    slash = song.rindex('\\')
    songbyte = slash + 2
    if len(str(songbyte)) < 2:
    #if songbyte < 10:
        songbyte = "0" + str(songbyte)
        f.write(binascii.a2b_hex(songbyte))
    else:
        f.write(binascii.a2b_hex("{0:x}".format(songbyte)))
f.close()
return 
```

首先，我正在尝试编写一个播放列表。出于测试目的，我正在编写一个包含 49 首歌曲的歌曲——歌曲是我正在迭代的包含 49 首歌曲的列表

我需要编写歌曲字节——它的值范围从 8 到 72。目前我只是迭代并确保它对每个歌曲字节都有正确的值（它是一个已知正确播放列表的副本，验证通过 diff 和十六进制编辑器）。

我的问题是这条线

```
print(binascii.a2b_hex("{0:x}".format(songbyte))) 
```

抛出“TypeError：奇数长度的字符串”。现在，这已经足够描述了。通过调查，我确定它会出错时的songbyte的值是8。但是没有意义的是，这个错误发生在列表中的37首歌曲中，并且大部分其他歌曲的songbytes也是 8 - 并且被我的 len(str(songbyte)) < 2 检查添加了 0 - 但奇怪的是这个没有。

虽然我希望，但我不确定这是否足以帮助我解决问题，尽管我认为我不能提供整个脚本的完整细节，但我不能。还有另一种方法可以将歌曲字节（以十六进制形式）写入文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:55:22.353

您应该使用[`struct.pack`](http://docs.python.org/library/struct.html#struct.pack)，这正是为此目的：

```
import struct
for song in songs:
    slash = song.rindex('\\')
    songbyte = slash + 2
    f.write(struct.pack('!B', songbyte)) 
```

格式字符串`"{0:x}"`不会在您想要的数字前插入零`"{0:02x}"`。

```
>>> "{0:x}".format(12)
'c'
>>> "{0:02x}".format(12)
'0c' 
```

然而，使用 binascii 会导致不必要的复杂和脆弱的代码。例如，如果值超过 255，它将静默生成超过 2 个字符。

# ios - iOS：使用 OpenGL 绘制视频

> ID：10473235
> 
> 赞同：0
> 
> 时间：2012-05-06T18:51:00.703
> 
> 标签：ios, opengl-es-2.0, avcapture

我正在尝试在相机的视频上绘制一些 OpenGL 图形。我用绘制几个带纹理的三角形的代码修改了 Apple 的[GLCameraRipple示例。](http://developer.apple.com/library/ios/#samplecode/GLCameraRipple/Introduction/Intro.html)这段代码在我的另一个 OpenGL 项目中运行良好（但没有 GLKit）。不幸的是，它只能在这里工作：当我的应用程序启动时，我看到屏幕上充满了 ClearColor，上面有我的带纹理的三角形（但没有视频），一会儿屏幕变成黑色，我什么也看不到。你能解释一下是什么问题吗？

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{

glClearColor(0.5, 0.0, 0.0, 0.3);
glClear(GL_COLOR_BUFFER_BIT);

glUseProgram(_program);

glUniform1i(uniforms[UNIFORM_Y], 0);
glUniform1i(uniforms[UNIFORM_UV], 1);

if (_ripple)
{
    glDrawElements(GL_TRIANGLE_STRIP, [_ripple getIndexCount], GL_UNSIGNED_SHORT, 0);
}

[self drawAnimations];

}

- (void) drawAnimations{

// Use shader program.
glUseProgram(_texturingProgram);

GLfloat modelviewProj[16];
[self MakeMatrix:modelviewProj 
         OriginX:100.0 
         OriginY:100.0 
           Width:200.0 
          Height:200.0
        Rotation:0.0];

// update uniform values
glUniformMatrix4fv(texturing_uniforms[TEXTURING_UNIFORM_MODEL_VIEW_PROJECTION_MATRIX], 1, GL_FALSE, modelviewProj);

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, _animationTexture);
glUniform1i(texturing_uniforms[TEXTURING_UNIFORM_TEXTURE], 0);

glVertexAttribPointer(TEXTURING_ATTRIB_VERTEX,3, GL_FLOAT, GL_FALSE, sizeof(vertexDataTextured), &plain[0].vertex);
glEnableVertexAttribArray(TEXTURING_ATTRIB_VERTEX);

glVertexAttribPointer(TEXTURING_ATTRIB_TEX_COORDS, 2, GL_FLOAT, GL_FALSE, sizeof(vertexDataTextured), &plain[0].texCoord);
glEnableVertexAttribArray(TEXTURING_ATTRIB_TEX_COORDS);

glDrawArrays(GL_TRIANGLES, 0, 6);

if (![self validateProgram:_texturingProgram]) {

    NSLog(@"Failed to validate program: (%d)", _texturingProgram);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:30:53.953

您可以将包含您的 Open GL 绘图层的透明 UIView 放在另一个包含相机预览图像层的 UIView 上。

# c# - c#中2个日期时间之间的搜索值

> ID：10473237
> 
> 赞同：1
> 
> 时间：2012-05-06T18:51:08.640
> 
> 标签：c#, sql-server

在 winform 应用程序中，我有一个用于显示数据库值的 datagridview。我使用以下代码查看两个特定日期时间之间的结果，例如 2010 年 6 月 5 日和 2010 年 7 月 5 日之间的结果，但它只显示在这些日期时间中完全更新的行。我的意思是它只是向我显示具有确切注册日和完成日的行。我想看看这些时间之间的所有结果。

```
private void button1_Click(object sender, EventArgs e)
    {
        sql = new SqlConnection(@"Data Source=PC-PC\PC;Initial Catalog=Test;Integrated Security=True");
        adapter = new SqlDataAdapter("select EntryID,Name,FamilyName,Registrationday,Finishday,Fee from Entry where Registrationday =@Registrationday AND Finishday =@Finishday", sql);
        adapter.SelectCommand.Parameters.AddWithValue("@Signday", Convert.ToDateTime(textBox1.Text).ToShortDateString());
        adapter.SelectCommand.Parameters.AddWithValue("@Finishday", Convert.ToDateTime(textBox2.Text).ToShortDateString());
        dt = new DataTable();
        adapter.Fill(dt);
        dataGridView1.DataSource = dt;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:53:23.337

对于与您的间隔*重叠的行：*

```
Registrationday <= @Finishday AND Finishday >= @Registrationday 
```

这匹配以下所有行：

```
-------R-------F-----------
    *------------*
     *------*
       *---*
          *---*
            *------* 
```

对于*完全包含在*您的区间内的行：

```
Registrationday >= @Registrationday AND Finishday <= @Finishday 
```

这仅匹配以下行：

```
-------R-------F-----------
       *---*
          *---* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:53:20.427

为范围指定 <= 和 >=

```
 Registrationday >=@Registrationday AND Finishday <=@Finishday 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T18:54:06.217

您可以使用[`BETWEEN`](http://msdn.microsoft.com/de-de/library/ms187922.aspx)：

```
SELECT  EntryID, Name, FamilyName, Registrationday, Finishday, Fee 
FROM    [Entry] 
where Registrationday BETWEEN @Registrationday AND  @Finishday 
```

尽管目前尚不清楚您为什么要过滤`Finishday`。

请注意，您不应将 a`String`作为参数传递，而应将 a`DateTime`

```
adapter.SelectCommand.Parameters.AddWithValue("@Registrationday", Convert.ToDateTime(textBox1.Text));
adapter.SelectCommand.Parameters.AddWithValue("@Finishday", Convert.ToDateTime(textBox2.Text)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T18:56:34.943

只需更新查询字符串

```
adapter = new SqlDataAdapter("select EntryID,Name,FamilyName,Registrationday,Finishday,Fee from Entry where Registrationday >=@Registrationday AND Finishday <=@Finishday", sql); 
```

# android - 静音关机

> ID：10473239
> 
> 赞同：1
> 
> 时间：2012-05-06T18:51:11.237
> 
> 标签：android, android-emulator, shutdown

我在关机时使手机静音，然后在启动时恢复声音，以避免电话公司发出那种可怕的声音。为此，我将接收器用于 ShutDown 和 BootCompleted 事件。问题是公司音乐在关机事件触发之前响起，所以我听到了。然后我重新启动并没有听到任何声音，因为它处于静音模式，完美！那么，有什么帮助吗？还有什么要听的活动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:59:32.513

著名的（？）静音启动应用程序（https://play.google.com/store/apps/details?id=com.antweb.silentboot）也无法做到这一点，所以猜测它不可行/微不足道至少。

并非没有 rom/root 黑客攻击，例如（重新）移动声音文件或在关机菜单中添加一些东西。有些手机有这个作为关机声音：/system/media/audio/ui/shutdown.ogg

# c# - 是否有用于发送短信的谷歌语音 api？

> ID：10473243
> 
> 赞同：1
> 
> 时间：2012-05-06T18:51:25.590
> 
> 标签：c#, google-voice

有谁知道任何有效的gvoice api？我找到了这个项目： http: [//sourceforge.net/projects/gvoicedotnet/](http://sourceforge.net/projects/gvoicedotnet/) 但是自从几个月前更改了网址后，登录似乎不再有效。

有人对向我网站的用户发送短信有什么好的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T19:34:46.973

我找到了一个：SharpGoogleVoice。 [https://bitbucket.org/jitbit/sharpgooglevoice/downloads](https://bitbucket.org/jitbit/sharpgooglevoice/downloads)

它只有短信支持，但效果很好，看起来不错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-29T20:35:16.130

自我推销：我的 API，SharpVoice，工作/工作得很好（一段时间没有经过测试）：[https ://github.com/descention/sharp-voice](https://github.com/descention/sharp-voice)

`Voice voiceConnection = new Voice(loginEmail, loginPassword); string response = voiceConnection.SendSMS(smsToPhoneNumber, smsMsgBody);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:06:16.887

您需要的是一个 SMS 网关，它可以让您通过 API 发送文本消息。一个快速的谷歌搜索产生了[Zeep Mobile](http://www.zeepmobile.com/)，它允许开发者从他们的应用程序中免费发送 SMS 文本消息。

因为它是免费的，所以可能会有一些限制，但是如果你使用策略或适配器模式正确地构建你的应用程序，那么你应该能够在以后根据你的应用程序的需要用更高级的东西替换这个模块.

免费计划的主要限制是它受广告支持。在初始开发和测试期间，这对您来说可能很好，但您的生产用户可能会发现这是使用您的服务时的一个重大问题。Zeep 确实有一个消除广告的付费计划，当然还有无数其他具有 API 的 SMS 网关，您可以付费使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-31T20:45:59.310

您可以使用 Twilio[发送消息。](https://www.twilio.com/docs/api/rest/sending-messages)

使用 C# 帮助程序库的示例：

[https://www.twilio.com/docs/libraries/csharp](https://www.twilio.com/docs/libraries/csharp)

```
// Download the twilio-csharp library from twilio.com/docs/csharp/install
using System;
using Twilio;
class Example
{
 static void Main(string[] args)
 {
    // Find your Account Sid and Auth Token at twilio.com/user/account
    string AccountSid = "YOUR_ACCOUNT_SID";
    string AuthToken = "YOUR_AUTH_TOKEN";
    var twilio = new TwilioRestClient(AccountSid, AuthToken);

    var message = twilio.SendMessage(
        "+15017250604", "+15558675309",
        "Hey Kyle! Glad you asked this question.",
        new string[] { "http://farm2.static.flickr.com/1075/1404618563_3ed9a44a3a.jpg" }
    );
    Console.WriteLine(message.Sid);
 }
} 
```

# c# - 添加动态复选框句柄 CheckedChanged 事件 ASP.NET

> ID：10473245
> 
> 赞同：2
> 
> 时间：2012-05-06T18:52:00.933
> 
> 标签：c#, asp.net

我想知道为什么事件没有触发以及如何找到哪个复选框控件触发了事件。

```
chkList1 = new CheckBox();
                            chkList1.Text = row["subj_nme"].ToString();
                            chkList1.ID = row["subjid"].ToString();
                            chkList1.Checked = true;
                            chkList1.Font.Name = "Verdana";
                            chkList1.Font.Size = 12;
                            chkList1.AutoPostBack = true;
                            chkList1.CheckedChanged += new EventHandler(CheckBox_CheckedChanged);
                            Panel1.Controls.Add(chkList1);

protected void CheckBox_CheckedChanged(object sender, EventArgs e)
            {
                Label1.Text = "Called";
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T22:48:36.080

如果事件没有触发，可能是由于以下两个原因之一：

1.  控件在页面生命周期中重新创建得太晚。尝试在`OnInit`.
2.  验证是防止回发。要解决此问题，您可以`CausesValidation`在所有 CheckBox 控件上设置为 false。

您可以使用参数找出哪个控件触发了事件`sender`。

```
protected void CheckBox_CheckChanged(object sender, EventArgs e)
{
    //write the client id of the control that triggered the event
    Response.Write(((CheckBox)sender).ClientID);
} 
```

# javascript - 选择另一个输入

> ID：10473248
> 
> 赞同：0
> 
> 时间：2012-05-06T18:52:25.150
> 
> 标签：javascript, jquery, jquery-ui

我有这两行：

```
<tr>
  <td class="contenu"><input type="text" name="numart" id="numart"/></td>
  <td class="contenu"><input type="text" name="descart" id="descart"/></td>
  <td class="contenu"><input type="text" name="pdepart" id="pdepart"/></td>
  <td class="contenu"><input type="text" name="pvart" id="pvart"/></td>
  <td class="contenu"><input type="text" name="ageart" id="ageart"/></td>
  <td><a class="plus" title="Rajouter une ligne">+</a></td>
</tr> 
```

```
<tr>
  <td class="contenu"><input type="text" name="numart" id="numart"/></td>
  <td class="contenu"><input type="text" name="descart" id="descart"/></td>
  <td class="contenu"><input type="text" name="pdepart" id="pdepart"/></td>
  <td class="contenu"><input type="text" name="pvart" id="pvart"/></td>
  <td class="contenu"><input type="text" name="ageart" id="ageart"/></td>
  <td><a class="plus" title="Rajouter une ligne">+</a></td>
</tr> 
```

我将如何选择：

```
<input type="text" name="pvart" id="pvart"/> 
```

从：

```
<input type="text" name="pdepart" id="pdepart"/> 
```

因为：

```
pvart= 2*pdepart 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:57:46.300

首先，您应该解决重复的 id 以避免 JavaScript 出现问题

如果您只想对一个输入的变化做出反应，将其乘以 2，然后插入另一个输入，那么您可以执行以下操作：

```
$("#pdepart").change(function() {
    $("#pvart").val(parseInt($(this).val(), 10) * 2);
}); 
```

编辑：如果你只想做一次：

```
 $("#pvart").val(parseInt($("#pdepart").val(), 10) * 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:57:56.883

请将您的答案编辑为正确的 HTML。HTML 不允许两个元素具有相同的 id 属性。如果这是您的页面的编码方式，那么您需要先解决此问题。

如果要预填充，请使用 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T18:59:32.293

当您认为填充正确时，请在 event 上尝试以下代码行`pvart`。 可能是添加图标的onkeyup事件`pdepart`或onblur事件将值转换为数字`pdepart``+`

```
document.getElementById('pvart').value = (+document.getElementById('pdepart').value)*2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T19:16:32.717

```
$('#pdepart').each(function() {
   if(this.value)
       $(this).next('#pvart').val(parseInt(this.value) * 2);
}); 
```

或者，如果您想更改任何事件，则可以执行以下操作：

```
$('#pdepart').on('keyup', function() { //  you can bind any event like focus, change, blur etc
   if(this.value)
           $(this).next('#pvart').val(parseInt(this.value) * 2);
}); 
```

***笔记：***

`$(this).next('#pvart')`将选择您正在处理的`input#pvart`下一个。`input#pdepart`

# python - 如何使用 Pyramid 的 url 调度操作子域？

> ID：10473251
> 
> 赞同：3
> 
> 时间：2012-05-06T18:52:42.717
> 
> 标签：python, pyramid

> **可能重复：**
> [单个 Pyramid 实例上的多个域和子域](https://stackoverflow.com/questions/7607807/multiple-domains-and-subdomains-on-a-single-pyramid-instance)

我似乎找不到任何关于使用 Pyramid 框架处理子域的文档。在他们说的地方有一个关于这个的[问题/答案](https://stackoverflow.com/questions/5274813/routing-subdomains-in-pyramid)

> “理论上，这是由带有预生成器参数的 add_route() 覆盖的。”

我还在[文档](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/interfaces.html)中发现他们在 IRoutePregenerator 接口下提到子域

> `__call__(request, elements, kw)`：“路由的预生成器被调用`pyramid.request.Request.route_url()`以调整用户为特殊目的传递给它的参数集，例如 Pylons '子域'支持。”

但是这些是唯一甚至提到子域的地方，并且没有关于如何使用它们的任何内容。

我想要的只是让通配符 DNS 接受任何子域。如果子域是用户，则路由到某个控制器，如果子域是任何其他词，则路由到控制器并将子域作为变量提供。

使用 Flask 非常简单：

```
mod = Blueprint('users', __name__, subdomain='user')
@mod.route('/')
code 
```

或者

```
mod = Blueprint('everything', __name__)
@mod.route('/', subdomain='<var1>') 
```

我如何/是否可以使用 Pyramid 实现这一目标？

# java - 在原始接收线程之外访问 HttpSession

> ID：10473254
> 
> 赞同：4
> 
> 时间：2012-05-06T18:53:12.853
> 
> 标签：java, spring, asynchronous, httpsession

我正在使用 Spring 3。当控制器收到请求时，它会将控制权传递给在 Service bean 中`someMethod()`使用注释的方法`@Async`，然后返回。当我访问`someMethod()`HttpSession 对象时，我收到此异常

```
java.lang.IllegalStateException: No thread-bound request found: Are you 
referring to request attributes outside of an actual web request, or 
processing a request outside of the originally receiving thread? If you are 
actually operating within a web request and still receive this message, your 
code is probably running outside of DispatcherServlet/DispatcherPortlet: In 
this case, use RequestContextListener or 
RequestContextFilter to expose the current request. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:00:50.690

`HttpSession`对象本身可以在多个线程中使用（但不是**线程**安全的，因此必须同步）。然而 Spring 正在做一些额外的魔法，例如当你有`session`-scoped bean 时。即它`ThreadLocal`在下面使用将当前会话与线程绑定。

我不知道您的确切情况是什么，但显然 Spring会在您处于另一个线程中时尝试从中检索 - 这显然失败了`HttpSession`。`ThreadLocal`

解决方案很简单 - 在方法中提取您需要的会话属性`@Async`并直接传递它们。顺便说一句，这是更好的设计 - 避免传递`HttpSession`对象，因为它使测试更加困难，并且您的代码将来被重用的可能性要小得多。

# objective-c - 使用格式说明符将字符串解包到对象数组中

> ID：10473261
> 
> 赞同：0
> 
> 时间：2012-05-06T18:53:42.610
> 
> 标签：objective-c, cocoa, nsstring

有没有办法根据多个格式说明符将字符串转换为不同数据类型的对象数组？

我已经尝试过`initWithFormat:arguments:`，但我没有得到预期的结果。`struct`Python模块中有一个类似的函数`unpack(fmt,String)`，其中`fmt`是格式说明符字符串，`String`是要转换的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:01:51.613

调查`sscanf`：

```
void unpackStr(NSString *string, NSString *format, ...)
{
    va_list args;
    va_start(args, format);

    vsscanf([string UTF8String], [format UTF8String], args);

    va_end(args);
} 
```

# scala - Play framework 2.x Scala 模板中的内联变量

> ID：10473265
> 
> 赞同：5
> 
> 时间：2012-05-06T18:54:33.117
> 
> 标签：scala, playframework, playframework-2.0

如何在 Play framework 2.x Scala 模板中创建内联变量？我不清楚[Play's guide](http://www.playframework.org/documentation/2.0.1/ScalaTemplates)中的路径：

```
@defining(user.firstName + " " + user.lastName) { fullName =>
  <div>Hello @fullName</div>
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T18:59:00.370

首先，您不会创建变量，而是创建一个**值**，这意味着它是只读的。

在您的示例中，您创建了一个`fullName`可在大括号内访问的值。

```
@defining("Farmor") { fullName =>
  <div>Hello @fullName</div>
} 
```

将打印**Hello Farmor**

要定义一个可以在模板中全局访问的值，只需用大括号将所有内容包含在内。

例如

```
@defining("Value") { formId =>
  @main("Title") {
    @form(routes.Application.addPost, 'id -> formId) {
      @inputText(name = "content", required = true)
      <input type="submit" value="Create">
    }
  }
} 
```

在示例中，您可以使用任何值`formId`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-28T10:19:39.157

如果您不想使用`@defining`语法，您可以定义`reusable block`每次使用时都会评估的语法：

```
@fullName = @{
  user.firstName + " " + user.lastName
}

<div>Hello @fullName</div> 
```

使用相同的语法，您还可以将参数传递给块： [https ://github.com/playframework/Play20/blob/master/samples/scala/computer-database/app/views/list.scala.html](https://github.com/playframework/Play20/blob/master/samples/scala/computer-database/app/views/list.scala.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T19:03:01.123

这很容易，使用示例中的代码跨越您的块，然后您将可以使用`@fullName`具有值的变量：

```
user.firstName + " " + user.lastName 
```

# android - getItem 与 getItemAtPosition

> ID：10473266
> 
> 赞同：4
> 
> 时间：2012-05-06T18:54:33.423
> 
> 标签：android, performance

有两种方法可以获取列表视图的选定项目。

1.  `list.getAdapter().getItem(position);`
2.  `list.getItemAtPosition(position)`

我的问题是，哪一种是首选的方法？

我见过有人同时使用这两种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T18:59:29.293

你可以使用你想要的。`getItemAtPosition(position)`基本上用 调用适配器`getItem(position)`，这是同一回事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T19:06:10.060

这里是`getItemAtPosition()`来自源代码的实现`ListView`。

```
public Object getItemAtPosition(int position) {
  T adapter = getAdapter();
  return (adapter == null || position < 0) ? null : adapter.getItem(position);
} 
```

所以基本上它们是一样的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-25T20:38:59.777

其他答案不正确，有一个很大的不同。

当您将标头添加到 ListView 时，ListView 会将适配器包装在 HeaderViewListAdapter 中。HeaderViewListAdapter 的工作是翻译`position`以考虑标题。

例如，如果您添加了一个标头`position 1`，对应于底层适配器的`position 0`. 如果您尝试使用 adapter.getItem(position) 它实际上会返回适配器中的第二项。

如果您添加了标题，则必须使用 listView.getItemAtPosition(position)。

# java - 具有数据库访问权限的 JSP 测验应用程序

> ID：10473267
> 
> 赞同：1
> 
> 时间：2012-05-06T18:54:54.370
> 
> 标签：java, database, jsp, javabeans

我正在开发一个 java 测验应用程序。申请将包括以下形式之一的 20 个问题：

> 德语单词xxxx的英语单词是什么？
> 
> 英语单词xxxx的德语单词是什么？

我创建了一个带有单词表的数据库和一个向该表添加单词的页面。该表由以下列组成：germanWord、gender、englishWord

我的问题是，在每个问题上，我想从该数据库中随机选择一个单词来形成问题，例如：

> *英语单词wordTable.getEnglishName*的德语单词是什么？

最后，这个问题是一个多项选择题，所以是否有可能在 4 个可能的答案之一中，我可以插入一个命令来从为该问题选择的同一个条目中获取相关答案？

```
<input type="radio" name="q1Answer" value="A"/><label for="A">A) fixed answer</label><br/>
<input type="radio" name="q1Answer" value="B"/><label for="B">B) fixed answer</label><br/>
<input type="radio" name="q1Answer" value="C"/><label for="C">C) *get name from the database*</label><br/>
<input type="radio" name="q1Answer" value="D"/><label for="D">D) fixed answer</label><br/><br/>

package org.me.jsp.beans;

import java.sql.*;
import java.util.*;

public class WordDataBean {

    private Connection connection;
    private PreparedStatement addWord, getWords, removeWord, getRandEnglishWord;

    public WordDataBean() throws Exception {

        try {
            Class.forName("com.mysql.jdbc.Driver");
            connection = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/university2", "root",
                    "");

            getWords = connection.prepareStatement("SELECT * FROM word");

            addWord = connection.prepareStatement("INSERT INTO university2.word ( "
                    + "germanName, gender, englishName ) " + "VALUES ( ?, ?, ?);");

            removeWord = connection.prepareStatement("DELETE FROM university2.student "
                    + "WHERE germanName='?';");
            getRandEnglishWord= connection.prepareStatement("SELECT englishName FROM word"
                    + "ORDER BY RAND() LIMIT 1");
        } catch (SQLException sqle) {
            sqle.printStackTrace();
        }

    }

    public List<WordBean> getWordList() throws SQLException {
        List<WordBean> wordList = new ArrayList<WordBean>();

        // obtain list of titles
        ResultSet results = getWords.executeQuery();

        // get row data
        while (results.next()) {
            WordBean word = new WordBean();

            word.setGermanName(results.getString(1));
            word.setGender(results.getString(2));
            word.setEnglishName(results.getString(3));

            wordList.add(word);
        }

        return wordList;
    }

    public void addWord(WordBean word) throws SQLException {
        addWord.setString(1, word.getGermanName());
        addWord.setString(2, word.getGender());
        addWord.setString(3, word.getEnglishName());
        addWord.executeUpdate();
    }

    public void removeWord(WordBean word) throws SQLException{
        removeWord.setString(1,word.getGermanName());
        removeWord.executeUpdate();
    }
    public void randomEnglishWord(WordBean word) throws SQLException{
        getRandEnglishWord.setString(1, word.getEnglishName());
        getRandEnglishWord.executeQuery();
    }
    protected void finalize() {
        try {
            getWords.close();
            addWord.close();
            connection.close();
        } catch (SQLException sqlException) {
            sqlException.printStackTrace();
        }
    }
} 
```

这是问题 jsp 页面 q1.jsp 之一的示例：

```
<%-- 
    Document   : q1
    Created on : 06-May-2012, 18:54:24
    Author     : encore
--%>

<!--This JSP acts as the first question in a multiple choice quiz, with the user
asked to submit their answer to the question-->

<?xml version = "1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Big Java Quiz, question 1</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <%if(request.getParameter("choice").equals("N"))
            out.print("<meta http-equiv='refresh' content='0;url=options.jsp'/>");
            //Redirects user back to index if they did not want to take quiz%>
        <form action="q2.jsp" method="POST">
            <b>Question 1.</b> What is the German noun for the English word ______?<br/><br/>
            <input type="radio" name="q1Answer" value="A"/><label for="A">A) Exception generator</label><br/>
            <input type="radio" name="q1Answer" value="B"/><label for="B">B) Exception manipulator</label><br/>
            <input type="radio" name="q1Answer" value="C"/><label for="C">C) Exception handler</label><br/>
            <input type="radio" name="q1Answer" value="D"/><label for="D">D) Exception monitor</label><br/><br/>
            <input type="submit" value="Submit"/>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:10:26.933

假设您将问题提取到列表中：

```
 List<WordBean> wordList = getWordList();
    List<String> answersList = new ArrayList<String>(); 
    Random random = new Random();
    Random forAnswers = new Random();

    WordBean goodOne = wordList.get(random.nextInt(wordList.size()));
    //take it out from the list
    wordList.remove(goodOne);
    //add it to the answers list
    answersList.add(goodOne.getGermanName());
    WordBean fakeOne = wordList.get(random.nextInt(wordList.size()));
    //take it out from the list
    wordList.remove(fakeOne);
    //add it to the answers list
    answersList.add(fakeOne.getGermanName());
    WordBean fakeTwo = wordList.get(random.nextInt(wordList.size()));
    //take it out from the list
    wordList.remove(fakeTwo);
    //add it to the answers list
    answersList.add(fakeTwo.getGermanName());

    %>What is the english word for the german word <%=goodOne.getGermanName()%>

    <%
    char letter = 'A';
    for (String answer:answersList){
    %>
    <input type="radio" name="q1Answer" value=""/><label for="<%=letter%>"><%=letter%>)<%=answerList.get(forAnswers.getNextInt(3))> />
    <%
    //point to the next letter
    letter++;
    } 
```

# php - 使用“AS 分数”从 mysql 全文搜索返回相关分数

> ID：10473269
> 
> 赞同：0
> 
> 时间：2012-05-06T18:55:09.437
> 
> 标签：php, mysql, full-text-search, relevance

我从全文 mysql dbTable 中选择文本，返回的命中按相关性乘以客户端提供的权重排序。查询工作正常，但我想作为查询的“AS 分数”子句将实际加权相关性分数返回给客户端（通过 php）。我尝试在任何地方插入 AS 子句，但没有成功。建议？谢谢你

```
$sql1="SELECT * FROM $dbTable 
WHERE MATCH (data) AGAINST ('".$key_word_1."') 
   OR MATCH (data) AGAINST('".$key_word_2."') 
ORDER BY (MATCH (data) AGAINST('".$key_word_1."') * $weight_1) + (MATCH (data) AGAINST('".$key_word_2."') * $weight_2)  DESC 
LIMIT 200"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:59:40.713

你可以这样做：

```
SELECT * , (MATCH (data) AGAINST('".$key_word_1."') * $weight_1) + (MATCH (data) AGAINST('".$key_word_2."') * $weight_2) AS score
....
ORDER BY score DESC 
```

# java - 从 Web 服务返回 X509Certificate

> ID：10473270
> 
> 赞同：2
> 
> 时间：2012-05-06T18:55:14.553
> 
> 标签：java, web-services, soap, jboss, x509certificate

我有一个在 JBOSS 上运行的 Web 服务。该 Web 服务有一个名为的方法，该方法`public X509Certificate provideCertificate(String name, PublicKey key){ ... }`为客户端提供新证书，以便它们与其他方进行通信。

问题是，我无法收到 PublicKey，因为 JAXB 抱怨它是一个接口，并且我无法返回 X509Certificate，因为它没有空的构造函数（或者 JBOSS 这么说）。

我尝试将这些对象封装在某种 DTO 对象上，但效果不佳。我知道也许这不是这样做的方法，所以任何关于这个主题的灯光都会非常感激。

我的网络服务代码：

```
@javax.jws.WebService
public class CAWebService
{
@javax.jws.WebMethod
public X509Certificate addOperatorPublicKey(PublicKeyReqResDTO req)
{
    PublicKey key = req.getPublicKey();
    String operador = req.getNome();

    X509CertImpl cert = null;
    try
    {
        // used algorithm
        String algorithm = "MD5WithRSA";

        // create certificate for this request
        PrivateKey privateKey = caKeyPair.getPrivate();
        X509CertInfo info = new X509CertInfo();

        // 3600000 = 1 hour maximum duration
        Date from = new Date();
        Date to = new Date(from.getTime() + 3600000L);

        CertificateValidity interval = new CertificateValidity(from, to);
        BigInteger sn = new BigInteger(64, new SecureRandom());
        X500Name owner = new X500Name(operador);

        info.set(X509CertInfo.VALIDITY, interval);
        info.set(X509CertInfo.SERIAL_NUMBER, new CertificateSerialNumber(sn));
        info.set(X509CertInfo.SUBJECT, new CertificateSubjectName(owner));
        info.set(X509CertInfo.ISSUER, new CertificateIssuerName(new X500Name("CA")));
        info.set(X509CertInfo.KEY, new CertificateX509Key(key));
        info.set(X509CertInfo.VERSION, new CertificateVersion(CertificateVersion.V3));
        AlgorithmId algo = new AlgorithmId(AlgorithmId.md5WithRSAEncryption_oid);
        info.set(X509CertInfo.ALGORITHM_ID, new CertificateAlgorithmId(algo));

        // signs the certificate using this web service private key
        cert = new X509CertImpl(info);
        cert.sign(privateKey, algorithm);

        // updates and re-signs
        algo = (AlgorithmId)cert.get(X509CertImpl.SIG_ALG);
        info.set(CertificateAlgorithmId.NAME + "." + CertificateAlgorithmId.ALGORITHM, algo);
        cert = new X509CertImpl(info);
        cert.sign(privateKey, algorithm);
    }
            //catch all the exceptions, its like 10 diffente ones
    catch( .... )
            {
    }

    //is the name already on the valid cert list?
    boolean found = false; int index = 0;
    for(int i = 0; i < validList.size(); i++)
    {
        if(validList.get(i).getSubjectX500Principal().getName().equals(operador))
        {
            found = true; index = i;
            break;
        }
    }

    //the cert was already on the valid list, so we put it on the black list
    if(found)
    {
        blackList.add(validList.get(index));
        validList.remove(index);
        validList.add(cert);
    }
    else
    {
        //didnt find so no need to put on the black list
        validList.add(cert);
    }

    return cert;
} 
```

我也使用 ArrayList 来控制黑色和有效证书列表，因为由于某种原因，X509CRL 不包含 .add() 方法。我也对持久性不感兴趣，我只是希望它在 Web 服务在线时工作，时间是离线我不在乎是否一切都存在。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T05:35:23.367

如果您将 X509Certificate 作为 byte[] 从 Web 服务返回给客户端并在客户端从 byte[] 重新创建 X509Certificate，这将很容易。

可以通过以下方式完成。转换为字节[]：

```
ByteArrayOutputStream bos = new ByteArrayOutputStream(); 
ObjectOutput out = new ObjectOutputStream(bos);   
out.writeObject(certificate);
byte[] data = bos.toByteArray(); 
bos.close(); 
```

从 byte[] 重新创建 X509Certificate：

```
CertificateFactory cf = CertificateFactory.getInstance("X.509");
X509Certificate x509Certificate = (X509Certificate) cf.generateCertificate(new  ByteArrayInputStream(data)); 
```

# java - 网络摄像头 - 检测二维码、拍摄快照和解码

> ID：10473277
> 
> 赞同：6
> 
> 时间：2012-05-06T18:56:15.480
> 
> 标签：java, webcam, qr-code, snapshot

我目前正在尝试编写一个 java 程序来利用内置的笔记本电脑网络摄像头或外部 USB 网络摄像头。这有望与 PC 和 Mac 兼容。

我想知道是否有人知道可以处理这一切的图书馆？我真的不想重新发明轮子，我不知道从哪里开始 1）检测网络摄像头，2）在检测到 QR 码时拍摄快照。

不过，我熟悉 ZXing 用于解码条码图像。

我搜索了高低，我强烈怀疑我要查找的库不存在，但值得一问！

我的第一个问题在这里，所以我希望它很清楚！

编辑：或者，如果不存在，您能否指出我在检测到二维码时如何从网络摄像头拍摄快照的正确方向？:)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T12:25:50.140

[本示例](https://github.com/sarxos/webcam-capture/tree/master/webcam-capture-examples/webcam-capture-qrcode)介绍如何使用[Webcam Capture](https://github.com/sarxos/webcam-capture)库与 ZXing 一起读取 QR 码数据。Webcam Capture 与 32 位和 64 位 Windows、Linux 和 Mac OX 兼容。对于 Linux，它还支持 ARM 架构。

代码非常简单：

```
Webcam webcam = Webcam.getDefault(); // non-default (e.g. USB) webcam can be used too
webcam.open();

Result result = null;
BufferedImage image = null;

if (webcam.isOpen()) {
    if ((image = webcam.getImage()) == null) {
        continue;
    }

    LuminanceSource source = new BufferedImageLuminanceSource(image);
    BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
    try {
        result = new MultiFormatReader().decode(bitmap);
    } catch (NotFoundException e) {
        // fall thru, it means there is no QR code in image
    }
}

if (result != null) {
    System.out.println("QR code data is: " + result.getText());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:17:50.727

您可以使用 gstreamer 与您的相机进行交互。对于 Windows，它可能又是 gstreamer 或 DirectShow。在这两种情况下，您都需要使用一些特殊的过滤器来捕获数据，在 DirectShow 中它将是 SampleGrabber。我认为 gstreamer 应该提供一些类似的插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T21:28:03.793

zxing 有一个到 Actionscript 的端口，这将使它可以通过 Flash 使用，它可以访问网络摄像头。端口有点旧，不是 100% 完成，但应该可以工作。

# c++ - “结构默认具有公共继承”

> ID：10473284
> 
> 赞同：7
> 
> 时间：2012-05-06T18:56:49.783
> 
> 标签：c++, inheritance

“默认情况下结构具有公共继承”这句话的真正含义是什么？为什么下面的代码是错误的，只是因为我在从 c 派生类 d 时省略了关键字“public”？

```
struct c 
{
protected:
    int i;
public:
    c(int ii=0):i(ii){} 
    virtual c *fun();
};

c* c::fun(){
    cout<<"in c";
    return &c();
}

class d : c
{  
public:
    d(){}
    d* fun()
    {
        i = 9;
        cout<<"in d"<<'\t'<<i;
        return &d();
    }
};

int main()
{
    c *cc;
    d dd;
    cc = &dd;
    cc->fun();
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T18:57:29.927

代表着

```
struct c;
struct d : c 
```

相当于

```
struct d : public c 
```

您的代码是`class`扩展 a `struct`：

```
struct c;
class d : c; 
```

相当于

```
class d : private c; 
```

因为`class`默认情况下具有私有继承。

这意味着所有继承的而不是覆盖/重载/隐藏的方法`c`都是私有的`d`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-06T19:04:26.450

“结构默认具有公共继承”意味着这

```
struct Derived : Base {}; 
```

相当于

```
struct Derived : public Base {}; 
```

默认情况下，类具有***私有***继承，因此当您`public`从类继承中删除时，您将拥有相当于

```
class Derived : private Base {}; 
```

在这个私有继承场景中，`Derived`与 没有*is-a*关系`Base`，它本质上是*has-a* `Base`。因此，您在这里尝试尝试的转换：

```
cc = &dd; 
```

不允许。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T19:02:55.273

当您编写 a`struct`并从某物继承而不指定访问说明符时，该继承被视为`public`. 当您编写 a`class`并从某事物继承而不指定访问说明符（即使该事物是 a `struct`）时，该继承被视为私有。在您的代码中，您正在执行后者，因此继承是私有的，因此会出现观察到的错误。

换句话说，说`struct`继承默认是公共的，实际上意味着*在编写*a时完成的继承`struct`默认是公共的，而不是*从*a继承`struct`默认是公共的。

# powershell - 有没有办法在大型机终端窗口中自动执行简单的重复性任务？

> ID：10473285
> 
> 赞同：3
> 
> 时间：2012-05-06T18:56:52.733
> 
> 标签：powershell, vbscript, automation, mainframe, jscript

我的雇主使用 TN3270 Plus 2.07 版大型机模拟器。它是相当旧的版本，不支持一些脚本命令/功能，如等待屏幕刷新、“if”条件和简单的计算指令，如递增等，这些在较新版本中可用。我需要这些功能，所以我不能使用内置脚本。

它不支持 DDE。

我留下了任何选项，如 VBScript、JScript 或 PowerShell（或 Windows 7 Enterprise 中可用的任何其他选项，无需安装 AutoIt 等第三方工具）。

我需要的是，我希望能够从文件中读取一些数据，将其输入到大型机终端，等到我收到大型机的响应（这是非常随机的，有时是瞬时的，但有时可能需要 20 到 30 秒) 即，等待屏幕刷新。然后我想从终端窗口读取文本，根据这些信息，我需要采取一些措施，比如继续从文件循环中读取下一行或做一些其他事情。

有什么办法可以做到这一点？

注意：更改模拟器或安装第 3 方工具不是一种选择；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T02:57:11.707

我自己从未尝试过，但您可能想查看 x3270，特别是[s3270](http://x3270.bgp.nu/s3270-man.html)，可能还有 tcl3270：

[http://sourceforge.net/projects/x3270/](http://sourceforge.net/projects/x3270/)

除非您愿意努力编写自己的 3270 协议实现，否则将需要某种第 3 方工具。问题是时间和许可方面的成本之一（使用上述选项，唯一的成本是时间）。

当然，可能还可以使用您现有的模拟器，但我不熟悉它，而且版本似乎相当旧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:38:44.393

您可以使用诸如 IBM HATS 之类的抓取工具，也可以使用一些 IBM Java TN3270 类与大型机通信。

无论哪种情况，您都可以通过软件建立 TN3270 连接。不要为你的模拟器编写脚本。

如果您可以让大型机软件达到可以在批处理作业级别与其交互的程度——或者您编写一些与之交互的简单 Rexx 命令——您可以使用 ftp 协议提交作业以向大型机发出命令软件。它不会直接与它进行 TN3270 会话，但 Rexx 命令和/或其他自定义编写的程序可以替代该交互。然后，您可以使用简单的 JCL 与大型机软件对话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-30T13:41:12.493

是的。[UiPath](http://www.uipath.com/automate/robotic-process-automation)是一个通用的自动化工具，它有专门的活动来处理[终端和绿屏](http://www.uipath.com/guides/automating-terminals-and-mainframes)。

现在它通过 API 支持：

*   附件
*   火箭蓝区
*   伦巴
*   IBM 个人通信
*   IBM EHLL

适用于 TN3270、TN5250 或 VT 端子类型。

[![在此处输入图像描述](../Images/a30b7368642bb0351441d4c182ed10ea.png)](https://i.stack.imgur.com/CQNsp.png)

# silverlight - ListPicker Windows Phone 7 异常

> ID：10473287
> 
> 赞同：0
> 
> 时间：2012-05-06T18:57:01.527
> 
> 标签：silverlight, windows-phone-7, windows-phone-7.1

我对 ListPicker 组件有疑问。我从以下网址下载了一个示例：[http](http://code.msdn.microsoft.com/Windows-Phone-71-Local-da2fdf80) ://code.msdn.microsoft.com/Windows-Phone-71-Local-da2fdf80 。它是编译的，但是当我想更改页面（包含 ListPicker）时，抛出了异常。

```
System.Windows.Markup.XamlParseException occurred
  Message=Set property 'Microsoft.Phone.Controls.ListPicker.ItemCountThreshold' threw an exception. [Line: 42 Position: 63]
  LineNumber=42
  LinePosition=63
  StackTrace:
       at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
       at PhoneApp.Views.TaskEditView.InitializeComponent()
       at PhoneApp.Views.TaskEditView..ctor()
       at System.Reflection.RuntimeConstructorInfo.InternalInvoke(RuntimeConstructorInfo rtci, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
       at System.Reflection.RuntimeConstructorInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
       at System.Activator.InternalCreateInstance(Type type, Boolean nonPublic, StackCrawlMark& stackMark)
       at System.Activator.CreateInstance(Type type)
       at System.Windows.Navigation.PageResourceContentLoader.BeginLoad_OnUIThread(AsyncCallback userCallback, PageResourceContentLoaderAsyncResult result)
       at System.Windows.Navigation.PageResourceContentLoader.<>c__DisplayClass4.<BeginLoad>b__0(Object args)
       at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
       at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
       at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
       at System.Delegate.DynamicInvokeOne(Object[] args)
       at System.MulticastDelegate.DynamicInvokeImpl(Object[] args)
       at System.Delegate.DynamicInvoke(Object[] args)
       at System.Windows.Threading.DispatcherOperation.Invoke()
       at System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority)
       at System.Windows.Threading.Dispatcher.OnInvoke(Object context)
       at System.Windows.Hosting.CallbackCookie.Invoke(Object[] args)
       at System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args)
       at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult)
  InnerException: System.NotSupportedException
       Message=Cannot set read-only property 'Microsoft.Phone.Controls.ListPicker.ItemCountThreshold'.
       StackTrace:
            at MS.Internal.XamlMemberInfo.SetValue(Object target, Object value)
            at MS.Internal.XamlManagedRuntimeRPInvokes.SetValue(XamlTypeToken inType, XamlQualifiedObject& inObj, XamlPropertyToken inProperty, XamlQualifiedObject& inValue)
            at MS.Internal.XcpImports.Application_LoadComponentNative(IntPtr pContext, IntPtr pComponent, UInt32 cUriStringLength, String uriString, UInt32 cXamlStrLength, Byte* pXamlStr, UInt32 cAssemblyStrLength, String assemblyStr)
            at MS.Internal.XcpImports.Application_LoadComponent(IManagedPeerBase componentAsDO, String resourceLocator, UnmanagedMemoryStream stream, UInt32 numBytesToRead, String assemblyString)
            at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
            at PhoneApp.Views.TaskEditView.InitializeComponent()
            at PhoneApp.Views.TaskEditView..ctor()
            at System.Reflection.RuntimeConstructorInfo.InternalInvoke(RuntimeConstructorInfo rtci, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
            at System.Reflection.RuntimeConstructorInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
            at System.Activator.InternalCreateInstance(Type type, Boolean nonPublic, StackCrawlMark& stackMark)
            at System.Activator.CreateInstance(Type type)
            at System.Windows.Navigation.PageResourceContentLoader.BeginLoad_OnUIThread(AsyncCallback userCallback, PageResourceContentLoaderAsyncResult result)
            at System.Windows.Navigation.PageResourceContentLoader.<>c__DisplayClass4.<BeginLoad>b__0(Object args)
            at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
            at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
            at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
            at System.Delegate.DynamicInvokeOne(Object[] args)
            at System.MulticastDelegate.DynamicInvokeImpl(Object[] args)
            at System.Delegate.DynamicInvoke(Object[] args)
            at System.Windows.Threading.DispatcherOperation.Invoke()
            at System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority)
            at System.Windows.Threading.Dispatcher.OnInvoke(Object context)
            at System.Windows.Hosting.CallbackCookie.Invoke(Object[] args)
            at System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args)
            at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult) 
```

这是我的 XAML 页面：

```
<local:EntityEditPage 
    x:Class="PhoneApp.Views.TaskEditView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    xmlns:local="clr-namespace:PhoneApp.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    mc:Ignorable="d" d:DesignHeight="696" d:DesignWidth="480"
    shell:SystemTray.IsVisible="True">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
            <TextBlock x:Name="PageTitle" Text="edit task" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
        </StackPanel>

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <ScrollViewer>
                <StackPanel>

                    <!-- title -->
                    <TextBlock Text="Title" Style="{StaticResource DefaultLabelStyle}"  />
                    <TextBox Text="{Binding Path=Title, Mode=TwoWay}" TextWrapping="Wrap" Style="{StaticResource FormTextBox}" />

                    <!-- project -->
                    <TextBlock Text="Project" Style="{StaticResource DefaultLabelStyle}"/>
                    <toolkit:ListPicker x:Name="listProjects" Style="{StaticResource FormListPicker}">
                        <toolkit:ListPicker.FullModeItemTemplate>
                            <DataTemplate>
                                <Grid Background="Transparent" Margin="12">
                                    <TextBlock Text="{Binding Name}" TextWrapping="Wrap" Style="{StaticResource PhoneTextLargeStyle}" />
                                </Grid>                                
                            </DataTemplate>
                        </toolkit:ListPicker.FullModeItemTemplate>
                        <toolkit:ListPicker.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <TextBlock Text="{Binding Name}" TextWrapping="Wrap" />
                                </Grid>
                            </DataTemplate>
                        </toolkit:ListPicker.ItemTemplate>
                    </toolkit:ListPicker>                    

                    <!-- date -->                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock VerticalAlignment="Center" Text="Date" Style="{StaticResource DefaultLabelStyle}" />
                            <toolkit:DatePicker x:Name="datePicker" Style="{StaticResource FormDatePicker}" />
                        </StackPanel>
                        <StackPanel Grid.Column="1">
                            <TextBlock VerticalAlignment="Center" Text="Time" Style="{StaticResource DefaultLabelStyle}" />
                            <toolkit:TimePicker x:Name="timePicker" />
                        </StackPanel>
                    </Grid>

                    <!-- status -->
                    <TextBlock Text="Status" Style="{StaticResource DefaultLabelStyle}"/>
                    <toolkit:ListPicker x:Name="listStatus" ListPickerMode="Normal" SelectedItem="{Binding Status, Mode=TwoWay}">
                        <toolkit:ListPicker.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}"/>
                            </DataTemplate>
                        </toolkit:ListPicker.ItemTemplate>
                    </toolkit:ListPicker>

                    <!-- description -->
                    <TextBlock Text="Description" Style="{StaticResource DefaultLabelStyle}"  />
                    <TextBox Text="{Binding Path=Description, Mode=TwoWay}" Height="285" TextWrapping="Wrap" AcceptsReturn="True" Style="{StaticResource FormTextBox}" />

                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Grid>

    <!--Sample code showing usage of ApplicationBar-->
    <phone:PhoneApplicationPage.ApplicationBar>
        <shell:ApplicationBar>            
            <shell:ApplicationBarIconButton IconUri="/icons/appbar.check.rest.png" Text="button" Click="OnOK"/>
            <shell:ApplicationBarIconButton IconUri="/icons/appbar.cancel.rest.png" Text="button" Click="OnCancel"/>
       </shell:ApplicationBar>
    </phone:PhoneApplicationPage.ApplicationBar>

</local:EntityEditPage> 
```

# c# - 未突出显示时看起来扭曲的 Ico

> ID：10473299
> 
> 赞同：1
> 
> 时间：2012-05-06T18:58:09.467
> 
> 标签：c#, ico

我创建了一个有多种尺寸的 Ico，其中有 48 x 48。我注意到，当图标未突出显示时，它看起来很混乱，与我设计的完全不同，但是当我突出显示它时，它看起来不错，而且效果如何我设计的。这是一张图片来说明我的意思：

![在此处输入图像描述](../Images/cee84097e015f1cdfd7493fef2ac0373.png)

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:07:50.450

图标没问题，在两种情况下都是一样的。

问题是边界在清晰的背景下被平滑，因此靠近边界的像素更亮。当您有浅色背景时，这种效果几乎不会被察觉（但训练有素的眼睛仍然可以察觉到）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:00:07.270

你的 ICO 有 alpha 通道吗？也就是说，它是否使用每个像素的渐变透明度？

如果你想让它在明亮和黑暗的背景下看起来都很好，它要么必须设计成硬边，要么在边缘使用 alpha 混合，这样看起来不错。

如果看起来您在边缘看到一些浅色或深色噪点，那么您可能需要制作一个支持 alpha 的版本。这有时称为 ARGB（alpha/red/green/blue）或 RGBA。

# data-structures - 仅具有恒定额外空间的迭代线程二叉树遍历

> ID：10473307
> 
> 赞同：0
> 
> 时间：2012-05-06T18:59:07.583
> 
> 标签：data-structures, binary-tree, tree-traversal, non-recursive

如何在不使用堆栈的情况下在*O(n)*中非递归地遍历*线程二叉树*（只允许为临时变量使用恒定的额外空间，因此我们不能将访问标志添加到树中的每个节点）。我花了很多时间思考它，但在我看来它似乎不可行*，除非*我们要遍历具有树数据的内存位置。假设我们正在使用多个数组表示来实现指针，那么我们可以在 O(n) 中遍历树，有没有人有其他想法？

 ****注意**这**不是**作业，只是为了节省一些键盘敲击的能量来写关于*作业*的评论！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T20:31:00.450

假设我们在 C 中有以下线程树表示：

```
typedef struct threaded_binary_tree {
    int value;

    // Flag that tells whether right points to a right child or to a next
    // node in inorder.
    bool right_is_child;

    struct threaded_binary_tree *left, *right;
} threaded_binary_tree; 
```

然后，在`O(1)`内存中遍历它可能看起来像这样：

```
void inorder(threaded_binary_tree *node)
{
    threaded_binary_tree *prev = NULL;

    // Ignore empty trees
    if (node == NULL)
        return;

    // First, go to the leftmost leaf of the tree
    while (node->left != NULL)
        node = node->left;

    while (node != NULL) {
        // Nodes are visited along going upward in the tree
        printf("%d\n", node->value);

        prev = node;
        node = node->right;

        if (prev->right_is_child) {
            // We're descending into tree

            if (node != NULL) {
                // Again, go to the leftmost leaf in this subtree
                while (node->left != NULL)
                    node = node->left;
            }
        }
        // else, we're climbing up in the tree
    }
} 
```

警告：我还没有运行此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T03:41:59.193

这是用Java编写的代码：

```
public void inOrder() {
    Node<T> curr = root;
    boolean visited = false; //I haven't come across the node from which I came

    while (curr != null) {
        if (!visited && curr.left != null) { //Go to leftmost node
            curr = curr.left;
        } else {
            System.out.println(curr.head + " ");
            if (curr.right != null) { //I prioritize having childs than "threaded sons"
                curr = curr.right;
                visited = false;
            } else {
                curr = curr.rightThreaded;
                visited = true; //Means that I will come back to a node I've already looped, but now i'll print it, except if i'm at the last node
            }
        }
    }
} 
```

Node 是 ThreadedBinaryTree 的内部类：

```
private static class Node<T> {
    private T head;
    private Node<T> left;
    private Node<T> right;
    private Node<T> leftThreaded;
    private Node<T> rightThreaded;

    public Node(T head, Node<T> leftThreaded, Node<T> rightThreaded) {
        this.head = head;
        this.leftThreaded = leftThreaded;
        this.rightThreaded = rightThreaded;
    }
} 
```**

# jquery - 如何从列表中随机选择一个项目以显示相应的列表onload？

> ID：10473308
> 
> 赞同：0
> 
> 时间：2012-05-06T18:59:21.893
> 
> 标签：jquery

我正在尝试为投资组合网站创建一个菜单。它将由“中等”、“主题”和“项目”三列组成。将鼠标悬停在每个项目上时都会有一个预览图像。

你可以在 "rintintin.colorado.edu/~djigania" 上看到我目前的成果

这是页面的外观，但每次刷新或返回主页都会随机显示不同的项目。

这是我想象会发生的一系列事件。请让我知道是否有更好的方法来解决这个问题。1\. Onload 从“中等”列表中选择一个随机项目 2\. 自动单击此随机选择并显示“主题”列中的相应列表。3\. 从这个新列表中选择了另一个随机项目 4\. 这显示了“项目”列中的另一个列表 5\. 来自“项目”列的一个随机项目显示了上面的预览图像。

这是我正在使用的脚本的简化版本。 [http://jsfiddle.net/uRd6N/19/](http://jsfiddle.net/uRd6N/19/)

任何帮助将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:02:54.307

你的过程听起来不错。你试过了吗？

# clr - P/Invoke 期间 CLR 如何匹配导出的名称？

> ID：10473310
> 
> 赞同：2
> 
> 时间：2012-05-06T18:59:29.907
> 
> 标签：clr, pinvoke

我从事的项目需要 .Net 与非托管代码的互操作性。几周前我开始使用 .Net，虽然我在 C/C++ 方面有很多经验，但我很惊讶 CLR 如何处理 P/Invoke。这是详细信息。我的同事写了这个函数

```
__declspec(dllexport) int __stdcall ReadIPWSensor(unsigned int deviceClassId, void *buffer) {...} 
```

我不得不从 C# 模块中调用它。我将函数导入为

```
[DllImport("ipw", CallingConvention = CallingConvention.StdCall)]
extern static int ReadIPWSensor(uint deviceClassId, IntPtr buffer); 
```

只是为了找出异常（System.EntryPointNotFoundException，无法在 DLL 'ipw' 中找到名为 'ReadIPWSensor' 的入口点）。我使用了 DependencyWalker 工具，发现该函数导出为 ?ReadIPWSensor@@YGHIPAX@Z （我的同事忘记将其导出到 DEF 文件中）。只是为了快速测试（非托管 DLL 编译速度非常慢），我将导入定义更改为：

```
[DllImport("ipw", EntryPoint = "#22", CallingConvention = CallingConvention.StdCall)]
extern static int ReadIPWSensor(uint deviceClassId, IntPtr buffer); 
```

因为序数是 22。使用新的导入定义成功通过了测试。

我的第一个问题是：处理损坏的函数导出时有哪些好的做法？使用导出序号是一个好习惯吗？

就我而言，我可以访问 C++ 源代码和 DEF 文件，因此我添加了导出并将导入定义改回

```
[DllImport("ipw", CallingConvention = CallingConvention.StdCall)]
extern static int ReadIPWSensor(uint deviceClassId, IntPtr buffer); 
```

我知道我们已经在项目中使用了另一个函数，并且想将我的代码与现有代码进行比较。函数定义为

> extern "C" __declspec(dllexport) int __stdcall LoadIPWData(void *buffer)

并导入为

```
[DllImport("ipw", CallingConvention = CallingConvention.StdCall)]
extern static int LoadIPWData(IntPtr buffer); 
```

令我惊讶的是，DependencyWalker 工具显示该函数导出为 _LoadIPWData@4（我的同事忘记再次将其导出到 DEF 文件中）。但是，使用此函数没有 System.EntryPointNotFoundException 错误。显然，CLR 以某种方式设法解析了正确的名称。似乎有某种回退机制允许 CLR 找到正确的函数。我可以很容易地想象它对参数的大小求和并正在寻找“function_name@the_sum_of_all_parameter_sizes”，尽管它看起来很简单。

我的第二个问题是：CLR 在 P/Invoke 期间如何匹配导出的函数名称？

在这种情况下，我认为 CLR 非常聪明，以至于它实际上隐藏了一个错误 - LoadIPWData 函数应该可以通过其名称从其他非托管模块访问。也许我有点偏执，但我更喜欢了解 CLR 的实际工作原理。不幸的是，我在该主题上的所有谷歌搜索都没有结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:35:13.167

pinvoke marshaller 内置了一些常见的 DLL 导出命名方案的知识。它知道 __cdecl 函数通常有一个前导下划线，并且 32 位模式下的 __stdcall 通常用一个前导下划线和一个尾随 @x 修饰，其中 x 是在堆栈上传递的参数的大小（以字节为单位）。它还知道 winapi 函数在导出时带有额外的 A 或 W，这是一种命名方案，用于区分接受字符串的函数，并且有 ansi 和 Unicode 版本。对应的 [DllImport] 属性是 CharSet。它只是尝试所有这些，直到找到匹配项。

它对 C++ 编译器名称修饰规则（又名 mangling）一无所知，所以这就是为什么您必须使用`extern "C"`手动来抑制它。

# php - 将 cURL 响应编码为 UTF-8 时的奇怪行为

> ID：10473317
> 
> 赞同：1
> 
> 时间：2012-05-06T19:00:36.933
> 
> 标签：php, utf-8, character-encoding

我正在向第三方网站发出 cURL 请求，该网站返回一个文本文件，我需要在该文件上进行一些字符串替换，以将某些字符替换为它们的 html 实体等效项，例如我需要替换`í`为`&iacute;`.

直接在响应上使用`string_replace/preg_replace_callback`不会导致匹配（无论是`í`直接搜索还是使用其十六进制代码`\x00\xED`），所以我`utf8_encode()`在执行替换之前使用了。但将所有字符`utf8_encode`替换为.`í``Ã`

为什么会发生这种情况，使用 php 对任意一段文本执行 UTF-8 替换的正确方法是什么？

*编辑 - 一些进一步的研究表明

```
utf8_decode("í") == í;
utf8_encode("í") == ÃƒÂ­;
utf8_encode("\xc3\xad") ==  ÃƒÂ­; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:44:47.987

您可能通过 php 源代码中的字符串文字指定了要替换的字符/字符串？如果你这样做了，那么这些字符串文字的值取决于你保存 php 文件的编码。所以当你看到字符 í 时，也许文字值是拉丁编码的 í，比如 8859-1 编码，或者它的windows cp1252 í，或者它的 utf8 í，甚至 utf32 í ...我不知道其中有多少是不同的，但我知道至少有些有不同的字节表示，因此在 php 字符串比较中不会匹配.

我的意思是，您需要指定与传入文本的任何编码相匹配的正确字符。

这是一个不使用文字的例子

```
$iso8859_1 = chr(236);
$utf8 = utf8_encode(chr(236)); 
```

请注意，如果您决定将文件编码更改为 utf8，则在您更改编码时，文本编辑器可能会或可能不会转换现有字符。我见过编辑在更改编码时做了非常奇怪的事情。从一个新文件开始。

也 - 仅仅因为其他服务器声称它的 utf8，并不意味着它真的是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T19:51:22.840

utf8_encode 绝对不是这里的方式（如果你这样做，你就是双重编码）。

回覆。直接搜索字符或使用其十六进制代码，您是否确保在正则表达式的末尾添加 u 修饰符？例如`/\x00\xED/u`？

# image - 在matlab中绘制多个纯色方块

> ID：10473323
> 
> 赞同：1
> 
> 时间：2012-05-06T19:01:23.130
> 
> 标签：image, matlab

如何从包含 RGB 值的 3 * 2 矩阵在 matlab 中形成包含两个正方形的图像？例如：![显示这样的东西](../Images/02c59bf5089359c199841cd57b089c2a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:39:26.190

```
RGB = [255 0; 0 255; 0 0]; % red and green
rectSize = 50;

imshow([repmat(reshape(RGB(:,1),[1 1 3]),[rectSize rectSize]) repmat(reshape(RGB(:,2),[1 1  3]),[rectSize rectSize])]); 
```

![在此处输入图像描述](../Images/97af8ed539d7b71d2b469702233f91b1.png)

# java - 使用字节掩码防止符号扩展

> ID：10473324
> 
> 赞同：4
> 
> 时间：2012-05-06T19:01:24.283
> 
> 标签：java, networking, bytearray, endianness

我一直在阅读《Java 中的 TCP/IP 套接字，第 2 版》一书。我希望能更清楚地了解某些事情，但由于这本书的网站没有论坛或任何东西，我想我会在这里问。在几个地方，本书使用字节掩码来避免符号扩展。这是一个例子：

```
private final static int BYTEMASK = 0xFF; //8 bits

public static long decodeIntBigEndian(byte[] val, int offset, int size) {
    long rtn = 0;
    for(int i = 0; i < size; i++) {
        rtn = (rtn << Byte.SIZE) | ((long) val[offset + i] & BYTEMASK);
    }
    return rtn;
} 
```

所以这是我对发生了什么的猜测。让我知道我是否正确。 `BYTEMASK`在二进制应该看起来像`00000000 00000000 00000000 11111111`. 为了简单起见，假设`val`字节数组只包含 1 个短字节，因此偏移量为 0。所以让我们将字节数组设置为`val[0] = 11111111`, `val[1] = 00001111`。在`i = 0`,`rtn`都是 0，所以`rtn << Byte.SIZE`保持值不变。然后`(long)val[0]`由于符号扩展，它变成了 8 个字节，全为 1。但是当您使用 时`& BYTEMASK`，它会将所有额外的 1 设置为 0，将最后一个字节全部保留为 1。然后你会得到`rtn | val[0]`它基本上会翻转 . 的最后一个字节中的任何 1 `rtn`。对于`i = 1`,`(rtn << Byte.SIZE)`将最不重要的字节推到上面，并将所有 0 留在原处。然后`(long)val[1]`用全零加长`00001111`对于我们想要的最低有效字节。所以使用`& BYTEMASK`不会改变它。然后在使用时，它将' 的最低有效字节`rtn | val[1]`翻转为全 1。`rtn`最终返回值为 now `rtn = 00000000 00000000 00000000 00000000 00000000 00000000 11111111 11111111`。所以，我希望这不会太长，这是可以理解的。我只是想知道我的思考方式是否正确，而不仅仅是完全不合逻辑。另外，让我感到困惑的一件事是`BYTEMASK`is `0xFF`。在二进制中，这将是`11111111 11111111`，所以如果它被隐式转换为 int，它实际上不是`11111111 11111111 11111111 11111111`由于符号扩展吗？如果是这样的话，那么对我来说如何工作就没有意义了`BYTEMASK`。感谢您的阅读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T19:07:35.783

一切都是对的，除了最后一点：

`0xFF`已经是`int`( `0x000000FF`)，因此不会进行符号扩展。一般来说，Java 中的[整数字面量](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)是 s，除非它们以or`int`结尾，然后它们就是s。`L``l``long`

# javascript - 如何使用 Javascript 在 SVG 中绘制不可缩放的圆

> ID：10473328
> 
> 赞同：10
> 
> 时间：2012-05-06T19:02:08.750
> 
> 标签：javascript, svg

我正在开发一个地图，在 Javascript 中使用 SVG 来绘制线条。

我想添加一个功能，您可以在其中搜索道路，如果找到道路，地图上会出现一个圆圈。

我知道我可以在 SVG 中画一个圆圈，但我的问题是，圆圈的大小不应该根据缩放级别而改变。换句话说，圆必须始终具有相同的大小。我地图上的道路有这个功能，我所要做的就是添加

```
vector-effect="non-scaling-stroke" 
```

到线属性..

一条线看起来像这样。

```
<line vector-effect="non-scaling-stroke" stroke-width="3" id = 'line1' x1 = '0' y1 = '0' x2 = '0' y2 = '0' style = 'stroke:rgb(255,215,0);'/> 
```

圆圈看起来像这样。

```
<circle id = "pointCircle" cx="0" cy="0" r="10" stroke="red" stroke-width="1" fill = "red"/> 
```

是否可以以某种方式将圆圈定义为“非缩放”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T05:02:08.393

我花了一段时间，但我终于把数学弄清了。这个解决方案需要三件事：

1.  在您的页面中包含[此脚本](http://phrogz.net/svg/libraries/SVGPanUnscale.js)（连同 SVGPan.js 脚本），例如
    `<script xlink:href="SVGPanUnscale.js"></script>`
2.  确定您不想缩放的项目（例如，将它们放在具有特殊类或 ID 的组中，或将特定类放在每个元素上），然后告诉脚本如何找到这些项目，例如
    `unscaleEach("g.non-scaling > *, circle.non-scaling");`
3.  **用于`transform="translate(…,…)"`将每个元素放置在图表上，*而不是* `cx="…" cy="…"`.**

仅通过这些步骤，使用 SVGPan 进行缩放和平移不会影响标记元素的缩放（或旋转或倾斜）。

## 演示： http: [//phrogz.net/svg/scale-independent-elements.svg](http://phrogz.net/svg/scale-independent-elements.svg)

## 图书馆

```
// Copyright 2012 © Gavin Kistner, !@phrogz.net
// License: http://phrogz.net/JS/_ReuseLicense.txt

// Undo the scaling to selected elements inside an SVGPan viewport
function unscaleEach(selector){
  if (!selector) selector = "g.non-scaling > *";
  window.addEventListener('mousewheel',     unzoom, false);
  window.addEventListener('DOMMouseScroll', unzoom, false);
  function unzoom(evt){
    // getRoot is a global function exposed by SVGPan
    var r = getRoot(evt.target.ownerDocument);
    [].forEach.call(r.querySelectorAll(selector), unscale);
  }
}

// Counteract all transforms applied above an element.
// Apply a translation to the element to have it remain at a local position
function unscale(el){
  var svg = el.ownerSVGElement;
  var xf = el.scaleIndependentXForm;
  if (!xf){
    // Keep a single transform matrix in the stack for fighting transformations
    // Be sure to apply this transform after existing transforms (translate)
    xf = el.scaleIndependentXForm = svg.createSVGTransform();
    el.transform.baseVal.appendItem(xf);
  }
  var m = svg.getTransformToElement(el.parentNode);
  m.e = m.f = 0; // Ignore (preserve) any translations done up to this point
  xf.setMatrix(m);
} 
```

## 演示代码

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>Scale-Independent Elements</title>
  <style>
    polyline { fill:none; stroke:#000; vector-effect:non-scaling-stroke; }
    circle, polygon { fill:#ff9; stroke:#f00; opacity:0.5 }
  </style>
  <g id="viewport" transform="translate(500,300)">
    <polyline points="-100,-50 50,75 100,50" />
    <g class="non-scaling">
      <circle  transform="translate(-100,-50)" r="10" />
      <polygon transform="translate(100,50)" points="0,-10 10,0 0,10 -10,0" />
    </g>
    <circle class="non-scaling" transform="translate(50,75)" r="10" />
  </g>
  <script xlink:href="SVGPan.js"></script>
  <script xlink:href="SVGPanUnscale.js"></script>
  <script>
    unscaleEach("g.non-scaling > *, circle.non-scaling");
  </script>
</svg> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T08:07:35.043

如果您正在寻找一种完全静态的方式来执行此操作，则可以将非缩放笔画与标记结合起来来实现这一点，因为标记可以相对于笔画宽度。

换句话说，您可以将圆圈包裹在 <marker> 元素中，然后在需要它们的地方使用这些标记。

```
<svg width="500" height="500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
    <marker id="Triangle"
      viewBox="0 0 10 10" refX="0" refY="5" 
      markerUnits="strokeWidth"
      markerWidth="4" markerHeight="3"
      orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" />
    </marker>
        <path d="M 100 100 l 200 0" vector-effect="non-scaling-stroke"
        fill="none" stroke="black" stroke-width="10" 
        marker-end="url(#Triangle)"  />
        <path d="M 100 200 l 200 0" 
        fill="none" stroke="black" stroke-width="10" 
        marker-end="url(#Triangle)"  />
</svg> 
```

同样也可以[在这里](http://jsfiddle.net/vScAX/)查看和调整。svg 规范并没有完全明确说明在这种情况下应该发生什么（因为标记不在 SVG Tiny 1.2 中，矢量效果不在 SVG 1.1 中）。我目前的想法是它可能会影响标记的大小，但目前似乎没有观众这样做（尝试在支持矢量效果的查看器中，例如 Opera 或 Chrome）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-27T23:12:23.063

看起来在 webkit 中完成了一些工作（可能与这个错误有关：[320635](https://code.google.com/p/chromium/issues/detail?id=320635)）并且当像这样简单地附加时，新的转换不会留下来

```
transform.baseVal.appendItem 
```

这似乎效果更好。甚至可以在 IE 10 中使用。

编辑：修复了前面多个翻译转换和后面可能的其他转换的更一般情况的代码。但是，所有转换后的第一个矩阵转换必须保留用于未缩放。

`translate(1718.07 839.711) translate(0 0) matrix(0.287175 0 0 0.287175 0 0) rotate(45 100 100)`

```
function unscale()
{
    var xf = this.ownerSVGElement.createSVGTransform();
    var m = this.ownerSVGElement.getTransformToElement(this.parentNode);
    m.e = m.f = 0; // Ignore (preserve) any translations done up to this point
    xf.setMatrix(m);

    // Keep a single transform matrix in the stack for fighting transformations
    // Be sure to apply this transform after existing transforms (translate)
    var SVG_TRANSFORM_MATRIX = 1;
    var SVG_TRANSFORM_TRANSLATE = 2;
    var baseVal = this.transform.baseVal;
    if(baseVal.numberOfItems == 0)
        baseVal.appendItem(xf);
    else
    {
        for(var i = 0; i < baseVal.numberOfItems; ++i)
        {
            if(baseVal.getItem(i).type == SVG_TRANSFORM_TRANSLATE && i == baseVal.numberOfItems - 1)
        {
                baseVal.appendItem(xf);
            }

            if(baseVal.getItem(i).type != SVG_TRANSFORM_TRANSLATE)
            {
                if(baseVal.getItem(i).type == SVG_TRANSFORM_MATRIX)
                    baseVal.replaceItem(xf, i);
                else
                    baseVal.insertItemBefore(xf, i);
                break;
            }
        }
    }
} 
```

EDIT2：Chrome 出于某种原因杀死了 getTransformToElement，因此需要手动检索矩阵：

```
var m = this.parentNode.getScreenCTM().inverse().multiply(this.ownerSVGElement.getScreenCTM()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-14T19:25:16.103

[在这里](https://www.w3.org/Graphics/SVG/WG/track/issues/2448)和[这里](https://github.com/w3c/svgwg/issues/323#issuecomment-613627346)讨论过

看起来当前的浏览器没有做预期的事情，所以需要对`<marker>`. `transorm: scaleX(5)`在等的用户上，需要`<marker>`在`transform: translate(...) scaleX(0.2)`里面加上一个，如果需要的话，还考虑到模式内可能`<pattern>`的////`x`值`y``width``height``transform-origin`

# magento - Magento CE 1.6.2 - 如何使客户属性只读？

> ID：10473331
> 
> 赞同：5
> 
> 时间：2012-05-06T19:02:26.490
> 
> 标签：magento

我已经成功添加了一个新的客户属性（帐号），但我需要在后端将此字段设置为只读（它是从 ERP 软件填充的，需要通过 Magento 管理面板可见但不可编辑）。

我使用了带有 lockAttribute 方法的观察者在管理面板中将目录属性（类别/产品）设为只读，但似乎没有针对客户属性的相应方法。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-31T13:02:36.307

您可以将*frontend_input*属性设置为`label`

所以它在客户编辑表单中是只读的。

# php - 将参数传递给重写的 url

> ID：10473332
> 
> 赞同：0
> 
> 时间：2012-05-06T19:02:29.667
> 
> 标签：php, mod-rewrite, url-rewriting

我的项目有关于不同网站的数据，所以我使用 .htaccess 重写了 url，这样当有人将包含点 (.) 的名称传递给我的网站时，它会显示 site.php 页面。这是我的代码：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9\_\-]+(\.)[a-zA-Z0-9\_\.\-]+)/?$ site.php?url=$1
RewriteRule contact$ contact.php 
```

这会将站点名称作为参数发送到 site.php。现在我希望再传递一个参数，就像它通常可以传递的一样，例如。我希望该站点获得实时更新的数据，我想通过`?update=true`它来更新来自互联网的数据，而不是从数据库中获取它。但是像这样传递参数

```
http://www.mysite.com/anysite.com?update=true 
```

不起作用，如何将其他参数传递给我现有的重​​写 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:05:06.997

`[QSA]`标志（“*查询字符串附加*”）会将任何接收到的查询字符串附加到重写的 URL 上。我还添加了该`[L]`标志作为最佳实践，以防止与您的第一个规则匹配，并且稍后在您的链中匹配一个附加规则（如果添加了一个规则）。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9\_\-]+(\.)[a-zA-Z0-9\_\.\-]+)/?$ site.php?url=$1 [QSA,L]
RewriteRule contact$ contact.php [QSA,L] 
```

但是，如果我误解了这个问题并且您不需要浏览器发送`update=true`，而只是想在所有请求上强制它，只需将其添加到重写规则中：

```
RewriteRule ^([a-zA-Z0-9\_\-]+(\.)[a-zA-Z0-9\_\.\-]+)/?$ site.php?update=true&url=$1 [QSA,L] 
```

# windows - 调用堆栈问题

> ID：10473334
> 
> 赞同：2
> 
> 时间：2012-05-06T19:02:47.550
> 
> 标签：windows, x86, callstack

我最近一直在阅读调用堆栈。然而，我一直在阅读的所有示例和文章都是单线程的。我对调用堆栈在内存中的样子以及我们如何分析它很感兴趣。

很抱歉在一篇文章中包含这么多问题。但是，当每个问题都相关时，为每个问题创建一个帖子似乎很麻烦。

我的问题是针对 Windows x86 的。所以我遇到困难的问题是：

1.  进程中的每个线程是否总是有一个调用堆栈？即，线程不共享调用堆栈？

2.  每个调用堆栈的大小是否固定？或者每个线程可以不同吗？

3.  让我们假设我们自己做所有事情并用汇编编写我们的程序。调用栈是不是神奇地给了我们？还是我们必须自己实施？

4.  如果我们在汇编中编写程序，我们是否会保留一些内存并将调用堆栈内存起始地址设置为 ESP 以进行设置？

-迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:15:23.593

1）每个线程都有自己的堆栈 - 几乎按照定义。

2) 最大堆栈大小是一个进程限制，在标题中指定。初始线程堆栈大小是线程创建参数 - 请参阅 CreateThread() API。

3）操作系统管理所有内存。新线程的堆栈由内核在线程创建时动态分配，堆栈顶部填充有堆栈帧，除其他外，允许线程通过以类似于中断的方式弹出帧来开始执行 -返回。不要试图在家里这样做。

4）不！导入并调用 CreateThread() API。

# c# - Facebook C# SDK Windows 应用程序

> ID：10473339
> 
> 赞同：0
> 
> 时间：2012-05-06T19:03:09.757
> 
> 标签：c#, facebook

有没有人有一个示例应用程序，它可以显示如何验证用户并获取他的访问令牌的方式，以便可以使用其他功能。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:25:33.693

本指南应该对您有所帮助：http: [//multitiered.wordpress.com/2010/08/05/getting-started-with-the-facebook-c-sharp-sdk/](http://multitiered.wordpress.com/2010/08/05/getting-started-with-the-facebook-c-sharp-sdk/)

**更新**：
好吧，该指南似乎指的是已折旧的 SDK。我建议您下载[DotNetOpenAuth](http://www.dotnetopenauth.net/)，它也有[Facebook 的示例](https://stackoverflow.com/a/5259556/337294)。

# jquery - 如何从回发中检索变量并在 JsonQuery 中使用它

> ID：10473341
> 
> 赞同：0
> 
> 时间：2012-05-06T19:03:22.863
> 
> 标签：jquery, asp.net

我想知道我应该如何编写将按钮名称发送到其他页面的代码，并使用此值制作另一个 jquery？...

我认为第一步是正确的....我已将 linkBut​​ton 属性设置为

```
linkButt.Postback = "./page2.aspx";
linkButt.CommandName = "carMakeName"; 
```

并且比单击链接按钮时，我尝试在 page2.aspx 的页面加载中检索变量，编写以下代码：

```
protected void Page_Load(object sender, EventArgs e)
        {
           string carMakeName= Request.Form.Get("carMakeName");
        } 
```

我不确定哪个是正确的方法....我希望有人可以帮助我。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:10:15.397

您可以使用`PreviousPage`属性来获取上一页的控件，就像跨页面回发一样。在你的试试这个`page2.aspx Page_Load`：

```
if (Page.PreviousPage != null)
{
    LinkButton lnkBtn = 
        (LinkButton)Page.PreviousPage.FindControl("LinkButton1");
    if (lnkBtn != null)
    {
        string carMakeName = lnkBtn.Text;
    }
} 
```

# css - 文章：nth- child(3) > p:nth-child(2n-1)

> ID：10473345
> 
> 赞同：0
> 
> 时间：2012-05-06T19:04:06.693
> 
> 标签：css

有人可以解释一下这是做什么的吗？因为我不再得到确切的线索了。

```
article:nth-child(3) > p:nth-child(2n-1) 
```

希望有人能说好不好。

让我认识人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:09:24.053

它看起来像一个 CSS 选择器，它选择奇数 p 标签（第 1、3、...），这些标签是文章标签的直接子标签，文章标签是任何父元素的第 3 个子元素。

编辑：这是一个 JSFiddle，它证实了我上面所说的： [JSFiddle](http://jsfiddle.net/HLtRD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:09:45.810

作为文章标签的奇数子元素的任何 p 标签，它是其父元素的第三个子元素。[doc-nth child](http://www.w3.org/TR/selectors/#nth-child-pseudo) [child-combinators](http://www.w3.org/TR/selectors/#child-combinators)

# asp.net - asp.net 中的下拉列表

> ID：10473349
> 
> 赞同：1
> 
> 时间：2012-05-06T19:04:52.230
> 
> 标签：asp.net, asp.net-mvc-3, drop-down-menu

我有一个看法。在视图中我有几个月的字段（数据库中的 nvarchar 类型）：

```
 @Html.DropDownListFor(model => model.rent_month,               
         (IEnumerable<SelectListItem>)ViewBag.months) 
```

我在模型类（PostManager）中有一个方法来生成月份列表，例如：

```
 public IEnumerable<SelectListItem> GetMyMonthList()
         {
           return CultureInfo.CurrentCulture.DateTimeFormat.MonthNames
            .Select(m => new SelectListItem() { Text = m, Value = m });
         } 
```

我有几个月的时间采取行动：

```
 public ActionResult Create()
    {
       PostModel p = new PostModel();

     ViewBag.months = pm.GetMyMonthList();
       return View(p);
     } 
```

在我的模型中，我的月份属性：

```
 [Required(ErrorMessage = "You Must Select a Month.")]
    [Display(Name = "Select Rent Month")]
    public string rent_month { get; set; } 
```

在发布动作中：

```
 public ActionResult Create(PostModel p)
       {
         if (ModelState.IsValid)
            {
             post post = new Models.DB.post();
                 post.rent_month = p.rent_month;  
               db.posts.AddObject(post);
                    db.SaveChanges();
            }
        } 
```

它在下拉列表中正确生成月份。但是在提交表单后它给出了错误：

**具有键“rent_month”的 ViewData 项的类型为“System.String”，但必须为“IEnumerable”类型**

现在这个错误的解决方案是什么......提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:56:17.153

我相信这种情况正在发生，因为在您的发布操作中，您不会再次填充 ViewBag。确保您`ViewBag.months = pm.GetMyMonthList();`在控制器中设置的 POST 操作类似于您在 GET 操作中所做的操作。

更好的解决方案是将`IEnumerable<SelectListItem> MonthList`属性作为 PostModel 的一部分。您可以通过 MonthList 属性直接访问它，而不是从 ViewBag 加载月份

在 PostModel 中

```
 public IEnumerable<SelectListItem> MonthList
    {
        get
        {
            return pm
                .GetMonthList()
                .Select(a => new SelectListItem
                {
                    Value = a.Id,
                    Text = a.MonthText
                })
                .ToList();
        }
    } 
```

然后在视图中

```
@Html.DropDownListFor(model => model.rent_month, Model.MonthList) 
```

**编辑问题后**

你的 PostModel 类应该是这样的。我已将您的 GetMyMonthList() 实现移出 PostManager 类。

```
 public class PostModel
    {
        [Required(ErrorMessage = "You Must Select a Month.")]
        [Display(Name = "Select Rent Month")]
        public string rent_month { get; set; }

        public IEnumerable<SelectListItem> MonthList
        {
            get
            {
                return CultureInfo.CurrentCulture.DateTimeFormat.MonthNames
                 .Select(m => new SelectListItem() { Text = m, Value = m });
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T09:52:51.690

```
 public class PostModel
    {
        [Required(ErrorMessage = "You Must Select a Month.")]
        [Display(Name = "Select Rent Month")]
        public string rent_month { get; set; }

        public IEnumerable<SelectListItem> MonthList
        {
            get
            {
                return CultureInfo.CurrentCulture.DateTimeFormat.MonthNames
                 .Select(m => new SelectListItem() { Text = m, Value = m });
            }
        }
    } 
```

# macos - 如何检查用户是否有互联网？

> ID：10473350
> 
> 赞同：0
> 
> 时间：2012-05-06T19:05:00.090
> 
> 标签：macos, cocoa, system-configuration

我正在为 OSX 制作应用程序，我想知道如何检查用户是否有互联网连接？
我一直在互联网上搜索这个，但我尝试过的没有奏效。
任何示例代码都会非常好！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:18:14.610

在这里，您可以找到[Reachability 的 ARC 兼容版本](https://github.com/tonymillion/Reachability)。

另一个版本在[这里](https://gist.github.com/1182373)可用。

# ruby - 使用 Rack（PHP 风格）提供页面

> ID：10473352
> 
> 赞同：0
> 
> 时间：2012-05-06T19:05:08.547
> 
> 标签：ruby, rack

我将如何构建一个（小型？）机架应用程序，该应用程序从“视图”目录提供 Slim 模板，从“静态”目录提供静态文件。

我尝试了几个似乎可以做到这一点的框架，包括——Serve、Brochure、RackServerPages，但它们似乎都有自己的问题。

*   服务不会让您选择布局
*   小册子炸弹模板中的“产量”
*   RackServerPages 不会让我在渲染部分时通过本地

或者那里有一颗已经可以做到的宝石？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:21:57.753

试试[Stasis](http://stasis.me/) - 它有布局、控制器和局部变量。

# android - 应用失去显示

> ID：10473353
> 
> 赞同：0
> 
> 时间：2012-05-06T19:05:12.150
> 
> 标签：android

我正在为 WiMM One Android 智能手机编写应用程序。启动我的应用程序后，默认表盘接管显示，我的应用程序停止运行。有什么办法可以防止这种情况？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:22:09.123

您是否尝试过查看 logcat 调试器以了解发生了什么？听起来您遇到了异常并且您的应用程序正在关闭。

# asp.net-mvc-3 - .NET MVC Server_GetLastError 总是返回缺少视图错误

> ID：10473357
> 
> 赞同：3
> 
> 时间：2012-05-06T19:05:57.563
> 
> 标签：asp.net-mvc-3, error-handling

我正在尝试在 MVC 3 中实现全局未处理的异常日志记录。我已经像这样设置了我的 web.config..

```
<customErrors mode="On" defaultRedirect="/error/">
  <error statusCode="500" redirect="/error/http500"/>
  <error statusCode="404" redirect="/error/http404"/>
</customErrors> 
```

当我为控制器触发异常时，它会按预期重定向到错误页面。问题是，当我`Server.GetLastError()`在 Global.asax 中使用时，异常总是

```
"The view 'Error' or its master was not found or no view engine supports the searched locations. The following locations were searched:\r\n~/Views/deanslist/Error.aspx\r\n~/Views/deanslist/Error.ascx\r\n~/Views/Shared/Error.aspx\r\n~/Views/Shared/Error.ascx\r\n~/Views/deanslist/Error.cshtml\r\n~/Views/deanslist/Error.vbhtml\r\n~/Views/Shared/Error.cshtml\r\n~/Views/Shared/Error.vbhtml" 
```

我期待它提供实际抛出的异常。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T19:16:26.297

尝试从 Global.asax 中删除以下行：

```
filters.Add(new HandleErrorAttribute()); 
```

该`HandleError`属性在 Release 模式下拦截所有异常并尝试呈现`Error.cshtml`视图。您可能已经从文件夹中删除了此视图`~/Views/Shared`，因此当引发未处理的异常时，此异常处理程序会拦截异常并尝试呈现不存在的视图。

# javascript - 不明白为什么 Backbone collection.create 不发布数组

> ID：10473362
> 
> 赞同：2
> 
> 时间：2012-05-06T19:06:33.033
> 
> 标签：javascript, backbone.js

我正在尝试 Backbone 并遇到了一些问题。

如果我将 Collection.create 与模型数组一起使用，那么发布到服务器的 JSON 似乎并不容易解析。

例子：

```
var Person = Backbone.Model.extend({
    initialize: function() {
        this.on( 'all', function(e)
                { console.log( "Person model all " + this.get("name") + ", event: " + e ); }
            );
    }
});

var People = Backbone.Collection.extend({
    initialize: function() {
        this.on( 'all', function(e) { console.log( "People collection event: " + e ); } );
    },
    url: "/models/",
    model: Person
});

var people = new People();
people.create( [ { "name":"joe", "age":24 }, { "name":"dan", "age":42 } ] ); 
```

然后我的服务器收到以下 JSON：

```
{"0":{"name":"joe","age":24},"1":{"name":"dan","age":42}} 
```

这是什么以及为什么它不是一个简单的数组，例如：

```
[{"name":"joe","age":24},{"name":"dan","age":42}] 
```

事实上，它很难解析，因为更糟糕的是，如果你执行 Model.save() 那么你会得到一个没有这些 ID 值的简单对象（更有效）。

我能够解析此收藏帖子的唯一方法是执行以下操作：

```
for( var n in payloadobj )
{
    var person = new Object();
    person.id = parseInt(n, 10);
    person.name = payloadobj[n].name;
    person.age = payloadobj[n].age;
} 
```

有谁知道这是为什么，我是否遗漏了一些东西，我是要覆盖一些东西以使其更加一致还是应该避免 Collection.create？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:31:55.603

Backbone 中的集合在内部使用数组，但旨在方便地提供对有序和无序模型的访问。因此，当您添加没有 ID 的 People 实例时，它们会自动被分配一个 cid (clientId) 属性（因为您没有提供替代 ID）。

但是，在您提供的情况下，您的代码正在调用该`Create`方法，该方法一次仅采用一个模型（而不是数组）。因此，它在内部创建了错误的结构。你可以这样做：

```
var people = new People([{ "name": "joe", "age": 24 }, { "name": "dan", "age": 42}]); 
```

该`create`方法只是一种方便的方法，它在每个模型（以“c”为前缀）上解析单个模型（并查找`cid`/ `id`）。

因此，如果您编写自己的保存函数，只需调用`toJSON`people 集合，您就会得到您想要的（一组 Person 对象）。

# ruby-on-rails - 我什么时候应该使用 Lambda 或匿名方法？

> ID：10473363
> 
> 赞同：1
> 
> 时间：2012-05-06T19:06:53.147
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我了解 block 、 proc 和 lambda experession 的工作原理，但我不明白何时在代码中使用匿名方法。

Anonymous 解决了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:30:31.957

lambda 的一种非常常见的用法是延迟加载（并将参数传递给）范围内的 ActiveRecord 关系：

```
class Post < ActiveRecord::Base
  scope :recent, lambda { |today| where('published_at >= ?', today) }
end 
```

（从[这里](http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html)）

但总的来说，这些闭包方法是一种简洁的方式，可以同时操作（例如）一组数据，或者将代码存储为要传递给其他函数的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T19:22:24.400

我在 Ruby 中以这种方式使用 lambda 的原因之一是当我需要一个闭包来捕获周围范围内的内容时，例如在较小的脚本中，我有时会发现这比将内容作为参数传递更方便。其他人（ab）为此使用顶级实例变量，但我不太喜欢。

根据要求更新：这是一个小例子：

```
shift_timestamp = -> ts do
  t = Time.parse(ts.gsub(',','.')) + options[:time]
  "#{t.strftime("%H:%M:%S")},#{t.usec.to_s[0..2]}"
end 
```

这是我为转换字幕而写的一个小工具。这是一个简短的脚本，以这种方式编写它使我可以关闭`options`并在 lambda 中访问它，而无需将其传递进去。正如我所说，没有什么时髦的，但对于小脚本，我有时喜欢这样做（“this”是解析选项，编写 1 或 2 个使用这些选项的 lambda，稍后使用 lambda 而不是方法）。

# java - Java Crypto JCA Provider 真的需要 windows dll 吗？

> ID：10473367
> 
> 赞同：4
> 
> 时间：2012-05-06T19:07:34.360
> 
> 标签：java, cryptography, certificate, smartcard

正如我在这里读到的：

> “与大多数 Java 加密体系结构 (JCA) 提供程序不同，Sun PKCS#11 提供程序不直接实现加密功能；它依赖于将所有操作转发到的本机 PKCS#11 实现。此实现必须以 .dll 的形式提供“

智能卡提供商是否有义务拥有 jca 提供商？例如，我在哪里可以找到 gemalto 的 jca 提供者？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T16:57:25.143

[PKCS#11 参考指南](http://docs.oracle.com/javase/6/docs/technotes/guides/security/p11guide.html)是一个很好的起点。

金雅拓智能卡总是附带一个 PKCS#11 DLL，不幸的是它有不同的名称，具体取决于卡。只需查看安装时附带的文件，直到找到一个带有“p”和“11”的 DLL :)

找到它之后，您可以按照参考指南中给出的步骤进行操作，即创建一个指向 PKCS#11 库等的配置文件。如果一切顺利，您应该能够像访问智能卡一样简单

```
KeyStore ks = KeyStore.getInstance("PKCS11");
ks.load(null, "pin".toCharArray()); 
```

请注意，对于生产代码，您当然应该`CallbackHandler`按照指南中的说明实现一个正确的 - 以上只是为了快速检查一切是否正常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T22:21:59.220

> 智能卡提供商是否有义务拥有 jca 提供商？例如，我在哪里可以找到 gemalto 的 jca 提供者？

不，当然不是，这完全取决于合同中的内容。您很可能会获得与 PKCS#11 兼容的库（具有或多或少的功能，具体取决于提供商/卡）。很可能但可能没有完全测试这与 PKCS#11 提供程序兼容，这对配置的方式有点挑剔。真正的 JCA 提供者的交付是罕见的，如果你能得到一个真正有效的，你就很幸运了。

[编辑]

关于标题中的不同问题：只有 Sun PKCS#11 提供程序要求您配置`.dll`. 其他可能需要一个，具体取决于实现。如果提供程序依赖于操作系统支持（例如 CAPI 提供程序使用 Windows 功能），它可能需要一个不可配置的`.dll`或`.so`在库路径上的某个位置。Bouncy Castle 和其他纯 Java 提供程序通常不需要任何`.dll`或`.so`.

联系金雅拓，看看他们是否有 JCA 提供商，他们应该肯定知道。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T03:53:32.973

您所指的 PKCS#11 DLL 是能够使用 PKCS#11 API 的应用程序与特定加密硬件实现之间的接口。由于每个加密硬件都不同，它需要自己的 PKCS#11 DLL。因此，如果应用程序设计为通过 PKCS#11 与加密硬件进行通信，则它必须调用供应商提供的 DLL。因此，并不是 Java 没有 PKCS#11 的本机实现，而是 PKCS#11 的设计方式。

我认为没有任何硬件供应商有义务提供 JCA 模块，而且其中许多（如果不是大多数）只提供 PKCS#11 驱动程序和 CryptoAPI 模块（CSP）。

# iphone - iphone动态调用相同的视图（使用故事板？）

> ID：10473369
> 
> 赞同：0
> 
> 时间：2012-05-06T19:07:36.513
> 
> 标签：iphone, dynamic, uinavigationcontroller, storyboard, xcode4.3

我是 iphone 开发新手。我的应用设计有 3 个视图。一开始画面。然后你按下一个按钮，你就会进入一个表格视图。表格视图将根据 xml 文件决定它是否与其他数据（以及向下多少级）一起进入另一个相同的表格视图。然后它将转到显示详细信息的视图。例如，它可能会像这样：

主屏幕 -> 表格视图 -> 详细视图 主屏幕 -> 表格视图 -> 表格视图 -> 表格视图 -> 详细视图等。

所以我希望能够在表格视图中选择一个单元格时（如果这是 xml 描述的）调用相同的视图（相同的视图控制器和代码）。当 xml 描述时，请转到详细视图。

这可以使用故事板来完成吗？如果我想使用 ios 4.3 我该怎么做？

我在 Lion 上使用最新的 (4.3) xCode。另请注意，此 xcode 没有基于导航的应用程序的模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:15:55.473

从我到目前为止所见，我无法从情节提要中动态调用相同的视图。所以我使用以下教程实现了一个导航控制器，它对我来说就像一个魅力！

```
http://www.techotopia.com/index.php/Creating_a_Navigation_based_iOS_5_iPhone_Application_using_TableViews 
```

# c++ - 在不使用 libcurl 的情况下读取网页并存储在字符串中。(C++)

> ID：10473370
> 
> 赞同：0
> 
> 时间：2012-05-06T19:07:44.130
> 
> 标签：c++, libcurl

我想要做的是阅读一个网页，然后将它存储在一个sting中我知道如何使用libcurl但是有没有其他方法可以做到这一点而不使用libcurl？（使用Cygwin编译）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:16:31.600

虽然您可以像其他海报所建议的那样使用原始套接字轻松创建 HTTP 客户端，但如果您想在自己计算机之外的任何地方部署软件，我建议您不要这样做。在现实世界中，您的用户可能位于代理和防火墙之后，并且可能需要身份验证。像 libCurl 这样的库会为您处理这种复杂性。

如果你真的不会使用 libCurl 并且不关心跨平台代码，那么大多数操作系统都内置了用于访问网页的 API。WinINET 是 Windows 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T19:09:15.950

您可以使用原始套接字实现一个简单的 HTTP 请求。但除了学习练习之外，我不建议这样做，只使用 libcurl。

对于使用原始套接字的示例程序，请看这里：[http](http://coding.debuntu.org/c-linux-socket-programming-tcp-simple-http-client) ://coding.debuntu.org/c-linux-socket-programming-tcp-simple-http-client （在 google 上随机找到，质量不保证）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:09:03.800

您始终可以通过套接字直接自己使用 HTTP。

# list - 在列表中查找并打印等于

> ID：10473372
> 
> 赞同：0
> 
> 时间：2012-05-06T19:08:28.853
> 
> 标签：list, wolfram-mathematica, integer, find, equals

给定 [n,k] 范围内的 50 个随机整数列表，其中 n 小于 k。我想找出有多少个数字彼此相等并打印出来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T20:36:30.050

这可以通过`Tally`如下方式完成。

首先，让我们生成一个测试列表：

```
list = RandomInteger[{5, 10}, 50]

(* ==>  {10, 7, 5, 7, 10, 8, 6, 6, 7, 6, 6, 8, 7, 5, 6, 9, 10, 6, 
         9, 6, 10, 8, 10, 8, 9, 7, 5, 9, 8, 5, 9, 7, 5, 7, 9, 10, 
         6, 6, 7, 7, 5, 6, 9, 10, 5, 6, 6, 6, 10, 9} 
*) 
```

然后数一数：

```
Tally[list]

(* ==> {{10, 8}, {7, 9}, {5, 7}, {8, 5}, {6, 13}, {9, 8}} *) 
```

# c# - 如何使用微软技术开发 dbms 独立应用程序？

> ID：10473375
> 
> 赞同：2
> 
> 时间：2012-05-06T19:08:45.297
> 
> 标签：c#, .net, silverlight, database

我需要以不担心传入 DBMS 的方式编写应用程序。它可以是 Oracle、PostgreSQL、MySql 等。

本地 dbms 将使用我将加载数据的 SQL Server 2008。

需要/计划做什么...

1.  用户有文本框，他可以在其中为每个可能的 dbms 创建/保存本地数据库/配置文件中的连接字符串值。
2.  然后，应用程序应该使用它来形成连接字符串，并一次连接一个或同时连接到传入数据库（如果可能）。
3.  检索值并将它们放入本地数据库中。
4.  无需将数据写入传入数据库。仅 1 路。

简而言之，一个独立于数据库的应用程序仅基于一组查询读取值并将它们放入指定的数据库中。

有可能做到这一点或听起来很神奇吗？

我可以开发任何解决方案/示例/技术吗？

应用程序基于 Silverlight + ASP.NET 技术。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:24:26.980

你应该搜索和研究设计模式。看看这个[链接](http://martinfowler.com/eaaCatalog/)。另请查看[LLBLGen](http://www.llblgen.com/defaultgeneric.aspx)
如果您想选择自己的解决方案，那么您必须分层工作。定义松散耦合的数据访问层 (DAL)。一种方法是使用接口。为数据库连接定义一个接口，然后让 DBMS 的每个类来实现它。然后，您可以在以下几行中获取数据库连接字符串。
[来源](https://stackoverflow.com/questions/1055710/data-access-layer-design-patterns)：

```
public static IDbConnection GetConnection(string connectionName)
    {
      ConnectionStringSettings ConnectString = ConfigurationManager.ConnectionStrings[connectionName];
//Use a Factory class, to which you pass the ProviderName and 
//it will return you object for that particular provider, you will have to implement it
      DbProviderFactory Factory = DbProviderFactories.GetFactory(ConnectString.ProviderName);
      IDbConnection Connection = Factory.CreateConnection();
      Connection.ConnectionString = ConnectString.ConnectionString;
      return Connection;
    } 
```

然后你可以像这样使用它：

```
public static DataTable GetData()
{
  using (IDbConnection Connection = GetConnection("SiteSqlServer"))
  {
    IDbCommand Command = Connection.CreateCommand();
    Command.CommandText = "DummyCommand";
    Command.CommandType = CommandType.StoredProcedure;

    Connection.Open();

    using (IDataReader reader = Command.ExecuteReader())
    {
      DataTable Result = new DataTable();
      Result.Load(reader);
      return Result;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T19:20:52.737

这是相当基本的要求，您应该能够使用对象关系映射框架之一轻松实现它。

如果我要推荐一个 - 使用 NHibernate。

Silverlight + ASP.NET 与您持久化数据的方式无关，只要您将其持久化在服务器端即可。对于 Silverlight 应用程序，您还需要一些 WCF Web 服务来在客户端和服务器之间进行通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:43:16.627

与其他答案相同，我强烈建议您查看以下问题[https://stackoverflow.com/questions/132676/which-orm-for-net-would-you-recommend](https://stackoverflow.com/questions/132676/which-orm-for-net-would-you-recommend)它应该会给您很好的休息ORM 下来了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T20:29:50.940

以其他答案所说的内容为基础。以这种方式思考你的问题。

你有“前端（asp.net/silver light）”<->“数据存储”

你想要的是中间的一步

“前端”<->“数据库无知层”<->“数据存储”

这个中间层可能是一个 ORM，但真正的 ORM（除了数千行代码和多年的精炼经验之外）是存储库和工作单元模式的实现。

# iphone - 谷歌地图本地方向 iphone MKMapView

> ID：10473376
> 
> 赞同：0
> 
> 时间：2012-05-06T19:08:48.030
> 
> 标签：iphone, ios, ipad, google-maps, mkmapview

我可以打开一个包含多个地方的路线的 MKMapView。我不想调用将打开的谷歌地图 api 是一个单独的窗口。如果可能的话，我想在站点上放置信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:24:46.207

您可以从可用的 API（Google，...）之一请求方向，解析它们并将它们绘制为 MapView 上的叠加层，但我最近偶然发现了一个商业框架，它为我节省了很多时间和麻烦： [http：/ /mtdirectionsk.it](http://mtdirectionsk.it)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:16:34.407

你当然可以。

我建议的开始顺序是：

1.  阅读 MKOverlay、MKOverlayPathView 和相关的 MapKit 类。
2.  从提供者（例如 Google API）获取后台线程中的方向。这不会在单独的窗口中打开，您可以通过一些 API 调用在后台完成所有操作。将结果解析为您的停靠点的本地模型。
3.  显示您的地图视图，并根据您的方向模型数据生成叠加层。

您将为停靠点添加注释，它们将具有“标注”，以便用户可以查看有关它们的一些详细信息。我相信有很多现成的例子可以证明如何做到这一点。

我希望这个非常笼统的答案有一些用处，也许只是为了让您知道您想要做的事情很容易实现，并且不需要太多代码。

# javascript - FancyBOX 中的 HTML 页面

> ID：10473377
> 
> 赞同：0
> 
> 时间：2012-05-06T19:08:49.637
> 
> 标签：javascript, jquery, fancybox

也许你知道这怎么可能？

我可以使用 fancybox 加载图像，当我尝试加载网页（html）时，错误显示：

“无法加载请求的内容。请稍后再试。”

感谢您的任何建议！

使用此代码，页面正在打开，但只是在不同的页面中，而不是在 Fancybox 弹出页面中。

[http://www.text-upload.com/read.php?id=361082&c=6525825](http://www.text-upload.com/read.php?id=361082&c=6525825)

# java - 多线程合并排序算法

> ID：10473379
> 
> 赞同：1
> 
> 时间：2012-05-06T19:08:59.170
> 
> 标签：java, multithreading, list, race-condition, mergesort

我有一个类可以对通用列表进行一些递归合并排序，只要该元素实现 Comparable。我正在尝试使代码成为多线程以提高性能，为此，我有一个静态变量`maxThreads`来保持我创建的线程数不会爆炸，并且我有一个静态变量`currentThreads`来跟踪数量我目前正在运行的线程。我的变量似乎存在竞争条件`currentThreads`，但我无法提出解决方案来解决它。

```
import java.util.ArrayList;
import java.util.List;

public class ThreadedMergeSorter<E extends Comparable<? super E>> implements, Runnable  
{
  private List<E> list;
  private List<E> left, right;
  private Thread t1, t2;
  private static final int maxThreads = 4;
  private static AtomicInteger currentThreads = new AtomicInteger(0);

  private ThreadedMergeSorter(List<E> list)
  {
    this.list = list;
  }

  public ThreadedMergeSorter(){}

  /**
   * Sorts a List<E> using the merge sorting algorithm
   * @param list the list to be merge sorted
   * @return 
   * @throws InterruptedException 
   */
  public void sort(List<E> list) 
  {
    if(list.size() > 1)
    {                  
      left = new ArrayList<E>(list.subList(0, list.size()/2));
      right = new ArrayList<E>(list.subList(list.size()/2, list.size()));

      list.clear();

      if(currentThreads.get() < maxThreads)
      {
        t1 = new Thread(new ThreadedMergeSorter<E>(left));
        t1.start();
        currentThreads.incrementAndGet();
      }
      else sort(left);

      if(currentThreads.get() < maxThreads)
      {
        t2 = new Thread(new ThreadedMergeSorter<E>(right));
        t2.start();
        currentThreads.incrementAndGet();
      }
      else sort(right);

      try{
        if(t1 != null)
        {
          t1.join();
          currentThreads.decrementAndGet();
        }
        if(t2 != null)
        {
          t2.join();
          currentThreads.decrementAndGet();
        }
      }catch(InterruptedException e){}

      list.addAll(mergeSortedLists(left, right)); 
    } 
  }

  /**
   * Merges two previously sorted List<E extends Comparable<E>> into a single List
   * @param leftArray a List of previously sorted elements
   * @param rightArray a List of previously sorted elements
   * @return an new sorted List
   */
  private List<E> mergeSortedLists(List<E> leftList, List<E> rightList)
  {
    ArrayList<E> list = new ArrayList<E>();

    while(!leftList.isEmpty() && !rightList.isEmpty())
    {
      if((leftList.get(0)).compareTo(rightList.get(0)) <= 0)
        list.add(leftList.remove(0));        
      else
        list.add(rightList.remove(0));
    }

    if(!leftList.isEmpty())
      list.addAll(leftList);
    if(!rightList.isEmpty())
      list.addAll(rightList);

    return list;
  }

  @Override
  public void run() 
  {
    sort(this.list);
  }
} 
```

问题在于语句和块的`sort(List<E> list)`方法。`if``try catch`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:15:52.080

首先，您没有并行运行任何东西。线程以`start()`, not开头`run()`，它只是调用`run`当前线程上的方法。

其次，如果您要更新共享变量，请尝试将它们声明为`AtomicInteger`：

```
private static AtomicInteger currentThreads = new AtomicInteger(0); 
```

然后使用这些方法以原子方式递增/递减：

```
currentThreads.incrementAndGet();
currentThreads.decrementAndGet(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T19:23:01.030

不要不断地创建、终止和销毁线程。不要尝试对线程进行微观管理 - 正如您所发现的那样，这非常困难且容易出错。

如果您想取消合并排序（这不是一个坏主意：），请查看 ThreadPoolExecutor 和 CountDownLatch。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:20:40.873

如果您使用的是 Java 7，我建议您使用新的[Fork/Join](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)，并使用 an`AtomicReferenceArray<E>`而不是 a `List`，以便您可以以线程安全的方式进行就地排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T19:28:03.350

另一个解决方案（假设您正在运行 Java 5 和更新版本）可以声明`currentThreads`为 volatile 类成员：

```
private static volatile int currentThreads = 0; 
```

[您可以在此处](http://javarevisited.blogspot.com/2011/06/volatile-keyword-java-example-tutorial.html)阅读有关`volatile`关键字的更多信息。

# javascript - 基于数组构建交换机

> ID：10473383
> 
> 赞同：6
> 
> 时间：2012-05-06T19:09:11.993
> 
> 标签：javascript, jquery, arrays, switch-statement

我想根据我从查询字符串创建的数组创建一个 Javascript 开关。我不确定如何进行。

假设我有一个这样的数组：

```
var myArray = ("#general","#controlpanel","#database"); 
```

我想创建这个...

```
switch(target){
            case "#general":
                $("#general").show();
                $("#controlpanel, #database").hide();
            break;
            case "#controlpanel":
                $("#controlpanel").show();
                $("#general, #database").hide();
            break;
            case "#database":
                $("#database").show();
                $("#general, #controlpanel").hide();
            break;  
        } 
```

myArray 可以包含任意数量的元素，因此我希望根据数组的长度动态创建开关。案件`default`永远是第一选择。

该数组是从带有正则表达式的 location.href 创建的，以仅提取我需要的内容。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T19:18:11.897

@Michael 有正确的一般答案，但这是实现相同目标的更简单的方法：

```
// Once, at startup
var $items = $("#general,#controlpanel,#database");

// When it's time to show a target
$items.hide();     // Hide 'em all, even the one to show
$(target).show();  // OK, now show just that one 
```

如果你真的只有一个选择器数组，那么你可以通过以下方式创建一个 jQuery 集合：

```
var items  = ["#general","#controlpanel","#database"];
var $items = $(items.join(',')); 
```

*哦，还有[“谢谢，很多！”](http://hyperboleandahalf.blogspot.com/2010/04/alot-is-better-than-you-at-everything.html)* :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T19:16:01.037

我想你想要一个对象。只需使用要匹配的元素名称定义键，并将其用作值。例如

```
var switchObj = {
            “#general”：函数（）{
                $("#general").show();
                $("#controlpanel, #database").hide();
            },
            “#controlpanel”：函数（）{
                $("#controlpanel").show();
                $("#general, #database").hide();
            },
            "#database": 函数 () {
                $("#database").show();
                $("#general, #controlpanel").hide();
            }
        }

```

然后你可以打电话给你想要的

`switchObj[target]();`

授予：如果您需要对每个元素做明确不同的事情，这个解决方案会更好，并且与其他答案不同，它关注问题的明确主题是什么，而不是 OP 试图用所述数据结构完成什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T19:14:51.657

而不是 a `switch`，您需要两个语句：第一，显示选定的目标，第二，隐藏所有其他目标。

```
// Array as a jQuery object instead of a regular array of strings
var myArray = $("#general,#controlpanel,#database");
$(target).show();

// Loop over jQuery list and unless the id of the current
// list node matches the value of target, hide it.
myArray.each(function() {
  // Test if the current node's doesn't matche #target
  if ('#' + $(this).prop('id') !== target) {
    $(this).hide();
  }
}); 
```

事实上，第一条语句可以并入循环中。

```
var myArray = $("#general,#controlpanel,#database");
myArray.each(function() {
  if ('#' + $(this).prop('id') !== target) {
    $(this).hide();
  }
  else {
    $(this).show();
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T19:20:35.600

也许你正在寻找这样的东西？填充`myArray`您正在使用的元素。

```
var myArray = ["#general","#controlpanel","#database"];
var clone = myArray.slice(0); // Clone the array
var test;
if ((test = clone.indexOf(target)) !== -1) {
    $(target).show();
    clone.splice(test,1); // Remove the one we've picked up
    $(clone.join(',')).hide(); // Hide the remaining array elements
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T04:31:35.593

在这里您不需要明确列出所有情况，只需让数组定义它们即可。但请确保该目标存在于数组中，否则您将需要一个 if 语句。

```
var target = "#controlpanel";
var items = ["#general","#controlpanel","#database"];
items.splice($.inArray(target, items), 1);
$(target).show();
$(items.join(",")).hide();
items.push(target); 
```

# ajax - 一页设计

> ID：10473385
> 
> 赞同：0
> 
> 时间：2012-05-06T19:09:16.590
> 
> 标签：ajax

如果只使用一个带有块的html页面怎么办，如下所示

```
<div id="page1" style="display:block">...</div>

<div id="page2" style="display:none">...</div>

<div id="page3" style="display:none">...</div> 
```

活动块有 style="display:block" 其他 "display:none"，当块变为活动时 "display:block" 前一个变为 "display:none"。

AJAX 服务器通信，例如

```
$.post("json", { "name": $("#name").val(), "sex": $("#sex").val() },
function(data) { console.log("server responded", data); }); 
```

这种方法有什么缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:15:46.960

这是快速和动态的，但这种方法缺乏书签工具，用户无法保存特定链接，因为数据是动态的，而且它对搜索引擎不友好，另一个缺点是历史按钮后退和前进不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:14:41.003

使用纯 AJAX 没有缺点。事实上，在很多方面，它是有利的。

如果您没有正确计划，您可能会遇到一些问题。例如，您习惯一次使用 CSS 效果 1 个页面，但使用纯 AJAX，CSS 将影响每个页面。

此外，所有事情都会变得稍微困难​​一些。链接到另一个页面变得更加困难，因为您必须使用 JavaScript。

最后，您的应用程序现在需要 JavaScript，所以我会有一个不错的后备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:17:40.627

这种方法在一些移动 Web 框架中使用，例如 jQuery Mobile，旨在使 Web 应用程序感觉更加原生。与传统的网站或 Web 应用程序相比，这更像是 Web 2.0，因为传统网站或 Web 应用程序的每个页面转换都需要访问服务器。

我相信您已经知道优点，所以让我们继续讨论缺点。

**稍大的初始延迟：**

这种方法的主要缺点是加载页面内容的时间会稍长一些，因为您一次就可以从服务器获取所有 HTML。因此，初始加载时间可能比传统的 Web 1.0 应用程序涉及更多的延迟。但是，根据我的经验，只有几页，延迟并不足以成为一个问题。

**后退按钮丢失 - 维护历史更加复杂：**

另一个潜在的缺点是，作为开发人员，您需要以不同的方式开发您的网站。因为您通过隐藏一个 DIV 块并取消隐藏另一个来转换页面，所以您将失去本机后退按钮功能。这可以通过使用 URL 中的散列来记录页面转换的历史来缓解。然后，您需要注册一个事件来查看哈希并在用户向后导航时重新加载旧内容。您还需要更改 JavaScript 对象和变量的状态以反映旧状态，这可能会增加您的应用程序的复杂性。当然，还有 API 和库可以使这更容易实现，并有助于确保您编写出良好的、可维护的代码。

**更有状态的范围涉及重新思考方法和可能的学习曲线：**

最后，您需要记住，每个页面的范围不会在每次转换后重置。虽然这实际上可能是一个优势，因为您的应用程序更有状态，但您需要解除自己的思维方式，即每个加载的页面都会导致您设置的所有 JavaScript 变量和数据被清除。

**概括：**

如果你要走这条路，我的建议是使用图书馆。除非你有充分的理由，否则不要重新发明轮子。像 jQuery mobile 这样的库有助于确保对旧浏览器有良好的回退，有些甚至可以确保在禁用 JavaScript 的情况下，您的站点仍将使用 Web 1.0 技术加载。

# actionscript-3 - 由于 wordpress 永久链接，无法加载 flash actionscript 中的 xml

> ID：10473389
> 
> 赞同：1
> 
> 时间：2012-05-06T19:09:38.510
> 
> 标签：actionscript-3, wordpress, flash-cs4

我是 Flash 动作脚本中的新蜜蜂。我想加载 xml 文件以显示一些文本。我曾经在 wordpress 中嵌入 flash 对象。我在 wordpress 的根目录中创建了一个新文件夹，例如 wordpress/flash。xml 文件存在于 flash 文件夹中。我想在运行时在动作脚本中加载这些 xml 文件。我正在使用此代码

var xml_loader:URLLoader = new URLLoader(); xml_loader.load(new URLRequest("http://www.example.com/flash/page_1.xml"));

但它不能在现场工作，我在本地运行 .swf 文件，它做得很好并从现场加载数据，但是当我将它上传到现场服务器并尝试在那里使用它时，它卡在加载...

请帮我解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:31:47.187

尝试在站点根目录添加跨域策略文件：http: [//kb2.adobe.com/cps/142/tn_14213.html](http://kb2.adobe.com/cps/142/tn_14213.html)

此外，在开发时使用浏览器跟踪器进行调试非常有帮助： [https](https://addons.mozilla.org/en-US/firefox/addon/flashtracer/) ://addons.mozilla.org/en-US/firefox/addon/flashtracer/ （附加组件）

最后，检查浏览器控制台中是否有任何错误被转储：

*   Chrome：查看 -> 开发人员 -> 开发人员工具
*   Firefox：工具 -> Web 开发人员 -> [Firebug](https://addons.mozilla.org/en-US/firefox/addon/firebug/)（附加组件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T06:06:09.970

您需要使用“base”属性在 wordpress 中嵌入 XML 驱动的 swf。这是解决方案[http://masterblogster.com/how-to-embed-swf-file-in-wordpress-that-loads-xml-file /](http://masterblogster.com/how-to-embed-swf-file-in-wordpress-that-loads-xml-file/)

# java - 两个动画一个接一个

> ID：10473391
> 
> 赞同：3
> 
> 时间：2012-05-06T19:09:48.683
> 
> 标签：java, android, animation

我想为 2 个图像在活动上制作 2 个动画，并且我想在 2 个条件下做到这一点：
1\. 我想在活动完成加载到页面后启动动画，所以`onCreate`我没有将动画代码放在下面`onResume`那样可以么？有更好的方法吗？

2.我希望第二个动画只有在第一个动画完成后才开始......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:22:58.430

你会想要使用[Animation.AnimationListner](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html)你可以在你的第一个动画上设置一个，当动画完成时会得到一个回调。在该回调中，您可以添加将启动第二个动画的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T19:25:48.623

根据您编写的 API 级别，您可以使用`AnimationSet`或`AnimatorSet`. 此外，如果您正在扩展`View`或其子类之一，您可以覆盖`View.onAnimationStart()`and `View.onAnimationFinish()`。或者使用蒂姆提到的监听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:25:58.017

```
 public class SplashActivity extends Activity{

        Animation FadeInanimation, FadeOutanimation;
        ImageView img;

        @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                img= (ImageView) findViewById(R.id.img);
                //Your Code Block....

                FadeInanimation = AnimationUtils.loadAnimation(this,R.anim.image_fadein);
                //FadeInanimation.setRepeatCount(Animation.INFINITE);
                //FadeInanimation.setRepeatMode(Animation.RESTART);
                FadeInanimation.setAnimationListener(FadeInAnimationListener);

                FadeOutanimation = AnimationUtils.loadAnimation(this,R.anim.image_fadeout);
                //FadeOutanimation.setRepeatCount(Animation.INFINITE);
                //FadeOutanimation.setRepeatMode(Animation.RESTART);
                FadeOutanimation.setAnimationListener(fadeOutAnimationListener);

                img.startAnimation(FadeInanimation);
            }
    AnimationListener FadeInAnimationListener = new AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {
            }

            @Override
            public void onAnimationRepeat(Animation animation) {

            }

            @Override
            public void onAnimationEnd(Animation animation) {
                plane.startAnimation(FadeOutanimation);
            }
        };
    } 
```

# java - 使用 JGAp（遗传算法库）和重复的染色体

> ID：10473397
> 
> 赞同：0
> 
> 时间：2012-05-06T19:11:05.377
> 
> 标签：java, genetic-algorithm, jgap

我使用了 JGAp java 遗传算法库。当我评估染色体时，我在总体样本中发现了重复的染色体：

```
evaluation 0
A B C
A D F
S F W
evaluation 1:
A B C
A D F
A D F
evaluation 2:
A D F
A D F
A D F 
```

我使用的配置是：

```
conf.setKeepPopulationSizeConstant(true);
 conf.setRandomGenerator(new StockRandomGenerator());
conf.verifyStateIsValid(); 
```

有没有什么配置可以用来获得独特的染色体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:39:18.693

您可以确保只使用不允许重复的[NaturalSelectors 。](http://jgap.sourceforge.net/javadoc/2.0/org/jgap/NaturalSelector.html)示例代码：

```
conf.getNaturalSelectors(false).clear();
BestChromosomesSelector bcs = new BestChromosomesSelector(conf, 1.0d);
bcs.setDoubletteChromosomesAllowed(false);
conf.addNaturalSelector(bcs, false); 
```

请注意，仅使用 SwappingMutationOperator 可能会使人们的独创性挨饿。修改 JGAP 中的 MinimizingMakeChange 示例但仅使用 SwappingMutationOperator 的测试表明，种群迅速停止产生以前从未见过的个体。

# ruby-on-rails - 从 Heroku Cedar 上的父目录导入 SCSS 文件

> ID：10473403
> 
> 赞同：3
> 
> 时间：2012-05-06T19:12:17.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, sass

我正在尝试部署我在本地工作的 Rails 3.1 应用程序。但是一旦部署到 Heroku（Cedar 堆栈），我遇到了一个本地没有的问题，我找不到任何解决方案。

实际上，在我的一些 SCSS 文件中，我导入了位于父目录中的其他 SCSS 文件。在我尝试的几种语法中：

```
 @import "file.css.scss";
 @import "file";
 @import "/file.css.scss";
 @import "/file";
 @import "../file.css.scss";
 @import "../file"; 
```

其中大部分在本地工作，但在我的 heroku Cedar 应用程序上没有工作。我还尝试将导入的文件重命名为“_file.css.scss”，并带有下划线，因为它似乎是要导入的 SCSS 文件的标准格式。但并没有改变什么。

heroku 日志给我的错误是： `ActionView::Template::Error (File to import not found or unreadable: /mixins.css.scss.`

我现在没有想法，所以如果你有任何线索来解决这个问题，我将不胜感激。

非常感谢，干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:08:25.887

如果您导入的文件位于同一文件夹中，则以下内容应该有效：

```
@import './file.css.scss'; 
```

当我遇到类似问题时，我发现存在相对路径和文件扩展名很重要。由于您尝试使用 ../ 这将在父文件夹中而不是在同一文件夹中查找您导入的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T00:19:48.717

语法应该是

具有以下文件夹结构

```
/app/
  /assets/
    /stylesheets/
      /pages/
       index.css.scss
       products.css.scss
      application.css.scss 
```

如果您想在 application.css.scss 中的 /pages/ 中包含 scss 文件，您可以这样做：

```
@import "pages/index";
@import "pages/products"; 
```

您还应该能够执行以下操作（但是我不确定这是否仅限于在项目中使用 Compass）。

```
@import "pages/*"; 
```

能够进行全局导入非常棒。但我认为它可能只是指南针，或者至少曾经是。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T03:16:25.633

最好的办法是使用内置的 Rails Asset Pipeline 来处理包含你的样式文件。

在您的`app/assets/stylesheets`文件夹中，您应该有一个名为`application.css`. 该文件使用[Sprockets](https://github.com/sstephenson/sprockets)自动包含放置在`app/assets/stylesheets`文件夹内的所有 css 文件。

在文件的顶部，您会看到：

```
/*
 * This is a manifest file that'll automatically include all the stylesheets available in this directory
 * and any sub-directories. You're free to add application-wide styles to this file and they'll appear at
 * the top of the compiled file, but it's generally better to create a new file per style scope.
 *= require_self
 *= require_tree . 
*/ 
```

该`*= require_self`部分包括在这个实际`application.css`文件中编写的任何 css 样式，而该`*= require_tree .`部分包括在`app/assets/stylesheets`.

如果您想更改包含顺序，或指定特定样式表，例如`mixins.css.scss`位于 中的文件`app/assets/stylesheets`，请执行以下操作：

```
/*
 * This is a manifest file that'll automatically include all the stylesheets available in this directory
 * and any sub-directories. You're free to add application-wide styles to this file and they'll appear at
 * the top of the compiled file, but it's generally better to create a new file per style scope.
 *= require_self
 *= require_tree . 
 *= require_mixins
*/ 
```

sprockets 的魔力将为您包含您的文件。

# php - CakePHP 2.1：HABTM 保存关联并保持存在数据

> ID：10473404
> 
> 赞同：0
> 
> 时间：2012-05-06T19:12:31.930
> 
> 标签：php, cakephp, cakephp-2.1

我对 saveAssociated 和存在条目有一点问题:(

**楷模：**

*成分.php*

```
<?php

class Ingredient extends AppModel {

    public $name = 'Ingredient';
    public $hasMany = array('IngredientsRecipes');

    public $hasAndBelongsToMany = array(
        'Recipe' =>
            array(
                'className'              => 'Recipe',
                'joinTable'              => 'ingredients_recipes',
                'foreignKey'             => 'ingredient_id',
                'associationForeignKey'  => 'recipe_id',
                'unique'                 => 'keepExisting',
                'conditions'             => '',
                'fields'                 => '',
                'order'                  => '',
                'limit'                  => '',
                'offset'                 => '',
                'finderQuery'            => '',
                'deleteQuery'            => '',
                'insertQuery'            => ''
            )
    );
 } 
```

*食谱.php*

```
<?php
class Recipe extends AppModel {
    public $name = 'Recipe';
    public $hasMany = array('IngredientsRecipes');
    public $hasAndBelongsToMany = array(
        'Ingredient' =>
            array(
                'className'              => 'Ingredient',
                'joinTable'              => 'ingredients_recipes',
                'foreignKey'             => 'recipe_id',
                'associationForeignKey'  => 'ingredient_id',
                'unique'                 => 'keepExisting',
                'conditions'             => '',
                'fields'                 => '',
                'order'                  => '',
                'limit'                  => '',
                'offset'                 => '',
                'finderQuery'            => '',
                'deleteQuery'            => '',
                'insertQuery'            => ''
            )
    );
} 
```

*成分配方.php*

```
<?php
class IngredientRecipe extends AppModel {
    public $name = 'IngredientsRecipes';
    public $belongsTo = array('Ingredient', 'Recipe');
} 
```

**意见：**

*查看/IngredientsRecipes/add.ctp*

```
<?php echo $this->Form->create('IngredientRecipe'); ?>
    <?php echo $this->Form->input('Ingredient.ingredient', array('type' => 'text', 'label' => 'Ingredient')); ?>
    <?php echo $this->Form->input('Recipe.recipe', array('type' => 'text', 'label' => 'Recipe')); ?>
    <button type="submit">Save</button>
<?php echo $this->Form->end(); ?> 
```

**控制器：**

*成分配方控制器.php*

```
<?php
class IngredientRecipeController extends AppController {

public function add() {
    if ($this->request->is('post')) {
     if(!empty($this->request->data)) {
       $ingredients_comma_separated = explode(',', $this->request->data['Ingredient']['ingredient']);
       $recipes_comma_separated = explode(',', $this->request->data['Recipe']['recipe']);
       $recipes = array();
         foreach($ingredients_comma_separated as $ingredient){
         $recipes['Ingredient']['ingredient'] = trim($ingredient);
         foreach($recipes_comma_separated as $recipe){
         $recipes['Recipe']['recipe'] = trim($recipe);
        if ($this->IngredientRecipe->saveAssociated($recipes, array('deep' => true, 'validate' => 'first'))) {
            $this->Session->setFlash('Saved.');
            }
          }
        }
      } 
    }
  }
} 
```

**MySQL 表：**

```
CREATE TABLE IF NOT EXISTS `ingredients` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ingredient` varchar(250) NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ingredient` (`ingredient`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `ingredients_recipes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ingredient_id` int(11) NOT NULL,
  `recipe_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `recipes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `recipe` varchar(250) NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `recipe` (`recipe`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

**我的问题：**

我如何在食谱和成分字段中保留现有数据并继续在成分食谱字段中保存相关数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T19:01:45.563

`'unique' => 'keepExisting',` 不是为了这个。它的作用是将附加行的现有信息保留在连接表中，但它的作用仍然与`'unique' => true`.

见： [http ://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#ref-habtm-arrays](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#ref-habtm-arrays)

您需要做的就是将其设置为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T23:03:38.070

由于配方和成分记录已经存在，您应该能够获得他们的 id。然后在保存数据时，您只需提供 id 来保存新关系，例如

```
dataArray = array(
    'recipe'=>array('id'=>$recipeId),
    'ingredient'=>array('id'=>$ingredientId)
); 
```

这样`recipe`，`ingredient`表中的记录就不会被修改或复制。

如果您的表单输入是文本而不是下拉列表等选择，您可能需要在保存关系之前手动查找 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T04:03:10.327

在配方和成分模型中以及从配方控制器中使 unique=false

```
$this->Recipe->saveAll($this->request->data) 
```

我认为这会奏效

# c - 如何创建将标准输入重定向到子进程的代理进程？

> ID：10473409
> 
> 赞同：-2
> 
> 时间：2012-05-06T19:13:22.833
> 
> 标签：c, linux, bash, pipe, stdin

我想做一个代理进程来打开真正的进程。

就像我将 linux 重命名`espeak`为`espeak_real`，我的应用程序重命名为`espeak`. `espeak`打开`espeak_real`，我得到输出。

我希望能够：

*   将它的 STDIN 打印到控制台
*   将它的 STDIN 打印到另一个进程的 STDIN
*   打印第二个进程的 STDOUT

我正在尝试在 C 中执行此操作（我猜也可以使用原始 bash）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:17:35.753

我不完全明白你在做什么，但它似乎是`fork`,`exec`和应该做`pipe`的组合。`dup2`

`app`可以`pipe`用来获取一对文件描述符，通过管道连接（写入一个的内容是从另一个读取的）。
然后它可以分叉，并且孩子可以`exec` `app_real`。
但是在`fork`and之间`exec`，`dup2`可用于将您想要的任何文件描述符更改为 0,1 和 2（但关闭真正的 0,1,2）。

短代码示例：

```
int pipe_fds[2];
pipe(pipe_fds);
if (fork()==0) {
    // Child
    close(fds[1]);    // This side is for the parent only
    close(0);         // Close original stdin before dup2
    dup2(fds[0],0);   // Now one side of the pipe is the child's stdin
    close(fds[0]);    // No need to have it open twice
    exec(...);
} else {
    // Parent
    close(fds[0]);            // This side is for the child only
    write(fds[1],data,len);   // This data goes to the child
} 
```

# android - Android：你怎么知道一个 View 已经变成 Visible 了？

> ID：10473412
> 
> 赞同：2
> 
> 时间：2012-05-06T19:14:05.937
> 
> 标签：android, android-view

我有一个 FrameView，上面包含一个全屏 ImageView，下面有一个全屏 SurfaceView。当我显示 SurfaceView 时，ImageView 开始不可见。现在我将 ImageView 设置为 VISIBLE 并想要更新 SurfaceView 上的内容，看不见。

但是 ImageView 还没有真正可见。在弄乱 SurfaceView 之前，我必须等到 ImageView 真正可见。这是怎么做到的？

我发现的唯一方法是在弄乱 SurfaceView 之前等待 50 毫秒（不会做更少的事情）。这恰好在我的设备上可靠地工作，但显然是一个黑客。

更具体地说：在 SurfaceView 上，我正在准备一部电影。这使屏幕变黑。我试图通过用图像覆盖黑色来避免黑色。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:28:36.223

您可以使用 View.onVisibilityChanged()。

# cocos2d-iphone - 如何将身体连接到绳索上并使其摆动到另一根绳索上

> ID：10473413
> 
> 赞同：1
> 
> 时间：2012-05-06T19:14:17.790
> 
> 标签：cocos2d-iphone, 2d, box2d-iphone

我已经设置了一些绳索（使用 cocos2d 和 box2d），并希望将身体连接到一根绳索上，使其可以摆动到另一根绳索上。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:25:25.987

你检查过这个[Verlet 绳子](http://www.cocos2d-iphone.org/archives/1112)吗？

# asp.net-mvc - 如何在视图中处理具有继承的实体模型？

> ID：10473419
> 
> 赞同：0
> 
> 时间：2012-05-06T19:15:13.530
> 
> 标签：asp.net-mvc, entity-framework

假设我有一个由实体 Car 和 2 个从 Car 继承的实体（SportsCar、Truck）组成的实体模型。

在我的网站上，我想显示一个汽车列表，混合了跑车和卡车，而且还显示了每种汽车的独特功能。

在我的控制器中，我从模型中检索所有汽车并将它们发送到视图。

如何在我的视图中构建逻辑来检查汽车是跑车还是卡车？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:43:06.923

您可以使用显示模板。让我们举个例子。

模型：

```
public class Car
{
    public string CommonProperty { get; set; }
}

public class SportCar : Car
{
    public string CarSpecificProperty { get; set; }
}

public class Truck: Car
{
    public string TruckSpecificProperty { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new Car[]
        {
            new SportCar { CommonProperty = "sports car common", CarSpecificProperty = "car specific" },
            new Truck { CommonProperty = "truck common", TruckSpecificProperty = "truck specific" },
        };
    }
} 
```

查看 ( `~/Views/Home/Index.cshtml`):

```
@model Car[]

@for (int i = 0; i < Model.Length; i++)
{
    <div>
        @Html.DisplayFor(x => x[i].CommonProperty)
        @Html.DisplayFor(x => x[i])
    </div>
} 
```

跑车的显示模板 ( `~/Views/Home/DisplayTemplates/SportCar.cshtml`)：

```
@model SportCar
@Html.DisplayFor(x => x.CarSpecificProperty) 
```

卡车的显示模板 ( `~/Views/Home/DisplayTemplates/Truck.cshtml`)：

```
@model Truck
@Html.DisplayFor(x => x.TruckSpecificProperty) 
```

# c# - C# 猜谜游戏 - Windows 窗体应用程序 - 如何配置“PlayAgainButton”并保持总分

> ID：10473420
> 
> 赞同：0
> 
> 时间：2012-05-06T19:15:18.320
> 
> 标签：c#, windows-forms-designer

我是 C# 新手，我的小应用程序需要一些帮助。

我想要一个按钮，在你完成后重新开始游戏，但程序需要保持总分。（你猜猜得分）

提前致谢，

菲利普

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace GuessingGame
{
 public partial class TheUltimateGuessingGame : Form
 {

    public TheUltimateGuessingGame()
    {
        InitializeComponent();
    }

    int number;
    int numberoftries;
    int points;
    int total = 0;
    private void Form1_Load(object sender, EventArgs e)
    {

        Random generator = new Random();
        number = generator.Next(0, 101);

        MessageBox.Show("Try to guess a number between 1 and 100");
    }

    private void PlayAgainButton_Click(object sender, EventArgs e)
    {
        InitializeComponent();
    }

    private void button_guess_Click(object sender, EventArgs e)
    {
        int guess = Convert.ToInt32(textBox_guess.Text);

        if (guess > number)
        {
            textbox_showdifference.Text = ("Guess was too high, try again!");
        }

        if (guess < number)
        {
            textbox_showdifference.Text = ("Guess was too low, try again!");
        }

        if (guess == number)
        {
            textbox_showdifference.Text = ("Awesome, guess was right!");

            MessageBox.Show("It took you " + Convert.ToString(numberoftries) + " tries 
            to guess the right number");

            if (numberoftries <= 3)
            {
                points = 10;
            }

            if (numberoftries >= 4 && numberoftries <= 6)
            {
                points = 5;
            }

            if (numberoftries >= 7)
            {
                points = 2;
            }

            total = total + points;

            ScoreBoard1.Text = ("Here are your points --> " + points + "\nHere are your total points --> " + total);
        }
        ++numberoftries;

    }

     private void exitbutton_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:23:40.120

为什么不是这个？

```
private void PlayAgainButton_Click(object sender, EventArgs e)
{
    Random generator = new Random();
    number = generator.Next(0, 101);
    numberoftries = 0;
    MessageBox.Show("Try to guess a number between 1 and 100");
} 
```

`InitializeComponent`是解析 XAML 以构建表单的方法。它不是为了重置对象的状态。

# jquery - 在一个页面中播放多个 mp3 文件

> ID：10473426
> 
> 赞同：1
> 
> 时间：2012-05-06T19:16:11.367
> 
> 标签：jquery, jquery-ui

我在一页中有许多 mp3 文件，我想在单击时播放 mp3 文件。如何使用 jquery 播放它们？

```
<a href="listen(1)" >play 1</a>
<a href="listen(2)" >play 2</a>
<a href="listen(3)" >play 3</a>
<a href="listen(4)" >play 4</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:35:05.787

```
$('a').click(function(){
  // you have your mp3 file, play it
    // the way that you'd like
  var mp3 = $(this).prop('href');
}); 
```

# cross-domain - 我们可以在 asp.net webapi 中使用 jsonp-cross 域发布/放置/删除吗？

> ID：10473430
> 
> 赞同：0
> 
> 时间：2012-05-06T19:16:33.717
> 
> 标签：cross-domain, jsonp, asp.net-mvc-4, asp.net-web-api

使用 asp.net webApi

我有 site1 (http://localhost:53723) 和 site2 (http://localhost:64009)。我想从 site2 获取数据到 site1（跨域，不同来源）。

我们可以为此使用jsonp，并且我已经实现了数据。

我们可以使用 jsonp 为跨域（不同来源）发布/放置/删除动词吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T07:44:17.903

你的设计可能有点缺陷，如果你真的需要提出跨域请求，你应该重新考虑。如果你这样做了，那么当你需要支持 POST/PUT/DELETE 动词时，一个更好的解决方案是[CORS](http://www.w3.org/TR/cors/)。Carlos Figueira 有一些关于如何在 ASP.NET Web API 中实现它的不错的博客文章：

*   [在 ASP.NET Web API 中实现 CORS 支持](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/20/implementing-cors-support-in-asp-net-web-apis.aspx)
*   [在 ASP.NET Web API 中实现 CORS 支持 - 采取 2](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/21/implementing-cors-support-in-asp-net-web-apis-take-2.aspx)

# ruby-on-rails - Facebook 没有看到我的 opengraph 元标记

> ID：10473431
> 
> 赞同：0
> 
> 时间：2012-05-06T19:16:39.087
> 
> 标签：ruby-on-rails, facebook, facebook-like, facebook-opengraph, ruby-on-rails-3.2

我已经使用 rails 3.2、ruby 1.9.3、mongoid 建立了一个社区，它都托管在 heroku 上的雪松堆栈上 - www.Meer.li。

我现在遇到的问题是，facebook 根本没有注册我的 opengraph 元标记！我试过运行它 - [http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fmeer.li%2F](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fmeer.li%2F) - 它甚至没有看到它们。我在这里完全不知所措，找不到任何答案。

希望你能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:03:15.140

在您的页面上，您将 Open Graph 对象`type`设置为*活动*，如下所示：

```
<meta property="og:type" content="activity" /> 
```

此类型不存在 Open Graph 对象架构，这可能是您的问题的根源。您可以在此处验证：http: [//graph.facebook.com/schema/og/activity](http://graph.facebook.com/schema/og/activity)。

一些常见的 Open Graph 对象类型已预先定义，并记录在[http://ogp.me/#types](http://ogp.me/#types)中。或者，您可以通过创建您选择的新对象类型来定义具有自定义属性的自定义对象，并且这些对象应以 形式命名`my_namespace:my_type`。

我建议尝试其中一种预定义的对象类型，例如*website*。假设这可以解决您的问题，但您需要更多自定义行为，然后继续使用您选择的自定义字段定义自定义的命名空间对象类型。

# javascript - 创建具有不同 id 的 div

> ID：10473432
> 
> 赞同：1
> 
> 时间：2012-05-06T19:17:23.173
> 
> 标签：javascript, jquery

我有一个关于创建 div 的问题：

我有按钮，当用户点击它时，javascript（或 jquery）需要创建一个 div。但是当用户再次点击时，它应该创建另一个 div，但具有不同的 id。因此，每次用户点击时都应该创建具有不同 id 的 div。

我部分知道如何创建 div，但我不知道如何制作具有不同 ID 的 div。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T19:22:53.240

```
var c = 0; // Counter

$('#add').on('click', function() {
  c += 1;
  $('#parent').append('<div id="child'+ c +'">'+ c +'</div>');
});
```

```
#child1{color:red;}
#child2{color:blue;}
#child3{color:orange;}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<button id="add">ADD</button>
<div id="parent"></div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T19:24:09.117

```
var divcount = 1;
$('button').click(function(){
   $('<div/>', { id:'comment'+divcount++ })
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T19:30:44.770

这是为您准备的随机 ID 生成器。

```
function createParanoidID() {
    return 'id_' + Math.floor(Math.random() * 9e99).toString(36);
}

createParanoidID();  // id_1js7ogi93ixt6x29w9svozegzhal67opdt3l3cf1iqidvgazlyaeh1ha7a74bswsg
createParanoidID();  // id_1fleq6chguuyyljhy39x3g7mg661mg845oj8fphnxgvm0bdgz7t3w0q01jptogvls
createParanoidID();  // id_ajz1ft17ml4eyz08gd3thcvq3fx1ycr927i0h2zgyw8bzq9wurv1gdfogly8tbls 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T19:23:03.717

使用变量作为计数器和“attr”函数来设置 id 属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T19:30:11.113

**HTML**

```
<button id="button">Create Div</button>
<div class="container"></div> 
```

**jQuery：**

```
$('#button').on('click', function() {

    var count = $('div.container div').length,
        id = count + Math.floor(Math.random() * 100);
    $('div.container').append('<div id="'+ id+'">ID of this div is: '+ id +' </div>');

}); 
```

***[演示](http://jsfiddle.net/5nmrx/2/)***

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T19:37:51.803

如果您不想像以前的答案那样使用全局计数器，您始终可以获取子项的数量并将其用作您将创建另一个 id 的相对值。像这样的东西（使用jQuery）：

```
function add_another_div() {
    var wrap_div = document.getElementById("#id_of_div_who_contain_all_childrens");
    var already_childs = $("#id_of_div_who_contain_all_childrens").children().length;
    var div = document.createElement('div');
    var divIdName = 'new_div-'+ (already_childs+1);
    div.setAttribute('id', divIdName);
    wrap_div.appendChild(div); 
} 
```

当然，这要求您所有的孩子都有相同的父母（相同的包装）。如果不是这种情况，并且它们被多个包装器分开，那么只需为它们使用唯一的类名，然后像这样计算它们。我发现这种方法更好、更容易，而不是使用我需要注意的全局计数器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-06T19:40:05.997

这是执行此操作的简单方法。

首先，您需要一个按钮：

```
​&lt;button id="onClickOfThis​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ButtonAnewDivWithArandomIDwillBeInserted"></button>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

然后是javascript：

```
$("#onClickOfThisButtonAnewDivWithArandomIDwillBeInserted").on('click', function() {

var myID = 'randomIDnumber_'+Math.random()+Math.random()+Math.random()+Math.random()+Math.random()+Math.random();
var MyNewElement = document.createElement('div');
    MyNewElement.id = myID.replace(/\./g, '');
    $(MyNewElement).appendTo('body');
}); 
```

这是一个[小提琴](http://jsfiddle.net/adeneo/bgA6Y/)

# c# - 如何制作倒数计时器？

> ID：10473436
> 
> 赞同：0
> 
> 时间：2012-05-06T19:17:46.730
> 
> 标签：c#

我想在 C# WinForms 中制作一个倒数计时器。我希望能够从 DateTimePicker 中选择一个日期，并使计时器倒计时到它显示剩余的天数、小时、分钟和秒。我怎么能这样做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:21:03.760

1.  实例化一个计时器对象
2.  设置间隔
3.  为“tick”事件分配一个处理程序
4.  做你的工作：
    1.  获取日期
    2.  计算剩余时间

应该做的伎俩。

# java - 创建jar文件时出错：NoClassDefFoundError

> ID：10473437
> 
> 赞同：2
> 
> 时间：2012-05-06T19:17:50.277
> 
> 标签：java, executable-jar, noclassdeffounderror

我的代码可以在 Eclipse 中正确编译并运行。在我添加一段代码之前，我还可以通过以下方式成功制作一个 jar 文件：

```
jar cvfm Manifest.txt <Classes> 
```

然后我将它添加到构造函数中的代码中：

```
addWindowFocusListener(new WindowAdapter() {
public void windowGainedFocus(WindowEvent e) {
    JFrame window = (JFrame) e.getSource();
            window.toBack();
}}); 
```

当我尝试创建一个新的 jar 文件并运行它时，我收到 NoClassDefError 错误行指向该代码。具体来说，我得到了这个：

```
Exception in thread "main" java.lang.NoClassDefFoundError: BinaryClock$1
at BinaryClock.<init>(BinaryClock.java:55) 
```

BinaryClock 是我的主类，第 55 行是上面代码的第一行。我不明白为什么它会生成 BinaryClock$1，然后给出错误。

如果需要更多代码或信息，请告诉我。如果不需要，我不想粘贴我的整个源代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T19:21:05.290

该文件将包含在您显示的代码中`BinaryClock$1.class`为您创建的匿名内部类。`WindowAdapter`您应该将该文件包含在 jar 文件中。

基本上，您应该构建一个干净的目录，并将该目录中的*所有内容*包含在您的 jar 文件中。不要试图对此有所选择——如果编译器正在生成一个文件，那是有充分理由的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:30:11.577

您可以直接从 Eclipse 创建 jar 文件。在包资源管理器中右键单击您的项目 -> 导出... -> Java -> JAR 文件。这非常方便，因为它考虑了项目中的所有设置，包括类路径，并允许您指定大量附加选项。此外，您可以将其保存在可以使用外部工具运行的 Ant 文件中。更多信息在这里：[http ://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-33.htm](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-33.htm)

# c - 如果（理论上）我应该被允许，为什么我不能打开文件进行阅读？

> ID：10473442
> 
> 赞同：2
> 
> 时间：2012-05-06T19:18:06.483
> 
> 标签：c, winapi, file-io

我在 C 中有两个项目：

首先：

```
include windows.h
include stdio.h
include tchar.h

int main()
{
     HANDLE hFile = CreateFile("D:\\f.txt",
    GENERIC_WRITE,
    FILE_SHARE_READ,
    NULL,
    OPEN_EXISTING,
    FILE_ATTRIBUTE_NORMAL,
    NULL);

    if(hFile == INVALID_HANDLE_VALUE)
        _tprintf("Error: CreateFile %d\n",GetLastError());

    Sleep(5000);

    return 0;
} 
```

第二：

```
include windows.h
include stdio.h
include tchar.h

int main()
{
     HANDLE hFile = CreateFile("D:\\f.txt",
    GENERIC_READ,
    FILE_SHARE_READ,
    NULL,
    OPEN_EXISTING,
    FILE_ATTRIBUTE_NORMAL,
    NULL);

if(hFile == INVALID_HANDLE_VALUE)
    _tprintf("Error: CreateFile %d\n",GetLastError());

            return 0;
} 
```

第一个程序应该打开文件进行读取，同时允许其他人从中读取。第二个应该打开文件进行阅读。

当我运行程序时，第二个给我错误 32 (ERROR_SHARING_VIOLATION)。

我认为 FILE_SHARE_READ 的全部意义在于允许其他线程/进程打开一个文件只是为了读取，无论它是否已经打开。

谁能帮我解决这个问题？

PS如果文件是一个邮槽，那会有什么不同吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T19:45:04.737

您的 CreateFile() 调用明确拒绝写入共享，您指定了 FILE_SHARE_READ。那行不通，因为第一个程序使用了 GENERIC_WRITE，所以它已经获得了写访问权限。您不能拒绝已获得的权限，因此调用将失败并出现共享冲突错误。

为了使它工作，第二个调用必须指定 FILE_SHARE_WRITE 代替。并处理试图从在不可预测的时间和地点写入的文件中读取的头痛问题。这通常只有在第一个进程只附加到文件并且不查找时才会有一个好的结果。而且您有时会正确处理仅获取部分附加数据，因为其中一些仍停留在缓冲区中或正在写入的过程中。棘手的东西。如果有问题，请考虑在消息模式下使用管道。

从评论中重申，共享标志不控制*你*可以做什么，它们控制*另一个*进程可以对文件做什么。您想要做什么在第二个参数中指定。所以缺少 FILE_SHARE_WRITE 是问题所在，因为它阻止了另一个进程写入文件。但它已经做到了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T18:09:00.923

> 您不能请求与具有打开句柄的现有请求中指定的访问模式冲突的共享模式。CreateFile 将失败，GetLastError 函数将返回 ERROR_SHARING_VIOLATION。

在第一个程序中，您将第三个参数 (dwShareMode) 指定为授予其他进程“读取”权限，并在第二个参数 (dwDesiredAccess) 中为其自身请求“写入”访问权限。

然后在第二个程序中，您在第二个参数中请求“读取”访问权限（这很好）并在第三个参数中仅授予其他进程“读取”权限，这与第一个程序中指定的访问模式冲突（“写”）。第一个程序打开文件是“具有打开句柄的现有请求”。

在第一个程序中，您说“我可以写入“f.txt”。其他人只能读取它。” 而在第二个程序中，您说“我可以阅读“f.txt”。其他人只能阅读它。”，这是一个矛盾，因为第一个程序已经在写入“f.txt”。

正如已经提到的，由两个不同的进程同时读取和写入文件是数据损坏的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T19:22:32.523

我认为[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)文档中的答案：

> 您不能请求与具有打开句柄的现有请求中指定的访问模式冲突的共享模式。CreateFile 将失败，GetLastError 函数将返回 ERROR_SHARING_VIOLATION。

即您打开要写入的文件，但您没有表明可以共享此写入。

# ruby-on-rails - Heroku 使用生产配置而不是暂存配置

> ID：10473445
> 
> 赞同：6
> 
> 时间：2012-05-06T19:18:20.760
> 
> 标签：ruby-on-rails, heroku, production, staging, environments

我在 Heroku 上运行了两个应用程序，一个是 myapp-production，另一个是 myapp-staging。

然而，出于某种原因，登台应用程序使用生产环境配置，而不是我在 staging.rb 中定义的登台配置。

我设置登台应用程序的方式是运行

```
heroku create --stack cedar --remote staging 
```

之后

```
heroku config:add RACK_ENV=staging --app myapp-staging 
```

然而 myapp-staging 仍在使用生产配置。任何想法为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T19:31:38.037

添加 RAILS_ENV=staging 也很重要

```
heroku config:add RAILS_ENV=staging --app myapp-staging 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:25:49.100

`heroku restart`对配置进行此更改后，您是否重新启动了测功机 ( )？

# php - 如何在一个查询中创建 OR 语句？

> ID：10473447
> 
> 赞同：0
> 
> 时间：2012-05-06T19:18:57.113
> 
> 标签：php, mysql

我如何对这样的事情进行 OR 查询？

```
//Query
$sql = "select `Friend_status` from `friendship_box` where 
`system_id` = '$sid' and `friend_id` = '$friendis' OR 
`system_id='$friendis' and `friend_id` = '$sid'";
$query = mysql_query($sql) or die ("Error: ".mysql_error());

while ($row = mysql_fetch_array($query)){
$activity = htmlspecialchars($row['Friend_status']);
}
mysql_free_result($query); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:20:22.957

```
select `Friend_status` from `friendship_box` 
where (`system_id` = '$sid' and `friend_id` = '$friendis')
OR (`system_id`='$friendis' and `friend_id` = '$sid') 
```

你错过了```这里：

```
...OR (`system_id` <-- 
```

# ruby-on-rails - rvm 在 Mac OSX 10.7.3 上安装 rails

> ID：10473448
> 
> 赞同：1
> 
> 时间：2012-05-06T19:19:20.163
> 
> 标签：ruby-on-rails, installation, rvm

希望有人能指出我正确的方向，因为我无法找到以前发布的关于尝试在运行 Lion OSX 10.7.3 的 mac mini 上安装 rails 的问题的答案。我有 ruby​​ 版本 1.8.7 和 rvm 1.12.5 但是当我使用 sudo gem install rails 安装 rails 时，我得到以下信息：

```
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
    ERROR: Failed to build gem native extension.

        /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/json-1.7.0 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/json-1.7.0/ext/json/ext/parser/gem_make.out 
```

gem_make.out 的内容是：

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h 
```

这并没有真正帮助我，所以不确定我错过了什么？任何帮助或指导帮助我解决这个问题将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:39:11.110

rvm 不打算与 sudo 一起使用，除非在多用户安装期间 - 尝试简单`gem install rails`。更好的是，rvm 现在安装了导轨，

```
curl -L get.rvm.io | bash -s stable --rails 
```

查看[RVM 安装页面](https://rvm.io/rvm/install/)了解更多详细信息。如果您仍然遇到问题，请发布您正在尝试的命令。irc.freenode.net 上的#rvm 频道也很有帮助。

为了构建 Ruby 和许多其他 gem，您需要一个工作编译器。不幸的是，Apple 使这变得非常复杂，因此 rvm 中有一个命令可以提供帮助：`rvm requirements`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T19:44:12.580

你不应该使用`sudo gem ...`它基本上会丢失你的环境设置并阻止你使用 RVM。

请按照@tantrix 的说明进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:36:18.550

听起来您需要在您的机器上安装 XCode 以获得构建 Rails gem 所需的头文件。不幸的是，这是一个巨大的安装。

有一次，有一种方法可以在不安装 XCode 的情况下在您的机器上加载（例如）构建 Rails 所需的东西，但我目前似乎找不到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-16T03:08:10.603

就我而言，我运行`rvm requirements`它并帮助我安装**gcc**。但是问题仍然存在，只有在我**重新启动**osx 后才解决。

# html - 如何仅使用 CSS 创建这种复杂的布局？

> ID：10473456
> 
> 赞同：9
> 
> 时间：2012-05-06T19:20:41.537
> 
> 标签：html, css, layout, vertical-alignment

## 概述

我已经阅读了一堆“使用 CSS 垂直居中”的教程：

*   [http://emergentweb.com/test/valign.html](http://emergentweb.com/test/valign.html)
*   [http://blog.themeforest.net/tutorials/vertical-centering-with-css/](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)
*   [http://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)
*   [http://www.alistapart.com/d/footers/footer_variation1.html](http://www.alistapart.com/d/footers/footer_variation1.html)
*   [http://phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

...但是除了垂直居中之外，我的布局中还有一个组件在这些方法中都没有表示出来。

![布局](../Images/a27dd90c69ddc4e261f440222636b6b7.png).

此布局有 2 个组件。首先，将页眉和页脚之间的内容垂直和水平居中（这是一个[粘性页脚](http://www.cssstickyfooter.com/)）。我有一个小提琴代码来演示，但我无法让它在 IE 中工作（代码在帖子的底部）。

*   [http://jsfiddle.net/UnsungHero97/yZPwu/4/embedded/result/](http://jsfiddle.net/UnsungHero97/yZPwu/4/embedded/result/)

第二个组件是绿色箭头所指的位置。这表示一个隐藏元素，当单击某些文本时，该元素将垂直向下扩展。但是，**我不**希望此扩展将内容向上移动，就好像所有内容都居中一样...我希望此元素向下扩展**而不**影响内容的位置，并**在**扩展时将粘性页脚向下推。在大多数情况下，会出现一个浏览器滚动条。

***所以隐藏元素展​​开的效果应该就像一面旗帜从边上掉下来。***

这是隐藏元素展​​开**后**的布局：

![布局2](../Images/e59823d6185336c6fc9f604570762b41.png)

* * *

## 问题

那么我将如何**仅**使用CSS 实现此布局并使其与跨浏览器兼容如果我需要进一步解释以澄清混淆，请告诉我。

* * *

## 到目前为止的代码

注意...我遗漏了[HTML5 BoilerPlate](http://html5boilerplate.com/)附带的一些样板代码。

CSS

```
/* --------------------------------------------------------------------------
   General Layout
   -------------------------------------------------------------------------- */
html,body {
    height: 100%;
}

body {
    background-color: #e3e3e3;
    color: #696969;
}

#wrapper {
    min-height: 100%;
    width: 100%;
    min-width: 936px;
}

/* --------------------------------------------------------------------------
   Header
   -------------------------------------------------------------------------- */
header {
    background-color: #232323;
    height: 108px;
    width: 100%;
    margin: auto;
    padding: 24px 0px 8px 0px;
    position: relative;
}

#header-content {
    height: 100%;
    width: 800px;
    margin: auto;
    position: relative;
}

/* --------------------------------------------------------------------------
   Footer
   -------------------------------------------------------------------------- */
footer {
    background-color: #dbdbdb;
    border-top: 1px solid #bababa;
    height: 30px;
    width: 100%;
    min-width: 936px;
    margin-top: -32px;
    position: relative;
}

#footer-content {
    border-top: 1px solid #f8f8f8;
    height: 100%;
    margin: 0px auto;
    position: relative;
}

#footer-content > div {
    width: 800px;
    margin: 0px auto;
}

/* --------------------------------------------------------------------------
   DOWNLOADZONE
   -------------------------------------------------------------------------- */
#dl-info {
    width: 400px;
    margin: auto;
    display: table-cell !important;
    vertical-align: middle;
}

#show-hide {
    margin: 8px 0px;
    text-align: center;
}

/* --------------------------------------------------------------------------
   General helper classes
   -------------------------------------------------------------------------- */
.zone {
    background: none;
    border: 0px none;
    height: 100%;
    min-height: 100px;
    width: 100%;
    padding-top: 140px;
    padding-bottom: 31px;
    display: table;
    position: absolute;
    top: 0px;
    bottom: 0px;
    overflow: hidden;
}

.border {
    border: 1px solid #454545;
}

.clear {
    clear: both;
}

/* Hide from both screenreaders and browsers: h5bp.com/u */
.hidden { 
    display: none !important;
    visibility: hidden;
}

/* Hide only visually, but have it available for screenreaders: h5bp.com/v */
.visuallyhidden { 
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
}

/* Extends the .visuallyhidden class to allow the element to be focusable when navigated to via the keyboard: h5bp.com/p */
.visuallyhidden.focusable:active, 
.visuallyhidden.focusable:focus { 
    clip: auto;
    height: auto;
    margin: 0;
    overflow: visible;
    position: static;
    width: auto;
}

/* Hide visually and from screenreaders, but maintain layout */
.invisible { visibility: hidden; }

/* Contain floats: h5bp.com/q */
.clearfix:before, 
.clearfix:after { 
    content: "";
    display: table;
}

.clearfix:after { clear: both; }

.clearfix { *zoom: 1; } 
```

​ HTML

```
<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!-- misteroneill.com/improved-internet-explorer-targeting-through-body-classes/ -->
<!--[if lt IE 7]> <html class="no-js ie ie6 lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]> <html class="no-js ie ie7 lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 8]> <html class="no-js ie ie8 lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 9]> <html class="no-js ie ie9 lt-ie9" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]>
<!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
    <title>Layout</title>
</head>

<body class="select-none">

    <div id="wrapper">

        <header>
            <div id="header-content">
            </div><!-- end #header-content -->
        </header><!-- end header -->

        <div id="downloadzone" class="zone clearfix">

            <div id="dl-info">
                <div class="border">
                    <div id="dl-button">Icon Here</div>
                    <div id="dl-extras">
                        <div id="dl-filename">text text text</div>
                        <div id="show-hide">CLICK TO SHOW/HIDE HIDDEN ELEMENT</div>
                    </div>
                </div>
            </div>

        </div><!-- end #downloadzone -->

    </div><!-- end #wrapper -->

    <footer>
        <div id="footer-content">
            <div class="border-highlight">
            </div><!-- end .border-highlight -->
        </div><!-- end #footer-content -->
    </footer><!-- end footer -->

</body>
</html>
​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T20:36:04.590

如果我理解正确（如果我在这里回答错误的问题，我深表歉意），您希望未知高度的元素水平和垂直居中，其下方可能有其他元素不应该影响显示时的位置?

如何使用溢出？[这是一个演示。](http://jsfiddle.net/minitech/EZ5g2/)我很快就会把代码放在这里。

兼容性警告：使用的垂直居中方法在 Internet Explorer 7 或更低版本中不起作用。

# python - 将html实体转换为文本

> ID：10473458
> 
> 赞同：0
> 
> 时间：2012-05-06T19:20:56.863
> 
> 标签：python, beautifulsoup, html-entities, html-parsing

我有`&#146;`我的 HTML 文件（这是一个正确的大引号），我想将它转换为文本（如果可能的话）。

我尝试使用 HTMLParser 和 BeautifulSoup 但没有成功。

```
>>> h = HTMLParser.HTMLParser()
>>> h.unescape("&#39;")
u"'"
>>> h.unescape("&#146;")
u'\x92' # I was hoping for a right curly quote here. 
```

我的目标很简单：获取 html 输入并输出所有文本（没有任何 html 代码）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:23:22.937

“右花引号”不是 ascii 字符。`u'\x92'`是代表它的unicode字符的python表示，而不是一些“html代码”。

要在您的终端中正确显示它，请使用`print h.unescape("&#146;").encode('utf-8')`（或您终端的字符集）。

# java - 为什么在销毁有状态 EJB 时使实例变量无效？

> ID：10473463
> 
> 赞同：0
> 
> 时间：2012-05-06T19:21:23.777
> 
> 标签：java, jakarta-ee, ejb, javabeans, stateful

在有状态 EJB 上的 @remove 注释示例中，带注释的方法使 bean 的实例变量无效。为什么？销毁 bean 肯定会破坏其内容，即任何变量？

谢谢，乔恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:32:04.833

将对象的所有字段设置为`null`有两个有用的效果：

*   它提供了一个硬屏障，防止逻辑错误导致无效对象被重用。应用程序会崩溃，而不是默默地产生不正确的结果。

*   它通过从对象引用图中删除边来帮助 Java VM 垃圾收集器，从而提高整体性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T19:27:59.450

您可以发布示例源代码吗？或者不要。`null`不需要主动设置- 当 EJB 被销毁并很快被垃圾收集时，它引用的所有对象（当然前提是没有其他对它们的引用）也将被垃圾收集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T09:24:18.607

如果 ejbRemove()，实例的属性被擦除干净并且客户端仍然具有对实例的引用。客户端仍然可以访问相同的对象。这是不可取的。

# ios - NSDictionary 只能访问一个条目

> ID：10473465
> 
> 赞同：1
> 
> 时间：2012-05-06T19:21:51.847
> 
> 标签：ios, nsdictionary

我有一组字典，字典中只有一个条目。

```
 ___       ___________
 |___| --->|__|__|__|__|  Array of Dictionary
 |___|      __|__
 |___|      |K|V| Dictionary
 |___| 

 Array of Array

My dictionary content is <NSString*, UIImage*> 
```

如何检索我的字典的值。

代码片段：

```
for (int i=0 ; i< [imagesToFill count]; i++) {

    NSDictionary* dict = [imagesToFill objectAtIndex:i];

    UIImage*  img =   ??? [dict]  // How to retrive value from above dict which has only 1 entry
    NSString* imgPath =  ??? 

}

 Note: Each dict has <NSString*, UIImage*> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:30:36.173

您可以像这样获取字典的所有键：

```
NSArray *allKeys = [dictionary allKeys]; 
```

当然，所有值也是如此：

```
NSArray *allValues = [dictionary allValues]; 
```

然后只需使用`objectAtIndex:0`(or `lastObject`) 来访问您的键或值。

两个数组的顺序都没有定义（即随机）。在你的情况下这不会是一个问题。但请记住这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T19:30:44.833

如果您有密钥，则可以访问特定密钥的字典元素，例如：

```
UIImage* img = [dict objectForKey:@"myKey"]; 
```

如果您不想按键访问，则可以将字典转换为数组并访问其第一个元素，例如：

```
NSArray * values = [dict allValues];
UIImage* img = [values objectAtIndex:0]; 
```

# css - watir-webdriver 可以单击 css 背景图像或浏览器中的任意位置吗？

> ID：10473468
> 
> 赞同：2
> 
> 时间：2012-05-06T19:22:24.723
> 
> 标签：css, watir-webdriver

我有一个来自 extjs 的“拆分按钮”，很像[http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/kitchensink/index.html的 extjs 演示页面上的“菜单按钮”演示#基本工具栏](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/kitchensink/index.html#basic-toolbar)。该按钮的右侧有一个下拉箭头，它是父标签上的 CSS 背景图像。单击右侧时，将下拉菜单，其中包含按钮操作的其他选择。我可以单击按钮或 em，但在这两种情况下，菜单都不会下拉。

我还尝试以不同的顺序（mousedown、mouseup、click 等）发送按钮和 em javascript 事件，但我仍然只能触发主按钮而无法显示下拉菜单。

不知何故，我需要在该背景图像上精确单击鼠标以显示菜单。有没有办法让 watir-webdriver 点击浏览器中的任意位置？当然，假设我可以让 watir-webdriver 给我按钮或 em 的当前坐标。还是有其他方法可以触发下拉？

我在谷歌watir论坛上发布了类似的询问，但仍然没有解决方案。感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T08:45:51.033

试试这个，就像一个魅力：

```
 b.em(:class, "x-btn-split x-btn-split-right").button(:class, "x-btn-center").send_keys :down 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T19:57:43.380

如果您只是尝试扩展菜单并且没有专门测试“点击”事件，则可以发送向下键：

```
browser.div(:id, 'splitbutton-1022').send_keys :down 
```

这适用于 Firefox 上的示例站点。我没有尝试任何其他浏览器。

# sqlite - 如何从黑莓中的一个选项卡（窗格管理器模型）导航到另一个选项卡？

> ID：10473476
> 
> 赞同：0
> 
> 时间：2012-05-06T19:23:04.410
> 
> 标签：sqlite, blackberry, user-interface, tabs, navigation

我在我的黑莓应用程序中创建了 3 个选项卡。第一个选项卡允许用户选择特定日期范围并搜索条目。搜索按钮位于第一个选项卡上。结果从 sqlite 数据库中获取并显示在第三个网格视图中标签。这是我用于创建选项卡的主要代码：

```
 // setup the tab model with 3 tabs
  PaneManagerModel model = new PaneManagerModel();
  model.enableLooping( true );

  // setup the first tab
  VerticalFieldManager vfm = new VerticalFieldManager( 
      Field.USE_ALL_HEIGHT | Field.USE_ALL_WIDTH |
      Manager.NO_VERTICAL_SCROLL | Manager.NO_HORIZONTAL_SCROLL );
  LabelField lbl = new LabelField( "Content for tab 1", Field.FOCUSABLE );
  vfm.add( lbl );

  MyLabelField myLbl = new MyLabelField( "Tab 1" );
  NullField nullFld = new NullField( Field.FOCUSABLE );
  HorizontalFieldManager hfm = new HorizontalFieldManager();
  hfm.add( nullFld );
  hfm.add( myLbl );

  Pane pane = new Pane( hfm, vfm );
  model.addPane( pane );

  // setup the second tab
  vfm = new VerticalFieldManager( 
      Field.USE_ALL_HEIGHT | Field.USE_ALL_WIDTH |
      Manager.NO_VERTICAL_SCROLL | Manager.NO_HORIZONTAL_SCROLL );
  lbl = new LabelField( "Content for tab 2", Field.FOCUSABLE );
  vfm.add( lbl );

  myLbl = new MyLabelField( "Tab 2" );
  nullFld = new NullField( Field.FOCUSABLE );
  hfm = new HorizontalFieldManager();
  hfm.add( nullFld );
  hfm.add( myLbl );

  pane = new Pane( hfm, vfm );
  model.addPane( pane );

  //Setup the third tab
  vfm = new VerticalFieldManager( 
      Field.USE_ALL_HEIGHT | Field.USE_ALL_WIDTH |
      Manager.NO_VERTICAL_SCROLL | Manager.NO_HORIZONTAL_SCROLL );
  lbl = new LabelField( "Content for tab 3", Field.FOCUSABLE );
  vfm.add( lbl );

  myLbl = new MyLabelField( "Tab 3" );
  nullFld = new NullField( Field.FOCUSABLE );
  hfm = new HorizontalFieldManager();
  hfm.add( nullFld );
  hfm.add( myLbl );

  pane = new Pane( hfm, vfm );
  model.addPane( pane ); 
```

目前结果正确显示在第三个选项卡中。但它们不在第一个选项卡的按钮单击上。

我已将我的 SELECT 语句包含在第三个选项卡内容中。相反，我只想在单击第一个选项卡中的搜索后才显示第三个选项卡结果。直到那时我希望我的第三个选项卡被禁用或不活动。

任何对此有任何想法的人请分享。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:28:40.600

你可以打电话[`PaneManagerView.jumpTo(int,int)`](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/component/pane/PaneManagerView.html#jumpTo%28int,%20int%29)。

# c# - C# linq 分组依据

> ID：10473478
> 
> 赞同：3
> 
> 时间：2012-05-06T19:23:08.797
> 
> 标签：c#, linq

如何使用 linq 根据一个人的钱对以下列表进行计数、分组和排序？

```
 Person[] names = { new Person{ Name = "Harris", Money = 100 }, 
                                new Person{ Name = "David", Money = 100 },
                                new Person{Name = "Harris", Money = 150},
                                new Person{Name = "Mike", Money = 100},
                                new Person{Name = "Mike", Money = 30},
                                new Person{Name = "Mike", Money = 20} }; 
```

结果将返回：

```
Harris 250 
Mike 150 
David 100 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T20:09:45.023

```
 var personMoney = names.GroupBy(x=>x.Name)
                   .Select(x=>new {Name = x.Key, AllMoney = x.Sum(y=>y.Money)})
                   .OrderByDescending(x=>x.AllMoney).ToList(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-06T19:25:10.713

```
from p in names
group p by p.Name into g
order by g.Key
select new { Name = g.Key, Amount = g.Sum(o => o.Amount) } 
```

# joomla - 需要 Joomla/Virtuemart 帮助

> ID：10473479
> 
> 赞同：0
> 
> 时间：2012-05-06T19:23:11.097
> 
> 标签：joomla, virtuemart

运行 Joomla 1.5.21 和 Virtuemart1.1.5

这是我到目前为止所做的......

我复制了一个运行 Joomla 和 Virtuemart 的现有网站，编写脚本并创建（使用所有现有数据）MySql 表，更改表的前缀并更新 Joomla 配置文件以指向新数据库（更改用户名/密码和表前缀）。但是现在，当我登录到后端并更新一个美德玛特项目时，我从中复制该站点的站点得到了更新。

所以我的问题是，数据库设置在哪里？

AHIA，拉里R....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:24:35.683

在 `administrator/com_virtuemart/virtuemart.cfg.php`更改您的 SITEURL

# asp.net - 如何在 razor 代码块中包含 ul 标签？

> ID：10473481
> 
> 赞同：5
> 
> 时间：2012-05-06T19:23:21.403
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, c#-3.0

为什么下面的代码可以正常工作...

```
 <ul class="searchList">
            @if (Model.Count() > 0)
            {
                foreach (var partner in Model)
                {
                    <li>
                        @Html.ActionLink(@partner.Name, "Details", "Partner", new { id = partner.AID }, null)<br />
                        @partner.Street<br />
                        @partner.CityStateZip<br />
                        @if(!string.IsNullOrEmpty(partner.Phone))
                            {
                               @partner.Phone<br />
                            }
                        @(partner.Distance) miles<br />
                    </li>
                }
            }
        </ul> 
```

但是这段代码不能正常工作......

```
 @if (Model.Count() > 0)
            {
                <ul class="searchList">

                        foreach (var partner in Model)
                        {
                            <li>
                                @Html.ActionLink(@partner.Name, "Details", "Partner", new { id = partner.AID }, null)<br />
                                @partner.Street<br />
                                @partner.CityStateZip<br />
                                @if(!string.IsNullOrEmpty(partner.Phone))
                                    {
                                       @partner.Phone<br />
                                    }
                                @(partner.Distance) miles<br />
                            </li>
                        }

                </ul>
             } 
```

第二个错误返回以下错误...

编译器错误消息：CS0103：名称“合作伙伴”在当前上下文中不存在。

我发现 Razor 的代码混合规则很难遵循。任何给出规范解释的链接将不胜感激。

赛斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T19:26:28.093

您需要前缀`foreach`with `@`：

```
@foreach (var partner in Model) 
```

正在将`<ul>`Razor 设置回标记模式，因此您需要添加`@`以告诉它返回到代码块中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T19:26:21.943

在第二个示例中，您需要`@foreach`从标记转换为代码。

在第一个示例中，您不需要，因为`if`块的直接内容已经是代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T19:44:33.943

您应该[以此](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)作为参考，您将永远不会再遇到此类问题。:)

# python - 我在滥用 flush() 调用吗？

> ID：10473483
> 
> 赞同：1
> 
> 时间：2012-05-06T19:23:26.643
> 
> 标签：python, database, sqlalchemy

我有一个 Web 应用程序，用户可以在其中创建和编辑文章。每次文章编辑都会创建一个新修订。我使用 SQLAlchemy 作为 ORM。

现在，每次我创建一篇文章时，都会发生以下情况：

```
 # Create the article
  article = Article(...)
  session.add(article)
  session.flush()

  # Create the revision
  revision = Revision(article.id, ...)
  session.add(revision)
  session.flush()

  # Set article's `current_revision_id` field to the revision's id
  article.current_revision_id = revision.id

  session.commit() 
```

我每次都必须调用 flush() 的原因是我可以获得文章和修订的 ID。Article 和 Revision 都不能提交到数据库，直到它们引用了彼此的 id。

我的问题是这样做是否明智。如果很多人同时创建一篇文章，是否有可能从 flush() 调用分配的 ID 变得不同步？这可以作为“交易”接受吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T19:25:14.980

不要在代码中使用 ID，而是使用 SQLAlchemy 的[**关系系统**](http://docs.sqlalchemy.org/en/latest/orm/relationships.html)。

```
article = Article(...)
revision = Revision(article, ...)
article.current_revision = revision
session.add(article)
session.commit() 
```

# javascript - 在Javascript中将图像转换为RGB数组

> ID：10473484
> 
> 赞同：20
> 
> 时间：2012-05-06T19:23:34.053
> 
> 标签：javascript, canvas, rgb

是否可以从 Javascript 中的 PNG 或 BMP 图像中获取像素数组？我想从图像中获取一个 RGB 数组，以便我可以操作像素数组，然后在画布上绘制修改后的图像。

**更新：**我在这里找到了一个完全相同的副本：[如何使用 javascript 在页面中获取图像的 RGB 值？](https://stackoverflow.com/questions/2754865/how-to-get-the-rgb-value-of-an-image-in-a-page-using-javascript)

但是，答案并没有详细说明如何实际解决此问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-07T01:06:55.557

网上有一百个关于使用 HTML Canvas [imageData](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-getimagedata)的教程，它获取画布的 RGBA 值。搜索 canvas imageData 你会发现很多信息。

你所要做的就是：

```
ctx.drawImage(img, 0, 0);
var imgData = ctx.getImageData(x, y, width, height).data; 
```

imgData 现在是一个数组，其中每 4 个位置是每个像素。`[0][1][2][3]`第一个像素也是如此`[r][g][b][a]`。

# mvvm - 在动态创建对象时避免使用控制反转的服务定位器

> ID：10473487
> 
> 赞同：1
> 
> 时间：2012-05-06T19:23:55.950
> 
> 标签：mvvm, dependency-injection, inversion-of-control, service-locator

我有一个基于 MVVM 的 WPF 应用程序，带有 Caliburn.Micro 和 Ninject。我有一个名为 ShellViewModel 的根视图模型。它有几个在 Caliburn 的 Bootstrapper 中配置的依赖项（通过构造函数注入）。到目前为止，一切都很好。

在某个地方，有一个带有几个按钮的 MenuViewModel，它们依次打开具有自己依赖项的其他视图模型。这些视图模型不是在创建根对象期间创建的，但我仍然想从我的 IoC 容器中将依赖项注入它们。

我已经阅读了关于[服务定位器与依赖注入](https://stackoverflow.com/questions/1557781/whats-the-difference-between-the-dependency-injection-and-service-locator-patte)的这个问题，并且我理解所提出的要点。

然而，我的印象是，我的 MenuViewModel 需要能够访问我的 IoC 容器才能正确注入动态制作的视图模型......这是我试图避免的事情。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:23:30.963

是的，我相信你可以做得更好。

考虑一下，如果没有按需需求，那么显然您可以使这些视图模型成为`MenuViewModel`链上的依赖项，依此类推，直到您到达对象图的根（the `ShellViewModel`），并且容器会将所有内容连接起来。

您可以在对象图中放置一个“防火墙”，方法是用可以构造依赖关系的东西来代替依赖`MenuViewModel`关系本身。容器是这项工作的明显选择，恕我直言，从实际的角度来看，这是一个足够好的解决方案，即使它不是那么纯粹。

但也可以用专用*工厂*代替容器；该工厂将依赖容器*并*为`MenuViewModel`. 访问属性将导致容器解析对象并返回它们（访问器方法也可以代替属性工作；更合适的是完全另一个讨论，所以只需使用您认为更好的任何内容）。

看起来你并没有真正改变现状，但如果`MenuViewModel`直接依赖容器，情况就不一样了。在那种情况下，通过查看它的公共接口，您将不知道真正的依赖关系`MenuViewModel`是什么，而现在您会看到对类似的东西有依赖关系

```
interface IMenuViewModelDependencyFactory
{
    public RealDependencyA { get; }
    public RealDependencyB { get; }
} 
```

这提供了更多信息。如果你看一下具体的公共接口的`MenuViewModelDependencyFactory`事情也会好很多：

```
class MenuViewModelDependencyFactory : IMenuViewModelDependencyFactory
{
    private Container container;

    public MenuViewModelDependencyFactory(Container container) { ... }

    public RealDependencyA { get { ... } }
    public RealDependencyB { get { ... } }
} 
```

这里不应该混淆`MenuViewModelDependencyFactory`容器的用途，因为它非常专业。

# android - 用另一个更改资源图像，重新编译，但旧图像仍然出现

> ID：10473489
> 
> 赞同：0
> 
> 时间：2012-05-06T19:23:59.567
> 
> 标签：android, intellij-idea, android-resources

有没有人遇到过这样的情况：你用另一个同名的图片（例如，btn.png和其他btn.png）更改资源图片，然后重新编译项目并将应用程序加载到手机或模拟器中，但是旧**图像仍然出现**？

我不知道如何解决这个问题。我尝试从设备上卸载该应用程序，然后安装更改​​后的应用程序，但仍然没有出现新图像。

我知道我可以选择一个新的文件名并且它会起作用，但是如何强制资源重建？

PS。我意识到你可以手动重建项目，所以如果有人有更好的解决方案（更快），请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:19:11.937

不幸的是，如果你用另一个同名的图像替换一个图像，你**必须重建项目**，因为它只会触发资源重建。

我测试了不同的方法，项目重建是重新映射资源文件夹中的 PNG 文件的唯一命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:51:29.843

我遇到过这个问题。尝试做所有这些

1.  1.检查所有资源文件夹并确保之前的图像不存在于任何文件夹中。

    2.尝试检查新图像的名称，并检查天气是否与之前的相同。

    3.清除模拟器或手机中的所有数据后尝试卸载应用程序。希望制作所有这些东西肯定会解决这个问题。我通过做所有这些得到了它。

    4.还可以在清除项目中的 bin 和 gen 文件夹后尝试运行项目

.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:27:49.057

确保资源文件夹中的图像被替换为新图像。在这种情况下，它必须在您进行干净构建后显示新图像。

# jquery - 不同链接的不同大小的 Fancybox 窗口（iframe）

> ID：10473490
> 
> 赞同：1
> 
> 时间：2012-05-06T19:24:02.837
> 
> 标签：jquery, hyperlink, size, fancybox

我的网页上有一些链接。当您单击它们时，会打开带有 iframe 的 Fancybox 窗口，效果很好。但是，我想更改窗口大小，以便在不同的链接上有所不同。

我怎样才能完成我想要的？我应该更改 Fancybox.js 文件吗？

这就是我的链接的外观。

链接1：

```
<a class='various' data-fancybox-type='iframe', href='/blog/' + blog._id.toHexString())> 
```

链接2：

```
<a class='various' data-fancybox-type='iframe', href='/image/' + image._id.toHexString())> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:27:32.650

通过 Jquery 的

```
$('#divid').fancybox({
            padding: 0,
            scrolling: 'yes',
            autoScale: true,
            autoDimensions: false,
            height: xxx,
            width: xxx
        }); 
```

# git - 在应用有效的工作流程之前创建 git diff 补丁然后手动编辑？

> ID：10473491
> 
> 赞同：1
> 
> 时间：2012-05-06T19:24:04.567
> 
> 标签：git, merge, workflow, integration, upgrade

好的，有 2 个项目，A 和 B。我正在处理的项目“B”在“A”的下游。也就是说，B 与 A 相比，添加了不同的功能，并朝着不同的方向成长。但它们有着共同的历史。

不久前，B 会随着 A 的每个主要版本定期更新而得到维护。但现在情况已不再如此。

在追踪 B 中的内存泄漏时，我发现它在一年前已在 A 中修复，然后对 A 进行了大量更改以提高性能。

决定将所有这些更改集成到项目 B 中。

所以这就是我现在正在做的。显然，有不少困难使这项任务难以管理。但它们都与我的问题无关。

我开始逐个创建 diff 的组件，以查看发生了什么变化并决定可以包含哪些内容，而不会破坏 A 中不存在的 B 中的功能。

我为每个组件创建了一个新分支（为了使其更易于管理 - 识别在特定组件之外更改代码的引用是什么）最初认为我可以进行合并，我似乎记得在之前使用合并它会产生冲突而不是过度写作；但是无论出于何种原因，当我尝试将 A 中的组件与 B 合并时，大部分 B 独有的代码都丢失了。

不过，什么可以起作用，我不愿意花时间在我不知道的可能出现坑的技术上，只是编辑从差异创建的补丁。

然后应用编辑的补丁。

因为在补丁中我可以并排看到代码的两面，我可以删除不希望删除代码的位 (-)，并逐个考虑冲突。

有没有人试过这个？或者有人知道处理这类问题的更主流技术吗？

另一个问题是如何在不被 git 系统破坏的情况下更改补丁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:18:51.247

我建议不要编辑 git 补丁，而是挑选有趣的提交，并在工作目录中修改应用的差异：

```
git cherry-pick --no-commit upstream/commit1
(edit changes in working directory)
git commit 
```

如果你有很多潜在有趣的提交，你可以尝试交互式 rebase。

```
git checkout upstream/master -b upstream-new
git rebase -i master 
```

通过这种方式，您可以轻松地查看和挑选大量提交 - 例如，仅选择仅影响子系统的提交。您可以通过运行来帮助选择过程`git log --oneline subsystem1/ >/tmp/subsystem1_commits.txt`- 它将创建一个语法与`git rebase -i`.

关于您的工作流程：我认为您的问题没有简单的解决方案。如果上游仓库和你的分支长期分歧，你将失去 git 的主要优势：易于分支*和合并*。您将剩下的几乎是手动修补系统，这总是很痛苦。但是，如果您可以每年更新一次或两次上游存储库，则可能值得执行以下操作：

*   从上游/master 版本开始，将您的提交应用到它（=> 您的 master-1 分支）
*   需要时从上游/主服务器中挑选修补程序
*   当你有时间更新到上游分支时，将你的 master-1 分支重新定位到上游/master，但没有已经挑选好的修补程序（你可以用 来做到这一点`git rebase -i`）。我们称这个分支为 master-2。

这样，您将拥有以下历史记录：

```
A-A-A-A-A- (upstream/master at the beginning)
          \
           -B-B-A-B (your master-1 branch, with a cherry-pick)
          \
           -A-A-A-A-A-A-A-A -B-B-B (your master-2 branch, after the rebase) 
```

# objective-c - ios导航控制器

> ID：10473495
> 
> 赞同：0
> 
> 时间：2012-05-06T19:24:35.190
> 
> 标签：objective-c, ios, uinavigationcontroller

我有这个带有按钮 xib 的按钮控制器。此按钮包含在我的其他视图中。我遇到的问题是按钮单击导航。

```
-(IBAction) gotoReport:(id) sender
{   NSLog(@"ll");
    ReportStepOne *report = [[ReportStepOne alloc]init];
    [self.navigationController pushViewController:report animated:YES];
    [report release];
} 
```

我可以看到日志消息，但导航不起作用。我想我不应该使用自我？

appDelegate.H

```
UINavigationController *navCon; 
```

appDelegate.M

```
navCon = [[UINavigationController alloc] init];
    [navCon setNavigationBarHidden:YES];
    Login *login = [[Login alloc] init];
    [navCon pushViewController:login animated:NO];
    [login release];
    [window addSubview:navCon.view];
    [self.window makeKeyAndVisible]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:46:01.083

你的第一个例子`IBAction`是正确的，它应该推动视图。如果它没有按下，您需要检查您的 XIB 以确保您已将正确的按钮连接到此`IBAction`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:24:54.977

在您的应用程序委托中，改为执行以下操作：

```
Login *login = [[Login alloc] init];

// Make navController a property..
self.navController = [[UINavigationController alloc] initWithRootViewController:login];

//This is the key..
[[self window] setRootViewController:self.navController];
[self.navController setNavigationBarHidden:YES];

[login release];
[self.window makeKeyAndVisible]; 
```

# php - php 语法带“:”，用还是不用？

> ID：10473498
> 
> 赞同：2
> 
> 时间：2012-05-06T19:25:04.273
> 
> 标签：php, syntax

我喜欢使用带有“:”和“end-stuff”的语法。

```
if($var=='patate'):
   echo 'excellent';
else :
   ...
endif; 
```

我知道 IDE 在折叠代码时习惯于 {} 语法，但除此之外，还有什么理由不使用这种“：”语法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T19:27:12.390

不要使用它。它很丑陋，人们通常期望他们习惯的花括号语法。在同一个文件中混合 PHP 和 HTML 时（即使用 PHP 作为模板引擎时）最常见 - 但无论如何您都不应该这样做，至少在同一个文件还包含您的应用程序逻辑的情况下不应该这样做。

自动缩进脚本也很难正确缩进你的代码，因为它们通常只知道*一个大括号 = 一个更多/更少的缩进级别*。

但是，如果你喜欢`:`而不是`{`看看 python。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T19:57:37.113

如果您有混合 PHP 和 HTML 块的习惯，则可以偶尔使用替代语法，例如

```
<?php if ($something): ?>
<h2>blah blah blah</h2>
<?php endif; ?> 
```

但是，如果您使用的是不错的语法高亮编辑器，那么使用它几乎没有任何意义，因为着色将为您提供有关什么是 PHP 和什么是 HTML 所需的所有上下文提示。像 VIM 这样让你在括号/大括号上“弹跳”的编辑器也否定了这种需要——你不能在“endif”上弹跳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T20:05:18.987

人们反对使用替代语法的主要原因是某些服务器配置可能不允许它。如果您不控制服务器环境或需要与他人共享代码，那么最好避免使用替代语法。

# python - 在Python中从html中提取电话号码

> ID：10473503
> 
> 赞同：0
> 
> 时间：2012-05-06T19:25:22.240
> 
> 标签：python, beautifulsoup

电话号码是隐藏的（555 143 ....），直到用户单击它“555 1437662”，但在`onclick`参数中...我可以使用哪些选项从下面的 HTML 中获取电话号码...？

```
<html>
    <body>
        <h3 id="resultTelBar">
            <span onclick="showFullNumber(this, '555 1437662');
                dcsMultiTrack('DCSext._mainreq','','DCSext.linktype',
                'telephone show','DCSext.linkplace','','DCSext.linkvalue','555 1437662',
                'DCSext.show_listingId','SA_6597739_4638_003722_8396251_IYMX',
                DCSext.show_zoningUsed','0','DCSext.show_resultNumber','1')"
                >086 143Â ....</span>
        </h3>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:40:26.747

我注意到`beautyfulsoup`标签，但建议您使用[lxml](http://lxml.de/)变体。如果你喜欢，你可以使用它。我不太关心正则表达式，如果它在某些情况下不起作用，你可以改进它。

```
>>> import re
>>> from lxml import etree
>>> etree.fromstring(u'''YOUR HTML''')
>>> onclick = html.xpath('//h3[@id="resultTelBar"]/span/@onclick')[0]
>>> print re.search("showFullNumber\(this,\s*'([\d ]+)'", onclick).group(1)
555 1437662 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:36:33.713

信息嵌入在标记属性中作为字符串包含的脚本中？那是……非常不幸。

（编辑：为了澄清，我假设这里的问题是“鉴于这个不幸的 html/javascript 作为输入，我怎样才能用 BeautifulSoup 解析出电话号码”。如果这不正确，请告知。）

我想最简单的事情是隔离该javascript字符串，然后使用正则表达式来提取数字。然而，正则表达式部分将是一个 PITA 并且相当脆弱。

`soup.find('h3', id='resultTelBar').span['onclick']`会得到你的字符串，假设汤是 BeautifulSoup 对象。然后用于`re.search`解析第一行中的数字。您使用的确切正则表达式取决于结果的规则性（每个 javascript 字符串是否以这种方式格式化，包括换行符？等）以及您需要它有多健壮，例如外国电话号码，或者万一 javascript此数据的未来版本略有调整。

# c++ - 尝试将元素添加到现有节点时程序崩溃

> ID：10473510
> 
> 赞同：1
> 
> 时间：2012-05-06T19:26:09.693
> 
> 标签：c++, elements, tinyxml

我正在尝试将元素添加到已经存在的节点/父级中，如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="true"?>
   <BitComet Version="1.0">
      <MyShares>
         <bt title="Sound of Music" save_path="C:\Downloads|Sound of Music" task_finished="true" category="software" size="7126369" hash="31e0ded5b561ed698c151e72d5f20d9b75f03b12"/>
      </MyShares>
   </BitComet> 
```

--

```
TiXmlDocument xml(pf);
if(!xml.LoadFile()) return;

TiXmlElement* root = xml.FirstChildElement("BitComet");

TiXmlElement* parent = xml.FirstChildElement("MyShares")

TiXmlElement* elem = new TiXmlElement( "bt" );
elem->SetAttribute("title", "TiTlE");
elem->SetAttribute("save_path", "C:\\Downloads|Test");
elem->SetAttribute("task_finished", "true");
elem->SetAttribute("category", "software");
elem->SetAttribute("size", 7126369);
elem->SetAttribute("hash", "hash_here");
xml.LinkEndChild( elem );

xml.LinkEndChild( parent );

xml.LinkEndChild( root );

xml.SaveFile(pf); 
```

我不确定发生了什么，但是当它执行那段代码时它会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:29:29.577

我认为您访问`<MyShares>`标签的调用应该是

```
TiXmlElement* parent = root -> FirstChildElement("MyShares"); 
```

此外，您想要的唯一`LinkEndChild`电话如下：

```
parent->LinkEndChild( elem ); 
```

# jpa-2.0 - 为什么我不能在 jpa 中实例化 managedbean？

> ID：10473511
> 
> 赞同：1
> 
> 时间：2012-05-06T19:26:17.407
> 
> 标签：jpa-2.0

我正在尝试开发一个小型 Web 应用程序作为即将到来的决赛的培训，但我不知道自己做错了什么。

这些是我的 * *Entities* *L`Kunde`和`Konto`(many2many-relationship)，自动创建的表`Kunde_Konto`只有我的实体的两个主键。

```
@Entity
@NamedQueries({
    @NamedQuery(name="findKundeById", query="select k from Kunde k where k.svnr = :svnr"),
})
public class Kunde implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Column(precision=4, scale=0)
    private Long svnr;

    @ManyToMany
    private List<Konto> konten;
}

@Entity
@NamedQueries({
    @NamedQuery(name="findKontoByBesitzer", query="select k from Konto k join k.besitzer b where b.svnr = :svnr")
})
public class Konto implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Column(precision=4, scale=0)
    private Long knr;

    @ManyToMany(mappedBy="konten")
    private List<Kunde> besitzer;
} 
```

这是我的**托管豆**：

```
@ManagedBean
@SessionScoped
public class KundenKontoList implements Serializable {
    private FacesContext fc = null;
    private HttpServletRequest hsr = null;
    private HttpSession hs = null;

    @EJB
    private KontoFacadeLocal kontoFacade;

    @EJB
    private KundeFacadeLocal kundeFacade;

    private Kunde k;
    private List<Konto> konten;

    /**
     * Creates a new instance of KundenKontoList
     */
    public KundenKontoList() {
        fc = FacesContext.getCurrentInstance();
        hsr = (HttpServletRequest) fc.getExternalContext().getRequest();
        hs = hsr.getSession();

        k = (Kunde) hs.getAttribute("kunde");
        konten = kontoFacade.findKontoByBesitzer(k);
    }
} 
```

例外

```
com.sun.faces.mgbean.ManagedBeanCreationException: Klasse at.pf.controller.KundenKontoList kann nicht instanziiert werden. 
```

翻译的意思是`KundenKontoList`不能被激活，被抛出在行：

```
konten = kontoFacade.findKontoByBesitzer(k);

//method in the facade:
@Override
public List<Konto> findKontoByBesitzer(Kunde k) {
    Query q = em.createNamedQuery("findKontoByBesitzer");
    q.setParameter("svnr", k.getSvnr());
    return q.getResultList();
} 
```

我认为它与 . 有关系`kontoFacade`，但我不知道确切的问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:04:00.447

managedbean 的 init 失败，向我暗示 ejbs 注入失败。是否有更长的错误消息？

# java - Apache Ant 安装错误的解决方法

> ID：10473518
> 
> 赞同：6
> 
> 时间：2012-05-06T19:26:40.153
> 
> 标签：java, windows, ant

有人可以提供有关 Windows 中 Apache Ant 安装错误的解决方法的说明吗？

下面的代码片段描述了三种解决方法之一。如果您能够成功地使其中一项工作，您能分享一下吗？

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7077696](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7077696)

(1) 使用 -Djava.net.preferIPv4Stack=true 运行 - 为 Java 二进制文件添加防火墙例外。

(2) 使用 -Djava.net.preferIPv4Stack=true 运行（禁用 IPv6 并专门使用 AF_INET 套接字）

(3) 或者在防火墙中禁用有状态的 FTP 检查（注册表设置或 netsh 命令）

=============

**设置：**

**安装 Apache Ant：**

*   [在http://ant.apache.org/](http://ant.apache.org/)下载二进制文件

*   导航到此路径以获取安装说明：手册 > 安装 Apache Ant > 获取 Ant > ..follow instructions

*   将提取的文件夹（包含 bin 文件夹）移动到 C:\source_code\apache-ant-1.8.3\ 或 %ANT_HOME% 环境变量中使用的目录中

*   Windows 7 > 控制面板 > 系统 > 单击“环境变量”按钮 >

*（去掉环境变量后面的“\”字符）*

*   在“系统变量”部分下，单击“添加”> 变量名称：JAVA_HOME 变量值：C:\Program Files\Java\jdk1.7.0_02

*   在“系统变量”部分下，单击“添加”> 变量名称：ANT_HOME 变量值：C:\source_code\apache-ant-1.8.3

*   在“系统变量”部分下，点击“路径”环境变量，点击“编辑”>变量名：路径变量值：{编辑前的值};%JAVA_HOME%\bin;%ANT_HOME%\bin;

*   重新启动命令提示符（以管理员身份运行）

*   确保 Windows 看到 Apache Ant：

    C:\source_code\apache-ant-1.8.3>ant -version Apache Ant(TM) 版本 1.8.3 编译于 2012 年 2 月 26 日

*   导航到[http://ant.apache.org/](http://ant.apache.org/) > 手册 > 安装 Apache Ant > 安装 Ant >

=========================

**FTP错误：**

```
C:\source_code\apache-ant-1.8.3>ant -f fetch.xml -Ddest=system
Buildfile: C:\source_code\apache-ant-1.8.3\fetch.xml

pick-dest:
     [echo] Downloading to C:\source_code\apache-ant-1.8.3\lib

...

-fetch-netrexx:
      [ftp] getting files

BUILD FAILED
C:\source_code\apache-ant-1.8.3\fetch.xml:325: The following error occurred whil
e executing this line:
C:\source_code\apache-ant-1.8.3\fetch.xml:144: java.net.SocketException: Permiss
ion denied: recv failed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:150)
        at java.net.SocketInputStream.read(SocketInputStream.java:121)
        at java.io.BufferedInputStream.read1(BufferedInputStream.java:273)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:254)
        at org.apache.commons.net.telnet.TelnetInputStream.__read(TelnetInputStr
eam.java:114)
        at org.apache.commons.net.telnet.TelnetInputStream.run(TelnetInputStream
.java:535)
        at java.lang.Thread.run(Thread.java:722)

Total time: 3 seconds

C:\source_code\apache-ant-1.8.3> 
```

===============

我尝试制定入站和出站 Windows 防火墙规则以允许该程序通过。

```
%ProgramFiles%\Java\jdk1.7.0_02\bin\java.exe 
```

我还尝试使用他们在解决方法中提到的参数运行命令。

```
C:\source_code\apache-ant-1.8.3>ant -f fetch.xml -Ddest=system -Djava.net.preferIPv4Stack=true 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T19:33:15.923

从 Windows 命令提示符（以管理员身份运行）运行此作为禁用有状态 FTP 过滤的解决方法，以便 Windows 防火墙不会阻止 FTP 流量。

```
netsh advfirewall set global StatefulFtp disable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:41:23.717

MacGyver 的解决方案不适用于我在工作中的计算机。所以我尝试了别的东西：

我能够使用 firefox 从[ftp://ftp.software.ibm.com/software/awdtools/netrexx/](ftp://ftp.software.ibm.com/software/awdtools/netrexx/)下载 NetRexx.zip到 %HOME%/.ant/tempcache/。

然后我重命名`lib/commons-net.jar`为`lib/__commons-net.jar__`，以便将属性“have.commons.net”设置为 false。所以目标 -fetch-netrexx 因为属性为假而跳过，而 -fetch-netrexx-no-commons-net 因为文件已经存在而跳过。

我跑了

```
ant -f fetch.xml -Ddest=system netrexx 
```

这是通过的最后一步，所以我的安装完成了。

唯一剩下要做的就是重命名commons-net.jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-13T12:28:42.977

在我的情况下，**以管理员身份运行*****cmd***然后执行

```
ant -f fetch.xml -Ddest=system 
```

如文档中所述 - 在**没有**修改防火墙设置或手动下载依赖项的情况下完成了工作！

# jquery - FancyApps 中未显示关闭按钮

> ID：10473520
> 
> 赞同：0
> 
> 时间：2012-05-06T19:26:59.403
> 
> 标签：jquery, css, button, fancybox

现在，关闭按钮只显示在图像本身的边界内。fancybox_sprite.png 图像的路径是正确的，在 jQuery 中，我将其设置为：

```
$(document).ready(function() {
        $(".fancybox").fancybox ({
            openEffect  : 'fade',
            closeEffect : 'fade',
            closeBtn: true
        });
    }); 
```

这是目前我的测试站，你可以点击[这里](http://abrielshipley.com/new/)；这是[FancyApps 链接本身](http://fancyapps.com/fancybox/)，用于向您展示提供的示例。

很感谢任何形式的帮助！=]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:29:59.043

在您的`http://abrielshipley.com/new/css/style_vertical.css`CSS 文件中，您已`overflow: hidden`对每个元素 ( `*`) 进行了设置。

要么删除它，要么`overflow: visible`为fancybox容器设置`div`它的孩子。

# microcontroller - FreeRTOS 基于 windows xp 构建，可在 Atmega32 上运行

> ID：10473527
> 
> 赞同：1
> 
> 时间：2012-05-06T19:27:38.490
> 
> 标签：microcontroller, avr, circuit, freertos

我下载了 FreeRTOS，我想把它放在 PCB 上的微控制器（[ATMega32](http://www.sparkfun.com/products/209)）上（我会在第一个面包板上做），就像[这样](http://www.youtube.com/watch?v=2ppLCIAeeTs&list=UU29vXxkQfTCxH97fI0hD0Bg&index=9&feature=plcp)。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T20:20:54.173

根据该[站点](http://www.freertos.org/porting-a-freertos-demo-to-different-hardware.html)，源代码中包含构建说明。

你看透了吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T13:36:15.937

有一个 AVR323 演示，它与 AVR32 完全兼容，因为它是 AVR32 的前身。

[http://www.freertos.org/a00098.html](http://www.freertos.org/a00098.html) http://www.freertos.org/AVR_IAR.html

这些是官方端口，虽然现在已经相当老了。FreeRTOS Interactive 中也有很多贡献的端口！地点。

[http://interactive.freertos.org/forums/103473-atmel](http://interactive.freertos.org/forums/103473-atmel)

问候。

# c - 我可以将结构传递给采用 void* 的函数吗？

> ID：10473531
> 
> 赞同：6
> 
> 时间：2012-05-06T19:28:16.540
> 
> 标签：c, data-structures, structure, void-pointers

由于这是一个 void* 我应该能够传递任何类型的指针对吗？为什么编译器会给我错误？

```
int cmp_func(void *, void *));

typedef struct word_{
  char key[WORD_SIZE];
  int *frequency;
} word;

Phash_table new_hash(int size, int (*hash_func)(char *), int (*cmp_func)(void *\
, void *));

int comp_function(struct word_ *word1,struct word_ *word2){
  if( word1->frequency < word2->frequency){
    return -1;
  }
  if(word1->frequency <  word2->frequency){
      return 1;
  }
  if(word1->frequency == word2->frequency){
    return 0;
  }
} 
```

```
project4_functions.c:47:3: warning: passing argument 3 of 'new_hash' from incompatible pointer type [enabled by default]
hash.h:38:13: note: expected 'int (*)(void *, void *)' but argument is of type 'int (*)(struct word_ *, struct word_ *)' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T19:31:27.813

关键是让您的比较函数也采用 void 指针：

```
int comp_function(void *a, void *b){
  struct word *word1 = a;
  struct word *word2 = b;
  // Use word1 and word2 as before.
} 
```

* * *

附录，关于*为什么*编译器给你警告：

引用我在[这里找到的 c99 标准](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf)

> 指向 void 的指针可以转换为指向任何不完整或对象类型的指针或从指针转换。指向任何不完整或对象类型的指针可以转换为指向 void 的指针并再次返回；结果应与原始指针比较。

这意味着您可以拥有如下代码，并且编译器不会发出您看到的警告：

```
void *a = NULL;
int (*f)(int a, char *b) = NULL;
a = f;
f = a; 
```

很容易推断这意味着以下内容也将起作用（毕竟，我们只是将“void*”替换为“struct foo*”，对吧？）

```
int (*f1)(void*, void*);
int (*f2)(struct foo*, struct foo*);
f1 = f2; 
```

但是，这会产生您的警告，因为它**没有**像标准允许的那样尝试将指针类型分配给指向 void 的指针（反之亦然）。相反，它试图将 type 的值分配给 type`int (*)(struct foo*, struct foo*)`的变量`int (*)(void*, void*)`。

当然，您*可以*尝试使编译器对显式强制转换感到满意，这使编译器相信您必须知道自己在做什么。但是这样做，即使调用“不确定”行为，您也会失去获得这些警告的特权和安全性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T19:37:06.093

您的问题与您的代码不符。您的代码不会将结构指针作为 void 指针传递。它将一个函数指针作为另一个函数指针传递。函数指针不兼容，因此出现错误。

在需要 void 指针的地方传递结构指针是合法的，因为结构指针可以隐式*转换*为 void 指针。它不需要在表示上与 void 指针相同。（例如，有些机器的结构指针与 void 指针的大小不同。）

以此类推，考虑在预期为 long 时传递 int 的情况。这是合法的，因为存在隐式转换，但这并不意味着接受 int 的函数可以与接受 long 的函数互换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:30:22.187

您需要转换函数指针，因为您的函数原型与函数期望的不匹配：

```
typedef int (cmp_f)(void *, void *));
new_hash(..., ..., (cmp_f*)cmp_func_p); 
```

当然 typedef 不是必需的，但它使你的代码比没有更可读（你通常只在不允许使用 typedef 的考试中不使用 typedef ;)）

# iphone - 如何使视图具有半透明边框并显示下面的视图

> ID：10473534
> 
> 赞同：2
> 
> 时间：2012-05-06T19:28:51.497
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uitabbarcontroller

可能是一个新手问题，但是....我正在编写一个使用 UITabBarController 的 iPhone 应用程序。在 Interface Builder 中，我在 MainWindow.xib 中设置了选项卡栏。我有 4 个选项卡，每个选项卡都设置为加载相应 UIViewController 子类的 xib。我在 xib 文件中为 Interface Builder 中的每个 UIViewController 子类创建了视图。一切正常，我可以点击每个选项卡，它会显示正确 UIViewController 的视图

但我真正想要的是 UIViewController 子类之一的视图在所有 4 个边缘上都有一个大约 30px 的半透明边框，以便它显示后面视图的边缘，有点灰显。IE。第一个选项卡是主应用程序，它占据了整个屏幕（减去状态和选项卡栏区域）。选项卡 2 用于保存，我希望它看起来像主应用程序顶部的一个小模式窗口。（如果我将其作为一个 html Web 应用程序，我将使用的术语和技术将是一个 jQuery 覆盖）

这有意义吗？

我尝试过使用 presentModalViewController ，但这使情况变得更糟，因为它占据了整个屏幕，包括状态和标签栏区域。

任何帮助或指点都非常感谢干杯

弥敦道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:16:11.823

您的 UIViewController 不能对其下方的视图透明，因为 iphone 可能会卸载其下方当前未显示的视图（以节省内存）。

我使用的最佳解决方案是在推送新视图控制器之前拍摄当前视图的照片，然后将其用作背景图像（伪造透明度）。这是我如何实现的：

```
NewViewController *newView = [[NewViewController alloc] init];
shareVC.imageBackground = [Utilities getScreenshot:self.view];
[self presentModalViewController:newView animated:YES];
[newView release]; 
```

然后在您的 newViewController 上执行此操作（在 viewDidLoad、viewWillAppear 等上）：

```
[imageView setImage:imageBackground]; 
```

这是截图功能

```
+(UIImage *)getScreenshot:(UIView *)_view {
    //take a screenshow of the parent view so we can add it as a background to the modal view
    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
        UIGraphicsBeginImageContextWithOptions(_view.window.bounds.size, NO, [UIScreen mainScreen].scale);
    else
        UIGraphicsBeginImageContext(_view.window.bounds.size);
    [_view.window.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image;
} 
```

然后，您需要使用 UIImageView 作为背景设置新视图，并为该 imageView 选择正确的 Alpha 值，使其看起来像透明。

# c# - 计划任务：服务/DLL/控制台应用程序

> ID：10473539
> 
> 赞同：0
> 
> 时间：2012-05-06T19:29:37.227
> 
> 标签：c#, .net, web-services, dll, scheduled-tasks

我正在制作一个关于证券交易所的 asp.NET (C#) 网站。我需要执行一个计划任务，该任务从周日到周四在 10:00-17:00 之间每 5 分钟运行一次。（检查新股票价值、更新数据库和发送电子邮件） - 执行它的正确/最佳方式是什么。使用控制台应用程序/dll/服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:24:41.037

有充分的理由使用现有的任务调度程序每五分钟启动一次应用程序。

最明显的是，如果可以避免的话，任务调度并不是你想要重新实现的东西。例如，您必须能够处理时间校正（手动和自动）。

此外，尽管在 C# 中问题明显较少，但编写糟糕的应用程序可能会泄漏某种资源，直到它关闭。如果预期应用程序在其任务完成时终止，那么操作系统通常可以清理大部分资源。

但是，在某些情况下，您可能希望应用程序在后台运行，例如在调用之间保存大量状态，或者需要延长初始化时间，甚至需要某种实时监视器。

# sql - 如何判断 SQL 日期是否仍在未来（不是查询，我已经有了所需的行）

> ID：10473544
> 
> 赞同：1
> 
> 时间：2012-05-06T19:30:05.677
> 
> 标签：sql, date, compare

我有一个 SQL 表中的一行，一个字段是 DATE。（该值可能未定义，因为 DATE 没有默认值）。我如何判断这个日期（如果存在）是否还在未来？

我搜索了答案并找到了很多方法来提取通过此测试的所有记录，但我不想这样做。我只想检查这个先前提取的记录。抱歉新手问题！

```
$userQuery  = "SELECT * FROM  `passwords` WHERE `name` = '$name' LIMIT 1";
$userResult     = mysql_query($userQuery);    
$userRow        = mysql_fetch_assoc($userResult); 
$bestBeforeDate = $userRow['bestBeforeDate']; // field is in DATE format
// what now? How to find if the 'best Before Date' has passed? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T19:32:06.663

您可以在 SQL 中将其作为附加列进行

```
select case when (current_timestamp < date_column) 
            then 1
            else 0
            end as is_in_future
from your_table 
```

## 编辑

您可以在一个查询中执行此操作，同时从表中读取其他值。
示例（不知道表的列名）

```
select id,
       date_column,
       other_column,
       case when (current_timestamp < date_column) 
            then 1
            else 0
       end as is_in_future
from your_table
where some_conditions 
```

示例输出：

```
id  date_column   other_column   is_in_future
 1  2012-01-01    abc            0
 2  2012-08-01    def            1
 ... 
```

# objective-c - 如何将 UIActivityIndi cator 留在导航控制器中？

> ID：10473545
> 
> 赞同：1
> 
> 时间：2012-05-06T19:30:08.500
> 
> 标签：objective-c, xcode, uiactivityindicatorview

我有 ViewController 其中是 WebView （在里面加载网站），我想在开始加载时显示 UIActivityIndi​​cator 留在导航控制器中，加载完成后将其删除。

我有带有嵌入导航控制器的 ViewController，我尝试过放置 IB UIIndicator 但没有成功，它被放入内容部分，所以请告诉我如何以编程方式将指示器放在导航栏左侧。

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T01:32:06.967

不幸的是，您将无法仅使用情节提要在导航栏中放置活动指示器。

为活动指示器创建一个实例变量：

```
@implementation
{
    UIActivityIndicatorView *activityIndicator;
}
... 
```

在您的`viewDidLoad`方法中，实例化它并将其添加到导航栏：

```
activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:activityIndicator]; 
```

该属性`hidesWhenStopped`是`YES`默认的，所以当它不自动动画时它会隐藏。您所要做的就是分别调用`startAnimating`和`stopAnimating`何时显示或隐藏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:34:03.733

尝试这个：

```
UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithCustomView:activityIndicator];
self.navigationController.navigationItem.leftBarButtonItem = button; 
```

# mono - Mono4Android 无法上传到模拟器

> ID：10473548
> 
> 赞同：1
> 
> 时间：2012-05-06T19:30:16.960
> 
> 标签：mono, emulation

我正在使用 Mono4Android，但我遇到了一个大问题。在我编译我的程序（通过运行）之后，我想“将它上传到设备”。所以我正在启动一个模拟器，我等待，但模拟器没有列出运行，所以我无法测试我的程序。我在两台电脑上都遇到这个问题，如何解决？

# android - 为什么通知会打开另一个活动实例？

> ID：10473549
> 
> 赞同：0
> 
> 时间：2012-05-06T19:30:18.860
> 
> 标签：android, android-service, android-notifications

我有一个通过按下按钮启动服务的活动。服务初始化过程中，如果发生错误，会以通知的形式显示该错误，如下：

```
String tickerText = getString(R.string.init_error);

Notification notification = new Notification(
        R.drawable.ic_stat_notify_msg,
        tickerText, System.currentTimeMillis());

PendingIntent notificationIntent = PendingIntent.getActivity(
        this, 0, new Intent(this, MyServiceActivity.class), 0);

notification.setLatestEventInfo(this,
        getText(R.string.init_error_tts_title),
        getText(R.string.init_error_tts_text),
        notificationIntent);

NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
nm.notify(R.string.init_error, notification);

stopSelf(); 
```

当通知出现在状态栏中时，我打开通知窗口。然后，当我点击通知时，会启动一个新的 MyServiceActivity 实例......为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T20:29:40.967

尝试在清单上的活动标签上添加此属性：

```
android:launchMode=["multiple" | "singleTop" |
                    "singleTask" | "singleInstance"] 
```

有价值`singleTop`或`singleInstance`

[活动元素文档](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-10T21:09:01.200

我有一个音乐播放器，它具有初始启动器活动，然后是选择活动，然后是播放器。通知需要将用户返回给播放器。我使用了 Christophe 的想法，发现将

```
android:alwaysRetainTaskState="true"
android:launchMode="singleTop" 
```

在 PLAYER ACTIVITY 的 manfest 活动标签中给了我正确的行为。然后确保您的通知调用 PLAYER ACTIVITY 类。起初我没有这样做。它调用了应用程序启动器类，虽然这对于较新的 Android 来说没问题，但它给我留下了 Android 2.3.6 中的额外活动问题。现在一切都很好。

如果我的活动修复对您不起作用，您将不得不通过在

[http://developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

我应该补充一点，我的播放器是无状态的，只有四个按钮连接到一个服务。但是，如果您的活动需要在通知的意图进入时设置其状态，则需要覆盖 onNewIntent：

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
} 
```

向克里斯托夫致敬。这是一个很难得到正确答案的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-06T20:31:32.420

设置适当的启动模式，或添加所需的意图标志。

# javascript - JQuery 范围输入侦听器

> ID：10473554
> 
> 赞同：30
> 
> 时间：2012-05-06T19:30:38.047
> 
> 标签：javascript, jquery, html, range

嘿，jquery 和 hmtl5 范围有点麻烦。我试图在它们发生变化时获取值，但事件侦听器没有捕获它。目前我的代码是：

HTML

```
html += '<li>Apply Credits: <input type="range"  min="0" max="'+credits+'" name="discount_credits" id="discount_credits" /> <span>'+credits+'</span></li>' 
```

JS是：

```
$('#discount_credits').mousewheel( function() { 
        alert('it changed!'); 
        alert('new value = ' + $(this).val()); 
    }); 
```

我也试过

```
$('#discount_credits').change( function() { 
            alert('it changed!'); 
            alert('new value = ' + $(this).val()); 
        }); 
```

两者似乎都不起作用。难道我做错了什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-03-13T18:32:28.893

```
$('input[type=range]').on('input', function () {
    $(this).trigger('change');
}); 
```

这会`change`在每个事件上触发`input`事件。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-06T20:01:32.117

在 HTML5 上`<input type="range">`使用`change`.

见：http: [//jsfiddle.net/DerekL/BaEar/33/](http://jsfiddle.net/DerekL/BaEar/33/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-18T04:14:21.133

我假设您的 span 有一个 id：`<span id="slidernumber">...</span>` 我们还假设您有几个滑块，并且如果其中任何一个被移动，您希望看到文本更改：

```
<li>
Apply Credits1: 
<input type="range" min="0" max="100" 
name="discount_credits1" id="discount_credits" 
/>
</li>

<li>
Apply Credits2: 
<input type="range" min="0" max="100" 
name="discount_credits2" id="discount_credits" 
/>
</li>

<span id="slidernumber">50</span> 
```

尝试这个：

```
$(document).ready(function(){
  $("[type=range]").change(function(){
    var newval=$(this).val();
    $("#slidernumber").text(newval);
  });
}); 
```

[http://jsfiddle.net/MahshidZeinaly/CgQ5c/](http://jsfiddle.net/MahshidZeinaly/CgQ5c/)

现在让我们假设您有几个滑块，但是如果其中一个特定的被移动了，您希望看到文本的变化。（我假设它是因为范围输入在 li 标签内，并且您给了它一个名称）：

```
<li>
Apply Credits1: 
<input type="range" min="0" max="100" 
name="discount_credits1" id="discount_credits" 
/>
<span id="slidernumber">50</span>
</li>

<li>
Apply Credits2: 
<input type="range" min="0" max="100" 
name="discount_credits2" id="discount_credits" 
/>
<span id="slidernumber">50</span>
</li> 
```

尝试这个：

```
$(document).ready(function(){
  $("[type=range]").change(function(){
    var newv=$(this).val();
    $(this).next().text(newv);
  });
}); 
```

[http://jsfiddle.net/MahshidZeinaly/2pe7P/1/](http://jsfiddle.net/MahshidZeinaly/2pe7P/1/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-06T19:55:07.583

on change 事件对我来说似乎工作正常：http: [//jsfiddle.net/zV3xD/7/](http://jsfiddle.net/zV3xD/7/)

```
<input type="range"  min="0" max="100" name="discount_credits" id="discount_credits" />

<span id="newValue" value="0">0</span>

$('#discount_credits').change( function() {
    var newValue = this.value;        
    $('#newValue').html(newValue);
});​ 
```

或者你可以尝试这样的[事情](http://jsfiddle.net/VwTu2/)：

```
<form oninput="result.value=parseInt(a.value)">
    <input type="range" name="a" value="50" /> =
    <output name="result">0</output>
</form> 
```

使用`output`此处的示例：[https ://developer.mozilla.org/en-US/docs/Web/HTML/Element/output](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/output)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-12-04T20:17:26.347

几个测试和错误修复！

```
$('input[name=form_range]').change('mousestop',function () {

}); 
```

# ruby-on-rails-3 - Rails 3 - 如何在标签助手中自定义文本标签？

> ID：10473565
> 
> 赞同：8
> 
> 时间：2012-05-06T19:31:41.170
> 
> 标签：ruby-on-rails-3, label, helper

这可能是一个有点低的问题，但是有什么优雅的方法，如何更改**标签**助手中的标签文本？

```
= f.label :name 
```

产生

```
<input id="car_name" name="car[name]" size="30" type="text"> 
```

如果我想在**label**中添加文本，例如**Your Car**而不是**Name**，该怎么做？

一种方法是直接把label标签写成HTML，不过这样有点脏……

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-06T19:39:00.483

只需向 f.label 添加第二个字符串参数，如下所示：

```
label_tag 'name', 'Your name'
# => <label for="name">Your Name</label> 
```

看[这里](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-label_tag)

# ruby-on-rails - mongoid 在 mongohq 上创建不同的集合

> ID：10473566
> 
> 赞同：0
> 
> 时间：2012-05-06T19:31:59.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, mongohq

我有这个模型

```
class Noticia
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::Slug

  belongs_to :user

  field :titulo, :type => String
  field :conteudo, :type => String
  field :tags, :type => Array

  index :tags
  slug :titulo
end 
```

有了这个环境

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.irregular 'inscricao', 'inscricoes'
  inflect.irregular 'noticia', 'noticias'
  inflect.irregular 'central', 'centrais'
end 
```

当我在本地创建一个“noticia”时，它会在集合“noticia”上创建。但是当我在 heroku 上创建一个“noticias”时，它会出现在一个名为“noticias”的集合中。另外，该`notcias`集合没有`tags`对我的应用程序非常重要的字段来执行搜索`noticia`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:38:54.983

很高兴听到将屈折调用放在 Application.initialize 之前！解决了你的问题。

# jquery - 每次点击都会调用 jQuery 函数两次

> ID：10473571
> 
> 赞同：11
> 
> 时间：2012-05-06T19:32:11.793
> 
> 标签：jquery

**设置：**

当点击 table_1 中的一行时，我编写了一个 jQuery 函数来更新 table_2 的表格单元格。这是我写的：

```
 <script type="text/javascript">
        $("tr").live('click',function() {
            var host = $(this);
            alert('A row in table 1 is clicked!');

            var count = host.find("td").eq(2).text();
            $("#myTable_2 tr:eq(0) td:eq(1)").text(count);
            $("#myTable_2 tr:eq(1) td:eq(1)").text(5);
        });
    </script> 
```

**问题：**

当我使用 FireBug 逐步执行此功能时，我可以看到 myTable_2 中的单元格数据正在更改。但是，对于每次点击，该功能都会执行两次。我可以看到每次点击都会出现两次警报框。

有人能告诉我为什么会这样吗？以及如何避免这种情况？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T13:53:41.533

只是简单地避免点击的传播

```
$("tr").live('click',function() {

        ...

        $( event.toElement ).one('click', function(e){ e.stopImmediatePropagation(); } );
    }); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-06T19:34:07.643

以下任一项：

1.  单击的行位于另一行内（单击了两行）。（[示例](http://jsfiddle.net/6UmpY/)）
2.  您显示的代码执行了两次（[示例](http://jsfiddle.net/6UmpY/1/)）。

为了解决这个问题，让你的选择器更具体。如果您使用 jQuery 1.7+，请使用[`.on`](http://api.jquery.com/on/)： http `live`: [//jsfiddle.net/6UmpY/3/](http://jsfiddle.net/6UmpY/3/)

```
$(document).on("click", "#myTable_1 > tbody > tr", function() {
    // This selector will only match direct rows of the myTable_1 table 
```

注意：使用`.on`代替`live`并没有解决问题。
使用更具体的选择器*确实*解决了这个问题。
如果您喜欢`live`，以下内容也可以使用：http: [//jsfiddle.net/6UmpY/4/](http://jsfiddle.net/6UmpY/4/)

```
$("#myTable_1 > tbody > tr").live("click", function() { 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T19:34:30.407

假设`table_1`是第一个表的 id。

```
$("#table_1 tbody").on('click','tr', function() {
            var host = $(this);
            alert('A row in table 1 is clicked!');

            var count = host.find("td").eq(2).text();
            $("#myTable_2 tr:eq(0) td:eq(1)").text(count);
            $("#myTable_2 tr:eq(1) td:eq(1)").text(5);
        }); 
```

**注意：** `live()`已被弃用，所以像上面那样写。您的代码执行两次，因为`tr`选择器属于两个表和事件绑定两次。

您还可以使用`delegate()`：

```
$("#table_1 tbody").delegate("tr", "click", function(){
     var host = $(this);
     alert('A row in table 1 is clicked!');
     var count = host.find("td").eq(2).text();
     $("#myTable_2 tr:eq(0) td:eq(1)").text(count);
     $("#myTable_2 tr:eq(1) td:eq(1)").text(5);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-11T05:41:26.147

这是因为 $("tr").live('click',function() {}); ^^^^^ 在 html 中有 2 个计数。为确保 .live() 或 .delegate() 执行一次，$(selector).delegate() 中的选择器最好是 "$(table[name=users])" 而不是 $('td') 或$('tr')

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-26T12:53:00.913

有些元素可能具有相同的属性（类名、标签名等），您可能会忽略这些属性。这可能会导致这样的冲突。在下面的示例中，“tr”元素用作警报的选择器，但脚本有两个嵌套的“tr”元素，其中包含“text”目标。因此，只需单击一下，您就可以分别为每个（从内到外）“tr”元素触发警报。这称为[冒泡](http://javascript.info/tutorial/bubbling-and-capturing)。您可以简单地使用[stopPropogation()](https://api.jquery.com/event.stoppropagation/)来停止[冒泡](http://javascript.info/tutorial/bubbling-and-capturing)。

```
$("tr").live('click',function() {
    alert('A row in table 1 is clicked!');
    event.stopPropogation();
});

<table>
  **<tr>**
    <td>    
      <table id="myTable_1">
        **<tr>**
         <td>Test</td>
        **</tr>**
      </table>
    </td>
  **</tr>**
</table> 
```

[http://jsfiddle.net/6UmpY/97/](http://jsfiddle.net/6UmpY/97/)

# jquery - 对同一个元素并行执行多个 jQuery 效果

> ID：10473572
> 
> 赞同：11
> 
> 时间：2012-05-06T19:32:17.697
> 
> 标签：jquery

我看到这个问题被问了很多次，但没有一个解决方案对我有用。我有两个要并行执行的效果。

我希望盒子同时淡入和弹跳：http: [//jsfiddle.net/6VVUG/](http://jsfiddle.net/6VVUG/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T19:44:57.617

链接 UI 效果，并用于`dequeue()`一次执行所有效果。

```
$("#t").hide().show("fade", {},  {duration:1200}).effect("bounce", { times:3 },  { duration:400}).dequeue(); 
```

[小提琴](http://jsfiddle.net/adeneo/6VVUG/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T19:49:56.887

试试这个

```
function g()
 {
    $("#t").hide();
    $('#t').show();
    $("#t").animate({ opacity: 0.5 }, 0).effect("bounce", { times:3 },  { duration:400, queue: false});
    $("#t").animate({ opacity: 1 }, 0);
 } 
```

# c++ - 为什么越界指针算术未定义行为？

> ID：10473573
> 
> 赞同：31
> 
> 时间：2012-05-06T19:32:26.173
> 
> 标签：c++, undefined-behavior

以下示例[来自维基百科](http://en.wikipedia.org/wiki/Undefined_behavior)。

```
int arr[4] = {0, 1, 2, 3};
int* p = arr + 5;  // undefined behavior 
```

如果我从不取消引用 p，那么为什么 arr + 5 单独是未定义的行为？我希望指针表现得像整数 - 除了取消引用时指针的值被视为内存地址。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-06T19:34:26.383

那是因为指针的行为不像整数。这是未定义的行为，因为标准是这样说的。

然而，在大多数平台上（如果不是全部），如果您不取消引用数组，您将不会崩溃或遇到可疑行为。但是，如果您不取消引用它，那么添加的意义何在？

也就是说，请注意，在数组末尾加一个的表达式在技术上是 100%“正确”的，并且保证不会按照 C++11 规范的§5.7 ¶5 崩溃。但是，该表达式的结果是*未指定*的（只是保证不会溢出）；而超过数组边界的任何其他表达式都是明确*未定义*的行为。

注意：这并不意味着从一倍偏移量读取和写入是安全的。您可能*会*编辑不属于该数组的数据，并且*会*导致状态/内存损坏。你只是不会导致溢出异常。

我的猜测是这样的，因为它不仅取消引用是错误的。还有指针算术、比较指针等。所以说不**要这样做**比列举可能危险的情况更*容易。*

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-07T09:37:58.470

原始的 x86 可能会出现此类语句的问题。在 16 位代码上，指针是 16+16 位。如果向低 16 位添加偏移量，则可能需要处理溢出并更改高 16 位。这是一个缓慢的操作，最好避免。

在这些系统`array_base+offset`上，如果偏移量在范围内（<=数组大小），保证不会溢出。但`array+5`如果数组仅包含 3 个元素，则会溢出。

溢出的结果是你得到了一个指针，它没有指向数组*后面，而是在前面。*这甚至可能不是 RAM，而是内存映射硬件。如果您构造指向随机硬件组件的指针，C++ 标准不会尝试限制发生的情况，即它是真实系统上的未定义行为。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-06T19:37:00.000

如果`arr`恰好在机器内存空间的末尾，那么`arr+5`可能在该内存空间之外，因此指针类型可能无法表示该值，即它可能会溢出，并且溢出是未定义的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-06T19:39:58.083

“未定义的行为”并不意味着它必须在该代码行上崩溃，但它确实意味着您无法对结果做出任何保证。例如：

```
int arr[4] = {0, 1, 2, 3};
int* p = arr + 5; // I guess this is allowed to crash, but that would be a rather 
                  // unusual implementation choice on most machines.

*p; //may cause a crash, or it may read data out of some other data structure
assert(arr < p); // this statement may not be true
                 // (arr may be so close to the end of the address space that 
                 //  adding 5 overflowed the address space and wrapped around)
assert(p - arr == 5); //this statement may not be true
                      //the compiler may have assigned p some other value 
```

我敢肯定，您还可以在这里举出许多其他示例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-06T20:53:48.917

一些系统，非常罕见的系统，我无法命名，当你像这样增加边界时会导致陷阱。此外，它允许存在提供边界保护的实现......虽然我想不出一个。

本质上，您不应该这样做，因此没有理由指定您这样做时会发生什么。指定会发生什么会给实施提供者带来不必要的负担。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-15T07:06:18.003

您看到的这个结果是因为 x86 的基于段的内存保护。我发现这种保护是合理的，因为当您增加指针地址并存储时，这意味着在您的代码中的未来时间点，您将取消引用指针并使用该值。因此编译器希望避免这种情况，您最终会更改其他人的内存位置或删除代码中其他人拥有的内存。为了避免这种情况的编译器已经设置了限制。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-15T16:54:28.230

除了硬件问题，另一个因素是尝试捕获各种编程错误的实现的出现。尽管如果配置为捕获程序已知不使用的构造，许多这样的实现可能是最有用的，即使它们是由 C 标准定义的，标准的作者不想定义构造的行为，这些行为会 - -*在许多编程领域*——出现错误。

在许多情况下，捕获使用指针算法来计算非预期对象地址的操作要比以某种方式记录指针不能用于访问它们所标识的存储的事实要容易得多，但可以对其进行修改以便它们可以访问其他存储。除了较大（二维）数组中的数组之外，允许实现保留“刚刚过去”每个对象末尾的空间。给定类似的东西`doSomethingWithItem(someArray+i);`，一个实现可以捕获任何试图传递任何不指向数组元素或刚刚超过最后一个元素的空间的地址的尝试。`someArray`如果为额外的未使用元素分配保留空间，并且`doSomethingWithItem()`仅访问它接收到的指针的项目，该实现可以相对便宜地确保上述代码的任何非陷阱执行可以 - 在最坏的情况下 - 访问其他未使用的存储。

计算“刚刚过去”地址的能力使得边界检查比其他情况更加困难（最常见的错误情况是将`doSomethingWithItem()`指针传递到数组末尾，但除非`doSomethingWithItem`尝试取消引用，否则行为将被定义那个指针——调用者可能无法证明的东西）。因为标准允许编译器在大多数情况下保留刚刚超过数组的空间，但是，这种允许将允许实现限制未捕获的错误造成的损害——如果允许更通用的指针算术，这可能是不切实际的。

# multivalue - UniData 是否支持用户定义的函数

> ID：10473576
> 
> 赞同：0
> 
> 时间：2012-05-06T19:32:37.587
> 
> 标签：multivalue, unidata

目前正在研究从 mvBase 迁移到 Unidata 并想知道是否支持用户定义函数，因为我在下载的文档中看不到这一点？

例如，我有类似的 DATABASIC 程序

A = @FUNCTION_NAME(VAR1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:08:30.647

是的，Unidata 支持用户定义的函数。

要在 Unidata 中创建函数，请在代码文件的第 1 行使用如下行：

```
FUNCTION MY.FUNCTION.NAME( ARG1, ARG2 ) 
```

在函数内部，使用 RETURN 语句返回结果：

```
RETURN ARG1 + ARG2 
```

要调用它，您必须表明您将在使用该函数的程序中的 DEFFUN 语句中使用它：

```
DEFFUN MY.FUNCTION.NAME( ARG1, ARG2 ) 
```

我通常将我的 DEFFUN 语句放在程序顶部附近，就在任何 $INCLUDE 之后。（参数名称不必在 FUNCTION 和 DEFFUN 行之间匹配，但我不知道有什么理由故意使它们不同。）

完成该设置后，您可以通过在表达式中使用其名称来调用该函数：

```
TOTAL = MY.FUNCTION.NAME( 10, 15 ) 
```

在该语句之后，TOTAL 的值为 25。

我从未在 Unidata 中见过使用 @FUNCTION_NAME 语法调用的函数。

# google-app-engine - Appengine getRemainingMillis 为 cron 激活的 servlet 返回 10 分钟

> ID：10473580
> 
> 赞同：1
> 
> 时间：2012-05-06T19:32:58.627
> 
> 标签：google-app-engine

我有使用 cron 激活 servlet 的 AppEngine Java 应用程序。因为我正在做非常短的操作，所以我每隔几秒就会在一个循环中进行操作。

我想知道在得到最后期限异常之前我还有多少时间来完成工作，所以我使用 getCurrentEnvironment().getRemainingMillis() 但由于某种原因它返回 10 分钟而不是 1 分钟。

谢谢你，伊多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T20:31:43.557

这是预期的行为。[cron 文档页面](https://developers.google.com/appengine/docs/java/config/cron)明确指出 cron 调用的请求可以运行 10 分钟。

# c# - 如何检索 WinForms PictureBox 的缩放因子？

> ID：10473582
> 
> 赞同：10
> 
> 时间：2012-05-06T19:33:25.040
> 
> 标签：c#, winforms, zooming, mouseover, picturebox

我需要鼠标指针在 PictureBox 上的精确位置。

我使用 PictureBox 的 MouseMove 事件。

在这个 PictureBox 上，我使用“缩放”属性来显示图像。

在原始（未缩放）图像上获取鼠标位置的正确方法是什么？

有没有办法找到比例因子并使用它？

我认为需要使用 imageOriginalSize/imageShowedSize 来检索这个比例因子。

我使用这个功能：

```
float scaleFactorX = mypic.ClientSize.Width / mypic.Image.Size.Width;
float scaleFactorY = mypic.ClientSize.Height / mypic.Image.Size.Height; 
```

是否可以使用此值来获取光标在图像上的正确位置？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T16:46:32.523

我今天必须解决同样的问题。我希望它适用于任何宽度：高度比的图像。

这是我在原始全尺寸图像上找到点“unscaled_p”的方法。

```
 Point p = pictureBox1.PointToClient(Cursor.Position);
            Point unscaled_p = new Point();

            // image and container dimensions
            int w_i = pictureBox1.Image.Width; 
            int h_i = pictureBox1.Image.Height;
            int w_c = pictureBox1.Width;
            int h_c = pictureBox1.Height; 
```

第一个技巧是确定图像相对于容器是水平还是垂直更大，因此您将知道哪个图像尺寸完全填充了容器。

```
 float imageRatio = w_i / (float)h_i; // image W:H ratio
            float containerRatio = w_c / (float)h_c; // container W:H ratio

            if (imageRatio >= containerRatio)
            {
                // horizontal image
                float scaleFactor = w_c / (float)w_i;
                float scaledHeight = h_i * scaleFactor;
                // calculate gap between top of container and top of image
                float filler = Math.Abs(h_c - scaledHeight) / 2;  
                unscaled_p.X = (int)(p.X / scaleFactor);
                unscaled_p.Y = (int)((p.Y - filler) / scaleFactor);
            }
            else
            {
                // vertical image
                float scaleFactor = h_c / (float)h_i;
                float scaledWidth = w_i * scaleFactor;
                float filler = Math.Abs(w_c - scaledWidth) / 2;
                unscaled_p.X = (int)((p.X - filler) / scaleFactor);
                unscaled_p.Y = (int)(p.Y / scaleFactor);
            }

            return unscaled_p; 
```

请注意，由于缩放使图像居中，因此必须考虑“填充”长度以确定图像未填充的尺寸。结果“unscaled_p”是未缩放图像上与“p”相关的点。

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T10:51:52.650

如果我对您的理解正确，我相信您会想做这种性质的事情：

假设：PictureBox 适合图像的宽度/高度，PictureBox 的边框与实际图像之间没有空间。

```
ratioX = e.X / pictureBox.ClientSize.Width;
ratioY = e.Y / pictureBox.ClientSize.Height;

imageX = image.Width * ratioX;
imageY = image.Height * ratioY; 
```

这应该为您提供原始图像中像素的点。

# python - sqlalchemy 外键/查询连接

> ID：10473583
> 
> 赞同：3
> 
> 时间：2012-05-06T19:33:27.880
> 
> 标签：python, orm, sqlalchemy, pyramid

嗨，我在 sqlalchemy 中遇到外键问题，不能在主键 ID 上自动递增

我正在使用：python 2.7、金字塔 1.3 和 sqlalchemy 0.7

这是我的模型

```
class Page(Base):
    __tablename__ = 'page'
    id = Column(Integer, ForeignKey('mapper.object_id'), autoincrement=True, primary_key=True)
    title = Column(String(30), unique=True)
    title_slug = Column(String(75), unique=True)
    text = Column(Text)
    date_added = Column(DateTime)

class User(Base):
    __tablename__ = 'user'

    id = Column(Integer, primary_key=True)
    name = Column(String(100), unique=True)
    email = Column(String(100), unique=True)
    password = Column(String(100))

class Group(Base):
    __tablename__ = 'groups'
    id = Column(Integer, primary_key=True)
    name = Column(String(100), unique=True)

class Member(Base):
    __tablename__ = 'members'

    user_id = Column(Integer, ForeignKey('user.id'), primary_key=True)
    group_id = Column(Integer, ForeignKey('groups.id'), primary_key=True)

class Resource(Base):
    __tablename__ = 'resource'

    id = Column(Integer, primary_key=True)
    tablename = Column(Text)
    action = Column(Text)

class Mapper(Base):
    __tablename__ = 'mapper'

    resource_id = Column(Integer, ForeignKey('resource.id'), primary_key=True)
    group_id = Column(Integer, ForeignKey('groups.id'), primary_key=True)
    object_id = Column(Integer, primary_key=True) 
```

这是我用 SQLAlchemys ORM 编写的 RAW SQL 查询

```
'''
SELECT g.name, r.action
FROM groups AS g
INNER JOIN resource AS r
ON m.resource_id = r.id
INNER JOIN page AS p
ON p.id = m.object_id
INNER JOIN mapper AS m
ON m.group_id = g.id
WHERE p.id = ? AND
r.tablename = ?;
'''
obj = Page
query = DBSession().query(Group.name, Resource.action)\
        .join(Mapper)\
        .join(obj)\
        .join(Resource)\
        .filter(obj.id == obj_id, Resource.tablename == obj.__tablename__).all() 
```

原始 SQL 查询工作正常，Page 和 Mapper 之间没有任何关系，但 SQLAlchemys ORM 似乎需要 ForeignKey 链接才能加入它们。所以我决定把 ForeignKey 放在 Page.id 因为 Mapper.object_id 将链接到几个不同的表。

这使得带有连接的 SQL ORM 查询按预期工作，但将新数据添加到 Page 表会导致异常。

```
FlushError: Instance <Page at 0x3377c90> has a NULL identity key.  
If this is an auto-  generated value, check that the database 
table allows generation of new primary key values, and that the mapped 
Column object is configured to expect these generated values.  
Ensure also that this flush() is not occurring at an inappropriate time, 
such as within a load() event. 
```

这是我的视图代码：

```
try:
    session = DBSession()
    with transaction.manager:
        page = Page(title, text)
        session.add(page)
        return HTTPFound(location=request.route_url('home'))
except Exception as e:
    print e
    pass
finally:
    session.close() 
```

我真的不知道为什么，但我宁愿在 SQLalchemy 中使用解决方案，也不愿使用 RAW SQL，因为我制作这个项目是为了学习：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T11:04:38.050

我不认为`autoincrement=True`和`ForeignKey(...)`一起玩得很好。

无论如何，要在`join`没有任何 的情况下工作`ForeignKey`，您只需`join`在 的第二个参数中指定条件[`join(...)`](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.join)：

```
obj = Page
query = DBSession().query(Group.name, Resource.action)\
    .join(Mapper)\
    .join(Resource)\
    .join(obj, Resource.tablename == obj.__tablename__)\
    .filter(obj.id == obj_id)\
    .all() 
```

# javascript - 简单的 jQuery addClass() 似乎不起作用

> ID：10473584
> 
> 赞同：7
> 
> 时间：2012-05-06T19:33:37.270
> 
> 标签：javascript, jquery

我希望能够确定用户当前在哪个页面上。一个简单的指示器，以向用户当前正在查看其上下文的导航链接添加独特样式的形式

这是我的脚本，所有选择器都可以正常工作，if 语句也可以完成这项工作，但是 addClass() 函数什么也不做。这是我的代码：

```
<script>
$(document).ready(function(){
    var pathname = window.location.pathname;
    $("#links ul li a").each( function() {
        var href= $(this).attr("href");
        if (pathname.indexOf(href) >= 0){
            $(this).addClass("active");
        }
    } );
});
</script>

    <nav id="links">
    <ul>
        <li><a href="index.php">Home</a></li>
        <li><a>About</a></li>
        <li><a>Contact</a></li>
    </ul>
</nav> 
```

HTML：

让它工作，这是我的最终代码，是否需要任何改进？

```
$(document).ready(function(){
    var pathname = window.location.pathname;
    var onDomain=true;
    $("#links ul li a").each( function() {
        var href= $(this).attr("href");
        if (href != undefined && pathname.indexOf(href) >= 0){
            $(this).addClass("active");
            onDomain=false;
        }
    });
    if (onDomain){
        $("#links ul li:first-child a").addClass("active");
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:39:56.340

可能应该将活动类应用于 li.. 假设您的逻辑是正确的并且该类应该应用于 li （如果没有 html 和 css 很难说）：

```
if (pathname.indexOf(href) >= 0){
        $(this).parent().addClass("active");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T19:47:26.870

分配`href`给`a`;

```
<nav id="links">
    <ul>
        <li><a href="index.php">Home</a></li>
        <li><a href="">About</a></li>
        <li><a href="">Contact</a></li>
    </ul>
</nav> 
```

然后尝试：

```
 var pathname = window.location.pathname;
   $("#links ul li a").each( function() {
        var href= $(this).attr("href");
        if (href.length && pathname.indexOf(href) >= 0){
            $(this).addClass("active");
        }
    }); 
```

如果您无法更改 HTML，请尝试以下操作：

```
 var pathname = window.location.pathname;
   $("#links ul li a").each( function() {
        var href= $(this).attr("href");
        if (href != undefined && pathname.indexOf(href) >= 0){
            $(this).addClass("active");
        }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T19:37:16.100

```
var loc = ''+( $(location).attr('href').split('/').slice(-1) );
if( typeof loc !== 'undefined'){
    $("#links li").find("a[href='"+loc+"']").each(function(){
        $(this).addClass("active");
    });
}else( typeof loc === 'undefined' ){
    $("#links li a:eq(0)").addClass("active"); // if you use 'home' as your first.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T20:10:00.820

我不确定我是否得到了这个问题，但我会选择类似的东西：

```
$("#links ul li a").filter( function() {
    return window.location.pathname.indexOf(this.href) != -1;
}).addClass('active'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-24T18:53:00.397

```
<script type="text/javascript">

$(window).load(function() {
                  var url = window.location;
                    $('#nav a').filter(function() {
                        return this.href == url;
                    }).parents("li").addClass('active');

            });
</script> 
```

当您使用外部文件作为菜单时，它的工作使用此脚本

像**index.php**包括**menu.php** 你必须使用这个脚本来检测加载的 url 并将类菜单更改为活动类。

谢谢你的codeparadox你的代码是有效的

# objective-c - Objective-C 选择器重载

> ID：10473586
> 
> 赞同：0
> 
> 时间：2012-05-06T19:34:00.430
> 
> 标签：objective-c, selector

有些类有一些众所周知的选择器，比如 UIView 层。如果有人继承 UIView 并声明他自己的“层”选择器用于不同的目的怎么办？然后是其他一些框架，如 UIKit 本身在 UIView 实例上调用层。这会在子类上调用“层”并导致崩溃？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T19:42:54.950

您永远不应覆盖现有方法并将其用于完全不同的目的。

当您有一个`UIView`子类时，重写`layer`以返回完全不同的东西，然后一个框架类（不知道您的重写目的）调用该`layer`方法，取回它没有预料到的东西，事情会很快向南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:37:19.390

不，每个实例都知道它是什么类，如果您`UIView`在覆盖子类中的某些内容之后创建了一个，那么`UIView`它仍将使用该方法的版本。这是继承的基础——子类不应该影响父类。

```
@interface Stuper : NSObject
- (void)layer;
@end

@implementation Stuper
- (void)layer {
     NSLog(@"superclass");
}
@end

@interface Stub : Stuper
@end

@implementation Stub
- (void)layer {    // Override layer
    NSLog(@"subclass");
}
@end 
```

* * *

```
Stuper * p = [Stuper new];
Stub * b = [Stub new];
[p layer];    // Prints "superclass"
[b layer];    // Prints "subclass" 
```

但是，如果您覆盖类别中的方法，则可能会发生这种情况，这就是您不应该这样做的原因。原类的所有实例都会使用新版本的方法，这会导致很大的问题，尤其是对于框架类。

```
@interface Stuper (BadIdea)
- (void)layer;    // Clobber layer
@end

@implementation Stuper (BadIdea)
- (void)layer {
    NSAssert(NO, @"Sucker!");
}
@end 
```

* * *

```
Stuper * p = [Stuper new];
[p layer];    // Almost certainly doesn't do what the caller was expecting 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T20:33:50.737

当你想要子类化一个框架对象时，你首先应该看的是 Apple 提供的类引用。

[单击此处获取`UIView`课程参考。](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816).

在类参考中，有一个标题为**子类化注释**的部分，其中包含有关子类化的重要信息。本节包含有关哪些方法**必须**被覆盖、哪些方法**应该**被覆盖以及哪些方法不应该**被**覆盖的信息。

在这种情况下，`layer`没有提到该方法，但是在**“覆盖的方法”**下它具有以下内容：

> *   layerClass - 仅当您希望视图使用不同的核心动画层作为其后备存储时才实施此方法。例如，如果您使用 OpenGL ES 进行绘图，您可能希望覆盖此方法并返回 CAEAGLLayer 类。

进一步研究一下，在`layerClass`属性描述下，它有：

> **layerClass**
> 返回用于为此类的实例创建层的类。
> 
> `+ (Class)layerClass`
> 
> **返回值**
> 用于创建视图的核心动画层的类。
> 
> **讨论**
> 该方法默认返回 CALayer 类对象。子类可以重写此方法并根据需要返回不同的层类。例如，如果您使用 OpenGL ES 进行绘图，您将覆盖此方法并返回 CAEAGLLayer 类的类对象。
> 
> 此方法仅在创建视图的早期调用一次，以便创建相应的图层对象。

因此，这告诉我们您**可以**更改`layer`预期返回的类，但它必须是“不同层类”（即 的子类`CALayer`）。许多其他功能在布局、调整大小等时与图层交互，如果您不遵循他们的指导方针，您将遇到重大问题。

**注意：**
所有这些都适用于您的子类对象。当您在子类中进行更改时，它绝不会触及或应用于父类（`UIView`在这种情况下），因此您不必担心破坏 UIView 对象，只需担心您自己的子类对象可能会导致崩溃和未定义的行为。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-06T19:38:35.413

这听起来像是面向对象语言的基础。你选择一个与你的意图相似的类，然后创建它的一个子类并操纵它来做你想让它做的事情。大多数时候，尽管您需要告诉编译器您正在覆盖该类的该功能，以便它不会调用基类。

# android - 随机文本，缓慢而滞后

> ID：10473590
> 
> 赞同：1
> 
> 时间：2012-05-06T19:34:25.820
> 
> 标签：android

嘿，我正在使用下面的代码作为按下按钮将新文本输入到 textview 中，但是它很迟钝并且在我按下它的一半时间不起作用，但另一半时间它工作正常，有人有什么想法吗？

```
final Button button = (Button) findViewById(R.id.slumpaovrigt);
    button.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
    Random myRandom5 = new Random();
    TextView textovrigt = (TextView) findViewById(R.id.textovrigt);
    switch(myRandom5.nextInt() %151) {
    case 0:
        textovrigt.setText("text 1");
        break;
    case 1:
        textovrigt.setText("text 2");
        break;
    case 2:
        textovrigt.setText("text 3");
        break;
    case 3:
        textovrigt.setText("text 4");
        break;
    }
    }
    });
    }
    } 
```

此外，我使用 4 个不同的 xml 视图，代码相同，但按钮和文本视图不同，文本也不同，每个都包含大约 150 个不同的文本（案例）。

修改了代码，它变得更好了，但仍然有点慢

这是java文件中的完整代码

```
import java.util.Random;

import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.text.method.ScrollingMovementMethod;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class Ovrigtskamt extends Activity {

    Button slumpaovrigt;
TextView textovrigt;
Random slumpaovrigt2 = new Random();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ovrigttext);
    super.onCreate(savedInstanceState);
    this.setRequestedOrientation(
ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    slumpaovrigt = (Button) findViewById(R.id.slumpaovrigt);
    textovrigt = (TextView)findViewById(R.id.textovrigt);

    loadDoc();
}

private void loadDoc(){

    String s = "";

    for(int x=0;x<=100;x++){
        s += "Line: "+String.valueOf(x)+"\n";
    }

    textovrigt.setMovementMethod(new ScrollingMovementMethod());

    textovrigt.setText("Klicka på Slumpa");

    slumpaovrigt.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {

    switch(slumpaovrigt2.nextInt() %4) {
    case 0:
  case 0:
    textovrigt.setText("text 1");
    break;
case 1:
    textovrigt.setText("text 2");
    break;
case 2:
    textovrigt.setText("text 3");
    break;
case 3:
    textovrigt.setText("text 4");
    break;
}
}
});
}
} 
```

但正如惠特所说，有 151 种不同的文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:40:56.753

如果没有看到更多，我会说您生成的数字并不总是包含在您的 switch 语句中。我建议逐行浏览代码，看看当你到达 switch 语句时会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:45:56.673

> 但是它很迟钝，我按下它的一半时间都不起作用<

难怪它一半的时间都不起作用，因为你的函数 myRandom5.nextInt() %151 将产生从 -151 到 151 的所有值。

/数学.abs

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:38:29.920

更新：你正在做 % 151 你的代码中有那么多元素吗？不在此代码示例中。请改用 % 4。更新2：或`random.nextInt(4)`。

我们可以直接看到两个优化，但如果这真的会导致那么大的延迟，这听起来很奇怪。

1.  不要每次都创建 Random 对象，在启动时创建一次并重复使用。
2.  不要一遍又一遍地找到视图，只需在启动时进行并保存对它的引用。

# mysql - 权限问题

> ID：10473592
> 
> 赞同：0
> 
> 时间：2012-05-06T19:34:27.583
> 
> 标签：mysql

我有一个 mysql 数据库（5.5 版），我正在尝试添加一个新用户。
但我没有创建它的权限。如果我尝试显示所有用户的列表：

```
select * from mysql.user; 
```

它给出了这个错误：

```
ERROR 1142 (42000): SELECT command denied to user ''@'localhost' for table 'user 
```

似乎我无能为力。如何在不使用 grant 命令的情况下为用户授予权限？
有办法吗？我也试过这个：

```
CREATE USER 'ramy'@'localhost' IDENTIFIED BY 'pass'; 
```

它说：

```
ERROR 1227 (42000): Access denied; you need (at least one of) the CREATE USER privilege(s) for this operation 
```

我没有看到任何处理权限的方法，mysql show 有一种方法可以为新创建的数据库处理权限。这是一个恶性循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:36:27.257

您需要以“root”帐户登录

如果您不知道 root 密码，请查看此内容

[http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)

# android - 如何将图像视图附加为电子邮件附件？

> ID：10473597
> 
> 赞同：2
> 
> 时间：2012-05-06T19:34:58.190
> 
> 标签：android, imageview, email-attachments

我在图像视图上生成饼图，我想通过电子邮件发送。

如何将图像视图的图像转换为电子邮件附件，因为它在资源中不可用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T16:35:12.783

调用`getDrawingCache()`您的图像视图。这将返回视图的缓存位图。[在此处](http://developer.android.com/reference/android/view/View.html#getDrawingCache%28%29)阅读文档。

将位图另存为 PNG，创建邮件并附加并发送。

```
Bitmap bmp = imgView.getDrawingCache();
FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_WORLD_READABLE);
bmp.compress(Bitmap.CompressFormat.PNG, 0, fos);
fos.close();

/* Create a Action_SEND intent and attach the FILENAME image to the mail. */
...
intent.putExtra(Intent.EXTRA_STREAM, FILENAME); // FILENAME is URI
...
startActivity(....); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:59:40.563

在我看来，这里有很多额外的工作要做。如果您在运行时有可用的 ImageView，我们将其称为 mImageView，那么您可以执行以下操作：

```
Drawable mDrawable = mImageView.getDrawable();
Bitmap mBitmap = ((BitmapDrawable)mDrawable).getBitmap(); 
```

现在您有一个位图图像，您可以将其作为附件附加到电子邮件中。我还没有对它进行原型设计，以确保 100% 确保这完全符合您的要求，但它似乎比将其保存到 SD 卡要优雅得多，这样您就可以将其流式传输回位图并将其附加到一封电邮。

如果这不起作用，请告诉我，我会尝试制作一些原型

谢谢，大卫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T02:33:54.180

最简单且最适合 Android 的方法是使用 ACTION_SEND Intent。代码看起来像这样：

```
 path = "/path/to/image/"
    Intent sharingIntent = new Intent(Intent.ACTION_SEND);
    Uri screenshotUri = Uri.parse(path);

    sharingIntent.setType("image/png");
    sharingIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
    startActivity(Intent.createChooser(sharingIntent, "Share image using")); 
```

# swing - Scala：WPF Canvas 和 Polygon 的等价物

> ID：10473602
> 
> 赞同：1
> 
> 时间：2012-05-06T19:35:25.220
> 
> 标签：swing, scala, awt, scala-swing

我正在开发一个基于十六进制的游戏。在与 C# 类型系统的局限性作斗争后，在发现 Scala 时，我知道我必须用 Scala 重写应用程序。我需要一个基本的 GUI 才能开发主要功能。我一直在使用带有 Polygon 类的 WPF Canvas。我还在 Canvas 上使用 Wpf Border 类和 Line 类。我不需要 Wpf 的大部分功能。我不使用 Xaml。我只需要将图形对象映射到所需的坐标，从它们接收鼠标左键和右键单击事件，并提供工具提示并显示上下文菜单。我什至不需要 Wpf 上下文菜单属性，因为我更喜欢上下文菜单是动态的。我通过自己的代码处理滚动和缩放。

我发现制作多边形的最好方法是 awt GeneralPath 类。虽然这应该是贬值的。我从 Scala Swing 开始，但 MainFrame 类不允许我使用 awt 画布类作为内容。任何帮助/建议表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:54:36.877

只是覆盖一些组件的油漆：

```
public class MyCanvasPanel extends JPanel{
  ...
  @Override
 public void paint(Graphics g){/* do your java2d stuff here*/}
} 
```

# android - 此示例应使用哪种布局

> ID：10473605
> 
> 赞同：0
> 
> 时间：2012-05-06T19:35:34.277
> 
> 标签：android, android-layout, layout, user-interface

哪个`Android` `layout`最适合这个例子。每个盒子里面都会有一张照片。我主要想知道整个屏幕的最佳父布局是什么。

我可能会使用`TableLayout`每一行盒子。然后让每一列`TableLayout`成为一个`FrameLayout`。然后让每个都`FrameLayout`包含图片。

但我不确定`Layout`我应该使用哪个父级来包含整个屏幕。

我希望它能够适应`Landscape`市场上的大多数手机。也许它会调整所有内容的大小以适应横向屏幕。

我还希望它们之间有间距`TableLayouts`。

非常感谢任何帮助。

谢谢。

* * *

![在此处输入图像描述](../Images/51651e08249a47273998215fefc518ab.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T20:23:22.287

如果我正在构建它，并且每组中的图像/框的数量是静态的，我可能会将`RelativeLayout`其用作父级并`LinearLayout`用于每个“行”。然后`ImageView`直接作为`LinearLayout`. `RelativeLayout`允许您相对于彼此或父对象定位事物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T11:19:51.527

满足确切要求的任何一个`RelativeLayout`或任何一个。`GridView`

# c - GTK 输入输入信号

> ID：10473608
> 
> 赞同：3
> 
> 时间：2012-05-06T19:36:14.897
> 
> 标签：c, gtk

当用户在 gtk+ 条目中键入一些文本时发出的信号的名称是什么？

我在 c 中使用 GTK+ 2.24。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T20:09:30.700

A`GtkEntry`是 a 的一个实例，`GtkEditable`它具有三个信号：

1.  信号在`changed`单个用户可见操作结束时发出
2.  当`delete-text`用户从小部件中删除文本时发出信号
3.  当`insert-text`用户将文本插入小部件时发出信号

我假设你想要`insert-text`你的情况下的信号。

# dojo - 在 dijit/form/FilteringSelect 创建后设置值

> ID：10473612
> 
> 赞同：1
> 
> 时间：2012-05-06T19:36:25.710
> 
> 标签：dojo, dijit.form

我 `FilteringSelect`使用了一个`MemoryStore`. 当用户键入不在商店中的值时，系统会提示他们，询问他们是否要将新值添加到商店中。如果他们这样做，我们调用服务器，创建新项目，并在响应中发布一个事件。

主题订阅者被通知新项目已创建并添加到 MemoryStore，这会将选项添加到过滤选择。

此时，过滤select仍然有相同的displayValue，并且该选项存在于select中。FilteringSelect.get("value") 仍然返回 ""。

如果您要键入一个空格，然后按退格键（以相同的值结束），`FilteringSelect.get("value")`将返回正确的项目 ID。

`FilteringSelect.set("value", data[0].id)`不做任何事情，不抛出异常，不影响。

这是代码，包含我尝试过的一些随机调用。

```
require(["dojo/store/Memory", "dojo/_base/array", "dojo/topic"],
  lang.hitch(this, function(Memory, array, topic) {
    this.liftStore = new Memory({
      data: []
    });
    array.forEach(data, lang.hitch(this, function(entry, i) {
      this.liftStore.data.push({
        name: entry.Name,
        id: entry.ID,
        identifier: entry.ID
      });
    }));
    this.lift.set("store", this.liftStore);
    topic.subscribe("LiftLog/NewLift", lang.hitch(this, function(data) {
      debugger;
      data[0].selected = true;
      data[0].identifier = data[0].id;
      this.liftStore.data.push(data[0]);
      this.lift.reset();
      this.lift.set("value", data[0].id);
      this.lift.set("value", data[0].id.toString());
   }));
})); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:19:40.283

您是否尝试过设置项目（即`filteringSelect.set("item", newItem)`，而不是设置值？请注意，您应该给它整个项目，而不仅仅是 id 或显示的值。

因此，将项目推入商店，然后在 FilteringSelect 上设置项目：

```
this.liftStore.data.push(newItem);
this.lift.set("item", newItem); 
```

# ruby - HAML Ruby - 条件

> ID：10473616
> 
> 赞同：1
> 
> 时间：2012-05-06T19:36:46.170
> 
> 标签：ruby, haml, erb

我正在浏览“Agile Web Dev with Rails”一书中的示例，但将它与我发现有用的额外技术混合在一起——比如 haml。遇到一个棘手的问题，如何写下这个 erb 部分：

```
<% if line_item == @current_item %>
<tr id="current_item">
<% else %>
<tr>
<% end %>
  <td><%= line_item.quantity %>&times;</td>
  <td><%= line_item.product.title %></td>
  <td class="item_price"><%= number_to_currency(line_item.total_price) %></td>
</tr> 
```

在哈姆？

尝试过这样的事情：

```
-if line_item==@current_item
 %tr#current_item
-else
 %tr
%td!=line_item.quantity.to_s+"&times;"
%td=line_item.product.title
%td.item_price=number_to_currency(line_item.total_price) 
```

但它会打印出一个没有 TD 的空 TR...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T19:46:36.670

而不是有两个单独`%tr`的条目（在这种情况下，您需要在每个 tr 下列出您的 3 个 td，我认为），您可以只在条件中设置 id：

```
%tr{:id => (line_item == @current_item) ? "current_item" : false}
  %td!=line_item.quantity.to_s+"&times;"
  %td=line_item.product.title
  %td.item_price=number_to_currency(line_item.total_price) 
```

# css - 在 div 中调整图像大小

> ID：10473626
> 
> 赞同：0
> 
> 时间：2012-05-06T19:37:58.610
> 
> 标签：css, html, anchor, image-resizing

我正在尝试调整 id 为“homeLink”的 div 的大小。我将首先声明我是 CSS 的 n00b 并且我希望被扔到骨头上，只是因为我知道这很简单。我也确信它会解释一些我不理解的 CSS 使用的基本知识，因此任何指向链接的指针都会有所帮助。

我看到了[这篇](https://stackoverflow.com/questions/7888148/css-expression-to-set-height-of-div)文章，但我不确定我是否理解为什么我不能做我想做的事情。我做了 RTFM（我能找到的那个），但我仍然不明白。我想避免为此调用 js，但也许我不需要无论如何。

谢谢你的帮助; 下面的代码。

```
 <html>
        <head>
            <style> 
                #homeLink { 
                    /*this doesn't work */
                    // width: 50%;
                    position:absolute;
                    left:10px;
                    top: 770px;
                }

                /* nor does this */
                #homeLink a {
                    width: 10%;
                }       
            </style>
        </head>

        <body>
            <div id="homeLink"><a href="http://www.someurl.com"><img src="homebutton.png"/></a></div>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:50:35.670

正如@Mr D 所说，您需要调整图像本身而不是 div 的大小。

这部分：

```
#homeLink a {
width: 10%;
} 
```

在 CSS 方面实际上是错误的，因为`a`它没有`width`属性。您可以使用 CSS 预先设置某些行为或链接的格式，例如将鼠标悬停在链接上时加下划线和更改访问链接的颜色：

```
a.hover {text-decoration: underline}
a.visited {color: #999999} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T19:41:47.460

```
<img class="image" src="homebutton.png"/> 
```

然后在你的css样式中：

```
.image {
height: 200px;
width: 300px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:52:17.590

这不是调整大小，因为容器 div 中的图像可能大于容器的宽度和高度

1.  您可以通过将溢出隐藏添加到容器 div 来实现这一点。
2.  或使用以下 css

```
#homeLink,#homeLink a img { 

                    width: 50%;
                    position:absolute;
                    left:10px;
                    top: 770px;
                }
or

#homeLink{
      width:50%;
      position:absolute;
      left:10px;
      top:770px;
      overflow:hidden;
} 
```

# haskell - Haskell 理解单子

> ID：10473631
> 
> 赞同：2
> 
> 时间：2012-05-06T19:38:44.010
> 
> 标签：haskell, monads

只是想让我的头绕着单子......

目前正在查看此页面：[http ://www.haskell.org/haskellwiki/Simple_monad_examples](http://www.haskell.org/haskellwiki/Simple_monad_examples)

在底部，它询问这些片段解析为：

```
Just 0 >>= (\ x -> if (x == 0) then fail "zero" else Just (x + 1) ) 
```

为什么这什么都不返回？因为调用失败？

```
Nothing >>= (\ x -> if (x == 0) then fail "zero" else Just (x + 1) ) 
```

我理解这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T19:53:35.150

在 Haskell 中，您通常可以通过内联和术语重写来理解一些代码：

我们有：

```
Prelude> Just 0 >>= (\ x -> if (x == 0) then fail "zero" else Just (x + 1) )
Nothing 
```

我们需要的最重要的事情是 monad 的定义和定义，如下所示`fail`：`>>=``Maybe`

```
instance  Monad Maybe  where
    (Just x) >>= k      = k x
    Nothing  >>= _      = Nothing

    (Just _) >>  k      = k
    Nothing  >>  _      = Nothing

    return              = Just
    fail _              = Nothing 
```

所以我们有：

```
Just 0 >>= (\ x -> if (x == 0) then fail "zero" else Just (x + 1) )

-- by definition of >>=
(\ x -> if (x == 0) then fail "zero" else Just (x + 1) ) 0

-- by definition of fail
(\ x -> if (x == 0) then Nothing else Just (x + 1) ) 0

-- beta reduce
if 0 == 0 then Nothing else Just (0 + 1)

-- Integer math
if True then Nothing else Just 1

-- evaluate `if`
Nothing 
```

你有它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T19:48:39.197

的行为`fail`取决于单子。在`Maybe`monad 中，`fail`返回`Nothing`.

```
instance Monad Maybe where
  return = Just

  (Just x) >>= k = k x
  Nothing  >>= _ = Nothing

  fail _ = Nothing 
```

但是，在许多其他 monad中，它会`fail`转换为`error`，因为这是默认实现。提供自己的单子`fail`通常是类中的单子`MonadPlus`，您可以在其中使用单子中的`fail`return 。`mzero``Nothing``Maybe`

在实践中，我不建议使用`fail`它，因为它会做什么还不清楚。相反，请使用您所在的 monad 的适当故障机制，无论是`mzero`，`throwError`还是其他。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T19:44:27.153

是的，因为调用失败。看看 Maybe 如何是 Monad 类型类的一个实例：

[http://www.haskell.org/ghc/docs/latest/html/libraries/base/src/Data-Maybe.html#Maybe](http://www.haskell.org/ghc/docs/latest/html/libraries/base/src/Data-Maybe.html#Maybe)

```
fail _              = Nothing 
```

# windows - 使用 Beyond Compare 的 Windows 版 Git

> ID：10473635
> 
> 赞同：4
> 
> 时间：2012-05-06T19:39:21.740
> 
> 标签：windows, git, beyondcompare

我是 git 的新手，在配置视觉差异/合并工具时遇到了困难。我已经按照[http://www.scootersoftware.com/support.php?zz=kb_vcs#gitwindows](http://www.scootersoftware.com/support.php?zz=kb_vcs#gitwindows)上的说明配置了 git，但是当我运行 git difftool file.txt 时，差异显示在控制台上，没有显示错误并没有推出超越比较。

任何想法可能是什么问题？

谢谢

詹姆士

我在 Windows 7 x64 上运行 1.7.6.msysgit.0

我的配置是（我已经删除了用户名等）

```
$ git config --list
core.symlinks=false
core.autocrlf=true
color.diff=auto
color.status=auto
color.branch=auto
color.interactive=true
pack.packsizelimit=2g
help.format=html
http.sslcainfo=/bin/curl-ca-bundle.crt
sendemail.smtpserver=/bin/msmtp.exe
diff.astextplain.textconv=astextplain
rebase.autosquash=true
diff.tool=bc3
difftool.bc3.path=c:/program files (x86)/beyond compare 3/bcomp.exe
merge.tool=bc3
mergetool.bc3.path=c:/program files (x86)/beyond compare 3/bcomp.exe
core.repositoryformatversion=0
core.filemode=false
core.bare=false
core.logallrefupdates=true
core.symlinks=false
core.ignorecase=true
core.hidedotfiles=dotGitOnly
gui.wmstate=zoomed
gui.geometry=584x210+275+275 408 476 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T17:29:48.030

[msysGit 论坛 (googlegroups)](http://groups.google.com/group/msysgit/browse_thread/thread/7c611b1e866f56a8/2fbab593b26927bf?q=%2522David%2bAguilar%2522#2fbab593b26927bf&ei=iGwTS6eaOpW8Qpmqic0O&sa=t&ct=res&cd=45&source=groups&usg=AFQjCNFiwX0a2rrdBx5CulvKpaYc9IOe8w)上有一个旧的（ish）线程。总而言之，可执行文件名称发生了变化，并且在您之后的版本中进行了修复（应该已经消失；-）。

最新的更新应该可以解决它。

# objective-c - 代表和协议目标

> ID：10473636
> 
> 赞同：0
> 
> 时间：2012-05-06T19:39:25.847
> 
> 标签：objective-c, xcode, delegates, protocols, concept

我想澄清目标 c 中委托和协议的概念。所以有两种类型的协议 1）正式 2）非正式

在正式委托的情况下..如果该人已经定义了协议方法但没有在两者中实际实现它怎么办。即 B 类是 A 的委托，A 有方法 WindowDidMove 作为可选...在这种情况下。会有什么行为？？？是否必须在 b 类中实现委托功能。我不能只在A中实现它并在我想要的任何地方使用它......相反，不要在A中定义它，并在B或C类或D类中给出单独的实现并使用它们但是我想要......请澄清这一点– @class A；

```
@protocol ADelegate <NSObject>
@optional

- (BOOL)A:(A *)foo doSumfin:(BOOL)decide;

@end

@interface A : NSObject {
NSString *bar;
id <ADelegate> delegate;
}

@property (nonatomic, retain) NSString *bar;

@property (nonatomic, assign) id <ADelegate> delegate;

- (void)someAction;

@end 
```

另外，线是什么

```
id  <A Delegate > delegate; 

@property (nonatomic, assign) id <ADelegate> delegate; 
```

帮助我们实现..

在非正式协议的情况下...如果我不提供方法的实现并仍然调用委托方法...会发生什么。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T20:08:32.630

如果您调用委托未实现的委托方法，则会导致异常。对于可选的委托方法，您通常会通过首先检查委托是否响应它来检查委托是否实现它们：

```
if ([self.delegate respondsToSelector:@selector(someDelegateMethod:)]) {
    [self.delegate someDelegateMethod:self];
} 
```

对于非正式协议，这不会以任何方式改变。不要将非正式协议与可选协议方法混淆。非正式协议通常只是一个`NSObject`类别，不应再真正使用。

# java - 将程序设置为 60FPS，但以 120FPS 运行？

> ID：10473637
> 
> 赞同：0
> 
> 时间：2012-05-06T19:39:25.967
> 
> 标签：java, swing, frame-rate

我有一个令我困惑的问题。我有这个小应用程序，它创建一个 JFrame，它应该以所需的 fps 更新图形。但是当我启动应用程序时，它以 120 fps 而不是 60 fps 运行。如果我设置 fps = 30，它以 60fps 运行，如果 fps =60，它以 120fps 运行，依此类推（为了测量我使用 FRAPS 的 fps）。

这是SSCCE：

```
import java.awt.*;
import javax.swing.*;

public class Controller
{
    public static TheFrame window;
    public static long time = 0;
    public static boolean funciona = true;
    public static int fps = 60;
    public static int x;

    public static void main(String [] args)
    {
        window = new TheFrame();
        while(funciona) {
            time = System.nanoTime();
            window.Redraw();
            time = System.nanoTime() - time;
            try {Thread.sleep( (1000/fps) - (time/1000000) );} catch (Exception e){}
        }
    }
}

class TheFrame
{
    public JFrame theFrame;
    public CanvasScreen canvas;

    public TheFrame()
    {
        canvas = new CanvasScreen();
        theFrame = new JFrame();
        theFrame.setSize(1280, 720);
        theFrame.setContentPane(canvas);
        theFrame.setUndecorated(true);
        theFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        theFrame.setVisible(true);
    }

    public void Redraw()
    {
        theFrame.repaint();
    }
}

class CanvasScreen extends JComponent
{
    public void paintComponent(Graphics g)
    {
    }
} 
```

计时器根据需要将程序设置为 60 fps，但它实际上绘制 30 fps，每帧重复两次。每次调用 repaint() 时，paintComponent() 都会绘制两次。如何将其更改为仅绘制一次？提前致谢。

# java - 如果您的 RDP 连接滞后，为什么 Java 服务器会滞后？

> ID：10473644
> 
> 赞同：0
> 
> 时间：2012-05-06T19:40:05.857
> 
> 标签：java, windows-server-2008-r2, remote-desktop

我有一个在 Windows 2008 机器上运行的 Java 服务器应用程序，我经常通过 RDP 连接以监控它或完成其他工作。但是，如果我的 RDP 连接一直滞后，Windows 似乎也会挂起，导致 Java 丢弃它的一些客户端连接。有谁知道为什么某些 RDP 数据包丢失会以如此有害的方式影响系统，以及是否有什么可以解决的？否则我可能需要开始使用第 3 方远程处理应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:59:13.013

绘制到屏幕通常需要同步且快速，在这种情况下，其他任务是否需要在 UI 线程上执行，或者 UI 线程是否持有与后台线程竞争的锁通常都无关紧要。但是，一旦您将 RDP 加入混合中，UI 线程将一直保持到绘制完成，如果您的连接滞后，这可能需要一段时间。然后，这将对必须等待油漆完成的任何其他任务产生连锁反应。

我的理解是，VNC 通过记录更新的区域并异步抓取它们并将更新的数据发送到客户端来工作，而 pcAnywhere 通过隐藏绘制命令并将它们异步发送到客户端来工作。这两者都允许应用程序在远程连接赶上时全速绘制。

# ruby-on-rails - Kaminari：删除第一页上的对象后，对象不会从第二页移动到第一页

> ID：10473650
> 
> 赞同：0
> 
> 时间：2012-05-06T19:41:03.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pagination, kaminari

我将 Kaminari 用于我的 Rails 3.2.0 站点分页。我通过过滤它来隐藏我的交易对象，使其不显示在视图中，`<% if !traveldeal.expired? %>`其中 expired 是一个布尔值。

我每页显示 9 个 traveldeals，如我的控制器中所示的 index 操作：

```
def index
  @traveldeals = Traveldeal.order('created_at DESC').page(params[:page]).per(9)
end 
```

最初，分页效果很好，每页显示 9 个旅游交易。但是，当我手动将第一页的 traveldeals 设置为 expired 时，设置为 expired 的 traveldeals 不再显示在第一页上，但有空白，第二页的元素不会向上移动。

唯一的其他相关信息是我有以下代码片段来显示分页：

```
<%= paginate @traveldeals %> 
```

我的问题：

如何使第二页中的元素向上移动以填充第一页中的元素，因为它们被设置为过期？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:43:45.613

由于 kaminari 在您的视图中不会知道您的条件，因此您应该在查询期间过滤掉过期的项目。假设您有一个布尔`expired`列：

```
@traveldeals = Traveldeal.where(:expired => false).order('created_at DESC').page(params[:page]).per(9) 
```

# python - 如何使这结束修剪python脚本更快？

> ID：10473653
> 
> 赞同：1
> 
> 时间：2012-05-06T19:41:26.347
> 
> 标签：python, trim

有什么建议可以让这个脚本运行得更快吗？这个脚本我通常有两到千万行。

```
while True:
    line=f.readline()
    if not line:break
    linker='CTGTAGGCACCATCAAT'
    line_1=line[:-1]
    for i in range(len(linker)):
        if line_1[-i:]==linker[:i]:
            new_line='>\n'+line_1[:-i]+'\n'
            seq_1.append(new_line_1)
            if seq_2.count(line)==0:
                seq_2.append(line)
            else:pass
        else:pass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:58:21.870

首先，您似乎在内循环中创建了许多字符串对象。您可以先尝试构建前缀列表：

```
linker = 'CTGTAGGCACCATCAAT'
prefixes = []
for i in range(len(linker)):
    prefixes.append(linker[:i]) 
```

此外，您可以使用`string`' 方法`endswith`而不是在内循环的条件中创建新对象：

```
while True:
    line=f.readilne()
    if not line:
        break
    for prefix in prefixes:
        if line_1.endswith(prefix):
             new_line='>\n%s\n' % line_1[:-len(prefix)]
             seq_1.append(new_line_1)
             if seq_2.count(line)==0:
                 seq_2.append(line) 
```

我不确定那里的索引（例如`len(prefix)`）。也不知道能快多少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T20:04:20.667

我不确定您的代码是做什么的，但一般方法是：

1.  避免不必要的操作、条件等。
2.  将所有可能的东西移出循环。
3.  尝试做尽可能少的循环级别。
4.  尽可能使用常见的 Python 实践（它们通常更有效）。

但最重要的是：尽量简化和优化算法，不一定是实现它的代码。

从代码来看，应用上面的一些规则，代码可能是这样的：

```
seq_2 = set()  # seq_2 is a set now (maybe seq_1 should be also?)
linker = 'CTGTAGGCACCATCAAT'  # assuming same linker for every line
linker_range = range(len(linker))  # result of the above assumption
for line in f:
    line_1=line[:-1]
    for i in linker_range:
        if line_1[-i:] == linker[:i]:
            # deleted new_line_1
            seq_1.append('>\n' + line_1[:-i] + '\n')  # do you need this line?
            seq_2.add(line)  # will ignore if already in set 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T19:59:02.260

问题的很大一部分可能是`seq_2.count(line) == 0`测试是否`line`在`seq_2`. 这将遍历每个元素`seq_2`并测试它是否等于`line`- 随着增长，这将花费越来越长的时间`seq_2`。您应该改用一个集合，这将为您提供恒定时间测试，以确定它是否通过散列存在。这将丢弃`seq_2`- 如果您需要保持顺序，您可以同时使用集合和列表（测试它是否在集合中，如果不在，则添加到两者中）。

这可能不会影响速度，但是循环`for line in f`而不是`while True`循环`line = f.readline()`和测试何时中断要好得多。此外，这些`else: pass`语句是完全不必要的，可以删除。

的定义`linker`应该移到循环之外，因为它不会被改变。@uhz 关于预构建前缀和使用的建议`endswith`也可能很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T00:02:58.750

**比所有这些变体快**大约两倍（至少在 python 2.7.2 上）

```
seq_2 = set()
# Here I use generator. So I escape .append lookup and list resizing
def F(f):
    # local memory
    local_seq_2 = set()
    # lookup escaping
    local_seq_2_add = local_seq_2.add
    # static variables
    linker ='CTGTAGGCACCATCAAT'
    linker_range = range(len(linker))
    for line in f:
        line_1=line[:-1]
        for i in linker_range:
            if line_1[-i:] == linker[:i]:
                local_seq_2_add(line)
                yield '>\n' + line_1[:-i] + '\n'
    # push local memory to the global
    global seq_2
    seq_2 = local_seq_2
# here we consume all data
seq_1 = tuple(F(f)) 
```

是的，它丑陋且非pythonic，但它是完成这项工作的最快方法。

您还可以使用`with open('file.name') as f:`内部生成器升级此代码或添加一些其他逻辑。

注意：这个地方`'>\n' + line_1[:-i] + '\n'`- 值得怀疑。在某些机器上，这是连接字符串的最快方法。在某些机器上，最快的方法是 `'>\n'%s'\n'%line_1[:-i]`or `''.join(('>\n',line_1[:-i],'\n'))`（当然，在没有查找的版本中）。我不知道什么对你最好。这很奇怪，但`'{}'.format(..)`我电脑上的新格式化程序显示最慢的结果。

# java - 如何将数据从 sqlite 缓存到 listview？

> ID：10473659
> 
> 赞同：1
> 
> 时间：2012-05-06T19:42:01.380
> 
> 标签：java, android, listview, caching

大家好，我有一个扩展 ListActivity 并显示从我的 SQLite DB 表填充的列表视图的活动。

我的列表视图中的每个条目都具有与我的 GUI 设计的一部分相同的背景文件。问题是我的列表视图中的滚动非常滞后。我认为这是因为每个列表视图条目都是“动态”创建的，这会导致滞后。

你能看看我的代码并告诉我如何缓存它以获得更好的结果吗？或者也许还有另一种解决方案？

代码：

```
package android.GUI;

public class Shifts extends ListActivity implements OnClickListener,
    SimpleGestureListener {

private Typeface tf = Entry.tf, tf2 = Entry.tf2;
public static int count = 1;
int dbHourTime = 0;
private SimpleGestureFilter detector;
public static DBAdapter DB;
public static Cursor cursor;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.shifts);

    detector = new SimpleGestureFilter(this, this);

    DB = new DBAdapter(this);
    DB.open();

    String[] columns = new String[] { DB.KEY_DATE, DB.KEY_HOURS,
            DB.KEY_DAY, DB.KEY_ROWID, DB.KEY_START, DB.KEY_END };
    int[] to = new int[] { R.id.dateDisp, R.id.shiftDisp, R.id.day,
            R.id.rawId, R.id.start, R.id.finish };
    new cursorLoad().execute("this");

    TextView SF = (TextView) findViewById(R.id.total);
    SF.setTypeface(tf);

    TextView sum = (TextView) findViewById(R.id.sum);
    sum.setTypeface(tf);

    SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this,
            R.layout.list_entry, cursor, columns, to);
    this.setListAdapter(mAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.view_shifts_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.back:

        finish();
        return true;
    case R.id.clear:
        DBAdapter DB = new DBAdapter(this);
        DB.open();
        DB.deleteAll();
        startActivity(getIntent());
        finish();

        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}

@Override
public void onSwipe(int direction) {

    Intent intent = new Intent();

    switch (direction) {

    case SimpleGestureFilter.SWIPE_RIGHT:

        intent.setClass(this, Main.class);
        startActivity(intent);
        break;
    case SimpleGestureFilter.SWIPE_LEFT:

        intent.setClass(this, Entry.class);
        startActivity(intent);
        break;
    case SimpleGestureFilter.SWIPE_DOWN:

        break;
    case SimpleGestureFilter.SWIPE_UP:

        break;
    }

}

@Override
public boolean dispatchTouchEvent(MotionEvent me) {
    this.detector.onTouchEvent(me);
    return super.dispatchTouchEvent(me);
}

@Override
public void onDoubleTap() {
    // TODO Auto-generated method stub

}

public class cursorLoad extends AsyncTask<String, Integer, String> {

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub

        cursor = DB.getAllShifts();
        startManagingCursor(cursor);
        cursor.moveToLast();
        count = cursor.getPosition();
        int g = count;

        cursor.moveToNext();
        return null;
    }

}

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:05:53.360

最后我需要的是 ViewHolder 类以及 getView\bindView。

# spring - 没有 SQL 连接

> ID：10473661
> 
> 赞同：0
> 
> 时间：2012-05-06T19:42:20.980
> 
> 标签：spring, hibernate, tomcat, connection-pooling

最近我决定从 Common DBCP 迁移到 Tomcat JDBC Connection Pool。我更改了 bean 描述（使用 spring 3.1 + hibernate 4 + tomcat）并且在我的 web 应用程序启动时遇到了下一个问题：

**HHH000342：无法获得查询元数据的连接：com.mysql.jdbc.Driver**

然后当我尝试从我的应用程序中查询 db 时，我得到：

**23:04:40,021 WARN [http-bio-8080-exec-10] spi.SqlExceptionHelper:(SqlExceptionHelper.java:143) - SQL 错误：0，SQLState：null**

**23:04:40,022 错误 [http-bio-8080-exec-10] spi.SqlExceptionHelper:(SqlExceptionHelper.java:144) - com.mysql.jdbc.Driver**

我一定是在配置上做错了，所以休眠无法获得连接但看不到它。如果你能指出我正确的方向，我真的很感激。

这是我的数据源 bean 定义的一部分

```
<bean id="jdbcDataSource" class="org.apache.tomcat.jdbc.pool.DataSource" destroy-              method="close"    
    p:driverClassName="com.mysql.jdbc.Driver"
p:url="jdbc:mysql://127.0.0.1:3306/test"
p:username="root"
p:password="test" 
p:defaultAutoCommit="false"
p:maxActive="100"
p:maxIdle="100"
    p:minIdle="10"
p:initialSize="10"
p:maxWait="30000"
p:testWhileIdle="true"   
p:validationInterval="60000"
p:validationQuery="SELECT 1"                
p:timeBetweenEvictionRunsMillis="60000"
p:minEvictableIdleTimeMillis="600000"
p:maxAge="360000"
/> 
```

这就是我将它与春天的会话工厂联系起来的方式

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="jdbcDataSource" />... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:31:53.380

确保您使用的是 JDK 6。使用 JDK5 可能是导致此错误的原因之一。

但是，您的问题有一种解决方法，[在此处进行了说明](https://stackoverflow.com/a/4230134/1300817)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:37:59.007

迁移后，我忘记将 lib tomcat-jdbc 添加到我的类路径:) 现在它可以工作了

# iphone - Graph API iOS 图片

> ID：10473664
> 
> 赞同：1
> 
> 时间：2012-05-06T19:42:30.740
> 
> 标签：iphone, facebook-graph-api

我的 ios 应用程序有一个图形 api 调用。它看起来像这样：

```
[[appDelegate facebook] requestWithGraphPath:[NSString stringWithFormat:@"%i/picture", [[userData objectForKey:@"id"] intValue] andDelegate:self]; 
```

（可能有些错别字）

但是在我 nslog 结果时确实加载了请求，它是`(null)`. Graph API 说你需要使用 fields=picture 或其他东西来获取 url。我该怎么做？如果可能的话，有人可以给我看一些示例代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:55:37.707

您不需要实际的 Graph API 调用来加载用户的 Facebook 图片。只需像这样构造一个 url，它就会返回指定用户的 facebook 图片：

```
NSURL *fbPictureURL = [NSURL URLWithString:[NSString stringWithFormat:@"http://graph.facebook.com/%@/picture", [userData objectForKey:@"id"]]; 
```

然后你可以做你想做的事，比如将它加载到 UIImageView 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:30:27.550

请参阅我在这篇文章中的回答，了解如何使用 requestWithGraphPath 获取图片 URL：

[iOS Facebook Graph API 个人资料图片链接](https://stackoverflow.com/questions/8444931/ios-facebook-graph-api-profile-picture-link/10493637#10493637)

# security - 由自己的银行创建时，数字证书私钥真的是私密的吗

> ID：10473665
> 
> 赞同：0
> 
> 时间：2012-05-06T19:42:31.317
> 
> 标签：security, certificate

如果我自己的银行是政府不认可的 CA 并创建了我的数字证书，那么理论上他们是否有可能在某处保留私钥的副本？那么它在法庭前有什么价值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:46:18.310

正常的证书创建过程始于证书的所有者生成私钥和公钥，然后获得由认证机构签名的公钥。在这种情况下，没有人可以看到私钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T19:48:21.173

这取决于它是如何生成的。

通常，您（最终用户）会生成公钥/私钥对，然后向 CA 发送签名请求。签名请求包含公钥和证书的主题。CA 对其进行签名，将其发回，与您的私钥配对，您现在就拥有了一个证书。

但是，如果 CA 只是向您发送一个证书并在这里说，使用它，那么他们正在生成公钥和私钥，并且确实可以保留一份副本。

# ios - ios awkard 图像加载（url 到 nsdata 到 uiimage 到 uiimageview）

> ID：10473673
> 
> 赞同：1
> 
> 时间：2012-05-06T19:43:30.230
> 
> 标签：ios, uiimageview, uiimage, nsdata, nsurl

我需要你在这个问题上逗我一下。这有点伪代码，因为实际情况相当复杂。除非需要，否则我不会以这种方式加载图像。假设我需要。

```
NSURL *bgImageURL = [NSURL URLWithString:@"https://www.google.com/images/srpr/logo3w.png"];

UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:bgImageURL]];

[self.anIBOutletOfUIImageView setImage:img]; 
```

但我崩溃了

```
-[__NSCFData _isResizable]: unrecognized selector sent to instance 0x9508c70 
```

如何将 URL 中的图像加载到 NSData 中，然后将该 NSData 加载到 UIImage 中并将该 UIImage 设置为我的 UIImageView 的图像？

再一次，我意识到这听起来像是胡说八道，但由于我正在使用图像缓存系统，我必须这样做:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T20:16:13.930

我通常如何处理这种情况（未编译，未测试）：

```
NSURL * url = [NSURL URLWithString:@"https://www.google.com/images/srpr/logo3w.png"];
NSURLRequest * request = [NSURLRequest requestWithURL:url];
[NSURLConnection sendAsynchronousRequest:request
                                   queue:[NSOperationQueue currentQueue]
                       completionHandler:^(NSURLResponse * resp, NSData * data, NSError * error) {

    // No error handling - check `error` if you want to
    UIImage * img = [UIImage imageWithData:data];
    [self.imageView performSelectorOnMainThread:@selector(setImage:) withObject:img waitUntilDone:YES];

}]; 
```

这避免了调用 隐含的长时间运行的网络请求`dataWithContentsOfURL:`，因此您的应用程序可以在为图像下载数据的同时继续在主线程上执行操作。

作为旁注，您似乎遇到了与[此问题](https://stackoverflow.com/questions/7168689/nscfdata-isresizable-crash)相同的错误；您可能想要检查您是否没有遇到对象分配问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:22:59.757

我将此代码插入到一个新的 iPad“单视图应用程序”模板中：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    NSURL *bgImageURL = [NSURL URLWithString:@"https://www.google.com/images/srpr/logo3w.png"];
    NSData *bgImageData = [NSData dataWithContentsOfURL:bgImageURL];
    UIImage *img = [UIImage imageWithData:bgImageData];
    [[self Imageview] setImage:img];
} 
```

我得到了正确加载的图像。我什至为 UIImageView 尝试了不同的内容模式，它们都按预期工作。

如果你从头开始，你会遇到同样的问题吗？

错误消息表明您正在向 NSData 对象发送“_isResizable”消息。也许您无意中将`UIImageView`'`image`属性设置为等于`NSData`而不是`UIImage`.

***编辑/更新***

我什至回去尝试了不同版本的“单线”代码，看看是否有任何问题，因为我的“工作”副本与您的非工作副本略有不同。我无法破解代码。我的猜测是有问题的代码没有损坏，但附近的东西是......

# c - 最快的归零方法

> ID：10473675
> 
> 赞同：2
> 
> 时间：2012-05-06T19:43:48.820
> 
> 标签：c, zero, 8051, unsigned-integer

将无符号整数清零的最快方法是什么？

我目前只是将值设置为 0，但我不知道是否有任何技巧可以将变量归零？在我当前的项目中，我需要几个时钟周期。我使用的是标准 8051 处理器，如果有帮助的话，我需要将两个不同的变量归零。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T19:47:44.503

该问题标记为 8051，因此如果需要将寄存器归零，则将寄存器与自身进行异或将是一种更快的归零方法，而不是在其中移动零。一个操作码获取和解码与操作码获取解码和操作数获取。

如果您使用高级语言而不是手工汇编或用 asm 编写，那么最好使用`var = 0`. 编译器将负责所需的优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T19:56:30.700

为人类编写代码，不要浪费任何精力优化不需要优化的东西。当您想将零分配给变量时，然后将零分配给变量：`x = 0;`

**快速编写正确的程序比编写正确的快速程序更容易。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T05:36:37.027

I believe the compiler will optimize this sort of thing for you. Remember that micro-optimizations lead to micro-results.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T19:48:02.050

微观优化导致微观结果。

您可能会使用自身对变量进行异或运算以达到零。你的编译器很有可能已经这样做了，如果不是更快的话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T23:14:40.203

首先尝试实现一种对包含相关代码的代码块进行计时的方法，如果您还没有这样做的话。

然后，尝试 var = 0; 并使用在清单中生成汇编程序的编译器开关。然后对 XOR 解决方案做同样的事情。它代表了一些额外的工作，但是你会在那里得到结果。

# java - android 夹板字符串

> ID：10473682
> 
> 赞同：1
> 
> 时间：2012-05-06T19:44:44.110
> 
> 标签：java, android, arrays, if-statement, split

我有一个服务器女巫正在向我发送一个字符串，例如“False~False~False~True~False~True~False~”或类似性质的东西，所以我所做的就是将该字符串拆分为“ ~" 所以我的代码是`String[] AString = A2MCString.split("~");`使用新的字符串数组，我使用 if else 语句检查每个部分是真还是假

```
if (AString[0] == "True") {
Log.d("ClientActivity","Light ON");
On1.setBackgroundResource(R.drawable.selected_on);
}
else Log.d("ClientActivity","Light OFF"); 
```

但是，即使服务器在我的字符串数组的第一部分向我发送了 true ，该数组仍然会反弹到 else 说它是 false ，即使它是 true ？对我的问题有任何帮助谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T19:49:38.863

在java中比较字符串时，您必须使用该`equals`方法。在你的情况下，像

```
if (AString[0].equals("True")) {
    Log.d("ClientActivity","Light ON");
    On1.setBackgroundResource(R.drawable.selected_on);
}
else Log.d("ClientActivity","Light OFF"); 
```

在对象上使用 == 运算符时（在 java 中，字符串是对象），它比较两个对象引用是否指向同一个对象。

# android - 时间选择器对话框将不显示

> ID：10473686
> 
> 赞同：0
> 
> 时间：2012-05-06T19:45:17.170
> 
> 标签：android, timepicker

我是新人，我很抱歉，我已经搜索过，但在以前的问题中找不到答案。我有一个日期选择器和一个时间选择器，但是当我运行它时，时间选择器对话框没有显示。任何的想法？我搜索了几个小时的答案，这是我拥有的代码：

```
 public class BuildingFireActivity extends Activity {

private Button buildingfirePickDate;
private Button buildingfiredispatchPickTime;

private TextView buildingfireDateDisplay;
private TextView buildingfiredispatchTimeDisplay;

private int buildingfireYear;
private int buildingfireMonth;
private int buildingfireDay;
private int buildingfiredispatchHour;
private int buildingfiredispatchMinute;

static final int DATE_DIALOG_ID = 0;
static final int TIME_DIALOG_ID = 1;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.buildingfirelayout);

    buildingfirePickDate = (Button) findViewById(R.id.pickDate);
    buildingfiredispatchPickTime = (Button) findViewById(R.id.dispatchTime);

    buildingfireDateDisplay = (TextView) findViewById(R.id.dateDisplay);
    buildingfiredispatchTimeDisplay = (TextView) findViewById(R.id.dispatchDisplay);

    buildingfirePickDate.setOnClickListener(new View.OnClickListener() {

@SuppressWarnings("deprecation")
public void onClick(View v) {
    showDialog(DATE_DIALOG_ID);}});
    final Calendar c = Calendar.getInstance();
    buildingfireYear = c.get(Calendar.YEAR);
    buildingfireMonth = c.get(Calendar.MONTH);
    buildingfireDay = c.get(Calendar.DAY_OF_MONTH);
    updateDisplay();
    buildingfiredispatchPickTime.setOnClickListener(new View.OnClickListener() {
@SuppressWarnings("deprecation")
public void onClick(View v) {
    showDialog(TIME_DIALOG_ID);}});
    final Calendar dispatch = Calendar.getInstance();
    buildingfiredispatchHour = dispatch.get(Calendar.HOUR_OF_DAY);
    buildingfiredispatchMinute = dispatch.get(Calendar.MINUTE);
    updateDisplay1();}
private static String pad(int dispatch) {
    if (dispatch >= 10)
    return String.valueOf(dispatch);
    else
    return "0" + String.valueOf(dispatch);}

private void updateDisplay() {
    buildingfireDateDisplay.setText(
    new StringBuilder()
    .append(buildingfireMonth + 1).append("-")
    .append(buildingfireDay).append("-")
    .append(buildingfireYear).append(" "));}
private void updateDisplay1() {
    buildingfiredispatchTimeDisplay.setText(
    new StringBuilder()
    .append(pad(buildingfiredispatchHour)).append(":")
    .append(pad(buildingfiredispatchMinute)));}

private DatePickerDialog.OnDateSetListener buildingfireDateSetListener =
    new DatePickerDialog.OnDateSetListener() {
    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            buildingfireYear = year;
            buildingfireMonth = monthOfYear;
            buildingfireDay = dayOfMonth;
            updateDisplay();}};
private TimePickerDialog.OnTimeSetListener buildingfiredispatchTimeSetListener =
    new TimePickerDialog.OnTimeSetListener() {
    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            buildingfiredispatchHour = hourOfDay;
            buildingfiredispatchMinute = minute;
            updateDisplay1();}}; 

protected Dialog onCreateDialog(int id) {
    switch (id) {
    case TIME_DIALOG_ID:
    return new TimePickerDialog(this,
            buildingfiredispatchTimeSetListener, 
            buildingfiredispatchHour, 
            buildingfiredispatchMinute, false);}
            return null;}

@Override
protected Dialog onCreateDialog1(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
    return new DatePickerDialog(this,
            buildingfireDateSetListener,
            buildingfireYear, 
            buildingfireMonth, 
            buildingfireDay);}
            return null;}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:54:41.863

```
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case TIME_DIALOG_ID:
    return new TimePickerDialog(this,
        buildingfiredispatchTimeSetListener, 
        buildingfiredispatchHour, 
        buildingfiredispatchMinute, false);
    case DATE_DIALOG_ID:
    return new DatePickerDialog(this,
        buildingfireDateSetListener,
        buildingfireYear, 
        buildingfireMonth, 
        buildingfireDay);
    }
    return null;
} 
```

尝试使用此代码并删除`onCreateDialog1()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:45:19.780

嗨，你可以试试这个代码吗？我希望它有助于查看日期选择器对话框

从对话框中选择日期并将其显示在 TextView 中。

```
public class DatePickerDemoActivity extends Activity {
/** Called when the activity is first created. */

   private TextView mDateDisplay;
    private Button mPickDate;
    private int mYear;
    private int mMonth;
    private int mDay;

    static final int DATE_DIALOG_ID = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // capture our View elements
    mDateDisplay = (TextView) findViewById(R.id.dateDisplay);
    mPickDate = (Button) findViewById(R.id.pickDate);

    // add a click listener to the button
    mPickDate.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            showDialog(DATE_DIALOG_ID);
        }
    });

    // get the current date
    final Calendar c = Calendar.getInstance();
    mYear = c.get(Calendar.YEAR);
    mMonth = c.get(Calendar.MONTH);
    mDay = c.get(Calendar.DAY_OF_MONTH);

    // display the current date (this method is below)
    updateDisplay();
}

// updates the date in the TextView
private void updateDisplay() {
    mDateDisplay.setText(getString(R.string.strSelectedDate,
        new StringBuilder()
                // Month is 0 based so add 1
                .append(mMonth + 1).append("-")
                .append(mDay).append("-")
                .append(mYear).append(" ")));
}

// the callback received when the user "sets" the date in the dialog
private DatePickerDialog.OnDateSetListener mDateSetListener =
        new DatePickerDialog.OnDateSetListener() {

            public void onDateSet(DatePicker view, int year,
                                  int monthOfYear, int dayOfMonth) {
                mYear = year;
                mMonth = monthOfYear;
                mDay = dayOfMonth;
                updateDisplay();
            }
        };

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
        return new DatePickerDialog(this, mDateSetListener, mYear, mMonth,
                mDay);
    }
    return null;
}
} 
```

# session - 尝试“Session::instance();”时读取会话数据时出错 （科哈纳）

> ID：10473687
> 
> 赞同：1
> 
> 时间：2012-05-06T19:45:50.427
> 
> 标签：session, kohana, kohana-3

在 localhost 上一切正常，但在部署时，当我尝试调用 Session::instance() 时出现错误“**读取会话数据时出错”。**我的错误在哪里？也许是服务器问题或 Kohana 错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T00:32:16.253

就我而言，它是一个服务器问题。我昨天遇到了类似的问题，这就是我解决它的方法。

*   首先，将错误处理设置为 false（在 bootstrap.php 上，设置错误 => false）以便更好地诊断
*   再次刷新您的浏览器。我的在 C:\xampp\tmp 上写入错误。原来我的“tmp”文件夹丢失了（我不知道为什么，可能是由于鼠标习惯而误删除）
*   创建 tmp 文件夹，完成:)

顺便说一句，我使用 'native' 作为 kohana-session 处理程序。对于 xampp，您可以在 xampp/apache/conf/extra/httpd-xampp.conf 上查看“SetEnv TMP {your tmp dir here}”。其他 LAMP 堆栈可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:21:03.413

你可以发布你的 session.php 吗？如果您使用加密选项，您是否设置了加密密钥？您使用什么驱动程序来存储会话（文件、cookie、数据库）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T23:18:14.650

如果您将数据库（或 ORM）用于会话，那么“读取会话数据时出错”通常意味着 Kohana 无法连接到数据库。检查您是否可以连接到数据库。

如果您将文件用于会话，请检查 PHP 写入会话的文件夹是否可写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-04T20:08:54.580

我的问题出在会话“本机”kohana 3.3 中。我收到错误读取会话数据和损坏的数据或其他东西。`$_SESSION`当我检查数组中的任何数据时，例如`echo $_SESSION['x']`有我需要的值，那么为什么这告诉我错误读取？

在线出现错误：`$session = Session::instance();` 我尝试了许多解决方案（例如php.ini）但没有成功。我的第一个解决方案是：

```
try{
$session = Session::instance();
}
catch (Exception $e){//do sth. eg. restrt sesion etc..} 
```

但这是一个糟糕的解决方案，因为几个月后问题又回到了另一台服务器上。我收到消息 Database_Exception [ 1030 ]: Got error 28 from storage engine... 或 Database_Exception [ 126 ]: Incorrect key file for table '/ramdisk/mysql/tmp/#sql_138c_2.MYI'; 尝试修复它 [ SHOW FULL COLUMNS FROM `tabe`]

因此，当您的服务器上没有空间用于 mysl 存储文件时，您会收到错误“读取会话数据时出错”解决方案是在服务器上腾出一些空间。就我而言，我只是删除了一些非常旧的文件和一些日志文件。

# c++ - 允许每个时间步将多种类型转换为文本

> ID：10473693
> 
> 赞同：2
> 
> 时间：2012-05-06T19:46:35.217
> 
> 标签：c++, design-patterns, text, rendering

我正在开发我的 GUI 系统，我需要设计模式的帮助。

对于我的一个 GUI 元素，它可以包含需要在每个时间步更新的文本。但是，有几种不同类型的变量（用于文本）可以在每一帧更新，例如 float、int、unsigned int、bool 和 strings。虽然我理解需要使用一些东西，例如`atoi`将 int 转换为 char*，但在考虑“优雅”解决方案时会出现我的问题。我想过要做的事情有多个枚举，例如`TEXT_IS_FLOAT`,`TEXT_IS_INT`等，然后具有诸如, 之类的函数`SetTextAsFloat(float value)`，同时将对象放在某种更新循环上，这样它就可以在每个时间步进行诸如 aoti 之类的转换。我担心这样做是因为代码最终会因为支持许多不同的值类型而显得非常繁琐，而且不使用“良好的代码设计”。

有谁知道关于我如何设计这样一个系统来更新可以具有多种类型的文本类型输入的对象上的文本的任何建议？类将如何存储潜在的类型变量（最好没有模板）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-06T20:00:58.233

在 C++ 中，您有 STL ostringstream，它的作用类似于流，但构造字符串而不是写入文件。这是一个例子：

```
#include <sstream>  // istringstream, ostringstream, stringstream
#include <string>   // for string objects

using namespace std;  // personally I don't like std::everything...

// returns a string represented what was just updated
string build_value()
{
    int my_int;
    bool my_bool;
    float my_float;
    // the above vars are updated somehow...

    ostringstream s;  // build a string using stream syntax

    // and now the logic

   if (updated_int) {
       s << my_int;
       return s.str();  // this is a string object
   }
   else if (updated_bool) {
       s << my_bool;
       return s.str();
   }
   else if (updated_float) {
       s << my_float;
       return s.str();
   }
} 
```

您还可以创建一个帮助模板函数：

```
template <typename T>
string type_to_string(T t)
{
    ostringstream s;
    s << t;
    return s.str();
} 
```

它适用于定义流的所有类型。

# linux - 如何获取带变量的参数？

> ID：10473696
> 
> 赞同：0
> 
> 时间：2012-05-06T19:47:05.323
> 
> 标签：linux, bash, unix

当我有一些值的变量时，我在获取参数值时遇到问题。我的意思是：

*例子：*

```
./script 12 13 14 15 16

value=5
echo $value #now I see 5
$"$value" #now I want to get 16 but I don't know how to do it? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T19:52:13.780

使用[间接](http://enricozini.org/2008/tips/bash-indirection/)：

```
echo "${!value}" 
```

值 16 不需要引号，但应该在变量包含特殊字符的情况下使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:03:13.517

也试试这个：

```
value=5              #
echo "$value"        # 5 
echo ${@:$value:1}   # give you 1 arg starting from $value in the arg list 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:52:21.673

您需要[取消引用](http://mywiki.wooledge.org/BashFAQ/006)该变量

```
value=5
echo "$value"      # 5
echo "${!value}"   # will give you $5 or in your example 16 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T20:50:33.063

bashism 本质上是不可移植的。如果您依赖 ${!...} 来评估表达式，您的脚本将只能在 bash 中运行。这可能不是问题，但如果脚本的作者幸福地没有意识到缺乏可移植性，那就是一个问题。如果不依赖 bashism，这种事情是微不足道的。如果要评估字符串，请使用 eval：

```
eval echo \$$value 
```

# android - 如何使用 Linkify 发出 startActivity 而不是浏览器链接

> ID：10473697
> 
> 赞同：0
> 
> 时间：2012-05-06T19:47:09.273
> 
> 标签：android

您如何使用 Linkify 导致单击链接以发出 startActivity 而不是执行 bowser 链接？我见过的所有示例都使用 linkify 链接到一个 URL：我希望单击该链接以通过 startActivity 导致一个 Activity 的传输。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:05:05.253

我猜你已经让链接部分工作了，那是你启动活动`<intent-filter>`的**计划。**

那么你需要的是使用[Linkify.addLinks(TextView text, Pattern p, String scheme, Linkify.MatchFilter matchFilter, Linkify.TransformFilter transformFilter)](http://developer.android.com/reference/android/text/util/Linkify.html#addLinks%28android.widget.TextView,%20java.util.regex.Pattern,%20java.lang.String,%20android.text.util.Linkify.MatchFilter,%20android.text.util.Linkify.TransformFilter%29)来指定你在上一步中选择的**方案**`"com.example.myscheme"`，比方说。

# cocoa - 设置窗口可调整大小

> ID：10473700
> 
> 赞同：18
> 
> 时间：2012-05-06T19:47:20.413
> 
> 标签：cocoa, nswindow, appkit

在 IB 中，这可以通过打开或关闭“调整大小”复选框来轻松完成。我的问题是我希望我的主 NSWindow 不能调整大小，直到单击一个按钮，然后我希望它可以调整大小。

我搜索了互联网但找不到任何东西？不能以编程方式调整窗口大小吗？

提前谢谢大家！

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-06T20:21:41.490

从 10.6 开始，您可以使用`-[NSWindow setStyleMask:]`. 所以，你会做这样的事情：

在 Objective-C 中

要使其可调整大小：

```
window.styleMask |= NSWindowStyleMaskResizable; 
```

使其不可调整大小：

```
window.styleMask &= ~NSWindowStyleMaskResizable; 
```

在斯威夫特

要使其可调整大小：

```
mainWindow.styleMask = mainWindow.styleMask | NSWindowStyleMaskResizable 
```

使其不可调整大小：

```
mainWindow.styleMask = mainWindow.styleMask & ~NSWindowStyleMaskResizable 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-11-01T21:49:51.700

这个问题的 Swift 3 解决方案是使用以下`OptionSet`描述的类：

[https://developer.apple.com/reference/swift/optionset](https://developer.apple.com/reference/swift/optionset)

### 简而言之：

要替换标志集，您现在执行以下操作：

```
myWindow.styleMask = [ .resizable, .titled, .closable ] 
```

要添加标志，请执行以下操作：

```
myWindow.styleMask.insert( [ .miniaturizable, .fullscreen ] ) 
```

要删除标志，例如：

```
myWindow.styleMask.remove( [ .resizable ] ) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-06T19:54:44.483

创建窗口后不能更改其样式掩码，但可以将窗口的最小和最大框架大小设置为相同大小。在您和您的可调整大小的窗口从 nib 唤醒之后执行此操作，然后在用户单击按钮时将最大和可选的最小尺寸更改回来。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-04T10:42:53.327

在 Swift 3 中，

```
if enabled {
  window.styleMask.update(with: .resizable)
} else {
  window.styleMask.remove(.resizable)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-26T11:51:44.013

在 Xcode 8 / Swift 3 中，尝试类似：

```
// e.g., on a view controller’s viewDidAppear() method:
if let styleMask = view.window?.styleMask
{
    view.window!.styleMask = NSWindowStyleMask(rawValue: styleMask.rawValue | NSWindowStyleMask.resizable.rawValue)
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-21T20:44:19.563

我是 macOS 开发的新手。以上解决方案都不适合我（Swift 4.2）。我也没有学到太多东西（复制/粘贴对此无济于事）。

我已经创建了这个 NSWindow 子类。我在界面生成器中使用它。

```
class MainDocumentChooserW: NSWindow {

    // NOTE: This method is called when the Window is used via Interface builder.
    // Setting the styleMask like this will override the IB settings.
    override init(contentRect: NSRect, styleMask style: NSWindow.StyleMask, backing backingStoreType: NSWindow.BackingStoreType, defer flag: Bool) {
        super.init(contentRect: contentRect, styleMask: style, backing: backingStoreType, defer: flag)
        styleMask = [.miniaturizable, .titled, .closable]
    }
} 
```

在 macOS 上测试：High Sierra 10.13.6 (17G5019)。

# php - PHP 2D 数组 - 语法问题

> ID：10473704
> 
> 赞同：-2
> 
> 时间：2012-05-06T19:47:49.277
> 
> 标签：php

我有一个二维数组。如果我这样做`print_r($equities[0])`，我会得到：

```
Array
(
    [No.] => 1
    ["Ticker"] => "CAFE"
    ["Company"] => "iPath Pure Beta Coffee ETN"
    ["Price"] => 27.59
) 
```

然后我尝试为第一个元素打印“Ticker”，如下所示：

```
echo $equities[0]["Ticker"]; 
```

但是，它不打印任何东西。如何打印股票行情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T19:55:45.133

您的转储中有引号，这意味着引号也被编码到数组键名中（例如双引号）。

尝试

```
echo $equities[0]['"Ticker"'];
                  ^        ^ 
```

注意额外的单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:51:22.310

什么“不”。钥匙？尝试查看所有数组 (print_r($equities))。

# java - Java - 使用参数编写、读取和修改字符串

> ID：10473707
> 
> 赞同：2
> 
> 时间：2012-05-06T19:48:15.730
> 
> 标签：java, string

所以，我正在做一个项目，现在我有一个问题，所以我需要你的帮助:)

首先，我已经知道如何编写和读取 .txt 文件，但我想要的不仅仅是 x.hasNext()。

我想知道如何像 .ini 那样编写、读取和修改 .txt 文件。什么？简单（我认为）：

首先，写一个这样的文件：

```
[client1]
name=Bill Gates
nick=Uncle Bill
number=123456789
[client2]
name=Steve Jobs
nick=Stevie
number=987654321 
```

还有很多其他参数，就像上面一样，但是当我想读取一个特定的参数（比如某个“客户”的名字或昵称）时，我可以很容易地做到（好吧，我知道这并不容易，但我想你明白了:D)

所以，如果你已经知道我想学什么，请教我：）如果你不知道，请解释一下你不明白的地方：D

预先感谢您的每一次帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:56:20.903

您描述的格式适用于 Windows .ini 文件，从 Windows 3.x 天开始：

*   [http://en.wikipedia.org/wiki/INI_file](http://en.wikipedia.org/wiki/INI_file)

也许在 Java 中最接近“标准格式”的是“属性”文件。通常采用“名称=值”格式：

*   [http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)

如果您要编写自己的程序并发明自己的初始化文件格式，则*不会*使用 .ini 文件。相反，我建议：

1）简单的属性文件（如果可能的话）

```
 ... otherwise ... 
```

2) 一个 XML 文件（如果您需要多层次的结构化数据）

但是，如果您想读取和写入现有应用程序的现有 .ini 文件，我会：

1) 编写我自己的 .ini 解析器（不难）

```
 ... or ... 
```

2）下载并运行一个likke ini4j库：

*   [http://ini4j.sourceforge.net/](http://ini4j.sourceforge.net/)

'希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:52:36.140

来自 apache 的 commons-configuration 项目支持 INI 文件格式：

```
HierarchicalINIConfiguration config = new HierarchicalINIConfiguration(file);
Set<String> sectionNames = config.getSections();
SubnodeConfiguration section = config.configurationAt(sectionName);
String value = section.getString(keyName); 
```

查看javadocs，它很容易使用。

# javascript - jQuery .each 被广泛应用

> ID：10473715
> 
> 赞同：0
> 
> 时间：2012-05-06T19:49:31.500
> 
> 标签：javascript, jquery

我有一个小脚本，它使`li`元素可点击并将位置设置为`li`. 这运行没有错误，我的两个`console.log()`电话报告了我所期望的，但是，当您单击`li`（无论哪个`li`）时，您将被带到`href`最后一个链接的`li`. 这对我来说没有多大意义，因为我认为我已经正确处理了范围。

请纠正我的理解，让我知道我哪里出错了。

JavaScript：

```
$(".homeCTA li").each(function(){
    $href = $(this).find("a").attr("href");
    console.log($(this)); // displays the expected selector
    console.log($href); // displays the correct href
    $(this).click(function(){ window.location = $href }); // this is overriding all of the previous passes
}); 
```

HTML：

```
<ul class="homeCTA">
    <li class="left"> 
        <img src="first-source.jpg">
        <h2><a href="SearchResults.asp?Cat=1833">Yada Yada Yada</a></h2>
    </li>
    <li class="right">
        <img src="second-source.jpg">
        <h2><a href="SearchResults.asp?Cat=1832">Try the bisque</a></h2>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:51:07.943

前缀`$href`,`var`使变量[保持本地](https://developer.mozilla.org/en/JavaScript/Guide/Values,_Variables,_and_Literals#Variable_scope)。
目前，您正在覆盖一个`$href`在循环中不断被覆盖的变量。

```
$(".homeCTA li").each(function(){
    var $href = $(this).find("a").attr("href");
    console.log($(this)); // displays the expected selector
    console.log($href); // displays the correct href
    $(this).click(function(){ window.location = $href; });
}); 
```

除了循环列表项之外，您还可以使用以下代码：

```
$(".homeCTA").on('click', 'li', function(){
    window.location = $(this).find('a').attr('href');
}); 
```

# c# - 检查不同表格上存在的 2 个日期

> ID：10473716
> 
> 赞同：0
> 
> 时间：2012-05-06T19:49:34.260
> 
> 标签：c#, winforms

我有 2 个表格：Form1 和 Form2。

每个表单有 2 个日期时间成员：`startdate`和`enddate`

如何检查 Form2.startdate 和 Form2.enddate 是否在 Form1.startdate 和 Form1.enddate 之间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:56:50.380

这取决于您如何定义“之间”。如果您真的是指“重叠”，那么您可以使用以下算法：

```
StartDate1, EndDate1
StartDate2, EndDate2 
```

这样`StartDate1`<`EndDate1`和`StartDate2`<`EndDate2`

它们重叠如果

```
StartDate2 <= EndDate1 And EndDate2 >= StartDate1 
```

如果您真的要确定一个范围完全包含在另一个范围内，那么您将使用：

```
StartDate2 >= StartDate1 And EndDate2 <= EndDate1 
```

# c++ - 为什么这个插槽会被调用两次？

> ID：10473719
> 
> 赞同：6
> 
> 时间：2012-05-06T19:50:05.093
> 
> 标签：c++, qt4, qmenubar

我的问题是，当我单击 QMenuBar 中的一个项目时，相应的插槽会被调用两次。我正在使用 Qt 4.8.1。我没有使用 Qt Designer，也没有使用“自动连接”功能。这是我的代码片段：

```
#include <iostream>
#include <QWidget>
#include <QMenuBar>

class MyWidget : public QWidget
{
        Q_OBJECT
        public:
                MyWidget(QWidget *parent = 0) : QWidget(parent)
                {
                        QMenuBar *menu = new QMenuBar(this);
                        menu->addAction("Click here");
                        menu->addAction("Or here");
                        connect(menu, SIGNAL(triggered(QAction*)), this, SLOT(handleAction(QAction*)));
                }

        public slots:
                void handleAction(QAction *action)
                {
                        std::cout << "Triggered" << std::endl;
                }

}; 
```

主要功能：

```
#include "main.h"
#include <QApplication>

int main(int argc, char **argv)
{
    QApplication app(argc, argv);
    MyWidget w;
    w.show();

    return app.exec();
} 
```

如果您编译它（使用 MOC 文件），您会看到单击“单击此处”将打印一次“触发”，并打印两次“或此处”。我不明白为什么。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-30T18:02:09.603

用于`Qt::UniqueConnection`解决：

```
connect(menu, SIGNAL(triggered(QAction*)), this, SLOT(handleAction(QAction*)), Qt::UniqueConnection); 
```

[http://doc.qt.io/qt-4.8/qt.html#ConnectionType-enum](http://doc.qt.io/qt-4.8/qt.html#ConnectionType-enum)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T21:03:00.717

在使用 Qt 4.8.1 的 Windows 7 x64 上，我得到了与您相同的错误结果。这当然看起来像一个错误。

[报告并修复](https://bugreports.qt.io/browse/QTBUG-6741)了一个错误，该错误在 Mac OS X 上似乎具有相同的行为。虽然它已被关闭，但有一条评论表明他们在 Windows 7 上观察到了这个问题。

我认为提交新的错误报告将是一个好主意。

# redirect - 不重定向 JavaFaces 2.0 Primefaces p:commandButton op:commandLink

> ID：10473722
> 
> 赞同：1
> 
> 时间：2012-05-06T19:50:21.970
> 
> 标签：redirect, jsf-2, primefaces, faces-config

我在重定向方面遇到了一些问题。我正在使用 primefaces 和 JSF 2.1。问题是 JSF 2.1 没有导航规则并且搜索我发现我可以输入“faces-redirect=true”的答案。问题是那不起作用，我不知道为什么。浏览器一直告诉我“No se puede encontrar el caso de navegación 巧合 del ID de vista '/Autenticacion/login.xhtml' para la acción {1}' con el resultado '{2}'” 就像我没有导航“/Autenticacion/login.xhtml”的情况下，第一个动作和第二个结果。使用 JSF 2.1 不会创建 faces-config.xml 文件，我创建了它并添加了该操作的规则，但问题仍然存在。

这些是我的文件：

登录豆

```
@ManagedBean(name="controlLogin")
@SessionScoped
public class ControladorLogin implements Serializable{

   public String logIn(){
       //actions
       return "index" //algo tryed index.xhtml or index?faces-redirect=true
   } 
```

PRIMEFACES 命令按钮

```
<p:commandButton action="#{controlLogin.logIn}" value="Loguearse" ajax="false"/> 
```

我也尝试使用 commandLink

```
<p:commandLink action="#{controlLogin.logIn}" value="Loguearse" ajax="false"/> 
```

Faces-CONFIG.XML //如果不需要我可以删除它

```
<navigation-rule>
    <from-view-id>/Autenticacion/login.xhtml</from-view-id>
    <navigation-case>
        <from-action>#{controlLogin.logIn}</from-action>
        <from-outcome>index</from-outcome>
        <to-view-id>/index.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

因此，如果有人可以帮助我进行此重定向...谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T21:05:28.943

实际上，在**JSF 2.x**中，您不必定义导航规则。您根本不需要`faces-config.xml`，只是在一些**注释**未涵盖的特殊情况下（例如 custom `ExceptionHandlerFactory`）。

使用`return "index?faces-redirect=true"`完全没问题。`faces-redirect=true`意味着你`redirect`从一个 xhtml 到另一个而不是**default** `forward`。

[转发和重定向之间的区别](https://stackoverflow.com/questions/6068891/difference-between-jsp-forward-and-redirect)

在这种情况下，只需确保您`index.xhtml`的页面与您尝试访问它的页面位于同一目录中。

否则，如果`index`页面位于**另一个**目录中，那么您必须在开头指定带有正斜杠的**绝对路径**`/`，如下所示：`"/indexFolder/index?faces-redirect=true"`.

# c# - 页面点击计数器 - 如何检查它是否真的有效

> ID：10473727
> 
> 赞同：0
> 
> 时间：2012-05-06T19:50:45.577
> 
> 标签：c#, asp.net, html

我不得不为我们的网站编写一个页面点击计数器。（仅限客户）我知道我的柜台被一些客户滥用，他们编写了一个应用程序，白天多次点击该页面。

例如，是否可以通过使用 .Net WebClient 请求页面来影响命中计数器？我试图找出方法以及如何对抗它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:59:51.750

> 例如，是否可以通过使用 .Net WebClient 请求页面来影响命中计数器？

绝对地。如果客户在正确获取 cookie、用户代理字符串和辅助请求（例如请求页面引用的 JavaScript 和 CSS 资源）方面投入了足够多的工作，那么服务器就*不可能*判断请求是来自 .NET`WebClient`还是来自一个真正的网络浏览器。

但是还有另一个问题：客户甚至不需要花费大量精力来编写程序来自动加载您的站点并采取一些行动。使用[Selenium](http://seleniumhq.org/)等工具，他们可以编写实际加载 Web 浏览器的脚本，然后执行与真实用户可能执行的相同操作。因此，即使您修改您的命中计数器以包括对来自真实 Web 浏览器的请求的一些神话般的超级复杂检查，您仍然会被启动真实 Web 浏览器以向您的站点发出自动请求的用户所阻挠。

> 我试图找出方法以及如何对抗它。

如果没有这个命中计数器的代码，我就不能提出太多的改进来限制客户通过编写程序来增加命中计数器的能力。您可以使用验证码，但这对于诚实的客户来说是一个非常大的不便。

您说您知道某些客户正在滥用该网站。大概，您知道这些客户是谁，并且有一些通常有用的技巧可以使不诚实行为不付钱。您可以将这些客户踢出网站，因为他们不诚实。在一个稍微不那么激烈的措施中，您可以包含一个您的命中计数器忽略的客户用户名黑名单，然后这些客户的程序实际上不会影响命中计数器。在这些客户几乎看不到的更温和的措施中，您可以使这些客户的页面加载速度变慢，这将限制他们的恶意行为的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:56:37.347

您可以通过使用 cookie、服务器端会话或记录 IP 地址来跟踪人类和自动访问者来防止滥用，并禁止每次重复访问的计数。

# enumerable - 使短语可枚举？

> ID：10473734
> 
> 赞同：0
> 
> 时间：2012-05-06T19:51:51.233
> 
> 标签：enumerable, phrase

我正在编写一个包，它需要使一些自定义短语（例如一堆城市名称）可以从外部访问。（就像一个普通的枚举名称'MyEnum'，当用户输入“MyEnum.”时，它的所有枚举成员都会弹出让用户选择）

我尝试枚举一堆城市名称如下，但当然它没有用。

```
public enum City
{
Los Angeles,
Santa Francisco,
Houston,
New York
} 
```

我还阅读了一些关于在枚举字段上使用字符串属性的早期文章，但是这些字符串无法弹出以供外部使用。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:12:14.473

我认为它会导致错误，因为空格。

试试这个

```
public enum City
{
    LosAngeles,
    SantaFrancisco,
    Houston,
    NewYork
} 
```

[这是一个如何使用枚举的示例。](http://www.dotnetperls.com/enum)

# php - Codeigniter - 如果选项不同，则添加具有相同 ID 的产品

> ID：10473740
> 
> 赞同：3
> 
> 时间：2012-05-06T19:52:28.287
> 
> 标签：php, codeigniter, cart

我目前正在构建一个简单的电子商务网站，但遇到了一个有趣的问题。

基本上，产品在产品表中，但也有许多其他选项，例如价格、颜色等……其中一些对总价格有影响。

但是，如果存在相同的产品但具有不同的选项集，那么产品 ID 显然是相同的，并且该项目不会添加到 codeigniter 购物车中。

我想到的最简单的方法是允许将具有相同 id 的产品包含在购物车中，这很容易吗？有没有更好的方法来解决这个问题？

任何想法都会非常有帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T20:37:08.793

好的，所以我找到了我的问题的答案，人们可​​能会觉得有帮助。

基本上，我对 Codeigniter 的购物车类不支持的选项使用多维数组。

由于数组显示为数组，但也可能破坏了用于在 Codeigniter Cart 类中生成哈希的 implode 函数，因此生成了相同的行 ID。

要解决此问题，您可以在 CI_Cart 类中简单地替换此行：

```
$rowid = md5($items['id'].implode('', $items['options'])); 
```

用这条线：

```
$rowid = md5($items['id'].serialize($items['options'])); 
```

解决问题。

然后，这将创建多维数组的可存储表示作为文本，然后对其进行哈希处理，如果有一个多维数组用作选项值，则该表示将始终是唯一的。

# c# - 如何以编程方式提取 Windows Phone 的 LiveID？

> ID：10473742
> 
> 赞同：3
> 
> 时间：2012-05-06T19:52:43.200
> 
> 标签：c#, .net, windows-phone-7, liveid

有没有办法查找与电话相关的 liveID（以 myliveid@hotmail.co.uk 之类的方式）？我认为这在 Android 中是可能的。UserExtendedProperties.TryGetValue("ANID") 不会有帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:47:46.850

如果您运行 UserExtendedProperties.TryGetValue("ANID") 您将获得一个 GUID（Windows 实时匿名 id），但您不能使用该 GUID 将其链接到诸如 myliveid@hotmail.co.uk 之类的实时 ID

# jsf - 是否可以在动作属性中使用 EL 条件运算符？

> ID：10473743
> 
> 赞同：28
> 
> 时间：2012-05-06T19:53:10.583
> 
> 标签：jsf, action, el, conditional-operator

条件运算符适用于许多属性，例如“渲染”“值”等。

但它在行动中不起作用？还是我做错了？

```
<h:commandLink action="#{true ? bean.methodTrue() : bean.methodFalse()}"/> 
```

错误：javax.el.E​​LException：不是有效的方法表达式

（我使用 primefaces ajax 动作属性实现了它）

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-28T19:46:33.777

这是不支持的。该`action`属性应该是 a `MethodExpression`，但条件运算符使其成为一种`ValueExpression`语法。我认为`MethodExpression`EL 中的 s 永远不会支持这一点。

你基本上有2个选择：

1.  创建一个委托作业的单个操作方法。

    ```
    <h:commandButton ... action="#{bean.method}" /> 
    ```

    和

    ```
    public String method() {
        return condition ? methodTrue() : methodFalse();
    } 
    ```

    *如有必要，将其作为方法参数传递给`#{bean.method(condition)}`*.

2.  或者，有条件地渲染 2 个按钮。

    ```
    <h:commandButton ... action="#{bean.methodTrue}" rendered="#{bean.condition}" />
    <h:commandButton ... action="#{bean.methodFalse}" rendered="#{not bean.conditon}" /> 
    ```

# python - 为什么 Python 的不喜欢列表？

> ID：10473744
> 
> 赞同：18
> 
> 时间：2012-05-06T19:53:21.217
> 
> 标签：python, python-2.x

在 Python (2.7.2) 中，为什么

```
import dis
dis.dis("i in (2, 3)") 
```

按预期工作而

```
import dis
dis.dis("i in [2, 3]") 
```

提出：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/lib/python2.7/dis.py", line 45, in dis
  disassemble_string(x)
File "/usr/lib/python2.7/dis.py", line 112, in disassemble_string
  labels = findlabels(code)
File "/usr/lib/python2.7/dis.py", line 166, in findlabels
 oparg = ord(code[i]) + ord(code[i+1])*256
IndexError: string index out of range 
```

请注意，这不会影响 Python3。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-06T20:39:00.140

## 简答

在 Python 2.x 中，该`str`类型保存原始字节，因此`dis`假设如果您将字符串传递给它，它将获得已编译的字节码。它会尝试反汇编您作为字节码传递的字符串，并且——纯粹是由于 Python 字节码的实现细节——在`i in (2,3)`. 但是，显然，它返回的是乱码。

在 Python 3.x 中，`str`类型用于*字符串*，`bytes`类型用于原始字节，因此`dis`可以区分已编译的字节码和字符串——如果它获取字符串，则假定它正在获取源代码。

* * *

## 长答案

这是我为解决这个问题而遵循的思考过程。

1.  我在我的 Python (3.2) 上尝试过：

    ```
    >>> import dis
    >>> dis.dis("i in (2,3)")  
      1           0 LOAD_NAME                0 (i)
                  3 LOAD_CONST               2 ((2, 3))
                  6 COMPARE_OP               6 (in)
                  9 RETURN_VALUE
    >>> dis.dis("i in [2,3]")
      1           0 LOAD_NAME                0 (i)
                  3 LOAD_CONST               2 ((2, 3))
                  6 COMPARE_OP               6 (in)
                  9 RETURN_VALUE 
    ```

    显然，这行得通。

2.  我在 Python 2.7 上试过：

    ```
    >>> import dis
    >>> dis.dis("i in (2,3)")
              0 BUILD_MAP       26912
              3 JUMP_FORWARD    10272 (to 10278)
              6 DELETE_SLICE+0
              7 <44>
              8 DELETE_SLICE+1
              9 STORE_SLICE+1
    >>> dis.dis("i in [2,3]")
    Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
      File "C:\Python27\lib\dis.py", line 45, in dis
        disassemble_string(x)
      File "C:\Python27\lib\dis.py", line 112, in disassemble_string
        labels = findlabels(code)
      File "C:\Python27\lib\dis.py", line 166, in findlabels
        oparg = ord(code[i]) + ord(code[i+1])*256
    IndexError: string index out of range 
    ```

    啊哈！另请注意，Python 3.2 中生成的字节码是您所期望的（“加载`i`、加载`(2,3)`、测试成员资格、返回结果”），而您在 Python 2.7 中得到的是乱码。显然，`dis`在 2.7 中将字符串反编译为字节码，但在 3.2 中将其编译为 Python。

3.  我查看了`dis.dis`. 以下是关键点：

    蟒蛇 2.7：

    ```
    elif isinstance(x, str):
        disassemble_string(x) 
    ```

    蟒蛇 3.2：

    ```
     elif isinstance(x, (bytes, bytearray)): # Raw bytecode
           _disassemble_bytes(x)
       elif isinstance(x, str):    # Source code
           _disassemble_str(x) 
    ```

    只是为了好玩，让我们通过`dis`在 Python 3 中传递相同的字节来检查这一点：

    ```
    >>> dis.dis("i in (2,3)".encode())
              0 BUILD_MAP       26912
              3 JUMP_FORWARD    10272 (to 10278)
              6 <50>
              7 <44>
              8 <51>
              9 <41> 
    ```

    啊哈！胡言乱语！（但请注意，它的胡言乱语略有不同——字节码已随 Python 版本而改变！）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-06T20:21:29.370

`dis.dis`期望字节码作为参数，而不是 python 源代码。尽管您的第一个示例“有效”，但它没有提供任何有意义的输出。你可能想要：

```
import compiler, dis

code = compiler.compile("i in [2, 3]", '', 'single')
dis.dis(code) 
```

这按预期工作。（我只在 2.7 中测试过）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-06T21:03:23.587

如果您只是想获取简单表达式的字节码，将其作为 lambda 传递给 dis 并将您的表达式作为 lambda 的主体是最简单的：

```
>>> import dis
>>> dis.dis(lambda i : i in [3,2])
  1           0 LOAD_FAST                0 (i)
              3 LOAD_CONST               2 ((3, 2))
              6 COMPARE_OP               6 (in)
              9 RETURN_VALUE 
```

# javascript - 比较字符串 Javascript 返回 %of Likely

> ID：10473745
> 
> 赞同：113
> 
> 时间：2012-05-06T19:53:28.287
> 
> 标签：javascript, string, algorithm, comparison

我正在寻找一个 JavaScript 函数，它可以比较两个字符串并返回它们相似的可能性。我看过 soundex 但这对于多词字符串或非名称来说并不是很好。我正在寻找类似的功能：

```
 function compare(strA,strB){

    }

    compare("Apples","apple") = Some X Percentage. 
```

该函数适用于所有类型的字符串，包括数字、多字值和名称。也许我可以使用一个简单的算法？

最终这些都没有达到我的目的，所以我使用了这个：

```
 function compare(c, u) {
            var incept = false;
            var ca = c.split(",");
            u = clean(u);
            //ca = correct answer array (Collection of all correct answer)
            //caa = a single correct answer word array (collection of words of a single correct answer)
            //u = array of user answer words cleaned using custom clean function
            for (var z = 0; z < ca.length; z++) {
                caa = $.trim(ca[z]).split(" ");
                var pc = 0;
                for (var x = 0; x < caa.length; x++) {
                    for (var y = 0; y < u.length; y++) {
                        if (soundex(u[y]) != null && soundex(caa[x]) != null) {
                            if (soundex(u[y]) == soundex(caa[x])) {
                                pc = pc + 1;
                            }
                        }
                        else {
                            if (u[y].indexOf(caa[x]) > -1) {
                                pc = pc + 1;
                            }
                        }
                    }
                }
                if ((pc / caa.length) > 0.5) {
                    return true;
                }
            }
            return false;
        }

        // create object listing the SOUNDEX values for each letter
        // -1 indicates that the letter is not coded, but is used for coding
        //  0 indicates that the letter is omitted for modern census archives
        //                              but acts like -1 for older census archives
        //  1 is for BFPV
        //  2 is for CGJKQSXZ
        //  3 is for DT
        //  4 is for L
        //  5 is for MN my home state
        //  6 is for R
        function makesoundex() {
            this.a = -1
            this.b = 1
            this.c = 2
            this.d = 3
            this.e = -1
            this.f = 1
            this.g = 2
            this.h = 0
            this.i = -1
            this.j = 2
            this.k = 2
            this.l = 4
            this.m = 5
            this.n = 5
            this.o = -1
            this.p = 1
            this.q = 2
            this.r = 6
            this.s = 2
            this.t = 3
            this.u = -1
            this.v = 1
            this.w = 0
            this.x = 2
            this.y = -1
            this.z = 2
        }

        var sndx = new makesoundex()

        // check to see that the input is valid
        function isSurname(name) {
            if (name == "" || name == null) {
                return false
            } else {
                for (var i = 0; i < name.length; i++) {
                    var letter = name.charAt(i)
                    if (!(letter >= 'a' && letter <= 'z' || letter >= 'A' && letter <= 'Z')) {
                        return false
                    }
                }
            }
            return true
        }

        // Collapse out directly adjacent sounds
        // 1\. Assume that surname.length>=1
        // 2\. Assume that surname contains only lowercase letters
        function collapse(surname) {
            if (surname.length == 1) {
                return surname
            }
            var right = collapse(surname.substring(1, surname.length))
            if (sndx[surname.charAt(0)] == sndx[right.charAt(0)]) {
                return surname.charAt(0) + right.substring(1, right.length)
            }
            return surname.charAt(0) + right
        }

        // Collapse out directly adjacent sounds using the new National Archives method
        // 1\. Assume that surname.length>=1
        // 2\. Assume that surname contains only lowercase letters
        // 3\. H and W are completely ignored
        function omit(surname) {
            if (surname.length == 1) {
                return surname
            }
            var right = omit(surname.substring(1, surname.length))
            if (!sndx[right.charAt(0)]) {
                return surname.charAt(0) + right.substring(1, right.length)
            }
            return surname.charAt(0) + right
        }

        // Output the coded sequence
        function output_sequence(seq) {
            var output = seq.charAt(0).toUpperCase() // Retain first letter
            output += "-" // Separate letter with a dash
            var stage2 = seq.substring(1, seq.length)
            var count = 0
            for (var i = 0; i < stage2.length && count < 3; i++) {
                if (sndx[stage2.charAt(i)] > 0) {
                    output += sndx[stage2.charAt(i)]
                    count++
                }
            }
            for (; count < 3; count++) {
                output += "0"
            }
            return output
        }

        // Compute the SOUNDEX code for the surname
        function soundex(value) {
            if (!isSurname(value)) {
                return null
            }
            var stage1 = collapse(value.toLowerCase())
            //form.result.value=output_sequence(stage1);

            var stage1 = omit(value.toLowerCase())
            var stage2 = collapse(stage1)
            return output_sequence(stage2);

        }

        function clean(u) {
            var u = u.replace(/\,/g, "");
            u = u.toLowerCase().split(" ");
            var cw = ["ARRAY OF WORDS TO BE EXCLUDED FROM COMPARISON"];
            var n = [];
            for (var y = 0; y < u.length; y++) {
                var test = false;
                for (var z = 0; z < cw.length; z++) {
                    if (u[y] != "" && u[y] != cw[z]) {
                        test = true;
                        break;
                    }
                }
                if (test) {
        //Don't use & or $ in comparison
                    var val = u[y].replace("$", "").replace("&", "");
                    n.push(val);
                }
            }
            return n;
        } 
```

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2016-04-12T07:11:14.617

这是基于 Levenshtein 距离的答案[https://en.wikipedia.org/wiki/Levenshtein_distance](https://en.wikipedia.org/wiki/Levenshtein_distance)

```
function similarity(s1, s2) {
  var longer = s1;
  var shorter = s2;
  if (s1.length < s2.length) {
    longer = s2;
    shorter = s1;
  }
  var longerLength = longer.length;
  if (longerLength == 0) {
    return 1.0;
  }
  return (longerLength - editDistance(longer, shorter)) / parseFloat(longerLength);
} 
```

用于计算编辑距离

```
function editDistance(s1, s2) {
  s1 = s1.toLowerCase();
  s2 = s2.toLowerCase();

  var costs = new Array();
  for (var i = 0; i <= s1.length; i++) {
    var lastValue = i;
    for (var j = 0; j <= s2.length; j++) {
      if (i == 0)
        costs[j] = j;
      else {
        if (j > 0) {
          var newValue = costs[j - 1];
          if (s1.charAt(i - 1) != s2.charAt(j - 1))
            newValue = Math.min(Math.min(newValue, lastValue),
              costs[j]) + 1;
          costs[j - 1] = lastValue;
          lastValue = newValue;
        }
      }
    }
    if (i > 0)
      costs[s2.length] = lastValue;
  }
  return costs[s2.length];
} 
```

用法

```
similarity('Stack Overflow','Stack Ovrflw') 
```

返回 0.8571428571428571

* * *

你可以在下面玩它：

```
function checkSimilarity(){
  var str1 = document.getElementById("lhsInput").value;
  var str2 = document.getElementById("rhsInput").value;
  document.getElementById("output").innerHTML = similarity(str1, str2);
}

function similarity(s1, s2) {
      var longer = s1;
      var shorter = s2;
      if (s1.length < s2.length) {
        longer = s2;
        shorter = s1;
      }
      var longerLength = longer.length;
      if (longerLength == 0) {
        return 1.0;
      }
      return (longerLength - editDistance(longer, shorter)) / parseFloat(longerLength);
    }

    function editDistance(s1, s2) {
      s1 = s1.toLowerCase();
      s2 = s2.toLowerCase();

      var costs = new Array();
      for (var i = 0; i <= s1.length; i++) {
        var lastValue = i;
        for (var j = 0; j <= s2.length; j++) {
          if (i == 0)
            costs[j] = j;
          else {
            if (j > 0) {
              var newValue = costs[j - 1];
              if (s1.charAt(i - 1) != s2.charAt(j - 1))
                newValue = Math.min(Math.min(newValue, lastValue),
                  costs[j]) + 1;
              costs[j - 1] = lastValue;
              lastValue = newValue;
            }
          }
        }
        if (i > 0)
          costs[s2.length] = lastValue;
      }
      return costs[s2.length];
    }
```

```
<div><label for="lhsInput">String 1:</label> <input type="text" id="lhsInput" oninput="checkSimilarity()" /></div>
<div><label for="rhsInput">String 2:</label> <input type="text" id="rhsInput" oninput="checkSimilarity()" /></div>
<div>Match: <span id="output">No Input</span></div>
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-03-27T10:22:07.153

使用**[这个](https://www.npmjs.com/package/string-similarity)**库进行字符串相似性对我来说就像一个魅力！

这是示例 -

```
var similarity = stringSimilarity.compareTwoStrings("Apples","apple");    // => 0.88 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-06T20:12:35.513

这是一个非常简单的函数，它进行比较并根据等效返回百分比。虽然它尚未针对所有可能的情况进行测试，但它可能会帮助您入门。

```
function similar(a,b) {
    var equivalency = 0;
    var minLength = (a.length > b.length) ? b.length : a.length;    
    var maxLength = (a.length < b.length) ? b.length : a.length;    
    for(var i = 0; i < minLength; i++) {
        if(a[i] == b[i]) {
            equivalency++;
        }
    }

    var weight = equivalency / maxLength;
    return (weight * 100) + "%";
}
alert(similar("test","tes"));   // 75%
alert(similar("test","test"));  // 100%
alert(similar("test","testt")); // 80%
alert(similar("test","tess"));  // 75% 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-12-05T18:55:00.680

查找两个字符串之间的相似度；我们可以使用不止一种或两种方法，但我更倾向于使用**“[骰子系数](https://en.wikipedia.org/wiki/S%C3%B8rensen%E2%80%93Dice_coefficient)”**。哪个更好！据我所知，比使用**“ [Levenshtein distance](https://en.wikipedia.org/wiki/Levenshtein_distance) ”**

使用来自 npm 的这个 ' [string-similarity](https://www.npmjs.com/package/string-similarity) ' 包，您将能够处理我上面所说的内容。

一些简单的使用示例是

```
var stringSimilarity = require('string-similarity');

var similarity = stringSimilarity.compareTwoStrings('healed', 'sealed'); 

var matches = stringSimilarity.findBestMatch('healed', ['edward', 'sealed', 'theatre']); 
```

有关更多信息，请访问上面给出的链接。谢谢你。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-05-06T20:08:06.640

只是我很快写的一个可能足以满足您的目的：

```
function Compare(strA,strB){
    for(var result = 0, i = strA.length; i--;){
        if(typeof strB[i] == 'undefined' || strA[i] == strB[i]);
        else if(strA[i].toLowerCase() == strB[i].toLowerCase())
            result++;
        else
            result += 4;
    }
    return 1 - (result + 4*Math.abs(strA.length - strB.length))/(2*(strA.length+strB.length));
} 
```

这对相同但大小写不同的字符 1 的权重与完全不同或缺失的字符的权重相同。它返回一个介于 0 和 1 之间的数字，1 表示字符串相同。0 表示它们没有相似之处。例子：

```
Compare("Apple", "Apple")    // 1
Compare("Apples", "Apple")   // 0.8181818181818181
Compare("Apples", "apple")   // 0.7727272727272727
Compare("a", "A")            // 0.75
Compare("Apples", "appppp")  // 0.45833333333333337
Compare("a", "b")            // 0 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-05-06T20:05:19.300

[PHP.js 库](http://phpjs.org/functions/similar_text:902)`similar_text`中的函数怎么样？

它基于[同名](http://www.php.net/manual/en/function.similar-text.php)的 PHP 函数。

```
function similar_text (first, second) {
    // Calculates the similarity between two strings  
    // discuss at: http://phpjs.org/functions/similar_text

    if (first === null || second === null || typeof first === 'undefined' || typeof second === 'undefined') {
        return 0;
    }

    first += '';
    second += '';

    var pos1 = 0,
        pos2 = 0,
        max = 0,
        firstLength = first.length,
        secondLength = second.length,
        p, q, l, sum;

    max = 0;

    for (p = 0; p < firstLength; p++) {
        for (q = 0; q < secondLength; q++) {
            for (l = 0;
            (p + l < firstLength) && (q + l < secondLength) && (first.charAt(p + l) === second.charAt(q + l)); l++);
            if (l > max) {
                max = l;
                pos1 = p;
                pos2 = q;
            }
        }
    }

    sum = max;

    if (sum) {
        if (pos1 && pos2) {
            sum += this.similar_text(first.substr(0, pos2), second.substr(0, pos2));
        }

        if ((pos1 + max < firstLength) && (pos2 + max < secondLength)) {
            sum += this.similar_text(first.substr(pos1 + max, firstLength - pos1 - max), second.substr(pos2 + max, secondLength - pos2 - max));
        }
    }

    return sum;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-08-15T15:47:51.450

[模糊](https://github.com/Glench/fuzzyset.js)集 - 为 javascript 设置的模糊字符串。模糊集是一种数据结构，它对数据执行类似于全文搜索的操作，以确定可能的拼写错误和近似字符串匹配。请注意，这是 python 库的 javascript 端口。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-05T13:11:49.410

在某种程度上，我喜欢将[Dice 系数](https://en.wikipedia.org/wiki/S%C3%B8rensen%E2%80%93Dice_coefficient)嵌入到[字符串相似性](https://www.npmjs.com/package/string-similarity)模块中的想法。但我觉得只考虑二元组而不考虑它们的多重性会丢失一些重要数据。下面是一个也可以处理多重性的版本，我认为总体上是一个更简单的实现。我不尝试使用他们的 API，只提供一个函数，该函数在一些操作后比较两个字符串（删除非字母数字字符，小写所有内容，压缩但不删除空格），构建在一个比较它们而不进行操作的顶部. 将其包装回他们的 API 很容易，但我认为几乎没有必要。

```
const stringSimilarity = (a, b) =>
  _stringSimilarity (prep (a), prep (b))

const _stringSimilarity = (a, b) => {
  const bg1 = bigrams (a)
  const bg2 = bigrams (b)
  const c1 = count (bg1)
  const c2 = count (bg2)
  const combined = uniq ([... bg1, ... bg2]) 
    .reduce ((t, k) => t + (Math .min (c1 [k] || 0, c2 [k] || 0)), 0)
  return 2 * combined / (bg1 .length + bg2 .length)
}

const prep = (str) => // TODO: unicode support?
  str .toLowerCase () .replace (/[^\w\s]/g, ' ') .replace (/\s+/g, ' ')

const bigrams = (str) => 
  [...str] .slice (0, -1) .map ((c, i) => c + str [i + 1])

const count = (xs) => 
  xs .reduce ((a, x) => ((a [x] = (a [x] || 0) + 1), a), {})

const uniq = (xs) => 
  [... new Set (xs)]

console .log (stringSimilarity (
  'foobar', 
  'Foobar'
)) //=> 1

console .log (stringSimilarity (
  "healed", 
  "sealed"
))//=> 0.8

console .log (stringSimilarity (
  "Olive-green table for sale, in extremely good condition.",
  "For sale: table in very good  condition, olive green in colour."
)) //=> 0.7787610619469026

console .log (stringSimilarity (
  "Olive-green table for sale, in extremely good condition.",
  "For sale: green Subaru Impreza, 210,000 miles"
)) //=> 0.38636363636363635

console .log (stringSimilarity (
  "Olive-green table for sale, in extremely good condition.",
  "Wanted: mountain bike with at least 21 gears."
)) //=> 0.1702127659574468

console .log (stringSimilarity (
  "The rain in Spain falls mainly on the plain.",
  "The run in Spun falls munly on the plun.",
)) //=> 0.7560975609756098

console .log (stringSimilarity (
  "Fa la la la la, la la la la",
  "Fa la la la la, la la",
)) //=> 0.8636363636363636

console .log (stringSimilarity (
  "car crash",
  "carcrash",
)) //=> 0.8

console .log (stringSimilarity (
  "Now is the time for all good men to come to the aid of their party.",
  "Huh?",
)) //=> 0
```

```
.as-console-wrapper {max-height: 100% !important; top: 0}
```

一些测试用例来自字符串相似性，其他的是我自己的。它们显示出与该软件包的一些显着差异，但没有什么不妥。我唯一要指出的是 和 之间的区别`"car crash"`，`"carcrash"`字符串相似性认为是相同的，我报告的相似性为`0.8`。我的版本在所有橄榄绿测试用例中发现比字符串相似度更多的相似性，但由于这些在任何情况下都是相当任意的数字，我不确定它有多大的不同；他们当然以相同的相对顺序定位它们。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-15T20:31:23.963

[字符串相似性](https://www.npmjs.com/package/string-similarity)库与[最佳答案](https://stackoverflow.com/a/36566052/1151741)（@overloard1234）**性能比较**，您可以在下面找到

根据@Tushar Walzade 使用[字符串相似性](https://www.npmjs.com/package/string-similarity)库的建议，您可以找到，例如

```
stringSimilatityLib.findBestMatch('KIA','Kia').bestMatch.rating 
```

将返回 0.0

所以，看起来**最好用 lowerCase 比较它**。

更好的基本用法（用于数组）：

```
findBestMatch(str, strArr) {
   const lowerCaseArr = strArr.map(element => element.toLowerCase());//creating lower case array
   const match = stringSimilatityLib.findBestMatch(str.toLowerCase(), lowerCaseArr).bestMatch; //trying to find bestMatch
   if (match.rating > 0) {
      const foundIndex = lowerCaseArr.findIndex(x => x === match.target); //finding the index of found best case
      return strArr[foundIndex]; //returning initial value from array
   }
    return null;
}, 
```

**表现**

此外，我在这里比较了最佳答案（由@overloard1234 制作）和字符串相似性库（v4.0.4）。

你可以在这里找到结果：[https ://jsbench.me/szkzojoskq/1](https://jsbench.me/szkzojoskq/1)

[![性能测试](../Images/ac7d5d60612a294f003f805d94b1e5ea.png)](https://i.stack.imgur.com/Egj6b.png)

**结果**：字符串相似度大约快两倍

只是为了好玩：string-similarity library v2.0 的速度比最新的 4.0.4 慢 2.2 倍。所以更新它，如果你还在使用 < 3.0 :)

# c++ - C++ 中的 O(1) 查找

> ID：10473746
> 
> 赞同：5
> 
> 时间：2012-05-06T19:53:30.110
> 
> 标签：c++, data-structures, stl, std

C++ 中是否有带有`O(1)`查找功能的数据结构？

A`std::map`有`O(log(n))`查找时间（对吗？）。

我正在寻找`std`最好的东西（所以不是Boost pls）。另外，如果有，它是如何工作的？

编辑：好的，我猜我还不够清楚。我想关联值，有点像`map`. 所以我想要一些类似的东西`std::map<int,string>`，`find`并且`insert`应该采取`O(1)`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T19:56:56.353

数组具有 O(1) 查找。c++11 的哈希表 (std::unordered_map) 具有 O(1) 查找。（摊销，但或多或​​少是恒定的。）

我还想提一下，像地图这样的基于树的数据结构具有很大的优势，并且只有 log(n)，这往往是不够的。

回答您的编辑 - >您可以将数组的索引与其中一个值相关联。哈希表也是关联的，但完美的哈希（每个键映射到恰好 1 个值）确实很难获得。

值得一提的另一件事是：数组具有出色的缓存性能（由于局部性，也就是元素彼此相邻，因此它们可以被 prefecting 引擎预取到缓存）。树，不多。在元素数量合理的情况下，哈希性能可能比渐近性能更为关键。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T19:56:35.943

*具有O(1)*查找（忽略键的大小）的数据结构包括：

*   数组
*   哈希表

对于复杂类型，平衡树在*O(log n)*时会很好，或者有时你可以在*O(k)时使用*[帕特里夏](http://en.wikipedia.org/wiki/Radix_tree)树。

 *供参考：[搜索结构的复杂性](http://en.wikipedia.org/wiki/Search_data_structure#Asymptotic_amortized_worst-case_analysis)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T19:55:41.440

[数组](http://www.cplusplus.com/doc/tutorial/arrays/)有`O(1)`查找。*

# ios - 执行搜索后更新节标题值

> ID：10473748
> 
> 赞同：0
> 
> 时间：2012-05-06T19:53:47.027
> 
> 标签：ios

我有一个实现 UISearchBarDelegate 的 UITableView。我的 self.searchDisplayController.searchResultsTableView 中有两个部分，并希望使用返回的结果数更新其中的 UILabel。做这个的最好方式是什么？

我正在使用 CoreData。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:35:34.863

您需要在`UITableView`数据源方法中处理适当的值获取`- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section`。然后，一旦您获得新值（并填充您将在该方法中使用的任何源），只需调用`[myTableView reloadData]`.

因此，假设您将标题标题存储在一个名为`HeaderTitles`. （**这假设你有一个 NSMutableArray/NSArray 已经填充了你的部分标题标题**）

```
// This is a method I made up, which is where you get the data returned...
- (void)gotNewTitle:(NSString *)title forSection:(NSUInteger)section {
    [[self HeaderTitles] replaceObjectAtIndex:section withObject:title];
    [[self myTableView] reloadData];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    return [[self HeaderTitles] objectAtIndex:section];
} 
```

如果您不想使用 NSArray，因为您肯定有 2 个部分，您可以使用以下方法（假定 2 个属性，两者`NSString`和`FirstSectionTitle`）`SecondSectionTitle`：

```
- (void)gotNewTitle:(NSString *)title forSection:(NSUInteger)section {
switch (section) {
    case 0:
        [self setFirstSectionTitle:title];
        break;
    case 1:
        [self setSecondSectionTitle:title];
        break;
    default:
        break;
}
[[self myTableView] reloadData];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    switch (section) {
        case 0:
            return [self FirstSectionTitle];
            break;
        case 1:
            return [self SecondSectionTitle];
            break;
        default:
            return @"";
            break;
    }
} 
```

# c# - 如何从 json 提要中读取数据 - Windows Phone

> ID：10473749
> 
> 赞同：0
> 
> 时间：2012-05-06T19:53:52.060
> 
> 标签：c#, json, windows-phone-7

我已经为此工作了一段时间，我试图从 Json 中获取公司 ID 和名称，但我得到：NullExceptionReference（来自：DataContractJsonSerializer）。

这是我的代码：

```
 public partial class MainPage : PhoneApplicationPage
{
    // Constructor
    public MainPage()
    {
        InitializeComponent();
        myButton.Click += new RoutedEventHandler(myButton_Click);
    }
    void myButton_Click(object sender, RoutedEventArgs e)
    {

        try
        {
            WebClient webClient = new WebClient();
            Uri uri = new Uri("http://sherutnetphpapi.cloudapp.net/?method=Company");
            webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);
            try
            {
                webClient.OpenReadAsync(uri);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
    void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        MessageBox.Show("OpenRead Handler");

      //  OpenWriteCompletedEventArgs temp = (OpenWriteCompletedEventArgs)e;
        DataContractJsonSerializer serializer = null;
        try
        {
            serializer = new DataContractJsonSerializer(typeof(ObservableCollection<Brand>));
            ObservableCollection<Brand> Brands = serializer.ReadObject(e.Result) as ObservableCollection<Brand>;
            foreach (Brand b in Brands)
            {
                int id = b.CompanyID;
                string name = b.Name;
                listBrands.Items.Add(id + "             " + name);

            }

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    }
} 
```

这是类 Brand （代表公司）：

```
 public class Brand
{/*
    public string BrandName { get; set; }
    public int BrandId { get; set; }
       */
    public string CompanyGUID { get; set; }
    public int CompanyID { get; set; }
    public int CategoryID { get; set; }
    public string Name { get; set; }
    public string NameEn { get; set; }
    public string Description { get; set; }
    public string WebSite { get; set; }
    public string Num { get; set; }
    public string Num2 { get; set; }
    public string FaxNum { get; set; }
    public string Email { get; set; }
    public string Address { get; set; }
    public string Twitter { get; set; }
    public string Facebook { get; set; }
    public string GooglePlus { get; set; }
    public string App_iOS{ get; set; }
    public string App_Android { get; set; }
    public string App_WinPhone { get; set; }
    public string App_BlackBerry { get; set; }
    public string Blog { get; set; }
    public string Chat { get; set; }
    public string Icon { get; set; }
    public string SearchTags { get; set; }
    public int Rating { get; set; }
    public int Public { get; set; }
    public int ToShow { get; set; }
    public int Revision { get; set; }

} 
```

这是我试图从中读取的 Json：

```
{"schema":{"CompanyGUID":"TEXT","CompanyID":"INTEGER","CategoryID":"INTEGER","Name":"TEXT","NameEn":"TEXT","Description":"TEXT","WebSite":"TEXT","Num":"TEXT","Num2":"TEXT","FaxNum":"TEXT","Email":"TEXT","Address":"TEXT","Twitter":"TEXT","Facebook":"TEXT","GooglePlus":"TEXT","App_iOS":"TEXT","App_Android":"TEXT","App_WinPhone":"TEXT","App_BlackBerry":"TEXT","Blog":"TEXT","Chat":"TEXT","Icon":"TEXT","SearchTags":"TEXT","Rating":"REAL","Public":"INTEGER","ToShow":"INTEGER","Revision":"INTEGER"},"data":[{"CompanyGUID":"E6D72217-B58E-4618-B8C9-003CD7835AAE","CompanyID":104,"CategoryID":2,"Name":"orange","NameEn":"Orange","Description":"\u05e4\u05e8\u05d8\u05e0\u05e8 \u05ea\u05e7\u05e9\u05d5\u05e8\u05ea","WebSite":"www.orange.co.il","Num":"*054","Num2":"03-9054054","FaxNum":"074-7077858","Email":"forum@orange.co.il","Address":"\u05e8\u05d7\u05d5\u05d1 \u05e2\u05de\u05dc 8, \u05e4\u05d0\u05e8\u05e7 \u05ea\u05e2\u05e9\u05d9\u05d5\u05ea \u05d0\u05e4\u05e7, \u05ea\"\u05d3 435, \u05e8\u05d0\u05e9 \u05d4\u05e2\u05d9\u05df 48103","Twitter":"orangeIL","Facebook":"facebook.com\/ILorange","GooglePlus":"","App_iOS":"http:\/\/itunes.apple.com\/il\/app\/my-orange\/id405509584","App_Android":"https:\/\/play.google.com\/store\/apps\/details?id=il.co.orange.app.myorange","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Orange.png","SearchTags":null,"Rating":3,"Public":1,"ToShow":1,"Revision":7},{"CompanyGUID":"BB00F6EF-3F83-4C5A-BEF4-0A6EDF69E02F","CompanyID":186,"CategoryID":7,"Name":"\u05e9\u05dc\u05de\u05d4 sixt","NameEn":"Shlomo","Description":"","WebSite":"www.shlomo.co.il","Num":"*6880","Num2":"1700-501-502","FaxNum":"","Email":"","Address":"\u05e8\u05d7\u05d5\u05d1 \u05d4\u05d9\u05e6\u05d9\u05e8\u05d4 22, \u05e7\u05e8\u05d9\u05ea \u05d0\u05e8\u05d9\u05d4 \u05e4\u05ea\u05d7 \u05ea\u05e7\u05d5\u05d5\u05d4 49512","Twitter":"","Facebook":"","GooglePlus":"","App_iOS":"http:\/\/itunes.apple.com\/il\/app\/shlomo-sixt-slmh\/id364917805","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Shlomo.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"8137BAEE-A40E-49BA-AD67-0C460C0B3D91","CompanyID":194,"CategoryID":14,"Name":"\u05e2\u05d9\u05e8\u05d9\u05d9\u05ea \u05d2\u05d1\u05e2\u05ea\u05d9\u05d9\u05dd","NameEn":"Givataym","Description":"\u05e2\u05d9\u05e8\u05d9\u05d9\u05d4","WebSite":"www.givatayim.muni.il","Num":"03-5717222","Num2":"","FaxNum":"03-7313962","Email":"PniyotG@givatayim.muni.il","Address":"\u05e9\u05d9\u05e0\u05e7\u05d9\u05df ,6 \u05d2\u05d1\u05e2\u05ea\u05d9\u05d9\u05dd, \u05de\u05d9\u05e7\u05d5\u05d3 53299","Twitter":"","Facebook":"","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Givataym.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"4F4184AE-9DF3-43B1-AA04-0DC6014D8DF4","CompanyID":193,"CategoryID":14,"Name":"\u05e2\u05d9\u05e8\u05d9\u05d9\u05ea \u05e0\u05ea\u05e0\u05d9\u05d4","NameEn":"Netanya","Description":"","WebSite":"www.netanya.muni.il","Num":"09-8603126","Num2":"","FaxNum":"09-8608855","Email":"orna_p@netanya.muni.il","Address":"\u05d4\u05e6\u05d5\u05e8\u05df 6 \u05e0\u05ea\u05e0\u05d9\u05d4,  \u05e7\u05e8\u05d9\u05d9\u05ea \u05e1\u05e4\u05d9\u05e8, \u05de\u05d9\u05e7\u05d5\u05d3  42506","Twitter":"","Facebook":"","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Netanya.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"438A9A32-8F4D-437D-8758-0F775335FBA8","CompanyID":228,"CategoryID":18,"Name":"\u05d8\u05d9\u05d1 \u05d8\u05e2\u05dd","NameEn":"Tivtaam","Description":"","WebSite":"www.tivtaam.co.il","Num":"1-700-709-111","Num2":"04-6179485","FaxNum":"04-6179051","Email":"","Address":"\u05e6\u05d1\u05d9 \u05d4\u05e0\u05d7\u05dc   1  \u05e4\u05d0\u05e8\u05e7 \u05ea\u05e2\u05e9\u05d9\u05d5\u05ea \u05e2\u05de\u05e7 \u05d7\u05e4\u05e8  38777\n","Twitter":"","Facebook":"facebook.com\/TivTaamIL","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Tivtaam.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"8B7C1308-4872-45E3-A43A-0FBF53C10421","CompanyID":161,"CategoryID":14,"Name":"\u05e2\u05d9\u05e8\u05d9\u05d9\u05ea \u05e8\u05d0\u05e9\u05d5\u05df \u05dc\u05e6\u05d9\u05d5\u05df","NameEn":"Rishon","Description":"","WebSite":"www.rishonlezion.muni.il","Num":"106","Num2":"03-9542799","FaxNum":"03-9542772","Email":"etil@rishonlezion.muni.il","Address":"\u05e8\u05d7' \u05d4\u05db\u05e8\u05de\u05dc 20, \u05e8\u05d0\u05e9\u05d5\u05df \u05dc\u05e6\u05d9\u05d5\u05df","Twitter":"","Facebook":"facebook.com\/pages\/rswn-lywn\/rswn-lywn\/30700351098","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Rishon.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"5D0CF5A0-DCF7-404F-8ED9-107478AC034C","CompanyID":138,"CategoryID":5,"Name":"\u05de\u05e0\u05d5\u05e8\u05d4-\u05de\u05d1\u05d8\u05d7\u05d9\u05dd","NameEn":"Menora","Description":"","WebSite":"www.menora.co.il","Num":"*2066","Num2":"03-7107777","FaxNum":"03-7107788","Email":"sherut@menora.co.il","Address":"\u05d1\u05d9\u05ea \u05de\u05e0\u05d5\u05e8\u05d4 \u05de\u05d1\u05d8\u05d7\u05d9\u05dd, \u05ea.\u05d3\. 927, \u05ea\"\u05d0","Twitter":"","Facebook":"facebook.com\/profile.php?id=100000825403324","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Menora.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"0679A343-3590-4E62-9FA0-13E4B18C5A80","CompanyID":224,"CategoryID":18,"Name":"\u05e9\u05d5\u05e4\u05e8\u05e1\u05dc","NameEn":"Shufersal","Description":"","WebSite":"www.shufersal.co.il","Num":"1800-68-68-68","Num2":"03-9481515","FaxNum":"03-9480906","Email":"","Address":"\u05e9\u05de\u05d5\u05d8\u05e7\u05d9\u05df   30  \u05e8\u05d0\u05e9\u05d5\u05df \u05dc\u05e6\u05d9\u05d5\u05df  75363","Twitter":"","Facebook":"facebook.com\/shufersal","GooglePlus":"","App_iOS":"http:\/\/itunes.apple.com\/il\/app\/swprsl\/id411873937","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Shufersal.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"6E2F633A-BD18-44F9-8D84-14A136FC3C63","CompanyID":153,"CategoryID":10,"Name":"\u05d0\u05e1\u05dd","NameEn":"Osem","Description":"","WebSite":"www.osem.co.il","Num":"1-700-70-76-76","Num2":"","FaxNum":"","Email":"","Address":"\u05e7\u05e8\u05d9\u05ea \u05d0\u05e1\u05dd, \u05ea.\u05d3\. 934 \u05e9\u05d5\u05d4\u05dd 60850","Twitter":"","Facebook":"facebook.com\/pages\/Osem-sm\/45502578020","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Osem.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"66B7C3CB-6FAB-481B-AC04-194E2A48BF9F","CompanyID":109,"CategoryID":2,"Name":"\u05d1\u05d6\u05e7 \u05d1\u05d9\u05e0\u05dc\u05d0\u05d5\u05de\u05d9","NameEn":"BezeqInt","Description":"","WebSite":"www.bezeqint.net","Num":"*3014","Num2":"076-5014014","FaxNum":"03-9285038","Email":"cservice@bezeqint.net","Address":"\u05d4\u05e9\u05d7\u05dd 40, \u05e4\u05ea\u05d7 \u05ea\u05e7\u05d5\u05d5\u05d4  49170","Twitter":"BezeqBenleumi","Facebook":"facebook.com\/BezeqBenleumi","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"http:\/\/212.179.95.132\/chat\/livehelp.php","Icon":"BezeqInt.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":6},{"CompanyGUID":"7F4703BE-9FC9-4ED3-B439-1AD473A94AB0","CompanyID":149,"CategoryID":10,"Name":"\u05de\u05d9 \u05e2\u05d3\u05df","NameEn":"MeyEden","Description":"","WebSite":"www.meyeden.co.il","Num":"*5335","Num2":"1-700-70-2002","FaxNum":"03-5781486","Email":"","Address":"\u05d4\u05dc\u05d7\"\u05d9 19 \u05d1\u05e0\u05d9 \u05d1\u05e8\u05e7 51200","Twitter":"Mei_Eden","Facebook":"facebook.com\/pages\/my-dn\/135950196419799","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"MeyEden.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":6},{"CompanyGUID":"A2EEDA0D-9AF1-468A-A6F2-1BF3CF1524AE","CompanyID":129,"CategoryID":9,"Name":"\u05de\u05e9\u05e8\u05d3 \u05d4\u05e4\u05e0\u05d9\u05dd","NameEn":"Moin","Description":"","WebSite":"www.moin.gov.il","Num":"*3450","Num2":"1-222-3450","FaxNum":"02-6469442","Email":"info@moin.gov.il","Address":"\u05de\u05d9\u05e0\u05d4\u05dc \u05d4\u05d0\u05d5\u05db\u05dc\u05d5\u05e1\u05d9\u05df, \u05e8\u05d7', \u05d4\u05dc\u05dc 24 \u05d9\u05e8\u05d5\u05e9\u05dc\u05d9\u05dd 91023","Twitter":"pnim_gov_il","Facebook":"","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Moin.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":7},{"CompanyGUID":"9A65C271-B55C-4908-B5AF-1D66C5769BCF","CompanyID":205,"CategoryID":14,"Name":"\u05de\u05d5\u05e2\u05e6\u05d4 \u05d0\u05d6\u05d5\u05e8\u05d9\u05ea \u05e2\u05de\u05e7 \u05d9\u05d6\u05e8\u05e2\u05d0\u05dc","NameEn":"EmekIsrael","Description":"","WebSite":"www.emekyizrael.org.il","Num":"04-6520111","Num2":"","FaxNum":"04-6520085","Email":"moked@emekyizrael.org.il","Address":"\u05de.\u05d0 \u05e2\u05de\u05e7 \u05d9\u05d6\u05e8\u05d0\u05dc \u05ea.\u05d3 90000 \u05e2\u05e4\u05d5\u05dc\u05d4","Twitter":"","Facebook":"","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"EmekIsrael.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"B322B212-AB2F-4F5A-BDE4-22EDAE1A55A5","CompanyID":158,"CategoryID":14,"Name":"\u05e2\u05d9\u05e8\u05d9\u05d9\u05ea \u05d9\u05e8\u05d5\u05e9\u05dc\u05d9\u05dd","NameEn":"Jerusalem","Description":"","WebSite":"www.jerusalem.muni.il","Num":"106","Num2":"02-5314600","FaxNum":"02-6525544","Email":"moked@jerusalem.muni.il","Address":"\u05db\u05db\u05e8 \u05e1\u05e4\u05e8\u05d0 1, \u05d9\u05e8\u05d5\u05e9\u05dc\u05d9\u05dd","Twitter":"","Facebook":"","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"http:\/\/blog.jerusalem.muni.il\/","Chat":"","Icon":"Jerusalem.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"C6550E78-4D7E-4FE0-974F-230C2DFB2091","CompanyID":191,"CategoryID":2,"Name":"\u05d0\u05d9\u05e0\u05d8\u05e8\u05e0\u05d8 \u05e8\u05d9\u05de\u05d5\u05df","NameEn":"Rimon","Description":"","WebSite":"www.neto.net.il","Num":"*8900","Num2":"073-231-7000","FaxNum":"057-7961386","Email":"contactus@neto.net.il","Address":"\u05e8\u05d7\u05d5\u05d1 \u05e8\u05d7\u05d1\u05e2\u05dd \u05d6\u05d0\u05d1\u05d9 2,  \u05d2\u05d1\u05e2\u05ea \u05e9\u05de\u05d5\u05d0\u05dc","Twitter":"","Facebook":"facebook.com\/internetrimon","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Rimon.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"F2B08E21-7FA3-48CE-A5ED-234DAAB249F0","CompanyID":148,"CategoryID":13,"Name":"\u05dc\u05e0\u05d5\u05d1\u05d5 \u05d9\u05d1\u05de","NameEn":"Lenovo","Description":"","WebSite":"www.ibm.com\/support\/il\/he","Num":"*6557","Num2":"03-9142800","FaxNum":"03-9188211","Email":"6557@il.ibm.com","Address":"\u05d3\u05e8\u05da \u05d0\u05dd \u05d4\u05de\u05d5\u05e9\u05d1\u05d5\u05ea 94, \u05e7\u05e8\u05d9\u05ea \u05d0\u05e8\u05d9\u05d4, \u05e4\u05ea\u05d7 \u05ea\u05e7\u05d5\u05d5\u05d4, 49527","Twitter":"IBM_Israel","Facebook":"facebook.com\/IBMIL?ref=ts","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Lenovo.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":6},{"CompanyGUID":"FA12B2FD-05C8-481A-BC3C-23679C1301E5","CompanyID":162,"CategoryID":6,"Name":"\u05d3\u05df","NameEn":"Dan","Description":"\u05d7\u05d9\u05d5\u05d2 \u05d1\u05db\u05d5\u05db\u05d1\u05d9\u05ea \u05de\u05d4\u05e0\u05d9\u05d9\u05d3 \u05d1\u05dc\u05d1\u05d3","WebSite":"www.dan.co.il","Num":"*3456","Num2":"03-6394444","FaxNum":"03-6933466","Email":"information@dan.co.il","Address":"\u05ea.\u05d3\. 33038, \u05ea\"\u05d0 \u05de\u05d9\u05e7\u05d5\u05d3 64928","Twitter":"","Facebook":"","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Dan.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"7DF48BD1-8889-41A1-97F3-244C86F3CA91","CompanyID":159,"CategoryID":14,"Name":"\u05e2\u05d9\u05e8\u05d9\u05d9\u05ea \u05d1\u05d0\u05e8-\u05e9\u05d1\u05e2","NameEn":"Beer7","Description":"","WebSite":"www.beer-sheva.muni.il","Num":"106","Num2":"08-6463777","FaxNum":"08-6281911","Email":"p-moked@br7.org.il","Address":"\u05db\u05db\u05e8 \u05de\u05e0\u05d7\u05dd \u05d1\u05d2\u05d9\u05df   1  \u05d1\u05d0\u05e8 \u05e9\u05d1\u05e2  84891","Twitter":"","Facebook":"","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Beer7.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"29D46483-5068-4703-9D50-26DC852CCB98","CompanyID":139,"CategoryID":5,"Name":"AIG","NameEn":"Aig","Description":"","WebSite":"www.aig.co.il","Num":"1-800-400-400","Num2":"03-9272472","FaxNum":"03-9272424","Email":"aig.israel@aig.com","Address":"\u05e8\u05d7' \u05d4\u05e1\u05d9\u05d1\u05d9\u05dd 25, \u05e7\u05e8\u05d9\u05d9\u05ea \u05de\u05d8\u05dc\u05d5\u05df, \u05e4\u05ea\u05d7 \u05ea\u05e7\u05d5\u05d5\u05d4\. \u05ea.\u05d3 535\. \u05de\u05d9\u05e7\u05d5\u05d3 49100","Twitter":"AIG_Latestnews","Facebook":"facebook.com\/pages\/AIG\/55720723001","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Aig.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":7},{"CompanyGUID":"DCD4DEEE-31D4-404A-88B1-27E176AE7D7C","CompanyID":220,"CategoryID":17,"Name":"\u05d4\u05d8\u05db\u05e0\u05d9\u05d5\u05df","NameEn":"Technion","Description":"","WebSite":"www.technion.ac.il","Num":"04-8292529","Num2":"04-8292111","FaxNum":"04-8295830","Email":"mina@tex.technion.ac.il","Address":"\u05e7\u05e8\u05d9\u05ea \u05d4\u05d8\u05db\u05e0\u05d9\u05d5\u05df, \u05d7\u05d9\u05e4\u05d4, 32000, \u05d9\u05e9\u05e8\u05d0\u05dc","Twitter":"TechnionLive","Facebook":"facebook.com\/Technion.Israel","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Technion.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":6},{"CompanyGUID":"D02204BE-85A3-43C8-AF1C-2F5F1DB4708F","CompanyID":118,"CategoryID":8,"Name":"\u05dc\u05d0\u05d5\u05de\u05d9\u05ea","NameEn":"Leumit","Description":"","WebSite":"www.leumit.co.il","Num":"*507","Num2":"1-700-507-507","FaxNum":"03-6949614","Email":"publicappeals@leumit.co.il","Address":"\u05e9\u05e4\u05e8\u05d9\u05e0\u05e6\u05e7 23 \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1 64738","Twitter":"","Facebook":"facebook.com\/leumit","GooglePlus":"","App_iOS":"","App_Android":"https:\/\/play.google.com\/store\/apps\/details?id=leumit.mobile","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Leumit.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"9AD5EF41-1300-4D1A-8F40-33F78C766E01","CompanyID":218,"CategoryID":17,"Name":"\u05d4\u05d0\u05d5\u05e0\u05d9\u05d1\u05e8\u05e1\u05d9\u05d8\u05d4 \u05d4\u05e4\u05ea\u05d5\u05d7\u05d4","NameEn":"Openu","Description":"","WebSite":"www.openu.ac.il","Num":"*3500","Num2":"09-7782222","FaxNum":"","Email":"infodesk@openu.ac.il","Address":"\u05d3\u05e8\u05da \u05d4\u05d0\u05d5\u05e0\u05d9\u05d1\u05e8\u05e1\u05d9\u05d8\u05d4 1\. \u05ea.\u05d3 808, \u05e8\u05e2\u05e0\u05e0\u05d4 43537","Twitter":"OpenU_Israel","Facebook":"facebook.com\/openuniversity","GooglePlus":"","App_iOS":"http:\/\/itunes.apple.com\/il\/app\/open-university-h-wnybrsyth\/id451404537","App_Android":"https:\/\/play.google.com\/store\/apps\/details?id=com.OpenUniversity","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Openu.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":7},{"CompanyGUID":"14A071CD-E266-4CC8-9894-34D0651BEC36","CompanyID":108,"CategoryID":2,"Name":"\u05e0\u05d8\u05d5\u05d5\u05d9\u05d6'\u05df 013","NameEn":"Netvision013","Description":"\u05e1\u05e4\u05e7\u05d9\u05ea \u05d0\u05d9\u05e0\u05d8\u05e8\u05e0\u05d8 \u05d5\u05e9\u05d9\u05d7\u05d5\u05ea \u05d1\u05d9\u05e0\u05dc\u05d0\u05d5\u05de\u05d9\u05d5\u05ea","WebSite":"www.013netvision.net.il","Num":"*3031","Num2":"04-8560660","FaxNum":"03-5201960","Email":"service@013netvision.co.il","Address":"\u05d4\u05de\u05dc\u05d0\u05db\u05d4 15 \u05e4\u05d0\u05e8\u05e7 \u05d0\u05e4\u05e7 \u05e8\u05d0\u05e9 \u05d4\u05e2\u05d9\u05df 48091","Twitter":"013_Netvision","Facebook":"facebook.com\/013netvision","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Netvision013.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":7},{"CompanyGUID":"3342FC0D-BB7B-4752-8C57-371B52403DE2","CompanyID":156,"CategoryID":14,"Name":"\u05e2\u05d9\u05e8\u05d9\u05d9\u05ea \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1","NameEn":"TelAviv","Description":"","WebSite":"www.tel-aviv.gov.il","Num":"03-5218666","Num2":"","FaxNum":"03-5216597","Email":"","Address":"\u05d0\u05d1\u05df \u05d2\u05d1\u05d9\u05e8\u05d5\u05dc 69 \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1","Twitter":"","Facebook":"facebook.com\/pages\/Tel-Aviv-Yafo-Israel\/TEL-AVIV-tl-byb\/179016458408","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"TelAviv.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":6},{"CompanyGUID":"05F0A2D8-8F11-41F4-A00A-389435D8566D","CompanyID":105,"CategoryID":2,"Name":"\u05e4\u05dc\u05d0\u05e4\u05d5\u05df","NameEn":"Pelephone","Description":"\u05d7\u05d9\u05d5\u05d2 \u05d1\u05db\u05d5\u05db\u05d1\u05d9\u05ea \u05dc\u05de\u05e0\u05d5\u05d9\u05d9\u05dd \u05d1\u05dc\u05d1\u05d3","WebSite":"www.pelephone.co.il","Num":"*166 ","Num2":"050-7077766","FaxNum":"050-7048004","Email":"Contact@pelephone.co.il","Address":"\u05d3\u05e8\u05da \u05d9\u05e6\u05d7\u05e7 \u05e8\u05d1\u05d9\u05df 33 \u05d2\u05d1\u05e2\u05ea\u05d9\u05d9\u05dd","Twitter":"Pelephone_il","Facebook":"facebook.com\/Pelephone","GooglePlus":"","App_iOS":"http:\/\/itunes.apple.com\/il\/app\/pl-pwn-on-line\/id465620580","App_Android":"https:\/\/play.google.com\/store\/apps\/details?id=com.pelephone","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"http:\/\/www.pelephone.co.il\/web\/3G\/Corporate\/CustomerService\/chat_live\/.aspx","Icon":"Pelephone.png","SearchTags":null,"Rating":3.2000000476837,"Public":1,"ToShow":1,"Revision":8},{"CompanyGUID":"CD18CE6F-FE06-4F8A-879A-3BF2DCDFD19F","CompanyID":123,"CategoryID":3,"Name":"\u05d4\u05d1\u05d9\u05e0\u05dc\u05d0\u05d5\u05de\u05d9","NameEn":"Fibi","Description":"","WebSite":"www.fibi.co.il","Num":"*3009","Num2":"03--5130031","FaxNum":"03-6253277","Email":"","Address":"\u05e8\u05d7\u05d5\u05d1 \u05d9\u05e6\u05d7\u05e7 \u05e9\u05d3\u05d4 7 \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1, 67775","Twitter":"fibiblog","Facebook":"facebook.com\/pages\/hbynlwmy\/106329716062251","GooglePlus":"","App_iOS":"http:\/\/itunes.apple.com\/il\/app\/hbnq-hbynl-wmy\/id419704429","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Fibi.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":6},{"CompanyGUID":"F46F2D5F-322B-4944-923B-3C1D08F96ADF","CompanyID":246,"CategoryID":20,"Name":"TheMarker","NameEn":"TheMarker","Description":"","WebSite":"www.themarker.com","Num":"1-700-700-250","Num2":"","FaxNum":"","Email":"customer_service@haaretz.co.il","Address":"\u05e9\u05d1\u05d9\u05dc \u05d4\u05de\u05e8\u05e5 2 \u05ea.\u05d3\. 35029, \u05ea\u05dc-\u05d0\u05d1\u05d9\u05d1 61350","Twitter":"TheMarker","Facebook":"facebook.com\/TheMarkerOnline","GooglePlus":"","App_iOS":"http:\/\/itunes.apple.com\/il\/app\/themarker-dmrqr\/id360938308","App_Android":"https:\/\/play.google.com\/store\/apps\/details?id=com.casualmobile.themarker","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"TheMarker.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":6},{"CompanyGUID":"96ED69AF-B691-48C3-A370-3C9CBF8B226F","CompanyID":166,"CategoryID":3,"Name":"\u05d9\u05e9\u05d9\u05e8 \u05dc\u05d0\u05d5\u05de\u05d9","NameEn":"LeumiY","Description":"","WebSite":"www.yashirleumi.co.il","Num":"*5524","Num2":"03-9545524","FaxNum":"03-9544324","Email":"yashirleumi@yashirl.co.il","Address":"\u05ea\"\u05d3 98580 \u05dc\u05d5\u05d3 71336","Twitter":"YashirLeumi","Facebook":"","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"help1.bankleumi.co.il\/rl\/yashir_tech.html","Icon":"LeumiY.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":6},{"CompanyGUID":"7985AAF2-12FE-40D4-98D5-3E09BEC1C348","CompanyID":127,"CategoryID":6,"Name":"\u05e8\u05db\u05d1\u05ea \u05d9\u05e9\u05e8\u05d0\u05dc","NameEn":"Rail","Description":"","WebSite":"www.rail.co.il","Num":"*5770","Num2":"03-6117000","FaxNum":"03-6104337","Email":"pniyot@rail.co.il","Address":"\u05ea\u05d7\u05e0\u05ea \u05e8\u05db\u05d1\u05ea \u05ea\"\u05d0 \u05e1\u05d1\u05d9\u05d3\u05d5\u05e8 \u05de\u05e8\u05db\u05d6 \u05ea.\u05d3 18085 \u05de\u05d9\u05e7\u05d5\u05d3 61180","Twitter":"IsraelRail","Facebook":"facebook.com\/irail","GooglePlus":"","App_iOS":"http:\/\/itunes.apple.com\/il\/app\/israel-train-schedule\/id335527987","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Rail.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":7},{"CompanyGUID":"D5B924B8-64EF-4451-A5B1-405ACE0D998C","CompanyID":183,"CategoryID":7,"Name":"\u05d0\u05d5\u05d5\u05d9\u05e1","NameEn":"Avis","Description":"","WebSite":"www.avis.co.il","Num":"*2722","Num2":"03-6170000","FaxNum":"","Email":"sharons@avis.co.il.","Address":"\u05d1\u05e8\u05d5\u05da \u05d4\u05d9\u05e8\u05e9 14 \u05d1\u05e0\u05d9 \u05d1\u05e8\u05e7","Twitter":"AvisWeTryHarder","Facebook":"facebook.com\/Avis.Israel","GooglePlus":"","App_iOS":"http:\/\/itunes.apple.com\/il\/app\/avis-israel\/id392534621","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Avis.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":7},{"CompanyGUID":"0D871609-0E8F-4239-9B98-4507125D207B","CompanyID":244,"CategoryID":20,"Name":"\u05de\u05e7\u05d5\u05e8 \u05e8\u05d0\u05e9\u05d5\u05df","NameEn":"Makor1","Description":"","WebSite":"www.makor1.co.il","Num":"03-6277777","Num2":"03-6277700","FaxNum":"","Email":"","Address":"\u05d3\u05e8\u05da \u05de\u05e0\u05d7\u05dd \u05d1\u05d2\u05d9\u05df 116 \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1","Twitter":"","Facebook":"facebook.com\/mekorrishon","GooglePlus":"","App_iOS":"","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Makor1.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":5},{"CompanyGUID":"4C17E487-240F-4998-B427-49BAC1299D29","CompanyID":133,"CategoryID":9,"Name":"\u05d3\u05d5\u05d0\u05e8 \u05d9\u05e9\u05e8\u05d0\u05dc","NameEn":"Post","Description":"","WebSite":"www.israelpost.co.il","Num":"171","Num2":"1-599-500-171","FaxNum":"","Email":"","Address":"\u05e8\u05d7\u05d5\u05d1 \u05d9\u05e4\u05d5 30, \u05d9\u05e8\u05d5\u05e9\u05dc\u05d9\u05dd 91999","Twitter":"Doar_Israel","Facebook":"facebook.com\/PostIsrael","GooglePlus":"","App_iOS":"http:\/\/itunes.apple.com\/il\/app\/hdw-r-sl-ysr-l\/id495504465","App_Android":"","App_WinPhone":"","App_BlackBerry":"","Blog":"","Chat":"","Icon":"Post.png","SearchTags":null,"Rating":null,"Public":1,"ToShow":1,"Revision":7},...]} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:42:47.957

尝试以下操作：

```
 [DataContract]
public class Brands
{
    [DataMember]
    public ObservableCollection<Brand> data;
}

[DataContract(Name = "data")]
public class Brand
{/* 
public string BrandName; 
public int BrandId; 
   */
    [DataMember]
    public string CompanyGUID;
    [DataMember]
    public int CompanyID; 
    [DataMember]
    public int CategoryID;
    [DataMember]
    public string Name;
    [DataMember]
    public string NameEn;
    [DataMember]
    public string Description;
    [DataMember]
    public string WebSite;
    [DataMember]
    public string Num;
    [DataMember]
    public string Num2;
    [DataMember]
    public string FaxNum;
    [DataMember]
    public string Email;
    [DataMember]
    public string Address;
    [DataMember]
    public string Twitter;
    [DataMember]
    public string Facebook;
    [DataMember]
    public string GooglePlus;
    [DataMember]
    public string App_iOS;
    [DataMember]
    public string App_Android;
    [DataMember]
    public string App_WinPhone;
    [DataMember]
    public string App_BlackBerry;
    [DataMember]
    public string Blog;
    [DataMember]
    public string Chat;
    [DataMember]
    public string Icon;
    [DataMember]
    public string SearchTags;
    [DataMember]
    public double Rating;
    [DataMember]
    public int Public;
    [DataMember]
    public int ToShow;
    [DataMember]
    public int Revision;
} 
```

然后更改为：

```
void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {

        DataContractJsonSerializer serializer = null;
        try
        {
            serializer = new DataContractJsonSerializer(typeof(Brands));
            var Brands = (Brands)serializer.ReadObject(e.Result);

            foreach (Brand b in Brands.data)
            {
                int id = b.CompanyID;
                string name = b.Name;
                //listBrands.Items.Add(id + "             " + name);

            }

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
    } 
```

在 webClient_OpenReadCompleted 方法中。

干杯...

它应该工作，

干杯，

# objective-c - 格式化浮点值

> ID：10473750
> 
> 赞同：1
> 
> 时间：2012-05-06T19:54:23.470
> 
> 标签：objective-c, timestamp

在我的 iPhone 应用程序开发中，我使用时间戳值作为订单 ID 值。

我想以仅包含十进制值的方式格式化时间戳值。

喜欢

时间戳值= 343434234.78900633

现在我想格式化那个时间戳值，让它返回十进制值 78900633。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:57:22.330

您需要使用将[`modf`](http://www.cplusplus.com/reference/clibrary/cmath/modf/)double/float 分解为 int 和 a 分数的函数。

```
double intpart;
double param = 343434234.78900633;
double fractpart = modf (param , &intpart);
printf ("%lf = %lf + %lf \n", param, intpart, fractpart);

char buf[32];
sprintf(buf, "%f", fractpart);
int fpart = atoi(buf+2);
printf("Fractional as int = %d\n", fpart); 
```

# objective-c - 如何不将 segue 推入导航控制器堆栈？

> ID：10473755
> 
> 赞同：1
> 
> 时间：2012-05-06T19:55:36.183
> 
> 标签：objective-c, ios, uinavigationcontroller, stack, storyboard

我想知道使用哪种技巧将视图控制器“不推送”到导航控制器堆栈（iOS）

我有这个：
如果用户未登录，则显示视图 A 然后显示 B
如果用户已登录，则显示 B

因为我正在使用情节提要，如果用户已登录，我使用了 performSegue，因此他直接转到 B。但是使用此方法，导航控制器在堆栈中获得视图 A 的推送。

我正在考虑在一些空白中弹出一个堆栈级别（但我不知道该怎么做）。
我也在考虑不将视图推送到导航控制器堆栈中（但我不知道该怎么做）。

谢谢

更新 ：

我试过这个：

```
//The view B
TabBarMain* mainViewController = [[TabBarMain alloc] init];
//If already logged in
if([username length] == 0)
{
    NSArray *viewControllers = [NSArray arrayWithObject:mainViewController];
    [self.navigationController setViewControllers:viewControllers animated:NO];
} 
```

这段代码的问题是它显示了一个黑屏（不会崩溃）。似乎我需要初始化一些东西，而我的 TabBarMain.m 中什么都没有，我不知道在里面写什么。此 TabBarMain 链接到情节提要的选项卡栏控制器。

难道没有别的办法了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:58:09.213

在你的 rootViewController 的 viewDidLoad 中试试这个大小。

```
- (void)viewDidLoad
{
    NSArray *viewControllers

    if (logged) {
        NSArray *viewControllers = [NSArray arrayWithObject:viewControllerB];
    } else {
        NSArray *viewControllers = [NSArray arrayWithObject:viewControllerA];
    }

    [self.navigationController setViewControllers:viewControllers animated:NO];
} 
```

由于您的 viewController 在 Storyboard 中链接并且未在代码中实例化，因此您需要从情节提要而不是空代码中实例化它。确保标识符与情节提要中 ViewController 的标识符匹配。

```
TabBarMain *mainViewController = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:NULL] instantiateViewControllerWithIdentifier:@"tabBarMain"]; 
```

# java - 能否将 Java 应用程序设置为默认文件打开器？

> ID：10473762
> 
> 赞同：6
> 
> 时间：2012-05-06T19:56:19.920
> 
> 标签：java, file, set, default, file-association

我一直在寻找一种方法让用户将我的程序设置为默认打开文件一段时间，但一无所获。我有一个应该对 Mac、Windows 和 Linux 通用的程序，所以我不想使用只适用于一个操作系统的方法。那么如何让用户能够将 Java 应用程序设置为默认文件打开器呢？我会使用桌面类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:29:29.177

没有 Java 不支持这一点。您必须为要支持的每个操作系统编写一个小应用程序，使用它的本地语言（c++、objective c 等），只要打开它就可以简单地启动您的 Java 应用程序。然后，您可以将该应用程序设置为默认程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T02:00:04.033

它在stackoverflow上得到了回答： [使用Java应用程序作为特定文件类型的默认程序？](https://stackoverflow.com/questions/9632793/use-a-java-application-as-the-default-program-for-a-particular-file-type)

引用答案：

> JAR 文件通常是不可执行的。也就是说，JAR 文件不是有效的 Windows 应用程序。JAR 扩展本身是否有与之关联的默认应用程序无关紧要，因为“开放动词”不会在其他“开放动词”定义中递归使用。
> 
> 反而，
> 
> 1.  创建一个调用 java（或 javaw，视情况而定）的批处理（“.BAT”）文件（或小型 EXE 包装器），并将该可执行包装器用作“打开方式”程序。（如果使用批处理文件，这将有一个烦人的中间控制台窗口。）或者，
> 2.  修改注册表，以便扩展的“打开动词”通过 java（或 javaw）启动 JAR。最后，任何一种形式都应该类似于：javaw -jar TheJarFile.jar "%1%"。（注意 javaw 是可执行文件，而 TheJarFile.jar 不是可执行文件。）
> 
> 有关如何使用 java/javaw 的信息，请参阅 java - Java 应用程序启动器。

窗户就是这种情况。同样，在 Linux 和 Mac 上，您必须创建一个本地应用程序包装器来打开文件，并将文件的路径作为参数传递给您的 java jar 并运行该 jar。

# java - Java PDF 生成库

> ID：10473764
> 
> 赞同：2
> 
> 时间：2012-05-06T19:56:29.140
> 
> 标签：java, report

在商业项目中使用哪个 Java PDF 库？我需要生成一个*可打印*的（如果它是可编辑的，比如*.xls*则很好）报告（它包含表格、一些文本和报告的总页数 - 这是因为我不能使用 HTML（我无法计算页数））。PS 我不能使用 iText，因为它的许可证不允许在商业项目中使用免费版本的 iText。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T20:01:12.500

我们在我的工作中处于同一条船上，并且正在转向[pdfbox](http://pdfbox.apache.org/)。对于它的价值，为办公文档生成真正的打印质量 PDF（例如，由印刷公司打印的硬拷贝）有点不简单。根据我的经验，蒸馏器做得最好。但如果能满足您的打印需求，PDFBox 肯定会更直接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-05T15:39:08.720

您可以使用以下三个 Java 库来创建 HTML+CSS 模板来构成您的 PDF 文件。飞碟 + Freemarker + Itext

飞碟：`https://code.google.com/p/flying-saucer/`

自由标记：`http://freemarker.org/`

Itext 2.1.7：（`http://itextpdf.com/`请注意这是商业项目中 iText 的免费版本。）

您还可以检查使用这三个库的这个项目：

[https://github.com/xiang-lee/pdf-generator](https://github.com/xiang-lee/pdf-generator)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T20:17:38.497

我个人使用过[Apache FOP](http://xmlgraphics.apache.org/fop/)支持多种输出格式。您可能还对[JasperReports](http://jasperforge.org/projects/jasperreports)感兴趣，它支持 pdf、html、excel 和 openoffice。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-06T19:59:06.667

也许是 Apache PDFBox？

[http://pdfbox.apache.org/](http://pdfbox.apache.org/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-06T20:17:03.070

iText 并不总是在 AGPL 之下。您可以考虑使用 LGPL 下的 iText 2.7 或 4.2。

另请参阅此问题：[不是 AGPL 的 itext 的最新版本是什么？](https://stackoverflow.com/questions/4321207/what-is-latest-version-of-itext-that-is-not-agpl)

# assembly - LBA 到 CHS 说明

> ID：10473768
> 
> 赞同：5
> 
> 时间：2012-05-06T19:56:41.233
> 
> 标签：assembly, operating-system, storage

我一直在查看位于[此处](http://en.wikipedia.org/wiki/CHS_conversion#CHS_conversion)的 LBA 到 CHS 方程，但我无法理解它们为什么起作用。有人可以解释为什么这些方程式有效吗？（或许可以简要说明数据在存储设备（如软盘）上的存储顺序）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T20:17:56.103

CHS 指的是从磁盘确实以这种方式访问​​数据的日子以来的柱面、磁头和扇区——选择要读取的柱面、磁头和扇区。

LBA 是一种新方案，它基本上将磁盘作为不断增加的块数来解决。

转换方案基本上让您从一个到另一个。首先，该等式为您提供了一些您需要知道的值的占位符 - 每个柱面有多少个磁头，每个磁头有多少个扇区。

所以，现在想象你有一些这样的数据：

```
Cylinder number    Head Number     Sector Number   Data           LBA
================================================================================
       0               0                0          A              1
       0               0                1          B              2
       0               0                2          A              3
       0               1                0          B              4
       0               1                1          A              5
       0               1                2          B              6 
```

这是一个故意设计的方案，其中每个磁头只有三个磁道。我们如何选择订购 LBA，以便我们增加的每个轨道号都会增加数量。但是，当我们切换磁头时，我们还需要增加磁道号。因此，我们可以说：

```
LBA = sectors per head * current head + current sector number 
```

所以现在要找到 LBA 4，我们知道在 CHS 表示法中等于`(0,1,0)`。每头三个扇区，`3*1+0=4`.

请注意，我故意忽略了这个，`-1`所以你专注于这个想法 - 因为 LBA 是零偏移的，所以使用它。

无论如何，这对于磁头和扇区来说都很好，但是圆柱体呢？好吧，如果柱面数增加一，我们`number of heads per cylinder`就在磁盘上向前跳磁头，也就是`number of heads per cylinder times number of sectors per head`磁盘上的扇区。如果给定一个柱面、磁头、扇区元组，我们可以计算出总共有多少个扇区：

```
LBA = (((cylinder number * heads per cylinder) + head number) *
      * sector per head) + sector number - 1 
```

从左到右，等式的第一部分将柱面数转换为跳跃所需的磁头数；下一部分将当前磁头编号添加到其中并将其转换为扇区数。最后，添加当前扇区号并从零索引中减去 1。

我在这里重复自己，这是有充分理由的——这只是这些概念之一。如果有帮助，请绘制一个平行线 - 从十六进制转换为十进制。假设我已经给了你 FED 并且想知道十进制是什么。那么，转换将是：

```
dec = (((15*16)+14)*16)+13 
```

我是怎么解决的？好吧，在 FED 中，从左到右，每“十”有 16 个“百”，我们有数字 15。除此之外，我们加上“十”的数量，即 14。我们再次乘以 16，因为有每单位 16 个“十”。最后，我们添加了额外的 13 个单元。

问题是，你每天都用十进制数做这种事情——这里唯一的困难是基数或[基数](http://simple.wikipedia.org/wiki/Base_(mathematics))*不是*十的数字，因此在我们的自然符号中是有意义的。

* * *

编辑：我刚刚想到你实际上是在问相反的方向。这容易*得多*！

首先，取模运算符——这意味着给定值除以另一个值时的余数。因此，如果我们有，`r = X mod Y`则 r 是 X 除以 Y 时的余数。

这通常被称为时钟算术，因为就像时钟一样，这些值会随着您的增加而以循环方式传播`X`。

我们还可以计算除数的商 - 给定一对`X`，`Y`并计算，这是这样`X/Y`的最大值。`A``X > AY`

把它们放在一起，如果你被要求计算 32 除以 5 的商和余数，我们看到 2 = 32 mod 5，因为 5 除以 30。然后，30=6*5，所以商是 6。

对，现在进入公式。给定一个 LBA 地址，我们知道，如果我们将每个磁头的磁道乘以每个柱面的磁头数，就可以得出给定柱面编号“覆盖”的磁道数 - 此范围内的所有剩余部分都使用相同的柱面编号。使用上面设计的表格的实际示例：每个磁头有三个磁道，假设每个柱面有 6 个磁头 - 所以 6*3=18。现在取一个 LBA，比如 5 - 5/18 = 0 余数 5。所以我们将这个商值作为柱面编号，它就是。

因此，下一个问题采用 LBA 编号并将其除以您拥有的每个磁道的扇区 - 为什么？请记住，我们的 LBA 计算“曲目”。除以这个值并占满席位（因为每个单独的轨道都考虑了所有可能的余数）将我们转换为正面。然后我们将该值取模每个柱面的磁头数，例如，如果我们每个柱面有 6 个磁头，磁头值为 8，则我们正确地将磁头数报告为 2（柱面数为 1，占前 6).

最后，扇区号是一个简单的 LBA 除以每个磁道的扇区（加一以抵消零索引）余数。为什么？好吧，在需要不同的磁头/磁道之前，每个磁道只能包含一定数量的扇区。

# java - 禁用选择jTextfield的所有亮点

> ID：10473771
> 
> 赞同：2
> 
> 时间：2012-05-06T19:57:00.967
> 
> 标签：java, swing

如何禁用选择 textfield 的所有亮点。

```
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;

import javax.swing.JTextField;

public class CustomFocusListener implements FocusListener {

    JTextField jtextField;

    public CustomFocusListener(JTextField jtextField) {

        this.jtextField = jtextField;
    }

    @Override
    public void focusGained(FocusEvent e) {

        jtextField.selectAll();

    }

    @Override
    public void focusLost(FocusEvent e) {

        jtextField.getHighlighter().removeAllHighlights();
    }

} 
```

当前代码也只是隐藏了内容......有人帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T20:04:31.873

要更改 JTextField 的文本颜色和选择颜色，可以使用以下两种方法：

[setSelectedTextColor](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#setSelectedTextColor%28java.awt.Color%29)

[设置选择颜色](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#setSelectedTextColor%28java.awt.Color%29)

但如果您打算使用不同的外观和感觉，我不建议您这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:08:30.213

刚设置

jtextField.setSelectionEnd(0); 在 onFocusLost() 方法中；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T21:03:59.303

1)`jtextField.selectAll();`

`Focus`是简单的异步，那么从逻辑上讲这可能是

```
SwingUtilities.invokeLater(new Runnable() {

    @Override
    public void run() {
        JTextField.selectAll();
    }
}); 
```

但以这种形式对我有用

```
SwingUtilities.invokeLater(new Runnable() {

    @Override
    public void run() {
        JTextField.setText(JTextField.getText()); 
        JTextField.selectAll();
        JTextField..requestFocus(); //requestFocusInWindow() I can't see diff
    }
}); 
```

2)`jtextField.getHighlighter().removeAllHighlights();`

*   不要玩`Caret`，不要玩`Highlighter`，你也必须覆盖 Document，[我看不出修改某些东西的理由](https://stackoverflow.com/a/10320131/714968)

*   `Caret`&有什么问题`selection`

3) 因为`JTextComponent`那里`Document / DocumentListener`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-17T10:27:06.227

这可以通过使用[setHighlighter(null)删除荧光笔来更轻松地完成](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#setHighlighter%28javax.swing.text.Highlighter%29)

> 设置要使用的荧光笔。默认情况下，这将由安装的 UI 设置。如果需要，可以将其更改为自定义荧光笔。**可以将荧光笔设置为 null 以禁用它**....

```
textField.setHighlighter(null); 
```

# iphone - 如何释放用户对 UISlider 的触摸？

> ID：10473774
> 
> 赞同：1
> 
> 时间：2012-05-06T19:57:15.100
> 
> 标签：iphone, objective-c, xcode, user-interface, uislider

我有这样的问题......我想在他滑动时阻止用户的滑块。我认为 .isUserInteractionEnabled 会处理这个问题，但它只有在用户释放滑块后才有效。我想从用户那里“窃取”滑块并停止它。

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:46:28.143

您应该向您的 UISlider 对象添加一个选择器。例如，如果你有一个名为“slider”的 UISlider，你应该这样做：

```
[slider addTarget:self action:@selector(sliderMoved:) forControlEvents:UIControlEventValueChanged];
//runs a method called "sliderMoved" located in the same class as the slider (hence the addTarget:self) when the value is changed of the slider 
```

然后你可以做一个这样的方法，当用户试图滑动滑块时，它会将值设置为平均值：

```
-(void)sliderMoved:(UISlider*)sender{
    sender.value = (sender.maximumValue + sender.minimumValue) / 2;
} 
```

# objective-c - 选择 UITableView 中的单元格时更新 UILabel

> ID：10473777
> 
> 赞同：1
> 
> 时间：2012-05-06T19:57:38.710
> 
> 标签：objective-c, ios, xcode, uitableview

这里有一个非常简单的问题。我在一个视图上有一个标签，在前一个视图上有一个 UITableView。当用户选择该行并且我希望使用该行中的文本更新标签时，我触发了一个 segue。这是一个例子，代码很明显。

```
- (void)tableView:(UITableView *)tableView 
didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSString *countrySelection;

switch (indexPath.section) {

    case kFirstSection:
        countrySelection = [[NSString alloc]
                            initWithFormat:@"The country you have chosen is %@",
                            [self.MyCountries objectAtIndex: indexPath.row]];
        [self performSegueWithIdentifier:@"doneResults" sender:self];
        self.countryResult.text = countrySelection;
break; 
```

标签没有更新，我只是不知道应该做什么。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:02:22.230

这些东西确实需要在拥有它们的 View Controller 上进行设置。使用公共属性将所选国家/地区的值传递给该视图控制器，如下所述：

首先，创建一个类似于以下内容的属性：

```
@property(non atomic,strong) NSString *countryChosen; 
```

在目标视图控制器中，并确保`@synthesize`它

没有理由为 IndexPath 创建另一个属性。只需使用

```
// Pass along the indexPath to the segue prepareForSegue method, since sender can be any object
[self performSegueWithIdentifier:@"doneResults" sender:indexPath]; 
```

在 didSelectRowAtIndexPath 方法中。

然后在`prepareForSegueMethod`：

```
MyDestinationViewController *mdvc = segue.destinationViewController;
NSIndexPath *indexPath = (NSIndexPath *)sender;

mdvc.countryChosen = [self.MyCountries objectAtIndex: indexPath.row]]; 
```

在`viewDidLoad`目标 VC 事件中，只需使用：

```
self.countryResult.text = countryChosen; 
```

*** 编辑 *** 要处理具有多个部分的数据源，只需使用与`cellForRowAtIndexPath`.

ñ`SDictionary *selRow = [[self.countriesIndexArray valueForKey:[[[self.countriesIndexArray allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]] objectAtIndex:sindexPath.row];`

更改它以满足您的需要，但基本上您正在实现与显示单元格相同的逻辑，除了您指定所需的 indexPath（部分和行）。

然后像下面这样在目标 VC 上设置该属性：

```
self.countryResult.text = [selRow valueForKey@"Country"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:44:46.160

在您当前的视图控制器中，为用户选择的单元格的 indexPath 创建一个新属性，如下所示：

```
@property(strong,nonatomic) NSIndexPath *path; 
```

@synthesize 它，然后当用户选择一行时，使用

```
self.path = indexPath; 
```

当你执行 segue 时，它​​总是会调用

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

因此，当 prepareForSegue: 被调用时，您现在可以执行以下操作：

```
/* if this is not the only segue you are performing you want to check on the identifier first to make sure this is the correct segue */
NSString *countrySelection = [[NSString alloc]
                        initWithFormat:@"The country you have chosen is %@",
                        [self.MyCountries objectAtIndex: self.path.row]];

segue.destinationViewController.countryResult.text = countrySelection;

/* after creating the text, set the indexPath to nil again because you don't have to keep it around anymore */
self.path = nil; 
```

为此，您要在选择单元格后显示的视图控制器必须具有 UILabel 的属性，您尝试在该属性上设置文本。

# java - 如何在android上连接到firebird DB

> ID：10473779
> 
> 赞同：5
> 
> 时间：2012-05-06T19:57:48.093
> 
> 标签：java, android, firebird

我需要将我的 android 应用程序连接到我的 firebird DB

有人知道怎么做吗？

请写代码！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T20:01:20.290

我对 Firebird 不是特别熟悉，但我猜最好的方法是使用某种 Web 服务（RESTful？），它允许您的 Android 客户端与数据库进行通信。这是大多数应用程序通常使用的解决方案，因为您无法从 Android 直接连接到数据库。从设计的角度来看，这也很好，因为您的应用程序不依赖于底层数据库本身，而是作为中介的 Web 服务，这意味着您可以在不影响客户端的情况下交换数据库实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T06:35:31.987

由于[Jaybird](http://www.firebirdsql.org/en/jdbc-driver/)（Firebird JDBC 驱动程序）不支持 Android，因此您需要一些更“hackish”的东西。商业解决方案将使用中间件，例如 RemObjects DataAbstract 支持 Android（预购/测试阶段）和 Firebird：[http ://www.remobjects.com/da/java.aspx](http://www.remobjects.com/da/java.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T16:34:15.103

你可以试试这个适用于 Android 的 Jaybird 端口：http: [//sourceforge.net/projects/androidjaybird](http://sourceforge.net/projects/androidjaybird)

# django - 在 google-app-engine 中支持 Django 1.4

> ID：10473780
> 
> 赞同：4
> 
> 时间：2012-05-06T19:58:05.693
> 
> 标签：django, google-app-engine, google-cloud-sql

我们什么时候可以期待在 Google App Engine 中支持 django 1.4？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T20:48:11.773

有一个[关于 django 1.4 更新的未解决问题，](http://code.google.com/p/googleappengine/issues/detail?id=7218&q=1.4%20django&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log)你应该给它加星标，你会收到关于这个问题的通知。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T16:13:23.883

As of October 23, 2012, “<a href="http://googleappengine.blogspot.com/2012/10/app-engine-173-released.html" rel="nofollow">Django 1.4 is now fully supported for Python 2.7.”</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T11:40:04.973

看起来它已发布并受支持：[https ://code.google.com/p/googleappengine/issues/detail?id=7218](https://code.google.com/p/googleappengine/issues/detail?id=7218)

# php - 使用wordpress保存html5游戏的用户数据

> ID：10473782
> 
> 赞同：0
> 
> 时间：2012-05-06T19:58:07.730
> 
> 标签：php, wordpress, html

我正在用 html5 编写游戏，并在网站的其余部分使用 wordpress。我希望用户能够保存他们的进度，但我不清楚架构的外观。

我只会对访问数据库的 php 页面进行 ajax 调用，但我觉得使用现有的 wordpress 数据库和 API 是正确的做法。不仅如此，使用 wordpress api 可以让我访问诸如 nonce 之类的东西。

也就是说，我是否编写了一个 wordpress 插件来做到这一点？如何从运行我的游戏的 javascript 正确执行保存请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:10:37.280

在您的 js 文件中，执行您的 ajax 请求，如下所示：

```
jQuery.post('path/to/wp-admin/admin-ajax.php', {action:'save_progress',other_parameter:'other_value'}, function(response) {
    // let your user know if his progress is saved or not
}); 
```

将此添加到主题的 functions.php 中：

```
function save_progress() {
     global $wpdb;
     // do the saving job with received parameters here
     die(); // this is necessary
}

add_action('wp_ajax_save_progress', 'save_progress'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:13:17.637

如果您对比 wordpress API 允许的更通用的解决方案感兴趣（为了更全面地理解），下面是一个简单但完整的演示：

这是HTML：

```
<input id="posted_data" ></input>
<button id="saveBtn">Save</button> 
```

这是JS：

```
$(document.body).on('click', '#saveBtn', function(){        
  var posted_data=$('#posted_data').val();
  var url="/submit_page.php";
  $.ajax({url: url, data: {posted_data:posted_data }, type: "POST",
      success: function(response){
                //do something with the `response` data
      } //success
  }); //ajax
}); //.saveEditBtn 
```

这是 submit_page.php：

```
$posted_data=$_POST['posted_data'];
$posted_data; //do something with this variable, like insert it into a database

echo "Success";  // this will be the `response` variable in the JS above. 
```

# java - 使用哪种静态分析工具来扫描从一种方法到另一种方法的数据流？

> ID：10473785
> 
> 赞同：7
> 
> 时间：2012-05-06T19:58:28.187
> 
> 标签：java, static-analysis, findbugs, pmd

假设我的库中有两种方法：

`void com.somepackage.SomeClass.someSink(String s)`

和

`int com.someotherpackage.SomeOtherClass.someSource(int i)`

第一种方法用作数据接收器，而第二种方法在我的代码中用作数据源。类型参数`int, String`仅作为示例给出，实际情况可能会有所变化。

我想在一些满足下面给出的特定模式的代码中检测这些方法的使用：

1.  一些数据（比如`x`）是由源生成的
2.  一些数据（比如`y`）是使用一系列转换生成的`f1(f2(... fn(x))`
3.  `y`被送到水槽。

只要从为接收器生成数据的函数到从源接收数据的函数之间存在一系列调用，转换可以是任意函数。这些函数也可以采用任何其他参数，并将用作黑盒。

扫描可以在源或字节码级别。有哪些工具可用于此类分析？

更喜欢使用 Java API 的非基于 IDE 的工具。

[编辑：] 澄清更多，`someSink`并且分别是类中`someSource`的任意方法名称。它们可能是也可能不是，并且可能采用任意数量的参数（我应该能够定义）。参数的类型也不是任意的。唯一的要求是该工具应该扫描出现模式的代码和输出行号。所以该工具可能以这种方式工作：`SomeSome``SomeOtherClass``static`

*   从用户处获取接收器和源名称（类和方法名称的完全限定名称）。
*   静态扫描代码并找到所有使用给定接收器和源的地方
*   检查是否存在通过一系列操作（运算符、方法）直接或间接将源输出的某些数据提供给接收器的路径。
*   忽略那些不存在此类路径的源/汇，并输出剩余的源/汇（如果有）。

示例输出：

```
MyClass1.java:12: value1 = com.someotherpackage.SomeOtherClass.someSource(...)
MyClass2.java:23: value2 = foo(value1, ...)
MyClass3.java:3: value3 = bar(value2)
MyClass4.java:22: com.somepackage.SomeClass.someSink(value3, ...) 
```

注意：如果一个函数不带参数但对数据有一些副作用也需要考虑。（示例`a = source(); void foo(){ c = a+b }; foo(); sink(c)`是需要捕获的模式。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T07:05:34.283

在做了一些研究之后，我发现[煤烟](http://www.sable.mcgill.ca/soot/)最适合这种任务。Soot 比 PQL 等其他开源替代品更成熟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T03:27:45.910

那么 source 和 sink 方法的作用仅仅是 x 起源于源方法（某处）并在目标方法中（某处）被消耗？您如何表征“x”，或者您只是想要所有具有此属性的 x？

假设您已经在源方法中确定了一个特定的 x，您是否 a) 坚持*仅*通过方法调用将 x 传递给目标方法[这将使目标方法成为您的调用链中的最后一个调用]，或者可以是其中之一中间值被复制？b) 坚持每个函数调用只有*一个*参数？

我们已经为大型 C 系统做了类似的事情。问题是将分配的变量跟踪到其他函数中的用途，无论它们在哪里，包括表示不同但意图相同的值（“抽象副本”；如果我使用，字符串“1.0”抽象地等同于整数 1字符串最终作为一个数字；“int_to_string”是一个“抽象复制”函数，它将一种表示形式的值转换为另一种表示形式的等效值。）。

为此，我们需要对每个函数进行到达定义分析（“来自特定赋值的值到哪里去？”），以及“抽象副本”到达分析，确定标记为“的特殊函数消耗到达值的位置抽象副本”，以及该抽象副本功能的结果到达的位置。然后“x 到达 z”和“x 到达 f(x) 到达 z”的传递闭包计算 x 可以去的地方。

我们使用[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)完成了这项工作，它提供了通用解析和流分析机制，以及 DMS 的[C Front End](http://www.semanticdesigns.com/Products/FrontEnds/CFrontEnd.html)，它实现了 C 的特定到达和抽象复制到达计算。DMS 有一个[Java 前端](http://www.semanticdesigns.com/Products/FrontEnds/JavaFrontEnd.html)，它计算到达定义; 有人会添加抽象复制到达逻辑并重新实现传递闭包代码。

# c# - 如何从字符串中创建任意 System.Drawing.Color？

> ID：10473787
> 
> 赞同：1
> 
> 时间：2012-05-06T19:58:38.907
> 
> 标签：c#, .net

我有一组独特的字符串，我希望用颜色显示它们。字符串在这里和那里重复，所以我需要颜色是一致的，而不是随机的。

一种方法是随机化颜色并将其保存`Dictionary`或类似的东西，这样我就可以再次使用相同的颜色。

另一种方法是提出一个简单的算法/逻辑，以某种方式将字符串转换为`System.Drawing.Color`.

但是，我想将其保留为一组预定义的颜色，这样我最终不会得到不太好的颜色。让我们称之为`List<Color> allowedColors`.

我尝试`Convert.ToByte()`并认为我会将字节用于 的 R、G 和 B 组件`Color`，但这不起作用，因为转换不是那样工作的。

字符串只是一个简单的字符串`String foo = "bar";`。颜色和字符串之间的关系只要一致就没有关系，即每次运行程序时，它应该等于相同的颜色，并且每个字符串的颜色通常应该不同（是的，会有重复的颜色，因为字符串比颜色多，而且它不是一对一的映射）。

这些字符串来自我无法控制的来源。它们是独一无二的，但各不相同。每次启动程序时，如果出现相同的字符串，它应该是相同的颜色。

所以，我想我正在寻找某种字符串到字节的转换，当重叠时，字节范围重新开始，最后字节映射到 RGB 并发送到`Color.FromArgb()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:01:54.917

如果您有一组已知的唯一字符串和一组预定义的颜色，只需使用字典：

```
Dictionary<string, Color> StringColors = new Dictionary<string, Color>()
{
    {"string1", Colors.Red},
    {"string2", Colors.Green},
    {"string3", Colors.Blue},
}; 
```

然后它很简单：

```
string theString = "string2";
var MyColor = StringColors[theString]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:11:58.607

我认为最简单的方法是简单地为每个字符串分配`AvailableColors`列表中的下一个可用颜色，并在第一次制作时将该映射保存到字典中。这可以使用序列化保存到磁盘并在以后的执行中重用。这是一些（更新的）示例代码：

```
public Color[] AvailableColors = new Color[] { Colors.Red, Colors.Blue, Colors.Green};         
private int _nextColorIndex = 0;
public Dictionary<string,Color> ColorMappings = new Dictionary<string,Color>();
public Color GetNextColor () 
{
    Color nextColor = AvailableColors[_nextColorIndex];
    _nextColorIndex++;
    if (_nextColorIndex == AvailableColors.Length)
        _nextColorIndex = 0; // Restart colors and reuse.
    return nextColor;
}

public void AssignColor (string myString)
{
    ColorMappings.Add(myString, GetNextColor());
} 
```

当然，当您用完字符串时，您必须添加适当的处理，如果您正在多线程执行它，可能还会在 GetNextColor 周围添加并发锁，但这是一个开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T20:28:32.983

您可以使用 FramArgb 方法制作颜色列表：

```
var allowedColors = new List<Color>();
allowedColors.Add(Color.FromArgb(255, 0, 0)); 
```

或者您可以使用字典管理从字符串到颜色的映射：

```
var colorMap = new Dictionary<string, Color>();
colorMap.Add("red", Color.FromArgb(255, 0, 0)); 
```

在许多情况下，这将被视为过度设计的解决方案，但无论如何它是 C# 中封装的一个示例：

```
class AppString
{
  private string text;
  private Color color;

  public AppString(string text, Color color)
  {
    this.text = text;
    if(allowedColors.Contains(color))
    {
      this.color = color;
    }
    else
    {
      throw new Exception("invalid color");
    }
  }

  // This lets you use an AppString most places where you used a regular string.
  public static implicit operator string(AppString appString) 
  { 
        return appString.text;
  }

  // This lets you use an AppString most places where you used a Color.
  public static implicit operator Color(AppString appString) 
  { 
        return appString.color;
  }

  // OR if you don't prefer overloading the implicit cast, a standard pattern
  // is to use a Value property.
  public string Value { get { return this.text; } }
  public Color Color { get { return this.color; } }
} 
```

# code-generation - 这个 LLVM 注册号有什么问题？

> ID：10473789
> 
> 赞同：7
> 
> 时间：2012-05-06T19:58:53.447
> 
> 标签：code-generation, llvm

我正在为我正在学习的一门课程编写一个简单的类 C 语言的编译器。这段代码：

```
int main() {
    printInt(not(0));
    return 0;
}

int not(int n) {
    if (n == 0) {
        return 1;
    } else {
        int result = 0;
        return result;
    }
} 
```

..我天真地编译成这个位码：

```
declare void @printInt(i32)
declare void @printDouble(double)
declare void @printString(i8*)
declare i32 @readInt()
declare double @readDouble()

define i32 @main() {
entry:
    %0 = call i32 @not(i32 0)
    call void @printInt(i32 %0)
    ret i32 0
    unreachable
}

define i32 @not(i32 %n_0) {
entry:
    %0 = icmp eq i32 %n_0, 0
    br i1 %0, label %lab0, label %lab1
lab0:
    ret i32 1
    br label %lab2
lab1:
    %result_0 = alloca i32 
    store i32 0, i32* %result_0
    %1 = load i32* %result_0
    ret i32 %1
    br label %lab2
lab2:
    unreachable
} 
```

但是，opt 不接受该代码。

```
opt: core023.ll:25:5: error: instruction expected to be numbered '%2'
%1 = load i32* %result_0 
```

现在，根据我对未命名临时寄存器的理解，它们应该从 0 开始按顺序编号。这里就是这种情况。但显然“%1 = sub..”行应该编号为 %2。这是为什么？%0 和 %1 之间的任何指令是否增加了序列号？或者也许这只是其他东西的后续故障？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T21:21:16.740

在 LLVM 中，*所有*可以有名字但没有名字的东西都被分配了一个数字*。*这也包括基本块。在你的情况下

```
lab0:
    ret i32 1
    br label %lab2 
```

定义了两个基本块，因为每条[终止指令](http://llvm.org/docs/LangRef.html#terminators)都结束一个基本块。这意味着，从概念上讲，您的代码被解析为

```
lab0:
    ret i32 1
1:
    br label %lab2 
```

之后的下一个空闲数字是 2。

为了防止这样的奇怪行为，我建议始终明确命名基本块。

# android - 将 LOG.i() 添加到程序中

> ID：10473790
> 
> 赞同：0
> 
> 时间：2012-05-06T19:58:54.623
> 
> 标签：android, eclipse

我正在使用“Sams 在 24 小时内自学 Android 应用程序开发”一书。

得到了这个程序

```
package com.androidbook.droid1;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

/**
 * @author Trashcan
 *
 */
public class Droid1Activity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        private static final String TAG = "app_name";

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Log.i(TAG,"WTF is going on ?");
    }
} 
```

[http://developer.android.com/reference/android/util/Log.html](http://developer.android.com/reference/android/util/Log.html)是它的API。

一直在尝试和使用它，只是不知道 Eclipse 会在哪里接受它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T20:01:27.507

那里有一条线不应该在方法中，而是在方法之外。你没有收到警告说这么多吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:24:22.623

您不能`static`在方法中定义变量。重构您的代码，以便声明`TAG`在类级别。例如：

```
package com.androidbook.droid1;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

/**
 * @author Trashcan
 *
 */
public class Droid1Activity extends Activity {

    private static final String TAG = "app_name";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Log.i(TAG,"WTF is going on ?");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T20:06:52.560

`super.onCreate(savedInstanceState)`尝试先调用`onCreate()`. 我不确定这是否会解决任何问题，但我无法确定您的问题是什么。

此外，在这种特殊情况下使用似乎更合适`Log.wtf()`，但这是我个人的看法。

# php - mysql group by table b, inner join table a for a random

> ID：10473791
> 
> 赞同：4
> 
> 时间：2012-05-06T19:59:02.033
> 
> 标签：php, mysql, random, inner-join

here is my 2 tables, id for a inner join event. i want to do this thing:

in table b, there has `10 albums`, i want random get out `4 albums`. then `each album` select `one record`, the record is random position in the album.

so that i will get 4 records back `(these 4 records with no duplicate id)`, then take these 4 records for a inner join query, to get the `title` from `table a`.

here just little records just for test. in the fact, i have 300,000 records in table a and 2,000,000 records in table b.

table a

```
+-----+-------+
| id  | title | 
+-----+-------+
| 1   | a1    |
+-----+-------+
| 2   | a2    |
+-----+-------+
| 3   | a3    |
+-----+-------+
| 4   | a4    |
+-----+-------+
| 5   | a5    |
+-----+-------+
| 6   | a6    |
+-----+-------+ 
```

table b

```
+-----+--------+
| id  | album  | 
+-----+--------+
|  1  | album1 | 
+-----+--------+
|  2  | album1 | 
+-----+--------+
|  3  | album1 | 
+-----+--------+
|  6  | album1 | 
+-----+--------+
|  2  | album2 | 
+-----+--------+
|  3  | album2 | 
+-----+--------+
|  5  | album3 | 
+-----+--------+
|  6  | album3 | 
+-----+--------+
|  3  | album4 | 
+-----+--------+
|  2  | album5 | 
+-----+--------+
|  4  | album5 | 
+-----+--------+
|  5  | album5 | 
+-----+--------+
|  1  | album6 | 
+-----+--------+
|  3  | album6 | 
+-----+--------+
|  2  | album7 | 
+-----+--------+
|  4  | album7 | 
+-----+--------+
|  1  | album8 | 
+-----+--------+
|  5  | album8 | 
+-----+--------+
|  3  | album9 | 
+-----+--------+
|  2  | album10| 
+-----+--------+
|  5  | album10| 
+-----+--------+ 
```

I am not good at mysql query. In my mind I would do

```
select * from b group by album order by random() limit 0,4 
```

get back 4 album, then do a inner join query (this query not correct, how to check the b.id no duplicate?)

```
select * from b inner join a on b.id = a.id where (select id from b where b.album = '".$row['album']."'  order by random() limit 1) 
```

I need an easy and quicker method, the best is just use one query. many thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:33:12.947

Since I'm neither an expert on MySQL nor on PHP, I'll try with pseudocode and generic SQL. I have renamed your tables to `albums` and `tracks` for sake of readability.

1.  First fetch the four random records to your PHP application:

    ```
    select id from albums order by random() limit 4 
    ```

2.  Second, iterate over the resulting result set of four IDs and fetch the corresponding tracks (pseudo-php):

    ```
    foreach($album_ids as $id):
        execute_query("select id from tracks where album_id = ? order by random(), limit 1", $id) 
    ```

It is not obvious to me how you match your tracks to their albums. You should have something like `tracks.album_id` as a foreign key to `albums.id`, that's how I designed my queries. You should adapt as appropriate, the underlying logic behind my solution should remain the same.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T22:11:41.137

AFAIR, "ORDER BY RAND()" is extremely slow solutions, especially on tables like you have (2 million+ records), so I'd recommend looking at something similar to these kind of articles first: [http://www.greggdev.com/web/articles.php?id=6](http://www.greggdev.com/web/articles.php?id=6)

So, you should know the number of records in your table before running the query and then do something like:

```
"SELECT * FROM `album` LIMIT 1 OFFSET " . rand(0,$count) 
```

This will return you 1 random row a bit more efficiently, I believe.

Also, I think it's not a good idea to store album references as string in tracks table, you'd rather use a proper integer foreign key album_id referenced to albums.id. Then you can join both tables much fatser. If I were you, I'd do first:

```
ALTER TABLE `tracks` add column `album_id` int;
UPDATE `tracks` SET `album_id` = SUBSTRING(`album`,5); 
```

Then, after doing this and combining with the solution above, launch something like:

```
"SELECT * FROM `album` INNER JOIN `tracks`ON `tracks`.`album_id` = `albums`.`id` LIMIT 1 OFFSET " . rand(0,$count) 
```

# android - 自定义字体显示工件

> ID：10473794
> 
> 赞同：2
> 
> 时间：2012-05-06T19:59:07.337
> 
> 标签：android, view, fonts, artifact

我为我的应用程序使用自定义字体。代码集成起来非常简单：

```
Typeface tf = Typeface.createFromAsset(getApplicationContext().getAssets(),
            "fonts/PermanentMarker.ttf");
    textview.setTypeface(tf); 
```

但是我的一些 TextViews 有工件：[http ://desmond.imageshack.us/Himg11/scaled.php?server=11&filename=screenshot2012050621514.png&res=landing](http://desmond.imageshack.us/Himg11/scaled.php?server=11&filename=screenshot2012050621514.png&res=landing)

我真的不知道它来自哪里。你有什么主意吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:45:33.077

该错误来自硬件加速。当强制 TextView 使用软件渲染时，一切都变得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-20T15:09:44.937

我遇到了同样的问题，并确保它与 API 级别 21 视图高度无关，因为它也出现在 API-21 下方。

对我来说，单个工件出现在 的末端/右边缘附近，`TextView`而不与文本本身相交。

**我没有想出一个根解决方案，但我有一个解决方法：**我在顶部放置了一个虚拟视图，`TextView`其背景样式`TextView`与`TextView`工件宽度和高度等于`TextView`.

如果你的`TextView`/`Button`持有特殊字体是可点击的，你需要设置`android:clickable="false"`为虚拟视图

# facebook - Facebook Open Graph API 返回：(#200) 需要扩展权限：publish_actions

> ID：10473797
> 
> 赞同：2
> 
> 时间：2012-05-06T19:59:22.640
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在尝试使用 Open Graph API 将操作发布到用户的墙上。

我请求了“publish_actions”权限，启用了“增强的身份验证对话框”，我的角色设置为“开发者”，我的应用设置显示“此应用可能代表您发布，包括您查看的图片等。”。

请求

```
$facebook->api('/me/permissions'); 
```

返回

```
array(1) { ["data"]=> array(1) { [0]=> array(2) { ["installed"]=> int(1) ["publish_actions"]=> int(1) } } } 
```

但是，当我发送以下发布请求时

```
$data = array();
$data['access_token'] = $facebook->getAccessToken();
$data['pictureabc'] = 'http://###url###';
$facebook->api($app_id . '/liveluvcreate:viewabc', 'post', $data); 
```

我明白了

```
Fatal error: Uncaught OAuthException: (#200) Requires extended permission: publish_actions thrown... 
```

结果。

有什么建议么？

最好的，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:47:13.103

可能`$app_id`不是拥有`access_token`.

您最好使用`/me/liveluvcreate:viewabc`只是为了确保您将操作发布给拥有`access_token`和`publish_actions`授予您的应用程序的用户。

```
$facebook->api('/me/liveluvcreate:viewabc', 'post', $data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T10:09:24.337

我知道发布答案可能为时已晚[但可能对其他人有帮助]，但截至 2014 年，如果您想向用户发布任何内容[除了应用程序注册开发者]时间线，您需要 Facebook 许可，即应用程序需要提交审批请参考以下链接 [https://developers.facebook.com/docs/facebook-login/permissions/v2.0](https://developers.facebook.com/docs/facebook-login/permissions/v2.0)

您可以检查它是否位于概览部分的正下方。

# go - 在 Go 中，如何将函数的标准输出捕获到字符串中？

> ID：10473800
> 
> 赞同：62
> 
> 时间：2012-05-06T19:59:51.917
> 
> 标签：go, stdout

例如，在 Python 中，我可以执行以下操作：

```
realout = sys.stdout
sys.stdout = StringIO.StringIO()
some_function() # prints to stdout get captured in the StringIO object
result = sys.stdout.getvalue()
sys.stdout = realout 
```

你能在 Go 中做到这一点吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-05-07T03:21:38.580

我同意你应该使用这些`fmt.Fprint`功能，如果你可以管理它。但是，如果您不控制要捕获其输出的代码，则可能没有该选项。

Mostafa 的答案有效，但如果你想在没有临时文件的情况下这样做，你可以使用[os.Pipe](http://golang.org/pkg/os/#Pipe)。这是一个与 Mostafa 等效的示例，其中包含一些受 Go 测试包启发的代码。

```
package main

import (
    "bytes"
    "fmt"
    "io"
    "os"
)

func print() {
    fmt.Println("output")
}

func main() {
    old := os.Stdout // keep backup of the real stdout
    r, w, _ := os.Pipe()
    os.Stdout = w

    print()

    outC := make(chan string)
    // copy the output in a separate goroutine so printing can't block indefinitely
    go func() {
        var buf bytes.Buffer
        io.Copy(&buf, r)
        outC <- buf.String()
    }()

    // back to normal state
    w.Close()
    os.Stdout = old // restoring the real stdout
    out := <-outC

    // reading our temp stdout
    fmt.Println("previous output:")
    fmt.Print(out)
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-03-30T05:35:52.170

这个答案与前面的答案类似，但使用 io/ioutil 看起来更简洁。

[http://play.golang.org/p/fXpK0ZhXXf](http://play.golang.org/p/fXpK0ZhXXf)

```
package main

import (
  "fmt"
  "io/ioutil"
  "os"
)

func main() {
  rescueStdout := os.Stdout
  r, w, _ := os.Pipe()
  os.Stdout = w

  fmt.Println("Hello, playground") // this gets captured

  w.Close()
  out, _ := ioutil.ReadAll(r)
  os.Stdout = rescueStdout

  fmt.Printf("Captured: %s", out) // prints: Captured: Hello, playground
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-06T22:03:02.253

我不推荐这样做，但你可以通过 altering 来实现`os.Stdout`。由于这个变量是 type `os.File`，你的临时输出也应该是一个文件。

```
package main

import (
    "fmt"
    "io/ioutil"
    "os"
    "path/filepath"
)

func print() {
    fmt.Println("output")
}

func main() {
    // setting stdout to a file
    fname := filepath.Join(os.TempDir(), "stdout")
    fmt.Println("stdout is now set to", fname)
    old := os.Stdout // keep backup of the real stdout
    temp, _ := os.Create(fname) // create temp file
    os.Stdout = temp

    print()

    // back to normal state
    temp.Close()
    os.Stdout = old // restoring the real stdout

    // reading our temp stdout
    fmt.Println("previous output:")
    out, _ := ioutil.ReadFile(fname)
    fmt.Print(string(out))
} 
```

我不推荐，因为这是太多的黑客攻击，而且在 Go 中不是很习惯。我建议将 an 传递`io.Writer`给函数并将输出写入该函数。这是做几乎相同事情的更好方法。

```
package main

import (
    "bytes"
    "fmt"
    "io"
    "os"
)

func print(w io.Writer) {
    fmt.Fprintln(w, "output")
}

func main() {
    fmt.Println("print with byes.Buffer:")
    var b bytes.Buffer
    print(&b)
    fmt.Print(b.String())

    fmt.Println("print with os.Stdout:")
    print(os.Stdout)
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-06T21:16:07.173

我认为整个想法根本不可取（竞争条件），但我想人们可能会以与您的示例类似/类比的方式混淆 os.Stdout。

# uml - UML：如何表示两个参与者的用例扩展

> ID：10473802
> 
> 赞同：2
> 
> 时间：2012-05-06T20:00:04.600
> 
> 标签：uml

假设您有一个用例“注册合同”和一个扩展“附加文档”。这两个演员根本没有关系（我的意思是，其中一个不延伸另一个）；两者都可以注册合同，但只有“客户”也可以附加文件。

你怎么代表它？我的例子是对的还是我也应该从客户端跟踪到“注册合同”用例？

![例子](../Images/6fba7af31d3392faf837f37b6089452f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T20:22:20.133

在这种情况下，我将使用两张图表，每个演员一张

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T07:13:29.440

创建两个不同的用例，一个用于员工（“注册合同”），一个用于客户，一个用于客户端（“扩展注册联系人”或类似的东西）。如果您想显示两个用例是相关的，您可以在它们之间添加使用继承。

另一种选择是将父级添加到客户端和员工继承自激活用例的共同父级，并在`<<extends>>`链接中添加注释，说明只有在调用者是客户端时才能调用扩展（请参见[此处](http://www.uml-diagrams.org/use-case-diagrams.html#extend)显示的示例)

# mit-scratch - NXT 积木真的可以用 Scratch 的 Enchanting 和改编来编程吗？

> ID：10473804
> 
> 赞同：2
> 
> 时间：2012-05-06T20:00:22.600
> 
> 标签：mit-scratch

我希望我的学生使用 Scratch 的衍生产品 Enchanting 对 Mindstorm NXT 机器人进行编程，以驱动预先编程的课程，沿着路线行驶并避开障碍物。（二态、五态和比例线跟随。） 附魔发展到足以让中学生对这些行为进行编程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:27:56.420

我是 Enchanting 的首席开发者，答案是：是的，当然。

[演示 Enchanting 0.0.4](http://youtu.be/Yrd_JHWvUio)的视频展示了如何制作比例线跟随器（如果您愿意，您可以将其扩展为使用 PID 控制器）。如果您下载最新版本 0.2.2，它包含一个显示两种状态的线路跟随器的示例（您可以[在此处查看视频和下载代码](http://robotclub.ab.ca/articles/50/enchanting-02-is-out)）。你，或者有一些指导/玩耍，一个中学生，可以很容易地创建一个程序来做*n*状态，而且，特别是如果你遵循一种面向行为的方法，你可以同时避开障碍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:18:11.257

据我所知，是也不是。

Scratch 使用它的传感器板 Lego Wedo 和 S4A - Scratch for Arduino - 版本以及我相信 NXT 基本上使用它的远程传感器协议 - 它在 TCP 端口 42001 上交换消息。

写入该端口与外部系统接口的客户端允许消息和传感器数据的通信。根据 S4A 的讨论，Scratch 可以每 75 毫秒获取传感器状态并将信息传递给执行器。

但这与对控制器进行编程不同——我们远程控制系统，这已经很不错了，但我们没有在控制器（NXT 砖）中下载程序，您的机器人可以使用它来独立操作已断开连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T01:20:38.733

你看过12blocks吗？[http://12blocks.com/](http://12blocks.com/) 我一直将它用于 Propeller，它很棒而且它有 NXT 选项（我没有测试过）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-06T09:45:31.557

这是一个旧帖子，但无论如何我都会回答。Enchanting 看起来很有趣，而且似乎仍然是一个活跃的项目。我实际上会采用原始​​的 Scratch (1.4)，因为它更熟悉和可靠。使用远程传感器协议很容易将硬件与 Scratch 接口。我使用一个简单的串行接口（通过 USB 适配器），它提供 3 个数字输入和 3 个数字输出。有了它，就可以实施交通灯、光/水/热传感器等项目，仅使用 let、电阻器、簧片触点、光电晶体管、开关、PTS。对于一些基于电机的项目，如工厂传送带、电梯等，成本低于 5 美元。不需要更多的电池和几个晶体管/继电器/电机驱动器。

# testng - 自定义 TestNG 结果 xml

> ID：10473806
> 
> 赞同：1
> 
> 时间：2012-05-06T20:00:39.940
> 
> 标签：testng

我正在使用 TestNG 来运行我的测试套件，并且测试是通过 Jenkins 启动的。我在 Jenkins 中使用 TestNG 插件。我们的要求之一是向 testng-results.xml 添加一个名为“critical”的自定义属性

**当前 testng-result.xml**

```
<testng-results skipped="0" failed="3" total="5" passed="2">
......
</testng-results> 
```

**预期的 testng-result.xml**

```
 <testng-results skipped="0" failed="3" total="5" passed="2" critical="2">
    ......
 </testng-results> 
```

我在@Test 下面尝试只是为了查看 setAttribute 是如何工作的，但它没有向 testng-results.xml 中的测试添加任何属性（不确定我缺少什么，我正在以编程方式运行 TestNG，而不是通过命令行）。我不确定 ITestResult.setAttribute 在我的情况下是否有用，因为我猜它会在测试级别添加属性，我需要在套件级别添加属性。我也实施`ITestListener`了，但没有成功。我错过了什么，有人能指出我正确的方向吗？

**编辑1**

**通过代码运行 TestNG 的**TestNGRunner 类****

 **```
XmlSuite suite = new XmlSuite();
suite.setName("Custom Report");     
XmlTest test = new XmlTest(suite);
test.setName("customreport");
classes = new ArrayList<XmlClass>();
String [] runSuites = {"com.test.Testing"};
for(String asuite:runSuites)
  classes.add(new XmlClass(asuite));
test.setXmlClasses(classes);
List<XmlSuite> suites = new ArrayList<XmlSuite>();
suites.add(suite);
TestNG tng = new TestNG();      
tng.setXmlSuites(suites);           
tng.run(); 
```

**com.test.Testing 类**

```
@Test
public void test() {
  System.out.println("running my test");
  ITestResult result = Reporter.getCurrentTestResult();
  result.setAttribute("critical", 10);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:41:37.183

您应该在 testng-results.xml 中看到这些属性，尽管它们将位于它们自己的一部分中，而不是作为`<testng-results>`标记的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-23T20:50:51.083

也许设置@Test (priority=0)，零具有最高优先级（或关键）**

# ruby-on-rails - Ruby On Rails - 命名空间

> ID：10473812
> 
> 赞同：0
> 
> 时间：2012-05-06T20:01:24.220
> 
> 标签：ruby-on-rails, ruby, namespaces, request, syntax-error

有人可以帮我处理 ROR 吗？我是一个初学者，我在命名空间方面遇到了严重的问题。

例外是：

没有路线匹配 [GET] "/admin"

和路线.rb

```
SimpleCms::Application.routes.draw do

  namespace :admin do
    resources :auth
  end

  match ':controller(/:action(/:id))(.:format)'

end 
```

身份验证控制器位于管理目录中，并且视图也存在。问题出在哪里？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:13:27.110

你想打什么网址？`admin`只是一个命名空间，而不是端点。您定义的端点将是`/admin/auth`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:15:57.687

```
resources :admin, :controller => "auth" 
```

这将匹配所有`admin`到`AuthController`. 您应该阅读[路由指南](http://guides.rubyonrails.org/routing.html#specifying-a-controller-to-use)，它非常全面。

`rake routes`您可以通过在终端中运行来获取所有当前路线的列表。

如果我是你，我会`match ':controller(/:action(/:id))(.:format)`从你那里删除，`routes.rb`因为它会启用对你所有控制器方法的所有 HTTP 请求，这可能是你不想要的。

# android - Android 从图库中获取图像到 ImageView

> ID：10473823
> 
> 赞同：56
> 
> 时间：2012-05-06T20:03:27.693
> 
> 标签：android, imageview, gallery, image-gallery, getimagedata

我正在尝试将相册中的照片添加到 a`ImageView`但我收到此错误：

> java.lang.RuntimeException：将结果 ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://media/external/images/media/1 }} 传递给活动 {hotMetter.包/hotMetter.pack.GetPhoto}：java.lang.NullPointerException

这是我的代码：

```
 Intent intent = new Intent();
      intent.setType("image/*");
      intent.setAction(Intent.ACTION_GET_CONTENT);

      startActivityForResult(Intent.createChooser(intent,"Select Picture"), SELECT_PICTURE);
}
Bitmap bitmap=null;
public void onActivityResult(int requestCode, int resultCode, Intent data)
{

    if (resultCode == Activity.RESULT_OK)
    {
        if (requestCode == SELECT_PICTURE) 
        {
             Uri selectedImageUri = data.getData();           
             selectedImagePath = getPath(selectedImageUri);             
             tv.setText(selectedImagePath);
             img.setImageURI(selectedImageUri); 
         }
    }

 public String getPath(Uri uri) 
    {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        if (cursor == null) return null;
        int column_index =             cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        String s=cursor.getString(column_index);
        cursor.close();
        return s;
    } 
```

我得到了`selectedImagePath="mnt/sdcard/DCIM/myimage"`但是`img.setImageURI(selectedImageUri);`我得到了错误。

我也使用了 a`Bitmap`并尝试设置图像，`SetImageBitmap`但我得到了同样的错误。

日志猫：

```
05-06 19:41:34.191: E/AndroidRuntime(8466): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://media/external/images/media/1 }} to activity {hotMetter.pack/hotMetter.pack.GetPhoto}: java.lang.NullPointerException
05-06 19:41:34.191: E/AndroidRuntime(8466):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
05-06 19:41:34.191: E/AndroidRuntime(8466):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
05-06 19:41:34.191: E/AndroidRuntime(8466):     at android.app.ActivityThread.access$2000(ActivityThread.java:117)
05-06 19:41:34.191: E/AndroidRuntime(8466):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
05-06 19:41:34.191: E/AndroidRuntime(8466):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-06 19:41:34.191: E/AndroidRuntime(8466):     at android.os.Looper.loop(Looper.java:123)
05-06 19:41:34.191: E/AndroidRuntime(8466):     at android.app.ActivityThread.main(ActivityThread.java:3683)
05-06 19:41:34.191: E/AndroidRuntime(8466):     at java.lang.reflect.Method.invokeNative(Native Method)
05-06 19:41:34.191: E/AndroidRuntime(8466):     at java.lang.reflect.Method.invoke(Method.java:507)
05-06 19:41:34.191: E/AndroidRuntime(8466):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-06 19:41:34.191: E/AndroidRuntime(8466):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-06 19:41:34.191: E/AndroidRuntime(8466):     at dalvik.system.NativeStart.main(Native Method)
05-06 19:41:34.191: E/AndroidRuntime(8466): Caused by: java.lang.NullPointerException
05-06 19:41:34.191: E/AndroidRuntime(8466):     at hotMetter.pack.GetPhoto.onActivityResult(GetPhoto.java:55)
05-06 19:41:34.191: E/AndroidRuntime(8466):     at android.app.Activity.dispatchActivityResult(Activity.java:3908)
05-06 19:41:34.191: E/AndroidRuntime(8466):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2528) 
```

请提供建议。谢谢！

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-05-06T20:47:57.573

先简单通过`Intent`：

```
Intent i = new Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(i, RESULT_LOAD_IMAGE); 
```

你会得到你的图片路径`onActivityResult`：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
            Uri selectedImage = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };
            Cursor cursor = getContentResolver().query(selectedImage,filePathColumn, null, null, null);
            cursor.moveToFirst();
            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String picturePath = cursor.getString(columnIndex);
            cursor.close();
            ImageView imageView = (ImageView) findViewById(R.id.imgView);
            imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));
        }
    } 
```

完整的源代码[在这里](http://paragchauhan2010.blogspot.com/2012/05/choose-image-from-gallary-and-display.html)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-07-08T17:53:47.427

@parag 的代码效果很好。但是在加载一些大图像时，您可能会失败。你应该使用；

```
imageView.setImageBitmap(getScaledBitmap(picturePath, 800, 800)); 
```

代替;

```
imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath)); 
```

这是我可以使用的方法。

```
private Bitmap getScaledBitmap(String picturePath, int width, int height) {
    BitmapFactory.Options sizeOptions = new BitmapFactory.Options();
    sizeOptions.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(picturePath, sizeOptions);

    int inSampleSize = calculateInSampleSize(sizeOptions, width, height);

    sizeOptions.inJustDecodeBounds = false;
    sizeOptions.inSampleSize = inSampleSize;

    return BitmapFactory.decodeFile(picturePath, sizeOptions);
}

private int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {

        // Calculate ratios of height and width to requested height and
        // width
        final int heightRatio = Math.round((float) height / (float) reqHeight);
        final int widthRatio = Math.round((float) width / (float) reqWidth);

        // Choose the smallest ratio as inSampleSize value, this will
        // guarantee
        // a final image with both dimensions larger than or equal to the
        // requested height and width.
        inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
    }

    return inSampleSize;
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-06-22T11:18:43.047

> 这是从图库中获取图像并进行裁剪的最简单方法

第 1 步：结果的 StartActivity

```
imageUser.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            Intent intent = new Intent(Intent.ACTION_PICK,
                    MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            intent.setType("image/*");
            intent.putExtra("crop", "true");
            intent.putExtra("scale", true);
            intent.putExtra("outputX", 256);
            intent.putExtra("outputY", 256);
            intent.putExtra("aspectX", 1);
            intent.putExtra("aspectY", 1);
            intent.putExtra("return-data", true);
            startActivityForResult(intent, 1);

            }
    }); 
```

第二步：处理结果

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode != RESULT_OK) {
        return;
    }
    if (requestCode == 1) {
        final Bundle extras = data.getExtras();
        if (extras != null) {
            //Get image
            Bitmap ProfilePic = extras.getParcelable("data");
            imageUser.setImageBitmap(ProfilePic);
            TextView t=(TextView)findViewById(R.id.textoverimage);
            t.setText("image Selected");
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-06T20:38:09.097

在调试模式下运行应用程序并在 if 上设置断点，`(requestCode == SELECT_PICTURE)`并在您逐步执行时检查每个变量，以确保它按预期设置。如果您正在获得 NPE，`img.setImageURI(selectedImageUri);`则要么未设置，`img`要么`selectedImageUri`未设置。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-12-15T18:42:33.410

```
import android.content.Intent;
import android.net.Uri;
import android.provider.MediaStore;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageView;

public class MainActivity extends AppCompatActivity {

    ImageView img;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        img = (ImageView)findViewById(R.id.imageView);
    }

    public void btn_gallery(View view) {

        Intent intent =new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.INTERNAL_CONTENT_URI);

        startActivityForResult(intent,100);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode==100 && resultCode==RESULT_OK)
        {
            Uri uri = data.getData();
            img.setImageURI(uri);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-24T12:12:44.327

我认为最简单的方法是使用库 ContentManager。这个库用于从设备库、云或相机中获取照片或视频。使用来自云端的异步加载并修复了一些问题设备的错误。

通过 Gradle 下载： 您可以在[https://github.com/stfalcon-studio/ContentManager](https://github.com/stfalcon-studio/ContentManager) `compile 'com.github.stfalcon:contentmanager:0.4.3'` 找到文档

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-07T00:08:50.913

我认为你的 ImageView img 没有实例化它等于 null 给编译器；这就是引发 NullPointerException 的原因

你有没有打电话给你的活动

```
img = (ImageView) findViewById(R.id.my_imageview); 
```

其中 my_imageview 是您的 ImageView 小部件的 ID！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-07-22T10:26:51.793

@Parag Chauhan 解决方案运行良好，但我遇到了问题 - 一些文件管理器应用程序返回 Intent 对象“file:///...”而不是“content://...” - 这是使用查询所必需的.

对于这个问题，我有一个简短的解决方案：

```
public String getRealPathFromURI(Context context, Uri contentUri) {
    Cursor cursor = null;
    try {

        if("content".equals(contentUri.getScheme())) {
            String[] proj = {MediaStore.Images.Media.DATA};
            cursor = context.getContentResolver().query(contentUri, proj, null, null, null);
            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
        }
        else{
            return contentUri.getPath();
        }

    } finally {
        if (cursor != null) {
            cursor.close();
        }
    }
} 
```

基于@Parag 解决方案，

部分解决方案 (@nobre) [Android：从内容 URI 获取文件 URI？](https://stackoverflow.com/questions/5657411/android-getting-a-file-uri-from-a-content-uri)

此处的部分解决方案（@Nikolay）[从媒体存储的 URI 获取文件名和路径](https://stackoverflow.com/questions/3401579/get-filename-and-path-from-uri-from-mediastore)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-21T12:38:32.973

最初的答案是你的路径必须加入像 Uri.parse("file://" + file.getPath); 这样的前缀。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-01-12T05:12:57.077

这是对我有用的代码。

```
Button buttonLoadImage = (Button) findViewById(R.id.button4);
    buttonLoadImage.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent intent = new Intent(Intent.ACTION_PICK,
                    MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            intent.setType("image/*");
            intent.putExtra("crop", "true");
            intent.putExtra("scale", true);
            intent.putExtra("outputX", 256);
            intent.putExtra("outputY", 256);
            intent.putExtra("aspectX", 1);
            intent.putExtra("aspectY", 1);
            intent.putExtra("return-data", true);
            startActivityForResult(intent, 1);}});
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode != RESULT_OK) {

        if (requestCode == RESULT_LOAD_IMAGE && data != null) {
            Uri imageUri = data.getData();
            imageView = (ImageView) findViewById(R.id.imgView);
            imageView.setImageURI(imageUri);}}} 
```

在清单文件中添加

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-01-30T23:45:11.107

## 将以下代码放入按钮单击事件中

```
Intent ImageIntent = new Intent(Intent.ACTION_PICK,               
MediaStore.Images.Media.EXTERNAL_CONTENT_URI); //implicit intent
UploadImage.this.startActivityForResult(ImageIntent,99); 
```

* * *

## 将下面的代码放在 startActivityforResult 事件中

```
Uri ImagePathAndName = data.getData();
imgpicture.setImageURI(ImagePathAndName); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-12T05:25:41.943

[parag-chauhan](https://stackoverflow.com/users/545951/parag-chauhan)和[devrim](https://stackoverflow.com/users/1460509/devrim)的答案是完美的，但我在没有光标的情况下更改了 onActivityResult，它使代码变得更好。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && data != null) {
        Uri selectedImage = data.getData();
        try {
           ImageView imageView = (ImageView) findViewById(R.id.imgView);
           imageView.setImageBitmap(getScaledBitmap(selectedImage,800,800));
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
    }
}

private Bitmap getScaledBitmap(Uri selectedImage, int width, int height) throws FileNotFoundException {
    BitmapFactory.Options sizeOptions = new BitmapFactory.Options();
    sizeOptions.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(getContentResolver().openInputStream(selectedImage), null, sizeOptions);

    int inSampleSize = calculateInSampleSize(sizeOptions, width, height);

    sizeOptions.inJustDecodeBounds = false;
    sizeOptions.inSampleSize = inSampleSize;

    return BitmapFactory.decodeStream(getContentResolver().openInputStream(selectedImage), null, sizeOptions);
}

private int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        // Calculate ratios of height and width to requested one
        final int heightRatio = Math.round((float) height / (float) reqHeight);
        final int widthRatio = Math.round((float) width / (float) reqWidth);

        // Choose the smallest ratio as inSampleSize value
        inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
    }
    return inSampleSize;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-09-18T12:38:38.007

```
//try this to pick image from gallery..
    public void gotogallery(View view) { 
// onclick for gallery button
        chooseImage();
    }
// choose image from gallery
          public void chooseImage() {
        Intent intent = new Intent();
        intent.setType("image/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(Intent.createChooser(intent, "Select Picture"), PICK_IMAGE_REQUEST); //activity result method call
    }

    @Override
    protected void onActivityResult(int requestcode,int resultcode,Intent data ) {
        super.onActivityResult(requestcode, resultcode, data);

        if (requestcode == PICK_IMAGE_REQUEST && resultcode == RESULT_OK && data != null && data.getData() != null) {

            Uri uri = data.getData();

            try {
           Bitmap bitmap = MediaStore.Images.Media.getBitmap(getContentResolver(), uri);

                slectimageview=findViewById(R.id.imageviewimagetopdf_id);
                slectimageview.setImageBitmap(bitmap);

            } catch (IOException e) {
                e.printStackTrace();
            }
        }

    } 
```

# assembly - 玩具编译器的输出语言/格式

> ID：10473824
> 
> 赞同：9
> 
> 时间：2012-05-06T20:03:32.440
> 
> 标签：assembly, compiler-construction, language-design, vm-implementation

我在大学里学习了编译器课程，它内容丰富，很有趣，虽然也有很多工作。由于我们获得了要实现的语言规范，因此我没有学到太多的一件事是语言设计。我现在正在考虑创建一种简单的玩具语言来获得乐趣，这样我就可以玩耍并尝试不同的语言设计原则。

我还没有决定的一件事是我希望我的编译器输出什么语言或格式。理想情况下，我想为易于使用且具有一些调试功能的虚拟机输出字节码（例如，能够暂停执行并随时查看堆栈。）我还没有找到一个令人震惊的不过，我的幻想呢。为了让您了解我在寻找什么，以下是我考虑过的一些选项，以及我所看到的它们的优缺点：

*   我可以**输出文本 x86 汇编语言，然后调用**像 NASM 或 FASM 这样的汇编程序。这会给我一些为实际硬件编译的经验，因为我之前的编译器工作是在 VM 上完成的。我可能可以使用 gdb 调试生成的程序，尽管它可能不像使用具有调试支持的 VM 那样简单。这样做的主要缺点是我对 x86 汇编的经验有限，而且作为一个 CISC 指令集，它有点令人生畏。

*   我可以**为流行的虚拟机**（如 JVM 或 Lua 虚拟机）输出字节码。这些的优缺点可能会根据我选择的特定 VM 而有所不同，但总的来说，我在这里看到的缺点可能是必须学习可能对我未来项目的适用性有限的字节码。我也不确定哪个 VM 最适合我的需求。

*   我可以**使用在我的编译器课程中使用的相同 VM，**它是在我的大学专门为此目的而设计的。我已经熟悉它的设计和指令集，并且它具有不错的调试功能，所以这是一个巨大的优势。但是，它的功能极其有限，我觉得如果我尝试做任何即使是中等程度的高级操作，我也会很快遇到这些限制。

*   我可以**使用 LLVM 并输出[LLVM Intermediate Representation](http://llvm.org/docs/LangRef.html)。** LLVM IR 看起来非常强大，熟悉它肯定对我将来有用。另一方面，我真的不知道使用和调试有多容易，所以我非常感谢在该领域有经验的人的建议。

*   我可以**设计和实现自己的虚拟机。** 这有一个巨大而明显的缺点：我实际上是将我的项目变成了*两个*项目，大大降低了我实际完成任何事情的可能性。然而，它仍然有点吸引人，因为它可以让我制作一个对我想要的语言功能具有“一流”支持的 VM——例如，Lua VM 对表具有一流的支持，这使得它很容易在 Lua 字节码中使用它们。

所以，总而言之，我正在寻找一个我可以定位的 VM 或汇编程序，它相对容易学习和使用，并且易于调试。由于这是一个爱好项目，理想情况下，我还想尽量减少我花大量时间学习一些我永远不会再使用的工具或语言的机会。不过，我希望从这个练习中获得的主要内容是对语言设计的复杂性有一些第一手的了解，所以任何有助于相对快速实现的东西都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T20:26:29.617

这实际上取决于您想要构建的语言有多完整，以及您想用它做什么。如果您想为与其他语言交互的实际项目创建一种成熟的语言，那么您的需求将比您只想尝试编译特定语言功能的复杂性要大得多。

输出到汇编语言文件是一种流行的选择。您可以使用程序中的实际代码（在注释中）对汇编语言文件进行注释。这样，您可以准确地看到您的编译器对每种语言结构做了什么。可能（自从我使用这些工具以来已经很长时间了）以一种使源代码级调试成为可能的方式对 ASM 文件进行注释。

如果您打算从事语言设计工作，那么您几乎肯定需要了解 x86 汇编语言。因此，您花在学习上的时间不会被浪费。CISC指令集真的不是问题。如果您已经使用过其他一些汇编语言（您似乎已经使用过），那么您将需要几个小时的学习时间来了解寄存器和不同的寻址模式，并且可能不到一周的时间就可以熟练掌握。

为 JVM、lua 或 .NET 输出字节码是另一种合理的方法，但如果你这样做，你就会将自己与 VM 所做的假设联系在一起。而且，正如您所说，这将需要对 VM 有详细的了解。任何流行的 VM 都可能具有您需要的功能，因此选择实际上是偏好问题，而不是功能问题。

LLVM 是一个不错的选择。它功能强大并且越来越受欢迎。如果您输出 LLVM IR，您更有可能与他人的代码交互，并让他们的代码与您的交互。如果您想在编译器或语言设计领域找到一份工作，那么了解 LLVM 的工作原理无疑是一个加分项。

我不建议您在获得更多使用其他虚拟机的经验之前设计和实施您自己的虚拟机，这样您就可以看到并理解他们在实施中所做的权衡。如果你沿着这条路走下去，你最终会学习 JVM、lua、.NET 和许多其他 VM。我并不是说不要这样做，而是这样做会让你远离你探索语言设计的既定目的。

知识很少是无用的。无论您决定使用什么，都需要您学习新事物。这一切都很好。但是，如果您想*专注*于语言设计，请选择需要最少工作量的输出格式，而不是专门的语言设计。当然，与能力一致。

在您的选择中，在我看来，您大学的虚拟机已经出局。我会说设计自己的虚拟机也已经过时了。在其他三个中，我可能会选择 LLVM。但是，我对 x86 汇编非常熟悉，所以学习 LLVM 的想法有点吸引人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T20:45:46.783

看看我的[编程语言动物园](http://andrej.com/plzoo/)。它有许多语言的玩具实现，包括一些虚拟机和组成的程序集（堆栈机器）。它应该可以帮助您入门。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T06:42:56.837

如果您只是在玩语言设计，那么解释语言呢？让整个 AST 在运行时仍然存在可以让您做一些非常酷的事情。

# php - jobberBase php安装不起作用

> ID：10473831
> 
> 赞同：0
> 
> 时间：2012-05-06T20:04:27.657
> 
> 标签：php, softaculous

我在 arvixe 上使用自动安装 (softaculous) 安装了 jobberBase。由于这是所有自动安装，因此很少出现任何错误。我仍然仔细检查了数据库是否创建得很好；配置看起来也很好。

我在许多其他线程上也看到了这个错误，但在任何地方都找不到解决方案；所以看起来它是一个常见的安装问题。很可能php无法连接到数据库！任何帮助将不胜感激。

```
Warning: mysqli::mysqli() expects parameter 5 to be long, string given in /home/muskete3/public_html/jobber/_includes/class.Db.php on line 20

Warning: mysqli::query() [mysqli.query]: Couldn't fetch Db in /home/muskete3/public_html/jobber/_includes/class.Db.php on line 72

Warning: mysqli_error() [function.mysqli-error]: Couldn't fetch Db in /home/muskete3/public_html/jobber/_includes/class.Db.php on line 73

Warning: mysqli::query() [mysqli.query]: Couldn't fetch Db in /home/muskete3/public_html/jobber/_includes/class.Db.php on line 31

Warning: mysqli_error() [function.mysqli-error]: Couldn't fetch Db in /home/muskete3/public_html/jobber/_includes/class.Db.php on line 32

Fatal error: Call to a member function fetch_assoc() on a non-object in /home/muskete3/public_html/jobber/_includes/class.JobberSettings.php on line 23 
```

* * *

我的配置文件是：

```
<?php
/**
 * Define environments
 *
 */

// local (http://localhost/jobberbase/public)
$__instances['local'] = array(
    // should be a unique part of the url (or the entire url if you wish)
    'prefix' => 'www.jobs41.net',
    // mysql credentials
    'db_host' => 'localhost',
    'db_port' => 3306,
    'db_user' => '***',
    'db_password' => '***',
    'db_name' => '***',
    'db_prefix' => '',
    // your site's full url
    'app_url' => 'http://www.jobs41.net/jobber/',
    // error reporting
    'ini_error_reporting' => E_ALL,
    'ini_display_errors' => 'On',
    // environment setting 1 (use 'local' for localhost/testing OR 'online' for live, production environment)
    'location' => 'local',
    // environment setting 2 (use 'dev' together with 'local' in the previous setting OR 'prod' with 'online')
    'environment' => 'dev',
    //'apache_mod_rewrite', 'iis_url_rewrite' -microsoft URL Rewrite module, 'iis_isapi_rewrite'
    'rewrite_mode' => 'apache_mod_rewrite'
);

// live (http://www.yourjobberbasedomain.com)
$__instances['live'] = array(
    'prefix' => 'www.jobs41.net',
    'db_host' => 'localhost',
    'db_port' => 3306,
    'db_user' => 'muskete3_jobb563',
    'db_password' => '6Sn82hxv7P',
    'db_name' => 'muskete3_jobb563',
    'db_prefix' => '',
    'app_url' => 'http://www.jobs41.net/jobber/',
    'ini_error_reporting' => E_ALL,
    'ini_display_errors' => 'Off',
    'location' => 'online',
    'environment' => 'prod',
    'rewrite_mode' => 'apache_mod_rewrite'
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:31:31.267

以前我没有将它安装为根目录；因此它安装在 public_html/job.. 现在当我在根目录中再次安装它时它工作正常。

# jquery - 输入类型文件样式

> ID：10473834
> 
> 赞同：0
> 
> 时间：2012-05-06T20:04:39.540
> 
> 标签：jquery, html, css

我用 jquery 更改了输入文件按钮样式，但我需要在文本输入和按钮之间留有空间。

我该怎么做？

我使用本教程： http: [//www.appelsiini.net/projects/filestyle](http://www.appelsiini.net/projects/filestyle)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:18:38.063

你可以编辑javascript源代码，像我一样添加一些margin-left（“margin-left：”8px“），

试试这个：

```
/*
 * Style File - jQuery plugin for styling file input elements
 *  
 * Copyright (c) 2007-2008 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Based on work by Shaun Inman
 *   http://www.shauninman.com/archive/2007/09/10/styling_file_inputs_with_css_and_the_dom
 *
 * Revision: $Id: jquery.filestyle.js 303 2008-01-30 13:53:24Z tuupola $
 *
 */

(function($) {

    $.fn.filestyle = function(options) {

        /* TODO: This should not override CSS. */
        var settings = {
            width : 250
        };

        if(options) {
            $.extend(settings, options);
        };

        return this.each(function() {

            var self = this;
            var wrapper = $("<div>")
                            .css({
                                "width": settings.imagewidth + "px",
                                "height": settings.imageheight + "px",
                                "background": "url(" + settings.image + ") 0 0 no-repeat",
                                "background-position": "right",
                                "display": "inline",
                                "position": "absolute",
                                "overflow": "hidden"
                                "margin-left:"8px",
                            });

            var filename = $('<input class="file">')
                             .addClass($(self).attr("class"))
                             .css({
                                 "display": "inline",
                                 "width": settings.width + "px"
                             });

            $(self).before(filename);
            $(self).wrap(wrapper);

            $(self).css({
                        "position": "relative",
                        "height": settings.imageheight + "px",
                        "width": settings.width + "px",
                        "display": "inline",
                        "cursor": "pointer",
                        "opacity": "0.0"
                    });

            if ($.browser.mozilla) {
                if (/Win/.test(navigator.platform)) {
                    $(self).css("margin-left", "-142px");                    
                } else {
                    $(self).css("margin-left", "-168px");                    
                };
            } else {
                $(self).css("margin-left", settings.imagewidth - settings.width + "px");                
            };

            $(self).bind("change", function() {
                filename.val($(self).val());
            });

        });

    };

})(jQuery); 
```

# spring-mvc - 找不到资源

> ID：10473836
> 
> 赞同：0
> 
> 时间：2012-05-06T20:04:59.993
> 
> 标签：spring-mvc, http-status-code-404, tomcat7

我在 Tomcat 中使用 Spring MVC，我认为这是标准配置。web.xml 如下所示：

```
<servlet>
<servlet-name>acme</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring/appServlet/acme-spring.xml
    </param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>acme</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

使用 Spring acme-spring.xml，我将 view-controller 标记设置为根路径：

```
<mvc:view-controller path="/" view-name="login.jsp"/ 
```

和站点解析器标签：

```
<bean id="siteResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
    <property name="prefix">
        <value>/WEB-INF/views/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean> 
```

但是，当我点击 localhost:8080/acme 时，我会期待 login.jsp，但相反，我收到了 Invalid URL 错误。我查看了[Spring 3.1 MVC 应用程序上](https://stackoverflow.com/questions/9260777/http-status-404-on-spring-3-1-mvc-app)的 HTTP 状态 404和Spring 3.1 MVC 应用程序[上的 HTTP 状态 404，](https://stackoverflow.com/questions/9260777/http-status-404-on-spring-3-1-mvc-app)但没有任何乐趣。

关于我配置错误的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:00:35.480

你的标签应该是这样的

```
<mvc:view-controller  path="/" view-name="login"/> 
```

因为 veiwResolver 会处理前缀和后缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:01:12.237

if you are accessing it by using just context path , then you should either mention your welcome-file list in your web-xml or you should direcly access any welcome or jsp which you want to show on start-up. 1.First add below lines or hit localhost:8080/acme/Login.jsp instead of hitting localhost:8080/acme

```
<welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

2\. Add servlet name mapping like :

```
<servlet>
    <servlet-name>app_name</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

1.  Add servlet URL mapping :

    app_name *.do //you can write url pattern as per your requir.

check and let me know if any other exception you are facing..!!

# jquery - 如何使链接文本“关闭”而不是十字图标出现在 jQuery 对话框中？

> ID：10473842
> 
> 赞同：1
> 
> 时间：2012-05-06T20:05:31.843
> 
> 标签：jquery, jquery-ui

在一个普通的 jQuery 对话框中，您会在右上角看到一个十字图标。单击它时，对话窗口将关闭。底层 HTML 如下所示：

```
 <a class="ui-dialog-titlebar-close ui-corner-all" href="#" role="button">
      <span class="ui-icon ui-icon-closethick">close</span>
    </a> 
```

代替十字图标，我希望“关闭”文本链接可见。这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:18:37.793

您可以使用 CSS 实现并修改它，但您也可以根据需要进行修改：

```
.ui-icon-closethick {
    background-image: none;
    text-indent: 0;
    width: 50px;
}

.ui-dialog-titlebar-close {
    right: 1.3em
} 
```

# cocoa - VLC 类似 Cocoa 中的控制面板

> ID：10473844
> 
> 赞同：0
> 
> 时间：2012-05-06T20:06:06.163
> 
> 标签：cocoa, video, user-interface, vlc

我正在为 MacOS X 编写一个视频播放器应用程序（使用 AVFoundation），我希望拥有与 VLC 相同类型的控制面板（几秒钟后淡出）。

实现这一点的最佳选择是什么？

我正在考虑一个自定义的 NSWindowControl 对象，我可以使用界面构建器单独设计它，但我不太了解如何对创建和显示步骤进行排序，但我想知道是否有一个最好的选择子类化 NSViewController.. .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:15:38.013

我只需在界面构建器中添加一个 NSPanel，将其添加为我的主窗口中的子窗口，并在主窗口调整大小时添加通知以相应地调整面板大小。

# objective-c - 是否可以从工具栏只圆一个角？

> ID：10473846
> 
> 赞同：1
> 
> 时间：2012-05-06T20:06:25.547
> 
> 标签：objective-c

只想圆一个角而不是4个。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:24:33.830

我刚刚用谷歌搜索了“圆角目标-c”，我发现了这些

[UIView中的圆两个角](https://stackoverflow.com/questions/4847163/round-two-corners-in-uiview)

[使用 CALayers 的圆形 UIView - 只有一些角落 - 如何？](https://stackoverflow.com/questions/2264083/rounded-uiview-using-calayers-only-some-corners-how)

[http://www.iphonedevsdk.com/forum/iphone-sdk-development/95917-adding-rounded-corners-only-top-uitableview.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/95917-adding-rounded-corners-only-top-uitableview.html)

我没有尝试任何东西，但我相信你可以用这些解决一些问题。

# cocoa - CATextLayer 中不需要的填充

> ID：10473847
> 
> 赞同：1
> 
> 时间：2012-05-06T20:06:31.967
> 
> 标签：cocoa, core-animation, core-text

我在 CATextLayer 中绘制一个字符时遇到问题，这样该层就是字符的大小。

我使用下面的代码来获取与字符串中的字符相对应的字形大小。目前我忽略了变音符号，所以我假设字形和字符之间存在一对一的相关性。

对于大小为 128pt 的 Helvetica 字体，我还获得了几个很好的边界框值：

```
Character | x   | y     | width | height |
B         | 9.4 |   0.0 | 70.8  | 91.8   |
y         | 1.3 | -27.4 | 61.2  | 96.0   | 
```

我不确定坐标系的原点在哪里表示坐标。我假设 (0,0) 位于字体的最左侧并垂直位于字体的基线上。这就是为什么 'y' 具有负 y 值的原因。

我正在使用此代码来计算大写字母 B 的大小并相应地调整其 CATextLayer 的大小。

```
- (CATextLayer *) testTextLayer
{
    CATextLayer *l = [CATextLayer layer];
    l.string = @"B";
    NSUInteger len = [l.string length];
    l.fontSize =128.f;
    CGColorRef blackColor = CGColorCreateGenericGray(0.f, 1.f);
    l.foregroundColor = blackColor;
    CGColorRelease(blackColor);

    // need to set CGFont explicitly to convert font property to a CGFontRef
    CGFontRef layerFont = CGFontCreateWithFontName((CFStringRef)@"Helvetica");
    l.font = layerFont;

    // get characters from NSString
    UniChar *characters = (UniChar *)malloc(sizeof(UniChar)*len);
    CFStringGetCharacters((__bridge CFStringRef)l.string, CFRangeMake(0, [l.string length]), characters);

    // Get CTFontRef from CGFontRef
    CTFontRef coreTextFont = CTFontCreateWithGraphicsFont(layerFont, l.fontSize, NULL, NULL);

    // allocate glyphs and bounding box arrays for holding the result
    // assuming that each character is only one glyph, which is wrong
    CGGlyph *glyphs = (CGGlyph *)malloc(sizeof(CGGlyph)*len);
    CTFontGetGlyphsForCharacters(coreTextFont, characters, glyphs, len);

    // get bounding boxes for glyphs
    CGRect *bb = (CGRect *)malloc(sizeof(CGRect)*len);
    CTFontGetBoundingRectsForGlyphs(coreTextFont, kCTFontDefaultOrientation, glyphs, bb, len);
    CFRelease(coreTextFont);

    l.position = CGPointMake(200.f, 100.f);

    l.bounds = bb[0];

    l.backgroundColor = CGColorCreateGenericRGB(0.f, .5f, .9f, 1.f);

    free(characters);
    free(glyphs);
    free(bb);

    return l;
} 
```

这是我从上面的代码中得到的结果。在我看来，大小是正确的，但是在角色周围发生了某种填充。

![CATextLayer 上 B 的结果](../Images/bb1d8b25ff6329ee0406c7d7f4479ab1.png)

现在**我的问题**

1.  我对字形边界框起源的假设是否正确？
2.  没有这种填充，如何绘制字母使其整齐地融入图层？或者，如何控制这种填充？

也许我在这里遗漏了一个明显的观点。现在有没有办法在设置图层的大小和字体后以定义的方式将图层收缩包裹在字符周围（意思是可选的填充，有点像 CSS 中的）？

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T20:23:43.747

如何`CGPath`从一个字形创建一个`CTFontCreatePathForGlyph`，然后用 得到它的边界框`CGPathGetBoundingBox`？

另一种方法是以`CTRun`某种方式创建一个并使用`CTRunGetImageBounds`也返回“紧密”边界框的函数，但这可能需要比上述方法更多的代码行，并且您需要具有图形上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T21:32:30.177

我认为这与字母周围的内置空间有关。如果您将字形组合成一行，它们的边界框通常包含一些空间作为一般间距。然后使用字距调整表对这些进行优化。

是的，提取实际的贝塞尔路径是获得紧密边界框的一种非常好的方法。尽管我没有使用 CATextLayers 的经验，但我多年来一直这样做。

# gremlin - 通过 Gremlin 查询从节点返回属性子集

> ID：10473848
> 
> 赞同：3
> 
> 时间：2012-05-06T20:06:40.680
> 
> 标签：gremlin

有没有办法使用 Gremlin 查询仅返回图形节点的所有属性的子集？

我知道您可以使用转换管道来连接属性值，但我更感兴趣的是获得结构化结果（如 propertyName1 = value1，propertyName2 = value2）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T08:56:32.860

假设您使用的是 Gremlin-Groovy，我发现使用 Groovy 的 each 构造是一种从 Gremlin 查询结果创建我自己的对象的有用方法。例如：

```
nodes = []
g.V.each{ node ->
  nodes += [ propertyName1 : node.value1, propertyName2 : node.value2 ]
} 
```

现在您有一个 Map 对象列表，表示从您的查询返回的节点。这可能不是最有效的方法，但它非常灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T14:03:27.407

从 Gremlin 2.4.0 开始，您可以：

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()
==>tinkergraph[vertices:6 edges:6]
gremlin> g.v(1).out.map('name')
==>{name=vadas}
==>{name=josh}
==>{name=lop}
gremlin> g.v(1).out.map('name','age')
==>{age=27, name=vadas}
==>{age=32, name=josh}
==>{age=null, name=lop} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T21:02:28.970

你看过使用表吗？

样本来自：[Gremlin Wiki](https://github.com/tinkerpop/gremlin/wiki/Pattern-Match-Pattern)

```
gremlin> t = new Table()                                                       
gremlin> g.v(1).out('knows').as('x').out('created').as('y').table(t){it.name}{it.name}
==>v[5]
==>v[3]
gremlin> t
==>[x:josh, y:ripple]
==>[x:josh, y:lop] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-22T16:04:58.737

这样做是可能[的](http://gremlindocs.spmallette.documentup.com/#transform-1)：

如果数据是：

```
gremlin> g.E.has('weight', T.gt, 0.5f).outV.age
==>32
==>29 
```

然后要做的查询是：

```
gremlin> g.E.has('weight', T.gt, 0.5f).outV.transform{[id:it.id,age:it.age]}
==>{id=4, age=32}
==>{id=1, age=29} 
```

# python - 将纬度和经度转换为 3D 空间中的点

> ID：10473852
> 
> 赞同：22
> 
> 时间：2012-05-06T20:07:34.250
> 
> 标签：python, math, 3d, latitude-longitude, data-conversion

我需要将纬度和经度值转换为 3 维空间中的一个点。我已经尝试了大约 2 个小时，但我没有得到正确的结果。

Equirectangular坐标来自**openflights.org** [。](http://openflights.org/data.html)我尝试了几种*cos*和*sin*的组合，但结果看起来不像我们心爱的小地球。

* * *

在下文中，您可以看到应用[Wikipedia](http://en.wikipedia.org/wiki/Spherical_coordinate_system#Cartesian_coordinates)建议的转换的结果。我认为可以从上下文中猜出是什么`c4d.Vector`。

```
def llarToWorld(latit, longit, altid, rad):
    x = math.sin(longit) * math.cos(latit)
    z = math.sin(longit) * math.sin(latit)
    y = math.cos(longit)
    v = c4d.Vector(x, y, z)
    v = v * altid + v * rad
    return v 
```

![在此处输入图像描述](../Images/7ea9d43e6307462cd55d686873959212.png)

*红色：X，绿色：Y，蓝色：Z*

人们确实可以识别北美和南美，尤其是墨西哥湾周围的土地。然而，它看起来有点被压扁了，有点放错地方了。。

* * *

由于结果看起来有些旋转，我想，我尝试交换纬度和经度。但这个结果有些尴尬。

```
def llarToWorld(latit, longit, altid, rad):
    temp = latit
    latit = longit
    longit = temp
    x = math.sin(longit) * math.cos(latit)
    z = math.sin(longit) * math.sin(latit)
    y = math.cos(longit)
    v = c4d.Vector(x, y, z)
    v = v * altid + v * rad
    return v 
```

![在此处输入图像描述](../Images/7d0d870b3ca32e08a6444bb7f85528d1.png)

* * *

这是没有转换值的结果。

```
def llarToWorld(latit, longit, altid, rad):
    return c4d.Vector(math.degrees(latit), math.degrees(longit), altid) 
```

![在此处输入图像描述](../Images/e7430e17cd24dde2372e15c06a4de5f6.png)

* * *

**问题**：如何正确转换经度和纬度？

* * *

## 解决方案

感谢 TreyA，我在 mathworks.com 上找到[了这个](http://www.mathworks.de/help/toolbox/aeroblks/llatoecefposition.html)页面。执行它的代码如下：

```
def llarToWorld(lat, lon, alt, rad):
    # see: http://www.mathworks.de/help/toolbox/aeroblks/llatoecefposition.html
    f  = 0                              # flattening
    ls = atan((1 - f)**2 * tan(lat))    # lambda

    x = rad * cos(ls) * cos(lon) + alt * cos(lat) * cos(lon)
    y = rad * cos(ls) * sin(lon) + alt * cos(lat) * sin(lon)
    z = rad * sin(ls) + alt * sin(lat)

    return c4d.Vector(x, y, z) 
```

实际上，我切换了`y`，`z`因为那时地球是旋转的，但是，它起作用了！结果是这样的：

![在此处输入图像描述](../Images/93dc2a853650efecf458017a0f24190a.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-12-03T19:34:26.423

我已经重新格式化了之前提到的代码here，但更重要的是，您遗漏了**Niklas R提供的链接中提到的一些方程式**

```
def LLHtoECEF(lat, lon, alt):
    # see http://www.mathworks.de/help/toolbox/aeroblks/llatoecefposition.html

    rad = np.float64(6378137.0)        # Radius of the Earth (in meters)
    f = np.float64(1.0/298.257223563)  # Flattening factor WGS84 Model
    cosLat = np.cos(lat)
    sinLat = np.sin(lat)
    FF     = (1.0-f)**2
    C      = 1/np.sqrt(cosLat**2 + FF * sinLat**2)
    S      = C * FF

    x = (rad * C + alt)*cosLat * np.cos(lon)
    y = (rad * C + alt)*cosLat * np.sin(lon)
    z = (rad * S + alt)*sinLat

    return (x, y, z) 
```

比较输出：查找加利福尼亚州洛杉矶的 ECEF（34.0522，-118.40806，0 海拔）
我的代码：
X = -2516715.36114 米或**-2516.715 公里**
Y = -4653003.08089 米或**-4653.003 公里**
Z = 3551245.35929 米或**3551.245 公里**

您的代码：
X = -2514072.72181 米或**-2514.072 公里**
Y = -4648117.26458 米或**-4648.117 公里**
Z = 3571424.90261 米或**3571.424 公里**

尽管在您的地球自转环境中，您的函数将生成*正确的地理区域*以供显示，但它**不会**给出正确的 ECEF 等效坐标。正如你所看到的，一些参数相差多达**20 公里**，这是一个相当大的误差。

展平因子`f`取决于您为转换假设的模型。典型，型号为[**WGS 84**](http://en.wikipedia.org/wiki/World_Geodetic_System)；但是，还有其他型号。

就个人而言，我喜欢使用[**这个指向**](http://www.oc.nps.edu/oc2902w/coord/llhxyz.htm)海军研究生院的链接来检查我的转换情况。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-06T23:48:34.200

你没有按照维基百科的建议去做。仔细阅读一遍。

他们说：

```
x = r cos(phi) sin(theta)
y = r sin(phi) sin(theta)
z = r cos(theta) 
```

进而：

```
theta == latitude
phi == longitude 
```

并且，在您的情况下， r = 半径 + 高度

所以你应该使用：

```
r = radius + altitude
x = r cos(long) sin(lat)
y = r sin(long) sin(lat)
z = r cos(lat) 
```

请注意，最后一个条目是`cos(lat)`（您使用的是经度）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-28T17:13:48.553

正如*TreyA*所说，`LLA to ECEF`是解决方案。见[http://www.mathworks.de/help/toolbox/aeroblks/llatoecefposition.html](http://www.mathworks.de/help/toolbox/aeroblks/llatoecefposition.html)

# iphone - Xcode 4.2 代码设计

> ID：10473854
> 
> 赞同：0
> 
> 时间：2012-05-06T20:07:52.900
> 
> 标签：iphone, xcode, ios5, xcode4, xcode4.2

我不断收到这个错误，我已经尝试了大约一周的一切，你们对此有什么了解吗？

它只是在我归档我的应用程序时出现的一个警告，但它仍然会成功构建并且我仍然可以验证所以你认为我可以将它发送到 iTunes 连接还是他们会失败它提前谢谢。

我的错误

![在此处输入图像描述](../Images/8af4ac1ba7c15162aa0e3bc0a51fc723.png)

这是我目前的代码符号

![在此处输入图像描述](../Images/ef912b2587ab2513f16e044701e64580.png)

这是我的代码符号在项目构建设置中的样子的更新，目标构建设置仍然没有什么问题，但我仍然收到相同的警告？ ![在此处输入图像描述](../Images/34bbba6387041c771ba7e4d32712352f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:42:05.687

你检查过菜单：

**产品 -> 编辑方案 -> 存档**

动作应该是**分发**

此外，您只需在“任何 iOS SDK”字段中设置代码设计。

像这样的东西：

## ![协同设计](../Images/9e4987efc5ba7551d4c5e83a9b8bc7b4.png)

# parsing - 秒差距位置作为偏移量

> ID：10473857
> 
> 赞同：1
> 
> 时间：2012-05-06T20:08:11.913
> 
> 标签：parsing, haskell, parsec

使用 Parsec 可以轻松地将位置作为偏移量（作为输入开始的字符）吗？如果是这样，怎么做？Parsec 在内部将位置保留为具有源名称、行和列的数据类型。

我希望能够编写一个解析器

```
pWithPos p = do left <- getPosition       -- gets the current position as an offset
                x <- p
                right <- getPosition       -- gets the current position as an offset
                return (x,(left,right)) 
```

它使用解析器 p 解析某些东西，并返回它的结果，以及它的左右位置作为**offsets**。

[`alex`](http://www.haskell.org/alex/)（词法分析器生成器）例如处理[保持](http://www.haskell.org/alex/doc/html/wrappers.html#id462357)绝对字符偏移、行号和列号的位置。我错过了秒差距的绝对字符偏移量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:22:39.457

不，不可能在 Parsec 中获取当前字符串索引，因为 Parsec 不跟踪该索引。您可以`ParsecT`在状态单子上使用单子转换器并手动跟踪已解析的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T00:08:07.987

给定输入字符串和 SourcePos，您可以使用此函数计算偏移量：

```
offset :: String -> SourcePos -> Maybe Location
offset source pos = elemIndex pos positions
  where positions = scanl updatePosChar firstPos source
        firstPos = initialPos (sourceName pos) 
```

# c++ - 为什么 c++ 告诉我没有 [] 与我传入的类型匹配？

> ID：10473860
> 
> 赞同：2
> 
> 时间：2012-05-06T20:08:38.347
> 
> 标签：c++, map

```
static const map<const Type*, int>* priority; 
```

其中 Type 是我自己的特殊课程。

初始化（为什么 c++ 要求这个我不知道，自动甚至不起作用）

```
const map<const Type*, int, less<const Type*>, allocator<pair<const Type* const, int>>>* ToolProperty::priority
= new map<const Type*, int, less<const Type*>, allocator<pair<const Type* const, int>>>(); 
```

最后，尝试使用它（它告诉我我传入了错误的类型）

```
static void setPriority(const Type* type, int newPriority)
{
    (*priority)[type] = newPriority;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T20:10:59.920

priority 是指向 const 映射的指针，但 operator[] 不能与`const associative containers`.

# parsing - 将串行字符串数据解析成数组（VVVV to Arduino）

> ID：10473863
> 
> 赞同：0
> 
> 时间：2012-05-06T20:08:56.773
> 
> 标签：parsing, arduino, serial-port

我目前正在大学从事一个 arduino 项目。基本上我想做的是将一串数据从 VVVV 发送到 arduino，但是我需要将数据解析成一个数组，我完全不知道该怎么做！

从 VVVV 发送的字符串是这样的；U,c,R,|,W,H,P 和我每次都需要将这些值中的每一个写入特定的伺服，因此值 1 需要转到伺服 1，依此类推。

这是我目前的代码，我意识到它的编码非常糟糕，当我弄清楚如何解析数据时，我确实打算让它更有效率。

```
#include <Servo.h>
Servo servo1;
Servo servo2;
Servo servo3;
Servo servo4;

char array1[4] = { '0', '0', '0', '0'}; //array for midi variables

void setup()
{
 // begin the serial communication
 Serial.begin(9600);

 servo1.attach(2);
 servo2.attach(3);
 servo3.attach(4);
 servo4.attach(5);

}

void loop(){
  while (Serial.available() == 0)  {
    array1[0] = 0;
    array1[1] = 0;
    array1[2] = 0;
    array1[3] = 0;
  }

{

 // check if data has been sent from the computer
 if (Serial.available() >= 4) {
    for ( int i = 0; i < 4; i++)
    array1[i] = Serial.read();

  }

   Serial.print(array1[0]);
   Serial.print(array1[1]);
   Serial.print(array1[2]);
   Serial.print(array1[3]);

   servo1.write(array1[0]);
   servo2.write(array1[1]);
   servo3.write(array1[2]);
   servo4.write(array1[3]);

}
} 
```

编辑 - 我可能应该提到我最终希望使用 7 个伺服系统，但目前我只在我的电路中使用 4 个。此外，当我上传此补丁并启用 VVVV 时，arduino 只是断开连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:49:56.107

@opc0de 这个系列问题引起了很多混乱。包括对我自己。[这里](https://stackoverflow.com/q/10902704/1440715)可能有类似的问题。

> 我最近涉足这个。当 Arduino 接收到来自 Arduino IDE 以外的大多数设备的串行通信时，它会自动重置。这就是为什么您可以从 IDE 发送但不能从 node.js 发送的原因。
> 
> 我有一个 Uno，并在 Reset 和 Ground 之间放置了一个电容器。这是一个包含有关该主题的一些很好信息的页面。祝你好运。 [http://arduino.cc/playground/Main/DisablingAutoResetOnSerialConnection](http://arduino.cc/playground/Main/DisablingAutoResetOnSerialConnection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:28:19.727

```
if (Serial.available() > 3)
{
    for (int i=0; i < 4 ; i++)
    {
        array[i] = Serial.read();
    }
    Serial.flush();
} 
```

希望能帮助到你 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T13:37:24.123

如果您想在收到后立即分配值，您可以这样做：

```
if(Serial.available() >= 3) {

    servo1.write(Serial.read());
    servo2.write(Serial.read());
    servo3.write(Serial.read());
    servo4.write(Serial.read());

    Serial.flush();
} 
```

如果您希望将接收到的值存储在数组中以便稍后执行更多操作，则：

```
if(Serial.available() >= 3) {

    for(i = 0; i < 4; i ++) {

        array[i] = Serial.read();
    }
    Serial.flush();
} 
```

# node.js - 正确使用Mongoskin

> ID：10473864
> 
> 赞同：2
> 
> 时间：2012-05-06T20:09:09.010
> 
> 标签：node.js, mongodb, coffeescript, mongoskin

我通常一起工作，[`mongoskin`](https://github.com/kissjs/node-mongoskin)因为我喜欢靠近数据库。通常，我使用类似 的文件进行设置`db.coffee`，其中仅包含以下内容：

```
mongo = require 'mongoskin'
# either local
module.exports = mongo.db 'mongodb://localhost/database'
# or remote
module.exports = mongo.db 'mongodb://<user>:<pass>@<host>:<port>/<db>?auto_reconnect=true' 
```

然后我在其他来源中使用它：

```
db = require 'db'
users = db.collection 'users'
# Now use the collection in handlers and middleware 
```

当我使用本地 mongo 服务器时，这似乎工作得非常好，我已经有几个月的正常运行时间，但它从来没有成为问题。

但是，当我使用远程秒时，如果服务器运行时间超过几分钟，我会遇到问题 - 与 mongodb 的连接似乎丢失了，尽管`auto_reconnect`. 我想这是因为`localhost`连接永远不会自动关闭。

然而，这让我想到我是否可能`mongoskin`以错误的方式使用，或者是否只是存在错误`auto_reconnect`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T14:08:05.687

确保 mongoskin 使用的是 1.0.0 或更高版本的驱动程序

# xna - 旋转和缩放整个 2d 场景

> ID：10473865
> 
> 赞同：0
> 
> 时间：2012-05-06T20:09:16.950
> 
> 标签：xna, xna-4.0

我目前正在开发类似最终幻想的游戏，并且我正在研究从世界地图切换到战斗时的效果。我想要在旋转效果时放大，我想简单地为将传递给 SpriteBatch.Begin 的变换矩阵设置动画，但我的问题是当我旋转时，旋转原点是我整个场景的左上角并且它没有't“放大”居中。我看到您可以在 SpriteBatch.Draw 上指定一个旋转原点，但这会为每个精灵设置它，我想旋转整个场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:52:35.970

您正在寻找的转换是这样的：

```
Matrix Transform = Matrix.CreateTranslation(-Position)
   * Matrix.CreateScale(scale)
   * Matrix.CreateRotationZ(angle) 
   * Matrix.CreateTranslation(GraphisDevice.Viewport.Bounds.Center); 
```

# javascript - 使用 jquery 选择一个 asp 标签控件

> ID：10473867
> 
> 赞同：0
> 
> 时间：2012-05-06T20:09:22.493
> 
> 标签：javascript, jquery, asp.net

我目前正在选择一个

```
<asp:Label id="lblLoginusername"..../> 
```

因此，我试图通过在我的 google chrome 浏览器中编写以下内容来获取对它的引用（以便稍后更改其值）：

```
$("#<%= lblLoginUsername.ClientID%>") 
```

我的页面中有 jquery (1.7.2.min)，但不幸的是我得到：

```
[Exception: Error: Syntax error, unrecognized expression: >] 
```

谁能指导我哪里有一个愚蠢的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:26:28.423

首先，如果是服务器端异常，我不知道异常，那么问题将来自您的 asp 标签，重新检查您是如何编写语法的

in jquery when selecting an element you select by its html attribute not by its asp.net properties and the ID tag in asp.net is not equal to the id attribute in html , so what you can do is figuring out the id attribute is from生成的 html ，或添加一个类名由该类选择

你在 chrome 中所做的是写`$("#<%= lblLoginUsername.ClientID%>")`这意味着在页面上找到它的 id 属性等于`"#<%= lblLoginUsername.ClientID%>"`wich 的元素根本不是 html 它的 asp.net 命令，浏览器不会理解它`

# mono - mono gtk hello world 失败，“缺少方法”

> ID：10473868
> 
> 赞同：7
> 
> 时间：2012-05-06T20:09:23.783
> 
> 标签：mono, gtk, gtk#

我第一次尝试单声道。这是我设置它的步骤。

在 VirtualBox 中安装 Kubuntu 12.04 LTS

```
apt-get install mono-complete gtk-sharp2 
```

然后我尝试在本教程中运行 hello world 应用程序。

[http://www.mono-project.com/Mono_Basics](http://www.mono-project.com/Mono_Basics)

命令行应用程序运行良好。

我按照说明使用以下命令编译了 GTK 应用程序：

```
gmcs hello.cs -pkg:gtk-sharp-2.0 
```

当我运行应用程序时，它失败并出现以下错误：

```
Missing method System.Type::op_Inequality(Type,Type) in assembly /usr/lib/mono/2.0/mscorlib.dll, referenced in assembly /usr/lib/mono/gac/gtk-sharp/2.12.0.0__35e10195dab3c99f/gtk-sharp.dll

Unhandled Exception: System.MissingMethodException: Method not found: 'System.Type.op_Inequality'.
  at Gtk.Window..ctor (System.String title) [0x00000] in <filename unknown>:0
  at Hello.Main () [0x00000] in <filename unknown>:0
[ERROR] FATAL UNHANDLED EXCEPTION: System.MissingMethodException: Method not found: 'System.Type.op_Inequality'.
  at Gtk.Window..ctor (System.String title) [0x00000] in <filename unknown>:0
  at Hello.Main () [0x00000] in <filename unknown>:0 
```

在我看来，单声道库与 gtk-sharp 库不兼容。

有人对我如何使它工作有任何建议吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-06T21:40:12.757

所有 12.04 Ubuntu 版本都有 Mono 默认为 4.0 配置文件（类似于 .NET 4.0）。您正在使用 gmcs 编译器编译 hello.cs，该编译器旨在针对 2.0 配置文件（类似于 .NET 2.0）。

使用 dmcs 编译器而不是 gmcs，错误就会消失。

# java - Java：InputStream 读取大文件太慢

> ID：10473873
> 
> 赞同：14
> 
> 时间：2012-05-06T20:09:37.450
> 
> 标签：java, inputstream, large-files, java-native-interface

我必须逐个字符地读取一个 53 MB 的文件。当我使用 ifstream 在 C++ 中执行此操作时，它会在几毫秒内完成，但使用 Java InputStream 则需要几分钟。Java 这么慢是正常的还是我错过了什么？

此外，我需要用 Java 完成程序（它使用 servlet，我必须从中调用处理这些字符的函数）。我在想也许用 C 或 C++ 编写文件处理部分，然后使用 Java Native Interface 将这些函数与我的 Java 程序接口......这个想法如何？

谁能给我任何其他提示...我真的需要更快地阅读文件。我尝试使用缓冲输入，但它仍然没有提供接近 C++ 的性能。

编辑：我的代码跨越了几个文件，而且很脏，所以我给出了概要

```
import java.io.*;

public class tmp {
    public static void main(String args[]) {
        try{
        InputStream file = new BufferedInputStream(new FileInputStream("1.2.fasta"));
        char ch;        
        while(file.available()!=0) {
            ch = (char)file.read();
                    /* Do processing */
            }
        System.out.println("DONE");
        file.close();
        }catch(Exception e){}
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-06T20:36:29.283

我用一个 183 MB 的文件运行了这段代码。它打印“Elapsed 250 ms”。

```
final InputStream in = new BufferedInputStream(new FileInputStream("file.txt"));
final long start = System.currentTimeMillis();
int cnt = 0;
final byte[] buf = new byte[1000];
while (in.read(buf) != -1) cnt++;
in.close();
System.out.println("Elapsed " + (System.currentTimeMillis() - start) + " ms"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T20:42:08.987

我会试试这个

```
// create the file so we have something to read.
final String fileName = "1.2.fasta";
FileOutputStream fos = new FileOutputStream(fileName);
fos.write(new byte[54 * 1024 * 1024]);
fos.close();

// read the file in one hit.
long start = System.nanoTime();
FileChannel fc = new FileInputStream(fileName).getChannel();
ByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
while (bb.remaining() > 0)
    bb.getLong();
long time = System.nanoTime() - start;
System.out.printf("Took %.3f seconds to read %.1f MB%n", time / 1e9, fc.size() / 1e6);
fc.close();
((DirectBuffer) bb).cleaner().clean(); 
```

印刷

```
Took 0.016 seconds to read 56.6 MB 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T20:14:50.613

使用[`BufferedInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedInputStream.html)：

```
InputStream buffy = new BufferedInputStream(inputStream); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T20:35:13.310

如上所述，使用 BufferedInputStream。你也可以使用 NIO 包。请注意，对于大多数文件，BufferedInputStream 的读取速度与 NIO 一样快。但是，对于非常大的文件，NIO 可能会做得更好，因为您可以进行内存映射文件操作。此外，NIO 包执行可中断 IO，而 java.io 包则没有。这意味着如果你想从另一个线程取消操作，你必须使用 NIO 来使其可靠。

```
ByteBuffer buf = ByteBuffer.allocate(BUF_SIZE);
FileChannel fileChannel = fileInputStream.getChannel();
int readCount = 0;
while ( (readCount = fileChannel.read(buf)) > 0) {
  buf.flip();
  while (buf.hasRemaining()) {
    byte b = buf.get();
  }
  buf.clear();
} 
```

# javascript - 带有标签的 HTML、CSS 和 javascript 编辑器？

> ID：10473874
> 
> 赞同：0
> 
> 时间：2012-05-06T20:09:42.397
> 
> 标签：javascript, jquery, html, css

这是我现在所拥有的：

[http://jsfiddle.net/W29Wk/](http://jsfiddle.net/W29Wk/)

（我将 Dreamweaver 与 Spry 选项卡式面板一起使用）

当您共享脚本时，我想做类似于 JSFiddle 的东西......我需要的是能够在第一个选项卡中编写我的 HTML 代码，在第二个选项卡中编写 CSS，在第三个选项卡中编写 Javascript。完成后，我进入“结果”选项卡，它将我的代码呈现为 HTML。

RESULT 选项卡不需要是 TextArea，它可以是 DIV 或 iFrame，只要它与其他 TextArea 的大小相同即可。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:20:46.323

结果需要是一个 iFrame。Jeffrey Way 在 nettuts+ 的截屏视频中很好地解释了这一点：[如何将自定义 HTML 和 CSS 注入 iframe](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-inject-custom-html-and-css-into-an-iframe/)

您可以自己制作标签（或只是谷歌它）。

但是你为什么要制作第二个[tinkerbin](http://tinkerbin.com/)呢？

# html - 将 HTML 转换为 XML

> ID：10473875
> 
> 赞同：19
> 
> 时间：2012-05-06T20:09:44.747
> 
> 标签：html, xml

我有数百个需要在 XML 中转换的 HTML 文件。我们使用这些 HTML 为应用程序提供内容，但现在我们必须将这些内容作为 XML 提供。

HTML 文件有 contains、tables、div's、image's、p's、b 或 strong 标签等。

我用谷歌搜索并找到了一些应用程序，但我还无法实现。

您能建议一种将这些文件内容转换为 XML 的方法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-10T09:40:22.217

我成功使用了`tidy`命令行实用程序。在 linux 上，我使用`apt-get install tidy`. 然后是命令：

`tidy -q -asxml --numeric-entities yes source.html >file.xml`

给了一个 xml 文件，我可以用 xslt 处理器处理它。但是我需要正确设置 xhtml1 dtds。

这是他们的主页：[html-tidy.org](http://www.html-tidy.org/)（以及旧版：[HTML Tidy](http://tidy.sourceforge.net/)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-17T19:22:24.473

我确实找到了一种将（甚至是糟糕的）html 转换为格式良好的 XML 的方法。我开始以 DOM loadHTML 函数为基础。然而，随着时间的推移，出现了几个问题，我优化并添加了补丁来纠正副作用。

```
 function tryToXml($dom,$content) {
    if(!$content) return false;

    // xml well formed content can be loaded as xml node tree
    $fragment = $dom->createDocumentFragment();
    // wonderfull appendXML to add an XML string directly into the node tree!

    // aappendxml will fail on a xml declaration so manually skip this when occurred
    if( substr( $content,0, 5) == '<?xml' ) {
      $content = substr($content,strpos($content,'>')+1);
      if( strpos($content,'<') ) {
        $content = substr($content,strpos($content,'<'));
      }
    }

    // if appendXML is not working then use below htmlToXml() for nasty html correction
    if(!@$fragment->appendXML( $content )) {
      return $this->htmlToXml($dom,$content);
    }

    return $fragment;
  }

  // convert content into xml
  // dom is only needed to prepare the xml which will be returned
  function htmlToXml($dom, $content, $needEncoding=false, $bodyOnly=true) {

    // no xml when html is empty
    if(!$content) return false;

    // real content and possibly it needs encoding
    if( $needEncoding ) {
      // no need to convert character encoding as loadHTML will respect the content-type (only)
      $content =  '<meta http-equiv="Content-Type" content="text/html;charset='.$this->encoding.'">' . $content;
    }

    // return a dom from the content
    $domInject = new DOMDocument("1.0", "UTF-8");
    $domInject->preserveWhiteSpace = false;
    $domInject->formatOutput = true;

    // html type
    try {
      @$domInject->loadHTML( $content );
    } catch(Exception $e){
      // do nothing and continue as it's normal that warnings will occur on nasty HTML content
    }
        // to check encoding: echo $dom->encoding
        $this->reworkDom( $domInject );

    if( $bodyOnly ) {
      $fragment = $dom->createDocumentFragment();

      // retrieve nodes within /html/body
      foreach( $domInject->documentElement->childNodes as $elementLevel1 ) {
       if( $elementLevel1->nodeName == 'body' and $elementLevel1->nodeType == XML_ELEMENT_NODE ) {
         foreach( $elementLevel1->childNodes as $elementInject ) {
           $fragment->insertBefore( $dom->importNode($elementInject, true) );
         }
        }
      }
    } else {
      $fragment = $dom->importNode($domInject->documentElement, true);
    }

    return $fragment;
  }

    protected function reworkDom( $node, $level = 0 ) {

        // start with the first child node to iterate
        $nodeChild = $node->firstChild;

        while ( $nodeChild )  {
            $nodeNextChild = $nodeChild->nextSibling;

            switch ( $nodeChild->nodeType ) {
                case XML_ELEMENT_NODE:
                    // iterate through children element nodes
                    $this->reworkDom( $nodeChild, $level + 1);
                    break;
                case XML_TEXT_NODE:
                case XML_CDATA_SECTION_NODE:
                    // do nothing with text, cdata
                    break;
                case XML_COMMENT_NODE:
                    // ensure comments to remove - sign also follows the w3c guideline
                    $nodeChild->nodeValue = str_replace("-","_",$nodeChild->nodeValue);
                    break;
                case XML_DOCUMENT_TYPE_NODE:  // 10: needs to be removed
                case XML_PI_NODE: // 7: remove PI
                    $node->removeChild( $nodeChild );
                    $nodeChild = null; // make null to test later
                    break;
                case XML_DOCUMENT_NODE:
                    // should not appear as it's always the root, just to be complete
                    // however generate exception!
                case XML_HTML_DOCUMENT_NODE:
                    // should not appear as it's always the root, just to be complete
                    // however generate exception!
                default:
                    throw new exception("Engine: reworkDom type not declared [".$nodeChild->nodeType. "]");
            }
            $nodeChild = $nodeNextChild;
        } ;
    } 
```

现在这也允许将更多的 html 片段添加到我需要自己使用的一个 XML 中。一般来说，它可以这样使用：

```
 $c='<p>test<font>two</p>';
    $dom=new DOMDocument('1.0', 'UTF-8');

$n=$dom->appendChild($dom->createElement('info')); // make a root element

if( $valueXml=tryToXml($dom,$c) ) {
  $n->appendChild($valueXml);
}
    echo '<pre/>'. htmlentities($dom->saveXml($n)). '</pre>'; 
```

在此示例`'<p>test<font>two</p>'`中，将很好地以格式良好的 XML 输出为 ' `<info><p>test<font>two</font></p></info>`'。添加了 info 根标记，因为它还允许转换`<p>one</p><p>two</p>`不是 XML 的 ' '，因为它没有一个根元素。但是，如果您的 html 确实有一个根元素，则`<info>`可以跳过额外的根标签。

有了这个，我从非结构化甚至损坏的 HTML 中得到了真正好的 XML！

我希望它有点清楚，并且可能有助于其他人使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T20:11:28.813

请记住，HTML 和 XML 是标记语言树中的两个不同概念。您不能[将 HTML 完全替换为 XML](http://www.w3schools.com/xml/xml_whatis.asp) 。XML 可以被视为 HTML 的一种通用形式，但即使这样也是不精确的。您主要使用 HTML 来显示数据，使用 XML 来承载（或存储）数据。

此链接很有帮助：[如何将 HTML 读取为 XML？](https://stackoverflow.com/questions/5472162/how-to-read-html-as-xml)

[更多在这里 - HTML 和 XML 之间的区别](http://www.prlog.org/10063329-know-difference-between-xml-and-html.html)

# javascript - 如果在 jqgrid 中设置了 editurl，如何在表单编辑中强制 dataProxy 调用

> ID：10473879
> 
> 赞同：0
> 
> 时间：2012-05-06T20:10:10.340
> 
> 标签：javascript, jqgrid

jqGrid 是使用下面的代码定义的。editurl 用于内联编辑。dataProxy 用于在表单编辑中上传图片。

但是，如果在表单编辑中按下保存按钮，则不会调用 dataProxy。如何强制调用 dataProxy 或以其他方式允许在 jqGrid 列中上传图像？

```
$grid.jqGrid({
        datatype: "json",
        url: '/GetData',
        editurl: '/Edit',
... 
});

$grid.jqGrid("navGrid", "#grid_toppager", { 
            search:  true,
            del: true,
            add: true,
            view: true,
            edit: true
          }, 

        {
    url: null,
    dataProxy : function(opt, args) { 
      alert('Why this box does not appear on form save if jqgrid editurl is set'); 
      },

    beforeInitData: function () {
       var
         colm = $grid.jqGrid('getColProp', '_image'),
         selRowId = $grid.jqGrid('getGridParam', 'selrow');
      colm.editoptions.src = '/GetImage?id=' + selRowId;

    },
   closeAfterEdit: true,
   reloadAfterSubmit: true,
}
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:57:23.440

您没有描述使用的目标`dataProxy`，但如果您确实需要使用该功能，您应该遵循以下内容：

*   你应该定义`dataProxy`为 jqGrid 的回调。你可以`$.extend`用来改变`$.jgrid.defaults`。
*   对于`url`添加/编辑或删除操作应该是，`null`或者您应该设置`useDataProxy`选项`editGridRow`或显式（例如覆盖哪些不是）。`delGridRow``true``editurl``null`

因此，在您的情况下，您应该`dataProxy`从编辑对话框列表移动到 jqGrid 选项列表。

# ios - 在没有 MessageUI 的情况下发送电子邮件

> ID：10473883
> 
> 赞同：0
> 
> 时间：2012-05-06T20:10:39.220
> 
> 标签：ios, cocoa-touch

我想知道除了在 iO 中使用 MessageUI 之外，是否有任何方法可以发送带有附件的电子邮件。

问题是我有一个与该框架中的 Account 类冲突的类，如果我要重写大量代码并更改核心数据模型而冒着应用程序更新问题的风险，我会被诅咒的，因为它们愚蠢到为他们的班级使用通用名称。

我是objective c的新手，所以我从来没有考虑过命名空间问题，因为在我看来，框架应该这样做而不是程序员，这是我第一次因为SDK使用它而不能给一个类提供一个通用名称......并且从我读到的内容来看，由于 Account、Message、Connection 等类名，该框架让很多人感到头疼。

无论如何，还有其他选择吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:15:30.730

iOS SDK 中没有这样的工具，因为这会使一些恶意程序员冒着向垃圾用户发送垃圾邮件的风险。但是，您可以尝试开发者为 iOS 制作和移植的这个邮件库： [https ://github.com/dinhviethoa/libetpan](https://github.com/dinhviethoa/libetpan)

# css - Css IE 样式问题 - 如何在 IE 中更正这个简单的导航菜单？

> ID：10473885
> 
> 赞同：0
> 
> 时间：2012-05-06T20:10:59.230
> 
> 标签：css

我正在处理一个小型网站导航问题，并且内容在 chrome、firefox 和 safari 中运行良好——但当然，IE 根本无法设置导航菜单的样式。

我创建了一个无序列表并在其上修改样式以使菜单水平。

这是该问题的直接链接：（链接已删除）。

无序列表就是这样出现的，IE 中的项目符号无序垂直 html 列表，而不是 chrome 中漂亮的导航菜单。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:15:54.687

您使用`<nav>`的是 HTML5 元素。旧的 IE 版本（8 和更低版本）无法识别它们并且不设置它们的样式。

要解决此问题，您需要使用[`HTML5shiv`](http://html5shiv.googlecode.com). 按照该页面上的说明进行操作。
简而言之，HTML5shiv 会创建每个 HTML 元素，`document.createElement`如果你这样做，IE 会识别它们。完整的故事：[Paul Irish：HTML5 shiv 的历史](http://paulirish.com/2011/the-history-of-the-html5-shiv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:12:26.323

除了这个`nav`问题（在这种情况下会阻止旧版本 IE 上的所有样式）之外，似乎还存在其他问题。

HTML 代码使用`media`旧版本 IE 无法识别的属性，这意味着它们不应用任何 CSS 文件。快速修复是从引用 Large.css`media`的元素中删除属性。`link`一个更好的解决方法是将大部分 CSS 规则收集到一个文件中，您可以使用具有（或没有属性）的`link`元素引用该文件，以便依赖于媒体宽度的 CSS 文件仅包含您希望对不同宽度有所不同的那些设置。`media=screen``media`

IE 9 控制台包含 CSS3114 错误消息，表明`@font-face`未通过 OpenType 嵌入的使用权限检查。

Medium.css and Small.css contain `float: center` which is incorrect (`center` is not an accepted value for `float`). Use [http://jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/) to check your CSS code.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T20:21:51.063

`nav`用标签替换`div`标签。似乎这里不需要更改 CSS 代码，因为您使用 引用元素`#nav`，如果您更改为（当然也是），它可以`<nav id="nav">`正常`<div id="nav">`工作。`</nav>``</div>`

# java - FileReader 和 BufferedReader

> ID：10473887
> 
> 赞同：-3
> 
> 时间：2012-05-06T20:11:07.020
> 
> 标签：java, bufferedreader, filereader

我有 3 种方法

1.  对于打开的文件
2.  用于读取文件
3.  用于返回读取方法中读取的内容

这是我的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javaapplication56;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.rmi.RemoteException;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author x
 */
public class RemoteFileObjectImpl extends java.rmi.server.UnicastRemoteObject  implements RemoteFileObject
{
    public RemoteFileObjectImpl() throws java.rmi.RemoteException {
        super();
    }

    File f = null;
    FileReader r = null;
    BufferedReader bfr = null;

    String output = "";
    public void open(String fileName) {
        //To read file passWord
        f = new File(fileName);
    }
    public String readLine() {
        try {
            String temp = "";
            String newLine = System.getProperty("line.separator");
            r = new FileReader(f);
            while ((temp = bfr.readLine()) != null) {
                output += temp + newLine;
                bfr.close();
            }
        }
        catch (IOException ex) {
           ex.printStackTrace();
        }

        return output;
    }

    public void close() {
        try {
            bfr.close();
        } catch (IOException ex) {
        }
    }

    public static void main(String[]args) throws RemoteException{
        RemoteFileObjectImpl m = new RemoteFileObjectImpl();
        m.open("C:\\Users\\x\\Documents\\txt.txt");
        m.readLine();
        m.close();
    } 
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:17:32.040

你期望它做什么，你没有对你读到的那行做任何事情，只是

```
m.readLine(); 
```

反而：

```
String result = m.readLine(); 
```

或使用`output`您保存的变量。

你想把它保存到一个变量中，打印它，把它写到另一个文件吗？

更新：在评论中更新后：您的变量`bfr`永远不会创建/初始化。你只是这样做：

```
r = new FileReader(f); 
```

`bfr`仍然如此`null`。

你应该这样做：

```
bfr = new BufferedReader(new FileReader(f)); 
```

# matlab - 如何找到 3-D 表面的平均斜率？MatLab

> ID：10473892
> 
> 赞同：1
> 
> 时间：2012-05-06T20:12:29.510
> 
> 标签：matlab, for-loop, gradient, geometry-surface

```
`2.4   2.34  2.21   1.90    1.4   0.83  0
 2.34  2.42  2.16   1.79    1.3   0.7   0
 2.21  2.16  1.99   1.64    1.16  0.51  0
 1.90  1.79  1.64   1.30    0.75   0    0
 1.4   1.34  1.16   0.75    0      0    0
 0.83  0.75  0.51   0       0      0    0
 0     0     0      0       0      0    0 
```

`

![在此处输入图像描述](../Images/0e942686a8f2a94fe6f90dc7965be789.png)

这就是我的矩阵在某个时间点的样子，我想计算表面的平均斜率或梯度（陡度指标）。

似乎 MatLab 应该有一个内置函数来处理这类事情，但我可以找到一个。我也尝试过我编写的代码，但它不准确。最好的，阿比德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T23:24:37.607

渐变是矢量的，因此您可以分别处理两个维度。计算梯度包括计算函数每个参数的一阶导数。在离散域中，这可以通过采用有限差分来完成：[http ://en.wikipedia.org/wiki/Finite_difference](http://en.wikipedia.org/wiki/Finite_difference)

如果你想要它精确并计算每个点的梯度，你不能只取前向或后向差异，因为在边缘，你并不总是有一个前向（或后向）点。

但我认为，如果您只想要梯度的平均值，则不必担心边缘，您可以使用[diff](http://www.mathworks.nl/help/techdoc/ref/diff.html)计算原始点之间中心点的有限差：

```
dx = diff(data,1,1);
dy = diff(data,1,2);

mean_gradient = [mean(dx(:)) mean(dy(:))] 
```

假设 cours 参数的间距相等，否则您必须将 dx 和 dy 除以步长。

对于您提供的数据，这将导致：

```
mean_gradient =

   -0.26381  -0.26381 
```

它与您制作的图相匹配，表明该函数在参数中是单调递减且对称的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:29:29.423

一种方法是执行多元线性回归，例如使用[regress](http://www.mathworks.com/help/toolbox/stats/regress.html)。

二维回归是一个最佳拟合平面，您可以从中计算斜率值。该链接有一个很好的示例，其中包含代码和结果图。

# php - 将数据从服务器（PHP）转换为 NSString 的问题

> ID：10473898
> 
> 赞同：1
> 
> 时间：2012-05-06T20:13:42.477
> 
> 标签：php, iphone, objective-c, xcode, nsstring

好的，所以我对 iOS 开发和 PHP 都非常陌生（嗯，我对 PHP 几乎一无所知），但我正在尝试执行以下操作：我的应用程序使用一个外部密钥，它从我的服务器检索并将其分配给一个 NSString。问题是字符串得到额外的链接中断（\n）和额外的空间，解析起来非常烦人。我猜我做错了什么，因为我没有看到其中的逻辑。有人可以解释我如何避免这种情况吗？

这是我的代码：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc]init];
[request setTimeoutInterval:180.0]; 
[request setURL:[NSURL URLWithString:urlString]]; //url to the getkey.php file 
[request setHTTPMethod:@"POST"];

NSString *key = [[NSString alloc] initWithData:[NSURLConnection    sendSynchronousRequest:request returningResponse:nil error:nil] encoding:NSUTF8StringEncoding]; 
```

PHP 文件（我知道很傻，但假设要做这项工作，而且我对 PHP 一无所知，所以这对我有好处）：

```
<?php

 echo 23204239423;

?> 
```

"key" 得到 23204239423 一个额外的空格和 \n。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T20:17:20.073

您可能后面还有一个空格`?>`，还有一个`\n`（新行）。如果您从 PHP 文件中删除它们，您可能会避免在 HTTP 请求中获取它们。

话虽如此，我可能会从`NSString`只是为了避免让 HTTP 服务器准确地发送**iOS**应用程序所期望的内容来修剪字符串。我认为您的移动应用程序解析器应该更灵活地处理它接收的数据。

# java - Android / Java：创建许多字符串时的GC_CONCURENT

> ID：10473902
> 
> 赞同：2
> 
> 时间：2012-05-06T20:15:09.357
> 
> 标签：java, android, memory-leaks, out-of-memory

几天前我遇到了一个问题。我发现了一些类似的帖子，但仍然不理解我的代码的问题。

事实上，我正在读取一个包含 SQL 查询的文件（18,4Kbytes）。所以我唯一想做的就是读取文件并执行查询。

我读取文件没有问题，执行所有查询后会出现问题（如果我不执行它，它可以工作，但不是交易！）

所以这是我的代码（在 IO Exception 的 try / catch 之间）：

```
InputStream in = ctx.getAssets().open("file.sql");
ByteArrayBuffer queryBuff = new ByteArrayBuffer(in.available());
String query = null;
int curent;

while (-1 != (curent = in.read())) {
    queryBuff.append((char) curent);

    if (((char) curent) == ';') {
        query = new String(queryBuff.toByteArray());
        db.execSQL(query);
        queryBuff.clear();
        query = null;
    }
}
in.close();
queryBuff.clear(); 
```

我的 GC_CONCURENT 发生在循环结束后循环中有“新字符串”时。

谢谢 ！

编辑：我有点恼火，因为我的内存泄漏没有发生在这部分代码中，而是发生在稍后执行的部分代码中（现在不知道是什么）但我的问题不是问题，应用程序实际上工作正常......对不起！

# php - PHP / mod重写到不同的文件？

> ID：10473911
> 
> 赞同：0
> 
> 时间：2012-05-06T20:16:23.943
> 
> 标签：php, model-view-controller, mod-rewrite

我在 php 编码方面相对较新，并且正在编写自己的 MVC 东西。我宁愿这样做而不是使用框架 b/c 我会这样更好地理解它:)。

目前，我的网站设置如下：

domain.com/services

会改写成 index.php?page=services

在 index.php 内部，我有代码可以根据 URI 字符串加载正确的模板。但是，我想让我的网站比这更复杂一些......

我希望服务器根据 uri 字符串加载适当的 php 文件。做这个的最好方式是什么？也许 index.php 真的读取并执行了另一个 php 文件？

谢谢！

编辑：我当前处理我现在正在做的事情的 htaccess 是：

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
#RewriteBase

# Protect hidden files from being viewed
<Files .*>
        Order Deny,Allow
        Deny From All
</Files>

RewriteCond %{HTTP_HOST} ^domain.net$
RewriteRule (.*) http://www.domain.net$1 [R=301]

#remove trailing slash
RewriteRule ^(.+)/$  /$1 [R=301,L]

# Protect application and system files from being viewed
RewriteRule ^(?:templates|configs|templates_c)\b.* index.php/$0 [L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule ^([^/\.]+)/?$ index.php?page=$1 
```

我应该改变什么来实现我想要的？我只是在想：

```
RewriteRule ^(.*)$ index.php [L,NS] 
```

接着：

```
list( $controller, $function, $params ) = explode( '/', $uri, 3 );
$params = explode( '/', $uri ); 
```

此时执行正确代码的好的 php 方法是什么？只包括文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:22:57.050

最好的方法是使用**.htaccess ModRewrite**进行 URL 更改，以便您压缩可读的 URL 将正确转换为您的脚本路径

我自己在这种情况下的工作方式：

```
RewriteRule  ^/([^/]*)/([^/]*)/?$  engine.php?prmtrs=$1/$2 [L]

<?php
list($url_part, $url_page) = explode('/', $_GET['prmtrs']);
?> 
```

当然，您需要在使用 $_GET 之前从您的数据中清除数据，这只是简化示例以更清晰地展示想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:09:35.237

您可以根据 URI 创建多个重写规则。这是一个简单的示例 - 您可以使用 RewriteCond 制作更复杂的示例。

```
# Rewrite all URIs beginning with 'a' to index1.php
RewriteRule ^(a[^/\.]+)/?$ index1.php?page=$1

# Rewrite all URIs beginning with 'b' to index2.php
RewriteRule ^(b[^/\.]+)/?$ index2.php?page=$1 
```

如果你真的想要不同的文件来处理不同类型的 URI，这可能是要走的路，除非你有几十个这样的项目。否则，您可以从 index.php 中找出调度

# visual-studio - Visual Studio 11 和处理 msvcr110.dll

> ID：10473912
> 
> 赞同：8
> 
> 时间：2012-05-06T20:16:35.793
> 
> 标签：visual-studio, visual-c++, dll, runtime-error

我决定试用 Visual Studio 11，得出结论我不喜欢它并立即将其卸载。似乎我的很多旧项目现在都因以下错误而崩溃。

***程序无法启动，因为您的计算机缺少 MSVCR110D.dll。尝试重新安装程序以解决此问题。***

不幸的是，我对问题的理解到此结束，我遇到的解决方案似乎建议将运行时库更改为多线程，这会导致更多我没有知识或耐心处理的错误。

简而言之，问题是，我如何撤消 Visual Studio 11 所做的更改，无论它们是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-11T04:37:38.647

正如 Hans Passant 的评论所说，微软不允许调试 dll 是可再分发的；它们仅在安装 Visual Studio 时可用。

即使您能够将项目重新构建为发布版本，当您尝试运行项目时，您可能会在机器上遇到新问题，即 **缺少 mvcr110.dll**。

在这种情况下，不需要安装 Visual Studio，您可以从 Microsoft 获取缺少的 dll。Microsoft 在以下位置为这些可再发行的 dll 提供可下载的安装程序：

[http://www.microsoft.com/en-us/download/details.aspx?id=30679](http://www.microsoft.com/en-us/download/details.aspx?id=30679)

运行适当的安装程序。

VSU3\vcredist_arm.exe , VSU3\vcredist_x64.exe , VSU3\vcredist_x86.exe

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T02:30:39.963

您需要将每个项目的“Platfrom Toolset”属性从 v110 降级到 v100（或 v90）。

更改项目工具集 在 Visual Studio 的解决方案资源管理器中，打开项目的快捷菜单，然后选择“属性”。

在“属性页”对话框中，打开“配置”下拉列表，然后选择“所有配置”。

在对话框的左窗格中，展开配置属性，然后选择常规。

在右侧窗格中，选择平台工具集，然后从下拉列表中选择所需的工具集。例如，如果要使用 Visual Studio 2010 工具集进行编译，请选择 Visual Studio 2010 (v100)。

选择确定按钮。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T20:14:00.437

[那个是来自http://www.rhyous.com](http://www.rhyous.com)的 Microsoft VS 2011/2 的 DLL （它谈到了 msvcrt100.dll，但原理相同）：

> “这个 msvcr100.dll 是使用 Visual Studio 2010 构建的项目所需的 Microsoft Visual C++ Redistributable dll。dll 字母说明了这一点。MS = Microsoft，V = Visual，C = C 程序语言，R = 运行时， 100 = 版本“

如果您在 Visual Studio 2010 中创建 C++ 项目，则可能需要此文件。您需要安装 MS 可再发行组件，但似乎它尚不可用，请参阅此线程 - [http://social.msdn.microsoft.com/Forums/en-US/parallelcppnative/thread/8963c3d9-26ec-4748-af95-7c696a27c431](http://social.msdn.microsoft.com/Forums/en-US/parallelcppnative/thread/8963c3d9-26ec-4748-af95-7c696a27c431)

我猜你的编译器仍然是 VS2011 的，这就是你的程序依赖于 vs2011 DLL 的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T08:54:44.490

更新我的 Visual Studio 后遇到同样的问题。问题是新项目使用的是 v110 平台，而旧项目使用的是 v110 平台。这意味着我现在需要这里提到的 Microsoft Visual C++ 2012 Redistributable：http: [//www.admin-enclave.com/en/solutions/windows/82-how-to-fix-the-program-cant-start-because -msvcr110-dll-is-missing-from-your-computer-error-on-windows.html](http://www.admin-enclave.com/en/solutions/windows/82-how-to-fix-the-program-cant-start-because-msvcr110-dll-is-missing-from-your-computer-error-on-windows.html)

# javascript - 将时间转换为分钟和秒

> ID：10473916
> 
> 赞同：0
> 
> 时间：2012-05-06T20:17:05.433
> 
> 标签：javascript

无论如何都可以帮助我在 jquery 中生成一个将 time() 转换为秒的函数

例如：1336333809 = 9 分 23 秒？

像我发现的这个功能，但它是几秒钟到一小时

```
function secondsToTime(secs)
{
    var hours = Math.floor(secs / (60 * 60));

    var divisor_for_minutes = secs % (60 * 60);
    var minutes = Math.floor(divisor_for_minutes / 60);

    var divisor_for_seconds = divisor_for_minutes % 60;
    var seconds = Math.ceil(divisor_for_seconds);

    var obj = {
        "h": hours,
        "m": minutes,
        "s": seconds
    };
    return obj;
} 
```

如果无论如何有解决方案，请分享：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T20:22:09.197

本机[`Date`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)对象有什么问题？

```
function secondsToTime(seconds) {

    var date = new Date(seconds * 1000);

    var obj = {
        "h": date.getHours(),
        "m": date.getMinutes(),
        "s": date.getSeconds()
    };
} 
```

# ruby - 解决 Sinatra 和 HTTParty 方法名称冲突

> ID：10473917
> 
> 赞同：0
> 
> 时间：2012-05-06T20:17:15.207
> 
> 标签：ruby, sinatra, mixins, httparty

在我的 Sinatra 应用程序中，我使用 HTTParty 作为 mixin 的类。

```
class A
  include HTTParty
  format :json

  def fetch arguments
    get(:query => arguments)
  end
end 
```

当我尝试调用 fetch 时（当在`get`块内创建类实例时），我收到以下错误：

```
ArgumentError: tried to create Proc object without a block 
```

当我运行该`get`方法时，`HTTParty.get`一切正常。我如何解决这些名称冲突或问题出在其他问题上？我真的很想使用 HTTParty 作为一个 mixin，所以我可以一次设置所有选项。

提前致谢！

我正在使用 sinatra 1.3.2 和 httparty 0.8.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:41:48.820

get 方法是一个类方法。
请尝试以下方法，但我还没有尝试过......

```
self.class.get 
```

# cocoa - NSMutableArray，添加精灵并删除最后一个对象（最后添加的精灵）？

> ID：10473923
> 
> 赞同：-1
> 
> 时间：2012-05-06T20:17:46.967
> 
> 标签：cocoa, cocos2d-iphone

```
-(void)createSprite{

CCSprite *shotV = [CCSprite spriteWithFile:@"green.png"];

[self addChild:shotV z:1];

[shotVArray addObject:shotV];
NSlog(@"%@",shotV);

}     
-(void)aSpecialCase{

[self removeChild:[shotVArray lastObject] cleanup:YES];

} 
```

我没有让这个工作。函数“createSprite”向 sprite 发送垃圾邮件。“在 aSpecialCase 中”我想删除最后一个创建的精灵。还希望删除它会结束该实例的当前 CCSequence。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:30:14.257

```
-(void)aSpecialCase{
[self removeChild:[shotVArray lastObject] cleanup:YES];
} 
```

这只会从层中删除精灵。不会从数组本身中删除它...

所以更好的方法是..

```
-(void)aSpecialCase{
  CCSprite *sprite  = [pshotVArray lastObject];
  [self removeChild:sprite cleanup:YES];
  [pshotVArray removeObject:sprite];
} 
```

希望这可以帮助.. ：）

# jsp - 如何承载价值 从一个jsp页面到另一个？

> ID：10473925
> 
> 赞同：1
> 
> 时间：2012-05-06T20:17:59.467
> 
> 标签：jsp, struts2, struts, struts-validation, struts-html

就是这样：我正在通过这个刷新一个名为 index.jsp 的页面

```
<head>
        <meta http-equiv="Refresh" CONTENT="0;URL=populatefields.action">

</head> 
```

它正在召唤我的行动。这是我的 struts.xml 中的映射

```
 <struts>

        <package name="com.action" extends="struts-default">
            <action name="*fields" method="{1}" class="com.action.RegisterAction">
    <result name="populate">/register.jsp</result>
    <result name="fields">/success.jsp</result>
<result name="error">/index.jsp</result>
    </action> 
```

我在这里所做的是加载 index.jsp，我用这个 url 刷新了它`'populatefields.action'`。这将调用我的操作类和`populate`方法（通配符方法调用）。Populate 方法从数据库中选择条目并将它们分配给表单字段属性，并且`returns "populate";`哪个控制 register.jsp 已经填充了一些值。[即动态填充的一部分根据当前用户的形式]

如果有一些验证检查，请在 register.jsp 上 `if(getUssername.equals("")) {this.addActionerror("Empty field -Uname-"); return error;}`

问题是在返回“错误”时，控件转到 index.jsp，然后填充方法并填充自动字段，但填充方法不会引发任何错误，所以是空的......或错误丢失......知道我是如何可以访问这些错误吗？通过在我的动作课中设置 dem 全局？actionerrors 出现在 index.jsp 中，但我想在每次加载时刷新该页面以从数据库中选择值...我可以将操作错误的值从一个 jsp 页面带到另一个页面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:12:03.773

完成：我从没想过会那么容易.. 不需要传输. 但是如果它不刷新并且只包含标签，`<s:actionerror/>`您可以使用它来传输整个页面。就像当您使用链接来调用您的操作时一样，在这种情况下不会刷新其操作方式。但在我的情况下，我想要刷新，就这样吧：`<jsp:include page='index.jsp'>``<s:actionerror/>``<a>`

就在你输入返回错误之前；在您的执行方法中复制您的填充方法的内容。如

```
execute{
if(validation fails){populate method content(leave the return statement); 
  return error;
 }
else
return success;
} 
```

在 struts.xml 中更改此 <`result name="error">/register.jsp</result>`而不是`<result name="error">/index.jsp</result>`

也无需写入`<s:actionerror>` index.jsp，因为您现在将其重定向到 register.jsp，所以只需将其写入 register.jsp...

现在刷新funda工作带您注册表格..如果验证失败，请立即提交相同的页面将被调用并填充字段：D和操作错误......

# ios - CGImageCreateWithImageInRect 区域不正确？

> ID：10473927
> 
> 赞同：2
> 
> 时间：2012-05-06T20:18:06.540
> 
> 标签：ios, screenshot, area, cgimage

我正在使用这个 github 图像裁剪器：[https ://github.com/iosdeveloper/ImageCropper](https://github.com/iosdeveloper/ImageCropper)

在此图像裁剪器中，在 init 方法中，它们具有以下几行：

```
CGRect rect;
        rect.size.width = image.size.width;
        rect.size.height = image.size.height;

        [imageView setFrame:rect]; 
```

事先，我将图像大小调整为屏幕**分辨率**而不是点。因此，如果我将代码保留在原样之上，我的 UIImage 将不会由于某种奇怪的原因填充 UIImageView，并且我也尝试调整 contentModes。

但是，如果我将其调整为此（图像裁剪器所在的 UIPopover 的大小）：

```
[imageView setFrame:CGRectMake(0, 0, 320, 480)]; 
```

UIImage**将**填充 UIPopover。

*真正的问题在这里：* 如果我放大图像的某个部分并执行下面的代码，它将截取 UIImage 左上部分的屏幕截图，而不是靠近我裁剪图像的位置。虽然它确实遵守 scrollView 的 zoomScale。

这是截图代码：

```
- (void)finishCropping {

    float zoomScale = 1.0 / [scrollView zoomScale];

    CGRect rect;
    rect.origin.x = [scrollView contentOffset].x * zoomScale;
    rect.origin.y = [scrollView contentOffset].y * zoomScale;
    rect.size.width = [scrollView bounds].size.width * zoomScale;
    rect.size.height = [scrollView bounds].size.height * zoomScale;

    CGImageRef cr = CGImageCreateWithImageInRect([[imageView image] CGImage], rect);

    UIImage *cropped = [UIImage imageWithCGImage:cr];

    CGImageRelease(cr);

    [delegate imageCropper:self didFinishCroppingWithImage:cropped];
} 
```

有谁知道为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T01:24:41.733

我认为您首先必须改用`[UIImage imageWithCGImage:cr scale:self.scale orientation:self.imageOrientation]`create `[UIImage imageWithCGImage:cr]`，`UIImage`这将解决许多方向问题，并仔细检查矩形中的宽度和高度是否正确。

# python - 如何在pygame中找到2点之间的角度？

> ID：10473930
> 
> 赞同：6
> 
> 时间：2012-05-06T20:18:39.257
> 
> 标签：python, geometry, line, pygame

我正在使用 Pygame 用 Python 编写游戏。
（我的显示窗口的）坐标
`( 0 , 0 )`位于左上角和
`(640,480)`右下角。

角度是
`0°`指向上方，
`90°`指向右侧。

我有一个居中位置的玩家精灵，我希望枪上的炮塔指向玩家。我该怎么做？
说，，
`x1`是`y1`炮塔坐标
`x2`，`y2`是玩家坐标，
`a`是角度的度量

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-06T21:11:13.193

首先，`math`具有得心应手的`atan2(denominator, numerator)`功能。通常，您会使用`atan2(dy,dx)`，但因为 Pygame 相对于笛卡尔坐标翻转 y 轴（如您所知），您需要制作`dy`负角，然后避免负角。（“dy”仅表示“y 的变化”。）

```
from math import atan2, degrees, pi
dx = x2 - x1
dy = y2 - y1
rads = atan2(-dy,dx)
rads %= 2*pi
degs = degrees(rads) 
```

`degs`应该是你要找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T20:23:31.937

考虑三角形

```
sin(angle)=opposed side / hypotenuse 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T20:37:39.830

你可能会想要这样的东西——你可能需要摆弄一下——我可能会偏离 180 度。您还需要对 dy==0 的情况进行特殊处理，而我没有为您这样做。

```
import math
# Compute x/y distance
(dx, dy) = (x2-x1, y2-y1)
# Compute the angle
angle = math.atan(float(dx)/float(dy))
# The angle is in radians (-pi/2 to +pi/2).  If you want degrees, you need the following line
angle *= 180/math.pi
# Now you have an angle from -90 to +90\.  But if the player is below the turret,
# you want to flip it
if dy < 0:
   angle += 180 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-05-19T11:37:58.923

好的，结合您的答案和其他一些网站，我找到了工作代码：

```
dx,dy = x2-x1,y2-y1

rads = math.atan2(dx/dy)
degs = math.degrees(rads) 
```

我的其余代码对degs的负值并不挑剔。无论如何，它现在可以工作了，我想说谢谢你的帮助。

# javascript - 浏览器/HTML 强制从 src="data:image/jpeg;base64..." 下载图像

> ID：10473932
> 
> 赞同：89
> 
> 时间：2012-05-06T20:18:56.547
> 
> 标签：javascript, image, html, browser

我在客户端生成一个图像，并用这样的 HTML 显示它：

```
<img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgM...."/> 
```

我想提供下载生成的图像的可能性。

我如何才能意识到浏览器正在打开一个文件保存对话框（或者只是将 chrome 或 firefox 之类的图像下载到下载文件夹中），这允许用户在**不右键单击并另存为**图像的情况下保存图像？

我更喜欢没有服务器交互的解决方案。所以我知道如果我先上传图片然后开始下载是可能的。

非常感谢！

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-05-06T20:26:07.597

只需替换`image/jpeg`为`application/octet-stream`. 客户端不会将该 URL 识别为可内联资源，并提示下载对话框。

一个简单的 JavaScript 解决方案是：

```
//var img = reference to image
var url = img.src.replace(/^data:image\/[^;]+/, 'data:application/octet-stream');
window.open(url);
// Or perhaps: location.href = url;
// Or even setting the location of an <iframe> element, 
```

另一种方法是使用`blob:`URI：

```
var img = document.images[0];
img.onclick = function() {
    // atob to base64_decode the data-URI
    var image_data = atob(img.src.split(',')[1]);
    // Use typed arrays to convert the binary data to a Blob
    var arraybuffer = new ArrayBuffer(image_data.length);
    var view = new Uint8Array(arraybuffer);
    for (var i=0; i<image_data.length; i++) {
        view[i] = image_data.charCodeAt(i) & 0xff;
    }
    try {
        // This is the recommended method:
        var blob = new Blob([arraybuffer], {type: 'application/octet-stream'});
    } catch (e) {
        // The BlobBuilder API has been deprecated in favour of Blob, but older
        // browsers don't know about the Blob constructor
        // IE10 also supports BlobBuilder, but since the `Blob` constructor
        //  also works, there's no need to add `MSBlobBuilder`.
        var bb = new (window.WebKitBlobBuilder || window.MozBlobBuilder);
        bb.append(arraybuffer);
        var blob = bb.getBlob('application/octet-stream'); // <-- Here's the Blob
    }

    // Use the URL object to create a temporary URL
    var url = (window.webkitURL || window.URL).createObjectURL(blob);
    location.href = url; // <-- Download!
}; 
```

### 相关文件

*   [`atob`](https://developer.mozilla.org/en-US/docs/DOM/window.atob)
*   [类型化数组](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays)
*   [`URL.createObjectURL`](https://developer.mozilla.org/en-US/docs/DOM/window.URL.createObjectURL)
*   [`Blob`](https://developer.mozilla.org/en-US/docs/DOM/Blob)和[`BlobBuilder`](https://developer.mozilla.org/en-US/docs/DOM/BlobBuilder)

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2012-06-13T23:24:45.307

您可以在 a 标签上使用下载属性...

```
<a href="data:image/jpeg;base64,/9j/4AAQSkZ..." download="filename.jpg"></a> 
```

查看更多：[https ://developer.mozilla.org/en/HTML/element/a#attr-download](https://developer.mozilla.org/en/HTML/element/a#attr-download)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-04-10T20:47:58.973

我猜需要一个*img*标签作为 a 标签的子*标签*，方法如下：

```
<a download="YourFileName.jpeg" href="data:image/jpeg;base64,iVBO...CYII=">
    <img src="data:image/jpeg;base64,iVBO...CYII="></img>
</a> 
```

或者

```
<a download="YourFileName.jpeg" href="/path/to/OtherFile.jpg">
    <img src="/path/to/OtherFile.jpg"></img>
</a> 
```

在最新版本的 Firefox 和 Chrome 中，仅使用 #15 中解释的*a*标签对我不起作用，但将相同的图像数据放在*a.href*和*img.src*标签中对我有用。

从 JavaScript 可以这样生成：

```
var data = canvas.toDataURL("image/jpeg");

var img = document.createElement('img');
img.src = data;

var a = document.createElement('a');
a.setAttribute("download", "YourFileName.jpeg");
a.setAttribute("href", data);
a.appendChild(img);

var w = open();
w.document.title = 'Export Image';
w.document.body.innerHTML = 'Left-click on the image to save it.';
w.document.body.appendChild(a); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-09T22:40:01.787

看看[FileSaver.js](https://github.com/eligrey/FileSaver.js)。它提供了一个方便的`saveAs`功能，可以处理大多数浏览器特定的怪癖。

# haskell - Haskell 类型指定

> ID：10473933
> 
> 赞同：3
> 
> 时间：2012-05-06T20:19:09.480
> 
> 标签：haskell, types, type-conversion

我必须指定 2 个函数的类型（不使用编译器：t）我只是不知道我是如何阅读这些函数以做出正确的步骤的。

```
f x = map -1 x
f x = map (-1) x 
```

好吧，我有点困惑如何解析它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T20:39:57.333

函数应用程序或“空格运算符”的优先级高于任何运算符符号，因此第一行解析为¹`f x = map - (1 x)`，这很可能是类型错误。

另一个例子是用括号括起来的，但请注意，`(-1)`脱糖为`negate 1`. 这是正常规则的一个例外，其中像`(+1)`desugar as这样的运算符部分`(\x -> x + 1)`，因此这也可能是¹类型错误`map`，因为它的第一个参数是函数，而不是数字。

[¹我说*可能*是因为从技术上讲`Num`，可以为允许进行类型检查的函数提供实例。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T20:33:14.773

对于这样的问题，确定的答案是查看[Haskell 报告](http://www.haskell.org/onlinereport/)。Haskell 98 中的相关语法没有改变。

特别是，检查“表达式”部分。这应该解释如何解析表达式、运算符优先级等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T20:38:28.060

这些函数没有类型，因为它们没有类型检查（你会得到可笑的类型类约束）。要弄清楚原因，您需要知道它 `(-1)`有 type `Num n => n`，并且您需要阅读如何在 a`-`之前使用或不使用 parens 来解释它。

以下函数是您的函数的“正确”版本：

```
f x = map (subtract 1) x 
```

如果我这样说，您应该能够弄清楚这个函数的类型：

```
subtract 1 :: Num n => n -> n
map :: (a -> b) -> [a] -> [b] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T11:04:54.770

好吧，我是自己做的：P

```
(map) - (1 x)
(-)::Num a => a->a->->a
1::Num b=> b
x::e
map::(c->d)->[c]->[d]
map::a
a\(c->d)->[c]->[d]
(1 x)::a
1::e->a
f::(Num ((c->d)->[c]->[d]),Num (e->(c->d)->[c]->[d])) => e->(c->d)->[c]->[d] 
```

# jquery - Django：将json中的错误表单返回到模板并使用JQuery接收

> ID：10473934
> 
> 赞同：1
> 
> 时间：2012-05-06T20:19:10.207
> 
> 标签：jquery, django

我有这个视图在表单验证后发送带有错误的返回：

```
def update_window(request):
   if form.is_valid():
   # save the form
   else:
      data = dict((key, [unicode(v) for v in values]) for key, values in form.errors.items()) 
        return HttpResponse(simplejson.dumps(data)) 
```

此返回为发送到模板提供以下错误。

```
{'postals_before': [u'Field required.'], 'postals_after': [u'Field required.']} 
```

该表单位于 Twitter Bootstrap 模式窗口中：

```
<form class="form-horizontal" action="{% url 'update_window' %}" method="POST">{% csrf_token %}
  {{ form.as_p }}
  <input type="submit" value="Send" class="btn btn-primary">
  </form> 
```

由于ajax未发送表单，如何使用jquery在模态窗口中接收错误dict？问候！

编辑！

在视图中验证表单中的字段而没有返回错误表单的解决方案：

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

我删除视图中的返回并在模板中创建此验证：

```
$(function () {
$("#form").validate({
    // Defining the rules
    rules:{
        postals_before:{
            required: true
            number: true
        },
        postals_after:{
            required: true
            number: true
        }
    },
    // Defining the messages for each rule.
    messages:{
        postals_before:{
            required: "Enter the amount of postals on display.",
            number: "Only numbers."
        },
        postals_after:{
            required: "Enter the amount of postals placed.",
            number: "Only numbers."
        }
    }
});
}); 
```

# intellij-idea - Linux 上有两个 /gen 文件夹？

> ID：10473937
> 
> 赞同：1
> 
> 时间：2012-05-06T20:20:27.743
> 
> 标签：intellij-idea

我在 Ubuntu 11.10 系统上使用 IDEA 11.1。`Ctrl+F6`我通过这个 IDEA 创建了两个`/gen`文件夹之后重命名了主模块。看图

![](../Images/9202c4d66ca364814c73a941940815de.png)

上部`/gen`在括号中具有完整路径（如`/disk2/work/project/...`）。下部`/gen`包含通过桌面快捷方式的路径（如`/home/user/Desktop/work/project/...`）。两条路径都指向同一个目录。

最上面的文件夹具有新名称，而较低的文件夹（在上层 gen 目录下）具有项目硬盘目录的名称。

谁能建议如何合并它？这让我很头疼，因为 IDEA 无法识别我添加到这个项目中的任何新资源。

我尝试删除所有 .idea 和其他 conf 文件并将项目重新创建到同一目录中（通过使用现有源文件命令创建项目），但它没有解决问题。

我还尝试通过“显示历史记录”功能恢复到以前的状态，但这是不可能的。这一步在历史上是没有的。

PS。对黑线部分感到抱歉，但我被指示这样做。

# c# - C#中列值的总和

> ID：10473940
> 
> 赞同：0
> 
> 时间：2012-05-06T20:21:04.183
> 
> 标签：c#, sql-server

我使用以下这些代码来计算数据库中特定行的总和，并将其显示在该意图列下的新行中。但我会遇到错误。

> 你调用的对象是空的

请帮我解决这个问题。

提前致谢。

```
int sum = 0;

for (int i = 0; i < dt.Rows.Count; i++)
{
    sum += int.Parse(dataGridView1.Rows[i].Cells["Fee"].Value.ToString());
}

DataSet ds = new DataSet();
adapter.Fill(ds);
DataRow row = ds.Tables["Entry"].NewRow();
ds.Tables["Entry"].Rows.Add(row); 
```

我想知道如何在新行中看到总和。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:08:48.690

我认为错误在循环语句中：

代替：

```
for (int i = 0; i < dt.Rows.Count; i++)
{
    sum += int.Parse(dataGridView1.Rows[i].Cells["Fee"].Value.ToString());
} 
```

用这个：

```
for (int i = 0; i < dt.Rows.Count - 1; i++)
{
    sum += int.Parse(dataGridView1.Rows[i].Cells["Fee"].Value.ToString());
} 
```

你从开始，`Index zero`所以你应该从总行数中*减去一个。*`Object reference not set to an instance of an object`当它到达时它将返回：

```
sum += int.Parse(dataGridView1.Rows[dt.Rows.Count].Cells["Fee"].Value.ToString()); 
```

**因为这样的行不存在。**

**更新 1**

在循环之后，插入以下语句：

```
dataGridView1.Rows.Add("", "", sum) 
```

**更新 2**

```
int sum = 0;

for (int i = 0; i < dt.Rows.Count - 1; i++)
{
    sum += int.Parse(dataGridView1.Rows[i].Cells["Fee"].Value.ToString());
}

DataSet ds = new DataSet();
adapter.Fill(ds);

DataRow row = ds.Tables["Entry"].NewRow();
row[0] = "";
row[1] = "";
row[2] = sum;
ds.Tables["Entry"].Rows.Add(row); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T20:24:31.410

'ds' 没有表 'Entry'，这就是为什么会出现“对象引用未设置为对象实例”错误的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T06:04:57.953

您可以在数据表中使用计算方法。从计算方法获取结果，然后从数据表创建新行，然后分配给适当的字段。然后将新行添加到数据表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T05:57:34.383

尽管您的问题不是很清楚，但请查看从数据表或网格访问值的循环

```
for (int i = 0; i < dt.Rows.Count; i++)
{
   if (dt.Rows[i]["Fee"].Value !=null)
   sum += int.Parse(dt.Rows[i]["Fee"].Value.ToString());
} 
```

并且还要确保 dt.Rows[i]["Fee"] 不包含空值即使您可以使用 Compute 方法进行求和。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T20:23:52.200

我建议你使用调试器，看看这个错误到底发生在哪里:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T06:51:29.570

如果数据库为一个“FEE”单元格返回 null，也会发生这种情况。运行它并查看您的确切位置并查看值，如果您看到 null，则需要 if != null。

# c++ - 获取以给定字体呈现的字符串的像素表示

> ID：10473941
> 
> 赞同：0
> 
> 时间：2012-05-06T20:21:08.073
> 
> 标签：c++, fonts, pixel

是否有一个 C++ 库接受一个字符串和一个字体文件并使用该字体返回该字符串的像素表示？例如，我编写了一个简短的 PHP 脚本，它使用 Courier 绘制单个字母，然后提取单个像素：

[![字母 abc 的屏幕截图](../Images/f0646eda5951861f639ba62cf912adce.png)](https://i.stack.imgur.com/qryfb.png)

我可以将其转换为一组颜色强度代码并使用它，但这意味着我需要对每种字体中我想使用的每个字符进行硬编码，并且我会丢失诸如连字和智能字距调整之类的东西，这些东西只有在多个字符出现时才会出现聚到一起。考虑到我要使用的字体的 TTF 文件，C++ 中有没有办法直接执行此操作？我使用的是 Linux，所以我不能依赖像[GetGlyphOutline这样的 Windows API 函数](https://docs.microsoft.com/en-us/windows/win32/api/wingdi/nf-wingdi-getglyphoutlinea)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T21:08:31.577

> 是否有接受字符串和字体文件的 C++ 库

有 C 库可以用来做同样的事情。它被称为[Freetype2](http://www.freetype.org/freetype2/index.html)。它相对容易使用。如果你想保持东西的便携性和相对轻量级，使用 Freetype2 是一种方法。在 linux 系统上，它可能已经安装了。

此外，跨平台 GUI 工具包通常会提供某种“字体”类，可以用来做你想做的事。例如，在 Qt 4 中，您可以使用 QFont 在 Qimage 上绘制文本，然后提取单个像素，加上操作系统（具有“字体”概念的系统）通常也提供某种字体操作 API。

# ios - 缓存从 iOS 主屏幕启动的 Web 应用程序

> ID：10473943
> 
> 赞同：0
> 
> 时间：2012-05-06T20:21:14.067
> 
> 标签：ios, html, caching, web-applications, mobile-safari

所以我用 HTML 5 和 javascript（主要是 jQuery）构建了这个网络应用游戏。它旨在在没有无线互联网的地方（博物馆）的 iPad 上使用。我正在使用 cache.manifest 文件来缓存游戏运行所需的所有文件。在我的桌面上同时使用 Chrome 和 Safari，效果很好。我可以在调试器中看到应用程序缓存中列出的所有文件，并且该应用程序可以在没有互联网连接的情况下完美运行。在 iPad 的浏览器上测试它也得到了很好的结果。iPad 似乎需要更长的时间来缓存所有文件，但如果你给它足够的时间，该应用程序也可以在飞行模式下的 iOS 上的 Safari 中运行。

现在问题来了。当我将应用程序安装到主屏幕并从那里启动它时，应用程序不起作用。只有第一页会运行，当我尝试转到下一个时它会失败并告诉我我需要互联网。（地图出现后会加载第二个 HTML 页面并且您选择了 1 号厅）

我已经读到如果从主屏幕启动它可能需要重新缓存，所以我尝试等待它缓存然后转到下一页。我已经等了 2-3 分钟，但它仍然没有工作。

您可以在[此处](http://jorgoscoenen.be/m/spel/ "这里")找到该应用程序。它是荷兰语，所以可能有点混乱。

清单文件在[这里](http://jorgoscoenen.be/m/spel/cache.manifest "这里")。

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:06:22.210

所以我自己想通了。事实证明这是一个真正的菜鸟错误。在应用程序的某些页面中，我对 cache.manifest 文件有一些错误的引用。在似乎会导致一些问题的 iOS 设备上。

非常令人困惑，因为它在常规浏览器中运行良好。但吸取的教训：iOS 对小细节非常挑剔，您需要在每个页面上引用清单文件。

# android - Android 通过其他应用程序的服务启动 RunningApp 活动

> ID：10473945
> 
> 赞同：1
> 
> 时间：2012-05-06T20:21:29.040
> 
> 标签：android, service, android-intent

使用标志 FLAG_ACTIVITY_NEW_TASK 时，如果您现在正在启动的活动的任务已经在运行，我希望不启动一个新活动 - 相反，我希望将当前任务简单地带到它最后进入的屏幕前面.

1.  **我怎样才能从其他应用程序的服务中做到这一点？**我想`actvityManager.getRunningAppProcesses()`通过服务启动应用程序。我只知道如何将这个应用程序作为一个新应用程序启动：

    ```
    Context context = this.getBaseContext(); 
    ```

    PackageManager pm = context.getPackageManager(); 意图意图 = pm.getLaunchIntentForPackage(LevelappPackageName); context.startActivity(intent);

但我想以这种方式执行它：

```
 context.startActivity(intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)); 
```

1.  我知道如何确定我的应用程序是否正在运行：

    ```
    ActivityManager actvityManager = (ActivityManager) this.getSystemService( ACTIVITY_SERVICE );
    List<RunningAppProcessInfo> App = actvityManager.getRunningAppProcesses();
    for(int i = 0; i < App.size(); i++)
        {   
            if(App.get(i).processName.equals("myapp")) 
    ```

    但是**我怎么知道某个应用程序当前是否正在运行**——它现在在屏幕上？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:53:59.757

您需要将一个添加到您希望启动`intent-filter` `action`的清单中。`Activity`您还需要一个`PendingIntent`正确的`action`，您可以从`Service`. 您可能还需要查看清单`launchMode=singleTop`和/或`Context.startActivityIfNeeded`.

如果一个`Activity`有焦点，它的`onWindowFocusChanged`方法将被调用。使用它来设置您可以读取的变量。

# ios5 - 更改导航栏按钮的背景图像

> ID：10473947
> 
> 赞同：2
> 
> 时间：2012-05-06T20:21:30.103
> 
> 标签：ios5

我正在尝试更改所有应用程序的导航栏按钮的背景图像。我想它必须在 appDelegate 中完成。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:53:16.183

您可以为此使用外观代理。只需将其添加到您的 appDelegate

```
- (BOOL)application:(UIApplication *)application 
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    //...
    UIImage *myImage = [UIImage imageNamed:@"barButtonItemBackground.png"];
    [[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil] setBackgroundImage:myImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    return YES;
} 
```

有关更多详细信息，请查看 WWDC 2011 的第 114 场会议

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:52:20.170

如果你的目标是 iOS 5，你可以把这段代码放在你的 AppDelegate 中：

```
float version = [[[UIDevice currentDevice] systemVersion] floatValue];
if (version >= 5.0)
{
    // iPhone 5.0 code here
    UIImage *image = [UIImage imageNamed: @"image.png"];
    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:image forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];

} 
```

# android - 奇怪的 logcat 过滤器行为

> ID：10473956
> 
> 赞同：1
> 
> 时间：2012-05-06T20:22:21.973
> 
> 标签：android, eclipse

有时我会寻找特定的 logcat 消息以用于调试目的，并且准确查看它们何时出现至关重要。然后，我在 Eclipse 中制作了一个 logcat 过滤器（称为 xx），准备好发现关键消息。然后，我突出显示 xx 过滤器并运行我的应用程序并查看我的消息 - 我的 xx 文件管理器视图中没有出现任何内容 - 但我注意到越来越多的数字赢得了“所有消息（无过滤器）”旁边的括号。如果我然后单击“所有消息”事物然后返回到 xx，那么嘿，我的消息是可见的。就好像 eclipse 决心永远不让我看到这些消息。对此我能做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:04:02.243

我发现 eclipse 插件的一部分非常不可靠，特别是如果有大量日志消息，它很容易使整个窗口变慢/冻结。

就个人而言，我倾向于在 shell 中运行 logcat，有时通过管道输入*grep*

*tee*也很有用，可以将副本写入磁盘以供以后检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:52:45.337

确保 logcat 没有暂停。

# mysql - 如何设置 Django/South 以在迁移中使用事务？

> ID：10473957
> 
> 赞同：1
> 
> 时间：2012-05-06T20:22:35.120
> 
> 标签：mysql, django, django-south

我将 Django 与 MySQL 和 South 一起使用，一切都很花哨……直到迁移出现问题。然后我得到一个经常损坏或破坏我的数据库的错误，并且沿着这条线给了我：

```
 ! Since you have a database that does not support running
 ! schema-altering statements in transactions, we have had 
 ! to leave it in an interim state between migrations. 
```

我所有的数据库表都是 InnoDB，据我所知，它支持事务。我必须做些什么才能让 South 在其迁移中使用事务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T20:39:52.880

错误消息的重点是当您更改模式时MySQL*不支持事务。*MySQL 仅在您创建/更新/选择数据时支持事务。[仔细阅读South 网站](http://south.aeracode.org/docs/databaseapi.html?highlight=mysql)上 Database-Specific Issues 部分关于 MySQL 的内容。

如果您确实想使用模型迁移，您可以切换到 PostgreSQL，这对您使用 Django 是完全透明的。唯一的变化是*settings.py*数据库部分（当然还有 PostgreSQL 安装）。

# java - 如何将 Java 项目集成到动态 Web 项目中

> ID：10473962
> 
> 赞同：1
> 
> 时间：2012-05-06T20:23:21.173
> 
> 标签：java, eclipse, tomcat7

我有两个 Java 项目。一个是普通的 Java 项目。我想将此 Java 项目集成到我的动态 web 项目中。起初效果很好。我可以通过 Java 构建路径轻松集成项目。但是，如果我从动态 Web 项目中调用“MyClass”，我总是会得到这个异常：

> javax.servlet.ServletException: java.lang.NoClassDefFoundError: my/project/MyClass org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:911) org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java :840) org.apache.jsp.api_jsp._jspService(api_jsp.java:91) org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) javax.servlet.http.HttpServlet.service(HttpServlet.java :722) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389) org.apache.jasper.servlet.JspServlet.service (JspServlet.java:333) javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

这大概意味着其他正常的javaproject部署到了Server上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:30:35.663

右键单击`Dynamic Web Project`-> `Properties`-> `Deployment Assembly`-> `Add`-> `Project`-> `The None Dynamic Web Project`。

这会将另一个 Eclipse 项目自动捆绑到 WARs lib 文件夹中。

# android - Google Play 应用程序兼容性

> ID：10473964
> 
> 赞同：0
> 
> 时间：2012-05-06T20:23:23.707
> 
> 标签：android, android-4.0-ice-cream-sandwich, google-play

我在 Google Play 上的应用程序有问题。事实上，我的应用程序与 miui、自定义 Ics 等自定义 rom 不兼容......例如，我无法使用 miui 上的 GS2 从 google play 下载我的应用程序，而我的朋友可以使用 ICS 上的 GS2 下载它。请帮我...

这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.notifyme"
    android:versionCode="3"
    android:versionName="1.0" >

<supports-screens 
 android:largeScreens="true" 
 android:normalScreens="true" 
 android:smallScreens="true" 
 android:anyDensity="true" /> 

<uses-sdk android:minSdkVersion="8"  />

<permission android:name="com.notifyme.permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name="com.notifyme.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.SOUND" />   
<uses-permission android:name="android.permission.LIGHTS" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:icon="@drawable/notifme_icon"
    android:label="@string/app_name" >

    <activity
        android:name=".HomeActivity"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".ConnexionActivity" 
        android:windowSoftInputMode="stateHidden"
        android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".MainActivity" 
        android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".InscriptionActivity" 
        android:windowSoftInputMode="stateHidden"
        android:theme="@android:style/Theme.NoTitleBar"/>
    <receiver
        android:name=".ReceiverActivity"
        android:permission="com.google.android.c2dm.permission.SEND" >
         <intent-filter >
            <action android:name="com.google.android.c2dm.intent.RECEIVE" > </action>
            <category android:name="com.notifyme" />
        </intent-filter>
        <intent-filter >
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" ></action>
            <category android:name="com.notifyme" />
        </intent-filter>
     </receiver>
</application> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:37:37.083

我*怀疑*问题出在您的代码上。您的一项活动可能具有仅从 API 13（例如 Android 3.2 及更高版本）开始受支持的方法。这就是为什么它可以下载更新版本（ICS 是 android 4）而不是你的。仔细检查你的方法来弄清楚。

# objective-c - 如何暂停秒表，然后让它从开始的地方恢复？

> ID：10473967
> 
> 赞同：0
> 
> 时间：2012-05-06T20:23:40.877
> 
> 标签：objective-c, timer, nsdate, nstimer

我正在设计一个计时器，我希望能够在同一个地方暂停和继续。我试过这样做，但代码对我不起作用。这是我的代码：

.m 文件：

```
-(IBAction)buttonPause:(id)sender {
    NSString *dateString = timer.text;
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss.SS"];
    NSDate *dateFromString = [[NSDate alloc] init];
    dateFromString = [dateFormatter dateFromString:dateString];
    dateFromString = startDate;
}

- (IBAction)buttonStart:(id)sender {
    startDate = [NSDate date];
    stopWatchTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/100.0
                                                          target:self
                                                        selector:@selector(updateTimer)
                                                        userInfo:nil
                                                         repeats:YES];
}

- (void)updateTimer{
    NSDate *currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss.SS"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    NSString *timeString = [dateFormatter stringFromDate:timerDate];
    timer.text = timeString;
} 
```

我的问题似乎在于 buttonPause 方法。我做错了什么或没有做什么？提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:38:49.057

您可以使用 NSTimeInterval 代替计时器。我有一个暂停和停止计时器的功能代码。

```
@interface PerformBenchmarksViewController () {

    int currMinute;
    int currSecond;
    int currHour;
    int mins;
    NSDate *startDate;
    NSTimeInterval secondsAlreadyRun;
}

@end

- (void)viewDidLoad
{
    [super viewDidLoad];

    running = false;
}

- (IBAction)StartTimer:(id)sender {

    if(running == false) {

        //start timer
        running = true;
        startDate = [[NSDate alloc] init];
        startTime = [NSDate timeIntervalSinceReferenceDate];
        [sender setTitle:@"Pause" forState:UIControlStateNormal];
        [self updateTime];
    }
    else {
        //pause timer
        secondsAlreadyRun += [[NSDate date] timeIntervalSinceDate:startDate];
        startDate = [[NSDate alloc] init];
        [sender setTitle:@"Start" forState:UIControlStateNormal];
        running = false;
    }
}

- (void)updateTime {

    if(running == false) return;

    //calculate elapsed time
    NSTimeInterval currentTime = [NSDate timeIntervalSinceReferenceDate];
    NSTimeInterval elapsed = secondsAlreadyRun + currentTime - startTime;

    // extract out the minutes, seconds, and hours of seconds from elapsed time:
    int hours = (int)(mins / 60.0);
    elapsed -= hours * 60;
    mins = (int)(elapsed / 60.0);
    elapsed -= mins * 60;
    int secs = (int) (elapsed);

    //update our lable using the format of 00:00:00
    timerLabel.text = [NSString stringWithFormat:@"%02u:%02u:%02u", hours, mins, secs];

    //call uptadeTime again after 1 second
    [self performSelector:@selector(updateTime) withObject:self afterDelay:1];
} 
```

希望这会有所帮助。谢谢

# android - 以下进程： -cmd.exe -java.exe 正在锁定以下目录：

> ID：10473971
> 
> 赞同：10
> 
> 时间：2012-05-06T20:23:58.103
> 
> 标签：android, installation, android-sdk-2.3

我正在安装 2.3.3 android API，我收到了这个错误：

```
Warning:
The following processes:
-cmd.exe
-java.exe
are locking the following directory:
C:\Program Files (x86)\Android\android-sdk\tools 
```

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-23T23:57:52.167

去这个目录：

```
C:\Program Files (x86)\Android\Android SDK\temp 
```

并剪切那里的所有东西，然后将其粘贴到一个新文件夹中..

再次运行更新..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-30T06:58:19.770

我最好去 sdk/temp 并发现 `tools_r22.6.3-windows.zip`哪个已下载但未安装我只是解压缩了 zip 并替换了工具`\sdk\tools`

注意：退出 eclipse 和 sdk manager ，**删除旧的 TOOLS 文件夹**而不是替换它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-01T09:52:14.493

我遇到了同样的问题。然后我下载了[最新](http://developer.android.com/sdk/index.html)的SDK（只有SDK。不需要下载android平台）。

“android-sdk”文件夹中有一个名为“tools”的文件夹。我用新下载的“工具”文件夹替换了以前的“工具”文件夹。到目前为止，它在 Eclipse 中工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-14T17:49:08.803

对我有用的是更改指定文件夹的名称（C:\Program Files (x86)\Android\android-sdk\tools）。更改文件夹名称后，我打开了 android studio。接下来我进入了我重命名的工具文件夹并运行了 android.bat 文件。这打开了管理器，让我安装没问题。假设可以安全地删除重命名的旧文件夹，将创建并使用一个新的工具文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-07T07:13:59.010

从[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)下载 sdk。从下载的 sdk 文件夹中复制 tools 文件夹，并替换现有 sdk 文件夹中的现有工具目录。这对我有用。我在更新 sdk 时遇到了这个问题。复制和粘贴工具后不会出现任何问题，因为您会将更新版本的工具替换为现有的 sdk。这不是正确的方法，因为当您需要更新 sdk 时，您需要一直这样做。更好的方法是在你的 sdk 中复制 tools 目录，并在此文件夹中使用 diff 名称粘贴它，例如 toolsDiplicate 以管理员身份运行 android.bat 文件。希望这可以帮助。解决此问题的任何其他方式或我们面临此问题的任何原因，请告诉我

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-30T14:18:00.193

转到 C:\Program Files (x86)\Android\android-sdk 并删除临时文件夹。重新运行 SDK 管理器以下载最新的 SDK，它应该可以正常工作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T20:01:31.213

你可以去：C:\Program Files (x86)\Android\android-sdk 删除文件夹“tools”。将C:\Program Files (x86)\Android\android-sdk\temp\tools_r21.1-windows.zip中已经下载的zip解压到C:\Program Files (x86)\Android\android-sdk。此 zip 文件中的文件夹名为“tools”并替换已删除的文件夹。

与在 sdk manager 中安装 SDK Tools 相同。我遇到了这个问题，它奏效了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-21T14:29:16.303

我以这种方式“解决”了它：如前所述，转到 C:\Program Files (x86)\Android\android-sdk\temp 并将内容复制到一个新文件夹。解压缩包含刚刚下载的新工具的 zip 文件的内容，并将整个文件夹复制回 C:\Program Files (x86)\Android\android-sdk。这对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-03T08:24:14.267

我在 ddms 运行时收到此错误（我正在从您的手机获取打印屏幕）。退出并单击是。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-29T20:33:43.707

首先转到您安装了 android SDK 的文件夹（默认位置：*C:\Users\\AppData\Local\Android\android-sdk）并重命名该文件夹。例如：android-sdk-previousVersion

[然后从https://developer.android.com/sdk/index.html?hl=i](https://developer.android.com/sdk/index.html?hl=i)下载最新的 android SDK

将下载的 SDK 安装在与之前的 android sdk 相同的位置。

您下载的 sdk 将不包含任何平台或系统映像..

打开之前的 android sdk 文件夹并复制这些文件夹：add-ons、build-tools、docs、extras、platforms、platform-tools、samples、sources 和 system-images，然后将这些文件夹粘贴到新的 sdk 目录中。如果存在相同的文件夹，则覆盖这些文件夹。

![仅复制选定的文件夹，更改其他文件夹或文件将导致失败](../Images/6e87ac09842958bf831f8ff8597b0cd5.png)

现在您可以删除旧的 android SDK 文件夹。

打开新的android SDK，你会发现你在之前的SDK中拥有的所有平台。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-03-22T10:17:00.530

如果您在 Windows 上而不是做所有这些棘手的事情，我通过下载“仅 sdk”installer.exe 来解决它，您可以在此处获取 -> [http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

1）向下滚动并单击其他平台的下载

2）你会看到两张表 ADT bundle 和 SDK tools only 。在那个“Sdk Tools only”中，你可以获得installer.exe（不要点击.zip下载）......只需下载并运行它，但请记住如果您已将 android 保存在其他非默认驱动器中，那么当安装程序要求您指定路径时，您必须指定 android sdk 文件夹的路径。

这解决了我的问题，没有任何问题。干杯！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-27T08:43:41.797

我也遇到过同样的问题，已经解决了。我把tools目录配置到环境变量中，结果无法重命名“tools”目录。解决方法：暂时把里面的环境变量去掉，然后关掉eclipse，重新更新。希望对大家有帮助！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-02-08T06:56:09.593

我通过复制我的 \tools 文件夹，将副本命名为 \toolsCopy 解决了这个问题。然后我以管理员权限从 \toolsCopy 文件夹运行 android.bat。

从 \tools 运行 SDK 管理器会锁定 \tools 目录的重命名，原因很明显。SMH

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-03-14T12:44:03.527

1.  转到您的 android-sdk 文件夹。
2.  重命名“工具”文件夹，如“工具 1”或“工具”或其他任何内容
3.  使用 Administration 打开 cmd 并从 cmd Ex-C:\Users\Eshad\AppData\Local\Android\android-sdk\toolss>android 转到新重命名的 tools1/toolss 文件夹
4.  键入“android”以运行 android.bat 文件
5.  现在更新

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2013-06-07T04:53:23.083

我从 sdk 文件夹中删除了“temp”文件夹，并从 adt 文件夹中删除了“temp”文件夹。有效。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2013-03-01T08:16:05.120

转到临时文件夹并取消选中只读勾选按钮并按

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2014-03-27T16:28:56.050

`temp`从文件夹内的文件夹中删除数据`sdk`是最好的解决方案。其他解决方案可能有效。您可能需要尝试很多东西....但最终，这样做会对您有所帮助。

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2016-03-03T03:41:02.750

转到您的 android-sdk 文件夹。重命名 'tools' 文件夹，如 'tools1' 或 'toolss' 或其他任何东西 使用管理打开 cmd 并从 cmd Ex-C:\Users\Eshad\AppData\Local\Android\android-sdk 转到新重命名的 tools1/toolss 文件夹\toolss>android 输入“android”运行 android.bat 文件 现在更新

# nested - 淘汰赛嵌套的可观察对象和咖啡脚本类

> ID：10473973
> 
> 赞同：1
> 
> 时间：2012-05-06T20:24:01.250
> 
> 标签：nested, coffeescript, knockout.js, observable

我有一个播放器类和视图模型

```
class Player
    constructor: ->
        @boat = ko.observable null

class Boat
    constructor: (@id) ->

class ViewModel
    player: ko.observable 
```

在 HTML 中

```
<div data-bind="if: player">
        <div data-bind="template: {name: 't_me', data: player}"></div>
</div>
<script type="text/html" id="t_me">
    <span>player boat
        <span data-bind="if: boat()">            
            <b data-bind="text: boat().id"></b>
        </span>        
    </span>
</script> 
```

现在在脚本中，我尝试将船设置为 plyer

```
vm = new ViewMode()
ko.applyBindings vm
vm.player new Player()
vm.player.boat new Boat(1) 
```

而且我不能让 View 对这种变化做出反应，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:58:47.873

`vm.player`我在您的代码中看到的唯一问题是observable缺少括号。（假设这`vm = new ViewMode()`是一个错字）

我相信最后一行应该是：`vm.player().boat new Boat(1)`

# core-data - 获取未保存数据时的奇怪核心数据行为

> ID：10473975
> 
> 赞同：0
> 
> 时间：2012-05-06T20:24:09.440
> 
> 标签：core-data, ios5, nsfetchrequest

我有一个循环数据的核心数据导入器，并在导入过程中忽略重复记录。

但是我发现我的 NSFetchRequest 与最近存储的尚未保存的记录不匹配。而且我看到看似相同的查询提供了不同且出乎意料的结果。

例如，在我的测试中，我发现这个查询匹配并返回结果：

```
fetchTest.predicate = [NSPredicate predicateWithFormat:@"%K = 3882", @"intEmployee_id"]; 
```

但这个看似相同的却没有：

```
fetchTest.predicate = [NSPredicate predicateWithFormat:@"%K = %@", @"intEmployee_id", @"3882"]; 
```

但是 - 在上下文保存到持久存储后，它们都匹配相同。

Apple 的文档说，默认情况下，fetches 应该对挂起的更改起作用，实际上我已经遵守了 [fetchTest includesPendingChanges] = YES。

有什么想法吗？这两个提取怎么可能返回不同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:40:53.473

也许员工 ID 不是字符串而是数字？那么谓词应该是：

```
[NSPredicate predicateWithFormat:@"%K = %@", @"intEmployee_id",
                                             [NSNumber numberWithInt:3882]]; 
```

这意味着不稳定的行为来自混合类型。它仍然以某种方式工作，即使不规律，因为在 SQLite 文档中它说 SQLite 在物理存储数据时实际上并没有真正区分类型。

请参阅SQLite 网站上[的 SQLite 的独特功能，标题为](http://www.sqlite.org/different.html)*Manifest Typing*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:44:07.830

这些实际上不会评估为相同的值。

```
[NSPredicate predicateWithFormat:@"%K = 3882", @"intEmployee_id"] 
```

评估为`intEmployee_id = 3882`while

```
[NSPredicate predicateWithFormat:@"%K = %@", @"intEmployee_id", @"3882"] 
```

评估为`intEmployee_id = "3882"`

尝试使用数字而不是字符串作为 id。

# android - Android sdk- 获取远程 XML 内容

> ID：10473984
> 
> 赞同：0
> 
> 时间：2012-05-06T20:24:52.237
> 
> 标签：android, xml

我正在尝试`xml`使用以下代码在我的 Android 应用程序上获取远程内容：

```
URL aUrl = new URL(url);
HttpURLConnection conn = (HttpURLConnection)aUrl.openConnection();
conn.setRequestMethod("GET");
conn.setDoOutput(true);
conn.setReadTimeout(15 * 1000);  // timeout for reading the google maps data: 15 secs
conn.connect();... 
```

当我尝试时，`connect()`我得到了异常：

```
NetworkOnMainThreadException  (id=830019595736) 
```

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:33:50.767

在线程内执行相同操作：

```
new Thread(new Runnable() {
                 public void run() { 
                         // the same
                  }).start(); 
```

当然`AsyncTask`也是一种方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:34:37.640

从[异常 java doc](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)中它说你不能从你的主线程进行 HTML 连接。对于可能需要很长时间才能执行的工作，您应该使用服务或类似服务，否则您最终会遇到 ANR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T20:35:07.640

例外说明了一切：您正在尝试在 UI（主）线程上进行网络通信。正如您可能猜到的那样，解决方案是在单独的线程上运行下载。最简单也可能是最好的方法是使用[ASyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

# c# - 调试在 Visual Studio 之外运行的应用程序

> ID：10473986
> 
> 赞同：2
> 
> 时间：2012-05-06T20:25:09.533
> 
> 标签：c#, debugging, exception

我使用 VS 2010 Ultimate 开发 C# 应用程序。通常，这些应用程序会运行很长时间，无需用户交互，当然，它们内部通常也存在错误。

不幸的是，应用程序通常会随机崩溃，而您无法重现错误。此外，有时我只有消息“应用程序已停止工作”而没有更多信息。

我可以在客户的机器上安装 Visual Studio，但我不能让他运行 VS 并在调试模式下编译/启动源代码！我需要的是在应用程序启动并崩溃*后启动 VS。*似乎可以这样做，实际上当运行时发生异常时，Windows 会问你“你想用 VS 调试吗？”，但如果我回答“是”，那么 VS 会启动，但我根本看不到源代码代码（它也在电脑上），因此我无法检查导致异常的代码行。VS 只是告诉我“源代码不可用”。实际上，我无法想象 Windows 是如何启动 VS 并知道崩溃的应用程序的源代码在哪里的！

有谁知道这个调试场景是如何工作的，以及如何配置它？

非常感谢，西蒙娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:19:55.037

Windbg调试工具解决了这个目的。

转储进程状态并开始使用 windbg 进行分析。它为您提供异常信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:24:27.867

要从已经运行的 Visual Studio 实例进行调试，请选择“调试”菜单项，然后选择“附加到进程...”

![附加到进程](../Images/347dc6277f0efeda6736f469ebc8d039.png)

接下来，从列表中选择可执行文件，按“附加”（或双击），您现在正在调试应用程序。当您选择“是”并且 Windows 说源代码不可用时，这很可能意味着 PDB 无法加载，因此请确保您已通过在“模块”中检查它来加载模块的符号" 窗格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T20:41:23.313

如果你想在运行编译程序时捕获错误，你应该使用某种日志机制。如今，您不必自己编写它，有一个为 .NET 应用程序设计的出色的开源日志记录引擎，它称为[NLog](http://nlog-project.org)。它能够将日志保存到文件、电子邮件、控制台或数据库中，几乎可以满足您的所有需求：)。

希望这可以帮助 ：）

# php - PHP 查询返回 true 但 if 语句仍在运行

> ID：10473989
> 
> 赞同：0
> 
> 时间：2012-05-06T20:25:19.803
> 
> 标签：php, mysql, mysql-real-escape-string

我在发送查询时遇到问题，这让我有点发疯，这就是我所说的：

```
 $query = "INSERT INTO combined(v_products_model, v_products_image, v_products_description_1, v_products_name_1, v_products_quantity, v_tax_class_title, v_status, EOREOR) " .
            "VALUES ('$fileName', '$fileName', '$description', '$description', '10', '--none--', 'Active', 'EOREOR')";
    mysql_real_escape_string($fileName);
    mysql_real_escape_string($description);
    $queryResult = mysql_query($query, $connect);
//  die(var_dump($queryResult));

if (!$queryResult) {
    die("Error with query: line 40 <br>
                 Query: $query <br>
                 Error: " . mysql_error());
} 
```

由于某种原因，if 语句总是运行，我尝试将 $queryResult == false 作为参数，但结果相同。

我知道`$queryResult`这不是假的，因为我在上面运行了一个`die()`语句并返回了“1”，我也运行了`var_dump`它并返回了“布尔真”。

`mysql_error()`从不返回任何结果。如果有人能告诉我为什么该块正在运行，我将不胜感激。

这是实际打印的内容，顺便说一句，它也没有转义查询：

```
Error with query: line 40 
Query: INSERT INTO combined(v_products_model, v_products_image, v_products_description_1, v_products_name_1, v_products_quantity, v_tax_class_title, v_status, EOREOR) VALUES ('ts_aiw_wereall.jpg', 'ts_aiw_wereall.jpg', 'ALICE IN WONDERLAND we're a sk PUR TS S', 'ALICE IN WONDERLAND we're a sk PUR TS S', '10', '--none--', 'Active', 'EOREOR') 
Error: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:36:44.207

从您生成的查询中：

```
'ALICE IN WONDERLAND we're a sk PUR TS S'
                       ^--- unescaped quote 
```

由于您在生成查询字符串**之后**执行 mysql_real_escape_string() ，因此您不会转义进入查询的文本，并且您的查询失败。PHP 不会神奇地及时返回并重新调整您的`$query = ...`行以反映转义调用的值。

这并不能解释为什么不显示错误消息。关于我所能想到的，你有多个连接到 MySQL，并且正在对`$connect`连接执行查询，这不是默认连接（例如最后一个创建的连接），所以 mysql_error() 正在返回错误结果一些没有错误的其他连接。

尝试`mysql_error($connect)`查看是否收到任何错误消息。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-06T20:45:06.830

这部分代码会因为引号导致查询失败。

```
'ALICE IN WONDERLAND we're a sk PUR TS S', 'ALICE IN WONDERLAND we're a sk PUR TS S' 
```

您可以使用该函数`addslashes()`在插入这些值之前对其进行转义。例如

```
addslashes(ALICE IN WONDERLAND we're a sk PUR TS S); 
```

请记住使用`stripslashes()`删除对使用的值的引号转义`addslashes()`。

其次，您必须放置这些行

```
mysql_real_escape_string($fileName);
mysql_real_escape_string($description); 
```

在构建查询之前。

# php - 我如何让 PHP / REGEXP 匹配所有关键字，而不是任何关键字？

> ID：10473990
> 
> 赞同：1
> 
> 时间：2012-05-06T20:25:21.137
> 
> 标签：php, mysql, regex, search

我有一个 PHP / mySQL 搜索函数，它在值 $keywords_search 中使用一个或多个关键字。问题是它匹配任何关键字，这意味着如果搜索完成，它返回的结果要么只包含“牛奶”，要么只包含“啤酒”，如果有人搜索“牛奶啤酒”。如何更改它以使结果必须包含字符串中的所有关键字？

以下是代码：

```
$query[] = "((a.name REGEXP '( )*(" . str_replace(' ', ')*( )*(', $keywords_search) . ")( )*') 
OR (a.description REGEXP '( )*(" . str_replace(' ', ')*( )*(', $keywords_search) . ")( )*'))"; 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:33:11.683

您最好将关键字放入规范化的子表中，这会使此类搜索变得微不足道。MySQL 的正则表达式匹配不允许您指定应匹配的一系列交替中的多少，它只是告诉您是否有任何匹配。

例如

```
SELECT count(*) AS cnt
FROM keywords
WHERE keyword IN ('a', 'b', 'c')
GROUP BY id
HAVING (cnt = 3) 
```

只会显示任何特定 id 包含所有三个关键字的记录。

使用正则表达式版本和未规范化的字符串字段，您必须将关键字拆分为多个单独的正则表达式并将它们与`AND`

例如

```
SELECT ...
FROM ...
WHERE keyword REGEX ('keyword1') AND keyword REGEX ('keyword2') AND .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:29:10.427

你可以用你的关键字做这样的事情：

```
$keywords = array('key', 'word');

$keywordQuery = [];

foreach ($keywords as $keyword) {
    $keywordQuery[] = "((a.name REGEXP '( )*({$keyword})( )*') AND (a.description REGEXP '( )*({$keyword})( )*'))";
}

$query = implode(' AND ', $keywordQuery); 
```

比 Regexp 更好，如果可以的话，您还可以使用 MySQL 的全文搜索 - [Boolean Full-Text Searches](http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html)。

# javascript - JavaScript添加十进制数字问题

> ID：10473994
> 
> 赞同：77
> 
> 时间：2012-05-06T20:26:18.227
> 
> 标签：javascript, numbers

所以我正在制作一个将两个数字（十进制数）相加的脚本，我遇到了一个问题。

[http://jsfiddle.net/DerekL/esqnC/](http://jsfiddle.net/DerekL/esqnC/)

我编写了脚本，结果非常好：

```
0.1 + 0.5  //0.6
0.2 + 0.3  //0.5 
```

但很快我看到：

```
0.1 + 0.2  //0.30000000000000004
0.01 + 0.06  //0.06999999999999999 
```

在我看来它不正确。我知道使用有限位浮点数是一个缺点，但我找不到解决这个问题的方法。

```
Math.ceil   //No
Math.floor  //No
.slice      //No 
```

**更新**

是否可以先将数字乘以 1000，然后将它们相加，然后再除以 1000？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-05-06T20:34:10.480

用于`toFixed`将其转换为去掉一些小数位的字符串，然后将其转换回数字。

```
+(0.1 + 0.2).toFixed(12) // 0.3 
```

看起来 IE`toFixed`有一些奇怪的行为，所以如果你需要支持 IE，这样的东西可能会更好：

```
Math.round((0.1 + 0.2) * 1e12) / 1e12 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-06T20:52:39.633

```
function add(){
    var first=parseFloat($("#first").val());
    var second=parseFloat($("#second").val());
    $("#result").val(+(first+second).toFixed(2));
} 
```

[**演示。**](http://jsfiddle.net/heera/esqnC/6/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-06T20:54:02.363

这是浮点的常见问题。

`toFixed`与 结合使用`parseFloat`。

这是JavaScript中的[示例：](http://jsfiddle.net/49HGP/5)

```
function roundNumber(number, decimals) {
    var newnumber = new Number(number+'').toFixed(parseInt(decimals));
    return parseFloat(newnumber); 
}

0.1 + 0.2;                    //=> 0.30000000000000004
roundNumber( 0.1 + 0.2, 12 ); //=> 0.3 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-14T22:06:03.287

测试这个 Javascript：

```
var arr = [1234563995.721, 12345691212.718, 1234568421.5891, 12345677093.49284];

var sum = 0;
for( var i = 0; i < arr.length; i++ ) {
    sum += arr[i];
}

alert( "fMath(sum) = " + Math.round( sum * 1e12 ) / 1e12 );
alert( "fFixed(sum) = " + sum.toFixed( 5 ) ); 
```

## 结论

不要使用`Math.round( (## + ## + ... + ##) * 1e12) / 1e12`

相反，使用`( ## + ## + ... + ##).toFixed(5) )`

在 IE 9 中，`toFixed`效果很好。

# c# - 处理 UIScrollView Monotouch 内按钮列表的按钮单击事件

> ID：10473997
> 
> 赞同：0
> 
> 时间：2012-05-06T20:26:33.243
> 
> 标签：c#, iphone, uiscrollview, xamarin.ios, monodevelop

我在我的 iPhone 应用程序中的视图上有一个 UIScrollView 和一个 UIPageControl。我用 10 个按钮的列表填充这个 Scrollview。这些按钮都正确填充，我可以完美地滚动它们。我的问题是：如何将点击事件连接到每个按钮？每个按钮将执行基本相同的任务（播放声音），但是每个按钮的声音会有所不同。这些按钮是通过以下方法以编程方式创建的：

```
 private void CreatePanels()
    {
        scrollView.Scrolled += ScrollViewScrolled;

        int count = 10;
        RectangleF scrollFrame = scrollView.Frame;
        scrollFrame.Width = scrollFrame.Width * count;
        scrollView.ContentSize = scrollFrame.Size;

        for (int i=0; i<count; i++)
        {

            float h = 150.0f;
            //float w = 50.0f;
            float padding = 10.0f;
            int n = 25;

            var button = UIButton.FromType (UIButtonType.RoundedRect);
            button.SetTitle (i.ToString (), UIControlState.Normal);
            UIImage img = new UIImage("Images/btntest.png");
            button.SetImage(img, UIControlState.Normal);
            button.Frame = new RectangleF (
                        (padding + 40) * (i + 1) + (i * (View.Frame.Width - 100))   , 
                        padding,                        
                        View.Frame.Width - 100,         
                        h);

            RectangleF frame = scrollView.Frame;
            PointF location = new PointF();
            location.X = frame.Width * i;

            frame.Location = location;
            button.Frame = frame;

            scrollView.AddSubview(button);
        }

        pageControl.Pages = count;
    }

    private void ScrollViewScrolled (object sender, EventArgs e)
    {
        double page = Math.Floor(((scrollView.ContentOffset.X - scrollView.Frame.Width) / 2) / scrollView.Frame.Width) + 1;

        pageControl.CurrentPage = (int)page;
    } 
```

CreatePanels() 方法在填充 UIScrollView 的 ViewDidLoad() 方法中调用。

如何将点击事件链接到这些按钮中的每一个？我在互联网上搜索了很多但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:52:57.620

在 for 循环中为每个点击事件连接一个匿名方法怎么样？

`button.TouchUpInside += (s, e) => { //play i.mp3
};`

我不确定如何实际播放声音文件，但您可以将声音文件命名为 i.*，因为这是您的按钮的名称。

# function - 带有 IF ELSE 语句的 postgresql plpsql 函数

> ID：10473998
> 
> 赞同：3
> 
> 时间：2012-05-06T20:26:48.493
> 
> 标签：function, postgresql, if-statement

假设我有一个名为 t 的表，它存储在 postgresql 数据库中。我有 6 列名为 a、b、c、d、e、f。a、b 和 c 列取 0 到 100 之间的值，但在算术尺度上 0 < a < b < c < 100。d、e 和 f 列取 1 到 10 范围内的任何值。

我想计算 d、e 和 f 列的加权平均值，但条件与 a、b 和 c 列相关。条件是仅在值小于 50 的 a、b 和 c 列上计算平均值。

我认为这需要一个功能，所以我开始这样做：

```
CREATE OR REPLACE FUNCTION example(t character varying, a character varying, b character varying, c character varying, d character varying, e character varying, f character varying, g character varying) RETURNS double precision AS $$

BEGIN
    ALTER TABLE t ADD COLUMN g double precision;
        UPDATE t
            IF a > 50 THEN
                SET g = d;
            ELSE 
                IF b > 50 THEN;
                    SET g = (d+e)/2;
                END IF c > 50 THEN
                        SET g = (d+e+f)/3;
            END IF;
END;
$$ LANGUAGE plpgsql; 
```

我收到以下错误：

```
ERROR:  syntax error at or near "$1"
LINE 1: ALTER TABLE  $1  ADD COLUMN  $2  double precision
                 ^
QUERY:  ALTER TABLE  $1  ADD COLUMN  $2  double precision
CONTEXT:  SQL statement in PL/PgSQL function "example" near line 2

********** Error **********

ERROR: syntax error at or near "$1"
SQL state: 42601
Context: SQL statement in PL/PgSQL function "example" near line 2 
```

有人能告诉我我错了吗，所以我可以继续计算所需的平均值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T23:08:31.223

我完全同意欧文回答中的所有内容，但想指出另一种选择。您可以创建一种“生成的列”，它将按需计算，如下所示：

```
CREATE FUNCTION g(rec t)
  RETURNS double precision
  IMMUTABLE
  LANGUAGE SQL
AS $$
  SELECT CASE
           WHEN $1.a > 50 THEN $1.d 
           WHEN $1.b > 50 THEN ($1.d+$1.e)/2
           WHEN $1.c > 50 THEN ($1.d+$1.e+$1.f)/3
           ELSE 0
         END;
$$; 
```

然后，您可以像引用`g`列一样引用，只要引用由表名或别名限定。例如：

```
SELECT *, t.g FROM t; 
```

当一个明显的限定列引用没有解析为一个列时，PostgreSQL 计划程序会查找一个具有该名称的函数，该函数将表的记录类型作为其唯一参数，并执行该函数。有时这种方法比使用视图更方便，尽管效果基本相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T21:09:13.807

错误的直接原因是命名冲突。您在语句中定义参数`t`并`g`使用相同的名称。`ALTER TABLE`我养成了在参数名称前加上前缀（如`_t`, `_g`）的习惯，这样它们就不会与函数体中的其他名称冲突。

此外，不应定义您的参数，`character varying`因为它们包含数值。可能使用适当的[数字类型](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html)`double precision`。

但我认为你根本不需要函数。这可以通过简单的 SQL 语句来解决：

```
ALTER TABLE tbl ADD COLUMN g double precision;

UPDATE tbl
SET g = CASE
           WHEN a > 50 THEN d 
           WHEN b > 50 THEN (d+e)/2
           WHEN c > 50 THEN (d+e+f)/3
           ELSE 0  -- definition for ELSE case is missing
        END; 
```

您也可以完全从头开始整个想法并为此目的使用视图，因为`g`仅包含功能相关的数据：

```
CREATE VIEW tbl_with_g AS
SELECT *
     , CASE
          WHEN a > 50 THEN d 
          WHEN b > 50 THEN (d+e)/2
          WHEN c > 50 THEN (d+e+f)/3
          ELSE 0
       END AS g
FROM   tbl; 
```

# asp.net - 无法从网格视图一侧的文本框中获取新值

> ID：10473999
> 
> 赞同：0
> 
> 时间：2012-05-06T20:26:57.287
> 
> 标签：asp.net

您好，我正在做一个学校项目，但我遇到了一个问题，任何帮助都会很棒

我有一个购物车网格视图，它有一个文本框数量，用户可以在其中更改数量值，因为某种原因它没有获得新值，只是旧值谢谢！

```
<div class="container">
            <h1>Shopping Cart</h1>
            <a href="Default.aspx">&lt; Back to Products</a>
            <br /><br />
        <asp:Label ID="Label2" runat="server" ></asp:Label>
        <asp:Label ID="Label3" runat="server" ></asp:Label>
            <asp:GridView runat="server" ID="gvShoppingCart" AutoGenerateColumns="false" EmptyDataText="There is nothing in your shopping cart." GridLines="None" Width="100%" CellPadding="5" ShowFooter="true" DataKeyNames="ProductID" OnRowDataBound="gvShoppingCart_RowDataBound" OnRowDeleting="grdCart_RowDeleting" >
                <HeaderStyle HorizontalAlign="Left" BackColor="#3D7169" ForeColor="#FFFFFF" />
                <FooterStyle HorizontalAlign="Right" BackColor="#6C6B66" ForeColor="#FFFFFF" />
                <AlternatingRowStyle BackColor="#F8F8F8" />
                <Columns>
                    <asp:BoundField DataField="ProductName" HeaderText="Brand" />
                    <asp:TemplateField HeaderText="Quantity">
                        <ItemTemplate>
                            <asp:TextBox runat="server" ID="txtQuantity" Columns="5" Text='<%# Eval("Quantity") %>'></asp:TextBox><br />                            
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:BoundField DataField="Price" HeaderText="Price" ItemStyle-HorizontalAlign="Right" HeaderStyle-HorizontalAlign="Right" DataFormatString="{0:C}"  />
                    <asp:BoundField DataField="SubTotal" HeaderText="Total" ItemStyle-HorizontalAlign="Right" HeaderStyle-HorizontalAlign="Right" DataFormatString="{0:C}" />
                    <asp:CommandField ShowDeleteButton="True" />
                </Columns>
            </asp:GridView>
            <br />
            <asp:Button runat="server" ID="btnUpdateCart" Text="Update Cart" OnClick="btnUpdateCart_Click" /><br />
            <asp:Button ID="btnClose2" runat="server" Text="Close" Width="50px" />
        </div> 
```

背后的代码

```
protected void btnUpdateCart_Click(object sender, EventArgs e)
    {
        foreach (GridViewRow row in gvShoppingCart.Rows)
        {
            if (row.RowType == DataControlRowType.DataRow)
            {
                // We'll use a try catch block in case something other than a number is typed in
                // If so, we'll just ignore it.
                try
                {
                    // Get the productId from the GridView's datakeys
                    int productId = Convert.ToInt32(gvShoppingCart.DataKeys[row.RowIndex].Value);
                    Label2.Text = productId.ToString();
                    // Find the quantity TextBox and retrieve the value
                    int quantity = int.Parse(((TextBox)row.Cells[1].FindControl("txtQuantity")).Text);

                    Label3.Text = quantity.ToString();
                    ShoppingCart.Cart.Instance.SetItemQuantity(productId, quantity);
                    BindData();
                }
                catch (FormatException) { }
            }
        }

        mpe2.Show();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T20:32:34.867

我假设您也在回发时对 GridView 进行数据绑定。只有在以下情况下您才应该这样做`!Page.IsPostBack`：

```
if(!IsPostBack) BindGrid(); 
```

除此之外，如果您使用 a `TemplateField`，您应该使用`FindControl`来获取对您的控件的引用：

```
var txtQuantity = (TextBox)row.FindControl("txtQuantity");
int quantity = int.Parse(txtQuantity.Text); 
```

旁注：您不需要`DataControlRowType.DataRow`在迭代 GridView 行时检查（与 in`RowCreated`或不同`RowDataBound`）。