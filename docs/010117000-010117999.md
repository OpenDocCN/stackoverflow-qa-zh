# StackOverflow 问答 10117000-10117999

# .net - LINQ: Updating an independent grid

> ID：10117001
> 
> 赞同：0
> 
> 时间：2012-04-12T03:29:25.587
> 
> 标签：.net, linq-to-sql

I have two grids, `gSummary` and `gInput`. `gSummary` does a bit of data massaging (totals, etc) from the DB and `gInput` is where the user can directly modify the data itself.

I'm finding that the data is submitted correctly (the DB is successfully atomically updated at every change) but that unless I refresh the entire `gSummary` table, the `gSummary` info is out of date and I have to set the `DataSource` again. Is there some way I can update single rows, or somehow refresh the data without refreshing *all* the data?

edit: I'm using Linq to Sql.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:32:33.940

您可以使用`ObservableCollection<T>`然后自己管理更改。（这应该相当简单。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:44:15.133

答案是重新查询数据库，只查询更改的字段，这样整个事情就不必全部刷新。

所以`LinqObject.RecalculateSummary()`我没有在部分课程中调用`DataAccessObject.recalculateSummary(LinqObject)`. 不是最好的解决方案，但对我有用。

# facebook-graph-api - 将照片上传到隐私设置为“朋友的朋友”的相册时的权限问题

> ID：10117002
> 
> 赞同：0
> 
> 时间：2012-04-12T03:29:39.333
> 
> 标签：facebook-graph-api, facebook-ios-sdk

我正在使用 Facebook Graph API 从我的 iOS 应用程序将照片上传到 Facebook 上的相册。但是，我发现当相册的隐私设置为“朋友的朋友”时，上传失败并出现OAuthException，消息如下：

```
Application's Activity Privacy for User is not sufficient to perform this action 
```

我已经尝试了[这个 Facebook 开发者页面](https://developers.facebook.com/docs/authentication/permissions/)中指定的几乎所有权限，但仍然没有成功。当相册隐私设置通常为“朋友”、“只有我”等时，上传工作正常，所以我认为问题一定是由于需要某些额外的权限。

非常感谢任何帮助或建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:22:57.977

终于在 Facebook 开发者网站上找到了这个[错误报告。](https://developers.facebook.com/bugs/365176053526578)问题是由于应用程序的隐私设置比相册的设置更严格。

可能也想看看[这个](https://stackoverflow.com/questions/10002941/how-to-determine-the-posts-on-my-behalf-setting-for-a-facebook-application-via)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:28:28.830

我对此错误消息有类似的问题。我认为发生这种情况是因为我之前发布的照片​​没有指定创建了以应用程序命名的“默认”相册的相册。一旦我明确创建了一个相册并在上传照片时指定了它，就会再次工作。

# prolog - 使用 in_set/2 约束

> ID：10117005
> 
> 赞同：2
> 
> 时间：2012-04-12T03:29:54.440
> 
> 标签：prolog, constraints, sicstus-prolog, clpfd

我正在尝试使用约束`X`不成为列表中的值。

来自[SICStus Prolog 手册](https://sicstus.sics.se/sicstus/docs/latest4/html/sicstus.html/Membership-Constraints.html)：

```
?X in_set +FDSet 
```

不过，我不知道如何将列表转换为 FDSet。我有一个整数列表，`[2,3,8,9]`我想将变量域限制`X`为不在该列表中。我怎么做？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:32:03.157

从[文档](http://www.sics.se/sicstus/docs/latest4/html/sicstus.html/FD-Set-Operations.html#FD-Set-Operations)来看，怎么样`list_to_fdset/2`？你可以翻译成一个`FDSet`，然后构建它的*补码*，然后发布`in_set/2`。如果您的版本没有`list_to_fdset/2`，您可以轻松地将列表转换为普通域表达式，然后发布否定`in/2`约束。在您的示例中，您将发布：

```
#\ X in {2}\/{3}\/{8}\/{9} 
```

你只需要描述一个列表和一个由单例组成的域表达式之间的关系，这很容易：

```
list_domain([I|Is], Dom) :-
        foldl(integer_domain_, Is, {I}, Dom).

integer_domain_(I, D0, D0 \/ {I}). 
```

示例查询：

```
?- list_domain([1,2,3], Dom).
Dom = {1}\/{2}\/{3}.

?- list_domain([1,2,3], Dom), X in Dom.
Dom = {1}\/{2}\/{3},
X in 1..3. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-03T18:18:56.487

我在这里实现了一个..

```
/** Constraint domain to memebers of a list (of numbers only) **/

domain_list_constraint(_, []) :- !.
domain_list_constraint(DomainVar, List) :- member(E, List),
                                (atom(E)->atom_number(E, I), 
                                DomainVar #= I; 
                                DomainVar #= E). 
```

# entity-framework - .NET 4.5 Beta DbGeography NotImplementedException

> ID：10117008
> 
> 赞同：6
> 
> 时间：2012-04-12T03:30:27.807
> 
> 标签：entity-framework, spatial, visual-studio-2012, .net-4.5

我有一个全新的服务器，我在上面安装了 .NET 4.5 Beta 可再发行组件。尝试使用空间功能时出现 NotImplemented 异常。这段代码...

```
var x = DbGeography.PointFromText(string.Format("POINT({0} {1})", -45, 45), 4326); 
```

抛出这个异常...

```
System.NotImplementedException: The method or operation is not implemented.
at System.Data.Spatial.DefaultSpatialServices.GeographyPointFromText(String geographyText, Int32 spatialReferenceSystemId) 
```

如果我安装完整的 VS.NET 11 Beta，那么代码就可以正常工作。任何想法为什么？什么不见​​了？

**更新答案**

感谢帕维尔。您需要安装 SQL CLR 类型。您可以在此链接获得 2012 版本：

Microsoft® SQL Server® 2012 的 Microsoft® System CLR 类型 [http://www.microsoft.com/download/en/details.aspx?id=29065](http://www.microsoft.com/download/en/details.aspx?id=29065)

**观点**

我真的不明白为什么 .NET 框架依赖于 SQL Server。这些课程没有什么特别之处。我意识到这可能是一个历史事件，代码最初是由 SQL 团队编写的，而 .NET 团队想要重用它。也不是很清楚这是否是基于提供程序的实现。更好的异常消息可以节省一天的工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T21:13:10.073

Entity Framework 中的 DefaultSpatialServices 使用 SqlGeography 和 SqlGeometry 类型作为支持类型。这两种类型存在于不属于 .NET Framework 的 Microsoft.SqlServer.Types.dll 程序集中。当 EF 找不到这些类型时抛出异常（异常可能更有帮助......）。当您安装 Visual Studio 时，它会在您的机器上安装 localdb（或者您可能已经有一个 SqlExpress 数据库），这可能是您在正在工作的机器上获取类型的方式。在只安装 .NET Framework 而没有安装 Sql Server 的机器上，您不会拥有这些类型。您可以在出现异常的盒子上安装 SqlExpress，也可以尝试仅安装类型。我不确定从哪里获得程序集本身，但我认为 Sql Server 功能包（[http://www.microsoft.com/en-us/download/details.aspx?id=27596](http://www.microsoft.com/en-us/download/details.aspx?id=27596)）可能有。支持来自 SqlServer 2008 和 SqlServer 2012 的类型，因此安装哪个版本无关紧要。

**编辑**

在 EF6 中，异常将包含更好的消息，请参阅：[https ://entityframework.codeplex.com/SourceControl/changeset/b3eca2c141c0fb517504f9731dc8ba7a9c5727ee](https://entityframework.codeplex.com/SourceControl/changeset/b3eca2c141c0fb517504f9731dc8ba7a9c5727ee)

用于跟踪此错误的工作项：[https ://entityframework.codeplex.com/workitem/3](https://entityframework.codeplex.com/workitem/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T21:36:27.783

也许有人可以突出 darwindaves 的答案：

安装 nuget 包 Microsoft.SqlServer.Types。或者添加对以下内容的引用：

c:\Program Files(x86)\Microsoft SQL Server\100\SDK\Assemblies\Microsoft.SqlServer.Types.dll 并确保在属性中标记为本地副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-04T11:10:25.873

@Pawal 接受的答案帮助解决了我同样的问题。他指向“Microsoft SQL Server 2008 Service Pack 3 Feature Pack”的链接让我对我在目标机器上实际需要安装的内容有点不知所措，但最终确定我只需要以下内容：

***ENU\x64\SQLSysClrTypes.msi***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-15T19:53:10.760

除了添加

> c:\Program Files(x86)\Microsoft SQL Server\100\SDK\Assemblies\Microsoft.SqlServer.Types.dll

我还需要添加

> SqlServerSpatial110.dll

一旦我们添加了它们，它就像一个魅力！

# javascript - 什么是使用 JavaScript 或 JQuery 生成和附加 HTML 的干净有效的方法？

> ID：10117010
> 
> 赞同：4
> 
> 时间：2012-04-12T03:30:47.350
> 
> 标签：javascript, jquery, html

我正要问[这个问题](https://stackoverflow.com/questions/3175241/performance-wise-request-json-and-render-in-js-or-request-the-entire-html)（直到我发现它已经被问到了），现在有了这个问题的答案：

> 最好从 PHP 脚本请求 JSON，然后使用 JavaScript 将结果包装在 HTML 中。

现在我有一个不幸的任务是使用 JavaScript 生成 HTML 以附加到我的文档中，并且不知道如何最好地解决这个问题。

使用 PHP，我可以简单地存储一个 HTML 文件，然后使用`file_get_contents()`和正则表达式将一些标记替换为相关信息，但是我认为使用 JavaScript 并不那么容易。

我想到的一些方法：

1.  令人厌恶的方法。生成一个巨大的丑陋字符串，然后附加：

    ```
    var html = '<div class="comment">' +
        '<strong>' + author + '</strong>: ' +
        '<p>' + content + '</p>' +
    '</div>';

    $("#comments").append(html); 
    ```

2.  将字符串存储在某处，然后在其上使用正则表达式，可能如下所示：

    ```
    var commentHTML = '<div class="cmt"><strong>{auth}</strong>: {cmt}</div>'; 
    ```

是否有一个库/插件可以更好地处理这个问题？我*真的*很想避免用存储在字符串中的 HTML 块来混淆我的 JavaScript。也许有与我提到的我使用 PHP 做的类似方法？JavaScript 可以读取 HTML 文件并将内容存储为字符串吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T03:33:58.480

恭喜，你刚刚发明了 Mustache.js。看看： [https ://github.com/janl/mustache.js](https://github.com/janl/mustache.js)

```
var data = { author: "An Author", content: "Some content" };
var template = "<div class='cmt'><strong>{{author}}</strong>: {{comment}</div>";
var html = Mustache.render(template, data); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T04:07:07.820

您可以将模板内联为具有任意类型的脚本

```
<script id="my-template" type="template">
    <div class="comment">
        <strong>%s</strong>:
        <p>%s</p>
    </div>
</script> 
```

编写一个将“模板”转换为文档片段的函数很简单

```
function fragment(html) {
    var args = arguments,
        div = document.createElement('div'),
        i = 1

    div.innerHTML = html.replace(/%s/g, function(){
        return String(args[i++])
    })

    return div.firstChild
} 
```

使用它也很简单

```
fragment(document.getElementById("my-template").textContent, author, comment) 
```

# php - Database Parent-Child Relationship & php

> ID：10117012
> 
> 赞同：0
> 
> 时间：2012-04-12T03:31:18.300
> 
> 标签：php, mysql, database, parent-child

I'm working on representing a Parent-Child Relationship in a Database. I"m not sure if it's something you're supposed to do, so I figured I'd ask. My idea is to have a table like this:

```
Parent Child
  1      2
  2      3
  3      4 
```

Word that work? And if it does work, is it possible to use a recursive php function to get 1 from 4?

something like:

```
getancestor.php?child=4
{
 $parent = (mysql_query to get $parent)
if($parent != null)
{
 getancestor.php?child=$parent;
else
{
 return;
}
} 
```

Please excuse my sloppy pseudo-code and thanks for the help!

# session - need to call session_start() before In order to fix an IE9 bug I had to put the 'DOCTYPE' declaration at the top of the page:

> ID：10117017
> 
> 赞同：0
> 
> 时间：
> 
> 标签：session, doctype

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:01:05.423

解决方案是从 require_once 'somefile.php' 切换；

至

require_once('somefile.php');

虽然 Firefox 和 Android 浏览器对第一种样式很好，但 IE9 有一个怪癖：它会忽略 div 的 inline-block 样式。

# visual-studio-2010 - C2086：“int WINGDIAPI”：打开场景图中的重新定义错误？

> ID：10117021
> 
> 赞同：5
> 
> 时间：2012-04-12T03:32:19.260
> 
> 标签：visual-studio-2010, build, openscenegraph

我已经解决了这个问题（从[这里](http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/2008-July/013769.html)）。只是把它放在这里，这样遇到错误的任何其他人都会找到一个更清晰的问题和答案，而不是必须去挖掘我从哪里得到它的网站。我很快就会自己回答这个问题。

遇到的错误是：

```
Error 13 error C2086: 'int APIENTRY' : redefinition C:\Program Files\Microsoft Visual Studio 8\VC\PlatformSDK\include\GL\gl.h 1153  
Error 10 error C2086: 'int WINGDIAPI' : redefinition C:\Program Files\Microsoft Visual Studio 8\VC\PlatformSDK\include\GL\gl.h 1153   
Error 3 error C2144: syntax error : 'void' should be preceded by ';' C:\Program Files\Microsoft Visual Studio 10\VC\include\GL\gl.h 1152 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T03:33:58.293

解决方法是：[从[本网站获得]](http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/2008-July/013769.html)

您需要将 WIN32 添加到项目中的定义中。在 Visual Studio 中，右键单击您的项目，转到 C/C++、预处理器，然后在预处理器定义字段中为调试和发布配置添加 WIN32。当您使用它时，还要为调试配置添加 _DEBUG 并为发布配置添加 NDEBUG ......
由于某种原因，默认的 VS 项目没有预处理器定义，即使这些，至少，应该几乎总是被使用......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T20:01:14.707

我的解决方案已经包含那些预处理器定义。MSDN建议你也加`#include <windows.h>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-02T21:42:25.787

我有一段代码在寻找 _WIN32 而不是 WIN32。

对于它的价值，流行的声音库在包含 windows.h 之前使用它：

```
#if defined(_WIN32) || defined(_WIN32) || defined(__WIN32__) || defined(_WIN64)
#include <windows.h>
#endif 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-06T10:02:09.417

我也想添加 CMake 解决方案。

您应该将 /D "WIN32" 添加到 CMAKE_CXX_FLAGS 中，这可以在高级条目中找到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-05T06:14:00.987

我最近在一个使用 Visual C++ 2019 的空项目中遇到了这个问题。

对我有用的是将 _WINDOWS 定义为预处理器指令而不是 WIN32。

# linux-kernel - Linux 设备驱动程序 - 导出 GPIO 时如何接收添加设备的通知？

> ID：10117022
> 
> 赞同：1
> 
> 时间：2012-04-12T03:32:23.997
> 
> 标签：linux-kernel, driver

这是我在 stackoverflow 上的第一篇文章，希望这个问题是合适的。

我正在为一个虚拟 GPIO 芯片编写一个 Linux 设备驱动程序，该芯片配置了一些用于输入和输出的引脚，其中一些是物理引脚的别名，而另一些是虚拟的。对于虚拟引脚，我有一个用户空间应用程序，它打算通过芯片设备和导出引脚的后门提供另一半虚拟化。例如，芯片将 GPIO 224 配置为可中断输入，目的是阻止来自用户空间的调用，例如`cat /sys/class/gpio/gpiochip224/Virtual Input/value`. 为此，我的方法是在名为“virtual”的“Virtual Input”中添加一个特殊的文件属性（例如）。对“cat”的调用将调用“gpio_chip.get”回调并在队列中等待。我的用户空间应用程序稍后将决定值何时更改，并将更新后的值写入“.../Virtual Input/virtual”，它会在内部更新值并解除等待。

我遇到的问题是将设备属性添加到导出的引脚。从命令行使用 导出引脚`echo "224" > /sys/class/gpio/export`，然后调用我的“gpio_chip.request”回调。这是我发现的唯一可能以同步方式添加属性的地方。但是，查看 GPIO 类驱动程序，我看到调用“request”回调，然后调用“gpio_export”，然后调用“device_add”，将设备（即引脚）添加到系统。换句话说，设备在请求处理程序的上下文中还不存在，我无法添加该属性。

我注意到似乎没有与导出的 pin 设备（也不是芯片）相关联的总线，并且试图创建我自己的总线，以便通过`gpio_export`调用接收通知`device_add`但没有任何运气。

任何将我指向正确方向的想法都值得赞赏。

# php - javascript 代码 - 包括 php

> ID：10117024
> 
> 赞同：0
> 
> 时间：2012-04-12T03:32:34.063
> 
> 标签：php, javascript, mysql

我的大部分 php 文件中都有一些 javascript 代码（每个文件中都有不同的 javascript 代码，但可能在多个文件中也使用了一些函数）将我所有页面中的所有 javascript 代码放在一个文件中是否是个好主意文件并且只在每个页面中包含这个文件（使用 include php 函数）？先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T03:36:53.390

如果 JavaScript 代码不是动态生成的，最好将其放入单独的`.js`文件中。这样，浏览器可以下载一次，然后跨多个 PHP 页面使用相同的缓存副本。

如果您将 JavaScript 代码复制到每个 PHP 文件中，浏览器将不得不下载这些重复的副本。而且 PHP 页面的输出通常是不可缓存的，这意味着每次重新加载同一页面时，浏览器都会重新下载该 JavaScript 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T03:38:14.293

Yes, you want to separate your JavaScript from your PHP. However, you don't want to use the PHP include() function to make use of your scripts. In the head of your DOM, just use a script tag with a src attribute.

```
<head>
  <script type="text/javascript" src='path/to/file.js'></script>
</head> 
```

# java - 将迭代器转换为列表

> ID：10117026
> 
> 赞同：264
> 
> 时间：2012-04-12T03:33:04.683
> 
> 标签：java, list, iterator

给定`Iterator<Element>`，我们如何方便地将其转换`Iterator`为 a `List<Element>`，以便我们可以`List`在其上使用 ' 操作，例如`get(index)`,`add(element)`等。

* * *

## 回答 #1

> 赞同：383
> 
> 时间：2012-06-11T06:34:08.740

更好地使用像[Guava](https://google.github.io/guava/releases/20.0/api/docs/com/google/common/collect/Lists.html#newArrayList-java.util.Iterator-)这样的库：

```
import com.google.common.collect.Lists;

Iterator<Element> myIterator = ... //some iterator
List<Element> myList = Lists.newArrayList(myIterator); 
```

另一个番石榴示例：

```
ImmutableList.copyOf(myIterator); 
```

或[Apache Commons 集合](http://commons.apache.org/collections/)：

```
import org.apache.commons.collections.IteratorUtils;

Iterator<Element> myIterator = ...//some iterator

List<Element> myList = IteratorUtils.toList(myIterator); 
```

* * *

## 回答 #2

> 赞同：268
> 
> 时间：2015-02-13T02:54:08.893

在 Java 8 中，您可以使用`forEachRemaining`已添加到`Iterator`接口的新方法：

```
List<Element> list = new ArrayList<>();
iterator.forEachRemaining(list::add); 
```

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2012-04-12T03:36:03.360

您可以像这样将迭代器复制到新列表中：

```
Iterator<String> iter = list.iterator();
List<String> copy = new ArrayList<String>();
while (iter.hasNext())
    copy.add(iter.next()); 
```

这是假设列表包含字符串。从迭代器重新创建列表确实没有更快的方法，您不得不手动遍历它并将每个元素复制到适当类型的新列表中。

**编辑 ：**

这是一种以类型安全的方式将迭代器复制到新列表的通用方法：

```
public static <T> List<T> copyIterator(Iterator<T> iter) {
    List<T> copy = new ArrayList<T>();
    while (iter.hasNext())
        copy.add(iter.next());
    return copy;
} 
```

像这样使用它：

```
List<String> list = Arrays.asList("1", "2", "3");
Iterator<String> iter = list.iterator();
List<String> copy = copyIterator(iter);
System.out.println(copy);
> [1, 2, 3] 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2016-12-29T18:44:04.580

[`Iterable`](https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html)注意和之间有区别[`Iterator`](https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html)。

如果您有**`Iterable`**，那么对于 Java 8，您可以使用以下解决方案：

```
Iterable<Element> iterable = createIterable();
List<Element> array = StreamSupport
    .stream(iterable.spliterator(), false)
    .collect(Collectors.toList()); 
```

据我所知，`Collectors.toList()`创建`ArrayList`实例。

实际上在我看来，它在一行中也看起来不错。
例如，如果您需要`List<Element>`从某个方法返回：

```
return StreamSupport.stream(iter.spliterator(), false).collect(Collectors.toList()); 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2013-03-20T06:59:39.203

您也可以[`IteratorUtils`](http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/IteratorUtils.html)从 Apache [commons-collections](http://commons.apache.org/proper/commons-collections/)使用，尽管它不支持泛型：

```
List list = IteratorUtils.toList(iterator); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-06-02T15:15:00.583

使用纯 Java 8 的非常简洁的解决方案[`java.util.stream`](http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html)：

```
public static <T> ArrayList<T> toArrayList(final Iterator<T> iterator) {
    return StreamSupport
        .stream(
            Spliterators
                .spliteratorUnknownSize(iterator, Spliterator.ORDERED), false)
        .collect(
                Collectors.toCollection(ArrayList::new)
    );
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2020-05-15T14:39:07.893

**在没有外部依赖**的情况下，这是一个使用 Streams 和 java 16 toList() 的单线器。

给定一个`Iterator<?> iterator`：

```
List<?> list = StreamSupport.stream(Spliterators.spliteratorUnknownSize(iterator, 0), false).toList(); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-04-12T03:36:53.247

```
List result = new ArrayList();
while (i.hasNext()){
    result.add(i.next());
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-20T17:36:55.923

[`StickyList`](http://static.javadoc.io/org.cactoos/cactoos/0.20.2/org/cactoos/list/StickyList.html)从[Cactoos](http://www.cactoos.org)尝试：

```
List<String> list = new StickyList<>(iterable); 
```

免责声明：我是开发人员之一。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-10-20T02:24:30.580

我只想指出一个看似显而易见但行不通的解决**方案**：

```
列表列表 = Stream.generate(iterator::next)
    .collect(Collectors.toList());

```

那是因为[`Stream#generate(Supplier<T>)`](//docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#generate-java.util.function.Supplier-)只能创建无限流，它不希望它的参数抛出[`NoSuchElementException`](//docs.oracle.com/javase/8/docs/api/java/util/NoSuchElementException.html)（这就是[`Iterator#next()`](//docs.oracle.com/javase/8/docs/api/java/util/Iterator.html#next--)最终会做的事情）。

如果您选择 Iterator→Stream→List 方式，则应使用[xehpuk 的答案。](//stackoverflow.com/a/23997880)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-08T17:11:23.787

使用谷歌[番石榴](http://code.google.com/p/guava-libraries/)！

```
Iterable<String> fieldsIterable = ...
List<String> fields = Lists.newArrayList(fieldsIterable); 
```

++

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-04-12T03:48:44.307

在这种情况下，如果您想要尽可能快的方式，那就`for loop`更好了。

迭代样本大小的迭代器，`10,000 runs`其中`40 ms`for 循环需要`2 ms`

```
 ArrayList<String> alist = new ArrayList<String>();  
        long start, end;  

        for (int i = 0; i < 1000000; i++) {  
            alist.add(String.valueOf(i));  
        }  

        ListIterator<String> it = alist.listIterator();      

        start = System.currentTimeMillis();  
        while (it.hasNext()) {  
            String s = it.next();  
        }  
        end = System.currentTimeMillis();  

        System.out.println("Iterator start: " + start + ", end: " + end + ", delta: "  
            + (end - start));  
        start = System.currentTimeMillis();  
        int ixx = 0;  
        for (int i = 0; i < 100000; i++) {  
            String s = alist.get(i);  
        }  

        System.out.println(ixx);  
        end = System.currentTimeMillis();  
        System.out.println("for loop start: " + start + ", end: " + end + ", delta: "  
            + (end - start)); 
```

这是假设列表包含字符串。

# javascript - 让 getElementByID 工作 html5

> ID：10117028
> 
> 赞同：0
> 
> 时间：2012-04-12T03:33:09.813
> 
> 标签：javascript, html, getelementbyid

好的，我已经在这个网页上工作了一个星期，并且碰壁了。除了让 getelementbyid 起作用之外，代码已经到位。当您在侧边栏中选择图像时，我正在尝试通过更改 javascript 源来更改框架 div 中的图像。我想知道的是我的代码中是否存在问题，或者该函数是否无法正常工作。

```
<head>
<title>Rivas2</title>
<script id="newset" src="sidescroll.js" type="text/javascript"></script>
<script type= "text/javascript">

function changesrc() {
var sets = document.getElementById('newset');   
switch (value) {
 case '1': sets.src = 'sidescroll.js'; break;
 case '2': sets.src = 'sidescroll2.js'; break;
      }
    }
     </script>
   <style type="text/css">
        body{
background-color:#66FFFF;
}
   .banner{
position:absolute; 
top: 15px; 
left: 300px;}
.sideb1{
position:absolute;
top: 120px;
left: 25px;
height: 530px;
width: 150px;
overflow: auto;}
.frame{
position:absolute; 
top: 120px; 
left: 400px;}   
  .scroll{
position: absolute;
top: 525px;
left: 400px;
}

  </style>
  </head>

  <div class="sideb1" >
    <input type = 'image' src = 'image3.jpg' onclick = 'changesrc(1)' width= "120"           height= "100" alt= " " /><br/> House 1<br/>
    <input type = 'image' src = 'image3.jpg' onclick = 'changesrc(2)' width= "120" height= "100" alt= " " /><br/> House 2<br/>
    <a href="rivas2.html" ><img src="image3.jpg" width= "120" height= "100" alt="" /> </a><br/> House 3<br/>
    <a href="rivas3.html" ><img src="image3.jpg" width= "120" height= "100" alt="" /> </a><br/> House 4<br/>
    <a href="rivas2.html" ><img src="image3.jpg" width= "120" height= "100" alt="" /> </a><br/> House 5<br/>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:39:16.303

构建函数时需要包含参数，试试这个：

```
function changesrc(value) {
    var sets=document.getElementById('newset');   
    switch(value) {
        case(1):
            sets.src='sidescroll.js';
            break;
        case(2):
        default:
            sets.src='sidescroll2.js';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T03:40:14.947

好吧，我看到你没有定义价值。试试这个

```
function changesrc(value) {
var sets = document.getElementById('newset');   
switch (value) {
 case '1': sets.src = 'sidescroll.js'; break;
 case '2': sets.src = 'sidescroll2.js'; break;
      }
    } 
```

你基本上忘了包括一个论点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T03:51:27.163

不要重复使用现有的脚本元素将脚本注入页面。使用新的脚本元素。

```
function changesrc(value) { 
    var sets = document.createElement("script");    
    switch (value) { 
        case '1': sets.src = 'sidescroll.js'; break; 
        case '2': sets.src = 'sidescroll2.js'; break; 
    } 
    document.body.appendChild(sets);
} 
```

# objective-c - Objective-C 中的转义引号

> ID：10117031
> 
> 赞同：8
> 
> 时间：2012-04-12T03:33:19.817
> 
> 标签：objective-c, ios, encoding, nsstring, escaping

我正在使用此代码片段对字符进行编码，以便对 POST 请求友好：

```
 NSString *unescaped = [textField text];
   NSString *escapedString = (__bridge_transfer NSString *)CFURLCreateStringByAddingPercentEscapes(
                                                                                  NULL,
                                                                                  (__bridge_retained CFStringRef)unescaped,
                                                                                  NULL,
                                                                                  (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                                                                  kCFStringEncodingUTF8); 
```

效果很好，但不添加转义引号：`"`

如何在IOS中转义引号？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T09:27:40.833

我需要从用户输入的 NSString 中获取`[textField text]`并确保如果字符串中有引号，它们会被正确转义以便通过 POST 语句发送。

我的解决方案是：

```
unescaped = [unescaped stringByReplacingOccurrencesOfString:@"\"" withString:@"\\\""]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T07:54:48.360

首先，你不想`__bridge_retained`在你的演员阵容中使用`CFStringRef`. 只需使用`__bridge`.

其次，您不必通过字符串替换手动转义引号。只需在调用时将引号字符添加到要引用的字符集中`CFURLCreateStringByAddingPercentEscapes()`。像这样：

```
NSString *unescaped = [textField text];
NSString *escapedString = CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(NULL,
                                                                                    (__bridge CFStringRef)unescaped,
                                                                                    NULL,
                                                                                    CFSTR("!*'();:@&=+$,/?%#[]\""),
                                                                                    kCFStringEncodingUTF8)); 
```

（除了在set里加了quote之外，我改成use`CFBridgingRelease()`而不是`__bridge_transfer`cast，因为我觉得更清晰。满足了所有CF的“Create”函数都需要一个对应的“Release”的感觉。另外，我改了use`@""`文字转换`CFStringRef`为文字`CFSTR("")`。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T03:41:53.710

引号要用 . 转义`\"`。

如：

```
(CFStringRef)@"I'm an \"example\"" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T03:38:01.717

尝试使用`\"`而不是`"`直接使用...

引号、斜线等特殊字符需要`\`使该字符删除其特殊功能。

# java - 项目可交付成果中的 .classpath 文件

> ID：10117032
> 
> 赞同：0
> 
> 时间：2012-04-12T03:33:28.443
> 
> 标签：java, eclipse, ant

我准备交付基于 ant 的项目，并且该 src 文件夹的最低要求以及所有源文件和 build.xml 对我来说在命令提示符下工作正常，但随后我在 eclipse 中看到我的项目，它有 2 个错误

1.  说明资源路径位置类型项目“Arcusys”缺少所需的源文件夹：“CustomerTest”Arcusys 构建路径构建路径问题
2.  在解决构建路径错误之前无法构建项目 Arcusys Unknown Java Problem

这些与 .classpath 有关，因为我的当前目录问题中没有 .classpath 文件。我怎样才能避免这个错误

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:00:11.367

Eclipse 中的 Java 项目需要一定数量的簿记。根据 Java 项目的特定类型（Java、插件开发、Groovy 等），您可能需要更多或更少的这些。

构建项目可能不一定需要相同的簿记信息 - 无论是由 ANT 还是由 Maven 完成 - 但仍然必须存在。ANT 和 Maven 都有自己的方式来表示相同的信息（`build.xml`和`pom.xml`），并且在某种程度上，不同形式之间的同步可以自动化......

Eclipse 中的 Java 项目需要以下簿记文件：

*   `.project`- Eclipse项目的基本信息，包括项目的“类型”，形式为“项目性质”和“建设者”
*   `.settings/*`- 多个文件形式的特定项目的首选项`.pref`（几乎与Java`.properties`文件相同）
*   `.classpath`- 以 JRE 版本、其他项目和特殊库（例如 JUnit）的依赖形式的构建信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:30:42.470

在 Eclipse 中进入 Project Properties 并在“Resource -> Linked Resource”下设置类路径。您还可以设置运行时或启动类路径变量。看起来您可能还有其他资源要链接

# c# - WPF中的虚拟键盘：模拟真实输入设备？

> ID：10117034
> 
> 赞同：4
> 
> 时间：2012-04-12T03:33:49.503
> 
> 标签：c#, wpf, button, keyboard, keyevent

我想在win7中创建一个简单的虚拟键盘

```
|---|---|---| 第一个块中的 9 个字符 (abcdefgijk)

|---|---|---|

|---|---|---|
```

有 9 个按钮，当单击第一个按钮时更改为另一个视图。

```
|---|---|---|
 美国广播公司   
|---|---|---|
 电子烟    
|---|---|---|
 伊克
```

现在我很困惑如何单击像按下键盘这样的按钮可以生成字符输出到另一个应用程序。我在用

```
System.Windows.Forms.SendKeys.SendWait(sendString); 
```

但它不起作用。我知道 sendString 是正确的，因为我认为它是`Console.WriteLine(sendString);`.

另一个问题是单击按钮时焦点不会变回按钮。

任何人都有如何实现这个键盘的解决方案？

谢谢！

感谢您的回复，实际上我已经添加了这些代码，当我多次单击按钮时它也有一些问题。当我单击按钮时，焦点也不起作用，它总是专注于按钮。在此示例中，它仅包含 2 个按钮。你能帮忙看看那些代码发现错误吗？很多人认为！！

```
namespace WpfApplication5
{
    public partial class UserControl1 : UserControl
    {
        [DllImport("user32.dll")]
        public static extern int SetWindowLong(IntPtr hWnd, int nIndex, IntPtr dwNewLong);

        [DllImport("user32.dll", SetLastError = true)]
        public static extern UInt32 GetWindowLong(IntPtr hWnd, int nIndex);

        private IInputElement focusedInputElement;
        private Window parentWindow;
        private List<Button> keyCollection = new List<Button>();

        public UserControl1(Window parent)
        {
           this.parentWindow = parent;
           this.setupKeyboardControl();
        }

        public UserControl1(IInputElement elementToFocusOn)
        {
            // set focus
            this.focusedInputElement = elementToFocusOn;
            // setup this control
            this.setupKeyboardControl();
        }

        private void setupKeyboardControl()
        {
            InitializeComponent();
            // add all keys to internal collection
            this.addAllKeysToInternalCollection();
            // install clicks
            this.installAllClickEventsForCollection(this.keyCollection);
        }

        private void addAllKeysToInternalCollection()
        {
            // itterate all panels
            // itterate all buttons
            // add to list
            Console.WriteLine("Run at here"); 
            this.keyCollection.Add(A);
            this.keyCollection.Add(B);
        }

        /// <summary>
        /// Install click events for all keys in a collection
        /// </summary>
        /// <param name="keysToInstall"></param>
        private void installAllClickEventsForCollection(List<Button> keysToInstall)
        {
            // itterate all
            foreach (Button buttonElement in keysToInstall)
            {
                // install click event
                buttonElement.Click += new RoutedEventHandler(buttonElement_Click);
            }
        }

        /* private void Window_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.Key == Key.A)
               A.RaiseEvent(new RoutedEventArgs(Button.ClickEvent));
            else if (e.Key == Key.B)
               B.RaiseEvent(new RoutedEventArgs(Button.ClickEvent));
        }*/

        void buttonElement_Click(object sender, RoutedEventArgs e)
        {
            // create variable for holding string
            String sendString = "";

            try
            {
                // stop all event handling
                e.Handled = true;

                // set sendstring to key
                sendString = ((Button)sender).CommandParameter.ToString();

                // if something to send
                if (!String.IsNullOrEmpty(sendString))
                {
                    // if sending a string
                    if (sendString.Length > 1)
                    {
                        // add {}
                        sendString = "{" + sendString + "}";
                    }

                    // if a focusable element has been specified
                    if (this.focusedInputElement != null)
                    {
                        Console.WriteLine("1",sendString);
                        // set keyboard focus
                        Keyboard.Focus(this.focusedInputElement);
                        // set normal focus
                        this.focusedInputElement.Focus();
                    }

                    // send key to simulate key press
                   // System.Windows.Forms.SendKeys.Send(sendString);

                   System.Windows.Forms.SendKeys.SendWait(sendString);
                    Console.WriteLine(sendString);

                }
            }
            catch (Exception)
            {
                // do nothing - not important for now
                Console.WriteLine("Could not send key press: {0}", sendString);
            }
        }

        private void UserControl_Loaded(object sender, RoutedEventArgs e)
        {
            // if we have specified a parent
            if (this.parentWindow != null)
            {
                // Get this window's handle
                IntPtr HWND = new WindowInteropHelper(this.parentWindow).Handle;
                Console.WriteLine("Run in UserControl load");
                // style of window?
                int GWL_EXSTYLE = (-20);
                // get - retrieves information about a specified window
                GetWindowLong(HWND, GWL_EXSTYLE);
                // set - changes the attribute of a specified window - I think this stops it being focused on
                SetWindowLong(HWND, GWL_EXSTYLE, (IntPtr)(0x8000000));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:21:20.400

最可靠的方法是使用 Win32 API

```
[DllImport("user32.dll")]
public static extern uint SendInput(uint nInputs, ref INPUT pInputs, int cbSize);

[DllImport("user32.dll", EntryPoint = "SendInput")]
public static extern uint SendInput(uint nInputs, InputKeys[] inputs, int cbSize); 
```

有一个很好的例子说明你想用 CodePlex 上的工作应用程序完成什么

[http://wosk.codeplex.com/](http://wosk.codeplex.com/ "CodePlex：屏幕键盘上的 WPF（Wosk）")

# ios - 是否可以控制为 MonoTouch.Dialog 中的事件触发的 EventHandler 的顺序？

> ID：10117039
> 
> 赞同：0
> 
> 时间：2012-04-12T03:34:14.853
> 
> 标签：ios, xamarin.ios, monotouch.dialog

我有两个“嵌套”DialogViewController——一个“视图”和一个“编辑”。两者都使用 StringElements 从内部数据结构呈现数据。在 Edit DVC 中，我挂钩 StringElement 的 Changed 事件以更新我的内部数据结构。我还挂钩了 Edit DVC 的 ViewDissapearing (sic) 事件以重新渲染 View DVC，并将编辑内容发送到云服务。

我的问题是在 ViewDissapearing 事件处理程序之后调用了 Changed 事件处理程序，因此我的内部数据结构没有及时更新。

设置 DVC 的代码如下所示：

```
 var root = RenderViewItem(ThisItem);            
    var dvc = new DialogViewController(root, true);

    // create an Edit button which pushes the edit view onto the nav stack
    dvc.NavigationItem.RightBarButtonItem = new UIBarButtonItem(UIBarButtonSystemItem.Edit, delegate {
        var editRoot = RenderEditItem(ThisItem, true /* render the list field */);
        editViewController = new DialogViewController(editRoot, true);
        editViewController.ViewDissapearing += (sender, e) => 
        { 
            // trigger a sync with the service when the view disappears                    
            App.ViewModel.SyncWithService(); 

            // reload the View page 
            dvc.BeginInvokeOnMainThread(() =>
            {
                var oldroot = root;
                root = RenderViewItem(ThisItem);
                dvc.Root = root;
                dvc.ReloadData();
                oldroot.Dispose();
            });
        };    
        controller.PushViewController(editViewController, true);
    });

    // push the "view item" view onto the nav stack
    controller.PushViewController(dvc, true); 
```

在 RenderEditItem() 内部，我根据内部数据结构添加 StringElements，并按照通常的方式添加 Changed EventHandler：

```
stringElement.Changed += delegate { /* change a data structure */ }; 
```

有没有办法让 Changed 事件处理程序在 ViewDissapearing 事件处理程序之前触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:45:01.193

好消息！MonoTouch.Dialog 5.2.11 版对引发 EntryElement.Changed 事件的方式进行了行为更改 - 现在每次击键都会引发此事件，而不是仅在发生焦点更改时引发。所以我的“竞争条件”不再发生，我现在能够消除 NSTimer 黑客。

此更改的一个相关好处是您不再需要调用 EntryElement.FetchValue() 来确保 EntryElement.Value 是最新的。

[http://docs.xamarin.com/ios/releases/MonoTouch_5/MonoTouch_5.2#11](http://docs.xamarin.com/ios/releases/MonoTouch_5/MonoTouch_5.2#11)了解更多信息。

# javascript - 更改jquery中的点击事件

> ID：10117041
> 
> 赞同：0
> 
> 时间：2012-04-12T03:34:29.377
> 
> 标签：javascript, jquery

我认为这似乎是一个很常见的问题，但由于我是 J Query 的新手，我无法理解其他解决方案，所以想提出我的问题并具体说明。

我有一个锚标签：

```
<a href="#" id="isActive" onclick="javascript: toggleThisDiv(this.id);" style="float: left;" title="Expand/Collapse">
<img src="arrow_down.gif" border="0">
</a> 
```

当我点击它时，它会调用隐藏现有 div 的 javascript 函数。现在，在此之后，我想更改锚标记的单击事件，以便当我再次单击同一个锚时，它会刷新页面。

非常感谢您提供任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:37:26.020

```
function toggleThisDiv(id) {
    // do your other stuff in this function

    document.getElementById(id).onclick=function() {
        location.reload(true);
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:38:09.980

```
document.getElementById("isActive").onclick = function(); 
```

# r - 从目录中读取多个文件，R

> ID：10117042
> 
> 赞同：3
> 
> 时间：2012-04-12T03:34:56.323
> 
> 标签：r

我在代码中的一步读取文本文件文件夹并将其转换为 dtm 时遇到了困难。问题是，由于某种原因，我的计算机只能间歇性地与目录中的文本文件建立连接。返回的错误是：

```
Error in file(con, "r") : cannot open the connection
In addition: Warning message:
In file(con, "r") :
  cannot open file '[file name]': No such file or directory 
```

但是，我可以在任何文本编辑器以及 python 中轻松打开这些文件。任何想法为什么我有时能够建立连接而不是其他人？我的代码如下：

```
files <- as.character(list.files(path="[file path]"))
readLines(files[1])  #here is where the error occurs, for example
n <- length(files) #this is my loop
subtitles <- character(n)
subtitle <- character(1)

for (i in 1:n){
   subtitle <- as.character(readLines(files[i]))
   subtitle <- iconv(subtitle, to="UTF8")
   subtitle <-  tolower(subtitle)
   subtitle <- as.character(paste(subtitle, collapse=" "))
   subtitles[i] <- subtitle[1]
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T04:35:34.810

`List.files`只给你文件名，而不是带有完整路径的文件名。尝试

```
files <- as.character(list.files(path="[file path]"))
readLines(paste("[file path]",.Platform$file.sep,files[1],sep="")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T04:24:43.550

```
directory <- "C://temp"  ## for example
filenames <- list.files(directory, pattern = "*.*", full.names = TRUE) 
```

# iphone - 如何避免隐藏导航栏时出现黑框？

> ID：10117043
> 
> 赞同：2
> 
> 时间：2012-04-12T03:34:57.933
> 
> 标签：iphone, objective-c, ios5, ios4, uinavigationbar

我有一个带有主页的应用程序是一个隐藏的导航栏，当我从带有导航栏的子页面返回到这个主页时，因为我将导航设置在主页方法中隐藏：-（void）viewWillAppear，我发现一个黑框会出现动画，如何避免呢？非常感谢！！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T03:42:26.650

Ok , I find the answer:

```
self.navigationController.view.backgroundColor = [UIColor redColor]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-03T14:08:37.113

这可以解决问题而不会破坏颜色，这可能导致导航控制器的颜色错误。

只需在 viewWillAppear 中将其设置为动画即可：)

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:YES];
    [self.navigationController setNavigationBarHidden:YES animated:YES];
} 
```

如果您使用导航控制器返回页面，请将 Animation 设置为 NO

```
- (IBAction)backButtonClicked:(id)sender {
    [self.navigationController setNavigationBarHidden:NO animated:NO];
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-14T11:35:14.847

如果在选项卡之间切换时发生在选项卡控制器应用程序中，这可能会对某人有所帮助

```
override func viewWillAppear(_ animated: Bool) {
            super.viewWillAppear(animated)
            self.navigationController?.setNavigationBarHidden(true, animated: true)
        }

override func viewWillDisappear(_ animated: Bool) {
            super.viewWillDisappear(animated)
            if self.navigationController?.visibleViewController != self {
                self.navigationController?.setNavigationBarHidden(false, animated: true)
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-18T04:11:20.193

**对于 Swift3.0**

在第一个视图控制器中

```
override func viewWillAppear(_ animated: Bool) {
     super.viewWillAppear(true)
     self.navigationController?.setNavigationBarHidden(true, animated: true)
    } 
```

在第二个 ViewController

```
func backButtonPressed() {
        self.navigationController?.setNavigationBarHidden(false, animated: false)
        self.navigationController?.popViewController(animated: true)
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-13T02:58:58.483

在调用后调用 layoutSubviews() 以隐藏或显示导航栏：

```
[self.navigationController.view layoutSubviews]; 
```

# ruby-on-rails - 覆盖设备注册创建方法

> ID：10117045
> 
> 赞同：17
> 
> 时间：2012-04-12T03:35:22.033
> 
> 标签：ruby-on-rails, devise, overriding, crud

我想在创建用户时专门设置一个字段。我有

```
class RegistrationsController < Devise::RegistrationsController
  def create
    super
    @user.tag_list = params[:tags]
  end
end 
```

我有传递标签参数的复选框，并且我在服务器日志中验证了标签参数正在传递。但是，当我在控制台中调用 @user.tag_list 时，我只会得到一个空白响应`[]`。

我觉得问题在于我对设计的创建方法的操作。我没有在任何地方明确设置@user，但不确定如何使用设计进行设置。有谁知道在使用设计时如何设置特定字段？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-10-27T19:56:18.787

对于在搜索如何覆盖设计方法时发现此问题的任何人的未来参考，大多数设计方法都接受一个块，因此类似这样的东西也应该可以工作：

```
class RegistrationsController < Devise::RegistrationsController
  def create
    super do
        resource.tag_list = params[:tags]
        resource.save
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-12T06:16:24.213

不要使用`super`调用 Devise::RegistrationsController 的创建操作，而是将其替换[为 Devise::RegistrationsController 的创建方法的实际代码](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb)

```
build_resource
resource.tag_list = params[:tags]   #******** here resource is user 
if resource.save
  if resource.active_for_authentication?
    set_flash_message :notice, :signed_up if is_navigational_format?
    sign_in(resource_name, resource)
    respond_with resource, :location => after_sign_up_path_for(resource)
  else
    set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
    expire_session_data_after_sign_in!
    respond_with resource, :location => after_inactive_sign_up_path_for(resource)
  end
else
  clean_up_passwords resource
  respond_with resource
end 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-08-18T20:59:04.283

如果不想重写 create 方法的整个代码，可以简单地在**Devise::RegistrationsController的受保护方法****:build_resource**中设置资源变量，该方法在资源保存之前调用。

 **```
protected 

# Called before resource.save
def build_resource(hash=nil)
  super(hash)
  resource.tag_list = params[:tags]
end 
```**

# ios - 在 iOS 上，有没有办法让某个单例对象上的所有操作都发生在它自己的专用线程中？

> ID：10117048
> 
> 赞同：1
> 
> 时间：2012-04-12T03:35:53.710
> 
> 标签：ios, multithreading, objective-c-blocks, nsthread, pjsip

我正在 iOS 上构建一个 VoIP 手机应用程序（使用 PJSIP 库），PJSIP 要求您注册访问它并管理其配置的线程，以实现线程安全。这意味着处理或管理对该库的调用不能由 GCD 处理，并且需要在主线程上（糟糕的解决方案，因为它会阻塞并且如果出现问题 UI 将不会绘制），或者创建自己的专用线程.

我在我的应用程序委托中创建了自己的专用线程和运行循环，并在其上执行了一些选择器，但它很混乱。我想将对当前会话的所有调用封装到我在启动时创建的单例对象中，并让所有这些调用发生在它们自己的线程中。

Apple 的文档有点稀疏，所以我试图弄清楚是否有更智能的方法来管理此 PJSIP 实例上的注册线程。见鬼，可能有一些我什至没有想到的事情。

我知道这更像是一个技术问题，但我很想看看人们提出了什么想法。

我已经在 NSThread 之上构建了一个类别，允许我在该特定线程上执行块，但这是一个丑陋丑陋的 hack。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:17:50.103

我可以为此想到一些解决方案。如果只有有限数量的方法，您可以为每个获取单例实例的方法创建一个静态包装器，然后在单线程上执行该方法。如果您希望它阻止调用线程，您可以选择每个方法。

我想到的另一个更优雅且可扩展性更好的选择是使用事件系统。您可以为每个方法定义一个事件，如果一个函数想要执行一个方法，它将触发该事件。如果您需要从事件中返回数据，您可以让调用者注册一个表明该方法已完成的事件。

想到的最终解决方案是创建一个代理对象，该对象将使用 forwardInvocation: 方法响应任何消息，并在单个线程上调用真正的单例实例上的选择器。（查看 Apple 的文档以获取更多信息：[转发](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtForwarding.html)）。这是最复杂的，但最终可能是最优雅的。这将允许在将来添加新功能，而无需进行任何额外的包装。

# android - 仅从联系人列表 Android 中获取电子邮件地址

> ID：10117049
> 
> 赞同：62
> 
> 时间：2012-04-12T03:35:55.370
> 
> 标签：android

我只想显示那些存在电子邮件地址的联系人姓名。否则，该联系人姓名不应显示在列表中。我怎样才能做到这一点？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-04-05T04:32:54.753

这是我提取电子邮件地址的超快速查询。它比其他答案建议的拉所有联系人列要快得多......

```
public ArrayList<String> getNameEmailDetails() {
    ArrayList<String> emlRecs = new ArrayList<String>();
    HashSet<String> emlRecsHS = new HashSet<String>();
    Context context = getActivity();
    ContentResolver cr = context.getContentResolver();
    String[] PROJECTION = new String[] { ContactsContract.RawContacts._ID, 
            ContactsContract.Contacts.DISPLAY_NAME,
            ContactsContract.Contacts.PHOTO_ID,
            ContactsContract.CommonDataKinds.Email.DATA, 
            ContactsContract.CommonDataKinds.Photo.CONTACT_ID };
    String order = "CASE WHEN " 
            + ContactsContract.Contacts.DISPLAY_NAME 
            + " NOT LIKE '%@%' THEN 1 ELSE 2 END, " 
            + ContactsContract.Contacts.DISPLAY_NAME 
            + ", " 
            + ContactsContract.CommonDataKinds.Email.DATA
            + " COLLATE NOCASE";
    String filter = ContactsContract.CommonDataKinds.Email.DATA + " NOT LIKE ''";
    Cursor cur = cr.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, PROJECTION, filter, null, order);
    if (cur.moveToFirst()) {
        do {
            // names comes in hand sometimes
            String name = cur.getString(1);
            String emlAddr = cur.getString(3);

            // keep unique only
            if (emlRecsHS.add(emlAddr.toLowerCase())) {
                emlRecs.add(emlAddr);
            }
        } while (cur.moveToNext());
    }

    cur.close();
    return emlRecs;
} 
```

我尝试了“Agarwal Shankar”提供的代码，但在我的测试设备上获取联系人需要大约 4 秒，而此代码大约需要 0.04 秒。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2012-04-12T05:14:36.523

```
public ArrayList<String> getNameEmailDetails(){
        ArrayList<String> names = new ArrayList<String>();
        ContentResolver cr = getContentResolver();
        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);
        if (cur.getCount() > 0) {
            while (cur.moveToNext()) {
                String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                Cursor cur1 = cr.query( 
                        ContactsContract.CommonDataKinds.Email.CONTENT_URI, null,
                        ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", 
                                new String[]{id}, null); 
                while (cur1.moveToNext()) { 
                    //to get the contact names
                    String name=cur1.getString(cur1.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                    Log.e("Name :", name);
                    String email = cur1.getString(cur1.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                    Log.e("Email", email);
                    if(email!=null){
                        names.add(name);
                    }
                } 
                cur1.close();
            }
        }
        return names;
    } 
```

上述方法返回具有电子邮件 ID 的名称数组列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T06:51:14.550

```
if (cur.getCount() > 0) {
          while (cur.moveToNext()) {
              String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
              String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

              Cursor emailCur = getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI,null,ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", new String[]{id},null); 
              while (emailCur.moveToNext()) { 
                      String email = emailCur.getString( emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                      Log.e("Email",name+" "+email);
                  } 
                  emailCur.close();
              }

          } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-18T09:24:20.077

另一种解决方案。

```
private static final Uri URI_CONTACT_DATA = ContactsContract.Data.CONTENT_URI;
private static final String COLUMN_EMAIL = ContactsContract.CommonDataKinds.Email.ADDRESS;
private static final String COLUMN_DISPLAY_NAME = ContactsContract.Contacts.DISPLAY_NAME_PRIMARY;
private static final String COLUMN_MIMETYPE = ContactsContract.Data.MIMETYPE;

private static final String[] PROJECTION = {
        COLUMN_DISPLAY_NAME,
        COLUMN_EMAIL,
        COLUMN_MIMETYPE
};

private Cursor getCursor() {
    ContentResolver resolver = context.getContentResolver();
    String selection = COLUMN_MIMETYPE + "=?";
    final String[] selectionArgs = {ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE};
    return resolver.query(URI_CONTACT_DATA, PROJECTION, selection, selectionArgs, null);
} 
```

问题是表在`ContactsContract.Contacts.CONTENT_URI`保存**整个联系人数据库**。这包括电话号码、电子邮件、组织，甚至是完全自定义的数据，因此如果不使用`ContactsContract.Data.MIMETYPE`. 此数据库中的一行包含一个与某个帐户相关的值（或多个值，它有 15 个通用列），因此您可能需要自己对它们进行分组。我需要这个来自动完成电子邮件，所以格式（每行的电子邮件）是完美的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T03:39:24.043

如果您已经可以获取联系人及其电子邮件地址（如果存在），为什么不从您的列表中删除没有电子邮件地址的联系人？

有关 Android 联系人 API 的更多信息，请参阅[此处](http://developer.android.com/resources/articles/contacts.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-22T05:33:34.863

这是从联系人列表中获取联系人电子邮件 ID 的简单方法。您需要在以下方法中传递用户的联系人 ID，如果存在，它将返回您的电子邮件 ID

```
 public String getEmail(String contactId) {
    String emailStr = "";
    final String[] projection = new String[]{ContactsContract.CommonDataKinds.Email.DATA,
            ContactsContract.CommonDataKinds.Email.TYPE};

    Cursor emailq = managedQuery(ContactsContract.CommonDataKinds.Email.CONTENT_URI, projection, ContactsContract.Data.CONTACT_ID + "=?", new String[]{contactId}, null);

    if (emailq.moveToFirst()) {
        final int contactEmailColumnIndex = emailq.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA);

        while (!emailq.isAfterLast()) {
            emailStr = emailStr + emailq.getString(contactEmailColumnIndex) + ";";
            emailq.moveToNext();
        }
    }
    return emailStr;
} 
```

此外，如果您想了解如何在您的应用程序中获取联系人列表，请点击此链接：[在应用程序 android - trinitytuts 中显示联系人列表](https://trinitytuts.com/get-contact-list-and-show-in-custom-listview-android/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-17T00:13:37.540

声明一个全局变量

```
// Hash Maps
Map<String, String> nameEmailMap = new HashMap<String, String>(); 
```

然后使用下面的函数

```
private void getEmailIDs() {

    Cursor emails = getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null, null, null, null);

    // Loop Through All The Emails
    while (emails.moveToNext()) {

        String name = emails.getString(emails.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        String email = emails.getString(emails.getColumnIndex(ContactsContract.CommonDataKinds.Email.ADDRESS));

        // Enter Into Hash Map
        nameEmailMap.put(email, name);

    }

    // Get The Contents of Hash Map in Log
    for (Map.Entry<String, String> entry : nameEmailMap.entrySet()) {
        String key = entry.getKey();
        Log.d(TAG, "Email :" + key);
        String value = entry.getValue();
        Log.d(TAG, "Name :" + value);
    }
    emails.close();
} 
```

请记住，在上面的示例中，键是电子邮件，值是名称，因此请阅读您的内容，例如 mahaXXXX@gmail.com->Mahatma Gandhi 而不是 Mahatma Gandhi->mahaXXXX@gmail.com

# c++ - 从链表的结构部分写入二进制文件

> ID：10117063
> 
> 赞同：0
> 
> 时间：2012-04-12T03:38:26.110
> 
> 标签：c++, struct, binaryfiles, writing

我试图了解如何正确地将数据正确写入二进制文件。正在写入数据，但是当回读以进行测试时，很明显我没有正确写入。数据的读/写如下。

Unsigned Char 告诉下一个字符串有多长，然后写入一个字符串，然后写入一个整数 ID。（或长度 studentname student_id ）。以下是将数据保存到文件的 printList 函数。

```
void printList(struct node * nptr, string filename){
  ofstream myfile;
  myfile.open( filename.c_str(), ios::binary );

  while(nptr){

  myfile.write( (char*) &nptr->data.len, sizeof( unsigned char ) );
  myfile.write( (char*) nptr->data.name, len * sizeof(char) );
  myfile.write( (char*) &nptr->data.id, sizeof(int) );

 //myfile.write( (const char*) &nptr->data, sizeof( Student ) );

 nptr = nptr->next;
}

myfile.close();

} 
```

这是数据存储在链接列表中的学生结构：

```
struct node{
Student data;
struct node* next;
};

//=== Student struct===//
 struct Student{
    unsigned char len;
char* name;
int id;
};
//====================// 
```

这是我为读取二进制文件而编写的 loadbin 文件，我再次搞砸了，我已经阅读并观看了大量关于此的教程。我真的很难过。

```
unsigned char len;
char* name;
int id;

int main( int argc, char* argv[] )
{
    if( argc > 1 )
    {
        ifstream f( argv[1] , ios::binary);

        while( !f.eof() )
        {
            f.read( (char*) &len , sizeof( unsigned char ) );

            if( f.eof() )
                break;

        name = new char[len+1];
        name[len+1] = '\0';

        f.read( (char*) name , len * sizeof( char ) );
        f.read( (char*) &id , sizeof( int ) );

        cout << (int)len << " " << name << " " << id 
                                            << "\n";
        }
    }

   else
        cout << "\nToo few arguments.\n";

} 
```

更多信息，我无法更改文件被读回的方式。修复必须来自我写作的时候。我只是把它包括在内，以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:56:31.130

*首先，*我什至不确定这应该编译，除非你有一个`len`变量浮动在某个地方，比如在你的最后一个代码段中：

```
myfile.write( (char*) nptr->data.name, len * sizeof(char) ); // len, what len? 
```

由于`sizeof(char)`始终为 1，并且我更喜欢显式表达式，因此我将三个输出行重写为：

```
myfile.write ((const char *)(&(nptr->data.len)), 1);
myfile.write ((const char *)(nptr->data.name), nptr->data.len);
myfile.write ((const char *)(&(nptr->data.id)), sizeof(int)); 
```

一个完整的程序展示了如何使用它，足够相似，它会有所帮助，但又足够不同，以至于你不能把它作为你自己的工作提交:-)

```
#include <iostream>
#include <fstream>

struct Student {
    unsigned char len;
    char *name;
    int id;
};

struct node {
    Student data;
    struct node *next;
};

int main (void) {
    // Create dummy list, two nodes.

    node *temp = new node();
    temp->data.len = 6;
    temp->data.name = (char *)"diablo";
    temp->data.id = 2;
    temp->next = NULL;

    node *shortList = new node();
    shortList->data.len = 3;
    shortList->data.name = (char *)"pax";
    shortList->data.id = 1;
    shortList->next = temp;

    // Write it out.

    std::ofstream myfile;
    myfile.open ("xyzzy.bin", std::ios::binary);
    node *curr = shortList;
    while (curr != NULL) {
        myfile.write ((const char *)(&(curr->data.len)), 1);
        myfile.write ((const char *)(curr->data.name), curr->data.len);
        myfile.write ((const char *)(&(curr->data.id)), sizeof(int));
        curr = curr->next;
    }
    myfile.close ();

    return 0;
} 
```

如果你运行那个程序然后做一个十六进制转储，你会得到：

```
addr  +0 +1 +2 +3 +4 +5 +6 +7 +8 +9 +a +b +c +d +e +f  0123456789abcdef
----  -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --  ----------------
0000  03 70 61 78 01 00 00 00 06 64 69 61 62 6c 6f 02  .pax.....diablo.
0010  00 00 00                                         ...
0013 
```

我认为这与您想要的格式相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:04:00.380

如果对文件的内容没有任何线索，就很难调试，但要尽量确保事情绝对清楚。

而不是

```
 myfile.write( (char*) &nptr->data.len, sizeof( unsigned char ) );
  myfile.write( (char*) nptr->data.name, len * sizeof(char) );
  myfile.write( (char*) &nptr->data.id, sizeof(int) ); 
```

编写起来不太容易出错（我挤出了空格以保持在行长之内）：

```
 myfile.write((char*)&nptr->data.len, sizeof(nptr->data.len) );
  myfile.write((char*)nptr->data.name, nptr->data.len*sizeof(nptr->data.name[0]));
  myfile.write((char*)&nptr->data.id, sizeof(nptr->data.id) ); 
```

并在读回数据时使用类似的表达式来解包数据。在变量上使用 sizeof 比使用类型名称更健壮。

# php - how to save the array data into mysql database

> ID：10117065
> 
> 赞同：0
> 
> 时间：2012-04-12T03:38:59.720
> 
> 标签：php, arrays

stated array getting set of combinations....please help me and let me know how to save list of record into mysql database.....database contains three fields (set1 set2 set3)...

regards,

```
$array1 = array('rough', 'smooth', 'coarse'); 
$array2 = array('shiny', 'matte', 'rough'); 
$array3 = array('very large', 'large', 'medium', 'small'); 

$array=array_merge($array1,$array2,$array3); 

$combinations=array(); 
for($x=0;$x<(count($array)-2);$x++) { 
$a=$array[$x]; 
for ($y=$x+1;$y<count($array);$y++) { 
    $b=$array[$y]; 
    for ($z=$y+1;$z<count($array);$z++) { 
        $c=$array[$z]; 
        $combinations[]="$a, $b, $c"; 
    } 
} 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:42:40.313

The easiest way is to just use `json_encode()` to turn the array into JSON before storing. This way the data can be available to other processes and languages with minimal hassle.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T03:48:57.907

您可以使用[serialize](http://php.net/manual/en/function.serialize.php)函数将数组转换为字符串。

检索到后，您可以使用[unserialize](http://php.net/manual/en/function.unserialize.php)函数将其转回数组。

# mysql - mySQL stick with fulltext search or go with alternative?

> ID：10117069
> 
> 赞同：1
> 
> 时间：2012-04-12T03:39:32.713
> 
> 标签：mysql, full-text-search

I'd like some suggestions on how to best handle this. I've got a table with about 2500 records (not many I know and only growing at about 500 per year). It has 3 text fields I currently use fulltext search on. The minimum character limit is causing problems though.

Would yall suggest just reducing the minimum character limit to accept 3 character words (which is most of the problem) and continue using fulltext searching or should I look into other options like Sphinx or Lucene? Basically I'm unfamiliar with sphinx/lucene/etc and don't know if they would offer me any big advantages on searching with the type and amount of data I'm searching through.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:53:59.060

目前，我建议您降低最小字符数限制。但是，您应该开始研究 Lucene/SOLR，因为它们提供了更多好处，例如分面结果和空间搜索（从 3.5+ 开始），但是加速时间可能会很痛苦。如果您现在开始研究和练习 SOLR，那么当需要它的新功能请求出现时，您将准备好进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:37:55.400

我建议您看一下基于 lucene 的搜索引擎[OpenSearchServer 。正如您所描述的，您的数据在 MYSQL 中，OpenSearchServer 具有一个功能，您可以直接从 MYSQL 和 POSTGRESQL 数据库导入数据。](http://www.open-search-server.com/open-search-server-oss)请查看文档以将值从 MYSQL 导入到 OpenSearchServer 索引。[http://www.open-search-server.com/documentation/index.php/User_guide__-_Database](http://www.open-search-server.com/documentation/index.php/User_guide_-_Database)

# iphone - 如何跟踪当前安排的 UILocalNotifications

> ID：10117071
> 
> 赞同：1
> 
> 时间：2012-04-12T03:40:04.930
> 
> 标签：iphone, uilocalnotification

```
MyObject : NSObject
@property (nonatomic, strong) NSString *name;
@property (nonatomic, strong) NSArray *notificationsArray; 
```

我的 tableView 中有一个 MyObjects 数组，可以针对名称、通知时间等进行编辑。目前，我已经设置好了，所以当用户按下保存时，当前的 MyObject 会保存到我的 DataManager 的 myObjectArray 中。

```
DataManager : NSObject
@property (nonatomic, strong) NSMutableArray *myObjectArray; 
```

我在 DataManager 中调用我的方法来循环通过该 MyObject 实例来安排该 MyObject 的通知。

我认为这没问题，直到用户单击其中一个 MyObjects 来编辑时间，然后我只需要重新安排该对象的通知。我知道你可以得到

```
[[UIApplication sharedApplication] scheduledNotifications]; 
```

但由此，我不知道哪个通知针对哪个对象。所以在这种情况下，最好取消我整个应用程序的所有通知，然后循环遍历 DataManager 中的 myObjectArray，针对每个 MyObject 实例，并以这种方式为每个对象安排通知？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T05:01:39.590

您可以使用 userInfo 属性将自定义数据与通知相关联。像这样构建它：

```
UILocalNotification *notification = [[UILocalNotification alloc] init];
notification.userInfo = [NSDictionary dictionaryWithObject:@"myNotificationName" forKey:@"name"]; 
```

然后像这样查看它：

```
 - (UILocalNotification *)notificationNamed:(NSString *)name {

    for (UILocalNotification *notification in [[UIApplication sharedApplication] scheduledLocalNotifications]) {
        NSString *notificationName = [notification.userInfo valueForKey:@"name"]; 
        if ([notificationName isEqualToString:name])
            return notification;
    }
    return nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:01:15.217

使用类的`userInfo`（`NSDictionary`类型）属性`UILocalNotification`来区分通知

看到这个[链接](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)

# python - how to use initializer to set up my multiprocess pool?

> ID：10117073
> 
> 赞同：78
> 
> 时间：2012-04-12T03:40:18.487
> 
> 标签：python, multiprocessing

I'm trying to use the multiprocess Pool object. I'd like each process to open a database connection when it starts, then use that connection to process the data that is passed in. (Rather than opening and closing the connection for each bit of data.) This seems like what the initializer is for, but I can't wrap my head around how the worker and the initializer communicate. So I have something like this:

```
def get_cursor():
  return psycopg2.connect(...).cursor()

def process_data(data):
   # here I'd like to have the cursor so that I can do things with the data

if __name__ == "__main__":
  pool = Pool(initializer=get_cursor, initargs=())
  pool.map(process_data, get_some_data_iterator()) 
```

how do I (or do I) get the cursor back from get_cursor() into the process_data()?

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-04-12T06:10:29.700

初始化函数是这样调用的：

```
def worker(...):
    ...
    if initializer is not None:
        initializer(*args) 
```

所以在任何地方都没有保存返回值。你可能认为这注定了你的命运，但不是！每个工人都在一个单独的进程中。因此，您可以使用普通`global`变量。

这并不完全漂亮，但它有效：

```
cursor = None
def set_global_cursor(...):
    global cursor
    cursor = ... 
```

现在你可以`cursor`在你的`process_data`函数中使用了。每个单独进程内的`cursor`变量与所有其他进程是分开的，因此它们不会相互踩踏。

（我不知道是否`psycopg2`有不同的方法来处理这个不涉及`multiprocessing`首先使用的方法；这是对`multiprocessing`模块一般问题的一般回答。）

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-06-13T07:19:16.947

您还可以将函数发送到初始化程序并在其中创建连接。然后将光标添加到函数中。

```
def init_worker(function):
    function.cursor = db.conn() 
```

现在您可以通过 function.cursor 访问数据库，而无需使用全局变量，例如：

```
def use_db(i):
    print(use_db.cursor) #process local
pool = Pool(initializer=init_worker, initargs=(use_db,))
pool.map(use_db, range(10)) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-05-14T23:26:36.783

torek 已经很好地解释了为什么初始化程序在这种情况下不起作用。但是，我个人不是**全局变量**的粉丝，所以我想在这里粘贴另一个解决方案。

这个想法是使用一个类来包装函数并使用“全局”变量初始化该类。

```
class Processor(object):
  """Process the data and save it to database."""

  def __init__(self, credentials):
    """Initialize the class with 'global' variables"""
    self.cursor = psycopg2.connect(credentials).cursor()

  def __call__(self, data):
    """Do something with the cursor and data"""
    self.cursor.find(data.key) 
```

然后打电话给

```
p = Pool(5)
p.map(Processor(credentials), list_of_data) 
```

所以第一个参数用凭证初始化类，返回一个类的实例，用数据映射调用实例。

虽然这不像全局变量解决方案那样简单，但我强烈建议避免使用全局变量并以某种安全的方式封装变量。（我真的希望他们有一天能支持 lambda 表达式，这会让事情变得更容易......）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-04-04T09:07:27.537

鉴于在初始化程序中定义全局变量通常是不可取的，我们可以避免使用它们，也可以避免在每次调用中重复昂贵的初始化，并在每个子进程中进行简单的缓存：

```
from functools import lru_cache
from multiprocessing.pool import Pool
from time import sleep

@lru_cache(maxsize=None)
def _initializer(a, b):
    print(f'Initialized with {a}, {b}')

def _pool_func(a, b, i):
    _initializer(a, b)
    sleep(1)
    print(f'got {i}')

arg_a = 1
arg_b = 2

with Pool(processes=5) as pool:
    pool.starmap(_pool_func, ((arg_a, arg_b, i) for i in range(0, 20))) 
```

输出：

```
Initialized with 1, 2
Initialized with 1, 2
Initialized with 1, 2
Initialized with 1, 2
Initialized with 1, 2
got 1
got 0
got 4
got 2
got 3
got 5
got 7
got 8
got 6
got 9
got 10
got 11
got 12
got 14
got 13
got 15
got 16
got 17
got 18
got 19 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-07T08:53:03.093

如果您的第一个答案不清楚，这里是运行的片段：

```
import multiprocessing
n_proc = 5
cursor = [ 0 for _ in range(n_proc)]
def set_global_cursor():
    global cursor
    cursor[multiprocessing.current_process()._identity[0]-1] = 1

def process_data(data):
    print(cursor)
    return data**2

pool = multiprocessing.Pool(processes=n_proc,initializer=set_global_cursor)
pool.map(process_data, list(range(10))) 
```

输出：

```
[1, 0, 0, 0, 0]
[0, 0, 1, 0, 0]
[0, 1, 0, 0, 0]
[0, 0, 1, 0, 0]
[0, 0, 0, 0, 1]
[1, 0, 0, 0, 0]
[0, 0, 1, 0, 0]
[0, 0, 1, 0, 0]
[0, 0, 0, 1, 0]
[0, 1, 0, 0, 0] 
```

# php - 便携式 PHP 调试

> ID：10117074
> 
> 赞同：0
> 
> 时间：2012-04-12T03:40:43.123
> 
> 标签：php, netbeans, xampp, xdebug, portable-applications

我正在将 XAMPP Lite 用于 USB 驱动器。我还发现了功能齐全的 Netbeans 便携版。

问题是由于路径问题我无法安装 XDebug。例如。在我的本地 PC 服务器`PHP.ini`配置文件上看起来像这样

```
[zend]
zend_extension = "C:\Program Files (x86)\PHP\ext\php_xdebug.dll"
xdebug.remote_enable=On
xdebug.remote_host="localhost"
xdebug.remote_port=9000
xdebug.remote_handler="dbgp"
xdebug.profiler_enable = On 
xdebug.profiler_output_dir = C:\Windows\temp 
xdebug.dump_globals=On 
xdebug.show_exception_trace=On 
xdebug.collect_params=4 
```

如您所见，所有路径都是绝对的；我的意思是驱动器号。但我不能为 USB 闪存驱动器编写绝对路径。

我的问题是：

1.  有什么方法可以在 USB 闪存驱动器上使用 Xammp Lite 进行 xDebug 工作？
2.  任何可移植的替代调试器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:47:22.713

您最好的选择可能是有一个小批处理脚本，以便在 Windows 中加载时自动分配相同的驱动器号。您可以从 USB 驱动器本身自动运行它 - 使其完全便携。

您的脚本应如下所示：

```
@echo off

set NewLetter=X

@REM Find the (USB) drive with the flagfile "USB.root" and change its drive letter to "%NewLetter%"

@REM Abort if %NewLetter% already exist
if exist %NewLetter%: goto END_USB_DRIVE

if not exist "%SystemRoot%\System32\DISKPART.EXE" goto END_USB_DRIVE

@REM Find the drive with the flag file and set %_USBroot% to the old letter
for %%i in (c d e f g h i j k l m n o p q r s t u v w y z) do (
if exist %%i:\USB.root set _USBroot=%%i:
)
@REM Abort if no Drive with the flag file has been found
if "%_USBroot%" == "" goto END_USB_DRIVE

@REM Create the script file for DiskPart.exe on the USB-drive
echo select volume %_USBroot<> "%_USBroot%\ChangeDrvLetter.txt"
echo assign letter=%NewLetter<>> "%_USBroot%\ChangeDrvLetter.txt"

@REM Do the change -> %NewLetter%
DISKPART /S "%_USBroot%\ChangeDrvLetter.txt"
if exist "%NewLetter%:\ChangeDrvLetter.txt" del "%NewLetter%:\ChangeDrvLetter.txt"

:END_USB_DRIVE 
```

上面的例子是从这里提取的——你还会在那里找到其他几个例子：[http ://www.techrepublic.com/forum/questions/101-220894/force-thumb-drive-or-flash-drive - 每次到同一个驱动器号](http://www.techrepublic.com/forum/questions/101-220894/force-thumb-drive-or-flash-drive-to-same-drive-letter-each-time)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T15:25:16.987

相对路径没有解决你的问题吗？

> zend_extension = "\PHP\ext\php_xdebug.dll"
> 
> xdebug.profiler_output_dir = \temp

# c# - 如何异步调用方法

> ID：10117075
> 
> 赞同：4
> 
> 时间：2012-04-12T03:41:10.280
> 
> 标签：c#, asynchronous

我试过关注这个链接[异步调用](http://support.microsoft.com/kb/315582)，但有些类已经过时了。
所以我想为我的项目提供一个准确的答案。

```
public class RegisterInfo
{
    public bool Register(UserInfo info)
    {
        try
        {
            using (mydatabase db = new mydatabase())
            {
                userinfotable uinfo = new userinfotable();
                uinfo.Name = info.Name;
                uinfo.Age = info.Age;
                uinfo.Address = info.Address;

                db.userinfotables.AddObject(uinfo);
                db.SaveChanges();

                // Should be called asynchronously
                Utility.SendEmail(info); // this tooks 5 to 10 seconds or more.

                return true;
            }
        }
        catch { return false; }
    }
} 

public class UserInfo
{
    public UserInfo() { }

    public string Name { get; set; }
    public int Age { get; set; }
    public string Address { get; set; }
}  

public class Utility
{
    public static bool SendEmail(UserInfo info)
    {
        MailMessage compose = SomeClassThatComposeMessage(info);
        return SendEmail(compose);
    }

    private static bool SendEmail(MailMessage mail)
    {
        try
        {
            SmtpClient client = new SmtpClient();
            client.Host = "smtp.something.com";
            client.Port = 123;
            client.Credentials = new System.Net.NetworkCredential("username@domainserver.com", "password");
            client.EnableSsl = true;

            ServicePointManager.ServerCertificateValidationCallback = new RemoteCertificateValidationCallback(ValidateServerCertificate);
            client.Send(mail);

            return true;
        }
        catch { return false; }
    }
} 
```

请看`Register`方法。保存数据后，我不想等待发送邮件。如果可能的话，我想在其他线程上处理邮件的发送，这样用户就不会等待更长的时间。
我不需要知道邮件是否发送成功。
希望你能明白我的意思。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T03:43:47.480

使用[`Thread`](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)：

```
new Thread(() => Utility.SendEmail(info)).Start(); 
```

使用[`ThreadPool`](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem.aspx)：

```
ThreadPool.QueueUserWorkItem(s => Utility.SendEmail(info)); 
```

使用[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)：

```
Task.Factory.StartNew(() => Utility.SendEmail(info)); 
```

*当然`Thread`和`ThreadPool`需要`using System.Threading`同时`Task`需要`using System.Threading.Tasks`*

* * *

正如[David Anderson](https://stackoverflow.com/a/10117132/635634)所说，SmtpClient 已经支持[异步发送](http://msdn.microsoft.com/en-us/library/x5x13z6h.aspx) ^(（我可能应该注意函数的内容而不是回答问题）)，所以从技术上讲，您可以使用它来处理发送，尽管它不会卸载处理你的整个方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T03:49:36.160

SmtpClient 已经有一个[SendAsync](http://msdn.microsoft.com/en-us/library/x5x13z6h.aspx)方法。您不需要编写自己的异步代码来执行此操作。

@Comment 关于 SmtpClient 在 ASP.NET 中不能开箱即用：
这绝对不是真的，它工作得很好并且是推荐的 API。但是，您必须了解[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)以及线程在服务器上的行为方式。否则没有理由不使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T04:24:48.390

或使用[Async CTP](http://msdn.microsoft.com/en-us/library/hh300224%28VS.110%29.aspx)。

```
public async Task<bool> Register(UserInfo info)
{
    try
    {
        using (mydatabase db = new mydatabase())
        {
            userinfotable uinfo = new userinfotable();
            uinfo.Name = info.Name;
            uinfo.Age = info.Age;
            uinfo.Address = info.Address;

            db.userinfotables.AddObject(uinfo);
            db.SaveChanges();

            //Wait for task to finish asynchronously
            await Utility.SendEmail(info);

            return true;
        }
    }
    catch { return false; }
}

private Task SendEmail(MailMessage mail)
{
    SmtpClient client = new SmtpClient();
    client.Host = "smtp.something.com";
    client.Port = 123;
    client.Credentials = new System.Net.NetworkCredential("username@domainserver.com", "password");
    client.EnableSsl = true;

    ServicePointManager.ServerCertificateValidationCallback = new RemoteCertificateValidationCallback(ValidateServerCertificate);

    //The smtp SendTaskAsync is an extension method when using Async CTP
    return client.SendTaskAsync("from", "recipients", "subject", "body");
} 
```

您的原始代码中也存在错误。当在 SendEmail 函数中抛出异常时，它会返回 false，但在 register 函数中它仍然会返回 true。假设 bool 表示成功或失败。

# android - NetBeans: Android project to use external jar?

> ID：10117076
> 
> 赞同：0
> 
> 时间：2012-04-12T03:41:18.573
> 
> 标签：android, netbeans

I'm a fresher in Android(also Java and NetBeans) dev. :)
I've imported ksoap2 to handle WebServices staffs, it's fine when building the project, but failed to run in AVD, below is the exceptions segments:

> *E/dalvikvm( 353): Could not find class 'org.ksoap2.serialization.SoapObject', referenced from method com.iBest.Mobile.Login.authUser W/dalvikvm( 353): VFY: unable to resolve new-instance 88 (Lorg/ksoap2/serialization/SoapObject;) in Lcom/iBest/Mobile/Login; W/dalvikvm( 353): threadid=1: thread exiting with uncaught exception (group=0x40015560) E/AndroidRuntime( 353): FATAL EXCEPTION: main E/AndroidRuntime( 353): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject E/AndroidRuntime( 353): at com.iBest.Mobile.Login.authUser(Login.java:58) E/AndroidRuntime( 353): at com.iBest.Mobile.Login$1.onClick(Login.java:47)*

I've put the `jar(ksoap2-android-assembly-2.4-jar-with-dependencies.jar)` in folder `libs`

What else needed I do? thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:47:57.660

从您的项目中引用 ksoap 库。您可以通过右键单击项目和属性来做到这一点。选择**Java Build Path**和**Add Jars**。浏览到 ksoap jar 并选择它。

# java - Passing arrays as method parameters in Java

> ID：10117077
> 
> 赞同：5
> 
> 时间：2012-04-12T03:41:21.210
> 
> 标签：java

The following code uses simple arrays of String in Java.

```
package javaarray;

final public class Main
{
    public void someMethod(String[] str)
    {
        System.out.println(str[0]+"\t"+str[1]);
    }
    public static void main(String[] args)
    {
        String[] str1 = new String[] {"day", "night"};
        String[] str2 = {"black", "white"};

        //Both of the above statements are valid.

        Main main=new Main();
        main.someMethod(str1);
        main.someMethod(str2);

        //We can invoke the method someMethod by supplying both of the above arrays alternatively.

        main.someMethod(new String[] { "day", "night" }); //This is also valid as obvious.
        main.someMethod({ "black", "white" }); //This is however wrong. The compiler complains "Illegal start of expression not a statement" Why?
    }
} 
```

In the above code snippet, we can initialize arrays like this.

```
String[] str1 = new String[] {"day", "night"};
String[] str2 = {"black", "white"}; 
```

and we can directly pass it to a method without being assigned like this.

```
main.someMethod(new String[] { "day", "night" }); 
```

If it is so, then the following statement should also be valid.

```
main.someMethod({ "black", "white" }); 
```

but the compiler complains "Illegal start of expression not a statement" Why?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T03:48:12.920

根据 Java 语言规范（[10.6\. Array Initializers](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)）

> 数组初始化器可以在声明中指定，或者作为数组创建表达式（§15.10）的一部分，创建一个数组并提供一些初始值：

因此，只有两种方法可以使用数组初始值设定项 ( `{"foo", "bar"}`)：

1.  变量声明：`String[] foo = {"foo", "bar"};`
2.  数组创建表达式：`new String[] {"foo", "bar"};`

您不能将数组初始值设定项用作方法参数。

[15.10。数组创建表达式](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)

```
数组创建表达式：
    新的 PrimitiveType DimExprs Dimsopt
    新的 ClassOrInterfaceType DimExprs Dimsopt
    新的 PrimitiveType Dims ArrayInitializer
    新的 ClassOrInterfaceType Dims ArrayInitializer

```

# windows - Giving image as background of a button control

> ID：10117078
> 
> 赞同：4
> 
> 时间：2012-04-12T03:41:25.080
> 
> 标签：windows, windows-phone-7

I have an image in my resources and I want to provide it as background of my button in windows phone. How to do that? I tried this , but giving an error

```
<Button Content="" HorizontalAlignment="Left" BorderBrush="Transparent" Margin="131,681,0,0" Name="button2" Width="81" Grid.Row="1" Click="button2_Click" Height="64" VerticalAlignment="Top" Background="Images/pause.png"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T03:45:45.507

尝试这个，

```
 <Button Content="" HorizontalAlignment="Left" Margin="114,36,0,0" Grid.Row="1" VerticalAlignment="Top">
        <Button.Background>
            <ImageBrush Stretch="Fill" ImageSource="/Images/pause.png"/>
        </Button.Background>
    </Button> 
```

# php - Update values in SQL from PHP

> ID：10117081
> 
> 赞同：0
> 
> 时间：2012-04-12T03:41:50.110
> 
> 标签：php, mysql, sql-update

I have a database in MySql with two columns, one where the user's name is stored and the user's corresponding value in the second column. How do I replace the values in the second column with new values? I am having trouble finding the answer in Google, because I am not so familiar with PHP. I know that both REPLACE and UPDATE functions are there, but I am having trouble getting them to work for only that specific user, not ALL the values in the column. The code I am unsuccessfully using is this:

```
$query1 = "UPDATE TextMeBabe SET '$username' = replace( '$username', '$existingcredits', '$newcredits')";
    echo "Values added";
    mysql_query($query1);
    mysql_close(); 
```

(I am able to log into the database with no issues, so I have not provided that code)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T03:44:18.407

```
$query1 = "UPDATE TextMeBabe SET `credits`='$newcredits' WHERE (`username` ='$username')"; 
```

假设这些是您的字段名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:53:14.060

1）您需要使用“where”子句来更新特定行。你可以在这里找到一些示例代码：http: [//www.w3schools.com/php/php_mysql_update.asp](http://www.w3schools.com/php/php_mysql_update.asp)

您这样做的方式将更新表中的所有记录。

2) replace 函数不适用于替换列中的值，它纯粹是一个字符串操作，用于替换作为第一个参数传递的部分字符串。

您正在考虑 repalce 命令（http://dev.mysql.com/doc/refman/5.0/en/replace.html）而不是替换功能（http://dev.mysql.com/doc/refman/ 5.1/en/string-functions.html#function_replace)

在问题的示例代码中，它应该是：

$query1 = "Update TextMeBabe Set credits = $newCredits where username = '$username'"; 假设列名是表中的用户名和信用。

# ios - 从 NSDictionary 对象的 NSArray 中，如何获取唯一的 NSArray

> ID：10117091
> 
> 赞同：1
> 
> 时间：2012-04-12T03:43:22.237
> 
> 标签：ios, nsarray

我正在编写一个处理图片相册的应用程序。

我有以下列出专辑的 JSON 文档。

```
{
  "Albums": [
    {
      "id": 1234,
      "Title": "My Birthday 2008",
      "Category": {
        "id": 0,
        "Name": "Birthdays"
      }
    },
    {
      "id": 5678,
      "Title": "Disneyland Trip 2010"
      "Category": {
        "id": 1,
        "Name": "Trips"
      },
    }
  ]
} 
```

如您所见，相册位于类别中。

我已经使用 NSJSONSerialization 类将其带入一个 NSDictionary 对象，该对象包含一个 NSDictionaries 的 NSArray（根据上述 JSON 的“模式”）。

由此，我想生成一个由唯一的 Categories NSDictionary 对象组成的 NSArray。就像是：

```
{
  "Categories": [
    {
      "id": 0,
      "Name" : "Birthdays"
    },
    {
      "id": 1,
      "Name" : "Trips"
    },
  ]
} 
```

搜索stackoverflow，我发现了一些看起来像好的构建块的东西

```
categories = [albums valueForKeyPath:@"@distinctUnionOfObjects.Category.Name"]; 
```

但这显然只会生成 NSStrings 的 NSArray。我想要的是一个 NSDictionaries 的 NSArray，其中有两个对象，键为“id”和“Name”。如果没有嵌套 if 循环的穷人/蛮力方法，我似乎无法将它们放在一起来获得我想要的东西。我想我正在为 NSDictionary 或 NSArray 类寻找一些实用方法，可以帮助我更快地做到这一点。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:14:40.730

为什么不直接使用 JSON 解析器？它应该给你你想要的。

[http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

# javascript - 防止浏览器滚动到 :target

> ID：10117093
> 
> 赞同：1
> 
> 时间：2012-04-12T03:43:37.020
> 
> 标签：javascript, html, css, scroll

我怎样才能使浏览器不会向下滚动到与 :target 匹配的元素（URL 中的#comment）？

例子

```
#toTarget {
 Color: red;
}
#toTarget:target {
 Color: green;
} 
```

我不希望它在 div#toTarget 上滚动。

它可以是任何语言... javascript、css、html等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:32:06.310

通过不使用片段标识符，例如`#toTarget`在 URL 的末尾。它不是注释，而是*定义*为指定文档中的特定位置，因此当浏览器在窗口中相应地定位文档时，它们会做一件自然的事情。参考：STD 66，第 3.5 条[片段](https://www.rfc-editor.org/rfc/rfc3986#section-3.5)。

# android - 如何使 TextView 文本垂直

> ID：10117094
> 
> 赞同：4
> 
> 时间：2012-04-12T03:43:47.067
> 
> 标签：android

我想要我的应用程序的垂直标签。是否有使文本垂直的属性？这就是我的意思垂直标签：

```
S
t
a
c
k
o
v
e
r
f
l
o
w 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T04:53:16.377

一个简单的解决方案可能是`\n`在每个字符后插入 a，并确保将高度设置为`fill_parent`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:55:04.070

在每个字母后添加 \n。在布局 xml 中，它不会显示正确，但将其运行到实际设备或模拟器会显示正确。

```
 <TextView
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:text="h\ne\nl\nl\no\n w\no\nr\nl\nd" /> 
```

您也可以将 layout_height 设置为 wrap_content。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T14:29:25.373

如果您只需要一行文本并且具有固定宽度的字体（等宽或亚洲字体），还有另一种选择：

将 TextView 的宽度限制为仅适合一个字符。高度可以是 wrap_content。

# php - 会话变量是否会受到并发访问的影响？

> ID：10117104
> 
> 赞同：0
> 
> 时间：2012-04-12T03:45:45.477
> 
> 标签：php, session, concurrency

我不知道如何表达我的问题（这可能就是为什么我没有通过谷歌获得任何解决方案的原因），但我只是想尽可能简单地大声思考。

假设在我的 php 应用程序中有一个名为 $_SESSION['x'] 的会话变量。该应用程序当前由用户 a、b、c 等使用。每个用户将 $_SESSION['x'] 设置为不同的值。我想知道用户是否同时访问，会不会有什么问题？或者虽然名称是 $_SESSION['x'] 并且用户正在同时访问，但不同的用户会得到不同的唯一 $_SESSION['x']？

我希望我已经说清楚了。任何线索的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:48:33.633

不，不会有问题，因为会话数组对于每个用户都是唯一的。而且您甚至无法访问其他用户会话。

顺便提一句。不要忘记“session_start()”，每个请求都需要它一次来重新初始化或创建会话，因此需要 $_SESSION 数组。

# mysql - 您可以创建迁移以在 Rails 3 中使用“where”条件更改数据吗

> ID：10117109
> 
> 赞同：3
> 
> 时间：2012-04-12T03:46:26.240
> 
> 标签：mysql, ruby-on-rails-3

我有几个表加载了数据，其中许多记录的“状态”字段设置为 0。我想将它们更改为值 1。是否可以编写类似这样的迁移？

```
class UpdateStatusContent < ActiveRecord::Migration
  def self.up
    MiscDescription.where ["status = ?", 0].update ["status = ?", 1]
    QuestionsBasic.where ["status = ?", 0].update ["status = ?", 1]
    QuestionsStrength.where ["status = ?", 0].update ["status = ?", 1]
  end

  def self.down
  end
end 
```

我可以直接在 MySQL 中执行此操作，但更喜欢使用迁移。我已经进行了一些搜索和实验，但未能找到有效的解决方案。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:51:14.723

是的，这应该是可能的。只有你应该使用[`update_all`](http://apidock.com/rails/ActiveRecord/Relation/update_all)而不是`update`：

```
MiscDescription.where("status = 0").update_all("status = 1") 
```

（无需使用此语法：`["status = ?", 0]`当不涉及用户输入时）

# php - 在 PHP 页面中包含许多 javascript 函数（其中包含 PHP）的最有效方法是什么？

> ID：10117110
> 
> 赞同：0
> 
> 时间：2012-04-12T03:46:26.287
> 
> 标签：php, javascript

在我的一个站点中，我需要使用 PHP 'foreach' 来继续包含一些 Javascript 代码。在此代码中包含在 foreach 循环中更改的 PHP $variables。

```
foreach ($a as $b) {
   include("javascript.php");  
} 
```

javascript.php 包含如下代码：

```
<script>
   $(".<?php echo $somevariable?>").something;
</script> 
```

我的问题是：加载包含 PHP 变量的 javascript 的最有效（如果有的话）方法是什么？

我一直在阅读，最好在 .js 脚本中调用大型 javascript 代码，而不是在页面上编写它，但显然 .js 文件不能包含 PHP。

感谢您的洞察力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:58:09.323

你可以加：

```
header("Content-type: text/javascript"); 
```

到您的 .php 文件的顶部，它将呈现为 .js 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:30:19.980

这是我将使用的方法：

使用包含 $somevariable 的 Javascript 变量创建 HTML 文件：

```
<html>
<head>
    <script src="my_global.js"></script>
</head>
<body>
    Foo
<script>
    var somevariable = "<?php echo $somevariable ?>";
</script>
</body>
</html> 
```

然后让 Javascript 文件在页面准备就绪后访问此值（在此示例中我使用的是 jQuery .ready()）：

```
$(document).ready(function() {
    alert(somevariable);
}); 
```

这是在行动：http: [//jsfiddle.net/2zeQM/](http://jsfiddle.net/2zeQM/)

这允许缓存 Javascript 文件（它是静态的而不是动态的）。并且动态数据被加载到用户请求的页面上。

您确实需要小心，您使用的变量名不会被任何其他 Javascript 代码重用。为了防止出现问题，我会在变量名前面加上前缀。例如，我可以称它为“xy_somevariable”，而不是称它为“somevariable”

# ruby - 在外部添加 $LOAD_PATH

> ID：10117125
> 
> 赞同：8
> 
> 时间：2012-04-12T03:48:25.910
> 
> 标签：ruby, load-path

我知道要添加到 $LOAD_PATH 的路径就可以了

```
$LOAD_PATH.unshift(path) 
```

但是我必须将这一行添加到我编写的每个程序中。无论如何将其添加到系统级别？

我试图在启动脚本上搜索一下 Ruby，但没有找到答案。我试图将此行添加到`kernel/common/module.rb`, `ruby_constants.rb`,`loader.rb`等。但两者都不起作用。

我应该在哪个文件中添加这一行？

* * *

更新：

我正在使用 ubuntu 10.04 和 Rubinius。没有称为 的系统变量`RUBYLIB`。

尝试创建一个但没有用。但我意识到我犯了一个错误，忘记在 bash script 中添加变量`.bashrc`。添加变量后，一切正常！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T04:15:10.820

`RUBYLIB`环境变量是一个冒号分隔的路径列表，ruby 将在标准 LOAD_PATH 前面添加。`ruby -I path`命令行上的也与您的代码中的相同`$LOAD_PATH.unshift 'path'`。Ruby 还将处理来自环境变量 RUBYOPT 的选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T04:56:38.347

```
$ export RUBYLIB=/tmp/test
$ irb
ruby-1.9.2-p290 :001 > puts $LOAD_PATH
/tmp/test
... 
```

# php - 在 php (uploadify) 中上传到 s3 的正确方法？

> ID：10117131
> 
> 赞同：0
> 
> 时间：2012-04-12T03:49:29.197
> 
> 标签：php, file, upload, amazon-s3, size

我目前正在使用uploadify 脚本并且工作正常，但是当文件达到8mb 左右时，我遇到了文件未上传的问题。我将 php.ini 文件设置为 200mb，所以我不认为这是问题所在。我有一种直觉，这与我上传的方式有关。

**这是代码：**

```
$response = $s3->create_object("mybucket", 'Folder/SubFolder/'.$FileName, array(
        'fileUpload' => $_FILES['Filedata']['tmp_name'],
        'acl' => AmazonS3::ACL_AUTH_READ
    )); 
```

不建议`$_FILES['Filedata']['tmp_name']`用于文件位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:40:02.697

事实证明，代码是正确的，不需要更改。我重新检查了 php.ini 文件，我提高了**memory_limit = 200M** *但没有意识到* **post_max_size = 8M**和**upload_max_filesize = 8M**。所以我**将它们更改为 150M**，现在脚本完美运行。

# iphone - 我不知道为什么这个表视图代码会崩溃

> ID：10117133
> 
> 赞同：0
> 
> 时间：2012-04-12T03:49:43.887
> 
> 标签：iphone, objective-c, ios, xcode

你好我正在学习iOS编程

我创建了一个项目，这是一个空应用程序

我创建了没有 xib 文件的表视图控制器。

我在 didFinishLaunchingWithOptions 中插入了以下代码

```
TableViewController *tvc = [[TableViewController alloc] init];
[self.window addSubView:tvc.view];
[tvc release]; 
```

当我向下滚动时，这段代码崩溃了。这是为什么？

当我评论这段代码时

```
[tvc release]; 
```

程序不会崩溃。

我没有在 AppDelegate 文件中写 dealloc。

这是为什么？？

我想我用 alloc 创建了表视图控制器

所以保留计数为1。

并将子视图添加到窗口和表视图控制器保留计数为 2。

所以我发布了表格视图控制器

但是当我向下滚动时它崩溃了。

我不知道为什么..

请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:55:46.140

很简单，添加`tvc.view`为窗口的子视图会导致`tvc.view`保留但不会保留`tvc`自身。从本质上讲，您的`TableViewController`实例一经调用就会失效`release`。当您滚动时，应用程序崩溃大概是因为`TableViewController`实例被配置为与.`UITableView`或.`UIScrollView``tvc.view`

另请注意，您显示视图的方式不是推荐的方式。真的，您应该调用`presentModalViewController:`或`pushViewController:`传递`TableViewController`实例。这将导致`TableViewController`它被保留，直到它被解除/弹出，使您可以安全地调用`release`您的示例代码。

或者，由于您是作为 的一部分手动执行此设置的`didFinishLaunchingWithOptions`，因此您也可以`window.rootViewController`直接设置，但同样不建议这样做。XCode 允许您指定应用程序的默认/根视图控制器，并在应用程序启动时自动为您设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:54:30.237

实际上，您只是单独添加了视图。因此，将仅保留视图。视图控制器将被释放。但是 viewcontroller 需要成为 tableview 的数据源和委托。由于它已被释放，该数据源将没有任何有效的引用，因此它会崩溃。

# jquery - 带有 DatePicker 的 Timepicker 插件

> ID：10117134
> 
> 赞同：2
> 
> 时间：2012-04-12T03:49:57.080
> 
> 标签：jquery, html

目前我正在使用 DatePicker（查看源：http://jqueryui.com/demos/datepicker/default.html），但我在添加 Timepicker 插件时遇到了困难（https://github.com/trentrichardson/jQuery -Timepicker-Addon），如何正确使用插件？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T04:03:28.383

```
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>  
<!-- core, slider, datepicker -->  
<script type="text/javascript" src="js/jquery-ui-1.7.2.custom.min.js"></script>  
<script type="text/javascript" src="js/timepicker.js"></script>  

<script type="text/javascript">  
$(function() {  
    $('#datetime').datetimepicker({  
      showSecond: true,
      timeFormat: 'hh:mm:ss',
      stepHour: 2,
      stepMinute: 10,
      stepSecond: 10
      ...  
     });  
});  
</script>  

<input type="text" name="datetime" id="datetime" value=""> 
```

在此处阅读其文档：http:
[//trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

# java - 递归遍历二叉树

> ID：10117136
> 
> 赞同：8
> 
> 时间：2012-04-12T03:50:01.530
> 
> 标签：java, binary-tree

当谈到递归函数时，我绝望地迷失了方向。我需要创建一个递归函数来遍历二叉树并在特定值之间插入一个新节点。我需要重新复制我的遍历函数并在我使用它的所有其他函数中修改它吗？有人可以评估遍历功能吗？

我认为我的遍历代码没问题。

```
Node traverse (Node currentNode){
    if (!currentNode.left.equals(null)){
        traverse (currentNode.left);
        return currentNode.left;
    }
    if (!currentNode.right.equals(null)){
        traverse (currentNode.right);
        return currentNode.right;
    }
    return currentNode;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T04:18:13.053

对于二叉树，有几种不同类型的遍历可以递归完成。它们是按照它们被引用然后访问的顺序编写的（L = 左孩子，V = 访问该节点，R = 右孩子）。

*   中序遍历 (LVR)
*   逆序遍历 (RVL)
*   前序遍历（VLR）
*   后序遍历 (LRV)

您的代码似乎正在执行后序遍历方法，但您混淆了一些东西。首先，*节点*就是你要遍历的；*数据*就是您要访问的内容。其次，您没有理由以实现方式返回节点本身。您的代码不允许有条件说“我正在寻找**这个**特定的数据，你有 Node@0xdeadbeef 先生吗？”，可以通过某种额外的搜索参数找到它。

学术 BST 遍历只打印节点本身。如果你想添加一个搜索功能，它只是一个额外的参数，以及对正确节点的额外检查。

这是一个片段：

```
// Academic

public void traverse (Node root){ // Each child of a tree is a root of its subtree.
    if (root.left != null){
        traverse (root.left);
    }
    System.out.println(root.data);
    if (root.right != null){
        traverse (root.right);
    }
}

// Search with a valid node returned, assuming int

public Node traverse (Node root, int data){ // What data are you looking for again?
    if(root.data == data) {
        return root;
    }
    if (root.left != null && data < root.data) {
        return traverse (root.left, data);
    }
    if (root.right != null && data > root.data) {
        return traverse (root.right, data);
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:06:35.243

看起来您正在遍历预购方法，但我有点怀疑您到底希望完成什么而不实际将您的当前节点与一些定义您已到达目的地的基本值进行比较。我建议画出一棵简单的树并可视化这些步骤。然后尝试将其放入代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T04:03:19.583

递归函数通过修改的参数或终止（退出）条件返回自身的值。例如，阶乘：

```
int factorial( int param ) {
   if ( param > 1 ) {
      return param * factorial( param -1 );
   } else {
      return 1;
   }
} 
```

在您的代码中，您调用了“遍历”，但随后对结果不执行任何操作...当您的递归函数结束时，您的最终返回将是第一个左孩子（如果存在），否则是第一个右孩子（如果存在），否则是根节点。

请详细说明为什么需要遍历树（另外，不确定“复制函数并在每个其他函数中修改它”是什么意思，函数的整个想法是编码一次调用多次)

# android - 如何使用“repo”克隆最小的 android 源？

> ID：10117137
> 
> 赞同：8
> 
> 时间：2012-04-12T03:50:03.103
> 
> 标签：android, repository

我可以使用“repo”工具克隆 Android 源代码。但是，我想做的是以比 11GB 占用空间更小的方式克隆源代码。它似乎下载了与每个 Android 设备和每个先前版本相关的东西。我试着认为我可以通过检查这样的特定分支来减少这种情况：

```
repo init -u https://android.googlesource.com/platform/manifest -b android-4.0.1_r1 
```

然而，最终发生的事情是我仍然参与了所有事情，只是在一个特定的快照上（可以理解）。但是有什么方法可以限制克隆的数量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T04:16:58.593

android 源代码树由许多独立的 git 存储库组成，它们都由 repo 管理。您无法真正减少为给定 git 存储库下载的数据量。

但是，您只能使用`repo sync <project>`. 也就是说，如果你只想要 frameworks/base 包，你应该可以在完成`repo sync frameworks/base`初始`repo init`.

如果你真的想要构建源代码，你可能想要完整的东西。

您可以通过删除不需要的设备存储库来节省一两次演出。您可以通过编辑 <source>/.repo/manifest.xml 并删除不需要的设备的存储库来完成此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-29T14:23:16.047

你可以做很多事情。首先，带有 -c 参数的“repo sync”会将签出的沙箱限制为仅“当前”分支。repo 同步不会下载其他分支的材料。

您还可以编辑 .repo/manifests/default.xml 清单。我所做的是对其进行备份，例如“default.bak”，然后从我知道我不需要的 default.xml 文件中删除这些行。因为我不是在 Macintosh 上构建，我知道我不需要任何“darwin”工具，所以我删除了包含“darwin”的每一行。然后“repo sync”不会下载任何 darwin 项目或在沙箱中安装源代码。

如果你已经同步了一个沙箱，并且你想修剪它的大小，你可以像上面那样删除项目，然后执行“repo sync -c -l”，repo sync 只会删除你刚刚删除的目录。-l 标志仅执行同步的本地部分，这意味着它仅将本地 git 项目与源代码树同步。网络未使用。正常同步的另一半参见“-n”标志，它执行网络同步以使用上游存储库更新本地 git 项目。

为了也删除不需要的项目（占用大量空间）的 git 支持对象存储，我使用这个：

```
for project in `diff ~/android/.repo/manifests/default.xml ~/android/.repo/manifests/default.bak | awk '{print $3}' | grep path | cut -f2 -d\"`; do  rm -rf ~/android/.repo/projects/$project.git ; rm -rf ~/android/.repo/project-objects/$project.git ; done 
```

这将查找备份清单中的所有项目，但已从活动清单中删除，并删除 git 项目及其所有支持数据。这恢复了很多空间。

如果删除太多，只需从备份清单中恢复项目行，然后将其重新添加到活动清单中。然后，一个 repo 同步将让你的 git 项目和你的沙箱再次直接。您可以通过在项目目录中执行“mma -B -n”来测试构建以查看是否删除了太多内容。这将尝试对您的目标进行完全依赖构建，强制所有目标构建，即使它们不需要它，并且它将作为试运行来完成。如果构建失败，您删除了项目需要的东西。

您还可以设置本地镜像沙箱，并从您的镜像创建小型、可工作的参考沙箱。工作沙箱不包含 git 对象存储，但参考镜像中的中心对象存储。使用“repo init -u ... --mirror”设置镜像，使用“repo init --reference=~/android-mirror -u ...”引用镜像。后者中的 -u 标志允许将真正的上游存储库用作权限，而将镜像引用用作本地缓存。本地镜像还避免了 AOSP 项目强制执行的下载配额，并且同步速度更快。

# javascript - 自动调整文本区域宽度（列）？

> ID：10117141
> 
> 赞同：2
> 
> 时间：2012-04-12T03:50:56.747
> 
> 标签：javascript, jquery, html, css

我正在为用户制作一个网络应用程序来创建一个简单的组织结构图。我什至还没有连接节点的线，但我正在使用文本区域。我发现了一个非常有用的 autosize() 插件，它非常适合在占用宽度时添加额外的行。有没有办法做到这一点，如果用户只使用一行，自动调整大小会缩小宽度以环绕文本？

我试图弄清楚如何做 jsfiddle 但我不知道如何添加多个 javascript（用于插件）所以我将我的 jquery 代码放在插件的底部并放入插件在[jsfiddle的 javascript 区域中](http://jsfiddle.net/qCcGM/1/)

HTML

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Pathway Builder 2.0</title>
    <link rel="stylesheet" href="PathwayBuilder2.css" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js"></script>
    <script src="PathwayBuilder2.js" type="text/javascript"></script>
    <script src="plug-ins/autosize.js" type="text/javascript"></script>
</head>

<body>
    <div id="Pathway">
        <div class="whole">
            <div class="text_display">
                <textarea class="text_field_not_selected"></textarea><br />
                <input type="button" class="add_child" value="+" />
            </div>
        </div>
    </div>
</body>
</html> 
```

javascript/jquery

```
$(document).ready(function() {
    $('textarea').autosize();
});

$(document).ready(function() {
    $('.add_child').live({
        click: function() {
            var new_child = '<div class="whole"><div class="text display"><textarea class="text_field_not_selected"></textarea><br /><input type="button" class="add_child not_visable" value="+" /></div></div>';
            $(this).closest('.whole').append(new_child);
            $('.text_field_not_selected').autosize();
        }
    });
});

$('textarea').live('focusin blur', function() {
    $(this).toggleClass('text_field_not_selected');
}); 
```

css

```
body {
    margin: 0px;
    padding: 0px;
    text-align: center;
}
#pathway {
    display: block;
}
.whole {
    text-align: center;
    display: inline-block;
    vertical-align: top;
    margin-left: auto;
    margin-right: auto;
    padding: 10px;
}
textarea {
    min-width: 2em;
    text-align: center;
}
textarea:focus {
    resize: none;
}
.text_field_not_selected {
    resize: none;
    border-radius: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    box-shadow: 0px 3px 5px #444;
    -moz-box-shadow: 0px 3px 5px #444;
    -webkit-box-shadow: 0px 3px 5px #444;
}
.add_child {
    margin-bottom: 25px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T04:18:02.197

在这里你去**工作演示**： http: [//jsfiddle.net/YVEhr/30/](http://jsfiddle.net/YVEhr/30/)（更贴切） **或** [http://jsfiddle.net/YVEhr/1/](http://jsfiddle.net/YVEhr/1/)

如果那是您想要的，请告诉我，我很乐意提供帮助。我花了一点时间才知道（即调整大小的想法）:)

**编辑**Okies 我现在知道了（Phew）请随意使用 css，或者您可以从“row=something”开始，我已经分享了一些链接以获得进一步的帮助。:)

**演示** [http://jsfiddle.net/YVEhr/30/](http://jsfiddle.net/YVEhr/30/)

调整 textarea 的大小以适应屏幕：好的链接：**或者**您也可以查看这个人： http: [//archive.plugins.jquery.com/project/TextFill](http://archive.plugins.jquery.com/project/TextFill)

**jQuery代码**

```
//inital resize
resizeTextArea($('textarea'));

//resize text area
function resizeTextArea(elem){
   // alert(elem[0].scrollHeight + ' ---- ' + elem[0].clientHeight);
    elem.height(1); 
    elem.scrollTop(0);
    elem.height(elem[0].scrollHeight - elem[0].clientHeight + elem.height());
}

//'live' event
$('textarea').live('keyup', function() {
    var elem = $(this);
   // alert('foo');
    //bind scroll
    if(!elem.data('has-scroll'))
    {
        elem.data('has-scroll', true);
        elem.bind('scroll keyup', function(){
            resizeTextArea($(this));
        });
    }

    resizeTextArea($(this));
}); 
```

如果那是你想要的，请告诉我。

**解释**

只需要绑定新的 etxtareaclass 来`.autosize()`运行和休息，你可以在 jsfiddle 中看到它。

不要忘记接受答案，如果您愿意，可以在不使用任何插件的情况下使用此解决方案：[jQuery - Building an AutoResizing TextArea that Don't Flash on Resize](https://stackoverflow.com/questions/4717635/jquery-building-an-autoresizing-textarea-that-doesnt-flash-on-resize)

任何人都可以使用，希望这会有所帮助，并祝你愉快，干杯！

**jQuery 代码**

```
$(document).ready(function() {

    $('.add_child').live({
        click: function() {
            var new_child = '<div class="whole"><div class="text display"><textarea class="text_field_not_selected"></textarea><br /><input type="button" class="add_child not_visable" value="+" /></div></div>';
            $(this).closest('.whole').append(new_child);
            $('.text_field_not_selected').autosize();
        }
    });
}); 
```

# google-app-engine - 用于从 DAL 选择中排除某些值的查询或表达式

> ID：10117143
> 
> 赞同：1
> 
> 时间：2012-04-12T03:51:09.017
> 
> 标签：google-app-engine, data-access-layer, web2py

我正在尝试通过以下方式从我的选择中排除具有名为 meta 的标签的帖子：

```
meta_id = db(db.tags.name == "meta").select().first().id
not_meta = ~db.posts.tags.contains(meta_id)
posts=db(db.posts).select(not_meta) 
```

但是这些帖子仍然出现在我的选择中。

写那个表达式的正确方法是什么？

我的表看起来像：

```
db.define_table('tags',
    db.Field('name', 'string'),
    db.Field('desc', 'text', default="")
)

db.define_table('posts', 
    db.Field('title', 'string'),
    db.Field('message', 'text'),
    db.Field('tags', 'list:reference tags'),
    db.Field('time', 'datetime', default=datetime.utcnow())
) 
```

我在 GAE 上使用 Web2Py 1.99.7，在 Python 2.7.2 上使用 High Replication DataStore

**更新：**

我只是`posts=db(not_meta).select()`按照@Anthony 的建议进行了尝试，但它给了我一张带有以下 Traceback 的票：

```
Traceback (most recent call last):
  File "E:\Programming\Python\web2py\gluon\restricted.py", line 205, in restricted
    exec ccode in environment
  File "E:/Programming/Python/web2py/applications/vote_up/controllers/default.py", line 391, in <module>
  File "E:\Programming\Python\web2py\gluon\globals.py", line 173, in <lambda>
    self._caller = lambda f: f()
  File "E:/Programming/Python/web2py/applications/vote_up/controllers/default.py", line 8, in index
    posts=db(not_meta).select()#orderby=settings.sel.posts, limitby=(0, settings.delta)
  File "E:\Programming\Python\web2py\gluon\dal.py", line 7578, in select
    return adapter.select(self.query,fields,attributes)
  File "E:\Programming\Python\web2py\gluon\dal.py", line 3752, in select
    (items, tablename, fields) = self.select_raw(query,fields,attributes)
  File "E:\Programming\Python\web2py\gluon\dal.py", line 3709, in select_raw
    filters = self.expand(query)
  File "E:\Programming\Python\web2py\gluon\dal.py", line 3589, in expand
    return expression.op(expression.first)
  File "E:\Programming\Python\web2py\gluon\dal.py", line 3678, in NOT
    raise SyntaxError, "Not suported %s" % first.op.__name__
SyntaxError: Not suported CONTAINS 
```

**更新 2：**

由于`~`目前没有使用 Datastore 处理 GAE，因此我使用以下方法作为临时解决方法：

```
meta = db.posts.tags.contains(settings.meta_id)
all=db(db.posts).select()#, limitby=(0, settings.delta)
meta=db(meta).select()
posts = []
i = 0
for post in all:
    if i==settings.delta: break
    if post in meta: continue
    else:
        posts.append(post)
        i += 1
#settings.delta is an long integer to be used with limitby 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:59:56.640

尝试：

```
meta_id = db(db.tags.name == "meta").select().first().id
not_meta = ~db.posts.tags.contains(meta_id)
posts = db(not_meta).select() 
```

首先，您的初始查询返回一个完整的 Row 对象，因此您只需提取“id”字段。其次，`not_meta`是一个 Query 对象，因此它在内部`db(not_meta)`创建一个 Set 对象，定义要选择的记录集（该`select()`方法需要为每条记录返回一个字段列表，以及一些其他参数，例如`orderby`,`groupby`等.)。

# java - 从 Java 中的 COM7 端口读取图像数据

> ID：10117152
> 
> 赞同：-1
> 
> 时间：2012-04-12T03:52:12.857
> 
> 标签：java, port

我正在做一个项目，我必须将从相机芯片捕获的图像显示到 PC 上。

图像数据正在通过 COM7 端口发送到计算机。（我已经使用哑终端程序检查了它）。基本上我想做的是开发一个Java程序来读取COM端口，获取图像数据，处理它并在屏幕上显示它。

我想知道的是如何在我的 Java 程序中从 COM7 端口读取这些图像数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:19:56.510

对于问题的串行端口部分，请像读取任何其他文件一样读取串行端口。

*   在'nix 上，串行端口被命名为`/dev/ttySn`n 0-3 用于 COM1 到 COM4。我猜如果存在更多串行端口，您的系统上也会存在适当命名的文件来访问这些端口。
*   在 Windows 上，您可以只使用特殊文件名`COM1`,`COM2`等。

至于实际读取图像数据，正如其他人所提到的，您需要知道它是什么格式。`ImageIO.read()`如果它是Java已知的文件格式之一，您可以尝试使用。如果它是原始位图格式，您可以尝试通过从 Raster 创建 BufferedImage 以及从适当的 SampleModel 和 DataBuffer 创建 Raster 来从原始数据构造缓冲图像。但是，您需要知道位图数据的格式才能执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:07:30.140

您可能想从从端口读取数据开始。为此，[Socket](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html)可能很有用。

由于您“认为”数据将是字节...尝试以下操作：

```
BufferedImage img = ImageIO.read(new ByteArrayInputStream(bytes)); 
```

您还可以查看[相关](https://stackoverflow.com/questions/1580038/byte-array-to-image-file)帖子

# java - 为什么 Math.round() 为 NaN 参数返回 0？

> ID：10117154
> 
> 赞同：19
> 
> 时间：2012-04-12T03:52:19.823
> 
> 标签：java, floating-point, nan

我认为对 NaN 的任何数学运算的结果都应该给我一个 NaN，但是`Math.round(Float.NaN) == 0`

[Math.round()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Math.html#round%28double%29)这种行为的基本原理是什么？

奇怪的是，C# 的行为不同：http: [//msdn.microsoft.com/en-us/library/75ks3aby.aspx](http://msdn.microsoft.com/en-us/library/75ks3aby.aspx)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-12T04:01:07.340

[`Math.round()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round%28double%29)定义为`(long)Math.floor(a + 0.5d)`。

1.  如果`a`是`NaN`，那么`a+0.5d`是`NaN`。
2.  [`Math.floor()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#floor%28double%29)被委托给[`StrictMath.floor()`](http://docs.oracle.com/javase/6/docs/api/java/lang/StrictMath.html#floor%28double%29)which`NaN`在传入时返回`NaN`。
3.  当转换`NaN`为 a`long`时，它返回 0

所以最终，归结为为什么转换`NaN`为 a 会`long`返回 0。这个问题已经在[这个](https://stackoverflow.com/questions/5876369/why-does-casting-double-nan-to-int-not-throw-an-exception-in-java)问题中得到了彻底的讨论。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-12T03:58:11.400

哈哈。我想打自己的头。

`Math.round(double)`返回一个*long*和一个*long*不能`NaN`。另一种情况是例外。

在 C# 中，结果仍然是`double`.

# model-view-controller - 控制器 - 在 Backbone 中连接视图和模型的位置？

> ID：10117159
> 
> 赞同：1
> 
> 时间：2012-04-12T03:53:34.293
> 
> 标签：model-view-controller, controller, backbone.js

*   我的第一种方法是让每个视图初始化（`new`）它自己的模型，但是随着项目的发展，随着更多视图的添加，维护变得越来越困难。

*   另一种方法可能是让 App 级别的 View 完成这项工作。

由于 Backbone 不提供 Controller 类。在 Backbone 的中型项目中连接视图和模型的最佳实践是什么？

*我知道这是来自 MVC 新手的又一个主干控制器问题！而且那个 Backbone 不是严格的 MVC。我只在 SO 中找到了一些过时且混合了路由器和控制器概念的问题的答案。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:56:54.487

只需在创建视图时通过在传递给视图构造函数的配置对象中指定模型来连接它们：

```
var MyModel = Backbone.Model.extend();
var myModel = new MyModel();
var MyView = Backbone.View.extend();
var myView = new MyView({model: myModel}); 
```

# .net - .Net Thread vs ThreadPool vs SerialPort 通信的任务

> ID：10117166
> 
> 赞同：5
> 
> 时间：2012-04-12T03:54:33.363
> 
> 标签：.net, multithreading, threadpool, task

我在 C# .Net 4.0 应用程序中遇到了一个有趣`SerialPort`的`ThreadPool.QueueUserWorkItem`问题`Task`。

仅当我同时使用 2 个或更多 SerialPorts 时才会出现此问题。每个串行端口在我以 3 种方式中的 1 种方式创建的自己的线程中运行：

1.  `new Thread(DoSerialCommX)`
2.  `ThreadPool.QueueUserWorkItem(DoSerialCommX)`
3.  `new Task(DoSerialCommX, TaskCreationOptions.LongRunning).Start()`

为了说明这个问题，我创建了`DoSerialCommX`一个循环读取和写入串行端口的方法。它看起来像这样：（我实际上并没有在我的真实程序中这样做。这只是我的测试程序中的一个片段，用于隔离和说明问题）。

```
private void DoSerialCommX()
{
    SerialPort port = new SerialPort("ComX", 9600);
    port.Open();

    while(true)
    {
        //Read and write to serial port
    }
} 
```

如果我使用方法 2 或 3，串行通信会卡顿，并且我会收到许多通信超时。如果我使用方法1，一切都很好。另外，我应该提到这似乎只发生在基于 Intel Atom 的 PC 上。台式电脑似乎没有问题。

我知道线程池重用线程，并且默认`Task`使用线程池。而且我知道线程池确实适用于短期操作。但是我尝试使用`TaskCreationOptions.LongRunning`，我认为它会产生一个专用线程而不是使用线程池，但它仍然不起作用。

**所以问题是：**在这种情况下有 什么`Thread`特别之处？有什么东西`Thread`使它更适合 IO 操作吗？

**编辑：** 到目前为止的答案似乎假设我正在尝试将 ThreadPool 或 Tasks 用于永无止境的过程。在我的实际应用中，情况并非如此。我只是在上面的代码中使用了一个永无止境的循环来说明问题。我真的需要知道为什么`Thread`有效和`ThreadPool`无效`Task`。它们在技术上有何不同会导致串行通信中断？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:28:25.247

从哲学上讲，执行线程的行为方式在 1、2 和 3 之间几乎没有区别。除非您覆盖它们，否则它们都共享相同的默认执行优先级 - 从理论上讲，线程调度程序将使用相同的策略来调度它们。他们都会快乐地坐在圈子里旋转。

我怀疑方法之间更大的区别是：

1.  基础设施成本（线程、内存等）旋转起来以支持 #2 和 #3 的线程池，所有这些都将与您的执行循环竞争时钟时间片。
2.  肌肉较少的 Atom 上的线程上下文切换成本。Atom 具有更小的缓存和更短的处理管道。更多运行线程 = 更多上下文切换、更多流水线转储和降低指令缓存效率。

从功能的角度来看，使用方法 2 和 3 有点滥用 - 您的意图是永远不要退出该方法。这些策略针对原子的、有限的操作进行了优化，并且有些无指导的执行通常适用于异步网络、磁盘操作等 IO 完成端口任务......（也许您的串行端口代码也有可能？）

除非您有兴趣适应 Async IO，否则我会跳过 2 和 3。专注于线程 - 似乎您想要更精细、可预测的执行控制，而不需要 Threadpool 带来的基础设施开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:56:36.653

您的代码、驱动程序或硬件存在问题，使您的串行端口性能“处于边缘”，以至于它一直处于无法正常工作的边缘。使用专用线程或线程池应该没有问题（mod。使用线程池线程阻塞串行端口读取）。

两个 9600 波特的串行端口可以用算盘运行，前提是珠子​​和电线都上油了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:00:37.873

我怀疑这是因为您正在从 COM 端口读取/写入。如果没有这个因素，所有这些都应该执行相同的操作，因为（如果您检查的话）它们都在具有 Normal 优先级的线程中运行。

也许阅读[I/O 完成端口](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198%28v=vs.85%29.aspx)和线程池，看看是否可以解释这种奇怪的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T04:39:17.837

有细微的差别 - 这导致了超时：

*   在调用 Thread.Start() 时，使用 Thread 显式创建一个新线程 - 并确保您的代码在该特定时刻运行。
*   使用 ThreadPool 可确保根据内部 ThreadPool 逻辑在不久的将来打开一个线程。由于 ThreadPool 数量有限，建议不要将其用于长时间（或无限）运行操作。
*   使用任务只会确定代码会运行。无论是在另一个线程上，还是在主线程上，都不能确保它会立即运行，或者不同的任务会在不同的线程上运行。

因此，如果您希望您的任务快速启动，请始终使用 Thread。Tasks 和 ThreadPool 都有一些额外的“基础设施开销”，可能会导致您注意到的轻微延迟。

由于 ThreadPool 和 task 都不打算在您的任务不存在时使用，我建议您使用 Thread。

# javascript - 我需要帮助让 Javascript 读取 HTML 表单，并将其分配给特定数组

> ID：10117167
> 
> 赞同：0
> 
> 时间：2012-04-12T03:54:51.730
> 
> 标签：javascript

我需要帮助让 javascript 读取 html 输入表单，并将输入分配给一个数组，或者至少我认为是一个数组....我不确定。

我想从 html 表单中获取数据，并将其放在这里：

```
var users = ['"This is a random qoute"-lastname,firstname."','"This is a random
qoute"-lastname,firstname."']; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:21:12.710

检查[jQuery.serializeArray](http://api.jquery.com/serializeArray/)
**示例：**

```
$('form').submit(function() {
  var params = $(this).serializeArray();
  console.log(params);
    return false;
}); 
```

**控制台将显示如下内容：**

```
[
    {
        name: "input1Name",
        value: "input1Value"
    },

    {
        name: "input2Name",
        value: "input2Value"
    }
] 
```

提交表单后，您可以访问对象中的参数，例如：

**得到所有**

```
jQuery.each(params, function(objPosition, obj){
    alert("name: " + obj.name + " Value: " + obj.value);
}); 
```

**或者**得到**一个**（在这种情况下是第一个）

```
alert("name: " + params[0].name + " Value: " + params[0].value); 
```

你可以看到它**在这里工作**：http : [//jsfiddle.net/ricardolohmann/Jfu9H/](http://jsfiddle.net/ricardolohmann/Jfu9H/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:05:30.430

如果您想要一个文本输入名称和值的数组，以下将完成这项工作。如果你想

序列化表单以进行发布，这需要更多代码。

```
<script type="text/javascript">
function getInputs(form) {
  var input, inputs = form.getElementsByTagName('input');
  var result = [];

  for (var i=0, iLen=inputs.length; i<iLen; i++) {
    input = inputs[i];

    if (input.type == 'text') {
      result.push(input.name + ': ' + input.value)
    }
  }
  return result;
}

</script>

<form>
 <table>
  <tr>
   <td>name<td><input type="text" name="userName">
  <tr>
   <td>age<td><input type="text" name="userAge">
  <tr>
   <td colspan="2"><input type="button" value="Show inputs" 
       onclick="alert(getInputs(this.form));">
</table>
</form> 
```

节目`"userName: <value>, userAge: <value>"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:11:42.827

[你可以用jQuery.serialize()](http://api.jquery.com/serialize/)很好地做到这一点

如果您不熟悉 jQuery，请使用本[教程](http://www.w3schools.com/jquery/jquery_intro.asp)了解其基础知识。它是一个 Java 脚本库。

现在你可以按照我写的[这个例子](http://jsfiddle.net/jCXV2/)来工作了。

它将表单元素值读入字符串，

```
var srt=$("form").serialize(); 
```

并从 '&' sing 中拆分结果字符串以获得预期的字符串数组。

```
var srtArray=srt.split('&'); 
```

结果是这样的，

```
["text1=Lasantha", "dropDownList1=Single", "List1=Multiple1", "List1=Multiple3", "checkBox2=check2", "radioButton1=radio1"] 
```

它的形式是，

```
["name=value","name=value"....] 
```

# php - 邮件已发送！但收件箱没有收到。PHP -> 本地主机 -> XAMPP -> Web 服务器

> ID：10117170
> 
> 赞同：0
> 
> 时间：2012-04-12T03:55:20.247
> 
> 标签：php, email, outlook, xampp, localhost

这是我的配置文件。

发送邮件.ini

```
[sendmail]

; you must change mail.mydomain.com to your smtp server,
; or to IIS's "pickup" directory.  (generally C:\Inetpub\mailroot\Pickup)
; emails delivered via IIS's pickup directory cause sendmail to
; run quicker, but you won't get error messages back to the calling
; application.

smtp_server=(Correct SMTP Server)

; smtp port (normally 25)

smtp_port=25 
```

php.ini

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = (Correct SMTP Server)
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = (user@(server.com)) <- correct name 
```

PHP 代码

```
<?php
$from_name = "testing";
$from_email = "myemail@something.com";
$headers = "From: $from_name <$from_email>";
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type: text/html; charset=iso-8859-1" . "\r\n";
$body = "Hi,\nThis is a test mail from $from_name <$from_email>.";
$subject = "Test mail from test";
$to = "myemail@something.com";

if (mail($to, $subject, $body, $headers)) {
  echo "success!";
} else {
  echo "fail…";
}
?> 
```

当我运行代码时，它确实说电子邮件已发送，但是当我检查电子邮件时，没有任何东西可以接收......请帮助！谢谢我会提供尽可能多的相关信息来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:19:20.273

如果您在家中或小型办公室对此进行测试，那么您的 ISP 可能会阻止端口 25 上的出站流量。您的 PHP 不会失败，但您的消息将被阻止。您需要在另一个端口（例如 465 或 587）上连接到外部 SMTP 服务器。请咨询您的 ISP 网站以了解其允许的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-30T22:41:34.067

如果您仔细观察，您会发现您在第二个 $header 变量上缺少连接，因此，您没有发送可能导致邮件被拒绝的“发件人：”标头。

# joomla - 无法使用管理员帐户访问 Joomla 管理面板

> ID：10117171
> 
> 赞同：0
> 
> 时间：2012-04-12T03:55:21.863
> 
> 标签：joomla, administrator

这个问题始于我需要在我的首页添加一个模块，这样只有客人才能看到它，在他们登录后模块消失了。所以我读了这个[教程](http://brian.teeman.net/tips-and-tricks/the-guest-user-group-hiding-menu-items-and-modules.html)：

基本上说要这样做..

在用户管理器中创建访客组 添加新的访客查看访问级别 在用户管理器选项中更改默认访客组

它有效！但现在的问题是，当我在管理面板上使用我的管理员帐户登录时，我从 Zoo 组件中只得到 3 个图标，没有管理栏菜单，什么都没有！如果尝试使用默认用户帐户登录管理面板，我会得到同样的结果！我现在在 joomla 数据库中尝试看看我是否可以删除我之前创建的用户组，也许它可以工作？

我不能丢失网站的内容，这很重要！请帮忙。我是最新版本的 joomla。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:45:46.030

备份您的文件和数据库并将您的网站设置为离线模式：编辑您的 configuration.php 文件并设置：

```
public $offline = '1'; 
```

之后，您可以尝试您的解决方案。

# java - 解析多表单请求（iframe）

> ID：10117174
> 
> 赞同：0
> 
> 时间：2012-04-12T03:55:50.153
> 
> 标签：java, android, webserver, httpservice, httpserver

我的 android 设备上有一个 httpservice。因此，如果可能，我会通过 XMLHttpRequest 发送单个文件，或者在其他情况下通过 iframe 发送单个文件。如果我使用谷歌浏览器它工作正常，我没有任何问题，因为它使用 XMLHttpRequest 发送文件。但是当我使用通过 iframe 发送文件的 IE 或 Opera 时出现问题，因为我收到如下请求：

```
------------Gg3pxYwLKOqlVLkQwq3Hyn
Content-Disposition: form-data; name="test"; filename="Android.png"
Content-Type: image/png

‰PNG 
some symbols ....
.......................
------------Gg3pxYwLKOqlVLkQwq3Hyn 
```

我想解析它并将文件名和文件内容作为二进制或base64，没有页眉和页脚。我可以通过 Android 的仪器解析它还是应该使用第 3 部分库？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T03:53:13.053

我找到了解决方案：[http ://commons.apache.org/fileupload/](http://commons.apache.org/fileupload/)

# jquery - html中的订单列表

> ID：10117175
> 
> 赞同：2
> 
> 时间：2012-04-12T03:55:51.050
> 
> 标签：jquery, html, css

我必须在 html 中制作条款和条件页面，所以我想给他们一个数字，但有些条件有它们的子点，所以我想像下面的例子一样展示它们。

1.  我第一点

    1.1和我的分点

2.  我第二点

3.  我第三点

4.  我是第四个

    4.1和我的分点

可以使用 css 给他们这样的数字格式

```
<style>
ol {list-style:decimal}

</style>
</head>

<body>
<ol>

<li>me the first point
<ol><li>me the sub point</li></ol>

</li>
<li>me the second point</li>
<li>me the third point</li>
<li>me the forth point</li>

</ol>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T04:08:30.873

您可以为此使用 CSS**反增量**。像这样写：

```
 body{
   counter-reset: chapter 0;
 }
 li{
   counter-reset: sub-chapter 0;
    margin-left:20px;
    position:relative;
 }
 li:before{
   counter-increment: chapter;
   content: counter(chapter) ". ";
 }
 li li:before{
   counter-increment: sub-chapter;
   content: counter(chapter) "." counter(sub-chapter) ": ";
 }
li:before{
    position:absolute;
    left:-20px;
} 
```

检查这个[http://jsfiddle.net/gNqXL/](http://jsfiddle.net/gNqXL/)

它可以工作到 IE8 及更高版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T04:06:11.623

你可以用css计数器来做。

[http://dev.opera.com/articles/view/automatic-numbering-with-css-counters/](http://dev.opera.com/articles/view/automatic-numbering-with-css-counters/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T04:07:00.460

我认为这符合您的要求：

[http://www.w3schools.com/cssref/pr_gen_counter-reset.asp](http://www.w3schools.com/cssref/pr_gen_counter-reset.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T04:06:52.060

条款和条件通常是一个静态页面。所以最好使用手动命令而不是动态生成

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T04:07:41.927

CSS 可以做到这一点。

[http://caniuse.com/#search=counter](http://caniuse.com/#search=counter)

[见例子](http://devfiles.myopera.com/articles/501/nested-counters-example.html)。

这可能会为您指明正确的方向。

# php - javascript幻灯片数组

> ID：10117176
> 
> 赞同：0
> 
> 时间：2012-04-12T03:55:58.343
> 
> 标签：php, javascript, arrays, mootools

我正在使用幻灯片 2 (http://www.electricprism.com/aeron/slideshow/) 在我的网站上显示几张图片，问题是图片数量和它们的位置应该硬编码到 javascript 代码中。

我想使用一个数组（来自 php 文件输出）并以某种方式为“var data”分配新值，以便显示文件夹中的所有图像，而无需每次手动更新。有任何想法吗？

```
<script>
        window.addEvent('domready', function(){

            var data = { '5.jpg': { caption: '1' }, '2.jpg': { caption: '2' }, '3.jpg': { caption: '3' }, '4.jpg': { caption: '4' }};

            new Slideshow('overlap', data, { captions: { delay: 1000 }, delay: 3000, height: 300, hu: 'images/', width: 400 });

        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:11:44.943

如果您使用 PHP，那么您可以轻松地做到这一点。

比如说，你有逻辑将所有文件放入一个如下所示的数组中：

```
$foo = Array("2.jpg" => "2", "3.jpg" => "3"); 
```

代表文件名和标题

然后你可以这样做：

```
<?php echo json_encode($foo); ?> 
```

输出它。

如果要在 js 块中将其输出到变量中：

```
var data = <?php echo json_encode($foo); ?>; 
```

它实际上应该呈现为：

```
var data = [{"2.jpg": "2"},{"3.jpg": "3"}]; 
```

另外，请记住，在您的示例中，您实际上并没有使用数组，而是使用了对象。有很大的不同。在输出中，我建议您将获得一个对象数组。你会像这样循环它：

```
Array.each(data, function(img) {

}); 
```

但是因为你的键是动态的，所以迭代很困难，你需要`Object.each`or`Object.keys`来`for (var key in obj) {}`获取属性。更好的数据结构是：

```
$foo = Array(Array("name" => "2.jpg", "caption" => "two"), Array("name" => "3.jpg", "caption" => "three")); 
```

这意味着在您的 js 循环中，您可以参考：

```
Array.each(data, function(img) {
    img.name; // filename
    img.caption; // title    
}); 
```

# android - Android WebView JQuery Mobile 水平滚动

> ID：10117179
> 
> 赞同：1
> 
> 时间：2012-04-12T03:56:32.800
> 
> 标签：android, jquery-mobile, webview

我正在使用 jquery 移动框架在 android 中创建 webview 应用程序。我需要显示宽度大于屏幕的表格。水平滚动条未显示。我尝试了很多方法，但没有一个对我有用..（很多人面临同样的问题，我已经尝试了第 1 页到第 3 页中的所有谷歌搜索结果链接，也有一些来自 stackoverflow 的链接）有什么建议吗？*对不起，我的英语不好..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T15:21:16.497

我有一个非常相似的问题，我通过一些实验找到了适合我情况的解决方法（错误修复？）。

在 JQuery Mobile CSS 文件（对我来说是“jquery.mobile-1.1.0-rc.2.css”）中，我将第 1119 行更改为：

```
 .ui-content { border-width: 0; overflow: visible; overflow-x: hidden; padding: 15px; } 
```

至：

```
 .ui-content { border-width: 0; overflow: visible; overflow-x: scroll; padding: 15px; } 
```

这使我的 CSS（具有绝对宽度和坐标）可以水平滚动。

修改 JQuery Mobile CSS 的本地副本后，不要忘记更改 html 标头中的链接。

同样，我不确定之前的行为是否是故意的。它很可能符合 Jquery Mobile 团队的设计目标。但这种改变对我有用。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:25:52.103

我怀疑这是我在这个论坛中发现的一个错误。 [http://forum.jquery.com/topic/horizo​​ntal-scroll-views](http://forum.jquery.com/topic/horizontal-scroll-views)

但是在这里，他们谈论了一些其他的替代方法，称为滑动，您可以通过它来实现这一点。网站本身已经有一些关于此的讨论，您可以参考它。

[在android中的活动之间滑动](https://stackoverflow.com/questions/5105380/swipe-among-activities-in-android)

# asp.net - 谷歌分析服务器端

> ID：10117180
> 
> 赞同：1
> 
> 时间：2012-04-12T03:56:39.353
> 
> 标签：asp.net, google-analytics, download, asp.net-4.0, tracking

我想在我的网站上跟踪 PDF 的下载。

我更希望它是使用 Google Analytics 进行的某种事件跟踪。

我一直在阅读[带有 ASP.Net 的 Mobile SDK，](http://code.google.com/apis/analytics/docs/mobile/mobileWebsites.html#asp)但您似乎仍然需要执行一些 javascript 客户端才能使其正常工作。

有人对完全服务器端的 Google Analytics 实施有任何想法吗？

我希望某种 HTTP Post 能够`ga.js?useragent=THIS&ip=THAT&cookie=SOMETHING`...

# java - 在 JSF bean 之间为单个 view.xhtml 传递参数

> ID：10117184
> 
> 赞同：0
> 
> 时间：2012-04-12T03:57:21.633
> 
> 标签：java, jsf, ejb, cdi

可能我使用的表格不正确。这个想法是 detail.content 显示一些 HTML，这部分工作正常。该表单应该允许在右侧输入并显示多个（一对多的注释。

显示默认注释时，不会显示更多注释。如何将注释 bean 链接到详细信息 bean？我在想一个字符串“id”并将它从一个bean传递到另一个。

这类似于[将参数从一个 view.xhtml 传递到另一个](https://stackoverflow.com/questions/10058852/)的想法，只是它都在一个页面上。我想让豆子与众不同。最终，我想用 EJB 来做这件事，所以想保持这个选项打开，同时还没有使用 EJB。

查看，detail.xhtml：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./complexTemplate.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core">
    <ui:define name="top">
        <h:form>
            <h:outputLink id="back" value="detail.xhtml">
                <f:metadata>
                    <f:viewParam name="id" value="#{detail.id}"  />
                </f:metadata>
                <f:param name="id" value="#{detail.back()}" />
                <h:outputText value="back" />
            </h:outputLink>
        </h:form>
        <h:form>
            <h:outputLink id="forward" value="detail.xhtml">
                <f:metadata>
                    <f:viewParam name="id" value="#{detail.id}"  />
                </f:metadata>
                <f:param name="id" value="#{detail.forward()}" />
                <h:outputText value="forward" />
            </h:outputLink>
        </h:form>
    </ui:define>
    <ui:define name="content">
        <h:outputText escape="false" value="#{detail.content}"></h:outputText>
    </ui:define>
    <ui:define name="right">
        <p>#{notes.note.id}</p>
        <p>#{notes.note.comment}</p>
        <h:form>
            <h:inputText value="#{notes.note.comment}" />
            <h:commandButton value="add note"
                             action="#{notes.commentAction()}"/>
        </h:form>
    </ui:define>
</ui:composition> 
```

豆，Notes.java：

```
package net.bounceme.dur.nntp;

import java.util.logging.Level;
import java.util.logging.Logger;
import javax.enterprise.context.Dependent;
import javax.inject.Named;

@Named
@Dependent
public class Notes {

    private static final long serialVersionUID = 1L;
    private static final Logger logger = Logger.getLogger(Notes.class.getName());
    private static final Level level = Level.INFO;
    private Note note = new Note();

    public Notes() {
        logger.log(level, "Notes..");
    }

    public Note getNote() {
        return note;
    }

    private void setNote(Note note) {
        this.note = note;
    }

    public void commentAction() {
        logger.log(level, "Notes.newNote..");        note.setId("messageIdGoesHere");
        note.setComment("hmmm");
    }
} 
```

另一个 bean，Details，工作正常。但是，我不确定如何将两个 bean 集成到一个页面上，以便两个 bean 相互了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T04:36:45.997

使用`@Inject`.

```
@Named
public class Notes {

    @Inject
    private Detail detail;

} 
```

它将在方法`Notes`之外的生命周期内在实例中可用`@PostConstruct`。反过来也可以。在您的特定情况下，父子关系并不完全清楚。

* * *

**与具体问题无关**，您有一些奇怪的视图标记。只有一个`<f:metadata>`在定义的顶部就足够了。此外，`#{detail.back()}`作为一个值表达式是奇怪的。您应该有一个`getBack()`方法并将其引用为`#{detail.back}`. 对于`forward()`. 此外，EJB 与这一切无关。您是否计划使用 EJB 与这个特定问题无关。我建议通过一本像样的书/教程来学习 JSF，而不是在不理解完整图片的情况下将一些松散的片段拼凑在一起。

# symfony - 带有关联的 symfony 2 唯一约束验证

> ID：10117185
> 
> 赞同：4
> 
> 时间：2012-04-12T03:57:53.020
> 
> 标签：symfony, doctrine, doctrine-orm

我无法验证两个字段的“唯一性”，其中一个是关联的实体。逻辑是一个国家不能有两种描述相同的税。

这是我的（失败的）尝试：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="taxes", uniqueConstraints={@ORM\UniqueConstraint(columns={"country_id", "description"})})
 * @UniqueEntity(fields={"country", "description"})
 */

class Tax
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO") 
     */
    protected $id;

    /**
     * @ORM\Column()         
     */
    protected $description;

    /**
     * @ORM\Column(type="float")
     */
    protected $value;

    /**
     * @ORM\ManyToOne(targetEntity="Country", inversedBy="taxes")
     */
    protected $country;

    //getters and setters...
} 
```

当我使用重复的税务实体测试我的应用程序时，表单通过了验证（当它不应该通过验证时）并且 Symfony 抛出一个错误：

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '1-ITBMS' for key 'country_id' 
```

**更新**：我发现这是 Doctrine 2.1 中的一个已知[错误](https://github.com/symfony/symfony/issues/1635)，已在 Doctrine 2.2 中修复。不幸的是，Symfony 2.0.11（我的当前版本）附带 Doctrine 2.1，我不知道如何正确更新我的 deps 文件

**更新 2**：更新我的 deps 和 deps.lock 文件以获取最新的 Doctrine 2.2.1 文件后，正如@elnur 建议的那样，问题仍然存在：在数据库中创建了复合唯一键，但未正确执行验证。单独升级 Doctrine 文件并不能解决问题。

**更新 3**：我什至将 Symfony 核心更新到 2.0.12 版，但它也没有解决问题。

**更新 4（已解决）**：我在控制器内部发现了错误。这是我的原始控制器代码：

```
public function createAction($country_id)
{
    //...        

    if($request->getMethod() == 'POST')
    {
        $form->bindRequest($request);
        $tax->setCountry($country); //HERE IS THE ERROR...

        if($form->isValid())
        {   
            //...
        }
    }        
    //...
} 
```

在绑定请求**之前**设置国家是解决方案。

```
public function createAction($country_id)
{
    //...        

    if($request->getMethod() == 'POST')
    {            
        $tax->setCountry($country); //NOW IT WORKS...
        $form->bindRequest($request);            

        if($form->isValid())
        {   
            //...
        }
    }        
    //...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T04:43:30.780

要升级到 Doctrine 2.2.1，请将`deps`文件中的相关条目替换为：

```
[doctrine-common]
    git=http://github.com/doctrine/common.git
    version=2.2.1

[doctrine-dbal]
    git=http://github.com/doctrine/dbal.git
    version=2.2.1

[doctrine]
    git=http://github.com/doctrine/doctrine2.git
    version=2.2.1 
```

在你`deps.lock`的这些：

```
doctrine-common 2.2.1
doctrine-dbal 2.2.1
doctrine 2.2.1 
```

然后运行：

```
bin/vendors install 
```

**更新**

由于升级 Doctrine 不起作用，请尝试[`UniqueEntityCaseInsensitive`](https://github.com/elnur/ElnurValidatorBundle/blob/master/Validator/Constraints/UniqueEntityCaseInsensitive.php)我的[`ValidatorBundle`](https://github.com/elnur/ElnurValidatorBundle).

安装包，导入约束：

```
use Elnur\ValidatorBundle\Validator\Constraints\UniqueEntityCaseInsensitive; 
```

并更换你的

```
@UniqueEntity(fields={"country", "description"}) 
```

和

```
@UniqueEntityCaseInsensitive(fields={"country", "description"}) 
```

# git - git 多个索引

> ID：10117187
> 
> 赞同：1
> 
> 时间：2012-04-12T03:58:04.890
> 
> 标签：git, github-for-mac

我的一个[git repos 删除所有文件时遇到问题 commit](https://stackoverflow.com/questions/10100296/git-commit-deleting-all-files-in-repo)。

我查看了项目的 .git 目录，发现了一大堆索引。看看这个：

```
$ ls .git
COMMIT_EDITMSG              index (from Niflheimr - 2)
FETCH_HEAD                  index (from Niflheimr - 3)
HEAD                        index (from Niflheimr - 4)
ORIG_HEAD                   index (from Niflheimr - 5)
config                      index (from Niflheimr - 6)
description                 index (from Niflheimr - 7)
github-mac-index            index (from Niflheimr - 8)
hooks                       index (from Niflheimr - 9)
index (from Niflheimr - 10) index (from Niflheimr)
index (from Niflheimr - 11) info
index (from Niflheimr - 12) logs
index (from Niflheimr - 13) objects
index (from Niflheimr - 14) refs
index (from Niflheimr - 15) sequencer
index (from Niflheimr - 16) 
```

我认为他们很糟糕，他们应该离开。我不确定 git 的方法是什么来治愈这个问题，以及将来我能做些什么来防止这种情况发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:13:35.307

听起来 GitHub for Mac 中存在错误。我会尝试通过 support@github.com 向他们报告。Mac 版 GitHub 不是开源的，并且在线上没有太多可用的文档，因此最好向他们询问。

为了清理您的 Git 存储库，只需尝试将其克隆到新的存储库中。这应该保留您的所有历史记录，同时为您提供新的索引，这样您就不会将所有这些东西都浪费在您的`.git`.

# php - php javascript与将javascript传递给php发生冲突

> ID：10117191
> 
> 赞同：0
> 
> 时间：2012-04-12T03:58:28.807
> 
> 标签：php, javascript

我有一个小问题。我在 php 中有几个具有不同团队名称的数组。每个数组包含某个联赛的球队。当我单击添加按钮时，我可以选择将新条目添加到日历中。我希望下拉列表中只有该联盟的球队。添加按钮的 onclick 我调用了一个知道单击了哪个分区的 javascript 函数。但是，为了向 javascript 提供要显示哪些团队的信息，我必须将其中一个 php 数组传递给它。我遇到的问题是告诉 php 将哪个数组传递给 javascript，具体取决于哪个联盟 javascript 处于启用状态。我不想自己指定数组，因为可以选择添加联赛，这意味着每次添加联赛时都必须编写更多代码。该网站的重点是动态的。

这是一些代码。

```
for ($i = 0;$i<$sizeof($leaguesarray);$i++){
    $htmlimploded[$i] = implode($html[$i]);
} 
```

在这里，我使用了 emplode 使我所有的 php 数组都可以读取到 javascript 中。

```
for (var h = 0; h<size; h++){ // goes through every league 
    if(h == leaguenum){ // finds the league for the clicked add button
        // this is the line that I have trouble with I can't think of 
        //anyway of telling it which array to use since it is serverside code.
        var myarray = ["<? echo $htmlimploded[]?>"]; 
    }
} 
```

上面的 Javascript 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:19:36.863

我认为您错过了以下代码中的某些内容：

```
var myarray = ["<? echo $htmlimploded[]?>"]; 
```

按理说，它应该是：

```
var myarray = ["<?php echo $htmlimploded[]?>"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:26:14.820

假设 PHP 知道联赛和球队的名称，而 JavaScript 知道被点击的联赛名称，您可以将球队名称的数组包装在一个对象中，并将联赛作为属性名称。

```
<?php 
$arr = array("League1" => array("Team 1", "Team 2"), 
             "League2" => array("Team 3", "Team 4")
       );
?>
var obj = {};
<?php foreach ($arr as $k => $v): ?>
obj.<?php echo $k; ?> = ["<?php echo implode('","', $v); ?>"];
<?php endforeach; ?> 
```

然后当用户选择联赛时，您可以循环遍历对象的属性（即联赛名称）数组。

```
clickedLeague = "League1";
for (var i = 0; i < obj[clickedLeague].length; i++)
{
    console.log(obj[clickedLeague][i]); // Logs the team name to console
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:04:04.843

内爆有效，但为什么不是 json_encode($array)？这是一种更简单的内置方式，可以将 php 数组转换为 javascript 对象或数组。如果你有类似的东西：

```
$league1 = array('team1', 'team2');
$league2 = array('team3, 'team4') ; 
```

然后制作一个多维关联数组：

```
$all_teams = array('league1'=>$league1, 'league2'=>$league2); 
```

将其编码为 Javascript 对象并将其打印到您的 JS 中：

```
$encoded = json_encode($all_teams);
print 'var teamObject = '.$encoded.';'; 
```

如果你要 console.log(teamObject) 你会看到这样的：

```
{"league1": ["team1", "team2"], "league2": ["team3", "team4"]} 
```

看起来很复杂，但现在您可以非常轻松地拉出您想要的阵列。联赛 1 数组是 teamObject.league1，联赛 2 数组是 teamObject.league2，依此类推。

# wpf - 让 IsMouseOver="True" 鼠标离开后触发效果停留片刻

> ID：10117195
> 
> 赞同：1
> 
> 时间：2012-04-12T03:59:44.060
> 
> 标签：wpf, xaml, triggers

当我将鼠标放在第一张图像上时，会出现第二张图像。当我将鼠标放在第一张图像上时，第二张图像会立即消失。即使在第一张图像上离开鼠标后，如何使第二张图像继续显示几秒钟？

```
<EventTrigger RoutedEvent="Button.Click" SourceName="P">
    <EventTrigger.Actions>
        <BeginStoryboard Storyboard="{StaticResource showA}"/>
    </EventTrigger.Actions>
</EventTrigger>

<Button Grid.Column="1" Command="{Binding Path=PressC}" CommandParameter="cam" Style="{StaticResource TransparentButton}">
            <Button.Template>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid>
                        <Image Name="1" Source="/W;component/Images/1.png" Height="100" />
                        <Image Name="2" Source="/W;component/Images/2.png" Height="200" Width="100" Margin="50,-33,-50,0" Visibility="Hidden" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">          
                            <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="imgPressedKeyboard05" Storyboard.TargetProperty="Opacity" From="0" To="2" Duration="0:0:.5" BeginTime="0:0:0"/>
                                            <DoubleAnimation Storyboard.TargetName="imgPressedKeyboard05" Storyboard.TargetProperty="Opacity" From="2" To="0" Duration="0:0:.5" BeginTime="0:0:1"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>

                            <Setter Property="Panel.ZIndex" Value="999"/>                           
                            <Setter TargetName="pressed5" Property="Visibility" Value="Visible"/>                                    
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Button.Template>
        </Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:40:38.720

使用动画而不是简单的`Setter`. 一个`EnterActions`使其可见，一个在`ExitActions`给定时间后将其隐藏。要制作动画`Visibility`，您可以使用[`ObjectAnimationUsingKeyFrames`](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.objectanimationusingkeyframes.aspx).

# c++ - 使用 g++ 对 MySQL 库的未定义引用

> ID：10117197
> 
> 赞同：6
> 
> 时间：2012-04-12T04:00:32.550
> 
> 标签：c++, mysql, path, linker, g++

我`undefined reference to 'mysql_suchandsuch@#'`在尝试将我的程序与 5.5 服务器提供的 MySQL 库链接时收到消息。安装 MySQL 时，我使用默认路径，在 Windows 上对我来说是`C:\Program Files\MySQL\MySQL Server 5.5\`. 最初，我认为空格会引起我的悲伤，但我认为我已经正确地找出了如何指向没有空格的库路径（仍然没有运气）。如果还有其他可能的原因，请告诉我。

我已经查看了此站点上的一系列问题，试图解决我的问题...

*   [问题 1](https://stackoverflow.com/q/6486447/698590)
*   [问题2](https://stackoverflow.com/q/7806773/698590)
*   [问题 3](https://stackoverflow.com/q/7976014/698590)
*   [问题 4](https://stackoverflow.com/q/577006/698590)
*   [问题 5](https://stackoverflow.com/q/4797359/698590)
*   [问题 6](https://stackoverflow.com/q/8869764/698590)
*   [问题 7](https://stackoverflow.com/q/9645844/698590)

使用 mingw/g++，根据我自己的研究以及此处的建议，我尝试使用以下选项进行链接：

*   -L"C:\Program Files\MySQL\MySQL Server 5.5\lib\" -llibmysql.lib
*   -L"C:\Program Files\MySQL\MySQL Server 5.5\lib\" -lmysqlclient.lib
*   -L"C:\Progra~1\MySQL\MySQLS~1.5\lib\" -llibmysql.lib
*   -LC:\Progra~1\MySQL\MySQLS~1.5\lib\ -lmysqlclient.lib
*   -L"C:\Progra~1\MySQL\MySQLS~1.5\lib\" -lmysql

在所有情况下，我都将`-L`/`-l`选项放在语句的最右侧，因为我知道这很重要。

我已经确认图书馆确实存在。在 /lib 目录中，我有 libmysql.lib、mysqlclient.lib 和 libmysql.dll。我没有尝试与 .dll 链接，因为我审查过的任何教程/论坛都没有建议这样做。

**我没有使用 MAKEFILES。**

有没有人对 g++/MySQL 有特定的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:20:27.223

从 2011 年 11 月开始，使用 GCC 4.6.1 的以下命令对我来说可以正常工作：

```
g++ my.cpp -I D:\Opt\MySQL5.5\include ^
  D:\Opt\MySQL5.5\lib\libmysql.dll -o myWithDll.exe

g++ my.cpp -I D:\Opt\MySQL5.5\include ^
  -L D:\Opt\MySQL5.5\lib -lmysql -o myWithLib.exe 
```

所以链接到 LIB 和 DLL 都可以工作。

您可能会收到警告（请参阅 Gaffi 的评论）。这是因为链接器在您没有指定它的情况下为您进行模糊链接；通常，它会无法链接。不过，它很好，让它为你工作，同时警告你在你没有请求的情况下发生的事情。抑制警告的方法是使模糊链接显式：

```
g++ -Wl,--enable-stdcall-fixup my.cpp -I D:\Opt\MySQL5.5\include ^
  D:\Opt\MySQL5.5\lib\libmysql.dll -o myWithDll.exe

g++ -Wl,--enable-stdcall-fixup my.cpp -I D:\Opt\MySQL5.5\include ^
  -L D:\Opt\MySQL5.5\lib -lmysql -o myWithLib.exe 
```

这是链接器的 Cygwin/RedHat/MinGW 扩展；[文档在这里](http://sourceware.org/binutils/docs-2.22/ld/Options.html)：

```
--enable-stdcall-fixup
--disable-stdcall-fixup 
```

> 如果链接[er] 找到一个它无法解析的符号，它将尝试通过查找另一个仅在符号名称格式（cdecl 与 stdcall）上不同的已定义符号来执行“模糊链接”，并将通过以下方式解析该符号链接到比赛。例如，未定义的符号_foo 可能链接到函数_foo@12，或者未定义的符号_bar@16 可能链接到函数_bar。当链接器执行此操作时，它会打印一条警告，因为它通常应该无法链接，但有时从第三方 dll 生成的导入库可能需要此功能才能使用。如果您指定 --enable-stdcall-fixup，此功能将完全启用并且不会打印警告。如果您指定 --disable-stdcall-fixup，则禁用此功能并且此类不匹配被视为错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:06:04.663

您是否尝试`-lmysql`过链接器自动`lib`添加和附加`.lib`

# ios - ios xcode header 搜索路径含义

> ID：10117201
> 
> 赞同：1
> 
> 时间：2012-04-12T04:01:19.633
> 
> 标签：ios, xcode, search, path

我必须在我的项目中引用一些库，并注意到我不理解 xcode 中使用的文件路径

所以对于`Header Search Paths`

我有例如

```
../** 
```

那是什么`**`意思？

在这种情况下

```
./../** where is the path pointing to? 
```

与unix文件目录系统有什么关系？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:03:15.137

这意味着递归。如果您选中了路径旁边的框（当您填写它时），它将递归地在该文件夹下查找文件。

# solr - #500 尝试通过提取将 PDF 添加到 Solr 索引时出现内部服务器错误

> ID：10117205
> 
> 赞同：1
> 
> 时间：2012-04-12T04:02:52.440
> 
> 标签：solr, solr-cell

我是 Solr 的第一次用户，在 Windows 7 系统上使用 v3.5 和 Tomcat 7。我浏览了 example-docs 中的 XML 示例，没有任何问题。但是，我将需要对 HTML 和 PDF 文件进行提取，当我尝试发布 PDF 文件进行索引时，我得到以下信息：

```
SimplePostTool: version 1.4
SimplePostTool: POSTing files to http://localhost:8080/solr/update/extract?literal.id=doc2..
SimplePostTool: POSTing file test.pdf
SimplePostTool: FATAL: Solr returned an error #500 Internal Server Error 
```

我使用的命令是：

```
java -Durl=http://localhost:8080/solr/update/extract?literal.id=doc2 -Dtype=application/pdf -jar post.jar test.pdf 
```

我的 solr 主目录是 C:\solr，到目前为止，我在其中完成了以下操作：

*   复制 solr 下载包的 example/solr 文件夹的内容
*   将solr下载包的contrib/extraction/lib文件夹复制到C:\solr\lib
*   将solr下载包的dist/apache-solr-cell-3.5.0.jar复制到C:\solr\dist\apache-solr-cell-3.5.0.jar
*   将 C:\solr\conf\solrconfig.xml 中相应的“lib”标签修改为`<lib dir="lib" />`和`<lib dir="dist/" regex="apache-solr-cell-\d.*\.jar" />`

我还需要做什么才能使 PDF 和 HTML 文件正常工作？我已经阅读了多个教程和“入门”指南，但似乎无法理解出了什么问题。我也是一个 Tomcat 初学者，据我所知，这些都没有出现在 Tomcat 的日志中......所以我几乎被卡住了。同样，我对 XML 示例没有任何问题，因此 Tomcat 本身运行良好并且可以识别 solr（我可以看到 solr 管理页面）。任何帮助表示赞赏。

# javascript - 在网站页面之间传输数据

> ID：10117213
> 
> 赞同：0
> 
> 时间：2012-04-12T04:03:34.077
> 
> 标签：javascript, mysql, cookies

在网站上从一个页面到另一个页面传输数据的最佳方式是什么？例如，我登录到这个站点并保持登录状态，无论我切换页面多少次，即使我关闭了浏览器。这究竟是如何完成的？我正在考虑使用 cookie，但我真的不确定？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:05:41.827

是的，您通常保持登录状态，因为有一个 cookie 存储您的会话 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:17:16.387

有两个选项 Cookies 和 Sessions

经验法则：不要相信用户输入。cookie 是用户输入，存储在 cookie 中的会话 id 是用户输入，http 标头是用户输入——这些东西必须对每一个可能的事情进行三次检查。另一方面，会话数据存储在您的服务器上，因此如果不存储在 /tmp 中，它或多或少是安全的。

最流行的会话授权设置之一是：会话 ID 存储在 cookie 中，其他所有内容（包括密码）都存储在 session.xml 中。在基于 cookie 的 id 启动会话后，您应该从会话数据中获取用户 id，然后检查存储在那里的密码是否仍然有效。

如果您设置了会话变量，则用户无法直接更改它，除非他们劫持了另一个会话 cookie。

您主要需要注意的是共享主机，您的会话数据不安全（通常其他站点可以看到它）。

还值得注意的是，cookie 数据也不安全。不应以与不应依赖表单数据相同的方式依赖它（无论客户端验证告诉您什么）。

您使用密码的最佳做法是：

*   将密码以散列形式存储在数据库中，最好是SHA1（第一选择）或MD5（第二选择）；
*   当您收到用户的密码时，将其加密并与数据库中存储的内容进行核对；
*   在用户会话中设置登录的用户名；
*   在一段时间后（即使是几天）使 cookie 过期，而不是让它永远持续下去；和
*   尽可能使用安全连接（HTTPS 而非 HTTP）。SSL 证书很便宜。

# asp.net-mvc - 尝试解密 FormsAuthentication 票证始终无法验证数据

> ID：10117214
> 
> 赞同：5
> 
> 时间：2012-04-12T04:03:39.557
> 
> 标签：asp.net-mvc, authentication, asp.net-membership, asp.net-web-api

我正在使用新的 webapi。

现在我不知道我是否正确执行此操作，但我正在尝试设置我的 api 以在 HttpResponseMessages 标头中返回身份验证 cookie，以便在另一个 mvc 应用程序上使用。

我正在使用 FormsAuthenticationTicket，因为我认为它是我需要使用的

```
 public HttpResponseMessage Get(LoginModel model)
    {
        if (model.UserName == "bob")
        {
            //  if (Membership.ValidateUser(model.UserName, model.Password))
            // {
            var msg = new HttpResponseMessage(HttpStatusCode.OK);
            var expires = DateTime.Now.AddMinutes(30);
            var auth = new FormsAuthenticationTicket(1, model.UserName, DateTime.Now, expires,
                                                     model.RememberMe,"password",
                                                     FormsAuthentication.FormsCookiePath);
            var cookie = new HttpCookie("user");
            cookie.Value = FormsAuthentication.Encrypt(auth);
            cookie.Domain = "localhost";
            cookie.Expires = expires;
            msg.Headers.Add("result",cookie.Value);
            return msg;
            //   }
        }
        return new HttpResponseMessage(HttpStatusCode.Forbidden);
        //else
        //{
        //    return "The user name or password provided is incorrect.";
        //}
    } 
```

现在在我的 mvc 应用程序的登录控制器中，我调用服务并从我在 api 控制器中设置的标头获取数据值。

```
 string data = response.Headers["result"].ToString();
   FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(data); 
```

每次我尝试运行 FormsAuthentication.Decrypt 时，我都会收到错误消息

> 无法验证数据。

我认为这是由于 api 加密数据时使用了网站不知道的某种密钥。我对吗？

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T05:56:52.460

> 我认为这是由于 api 加密数据时使用了网站不知道的某种密钥。我对吗？

FormsAuthentication.Encrypt 和 Decrypt 方法使用[机器密钥](http://msdn.microsoft.com/en-us/library/ff649308.aspx)。因此，请确保您为 Web API Web 应用程序和消费 ASP.NET MVC 应用程序配置了相同的密钥。

您还可以查看[以下文章](http://codebetter.com/howarddierking/2011/10/11/oauth-2-0-in-web-api/)，该文章说明了如何将 OAuth 2.0 与 Web API 结合使用。

# c - PIC18F 延迟

> ID：10117221
> 
> 赞同：3
> 
> 时间：2012-04-12T04:04:13.360
> 
> 标签：c, delay, microcontroller, pic18, mplab

我正在使用带有 HiTech ANSI C 编译器和 MPLAB v8.43 的 PIC18F14K50。我的 PIC 代码终于启动并运行和工作，除了延迟功能。这对我的应用程序至关重要——我需要它在给定的毫秒、秒或分钟数内处于某些状态。

我一直试图为此找到解决方案大约 2 周，但到目前为止还没有成功。我放弃并`asm("nop");`在循环中编写了自己的延迟函数，但这会产生非常不可预测的结果。如果我告诉它等待半秒或 5 秒，它就足够准确了。但是，一旦我告诉它等待更长的时间——比如 10 分钟，延迟只会持续大约 10 到 20 秒，而 2 分钟以上是比 500 毫秒延迟更短的眨眼。

这是我的配置保险丝和`wait()`功能：

```
#include <htc.h>

__CONFIG(1, FOSC_IRC   & FCMEN_OFF & IESO_OFF & XINST_OFF);
__CONFIG(2, PWRTEN_OFF & BOREN_OFF & WDTEN_OFF);
__CONFIG(3, MCLRE_OFF);
__CONFIG(4, STVREN_ON  & LVP_OFF   & DEBUG_OFF);
__CONFIG(5, 0xFFFF);
__CONFIG(6, 0xFFFF);
__CONFIG(7, 0xFFFF);

void wait(int ms)
{
  for (int i = 0; i < ms; i++)
    for (int j = 0; j < 12; j++)
      asm("nop");
} 
```

就像我说的那样，如果我打电话`wait(500)`到那`wait(30000)`我会得到半秒到 30 秒的延迟到我感兴趣的容差范围内 - 但是如果我打电话`wait(600000)`那么我不会像我期望的那样延迟 10 分钟，而是大约 10-15 秒，`wait(120000)`不会延迟 2 分钟，而是快速眨眼。

理想情况下，我想让内置`__delay_ms()`函数工作并从我的内部调用`wait()`，但是我没有取得任何成功。如果我尝试这样做，`#include <delay.h>`那么我的 MPLAB 会抱怨没有这样的文件或目录。如果我查看 HiTech 示例中的 delay.h ，有一个已`DelayUs(unsigned char)`定义的和一个`extern void DelayMs(unsigned char)`我没有尝试过的，但是当我尝试将 extern 直接放入我的 C 代码中时，在链接时出现未定义的符号错误。

中短延迟和长延迟之间的差异是没有意义的。我唯一的解释是编译器已经优化了 NOP 或其他东西。

就像我说的，它是带有上述配置保险丝的 PIC18F14K50。我对 PIC 没有太多经验，但我认为它在这种设置下运行在 4MHz。

我对来自库或宏的外部函数或带有 NOP 的手写函数感到满意。我所需要的只是让它精确到每分钟几秒钟左右。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T04:35:50.847

PIC 是 16 位微控制器吗？我的猜测是你在等待的值上溢出，它会在 2^15 之后溢出（32,767 是有符号的 16 位 int 的最大值）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T04:42:46.013

如果将`int`变量更改为`unsigned`，则最多可以达到 65535 毫秒。要高于此，您需要使用`long`作为参数类型并将循环嵌套得更深。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T21:26:14.593

一个更好的长期解决方案是编写一个延迟函数，该函数使用芯片中的一个内置硬件定时器。如果您有其他中断触发和使用一些 CPU 周期等情况，您的 NOP 延迟将不会在很长一段时间内准确

# php - ImageMagick 绘制平移坐标

> ID：10117222
> 
> 赞同：0
> 
> 时间：2012-04-12T04:04:13.733
> 
> 标签：php, imagemagick, imagick

我使用坐标生成了一个多边形，该坐标存储在一个`ImagickDraw`对象中。我想旋转对象的几个副本，然后将它们绘制到我的图像上的不同位置。

我正在使用 imagick 3.1.0rc1 和 ImageMagick 6.7.6-5。

这是我正在使用的：

```
$sprite = new ImagickDraw();
$sprite->polygon($coords) //array of coordinates

$sprite->rotate(-90); //Doesn't seem to rotate
$sprite->translate($x, $y); //Doesn't seem to translate

$im->drawImage($sprite); 
```

问题是由于某种原因，`rotate`什么`translate`都不做。难道我做错了什么？还是不做我认为应该做的事情`rotate`？`translate`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-12T16:45:15.157

仅作记录，您必须在绘制**之前**应用旋转/平移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T02:44:19.050

似乎翻译不是这样做的方法。

我最终在一个新`ImagickDraw`对象中生成了精灵，然后使用`compositeImage()`适当的位置将其绘制到我的主图像上。

# android - 代理无法解析

> ID：10117229
> 
> 赞同：1
> 
> 时间：2012-04-12T04:06:00.333
> 
> 标签：android, proxy, httpurlconnection

我从这里使用了相同的代码，只做了很少的改动：
[Downloading File in Android](https://stackoverflow.com/questions/10102812/downloading-file-in-android)

```
Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(
                    "Myproxy", 8080));   
                URL url = new URL(sUrl[0]);  
                HttpURLConnection uc = (HttpURLConnection) url
                    .openConnection(proxy);  
                 uc.connect();  
 int fileLength = uc.getContentLength(); 
```

我收到以下异常：
04-12 09:31:42.401: WARN/System.err(5181): java.net.UnknownHostException: Host is unresolved: Myproxy:8080
04-12 09:31:42.405: WARN/ System.err(5181): at java.net.Socket.connect(Socket.java:1057)
04-12 09:31:42.405: WARN/System.err(5181): at org.apache.harmony.luni.internal .net.www.protocol.http.HttpConnection.(HttpConnection.java:62)
04-12 09:31:42.405: WARN/System.err(5181): at org.apache.harmony.luni.internal.net.www .protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:88)
04-12 09:31:42.405: WARN/System.err(5181): at org.apache.harmony.luni.internal.net.www.protocol。 http.HttpURLConnectionImpl.getHTTPConnection(HttpURLConnectionImpl.java:927)
04-12 09:31:42.409: WARN/System.err(5181): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:884)
04-12 09:31:42.409: WARN/System.err(5181): 在 com.test.filedownload.FileDownloadActivity$DownloadFile.doInBackground(FileDownloadActivity.java:99)
04-12 09:31:42.413: WARN/System.err(5181 ): 在 com.test.filedownload.FileDownloadActivity$DownloadFile.doInBackground(FileDownloadActivity.java:1)
04-12 09:31:42.416: WARN/System.err(5181): 在 android.os.AsyncTask$2.call(AsyncTask .java:185)
04-12 09:31:42.420: WARN/System.err(5181): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-12 09:31:42.420: WARN/System.err(5181): at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-12 09:31:42.420: WARN/System.err( 5181): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-12 09:31:42.424: WARN/System.err(5181): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:561)
04-12 09:31:42.424: WARN/System.err(5181): at java.lang.Thread.run(Thread.java:1096)

请帮助解决同样的问题。

谢谢，
斯内哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:41:57.230

这是 Android 版本 2.2 中的一个问题，它们不支持代理
但某些手机（如 LG P500）使用 OPera 作为浏览器。关于这个有一个很好的细节

```
http://android-proxy.blogspot.com/ 
```

但是您可以使用 proxoid 真正实现这一点，它是 Android 的 HTTP 代理。

```
code.google.com/p/proxoid/ 
```

可以从该站点获得更多信息。希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:22:19.857

> java.net.UnknownHostException：主机未解析：Myproxy：8080

这表示网络中没有名为 Myproxy 的主机。获取代理名称和端口并在代码中使用它们。

# c# - 使用正则表达式重命名文件

> ID：10117237
> 
> 赞同：2
> 
> 时间：2012-04-12T04:06:40.630
> 
> 标签：c#, regex, file-rename

我想要做的是重命名特定文件夹中的所有文件，这样如果文件名中包含任何数字，它将被删除。

比如说，如果文件名 `someFileName.someExtension`保持不变，但如果文件是这样的， `03 - Rocketman Elton John`它应该重命名为`Rocketman Elton John`（我做了删除 的部分`-`），另一个例子，如果文件名是`15-Trey Songz - Unfortunate (Prod. by Noah 40 Shebib)`它应该重命名为`Trey Songz Unfortunate (Prod. by Noah Shebib)`（我可以再次删除`-`）。要求用户选择这样的文件夹

```
private void txtFolder_MouseDown(object sender, MouseEventArgs e)
        {
            FolderBrowserDialog fd = new FolderBrowserDialog();
            fd.RootFolder = Environment.SpecialFolder.Desktop;
            fd.ShowNewFolderButton = true;
            if (fd.ShowDialog() == DialogResult.OK)
            {
                txtFolder.Text = fd.SelectedPath;
            }
        } 
```

此外，它的重命名是这样开始的

```
private void btnGo_Click(object sender, EventArgs e)
{
    StartRenaming(txtFolder.Text);
} 
```

和

```
private void StartRenaming(string FolderName)
{
   string[] files = Directory.GetFiles(FolderName);
   foreach (string file in files)
        RenameFile(file);
} 
```

现在在重命名文件中，我需要函数，即删除文件中任何数字的正则表达式。它被实现为

```
private void RenameFile(string FileName)
{
    string fileName = Path.GetFileNameWithoutExtension(FileName);
   /* here the function goes that will find numbers in filename using regular experssion and replace them */ 
} 
```

所以我能做的是，我可以使用类似的东西

```
1  var matches = Regex.Matches(fileName, @"\d+");
2  
3  if (matches.Count == 0)
4    return null;
5
6  // start the loop
7  foreach(var match in matches)
8  {
9     fileName = fileName.Replace(match, ""); /* or fileName.Replace(match.ToString(), ""), whatever be the case */    
10 }
11  File.Move(FileName, Path.Combine(Path.GetDirectoryName(FileName), fileName));
12  return; 
```

但我认为这不是正确的做法吗？有没有更好的选择来做到这一点？或者这是最好的（也是唯一的选择）吗？`IN`另外， String.Replace中有什么类似的东西吗？在 sql 中说，我可以`IN`在 select 命令中使用并指定一堆 where 条件，但是 String.Replace 是否有类似的东西，这样我就不必运行从第 7 行到第 10 行运行的循环？还有其他更好的选择吗？

ps：关于那个正则表达式，我发布了一个问题[正则表达式的数字？](https://stackoverflow.com/questions/10113044/regular-expression-for-numbers)（显然我不够清楚），从中我得到了我的正则表达式，如果你认为其他正则表达式会做得更好，请告诉我，如果你需要任何其他信息，请告诉我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:21:42.993

您可以尝试 Regex.Replace 删除数字，即：

```
Regex.Replace(fileName, @"\d", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:27:05.597

In the off chance that you are merely looking to *simply rename* the files and you thought that creating your own program would be the best way - I would recommend [PFrank](http://www3.telus.net/pfrank/) as a standalone tool (especially if you understand regex already)

If you do desire this and if you do take my suggestion (*and since it's not the simplest and clearest interface*), you would use `\d+(\s?-)?` for the match expression (in the first column in PFrank), which should match any number of digits, optionally followed by a hyphen and an additional optional whitespace character between the two. You would then have no replacement expression (zero-length string or an empty second column in PFrank). Finally, select the folder containing the files you want renamed and click the `scan` button; in the dialog that pops up, confirm your results and click the `rename` button. Sorry if I wasted anyone's time!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T04:21:28.077

对于替换，您应该查看可以一次替换所有出现的[Regex.Replace](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)。

否则代码看起来没问题（除了`fileName.Replace("match", "")`使用常量字符串的奇怪......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T04:33:36.813

这个怎么样 ？

```
private void StartRenaming(string FolderName)
{
    string[] files = Directory.GetFiles(FolderName);
    string[] applicableFiles = (from string s in files
                                where Regex.IsMatch(s, @"(\d+)|(-+)", RegexOptions.None)
                                select s).ToArray<string>();

    foreach (string file in applicableFiles)
        RenameFile(file);
}

private void RenameFile(string file)
{
    string newFileName = Regex.Replace(file, @"(\d+)|(-+)", "");
    File.Move(file, Path.Combine(Path.GetDirectoryName(file), newFileName));
} 
```

`StartRenaming`方法现在将根据`Regex`匹配限制要处理的文件数。如果文件包含一个数字，`-`那么它将被处理，从而优化整个过程。 `RenameFile`替换`-`字符串中的数字和并为您提供`newFileName`

我不太确定它的正确性`File.Move(file, Path.Combine(Path.GetDirectoryName(file), newFileName));`，但我想你的问题是避免`foreach`循环，我想我已经提供了一个合适的解决方案。

Please note that I was not able to completely test this, so let me know whether it works for you and if it doesn't I will be happy to help you further.

**EDIT :** Forgot to mention that `file.Replace(@"(\d+)|(-+)", "")` will remove digits as well as `-` from the `file` string.

**EDIT :** Corrected `file.Replace` to `Regex.Replace`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T23:32:44.523

I prefer to use brackets to select the before and after and then use the $n method to rebuild the string how you want it to be.

```
"03 - Rocketman Elton John"  -Replace '^([^-]*) - ([^-]*)', '$1 $2' 
```

# android - 如何从Android中的一个Tab Host中清除不同TabHost中所有listView的适配器？

> ID：10117238
> 
> 赞同：0
> 
> 时间：2012-04-12T04:06:42.847
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我有一个带有三个标签的标签主机。每一个都是一个活动。在每个活动中都有一个包含相同值的列表视图。如果从选项卡 1 中的列表项中删除一项或任何修改，那么我想在选项卡 2 和选项卡 3 中重新填充列表视图的值。

请建议我可用的链接或示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:19:14.680

如果您从游标创建列表，我相信您应该能够使用 cursor.requery() 简单地重新查询游标。

当然，这是假设您*没有*为每个选项卡使用单独的活动......

# c - 系统调用 - 如果字符存在，如何在字符串中查找字符

> ID：10117239
> 
> 赞同：0
> 
> 时间：2012-04-12T04:06:47.527
> 
> 标签：c, file-io, system, filehandle

我对系统调用非常陌生。我想我可以使用 Index 但不太确定如何实现。假设我想查找包含每个“：”和“>”的数据的文件

例如，我有一个 myfile.txt，其中包含以下内容：

你好：这是对 (1=zero i>10) 的测试；此行应写入两个文件，因为它同时包含 : 和 >

所以我要打开两个用于写入的文件和一个用于读取的文件（myfile.txt），当我找到包含“：”的行时，我会将其写入colon.txt 文件。当该行包含“>”字符时，我会将其写入greaterthen.txt 文件。

更多评论：是的，我需要实现缓冲区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:11:45.217

对不起，我误读了这个问题。

您将需要考虑几件事。是的，你需要一个缓冲区，但如果你的行大于缓冲区，你也有句柄。所以你需要两个缓冲区，一个用来读入，另一个用来组装整行。虽然可以在一个缓冲区中完成，但它似乎过于复杂。

我的 C 很生锈，但这似乎有效。它需要错误处理，我确信它与您的编码风格不匹配，但我的一次完成测试似乎有效。读取缓冲区异常小，以证明行大于缓冲区的情况 - 在现实世界中，您的读取缓冲区会大得多。

```
#include <stdio.h>
#include <fcntl.h>
#include <stdlib.h>

int findchar(char*, int, char);

int main()
{
    size_t dataIn = open("myfile.txt", O_RDONLY);
    size_t gtOut = open("greaterthan.txt", O_CREAT | O_WRONLY);
    size_t coOut = open("colon.txt", O_CREAT | O_WRONLY);

    char buffer[12];
    int iReadCnt;
    char* lineBuffer = NULL;
    int lineBufferSize = 0;

    // read input file until no more input
    while (iReadCnt = read(dataIn, buffer, sizeof(buffer)))
    {
        int x;
        int n;
        char* b;

        // add buffer to dynamic line buffer
        n = lineBufferSize + iReadCnt;
        b = malloc(n);
        memcpy(b, lineBuffer, lineBufferSize);
        memcpy(&b[lineBufferSize], buffer, iReadCnt);
        // free old buffer if exists
        if (lineBuffer)
        {
            free(lineBuffer);
        }

        lineBufferSize = n;
        lineBuffer = b;

        // look for end of line
        x = findchar(lineBuffer, lineBufferSize, '\n');

        if (x >= 0)
        {
            int gtPos;
            int coPos;
            int n;
            char* b;

            // look for gt
            gtPos = findchar(lineBuffer, x, '>');

            if (gtPos >= 0)
            {
                write(gtOut, lineBuffer, x + 1);
            }

            // look for colon
            coPos = findchar(lineBuffer, x, ':');

            if (coPos >= 0)
            {
                write(coOut, lineBuffer, x + 1);
            }

            // remove line from buffer
            n = lineBufferSize - (x + 1);
            b = malloc(n);
            memcpy(b, &lineBuffer[x + 1], n);
            free(lineBuffer);
            lineBufferSize = n;
            lineBuffer = b;
        }
    }

    // close files
    close(dataIn);
    close(gtOut);
    close(coOut);
    exit(0);
}

// simple function to find a character in a buffer
int findchar(char* buffer, int len, char c)
{
    int i;
    for (i = 0; i < len; ++i)
    {
        if (buffer[i] == c)
        {
            return i;
        }
    }

    return -1;
} 
```

# javascript - jQuery replace 删除 IE 中的换行符

> ID：10117255
> 
> 赞同：2
> 
> 时间：2012-04-12T04:09:44.013
> 
> 标签：javascript, jquery, replace

我有代码：

```
$("#txtDescription").blur(function(){
    $("#txtDescription").text($("#txtDescription").text().replace('@', ''));
}) 
```

删除@符号是有人将其复制到文本区域中。这样做的问题是，在 IE（所有版本）中，它还会删除添加的任何换行符，并将所有文本添加到带有空格的单行中。另一个问题是，如果我将信息保存到数据库表中，换行符实际上就在那里，所以它似乎只是一个视觉上的东西。如果用户认为他们的信息都在一行上，那就不好了。

如果用户粘贴到文本区域，是否有人对如何删除字符有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:15:07.610

如果`#txtDescription`是`<textarea>`你的帖子所建议的那样，那么你想使用 jQuery 的`val`函数而不是`text`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:16:33.397

```
$("#txtDescription").blur(function(){
    $(this).val(function(i,val){
        return val.replace('@', '')
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T04:19:52.233

```
$("#txtDescription").blur(function(){
    var newval = $(this).val().replace('@','');
    $(this).val(newval);
}) 
```

# c++ - 什么是 C++ 前导码和 get 函数的前置条件

> ID：10117256
> 
> 赞同：2
> 
> 时间：2012-04-12T04:10:07.973
> 
> 标签：c++

我是 C++ 的初学者，作业要求我们记录我们的代码（序言，以及函数的前置条件）。我想知道它们如何适用于我的学生课程？

***特别是，序言***到底是什么意思？对于我的 get 方法，前置条件和后置条件是什么？我有一种感觉他们真的是为了更高级的功能（这些谁改变了数据的价值）？

```
class Student:
{
public:
    // Constructor for the student class, require 4 parameters
    // In the order of string (first name), string (last name), 
    // integer (student ID), string (major)
    Student(string myFirstName, string myLastName, int myID, string myMajor)
    {
        firstName = myFirstName;
        lastName = myLastName;
        uid = myID;
        major = myMajor;
    }

    // Get function for the student's first name
    // Return the student's first name
    string getFirstName()
    {
        return firstName;
    }
    .....

private:
    string firstName; // Student's first name
    string lastName; // Student's last name
    int uid; // Student's ID number in a number format
    string major; // Student's major
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T04:28:31.660

序言是出现在记录其行为的函数之前的源代码注释，通常以像 doxygen 这样的工具可以自动从中创建有用文档的方式出现。

一个好的文档政策是**记录所有不明显的东西和不明显的东西**。在此基础上，我会说您的 getXXX() 没有值得记录的前置或后置条件。诸如“必须在正确构造的对象上调用”之类的内容只是浪费读者的时间，就像“调用者将收到学生特定 XXX 数据的副本”之类的后置条件一样。不要这样做！值是否可以合法地为空字符串的问题是构造函数的问题（或者甚至可能是类不变量 - 类保持为真，例如，如果值为空并且不提供函数清除值），而不是`get`函数文档。

同样，您对 firstName、lastName 和 major 的评论绝对没有任何价值，但您的评论`uid`确实增加了价值——记录了对字符串格式的要求！从那我可以告诉你犯了一个错误，因为该字段是一个`int`，并且有一些事情需要调查和纠正。但更一般地说，假设您有一个字符串类型 - 评论可能有用地传达对 id 格式的一些限制，说这些 id 与某些其他 API 或源相关，举个例子等。

更一般地说，前置条件不仅适用于 mutator（数据更改）函数。例如，一个函数`day_for_date(int year, int month, int day)`告诉您特定日期落在一周中的哪一天可能有一个先决条件，即年/月/日确实描述了一个有效的日期，即公元 1000 年到 3000 年之间的有效日期。这很讨厌，但这意味着如果您已经检查过某个函数调用不会浪费时间重新验证它。在防御性编程风格（恕我直言，倾向于使代码更健壮）中，您往往不会将其作为先决条件；相反，接受冗余验证作为净赢（尽管如果调用者需要性能，您可以提供明确的选项来禁用它），并在日期不符合预期时记录异常或错误结果。不同之处在于，前提条件是调用者必须保证函数按照记录的方式运行，

后置条件仅对 mutators 有意义：在调用非变异访问器之后可以断言的任何状态都必须事先为真 - 它可能是类不变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:22:52.180

如果这是家庭作业，我**强烈**建议你在课堂上问这个问题，因为大多数老师都有一些在线社区不太可能知道的特殊要求（除非你告诉我们;-)。话虽如此，我们也许可以让您朝着正确的方向开始。

*序言*通常是对特定文件、类或函数作用的（简短）描述。

*前置条件*是对调用者传递的参数的要求，以及调用之前的程序状态。他们确定函数在什么条件下会产生正确的结果。例如，您可以要求示例类构造函数中的名字和姓氏不为空。

*后置条件*通常记录函数应用的副作用。例如，

```
class Person
{
public:
    std::string firstName () const;

    // post-condition: firstName() returns 'name'.
    void setFirstName (std::string name);
}; 
```

[关于前置条件](http://en.wikipedia.org/wiki/Precondition)和[后置条件](http://en.wikipedia.org/wiki/Postcondition)的维基百科文章提供了更详细的描述。

# java - setBackgroundDrawable 工作正常；直到按下另一个按钮，为什么？

> ID：10117257
> 
> 赞同：1
> 
> 时间：2012-04-12T04:10:23.347
> 
> 标签：java, android, drawable

在我的应用程序中，我有 4 个主按钮，外加另外 2 个。这 4 个按钮是在主活动开始时声明的。

```
Button button1, button2, button3, button4;
button1 = (Button) findViewById(R.id.button1);
button1.setTag("blue"); 
```

（每个按钮都有一个标签，设置方式与button1相同）

我想在按下时循环显示不同颜色的四个按钮。我通过以下方式管理它；

```
public void button1(View v) {

    if ("blue".equals(button1.getTag())) {
        button1.setBackgroundDrawable(getResources().getDrawable(
                R.drawable.brown));
        button1.setTag("brown");
    } else if ("brown".equals(button1.getTag())) {
        button1.setBackgroundDrawable(getResources().getDrawable(
                R.drawable.red));
        button1.setTag("red");
    } else if //...etc 
```

这一切都很好，直到我按下两个按钮中的任何一个，其中一个按钮的示例代码

```
 public void back(View v) {
    setContentView(R.layout.main);
    t = new TextView(this);
    t = (TextView) findViewById(R.id.textView1);
    t.setText("");
} 
```

一旦我按下两个按钮中的任何一个，颜色就会变回 xml 文件中设置的原始可绘制对象

```
android:background="@drawable/blue" 
```

现在，当我按下 4 个主要按钮时，drawable 不会改变，但我肯定知道它正在重新标记，那么为什么在按下按钮后它不会改变 drawable？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T04:22:09.937

如果您的“两个按钮” onClick 处理程序调用`Activity.setContentView(int)`，则所有按钮都将重置为在原始 XML 布局中指定的方式。**新视图将被夸大，并且这些视图没有标签**（您似乎没有在调用 后重新设置标签`setContentView`）。空标签不会匹配您的任何颜色字符串，因此您的按钮不会循环它们的背景。

如果您想保持视图的原样，请不要重置 Activity 的内容视图。在大多数情况下，`setContentView`Activity 的每个生命周期只调用一次，尽管显然可能有一些例外。

# php - 按字母数字字段对 MySQL 查询结果进行排序

> ID：10117258
> 
> 赞同：0
> 
> 时间：2012-04-12T04:10:33.377
> 
> 标签：php, mysql

我正在使用 php 查询数据库中的表。其中一个字段是名为“rank”的列，具有如下数据：

```
none
1-bronze
2-silver
3-gold
...
10-ambassador
11-president 
```

我希望能够根据该“排名”列对结果进行排序。任何字段为“无”的结果都会被排除在外，因此不会考虑在内。正如您已经猜到的那样，现在结果会像这样返回：

```
1-bronze
10-ambassador
11-president
2-silver
3-gold 
```

当然，我希望对其进行排序，如下所示：

```
1-bronze
2-silver
3-gold
...
10-ambassador
11-president 
```

现在，查询作为对象返回。我已经尝试过不同的排序选项，例如 natsort、sort、array_multisort，但还没有按照我确定的方式工作。如果可能的话，我宁愿将结果保存在对象形式中。我将在下一步中将数据传递给视图。不过，将对象传递给视图然后在那里进行工作是完全可以接受的。所以这毕竟不是问题。:)

感谢您的帮助。我希望我说得通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:25:40.163

使用 natsort() 获取数组中的值并在 PHP 中对其进行排序

[纳特索](http://php.net/manual/en/function.natsort.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:16:02.033

这将起作用 -

```
SELECT alphanumeric, integer FROM sorting_test ORDER BY LENGTH(alphanumeric), alphanumeric 
```

来源 - [MySQL 中的自然排序](https://stackoverflow.com/questions/153633/natural-sort-in-mysql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:07:06.277

用这个函数排序怎么样。我假设如果你得到一个对象，你应该将对象转换为数组，然后使用它

```
function arraySubSort($array, $subkey, $sort = 'asort') 
{
  foreach($array as $key => $value) 
  {
    $temp[$key] = strtolower($value[$subkey]);
  }

  $sort($temp);
  foreach($temp as $key => $value) 
  {
    $result[] = $array[$key];
  }
  return $result;
}

$data = $your_array;
$field = 'ranks';
arraySubSort($data,$field); 
```

它将使用您分配的字段对数组进行排序。如果您获得多条记录，那么使用它进行排序是一件好事。

# algorithm - 协作推荐还是结构化推荐？

> ID：10117263
> 
> 赞同：2
> 
> 时间：2012-04-12T04:12:15.577
> 
> 标签：algorithm, recommendation-engine, collaborative-filtering

我正在构建一个向学生推荐导师的 Rails 应用程序，反之亦然。我需要根据他们的专业（数学、生物等）、经验（初级等）、班级（数学 201 等）、偏好（自我描述的关键字）和评分等多个维度进行匹配。

我查看了一些 Rails 协作推荐引擎（recommendable、recommendify）和 Mahout。就我而言，协作推荐似乎不是最佳选择，因为我有更多结构化数据，这允许进行更结构化的查询。例如，我可以有一个学生的推荐逻辑，例如：

```
if student looks for a Math tutor in Math 201:
  if there's a tutor in Math major offering tutoring in Math 201 then return
  else if there's a tutor in Math major then sort by experience then return
  else if there's a tutor in quantitative major then sort by experience then return
  ... 
```

我的问题是：

1.  鉴于我的推荐系统将基于偏好，协作推荐算法有什么好处？

2.  如果它确实提供了显着的好处，我如何将它与上述基于偏好的推荐结合起来？

3.  由于我的方法将涉及查询多个表，因此可能效率不高。我该怎么办？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T06:55:34.580

听起来您对兼容性的衡量可以重新制定为一个有利可图的[指标](http://en.wikipedia.org/wiki/Metric_%28mathematics%29)。您应该做的是尝试将您的“列”解释为数据维度的不同组成部分。这个想法是你最终应该产生一个二元函数，它返回学生和导师（以及学生/学生和导师/导师）之间兼容性的度量。将此指标扩展到所有类型的数据的动机是，您可以使用此想法将匹配标准重新制定为最近邻搜索：

[http://en.wikipedia.org/wiki/Nearest_neighbor_search](http://en.wikipedia.org/wiki/Nearest_neighbor_search)

这个问题有很多数据结构和解决方案，因为它已经被很好地研究过了。例如，您可以尝试以下经常用于点云数据的库：

[http://www.cs.umd.edu/~mount/ANN/](http://www.cs.umd.edu/~mount/ANN/)

为了稍微优化一下，您还可以尝试通过对数据集运行主成分分析来预过滤数据。这可以让您减少进行最近邻搜索的空间维度，并且通常具有减少一些噪音的额外好处。

[http://en.wikipedia.org/wiki/Principal_component_analysis](http://en.wikipedia.org/wiki/Principal_component_analysis)

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T19:41:57.707

就我个人而言，我认为协同过滤 (cf) 对你很有效。请注意，cf 的中心思想是***serendipity***。换句话说，添加太多约束可能会导致对用户的推荐不温不火。cf 的重点是根据***相似***用户提供令人兴奋的相关推荐。您不需要施加如此严格的约束。

如果您可能决定实施自定义 cf 算法，我建议您阅读 Amazon 发表的这篇文章[[pdf]](http://www.disco.ethz.ch/lectures/fs10/seminar/paper/michael-2.pdf)，其中讨论了 Amazon 的推荐系统。简而言之，他们使用的算法如下：

```
for each item I1
    for each customer C who bought I1
        for each I2 bought by a customer
            record purchase C{I1, I2}
    for each item I2
        calculate sim(I1, I2) 
        //this could use your own similarity measure, e.g., cosine based
        //similarity, sim(A, B) = cos(A, B) = (A . B) / (|A| |B|) where A
        //and B are vectors(items, or courses in your case) and the dimensions
        //are customers
return table 
```

请注意，此表的创建将离线完成。在线算法将很快返回推荐。显然，推荐质量非常好。

无论如何，如果您想更好地了解 cf 的总体情况（例如，各种 cf 策略）以及为什么它可能适合您，请阅读那篇文章（别担心，它非常易读）。实现一个简单的 cf 推荐器并不困难。后期可以进行优化。

# php - 在 mySQL 中加入表以获取特定列

> ID：10117267
> 
> 赞同：-1
> 
> 时间：2012-04-12T04:12:40.517
> 
> 标签：php, mysql

我有两张桌子：

```
- cart , cols are (painting_id, session_id, ip, user_agent)
- paintings , cols (painting_id, price) 
```

现在我必须从桌面购物车中选择绘画 ID。我需要加入这两个表并从表“绘画”中获取所有绘画的价格总和。注意表购物车没有价格列，它必须从“绘画”表中导入。仅显示已通过特定会话 ID 或电子邮件 ID 添加到购物车表中的那些画的价格总和。

这是我到目前为止尝试过的查询

```
SELECT p.SUM(price) FROM paintings 
p JOIN cart c ON p.painting_id = c.painting_id 
WHERE c.session_id = '$session' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:23:09.390

应该是`SUM(p.price)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:17:37.923

试试这个查询

```
SELECT cart.user_agent, sum(paintings.price)
from cart inner join
paintings on 
cart.painting_id=paintings.painting_id 
where session_id='$session' 
```

如果您想要所有用户的总成本

```
SELECT cart.user_agent, sum(paintings.price)
from cart inner join
paintings on 
cart.painting_id=paintings.painting_id 
group by cart.session_id 
```

# php - 尝试使用 RecursiveIteratorIterator 在 PHP 中制作多级动态菜单

> ID：10117272
> 
> 赞同：-3
> 
> 时间：2012-04-12T04:13:31.263
> 
> 标签：php

我正在尝试编写多级页面菜单导航但无法正常工作，我怀疑这与 RecursiveIteratorIterator 行有关，任何帮助将不胜感激。我正在考虑这样的解决方案，但也许我走得很远。谢谢您的帮助。这是我的代码：

```
<ul id="nav">
       <?php
 //searchWebsitePagesPath("blog.php");
 ?>
        <li><a href="<?php  echo searchWebsitePagesPath('index.php'); ?>">Home</a></li>
<!--        <li><a href="index.php" id="here">Home</a></li>      -->
        <li><a href="<?php  echo searchWebsitePagesPath('blog.php'); ?>">Journal</a></li>
        <li><a href="<?php  echo searchWebsitePagesPath('gallery.php'); ?>">Gallery</a></li>
        <li><a href="<?php  echo searchWebsitePagesPath('files_upload.php'); ?>">Upload</a></li>
        <li><a href="<?php  echo searchWebsitePagesPath('contact.php'); ?>">contact</a></li>
        <li><a href="<?php  echo searchWebsitePagesPath('register.php'); ?>">Register</a></li>
    </ul>
<?php

    function searchWebsitePagesPath($pageName){
        // echo ("$pageName");
        //    $files = "";
        $files = new RecursiveIteratorIterator(new RecursiveDirectoryIterator('.'));

        $my_path="";
        $myArray="";
        $pathReplace="";
        $finalPathReplace="";
        foreach ($files as $file) {

            if($file->getFilename() === $pageName ){
                $pathReplace=str_replace (str_replace('/','\\',$_SERVER['DOCUMENT_ROOT']),'',$file->getRealPath());
                $finalPathReplace = $pathReplace ;
                //           echo $finalPathReplace;
                $myArray=explode("\\",$pathReplace) ;
                $count= count($myArray);
                $reverted = new ArrayIterator(array_reverse($myArray));
                $server_path="" ;
                for($i=1;$i<$count;$i=$i+1 ) {
                    $server_path =$server_path."../";
                }

                $my_path=$server_path.$reverted[$count-1];
            }

        }

        $my_path="\"$my_path\"" ;
        $files = "";
        $files = new RecursiveIteratorIterator(new RecursiveDirectoryIterator("$my_path"));
        foreach ($files as $file) {

            if($file->getFilename() === $pageName ){
                $pathReplace=str_replace (str_replace('/','\\',$_SERVER['DOCUMENT_ROOT']),'',$file->getRealPath());
                $finalPathReplace ='/'.str_replace ('\\','/',$pathReplace)  ;
                return $finalPathReplace;
            }

        }

    }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:48:43.717

如果您有这样的资源密集型代码来生成菜单，这将严重影响服务器性能。

# ruby-on-rails-3 - 对包含设置条件

> ID：10117273
> 
> 赞同：2
> 
> 时间：2012-04-12T04:13:45.960
> 
> 标签：ruby-on-rails-3, activerecord

我有以下关系：

```
Category has_many :posts
Post has_many :comments
Post has_many :commenters, :through => :comments 
```

我有以下急切的负载，给了我帖子、评论和评论者（请注意，我需要全部 3 个，因此包含而不是加入）

```
category.posts.includes(:comments, :commenters) 
```

但是，我想将评论（如果可能的话，评论者）限制为仅在过去两周内创建的评论，同时仍返回相同的帖子集。最初我以为我可以在包含项上指定一个条件：

```
category.posts.includes(:comments, :commenters).where("comments.created_at > ?", 2.weeks.ago) 
```

但是发现这只会返回满足条件的帖子。我在想我可能需要做一些事情，比如对评论执行子查询，然后执行连接。有没有一种简单的方法可以用 AR 来做到这一点，我最好用 sql 来做这件事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:43:58.750

最后通过阅读此页面设法弄清楚了这一点：http: [//api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

我只需要在我的 Post 模型中创建一个关联，例如：

```
Post has_many :recent_comments, :class_name = 'Comment', :conditions => ["created_at > ?", 2.weeks.ago] 
```

然后我可以执行以下操作来获取所需的 ActiveRecord::Association 对象：

```
category.posts.includes(:recent_comments => :commenters) 
```

还有一个建议是通过在模型上使用范围来做到这一点。但是，我在某处读到（我认为是在 SO 上），范围即将淘汰，ARel 已经取代了它们的位置，所以我决定在没有范围的情况下这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:31:40.593

尝试 ：

```
category.posts.all(:includes => {:comments =>:commenters}, :conditions => ["comments.created_at = ? AND commenters.created_at = ?", 2.weeks.ago, 2.weeks.ago] 
```

# java - 格式化 JEditorPane 的光标、工具提示、链接

> ID：10117286
> 
> 赞同：3
> 
> 时间：2012-04-12T04:15:23.863
> 
> 标签：java, html, swing, hyperlink, jeditorpane

现在，我正在使用 Java Swing 创建一个 JEditorPane，主要是因为它能够拥有超链接。我已经成功地能够显示链接并让它们在单击时执行行为，但是我遇到了一些格式化问题。

1.  如何设置光标，使其通常为箭头，但在将鼠标悬停在文本上时变为文本光标？（本质上，光标在 Web 浏览器中的行为）。我试过

    ```
    EditorPane.setCursor(new Cursor(Cursor.TEXT_CURSOR)) 
    ```

    但这使它成为无处不在的文本光标，即使没有将鼠标悬停在文本上。现在，将鼠标悬停在链接上会显示指针手；我也想保持这个功能。

2.  将鼠标悬停在链接上时显示工具提示或鼠标悬停文本的最佳方式是什么？我尝试修改链接的标题属性，但没有出现。

3.  我试图实现链接以跳到页面的子部分，就像[http://en.wikipedia.org/wiki/Xkcd#History](http://en.wikipedia.org/wiki/Xkcd#History)会直接将您带到维基百科 xkcd 页面的历史子部分。我怎样才能做到这一点？

对其中任何一个的答案都会很棒（并且多个将是很棒的 xP）。非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T05:40:15.233

正如你所说，一个点也可以简单地给出答案，让我一个一个尝试，这是你最后一个**点3的答案**

只需像这样为您的标签提供一个 id

```
<h1><a id = "top"></a>First Line</h1> 
```

现在在页面底部的某处写下：

```
<p><a href = "#top">Return to TOP</a></p> 
```

单击此链接，您将到达 PAGE 的上述区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T05:47:54.663

[可以使用此处](https://stackoverflow.com/a/5957412/230513)提到的方法解决第 1 点和第 2 点。特别是，视图/模型转换方法将让您分别设置`setCursor()`和。`getToolTipText()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T06:06:33.833

您可以从这里获取源代码[http://java-sl.com/JEditorPaneStructureTool.html](http://java-sl.com/JEditorPaneStructureTool.html) 它展示了如何获取文本视图边界。首先，您使用 viewToModel() 方法获取当前鼠标指针的插入符号位置。然后沿着视图树向下实现叶视图并计算它的边界。看到这个[http://java-sl.com/tip_view_rectangle.html](http://java-sl.com/tip_view_rectangle.html)

如果您的鼠标指针位于视图的矩形中，则您的鼠标悬停在文本上。

您可以检查插入符号位置的文本是否为链接并显示您的工具提示。

使用这个[http://java-sl.com/tip_links_in_editable.html](http://java-sl.com/tip_links_in_editable.html)来查看如何检测鼠标是否在链接上。

@nIcE cOw 回答了第 3.rd 点

# c# - 如何从 IronPython 中的公共固定字节中读取？

> ID：10117287
> 
> 赞同：3
> 
> 时间：2012-04-12T04:15:29.437
> 
> 标签：c#, python, ironpython

在 C# 中，我有一个属性声明为：

```
public fixed byte foo[10] 
```

在客户端代码中，我看到它使用此函数转换为字符串：

```
public static unsafe string GetString(byte* byteArray)
{
  return new String((sbyte*)byteArray);
} 
```

在 IronPython 打印中，它给了我字符串的类型：

```
>>> print obj.foo
Baz+<foo>e__FixedBuffer1 
```

尝试使用转换功能会出错。

```
>>> print GetString(obj.foo)
expected Byte*, got <Foo>e__FixedBuffer1 
```

在 IronPython 中读取此属性的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:07:09.783

.NET 中的固定字段非常特殊。您拥有的固定字段 ( `public fixed byte foo[10]`) 被编译为特殊的嵌套结构，并且您的固定字段的类型被更改为该嵌套结构。简而言之，这是：

```
public fixed byte foo[10]; 
```

编译成这样：

```
// This is the struct that was generated, it contains a field with the
// first element of your fixed array
[CompilerGenerated, UnsafeValueType]
[StructLayout(LayoutKind.Sequential, Size = 10)]
public struct <foo>e__FixedBuffer0
{
    public byte FixedElementField;
}

// This is your original field with the new type
[FixedBuffer(typeof(byte), 10)]
public <foo>e__FixedBuffer0 foo; 
```

您可以使用 ILSpy 之类的工具亲眼看到这一点。

现在，如果您在 C# 中的代码有一行`GetString(obj.foo)`，它将被编译为：

```
GetString(&obj.foo.FixedElementField); 
```

因此，它从字面上获取数组第一个元素的地址并将其作为参数传递给方法（因此`GetString`参数的类型是正确的`byte*`）。

当您在 IronPython 中使用相同的参数调用相同的方法时，参数类型仍然是您的字段类型：`<foo>e__FixedBuffer0`，不能转换为`byte*`（显然）。进行此方法调用的正确方法是执行与 C# 编译器相同的替换 - 获取 的地址`FixedElementField`并将其传递给`GetString`，但不幸的是，Python（据我所知）没有类似于`&`C＃。

结论是：您不能直接从 IronPython 访问固定字段。我会说你最好的选择是有一个“代理”方法，比如：

```
public string GetFooString(Baz baz)
{
    return new string((sbyte*)baz.foo);
} 
```

PS 我不是 IronPython 专业人士，所以也许有一种直接访问 foo 道具的超级方法，但我只是不知道如何。

# asp.net-mvc-3 - 必须在大表上的 .Skip() 和 .Take() 之前在实体框架 4.1 中调用 .ToList()

> ID：10117288
> 
> 赞同：0
> 
> 时间：2012-04-12T04:15:36.387
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework-4.1

我正在尝试用我的应用程序做一些聪明的事情。我有一个表格，广告 - 其中包含有关汽车的信息：型号、里程等。该表格通过外键与其他一些表格相关，例如，模型名称是通过链接到“VehicleModels”表格等的外键检索的。

在应用程序的“实体”目录（映射到数据库中表的类）中，我有一个用于 Adverts 表的 Advert.cs。这有几个属性，EF 被告知忽略（在流利的 api 中），因为它们没有映射到 Adverts 表中的实际字段。

这些字段背后的想法是将计算出的与用户输入的邮政编码（邮政编码）的距离存储在搜索表单中，如果他们只想查看特定半径内的可用汽车，则该搜索表单会过滤 Adverts 表。例如：

```
IQueryable<Advert> FilteredAdverts = repository.Adverts
.Where(am => mfr == "" || am.Manufacturer == mfr) &&
    (am => model == etc etc...) 
```

稍后，为了计算距离，代码类似于：

```
if (userPostcode != null) {
    foreach (var ap in FilteredAdverts.ToList()) {
        distmiles = //calculate distance in miles
        distkm = //calculate distance in km

        ap.DistanceMiles = Convert.ToInt32(distmiles);
        ap.DistanceKm = Convert.ToInt32(distkm);
    }
} 
```

我遇到的问题是，为了为这两个字段分配值，我必须使用 .ToList() 从表中提取所有行。如果只有几行可以正常工作，但是当有 ~1,000 行时，它需要大约。2.2 秒，当我将其增加到大约 12,000 行时，当没有应用过滤器（即返回所有活动广告）时，页面加载需要 32 秒。

我在调用 .Skip 和 .Take 以显示它们之前拉出所有广告的原因是，搜索表单中可用的过滤器基于所有当前活动广告的可能选项，即剩余时间，而不仅仅是选择一个列表制造商表中的制造商（用户可以选择没有搜索结果的制造商）。例如

```
VehicleManufacturers = (from vm in FilteredAdverts.Select(x => x.VehicleManufacturer).Distinct().OrderBy(x => x)
    select new SearchOptionsModel
    {
            Value = vm,
            Text = vm,
            Count = FilteredAdvertsVM.Where(x => x.VehicleManufacturer == vm).Count(),
    })

    .... filters for model, mileage etc 
```

要了解我想要实现的目标 - 请查看 Autotrader 网站上的搜索表。

一旦应用了所有过滤器，就在将模型传递到视图之前，应用了 .Skip 和 .Take ，但当然此时所有行都已被拉出。

我的问题是，我该如何重做这个？有没有更好的方法在我的 Advert 实体类中使用这些非映射属性？我正在我的家用 PC 上工作 - C2D @ 3.4GHz，2GB 内存 - 慢速查询可以在属性网络主机上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:23:48.127

您不能在客户端功能上使用服务器端分页。这是简短的答案。假设我正确理解您的需求（根据与给定邮政编码的接近程度过滤列表），我过去使用的解决方案是将每个“广告”记录存储为该记录的邮政编码的纬度/经度。该数据被持久化。

然后，当需要查询时，根据与中心的 X 距离（用户提供的邮政编码）计算边界框（lat1，lng1，lat2，lng2），并根据 lat/lng 符合此范围的记录过滤查询结果盒子。然后，您可以应用客户端计算来进一步和更准确地过滤列表，但是使用此方法，您可以建立一个基本过滤器以最大限度地减少提取的记录数。

编辑：您可以根据abs(latU-latR)和abs(lngU-lngR)的绝对距离对查询结果进行排序，其中latU/lngU是用户提供的邮政编码的lat/lng latR/lngR 是数据库中记录的 lat/lng。

# google-maps - 缩放后带有叠加层的地图不移动

> ID：10117289
> 
> 赞同：0
> 
> 时间：2012-04-12T04:15:45.680
> 
> 标签：google-maps, google-maps-api-3

我正在创建一个在屏幕上按像素返回 LatLng 的地图，因此我需要在地图中实现 OverlayView。不幸的是，使用 OverlayView，放大或缩小后会出现问题。缩放后拖动地图时，它确实返回了一个新的 LatLng，但屏幕仍显示相同的位置。

我不知道如何解决它，但是一旦我使用平移控件平移地图，问题就会消失，然后无论缩放级别如何，我都可以拖动地图。

有人可以给我一个建议吗？

谢谢，尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:38:48.923

要解决此问题，只需在“zoom_changed”事件中调用 panTo 函数。

```
google.maps.event.addListener(mymap, "zoom_changed", function() {
mymap.panTo(mymap.getCenter());
}); 
```

地图可能无法平滑移动，因为不幸的是 panTo 函数仅由 zoom_change 事件调用，因此只需在地图初始化后调用 panTo 函数即可。然后地图可能会四处移动和不同的缩放级别。

# jquery - 如何防止双击 MVC Html.SubmitButton

> ID：10117290
> 
> 赞同：2
> 
> 时间：2012-04-12T04:16:06.650
> 
> 标签：jquery, asp.net-mvc, model-view-controller

如何防止使用 jQuery 双击 MVC Html.SubmitButton，还需要考虑表单上的验证控件。

有人可以显示代码示例

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T04:22:57.780

就像是：

```
$('#yourButtonId').click(function() {
    // Check validation before disabling
    if ($(this.form).valid()) {
         this.disabled = 'disabled';
    }        
}); 
```

请注意，这将适用于 MVC3 不显眼的验证，不确定这是否是您正在使用的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T04:22:52.247

这是我使用的。您可以使用选择器获得更具体的信息，因为此脚本用于一个非常简单的页面。

```
 $(document).ready(function ()
    {
        $('#butSubmit', this).removeAttr("disabled", "disabled");
    });

    $('form').submit(function ()
    {
        if ($(this).valid())
        {
            $('#butSubmit', this).attr('disabled', 'disabled');
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T04:17:28.193

在按钮上放置一个javascript函数，并禁用或隐藏按钮。

# jquery - colResizable 插件在 jQuery 选项卡中不起作用

> ID：10117293
> 
> 赞同：0
> 
> 时间：2012-04-12T04:16:47.397
> 
> 标签：jquery

我有三个 jQuery 选项卡，其中每个选项卡都有一个 HTML 表，每个表上都实现了 colResizable 插件。问题是 colResizable 插件在 jQuery 选项卡中不起作用。

我想摆弄我的问题以供参考，但不确定如何在 jsFiddle 中引用 colResizable javascript 文件。

这是HTML：

```
<div id="tabs">
<ul id="alarmsTabs">
    <li><a id = "tab1" class='alarmtab' href="#fragment-CurrentAlarms">Current Alarms</a></li>
    <li><a id = "tab2" class='alarmtab' href="#fragment-NotAckAlarms">Alarms Not Acknowledged</a></li>          
    <li><a id = "tab3" class='alarmtab' href="#fragment-AlarmLog" >Alarm Log</a></li>
</ul>
<div id="fragment-CurrentAlarms">
    <table id='CurrentAlarmTable' class='FacilityTableForScreens' cellspacing='0'>
    </table>
</div>
<div id="fragment-NotAckAlarms">        
    <table id="AlarmNotAckTable" class="FacilityTableForScreens" cellspacing="0">
    </table>                                                
</div>
<div id="fragment-AlarmLog">        
    <table id="AlarmLogTable" class="FacilityTableForScreens" cellspacing="0">
    </table>
</div> 
```

这就是我为实现 jQuery 选项卡和 colResizable 而编写的。

```
$("#tabs").tabs({
    selected: 0,        
    show: function(event, ui)
    {           
        //selectedAlarmTab = ui.index;          
        $(ui['panel']).find('table').colResizable({
            liveDrag: true
        });
    }        
}); 
```

我无法调整列的大小。

您能否提供有关我应该如何解决此问题的指南。

提前致谢。再会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:18:20.230

问题解决了！！！

除了show函数，`colResizable`插件还需要在`select()`函数里面应用`$('#tabs').tabs()`，方式如下：

```
$('#tabs').tabs({
    selected: 0,
    select: function(event, ui) {
        var table = $(ui['panel']).find('table');
        $(table).colResizable({disable: true});
        $(table).colResizable();
    },
    show: function(event, ui) {
        var table = $(ui['panel']).find('table');
        $(table).colResizable({disable: true});
        $(table).colResizable();
    }
}); 
```

感谢小伙伴们的考虑！！！

# php - 可编辑，PHP + MySQL

> ID：10117294
> 
> 赞同：2
> 
> 时间：2012-04-12T04:16:50.557
> 
> 标签：php, jquery, mysql, jeditable

好的，我对 MySQL 和 PHP 非常陌生，但可以在这里使用一些帮助。

宏大的愿景：一个充满可编辑字段的大页面（我正在使用 Jeditable，一个就地编辑的 jquery 插件），它将值存储到 MySQL 数据库同一行中的不同字段。

不过，我完全不知道如何正确地将值发布到 MySQL 数据库的不同字段。我所拥有的如下；它源自 Jeditable 提供的示例。我可以在字段中输入数据，但它会保存字段的 ID——而不是数据——并将其附加到我的数据库的多个列中，而不是一个正确的列中。

所以，简而言之 - 我如何将您在此处看到的内容映射到我的 MySQL 数据库中的不同位置（例如：具有客户名称值、尺寸值、初始销售值的 MRR 等的一个行项目/记录？）

这是我的 HTML-

```
<!-- JQuery to extract form data... -->
  <script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
      $('#paragraph_1').editable('save.php');
    });

    $(document).ready(function() {
      $('#custsize').editable('save.php');
    });

    $(document).ready(function() {
      $('#mrratsale').editable('save.php');
    });
  </script>

<!-- my form fields... -->
<h2 id="paragraph_1" name="paragraph_1"></h2>
<h3 id="custsize" name="custsize"></h3>
<h3 id="mrratsale" name="mrratsale"></h3> 
```

...这是我的 save.php 文件...

```
 <?php
      require_once 'config.php';
      $query=sprintf("INSERT INTO customerdata (ListItemID, CustName, CustSize, MrrAtSale)
        VALUES (%d, '%s', '%s', '%s')",
         $id, $_POST['id'], $_POST['id'], $_POST['id'], stripslashes($_POST['value']));

      $dbh->exec($query);
       /* What is echoed back will be shown in webpage after editing.*/
         print $_POST['value']; 
     ?> 
```

任何帮助都会非常非常感谢（并且尽量不要笑！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T05:00:19.903

您要做的是将每个可编辑的数据库写入其自己的功能 - 这样您就可以针对单个字段。

所以你的 html 文件应该是这样的（我还清理了你的 JS）：

```
<!-- JQuery to extract form data... -->
<script type="text/javascript" charset="utf-8">
  $(document).ready(function() {
    $('.paragraph_1').editable('save.php?type=paragraph');
    $('.custsize').editable('save.php?type=custsize');
    $('.mrratsale').editable('save.php?type=mrratsale');
  });
</script>

<!-- my form fields... -->
<h2 id="1" class="paragraph_1"></h2>
<h3 id="1" class="custsize"></h3>
<h3 id="1" class="mrratsale"></h3> 
```

请注意我如何将查询字符串添加到 save.php 文件中。您还应该将元素的 id 更改为记录中的字段，以便更新正确的记录。

php文件：

```
<?php
  require_once 'config.php';

  $type = (isset($_GET['type'])) ? $_GET['type'] : "";
  $value = (isset($_POST['value'])) ? $_POST['value'] : ""; //value posted
  $id = (isset($_POST['id'])) ? $_POST['id'] : ""; //id of the element

  if($type == "paragraph") {
    mysql_query("UPDATE customerdata SET paragraph='$value' WHERE id='$id'");
  } elseif ($type == "custsize") {
    mysql_query("UPDATE customerdata SET CustSize='$value' WHERE id='$id'");
  } elseif ($type == "mrratsale") {
    mysql_query("UPDATE customerdata SET MrRatSale='$value' WHERE id='$id'");
  };

   print $value; 
?> 
```

您应该在将数据放入数据库之前添加一些验证并清理数据，但这应该可以让 jEditable 正常工作。

请注意，您可能应该`update`记录而不是记录`insert`它，否则每次编辑数据时您都将创建一个新记录。

您可以看到该 id 用于更新正确的记录。

我最近并没有真正使用过 jEditable，但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:29:13.647

好吧，我有点困惑。你的问题是你试图针对某些领域，但你不能吗？如果是这样，请确保有一个指定为主键的字段并使用它来指定您希望更新该字段的哪一行。如果您不针对包含要匹配的精确值的特定行，那么当表中有多个记录时，我看不到您将如何更改正确的记录。

其次，你是如何处理所有这些领域的？我希望它们不只是在每次保存表单代码时即时生成。我这样说是因为除非你有一个非常好的命名约定设置，否则以后整理保存在该表中的数据将是一场噩梦。换句话说，花一些时间清楚地标记您的字段（user_name、user_email 等，而不是 field01、field02 等）。另外请注意，如果代码以某种方式基于存在/提交的字段创建一个新字段，则会打开一堆其他的东西要注意。一个人可以用 HTML 格式创建一个包含一千个表单字段的页面，然后提交它，然后您的数据库尝试为所有这些字段创建一个字段吗？如果你有某种现场验证系统（有一些有限的限制），我建议停止依赖你没有的代码' t 使/理解自动构建/管理您的数据库信息。只需制作您需要的字段并智能地命名它们。

第三，为什么不手动编写 PHP 和 MySQL 代码呢？这不仅可以帮助您学习如何在这两种方法中更好地编码，而且听起来 Jeditable 的东西如果不能像您想要的那样工作，只需进行最少的调整，就会浪费时间。你所描述的并不难做——如果你能帮助它，不要使用 JQuery（它是新 JS 人的拐杖）。

希望其中一些可以帮助/回答您的问题。

# shell - 有没有办法将这种模式与 shell 或 sed 匹配？

> ID：10117298
> 
> 赞同：6
> 
> 时间：2012-04-12T04:16:59.613
> 
> 标签：shell, sed

我有一个带有以下输出的文件：

```
BP 0 test:
    case    id          Name            
    ======  ========  =================
         0        82  a_case-2-0-0      

BP 1 test:
    case    id          Name            
    ======  ========  =================
         0        86  a_case-2-1-0      

BP 2 test:
    case    id          Name            
    ======  ========  =================

BP 3 test:
    case    id          Name            
    ======  ========  =================
         0        93  a_case-2-3-0 
```

所以，只有“BP 0,1,3”有内容，所以我想要的是，是否可以只转储'BP 0 test'，'BP 1 test'和'BP 3 test'，只想输入' BP 2 test' 因为没有测试用例。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T04:36:16.557

虽然您可以使用较小的 shell 工具（例如`[`and ）将某些东西组合在一起`expr`，但使用 来完成此操作会更容易，您通常会在任何还包含and`awk`的操作系统中找到它。:)`grep``sed`

这是一个快速和肮脏的：

```
[ghoti@pc ~]$ cat doit 
#!/usr/bin/awk -f

/^BP/ {
  output=$0;
  getline; output=sprintf("%s\n%s", output, $0);
  getline; output=sprintf("%s\n%s", output, $0);
  getline;
  if (/[0-9]/) {
    output=sprintf("%s\n%s\n", output, $0);
    print output;
  }
}

[ghoti@pc ~]$ ./doit input.txt 
BP 0 test:
    case    id          Name            
    ======  ========  =================
         0        82  a_case-2-0-0      

BP 1 test:
    case    id          Name            
    ======  ========  =================
         0        86  a_case-2-1-0      

BP 3 test:
    case    id          Name            
    ======  ========  =================
         0        93  a_case-2-3-0 

[ghoti@pc ~]$ 
```

请注意，此脚本假定您输入数据的一些内容。如果`if`语句中的条件不适合您，或者单次测试后可能出现多种情况，则需要调整此脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T04:40:04.843

```
$ awk -F'\n' -v RS='' -v ORS='\n\n' 'NF>3' input.txt
BP 0 test:
    case    id          Name
    ======  ========  =================
         0        82  a_case-2-0-0

BP 1 test:
    case    id          Name
    ======  ========  =================
         0        86  a_case-2-1-0

BP 3 test:
    case    id          Name
    ======  ========  =================
         0        93  a_case-2-3-0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T04:25:12.843

如果您的 grep 支持 -B 选项，那么您可以这样做

```
grep -B3 "_case-" <ip_file> | grep "BP " 
```

上面的输出是

```
BP 0 test:
BP 1 test:
BP 3 test: 
```

这里 -B3 在匹配模式上方打印 3 行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T08:46:08.483

这可能对您有用：

```
sed 'N;N;N;$!N;/\n\n$/d' file 
```

# android - 在 onclick 监听器中创建一个按钮？

> ID：10117303
> 
> 赞同：0
> 
> 时间：2012-04-12T04:17:33.303
> 
> 标签：android

我想在程序运行时动态创建一组按钮。我希望在创建生成按钮时创建这些按钮。是否可以在`Button but=new Button(this);`另一个按钮的 OnClickListener 内部调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:20:25.397

是的——请务必更改`new Button(this)`为`new Button(mClass.this)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:22:08.140

是的..说`Button b = new Button(yourAct.this);..`

并且不要忘记通过说将其添加到您的父布局中`addView(b)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:53:17.177

这确实有效。我有一个以相同方式创建按钮的活动。要将 onClickListener 设置为外部类中的方法，您需要使用 (mClass.clicklistener *)*设置侦听器方法。

# linux - glibc fnmatch 漏洞：如何暴露漏洞？

> ID：10117308
> 
> 赞同：1
> 
> 时间：2012-04-12T04:18:54.180
> 
> 标签：linux, security, glibc

我必须在我们的一个运行 glibc-2.9 的 64 位系统上验证漏洞。

[http://scarybeastsecurity.blogspot.in/2011/02/i-got-accidental-code-execution-via.html](http://scarybeastsecurity.blogspot.in/2011/02/i-got-accidental-code-execution-via.html)

上面的链接给出了一个脚本，当传递一个幻数时显然会导致任意代码执行。但是当我在我的系统上尝试它时，似乎什么都没有发生。难道我做错了什么？如果存在漏洞，系统会崩溃吗？如何检测是否是意外代码执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T16:11:43.213

如果您在 64 位机器上运行，则错误的原始情况不适用。正如您在 Chris 的博客中看到的，他使用的是 32 位 Ubuntu 9.04 系统。该漏洞利用依赖于导致堆栈指针环绕 32 位地址空间，从而导致堆栈损坏。

我在带有 glibc 2.5 的 64 位系统上快速尝试了一下，但看到 malloc() 失败而不是崩溃。

```
$ ./a.out 3000000000
a.out: malloc() failed. 
```

您问如何识别意外的代码执行；使用这里的玩具程序，它不携带漏洞利用/有效负载，我们希望看到 SIGSEGV、SIGILL 或 SIGBUS，因为 CPU 试图“执行”堆栈的垃圾部分，显示为相应的错误来自外壳的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T06:57:20.870

如果您要在 64 位机器上遇到问题，您必须模仿原始代码，但提供一个数字来包装 64 位机器上的堆栈。提供的原始号码是：

1073741796

```
$ bc
z=1073741796
z+28
1073741824
(z+28)*4
4294967296
2^32
4294967296
quit
$ 
```

因此，描述输入数字的一种方式是 (ULONG_MAX - 112) / 4。

64 位机器的模拟数字是 4611686018427387876：

```
$ bc
x=2^64
x
18446744073709551616
y=x/4
y
4611686018427387904
y-28
4611686018427387876
quit
$ 
```

但是，要获得此工作的机会，您必须修改报告的代码以使用`strtroull()`或类似的东西；`atoi()`通常仅限于 32 位整数，对上面的 64 位数字没有用处。该代码还包含：

```
num_as = atoi(argv[1]);
if (num_as < 5) {
    errx(1, "Need 5.");
}
p = malloc(num_as); 
```

哪里`num_as`是一个`size_t`和`p`是一个`char *`。因此，您必须能够`malloc()`拥有大量空间（几乎 4 EiB）。大多数人在他们的机器上没有足够的虚拟内存，即使有用于支持的磁盘空间，也无法做到这一点。现在，也许，只是也许，Linux 允许您过度提交（并让 OOM Killer 稍后突袭），但`malloc()`更有可能失败。

还有其他相关的功能会影响 32 位系统，但它无法影响 64 位系统（目前）。

如果您有机会在 64 位机器上重现它，您可能必须进行 32 位编译。然后，如果风在您身后，并且您拥有相关软件的适当旧版本，也许您可​​以复制它。

# c++ - 使用在结构中声明的 boost::serialize 到另一个结构中

> ID：10117312
> 
> 赞同：0
> 
> 时间：2012-04-12T04:19:26.267
> 
> 标签：c++, serialization, boost, struct

我是编程和 C++ 新手，似乎遇到了这个问题。

我正在创建一个具有各种传感器偏移量的配置文件，并将其存储为 xml，其他类可以使用 boost::serialization load 读取该文件。

由于所有传感器都有相同的偏移量，我想制作一个带有偏移量定义的通用结构。我想将序列化和保存/加载保留在通用结构中，并且仅在需要时在不同的结构中实例化。

每个传感器都有自己的结构，所以其他类只需要使用他们需要的传感器结构。

最初，我在每个传感器结构中都有序列化/保存/加载，它工作得很好。但是在将其移至通用结构之后，我似乎无法调用它。

代码是：

```
10 #pragma once
 11 #ifndef OFFSET_CONFIG_H
 12 #define OFFSET_CONFIG_H
 13 
 14 #include <boost/archive/xml_oarchive.hpp>
 15 #include <boost/archive/xml_iarchive.hpp>
 16 #include <boost/serialization/nvp.hpp>
 17 #include <fstream>
 18 #include <string>
 19 
 20 typedef struct Offset
 21 {
 22     std::string name;            // Offsets type.
 23     double offsetX;
 24     double offsetY;
 25     double offsetZ;
 26     double roll;
 27     double pitch;
 28     double yaw;
 29 
 30     template<class Archive>
 31     void serialize(Archive & ar, const unsigned int version)
 32     {
 33         using boost::serialization::make_nvp;
 34         ar & make_nvp("offsetType", name);
 35         ar & make_nvp("OffsetX", offsetX);
 36         ar & make_nvp("OffsetY", offsetY);
 37         ar & make_nvp("OffsetZ", offsetZ);
 38         ar & make_nvp("Roll", roll);
 39         ar & make_nvp("Pitch", pitch);
 40         ar & make_nvp("Yaw", yaw);
 41     }
 42 
 43     void save(const std::string& filename)
 44     {
 45         std::fstream ofs(filename.c_str(), std::fstream::trunc | std::fstream::out);
 46         boost::archive::xml_oarchive xml(ofs);
 47         xml << boost::serialization::make_nvp("temp", *this);
 48     }
 49 
 50 };
 51  
 70 struct LaserOffset
 71 {
 72   Offset laser;
 90   laser.serialize(Archive & ar, const unsigned int version);
 91   //laser.save(const std::string& filename);
 98 };

168 #endif 
```

它当前抛出的错误是：

```
OffsetConfig.h:90: error: ISO C++ forbids declaration of ‘laser’ with no type 

OffsetConfig.h:90: error: expected ‘;’ before ‘.’ token 
```

谁能帮我解决我做错了什么？以及如何使用结构中的序列化/保存元素以及如何将其保存为单个结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:18:57.097

正如马蒂亚斯所说，在你的代码片段中，

```
 typedef struct Offset {}; 
```

应该写成，

```
struct Offset {}; 
```

因为在 c++ 中你可以定义一个结构对象`Offset _offset;`，而在 c 中你应该使用`struct Offset _offset;`. 所以你想使用`typedef struct Offset{} Offset;`

一般来说，*ISO C++ 禁止`your_var`无类型*声明意味着 gcc 找不到`your_var`. 发生这种情况时，您应该检查包含文件、定义`your_var`和命名空间，这通常会导致此错误。

顺便说一句，`#pargma once`做`#ifndef ... #define ...`同样的事情。

# xcode - 如何拍摄带有自动水印 (PNG) 的视频并将其保存到视频库？

> ID：10117313
> 
> 赞同：0
> 
> 时间：2012-04-12T04:19:28.823
> 
> 标签：xcode, video, watermark

如何在拍摄时在视频上显示水印并将其保存在屏幕上？

# java - primefaces 在民意调查中咆哮

> ID：10117321
> 
> 赞同：0
> 
> 时间：2012-04-12T04:21:01.483
> 
> 标签：java, jsf, primefaces

当我的投票计时器达到 0 时，我不确定如何让咆哮声出现。关于如何实现这一点的任何想法？展示只显示了按下按钮后如何使用咆哮，这对我的投票没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:39:39.973

> *免责声明：虽然这是一个“请发送 teh codez”问题，但我会尝试向您展示方向（阅读[此](https://meta.stackexchange.com/questions/39412/should-do-it-for-me-questions-be-discouraged)内容后）：*

```
<h:form>
  <p:growl id="messages>
  <p:poll listener="#{myBean.updateGrowl}" update="messages" />
</h:form> 
```

在你的 bean 中：

```
public void updateGrowl() {
 FacesContext.getCurrentInstance().addMessage(null, message);
} 
```

# google-api - 为什么使用谷歌折线图时会出现滚动条？

> ID：10117323
> 
> 赞同：3
> 
> 时间：2012-04-12T04:21:13.757
> 
> 标签：google-api, linechart

我正在使用[谷歌折线图 api](https://developers.google.com/chart/interactive/docs/gallery/linechart)，无论我制作多大的 div 图表尺寸，它总是显示一个水平和垂直滚动条。我怎样才能阻止这种情况发生。

![在此处输入图像描述](../Images/1200299703483cd56724f0d453f7c3ee.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:51:08.153

[上下文： https](https://code.google.com/apis/ajax/playground/?type=visualization#line_chart) ://code.google.com/apis/ajax/playground/?type=visualization#line_chart的可编辑 HTML （使用 Firefox 或 Chorme）。

帮助您解决问题的说明：

*   假设您需要一个宽度 = 500 像素且高度 = 400 像素的框。
*   在新的 google.visualization.LineChart() 检查 Javascript，如果宽度和高度初始化为 500 和 400。
*   检查渲染位置（id="visualization"）的 HTML 标签（可能是 div）的样式是否为 style="width: 800px; height: 400px;"。
*   检查渲染位置的 HTML 父标签 (any) 的样式是否大于 500 和 400，或者是 100%。

另一种解决方案是通过“HTML cut”：使用溢出：隐藏。

**滚动案例示例**

```
 // ... piece of your javacascript.
    new google.visualization.LineChart(document.getElementById('visualization')).
        draw(data, {curveType: "function",
                    width: 800, height: 400,
                    vAxis: {maxValue: 10}}
            );
    } google.setOnLoadCallback(drawVisualization); 
```

```
<!-- ... piece of your HTML -->
<div id="container" style="width:400px;overflow:scroll;">
  <div id="visualization" style="width: 800px; height: 400px;"></div>
</div> 
```

**HTML SOLUTION（固定容器宽度）**

```
<!-- ... piece of your HTML -->
<div id="container" style="width:800px;overflow:scroll;">
  <div id="visualization" style="width: 800px; height: 400px;"></div>
</div> 
```

**另一个简单的 HTML 解决方案（使用溢出：隐藏）**

```
<!-- ... piece of your HTML -->
<div id="container" style="width:400px;overflow:hidden;">
  <div id="visualization" style="width: 800px; height: 400px;"></div>
</div> 
```

...或减少所有，Javascript 和 HTML 宽度和高度等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T18:13:01.087

使用 ：

```
<script src="https://www.google.com/jsapi"></script>
<script>
  google.load("visualization", "1", {packages:["corechart"]});
var data = new google.visualization.DataTable();
//init your data
var options = {
      width: "100%", height: "100%",
      //other options

}
var chart = new google.visualization.LineChart(document.getElementById('chart'));
chart.draw(data, options);
</script>
....

<body>
   <div id="chart"></div>
</body> 
```

您确保图表将适合您正在使用的 div。

然后用所需的大小调整图形集`style="width: ...px; height: ...px;"`的大小：

```
<body>
  <div style="width: 800px; height: 400px;" id="chart"></div>
</body> 
```

# android - Android，可绘制编辑器不显示任何内容，如何激活它？

> ID：10117334
> 
> 赞同：1
> 
> 时间：2012-04-12T04:22:22.697
> 
> 标签：android, layout, drawable, graphic, activation

我在激活图形布局时遇到问题。我想看看我在 XML 中做了什么，但是图形布局没有显示任何东西。

同样在 res/layout 中，我右键单击每个 XML 文件，然后转到“使用/旧版 android 可绘制编辑器打开”。依然没有！

我怎样才能激活它？

谢谢

![在此处输入图像描述](../Images/09b06534fc510c03b5746c5b372eddd5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:27:36.563

您试图在图形布局中显示哪些视图？图形布局通常用于基本的 android 小部件/视图（Button、Radio、TextView 等），*不会*显示自定义视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:57:39.763

我有时也遇到同样的问题，但是关闭并重新打开文件就可以了，我只是不知道为什么...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:13:15.560

到目前为止，我看到的其他解决方案都没有为我工作。

但是，终于发现了这个。转到“调色板”下拉菜单并选择“显示预览”

在此之后，我再也没有这个问题了。我正在使用 ADT 20.0.3

# cocos2d-iphone - 如何在不使用动作的情况下移动精灵？

> ID：10117341
> 
> 赞同：-1
> 
> 时间：2012-04-12T04:23:17.330
> 
> 标签：cocos2d-iphone

我是cocos的新用户。我想将我`ccSprite`的从一个点移动到另一个点，这可以使用 来实现`ccMoveto`，但是我们也可以使用 schedule 方法来实现它吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:21:42.523

要与 Schedule Method 一起使用，您可以使用以下代码

```
[self schedule:@selector(moveAction1:)]; // This code goes wherever you need to start scheduling

-(void) moveAction1 : (ccTime) dt
{
    [spriteName setPosition:ccp(xPosition,yPosition)];
    xPosition += 0.1f;
    yPosition += 0.1f
    if(xPosition == 320)
        [self unschedule:@selector(moveAction1:)];
} 
```

上面的代码对你有用。

**我强烈建议使用 ccMoveTo 而不是此代码。**

# javascript - Blogger 上的服务器端代理

> ID：10117343
> 
> 赞同：0
> 
> 时间：2012-04-12T04:23:33.833
> 
> 标签：javascript, proxy, xmlhttprequest, cross-domain, blogger

在我的博客页面上，我有一个向外部域发出 XMLHttpRequest 的函数。显然，由于跨域限制，它不起作用。

是否可以为博主设置服务器端代理？

我在想，或者我可以使用其他东西来代替*XMLHttpRequest*

对不起，我对网络编程语言真的很陌生，任何帮助将不胜感激，谢谢！

```
<div id="poll">

Do you like this?

<input type="radio" name="poll" id="poll1" checked>Yes, it`s great

<input type="radio" name="poll" id="poll2">Yes...

<input type="radio" name="poll" id="poll3">Not bad...

<input type="radio" name="poll" id="poll4">No!

<input type="button" value="Vote!" onClick="vote();"/>
</div>

<script type="text/javascript">

function vote(){

for(var i=1;i<=4;i++){
if(document.getElementById('poll' + i).checked){

<script type="text/javascript"
     src="http://server2.example.com/vote.php?vote=i&jsonp=parseResponse">

function Call({"vote": i});

</script>
}
}
document.getElementById('poll').innerHTML = parseResponse;
}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:31:43.117

您可以使用众所周知的[JSONP](http://en.wikipedia.org/wiki/JSONP)，但前提是您调用的站点提供了一个 API，该 API 将以正确的格式返回响应。

否则，是的，通常可以在任何 Web 容器之上实现服务器端代理支持。这要求您可以直接访问服务器（即，如果您的站点托管在 blogger.com 上，它将无法工作），具体细节将根据您的实现语言和 Web 容器而有所不同。但是，高级流程非常简单：

1.  `/proxyRequest?url=http://www.crossdomain.com/someNeatThing`客户端使用标准 XMLHttpRequest 用类似的请求回调服务器。
2.  服务器触发自己对“http://www.crossdomain.com/someNeatThing”的请求，获取响应，并将其作为`proxyRequest`调用结果通过管道传回客户端。

# animation - 真正简单的线性动画公式

> ID：10117347
> 
> 赞同：0
> 
> 时间：2012-04-12T04:24:07.733
> 
> 标签：animation, language-agnostic

我似乎不太了解线性动画，尽管它可能很基本。我只是想在给定的持续时间内将一个位置从开始位置动画到结束位置。谷歌搜索在这里没有帮助我，我的代数技能已经抛弃了我。我该怎么做呢？我尝试了许多不同的东西，但我似乎无法做到正确。我需要线性插值吗？

答案可以是语言不可知的（伪代码，用你最喜欢的语言，无论如何），尽管我正在使用 Javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:28:24.367

> 我需要线性插值吗？

是的。

你有距离（d）和持续时间（t）。您还需要确定每秒的帧数 (f)。之后，它每次只移动 d / (t * f) 。

# php - php exec 没有按预期工作

> ID：10117350
> 
> 赞同：1
> 
> 时间：2012-04-12T04:24:27.400
> 
> 标签：php, ubuntu, exec, lamp, mysqldump

我的系统：Ubuntu 11.10，LAMP Stack。

问题：

我在终端中运行以下命令，它会正确备份。

```
mysqldump -u root  dbBugTracker > BAK/dbw.sql 
```

但是我将它包含在我的 php 代码中，如下所示，它不起作用。

```
exec('/usr/bin/mysqldump -u root  dbTracker > BAK/dbT.sql'); 
```

尖端：

*   我尝试在 exec 中添加第二个参数，但除了单词 Array 之外什么都没有显示。我把它打印出来，但里面什么都没有。
*   文件 dbw.sql 实际上是由 exec 函数创建的，但它是 0 字节。
*   我尝试使用完整路径而没有使用 mysql，并且看到了相同的结果。即0字节。
*   文件夹**BAK**在我的项目文件夹中，我什至给了它 777 权限。
*   甚至尝试了不同的文件名和数据库，但结果是一样的。

我很感激对此的任何投入。谢谢！

更多信息：我将**2>&1**添加到 exec 行，现在该文件包含一些文本，但不包含 DB 转储。这是一个错误，我不知道如何处理：（这是错误

> mysqldump：得到错误：1045：尝试连接时用户'root'@'localhost'的访问被拒绝（使用密码：NO）所以这就是输出文件（dbw.sql）现在包含的内容。再一次，当我从终端运行转储时它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T04:32:52.083

您在命令行上以其他用户身份运行该转储命令。使用 exec() 时，您将其作为 Apache（我假设）运行。尝试向 exec 命令添加密码参数，或者在您的数据库中创建一个具有适当权限的特定于 php 的用户。

更新:: 正如我所猜测的，在使用 PHP 执行此转储时，您无法使用 root 用户。所以，创建一个新用户。

首先，从命令行登录到您的数据库。如果您是 root 用户，请不要使用 -u root：

```
mysql 
```

现在您已登录，继续创建一个新用户供 Apache 使用：

```
GRANT ALL ON database_name.* TO yourapacheuser@localhost IDENTIFIED BY 'yourpassword'; 
```

继续并注销mysql：

```
exit 
```

接下来，让我们重新编写您的原始代码......

```
$db_user = 'newusername';
$db_pass = 'pass';

$command = "mysqldump --add-drop-table -u $db_user -p$db_pass database_name > backup.file.sql";
$output = `$command`;
echo "Your database has now been backed up."; 
```

现在，要执行该文件，请从命令行运行它：

```
php path/to/sqldumpfile.php 
```

希望你能适应这个伪代码。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:33:49.457

你如何打印它？像这样调试它：

```
<?php

exec('/usr/bin/mysqldump -u root  dbTracker > BAK/dbT.sql', $output);

var_dump($output); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T04:36:18.477

首先，您应该让它在命令行上运行。在使用 PHP 的 exec() 之前验证这是否产生了所需的结果：

```
/usr/bin/mysqldump -u root -p YOUR_PASSWORD dbTracker > BAK/dbT.sql 
```

如果它确实有效，那么这是您的 PHP 配置中某处的问题。

首先要检查的是安全模式。你在使用安全模式吗？你运行的是什么版本的PHP？

另一种可能是您的 PHP 用户没有使用 mysqldump 二进制文件的权限。

# iphone - 如何在 splitview 应用程序上赋予 curlup 效果

> ID：10117351
> 
> 赞同：1
> 
> 时间：2012-04-12T04:24:34.177
> 
> 标签：iphone, objective-c

在我的 Mac 中，我有 3.2.5 版 xcode 我创建 spliteview 应用程序 当我单击单元格上的左侧视图时，我遇到 curl 效果问题，然后右侧的 detailview 必须打开 curl up 我想只给 curlup detailview，而不是在所有 splitiew我想就像文化代码应用程序名称一样

这是我尝试的代码，但它适用于整个拆分视图当我从左侧视图中选择单元格时，我只想运行 curlup 详细视图

```
#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // Navigation logic may go here. Create and push another view controller.
   // NSUInteger row = indexPath.row;

    UIViewController <SubstitutableDetailViewController> *detailViewController = nil;

    if ([indexPath row] == 0 && [indexPath section] == 0) {
        TodoDetailViewController *newDetailViewController = [[TodoDetailViewController alloc] initWithNibName:@"TodoDetailViewController" bundle:nil];
        detailViewController = newDetailViewController;
    }

    if ([indexPath row] == 0 && [indexPath section] == 1){
        PeopleViewController *newDetailViewController = [[PeopleViewController alloc] initWithNibName:@"PeopleViewController" bundle:nil];
        detailViewController = newDetailViewController;
    }

    if ([indexPath row] == 1 && [indexPath section] == 1){
        DocumentsViewController *newDetailViewController = [[DocumentsViewController alloc] initWithNibName:@"DocumentsViewController" bundle:nil];
        detailViewController = newDetailViewController;
    }

    if ([indexPath row] == 2 && [indexPath section] == 1){
        PlannerViewController *newDetailViewController = [[PlannerViewController alloc] initWithNibName:@"PlannerViewController" bundle:nil];
        detailViewController = newDetailViewController;
    }

    //if ([indexPath row] == 0 && [indexPath section] == 2){
//        PlannerRequestsViewController *newDetailViewController = [[PlannerRequestsViewController alloc] initWithNibName:@"PlannerRequestsViewController" bundle:nil];
//        detailViewController = newDetailViewController;
//    }

    if ([indexPath row] == 0 && [indexPath section] == 2){
        ArchivedPeopleViewController *newDetailViewController = [[ArchivedPeopleViewController alloc] initWithNibName:@"ArchivedPeopleViewController" bundle:nil];
        detailViewController = newDetailViewController;
    }

    // Update the split view controller's view controllers array.
   //NSArray *viewControllers = [[NSArray alloc] initWithObjects:self.navigationController, detailViewController, nil];
   // splitViewController.viewControllers = viewControllers;

    //new try-----today
    //splitViewController.viewControllers = [NSArray
                                     //  arrayWithObjects:masterView, detailsView, nil];
    splitViewController.viewControllers = [[NSArray alloc] initWithObjects:self.navigationController, detailViewController, nil];

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1];
    [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:splitViewController.view cache:YES];
    [UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:27:19.913

尝试更换

```
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:splitViewController.view cache:YES]; 
```

经过

```
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:detailViewController.view cache:YES]; 
```

*****更新*******

 **在 TodoDetailsViewContrroller.h

```
- (void)viewWillAppear:(BOOL)animated 
{
    [super viewWillAppear:animated];

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1];
    [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.view cache:YES];
    [UIView commitAnimations];
} 
```**

# unix - 我可以决定在 LSF 队列中分配多少内存吗

> ID：10117353
> 
> 赞同：2
> 
> 时间：2012-04-12T04:24:34.660
> 
> 标签：unix, memory, resources, jobs, lsf

是否有任何选项可以决定我可以在 LSF 中分配多少内存？

我试过

> bsub -R "rusage[mem=10000]" 睡眠 1000 秒

但是当我使用“bjobs -l”检查资源时，我得到了这个：

```
Job <203180>, User <xxxxx>, Project <default>, Status <RUN>, Queue <medium>,
                     Job Priority <50>, Command <sleep 1000s>
Thu Apr 12 09:49:56: Submitted from host <xxxx>, CWD <xx>, Requested Resources <rusa
                     ge[mem=10000]>;
Thu Apr 12 09:49:58: Started on <xxxx>, Execution Home <xxxx>, E
                     xecution CWD <xxxxx>;
Thu Apr 12 09:49:58: Resource usage collected.
                     MEM: 3 Mbytes;  SWAP: 16 Mbytes;  NTHREAD: 1
                     PGID: 28231;  PIDs: 28231 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T22:19:59.963

bsub -R "rusage[mem=10000]"：最初会保留 10000 MB 的内存。

然而：

“MEM: 3 MB”是您的作业中所有当前正在运行的进程的总驻留内存使用量。“SWAP: 16 MB”是您的作业中所有当前正在运行的进程的总虚拟内存使用量。

值“3 Mbytes”和“16 Mbytes”可能会在运行期间发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:10:31.347

在我的系统中，我们使用 -M，例如 bsub -M 1 请求 1 G 的内存限制，如果超过该限制，作业将被终止。

# xml - xml 错误：在非对象上调用成员函数 xpath()

> ID：10117354
> 
> 赞同：1
> 
> 时间：2012-04-12T04:24:41.183
> 
> 标签：xml, api, codeigniter, weather

连接到 google 天气 api 时出现一些错误

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Google_weather extends CI_Controller {

function index() 
{

        $xml = simplexml_load_file('http://www.google.com/ig/api?weather=california');
        $information = $xml->xpath("/xml_api_reply/weather/forecast_information");
        $current = $xml->xpath("/xml_api_reply/weather/current_conditions");
        $forecast_list = $xml->xpath("/xml_api_reply/weather/forecast_conditions");

        $pic = $current[0]->icon['data']; 

        if($pic == "/ig/images/weather/chance_of_snow.gif")       { $changeImage = base_url()."images/web/chance-of-snow.png"; }
        else if($pic == "/ig/images/weather/flurries.gif")        { $changeImage = base_url()."images/web/flurries.png"; }
        else if($pic == "/ig/images/weather/snow.gif")            { $changeImage = base_url()."images/web/snow.png"; }
        else if($pic == "/ig/images/weather/sleet.gif")           { $changeImage = base_url()."images/web/sleet.png"; }
        else if($pic == "/ig/images/weather/chance_of_rain.gif")  { $changeImage = base_url()."images/web/chance-of-rain.png"; }
        else if($pic == "/ig/images/weather/chance_of_storm.gif") { $changeImage = base_url()."images/web/chance-of-storm.png"; }

        $data = array('weather' => $changeImage);
        $this->load->view('weather_view.php',$data);

    }
} 
```

}

它以某种方式连接，但有时它返回错误：致命错误：在第 xx 行的 /Applications/XAMPP/xamppfiles/htdocs/testing/application/controllers/google_weather.php 中的非对象上调用成员函数 xpath()

我该如何解决这个问题？thx 先进！

# jquery - jquery mobile中的全角滑块？

> ID：10117356
> 
> 赞同：1
> 
> 时间：2012-04-12T04:24:57.423
> 
> 标签：jquery, jquery-mobile

我有一个简单的 jquery 移动网站，其中包括几个按钮和一个滑块。按钮会伸展以填充整个水平空间，但滑块不会。感觉非常笨拙。有没有办法哄一个 jquery-mobile 滑块来填充整个水平空间？

```
<div data-role="page">
    <div data-role="header">
        <h1>header</h1>
    </div>
    <div data-role="content"></div>
    <div data-role="content" data-position="fixed" data-theme="a">
        <form>
           <input type="range" name="slider" id="slider-0" value="50" min="0" max="100"/>
        </form>
       <a id="button-1" href="#" data-role="button">Button</a>
       <a id="button-2" href="#" data-role="button">Button</a>
    </div>
</div> 
```

旁注：此代码包含两个带有 data-role="content" 的 div。这会让我陷入困境吗？jquery-mobile 不喜欢将滑块放入页脚，但我需要滑块像页脚一样在显示区域的底部具有固定位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:06:26.313

如果您的目标是一致的屏幕尺寸，这将非常容易。默认情况下，在 JQM 1.1RC2 中，我看到它们使用 65% 作为滑块。然而，滑块之前的输入字段固定为 50 像素。尝试使用 .ui-slider 宽度来获得更接近的值，但要小心，因为它看起来会根据屏幕大小而有所不同。

`div.ui-slider{width:80%;}`

也许像 80% 这样的东西对你来说会更好。至于你的第二部分，我不知道测试一下并告诉我们。

# objective-c - 从 MasterViewController 呈现的 ModalView 在 iOS 5.1 中不再是全屏

> ID：10117358
> 
> 赞同：0
> 
> 时间：2012-04-12T04:25:28.403
> 
> 标签：objective-c, ios, ipad, uiviewcontroller, uisplitviewcontroller

我有一个主/详细信息应用程序，并且在拆分视图中 MasterViewController 的右上角有一个按钮，该按钮使用模式视图加载“信息”视图控制器：

![iOS 5.0 中的弹出框](../Images/ad2275f130921dbca58e80bda429809f.png)

单击按钮时，会加载视图，并在 iOS 5.0 及更低版本中填充整个屏幕（这是我想要的行为）：

```
- (IBAction)showAppInfo:(id)sender 
{
    InfoViewController *infoViewController = [[InfoViewController alloc] 
        initWithNibName:@"InfoViewController" bundle:nil];
    infoViewController.delegate = self;
    [self presentModalViewController: infoViewController animated: YES];
} 
```

![iOS 5.0 中的模态视图](../Images/61337bbd5a97611512d069e38b35d9d8.png)

但是，当我在 iOS 5.1 模拟器中运行它时，它不再填充整个 iPad 屏幕，而只填充主视图中的内容：

![iOS 5.1 中的模态视图](../Images/40b421cfbcfd77d191fd8b3653a7c48a.png)

我该怎么做才能让这个 InfoViewController 像以前一样填充 iOS 5.1 中的整个屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:57:24.213

我假设你正在使用 UIPopoverController，试试这个

```
InfoViewController *infoViewController = [[InfoViewController alloc] 
    initWithNibName:@"InfoViewController" bundle:nil];
UIPopoverController *popoverController      =   [[UIPopoverController alloc] initWithContentViewController:infoViewController];
    popoverController.popoverContentSize        =   CGSizeMake(500.0, 583.0);
    popoverController.delegate                  =   self;
    [popoverController presentPopoverFromRect:sender.bounds inView:sender permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

# c# - 生成PowerPoint文档的缩略图

> ID：10117360
> 
> 赞同：1
> 
> 时间：2012-04-12T04:25:36.690
> 
> 标签：c#, .net, powerpoint

有没有办法使用自动脚本生成 powerpoint（ppt 或 pptx）文档的缩略图（jpg）？谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:28:47.150

是的，您可以使用 Windows Shell 编程。

> Windows Shell 提供了一个本地 COM 接口，用于访问名为 IExtractImage 的文件的预览图像

本文是在 Sharepoint 的上下文中提供的，但它概述了任何程序如何提取预览图像：

[http://msdn.microsoft.com/en-us/library/aa289172.aspx](http://msdn.microsoft.com/en-us/library/aa289172.aspx)

还有一种使用 Office Web Apps 的方法

[http://techmikael.blogspot.com/2011/05/document-thumbnails-and-powerpoint.html](http://techmikael.blogspot.com/2011/05/document-thumbnails-and-powerpoint.html)

# android - 如何在android中使用给定时间的GPS和AGPS获得最准确的位置？

> ID：10117363
> 
> 赞同：2
> 
> 时间：2012-04-12T04:25:52.707
> 
> 标签：android, google-maps, gps

**我有以下要求。**

**从 GPS 和 AGPS 查找用户的位置。（我们将使用三星 Galaxy ACE 手机）**

**注意：**对于每个交易，第一个位置将是下一个活动的参考位置。

**以下是解决此问题时必须考虑的约束。**

1.  用户应在参考位置 10 米范围内。含义（参考位置 - 当前位置）<= 10 米（由**Locaiton**类API 计算距离）。

2.  必须在给定的时间段内找到位置。假设找到每个位置需要 20-25 秒。时间可以延长到最大 35 秒。

3.  我的用户在获取参考位置时总是在商店外面，然后在里面进行所有其他活动。

**我在做什么**

1.  用 25 秒的时间找到精度为 30m 的参考位置。将其存储在静态变量中。

2.  找到下一个活动的位置并计算差异。如果差异 >=10m 告诉用户再次执行该活动。

**我的查询**

1.  在给定时间和地点的距离内，这是否可能具有如此精确的精度？

2.  谷歌如何计算这个距离？

3.  谷歌能找到如此准确的位置吗？或者使用 GPS 的谷歌地图的准确性是多少？例如，在给定的特定时间和位置，由 GPS 提供的 Google MAP 准确度如何？就像如果我站在我的银行附近，那么服务器上谷歌地图上的坐标和谷歌地图通过手机上的 GPS 给出的坐标有什么区别。

我对这个问题做了足够的实验，终于来这里寻求帮助。我通过改变时间、地点、准确性来进行观察。仍然需要找到一个最终的解决方案。因为我们必须回答客户是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:15:48.353

1.  GPS 可以提供最准确的匹配，但仅限于户外。有可能达到这样的准确性，但不能保证。

2.  有一些公式可以计算球体上两点之间的距离。但是，对于粗略的近似，可以尝试欧几里得距离。

3.  位置及其准确性取决于客户端 GPS。谷歌只是阅读它。

# asp.net - 尝试在按钮单击时通过文件上传控件获取更新进度条？

> ID：10117365
> 
> 赞同：1
> 
> 时间：2012-04-12T04:26:15.660
> 
> 标签：asp.net, file-upload, asp.net-ajax, updatepanel, updatepanel-progressbar

我已经在更新面板和更新进度条中放置了文件上传和 asp 按钮，现在我的问题是我无法在按钮单击时获取更新进度条，我的代码是

```
 <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </asp:ToolkitScriptManager>
    <asp:UpdatePanel ID="up1" runat="server">
    <Triggers>
        <asp:PostBackTrigger ControlID="btnSubmit" />
    </Triggers>
        <ContentTemplate>
            <div class="bodytext" style="height: 480px; width: 830px;">
                <table style="width: 600px" align="center">
                    <tr>
                        <td class="style2">
                            <br />
                            File Attachment
                        </td>
                        <td>
                            <br />
                            <asp:FileUpload ID="fluattach" runat="server" ClientIDMode="Static" />
                        </td>
                        <td>
                        </td>
                    </tr>
                    <tr>
                        <td class="style2">
                        </td>
                        <td>
                        </td>
                        <td>
                            <span class="art-button-wrapper"><span class="l"></span><span class="r"></span>
                                <asp:Button ID="btnSubmit" runat="server" Text="Submit" CssClass="art-button" ClientIDMode="Static"
                                    OnClick="btnSubmit_Click" />
                            </span>
                        </td>
                    </tr>
</table>
            </div>
        </ContentTemplate>
    </asp:UpdatePanel>
    <asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="up1"
        DynamicLayout="true">
        <ProgressTemplate>
            <div id="progressBackgroundFilter">
            </div>
            <div id="Progressbar" class="Progressbar" align="center" valign="middle" runat="server">
                <asp:Image ID="Image1" Width="75" Height="95" runat="server" ImageUrl="~/images/animation_processing.gif" />
            </div>
        </ProgressTemplate>
    </asp:UpdateProgress> 
```

**我写的代码工作正常，但无法在节省时间和发送邮件时看到进度条，我可以删除触发进度条在节省时间但发送邮件（文件上传有返回错误）所以没有添加附件，我有工作这两个功能，如何可能** 请尽快帮助我....

谢谢你hmk

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:06:12.727

看来你搞砸了你的代码。尽量保持简单，然后再试一次：

```
 <asp:UpdateProgress runat="server" id="PageUpdateProgress1" AssociatedUpdatePanelID="UpdatePanel1" DynamicLayout="false">
<ProgressTemplate>
Processing Request from Update 1\. Please Wait..
</ProgressTemplate>
</asp:UpdateProgress>
<asp:UpdatePanel runat="server" id="UpdatePanel1">
<ContentTemplate>
<asp:Button runat="server" id="UpdateButton" onclick="UpdateButton_Click" text="Update 1" />
</ContentTemplate>
</asp:UpdatePanel>

    protected void UpdateButton_Click(object sender, EventArgs e)
    {
      System.Threading.Thread.Sleep(5000);
    } 
```

# ant - Ant - 继续执行目标，即使一个目标完成了 selenium 自动化

> ID：10117370
> 
> 赞同：1
> 
> 时间：2012-04-12T04:26:36.500
> 
> 标签：ant, selenium, selenium-grid

即使一个目标完成，有没有办法让 Ant 不退出？

例如，可以执行多个目标，如果第一个停止，selenium 将冻结。在其他目标中并行运行的所有其他测试用例都会停止。

如何让蚂蚁继续执行其他目标，即使一个完成。

我尝试`-k`在目标水平上给予，但没有用。我们已经`failonerror`设置为 true 。这有关系吗？

这是我的构建文件：

```
<target name="startServerRC" depends="startServerhub">
        <echo>Starting Selenium Server...</echo>
        <java jar="${lib.dir}/selenium-server-standalone.jar" fork="true" spawn="true">
            <arg line="-port 5555"/>
            <arg line="-log log.txt"/>  
            <arg line="-firefoxProfileTemplate"/>
            <arg value="${lib.dir}/ff_profile"/>
            <arg line="-userExtensions"/>
                <arg value="${lib.dir}/user-extensions.js"/>
            <arg line="-role node"/>
            <arg line="-hub http://localhost:4444/grid/register "/>
            <arg line="-maxSession 10"/>
            <arg line="-maxInstances=10"/>
        </java>
    </target>

        <!-- Initialization -->
    <target name="init" depends="startServerRC" >
        <echo>Initlizing...</echo>
        <delete dir="${classes.dir}" />
        <mkdir dir="${classes.dir}"/>
    </target>

    <!-- Complies the java files -->
    <target name="compile" depends="init">
        <echo>Compiling...</echo>
        <javac 
            debug="true" 
            srcdir="${src.dir}" 
            destdir="${classes.dir}"   
            classpathref="classpath" />
    </target>

    <target name="CItarget">    
        <sequential>
            <antcall target="compile"/>
            <parallel> 
              <antcall target="run"/>
              <antcall target="run_PSDATA"/>
            </parallel>
            <parallel> 
                <antcall target="run_PreData"/> 
                <antcall target="run_DFPPulls"/> 
                <antcall target="run_AdTechPulls"/> 
                <antcall target="run_AppnexusPulls"/> 
                <antcall target="run_FTPPulls"/> 
                <antcall target="run_OASPulls"/> 
                <antcall target="run_GDFPPulls"/> 
                <antcall target="run_FreewheelPulls"/> 
                <antcall target="run_ThirdPartyPulls"/> 
            </parallel>
            <parallel>
        <antcall target="run_PostData"/> 
                <antcall target="run_Sales"/> 
            </parallel>
            <parallel>
                <antcall target="run_Administration"/> 
                <antcall target="run_E2EPartner360"/> 
                <antcall target="run_Sales"/> 
                <antcall target="run_Finance"/> 
                <antcall target="run_Loaders"/> 
                <antcall target="run_Accounts"/> 
                <antcall target="run_Adops"/> 
            </parallel>
            <parallel>
                <antcall target="run_Alerts"/> 
                <antcall target="run_CustomFields"/> 
            </parallel>
            <antcall target="stop-selenium"/>
       </sequential>
    </target> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:19:36.287

您可以尝试使用来自 ant-contrib 的[try-catch 。](http://ant-contrib.sourceforge.net/tasks/tasks/trycatch.html)

链接中的示例：

```
<trycatch property="foo" reference="bar">
  <try>
    <fail>Tada!</fail>
  </try>

  <catch>
    <echo>In &lt;catch&gt;.</echo>
  </catch>

  <finally>
    <echo>In &lt;finally&gt;.</echo>
  </finally>
</trycatch> 
```

如果 someting 失败了，你只会回显一些东西（或做笔记）。如果您需要确保服务器在最后关闭，那么最后的部分效果很好，即使两者之间出现了严重故障。

此外，设置`failonerror="false"`应该使 ant 不会因错误而导致构建失败。

# java - 使用 java 中的命令提示符

> ID：10117373
> 
> 赞同：1
> 
> 时间：2012-04-12T04:27:53.563
> 
> 标签：java, cmd

我正在尝试使用一些简单的命令为 windows 命令提示符制作 Java GUI。我在额外输入方面遇到了一些问题。我可以运行“dir”命令，但是当我运行“del”命令时，我需要确认，但我似乎无法让它打印出确认消息。

```
public static void main(String args[])
{
    try {
        Process p = Runtime.getRuntime().exec("cmd /c dir");
        read(p);
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private static void read(Process p)
{
    try{
        BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));
        String line = null;
        while((line=input.readLine()) != null) {
            System.out.println(line);
        }   
    }
    catch(IOException e1) { e1.printStackTrace(); }
} 
```

输出：

```
 Volume in drive E has no label.
 Volume Serial Number is E9ED-7E32

 Directory of E:\Code\workspace\Project

04/11/2012  11:07 PM    <DIR>          .
04/11/2012  11:07 PM    <DIR>          ..
04/11/2012  09:53 PM               301 .classpath
04/11/2012  09:53 PM               383 .project
04/11/2012  09:53 PM    <DIR>          .settings
04/12/2012  12:09 AM    <DIR>          bin
04/12/2012  12:09 AM    <DIR>          src
04/11/2012  11:07 PM    <DIR>          test
               2 File(s)            684 bytes
               6 Dir(s)  429,106,937,856 bytes free 
```

但是运行它会导致它挂在`line=input.readLine()`

```
public static void main(String args[])
{
    try {
        Process p = Runtime.getRuntime().exec("cmd /c del test");
        read(p);
        OutputStream oStream = p.getOutpuStream();
        BufferedWriter sWriter = new BufferedWriter(newOutputStreamWriter(oStream));
        sWriter.write("y");
        sWriter.newLine();
        oStream.close();
        read(p);
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

如何防止这种挂起？我还担心没有正确发送确认“y”。我觉得应该读取输出并写入输入，但这是我在多个在线站点找到的方式。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T04:55:59.757

当您启动 Java 进程时，您必须在错误流和输入流填满之前读取它们。在 Linux/OS X 下这没什么大不了的，但在 Windows 下，JVM 和子进程之间的缓冲区非常小，如果你不立即开始阅读，程序就会挂起。看起来代码正在为输入流而不是错误流执行此操作，因此如果来自 del 的确认出现在错误流上，那么这足以挂起进程。

Java 中有一种方法可以组合输出流和错误流。最简单的方法是在创建流程时使用[ProcessBuilder.redirectErrorStream() 。](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html#redirectErrorStream())

代码的另一个可能问题是使用`readLine().`如果子程序发送没有换行符的输出，那么父程序将不会收到它 - 因为对 readline 的调用将只是等待行尾（IIRC del 这样做） . 使用 BufferedReader 很好，但它确实应该一次读取一个字节/字符。如果代码在专用线程中执行此操作，它也会更加健壮，那么如果程序在您尝试传递输入时发送输出，它就不会挂起。

此外，del 上还有一个选项可以使其不提示确认。试试德尔/？从命令提示符。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:54:19.080

它所有的标准io（即stdin、stdout、stderr）操作都会通过三个流（Process.getOutputStream()、Process.getInputStream()、Process.getErrorStream()）从原始进程重定向到父进程。您能否检查消息的确认是否是 ErrorStream 的一部分。此外，为了让您输入确认 y 以进行删除，您需要使用 inputStream。

# rest - 这些是 RestSharp 和 ServiceStack 的客户端代码之间的主要区别吗？

> ID：10117376
> 
> 赞同：37
> 
> 时间：2012-04-12T04:28:14.720
> 
> 标签：rest, servicestack, restsharp

我一直无法做出明确的选择，并希望有人（或几个人的组合）可以指出使用 RestSharp 与 ServiceStack 的客户端服务之间的区别（请记住，我已经在使用 ServiceStack 作为我的服务） . 这是我到目前为止所拥有的（仅差异）。该列表相当小，因为它们确实非常相似：

# 服务栈

## 优点

*   来自我已经创建的服务 POCO 对象的流利验证
*   一个 API 用于客户端和服务
*   代码可读性更好（即 Get<>()、Post<>()）

## 缺点

*   必须写出我的一些字符串（即，如果我使用查询参数发出 GET 请求，我必须在我的代码中创建该字符串）
*   我必须为每个请求/响应类型（JsonServiceClient、XmlServiceClient）创建一个不同的类

# RestSharp

## 优点

*   几乎所有东西都可以是 POCO（即，如果我使用查询参数发出 GET 请求，我只需通过代码添加参数）
*   请求/响应类型之间的切换很简单（request.RequestFormat = DataFormat.Json/Xml）

## 缺点

*   手动验证（超出数据注释中的验证）
*   两个要学习的 API（这是次要的，因为它们都相当简单）
*   代码一目了然（几乎没有）可读性（即 request.Method = Get/Post.. 并且主要调用是 Execute< T >()）

我倾向于 RestSharp，因为它更倾向于直接使用 POCO 和很少的字符串操作，但是我认为 ServiceStack 可能是可以接受的，以获得更容易阅读的验证和代码。

所以，这里有几个问题：

*   你喜欢哪个？
*   为什么一个比另一个？

我知道这不是一个完全主观的问题，但至少我正在寻找这个问题的答案（这是主观的）：

*   **我的任何发现是否不正确和/或我错过了什么？**

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-12T05:55:32.447

作为 ServiceStack 的项目负责人，[我](http://www.servicestack.net)可以列出 ServiceStack 服务客户端的一些特性：

ServiceStack 服务客户端在使用 ServiceStack Web 服务及其约定方面固执己见。[即它们具有对结构化验证和错误处理](https://github.com/ServiceStack/ServiceStack/wiki/Validation)的内置支持，并且所有客户端都实现相同的接口，因此您可以使用[相同的单元测试作为](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.IntegrationTests/Tests/WebServicesTests.cs)JSON、JSV、XML、SOAP 甚至[Protobuf](https://github.com/ServiceStack/ServiceStack/wiki/Protobuf-format)服务客户端 - 允许您轻松更改服务使用的端点/格式，而无需更改代码。

基本上，如果您正在使用 ServiceStack Web 服务，我建议您使用 ServiceStack 客户端，这将允许您重用您定义 Web 服务的 DTO，从而为您提供端到端的类型化 API。

如果您使用的是第 3 方 API，我会推荐 RestSharp，它是一个更通用的 REST 客户端，非常适合该任务。此外，由于 ServiceStack 只是通过线路返回干净的 DTO，它也可以从 RestSharp 轻松使用，如果您更喜欢它的 API，它也是一个不错的选择。

* * *

### 更新 - 使用 ServiceStack 的 HTTP 客户端工具

ServiceStack 现在提供了一个使用 3rd Party API 的替代选项，其[HTTP Client Util 扩展方法](https://github.com/ServiceStack/ServiceStack/wiki/Http-Utils)围绕常见的 HttpWebRequest 访问模式提供 DRY、可读 API，例如：

```
List<GithubRepo> repos = "https://api.github.com/users/{0}/repos".Fmt(user)
    .GetJsonFromUrl()
    .FromJson<List<GithubRepo>>(); 
```

**网址扩展**

```
var url ="http://api.twitter.com/statuses/user_timeline.json?screen_name={0}"
    .Fmt(name);
if (sinceId != null)
    url = url.AddQueryParam("since_id", sinceId);
if (maxId != null)
    url = url.AddQueryParam("max_id", maxId);

var tweets = url.GetJsonFromUrl()
    .FromJson<List<Tweet>>(); 
```

**替代内容类型**

```
var csv = "http://example.org/users.csv"
    .GetStringFromUrl(acceptContentType:"text/csv"); 
```

更多示例可从[HTTP Utils wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/Http-Utils)获得。

# algorithm - 从 A 中找到文章 B 中的连续单词

> ID：10117377
> 
> 赞同：0
> 
> 时间：2012-04-12T04:28:21.817
> 
> 标签：algorithm

> 有两篇文章，A和B，篇幅很大。在 A 中获取三个或更多连续单词并检查它们是否出现在 B 中，并计算它们出现的次数。例如，如果 'book' 'his' 和 'her' 在 A 中出现，它们在 B 中出现了多少次？

我想过将B的全部内容拆分，然后用StringToken检查A中的所有3个单词，但我不确定算法效率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:12:57.490

查看[哈希](http://java.sun.com/javase/6/docs/api/java/util/Hashtable.html "关联")表是什么，逐个扫描文件 B 中的单词（如果您不关心大文件的内存使用情况，可以拆分）您在哈希表中找到的每个单词（如果未找到）或将数字增加到get of times 一个单词被看到。

然后你只需扫描。over A，寻找每组3个单词，带有滚动滑动窗口。这样，您以后可以增加窗口的长度而无需重写任何内容。

作为参考，您应该真正标记家庭作业问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:41:42.673

很明显，您需要一次扫描/解析 B 的全部内容才能获得结果。你不能避免这样做。逐行阅读。对于每一行，搜索给定的查询词及其在该行中的计数。继续添加每行生成的计数以获得最终结果。

如果您想对相同/不同术语的 B 内容进行多次此类计算，则为 B 创建[Inverted_index](http://en.wikipedia.org/wiki/Inverted_index)将是最好的方法。

# ruby-on-rails - 如何在 Ruby on Rails 中的模型之间传递数据

> ID：10117378
> 
> 赞同：0
> 
> 时间：2012-04-12T04:28:22.050
> 
> 标签：ruby-on-rails, ruby

我有一个控制器，我目前使用重定向到另一个控制器，我知道我可以使用 :query ...

有什么方法可以在不使用 http 的情况下做到这一点，因为我发现使用 http 发送哈希是不可能的。

我在任何地方都找不到此信息，从一个控制器到另一个控制器共享数据（斜线发送）数据的最常见方式是什么？

请帮忙解决这个问题好几个小时，顺便说一句，我是 RoR 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:44:22.340

如果要重定向浏览器，则必须使用查询选项，因为重定向实际上告诉浏览器向不同路径发出另一个请求。

如果您只想渲染其他控制器操作，您可以调用：

```
render :template=>"path to view you want to render" 
```

至于实际调用其他动作？您可以将逻辑提取（重构）到一个库中并从两个控制器调用相同的逻辑，然后对两者使用相同的视图..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:54:34.530

我找到了答案，我可能对这个问题不够具体。但是您可以使用查询字符串传递哈希；显然（现在我想到了）将其转换为字符串 duh。所以我只是`eval`在接收哈希中使用，

`eval(@params['inputData']`这给了我哈希。

# android - Android - 页面不滚动

> ID：10117385
> 
> 赞同：2
> 
> 时间：2012-04-12T04:28:56.277
> 
> 标签：android

我有一个具有这种布局的页面：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >       

<TextView
    android:id="@+id/question_label"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Your question: "
    />     

<TextView
    android:id="@+id/question"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text=""
    />     

<TextView
    android:id="@+id/please_wait"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Please wait while the discussion loads..."
    />     

    <ListView
    android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20px" >        
    </ListView>

        <EditText  
            android:id="@+id/question_text"  
            android:layout_height="wrap_content"  
            android:hint="@string/question_comment_hint"  
            android:inputType="textMultiLine"  
            android:lines="5"  
            android:layout_width="fill_parent">  
        </EditText>

<Button  
            android:id="@+id/submit"  
            android:layout_height="wrap_content"  
            android:text="@string/submit"  
            android:onClick="sendFeedback"  
            android:layout_width="fill_parent">  
        </Button>               

</LinearLayout> 
```

由于某种原因，一旦屏幕被填满，它就不会向下滚动。知道为什么会发生这种情况吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T04:43:57.597

```
<?xml version="1.0" encoding="utf-8"?>   
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/question_label"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Your question: " />

        <TextView
            android:id="@+id/question"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="" />

        <TextView
            android:id="@+id/please_wait"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Please wait while the discussion loads..." />

        <ListView
            android:id="@android:id/list"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@+id/label"
            android:textSize="20px" >
        </ListView>

        <EditText
            android:id="@+id/question_text"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="some text"
            android:inputType="textMultiLine"
            android:lines="5" >
        </EditText>

        <Button
            android:id="@+id/submit"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:onClick="sendFeedback"
            android:text="some tesxt" >
        </Button>
    </LinearLayout>
</ScrollView>

</LinearLayout> 
```

你必须使用[Scrollview](http://developer.android.com/reference/android/widget/ScrollView.html)来滚动你的视图，试试上面的代码，希望它能工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:31:30.900

使用linearLayout下面的ScrollView ..definetely它将滚动整个布局..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T04:32:05.640

将您的线性布局嵌入到滚动视图中

[http://developer.android.com/reference/android/widget/ScrollView.html](http://developer.android.com/reference/android/widget/ScrollView.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T04:37:31.207

要在列表中滚动，您必须为第一次显示设置它的高度，然后如果它超过它的长度，它将自动滚动，对于整个活动，如果它不自动滚动，您应该使用滚动，或者您可以通过设置修复来检查它根线性布局的高度

# python - 从字符串列表中，您如何获得python中最奇怪的单词/字符串

> ID：10117386
> 
> 赞同：1
> 
> 时间：2012-04-12T04:28:57.300
> 
> 标签：python

我有一个字符串列表：

```
['twas', 'brillig', 'and', 'the', 'slithy', 'toves', 'did', 'gyre', 'and', 'gimble', 'in', 'the', 'wabe', 'all', 'mimsy', 'were', 'the', 'borogoves', 'and', 'the', 'mome', 'raths', 'outgrabe', '"beware', 'the', 'jabberwock', 'my', 'son', 'the', 'jaws', 'that', 'bite', 'the', 'claws', 'that', 'catch', 'beware', 'the', 'jubjub', 'bird', 'and', 'shun', 'the', 'frumious', 'bandersnatch', 'he', 'took', 'his', 'vorpal', 'sword', 'in', 'hand', 'long', 'time', 'the', 'manxome', 'foe', 'he', 'sought', 'so', 'rested', 'he', 'by', 'the', 'tumtum', 'tree', 'and', 'stood', 'awhile', 'in', 'thought', 'and', 'as', 'in', 'uffish', 'thought', 'he', 'stood', 'the', 'jabberwock', 'with', 'eyes', 'of', 'flame', 'came', 'whiffling', 'through', 'the', 'tulgey', 'wood', 'and', 'burbled', 'as', 'it', 'came', 'one', 'two', 'one', 'two', 'and', 'through', 'and', 'through', 'the', 'vorpal', 'blade', 'went', 'snicker-snack', 'he', 'left', 'it', 'dead', 'and', 'with', 'its', 'head', 'he', 'went', 'galumphing', 'back', '"and', 'has', 'thou', 'slain', 'the', 'jabberwock', 'come', 'to', 'my', 'arms', 'my', 'beamish', 'boy', 'o', 'frabjous', 'day', 'callooh', 'callay', 'he', 'chortled', 'in', 'his', 'joy', '`twas', 'brillig', 'and', 'the', 'slithy', 'toves', 'did', 'gyre', 'and', 'gimble', 'in', 'the', 'wabe', 'all', 'mimsy', 'were', 'the', 'borogoves', 'and', 'the', 'mome', 'raths', 'outgrabe'] 
```

如何返回与字符串中其他单词最不同的单词列表 - 基于与列表中所有其他单词的最小相似度和平均相似度值（作为浮点数）。

我绝对不知道该怎么做。我想我需要使用 cossim(word1,word2) 函数来计算“word1”和“word2”之间的相似度，因为我们的讲师给了我们这个函数，但我不知道如何使用它。

```
def cossim(word1,word2):
"""Calculate the cosine similarity between the two words"""

# sub-function for constructing a letter vector from argument `word`
# which returns the tuple `(vec,veclen)`, where `vec` is a dictionary of
# characters in `word`, and `veclen` is the length of the vector
def wordvec(word):
    vec = defaultdict(int)  # letter vector

    # count the letters in the word
    for char in word:
        vec[char] += 1

    # calculate the length of the letter vector
    len = 0.0
    for char in vec:
        len += vec[char]**2

    # return the letter vector and vector length
    return vec,math.sqrt(len)

# calculate a vector,length tuple for each of `word1` and `word2`
vec1,len1 = wordvec(word1)
vec2,len2 = wordvec(word2)

# calculate the dot product between the letter vectors for the two words
dotprod = 0.0
for char in vec1:
    dotprod += vec1[char]*vec2[char]

# divide by the lengths of the two vectors
if dotprod:
    dotprod /= len1*len2

return dotprod 
```

我应该从上面的列表中得到的答案应该是：

```
({'my'], 0.088487238234566931) 
```

任何帮助是极大的赞赏，

谢谢，

基利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:14:39.933

在使用 Robert Rossney 建议的方法之前，*首先*需要对单词列表进行重复数据删除。否则生成的数字会略有偏差，因为相同的数字`w`可能会在一个中出现多次`d[word]`。

一种可能的方法是从列表中创建一个集合：

```
set_of_words = set(mylist)
differences = {}
for word in set_of_words:
    differences[word] = [cossim(word, word2) for word2 in set_of_words if word != word2] 
```

这将创建一个字典，为每个单词分配一个与其他单词的差异列表。

除了将这些列表直接分配给字典条目，您还可以将它们保存在循环内的变量中，并使用该变量计算罗伯特解决方案中建议的 afg 之类的 avg。

字典函数[iteritems](http://docs.python.org/library/stdtypes.html#dict.iteritems)允许您遍历-pairs，`(key, value)`并且[min](http://docs.python.org/library/functions.html#min)函数有一个特殊参数`key`来指定要最小化的内容，例如`key=lambda x: x[1]`按元组或列表的第二个元素排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:55:35.710

因此，如果我理解正确的话，目标是找到 cossim 与所有其他单词之和最小的单词。为此，以下代码就足够了：

```
/* removed at the reasonable request of agf */ 
```

从高层次的角度来看，我们正在做的是遍历列表中的每个单词，并检查它与所有其他单词的相似程度。如果它与我们迄今为止看到的任何其他单词都不相似，我们将其存储。我们的输出是与所有其他单词相似度最低的单词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T04:48:53.870

首先，您可能想要构建一个字典，其键是列表中的单词，其值是列表中的所有*其他*单词：

```
d = {}
for word in mylist:
   d[word] = [w for w in mylist if w != word] 
```

这为您提供了一种快速计算每个单词的相似度值的方法：

```
similarities = {}
for word in mylist:
   similarities[word] = [cossim(w, word) for w in d[word]] 
```

由此很容易计算每个单词的最小和平均相似度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-14T07:58:44.240

我认为模块 Python-Levenshtein [（pypi 链接）](https://pypi.python.org/pypi/python-Levenshtein/0.11.2)可能有助于获得 word1 和 word2 的相似性：

使用两个功能：

```
import Levenshtein

str1 = 'abcde'
str2 = 'abcdf'
print(Levenshtein.distance(str1,str2))
# 1
print(Levenshtein.ratio(str1,str2))
# 0.8 
```

足够的。

# hadoop - 使用 JAVA API 在 HDFS 中复制目录

> ID：10117387
> 
> 赞同：0
> 
> 时间：2012-04-12T04:29:01.240
> 
> 标签：hadoop, hdfs

如何将 HDFS 中的目录复制到 HDFS 中的另一个目录？

我找到了从本地 FS 复制到 HDFS 的 copyFromLocalFile 函数，但我希望源/目标都在 HDFS 中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:34:45.577

使用[distcp](http://hadoop.apache.org/common/docs/current/distcp.html)命令。

distcp 的规范用例是在两个 HDFS 集群之间传输数据。如果集群运行相同版本的 Hadoop，则 hdfs 方案是合适的：

> % hadoop distcp hdfs://namenode1/foo hdfs://namenode2/bar

如果您想通过 Java 代码执行此操作，请参阅类[org.apache.hadoop.tools.DistCp](http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hadoop/hadoop-tools/0.20.2-737/org/apache/hadoop/tools/DistCp.java)并适当地调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:23:35.073

你可以试试 FileUtil.copy

[http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/fs/FileUtil.html](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/fs/FileUtil.html)

# php - Mysql从两个表到1个数组

> ID：10117391
> 
> 赞同：0
> 
> 时间：2012-04-12T04:30:00.217
> 
> 标签：php, mysql

数据库

产品

```
id        name               
1         Product #1            
2         Product #2                
3         Product #3            
4         Product #4 
```

审查

```
id        idUser    idProduct  Rating
1         1         1          A Long Boring Review that is up to 500 characters
2         1         2          A Long Boring Review that is up to 500 characters   
3         2         4          A Long Boring Review that is up to 500 characters
4         1         1          A Long Boring Review that is up to 500 characters 
```

从这两个数据库中提取信息并安排它们的最佳方式是什么：

```
[0] => stdClass Object
        (
            [id] => 1
            [name] => Product #1
            [reviews] => Array(
                [0]=>
                    (
                        [id] => "1"
                        [idUser] => "1"
                        [idProduct] => "1"
                        [Rating] => "A Long Boring Review that is up to 500 characters"
                    )
                [1] = >
                    (...
            )
        )
[1] => stdClass Object
        (
            [id] => 2
            [name] => Product #2
            [reviews] => Array(
                [0]=>
                    (
                        [id] => "1"
                        [idUser] => "1"
                        [idProduct] => "2"
                        [Rating] => "A Long Boring Review that is up to 500 characters"
                    )
                [1] = >
                    (...
            )
        ) 
```

我正在考虑使用 GROUP_CONCAT 但这不会在以后引起很多性能问题吗？也没有字数限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:45:50.430

如果只有一条评论，这将为您提供一维结果：

```
SELECT `id`,`name`,(SELECT `Review`.`Rating` FROM `Review` WHERE `Review`.`idProduct` = `id`) as `rating` FROM `Product` WHERE 1; 
```

对于多个评论，您需要循环并为每个产品构建结构。

对于另一种方法，请参阅此问题的答案：[如何在 MySQL 中创建关系](https://stackoverflow.com/questions/260441/how-to-create-relationships-in-mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:35:04.280

如果不首先迭代 Product 的结果，您将无法获得所需的数据，因为它是一对多关系

请参阅此答案[使用 PHP/CodeIgniter 显示具有多对多关系的两个表中的数据](https://stackoverflow.com/questions/9936797/displaying-data-from-two-tables-with-many-to-many-relation-using-php-codeigniter/9937130#9937130)

它适用于codeigniter，但您可以理解

# model-view-controller - 删除标签栏中的图标，sencha touch 2

> ID：10117392
> 
> 赞同：0
> 
> 时间：2012-04-12T04:30:11.147
> 
> 标签：model-view-controller, uitabbarcontroller, sencha-touch-2

我需要在我的 Sencha 触摸应用程序中添加一个删除图标，单击它时应该会显示一条确认消息。这是我需要的。但是，它被带到了一个新页面。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:54:00.023

你为什么写`xtype: 'formpanel'`？它应该是`xtype:'button'`即时的。这对我有用：

```
{
    title: 'Delete', 
    iconCls: 'delete', 
    cls: 'home', 
    xtype:'button' ,
    handler: function() 
    { 
        var del=confirm('Are you sure'); 
        if(del) { 
            console.log('confirm');
        } ;
    },
}, 
```

# actionscript-3 - 如何在文本中添加笔画？

> ID：10117393
> 
> 赞同：1
> 
> 时间：2012-04-12T04:30:11.923
> 
> 标签：actionscript-3, flash, apache-flex, fxg

如何在 Flex 4 中为文本添加笔画？具体来说，我想将它添加到标签中（文本将在其中更改）。

**更新**
建议的最接近的解决方案是添加阴影过滤器，如下所示。我添加了一个带有笔划的矩形进行比较。如果行程重量在 2 到 3 之间，则可以接受。如果它高于或低于该值，则它太模糊或粗糙。就我而言，我需要支撑 2 到 6 个重量。

一个后续问题是是否可以通过 Pixel Bender 创建笔画过滤器。

```
<s:VGroup>

<s:Label text="Select an example on the left. Right-click to view source." 
         color="#FF8C00"
         top="10" left="10"
         fontSize="25">
    <s:filters>
        <s:DropShadowFilter blurX="2" blurY="2" distance="0" quality="1" strength="10" color="#000000"/>
    </s:filters>
</s:Label>

<s:Rect width="100%" radiusX="8" radiusY="8"
        height="18">
    <s:fill>
        <s:SolidColor color="#FF8C00"/>
    </s:fill>
    <s:stroke>
        <s:SolidColorStroke weight="1" />
    </s:stroke>
</s:Rect>

<s:Label text="Select an example on the left. Right-click to view source." 
         color="#FF8C00"
         top="10" left="10"
         fontSize="25">
    <s:filters>
        <s:DropShadowFilter blurX="4" blurY="4" distance="0" quality="1" strength="10" color="#000000"/>
    </s:filters>
</s:Label>

<s:Rect width="100%" radiusX="8" radiusY="8"
        height="18">
    <s:fill>
        <s:SolidColor color="#FF8C00"/>
    </s:fill>
    <s:stroke>
        <s:SolidColorStroke weight="2" />
    </s:stroke>
</s:Rect>

<s:Label text="Select an example on the left. Right-click to view source." 
         color="#FF8C00"
         top="10" left="10"
         fontSize="25">
    <s:filters>
        <s:DropShadowFilter blurX="6" blurY="6" distance="0" quality="1" strength="10" color="#000000"/>
    </s:filters>
</s:Label>

<s:Rect width="100%" radiusX="8" radiusY="8"
        height="18">
    <s:fill>
        <s:SolidColor color="#FF8C00"/>
    </s:fill>
    <s:stroke>
        <s:SolidColorStroke weight="3" />
    </s:stroke>
</s:Rect>

<s:Label text="Select an example on the left. Right-click to view source." 
         color="#FF8C00"
         top="10" left="10"
         fontSize="25">
    <s:filters>
        <s:DropShadowFilter blurX="8" blurY="8" distance="0" quality="1" strength="10" color="#000000"/>
    </s:filters>
</s:Label>

<s:Rect width="100%" radiusX="8" radiusY="8"
        height="18">
    <s:fill>
        <s:SolidColor color="#FF8C00"/>
    </s:fill>
    <s:stroke>
        <s:SolidColorStroke weight="4" />
    </s:stroke>
</s:Rect>

</s:VGroup> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T04:31:07.587

我知道的唯一方法是应用一个非常非常强大`GlowFilter`的模糊半径。

就像是：

```
var stroke:GlowFilter = new GlowFilter(0x000000, 1, 2, 2, 10, 1);
field.filters = [stroke]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:37:13.100

距离为 0 的阴影滤镜也可以使用，角度并不重要。就像是 ：

```
var shadow:DropShadowFilter = new DropShadowFilter(0, 90, 0x000000, 1, 10, 10, 10);
text.filters = [shadow]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:51:49.673

您不能以这种方式应用于文本，但您可以将文本重新绘制为图形并以这种方式创建轮廓。

您可以使用 degrafa 之类的库，或者查看（或使用）five3d 中的排版类，它将字体转换为图形[Typography3D](http://five3d.mathieu-badimon.com/docs/as3-f10/net/badimon/five3D/typography/Typography3D.html)还有一个应用程序允许您将字体转换为图案，因此您可以使用任何字体。

所以本质上，这是可能的，但问题是它是否值得。

# c++ - 使用 Kinect 1.0 SDK 无法将深度图像拟合到 RGB 图像

> ID：10117396
> 
> 赞同：2
> 
> 时间：2012-04-12T04:30:44.707
> 
> 标签：c++, opencv, kinect

我试图让 Kinect 深度相机像素叠加到 RGB 相机上。我正在使用带有 Xbox Kinect、OpenCV 的 C++ Kinect 1.0 SDK 并尝试使用新的“NuiImageGetColorPixelCoordinateFrameFromDepthPixelFrameAtResolution”方法。

我已经看到图像以慢动作呈现，看起来好像在一帧中多次绘制像素。它首先从顶部和左侧边界绘制自己，然后到达一个点（你可以在那里看到一个 45 度角）开始绘制怪异。

我一直在尝试将我的代码基于 Adam Smith 在[MSDN 论坛上](http://social.msdn.microsoft.com/Forums/en-US/kinectsdknuiapi/thread/c39bab30-a704-4de1-948d-307afd128dab)编写的 C# 代码， 但没有骰子。我已经去掉了覆盖的东西，只想在它“应该”在 RGB 图像中的位置绘制深度归一化深度像素。

左侧的图像是我尝试将深度图像拟合到 RGB 空间时得到的图像，右侧的图像是我喜欢看到的“原始”深度图像。我希望我的方法能创建一个与右侧图像相似的图像，但有轻微的扭曲。

![混乱的深度图](../Images/a9506aa92525084bf5dfa50ca075fdeb.png)

这是我目前拥有的代码和对象定义：

```
// From initialization
INuiSensor *m_pNuiInstance;
NUI_IMAGE_RESOLUTION m_nuiResolution = NUI_IMAGE_RESOLUTION_640x480;
HANDLE m_pDepthStreamHandle;
IplImage *m_pIplDepthFrame;
IplImage *m_pIplFittedDepthFrame;

m_pIplDepthFrame = cvCreateImage(cvSize(640, 480), 8, 1);
m_pIplFittedDepthFrame = cvCreateImage(cvSize(640, 480), 8, 1);

// Method
IplImage *Kinect::GetRGBFittedDepthFrame() {
    static long *pMappedBits = NULL;

    if (!pMappedBits) {
         pMappedBits = new long[640*480*2];
    }

    NUI_IMAGE_FRAME pNuiFrame;
    NUI_LOCKED_RECT lockedRect;
    HRESULT hr = m_pNuiInstance->NuiImageStreamGetNextFrame(m_pDepthStreamHandle, 0, &pNuiFrame);

    if (FAILED(hr)) {
        // return the older frame
        return m_pIplFittedDepthFrame;
    }

    bool hasPlayerData = HasSkeletalEngine(m_pNuiInstance);

    INuiFrameTexture *pTexture = pNuiFrame.pFrameTexture;
    pTexture->LockRect(0, &lockedRect, NULL, 0);

    if (lockedRect.Pitch != 0) {
        cvZero(m_pIplFittedDepthFrame);

        hr = m_pNuiInstance->NuiImageGetColorPixelCoordinateFrameFromDepthPixelFrameAtResolution(
            m_nuiResolution,
            NUI_IMAGE_RESOLUTION_640x480,
            640 * 480, /* size is previous */ (unsigned short*) lockedRect.pBits,
            (640 * 480) * 2,  /* size is previous */ pMappedBits);

        if (FAILED(hr)) {
            return m_pIplFittedDepthFrame;
        }

    for (int i = 0; i < lockedRect.size; i++) {
            unsigned char* pBuf = (unsigned char*) lockedRect.pBits + i;
            unsigned short* pBufS = (unsigned short*) pBuf;
            unsigned short depth = hasPlayerData ? ((*pBufS) & 0xfff8) >> 3 :  ((*pBufS) & 0xffff);
            unsigned char intensity = depth > 0 ? 255 - (unsigned char) (256 * depth / 0x0fff) : 0;

            long
                x = pMappedBits[i], // tried with *(pMappedBits + (i * 2)),
                y = pMappedBits[i + 1]; // tried with *(pMappedBits + (i * 2) + 1);

            if (x >= 0 && x < m_pIplFittedDepthFrame->width && y >= 0 && y < m_pIplFittedDepthFrame->height) {
                m_pIplFittedDepthFrame->imageData[x + y * m_pIplFittedDepthFrame->widthStep] = intensity;
            }

        }
    }

    pTexture->UnlockRect(0);
    m_pNuiInstance->NuiImageStreamReleaseFrame(m_pDepthStreamHandle, &pNuiFrame);

    return(m_pIplFittedDepthFrame);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:07:35.980

我发现问题在于循环，

```
for (int i = 0; i < lockedRect.size; i++) {
    // code
} 
```

是在每个字节的基础上进行迭代，而不是在每个短（2 个字节）的基础上。由于lockedRect.size返回字节数，修复只是将增量更改为i + = 2，更好的是将其更改为sizeof（short），如下所示，

```
for (int i = 0; i < lockedRect.size; i += sizeof(short)) {
    // code
} 
```

# facebook - Facebook Javascript SDK 在页面上不起作用

> ID：10117398
> 
> 赞同：0
> 
> 时间：2012-04-12T04:30:59.790
> 
> 标签：facebook, facebook-javascript-sdk

似乎 javascript SDK 在我的域上根本不起作用。赞框不再起作用......我想这是在我创建了一个应用画布页面之后发生的。

我正在尝试在我的应用程序画布页面上使用 FB.ui，但 FB js SDK 没有任何效果。我认为这可能是一个 javascript 问题，所以我删除了所有 jquery / mootools 但没有运气。

一件事是我还没有安全的 URL，这可能是我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:35:09.417

安全 URL 不是问题。请检查错误控制台以查看抛出的错误？要解决 FB 未定义问题，请尝试按照 facebook 的建议异步加载，使用此处提供的代码[http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

# css - 在 3 列中显示时去掉 li 项目的第三个边距，使其与页面边缘对齐？

> ID：10117407
> 
> 赞同：0
> 
> 时间：2012-04-12T04:32:07.590
> 
> 标签：css, wordpress, templates

我到处寻找似乎会有一个简单的答案，即不使用 IE 中不支持的第 n 个孩子。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:54:35.157

仅限 IE7+。

```
li { margin-left: 20px; }
li:first-child { margin-left: 0; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:58:13.380

有一个很好的答案，诀窍是：

为这些框创建一个容器，并将它的边距向右 -20px（或您的原始边距右边），这样它们将在三列中对齐，边距右边 = 20 像素，但容器会吃掉最后 20 像素

看看 twitter bootstrap 他们有很多东西要教

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T05:49:02.003

尝试css解决方案：http: [//kimblim.dk/css-tests/selectors/](http://kimblim.dk/css-tests/selectors/)

```
li:not(:last-child) { margin-right: 20px; } ​ 
```

推荐的 jQuery 解决方案：

```
$('ul li:not(:last)').css('border', '1px solid blue'); 
```

演示：http: [//jsfiddle.net/codef0rmer/PMXdJ/](http://jsfiddle.net/codef0rmer/PMXdJ/)

# ubuntu - 如何在网络中的 2 台 ubuntu 机器之间聊天？

> ID：10117408
> 
> 赞同：0
> 
> 时间：2012-04-12T04:32:13.007
> 
> 标签：ubuntu, messenger

我想知道我们如何在网络中的 2 台 ubuntu 机器之间聊天。

网络中 2 个 ubuntu 的任何命令行聊天信使？
或 GUI 也可以工作。

我在问“网络聊天信使”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:43:08.367

您可以使用 empathy messenger 的 freenode 并加入房间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T04:38:11.280

您可以使用 Internet Relay Chat 并以这种方式进行交流。这可能是最简单的解决方案，因为您只需下载像[http://www.bitchx.org](http://www.bitchx.org)或[http://irssi.org](http://irssi.org)这样的 IRC 客户端。有许多 IRC 服务器，你们都可以连接，创建自己的频道，然后聊天。

# opengl-es-2.0 - 帧缓冲区对象、渲染缓冲区对象和纹理之间的区别？

> ID：10117409
> 
> 赞同：29
> 
> 时间：2012-04-12T04:32:23.373
> 
> 标签：opengl-es-2.0

帧缓冲区对象、渲染缓冲区对象和纹理之间有什么区别？它们将在什么情况下使用？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-06-12T00:27:17.867

## 帧缓冲区

帧缓冲区实际上不是缓冲区。它是为绘制操作定义参数的对象的抽象。它是一个包含一个或多个*附件*的小对象，这些附件本身就是实际的缓冲区。将帧缓冲区理解为具有许多字段的 C 结构。每个字段（OpenGL 术语中的每个*附件*）都可以是指向渲染缓冲区、纹理、深度缓冲区等的指针。

## 质地

一组标准像素。这是一个实际的缓冲区，可以附加到帧缓冲区作为绘制像素的目的地。纹理中的每个像素通常包含颜色分量和 alpha 值（纹理中的像素可以转换为具有 4 个浮点数的 RGBA 四边形）。

绘制到包含附加纹理的帧缓冲区后，可以从纹理中读取像素以用于另一个绘制操作。例如，这允许多次绘制或在另一个场景中绘制一个场景。

纹理可以附加到着色器程序并用作采样器。

## 渲染缓冲区

原生像素数组。渲染缓冲区就像一个纹理，但使用内部格式存储像素。它针对[像素传输](http://www.opengl.org/wiki/Pixel_Transfer)操作进行了优化。它可以作为被绘制像素的目的地附加到帧缓冲区，然后快速复制到视口或另一个帧缓冲区。这允许实现[双缓冲](http://en.wikipedia.org/wiki/Multiple_buffering#Double_buffering_in_computer_graphics)算法，其中下一个场景被绘制而前一个场景被展示。

渲染缓冲区还可用于存储仅用于单个绘制过程的深度和模板信息。这是可能的，因为只有实现本身需要读取渲染缓冲区数据，并且往往比纹理更快，因为使用的是原生格式。

因为它使用原生格式，所以渲染缓冲区**不能**附加到着色器程序并用作采样器。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-12T06:57:43.013

帧缓冲区对象或多或少只是一个管理结构。它管理一个完整的帧缓冲区及其所有子缓冲区，如颜色缓冲区、深度缓冲区和模板缓冲区。

纹理或渲染缓冲区包含各个子缓冲区的实际存储。通过这种方式，您可以拥有多个颜色缓冲区、一个深度缓冲区和一个模板缓冲区，所有这些都存储在不同的纹理/渲染缓冲区中。但它们共同构成了一个逻辑帧缓冲区，您可以在其中进行渲染。

因此，写入帧缓冲区的最终片段（您可以称其为像素，但实际上还不是一个）具有一个或多个颜色值、一个深度值和一个模板值，它们最终都位于帧缓冲区的不同子缓冲区中.

# java - 客户端服务器文件传输 Java

> ID：10117410
> 
> 赞同：0
> 
> 时间：2012-04-12T04:32:43.170
> 
> 标签：java, sockets, client-server, protocols

我正在尝试使用 Java 编写一个应用程序，它允许我在服务器和请求文件的客户端之间传输文件。我打算用套接字来做。我的算法有点像这样：

在服务器上：创建客户端和服务器之间的连接。连接后，找到您需要发送给客户端的文件。然后将文件大小发送给客户端。然后发送分解成部分的文件。

在客户端创建连接后，请求文件。接收文件大小，然后接受数据，直到你达到文件大小。停止。

如果我在算法的某个地方错了，请纠正我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:44:19.130

这不是一个真正的“算法”问题。你正在设计一个（简单的）协议。您所描述的听起来很合理，但实施起来太模糊了。你需要更具体。例如，您需要决定的一些事情：

*   接收程序如何知道它应该保存到哪个文件名？应该通过套接字发送，还是应该只询问用户？
*   文件大小如何传输？
    *   是字符串吗？如果是这样，它的长度如何表示？（使用空终止符？换行符？）
    *   它是二进制值吗？如果有，有多大？（32 位还是 64 位？）什么字节序？
*   “分门别类”是什么意思？如果您正在写入 TCP 套接字，则无需担心数据包边界；TCP 负责这一点。
*   收件人是否发回任何内容，例如成功或失败指示？
*   传输整个文件后会发生什么？
    *   两端是否应该假设连接必须关闭？
    *   或者您可以通过单个连接发送多个文件吗？如果是这样，发件人如何指示另一个文件将跟随？

此外，您正在向后使用术语“客户端”和“服务器”。通常，“客户端”是启动与服务器的连接的机器，而“服务器”是等待来自客户端的连接的机器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:41:30.393

一旦收到文件的特定部分，您还可以从服务器添加确认，类似于我们在 HTTP 协议中的内容，这将确保在服务器上接收到文件的正确传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-05T05:44:00.550

这是我使用的方法，它使用套接字的输入和输出流来发送和接收文件，完成后，它会自动重新启动服务器并从客户端重新连接到它。

服务器代码：

```
package app.server;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.OutputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Functions 
{
    private static ServerSocket server;
    private static Socket socket;

    public static void startServer(int port)
    {   
        try 
        {
            server = new ServerSocket(port);
            socket = server.accept();
        }
        catch (IOException ex) 
        {
            Logger.getLogger(Functions.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    private static void restartServer()
    {
        new Thread()
        {
            @Override
            public void run()
            {
                try 
                {
                    socket = server.accept();
                } 
                catch (IOException ex) 
                {
                    Logger.getLogger(Functions.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }.start();
    }

    public static void sendFile(String inputFilePath)
    {
        FileInputStream fis;
        BufferedInputStream bis;
        OutputStream os;
        BufferedOutputStream bos;
        try 
        {
            File input = new File(inputFilePath);
            fis = new FileInputStream(input);
            bis = new BufferedInputStream(fis);
            os = socket.getOutputStream();
            bos = new BufferedOutputStream(os);
            byte[] buffer = new byte[1024];
            int data;
            while(true)
            {
                data = bis.read(buffer);
                if(data != -1)
                {
                    bos.write(buffer, 0, 1024);
                }
                else
                {
                    bis.close();
                    bos.close();
                    break;
                }
            }
        } 
        catch (FileNotFoundException ex) 
        {
            Logger.getLogger(Functions.class.getName()).log(Level.SEVERE, null, ex);
        } 
        catch (IOException ex) 
        {
            Logger.getLogger(Functions.class.getName()).log(Level.SEVERE, null, ex);
        }
        restartServer();
    }
} 
```

客户代码：

```
package app.client;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Functions 
{
    private static Socket socket;
    private static String hostName;
    private static int portNumber;

    public static void connectToServer(String host, int port)
    {
        new Thread()
        {
            @Override
            public void run()
            {
                try 
                {
                    hostName = host;
                    portNumber = port;
                    socket = new Socket(host, port);
                } 
                catch (IOException ex) 
                {
                    Logger.getLogger(Functions.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }.start();
    }

    private static void reconnectToServer()
    {
        try 
        {
            socket = new Socket(hostName, portNumber);
        } 
        catch (IOException ex) 
        {
            Logger.getLogger(Functions.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public static void receiveFile(String outputFilePath)
    {
        InputStream is;
        BufferedInputStream bis;
        FileOutputStream fos;
        BufferedOutputStream bos;
        try 
        {
            File output = new File(outputFilePath);
            is = socket.getInputStream();
            bis = new BufferedInputStream(is);
            fos = new FileOutputStream(output);
            bos = new BufferedOutputStream(fos);
            byte[] buffer = new byte[1024];
            int data;
            while(true)
            {
                data = bis.read(buffer);
                if(data != -1)
                {
                    bos.write(buffer, 0, 1024);
                }
                else
                {
                    bis.close();
                    bos.close();
                    break;
                }
            }
        } 
        catch (IOException ex) 
        {
            Logger.getLogger(Functions.class.getName()).log(Level.SEVERE, null, ex);
        }
        reconnectToServer();
    }
} 
```

这种方法效果很好，我用它来做我的服务器和客户端文件传输程序，你只需要输入服务器主机的IP地址并选择一个端口号（我用的是8888）。

# c# - 进程列表 - 我的程序中列出的进程多于任务管理器

> ID：10117422
> 
> 赞同：0
> 
> 时间：2012-04-12T04:35:34.620
> 
> 标签：c#, process, system.diagnostics, processlist

我在尝试编写的应用程序时遇到问题。我在用着

```
 int index = 0;
        Process[] processList = Process.GetProcesses();
        foreach (Process p in processList)
        {
            index++;
            Console.WriteLine("Process Number "  + index);
            Console.WriteLine(p.Id.ToString() + ": Process Id - to string");
            Console.WriteLine(p.MachineName + ": Process Machine Name");
            Console.WriteLine(p.PagedMemorySize64.ToString() + ": Process Paged Memory Size");
            Console.WriteLine(p.ProcessName + ": Process Name");
            Console.WriteLine();
        }
        Console.ReadLine(); 
```

检索正在我的计算机上运行的进程。如您所见，我打印了一些我想查看的信息。问题是我的程序将打印出比我的任务管理器更多的进程。在查看打印的信息后，我注意到；A. 有时进程打印不止一次 B. 有时进程甚至不打印 C. 有空闲进程正在打印。我想知道是否有办法准确检索进程列表。任何建议或意见将不胜感激。

![程序vs任务管理器打印出来的进程信息](../Images/7ce3b9d4e4de6ebbad3ec083718f0b76.png)

# java - 可以在 Google App Engine 中拥有一个具有同步访问权限的全局对象吗？

> ID：10117425
> 
> 赞同：0
> 
> 时间：2012-04-12T04:35:37.417
> 
> 标签：java, google-app-engine

我正在开发一个应用程序，该应用程序具有必须对所有实例可用的对象，但还具有对对象内某些方法的同步访问权限。

例如我有这个对象：

```
public class PlanetID implements Serializable {
    public PlanetID() {
        id = 0;
    }

    public long generateID() {
        id++;
        return id;
    }

    private long id;
} 
```

这是一个简单的对象，可以创建一个长的（id）系列。这个对象每次都必须生成一个唯一的 id。目前，我有一个静态同步方法，可以处理 Datastore 访问和存储以及 MemCache 访问和存储。它适用于这种特定方法，但我已经可以看到更复杂对象的问题，这些对象需要用户能够访问非同步变量以及同步变量。

是否有某种方法可以使对象成为全局对象，并在访问这些同步对象时允许同步方法和非同步方法以及对象的存储？

编辑：我认为人们过于关注我给他们的例子，而不是更大的问题，即拥有一个可以被所有实例访问的全局变量，并同步访问特定方法，同时允许异步访问其他方法。

这是一个更好的例子，希望它能让事情变得更清晰。

前任。

```
public class Market implements Serializable {
public Market() {
    mineral1 = new ArrayList<Listing>();
    mineral2 = new ArrayList<Listing>();
    mineral3 = new ArrayList<Listing>();
    mineral4 = new ArrayList<Listing>();
}

public void addListing(int mineral, String userID, int price, long amount) { //Doesn't require synchronized access
    switch (mineral) {
    case MINERAL1:
        mineral1.add(new Listing(userID, price, amount));
        break;
    case MINERAL2:
        mineral2.add(new Listing(userID, price, amount));
        break;
    case MINERAL3:
        mineral3.add(new Listing(userID, price, amount));
        break;
    case MINERAL4:
        mineral4.add(new Listing(userID, price, amount));
        break;
    }
}

public void purchased(int mineral, String userID, long amount) { //Requires synchronized access
    ArrayList<Listing> mineralList = null;

    switch (mineral) {
    case MINERAL1:
        mineralList = mineral1;
        break;
    case MINERAL2:
        mineralList = mineral2;
        break;
    case MINERAL3:
        mineralList = mineral3;
        break;
    case MINERAL4:
        mineralList = mineral4;
        break;
    }       

    Listing remove = null;
    for (Listing listing : mineralList)
        if (listing.userID == userID)
            if (listing.amount > amount) {
                listing.amount -= amount;
                return;
            } else{
                remove = listing;
                break;
            }

    mineralList.remove(remove);
            Collections.sort(mineralList);
}

public JSONObject toJSON(int mineral) { //Does not require synchronized access
    JSONObject jsonObject = new JSONObject();

    try {
        switch (mineral) {
        case MINERAL1:
            for (Listing listing : mineral1)
                jsonObject.accumulate(Player.MINERAL1, listing.toJSON());
            break;
        case MINERAL2:
            for (Listing listing : mineral2)
                jsonObject.accumulate(Player.MINERAL2, listing.toJSON());
            break;
        case MINERAL3:
            for (Listing listing : mineral3)
                jsonObject.accumulate(Player.MINERAL3, listing.toJSON());
            break;
        case MINERAL4:
            for (Listing listing : mineral4)
                jsonObject.accumulate(Player.MINERAL4, listing.toJSON());
            break;
        }
    } catch (JSONException e) {

    }

    return jsonObject;
}

public static final int MINERAL1 = 0;
public static final int MINERAL2 = 1;
public static final int MINERAL3 = 2;
public static final int MINERAL4 = 3;

private ArrayList<Listing> mineral1;
private ArrayList<Listing> mineral2;
private ArrayList<Listing> mineral3;
private ArrayList<Listing> mineral4;

private class Listing implements Serializable, Comparable<Listing> {
    public Listing(String userID, int price, long amount) {
        this.userID = userID;
        this.price = price;
        this.amount = amount;
    }

    public JSONObject toJSON() {
        JSONObject jsonObject = new JSONObject();

        try {
            jsonObject.put("UserID", userID);
            jsonObject.put("Price", price);
            jsonObject.put("Amount", amount);
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return jsonObject;
    }

    @Override
    public int compareTo(Listing listing) {
        return (price < listing.price ? -1 : (price == listing.price ? 0 : 1));
    }

    public String userID;
    public int price;
    public long amount;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:42:21.017

使用 GAE，Java 语言不会为您隐藏所有数据存储抽象。

停止思考全局变量和方法。这些是 Java 语言结构。开始考虑数据存储结构 - 实体、数据存储访问和事务。

在 GAE 上，您的代码将同时在许多服务器上运行，它们不会共享全局变量，“共享数据”在数据存储（或内存缓存）中

实体是数据存储中的对象。您可以从代码中的任何位置获取数据存储，因此它们可以替换您的全局变量。您在方法中定义事务以同步数据存储访问并确保事务只发生一次。有些方法可以使用事务，不需要同步的时候不要使用事务。

你不应该需要你的全球矿物数组列表。当您处理购买时，您基本上需要从数据存储中获取列表的事务，或者如果它不存在则创建它，更新用户并将其写回数据存储。在继续之前，您可能需要阅读数据存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:56:50.287

除了事务之外的其他方法是使用单个后端实例来保存您的全局对象，并让对对象的所有访问都在那里同步。所有其他实例都需要使用 URLFetch 访问此后端实例以获取对象的状态。

这是一个可怕的性能瓶颈，但如果您的应用程序想要顺利扩展，请不要使用它，我只是指出替代方法。事实上，如果可能的话，请首先避免在分布式应用程序上需要同步的全局对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T15:12:20.167

虽然技术上可行，但您应该听取其他答案的建议并使用 Google 提供的服务，例如数据存储和内存缓存。

但是，您可以使用包含您的数据的单个后端，然后使用您喜欢的 RPC 方法将数据读取和写入共享对象。您需要注意，虽然它不经常发生，但不能保证后端不会随机死机 - 因此您可能会丢失此对象中的所有数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:49:26.880

如评论中所述 - 您可以使用事务来实现此目的：

1.  开始交易
2.  使用和属性创建或更新`SomeObject`实体。`index``someText`
3.  提交事务。如果两个实例同时尝试执行此操作，那么其中一个实例会出现异常并需要重试（再次获取数据、递增、全部放入事务中）。

编辑：

（删除了分片计数器的部分，因为它们不保证）

请注意，上述解决方案的写入瓶颈约为 1 写入/秒。如果您需要更高性能的解决方案，您可以考虑使用后端实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T11:09:07.087

看看 DatastoreService.allocateIds - 无论您是否实际使用生成的 ID 来编写数据存储实体，都可以有效地从中获得唯一的长数字。

但是请注意，不能保证它们是按顺序排列的，只能保证它们是唯一的——问题并没有说明按顺序排列是必需的。

```
public class PlanetID implements Serializable
{
    private DatastoreService ds;

    public PlanetID()
    {
        ds = DatastoreServiceFactory.getDatastoreService();
    }

    public long generateID()
    {
        return ds.allocateIds("Kind_That_Will_Never_Be_Used", 1L).getStart().getId();
    }
} 
```

# java - int[] 中项目的频率，而不是 List ?

> ID：10117437
> 
> 赞同：1
> 
> 时间：2012-04-12T04:36:55.310
> 
> 标签：java

我试图弄清楚如何获取列表中项目的频率。过去，当我处理这个问题时，我通常会：

```
int occurrences = Collections.frequency(list, 0); 
```

当我的列表是`List<Integer> list`. 如果我正在使用，有没有办法做到这一点`int[] list`？当我尝试收集时，我的列表会被转换，然后我的代码会中断。如果需要，我可以转换我的代码，但想知道是否有办法从 int[] 获取频率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:39:59.703

您可以 (1) 编写自己的线性时间`frequency`方法，或 (2) 转换为盒装 int 类型的数组并使用`Arrays.asList`with `Collections.frequency`。

```
int[] arr = {1, 2, 3};
Integer[] boxedArr = new Integer[arr.length];
for(int i = 0; i < arr.length; i++)
    boxedArr[i] = arr[i];
System.out.println(Collections.frequency(Arrays.asList(boxedArr), 1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T04:41:10.683

`List`您可以从 中创建一个`int[]`，但除此之外，您只需要编写自己的。

```
int[] l = //your data;
List<Integer> list = new List<Integer>();
for(int i : l)
  list.add(i);

int o = Collections.frequency(list, 0); 
```

或者`Arrays.asList(l);`让它更短。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T04:54:07.023

```
int occurrences = Collections.frequency(Arrays.asList(list), 0); 
```

或者，如果您反对将其转换为列表：

```
int occurrences = 0;
for (int i = 0; i < list.length; i++)
{
    if(list[i] == X) // X being your number to check
        occurrences++;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T05:07:38.310

你也可以这样做。

```
List<Integer> intList = Arrays.asList(new Integer [] {
      2, 3, 4, 5, 6,
      2, 3, 4, 5,
      2, 3, 4,
      2, 3,
      2
    });

  System.out.println(" count " + Collections.frequency(intList, 6)); 
```

# ruby-on-rails - 从复选框集合中存储用户偏好

> ID：10117438
> 
> 赞同：0
> 
> 时间：2012-04-12T04:37:08.113
> 
> 标签：ruby-on-rails, preferences

我有一组用户可以选择多个名称的复选框。

我想在下次登录时保存用户选择。

但是，随着时间的推移，一些名称可能会被删除，而新名称可能会被添加。添加的名称可以保持未选中状态，但我不想继续存储已删除名称的 ID。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:16:04.850

我会为您的选项创建一个表，然后有一个记录选中选项的连接表

然后你可以添加 :dependent => :destroy 到选项侧的关系。删除选项时，这将删除联接表中的记录。

这是一个多对多的例子：

```
def User < ActiveRecord::Base
   has_many :preferences, :dependent=>:destroy
   has_many :options, :through=>:preferences
end

def Preferences < ActiveRecord::Base
    belongs_to :user
    belongs_to :option
end

def Option < ActiveRecord::Base
    has_many :preferences, :dependent=>:destroy
    has_many :users, :through=>:preferences
end 
```

如果需要，您可以为不同类型的选项创建多个连接表。说背景颜色，您需要一个连接，允许您还存储颜色与关联，或者可能对于分页，您需要为页面上的文章存储一个整数，这可能是另一种模型。或者，您可以在连接表中添加一个字符串值，并将关联数据存储为字符串并仅使用该字符串。

# php - 请帮助我如何仅在按钮单击而不是在页面刷新时提交按钮值

> ID：10117443
> 
> 赞同：2
> 
> 时间：2012-04-12T04:38:11.093
> 
> 标签：php

我在项目中使用表单。在我的表单中，当我单击提交按钮时，值会正确提交，但在提交后，如果我刷新页面，则会再次插入现有值而不单击按钮。请帮助我如何仅在按钮单击而不是在页面刷新时提交按钮值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:16:31.097

使用后重定向获取模式。[http://en.m.wikipedia.org/wiki/Post/Redirect/Get](http://en.m.wikipedia.org/wiki/Post/Redirect/Get)

这意味着您在表单上使用 POST 方法，并在响应脚本中将用户重定向到具有位置标头的不同页面。

您的问题在这里有一个很好的答案：[当用户单击浏览器的“刷新”按钮时如何避免重复？](https://stackoverflow.com/questions/1962832/how-to-avoid-duplicate-when-a-user-click-the-refresh-button-of-his-browser)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:00:48.277

在页面提交到感谢页面后使用重定向。

```
Header('location: thankyou.php');
exit(); 
```

# exc-bad-access - 在 IOS5 中使用 Twitter SDK 发送 Twitter

> ID：10117445
> 
> 赞同：0
> 
> 时间：2012-04-12T04:38:23.870
> 
> 标签：exc-bad-access

大家见鬼

我正在尝试使用 Twitter 框架在 IOS5 上的应用程序中发布一条 twitter 消息，当我运行我的应用程序时，它显示线程 1：程序收到信号：代码行上的“EXC_BAD_ACCESS”：iOS5twitter.completionHandler = ^( TWTweetComposeViewControllerResult 结果) ;

这里是 Twitter 代码块：

//代码块

```
TWTweetComposeViewController *iOS5twitter = [[TWTweetComposeViewController alloc] init];

[iOS5twitter addImage:self.item.image];    
[iOS5twitter addURL:self.item.URL];

//if I comment out the following block of code, it works.
iOS5twitter.completionHandler = ^(TWTweetComposeViewControllerResult result) 
{
    [self.currentTopViewController dismissViewControllerAnimated:YES completion:nil];

    switch (result) {

        case TWTweetComposeViewControllerResultDone:
            [self sendDidFinish];
            break;

        case TWTweetComposeViewControllerResultCancelled:
            [self sendDidCancel];                

        default:
            break;
    }
};   
//the above code can be commented out, the it works.

[self.currentTopViewController presentViewController:iOS5twitter animated:YES completion:nil];
[iOS5twitter release]; 
```

//代码块结束

如果我注释掉以下代码块，它可以工作并且可以在 Twitter 中发布消息，但唯一的问题是应用程序无法提示该对话框是否成功发布了消息。

```
//if I comment out the following block of code, it works. 
```

/* iOS5twitter.completionHandler = ^(TWTweetComposeViewControllerResult 结果) { [self.currentTopViewController dismissViewControllerAnimated:YES completion:nil];

```
 switch (result) {

        case TWTweetComposeViewControllerResultDone:
            [self sendDidFinish];
            break;

        case TWTweetComposeViewControllerResultCancelled:
            [self sendDidCancel];                

        default:
            break;
    }
}; 
```

*/ //上面的代码可以注释掉，就可以了。

谁能帮我弄清楚如何解决 EXC_BAD_ACCESS 问题并在消息发布成功与否时提示最终用户？

提前致谢！

* * *

最后上面的代码在真机（iphone 4s ios5.1）上运行，没有注释块代码，太奇怪了，所以如果你也有上述问题的模拟器，我建议你在真机上试试。

苹果的问题是，为什么我们在模拟器和真实设备之间得到不同的结果，这会让开发者抓狂？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T22:46:14.487

这不是答案，但我认为我没有足够的积分来发表评论。

我在我的 Mac 上的带有 SDK 5.1 的 iPhone 模拟器中得到了相同的行为。我建议在这上面写一个 rdar://。

[http://bugreport.apple.com](http://bugreport.apple.com)

# jquery - 调整jquery函数的大小

> ID：10117446
> 
> 赞同：0
> 
> 时间：2012-04-12T04:38:44.283
> 
> 标签：jquery, resize

当窗口调整大小时，我需要再次调用此函数。

```
 $('#container').height(function(){
   return $(window).height() * 0.6;
}); 
```

最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T04:40:15.483

使用[`resize`](http://api.jquery.com/resize/)事件：

```
$(window).resize(function(){
  $('#container').height(function(){
    return $(window).height() * 0.6;
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T04:47:15.167

如果你想让它可重复使用，我会这样做：

```
 function refresh(){
            $('#container').height(function(){
            return $(window).height() * 0.6;
            });
        });

       $(window).resize(refresh);
       refresh(); 
```

# mysql - 使用哪个数据库来存储键值（数组）对

> ID：10117448
> 
> 赞同：1
> 
> 时间：2012-04-12T04:39:02.597
> 
> 标签：mysql, mongodb, database

有人可以告诉使用哪个数据库来存储键值对。我希望我的键是 unicode 字符串，值是 unicode 字符串数组。我应该使用 MySQL 还是 MongoDB。我在维基百科上读到 MongoDB 可以存储键值对。同样在 MySQL 中，我想我可以将值存储为 blob。请帮忙。我真的很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:48:47.563

如果您需要组合多种相关类型的数据，MySql 非常有用。例如，如果您有用户、问题、答案和评论。这些都是相关的，需要结合在一起。

当您拥有一个不需要与其他数据连接的数据集合时，MongoDB 很有用。例如，Facebook 有一个漂亮的搜索框，它会在您键入时填充。这些只是名称和 ID 的列表，无需将其与任何内容连接起来。

# spring - 春季上下文事件

> ID：10117450
> 
> 赞同：0
> 
> 时间：2012-04-12T04:39:10.047
> 
> 标签：spring

我现在正在学习春天。在阅读 Spring 书籍时，我遇到了有关 Event 的部分。

通过使用 context.publishEvent(..)，我可以触发事件。

但我不知道它到底是为了什么。

我可以使用其他方法而不是使用复杂的发布事件。

请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:47:08.407

Spring Events 用于实现发布-订阅模型（或*观察者*模式），其中两个不相关的代码部分必须以某种方式连接。

想想 Web 应用程序的类比，其中 servlet 容器创建 http 会话，并且您的代码使用`javax.servlet.http.HttpSessionListener`.

Spring 在内部使用这种机制。它在 Spring Security 中更为明显，其中代码的几个部分被告知例如成功的身份验证。

# iphone - 将书签功能添加到栏按钮项

> ID：10117462
> 
> 赞同：0
> 
> 时间：2012-04-12T04:41:23.533
> 
> 标签：iphone, ios, xcode, toolbar, bookmarks

我有一个由许多条形按钮项目组成的工具栏。其中我保留了一个作为书签按钮。现在我想将书签功能添加到该条形按钮项。如何做到这一点？任何人都可以建议我吗？

编辑：

我需要像在 Safari 浏览器中一样打开书签菜单。我有带有书签栏按钮项的工具栏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:02:50.817

我在我的应用程序中添加书签之前已经完成了。我使用 fmdb 将数据存储在 sqlite 中，因为如果我们将书签存储在数据库中，添加和删除书签变得很容易。

# javascript - 当 AJAX 向具有无效证书的服务器请求时如何抑制 SSL 错误

> ID：10117467
> 
> 赞同：5
> 
> 时间：2012-04-12T04:42:04.400
> 
> 标签：javascript, ajax, internet-explorer, firefox, ssl

我有这个代码：

```
function newXMLHttpRequest() {
    var xmlHttp;
    try {
        xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try {
            xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (f) {
            xmlHttp = new XMLHttpRequest();
        }
    }
    return xmlHttp;
}
var xmlHttp = newXMLHttpRequest();
xmlHttp.open("POST", url, true);
xmlHttp.onreadystatechange = function() {
    // this I have xmlHttp.status = 12019        
    alert("readyState = " + xmlHttp.readyState + "\nstatus = " + xmlHttp.status);
}
xmlHttp.send('same data'); 
```

当我使用无效证书向服务器发送请求时，出现状态码 12019 错误。

解决方案应该是跨浏览器（IE、FF、Chrome）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-13T11:37:38.723

首先，要回答标题中的问题，这是做不到的。客户端 xmlHttp 库不允许客户端忽略 ssl 错误。该`MsXml2.ServerXMLHTTP` [对象](http://msdn.microsoft.com/en-us/library/ms766431(v=vs.85).aspx)确实允许使用该`setOption(2, 13056)` [方法](http://msdn.microsoft.com/en-us/library/ms763811(v=vs.85).aspx)忽略 SSL 错误。但是，这个对象不能在浏览器中使用，也不是跨平台的。

话虽如此，似乎还有另一个问题。12019 状态并不表示证书无效。在这种情况下，可能会出现HTTP 403 状态代码的某些变体，或许多“[无效认证”代码之一。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385465(v=vs.85).aspx)

您的[12019 状态码](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385465(v=vs.85).aspx)表示：

> **ERROR_INTERNET_INCORRECT_HANDLE_STATE**
> 
> 12019
> 
> 无法执行请求的操作，因为提供的句柄状态不正确。

不幸的是，这个状态码并没有真正传达太多信息，而且在不知道 IE 的版本以及有关服务器的详细信息的情况下，没有更多的事情要做。我检查了一些论坛帖子。[一个说](http://forums.asp.net/t/1123365.aspx)切换到 IIS 解决了这个问题，[另一个](http://forums.asp.net/t/1126173.aspx)说不能被覆盖的临时文件导致了这个问题。然而，大多数帖子都没有令人满意或决定性的结论。

# c - 如何将二维指针转移到函数外部，以便可以访问指针指向的内存？

> ID：10117469
> 
> 赞同：1
> 
> 时间：2012-04-12T04:42:19.357
> 
> 标签：c, pointers, malloc, parameter-passing

这是一个 C 编程问题。

我需要在函数外部传输一个二维指针，`f()`以便其他函数可以访问内部分配的内存`f()`。

但是，当 i > 1 时，我在“此处出错”处出现分段错误。

如何做二维指针，以便输入参数可以真正被外部函数使用？我怀疑这`*ba = (dp[0]);` 有什么问题。

为什么 ？

```
typedef struct {
    char* al;   /* '\0'-terminated C string */
    int   sid;
} strtyp ;

strtyp *Getali(void)
{  
    strtyp  *p = (strtyp *) malloc(sizeof(strtyp )) ;
    p->al = "test al";
    p->sid = rand();
    return p; 
}

strtyp *GetNAl(void)
{
    strtyp *p = (strtyp *) malloc(sizeof(strtyp )) ;
    p->al = "test a";
    p->sid = rand();
    return p; 
}

int *getIDs2(strtyp   **ba, int *aS , int *iSz)
{
    int  *id  = (int *) malloc(sizeof(int) * 8) ;   
    *idS = 8 ; 
    int length = 10;
    int i  ;
    strtyp   **dp  = (strtyp  **) malloc(sizeof(strtyp*)*length) ;  
    for(i = 0 ; i < length ; ++i)
    {
        dp[i] = GetNAl();
        printf("(*pd)->ali is %s ", (*pd[i]).ali );
        printf("(*pd)->sid is %d ", (*pd[i]).sid );
        printf("\n");
    }
    *ba = (dp[0]); 
    for(i = 0 ; i < length ; ++i)
    {
        printf("(*ba)->ali is %s ", (*ba[i]).ali ); // error here
        printf("(*ba)->sid is %d ", (*ba[i]).sid );
        printf("\n");
    }

    *aIs = length ;
    return  id; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T04:50:34.557

如果要`strtyp **`在调用函数中设置变量，则参数必须是指向此类型的指针 - `strtype ***`。所以你的函数看起来像：

```
int *getIDs2(strtyp ***ba, int *aS, int *iSz)
{
    /* ... */
    strtyp **pd  = malloc(sizeof pd[0] * length) ;  

    for(i = 0 ; i < length ; ++i)
    {
        pd[i] = GetNAl();
        printf("(*pd)->ali is %s ", pd[i]->ali );
        printf("(*pd)->sid is %d ", pd[i]->sid );
        printf("\n");
    }

    *ba = pd;

    for(i = 0 ; i < length ; ++i)
    {
        printf("(*ba)->ali is %s ", (*ba)[i]->ali );
        printf("(*ba)->sid is %d ", (*ba)[i]->sid );
        printf("\n");
    }

    /* ... */
} 
```

...你的来电者看起来像：

```
strtyp **x;

getIDs2(&x, ...); 
```

# asp.net - listView 的选择索引在 ASP.NET 中不起作用

> ID：10117472
> 
> 赞同：0
> 
> 时间：2012-04-12T04:42:48.443
> 
> 标签：asp.net, listview, html, ado.net, eval

我是 ASP.NET 的新手，我正在我的应用程序中创建一个搜索框。

例如：如果用户在文本框中输入“abc”，那么文本框将从以“abc”开头的数据库中获取数据。我将此数据传递给`DataTable`.

它工作正常，

这是我的代码片段：

```
DataTable result = new DataTable();

protected void TextBox1_TextChanged(object sender, EventArgs e)
{
    connString = System.Configuration.ConfigurationManager.ConnectionStrings["MyConsString"].ConnectionString;
    SqlConnection conn = new SqlConnection(connString);
    conn.Open();

    string query = string.Format("SELECT DISTINCT Scrip FROM dbo.SearchBoxData where Scrip Like '{0}%'", TextBox1.Text);

    SqlCommand cmd = new SqlCommand(query, conn);

    result.Load(cmd.ExecuteReader());

    conn.Close();

    lvwItems.DataSource = result;
    lvwItems.DataBind();
} 
```

现在我想在我的`<div>`标签中检索所有这些数据。所以我尝试使用 `asp:ListView`，

这是我的代码片段，

**它工作正常，但现在我想在用户选择 listView 的任何行时导航到新页面，但我无法选择任何行..**

```
<asp:ListView ID="lvwItems" runat="server" ItemPlaceholderID="plhItems">
<LayoutTemplate>
    <div>
         <asp:PlaceHolder ID="plhItems" runat="server"></asp:PlaceHolder>
    </div>
</LayoutTemplate>
<ItemTemplate>
    <div>
        <%# Eval("Scrip")%>
    </div>
</ItemTemplate> 
```

**提前致谢 ！！**

***任何帮助将不胜感激。***

编辑：（搜索框.aspx.cs）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Data;

public partial class SearchBox : System.Web.UI.Page
{
    string connString;
    DataTable result = new DataTable();

    protected void Page_Load(object sender, EventArgs e)
    { }

    protected void TextBox1_TextChanged(object sender, EventArgs e)
    {
        connString = System.Configuration.ConfigurationManager.ConnectionStrings["MyConsString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        conn.Open();

        string query = string.Format("SELECT DISTINCT Scrip FROM dbo.SearchBoxData where Scrip Like '{0}%'", TextBox1.Text);

        SqlCommand cmd = new SqlCommand(query, conn);

        result.Load(cmd.ExecuteReader());

        conn.Close();

        lvwItems.DataSource = result;
        lvwItems.DataBind();
    }

    protected void lvwItems_SelectedIndexChanging(Object sender, ListViewSelectEventArgs e)
    {
        ListViewItem item = (ListViewItem)lvwItems.Items[e.NewSelectedIndex];
        Label lablId = (Label)item.FindControl("lablId");

        if (String.IsNullOrEmpty(lablId.Text))
        {
            Response.Redirect("NextPage.aspx?id=" + lablId.Text, false);
        }
    } 
```

(搜索框.aspx)

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="SearchBox.aspx.cs" Inherits="SearchBox" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    </head>
<body>

    <form id="form1" runat="server">
    <div>

    </div>
    <asp:TextBox ID="TextBox1" runat="server" Height="30px" Width="179px" 
        OnTextChanged="TextBox1_TextChanged" AutoPostBack="true"></asp:TextBox>
&nbsp;&nbsp;&nbsp;<asp:Button ID="Button1" runat="server" Text="Go" 
        Width="62px" />
    &nbsp;<asp:Label ID="Label2" runat="server" Text="Label"></asp:Label>

  <asp:ListView ID="lvwItems" OnSelectedIndexChanging="lvwItems_SelectedIndexChanging" 
 runat="server" ItemPlaceholderID="plhItems">
 <LayoutTemplate>
  <div>
       <asp:PlaceHolder ID="plhItems" runat="server"></asp:PlaceHolder>
  </div>
 </LayoutTemplate>
  <ItemTemplate>
  <div>
 <%# Eval("Scrip")%>
    <asp:Label ID="lablId" visible="false" runat="server" Text='<%#Eval("Scrip") %>'/>

  </div>
</ItemTemplate>
</asp:ListView>

    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:krunal_DBConnectionString2 %>" 
        SelectCommand="SELECT * FROM [SearchBoxData]"></asp:SqlDataSource>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:35:06.807

您必须在 ItemTemplate 中添加一个 SELECT 按钮，请参阅完整的工作代码。

```
 <asp:ListView ID="lvwItems" OnSelectedIndexChanging="lvwItems_SelectedIndexChanging"
    runat="server" ItemPlaceholderID="plhItems">
    <LayoutTemplate>
        <div>
            <asp:PlaceHolder ID="plhItems" runat="server"></asp:PlaceHolder>
        </div>
    </LayoutTemplate>
    <ItemTemplate>
        <%# Eval("Scrip")%>
        <asp:LinkButton ID="SelectButton" runat="server" CommandName="Select" Text="Select" />
    </ItemTemplate>
  </asp:ListView>

protected void lvwItems_SelectedIndexChanging(Object sender, ListViewSelectEventArgs  e)
{
    ListViewItem item = (ListViewItem)lvwItems.Items[e.NewSelectedIndex];
    Label lablId = (Label)item.FindControl("CONTROL_ID");
} 
```

谢谢

迪普

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:47:18.237

可能您将不得不为 Selected index change 添加事件：

```
<asp:ListView ID="lvwItems" runat="server" ItemPlaceholderID="plhItems" OnSelectedIndexChanging="lvwItems_SelectedIndexChanging"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T04:55:58.650

在后面的代码中，您可以获得如下所示的选定行项。

您还可以放置标签或隐藏字段，以便您可以从这些控件中获取一些数据并将其传递到下一页..（可能是 id 或其他东西）。

```
 <asp:ListView ID="lvwItems" OnSelectedIndexChanging="lvwItems_SelectedIndexChanging" 
 runat="server" ItemPlaceholderID="plhItems">
 <LayoutTemplate>
  <div>
       <asp:PlaceHolder ID="plhItems" runat="server"></asp:PlaceHolder>
  </div>
 </LayoutTemplate>
  <ItemTemplate>
  <div>
    <%# Eval("Scrip")%>
     <asp:Label ID="lablId" visible="flase" runat="server" Text='<%#Eval("Id") %>' />
  </div>
</ItemTemplate>
</asp:ListView>

 void lvwItems_SelectedIndexChanging(Object sender, ListViewSelectEventArgs e)
 {
   ListViewItem item = (ListViewItem)lvwItems.Items[e.NewSelectedIndex];
   Label lablId = (Label)item.FindControl("lablId");

   if (String.IsNullOrEmpty(lablId.Text))
   {
     Response.Redirect("page.aspx?id="+lablId.Text,false);
   }
 } 
```

谢谢

迪普

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:18:29.487

干得好，

还要从按钮中删除 OnClick="callMethod"。由于您有 SelectedIndex 方法，因此不需要 onClick 方法。

```
protected void lvwItems_SelectedIndexChanging(Object sender, ListViewSelectEventArgs  e)
{
  ListViewItem item = (ListViewItem)lvwItems.Items[e.NewSelectedIndex];
  Button btn = (Button)item.FindControl("btn1");
  if(btn != null) 
  {
   var buttonText = btn.Text;  
  }
} 
```

希望这可以帮助

谢谢

迪普

# html - 如何向表中插入数据

> ID：10117474
> 
> 赞同：0
> 
> 时间：2012-04-12T04:43:10.233
> 
> 标签：html, frontpage

我需要知道如何将数据插入表中。例如（表 - 学生信息）：

```
No | Student Name | Address | Phone Number

1\. |    Add       |         | 
```

添加 - 是一个超链接。用户需要点击添加（超链接）来添加学生。用户单击添加后，将显示此页面：

```
Student : <textbox>
Address : <textbox>
Phone Number : <dropdownlist> <textbox>

Submit<submit button> 
```

然后，用户将单击提交按钮，用户输入的数据将显示在表格中。像这样 ：

```
No | Student Name | Address | Phone Number
1\. | Patrick      | Malaysia| 013366666
2\. |    Add       |         | 
```

我正在使用 Microsoft FrontPage 2003。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:23:38.037

在我看来，您想要执行 3 个功能。1.) 添加到列表的功能。（添加链接。） 2.）构建一个表单来输入列表的数据。3.) 打印列表。（或在表格中回显列表）。

您提到您正在使用首页，但是为了更好地帮助您，更多信息会很好。例如，您有哪些可用的服务器技术？（php、数据库类型？、cgi、asp 等）还是您的添加功能会将数据添加到平面文件？（.txt 等）通常仅用于本地存储数据。如果您不确定您有哪些可用的服务器技术（如果有），您可以询问您的网络服务器管理员、isp 或网络托管服务提供商。

我知道我应该避免基于意见的陈述。但是，获得非常好的输出的最佳方法可能是使用 php 和数据库服务器来执行所有这些操作。我这样说是因为，如果您使用数据库服务器而不是平面文件，您可以通过某种组织“回显”数据，而不仅仅是首先输入学生信息的组织。使用数据库技术，您可以按照他们来自的国家/地区，或者按照名字或姓氏等来组织它。这样，如果列表变得很长，您就不会寻找您正在寻找的学生信息，或者需要在您的浏览器或您可能使用的其他程序中使用查找功能。只是一点点见解，可以帮助您避免未来的头痛。:)

好的，如果您可以使用其中的一些信息，它可能会帮助我们更轻松地帮助您！

哦，这里有一个链接，关于微软对收集和存储站点用户输入的表单数据的看法：http: [//office.microsoft.com/en-us/frontpage-help/collect-and-store-form-网站访问者输入的数据-HP005261723.aspx](http://office.microsoft.com/en-us/frontpage-help/collect-and-store-form-data-entered-by-site-visitors-HP005261723.aspx)

希望你觉得这很有帮助，或者至少有点信息。抱歉，在不了解有关您可用的服务器技术的更多信息的情况下，我无法为您提供进一步的帮助。但是，如果您将这些信息提供给我们，我相信我们可以“更好”地为您提供帮助。

# c# - 如何在datagridview winform中更改复选框大小

> ID：10117477
> 
> 赞同：0
> 
> 时间：2012-04-12T04:43:41.093
> 
> 标签：c#, .net, winforms, datagridview, checkbox

如何更改 DataGridViewCheckBoxCell 中**复选框**的大小 [不是单元格的大小] 我正在使用 .net 3.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T05:28:19.003

我认为您想更改在复选框的单元格中绘制的正方形的大小。如果是这种情况，我怀疑可能没有一个非常简单的解决方案，但您可以通过自定义绘画图像而不是“选中”、“未选中”框来获得结果。这里有一个提示如何解决这个问题。在包含您的数据网格视图的表单上的图像列表中添加两个图像（您想要的大小，因为它的大小对您很重要）。（这两个图像当然对应于 Checked/Unchecked 复选框视觉）处理 DataGridView 的“CellPainting”事件并编写如下内容：

```
if (e.ColumnIndex == 0 && e.RowIndex >= 0)//Assuming the checkbox is in Column 0
        {
            e.PaintBackground(e.ClipBounds, false);
            int index = 0;//Unchecked image
            if (e.Value != null && (bool)e.Value == true)
                index = 1;//Checked image
                e.Graphics.DrawImageUnscaled(imageList1.Images[index], e.CellBounds.X + 5, e.CellBounds.Y + 5);

            e.Handled = true;
        } 
```

现在，为了在单元格中获得选中/未选中的图像，您需要做的就是在 CellClick 事件上设置底层数据源的值（如果您希望当用户单击单元格时复选框被选中，如果它读取只有这样才可能不需要）

注意：我不确定我们是否可以得到比这更优雅的解决方案，请稍候看看是否有人有更聪明的想法。

# java - iReport：如何在没有数据行的情况下隐藏带有文本字段的行包含不同类型的数据

> ID：10117478
> 
> 赞同：3
> 
> 时间：2012-04-12T04:43:41.153
> 
> 标签：java, jasper-reports, ireport

我有空文本字段（它包含字符串或 bigdecimal 值）放在为我的报告拉出的单行上，显示一个空行。

为了删除具有空行的空白行，我使用了该行***`isRemoveLineWhenBlank`***中报告元素的属性。但这不起作用。

有人可以帮我吗？

折断： ![在此处输入图像描述](../Images/ec6a0798466b5ab3632027f8a474b9d6.png)

输出快照： ![在此处输入图像描述](../Images/4acaedd87ccfdc111be2f5ebf46fb81b.png)

jrxml：

```
<?xml version="1.0" encoding="UTF-8"  ?>
<!-- Created with iReport - A designer for JasperReports -->
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport
         name="WEB_PREVIEW"
         columnCount="1"
         printOrder="Horizontal"
         orientation="Portrait"
         pageWidth="595"
         pageHeight="900"
         columnWidth="535"
         columnSpacing="0"
         leftMargin="30"
         rightMargin="30"
         topMargin="20"
         bottomMargin="20"
         whenNoDataType="NoPages"
         isTitleNewPage="false"
         isSummaryNewPage="false">
    <property name="ireport.scriptlethandling" value="0" />
    <property name="ireport.encoding" value="UTF-8" />
    <import value="java.util.*" />
    <import value="net.sf.jasperreports.engine.*" />
    <import value="net.sf.jasperreports.engine.data.*" />

    <parameter name="GROSS_RENTAL_INCOME_SQPA_LABEL" isForPrompting="false" class="java.lang.String"/>
    <parameter name="GROSS_RENTAL_INCOME_SQPA" isForPrompting="false" class="java.math.BigDecimal"/>
    <defaultValueExpression ><![CDATA["C:\\Development_New\\Cyprus\\Cyprus\\WebRoot\\report\\"]]></defaultValueExpression>
    </parameter>
    <background>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </background>
        <title>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </title>
        <pageHeader>
            <band height="32"  isSplitAllowed="true" >
                <textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
                    <reportElement
                        x="367"
                        y="105"
                        width="96"
                        height="12"
                        key="textField"
                        positionType="Float"
                        isRemoveLineWhenBlank="true">
                            <printWhenExpression><![CDATA[new Boolean($P{GROSS_RENTAL_INCOME_SQPA}!=null)]]></printWhenExpression>
                        </reportElement>
                    <box></box>
                    <textElement>
                        <font pdfFontName="Helvetica-Bold" size="8" isBold="true"/>
                    </textElement>
                <textFieldExpression   class="java.lang.String"><![CDATA[$P{GROSS_RENTAL_INCOME_SQPA_LABEL}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" pattern="###,##0.00" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
                    <reportElement
                        x="472"
                        y="105"
                        width="48"
                        height="12"
                        key="textField"
                        positionType="Float"
                        isRemoveLineWhenBlank="true">
                            <printWhenExpression><![CDATA[new Boolean($P{GROSS_RENTAL_INCOME_SQPA}!=null)]]></printWhenExpression>
                        </reportElement>
                    <box></box>
                    <textElement>
                        <font size="8"/>
                    </textElement>
                <textFieldExpression   class="java.math.BigDecimal"><![CDATA[$P{GROSS_RENTAL_INCOME_SQPA}]]></textFieldExpression>
                </textField>
                </band>
        </detail>
        <columnFooter>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </columnFooter>
        <pageFooter>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </pageFooter>
        <summary>
            <band height="0"  isSplitAllowed="true" >
            </band>
        </summary>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:01:08.617

您可以播放下面的示例以获得您想要的结果。

它演示了如何在*框架元素的帮助下隐藏带有两个**textField*元素（两列）的行（当然与问题中所说的使用***isRemoveLineWhenBlank***属性配合使用）。

 ***jrxml*文件代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ... pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="0" bottomMargin="0">
    <parameter name="par1" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <parameter name="par2" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <parameter name="par3" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <parameter name="par4" class="java.lang.String">
        <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
    </parameter>
    <title>
        <band height="139" splitType="Stretch">
            <line>
                <reportElement x="10" y="61" width="520" height="1"/>
            </line>
            <line>
                <reportElement x="10" y="127" width="520" height="1"/>
            </line>
            <textField isBlankWhenNull="true">
                <reportElement x="10" y="85" width="52" height="20" isRemoveLineWhenBlank="true"/>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$P{par3} == null ? null : "P3: " + $P{par3}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="10" y="65" width="52" height="20" isRemoveLineWhenBlank="true"/>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$P{par1} == null ? null : "P1: " + $P{par1}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="62" y="65" width="52" height="20" isRemoveLineWhenBlank="true"/>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$P{par2} == null ? null : "P2: " + $P{par2}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="62" y="85" width="52" height="20" isRemoveLineWhenBlank="true"/>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$P{par4} == null ? null : "P4: " + $P{par4}]]></textFieldExpression>
            </textField>
            <frame>
                <reportElement x="331" y="65" width="52" height="54"/>
                <textField isBlankWhenNull="true">
                    <reportElement x="0" y="20" width="52" height="20" isRemoveLineWhenBlank="true"/>
                    <box leftPadding="10">
                        <topPen lineWidth="1.0"/>
                        <leftPen lineWidth="1.0"/>
                        <bottomPen lineWidth="1.0"/>
                        <rightPen lineWidth="1.0"/>
                    </box>
                    <textElement/>
                    <textFieldExpression><![CDATA[$P{par3} == null ? null : "P3: " + $P{par3}]]></textFieldExpression>
                </textField>
                <textField isBlankWhenNull="true">
                    <reportElement x="0" y="0" width="52" height="20" isRemoveLineWhenBlank="true"/>
                    <box leftPadding="10">
                        <topPen lineWidth="1.0"/>
                        <leftPen lineWidth="1.0"/>
                        <bottomPen lineWidth="1.0"/>
                        <rightPen lineWidth="1.0"/>
                    </box>
                    <textElement/>
                    <textFieldExpression><![CDATA[$P{par1} == null ? null : "P1: " + $P{par1}]]></textFieldExpression>
                </textField>
            </frame>
            <frame>
                <reportElement x="383" y="65" width="52" height="54"/>
                <textField isBlankWhenNull="true">
                    <reportElement x="0" y="0" width="52" height="20" isRemoveLineWhenBlank="true"/>
                    <box leftPadding="10">
                        <topPen lineWidth="1.0"/>
                        <leftPen lineWidth="1.0"/>
                        <bottomPen lineWidth="1.0"/>
                        <rightPen lineWidth="1.0"/>
                    </box>
                    <textElement/>
                    <textFieldExpression><![CDATA[$P{par2} == null ? null : "P2: " + $P{par2}]]></textFieldExpression>
                </textField>
                <textField isBlankWhenNull="true">
                    <reportElement x="0" y="20" width="52" height="20" isRemoveLineWhenBlank="true"/>
                    <box leftPadding="10">
                        <topPen lineWidth="1.0"/>
                        <leftPen lineWidth="1.0"/>
                        <bottomPen lineWidth="1.0"/>
                        <rightPen lineWidth="1.0"/>
                    </box>
                    <textElement/>
                    <textFieldExpression><![CDATA[$P{par4} == null ? null : "P4: " + $P{par4}]]></textFieldExpression>
                </textField>
            </frame>
            <textField isStretchWithOverflow="true">
                <reportElement x="16" y="0" width="115" height="51"/>
                <box topPadding="10" leftPadding="10" bottomPadding="10" rightPadding="10"/>
                <textElement>
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <textFieldExpression><![CDATA["P1: " + $P{par1} + "\nP2: " +  $P{par2} + "\nP3: " +  $P{par3} + "\nP4: " +  $P{par4}]]></textFieldExpression>
            </textField>
        </band>
    </title>
</jasperReport> 
```

*iReport*中的报表设计： ![iReport 中的设计](../Images/929bacf0563e38d05cdb32877008107a.png)

隐藏整行的结果： ![P1=空，P2=空，P3=3，P4=4](../Images/01705b9817b52cd9a6a5d03878c1635e.png)

隐藏第一列第一行中唯一一个字段的结果： ![P1=空，P2=2，P3=3，P4=4](../Images/09a6dab2b98cbf8ee4a1a97048f1738e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:24:11.613

解决方案不是框架。

将 printWhenExpression 添加到文本字段：

```
<printWhenExpression><![CDATA[$P{par1}!=null]]></printWhenExpression></reportElement> 
```

样本：

```
<textField isBlankWhenNull="true">
<reportElement x="719" y="0" width="52" height="11">
    <printWhenExpression><![CDATA[$P{par1}!=null]]></printWhenExpression>
</reportElement>
<box>
    <topPen lineWidth="1.0"/>
    <leftPen lineWidth="1.0"/>
    <bottomPen lineWidth="1.0"/>
    <rightPen lineWidth="1.0"/>
</box>
<textElement />
<textFieldExpression><![CDATA[$P{par1}]]></textFieldExpression> 
```**

# mysql - 更新组中最早的行

> ID：10117485
> 
> 赞同：0
> 
> 时间：2012-04-12T04:44:40.940
> 
> 标签：mysql, sql

我正在尝试为 MySQL 构建一个 SQL 语句，它将更新组中的一行。获取下面的记录，我需要更新 IsPrimary 标志，以便将每个用户的最早记录设置为 1。

```
 ID       | UserID      | Inserted    | IsPrimary
----------|-------------|-------------|----------
000f83    | 79b8c3      | 2012-03-14  | 0
001401    | 79b8c3      | 2012-03-15  | 0
002e7d    | 4652a2      | 2012-02-22  | 0
003ca6    | 4652a2      | 2012-02-13  | 0 
```

所以上面的记录最终会是：

```
 ID       | UserID      | Inserted    | IsPrimary
----------|-------------|-------------|----------
000f83    | 79b8c3      | 2012-03-14  | 1
001401    | 79b8c3      | 2012-03-15  | 0
002e7d    | 4652a2      | 2012-02-22  | 0
003ca6    | 4652a2      | 2012-02-13  | 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T04:53:10.443

试一试：

```
update t, (
  select t1.id anId from t t1
  left join t t2
  on t1.userId = t2.userId and t1.inserted > t2.inserted
  where t2.inserted is null
) s
set IsPrimary = 1
where t.id = anId 
```

这是[小提琴](http://sqlfiddle.com/#!2/9fe94/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:50:51.953

尝试以下操作：

```
update t
set t.IsPrimary = 1
from myTable t
inner join myTable t2 on t.UserID = t2.UserID and t.Inserted<t2.Inserted 
```

# lwuit - 如何使用 LWUIT 1.5 GUIBuilder 为我的黑莓应用程序签名

> ID：10117490
> 
> 赞同：0
> 
> 时间：2012-04-12T04:45:37.877
> 
> 标签：lwuit, gui-builder

请任何人告诉我如何在我使用黑莓主题在 lwit 1.5 guibuilder 中完成应用程序后如何为我的黑莓应用程序签名并获取 cod 文件的程序。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:41:44.913

[在此处](https://www.blackberry.com/SignedKeys/)从 RIM 获取证书。

如果您使用[Codename One](http://www.codenameone.com/)，只需获取正确的 sig 文件并将其设置在插件中即可。在 LWUIT 中，您需要使用[黑莓签名工具](http://us.blackberry.com/developers/javaappdev/signingauthority.jsp)。

# php - PHP提交后重新加载页面数据

> ID：10117494
> 
> 赞同：0
> 
> 时间：2012-04-12T04:46:08.893
> 
> 标签：php, jquery, mysql

好吧，伙计们，

我创建了一个查询数据库的 PHP 页面，并通过一个 whileloop 显示该数据库表的内容，并带有一个 REMOVE 和 PUSH 按钮。REMOVE 按钮将其从数据库中完全删除，而 PUSH 按钮将该条目推送到另一个数据库并设置该条目已被推送的变量。

我遇到的是我无法完全刷新页面，进而运行第一个数据库的新查询并仅显示那些尚未删除或推送的条目。

如果我手动刷新页面，无论是 F5 还是 control+r（command+r），我才能使查询正确运行。

刷新页面以使查询在页面加载时再次运行的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:05:30.553

如果您想使用 Javascript 重新加载页面，请尝试以下操作：

```
window.location.reload(true); 
```

您还可以看到这个答案： [如何使用 JavaScript 重新加载页面？](https://stackoverflow.com/questions/3715047/how-to-reload-a-page-using-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:00:53.290

有两种方法

如果在 db 上增加额外负载不成问题，请使用 jquery 方法，例如 $.get()

```
$.get('url',{},function(data){
//load results in appropriate div;
}); 
```

如果您不想在数据库上增加任何额外负载，只需在删除或推送该行时隐藏该行。

```
$('.remove').click(function{
    $(this).css('display','none');
}); 
```

同样使它成为推

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:49:46.087

您的网络托管解决方案是否有一些极端的缓存设置？

如果在此页面上维护漂亮的 URL 不是问题，您总是可以在 PHP 中设置时间戳并将其附加到字符串中。

我对 PHP 不是很感兴趣，但一个 javascript 示例看起来像这样。

```
ts = new Date();
urltorefresh += '?timestamp=' + ts.getTime();
location.href = urltorefresh; 
```

这将确保该页面绝对不在浏览器缓存中，因为之前从未请求过此特定 URL。

# javascript - jQuery-UI resizable disabled 是真的，但句柄仍然显示

> ID：10117495
> 
> 赞同：0
> 
> 时间：2012-04-12T04:46:34.203
> 
> 标签：javascript, jquery-ui, jquery-ui-resizable

```
$('.box').resizable({
  disabled: true
}); 
```

这是CSS

```
.ui-resizable-disabled .ui-resizable-handle,
.ui-resizable-autohide .ui-resizable-handle {
  display: none;
} 
```

根据文档，当 disabled 为 true 时，`.ui-resizable-disabled`该类被添加到元素中。在我的情况下，类没有被添加，但调整大小仍然被禁用（这意味着我不能通过拖动手柄来调整大小，但是当禁用时我可以调整大小）。当我检查生成的 HTML 时，`style="display:block"`被添加到句柄中。我没有在他们身上做任何表演。

```
<div class="ui-resizable-handle ui-resizable-e" style="display: block; ">...</div> 
```

我正在使用来自 Google API 的 jQuery 1.8。我也将 draggable 应用于相同的元素。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T05:36:11.623

看起来它是默认行为。尽管有处理程序，但您无法调整大小。无论如何，您可以将处理程序隐藏为：

```
//Dirty hack
$('div.ui-resizable-handle').hide();

//Somewhat effective solution
$( "#resizable" ).resizable({ disabled: true, handles: 'e' }); 
```

演示：http: [//jsfiddle.net/codef0rmer/W7HQ9/](http://jsfiddle.net/codef0rmer/W7HQ9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T03:51:50.737

you can just hide the handle as below, this will only remove the handle image and you could still do the re-size..

```
$("#yourelementid").find('.ui-icon').removeClass('ui-icon'); 
```

# c - 为什么 C 源代码有时会用 do...while(0) 循环包装？

> ID：10117502
> 
> 赞同：2
> 
> 时间：2012-04-12T04:47:16.227
> 
> 标签：c

> **可能重复：**
> [为什么在 C/C++ 宏中有时会出现无意义的 do/while 和 if/else 语句？](https://stackoverflow.com/questions/154136/why-are-there-sometimes-meaningless-do-while-and-if-else-statements-in-c-c-mac)

为什么我遇到的 C 源代码有时会被`do...while(0)`循环包裹？

```
do {
  parser->http_errno = e;                         
  parser->error_lineno = __LINE__;    
} while (0) 
```

为什么使用它，而不是这个：

```
parser->http_errno = e;                         
parser->error_lineno = __LINE__; 
```

我怀疑这与线程安全有关，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:49:46.457

这样做是为了您可以在宏中使用它，同时要求宏用户在末尾使用分号，就像常规语句一样。

换句话说，只要你想在一个类似函数的宏中包含*多个*语句`FOO(...)`，你就可以将它包装起来，`do { ... } while (0)`这样宏的用户就可以（并且，事实上，*必须*）将它调用为`FOO(x);`，而不是简单地`FOO(x)`（缺少分号可以是对人类和计算机来说都很奇怪）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:52:06.913

您主要在宏中看到此类代码，它们的行为就好像它们是函数 #define 无论做什么...... while(0)

并且你像 What() 一样使用它；

我看到这个问题在 [do { ... } while (0) 之前在这里得到了回答——它有什么用？](https://stackoverflow.com/questions/257418/do-while-0-what-is-it-good-for)

更正了链接，感谢符文。

# ios - 关于钛框架

> ID：10117504
> 
> 赞同：1
> 
> 时间：2012-04-12T04:47:20.973
> 
> 标签：ios, titanium-mobile

我最近开始尝试使用钛开发应用程序。当我运行一个包含两个表视图和一些静态数据的基本应用程序时，它显示了 80 个内存泄漏和大约 15 个警告——我认为来自框架。作为一名 iOS 开发人员，我也习惯在复杂的应用程序中看到少于 5 个内存泄漏。所以，我想知道通过钛开发的应用程序是否被苹果接受。另外，我想知道，看看钛框架的状态，现在是否值得学习。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:12:39.173

你的第一个问题，是的！他们正在被 Apple App Store 接受。而对于你的第二个问题，它与个人的喜好有关。我开始使用 Titan 进行移动应用程序开发，但很快我就意识到，没有比在本地创建应用程序更好的方法了。我想说，如果您正在开发的应用程序没有以企业级规模扩展（意味着数千行代码），那么最好在本地开发应用程序。

Titanium 正在迅速增加支持和改进框架，它还将代码行数减少了三分之一！最好的一点是，它的跨平台！但就我个人而言，我总是更喜欢原生开发。iOS 给你的力量，Titanium 不会！

我还想补充一件事，尽管如此，你应该学习它！:)

# ajax - Google Maps APIv3 关于处理多个标记

> ID：10117513
> 
> 赞同：0
> 
> 时间：2012-04-12T04:49:23.967
> 
> 标签：ajax, json, google-maps, google-maps-markers

我有一些代码放在一起，我发现 zLat 和 zLng 一定有问题。我想知道为什么当我在 for 循环中用 tLat 和 tLng 替换 zLat 和 zLng 时，我得到一个有意义的标记。有了 zLat 和 zLng ，我没有得到任何标记。为什么会发生这种情况？

PS 我对 zLat 和 zLng 的警报正在产生看起来像正确的输出，但它一定不是？

```
 // // // // // // // // Ajax returns from PHP
xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        var obj = $.parseJSON(xmlhttp.responseText);

        var tLat = getCookie("tLat");
        var tLng = getCookie("tLng");

        var options = {
          zoom: 4,
          center: new google.maps.LatLng(40.7257, -74.0047),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // Creating the map  
        var map = new google.maps.Map(document.getElementById('map'), options);

        // Adding a marker to the map
        /*var marker = new google.maps.Marker({
          position: new google.maps.LatLng(tLat, tLng),
          map: map,
          title: 'Click me',
          icon: 'http://gmaps-samples.googlecode.com/svn/trunk/markers/blue/blank.png'
        });*/

        var marker;

        alert(obj.length);

        for(var i=0;i<obj.length;i++) {

            var zLat = String(obj[i].lat);
            var zLng = String(obj[i].lng);

            marker = new google.maps.Marker({
              position: new google.maps.LatLng(zLat, zLng),
              map: map,
              title: 'Click me'
            });

            alert(zLat+','+zLng+','+i); 
        }

        $('#map').show();
    }
}
// // // // // // // // 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:58:14.583

```
 // // // // // // // // Ajax returns from PHP
xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        var obj = $.parseJSON(xmlhttp.responseText);

        var tLat = getCookie("tLat");
        var tLng = getCookie("tLng");

        var options = {
          zoom: 4,
          center: new google.maps.LatLng(tLat, tLng),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // Creating the map
        var map = new google.maps.Map(document.getElementById('map'), options);

        var myLatLng = new google.maps.LatLng(parseFloat(obj[0][2]), parseFloat(obj[0][1]));

        //var marker = new google.maps.Marker({ position: myLatLng, map: map });

        var marker;

        for(var i=0;i<obj.length;i++) {

            var myLatLng = new google.maps.LatLng(parseFloat(obj[i].lat), parseFloat(obj[i].lng));

            var marker = new google.maps.Marker({ position: myLatLng, map: map });
        }

        $('#map').show();
    }
}
// // // // // // // // 
```

# python - GAE：达到“超过软私有内存限制”后是否继续执行？

> ID：10117518
> 
> 赞同：4
> 
> 时间：2012-04-12T04:49:58.660
> 
> 标签：python, google-app-engine, task-queue, memory-limit

我的 GAE 任务队列请求之一超出了软内存限制（日志如下）。我对软内存限制的理解是它让请求完成，然后在完成后关闭实例。

但是，从日志看来，当我达到软内存限制时，执行停止了。在内存限制消息之后，我看不到更多的日志记录代码，并且我检查了我的状态，它看起来不像请求正在完成。我不确定它是否重要，但这个请求是在延迟库 TaskQueue 中执行的。

那么，如果 TaskQueue 达到软私有内存限制，执行会继续执行直到请求完成还是立即停止？是否可能不再记录仅记录代码？

日志：

```
2012-04-11 23:45:13.203
Exceeded soft private memory limit with 145.848 MB after servicing 3 requests total
W 2012-04-11 23:45:13.203
After handling this request, the process that handled this request was found to be using too much memory and was terminated. This is likely to cause a new process to be used for the next request to your application. If you see this message frequently, you may have a memory leak in your application. 
```

![日志截图](../Images/5e8df3e1feebe203605183c20eb9c931.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T05:15:51.493

这里发生的是**最后**的处理程序检查内存状态，如果它超过限制，它将记录一个错误并关闭实例。
由于任务已成功完成（您可以看到它以状态 200 终止）它不会重试它。

当处理程序执行**期间**内存状态远高于内存限制时，处理程序将关闭实例并返回错误 500，在这种情况下任务将重试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T05:09:19.117

根据我的经验：如果您的实例达到软内存命中，您的请求仍然会完成，但响应状态将为 500。

# javascript - 如何在android phonegap中为动态div加载iscroll

> ID：10117522
> 
> 赞同：0
> 
> 时间：2012-04-12T04:50:06.090
> 
> 标签：javascript, jquery, cordova, iscroll

我已经在 android phonegap 中创建了应用程序。在我的应用程序中，我在 div 动态加载中附加了列表。如何使用 iscroll 为动态 div 添加滚动条。我想使用 iscroll.how 为动态 div 添加滚动条我的代码是

html:

```
 <div class="sidemenu" ></div>

       </div> 
```

风格：

```
#scroller 
{
    top:90px;
    position:absolute; z-index:1;
    width:90%;
    height:40px;
    background-color:#FFFFFF;
}
li
{
list-style:none;
} 
```

脚本：

滚动：

```
 var myScroll;
        function loaded() {
            myScroll = new iScroll('scroller', {
                useTransform: false,
                vScroll: true,
                onBeforeScrollStart: function (e) {
                    var target = e.target;
                    while (target.nodeType != 1) target = target.parentNode;

                    if (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA')
                        e.preventDefault();
                }
            });
        }
        document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
        document.addEventListener('DOMContentLoaded', setTimeout(function () { loaded(); }, 0), false);

       /** scrollbar for dynamic div*/ 
    function doIscrollRefresh () {  
        setTimeout(function () {
            myScroll.refresh();
        }, 0);

    } 
```

动态 div：我已从本地数据库中检索值并动态附加到 div

```
function list1(alphabet)
{
              doIscrollRefresh ();
             document.addEventListener("deviceready", onDeviceReady, false);
             function onDeviceReady() 
             {

                    var db = window.openDatabase("createdb", "1.0", "PhoneGap Demo", 200000);

                    db.transaction(queryDB, errorCB,successCB);

              } 
              function queryDB(tx) 
             {
                     var a=alphabet;
                     tx.executeSql("SELECT Textvalue FROM TextValue WHERE Textvalue LIKE '" + a + "%'",[], querySuccess, errorCB);
             }

             function querySuccess(tx,results)
              {
                   $(".sidemenu").append("<li>"+"<label style='background-color:#C1CDD9' >"+alphabet+ "</label>"+"</li>");
                   for (i = 0; i < results.rows.length; i++) 
                    {
                         $(".sidemenu").append("<li>"+"<a id='"+i+"'  href='#'>" +results.rows.item(i).Textvalue +  "</a>"+ "<hr/>"+ "</li>");
                    }
                    $(".sidemenu").append("<hr/>");
               }
          function errorCB(err) 
          {
                      alert("Error processing SQL: "+err.code);
          }
          function successCB() 
          {
                 //alert("appended");   
          }
} 
```

它在 logcat 中显示错误。错误是 myScroll 未定义不是对象。请告诉我解决方案。如何为动态div添加滚动条。请指导我。提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:57:47.300

```
.page {
    top: 0;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.header {
    position: absolute;
    top: 0;
    height: 42px;
    width: 100%;
    color: #333;
    text-shadow: 0 1px 0 white;
    border: 1px solid #F7C942;
    border-left-width: 0;
    border-right-width: 0;
    background: #FADB4E;
    background-image: -webkit-gradient(linear, left top, left bottom, from(#FCEDA7), to(#FBEF7E));
    background-image: -webkit-linear-gradient(#FCEDA7, #FBEF7E);
    background-image: -moz-linear-gradient(#FCEDA7, #FBEF7E);
    background-image: -ms-linear-gradient(#FCEDA7, #FBEF7E);
    background-image: -o-linear-gradient(#FCEDA7, #FBEF7E);
    background-image: linear-gradient(#FCEDA7, #FBEF7E);
    z-index: 2;
}

.content {
    position: absolute;
    top: 42px;
    bottom: 66px;
    padding-left: 4%;
    padding-right: 4%;
    width: 92%;
    border-width: 0;
    overflow: hidden;
    color: #333;
    text-shadow: 0 1px 0 white;
    z-index: 1;
}

.scroller {
    position: relative;
    overflow: hidden;
    z-index: 1;
}

.footer {
    position: absolute;
    bottom: 0;
    height: 64px;
    width: 100%;
    z-index: 2;
    border: 1px solid #B3B3B3;
    border-left-width: 0;
    border-right-width: 0;
    background: #EEE;
    color: #3E3E3E;
    font-weight: bold;
    text-shadow: 0 1px 1px white;
    background-image: -webkit-linear-gradient(#F0F0F0, #DDD);
    background-image: -moz-linear-gradient(#F0F0F0, #DDD);
    background-image: -ms-linear-gradient(#F0F0F0, #DDD);
    background-image: -o-linear-gradient(#F0F0F0, #DDD);
    background-image: linear-gradient(#F0F0F0, #DDD);
}

var Page = document.createElement('div');
    $(Page).attr('id', 'City');
    $(Page).addClass('page');

var Page = document.createElement('div');
    $(Page).attr('id', 'City');
    $(Page).addClass('page');

    //Header
    var Header = document.createElement('div');
    $(Header).addClass('header');
    $(Header).attr('align', 'center');

//Content
    var Content = document.createElement('div');
    $(Content).addClass('content');
    $(Content).attr('id', 'Wrapper');

    //Scroller
    var Scroller = document.createElement('div');
    $(Scroller).addClass('scroller');

Content.appendChild(Scroller);

    //Footer
    var Footer = document.createElement('div');
    $(Footer).addClass('footer');

    Page.appendChild(Header);
    Page.appendChild(Content);
    Page.appendChild(Footer);

    document.body.appendChild(Page);

    myScroll = new iScroll("Wrapper");

    setTimeout(function() {
        myScroll.refresh();
    }, 500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T13:43:58.503

嗨，我不确定那将是事情，但如果 iscroll 说你的 iscroll 没有定义它，因为你调用了 loaded(); 在开始时运行并在此之后实例化您的动态代码，因此 iscroll 无法找到您的元素！

我建议您在显示和包装动态 div 后回调加载的函数

回想一下loaded(); 函数或使用 iScroll.refresh(); 当您的元素已经显示时起作用。

```
 function querySuccess(tx,results)
          {
               $(".sidemenu").append("<li>"+"<label style='background-color:#C1CDD9' >"+alphabet+ "</label>"+"</li>");
               for (i = 0; i < results.rows.length; i++) 
                {
                     $(".sidemenu").append("<li>"+"<a id='"+i+"'  href='#'>" +results.rows.item(i).Textvalue +  "</a>"+ "<hr/>"+ "</li>");
                }
                $(".sidemenu").append("<hr/>");  
   ********************************************************************
      loaded();

/* or you can use*/

     myScroll.refresh();

 *********************************************************************
           } 
```

要提醒的重要一点是在您的内容显示并具有样式后调用或刷新iscroll

祝你好运 ！

# android - 如何增加手势超时时间

> ID：10117523
> 
> 赞同：0
> 
> 时间：2012-04-12T04:50:10.333
> 
> 标签：android, gestures, stroke

我在我的应用程序中实现了多笔手势，但如果笔画之间的暂停时间过长，它会重置手势。有没有办法增加单个手势的笔画之间允许的时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T05:42:37.247

您可以通过使用这个来增加单个手势的笔画之间的时间

```
 android:fadeOffset="5000"<-- this value is in milliseconds.. 
```

在xml中

```
 <android.gesture.GestureOverlayView 
```

所以 android 将等待 5 秒时间，如果没有开始手势..那么你到目前为止绘制的内容将被考虑..否则新手势将附加到第一个..使其成为单笔划..

# node.js - Node.js 并发 10000

> ID：10117524
> 
> 赞同：3
> 
> 时间：2012-04-12T04:50:16.830
> 
> 标签：node.js

我是节点新手。我想问一下，是否可以从 node.js 向任何服务器发送 http 请求，并发为每秒 10,000？无需将代码放入 for 循环并运行 10000 次。

apache 基准测试可能会做的事情，但在 node.js 中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T08:40:51.230

前段时间我写了一个 node.js 脚本，它具有 ApacheBench 的基本功能：

（标有的行`// #`应根据您的需要更改）

```
var http=require('http');

var inp_num_requests=20000; // #
var inp_concurrency =10000; // #

var options={
    host:'127.0.0.1', // #
    port:80,          // #
    path:'/',         // #
    method:'GET',
    agent:false
};

var active=0;
var num_reqests=0;
var errors=0;
var total_bytes=0;
var last=-1;
var timer=setInterval(function(){
    if (last!=num_reqests) console.log(num_reqests+'/'+inp_num_requests,'err:',errors);
    last=num_reqests;
},1000);
var start_time=+new Date;

function checkEnd(){
    if (num_reqests<inp_num_requests) {
        makeRequest();
    }else if(!active){
        clearInterval(timer);
        console.log('\nFinished '+num_reqests+' requests');

        var took=((+new Date)-start_time)/1000;
        console.log(
            'Time taken for tests: '+took+' seconds\n'+
            'Complete requests: '+num_reqests+'\n'+
            'Failed requests: '+errors+'\n'+
            'HTML transferred: '+total_bytes+' bytes\n'+
            'Requests per second: '+(num_reqests/took)+' [#/sec]\n'+
            'Time per request: '+(took/num_reqests*1000)+' [ms] (mean, across all concurrent requests)\n'

        );
    }
}

function makeRequest(){
    active++;
    num_reqests++;
    var r=http.request(options,function(res){
        res.on('data',function(chunk){
            total_bytes+=chunk.length;
        });
        res.once('end',function(){
            active--;
            checkEnd();
        });
    });
    r.once('error',function(e){
        if ('ECONNRESET'!=e.code) {
            console.log(e);
            process.exit();
        }
        errors++;
        active--;
        checkEnd();
    });
    if (active<inp_concurrency) makeRequest();
    r.end();

}

makeRequest(); 
```

示例输出：

```
10000/20000 err: 0
11622/20000 err: 0
12036/20000 err: 0
20000/20000 err: 0

Finished 20000 requests
Time taken for tests: 10.817 seconds
Complete requests: 20000
Failed requests: 0
HTML transferred: 2037900 bytes
Requests per second: 1848.9414810021262 [#/sec]
Time per request: 0.54085 [ms] (mean, across all concurrent requests) 
```

* * *

如果出现以下错误：（`Error: connect EMFILE`打开的文件太多）您必须增加最大值。允许打开的文件数 -> [ulimit](https://stackoverflow.com/q/34588/511300)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:17:08.213

如果您不想使用 for 循环，我想您可以重复 http 请求调用 10 000 次。它可能会起作用。这是否是一个好主意，嗯，不太确定。

# ruby-on-rails - 如何在保存在 ruby on rails 之前验证表中的记录

> ID：10117525
> 
> 赞同：4
> 
> 时间：2012-04-12T04:50:21.513
> 
> 标签：ruby-on-rails, model, actioncontroller

我是 Ruby on Rails 的新手，我有一个场景，其中我有一个包含一些字段的表单。我需要针对具有数据的表验证的字段值之一。我想限制用户保存任何数据，除非该字段已使用表记录进行验证。

最初我在控制器中添加了代码来验证这一点，但我还有其他字段需要验证为空，因此它不起作用。

此外，我希望验证错误成为其他错误的一部分。

我在模型文件中尝试了以下代码

```
before_create :validate_company_id

def validate_company_id
    cp = Company.find_by_company_id(self.company)
    if @cp != nil
       return
     else
        self.status ||= "Invalid"    
     end
end 
```

但它没有验证，你能帮我如何验证它。

问候苏尔扬

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-12T13:04:47.870

这些家伙回答正确，但提供了另一种解决方案。你可以问自己：“为什么我的代码没有被执行？”

首先，您的代码中有错误 -`@cp`未定义。另外，我不知道你想用`self.status ||= "Invalid"`.

调用属性时也不必使用`self`，但在分配新属性值时必须调用它。所以`self.company`是不必要的，你可以使用`company`.

我还注意到您的表`company_id`中有该属性`companies`。这不是必需的，常见的约定是只使用一个 id 来代替。如果您不想更改表格，可以`id`像这样在模型上设置字段：

```
class Company < ActiveRecord::Base
  set_primary_key :company_id

  # ... the rest of your model code ...
end 
```

之后，您可以使用`Company.find`而不是`Company.find_by_company_id`.

好的，假设您在修复后有以下代码：

```
before_create :validate_company_id

def validate_company_id
    cp = Company.find(company)
    if cp != nil
       return
     else
        self.status ||= "Invalid"    
     end
end 
```

首先我想在这里使用三元运算符

```
before_create :validate_company_id

def validate_company_id
    Company.find(company) ? return : self.status ||= "Invalid"
end 
```

这不是更干净吗？它做同样的事情。

现在关于`self.status`你的。如果您想使对象无效，则`ActiveModel`必须在`errors`哈希中设置一些值。如果您认为状态属性为“Invalid”的模型无效，那您就误会了。它在 Rails 中仍然是完全有效的模型。

那么如何作废呢？

您将一些值放`errors`入哈希中。您还可以指定一条消息和验证错误所指的属性。

所以让我们在你的模型上做

```
before_create :validate_company_id

def validate_company_id
    Company.find(company) ? return : errors.add(:company,"Invalid Company ID")
end 
```

现在，如果您尝试使用无效的 company_id 保存模型，它仍然会通过并保存到数据库中。这是为什么？

这是因为`ActiveModel`s 生命周期。你的方法被调用得太晚了。

这是您可以使用的所有回调方法

### 创造

```
before_validation
after_validation
before_save
around_save
before_create
around_create
after_create
after_save 
```

### 更新

```
before_validation
after_validation
before_save
around_save
before_update
around_update
after_update
after_save 
```

### 破坏

```
before_destroy
around_destroy
after_destroy 
```

请注意您的方法是如何在验证周期之后很长时间被调用的。所以你不应该使用`before_create`, 而是`after_validation`使用`before_validation`回调。

在这里，我们使用您的模型的工作验证方法。

```
after_validation :validate_company_id

def validate_company_id
    Company.find(company) ? return : errors.add(:company,"Invalid Company ID")
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T04:59:51.273

而不是使用 before_create。您可以告诉模型使用自定义方法进行验证，如下所示

```
validate :validate_company_id

def validate_company_id
    cp = Company.find_by_company_id(self.company)
    if cp.nil?
      errors.add(:company, 'Invalid Company ID')
    end
end 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-12T05:03:31.837

```
Inside you model, you can add custom validations as below:

validate :validate_company_id

def validate_company_id
  Your validations 
  Add error messages can be added as below
  errors.add(:company, "is invalid")
end 
```

# xml - 处理具有多个条件的 XSLT 的问题

> ID：10117526
> 
> 赞同：0
> 
> 时间：2012-04-12T04:50:26.677
> 
> 标签：xml, xslt, multiple-conditions

我的输入 XML 具有以下结构：

```
<catalog>
<cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
    <attributes>
        <attribute>
            <key>1</key>
            <value>one</value>
        </attribute>
        <attribute>
            <key>2</key>
            <value>two</value>
        </attribute>
    </attributes>
</cd>
<cd>
    <title>Hide your heart</title>
    <artist>Bonnie Tyler</artist>
    <country>UK</country>
    <company>CBS Records</company>
    <price>9.90</price>
    <year>1988</year>
    <attributes>
        <attribute>
            <key>1</key>
            <value>one</value>
        </attribute>
        <attribute>
            <key>2</key>
            <value>two</value>
        </attribute>
    </attributes>
</cd>
<cd>
    <title>Greatest Hits</title>
    <artist>Dolly Parton</artist>
    <country>USA</country>
    <company>RCA</company>
    <price>9.90</price>
    <year>1982</year>
    <attributes>
        <attribute>
            <key>1</key>
            <value>one</value>
        </attribute>
        <attribute>
            <key>2</key>
            <value>two</value>
        </attribute>
    </attributes>
</cd>
<cd>
    <title>Still got the blues</title>
    <artist>Gary Moore</artist>
    <country>UK</country>
    <company>Virgin records</company>
    <price>10.20</price>
    <year>1990</year>
    <attributes>
        <attribute>
            <key>1</key>
            <value>WON</value>
        </attribute>
        <attribute>
            <key>2</key>
            <value>two</value>
        </attribute>
    </attributes>
</cd>   
</catalog> 
```

现在，我试图通过仅选择 { key = 1 和 value = WON } 的那些 cd 节点（与该键节点同级的值节点）来创建不同的 xml。一直坚持这一点，试图应用多个条件。尝试了以下方法：

1.  尝试复制那些匹配条件的节点
2.  进行身份复制并忽略那些不符合条件的节点

不确定这是否可行，或者我做错了什么。这是我的 xslt 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output  method="xml"
             indent="yes"/>

<xsl:variable name="KeyToBeMatched">1</xsl:variable>
<xsl:param name="ValueToBeMatched">WON</xsl:param>

<xsl:template match="catalog">

      <xsl:for-each select="cd">
        <xsl:for-each select="attributes/attribute[keu = $KeyToBeMatched]">
            <xsl:variable name="attributeValue" select="value"/>
                <xsl:if test="$attributeValue = $RMGAccountId"> 
                        <xsl:copy>
                            <xsl:apply-templates select="@*|*|text()" />
                        </xsl:copy>
                </xsl:if>
        </xsl:for-each>
      </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:07:55.643

试试这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output  method="xml" indent="yes"/>

<xsl:variable name="KeyToBeMatched">1</xsl:variable>
<xsl:param name="ValueToBeMatched">WON</xsl:param>

<xsl:template match="list"> 
    <xsl:for-each select="cd">
        <xsl:for-each select="attributes/attribute[key = $KeyToBeMatched]">
            <xsl:variable name="attributeValue" select="value"/>
            <xsl:if test="$attributeValue = $ValueToBeMatched"> 
                <xsl:copy>
                    <xsl:apply-templates select="@*|*|text()" />
                </xsl:copy>
            </xsl:if>
        </xsl:for-each>
    </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

从未声明过变量“RMGAccountId”，我将其与“ValueToBeMatched”进行了交换。并修复了Filype指出的错字。应用于您获得此 XML 的源：

```
<?xml version="1.0" encoding="UTF-8"?>
<attribute> 1 WON </attribute> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:38:40.137

我不确定您是否要复制整个**cd**元素，或者它是否应该具有匹配的属性，但如果您这样做了，您可以简单地添加一个像这样的匹配模板，然后在其中添加代码来复制元素

```
<xsl:template match="cd[attributes/attribute[key='1'][value='WON']]">
    <!-- Copy element -->
</xsl:template> 
```

然后可以匹配和忽略其他**cd元素**

```
<xsl:template match="cd" /> 
```

试试这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="cd[attributes/attribute[key='1'][value='WON']]">
      <xsl:call-template name="identity" />
   </xsl:template>

   <xsl:template match="cd" />

   <xsl:template match="@*|node()" name="identity">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 XML 时，输出了已故的、伟大的 Gary Moore

```
<catalog>
   <cd>
      <title>Still got the blues</title>
      <artist>Gary Moore</artist>
      <country>UK</country>
      <company>Virgin records</company>
      <price>10.20</price>
      <year>1990</year>
      <attributes>
         <attribute>
            <key>1</key>
            <value>WON</value>
         </attribute>
         <attribute>
            <key>2</key>
            <value>two</value>
         </attribute>
      </attributes>
   </cd>
</catalog> 
```

当然，在你的情况下，你需要参数化匹配值，在这种情况下你不能使用这种方法，因为变量不能在模板匹配中使用。相反，您可以使用 xsl:for-each 来匹配**cd**元素：

```
<xsl:for-each select="cd[attributes/attribute[key=$KeyToBeMatched][value=$ValueToBeMatched]]"> 
```

这是此方法的完整 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:variable name="KeyToBeMatched">1</xsl:variable>
   <xsl:param name="ValueToBeMatched">WON</xsl:param>

   <xsl:template match="catalog">
      <xsl:for-each select="cd[attributes/attribute[key=$KeyToBeMatched][value=$ValueToBeMatched]]">
         <xsl:call-template name="identity"/>
      </xsl:for-each>
   </xsl:template>
   <xsl:template match="@*|node()" name="identity">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

这也将返回令人敬畏的加里摩尔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:00:48.170

有错别字

```
--------------------------------------------V---------------------
<xsl:for-each select="attributes/attribute[keu = $KeyToBeMatched]"> 
```

# asp.net - jQuery UI 对话框 + ASP.NET 用户控件

> ID：10117527
> 
> 赞同：2
> 
> 时间：2012-04-12T04:50:28.960
> 
> 标签：asp.net, jquery-ui

我正在寻找解决问题的替代方法。我们正在使用[ElFinder](http://elfinder.org/ "埃尔法德")浏览文件，并且我们希望允许用户通过右键单击上下文菜单（“更改权限”）更改对文件元素的访问权限。到目前为止，我提出的解决方案是在 jQuery 模式对话框窗口中加载服务器端 ASP.NET 用户控件。此用户控件将包含添加/删除对选定元素的用户访问权限所需的逻辑。

jQuery Dialog 脚本看起来像这样（为了便于阅读，稍作更改），其中 DisplayItemAccessConfig() 是从上下文菜单调用的方法：

```
<!-- access control script -->
<script type="text/javascript" charset="utf-8">

     function DisplayItemAccessConfig() {
        $.getJSON('AccessRights.ashx', function (data) {

            var itemName = data["itemName"];

            /* set new title (JUST FOR TESTING) */
            $(dialog).dialog('option', 'title', itemName);

            /* open modal dialog --> */
            $(dialog).dialog('open');

        });

    }

    $(function () {
        $("#dialog").dialog({
            autoOpen: false,
            modal: true,
            buttons: {
                "Ok": function () { $(this).dialog("close"); },
                "Cancel": function () { $(this).dialog("close"); }
            },
            open: function (type, data) {
                $(this).parent().appendTo("form");
            }
        });
    });    
</script> 
```

Challenge 1: find a way to reload the user control each time the jQuery popup is displayed - this is to retrieve the current access settings for the selected element. Now it loads when the page is first loaded, since it's just a div element containing an update panel with a placeholder for my usercontrol and visibility set to none. Anyone have any tips here?

Challenge 2: While I am trying to figure that one out I thought it could be worth while asking for other opinions. Is there a better way of solving this? Should I use a pure jQuery with HTML and call server side .ashx methods to retrieve data, instead of an ASP.NET usercontrol?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:29:48.297

1.  You can do this by creating a hidden button on inside the uploadpanel and then trigger it like this:

    __doPostBack('<%= Button.ClientID %>','');

2.  就我个人而言，我会放弃 UpdatePanel 并使用 jQuery AJAX 调用来更新对话框窗口的内容，但这取决于用户控件的复杂性。很难说没有看到更多的代码。

# javascript - 如何在正则表达式 extjs 中使用 '\'

> ID：10117530
> 
> 赞同：0
> 
> 时间：2012-04-12T04:50:35.300
> 
> 标签：javascript, regex, extjs, extjs3

我正在使用这个正则表达式：[a-zA-Z0-9\-.,:+*()=\'&_]，但我收到类似：'unterminated character class' error in this expression'的错误：

演示代码：

```
Ext.getCmp('field2').addListener({
        beforequery: function (e) {
            if (e.query && e.query.indexOf('?') != -1) {
                var temp = '';
                for(var i=0;i<e.query.length;i++){
                    temp = temp + '['+e.query[i]+ ']';
                }
                e.cancel = true;
                var query = new RegExp(String.format('^{0}',temp.replace(/\?/g, 'a-zA-Z0-9\.,:\+*()=\'&_-\\')));
                this.expand();
                this.store.clearFilter(true);
                this.store.filter(this.displayField, query);
            }
        }
    }); 
```

错误：

1.请有人告诉我这有什么问题，主要是反斜杠。

2.当我们在组合框中输入所需的字符时，它们会被自动选择..所以当我们想输入新字符时，我们必须按侧箭头，否则剩余的字符将被删除......

再次感谢，

拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:54:38.540

我认为您必须逃避角色类中的某些项目。就像你的反斜杠、星号、加号、括号和句号一样。

像这样的东西`[a-zA-Z0-9\\-\.,:\+\*\(\)=\\'&_]`

`[\^$.|?*+(){}`在正则表达式中为特殊字符添加反斜杠会抑制它们的特殊含义，从而允许您按字面意思使用它们。

[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:59:15.037

在正则表达式中，您需要转义 11 个字符：左方括号 [、反斜杠 \、插入符号 ^、美元符号 $、句点或点 .、竖线或管道符号 |、问号 ?、星号或星号 *、加号 +、左圆括号（和右圆括号）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:02:28.383

您需要转义正则表达式中的某些字符。所以它看起来像：

```
var regex = /[a-zA-Z0-9\-\.,:\+\*\(\)=\\'&_]/;  // Note the backslashes 
```

括号、加号、星号和反斜杠是正则表达式中具有特殊含义的许多字符中的一部分。为了从字面上包含它们，您需要用反斜杠转义它们。

# c# - 如何自动创建用户备份？

> ID：10117535
> 
> 赞同：2
> 
> 时间：2012-04-12T04:51:06.587
> 
> 标签：c#, c++, .net, windows, winapi

我想知道是否可以以编程方式与[Windows Easy Transfer](http://enwp.org/Windows_Easy_Transfer) (migwiz.exe) 或其他工具交互，以便自动创建用户备份。

我到处看了看，但似乎微软还没有发布过这样的东西。我想知道你们中是否有人知道如何开始。我知道我可以启动程序（migwiz.exe），但这对我帮助不大。也许这个程序正在使用一个我可以自己使用的 DLL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:09:06.353

使用[迁移工具](http://www.infoworld.com/t/windows/11-tools-windows-7-migrations-484)。Microsoft 的[用户状态迁移工具](http://en.wikipedia.org/wiki/User_State_Migration_Tool)是一种选择，它是免费软件。也许它会满足您的需求。它是命令行驱动的。

为什么要“创建用户的备份”？

# jquery - jquery中div块内动态内容的滚动条

> ID：10117538
> 
> 赞同：0
> 
> 时间：2012-04-12T04:51:40.940
> 
> 标签：jquery, css

我正在尝试使用 jquery 更改现有 RSS 阅读器的 UI，但是当尝试将动态内容放入 div 块中时，滚动条不起作用。它似乎只适用于静态内容。请提出解决方案。

注意：（因为我是 jquery 的新手，欢迎解释）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:55:12.620

它有助于在 CSS 中为该元素指定溢出。

```
#mydiv {
  overflow: auto;
} 
```

# android - 如何在android中设置图像移动的边界

> ID：10117539
> 
> 赞同：-1
> 
> 时间：2012-04-12T04:52:04.163
> 
> 标签：android, android-view

我创建了一个图像视图并用`OnTouchListener`. 如何将移动限制在屏幕边界内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:44:57.290

我根据在这里找到的代码做了类似的事情： [DragView Example](http://blahti.wordpress.com/2011/01/17/moving-views-part-2/)

它基于谷歌的启动器代码。为了将视图保留在屏幕上，我修改了 onTouchEvent 方法以将视图保留在屏幕上。

```
public boolean onTouchEvent(MotionEvent ev) {
    if (!mDragging) {
        return false;
    }
    final int action = ev.getAction();
    final int screenX = clamp((int)ev.getRawX(), 0, mDisplayMetrics.widthPixels);
    final int screenY = clamp((int)ev.getRawY(), 0, mDisplayMetrics.heightPixels);
    //**ADDED to keep view entirely on screen
    final int[] parentpos = {-1,-1};
    ((View) mDragSource).getLocationOnScreen(parentpos);
    int minScreenX = parentpos[0] + (int)mTouchOffsetX;
    int minScreenY = parentpos[1] + (int)mTouchOffsetY;
    int maxScreenX = minScreenX + ((View) mDragSource).getWidth() - mDragView.getWidth();
    int maxScreenY = minScreenY + ((View) mDragSource).getHeight() - mDragView.getHeight();
    //end ADDED 
```

和这里

```
 case MotionEvent.ACTION_MOVE:
        // Update the drag view.  Don't use the clamped pos here so the dragging looks
        // like it goes off screen a little, intead of bumping up against the edge.
        // **CHANGED to keep view entirely on screen
        mDragView.move(clamp(screenX,minScreenX,maxScreenX), 
                clamp(screenY,minScreenY,maxScreenY));
        // end CHANGED 
```

和这里

```
 case MotionEvent.ACTION_UP:
        if (mDragging) {
            // **CHANGED to keep view entirely on screen
            drop(clamp(screenX,minScreenX,maxScreenX), 
                    clamp(screenY,minScreenY,maxScreenY));
            //end CHANGED
        }
        endDrag(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:09:17.260

如果要在页面中显示图像，请使用以下代码：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:orientation="vertical" >

     <ImageView
        android:id="@+id/image"
        android:layout_width="match_parent"
         android:layout_height="match_parent"
        android:padding="2px"
        android:src="pathOfImage" />

     </LinearLayout> 
```

或者您可以使用以下代码设置高度和宽度：

```
 Display display = getWindowManager().getDefaultDisplay();
    width = display.getWidth();
    height = display.getHeight();

    ImageView imageView=(ImageView) findViewById(R.id.image);
    imageView.setLayoutParams(new LayoutParams(width, height)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:06:16.820

你不想要`OnTouchListener`，你想要`OnDragListener`。查找不同的`DragEvent`操作类型以获取有关您的视图所在位置的信息。从那里，只要你知道你的尺寸`View`，你就可以禁止它移动到屏幕之外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T04:59:36.750

你可以计算你的屏幕尺寸，并可以像这样修复屏幕内的图像移动

```
Display display = getWindowManager().getDefaultDisplay();
            width = display.getWidth();
            height = display.getHeight(); 
```

# ios - 如何检查对象是否存在于 NSMutableArray 的某个索引处？

> ID：10117543
> 
> 赞同：8
> 
> 时间：2012-04-12T04:52:25.313
> 
> 标签：ios, objective-c, nsarray

例如，我如何验证索引 3 处是否有项目？

中的对象`NSArray`是从“Animal”类实例化的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-12T05:03:07.463

好吧，既然`NSMutableArray`必须保存非零对象，只要数组足够大，你就知道index有*一些东西*`i`：

```
if ([myArray count] > 3) {
    id myObj = [myArray objectAtIndex:3];
    ...
} 
```

如果您需要检查其他内容，例如确保它没有引用 NSNull 单例，则可以检查

```
if (myObj != [NSNull null]) ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T04:59:04.990

由于 NSMutableArray 的存储中不能有“间隙”，如果您的索引小于`[array count]`，则可以确定该索引处存在对象。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-12T05:14:27.723

试试这个代码

```
for(int j = 0; j < [yourArray count]; j++)
{
    if(obj isKindOfClass:[Animal class]]) {
        return
    }
} 
```

# c# - 绘制 2 条线

> ID：10117544
> 
> 赞同：4
> 
> 时间：2012-04-12T04:52:35.360
> 
> 标签：c#, .net, winforms, animation

如果我在一页上有 2 行

我将如何为第一行设置动画以到达第二行的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:12:19.020

添加一个“计数器”变量，该变量将是线在两个位置之间经过的距离的百分比。将其初始化为零，因为它从开始位置开始。添加一个计时器，每次它滴答作响时，您都会增加“计数器”并使客户区无效，以便发生重绘。一旦“计数器”达到 100 并且它 100% 到达目标，您将禁用计时器，因为不再需要。

在绘画程序中，您已经知道开始位置和结束位置，所以只需在两者之间的“计数器”百分比处画线。因此，如果您知道 startX 并且知道 endX，您的绘制版本是 startX + ((endX - startX) / 100 * counter)。对每一行的顶部、左侧、右侧和底部执行此操作，您就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:58:02.527

如果我没记错你有眨眼，这是你的问题吗？尝试使用这个[BufferedGraphics](http://msdn.microsoft.com/en-en/library/system.drawing.bufferedgraphics.aspx) 小例子

```
System.Drawing.Graphics g = this.CreateGraphics();
    System.Drawing.BufferedGraphicsContext dc = new BufferedGraphicsContext();
    BufferedGraphics backbuffer = dc.Allocate(g, new Rectangle(new Point(0, 0), g.VisibleClipBounds.Size.ToSize()));
    backbuffer.Graphics.DrawLine(Pens.White, 10, 10, 10, 100);
    backbuffer.Render(g); 
```

# iphone - 使用 Xcode 在应用内填充 UITableView？（苹果手机）

> ID：10117545
> 
> 赞同：0
> 
> 时间：2012-04-12T04:52:38.950
> 
> 标签：iphone, objective-c, xcode, uitableview

我是 Xcode 和 Objective-C 的新手，对一般编程也很陌生，所以如果我有严重的误解，请纠正我。

这是我想要完成的：

*   创建表视图（启动时为空）

*   让用户通过条形按钮添加和命名单元格（推到具有名称文本字段和我假设的“创建”按钮的不同视图）

*   每个创建的单元格都会推送到具有类似添加/命名功能的新表格视图

*   然后每个单元格*都*推送到文本视图

在我看来，完成第一部分的最佳方法是填充一个字符串数组，然后将这些元素分配给相应的单元格。这就是我卡住的地方。

*   如何使用数组填充表格视图？

*   我应该为每个单元格创建一个新的辅助表视图，还是根据选择的父单元格以不同的方式填充相同的表视图？

*   对于链末端的文本视图，与之前的问题相同......多个文本视图或每次都传递不同的文本？

如果你走到这一步，我真诚地感谢你，如果我需要澄清任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T05:07:01.517

我希望您知道如何创建表格视图。现在你应该创建一个 NSMutableArray 来保存你的字符串。

```
@property (retain) NSMutableArray *stringsArray = _stringsArray; 
```

所以你的 viewDidLoad 看起来像这样。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UITableView *myTableView    =   [[UITableView alloc] initWithFrame:self.view.bounds style:UITableViewStyleGrouped];
    myTableView.dataSource      =   self;
    myTableView.delegate        =   self;
    [self.view addSubview:myTableView];
    [myTableView release];

    self.stringsArray = [NSMutableArray array];
} 
```

现在表格视图代表

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [self.stringsArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tmpTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier         =   @"MainCell";
    UITableViewCell *cell               =   [tmpTableView dequeueReusableCellWithIdentifier:CellIdentifier];   
    if (nil == cell) {
        cell    =   [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.textLabel.text = [self.stringsArray objectAtIndex:indexPath.row];

    return cell;
} 
```

现在，当您单击 barbutton 添加新用户时，您必须将其添加到字符串数组并调用`[tableview reloadData];`

我不明白你为什么想要一个文本视图。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:28:46.423

从这里阅读 uitableview [UITableView 教程的完整参考：iPhone TableView 简介](http://www.mobisoftinfotech.com/blog/iphone/introduction-to-table-view/)

# java - 在 Hibernate 中实现外键关系

> ID：10117546
> 
> 赞同：0
> 
> 时间：2012-04-12T04:52:40.607
> 
> 标签：java, hibernate

我有一个类`Problem`，然后是各种其他类，它们扩展了基类，`Solution`例如，许多其他解决方案子类。该类将是各种解决方案类的“外键”，尽管该类不需要解决方案列表。`BasicSolution``ExpertSolution``Problem``Problem`

所以我想要`Problem`各种解决方案表中的表外键（每个解决方案子类一个表）。我如何通过 Hibernate 实现它？

我知道从 Hibernate 的角度来看，这不是正确的数据库设计，但它是一个遗留系统，无法调整。我知道一对多的实体关联，但这需要一些解决方案列表才能出现在问题类中（我不想要）。

你能建议这个问题的一些答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:22:10.487

您需要将 Solution 基类中的关系与 @ManyToOne 关联进行映射：

```
@Entity
@Inheritance(strategy=InheritanceType.JOINED)
public abstract class Solution {
...
    private Problem _problem;

    @ManyToOne
    @JoinColumn(name="PROBLEM_ID")
    public Problem getProblem() {
        return _problem;
    }
...
} 
```

所有解决方案子类都与问题有关。

您也可以使用@OneToOne 代替@ManyToOne，不同之处在于@ManyToOne 必须在关系的这一侧具有外键。

# git - “git add submodule”上的致命错误

> ID：10117548
> 
> 赞同：8
> 
> 时间：2012-04-12T04:52:54.147
> 
> 标签：git

当我尝试将子模块添加到我的存储库时出现以下错误：

> 致命：pathspec 'submodule' 不匹配任何文件

我的子模块有一些问题，所以我不得不将它们全部删除（从`.gitmodules`,中删除它们，`.git/config`使用 , 清理索引`rm --cached submodule_path`，甚至做了`git reset --mixed`）。

但现在我似乎根本无法添加任何子模块！我查看了整个 .git 文件夹以搜索对我以前的子模块的引用，但找不到任何东西。我已经没有选择了吗？

（现在我想起来了，我可能已经删除了一个在某个时候引用了子模块的存储库，但是那个子模块现在已经消失了，为什么这会是一个问题？）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T04:54:42.510

我认为您的意思是使用`git submodule add <repository> <path>`, not `git add submodule`，它只会添加一个名为 index.html 的文件`submodule`。

# javascript - 如何根据asp.net中的邮政编码获取页面中的动态地图？

> ID：10117555
> 
> 赞同：0
> 
> 时间：2012-04-12T04:54:07.910
> 
> 标签：javascript, asp.net, google-maps, google-maps-api-3

我的网站需要一个谷歌地图模块。地图应根据邮政编码显示。邮政编码将自动转换为其地址/纬度和经度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:04:56.353

好吧，我在 PHP 中做到了 .. 请找到代码 .. 进行 AJAX 调用，这将返回纬度和经度 .. 像

```
$address = $this->input->post('address');
        $output = array();

        $address = str_replace(" ", "+", $address);
        $region = "IND";
        $json = file_get_contents("http://maps.google.com/maps/api/geocode/json?address=$address&sensor=false&region=$region");

        $json = json_decode($json);

        if (!empty($json->{'results'}[0]->{'geometry'}->{'location'}->{'lat'})) {
            $output['latitude'] = $json->{'results'}[0]->{'geometry'}->{'location'}->{'lat'};

            $output['longitude'] = $json->{'results'}[0]->{'geometry'}->{'location'}->{'lng'};

return $output;
        } 
```

然后使用 google map API 使用返回的纬度和经度设置地点

```
//var latlng = new google.maps.LatLng(-104.017031, 15.373535);
       var latlng = new google.maps.LatLng(latitude,longitude);
        var map = new google.maps.Map(document.getElementById('map'), {
        center: latlng,
        zoom: 13,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });

     var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        title: 'Set lat/lon values for this property',
         raiseOnDrag: true,
        draggable: true
    });
    google.maps.event.addListener(marker, 'dragend', function(a) {
        console.log(a);

        $('#latitude').val(a.latLng.lat().toFixed(4));
        $('#longitude').val(a.latLng.lng().toFixed(4));

       // var div = document.createElement('div');
       // div.innerHTML = a.latLng.lat().toFixed(4) + ', ' + a.latLng.lng().toFixed(4);
       // document.getElementsByTagName('body')[0].appendChild(div);
    }); 
```

请在您的页面中包含 google map.js 文件

希望这可以帮助

# c++ - 使用 C++ 联合，当您想要哪个成员未知时

> ID：10117558
> 
> 赞同：4
> 
> 时间：2012-04-12T04:54:34.740
> 
> 标签：c++, operator-overloading, unions, ostream

基本上，我必须为我的 tokenType 结构重载 << 运算符，如下所示（无法更改，我必须以这种方式使用它）

```
struct tokenType 
{
    int category  ;   // one of token categories defined above
    union 
    {
        int  operand ;
        char symbol ; // '+' , '-' , '*' , '/' , '^' , '='
    } ;
    int  precedence() const ;
} 
```

我的重载方法标题是：

```
ostream & operator<< ( ostream & os , const tokenType & tk) 
```

所以，我需要打印出 struct tk 中的值，无论是 int 还是 char。当我不知道变量是操作数还是符号时，如何访问联合中包含的内容？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T04:57:31.303

您需要做的是查看`category`成员（不是联合的一部分）来决定使用哪个联合元素。像下面这样的东西可能有用（我猜是类别定义，很明显）：

```
switch (tk.category) {
    case catOperand:
        os << tk.operand;
        break;
    case catSymbol:
        os << tk.symbol;
        break;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T04:57:50.560

这不是“类别”数字应该表示的吗？这看起来像一个带[标签的 union](https://en.wikipedia.org/wiki/Tagged_union)，其中类别是标签。它应该告诉您令牌是操作数还是符号，您可以使用它来决定要访问联合中的哪个字段。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T04:59:09.040

该`int category`位告诉您如何解释`union`. 通常这是一个枚举类型。

无论哪种方式，您都只需使用一个`switch`语句（或者也许您只有两个类别`if then else`就足够了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T04:57:22.777

由于您的操作员采用 (constant reference to a) `tokenType`，并且该`category`成员确定联合的哪个元素当前有效，因此您拥有准确打印它所需的信息。

# maven - 依赖jar和src/main/resources之间的maven类路径顺序？

> ID：10117563
> 
> 赞同：3
> 
> 时间：2012-04-12T04:55:11.367
> 
> 标签：maven

我正在尝试运行 mvn exec:java .....

然后它使用我的 pom 定义的运行时类路径，我认为它默认为编译类路径。问题是我发现我的 src/main/resources/log4j.xml 没有反映，因为我将 DEBUG 日志记录在文件中，但我只在输出中看到 WARN。我怀疑它实际上是一些正在使用的依赖 jar 中的 log4j.xml。所以我需要将 src/main/resources/log4j.xml 提升到我的编译/运行时类路径的前面。但是如何在类路径中指定 src/main/resources 与依赖 jar 的相对顺序？

谢谢杨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:28:54.913

一种解决方法是使用命令行参数明确指定`log4j.xml`您希望 log4j 使用的。

```
-Dlog4j.configuration=file:/log4j.xml 
```

# zend-framework - 如何在 Zend 中访问一个抽象的受保护函数

> ID：10117567
> 
> 赞同：0
> 
> 时间：2012-04-12T04:55:35.783
> 
> 标签：zend-framework, abstract-class

我该怎么做才能使抽象函数在 emaillogger 类中工作？

```
class EmailLogger extends Zend_Log_Writer_Abstract 
```

我想使用函数_write

```
 protected function _write($event)
 {
      $this->_events[] = $this->_formatter->format($event);
 } 
```

然后我得到了这个错误

类 EmailLogger 包含 1 个抽象方法，因此必须声明为抽象方法或实现其余方法（Zend_Log_FactoryInterface::factory）

我不太确定在这里做什么我尝试使用实现 Zend_Log_FactoryInterface，但它没有用

谢谢，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:17:06.303

`Zend_Log_Writer_Abstract`实现`Zend_Log_FactoryInterface`具有以下代码：

```
static public function factory($config); 
```

这强制`Zend_Log_Writer_Abstract`和任何子类也有一个`factory`方法。为了满足这个要求，你可以放入一个调用父方法的包装方法：

```
class EmailLogger extends Zend_Log_Writer_Abstract
{
    // Add this method in conjunction to what you already have in your class
    public static function factory($config)
    {
        parent::factory($config);
    }
} 
```

# c# - 从 DateTime 转换为 SqlDateTime 不准确

> ID：10117570
> 
> 赞同：8
> 
> 时间：2012-04-12T04:55:51.447
> 
> 标签：c#, asp.net

`DataRow`我有一个从源（ a或 a `SqlDataReader`）获取日期属性的方法：

```
protected SqlDateTime GetSqlDateTimePropertyValue(string propertyName, object source)
{
  var objValue = GetPropertyValue(propertyName, source);
  var value = objValue == DBNull.Value ? null : (DateTime?)objValue;
  var sqlValue = new SqlDateTime();
  if (value.HasValue) sqlValue = value.Value;
  return sqlValue;
} 
```

但转换似乎稍微改变了日期，所以我的测试总是失败。

有谁知道为什么这种方法会错误地转换？

在方法结束时，看起来转换为进行`SqlDateTime`了一些舍入：

```
value.Value.Ticks:        634698391707468296
sqlValue.Value.Ticks:     634698391707470000 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T04:57:34.020

是的 - SQL Server`DATETIME`的精度为 3.33 毫秒 - 但是 .NET 数据类型可以表示单个毫秒。

因此，您有时会遇到一些舍入问题。

在此处阅读有关`DATETIME`数据类型及其属性和怪癖的更多信息：

[揭秘 SQL Server DATETIME 数据类型](http://www.sql-server-performance.com/2004/datetime-datatype/)

此外，SQL Server 2008 引入了一系列新的与日期相关的数据类型——在此处阅读有关这些数据类型的更多信息：

[SQL Server 2008 新的 DATETIME 数据类型](http://www.sql-server-performance.com/2007/datetime-2008/)

这些类型确实包括`DATETIME2`精确到 100ns 的数据类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T05:00:16.950

[这是 TSQL 日期时间的记录精度 - 请参阅MSDN](http://msdn.microsoft.com/en-us/library/ms187819.aspx)的此链接中标题为“日期时间小数秒精度的舍入”的部分。引用部分：

> 日期时间值四舍五入为 0.000、0.003 或 0.007 秒的增量，如下表所示。

.NET 日期时间具有更好的精度。

此外，MS 建议使用较新的数据类型（例如 datetime2、日期、时间等）而不是日期时间。Sql Server 2008 引入的数据类型[datetime2](http://msdn.microsoft.com/en-us/library/bb677335.aspx)具有相似的精度 (100ns)（与 .NET 日期/时间结构相同），它还支持 ISO 8601 字符串格式，这将使从 .NET 日期/时间到 SQL 日期时间的转换更简单（（即当您被迫使用文字而不是参数化查询时）并且无损失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:03:39.947

SqlDateTime 对象的精度低于 .NET DateTime 对象，因此在转换为 SQL 时会丢失一些精度。

# javascript - 重定向到其他页面

> ID：10117585
> 
> 赞同：1
> 
> 时间：2012-04-12T04:57:48.470
> 
> 标签：javascript, jsp, web

我有一个包含三个页面的 Web 应用程序，一个是登录页面，第二个是联系页面，第三个是聊天页面。遍历的自然顺序是从一到二，从二到三。

打开第二页和第三页需要登录（使用我们的网络服务）。现在我们有一个要求，我们想直接从第三方应用程序打开第三页。

因此，假设如果从浏览器请求第三页并且在同一浏览器上登录（使用第一页）。然后我们需要直接显示第三页，否则显示用户第一页，即登录页面。

要求类似于所需的 facebook 页面可以通过单击 gmail 页面的链接打开，如果 facebook 用户已经登录，他可以直接看到所需的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:06:34.997

当我将此功能写入我的上一个项目时，我通常会执行以下操作：

1.  尝试加载页面
2.  在任何页面加载开始时，首先检查的是登录状态
3.  如果 loggedIn == false，那么您将保存当前 url 并使用前一个 url 的参数重定向到登录 (mysite.com/login?url=/something/page3)
4.  然后当他们提交新的登录信息时，成功后您可以简单地获取 url 参数的值，并重定向到该值。

但是，为了做到这一点，您可能需要已经解决以下问题：您的页面框架、基于每个页面的模块化代码（mvc 通常对此有所帮助）、可以轻松检查登录状态的登录功能等等

# android - GPS 未启用，但 isProviderEnabled() 返回 true

> ID：10117587
> 
> 赞同：5
> 
> 时间：2012-04-12T04:57:50.357
> 
> 标签：android

我可以使用 isProviderEnabled() 检查 GPS 是否打开。如果它没有打开，我正在启动意图，以便用户可以启用 GPS。最后，我再次检查用户是否启用了 GPS。如果用户没有启用 GPS 并出来，isProviderEnabled() 仍然返回 NULL。可能是什么问题 ？请指导我。

```
 String provider = LocationManager.GPS_PROVIDER;
    // Check if GPS is enabled
    boolean enabled = myLocationManager.isProviderEnabled(provider);

    if (!enabled) {
                    // GPS not enabled
        Log.d("", "Provider " + provider + " is not enabled");
        Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
        startActivity(intent);
                    // Consider the case when user does not enable GPS and come out. 
    } else {
        Log.d("", "Provider is enabled");

    }       

            // Re-check if user has enabled or not. (Note: case: user has not enabled GPS)
    enabled = myLocationManager.isProviderEnabled(provider);
    if(!enabled)
    {

        Log.d("","provider not enabled");
    }
            else
            {
                    // Control is coming here though user has not enabled GPS in settings
                    Log.d("","GPS is enabled");
            } 
```

谢谢， Biplab

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T05:12:12.187

使用此代码检查 GPS 启用，让我知道发生了什么，

```
private void CheckEnableGPS(){
    String provider = Settings.Secure.getString(getContentResolver(),
      Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
       if(!provider.equals("")){
           //GPS Enabled
        Toast.makeText(AndroidEnableGPS.this, "GPS Enabled: " + provider,
          Toast.LENGTH_LONG).show();
       }else{
        Intent intent = new Intent(Settings.ACTION_SECURITY_SETTINGS);
           startActivity(intent);
       }   
   } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-31T21:19:44.937

我在实际的物理设备上遇到过这个问题。

我在我的物理 Android 设备上使用模拟位置进行了一些测试，然后使用 GPS 切换回真实位置（代码中没有所有模拟位置）。此时，无论 GPS 是否停止，应用程序都将始终返回“true”（GPS 已激活），并且由于某种原因不再注册真实位置。

在这种情况下，重新启动物理设备解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-26T07:42:20.903

有同样的问题，`isProviderEnabled()`在设备上返回 true < lollipop

根据user370305的回答，我更新了我的方法如下：

```
private boolean isLocationEnabled() {

    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) {

        String provider = Settings.Secure.getString(getContentResolver(),
                Settings.Secure.LOCATION_PROVIDERS_ALLOWED);

        return !provider.equals("");

    } else {

        LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        boolean gps = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
        boolean network = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        return gps || network;

    }

} 
```

# shader - 如何解决这些 FX Composer 错误？

> ID：10117593
> 
> 赞同：1
> 
> 时间：2012-04-12T04:58:34.297
> 
> 标签：shader, nvidia, fxcomposer

我安装了**FX Composer 2.5**，但我打开它总是有 2 个任务：

> 任务未知 OpenGL 配置文件：vp30。fxcomposer://localhost/internal#FXDeviceEffect_CG2 -1
> 
> 错误无法验证技术：简单 fx​​composer://localhost/internal#FXDeviceEffect_CG2 -1

然后，当我尝试启动从 NVIDIA 网站下载的一些示例时，它们无法正常运行。有时材料会变成只有一条线的红球。

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:32:28.637

您可以将这些错误归咎于 NVIDIA。OpenGL 不适用于笔记本电脑。他们没有更新他们的驱动软件，所以 500 或 600 系列中的任何 NVIDIA 卡都不能与 OpenGL 一起使用。我有一台带有 NVIDIA Geoforce GT 630M 的 Acer Aspire 5750G 笔记本电脑，我遇到的问题与您完全相同。目前，您无法纠正这些错误。这不是你的错，也不是你的笔记本电脑的错。这是英伟达的错。

但是，您可以通过简单地从 OpenGL 切换到 Direct3D9 或 Direct3D10 来避免此问题。在默认布局上，它位于任务栏的右上角。如果您没有 Direct3D9 或 10，请卸载并重新安装带有这些附加组件的程序。Direct3D9 和 10 程序与 OpenGL 有 99% 的相似性，因此您使用 OpenGL 制作的任何程序都可以复制并粘贴到 Direct3D9 中。

# android - iphone和android中使用as3的通知

> ID：10117595
> 
> 赞同：2
> 
> 时间：2012-04-12T04:58:52.660
> 
> 标签：android, iphone, actionscript-3, air, air-native-extension

我需要在特定时间通过应用程序（iphone 和 android 应用程序）显示通知。该应用程序完全在 as3 中开发。我曾尝试使用 adobe 本机扩展进行通知，但它在 android 上运行良好，但在 iphone 上却不行。这是它的链接[http://www.adobe.com/devnet/air/native-extensions-for-air/extensions/notification.html](http://www.adobe.com/devnet/air/native-extensions-for-air/extensions/notification.html) 谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:19:23.167

从这里参考[iOS 4 的本地通知以](http://useyourloaf.com/blog/2010/7/31/adding-local-notifications-with-ios-4.html)进行 iphone 开发。

从这里重新开始[Android 通知 -](http://www.vogella.com/articles/AndroidNotifications/article.html) android 开发教程。

# python - “TypeError：CreateText() 正好采用 8 个参数（给定 5 个）”，带有默认参数

> ID：10117608
> 
> 赞同：0
> 
> 时间：2012-04-12T05:00:25.233
> 
> 标签：python, typeerror, default-arguments

```
def CreateText(win, text, x, y, size, font, color, style):
    txtObject = Text(Point(x,y), text)
    if size==None:
        txtObject.setSize(12)
    else:
        txtObject.setSize(size)

    if font==None:
        txtObject.setFace("courier")
    else:
        txtObject.setFace(font)

    if color==None:
        txtObject.setTextColor("black")
    else:
        txtObject.setTextColor(color)

    if style==None:
        txtObject.setStyle("normal")
    else:
        txtObject.setStyle(style)

    return txtObject

def FlashingIntro(win, numTimes):
    txtIntro = CreateText(win, "CELSIUS CONVERTER!", 5,5,28)
    for i in range(numTimes):
        txtIntro.draw(win)
        sleep(.5)
        txtIntro.undraw()
        sleep(.5) 
```

如果不使用参数，我正在尝试`CreateText`使用我的“默认”值创建文本对象的函数。我希望后备文本是 12pt 黑色信使。我试过用空白字符串`""`而不是`None`没有运气。我对 Python 还很陌生，几乎没有编程知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:07:47.327

在python中，我们将参数/关键字的默认值直接放在函数签名中，即：

```
def CreateText(win, text, x, y, size=12, font="courier", color="black", style="normal"):
    #do stuff 
```

您可以将默认值设置为 None，即`size=None`，并且在某些情况下这很有用，但在这种情况下您不需要这样做。没有默认值的参数是必需的，如果它们在调用时不存在，则会引发错误（如您所见）。

更新：

正如@agf 所指出的，如果您的函数修改或返回它们，则不应在签名中设置可变默认值。在这种情况下，最好使用`argument=None`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:06:10.323

您需要为参数指定[默认值](http://docs.python.org/tutorial/controlflow.html#default-argument-values)：

```
def CreateText(win, text, x, y, size=None, font=None, color=None, style=None): 
```

或者，将您的真实默认值放入其中，这样您就不需要`if`声明：

```
def CreateText(win, text, x, y, 
                         size=12, font="courier", color="black", style="normal"):

    txtObject = Text(Point(x,y), text)
    txtObject.setSize(size)
    txtObject.setFace(font)
    txtObject.setTextColor(color)
    txtObject.setStyle(style)

    return txtObject 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:06:12.083

在函数定义中设置默认值：

```
def CreateText(win, text, x, y, size=None, font=None, color=None, style=None): 
```

此外，在 Python 中，最好测试单例对象`None`，例如：

```
if size is None: 
```

ETC...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T05:25:59.840

> 如果不使用参数，我正在尝试让 CreateText 函数使用我的“默认”值创建一个文本对象。

该错误准确地告诉您问题所在。您无法通过更改函数的内容来更改调用函数的正确方法（当前：使用 8 个参数）。您必须将接口更改为函数（即`def`行）。一个函数的参数只有在你给它们默认值的情况下才有默认值。

# c++ - 基于输入文件的未知大小数组

> ID：10117611
> 
> 赞同：0
> 
> 时间：2012-04-12T05:00:36.453
> 
> 标签：c++, arrays, size

这是一个初学者的C ++作业问题，我知道vector，但不允许在这个作业中使用它。我四处寻找，我也发现了如何制作一个`array[]`未知大小的。但这有点棘手（有点）。我读到的例子都是这样的：获取一个输入，然后基于该输入（大小 n）创建数组。

我已经创建了这个学生类，但现在我需要一个`array`来存储它们。我事先不知道会有多少学生。我只有一个文本文件的输入，每个学生都在一行上。格式如下，样例大概5个，但不知道老师会用多少个来测试我的程序。

输入文件如下：

```
George Chan Computer_Science New York 23
Johnny Chan Computer_Science New Jersery 22
.... 
```

但问题是我不知道有多少学生，直到我读完整个文本图块（或者我不知道是否有其他方法可以做到这一点）。我目前的方法是逐行阅读，增加一个计数器`studentCounter`，直到我完成，然后我创建我的`Student* myRoster = Student[studentCounter]`. 但是当我不得不再次开始阅读文件***时***。并逐行解析信息并创建一个`Student`对象并让一个`myRoster[x]`指向它。我觉得我做了两次工作只是为了有合适的尺寸。是否有一些技巧或我缺少的东西？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T05:14:21.530

这是使用递归的一种简单方法：

```
Student* readStudents(istream& infile,int& n_students)
{
  string line = readLine(infile);
  if (!infile) {
    return new Student[n_students];
  }
  int index = n_students++;
  Student* students = readStudents(infile,n_students);
  students[index] = parseLine(line);
  return students;
} 
```

然后你这样称呼它：

```
int n_students = 0;
Student* students = readStudents(infile,n_students); 
```

这个想法只是在您深入递归时阅读这些行。当您到达文件末尾时，您知道要分配多少学生，然后您可以解析行并在退出递归时以相反的顺序填充数组。您还将获得通过输出参数返回的学生人数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:04:38.960

如果你有足够的野心，你可以做大致相同的事情`vector`——分配一些空间，跟踪你正在使用多少空间，以及何时/如果它满了，分配一个更大的块（比如1 1/2 或 2 倍大），将数据从前一个块复制到新块，并开始将新数据插入新块。根据需要重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:10:57.530

输入文件是您定义的还是为练习定义的？

如果您要定义文件的结构，您有两个选择。你也可以

a）使字段固定长度，然后以文件大小为起点，然后进行除法以获取项目数。

或者

b) 第一行存储文件中的项目数。

# mysql - 当第二个表有 ON 匹配但没有 WHERE 匹配时如何编写 JOIN

> ID：10117619
> 
> 赞同：2
> 
> 时间：2012-04-12T05:01:14.207
> 
> 标签：mysql, sql

标题听起来有点奇怪，但我想做的是如下。给定表格

```
A.a  A.b         B.a  B.c  B.d
---  ---         ---  ---  ---
1    X           1    10   Z
2    Y           1    30   W 
```

我想要一个可能类似于以下内容的查询：

```
SELECT A.a, B.d FROM A
some kind of JOIN B ON A.a = B.a
...WHERE A.a = :a AND B.c = :c 
```

现在，如果我进行以下替换，我想得到这些答案：

```
:a  :c       A.a  B.d
--  --       ---  ---
1   10  -->  1    Z
1   20  -->  1    NULL
2   any -->  empty set 
```

我正在使用 MySQL，所以 FULL JOIN 是不可能的。

**未解决**

我*以为我自己*解决了：

```
SELECT A.a, CASE WHEN B.c = :c THEN B.d ELSE NULL FROM A 
LEFT JOIN B ON A.a = B.a
WHERE A.a = :a AND B.c = :c 
```

但这给出了：

```
:a  :c       A.a  B.d
--  --       ---  ---
1   20  -->  1    NULL
             1    10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T06:05:02.523

试试这个：

```
select distinct a1.a, b2.d from A a1
join B b1 on a1.a = b1.a
left join B b2 on a1.a = b2.a and b2.c = 10
where a1.a = 1 
```

# php - 如何根据与另一个表的关系更新表列？

> ID：10117622
> 
> 赞同：0
> 
> 时间：2012-04-12T05:01:18.963
> 
> 标签：php, mysql

我有一个名为“配置文件”的表。该表中有一个名为“user_id”的列，我已将其名称更改为“用户名”，并将类型从 INT(11) 更改为 Varchar(255) 。但是，此列的内容仍然是数字 ID。

这些 id 对应于另一个名为“users”的表。该表具有名为“user_id”和“username”的字段。对于“配置文件”表上的每一行，我需要首先检查用户名字段的 id 并在用户表上查找以获取与该 id 相对应的用户名，然后更新配置文件表的用户名值使用正确的用户名。

**配置文件表：**

```
username | blah blah...
------------------------
1        | ... 
```

**用户表：**

```
user_id | username
------------------------
1       | Joe 
```

我需要将配置文件表上的用户名字段的值更新为“Joe”。

我想出了这个 php 脚本，但由于某种原因只更新了 4 条记录后它就停止了工作：

```
 $sql = 'SELECT username FROM profiles';
    $query = mysql_query($sql);
    while($row = mysql_fetch_assoc($query)) {
        $id = $row['username'];
        $sql = 'SELECT username FROM users WHERE user_id = '. $id;
        $query = mysql_query($sql);
        while($row = mysql_fetch_assoc($query)) {
            $sql = "UPDATE profiles SET username = '".$row['username']."' WHERE username = $id";
            $query = mysql_query($sql);
            if(!$query) {
                echo 'error!';
            }
        }
    } 
```

我的脚本一开始并不是那么高效，尽管这不是什么大问题，因为表只有 50k 条记录。无论如何，直接从 mysql 执行此操作的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:04:26.017

您正在第一个循环内操作 $row 变量。显然它不起作用。尝试给内部循环中的变量一个不同的名称。

不仅您使用的几乎所有变量，在第一个循环之外，您在内循环中使用相同的名称。

同样来到 db 模式，我更希望 ids 是外键而不是用户名，因为使用 ids 查询会比使用 varchar 类型的列更快。

还有一个建议是不需要使用

```
while($row = mysql_fetch_assoc($query)) 
```

因为只有一排

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:08:07.273

正如 Napster 所说，您正在覆盖您的**$query**和**$row**变量。那应该可以解决您的直接问题。

此外，while 循环内的查询，while 循环内的查询是绝对可怕的。无意冒犯！我们都必须从某个地方开始。但我会强烈研究如何使用 JOIN 重写它，以便下次你的工具带中有一些东西。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:11:30.480

我认为您的表之间的关系是错误的，您应该在profiles 表中有一个外键链接到users 表中的user_id，然后如果您将Joe 更改为Michael，它在profiles 表中的相应记录将被更新。

**配置文件表：**

```
user_id  | blah blah...
------------------------
1        | ... 
```

**用户表：**

```
user_id | username
------------------------
1       | Joe 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:17:21.863

您可以在一个查询中执行此操作

```
UPDATE profiles t1 
    INNER JOIN users t2 ON t1.username=t2.user_id 
SET t1.username=t2.username 
```

为什么要这样做是另一个问题。

# android - 如何将整个搜索请求发送到 GoogleTV 或将应用程序启动到特定视图？

> ID：10117623
> 
> 赞同：0
> 
> 时间：2012-04-12T05:01:20.070
> 
> 标签：android, android-intent, google-tv

我已经阅读了一段时间的 android 和 google TV 文档，但我似乎找不到太多关于这方面的信息。谷歌提到为谷歌电视构建多屏应用程序，但他们的[安卓远程应用程序示例](http://code.google.com/p/google-tv-remote/)大多只是在你使用方向键导航后向谷歌电视发送击键。

我很好奇您将如何向可以执行以下操作的 google TV 发送请求：

*   在手机上输入一个完整的字符串（即“滑板上的猫”）并将整个搜索查询发送到 GoogleTV（而不是将每个单独的击键发送到 Google TV）
*   按下手机上的按钮，在 Netflix 或 Youtube 等应用上启动特定视频

这些例子可行吗？如果可行，怎么办？我正在阅读有关[Intents](http://developer.android.com/reference/android/content/Intent.html)的内容，但对我来说并不是那么清楚。我知道这是一个复杂的问题，但我感谢您的指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:05:44.427

要发送字符串进行搜索，请使用[Anymote 的 sendData 事件](https://developers.google.com/tv/remote/docs/index#dataevent)。

[要启动应用程序，请使用Intent.toUri()](http://developer.android.com/reference/android/content/Intent.html#toUri%28int%29)方法将启动该应用程序的 Intent 转换为 Uri，然后使用[Anymote 的 fling 事件](https://developers.google.com/tv/remote/docs/index#flingevents)将其发送到电视。

我将在一两周内为 Anymote 发布一个更简单的示例应用程序。同时请关注： [http ://code.google.com/p/google-tv-remote/source/browse/src/com/google/android/apps/tvremote/protocol/AnymoteSender.java](http://code.google.com/p/google-tv-remote/source/browse/src/com/google/android/apps/tvremote/protocol/AnymoteSender.java)

# asp.net-mvc-3 - 如何在 MVC3 中添加自动完成文本框更改事件

> ID：10117624
> 
> 赞同：0
> 
> 时间：2012-04-12T05:01:22.257
> 
> 标签：asp.net-mvc-3

如何添加 MVC3 自动完成文本框更改事件？下面是我的代码。

**我的查看代码**

```
<div style="float: left">

States Filter :

</div>

<div style="float: left; padding-left: 10px">
   @Html.TextBox("Statestxt")
</div>

<div style="padding-left: 10px; float: left">
   <input type="image" value="submit" src="../../Images/FilterBrowse.gif" 
          alt="submit Button" />    
</div> 
```

**我的控制器：**

```
public ActionResult AutocompleteAsync(string term)
{  
    var suggestions = from s in Adm.states
    select s.state_name;
    var namelist = suggestions.Where(n => n.ToLower().StartsWith(term.ToLower()));

    return Json(namelist, JsonRequestBehavior.AllowGet);
}

[AcceptVerbs(HttpVerbs.Post)]   
public ActionResult States(state stateModel, string _stateName, 
    FormCollection formvalues)
{  
   AdmDataContext Adm  = new AdmDataContext;

   if (Request.Form["Statestxt"] == null)
   {
      ViewBag.Error = "Enter State Name.";   
      ViewData["name"] = false;

      return View();
    }
    else
    {
        _stateName = Request.Form["Statestxt"].ToString();
        var record = (from state in Adm.states
                      where state.state_name == _stateName
                      select state).Count();

        if (record == 0)
        {
           ViewBag.Error = "Enter Valid State Name.";

           return View();

        }

        var _Stateid = from state in Adm.states
                       where state.state_name == _stateName
                       select state;

        int StateId = (int)_Stateid.First().state_id;
        var state1 = am.FindUpcomingStates2(StateId).ToList();

        if (state1 != null)
        {
            ViewData["name"] = true;
            return View("States", state1);
        }

     }
} 
```

我想在输入Statestext后更改数据。我在哪里可以编写文本框更改事件的代码？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:16:38.310

我认为您想在用户更改文本时调用 Javascript 函数。Html.TextBox 帮助器有一个重载，您可以使用它：

```
@Html.TextBox("Statestxt", "", new { onkeyup = "fnAjaxAutocomplete(this)" }) 
```

然后您的处理程序 Javascript 方法将如下所示：

```
function fnAjaxAutocomplete(element)
{
    var ajaxUrl = '@Url.Action("AutocompleteAsync")' + '?text=' + element.value;
    $.get(ajaxUrl(function(suggestionsJson) {
        // handle JSON result here
    });
} 
```

# grails - 如何在grails中进行网络搜索

> ID：10117625
> 
> 赞同：0
> 
> 时间：2012-04-12T05:01:24.360
> 
> 标签：grails, grails-plugin

嗨，我是一名学生，正在做我的学术项目。我需要一些指导来完成我的项目。

我的项目基于 grails 框架，它从 3 家不同的书店搜索书籍并给出所有 3 家商店的价格。我在搜索部分时需要帮助。一旦用户键入所需的书，如何直接搜索这些书店。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:16:13.677

您需要提供更多详细信息。通过搜索书店，您是指在数据库中搜索还是像亚马逊等？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:53:37.933

我会查明这些在线书店是否有 API，或者如果您可以选择，请选择**确实**有 API 的在线书店，您可以使用这些 API 进行搜索。例如，亚马逊有一个“产品广告 API”，可用于搜索其目录（请参阅[http://docs.amazonwebservices.com/AWSECommerceService/latest/DG](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG)）。您通常必须注册为会员才能访问这些东西。

一旦你有几个可以通过 API 访问的在线书店，编写一些 grails 代码来调用它们并协调结果就相对容易了。API 通常采用 Web 请求的形式，REST 或 SOAP（例如，参见[Amazon - AnatomyOfaRESTRequest](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/AnatomyOfaRESTRequest.html)）。如果您可以使用简单的 REST，则可以使用 Groovy 的 HTTPBuilder 调用和使用书店的 API Web 服务，或者我相信有几个 Grails 插件（例如[REST Client builder](https://github.com/grails-plugins/grails-rest-client-builder)）。对于 SOAP，请考虑[Grails CXF Client](http://grails.org/plugin/cxf-client) Grails 插件。

您可以逐个搜索 API，或者如果您想更高级，可以尝试使用新的 servlet 3.0 异步功能同时异步调用所有 3 个 API（请参阅如何从 Grails 2.0.x 中使用: [Grails Web Features](http://grails.org/doc/latest/guide/introduction.html#webFeatures) - 滚动到“Servlet 3.0 Async Features”）。您可能需要通过数据库进行协调，并且可能需要通过结果页面上的 AJAX 进行轮询以检查结果何时出现。

所以顺序如下：

1.  用户从页面上的表单向服务器提交搜索请求
2.  服务器创建并保存一个 DB 对象来跟踪请求，异步启动 API 调用（即不会阻止请求），然后返回一个页面给用户。
3.  “待定结果”页面显示给用户，并使用定期 AJAX 更新来检查结果的进度。
4.  同时您的 API 调用正在执行。当它们返回时（希望有结果），它们会更新 DB 对象（或者更好的是相关对象）以存储调用的结果和状态。
5.  最终，您的所有结果都将在数据库中，并且您对正在查询结果的服务器的定期 AJAX 检查将能够将它们返回到页面。它可以等待对 3 家书店的所有调用完成，或者它可以在返回结果时更新页面。
6.  您的 AJAX 调用会更新页面以向用户显示结果。

请注意，如果您的书店没有 API，您可能必须考虑直接从书店网站“网络抓取”结果。这有点困难并且可能非常脆弱，因为网页显然经常变化。我使用 Geb ( [http://www.gebish.org/](http://www.gebish.org/) ) 来自动浏览以及一些简单的字符串匹配来挑选我需要的东西。还记得检查所涉及网站的条款和条件，因为有时特别不允许抓取。

另请注意，以上是完成此类事情的面向服务器的方法。您可以纯粹在客户端（浏览器）上执行此操作，使用 AJAX 调用 Web 服务并通过 JavaScript 进行处理。但我是服务器人:)

# user-interface - 查看图形的一部分

> ID：10117627
> 
> 赞同：1
> 
> 时间：2012-04-12T05:01:48.873
> 
> 标签：user-interface, matlab, matlab-figure, matlab-guide

我做了10000次的模拟，想查看5000-5200之间的部分模拟。我可以使用下面的代码查看它，但 x 轴显示 0-250。我希望 x 轴显示 5000-5200 的确切数字。此外，由于某种原因，轴运行到 250 时，图的末尾似乎还有一个小间隙。我只想查看这个设定时间内的数字，x 轴显示确切的标签，最后没有间隙。

谢谢

```
N=10000;%Number of simulation
P=0.02;
Q = zeros(N,1); %current value of queue
X=zeros(N,1);%simulation data
Ci=0;
L=0.9;
Bu=zeros(N,1);
Bs=30;
Bd1=50;
Bd2=270;
Ti=0;
for Ti=2:N
U=rand(1);
a=log10(U);
b=log10(1-P);
c=(a/b);
d=1+c;   
X(Ti)=round(d);
Ci=Ci+1;
if X(Ti)< (L)*(Bs)
      Bu(Ti)=Bs;
 else  if X(Ti) < (L)*(Bs+Bd1)
    Bu(Ti)=Bs+Bd1;
 else 
    Bu(Ti)=Bs+Bd1+Bd2;    
    end 
end
Ti=Ti+1;
end
plot(X(5000:5200,1),'r');
set (gca,'ylim',[0 400]);
hold on;
plot(Bu(5000:5200,1),'b');
set (gca,'ylim',[0 400]);
hold off 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:23:49.937

Plot 需要两个输入，第一个描述水平轴，第二个描述垂直轴。当您不提供两个输入时，它会计算单个输入的长度（在这种情况下，长度为 5200-5000 = 200），并且它只使用 1 到该长度（在这种情况下为 1:200），就好像它是水平轴变量的值。

我想你想发出命令：

```
plot(5000:5200, X(5000:5200,1), 'r') 
```

通常 Matlab 会调整绘图轴以获得更好的默认视图，因此它可能仅凭借一些默认绘图约定将轴显示到索引 250。`set(gca, 'xlim', [5000 5200])`如果您愿意，也可以类似地使用。

# regex - 在正则表达式中使用括号而不是方括号更好的情况？

> ID：10117628
> 
> 赞同：1
> 
> 时间：2012-04-12T05:02:13.410
> 
> 标签：regex

我正在自学正则表达式。到目前为止，我似乎能够使用方括号（即`[]`）实现我想要的一切，在其他人的代码中我经常看到使用括号，我想知道括号有哪些好的案例/用途。

我可以举一些例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T08:01:19.533

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:04:28.600

括号和方括号在正则表达式中具有完全不同的含义。

括号用于对事物进行分组，通常是为了以后可以使用分组的文本。例如，`(\w+)`匹配一个或多个单词字符（字母、数字或下划线）并保存文本以供以后使用。如何访问它取决于您的编程语言。

非捕获组也是可能的（它们以 开头`(?`），但是它们的使用频率往往要低得多。

方括号表示选择范围，例如`[abc]`与 a、b 或 c 匹配的任何内容。 `[a-z]`匹配任何小写字母。 `[a-zA-Z0-9]`匹配任何小写字母、大写字母或数字。

它们可以一起使用。 `^([a-z]|_)+$`匹配只包含小写字母和下划线的字符串。那样写可能会更好`^[a-z_]+$`。

# iphone - Iphone 应用存档 - 没有这样的文件或目录

> ID：10117629
> 
> 赞同：1
> 
> 时间：2012-04-12T05:02:24.877
> 
> 标签：iphone, ios, xcode, archive, restkit

我几乎准备好发布我的 iphone 应用程序了。我使用 restkit 来使用我的网络服务。当我存档时，它会因以下错误而失败：

**cp：/Users/myusername/Library/Developer/Xcode/DerivedData/project-name-/ArchiveIntermediates/project-name/IntermediateBuildFilesPath/UninstalledProducts/include/RestKit：没有这样的文件或目录**

我将restkit拖放到项目中。它在调试模式下构建并正常工作。我猜它在归档时无法找到 restkit 目录。但我不确定为什么。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:35:49.590

过去我在与自己的框架链接时遇到了麻烦，但我有一个可行的程序。即使我不明白它，它也很有效，所以我像巫毒一样跟随它，而且我不会冒险通过问太多问题来激怒众神。

这是我在你的项目上尝试的（同样，这里部分是巫术）：

1.  导航到项目导航中的 Frameworks 文件夹，选择 RestKit 并使用删除键将其删除。只需删除参考。
2.  使用 Finder，将框架从您第一次得到它的地方（~/Downloads，或另一个项目或任何地方）拖（复制）到您的项目目录中，如果出现提示则替换文件。
3.  回到您的项目中，选择项目，然后选择目标，然后选择构建阶段。
4.  打开链接二进制部分，点击“+”，然后点击对话框底部的“添加其他..”按钮
5.  浏览到您在步骤 2 中复制的框架。

看看你是否可以清理、构建、归档。很容易尝试，没有牲畜受到伤害。希望对你有效。

# verilog - Verliog 中的“x00000x0000x000x”是什么意思？

> ID：10117630
> 
> 赞同：0
> 
> 时间：2012-04-12T05:02:25.097
> 
> 标签：verilog, xilinx

我正在研究 Xilinx 模块，在仿真过程中，我的一根电线取值“x00000x0000x000x”。这意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T05:26:59.637

那是二进制还是十六进制值？

基本上，这意味着您有一条电线总线，其中一些位是`X`（未知的），而其他位是`0`.

如果我看到这个二进制值：`0x0x0x`，它只是意味着位 5,3 和 1 是`0`，位 4,2 和 0 是`X`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:19:00.953

基本上这意味着两个问题：

1.  发出 X 信号的线可能意味着这些线或其驱动程序未正确初始化。如果它们还没有被任何实际数据初始化或者它们没有在设计中使用，则可以忽略。否则，它们应该被修复。

2.  多驱动问题也会导致X。如果x信号是由电线有多个驱动引起的，这些都是错误，必须修复。

# feed - Like Box“显示更多”按钮在另一个选项卡中打开另一个 Like Box

> ID：10117636
> 
> 赞同：1
> 
> 时间：2012-04-12T05:02:55.283
> 
> 标签：feed, facebook-likebox, browser-tab

在点赞框中，当我向下滚动到新闻流的末尾并单击“显示更多”按钮时，它会在新选项卡中打开点赞框。并且不显示较早的新闻。

请帮忙。

# javascript - json 数组 v json 对象 - 优点缺点

> ID：10117637
> 
> 赞同：0
> 
> 时间：2012-04-12T05:03:06.750
> 
> 标签：javascript, html, json

目前我们有一个 AJAX 驱动的站点，它以以下格式返回 JSON 响应：`[{"n":"bob"}, {"n":"jim"}, ..., {"n":"alex"}]`. 基本上是一个 json 对象数组。

但是，我们正在考虑像这样构建它：`[["bob"], ["jim"], ..., ["alex"]]`. 基本上是一个数组数组。

明显的区别是，我们不是通过其属性访问数据，而是通过假定的索引位置（即数组 [0] == 名称）来访问它，但除此之外，我很好奇每个的优点/缺点是什么. 有趣的因素：客户端的性能（构建数据结构和检索其值）、带宽（显然是在更大的数据集或较慢的互联网连接上，比如移动设备）、设计模式/最佳实践、其他人如何设计他们的响应、 ETC...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:16:48.587

*   使用数组中的对象格式时，您可以为每个项目加载更多数据，而不仅仅是`n`.

    ```
    [{
            'name' : 'John',
            //more data about john
    },{
            'name' : 'Joe',
            //more data about joe
    }]
    //myArray[0].name = John 
    ```

*   使用数组时，假定返回的数据是同一种类型。

    ```
    ['John','Joe'...] //all names
    //myArray[0] = John 
    ```

但这一切都归结为您如何解析数据。

* * *

像这样构造数据：

```
[["bob"], ["jim"], ..., ["alex"]] 
```

是完全错误的。为什么将名称放在一个数组中，在一个名称数组中？第二层有什么用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:15:16.790

数组方法将阻止您使用有意义的索引名称，因此我将使用 JSON 对象。您还会发现大多数编程语言都有用于创建 JSON 输出的优秀库。

除非您正在处理非常大的数据集，否则我认为数组方法不会提供任何明显的性能优势。

# python - 为什么我使用 Python 套接字的 HTTP 响应失败？

> ID：10117644
> 
> 赞同：0
> 
> 时间：2012-04-12T05:03:59.087
> 
> 标签：python, http, sockets, webserver, httpresponse

代码：

```
from socket import *
sP = 14000
servSock = socket(AF_INET,SOCK_STREAM)
servSock.bind(('',sP))
servSock.listen(1)

while 1:
  connSock, addr = servSock.accept()
  connSock.send('HTTP/1.0 200 OK\nContent-Type:text/html\nConnection:close\n<html>...</html>')
connSock.close() 
```

当我转到浏览器并输入 localhost:14000 时，我收到错误 101- ERR_CONNECTION_RESET 连接已重置？不知道为什么！我究竟做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:27:31.153

几个错误，有些比其他错误更严重......正如@IanWetherbee 已经指出的那样，你需要在正文前有一个空行。您还应该发送\r\n 而不仅仅是\n。您应该使用`sendall`以避免短发送。最后，您需要在完成发送后关闭连接。

这是上述内容的略微修改版本：

```
from socket import *
sP = 14000
servSock = socket(AF_INET,SOCK_STREAM)
servSock.bind(('',sP))
servSock.listen(1)

while 1:
  connSock, addr = servSock.accept()
  connSock.sendall('HTTP/1.0 200 OK\r\nContent-Type:text/html\r\nConnection:close\r\n\r\n<html><head>foo</head></html>\r\n')
  connSock.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:27:12.903

运行你的代码，我有类似的错误，也不确定它们的起源。但是，您是否考虑过内置 HTTP 服务器，而不是滚动您自己的 HTTP 服务器？查看下面的示例。这也可以支持 POST（必须添加 do_POST 方法）。

**简单的 HTTP 服务器**

```
from BaseHTTPServer import HTTPServer, BaseHTTPRequestHandler

class customHTTPServer(BaseHTTPRequestHandler):
        def do_GET(self):
                self.send_response(200)
                self.send_header('Content-type', 'text/html')
                self.end_headers()
                self.wfile.write('<HTML><body>Hello World!</body></HTML>')
                return 

def main():
        try:
                server = HTTPServer(('',14000),customHTTPServer)
                print 'server started at port 14000'
                server.serve_forever()
        except KeyboardInterrupt:
                server.socket.close() 

if __name__=='__main__':
    main() 
```

# javascript - 两个按钮可随着背景位置的变化而切换，并导致输入

> ID：10117652
> 
> 赞同：0
> 
> 时间：2012-04-12T05:04:55.780
> 
> 标签：javascript, jquery, input, onclick, toggle

如何创建一个 jQuery/javascript 函数来：

1.  将其值插入输入框（男/女）
2.  更改其背景及其兄弟按钮的背景以显示它是否处于活动状态？

这是我的 HTML 开头：

```
<input type="button" class="ts" id="female" onclick="???????????" />
<input type="button" class="ts" id="male"   onclick="???????????" />

<input class="req-string bx long" type="text" id="gender" name="gender" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:18:24.493

这是[一个示例](http://jsfiddle.net/hMheQ/2/)，它将引导您走上正确的道路。它不符合您的要求，但您会明白的。

下面的代码将禁用另一个按钮：如果您单击“女性”，它将禁用“男性”，反之亦然。

```
$(function() {

  $('#female').click(function() {     

    // place text ("male" or "female") in an input 
    $('#gender').val('female');

    $('#female').css({background:'green'});
    $('#male').css({background:'red'});
  });

  $('#male').click(function() {      

    // place text ("male" or "female") in an input 
    $('#gender').val('male');

    // emulates the button being toggled
    $('#female').css({background:'red'});
    $('#male').css({background:'green'});
  });

});​ 
```

# java - 如何说一个 DropDownChoice 来更新它的选择列表？

> ID：10117654
> 
> 赞同：3
> 
> 时间：2012-04-12T05:05:04.017
> 
> 标签：java, ajax, drop-down-menu, wicket

我有 3 个 DropDownChoice COuntry>State>Cities 并且它的更新可以使用 Ajax onchage 方法与 ajax 行为。

如果我想通过 JAVA 而不是 AJAX 设置 3 个值怎么办？我将选定的值映射到每个属性模型。这些值是类中的私有成员：

```
private CountrySel;
private StateSel;
private CitySel; 
```

如果在构造函数中我通过 java 自己设置了这 3 个值，则只有国家/地区被选中，其他 ddc 也不加载数据。我应该调用或覆盖什么方法来让 ddc 通过 JAVA 再次调用 getModel？

生病发布代码。我在这里使用示例进行编码：http: [//www.wicket-library.com/wicket-examples/ajax/choice](http://www.wicket-library.com/wicket-examples/ajax/choice)。

```
package pqlrd.ui;

import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Arrays;
import java.util.Collection;
import java.util.LinkedList;

import org.apache.wicket.ajax.form.AjaxFormChoiceComponentUpdatingBehavior;
import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;
import org.apache.wicket.ajax.form.OnChangeAjaxBehavior;
import org.apache.wicket.markup.html.basic.Label;
import org.apache.wicket.markup.html.form.DropDownChoice;
import org.apache.wicket.markup.html.form.TextField;
import org.apache.wicket.markup.html.panel.Panel;
import org.apache.wicket.model.AbstractReadOnlyModel;
import org.apache.wicket.model.IModel;
import org.apache.wicket.model.LoadableDetachableModel;
import org.apache.wicket.model.Model;
import org.apache.wicket.model.PropertyModel;
import org.apache.wicket.ajax.AjaxRequestTarget;

import com.sun.mail.iap.Response;
import com.sun.org.apache.xpath.internal.operations.Mod;

import pqlrd.domain.Ciudad;
import pqlrd.domain.Estado;
import pqlrd.domain.Pais;
import pqlrd.domain.Sector;

public class PanelDireccion extends Panel {

private TextField tbCalle ;
private TextField tbNumeroC ;
private TextField tbApartamento;
private TextField tbNumeroA ;
private DropDownChoice cmbSector;
private DropDownChoice cmbCiudad;
private DropDownChoice cmbEstado;

private Ciudad cSel;
private Estado pSel;
private Sector sSel;
private Pais paisRD;

public Pais getPaisRD() {
    return paisRD;
}

public void setPaisRD(Pais paisRD) {
    this.paisRD = paisRD;
}

public TextField getTbCalle() {
    return tbCalle;
}

public void setTbCalle(TextField tbCalle) {
    this.tbCalle = tbCalle;
}

public TextField getTbNumeroC() {
    return tbNumeroC;
}

public void setTbNumeroC(TextField tbNumeroC) {
    this.tbNumeroC = tbNumeroC;
}

public TextField getTbApartamento() {
    return tbApartamento;
}

public void setTbApartamento(TextField tbApartamento) {
    this.tbApartamento = tbApartamento;
}

public TextField getTbNumeroA() {
    return tbNumeroA;
}

public void setTbNumeroA(TextField tbNumeroA) {
    this.tbNumeroA = tbNumeroA;
}

public DropDownChoice getCmbSector() {
    return cmbSector;
}

public void setCmbSector(DropDownChoice cmbSector) {
    this.cmbSector = cmbSector;
}

public DropDownChoice getCmbCiudad() {
    return cmbCiudad;
}

public void setCmbCiudad(DropDownChoice cmbCiudad) {
    this.cmbCiudad = cmbCiudad;
}

public DropDownChoice getCmbEstado() {
    return cmbEstado;
}

public void setCmbEstado(DropDownChoice cmbEstado) {
    this.cmbEstado = cmbEstado;
}

public Sector getsSel() {
    return sSel;
}

public void setsSel(Sector sSel) {
    this.sSel = sSel;
}

public List<Estado> getProvincias() {
    return provincias;
}

public void setProvincias(List<Estado> provincias) {
    this.provincias = provincias;
}

public HashMap<Estado, List<Ciudad>> getMunicipios() {
    return municipios;
}

public void setMunicipios(HashMap<Estado, List<Ciudad>> municipios) {
    this.municipios = municipios;
}

public HashMap<Ciudad, List<Sector>> getSectores() {
    return sectores;
}

public void setSectores(HashMap<Ciudad, List<Sector>> sectores) {
    this.sectores = sectores;
}

public Ciudad getcSel() {
    return cSel;
}

public void setcSel(Ciudad cSel) {
    this.cSel = cSel;
}

public Estado getpSel() {
    return pSel;
}

public void setpSel(Estado pSel) {
    this.pSel = pSel;
}

private List<Estado> provincias;
private HashMap<Estado, List<Ciudad>> municipios;
private HashMap<Ciudad, List<Sector>> sectores;

public PanelDireccion(String id) {
    super(id);

    IModel<List<Estado>> mProvincia = new AbstractReadOnlyModel<List<Estado>>(){
        @Override
        public List<Estado> getObject() {
            return  provincias;

        }
    };

    IModel<List<Ciudad>> mMunicipio = new AbstractReadOnlyModel<List<Ciudad>>(){

        @Override
        public List<Ciudad> getObject() {

            return (List<Ciudad>) ((municipios.get(pSel) == null)? Collections.emptyList() :  municipios.get(pSel));

        }
    };

    IModel<List<Sector>> mSector = new AbstractReadOnlyModel<List<Sector>>() {

        @Override
        public List<Sector> getObject() {

            return (List<Sector>) ((sectores.get(cSel)==null) ? Collections.emptyList() : sectores.get(cSel)); 

        }
    }; 

    add(tbCalle= (TextField) new TextField("tbCalle", new Model<String>() ));
    add(tbNumeroC = (TextField) new TextField("tbNumeroC", new Model<String>() )) ;

    add(tbApartamento = (TextField) new TextField("tbApartamento", new Model<String>() )) ;
    add(tbNumeroA = new TextField("tbNumeroA", new Model<String>() ) );

    add(cmbSector = new DropDownChoice("cmbSector", new PropertyModel<Sector>(this, "sSel"), mSector ));
    add(cmbEstado=new DropDownChoice("cmbEstado",new PropertyModel<Estado>(this, "pSel") ,mProvincia)); 
    add(cmbCiudad=new DropDownChoice("cmbCiudad", new PropertyModel<Ciudad>(this, "cSel") ,mMunicipio));

    cmbCiudad.setOutputMarkupId(true);
    cmbSector.setOutputMarkupId(true);

    //cmbCiudad.setOutputMarkupId(true);

    //Pais que voy a traer en este caso solo es RD.
     paisRD = new Pais();

    try{

     paisRD = (Pais) paisRD.getPaisById(70);

    }
    catch (Exception e) {

    }

    //La lista de provincias;
    provincias =  paisRD.getEstados();

     municipios = new HashMap<Estado, List<Ciudad>>();
     sectores = new HashMap<Ciudad, List<Sector>>();

    //Llenar los municipios de cada provincia
    for( Estado e : provincias)
    {

         municipios.put(e, e.getCiudades());

         for(Ciudad c: e.getCiudades())
             sectores.put(c, c.getSectores());

    }

    cmbEstado.add(new AjaxFormComponentUpdatingBehavior("onchange") {

        @Override
        protected void onUpdate(AjaxRequestTarget target) {
            target.add(cmbCiudad);

        }
    });

    cmbCiudad.add(new AjaxFormComponentUpdatingBehavior("onchange") {

        @Override
        protected void onUpdate(AjaxRequestTarget target) {
            target.add(cmbSector);

        }
    });

    }

} 
```

对不起语言。我想要做的是保留 ajax 行为，但是假设我从数据库中查询一个 Direccion(Address) 对象，我想自己选择组合框的值，但这是不可能的，因为这两个依赖的 ddc 没有模型。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:15:52.640

请参阅[http://www.wicket-library.com/wicket-examples/ajax/choice](http://www.wicket-library.com/wicket-examples/ajax/choice)以了解如何执行该任务。要避免 Ajax，请参阅 org.apache.wicket.markup.html.form.DropDownChoice#wantOnSelectionChangedNotifications() javadoc。

# command-line - 单行创建包含内容的文件

> ID：10117655
> 
> 赞同：10
> 
> 时间：2012-04-12T05:05:08.040
> 
> 标签：command-line, cat, nano

操作系统是 Ubuntu。我想`file.txt`在`/home/z/Desktop`文件内容所在的位置创建`some text here`。

第一种也是常用的方法是运行`nano /home/z/Desktop/file.txt`并键入`some text here`。之后，按`ctrl+x`，`y`然后按`Enter`。

第二种方式是运行`cat > /home/z/Desktop/file.txt`，输入并`some text here`按下`Enter``ctrl+c`

我希望我可以运行单行命令以使其更快。我认为`xdotool`可以使用`cat`（第二种方式），但不，它不起作用

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T05:07:18.043

您可以`"echo"`在 bash 中使用。例如：

```
echo "some text here" > file.txt 
```

如果您不想在文件末尾出现换行符，请使用以下`-n`参数：

```
echo -n "some text here" > file.txt 
```

# c# - Lucene.net 搜索

> ID：10117656
> 
> 赞同：0
> 
> 时间：2012-04-12T05:05:12.270
> 
> 标签：c#, lucene.net

我已经使用 lucene.net 创建了一个 lucene 索引，其中大约有 300 个大小为 1mb 的文档现在我正在做我的搜索技术我的搜索输入是我打开一个 1mb 大小的文本文件读取所有文本并作为输入给出这里是我的代码

```
 public void DoClassification(string DocPath, string IndexPath)
    {
        try
        {
            if (File.Exists(DocPath))
            {

                string content = File.ReadAllText(DocPath);

                if (content.Trim() != "")
                {

                    IndexSearcher searcher = new IndexSearcher(FSDirectory.Open(new DirectoryInfo(IndexPath)), false);
                    QueryParser parser = new QueryParser(Lucene.Net.Util.Version.LUCENE_29, "Content", new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_29));
                    BooleanQuery.SetMaxClauseCount(Convert.ToInt32(content.Length) + 500);
                    Query query = parser.Parse(QueryParser.Escape(content.ToLower()));
                    TopDocs docs = searcher.Search(query, searcher.GetIndexReader().MaxDoc());

                    foreach (ScoreDoc DOC in docs.scoreDocs)
                    { 
                        string Tag = searcher.Doc(DOC.doc).Get("Content");

                        break;
                    }

                }

            }
        }
        catch (Exception ex)
        {

            throw;
        }

    } 
```

现在我的问题是，上面的搜索查询对于我想要输入为整个文本文件的搜索类型是否可行？因为当文件很大时需要时间来搜索

谢谢

# android - 在android中使用listview解析json？

> ID：10117659
> 
> 赞同：0
> 
> 时间：2012-04-12T05:05:23.583
> 
> 标签：android, json, android-parser

```
Categorylist = new ArrayList<CategoryModel>();
    try {
        JSONArray jsonArray = new JSONArray(category());
        Log.i(CategoryActivity.class.getName(), "Number of entries "
                + jsonArray.length());
        for (int i = 0; i < jsonArray.length(); i++) {
            JSONObject jsonObject = jsonArray.getJSONObject(i);

            if (jsonObject == null)

                return null; 
```

我尝试了这段代码，但它给出了错误请建议我一个最好的方法来做到这一点

# c# - 如何使用服务器端文件来跟踪必须相互交互的用户？ASP.NET/C#

> ID：10117664
> 
> 赞同：0
> 
> 时间：2012-04-12T05:05:44.470
> 
> 标签：c#, asp.net, visual-studio-2008, http, httpwebrequest

我正在运行 Visual Studio '08 并使用 C# 代码。但是，我正在使用表单，但它是基于浏览器的。我正在使用 StreamReader 和 StreamWriter 将信息读取和写入服务器端文件。情况是井字游戏，所以规则很明确，有9个按钮，当一个按钮被按下时，上面的文字会根据玩家的X或O而变化。游戏是在两个浏览器或标签页上玩的，所以浏览器必须与服务器交互。

我真的很想知道如何通过从服务器端文件读取和写入数据来跟踪每个玩家所采取的行动，以便我可以检查获胜者。我正在将游戏数据保存到一个文本文件中，这就是我正在谈论的服务器端文件。

请保持Visual Studio的环境，这里没有任何插件可以单独用于手动练习。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:27:31.880

使用 MessageBus 发布和订阅消息：[https ://github.com/messagebus/messagebus_csharp_api](https://github.com/messagebus/messagebus_csharp_api)

这是一篇很棒的文章，关于系统如何使用 MessageBus 处理两个玩家通信：[http ://www.ronaldwidha.net/2010/05/31/a-simple-example-of-the- webformsmvp-cross-presenter-messaging/](http://www.ronaldwidha.net/2010/05/31/a-simple-example-of-the-webformsmvp-cross-presenter-messaging/)

# image - tiff lzw 压缩比原始 jpeg 压缩大 10 倍

> ID：10117666
> 
> 赞同：0
> 
> 时间：2012-04-12T05:05:52.580
> 
> 标签：image, compression, imagemagick

我将一些 jpeg 压缩文件转换为 tiff lzw 压缩文件，但令我惊讶的是，它们的大小比原来的 jpeg 大。我使用 imagemagick 的识别工具检查了转换文件的格式，发现它们使用的是 LZW 压缩。

这背后的原因可能是什么？有人有想法吗？

我也尝试过使用 faststone 图像转换器，结果仍然相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:04:10.010

这完全是意料之中和正常的。JPEG 是一种有损转换，它通过接受图像中的一些劣化来允许显着压缩。TIFF LZW 压缩是无损的，因此根据定义，根本不能为了压缩目的而改变图像，极大地限制了它可以达到的程度。此外，LZW 并不是一个特别好的压缩方案，即使是无损压缩也是如此。还有更好的。最常见的是 PNG，但根据图像的类型，还有更好的格式，例如用于双层或图像的 JBIG 或用于自然图像的 JPEG 2000 无损。

# php - 自动更改下拉菜单，html

> ID：10117667
> 
> 赞同：0
> 
> 时间：2012-04-12T05:05:57.340
> 
> 标签：php, html

我必须有 2 个下拉菜单，如下所示：

[下拉 http://img401.imageshack.us/img401/3786/90550627.jpg](http://img401.imageshack.us/img401/3786/90550627.jpg)

Item 菜单有两个值，即“Server”和“Switch”。同时，模型菜单中的值取决于项目菜单中的值。模型菜单中的值是从数据库中调用的。What I want to do is when "Server" is selected, it will call data from server table into the Model menu and when "Switch" is selected, it will call data from switch table. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:15:35.073

让我们举一个简单的例子，我将它用于您想要的相同目的并且它工作得非常好。

***我正在使用它来根据国家下拉列表中的选择填充城市下拉列表，在这里您可以将国家作为项目和城市作为模型***

这是国家下拉菜单：

```
<?php
        $countrylist=mysql_query("SELECT * FROM country ORDER BY name ASC");
        echo "<select name='country' id='country' onchange=\"reload(this.form)\" title='Country e:g; United Kingdom,Pakistan'><option value='0'>Select Country</option>";
        while($clist=mysql_fetch_array($countrylist))
        {
          echo "<option value='$clist[Name]'>$clist[Name]</option>"."<br/>";
        }
        echo "</select>";
 ?> 
```

这是区域下拉列表：

```
<select name="region" id="region" ></select> 
```

现在创建一个名为 crlist.js 的单独文件，并将其包含在具有上述代码的页面中，如下所示：

```
<script  type="text/javascript" src="crlist.js"> </script> 
```

crlist.js 的代码：

```
var request = false;
/*@cc_on @*/
/*@if (@_jscript_version >= 5)
try {
request = new ActiveXObject("Msxml2.XMLHTTP");
} catch (e) {
try {
request = new ActiveXObject("Microsoft.XMLHTTP");
} catch (e2) {
request = false;
}
}
@end @*/
function fillSelect(country,path) {
var url = path+"crlist.php?country=" + country;
request.open("GET", url, true);
request.onreadystatechange = go;
request.send(null);
}

function go() {
if (request.readyState == 4) {
//if (request.status == 200) {

var response = request.responseText;

var list=document.getElementById("region");
            for (i = list.length - 1; i>=0; i--) {
                list.remove(i);
            }
var records=response.split('|');
for (i=1; i<records.length; i++) {
    //alert("rcord="+records[i]);
    var record=records[i].split('*');
    var region=record[0];
    //alert("region="+region);
    var regionid=record[1];
    //alert("regionid="+regionid);
    var x=document.createElement('option');
    //var y=document.createTextNode(region);
    x.text=region;
    //x.value=region;
    //alert(x.text);
   //x.appendChild(y);
   //list.appendChild(x);
   list.options.add(x);
   }
  //}
 }
}

function initCs(path) {

if (!request && typeof XMLHttpRequest != 'undefined') {
request = new XMLHttpRequest();
}
var country=document.getElementById('country');
    country.onchange=function() {

        if(this.value!="Select") {

            var list=document.getElementById("region");
            for (i = list.length - 1; i>=0; i--) {
                list.remove(i);
            }
        //while (list.childNodes[0]) {
        //list.removeChild(list.childNodes[0]);
        //}
        }
        fillSelect(this.value,path);
        //alert(this.value);

    }
//fillSelect(country.value);
} 
```

现在制作一个名为 crlist.php 的单独文件。

crlist.php 的代码：

```
<?php
require_once 'yourconfigfile.php';

$cname = $_GET['country'];

$query="select ID,Name from city where CountryCode=(select code from country where name='$cname') Order By Name ASC";
$res = mysql_query($query) or die(mysql_error());
while($region = mysql_fetch_array($res)){
    echo "<option value='".$region['Name']."'>".$region['Name']."</option>";
}       
?> 
```

现在在具有下拉菜单的页面上添加以下脚本：

```
<script  type="text/javascript" src="crlist.js"> </script>
<script>
$(document).ready(function() {

    initCs("");

});
</script> 
```

这是我自己的脚本，我假设您已经创建了国家和地区表。但是您需要根据您的数据库结构调整查询和上述代码。

参考我的回答：[Cascade Dropdown List using jQuery/PHP](https://stackoverflow.com/questions/7137357/cascade-dropdown-list-using-jquery-php/7137507#7137507)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:09:49.440

您应该有一个 ajax 调用来更新选择框。

项目选择框上的 JavaScript 函数调用 ajax。

供您参考：[http ://remysharp.com/2007/01/20/auto-populating-select-boxes-using-jquery-ajax/](http://remysharp.com/2007/01/20/auto-populating-select-boxes-using-jquery-ajax/)

# c# - 方法调用遇到问题并返回正确的值

> ID：10117669
> 
> 赞同：1
> 
> 时间：2012-04-12T05:06:09.773
> 
> 标签：c#, arrays, sorting, methods, icomparable

有问题的方法调用在最后的这个 writeline 调用中

```
Console.WriteLine("Taxpayer # {0} SSN: {1}, Income is {2:c}, Tax is {3:c}", i + 1, taxArray[i].SSN, taxArray[i].grossIncome, taxRates.CalculateTax(taxArray[i].grossIncome)); 
```

这是该方法所在的费率类

```
public class Rates
{
    // Create a class named rates that has the following data members: 
    int     incLimit;
    double lowTaxRate;
    double highTaxRate;

    // use read-only accessor
    public int IncomeLimit
    { get { return incLimit; } }
    public double LowTaxRate
    { get { return lowTaxRate; } }
    public double HighTaxRate
    { get { return highTaxRate; } }

    //A class constructor that assigns default values 
    public void assignRates()
    {
        incLimit = 30000;
        lowTaxRate = .15;
        highTaxRate = .28;
    }
    //A class constructor that takes three parameters to assign input values for limit, low rate and high rate.
    public void assignRates(int lim, double low, double high)
    {
        incLimit = lim;
        lowTaxRate = low;
        highTaxRate = high;
    }
    //  A CalculateTax method that takes an income parameter and computes the tax as follows:
    public int CalculateTax(int income)
    {

        int taxOwed;
        //  If income is less than the limit then return the tax as income times low rate.
        if (income < incLimit)
            taxOwed = Convert.ToInt32(income * lowTaxRate); 
        //  If income is greater than or equal to the limit then return the tax as income times high rate.
        else 
            taxOwed = Convert.ToInt32(income * highTaxRate);

        return taxOwed;
    } 
```

现在，如果我在初始化以下变量时将一个值粘贴到它们中，我可以获得一个返回值，但如果我将它们保留为默认值，我总是从 writeline 中得到 0。

```
int     incLimit;
double lowTaxRate;
double highTaxRate; 
```

以防万一您需要查看其他内容，剩下的就在这里。

我也有关于排序的问题，我认为它不能正常工作，因为我需要它按 taxOwed 金额排序，但目前是 0 和我的问题。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Assignment5_2
{

public class Rates
{
    // Create a class named rates that has the following data members: 
    int     incLimit;
    double lowTaxRate;
    double highTaxRate;

    // use read-only accessor
    public int IncomeLimit
    { get { return incLimit; } }
    public double LowTaxRate
    { get { return lowTaxRate; } }
    public double HighTaxRate
    { get { return highTaxRate; } }

    //A class constructor that assigns default values 
    public void assignRates()
    {
        incLimit = 30000;
        lowTaxRate = .15;
        highTaxRate = .28;
    }
    //A class constructor that takes three parameters to assign input values for limit, low rate and high rate.
    public void assignRates(int lim, double low, double high)
    {
        incLimit = lim;
        lowTaxRate = low;
        highTaxRate = high;
    }
    //  A CalculateTax method that takes an income parameter and computes the tax as follows:
    public int CalculateTax(int income)
    {

        int taxOwed;
        //  If income is less than the limit then return the tax as income times low rate.
        if (income < incLimit)
            taxOwed = Convert.ToInt32(income * lowTaxRate); 
        //  If income is greater than or equal to the limit then return the tax as income times high rate.
        else 
            taxOwed = Convert.ToInt32(income * highTaxRate);

        return taxOwed;
    }

}  //end class Rates

// Create a class named Taxpayer that has the following data members:
public class Taxpayer : IComparable
{
    //Use get and set accessors.
    string SSN
    { set; get; }
    int grossIncome
    { set; get; }
    int taxOwed
    { set; get; }

    int IComparable.CompareTo(Object o)
    {
        int returnVal;
        Taxpayer temp = (Taxpayer)o;
        if (this.taxOwed > temp.taxOwed)
            returnVal = 1;
        else if (this.taxOwed < temp.taxOwed)
            returnVal = -1;
        else returnVal = 0;

        return returnVal;

    }  // End IComparable.CompareTo

    public static void GetRates()
    {
        //  Local method data members for income limit, low rate and high rate.

        int incLimit;
        double lowRate;
        double highRate;
        string userInput;
        Rates rates = new Rates();
        //  Prompt the user to enter a selection for either default settings or user input of settings.
        Console.Write("Would you like the default values (D) or would you like to enter the values (E)?:  ");
        /*   If the user selects default the default values you will instantiate a rates object using the default constructor
        * and set the Taxpayer class data member for tax equal to the value returned from calling the rates object CalculateTax method.*/
        userInput = (Console.ReadLine());
        if (userInput == "D" || userInput == "d")
        {

            rates.assignRates();
        } // end if
        /*  If the user selects to enter the rates data then prompt the user to enter values for income limit, low rate and high rate, 
         * instantiate a rates object using the three-argument constructor passing those three entries as the constructor arguments and 
         * set the Taxpayer class data member for tax equal to the valuereturned from calling the rates object CalculateTax method. */
        else if (userInput == "E" || userInput == "e")
        {
            Console.Write("Please enter the income limit: ");
            incLimit = Convert.ToInt32(Console.ReadLine());
            Console.Write("Please enter the low rate: ");
            lowRate = Convert.ToDouble(Console.ReadLine());
            Console.Write("Please enter the high rate: ");
            highRate = Convert.ToDouble(Console.ReadLine());
            //Rates rates = new Rates();
            rates.assignRates(incLimit, lowRate, highRate);
        }
        else Console.WriteLine("You made an incorrect choice");
    }

    static void Main(string[] args)
    {

        Taxpayer[] taxArray = new Taxpayer[5];
        Rates taxRates = new Rates();
        //  Implement a for-loop that will prompt the user to enter the Social Security Number and gross income.
        for (int x = 0; x < taxArray.Length; ++x)
        {
            taxArray[x] = new Taxpayer();
            Console.Write("Please enter the Social Security Number for taxpayer {0}:  ", x + 1);
            taxArray[x].SSN = Console.ReadLine();

            Console.Write("Please enter the gross income for taxpayer {0}:  ", x + 1);
            taxArray[x].grossIncome = Convert.ToInt32(Console.ReadLine());
            taxArray[x].taxOwed = taxRates.CalculateTax(taxArray[x].grossIncome);

        }

        Taxpayer.GetRates();

        //  Implement a for-loop that will display each object as formatted taxpayer SSN, income and calculated tax.
        for (int i = 0; i < taxArray.Length; ++i)
        {
            Console.WriteLine("Taxpayer # {0} SSN: {1}, Income is {2:c}, Tax is {3:c}", i + 1, taxArray[i].SSN, taxArray[i].grossIncome, taxArray[i]);//taxRates.CalculateTax(taxArray[i].grossIncome));

        } // end for 
        //  Implement a for-loop that will sort the five objects in order by the amount of tax owed 
        Array.Sort(taxArray);
        Console.WriteLine("Sorted by tax owed");
        for (int i = 0; i < taxArray.Length; ++i)
        {
            Console.WriteLine("Taxpayer # {0} SSN: {1}, Income is {2:c}, Tax is {3:c}", i + 1, taxArray[i].SSN, taxArray[i].grossIncome, taxRates.CalculateTax(taxArray[i].grossIncome));

        }
    }  //end main

} //  end Taxpayer class

}  //end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:25:46.680

问题是您没有调用设置默认费率的代码。这段代码：

```
//A class constructor that assigns default values 
public void assignRates()
{
    incLimit = 30000;
    lowTaxRate = .15;
    highTaxRate = .28;
} 
```

虽然评论为“构造函数”不是一个。它永远不会被调用或运行。由于您的类称为 Rates，因此您需要一个名为 Rates 的默认构造函数：

```
public Rates()
{
    // assign the default rates in your constructor
    assignRates();
} 
```

# ruby - 网络驱动程序。按坐标单击 Canvas 元素

> ID：10117677
> 
> 赞同：2
> 
> 时间：2012-04-12T05:06:50.167
> 
> 标签：ruby, canvas, selenium, webdriver

我的页面上有画布元素，我想点击它的某些部分。我知道，我必须使用 ActionBuilder 来执行此操作，所以我尝试了以下代码：

```
element = driver.find_element(:xpath, canvas_xpath)
action.move_to(element, 100, 100).click.perform 
```

但是此代码仅单击画布元素的中心，并且不以任何方式移动鼠标。

有没有其他可能的方法将鼠标移动到某个坐标？（不提 AutoIT 脚本——我在 Linux 下开发）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T13:44:36.713

我在 IE 中遇到了同样的问题。ShockwaveNN 的代码适用于 Firefox 和 Chrome。我认为问题在于元素中间的“点击”点击。以下是 action_builder.rb 中的文档：

```
 #
  # Clicks in the middle of the given element. Equivalent to:
  #
  #   driver.action.move_to(element).click
  #
  # When no element is passed, the current mouse position will be clicked.
  #
  # @example Clicking on an element
  #
  #    el = driver.find_element(:id, "some_id")
  #    driver.action.click(el).perform
  #
  # @example Clicking at the current mouse position
  #
  #    driver.action.click.perform
  #
  # @param [Selenium::WebDriver::Element] element An optional element to click.
  # @return [ActionBuilder] A self reference.
  # 
```

根据这个和我的结论，应该只是在两行中执行这些操作，例如：

```
element = driver.find_element(:xpath, canvas_xpath)
driver.action.move_to(element, 100, 100).perform
driver.action.click.perform 
```

或者

```
element = driver.find_element(:xpath, canvas_xpath)
driver.action.move_to(element).perform
driver.action.move_by(100, 100).click.perform 
```

可悲的是，这些都不起作用（在 IE 中对我来说）：（

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T20:17:37.237

你试过了`action.move_to(element).move_by(100, 100).click.perform`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T00:39:20.893

点击发生在目标元素的中心（参见评论 3 和 5 [http://code.google.com/p/selenium/issues/detail?id=3578](http://code.google.com/p/selenium/issues/detail?id=3578)）

命令：[http](http://selenium.googlecode.com/svn/trunk/rb/lib/selenium/webdriver/remote/commands.rb) : //selenium.googlecode.com/svn/trunk/rb/lib/selenium/webdriver/remote/commands.rb ActionBuilder：[http ://selenium.googlecode.com/svn/trunk/rb/lib/selenium /webdriver/common/action_builder.rb](http://selenium.googlecode.com/svn/trunk/rb/lib/selenium/webdriver/common/action_builder.rb)

# php - 无法显示 SQL 查询结果

> ID：10117679
> 
> 赞同：0
> 
> 时间：2012-04-12T05:07:09.260
> 
> 标签：php, mysql, sql

```
<?php
include "config.php";

$query = "SELECT SUM(total) FROM sales WHERE date = CONCAT(DATE_SUB(curdate(), INTERVAL 2 DAY),' ','00:00:00')";

$result = mysql_query($query);
$row = mysql_fetch_array($result);
echo $row['total'];

echo mysql_error();
?> 
```

我也尝试过在没有数组的情况下回显 $row 变量，它会在屏幕上显示“Array”。基本上查询的结果应该输出一个数字，而目前没有这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T05:08:42.733

因为是总数之和，所以不再称为`$row['total']`。

尝试`$row[0]`

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:44:01.957

首先，结果列确实有一个明确的名称，所以你应该先命名它：

`$query = "SELECT SUM(total) as total FROM sales WHERE ...`

您应该使用引号来引用该列： `$row["total"]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T05:09:48.167

首先将您的查询更改为此

```
$query = "SELECT SUM(total) as total FROM sales WHERE date = CONCAT(DATE_SUB(curdate(), INTERVAL 2 DAY),' ','00:00:00')"; 
```

利用

```
mysql_fetch_assoc() 
```

代替

```
mysql_fetch_array() 
```

# c# - LINQ to Entities 无法识别方法“Int32 ToInt32(System.Object)”方法，并且该方法无法转换为存储表达式

> ID：10117681
> 
> 赞同：15
> 
> 时间：2012-04-12T05:07:29.230
> 
> 标签：c#, linq, casting, int

这是我正在尝试做的事情：

```
public List<int> GetRolesForAccountByEmail(string email)
{
    var account = db.Accounts.SingleOrDefault(a => a.Email == email);
    if (account == null) return new List<int>();

    return db.AccountRoles.Where(a => a.AccountId == account.AccountId).Select(a => Convert.ToInt32(a.RoleId)).ToList();
} 
```

`List<int?>`我不得不转换为 Int32，因为当方法要返回a 时我无法返回 a `List<int>`。

关于如何解决这个简单问题的任何建议？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-12T05:34:47.357

而不是这个：

```
Select(a => Convert.ToInt32(a.RoleId)) 
```

做这个：

```
Select(a => a.RoleId.Value) 
```

原因在错误描述中；当您通过 IQueryable 执行这些查询时，选择器中使用的方法必须是可以转换为 SQL 查询或函数的东西。在这种情况下`Convert.ToInt32()`不是这样的方法。不过，对于允许的`int`字段，使用 .NET属性确实有效。`null``.Value`

`RoldId`请注意，如果您的is ，这将不起作用`null`。你会得到一个`InvalidOperationException`. 如果支持字段为空，您可能希望返回一个设置值：

```
Select(a => a.RoleId.HasValue ? a.RoleId.Value : int.MinValue) 
```

如果有，这将返回值，`int.MinValue`如果没有。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T07:05:16.413

使用这个： Select(a => (int)a.RoleId)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-30T15:29:06.957

尝试从 db.Accounts 中获取 List 对象并执行此操作。这个对我有用。

```
public List<int> GetRolesForAccountByEmail(string email)
{
    var account = db.Accounts.SingleOrDefault(a => a.Email == email);
    if (account == null) return new List<int>();
    return db.AccountRoles.Where(a => a.AccountId == account.AccountId).Select(a => Convert.ToInt32(a.RoleId)).ToList();
} 
```

而不是这个，试试这个..

```
public List<int> GetRolesForAccountByEmail(string email)
    {
    var account = db.Accounts.SingleOrDefault(a => a.Email == email);
    if (account == null) return new List<int>();
    List<AccountRoles> accountRoles= db.AccountRoles.ToList<AccountRoles>();
    return accountRoles.Where(a => a.AccountId == account.AccountId).Select(a => Convert.ToInt32(a.RoleId)).ToList();
    } 
```

# jpa - 无法使用 @PersistenceContext 注入 RESOURCE_LOCAL 容器管理的 EntityManager

> ID：10117687
> 
> 赞同：13
> 
> 时间：2012-04-12T05:08:12.313
> 
> 标签：jpa, jakarta-ee, jta

我正在使用 JBoss AS 7.1.1 并且能够配置新的 JTA 数据源并将其连接到我的 EJB 使用

```
@PersistenceContext(unitName="TestPU")
private EntityManager entityManager; 
```

当我尝试使用 RESOURCE_LOCAL PersistenceUnit 时，我收到错误消息，说我无法使用 @PersistenceContext 注入 RESOURCE_LOCAL PU。

我已将我的 persistence.xml 配置如下：

```
<persistence-unit name="TestPU" transaction-type="RESOURCE_LOCAL">
      <provider>org.hibernate.ejb.HibernatePersistence</provider>
      <properties>   
    <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
        <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/xy"/>
        <property name="javax.persistence.jdbc.user" value="root"/>
        <property name="javax.persistence.jdbc.password" value="blah"/>        
        <property name="hibernate.hbm2ddl.auto" value="update" />       
      </properties> 
</persistence-unit> 
```

在我的 DAO 中，

```
@Stateless
public class UserDAO {
    @PersistenceContext(unitName="TestPU")
    private EntityManager entityManager;

} 
```

当我在 AS 7.1.1 上部署我的应用程序时，我收到以下错误。

```
JBAS011428: Cannot inject RESOURCE_LOCAL container managed EntityManagers using @PersistenceContext
    at org.jboss.as.ee.component.deployers.ModuleJndiBindingProcessor$1.handle(ModuleJndiBindingProcessor.java:169)
    at org.jboss.as.ee.component.ClassDescriptionTraversal.run(ClassDescriptionTraversal.java:54)
    at org.jboss.as.ee.component.deployers.ModuleJndiBindingProcessor.processClassConfigurations(ModuleJndiBindingProcessor.java:162)
    at org.jboss.as.ee.component.deployers.ModuleJndiBindingProcessor.deploy(ModuleJndiBindingProcessor.java:155)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more 
```

将 RESOURCE_LOCAL PU 与 @PersistenceContext 一起使用的任何解决方案？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-12T05:48:40.453

**JTA：**在 Java EE 环境中，事务由容器管理，默认情况下由其`JTA`事务管理。您可以通过查找或注入来获取实体管理器。

**RESOURCE_LOCAL ：**在 Java SE 中，应用程序必须明确管理事务，资源本地事务是本机事务。您必须创建`EntityManagerFactory`& 然后可以从中创建实体管理器。

当您在应用程序服务器中部署它时，将persistence.xml 中的更改`transaction-type`为`JTA`。

# cassandra - 如何将jsp连接到cassandra 1.0.8？

> ID：10117688
> 
> 赞同：0
> 
> 时间：2012-04-12T05:08:16.157
> 
> 标签：cassandra

我计划使用 jsp 和 cassandra 进行项目我需要知道在 jsp 和 cassandra 之间建立连接要遵循哪些步骤？jsp 中的示例连接代码真的很有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:16:30.247

[您可以在此处](http://wiki.apache.org/cassandra/ClientOptions)查看官方 Cassandra Java 选项

在 JSP 中，您可以使用 scriptlet 嵌入 java 代码。

# delphi - 向所有连接的客户端发送命令

> ID：10117691
> 
> 赞同：6
> 
> 时间：2012-04-12T05:08:38.997
> 
> 标签：delphi, tcp, indy

我有一个 TIdHttpServer 我必须保持连接打开才能将一些命令发送回客户端。当我按下按钮并向所有连接的客户端发送命令时，我想进行迭代。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T05:25:10.077

您可以使用该`Contexts`属性来获取客户端，然后使用`IOHandler`每个客户端的 发送消息。

```
Var
  Clients : TList;
  i : integer;
begin

  if not Assigned(IdTCPServer1.Contexts) then exit;

  Clients:=IdTCPServer1.Contexts.LockList;
  try
    for i := 0 to Clients.Count-1 do
      try
        TIdContext(Clients[i]).Connection.IOHandler.Write(LBuffer);//LBuffer is a TBytes with the data to send
      except
        ...
      end;
  finally
    IdTCPServer1.Contexts.UnlockList;
  end;

end; 
```

# python - 从 .BAT 文件运行 Python 脚本，以 .BAT 文件名作为输入

> ID：10117693
> 
> 赞同：0
> 
> 时间：2012-04-12T05:08:53.093
> 
> 标签：python, windows, file, batch-file

我有一个 Python 脚本 (test1.py) 我需要使用一个 bat 文件 (render.bat) 运行。

问题一：

首先，我的 test1.py 中有一个定义，它总是无法运行，什么也没发生。有人可以解释为什么吗？

```
import os
def test01 :
   os.system('explorer') 
```

并在 bat 文件中：

```
python c:/test01.py 
```

但是一旦我删除了def它就起作用了。我只是想知道为什么会这样。

问题2：

如何将 render.bat 中的“render”字符串作为我的 python 脚本的字符串输入，以便我可以运行类似：

```
import os
def test1(input) :
   os.system("explorer " + input) 
```

那么“输入”是从 .BAT 文件名中获取的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:21:13.517

1）你必须实际`call`的功能来完成你的任务。

2)`%0`指运行脚本。因此创建一个`test.bat file`like

```
@ echo off
echo %0 
```

输出 =`test.bat`

您可以从输出中删除`.bat`扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:18:09.810

1.  除非您调用它们，否则函数实际上不会做任何事情。尝试将其放在`test01()`脚本的末尾。

2.  `%0`将为您提供调用的批处理文件的*全*名，包括`.bat`. 在 Python 中剥离它可能比在批处理文件中更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:19:05.133

**问题1：** python中的关键字def定义了一个函数。但是，要使用函数，您必须显式调用它，即

```
import os
def test01(): # do not forget ()
   os.system('explorer')

test01() # call the function 
```

# mysql - MySQL如何处理庞大的数据库？

> ID：10117697
> 
> 赞同：0
> 
> 时间：2012-04-12T05:09:31.737
> 
> 标签：mysql, database, performance

例如：

假设我的数据库有 1 个字段所在的表

**id、first_name（VARCHAR 100 个字符）、last_name（VARCHAR 100 个字符）、about（VARCHAR 10,000 个字符）**

现在假设数据库有 100 Gigs 大。

在只有 4 Gigs 内存的机器上随机访问会是什么样子？

每次查询都会花费恒定的时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:28:31.583

如果您搜索名字并且它没有被索引，服务器将读取表中的每一行并将其与 where 子句进行比较。由于检索结果所需的时间取决于行的位置，因此该查询可能会在时间上发生巨大变化。例如，名字“a”将很快找到，而名字“z”将花费更长的时间。本质上，您正在对数据库进行线性/顺序访问。

如果名字上有索引 MySQL 在列上构建一个树。在搜索中使用树时效率很高。基本上查找值 'a' 和 'z' 应该采取相同数量的操作，因为您正在进行二进制搜索。请注意，我说的是操作。

现在有一种方法可以保证查询将始终在相同的时间内执行。请记住，虽然数据库是内存密集型的，但大多数人忽略了数据库确实绑定到磁盘 io 的事实。这些因素使您很难保证执行时间始终是可预测的和恒定的。但是，您可以确保使用的操作数量保持优化。

只是另一件事，虽然索引加快了读取速度，但它们却减慢了写入速度。所以索引是一把双刃剑。仅索引您真正需要的内容。

# android - 在mapview android中显示动态标题

> ID：10117704
> 
> 赞同：0
> 
> 时间：2012-04-12T05:10:15.573
> 
> 标签：android

我通过从 api 的值动态使用 for 循环在 mapview 中显示多个点，并且我得到了精确点，但是我无法显示从用于获取标题的 api 获得的多个标题，但我正在显示最后一个在每一个精确点上一次又一次。这是我的代码。请帮忙。

```
for(int i = 0;i<adapt_objgps.latitude_array.length;i++){
    System.out.println("valud oer values:::" +adapt_objgps.latitude_array[1]);
    lat = adapt_objgps.latitude_array[i];
    longit = adapt_objgps.longitude_array[i];
    title = adapt_objgps.title_array[i];
    address = adapt_objgps.address_array[i];

    total = lat+","+longit;
    System.out.println("value of total:::" +total);
    System.out.println("value of title:::"+title);

    mapview = (MapView) findViewById(R.id.mapView);
    mapview.setBuiltInZoomControls(true);

    List<Overlay> mapOverlays = mapview.getOverlays();

    Drawable drawable = myrefgps.getResources().getDrawable(R.drawable.mark_red);
    HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable);

    double dLat = Double.parseDouble(lat) *1E6;
    double dLongotitue =Double.parseDouble(longit) *  1E6;

    int iLat = (int) dLat;
    int iLongtitue = (int) dLongotitue;

    point = new GeoPoint(iLat, -iLongtitue);

    System.out.println("point length::" +point);
    System.out.println("point length::" +title);
    System.out.println("point length::" +address);

    OverlayItem overlayitem = new OverlayItem(point, title,address);
    itemizedoverlay.addOverlay(overlayitem);

    mapOverlays.add(itemizedoverlay);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:55:51.730

刚刚重新排列您的代码现在尝试并请告诉::

```
mapview = (MapView) findViewById(R.id.mapView);
mapView.setBuiltInZoomControls(true);
mapView.displayZoomControls(true);
List<Overlay> mapOverlays = mapView.getOverlays();  
Drawable drawable = myrefgps.getResources().getDrawable(R.drawable.mark_red);
for(int i = 0;i<adapt_objgps.latitude_array.length;i++){
    double dLat = Double.parseDouble(adapt_objgps.latitude_array[i]) *1E6;
    double dLongotitue =Double.parseDouble(adapt_objgps.longitude_array[i]) *  1E6;
    int iLat = (int) dLat;
    int iLongtitue = (int) dLongotitue;
    HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable);
    GeoPoint point = new GeoPoint(iLat, -iLongtitue);
    OverlayItem overlayitem = new OverlayItem(point, adapt_objgps.title_array[i],adapt_objgps.address_array[i]);
    itemizedoverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedoverlay);
} 
```

# java - 我在哪里可以找到这个 jar：commons-csv 0.1-524170

> ID：10117705
> 
> 赞同：1
> 
> 时间：2012-04-12T05:10:18.210
> 
> 标签：java, csv, download

我正在做一个需要的项目`commons-csv v0.1-524170`，我有一个 commons-csv 网站的链接： http: [//commons.apache.org/sandbox/csv/](http://commons.apache.org/sandbox/csv/)，但我找不到那个版本。

我需要它的确切版本`0.1-524170`，我在哪里可以得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T05:59:12.820

他们的网站 (http://commons.apache.org/csv/) 说他们还没有发布，所有可用的构建都是每晚的。因此，除非您愿意生活在最前沿，否则依赖它并不是一个好主意。

我建议使用一些最近的构建并进行集成测试。

如果您确实需要该版本，您可以从 subversion 中签出该版本并自己构建：svn checkout -r 524170 [http://svn.apache.org/repos/asf/commons/proper/csv/trunk](http://svn.apache.org/repos/asf/commons/proper/csv/trunk) commons-csv

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:10:37.867

根据[文档](http://commons.apache.org/csv/downloads.html)，目前没有官方下载，并且在 CSV 移出沙盒之前不会下载。

这不会阻止您从 Apache 的 Nexus 存储库中检索开发快照修订：

*   [https://repository.apache.org/index.html#nexus-search;gav~org.apache.commons~commons-csv~~~](https://repository.apache.org/index.html#nexus-search;gav~org.apache.commons~commons-csv~~~)
*   [https://repository.apache.org/content/groups/snapshots/org/apache/commons/commons-csv/1.0-SNAPSHOT/](https://repository.apache.org/content/groups/snapshots/org/apache/commons/commons-csv/1.0-SNAPSHOT/)

如果您只想要一个检索最新快照修订版的下载 URL：

*   [https://repository.apache.org/service/local/artifact/maven/redirect?r=snapshots&g=org.apache.commons&a=commons-csv&v=1.0-SNAPSHOT&e=jar](https://repository.apache.org/service/local/artifact/maven/redirect?r=snapshots&g=org.apache.commons&a=commons-csv&v=1.0-SNAPSHOT&e=jar)

总之，没有 0.1 版本的迹象......看起来如果你真的需要它，你必须从源代码构建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:20:55.007

您可以从[Commons CSV](http://commons.apache.org/csv)下载相同的内容。

# android - Android createNewFile 返回 false

> ID：10117706
> 
> 赞同：0
> 
> 时间：2012-04-12T05:10:20.270
> 
> 标签：android, file

我想在 Android 中创建一个新文件：

```
File file = new File(getFilesDir(), "filename");
if (file.exists())
  file.delete();
file.createNewFile(); 
```

但是 file.createNewFile() 总是返回 false。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:13:07.863

我相信如果您要使用`Context.openFileInput(filename)`，它将为您处理文件创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:16:27.053

从 Android[文件文档](http://developer.android.com/reference/java/io/File.html#createNewFile%28%29)：

> 根据存储在此文件中的路径信息，在文件系统上创建一个新的空文件。如果创建文件，则此方法返回 true，如果文件已存在，则返回 false。请注意，即使文件不是文件，它也会返回 false（例如，因为它是目录）。

您需要调用[FileOutputStream Context.openFileOutput(String,int)](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)方法。

```
FileOutputStream out=openFileOutput("file.txt",MODE_PRIVATE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:16:35.310

如果`"filename"`是非空目录，`file.delete()`则不会为您删除目录，因此存在此逻辑问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T05:29:39.777

```
 public static File getOutputMediaFile(int type) {
    // To be safe, you should check that the SDCard is mounted
    // using Environment.getExternalStorageState() before doing this.

    File mediaStorageDir = new File(
            Environment
                    .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
            "MyCameraApp");
    // This location works best if you want the created images to be shared
    // between applications and persist after your app has been uninstalled.

    // Create the storage directory if it does not exist
    if (!mediaStorageDir.exists()) {
        if (!mediaStorageDir.mkdirs()) {
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
            .format(new Date());
    File mediaFile;
    if (type == MEDIA_TYPE_IMAGE) {
        mediaFile = new File(mediaStorageDir.getPath() + File.separator
                + "IMG_" + timeStamp + ".jpg");
    } else if (type == MEDIA_TYPE_VIDEO) {
        mediaFile = new File(mediaStorageDir.getPath() + File.separator
                + "VID_" + timeStamp + ".mp4");
    } else {
        return null;
    }

    return mediaFile;
} 
```

# node.js - pdf kit可以从url保存图像吗？

> ID：10117708
> 
> 赞同：7
> 
> 时间：2012-04-12T05:10:31.210
> 
> 标签：node.js, pdfkit

我有一个 node.js 应用程序，我在其中使用 pdfkit 生成 pdf 文档。我希望能够在 pdf 中包含来自 url 的图像。我无法将图像保存到文件系统，因为我的运行时环境是只读的，并且 pdf 工具包似乎可以从文件系统目录中找到要嵌入的图像。有没有办法可以使用 pdf 工具包中的 url 嵌入图像？

* * *

[在这里](https://github.com/kimenye/pdfkit)。这个人修改了 pdfkit 以包含该功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-18T21:37:43.020

PDFKit 现在支持将缓冲区`doc.image`而不是文件名传递给方法。请参阅[此](https://github.com/devongovett/pdfkit/commit/f20e777dee3b259daca1a9096201124199e94c76)提交。因此，您可以按照其他答案的建议进行操作，自己从 URL 下载图像，然后将缓冲区直接传递给 PDFKit，而不是先将其保存到文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T18:34:42.820

你可以使用http.get：

```
 http.get('YOUR URL TO GET THE IMAGE').on('response', function(res)
    res.setEncoding('binary');
    res.on('data', function(chunk){
       buffer += chunk;
    });
    res.on('end', function(){

    fs.writeFile('PATH TO SAVE IMAGE', buffer, 'binary', function (err) {
        if (err){
           throw err;
        }
        doc = new PDFDocument({ size: 'LETTER or any other size pdfkit offer' });
        doc.image('PATH TO SAVE IMAGE', 0, 0, { fit: [WIDTH, HEIGHT] })
        .fontSize(10).text('text 1', 100, 170)
        .fontSize(16).text('text 2', 60, 120)

    }); //After file is download and was write into the HD will use it

}).end(); //EO Downloading the file 
```

# exponentiation - 通过平方取幂如何更快？

> ID：10117709
> 
> 赞同：6
> 
> 时间：2012-04-12T05:10:32.803
> 
> 标签：exponentiation

假设你想计算`5^65537`而不是乘数`5` `65537`，建议这样做`((5^2)^16)*5`。这导致 16 次平方和 1 次乘法。
但我的问题是你不是通过平方非常大的数字来补偿平方的次数吗？当您深入到计算机中的基本位乘法时，这如何更快。
看完评论，我有这样的疑问：

```
 How is the cost of each multiplication not dependant on the size. because when
multiplying the number of bits of the multiplier will increase and this will increase the 
number of additions and the number of left shifts. 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T05:14:49.630

计算乘法运算：

```
5^65537 = 65537 multiplications
((5^2)^16)*5 = (2 + 16 + 1) = 19 multiplications. 
```

从中可以看出，尽管乘法对更大的数字起作用，但工作量要少得多。该算法称为[平方和乘法。](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)

在实践中，需要像这样计算大量数字的密码系统使用一种称为[模幂](http://en.wikipedia.org/wiki/Modular_exponentiation)的技术来避免大量中间数字。

# c - Bison 令牌值被覆盖 - c 内存问题？

> ID：10117710
> 
> 赞同：0
> 
> 时间：2012-04-12T05:10:45.820
> 
> 标签：c, memory-management, malloc, bison, flex-lexer

好的，我在 Bison .l 文件中有以下代码。顺便说一句，我是 c 的新手。

```
exp: TK_SLIT    // TK_SLIT is a string literal token

      /* assigns the type to the nonterminal exp */
      $$ ->type = (char *) malloc (strlen ("string") + 1);  /* allocates space */
      strcpy ($$->type,"string");  /* puts value in there */ 
      printf ("%s\n",$$->type);

      printf ("The value of TK_SLIT is - %s\n",$1); 
```

我发现“分配类型”代码块（包括注释在内的 4 行）覆盖了内存中 TK_SLIT（$1）的值。TK_SLIT 的值是从我的扫描仪 FLEX 中获取的。

我知道代码块导致了问题，因为如果我注释掉“分配类型”代码块，那么我的 TK_SLIT 令牌值打印得很好。否则会变成乱码。

## 我的malloc有问题吗？为什么它会覆盖我的令牌值？这是一个野牛问题，它没有保护我在内存中的令牌值吗？

好的，我的工会如下：

```
%union
{

    int intbison;
    char *charbison; // used for input
    char *boolbison;
    int voidbison;
    charlist *charlistbison;
    arraylist *arraylistbison;
    expnode *expnodebison;
} 
```

* * *

这也是我的头文件中的expnode：

```
 typedef struct expnode{
        char *type;
        typesymrec *typesymrecptr;
        varsymrec *varsymrecptr;
        char *stringval;
        int intval;
        int boolval;

}expnode; 
```

* * *

## 我将“exp”非终结符设为“expnodebison”类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:43:42.907

终于想通了。

问题是 $$ 是一个 expnode 结构类型，这需要 malloc'd。

一旦我这样做了，我的 TK_SLIT $1 令牌就被保留了。下面是修复

```
exp: TK_SLIT    // TK_SLIT is a string literal token

    $$ = (expnode *) malloc (sizeof (expnode));
    $$ ->type = (char *) malloc (strlen ("string") + 1);  /* allocates space */
    strcpy ($$->type,"string");  /* puts value in there */ 
    printf ("%s\n",$$->type);

    printf ("The value of TK_SLIT is - %s\n",$1);

} 
```

# android - 在 android 4.0.4 中安装应用程序时出现解析错误

> ID：10117720
> 
> 赞同：0
> 
> 时间：2012-04-12T05:11:57.290
> 
> 标签：android

```
04-12 09:41:33.425: W/PackageInstaller(5015): Parse error when parsing manifest. Discontinuing installation
04-12 09:41:33.425: W/PackageParser(5015): Unable to read AndroidManifest.xml of /mnt/sdcard/Download/downloadfile.apk
04-12 09:41:33.425: W/PackageParser(5015): java.io.FileNotFoundException: AndroidManifest.xml
04-12 09:41:33.425: W/PackageParser(5015):  at android.content.res.AssetManager.openXmlAssetNative(Native Method)
04-12 09:41:33.425: W/PackageParser(5015):  at android.content.res.AssetManager.openXmlBlockAsset(AssetManager.java:487)
04-12 09:41:33.425: W/PackageParser(5015):  at android.content.res.AssetManager.openXmlResourceParser(AssetManager.java:455)
04-12 09:41:33.425: W/PackageParser(5015):  at android.content.pm.PackageParser.parsePackage(PackageParser.java:425)
04-12 09:41:33.425: W/PackageParser(5015):  at com.android.packageinstaller.PackageUtil.getPackageInfo(PackageUtil.java:74)
04-12 09:41:33.425: W/PackageParser(5015):  at com.android.packageinstaller.PackageInstallerActivity.onCreate(PackageInstallerActivity.java:277)
04-12 09:41:33.425: W/PackageParser(5015):  at android.app.Activity.performCreate(Activity.java:4465)
04-12 09:41:33.425: W/PackageParser(5015):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-12 09:41:33.425: W/PackageParser(5015):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-12 09:41:33.425: W/PackageParser(5015):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-12 09:41:33.425: W/PackageParser(5015):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-12 09:41:33.425: W/PackageParser(5015):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-12 09:41:33.425: W/PackageParser(5015):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 09:41:33.425: W/PackageParser(5015):  at android.os.Looper.loop(Looper.java:137)
04-12 09:41:33.425: W/PackageParser(5015):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-12 09:41:33.425: W/PackageParser(5015):  at java.lang.reflect.Method.invokeNative(Native Method)
04-12 09:41:33.425: W/PackageParser(5015):  at java.lang.reflect.Method.invoke(Method.java:511)
04-12 09:41:33.425: W/PackageParser(5015):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-12 09:41:33.425: W/PackageParser(5015):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-12 09:41:33.425: W/PackageParser(5015):  at dalvik.system.NativeStart.main(Native Method) 
```

请问如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:17:31.197

我在这个错误上投入了一些时间，发现有两种可能性。

1.  您的 apk 没有正确构建（尝试从设备或模拟器中清理项目/卸载并尝试再次构建）。
2.  如果您在某个服务器上上传了您的 apk，则您的上传已损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:29:45.137

您可以检查包文件以查看 Manifest.xml 文件是否在其中并包含您放入其中的信息。.apk 文件可以使用大多数 zip 实用程序打开。有关格式，请参见以下链接：[Wikipedea 上的 apk 文件格式](http://en.wikipedia.org/wiki/APK_%28file_format%29)

如果没有看到 manifest.xml 文件，就很难再说什么了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:16:46.893

尝试在 Eclipse 中右键单击项目-> android 工具-> 修复项目属性然后清理并构建。

# asp.net - 我必须在下拉列表中添加--select name-- 在哪个索引处

> ID：10117721
> 
> 赞同：0
> 
> 时间：2012-04-12T05:12:00.297
> 
> 标签：asp.net

我有下拉列表，它是从 table1 填充的。table1 的值为零。在填充下拉列表时，想要添加“--select Name--”。但是在什么索引处我必须添加选择名称。我不能添加它在 -1 位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:15:37.913

你在 0 处插入文本

```
DropDownList1.Items.Insert(0, new ListItem("--Select Name---", "0")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:18:45.087

您在下拉列表中没有任何项目，这就是您将 -1 作为索引的原因。首先确保您对 db 的数据访问工作正常。稍后您可以在索引 0 的下拉列表中插入。类似的东西。

```
dropDownList.Items.Insert(0, new ListItem("Select Name", "0")); 
```

您可以使用 add 方法添加到下拉列表

```
dropDownList.Items.Add(new ListItem("Name From db", "1")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T05:23:52.167

您可以在索引 0 处插入“--Select Name--”但值为 -1，然后您可以稍后检查值 -1 以识别您的“--Select Name--”项目。

```
YourDropDownList.Items.Insert(0, new ListItem("--Select Name--", "-1")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T05:19:49.600

如果您打开 Jquery，那么您可以尝试

```
$("#DropDownListId").prepend("<option value='0'>Select Name</option>").val(''); 
```

# c - C - 无法将双精度输入数组

> ID：10117724
> 
> 赞同：0
> 
> 时间：2012-04-12T05:12:15.457
> 
> 标签：c, input, scanf

我对 C++ 相当了解，并被告知将我用 C++ 编写的程序翻译成 C，以便在不同的环境中使用。我以前从未用纯 C 语言编写过代码，现在遇到了一些麻烦。以下函数应该读取 .txt 文件并将其中的值输入到双精度数组中，但是每当我打印数组时，所有值都是：`-92559631349317831000000000000000000000000000000000000000000000000000.00000`. 但是，如果我在打印之前手动更改代码中的值，我会得到正确的值。这是输入函数：

```
void FileRead(double *AttPos)
{
    int j = 0;
    FILE *in_file;
    in_file = fopen("DragonData.txt", "r");

    if (in_file == NULL)
    {
        exit(1);
    }
    else
    {
        for(j; j<8; j++)
        {
            fscanf(in_file, "%lf", &AttPos[i]);
        }
        fclose(in_file);
    }
} 
```

这是输入文件：

```
12345
0.13717085
0.91813290
0.73543816
-0.67362091
111
-63
11000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:20:30.510

我认为这是由于您的代码中的错误。

```
for(j; j<8; j++)
{
    fscanf(in_file, "%lf", &AttPos[i]);
} 
```

该数组索引应该是 j 而不是 i，您的值实际上并没有被放入数组中。

# ruby - ruby 的 Hash.replace 或 Array.replace 有什么用？

> ID：10117728
> 
> 赞同：3
> 
> 时间：2012-04-12T05:12:35.697
> 
> 标签：ruby, arrays, hash, replace

我总是在 Array and Hash 文档中看到 replace ，我一直认为这很奇怪。

我确信我已经多次做过这样的事情：

```
a = [:a, :b, :c, :d]

...

if some_condition
    a = [:e, :f]
end 
```

但我从没想过要改用这个：

```
a = [:a, :b, :c, :d]

...

if some_condition
    a.replace [:e, :f]
end 
```

我认为这是预期用途。这真的可以节省内存，还是有其他好处，或者只是一种风格？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T05:54:52.477

a = [:e, :f] 和 a.replace [:e, :f]，

这两条语句生成的指令如下：

1.

```
a = [:a, :b, :c, :d]
a = [:e, :f] 
```

指示：

> *红宝石--dump=insns test.rb*
> 
> ```
> == disasm: <RubyVM::InstructionSequence:<main>@test.rb>=================
> local table (size: 2, argc: 0 [opts: 0, rest: -1, post: 0, block: -1] s1)
> [ 2] a
> 0000 trace            1                                               (   1)
> 0002 duparray         [:a, :b, :c, :d]
> 0004 setdynamic       a, 0
> 0007 trace            1                                               (   2)
> 0009 duparray         [:e, :f]
> 0011 dup
> 0012 setdynamic       a, 0
> 0015 leave 
> ```

2.

```
a = [:a, :b, :c, :d]
a.replace([:e, :f]) 
```

指示：

> *红宝石--dump=insns test.rb*
> 
> ```
> == disasm: <RubyVM::InstructionSequence:<main>@test.rb>=================
> local table (size: 2, argc: 0 [opts: 0, rest: -1, post: 0, block: -1] s1)
> [ 2] a
> 0000 trace            1                                               (   1)
> 0002 duparray         [:a, :b, :c, :d]
> 0004 setdynamic       a, 0
> 0007 trace            1                                               (   2)
> 0009 getdynamic       a, 0
> 0012 duparray         [:e, :f]
> 0014 send             :replace, 1, nil, 0, <ic:0>
> 0020 leave 
> ```

**replace**方法并不比赋值运算符快，但是replace**可以**就地修改接收器数组，而且，**replace**方法确实节省了内存，这可以从 rb_ary_replace 的源码中看出。

> ```
> VALUE
> rb_ary_replace(VALUE copy, VALUE orig)
> {
> rb_ary_modify_check(copy);
> orig = to_ary(orig);
> if (copy == orig) return copy;
> 
> if (RARRAY_LEN(orig) <= RARRAY_EMBED_LEN_MAX)
> {
>     VALUE *ptr;
>     VALUE shared = 0;
> 
>     if (ARY_OWNS_HEAP_P(copy))
>     {
>         xfree(RARRAY_PTR(copy));
>     }
>     else if (ARY_SHARED_P(copy))
>     {
>         shared = ARY_SHARED(copy);
>         FL_UNSET_SHARED(copy);
>     }
>     FL_SET_EMBED(copy);
>     ptr = RARRAY_PTR(orig);
>     MEMCPY(RARRAY_PTR(copy), ptr, VALUE, RARRAY_LEN(orig));
>     if (shared)
>     {
>         rb_ary_decrement_share(shared);
>     }
>     ARY_SET_LEN(copy, RARRAY_LEN(orig));
> }
> else
> {
>     VALUE shared = ary_make_shared(orig);
>     if (ARY_OWNS_HEAP_P(copy))
>     {
>         xfree(RARRAY_PTR(copy));
>     }
>     else
>     {
>         rb_ary_unshare_safe(copy);
>     }
>     FL_UNSET_EMBED(copy);
>     ARY_SET_PTR(copy, RARRAY_PTR(orig));
>     ARY_SET_LEN(copy, RARRAY_LEN(orig));
>     rb_ary_set_shared(copy, shared);
> }
> return copy; } 
> ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T05:31:01.957

我认为预期用途是就地修改已传递给方法的数组。例如：

```
def m(a)
    a.replace(%w[a b])
end

a = %w[x y z]
m(a)
# a is now ['a', 'b'] 
```

没有`replace`，你必须做这样的事情：

```
def m(a)
    a.clear
    a << 'a' # or use .push of course
    a << 'b'
end 
```

使用`replace`让您一次完成所有操作应该绕过自动收缩和自动增长（这可能涉及复制一些内存）行为，这将是逐个元素替换数组内容（而不是数组本身！）的副作用。性能优势（如果有的话）可能只是额外的，主要目的可能是获得指针到指针的行为，而不必引入指针或将数组包装在额外的对象中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T05:35:18.197

```
a = [:a, :b, :c, :d]
b = [:x, :y, :z]
a.replace(b)

a.object_id == b.object_id
=> false

a = [:a, :b, :c, :d]
b = [:x, :y, :z]
a = b

a.object_id == b.object_id
=> true 
```

还

```
a = [:a, :b, :c, :d]
c = a
b = [:x, :y, :z]
a.replace(b)
p c # => [:x, :y, :z] 
```

对比

```
a = [:a, :b, :c, :d]
c = a
b = [:x, :y, :z]
a = b
p c # => [:a, :b, :c, :d] 
```

这并不能准确回答您的问题。

# php - 根据php中的键对多维数组求和

> ID：10117733
> 
> 赞同：0
> 
> 时间：2012-04-12T05:13:06.017
> 
> 标签：php, arrays

我有多个数组，现在说 2，第一个数组有城市（孟买，浦那。班加罗尔，海得拉巴），第二个数组有 Mumbia nad Hyderabd。

我想根据 Key 总结值。

数组 ( [孟买] => 数组 ( [ga:pageviews] => 1 [ga:visits] => 1 [ga:newVisits] => 1 [ga:pageviewsPerVisit] => 1 [ga:entranceBounceRate] => 1 [ ga:avgTimeOnSite] => 1 [ga:timeOnSite] => 1 [ga:bounces] => 1)

```
[Pune] => Array
    (
        [ga:pageviews] => 2
        [ga:visits] => 2
        [ga:newVisits] => 2
        [ga:pageviewsPerVisit] => 2
        [ga:entranceBounceRate] => 2
        [ga:avgTimeOnSite] => 2
        [ga:timeOnSite] => 2
        [ga:bounces] => 2
    )

[Bangalore] => Array
    (
        [ga:pageviews] => 3
        [ga:visits] => 3
        [ga:newVisits] => 3
        [ga:pageviewsPerVisit] => 3
        [ga:entranceBounceRate] => 3
        [ga:avgTimeOnSite] => 3
        [ga:timeOnSite] => 3
        [ga:bounces] => 3
    )

[Hyderabad] => Array
    (
        [ga:pageviews] => 4
        [ga:visits] => 4
        [ga:newVisits] => 4
        [ga:pageviewsPerVisit] => 4
        [ga:entranceBounceRate] => 4
        [ga:avgTimeOnSite] => 4
        [ga:timeOnSite] => 4
        [ga:bounces] => 4
    ) 
```

)

第二个数组：

数组 ( [孟买] => 数组 ( [ga:pageviews] => 5 [ga:visits] => 5 [ga:newVisits] => 5 [ga:pageviewsPerVisit] => 5 [ga:entranceBounceRate] => 5 [ ga:avgTimeOnSite] => 5 [ga:timeOnSite] => 5 [ga:bounces] => 5)

```
[Hyderabad] => Array
    (
        [ga:pageviews] => 2
        [ga:visits] => 2
        [ga:newVisits] => 2
        [ga:pageviewsPerVisit] => 2
        [ga:entranceBounceRate] => 2
        [ga:avgTimeOnSite] => 2
        [ga:timeOnSite] => 2
        [ga:bounces] => 2
    ) 
```

)

我希望结果为：

数组 ( [孟买] => 数组 ( [ga:pageviews] => 6 [ga:visits] => 6 [ga:newVisits] => 6 [ga:pageviewsPerVisit] => 6 [ga:entranceBounceRate] => 6 [ ga:avgTimeOnSite] => 6 [ga:timeOnSite] => 6 [ga:bounces] => 6)

```
[Pune] => Array
    (
        [ga:pageviews] => 2
        [ga:visits] => 2
        [ga:newVisits] => 2
        [ga:pageviewsPerVisit] => 2
        [ga:entranceBounceRate] => 2
        [ga:avgTimeOnSite] => 2
        [ga:timeOnSite] => 2
        [ga:bounces] => 2
    )

[Bangalore] => Array
    (
        [ga:pageviews] => 3
        [ga:visits] => 3
        [ga:newVisits] => 3
        [ga:pageviewsPerVisit] => 3
        [ga:entranceBounceRate] => 3
        [ga:avgTimeOnSite] => 3
        [ga:timeOnSite] => 3
        [ga:bounces] => 3
    )

[Hyderabad] => Array
    (
        [ga:pageviews] => 6
        [ga:visits] => 6
        [ga:newVisits] => 6
        [ga:pageviewsPerVisit] => 6
        [ga:entranceBounceRate] => 6
        [ga:avgTimeOnSite] => 6
        [ga:timeOnSite] => 6
        [ga:bounces] => 6
    ) 
```

)

谢谢你的帮助……露丝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:22:23.383

```
foreach($arr2["Hyderabad"] as $key => $val)
{
    $arr1["Hyderabad"][$key] += $val;
} 
```

那应该为你做:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:25:13.630

试试这个

```
$newarray = $array1;
foreach ($array2 as $key => $values) {
    foreach ($values as $name => $value) {
        if (!is_array($newarray[$key])) { $newarray[$key] = array(); }
        $newarray[$key][$name] += $value;
    }
}

// $newarray should now be the array you want with values added 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:25:18.560

让我们在一个名为 parent 的数组中说出所有这些

```
$parent has keys as 0,1

foreach($parent as $k=>$v)    
{
     foreach($v as $ik=>$iv)
     {
          foreach($iv as $fk=>$fv)
          {
              $cities[$ik][$fk] = $cities[$ik[$fk]+$fv;
          }
     }
 } 
```

# c# - 正则表达式匹配多于 1 个小数点

> ID：10117735
> 
> 赞同：0
> 
> 时间：2012-04-12T05:13:20.300
> 
> 标签：c#, javascript

我正在尝试支持以下格式：

```
11.11

01.67

30.03

11.45.23 
```

但是我使用的正则表达式`"/^[+-]?([0-9]*\.?[0-9]+|[0-9]+\.?[0-9]*)([eE][+-]?[0-9]+)?$/"`只支持前 3 种格式。

我需要匹配带有 1 个或多个小数点的数字，例如**11.12.36**

请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:53:43.820

尝试这个。

```
sPattern = @"^\d{2}\.\d{2}(\.\d{2})*$"; 
```

它将包括所有数字

```
11.11

23.45.57

12.54.78.78 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:28:41.540

如果您想在小数点和小数点之间允许任意位数，包括可能的起始小数点，您可以尝试以下操作：

```
\.?\d+(?:\.\d+)* 
```

这将允许 .123 123.123 123.123.123.123 等

# iphone - 如何从 JSON 输出中分离纬度和经度值？

> ID：10117738
> 
> 赞同：2
> 
> 时间：2012-04-12T05:13:35.493
> 
> 标签：iphone, objective-c, ios, mkmapview, cllocation

我正在尝试两个位置之间的两条绘制路线，为此我从 Google Map API Web Service 获取所有点。（`JSON`输出格式）。解析`JSON`数据和解码点后，我将所有点存储在`NSMutableArray`. 每个索引数组都包含这种类型的值。

```
"<+10.90180969, +76.19167328> +/- 0.00m (speed -1.00 mps / course -1.00) @ 12/04/12 10:18:10 AM India Standard Time", 
```

现在我想分开纬度和经度值。

```
latitude  : +10.90180969
longitude : +76.19167328 
```

如何从数组的每个索引中获取这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:48:38.410

这只是执行此操作的一种方法。：

```
NSString* str = @"<+10.90180969, +76.19167328> +/- 0.00m (speed -1.00 mps / course -1.00) @ 12/04/12 10:18:10 AM India Standard Time";//you already have this string.
str = (NSString*)[[str componentsSeparatedByString:@">"] objectAtIndex:0];
// after above performed step, str equals "<+10.90180969, +76.19167328"
str = [str substringFromIndex:1];
// after above performed step, str equals "+10.90180969, +76.19167328"
NSString* strLat = (NSString*)[[str componentsSeparatedByString:@","] objectAtIndex:0];
NSString* strLon = (NSString*)[[str componentsSeparatedByString:@","] objectAtIndex:1];
// after above performed step, strLat equals "+10.90180969"
// after above performed step, strLon equals " +76.19167328"
strLon = [strLon substringFromIndex:1];//<-- to remove the extra space at index=0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:50:01.233

这是一个非常粗略的形式，我想这是一个粗暴的解决方案

```
NSString* str =     @"<+10.90180969, +76.19167328> +/- 0.00m (speed -1.00 mps  course -1.00) @ 12/04/12 10:18:10 AM India Standard Time";
NSArray* arr = [str componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]];

if ([arr count] > 1) {
   NSString* coordinateStr =  [arr objectAtIndex:1];        
   NSArray* arrCoordinate = [coordinateStr componentsSeparatedByString:@","];        
    NSLog(@"%@",arrCoordinate);
} 
```

查看字符串显示您正在打印 CLLocation 对象“ **someObject** ”的描述，您还可以访问纬度和经度，例如

```
 CLLocationCoordinate2D location = [someObject coordinate];
    NSLog(@" \nLatitude: %.6f \nLongitude: %.6f",location.latitude,location.longitude); 
```

输出将是：纬度：28.621873 经度：77.388897

但这不会给你符号，即“+”或“-”

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T23:29:01.063

这就是我在代码中的做法 - 试图适应您的情况：

头文件：

```
@interface CLLocation (String)

+ (instancetype) clLocationWithString:(NSString *)location;

@end 
```

和实施：

```
@implementation CLLocation (String)

+ (instancetype)clLocationWithString:(NSString *)location
{
    static NSRegularExpression *staticRegex;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        NSError *error = NULL;
        //ex: <41.081445,-81.519005> ...
    staticRegex = [NSRegularExpression regularExpressionWithPattern:@"(\\-?\\d+\\.?\\d*)+"
                                                            options:NSRegularExpressionCaseInsensitive
                                                              error:&error];
    });

    NSArray *matches = [staticRegex matchesInString:location options:NSMatchingReportCompletion range:NSMakeRange(0, location.length)];

    if (matches.count >= 2) {
        return [[CLLocation alloc] initWithLatitude:[[location substringWithRange:((NSTextCheckingResult *)[matches objectAtIndex:0]).range] doubleValue]
                                          longitude:[[location substringWithRange:((NSTextCheckingResult *)[matches objectAtIndex:1]).range] doubleValue]];
    } else {
        return [[CLLocation alloc] init];
    }
} 
```

# java - 基于链表从优先级队列中删除项目

> ID：10117739
> 
> 赞同：0
> 
> 时间：2012-04-12T05:13:35.350
> 
> 标签：java, linked-list, priority-queue

我正在尝试在通过链接列表实现的 Java 中创建 PriorityQueue 类。在队列中，具有不同优先级的对象将不按特定顺序添加到列表的末尾，因此添加一个元素将是 O(1)，而删除具有最高优先级的元素将是 O(n)。但是，我很难编写 remove 方法。我在我的链接列表类中创建了一个“removeHighestPriorityNode”方法，但我被卡住了。这是我迄今为止所拥有的：

```
public void removeHighestPriorityNode()
{
    if(head == null)                                
    {
        throw new NoSuchElementException();
    }
    else if (head.next != null)
    {
        Node<E> previous = head;
        Node<E> current = head.next;
        Node<E> highestPriority = head;

        while(current != null)
        {
            if (current.priority > previous.priority)
            {
                highestPriority = current;
            }

            previous = current;
            current = current.next;
        }
    }
    else
    {
        clear(); //Clears the list
    }
} 
```

找到具有最高优先级的节点是没有问题的，但是找到一种方法将指针（下一个）从具有最高优先级的节点之前的节点切换到之后的节点是我遇到的麻烦。另外，这是我第一次在这个网站上发帖，所以如果我有任何含糊不清的地方，请告诉我。任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:09:56.343

要么考虑使用双向链表，这样您就可以同时引用下一个和上一个节点，或者`Node<E> nodeReferencingHighestPriority;`在循环中使用并跟踪它：

```
 while(current != null)
    {
        if (current.priority > previous.priority)
        {
            nodeReferencingHighestPriority = previous;
            highestPriority = current;
        }

        previous = current;
        current = current.next;
    } 
```

# hibernate - parentId 不通过级联自动设置为子实体

> ID：10117742
> 
> 赞同：0
> 
> 时间：2012-04-12T05:13:59.817
> 
> 标签：hibernate, parent-child, cascade

在实体 Invoice 中，我有一组 DetailInvoice 与 cascade is ALL

```
@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "invoice")
public Set<DetailInvoice> getDetailInvoices() {
    return detailInvoices;
} 
```

在实体 DetailInvoice 中：

```
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "invoice_id")
public Invoice getInvoice() {
    return invoice;
} 
```

保存：

```
 Invoice invoice = new Invoice();
    DetailInvoice detailInvoice = new DetailInvoice();
    invoice.getDetailInvoices().add(detailInvoice);
    detailInvoice.setInvoice(invoice); // (1) Should we need this row?
    session.save(invoice); 
```

如果我们没有行 (1)，detailInvoice 将在数据库中具有 invoiceId 为空。为什么 Hibernate 不根据注解映射自动将 InvoiceId 设置为 detailInvoice？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:29:56.267

请参阅

[Hibernate 4.1 文档第 1.2.6 节](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch01.html#tutorial-associations-bidirectional)

人员和事件示例与您正在谈论的内容类似。

问候，

沙杜尔。

# javascript - 如何创建随机标记按钮的网格

> ID：10117743
> 
> 赞同：0
> 
> 时间：2012-04-12T05:14:03.927
> 
> 标签：javascript, html, css

我想创建一个应用程序来接受用户按下按钮的响应。作为该项目的一部分，我想创建一个由 3x3 或 4x4 大按钮网格组成的网格，这些按钮的间距和大小相等，并且其标签将包含 AD 之间的两个字母组合的标签，例如 AB、AC、BC 等以随机顺序排列

我可以在 html 中创建按钮，但我对编码相当陌生，所以看起来很明显的事情可能很困难。我想要的功能包括记录在按下目标按钮（例如 DC）时出现网格的开始时间（停止时间），在网格出现时触发（新的按钮网格），随机化网格上按钮的外观，有一个一致的目标在所有界面上按下按钮。

有没有人这样做过，或者任何人都可以分享一个精简的例子。有人可以在我可能跳过的文档或编码环境方面为我指出正确的方向吗？任何评论或代码将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:23:22.203

JavaScript 教程应该是一个很好的起点：[http ://www.w3schools.com/js/](http://www.w3schools.com/js/)

[http://jsfiddle.net/](http://jsfiddle.net/)也是使用您编写的代码的好工具

# java - Java 线性代数/凸优化库

> ID：10117754
> 
> 赞同：-1
> 
> 时间：2012-04-12T05:15:13.620
> 
> 标签：java, linear-algebra

我不知道什么是适当的礼仪——如果我应该把它分成两个问题（一个关于线性代数，一个关于凸优化），请告诉我。

我感兴趣的是：（1）我应该为 Java 中的线性代数使用什么库？(2) 我应该使用什么库来进行 Java 中的凸优化？(3) 我们对 java 库和 C 库有什么基准？

请注意，尽管 Java 指定了与平台无关的浮点表示（我相信这会使事情变得更慢）——我愿意牺牲它。如果在不同的平台上，我的 Java 浮点最终得到不同的值，这对我来说没关系。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:36:20.803

对于凸优化，这里已经有一个链接：

[Java 数学优化库——免费还是开源推荐？](https://stackoverflow.com/questions/143020/mathematical-optimization-library-for-java-free-or-open-source-recommendatio)

对于线性代数，您可以使用 Colt

[http://acs.lbl.gov/software/colt/](http://acs.lbl.gov/software/colt/)

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:36:49.133

你可以看看[JOptimizer](http://www.joptimizer.com)，开源java凸优化项目

# objective-c - 有人可以向我解释 CALayer contentsRect 属性的坐标系吗？

> ID：10117755
> 
> 赞同：6
> 
> 时间：2012-04-12T05:15:15.890
> 
> 标签：objective-c, ios, macos, core-animation, core-graphics

我意识到（[此处的文档](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html)`contentsRect`）的属性允许定义用于绘制的图层的多少，但我认为我不明白坐标系是如何工作的。`CALayer`

似乎当宽度/高度较小时，用于内容的区域较大，反之亦然。同样，负 x,y 位置似乎将内容区域向下和向右移动，这与我的直觉相反。

有人可以解释这是为什么吗？我确信这是有充分理由的，但我认为我缺少一些图形编程背景。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-12T05:37:58.490

> CALayer 的 contentsRect 属性（此处的文档）允许定义用于绘图的图层的多少

不，你想错了。

`contentsRect`指定图像的*哪一部分*将`contents`显示在图层中。

然后根据`contentsGravity`属性将该部分布置在层中。

如果这是`kCAGravityResize`，默认值，这将导致*部分*调整大小以适合图层。这可以解释你所看到的违反直觉的行为——你`contentsRect`缩小了，但图层看起来是相同的大小，并且它似乎在图像的选定部分“放大”。如果设置`contentsGravity`为`kCAGravityCenter`不会调整大小，您可能会发现更容易理解。

大多数时候，您会将 设置为`contentsRect`标识 rect 的某个子矩形`{ {0, 0}, {1, 1} }`，因此您选择只查看部分内容。

（如果您愿意，可以将这些视为百分比 - 如果`contentsRect`大小为`{0.5, 0.5}`，则您选择 50% `contents`。）

如果部分`contentsRect`超出恒等矩形，则 CA 将`contents`向外扩展边缘像素。这在某些情况下很方便，但它不是您自己使用的东西——您可以将它与蒙版或其他一些图层结合使用以达到某种效果。

# php - Ajax 与否：使用 zend 框架编码更难/更长

> ID：10117761
> 
> 赞同：0
> 
> 时间：2012-04-12T05:15:40.703
> 
> 标签：php, jquery, ajax, zend-framework

我打算使用 zend 框架创建一个基于 ajax 的 Web 应用程序。如果它是基于 ajax 的，我会很难对其进行编码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:33:23.357

结合 AJAX 和 Zend 框架应该不是问题。看一下

[http://my.opera.com/zomg/blog/2007/10/26/handling-ajax-requests-in-the-zend-framework](http://my.opera.com/zomg/blog/2007/10/26/handling-ajax-requests-in-the-zend-framework)

或者

[http://www.smooka.com/blog/2009/04/17/5-things-working-with-zend-framework-and-ajax/](http://www.smooka.com/blog/2009/04/17/5-things-working-with-zend-framework-and-ajax/)

了解如何将两者结合起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:12:39.747

是否使用 ajax 编码不应该是一个问题，如果你需要它，你就需要它，如果你不需要它，你就不要使用它，这很简单。至于难不难，这完全取决于你如何使用 ajax 和 zend，在我相信的大多数情况下，两者的集成不应该是一个问题。

# javascript - 如何存储 Google Chrome 扩展的首选项？

> ID：10117762
> 
> 赞同：0
> 
> 时间：2012-04-12T05:15:42.790
> 
> 标签：javascript, google-chrome, google-chrome-extension, local-storage

举个简单的例子，假设我想在每个网页的底部插入一个单词，并且我希望用户能够更改该单词。所以我有一个选项页面（在扩展中），在其中我接受用户输入并使用它来调用“localStorage.preferences = x;”。

接下来，用户导航到[http://www.google.com/](http://www.google.com/)，我注入了一个脚本，该脚本写入了在 localStorage.preferences 中找到的单词。问题是，由于我现在在不同的域中，我看到的是 google.com 的 localStorage，而不是我的扩展。

如何在我的扩展程序的选项页面和注入某些 3rd 方网页的脚本之间共享数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:27:14.920

这可能不是对您问题的最直接回应，但可能解决此问题的一种方法是使用[消息传递](http://code.google.com/chrome/extensions/messaging.html)来伪造从另一个域直接访问本地存储。假设您在内容脚本的上下文中运行 Javascript，您可以向后台页面传递一条消息，要求输入一个密钥，该密钥将返回`localStorage`.

# linux - 如何使用 linux 命令合并两个单列 csv 文件

> ID：10117767
> 
> 赞同：4
> 
> 时间：2012-04-12T05:16:09.843
> 
> 标签：linux, csv

我想知道如何将两个单列 csv 文件合并到一个文件中，结果文件将包含两列。

file1.csv
   first_name
   克里斯
   ·本·
   杰瑞

file2.csv
   姓氏
   史密斯
   白
   佩里

result.csv
   名字，姓氏，
   克里斯，史密斯
   本，
   白杰瑞，佩里

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T05:26:39.903

```
$ cat file1
John
Mary
$ cat file2
Smith
Jones
$ paste -d, file1 file2
John,Smith
Mary,Jones 
```

该`-d,`参数用于指定逗号作为列之间的分隔符

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-12T05:19:27.173

你正在寻找[`paste`](http://linux.die.net/man/1/paste).

# jquery - Jquery + CSS 默认 BG 颜色

> ID：10117786
> 
> 赞同：1
> 
> 时间：2012-04-12T05:17:39.440
> 
> 标签：jquery, html, css

我有一个 div，其 CSS 样式为绿色或蓝色，具体取决于第 n 个子颜色。我将其设置为橙色使用

```
<div id='yo' class='alternatingcolors' style='background-color: #FF9900;'>hello</div> 
```

我想使用jquery将它动画化回原来的颜色

```
$('yo').animate({ backgroundColor: 'transparent'}, 500); 
```

但是，transparent、inherit、null 或 '' 都不起作用。

我怎样才能让它恢复原来的颜色？本质上我想将它动画到之前的状态： style='background-color: #FF9900;' 已设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:22:05.720

对 'yo' 的查找应以哈希为前缀，例如：

```
$('#yo') 
```

如果这不是问题：

您可以将原始颜色作为数据存储在 div 中，然后再将其恢复：

```
<div id='yo' data-original-color='#FF9900' class='alternatingcolors'> 
```

然后：

```
$('#yo').animate({ backgroundColor: $('#yo').data('original-color') }, 500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:24:51.050

您可以将其第一个背景颜色保存到变量中，然后使用它：

```
orange = $("yo").css("background-color") 
```

# java - 如何设置 commons-logging 以使用 logback？

> ID：10117788
> 
> 赞同：61
> 
> 时间：2012-04-12T05:17:46.200
> 
> 标签：java, logging, logback, apache-commons-logging

我们使用 slf4j + logback，碰巧有一些使用 commons-logging 的第三方库。如何设置它以使用 logback？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-12T18:05:34.940

答案是不要使用 commons-logging.jar，因为 SLF4J 旨在做 commons-logging 所做的事情，但更好。正如@MahdeTo 所指，您需要使用jcl-over-slf4j.jar。

查看 slf4j 网站[上关于从 commons-logging 迁移](http://slf4j.org/legacy.html#jcl-over-slf4j)的文档。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-04-19T04:00:56.793

我也遇到这个问题，发现`jcl-over-slf4j.jar`确实可以解决问题，我不明白为什么`commons-logging`不能`logback`自动使用，因为`commons-logging`是日志接口和`logback`实现，它们应该自动集成，直到我发现[这个](https://commons.apache.org/proper/commons-logging/guide.html)：

> Apache Commons Logging (JCL) 提供了一个 Log 接口，它既是轻量级的，又是其他日志工具包的独立抽象。它为中间件/工具开发人员提供了一个简单的日志抽象，允许用户（应用程序开发人员）插入特定的日志实现。
> 
> JCL 为其他日志记录工具提供瘦包装日志实现，包括 Log4J、Avalon LogKit（Avalon 框架的日志基础设施）、JDK 1.4，以及 JDK 1.4 日志 API (JSR-47) 的实现，用于 1.4 之前的系统。该接口紧密映射到 Log4J 和 LogKit。

显然不是所有的日志接口都可以很好地与日志实现集成，这意味着，如果你真的想使用`logback`，`jcl-over-slf4j.jar`现在是你唯一的解决方案，因为`JCL`只支持`Log4J, Logkit, JDK 1.4`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-25T19:54:32.713

只需添加到项目的依赖项（在[https://search.maven.org/search?q=g:org.slf4j%20AND%20a:jcl-over-slf4j&core=gav](https://search.maven.org/search?q=g:org.slf4j%20AND%20a:jcl-over-slf4j&core=gav)`jcl-over-slf4j`检查当前版本）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-18T04:53:47.387

对于那些想要保持最终包装尺寸更小的人；您的项目的结帐 `mvn dependency:tree`结果，如果`commons-logging`存在任何依赖关系，也将它们排除在外。由于`jcl-over-slf4j.jar`包含具有完全相同包结构的 Log 和 LogFactory 类，因此这些 commons-logging jar 在您的最终包中将是额外的。

# hadoop - Whirr：在 lauch-cluster 之后无法连接到 EC2 上的 Hadoop 集群

> ID：10117792
> 
> 赞同：3
> 
> 时间：2012-04-12T05:18:21.150
> 
> 标签：hadoop, amazon-ec2, cluster-computing, apache-whirr

我是 Whirr 的新手，我正在尝试使用 Whirr 在 EC2 上设置 Hadoop 集群，我已按照 Cloudera 上的教程[https://ccp.cloudera.com/display/CDHDOC/Whirr+Installation](https://ccp.cloudera.com/display/CDHDOC/Whirr+Installation)

在安装 Whirr 之前，我先安装 Hadoop (0.20.2-cdh3u3)，然后安装 Whirr (0.5.0-cdh3u3)。

这是我的集群配置文件

```
whirr.cluster-name=large-cluster
whirr.instance-templates=1 hadoop-jobtracker+hadoop-namenode,1 hadoop-datanode+hadoop-tasktracker
whirr.provider=aws-ec2
whirr.identity=XXXXXXXXXXXXXXX
whirr.credential=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
whirr.private-key-file=${sys:user.home}/.ssh/id_rsa
whirr.public-key-file=${sys:user.home}/.ssh/id_rsa.pub
whirr.hadoop-install-function=install_cdh_hadoop
whirr.hadoop-configure-function=configure_cdh_hadoop
whirr.hardware-id=m1.large
whirr.image-id=us-east-1/ami-da0cf8b3
whirr.location-id=us-east-1 
```

集群启动看起来正常

```
khiem@master ~ $ whirr launch-cluster --config large-hadoop.properties 
Bootstrapping cluster
Configuring template
Starting 1 node(s) with roles [hadoop-datanode, hadoop-tasktracker]
Configuring template
Starting 1 node(s) with roles [hadoop-jobtracker, hadoop-namenode]
Nodes started: [[id=us-east-1/i-9aa01dfd, providerId=i-9aa01dfd, group=large-cluster, name=null, location=[id=us-east-1a, scope=ZONE, description=us-east-1a, parent=us-east-1, iso3166Codes=[US-VA], metadata={}], uri=null, imageId=us-east-1/ami-da0cf8b3, os=[name=null, family=ubuntu, version=10.04, arch=paravirtual, is64Bit=true, description=ubuntu-images-us/ubuntu-lucid-10.04-amd64-server-20101020.manifest.xml], state=RUNNING, loginPort=22, privateAddresses=[10.196.142.64], publicAddresses=[107.20.64.97], hardware=[id=m1.large, providerId=m1.large, name=null, processors=[[cores=2.0, speed=2.0]], ram=7680, volumes=[[id=null, type=LOCAL, size=10.0, device=/dev/sda1, durable=false, isBootDevice=true], [id=null, type=LOCAL, size=420.0, device=/dev/sdb, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdc, durable=false, isBootDevice=false]], supportsImage=is64Bit()], loginUser=ubuntu, userMetadata={}]]
Nodes started: [[id=us-east-1/i-0aa31e6d, providerId=i-0aa31e6d, group=large-cluster, name=null, location=[id=us-east-1a, scope=ZONE, description=us-east-1a, parent=us-east-1, iso3166Codes=[US-VA], metadata={}], uri=null, imageId=us-east-1/ami-da0cf8b3, os=[name=null, family=ubuntu, version=10.04, arch=paravirtual, is64Bit=true, description=ubuntu-images-us/ubuntu-lucid-10.04-amd64-server-20101020.manifest.xml], state=RUNNING, loginPort=22, privateAddresses=[10.85.130.43], publicAddresses=[50.17.128.123], hardware=[id=m1.large, providerId=m1.large, name=null, processors=[[cores=2.0, speed=2.0]], ram=7680, volumes=[[id=null, type=LOCAL, size=10.0, device=/dev/sda1, durable=false, isBootDevice=true], [id=null, type=LOCAL, size=420.0, device=/dev/sdb, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdc, durable=false, isBootDevice=false]], supportsImage=is64Bit()], loginUser=ubuntu, userMetadata={}]]
Authorizing firewall ingress to [Instance{roles=[hadoop-jobtracker, hadoop-namenode], publicIp=50.17.128.123, privateIp=10.85.130.43, id=us-east-1/i-0aa31e6d, nodeMetadata=[id=us-east-1/i-0aa31e6d, providerId=i-0aa31e6d, group=large-cluster, name=null, location=[id=us-east-1a, scope=ZONE, description=us-east-1a, parent=us-east-1, iso3166Codes=[US-VA], metadata={}], uri=null, imageId=us-east-1/ami-da0cf8b3, os=[name=null, family=ubuntu, version=10.04, arch=paravirtual, is64Bit=true, description=ubuntu-images-us/ubuntu-lucid-10.04-amd64-server-20101020.manifest.xml], state=RUNNING, loginPort=22, privateAddresses=[10.85.130.43], publicAddresses=[50.17.128.123], hardware=[id=m1.large, providerId=m1.large, name=null, processors=[[cores=2.0, speed=2.0]], ram=7680, volumes=[[id=null, type=LOCAL, size=10.0, device=/dev/sda1, durable=false, isBootDevice=true], [id=null, type=LOCAL, size=420.0, device=/dev/sdb, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdc, durable=false, isBootDevice=false]], supportsImage=is64Bit()], loginUser=ubuntu, userMetadata={}]}] on ports [50070, 50030] for [116.96.138.41/32]
Authorizing firewall ingress to [Instance{roles=[hadoop-jobtracker, hadoop-namenode], publicIp=50.17.128.123, privateIp=10.85.130.43, id=us-east-1/i-0aa31e6d, nodeMetadata=[id=us-east-1/i-0aa31e6d, providerId=i-0aa31e6d, group=large-cluster, name=null, location=[id=us-east-1a, scope=ZONE, description=us-east-1a, parent=us-east-1, iso3166Codes=[US-VA], metadata={}], uri=null, imageId=us-east-1/ami-da0cf8b3, os=[name=null, family=ubuntu, version=10.04, arch=paravirtual, is64Bit=true, description=ubuntu-images-us/ubuntu-lucid-10.04-amd64-server-20101020.manifest.xml], state=RUNNING, loginPort=22, privateAddresses=[10.85.130.43], publicAddresses=[50.17.128.123], hardware=[id=m1.large, providerId=m1.large, name=null, processors=[[cores=2.0, speed=2.0]], ram=7680, volumes=[[id=null, type=LOCAL, size=10.0, device=/dev/sda1, durable=false, isBootDevice=true], [id=null, type=LOCAL, size=420.0, device=/dev/sdb, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdc, durable=false, isBootDevice=false]], supportsImage=is64Bit()], loginUser=ubuntu, userMetadata={}]}] on ports [8020, 8021] for [50.17.128.123/32]
Running configuration script
Configuration script run completed
Running configuration script
Configuration script run completed
Completed configuration of large-cluster
Namenode web UI available at http://ec2-50-17-128-123.compute-1.amazonaws.com:50070
Jobtracker web UI available at http://ec2-50-17-128-123.compute-1.amazonaws.com:50030
Wrote Hadoop site file /home/khiem/.whirr/large-cluster/hadoop-site.xml
Wrote Hadoop proxy script /home/khiem/.whirr/large-cluster/hadoop-proxy.sh
Wrote instances file /home/khiem/.whirr/large-cluster/instances
Started cluster of 2 instances
Cluster{instances=[Instance{roles=[hadoop-datanode, hadoop-tasktracker], publicIp=107.20.64.97, privateIp=10.196.142.64, id=us-east-1/i-9aa01dfd, nodeMetadata=[id=us-east-1/i-9aa01dfd, providerId=i-9aa01dfd, group=large-cluster, name=null, location=[id=us-east-1a, scope=ZONE, description=us-east-1a, parent=us-east-1, iso3166Codes=[US-VA], metadata={}], uri=null, imageId=us-east-1/ami-da0cf8b3, os=[name=null, family=ubuntu, version=10.04, arch=paravirtual, is64Bit=true, description=ubuntu-images-us/ubuntu-lucid-10.04-amd64-server-20101020.manifest.xml], state=RUNNING, loginPort=22, privateAddresses=[10.196.142.64], publicAddresses=[107.20.64.97], hardware=[id=m1.large, providerId=m1.large, name=null, processors=[[cores=2.0, speed=2.0]], ram=7680, volumes=[[id=null, type=LOCAL, size=10.0, device=/dev/sda1, durable=false, isBootDevice=true], [id=null, type=LOCAL, size=420.0, device=/dev/sdb, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdc, durable=false, isBootDevice=false]], supportsImage=is64Bit()], loginUser=ubuntu, userMetadata={}]}, Instance{roles=[hadoop-jobtracker, hadoop-namenode], publicIp=50.17.128.123, privateIp=10.85.130.43, id=us-east-1/i-0aa31e6d, nodeMetadata=[id=us-east-1/i-0aa31e6d, providerId=i-0aa31e6d, group=large-cluster, name=null, location=[id=us-east-1a, scope=ZONE, description=us-east-1a, parent=us-east-1, iso3166Codes=[US-VA], metadata={}], uri=null, imageId=us-east-1/ami-da0cf8b3, os=[name=null, family=ubuntu, version=10.04, arch=paravirtual, is64Bit=true, description=ubuntu-images-us/ubuntu-lucid-10.04-amd64-server-20101020.manifest.xml], state=RUNNING, loginPort=22, privateAddresses=[10.85.130.43], publicAddresses=[50.17.128.123], hardware=[id=m1.large, providerId=m1.large, name=null, processors=[[cores=2.0, speed=2.0]], ram=7680, volumes=[[id=null, type=LOCAL, size=10.0, device=/dev/sda1, durable=false, isBootDevice=true], [id=null, type=LOCAL, size=420.0, device=/dev/sdb, durable=false, isBootDevice=false], [id=null, type=LOCAL, size=420.0, device=/dev/sdc, durable=false, isBootDevice=false]], supportsImage=is64Bit()], loginUser=ubuntu, userMetadata={}]}], configuration={hadoop.job.ugi=root,root, mapred.job.tracker=ec2-50-17-128-123.compute-1.amazonaws.com:8021, hadoop.socks.server=localhost:6666, fs.s3n.awsAccessKeyId=AKIAIGXAURLAB7CQE77A, fs.s3.awsSecretAccessKey=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, fs.s3.awsAccessKeyId=AZIAIGXIOPLAB7CQE77A, hadoop.rpc.socket.factory.class.default=org.apache.hadoop.net.SocksSocketFactory, fs.default.name=hdfs://ec2-50-17-128-123.compute-1.amazonaws.com:8020/, fs.s3n.awsSecretAccessKey=dWDRq2z0EQegdPrbbL8Dab3eCu98O32r3gOrIbOK}} 
```

我还按照 Cloudera 教程启动了代理并更新了本地 Hadoop 配置，但是当我尝试使用`hadoop fs -ls /`

终端打印连接错误：

```
12/04/12 11:54:43 WARN conf.Configuration: DEPRECATED: hadoop-site.xml found in the classpath. Usage of hadoop-site.xml is deprecated. Instead use core-site.xml, mapred-site.xml and hdfs-site.xml to override properties of core-default.xml, mapred-default.xml and hdfs-default.xml respectively
12/04/12 11:54:43 INFO security.UserGroupInformation: JAAS Configuration already set up for Hadoop, not re-installing.
12/04/12 11:54:45 INFO ipc.Client: Retrying connect to server: ec2-50-17-128-123.compute-1.amazonaws.com/50.17.128.123:8020\. Already tried 0 time(s).
12/04/12 11:54:46 INFO ipc.Client: Retrying connect to server: ec2-50-17-128-123.compute-1.amazonaws.com/50.17.128.123:8020\. Already tried 1 time(s).
12/04/12 11:54:48 INFO ipc.Client: Retrying connect to server: ec2-50-17-128-123.compute-1.amazonaws.com/50.17.128.123:8020\. Already tried 2 time(s).
12/04/12 11:54:49 INFO ipc.Client: Retrying connect to server: ec2-50-17-128-123.compute-1.amazonaws.com/50.17.128.123:8020\. Already tried 3 time(s). 
```

在代理终端

```
Running proxy to Hadoop cluster at
ec2-50-17-128-123.compute-1.amazonaws.com. Use Ctrl-c to quit.
Warning: Permanently added 'ec2-50-17-128-123.compute-1.amazonaws.com,50.17.128.123' (RSA) to the list of known hosts. 
channel 2: open failed: connect failed: Connection refused channel 2: open failed: connect failed: Connection refused 
channel 2: open failed: connect failed: Connection refused
channel 2: open failed: connect failed: Connection refused 
channel 2: open failed: connect failed: Connection refused 
```

namenode webUI（50070端口也不可用），我可以ssh到namenode但在namenode内部，看起来没有安装Hadoop或Java，这很奇怪吗？

# java - NullPointerException JApplet with getClass().getResource

> ID：10117794
> 
> 赞同：1
> 
> 时间：2012-04-12T05:18:41.513
> 
> 标签：java, swing, nullpointerexception, japplet

我想在 JApplet 中向 JPanel 添加一个图像（以便我可以创建 jar 文件），所以我使用了：

```
Image x = Toolkit.getDefaultToolkit().getImage(
  getClass().getResource("D:/THANH_TAI LIEU/niet/hinhtu.jpg")); 
```

但是发生了 java.lang.NullPointerException。我确定图像路径是正确的，因为我使用时小程序运行良好：

```
Image image = ImageIO.read(new File("D:/THANH_TAI LIEU/niet/hinhtu.jpg")); 
```

例外情况：

```
 Exception in thread "AWT-EventQueue-1" java.lang.NullPointerException
at sun.awt.SunToolkit.getImageFromHash(SunToolkit.java:830)
at sun.awt.SunToolkit.getImage(SunToolkit.java:887)
at applet$CustomPanel.paintComponent(applet.java:65)
at javax.swing.JComponent.paint(JComponent.java:1029)
at javax.swing.JComponent.paintChildren(JComponent.java:862)
at javax.swing.JComponent.paint(JComponent.java:1038)
at javax.swing.JComponent.paintChildren(JComponent.java:862)
at javax.swing.JComponent.paint(JComponent.java:1038)
at javax.swing.JComponent.paintChildren(JComponent.java:862)
at javax.swing.JComponent.paint(JComponent.java:1038)
at javax.swing.JLayeredPane.paint(JLayeredPane.java:567) 
```

编码：

```
 import java.awt.BorderLayout;
  import java.awt.Color;
  import java.awt.Graphics;
  import java.awt.Image;
  import java.awt.Toolkit;
  import java.io.File;
  import java.io.IOException;

  import javax.imageio.ImageIO;
  import javax.swing.BorderFactory;
  import javax.swing.ImageIcon;
  import javax.swing.JApplet;
  import javax.swing.JButton;
  import javax.swing.JLabel;
  import javax.swing.JPanel;

  public class applet extends JApplet {
  public void init() {
    //Execute a job on the event-dispatching thread:
    //creating this applet's GUI.
    try {
        javax.swing.SwingUtilities.invokeAndWait(new Runnable() {
            public void run() {
                createGUI();
            }
        });
    } catch (Exception e) {

        e.printStackTrace();
    }
}

  private void createGUI() {
    JPanel panel = new JPanel(new BorderLayout());
    JButton button = new JButton("CLICK ME");
    panel.add(button, BorderLayout.SOUTH);
    panel.add(new CustomPanel(), BorderLayout.CENTER);

    add(panel);
    }

public class CustomPanel extends JPanel{

    public void paintComponent(Graphics g) {

        Image image = null;
        try {
            image = ImageIO.read(new File("D:/THANH_TAI LIEU/niet/hinhtu.jpg"));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Image x = Toolkit.getDefaultToolkit().getImage(getClass().getResource("D:/THANH_TAI LIEU/niet/hinhtu.jpg"));
        g.drawImage(x, 0, 0, null); 

    }   

}
} 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T05:42:09.787

`getClass().getResource()`
仅适用于项目的类路径。
您需要将图像文件放在类路径上，以便找到可以读取参数
中 `ImageIO.read()`作为输入流传递的任何内容的位置。

# iphone - 如何避免使用正则表达式在文本字段中输入连字符？

> ID：10117799
> 
> 赞同：0
> 
> 时间：2012-04-12T05:18:52.883
> 
> 标签：iphone, objective-c, regex, nsregularexpression

我有一个文本字段，我在其中使用正则表达式执行验证。但是当用户在文本字段中输入连字符并单击按钮时，我遇到了一个问题，然后应该提供一个警报，表明没有输入是无效的。我正在对字符串和特殊字符执行验证，但对于特殊字符，它没有得到验证。

这是我的代码：

```
NSRegularExpression *regex = [[[NSRegularExpression alloc]
                                               initWithPattern:@"[a-zA-Z][#$%&*()']" options:0 error:NULL] autorelease]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:27:33.387

不要因为用户输入了您不喜欢的字符而显示警报。这是糟糕的用户体验，尤其是在使用更容易出现拼写错误的软键盘时。

相反，处理输入以提取您想要的字符。考虑编写一个带有电话号码输入字段的 Web 表单。您对电话号码中的人类可读格式不感兴趣——连字符、国家代码的加号前缀等。但没有什么可以阻止用户输入这些字符。您有可以去除无效字符的代码，留下您想要的。

`NSString`甚至可以让您轻松完成`-stringByTrimmingCharactersInSet:`. `NSCharacterSet`您使用要从给定实例中删除的字符定义 an `NSString`，invoke `-stringByTrimmingCharactersInSet:`，然后您将获得一个自动释放的`NSString`实例，其中仅包含您想要的字符，例如：

```
NSString          *rawInput; // value assigned elsewhere to @"555-555-1212"
NSCharacterSet    *characterSet = [ NSCharacterSet characterSetWithCharactersInString: @"-" ];
NSString          *processedInput = nil;

processedInput = [ rawInput stringByTrimmingCharactersInSet: characterSet ];

NSLog( @"processedInput: %@", processedInput ); // logs "5555551212" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:14:17.450

您可以使用检查连字符的出现`rangeOfString`

```
NSRange k = [str rangeOfString:@"-"];
if(k.length != 0)
  ... Show your alert message 
```

我觉得这将满足您的要求，如果 regexp.. 则无需增加复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:02:25.750

我对objective-c不是很熟悉，它是正则表达式的味道，我也不*完全*清楚你在问什么，但你的正则表达式*不会*匹配连字符。它应该匹配一个后跟以下字符之一的字母：`#$%&*()'`. 下面是一些应该匹配和不应该匹配的例子：

```
SHOULD MATCH              SHOULD NOT MATCH
----    ----            ----  ------  ------
 a#      a$              A     --      C3PO
 A)      A*              #     -       huh?
 T%      Q#              g-    AA##    123
 j&      a(              $R    ()      bbb5
 z'      B&              qq    "D%"    ()- 
```

如果其中任何一个与您想要匹配的内容不一致，那么您需要提出一个包含您想要匹配的所需模式的问题。一些例子是：

*   “任意数量的字母、括号、星号、和号”
*   “除连字符和方括号 ( ) 之外的任意数量的任意字符`[]`”
*   “一到三个大写字母后跟一个可选数字”
*   ...或任何符合您要求的东西。

正则表达式是一种允许规范几乎任何基于文本的数据模式的语言。如果您不需要匹配模式，则可能不需要正则表达式。祝你好运！

# c# - 在子页面中触发所需的验证时，MasterPage 事件不起作用

> ID：10117801
> 
> 赞同：0
> 
> 时间：2012-04-12T05:19:25.757
> 
> 标签：c#, asp.net, validation, master-pages

我的 ASP.net 网站中有一个母版页。在这里我有一个按钮。它将导航到 wecomePage。这是后面的代码。

```
protected void ImageButtonShortcut1_Click(object sender, ImageClickEventArgs e)
{
  Response.Redirect("welcomePage.aspx", true);
  //Server.Transfer("welcomePage.aspx", true);
} 
```

现在我有一个继承上述主页面的子页面。在子页面内，我使用了带有`Required validation`.

```
<asp:TextBox ID="TextBox_Model" runat="server">  </asp:TextBox>
          <asp:RequiredFieldValidator ID="RequiredFieldValidator6" runat="server" 
                         ControlToValidate="TextBox_Model" ErrorMessage="Model Required"></asp:RequiredFieldValidator> 
```

场景：当用户导航到上面的子页面并且没有在该文本框中输入任何内容时，他正试图点击母版页按钮以返回`WelcomePage`。

不幸的是，它不允许导航，因为用户尚未填写必填字段。我该如何克服这个问题？请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:53:55.653

您似乎没有将 ValidationGroup 用于其对应按钮的 RequiredFieldValidator。尝试使用它

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator6" runat="server" 
                ValidationGroup="WelcomePageTxtBox" ControlToValidate="TextBox_Model" ErrorMessage="Model Required"></asp:RequiredFieldValidator> 
        <asp:Button ID="Button2" runat="server" ValidationGroup="WelcomePageTxtBox" Text="Button" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:59:46.267

基本上每个控件都会发生这种情况，将 CausesValidation 属性设置为 True。

来自[必填字段验证器和页面有效方法](http://weblogs.asp.net/rajbk/archive/2007/03/15/page-isvalid-and-validate.aspx)

> Validate 方法遍历页面上所有启用的验证控件并对其进行验证。此事件在页面生命周期中的 Load 事件之后发生。
> 
> 如果引发事件的控件指定了 ValidationGroup，则仅通过调用 Page.Validate(ValidationGroup) 重载方法来验证属于同一 ValidationGroup 的已启用验证器控件。如前所述，对于将 CausesValidation 属性设置为 true 的控件，这是自动完成的。

1.  指定验证组只会在页面生命周期内得到验证

在后面的代码中你可以这样做

```
protected void button2_click(object sender, EventArgs e)
{
if(!page.isValid)
 //show errors
}
else
{
 // do some stuffs
} 
```

# r - $ 运算符对 HH R 中的原子向量无效

> ID：10117805
> 
> 赞同：0
> 
> 时间：2012-04-12T05:20:06.613
> 
> 标签：r, rscript

我正在尝试生成此图。 [使用这个包](http://rgm2.lab.nig.ac.jp/RGM2/func.php?rd_id=HH%3aae.dotplot)

以下是数据文件
RAND,PREF,SEA,SN

```
Cummulative,Q1,68,1238
Current,Q1,67,1243
Cummulative,Q2,70,1238
Current,Q2,69,1243
Cummulative,Q3,75,1238
Current,Q3,75,1243
Cummulative,Q4,78,1238
Current,Q4,81,1243
Cummulative,Q5,71,1238
Current,Q5,68,1243
Cummulative,Q6,77,1238
Current,Q6,76,1243
Cummulative,Q7,78,1238
Current,Q7,80,1243
Cummulative,Q8,78,1238
Current,Q8,81,1243
Cummulative,Q9,69,1238
Current,Q9,68,1243
Cummulative,Q10,69,1238
Current,Q10,68,1243
Cummulative,Q11,73,1238
Current,Q11,74,1243
Cummulative,Q12,77,1238
Current,Q12,79,1243
Cummulative,Q13,74,1238
Current,Q13,73,1243
Cummulative,Q14,76,1238
Current,Q14,75,1243
Cummulative,Q15,71,1238
Current,Q15,72,1243
Cummulative,Q16,63,1238
Current,Q16,67,1243
Cummulative,Q17,71,1238
Current,Q17,70,1243 
```

代码：

```
eqdata <- read.table(datafile , header = T,sep=",")
#eqdata <- as.data.frame(eqdata)
eqdata1 <- hh(eqdata)

aed <- logrelrisk(eqdata1)

p <- ae.dotplot(aed, A.name="TREATMENT A (N=216)",B.name="TREATMENT B (N=431)") 
```

输出：ae$SAE 中的错误：$ 运算符对原子向量无效调用：logrelrisk

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:30:41.890

剪断`eqdata1 <- hh(eqdata)`线。从`?hh`文档中可以看出，此函数仅返回指定文件的路径，因此`data.frame`不是`logrelrisk()`.

```
eqdata <- read.table(datafile , header = T,sep=",")
#eqdata <- as.data.frame(eqdata)
# eqdata1 <- hh(eqdata)

aed <- logrelrisk(eqdata)

p <- ae.dotplot(aed, A.name="TREATMENT A (N=216)",B.name="TREATMENT B (N=431)") 
```

# php - '发生错误。请稍后再试 Facebook 身份验证对话框上的消息

> ID：10117815
> 
> 赞同：1
> 
> 时间：2012-04-12T05:21:35.517
> 
> 标签：php, facebook, localhost

我是一个新手，正在尝试使用 PHP 和 Facebook 的 PHP SDK 创建一个 Facebook 应用程序。该应用程序托管在 Heroku 上，他们提供的示例应用程序运行良好。但是，我现在正试图让示例应用程序在 Apache 2.2 上运行，并且在此过程中遇到了很多问题。好吧，直截了当，我最近的问题是尝试在 localhost 上进行 Facebook 登录，但是“发生错误”。请稍后再试”出现在弹出对话框中。这不会发生在 Heroku 上。

如果我可以采取任何步骤来克服这个错误，有人会告诉我吗？我认为这与任何编码错误无关，因为我只是按照提供的示例应用程序进行操作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:26:43.850

发生这种情况是因为 FB 无法识别发出请求的主机的 URL。您需要确定 localhost 服务器的 FQDN 是什么，然后将其添加到`Site URL`FB 应用程序设置管理器的部分。您现在有可能在其中拥有 Heroku 服务器的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T09:22:53.080

这很简单。在本地主机中，您必须在 facebook 中为 localhost 创建另一个示例应用程序。并且您必须拥有权限。然后您可以登录并使用本地应用程序。

只需为您的应用程序的每个副本。您必须在 facebook 中创建它

希望对你有帮助

祝你好运

# asp.net - 只有 ASPX (HTML) 文件通过虚拟目录运行，但连接到数据库时找不到 web.config 连接

> ID：10117816
> 
> 赞同：0
> 
> 时间：2012-04-12T05:21:36.060
> 
> 标签：asp.net

只有 ASPX (HTML) 文件通过虚拟目录运行，但是当连接到数据库时，它找不到 web.config 连接。我的代码..

```
<appSettings>
     <add key="ugs" value="data source=192.168.0.235\SQLEXPRESS,80; Persist Security Info=True; initial catalog=ugs_academy; integrated security=true;" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:38:33.110

那是因为您需要将信息放在 connectionStrings 元素中。 [在 MSDN 上阅读更多信息](http://msdn.microsoft.com/en-us/library/bf7sd233.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:46:50.467

您可以参考此链接， [如何从 AppSetttings 中获取值，还可以阅读有关 appsettings](http://www.dotnetfunda.com/articles/article80.aspx) [AppSettings](http://odetocode.com/Articles/345.aspx)的优秀文章

```
string ConnStr= System.Configuration.ConfigurationManager.AppSettings["ugs"].ToString(); 
```

然后稍后将此连接字符串传递给打开的 SqlConnection 类。

```
using(SqlConnection connObj = new SqlConnection(ConnStr))
{ 
   //do some thing with ConnObj. 
} 
```

# javascript - 使用 javascript 或 jquery 显示下拉值

> ID：10117818
> 
> 赞同：0
> 
> 时间：2012-04-12T05:21:45.413
> 
> 标签：javascript, jquery

我有以下代码在下拉列表中添加值，值被添加但没有显示在下拉列表中，我已经通过使用 jquery fruntions 添加下拉列表后读取值来测试它，但为什么不应该这样做显示在下拉列表中，您能告诉我一个解决方案吗？

1) 下拉

```
 <select id="year" name="year" onchange="test2(this.value)">
    <option value="">Choose Year</option> 
```

2）javascript和jquery代码

```
function getVa2()
    {

     var jSelect=$("select[name='year']");
            jSelect.removeAttr('disabled');

    var lnk =new Array();
    var cnt=0;
    var val=new Array

    $("#data1 a").each(function(index){
    if($(this).attr("class")=="subcategory_link")
    {

    lnk[cnt]=$(this).attr("href");

     cnt=cnt+1;

    }
    });
    cnt=0;
    $("#data1 span").each(function(ind){
    if($(this).attr("class")=="subcategory_name")
    {
      val[cnt]=$(this).text();

      cnt=cnt+1;

    }
    });

    var select1 = document.getElementById("year");

    $("#year").empty();

    select1.options[select1.options.length]=new Option("[ Select Your Series ]","");

        for(i=0; i<lnk.length;i++)
        {

        select1.options[select1.options.length] = new Option(val[i], lnk[i]);
        }

              //This displayes values from drop down in alert

    $("#year option").each(function(){
    alert($(this).val()+'-'+$(this).text());
    });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:28:44.003

如果我做对了：

```
...
for(i=0; i<lnk.length;i++)
{

    $(select1).append($("<option>").val(val[i]).text(lnk[i]));
}

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:29:22.587

像这样使用它怎么样

```
for(i=0; i<lnk.length;i++)
{
   var my_option = '<option>'+text(lnk[i])+'</option>';
   $('#selection_id').html(my_option);
} 
```

# php - 限制用户输入特殊字符和数字

> ID：10117821
> 
> 赞同：1
> 
> 时间：2012-04-12T05:22:22.930
> 
> 标签：php, javascript, validation

如何限制用户在文本框中输入特殊字符和数字。我只想输入字母（键入/粘贴）。

给我示例 javascript 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:25:52.880

看看这个问题：[Function to return only alpha-numeric characters from string?](https://stackoverflow.com/questions/5199133/function-to-return-only-alpha-numeric-characters-from-string)

这就是你所追求的：

```
$result = preg_replace("/[^a-zA-Z0-9]+/", "", $inputVar); 
```

如果您在那之后将其插入数据库，请务必使用类似`mysql_real_escape_string()`或准备好的语句。

仅依靠 Javascript 进行字符验证是一种非常糟糕的做法，因为 JS 很容易被禁用，并且并非在全球所有设备上都启用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:36:06.297

与其阻止某些字符的输入，不如在提交表单时验证值更加用户友好和有效。在此之前你真的不关心字段的值是什么，你也不需要对值的输入方式进行特殊处理。它可能被粘贴、拖动、自动输入、通过插件或脚本或其他方法输入。

一个简单的例子：

```
</script>

<form onsubmit="return validate(this);">
  <input type="text" name="foo">
  <input type="submit">
</form>

<script type="text/javascript">
function validate(form) {
  var re = /^[a-z,A-Z]+$/i;

  if (!re.test(form.foo.value)) {
    alert('Please enter only letters from a to z');
    return false;
  }
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T05:45:16.757

你可以试试这个，我现在正在为我当前的项目使用这个

```
$(document).ready(function(){

/* Allow integers only in form input field with id #selector */
$('#selector').keyup(function () { 
    this.value = this.value.replace(/[^0-9\.]/g,'');
  });   
 }) 
```

它也不允许复制粘贴，但缺点是右键单击然后粘贴

免责声明：我只是从互联网上找到的

# java - java与休眠

> ID：10117823
> 
> 赞同：-2
> 
> 时间：2012-04-12T05:22:23.837
> 
> 标签：java

我有一个代码，它从数据库中获取日期，我从中获取年份如下代码：

```
 Date expiryDate=dataMgr.getDate(); 
 int validity=2;    
 expiryDate.setYear(expiryDate.getYear() + validity); 
 // some piece of code
 tx.commit(); 
```

我正在使用休眠从数据库中获取。一切正常，但问题是在提交之后......我从中获取日期的数据库年份（dataMgr.getDate（））也发生了变化，我不知道为什么？有人可以清除我吗？？？

例如，形成上面的代码`expiryDate:4/21/2012`（来自数据库）。提交后它被更改为`4/21/2014`不应该发生的数据库？我没有在任何地方使用过相应的对象或在任何地方更新？？？

帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:28:16.773

对象位于`Persistent state`单个`transaction`. 此外，两者`expiryDate`和`dateMgr.getDate`都指的是同一个对象。

获取对象的克隆而不是获取引用

```
Date expiryDate=dataMgr.getDate().clone(); 
```

我不确定语法，请检查。

# salesforce - Visualforce apex：查找/参考字段上的 inlineEditSuport

> ID：10117829
> 
> 赞同：2
> 
> 时间：2012-04-12T05:22:56.673
> 
> 标签：salesforce, visualforce

我有一个带有查找字段的对象，并希望在 VisualForce 页面中的该字段上使用 InlineEditSupport。

但是 apex:outputField 标记将查找字段呈现为超链接，这会覆盖 inlineEditSupport 逻辑。

例如

```
<apex:page standardController="Contact">

    <apex:outputField value="{!Contact.LastName}">
        <apex:inlineEditSupport event="ondblclick"/>
    </apex:outputField>

    <apex:outputField value="{!Contact.AccountId}">
        <apex:inlineEditSupport event="ondblclick"/>
    </apex:outputField>

</apex:page> 
```

在本例中，LastName 字段将由 apex:outputField 标签呈现，并在双击时转换为可编辑字段。

但是，“帐户”字段呈现为帐户记录本身的超链接，它会在点击事件触发之前采取行动。

我*可以*通过使用另一个 javascript 事件来完成这项工作 - 即鼠标悬停，但这并不是特别用户友好。我需要保持一致的用户体验并使用双击操作。

有什么方法可以防止“帐户”字段呈现为链接，或者以某种方式在其旁边插入“编辑”图标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-18T15:42:44.310

我在 pageBlockTable 格式的内联编辑中遇到了同样的问题。我们觉得这不是用户友好的。

我使用 JavaScript (jQuery) 将链接转换为纯文本，并使其表现得像其他 inlineEditable 字段：

```
/// Overwrite default functionality for lookup columns (links to object page)
///   Change to text-only of name to prevent navigation away
$('TABLE[id$=checklistTable] TBODY TR TD A[id^=lookup]').each(function() {
    var text = $(this).html();
    $(this).parent().html(text);
}); 
```

这将转换匹配的 jQuery 选择器中的所有 SalesForce 查找字段。它还取决于生成的输出 HTML 创建具有以“查找”开头的 ID 的锚链接（这意味着 SalesForce 可能会在未来的更新中更改/破坏它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:36:48.477

这可能不是最简单的方法，但我之前所做的是在查找中创建记录名称的选择列表。无论如何，我认为这对用户来说比销售人员查找框更好（除非有数百个，我想）。您需要做的是在控制器中创建一个选择选项列表，并将它们分配给诸如 theList 之类的变量，然后引用 {!theList} 您​​想要放置它的位置（大致；参见文档）。选择选项需要将记录名称作为标签，将记录 ID 作为值。然后，您可以将 Id 直接分配给查找字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T00:20:06.470

你试过salesforce doc吗？

```
<apex:page standardController="Contact">
<apex:form >
    <apex:pageBlock mode="inlineEdit">
        <apex:pageBlockButtons >
            <apex:commandButton action="{!edit}" id="editButton" value="Edit"/>
            <apex:commandButton action="{!save}" id="saveButton" value="Save"/>
            <apex:commandButton onclick="resetInlineEdit()" id="cancelButton" value="Cancel"/>
        </apex:pageBlockButtons>
        <apex:pageBlockSection >
            <apex:outputField value="{!contact.lastname}">
                <apex:inlineEditSupport showOnEdit="saveButton, cancelButton" hideOnEdit="editButton" event="ondblclick" changedStyleClass="myBoldClass" resetFunction="resetInlineEdit"/>
            </apex:outputField>
            <apex:outputField value="{!contact.accountId}"/>
            <apex:outputField value="{!contact.phone}"/>
        </apex:pageBlockSection>
    </apex:pageBlock>
</apex:form> 
```

# iphone - 取消 ASIHTTP 请求

> ID：10117830
> 
> 赞同：0
> 
> 时间：2012-04-12T05:23:02.030
> 
> 标签：iphone

我使用 ASIHTTP 请求访问 web html 页面。

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:requestURL]];
[request setTag:selectTag];
[request setDownloadCache:[ASIDownloadCache sharedCache]];
[request setCachePolicy:ASIAskServerIfModifiedCachePolicy | ASIFallbackToCacheIfLoadFailsCachePolicy]; 
[request setCachePolicy:ASIOnlyLoadIfNotCachedCachePolicy];
[request setDelegate:self];

[request startAsynchronous]; 
```

如果我从一个 ViewController 导航到另一个。

如果尚未触发“requestFinished”，是否可以取消此异步 http 请求？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:45:39.287

ASIHttpRequest 存在以下方法，您可以使用它来取消请求 -

```
- (void)cancel {
        [self performSelector:@selector(cancelOnRequestThread) onThread:[[self class] threadForRequest:self] withObject:nil waitUntilDone:NO];    
} 
```

您可以调用此方法-

```
[request cancel]; 
```

# android - 如何在 COCOS2D Android 中放置时间延迟

> ID：10117834
> 
> 赞同：0
> 
> 时间：2012-04-12T05:23:29.643
> 
> 标签：android, design-patterns, cocos2d-iphone, delay

与其中的 Android 解锁模式类似，最初所有的圆形单元格都是灰色的。在我们绘制一些图案的过程中，那些被触摸的单元格会变成绿色，如果那个图案不正确，那么被触摸的单元格会变成红色，大约 3 秒后，它们会变成灰色。我正在使用 COCOS2D 做类似的事情。在将单元格恢复为灰色之前，我很难引入 3 秒的延迟。任何建议...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:59:32.323

您可以**`CCSequence`**在第一次放置**`CCDelayTime`**和第二次放置中使用**`CCCallFuncN`**（其中包含再次将您的圆圈着色为灰色的逻辑）

下面我为您提供 iOs 代码逻辑

```
id action1 = [DelayTime ...];
id action2 = [CallFunc ...];
id seq = [Sequence actions:action1, action2, nil];

[someNode runAction:seq]; 
```

# javascript - Javascript点击功能不起作用

> ID：10117841
> 
> 赞同：0
> 
> 时间：2012-04-12T05:24:08.883
> 
> 标签：javascript, javascript-events

我需要在单击时将文本框中的值设为空，目前我已经编写了这样的代码

```
 <div class="keyword_non">
                        <h1>Keywords : <a class="someClass question_off" title="Keywords "></a></h1>
                        <h2><input type="text" name="kw1" value="one" /></h2>
                        <h2><input type="text" name="kw2" value="two" /></h2>
                        <h2><input type="text" name="kw3" value="three" /></h2>
                        <h2><input type="text" name="kw4" value="four" /></h2>

                    </div>
<script type="text/javascript" src="/functions/javascript/custom/non_profit_edit.js"></script>
<script type="text/javascript" src="/functions/javascript/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="/functions/javascript/custom/jquery-ui-1.8.7.custom.min.js"></script> 
```

在 non_profit_edit.js 里面我是这样写的

```
$(document).ready(function(){

        $(".kw1").click(function() { 
        $(".kw1").val(" ");          
        });

        $(".kw2").click(function() { 
        $(".kw2").val(" ");          
        });

        $(".kw3").click(function() { 
        $(".kw3").val(" ");          
        });

        $(".kw4").click(function() { 
        $(".kw4").val(" ");          
        });

}); 
```

但是现在写它不能正常工作......这是任何浏览器问题或代码错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:26:38.627

代码错误。

您的选择器`".kw1"`选择具有`kw1`作为`class`属性的元素。您的输入都没有类，它们只有`name`s。向它们添加类或将 jQuery 中的选择器替换为以下格式：`$('[name="kw1"]')`

您还可以通过执行以下操作来简化您的功能：

```
$('.keyword_non')
    .on('click', 'input[type="text"]', function(e) {
        this.value = ''; // input that was clicked on
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:27:01.030

在选择器中的“。” 表示一个类。对于名称使用

```
$('[name="kw1"]'). // 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:28:04.540

这是您的代码中的语法错误。您没有在 click 函数中使用点 (.)。点 (.) 将用于类。当 kw1 是您输入中的名称时

# salesforce - 如何在销售人员的机会上设置权限以查看自己创建的机会而不是其他用户机会

> ID：10117851
> 
> 赞同：0
> 
> 时间：2012-04-12T05:24:56.063
> 
> 标签：salesforce

问题是当我登录 Salesforce 并找到机会时，我看到了我自己的机会以及其他不是我创造的机会。

请帮助我如何设置机会许可，以便用户可以看到自己的机会而不是其他人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:55:52.573

如果共享模型是私有的，则有几个潜在原因可以让您看到其他用户的机会。如果您拥有系统管理员配置文件，如果您拥有“修改所有数据”或“查看所有数据”配置文件权限，或者如果您对机会对象拥有“修改全部”或“查看全部”权限，您将能够查看组织中的所有机会。您还可以查看角色层次结构中低于您的用户的机会，以及通过共享规则共享给您的任何机会。最后，您还可以看到属于您拥有的客户的任何机会，即使您本身并不拥有这些机会。

# javascript - 寻找IE的开发者插件

> ID：10117852
> 
> 赞同：0
> 
> 时间：2012-04-12T05:24:58.430
> 
> 标签：javascript, jquery, html, css, internet-explorer

我很难在 IE 中进行网站设计。它实际上在 mozilla、chrome、opera 和 safari 中运行良好，但在 IE 中非常混乱。所以我的问题是“有没有像**IE的****萤火虫**这样的插件”？

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T05:28:19.393

对于 IE9+，只需按 F12 即可获得开发者工具。

对于较旧的 IE（8 及以下），您有Office 2003 附带的[调试栏](http://www.debugbar.com/)或[Microsoft 脚本编辑器](http://en.wikipedia.org/wiki/Microsoft_Script_Editor)（很奇怪不是吗？为什么调试工具附带办公工具。MS 真的很奇怪）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T05:27:57.387

是的，在一定程度上。在这里查看更多信息 - [http://getfirebug.com/firebuglite](http://getfirebug.com/firebuglite)

祝你好运，玩得开心！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T05:29:12.063

IE 9 具有类似于 Firebug 的开发工具。只需按 F12

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T05:27:58.280

不是我知道的，但是如果有帮助，您可以打开脚本调试。这个链接是旧的，但可能仍然有用：http: [//blogs.msdn.com/b/ie/archive/2004/10/26/247912.aspx](http://blogs.msdn.com/b/ie/archive/2004/10/26/247912.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T05:31:16.640

您可以使用 Internet Explorer 开发人员工具栏：[http ://www.microsoft.com/download/en/details.aspx?id=18359](http://www.microsoft.com/download/en/details.aspx?id=18359)**

# c# - 串口异步读取（非阻塞）+线程

> ID：10117861
> 
> 赞同：1
> 
> 时间：2012-04-12T05:25:44.460
> 
> 标签：c#, asynchronous, serial-port, nonblocking

好吧，在过去的 4 天里，我一直在用 C# 中的这个 SerialPort 控件苦苦挣扎，但没有令人满意的结果。让我解释：

我有一个与 ac# prog 通信的设备（Arduino UNO 板），它模拟一个秤（简单的请求/响应模式），设备发送一个由 3 个字节组成的命令序列（要求称重）：CHR(27)+P +CHR(13) 所以模拟器以模拟重量响应（我已经整理了设备如何捕获和解析这个重量，所以这不再是问题）。使用 DataReceive 事件似乎我正在使用 Serialport.Read() 丢失数据，所以到目前为止我浪费了这种方法。模拟器必须始终监听所述序列。字节数，并且必须有一个 GUI。

如果需要进一步澄清，我可以提供我到目前为止所做的代码。希望您能对此有所了解。

提前致谢。

更新 1

* * *

这是我到目前为止的代码：

```
ConcurrentQueue<byte> queue = new ConcurrentQueue<byte>();
....
private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
   bool listening = true;
   while(listening)
   {
     if(serialPort.BytesToRead > 0)
     {
        byte b = (byte)serialPort.ReadByte();
        queue.Enqueue(b);
     }
   }
} 
```

因此，由于命令必须以字符 13（ASCII 中的 CR）结尾：

```
public string GetCommand()
{
    string ret = "";
    byte[] ba = new byte[1];
    byte b = (byte)' ';

    while(b!=13)
    {
       if(queue.TryDequeue(out b))
       {
          ba[0] = b;
          ret += ASCIIEncoding.ASCII.GetString([ba]);
       } 
    }
    return ret;
} 
```

为了测试这个 GetCommand() 方法，我在 button_click 事件中从主 ui 线程调用它，但它挂起应用程序，我需要创建另一个线程来调用 GetCommand() 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T04:02:14.760

这适用于少量数据。但是如果数据更大，比如传递一些 http 信息，那么队列大小可能不够。所以我认为你应该使用非阻塞类型的架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:32:10.150

有关如何实现发送方的信息，请参阅[此答案。](https://stackoverflow.com/a/9932884/224370)

对于读取端，使用专用线程，在该线程中从端口读取消息，将其放入合适的并发数据结构（例如[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)）中并立即循环返回以等待来自串行端口的下一个输入。

在单独的线程上使用来自队列的输入。

可能有更有效的方法，但这种方法易于实施且万无一失。

# javascript - MustacheJs 中的开关盒

> ID：10117862
> 
> 赞同：0
> 
> 时间：2012-04-12T05:25:45.347
> 
> 标签：javascript, templates, logic, mustache, presentation

使用 Mustache js（一种逻辑较少的模板）有没有办法实现 switch case？这是我需要的，因为根据值将一个类分配给 dom 元素，例如：

```
switch(tasks.Count)
{
   case 0:
       element.Class = "no-tasks";
    break;
   case 1:
       element.Class = "one-tasks";
   break;
.
.
.
} 
```

这就是我现在得到的代码，我如何将它转换为模板（我相信在正在渲染的模型上有方法是一种选择）但是添加方法来确定要使用哪个类是一种矫枉过正，除此之外还会污染我的模型沼泽！！

*   我问这个是因为我使用 Nustache 将 MustacheJs 移植到 C#、.NET 来呈现嵌套模型。适用于 Mustache 的任何东西也适用于 Nustache

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T05:42:28.817

有几种方法可以做到这一点。

在 Javascript 中，如果 Mustache 在值中遇到函数，它将使用封闭的文本作为唯一参数调用它。

```
var data = {
    foo: function(text) { return '<b>' + text + '</b>'; }
} 
```

胡子

```
{{#foo}}
   HI I LIKE FISH, thanks.
{{/foo}} 
```

输出

```
<b>HI I LIKE FISH, thanks.</b> 
```

在 mustache 文档中搜索“lambda”。

另一种方法是进行虚假/真实检查。

数据

```
{ foo: true } 
```

胡子

```
{{#foo}}
  output this if true.
{{/foo}}
{{^foo}}
  output if false
{{/foo}} 
```

# php - 使用 PHP mail() 发送电子邮件

> ID：10117872
> 
> 赞同：1
> 
> 时间：2012-04-12T05:26:51.443
> 
> 标签：php, xampp, sendmail

我正在尝试使用 mail() 发送自动电子邮件。它发送一些电子邮件，但不是全部，大约 50%。为了测试，我对所有电子邮件使用相同的电子邮件地址，但仍然只有一些被送达。

我正在使用本地主机 XAMPP。

这是代码：

```
if ($_POST['sendEmail'] == "SEND Email") {

    ob_start();

    $buffer = str_repeat(" ", 4096);
    $buffer. = "\r\n some HTML \r\n";

    set_time_limit(0);
    $noEmails = $last - $first + 1;
    echo "Emails sent (of $noEmails):";
    for ($index = $first; $index <= $last; $index++) {
        $to = $email["$index"];
        $subject = "Hey {$firstName["
        $index "]}!";
        $message = "$emailMessage";
        $headers = 'From: my_account@gmail.com'."\r\n".'Reply-To: my_account@gmail.com'."\r\n".'X-Mailer: PHP/'.phpversion();
        sleep(1);
        mail($to, $subject, $message, $headers);
        echo $buffer.$index;
        ob_flush();
        flush();
    }
    ob_end_flush();
}​ 
```

请提出您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:41:30.693

对于**发送批量电子邮件**，您可以**设置一个 cron 作业**，该作业可能在 5 或 10 分钟后运行，一次仅发送少量电子邮件。在表中创建一个参考，以便您可以记录哪些地址已通过电子邮件发送。整个批量将被分成**小块**，因为它将在后台运行，它不会给您的**SMTP 服务器**带来巨大的负载。您应该使用**[PHP Mailer](http://phpmailer.worxware.com/)**或**[SwiftMailer](http://swiftmailer.org/)库**。

你可以看看这个问题来选择最好的 php 邮件库：

**[PhpMailer 与 Swiftmailer？](https://stackoverflow.com/questions/303783/phpmailer-vs-swiftmailer)**

希望这可以帮助。

# iphone - 如何在 iPhone 的 NSString 中查找或匹配两个字符

> ID：10117873
> 
> 赞同：0
> 
> 时间：2012-04-12T05:26:56.630
> 
> 标签：iphone, nsstring

我正在做 xml 解析，其中获取 Web 服务响应

[http://layzrd.gets-it.net:8889/ProfilePage.aspx?currentuserid=6&userid=6](http://layzrd.gets-it.net:8889/ProfilePage.aspx?currentuserid=6&userid=6)

现在在解析中，我需要将 currentuserid 与 userid 匹配，如果两者都匹配并且某些条件将被执行。我正在做 xml 解析，请有人告诉我如何匹配这个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:03:57.207

使用TBXML解析，非常好用。可能是它的工作

```
TBXML * tbxml = [[TBXML alloc] initWithURL:apiURL];
    if(tbxml)
    {

        TBXMLElement * root = tbxml.rootXMLElement; 

        if (root) 
        {  
            NSString * replyCode = [TBXML valueOfAttributeNamed:@"replyCode" forElement:root];

            if ([replyCode isEqualToString:@"success"])
            {
                TBXMLElement * Notifications    = [TBXML childElementNamed:@"Notifications" parentElement:root];
                TBXMLElement * Notification = [TBXML childElementNamed:@"Notification" parentElement:Notifications];
                while (Notification != nil) 
                {

                    NSString *idOfMessage = [TBXML valueOfAttributeNamed:@"id" forElement:Notification];
                    NSString *storeName = [TBXML valueOfAttributeNamed:@"storeName" forElement:Notification];
}}}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:36:32.150

```
if ([string1 isEqualToString:string2])
{

    //Strings compared do ur operations here
    /* returs yes (1) if both strings are equal else retur no (0)

} 
```

# iphone - iPhone 开发中的 EXC_BAD_ACCESS

> ID：10117874
> 
> 赞同：1
> 
> 时间：2012-04-12T05:26:57.253
> 
> 标签：iphone, ios, exc-bad-access

抱歉，这可能是一个简单的修复，因为我是 iPhone 开发的新手。

在我的代表中，按下创建配置文件按钮后，创建配置文件视图被推送：

```
-(void) createProfile_clicked:(id)sender
 {

   AddNewProfile *create = [[AddNewProfile alloc] init]; 

   [self.window addSubview:create.view];

  [self invisibleCreateProfileBar];

    AddNewProfile *controller = [[AddNewProfile alloc] initWithNibName:@"AddNewProfile" bundle:[NSBundle mainBundle]];
   [self.navigationController pushViewController:controller animated:YES ];

    currentController=controller;
} 
```

然后在 AddNewProfile.m 中：

```
- (IBAction)backgroundTap:(id)sender {
if([nameField isFirstResponder]){
    [nameField resignFirstResponder];
}

if([ageField isFirstResponder]){
    [ageField resignFirstResponder];
}

if([doctorNameField isFirstResponder]){
    [doctorNameField isFirstResponder];
}

if([doctorNumberField isFirstResponder]){
    [doctorNumberField resignFirstResponder];
}
   } 
```

每次使用我的任何控件，FirstResponder 被弄乱时，这都会导致 exc_bad_access 错误。我可以选择一个控件（文本框），但是一旦我单击其中一个，它就会崩溃。

任何帮助将不胜感激。

是否与保留任何字段有关？你们还需要代码吗？对不起，我对这一切真的很陌生。：/

* * *

编辑：

两个文件中的所有代码

appdelegate.m

```
#import "BIDDailyMedsAppDelegate.h"
#import "RootViewController.h"
#import "ProfileHomeViewController.h"
#import "AddNewProfile.h"
#import "BIDMedicationEditViewController.h"
#import "BIDMedicationListViewController.h"

@implementation BIDDailyMedsAppDelegate

@synthesize window = _window;
@synthesize navigationController;

UIToolbar *toolbar;

NSString *currentProfileName = @"";

@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;

AddNewProfile *currentController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    sleep(5);

    UIViewController *rootController = [[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil];

    navigationController = [[UINavigationController alloc] initWithRootViewController:rootController];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    [self.window addSubview:navigationController.view];

    //Initialize the toolbar 
    toolbar = [[UIToolbar alloc] init]; 
    toolbar.barStyle = UIBarStyleDefault;

    //Set the toolbar to fit the width of the app. 
    [toolbar sizeToFit];

    //Caclulate the height of the toolbar 
    CGFloat toolbarHeight = [toolbar frame].size.height;

    //Get the bounds of the parent view 
    CGRect rootViewBounds = self.navigationController.view.bounds;

    //Get the height of the parent view. 
    CGFloat rootViewHeight = CGRectGetHeight(rootViewBounds);

    //Get the width of the parent view, 
    CGFloat rootViewWidth = CGRectGetWidth(rootViewBounds);

    //Create a rectangle for the toolbar 
    CGRect rectArea = CGRectMake(0, rootViewHeight - toolbarHeight, rootViewWidth, toolbarHeight);

    //Reposition and resize the receiver 
    [toolbar setFrame:rectArea];

    //Create a button 
    UIBarButtonItem *createButton = [[UIBarButtonItem alloc] initWithTitle:@"Create Profile" style:UIBarButtonItemStyleBordered target:self action:@selector( createProfile_clicked:)];

    [toolbar setItems:[NSArray arrayWithObjects:createButton,nil]];

    //Add the toolbar as a subview to the navigation controller. [self.navigationController.view addSubview:toolbar];

    [self.window addSubview:toolbar];
    //[[self tableView] reloadData];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
}

-(NSString*) getCurrentName{
    return currentProfileName;
}
-(void) setCurrentName:(NSString*)name{
    currentProfileName=name;
}

-(void) createProfile_clicked:(id)sender {

    //[self.navigationController popViewControllerAnimated:YES];
    //[toolbar removeFromSuperview];
    AddNewProfile *create = [[AddNewProfile alloc] init]; 

    //[ removeFromSuperview];
    [self.window addSubview:create.view];
    //[toolbar removeFromSuperview];
    //[toolbar setOpaque:true];
    [self invisibleCreateProfileBar];

    //[creater pushViewController: animated:YES];

    AddNewProfile *controller = [[AddNewProfile alloc] initWithNibName:@"AddNewProfile" bundle:[NSBundle mainBundle]];
    [ self.navigationController pushViewController:controller animated:YES ];
    //[self.navigationController.view addSubview:controller];

    //[self.navigationController presentModalViewController:controller animated:YES];
    //currentController=controller;
    //[currentController.nameField becomeFirstResponder];

}

-(void) clearCreateProfileFields{

    if([currentController.nameField isFirstResponder]){
        [currentController.nameField resignFirstResponder];
    }

    if([currentController.ageField isFirstResponder]){
        [currentController.ageField resignFirstResponder];
    }

    if([currentController.doctorNameField isFirstResponder]){
        [currentController.doctorNameField isFirstResponder];
    }

    if([currentController.doctorNumberField isFirstResponder]){
        [currentController.doctorNumberField resignFirstResponder];
    }
    //[self becomeFirstResponder];
}

-(void) addMedication_clicked:(id)sender{
    //BIDMedicationEditViewController *editMed = [[BIDMedicationEditViewController alloc] init];

    //[self.window addSubview:editMed.view];
    //[self.navigationController pushViewController:self.profileHomeController animated:YES];

    BIDMedicationEditViewController *controller = [[BIDMedicationEditViewController alloc] initWithNibName:@"MedicationEditView" bundle:[NSBundle mainBundle]];
    [self.navigationController pushViewController:controller animated:YES];

}

-(void) medicationMenu_clicked:(id)sender{
    //BIDMedicationListViewController *viewMed = [[BIDMedicationListViewController alloc] init];
    //[self.window addSubview:viewMed.view];
    //[self.navigationController pushViewController: animated:<#(BOOL)#>];

    BIDMedicationListViewController *controller = [[BIDMedicationListViewController alloc] initWithNibName:@"MedicationListView" bundle:[NSBundle mainBundle]];
    [self.navigationController pushViewController:controller animated:YES];
    //[controller release];
}

-(void) invisibleCreateProfileBar
{
    //[toolbar removeFromSuperview];
    [toolbar setHidden:true];
}

-(void) visibleCreateProfileBar
{
    [toolbar setHidden:false];
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    /*
     Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
     Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
     */
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    /*
     Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
     If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
     */
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    /*
     Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
     */
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    /*
     Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
     */
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Saves changes in the application's managed object context before the application terminates.
    [self saveContext];
}

- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil)
    {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error])
        {
            /*
             Replace this implementation with code to handle the error appropriately.

             abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
             */
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
}

#pragma mark - Core Data stack

/**
 Returns the managed object context for the application.
 If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.
 */
- (NSManagedObjectContext *)managedObjectContext
{
    if (__managedObjectContext != nil)
    {
        return __managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil)
    {
        __managedObjectContext = [[NSManagedObjectContext alloc] init];
        [__managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return __managedObjectContext;
}

/**
 Returns the managed object model for the application.
 If the model doesn't already exist, it is created from the application's model.
 */
- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil)
    {
        return __managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"DailyMeds_withCoreData" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
}

/**
 Returns the persistent store coordinator for the application.
 If the coordinator doesn't already exist, it is created and the application's store added to it.
 */
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil)
    {
        return __persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"DailyMeds_withCoreData.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error])
    {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 

         Typical reasons for an error here include:
         * The persistent store is not accessible;
         * The schema for the persistent store is incompatible with current managed object model.
         Check the error message to determine what the actual problem was.

         If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

         If you encounter schema incompatibility errors during development, you can reduce their frequency by:
         * Simply deleting the existing store:
         [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

         * Performing automatic lightweight migration by passing the following dictionary as the options parameter: 
         [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

         Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.

         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    return __persistentStoreCoordinator;
}

#pragma mark - Application's Documents directory

/**
 Returns the URL to the application's Documents directory.
 */
- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}

@end 
```

这是创建 profile.m 文件：

```
#import "AddNewProfile.h"
#import "BIDDailyMedsAppDelegate.h"
#import "BIDDailyMedsAppDelegate.h"

@implementation AddNewProfile
@synthesize nameField;
@synthesize ageField;
@synthesize doctorNameField;
@synthesize doctorNumberField;
@synthesize saveButton;
@synthesize sexField;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    //[nameField becomeFirstResponder];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [self setNameField:nil];
    [self setAgeField:nil];
    [self setDoctorNameField:nil];
    [self setDoctorNumberField:nil];
    [self setSaveButton:nil];
    [self setSexField:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)pressSave:(id)sender {

    BIDDailyMedsAppDelegate *appDelegate = 
    [[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *context = 
    [appDelegate managedObjectContext];
    NSManagedObject *newContact;
    newContact = [NSEntityDescription
                  insertNewObjectForEntityForName:@"Profiles"
                  inManagedObjectContext:context];
    [newContact setValue:self.nameField.text forKey:@"name"];
    [newContact setValue:self.ageField.text forKey:@"age"];
    if(self.sexField.selected==0){
        [newContact setValue:@"YES" forKey:@"male"];
    }else{
        [newContact setValue:@"NO" forKey:@"male"];
    }
    [newContact setValue:self.doctorNameField.text forKey:@"doctorName"];
    [newContact setValue:self.doctorNumberField.text forKey:@"doctorPhone"];

    NSError *error;
    [context save:&error];

    //Pop view off stack
    // locally store the navigation controller since
    // self.navigationController will be nil once we are popped
    UINavigationController *navController = self.navigationController;

    // Pop this controller and replace with another
    [navController popToRootViewControllerAnimated:YES];

    //UIViewController *rootController = [[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil];

    //[navController pushViewController:rootController animated:YES];
}

- (IBAction)backgroundTap:(id)sender {
    //AppDelegate = [[UIApplication sharedApplication] delegate];
    //[AppDelegate clearCreateProfileFields];

    //UITextField *currentTextField=sender;
    //[currentTextField resignFirstResponder];

    [self.view endEditing: YES];

}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:29:31.157

`EXC_BAD_ACCESS`如果不启用，通常很难确定发生的位置`NSZombiesEnabled`。尝试将其打开并再次测试。

请参阅[如何在 XCode4 中设置 NSZombiesEnabled？](https://stackoverflow.com/questions/6991328/how-can-i-set-nszombiesenabled-in-xcode4)关于如何打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:30:59.517

尝试这个

```
- (IBAction)backgroundTap:(id)sender {
            [self.view endEditing:YES];
        } 
```

愿这对你有用。

```
 - (IBAction)backgroundTap:(id)sender {
    [sender resignFirstResponder];
    } 
```

您的代码中没有任何意义

```
if([doctorNameField isFirstResponder]){
    [doctorNameField isFirstResponder];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:16:51.333

如果您不知道哪个编辑字段是第一响应者，但想辞职，您应该使用此调用：

```
[self.view endEditing: NO]; 
```

来自苹果文档：

> 此方法查看当前视图及其子视图层次结构，以查找当前是第一响应者的文本字段。如果找到，它会要求该文本字段辞去第一响应者的职务。如果 force 参数设置为 YES，则永远不会询问文本字段；它被迫辞职

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T02:48:32.240

根据您提供的新信息，您似乎正在释放对视图控制器的引用，这意味着正在针对未知的内存块而不是在 VC 上调用 backgroundTap。根据释放内存的重用方式，您可能会遇到各种错误 - 最有可能是错误访问，但如果内存被重用于您的应用程序范围内的另一个对象，您可能会收到“无法识别的选择器”消息。

检查您是否在任何地方调用 'currentController' var 的 'release' - 或者如果它被声明为 'retain' 属性，请检查您是否没有在某处重新分配值，这会导致释放当前引用。（由于您不是通过属性引用分配给 currentController，而是直接分配给 ivar，因此如果将其声明为保留属性，则使用属性引用在某处重新分配将导致它被释放。

# apache-flex - Flex，将 SQLite 结果放入 ItemRenderer

> ID：10117877
> 
> 赞同：0
> 
> 时间：2012-04-12T05:27:12.853
> 
> 标签：apache-flex, sqlite, flexbuilder

使用以下 SQLite 语句：

> SELECT Customer, SUM(OrderAmount) AS TotalOrder FROM OrdersTable GROUP BY Customer

我得到每个客户的总和（总订单）的结果

如何将上述结果放入 itemRenderer label.text ？

```
<s:ItemRenderer>
   <s:Label id="customerName" text=??? />
   <s:Label id="totalOrder" text=??? />
</s:ItemRenderer> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:13:49.887

每当我们将数据设置为 dataprovider 时，它会自动设置为其项目渲染器，如果您使用自定义 itemrendere，请执行此操作...

```
[Bindable] private var _customerName:String;
[Bindable] private var _totalOrder:String;

override public function set data(value:Object):void{
  this.data = value;
  _customerName = value. property   //propertyName containing customer name
  _totalOrder = value. property   //propertyName containing totalOrder
}

   <s:Label id="customerName" text="{_customerName}" /> 
   <s:Label id="totalOrder" text="{_totalOrder}" /> 
```

或者

```
<s:ItemRenderer>    
   <s:Label id="customerName" text="{data.properyNamecontainCustomerName}" />    
   <s:Label id="totalOrder" text="={data.properyNamecontaintotalOrder} " />    
</s:ItemRenderer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:14:18.040

`ItemRenderer`的具有`data`Flex List 控件在每个渲染器上设置的属性。您可以将`text`a 的属性绑定`Label`到数据，覆盖数据属性的设置器，或为“dataChange”事件添加事件侦听器。

绑定时，您可以像这样使用花括号表达式：

```
<s:Label text="{data.customerName}" /> 
```

这假设您的数据提供者`List`填充有具有属性的对象`customerName`；）

其他两种方法需要您编写一些代码来设置标签的文本属性。

您可以找到许多使用 Flex 的示例`ItemRenderer`，例如：

*   [Adobe Flex 4.6 * 定义自定义 Spark 项目渲染器](http://www.google.com/url?sa=t&rct=j&q=itemrenderer%20example&source=web&cd=2&ved=0CDcQFjAB&url=http://help.adobe.com/en_US/flex/using/WS03d33b8076db57b9-23c04461124bbeca597-8000.html&ei=JHCGT7niN6eyiQLk4aDlDw&usg=AFQjCNHaheynuV7Z6HLykiprHcj4nTwEZg)
*   [在 Flex 4 中轻松实现 CoolItemRenderers](http://coenraets.org/blog/2010/01/cool-itemrenderers-made-easy-in-flex-4/)
*   [带有内联项渲染器 Flex 4 的 Spark 列表组件示例](http://www.flexstreamer.com/?p=165)

# c# - 为什么要做局部变量？

> ID：10117881
> 
> 赞同：4
> 
> 时间：2012-04-12T05:27:29.077
> 
> 标签：c#, linq, filter

resharper 让我将其设为局部变量，并写道“访问修改后的闭包”

```
if (filter != null)
{
    if (filter.CityId != 0)
    {
        ads = ads.Where(x => x.Ad.CityId == filter.CityId);
    }
    if (filter.BusinesCategoryId != 0)
    {
        ads = ads.Where(x => x.BusinessCategoryId == filter.BusinesCategoryId);
    }
} 
```

为什么要做局部变量过滤？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T05:32:46.700

因为您的 query(Where(...)) 没有被执行。我假设过滤器是从循环中获得的？

Linq 查询在使用之前不会执行。因此，如果您循环了一堆过滤器，然后稍后开始执行它们，则查询中的过滤器值将是错误的。

一个类似的问题：也[可以访问修改后的闭包](https://stackoverflow.com/questions/235455/access-to-modified-closure)：http : [//devnet.jetbrains.net/thread/273042](http://devnet.jetbrains.net/thread/273042)

需要查看更多代码才能 100% 确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T06:01:39.730

根据我的理解，如果您从委托（闭包）访问变量，然后在执行委托之前修改变量，Resharper 将引发错误。如果您在委托/lambda 中访问 for 循环变量并在循环外执行它，这通常会发生。如果你的代码是这样的：

```
foreach (filter in filters)
{
      if (filter != null)  {
            if (filter.CityId != 0)      {
                ads = ads.Where(x => x.Ad.CityId == filter.CityId);
            }
            if (filter.BusinesCategoryId != 0)      {
                ads = ads.Where(x => x.BusinessCategoryId == filter.BusinesCategoryId);
            }
      }
} 
return ads.ToList() 
```

那么它的行为就不会像你期望的那样。但是，如果您在循环范围内执行 lambda 表达式，那么您将没有问题。

我不会解释为什么它会这样，因为很多人已经很好地解释了它：

*   [埃里克·利珀特的博客](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)

*   [ReSharper 警告 - 访问修改后的闭包](https://stackoverflow.com/questions/1688465/resharper-warning-access-to-modified-closure)

*   [C# 在 foreach 中重用变量是否有原因？](https://stackoverflow.com/questions/8898925/is-there-a-reason-for-cs-reuse-of-the-variable-in-a-foreach)

更新：回答“为什么要做局部变量？” 是因为上述问题的解决方法是使用局部变量（即在循环内部）并在您的 lambda 中使用它。这样，您就可以为每个 lambda 实例关闭变量的不同实例。

# android - 如何使用 Android 从 .ppt 文件中提取所有图像？

> ID：10117884
> 
> 赞同：0
> 
> 时间：2012-04-12T05:27:39.503
> 
> 标签：android, image, apache-poi, extraction

> **可能重复：**
> [如何在 Apache poi 的帮助下使用 Android 从 .ppt 文件中提取所有图像？](https://stackoverflow.com/questions/9716033/how-to-extract-all-images-from-a-ppt-file-using-android-with-help-of-apache-poi)

我正在为 Android 开发 ppt 查看器。我在 Apache POI API 的帮助下从 ppt 中提取了所有文本，但无法在 ppt 文件中提取图像。我很高兴知道结果....我的代码在这里[链接](https://stackoverflow.com/questions/9716033/how-to-extract-all-images-from-a-ppt-file-using-android-with-help-of-apache-poi)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:37:42.427

检查以下代码以读取 PPTX 文件中的所有图像：

```
SlideShow ppt = new SlideShow(new HSLFSlideShow("slideshow.ppt"));

  //extract all pictures contained in the presentation
  PictureData[] pdata = ppt.getPictureData();
  for (int i = 0; i < pdata.length; i++){
    PictureData pict = pdata[i];

    // picture data
    byte[] data = pict.getData();

    int type = pict.getType();
    String ext;
    switch (type){
      case Picture.JPEG: ext=".jpg"; break;
      case Picture.PNG: ext=".png"; break;
      case Picture.WMF: ext=".wmf"; break;
      case Picture.EMF: ext=".emf"; break;
      case Picture.PICT: ext=".pict"; break;
      default: continue;
    }
    FileOutputStream out = new FileOutputStream("pict_"+i + ext);
      out.write(data);
      out.close();

  } 
```

参考资料： http: [//poi.apache.org/slideshow/how-to-shapes.html](http://poi.apache.org/slideshow/how-to-shapes.html)

# python - python，urllib2，在 404 错误上崩溃

> ID：10117885
> 
> 赞同：1
> 
> 时间：2012-04-12T05:27:46.990
> 
> 标签：python, beautifulsoup, urllib2, http-status-code-403

我有一个程序可以从存储在数据库中的 url 中获取内容。我正在使用`beautifulsoup`,`urllib2`来获取内容。当我输出结果时，我看到程序在遇到（看起来像）403 错误时崩溃。那么如何防止我的程序因 403/404 等错误而崩溃？

相关输出：

```
Traceback (most recent call last):
  File "web_content.py", line 29, in <module>
    grab_text(row) 
  File "web_content.py", line 21, in grab_text
    f = urllib2.urlopen(row)
  File "/usr/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/usr/lib/python2.7/urllib2.py", line 400, in open
    response = meth(req, response)
  File "/usr/lib/python2.7/urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)
  File "/usr/lib/python2.7/urllib2.py", line 438, in error
    return self._call_chain(*args)
  File "/usr/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 403: Forbidden 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T05:30:51.300

您可以用 包围请求`try/except`，例如

```
try:
    urllib2.openurl(url)
except urllib2.HTTPError, e:
    print e 
```

有关一些好的示例和信息，请参阅[http://www.voidspace.org.uk/python/articles/urllib2.shtml#handling-exceptions](http://www.voidspace.org.uk/python/articles/urllib2.shtml#handling-exceptions)。

# php - php cakephp：如何计算嵌套数组的元素

> ID：10117894
> 
> 赞同：1
> 
> 时间：2012-04-12T05:28:38.473
> 
> 标签：php, cakephp, multidimensional-array

如何计算嵌套数组的元素？我想计算 $student_info['Aptitude'] 的元素。

我尝试了以下方法，但在以下代码中得到了未定义的索引：

```
else if (count($student_info["Aptitude"])==0){ //no records for report card
         $this->Session->setFlash('Your child is a new student in our school. 
            He/She doesn\'t have records for a report card yet.');
            $this->redirect(array('controller'=>'pages','action'=>'home')); 
```

Aptitude 是 $student_info 中的一个数组，它有 4 个数组

var_dump($student_info) 产生以下输出。Aptitude 数组在最后一行。它没有任何元素：

```
array(1) { 
    [0]=> array(4) { 
        ["Student"]=> array(10) { 
            ["id"]=> string(2) "20" 
            ["name"]=> string(15) "Uma Palaniappan" 
            ["gender"]=> string(6) "Female" 
            ["dob"]=> string(10) "2007-04-26" 
            ["created"]=> string(19) "2011-12-29 10:14:03" 
            ["modified"]=> string(19) "2011-12-29 10:14:03" 
            ["merry_class_id"]=> string(1) "3" 
            ["merry_parent_id"]=> string(2) "25" 
            ["term1_comments"]=> NULL
            ["term2_comments"]=> NULL 
        } 
        ["MerryParent"]=> array(14) { 
            ["id"]=> string(2) "25" 
            ["initial"]=> string(2) "Mr" 
            ["name"]=> string(13) "Palaniappan K" 
            ["username"]=> string(7) "kpalani" 
            ["email"]=>string(20) "kpalani@streamyx.com" 
            ["password"]=> string(40) "43f5e1298f3b2478a9cd4ab7c6f5f703380dbcc9" 
            ["landline"]=> string(12) "044-77223399" 
            ["mobile"]=> string(10) "9860662309" 
            ["address"]=> string(15) "44 Megala Chowk" 
            ["state_id"]=> string(1) "6" 
            ["city_id"]=> string(3) "103" 
            ["postal_code"]=> string(6) "384733" 
            ["created"]=> string(19) "2011-12-29 10:14:03" 
            ["modified"]=> string(19) "2011-12-29 10:52:23" 
        } 

        ["MerryClass"]=> array(2) { 
            ["id"]=> string(1) "3" 
            ["class_name"]=> string(3) "LKG" 
        } 
        ["Aptitude"]=> array(0) { 
        } 
    } 
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:36:57.900

采用

```
if (count($student_info[0]["Aptitude"])==0) 
```

反而。下次请自行格式化您的示例代码。你自己很容易发现这个错误。

考虑使用[xdebug](http://xdebug.org/)为`var_dump`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:37:48.617

```
else if (count($student_info[0]["Aptitude"])==0){ //no records for report card
     $this->Session->setFlash('Your child is a new student in our school. 
        He/She doesn\'t have records for a report card yet.');
        $this->redirect(array('controller'=>'pages','action'=>'home')); 
```

您忘记了 [0] 索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T05:49:34.943

试试这个：

```
count(Set::extract('/Aptitude', $student_info)) 
```

# java - 关于 WebSetting 中的 setDisplayZoomControls() 方法

> ID：10117895
> 
> 赞同：1
> 
> 时间：2012-04-12T05:28:40.470
> 
> 标签：java, android, android-4.0-ice-cream-sandwich

我有一个问题，在 android 4.0\. 当 b 为真时，setDisplayZoomControls(boolean b) 方法确实有效，但当 b 为假时，我需要重新加载 webview 以使其工作。

Android 4.0 中的 setDisplayZoomControls() 方法有什么问题吗？

# mysql - Mysql：插入性能 INNODB 与 MISAM

> ID：10117903
> 
> 赞同：6
> 
> 时间：2012-04-12T05:29:39.410
> 
> 标签：mysql, performance, insert, innodb, myisam

我正在插入一个具有 5 个属性和 1000 行的简单小表。

我观察到当引擎是 INNODB 时，每次插入需要 0.03 - 0.05 秒。我将引擎更改为 MISAM，然后插入速度更快。它需要 0.001 - 0.003。

问题是什么。innodb_flush_log_trx_commit = 1 默认情况下。我就是这个设置。这是我的 innodb 设置。

```
innodb_log_buffer_size : 1MB
innodb_log_file_size   : 5MB
innodb_buffer_pool_size: 8MB
innodb_flush_log_trx_commit = 1 
```

我无法弄清楚这出了什么问题。提前致谢。问候， UDAY

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:33:28.420

innodb_flush_log_at_trx_commit = 1 means that each transaction is written to log buffer.

Set it to 0 to get better performance, or even better try doing all inserts within one transaction (don't forget commiting in the end).

You can look at [http://dev.mysql.com/doc/refman/4.1/en/innodb-parameters.html](http://dev.mysql.com/doc/refman/4.1/en/innodb-parameters.html) for more details on innodb_flush_log_at_trx_commit and other variables

# hibernate - 如何丢弃 Grails Web 流中的嵌套对象

> ID：10117906
> 
> 赞同：0
> 
> 时间：2012-04-12T05:29:49.173
> 
> 标签：hibernate, grails, spring-webflow

我正在使用 Grails 网络流。我有两个域类 ProductItem 和 Product。产品项目有一个称为产品类型产品的字段。

我使用 productItem.product 来引用产品。由于我使用的是 web Flow，并且我不想使这些类可序列化，因此我必须在使用后丢弃它们。但我无法弄清楚如何丢弃嵌套的产品对象。我尝试过**productItem.disacrd()**或**productItem.product.discard()**但它们不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:14:40.187

丢弃一个对象只会断开它们与休眠会话的连接。这不会使它们可序列化。

如果你想避免序列化产品对象，你可以试试这个：

```
productItem.discard()
productItem.product=null 
```

# javascript - 无法使用 for 循环在画布中创建图像

> ID：10117908
> 
> 赞同：0
> 
> 时间：2012-04-12T05:30:08.950
> 
> 标签：javascript, canvas

我有以下代码，它应该执行以下操作：

1.  在 html 页面上动态创建 2 个 Canvas 元素（这工作正常）
2.  对于每个 Canvas 元素，检查 allSteps 变量，该变量表示哪些图像应该出现在 canvas 元素的什么位置。在这个硬编码示例中，它应该在第一个画布的底部显示两个黑色框，在第二个画布的底部显示两个棕色框。（这不能正常工作）。所有图像均为 50x50。

出于某种原因，它只在第二个画布的末尾加载一个图像。

```
<!DOCTYPE html>
<html>
<head>
   <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
   <script type="text/javascript" language="javascript">
   $(document).ready(function() {

        var boxImages = ['img/white.jpg', 'img/blue.jpg', 'img/black.jpg', 'img/brown.jpg', 'img/green.jpg', 'img/red.jpg'];
        var IMAGE_WIDTH=50;
        var MAX_COLS = 7;
        var MAX_ROWS = 8;
        var numberOfSteps = 2;
        var allSteps = [];
        allSteps[0] = '0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 2';
        allSteps[1] = '0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 3';

        $('#result_div').html('<p>All Steps : ' + allSteps + '</p>');

        for (count=0; count < numberOfSteps; count++)
        {
            $('#result_div').append('<h3>Step : ' + count + '</h3>');
            $('#result_div').append('<p><canvas id="resultCanvas' + count + '" width="350" height="400" style="border:1px solid #c3c3c3;" ></p>');
            resultCanvas=document.getElementById('resultCanvas'+count);
            resultCtx = resultCanvas.getContext("2d");  

            currentSolution = allSteps[count].split(" ");
            for (r=0; r < MAX_ROWS; r++)    
            {
                for (c=0; c < MAX_COLS; c++)
                {
                    imgNumber=currentSolution[((r)*MAX_COLS)+c];
                    if (imgNumber != 0)
                    {                   

                        boxX = (c*IMAGE_WIDTH);
                        boxY = (r*IMAGE_WIDTH);
                        cimg=new Image();
                        cimg.onload = function(){resultCtx.drawImage(cimg,boxX,boxY);};
                        cimg.src=boxImages[imgNumber];  
                    }                           
                }
            }
        }
   });
   </script>
<body>

<div id="result_div"></div>

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:42:16.730

我还没有对此进行测试，但我猜你会覆盖你的`cimg.src`并且`cimg.onload`比实际加载图像的速度更快。您是否尝试过使用图像数组？

```
 var cimgs = [];

    var IMAGE_WIDTH=50;
    /*
        ...
    */

            if (imgNumber != 0)
            {                   

                boxX = (c*IMAGE_WIDTH);
                boxY = (r*IMAGE_WIDTH);
                cimgs.push(new Image());
                cimgs[cimgs.length - 1].onload = (function(img,x,y){
                    return function(){resultCtx.drawImage(img,x,y);};
                })(cimgs[cimgs.lenght - 1],boxX,boxY);
                cimgs[cimgs.length - 1].src = boxImages[imgNumber];  
            }                           
        } 
```

# android - overridePendingTransition 过快地显示第二个活动

> ID：10117910
> 
> 赞同：12
> 
> 时间：2012-04-12T05:30:23.343
> 
> 标签：android, android-layout, animation, transition, android-animation

我有 2 个活动，我想在这两个活动之间创建一个动画过渡，这样两个活动的视图都会向上滑动，就好像第二个活动正在向上推动第一个活动一样。在我的第一个活动中，我使用：

```
Intent iSecondActivity = new Intent(FirstActivity.this,SecondActivity.class);
FirstActivity.this.startActivity(iSecondActivity);
FirstActivity.this.overridePendingTransition(R.anim.slide, R.anim.slide2); 
```

我的 slide.xml 看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_interpolator">
    <translate
        android:interpolator="@android:anim/decelerate_interpolator"
        android:fromYDelta="0"
        android:toYDelta="-100%p"
        android:duration="2000"
    />
</set> 
```

我的 slide2.xml 看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_interpolator">
    <translate
         android:interpolator="@android:anim/decelerate_interpolator"
         android:fromYDelta="100%p"
         android:toYDelta="0"
         android:duration="2000"
    />
</set> 
```

但是，问题是当调用“startActivity”时，第二个活动的视图已经呈现，而过渡刚刚开始滑动。我想看到第一个活动的视图向上滑动......但我看到第二个活动的视图（呈现在第一个活动的视图上）向上滑动。

第二个问题是我看到替换视图是第一个活动的视图。我希望替换视图成为第二个向上推动的活动视图。

很难解释，所以如果我能更详细地解释一下，请告诉我。对任何混淆表示歉意，并感谢您阅读本文。

PS我正在使用textviews ...我想渲染太快了？我也在使用摩托罗拉 Razr，但这并不重要。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T23:31:45.370

没关系，这是一个愚蠢的错误——我不明白文档中“进入动画”与“退出动画”的含义。我需要通过更改来交换 xml：

```
FirstActivity.this.overridePendingTransition(R.anim.slide, R.anim.slide2); 
```

进入

```
FirstActivity.this.overridePendingTransition(R.anim.slide2, R.anim.slide); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T06:24:39.797

只需将这些添加到您的 slide2.xml 中：

```
android:startOffset="2000" 
```

这样，第二个活动的动画只会在您的第一个活动的动画完成后立即开始。

# ipad - 将标签栏放置在 iPad 的顶部/或垂直右侧

> ID：10117921
> 
> 赞同：0
> 
> 时间：2012-04-12T05:31:12.550
> 
> 标签：ipad, tabbar

任何帮助都是可观的

我是 iOS 新手。我需要一个标签栏放置在 iPad 的顶部或垂直右侧。我不确定 IOS 中是否垂直标签栏。是否可以将标签栏放在顶部。请帮我一些示例代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:54:37.970

顶部的标签栏不是标准 UI。如果您想要顶部的东西，请使用 UINavigationBar。如果您不知道如何以编程方式将其实例化，请将其从界面生成器中拖入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:38:39.030

您可能想尝试一下垂直标签栏的这种自定义实现：[https](https://github.com/futuresimple/FSVerticalTabBarController) ://github.com/futuresimple/FSVerticalTabBarController它的工作方式与原始 UITabBarController 类似，但将标签栏放在屏幕的左侧。

# actionscript-3 - flex中是否可以进行深拷贝？

> ID：10117924
> 
> 赞同：0
> 
> 时间：2012-04-12T05:31:33.827
> 
> 标签：actionscript-3, apache-flex, flex4.5

在 flex 4.5 中是否可以进行深拷贝？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:35:17.767

Flex 中有一个用于深拷贝的内置函数。

```
import mx.utils.ObjectUtil;

var NewObj:Type = ObjectUtil.copy(Old); 
```

# mysql - 在记录丢失的类别上进行分页时的性能

> ID：10117925
> 
> 赞同：0
> 
> 时间：2012-04-12T05:31:41.930
> 
> 标签：mysql, sorting, optimization

我有一个有很多记录的大类。我必须对其进行排序 topic_lastpost_time

但是当我这样做时，mysql似乎很慢。完成查询我用了 3 秒索引了 topic_lastpost_time 字段

这是示例。我怎样才能加速它？

```
# Query_time: 3  Lock_time: 0  Rows_sent: 50  Rows_examined: 36075
SELECT   t.topic_id,
         t.m_id,
         t.m_username, 
         t.topic_title,
         t.topic_lastpost_time
FROM     p_topics t
WHERE    t.fc_id = '21'
         AND t.topic_state = '1'
ORDER BY t.topic_type DESC, 
         t.topic_lastpost_time DESC 
LIMIT    0,50; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:09:28.337

尝试更改 order by 子句的顺序

```
SELECT   t.topic_id,
     t.m_id,
     t.m_username, 
     t.topic_title,
     t.topic_lastpost_time
FROM     p_topics t
WHERE    t.fc_id = '21'
     AND t.topic_state = '1'
ORDER BY t.topic_lastpost_time DESC  ,
t.topic_type DESC
LIMIT    0,50; 
```

# dom - Rangy 和 InsertNode 问题

> ID：10117929
> 
> 赞同：1
> 
> 时间：2012-04-12T05:32:46.397
> 
> 标签：dom, rangy

我正在选择一个单词并尝试用元素结构替换它。早些时候我正在使用`IE=EmulateIE7`并且下面的代码正在运行。由于其他一些问题，我删除了 Emulate IE7 元和下面的 insertNode 停止工作。

```
function updateNodeAtRange(text, frag) {
    var range = getFirstRange();
var htmlcontent='<span id="AuniqueId" class="style1">'+frag+'</span><span id="BuniqueId" class="style2">'+text+'</span>';
if (range) {
    rangy.getSelection().deleteFromDocument();
    var el = document.createElement("new_update");
    el.setAttribute( 'id', 'CuniqueId' );
    el.appendChild(document.createTextNode(text)); //Not sure if this is right
    el.innerHTML = htmlcontent;
    range.insertNode(el);
    rangy.getSelection().setSingleRange(range);
}
alert( document.getElementById('Filearea').innerHTML );
} 
```

new_update 元素根本不是必需的，但它在此阶段有效。另外，`innerHTML`我可以使用`document.createDocumentFragment()`吗？那么我如何插入该位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:05:50.610

我假设`getFirstRange()`电话`rangy.getSelection().getRangeAt(0)`？

一个问题是您的文本节点正在被以下行清除，但没有更多内容（演示页面将是理想的），无法说出主要问题是什么。一种可能性是呼叫`range`已更改。`deleteFromDocument()`我建议在插入节点之前从选择中获取新范围：

```
function updateNodeAtRange(text, frag) {
    var sel = rangy.getSelection();
    if (sel.rangeCount > 0) {
        var htmlcontent='<span id="AuniqueId" class="style1">'
            +frag+'</span><span id="BuniqueId" class="style2">'
            +text+'</span>';
        sel.deleteFromDocument();
        var el = document.createElement("new_update");
        el.setAttribute( 'id', 'CuniqueId' );
        el.innerHTML = htmlcontent;
        var range = sel.getRangeAt(0);
        range.insertNode(el);
        sel.setSingleRange(range);
    }
    alert( document.getElementById('Filearea').innerHTML );
} 
```

# c# - 将具有嵌套属性和值的对象导出到 csv

> ID：10117932
> 
> 赞同：0
> 
> 时间：2012-04-12T05:33:06.480
> 
> 标签：c#, properties, csv, export

我正在努力将具有嵌套属性（对象）的对象导出到 csv 文件。

这里的代码：

```
 /// <summary>
    /// Exports a CSV
    /// </summary>
    /// <param name="csv">The CSV data as a string</param>
    /// <param name="filename">The filename for the exported file</param>
    public static void ExportCSV(string csv, string filename)
    {
        StreamWriter writer = new StreamWriter(filename);
        try
        {
            writer.Write(csv);
        }
        catch (FileNotFoundException ex)
        {
            throw ex;
        }
        finally
        {
            writer.Close();
        }
    }

    /// <summary>
    /// Generate the CSV data as a string using reflection on the objects in the list
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="list">The generic list</param>
    /// <returns></returns>
    public static string GetCSV<T>(this List<T> list)
    {
        StringBuilder sb = new StringBuilder();

        for (int i = 0; i < list.Count; i++)
        {
            sb.AppendLine(GetPropertiesString<T>(list[i]));
        }

        return sb.ToString();
    }

    public static string GetPropertiesString<T>(T item)
    {
        StringBuilder sb = new StringBuilder();
        PropertyInfo[] propInfos = typeof(T).GetProperties();

        for (int i = 0; i <= propInfos.Length - 1; i++)
        {
            Type propertyType = propInfos[i].PropertyType;

            if (propertyType != typeof(string) && propertyType != typeof(int) && propertyType != typeof(double) && propertyType != typeof(float) && propertyType != typeof(decimal))
            {
                string test = GetPropertiesString(propertyType);
            }

            sb.Append(propInfos[i].Name);

            if (i < propInfos.Length - 1)
            {
                sb.Append(",");
            }
        }

        sb.AppendLine();

        for (int j = 0; j <= propInfos.Length - 1; j++)
        {
            object o = item.GetType().GetProperty(propInfos[j].Name).GetValue(item, null);

            if (o != null)
            {
                string value = o.ToString();

                //Check if the value contans a comma and place it in quotes if so
                if (value.Contains(","))
                {
                    value = string.Concat("\"", value, "\"");
                }

                //Replace any \r or \n special characters from a new line with a space
                if (value.Contains("\r"))
                {
                    value = value.Replace("\r", " ");
                }
                if (value.Contains("\n"))
                {
                    value = value.Replace("\n", " ");
                }

                sb.Append(value);
            }

            if (j < propInfos.Length - 1)
            {
                sb.Append(",");
            }
        }

        return sb.ToString();
    }
} 
```

}

这是我的对象

```
/// <summary>
/// Basic Person object
/// </summary>
public class Person
{
    public string Forename { get; set; }
    public string Surname { get; set; }
    public int Age { get; set; }
    public Adress Adress { get; set; }
}

public class Adress
{
    public string Place { get; set; }
    public int PLZ { get; set; }
} 
```

所需的 csv 文件格式：

```
header: Forename, Surename, Age, Place, PLZ 
values: Joe, Stevens, 30,Town1, 11111 
```

我试图调用递归方法，但是 PropertyInfo[] propInfos = typeof(T).GetProperties() 的结果有奇怪的项目？？

应该可以导出具有任何嵌套对象深度的对象。

有什么建议么？

谢谢，托斯滕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:26:18.610

您的代码无法按预期工作，因为您没有使用正确的类型递归调用该方法。

```
GetPropertiesString(propertyType); 
```

应该这样称呼：

```
dynamic ob = Activator.CreateInstance(propertyType);
string test = GetPropertiesString(ob); 
```

# java - 如何将图像插入 SqlLite DB

> ID：10117936
> 
> 赞同：0
> 
> 时间：2012-04-12T05:34:01.357
> 
> 标签：java, android, database, sqlite, image

> **可能重复：**
> [插入图像 sqlite](https://stackoverflow.com/questions/4295166/insert-image-sqlite)

我想知道我们如何将图像插入数据库。我们无法将其拖放到我尝试过的单元格中。有人可以帮我吗。

谢谢你，任何帮助都是可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:40:09.227

我建议您将位图图像转换为base64字符串并将其存储到sqlite中，然后在需要的地方再次将其解码为位图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:44:29.317

最好存储`image name`和你应该`store image`进入`storage device`，这样你就可以使用名称访问你的图像并可以获取，否则它会增长你`sqllite`的数据库，这将不会`light`是你的编程问题

# mysql - 将数据从 EBS 移动到临时存储是否会提高 MySQL 查询性能？

> ID：10117939
> 
> 赞同：4
> 
> 时间：2012-04-12T05:34:20.453
> 
> 标签：mysql, amazon-web-services, amazon-ebs

我正在使用 EBS 卷来存储 MySQL 数据。我在临时设备上也有足够的空间。我会将数据移动到 /root/，前提是它会提高查询性能。

临时存储是否比 EBS 卷更快？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T09:25:19.897

[Daan 的回答](https://stackoverflow.com/a/10118768/45773)指向 Eric Hammond 对所有 EBS 好处的出色总结（+1），但要再次强调一点：

临时存储**将在停止/启动周期中丢失，**并且**通常会消失**，因此您绝对不想将任何具有持久价值的东西放在那里，即**只将临时数据放在那里您可以承受丢失或轻松重建**，例如交换文件或在计算过程中使用的严格的临时数据。当然，您可能会在那里存储大量索引，但必须准备好在出于任何原因（例如重启、硬件故障等）清除存储后重建这些索引。

因此，首先将 MySQL 数据库存储在临时存储上并不是一个好主意，除非您确切地知道自己在做什么并准备始终进行时间点备份等。

也就是说，这确实属于[Server Fault](https://serverfault.com/)，并且已经有一些类似或相关的问题被问及并得到了回答 - 我通常不链接到搜索结果，但这在这里实际上很有帮助，请参阅[ebs ephemeral performance](https://serverfault.com/search?q=ebs%20ephemeral%20performance)；我认为与临时判断最相关的答案是：

*   Eric Hammond 的[Ec2 微型实例、EBS、I/O 和速度。我怎样才能提高性能？](https://serverfault.com/a/309147/10305)
    *   Eric 是[You Should Use EBS Boot Instances on Amazon EC2](http://alestic.com/2012/01/ec2-ebs-boot-recommended)的作者，以及许多其他关于 AWS 和特别是 EC2/EBS 的优秀文章
*   Jonik 的关于[在 EC2 上读取访问速度更快的文章；本地驱动器还是 EBS？](https://serverfault.com/a/132259/10305)
*   aculich 的关于[EBS 的使用在什么时候成为瓶颈？](https://serverfault.com/a/360710/10305)
    *   指向有关该主题的更多文章的链接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-16T10:37:25.467

要回答实际问题：

临时实例存储比标准 EBS (100 IOPS) 更快，并且 EBS 性能可能会有很大差异。与 RAID 一起使用时，标准 EBS 似乎比临时 EBS 提供了更高的速度。

也可以为 EBS IPOS 卷类型付费，以实现可预测且可靠的 I/O 性能，其性能优于 elphermal，并且这些可与 RAID 一起使用以进一步改进。需要注意的是，可以使用高性能的临时 SSD 驱动器（hi1.4xlarge）。

请参阅[RAID 中的 EC2 临时磁盘与 EBS 卷](http://victortrac.com/ec2-ephemeral-disks-vs-ebs-volumes-in-raid.html)、[性能测试：Amazon EBS 与实例存储](http://atodorov.org/blog/2013/02/26/performance-test-amazon-ebs-vs-instance-storage-pt1/)和[Amazon EBS 卷的功能](http://aws.amazon.com/ebs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:37:32.167

永远记住，临时存储将在停止/启动循环中丢失。

我会警惕有人说 EBS 比临时存储快，我读过不止一个**真实世界的经验**说 EBS 的性能不如临时存储。最近一篇我记得链接的文章是[DuckDuckGo 的](http://highscalability.com/blog/2013/1/28/duckduckgo-architecture-1-million-deep-searches-a-day-and-gr.html)经验：

*   由于 EBS 参与了大多数大型故障，因此完全退出了 EBS。
*   还经历了 EBS 的性能变化。
*   新的预置 IOP 应该可以处理这个问题，但架构中的额外移动部件越少越好。
*   未来可能会尝试使用 PIOP，尽管当前的非 EBS 架构运行良好。
*   发现 4 个临时磁盘的性能优于条带化 8 个 EBS 磁盘。

# java-home - 在 Linux 中设置 JAVA_HOME 系统范围的好方法是什么？/etc/profile 还是 /etc/profile.d/custom.sh？

> ID：10117943
> 
> 赞同：8
> 
> 时间：2012-04-12T05:35:05.403
> 
> 标签：java-home

关于在 Linux 中在哪里设置系统范围的 JAVA_HOME 似乎没有官方答案，至少我还没有找到（查看 Oracle 网站和一些谷歌 fu）。许多论坛和评论都指向在 /etc/profile 甚至 /etc/bashrc/（或 /etc/bashrc.bashrc）中设置它，但在我的系统上，这两个文件头都非常具体地用于创建

> “/etc/profile.d/ [...] 中的 custom.sh shell 脚本，因为这将防止在将来的更新中合并。”

而不是直接修改文件。

出于这个原因，我认为放置在 /etc/profile.d 中的 custom.sh shell 脚本是可行的方法，但我可能会遗漏一些东西，因此这个问题 =)

如果我错过了官方文档并发布链接，请原谅我！

* * *

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T02:09:53.603

我通常在 /etc/profile.d/ 中创建一个 java_dev.sh 文件，其中包含：

```
export JAVA_HOME=/opt/javahome
export M2_HOME=/opt/mavenhome
export PATH=${JAVA_HOME}/bin:${M2_HOME}/bin:${PATH} 
```

或之类的。我在所有我经常使用的 Linuxen 上都使用它，Ubuntu、RH、Fedora ......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T02:23:37.950

您几乎以“出于这个原因...”开头的段落回答了您自己的问题。我唯一一次编辑`/etc/profile`是在我*更改*其中的某些值（而不是添加某些内容）时。

在添加需要更改用户配置文件的各种软件包时，大多数发行版都会将适当的脚本添加到`/etc/profile.d`目录中，并且基本安装的`/etc/profile`脚本会调用该目录中的所有可执行脚本。（同样，升级/删除发行版提供的包将修改或删除子目录中的脚本。）

# c# - 如何在 GTK# 中使控件无效（）

> ID：10117951
> 
> 赞同：3
> 
> 时间：2012-04-12T05:35:49.850
> 
> 标签：c#, mono, monodevelop, gtk#

在 Windows 窗体中，我可以调用`Invalidate()`一个控件来强制它重新绘制自己。我在 GTK# 中有小部件，我怎样才能做到这一点？

Win7+单声道开发(2.9.4)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T07:09:20.120

使用 QueueDraw () 重绘所有内容或使用 QueueDrawArea() 重绘特定矩形区域。

# javascript - 用户附加文件时如何保留以前的表单条目

> ID：10117958
> 
> 赞同：0
> 
> 时间：2012-04-12T05:36:30.130
> 
> 标签：javascript, forms, drop-down-menu

我有一个表格，它有一个附件按钮，当他们点击附件按钮并刷新时，是否可以保留他们输入的条目？输入都是下拉菜单，我不确定我应该如何开始..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:20:32.810

您必须在服务器上捕获条目，并且当您将下一页推送回客户端时，将条目设置为相同。

或者您可以在回发发生之前使用一些客户端本地存储来存储设置，并在下一页重新加载时再次设置它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:14:52.050

有几种方法可以做到这一点。[最简单的方法是在使用form.onSubmit](http://www.w3schools.com/jsref/event_form_onsubmit.asp)事件提交表单时将表单值简单地存储在 cookie 中。本质上，您只需将表单中的值读取到 cookie 中，然后在刷新页面时，将它们从 cookie 中读取并返回到表单中。 [这里的例子](http://www.the-art-of-web.com/javascript/setcookie/)。

# visual-studio - 在 Visual Studio 中对程序集进行签名

> ID：10117961
> 
> 赞同：-2
> 
> 时间：2012-04-12T05:36:47.497
> 
> 标签：visual-studio, security, encryption

我在 Visual Studio 2008 中有一个程序集说“BankingSecurity.dll”。

我需要对这个程序集进行签名/加密，以使其无法被黑客解密。

请注意，我不需要对整个应用程序进行签名，我只需要对大约 30 个 dll 中的这个 dll 进行签名/加密。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:55:52.743

如果它可以被合法用户解密，它也可以被黑客解密。应用程序无法知道用户是谁。

# php - 您将在哪里以及如何（实际上）在 PHP 中使用 Closure 接口？

> ID：10117963
> 
> 赞同：4
> 
> 时间：2012-04-12T05:37:21.347
> 
> 标签：php, interface, closures

我在这里阅读有关 Closure 接口的信息：

[http://www.php.net/class.closure](http://www.php.net/class.closure)

然后我用谷歌搜索，找不到很好的用法示例，所以我决定在这里发布。php.net 网站上也没有示例。任何人（可能是经验丰富的 PHP 开发人员）都可以描述我如何以及在哪里可以使用它来利用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:41:36.277

立即想到的地方是各种`array_*`功能，例如`array_walk()`。它们已经经常与`create_function()`;一起使用。新的闭包符号使这个现有的结构更加优雅。

我相信还会有更多。

# java - Java 列表节点找不到已添加项目的索引

> ID：10117964
> 
> 赞同：0
> 
> 时间：2012-04-12T05:37:36.733
> 
> 标签：java

我刚刚学习 Java，并在 Java 中创建了自己的 Word List 和 Word Node 类。但是，我发现我的 WordList Index Of 方法总是返回 -1。有人可以告诉我它有什么问题吗？它与使用扫描仪有关吗？（我的教科书说这不是我的添加方法）。我的代码如下（每​​个类都在自己的文件中）：

WordNode.java：

```
public class WordNode {

private String value;
private WordNode next;

public WordNode(String newValue) {
    value = newValue;
    next = null;
}

public WordNode(String newValue, WordNode nextNode) {
    value = newValue;
    next = nextNode;
}

public String getValue() {
    return value;
}

public WordNode getNextNode() {
    return next;
}

public void setNextNode(WordNode node) {
    next = node;
}} 
```

WordList.java：

```
public class WordList {
private WordNode first;

public WordList(String firstNode) {
    first = new WordNode(firstNode);
}

public void add(String newValue) {
    first = new WordNode(newValue, first);
}

public void remove(String oldValue) {
    if (first.getValue() == oldValue) {
        first = first.getNextNode();
        return;
    }
    WordNode temp = first;
    while (temp != null && temp.getNextNode().getValue() != oldValue)
        temp = temp.getNextNode();
    if (temp != null)
        temp.setNextNode(temp.getNextNode().getNextNode());
}

public void moveToStart(String toMove) {
    remove(toMove);
    add(toMove);
}

public int indexOf(String item) {
    WordNode temp = first;
    int i = 1;
    while (temp != null && temp.getValue() != item) {
        temp = temp.getNextNode();
        i++;
    }
    if (temp == null)
        return -1;
    else
        return i;
}

public String itemAtIndex(int index) {
    WordNode temp = first;
    int i = 1;
    while (temp != null && i != index) {
        temp = temp.getNextNode();
        i++;
    }
    if (i == index)
        return temp.getValue();
    else
        return "";
}} 
```

MTFencoder.java：

```
import java.io.FileReader;
import java.io.FileWriter;
import java.io.PrintWriter;
import java.util.Scanner;

public class MTFencoder {

public static void main(String[] args) {
    try
    {
        Scanner scan = new Scanner(new FileReader(args[0]));
        WordList dictionary = new WordList(scan.next());

        while (scan.hasNext()) {
            String newWord = scan.next();
            int index = dictionary.indexOf(newWord);
            if (index == -1) {
                System.out.println("0 " + newWord);
                dictionary.add(newWord);
            }
            else {
                System.out.println(Integer.toString(index));
                dictionary.moveToStart(newWord);
            }
        }
    }
    catch (Exception ex) {
        System.out.println("An error occured while reading the file. Check that it exists and is valid.");
    }
}} 
```

提前致谢。丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:44:11.657

在 Java 中，要检查对象的相等性，包括字符串，您必须使用 .equals 方法。所以在 indexOf 和 remove 中，你将不得不使用`first.getValue().equals(oldValue)`或类似的。

# haskell - 为什么 Haskell 会不一致地推断特定类型（显然）？

> ID：10117965
> 
> 赞同：7
> 
> 时间：2012-04-12T05:37:47.493
> 
> 标签：haskell, type-inference

我正在编写一个玩具（物理）向量库，并且在 GHC 坚持函数`Integer`的类型中应该有 s 时遇到问题。我希望向量乘以向量以及标量（仅使用`*`），虽然这可以通过`Vector`实例来实现，`Num`但我现在遇到了以下错误：

```
Couldn't match expected type `Integer' with actual type `Double' 
```

在玩弄了代码以解决问题后，我将其归结为：

```
data V a = V a a a deriving (Show, Eq, Functor)
scale a (V i j k) = V (a*i) (a*j) (a*k)
(<.>) = scale 
```

现在，如果我们问 GHCi 这些是什么类型，我们会得到：

```
>:t scale
scale :: Num a => a -> V a -> V a
>:t (<.>)
(<.>) :: Integer -> V Integer -> V Integer 
```

我们当然不想`<.>`只对`Integer`s 采取行动。虽然这可以通过包含 的类型签名来解决`<.>`，但我想知道实际发生了什么。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T05:46:00.613

您遇到了臭名昭著的[单态性限制](http://www.haskell.org/haskellwiki/Monomorphism_restriction)。另一种解决方案是明确指定参数：

```
a <.> v = scale a v 
```

或添加`-XNoMonomorphismRestriction`编译指示。

# php - 在某个 span 或 div 结束后删除换行符

> ID：10117968
> 
> 赞同：0
> 
> 时间：2012-04-12T05:38:02.643
> 
> 标签：php, html, dom

我有一个类似的代码

```
<div class="LinkBox">
 </div>
<br>
<br>
<br> 
```

我想`<br>`在 div 结束后使用 php dom 解析器删除。这怎么可能 ？

# javascript - 属性信息为动态时访问json对象

> ID：10117970
> 
> 赞同：0
> 
> 时间：2012-04-12T05:38:25.357
> 
> 标签：javascript, javascript-objects

我的服务器响应如下：

```
{
    data : [
              {
                 name: "ADeal",
                 image: "images/adeal.png",
              },
              {
                 name: "SDeal",
                 image: "images/sdeal.png",
              }
          ]
} 
```

我可以像这样解析它：*var jsonObj = JSON.parse(serverResponse)*。并且还知道像这样访问对象：*jsonObj.data[1].name*

但在我的情况下，我在变量中获取属性信息。考虑这个例子：

```
function dynImage(prop, el, jsonObj){
    //Here, prop contains data[1].name
    //How can i access the jsonObj and set it to el(i.e, reference of div element)

el.style.backgroundImage = url('');

} 
```

# c# - 在设计时与运行时创建时，UIButtons 在 UIImageView 上的显示不同

> ID：10117971
> 
> 赞同：1
> 
> 时间：2012-04-12T05:38:31.970
> 
> 标签：c#, iphone, ios, xamarin.ios, monodevelop

我已将一些`UIButton`对象添加到 .xib 文件中，并`UIButton`在代码中添加了一些对象。

但现在我面临一个问题。缩放 UIImageView 时，通过代码添加的 UIButtons 显示在 UIImageView 上，使用 .xib 文件添加的 UIImageView 位于 UIImageView 下方。

添加了代码的 UIButton 代码：

```
btnBrightness = UIButton.FromType (UIButtonType.RoundedRect);
btnBrightness.Frame = new RectangleF (540, 20, 95, 37);
btnBrightness.SetTitle ("Brightness", UIControlState.Normal); 
```

更多细节： [单触式](http://monotouch.2284126.n4.nabble.com/UIButton-Problem-td4550977.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:24:29.010

解决我只是在 ViewDidLoad() 中添加一行代码

`this.Add(UIImageView)`

使用这条线它可以按我的意愿工作。

或者

为所有按钮创建一个容器视图并将按钮添加到此

mainView.InsertSubview(buttonContainerView,mainView.Subviews.Count);

# mysql - MySQL函数吃太多CPU

> ID：10117973
> 
> 赞同：0
> 
> 时间：2012-04-12T05:39:04.433
> 
> 标签：mysql, sql, stored-procedures, cpu-usage

当我在 MySQL 查询浏览器中执行一个函数时，它给出的错误消息是“”脚本行：3 在查询期间丢失与 MySQL 服务器的连接”，即使我无法删除它。当我正在执行或尝试删除它时我的查询浏览器卡住了。功能代码如下

论点应该是这样的 - ('52,53,50')

```
DELIMITER $$

DROP FUNCTION IF EXISTS `split_string` $$
CREATE FUNCTION `split_string`(sStrMain VARCHAR(255)) RETURNS varchar(255) CHARSET latin1
BEGIN
DECLARE n,l INT DEFAULT 0;
DECLARE L1,str,temp,L2,res,Final_res VARCHAR(255);

SET str = sStrMain;

WHILE str !='' DO
  SET L1 = SUBSTRING(str,1,LOCATE(',',str)-1);
  SET res = lookup_code(L1);
  SET Final_res = CONCAT_WS(',',Final_res,res);
  SET temp = REPLACE(str,SUBSTRING(str,1,L1,'');
  SET str = temp;
  SET temp = '';
  SET n = n + 1;
END WHILE;

RETURN Final_res;

END $$

DELIMITER ; 
```

我将使用此函数按分隔符（逗号）拆分字符串并将结果返回给我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:17:52.640

试试这个拆分文本过程 -

```
CREATE PROCEDURE split_string(sStrMain VARCHAR(255))
BEGIN
  SET @strLen := 0;
  SET @i := 1;

  WHILE @strLen < LENGTH(sStrMain)  DO
    SET @str = SUBSTRING_INDEX(sStrMain, ',', @i);
    SET @strLen = LENGTH(@str);
    SET @i = @i + 1;

    SET @res = SUBSTRING_INDEX(@str, ',', -1);
    SELECT @res; -- Show a value, call your function here

  END WHILE;
END 
```

# ruby-on-rails - 通过 rake 任务确定 Rails 服务器是否正在运行

> ID：10117974
> 
> 赞同：0
> 
> 时间：2012-04-12T05:39:05.873
> 
> 标签：ruby-on-rails, ruby, rake

我有一个删除一些文件的 rake 任务。应用程序可能正在积极使用这些文件。由于我怀疑我正在运行的文件系统（AFS）的一些特性，我无法在应用程序（和服务器）运行时删除文件。

如果服务器正在运行，我想提前中止。有什么方法可以检查由`script/generate`rake 任务启动的服务器是否正在运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:10:34.740

您可以检查是否存在`tmp/pids/server.pid`，`rails s`它将在启动时创建，并在退出时删除。请注意，如果服务器没有干净地退出，文件可能仍然存在，因此您应该从文件中读取 PID 并检查它是否实际上正在运行：

```
path = File.join(Rails.root, "tmp", "pids", "server.pid")
pid = File.read(path).to_i
server_running = true
begin
  Process.getpgid pid
rescue Errno::ESRCH
  server_running = false
end 
```

# java - JSF ajax 更新行为

> ID：10117976
> 
> 赞同：0
> 
> 时间：2012-04-12T05:39:32.950
> 
> 标签：java, ajax, jsf, facelets

我有一个使用 ajax 更新 selectOneList 的 selectOneRadio：

```
<h:outputLabel for="categ" value="Category" />
<h:selectOneRadio id="categ" value="#{cdManager.store.cd.categ}" required="true">
    <f:selectItems value="#{cdManager.store.cd.categs}"/>                    
    <f:ajax execute="categ" render="subcategs" listener="#{cdManager.categChanged}" />
</h:selectOneRadio>                                

<h:outputLabel for="subcategs" value="Sub-categ"/>
<h:selectOneListbox id="subcategs" value="#{cdManager.store.cd.subcateg}"     required="true">
    <f:selectItems value="#{cdManager.subcategsArray}"/>                    
</h:selectOneListbox> 
```

当页面出现时，我的会话 bean 创建一个新的（空的）CD 对象。当用户填写所有信息并提交时，（现在已填写）CD 对象被保存，工作正常。

问题是当用户更改收音机（没有提交）时正在设置“类别”属性，这很糟糕，因为用户可以单击“后退浏览器”，当他们回来时，收音机将被选中，而另一个字段将是空的，非常糟糕的行为！

我怎样才能解决这个问题并仍然使用 ajax？

这是监听器代码：

```
public void categChanged()
{        
    //store.cd.categ is alredy set ? WHYYY ?
    String categ = store.getCd().getCateg();    
    this.subcategsArray = store.getCd().getSubcateg(categ);                                                 
} 
```

我正在使用 JSF 2.0、NetBeans IDE 7.0.1 和 Glassfish 3.1，任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:55:31.073

> *问题是当用户更改收音机（不提交）时正在设置“类别”属性*

这就是ajax的重点。

如果您使用浏览器的后退按钮，您将看到来自浏览器缓存的页面。您可以[禁用页面缓存](https://stackoverflow.com/a/6088353/620338)。然后，您将使用新的支持 bean（如果它是请求或视图范围）从服务器获取一个新页面，或者检查您的`categChanged()`方法中是否存在其他字段。

# c - 编译错误 - 数值常量

> ID：10117977
> 
> 赞同：0
> 
> 时间：2012-04-12T05:39:42.193
> 
> 标签：c

我的程序中不断出现以下编译错误。我想写一个使用数组的程序`p[]`，它被传递给一个计算第n次多项式（下面设置为5）并返回值的函数。

我的错误如下：

> poly.c:4:39: 错误：数字常量前应有 ';'、',' 或 ')'
> 
> poly.c:16:39: 错误: 数字常量前应有 ';'、',' 或 ')'

我的程序：

```
#include <stdio.h>
#define N 5

double eval(double p[], double x, int N)

int main()
{
    double p[N+1] = {0,1,2,3,4};
    double x;
    printf("what value of x would you like?: ");
    scanf("%lf", &x);
    p[N+1] = eval(p[], x, n);
    printf("%lf", p[N+1]);
}

double eval(double p[], double x, int N)
{
    double y;
    y = x^(p[N+1]);
    return y;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T05:43:07.370

预处理器完成后，您的代码如下所示：

```
double eval(double p[], double x, int 5) 
```

所以`;`在那条线的末尾仍然有缺失，这`5`没有任何意义。

不要定义这么短的宏名称，也不要有形式参数名称也是`#define`. 确保只`N`在所有代码中使用全局常量。

此外，要将`p`数组作为参数传递，只需说`p`，而不是`p[]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:43:22.593

```
#define N 5

double eval(double p[], double x, int N) 
```

由于您#defined N 为 5，因此经过预处理后，上图将如下所示：

```
double eval(double p[], double x, int 5) 
```

显然这是错误的。函数声明也需要以分号结尾。

# asset-pipeline - 如何在 rails 3.2 中设置 pdf 的下载链接？

> ID：10117978
> 
> 赞同：2
> 
> 时间：2012-04-12T05:39:45.313
> 
> 标签：asset-pipeline, ruby-on-rails-3.2

我是 Rails 的新手，我无法理解为什么会出现以下错误。我有一个页面，其中链接了一个 pdf 文件和一些图片以供下载。

在视图中：

```
link_to( image_tag('image.png'),:controller=>'home',:action=>'download', :file_name =>  'image.pdf') %> 
```

在控制器中：

```
def download 
  send_file "#{RAILS_ROOT}/assets/pdf/#{params[:file_name]}", :type=>"text/pdf" 
end 
```

当我尝试在开发环境中下载文件时，出现以下错误：

```
No route matches [GET] "/assets" 
```

我尝试更改文件的路径并在 google 和 SO 上搜索。我想这一定是一个相对简单的修复，可能与资产管道有关，但如果有人能指出我正确的方向，我会非常高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:01:34.417

嘿，我自己遇到了这个问题，我的解决方案（rails 2.0.2）是将 pdf 文件放入应用程序的公共目录并创建直接链接 www.yoursite.com/my.pdf 这将执行立即下载。

为什么是这样？好吧，一旦您部署了您的应用程序，rake assets:precompile 将运行，因此资产将出现在您的公共目录中。

您也可以通过运行在本地执行此操作

```
$:. rake assets:precompile RAILS_ENV="development" 
```

虽然我不建议提交这些文件。

# c++ - C++中的动态矩阵

> ID：10117981
> 
> 赞同：0
> 
> 时间：2012-04-12T05:40:20.600
> 
> 标签：c++, multidimensional-array, dynamic-arrays

我正在使用多维数组，但我遇到了一个异常，我搜索了很多，但我找到了我正在使用的相同答案，当我尝试分配 matriz[i] = new double[n] 时异常跳转。我已经尝试了评论和未评论的解决方案，但没有运气。

```
void interpol(double *arr_x, double *arr_y, int n, double *results) {
    //double** matriz = new double*[n];
    double** matriz;
    matriz = (double**) malloc(n * sizeof(double*));
    for(int i = 0; i < n; i++){    
        //matriz[i] = new double[n+1];
        matriz[i] = (double*) malloc(n+1 * sizeof(double));
        for(int j = 0; j < n; j++) {
            matriz[i][j] = pow(arr_x[i],j);
        }
        matriz[i][n] = arr_y[i];
    }
    gaussiana(matriz, n, results);
} 
```

- - 编辑 - -

功能 gaussiana 工作正常，因为我已经在这个功能之外进行了测试。异常被抛出： //matriz[i] = new double[n]; matriz[i] = (double*) malloc(n * sizeof(double));

n 永远不会超过 10。

抛出的异常是：

> Interpolacion.exe 中 0x00071c4d 处的第一次机会异常：0xC0000005：访问冲突读取位置 0x00000000。Interpolacion.exe 中 0x774b15de 处未处理的异常：0xC0000005：访问冲突读取位置 0x00000000。程序“[8012] Interpolacion.exe: Native”已退出，代码为 -1073741819 (0xc0000005)。

---- EDIT---- 我终于让它工作了，问题不在matriz中，而是在arr_x/arr_y中，外部例程发送数据错误（奇怪的是错误和堆栈跟踪总是将我引向新的double [n] 分配）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:57:19.590

如果您想使用该`std::vector`路线，您可以使用如下所示的内容（未经测试，仅供参考）。请记住，`std::vector<std::vector<double> >`它与 不兼容`double **`，因此您的`gaussiana`函数可能需要重写以接受新类型。：

```
// Include the header!
#include <vector>

// Be careful about the use of "using namespace std", I'm only using it here
// because it's a small example
using namespace std;

vector<vector<double> > matriz;

for (int i = 0; i < n; i++)
{
    // Create a new vector "v" with n+1 elements
    vector<double> v(n + 1);

    // fill this vector
    for (int j = 0; j < n; j++)
        v[j] = pow(arr_x[i], j);
    v[n] = arr_y[i];   

    // add it to the matrix
    matriz.push_back(v);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:14:02.810

我在代码中看不到任何会导致异常的内容。一定是`gaussiana()`惹了麻烦。尝试注释掉该行，看看程序是否仍然出错。

知道 的范围会很有用`n`。只要它在现代 32 位或 64 位机器上相对较小（< 1000），就`malloc()`不会失败。但是，如果程序在内存受限的情况下运行，或者`n`程序很大，则很可能某些`malloc`s 会失败。由于没有检查是否返回 NULL，因此程序在尝试取消引用指针时会通过 SEGFAULTing 指示出现问题。

如果多次调用该函数，内存泄漏可能会导致严重的堆短缺并导致`malloc()`失败。

# c - 知道pid时如何在C中杀死进程

> ID：10117982
> 
> 赞同：2
> 
> 时间：2012-04-12T05:40:24.730
> 
> 标签：c, kill, pid

我有一个清理进程，它需要杀死 PID 作为参数传递给它的进程。

我可以很好地使用它`kill(pid_t, SIGKILL)`来杀死它。然而，我得到的 PID 是一个整数值。所以我不能从中得到一个pid_t。有什么方法可以使用整数 pid 来终止进程吗？

出色地。我可以很好地使用`system("kill -9 <pid>");`

我正在寻找 C 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:44:25.310

PID 最初是如何变成整数类型的？如果您的函数采用 PID，则应将其作为`pid_t`. 如果它是一个文本参数，你应该把它解析成一个`pid_t`，而不是一个`int`。

除非您遇到一些不寻常的情况，否则您应该在其中存储 PID 的唯一类似整数的变量是`pid_t`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:42:23.797

`pid_t`实际上是一个整数！

见[http://www.delorie.com/gnu/docs/glibc/libc_566.html](http://www.delorie.com/gnu/docs/glibc/libc_566.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T05:43:02.733

是`pid_t`有符号整数。请参阅[libc](http://www.delorie.com/gnu/docs/glibc/libc_566.html)。只需使用整数值作为第一个参数`kill`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T05:43:55.650

pid_t 是定义在`types.h`. 它只是一个有符号整数类型。

您是否尝试将整数直接分配给 pid_t 变量？它不工作吗？

# sql-server - 更新包含数百万行的表中的两列

> ID：10117994
> 
> 赞同：1
> 
> 时间：2012-04-12T05:42:00.350
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我正在更新包含数百万（8500 万）行的表中的 2 列。现在要更新这些，我正在使用更新命令，例如，

```
UPDATE Table1

  SET Table1.column1 = Table2.column1 ,
      Table1.column2 = Table2.column2 

FROM 
      Tables and with a Join-conditions; 
```

现在我的问题是，这需要 23 小时。即使在使用批量大小之后，所花费的时间也没有太大变化。

但我需要在不到 5 小时内更新它。那可能吗。我应该采取什么方法来实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T05:55:00.990

SQL 更新语句必须保留日志文件中的所有行，以便它可以在失败时回滚。正如[这个家伙](http://www.tek-tips.com/faqs.cfm?fid=3141)所解释的，处理数百万行的最佳方法是忘记原子性并将更新批处理成 50,000 行（或其他）：

```
--Declare variable for row count
Declare @rc int
Set @rc=50000

While @rc=50000
 Begin

  Begin Transaction

  --Use Top (50000) to limit number of updates
  --performed in each batch to 50K rows.
  --Use tablockx and holdlock to obtain and hold 
  --an immediate exclusive table lock. This unusually
  --speeds the update because only one lock is needed.
  Update Top (50000) MyTable With (tablockx, holdlock)
    Set UpdFlag = 0
  From MyTable mt
  Join ControlTable ct
    On mt.KeyCol=ct.PK
  --Add criteria to avoid updating rows that
  --were updated in previous pass
  Where m.UpdFlag <> 0

  --Get number of rows updated
  --Process will continue until less than 50000
  Select @rc=@@rowcount

  --Commit the transaction
  Commit
 End 
```

这仍然存在一些问题，因为您需要知道您已经处理了哪些行，也许比这个人（和我！）更聪明的人可以用更多的 MSSQL 魔法来计算出更好的东西；但这应该是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:14:15.580

我已经使用 SSIS 来完成这项任务。

首先，我获取了必须更新 2 列的源表。然后，我执行了查找任务，其中我必须将源列映射到目标表列，我必须从中获取数据以更新源表列。最后添加了 OLEDB 目标，我将根据查找中的连接条件填充表格。

这个过程真的比执行更新脚本快。

# php - 在单个查询中从所有数据库中获取内容

> ID：10117996
> 
> 赞同：0
> 
> 时间：2012-04-12T05:42:06.793
> 
> 标签：php, mysql

我主要有 3 个主要表格，称为新闻、专辑和视频。我想创建一个 facebook 墙类型的页面，其中所有三个表的所有更新都将按发布时间降序排列。

是否可以在对 db.xml 的单个查询中进行这种调用。

我将简要解释一下我的表格

新闻有 id、标题、内容、时间戳
专辑有 id、标题、相册目录、时间戳
视频有 id、标题、youtubelink、时间戳。

如果不可能，最好的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:43:43.373

这取决于数据的设计方式。如果使用某个共享 ID 全部相关，则可以进行单个连接查询以获取所有数据。如果该数据不相关，您将需要进行 3 次单独调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:36:17.593

为此目的同时查询所有三个表**不是一个好习惯**。您可以创建一个**提要表**。并从您想要的所有其他表中插入**参考 ID ，即****（新闻、专辑、视频）**以及该字段的**日期**。现在您可以查询提要表，并根据该表中的引用 id**连接**到其他三个表，并根据提要表中的日期显示它们。我正在使用这种方法，这对我很有用。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:37:28.320

如果您想要的每个实体的信息共享相同的结构（即 id、标题、时间戳），那么您可以使用 UNION 执行此操作

```
SELECT * FROM (
    SELECT CONCAT('news','-',id),title,`timestamp`
    FROM news
    UNION
    SELECT CONCAT('albums','-',id),title,`timestamp`
    FROM albums
    UNION
    SELECT CONCAT('videos','-',id),title,`timestamp`
    FROM videos
) AS all_items
ORDER BY `timestamp` 
```

如果 id 字段在数据库中是唯一的（而不仅仅是在每个表中），那么您可以删除 CONCAT 并只返回 id。