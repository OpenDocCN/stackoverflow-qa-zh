# StackOverflow 问答 12420000-12420999

# javascript - 单击第一个li时，显示内容一，单击第二个li时，显示内容二

> ID：12420001
> 
> 赞同：0
> 
> 时间：2012-09-14T07:31:34.597
> 
> 标签：javascript

```
<style type="text/css">

.web_index div {width: 400px; height: 300px; background: #eee;}
    ul li{width: 100px; height: 30px; line-height: 30px; list-style: none; display: inline-block; *display: inline; zoom: 1;}
</style>
<script type="text/javascript">
function licker(){
var lier=document.getElementsByTagName("li");
var diver=document.getElementsByClassName("web_index")[0].getElementsByTagName("div");
for(var i=0;i<lier.length;i++)
    { 
        for(j=0;j<diver.length;j++)
        {
            if(i==j)
            {
             diver[j].style.display=block;
                }
            else{
                diver[j].style.display=none;
                }   
            }
    }
}

</script> 
```

html:

```
<ul>
    <li onclick="licker()" class="li01">the first li</li>
    <li onclick="licker()" class="li02">the second li</li>
    <li onclick="licker()" class="li03">the third li</li>
    <div class="web_clear"></div>
</ul>
<div class="web_index">
<div style="display:block" >content one</div>
<div style="display:none">content two</div>
<div style="display:none">content three</div>
</div> 
```

单击第一个li时，显示内容一，其他全部隐藏，单击第二个li时，显示内容二。其他的都被隐藏了......为什么我的代码不起作用。如何更正它。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:38:39.860

您应该为您`li`的 's 分配一个索引：

```
<ul>
    <li onclick="licker(0)" class="li01">the first li</li>
    <li onclick="licker(1)" class="li02">the second li</li>
    <li onclick="licker(2)" class="li03">the third li</li>
    <div class="web_clear"></div>
</ul> 
```

和你的功能：

```
function licker(id){
    var diver=document.getElementsByClassName("web_index")[0].getElementsByTagName("div");
    for(var i=0;i<diver.length;i++){ 
        if(i==id){
            diver[i].style.display='block';
        } else {
            diver[i].style.display='none';
        }   
    }
}​ 
```

[JSFiddle 示例](http://jsfiddle.net/f6Xx3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T07:47:44.140

试试这个

```
<ul>
   <li onclick="licker(this);">the first li</li>
   <li onclick="licker(this);">the second li</li>
   <li onclick="licker(this);">the third li</li>
</ul>
<div class="web_index">
   <div style="display: block">content one</div>
   <div style="display: none">content two</div>
   <div style="display: none">content three</div> 
```

```
function licker(sender) {
    var lier = document.getElementsByTagName("li");
    var diver = document.getElementsByClassName("web_index")[0].getElementsByTagName("div");
    for (var i = 0; i < lier.length; i++) {
       if (lier[i] != sender) continue;
       for (j = 0; j < diver.length; j++) {
          if (i == j)
             diver[j].style.display = 'block';
          else 
              diver[j].style.display = 'none';

          }
       }
    }
</script> 
```

# clojure - ClojureScript：如何通过原型向 JS 对象添加方法？

> ID：12420003
> 
> 赞同：5
> 
> 时间：2012-09-14T07:31:48.543
> 
> 标签：clojure, clojurescript

我正在尝试向现有的 JavaScript 系统添加一些功能。然后再次从 JavaScript 中使用（而不是在 ClojureScript 命名空间中）。也许这是不可能的？

这是我想要做的简化：

```
// JavaScript
String.prototype.foo = function() {
  return "bar";
}

# CoffeeScript
String::foo = ->
  "bar" 
```

我希望能够在上面运行我的脚本，然后从代码的其他地方调用它。

我试过弄乱`extend-type`and `defprotocol`，以及`export`，但似乎没有任何东西暴露我的 foo 函数。

这可能是一个设计决定，而 ClojureScript 在这里对我不起作用，但我只是想确保我没有忽略某些东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T16:44:12.133

可以这样做：

```
(set! (.-foo (.-prototype js/String)) (fn [] "bar")) 
```

或者你可以使用 .. 糖：

```
(set! (.. js/String -prototype -foo) (fn [] "bar")) 
```

# css - 设置 p:selectManyCheckbox 的每个复选框的背景颜色

> ID：12420004
> 
> 赞同：9
> 
> 时间：2012-09-14T07:32:05.230
> 
> 标签：css, jsf-2, primefaces, selectmanycheckbox

我正在使用这个[http://www.primefaces.org/showcase-labs/ui/selectManyCheckbox.jsf](http://www.primefaces.org/showcase-labs/ui/selectManyCheckbox.jsf) primefaces 组件来获取动态 booleanCheckboxes 值

```
<p:selectManyCheckbox value="#{bean.selectedMovies}"  
            layout="pageDirection">  
            <f:selectItems value="#{bean.movies}" />  
        </p:selectManyCheckbox> 
```

我需要对所有布尔复选框应用不同的颜色，如下图所示

> 如果 id=1，那么颜色将为红色，如果 id=2，则颜色将为橙色，依此类推。

我们知道这些是电影中的动态值，那么如何从支持 bean 为这些动态复选框设置背景颜色？

我尝试将样式应用于 selectManyCheckbox，但它作为背景颜色应用于整个 selectManyCheckbox 面板。

那么我应该如何将颜色从支持 bean 动态设置为 selectManyCheckbox 值？

![在此处输入图像描述](../Images/fc4a51670b0a2d194a3a211c57b57fe8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:36:42.183

这对于标准是不可能的`<p:selectManyCheckbox>`，至少对于这种动态来说是不可能的。如果它是静态值，您可以使用 CSS3[`nth-child()`](http://www.quirksmode.org/css/nthchild.html)选择器。使用 a 中的动态值`<p:selectManyCheckbox>`，您基本上需要覆盖其渲染器（这不是一项简单的工作）或发布功能请求（这可能需要比您想要的更长的时间）。

您最好的选择是使用`<ui:repeat>`或改为在每行的基础上`<h:dataTable>`呈现单个。`<p:selectBooleanCheckbox>`这允许您`styleClass`在每个复选框的基础上指定一个。这只需要对`selectedMovies`属性的填充方式进行技术更改。

这是一个具体的启动示例`<h:dataTable>`（注意：它`<p:selectManyCheckbox>`本身也生成一个`<table>`，所以从布局技术上来说没有太大的区别，`<ui:repeat>`如果表格在语义上打扰你，你总是可以选择）：

```
<h:dataTable value="#{bean.movies}" var="movie" styleClass="ui-selectmanycheckbox ui-widget">
    <h:column>
        <p:selectBooleanCheckbox id="checkbox" converter="javax.faces.Boolean"
            value="#{bean.checkedMovieIds[movie.id]}" styleClass="#{movie.type}" />
    </h:column>
    <h:column>
        <p:outputLabel for="checkbox" value="#{movie.title}" />
    </h:column>
</h:dataTable>

<p:commandButton value="Submit" actionListener="#{bean.collectMovies}" action="#{bean.submit}" /> 
```

*备注*：

*   使用`<h:dataTable styleClass>`与 完全相同的 CSS `<p:selectManyCheckbox>`，因此复选框表看起来'n'feel 完全相同。
*   （实际上，令我惊讶的`converter="javax.faces.Boolean"`是）是强制性的，因为否则它会设置检查值`true`，`false`而`String`不是`Boolean`; 这个问题不存在`<h:selectBooleanCheckbox>`，也许是 PF 错误？
*   在`styleClass="#{movie.type}"`这个特定的用例中比 更有意义`styleClass="#{movie.id}"`，因为为每个单独的“id”值指定一个单独的样式类似乎是一项荒谬的任务，它通常代表一个唯一的自动分配的数据库标识符；如果需要，您可以随时在实际代码中更改它。
*   完成在实际方法之前`actionListener`收集的工作。你当然也可以用实际的方法来完成这项工作，但是这样就不再那么干净地分开了。`selectedMovies``action``action`

支持 bean 看起来像这样（`checkedMovieIds`假设`Movie`有一个`Long id`属性）：

```
private List<Movie> movies;
private Map<Long, Boolean> checkedMovieIds;
private List<Movie> selectedMovies;

@PostConstruct
public void init() {
    movies = populateItSomehow();
    checkedMovieIds = new HashMap<Long, Boolean>();
}

public void collectMovies(ActionEvent event) {
    selectedMovies = new ArrayList<Movie>();
    for (Movie movie : movies) {
        if (checkedMovieIds.get(movie.getId())) {
            selectedMovies.add(movie);
        }
    }
}

public void submit() {
    System.out.println(selectedMovies);
    // ...
}

// +getters (note: no setters necessary for all those three properties) 
```

假设它`#{movie.type}`可以具有值`action`、、和（顺便说一句，这是一个完美的`comedy`候选类型），那么您可以按如下方式设置各个复选框的样式：`fantasy``horror``enum`

```
.action .ui-chkbox-box {
    background-color: red;
}

.comedy .ui-chkbox-box {
    background-color: orange;
}

.fantasy .ui-chkbox-box {
    background-color: green;
}

.horror .ui-chkbox-box {
    background-color: blue;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T18:04:53.183

## 使用纯 CSS3 可能是可行的

根据你的实际要求。假设最终复选框的相同 html 结构是您链接到的示例中的默认结构，那么以下应该是完成它的纯 css3 方式。

请注意，此方法不会专门将颜色与特定的电影/id 联系起来，它总是将第一部电影设置为红色，将第二部电影设置为橙色，等等。它也有一个实际限制。如果您计划列出 100 部电影，***每部电影都有独特的颜色***，那么这***不***适合您。

但是***，如果您要列出一个小集合***（最多 10 个？），或者您不介意在某个小样本后***颜色是否重复，那么这很可能是您的最佳选择。***

## [**这是一个显示以下两个的小提琴**](http://jsfiddle.net/uzP7P/13/)

## 小套装

```
.ui-selectmanycheckbox tr:nth-of-type(1) .ui-state-default {
    background-color: red;
}

.ui-selectmanycheckbox tr:nth-of-type(2) .ui-state-default {
    background-color: orange;
}

.ui-selectmanycheckbox tr:nth-of-type(3) .ui-state-default {
    background-color: red;
}

.ui-selectmanycheckbox tr:nth-of-type(4) .ui-state-default {
    background-color: orange;
} 
```

## 重复 4 色

```
.ui-selectmanycheckbox tr:nth-of-type(4n+1) .ui-state-default {
    background-color: red;
}

.ui-selectmanycheckbox tr:nth-of-type(4n+2) .ui-state-default {
    background-color: orange;
}

.ui-selectmanycheckbox tr:nth-of-type(4n+3) .ui-state-default {
    background-color: green;
}

.ui-selectmanycheckbox tr:nth-of-type(4n+4) .ui-state-default {
    background-color: blue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:06:34.570

我知道这个解决方案有点老套，但它有效:)

Xhtml 文件：

```
<p:selectManyCheckbox binding="#{requestScope.movieSelect}" layout="pageDirection">
    <f:selectItems value="#{bean.movies}" />
</p:selectManyCheckbox>

<script>
(function() {
    var selectName = '#{requestScope.movieSelect.clientId}';
    var kids = jQuery("input[id*="+selectName+"]");
    var index = 0;

    <ui:repeat value="#{bean.movies}" var="movie">
        jQuery(kids[index++]).parent().next().css('background-color', '#{movie.description}');
    </ui:repeat>
}());
</script> 
```

支持豆：

```
public class Bean {

    private List<SelectItem> movies = Arrays.asList(
            new SelectItem("Scarface", "Scarface", "green"),
            new SelectItem("Goodfellas", "Goodfellas", "red"),
            new SelectItem("Godfather", "Godfather", "blue"),
            new SelectItem("Carlito's Way", "Carlito's Way", "yellow"));

    public List<SelectItem> getMovies() {
        return movies;
    }
} 
```

CSS文件：

```
.ui-chkbox-box {
    background-image : none;
} 
```

ps：css文件可能不是必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T20:29:00.737

不确定您的浏览器目标是什么，但为什么不使用属性选择器呢？

```
ui-selectmanycheckbox input[value=1] {
    color: red;
} 
```

这只是一般的想法......我不熟悉这些控件，但文档让它看起来你应该能够完成这项工作......

# python - pylibmc：“函数“memcached_get_by_key”的断言“ptr->query_id == query_id +1”失败”

> ID：12420007
> 
> 赞同：6
> 
> 时间：2012-09-14T07:32:08.687
> 
> 标签：python, memcached, cherrypy

我有一个使用[pylibmc 模块](http://sendapatch.se/projects/pylibmc/)连接到 memcached 服务器的 python web 应用程序。如果我每秒使用请求一次或更慢的速度测试我的应用程序，则一切正常。但是，如果我每秒发送一个以上的请求，我的应用程序就会崩溃，并且我会在日志中看到以下内容：

> 函数“memcached_get_by_key”的断言“ptr->query_id == query_id +1”失败，可能是“程序员错误，query_id 未增加。”，位于 libmemcached/get.cc:107
> 
> 函数“memcached_get_by_key”的断言“ptr->query_id == query_id +1”失败，可能是“程序员错误，query_id 未增加。”，位于 libmemcached/get.cc:89

知道出了什么问题或如何解决吗？

我的代码如下所示：

```
self.mc = pylibmc.Client(
    servers=[os.environ.get(MEMCACHE_SERVER_VAR)],
    username=os.environ.get(MEMCACHE_USER_VAR),
    password=os.environ.get(MEMCACHE_PASS_VAR),
    binary=True
    )

#...

if (self.mc != None):
    self.mc.set(key, stored_data)

#...

page = self.mc.get(key) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T07:32:08.687

这是一个线程问题。[pylibmc 客户端不是线程安全的](http://sendapatch.se/projects/pylibmc/misc.html#threading)。您应该将代码转换为使用[ThreadMappedPool 对象](http://sendapatch.se/projects/pylibmc/pooling.html#thread-mapped-pooling)，以确保为每个线程保持单独的连接。像这样的东西：

```
mc = pylibmc.Client(
    servers=[os.environ.get(MEMCACHE_SERVER_VAR)],
    username=os.environ.get(MEMCACHE_USER_VAR),
    password=os.environ.get(MEMCACHE_PASS_VAR),
    binary=True
    )
self.pool = pylibmc.ThreadMappedPool(mc)

#...

if (self.pool != None):
    with self.pool.reserve() as mc:
        mc.set(key, stored_data)

#...

if (self.pool != None):
    with self.pool.reserve() as mc:
        page = mc.get(key) 
```

确保`self.pool.relinquish()`在线程完成时调用，可能在析构函数中！

（在我的例子中，这是因为我使用[cherrypy](http://www.cherrypy.org/)作为我的网络服务器，并且cherrypy默认生成10个单独的线程来服务请求。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-23T22:30:21.507

我在 Apache 上运行 Django 时遇到了同样的问题。切换`pylibmc`到`python-memcached`为我消除了这个问题。

# swing - 在 GridBagLayout 中放置组件

> ID：12420027
> 
> 赞同：0
> 
> 时间：2012-09-14T07:33:57.620
> 
> 标签：swing

我正在尝试像这样放置 JLabel 和 JTextfield，

```
 First Name       Textbox        -> First Name is a label named as lblFirstname
      Last Name        Textbox        TextBox is JTextField 
```

尝试使用 GridBagLayout，

应用的约束是，

```
 lblFirstNameCons.gridx = 0;
      lblLastNameCons.gridy = 0;

      txtFirstName.gridx = 0;
      txtLastNameCons.gridy = 3; 
```

我得到这样的输出，

```
 First NameTextbox  -> There is no space and also, the JTextField is almost invisible. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:37:46.927

布局应该是这样的。括号中的值是 gridx 和 gridy (grix, gridy)：

```
First Name (0, 0)       Textbox (1, 0)
Last Name  (0, 1)       Textbox (1, 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:30:55.007

1.  您应该确保将 GridBagConstraint 的填充属性设置为文本字段的水平，并确保将 weightx 设置为大于 0 的值
2.  或者您可以向文本字段指示要显示的所需列数（这最终会影响文本字段的首选大小）。

这是一个示例，表明：

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.net.MalformedURLException;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class TestGridBagLayout {

    protected void initUI() throws MalformedURLException {
        final JFrame frame = new JFrame();
        frame.setTitle(TestGridBagLayout.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JPanel panel = new JPanel(new GridBagLayout());
        JLabel firstName = new JLabel("First name:");
        JLabel lastName = new JLabel("Last name:");
        JTextField firstNameTF = new JTextField();
        JTextField lastNameTF = new JTextField();
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.insets = new Insets(3, 3, 3, 3);
        gbc.weightx = 0;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.anchor = GridBagConstraints.CENTER;
        panel.add(firstName, gbc);
        gbc.weightx = 1;
        gbc.gridwidth = GridBagConstraints.REMAINDER;
        panel.add(firstNameTF, gbc);
        gbc.gridwidth = 1;
        gbc.weightx = 0;
        panel.add(lastName, gbc);
        gbc.gridwidth = GridBagConstraints.REMAINDER;
        gbc.weightx = 1;
        panel.add(lastNameTF, gbc);
        frame.add(panel);
        frame.setSize(300, 200);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new TestGridBagLayout().initUI();
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                }
            }
        });
    }

} 
```

# cakephp - CakePHP 使用 concat 连接查询

> ID：12420030
> 
> 赞同：0
> 
> 时间：2012-09-14T07:34:03.330
> 
> 标签：cakephp, concat

请在 CakePHP 中运行此查询时需要帮助，我无法阅读文档。查询必须匹配此查询

```
SELECT 
    form_number, 
    code_b, 
    local_governments.lga, 
    local_governments.code, 
    concat(local_governments.code,code_b)  
FROM 
    `applicants` 
        left join local_governments 
            on applicants.local_government_id=local_governments.id 
where 
    printed=0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:31:52.710

我将假设您的模型设置正确并且关联正确。

```
$applicants = $this->Applicant->find('all', 
    array(
        'conditions' => array(
            'Applicant.printed' =>  0,
        ),
        'contain' => array('LocalGovernment'),
        'fields' => array(
            'Applicant.form_number', 
            'Applicant.code_b', 
            'LocalGovernment.lga', 
            'LocalGovernment.code', 
        )
    )
); 
```

至于你的 concat... 只是在视图中显示值时这样做。

我希望这会有所帮助......让我知道。

# java - 从 WAV 文件中获取音调的 Android 库

> ID：12420031
> 
> 赞同：0
> 
> 时间：2012-09-14T07:34:02.823
> 
> 标签：java, android, fft, frequency, pitch

我有一个来自 WAV 文件的采样数据列表。我想将这些值传递到库中，并获取 WAV 文件中播放音乐的频率。现在，我将在 WAV 文件中有 1 个频率，我想找到一个与 Android 兼容的库。我知道我需要使用 FFT 来获取频域。有什么好的图书馆吗？我发现 [KissFFT][1] 很受欢迎，但我不太确定它在 Android 上的兼容性如何。是否有一个更简单、更好的库可以执行我想要的任务？

编辑：我尝试使用 JTransforms 来获取 WAV 文件的 FFT，但始终无法获取文件的正确频率。目前，WAV 文件包含 440Hz 的正弦曲线，音符 A4。然而，我得到的结果是 441。然后我试图得到 G4 的频率，我得到的结果是 882Hz，这是不正确的。G4的频率应该是783Hz。会不会是样本不够？如果是，我应该取多少样本？

```
//DFT
DoubleFFT_1D fft = new DoubleFFT_1D(numOfFrames);
double max_fftval = -1;
int max_i = -1;
double[] fftData = new double[numOfFrames * 2];
for (int i = 0; i < numOfFrames; i++) {
    // copying audio data to the fft data buffer, imaginary part is 0
    fftData[2 * i] = buffer[i];
    fftData[2 * i + 1] = 0;
}
fft.complexForward(fftData);
for (int i = 0; i < fftData.length; i += 2) {
    // complex numbers -> vectors, so we compute the length of the vector, which is sqrt(realpart^2+imaginarypart^2)
        double vlen = Math.sqrt((fftData[i] * fftData[i]) + (fftData[i + 1] * fftData[i + 1]));
        //fd.append(Double.toString(vlen));
       // fd.append(",");
        if (max_fftval < vlen) {
            // if this length is bigger than our stored biggest length
            max_fftval = vlen;
            max_i = i;
        }
}
//double dominantFreq = ((double)max_i / fftData.length) * sampleRate;
double dominantFreq = (max_i/2.0) * sampleRate / numOfFrames;
fd.append(Double.toString(dominantFreq)); 
```

有人可以帮我吗？

EDIT2：我设法通过将样本数量增加到 100000 来解决上述问题，但是，有时我会得到泛音作为频率。知道如何解决吗？我应该使用谐波积频率还是自相关算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:36:20.610

我意识到我的错误。如果我采取更多样本，准确性会提高。但是，这种方法仍然不完整，因为我在获得钢琴/人声的准确结果方面仍然存在一些问题。

# sphinx - 在 Sphinx SE 中显示状态

> ID：12420035
> 
> 赞同：0
> 
> 时间：2012-09-14T07:34:21.613
> 
> 标签：sphinx

执行该查询后

```
select count(*) from tablename WHERE query=';'; 
```

该查询将返回计数为 20。但该表共有 771498 条记录。同时在 SHOW STATUS LIKE 'sphinx_%' 上执行；

它有这样的回报

```
+--------------------+--------+
| Variable_name      | Value  |
+--------------------+--------+
| sphinx_error       | 5732   |
| sphinx_time        | 837    |
| sphinx_total       | 1000   |
| sphinx_total_found | 771498 |
| sphinx_word_count  | 0      |
| sphinx_words       |        |
+--------------------+--------+ 
```

在这里我有疑问。

*   什么是 sphinx_error？
*   sphinx_time 是什么？
*   什么是 sphinx_total？
*   sphinx_total_found 是什么？
*   sphinx_word_count 是什么？
*   什么是 sphinx_words？

这对我很有帮助。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:36:44.783

首先 sphinxse 不是一个真正的 mysql 表。它是一张假表。它接受一个查询，然后 sphinxse 将其转发到后台正在运行的实例，并将结果返回以生成一个“表”给 mysql。

所以 count(*) 不起作用。它只是运行查询并计算行数。除非您要求更多，否则只有 20 行。

*   狮身人面像错误？- 表示错误 - 也许 SHOW WARNINGS 会得到文本。
*   狮身人面像时间？- 查询花了多长时间（以毫秒为单位）
*   狮身人面像总？- 您可以实际检索多少条记录（取决于 max_matches）
*   sphinx_total_found? - 实际匹配的记录数
*   sphinx_word_count？- 查询中的字数
*   狮身人面像字？- 有多少文档/点击匹配每个单词 - 因为你没有查询，它是空的。

# javascript - 使用 JavaScript 动态插入 DIV 的成本有多高？

> ID：12420038
> 
> 赞同：3
> 
> 时间：2012-09-14T07:34:26.857
> 
> 标签：javascript, html, performance, dom

在与自己进行了多次辩论后，我决定动态创建覆盖画布的 div。但我有一个问题。动态创建 div 有多贵？如果我有一个完整的画布——1000x1000——充满了 16x16 的 div，会不会很混乱？如果有1000个隐藏的div会更糟吗？（或显示：无）？

或者我应该只将鼠标坐标与将容纳 x、y 位置的容器进行比较，并且必须将图像渲染到画布上。

我倾向于第一个更有效率，但我不确定。也许有一个中间立场。

对回复很感兴趣！谢谢你的时间。

（如果这是转发，对不起，我试图谷歌）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T07:51:10.267

这完全取决于如何将 DIV 插入 DOM。理想情况下，您应该在内存中构建 DIV，并通过单个操作将它们注入 DOM。有多种方法可以做到这一点（有关各种完整示例，请参阅[基准测试用例）。](http://jsperf.com/render-in-memory-vs-direct-dom-insertion/7)

如果你使用 jQuery，你可以像这样在内存中构建元素：

```
var i = 1000;
var aHTML = [];
while (i--) {
  aHTML.push("<div>a new div</div>");
}
var sHTML = aHTML.join("");
var domElmt = $(sHTML); 
```

然后将该 DIV 插入 DOM：

```
$('body').append(domElmt); 
```

如果您不使用 jQuery，则需要使用`createDocumentFragment`, `cloneNode`,`appendChild`等。这些是本机浏览器方法，速度最快（我可以在 Intel Q8200 上使用 Chrome 21 实现大约双倍速度）但使用这些本机方法将如果您需要构建复杂的 DOM 结构，则使用起来会更加棘手。本机方法也可能存在[跨浏览器支持问题](http://reference.sitepoint.com/javascript/Node/cloneNode#compatibilitysection)。

如果您对它的工作原理感兴趣，请查看 John Resig 的这篇旧文章：http: [//ejohn.org/blog/dom-documentfragments/](http://ejohn.org/blog/dom-documentfragments/)

现在将其与使用每个 DIV 访问 DOM 的方法进行对比：

```
var i = 1000;
while (i--) {
    $('body').append("<div>a new div</div>");
} 
```

代码行数更少，但效率很低。

**[运行 jsPerf DOM 插入基准测试](http://jsperf.com/render-in-memory-vs-direct-dom-insertion/7)**

对于我的计算机上的 Chrome 基准测试，在内存中渲染 DIV 并一次性注入比将每个单独的 DIV 单独注入 DOM 快 38 倍。

最终，DOM 遍历/操作是你想要避免的。重复的 DOM 遍历/操作是昂贵的操作，并且肯定会在 1000x1000 的 DIV 画布上陷入困境——尤其是在较旧的浏览器上。

**编辑：**自从我发布了这个问题，@RobG、@Devu 和我为各种 DOM 插入方法组合了一堆不同的基准测试。某些浏览器（Chrome、Safari）上最快的方法是使用`createDocumentFragment`,`cloneNode`等，但令人惊讶的是，在其他浏览器（FireFox 15、Internet Explorer 等）上，通过 an 创建一长串 HTML`array.join()`并插入 via`innerHTML`实际上是最快的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:51:47.247

一般回答：这主要取决于您的应用程序，我们对此知之甚少。一般来说，你的 HTML 越复杂，在浏览器中呈现的时间就越长，它会占用更多的内存，DOM 更改会更昂贵等。匹配的 CSS 规则和 Javascript 操作也是如此。

I would suggest the following approach: try either approach. Start of small and raise the number of elements in HTML to what you want to have in the end. Try in different browsers, perhaps on mobile machines etc. Try to measure CPU and Memory usage and work from this.

# iphone - writeToFile 正在覆盖以前的数据

> ID：12420039
> 
> 赞同：0
> 
> 时间：2012-09-14T07:34:28.773
> 
> 标签：iphone, objective-c, ios, nsdictionary, nsfilemanager

我在我的代码中使用NSDictionary 的**writeToFile**属性我试图将字典更新到文档目录，如下所示，

```
NSDictionary *revisionDict = [NSDictionary dictionaryWithObject:currentItem.rev forKey:destPath];
NSArray *documentDirPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentDirPath objectAtIndex:0];
NSString *dictPath = [documentsDir stringByAppendingPathComponent:@"Revision.dictionary"];
[revisionDict writeToFile:dictPath atomically:YES]; 
```

这里的问题是我的字典，而不是在每次迭代中被新条目更新，它被新条目覆盖。我如何更新我的字典是否有 writeToFile 的替代方法，提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T07:40:05.370

内存中的字典可以是可变的；写入磁盘的字典是一组完整信息的快照。

您不会从像这样的任何框架方法中获得“合并更新”行为。如果您有要添加或更新的现有版本，则需要将原始版本作为可变字典加载/保存在内存中，然后对其进行更改或添加，然后保存整个新版本（与`-writeToFile:`或其他东西）。

如果您要在循环中添加一堆条目，请先添加所有条目，然后在完成后将字典作为文件写入磁盘。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T07:46:28.773

是的**writeToFile**会覆盖之前的内容，

因此，您可以将文件的先前内容读入`NSMutableDictionary`，然后将新内容添加到此 mutableDictionary ，然后将此 mutableDictionary（包含旧内容和新内容）写入文件路径。

# sql-server-2005 - 将行与sql server中的列链接

> ID：12420040
> 
> 赞同：0
> 
> 时间：2012-09-14T07:34:30.933
> 
> 标签：sql-server-2005

我正在尝试使用两个表来获取结果集

1.  追踪平衡
2.  老化

表的结构是

**老化**

```
loc    |    glAcct    |    Amount
-----------------------------------
1013   |     1101     |    200
-----------------------------------
1211   |     1102     |    300
----------------------------------- 
```

**试算表**

```
loc   |    g1101    |   g1102
------------------------------
1013  |     20      |    30
------------------------------
1211  |     10      |    40
----------------------------- 
```

现在我要做的是将行与我现在想要的列匹配

```
loc   |   glAcct    |    agigingAmount |  Trialbalance Amount
--------------------------------------------------------------
1013  |     1101    |      200         |        20
--------------------------------------------------------------
1211  |     1102    |      300         |        40
------------------------------------------------------------- 
```

我尝试过类似的案例陈述

```
select ag.loc,ag.glAcct,
case
   when ag.glAcct = '1101' then select g1101 from trialbalance 
   when ag.glAcct = '1102' then select gl101 from trialbalance 
end  

 from trialbalance tb,Aging ag where ag.loc = tb.loc 
```

但它不工作。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:39:16.030

你几乎在那里：

```
SELECT ag.loc, ag.glAcct, ag.Amount AS agigingAmount
CASE ag.glAcct
   WHEN '1101' THEN tb.g1101
   WHEN '1102' THEN tb.g1102
END AS [Trialbalance Amount]
FROM Aging ag
INNER JOIN trialbalance tb on ag.loc = tb.loc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T07:56:44.893

试试这个：

```
SELECT ag.loc,
ag.glAcct, 
ag.Amount AS agigingAmount,
TrialbalanceAmount=
CASE ag.glAcct
   WHEN '1101' THEN tb.g1101
   WHEN '1102' THEN tb.g1102
END
FROM Aging ag,trialbalance tb 
WHERE ag.loc = tb.loc; 
```

[这是一个工作示例](http://sqlfiddle.com/#!3/21ef2/1/0)

# c# - 网格寻呼机无法正常工作

> ID：12420041
> 
> 赞同：0
> 
> 时间：2012-09-14T07:34:39.393
> 
> 标签：c#, asp.net, html, css

为什么我的网格寻呼机显示如下：

[![](../Images/6a7c5af453b4e6f981cb21d8c87722af.png)](https://i.stack.imgur.com/HFwCS.png)

它应该看起来像：

[![](../Images/c78da34292340f88cc9d71080392cd7e.png)](https://i.stack.imgur.com/73mdq.png)

这是我的代码：

```
 <asp:GridView ID="grid" runat="server" AllowSorting="True"
         AutoGenerateColumns="False" CellPadding="0"  GridLines="None"
         PageSize='<%# int.Parse(System.Configuration.ConfigurationManager.AppSettings["gvPageSize"].ToString()) %>'
         Width="100%" OnRowCreated="grid_RowCreated" CssClass="mGrid"
         PagerStyle-CssClass="pgr" AlternatingRowStyle-CssClass="alt" AllowPaging="true"
 OnPageIndexChanging="grid_PageIndexChanging"> 
```

和CSS：

```
.mGrid {   
width: 100%;   
background-color: #fff;   
margin: 5px 0 10px 0;   
border: solid 1px #525252;   
border-collapse:collapse;}   
.mGrid td {   
padding: 2px;   
border: solid 1px #c1c1c1;   
color: #717171;} 
.mGrid th {   
padding: 4px 2px;   
color: #fff;   
background: #424242 url(grd_head.png) repeat-x top;   
border-left: solid 1px #525252;   
font-size: 0.9em;}
.mGrid .alt { background: #fcfcfc url(grd_alt.png) repeat-x top; }  
.mGrid .pgr { background: #424242 url(grd_pgr.png) repeat-x top;}
mGrid .pgr table { margin: 5px 0;}
.mGrid .pgr td {   
border-width: 0;   
padding: 0 6px;   
border-left: solid 1px #666;   
font-weight: bold;   
color: #fff;   
line-height: 12px;} 
.mGrid .pgr a { color: #666; text-decoration: none;}
.mGrid .pgr a:hover { color: #000; text-decoration: none;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:43:08.347

在应用于寻呼机的 css 中，下面以粗体标记的 css （如边距和填充）可能是这种情况下的关键罪魁祸首。

.mGrid .pgr 表{**边距：5px** 0;}

.mGrid .pgr td { ...... **padding: 0 6px;** ……

您应该尝试在一些 DOM Inspector 中检查 css，例如 Chrome 开发人员工具/Firebug 并对其进行调整，直到您将其变为您希望的样子

# android - 如何在android的ListView中添加ImageView、TextView和Button

> ID：12420044
> 
> 赞同：0
> 
> 时间：2012-09-14T07:34:50.447
> 
> 标签：android, android-listview, baseadapter

在我的应用程序中，我试图创建一个包含 ImageView、TextView 和 Button 的 ListView。我创建了一个单独的 XML 文件并在该 XML 和我的主 java 文件中拖动所有上述元素我创建了 BaseAdapter 的对象和在 getView() 方法中我已经声明了这些元素但是当我运行应用程序时我不能见清单。我没有使用 BaseAdapter，所以我缺少一些代码来查看列表。我还想在按钮上应用一些操作，所以也请让我知道该代码。

我的 main.xml 文件的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

我的 list_item.xml 的代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="75dp"
        android:layout_height="75dp"
        android:scaleType="fitXY"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="0dp"
        android:layout_marginTop="15dp"
        android:text="Medium Text"
        android:textSize="15dp" />

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="25dp"
        android:text="Button" />

</LinearLayout> 
```

我的 main.java 文件的代码：

```
public class CustomListActivity extends Activity {
    /** Called when the activity is first created. */
    ListView lv;
    LayoutInflater inflator;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        lv = (ListView)findViewById(R.id.listView1);

        BaseAdapter bs = new BaseAdapter() {

            public View getView(int position, View convertView, ViewGroup parent) {
                // TODO Auto-generated method stub
                View vw = inflator.inflate(R.layout.list_items, null);
                ImageView img = (ImageView)findViewById(R.id.imageView1);
                TextView tv = (TextView)findViewById(R.id.textView1);
                Button btn = (Button)findViewById(R.id.button1);
                return vw;
            }

            public long getItemId(int position) {
                // TODO Auto-generated method stub
                return 0;
            }

            public Object getItem(int position) {
                // TODO Auto-generated method stub
                return null;
            }

            public int getCount() {
                // TODO Auto-generated method stub
                return 2;
            }
        };
    }
} 
```

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:40:51.080

行，

```
 public class App_Adapter extends BaseAdapter implements OnClickListener{
      private  Activity mActivity;
      private  List<App_List> mList;
      private static LayoutInflater inflater=null;
     private PackageManager pm;
     private String appclass;
private  ApplicationTask mApplicationTask;
private String link=null;
public App_Adapter (FavouriteApp favouriteApp,List<App_List> mAppList, String appclass) {
    // TODO Auto-generated constructor stub
    this.mActivity= favouriteApp;
    this.mList= mAppList;
    this.appclass = appclass;
    inflater = (LayoutInflater)mActivity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    pm=mActivity.getPackageManager();
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return mList.size();
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View mView=convertView;
    if (convertView == null)  
    mView = inflater.inflate(R.layout.app_adapter, parent,false);
    App_List mAppList= mList.get(position);
   **here i am setting two textview and one button**
    ((TextView) mView.findViewById(R.id.textView_appName)).setText(mAppList.getApp_Name());
    ((TextView) mView.findViewById(R.id.textView_appDescription)).setText(mAppList.getApp_Description());
    boolean status = isAppInstalled(mAppList.getApp_Pkg());
    Button btn = (Button)  mView.findViewById(R.id.button_appStatus);
    **// register the button for clicklistener**
    btn.setOnClickListener(this);

return mView;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

} 
```

并从您的活动中调用此适配器类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:40:03.370

你肯定失踪了`lv.setAdapter(bs);`

# c# - 通过 COM 将 C 样式的结构/记录数组从 delphi 5 传递到 C#

> ID：12420045
> 
> 赞同：1
> 
> 时间：2012-09-14T07:35:00.117
> 
> 标签：c#, delphi, com-interop

我在导入 Delphi 5 和 C# 程序集的类型库中定义了一个结构。

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
public struct MyStruct
{
    public uint a;
    public float b;
}

MyStruct = packed record
    a: LongWord;
    b: Single;
end; 
```

在 Delphi 方面，我有一个指向所述结构的 C 样式数组的指针，我想通过 COM 将其传递给 C# 程序集。理想情况下，我希望它以 myStruct[] 的形式出现在 c# 端，但我将使用一个指向正确编组的内存块的指针，因为这些结构都是 blittable。

我尝试过的两种方法是

```
void DoFoo([MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)] MyStruct[] fooArray, int size);
void DoBar(MyStruct[] barArray, int length); 
```

在转换为类型库并导入 delphi 之后是

```
procedure DoFoo(var fooArray: MyStruct; size: Integer); safecall;
procedure DoBar(barArray: PSafeArray; length: Integer); safecall; 
```

我认为安全数组不适用于结构，而另一个显然不是数组。

任何想法/链接/任何非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:31:20.870

事实上，我确实将 delphi 中的结构作为安全数组传递，它作为 byte[] 传递给 c#。

```
// C# interop method.
void DoFoo(byte[] myStructs); 

// Delphi SafeArray creation
size := fooNumber* sizeof(Foo);
arrayBounds.lLbound :=  0;
arrayBounds.cElements := size;
safeArray := SafeArrayCreate( varByte, 1, arrayBounds );
SafeArrayLock(safeArray);
Move(pointerToFooArray^, safeArray.pvData^, size);
SafeArrayUnlock(safeArray);
auroraDiagnostics.DoFoo(safeArray); 
```

然后我使用[此解决方案](https://stackoverflow.com/questions/2871/reading-a-c-c-data-structure-in-c-sharp-from-a-byte-array)将其转换回原始结构。

这有点笨拙，但它确实有效。

# lwuit - 当消息的内容填满屏幕时，我无法查看最后一条消息，有人可以帮我吗？

> ID：12420047
> 
> 赞同：-1
> 
> 时间：2012-09-14T07:35:19.350
> 
> 标签：lwuit

我正在使用 lwuit api 做一个 IM 应用程序，在我的消息表单中我有一个问题，当消息的内容填满屏幕时，我无法查看最后一条消息，我必须手动滚动，这很尴尬。

我已经尝试了一切，但我仍然没有得到解决方案。

我希望有人能帮助我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:09:38.333

我很久以前就尝试过和你做同样的事情，但是我的应用程序的滚动变得疯狂。在此视频中，您可以找到一个类似的应用程序，并且在说明中您可以找到代码的链接。请看看他们。

[http://www.youtube.com/watch?v=LFClNS5vWQs](http://www.youtube.com/watch?v=LFClNS5vWQs)

祝你好运！

# c# - 如何将 Facebook like 按钮集成到我们的 asp.net c# 网站

> ID：12420049
> 
> 赞同：3
> 
> 时间：2012-09-14T07:35:42.450
> 
> 标签：c#, asp.net, facebook, facebook-like, facebook-c#-sdk

Like 按钮可让用户与 Facebook 上的朋友分享您的内容。当用户单击您网站上的“赞”按钮时，用户朋友的新闻提要中会出现一个故事，并带有返回您网站的链接。对吗？

我写了以下代码，这就像 LIKE 按钮，我无法将网站的任何内容分享到 fb 墙页

```
<script type="text/javascript">
    function renderFbLike() {
        var parent = document.getElementById('fblikediv');
        var child = document.getElementById('fblikeimg');
        parent.removeChild(child);

        var html2 = "<iframe src=\"http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2FVoicent&send=false&layout=standard&width=450&show_faces=false&action=like&colorscheme=light&font&height=60&appId=258346014244946\" scrolling=\"no\" frameborder=\"0\" style=\"border:none; overflow:hidden; width:450px; height:40px;\" allowTransparency=\"true\"></iframe>";
            document.getElementById('fblikediv').innerHTML = html2;
    }
</script>

</head>

<body>
<div id="fblikediv"><img src="images/fb-like-button.png" id="fblikeimg" onMouseOver="return renderFbLike();"></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T07:49:12.360

转到此[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)页面，当您输入您希望 facebook 为您的页面生成 html 和 javascript 代码的参数时。当您将这些实施到您的页面时，它可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T07:42:01.897

如果你想添加任何社交插件，你不需要任何**用于 C# 的 SDK，**因为 FB 社交只是 HTML 和 Js，它独立工作 C# sdk 只有在你想为 facebook 或任何其他东西（如登录按钮等）构建应用程序时才需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:07:19.113

Facebook 在条款和条件中限制了“点赞”功能和“点赞”按钮的查看，因此在您的网站上获得“点赞”按钮的唯一方法是使用 Facebook 中的“点赞”按钮，正如 Mutu 所说：http: [//developers.facebook.com/docs/reference/ plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/) 如果您不需要完全喜欢，您可以使用允许使用 Javascript API 自定义元素外观的共享功能：[https ://developers.facebook.com/docs/reference/dialogs/send/](https://developers.facebook.com/docs/reference/dialogs/send/)

# c++ - 霓虹浮点乘法比预期慢

> ID：12420050
> 
> 赞同：6
> 
> 时间：2012-09-14T07:35:49.533
> 
> 标签：c++, gcc, arm, simd, neon

我有两个浮动标签。我需要将第一个选项卡中的元素乘以第二个选项卡中的相应元素，并将结果存储在第三个选项卡中。

我想使用 NEON 来并行化浮点乘法：同时进行四个浮点乘法而不是一个。

我预计会有显着的加速，但我只实现了大约 20% 的执行时间减少。这是我的代码：

```
#include <stdlib.h>
#include <iostream>
#include <arm_neon.h>

const int n = 100; // table size

/* fill a tab with random floats */
void rand_tab(float *t) {
    for (int i = 0; i < n; i++)
        t[i] = (float)rand()/(float)RAND_MAX;
}

/* Multiply elements of two tabs and store results in third tab
 - STANDARD processing. */
void mul_tab_standard(float *t1, float *t2, float *tr) {
    for (int i = 0; i < n; i++)
         tr[i] = t1[i] * t2[i]; 
}

/* Multiply elements of two tabs and store results in third tab 
- NEON processing. */
void mul_tab_neon(float *t1, float *t2, float *tr) {
    for (int i = 0; i < n; i+=4)
        vst1q_f32(tr+i, vmulq_f32(vld1q_f32(t1+i), vld1q_f32(t2+i)));
}

int main() {
    float t1[n], t2[n], tr[n];

    /* fill tables with random values */
    srand(1); rand_tab(t1); rand_tab(t2);

    // I repeat table multiplication function 1000000 times for measuring purposes:
    for (int k=0; k < 1000000; k++)
        mul_tab_standard(t1, t2, tr);  // switch to next line for comparison:
    //mul_tab_neon(t1, t2, tr);  
    return 1;
} 
```

我运行以下命令进行编译： g++ -mfpu=neon -ffast-math neon_test.cpp

我的 CPU：ARMv7 处理器版本 0 (v7l)

您对我如何实现更显着的加速有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T08:49:10.573

Cortex-A8 和 Cortex-A9 每个周期只能执行两次 SP FP 乘法，因此您最多可以将这些（最流行的）CPU 的性能提高一倍。实际上，ARM CPU 的 IPC 非常低，因此最好尽可能多地展开循环。如果你想要极致的性能，就用汇编写吧：gcc 的 ARM 代码生成器远不如 x86 好。

我还建议对 Cortex-A9 使用特定于 CPU 的优化选项：“-O3 -mcpu=cortex-a9 -march=armv7-a -mtune=cortex-a9 -mfpu=neon -mthumb”；对于 Cortex-A15、Cortex-A8 和 Cortex-A5，相应地替换 -mcpu=-mtune=cortex-a15/a8/a5。gcc 没有针对 Qualcomm CPU 的优化，因此对于 Qualcomm Scorpion 使用 Cortex-A8 参数（并且展开比您通常做的更多），对于 Qualcomm Krait 尝试使用 Cortex-A15 参数（您需要最新版本的 gcc 支持它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T20:39:06.027

霓虹内在函数的一个缺点是，您不能在负载上使用自动增量，这在您的霓虹实现中显示为额外的指令。

使用 gcc 版本 4.4.3 和选项**-c -std=c99 -mfpu=neon -O3**编译并使用 objdump 转储，这是 mul_tab_neon 的循环部分

```
000000a4 <mul_tab_neon>:
  ac:   e0805003    add r5, r0, r3
  b0:   e0814003    add r4, r1, r3
  b4:   e082c003    add ip, r2, r3
  b8:   e2833010    add r3, r3, #16
  bc:   f4650a8f    vld1.32 {d16-d17}, [r5]
  c0:   f4642a8f    vld1.32 {d18-d19}, [r4]
  c4:   e3530e19    cmp r3, #400    ; 0x190
  c8:   f3400df2    vmul.f32    q8, q8, q9
  cc:   f44c0a8f    vst1.32 {d16-d17}, [ip]
  d0:   1afffff5    bne ac <mul_tab_neon+0x8> 
```

这是 mul_tab_standard 的循环部分

```
00000000 <mul_tab_standard>:
  58:   ecf01b02    vldmia  r0!, {d17}
  5c:   ecf10b02    vldmia  r1!, {d16}
  60:   f3410db0    vmul.f32    d16, d17, d16
  64:   ece20b02    vstmia  r2!, {d16}
  68:   e1520003    cmp r2, r3
  6c:   1afffff9    bne 58 <mul_tab_standard+0x58> 
```

正如您在标准情况下所看到的，编译器创建了更紧密的循环。

# ruby-on-rails - Cucumber 不适用于 rails 2.3.14 和 ruby 1.8.7/ree

> ID：12420052
> 
> 赞同：0
> 
> 时间：2012-09-14T07:36:12.107
> 
> 标签：ruby-on-rails, ruby, cucumber, rake, environment

```
My enviorenment: 
**Rails - 2.3.14
Ruby - ree/ruby 1.8.7** 
```

我第一次尝试使用黄瓜。对于我现有的项目，我关注了 => [http://railscasts.com/episodes/155-beginning-with-cucumber 。](http://railscasts.com/episodes/155-beginning-with-cucumber)

```
I have executed the **bold** commnads but it is giving the below mentioned error though I have rspec-core,rack-test & i18n latest version in my system: 

==============================================================================
**rvmsudo rake gems:unpack RAILS_ENV=test**
[sudo] password for ilfs: 

(in /home/ilfs/work/ces)
Please install RDoc 2.4.2+ to generate documentation.
DEPRECATION WARNING: Rake tasks in vendor/plugins/TBD_ prawnto/tasks, vendor/plugins/jrails/tasks, and vendor/plugins/online_help/tasks are deprecated. Use lib/tasks instead. (called from /home/ilfs/.rvm/gems/ree-1.8.7-2012.02@ces/gems/rails-2.3.14/lib/tasks/rails.rb:10)
gem install rspec --version ">= 1.2.2"
ERROR:  Error installing rspec:
    rspec requires rspec-core (~> 2.11.0)

gem install rspec-rails --version ">= 1.2.2"
ERROR:  Error installing rspec-rails:
    activesupport requires i18n (~> 0.6)

gem install webrat --version ">= 0.4.3"
ERROR:  Error installing webrat:
    webrat requires rack-test (>= 0.5.3)

rake aborted!
undefined method `version' for nil:NilClass

(See full trace by running task with --trace)

============================================================================

ilfs@ilfs:~/work/ces$ **rvmsudo rake gems:unpack:dependencies RAILS_ENV=test**
(in /home/ilfs/work/ces)

Please install RDoc 2.4.2+ to generate documentation.
DEPRECATION WARNING: Rake tasks in vendor/plugins/TBD_ prawnto/tasks, vendor/plugins/jrails/tasks, and vendor/plugins/online_help/tasks are deprecated. Use lib/tasks instead. (called from /home/ilfs/.rvm/gems/ree-1.8.7-2012.02@ces/gems/rails-2.3.14/lib/tasks/rails.rb:10)
gem install rspec --version ">= 1.2.2"
ERROR:  Error installing rspec:
    rspec requires rspec-core (~> 2.11.0)

gem install rspec-rails --version ">= 1.2.2"
ERROR:  Error installing rspec-rails:
    activesupport requires i18n (~> 0.6)

gem install webrat --version ">= 0.4.3"
ERROR:  Error installing webrat:
    webrat requires rack-test (>= 0.5.3)

rake aborted!
undefined method `version' for nil:NilClass

(See full trace by running task with --trace)
================================================================================== 
```

这是我第一次尝试使用黄瓜，除了 rails cast video 的概念之外，我不知道它。由于我的系统尚未配置，所以我无法测试任何东西。

```
Expecting help - 
Thanks in advance
Sumanta 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:46:35.240

我解决了这个问题——起初我在 enviorement/tests.rb 中添加了 gem，但是在 gemfile 中添加了这些 gem 之后——问题得到了解决。这是步骤-

在宝石文件中

```
group :development, :test do
  #gem "rspec-rails", '>=1.3.2'
  gem 'rspec', '>=1.3.2'
  gem "capybara", "0.3.9"
  gem "cucumber", ">=0.2.2"
  gem "cucumber-rails", "0.3.2" 
  gem 'database_cleaner'
  gem 'webrat', ">=0.4.3"
end 
```

从项目文件夹控制台/终端运行此命令 => ruby​​ 脚本/生成黄瓜

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:36:35.257

乍一看，我会说你有依赖问题。Rails 2 已经很老了，您尝试安装的那些 gem 已经远远领先于 Rails 2 了。

所以我会避免在 Gem 要求中使用 ">=" 规范。由于您使用 Railscasts 作为学习工具，因此我会将 Gem 版本设为“=”。所以你至少可以保证版本是一样的。

将 ">=" 用于遗留项目是非常危险的，因为 Ruby gem 是快速移动的目标。因此，对于每个旧版应用程序，总有一天您必须锁定版本。

# facebook - 使用 facebook 注册表单进行电子邮件异步验证

> ID：12420056
> 
> 赞同：1
> 
> 时间：2012-09-14T07:36:30.313
> 
> 标签：facebook, validation, asynchronous, email-validation, user-registration

正如脸书所说

```
For privacy reasons, the input to your function will be only the custom fields you requested, on blur or submit. 
```

确实电子邮件不是自定义字段，但是当用户单击“x”（交叉）手动填写详细信息时，仍然`form.email`保留`undefined`吗？

这是一个 facebook 错误，是否有任何修复/解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:49:04.223

好吧，我通过使用“视图”属性找到了解决方法

在我添加的字段列表中

```
fields="[
 {'name':'email','view':'prefilled'},
 {'name':'xemail','view': 'not_prefilled','description':'Email Address:','type':'text'}]"; 
```

现在电子邮件与 fb 一起使用，xemail 与 fb 一起使用，而我的异步验证器在没有 fb 的情况下使用 form.xemail。

# java - java进程无限期停止并且无法正确退出？

> ID：12420057
> 
> 赞同：3
> 
> 时间：2012-09-14T07:36:31.160
> 
> 标签：java, multithreading

我有一个为不同的电子邮件地址发送电子邮件的java进程，我正在使用java线程池执行程序，每个线程都尝试发送电子邮件然后退出

问题是所有线程都将进入等待状态，即使线程已成功完成工作，也永远无法回到运行状态，

我的threadPoolExecutor配置如下，

队列大小 = 100 线程数 = 5 最大线程数 = 10 保持活动时间 = 1 分钟

**这是线程转储，但我不明白它在说什么**

```
java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x2808f538> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
    at java.util.concurrent.ArrayBlockingQueue.take(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.getTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
    - None 
```

**这是代码：**

```
ReqtQueue = new ArrayBlockingQueue<Runnable>(100, true);
        notifTaskExecutor   = new ThreadPoolExecutor(
          5, // core size of threads that will remain in idle state
          10, // max size of thread that can be created
          1, // keep alive time for thread other than number of core threads when they are in idel state
          TimeUnit.MINUTES, // keep alive time units
          ReqtQueue // the queue to use
        ); 
```

**并调用执行方法：**

```
notifTaskExecutor.execute(new NotificationSender(request, name)); 
```

NotificationSender 只是发送电子邮件，所有代码都在 try catch 中，非常简单，即使 run 方法为空，线程也不会终止

需要帮助

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T07:53:31.700

如果您查看您的线程转储，线程正在任务队列中等待更多任务。即这是预期的行为。

仅当所有非守护线程都已终止并且线程池使用非守护线程时，JVM 才会退出。

您应该调用线程池上的 shutdown() 方法将其关闭。您可以在提交任务后立即调用此方法，因为已经提交的任务将在关闭之前进行处理（与 shutdownNow 方法不同）。

或者，也可以有一个使用守护线程的线程池。当最后一个非守护线程退出时，这些将自动关闭。

但是在您的情况下，您希望我使用关闭方法。您还可以在调用 shutdown 后调用 awaitTermination 方法来等待您的任务完成，以便打印日志消息等。

# android - 如何使文本视图中的链接在列表视图中可点击

> ID：12420058
> 
> 赞同：1
> 
> 时间：2012-09-14T07:36:40.430
> 
> 标签：android

如何在列表视图中的文本视图中创建可点击的链接当我使用自动链接 =“web”时，我无法点击列表项。它直接进入网址。我正在获取在线内容。我该如何解决这个问题。任何帮助请..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T07:58:48.867

在适配器的方法中实现`onClick`事件。`TextView(URL)``ListView Item``getView()`

在此处检查问题中的代码：

[在android中的listview项目上制作不同的可点击视图](https://stackoverflow.com/questions/11559575/make-different-clickable-views-on-a-listview-item-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T01:28:55.943

此方法适用于混合文本和链接。在适配器 getView

```
yourTextView.setText("http://www.example.com");
Linkify.addLinks(yourTextView, Linkify.WEB_URLS);
yourTextView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T07:48:31.277

您可以`view.requestFocus()`用于您想要单击的视图...

# php - Facebook 添加评论数据格式

> ID：12420061
> 
> 赞同：0
> 
> 时间：2012-09-14T07:36:50.750
> 
> 标签：php, facebook, facebook-graph-api, foreach, facebook-comments

我想在 facebook 帖子上添加评论.. 通过 facebook API

添加评论的功能是

```
public function fill($json)
{
    if(isset($json['data']))
    {
        $json = $json['data'];
    }
    foreach($json as $k => $v ) $this->{$k} = $v;
} 
```

我将 json 格式的数据传递为

```
{"data":{"id":"153870348034313_347443752010304","message":"test comment"}} 
```

但回应是：`Invalid argument supplied for foreach()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:44:10.773

你没有解码`JSON`：

```
public function fill($json)
{
    $json = json_decode($json);

    if(isset($json->data))
    {
        $json = $json->data;
    }
    foreach($json as $k => $v ) $this->{$k} = $v;
} 
```

# c# - 要从按钮刷新表单中的列表视图，请单击另一个表单

> ID：12420062
> 
> 赞同：1
> 
> 时间：2012-09-14T07:36:57.160
> 
> 标签：c#, .net

我有两个表格 F1 和 F2。在 F1 中，我有一个列表视图和一个添加按钮。当我单击添加按钮时，F2 打开，我可以添加一些值。

我在 F2 中有一个按钮接受，当按下该按钮时，将 F2 中的值添加到表中并关闭 F2。

我有一个刷新方法，用于刷新 F1 中的列表视图。我试图在 F2 的接受 button_click 事件中调用此方法。我在 F2.cs 中写了类似的内容

```
F1 f=new F1();
private void accept_Click(object sender, EventArgs e)
{
    //my adding values code

    this.Close();
    f.refresh();
 } 
```

刷新方法工作正常..只是当我从 F2 调用它时它没有执行它的功能..任何人都好心地建议一种更好的方法来实现我想要的..任何类型的建议都非常感谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T08:05:36.277

您需要将对 F1 的引用传递到 F2 表单中。

```
F2 f = new F2(this);
f.Show(); 
```

在此之后以 f2 形式创建 f1 的全局对象

```
 f1 GBobjF1=null; 
```

然后以 f2 形式的以下构造函数初始化该对象 GBobjF1

```
 public f2(f1  f1Obj)
    {
        InitializeComponent();
        GBobjF1 = f1Obj;

    } 
```

现在可以在 f2 窗体上使用那个全局对象 GBobjF1，使用这个对象你可以访问 f1 窗体的所有公共成员。您可以重新填充 f1 内部的列表视图，例如：

```
GBobjF1.FillListView(); 
```

它将使用新值刷新并重新填充该列表视图

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T07:43:43.753

您需要将对 F1 的引用传递到 F2 表单中。

F1形式

```
F2 f = new F2();
f.f1ref = this; 
```

F2形式

```
public F1 f1ref;

private void accept_Click(object sender, EventArgs e)
{
//my adding values code
f1ref.refresh();
this.Close(); 
} 
```

# facebook - facebook 移动访问令牌

> ID：12420067
> 
> 赞同：1
> 
> 时间：2012-09-14T07:37:27.080
> 
> 标签：facebook, facebook-graph-api, mobile

在我们的移动 FB 应用程序之一中，我们希望将 FB 访问令牌存储到后端，以便能够：

1.  将访问令牌扩展到长寿命
2.  使用它们代表我们后端服务器的用户执行某些任务

是否可以使用使用 fb js sdk 获得的应用令牌来执行这些操作？

谢谢，贾纳尔

# encryption - 从 PFX (PKCS #12) 文件创建 RSA 私钥

> ID：12420068
> 
> 赞同：19
> 
> 时间：2012-09-14T07:37:35.640
> 
> 标签：encryption, certificate, ssl-certificate, rsa, pem

我正在尝试从 pkcs #12 文件中获取私有 RSA 密钥。

我试过运行标准

```
openssl pkcs12 -nocerts -out priv.pem -in domain.com.pfx 
```

但是，这会产生一个如下所示的密钥文件：

```
Bag Attributes
Microsoft Local Key set: <No Values>
localKeyID: 01 00 00 00 
friendlyName: xxxxxxxx
Microsoft CSP Name: Microsoft RSA SChannel Cryptographic Provider
Key Attributes
X509v3 Key Usage: 10
-----BEGIN ENCRYPTED PRIVATE KEY----- 
```

我需要将其放入的服务器无法处理密钥文件，当我查看示例数据时，我看到如下文件

```
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: DES-EDE3-CBC,2CF27DD60B8BB3FF 
```

当然，这两个文件中都存在密钥。但是，服务器似乎只接受 RSA 私钥文件，在我看来，我得到的输出是一个 X509v3 文件，有人知道如何将其转换为 RSA 私钥文件吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-14T11:22:33.053

好吧 - 使用文本编辑器删除有问题的行可能是最简单的。否则下面将清理包属性：

```
openssl pkcs12 -in x.pfx  -nocerts -nodes -passin pass:123456 | openssl rsa -out privkey.pem 
```

也可以用来获取der/net

```
openssl pkcs12 -in x-fred.p12  -nocerts -nodes -passin pass: | openssl rsa -outform DER -out privkey.der 
```

which may be in fact the format you want. It is fairly common for tools to not accept a password less private key though (and a lot of tools will silently fail if the # of chars are not at least 4 or 6). So in those cases change the tailend to:

```
.... | openssl rsa -passout pass:123456 -out privkey.pem
.... | openssl rsa -passout pass:123456 -out privkey.der -outform der 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T09:43:38.950

On windows 7 64bit, you can simply use your command.But in mac and linux, you should do the following steps:

1, create your pem file:
openssl pkcs12 -in xxx.pfx -out xxx.pem

2, create your rsa private key :
openssl pkcs12 -in xxx.pfx -passin pass:yourpassword | openssl rsa -des3 -passout pass:yourpassowrd -out xxx.key

this step will create the key file with the conten:" -----BEGIN RSA PRIVATE KEY----- Proc-Type: 4,ENCRYPTED DEK-Info: DES-EDE3-CBC,2CF27DD60B8BB3FF"

3, open your .pem and .key file in a text editor, and replace the origin key" -----BEGIN ENCRYPTED PRIVATE KEY-----" in the .pem file with the rsa key in the .key file.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-07T14:45:25.873

This works for me:

```
openssl pkcs12 -in "$1" \
    -nocerts -nomacver \
    -passin file:<(cat "$pw") \
    -passout file:<(cat "$pw") |
sed -n '/^-----BEGIN ENCRYPTED PRIVATE KEY-----/,/^-----END ENCRYPTED PRIVATE KEY-----/p' 
```

# c# - 如何使用命名空间前缀创建 XML？

> ID：12420071
> 
> 赞同：0
> 
> 时间：2012-09-14T07:37:53.040
> 
> 标签：c#, xml, xsd

我应该如何在 C# 中编写代码来创建这样的 xml 文件

```
<ymaps:GeoObjectCollection>
    <gml:name>Something</gml:name>
    <gml:featureMembers>
        <ymaps:GeoObject>
            <gml:name>Something</gml:name>
            <gml:description>Something</gml:description>
            <gml:LineString>
                <gml:pos>50.588298 55.145683</gml:pos>
                <gml:pos>50.588290 55.145678</gml:pos>
                <gml:pos>50.588288 55.145678</gml:pos>
            </gml:LineString>
            <ymaps:style>#customStyle1</ymaps:style>
        </ymaps:GeoObject> 
```

这个 yandex 的 xml 文件，它在[http://maps.yandex.ru/schemas/ymaps/1.x/ymaps.xsd上有 xsd 文件](http://maps.yandex.ru/schemas/ymaps/1.x/ymaps.xsd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:38:25.713

这里演示了如何使用 LINQ to XML 创建所需的 XML。我创建了两个类来存储数据：`GeoObject`和`Pos`：

```
var geoObjects = new[] {
  new GeoObject {
    Name = "Something",
    Description = "Something",
    Line = new[] {
      new Pos { X = 50.588298M, Y = 55.145683M },
      new Pos { X = 50.588290M, Y = 55.145678M },
      new Pos { X = 50.588288M, Y = 55.145678M }
    },
    Style = "#customStyle1"
  }
}; 
```

XML 是使用以下代码创建的：

```
XNamespace ymaps = "http://maps.yandex.ru/ymaps/1.x";
XNamespace gml = "http://www.opengis.net/gml";
var xElement = new XElement(
  ymaps + "GeoObjectCollection",
  new XAttribute(XNamespace.Xmlns + "ymaps", ymaps),
  new XAttribute(XNamespace.Xmlns + "gml", gml),
  new XElement(gml + "name", "Something"),
  new XElement(gml + "featureMembers",
    geoObjects.Select(
      geoObject => new XElement(
        ymaps + "GeoObject",
        new XElement(gml + "name", geoObject.Name),
        new XElement(gml + "description", geoObject.Description),
        new XElement(gml + "LineString",
          geoObject.Line.Select(
            pos => new XElement(
              gml + "pos",
              String.Format(CultureInfo.InvariantCulture, "{0} {1}", pos.X, pos.Y)
            )
          )
        ),
        new XElement(ymaps + "style", geoObject.Style)
      )
    )
  )
); 
```

如果你写出来，`xElement`你会得到以下 XML：

```
<ymaps:GeoObjectCollection xmlns:ymaps="http://maps.yandex.ru/ymaps/1.x" xmlns:gml="http://www.opengis.net/gml">
  <gml:name>Something</gml:name>
  <gml:featureMembers>
    <ymaps:GeoObject>
      <gml:name>Something</gml:name>
      <gml:description>Something</gml:description>
      <gml:LineString>
        <gml:pos>50.588298 55.145683</gml:pos>
        <gml:pos>50.588290 55.145678</gml:pos>
        <gml:pos>50.588288 55.145678</gml:pos>
      </gml:LineString>
      <ymaps:style>#customStyle1</ymaps:style>
    </ymaps:GeoObject>
  </gml:featureMembers>
</ymaps:GeoObjectCollection> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:12:33.527

首先熟悉[XML](http://en.wikipedia.org/wiki/XML)、[XML 命名空间](http://en.wikipedia.org/wiki/XML_Namespace)、[XML 模式](http://en.wikipedia.org/wiki/XML_Schema_%28W3C%29)以及如何[在 .NET 中处理 XML 数据](http://msdn.microsoft.com/en-us/library/2bcctyt8%28v=vs.80%29)。一旦掌握了基础知识，就可以使用[XML 架构定义工具 (Xsd.exe)](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.80%29.aspx)从 XSD 生成类并在应用程序中使用它。

# json - 在ajax调用中在服务器端收到不完整的json有效负载 - asp.net mvc3 / jquery

> ID：12420074
> 
> 赞同：3
> 
> 时间：2012-09-14T07:38:03.993
> 
> 标签：json, asp.net-mvc-3, exception, jquery, deserialization

我面临一个奇怪的问题，在某些情况下会发生，但在常规情况下不会。我有一个 ajax 调用，它将一些数据发送到我的控制器。在大多数情况下，ajax 调用正确地将数据发布到控制器，但它失败的情况（异常）我得到一个日志，表明接收到的 json 不完整。我真的不知道这种错误行为的根本原因是什么。任何指针都会有很大帮助...

这是我的代码 -

C＃

```
 public class MyController : System.Web.Mvc.Controller {
      ....
      ....
        public JsonResult doPost(string x, string y, int z) {

        private JavaScriptSerializer _serialiser = new JavaScriptSerializer();
        List<Dictionary<string, object>> items = _serialiser.Deserialize<List<Dictionary<string, object>>>(x); 
 // deserialsation throws argument exception
     ...
     // do stuff after that...
    }

    ...
    } 
```

*异常详情*

类型 - System.ArgumentException

message - 传入的未终止字符串。

堆栈跟踪 -

```
at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeString()
   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32 depth)
   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeDictionary(Int32 depth)
   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32 depth)
   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.BasicDeserialize(String input, Int32 depthLimit, JavaScriptSerializer serializer)
   at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit)
   at System.Web.Mvc.JsonValueProviderFactory.GetValueProvider(ControllerContext controllerContext)
   at System.Web.Mvc.ValueProviderFactoryCollection.<>c__DisplayClassc.<GetValueProvider>b__7(ValueProviderFactory factory)
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at System.Web.Mvc.ValueProviderFactoryCollection.GetValueProvider(ControllerContext controllerContext)
   at System.Web.Mvc.ControllerBase.get_ValueProvider()
   at System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor)
   at System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

Javascript

```
// A - is a big object
    var jsonData = { x: JSON.stringify(A),
                    y: new Date().toString(),
                    z: A.Index
                };

$.ajax ({ 
url : '/my/doPost', 
type: 'POST', contentType: 'application/json; charset=utf-8;', 
cache: false, 
data: JSON.stringify(jsonData), 
dataType: 'json', 
async: true, 
success: function () {
  // do something on success
}, 
error: function (jqXhr, textStatus, errorThrown)  {
// do something on error
}
}); 
```

谢谢萨尔塔克

# java - 如何通过非 Spring 配置文件将 Apache CXF 配置为使用单个 JAXBContext？

> ID：12420078
> 
> 赞同：9
> 
> 时间：2012-09-14T07:38:15.423
> 
> 标签：java, web-services, jaxb, cxf

我读过跨多个线程共享单个 JAXBContext 对象可以大大降低使用 JAXB 的应用程序的 CPU 使用率。一个证明是[here](http://javaeesupportpatterns.blogspot.in/2011/09/jaxbcontext-performance-problem-case.html)。我们目前正在使用 Apache CXF 来开发 Web 服务。Apache CXF 默认使用 JAXB。

*   据此，可以通过配置文件将 Apache CXF 配置为使用 JAXBContext 的单个实例[。](http://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-SingleJAXBContextandextrauserclasses)
*   据此，[我们](http://cxf.apache.org/docs/configuration.html)可以提供一个配置文件给CXF。这个配置文件是一个 Spring 配置文件。
*   据此，Apache CXF 可以在没有 Spring 的情况下使用[。](http://cxf.apache.org/docs/servlet-transport.html#ServletTransport-UsingtheservlettransportwithoutSpring)

鉴于上述信息，我如何将 Apache CXF 配置为使用单个 JAXBContext 而不使用基于 Spring 的配置文件，因为我正在查看使用没有 Spring 的 servlet 传输的代码库？是否可以为 JAXBContext 添加任何其他配置参数以进一步提高性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-30T13:26:33.707

您可以尝试[这里](http://tomee-openejb.979440.n4.nabble.com/Use-single-JAXBContext-for-multiple-web-services-td4670019.html)提出的解决方案，基于全局 JAXBContext 的定义，但我不确定它是否能与 jax-rs 一起使用。

一个没有 spring 的更简单的解决方案是定义你自己的`@Provider`、扩展的`org.apache.cxf.jaxrs.provider.JAXBElementProvider`，并在 cxf 中注册它，`openejb-jar.xml`例如，如果你正在使用[tomee](https://openejb.apache.org/developer/configuration/cxf.html) ，则使用该文件。

您的提供者将如下所示：

```
@Provider
public class MyJAXBElementProvider<T> extends JAXBElementProvider<T> {
  public MyJAXBElementProvider() {
    super();
    setSingleJaxbContext(true);
    setExtraClass(...);
  }
} 
```

它需要`WEB-INF/openejb-jar.xml`在您的 webapp 的文件中注册，例如：

```
<?xml version="1.0"?>
<openejb-jar>
  <pojo-deployment class-name="jaxrs-application">
    <properties>
    cxf.jaxrs.providers = mypackage.MyJAXBElementProvider
    </properties>
  </pojo-deployment>
</openejb-jar> 
```

# c# - 动态更改gridview内的itemtemplate内的复选框背景\前景颜色

> ID：12420088
> 
> 赞同：0
> 
> 时间：2012-09-14T07:38:51.133
> 
> 标签：c#, asp.net, checkbox

我在尝试在 c# 中动态更改代码后面的背景或前景色时遇到了困难。复选框位于项目模板内，项目模板位于网格视图内。gridview 与数据绑定，所以有很多复选框，我需要做的是更改特定复选框的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:46:31.940

在 GridView 的 RowDataBound 事件中编写以下代码。找到该复选框，之后您可以访问该复选框的属性

```
 if (e.Row.RowType == DataControlRowType.DataRow)
            {
                CheckBox chk = (CheckBox)e.Row.FindControl("checkBox1");
                chk.BackColor = System.Drawing.Color.Black;
           } 
```

# tomcat7 - Tomcat 服务器无法启动并显示“启动时发生内部错误... org/eclipse/jdt/debug/core/JDIDebugModel

> ID：12420091
> 
> 赞同：2
> 
> 时间：2012-09-14T07:38:57.637
> 
> 标签：tomcat7, sts-springsourcetoolsuite

我正在使用 Ubuntu 12.04。我的项目运行良好，直到昨天和今天，当我打开 springtoolsuit 并启动 tomcat（我使用的是 tomcat 7.0）时，会打开一个弹出窗口并显示：

详细地说：“启动 tomcat_server_name**”期间发生内部错误。org/eclipse/jdt/debug/core/JDIDebugModel

我会因为 ubuntu 更新而出问题吗？

** Tomcat_server_name 是我的 tomcat 服务器的名称。

请帮助我，因为我搜索了很多谷歌但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:06:10.500

回答我自己的问题，因为它可能会帮助像我这样面临同样问题的人。

```
sudo apt-get --reinstall install tzdata-java 
```

解决这个问题。[从这里](https://askubuntu.com/questions/186986/eclipse-has-multiple-issues-after-jre-6-openjdk-upgrade)得到解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-20T09:16:08.473

对于 Windows 用户，还有另一种解决方案。在 Eclipse 安装文件夹中打开 eclipse.ini 并添加 -Dcom.ibm.icu.util.TimeZone.DefaultTimeZoneType=ICU 作为该文件的最后一行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-02T22:34:31.363

如果您使用的是 16.04，则没有 tzdata-java 包。我猜它已经滚入 tzdata，但重新安装它并不能解决这个问题。我通过将 tzdata 降级到附带 tzdata-java 的最后一个版本来修复它，然后重新安装 tzdata-java。

tzdata：[https ://launchpad.net/ubuntu/xenial/amd64/tzdata/2016c-0ubuntu1](https://launchpad.net/ubuntu/xenial/amd64/tzdata/2016c-0ubuntu1)

tzdata-java：[https ://launchpad.net/ubuntu/xenial/amd64/tzdata-java/2016c-0ubuntu1](https://launchpad.net/ubuntu/xenial/amd64/tzdata-java/2016c-0ubuntu1)

我必须继续使用旧版本的 Tomcat7 才能工作，这样做是为了防止 Ubuntu 更新文件：

```
sudo apt-mark hold tzdata 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-29T14:11:45.113

在 Xubuntu 16.04 中重新安装和选择 JDK 1.8 对我有用

```
sudo apt-get install openjdk-8-jdk

sudo update-alternatives --config java 
```

# coordinates - HTML5 Canvas：获取曲线的坐标

> ID：12420092
> 
> 赞同：2
> 
> 时间：2012-09-14T07:39:02.057
> 
> 标签：coordinates, html5-canvas, kineticjs, curve

我在画布中有一条二次曲线（由开始、结束和控制点定义）。我需要的是获得更多曲线的坐标（例如中间、四分之一等）。有了它，我就可以（在查找坐标的几次迭代之后）根据这条曲线为对象设置动画（我知道它可以用 SVG 轻松完成，但这不是一个选项）。

![在此处输入图像描述](../Images/b41ab680af90771f9908d8a6709739e6.png)

*图片取自[http://www.html5canvastutorials.com/tutorials/html5-canvas-quadratic-curves/](http://www.html5canvastutorials.com/tutorials/html5-canvas-quadratic-curves/)*

是否有捷径可寻？当我在谷歌上检查二等分曲线时，我唯一发现的是一些复杂的数学，包括绘图，这是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:38:00.463

您可能对这些功能感兴趣：

```
Kinetic.Path.getPointOnCubicBezier = function(pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y)
Kinetic.Path.getPointOnQuadraticBezier = function(pct, P1x, P1y, P2x, P2y, P3x, P3y) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:58:55.293

我正在为贝塞尔曲线寻找类似的解决方案。如何获取曲线上的坐标列表？

为了解决您的问题，也许您可​​以将 x 坐标（或 y 坐标）插入二次方程：

y = a*x^2 + b*x + c

我似乎找不到返回曲线坐标的函数。获得任何曲线/形状的坐标列表会很好。

# html - webkitborder-radius 截断边框

> ID：12420093
> 
> 赞同：0
> 
> 时间：2012-09-14T07:39:05.030
> 
> 标签：html, webkit, border, css

我最初想要一张带有黑色边框和圆角的图像。然而，在 Webkit 上，我没有同时拥有圆形图像和圆形边框，而是得到了一个矩形图像和一个圆形边框。矩形图像似乎与拐角处的部分边框重叠，造成看起来有点奇怪的结果。在 firefox 和 opera 上，我想出了我想要的结果，但我想知道如何在 webkit 上达到同样的效果。这里有一些代码你可以运行看看我在说什么。在此先感谢您的帮助！

```
<!doctype html>

<html>

<head>
    <title> Testing Website </title>

    <style type="text/css">
        img {
            height: 500px;
            border: 5px solid #000;
            border-radius: 20px;
            -moz-border-radius: 20px;
        }
    </style>
</head>

<body>

    <img src = "http://www.public-domain-image.com/studio/slides/sunflower-on-white-background.jpg">

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T07:55:11.963

使用`box-shadow`：http: [//jsfiddle.net/UQ2kt/](http://jsfiddle.net/UQ2kt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:59:19.043

你可以试试 jQuery 插件。提供了很多选择。[http://jquery.malsup.com/corner/](http://jquery.malsup.com/corner/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:03:26.310

尝试;

```
img{
  height: 500px;
  width: 500px;
  border: 5px solid #000;
  border-radius: 20px;
  -moz-border-radius: 20px;
  display:block;
} 
```

# scala - Twitter 的“有效 scala”代理示例和尾递归

> ID：12420095
> 
> 赞同：1
> 
> 时间：2012-09-14T07:39:07.173
> 
> 标签：scala, memory, recursion, stack-overflow

在 twitter 发布的文档《[Effective Scala](http://twitter.github.com/effectivescala/#Twitter%27s%20standard%20libraries-Offer/Broker)》中，我看到了一个代码示例：

```
class Pool(conns: Seq[Conn]) {
  private[this] val waiters = new Broker[Conn]
  private[this] val returnConn = new Broker[Conn]

  val get: Offer[Conn] = waiters.recv
  def put(c: Conn) { returnConn ! c }

  private[this] def loop(connq: Queue[Conn]) {
    Offer.choose(
      if (connq.isEmpty) Offer.never else {
        val (head, rest) = connq.dequeue
        waiters.send(head) { _ => loop(rest) }
      },
      returnConn.recv { c => loop(connq enqueue c) }
    ).sync()
  }

  loop(Queue.empty ++ conns)
} 
```

该代码似乎不是尾递归的，也没有这样注释。由于这是一个连接池，可能会在程序的整个生命周期内一直运行，那么如何防止这样的池最终炸毁堆栈并生成 StackOverflowException 呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T08:02:13.267

代码根本不是递归的！`loop`不调用自己。它传递闭包`{ _ => loop(rest) }`和分别`{ c => loop(connq enqueue c) }`再次调用。没有递归，因此没有堆栈溢出。`waiters.send``returnConn.recv``loop`

# sql - 如何在 oracle 11g 中使用内部连接？

> ID：12420097
> 
> 赞同：1
> 
> 时间：2012-09-14T07:39:07.090
> 
> 标签：sql, oracle, join, inner-join

我在这里运行我的 Oracle 查询，但它不工作，但相同的查询在 SQL Server 中工作

这是我的查询：

```
SELECT d.dept_code,
       d.dept_name,
       d.dept_desc,
       e.comp_name
FROM   dept_master d
       inner join comp_master e
               ON d.comp_id = e.comp_id 
```

其中`dept_master.comp_id`值与表中相同`Dept_Master`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:07:14.283

您没有得到任何结果的原因主要是因为数据

执行此检查以查看表中是否有可用数据

```
select * from dept_master;
select * from comp_master; 
```

并查看两个表是否有任何匹配的行，即；两个表中至少有 1 行具有相同的 comp_id

我希望你在做完这个练习后能找到答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:35:21.787

comp_id 是字符字段吗？在这种情况下，在 Oracle 中将其定义为 VARCHAR2。或尝试 trim(d.comp_id) = trim(e.comp_id)

请参阅[SQL Fiddle 中的演示](http://www.sqlfiddle.com/#!2/15c89/2)。

# wpf - 具有可观察集合作为 ItemsSource 的 WPF Grid 如何在修改集合中的值时对其重新排序

> ID：12420109
> 
> 赞同：1
> 
> 时间：2012-09-14T07:40:20.370
> 
> 标签：wpf, gridview

我是 WPF 的新手，我被一个我认为很容易解决的事情困住了。我有一个 gridView（telerik 之一），它的 ItemsSource 是一个 ObservableCollection，一切正常，当数据被修改时，我可以在网格中看到，当删除或添加某些内容时，网格被刷新。我的问题是，当集合更改时，更改的行转到网格中的最后一行，我需要对其重新排序，我尝试添加一个 SortDescriptor 以在更改集合时对网格进行排序，但没有任何反应。

```
//This update changes function is the one that changes the collection    
updateChanges(field, new_value);
//This is the sortDescriptor that is supposed to order the grid
UIGlobal.MainPage.gridAnalog.SortDescriptors.Add(new SortDescriptor()
{
     Member = "ColName",
     SortDirection = System.ComponentModel.ListSortDirection.Ascending
}); 
```

这是我的网格

```
<telerik:RadGridView>
   <telerik:RadGridView.Columns>
        <telerik:GridViewDataColumn UniqueName="ColName" Header="Name" DataMemberBinding="{Binding Key}"/>
        <telerik:GirdViewDataColumn Header="Value" DataMemberBinding="{Binding Value}"/>
   </telerik:RadGridView.Columns>
 </telerik:RadGridView> 
```

我想从 ColName 列订购它，但无法得到它。

希望有人能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:21:58.610

我从来没有使用过 Telerik，但你可以试试这个：

```
//Add  reference  xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"

<UserControll.Resources> 
 <CollectionViewSource Source="{Binding YourCollection}" x:Key="sorted">
     <CollectionViewSource.SortDescriptions>
         <scm:SortDescription  PropertyName="ColName" Direction="Ascending"/>
         </CollectionViewSource.SortDescriptions>
         </CollectionViewSource>

</UserControll.Resources>                               
<telerik:RadGridView  ItemsSource="{Binding Source={StaticResource sorted}}"> 
   <telerik:RadGridView.Columns>
        <telerik:GridViewDataColumn UniqueName="ColName" Header="Name" DataMemberBinding="{Binding Key}"/>
        <telerik:GirdViewDataColumn Header="Value" DataMemberBinding="{Binding Value}"/>
   </telerik:RadGridView.Columns>
 </telerik:RadGridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:08:54.340

这是我找到的解决方案，可能对某人有所帮助。我在网格中添加了一个 ColumnSortDescriptor：

```
//Establish grid's ItemsSource
grid.ItemsSource = observableDicData;    
//Remove previous SortDescriptors
grid.SortDescriptors.Clear();
//Add a SortDescriptor
ColumnSortDescriptor csd = new ColumnSortDescriptor()
{
     //In column is the UniqueName of the grid's column I want to sort by
     Column = this.grid.Columns["NameAnalog"],
     SortDirection = ListSortDirection.Ascending
};
this.gridAnalog.SortDescriptors.Add(csd); 
```

我禁用了 UserCanSort 的属性。

# android - 使用 asmack 库注册问题并作为服务器开火

> ID：12420113
> 
> 赞同：5
> 
> 时间：2012-09-14T07:40:41.907
> 
> 标签：android, xmpp, smack, asmack

嗨，我在使用 asmack 库注册时遇到错误。注册代码

```
Log.d(TAG, "creating new server account...");
                    AccountManager am = new AccountManager(connection);
                    Log.i("Registration Details:","UaerName = "+config.userName + "  Password is ==" + config.password);
                    am.createAccount(config.userName, config.password); 
```

我得到的smack日志：

```
<main>09-14 12:18:08.132: D/yaxim.SmackableImp(5933): creating new server account...
09-14 12:18:08.142: D/SMACK(5933): 12:18:08 PM SENT (1089044856): <iq id="Ii5WG-0" to="myHost" type="get"><query xmlns="jabber:iq:register"></query></iq>
09-14 12:18:08.522: D/SMACK(5933): 12:18:08 PM RCV  (1089044856): <iq type="result" id="Ii5WG-0" from="myHost"><query xmlns="jabber:iq:register"><username/><password/><email/><name/><x xmlns="jabber:x:data" type="form"><title>XMPP Client Registration</title><instructions>Please provide the following information</instructions><field var="FORM_TYPE" type="hidden"><value>jabber:iq:register</value></field><field var="username" type="text-single" label="Username"><required/></field><field var="name" type="text-single" label="Full name"/><field var="email" type="text-single" label="Email"/><field var="password" type="text-private" label="Password"><required/></field></x></query></iq>
09-14 12:18:08.562: D/SMACK(5933): 12:18:08 PM SENT (1089044856): <iq id="Ii5WG-1" to="myHost" type="set"><query xmlns="jabber:iq:register"><email></email><password></password><username></username><name></name></query></iq>
09-14 12:18:08.933: D/SMACK(5933): 12:18:08 PM RCV  (1089044856): <iq type="error" id="Ii5WG-1" from="myHost" to="myHost/8f0bf952"><query xmlns="jabber:iq:register"><email/><password/><username/><name/></query><error code="500" type="wait"><internal-server-error xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error></iq>
09-14 12:18:08.953: I/yaxim.Service(5933): connectionFailed: internal-server-error(500)</main> 
```

在这里我得到了内部服务器错误。错误代码= 500。任何人都可以帮助我。提前致谢。

我正在使用 asmack-issue 15.jar 库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T04:19:05.500

我解决了这个问题.. createAccount(config.userName, config.password); 中有问题 smack-issue 15.jar 库的方法。

使用另一种方法 createAccount 解决了我的问题。

```
AccountManager am = new AccountManager(mXMPPConnection);
                Log.i("Registration Details:", "UaerName = "
                        + mConfig.userName + "  Password is =="
                        + mConfig.password);
                Map<String, String> mp = new HashMap<String, String>();

                // adding or set elements in Map by put method key and value
                // pair
                mp.put("username", mConfig.userName);
                mp.put("password", mConfig.password);
                mp.put("name", mConfig.userName);
                mp.put("email", "");

                // am.createAccount(mConfig.userName, mConfig.password);
                am.createAccount(mConfig.userName, mConfig.password, mp); 
```

# asp.net - 在浏览器中查看页面时出错。

> ID：12420118
> 
> 赞同：0
> 
> 时间：2012-09-14T07:40:53.543
> 
> 标签：asp.net

我的系统发生了什么？试图在浏览器中查看我的页面，但我收到此错误

```
Server Error in '/MCR' Application.  
The resource cannot be found.  
Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed,  
had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is  spelled correctly. 

Requested URL: /MCR/login.aspx  

Version Information: Microsoft .NET Framework Version:2.0.50727.5456; ASP.NET Version:2.0.50727.5456 
```

有人可以帮我弄这个吗？我什至没有 login.aspx 页面。请帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:42:13.713

好吧，您在尝试查看的页面上有一个重定向到 Login.aspx，或者您已将默认页面设置为 Login.aspx，正如您所说，该页面不存在。

检查您的项目是否有任何对 Login.aspx 的引用，并将其更改为您想要作为默认页面的页面。

# iphone - Safari Reader 字体大小控制，如弹出框

> ID：12420123
> 
> 赞同：0
> 
> 时间：2012-09-14T07:41:08.833
> 
> 标签：iphone, ios, xcode, cocoa-touch, popover

Safari 有一个很好的弹出框，用于控制字体大小。我说的是那个：

![在此处输入图像描述](../Images/d64d75f48725e7eff1b0185434263f0d.png)

这非常好，我的问题是 - 如何实现完全这样的东西？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:00:02.550

真的很简单，如果你想使用弹出框，那么你可以看到这个代码[PopOver Link](http://www.cocoacontrols.com/platforms/ios/controls/tspopover)

或者您可以简单地创建一个`UIView`包含 2 个按钮的按钮，每当单击该栏上的按钮时，让此`UIView`滚动显示一个动画`UIButton`，依此类推。让我知道进一步的查询:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:57:23.787

github中有很多关于popoverview的项目，比如这个[https://github.com/takashisite/TSPopover](https://github.com/takashisite/TSPopover) 实现这个的一种方法是添加一个占据整个屏幕的透明视图，这样当我触摸到popover内容之外时，它会解雇。你需要做的剩下的就是在你的透明视图中添加一些子视图。

# python - 如何在 Windows 7 企业版上安装 python 3.2.3

> ID：12420125
> 
> 赞同：0
> 
> 时间：2012-09-14T07:41:19.533
> 
> 标签：python, windows, installation, ipython

虽然我在 Linux 环境中很容易使用 python 很长时间，但我什至在 windows 环境中正确安装它都遇到了巨大的麻烦。我希望这是一个在这里提出的问题，因为它不是直接的编程问题。特别是，我有以下问题：

*   在命令行上时，python 不是可识别的命令。我必须自己手动设置 Windows 路径吗？如果是这样，该怎么做？

*   启动 python 脚本时，应该使用 python.exe 还是 pythonw.exe 来完成？有什么不同？

*   我也尝试安装 ipython 几次，它从未安装过（即使按照[此处的启动 ipythonenter 链接描述](https://stackoverflow.com/questions/8740589/starting-ipython)线程。

*   使用 python.exe 启动脚本时，会弹出一个窗口并立即关闭。我在输入 readline 命令时看到了一些提示，如果脚本中存在语法错误，这将无济于事。那么如何才能让窗口保持打开状态，或者如何在 cmd.exe 上运行命令呢？

感谢您对这些项目的任何帮助。

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:53:54.820

1）看这里：[www.computerhope.com/issues/ch000549.htm](http://www.computerhope.com/issues/ch000549.htm)

2）已经回答了，在提问之前总是尝试使用搜索： [pythonw.exe还是python.exe？](https://stackoverflow.com/questions/9705982/pythonw-exe-or-python-exe)

4) 使用 cmd.exe 时，只需导航到您的脚本文件夹，`dir`用于更改目录和`C:`,`D:`等。用于更换驱动器。然后通过仅输入脚本名称来运行脚本。正确安装后，Python 会自动使用 python 启动 .py 脚本，因此您不必在脚本名称前写“python”。在 cmd 中运行时，窗口将保持打开状态。如果您希望它在双击启动脚本时保持打开状态，请使用等待用户输入的功能，请参阅此处[如何保持 Python 脚本输出窗口打开？](https://stackoverflow.com/questions/1000900/how-to-keep-a-python-script-output-window-open)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T13:16:32.040

您可能想使用 Python3.3，其中有一个[用于 Python](http://docs.python.org/3/whatsnew/3.3.html#pep-397-python-launcher-for-windows)脚本的新启动器。这样，您可以启动 Python 脚本，`py <scriptname>`该脚本具有安装在您的路径 (C:\Windows\system32) 中的好处，并且您可以使用 shebang 来判断该脚本是用于 Python2 还是 Python3。还

> 除了启动器之外，Windows 安装程序现在还包括一个选项，用于将新安装的 Python 添加到系统 PATH（由 Brian Curtin 在 issue 3561 中提供）。

# ruby-on-rails - 检索rails中的上传图像字段

> ID：12420128
> 
> 赞同：0
> 
> 时间：2012-09-14T07:41:46.707
> 
> 标签：ruby-on-rails, ruby

在我的 Rails 应用程序中，我提交了一个包含图像和一些文本字段的表单。我已经填写了所有字段并浏览了正确的图像然后提交。如果除图像字段之外的其他字段出现错误，则将呈现带有错误消息的我的表单。但我也需要检索浏览的图像字段。可能吗？如果可能的话，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:06:53.790

因为您没有提供任何详细信息，您的表单的外观等。我只能猜测您真正想要做的事情。

例如，如果您有一个名为 :attachment 的表单和一个 file_field_tag，您可以在控制器或视图中通过 params[:attachment] 访问它

可能的方法是#original_filename、#content_type、#filename、#tempfile 等。

一定要设置 :multipart => true （因为 rails 3.1 它是自动完成的）

您可以在此处更深入地了解如何将其与您的模型一起使用：http: [//guides.rubyonrails.org/form_helpers.html#uploading-files](http://guides.rubyonrails.org/form_helpers.html#uploading-files)

# php - 滚动时如何从mysql数据库中获取数据

> ID：12420129
> 
> 赞同：2
> 
> 时间：2012-09-14T07:41:50.793
> 
> 标签：php, mysql

我有一个数据库，它包含 1000 多条记录。我必须在前端 php 页面中显示它，如果我显示所有内容，则加载需要更多时间，因此如果用户滚动，则应在滚动后获取信息。就像 Facebook 和 Pinterest 一样。如何实现这一点...我的数据库：- mysql 服务器：- wamp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:54:29.697

第 1 步] 借助一点点 jquery 作为....

```
var countScroll= 0;
$(window).scroll(function()
{
      if  ($(window).scrollTop() == $(document).height() - $(window).height())
      {
         loadData();
      }
      countScroll++;
}); 
```

step 2] 借助ajax调用loadData()函数

```
function loadData()
{
    var xmlhttp;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {               
        var res = xmlhttp.responseText;
        document.getElementById("respDiv").innerHTML=res;           
            }
    }
    xmlhttp.open("GET","loadPageData.php?loadLimit="+countScroll,true);
        xmlhttp.send();
   } 
```

第 3 步] 你的 php 页面，即 loadPageData.php 是...

```
 $loadLimit= $_GET['loadLimit'];
    $result = mysql_query("SELECT * FROM tableName limit $loadLimit");
    if(mysql_num_rows($result)>0)
    {
        while($row = mysql_fetch_array($result))
        {
        echo $yourVariable= $row['fieldName'];
          }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:43:06.757

使用 jQuery（或您最喜欢的库）来检测用户何时到达页面末尾，然后只需触发对服务器的 AJAX 请求以获取接下来的 N 个结果。

例如：

JavaScript 部分：

```
var n = 0;

$(document).ready(function() {
    $(window).scroll(function() {
        if ($('body').height() <= ($(window).height() + $(window).scrollTop())) {
            $.ajax({
              url: "my_page.php",
                              data: {'n' : n},
              context: document.body
            }).done(function(data) { 
              n += 1;
              console.log(data); // <--- do stuff with received data here
            });
        }
    });
}); 
```

PHP部分：

```
$n = $_POST['n'];
$n = 10 * $n;
$sql = "SELECT * FROM mytable LIMIT $n, 10";  // get 10 new entries each request. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T07:45:18.090

您的问题很笼统，很难用代码片段回答。
这可能是伪语言的解决方案

*   通过执行这样的查询来获取默认数量的元素（比如 50）`SELECT * FROM yourTable WHERE ..... ORDER BY .... LIMIT 50`
*   使用 jQuery 检测滚动事件
*   检测到滚动事件后进行 AJAX 调用
*   进行一个新查询，再次获取 50 个元素，但这次要考虑到您已经滚动（因此，添加增量或偏移量）
*   渲染从 AJAX 返回的元素

# xml - 如何使用 C# 从字符串中删除给定的特定符号

> ID：12420132
> 
> 赞同：0
> 
> 时间：2012-09-14T07:42:00.887
> 
> 标签：xml, string, c#-4.0

我有一个字符串

```
string value = "Power:'{Comma}'"; 
```

我需要从字符串中删除 { 和 } 符号。

我试过 value.Replace('{', ' '); 和 value.Replace('}', ' '); 但这给了空间。我不想要空间，只想删除符号。

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:43:11.197

使用接受字符串而不是字符的重载，然后你可以用空字符串替换：

```
value = value.Replace("{", "").Replace("}", ""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T07:44:45.630

```
value = value.Replace("{", string.Empty).Replace("}", string.Empty); 
```

# css - 调整窗口大小时边框重叠形式

> ID：12420136
> 
> 赞同：0
> 
> 时间：2012-09-14T07:42:20.357
> 
> 标签：css, twitter-bootstrap

我有一个被边框包围的表格。调整窗口大小时，边框有时会与窗体重叠。这不应该发生。

查看小提琴输出：

[http://jsfiddle.net/sdSdW/embedded/result/](http://jsfiddle.net/sdSdW/embedded/result/)

有人可以告诉我我必须在源代码中更改什么以使边框围绕我的表单，即使调整了窗口大小，也要在表单和边框之间保持距离。我不想让边框固定宽度（如果不是真的必要）

请参阅小提琴源：

[http://jsfiddle.net/sdSdW/](http://jsfiddle.net/sdSdW/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:49:50.190

边境不需要很多父母。您可以将边框添加到`fieldset`自身

尝试 -

```
fieldset {
    border: 1px solid #DDDDDD;
    margin: 0;
    padding: 40px;
} 
```

[**JSFiddle**](http://jsfiddle.net/sdSdW/2/)

# c# - c# webservice接收复数数组

> ID：12420138
> 
> 赞同：0
> 
> 时间：2012-09-14T07:42:34.487
> 
> 标签：c#, asp.net, web-services

我正在尝试将一组对象传递给我的 Web 服务。

```
var bookingResponse = Service.BookOrder(
    User, Password, Header, order.ToArray(), 1,
    order.OrderId, order.CalculatedID(SessionRO)); 
```

关于服务：

```
public orderreturn BookOrder(
    string username, string password, OrderHeader order,
    OrderDetail[] order, int extSystemID, int extOrderID, int eventID) 
```

尽管订单在发送端有数据，但它在接收端返回为空/空。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:57:47.330

要传递自定义类型的数组，您需要使用 [DataContract] 标记它们，并使用 [DataMember] 标记属性。

这可能会让你开始；

[http://msdn.microsoft.com/en-us/library/aa347850.aspx](http://msdn.microsoft.com/en-us/library/aa347850.aspx)

# regex - 正则表达式中的“[[]]”是什么意思？

> ID：12420139
> 
> 赞同：4
> 
> 时间：2012-09-14T07:42:40.887
> 
> 标签：regex, grep, pcre

正则表达式是什么`[[]]`意思？

```
$ echo '[][]' | grep -oE '[[]]'
[]
[]
$ grep --version
grep (GNU grep) 2.10 
```

嗯，看来匹配了`[]`。（字符序列`[]`，不是`[`或`]`。）（我用python的re模块测试过，结果相同。）真的吗？如果是这样，为什么？

我知道如果我想匹配`[`or `]`，我应该写`[][]`or `[[\]]`。（他们在 PCRE 中工作，grep 支持`[][]`但不是`[[\]]`因为`\`在 grep 的括号表达式中失去了特殊含义。）我只是感到好奇。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T07:52:36.670

该表达式`[[]]`实际上由两个连接的子表达式组成：`[[]`和`]`。

*   `[[]`是只匹配字符的字符类`[`。拥有`[`只能在角色类的最开始时才有可能。
*   `]`如果在字符类之外，它只是一个普通字符。

两者都是连接的，因此您的表达式匹配`[`后面的任何字符`]`，这会导致匹配`[]`。

# c#-4.0 - 从 datagridview 中删除行

> ID：12420141
> 
> 赞同：0
> 
> 时间：2012-09-14T07:42:55.547
> 
> 标签：c#-4.0

当用户单击删除按钮时，我想从 datagridview 中删除行。 datagridview 绑定到数据表 _dt 所以我从 _dt 中删除行并尝试将修改后的 _dt 重新绑定到 datagridview 但不是删除该行而是添加到最后一行datagridview 我在这里做错了什么

```
 private void btnDelete_Click(object sender, EventArgs e)
    {
        if (dataGridView1 != null && dataGridView1.SelectedRows.Count == 1)
        {
            string key = dataGridView1.SelectedRows[0].Cells["ID"].Value.ToString();
            DataColumn[] keyColumns = new DataColumn[1];
            keyColumns[0] = _dt.Columns["ID"];
            _dt.PrimaryKey = keyColumns;
            rowToDelete = _dt.Rows.Find(key);
            _dt.Rows.Remove(rowToDelete);
            _dt.AcceptChanges();
            SqlCommandBuilder cb = new SqlCommandBuilder(_sqlDa);
            _sqlDa.Fill(_dt);
            _sqlDa.Update(_dt);
            dataGridView1.DataSource = null;
            dataGridView1.DataSource = _dt;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:56:56.043

更新前无需填充，也删除此行

```
 _dt.AcceptChanges(); 
```

因为这将从内存中删除该行，并且当您调用 update 时仅更新剩余的行，它不会从数据库中删除该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:00:42.893

无需在更新前调用 Fill，因为 Fill 将再次从 db 获取数据，您的更改将丢失。所以这对你有用。

```
SqlCommandBuilder cb = new SqlCommandBuilder(_sqlDa);
//_sqlDa.Fill(_dt);
_sqlDa.Update(_dt); 
```

# c++ - 三元运算的这个 GNU 扩展有多广泛？

> ID：12420144
> 
> 赞同：2
> 
> 时间：2012-09-14T07:43:07.907
> 
> 标签：c++, c, ternary-operator

这是根据[Wikipedia](https://en.wikipedia.org/wiki/%3F:#C)对三元运算的 GNU 扩展。

```
iMyVal = --iVal ?: iDft; 
```

虽然我完全知道这是一个 GNU 扩展，但有时使用这种特殊语法可能会非常方便。

那么，有人知道这种语法是否仅适用于`gcc`? 或者他们是支持它的任何其他编译器吗？

*对于任何感兴趣的人，PHP 从 5.3 开始支持这种语法*

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T07:59:45.643

一些答案：

1.  海湾合作委员会 - 是的
2.  MSVC - 否（基于瓦内托的回答）
3.  CLANG - ~~no~~ yes - [LLVM 在线编译器](http://llvm.org/demo/index.cgi)成功编译它。
4.  英特尔 C 编译器 - 是的

底线 -~~不广泛。只有几乎 100% 与 gcc 兼容的 Intel 编译器支持这一点。~~?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:35:22.127

C++11 解决方法：

```
template<typename Fcond, typename Flast>
auto ternary2support(Fcond fcond, Flast flast) -> decltype(fcond())
{
  auto    cond_result= fcond();
  return  cond_result? cond_result : flast();
}

#define ternary2(c,case0) ternary2support(  [&](){ return (c);}, [&](){ return (case0);} )

void test_tern2()
{
  int i= 3;

  int res1= ternary2(--i,1000);
  int res2= ternary2(--i,1000);
  int res3= ternary2(--i,1000);

  std::cout<<" res1="<< res1<<" res2="<< res2<<" res3="<< res3;
  // output: res1=2 res2=1 res3=1000

}

int main(){test_tern2(); return 0;} 
```

Lambda 惰性可防止条件重新计算和不必要的 case0 表达式评估（因为原始三元运算符扩展有效）

# linux - 使用 C++ 从 Linux 中的 USB 摄像头捕获视频

> ID：12420158
> 
> 赞同：2
> 
> 时间：2012-09-14T07:44:04.253
> 
> 标签：linux, ubuntu

我想知道如何从连接到我的 linux 机器的 USB 摄像头设备捕获视频，仅使用 c++ 和终端，或者可能是 bash 脚本，我看到了终端，但我认为回声不会为我提供视频或帧. 帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:55:39.267

看看这个[页面](http://www.twam.info/linux/v4l2grab-grabbing-jpegs-from-v4l2-devices)。v4l2grab 是一个读取原始图像并将其转换为 jpeg 并在终端中运行的程序

# sql-server-2008 - 加密 SQL Server 中的列

> ID：12420161
> 
> 赞同：2
> 
> 时间：2012-09-14T07:44:32.730
> 
> 标签：sql-server-2008

我有一张桌子`TblUserLogin`，里面有`LoginID int`, `Password varchar(50)`, `LoginUserName varchar(150)`, `Designation varchar(100)`.

我的要求是，每当我们使用`select`该表的语句时，我们都能够看到输入的密码（这是敏感信息）。

有什么方法可以加密密码列，这样当我们使用`select`语句时，信息将以加密的方式显示，并且不会影响访问密码列或插入新密码的代码？

简而言之，当“使用`select`语句从 Management Studio 访问时密码列显示为加密，但以编程方式访问时，它返回实际的未加密密码”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:33:09.630

试试这个：

```
CREATE Procedure [dbo].[EncryptPasswd]
@user_id int,
@username varchar(255),
@passwd varchar(255)
As
Begin
Declare @res varbinary(2000)

IF NOT EXISTS(select * from sys.symmetric_keys where name='##MS_DatabaseMasterKey##')
CREATE MASTER KEY ENCRYPTION
BY PASSWORD = 'xyz@123'

IF NOT EXISTS(select * from sys.certificates where name='EncryptTestCert')
CREATE CERTIFICATE EncryptTestCert
WITH SUBJECT = 'xyz@123'

IF NOT EXISTS(select * from sys.symmetric_keys where name='TestTableKey') 
CREATE SYMMETRIC KEY TestTableKey
WITH ALGORITHM = TRIPLE_DES ENCRYPTION
BY CERTIFICATE EncryptTestCert

OPEN SYMMETRIC KEY TestTableKey DECRYPTION
BY CERTIFICATE EncryptTestCert

INSERT INTO Users(user_id,username,passwd) 
SELECT @user_id,@username,ENCRYPTBYKEY(KEY_GUID('TestTableKey'),@passwd)
END 
```

每当您将新用户插入用户表时使用此存储过程。因此这将加密密码并插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:29:07.887

一般来说，除非您绝对无法避免，否则您不应将密码以明文或使用可逆加密的方式存储在数据库中。

相反，您应该存储密码的哈希值，然后当您需要比较它时，对用户输入进行哈希处理并比较哈希值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:06:04.820

您可以在 sql server 2008 中加密密码

看了[这篇](http://blog.sqlauthority.com/2009/04/28/sql-server-introduction-to-sql-server-encryption-and-symmetric-key-encryption-tutorial-with-script/)文章，描述的很清楚

# c# - Microsoft 代码合同中的屏蔽断言是什么？

> ID：12420162
> 
> 赞同：1
> 
> 时间：2012-09-14T07:44:34.297
> 
> 标签：c#, code-contracts

> **可能重复：**
> [如何在 MS 代码合同中找到“屏蔽”断言](https://stackoverflow.com/questions/10037797/how-to-find-masked-assertions-in-ms-code-contracts)

我最近开始使用 C# 4.0 下的代码合同，我收到如下消息：

```
CodeContracts: Checked 50 assertions: 33 correct (17 masked) 
```

我一直在寻找什么是蒙面断言，但没有找到。它不在 CodeContracts 手册中，我也找不到关于“蒙面断言”的任何内容。

有什么见解吗？

# java - 部署 JSF-Spring 应用时出错

> ID：12420165
> 
> 赞同：1
> 
> 时间：2012-09-14T07:44:50.103
> 
> 标签：java, eclipse, spring-mvc, glassfish-3

嗨，我正在使用 eclipse indigo 和 glassfish 3.1.2，并且在部署我的 Web 应用程序时遇到了这个异常。我也将最新的 spring-web-3.0.2.RELEASE.jar 添加到我的构建路径中，但问题仍然存在：这是例外

```
cannot Deploy jsfspring
Deployment Error for module: jsfspring: Error occurred during deployment: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener. Please see server.log for more details. 
```

这是异常详细信息：

```
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5332)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalArgumentException: java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
    at org.apache.catalina.core.StandardContext.addListener(StandardContext.java:2743)
    at org.apache.catalina.core.StandardContext.addApplicationListener(StandardContext.java:1966)
    at com.sun.enterprise.web.TomcatDeploymentConfig.configureApplicationListener(TomcatDeploymentConfig.java:235)
    at com.sun.enterprise.web.TomcatDeploymentConfig.configureWebModule(TomcatDeploymentConfig.java:94)
    at com.sun.enterprise.web.WebModuleContextConfig.start(WebModuleContextConfig.java:274)
    at com.sun.enterprise.web.WebModuleContextConfig.lifecycleEvent(WebModuleContextConfig.java:172)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:149)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5329)
    ... 39 more
Caused by: java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1509)
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
    at org.apache.catalina.core.StandardContext.loadListener(StandardContext.java:4806)
    at com.sun.enterprise.web.WebModule.loadListener(WebModule.java:1599)
    at org.apache.catalina.core.StandardContext.addListener(StandardContext.java:2740)
    ... 46 more

WARNING: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:921)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

SEVERE: Exception while invoking class com.sun.enterprise.web.WebApplication start method
java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:138)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

SEVERE: Exception while loading the app
SEVERE: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:05:58.960

如其中一个[答案](http://forum.springsource.org/showthread.php?60812-ClassNotFoundException-org-springframework-web-con-text-ContextLoaderListener/page2)和[帖子](http://forum.springsource.org/showthread.php?60812-ClassNotFoundException-org-springframework-web-con-text-ContextLoaderListener&p=379143#post379143)中所述：

> 对于它的价值，从 Eclipse 中运行 Spring 应用程序可能是一种非常令人沮丧的体验，尤其是在坚持使用最新和最伟大的 + maven 时。我发现 Maven 依赖项不包含在 WEB-INF/lib 中，除非项目配置如所附屏幕中所示。愿它为您节省宝贵的开发时间！黑客快乐！！！！

要在[Eclipse](http://www.eclipse.org/)中添加：
转到**Project Properties** > **Deployment Assembly** > **Add** > **Java Build Path Entries**
选择**Maven Dependencies**

![Eclipse 部署程序集](../Images/07d8abfbe5874ed9f332e677ee11216e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T18:13:19.273

您的 glassfish 是否与您的项目运行相同的 java 版本？我在 1.6 上运行 glassfish 时遇到了这个问题，但我的项目使用的是 1.7。检查您的 java 环境变量。使用项目需要的 java 版本重新启动 glassfish。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T21:46:30.680

我使用 netbeans 7.3 + glassfish 3.1.2.2 + spring 3.2.2 + maven。在将我的项目升级到 spring 3.2.2 的过程中，出现了类似的错误“...java.lang.IllegalStateException: ContainerBase.addChild.. blah-blah” 从历史上看，我的本地 .m2 文件夹是旧 spring 3.0.7、3.1 的脏文件夹.1 等。

经过一些升级后，我的 project.war:WEB-INF/lib 充满了 spring 3.0.7、3.1.1、3.2.2 副本。

可能情况下的解决方案是：

1.  确保所有依赖项都有适当的版本（基于 spring 3.2.2）
2.  clean maven /.m2（至少是 repository/org/springframework）
3.  清理项目或删除目标构建文件夹。

看看 project.war:WEB-INF/lib - 在我的战争中，所有的 spring 库都是 3.2.2 版本的，glassfish 部署是好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T07:50:35.433

也许您的库没有部署到服务器。检查内部`glassfish`是否正确部署了库。

也看[这里](http://forum.springsource.org/showthread.php?60812-ClassNotFoundException-org-springframework-web-con-text-ContextLoaderListener)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-21T20:35:00.440

仅对于可能遇到此异常的人来说，这也可能是由返回 JAX-WS 不支持的类型的 Web 服务方法引起的。就我而言，我有一个返回 HashMap 的方法，JAX-WS 不支持该方法。

“JAX-WS 将 Java 编程语言类型与 XML 定义之间的映射委托给 JAXB。应用程序开发人员不需要知道这些映射的细节，但应该知道并非 Java 语言中的每个类都可以用作JAX-WS 中的方法参数或返回类型。”

接下来我们有一个**Schema-to-Java 映射**列表：

```
**XML Schema Type** **Java Data Type**

    xsd:string  java.lang.String
    xsd:integer java.math.BigInteger
    xsd:int int
    xsd.long    long
    xsd:short   short
    xsd:decimal java.math.BigDecimal
    xsd:float   float
    xsd:double  double
    xsd:boolean boolean
    xsd:byte    byte
    xsd:QName   javax.xml.namespace.QName
    xsd:dateTime    javax.xml.datatype.XMLGregorianCalendar
    xsd:base64Binary    byte[]
    xsd:hexBinary   byte[]
    xsd:unsignedInt long
    xsd:unsignedShort   int
    xsd:unsignedByte    short
    xsd:time    javax.xml.datatype.XMLGregorianCalendar
    xsd:date    javax.xml.datatype.XMLGregorianCalendar
    xsd:g   javax.xml.datatype.XMLGregorianCalendar
    xsd:anySimpleType   java.lang.Object
    xsd:anySimpleType   java.lang.String
    xsd:duration    javax.xml.datatype.Duration
    xsd:NOTATION    javax.xml.namespace.QName 
```

和**Java 到架构的映射**：

```
Java Class  XML Data Type
java.lang.String    xs:string
java.math.BigInteger    xs:integer
java.math.BigDecimal    xs:decimal
java.util.Calendar  xs:dateTime
java.util.Date  xs:dateTime
javax.xml.namespace.QName   xs:QName
java.net.URI    xs:string
javax.xml.datatype.XMLGregorianCalendar xs:anySimpleType
javax.xml.datatype.Duration xs:duration
java.lang.Object    xs:anyType
java.awt.Image  xs:base64Binary
javax.activation.DataHandler    xs:base64Binary
javax.xml.transform.Source  xs:base64Binary
java.util.UUID  xs:string 
```

如果您的 web 方法的返回值未在上面列出，则必须找到解决方法。

# sql - 删除列的扩展属性

> ID：12420176
> 
> 赞同：1
> 
> 时间：2012-09-14T07:46:12.067
> 
> 标签：sql, sql-server

我有一个数据库，我在`Description`表中的许多列的属性中放置注释来描述这些列。Description 属性显然是作为`Extended Property`命名的`MS_Description`.

现在我需要将数据库复制到 SQL Azure，这是不允许`Extended Properties`的。可用于搜索扩展属性 MS_Description 的每一列并将其删除的 Transact SQL 命令是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T08:27:14.880

[在这里，您可以](http://msdn.microsoft.com/en-us/library/ms177541%28v=sql.105%29.aspx)详细了解如何列出 SQL Server 2008R2 上的扩展属性。然后在该页面的末尾，您有几个参考资料，其中之一是[`sp_dropextendedproperty`](http://msdn.microsoft.com/en-us/library/ms178595%28v=sql.105%29.aspx). 随意使用。

[一个包含有用信息](http://sqlserverperformance.wordpress.com/2011/01/10/fun-with-extended-properties-in-sql-server-2008/)和详细示例的博客。

在这里，您有一个代码示例来显示表中列的所有扩展属性：

```
USE AdventureWorks2008R2;
GO
SELECT major_id, minor_id, t.name AS [Table Name],
       c.name AS [Column Name],
       value AS [Extended Property]
  FROM sys.extended_properties AS ep
 INNER JOIN sys.tables AS t ON ep.major_id = t.object_id 
 INNER JOIN sys.columns AS c ON ep.major_id = c.object_id
       AND ep.minor_id = c.column_id
 WHERE class = 1;
GO 
```

更多[样品在这里](http://msdn.microsoft.com/en-us/library/ms186989%28v=sql.105%29.aspx)

# javascript - 标识符解析如何在 Javascript 中工作？

> ID：12420186
> 
> 赞同：0
> 
> 时间：2012-09-14T07:46:57.997
> 
> 标签：javascript

有人可以解释一下标识符解析如何在以下情况下适用于 Javascript：

1.  一个全局函数被调用。
2.  调用用户定义的 javascript 对象内的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:59:12.477

您必须了解 ECMA 脚本中的上下文和范围才能理解这一点。介于两者之间的是标识符还是变量？

标识符通常被标记为窗口对象。说 String() 它实际上是 window.String()。

通常，当页面加载时，所有变量和函数都作为属性添加到窗口对象。在浏览器的情况下，窗口对象成为全局上下文（GC）。因此，当调用全局函数（这只是一个方法，没有什么像全局函数那样）被调用时，该变量只是在全局上下文中查找。因此它将识别变量。

但是，如果有一个函数在其中有一个内部函数，那么识别一个全局变量将是两个折叠，首先它将检查函数范围，然后检查全局范围。如果变量是函数变量。然后变量将始终存在于函数执行上下文（EC）中

# wpf - 未根据视图中的选定日期获取更新包含与通用列表绑定的 Datagrid？

> ID：12420188
> 
> 赞同：0
> 
> 时间：2012-09-14T07:47:01.863
> 
> 标签：wpf, xaml, data-binding, mvvm, wpfdatagrid

我使用选项卡控件来查看我的用户控件。在第一个用户控件中，我使用数据网格来显示记录，而对于绑定，我使用了通用列表。当想要根据所选日期更改此列表时，该集合在数据库和视图模型中也随着列表的 set 属性执行而更改，但是当我选择新选项卡然后返回到 prevois 选项卡时，列表的 get 属性执行 &然后我可以根据选定的日期查看。

我的主视图包含第一个用户控件作为第一个选项卡项，如下所示：

![在此处输入图像描述](../Images/fa215e897334eb78678ac37df2b73082.png)

上述视图的 Xaml 代码如下：

```
 <DataGrid
                Background="Transparent"
                CanUserAddRows="True"
                CanUserReorderColumns="False"

                ItemsSource="{Binding Model_Transactions_TransactionsDetails_Jama,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                HeadersVisibility="Column">
            </DataGrid>
            <Grid DockPanel.Dock="Bottom" VerticalAlignment="Bottom" >
                <Border BorderBrush="Black" BorderThickness="1" >
                    <Label HorizontalAlignment="Left" HorizontalContentAlignment="Right"  Width="75" Content="{Binding SumOfWeightJama,UpdateSourceTrigger=PropertyChanged}" FontFamily="Segoe UI" FontWeight="Bold"  FontSize="16" />
                </Border>
            </Grid>
            <DataGrid 
                Background="Transparent"
                CanUserAddRows="True"
                CanUserReorderColumns="False"
                ItemsSource="{Binding  Model_Transactions_TransactionsDetails_Udhar,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                HeadersVisibility="Column">
            </DataGrid>
            <Grid DockPanel.Dock="Bottom" VerticalAlignment="Bottom">
                <Border BorderBrush="Black" BorderThickness="1">
                    <Label Width="75" HorizontalAlignment="Left" HorizontalContentAlignment="Right"  Content="{Binding SumOfWeightUdhar,UpdateSourceTrigger=PropertyChanged}" FontFamily="Segoe UI" FontWeight="Bold"  FontSize="16"/>
                </Border>
            </Grid> 
```

上述视图的视图模型如下：

```
private DateTime _FilterDate ;
public DateTime FilterDate
{
    get
    {
         return _FilterDate;
    }
    set
    {
        _FilterDate = value;
        OnPropertyChanged("FilterDate");
        Model_Transactions_TransactionsDetails_Jama = (ViewModel.AllDataCollactions.AllTransactionsDetails.Where(s => s.TransactionDate.Equals(FilterDate) && s.IsJama).OrderBy(s => s.TransactionsID)).ToList();
        Model_Transactions_TransactionsDetails_Udhar = (ViewModel.AllDataCollactions.AllTransactionsDetails.Where(s => s.TransactionDate.Equals(FilterDate) && !s.IsJama).OrderBy(s => s.TransactionsID)).ToList();

    }
}
public List<Model_TransactionsDetails> Model_Transactions_TransactionsDetails_Jama
{
    get
    {
        return model_Transactions_TransactionsDetails_Jama;
    }
    set
    {
        model_Transactions_TransactionsDetails_Jama = value;
        OnPropertyChanged("Model_Transactions_TransactionsDetails_Jama");
    }
}
public List<Model_TransactionsDetails> Model_Transactions_TransactionsDetails_Udhar
{
    get
    {
        return model_Transactions_TransactionsDetails_Udhar;
    }
     set
    {
        model_Transactions_TransactionsDetails_Udhar = value;
        OnPropertyChanged("Model_Transactions_TransactionsDetails_Udhar");
    }
}
public ViewModel_MasterBook()
{
    FilterDate = DateTime.Now.AddDays(-1).Date;
    InsertCommand = new RelayCommand(AddExecute, CanAdd);
} 
```

任何人都可以帮助我如何立即根据所选日期获得视图..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:00:13.437

实际上它应该工作我看不到错误。但是当我在我的 WPF 项目中使用某种列表时，我使用带有清除、添加、删除功能的 observablecollection。

但首先我会改变绑定

```
ItemsSource="{Binding Model_Transactions_TransactionsDetails_Jama,Mode=OneWay}" 
```

因为 Mode=TwoWay 没有任何意义，所以您永远不会将数据网格中的 itemssource 设置为 viewmodel。

第二个我会改为 ObservableCollection

```
public ObservableCollection<Model_TransactionsDetails> Model_Transactions_TransactionsDetails_Jama
{
   get; private set;
} 
```

使用私有设置器，因为只需初始化一次。

//ctor

```
this.Model_Transactions_TransactionsDetails_Jama = new ObservableCollection<Model_TransactionsDetails>(); 
```

然后在您的 FilterDate 设置器中填充集合

```
this.Model_Transactions_TransactionsDetails_Jama.Clear();
var newdata = (ViewModel.AllDataCollactions.AllTransactionsDetails.Where(s => s.TransactionDate.Equals(FilterDate) && s.IsJama).OrderBy(s => s.TransactionsID)).ToList();
this.Model_Transactions_TransactionsDetails_Jama.AddRange(newdata);//AddRange is simply an extension method i wrote, you can simply use foreach and .Add() 
```

# asp.net-mvc-3 - TinyMce 和数据库 - MVC3

> ID：12420189
> 
> 赞同：0
> 
> 时间：2012-09-14T07:47:12.810
> 
> 标签：asp.net-mvc-3, sql-server-2008-r2, tinymce

是否可以将添加到 TinyMce 内容的图像保存到数据库（sql server 表）中？

假设我们有这样的： text text IMAGE text text IMAGE2 （IMAGE & IMAGE2 添加了图片上传插件）。也许使用 HttpPostedFileBase 之类的东西。我不知道，我有点新手。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:08:51.273

您的服务器上有图像，您现在可以获取您的 tinymce 内容并用其 base64 编码字符串替换图像服务器端 - 然后您将所有内容写入您的数据库。

# php - 使用 jquery 和 ajax 处理表单而不刷新页面

> ID：12420190
> 
> 赞同：-1
> 
> 时间：2012-09-14T07:47:12.907
> 
> 标签：php, jquery, html, ajax

我有一个表单，我想提交而不刷新整个页面。我找到了一个现成的源代码并在我的页面上实现了它，但它拒绝工作！

这是我需要提交的html表单：

```
<form method="POST" action="" name="actionForm" id="actionForm" class="actionForm">
                    <input type="hidden" name="adID" value="'.$row['adID'].'" />
                    <input type="hidden" name="adStatus" value="'.$row['adStatus'].'" />
                    <input type="submit" name="editAd" value="ערוך מודעה" class="actionButtons" />
                    <input type="submit" name="upgradeAd" value="הקפץ מודעה" class="actionButtons" />
                    <input type="submit" name="changeAdStatus" class="actionButtons" value="';
                    if ($row['adStatus'] == "disabled")
                        echo 'הצג מודעה בלוח" />';
                    else
                        echo 'הסתר מודעה מהלוח" />';
                    echo '
                    <input type="submit" name="deleteAd" value="מחק מודעה" class="deleteButton" />
                </form> 
```

这是转发到处理 php 文件并在当前页面上写入一些结果的脚本：

```
 <script>    
    $(document).ready(function(){
        $("#actionForm").validate({
            debug: false,
            rules: {
            submitHandler: function(form) {
                $.post('/tests/process.php', $("#actionForm").serialize(), function(data) {
                    $('#resDiv').html(data);
                });
            }
        }});
            }); 
</script> 
```

处理 php 仅将数据写入数据库并打印确认消息。这是它的链接： [http ://codeviewer.org/view/code:29c4](http://codeviewer.org/view/code:29c4)

我已经检查了代码的每一行，但仍然不明白为什么我没有看到来自处理 php 的消息...

有任何想法吗？

在此先感谢您的帮助！

PS这里是初始php的完整代码：http://codeviewer.org/view/code: [29c3](http://codeviewer.org/view/code:29c3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:36:02.990

我认为您的代码末尾的 javascript 片段是错误的。提交处理程序不得在 rules: {} 块中。

尝试以下操作：

```
<script>    
    $(document).ready(function() {
        $("#actionForm").validate({
            debug: false,
            submitHandler: function(form) {
                $.post('/tests/process.php', $("#actionForm").serialize(), function(data) {
                    $('#resDiv').html(data);
                });
            }
        });
    }); 
</script> 
```

# php - 创建 PHP 多用户登录

> ID：12420191
> 
> 赞同：0
> 
> 时间：2012-09-14T07:47:19.720
> 
> 标签：php, mysql, html

我有一个包含 2 个表的数据库，table1 只存储 id、用户名和密码，而 table2 存储 id、用户名、日期和其他信息。我现在的问题是如何设置我的代码，以便每次用户 A 登录并单击“查看个人资料”时，他或她只能根据那里的用户名而不是其他人的个人资料看到自己的个人资料。用户 B、用户 C 和用户 D 等也是如此。

我的日志代码是：

```
session_start();

$username = $_POST['username'];
$password = $_POST['password'];

if ($username&&$password)

{
$connect = mysql_connect("localhost","root","") or die("cannot connect!");
mysql_select_db("uloaku") or die("cannot find data base!");
$query = mysql_query ("SELECT * FROM keyaku WHERE    username='".mysql_real_escape_string($username)."' AND   password='".mysql_real_escape_string($password)."'");
$numrows = mysql_num_rows($query);

if ($numrows!=0)
{
    while ($row = mysql_fetch_assoc($query))
    {
    $dbusername = $row['username'];
    $dbpassword = $row['password'];
}
    if ($username==$dbusername&&$password=$dbpassword)
{
    echo "Welcome $username";
}
else
    echo "Invalid Password";
}
else
die("Invalid User");

}

else
 die("Please Enter a UserName and Password.");

?> 
```

我查看个人资料的代码是：

```
<?php
session_start();
$con = mysql_connect("localhost","root","");
mysql_select_db("uloaku", $con);
$count = 1;

$y = mysql_query("SELECT * FROM transaction WHERE id=24");
if(mysql_num_rows($y) != 0){

echo "<table border=\"1\" width=\"800\" >";
echo "<tr id=\"bold\">
<td>No</td>
<td align=\"center\" width=\"120\">Account Owner</td>
<td align=\"center\" width=\"120\">Deposit Date</td>
<td align=\"center\" id=\"bold\" width=\"120\">Current Balance</td>
<td align=\"center\" id=\"bold\" width=\"90\">Intrest</td>
<td align=\"center\" width=\"150\">Available Balance</td>
<td align=\"center\">Account Status</td>
</tr>";

while ($z = mysql_fetch_array($y, MYSQL_BOTH)){
        echo "<tr>
        <td>".$count++."</td>
        <td id=\"color\" align=\"center\">".$z[1]."</td>
        <td id=\"color\" align=\"center\">".$z[2]."</td>
        <td id=\"color\" align=\"center\">".$z[3]."</td>
        <td id=\"color\" align=\"center\">".$z[4]."</td>
        <td id=\"color\" align=\"center\">".$z[5]."</td>
        <td id=\"color3\" align=\"left\">".$z[6]."</td>
        </tr>";
    }
    echo "</table>";
    }
?> 
```

希望有人可以帮助我，如果给出完整的代码或更正，我会非常感激，以便其他有类似问题的人可以参考并进行更正。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:53:18.623

您可以为此使用[会话。](http://php.net/manual/en/features.sessions.php)使用 启动每个需要信息的脚本`session_start()`。之后，您可以将超全局`$_SESSION`用作数组（非常像`$_POST`）。-array的内容`$_SESSION`在请求之间保存。

所以你可以做的是：

*   放在`session_start()`所有脚本的顶部
*   当用户登录时，将他们的 id 保存在`$_SESSION`数组中（如；`$_SESSION['logged_in'] = $row['userid']`）；
*   在随后的页面中，您可以使用`$_SESSION['logged_in']`来获取调用登录脚本的用户的 ID。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T07:51:59.660

您可能需要调整以下行：

```
if ($username==$dbusername&&$password=$dbpassword) 
```

至

```
if ($username==$dbusername&&$password==$dbpassword) 
```

然而，这个测试是多余的。

通过向 mysql 发送请求，如果你得到一条回线，那么你就有了匹配，你不需要获取行或值，因为你没有使用它们。找到时您获得了有效的登录信息

```
if ($numrows!=0) 
```

# c# - 无法将 ResourceDictionary 项绑定到 Rectangle.Child

> ID：12420194
> 
> 赞同：0
> 
> 时间：2012-09-14T07:47:41.233
> 
> 标签：c#, silverlight, binding

当我尝试将`ResourceDictionary`项目绑定到 时`Rectangle.Child`，出现异常：

`ArgumentException: Value does not fall within the expected range.`

这是一个例子：

```
<UserControl.Resources>
    <local:PersonConverter x:Key="MyConverter"/>
</UserControl.Resources>

<ListBox ItemsSource="{Binding Persons}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Border Child="{Binding Gender, Converter={StaticResource MyConverter}}"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

以及背后的代码：

```
public class MainViewModel : ViewModelBase
{
    public MainViewModel()
    {
        Persons = new List<Person> {new Person("Female"), new Person("Male")};
    }

    public List<Person> Persons { get; private set; }
}

public class PersonConverter : IValueConverter
{
    private ResourceDictionary Items { get; set; }

    public PersonConverterRes()
    {
        Items = new ResourceDictionary
            {
                {"Male", new Canvas() {
                                 Background = new SolidColorBrush(Colors.Blue),
                                 Height = 100, Width = 100}},
                {"Female", new Canvas() {
                                 Background = new SolidColorBrush(Colors.Magenta),
                                 Height = 100, Width = 100}}
            };
    }

    public object Convert(object value, Type targetType, object parameter,
                          System.Globalization.CultureInfo culture)
    {
        return Items[value.ToString()];
    }

    ...
}

public class Person
{
    public Person(String gender)
    {
        Gender = gender;
    }

    public String Gender { get; private set; }
} 
```

但是，如果我用`ResourceDictionary`普通替换`Dictionary<String, UIElement>`绑定工作正常：

```
public class PersonConverter : IValueConverter
{
    private Dictionary<String, UIElement> Items { get; set; }

    public PersonConverterRes()
    {
        Items = new Dictionary<String, UIElement>
            {
                {"Male", new Canvas() {
                                 Background = new SolidColorBrush(Colors.Blue),
                                 Height = 100, Width = 100}},
                {"Female", new Canvas() {
                                 Background = new SolidColorBrush(Colors.Magenta),
                                 Height = 100, Width = 100}}
            };
    }

    ...
} 
```

有谁知道是什么导致了这个异常？

注意：我也在 WinRT 下尝试过。在那里，代码不会引发异常，但如果我使用`ResourceDictionary`. 我想它可能会默默地失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:55:46.720

您不能使用数据绑定绑定到 a 的`Child`属性，`Border`因为它不是 a `DependencyProperty`。这就是您的 ResourceDictionary 方法不起作用的原因。

此外，WPF/Silvelight/WinRT 中的数据绑定在设计上会静默失败（这是一项功能，如果使用得当，它会非常有用），因此您的猜测是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T07:59:43.890

不要这样做。

用触发器设置 Canvas.Background 更优雅

```
<ListBox ItemsSource="{Binding Persons}">
   <ListBox.ItemTemplate>
       <DataTemplate>
           <Border <!-- set properties --> >
               <Canvas Height="100" Width="100">
                  <Canvas.Style>
                      <Style TargetType="Canvas">
                        <Style.Triggers>
                            <DataTrigger Binding={Binding Gender} Value="Male">
                                  <Setter Property="Background" Value="Blue"/>
                            </DataTrigger>
                            <DataTrigger Binding={Binding Gender} Value="Female">
                                  <Setter Property="Background" Value="Magenta"/>
                            </DataTrigger>
                        </Style.Triggers>
                      </Style>
                  </Canvas.Style>
               </Canvas>
           </Border>
       </DataTemplate>
   </ListBox.ItemTemplate>
</ListBox> 
```

# asp.net - Web.sitemap 在角色功能中显示链接

> ID：12420196
> 
> 赞同：1
> 
> 时间：2012-09-14T07:47:47.557
> 
> 标签：asp.net, sitemap

我有一个网页，只有当用户具有两个允许的角色“政治家”或“工人”之一时才能访问该网页。取决于访问哪个用户角色，导航站点地图中的 Web 标题必须不同。

在我们的 web.config 中，这个页面被配置为使用“政治家”或“工人”这两个角色来访问，在 web.sitemap 中我有下一个代码。

```
<siteMapNode url="DoTask.aspx?Validator=Worker" title="TitleForRole" roles="Worker" />
<siteMapNode url="DoTask.aspx?Validator=Politician" title="TitleFolRoleB"  roles="Politician" /> 
```

问题在于该代码尽管用户在站点地图中只有一个角色出现了两个链接。

有没有办法只使链接用户在站点地图中具有角色可见？

一种解决方案是为重定向到 DoTask.aspx 并更改站点地图的角色之一创建一个页面

```
<siteMapNode url="DoTask.aspx?Validator=Worker" title="TitleForRole" roles="Worker" />
<siteMapNode url="RedirectToDoTask.aspx" title="TitleFolRoleB" roles="Politician" /> 
```

但我认为这不是优雅的解决方案，我想避免创建另一个页面。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:26:59.670

您可以按照[http://weblogs.asp.net/jgalloway/archive/2008/01/26/asp-net-menu-and-sitemap-security-trimming-plus-a-trick-for-中的步骤进行操作when-your-menu-and-security-don-t-match-up.aspx](http://weblogs.asp.net/jgalloway/archive/2008/01/26/asp-net-menu-and-sitemap-security-trimming-plus-a-trick-for-when-your-menu-and-security-don-t-match-up.aspx)

# objective-c - 如何从给定的日期/时间中减去 1 小时

> ID：12420199
> 
> 赞同：3
> 
> 时间：2012-09-14T07:48:25.740
> 
> 标签：objective-c, ios, datetime

我想在给定日期/时间前一小时获取日期/时间。

假设给定的日期/时间是 2012-11-25 13:20:35 (YYYY-mm-dd 时:分:秒)。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-14T07:58:30.473

您应该阅读Apple 文档中的[日期和时间编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/DatesAndTimes.html)。

这里有一些东西可以让你上路：

```
NSTimeInterval secondsPerHour = 60 * 60;
NSDate *givenDate = ...; // what you have already
NSDate *earlierDate = [givenDate dateByAddingTimeInterval:-secondsPerHour]; 
```

注意 secondsPerHour 前面的减号，因为它更早。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-14T07:51:09.757

您可以使用：

```
NSDate *minusOneHr = [[NSDate date] dateByAddingTimeInterval:-60*60]; 
```

# java - 找出蚂蚁失败的原因

> ID：12420207
> 
> 赞同：3
> 
> 时间：2012-09-14T07:49:00.097
> 
> 标签：java, ant

我有一些 ant 文件，一个导入另一个。专门`build.xml`导入一个`project_default.xml`. 当我尝试进行构建时，出现以下错误：

> 构建文件：C:\myproject\build.xml [taskdef] 无法从资源 net/sf/antcontrib/antcontrib.properties 加载定义。找不到。
> 
> BUILD FAILED C:\myproject\build.xml:14：执行此行时出现以下错误：C:\myproject\project_default.xml:17：问题：如果原因：名称未定义，则无法创建任务或类型。行动：检查拼写。行动：检查是否已声明任何自定义任务/类型。行动：检查任何/声明已经发生。

报告的第 17 行如下：

```
<if>   
<contains string="${env.PROJECT_SELECTION}" substring="env.PROJECT_SELECTION" /> 
```

我还在以下内容中添加了`build.xml`：

```
<taskdef resource="net/sf/antcontrib/antcontrib.properties">  
  <classpath>  
    <pathelement location="D:\UserData\ant-contrib-0.6-bin\lib\ant-contrib-0.6.jar"/>  
  </classpath>  
</taskdef> 
```

但是得到了同样的错误。知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:11:56.903

对于 ant 版本 > 1.6，您应该使用“net/sf/antcontrib/antlib.xml”而不是“net/sf/antcontrib/antcontrib.properties”

所以将taskdef更改为：

```
<taskdef resource="net/sf/antcontrib/antlib.xml">  
  <classpath>  
    <pathelement location="D:\UserData\ant-contrib-0.6-bin\lib\ant-contrib-0.6.jar"/>  
  </classpath>  
</taskdef> 
```

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:16:55.167

首先要检查的是你有 ant-contrib jar 路径 corrext。运行 ant`-verbose`以获取有关它正在做什么以及它试图从何处加载哪些任务的更多信息。

你在哪里添加了taskdef？如果您在`<if>`目标之外使用任务，那么您需要在它之前使用 taskdef，也需要在目标之外。如果您在目标内部使用它，那么 taskdef 可以（在文本上）在调用之后，只要它在目标之外或在`<if>`依赖顺序之前运行的目标中。

# joomla - joomla：无法加载路径：管理员

> ID：12420208
> 
> 赞同：0
> 
> 时间：2012-09-14T07:49:01.840
> 
> 标签：joomla, joomla1.5, virtuemart

我收到错误：500 - 发生错误。无法加载路径：管理员如果我在 Joomla-Backend (1.5) 中单击 Virtuemart

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:40:11.837

这可能会帮助您解决这个问题：

[错误 500 - 无法加载路径](http://forum.joomla.org/viewtopic.php?f=430&t=340949)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:49:01.840

转到*500 - 发生错误。无法加载路径：管理员*，并注释掉 lin：

```
mainframe->appendPathWay( $VM_LANG->_('PHPSHOP_CART_TITLE') ); 
```

一切都应该再次正常工作。

# twitter - 获取推特时间线时出错

> ID：12420211
> 
> 赞同：0
> 
> 时间：2012-09-14T07:49:14.837
> 
> 标签：twitter, mgtwitterengine

当我运行我的代码时，会发生以下错误。我正在使用 MGTwitterEngine 将 Twitter 集成到我的应用程序中。使用此身份验证过程成功完成，我可以成功发布推文，但无法在表格视图上获取我的推文。

请帮助我获取推文时间线。

失败并出现错误：错误域 = HTTP 代码 = 403“操作无法完成。（HTTP 错误 403。）”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:06:34.220

尝试这个

在 MGTwitterEngine.m

```
# define TWITTER_DOMAIN @ "twitter.com" 
```

一个，

```
# define TWITTER_DOMAIN @ "api.twitter.com / 1" 
```

改变。

# jquery - 如何将jquery-mobile-datebox mm-dd-yyyy显示格式的翻转框弹出显示顺序更改为dd-mm-yyyy

> ID：12420212
> 
> 赞同：4
> 
> 时间：2012-09-14T07:49:16.530
> 
> 标签：jquery, jquery-plugins, jquery-mobile

我正在尝试修改 jquery-mobile-datebox 翻转框的显示顺序，但我找不到任何相同的选项。我正在尝试通过 jquery 来做到这一点，但我仍然认为在 Flipbox 中可能有一个选项。

下面是图片供参考。

下图默认显示弹出窗口

![在此处输入图像描述](../Images/819247fe4e020f2b908e55174cfa3cf0.png)

我需要弹出显示日期 | 月 | 年份如红色边框所示

![在此处输入图像描述](../Images/87fb5ba701a2f22814824e8e960d05a6.png)

我希望有人在这方面帮助我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T22:10:17.583

我认为 Killrawr 方式是好方法，但在我的案例中，我看到正确的“覆盖”字段名称：是“overrideDateFieldOrder”而不是“fieldsOrderOverride”。我使用最新版本的 datebox。

如果您查看“i18n”中的几个键/字段，您会看到一个名为“dateFieldOrder”的键，所以因为我已经使用了一些覆盖方法，通过覆盖前缀键，它似乎运行良好。

所以就我而言，当我这样做时：

```
jQuery.extend(jQuery.mobile.datebox.prototype.options, {
                'overrideDateFieldOrder': ['d','m','y']
            }); 
```

它运行良好。

另一种方法是：

```
$('#mydate').data("options", {"overrideDateFieldOrder": ["d", "m", "y"]}); 
```

或者在你的情况下最好的，我认为：

```
 <input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"overrideDateFieldOrder":["d", "m", "y"]}' /> 
```

注意：在最后一行中使用 " 和 ' 很重要。标签

`data-option='{"overrideDateFieldOrder":["d", "m", "y"]}'`

运行良好，但不像

`data-option="{'overrideDateFieldOrder':['d','m','y']}"`

不运行。

问候，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T07:58:57.313

我猜你正在使用这个[DatePicker](http://dev.jtsage.com/jQM-DateBox1/)。在这种情况下，您是否查看了所有[选项](http://dev.jtsage.com/jQM-DateBox1/demos/api/matrix.html#matrix&ui-page=0-3)，即`['m','d','y']`

```
fieldsOrderOverride

Type:
    Array

Default:
    Inherited

Modes:
        time/date/flip/slide

Override the i8n fields order. Option is an array of three items, for 24 clock mode 'a' is ignored. i.e. ['m','d','y']

Valid options:

    y : Year
    m : Month
    d : Day of Month (date)
    h : Hour
    i : Minute
    a : Meridiem 
```

实施（来源[这里](http://dev.jtsage.com/jQM-DateBox1/demos/mode/timebox.html)）

```
<input name="mydate" id="mydate" type="date" data-role="datebox"
data-options='{"mode": "timebox", "fieldsOrderOverride": "d m y" }'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:02:52.613

尝试这个：

```
<input name="mydate" id="mydate" type="date" data-role="datebox" data-options="{\"mode\":\"calbox\",\"fieldsOrderOverride\": [\"d\",\"m\",\"y\"],\"headerFormat\":\"%A,%d, %-m, %Y\",\"dateFormat\":\"dd/mm/YYYY\",\"useTodayButton\":true}"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-05T11:32:17.957

如果您使用`Jquery mobile` `datebox`我的答案将很有用。

我在下面给出的 HTML

```
<input type="text" name="scheduled_date" id="date-value" data-role="datebox" data-options='{"mode":"datebox","afterToday":"true","overrideDateFormat":"%d-%m-%Y","useFocus":true,"overrideDateFieldOrder": "dmy"}' placeholder="Date here"> 
```

overrideDateFieldOrder": "dmy" 是我用来解决相同问题的属性。

以下链接将很有用

[http://dev.jtsage.com/jQM-DateBox/api/dateFieldOrder/](http://dev.jtsage.com/jQM-DateBox/api/dateFieldOrder/)

# salesforce - 如何为 Salesforce 中的托管字段设置默认值？

> ID：12420214
> 
> 赞同：1
> 
> 时间：2012-09-14T07:49:21.093
> 
> 标签：salesforce, apex-code

我有一个包中的托管字段。要求是我无法将此字段添加到页面布局中。但是，当我创建或克隆记录时，一些托管代码会引发需要特定字段的错误。由于它不包含在页面布局中，因此用户无法设置任何值。

有什么办法可以为这个字段设置默认值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T00:31:25.943

您不能像使用其中一个自定义字段那样简单地设置默认值。首先，我会尝试使用简单的工作流程规则/字段更新组合。对于工作流规则，您可以使用 ISBLANK(PKG_ *Field* _c) 之类的公式条件。在字段更新中选择您的默认值。我有点担心在您的工作流程有机会填充它之前会引发错误。如果是这样，您可以求助于插入前触发器。

# html -

> ID：12420219
> 
> 赞同：0
> 
> 时间：2012-09-14T07:49:50.610
> 
> 标签：html, parsing, dom, rendering

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:33:23.097

# java - Java中有没有办法让按钮默认获得点击焦点

> ID：12420221
> 
> 赞同：2
> 
> 时间：2012-09-14T07:50:03.420
> 
> 标签：java, onclick, click, jbutton, buttonclick

似乎`JButton`单击时不会自动获得焦点，除非我使用`.setRequestFocusEnabled(true)`. 我正在使用的应用程序在许多不同的地方创建了很多按钮（即不是通过工厂方法），我需要所有这些按钮在单击时请求焦点。

有没有一种简单的方法来更改默认行为，以便按钮默认要求点击焦点，例如通过设置一些属性？或者我需要把他们全部追捕并`.setRequestFocusEnabled(true)`一个一个地按下每个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:31:16.337

单击时， JButton*应该*获得焦点。您可能有已修改为不执行此操作的按钮。但是，这并不能解决您的问题。

您可以在创建整个 UI 后更改按钮（假设在打开时未修改 GUI） - 这样您每个帧/对话框只需要一个调用站点：

```
public static class FocusHelper {
    public static void alterButtons(Component container) {
        if (component instanceof Container) {
            Component[] children = ((Container) component).getComponents();
            for (Component child : children) {
                alterButtons(child);
            }
        } else if (component instanceof JButton) {
            ((JButton) component).setRequestFocusEnabled(true);
        }
    }
} 
```

辅助方法仅扫描整个组件层次结构中的按钮并为每个 JButton 调用 setRequestFocusEnabled()（您可能需要检查其他组件类型，例如 AbstractButton，具体取决于您想要实现的目标）。您只需从创建 GUI 的任何位置调用该方法并传递顶级容器（JFrame、JDialog 或任何其他容器组件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:20:42.800

也许您可以创建一个继承自 JButton 的子类并在那里实现功能：

```
public class MyJButton extends JButton {
    public MyJButton(String string, Icon icon) {
        super(string, icon);
        this.setRequestFocusEnabled(true);
    }

    public MyJButton(Action action) {
        super(action);
        this.setRequestFocusEnabled(true);
    }

    public MyJButton(String string) {
        super(string);
        this.setRequestFocusEnabled(true);
    }

    public MyJButton(Icon icon) {
        super(icon);
        this.setRequestFocusEnabled(true);
    }

    public MyJButton() {
        super();
        this.setRequestFocusEnabled(true);
    }
} 
```

现在你必须用 MyJButton 对象替换你所有的 JButtons

# android - android中动态类加载期间的ClassNotFoundException

> ID：12420225
> 
> 赞同：1
> 
> 时间：2012-09-14T07:50:22.293
> 
> 标签：android, class, exception, dynamic

我正在创建一个应用程序，我应该在其中通过 Web 服务接收数据。

这里我有一个类，存储在主包中。我需要动态加载此类的数据，即在运行时，只要从 Web 服务接收到某些内容。但我得到了classNotFound的例外。

这是我用于动态加载类的代码，

```
try
{
    Class myClass = ClassLoader.getSystemClassLoader().loadClass("com.myPackage.it.ClassToLoad");
    Log.d("Dynamic class Loading", "1");
    Object DPMInstance = myClass.newInstance();
    Toast.makeText(getApplicationContext(), 
          "Get Methods" + myClass.getMethods(), 5000).show();
    Method myMethod = myClass.getMethod("sayHello", new Class[] {});      
    myMethod.invoke(DPMInstance, new Object[] { }); 
}
catch(Exception e)
{
    Log.d("Error", "" + e);
} 
```

我在这条线上得到了 excpetion，

```
Class myClass = ClassLoader.getSystemClassLoader().loadClass("com.myPackage.it.ClassToLoad"); 
```

# forms - 在 JSF ajax 中执行其他表单字段值

> ID：12420232
> 
> 赞同：1
> 
> 时间：2012-09-14T07:50:53.187
> 
> 标签：forms, jsf, submit

考虑以下 JSF 2.x 标记：

```
<h:form id="form1">

    <h:inputText id="input" value="#{testBacking.input}"/> 

</h:form>

<h:form id="form2">

    <h:commandButton value="go" action="#{testBacking.go()}">
        <f:ajax execute="@all" render="output"/>
    </h:commandButton>               
    <h:outputText id="output" value="#{testBacking.input}"/>

</h:form> 
```

动作方法如下：

```
public void go() {
        System.out.println("go() is called");
         System.out.println("input: "+ input);
    } 
```

单击按钮时，输入值不会提交给服务器。

有什么方法可以将输入值提交给服务器（同时将输入保持在不同的形式）？

如果只能从同一个表单提交字段，那么以下两者有什么不同呢？

```
<f:ajax execute="@all" render="output"/>
<f:ajax execute="@form" render="output"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T07:59:48.873

快速搜索会`jsf execute=@all vs execute=@form`产生一些结果：

*   [JSF：执行多个表单的值](https://stackoverflow.com/questions/9638103/jsf-execute-values-of-multiple-forms)
*   [<f:ajax execute="@all"> 真正应该做什么？它只发布封闭的表格](https://stackoverflow.com/questions/2999101/jsf-2-0-with-fajax-execute-all)

本质上，JSF 处理工作正常，但 HTML 只发送包含 ajax 的表单（我怀疑 HTML 为每个表单指定了一个单独的请求）。

# visual-studio-2010 - 复制解决方案文件夹并重命名所有文件和子文件夹

> ID：12420234
> 
> 赞同：0
> 
> 时间：2012-09-14T07:51:02.557
> 
> 标签：visual-studio-2010, solution

我有一个解决方案 X。在 Windows 资源管理器中，这是解决方案文件夹：

![在此处输入图像描述](../Images/3f38abecb834c53e1027e63cd5a1e198.png)

我想保持 X 原样，但在新的解决方案 Y 中使用它的所有功能（和 winform）。我复制了整个解决方案文件夹 ao X 并重命名了文件夹 Y。在 VS 中，我使用了解决方案资源管理器并将解决方案重命名为 Y并将项目重命名为 Y。

因此，在解决方案资源管理器中，它如下所示：

![在此处输入图像描述](../Images/07693525613169a85720356aedeef272.png)

在 Windows 资源管理器中，我现在得到了：

![在此处输入图像描述](../Images/4d4a1e4f94b857e5aaf97b190f537979.png)

从上面可以看出，还是有X的。如果我在 Windows 资源管理器中手动重命名这些文件/文件夹，那么在 VS 中打开解决方案时，它会抱怨无法找到某些文件。

以上是要避免的不良做法吗？

或者有没有一种简单的方法可以确保重命名解决方案文件夹中的所有文件/文件夹而不会混淆 VS *？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:00:24.250

一般来说，我不建议这样做。

如果你真的需要，那么我建议你复制解决方案，在 Visual Studio 中打开它，然后通过解决方案资源管理器重命名文件夹。这样，解决方案文件将使用新的文件夹名称进行更新，您将不会看到这些错误。

# lisp - 常见的 lisp 符号匹配

> ID：12420240
> 
> 赞同：2
> 
> 时间：2012-09-14T07:51:42.543
> 
> 标签：lisp, common-lisp

我有一个如下形式的列表：

```
((|* bank accounts| (|account 1| |account 2|))
 (|* airline miles| (|account 1| |account 2|))
 .....
 .....) 
```

我不知道如何使用`assoc`来访问这些符号，因为它们的两边都用“|”框住了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T09:38:14.767

带引号的符号被视为与任何其他符号一样，但保留了符号的字符串大小写：

`(assoc '|foo bar| '((|baz| . 1) (|foo bar| . 2))) => (|foo bar| . 2)`

以下是更多示例（使用标准阅读器案例设置）：

`(intern "foo bar") => |foo bar|`

`(intern "Foo") => |Foo|`

`(intern "FOO") => FOO`

更长的答案可以[在 cliki 上找到](http://www.cliki.net/Case%20sensitivity)。另请参阅[Common Lisp Hyperspec](http://www.lispworks.com/documentation/lw50/CLHS/Front/index.htm)中的[2.3.4 Symbols as Tokens](http://www.lispworks.com/documentation/lw50/CLHS/Body/02_cd.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T09:42:48.573

它们的打印方式相同：

```
> (defparameter *alist* 
                '((|* bank accounts| |account 1| |account 2|)
                  (|* airline miles| |account 1| |account 2|)))
*ALIST*
> (cdr (assoc '|* bank accounts| *alist*))  
(|account 1| |account 2|)
> (cdr (assoc '|* airline miles| *alist*))                                             
(|account 1| |account 2|) 
```

竖线只是多个转义字符，允许使用标准阅读器不会读取为符号的字符。例如，空格会在标准阅读器语法中产生单独的符号：

```
> (read-from-string "foo bar")
FOO ;
4 
```

数字不会产生符号：

```
> (read-from-string "123 456")
123 ;
4
> (type-of *)
(INTEGER 0 16777215) 
```

如果没有转义和默认的 readtable-case，读取的符号将是大写的：

```
> 'foo
FOO 
```

但：

```
> (intern "1234")
|1234| ;
NIL
> (type-of *)
SYMBOL
> '|foo bar baz|
|foo bar baz|
> (symbol-name *)
"foo bar baz" 
```

# azure - 带有智能电视的 Microsoft Azure ACS

> ID：12420241
> 
> 赞同：2
> 
> 时间：2012-09-14T07:51:43.423
> 
> 标签：azure, acs, television

智能电视（三星、LG 等）的应用程序正在使用 HTML5+js+CSS 进行编码。我想知道将 Microsoft Azure ACS 集成到这些智能电视中的可行性。我从示例中做了 asp.net mvc 3 和 windows phone 以将 ACS 构建到它们中，但我真的不知道如何将 ACS 集成到智能电视应用程序中。

我认为它更像 windows phone 7 方法，但即使我得到了代码（它只是开箱即用），仍然无法准确地找出 windows phone 7 上 ACS 的工作流程。

这里的任何人都可以提出一些意见和建议，这将是很大的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:44:28.573

WP7 的工作流程可以在[这里的源代码](http://acs.codeplex.com/SourceControl/changeset/view/67093#1065577)中找到：

```
 /// Initiates a token request from ACS following these steps:
    /// 1) Get the list of configured Identity Providers from ACS by calling the discovery service
    /// 2) Once the user selects their identity provider, navigate to the sign in page of the provider
    /// 3) Using the WebBrowser control to complete the passive token request complete
    /// 4) Get the token
    /// 5) If a RequestSecurityTokenResponseStore is specified, set the token.
    /// 6) return the token using the RequestSecurityTokenResponseCompleted callback 
```

但我怀疑你是否想走这条路，除非 SmartTV 有类似浏览器控件的功能。另一个解决方案是：

1.  显示[自定义登录页面](http://msdn.microsoft.com/en-us/library/windowsazure/gg185963.aspx)（可以获取 JSON 格式的身份提供者列表）
2.  用户选择身份提供者（例如，将被重定向到 Windows Live 登录页面）
3.  用户登录并通过 POST 请求重定向回[http://smarttv.local/something](http://smarttv.local/something)（您的应用在 SmartTV 中的 url，如果它甚至有 url？？）
4.  在您的应用程序中处理 POST 请求（在 SmartTV 中甚至可能吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:27:41.433

任何可以呈现网页的平台都可能使用 ACS。如果不支持 WP7 示例中使用的标准 window.external.Notify() 机制，您可以制作自己的网页，接受来自 ACS 的帖子并将令牌按摩成电视应用程序需要的任何类型的 HTML 或脚本消耗。不过，这是一个有趣的场景。真的存在人们在电视上为联合应用程序输入用户名和密码的情况吗？

# mysql - 如何在 MYSQL 中找到属性对的最大值？

> ID：12420249
> 
> 赞同：-1
> 
> 时间：2012-09-14T07:52:12.520
> 
> 标签：mysql, sql, database

我有一个包含日志数据的表，格式如下：

```
Date        Time    Device  Configuration
01.01.2012  12.00   8193    12345
01.01.2012  12.15   8193    12345
01.01.2012  12.35   8193    22375
01.01.2012  12.37   7191    32335 
```

我每天都需要每个设备的最大配置：

```
Date        Device  Configuration
01.01.2012  8193    22375
01.01.2012  7191    32335 
```

我可以创建 Dates-devices 的叉积来获取所有 Date-device 组合，
但是如何找到**每个 Date-Device 对**的**最大配置**？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:54:42.770

只需按日期和设备分组，获取 MAX 即可。

```
SELECT Date, Device, MAX(Configuration) AS Configuration
FROM logData
GROUP BY Date, Device 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:05:32.857

```
select `date`,`Device`,max(Configuration) as MaxConfig from logData
group by `date`,`Device` 
```**

# java - 用印地语保存信息

> ID：12420252
> 
> 赞同：3
> 
> 时间：2012-09-14T07:52:38.767
> 
> 标签：java, android

我正在使用此代码将数据保存在文件中。保存在文件中的数据是`????????`. 请帮助我找到合适的解决方案。

```
File gpxfile = new File(activate, "activate.csv");
OutputStreamWriter writer = new OutputStreamWriter(new FileOutputStream(gpxfile),"UTF-8");
writer.write(merchantId); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:22:00.313

这个对我有用。确保`merchantId`包含有效`Hindi`的 . 例如：

```
 String str = "मानक हिन्दी";
    writer.write(str); 
```

# php - Drupal 7翻译在更好的暴露过滤器中选择所有/无链接

> ID：12420253
> 
> 赞同：1
> 
> 时间：2012-09-14T07:52:51.910
> 
> 标签：php, javascript, drupal, drupal-7, translation

如何在 Drupal7 的 Better Exposed Filter 中为“全选/无链接”翻译文本“全选”和“全选”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T01:22:04.457

至少从 Better Exposed Filters 3.0-beta3 开始，“全选”和“全选”链接可以使用翻译 UI 进行翻译`/admin/config/regional/translate/translate`。

# css - 如何以独特的布局并排放置多个 div

> ID：12420255
> 
> 赞同：1
> 
> 时间：2012-09-14T07:53:01.917
> 
> 标签：css

我试图并排放置 7 个 div，但有点独特。[您可以通过此处](http://www.hydrocell.co/test3.html)的链接查看我到目前为止所做的工作并查看页面源代码。

我希望中心 div 的宽度填充**左中**和**右中**div 之间的空间，无论将浏览器表单向左或向右拖动多远。目前，中心 div 的左侧和右侧都有空格。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:20:01.797

您可以使用`<table>`. 如果您假装使用基于 div 的结构，那么您可以使用`display:table`etc 来模拟 div 的行为...

这是HTML：

```
<div style="display:table;width:100%;">
  <div style="display:table-row">

    <div style="display:table-cell;width:100px;background:blue;">Left Fixed</div>
    <div style="display:table-cell;width:auto;background:green;">Left Stretch</div>
    <div style="display:table-cell;width:120px;background:yellow;">Left Middle</div>
    <div style="display:table-cell;width:auto;background:#999;">Center</div>
    <div style="display:table-cell;width:120px;background:yellow;">Right Middle</div>
    <div style="display:table-cell;width:auto;background:green;">Right Stretch</div>
    <div style="display:table-cell;width:100px;background:blue;">Right Fixed</div>

  </div>
</div> 
```

这是一个演示：[演示链接](http://jsbin.com/uwuyax/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:36:32.157

尝试使用`display: inline-block`和`white-space: nowrap`。

***[演示](http://tinkerbin.com/8Gu4uApo)***

例子：

**HTML**

```
<div class="parent">
  <div class="child">first</div>
   <div class="child2">first2</div>
   <div class="child3">first3</div>
   <div class="child4">first4</div>
   <div class="child5">first5</div>
 <div class="child6">first6</div>
   <div class="child7">first7</div>
</div> 
```

**CSS**

```
.parent{
  margin:0 auto;
  background:red;
  font-size:0;
  white-space:nowrap;
}
.child, .child1, .child2, .child3, .child4, .child5, .child6, .child7{
display:inline-block;
  vertical-align:top;
  width:100px;
  padding:20px;
  font-size:12px;
}
.child{
background:green;
}
.child2{
background:rgba(0,0,0,0.4);
}
.child3{
background:rgba(0,0,0,0.6);
}
.child4{
background:rgba(0,0,0,0.1);
}
.child5{
background:rgba(0,0,0,0.3);
}
.child6{
background:rgba(45,234,0,0.9);
}
.child7{
background:rgba(232,0,222,0.9);
} 
```

***[现场演示](http://tinkerbin.com/8Gu4uApo)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:07:23.093

您可以使用 HTML 毫无问题地实现这一点`<table>`。或者如果你想让它没有表格，只使用基于 div 的结构，那么你可以在你的 CSS 中使用display as `table`,来模拟表格的行为`table-row``table-cell`

***[这](http://jsfiddle.net/4rLa8/)***是一个现场演示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T08:00:22.800

你左边的 div 有 45% 的宽度；你的右 div 类似。但是中间的 div 有 8% 的宽度，所以还剩下 2%。

如果您使中心 div 的宽度为 10%，则间隙会消失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T08:00:55.843

```
<div style="position: relative;">
            <div style="margin-left: auto; margin-right: auto; width: 10%; margin-top: 0px; background-color: #999">
                Center</div>
        </div> 
```

因为你有两个 div 的宽度加起来为 90%，而中心 div 为 8%，所以修复这个并且中心填充中心

# php - 解析 JSON 数据时出现 highchart 数据显示问题

> ID：12420262
> 
> 赞同：0
> 
> 时间：2012-09-14T07:53:33.433
> 
> 标签：php, javascript, jquery, json, highcharts

我正在尝试从 PhP 模块动态获取数据，将其作为 JSON 数据加载到 javascript 中，并使用此数据使用 HighCharts 生成饼图。饼图在我使用一些静态数据时正确生成，但在我解析 JSON 数据并将其作为输入提供给 Highchart 系列对象时未加载。我确信这与输入到 Highcharts 时的数据格式有关，但我暂时无法弄清楚:( 所以我想和你们联系。我在这里附上了代码和示例php 模块生成的 json 输出供您参考。

从 PhP 模块生成的 JSON 输入示例：[{"skill":"html","count":"158"},{"skill":"css","count":"134"}]。需要解析此 JSON 输入并将其作为输入提供给我的 HighCharts 系列对象，以生成将“html”和“css”显示为饼图的饼图。

任何指导将不胜感激。

谢谢。

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Top Skills Analytics</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script src="highcharts.js"></script>
</head>

<body>
    <table>
        <tr>
            <td colspan="2" align="center"><u><b><font size="4">Top Skills Analysis</font></b></u>

            </td>
        </tr>
        <tr>
            <td>
                <div id="container" style="height: 500px; width: 500px; margin-bottom: 1em;"></div>
            </td>
        </tr>
    </table>
    <script type="text/javascript">
        // Creates the HighChart using the dynamically generated data from PhP module
        function loadCharts() {
            // Parses the JSON data and returns an array of an array
            var result = [];
            // json from php is like : [{"skill":"html","count":"158"},{"skill":"css","count":"134"}]
            $.getJSON('test.php', function (json) {
                $.each(json, function (i, entry) {
                    result.push(entry.skill, entry.count);
                });
            });
            //result = [["html",158],["css",134]];  --> this works

            var options1 = {
                "series": [{
                    "name": "Jobs",
                    "type": "pie",
                    "sliced": true,
                    "data": result, // works when populated with static value like [["html",158],["css",134]]
                    "pointWidth": 15,
                    "color": "#C6D9E7",
                    "borderColor": "#8BB6D9",
                    "shadow": true,
                }],
                "title": {
                    "text": "Top Skills Analytics"
                },
                "legend": {
                    "layout": "vertical",
                    "style": {
                        "left": "auto",
                        "bottom": "auto",
                        "right": "auto",
                        "top": "auto"
                    }
                },
                "chart": {
                    "renderTo": "container"
                },
                "credits": {
                    "enabled": false
                }

            };

            var chart1 = new Highcharts.Chart(options1);
        }

        // Load the charts when the webpage loads for the first time
        $(document).ready(function () {
            loadCharts();
        });
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:59:13.767

它适用于静态数据，因为计数是 int

```
["html",158] 
```

它不适用于动态数据，因为它返回一个字符串计数

```
{"skill":"html","count":"158"} 
```

注意到第二个代码行周围的双引号了吗？在将字符串传递给 highcharts 之前，您需要将字符串转换为 php 或 javascript 中的 int

还有一件事，如果你运行代码 highcharts 应该会报错

```
Uncaught Highcharts error #14: www.highcharts.com/errors/14 
```

如果您访问该链接，它基本上说的是关于字符串的相同内容。

代码还有一个问题

```
[["html",158],["css",134]] 
```

正如您在此处看到的，我们有一个数组数组，当我们使用字符串到 int 解析运行您的代码时，我们得到

```
["html", 158, "css", 134] 
```

注意到问题了吗？我们有一个由四个元素组成的数组。你需要做的是：

```
result.push([entry.skill, entry.count]); 
```

将一个包含两个元素的数组推送到结果变量，不要忘记 count 必须是 int

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T08:54:02.393

试试这个，

```
result.push([entry.skill, parseInt(entry.count)]); 
```

# vba - 默认情况下如何在 Outlook 中放置边框圆形图像

> ID：12420268
> 
> 赞同：10
> 
> 时间：2012-09-14T07:53:58.197
> 
> 标签：vba, outlook

这是困扰我数月甚至数年的事情。当我将图像粘贴到 Outlook 电子邮件中时，它没有边框。我可以通过右键单击图片并选择**Format Picture**来添加这些，并且可能也有一个工具可以做到这一点。我的问题是：有没有办法确保所有粘贴的图像都有边框？如果 Outlook 有 CSS 样式表，我可以在这里做；或者也许在某个地方有一个设置？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T14:24:53.633

我有一个 Word 2010 宏，它为图像添加边框并将它们居中：

```
Sub AddBlueBorderAndCenterImages()
    Dim oIshp As InlineShape
    Dim oshp As Shape

    For Each oIshp In ActiveDocument.InlineShapes 'in line with text
        With oIshp.Borders
            .OutsideLineStyle = wdLineStyleSingle
            .OutsideLineWidth = wdLineWidth025pt
            .OutsideColor = RGB(0, 112, 192)
        End With
        oIshp.Select
        Selection.ParagraphFormat.Alignment = wdAlignParagraphCenter
    Next oIshp

    For Each oshp In ActiveDocument.Shapes 'floating with text wraped around
        With oshp.Line
            .Style = msoLineSingle
            .Weight = 0.25
            .ForeColor.RGB = RGB(0, 112, 192)
        End With
    Next oshp

    Selection.HomeKey Unit:=wdStory 'go back to top of doc
End Sub 
```

我已经尝试将其调整为 Outlook，主要是尝试从 Outlook 项目获取 Word 的 ActiveDocument。

所以这里是 Outlook 版本（没有任何居中）：

```
Sub AddBlueBorders()
    Set insp = Application.ActiveInspector
    If insp.CurrentItem.Class = olMail Then
        Set mail = insp.CurrentItem
        If insp.EditorType = olEditorWord Then
            Set wordActiveDocument = mail.GetInspector.WordEditor

            For Each oIshp In wordActiveDocument.InlineShapes 'in line with text
                With oIshp.Borders
                    .OutsideLineStyle = wdLineStyleSingle
                    '.OutsideLineWidth = wdLineWidth025pt ' error: one of the values passed to this method or property is out of range
                    .OutsideColor = RGB(0, 112, 192)
                End With
            Next oIshp

            For Each oshp In wordActiveDocument.Shapes 'floating with text wraped around
                With oshp.Line
                    .Style = msoLineSingle
                    .Weight = 0.25
                    .ForeColor.RGB = RGB(0, 112, 192)
                End With
            Next oshp

        'ElseIf insp.EditorType = olEditorHTML Then
        'Something else here, maybe using css?

        End If
    End If
End Sub 
```

出于某种原因，这不会为我签名中的公司徽标添加边框，可能是因为它位于页脚或其他文档部分。

这不是默认设置，也不会在将图像粘贴/添加到电子邮件时自动为图像添加边框。您仍然必须将此宏与按钮或快捷键相关联。但希望它会有所帮助，即使是 4 个月后。

灵感来自[http://en.allexperts.com/q/Microsoft-Word-1058/Word-resize-pictures.htm](http://en.allexperts.com/q/Microsoft-Word-1058/Word-resize-pictures.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T14:37:09.783

您可以考虑提供一个 VBA 宏（加上它的快捷键）。不确定这对图像边框是如何工作的，但对于在电子邮件文本中*选择的，这是一个简单的示例：*

```
Sub ChangeSelectedExample()
    Set insp = Application.ActiveInspector
    If insp.CurrentItem.Class = olMail Then
        Set mail = insp.CurrentItem
        If insp.EditorType = olEditorHTML Then
            txt = ActiveInspector.HTMLEditor.Selection.CreateRange.Text
                  ActiveInspector.HTMLEditor.Selection.CreateRange.Text = txt & "<hello world 1>"
        ElseIf insp.EditorType = olEditorWord Then
            txt = insp.CurrentItem.GetInspector.WordEditor.Application.Selection.Text
                  insp.CurrentItem.GetInspector.WordEditor.Application.Selection = txt & "<hello world 2>"
        Else
            MsgBox ("not supported mail format")
        End If
    Else
        MsgBox ("not supported view type")
    End If
End Sub 
```

# c - 如果语句不起作用？

> ID：12420269
> 
> 赞同：0
> 
> 时间：2012-09-14T07:54:03.337
> 
> 标签：c

wordCur 是一个大写字母的字符串，dictionary 是一个字符串数组，无论我在 wordCur 中输入什么，总是返回 0。

编辑：我稍微更新了代码，并为某些上下文添加了程序其余部分的删节版本。如此处所示，它只是在到达 checkValid 时崩溃

```
int main() {
    FILE *ifp;
    ifp = fopen("dictionary.txt", "r");
    int* lDist[26];
    int* lUsed[26];
    int dictLen;
    int i;
    fscanf(ifp, "%d", &dictLen);
    char dictionary[dictLen][7];
    char* letters[7];
    int scoreCur = 0;
    int scoreHi = 0;
    char wordCur[7];
    char wordHi[7];
    int isWord = 0;

//reads the dictionary into the array
for (i = 0; i < dictLen; i++) {
    fscanf(ifp, "%s", &dictionary[i]);
}
    scanf("%s", wordCur);
    isWord = checkValid(wordCur, dictLen, dictionary);
    if (isWord == 1) {
        scoreCur = calcScore(wordCur);
    }

//fclose(ifp); not sure why, but this causes a crash
return 0;
}

int checkValid (char *wordCur,int dictLen, char dictionary[dictLen]) {
    int valid = 0;
    int i;

    for (i = 0; i < dictLen; i++){
    int helper = strcmp(wordCur, dictionary[i]);
    if (helper = 0){
        valid = 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:58:45.887

> wordCur 是一串大写字母

```
int checkValid (char wordCur,int dictLen, char dictionary[dictLen]) 
```

不，`wordCur`是单个字符。不是字符串。C 中的字符串表示为一个字符数组，以一个值为 0 的字符终止。您需要一个指针参数`char *wordCur`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:57:00.090

*wordCur 是一个大写字母的字符串，dictionary 是一个字符串数组*

试试这个：

```
int checkValid (const char *wordCur,int dictLen, const char *dictionary[]) 
```

顺便说一句，即使你找到了你要找的东西，你也会继续搜索，而且对于字符串来说，comaprison 是错误的。我建议：

```
for (i = 0; i < dictLen; i++){  
    if (strcmp(wordCur, dictionary[i]) == 0){  
        valid = 1;  
        break;
    }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:06:19.213

您的代码应该看起来更像这样：

```
int checkValid(const char *wordCur,       // word to search for (string)
               int dictLen,               // no of entries in dictionary
               char dictionary[][7])      // dictionary (array of strings)
{
    int valid = 0;
    int i;
    for (i = 0; i < dictLen; i++)
    {
        if (strcmp(wordCur, dictionary[i]) == 0)
        {
            valid = 1;
            break;
        }
    }
    return valid;
} 
```

# java - 使用 UIManager 的 TitledBorder 边框颜色和宽度

> ID：12420274
> 
> 赞同：4
> 
> 时间：2012-09-14T07:54:41.177
> 
> 标签：java, swing, border, uimanager

要更改所有 TitledBorder 字体，我使用 UIManager：

```
UIManager.put("TitledBorder.font", new Font("Tahoma", Font.BOLD, 11)); 
```

但是要放置什么`TitledBorder.border`属性来仅更改边框的颜色（甚至可能是宽度）？

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T14:33:17.513

就像使用一次`UIManager`更改所有`TitledBorder`字体一样，更改`TitledBorder`边框使用此功能：

```
UIManager.put("TitledBorder.border", new LineBorder(new Color(200,200,200), 1)); 
```

它会将边框属性更改（设置）为传入第二个参数的边框对象。所有边框类型（甚至工厂类）的描述都可以在这里找到：http: [//docs.oracle.com/javase/tutorial/uiswing/components/border.html](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html)

`LineBorder`正如您所要求的那样，此示例在构造函数中传递了采用颜色和宽度的对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T12:10:26.243

好吧，您始终可以在 TitledBorder 本身中指定任何属性。这是一个完全自定义的 Swing TitledBorder 示例：

```
public static void main ( String[] args )
{
    LineBorder border = new LineBorder ( Color.RED, 3, true );
    TitledBorder tborder = new TitledBorder ( border, "Titled border", TitledBorder.CENTER,
            TitledBorder.DEFAULT_POSITION, new Font ( "Arial", Font.BOLD, 14 ), Color.BLUE );

    JFrame frame = new JFrame ();

    JLabel label = new JLabel ( "Some content label" );
    label.setBorder ( BorderFactory
            .createCompoundBorder ( BorderFactory.createEmptyBorder ( 50, 50, 50, 50 ),
                    BorderFactory.createCompoundBorder ( tborder,
                            BorderFactory.createEmptyBorder ( 15, 15, 15, 15 ) ) ) );
    frame.add ( label );

    frame.pack ();
    frame.setLocationRelativeTo ( null );
    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.setVisible ( true );
} 
```

# c# - 组合框显示 namespace.ViewModel

> ID：12420277
> 
> 赞同：2
> 
> 时间：2012-09-14T07:54:59.233
> 
> 标签：c#, wpf, xaml, data-binding

我有一个绑定到的组合框`ObservableCollection<CustomerViewModel>`

```
<ComboBox ItemsSource="{Binding AllCustomers}" IsEditable="True"/> 
```

如果我使用 DisplayMemberPath 属性，下拉列表和选定项会正确显示

```
<ComboBox ItemsSource="{Binding AllCustomers}" DisplayMemberPath="CustomerName" IsEditable="True"/> 
```

![在此处输入图像描述](../Images/7d36f80c7b676442aeab619827f60b7c.png)

但是如果分配了DataTemplate，则所选项目无法正确显示

```
<ComboBox ItemsSource="{Binding AllCustomers}" SelectedValue="CustomerName" IsEditable="True">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding CustomerName}"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ComboBox> 
```

![在此处输入图像描述](../Images/d2a4780cdb550133656a4cf64d77f1e7.png)

**编辑：我找到了问题，但没有找到解决方案，问题是如果 ComboBox 具有 IsEditable="True" 它会产生问题。**

* * *

**代码摘要：**

```
public class AllCustomersViewModel
{
   public ObservableCollection<CustomerViewModel> AllCustomers {get; set;}
}

public class CustomerViewModel
{
   public string CustomerName;
   public short CustomerID;
} 
```

要设置（或如何）哪个属性以正确显示选定的值/项目。

非常感谢您提前。

* * *

* * *

**实际代码**

```
public class AccountTransactionsViewModel
{
    DataRepository _repository;

    public AccountTransactionsViewModel()
    {
        _repository = new DataRepository();
        CreateAccountsViewModel();
    }

    public ObservableCollection<AccountViewModel> AllAccounts { get; set; }

    void CreateAccountsViewModel()
    {
        List<AccountViewModel> allAccounts = _repository.GetAccounts()
                                                        .Select(a => new AccountViewModel(a, _repository))
                                                        .ToList();

        AllAccounts =  new ObservableCollection<AccountViewModel>(allAccounts);            
    }
}

  public class AccountViewModel
  {
       Account _account;
       DataRepository _repository;

       public AccountViewModel(Account account, DataRepository repository)
       {
            _account = account;
            _repository = repository;
       }

       public short AccountID { get { return _account.AccountID; } set { } }
       public string AccountName { get { return _account.AccountName; } set { } }        
  } 
```

**XAML：**

```
<ComboBox Name="customerCombobox" ItemsSource="{Binding AllAccounts}" IsEditable="True">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding AccountName}"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>                     
                    </ComboBox> 
```

**编辑：**

**我找到了问题，但没有找到解决方案，问题是如果 ComboBox 具有 IsEditable="True" 它会产生问题。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T08:42:30.140

当没有可用的模板时，将显示对象类型的全名。完整的类型名称也是`ToString()`方法调用的结果。所以要么覆盖`ToString()`方法，要么调查更多关于数据模板的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:54:54.297

如果要显示所选值的某些属性，您应该使用`SelectedValuePath`. `SelectedValue`将保存`SelectedItems`您要显示的属性的值。

在不设置`SelectedValuePath`框架的情况下，框架会尝试返回整个`SelectedItem`- 在这种情况下是`AccountViewModel`实例 - 转换为字符串

```
<ComboBox Name="customerCombobox" ItemsSource="{Binding AllAccounts}" SelectedValuePath="AccountName">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding AccountName}"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>                     
                </ComboBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:26:51.110

尝试

```
<ComboBox ItemsSource="{Binding AllCustomers}" SelectedValue="CustomerName">
        <ItemsControl.ItemTemplate>
             <DataTemplate>
                 <TextBlock Text="{Binding Item.CustomerName}"/>
             </DataTemplate>
        </ItemsControl.ItemTemplate>
</ComboBox> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-26T09:42:19.257

我遇到了同样的问题，因为我想在组合框项目中显示自定义文本。当你有一个`ItemTemplate`你不能设置`DisplayMemberPath`的 ComboBox 显示类名时，你没有`toString()`实现该功能。

你只需要使用`TextSearch.TextPath`，你的问题就解决了。

```
<ComboBox IsEditable="True" TextSearch.TextPath="MySelectedTextField">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock ToolTip="{Binding MyTooltipField}">
                <Run Text="{Binding MyCustomField1}" />
                <Run Text=" - "/>
                <Run Text="{Binding MyCustomField2}" />
            </TextBlock>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

# winforms - 如何在 C# 中的文本框中隐藏插入符号？

> ID：12420280
> 
> 赞同：1
> 
> 时间：2012-09-14T07:55:18.233
> 
> 标签：winforms, c#-4.0, textbox

我已经浏览了这些链接..链接1[和](https://stackoverflow.com/questions/3730968/c-sharp-how-to-disable-cursor-in-textbox)链接[2](https://stackoverflow.com/questions/582312/how-to-hide-the-caret-in-a-richtextbox)

但是这些帖子不是很清楚。我需要从文本框中隐藏插入符号并使其无法选择。请有人帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:04:09.133

另一种选择是使文本框只读

# javascript - Dojo 不解析自定义小部件的模板 html 中的小部件声明

> ID：12420281
> 
> 赞同：1
> 
> 时间：2012-09-14T07:55:19.813
> 
> 标签：javascript, dojo

Dojo 似乎无法解析在自定义小部件的模板 html 文件中以声明方式创建的小部件。

但是当我在完成 dojo 配置的主页中以声明方式创建它时它会起作用

这是代码片段：

*主页：*

```
<html>
<head>
<script type="text/javascript">
var dojoConfig = {
            parseOnLoad: true,
            isDebug: true,
            modulePaths : {"com.cgb":"../../../client/vtm/com/cgb"}
};
</script>
<script type="text/javascript" src="../common/dojo/dojo/dojo.js"></script>
<script type="text/javascript">
    dojo.require("dojo.parser");
    dojo.require("com.cgb.modules.deposit.step1_agreement");
    dojo.require("dojox.mobile.ScrollableView");
</script>
</head>
<body>
<div data-dojo-type="com.cgb.modules.deposit.step1_agreement"></div>
</body>
</html> 
```

*自定义小部件：*

```
dojo.provide("com.cgb.modules.deposit.step1_agreement");

dojo.require("dojo.cache");
dojo.require("dijit._Widget");
dojo.require("dijit._Templated");

dojo.require("dojox.mobile.ScrollableView");

dojo.declare("com.cgb.modules.deposit.step1_agreement", [dijit._Widget, dijit._Templated], {
    templateString: dojo.cache("com.cgb.modules.deposit", "templates/step1_agreement.html"),
    postCreate:function(){
        console.log("widget get instantiated");
    }
}); 
```

*自定义小部件的模板 html：*

```
<div>
    <!--this widget didn't get parsed -->
    <div id="view1" dojoType="dojox.mobile.ScrollableView" height="50px">
        blah blahblah blah<br/>blah blahblah blah<br/>blah blahblah blah<br/>
        blah blahblah blah<br/>blah blahblah blah<br/>blah blahblah blah<br/>
        blah blahblah blah<br/>blah blahblah blah<br/>blah blahblah blah<br/>
    </div>
</div> 
```

ScrollableView 小部件没有被解析，但是当我在主页上声明它时它可以工作。我想也许我必须错过一些东西，请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T08:09:45.483

由于您使用的是 dojox.mobile，因此您的代码可能介于语法之间。

[http://dojotoolkit.org/documentation/tutorials/1.7/modules/#Defining_modules](http://dojotoolkit.org/documentation/tutorials/1.7/modules/#Defining_modules)

对于您在模板中使用小部件的未来版本，该参数`widgetsInTemplate: true`将被弃用。反过来，将 包含在`dijit._WidgetsInTemplateMixin`您的模块中。

例如; **< 1.7**

```
dojo.provide("com.cgb.modules.deposit.step1_agreement");
dojo.require("...");
dojo.declare("com.cgb.modules.deposit.step1_agreement", [dijit._Widget, dijit._Templated], {

    widgetsInTemplate: true,

    templateString: dojo.cache("com.cgb.modules.deposit", "templates/step1_agreement.html"),
    postCreate:function(){
        console.log("widget get instantiated");
    }
}); 
```

和**1.7+**（期望模块具有文件名/路径作为模块和命名空间）

```
define([ "dojo/_base/declare", "dijit/_WidgetBase", "dijit/_TemplatedMixin", 

        "dijit/_WidgetsInTemplateMixin" ], // note latter mixin

    function(declare, _WidgetBase, _TemplatedMixin, _WidgetsInTemplateMixin){
       return declare([ _WidgetBase, _TemplatedMixin, _WidgetsInTemplateMixin ], {});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:03:28.433

我在这个[SO thread](https://stackoverflow.com/questions/1131814/dijit-combobox-not-rendering-in-custom-widget?rq=1)找到了答案。

我错过**`widgetsInTemplate: true`**了我的小部件声明。

# c - 在文件的行尾追加文本纯 c 代码

> ID：12420282
> 
> 赞同：1
> 
> 时间：2012-09-14T07:55:27.337
> 
> 标签：c, file-io

我需要在文件的每一行末尾附加一个文本。我有以下代码：

```
FILE *tmp_copy = tmpfile();
file = fopen ( argv[2], "rw" );    
if ((file != NULL )) {
    char line [ 128 ]; /* or other suitable maximum line size */
    while( ( fgets ( line, sizeof line, file ) != NULL ))  {
       fputs(line, tmp_copy);
    }
    fclose ( file );

        rewind(tmp);
        char *p;
      /* Reopen file now with write permissions */
        fopen(argv[2], "w");
        while (( p = fgets(line, 1024, tmp))!=NULL) {
            //line[strlen(line)-1] = '\0'; /* Clear away newline */
            //sprintf(line, "%s %s\n", line, more);
            strcpy(line,"true");
            //fputs(line, file);
        }
fclose(file);
fclose(tmp);
            }

} 
```

我已经编辑了我的代码。仍然不工作，但它不工作。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T07:59:10.433

我猜您希望该行再次重新写入文件。但是，您没有*写入*文件，只是附加到内存中的数据。像这样同时读取和写入文件也是不可能的，你必须分两步完成：

1.  从原始文件读取，将想要的文本附加到行，并写入临时文件
2.  将临时文件重命名（或复制）为原始文件

**编辑：**我的答案的伪代码：

```
original_file = fopen(original_file_name, "r");
temporary_file_name = tmpnam("dummy");
temporary_file = fopen(temporary_file_name, "w");

while (fgets(line, original_file))
{
    remove_trailing_newline(line);
    strcat(line, " TRUE\n");
    fputs(line, temporary_file);
}

fclose(temporary_file);
fclose(original_file);

rename(temporary_file_name, original_file_name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:08:02.333

除非文件是内存映射的并且 fgets 返回一个指向原始缓冲区的指针（它没有。它需要附加空值。）并且 strcat 就地操作（它确实如此），那么你不会存储任何东西，只会搞砸一些记忆。即使它确实有效，你还是会覆盖下一行的一部分。你需要要么

*   在关闭原始文件后写入一个临时文件并重命名（如 Joachim Pileborg 所建议）。
*   写入内存中的缓冲区并在完成读取后将其保存到文件中。
*   一口气将文件读入内存，然后开始逐行读取缓冲区。

# html - 浮动内联块和非浮动块之间的布局差异

> ID：12420285
> 
> 赞同：1
> 
> 时间：2012-09-14T07:55:53.903
> 
> 标签：html, css-float, compass-sass, css

我正在尝试在容器中实现 4 个水平内联块的简单布局。

的HTML：

```
<div id="wrapper">
    <ul id="myList">
        <li><p>1</p></li>
        <li><p>2</p></li>
        <li><p>3</p></li>
        <li><p>4</p></li>        
    </ul>
</div>​ 
```

我想将 li 水平均匀地铺开。我正在使用[Compass](http://www.compass-style.org)并应用以下内容：

```
ul#mylist {
    @include reset-box-model;
    @include inline-block-list-container;
    margin: 0px auto;
    height: 180px;
    width: 640px;

    > li { 
        @include reset-box-model;
        @include inline-block-list-item(0px);
        width: 130px;
        height: 130px;
        padding: 10px;
        margin: 0px 5px;
    }
} 
```

[在 jsFiddle 上](http://jsfiddle.net/BL2Wq/7/)查看生成的HTML/CSS 代码和输出。尽管 li 的尺寸看起来很合适...

```
(130px + (2 * 5px) + (2 * 10px) = 640px)) * 4 = 640px 
```

...第四块被推到下一行。

如果我添加一个*浮点数，li 只适合水平：left;* 到 li's-在 jsFiddle 上查看[生成的 HTML/CSS 代码和输出](http://jsfiddle.net/HD5Se/4/)。

只是想知道是否有人可以解释这是怎么回事？我会认为 float: left; 既然内联块 li 的尺寸合适，就没有必要了吗？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:59:33.257

display: inline-block 将考虑任何周围的空白。因此，您的 li 元素之间的换行符会影响宽度

固定示例：http: [//jsfiddle.net/BL2Wq/8/](http://jsfiddle.net/BL2Wq/8/)

编辑：关于该问题的深入文章：[与内联块元素之间的空间作斗争](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

# android - 自定义启动器

> ID：12420286
> 
> 赞同：0
> 
> 时间：2012-09-14T07:56:03.160
> 
> 标签：android, launcher

我开发了两个 Android 启动器，想知道您是否可以通过编程方式设置默认启动器。在实践中，我不想出现在设备上启动器的初始选择对话框中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:59:09.040

这仅适用于系统应用程序。因此，除非您具有 root 访问权限，否则我认为这是不可能的

# cakephp - 如何在 cakephp 中将 pdf 文件作为附件发送？

> ID：12420289
> 
> 赞同：1
> 
> 时间：2012-09-14T07:56:07.033
> 
> 标签：cakephp, email-attachments

我使用的是 cake php 2.0 版本，单击应用程序中的调查按钮后，我需要发送 PDF 附件电子邮件吗？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:30:30.940

尝试这个：

首先，您应该确保使用 App::uses() 加载类：

```
<?php
App::uses('CakeEmail', 'Network/Email'); 
```

在您的功能/操作中：

```
$email = new CakeEmail();

$email->attachments('/full/file/path/file.pdf') 
$email->to      = 'em...@email.co.uk';
$email->subject = 'Something';
$email->replyTo = $client['Client']['email'];
$email->from    = $client['Client']['email'];
$email->emailFormat = 'html';

if($email->send()){
  die('Email Sent!');
}else{
  die('Failed to send email');
} 
```

# grails - 如何在 grails 2.1 的运行应用程序期间使内联插件的依赖项可用？

> ID：12420291
> 
> 赞同：2
> 
> 时间：2012-09-14T07:56:09.407
> 
> 标签：grails, plugins, build

我已经将我的应用程序修改为一个 grails 插件，我将把它包含在特定于客户端的应用程序中并自定义一些零碎的东西。为了测试整个事情，我将插件作为内联插件包含在`BuildConfig`测试应用程序[使用 grails 命令行创建的裸应用程序] 中。

```
grails.plugin.location."engine-plugin"="../../engine-plugin" 
```

我没有安装插件本身，我没有`plugins`在我的应用程序的 BuildConfig 的一部分中添加任何东西。

现在，在`BuildConfig`插件中，我已经在我的引擎中包含了我需要的所有插件：

```
 compile (
            ":asynchronous-mail:0.6",
            ":famfamfam:1.0.1",
            ":google-visualization:0.5.3",
            ":gsp-arse:1.3",
            ":jquery:1.8.0",
            ":jquery-ui:1.8.15",
            ":mail:1.0",
            ":navigation:1.3.2",
            ":prototype:1.0",
            ":quartz2:0.2.3",
            ":rendering:0.4.3",
            ":spring-security-core:1.2.7.3",
            ":spring-security-ui:0.2"
    ) 
```

不幸的是，当我`grails run-app`在我的测试应用程序中运行时，它无法解析某些类：

```
4: unable to resolve class grails.plugins.springsecurity.Secured
 @ line 4, column 1.
   import grails.plugins.springsecurity.Secured
   ^ 
```

显然，这是因为我的应用程序看不到`spring-security-core`它的依赖项。

我尝试将插件中的范围`BuildConfig`从编译更改为构建，但这没有任何改变。我试过添加`export=true`它 - 没有。

有关如何进行此操作的任何提示？

谢谢

编辑：使用打包插件而不是内联时出现相同的错误：/

# php - 隔离特定节点和祖先

> ID：12420294
> 
> 赞同：2
> 
> 时间：2012-09-14T07:56:12.007
> 
> 标签：php, xml, xslt

我有一个像这样的 XML：

```
<menu>
    <node id="home" url="url1.php">
          <label>Homepage</label>
          <node id="user" url="url2.php"><label>User profile</label></node>
          <node id="help" url="url3.php"><label>Help page</label></node>
     ...
    </node>
</menu> 
```

它用于生成菜单，XML 具有`node`嵌套在第一个“home”下的任何级别的标签`node`。我传递了一个`$id`用 PHP 调用的参数，它给出了当前活动的菜单项。

（这`<label>`是在一个单独的标签中，而不是作为属性，因为我有很多本地化标签，实际的 xml 就像`<label lang='en'>...</label><label lang='it'>...</label>`）

这个想法是使用各种 XSL 来生成主菜单、面包屑、部分标题（顶部菜单）。对于主菜单，我设法做到了：

```
<xsl:template match="menu">
     <xsl:apply-templates select="node" />
</xsl:template>

<xsl:template match="//node">
    <ul>
        <li>
            <a>
               <xsl:if test="@id=$id">
                  <xsl:attribute name='class'>active</xsl:attribute>
               </xsl:if>
               <xsl:attribute name='href'>
                  <xsl:value-of select="@url" />
               </xsl:attribute>
               <xsl:value-of select="label"/>
            </a>
            <xsl:if test="count(child::*)>0">
               <xsl:apply-templates select="node" />
            </xsl:if>
        </li>
    </ul>
    </xsl:template>
</xsl:stylesheet> 
```

它有效。但我被面包屑困住了。如何仅将特定节点与`@id=$id`他的祖先隔离，以从主页构建到当前页面的面包屑？

对于节点广告，生成的 html 应该是第三个嵌套级别：

```
<ul>
    <li><a href="url1.php">Home</a></li>
    <li><a href="urla.php">Some child of home</a></li>
    <li><a href="urlb.php">Some grandchild of home</a></li>
    <li><a class='active' href="urlc.php">Current page which is child of the above</a></li>
</url> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:31:09.053

您可以这样做的面包屑，通过选择活动节点然后遍历祖先，如下所示：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" version="1.0" indent="yes"/>

    <xsl:template match="/">
        <!--Obviously set your PHP variable here-->
        <xsl:variable name="id">bananas</xsl:variable>
        <!--Find this node somewhere in the tree-->
        <xsl:apply-templates select=".//node[@id=$id]"/>
    </xsl:template>

    <xsl:template match="node">
        <!--Walk the ancestors-->
        <xsl:for-each select="ancestor-or-self::node">
        <!--Snappy path separator here-->
            <xsl:text> --> </xsl:text>
            <a>
                <xsl:attribute name="href">
                    <xsl:value-of select="@url" />
                </xsl:attribute>
                <xsl:value-of select="label/text()"/>
            </a>
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

示例菜单 XML：

```
<menu>
    <node id="home" url="url1.php">
          <label>Homepage</label>
          <node id="user" url="url2.php"><label>User profile</label></node>
          <node id="help" url="url3.php"><label>Help page</label></node>
    </node>
    <node id="products" url="urlN1.php">
        <label>Products</label>
        <node id="food" url="urlN2.php">
            <label>Food</label>
            <node id="fruit" url="urlN3.php">
                <label>Fruit</label>
                <node id="bananas" url="urlN4.php">
                    <label>Bananas</label>
                </node>
            </node>
            <node id="clothes" url="urlN3.php">
                <label>Clothes</label>
                <node id="shirts" url="urlN4.php">
                    <label>Shirts</label>
                </node>
            </node>
        </node>
    </node>
</menu> 
```

**编辑**更新 - 您已更新 Q 以将面包屑显示为列表 - 这是一个更新的模板以防万一:)

```
<xsl:template match="node">
    <ul>
        <!--Walk the ancestors-->
        <xsl:for-each select="ancestor-or-self::node">
            <li>
                <a>
                    <xsl:attribute name="href">
                        <xsl:value-of select="@url" />
                    </xsl:attribute>
                    <xsl:value-of select="label/text()"/>
                </a>
            </li>
        </xsl:for-each>
    </ul>
</xsl:template> 
```

# jquery - JQUERY 图像淡入

> ID：12420295
> 
> 赞同：0
> 
> 时间：2012-09-14T07:56:21.183
> 
> 标签：jquery

它本来应该很简单，但是经过一整天的工作，我就是想不通。我有两个问题，第一，有没有更好的方法（我确定有），第二，使用提供的代码，我如何让它循环以再次从脚本的开头开始。任何帮助将非常感激。

它基本上有一个顶部文本区域，可以旋转，几秒钟后，副标题会淡出，然后两者都会一起淡出，然后是不同的文本，但处理方式相同。

请在下面找到小提琴链接，没有工作图像，对不起，它没有被托管，我不记得我的 FTP 详细信息。

[http://jsfiddle.net/mZ6uy/](http://jsfiddle.net/mZ6uy/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:16:53.827

我只是在 jsfiddle [http://jsfiddle.net/mZ6uy/2](http://jsfiddle.net/mZ6uy/2)中快速发布 这不是最好的，但它回答了您的两个问题。

# string - 如何删除两个字符串之间的冗余匹配？

> ID：12420296
> 
> 赞同：1
> 
> 时间：2012-09-14T07:56:20.747
> 
> 标签：string, algorithm, match

给定两个字符串 str1 和 str2，我有一个匹配列表，将共享子字符串描述为 [str1_beg, str1_end, str2_beg, str2_end] 形式的间隔。我想删除冗余匹配，其中 str1_beg、str1_end 和 str2_beg、str2_end 从匹配中嵌入到其他匹配中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:26:33.800

首先，您可以更有效地存储匹配项。

```
[str_beg,str2_beg,match_len] 
```

这也将使检查冗余变得非常容易，例如

```
for match in matches:
  for i in xrange(len(matches)):
    if matches[i][:2] == match[:2] and mathches[i][2] < match[2]:
      del matches[i] 
```

我假设您的匹配列表被分配给一个名为匹配的变量，并且具有我上面提出的结构，所以 ma. 我使用的是 < 运算符而不是 <= 运算符，因为在它们相等的情况下，它们是完全相同的匹配，我假设您不会有两次相同的匹配。在我检查两个 matche 的 [:2] 切片的地方，我检查了它们列表的前 2 个元素，它们是起始位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:19:33.453

对于每个 [beg_index, end_index] 找到 [beg_index_new, end_index_new] 并删除满足 end_index < end_index_new 和 beg_index >= beg_index_new 的那些。

那是 O(n^2)

# android - 使用片段时看不到 gridview 内容

> ID：12420297
> 
> 赞同：0
> 
> 时间：2012-09-14T07:56:31.040
> 
> 标签：android

这很重要：使用选项卡式活动（已弃用）在我的代码中一切正常，只有当我使用片段时才会出现这个问题。我有三个选项卡，每个选项卡都是一个片段。每个选项卡的布局都相同：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<GridView android:id="@+id/newsView"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:verticalSpacing="2dp"
    android:numColumns="auto_fit"
    android:gravity="center"
    android:columnWidth="100dp"
    android:layout_marginTop="4dp"
    android:layout_marginBottom="4dp"
    android:layout_weight="1"/>

 </LinearLayout> 
```

区别在于游标加载器的查询。实际上，每个片段都实现了 LaderCallbacks：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if(container == null)
        return null;

    View v = inflater.inflate(R.layout.activity_grid, container,false);
    dataSource = new MyCursorAdapter(getActivity().getApplicationContext(), null);
    GridView grid = (GridView)v.findViewById(R.id.newsView);
    grid.setAdapter(dataSource);
   getActivity().getSupportLoaderManager().initLoader(LOADER_ID, null, this);

    return v; 
```

对于其余的代码（例如光标查询），我 100% 确定，因为它在切换到片段之前有效。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T10:39:32.397

解决了......这只是另一个编程错误，发布的代码没有错......对不起！

# python - ipdb 在 vi m 控制台中不起作用

> ID：12420299
> 
> 赞同：2
> 
> 时间：2012-09-14T07:56:37.150
> 
> 标签：python, vim, pdb

ipdb 在 shell 中工作正常，但我想在 vim 下调试，在我设置之后`ipdb.set_trace()`，然后`!python %`，下面的控制台给了我[这个凌乱的提示](https://twitter.com/yozloy/statuses/246517294665175040)，你知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:18:00.293

我猜你正在使用 GUI Vim。虚拟机？麦克维姆？您在执行外部工具时获得的伪终端不是，从来没有并且可能永远无法理解您看到的转义字符。这意味着*没有颜色*和*ncurses 样式的小部件*。

您最好在单独的终端中运行它，或者找到一种在 iPython 中禁用颜色的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:17:56.370

如果您真的不想像@romainl 建议的那样修补 vim 以及在单独的终端中运行，那么有一个[Conque](http://www.vim.org/scripts/script.php?script_id=2771)插件，它提供了一种在 vim 缓冲区中具有彩色伪终端的方法。你必须跑

```
ConqueTerm(|[V]Split|Tab) sh 
```

并在其中运行

```
python path/to/file.py 
```

（`%`不可能）虽然。它可以缩小到一个映射：

```
nnoremap <expr> ,p ":\<C-u>ConqueTermVSplit sh\n\<C-o>:call feedkeys('python '.shellescape(bufname(".bufnr("%").")).\"\\n\")\n" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T08:42:05.043

对于 Windows 用户，我建议使用[ConEmu](https://code.google.com/p/conemu-maximus5/ "动车组")。与 ipdb 完美配合（突出显示，自动完成，...）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T18:32:35.697

我为此创建了自己的解决方法，这可能对您很有价值，具体取决于您使用 ipdb 的方式。这个想法是你可以传入`no_colors=True`，`set_trace()`这样交互式调试器就不会产生任何颜色输出。我也为`launch_ipdb_on_exception`.

这意味着您可以执行以下操作：

```
import ipdb
ipdb.set_trace(no_colors=True) 
```

并且输出在 MacVim 中看起来不错。

要使用它，您必须使用我的版本`ipdb`，即[此处](https://github.com/leifdenby/ipdb)，如果您想查看我所做的实际相关提交，请在[此处](https://github.com/leifdenby/ipdb/commit/e29928683e8f414543a251cf8fabab3d6c745b7c#ipdb/__main__.py)。

事实证明，这`ipdb`只是一种方便的访问方式[`ipython.core.debugger`](http://ipython.org/ipython-doc/dev/api/generated/IPython.core.debugger.html)，`Pdb`实际的调试器是在那里定义的。

# google-apps-script - GAS：GUI Builder、文件上传、提交按钮

> ID：12420300
> 
> 赞同：0
> 
> 时间：2012-09-14T07:56:37.980
> 
> 标签：google-apps-script

我已经在 stackoverflow 上阅读了这个问题的一些答案，但我无法让我的案例正常工作。

我在 GUI Builder 中有组件，并且在按下提交按钮后代码运行以响应响应提交，但文件名未定义。fileName 是组件 File Upload 中 Input Fields 中 Name 的内容。任何想法有什么问题？

```
function respondToSubmit(e) {

  var app = UiApp.getActiveApplication();

  var fileBlob = e.parameter.fileName;

  throw(fileBlob); // fileBlob = undefined!!!

  return app;

} 
```

![在此处输入图像描述](../Images/9a06b67728c794d2bd1f1bc17cc47074.png)

**最近的代码：**

函数doPost(e) {

throw("doPost"); // 从未抛出，因此代码不会在这里运行！

var app = UiApp.getActiveApplication();

var fileBlob = e.parameter.FileUpload1;

返回应用程序；

}

![在此处输入图像描述](../Images/5c619ea2094283df3f2646faec7d0c12.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:57:10.007

我认为您必须将您的标签、文本框和提交按钮都放在一个流程面板中，然后必须将其封装在一个表单面板中。我遇到了同样的问题，甚至是“意外错误”。我通过将所有这些元素放入流面板来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:58:33.847

有两种类型的按钮 - 一种是常规按钮，另一种是提交按钮（只能放置在表单面板上）

1.  确保您使用的是提交按钮而不是常规按钮

2.  当您使用提交按钮时，无需提供处理函数。提交按钮，默认情况下由一个名为 doPost(e) 的特殊函数处理。因此，编写一个 doPost 函数，您将能够使用文件名参数。

FileUpload 小部件文档有一个很好的例子来说明这是如何完成的。

# php - 从每日电子邮件更新网站

> ID：12420302
> 
> 赞同：1
> 
> 时间：2012-09-14T07:56:53.957
> 
> 标签：php, html-email

忍受我，这听起来像是一件随意的事情，但这里有......

我每天都会收到一封来自我的供应商的电子邮件（HTML 格式），它始终采用相同的布局/格式。有什么方法可以让我“挖掘”到这封电子邮件并基本上循环遍历每一行，自动将记录添加到数据库中。

我认为这样做的唯一方法是手动复制 HTML 并通过执行此操作的脚本运行它，但想先在这里检查人才。也许是一个我从未知道存在的惊人软件......如果可能的话，想要消除任何类型的手工工作。

欢迎任何建议。

编辑：也许我的问题更像是“我如何从我的邮件客户端中自动针对电子邮件运行脚本？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:59:31.253

编写脚本，使用 POP3 或 IMAP 邮件协议从您的邮箱中获取邮件（最好将它们接收到单独的邮箱）。根据需要解析它（也许可以尝试`mailparse`扩展）。处理你喜欢的方式。然后设置 cron 以特定频率（例如每天一次）启动您的脚本。

# c# - 读取使用 FileUpload Control 上传的 Excel 文件，而不将其保存在服务器上

> ID：12420310
> 
> 赞同：27
> 
> 时间：2012-09-14T07:57:29.680
> 
> 标签：c#, .net, vb.net, excel, file-upload

需要能够读取在 ASP.NET 中使用 FileUploadControl 上传的 Excel 文件。该解决方案将托管在服务器上。我不想将 Excel 文件存储在服务器上。**我想直接将excel内容转换为数据集或数据表并使用。**

以下是我已经找到但对我不起作用的两个解决方案。

1.  LINQTOEXCEL - 当您在本地计算机上有一个 excel 文件并且您在本地计算机上运行代码时，此方法有效。在我的例子中，用户正在尝试使用托管在服务器上的网页从他的本地机器上传一个 excel 文件。

2.  ExcelDataReader - 我目前正在使用这个，但这是第三方工具。我不能把它转给我们的客户。此外，如果行/列交叉点带有公式，则不会将该行/列交叉点的数据读入数据集中。

当 excel 和 .NET 解决方案都在同一台机器上时，我在 google 和 StackOverflow 上找到的大多数建议都有效。但是在我的情况下，当解决方案托管在服务器上并且用户尝试使用本地计算机上的托管网页上传 excel 时，我需要它来工作。如果您有任何其他建议，可以告诉我吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-14T08:05:05.107

您可以使用 的[`InputStream`](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.inputstream.aspx)属性`HttpPostedFile`将文件读入内存。

这是一个示例，它显示了如何`DataTable`从using创建`IO.Stream`一个：`HttpPostedFile`**[`EPPlus`](http://epplus.codeplex.com/workitem/list/basic)**

```
protected void UploadButton_Click(Object sender, EventArgs e)
{
    if (FileUpload1.HasFile && Path.GetExtension(FileUpload1.FileName) == ".xlsx")
    {
        using (var excel = new ExcelPackage(FileUpload1.PostedFile.InputStream))
        {
            var tbl = new DataTable();
            var ws = excel.Workbook.Worksheets.First();
            var hasHeader = true;  // adjust accordingly
            // add DataColumns to DataTable
            foreach (var firstRowCell in ws.Cells[1, 1, 1, ws.Dimension.End.Column])
                tbl.Columns.Add(hasHeader ? firstRowCell.Text
                    : String.Format("Column {0}", firstRowCell.Start.Column));

            // add DataRows to DataTable
            int startRow = hasHeader ? 2 : 1;
            for (int rowNum = startRow; rowNum <= ws.Dimension.End.Row; rowNum++)
            {
                var wsRow = ws.Cells[rowNum, 1, rowNum, ws.Dimension.End.Column];
                DataRow row = tbl.NewRow();
                foreach (var cell in wsRow)
                    row[cell.Start.Column - 1] = cell.Text;
                tbl.Rows.Add(row);
            }
            var msg = String.Format("DataTable successfully created from excel-file. Colum-count:{0} Row-count:{1}",
                                    tbl.Columns.Count, tbl.Rows.Count);
            UploadStatusLabel.Text = msg;
        }
    }
    else 
    {
        UploadStatusLabel.Text = "You did not specify a file to upload.";
    }
} 
```

这是**VB.NET 版本**：

```
Sub UploadButton_Click(ByVal sender As Object, ByVal e As System.EventArgs)
    If (FileUpload1.HasFile AndAlso IO.Path.GetExtension(FileUpload1.FileName) = ".xlsx") Then
        Using excel = New ExcelPackage(FileUpload1.PostedFile.InputStream)
            Dim tbl = New DataTable()
            Dim ws = excel.Workbook.Worksheets.First()
            Dim hasHeader = True ' change it if required '
            ' create DataColumns '
            For Each firstRowCell In ws.Cells(1, 1, 1, ws.Dimension.End.Column)
                tbl.Columns.Add(If(hasHeader,
                                   firstRowCell.Text,
                                   String.Format("Column {0}", firstRowCell.Start.Column)))
            Next
            ' add rows to DataTable '
            Dim startRow = If(hasHeader, 2, 1)
            For rowNum = startRow To ws.Dimension.End.Row
                Dim wsRow = ws.Cells(rowNum, 1, rowNum, ws.Dimension.End.Column)
                Dim row = tbl.NewRow()
                For Each cell In wsRow
                    row(cell.Start.Column - 1) = cell.Text
                Next
                tbl.Rows.Add(row)
            Next
            Dim msg = String.Format("DataTable successfully created from excel-file Colum-count:{0} Row-count:{1}",
                                    tbl.Columns.Count, tbl.Rows.Count)
            UploadStatusLabel.Text = msg
        End Using
    Else
        UploadStatusLabel.Text = "You did not specify an excel-file to upload."
    End If
End Sub 
```

为了完整起见，这里是aspx：

```
<div>
   <h4>Select a file to upload:</h4>

   <asp:FileUpload id="FileUpload1"                 
       runat="server">
   </asp:FileUpload>

   <br /><br />

   <asp:Button id="UploadButton" 
       Text="Upload file"
       OnClick="UploadButton_Click"
       runat="server">
   </asp:Button>    

   <hr />

   <asp:Label id="UploadStatusLabel"
       runat="server">
   </asp:Label>        
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T06:22:39.160

```
//Best Way To read file direct from stream
IExcelDataReader excelReader = null;
//file.InputStream is the file stream stored in memeory by any ways like by upload file control or from database
int excelFlag = 1; //this flag us used for execl file format .xls or .xlsx
if (excelFlag == 1)
{
    //1\. Reading from a binary Excel file ('97-2003 format; *.xls)
    excelReader = ExcelReaderFactory.CreateBinaryReader(file.InputStream);
}
else if(excelFlag == 2)                                
{
    //2\. Reading from a OpenXml Excel file (2007 format; *.xlsx)
    excelReader = ExcelReaderFactory.CreateOpenXmlReader(file.InputStream);
}

if (excelReader != null)
{
    //...
    //3\. DataSet - The result of each spreadsheet will be created in the result.Tables
    ds = excelReader.AsDataSet();
    //...
    ////4\. DataSet - Create column names from first row
    //excelReader.IsFirstRowAsColumnNames = true;
    //DataSet result = excelReader.AsDataSet();

    ////5\. Data Reader methods
    //while (excelReader.Read())
    //{
    //    //excelReader.GetInt32(0);
    //}

    //6\. Free resources (IExcelDataReader is IDisposable)
    excelReader.Close();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-29T19:39:46.970

这是使用 ClosedXML.Excel 在 MVC 中执行此操作的方法。我知道这个答案为时已晚。我只是想为所有在谷歌搜索问题后登陆此页面的人提供这个答案。在 Visual Studio 中单击工具菜单并展开 NuGet 包管理器，然后运行包管理器控制台。键入以下命令：

```
Install-Package ClosedXML 
```

该模型：

```
namespace ExcelUploadFileDemo.Models
    {
        public class UploadFile
        {
            [Required]
            public HttpPostedFileBase ExcelFile { get; set; }
        }
    } 
```

控制器：

```
namespace ExcelUploadFileDemo.Controllers
    {
        public class HomeController : Controller
        {
            public ActionResult Index()
            {
                UploadFile UploadFile = new UploadFile();
                return View(UploadFile);
            }

            [HttpPost]
            public ActionResult Index(UploadFile UploadFile)
            {
                if (ModelState.IsValid)
                {

                    if (UploadFile.ExcelFile.ContentLength > 0)
                    {
                        if (UploadFile.ExcelFile.FileName.EndsWith(".xlsx") || UploadFile.ExcelFile.FileName.EndsWith(".xls"))
                        {
                            XLWorkbook Workbook;
                            Try//incase if the file is corrupt
                            {
                                Workbook = new XLWorkbook(UploadFile.ExcelFile.InputStream);
                            }
                            catch (Exception ex)
                            {
                                ModelState.AddModelError(String.Empty, $"Check your file. {ex.Message}");
                                return View();
                            }
                            IXLWorksheet WorkSheet = null;
                            Try//incase if the sheet you are looking for is not found
                            {
                                WorkSheet = Workbook.Worksheet("sheet1");

                            }
                            catch
                            {
                                ModelState.AddModelError(String.Empty, "sheet1 not found!");
                                return View();
                            }
                            WorkSheet.FirstRow().Delete();//if you want to remove ist row

                            foreach (var row in WorkSheet.RowsUsed())
                            {
                                //do something here
                                row.Cell(1).Value.ToString();//Get ist cell. 1 represent column number

                            }
                        }
                        else
                        {
                            ModelState.AddModelError(String.Empty, "Only .xlsx and .xls files are allowed");
                            return View();
                        }
                    }
                    else
                    {
                        ModelState.AddModelError(String.Empty, "Not a valid file");
                        return View();
                    }
                }
                return View();
            }
        }
    } 
```

此链接有许多示例，显示了处理各种 excel 内容的不同方法。

[https://github.com/ClosedXML/ClosedXML/tree/9ac4d868a313f308b82e94617b9cc2d28baeb1c3/ClosedXML](https://github.com/ClosedXML/ClosedXML/tree/9ac4d868a313f308b82e94617b9cc2d28baeb1c3/ClosedXML)

风景

```
@model ExcelUploadFileDemo.Models.UploadFile

@{
    ViewBag.Title = "Upload Excel File";
}
<h2>Upload an Excel File</h2>

@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{

    <div class="form-horizontal">
        @Html.ValidationSummary("", new { @class = "text-danger" });
        <div class="form-group">
            @Html.LabelFor(model => model.ExcelFile, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.ExcelFile, new { type = "file", @class = "form-control" })
                @Html.ValidationMessageFor(model => model.ExcelFile, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type = "submit" value="Submit" class="btn btn-default" />
            </div>
        </div>
  </div>
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T08:06:42.010

也许你可以看看[Koogra](http://sourceforge.net/projects/koogra/)这是一个开源的 excel 阅读器（只读没有作家）我想你会从客户端得到一个流。然后你可以像现在一样做所有的事情从内存流中读取并写入数据库。

我希望这有帮助。

# jsp - 在 JSP 中单击时，如何在弹出窗口中使用 Excel 打开 csv 文件

> ID：12420312
> 
> 赞同：0
> 
> 时间：2012-09-14T07:57:33.050
> 
> 标签：jsp

在单击链接时，我想在 Excel 中打开一个 csv 文件。截至目前，它在浏览器本身中为我打开，并且无法返回。我想使用 Excel 在弹出窗口中打开它。

```
<a href="${pageContext.request.contextPath}/templates/CSV_Template.csv">
    Click here for csv template 
```

如何做到这一点？这可以仅使用 javascript 在 JSP 中完成吗？

我在 href 中添加了 target="_blank"。但没有运气。它仍在浏览器中打开。我的意思是它确实在新标签中打开。但我不希望那样。我想在excel弹出窗口中打开它。

请就此提出您的建议。我有实现此功能的业务需求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:13:58.183

如果您正在使用，`<a href="...>`则添加该属性`target="_blank"`，它将在单独的窗口中下载。

例如：

```
<a href="http://www.mydownloads.com/get_csv.jsp" target="_blank">download CSV</a> 
```

**更新：**

既然您说您尝试过`_blank`并且遇到了问题，您可以重定向到另一个 JSP，该 JSP 的开头将包含以下几行（在您输出 CSV 内容之前）：

```
response.setHeader("Content-disposition:", "attachment; filename=mycsvfilename.csv;");
response.setHeader("Authorization", utils.getSafeHeader(request, "Authorization", null));
response.setContentType("application/vnd.ms-excel");
response.setCharacterEncoding("UTF-8"); 
```

# invoke - 如何动态调用 Vala 方法？

> ID：12420313
> 
> 赞同：0
> 
> 时间：2012-09-14T07:57:39.200
> 
> 标签：invoke, vala

我需要生成函数名然后调用它。是否可以在 php 中做类似的事情 `<?php call_user_func_array(array($object, $method));?>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:33:43.677

There are four options:

1.  Make the methods you want to call like this signals. Signals can be emited by name [GLib.Signal.emit_by_name (g_signal_emit_by_name)](http://developer.gnome.org/gobject/2.32/gobject-Signals.html#g-signal-emit-by-name). The call is from GLib mode, but other modes with signal support are likely to have similar method.

2.  Create a static table/hash table of delegate objects manually in code. The main advantage is that it is type-safe. Disadvantage is that you have to add each method in two places. It will also work in all vala modes.

3.  Another option is to tell vala compiler to build the "gir" binding and use the [GObject Introspection](https://live.gnome.org/GObjectIntrospection/) library to call the functions. That is much more complicated, but the compiler will maintain the list of available methods for you. This method is specific to the GLib mode.

4.  The last option is to use the [GLib.Module.symbol (g_module_symbol)](http://developer.gnome.org/glib/2.32/glib-Dynamic-Loading-of-Modules.html) function of GLib to find the symbol. You'll need to know the "mangled" C name of the symbol and it will not be type-safe. You will have to match argument types exactly and mind where the invocant should go. It avoids the overhead of GIR, but unlike GIR it can't tell you which methods exist, only get you a specific one. This method is used when connecting signals in GtkBuilder. I mentioned the function from GLib, but `POSIX.dlsym` can be used the same way.

# c# - 一个 WCF 服务——两个客户端；一个客户端不工作

> ID：12420314
> 
> 赞同：1
> 
> 时间：2012-09-14T07:57:39.323
> 
> 标签：c#, .net, wcf, contract-first

我有一个 WCF 服务和两个控制台应用程序客户端。

服务：服务代码是使用 WCSF Blue 工具从 wsdl 联系人创建的。

客户端 1：此客户端正在使用通过浏览 svc 文件获得的 wsdl。这个浏览的 wsdl 文件与合同 wsdl 文件略有不同。

客户端 2：此客户端是使用原始 wsdl 合同创建的。

Cleint1 工作正常。客户端 2 不工作。什么都可能是潜在的问题？

两个客户端的 App.Config 文件看起来很相似——只是名称发生了变化。我认为，问题出在生成的客户端 C# 代码中——很可能在**Action**中**——ReplyAction**中。这里需要纠正什么？

一个明显的区别是 Action 和 ReplyAction

客户 1：

> Action="urn:lijo:demos:multiplyservice:calculation:v1/ICalculationService/GetMultiplied", ReplyAction="urn:lijo:demos:multiplyservice:calculation:v1/ICalculationService/GetMultipliedRe" + "sponse"

客户 2：

> Action="urn:lijo:demos:multiplyservice:calculation:v1:getMultipliedIn", ReplyAction="*"

**跟踪消息**

> 由于 EndpointDispatcher 的 ContractFilter 不匹配，接收方无法处理带有 Action 'urn:lijo:demos:multiplyservice:calculation:v1:getMultipliedIn' 的消息。这可能是因为合约不匹配（发送方和接收方之间的操作不匹配）或发送方和接收方之间的绑定/安全不匹配。检查发送方和接收方是否具有相同的合同和相同的绑定（包括安全要求，例如消息、传输、无）。

**编辑**

这可以通过如下更改 Action 和 ReplyAction 来纠正（从服务中复制）。

```
 [System.ServiceModel.OperationContractAttribute(Action = "urn:lijo:demos:multiplyservice:calculation:v1/ICalculationService/getMultiplied", ReplyAction = "urn:lijo:demos:multiplyservice:calculation:v1/ICalculationService/getMultipliedRe" +
        "sponse")] 
```

注意：确保服务中的大小写正确很重要（即getMultiplied不是GetMultiplied）

从服务中复制不是一个好的选择，尽管它有效。什么是正确的 Action 和 ReplyAction？

另外，您能否指出如何**修改 wsdl 以使生成的客户端代理中的 ReplyAction 正确**？这是将其标记为已回答的重要部分。

[WCF：操作、星号和元数据](http://shishkin.wordpress.com/2007/03/21/wcf-actions-asterisk-and-metadata/)

> 用于元数据发布的 WsdlExporter 忽略带有星号操作的操作（操作和回复操作）。

来自[MSDN -ReplyAction 属性](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontractattribute.replyaction.aspx)

> 在服务中指定星号指示 WCF 不要向消息添加回复操作，这在您直接针对消息进行编程时很有用。

**参考文献**：

1.  [WCF 元数据缺少操作](https://stackoverflow.com/questions/4214815/wcf-metadata-missing-operations)

* * *

**餐厅数据.xsd**

```
 <?xml version="1.0" encoding="utf-8" ?>
 <xs:schema id="RestaurantData" targetNamespace="urn:lijo:demos:multiplyservice:data:v1"
    elementFormDefault="qualified" xmlns="urn:lijo:demos:multiplyservice:data:v1"
    xmlns:mstns="urn:lijo:demos:multiplyservice:data:v1" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:complexType name="multipliedResult">
  <xs:sequence>
  <xs:element name="resultNumber" type="xs:int" />
   </xs:sequence>
   </xs:complexType>

  </xs:schema> 
```

**原始合同 wsdl**

```
 <definitions xmlns:import0="urn:lijo:demos:multiplyservice:messages:v1" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:import1="urn:lijo:demos:multiplyservice:data:v1" xmlns:tns="urn:lijo:demos:multiplyservice:calculation:v1" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" name="CalculationService" targetNamespace="urn:lijo:demos:multiplyservice:calculation:v1" xmlns="http://schemas.xmlsoap.org/wsdl/">

 <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" />
 <types>
 <xsd:schema>
  <xsd:import schemaLocation="C:\toolbox\LijosServiceApp\NewService\RestaurantMessages.xsd" namespace="urn:lijo:demos:multiplyservice:messages:v1" />
  <xsd:import schemaLocation="C:\toolbox\LijosServiceApp\NewService\RestaurantData.xsd" namespace="urn:lijo:demos:multiplyservice:data:v1" />
</xsd:schema>
</types>
<message name="getMultipliedIn">
<wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" />
<part name="parameters" element="import0:getMultiplied" />
</message>
<message name="getMultipliedOut">
<wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" />
<part name="parameters" element="import0:getMultipliedResponse" />
</message>
<portType name="CalculationServiceInterface">
<wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" />
<operation name="getMultiplied">
  <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" />
  <input message="tns:getMultipliedIn" />
  <output message="tns:getMultipliedOut" />
</operation>
</portType>
<binding name="BasicHttpBinding_CalculationServiceInterface" type="tns:CalculationServiceInterface">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
<operation name="getMultiplied">
  <soap:operation soapAction="urn:lijo:demos:multiplyservice:calculation:v1:getMultipliedIn" style="document" />
  <input>
    <soap:body use="literal" />
  </input>
  <output>
    <soap:body use="literal" />
  </output>
 </operation>
 </binding>
 <service name="CalculationServicePort">
 <port name="CalculationServicePort" binding="tns:BasicHttpBinding_CalculationServiceInterface">
  <soap:address location="http://localhost/CalculationService" />
 </port>
 </service>
 </definitions> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T13:32:54.187

我想到了。为了其他人的利益，我将在这里解释。

在此之前，请参考[400 Bad Request Exception: Simple SOAP WCF service with small data](https://stackoverflow.com/questions/12410947/400-bad-request-exception-simple-soap-wcf-service-with-small-data/12418254#12418254)的回答以获得一些调试思路。

这是由于工具中的`Format SOAP Action`选项`WCSF Blue`。

我在使用 WCSF Blue 生成代码时使用了“Format Soap Actions”。但是当客户时，我没有使用该工具。这种不匹配是关键问题。

**Format Soap Actions**强制应用于每个操作合同的 SOAP 操作（**Action**和**ReplyAction ）遵循*****标准 WCF 格式***：

```
 <namespace>/<service>/<operation>[Response] 
```

如果我无法控制客户端，则不应使用 WCSF Blue Tool 中的 Format SOAP Action 选项。

请参阅[来自 wcfTestClient 的服务工作，但在控制台应用程序中失败以](https://stackoverflow.com/questions/12425288/service-works-from-wcftestclient-but-fails-in-console-application/12425618#12425618)获取工作示例。

[我还有一个问题 - 如果我无法控制客户端仍然需要使用**ReplyAction**怎么办？在这种情况下，要在客户端和服务中使用的 xml 格式的 URI 是什么？]

**一般调试思路：**

1.  使用 wcfTestClient 确保服务良好（在 VS 命令提示符下键入 wcfTestClient 以启动）

2.  [使用如何打开 WCF 跟踪](https://stackoverflow.com/questions/4271517/how-to-turn-on-wcf-tracing)中提到的跟踪？

3.  验证配置值在 web.config/app.config 中而不是在 output.config 中（在使用工具自动生成的情况下）

4.  验证您是否引用了正确的 wsdl（它是本地文件还是来自正在运行的服务的 url？）

5.  通过浏览 svc 文件验证是否可以查看 wsdl。元数据已启用

6.  检查服务中的“地址”是相对路径还是绝对路径

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:15:59.593

您说得对，ReplyAction 中存在问题。当 ReplyAction 设置为“*”时，WCF 会忽略该操作。将ReplyAction 更正为您的操作合同将起作用。

[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/41f5fe72-3ab3-4741-867e-a93119fe62aa](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/41f5fe72-3ab3-4741-867e-a93119fe62aa)

# javascript - jQuery UI 自动完成功能突然停止工作

> ID：12420315
> 
> 赞同：1
> 
> 时间：2012-09-14T07:57:40.100
> 
> 标签：javascript, jquery, jquery-ui

我有简单的 jQuery UI 自动完成功能，它可以正常工作，但现在不行。代码如下：

```
<html>
    <head>
    <script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.23.custom.min.js"></script>

    <script type="text/javascript">
        $(function() {
            $( "#city" ).autocomplete({
                source: function( request, response ) {
                    var cities = new Array();
                    cities.push({"label" : "Chicago", "value" : 1});
                    cities.push({"label" : "Houston", "value" : 2});
                    response(cities);
                },
                focus: function(event, ui) {
                    //console.log(ui.item.label);
                    $(this).text(ui.item.label);
                    //console.log($(this).text());
                    event.preventDefault();
                    //console.log($(this).text());
                },
                select: function(event, ui) {
                    //console.log($(this).text());
                    event.preventDefault();
                    //console.log($(this).text());
                }
            });
        });
    </script>
    </head>
    <body>
      <input id="city" />
    </body>
</html> 
```

我正在使用焦点处理程序在文本框中显示标签而不是值（这是自动完成默认情况下所做的）。现在发生的事情是文本框既没有显示标签也没有显示值，它显示的是我输入的值（比如“Chi”）

这是有效的，但现在不是。我认为这是因为我包含了其他一些 javascript，并且存在函数名称冲突。但是我将它移到了一个单独的 HTML 中，如您在上面看到的，它仍然无法正常工作。

顺便说一句，如果我取消注释这些控制台日志语句并从下拉列表中选择芝加哥，那么它们都会打印芝加哥。

这似乎是某个地方的一些愚蠢的错误，但让我难住了。有什么建议么？

编辑 1：顺便说一句，如果我移除焦点并选择处理程序，那么自动完成将使用其默认功能。

编辑 2：如果有人可以在自己的计算机上进行测试，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:28:45.020

您似乎在此处尝试对默认功能进行一些更改。

1.  您希望“已完成”变量在被选中时在主输入中进行预览
2.  您希望在进行选择时显示标签，而不是值。

这些目前都不起作用的原因是相关且简单的：`<input>`字段只有一个与之关联的值，而不是单独的“标签”和“值”。当您从列表中选择“自动完成”选项时，它就是被填充的“值”。

对于第 1 点，事件正在更新的部分`focus:`，只需替换`.text(...)`为，因为这是您实际要更新`.val(...)`的字段的属性：`<input>`

```
focus: function(event, ui) {
    $(this).val(ui.item.label);
    event.preventDefault();
}, 
```

对于第 2 点，由于您实际上希望由标签而不是值填充字段，因此您可以为两者填写相同的文本（如果给出了平面数组，则为默认值）：

```
source: function( request, response ) {
    var cities = new Array();
    cities.push("Chicago");
    cities.push("Houston");
    response(cities);
}, 
```

请记住，自动完成始终是*可选*的。您需要填写的`value:`只是后端可以完全消除歧义的内容。这可能是一个`id`，但使用用户可能自己输入的内容通常是有意义的。当然，如果您正在这样做，那么使用`ui.item.value`而不是`ui.item.label`在`focus:`事件中也可能有意义。

如上所述，源代码健全后，您可以`select:`完全放弃该事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:20:46.610

我认为问题在于自动完成源的分配。这对我有用：

```
$(function() {

    var cities = [ 
        {"label": "Chicago", "value": 1}, 
        {"label": "Houston", "value": 2}
    ];                    

    $( "#city" ).autocomplete({
        source: cities, // assign the source directly
        focus: function(event, ui) {
            //console.log(ui.item.label);
            $(this).text(ui.item.label);
            //console.log($(this).text());
            event.preventDefault();
            //console.log($(this).text());
        },
        select: function(event, ui) {
            //console.log($(this).text());
            event.preventDefault();
            //console.log($(this).text());
        }
    });
});​ 
```

这是一个[小提琴](http://jsfiddle.net/jN2Wm/1/)

# shell - shell脚本中变量的第一个字符为大写？

> ID：12420317
> 
> 赞同：17
> 
> 时间：2012-09-14T07:57:42.837
> 
> 标签：shell, unix, sed, awk

我有一个启动模块单元测试的 shell 脚本。我需要全部小写的模块名称，并且第一个字符大写。到目前为止，我一直在这样做：

```
#!/bin/sh -x                                                                                                                                                                          
# z.B. getbrowser                                                                                                                                                                     
strModuleToTest=$1

# g                                                                                                                                                                                   
strModuleToTestUppercaseFirstletter=${strModuleToTest:0:1}
# etbrowser                                                                                                                                                                           
strModuleToTestUppercaseLastletters=${strModuleToTest:1}

# g -> G                                                                                                                                                                              
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/a/A}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/b/B}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/c/C}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/d/D}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/e/E}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/f/F}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/g/G}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/h/H}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/i/I}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/j/J}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/k/K}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/l/L}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/m/M}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/n/N}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/o/O}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/p/P}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/q/Q}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/r/R}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/s/S}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/t/T}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/u/U}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/v/V}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/w/W}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/x/X}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/y/Y}"
strModuleToTestUppercaseFirstletter="${strModuleToTestUppercaseFirstletter/z/Z}"

# Getbrowser
strModuleToTestUppercase=$strModuleToTestUppercaseFirstletter""$strModuleToTestUppercaseLastletters 
```

设置 $strModuleToTestUppercase 的更简单方法是什么？我试过

```
strModuleToTestUppercase="${strModuleToTest[@]^}" 
```

或者

```
strModuleToTestUppercasesed="sed 's/\<./\u&/g' $strModuleToTest" 
```

但没有成功。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-14T10:09:11.257

如果：

```
s=somemodule 
```

**使用 bash v4+**

```
echo ${s^} 
```

这应该适用于较旧的 bash 版本（来自 Glenn）：

```
echo $(tr a-z A-Z <<< ${s:0:1})${s:1}") 
```

**用 zsh**

```
echo ${(C)s} 
```

**使用 ash 和 coreutils**

```
echo $(echo $s | cut -c1 | tr a-z A-Z)$(echo $s | cut -c2-) 
```

**使用 GNU sed**

```
echo $s | sed 's/./\U&/' 
```

**使用 BSD sed**

```
echo $s | sed '
  h;
  y/quvwxzdermatoglyphicsbfjkn/QUVWXZDERMATOGLYPHICSBFJKN/;
  G;
  s/\(.\)[^\n]*\n.\(.*\)/\1\2/;
' 
```

**用 awk**

```
echo $s | awk '{ print toupper(substr($0, 1, 1)) substr($0, 2) }' 
```

**用 perl**

```
echo $s | perl -nE 'say ucfirst' 
```

**用蟒蛇**

```
echo $s | python -c 'import sys; print sys.stdin.readline().rstrip().capitalize()' 
```

**红宝石**

```
echo $s | ruby -e 'puts ARGF.read.capitalize' 
```

**所有情况下的输出**

```
Somemodule 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-14T08:10:58.533

你可以使用

```
strModuleToTestUpper=`sed 's/\(.\)/\U\1/' <<< "$strModuleToTest"` 
```

解释

*   `\(.\)`匹配单个字符
*   `\U\1`用大写版本替换该字符
*   no`/g`表示只处理第一个匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:15:41.453

perl 可以吗？

```
$ x=foobar
$ x=$(echo "$x" | perl -pe 's/^(.)/uc($1)/e')
$ echo $x
Foobar 
```

# go - 将一个结构分配给“结构相同”类型的另一个结构

> ID：12420321
> 
> 赞同：2
> 
> 时间：2012-09-14T07:58:05.560
> 
> 标签：go

我的问题是这样的：我有一个为其他包`MyMail`提供功能`SendMail(MyMail.Mail)`的包。`MyMail`使用包`LowLevelMail`及其功能`Send(LowLevelMail.Mail)`来实际发送邮件。`MyMail.Mail`并且`LowLevelMail.Mail`在它们定义“相同结构”（即同样命名和类型化的字段）的意义上是相同的。

`SendMail(m MyMail.Mail)`使用前必须转换`m`为. 不会工作。但这可能是可能的，因为编译器应该能够看到两个结构的字段是相同的。由于未导出字段，因此支持这一点可能不是一个好主意。`LowLevelMail.Mail``Send(LowLevelMail.Mail``newmail := LowLevelMail.Mail(m)`

1）我可以在不手动完成所有操作的情况下以某种方式分配`m`（`newmail`并且不会失去所有类型安全性？）？手动方法会引起一些痛苦（结构不仅仅包含可以分配给其他结构的简单类型）。

2) 整个问题是否有更好的解决方案（即“我不想在我的 API 中使用其他包的类型，因为我不希望我的包的客户端依赖于外部 API。这个外部 API 可能会改变或者我可能会在某个时候决定不再使用它。”）。

**更新**：我错过了一个重要的点：`LowLevelMail.Mail`有一个类型的字段，`LowLevelMail.Address`它也在`MyMail`as中“重新定义” `MyMail.Address`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:38:50.783

这有效：

```
type T1 struct {
    a int
    b string
}
type T2 struct {
    a int
    b string
}
func main() {
    t1 := T1{2, "test"}
    t2 := T2(t1)
    fmt.Println(t2)
} 
```

这不是你要找的吗？

如果您的问题是关于如何在 T1 和 T2 位于不同的包中并且不导出其字段时如何执行此操作，那么，允许这样做只会使这些字段的隐私无效，所以这当然是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:44:17.070

您的问题似乎是这样的：

```
package lowlevelmail

type Mail struct { P int; p int}

func Send(m Mail) { } 
```

和

```
package mymail

import "lowlevelmail"

type Mail lowlevelmail.Mail

func Send(m Mail) { lowlevelmail.Send(lowlevelmail.Mail(m)) } 
```

和

```
package main

import "mymail"

func main() {var m mymail.Mail; mymail.Send(m)} 
```

# c# - 如何调用 UserControl 的 OnInit 事件？

> ID：12420324
> 
> 赞同：1
> 
> 时间：2012-09-14T07:58:13.767
> 
> 标签：c#, asp.net, events, webforms, ext.net

我的情况有点复杂。我想要做的是重新加载`UserControl`（在我的内部动态更改控制`UserControl`）。当我尝试这样做`OnInit`或`Page_Init`我的页面事件时，这很简单。但是我需要在一个`click`事件中执行此操作`button`，顺便说一句，`ext.net` `type`并且有内置`callback`事件。

那么有什么方法可以触发加注`invoke` `OnInit`事件`UserControl`吗？`event` `click`

如果需要更多信息，请随时在评论中提问：）

感谢提前:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:23:30.937

我认为您应该以不同的方式处理此案。 `OnInit`根据 webform 生命周期触发，其中每个步骤都有特定目的： http: [//msdn.microsoft.com/en-us/library/ms178472 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx)

> 在页面初始化期间，页面上的控件可用并且每个控件的 UniqueID 属性都被设置。如果适用，母版页和主题也适用于该页面。**如果当前请求是回发，则回发数据尚未加载，控件属性值尚未恢复为 view state 中的值**。

您最好不要“强制”这个概念，尝试调整您的代码以满足流程约束。

# java - 如何在 Hibernate 中进行内部连接？

> ID：12420327
> 
> 赞同：0
> 
> 时间：2012-09-14T07:58:26.073
> 
> 标签：java, mysql, hibernate

我有一张如下表：

编号 | 贷款资料ID | from_state | to_state | 日期

特定的loan_profile_id 将有多个条目。

我想使用 Hibernate 来获取一组loan_profile_id 的特定时间之前的最新条目。这就是我在 SQL 中的做法：

```
select lps.* from loan_profile_state_changes lps inner join 
(select max(id) as maxId from loan_profile_state_changes where date < '2012-09-13 00:00:00' and loan_profile_id in (15744,15745,15746,15747,15748,15750,15751) group by loan_profile_id)maxIds
on maxIds.maxId = lps.id order by lps.id desc; 
```

我将如何在休眠状态下执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:16:34.540

您可以使用 Hibernate HQL 来做到这一点

[Hibernate 查询语言：子查询](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-subqueries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:24:59.787

从休眠手册：

假设您有一个“Cat”实体将另一个“Cat”实体引用为“mate”，

```
from Cat as cat inner join cat.mate as mate 
```

也可以简写为：

```
from Cat as cat join cat.mate as mate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:29:31.410

使用 DetachedCriteria ：

```
DetachedCriteria subQuery = DetachedCriteria.forClass(LoanProfileStateChanges.class);
subQuery.add(Restrictions.lt("date", new Date());
subQuery.add(Restrictions.in("id", Arrays.asList(1,2,3));
ProjectionList pl = Projections.projectionList();
pl.add(Projections.max("id")).add(Projections.groupProperty("loanProfileId"));
subQuery.setProjection(pl);

DetachedCriteria dc = DetachedCriteria.forClass(LoanProfileStateChanges.class);
dc.add(Subqueries.propertyIn("id", subQuery);
dc.addOrder(Order.desc("id")); 
```

（请注意，它不会进行内部连接，但从执行计划的角度来看是等效的）

# python - 如何在 Plone 4.1 中使用 wc.pageturner？

> ID：12420334
> 
> 赞同：0
> 
> 时间：2012-09-14T07:58:44.053
> 
> 标签：python, plone

我已经在我的 linux debian 版本 6 中安装了 swftools。在 plone buildout.cfg 中，添加了产品 wc.pageturner 并对其进行了编译。在 plone 站点控制面板中 - 我还激活了附加组件。但是，当我上传 pdf 并尝试使用显示选项卡的翻页器项目​​查看时，它会显示以下信息

> “由于您没有在此系统上安装 swftools，我们无法呈现此 PDF 的页面。”

有什么遗漏吗。我指的是网址： http: [//plone.org/products/wc.pageturner](http://plone.org/products/wc.pageturner)。我已经使用命令安装了依赖 swftools`apt-get -t wheezy install swftools`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:18:22.897

该`wc.pageturner`包使用`pdf2swf`命令行工具来完成这项工作。但是，`swftools`Debian 上[*的*](http://packages.debian.org/wheezy/swftools)[软件包不包含该工具](http://packages.debian.org/wheezy/swftools)*：*

 *> 此软件包不包括 pdf2swf 和 avi2swf。

我怀疑二进制文件以某种方式违反了 Debian 自由软件指南。我无法找到包含二进制文件*的Debian 软件包。*

您可以改为[从源代码安装包。](http://wiki.swftools.org/wiki/Installation)*

# python - Python 安装 sqlite3 模块需要什么？

> ID：12420338
> 
> 赞同：0
> 
> 时间：2012-09-14T07:59:04.817
> 
> 标签：python, sqlite

好的，

我已经问过这个问题了，但注意到我可能没有像我本来应该的那样清楚，并且自己可能犯了一些错误。

我还注意到很多人在 python 中对 sqlite3 有相同或相似的问题。所以我想我会尽可能清楚地问这个问题，所以它也可以帮助其他人解决同样的问题。

python在编译时需要找到什么，才能使模块启用并工作？（详细地说，我的意思是确切的文件，而不仅仅是“sqlite dev-files”）？

如果它需要一个库，它可能需要使用正确的架构进行编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:14:31.617

据我了解，您想安装 python 表单源。要使*sqlite*模块可用，您必须安装*sqlite*包及其*开发文件*（例如用于 CentOS的*sqlite-devel ）。*就是这样。安装所需的软件包后，您必须重新配置源代码。

顺便说一句，您将面临与其他一些模块相同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:16:27.637

cpython的sqlite模块[源码](http://hg.python.org/cpython/file/2291aff20a05/Modules/_sqlite/connection.c#l109)调用各种sqlite3函数，使用sqlite3结构（类似于Python中的类定义）。

在编译源代码（到`python`二进制文件）时，C 编译器需要这些函数的定义（例如，如果参数计数不匹配，它可以中止）。出于这个原因，Python 的 sqlite 模块[包括 sqlite3*头*文件`sqlite3.h`](http://hg.python.org/cpython/file/2291aff20a05/Modules/_sqlite/connection.h#l33)，其中包含有关`sqlite3_*`函数参数的信息（但*不*包括它们的实现）。[[（有关 Wikipedia 上的头文件的更多信息）]](http://en.wikipedia.org/wiki/Header_file)

此外，在[链接](http://en.wikipedia.org/wiki/Linker_(computing))python 二进制文件时，链接器需要获取有关使用的 sqlite3 方法和其他对象的实际二进制表示的信息。此信息位于以、或`/usr/lib`结尾的文件中。它们必须针对*目标*体系结构（即您尝试创建的二进制文件的体系结构）进行编译——大多数情况下，这就是当前系统的体系结构。`.so``.la``.a`

# javascript - 正则表达式删除一个空属性？例如 if (class=" " || class="") 移除；否则下课

> ID：12420339
> 
> 赞同：0
> 
> 时间：2012-09-14T07:59:05.000
> 
> 标签：javascript, regex

这个问题是出于一般目的，不，“你永远不应该正则表达式 html”......

删除空属性的正则表达式是什么，例如

```
class="" or class="   " 
```

不知道“”之间的空格数？

另外：如果里面还有其他字符，则保持类标签不变？

昨天我得到了[复杂正则表达式的解决方案](https://stackoverflow.com/questions/12412388/regex-to-remove-all-styles-but-leave-color-and-background-color-if-they-exist)，但是，我无法将其简化为上述特定情况。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T08:02:36.917

尝试使用以下正则表达式：

```
/class="\s*?"/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:05:47.583

如果您不关心检查它是否实际上在 HTML 标记内，您可以使用：

```
[a-z]+="\s*" 
```

这可以与以下情况一起使用`.replace()`：

```
str = str.replace(/[a-z]+="\s*"/ig, ''); 
```

将`i`忽略大小写，而`g`将“替换”所有匹配的实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:01:24.750

替换`/class="\s*"/`为空字符串。

# java - 通过 JAVA 中的正则表达式更改字符串值

> ID：12420346
> 
> 赞同：0
> 
> 时间：2012-09-14T07:59:19.777
> 
> 标签：java, regex

我有这句话：

“我在 20:00 点有 3 根香蕉”。

我需要替换字符串中的数字，使其包含 unicode：

“我在 \u200e20\u200e:\u200e00\u200e 点钟有 \u200e3\u200e 香蕉”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:03:42.753

您的示例中的替换可以使用[`String.replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)：

```
String string = "I have 3 bananas at 20:00 o'clock";
string = string.replaceAll("\\d+", "\\\\u200e$0\\\\u200e");
System.out.println(string); 
```

印刷

```
I have \u200e3\u200e bananas at \u200e20\u200e:\u200e00\u200e o'clock 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:03:13.813

为数字准备**哈希图**可以解决您的问题。将数字作为 hashmap 的键，而值是对应的 Unicode 值。然后使用`replace()`调用将数字替换为哈希图中的值。我希望这种方法是有意义的。

# ssl - 通过 SilverTunnel netlib 连接时，与 ActiveMQ 服务器的 SSL 握手会产生 NullPointerException

> ID：12420354
> 
> 赞同：2
> 
> 时间：2012-09-14T07:59:55.873
> 
> 标签：ssl, nullpointerexception, activemq, freeze, handshake

## 概括

无论有没有 netlib，通过 TCP 连接到 ActiveMQ 都可以正常工作。
在没有 netlib 的情况下通过**SSL**连接可以正常工作，**但在使用 netlib 时会失败**。

注意：我使用的是**apache-activemq-5.6.0**和**silvertunnel.org_netlib-0.14-beta**。

无论是使用 netlib 的 tcpipNetLayer 还是 torNetLayer，都会出现这个问题。然而，为了简单起见，这里只考虑 tcpipNetLayer 的情况。

顺便说一句，SSL + netlib 与 HornetQ 消息服务器（以不同的方式实现 SSL 身份验证）配合得很好，但 HornetQ 遇到的问题导致我尝试使用 ActiveMQ。

为方便起见，我创建了一个[简单的测试用例](http://anandavala.info/miscl/testing-AMQ-Netlib-SSL.zip)，其中包含一个**消费者**和两个不同的生产者。

*   **生产者**在没有 netlib 的情况下连接 - 工作正常。
*   **producer-tcpip**使用 tcpipNetLayer 与 neltib 连接 - 出现以下错误：

为 ActiveMQ 启用 SSL 调试后，producer-tcpip 程序将以下错误消息输出到控制台，然后挂起：

```
ActiveMQ Transport: ssl://null:0, handling exception: java.lang.NullPointerException 
```

这是 SSL 握手的中途，因为 producer-tcpip 程序会生成 log4j 消息：

```
DEBUG org.apache.activemq.transport.failover.FailoverTransport - Attempting  0th  connect to: ssl://localhost:61616
DEBUG org.apache.activemq.transport.WireFormatNegotiator - Sending: WireFormatInfo { version=9, properties={MaxFrameSize=104857600, CacheSize=1024, CacheEnabled=true, SizePrefixDisabled=false, MaxInactivityDurationInitalDelay=10000, TcpNoDelayEnabled=true, MaxInactivityDuration=30000, TightEncodingEnabled=true, StackTraceEnabled=true}, magic=[A,c,t,i,v,e,M,Q]} 
```

然后，当 producer-tcpip 程序被杀死（例如使用 ctrl+C）时，activemq.log 报告：

```
WARN  | Transport Connection to: tcp://127.0.0.1:49463 failed: javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake | org.apache.activemq.broker.TransportConnection.Transport | ActiveMQ Transport: ssl:///127.0.0.1:49463
ERROR | Could not accept connection from tcp://127.0.0.1:49463: javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake | org.apache.activemq.broker.TransportConnector | ActiveMQ Task-3 
```

我不知道是什么原因造成的，也不知道如何解决。任何人都可以帮忙吗？

## 重现问题的步骤（需要不到 15 分钟）：

下载[测试用例](http://anandavala.info/miscl/testing-AMQ-Netlib-SSL.zip)

```
wget http://anandavala.info/miscl/testing-AMQ-Netlib-SSL.zip
unzip testing-AMQ-Netlib-SSL.zip
rm testing-AMQ-Netlib-SSL.zip
cd testing-AMQ-Netlib-SSL 
```

下载最新的 ActiveMQ 到测试目录

```
wget https://www.apache.org/dist/activemq/apache-activemq/5.6.0/apache-activemq-5.6.0-bin.tar.gz
tar -xzf apache-activemq-5.6.0-bin.tar.gz
rm apache-activemq-5.6.0-bin.tar.gz 
```

编辑 conf/activemq.xml 以接受 ssl

```
gedit apache-activemq-5.6.0/conf/activemq.xml 
```

用以下几行替换 transportConnectors 条目（以启用 SSL）

```
 <transportConnectors>
            <transportConnector name="ssl"     uri="ssl://0.0.0.0:61616?needClientAuth=true"/>
        </transportConnectors>
        <sslContext>
            <sslContext 
            keyStore="broker.ks" keyStorePassword="password"
            trustStore="client.ks" trustStorePassword="password"/>
        </sslContext> 
```

启动服务器

```
cd apache-activemq-5.6.0
bin/activemq start 
```

查看日志输出

```
tail -f data/activemq.log 
```

打开另一个控制台，然后 cd 进入**testing-AMQ-Netlib-SSL**目录

将最新的 SilverTunnel netlib 下载到测试目录中

```
wget http://sourceforge.net/projects/silvertunnel/files/silvertunnel_Netlib/silvertunnel.org_netlib-0.14-beta.zip
unzip silvertunnel.org_netlib-0.14-beta.zip
rm silvertunnel.org_netlib-0.14-beta.zip 
```

将源代码编译成三个可运行的 jar 文件在不同的目录中

```
ant 
```

运行消费者

```
cd consumer
./consumer 
```

打开另一个控制台，然后 cd 进入**testing-AMQ-Netlib-SSL/producer**目录

运行生产者

```
./producer 
```

让它运行一会儿，让自己满意，然后按 ctrl+C 杀死生产者

运行生产者-tcpip

```
cd ../producer-tcpip
./producer-tcpip 
```

让它运行一点来满足你自己它已经停止在 NullPointerException 然后通过按 ctrl+C 来杀死 producer-tcpip

注意 producer-tcpip 输出中的调试消息

```
tail -f logs/output.log 
```

还要注意出现在 activemq.log 底部的错误消息（请参阅第一个控制台窗口的尾部输出）或在当前提示符下键入

```
tail -f ../apache-activemq-5.6.0/data/activemq.log 
```

# 谢谢你的帮助！

# asp.net-mvc - 在 Visual Studio 中使用 IIS 进行调试，无需外部目录

> ID：12420356
> 
> 赞同：0
> 
> 时间：2012-09-14T08:00:07.797
> 
> 标签：asp.net-mvc, visual-studio-2010, iis, 64-bit, virtual-directory

我有一个 64 位 Web 应用程序（不是 32 或任何 cpu）（因为我们大多数使用的 dll 需要在 64 位中，因为它们用于另一个需要至少 5GB RAM 的进程）。

我需要在 IIS 中调试它，所以我将“本地 IIS Web 服务器”与虚拟目录放在一起。

问题是我们使用了用于其他 30 多个网站的 CSS 文件，并且我们正式禁止对该文件进行任何更改。并且他们在 CSS 中使用“/assets/.../...”引用资源，所以如果我把它放在一个子文件夹中，所有的 css 都指向一个错误的路径（主要是图像）。

有没有办法让视觉工作室使用`http://localhost:9999`（例如？）

因为如果我放这个，当我尝试创建虚拟目录时会收到一条错误消息： ![在此处输入图像描述](../Images/925b9a19ea87a133049ae875fa765447.png)

**编辑**

如果我在 IIS 中创建站点，虚拟目录创建工作，但是当我启动网站时，我收到了 Visual Studio 的错误消息：（是的，我改变了对 7777 端口的想法，IIS 配置相同）： ![在此处输入图像描述](../Images/dc1c7dd6a369cfa1037f0b3d146e7d43.png) 任何主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:05:29.803

尝试在 IIS 中创建新站点并将端口设置为 9999，然后重试。

详细信息： [创建网站 (IIS 7)](http://technet.microsoft.com/en-us/library/cc772350%28v=ws.10%29.aspx)

# symfony - symfony2 中没有基本表单和自定义表单？

> ID：12420363
> 
> 赞同：1
> 
> 时间：2012-09-14T08:00:36.840
> 
> 标签：symfony, propel, symfony-forms

我们在 symfony 1.4 中有基本形式和自定义形式的概念。在 symfony2 中，我相信这个概念被放弃了。我正在使用 propel:form:generate 生成表单，我应该对生成的表单类型本身进行修改吗？如果我有架构更改并且我的所有修改都丢失了怎么办？

有这样做的标准方法吗？我刚刚从 symfony1.4 开始使用 symfony2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:23:33.433

这在很大程度上取决于你想做什么。一种方法是创建自定义表单类型并将该类型用作所有表单的父类型。第二种是编写一个表单类型扩展并将其应用于类型“表单”，它是所有核心的基本类型，通常也是所有自定义类型的基础类型。

# php - 如何在Javascript中将JSon对象转换为数组

> ID：12420372
> 
> 赞同：-2
> 
> 时间：2012-09-14T08:01:17.607
> 
> 标签：php, javascript, arrays, json

我将数组返回为

```
$array = array {
         'id' => 1,
         'name'=>krishna,
}
echo json_encode($array);
exit; 
```

来自 ajax 调用

如何将此 json 值转换为 java 脚本数组？

这是我的实际数据

```
var data = [{
   "candidate_notes_id":"1",
    "candidate_id":"38",
    "subject":"test",
    "description":"t‌estestsete\netestes\n\n\nsteetet",
    "private":"0",
    "created_date":"2012-09-14 11:55:13",
    "updated_date":"2012-09-14 11:55:13",
    "updated_by":"admin"
  }] 

 var newArray = jQuery.parseJSON(data); 
 alert(newArray);
 return false; 
```

结果 ：

```
 var newArray = JSON.stringify(data);
          var date_split = newArray.substr(1,newArray.length-2);
          var newData = date_split.replace('\n','<br>');
          var newArray = $.parseJSON(newData); 
          alert(newArray.candidate_notes_id);
          alert(newArray.candidate_id);
          alert(newArray.subject);
          alert(newArray.description); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:03:54.267

如果您使用的是 jQuery，那么您可以使用`jQuery.parseJSON(YOUR_AJAX_RESPONSE_DATA);`它将 json 转换为 JS 对象

链接：[http ://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:03:55.683

请看一个已回答的问题...

您将了解如何将 json 转换为数组。

[JSON 到 JavaScript 数组](https://stackoverflow.com/questions/6872832/json-to-javascript-array)

```
var array = [];
$.each(JSONObject, function(i, obj) {
    array.push([obj.id.value, obj.name.value]);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:12:01.413

您可以使用解析它

```
obj = JSON.parse(responseData); // replace `responseData` with your XHR response variable name 
```

在您的成功回调函数中。然后将其转换为数组，如下所示

```
var myArray=[];
myArray[0]=obj.id;
myArray[1]=obj.name; 
```

**但首先你的**

```
$array = array {
    'id' => 1,
    'name'=>krishna,
}; 
```

应该

```
$array = array (
    'id' => 1,
    'name'=>'krishna'
); 
```

[**演示**](http://jsfiddle.net/Stq2k/1/)。

# xaml - XAML 找不到 LayoutAwarePage

> ID：12420377
> 
> 赞同：1
> 
> 时间：2012-09-14T08:01:30.307
> 
> 标签：xaml, windows-8, microsoft-metro

我有一个 Windows Metro 应用程序，我创建了一个网格应用程序，并添加了一大堆表单、控件和页面，更改了命名空间。现在我收到一个 XAML 错误，说它找不到`Common:LayoutAwarePage`.

我看过这篇文章：[XAML 在本地命名空间中找不到引用](https://stackoverflow.com/questions/11004810/xaml-cannot-find-reference-in-local-namespace)。但是，在查看我的应用程序时，除了那些`Bing.Maps`

我在 Win 8 RP 和 vs 2012 RC 中创建了该项目，但后来升级了两者的 RTM 版本。我什至创建了一个空白网格应用程序并构建了它，但没有 winmd 文件。有什么我做错了，我该如何解决这个问题？

# c# - 提高单独的串行端口信号

> ID：12420379
> 
> 赞同：1
> 
> 时间：2012-09-14T08:01:41.300
> 
> 标签：c#, .net, serial-port

是否可以从 C#/.NET 应用程序中升高/降低和读取单个串行端口线？

像：

```
serialPort.Raise(DTR);
serialPort.Drop(CTS);
bool ctrStatus = serialPort.Read(DTR); 
```

`SerialPort`从课堂上似乎不可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:13:26.130

您可以控制的引脚，您可以通过读取和写入属性来控制。

IE

```
if (serialPort.DsrHolding) 
```

请注意，如果您配置了引脚，则设置引脚的能力会与硬件握手交互。

要获得更多控制，您需要直接访问 Win32 API（例如使用 p/invoke 或 C++/CLI）。[`EscapeCommFunction`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363254.aspx)直接控制控制输出并查询[`GetCommModemStatus`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363258.aspx)控制输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:12:02.367

使用`DtrEnable`和`CtsEnable`属性。

# java - 使用 openGL 绘制样条曲线

> ID：12420382
> 
> 赞同：2
> 
> 时间：2012-09-14T08:02:21.723
> 
> 标签：java, opengl, graphics, curve, spline

我尝试使用 openGL 和 Java 绘制样条曲线。

我现在所拥有的只是一组点。我想要的是一条样条线，它通过这些点中的每一个。

openGL中是否有一个特殊的功能来完成它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:51:06.747

> openGL中是否有一个特殊的功能来完成它？

不，更高版本的 OpenGL（v3 及更高版本）确实专注于弃用和删除任何专门的东西。您可以编写镶嵌、几何和顶点着色器的组合，从一组输入点生成镶嵌贝塞尔样条。但是您必须自己编写这些着色器。

# security - 用于检查大多数签名元素是否未更改的组合数字签名

> ID：12420384
> 
> 赞同：0
> 
> 时间：2012-09-14T08:02:35.233
> 
> 标签：security, digital-signature

我不熟悉这个领域，所以如果这个问题看起来微不足道或无聊，请原谅。

我有 N 个字符串，我需要以这样的方式签名，如果最多 M 个字符串被更改、删除或添加，签名仍然有效。N > M，N 可能会有所不同。签名不应允许从签名本身推导出 N。

到目前为止，我所能想象的只是一种简单的方法，分别为每个字符串构建哈希，并将它们全部存储为签名，但它不符合最新要求。

如果存在一些特定于语言的示例，请同时提及它们，-Java、C++、PHP 等都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:56:38.467

经过对此事的一些调查，我发现以下信息可能会有所帮助。

有一个所谓的“[滚动哈希](http://en.wikipedia.org/wiki/Rolling_hash)”。另一项密切相关的技术名为“上下文触发分段哈希”（CTPH）。关于 CTPH 有一篇易于理解的文章： [使用上下文触发分段散列识别几乎相同的文件](http://dfrws.org/2006/proceedings/12-Kornblum.pdf)。

我假设它可以用于签署 N 个元素，并连接在单个输入文件中。

该算法假设块大小（用于定期拼接从传统哈希构建的签名）是众所周知的，因为它嵌入到最终签名中。这可能允许推断签名内容的近似大小，但显然将 N 保密。

对于给定的未知内容，该算法根据 CTPH 提供相似性或**同源性**的度量，作为已知签名内容和使用其签名的未知内容之间的 0（差异）和 100（同一性）之间的值。

# php - 订阅处理

> ID：12420386
> 
> 赞同：1
> 
> 时间：2012-09-14T08:02:43.423
> 
> 标签：php, symfony, paypal, subscription

我正在寻找有关用户订阅处理的最佳实践。用户可以通过 paypal 订阅（使用 paypal IPN 处理）以获得在网站上给予他们一些特权的状态。但是订阅期限为一年。自动检测何时应取消订阅（订阅完成一年后）的最佳做法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:07:27.557

通过使用数据库，您可以将订阅的到期日期存储为当前时间 + 1 年的 DateTime。

然后，如果当前时间大于订阅到期时间，您可以定期运行脚本或检查登录。如果是，请将用户的帐户更改为取消订阅。

在 PHP 中：

```
$nextyear  = mktime(0, 0, 0, date("d"),   date("m"),   date("Y")+1); 
```

这将告诉您从今天起一年中的日/月/年，因此您可以将其存储在用户/订阅表中。登录时，您可以将其与以下内容进行比较：

```
$today = mktime(0, 0, 0, date("d"),   date("m"),   date("Y")); 
```

如果 $today 大于到期日的存储值，那么您知道取消订阅和/或提示他们支付下一年的费用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-18T20:36:44.753

或者，如果您想要一个平台来处理它，请使用 Zoho Subscriptions 之类的工具。我使用它，它为我完成了所有这些。我只是从我的网站 API 进入它，它连接到 PayPal 和其他网关。它也有很好的报道。

# email - Gmail 中的纯文本电子邮件

> ID：12420389
> 
> 赞同：2
> 
> 时间：2012-09-14T08:03:13.957
> 
> 标签：email, text, gmail, sendmail, send

如何让纯文本电子邮件在 Gmail 中正确显示？

他们在我的电子邮件中是这样的：

```
 Hello ZX,
 Congratulations on creating your LessonShark Account!

 There are two important parts to your LessonShark account that can help you grow and  manage your student roster: 
```

但显示如下：

```
Hi ZX,

Congratulations on creating your LessonShark Account!

There are two important parts to your LessonShark account that can help you grow and manage your student roster: 
```

那么其他电子邮件客户端也会发生这种情况吗？

# matlab - 在 libsvm 中查找与超平面的距离

> ID：12420391
> 
> 赞同：2
> 
> 时间：2012-09-14T08:03:16.780
> 
> 标签：matlab, libsvm

我正在为 Matlab 使用 LibSVM。我想从 SVM 训练时创建的决策超平面找到所有测试点的距离。

我该怎么做？

谢谢

# sql - 构造查询的更好方法

> ID：12420393
> 
> 赞同：4
> 
> 时间：2012-09-14T08:03:26.433
> 
> 标签：sql, sql-server-2008

**输入 ：**

`Month, Year, GraceMonth.`都是整数。

**我们需要做什么？**

首先需要从月、年、日构造日期（需要从当前日期获取），然后将 GraceMonth 添加到其中。添加 GraceMonth 后，我们显然会得到新的 Date。接下来，从构建的日期开始，我们需要将其与当前日期进行比较。

**你试过什么？**

例如（我在零件中显示）

```
DECLARE @Month INT = 11
DECLARE @YEAR INT = 2012
DECLARE @Graceperiod INT = 2 

SELECT 
    [Construct Initial Date] = DATEADD(mm, (@YEAR - 1900) * 12 + @Month - 1 , DAY(GETDATE()) - 1) --construct initial date  
    ,[Add Grace period] =DATEADD(mm,@Graceperiod,DATEADD(mm, (@YEAR - 1900) * 12 + @Month - 1 , DAY(GETDATE()) - 1)) --add grace month
    ,[DateDiff] = DATEDIFF
            (
                DAY,
                DATEADD(mm, (@YEAR - 1900) * 12 + (@Month + @Graceperiod) - 1 , DAY(GETDATE()) - 1),
                GETDATE()
             ) -- datediff 
```

**结果**

```
Construct Initial Date        Add Grace period              DateDiff
2012-11-14 00:00:00.000       2013-01-14 00:00:00.000      -122 
```

**如果您的答案是正确的，那么您在寻找什么？**

除了这个还有什么好的方法吗？不用 Casting 越简洁越好。如果它涉及一些棘手的部分（例如一些棘手的数学计算），请提供解释。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:13:26.470

试试这个：

```
DECLARE @Month INT = 11
DECLARE @YEAR INT = 2012
DECLARE @Graceperiod INT = 2 

SELECT DATEADD(mm,(@month-month(getdate())),DATEADD(year,@year-YEAR(getdate()),getdate())) as InitialDate,
       DATEADD(mm,@Graceperiod,DATEADD(mm,(@month-month(getdate())),DATEADD(year,@year-YEAR(getdate()),getdate()))) as GraceDate,
       DATEDIFF(day,DATEADD(mm,@Graceperiod,DATEADD(mm,(@month-month(getdate())),DATEADD(year,@year-YEAR(getdate()),getdate()))),GETDATE()) as DateDiffs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:31:11.103

试试这个：

我认为这可能不会带来任何性能改进，但会减少您的代码

```
DECLARE @Month INT = 11
DECLARE @YEAR INT = 2012
DECLARE @Graceperiod INT = 2 

;with cte as   (select DATEADD(mm, (@YEAR - 1900) * 12 + @Month - 1 ,0) as begining_month)
 select DATEADD(dd,DAY(GETDATE()) - 1,begining_month) as [Construct Initial Date],
        DATEADD(mm,@Graceperiod,DATEADD(dd,DAY(GETDATE()) - 1,begining_month)) as [Add Grace period] ,
        DATEDIFF(DAY,DATEADD(mm,@Graceperiod,DATEADD(dd,DAY(GETDATE()) - 1,begining_month)), GETDATE()) as [DateDiff]
 from cte 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T04:47:49.340

```
DECLARE @Month INT = 11
DECLARE @YEAR INT = 2012
DECLARE @Graceperiod INT = 2 

SELECT 
      [Construct Date] = DATEADD(mm, (@YEAR - 1900) * 12 + @Month - 1 , DAY(GETDATE()) - 1) --construct date
      ,[Add Grace period] =DATEADD(mm,@Graceperiod,DATEADD(mm, (@YEAR - 1900) * 12 + @Month - 1 , DAY(GETDATE()) - 1)) --add grace month
      ,[DateDiff] = DATEDIFF(
                        DAY,
                        DATEADD(mm,@Graceperiod,DATEADD(mm, (@YEAR - 1900) * 12 + @Month - 1 , DAY(GETDATE()) - 1)),
                        GETDATE()
                  ) -- datediff 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T08:13:16.443

你做了三遍同样的计算，试试这个来保存那个

```
DECLARE @Month INT = 11
DECLARE @YEAR INT = 2012
DECLARE @Graceperiod INT = 2 

-- This is that calculation
DECLARE @ConstructInitialDate DATETIME = DATEADD(mm, (@YEAR - 1900) * 12 + @Month - 1 , DAY(GETDATE()) - 1)

SELECT 
    [Construct Initial Date] = @ConstructInitialDate --construct initial date  
    ,[Add Grace period] =DATEADD(mm, @Graceperiod, @ConstructInitialDate) --add grace month
    ,[DateDiff] = DATEDIFF
(
   DAY,
   DATEADD(mm,@Graceperiod, @ConstructInitialDate),
   GETDATE()
) 
```

# android - 如何在方向更改时保留 EditText 数据？

> ID：12420396
> 
> 赞同：30
> 
> 时间：2012-09-14T08:03:37.100
> 
> 标签：android, android-layout, android-edittext, orientation

我有一个登录屏幕，其中包含 2 个用于用户名和密码的 EditText。**我的要求是，在方向更改时，EditText 中的输入数据（如果有）应保持原样，并且还应绘制新布局。**我有 2 个布局 xml 文件 - 一个在布局文件夹中，另一个在 layout-land 文件夹中。我正在尝试实现以下两种方法，但它们都不是完美的：

**(1) configChanges:keyboardHidden -**在这种方法中，我不在清单文件的 configChanges 中提供“方向”。所以我在 onCreate() 和 onConfigurationChanged() 方法中都调用了 setContentView() 方法。它满足我的两个要求。布局已更改，EditTexts 中的输入数据也保持原样。但它有一个大问题：

当用户单击登录按钮时，**会显示一个 ProgressDialog，直到收到服务器响应**。现在，如果用户在 ProgressDialog 运行时旋转设备，应用程序会崩溃。它显示一个异常说“视图不能附加到窗口”。我尝试使用 onSaveInstanceState 处理它（在方向更改时会调用它），但应用程序仍然崩溃。

**(2) configChanges:orientation|keyboardHidden -**在这种方法中，我在清单中提供“方向”。所以现在我有两种情况：

**(a)**如果我在 onCreate() 和 onConfigurationChanged() 中调用 setContentView() 方法，布局会相应更改，但 EditText 数据会丢失。

**(b)**如果我在 onCreate() 中调用 setContentView() 方法，但在 onConfigurationChanged() 中没有调用，则 EditText 数据不会丢失，但布局也不会相应更改。

在这种方法中，甚至不调用 onSaveInstanceState() 。

所以我处于一个非常可怕的境地。这个问题有什么解决办法吗？请帮忙。提前谢谢。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-09-18T13:27:56.767

默认情况下，Edittext 在更改方向时会保存自己的实例。

确保 2 个 Edittexts 具有唯一的 ID，并且在两个布局中具有相同的 ID。

这样，它们的状态应该被保存，您可以让 Android 处理方向更改。

如果您使用的是片段，请确保它也具有唯一 ID，并且在重新创建 Activity 时不要重新创建它。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-09-19T20:32:34.770

更好的方法是让 android 处理方向变化。Android 会自动从正确的文件夹中获取布局并将其显示在屏幕上。您需要做的就是将编辑文本的输入值保存在**onSaveInsanceState() 方法**中，并使用这些保存的值在**onCreate() 方法**中初始化编辑文本。
以下是如何实现这一目标：

```
@Override
protected void onCreate (Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login_screen);
    ...
    ...
    String userName, password;
    if(savedInstanceState!=null)
    {
        userName = savedInstanceState.getString("user_name");
        password= savedInstanceState.getString("password");
    }

    if(userName != null)
        userNameEdtTxt.setText(userName);
    if(password != null)
        passEdtTxt.setText(password);
} 
```

>

```
@Override
    protected void onSaveInstanceState (Bundle outState)
    {
        outState.putString("user_name", userNameEdtTxt.getText().toString());
        outState.putString("password",  passEdtTxt.getText().toString());
    } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-01T14:13:17.223

在 onConfigurationChanged 方法中，首先在全局变量中获取两个编辑文本的数据，然后调用 setContentView 方法。现在将保存的数据再次设置到编辑文本中。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-10-04T11:13:40.937

给元素一个 id，Android 会为你管理它。

```
android:id="@id/anything" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-29T18:13:18.523

我正在恢复实例以恢复值，它对我来说很好:)

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.addtask2);
    if(savedInstanceState!=null)
     onRestoreInstanceState(savedInstanceState);

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-17T05:09:14.163

有很多方法可以做到这一点。最简单的是您的问题中的 2(b)。在您的清单中提及`android:configChanges="orientation|keyboardHidden|screenSize"`，以便 Activity 在方向更改时不会被破坏。

来电。`setContentView()`_ `onConfigChange()`但在调用 setContentView() 之前将 EditText 数据转换为字符串并在调用后将其设置回来`setContentView()`

```
 @Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    mEditTextData = mEditText.getText().tostring();//mEditTextData is a String 
                                                   //member variable
    setContentView(R.layout.myLayout);
    initializeViews();
}

private void initializeViews(){
    mEditText = (EditText)findViewById(R.id.edittext1);
    mEdiText.setText(mEditTextData);
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-18T16:30:52.677

以下应该工作并且是活动和片段的标准

```
@Override
public void onSaveInstanceState (Bundle outState) 
{
     outState.putString("editTextData1", editText1.getText().toString());
     outState.putString("editTextData2", editText2.getText().toString());

     super.onSaveInstanceState(outState);
}

@Override
public void onCreate(Bundle savedInstanceState)
{
      super.onCreate();

      ... find references to editText1, editText2

      if (savedInstanceState != null)
      {
           editText1.setText(savedInstanceState.getString("editTextData1");
           editText2.setText(savedInstanceState.getString("editTextData2");
      }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-10T21:56:10.630

正如 Yalla T 所指出的，重要的是不要重新创建片段。如果重用现有片段，EditText 不会丢失其内容。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.activity_frame);
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);

    // Display the fragment as the main content.
    // Do not do this. It will recreate the fragment on orientation change!
    // getSupportFragmentManager().beginTransaction().replace(android.R.id.content, new Fragment_Places()).commit();

    // Instead do this
    String fragTag = "fragUniqueName";
    FragmentManager fm = getSupportFragmentManager();
    Fragment fragment = (Fragment) fm.findFragmentByTag(fragTag);
    if (fragment == null)
        fragment = new Fragment_XXX(); // Here your fragment
    FragmentTransaction ft = fm.beginTransaction();
    // ft.setCustomAnimations(R.xml.anim_slide_in_from_right, R.xml.anim_slide_out_left,
    // R.xml.anim_slide_in_from_left, R.xml.anim_slide_out_right);
    ft.replace(android.R.id.content, fragment, fragTag);
    // ft.addToBackStack(null); // Depends on what you want to do with your back button
    ft.commit();

} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-20T08:49:08.213

从清单文件中删除 android:configChanges 属性并让 android 处理方向更改，您在 edittext 中的数据将自动保留。

现在您提到的问题是进度对话框强制关闭，这是因为当方向改变时，在背景中运行的线程正在尝试更新可见的旧对话框组件。您可以通过关闭有关 savedinstancestate 方法的对话框并调用您要执行 onRestoreInstanceState 方法的过程来处理它。

以下是一个示例，希望它有助于解决您的问题：-

```
public class MyActivity extends Activity {
    private static final String TAG = "com.example.handledataorientationchange.MainActivity";
    private static ProgressDialog progressDialog;
    private static Thread thread;
    private static boolean isTaskRunnig;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d(TAG, "onCreate");
        setContentView(R.layout.main);
        Button button = (Button) findViewById(R.id.button);
        button.setOnClickListener(new EditText.OnClickListener() {

            @Override
            public void onClick(View v) {
                perform();
                isTaskRunnig = true;
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void perform() {
        Log.d(TAG, "perform");
        progressDialog = android.app.ProgressDialog.show(this, null,
                "Working, please wait...");
        progressDialog
                .setOnDismissListener(new DialogInterface.OnDismissListener() {

                    @Override
                    public void onDismiss(DialogInterface dialog) {
                        //isTaskRunnig = false;
                    }
                });
        thread = new Thread() {
            public void run() {
                Log.d(TAG, "run");
                int result = 0;
                try {

                    // Thread.sleep(5000);
                    for (int i = 0; i < 20000000; i++) {

                    }
                    result = 1;
                    isTaskRunnig = false;
                } catch (Exception e) {
                    e.printStackTrace();
                    result = 0;
                }
                Message msg = new Message();
                msg.what = result;
                handler.sendMessage(msg);
            };
        };
        thread.start();
    }

    // handler to update the progress dialgo while the background task is in
    // progress
    private static Handler handler = new Handler() {

        public void handleMessage(Message msg) {
            Log.d(TAG, "handleMessage");
            int result = msg.what;
            if (result == 1) {// if the task is completed successfully
                Log.d(TAG, "Task complete");
                try {
                    progressDialog.dismiss();
                } catch (Exception e) {
                    e.printStackTrace();
                    isTaskRunnig = true;
                }

            }

        }
    };

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        Log.d(TAG, "onRestoreInstanceState" + isTaskRunnig);
        if (isTaskRunnig) {
            perform();

        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        Log.d(TAG, "onSaveInstanceState");
        if (thread.isAlive()) {
            thread.interrupt();
            Log.d(TAG, thread.isAlive() + "");
            progressDialog.dismiss();
        }

    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-12-31T14:25:32.707

[![在此处输入图像描述](../Images/6286fe1936e4d57bb58dfc56a6871547.png)](https://i.stack.imgur.com/ywB4B.png)

# 保存状态 = 保存（片段状态 + 活动状态）

当涉及到在方向更改期间保存 Fragment 的状态时，我通常会这样做。

**1）片段状态：**

> 保存和恢复 EditText 值

```
// Saving State

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString("USER_NAME", username.getText().toString());
    outState.putString("PASSWORD", password.getText().toString());
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.user_name_fragment, parent, false);

    username = (EditText) view.findViewById(R.id.username);
    password = (EditText) view.findViewById(R.id.password);

// Retriving value

    if (savedInstanceState != null) {
        username.setText(savedInstanceState.getString("USER_NAME"));
        password.setText(savedInstanceState.getString("PASSWORD"));
    }

    return view;
} 
```

**2）活动状态**：：

> 在活动第一次启动时创建一个新实例，否则使用**TAG**和**FragmentManager找到旧片段**

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity);

    fragmentManager = getSupportFragmentManager();

    if(savedInstanceState==null) {
        userFragment = UserNameFragment.newInstance();
        fragmentManager.beginTransaction().add(R.id.profile, userFragment, "TAG").commit();
    }
    else {
        userFragment = fragmentManager.findFragmentByTag("TAG");
    }

} 
```

[您可以在此处](https://github.com/rohitksingh/My_Android_Garage/blob/master/Fragment%20Related%20Stuff/app/src/main/java/rohitksingh/com/fragmentrelatedstuff/Activities/FirstActivity.java)查看完整的工作代码

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-13T11:56:29.937

下面的代码对我有用。需要注意两件事。

1.  每个输入字段（编辑文本或 TextInputEditText）分配唯一的 id。
2.  清单活动声明应具有以下值的配置更改属性。

    android:configChanges="方向|keyboardHidden|screenSize"

清单中的示例活动声明。

```
<activity
      android:name=".screens.register.RegisterActivity"
      android:configChanges="orientation|keyboardHidden|screenSize"
      android:exported="true"
      android:label="Registration"
      android:theme="@style/AppTheme.NoActionBar" /> 
```

样品申报

```
 <com.google.android.material.textfield.TextInputLayout
        android:id="@+id/inputLayout"
        style="@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:boxCornerRadiusBottomEnd="@dimen/boxCornerRadiusDP"
        app:boxCornerRadiusBottomStart="@dimen/boxCornerRadiusDP"
        app:boxCornerRadiusTopEnd="@dimen/boxCornerRadiusDP"
        app:boxCornerRadiusTopStart="@dimen/boxCornerRadiusDP">

        <com.google.android.material.textfield.TextInputEditText
            android:id="@+id/inputEditText"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:focusable="true"
            android:fontFamily="@font/proxima_nova_semi_bold"
            android:inputType="textCapWords"
            android:lines="1"
            android:textColor="@color/colorInputText"
            android:textColorHint="@color/colorInputText" />
    </com.google.android.material.textfield.TextInputLayout> 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-09-14T08:05:37.370

这可能会帮助你

如果您的**android:targetSdkVersion="12" 或更少**

```
android:configChanges="orientation|keyboardHidden"> 
```

如果你的 **android:targetSdkVersion="13" 或更多**

```
android:configChanges="orientation|keyboardHidden|screenSize"> 
```

# java - 在所有操作系统中获取根文件列表

> ID：12420399
> 
> 赞同：-1
> 
> 时间：2012-09-14T08:03:45.983
> 
> 标签：java, file

在 java 中，我使用 File.listRoots() 方法来获取根文件列表。它适用于 Windows，但不适用于 linux。我希望它适用于所有操作系统、windows、linux、mac os 等。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T08:48:11.210

在 Linux 等 *NIX 系统上只有一个文件系统根目录，称为`/`. 可能有不同的分区，挂载在文件系统树的不同位置，但只有一棵树，并且`/`是它的根。其他一切都可以从那里到达。

如果您想列出分区，那将是一个不同的问题，并且可能没有可移植的解决方案，因为分区也不是可移植的概念。例如，Solaris 在那个领域做了一些奇怪的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:27:14.383

我觉得这个结果是对的，因为java和你的系统没有关系。你的windows中可能有很多逻辑分区。但是在linux中，如果你不必更改默认配置，那么你只有一个分区是“/”。

# database - 将用户名和密码存储在数据库中，然后用于访问不同的服务

> ID：12420404
> 
> 赞同：1
> 
> 时间：2012-09-14T08:04:10.037
> 
> 标签：database, web-services, passwords

我正在构建一个允许用户登录的 Web 服务，然后它将从另一个站点（我不拥有）下载所有的时间表数据。我只想让他们输入一次用户名和密码来登录我的服务，然后再次使用它来登录下一个。我需要根据那里的用户详细信息存储下载的数据，但我知道出于安全原因我必须在数据库中对密码进行哈希处理，所以我如何使用它来登录第二个服务。我虽然想取消散列，但这首先破坏了散列的全部意义。

我想这样做的原因是，然后可以将时间表下载到 android 应用程序，以便在没有数据连接时可以查看它。

任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:23:40.437

如果这些服务在您登录后给您一个“令牌”，您可以将其存储在您的数据库中以再次访问这些服务，因此当用户登录您的网络服务时，在散列他们的信息之前，您可以使用它来登录其他服务，然后存储他们的“令牌”

这种方法只有在他们在登录后给你类似令牌的情况下才有效，如果他们没有，我认为你需要按原样存储登录信息，并且至少在 base64 上编码，这不是那么安全但不是那么明显

另一个想法可能是创建一个只有登录信息的单独数据库，并且只能通过他们的登录名（散列）访问，但这意味着您需要在数据库上创建一个用户并仅授予对该特定数据库的访问权限，只读

我确定有更多的解决方案，但希望它会有所帮助

# .net - vb.net 更新体式任务

> ID：12420405
> 
> 赞同：1
> 
> 时间：2012-09-14T08:04:15.740
> 
> 标签：.net, vb.net, asana

我正在尝试使用 VB.NET 将数据发布回 Asana Api，

我能够毫无问题地检索数据，但正在努力重新获取数据。下面是我尝试更新任务中的注释的示例。

```
Dim add As String = path + "tasks/" + t_id.Text
        request = WebRequest.Create(add)

        ' Set the authentication
        setauth()
        ' Set type to POST  
        request.Method = "POST"
        request.KeepAlive = True
        request.ContentType = "application/x-www-form-urlencoded"

        data = "-d notes=" + t_notes.Text
        byteData = UTF8Encoding.UTF8.GetBytes(data)
        request.ContentLength = byteData.Length

        'Write(data)
        Try
            ps = request.GetRequestStream()
            ps.Write(byteData, 0, byteData.Length)
        Finally
            If Not ps Is Nothing Then ps.Close()
        End Try

        response = request.GetResponse() 
```

我不断收到 404 错误，但不确定我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:59:02.920

（我在 Asana 工作）

如果你想更新一个任务，你应该使用 PUT HTTP 方法，而不是 POST。

# mocking - PowerMock 静态类不模拟

> ID：12420410
> 
> 赞同：13
> 
> 时间：2012-09-14T08:04:41.473
> 
> 标签：mocking, testng, static-methods, mockito

```
public class TestStatic {
    public static int methodstatic(){
        return 3;
    }
}

@Test
@PrepareForTest({TestStatic.class})
public class TestStaticTest extends PowerMockTestCase {

    public void testMethodstatic() throws Exception {
        PowerMockito.mock(TestStatic.class);
        Mockito.when(TestStatic.methodstatic()).thenReturn(5);
        PowerMockito.verifyStatic();
        assertThat("dff",TestStatic.methodstatic()==5);
    }

    @ObjectFactory
    public IObjectFactory getObjectFactory() {
        return new org.powermock.modules.testng.PowerMockObjectFactory();
    }
} 
```

例外：

```
org.mockito.exceptions.misusing.MissingMethodInvocationException: 
when() requires an argument which has to be 'a method call on a mock'.
For example:
    when(mock.getArticles()).thenReturn(articles);

Also, this error might show up because:
1\. you stub either of: final/private/equals()/hashCode() methods.
Those methods *cannot* be stubbed/verified.
2\. inside when() you don't call method on mock but on some other object. 
```

我通过 Intellij 运行它，遗留代码有很多方法......

有人有想法，我通过了官方教程，并不意味着让这个简单的测试工作

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-09-10T16:28:41.507

我在我的案例中找到了此类问题的解决方案，想与您分享：

如果我在测试类中调用模拟方法：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(Calendar.class)
public class TestClass {
  @Test
  public void testGetDefaultDeploymentTime()
    PowerMockito.mockStatic(Calendar.class);
    Calendar calendar = new GregorianCalendar();
    calendar.set(Calendar.HOUR_OF_DAY, 8);
    calendar.set(Calendar.MINUTE, 0);
    when(Calendar.getInstance()).thenReturn(calendar);
    Calendar.getInstance();
  }
} 
```

它工作得很好。但是当我重写测试时，它在另一个类中调用了 Calendar.getInstance() ，它使用了真正的 Calendar 方法。

```
@Test
public void testGetDefaultDeploymentTime() throws Exception {
  mockUserBehaviour();
  new AnotherClass().anotherClassMethodCall();    // Calendar.getInstance is called here
} 
```

因此，作为解决方案，我将 AnotherClass.class 添加到 @PrepareForTest 并且它现在可以工作。

```
@PrepareForTest({Calendar.class, AnotherClass.class}) 
```

似乎 PowerMock 需要知道将在哪里调用模拟的静态方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-10T17:30:59.507

我查看了我对遗留代码的测试，我可以看到你调用`PowerMockito.mock(TestStatic.class)`而不是`PowerMockito.mockStatic(TestStatic.class)`. `PowerMockito.when(...)`使用or没关系`Mockito.when(...)`，因为第一个只是委托给第二个。

还有一点：我知道您可能必须测试遗留代码。也许你可以用 JUnit4 风格来做，只是为了不产生遗留测试？Brice 提到的例子就是一个很好的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:19:55.620

看看这个答案：[Mocking Logger and LoggerFactory with PowerMock and Mockito](https://stackoverflow.com/questions/8948916/mocking-logger-and-loggerfactory-with-powermock-and-mockito/9052915#9052915)

`Mockito.when`如果你想存根静态调用，你也不应该使用，但是`PowerMockito.when`.

静态是可测试性的噩梦，您要尽可能避免这种情况，并重新设计您的设计，以便不再使用静态或不必使用 PowerMock 技巧来测试您的生产代码。

# networking - Active Directory 无法识别系统

> ID：12420415
> 
> 赞同：1
> 
> 时间：2012-09-14T08:04:59.390
> 
> 标签：networking, active-directory, windows-server-2008, dhcp, vmware-workstation

**我的配置：**我正在使用来自 VMware(8.0.0) 的 Windows Server 2008，它工作正常，现在我有 5 个 Windows 7 系统。我已经创建了 Active Directory 和 DNS（即 abc.com）。

**问题：** 每当我尝试将这些系统添加到组中时，AD 都无法检测到这 5 个系统（我的意思是主机名）。

***去做（？）：***

1.  我应该将 DHCP 安装到我的服务器中，然后手动添加这些客户端，然后它将显示在 Active Directory 中。或者
2.  我必须创建一个网络域，使服务器能够识别其他 5 个系统

任何有关这方面的输入让我的 Active Directory 识别其他 5 个 windows7 客户端将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:51:52.663

好的长格式答案，所以它不在评论中。

1.  这是对市场上的 2 种格式的反应

    *   IPV4 - 现在市场上 90% 的 NIC 的最旧的当前标准。100% 的 NIC 将符合此标准
    *   IPV6 - 最新（约 2 年），大约有 50% 的市场实施。
    *   承认从 IPV4 到 IPV6 的行业过渡将帮助您解决一些 DHCP/网络传输问题。我知道这个问题，已委托更专业的网络/系统管理员执行此问题解决。我知道这是一项对基础设施进行库存控制和标准化的任务。
2.  首先，您有单节点 AD 还是农场？

    *   农场：从 AD 的主干中广泛搜索计算机。
        *   这将进行完整的“库存”搜索。过去，AD 实施者没有为“新”计算机设置默认目录，因此他们转到顶部中继以进行正确路由。所以我必须对计算机进行顶部树干搜索，一旦找到，手动将其拖到正确的分支或肢体上。
    *   单节点：遵循与上面“农场”相同的方法，但由于您的主干更加本地化，​​不一定分散在多个位置，因此您不会那么头疼。
3.  总是需要 DHCP。特别是如果您想反对静态 IP 分配并希望强制用户使用计算机名称而不是 IP。大多数服务器使用静态 DHCP 进行后门访问以进行管理。在我过去的计算机管理中，我使用 DHCP 为计算机实施和强制实施动态 IP 地址，以**防止**任何人使用 IP 地址作为进入您的网络的入口点。

100% 确保计算机未以任何方式向 AD 注册的一种方法：

1.  **以本地管理员**身份登录所有这些步骤，除非另有说明。
2.  断开计算机与网络的连接
3.  将其从域更改为工作组（我总是使用“TEMP”作为我的工作组）
4.  然后进行强制重启。
5.  将计算机重命名为另一个有效的基础结构命名约定
6.  强制重启。
7.  在此重新启动期间，将跳线重新连接回 NIC（最好在黑色 Windows 加载屏幕之前）
8.  **可选**将新计算机名称添加到所需的分支/文件夹
9.  **以本地管理员**身份登录，从工作组更改为域，使用 AD 管理员的凭据进行身份验证
    *   如果您在此处出错，则需要验证计算机是否确实在网络上（应该已提取有效的子网 IP 地址）
    *   如果您提取了无效的 IP 地址，请验证网络端口的有效性和计算机背面的活动。
10.  验证位置（如果您没有在 pt 8 处预先添加计算机）并移动到相应的分支/文件夹。

现在所有这一切都假设您使用**物理计算机**执行此操作。

如果您正在使用 VMWare 的**虚拟计算机**，那么您将必须验证这些问题点：

1.  VMachines 设备设置，确保它们与其他有效的 VBoxes 相似/相同。
2.  确保您没有超出许可数量的 CPU 或实例

我不记得 AD 是否已通过客户端许可证获得许可，或者他们是否只是使用服务器许可证将其批量化。他们在一年中改变了 CAL 许可选项，实施者很难跟踪，只有销售人员；）

# wordpress - 如何在没有 sudo 的共享主机上使用 Capistrano 部署 WordPress

> ID：12420417
> 
> 赞同：1
> 
> 时间：2012-09-14T08:05:06.387
> 
> 标签：wordpress, capistrano, sudo

为了追求更专业的 WordPress 开发和部署环境，我正在尝试使用 Capistrano 从我的本地开发环境部署到登台和生产服务器，但我无法让它正常工作。

我在 Site5 共享主机上，并且正在部署到具有两个不同域的一台服务器 - staging.example.com 和 example.com。

我以[https://github.com/markjaquith/WP-Stack](https://github.com/markjaquith/WP-Stack)为基础并添加了

`set :user, "myserveruser"`到我的 config.rb 文件，因为没有那个连接就无法工作。

运行`cap deploy:check`告诉我*“您似乎已安装所有必要的依赖项”*，我可以运行`cap deploy:setup`它成功连接到登台和生产创建*版本*和*共享*目录等。

当我运行时问题就来了`cap deploy`。在提示我输入 sudo 密码之前，一切都可以正常工作。这不是一个正常的登录提示，但不允许我输入密码。因为我在共享主机上，所以无论如何我都没有 sudo 访问权限。

它类似于[Capistrano 在提示输入 SUDO 密码到 Ubuntu 机器时挂起的](https://stackoverflow.com/questions/431925/capistrano-is-hanging-when-prompting-for-sudo-password-to-an-ubuntu-box)问题，但解决方案并没有解决我的所有问题。

我已经设置`default_run_options[:pty] = true`了我需要的接缝，但仍然得到 sudo 提示。

我正在使用无密码 ssh，因此 Capistrano 能够连接并执行所需的所有操作，而无需提示输入密码，并且我还使用 SSH 配置文件来处理代理转发，因此服务器也可以连接到我的 git 存储库。我已经确认这是有效的。

我发现其他人也有类似的问题 - [Capistrano 使用 sudo 甚至使用“set :use_sudo, false”](https://stackoverflow.com/questions/10761534/capistrano-using-sudo-even-with-set-use-sudo-false) - 等等，但没有一个解决方案有效。

我正在使用`default_run_options[:pty] = true`并尝试使用`set :use_sudo, false`，`default_run_options[:shell] = false`但我仍然遇到同样的问题。

您可以在此处查看我的终端输出 - [http://pastebin.com/5xZmCnyA](http://pastebin.com/5xZmCnyA)

我真的要疯了！任何帮助将不胜感激！！！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:36:17.940

没有`sudo`. 这是唯一需要 sudo 的部分，因为它会创建一个目录`public_html/staging.exposecreative.org`，在你的情况下......

该步骤不应该是必需的，您可以自己创建该目录（假设您有权限）..

但是，您将面临的问题是共享主机将希望您`index.php`直接进入`public_html`，为此，您需要对任何目录`public_html`的写入权限，而共享主机不允许（几乎可以肯定）

该行`default_run_options[:pty] = true`与 Capistrano 是否假装是一个交互式外壳有关。许多命令（包括 sudo）使用它来确定它们是否应该打扰要求用户输入，或者它们是否是自动化过程的一部分（在这种情况下，没有办法要求输入）

我的建议（作为 Capistrano 维护者） - 不要在共享主机上尝试这个，它几乎肯定不会工作。（对不起，他们的限制，不是我们的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T21:02:19.793

我写了一篇关于[如何在共享主机](http://cfxdesign.com/deploy-wordpress-with-capistrano-on-bluehost)(Bluehost) 上使用 Capistrano 部署 WordPress 的详细文章。我使用 Roots/Bedrock 堆栈，我只花了大约 20 分钟就可以启动和运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-24T22:47:22.947

我使用 Shipit JS 而不是 Capistrano 制作了一个 WordPress 开发堆栈，因为我对 Ruby 不满意。也许这会有所帮助。随意使用它和/或在需要时发布一些问题。问候。

[WP-丛林/盆栽](https://github.com/wp-jungle/bonzai "Bonzai - 使用 Shipit JS 的 WordPress 开发和部署堆栈")

# jpa - JPA 实体中的多对多关系

> ID：12420418
> 
> 赞同：1
> 
> 时间：2012-09-14T08:05:11.770
> 
> 标签：jpa, many-to-many

我有 5 张桌子：

## 用户：

用户名（PK）

## 角色：

role_id (PK)角色名

## 权限：

perm_id(PK)
perm_name

## User_role_rels：

ur_id(PK)
用户名​​(FK) -> user.username
role_id(FK) -> role.role_id

## Role_perm_rels：

rp_id(PK)
role_id(FK) -> role.role_id
perm_id(FK) -> Permissions.perm_id

当我为这五个表创建 JPA 实体时，我在用户实体中获得了 UserRoleRels 列表，但我需要该用户的权限列表。因此，用户实体中应该有一个 List permList。

我是 JPA 的新手，不知道如何使用注释来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:41:11.910

`User`由于和之间没有直接关系`Permission`，因此`User`没有`permList`集合属性是正确的。

假设您的 IDE 已根据您的表正确创建了实体，那么您的类中没有`ManyToMany`注释，而只有`OneToMany`和`ManyToOne`. 这使得获取权限集合有点麻烦：

```
String userName = "";
User myUser = entityManager.find(User.class, userName);
for (UserRoleRels urr : myUser.getUserRoleRelsList()) {
    Role r = urr.getRole();
    for(RolePermRels rpr : r.getRolePermRelsList()) {
        Permission p = rpr.getPermission();
    }
} 
```

* * *

如果您在 ManyToMany 关系表中没有额外的属性（在您的情况下`User_role_rels`和`Role_perm_rels`），您可以删除两者的 PK 字段。这将使您的 IDE：(1) 创建更简单的实体类，(2) 避免为关系表创建实体类，(3) 使用`ManyToMany`注释。通过该更改，您将能够更轻松地以更易读的方式访问权限：

```
String userName = "";
User myUser = entityManager.find(User.class, userName);
for (Role r : myUser.getRoleList()) {
    List<Permission> pl = r.getPermissionList();
} 
```

有用的链接：[EclipseLink 用户指南](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Mapping/Relationship_Mappings/Collection_Mappings/ManyToMany)、[JPA Wikibooks](http://en.wikibooks.org/wiki/Java_Persistence/ManyToMany)。

# powershell - Powershell 更新对象中的命名元素

> ID：12420421
> 
> 赞同：0
> 
> 时间：2012-09-14T08:05:24.110
> 
> 标签：powershell

我正在编写一个脚本来通过 powershell 自动创建用户帐户。其中之一是为新用户建立一个电子邮件地址。我们将邮箱（或多或少）平均分布在 3 个数据库上：Default01、Default02 和 Default03。

为了确定帐户数量最少的数据库，我计算了当前的统计数据。

```
 function Get-MDBMailboxCount ([string]$DN) {
            $Searcher = New-Object System.DirectoryServices.DirectorySearcher
            $Searcher.SearchRoot = New-Object System.DirectoryServices.DirectoryEntry ("LDAP://$(([system.directoryservices.activedirectory.domain]::GetCurrentDomain()).Name)")
            $Searcher.Filter = "(&(objectClass=user)(homeMDB=$DN))"
            $Searcher.PageSize = 10000
            $Searcher.SearchScope = "Subtree"
            $results = $Searcher.FindAll()
            $returnValue = $results.Count

            #dispose of the search and results properly to avoid a memory leak
            $Searcher.Dispose()
            $results.Dispose()

            return $returnValue

       }
$Databases = (Get-MailboxDatabase)  Where {$_.Name -like 'Default*'} | Select-Object Name, @{Name="Count";Expression={Get-MDBMailboxCount -DN $_.DistinguishedName}} | Sort-Object count

} 
```

这将返回一个对象 $databases ，其中包含**Name**和**Count**列。然后我提取计数最低的数据库。

```
$DB = $Databases |Sort-Object Count |Select-Object -First 1 
```

到目前为止一切顺利:) 但是由于我的脚本能够一次创建多个帐户，所以我想在每次在 $databases 对象中创建用户时更新计数器。（我不想再次运行该功能，因为它可能需要几秒钟来处理）。我可以像这样更新对象：

```
($databases | Where {$_.Name -eq $($DB.Name)}).Count = $NewCount 
```

但我想知道是否有更简单的方法来更新 Powershell 对象中的元素。就像是

```
$Databases["Default01"].Count = $NewCount 
```

这样的事情可能吗？还是没有其他/更好的方法来更新对象中的元素？

Get-MDBMailboxCount 函数的功劳转到 [链接](http://blog.powershell.no/2010/11/21/retrieve-number-of-mailboxes-per-database-in-exchange-server-2010/ "这里")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:20:33.273

如果您已经拥有对当前 DB 对象的引用，则只需`Count`直接更新其属性即可。语法是`$DB.Count = <new value>`或`$DB.Count += <amount to add>`

```
$databases = <do expensive get operation, get initial counts>

foreach($newUser in $userList)
{
   $DB = $databases | Sort-Object Count | Select-Object -First 1
   < go add users to the particular $DB, keep track of how many new users >
   $DB.Count += $numNewUsers   # or $DB.Count = $totalUserCount, whatever you like
} 
```

`$DB``$databases`是指向与数组中相同的底层对象的引用。因此，当您设置 时`$DB.Count`，它也会更新 中的正确元素`$databases`，并且下次对数组进行排序时，它将使用新的计数。

# iphone - 如何在现有的 Xcode 项目中安装 phoneGap

> ID：12420426
> 
> 赞同：5
> 
> 时间：2012-09-14T08:05:42.387
> 
> 标签：iphone, cordova

我已经构建了一个没有 phoneGap 的 Xcode 项目，但是客户想要添加一些新功能。所以我决定使用phoneGap来做，我不知道如何将phoneGap导入我的旧Xcode项目。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T08:12:14.530

您可以按照以下步骤在任何 ios 项目中嵌入cordova webview：（cordova 版本 < 2.3 的步骤，在 2.3 中有点不同，请参见下面的链接）

> 将 Cleaver 添加到您的 Xcode 项目（CordovaLib 子项目）

```
Install Cordova
Copy the Cordova.plist file into your project folder on disk
Drag and drop the Cordova.plist file into the Project Navigator of Xcode
Choose the radio-button "Create groups for any added folders"
Press the key combination Option-Command-A, which should drop down a sheet to add files to your project (the "Add Files..." sheet). Make sure the "Created groups for any added folders" radio-button is selected
Press the key combination Shift-Command-G, which should drop down another sheet for you to go to a folder (the "Go to the folder:" sheet)
Enter ~/Documents/CordovaLib/ in the "Go to the folder:" sheet and then press the "Go" button
Select the VERSION file in the the "Add Files..." sheet
Press the "Add" button in the "Add Files..." sheet
Press the key combination Option-Command-A, which should drop down a sheet to add files to your project (the "Add Files..." sheet). Make sure the "Created groups for any added folders" radio-button is selected
Press the key combination Shift-Command-G, which should drop down another sheet for you to go to a folder (the "Go to the folder:" sheet)
Enter ~/Documents/CordovaLib/CordovaLib.xcodeproj in the "Go to the folder:" sheet and then press the "Go" button
Press the "Add" button in the "Add Files..." sheet
Select CordovaLib.xcodeproj in the Project Navigator
Press the key combination Option-Command-1 to show the File Inspector
Choose "Relative to CORDOVALIB" in the File Inspector for the drop-down menu for Location
Click on the project icon in the Project Navigator, select your Project, then select the "Build Settings" tab
Add -all_load and -Obj-C - for the "Other Linker Flags" value
Click on the project icon in the Project Navigator, select your Target, then select the "Build Phases" tab
Expand "Link Binaries with Libraries"

Click on the "+" button, and add these frameworks (and optionally in the Project Navigator, move them under the Frameworks group):

AddressBook.framework
AddressBookUI.framework
AudioToolbox.framework
AVFoundation.framework
CoreLocation.framework
MediaPlayer.framework
QuartzCore.framework
SystemConfiguration.framework
MobileCoreServices.framework
CoreMedia.framework

Expand "Target Dependencies" - the top box labeled like this if you have multiple boxes!
Click on the "+" button, and add the CordovaLib build product
Expand "Link Binaries with Libraries" - the top box labeled like this if you have multiple boxes!
Click on the "+" button, and add libCordova.a 
```

了解更多信息

[phonegap 切割器 < 2.3.0](http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS)

[phonegap 切割器 >= 2.3.0](http://docs.phonegap.com/en/2.3.0/guide_cordova-webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS)

# java - 破坏二进制文件

> ID：12420430
> 
> 赞同：0
> 
> 时间：2012-09-14T08:05:52.910
> 
> 标签：java, io, arraylist, bytearray

参考我[之前的问题](https://stackoverflow.com/questions/12296295/splitting-binary-files-and-adding-data-to-each-chunk)。

我用以下方法制作了程序：
程序首先从文件中读取 2k 数据并将其存储到一个字节数组中。
然后将要添加到每个数据包的数据也存储在一个数组中，并将两者都添加到数组列表中。然后将数组列表写入文件的输出流。

代码在这里：

```
File bin=chooser.getSelectedFile();
int filesize=(int)bin.length();
int pcount=filesize/2048; 
byte[] file=new byte[filesize];
byte[] meta=new byte[12];
int arraysize=pcount*12+filesize;
byte[] rootfile=new byte[46];
ArrayList al = new ArrayList();
String root;
prbar.setVisible(true);
int mark=0;
String metas;
try{
    FileInputStream fis=new FileInputStream(bin);
    FileOutputStream fos=new FileOutputStream(bin.getName().replace(".bin", ".xyz"));
    ObjectOutputStream os=new ObjectOutputStream(fos);
    root="46kb"+"5678"+"0000"+pcount+"MYBOX"+"13"+"S208";
    rootfile=root.getBytes();
    for(int n=0;n<=pcount;n++)
    {
        fis.read(file, 0, 2048);
        mark=mark+2048;
        int v=(mark/filesize)*100;
        prbar.setValue(v);
        metas="02KB"+"1234"+n;
        meta=metas.getBytes();

        al.add(rootfile);
        al.add(meta);
        al.add(file);
    }
    os.writeObject(al.toArray());
}
catch(Exception ex){
    erlabel.setText(ex.getMessage());
} 
```

程序运行没有任何错误，但文件未正确创建。方法错误或代码错误。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:18:30.517

您似乎正在编写自己的二进制格式，但您使用的是具有自己标头的 ObjectOutputStream。writeObject 以允许 Java 进程反序列化该对象的方式写入对象而不是数据，例如使用它的类层次结构和字段名称。

对于二进制文件，我建议您使用带有 BufferedOutputStream 的普通 DataOutputStream ，这将更高效并执行您想要的操作。

我还建议您在生成数据时编写数据，而不是使用 ArrayList。这将使用更少的内存，使代码更简单，更快。

* * *

我会更像这样写代码

```
File bin = chooser.getSelectedFile();
int filesize = (int) bin.length();
int pcount = (filesize + 2048 - 1) / 2048;
byte[] file = new byte[2048];

FileInputStream fis = new FileInputStream(bin);
String name2 = bin.getName().replace(".bin", ".xyz");
OutputStream os = new BufferedOutputStream(new FileOutputStream(name2));
byte[] rootfile = ("46kb" + "5678" + "0000" + pcount + "MYBOX" + "13" + "S208").getBytes("UTF-8");

for (int n = 0; n < pcount; n++) {
    os.write(rootfile);
    byte[] metas = ("02KB" + "1234" + n).getBytes("UTF-8");
    os.write(metas);

    int len = fis.read(file);

    os.write(file, 0, len);
    int percent = 100 * n / pcount;
    prbar.setValue(percent);
}
ow.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:18:13.527

首先是最小的事情：

```
int v=(mark/filesize)*100; 
```

我认为使用整数除法总是产生 0。

```
int v = mark * 100 / filesize; 
```

byte[] 对象（`file`例如）被创建一次和多次添加到列表中。您将获得最后一次覆盖的 n 个副本。

# javascript - 数据填充在 Firefox 中但不在 IE 中（所有版本）

> ID：12420438
> 
> 赞同：0
> 
> 时间：2012-09-14T08:06:25.990
> 
> 标签：javascript, jquery

下面的 Javascript 代码工作正常并在 Firefox 中显示数据，但在 IE 中没有显示任何内容。

```
function AddToTable(tblID, dataObject)
{
    for (var count = 0; count < dataObject.length; count++)
    {
        var row = document.createElement("TR");
        row.setAttribute("className","lineHeight");

        var cell = document.createElement("TD");
        var cell1 = document.createElement("TD");

        cell.setAttribute("align" , "center");
        cell.setAttribute("width" , "3%");
        cell1.innerHTML = "<b>* </b>" + dataObject[count];

        row.appendChild(cell);
        row.appendChild(cell1);
        tblID.appendChild(row);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:13:43.767

我创建了[JS Fiddle](http://jsfiddle.net/gbsandeep/eUnnc/)

它也适用于 IE (IE10)。兼容模式 - IE9 和 IE8 有效，IE7 - 无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:52:51.687

它现在对我来说工作正常..使用**jQuery** 现在是时候好好学习 jQuery..这是代码片段.. 它在 javascript 中不起作用，因为“createElement”不适用于 JS。

```
function AddToTable(tblID, decodedValue)
{
    var $jAdd = jQuery.noConflict();
    var row= $jAdd("<tr/>").attr("className","lineHeight");
    var cell = $jAdd("<td/>").attr({"align" : "center","width" : "3%"});
    var cell1 = $jAdd("<td/>").html("<b>* </b>" + decodedValue);
    row.append(cell);
    row.append(cell1);
    $jAdd(tblID).append(row);
} 
```

# signalr - SignalR 返回错误 - 反序列化对象时意外结束

> ID：12420443
> 
> 赞同：1
> 
> 时间：2012-09-14T08:07:00.240
> 
> 标签：signalr, signalr-hub

我有一个简单的项目，我正在使用signalR，当页面加载时，signalR脚本被成功加载，但是在那之后，调用

> http://localhost:24634/signalr/signalr/connect?transport=foreverFrame&connectionId=dca2db9c-b16a-4b96-96dc-9a6b187b6d9e&connectionData=[{"name":"notifier"}]&tid=5&frameId=1

返回 500 Internal Server Error，我在 fiddler 中检查了这个请求，错误消息说

> 反序列化对象时意外结束。

这是我的集线器定义

```
[HubName("notifier")]
    public class PublishingNotifier: Hub
    {   
        [HubMethodName("send")]
        public void SendMessage(string message)
        {
            Clients.getNotification(message);
        }
    } 
```

这是我的客户代码

```
$(function () {

            var publishingNotifier = $.connection.notifier;

            publishingNotifier.getNotification = function (message) {
                // do something
            };

            $('input[type=submit][id*=cmsB_ChangeStatusToPublishedTop]').on('click', function (e) {
                // do something else
            });

            $.connection.hub.start();
        }); 
```

任何想法可能导致此错误？

**编辑** 这里是堆栈跟踪信息

> [JsonSerializationException：反序列化对象时意外结束。第 1 行，位置 2。]
> Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CheckedRead(JsonReader reader) +75
> Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, Object existingValue) +48
> Newtonsoft .Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, Object existingValue) +86
> Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateList(IWrappedCollection WrappedList, JsonReader reader, String reference, JsonArrayContract contract) +635
> Newtonsoft.Json.Serialization.<>c_ *DisplayClass1.<CreateAndPopulateList>b* _0(IList l, Boolean isTemporaryListReference) +124
> Newtonsoft.Json.Utilities.CollectionUtils.CreateAndPopulateList(Type listType, Action 1 groups, IRequest request) +140 SignalR.PersistentConnection .ProcessRequestAsync（HostContext 上下文）+227 SignalR.Hubs.HubDispatcher.ProcessRequestAsync（HostContext 上下文）+120 SignalR.Hosting.AspNet.AspNetHandler.ProcessRequestAsync（HttpContextBase 上下文）+463 SignalR.Hosting.AspNet.HttpTaskAsyncHandler.System.Web.IHttpAsyncHandler。 BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +68`2 populateList) +546
> Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateAndPopulateList(JsonReader reader, String reference, JsonArrayContract contract) +101
> Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateList(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, Object existingValue, String reference) +62
> Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, Object existingValue) +113
> Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueNonProperty(JsonReader reader, Type objectType, JsonContract contract, JsonConverter converter) +118
> Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType) +125
> Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType) +311
> Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings) +107
> Newtonsoft.Json.JsonConvert.DeserializeObject(String value, JsonSerializerSettings settings) +66
> SignalR.JsonNetSerializer.Parse(String json) +57
> SignalR.Hubs.HubDispatcher.CreateConnection(String connectionId, IEnumerable`
> 
> System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +301 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155

**编辑2：**

还有一点注意 - 从运行没有任何错误的页面中，请求的 url 看起来像这样

> localhost:24634/signalr/signalr/connect?transport=foreverFrame&connectionId=98e6d5b3-b164-4013-92c2-418aa6254f9e&connectionData=%5B%7B%22name%22%3A%22notifier%22%7D%5D&tid=7&frameId=1

失败的请求 url 看起来像这样

> localhost:24634/signalr/signalr/connect?transport=foreverFrame&connectionId=9b398750-99d6-4188-88b5-b41ad9eb82d5&connectionData=[{"name":"notifier"}]&tid=1&frameId=1

您可能注意到，urls 中定义 connectionData 查询字符串参数的方式不同，特别是对于第一个 url，connectionData 已经对查询字符串值进行了 url 编码，而第二个查询字符串参数已经进行了 html 编码。我查看了请求标头，失败的请求 Content-Type 是 text/html，第二个请求的 Content-Type：application/json。

**编辑 3：**

我在 jquery.signalR-0.5.3.js 文件中找到了解析 connectionData 的位置，这里是实际编码 connectionData 值的代码

```
if (connection.data) {
  qs += "&connectionData=" + window.escape(connection.data);
} 
```

如您所见，window.escape() 负责对 connectionData 进行编码，但是，如果我调试此代码，我可以看到 window.escape(connection.data) 确实是 html 编码 connection.data 而不是 url 编码。但这只发生在一个页面上，在另一个页面上，它按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:30:03.283

综上所述，问题原来`window.escape`是被第三方 JS 库覆盖。这导致`window.escape`行为不同于“正常”，导致 SignalR 作为副作用失败。

所以基本上——当这些“奇怪”问题发生时——检查你是否包含了“干扰”的库，并确保使用正确的命名空间（例如使用模块模式）来避免这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-05-02T16:06:28.610

漏洞

我不知道这是否有帮助，但是当我尝试反序列化我的 json 时，出现错误“反序列化对象消息 c# 时意外结束”。 **它有时会发生在我身上，有时不会。我不知道这取决于什么。**

我的json是这样的：

[https://api.myjson.com/bins/l83m8](https://api.myjson.com/bins/l83m8)

在 Visual Studio 2019 上调试 Xamarin 应用程序给了我以下信息：

```
var content = await _client.GetStringAsync(Connection.URL);
invitaciones = JsonConvert.DeserializeObject<RootObject>(content); 
```

变量“内容”有时给我[https://textsaver.flap.tv/lists/2lss](https://textsaver.flap.tv/lists/2lss)有时给我[https://textsaver.flap.tv/lists/2lsu](https://textsaver.flap.tv/lists/2lsu)。

如果你仔细看，你会发现两者是不同的，只是因为，第一个最后少了一个 }。

如果您使用[https://www.unserialize.me/](https://www.unserialize.me/)工具对两者进行反序列化，然后在[https://jsonformatter.curiousconcept.com/](https://jsonformatter.curiousconcept.com/)上验证结果（默认选项），您将看到第一个无效，第二个是有效的。

**解决方案：**

添加验证：如果字符串内容（json）不以 } 结尾，请在末尾添加一个 }。我知道这很愚蠢，但解决了我的问题。

```
 var content = await _client.GetStringAsync(Connection.URL);
 if (!content.EndsWith("}"))
     content = content + "}";
 invitaciones = JsonConvert.DeserializeObject<RootObject>(content); 
```

包：Newtonsoft.Json 12.0.2、Xamarin.Forms 3.6.0.344457。

# javascript - 用于在 Flash 中打开 url 的 jQuery

> ID：12420444
> 
> 赞同：1
> 
> 时间：2012-09-14T08:07:08.493
> 
> 标签：javascript, jquery, flash, actionscript, menu

我在打开链接时遇到了一点问题，因为我使用的是脚本

```
getURL("javascript: $(function(){$('#SCT_InnerContent').load('"+_root.linksDB[id][2]+"?lang=en');});"); 
```

在闪存中，但它只适用于谷歌浏览器。任何人都可以帮助我修改这个脚本以在其他浏览器下运行吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:11:08.570

为什么不将 jQuery 放入页面中的 JavaScript 函数中，然后使用 调用它`ExternalInterface`？这是从 Flash 中与浏览器 JavaScript 进行通信的最可靠的方式。

页面中有这样的东西：

```
<script language="JavaScript">
    function handleFlashCall(arg){ 
        $(function(){$('#SCT_InnerContent').load('"+ arg +"?lang=en');});
    }
</script> 
```

然后，在 Flash 中：

```
ExternalInterface.call("handleFlashCall", _root.linksDB[id][2]); 
```

请参阅此处的说明：

[http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf626ae-7fe8.html#WS2db454920e96a9e51e63e3d11c0bf69084-7f31](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf626ae-7fe8.html#WS2db454920e96a9e51e63e3d11c0bf69084-7f31)

并在此处参考文档：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#call%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#call%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T23:51:22.607

确保您有可用的 allowScriptAccess flashvar 参数并设置为“始终”。看看包装器 html 来设置它。

查看有关[该](http://helpx.adobe.com/flash-player/kb/changes-allowscriptaccess-default-flash-player.html)主题的文档。

# jquery - 使用 jquery 在页面加载时随机调用不同的函数

> ID：12420450
> 
> 赞同：1
> 
> 时间：2012-09-14T08:07:22.367
> 
> 标签：jquery, random

我有六个功能，例如`scan1()`，`scan2()`...。`scan6()`每个函数加载不同的图像。现在我想在每次页面加载时随机调用函数。

例如第一次加载页面，调用`sacn4()`

页面加载第二次，调用`scan6()`

第三次页面加载，调用`scan1()`

等等

页面加载我的意思是页面刷新/重新加载。

或者在我正在尝试的这段代码中帮助我

```
var arr = ['scan1()', 'scan2()', 'scan3()'];
var ran = Math.floor(Math.random() * 6) + 1

$(document).ready(arr[ran]); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:11:48.323

```
$(function() {
    var arr = [scan1, scan2, scan3],
        rand = Math.floor(Math.random() * arr.length),
        func = arr[rand];

    func();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:10:31.973

这应该解决它：

```
var arr = [scan1, scan2, scan3];
var ran = Math.floor(Math.random() * 6) + 1

$(document).ready(arr[ran]()); 
```

您需要使用函数对象而不是包含函数名称的字符串来填充数组。在最后一行，当你说：

```
arr[ran]() 
```

您从数组中检索一个函数，然后调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:11:07.373

从[这里](https://stackoverflow.com/a/359910/1225328)：

```
$(function() {
    var arr = ['scan1', 'scan2', 'scan3'];
    var ran = Math.floor(Math.random() * 3) + 1;
    window[arr[ran]]();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T08:13:55.793

这些函数存储在您的全局对象中，因此您不需要将它们存储在数组中`'functionName()'`，而是作为`'functionName'`。然后使用`call()`or调用`apply()`。

```
var arr = ['scan1', 'scan2', 'scan3'];
var ran = Math.floor(Math.random() * 6) + 1

$(document).ready(window[arr[ran]].call(this)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T08:24:33.243

你应该重构你的代码，你想做的可以用一种更简单的方法来完成，你不需要为每个图像使用 6 个函数，只创建一个`scan()`函数，这个函数将有一个包含所有图像的数组，然后随机选择一个，像这样：

```
function scan() {
    var images = ['im1.jpg','im2.jpg','im3.jpg','im4.jpg','im5.jpg','im6.jpg'];
    var inumber = Math.floor((Math.random()* images.length)+1);

    var random_image = images[inumber-1];

    //Do whatever you want with random_image
    alert( random_image ); //Shows the random image
} 
```

另外，使用上面的代码，您甚至可以在将来将更多图像添加到`images`数组中，它们将自动包含在随机选择中。

使用上面的代码，您`document.ready`将只是：

```
$(document).ready( scan() ); 
```

# c# - 如何让我的视图返回集合的总和？

> ID：12420452
> 
> 赞同：0
> 
> 时间：2012-09-14T08:07:29.767
> 
> 标签：c#

我正在尝试使用以下代码执行此操作，但它给了我很多错误：

```
public abstract class BaseGridViewModel
{

    protected BaseGridViewModel()
    {
        Events = new List<ViewEvent>();
        Watch = Stopwatch.StartNew();
    }
    public SelectList Statuses { get; set; }
    public IList<ViewEvent> Events { get; set; }
    public string Topics { get; set; }
    public SelectList Types { get; set; }
    public string View { get; set; }
    public Stopwatch Watch { get; set; }

    public void Event(string description) {
        if (Watch.IsRunning) {
            Events.Add(new ViewEvent(description, Watch.ElapsedMilliseconds));
        } else {
            throw new Exception("Watch not running");
        }
    }
    public long Elapsed {
        get { 
            return Events.Sum(event => event.Elapsed)
        }
    }

public class ViewEvent {

    public long Elapsed { get; private set; }
    public string Description { get; private set; }
    public string Message { get; private set; }
    public int Quantity { get; private set; }

    public ViewEvent(string description, long elapsedTime, int quantity = 0, string message = "") {
        this.Description = description; 
        this.Elapsed = elapsedTime;
        this.Quantity = quantity;
        this.Message = message;
    }

} 
```

所有 9 个错误都针对这一行：“return Events.Sum(event => event.Elapsed)”

我的语法有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:09:56.257

`event`是关键字，试试`e => e.Elapsed`

# php - Objective-C POST请求不发送数据

> ID：12420453
> 
> 赞同：1
> 
> 时间：2012-09-14T08:07:31.333
> 
> 标签：php, objective-c, ios, post

我有一个方法应该将一些数据发布到 PHP 文件中：

```
-(void)submitForm {
    NSLog(@"name=%@", formName.text); // returns correct value

    NSString *post = [NSString stringWithFormat:@"name=%@&", formName.text];
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:@"http://path/to/file"]];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    NSURLResponse *response = NULL;
    NSError *requestError = NULL;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&requestError];
    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

    NSLog(@"%@",responseString);
} 
```

**注意：**我实际上并没有使用`@"http://path/to/file"`. 出于隐私考虑，我省略了 URL。

我相信它正确连接到 PHP 脚本，因为我收到了我期望的响应。问题是，如果我`echo`out `$name`，我会得到一个空字符串。这是脚本：

```
<?php
include("config.php"); // Handles DB connection
$name = mysql_escape_string($_POST["name"]);
mysql_query("insert into objects(name) values('$name')") or die(mysql_error());
echo $name; // returns empty string 
```

我所期望的只是 Obj-C 代码中的某种语法/逻辑错误，但我无法发现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:50:49.833

我感觉您的请求缺少一些强制性数据、边界和内容类型，这可能导致您的 POST 请求完成一半。

我将向您展示我为将 HTML 文件上传到网络服务器所做的工作，然后在下面进行解释。

**Objective-C**

```
NSString* str = formName.text;
NSData* theData = [str dataUsingEncoding:NSUTF8StringEncoding];
NSString *urlString = @"http://whereyouarepostingto.com";

NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];  
[request setURL:[NSURL URLWithString:urlString]];  
[request setHTTPMethod:@"POST"];  

NSString *boundary = @"---------------------------14737809831466499882746641449";  
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];  

[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];  

[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary]   dataUsingEncoding:NSUTF8StringEncoding]];  
[body appendData:[[NSString stringWithString:[NSString stringWithFormat: @"Content-Disposition: form-data; name=\"file\"; filename=\"%@.html\"\r\n", self.fileName]] dataUsingEncoding:NSUTF8StringEncoding]];  
[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:theData]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];  
[request setHTTPBody:body];  

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];  
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding]; 

NSLog(@"%@", returnString); 
```

**PHP**

```
 <?php

    echo "Connection made to server";

    move_uploaded_file($_FILES["file"][tmp_name], "uploads/" . $_FILES["file"]["name"]);  

    ?> 
```

您需要更改一些东西以适应您的 SQL 插入并删除我的文件内容，但这是一个开始。

**这是我认为你缺少的部分。**

```
NSString *boundary = @"---------------------------14737809831466499882746641449";  
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary]; 
```

边界可以是一系列随机数，但它必须存在。

另外，在构造请求的主体时要小心，尤其是斜杠。确保你逃脱了任何“”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:54:34.463

伙计，您没有对所有变量进行编码。您应该为您的变量进行 URL 编码。您可以在此处找到编码函数的示例：

```
+(NSString *)urlEncode:(NSString *)unencodedString{
    return (NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,
                                                            (CFStringRef)[NSHelper string:unencodedString],
                                                            NULL,
                                                            (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                                            kCFStringEncodingUTF8 );
} 
```

顺便删除 POST 字符串末尾的 '&' 字符。

# c# - 在控制台上打印错误代码

> ID：12420454
> 
> 赞同：0
> 
> 时间：2012-09-14T08:07:33.143
> 
> 标签：c#, .net, winforms

我有这个 C# windows 应用程序。异常时有发生。当发生异常时，我想深入了解该异常的错误代码，然后获取并打印它。

发布示例代码

```
public void CreateSkill(int row)
        {
            try
            {
                Excel1.MWMClient.MWMServiceProxy.Skill skill = new Excel1.MWMClient.MWMServiceProxy.Skill();
                skill.name = "perl";
               // skill.description = "bowler";
                skill.expertiseLevel = "3";
                skill.ID = 1;
                Console.WriteLine(skillClient.CreateSkill(skill));
                Console.WriteLine(skill.ID);
                ExcelRecorder(null, row);
            }
            catch (Exception ex)
            {
                ExcelRecorder(ex.Message, row);
            }
            finally
            {
                System.GC.Collect();
            }
        } 
```

ExcelRecorder() 是一种在 Excel 工作表的单元格中打印异常消息的方法。我想在我的 excel 表中打印异常以及错误代码。如何通过我的代码获取此错误代码？

发布图片

![在此处输入图像描述](../Images/5eda8b273023080e179de4524b5d5948.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:36:25.047

试试这个：

```
try { 

}
catch(Exception e) {
    int code = e.HResult;
} 
```

甚至：

```
try { 

}
catch (Exception e){ 
    var Wex = e as Win32Exception;
    int code =  Wex.ErrorCode;
}; 
```

# c - 字符串转换为 int

> ID：12420456
> 
> 赞同：2
> 
> 时间：2012-09-14T08:07:49.483
> 
> 标签：c, pointers

我有一个指针 lpBegin 指向一个字符串“1234”。现在我想将此字符串与 uint 进行比较，如何在不使用 scanf 的情况下将此字符串变为无符号整数？我知道字符串编号是 4 个字符长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:10:00.727

您将不得不使用该`atoi`功能。这需要一个指向 a 的指针`char`并返回一个`int`.

```
const char *str = "1234";  
int res = atoi(str);  //do something with res 
```

正如其他人和我不知道的那样，`atoi`不建议这样做，因为它未定义发生格式错误时会发生什么。`strtoul`所以像其他人建议的那样更好地使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:13:04.357

您可以使用该`strtoul()`功能。strtoul 代表“字符串到无符号长”：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char lpBegin[] = "1234";
    unsigned long val = strtoul(lpBegin, NULL, 10);

    printf("The integer is %ul.", val);

    return 0;
} 
```

您可以在此处找到更多信息：[http ://www.cplusplus.com/reference/clibrary/cstdlib/strtoul/](http://www.cplusplus.com/reference/clibrary/cstdlib/strtoul/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:14:20.987

绝对是 atoi() ，它易于使用。

不要忘记包含 stdlib.h。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T08:20:59.403

您可以使用`strtoul(lpBegin)`，但这仅适用于以零结尾的字符串。

如果您出于某种原因不想使用 stdlib 并且您绝对确定目标系统，您可以手动进行数字转换。这个应该适用于大多数系统，只要它们使用单​​字节编码（例如拉丁文、ISO-8859-1、EBCDIC）。要使其适用于 UTF-16，只需将 'char' 替换为 'wchar_t' （或任何您需要的）。

```
unsigned long sum = (lpbegin[0] - '0') * 1000 +
                    (lpbegin[1] - '0') * 100 +
                    (lpbegin[2] - '0') * 10 +
                    (lpbegin[3] - '0'); 
```

或对于长度未知的数字：

```
char* c = lpBegin;
unsigned long sum = 0;
while (*c >= '0' && *c <= '9') {
    sum *= 10;
    sum += *c - '0';
    ++c;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T08:09:50.237

我想你在寻找 atoi() [http://www.elook.org/programming/c/atoi.html](http://www.elook.org/programming/c/atoi.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T08:15:26.180

[strtol](http://linux.die.net/man/3/strtol)比`atoi`具有更好的错误处理更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-14T08:25:05.323

您应该使用`strtoul`“string to unsigned long”函数。它位于 stdlib.h 中，具有以下原型：

```
unsigned long int strtoul (const char * restrict nptr,
                           char ** restrict endptr,
                           int base); 
```

*   `nptr`是字符串。
*   `endptr`是一个可选参数，给出函数停止读取有效数字的位置。如果您对此不感兴趣，请在此参数中传递 NULL。
*   `base`是您希望字符串采用的数字格式。换句话说，十进制为 10，十六进制为 16，二进制为 2，依此类推。

例子：

```
#include <stdlib.h>
#include <stdio.h>

int main()
{
  const char str[] = "1234random rubbish";
  unsigned int i;
  const char* endptr;

  i = strtoul(str,
              (char**)&endptr,
              10);

  printf("Integer: %u\n", i);
  printf("Function stopped when it found: %s\n", endptr);

  getchar();

  return 0;
} 
```

* * *

关于atoi()。

atoi() 在内部只调用以 10 为底的 strtoul。但不建议使用 atoi()，因为 C 标准没有定义 atoi() 遇到格式错误时会发生什么：然后 atoi() 可能会崩溃。因此，最好始终使用 strtoul() （以及其他类似的 strto... 函数）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-14T08:26:51.277

如果您*确实*确定该字符串是 4 位长，并且不想使用任何库函数（无论出于何种原因），您可以对其进行硬编码：

```
const char *lpBegin = "1234";
const unsigned int lpInt = 1000 * (lpBegin[0] - '0') +
                            100 * (lpBegin[1] - '0') +
                             10 * (lpBegin[2] - '0') +
                              1   (lpBegin[3] - '0'); 
```

当然，使用 eg`strtoul()`是*非常优越*的，所以如果你有可用的库，请使用它。

# doctrine - 新 Doctrine 2.3 中的 @AssociationOverride 和 @AttributeOverride

> ID：12420457
> 
> 赞同：5
> 
> 时间：2012-09-14T08:07:50.240
> 
> 标签：doctrine, doctrine-orm

根据标题，新注释的目的是`@AssociationOverride`什么`@AttributeOverride`？

我在 Doctrine 网站上唯一能找到的是：

> @AssociationOverride 和 @AttributeOverride（对 Trait 和 MappedSuperclass 有用）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T13:44:31.820

通过查看[commit](https://github.com/doctrine/doctrine2/commit/0a09a28ec9301b371da54babb076df84a0d2033f)中的代码，我们可以看到它用于覆盖已在映射的超类/特征中定义的字段映射。

提交中包含的测试证明了这种行为：

## 映射超类

```
/** 
 * @MappedSuperclass
 */
class User
{
    /**
     * @Id
     * @GeneratedValue
     * @Column(type="integer", name="user_id", length=150)
     */
    protected $id;

    /**
     * @Column(name="user_name", nullable=true, unique=false, length=250)   
     */
    protected $name;

    /**
     * @var ArrayCollection
     *
     * @ManyToMany(targetEntity="Group", inversedBy="users", cascade={"persist", "merge", "detach"})
     * @JoinTable(name="users_groups",
     *  joinColumns={@JoinColumn(name="user_id", referencedColumnName="id")},
     *  inverseJoinColumns={@JoinColumn(name="group_id", referencedColumnName="id")}
     * )
     */
    protected $groups;

    /**
     * @var Address
     *
     * @ManyToOne(targetEntity="Address", cascade={"persist", "merge"})
     * @JoinColumn(name="address_id", referencedColumnName="id")
     */ 
    protected $address;

    ...
} 
```

## 子类使用`@AssociationOverride`

```
/*  
 * @Entity
 * @AssociationOverrides({
 *      @AssociationOverride(name="groups",
 *          joinTable=@JoinTable(
 *              name="users_admingroups",
 *              joinColumns=@JoinColumn(name="adminuser_id"),
 *              inverseJoinColumns=@JoinColumn(name="admingroup_id")
 *          )
 *      ),
 *      @AssociationOverride(name="address",
 *          joinColumns=@JoinColumn(
 *              name="adminaddress_id", referencedColumnName="id"
 *          )
 *      )   
 * })
 */
class Admin extends User
{
    ...
} 
```

## 子类使用`@AttributeOverride`

```
/**
 * @Entity
 * @AttributeOverrides({
 *      @AttributeOverride(name="id",
 *          column=@Column(
 *              name     = "guest_id",
 *              type     = "integer",
 *              length   = 140
 *          )
 *      ),
 *      @AttributeOverride(name="name",
 *          column=@Column(
 *              name     = "guest_name",
 *              nullable = false,
 *              unique   = true,
 *              length   = 240
 *          )
 *      )   
 * })
 */
class Guest extends User
{
    ...
} 
```

# asp.net - RAZOR 如何在用户单击组件时触发事件

> ID：12420460
> 
> 赞同：2
> 
> 时间：2012-09-14T08:08:08.037
> 
> 标签：asp.net, razor

我是 RAZOR 的新手，我想在用户单击 RadioButton 时触发一个事件。

理想情况下，它应该在用户单击 RadioButton 后动态显示所选值。

问题：

1.  如何获取选定的值

2.  如何在用户单击 RadioButton 时触发事件。

    ```
    @{
        Layout = "~/_SiteLayout.cshtml";
        Page.Title = "Contact";
     }

    <div>
      <table>
        <tr>
          <td>
             @Html.RadioButton("Gender", "Male", true) Male
          </td>
          <td>
             @Html.RadioButton("Gender", "Female", false) Female
          </td>
        </tr>
     </table>
          @Html.Label(Request["Gender"] == null ? "No Selection" : Request["Gender"]) 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:19:22.110

你不能用 Razor 来做，你可以做的是像这样创建单选按钮并使用 Jquery 触发任何操作。

```
<input type="radio" name="sex" value="male" /> Male <br />
<input type="radio" name="sex" value="female" /> Female 
```

您可以在页面上添加脚本**（假设您可以使用 jQuery）**，例如：

```
<script type="text/javascript">
$(function () {
    $(':radio[name="sex"]').change(function () {
        $.ajax({
            url: 'sex',
            type: 'POST',
            data: { sex: $('radio[name="sex"]').val() },
            success: function (xhr_data) {
                alert(xhr_data.someValue);
            }
        });
    });
}); 
```

假设您在与生成视图的控制器相同的控制器中有一个**操作方法：**

```
public class YourController : Controller
{
   public ActionResult sex(string sex)
   {
      // do something awesome
      return Json(new { someValue = "testing!" });
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:22:03.580

razor 放弃了事件驱动模型，你可以使用表单，当你可以提交表单时，你可以在控制器中得到结果

# css - IE7 垂直对齐“内联”元素

> ID：12420461
> 
> 赞同：0
> 
> 时间：2012-09-14T08:08:18.593
> 
> 标签：css, internet-explorer, internet-explorer-7, internet-explorer-6

我的 IE7 有问题。我在输入中添加了填充（顶部和底部）。在 Firefox 等中，标签显示在中间，但在 IE7 中，它显示在底部……而在 IE8 中，它显示在顶部。

我试图设置标签`vertical-align:middle`样式，但它不起作用。

它的小提琴：http: [//jsfiddle.net/w2wTA/4/](http://jsfiddle.net/w2wTA/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:13:32.237

尝试为“字段”div设置一个高度，并将`line-height`属性设置为等于：

```
#field {
    height: 40px;
    line-height: 40px;
} 
```

**编辑**

您还可以尝试为标签和输入添加一个类，设置填充：

```
<div id="field">
    <label for="t" class="t">Input:</label> <input type="text" id="t" class="t">
</div> 
```

css：（不知何故，内联块不起作用，所以用浮点数块就可以了，虽然我觉得这有点“肮脏的黑客”）

```
.t{
    padding: 10px 0;
}

label{
    vertical-align: middle;
    display: block;
    float: left;
} 
```

这似乎有效。[小提琴](http://jsfiddle.net/KNZFN/)

# c - 保持对 JNIEnv 环境的全局引用

> ID：12420463
> 
> 赞同：39
> 
> 时间：2012-09-14T08:08:43.593
> 
> 标签：c, java-native-interface, jnienv

我将存储`JNIEnv`在全局中，以便稍后调用静态 java 方法。但是是否有必要存储指向 的全局指针`JNIEnv`，它们与任何其他 java 对象一样，或者它是不需要这个的特殊情况。

```
JNIEnv* globalEnvPointer;

[JNICALL etc] void init(JNIENv* env, [etc])
{
   //required?
   globalEnvPointer = (JNIENv*) (env*)->GetGlobalRef(env, env);
   //or is this OK?
   globalEnvPointer = env;
} 
```

**编辑**

我在这里有点笨，所有将使用的方法`globalEnvPointer`，都在我的 init 中调用，因为 my`init`实际上是我`c`的程序的`main`方法，直到程序结束才会返回。我在 c 程序中也没有使用其他线程。我认为这简化了答案。

```
JNIEnv* globalEnvPointer;

[JNICALL etc] void main(JNIENv* env, [etc])
{
   //required?
   globalEnvPointer = (JNIENv*) (env*)->GetGlobalRef(env, env);
   //or is this OK?
   globalEnvPointer = env;
   someMethod();
}

void someMethod()
{
   //use globalEnvPointer here
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-14T09:09:29.107

您不能缓存`JNIEnv`指针。[在这里](https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/invocation.html)阅读：

> JNI 接口指针（JNIEnv）仅在当前线程中有效。如果另一个线程需要访问 Java VM，它必须首先调用 AttachCurrentThread() 将自己附加到 VM 并获取 JNI 接口指针。一旦连接到 VM，本机线程就像在本机方法中运行的普通 Java 线程一样工作。本机线程一直连接到 VM，直到它调用 DetachCurrentThread() 来分离自己。

您可以做的是缓存`JavaVM`指针。

```
static JavaVM *jvm;

[JNICALL etc] void init(JNIENv* env, [etc])
{
   jint rs = (*env)->GetJavaVM(env, &jvm);
   assert (rs == JNI_OK);
} 
```

然后，每当您需要`JNIEnv`从没有给出它的上下文中的指针时，请执行以下操作：

```
void someCallback() {
    JNIEnv *env;
    jint rs = (*jvm)->AttachCurrentThread(jvm, &env, NULL);
    assert (rs == JNI_OK);
    // Use the env pointer...
} 
```

但是，每当您从 Java 调用本机方法时，都会给出要使用的 env 指针：

```
JNIEXPORT jint JNICALL Java_package_Class_method(JNIEnv *env, jobject obj) {
    // just use the env pointer as is.
} 
```

# java - 在复合容器上启用焦点侦听器

> ID：12420464
> 
> 赞同：2
> 
> 时间：2012-09-14T08:08:45.357
> 
> 标签：java, swt, composite

我有四个按顺序排列的复合材料。

每个组合都有一个复选框、标签和 2 个按钮。现在这些复合材料一个接一个地对齐。

我想启用对这些项目的关注，即当我使用`tab`从一个合成转到另一个时，当前合成应该看起来突出显示。理想情况下，我希望它表现得像一个列表，当您选择一个项目时，它会被突出显示。这可能吗？

我了解复合材料充当其他小部件、控件的容器。我的要求是我有一个包含 5 个条目的列表，并且列表中的每个项目都有一个复选框、标签和两个按钮。我还希望在选择它们时关注它。

另外，请让我知道我上面描述的相同 UI 的替代解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T15:57:51.903

要使选项卡从组合变为组合，请将每个组合的选项卡列表设置为您希望在选项卡之后获得焦点的一个控件。例如，复选框：

```
composite.setTabList(new Control[]{checkButton}); 
```

要成为亮点，您的想象力就是极限。你可以改变背景，添加一些边框，你可以命名它。只要组合中的一个控件获得焦点，您只需更新它。

这是一个完整的例子：

```
public static void main(String[] args) {
    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setLayout(new FillLayout(SWT.VERTICAL));

    createElement(shell);
    createElement(shell);
    createElement(shell);
    createElement(shell);

    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
}

private static void createElement(final Composite parent) {
    final Composite composite = new Composite(parent, SWT.BORDER);
    composite.setLayout(new GridLayout(4, false));
    final Button checkButton = new Button(composite, SWT.CHECK);
    new Label(composite, SWT.NONE);
    final Button button1 = new Button(composite, SWT.PUSH);
    final Button button2 = new Button(composite, SWT.PUSH);
    Listener listener = new Listener() {
        @Override
        public void handleEvent(Event event) {
            for (Control control : parent.getChildren()) {
                control.setBackground(null);
            }
            composite.setBackground(composite.getDisplay().getSystemColor(SWT.COLOR_RED));
            if (event.widget == button1 || event.widget == button2) {
                checkButton.setFocus();
            }
        }
    };
    checkButton.addListener(SWT.FocusIn, listener);
    button1.addListener(SWT.FocusIn, listener);
    button2.addListener(SWT.FocusIn, listener);
    composite.setTabList(new Control[]{checkButton});
} 
```

# c# - 无法将“System.Linq.Expressions.UnaryExpression”类型的对象转换为“System.Linq.Expressions.MemberExpression”类型

> ID：12420466
> 
> 赞同：42
> 
> 时间：2012-09-14T08:09:06.027
> 
> 标签：c#, linq, exception-handling, expression-trees

我[在 C# 中创建了一个方法](https://stackoverflow.com/questions/12348472/extracting-method-name-as-string-from-reflection-or-hardcoded-string)来获取方法名

```
public string GetCorrectPropertyName<T>(Expression<Func<T, string>> expression)
{
   return ((MemberExpression)expression.Body).Member.Name; // Failure Point
} 
```

并将其称为

```
string lcl_name = false;
public string Name
{
get { return lcl_name ; }
set 
    {
        lcl_name = value;
        OnPropertyChanged(GetCorrectPropertyName<ThisClassName>(x => x.Name));
}
} 
```

如果属性是字符串并且所有其他类型都给出此异常，则此方法工作正常：

> 无法将“System.Linq.Expressions.UnaryExpression”类型的对象转换为“System.Linq.Expressions.MemberExpression”类型。

1.  我在方法签名中将字符串更改为对象，但随后又失败了。
2.  我将呼叫从更改`x => x.PropertyName`为`x => Convert.ToString(x.PropertyName)`，但仍然失败

我哪里错了？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-09-14T08:19:50.470

您需要单独一行来提取输入表达式为一元表达式的成员。

刚刚从 VB.Net 转换了它，所以可能会稍微偏离 - 如果我需要做任何小的调整，请告诉我：

```
public string GetCorrectPropertyName<T>(Expression<Func<T, Object>> expression)
{
    if (expression.Body is MemberExpression) {
        return ((MemberExpression)expression.Body).Member.Name;
    }
    else {
        var op = ((UnaryExpression)expression.Body).Operand;
        return ((MemberExpression)op).Member.Name;
    }                
} 
```

VB版本为：

```
Public Shared Function GetCorrectPropertyName(Of T) _
             (ByVal expression As Expression(Of Func(Of T, Object))) As String
    If TypeOf expression.Body Is MemberExpression Then
        Return DirectCast(expression.Body, MemberExpression).Member.Name
    Else
        Dim op = (CType(expression.Body, UnaryExpression).Operand)
        Return DirectCast(op, MemberExpression).Member.Name
    End If
End Function 
```

请注意，输入表达式不一定返回字符串 - 这限制您只能读取返回字符串的属性。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-11-28T07:58:57.583

这[显然](http://blogs.lessthandot.com/index.php/desktopdev/mstech/when-is-a-lambdaexpression-a/)与装箱/拆箱有关。返回需要装箱的值类型的 Lambda 表达式将表示为 UnaryExpressions，而返回引用类型的将表示为 MemberExpressions。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-14T11:05:53.560

问完这个问题（是的，我是 OP）后，我收到了[Jon对问题的评论](https://stackoverflow.com/users/50079/jon)

我想出了这个

```
public string ResolvePropertyName<TEntity>(Expression<Func<TEntity>> expression)
{
try {
    if (expression == null) {
        Throw New ArgumentNullException("propertyExpression")
    }

    object memberExpression = expression.Body as MemberExpression;
    if (memberExpression == null) {
        Throw New ArgumentException("The expression is not a member access expression.", "propertyExpression")
    }

    object property = memberExpression.Member as PropertyInfo;
    if (property == null) {
        Throw New ArgumentException("The member access expression does not access a property.", "propertyExpression")
    }

    object getMethod = property.GetGetMethod(true);
    if (getMethod.IsStatic) {
        Throw New ArgumentException("The referenced property is a static property.", "propertyExpression")
    }
    return memberExpression.Member.Name;
} catch (Exception ex) {
    return string.Empty;
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-27T06:28:04.387

上述答案的现代版本。

```
private static string GetPropertyName<T>(Expression<Func<T, object>> expression) 
=> expression.Body switch
{
    MemberExpression expr => expr.Member.Name,
    UnaryExpression expr => ((MemberExpression)expr.Operand).Member.Name,
    _ => throw new ArgumentException($"Argument {nameof(expression)} is not a property expression.", nameof(expression)),
}; 
```

# ssis - 使用镜像的 SSIS 2012 oledb 连接字符串

> ID：12420471
> 
> 赞同：3
> 
> 时间：2012-09-14T08:09:39.337
> 
> 标签：ssis, sql-server-2012, mirroring, database-mirroring

我正在尝试在几个镜像数据库上配置 SSIS 2012 项目。我希望能够使用 OLEDB 提供程序，但这似乎不支持连接字符串中的故障转移伙伴属性。我尝试添加键“Failover Partner”、“Failover_Partner”和“FailoverPartner”，但它们都不起作用——即使保存了主体数据库，连接也不会尝试连接到故障转移部分。我的所有测试都是使用属性键的所有三个变体执行的。

如果我使用 ADO.NET 连接，连接管理器中有一个名为“故障转移伙伴”的内置设置，它的作用就像一个魅力，它可以连接到数据库，主体位于任一服务器上......就像它应该的那样。

**我的问题是：**当使用 SSIS 2012 和 SQL Server 2012 镜像数据库时，OLEDB 在镜像数据库中不能开箱即用是否正确？

**我如何测试** 我的测试非常简单：我有一个带有 OLEDB 连接管理器的“执行 SQL 任务”，它具有以下连接字符串：Data Source=srv1;Initial Catalog=MyDatabase;Provider=SQLOLEDB.1;Integrated Security=SSPI;Auto Translate =假；应用程序名称=我的应用程序；如上所述，我已尝试添加不同版本的故障转移合作伙伴：

数据源=srv1.domain.local；初始目录=MyDatabase；Provider=SQLOLEDB.1；集成安全=SSPI；自动翻译=False；应用程序名称=我的应用程序；故障转移伙伴=srv2.domain.local；

如果 MyDatabase 是 srv1 上的主体，那么它可以工作。如果数据库是 srv2 上的主体，则 SSIS 失败并出现以下错误：错误：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80004005。OLE DB 记录可用。来源：“Microsoft OLE DB Provider for SQL Server”Hresult：0x80004005 描述：“无法打开登录请求的数据库“MyDatabase”。登录失败。”。

并且在错误日志中的 srv1 上记录了以下内容：用户 'DOMAIN\MyUser' 的登录失败。原因：无法打开明确指定的数据库“MyDatabase”。[客户：10.0.0.3]

我究竟做错了什么？还是我需要更改为按预期 100% 工作的 ADO.NET？

谢谢，Sjang

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:35:29.837

如果您使用 OleDB/SQLNCLI11.1 连接字符串，则存在故障转移伙伴参数：

```
Data Source=srv1;Initial Catalog=myDB;Provider=SQLNCLI11.1;Integrated Security=SSPI;Failover Partner=failover_partner_name; 
```

# python - windows 7上python3.2.3中的argparse似乎没有解析

> ID：12420472
> 
> 赞同：0
> 
> 时间：2012-09-14T08:09:40.697
> 
> 标签：python, windows, argparse

因为我在 windows 上运行了 python，所以这是我在 argparse 中遇到的下一个问题，我没有看到解决方案。我以前使用过 optparse。这是我的代码：

```
import argparse
parser = argparse.ArgumentParser(
        description = 'Test description')       # main description for help

parser.add_argument('-d', '--dir',                 # -u or --user option           
        dest = "dir",
        help = 'directory to start with')           
args = parser.parse_args()
print(args.dir) 
```

但是当我运行这段代码时

```
code.py -d test
code.py --dir test 
```

我总是得到一个`None`作为输出。我觉得这是一件微不足道的事情，而且我忽略了一些明显的事情，但我看不到它。

坦克

亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:41:43.157

该问题似乎是由Windows引起的，以及如何尝试在命令行上执行代码。在给定的示例中，测试脚本是直接在命令行上调用的，而不是`python`在代码之前，如[this answer中所建议的那样](https://stackoverflow.com/questions/12420125/how-to-install-python-3-2-3-on-windows-7-enterprise)。

如果代码执行如下

```
python code.py 
```

看到了预期的行为，并且在代码中正确解析了参数。

所以要么是windows系统的设置不完整，要么是上面链接中的建议不完整。

# web-applications - W3C 小部件检查器是否有效？

> ID：12420480
> 
> 赞同：0
> 
> 时间：2012-09-14T08:10:18.273
> 
> 标签：web-applications, widget, w3c, w3c-validation

我尝试使用[W3C Widget Checker](http://qa-dev.w3.org:8001/widget/)的 Alpha 版本验证一个小部件包文件，但每次我点击按钮时，无论我点击的是空 URL 还是链接到包的有效 URL，`Check`我都会收到该错误。 `Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data.``Check`

这个在线检查器对任何人都有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:56:44.413

一开始我认为它不起作用并且失败`Content-Type`了，但我也尊重这里找到的要求：http: [//www.w3.org/TR/widgets/#ta-qxLSCRCHlN](http://www.w3.org/TR/widgets/#ta-qxLSCRCHlN)，我测试的小部件文件的`Content-Type`标题设置为`application/widget`但它仍然没有工作。

所以我认为除非有人证明相反，检查器坏了。

# php - 用于实时站点的简单 PHP Profiler？

> ID：12420484
> 
> 赞同：0
> 
> 时间：2012-09-14T08:10:46.293
> 
> 标签：php, profiling

我有一个实时网站，我希望有一个像 PHP 分析器这样的选项，它只在请求时执行（即当向 url 添加一个参数时，比如 ?_profiler=on）。

我知道在实时站点上运行完整的分析器是非常丑陋的事情，但我想检查哪些函数在执行时需要时间。

我需要的是每当调用类（动作）中的函数时，我需要注册函数完成时的开始时间和结束时间并计算它所花费的总时间。

我正在寻找一个简单的 PHP 分析器，这样我就可以包含基库类并在控制器中启动分析器实例，然后它将自动查找操作中的每个函数调用并更新所花费的时间。

有人知道这种 PHP 分析器吗？请帮助找出或任何人都可以给我一个想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:18:58.340

我在 php.ini（或 php.d/xdebug.ini）中使用带有以下选项的 XDebug 探查器：

```
xdebug.profiler_enable=0
xdebug.profiler_enable_trigger=1 
```

这意味着探查器在默认情况下是禁用的，但是当您将“？XDEBUG_PROFILER”添加到您的获取查询（例如，site.com/page?XDEBUG_PROFILE）时，xdebug 开始分析并创建适当的日志文件。您可以使用 xdebug.profiler_output_dir 选项指定放置它们的位置。

然后您可以使用一些 Web 前端应用程序来解析 xdebug 日志文件。好的是：

[http://code.google.com/p/webgrind/](http://code.google.com/p/webgrind/)

您需要将它安装在您的网络服务器上。它基于 xdebug.profiler_output_dir 选项并自动获取日志文件。

# jquery - 引导类激活标签作为按钮复选框不起作用

> ID：12420492
> 
> 赞同：1
> 
> 时间：2012-09-14T08:11:31.113
> 
> 标签：jquery, twitter-bootstrap

# html

```
<div class="btn-group" data-toggle="buttons-checkbox">
    <label class="btn" for="id_bar">
        <input type="checkbox" name="bar" value="1" id="id_bar" />
        Bar
    </label>
    <label class="btn" for="id_open">
        <input type="checkbox" name="open" value="1" id="id_open" />
        Open now
    </label>
</div> 
```

# 脚本

```
var searchForm = $('.main-search-form');
var labels = $(searchForm).find('label');
try {
    $(labels).on({
        click: function () {
            var item = $(this).children('input[type=checkbox]').parent();
            $(item).addClass('active');
            alert('test');
        }
    });
} catch (e) {
    alert(e);
} 
```

# 怀疑

我正在使用**推特引导程序。** 单击标签时，显然会弹出**测试文本作为警报，在此期间标签具有****活动**的类，但是一旦我关闭警报框，标签类**活动**就消失了，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:07:17.607

我想通了，

```
<div class="btn-group" data-toggle="buttons-checkbox"> 
```

刚刚删除了属性 data-toggle ，现在一切都很好

但是再次切换类方法不起作用，

# java - 在 JFrame 中更新 JPanel

> ID：12420493
> 
> 赞同：1
> 
> 时间：2012-09-14T08:11:36.413
> 
> 标签：java, swing, concurrency, swingworker, event-dispatching

我有一个带有 CardLayout 组件的 JFrame。我正在使用 CardLayout 在应用程序执行的不同时刻在不同的 JPanel 之间切换。在某些时候，我使用 SwingWorker 对象来生成一些 XML 文件。这次我想在我的窗口中显示另一个 JPanel 来告诉用户等待。在这个 JPanel 上，我想在 3 个标签之间切换。

*   JLabel 1 将是：“请稍候。”
*   JLabel 2 将是：“请稍候..”
*   JLabel 3 将是：“请稍候...”

现在代码如下所示：

```
 ConvertersWorker.execute();
        CLayout.show(Cards, WAIT_PANEL);

        Timer t =new Timer(500, new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e) {
                WaitPanel.SwitchLabels();
            }               
        });
        t.start();

        while (!this.finishedConverting)
        {

        }
        //After this im am executing other methods based on the generated XML files 
```

SwingWorker 代码：

```
SwingWorker<Boolean, Void> ConvertersWorker = new SwingWorker<Boolean, Void>() {
    public Boolean doInBackground() {
        Boolean result = RunConverters();
        return result;
    }
    public void done() {
        try {
            finishedConverting = get();
        } catch (InterruptedException ex) {
            ex.printStackTrace();
        } catch (ExecutionException ex) {
            ex.printStackTrace();
        }
    }
 } ; 
```

第二个 JPanel 甚至没有显示，因为 JFrame 阻塞。它由于 while 循环而阻塞，但我不知道如何以不同的方式实现它。SwingWorker 中的 done() 方法也永远不会执行。如果它被执行，那么finishedConverting 变量将被设置为true，while 循环将停止。谁能帮我找到更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:43:08.987

我知道你解决了这个问题，但发生这种情况是因为你只使用了一个`thread`，并且它因为 而被阻止`While`，所以你需要创建一个新`thread`的来处理这个

```
new Thread(){  
  public void run() { 
    //code here
  }
}.start(); 
```

并刷新`JPanel`您可以使用的内容

```
myJpanel.doLayout(); 
```

或者

```
myJpanel.repaint(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:53:29.527

我删除了`while`循环并将循环之后的代码移动到另一个方法中，该方法在`done()`方法中执行，`SwingWorker`所以现在它可以工作了。

# ruby-on-rails-3 - rails 路线语言环境，gem 'route_translator' 或 gem 'i18n_routing' 无法翻译资源中的匹配项

> ID：12420494
> 
> 赞同：1
> 
> 时间：2012-09-14T08:11:45.637
> 
> 标签：ruby-on-rails-3, internationalization, routing, routes, i18n-gem

1.  主要是我会使用 i18n_routing gem，如果我将在仪表板资源下翻译匹配“vlk”，尝试一切，但没有成功，我会很高兴。资源翻译成功还有新动作……怎么了？

路线.rb

```
MyApp::Application.routes.draw do
  root :to => 'home#index'

  localized do
    resources :cars
    resource :admin, :controller => :admin
      resource :dashboard do
        member do
          match 'vlk', :as => :vlk
        end
      end
    end
end 
```

路线.yml

```
cs:
  cars: 'auta'
  admin: 'admincesky'
  routes:
    dashboard:
      as: 'novy'
      path_names:
        new: 'cesky_member'
        vlk: 'tzz_cesky'
      named_routes_path:
        vlk: 'tzz_cesky' 
```

2\. 其次，我尝试了下一个 gem 'route_translator'，但我无法运行 'route_translator' gem 我收到此错误

```
/ruby-1.9.2-p320/gems/actionpack-3.0.14/lib/action_dispatch/routing/route.rb:25:in `initialize': can't convert Array into String (TypeError) 
```

如果我在 routes.rb 文件的末尾添加行

```
Dt::Application.routes.translate_from_file('config/locales/routes.yml') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:58:48.620

我有同样的问题。

我尝试了很多 - 没有任何解决方案。

我试过这个 gem [https://github.com/kwi/i18n_routing](https://github.com/kwi/i18n_routing) - 解决了我的问题:-)

# magento - 具有完整类别路径的 Magento 追加销售网址？

> ID：12420496
> 
> 赞同：1
> 
> 时间：2012-09-14T08:11:48.983
> 
> 标签：magento

我的 Magento 安装有问题。我正在使用追加销售功能来提供一些更有趣的产品。到目前为止，输出有效，但产品网址存在很大问题。

该 url 链接到 my-shop.com/product.html 而不是 my-shop.com/category-1/category-2/product.html。这很糟糕，因为我正在为每个顶级类别调用一个特殊的侧边栏导航。所以什么都没有显示...

我正在使用标准的追加销售输出：

`<a href="<?php echo $_link->getProductUrl() ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_link, 'small_image')->resize(115) ?>" width="115" height="115" alt="<?php echo $this->htmlEscape($_link->getName()) ?>" title="<?php echo $this->htmlEscape($_link->getName()) ?>" /></a> <h3 class="product-name"><a href="<?php echo $_link->getProductUrl() ?>"><?php echo $this->htmlEscape($_link->getName()) ?></a></h3> <?php echo $this->getReviewsSummaryHtml($_link) ?> <?php echo $this->getPriceHtml($_link, true, '-upsell') ?>`

（不能贴出全部代码，编辑会删掉大部分）

我用 $_link->getProductPath() 试过了，但是输出是空的。

我还检查了系统->配置->目录->搜索引擎优化中的设置。使用产品 URL 的类别路径设置为是。

有人知道如何获取产品的完整路径网址吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:51:12.017

您可以使用以下逻辑来获取产品 url。相应地更新变量。

```
<?php
    $_prodcats = $_product->getCategoryIds();
    $_cat = Mage::getModel('catalog/category')->load($_prodcats[0]);
    $produrl = $this->helper('catalog/output')->productAttribute($_product, $_product->getRequestPath(), 'request_path') ;
    if($this->getRequest()->getModuleName() == 'catalogsearch') {
        $produrl = '/'. basename($_cat->getUrl()) .'/' . basename($_product->getProductUrl()) ;
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-20T17:13:37.277

我在网上找到了适用于 1.9.2.1 的解决方案。追加销售产品成为与类别链接的链接。

```
$d = $_link->getData();
$id = $d['entity_id'];
$_product = Mage::getModel('catalog/product')->load($id);
$_categories = $_product->getCategoryIds();
$_category = Mage::getModel('catalog/category')->load($_categories[0]);
 $cat_url = str_replace(".html","",$_category->getUrlPath());
$_url = Mage::getUrl($cat_url).basename($_link->getProductUrl()); 
```

然后使用这个网址

```
<a href="<?php echo $_url; ?>">Link</a> 
```

我仍然有刚刚添加的创建的*sitemap.xml的问题*

*www.website.com/product*而不是

*www.website.com/category/product*

即使“使用产品 URL 的类别路径”设置为 YES

# javascript - 如何在没有浏览器的情况下测试 DOM 中的 JavaScript 输出？

> ID：12420498
> 
> 赞同：0
> 
> 时间：2012-09-14T08:11:56.510
> 
> 标签：javascript, unit-testing, dom

我想测试一些负责在 dom 中生成新内容的函数生成的输出。问题是我需要在不使用浏览器并针对生成的输出运行 xpath 查询的情况下测试此类场景。（类似于 Java 中的 HTMLUnit）。我该如何编写这样的测试？我可以使用哪种框架/技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:15:03.957

这通常通过使用在假屏幕上运行的浏览器（例如使用[xvfb](http://en.wikipedia.org/wiki/Xvfb)）并以编程方式驱动它来处理。[Headless](https://npmjs.org/package/headless)将允许您从 node.js 中设置 xvfb。

[Phantom](http://phantomjs.org/)和[Selenium](http://seleniumhq.org/)提供了几种驱动浏览器的方法。

# dynamics-crm-2011 - 插件不创建新记录，但给出 SQL 超时

> ID：12420502
> 
> 赞同：0
> 
> 时间：2012-09-14T08:12:08.637
> 
> 标签：dynamics-crm-2011

我创建了一个插件来在另一条记录上的字段更改时创建新记录。我已经全部设置好了，但是当我运行它时，没有创建任何记录，并且 CRM 返回 SQL 超时错误。我的代码如下：

```
Entity contactSecurityRole = new Entity("sb_contactsecurityrole");
                                contactSecurityRole["sb_contactid"] = linkedContact;
                                contactSecurityRole["sb_contactportalsettingid"] = linkedContactPortalSetting;
                                contactSecurityRole["sb_portalsettingid"] = linkedPortalSetting;
                                contactSecurityRole["sb_portalsecurityroleid"] = linkedSecurityRole;

                                Service.Create(contactSecurityRole); 
```

所有名称以“链接”开头的变量都是对其他实体的实体引用，因为记录由查找字段组成。我已经做了一些检查，它停止的地方就是实际`Service.Create()`部分的位置。

有人可以给我一些关于检查什么的提示，以便我找出发生这种情况的原因吗？

* * *

## 更新：

我发现了问题，Greg 是对的，这是我上面发布的代码之外的问题。问题是我如何设置我的“链接”变量之一，我试图使用获取请求来检索我需要链接到的记录的 Guid，我正在从中设置实体引用。

我犯的错误是认为 fetch 返回了一个 Guid，而它实际上返回了一个实体引用本身。因此，一旦我得到修复，代码几乎立即运行。我的猜测是，因为我设置错误，所以在创建实体时，CRM/SQL Server 可以输入值，所以它返回了错误。

感谢大家对此的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:35:20.223

[这](http://social.microsoft.com/Forums/zh/crmdevelopment/thread/b27803f5-0bda-4a57-8d6a-e50aaed3767e)将为您提供更清晰的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:00:21.107

我发现了问题，Greg 是对的，这是我上面发布的代码之外的问题。问题是我如何设置我的“链接”变量之一，我试图使用获取请求来检索我需要链接到的记录的 Guid，我正在从中设置实体引用。

我犯的错误是认为 fetch 返回了一个 Guid，而它实际上返回了一个实体引用本身。因此，一旦我得到修复，代码几乎立即运行。我的猜测是，因为我设置错误，所以在创建实体时，CRM/SQL Server 可以输入值，所以它返回了错误。

感谢大家对此的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:46:16.447

当我在我的一个 CRM 实例中注册 Sandbox 中的插件时遇到了这个问题，你应该这样做，作为它的好习惯。但是尝试在非沙盒模式下注册您的插件，而不是尝试创建记录，它可能会解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:19:46.103

这是有道理的，任何异常都会出现，`Service.Create(...`因为这是代码尝试访问 CRM（以及基础 SQL 表）的点。

是否有可能您注册了其他可能在此过程中触发的插件？您是在本地运行还是在线运行？

# java - 如何在 pom 中查找未使用的属性

> ID：12420505
> 
> 赞同：6
> 
> 时间：2012-09-14T08:12:18.217
> 
> 标签：java, maven, maven-3, maven-plugin

继承一个maven项目后，我想检查未使用的属性并删除它们。

我不想采取的一种方法是一一删除它们并看到构建失败。另一种方法是使用自定义脚本计算整个代码库中的出现次数（以确保过滤器和资源的属性不会被错误地视为未使用）。在我这样做之前，我想确保我没有重新发明轮子。

[对于此处](https://stackoverflow.com/questions/1517611/is-there-a-simple-way-to-remove-unused-dependencies-from-a-maven-pom-xml)解释的依赖项，有一种方法可以做到这一点。
我错过的房产有类似的东西吗？还是更好的方法？

谢谢

我正在使用 Maven 3.0.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T05:57:01.727

这有点复杂，但这里有一个 bash 脚本，它将解析 pom.xml 中的属性元素，检查 pom 中是否使用了每个属性，并可选择检查所有项目文件（深度搜索）。

```
#!/bin/bash
cmd=$(basename $0)

read_dom () {
  local IFS=\>
  read -d \< entity content
  local retval=$?
  tag=${entity%% *}
  attr=${entity#* }
  return $retval
}

parse_dom () {
  # uncomment this line to access element attributes as variables
  #eval local $attr
  if [[ $tag = "!--" ]]; then # !-- is a comment 
    return
  elif [[ $tag = "properties" ]]; then
    in=true
  elif [[ $tag = "/properties" ]]; then
    in=
  elif [[ "$in" && $tag != /* ]]; then #does not start with slash                         */
    echo $tag
  fi
}

unused_terms () {
  file=$1
  while read p; do
    grep -m 1 -qe "\${$p}" $file
    if [[ $? == 1 ]]; then echo $p; fi
  done
}

unused_terms_dir () {
  dir=$1
  while read p; do
    unused_term_find $dir $p
  done
}

unused_term_find () {
  dir=$1
  p=$2
  echo -n "$p..."
  find $dir -type f | xargs grep -m 1 -qe "\${$p}" 2> /dev/null
  if [[ $? == 0 ]]; then
    echo -ne "\r$(tput el)"
  else
    echo -e "\b\b\b   "
  fi
}

if [[ -z $1 ]]; then
  echo "Usage: $cmd [-d] <pom-file>"
  exit
fi

if [[ $1 == "-d" ]]; then
  deep=true
  shift
fi

file=$1
dir=$(dirname $1)

if [ $deep ]; then
  while read_dom; do
    parse_dom
  done < $file | unused_terms $file | unused_terms_dir $dir
else
  while read_dom; do
    parse_dom
  done < $file | unused_terms $file
fi 
```

[该脚本使用来自该线程](https://stackoverflow.com/questions/893585/how-to-parse-xml-in-bash)的 XML 解析代码。

此脚本不会找到 maven 或 maven 插件直接使用的任何属性。它只是在项目文件中查找模式*${property} 。*

它适用于我的 Mac；您的里程可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:18:58.797

不幸的是，没有更好的方法来代替手动操作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-25T07:33:15.287

如果您使用的是 IntelliJ，您可以只搜索该属性的用法。只需将光标放在标签中，然后右键单击 -> 查找用法（在我的情况下，键盘快捷键：Alt+F7）。

还没找到更好的方法。

# django - Django 视图函数仅用于以 http 重定向结尾的逻辑

> ID：12420506
> 
> 赞同：0
> 
> 时间：2012-09-14T08:12:26.110
> 
> 标签：django, http

嘿那里，

我刚刚读到[这里](https://stackoverflow.com/questions/3024168/django-how-do-i-redirect-a-post-and-pass-on-the-post-data)发布的数据不能通过重定向发送，

然后发现人们通常不喜欢使用重定向。我的问题是为什么？

* * *

我的情况

我有一个 Django 应用程序，它首先呈现一个页面，该页面提供了使用注册或匿名使用的选择。

```
def start(request):
    request.session.flush()
    return render_to_response('start.html') 
```

如果选择注册使用，则会呈现一个简单的表单以插入注册数据，它会循环到自身，直到表单有效，然后发生“auth/”。

```
def registration(request):
if request.method == "POST":
    form = RegistrationForm(request.POST)
    if form.is_valid():
        return HttpResponseRedirect('auth/')
    else:
        return render_to_response('registration.html',
                                 {'form':form})
form = RegistrationForm()
return render_to_response('registration.html',
                         {'form':form}) 
```

如果选择匿名使用，则跳过注册页面，并重定向到 'auth/'，与上面代码中相同的 Django 视图函数：

```
return HttpResponseRedirect('auth/') 
```

我希望通过 auth 实现的目的是设置会话，将数据写入数据库，然后重定向与注册用户和匿名用户相同的下一页（只有会话会有所不同）。

```
def auth(request):
    ipdb.set_trace()
    if request.method == "POST":
        request.session['user_type'] = 'REG'
        request.session['email'] = request.POST['email']
        request.session['first_name'] = request.POST['first_name']
        RegisteredUser.objects.create(first_name = request.POST['first_name'],
                                      email = request.POST['email'],
                                      company = request.POST['company'])
    else:
        request.session['user_type'] = 'ANONIM'
    return HttpResponseRedirect('next_page') 
```

当然，当调试器启动时，request.method 总是返回 GET。

* * *

我的理由

有很多关于将视图与逻辑分开的讨论，当我有一个 Django 视图函数时，我发现它的可读性或松散耦合（如果我放弃'auth/'，'next_page' 将不得不采取它的功能）必须

*   检查 request.post

    *   如果它的原因是当前页面的表单验证，或者它来自上一页，在这种情况下将该数据写入基础
*   进行额外检查以设置注册用户或匿名用户的会话

我必须这样做，因为仅将单独的函数用于重定向而不是渲染的逻辑似乎不是普遍接受的方式。

有人可以解释一下吗？

**更新解决方案**

感谢答案，我想出了如何做到这一点的模式。现在注册码是：

```
def registration(request):
    if request.method == "POST":
        form = RegistrationForm(request.POST)
        if form.is_valid():
            request.session['user_type'] = 'REG'
            request.session['email'] = request.POST['email']
            request.session['first_name'] = request.POST['first_name']
            RegisteredUser.objects.create(first_name = request.POST['first_name'],
                                          email = request.POST['email'],
                                          company = request.POST['company'])

            return HttpResponseRedirect('param_select/')
        else:
            return render_to_response('registration.html',
                                     {'form':form},
                                     context_instance = RequestContext(request))
    form = RegistrationForm()
    return render_to_response('registration.html',
                             {'form':form},
                             context_instance = RequestContext(request)) 
```

从现在开始，我将使用“使用 POST 数据循环进入自己，然后执行逻辑”方法。

为了使名称神秘化，这就是新注册（请求）的作用。

首先它呈现表单以输入数据

由于链接到自身，一旦提交数据就会被召回

```
form action="" method="post" 
```

重复此操作，直到未提交正确的表单数据，然后调用逻辑（在这种情况下，写入基础并设置会话）。

它以 httpRedirect 到另一个页面结束，使注册完全由注册（请求）处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:26:37.180

*   默认情况下，您可以假设用户是匿名的并`request.session['user_type'] = 'ANONIM'`在您的`start()`视图中设置。

*   无论您在做什么，`auth()`您都可以`registration()`与`request.session['user_type'] = 'REG'`. 有了这个，如果需要，您也可以使用经过验证的表单来创建`RegisteredUser`和标记错误。

*   一旦`POST`处理有效并完成，它就可以重定向到您的`next_page`.

*   如果选择匿名用户，`start`将重定向到`next_page`而不是`auth/`

# php - 更新多维数组sql php

> ID：12420507
> 
> 赞同：1
> 
> 时间：2012-09-14T08:12:29.063
> 
> 标签：php, mysql, arrays, multidimensional-array

我正在建立一个食谱网站，其中食谱存储在一个表中，成分存储在另一个表中，然后第三个表将两者与成分的数量和单位联系起来。IE。配方表 - 配方 ID、名称、描述等

成分表 - 成分 ID、名称、描述等

配方成分表 - 配方成分 ID、配方 ID、成分 ID、数量、单位

所以对于一个食谱，我可以有多种成分。为了显示食谱，我在 recipe_ingredient 表中查询匹配的 recipeID，然后从中获取相应的成分 ID 并查询每个成分表：

```
 <table id="ingredients_table">
                        <tr>
                        <th>Ingredient</th>
                        <th>Quantity</th>
                        <th>Unit</th>
                        <th>Comment</th>
                        </tr>
                    <?php 
                        foreach ($ingredient as $value) { 
                            $ingredient_name = get_ingredient_name($value['IngredientID']);
                            echo '<tr>';
                            echo '<td>'.$ingredient_name.'</td>';
                            echo '<td>'.$value['Quantity'].'</td>';
                            echo '<td>'.$value['Unit'].'</td>';
                            echo '<td>'.$value['Comments'].'</td>';
                            echo '</tr>';
                            echo "\n";
                        }
                    ?>
                    </table> 
```

我有以下功能

 `````
function get_ingredients($id) {
//gets the ingredient ids, quanitites, units and comments
$result = mysql_query("SELECT * FROM `recipe ingredients` WHERE RecipeID = $id") or trigger_error(mysql_error());
$array = array();

    while($row_ids = mysql_fetch_assoc($result)){
        $array[] = $row_ids;
    }   
return $array;
}

function get_ingredient_name($id) {
//get an ingredient name given its ID
$result = mysql_query("SELECT * FROM `ingredients` WHERE IngredientID = $id") or trigger_error(mysql_error());
$row = mysql_fetch_assoc($result);
$ingredient_name = $row['Ingredient'];
return $ingredient_name;

} 
````  `问题是我无法创建一个更新成分数量或名称的表格。

我目前有这个，但它不起作用：

`function update_ingredients($Ingredient_ID, $id, $RecipeIngredientID, $Ingredient, $Quantity, $Unit, $Comment) {`

 ````
$ingredient_name = mysql_query("UPDATE `ingredients` SET Ingredient='$Ingredient' WHERE IngredientID='$IngredientID'") or trigger_error(mysql_error());
$ingredient_details = mysql_query("UPDATE `recipe ingredients` SET Quantity='$Quantity', Unit='$Unit', Comment='$Comment' WHERE RecipeIngredientID='$RecipeIngredientID'") or trigger_error(mysql_error());

} 
```

and

```
if (isset($_POST['RecipeName'])) {
                            foreach ($ingredient as $value) { 
                            $ingredient_name = get_ingredient_name($value['IngredientID']);
                            $Ingredient = userData($_POST['Ingredient']);
                            $Quantity = userData($_POST['Quantity']);
                            $Unit = userData($_POST['Unit']); 
                            $Comment = userData($_POST['Comment']);
                            $update_ingredients =  update_ingredients($Ingredient_ID, $id, $RecipeIngredientID, $Ingredient, $Quantity, $Unit, $Comment);
                            echo $update_ingredients;

                        } 
````  `谁能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:44:35.010

尝试以下代码而不是当前代码：

```
function update_ingredients($Ingredient_ID, $id, $RecipeIngredientID, $Ingredient, $Quantity, $Unit, $Comment) 
{
    mysql_query("UPDATE `ingredients` SET Ingredient='$Ingredient' WHERE IngredientID='$Ingredient_ID'");
    mysql_query("UPDATE `recipe ingredients` SET Quantity='$Quantity', Unit='$Unit', Comment='$Comment' WHERE RecipeIngredientID='$RecipeIngredientID'");

} 
```

`$ingredient_name = mysql_query("UPDATE ...`- 对于 INSERT、UPDATE、DELETE、DROP `mysql_query`，成功时返回 TRUE，错误时返回 FALSE。不是名称或其他东西，只有布尔值！

查询中的 $Ingredient_ID 必须与函数参数同名，匹配所有变量。```

# java - 从同一个端口提供 web-sockets 和 web-pages

> ID：12420511
> 
> 赞同：3
> 
> 时间：2012-09-14T08:12:33.460
> 
> 标签：java, websocket, netty

使用 Java 的 Netty，你能从同一个端口服务 HTTP 请求和 web-sockets 吗？

我认为为 web-sockets 使用 HTTP“升级”的全部目的是为了做到这一点。

但是我什至在 Netty 中都找不到一个简单的 web-socket 服务器示例，更不用说如何将它混合到 HTTP 服务器中了。（[websocket 示例](http://static.netty.io/3.5/xref/org/jboss/netty/example/http/websocketx/server/WebSocketServer.html)将所有精力都放在为非 websocket 连接提供 favicon 上，而实际上忽略了与客户端的大部分对话。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:01:02.810

嗯，有些事情让我觉得你没有仔细阅读这个例子。它

1.  演示常规 HtTTP 请求和 websocket 请求的组合
2.  它不*提供*网站图标资源（它返回 404 Not Found），并且
3.  与客户端交换 websocket 文本帧

# java - apache httpd 启动时的 Java 问题

> ID：12420516
> 
> 赞同：0
> 
> 时间：2012-09-14T08:12:55.060
> 
> 标签：java, apache2

对不起我的英语不好。

我正在尝试在 Windows 上从 Java 启动 Apache HTTPD 服务器

```
 public static Process pp;

    @Override
    public void run() {
        try {

            Runtime run = Runtime.getRuntime();
            try {

                MyThread.pp = run.exec("usr/local/apache24/bin/httpd.exe");                
                BufferedReader in = new BufferedReader(new InputStreamReader(MyThread.pp.getErrorStream()));
                String line;
                while ((line = in.readLine()) != null) {
                    System.out.println(line);
                } 
```

如果 Apache HTTPD 将在没有输出到控制台的情况下启动（没有错误和警告），那么此代码正确启动了 Apache HTTPD 服务器（在 RAM 中有两个进程）并且一切正常。

但是如果 Apache HTTPD 服务器有任何输出到控制台，那么这个 Java 代码就不能正确启动 Apache HTTPD 服务器。例如，如果 Apache HTTPD 服务器将输出到控制台

```
AH00112: Warning: DocumentRoot [C:/Art/Dropbox/OpenSource/MyGIT/myprivatesite/]
does not exist
AH00548: NameVirtualHost has no effect and will be removed in the next release C
:/Art/MyServer/usr/local/apache24/conf/httpd.conf:535 
```

比Java只启动Apache HTTPD服务器的一个进程，他不能工作。

如果他有任何控制台输出，我如何启动 Apache HTTPD 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:19:53.630

您是否尝试将所有 3 个流连接到控制台？我认为代码看起来相当不错。

# iphone - 处理 iPhone 5 的较大设备尺寸

> ID：12420521
> 
> 赞同：1
> 
> 时间：2012-09-14T08:13:25.203
> 
> 标签：iphone, ios, iphone-5

> **可能重复：**
> [如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)

观看了 iPhone 5 的主题演讲，是的，设备高度和 640 X 1136 的分辨率。所以我看到他们展示了现有应用程序是如何工作的。但我相信，如果我们使用标签栏、导航栏等原生组件，将会正常工作。但是，与设备方向相关的自定义标签栏、导航栏和控件如何呢？所以这些是我的问题。

1) 如何处理具有自定义标签栏、导航栏、相关内容等的自定义布局。

2) 欢迎屏幕。我们现在需要 2 个尺寸。那么在 iPhone 5 中，我们是否需要另外 2 个用于正常和视网膜？

3) 如果你仔细看主题演讲，iPhone 5 似乎会从左到右切掉一部分视图，所以在应用程序开发中没有任何额外的变化。有人注意到了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T08:34:11.413

1) 这取决于您如何布置它们，您可能需要调整设置框架的方式、更改自动调整大小的蒙版等，或者如果仅 iOS 6 是您可以移动到自动布局的选项。在不知道您的代码的情况下，我无法提供更多详细信息

2) 没有非视网膜 iPhone 5，因此您只需要再增加 1 个`Default.png`尺寸，命名为`Default-568h@2x.png`（顺便说一句，添加这个新尺寸的默认图像是 iOS 显示您的应用程序不带信箱的触发器，因此对于某些应用程序来说，这是唯一的更改，它将需要制作）

3）这是我提到的信箱，这是所有当前应用程序在 iPhone 5 上所做的，直到它们更新为新的 default.png

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:22:18.910

我的理解是所有现有的应用程序都可以在 iPhone 5 上运行，而你只会有黑色边框。但是，您现在可以将应用程序定制为更大的屏幕尺寸。我想现在会有一个新大小的 .xib 或故事板，将与 iPhone 5 的大小相匹配。您将能够在应用程序委托中放置一个 if 语句，以根据屏幕选择要加载的 .xib/storyboard尺寸。不幸的是，现在我认为我们将不得不创建多个 .xib/storyboard 文件，类似于目前通用应用程序的制作方式。加载的文件是根据设备选择的。

希望这可以帮助

# linux - 为什么要找到需要“{} \”？

> ID：12420524
> 
> 赞同：8
> 
> 时间：2012-09-14T08:13:27.540
> 
> 标签：linux, bash

我使用 find 命令，例如：

```
find . -name "*.log" -exec grep "running" {} \; 
```

为什么 find 的命令需要`{}`，一个空白和`\`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T08:17:36.583

这是因为`-exec`参数：the`{}`是要传递给命令的文件的占位符。

分号 ( `;`)`find`表示`-exec`参数列表已经结束，但由于`;`它也是一个 shell 运算符，因此您需要对其进行转义以使其到达`find`：`\;`

`-exec`像这样工作：对于找到的每个文件，`-exec`执行（命令）之后的第一个参数，并且直到 的所有参数`;`都作为参数传递给命令。然后`{}`由 . 找到的当前文件名替换`find`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T08:18:00.647

`{}`是路径的占位符，`find`替换为实际找到的路径。

`\;`终止 find 的`exec`参数。没有`\`shell 会将其视为 shell 语句终止符，因此需要引用它`\`以便 shell 将其传递`;`给 find。

我会说这`;`是`find` `exec`命令终结者的不幸选择。

请注意，`{} \;`序列可以替换为`{} +`：

```
 -exec command {} +
          This variant of the -exec action runs the specified  command  on
          the  selected  files, but the command line is built by appending
          each selected file name at the end; the total number of  invoca‐
          tions  of  the  command  will  be  much  less than the number of
          matched files.  The command line is built in much the  same  way
          that  xargs builds its command lines.  Only one instance of `{}'
          is allowed within the command.  The command is executed  in  the
          starting directory. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:22:16.910

只需阅读手册页

```
-exec command ;

          Execute  command;  true  if 0 status is returned.  All following
          arguments to find are taken to be arguments to the command until
          an  argument  consisting of `;' is encountered.  The string `{}'
          is replaced by the current file name being processed  everywhere
          it occurs in the arguments to the command, not just in arguments
          where it is alone, as in some versions of find.  Both  of  these
          constructions might need to be escaped (with a `\') or quoted to
          protect them from expansion by the shell.  See the EXAMPLES sec‐
          tion for examples of the use of the -exec option.  The specified
          command is run once for each matched file.  The command is  exe‐
          cuted  in  the starting directory.   There are unavoidable secu‐
          rity problems surrounding use of the -exec  action;  you  should
          use the -execdir option instead. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T08:22:31.037

反斜杠是一种避免分号被误解的转义。大括号是 find 输出的完整路径的占位符。

# c++ - 几乎Equal2sComplement 实现不处理退化的情况

> ID：12420528
> 
> 赞同：1
> 
> 时间：2012-09-14T08:13:33.087
> 
> 标签：c++, floating-point, comparison

[我实现了Bruce Dawson](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)提出的AlmostEqual2sComplement ，但用于比较双精度值而不是浮点值。

类似的实现可以在很多地方找到。

```
bool AlmostEqual2sComplement(double A, double B, int maxUlps= 10)
{
    // Make sure maxUlps is non-negative and small enough that the
    // default NAN won't compare as equal to anything.
    // assert maxUlps > 0 && maxUlps < 4 * 1024 * 1024;

    long long aInt = *(long long*)&A;
    // Make aInt lexicographically ordered as a twos-complement int
    if (aInt < 0)
        aInt = 0x8000000000000000 - aInt;

    // Make bInt lexicographically ordered as a twos-complement int
    long long bInt = *(long long*)&B;
    if (bInt < 0)
        bInt = 0x8000000000000000 - bInt;

    long long intDiff = aInt - bInt;
    if (intDiff < 0)
        intDiff= intDiff*-1;

    if (intDiff <= maxUlps)
        return true;
    return false;
} 
```

不幸的是，当比较双精度值 -1.0 和 4.0 时，该函数返回 true。这是因为在这种情况下 intDiff 的结果是相等`0x8000000000000000`的，而 的绝对值`0x8000000000000000`又是`0x8000000000000000`

我目前对这个问题的解决方案不是取 intDiff 的绝对值，而是将 intDiff 和 maxUlps 的比较更改为：

```
if (intDiff <= maxUlps && -maxUlps <= intDiff)
    return true; 
```

必须有更多（可能不那么明显） intDiff 导致`0x8000000000000000`.

我想知道AlmostEqual2sComplement 的其他实现是否只是不知道这个问题，或者我在原始实现中犯了一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:03:03.200

这里[http://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition](http://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition)是更正版本，其中有一个额外的检查两个浮点数是否具有相反的符号。

# asp.net-mvc-3 - 我如何通过他们的 groupName 获取项目列表并采取行动？

> ID：12420533
> 
> 赞同：-1
> 
> 时间：2012-09-14T08:13:50.993
> 
> 标签：asp.net-mvc-3

我有显示 ThemeGroups 列表中菜单的布局，当我单击其中一个菜单项时，它应该转到显示此 ThemeGroup 中所有主题的页面，但是当我这样做时，会出现此错误：

```
 Server Error in '/' Application.
    The resource cannot be found.
    Description: HTTP 404\. The resource you are looking for (or one of its
    dependencies) could have been removed, had its name changed, or is 
    temporarilyunavailable.  
    Please review the following URL and make sure that it is spelled correctly.

    Requested URL: /Home/Browse/1

    Version Information: Microsoft .NET Framework Version:4.0.30319;
    ASP.NET Version:4.0.30319.225 
```

我有给我主题属性的“ThemeModel.cs”，给我“id”和“ThemeGroupName”的“ThemeGroupsModel.cs”，并且在我的项目中有名为“Services”的文件夹，它有“ThemeSrv”类。 CS”。这个类有一个方法和这个代码：

```
 public List<ThemesModel> getAllTheme(short ThemeGrId)
    {
   List<ThemesModel> ThemeList = new List<ThemesModel>();
        ThemesModel themeTemp;
        using (var context = new EShopThemeDBEntities(idbconnection.ConnStr))
        {
            var ThemesDb = (from o in context.Themes
                            where o.ThemeGroupId == ThemeGrId
                            select o).ToList();
            if (ThemesDb != null)
            {
                foreach (var item in ThemesDb)
                {
                    themeTemp = new ThemesModel();

                    themeTemp.ThemeID = item.ThemeID;
                    themeTemp.ThemeName = item.CodeName;
                    themeTemp.HtmlF = item.Html;
                    themeTemp.JoomlaF = item.Joomla;
                    themeTemp.Image = item.Image;
                    themeTemp.PsdF = item.PSD;
                    themeTemp.UploadDate = item.UploadDate;
                    themeTemp.UnitPrice = (float)item.UnitPrice;
                    ThemeList.Add(themeTemp);
                }
            }
        }
        return ThemeList;
    } 
```

我有具有以下属性的 HomeModel：

```
 using System;
   using System.Collections.Generic;
   using System.Linq;
   using System.Web;
   using EshopTheme.Services;

   namespace EshopTheme.Models
   {
public class HomeModel
{
    public MenuSrv MenuList { get; set; }
    public IEnumerable<ThemeGroupsModel> ThemeGr { get; private set; }

    public ThemeSrv ThemesByGrId { get; set; }
    public IEnumerable<ThemesModel> AllThemes { get; private set; }

   public HomeModel()
    {
        this.MenuList = new MenuSrv();
        this.ThemeGr = this.MenuList.getAllThemeGroup();

        this.ThemesByGrId = new ThemeSrv();
        this.AllThemes = ThemesByGrId.getAllTheme(2);
    } 
```

这是我在 HomeController 中的操作：

```
 [HttpPost]
    public ActionResult Browse(short ThemeGroupId)
    {
        var themes = new ThemeSrv();

        return View(themes.getAllTheme(ThemeGroupId));
    } 
```

这些代码在我的“_LayoutMain.cshtml”中，用于在我的所有页面中显示菜单：

```
 @{EshopTheme.Models.HomeModel hm = new EshopTheme.Models.HomeModel();     
   }
     <ul id="menu">
                @foreach (var item in hm.ThemeGr)
                {

                    <li>
                    @Html.ActionLink(item.ThemeGroupName, "Browse", "Home", 
                    new { id = item.ThemeGroupId }, new { @class = "linkMenu" })

                    </li>
                } </ul> 
```

我为“浏览”操作创建了名为“Brows.cshtml”的视图，以在我单击菜单中的一项（主题组之一，如“运动”）时显示结果，它显示所有主题的列表，名称为组“运动”。

```
 @{ EshopTheme.Models.HomeModel hm = new EshopTheme.Models.HomeModel();

ViewBag.Title = "Browse";
Layout = "~/Views/Shared/_LayoutMain.cshtml";
   }

   <ul id="themeList">

@foreach (var item in hm.ThemesByGrIds )
{
    <li><a href="@Html.ActionLink(item.ThemeName, "Browse", "home",
 new { id=item.ThemeID })">
        <img src="@item.Image" alt="@item.ThemeName" /><br />
        <span>Theme Name: @item.ThemeName </span>
        <br /><span>Upload date: @item.UploadDate
        </span>
    @*  <span>price: @item.UnitPrice</span>*@
         </a></li>

} 
```

我的问题是什么？？感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:34:28.163

您很可能会收到 404，因为您的路由配置错误和/或您正在尝试`GET`操作`POST`结果。试试这个

**路线**

```
routes.MapRoute(
      name: "Browse",
      url: "{controller}/{action}/{themeGroupId}",
      defaults: new { controller = "Home", action = "Index", themeGroupId = UrlParameter.Optional }
); 
```

**动作结果**

```
public ActionResult Browse(short themeGroupId)
{
    var themes = new ThemeSrv();
    return View(themes.getAllTheme(themeGroupId));
} 
```

您需要告诉路由引擎您要传递给`ActionResult`

# php - 按票排序 - PHP

> ID：12420536
> 
> 赞同：0
> 
> 时间：2012-09-14T08:14:12.977
> 
> 标签：php, mysql, sql, database, voting

我有一个投票脚本，可以提取每个用户的投票数。

一切正常，除了我现在需要按票数顺序显示每个用户的票数。请看我的数据库结构：

参赛作品：

```
UserID, FirstName, LastName, EmailAddress, TelephoneNumber, Image, Status 
```

表决：

```
item, vote, nvotes 
```

item 字段包含`vt_img`，然后是`UserID`，例如：`vt_img4`并且 vote 和 nvotes 都显示投票数。

有什么想法可以将它们联系在一起并按顶部投票最多的顺序显示用户吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:19:09.490

您确实需要更改投票表的结构，以便可以进行正常连接。我强烈建议添加一个纯用户 ID 列，或者至少不要将其作为其他两个列的连接。根据 ID，您可以轻松地执行以下操作：

```
select
    a.userID,
    a.firstName,
    b.votes
from
    entries a
        join voting b
            on a.userID=b.userID
order by
    b.votes desc 
```

另一种选择是考虑（如果它是一对一的关系）简单地将数据合并到一个表中，这将使其再次变得更加容易。

目前，这确实是一个[XY](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)问题，您正在寻找一种方法来连接两个不打算连接的表。虽然有*（*可怕，可怕，可怕）的方法，但我认为最好的解决方案是做一些额外的工作并改变你的数据库（我们当然可以帮助你，这样你就不会丢失任何数据）然后你将能够（轻松地）现在做你想做的事情，并且你将来想做的所有其他事情（你现在不知道）会容易得多。

编辑：这似乎是使用触发器为您插入新行的绝佳机会。MySQL 触发器是数据库在某个预定义操作发生时将执行的操作。在这种情况下，您希望在将行插入主表时将新行插入表中。美妙之处在于您可以使用对原始表中数据的引用来执行此操作：

```
CREATE TRIGGER Entries_Trigger AFTER insert ON Entries
    FOR EACH ROW BEGIN
        insert into Voting values(new.UserID,0,0);
    END; 
```

这将以以下方式工作 - 当一行插入到您的 Entries 表中时，数据库将插入该行（创建 auto_increment ID 等）然后立即调用此触发器，然后将*使用*新创建的 UserID 插入第二个表（以及一些投票和 nvotes 的零）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:18:27.747

您的数据库设计不当。它应该是：

```
Voting:

item, user_id, vote, nvotes 
```

将项目 id 和用户 id 与带有分隔符的连接字符串放在同一列中只是自找麻烦。这根本不可扩展。[查看Normalization](http://en.wikipedia.org/wiki/Database_normalization)的基础知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:18:49.393

你可以试试这个：

```
SELECT *
FROM Entries e
JOIN Voting v ON (CONCAT('vt_img', e.UserID) = v.item)
ORDER BY nvotes DESC 
```

但请注意，由于`Entries`表的连接字段是在查询时构建的，因此此查询可能会很慢。

您应该考虑更改您的数据库结构，以便`Voting`包含一个`UserID`字段以便进行直接连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T08:28:56.330

我想这张`Entries`表是投票的地方（你的数据库模式对我来说没有多大意义，似乎你可以做得更好一点）。如果投票实际上在`Votes`表格上并且连接到用户，那么您也应该`UserID`在该表格中有字段。无论哪种方式，这个例子都会有所帮助。

假设您添加`UserID`到`Votes`表中，这是存储用户投票的地方，而不是您的查询

```
SELECT Users.id, Votes.*,
SUM(Votes.nvotes) AS user_votes
FROM Users, Votes
WHERE Users.id = Votes.UserID
GROUP BY Votes.UserID
ORDER BY user_votes 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-14T08:17:16.350

在您的查询中使用 ORDER BY --

```
SELECT column_name(s)
FROM table_name
ORDER BY column_name(s) ASC|DESC 
```

# java - String.format() 抛出 FormatFlagsConversionMismatchException

> ID：12420537
> 
> 赞同：6
> 
> 时间：2012-09-14T08:14:16.243
> 
> 标签：java, string, string-formatting, java-7

此代码在 Java 1.6 中运行良好：

```
 public static String padLeft(String s, int n)
 {
     if (n <= 0)
         return s;
     int noOfSpaces = n * 2;
     String output;
     noOfSpaces = s.length() + noOfSpaces;
     output = String.format("%1$#" + noOfSpaces + "s", s);
     return output;
 } 
```

但是较新的版本（和其他一些 VM 实现）会抛出这个`Exception`：

```
java.util.FormatFlagsConversionMismatchException: Mismatched Convertor =s, Flags= #
        at java.util.Formatter$Transformer.transformFromString(Formatter.java:1020)
        at java.util.Formatter$Transformer.transform(Formatter.java:861)
        at java.util.Formatter.format(Formatter.java:565)
        at java.util.Formatter.format(Formatter.java:509)
        at java.lang.String.format(String.java:1961) 
```

任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:50:57.027

您要求解决方法；只需使用[StringBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)：

```
public static String padLeft(String s, int n) {
    if (n <= 0)
        return s;
    int noOfSpaces = n * 2;
    StringBuilder output = new StringBuilder(s.length() + noOfSpaces);
    while (noOfSpaces > 0) {
        output.append(" ");
        noOfSpaces--;
    }
    output.append(s);
    return output.toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:49:09.023

由于您`#`在格式字符串中使用标志，因此您应该将[Formattable](http://docs.oracle.com/javase/7/docs/api/java/util/Formattable.html)作为参数（[doc](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)）传递。

> 有什么解决办法吗？

不要`#`在格式字符串中使用？

# c# - 代码优先数据库迁移

> ID：12420539
> 
> 赞同：2
> 
> 时间：2012-09-14T08:14:21.680
> 
> 标签：c#, database, entity-framework, code-first

我们使用没有 Edmx 文件的代码优先方法，它在第一次创建数据库时运行良好。

但是，如果我向我的数据库上下文中添加新数据实体说新类，则它无法将其添加到该数据库中的新表中。

例如，数据库中最初有两个表。前数据库：DbTest

表：Tbl1，Tbl2

现在，如果我添加新表，例如类名“Tbl3”，那么它应该将其添加到现有数据库中。

谁能用一个例子向我解释如何通过代码优先的方法来实现？

我见过提到类似的东西 `Database.SetInitializer(new ........)`

我需要在上面的构造函数的空白区域中放入什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T22:20:13.423

如果您查看您的数据库，您将看到一个名为“EdmMetadata”的表，Entity Framework 使用它来确定自数据库创建以来是否对您的模型进行了任何更改（在您的情况下）。

如果模型和数据库不同，默认行为是抛出异常。要获得不同的行为，您需要使用`IDatabaseInitializer<TContext>`.

幸运的是，Entity Framework 附带了该接口的一些默认实现：

*   `CreateDatabaseIfNotExists<TContext>`- 如果数据库尚不存在，这将创建数据库。
*   `DropCreateDatabaseAlways<TContext>`- 这将在每次运行应用程序时重新创建数据库。
*   `DropCreateDatabaseIfModelChanges<TContext>`- 如果在 EdmMetadata 表中检测到更改（通常是创建新表的结果），这将重新创建数据库。

当然，您也可以通过覆盖该`InitializeDatabase`方法来创建您自己的此接口的实现。

使用这些初始化策略之一的示例如下所示：

```
Database.SetInitializer(
    new DropCreateDatabaseIfModelChanges<NameOfYourDbContextClass>()) 
```

**在选择初始化策略之前请仔细考虑，因为您最终可能会丢失已经输入数据库的数据，这可能不是您想要的。**

Entity Framework 提供的实现提供了`Seed`一种使用数据加载数据库的方法，以便您可以在每次创建数据库时使用默认数据预加载数据库。

[本文](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm)提供了更多信息。

# macos - 安排电子邮件以邮件形式发送 (mac)

> ID：12420540
> 
> 赞同：1
> 
> 时间：2012-09-14T08:14:30.837
> 
> 标签：macos, email, applescript

我有一封电子邮件需要安排稍后发送。我知道你可以使用 iCal 安排一个苹果脚本在设定的时间启动，但我一直找不到一个有效的。不过，不一定非要这样做。我将不胜感激这个问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:21:26.150

这对我来说适用于 10.6.8 上 iCal 中的运行脚本警报

```
tell application "Mail"
    activate
    set mymail to make new outgoing message at the beginning of outgoing messages with properties {subject:"Triggered"}
    tell mymail
        make new to recipient at beginning of to recipients with properties {address:"first@email.com, second@email.com"}
        set content to "hi"
    end tell
    --show message window (otherwise it's hidden)
    set visible of mymail to true
    --bring Mail to front
    activate
    send mymail
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:01:59.037

我也收到一个错误，例如`outgoing message 1 doesn’t understand the send message`尝试发送外发消息时。不过，引用从脚本创建的消息似乎仍然有效。

```
tell application "Mail"
    set m to make new outgoing message with properties {subject:"subject", content:"content"}
    tell m
        make new to recipient at end of to recipients with properties {address:"jana@doe.com, john@doe.com"}
    end tell
    send m
end tell 
```

您还可以[在 Automator 中创建日历警报](https://apple.stackexchange.com/questions/45604/how-can-i-send-a-mail-message-later)。

![](../Images/a43d28cf692fd5c363e13580fdb124be.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-20T18:02:58.357

我刚刚在没有 Automator 的情况下完成了这项工作，只使用了 Apple Mail：

1.  双击日历的任意位置开始创建活动。
2.  为事件命名。这将是电子邮件的主题行。
3.  将事件的日期和时间设置为您希望发送电子邮件的时间。
4.  如果您希望按计划发送电子邮件，请选择重复频率和可能的终止日期。
5.  对于`alert`，选择`Custom...`。

[![在此处输入图像描述](../Images/4161810d9adf87fa7a4b69d668ef6c24.png)](https://i.stack.imgur.com/Sg6w7.png)

6.  选择`email`。系统可能会提示您将联系人卡片添加到联系人应用程序。

[![在此处输入图像描述](../Images/741ee4650000ab28fdd5b46255c49a2e.png)](https://i.stack.imgur.com/eRujC.png)

7.  选择您要向其发送电子邮件的人，并将时间设置为`At Time Of Event`。按`OK`。

[![在此处输入图像描述](../Images/f9a41ed575d3d46d4b89a793bdd5c55a.png)](https://i.stack.imgur.com/G2cWE.png)

8.  您可以选择添加备注、URL 或附件。我没有尝试过这些选项，但我认为它们会在发送的电子邮件中结转。

[![在此处输入图像描述](../Images/4c12856554fcdcd51ef21ea8623dd241.png)](https://i.stack.imgur.com/72nQv.png)

# php - 如何在没有 gd 的联系表单中添加验证码

> ID：12420543
> 
> 赞同：0
> 
> 时间：2012-09-14T08:14:58.163
> 
> 标签：php, forms, security, captcha, contact

我需要一些帮助。

我有一个联系表格，我想在其中添加一些验证码，**没有 GD 库**。我添加了一些图像作为指南，但现在有静态图像。我想要做的是循环输出与隐藏字段中的代码（随机数）匹配的图像，例如，如果随机数是“18301”，则会为每个数字显示适当的图像，这里到目前为止是我的代码：

```
<label for="captcha">Type the code you see (*):<br />
    <?php (do a loop here){ ?>
<img src="images/0<?php echo $num; ?>.gif" width="18" height="30" />
<?php } ?>  

     <img src="images/00.gif" width="18" height="30" />
         <img src="images/01.gif" width="18" height="30" />
         <img src="images/08.gif" width="18" height="30" />
         <img src="images/03.gif" width="18" height="30" />
         <img src="images/00.gif" width="18" height="30" />
         <img src="images/01.gif" width="19" height="30" /> =</label>
    <span id="spryCaptcha">
    <input type="text" name="captcha" id="captcha" tabindex="70" />
    <input name="hiddenCode" type="hidden" value="<?php echo rand(000000,999999); ?>"/> 
```

我怎样才能使它起作用，以便每次都会出现正确的图像并检查用户的输入是否与他/她每次看到的代码相匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:19:57.080

您应该在循环之前初始化随机数：

```
<?php
    $random = (string)rand(0,999999);
?>
<label for="captcha">Type the code you see (*):<br />
    <?php for($i=0; $i<strlen($random); $i++){ ?>
        <img src="images/0<?php echo $random{$i}; ?>.gif" width="18" height="30" />
    <?php } ?>  
</label>
<span id="spryCaptcha">
<input type="text" name="captcha" id="captcha" tabindex="70" />
<input name="hiddenCode" type="hidden" value="<?php echo $random ?>"/> 
```

但是您应该将其保存在会话中并稍后检查（因为隐藏字段是 0 安全性）：

`session_start()`在您的页面顶部调用

```
<?php
    $random = (string)rand(0,999999);
    $_SESSION['captcha'] = $random;
?>
<label for="captcha">Type the code you see (*):<br />
    <?php for($i=0; $i<strlen($random); $i++){ ?>
        <img src="images/0<?php echo $random{$i}; ?>.gif" width="18" height="30" />
    <?php } ?>  
</label>
<span id="spryCaptcha">
<input type="text" name="captcha" id="captcha" tabindex="70" /> 
```

并在下一页检查您的`$_POST['captcha']`反对`$_SESSION['captcha']`

仍然，这是 0 安全性，因为可以读取图像名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T07:37:56.703

尝试使用**reCAPTCHA**。它可以在没有 GD 库的情况下使用。它从外部服务加载验证码图像并使用公钥加密进行验证。所以**没有**内部生成验证码图像。非常容易使用。

**例如：**

**前端 ：**

```
<html>
    <body> <!-- the body tag is required or the CAPTCHA may not show on some browsers -->
      <!-- your HTML content -->

      <form method="post" action="verify.php">
        <?php
          require_once('recaptchalib.php');
          $publickey = "your_public_key"; // you got this from the signup page
          echo recaptcha_get_html($publickey);
        ?>
        <input type="submit" />
      </form>

      <!-- more of your HTML content -->
    </body>
  </html> 
```

**后端验证：**

```
<?php
  require_once('recaptchalib.php');
  $privatekey = "your_private_key";
  $resp = recaptcha_check_answer ($privatekey,
                                $_SERVER["REMOTE_ADDR"],
                                $_POST["recaptcha_challenge_field"],
                                $_POST["recaptcha_response_field"]);

  if (!$resp->is_valid) {
    // What happens when the CAPTCHA was entered incorrectly
    die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
         "(reCAPTCHA said: " . $resp->error . ")");
  } else {
    // Your code here to handle a successful verification
  }
  ?> 
```

欲了解更多信息，请访问：[https ://developers.google.com/recaptcha/docs/php](https://developers.google.com/recaptcha/docs/php)

# c# - 使用 Sleep 的 Thread Yield 方法模拟

> ID：12420546
> 
> 赞同：1
> 
> 时间：2012-09-14T08:15:16.960
> 
> 标签：c#, .net, multithreading

我正在尝试理解 .Net 中的线程概念。我无法使用 Yield() 方法。当我被 10 整除时，我希望控件转到并行线程。

请帮忙。

下面是我的示例代码：

```
class ThreadTest
{
    //Index i is declared as static so that both the threads have only one copy
    static int i;

    static void Main(string[] args)
    {
        Thread t = new Thread(WriteY);          
        i = 0;

        //Start thread Y    
        t.Start();                              
        //Do something on the main thread.
        for (; i < 100; i++)
        {
            if (i % 10 == 0)
            {
                //Simulate Yield() function
                Thread.Sleep(0);
                Console.WriteLine("The X thread");
            }
            Console.Write(i + ":X ");
        }
        Console.ReadKey(true);
    }

    static void WriteY()
    {
        for (; i < 100; i++)
        {
            if (i % 10 == 0)
            {
                //Simulate Yield() function
                Thread.Sleep(0);
                Console.WriteLine("The Y thread");
            }
            Console.Write(i + ":Y ");
        }
    }
} 
```

我得到编译时错误：

> System.Threading.Thread 不包含“产量”的定义

**都铎王朝的回答。**此方法仅适用于 .Net 4.0 及更高版本。

理想情况下，我希望一个线程启动并希望每个线程执行 10 个 i 递增。使用我目前的方法，我要么得到所有的“X”，要么得到所有的“Y”。

**编辑：** 通过 Tudor 和 TheHe 的输入 - 我已经能够获得备用 X 和 Y。问题的症结在于锁定对象的使用。但是这段代码的输出是不可预测的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:23:24.380

忘记`Thread.Yield`；这与您尝试做的事情无关。最终，您有一个`lock`，用于`Monitor`同步访问。在 内部`lock`，您的线程独占访问权限。你需要做的是暂时*放弃*锁；你这样做的方式是使用`Monitor.Wait`. 但是，如果您`Wait`也最终进入“等待”队列而不是“就绪”队列，因此为了确保每个线程都受到关注，我们还需要`Pulse`在 之前`Wait`和末尾 (以确保两个线程都有机会退出）。开始了：

```
using System.Threading;
using System;
class ThreadTest
{
    //Index i is declared as static so that both the threads have only one copy
    static int i;

    //The lock object
    static readonly object locker = new object();

    static void Main(string[] args)
    {
        Thread t = new Thread(WriteY);

        i = 0;

        //Start thread Y
        t.Start();
        lock (locker)
        {
            // Print X on the main thread
            for (; i < 100; i++)
            {
                if (i % 10 == 0)
                {
                    Monitor.PulseAll(locker); // move any "waiting" threads to the "ready" queue
                    Monitor.Wait(locker); // relinquish the lock, and wait for a pulse
                    Console.WriteLine("The X thread");
                }
                Console.Write(i + ":X ");
            }
            Monitor.PulseAll(locker);
        }
        Console.ReadKey(true);
    }

    static void WriteY()
    {
        lock (locker)
        {
            for (; i < 100; i++)
            {
                if (i % 10 == 0)
                {
                    Monitor.PulseAll(locker); // move any "waiting" threads to the "ready" queue
                    Monitor.Wait(locker); // relinquish the lock, and wait for a pulse
                    Console.WriteLine("The Y thread");
                }
                Console.Write(i + ":Y ");
            }
            Monitor.PulseAll(locker); // move any "waiting" threads to the "ready" queue
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T08:27:11.653

`Thread.Yield`只会让调度程序选择一个准备好运行的不同线程：

> 使调用线程让步给准备好在当前处理器上运行的另一个线程。操作系统选择要屈服的线程。

如果您的应用程序中的其他线程也在等待该锁，您可以让出所有您想要的，它们将没有机会运行。

顺便说一句，`Yield`是一种 .NET 4.0+ 方法。确保您没有针对早期版本。

**编辑**：IMO，做你想做的事，你应该使用事件：

```
class Test
{
    //Index i is declared as static so that both the threads have only one copy
    static int i;

    static AutoResetEvent parentEvent = new AutoResetEvent(true);
    static AutoResetEvent childEvent = new AutoResetEvent(false);

    static void Main(string[] args)
    {
        Thread t = new Thread(WriteY);

        i = 0;

        //Start thread Y
        t.Start();
        // Print X on the main thread
        parentEvent.WaitOne();
        while (i < 100)
        {                
            if (i % 10 == 0)
            {
                childEvent.Set();
                parentEvent.WaitOne();
            }
            Console.Write(i + ":Y ");
            i++;
        }
        t.Join();
    }

    static void WriteY()
    {
        childEvent.WaitOne();
        while (i < 100)
        {
            if (i % 10 == 0)
            {
                parentEvent.Set();
                childEvent.WaitOne();
            }
            Console.Write(i + ":X ");
            i++;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:18:22.003

从我的角度来看，您正在锁定当前线程中的“储物柜”，并希望将当前任务交给另一个线程......锁一直由第一个线程持有 - 它不能工作？！

如果要使用多个线程，则必须手动锁定对象...

# objective-c - Objective-C：headerdoc2html 不生成协议文档

> ID：12420550
> 
> 赞同：0
> 
> 时间：2012-09-14T08:15:45.490
> 
> 标签：objective-c, documentation, header-files

我尝试通过 headerdoc2html 命令生成文档。但是headerdoc只生成toc.html。该协议没有 index.html。有问题？

我使用了以下头文件和命令。

```
/*!                                                                                                                                                                                                                                                                             
  @header Dummy.h                                                                                                                                                                                                                                                               
  hoge                                                                                                                                                                                                                                                                          
*/                                                                                                                                                                                                                                                                              

/*!                                                                                                                                                                                                                                                                             
  @class Foo                                                                                                                                                                                                                                                                    
  asdf                                                                                                                                                                                                                                                                          
*/                                                                                                                                                                                                                                                                              
@interface Foo : NSObject                                                                                                                                                                                                                                                       

/*!                                                                                                                                                                                                                                                                             
  @abstract xxx                                                                                                                                                                                                                                                                 
*/                                                                                                                                                                                                                                                                              
- (void)xxx;                                                                                                                                                                                                                                                                    

@end                                                                                                                                                                                                                                                                            

/*!                                                                                                                                                                                                                                                                             
  @protocol BarDelegate                                                                                                                                                                                                                                                         
*/                                                                                                                                                                                                                                                                              
@protocol BarDelegate                                                                                                                                                                                                                                                           

/*!                                                                                                                                                                                                                                                                             
  @abstract Sent after something                                                                                                                                                                                                                                                
*/                                                                                                                                                                                                                                                                              
- (void)didSomething:(Foo *)foo;                                                                                                                                                                                                                                                
@end 
```

--

```
$ headerdoc2html *.h -o doc 
```

结果是，

```
$ find doc
doc
doc/Dummy_h
doc/Dummy_h/Classes
doc/Dummy_h/Classes/Foo
doc/Dummy_h/Classes/Foo/index.html
doc/Dummy_h/Classes/Foo/toc.html
doc/Dummy_h/index.html
doc/Dummy_h/Protocols
doc/Dummy_h/Protocols/BarDelegate
doc/Dummy_h/Protocols/BarDelegate/toc.html
doc/Dummy_h/toc.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-16T05:38:26.367

我觉得您的代码是完美的，但是当涉及到错误的 commad 时。它们是创建 headerDoc 的四个步骤。

第 1 步：转到您的项目所在的目录（而不是您所做的头文件）。

`$ cd <Your_Project_Directory>`

第 2 步：现在创建项目所有控制器的 HTML DOC 文件，并创建一个目录，您将在其中生成 HTML DOC 文件。

`<Your_Project_Directory> $ headerdoc2html -o <DIR_PATH_TO_CREATE_YOUR_DOC> <PROJECT_NAME>`

第 3 步：现在您将看到它们是在您创建 doc 文件的目录路径中创建的。不要想太多，我们稍后会看到。现在转到您创建 HTML 文件的目录

`<Your_Project_Directory> $ cd <DIR_PATH_TO_CREATE_YOUR_DOC>`

第 4 步：它们现在在您的目录中有很多文件，并且它们都相互分离，因此要将它们组合在一起并相互创建链接，您必须应用最后一个命令。

`gatherheaderdoc ..`

这里最后一个'..'（两个点）将创建“masterTOC.HTML”文件到父文件。现在您可以打开它并测试您的项目。

# css - a:first-child 修改我列表中的所有链接

> ID：12420551
> 
> 赞同：4
> 
> 时间：2012-09-14T08:15:47.417
> 
> 标签：css

我的链接有问题，我似乎无法找到第一个孩子为什么会这样。

它没有修改我的无序列表中的第一个链接，而是修改了所有链接。当我尝试使用 last-child 或 nth-child 时，也会发生同样的事情。

谁能帮我解决这个问题？谢谢

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
    <title></title>
    <style type="text/css">
        * {margin:0;padding:0;font-size:13px;color:white;font-family:arial;}
        body {background-color:black;}
        #wrapper {margin:0px auto;width:1024px;}

        #types {position:relative;top:4px;width:810px;list-style-type:none;}
        #types li {display:inline;}
        #types a {text-decoration:none;padding:8px;margin:-1px;background-color:#1A1A1A;}
        #types a:hover {background-color:#A02723;}
                #types a:first-child {background-color:#A02723;}

    </style>
    <script type="text/javascript">

    </script>
</head>

<body>
    <div id="wrapper">

        <ul id="types">
            <li><a href="#">1</a></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li><a href="#">4</a></li>
            <li><a href="#">5</a></li>
            <li><a href="#">6</a></li>
            <li><a href="#">7</a></li>
            <li><a href="#">8</a></li>
            <li><a href="#">9</a></li>
        </ul>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T08:18:09.927

`a:first-child`匹配`<a>`作为其父元素的第一个子元素的元素。您的`<a>`元素在完全不同`<li>`的 s 中，因此它们*都是*其父元素的第一个子元素。

您应该匹配`<li>`元素：

```
#types li:first-child a {background-color:#A02723;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T08:17:36.263

尝试

```
#types li:first-child a 
```

安装。

# c# - 无法通过 XML-RPC [Wordpress/NGG] 上传 base64 位图像

> ID：12420553
> 
> 赞同：0
> 
> 时间：2012-09-14T08:16:13.263
> 
> 标签：c#, wordpress, base64, xml-rpc, nextgen-gallery

我实际上已经尝试了所有可能的方法，但显然我无法找出正确的方法。

我正在尝试将图像上传到安装在 wordpress 博客上的下一代画廊。关于 xml-rpc 的一切都在工作，因为我可以用它做所有其他的事情。

问题是服务器返回一个错误，指出图像不是有效的。很明显，问题出在base64上。但是，出于测试目的，我复制并检查了 base64 字符串并意识到它是正确的，它使用外部 base64 到图像转换器将正确转换为图像。

这是提交查询的行。

```
 result = categories.newImage(1, "admin", "password", newImage); 
```

newImage 的结构是；

```
 public struct imageI
    {
        public string name;
        public string type;
        public string bits;
        public bool overwrite;
        public int gallery;
        public int image_id;

    } 
```

这就是初始化新图像的方式，以及将图像转换为 base64 的方式

```
 //Creating the image base64 string
        string filename = "asd.jpg";
        Image image1 = Image.FromFile(filename);
        string base64 = ImageToBase64(image1, image1.RawFormat);
        //for test purposes i copied and checked the base64 and it is just right, it converts right to the image using an external base64 to image converter.
        Clipboard.SetText(base64);

        //Creating a newImage 
        imageI newImage = default(imageI);
        newImage.name = "newImage";
        newImage.bits = base64;
        newImage.gallery= 86; 
```

最后是我的方法“ImageToBase64（Image，ImageFomat）”；

```
 public string ImageToBase64(Image image, System.Drawing.Imaging.ImageFormat format)
    {
        using (MemoryStream ms = new MemoryStream())
        {
            // Convert Image to byte[]
            image.Save(ms, format);
            byte[] imageBytes = ms.ToArray();

            // Convert byte[] to Base64 String
            string base64String = Convert.ToBase64String(imageBytes);
            return base64String;

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:00:51.177

万一有人碰到这个问题，我马上就知道了； `newImage.name = "newImage";` 文件名应该和你上传的一样，或者至少应该有相同的扩展名，以便xml-rpc文件中的函数可以解析扩展名并检查是否可以上传。

# android - 安卓项目管理软件

> ID：12420562
> 
> 赞同：0
> 
> 时间：2012-09-14T08:16:58.747
> 
> 标签：android, project-management

我必须为 Android 选项卡开发项目管理软件。

基本上是一个甘特图绘图软件。我不知道从哪里开始，我应该使用什么外部 API 来绘制甘特图。所以请有人告诉我应该使用的外部 API 和一些参考资料，这些参考资料将帮助我为 android 启动项目管理软件。谢谢大家再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:31:21.623

来吧伙计！如果您有扎实的 Java（或编程）知识，我相信您明白没有人会将您“指向”外部 API 或项目模板，您只需更改几个字符串，瞧！你有你的项目。

不过，对于图表部分， [https:](https://stackoverflow.com/a/772757/619699) //stackoverflow.com/a/772757/619699 给出了一个很好的答案。我假设这些图表也支持甘特图。您必须检查他们的文档。

> 更新
> 
> 自从问了这个问题以来，已经创建了一些非常好的开源本机库。这些包括：
> 
> ChartDroid AndroidPlot AChartEngine ORIGINAL
> 
> 看起来这个问题的创建者解决了这个问题并将一些有趣的东西发布到互联网上。我已经链接到他的解决方案以及现在存在的其他几个解决方案。
> 
> rapidandroid（问题创建者解决方案）GraphView Java Charts for Android 总结一下：他的解决方案涉及使用基于 jQuery 构建的 JavaScript 库（flot）。然后这个库被包含在一个 HTML 页面中，该页面被加载到一个自定义的 WebView 中。然后，自定义 WebView 从自定义 Java 类中读取数据，JavaScript 代码可以通过 WebView.addJavascriptInterface 方法访问这些数据。详细信息可以在上面的链接中找到。
> 
> 其他解决方案可能会提供更直接的方法。

# android - 如何拨打电话？

> ID：12420570
> 
> 赞同：0
> 
> 时间：2012-09-14T08:17:28.010
> 
> 标签：android, phone-call

当我按下项目“呼叫商店”时，我想在我的应用程序中拨打电话，

这是我的代码：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    final Entity_BikeShopRepair toko = adapterShop.getItem(position);

    CharSequence[] items = { "View on Map", "Call Shop" };

    AlertDialog.Builder builder = new AlertDialog.Builder(
            Tab_Shop_Repair_ListView_Activity.this);
    builder.setTitle(toko.getShop_Name());
    builder.setItems(items, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
            switch (item) {
            case 0:
                Toast.makeText(Tab_Shop_Repair_ListView_Activity.this,
                        toko.getShop_Name(), Toast.LENGTH_LONG).show();
                break;
            case 1:
                arrayList(Tab_Shop_Repair_ListView_Activity.this,
                        toko.getPhone_Number());
                Intent intent = new Intent(Intent.ACTION_CALL, Uri
                        .parse(arrayList.toString()));
                startActivity(intent);

                break;
            case 2:
                break;
            }
        }
    });
    AlertDialog alert = builder.create();
    alert.show();
} 
```

但代码是错误的“方法arrayList（Tab_Shop_Repair_ListView_Activity，String）未定义类型new DialogInterface.OnClickListener（）{}”

我不知道如何解决它，有人可以帮助我吗？太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:07:51.140

第一件事是您必须在清单中添加权限：

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

然后在活动中使用此代码拨打电话：

```
Intent callIntent = new Intent(Intent.ACTION_VIEW);
callIntent.setData(Uri.parse("tel:" + ph_no));
startActivity(callIntent); 
```

这里而不是`Intent.ACTION_CALL`更好地使用`Intent.ACTION_VIEW`，允许用户在确认呼叫之前更改号码，例如`0`在前面添加等..，

并且在同一个活动中也有这个代码：

```
PhoneCallListener phoneListener = new PhoneCallListener();
TelephonyManager telephonyManager = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);
telephonyManager.listen(phoneListener,PhoneStateListener.LISTEN_CALL_STATE); 
```

和这个类：

```
private class PhoneCallListener extends PhoneStateListener {

    private boolean isPhoneCalling = false;

    String LOG_TAG = "LOGGING 123";

    @Override
    public void onCallStateChanged(int state, String incomingNumber) {

        if (TelephonyManager.CALL_STATE_RINGING == state) {
            // phone ringing
            Log.i(LOG_TAG, "RINGING, number: " + incomingNumber);
        }

        if (TelephonyManager.CALL_STATE_OFFHOOK == state) {
            // active
            Log.i(LOG_TAG, "OFFHOOK");

            isPhoneCalling = true;
        }

        if (TelephonyManager.CALL_STATE_IDLE == state) {
            // run when class initial and phone call ended,
            // need detect flag from CALL_STATE_OFFHOOK
            Log.i(LOG_TAG, "IDLE");

            if (isPhoneCalling) {

                Log.i(LOG_TAG, "restart app");

                // restart app
                Intent i = getBaseContext().getPackageManager()
                        .getLaunchIntentForPackage(
                                getBaseContext().getPackageName());
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);

                isPhoneCalling = false;
            }

        }
    }
} 
```

通话结束或取消等后返回应用程序，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:31:54.113

试试这个代码它会工作

```
String number = "tel:" + toko.getPhone_Number().toString();
    Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse(number)); 
    startActivity(callIntent); 
```

还要在清单中添加权限...

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

# java - 如何在 Eclipse RCP 应用程序的视图中显示 Google 地图

> ID：12420574
> 
> 赞同：3
> 
> 时间：2012-09-14T08:17:37.020
> 
> 标签：java, google-maps, eclipse-rcp

我正在开发一个使用`Google Maps API`. 我想在`Eclipse RCP`透视图中显示地图，而不是通过创建浏览器实例并在视图中显示整个浏览器。

那可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:40:48.900

这是可能的。您最终可能会在从 Maps API 获得的 SWT 画布上排列/绘制平铺图像

# c# - 在 C# 中使用反射读取所有方法属性

> ID：12420575
> 
> 赞同：0
> 
> 时间：2012-09-14T08:17:45.753
> 
> 标签：c#, exception, reflection, custom-attributes

我正在尝试读取包含多个相同类型的属性的方法的所有属性，例如：

```
[field(Feld = "x86", Index = 1)]
[field(Feld = "x93", Index = 2)]
...
[field(Feld = "x107", Index = 9)]
public string Methodename() {} 
```

读取属性，如：

```
Attribute mAttr = Attribute.GetCustomAttribute
                  (methodInfo, typeof (fieldAttribute), false) as fieldAttribute; 
```

这会抛出一个[AmbiguousMatchException](http://msdn.microsoft.com/en-us/library/system.reflection.ambiguousmatchexception.aspx)。我如何读取多个属性？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:21:49.990

使用[GetCustomAttributes](http://msdn.microsoft.com/en-us/library/ms130871.aspx)而不是 GetCustomAttribute :)

例如：

```
Attribute[] attributes = Attribute.GetCustomAttributes
              (methodInfo, typeof (fieldAttribute), false); 
```

# javascript - GoogleMaps：返回不适用于反向地理编码

> ID：12420577
> 
> 赞同：0
> 
> 时间：2012-09-14T08:17:54.883
> 
> 标签：javascript, google-maps-api-3, return, return-value, anonymous-function

我正在尝试 ReverseGeCoding 它的工作，但我无法获得返回值

```
function reverseGeoCode(lat,lng) {
 var reverseGeoAddress = '';
 var geocoder = new google.maps.Geocoder();
 var latlng = new google.maps.LatLng(lat, lng);
 geocoder.geocode({'latLng': latlng}, function(results, status) {
     if (status == google.maps.GeocoderStatus.OK) {
         if (results[1]) {
             if(results[1].formatted_address.length){
                 reverseGeoAddress = results[1].formatted_address;
                 //NOTE: when i console.log(reverseGeoAddress );
                 //its working fine i am getting the address
                 return reverseGeoAddress;
                   //but return not working.

             }  
         }
      } 
  });
} 
```

当我调用我的函数时

```
 var address = reverseGeoCode(31.518945,74.349316); 
```

现在每次我的地址变量是“未定义”；为什么这样做？有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:26:31.377

函数`reverseGeoCode`没有任何返回值

```
return reverseGeoAddress; is inside anonymous function. 
```

简单的解决方法是-您可以使用回调，因为它是异步函数。“回调”可以是您调用位置的处理程序。

```
// Invoking reverseGeoCode....
reverseGeoCode(lat,lng, function(myAddress){ 
  // Your custom code goes here...
});

function reverseGeoCode(lat,lng, callback) {
var reverseGeoAddress = '';
 var geocoder = new google.maps.Geocoder();
 var latlng = new google.maps.LatLng(lat, lng);
 geocoder.geocode({'latLng': latlng}, function(results, status) {
     if (status == google.maps.GeocoderStatus.OK) {
         if (results[1]) {
             if(results[1].formatted_address.length){
                 reverseGeoAddress = results[1].formatted_address;
                 // Callback the handler if it exists here
                 // No return value
                 callback(reverseGeoAddress);
             }  
         }
      } 
  });
} 
```

# mobile-phones - 带有电话检测检查的非 wifi 连接

> ID：12420580
> 
> 赞同：5
> 
> 时间：2012-09-14T08:18:01.597
> 
> 标签：mobile-phones, broadband

如果有人正在访问具有 3G 移动连接（因此没有 WiFi）的页面，我如何在网络上查看？这是因为我想在某人的手机（使用 WiFi）具有正常速度的互联网连接时显示视频。如果当时有人在他的手机上的互联网连接速度很慢（不是 WiFi），我想显示一张照片。因此，用户不必通过尝试连接下载 30MB 的视频文件，并破坏其提供商的带宽限制。如果可能的话，我更喜欢使用 jQuery/Javascript 的客户端解决方案或使用 PHP 的基于服务器的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:27:59.800

找到了一种有趣的方法来估计 PHP 的连接速度：[http ://www.emanueleferonato.com/2006/05/31/determine-connection-speed-with-php/](http://www.emanueleferonato.com/2006/05/31/determine-connection-speed-with-php/)

估计的速度将取决于与服务器的连接，因此它不是那么准确，但可能会给您一个好主意。只要结果低于某个值，您就可以显示照片。

# python - 将多个变量分配给列表中的随机项。Python

> ID：12420583
> 
> 赞同：2
> 
> 时间：2012-09-14T08:18:19.460
> 
> 标签：python, variables

我想要将多个变量设置为列表中的随机元素。现在我这样做有点像这样：

```
from random import choice

list = ["a", "b"]
foo = choice(list)
bar = choice(list)
baz = choice(list) #etc. 
```

我确信有更好的方法来做到这一点。我试过了

```
 foo = bar = baz = choice(list) 
```

但是，当然它只是将它们全部设置为随机选择一次的列表的单个元素，并且我希望将每个变量设置为新的 random.choice。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T08:19:38.150

[`random.sample()`](http://docs.python.org/library/random.html#random.sample)如果您想从列表中提取三个*不同的*元素（即`foo`永远不等于`bar`，这可能不是您想要的），您可以使用：

```
foo, bar, baz = random.sample(l, 3) 
```

我将您的变量重命名为，`l`因为`list`它是一个内置类型。意外覆盖它不会很漂亮。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T08:20:55.957

也许创建一个带有选择输出的列表？就像是

```
choices = [choice(list) for i in range(10)] 
```

你有10个元素？另外我会重命名`list`为别的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:34:28.200

Like @Alex suggested but without getting list as result:

```
foo, bar, baz = [random.choice(list) for i in range(3)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T08:38:20.650

我会考虑将它们放在`dict`使用`somedict['foo']`样式访问中：

```
from random import choice

CHOICES = ('a', 'b')
choices = {name: choice(CHOICES) for name in ['foo', 'bar', 'baz']} 
```

# python - 哪种 DataFrame 表示用于可读测试

> ID：12420598
> 
> 赞同：0
> 
> 时间：2012-09-14T08:19:12.943
> 
> 标签：python, pandas, restructuredtext

我写了很多涉及 DataFrame 的测试（基于鼻子）。最终用户应该可以阅读这些测试。与纯文本表格表示相比，DataFrame 构造函数的阅读不太友好。

使用像 reStructured 这样的文本表示来构造/断言 DataFrame 怎么样？

```
=========== =========== ========= ========= ========================
id1         id2         net       nnet      desc
(int64)     (int64)     (float64) (float64) (object)
----------- ----------- --------- --------- ------------------------
1001        1002             10.0       0.0 Closed part of queue
1002                          0.0       3.0 Opened part of queue
=========== =========== ========= ========= ======================== 
```

(dtype) 行有助于强制列类型不会在断言上失败（可能是可选的）。

在编码这个 reST DataFrame 构造/断言功能之前，我需要社区反馈。我还考虑使用 ipython 笔记本作为测试用例。

当可读性很重要时，您首选的 DataFrame 表示形式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:27:40.347

从 reST 表构建是不可能的，但会很有趣。您可以使用 read_csv 读取表格。另请参见 read_clipboard 和 read_fwf（固定宽度）

```
In [22]: table = """\
   ....: id1         id2         net       nnet       desc
   ....: 1001        1002             10.0       0.0  Closed part of queue
   ....: 1002        NaN               0.0       3.0  Opened part of queue
   ....: """

In [23]: df = pandas.read_csv(StringIO(table), sep='[\s]{2,}')

In [24]: df
Out[24]: 
    id1   id2  net  nnet                  desc
0  1001  1002   10     0  Closed part of queue
1  1002   NaN    0     3  Opened part of queue 
```

# android - 我应该为 Android 应用创建多大的尺寸？

> ID：12420609
> 
> 赞同：1
> 
> 时间：2012-09-14T08:20:04.573
> 
> 标签：android, android-layout, android-activity, drawable, android-screen-support

我的设备的逻辑分辨率是`480x800`，密度是`mdpi`，我想让背景图像占据屏幕的一半，这是逻辑上的`240x400`，那么我应该在photoshop中创建什么图像并放在`drawable-mdpi`文件夹下？

我的理解是，如果我的图像是在桌面上创建的`72 dpi`，那么我应该将我的图像准备为 ..

```
w = (240 * 160 / 72) = 533
h = (400 * 160 / 72) = 888 
```

所以我应该使用 533x888 (72dpi) 的大小在 Photoshop 中准备一个图像并放在`drawable-mdpi`文件夹下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:29:13.763

您可以采用您概述的方法，但您也可以将高分辨率图像放在文件夹中，并使用与设备无关的像素（或）`res/drawable`设置布局文件中的宽度和高度：`dip``dp`

```
<ImageView
    android:id="@+id/my_id"
    android:layout_width="240dp"
    android:layout_height="400dp"
    android:contentDescription="@string/my_image_description"
    android:src="@drawable/my_image"/> 
```

当然，图像的缩放会损害整体质量，但您也可能会遇到其他`mdpi`分辨率不同的设备，因此无论如何图像都会被缩放。

# facebook - 如何在facebook中显示类似于like按钮的打开图形操作

> ID：12420610
> 
> 赞同：0
> 
> 时间：2012-09-14T08:20:05.263
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk

当我打开社交阅读器时，它会显示

```
<img src="friend img"> Your friend and 10 others Read this article 
```

这当然不是 Facebook 的“点赞”按钮。那么，我怎样才能实现这种插件！基于图形动作？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:50:10.933

> 那么，我怎样才能实现这种插件！基于图形动作？？

将 Facebook 用户已阅读文章的信息存储到您的数据库中，然后将它们与当前登录用户的朋友相交。

# c++ - 返回指针或迭代器

> ID：12420612
> 
> 赞同：0
> 
> 时间：2012-09-14T08:20:22.013
> 
> 标签：c++, iterator, stdvector

我正在重写一个引用 std::vector 的自由函数。根据给定的标准，它然后返回向量中项目的索引，如果未找到，则返回 -1。我希望它返回一个指向该项目的指针还是一个 std::vector<>::iterator？

在决定退货时我应该考虑什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:21:38.500

返回一个迭代器，`yourVector.end()`如果没有找到该元素。

这是标准库使用的。

例子：

```
auto my_function(std::vector<int>& v) -> decltype(v.begin())
{
    // Do the search
    ...
    else return v.end();
} 
```

更好的是，如果你能做到

```
template <typename I>
I my_function(I begin, I end)
{
     // Do the search
     ...
     else return end;
}

template <typename C>
auto my_function(C&& c) -> decltype(std::begin(c))
{
    return my_function(std::begin(c), std::end(c));
} 
```

因为它适用于任何容器（包括数组）：

```
double my_array[] = { 1, 2, 42, -7 };
auto p = my_function(my_array); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T08:23:18.500

只需使用返回 interator 的惯用方式，如果未找到该项目，则 return `.end()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:23:43.903

您绝对应该返回一个`std::vector<>::iterator`，原因如下：

当你处理一个数据结构时，你应该总是给出正确的“加入对象”。如果你使用一个实际的数组 ( `int[]`)，你可以给出指针。但是对于 std::vector<>，正确的“访问对象”是迭代器，你永远不应该通过指针访问向量中的元素。

您可以返回`your_vec.end()`以指示未找到该元素。

# yum - 显示 yum 优先级插件排除的软件包

> ID：12420619
> 
> 赞同：2
> 
> 时间：2012-09-14T08:20:45.097
> 
> 标签：yum

当使用 yum 的优先级插件时，我会看到已被排除的包的数量。有没有办法显示这些包的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T19:08:32.310

你总是可以像这样运行 yum：

```
yum -d 9 install foo 
```

部分日志输出是排除包。

**编辑**

这是我用来仅查看排除包的命令：

```
yum -d 9 install foo | grep excluded 
```

以防万一你想知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T05:59:40.817

从[Fedora 网站上](http://docs.fedoraproject.org/en-US/Fedora/14/html/Software_Management_Guide/ch06s14.html)提供的文档，以及[CentOS 文档](http://wiki.centos.org/PackageManagement/Yum/Priorities)中，这种功能是不受支持的。

# android - 我可以在 odexing 后签署 APK 吗？

> ID：12420620
> 
> 赞同：3
> 
> 时间：2012-09-14T08:20:45.733
> 
> 标签：android, apk, sign

这两种方式是否相等且正确？

方法一：

1.  将 APK 转换为 a`.apk`和 a`.odex`
2.  `.apk`对步骤 1 中生成的文件进行签名

方法二：

1.  签署 APK
2.  将 APK 转换为 a`.apk`和 a`.odex`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:12:56.920

首先，您需要了解 .apk 和 .odex 文件的工作原理。

**.Odex 文件：**
`Odex`文件是提取和优化的`DEX`文件`(classes.dex) from APK or JAR files`。
ODEX 文件依赖于生成时加载的 BOOTCLASSPATH 中的每个文件。
odex 文件仅在与这些确切的 BOOTCLASSPATH 文件一起使用时才有效。
Android 应用程序包含扩展名为`.apk`. 这些应用程序包或 APK 包含某些`.odex files`其假定功能是节省空间。
这些“odex”文件实际上是启动前优化的应用程序部分的集合。
这也使得破解这些应用程序变得困难，因为部分编码在执行之前已经被提取到另一个位置。

**工作原理：-**
Android 操作系统使用基于 Java 的虚拟机来运行应用程序，称为 Dalvik 虚拟机。`A deodexed, or .dex`文件包含此虚拟机`(referred to as Dalvik-cache)`用于程序的缓存，并且它存储在`APK.`An`.odex`文件中，另一方面，它是同一`.dex`文件的优化版本，存储在它旁边`APK`而不是在它内部。
Android 默认将此技术应用于所有系统应用程序。

现在，当基于 Android 的系统启动时，Davlik VM 的 davlik 缓存是使用这些 .odex 文件构建的，允许操作系统提前了解将加载哪些应用程序，从而加快启动过程。

通过`deodexing`这些 APK，开发人员实际上将`.odex`文件放回各自的`APK`包中。由于现在所有代码都包含在其`APK`自身中，因此可以修改任何应用程序包而不会与操作系统的执行环境发生冲突。

你可以在这里找到一些信息 ，[这里](http://code.google.com/p/smali/wiki/DeodexInstructions)
[有一个 StackOverFlow 问题可能对你有帮助](https://stackoverflow.com/questions/9593527/what-are-odex-files-in-android)。

# c# - 为什么我的自托管 WCF 服务返回 403 Forbidden 而不是 401 Unauthorized？

> ID：12420626
> 
> 赞同：6
> 
> 时间：2012-09-14T08:21:07.403
> 
> 标签：c#, wcf

我一直在尝试使用 WCF 创建一个相对简单的自托管 RESTful 服务，但我想添加自定义身份验证。为此，我尝试覆盖`UserNamePasswordValidator`. 不幸的是，尽管调用它来验证用户名/密码组合，但如果用户名/密码不通过，服务器会返回 403 Forbidden，而不是 401 Unauthorized，正如我所期望的那样。这将导致一个大问题，因为如果用户第一次验证失败，除非他们重新启动浏览器，否则不会提示他们再次输入凭据。那么，我做错了什么？

这是我到目前为止所拥有的：

（实际`ServiceContract`包含一个返回字符串的方法）

```
class Program
{
    static void Main(string[] args)
    {
        WebServiceHost host = null;
        try
        {
            host = new WebServiceHost(typeof (MyService));
            const string uri = "http://127.0.0.1/MyService";
            var wb = new WebHttpBinding
                            {
                                Security =
                                    {
                                        Mode = WebHttpSecurityMode.TransportCredentialOnly,
                                        Transport = {ClientCredentialType = HttpClientCredentialType.Basic}
                                    }
                            };
            var ep = host.AddServiceEndpoint(typeof (IMyService), wb, uri);
            host.Credentials.UserNameAuthentication.UserNamePasswordValidationMode = UserNamePasswordValidationMode.Custom;
            host.Credentials.UserNameAuthentication.CustomUserNamePasswordValidator = new PasswordValidator();
            host.Open();

            Console.WriteLine("Press any key to terminate");
            Console.ReadKey();
        }
        finally
        {
            if (host != null) host.Close();
        }
    }
}

public class PasswordValidator : UserNamePasswordValidator
{
    public override void Validate(string userName, string password)
    {
        if (null == userName || null == password)
            throw new ArgumentNullException();

        if (userName == "Test" && password == "Password") return;
        throw new WebFaultException(HttpStatusCode.Unauthorized);
    }
} 
```

我已经注意到了[另一个类似的问题](https://stackoverflow.com/questions/1968300/return-401-from-wcf-service)，但是那里发布的答案都没有真正起作用。我希望这个问题的更完整定义的版本会引起一些更好的回应。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T10:38:59.213

试试这个：

```
public override void Validate(string userName, string password) 
{ 
    if (null == userName || null == password)             
        throw new ArgumentNullException(); 
    if (userName == "Test" || password == "Password") return; 

    WebFaultException rejectEx = new WebFaultException(HttpStatusCode.Unauthorized);
    rejectEx.Data.Add("HttpStatusCode", rejectEx.StatusCode);
    throw rejectEx;
} 
```

据我所知，这是一种未记录的技术，它依赖于 WCF 堆栈如何在内部管理异常。应该有记录的方式，但我还没有找到。

# ruby-on-rails - 未找到命名的协会

> ID：12420629
> 
> 赞同：4
> 
> 时间：2012-09-14T08:21:20.317
> 
> 标签：ruby-on-rails, ruby-on-rails-2

我在 Rails 2 中工作。我有三个表`users`：`lms_users`和`group_details`。

在`lms_users`id from`users`和`group_details`作为外键来。`lms_users`也有自己的属性。我无法在他们各自的模型中定义关联。我试过这个：

在`LmsUser`模型中

```
belongs_to :users
belongs_to :group_details 
```

在`User`模型中

```
has_many :group_details , :through => :lms_users 
```

在`GroupDetail`模型中

```
has_many :users , :through => :lms_users 
```

但我收到了这个错误

```
ActiveRecord::ConfigurationError in Lms usersController#index
Association named 'lms_user' was not found; perhaps you misspelled it? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T08:32:16.770

您需要将您正在经历的关联添加为 has_many。

因此，例如，您的 user.rb 应如下所示：

```
has_many :lms_users
has_many :group_details , :through => :lms_users 
```

您的 group_detail.rb 应包含以下内容：

```
has_many :lms_users
has_many :users , :through => :lms_users 
```

:through 通过一个关联，所以关联需要已经建立。

# database - 休眠多对多示例

> ID：12420630
> 
> 赞同：0
> 
> 时间：2012-09-14T08:21:22.983
> 
> 标签：database, hibernate

我正在按照[这里](http://www.mkyong.com/hibernate/hibernate-many-to-many-example-join-table-extra-column-annotation/)的教程进行操作，并且有一部分我不明白。

在**4\. 运行它 – 案例 1**

```
    session.beginTransaction();
    股票股票 = 新股票（）；
    stock.setStockCode("7052");
    stock.setStockName("PADINI");
    类别 category1 = new Category("CONSUMER", "CONSUMER COMPANY");
    session.save(category1);

    StockCategory stockCategory = new StockCategory();
    stockCategory.setStock(股票);
    stockCategory.setCategory(category1);
    stockCategory.setCreatedDate(new Date()); //额外的列
    stockCategory.setCreatedBy("系统"); //额外的列

    stock.getStockCategories().add(stockCategory);

    session.save（股票）；

    session.getTransaction().commit();

```

stock 和 category1 之间的关联已创建，同时

```
    stockCategory.setStock(股票);
    stockCategory.setCategory(category1);

```

那么，为什么我们还需要

```
stock.getStockCategories().add(stockCategory);
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:27:46.633

您不一定需要它来使数据库满意，但不这样做会使对象图不一致。

因此，例如，如果您作为此操作的结果返回股票及其类别，并且客户端代码 (UI) 遍历股票类别以显示系统的新状态，则新创建的股票将显示为没有任何类别，这是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:30:53.257

严格来说，添加对于hibernate 来持久化对象并不是必需的。如果您要显式保存股票类别，则该关系将保持不变。但是，您只保存股票对象。因此，库存类别需要在集合中，以便 hibernate 可以找到它。

请注意类别集合上的 CascadeType.ALL。这意味着在保存时，hibernate 应该查看此集合中的项目并将它们全部保存。因此，保存库存足以让休眠找到并保存库存类别并保持关系。如果您没有将项目添加到集合中，休眠将无法找到它，因此除非您明确保存 StockCategory，否则不会保存关系。

正如其他答案中所提到的，保持对象图与持久状态一致也被认为是一种很好的做法，以避免在不同时间填充的内容不同的细微错误。

# android - 如何在 Android 中只测试一个线源？

> ID：12420633
> 
> 赞同：0
> 
> 时间：2012-09-14T08:21:37.133
> 
> 标签：android, unit-testing, junit-ee

我必须进行 Android Junit 测试。来源就像这样：

```
public class A extends Activity{

    private classB mB;
    private int mType = 2; 

    somebutton.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                       mB.showDialog(
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                 //next line is the modified and I have to make test file                               
                                  mB.setType(mType);
                                }
                            }
                       )
                }
        }
  } 
```

我可以让测试点击按钮并准备所有其他需要的东西，但我想如何断言True？并且没有“getType()”，“mB”中的“Type”是私有的。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:10:06.920

在 android 上进行单元测试很困难，因为所有的 SDK 类都被存根，并且只适用于重新编译它们，并且在设备或模拟器上运行单元测试是 PITA

另一种选择是嘲笑。[最] 合适的模拟框架是 JMockit（它可以模拟最终私有静态 - 也可以模拟你梦寐以求的一切）

这是一个小例子，展示了 jmockit 对 android 类的使用：

```
/**
 * shall inject assignable views   into
 */
@Test
public void testSimpleInjection(@Mocked final WithInjectableViews injectable,
                                @Mocked final TextView textView,
                                @Mocked final Button button) {

    new Expectations() {
        {
            injectable.findViewById(239);
            returns(textView);

            injectable.findViewById(555);
            returns(button);

        }
    };

    ViewInjector.startActivity(injectable);

    assertEquals(textView, Deencapsulation.getField(injectable, "asView"));
    assertEquals(button, Deencapsulation.getField(injectable, "button"));
    assertNull(Deencapsulation.getField(injectable, "notInjected"));

}

class WithInjectableViews extends Activity {
    // shall be injected
    @InjectView(id = 239)
    private android.view.View asView;
    @InjectView(id = 555)
    private Button button;
    // shall be left alone
    private View notInjected = null;

} 
```

（完整来源：[https](https://github.com/ko5tik/andject/blob/master/src/test/java/de/pribluda/android/andject/ViewInjectionTest.java) ://github.com/ko5tik/andject/blob/master/src/test/java/de/pribluda/android/andject/ViewInjectionTest.java ）

但是，模拟匿名内部类很困难，因此您可能必须以某种方式进行重构。至于对 provate 字段和 mewthods 的访问——jmockit 提供了直到类*Deencalsulation——*它忽略了几乎所有的访问约束。

# google-apps-script - 通过 Apps 脚本强制刷新公式

> ID：12420635
> 
> 赞同：3
> 
> 时间：2012-09-14T08:21:38.863
> 
> 标签：google-apps-script, spreadsheet

有时，当更改单元格的值时，电子表格中的公式不会自动刷新，并且单元格上会出现注释以选择单元格并按 CTRL+SHIFT+E 强制重新加载公式

我想从 Apps 脚本调用这个重新加载函数。有没有办法用 Apps Script 做到这一点？我尝试了 Spreadsheet.flush()，但它不起作用。

感谢您的帮助，最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-14T23:14:13.597

也许这个“不可能”的答案随着新的电子表格或自 2012 年以来的某个其他时间而改变。

如果您存储单元格的公式，清除单元格，然后设置单元格的公式，它似乎对我来说重新评估就好了。

这是我正在做的快速而肮脏的概述：

```
// highlight a single cell and run this function
function myFunction() {
  var curr_cell = SpreadsheetApp.getActiveRange();
  var formula = curr_cell.getFormula();
  // clear only the contents, not notes or comments or formatting.
  curr_cell.clearContents();
  curr_cell.setFormula(formula);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-17T04:43:22.667

这应该可以，设置一些其他公式并再次恢复它

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
var sheet = ss.getSheets()[0];
var range = sheet.getDataRange();

var values = range.getValues();
var formulas = range.getFormulas()

for (var i = 0; i < formulas.length; i++) {
    for (var j = 0; j < formulas[i].length; j++) {
        if (formulas[i][j]) {
            var f = sheet.getRange(i + 1, j + 1).clearContent().setFormula('=true');
            SpreadsheetApp.flush();
            f.setFormula(formulas[i][j])
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T23:04:19.513

遗憾的是，无法使用 Apps 脚本触发对公式的重新评估。

# sql-server - UnionAggregate（几何数据类型）

> ID：12420638
> 
> 赞同：-1
> 
> 时间：2012-09-14T08:21:50.253
> 
> 标签：sql-server, spatial

SQL Server 2008 R2 是否支持 UnionAggregate（几何数据类型）方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:20:25.603

[几何实例上的方法的 BOL 页面](http://msdn.microsoft.com/en-us/library/bb933960%28v=sql.105%29.aspx)没有列出该名称的方法。但是有STUnion，我过去用过。

# django - Django 对象更改未在页面上显示操作

> ID：12420644
> 
> 赞同：0
> 
> 时间：2012-09-14T08:22:16.527
> 
> 标签：django, caching

我有一个对象，问题，我已经为它创建了一个编辑页面。这工作得很好。有人会编辑问题，更改会显示在刚刚显示问题的页面上。然而，最近，我开始注意到这些更改并未出现在问题列表中。将缓存后端更改为虚拟后端后，此问题仍然存在。运行开发服务器时，我看到了带有漂亮 200 代码的请求。我放入视图中的打印语句，我希望出现在 de dev-server 的输出中，但没有出现。所以显然视图方法甚至没有被调用。我觉得 200 代码并不意味着没有从缓存中检索到某些内容。

我注意到三种方法，使网站在保存后显示对象的更改：

```
1\. Signing the current user out of the website and then logging in again.
2\. Appending ?something=whatever to the url.
3\. Waiting for an unknown amount of time. I tried if the waitingtime could be changed by modifying session-parameters, but to no avail. 
```

虽然我认为可以使用最后一种方法，但感觉不对。这意味着要解决以前不存在的问题需要大量的工作。我想知道到底发生了什么。

这是来自 settings.py 的缓存位。我认为这并不奇怪：

```
 CACHES = {
        'default':{
            'BACKEND': 'django.core.cache.backends.dummy.DummyCache'}} 
```

而且，因为注销和登录有帮助，会话内容：

```
SESSION_ENGINE = 'django.contrib.sessions.backends.file'
SESSION_EXPIRE_AT_BROWSER_CLOSE = True 
SESSION_COOKIE_AGE = 60 
```

哦，这个问题也在管理员中.. 建议？

# java - 如何制作带有泰米尔语和英语选项的安卓应用程序？

> ID：12420647
> 
> 赞同：1
> 
> 时间：2012-09-14T08:22:26.800
> 
> 标签：java, android

在 android 应用程序中，该应用程序中有设置选项，例如英语和泰米尔语如果用户选择泰米尔语，则在应用程序中仅显示泰米尔语，在所有活动中，所有标签都应使用泰米尔语。如果用户选择英语，则所有标签都更改为英语。如何做到这一点？

请给任何想法....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:28:12.710

按照这个链接：[Android：点击翻译整个应用程序的语言](https://stackoverflow.com/questions/7414435/android-translate-the-language-of-whole-app-on-click)

然后这样做，将每个语言环境的字符串值添加到适当的文件中。

英语（默认语言环境），/values/strings.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="title">My Application</string>
    <string name="hello_world">GoodMorning</string>
</resources> 
```

泰米尔语，/values-tl/strings.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="title">My Application</string>
    <string name="hello_world">Kaalai vanakkam</string>
</resources> 
```

链接：http: [//developer.android.com/training/basics/supporting-devices/languages.html](http://developer.android.com/training/basics/supporting-devices/languages.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:25:39.753

看看这个[问题。](https://stackoverflow.com/questions/12006280/translate-my-app)

基本上，您必须将翻译后的字符串放在 res 文件夹中的文件夹中。

# android - Android：超过 80 次浏览；Viewflipper 或 Fragments（或其他东西..）

> ID：12420649
> 
> 赞同：2
> 
> 时间：2012-09-14T08:22:32.010
> 
> 标签：android, xml

我正在构建一个应用程序，您可以在其中编辑详细信息页面。现在我将可见性设置为 GONE 和 VISIBLE，因为所有视图（用于显示和编辑）都在同一个 xml 文件中。这产生了 80 多个视图，所以我收到了一条 Lint 消息，指出这会导致性能不佳。

我的问题是我可以使用 ViewFlipper（并且可以为此使用两个 xml）还是我最好使用两个片段？

（仅供参考：我还计划在显示和编辑之间制作动画，如果这改变了我最好的做法）

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:25:13.643

您也不需要：一个 ViewFlipper 或两个片段会引入不必要的复杂性。我会分开显示和编辑不同的布局（每个布局一个 XML 文件），并为每个布局构建不同的活动。当用户单击“编辑”时，启动新活动（带有[意图](http://developer.android.com/reference/android/content/Intent.html)）并转到编辑屏幕。然后在保存数据后只是`finish()`活动。

这就是我们所做的，而且效果很好！有时“简单”的解决方案是最好的解决方案，就像在这种情况下一样。

至于动画部分，Stack Overflow 上已经有很好的答案了，比如[这里](https://stackoverflow.com/questions/2625812/start-activity-with-an-animation)或者[这里](https://stackoverflow.com/questions/3515264/can-i-change-the-android-startactivity-transition-animation)。

如果您想在显示和编辑之间进行动画制作时保留 ActionBar，那么两个片段似乎是可行的方法。你也可以有两个布局并独立地膨胀它们，这样你就不会在一个布局中积累这么多的视图。但是请记住，（除非您自己创建 ActionBar 和片段）您将自己限制在 Honeycomb 3.0 及更高版本。

# google-chrome - 是否可以在 Chrome 中创建动态主题？

> ID：12420652
> 
> 赞同：6
> 
> 时间：2012-09-14T08:22:45.230
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-theme

[我可以按照文档](http://developer.chrome.com/extensions/themes.html)中的描述创建静态主题，我猜它不能在运行时修改。我需要一些方法或 API 来在运行时更改主题属性。可以用 Chrome 做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T11:34:53.773

不，现在不可能。对不起

# javascript - 将数据主题添加到所有项目

> ID：12420657
> 
> 赞同：1
> 
> 时间：2012-09-14T08:23:19.440
> 
> 标签：javascript, cordova, jquery-mobile, data-theme

如何`data-theme`从 JavaScript 向所有 div、listviews、forms、li、ul 等添加值？
是否可以？如果是，我该怎么做？

会像下面这样工作吗？

```
$.mobile.page.prototype.options.contentTheme= "e"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:06:59.690

```
Array.prototype.forEach.call(document.getElementsByTagName("*"), function (el) {
    el.setAttribute("data-theme", "e");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:51:38.093

如果您包含 jquery-mobile，以下应该可以工作：

```
$.mobile.page.prototype.options.contentTheme= "e";
$.mobile.page.prototype.options.headerTheme= "e";
$.mobile.page.prototype.options.footerTheme= "e"; 
```

但是，如果您添加了任何不属于页眉、内容或页脚的元素，那么您应该采用 Domenic 的方式来申请每个元素

# iphone - dismissModalViewAnimated 实际上移除了父视图

> ID：12420659
> 
> 赞同：0
> 
> 时间：2012-09-14T08:23:23.970
> 
> 标签：iphone, ios, camera, presentmodalviewcontroller

我有一个允许用户将图片添加到日志的应用程序。如果用户选择从库中添加，一切都很好，但如果用户选择使用相机拍照，则会出现问题：

当相机模态视图动画化并且我拍照并点击“使用”或单击“取消”按钮时，我在调用dismissModalViewAnimated时所在的视图将从其超级视图中删除。

有人对此有解释吗？

这是我用于呈现模态视图控制器的代码

```
pickerCont = [[UIImagePickerController alloc] init];
pickerCont.delegate = self;
pickerCont.sourceType = UIImagePickerControllerSourceTypeCamera;
[self presentModalViewController:pickerCont animated:YES]; 
```

这就是我用来解雇它的原因：

```
[self dismissModalViewControllerAnimated:YES] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:26:34.450

其实你是在驳斥parentview。这里**self**代表parentView

使用 UIImagePickerController 的委托解除 UIImagePickerController

```
 - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
   //get picked image here

   [pickerCont dismissModalViewControllerAnimated:YES]

} 
```

# python - 金字塔：add_static_view with name='directory/subdirectory'

> ID：12420667
> 
> 赞同：0
> 
> 时间：2012-09-14T08:23:54.537
> 
> 标签：python, pyramid

我最近刚开始学习 Python，并使用 Pyramid 作为我的 Web 框架。

我正在尝试在以下位置添加静态视图`localhost/images/misc`：

```
config.add_static_view('images', 'C:/Project/Images/')
config.add_static_view('images/misc', 'C:/Path/To/Other/Images/') 
```

但我收到一个错误：`File does not exist: C:/Project/images/misc`

因此，`images/misc`作为静态视图添加的第二行似乎没有任何效果。

我一直在寻找一种方法来做到这一点，但我没有找到任何东西。是否可以添加名称包含子目录的静态视图？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:13:40.090

在引擎盖下，pyramid 将方法的`name`一部分`add_static_view()`转换为形式的 Pyramid 路由谓词`name/*subpath`（其中`name`可以包含斜杠本身）。专用静态资产视图附加到该路由谓词。

在您的配置中，这意味着将按*顺序*`images/*subpath`同时存在和`images/misc/*subpath`路由谓词。然后，当您请求带有路径Pyramid的 URL 时，*首先*找到谓词，并尝试在文件夹中查找路径元素，但失败了。*`images/misc/foo.png``images/*subpath`*`misc``'C:/Project/Images/'`**

 **幸运的是，您可以颠倒注册的顺序，只需`images/misc`先注册路径：

```
config.add_static_view('images/misc', 'C:/Path/To/Other/Images/')
config.add_static_view('images', 'C:/Project/Images/') 
```

现在`images/misc/*subpath`先注册谓词，并在测试另一个谓词之前匹配任何`images/misc/`URL。**

# javascript - 来自函数参数的数据与分配的变量之间的性能差异？

> ID：12420670
> 
> 赞同：2
> 
> 时间：2012-09-14T08:24:13.417
> 
> 标签：javascript, performance, architecture

这听起来像是一个菜鸟问题，但这里有；基本上，我将大量数据从一个对象传递到另一个对象。下面是一个简化的例子。

```
// 示例 1
函数人（巨大数据）{
    this.info = 函数（） {
        控制台.log(hugeData);
    }
}
荷马 = 新人（巨大数据）；
荷马.info();

```

和....相比

```
// 示例 2
函数人（）{
    变种巨大数据；

    this.set = 函数（数据）{
        巨大的数据 = 数据；
    }

    this.info = 函数（） {
        控制台.log(hugeData);
    }
}
荷马 = 新人（）；
Homer.set(hugeData);
荷马.info();

```

两个代码片段在性能方面是否存在很大差异？请关注示例的上下文而不是代码本身（设置对象变量与传递参数）。

虽然上面的示例适用于 Javascript，但我也想知道相同的原则是否适用于其他编程语言，如 PHP。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:30:59.537

一点都不。

现在无需详细介绍，*形式参数*和*局部变量*都存储在引擎盖下的所谓的*激活对象*（在 ES3 中）或*词法环境记录（ES5）中。*

因此，访问时间应该与规范相同。

* * *

如果您想了解详细信息，请查看：

[http://dmitrysoshnikov.com/ecmascript/javascript-the-core/](http://dmitrysoshnikov.com/ecmascript/javascript-the-core/)

和

[http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-2-lexical-environments-ecmascript-implementation/](http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-2-lexical-environments-ecmascript-implementation/)

* * *

测试用例：http: [//jsperf.com/formal-parameters-vs-local-variables-access-time](http://jsperf.com/formal-parameters-vs-local-variables-access-time)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T08:38:52.733

我认为你的问题的重点是这条线是否......

`hugeData = data;`

...在您的代码中可能会影响性能。

答案是否定的，不是（至少不会影响应用程序的性能）。

如果`hugeData`引用一个对象（记住 JS 中的数组本质上是对象），它实际上只存储了对该对象的引用。引用就是将被复制的内容，而不会复制对象的内容。

如果`hugeData`指的是一个字符串，它*可能*会更复杂一些......但据我所知，大多数现代浏览器（例如检查[MDN](https://developer.mozilla.org/en-US/docs/Mozilla_internal_string_guide)）现在都实现了“写时复制”技术。换句话说，这里的字符串也不会被复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:33:03.990

通过变量传递是最好的事情。因为很明显您的庞大数据不是原始数据，所以您将只在函数上下文中引用它。看看 jAndy 的回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T08:35:08.627

在这种情况下很难一概而论，因为 Javascript 的每个实现都是不同的。

我可以想象，当您在创建对象时传递大量数据时，您正在节省内存的重新分配，这会发生在您先用少量数据创建对象，然后再向其中添加大量数据时。但是大多数 JS 实现无论如何都会将大数据块存储在引用中，因此它不太重要。

# python - 在 django 中删除 ForeignKey 时在相关模型上发出信号

> ID：12420672
> 
> 赞同：3
> 
> 时间：2012-09-14T08:24:25.057
> 
> 标签：python, django, django-signals

在 django 中，当 foreignKey 设置为时，是否有任何方法可以通知相关模型的变化`on_delete=models.SET_NULL`？

在具有典型情况的第一种情况下：

```
class RelatedModel(models.Model):
    fKey = models.ForeignKey('ForeignModel')

class ForeignModel(models.Model):
    name = models.CharField(max_length=128)

fk = ForeignModel.objects.create(name='Test')
rm = RelatedModel()
rm.fKey = fk
rm.save()
fk.delete() 
```

当 fk.delete() 被调用时，`pre_delete`and`post_delete`信号将同时被触发`fk`和`rm`对象。

但是，如果 RelatedModel 声明为：

```
class RelatedModel(models.Model):
    fKey = models.ForeignKey('ForeignModel', null=True, on_delete=SET.NULL) 
```

我没有看到为相关模型触发的任何信号，即使它已更改（`fKey`值已更改为 null）。唯一触发的信号是删除前/删除后的信号`fk`。

鉴于这种情况，是否有任何方法可以表明相关模型的变化并且仍在使用`on_delete=models.SET_NULL`而不是编写自定义方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:18:13.470

SET_NULL 只是一个可调用的，带有一些参数。因此，您可以定义自己的 SIGNALING_SET_NULL 并发送您选择的信号。

# shell - 为什么我的函数没有返回？

> ID：12420673
> 
> 赞同：4
> 
> 时间：2012-09-14T08:24:32.387
> 
> 标签：shell, return

在内联 shell 中，我输入`echo $(max 15 2)`但没有得到任何答案？

为什么会这样？

代码：

```
function max {
  if [ "$1" -eq "$2" ]
  then
    return $1
  else
    if [ "$1" -gt "$2" ]
    then
      return $1
    else
      return $2
    fi
  fi
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T08:34:09.740

替换`return`为`echo`，您的代码可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:54:17.367

从评论：

*   用 echo 替换 return 并且您的代码可以正常工作。- 搅拌机

*   该`$(...)`语法专门设计用于为您提供命令的输出，即使该命令恰好是函数调用。函数中的返回类似于整个脚本的退出；它设置它的状态，它是一个 0 到 255 范围内的整数。（这与您可能习惯使用的其他语言完全不同，其中 return 用于从函数返回一个值。） – Keith Thompson

*   Bash 函数与其他语言中的函数不同。它们的行为与任何其他命令相同：它们可以接受命令行参数、从标准输入读取、写入标准输出和标准错误，并以退出状态返回。它们不 - 严格来说 - 返回计算值。– 切普纳

# liferay - 错误 [PortletBagFactory:123] java.lang.ClassNotFoundException: com.liferay.portlet.StrutsPortlet

> ID：12420675
> 
> 赞同：0
> 
> 时间：2012-09-14T08:24:47.630
> 
> 标签：liferay

从 Liferay 6.0.6 升级到 6.1 和 Tomcat 6 升级到 7 后，运行 build.xml 文件时，出现以下错误。我检查了liferay论坛，但没有帮助。知道如何解决这个问题吗？谢谢！

```
07:26:07,593 ERROR [PortletBagFactory:123] java.lang.ClassNotFoundException: com.liferay.portlet.StrutsPortlet
java.lang.ClassNotFoundException: com.liferay.portlet.StrutsPortlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
    at com.liferay.portlet.PortletBagFactory.create(PortletBagFactory.java:120)
    at com.liferay.portal.deploy.hot.PortletHotDeployListener.initPortlet(PortletHotDeployListener.java:524)
    at com.liferay.portal.deploy.hot.PortletHotDeployListener.doInvokeDeploy(PortletHotDeployListener.java:302)
    at com.liferay.portal.deploy.hot.PortletHotDeployListener.invokeDeploy(PortletHotDeployListener.java:115)
    at com.liferay.portal.kernel.deploy.hot.HotDeployUtil._doFireDeployEvent(HotDeployUtil.java:111)
    at com.liferay.portal.kernel.deploy.hot.HotDeployUtil._fireDeployEvent(HotDeployUtil.java:188) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:07:50.103

`com.liferay.portlet.StrutsPortlet` is a class in the `portal-impl.jar`. It seems you are using this class in your custom plugin portlet.

Any class from `portal-impl.jar` is not recommended to be used in plugin-portlets and starting from 6.1 they have completely restricted the usage of classes from `portal-impl.jar` and here is the verdict from Liferay-staff in a [forum post](http://www.liferay.com/community/forums/-/message_boards/message/6951725#_19_message_7045789 "Liferay forum post on using portal-impl.jar in service builder").

So I guess you are out-of-luck here and you better refrain from using `StrutsPortlet` or any of the class from `portal-impl.jar`, you will need to find another way to achieve what you already did using this class. It will be a development effort but will help with future releases and best practices.

Here is a [link](http://liferaycms.wordpress.com/2011/01/25/why-i-cant-use-portal-impl-in-my-portlet/ "Why I can't use portal-impl.jar in my portlet") to understand as to why not to use `portal-impl.jar`.

# c# - 在静态类中使用非托管资源

> ID：12420676
> 
> 赞同：2
> 
> 时间：2012-09-14T08:24:54.577
> 
> 标签：c#, oop, architecture

我有一个类，我认为制作静态更有意义，因为它基本上是一个实用程序类。作为本课程的一部分，我正在与 Microsoft Access 和 Microsoft Excel 进行互操作。

显然，Office Interop 对象是非托管资源，静态类不能有析构函数。我觉得只有一个`Excel.Application`对象实例和`Access.Application`我的各种方法可以使用的对象实例是有意义的，注意关闭我的数据库和工作簿，并适当地处理错误。

当我关闭程序时，我的问题就出现了，如果我不运行`System.Runtime.InteropServices.Marshal.ReleaseComObject("myOfficeApplicationInstance");`，Office 实例会在我的任务管理器中徘徊。如果我在我的应用程序运行时释放该对象，那么我将无法再次使用它。

我不确定这一切是否有意义，所以下面有一些代码：

```
using System;
using Excel = Microsoft.Office.Interop.Excel.Application;
using Access = Microsoft.Office.Interop.Access.Application;

namespace QWERTY
{
    internal static class CreateReport
    {
        private static readonly Excel _excel;
        private static readonly Access _access;

        static CreateReport()
        {
            _excel = new Excel();
            _access = new Access();
        }

        internal static void Performance(DateTime reportDate)
        {
            _excel.Workbooks.Open(@"C:\whatever.xlsx");

            //Do stuff with Excel

            _excel.Workbooks.Close();

            _access.OpenCurrentDatabase(@"C:\whatever.accdb");

            //Do stuff with Access

            _access.CloseCurrentDatabase();
        }
    }
} 
```

几个问题

1.  我对这应该是一个静态类吗？
2.  使用完静态类后如何处理非托管资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:36:28.713

There are no static finalizers (see [here](https://stackoverflow.com/questions/4364665/static-destructor)). If you want to make the class static, also add a method to clean up which you call at the end of you application.

An alternative (which I would prefer) is to have a [singleton instance](http://msdn.microsoft.com/en-us/library/ff650316.aspx), and clean up this instance at the end of your application.

You can also then have a static property to access the instance if you want to. An alternative to the static property is to use some form of DI which you configure to create a single instance. Most DI's offer singleton scopes.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T10:45:00.757

如果您希望采用静态方式实现继承[CriticalFinalizerObject 类的类](http://msdn.microsoft.com/en-us/library/system.runtime.constrainedexecution.criticalfinalizerobject.aspx)。将您的静态类清理放在它的终结器中，然后将该类的一个实例添加为您的静态类的一个字段。然后，如果应用程序退出或您的应用程序域卸载该实例终结器将运行清理静态类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:30:12.977

处理非托管资源的最佳方法是将它们包装在实现 IDisposable 的类中。然后，您应该在 using 块中使用该类以确保正确清理。由于所有包含 IDisposable 成员的类本身都应该是 IDisposable，因此将它们设置为静态类成员并不是一个好主意。

当你的应用程序退出时，你总是可以释放它们，你确实有那个事件。

您确定不能在应用程序中打开 Excel 两次吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-29T15:11:38.743

抱歉，Office 互操作对象被视为托管资源，因为 Excel 和 Access 不实现 Idisposable 接口。

您是否尝试使用*Excel.Quit*语句正确关闭您的应用程序？我在您发布的代码中没有看到它。

# android - Android 画布中的平滑非常缓慢的文本动画，SUBPIXEL_TEXT_FLAG 不起作用

> ID：12420679
> 
> 赞同：7
> 
> 时间：2012-09-14T08:25:01.377
> 
> 标签：android, canvas, drawtext

我无法在 Canvas 中实现*平滑*非常缓慢的文本动画，因为`Canvas.drawText`不想在“像素之间”绘制。例如，给定 4 个连续帧，其中我绘制 Y 偏移量为 0、0.5、1、1.5 的文本，画布实际上将分别在偏移量 0、0、1、1 处绘制它，这导致动画为“生涩”。有一个名为`Paint.SUBPIXEL_TEXT_FLAG`应该保持浮点精度的标志。

我找到了一个相关线程，其中 Romain Guy 说 Android 目前不支持此标志：Android[中某些 Paint 常量的含义](https://stackoverflow.com/questions/4740565/meaning-of-some-paint-constants-in-android)。

我的问题是：**是否有任何现有的解决方法？**

*注意：在另一个位图中绘制一次文本，然后用浮点偏移量绘制这个位图而不是绘制文本似乎也不起作用。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:28:26.517

You could simulate this effect by drawing two texts side-by-side with alpha balancing (between 127 and 255) between the two elements.

Let's assume your text is moving from up to bottom, and the current vertical position is 10.28\. You just have to draw one text at position 10 with an alpha near of 127 and the other text at position 11 with an alpha near of 255.

Here is a little (ugly :D) example :

```
private void doDraw(Canvas canvas) {
    Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
    paint.setColor(Color.BLACK);
    paint.setTextSize(20);
    canvas.drawRect(0, 0, getWidth(), getHeight(), paint);

    mY += 0.05f;
    paint.setColor(Color.RED);

    if (Math.floor(mY) == mY) {
        canvas.drawText("test", mX, mY, paint);
    } else {
        float mY1 = (float) Math.floor(mY);
        float mY2 = mY1 + 1;
        float delta = mY - mY1;

        paint.setAlpha((int) ((1 - delta) * 127) + 127);
        canvas.drawText("test", mX, mY1, paint);

        paint.setAlpha((int) ((delta) * 127) + 127);
        canvas.drawText("test", mX, mY2, paint);
    }
} 
```

# c# - 如何枚举地铁中的导航堆栈

> ID：12420682
> 
> 赞同：0
> 
> 时间：2012-09-14T08:25:19.397
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我正在尝试在我的 Metro 应用程序（XAML/C# 方法）中构建面包屑菜单，为了做到这一点，我需要通过导航堆栈进行枚举。不幸的是，我不知道该怎么做。有谁可以举一些例子，我怎么能看到导航堆栈上有哪些页面？

我发现的是一个方法 Frame.GetNavigationState() 但这只是一个序列化状态，我不想用它来挖掘，而是使用强类型的东西。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:08:16.967

您可以通过在某处维护自己的导航堆栈来完成此任务（在每个页面上覆盖 OnNavigatedTo 和 OnNavigatedFrom，并为您编写自己的导航状态集合）。

# asana - 如何正确处理302状态码

> ID：12420686
> 
> 赞同：0
> 
> 时间：2012-09-14T08:25:36.083
> 
> 标签：asana

我不确定在对 API 请求的响应中应该如何处理 302 的 HTTP_STATUS？

我正在尝试编写一个小的 Node.js 脚本，我感觉这与我发送的请求的 HTTPS 升级有关？

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:30:15.927

这与 HTTPS 无关（特别是），它只是一个临时重定向。

在维基百科上阅读[这篇文章](http://en.wikipedia.org/wiki/HTTP_302)。

# android - Android java.lang.IllegalStateException 数据库已经关闭

> ID：12420688
> 
> 赞同：1
> 
> 时间：2012-09-14T08:25:48.390
> 
> 标签：android, database, sqlite, exception

我有一个非常奇怪的问题，我无法在模拟器或任何经过测试的 android 设备上重现。

我有一个 SQlite 数据库控制器，它包含我的所有数据访问功能，在这个类中，我有一个简单的函数来检查表是否存在：

```
public boolean tableExists(String tableName) {   
  if(db==null || !db.isOpen()) db =  dbhelper.getWritableDatabase();      
  Cursor cursor = db.rawQuery("SELECT name FROM sqlite_master WHERE type='table' AND name='"+tableName+"'", null);
       if(cursor!=null) {
           if(cursor.getCount()>0) {
              cursor.close();
              return true;
             }
            cursor.close();
          }
      return false;  
    } 
```

在我的应用程序启动时，我创建了一个异步任务来检查更新，并且在这个过程中，我将检查数据库中是否存在本地表。

抛出的错误在 Cursor cursor = db.rawQuery(... 行，错误是：

**java.lang.IllegalStateException: 数据库 ... db.sqlite 已经关闭**

```
java.lang.RuntimeException: An error occured while executing doInBackground()
 at android.os.AsyncTask$3.done(AsyncTask.java:200)
 at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
 at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
 at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
 at java.util.concurrent.FutureTask.run(FutureTask.java:138)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
 at java.lang.Thread.run(Thread.java:1019)
Caused by: java.lang.IllegalStateException: database /data/data/com.xxx.xxx.xxx.android/databases/db.sqlite already closed
 at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:59)
 at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
 at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
 at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
 at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1364)
 at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1332)
 at com.xxx.xxx.xxx.utils.SQLiteController.tableExists(SQLiteController.java:1463) 
```

我无法重现此错误，但根据 ACRA，这在不同的设备中发生了多次。

有人可以告诉我这个吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:31:41.350

请把第二个`cursor.close();`放在后面的 else 块中

```
public boolean tableExists(String tableName) {   
  if(db==null || !db.isOpen()) db =  dbhelper.getWritableDatabase();      
  Cursor cursor = db.rawQuery("SELECT name FROM sqlite_master WHERE type='table' AND name='"+tableName+"'", null);
       if(cursor!=null) {
           if(cursor.getCount()>0) {
              cursor.close();
              return true;
             }
          else{
                  cursor.close();
              }  
             }
      return false;  
    } 
```

# java - 在数据模型中使用 javafx 属性和绑定

> ID：12420692
> 
> 赞同：8
> 
> 时间：2012-09-14T08:26:31.550
> 
> 标签：java, javabeans, javafx-2

javafx 属性是将数据模型连接到 javafx gui 的好方法，因为它们的绑定模型实现了强大的通知更新机制。

属性和绑定不是严格与 gui 相关的，而是对 javabean 的扩展。

因此，人们希望在应用程序模型类中使用它们而不引入对包的依赖，`javafx.beans.property.StringProperty`并且通常来自`javafx.*`.

**换句话说：（更新）**
我可能需要将应用程序分成两个模块。
一个模块应该只包含操作数据的类（模型类，MVC 语言）。
第二个模块将包含所有图形 gui 的东西，即 javafx。

如果我的数据类使用 javafx 绑定，我会引入一个导入`javafx.beans.anything;`（最好的情况是绑定是 java.* 或 javax.* 的一部分，所以我不会将“gui 库”引用到核心数据库中）。javafx 将包含在标准版本中的事实缓解了这个问题，但这似乎是一个棘手的解决方案。毕竟，我认为我斜视了一个依赖于一些摆动“实用程序”类的 Web 应用程序。

有没有可用的选项？

我正在评估使用侦听器创建常规 javabeans 属性并将它们桥接到 fx 属性所需的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:27:32.380

将 JavaFX 对象绑定到 POJO（普通旧 Java 对象）技术可能会对您有所帮助。

请参阅下一组教程：[http ://ugate.wordpress.com/2012/06/06/javafx-pojo-bindings/](http://ugate.wordpress.com/2012/06/06/javafx-pojo-bindings/)

简而言之，您可以使用下一种方式访问​​ POJO 对象：

```
 Person person = new Person();
    PathProperty prop = new PathProperty(
        person, "address.streetName", String.class);
    Bindings.bindBidirectional(prop, myTextField.textProperty());
    prop.set("123 1st Street"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T09:09:04.307

正如谢尔盖所​​说：jfxtras 库是使用 BeanPathAdapter API 的解决方案： [https ://github.com/JFXtras/jfxtras-labs/blob/2.2/src/main/java/jfxtras/labs/scene/control/BeanPathAdapter.java](https://github.com/JFXtras/jfxtras-labs/blob/2.2/src/main/java/jfxtras/labs/scene/control/BeanPathAdapter.java)

如果您使用 Granite Data Services，还有另一种选择：它有一个类生成器，您可以自定义该生成器以生成 javafx 属性。它是一个漂亮的框架，专注于 javafx 应用程序的服务器端集成。 [http://java.dzone.com/articles/data-management-javafx-and](http://java.dzone.com/articles/data-management-javafx-and)

# c# - 从 BLOB 转换图像后如何调整图像大小？

> ID：12420697
> 
> 赞同：0
> 
> 时间：2012-09-14T08:26:49.643
> 
> 标签：c#, .net, resize, blob, generic-handler

我正在尝试在通用处理程序中调整图像服务器端的大小，然后将其从数据库中的 BLOB 转换回图像...这是我的处理程序代码：

```
<%@ WebHandler Language="C#" Class="Image" %>

using System;
using System.Web;
using System.Data;
using System.Data.SqlClient;
using System.IO;

public class Image : IHttpHandler {

    public void ProcessRequest (HttpContext context) {
        Guid id = new Guid(context.Request.QueryString["Id"]);
        int column = 7;

        if (context.Request.QueryString["img"] == "tbn")
        {
            column = 6;
        }

        context.Response.ContentType = "image/png";
        MemoryStream strm = new MemoryStream(returnImage(id, column));
        byte[] buffer = new byte[4096];
        int byteSeq = strm.Read(buffer, 0, 4096);
        while (byteSeq > 0)
        {
            context.Response.OutputStream.Write(buffer, 0, byteSeq);
            byteSeq = strm.Read(buffer, 0, 4096);
        }
    }

    public Byte[] returnImage(Guid id, int column)
    {
        SqlConnection sqlCn = new SqlConnection("Data Source=localhost;Initial Catalog=database;User ID=user;Password=password");

        string qry = "SELECT * FROM Project WHERE Id=@id";
        SqlCommand cmd = new SqlCommand(qry, sqlCn);
        cmd.Parameters.Add("@id", SqlDbType.UniqueIdentifier).Value = id;
        sqlCn.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        dr.Read();
        Byte[] ar = (Byte[])(dr[column]);
        dr.Close();
        cmd.Dispose();
        sqlCn.Close();
        return ar;
    }

    public bool IsReusable {
        get {
            return false;
        }
    }

} 
```

它应该看起来图像宽度是否高于其高度，反之亦然，并根据该设置设置高度或宽度，并且应按比例设置其他值（高度/宽度），以免被拉伸。

我发现的是： http: [//www.codeproject.com/Articles/25838/A-Simple-Image-Handler](http://www.codeproject.com/Articles/25838/A-Simple-Image-Handler)

但我真的不知道如何使用它......有什么建议吗？感谢您提前提供的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:34:50.177

This might be a little long-winded, but it works for me. Given a memory stream from the blob, plus target width and height dimensions, it will return a new stream with a resized copy of the image.

```
 public static Stream CreateThumbnail(Stream input, Int32 targetWidth, Int32 targetHeight)
    {
        output = new MemoryStream();
            using (Bitmap bitmap = new Bitmap(input))
            {
                ImageFormat format = bitmap.RawFormat;
                Boolean isJpeg = (format.Equals(ImageFormat.Jpeg));
                Boolean isPng = (format.Equals(ImageFormat.Png));
                Int32 width = bitmap.Width;
                Int32 height = bitmap.Height;
                getTargetSizes(out width, out height, bitmap, targetWidth, targetHeight);
                using (Bitmap thumbnailBitmap = new Bitmap(width, height))
                {
                    Graphics G = Graphics.FromImage(thumbnailBitmap);
                    G.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
                    G.DrawImage(bitmap, 0, 0, width, height);
                    thumbnailBitmap.SetResolution(72, 72);
                    if (isJpeg)
                    {
                        var codecParams = new EncoderParameters(1);
                        codecParams.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, 80L);
                        ImageCodecInfo[] arrayICI;
                        ImageCodecInfo jpegICI = null;
                        arrayICI = ImageCodecInfo.GetImageEncoders();
                        for (int i = 0; i < arrayICI.Length; i++)
                        {
                            if (arrayICI[i].FormatDescription.Equals("JPEG"))
                            {
                                jpegICI = arrayICI[i];
                                break;
                            }
                        }
                        thumbnailBitmap.Save(output, jpegICI, codecParams);
                    }
                    else
                    {
                        thumbnailBitmap.Save(output, ImageFormat.Png);
                    }
                }
            }
        return output;
    }

    private static void getTargetSizes(out Int32 targetWidth, out Int32 targetHeight, Bitmap BM, Int32 maxWidth = 150, Int32 maxHeight = 150)
    {
        Int32 startWidth = BM.Width;
        Int32 startHeight = BM.Height;
        targetWidth = startWidth;
        targetHeight = startHeight;
        Boolean resizeByWidth = false;
        Boolean resizeByHeight = false;
        if ((maxWidth > 0) && (maxHeight > 0))
        {
            if ((startWidth > maxWidth) || (startHeight > maxHeight))
            {
                if (startHeight <= startWidth)
                {
                    if(targetWidth > maxWidth) resizeByWidth = true;
                }
                else
                {
                    if(targetHeight > maxHeight) resizeByHeight = true;
                }
            }
        }
        else if (maxWidth > 0)
        {
            // Resize within width only
            if (startWidth > maxWidth)
            {
                if (targetWidth > maxWidth) resizeByWidth = true;
            }
        }
        else if (maxHeight > 0)
        {
            // Resize by height only
            if (startHeight > maxHeight)
            {
                if (targetHeight > maxHeight) resizeByHeight = true;
            }
        }
        if (resizeByWidth)
        {
            targetWidth = maxWidth;
            targetHeight = (Int32)(startHeight * ((Decimal)targetWidth / (Decimal)startWidth));
        }
        if (resizeByHeight)
        {
            targetHeight = maxHeight;
            targetWidth = (Int32)(startWidth * ((Decimal)targetHeight / (Decimal)startHeight));
        }
    }
} 
```

And call it with something like:

```
MemoryStream strm = new MemoryStream(returnImage(id, column));
strm = CreateThumbnail(strm, 100, 100); 
```

# java - 有没有一种读取嵌入式 SQL 资源文件的干净方法？

> ID：12420701
> 
> 赞同：3
> 
> 时间：2012-09-14T08:27:08.703
> 
> 标签：java, sql, resources, openedge

为了避免在类中将 SQL 语句创建为字符串，我将它们作为`.sql`文件放在同一个包中，并将内容读取到静态构造函数中的字符串。其原因是由于 SQL 正在查询的 ERP 系统，SQL 非常复杂。

这种方法没有问题，但由于 SQL 读取机制很简单地读取整个文件，如果该文件中的任何注释位于行尾，则可能导致读取失败，因为首先读取它时会删除多余的空格和删除换行符。`--`完整的注释行（即删除以开头的行）。

我可以增强简单的阅读以读取文件并删除注释行等，但我想知道是否已经有一些东西可以读取 SQL 文件并清理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:00:30.727

我已经看到在我从事的一个项目中解决了同样的问题，方法是将查询存储在 XML 中，并在运行时将 XML 加载到自定义的 StoredQueriesCache 对象中。要获取查询，我们将调用 StoredQueriesCache 对象上的方法并传递查询名称（在 XML 中定义），然后它将返回查询。

写这样的东西相当简单。XML 如下所示...

```
<Query>
  <Name>SomeUniqueQueryName</Name>
  <SQL>
    SELECT someColumn FROM someTable WHERE somePredicate
  </SQL>
</Query> 
```

每个存储的查询都有一个元素。XML 将在应用程序启动时从文件加载到内存中，或者根据您的需要，它可以从文件中延迟加载。然后，保存 XML 的 StoredQueriesCache 对象将具有按名称返回单个查询的方法。以我的经验，查询中的注释从来没有引起任何问题，因为换行符是 XML 节点内部文本的一部分，但是如果您希望检索查询的 StoredQueriesCache 方法可以解析出注释。

我发现这是存储查询的最有组织的方式，无需将它们嵌入代码中，也无需使用存储过程。老实说，应该有一个图书馆可以为您做到这一点；也许我会写一个！

# java - 字符串实用程序 - Java

> ID：12420704
> 
> 赞同：2
> 
> 时间：2012-09-14T08:27:12.820
> 
> 标签：java, string

我创建了一个 StringUtil 类，用于在整个应用程序中进行一些字符串验证。StringUtil 的代码如下，

```
public class StringUtil {
    public static synchronized boolean isValidString(String string) {
        return string!= null && string.trim().length() > 0;
    }

} 
```

在此类中，该方法检查字符串是否为有效字符串。此方法是线程安全的。在企业应用程序中，可能有多个线程访问此方法。如果一个线程正在访问这个方法，那么所有其他线程都必须等待轮到它。反过来，此方法将非常频繁地用于检查字符串中的空值。那么哪个是最好的选择

1.  使其成为单例和线程安全
2.  将此作为实例方法
3.  有没有其他方法可以用这种类型的对象组织一个池，每个线程都会拿起一个并在完成后将对象释放到池中。所以线程安全不是问题，对象创建也没有完成。
4.  是否有任何相同的开源库。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-14T08:28:59.800

由于您在这里没有任何状态（您只使用方法参数`string`），因此该方法本质上是线程安全的。因此没有必要使用`synchronized`关键字。

如果在整个项目中都使用该方法，那么最好`static`按照您已经完成的方式声明它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-14T08:31:36.203

通常像这样的辅助方法是`public static`，而不是`synchronized`，因为类不保持状态。由于它也不保持状态，因此您不需要池。

[我认为 apache commons StringUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)类就是一个很好的例子。

我有一种感觉，您正在尝试使用中子炮打开核桃，简单为王:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T08:30:52.293

您可以尝试 Apache Commons 的 util 类。

但是无论如何你在这里都有线程安全，因为你没有在类中操作其他调用可能读取的任何东西（即你没有状态）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-14T08:32:10.797

您可能应该使用[`StringUtils`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)Apache Commons 中的类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T08:31:59.537

此方法不应同步，因为它不使用任何类级变量。所以多个线程可以毫无问题地同时访问它。

此外，当您为运行到容器中的企业应用程序编写代码时，请忘记同步。关心线程安全是容器的责任。`synchronized`块只是打扰容器完成它的工作。如果您需要在企业应用程序中进行同步，请重新考虑您的设计和/或找到其他模式（有很多）来解决您的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-14T09:03:10.340

不需要`synchronized`关键字，因为 String 是[**不可变对象**](http://en.wikipedia.org/wiki/Immutable_object)

`Immutable objects are often useful because they are inherently thread-safe`

```
public static boolean isValidString(String string) {
    return !(string== null || string.isEmpty()); //Since 1.6
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-14T09:14:53.843

实用程序类通常只包含静态方法，因此明确声明这些类*不是为实例化而设计的*总是一个好主意。因此将它们的构造函数设为私有：

```
public class StringUtils {

  private StringUtils() {
    throw new AssertionError("shouldn't be instantiated");
  }

} 
```

（请参阅**Joshua Bloch**的[圣经](https://rads.stackoverflow.com/amzn/click/com/0321356683)：第 4 项：使用私有构造函数强制执行不可实例化）

# c# - Umbraco：Node、DynamicNode、Content 之间的区别

> ID：12420707
> 
> 赞同：7
> 
> 时间：2012-09-14T08:27:19.373
> 
> 标签：c#, performance, umbraco

然后有许多代表 Umbraco 文档的类：

```
1) umbraco.cms.businesslogic.Content
2) umbraco.cms.businesslogic.web.Document
3) umbraco.MacroEngines.DynamicNode
4) umbraco.presentation.nodeFactory.Node 
```

还有其他人吗？

您能解释一下它们的作用以及何时使用它们吗？

*umbraco.MacroEngines.DynamicNode*和*umbraco.presentation.nodeFactory.Node*看起来一样。也许使用 Node 类会更好，因为它更快？

我有一个理论：

**umbraco.cms.businesslogic.Content**和**umbraco.cms.businesslogic.web.Document**是**cmsContent**和**cmsDocument** DB 表的表示形式。

**umbraco.presentation.nodeFactory.Node**和**umbraco.MacroEngines.DynamicNode**表示缓存在 XML 文件中的节点，以便在网站中使用。第一个是简单的 Node，第二个是添加了动态属性的同一个 Node，一个用于在 nodeType 中定义的属性。所以，我认为**Node**比**DynamicNode快**

有没有人可以证实这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T21:25:29.770

基于个人使用：

1.  内容：永远不要直接使用它，而是使用 Document|Media|Member api（继承自此类）。
2.  文档：用于创建|更新|删除操作。它直接对数据库执行所有操作，因此仅当您需要直接从数据库中读取值时，才应将其用于读取。
3.  节点：使用最多：当通过用户控件、代码库、xslt 扩展等读取|显示数据时。
4.  DynamicNode：剃刀宏。我还没有足够使用这个来提供更多信息。

有关详细信息，请参见下文，但不，Node 和 DynamicNode 不同（DynamicNode 使用 Examine 并且如果需要也将回退到从数据库读取）。

> **umbraco.cms.businesslogic.Content：** 内容是 CMSNode 和将使用通用数据的类之间的中间层。Content 是一种数据结构，它保存在其对应的 ContentType 中定义的通用数据。在某种意义上，内容可以比作数据库表中的一行，它的 ContentType 包含列的定义，而 Content 包含数据。请注意，umbraco 中的内容数据*不是*表格，而是树结构。

不过我从来没有需要直接使用这个类，因为它的所有操作都由相应的子类处理，例如：Document、Media、Member。此类依次继承自 CMSNode，CMSNode 是 umbraco 中每条内容数据的基类

> **umbraco.cms.businesslogic.web.Document**：Document 代表一个网页，已发布的 Documents 在缓存的 xml 文档中暴露给运行时/公共网站。

从“内容部分”引用节点时使用此类。它处理 CRUD 操作。通过这个类，您还可以获得对每个属性的 DataType 的引用，以防您希望在 aspx 页面中呈现这些控件。

> **umbraco.NodeFactory.Node**：它实现了 INode 接口，该接口公开了只读方法。它的所有信息都来自 umbraco 缓存的 xml。您将无法访问每个属性的控件，而是每个根据数据类型格式化的值。

您只能将此类用于读取操作。由于所有内容都来自缓存（仅限已发布节点），因此它可以非常快速地显示数据。

> **umbraco.MacroEngines.DynamicNode**：它被实现为与剃刀宏一起使用。它在后台使用 NodeFactory，这意味着它还可以访问缓存的 xml。尽管如果您使用相关的 DynamicMedia 时要小心，因为它使用：1：ExamineIndex 去除任何 html 标签，2：它回退到 umbraco_v4.11.5 中的默认媒体类型（如果它不在运行时缓存中，则为 db）。

与上述相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T08:45:54.600

我只知道 Document 和 Node 之间的区别。Node 类使用存储在 umbraco 缓存中的数据，Document 类将直接从数据库中获取数据。Node 比 Document 快。Node 只返回保存和发布的内容。

95% 的时间你应该使用 Node。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:49:57.877

Content 允许您从 DB 中检索/编辑任何内容（页面/媒体/..）（包括未发布的内容），Document 允许您仅从 DB 中检索/编辑页面内容（包括未发布的内容），使用 Node用于从 XML 缓存快速只读访问（仅发布）页面内容，动态节点与 Node 相当，但在 Umbraco 的更高版本中实现，用于使用 Razor 的宏

# php - 使用 PHP 备份 MySQL 数据

> ID：12420709
> 
> 赞同：2
> 
> 时间：2012-09-14T08:27:20.207
> 
> 标签：php, mysql

我在这里遇到了一个问题，真的需要你们的帮助。我正在尝试使用 PHP 脚本导出 mysql 数据。但问题是“致命错误：允许的内存大小为 67108864 字节已用尽......”下面的错误。我看过一些帖子，他们建议更改 php.ini 文件。但是由于我托管在专用服务器上，因此我没有该访问权限。我试图导出的表有更多的 2.2GB 数据。我在这里发布我用来导出这些数据的功能。你们能帮我解决这个问题吗？

```
<?php
set_time_limit(0);
backup_tables('hostname','username','password','databasename');

function backup_tables($host,$user,$pass,$name,$table = 'Table Name')
{

$link = mysql_connect($host,$user,$pass);
mysql_select_db($name,$link);

$result = mysql_query('SELECT * FROM '.$table);
$num_fields = mysql_num_fields($result);

$row2 = mysql_fetch_row(mysql_query('SHOW CREATE TABLE '.$table));
$return.= "\n\n".$row2[1].";\n\n";

for ($i = 0; $i < $num_fields; $i++)
{
while($row = mysql_fetch_row($result))
{
$return.= 'INSERT INTO '.$table.' VALUES(';
for($j=0; $j<$num_fields; $j++)
{
$row[$j] = addslashes($row[$j]);
$row[$j] = ereg_replace("\n","\\n",$row[$j]);
if (isset($row[$j])) { $return.= '"'.$row[$j].'"' ; } else { $return.= '""'; }
if ($j<($num_fields-1)) { $return.= ','; }
}
$return.= ");\n";
}
}
$return.="\n\n\n";
//save file
$handle = fopen('db-backup-'.time().'-'.($tables).'.sql','w+');
fwrite($handle,$return);
fclose($handle);
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T08:32:07.133

我认为您正在尝试在这里重新制作轮子。Mysql 有一个很棒的[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)可执行文件，它可以快速、安静地使用少量资源生成您正在制作的文件。[最好的事情是，您实际上可以使用exec](http://www.php.net/manual/en/function.exec.php)直接从 php 脚本中调用它，如下所示：

```
exec('mysqldump --user=... --password=... --host=... DB_NAME > /path/to/output/file.sql'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:50:27.073

> 我要导出的表有更多的 2.2GB 数据

而您正试图将其全部加载到 PHP 数组中。

即使你有足够的内存，性能也会令人震惊。

在读取时写入从数据库中获取的行...

```
while ($row = mysql_fetch_row($result)) {
   fputs($outfile, 'INSERT INTO '.$table.' VALUES(');
   ....
} 
```

但更好的解决方案是使用 mysqldump。

**更新**

我忘了说你转义输出的方法是错误的 - 使用 mysql_escape_string() 而不是 addlashes + ereg_replace() （如果你必须使用字符串 relpacement 函数，str_replace 比 [ep]reg_replace 快得多）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T22:44:30.130

嗯..我想最好的方法是使用 sql 查询[“SELECT * INTO OUTFILE ...”](https://dev.mysql.com/doc/refman/5.0/en/select-into.html)，因为 php.ini 安全模式可以禁止 php 函数“exec”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T08:35:51.987

Instead of collecting everything into (a huge) `$return`, move the `fopen` call to the start of the function and write every piece of result directly using `fwrite` instead of adding it to `$return`. The memory problem you're encountering is because `$return` takes up so much space.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T08:29:36.230

尝试使用压缩备份 sql 语句`Zip->addFromString`

[http://php.net/manual/fr/book.zip.php](http://php.net/manual/fr/book.zip.php)

[http://php.net/manual/fr/zip.examples.php](http://php.net/manual/fr/zip.examples.php)

```
<?php

$zip = new ZipArchive();
$filename = "./backup.zip";

if ($zip->open($filename, ZIPARCHIVE::CREATE)!==TRUE) {
    exit("Could not open <$filename>\n");
}
$zip->addFromString("backup.txt", "sql statement");
$zip->close();
?> 
```

尝试将您的备份分成几个 zip 文件（例如：一个表按 zip）

# android - 仅外曲线上的阴影

> ID：12420716
> 
> 赞同：3
> 
> 时间：2012-09-14T08:27:53.950
> 
> 标签：android, android-canvas

我的目标是创建类似于饼图的东西，但我无法完全正确地绘制阴影。我希望阴影位于每个段的外侧曲线上，而不是通往中心的线。除了编写类似于的自定义函数之外，还有其他方法可以实现`paint.setShadowLayer()`吗？
这是我到目前为止所拥有的：

```
 float mStart = 0;
        RectF mOvals = new RectF(mWidth / 15 + mGraphParams.leftMargin, mHeight / 15 + mGraphParams.topMargin,
                mWidth - mWidth / 15 - mGraphParams.rightMargin, mHeight - mHeight / 15 - mGraphParams.bottomMargin);
        float max = 0;
        for (int i = 0; i < data.size(); i++) {
            max = max + data.get(i);
        }

        for (int i = 0; i < data.size(); i++) {
            if (shadow) {
                paint.setShadowLayer(shadowRadius, shadowDx, shadowDy, this.pieColors.get(i));
            }
            float mSweep = (float) 360 * ((float) data.get(i) / max);
            paint.setStyle(Style.FILL_AND_STROKE);
            paint.setColor(this.pieColors.get(i));
            canvas.drawArc(mOvals, mStart, mSweep, true, paint);

            mStart = mStart + mSweep; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:26:54.700

这是不可行的。

你必须覆盖`setShadowLayer()`.

对不起

# qt - 静态链接后资源中的qt png损坏

> ID：12420724
> 
> 赞同：3
> 
> 时间：2012-09-14T08:28:37.070
> 
> 标签：qt, qt4

我们正在 linux 上开发一个相当大的基于 Qt 的项目，并且我们达到了最终的 RC1 阶段。

现在，我们遇到了一些非常奇怪的事情：为了投入生产，我们在静态链接库列表中添加了另一个 .a 库。

该库已链接并且应用程序运行，但资源文件中的每个 .png 都已损坏，这是启动时的输出：

libpng 错误：IHDR：CRC 错误

似乎 libpng 无法处理那些无效的 png（当然）。文件在那里并且大小正确，在静态链接最终库后它们只是变成空白。该库本身不在任何地方使用，它只是被链接。

有没有人遇到过这样的情况？有已知的解决方法吗？我们在 QtCreator 2.3.0 上使用 Qt 4.7.4 x64，我们暂时不想升级，但这是我们目前唯一想到的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T10:30:21.203

它可能适合符号的问题。静态库和 libpng 可能同时链接到其他库，并且在编译/加载时链接或解析时发生了一些奇怪的事情。

您可以使用*objdump*命令检查符号（objdump -tT /usr/bin）

您是否尝试在编译/链接时修改库顺序？我的意思是，例如，

```
gcc -lmylibrary -lQt -lOtherLOLibrary 
```

代替

```
gcc -lOtherLOLibrary -lQt -lmylibrary 
```

而且我想我遗漏了一些东西，为什么要链接到未使用的库？

# jsp - 解析 XML 以创建动态页面

> ID：12420729
> 
> 赞同：0
> 
> 时间：2012-09-14T08:28:55.403
> 
> 标签：jsp, xml-parsing

我只是在看看这是否可行，如果可能的话，也许会得到一个小代码示例。是否可以制作一个解析存储在服务器上的 XML 文件的 JSP 页面。

XML 将包含页面上显示的元素，因此更改 XML 可以改变 JSP 页面的外观/布局。

我不确定我将如何格式化 XML 并将其调用到 JSP 中，如果有人知道资源或者是否有可能，这将有很大帮助（我不希望有人为我做某事；） )

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:15:48.643

是的，有可能，但是为什么不使用 XSLT？如果您的主要目标是转换，那么 XSLT 将在没有 JSP 的情况下为您完成这项工作。如果不是，那么您的实现是特定于 Java Server Pages 域的，当您决定更改服务器时，比如说 PHP，那么您将不得不重新编程整个事情。

如果您想要一个关于如何使用 java 转换 XML 数据的简单示例，请查看存储在“data.xml”中的以下 xml

```
<?xml version='1.0'?>
<data>
   <row><cell>1</cell><cell>2</cell><cell>3</cell></row>
   <row><cell>4</cell><cell>5</cell><cell>6</cell></row>
   <row><cell>7</cell><cell>8</cell><cell>9</cell></row>
</data> 
```

您可以使用 XDom、JDom 或您拥有的其他工具来读取此文件。我将使用 java 中包含的基本 DOM，它不太友好并且缺少迭代器，确实不推荐用于大型 XML 文件。

```
DocumentBuilder db = DocumentBuilderFactory.newInstance().newDocumentBuilder();
Document d = db.parse(new File("./data.xml"));
out.println("<table border='1'>");
for(int i=0;i<d.getDocumentElement().getChildNodes().getLength();i++){
    Node row = d.getDocumentElement().getChildNodes().item(i);
    if(!row.getNodeName().equals("row")) continue;
    out.print("\t<tr>");
    for(int j=0;j<row.getChildNodes().getLength();j++){
        Node cell = row.getChildNodes().item(j);
        if(!cell.getNodeName().equals("cell")) continue;    
        out.print("<td>");
        out.print(cell.getTextContent());
        out.print("</td>");
    }
    out.println("</tr>");
}
out.println("</table>"); 
```

html输出将是：

```
<table border='1'>
    <tr><td>1</td><td>2</td><td>3</td></tr>
    <tr><td>4</td><td>5</td><td>6</td></tr>
    <tr><td>7</td><td>8</td><td>9</td></tr>
</table> 
```

# c# - 如何使下拉菜单仅启用一个值

> ID：12420736
> 
> 赞同：2
> 
> 时间：2012-09-14T08:29:23.883
> 
> 标签：c#, asp.net

我有一个从数据库和四个标签中检索 ID 的下拉菜单。从用户 id 开始，标签将显示属于该 ID 的数据。在我的情况下，ID 只有 1 个值，它使自动回发不刷新页面。有什么方法可以让标签显示数据？

```
 <asp:DropDownList ID="DropDownList5" runat="server" 
                DataSourceID="SqlDataSource3" DataTextField="Id" DataValueField="Id" 
                Height="16px" Width="145px" AutoPostBack="True" 
                onselectedindexchanged="DropDownList5_SelectedIndexChanged">
            </asp:DropDownList>
            <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
                ConnectionString="<%$ ConnectionStrings:Connection %>" 
                SelectCommand="SELECT [Id] FROM [Rsvp] WHERE (([Model] = @Model) AND ([Username] = @Username))">
                <SelectParameters>
                    <asp:ControlParameter ControlID="DropDownList2" Name="Model" 
                        PropertyName="SelectedValue" Type="String" />
                    <asp:ControlParameter ControlID="DropDownList3" Name="Username" 
                        PropertyName="SelectedValue" Type="String" />
                </SelectParameters>
            </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:32:29.660

在顶部的 0 处插入一个新项目：

```
DropDownList5.Items.Insert(0,new ListItem("Select an option","-")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:41:12.373

将`AppendDataBoundItems`属性设置`true`为下拉列表，数据源中的项目将出现在您在标记中添加的任何 ListItems 之后，例如

```
<asp:DropDownList ID="DropDownList5" runat="server" 
            DataSourceID="SqlDataSource3" DataTextField="Id" DataValueField="Id" 
            Height="16px" Width="145px" AutoPostBack="True" OnSelectedIndexChanged="DropDownList5_SelectedIndexChanged" AppendDataBoundItems="true">
            <asp:ListItem Value="-" Text="Select an option" Selected="True"/>
</asp:DropDownList> 
```

# javascript - 提高我的 JQuery 的性能

> ID：12420739
> 
> 赞同：0
> 
> 时间：2012-09-14T08:29:31.573
> 
> 标签：javascript, jquery

我对 JavaScript 和 JQuery 世界还很陌生，所以我的代码结构仍然存在。我知道有一些编写方法可以减少对性能的压力，从而使您的程序运行得更快。

我已经研究了实现这一目标的各种方法，但看不到如何将其应用于我所拥有的东西。我正在寻找堆栈溢出来帮助向我展示一些关于使我的代码在结构上更合理的建议。

```
 console.log(wordIsCorrect);
            console.log($('.drop-box.spellword').length);
            if ($('.drop-box.spellword').length == wordIsCorrect) {

                $('.drop-box.spellword').addClass('wordglow2');
                $(right).val('Well Done!');
                $(right).show();
                audioS.play();
                $('.counter').html(completeWords + '/6').show();
                $(wrong).hide();
                $('.minibutton').prop('disabled', false);
                var completeLetters = $('.wordglow2').length;
                var completeWords = (completeLetters / 3);
                $('.counter').html(completeWords + '/6');

                if (completeWords == 3) {
                    $('table').fadeOut(2000);
                }

                var incompleteWords = $('.spellword').hasClass('.wordglow4').length;
                if (incompleteWords == 3) {
                    $('.minibutton').prop('disabled', false);
                }

            } else {

                $('.drop-box.spellword').addClass("wordglow4").css('color', 'transparent');
                $(wrong).val('Try Again');
                $('.minibutton').prop('disabled');
                $(wrong).show();
                audioF.play();
                $('.counter').html(completeWords + '/6').show();
                $(right).hide();
                $('.drop-box.spellword').animate({
                    'opacity': 1
                }, 1000, function() {
                    $(this).removeClass('wordglow4').removeClass('occupied').html('')
                });

            } 
```

这是我的代码中的 if 语句之一。我知道我应该单独分解每项任务，但我不知道从哪里开始。

有人可以指出我正确的方向，以便我可以开始处理我的其余代码。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T08:35:09.737

1）使用链接，它会减少DOM请求的数量：

```
 $(right).val('Well Done!')
            .show(); 
```

2）如果您多次使用它们并缓存变量：

```
 $dropbox = $('.drop-box.spellword');
    $dropbox.css(bla bla bla...); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T08:37:12.507

您应该查看的一件事是链接您的 jQuery 调用。

例如：

```
$('#myinput').val("foo");
$('#myinput').show(); 
```

可以写成

```
$('#myinput').val("foo").show(); 
```

因为每次调用 jquery 函数（通常）都返回相同的对象。情况并非总是如此。在使用像 height() 或 find(..) 这样的函数之后，显然该对象将不再是您开始使用的同一个 jQuery 对象，因此您需要确保您的函数顺序。

这可能会稍微提高速度，因为 jQuery 不必每次都重新创建该对象。您还可以“缓存” jquery 对象以达到相同的效果，如下所示：

```
var myinput = $('#myinput');

myinput.val("foo");
// ... later
myinput.show(); 
```

这节省了多个 jQuery 调用。

这些优化非常小，但它们会迅速增加，因为 javascript 事件可以一直被触发。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T08:42:25.467

除了链接之外，使用`context`还可以提高（选择器）性能。这将告诉选择器在哪里寻找给定的元素（而不是总是从 DOM 根开始）。假设您有一个特定的 DIV“目标”要定位，它位于另一个 DIV“容器”内，您可以这样做：

```
$('#target', '#container').dostuff(); 
```

或者

```
$('#myButton').click(function(){
    $('span', this).addClass('bar');
}); 
```

（`this`上下文在哪里）

在此处查看有关上下文的更多信息：[带上下文的 jQuery 选择器的性能](https://stackoverflow.com/questions/2421782/performance-of-jquery-selector-with-context)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T08:45:48.083

正如已经被告知的那样，我只是在添加提示...

有时在处理嵌套元素及其父元素时，使用“end()”方法：我不会复制/完成 jQuery 文档，因为它有很好的文档，请参阅 [jQuery 的 end() 函数文档](http://api.jquery.com/end/)

将此添加到您的书签中：

```
http://api.jquery.com/
http://www.artzstudio.com/2009/04/jquery-performance-rules/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T08:44:57.023

像这样的东西

```
var spellword = $('#spellword'); // give it an ID and cache the object 
console.log(wordIsCorrect);
console.log(spellword.length);
if (spellword.length == wordIsCorrect) {

    spellword.addClass('wordglow2');
    $(right).val('Well Done!').show();
    audioS.play();
    // $('.counter').html(completeWords + '/6').show(); // will be done later again
    $(wrong).hide();
    $('.minibutton').prop('disabled', false);
    var completeLetters = $('.wordglow2').length;
    var completeWords = (completeLetters / 3);

    if (completeWords == 3) {
        $('#table1').fadeOut(2000); // give it an ID
    }

    var incompleteWords = spellword.hasClass('.wordglow4').length>0;
    if (incompleteWords == 3) {
        $('#minibutton').prop('disabled', false); // give an ID
    }
} else {

    spellword.addClass("wordglow4").css('color', 'transparent');
    $('#minibutton').prop('disabled',true); // give an ID and a value 
    $(wrong).val('Try Again').show();
    audioF.play();
    $(right).hide();
    spellword.animate({
        'opacity': 1
    }, 1000, function() {
        $(this).removeClass('wordglow4').removeClass('occupied').empty()
    });

}

$('#counter').html(completeWords + '/6').show(); // give it an ID instead of a class 
```

# ruby-on-rails-3 - 所有 JSON 响应的串联错误消息

> ID：12420741
> 
> 赞同：0
> 
> 时间：2012-09-14T08:29:41.420
> 
> 标签：ruby-on-rails-3, json, api

我有一个具有 HTML 和 JSON 端点的 Rails 应用程序，并且 iOS 应用程序正在使用 JSON。iOS 开发人员希望将所有错误消息输出从类似`{"errors":{"email":["has already been taken"],"password":["is too short (minimum is 6 characters)"]}}`的形式更改为 form `{ "error" : "message"}`，但似乎没有一个好地方来进行单个修复/格式化。

### 我的感觉是这里有3个不同的步骤：

1.  仅修改 JSON 响应的错误响应
2.  调用`.full_messages`所有错误
3.  标准化键，因此`errors`或其他变体变得简单`error`

### 我的问题：

1.  是否有地方`full_messages`为所有 JSON 消息设置错误格式，还是需要将其拼接到所有错误调用中？
2.  是否有地方为所有错误标准化密钥？
    *   我想我可以重新打开`as_json`，`ActiveRecord::Base`但可能还有其他错误不是来自 AR...

### 潜在项目

这些是迄今为止已经提到的潜在解决方案。

1.  演讲者
    *   这对于聚合来自多个模型的信息似乎很有用，但仍然需要在每个方法中调用新的类。
    *   我希望有一个更高级别的解决方案，它可以捕获输出并在传递它之前重新格式化它，而无需在整个应用程序中手动插入它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T16:34:18.970

可能迟到的答案，但如果它有助于增加更多的视角。

我使用 RABL 作为 json 表示层，并尝试使用它来将 json 错误输出到 ios。

RABL 中的示例代码：

`object @submission` 

`child :errors do |e|
  e.full_messages.each do |message|
   node(:message){message}
  end
 end` 

现在，记录 NSError *error 对象按预期在 UserInfo 字典中给出以下内容： UserInfo=0xa166bc0 {NSLocalizedRecoverySuggestion={"submission":{"fixnums":[{"photo_file_size":{"message":"Photo file size must be in介于 0 字节和 153600 字节之间"}}]}}

可以注意到 UserInfo 字典的值不返回 ios 字典友好格式。'=' 是 ':'，数组有 '[' 而不是 '(' 和 ')'

建议的解决方案是向 NSString 添加一个类别，以用 NSDictionary 友好的文本格式替换返回对象中的所有这些非字典元素，然后转换为 ios NSDictionary 并使用标准对象访问方法？我想知道这是正确的方法还是有更好、更优雅的方法？谢谢你。

# c# - 从 .NET 中的 c# 服务返回命名的 JSON 对象

> ID：12420751
> 
> 赞同：0
> 
> 时间：2012-09-14T08:30:41.917
> 
> 标签：c#, .net, json, wcf, service

我在 .net 中有一个 wcf 服务，我想返回一个命名的 JSON 对象。这就是我想要返回 JSON 对象的方式：

```
{"file":"\/9j\/4AAQSkZJRgABAQEASABIAAD\/4"} 
```

但这是从 c# 中的服务返回的方式

```
"\"\/9j\/4AAQSkZJRgABAQEASABIAAD\/4 
```

这是我用来返回它的代码

```
[WebInvoke(Method = "GET",
                ResponseFormat = WebMessageFormat.Json,
                UriTemplate = "getFile/{fname}")]
    public string GetFile(string name)
    {
        /*
         * Some code (not important)
         */

        return JsonConvert.SerializeObject(System.Convert.ToBase64String(image));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:33:43.023

使用该字符串作为属性创建一个对象。这应该有效：

```
return JsonConvert.SerializeObject(
  new { file = System.Convert.ToBase64String(image) }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:34:33.720

您必须创建一个新对象。

```
var file = JsonConvert.SerializeObject(System.Convert.ToBase64String(image));
return Json(new {file},JsonRequstBehavior.AllowGet); 
```

# oracle - Oracle sql查询一年中最近的日期

> ID：12420759
> 
> 赞同：1
> 
> 时间：2012-09-14T08:31:19.997
> 
> 标签：oracle, date

我正在寻找一种更简单的解决方案来查找给定年份值的最近日期（相对于 sysdate）。示例（格式为“dd/mm/yyyy”）

```
sysdate = "01/01/2012" input = 365     result = "31/12/2011"  
sysdate = "01/01/2012" input = 366     result = "31/12/2012"
sysdate = "01/01/2012" input =   1     result = "01/01/2012"
sysdate = "31/12/2012" input =   1     result = "01/01/2013" 
```

基本上，结果日期可以是今年、上一年或明年。最初我写了一个小程序，如下所示。在这里，我使用参考日期而不是 sysdate 来测试结果。这适用于输入日期不是 366 的情况。但是当它是 366 时，这将失败，并且可能需要进一步来回移动以找到最近的有效日期。添加闰年检查（所有条件 4,100,400 等）后，代码变得一团糟。

如果您能提出一个更简单、更好且万无一失的解决方案（函数或单个查询），我将不胜感激。请不要使用过于特定于 Oracle 的复杂结构，因为我也必须将其移植到 DB2。此外，效率是最不重要的，因为它不会被大量执行。

```
CREATE OR REPLACE PROCEDURE test(ref_date_str varchar2, doy number) IS  
    ref_date         date ;  
    nearest_date     date ;  
BEGIN  
    ref_date := to_date(ref_date_str, 'dd/mm/yyyy') ;  

    WITH choices AS  
    (  
        SELECT trunc(ref_date, 'yyyy') + doy - 1 AS choice_date FROM dual  
        UNION  
        SELECT trunc(trunc(ref_date, 'yyyy') - 1, 'yyyy') + doy - 1 AS choice_date FROM dual  
        UNION  
        SELECT add_months(trunc(ref_date, 'yyyy'), 12) + doy - 1 AS choice_date FROM dual  
    )  
    SELECT choice_date INTO nearest_date FROM choices WHERE abs(ref_date - choice_date) =  
        (SELECT min(abs(ref_date - choice_date)) FROM choices) AND rownum < 2 ;  

    dbms_output.put_line(to_char(nearest_date, 'dd/mm/yyyy')) ;  
END ;  
/ 
```

从逻辑上讲，我正在考虑的算法是

```
for each year backwards from current year
  if a valid date found for the doy, and it is <= sysdate
     first_date = this valid date
     exit loop

for each year forward from current year
  if a valid date found for the doy, and it is > sysdate
     second_date = this valid date
     exit loop

chosen_date = closest_to_sysdate_among(first_date, second_date) 
```

编辑1：下面给出的是我上面给出的算法的实现（代码中有一些冗余）。我仍然期待解决方案的替代方案或改进。

```
CREATE OR REPLACE FUNCTION GetNearestDate(reference_date DATE, day_of_year NUMBER) RETURN DATE IS  
    valid_date_1    DATE ;  
    valid_date_2    DATE ;  
    iter_date       DATE ;  
BEGIN  
    iter_date := trunc(reference_date, 'yyyy') ;  

    WHILE TRUE  
    LOOP  
        valid_date_1 := iter_date + day_of_year - 1 ;  

        IF valid_date_1 < add_months(iter_date, 12) AND valid_date_1 <= reference_date THEN  
            EXIT ;  
        END IF ;  

        iter_date := trunc(iter_date - 1, 'yyyy') ;  
    END LOOP ;  

    iter_date := trunc(reference_date, 'yyyy') ;  

    WHILE TRUE  
    LOOP  
        valid_date_2 := iter_date + day_of_year - 1 ;  

        IF valid_date_2 < add_months(iter_date, 12) AND valid_date_2 > reference_date THEN  
            EXIT ;  
        END IF ;  

        iter_date := add_months(iter_date, 12) ;  
    END LOOP ;  

    IF abs(valid_date_1 - reference_date) <= abs(valid_date_2 - reference_date) THEN  
        RETURN valid_date_1 ;  
    END IF ;  

    RETURN valid_date_2 ;  
END ;  
/ 
```

编辑 2：检查“valid_date_？此外，与参考日期相关的比较是为了防止出现类似 (reference = "30/01/2012", input = 365) 这样的情况。这里的 valid_date_1 应该是“31/12/2011”而不是“30/12/2012”，因为第一个是最接近参考的日期，一年中的日期值为 365。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:13:30.243

因此，如果效率不是问题，我会使用带有日期的预计算表，类似于以下内容：

```
with dates as
(SELECT to_date('01-01-1980', 'DD-MM-YYYY') + rownum day,
     to_number(to_char(to_date('01-01-1980', 'DD-MM-YYYY') + rownum,
                       'DDD')) day_of_year
  FROM ALL_OBJECTS
 WHERE ROWNUM <= 100 * 365)
 select t.*
 from (select dates.*,
           abs(to_date('01-01-2012', 'DD-MM-YYYY') - dates.day) diff
      from dates
     where dates.day_of_year = 1
     order by 3) t
 where rownum <= 1 
```

因此，我们拥有 1980 年之后约 100 年的所有日期，并且对于每个日期，我们都会记录那一年的哪一天。之后，我们计算到所有日期的距离，例如一年中的第一个日期，将它们按升序排序，最终结果将是第一行。

内部查询对ORACLE有点特殊，但我相信在DB2中也应该有生成（连续）行的原则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:02:36.690

以下是我计划暂时使用的解决方案。我必须避免 WITH 子句才能使其与 DB2 一起使用。彼得森的解决方案有助于朝这个方向思考。

```
CREATE OR REPLACE FUNCTION GetNearestDate(reference_date DATE, day_of_year NUMBER) RETURN DATE IS  
    nearest_date DATE ;  
BEGIN  
    SELECT valid_date INTO nearest_date  
    FROM  
    (  
        SELECT first_date + day_of_year - 1 AS valid_date  
        FROM  
        (  
            SELECT add_months(trunc(reference_date, 'YYYY'), (rownum-10) * 12) AS first_date  
            FROM all_objects  
            WHERE rownum <= 20  
        )  
        WHERE to_char(first_date, 'YYYY') = to_char(first_date + day_of_year - 1, 'YYYY')  
        ORDER BY abs(first_date + day_of_year - 1 - reference_date), first_date  
    )  
    WHERE rownum < 2 ;  

    RETURN nearest_date ;  

EXCEPTION WHEN OTHERS THEN  
    RETURN nvl(reference_date, sysdate) ;  
END ;  
/ 
```

# java - 我不明白为什么用数组覆盖文件的内容会导致一个空文件

> ID：12420765
> 
> 赞同：0
> 
> 时间：2012-09-14T08:31:48.573
> 
> 标签：java, arrays, for-loop, io, printwriter

所以我修复了覆盖问题，但现在的问题是它吃掉了文本文件的最后一行。或者我想它只是没有将它写回文件。有任何想法吗？第一种方法应将密码更改为随机密码，第二种方法仅用于计算文本文件中的行数。

```
/**
 *  Method for resetting a password
 * Replaces current password with randomly generated one.
 * 
 *  @param testUserName is the username used for finding the password
 *       to replace
 */
public String resetPassword(String testUserName) throws IOException  {
    int fileLength = countLines();
    FileReader fr = new FileReader("Password.txt");
    BufferedReader br = new BufferedReader(fr);
    String[] storeData = new String[fileLength];
    Random rand = new Random();
    int pwNumber = (int)(rand.nextDouble() * 10000);
    String pwReset = "Password" + pwNumber;

    for (int i=0; i < fileLength; i ++) {
        storeData[i] = br.readLine();
    }
    fr.close();     

    for (int i=0; i < (fileLength-1); i += 4) {
        if (testUserName.equals(storeData[i])) {
            storeData[i+1] = pwReset;
        }   
    }
    PrintWriter reset = new PrintWriter("Password.txt");
    for (int i=0; i < fileLength; i ++) {
        reset.println(storeData[i]);
    }
    reset.close();
    return pwReset;
}

/**
 *  Method for counting number of lines in a file
 *  Used in conjuction with other methods for reading
 * specific lines of files.
 */
public int countLines() throws IOException {
   InputStream is = new BufferedInputStream(new FileInputStream("Password.txt"));
   try {
      byte[] c = new byte[1024];
      int count = 0;
      int readChars = 0;
      boolean empty = true;
      while ((readChars = is.read(c)) != -1) {
         empty = false;
         for (int i = 0; i < readChars; ++i) {
            if (c[i] == '\n')
               ++count;
        }       
      }
      return (count == 0 && !empty) ? 1 : count;
    } finally {
      is.close();
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:35:35.487

I suspect you countLines() method is re-reading the file to determine the number of lines at that moment. This is not only very inefficient, but also the source of your bug.

```
PrintWriter reset = new PrintWriter("Password.txt");
// file is now truncated.
countLine() == 0 
```

I suggest you count the number of lines once. ideally when you read it once.

* * *

You can improve it by

*   reading the file once.
*   not storing the file in memory so it doesn't matter how big it is.
*   if it fails to write the file, the original is untouched.

.

```
public String resetPassword(String testUserName) throws IOException {
    File passwdFile = new File("Password.txt");
    BufferedReader br = new BufferedReader(new FileReader(passwdFile));
    File tmpPasswdFile = new File("Password.txt.tmp");
    PrintWriter reset = new PrintWriter(tmpPasswdFile);
    String pwReset = null;
    try {
        boolean resetNextLine = false;
        for (String line; (line = br.readLine()) != null; ) {
            if (resetNextLine) {
                Random rand = new Random();
                int pwNumber = (int) (rand.nextDouble() * 10000);
                pwReset = "Password" + pwNumber;
                reset.println(pwReset);
            } else {
                reset.println(line);
            }
            resetNextLine = testUserName.equals(line);
        }
    } finally {
        reset.close();
        br.close();
    }
    passwdFile.delete();
    tmpPasswdFile.renameTo(passwdFile);
    return pwReset;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:34:17.280

How does `countLines()` work ?

I'm a bit suspicious of this approach since you're using the result of this to iterate through your array. I would have thought it was perhaps more intuitive (and correct?) to iterate through the array using *its* length.

# git - 用于每个用户包含字符串的提交消息计数的 Git 命令

> ID：12420769
> 
> 赞同：3
> 
> 时间：2012-09-14T08:32:02.437
> 
> 标签：git

我知道 git shortlog -sne 和 git grep，但我需要将两者结合起来。

我正在搜索每个用户在提交消息中出现的字符串的次数。我希望输出是：

```
Will: 54
Dave: 34
... etc. 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T13:36:37.613

如果`git sne`你的意思是`git shortlog -sne`，那么它可以`--grep`选择 grep 提交消息。

```
git shortlog -sne --grep="a string" 
```

# php - PHP Restart Lighttpd 不返回

> ID：12420777
> 
> 赞同：0
> 
> 时间：2012-09-14T08:32:38.657
> 
> 标签：php, bash, init.d

我有一个需要重新启动 lig​​httpd 的 php 脚本。php 页面永远不会返回给客户端。我相信那是因为电话没有返回。这是我的代码：

```
 <?php

 exec("/etc/init.d/lighttpd restart");
 echo "Restarted!";

 ?> 
```

如果我注释掉 exec 行，它会按预期返回。我怎样才能让这个电话返回？

谢谢，

电动汽车

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:35:56.483

如果您重新启动 httpd 进程，您的脚本将被终止，无论您做什么！

您永远不会编写任何脚本直接从 PHP 返回值。为了使这项工作，您应该添加一个 javascript 并检查`200`状态代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:35:59.667

这是因为您的脚本在能够返回执行结果之前杀死了现有的 Lighthttpd 进程......

这就像有一个杀死自己的进程并想知道为什么该进程没有返回任何东西......

# python - 获得相当于“find”的最简单方法。在蟒蛇？

> ID：12420779
> 
> 赞同：13
> 
> 时间：2012-09-14T08:32:41.477
> 
> 标签：python, file, find, filesystems

使用python获取文件夹内文件的完整递归列表的最简单方法是什么？我知道`os.walk()`，但是仅仅获取所有文件的未过滤列表似乎有点过分了。它真的是唯一的选择吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-14T08:43:00.970

没有什么能阻止您创建自己的函数：

```
import os

def listfiles(folder):
    for root, folders, files in os.walk(folder):
        for filename in folders + files:
            yield os.path.join(root, filename) 
```

你可以像这样使用它：

```
for filename in listfiles('/etc/'):
    print filename 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-14T08:45:07.693

`os.walk()`无论如何都不过分。它可以快速生成您的文件和目录列表：

```
files = [os.path.join(dirpath, filename)
    for (dirpath, dirs, files) in os.walk('.')
    for filename in (dirs + files)] 
```

你可以把它变成一个生成器，一次只处理一个路径并且在内存上是安全的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T21:03:47.520

您还可以使用[sh](http://amoffat.github.com/sh/index.html)`find`从 Python 中使用程序本身

```
import sh
text_files = sh.find(".", "-iname", "*.txt") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T08:36:50.827

要么使用[`isdir()`](http://docs.python.org/library/os.path.html#os.path.isdir)/手动递归[`isfile()`](http://docs.python.org/library/os.path.html#os.path.isfile)，[`listdir()`](http://docs.python.org/library/os.html#os.listdir)要么您可以使用[`subprocess.check_output()`](http://docs.python.org/library/subprocess.html#subprocess.check_output)和调用`find .`. 基本上`os.walk()`是最高级别，略低的级别是基于半手动解决方案`listdir()`，如果您想要相同的输出`find .`，出于某种原因，您可以使用`subprocess`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-16T14:56:32.097

[`pathlib.Path.rglob`](https://docs.python.org/3/library/pathlib.html#pathlib.Path.rglob)很简单。它列出了整个目录树

（参数是文件路径搜索模式。`"*"`表示列出所有内容）

```
import pathlib

for path in pathlib.Path("directory_to_list/").rglob("*"):
    print(path) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T08:44:05.353

```
import os
path = "path/to/your/dir"
for (path, dirs, files) in os.walk(path):
    print files 
```

这是矫枉过正，还是我错过了什么？

# c# - 将文本文件绑定到 XAML ListBox 控件

> ID：12420783
> 
> 赞同：1
> 
> 时间：2012-09-14T08:33:18.903
> 
> 标签：c#, wpf, xaml, data-binding, microsoft-metro

如何使用 C# 将文本文件名绑定到 Windows Metro 风格应用程序中的 ListBox 控件？

或者：

如何将 Dictionary() 绑定到 XAML ListBox 控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:42:36.390

经过似乎无休止地阅读文档、搜索和提问的时间；我设法自己解决了这个问题。

下面是在我的情况下可以正常工作的代码：

XAML：

```
<ListBox Name="NotesList">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Filename}" />
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

代码隐藏：

```
 public class NoteView
    {
        public string Filename { get; set; }
        public string Contents { get; set; }
    }

    /// <summary>
    /// Invoked when this page is about to be displayed in a Frame.
    /// </summary>
    /// <param name="e">Event data that describes how this page was reached.  The Parameter
    /// property is typically used to configure the page.</param>
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        var noteList = new ObservableCollection<NoteView>();

        for (int i = 0; i < 10; i++)
        {
            noteList.Add(new NoteView { Filename = "Sample note " + i });
        }

        NotesList.ItemsSource = noteList;
    } 
```

# c# - 无法将类型“字符串”隐式转换为“字符 []”

> ID：12420784
> 
> 赞同：2
> 
> 时间：2012-09-14T08:33:20.573
> 
> 标签：c#, c#-4.0

我有以下代码，但给出错误“无法将类型'string'隐式转换为'char []'”

```
char[] hTempFile = new char[300 + 1];
hTempFile =""; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T08:34:37.620

A `char[]` is different to a `string`. If you intend to be an empty array, then:

```
hTempFile = new char[0]; 
```

or perhaps simply (if you add a few null-checks):

```
hTempFile = null; 
```

There is also `.ToCharArray()` on a `string`, but that seems overkill here.

Frankly, for a file-name, it *sounds* like you should *actually* be using `string` here.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:48:52.933

它看起来像 C 风格的字符串初始化，在 C# 中最好避免对字符串使用 char 数组，而是使用字符串类。

```
string hTempFile = string.Empty; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:35:53.063

You can use [String.ToCharArray()](http://msdn.microsoft.com/en-us/library/ezftk57x.aspx) to get array of char from string....If the string is empty like in your given example, the returned array is empty and has zero length....

```
hTempFile = "".ToCharArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T15:04:00.077

看起来您想将 hTempFile 设置为空字符串，或者更具体地说，是空字符串的 C 字符串表示形式。如果是这种情况，您需要做的就是

```
hTempFile[0] = 0; 
```

由于 C 字符串是以 null 结尾的，因此在数组的第一个 char 中放置一个 null 字节可以有效地清空字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T08:37:05.377

你想达到什么目标？您已经将 hTempFile 定义为 char[] 类型。

您不能将字符串值分配给 hTempFile 。

# c# - Reading XML using C# is this the proper approach?

> ID：12420786
> 
> 赞同：1
> 
> 时间：2012-09-14T08:33:22.477
> 
> 标签：c#, xml, xml-parsing

I have a project where i read XML that was exported from another system. The XML looks like this:

```
<?xml version="1.0" encoding="ISO-8859-1"?><xmlimexport>
    <companydata/>
    <articles/>
    <customers/>
    <suppliers/>
    <orders>
        <order>
            <atOrder>
                <OOI_HEAD_DOCUMENT_NUMBER>12345</OOI_HEAD_DOCUMENT_NUMBER>
                **... more rows ...**                       
            </atOrder>
            <rows>
                <row><OOI_ROW_ARTICLE_NUMBER>12345</OOI_ROW_ARTICLE_NUMBER><OOI_ROW_ARTICLE_TEXT>SuperDuperArticleName</OOI_ROW_TEXT>**... more data...**</row>
            </rows>
        </order>
    </orders>
    <bests/>
    <invoices/>
    <supplierinvoices/>
    <pricelists/>
    <parcels/>
</xmlimexport> 
```

So what i do is load the path to the XML file then:

```
XmlDocument doc = new XmlDocument();

// Load xml file
doc.Load(xmlFile);

// Read order data
XmlNodeList orderList = doc.GetElementsByTagName("order");

foreach (XmlElement order in orderList)
{
    try
    {
        // Read atOrder data (single node)
        XmlNode atOrder = order.SelectSingleNode("atOrder");

        // Read article data (one or many nodes)
        XmlNodeList articles = order.GetElementsByTagName("row");

        // Create a order
        Order customerOrder = new Order(); 
```

Then read data with:

```
customerOrder.CUS_ID = Convert.ToInt32(atOrder.SelectSingleNode("OOI_HEAD_DOCUMENT_NUMBER").InnerText); 
```

But since it can be both Strings, Booleans, Datetime, Date and INT in those fields i find myself having to use `Convert.` very much, is this the proper way to do this or should i use a different approach?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:51:59.517

*   您还可以生成一个 XSD 并基于 XSD 一个类来反序列化 XML（[此处的简短教程](http://blogs.msdn.com/b/yojoshi/archive/2011/05/14/xml-serialization-and-deserialization-entity-classes-with-xsd-exe.aspx)）
*   您可以将 XML 直接读入 DataSet (.ReadXML)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:37:14.813

看看 LinqToXml 我认为这可能会有所帮助：

[http://msdn.microsoft.com/en-us/library/bb387098.aspx](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

# html - page number variable: html,django

> ID：12420787
> 
> 赞同：0
> 
> 时间：2012-09-14T08:33:24.537
> 
> 标签：html, django, pagination

i want to do paging. but i only want to know the current page number, so i will call the webservice function and send this parameter and recieve the curresponding data. so i only want to know how can i be aware of current page number? i'm writing my project in django and i create the page with xsl. if o know the page number i think i can write this in urls.py:

```
url(r'^ask/(\d+)/$',
        'ask',
        name='ask'), 
```

and call the function in views.py like:

```
ask(request, pageNo) 
```

but i don't know where to put pageNo var in html page. (so fore example with pageN0=2, i can do pageNo+1 or pageNo-1 to make the url like 127.0.0.01/ask/3/ or 127.0.0.01/ask/2/). to make my question more cleare i want to know how can i do this while we don't have any variables in html? sorry for my crazy question, i'm new in creating website and also in django. :">

i'm creating my html page with xslt. so i send the total html page. (to show.html which contains only {{str}} )

```
def ask(request:
    service = GetConfigLocator().getGetConfigHttpSoap11Endpoint()
    myRequest = GetConfigMethodRequest()
    myXml = service.GetConfigMethod(myRequest)
    myXmlstr = myXml._return
    styledoc = libxml2.parseFile("ask.xsl")
    style = libxslt.parseStylesheetDoc(styledoc)
    doc = libxml2.parseDoc(myXmlstr)
    result = style.applyStylesheet(doc, None)
    out = style.saveResultToString( result )
    ok =  mark_safe(out)
    style.freeStylesheet()
    doc.freeDoc()
    result.freeDoc()       
    return render_to_response("show.html", {
          'str': ok,           
            }, context_instance=RequestContext(request)) 
```

i'm not working with db and i just receive xml file to parse it. so i don't have contact_list = Contacts.objects.all(). can i still use this way? should i put the first parameter inpaginator = Paginator(contact_list, 25) blank?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:55:13.177

如果您使用[标准 django paginator](https://docs.djangoproject.com/en/dev/topics/pagination/?from=olddocs)，则将您发送到 url [http://example.com/?page=N](http://example.com/?page=N)，其中`N`- 您的页面编号所以，

```
# urls.py
url('^ask/$', 'ask', name='viewName'), 
```

您可以在视图中获取页码：

```
# views.py
def ask(request):
  page = request.GET.get('page', 1) 
```

# blackberry - 无法在黑莓设备上显示来自网络的图像

> ID：12420789
> 
> 赞同：1
> 
> 时间：2012-09-14T08:33:36.427
> 
> 标签：blackberry, java-me

我开发了简单的代码来在黑莓屏幕上显示图像和标题，但我无法显示任何内容（但如果我只测试标题，它就可以工作）。

我的要求是在列表中显示带有标题的图像。

我已按照[此链接从图像 url 获取图像](https://stackoverflow.com/questions/4310572/download-and-show-image-on-a-blackberry)

这里是我在 drawlistrow 方法中的代码：

```
public void drawListRow(ListField list, Graphics g, int index, int y, int w) 
        {
            String text = (String)listElements.elementAt(index);
            Bitmap image =GetImage.connectServerForImage("http://toucheradio.com/toneradio/iphone/toriLite/toriLive.png");
            g.drawLine(0, y, w, y);

            g.drawText(text, 150, y, 60, w);
            g.drawBitmap(0,y,image.getWidth(),image.getHeight(),image,0,0);
        } 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:29:08.253

请检查图像的高度和宽度，如果它比你的屏幕分辨率大，那么你必须裁剪或放大你得到的图像。给drawBitmapMethod一些x轴我刚刚给你的想法如下你可以实现。

```
g.drawBitmap(340, y, image.getWidth(), image.getHeight(), image, 0, 0); 
```

# c# - 如何设置十个元素的 AutoCompleteList？

> ID：12420790
> 
> 赞同：1
> 
> 时间：2012-09-14T08:33:36.533
> 
> 标签：c#, asp.net, ajax, autocomplete, autocompleteextender

我有一个带有 Ajax AutoComplete Extender 的 ASP.NET 应用程序，它工作正常，但我只想在列表中看到 10 到 15 个元素。我该怎么做？

aspx：

```
<asp:TextBox ID="txtVertreter" runat="server"></asp:TextBox>
                                <asp:AutoCompleteExtender ID="AutoComlete" runat="server" TargetControlID="txtVertreter" 
                                ServiceMethod="GetCompletionList" ServicePath="" Enabled="true"
                                DelimiterCharacters="" UseContextKey="true" MinimumPrefixLength="1" ></asp:AutoCompleteExtender> 
```

我的cs代码：

```
[System.Web.Script.Services.ScriptMethod]
[System.Web.Services.WebMethod]
public static string[] GetCompletionList(string prefixText, int count)
{
    ArrayList filteredList = new ArrayList();
    string s2 = "\n";
    char[] ch = s2.ToCharArray();

    UserService srv = new UserService();
    ArrayList AList = srv.VertreterFinden(Domain, prefixText);

    string[] names = AList.ToArray(typeof(string)) as string[];

    foreach (string name in names)
    {
        if
          (name.ToLower().StartsWith(prefixText.ToLower()))
        {
            filteredList.Add(name);
        }
    } return (string[])
        filteredList.ToArray(typeof(string));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:35:51.657

加载 Linq 命名空间并使用 Take 方法

```
filteredList.Take(10).ToArray(typeof(string)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:41:21.147

你能试一下吗

```
return (string[])
        filteredList.Take(10).ToArray(typeof(string)); 
```

这将给出正好 10 个元素。

# cron - Specifying path to run php file in cron job

> ID：12420805
> 
> 赞同：0
> 
> 时间：2012-09-14T08:34:25.563
> 
> 标签：cron, crontab, cron-task

I have written a cron job in my Server as below

35 * * * * /home/sites/domain.com/public_html/admin/filename.php

I am trying to call a file in [http://domain.com/admin/filename.php](http://domain.com/admin/filename.php).

In Cron job i navigated to every folder by the way its stored in directory in server.But the way to reach the same file in browser is as below

[http://domain.com/admin/filename.php](http://domain.com/admin/filename.php)

Now the cron filename.php is not running.I checked the file permission every thing is perfect.

I want to know is there a problem in the path i specified

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-16T03:30:17.433

当您在 cron 中运行 php 文件时。您必须配置为：

```
35 * * * * /usr/bin/php /home/sites/domain.com/public_html/admin/filename.php 
```

并且您想在服务器中运行守护程序。您可以设置为：

```
nohup php /home/sites/domain.com/public_html/admin/filename.php & 
```

# symfony - Symfony 2 pdo 异常

> ID：12420811
> 
> 赞同：0
> 
> 时间：2012-09-14T08:34:57.780
> 
> 标签：symfony, pdo, doctrine-orm

我正在使用 Symfony 2 并在我的 parameters.ini 中有这一行：

> 数据库驱动程序 = pdo_pgsql

当我用 Doctrine 创建数据库结构时，一切都很好。但是，如果我想向我的 darabase（插入行）添加一些学说对象，我会发现一个异常：

![在此处输入图像描述](../Images/333385fc21a7f9edbfe11e3b18816748.png)

我和这有什么关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:46:25.153

你确定你使用的是**pdo_pgsql**吗？你在本地主机上运行吗？可以肯定的是，您正在使用**pdo_mysql**驱动程序。

但是，您必须检查以下内容：

**php.ini**

```
extension=pdo.so
extension=pdo_mysql.so 
```

或者在你的情况下

```
extension=pdo.so
extension=pdo_pgsql.so 
```

您可以检查**phpinfo();** 找出配置的数据库驱动程序。

在您的 symfony 项目中，您必须检查 config 文件夹中的**parameters.ini**文件。例如

```
[parameters]
    database_driver="pdo_mysql"
    database_host="localhost" 
```

除了尽量避免这个错误

```
'stty' is not recognized as an internal or external command,
operable program or batch file. 
```

[https://github.com/symfony/symfony/issues/4974](https://github.com/symfony/symfony/issues/4974)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T15:48:53.620

首先，验证您的**php.ini**文件：必须启用扩展*php_pdo_pgsql*和*php_pdo 。*确保你在你的**symfony 项目**正在使用的 php.ini 文件上应用这些更改，在*localhost/path_to_your_project/web/config.php*上检查。您知道是否启用了此扩展执行函数 phpinfo()。

这个命令也很有帮助：php -m。它在控制台上列出了所有加载的 php 模块。

提示：查看您的**Apache 错误日志**，您的扩展加载可能有问题。该文件根据您的服务器配置定位。

# javascript - jQuery 工具选项卡自定义动画

> ID：12420812
> 
> 赞同：1
> 
> 时间：2012-09-14T08:35:02.553
> 
> 标签：javascript, jquery, jquery-tools

我在我的项目中使用这个库：[jQuery Tools Tabs](http://jquerytools.org/demos/tabs/)，从我读过的内容来看，我可以制作我的自定义效果，而不是使用默认效果。

我决定做一个这样的效果：[Demo](http://donz.dk/skagentabs/)。我发现了一些类似的东西，但我在实现它时遇到了麻烦。

```
$.tools.tabs.addEffect("subFade", function(tabIndex, done) {
    var conf = this.getConf(),
        speed = conf.fadeOutSpeed,
        panes = this.getPanes();
    var $tab = this.getCurrentTab();

    if($tab.hasClass("current")){//Going AWAY from the tab, do hide animation (before the tab is hidden)
        $(".tabs-tab").animate({"left" : "0px"}, 300, function(){//I was sliding it behind the tabs when not in use, replace with your own animation
            panes.hide();
            panes.eq(tabIndex).fadeIn(200, done);
            console.log("Done done");
            //This is then end of the chain - my animation, hide all then fade in new tab.
        });
    } else {//going away from any other tab
        panes.hide();
        panes.eq(tabIndex).fadeIn(200, done);
    }

    $tab = this.getTabs().eq(tabIndex);

    if($tab.hasClass("current")){//Going to my special tab.
        $(".tabs-tab").animate({"left" : "-160px"}, 300);//Sliding it out
    }
    // the supplied callback must be called after the effect has finished its job
    done.call();
}); 
```

以上是我一直在尝试但没有成功的方法。所以我想知道是否有人知道我做错了什么以及如何使自定义效果表现得像演示一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:09:19.890

我制作了一个与您的示例类似的内容滑块（但是它没有**淡入**/淡出功能），但也许通过对我的代码进行一些修改，您可以产生这种效果。
**[在这里摆弄](http://jsfiddle.net/GfU3s/)**
我的完整代码：

```
$(document).ready(function() {

$('.slides div:not(:first)').hide();
$('.slides div:first').addClass('active');
//Put .active width in var 
var activeWidth = $(".active").outerWidth();

$('.control p:first').addClass('current');
$('.control p').click(function() {  
/*store P index inside var*/    
var Pindex = $(this).index(); 
/* Store the slides in var*/
var slidePosition=$('.wrapper .slides div');
/* check if ACTIVE slide has GREATER index than clicked P TAG (CONTROLS)*/
if($(".wrapper .slides div.active").index() > $('.wrapper .slides div').eq(Pindex).index()) {
/*Show the slide equal to clicked P-TAG(CONTROLS)*/
slidePosition.eq(Pindex).show();
/*Add class "current" to the clicked control*/
 $(this).addClass('current').prevAll('.current').removeClass('current');
 $(this).nextAll('.current').removeClass('current');    
 $(".active").removeClass("active");
 $(".slides").css({"margin-left":-activeWidth});
 /*Start animation...*/
 $(".slides").animate({marginLeft:activeWidth-activeWidth},1000,function() {     
 slidePosition.eq(Pindex).addClass("active");
 $(".slides").css({"margin-left":"0px"});
 $(".active").prevAll().hide();
 $(".active").nextAll().hide();
 });
}

if($('.slides').is(':animated')) {   
   return false;
}   

if($(this).is($(".current"))) {   
   return false;
}

if($(".wrapper .slides div.active").index() < $('.wrapper .slides div').eq(Pindex).index()) {
 slidePosition.eq(Pindex).show();
 $(this).addClass('current').prevAll('.current').removeClass('current');
 $(this).nextAll('.current').removeClass('current');    
 $(".active").removeClass("active");

    $(".slides").animate({marginLeft:-activeWidth},1000,function() {     
     slidePosition.eq(Pindex).addClass("active");
     $(".slides").css({"margin-left":"0px"});
     $(".active").prevAll().hide();
     $(".active").nextAll().hide();
    });
}

    });
$(".left").click(function() {      
 if($('.slides').is(':animated')) {   
   return false;
 }      
if($(".active").prev().length===0) {     
 //alert("no prev");
 $(".active").nextAll().clone().insertBefore(".active");
 $(".active").removeClass("active").prev().addClass("active");
 $(".active").show();
 $(".slides").css({"margin-left":-activeWidth});
    $(".slides").animate({marginLeft:activeWidth-activeWidth},1000,function() {           
     $(".active").next().insertBefore($(".slides div:first")).hide();
     var activeIndex = $(".active").index();
     $(".active").nextAll().remove();
     $(".current").removeClass("current");          
     //alert(activeIndex)
     $(".control p").eq(activeIndex).addClass("current");
    });         
}
else{

     $(".active").removeClass("active").prev().addClass("active");
     $(".active").show();
     $(".slides").css({"margin-left":-activeWidth});
        $(".slides").animate({marginLeft:activeWidth-activeWidth},1000,function() {  
         var activeIndex = $(".active").index();                
         $(".active").prevAll().hide();
         $(".active").nextAll().hide();
         $(".current").removeClass("current");           
         $(".control p").eq(activeIndex).addClass("current");
        }); 
    }       
}); 

$(".right").click(function() {    
  if($('.slides').is(':animated')) {   
   return false;
  }   
    if($(".active").next().length===0) {
      //alert("no next")       
     $(".slides div:first").nextAll(':not(.active)').clone().insertAfter(".active");
     $(".slides div:first").insertAfter(".active");
     $(".active").removeClass("active").next().addClass("active");
     $(".active").show();
     $(".slides").animate({marginLeft:-activeWidth},1000,function() {        
        $(".active").prev().hide().insertAfter(".slides div:last");
        $(".slides").css({"margin-left":"0px"});
        $(".active").prevAll().remove();
         $(".current").removeClass("current");
         var activeIndex = $(".active").index();    
         $(".control p").eq(activeIndex).addClass("current");
        });        
    }
    else{
     $(".active").removeClass("active").next().addClass("active");
      $(".active").show();        
        $(".slides").animate({marginLeft:-activeWidth},1000,function() {         
         $(".slides").css({"margin-left":"0px"});
         $(".active").prevAll().hide();
         $(".active").nextAll().hide();
         $(".current").removeClass("current");
         var activeIndex = $(".active").index();    
         $(".control p").eq(activeIndex).addClass("current");

        }); 

    }
});

    }); 
```

# xml - XML VB.net 找不到属性

> ID：12420816
> 
> 赞同：0
> 
> 时间：2012-09-14T08:35:10.197
> 
> 标签：xml, vb.net

我有一个带有数据集和 gridview 的 ASP 站点，我想显示 XML 数据。

网格视图不是自动生成的，而是设置为查找hotelid、名称、状态、城市和国家。

目前，我已经手动编写了 XML，但是我已经包含了此 XML 中需要的包装器标签和其他错误标签，但是每当包含它们时，就会显示一个错误，指出 gridview 无法找到“HOTEL_ID”属性。无需额外数据即可正常工作。

XML 示例：

```
<REQUEST><ACTION>HOTEL_LIST</ACTION><RESPONSE><RESULT>0</RESULT>
<HOTELS>
<HOTEL><HOTELID>hot01</HOTELID><NAME>hotel test 1</NAME><CITY>birmingham</CITY><COUNTRY>england</COUNTRY><STATUS>active</STATUS></HOTEL>
<HOTEL><HOTELID>hot02</HOTELID><NAME>hotelabctestabc2abc</NAME><CITY>barca</CITY><COUNTRY>spain</COUNTRY><STATUS>inactive</STATUS></HOTEL>
<HOTEL><HOTELID>hot03</HOTELID><NAME>hotelabctestabcire</NAME><CITY>dublin</CITY><COUNTRY>ireland</COUNTRY><STATUS>active</STATUS></HOTEL>    
</HOTELS>
<ERRORS><ERROR><CODE></CODE><MESSAGE></MESSAGE></ERROR></ERRORS></RESPONSE></REQUEST>` 
```

这是VB代码：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles   Me.Load

    Dim teststring As String = "THE XML SHOWN ABOVE"

    Dim ds As New DataSet()
    Dim doc As New XmlDocument()

    doc.LoadXml(teststring)
    ds.ReadXml(New System.IO.StringReader(doc.OuterXml))

    GridView1.DataSource = ds
    GridView1.DataBind()

End Sub 
```

`

如果我删除只留下唯一的酒店信息，它会起作用并找到该物业；

`<HOTELS><HOTEL><HOTELID>hot01</HOTELID><NAME>hotel test 1</NAME><CITY>birmingham</CITY><COUNTRY>england</COUNTRY><STATUS>active</STATUS></HOTEL>`

`<HOTEL><HOTELID>hot02</HOTELID><NAME>hotelabctestabc2abc</NAME><CITY>barca</CITY><COUNTRY>spain</COUNTRY><STATUS>inactive</STATUS></HOTEL><HOTEL>`

`<HOTELID>hot03</HOTELID><NAME>hotelabctestabcire</NAME><CITY>dublin</CITY><COUNTRY>ireland</COUNTRY><STATUS>active</STATUS></HOTEL></HOTELS>`

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:14:41.363

当您将这样的 XML 文档加载到 DataSet 中时，它会根据数据创建多个表。

为了仅将酒店信息绑定到您的 GridView，您需要确定数据集中的哪个表包含数据，然后将其绑定到 GridView

例如

```
GridView1.DataSource = ds.Tables(index_of_table_which_contains_data) 
```

希望有帮助。

# python - CherryPy can't display images

> ID：12420817
> 
> 赞同：1
> 
> 时间：2012-09-14T08:35:25.200
> 
> 标签：python, google-chrome, windows-7, cherrypy

I tried for about 5 hours now to display a image to my webpage. My code is like this:

```
import os
import cherrypy

file_path = os.getcwd().replace("\\", "/")

class Home:
    def index(self):
        return """<img src="img/logolong.jpg" alt="Main Page" />"""
    index.exposed = True

if __name__ == "__main__":
    cherrypy.server.socket_host = "127.0.0.1"
    cherrypy.server.socket_port = 50505
    config = {"/static":
                        {"tools.staticdir.on": True,
                         "tools.staticdir.dir": file_path,
                        },
                      "/images":
                        {"tools.staticdir.on": True,
                        "tools.staticdir.dir": file_path+"/img"}
                    }

    cherrypy.tree.mount(Home(), "/", config=config)
    cherrypy.engine.start()
    cherrypy.engine.block() 
```

I searched everywhere and tried like everything. I'm using Google Chrome and Windows7.

Thanks a lot for help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:33:29.590

您的代码在 URI 处公开 logolong.jpg `/static/images/img/logolong.jpg`，但您的 HTML 说它应该在`/img/logolong.jpg`. 您需要以一种或另一种方式调和这些。要保持 HTML 原样并修复配置，您应该将其更改为：

```
config = {
    "/img": {
        "tools.staticdir.on": True,
        "tools.staticdir.dir": os.path.join(file_path, "img"),
    }
} 
```

（`os.path.join`以这种方式使用意味着您可以摆脱`replace("\\", "/")`上述情况）

这将在*URI处提供**文件* 。`%cd%\\img\\logolong.jpg` *`/img/logolong.jpg`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:24:49.010

尝试更改此行...

```
return """<img src="img/logolong.jpg" alt="Main Page" />"""\ 
```

到这条线...

```
return """<img src="/logolong.jpg" alt="Main Page" />""" 
```

安德鲁*

# mysql - executequery in Grails doesn't load key : value json

> ID：12420825
> 
> 赞同：0
> 
> 时间：2012-09-14T08:35:51.487
> 
> 标签：mysql, json, grails, grails-orm

I m doing something like this to get the data...

```
 def prods = Product.executeQuery("select category.id,category.name, avg(competition1Price), avg(competition2Price), avg(onlineCompetitionPrice) from Product group by category.id")
        render prods as JSON 
```

Not the output I'm getting is this..

```
 [[1,"Colchones y",1657.4784,2071.5,1242.5]] 
```

these are just the values..

I want to use the same query and get key value pair.. like the way you do using findAll(query) But I can't seem to implement this query using findAll()

Please Help

Thanks..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:16:30.637

这是因为 prods 的实例只是带有查询结果的对象，而不是 Product 或其他域类的实例（您使用的 HQL 不代表域类）。你可以：

*   考虑将此查询和映射的[视图](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)用作域类；
*   手动构建输出；

第二个选项类似于（未测试）：

```
 def output = [[:]]
  prods.each { result ->
    def prod = ['category.id' : result[0] , 'category.name': result[1]] //and so on...
    output << prod
  }
  render output as JSON 
```

使用第二个选项，要更改生成的结果，只需更改地图的结构。如果需要，您还可以拥有地图列表。

# php - 将参数变量值传递给函数后如何更改？

> ID：12420829
> 
> 赞同：1
> 
> 时间：2012-09-14T08:36:06.747
> 
> 标签：php

我正在阅读[在深渊中求生](http://survivethedeepend.com/zendframeworkbook/en/1.0/implementing.the.domain.model.entries.and.authors)。在那里我阅读了以下部分：

```
 $this->_mapper->save($entry);
    $this->assertEquals(123, $entry->id); 
```

mapper::save 的代码如下：

```
 public function save(ZFExt_Model_Entry $entry) {
    if(!$entry->id) {
        $data = array(
            'title' => $entry->title,
            'content' => $entry->content,
            'published_date' => $entry->published_date,
            'author_id' => $entry->author->id
        );
        $entry->id = $this->_getGateway()->insert($data);
                    ....contd 
```

如您所见，变量不是通过引用传递的，那么调用函数中 $entry 中的值将如何更改？(即; $this->_mapper->save($entry); $this->assertEquals(123, $entry->id);)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T08:39:19.520

对象总是通过引用传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:38:51.470

对象通过引用自动传递。要传递副本，请[克隆](http://php.net/manual/en/language.oop5.cloning.php)您的对象。

```
# Primitives are not passed by reference by default
$a = 12;

function setValue($var, $value)
{
    $var = $value;
}
setValue($a, 0);
echo $a; # 12

function setValueByRef(&$var, $value)
{
    $var = $value;
}
setValueByRef($a, 0);
echo $a; # 0

# Objects are always passed by reference
$obj = new stdClass();
$obj->p = 8;

function setAttribute($object, $attribute, $value)
{
    $object->$attribute = $value;
}
setAttribute($obj, 'p', 5);
echo $obj->p; # 5

# and this case, & does not change the behaviour
function setAttributeByRef(&$object, $attribute, $value)
{
    $object->$attribute = $value;
}
setAttributeByRef($obj, 'p', 7);
echo $obj->p; # 7

# You can clone your object not to affect it
$clonedObj = clone $obj;
setAttribute($clonedObj, 'p', 1);
echo $obj->p; # still 7
echo $clonedObj->p; # 1

# Moreover, object properties are treated like other variables
setValue($obj->p, 0);
echo $obj->p; # still 7

setValueByRef($obj->p, 0);
echo $obj->p; # 0 
```

# .htaccess - htaccess 重写根目录到子目录

> ID：12420830
> 
> 赞同：0
> 
> 时间：2012-09-14T08:36:11.117
> 
> 标签：.htaccess

我想像这样指向我的子目录文件夹

www.FOLDERNAME.SITE_NAME.net

现在写它的工作方式是这样的

www.SITE_NAME.net/FOLDER_NAME

我已经为我的文件夹创建了一个域

我尝试了很多 htaccess，但一点运气都没有。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T08:39:47.277

嗨，你试过这个吗？

```
 RewriteCond %{HTTP_HOST} ^FOLDERNAME\.SITE_NAME\.net$ [NC]
 RewriteCond %{REQUEST_URI} !^/FOLDERNAME/
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.*)$ /FOLDERNAME/$1
 RewriteCond %{HTTP_HOST} ^FOLDERNAME\.SITE_NAME\.net$ [NC]
 RewriteRule ^(/)?$ FOLDERNAME/index.php [L] 
```

我没有尝试，但我相信它会解决你的问题。

随时问同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:40:06.120

尝试（未测试）

```
RewriteEngine on

RewriteRule folder_name\.%{HTTP_HOST}%\.net
www.%{HTTP_HOST}%\.net/folder_name [NC,R=301,L,QSA] 
```

# android - 与 Html 和 Android 交互

> ID：12420831
> 
> 赞同：-1
> 
> 时间：2012-09-14T08:36:14.103
> 
> 标签：android, html, adobe, media-player

我已经开发了一个媒体播放器。`Html`现在我的工作是在来自活动`streaming Url`的编码媒体播放器中播放。所以我需要将 url 传递给将要播放的媒体播放器文件。我搜索了很多但没有找到好的解决方案。请建议我。谢谢`Html``Android``android activity``Html`

**Java 代码**

```
setContentView(R.layout.main);
//      String LocalFile = "file:///android_asset/android.html";

        WebView webView = (WebView) findViewById(R.id.webView1);
        String html = "<embed src=\"file:///android_asset/"
                + "android.html"
                + " \"play=\"true\" loop=\"true\" width=\"100%\" height=\"100%\"> <embed>";
        webView.getSettings().setPluginState(WebSettings.PluginState.OFF);
        webView.getSettings().setPluginsEnabled(true);
        webView.getSettings().setAllowFileAccess(true);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.loadDataWithBaseURL("file:///android_asset/", html,
                "text/html", "utf-8", null);
        String str = "rtmp://23.21.155.146:554/9016012507701502509011502505116016019xm150.sdp";
        webView.loadUrl("javascript:passWebUrl('" + str + "')"); 
```

**我的媒体播放器代码**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>

    <style type="text/css" media="screen">
        html, body{
            margin:0;
            padding:0;
            height:100%;
        }
        #altContent{
            width:100%;
            height:100%;
        }
    </style>
    <title>YOUR TITLE HERE!</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>

    <script type="text/javascript">
        var flashvars = {};
    function passWebUrl(url)
 {
        alert(url);
 }
        flashvars.HaloColor = "0x0086db";
        flashvars.ToolTips = "true";
        flashvars.AutoPlay = "true";
        flashvars.VolumeLevel = "50";
        flashvars.CaptionURL = "YOUR CAPTION HERE";
        flashvars.Title = "YOUR TITLE HERE";
        flashvars.Logo = "";
        flashvars.SRC = "Here is my url link should comes from Android Activity";
        flashvars.BufferTime = "5";
        flashvars.AutoHideControls = "false";
        flashvars.IsLive = "true";

        var params = {};
        params.wmode = "transparent";
        params.allowfullscreen = "true";

        var attributes = {};
        attributes.id = "L3MP";

        swfobject.embedSWF("http://media-player.cdn.level3.net/flash/v1_1_1/Level3MediaPlayer.swf", "altContent", "100%", "100%", "10.1.0","http://media-player.cdn.level3.net/flash/v1_1_1/expressInstall.swf", flashvars, params, attributes);
    </script>

    </head>
    <body>
     <div id="altContent">
       <center> <BR><BR><span style="color:red"><b>Please Install Adobe Flash Player</b>  
            </span><BR><BR>
      <a href="http://www.adobe.com/go/getflashplayer"><img     src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a>
      </center>    
      </div>
     </body>
    </html>
    </script>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:38:35.920

要将变量的值从您的 java 类传递到 html 页面中的 javascript 函数，您必须使用此代码。试试这个：

```
String str = "variable_value";
webView.loadUrl("javascript:functionName('"+ str +"')"); 
```

**编辑 ： -**

```
 function passWebUrl(url)
 {
        alert(url);
 } 
```

# sql - 为什么在这个 select 语句中没有设置变量？

> ID：12420835
> 
> 赞同：1
> 
> 时间：2012-09-14T08:36:34.483
> 
> 标签：sql, database, stored-procedures, sql-server-2008-r2

我编写了以下存储过程：

```
ALTER PROCEDURE [dbo].[sp_Accounts_ValidateLogin]
   @EmailAddress varchar(255),
   @Password varchar(20)
AS
   DECLARE @UserID int

   SELECT @UserID = UserID 
   FROM Accounts_Users 
   WHERE EmailAddress = @EmailAddress and Password = @Password

   IF @UserID != NULL   
      RETURN @UserID
   ELSE
      RETURN -1 
```

执行此过程时，它显示，

```
No rows affected.
(0 row(s) returned)
@RETURN_VALUE = -1 
```

但是每当我将`SELECT`声明重写为，

```
SELECT UserID 
FROM Accounts_Users 
WHERE EmailAddress = @EmailAddress and Password = @Password 
```

结果是：

```
UserID                                                                                                                                                                                                                                                           
---------------------------------------------------------------------------------------
3                                                                                                                                                                                                                                                                
No rows affected.
(1 row(s) returned)
@RETURN_VALUE = -1 
```

`@UserID`我的问题是为什么变量**没有**在**第一个选择**语句中设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T08:38:49.260

!= NULL 不会像您期望的那样工作。

做了：

```
IF @UserID IS NOT NULL 
```

下面的 SO 问题有一些关于原因的信息，所以我不会费心重新发布它（这基本上是因为 NULL 不是实际值）：

[不等于 <> != NULL 上的运算符](https://stackoverflow.com/questions/5658457/not-equal-operator-in-t-sql-on-null)

# implicit - GlobalPlatform 启动模式隐式

> ID：12420836
> 
> 赞同：1
> 
> 时间：2012-09-14T08:36:38.897
> 
> 标签：implicit, javacard

我正在 Javacard 上对 globalplatform scp01 和 scp02 的不同实现进行编程，我发现了一个问题。

有人可以解释一下在模式下安全通道启动的机制是如何隐式的吗？

在规范中，我发现完美地描述了显式方式，（第 214 页，E.1.2.1 显式安全通道启动，带有很棒的图形），但隐式形式非常简短......

我必须遵循哪些步骤才能正确执行？

谢谢

# windows-phone-7 - System.Windows.Interactivity, Version=3.8.5.0 中断对 OnApplyTemplate() 的调用

> ID：12420840
> 
> 赞同：1
> 
> 时间：2012-09-14T08:37:07.460
> 
> 标签：windows-phone-7

我有一个复杂的 Windows Phone 7 类库，几个月来一直运行良好。但是，仅对 csproj 文件中的类库进行一行更改会导致代码失败。有问题的一行是这一行：

从：

```
<Reference Include="System.Windows.Interactivity, Version=3.7.5.0,
Culture=neutral, PublicKeyToken=31bf3856ad364e35,
processorArchitecture=MSIL" /> 
```

至：

```
<Reference Include="System.Windows.Interactivity, Version=3.8.5.0,
Culture=neutral, PublicKeyToken=31bf3856ad364e35,
processorArchitecture=MSIL" /> 
```

我提到的失败是 OnApplyTemplate() 重载，对我们的类库的正确运行至关重要，不再被调用。

任何人都可以给我任何关于这个问题的见解吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:39:00.413

您不是“只对类库进行一行更改”。您正在引用不同版本的外部（尽管是系统）库。

如果有两个不同版本的库，我希望它们之间存在差异。（否则有 2 个版本？）碰巧这 2 个版本之间的更改对您来说似乎是一个重大更改。

为什么首先要更改为 v 3.8.5.0？

# c - 如何通过 fread 函数读取 char* 字符串？

> ID：12420845
> 
> 赞同：2
> 
> 时间：2012-09-14T08:37:27.153
> 
> 标签：c, memory, char, fread

我们调用了一个库来读取文本，这个库 API 只接受一个`FILE*`指针。`fread()`它实际上通过内部调用读取文件文本。

但是我们还需要使用这个库来读取`char*`字符串而不是`FILE*`.

当然，我们可以将`char*`字符串写入临时文件，但由于某些原因，我们不允许这样做......

怎么做 ？谢谢 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:45:06.010

查看[fmemopen](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fmemopen.html)

fmemopen() 函数应将 buf 参数给定的缓冲区与流相关联。

```
#include <stdio.h>

static char buffer[] = "foobar";

int main (void)
{
  FILE *stream;

  stream = fmemopen (buffer, strlen (buffer), "r");

  /* You got a FILE* pointer, you can call your function here :-) */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:49:31.090

可以做到，但并不容易而且相当复杂。

您可以使用 来创建共享内存文件句柄[`shm_open`](http://pubs.opengroup.org/onlinepubs/009695399/functions/shm_open.html)，该文件句柄可用于[`mmap`](http://pubs.opengroup.org/onlinepubs/009695399/functions/mmap.html)使其指向字符串的内存区域，然后用于从文件描述符[`fdopen`](http://pubs.opengroup.org/onlinepubs/009695399/functions/fdopen.html)创建指针。`FILE`

**注意：**这仅适用于 POSIX（例如 Linux 或 Mac OSX）系统。Windows 系统应该有类似的功能，但仍然不容易。

**编辑**`fmemopen`在 Massimo Fazzolari 的答案中引用的电话中，这可能与幕后发生的事情类似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:41:39.770

嗯，没有编写自己的设备驱动程序以某种方式与进程通信，这是一个棘手的问题。我的意思是，你可以创建一个字符设备，当读取它时，它会通过某种 IPC（共享内存、命名管道或其他东西）与进程通信。

但这是 (1) 讨厌的，(2) UNIX 特定的（不可移植的）和 (3) 一个非常糟糕的主意 :-)

如果没有这样的低级技巧（或使用可以像文件句柄一样处理内存的不可移植扩展），这是无法完成的 -`fread`期望 a`FILE*`并且将从文件句柄中读取，就是这样，真的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T08:44:44.137

在各种 unix 系统上，您可以创建管道/套接字或类似的文件描述符，并使用 fdopen() 打开文件描述符并获取 FILE* 指针。然后将绳子送入管道/插座。

当你遇到这样的奇怪问题时，我建议你检查你的程序/库设计。奇怪的问题/要求是糟糕设计的强烈迹象。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-14T08:40:45.447

我不认为这是可以做到的。fread 只能从文件流（即 FILE * 或 stdout）中读取。

# android - Android 应用程序因 protobuf 而崩溃

> ID：12420850
> 
> 赞同：1
> 
> 时间：2012-09-14T08:37:45.267
> 
> 标签：android, c++, android-ndk, protocol-buffers, network-protocols

我有一个借助 cocos2d-x 引擎实现的 Android 应用程序。我将 protobuf 库链接到项目并尝试 SerializeToStrint() 一个原型对象：

```
ProtoMessage message;
message.set_app_id(1111);
message.set_hardware_id("test string");

std::string str;

message.SerializeToString(&str); 
```

这很好，但是当我尝试启动应用程序 logcat 时，请给我发送下一个日志：

```
09-14 10:26:51.748 13009 13009 I DEBUG   : Build fingerprint: 
verizon/droid2we_vzw/cdma_droid2we:2.3.4/4.5.1_57_D2GA-59/120117:user/release-keys
09-14 10:26:51.748 13009 13009 I DEBUG   : pid: 12996, tid: 13008  >>> com.karmicapps <<<
09-14 10:26:51.748 13009 13009 I DEBUG   : signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad
09-14 10:26:51.748 13009 13009 I DEBUG   :  r0 00000027  r1 deadbaad  r2 a0000000  r3 00000000
09-14 10:26:51.748 13009 13009 I DEBUG   :  r4 00000001  r5 00000000  r6 81b15340  r7 0000a000
09-14 10:26:51.748 13009 13009 I DEBUG   :  r8 818d4ed1  r9 44df07c8  10 00100000  fp 00000001
09-14 10:26:51.748 13009 13009 I DEBUG   :  ip afd466c8  sp 45ac1df8  lr afd19239  pc afd15d08  cpsr 60000070
09-14 10:26:51.748 13009 13009 I DEBUG   :  d0  643a64696f72646e  d1  6472656767756265
09-14 10:26:51.748 13009 13009 I DEBUG   :  d2  0049002e00690045  d3  0066007200750047
09-14 10:26:51.748 13009 13009 I DEBUG   :  d4  0000000000000000  d5  0000000100000000
09-14 10:26:51.748 13009 13009 I DEBUG   :  d6  000000000000f760  d7  0000000000000000
09-14 10:26:51.748 13009 13009 I DEBUG   :  d8  0000000000000000  d9  0000000000000000
09-14 10:26:51.756 13009 13009 I DEBUG   :  d10 0000000000000000  d11 0000000000000000
09-14 10:26:51.756 13009 13009 I DEBUG   :  d12 0000000000000000  d13 0000000000000000
09-14 10:26:51.756 13009 13009 I DEBUG   :  d14 0000000000000000  d15 0000000000000000
09-14 10:26:51.756 13009 13009 I DEBUG   :  d16 3fdd938000000280  d17 3fdfffffffffe114
09-14 10:26:51.756 13009 13009 I DEBUG   :  d18 3fe0000000000000  d19 3fe0000000000f76
09-14 10:26:51.756 13009 13009 I DEBUG   :  d20 0000000000000000  d21 3f872e5c54a96637
09-14 10:26:51.756 13009 13009 I DEBUG   :  d22 3e21e7c5992989f4  d23 bda8fae9be8838d4
09-14 10:26:51.756 13009 13009 I DEBUG   :  d24 3fc74721cad6b0ed  d25 3fc39a09d078c69f
09-14 10:26:51.756 13009 13009 I DEBUG   :  d26 0000000000000000  d27 0000000000000000
09-14 10:26:51.756 13009 13009 I DEBUG   :  d28 0000000000000000  d29 0000000000000000
09-14 10:26:51.756 13009 13009 I DEBUG   :  d30 0000000000000000  d31 0000000000000000
09-14 10:26:51.756 13009 13009 I DEBUG   :  scr 20000012
09-14 10:26:51.756 13009 13009 I DEBUG   : 
09-14 10:26:51.803 13009 13009 I DEBUG   :          #00  pc 00015d08  /system/lib/libc.so
09-14 10:26:51.803 13009 13009 I DEBUG   :          #01  pc 00013674  /system/lib/libc.so
09-14 10:26:51.803 13009 13009 I DEBUG   :          #02  pc 0001453a  /system/lib/libc.so
09-14 10:26:51.803 13009 13009 I DEBUG   :          #03  pc 000a45ec  /data/data/com.example/lib/libprotobuf.so
09-14 10:26:51.803 13009 13009 I DEBUG   :          #04  pc 000a46d0  /data/data/com.example/lib/libprotobuf.so
09-14 10:26:51.803 13009 13009 I DEBUG   :          #05  pc 000445ac  /data/data/com.example/lib/libprotobuf.so
09-14 10:26:51.803 13009 13009 I DEBUG   :          #06  pc 000445f6  /data/data/com.example/lib/libprotobuf.so
09-14 10:26:51.803 13009 13009 I DEBUG   :          #07  pc 00044616  /data/data/com.example/lib/libprotobuf.so
09-14 10:26:51.803 13009 13009 I DEBUG   :          #08  pc 000d51f8  /data/data/com.example/lib/libpromowall.so
09-14 10:26:51.803 13009 13009 I DEBUG   :          #09  pc 000d4ee4  /data/data/com.example/lib/libpromowall.so
09-14 10:26:51.803 13009 13009 I DEBUG   :          #10  pc 0001194c  /system/lib/libc.so
09-14 10:26:51.803 13009 13009 I DEBUG   :          #11  pc 00011510  /system/lib/libc.so
09-14 10:26:51.803 13009 13009 I DEBUG   : 
09-14 10:26:51.803 13009 13009 I DEBUG   : code around pc:
09-14 10:26:51.803 13009 13009 I DEBUG   : afd15ce8 2c006824 e028d1fb b13368db c064f8df 
09-14 10:26:51.803 13009 13009 I DEBUG   : afd15cf8 44fc2401 4000f8cc 49124798 25002027 
09-14 10:26:51.803 13009 13009 I DEBUG   : afd15d08 f7f57008 2106ec72 edd6f7f6 460aa901 
09-14 10:26:51.803 13009 13009 I DEBUG   : afd15d18 f04f2006 95015380 95029303 e934f7f6 
09-14 10:26:51.803 13009 13009 I DEBUG   : afd15d28 462aa905 f7f62002 f7f5e940 2106ec5e 
09-14 10:26:51.803 13009 13009 I DEBUG   : 
09-14 10:26:51.803 13009 13009 I DEBUG   : code around lr:
09-14 10:26:51.803 13009 13009 I DEBUG   : afd19218 4a0e4b0d e92d447b 589c41f0 26004680 
09-14 10:26:51.803 13009 13009 I DEBUG   : afd19228 686768a5 f9b5e006 b113300c 47c04628 
09-14 10:26:51.803 13009 13009 I DEBUG   : afd19238 35544306 37fff117 6824d5f5 d1ef2c00 
09-14 10:26:51.811 13009 13009 I DEBUG   : afd19248 e8bd4630 bf0081f0 00028344 ffffff88 
09-14 10:26:51.811 13009 13009 I DEBUG   : afd19258 b086b570 f602fb01 9004460c a804a901 
09-14 10:26:51.811 13009 13009 I DEBUG   : 
09-14 10:26:51.811 13009 13009 I DEBUG   : stack:
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1db8  00000000  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1dbc  00000000  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1dc0  00000000  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1dc4  00000000  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1dc8  afd4276c  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1dcc  afd42718  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1dd0  00000000  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1dd4  afd19239  /system/lib/libc.so
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1dd8  00000001  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1ddc  45ac1e0c  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1de0  81b15340  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1de4  0000a000  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1de8  818d4ed1  /data/data/com.karmicapps/lib/libpromowall.so
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1dec  afd1855b  /system/lib/libc.so
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1df0  df002777  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1df4  e3a070ad  
09-14 10:26:51.811 13009 13009 I DEBUG   : #00 45ac1df8  0000001b  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1dfc  0000000e  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1e00  45ac1eac  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1e04  002ddb2c  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1e08  81b15340  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1e0c  fffffbdf  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1e10  818d4ed1  /data/data/com.karmicapps/lib/libpromowall.so
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1e14  afd464b0  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1e18  002ddb2c  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1e1c  afd13679  /system/lib/libc.so
09-14 10:26:51.811 13009 13009 I DEBUG   : #01 45ac1e20  45ac1eac  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1e24  002ddb2c  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1e28  0000000e  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1e2c  00000000  
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1e30  818d4ed1  /data/data/com.karmicapps/lib/libpromowall.so
09-14 10:26:51.811 13009 13009 I DEBUG   :     45ac1e34  afd1453d  /system/lib/libc.so 
```

请问有人能解释一下造成这种情况的原因吗？

**更新** 但是如果我以这种方式初始化字符串：

```
ProtoMessage message;
message.set_app_id(1111);
message.set_hardware_id("test string");

std::string str;
str = "test";

message.SerializeToString(&str); 
```

一切正常，proto 序列化正常

**更新**我在下面添加了一个 add2line 结果

新的堆栈跟踪：

```
#00  pc 00016f20  /system/lib/libc.so
#01  pc 00014878  /system/lib/libc.so
#02  pc 00015756  /system/lib/libc.so
#03  pc 0018dd64  /data/data/com.example/lib/libprotobuf.so   ---- std::string::reserve(unsigned int) 
#04  pc 0018de60  /data/data/com.example/lib/libprotobuf.so   ---- std::string::append(unsigned int, char)
#05  pc 000eff6c  /data/data/com.example/lib/libprotobuf.so   ---- google::protobuf::STLStringResizeUninitialized(std::string*, unsigned int)
#06  pc 000f1c96  /data/data/com.example/lib/libprotobuf.so   ---- google::protobuf::internal::WireFormatLite::ReadString(google::protobuf::io::CodedInputStream*, std::string*)
#07  pc 001013b4  /data/data/com.example/lib/libpromowall.so  ---- google::protobuf::DescriptorBuilder::NewPlaceholderFile(std::string const&) 
```

**更新** 和最烦人的问题我无法在没有字符串字段初始化的情况下解析原型对象。

```
//str - serializing protobuf object
RegistrationRequest request;
request.ParseFromString(str); 
```

错误！当我在我的桌面机器上的测试应用程序中编译它时，一切都很好。但是如果我通过 cocos2d-x 脚本 (ndk.r7) 编译应用程序在移动设备上崩溃

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T03:48:31.357

确保**libprotobuf.so**和**libpromowall.so**使用相同的 STL 实现构建：**stlport_shared**或**gnustl_shared**。

# c# - 单元格中的 Excel 行

> ID：12420851
> 
> 赞同：0
> 
> 时间：2012-09-14T08:37:47.950
> 
> 标签：c#, excel, row, cell, excel-interop

是否有可能访问包含 2 行或更多行的单元格的行？例如看下面：

![在此处输入图像描述](../Images/aa59fb838471b191d958d536a9e50b6f.png) 这些行在一个单元格中！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:02:16.933

我解决了这个问题。当访问具有多行的单元格时，行由“\n”分隔。我只是用 string.replace(....) 替换它们，并用子字符串访问它们。谢谢！

# vba - VBA 选择方法错误

> ID：12420855
> 
> 赞同：1
> 
> 时间：2012-09-14T08:38:05.853
> 
> 标签：vba, excel, excel-2007

我是 VBA 新手，基本上是在尝试编写我的第一个宏。它旨在将条目从一个工作簿复制到另一个忽略重复值的工作簿。我有以下代码：

```
Dim s As String

Do While IsEmpty(ActiveCell) = False

If ActiveCell.Value <> s Then
    s = ActiveCell.Value
    ActiveCell.Offset(1, 0).Select
    Windows("Main.xlsm").ActiveCell.Value = s
    Windows("Main.xlsm").ActiveCell.Offset(1, 1).Select

Else
    ActiveCell.Offset(1, 0).Select

End If
Loop 
```

它给了我这一行的运行时错误 1004：

```
Windows("Main.xlsm").ActiveCell.Offset(1, 1).Select 
```

这意味着方法 Select 无法正常工作。（我打开了“Main.xlsm”但未激活，并且选择了一个单元格。）我搜索了类似的问题，发现可能是因为我没有选择工作表。但不知何故，这条线有效：

```
 Windows("Main.xlsm").ActiveCell.Value = s 
```

我可以看到工作簿“Main.xlsm”中的单元格发生了变化。所以，我假设`Windows("Main.xlsm").ActiveCell`确实创建了一个 Range 对象。

那么为什么会发生错误呢？写这个的正确方法是什么？

我也尝试将我的代码更改为：

```
 Windows("Main.xlsm").ActiveSheet.ActiveCell.Value = s
    Windows("Main.xlsm").ActiveSheet.ActiveCell.Offset(1, 1).Select 
```

这给了我：“运行时错误 438 对象不支持此属性或方法”。这是为什么？这里有什么不正确的？

并：

```
 Windows("Main.xlsm").Sheets("Name").ActiveCell.Value = s
 Windows("Main.xlsm").Sheets("Name").ActiveCell.Offset(1, 1).Select 
```

结果是一样的。而且我仍然不明白为什么最后两个不起作用。

这是我在这里的第一篇文章，所以如果我的编辑或其他任何错误，请纠正我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:11:53.757

使用`ActiveCell`, `Select`etc 不是一个好主意。浏览 SO Excel 标签，您会发现许多反对它的答案，其中许多都很好地解释了原因。对于我的一个[看到这个问题](https://stackoverflow.com/q/10714251/445425)

相反，声明`Range`和`Worksheet`变量并将它们分配给您的范围和工作表

```
Dim wbSource as WorkBook
Dim wsSource as WorkSheet

Set wbSource = Application.Workbooks("Main.xlsm")
Set wsSource = wbSource.Worksheets("Name") 
```

要使用 VBA 所在的工作簿，请使用`ThisWorkbook`对象

如果要从活动工作表开始，通常可以使用

```
Dim sh as Worksheet
Set sh = ActiveSheet 
```

要使用范围，请使用类似

```
Dim rng as Range

' Set to a specific range
Set rng = Range sh.Range("A1:D10")
' or
With sh
    Set rng = .Range(.Cells(1,1), .Cells(10,4))
End With

' Set to all used cells in a column
With sh
    Set rng = .Range(.Cells(1,1), .Cells(.Rows.Count,1).End(xlUp))
End With

' Adjust rng
Set rng = rng.Offset(1,0)
Set rng = rng.Resize(10,1) 
```

所以，重构你的代码片段

```
Dim s As String
Dim rng as Range, cl as Range
Dim shSource as Worksheet
Dim rngDestination as Range

Set shSource = Application.Workbooks("Main.xlsm").Worksheets("SheetName")
Set rngDestination = shSource.Range("A1") ' Change to whatever you need here

Set rng = ActiveCell ' if you must!

' Just in case only one cell entry exists, avoid selecting down to bottom of sheet
If Not IsEmpty(rng.Offset(1,0)) Then
    Set rng = Range(rng, rng.End(xlDown)) ' unqualified Range (ie no sh. part) refers to the active sheet
End IF

For Each cl In rng
    If cl.Value <> s Then
        s = cl.Value
        rngDestination.Value = s
        Set rngDestination = rngDestination.Offset(1, 1) ' should this be .Offset(1, 0) ?
    End If
Next 
```

# iis-7 - Cruisecontrol.Net 异常 - 无法建立连接，因为目标机器主动拒绝它

> ID：12420858
> 
> 赞同：1
> 
> 时间：2012-09-14T08:38:19.837
> 
> 标签：iis-7, cruisecontrol.net, ccnet-config

这个问题似乎完全是重复的，但这里还需要更多。这是我得到的同一个旧错误：

```
There were exceptions connecting to the following servers:

Server    Url                                        Message
-----------------------------------------------------------------------------------------------------------------------------------------------
local     tcp://localhost:21234/CruiseManager.rem    No connection could be made because the target machine actively refused it 127.0.0.1:21234 
```

我完成了通常的故障排除 -

1.  我的 Cruisecontrol 服务已启动并正在运行
2.  IIS 已启动并正在运行
3.  CCValidator.exe 已经验证了我的 ccnet.config 文件，并且该文件是完美的。

那么这里可能是什么问题呢？有任何建议或其他故障排除吗？感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:46:03.193

想通了。我认为这可能会增加此问题的故障排除步骤。当我调试得更深一点时，我发现我的服务器中缺少[ccservice.exe.config](http://ccnet.sourceforge.net/CCNET/Server%20Application%20Config%20File.html)文件。更深入地发现该文件已以某种方式重命名为“ccservice.exe.config.old”！我不确定这是怎么发生的，但是当我将其重命名为原始名称时，CC 就像魅力一样。:)

因此，另一个故障排除步骤是：

*   检查 CC 服务器配置文件的正确性。

# jquery - 交换站点的图像翻转中心

> ID：12420864
> 
> 赞同：0
> 
> 时间：2012-09-14T08:38:34.327
> 
> 标签：jquery, css, image, center, rollover

出于某种原因，我无法工作。我想要做的就是在页面的中心放置一个图像（这是页面上唯一的东西），当我翻转它时它会变成不同的图像。

我可以使用 jquery 制作翻转效果，并且可以将图像居中放置在页面上。但我不能把它们结合起来。因为jquery的翻转效果是使用绝对位置。

请问有什么帮助吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:59:04.647

您可以使用此类 javascript 完成这两个操作

```
$(".container img").hover(function() {  
  $(".container img").toggle();
}); 
```

并在您的 HTML 中

```
<div class="container">
  <img src="http://www.placehold.it/140x140&text=Image%201" />
  <img style="display:none;" src="http://www.placehold.it/140x140&text=Image%202" />
</div> 
```

一个简单的**现场示例**：http: [//jsbin.com/agirul/1/edit](http://jsbin.com/agirul/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:46:57.080

您可以尝试将您的图像包装在一个 div 中，并在页面上以相对位置居中，这样您的图像就会与该 div 而不是文档正文相关。

# php - 让魔法功能在 PHP Soap 客户端中工作

> ID：12420866
> 
> 赞同：2
> 
> 时间：2012-09-14T08:38:38.347
> 
> 标签：php, soap, client, soap-client

我正在使用带有 WSDL 文档的 PHP Soap 客户端。客户端是这样创建的：

```
$client = new SoapClient('http://eklima.met.no/metdata/MetDataService?WSDL'); 
```

现在我想调用函数'getCountyTypes'，它接受参数'language'和'countiesId'。

```
$args = array(
    'language'=>'no', 
    'countiesId'=>'2'
); 
```

直接使用函数 __soapCall 按预期工作：

```
$res = $client->__soapCall('getCountyTypes', $args); 
```

尝试使用魔术函数不起作用：

```
$res = $client->getCountyTypes($args); 
```

我收到以下错误：

```
PHP Notice:  Array to string conversion in /Users/jorgen/soaptest.php on line 60
PHP Fatal error:  Uncaught SoapFault exception: [SOAP-ENV:Client] No mapping found for ':countiesId' using encoding style 'http://schemas.xmlsoap.org/soap/encoding/'. [java.lang.IllegalArgumentException] in /Users/jorgen/soaptest.php:60
Stack trace:
#0 /Users/jorgen/soaptest.php(60): SoapClient->__call('getCountyTypes', Array)
#1 /Users/jorgen/soaptest.php(60): MySoapClient->getCountyTypes(Array)
#2 {main}
  thrown in /Users/jorgen/soaptest.php on line 60 
```

我需要一些关于如何使用带有魔法功能的肥皂客户端的说明。

**编辑：**添加了 var_dump($client->__getFunctions()); 的输出

```
array(14) {
  [0]=>
  string(185) "no_met_metdata_Metdata getMetData(string $timeserietypeID, string $format, string $from, string $to, string $stations, string $elements, string $hours, string $months, string $username)"
  [1]=>
  string(106) "ArrayOfno_met_metdata_TimeSerieTypes getTimeserieTypesProperties(string $language, string $timeserieTypes)"
  [2]=>
  string(99) "ArrayOfno_met_metdata_ElementProperties getElementsProperties(string $language, string $elem_codes)"
  [3]=>
  string(93) "ArrayOfno_met_metdata_ElementProperties getElementsFromTimeserieType(string $timeserietypeID)"
  [4]=>
  string(111) "ArrayOfno_met_metdata_ElementProperties getElementsFromTimeserieTypeStation(string $timeserietypeID, int $stnr)"
  [5]=>
  string(97) "ArrayOfno_met_metdata_StationProperties getStationsProperties(string $stations, string $username)"
  [6]=>
  string(111) "ArrayOfno_met_metdata_StationProperties getStationsFromTimeserieType(string $timeserietypeID, string $username)"
  [7]=>
  string(140) "ArrayOfno_met_metdata_StationProperties getStationsFromTimeserieTypeElemCodes(string $timeserietypeID, string $elem_codes, string $username)"
  [8]=>
  string(162) "ArrayOfno_met_metdata_StationProperties getStationsFromTimeserieTypeStationsElemCode(string $timeserietype, string $stations, string $elem_code, string $username)"
  [9]=>
  string(22) "string getDateFormat()"
  [10]=>
  string(89) "ArrayOfno_met_metdata_FlagProperties getFlagProperties(string $language, string $flagsId)"
  [11]=>
  string(110) "ArrayOfno_met_metdata_PrecipitationTypes getPrecipitationTypes(string $language, string $precipitationTypesId)"
  [12]=>
  string(33) "ArrayOfString getValidLanguages()"
  [13]=>
  string(86) "ArrayOfno_met_metdata_CountyTypes getCountyTypes(string $language, string $countiesId)"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T08:29:13.887

我有同样的问题。我认为我必须执行以下操作：

```
$args = array(
    'language'=>'no', 
    'countiesId'=>'2' );

$res = $client->getCountyTypes($args); 
```

但实际上我必须这样做：

```
$res = $client->getCountyTypes("no","2"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:59:29.230

[正如aravind.udayashankara](https://stackoverflow.com/users/1067466/aravind-udayashankara)所指出的，正确的解决方案是使用

```
$res = $client->__soapCall('getCountyTypes', $args); 
```

# java - jboss 7不扫描jre的ext文件夹

> ID：12420867
> 
> 赞同：3
> 
> 时间：2012-09-14T08:38:44.323
> 
> 标签：java, cryptography, jboss7.x, jsf-1.2, seam2

我有一个在 jboss 上运行的软件，它需要位于 jre/lib/ext 中的加密库。我得到以下异常：

```
Caused by: java.lang.ClassNotFoundException: com.sun.crypto.provider.SunJCE from [Module "deployment.myatrium-intranet-ear.ear.myatrium_intranet.jar:main" from Service Module Loader]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) 
```

我在此链接中尝试了以下解决方案：

[http://www.liferay.com/it/community/wiki/-/wiki/Main/JBoss+AS7+tips/maximized#section-JBoss+AS7+tips-sunjce_provider.jar](http://www.liferay.com/it/community/wiki/-/wiki/Main/JBoss+AS7+tips/maximized#section-JBoss+AS7+tips-sunjce_provider.jar)

但未能扫描 ext 文件夹。

真的陷入了绝境。非常感谢您的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:19:59.123

你理解错了。JBoss 7 已迁移到完整的 OSGi。您需要将它们添加到引导委托。

它确实加载了`ext`类路径。问题是它应用了一个类过滤器（以防止您使用非标准类）。

如果您使用 ODBC 驱动程序 ( `sun.jdbc.odbc.*`) 和其他`sun.*`类，也会出现同样的问题。您必须将其添加到引导授权/系统包中。（这不是正确的方式。但是您似乎讨厌正确的方式，所以....）

有关详细信息，请参阅这些页面：

*   [OSGi 上的 java.lang.NoClassDefFoundError](https://stackoverflow.com/questions/5181211/java-lang-noclassdeffounderror-on-osgi)
*   [https://community.jboss.org/thread/195014](https://community.jboss.org/thread/195014)
*   [https://community.jboss.org/message/636632](https://community.jboss.org/message/636632)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:52:53.897

几个月前我遇到了一个非常相似的问题，标准方法似乎不起作用。

这个链接解决了我的问题：[https ://community.jboss.org/thread/175395](https://community.jboss.org/thread/175395)

它讨论了`bouncycastle`提供者，但也适用于 sunjce_provider。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T00:48:49.337

尝试放置以下内容：

```
Extension-List: crypto
crypto-Extension-Name: javax.crypto 
```

在 WAR/classes/META-INF/MANIFEST.MF 中

通常在战争文件中，META-INF 位于战争的根目录中，如

```
WAR
├── WEB-INF
│   └── classes
└── META-INF   
    └── MANIFEST.MF 
```

以下似乎适用于 jboss 7.1.1 上的 liferay 6.1

```
WAR
└── WEB-INF
    └── classes
         └── META-INF
              └── MANIFEST.MF 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-06T03:04:30.627

它可以在 Jboss 7 中工作，只需指向 jar，使用 jboss-deployment-strcuture.xml 或清单条目。

# c# - 使用 webclient 时如何在 OpenReadCompletedEvent 中获取 URL

> ID：12420874
> 
> 赞同：2
> 
> 时间：2012-09-14T08:39:06.493
> 
> 标签：c#, .net, windows-phone-7, webclient

使用 webclient 时如何获取 OpenReadCompletedEvent 中的 URL。

```
 WebClient webClient = new WebClient();
 webClient.OpenReadAsync(url);       // in event method I want get this url       
 webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(CardInfoDown_Completed);   

 private void CardInfoDown_Completed(object sender, OpenReadCompletedEventArgs e)
    {
        if (e.Error == null)
        {           
            using (System.IO.StreamReader reader = new System.IO.StreamReader(e.Result))
            {
                // I want get the url here,
                // How to do this?
                string strStream = reader.ReadToEnd();              
            }
        }          
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:55:19.143

```
 WebClient webClient = new WebClient();
    webClient.BaseAddress = "http://hhh.com";
    webClient.OpenReadAsync(new Uri("http://hhh.com"));       // in event method I want get this url       
    webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(CardInfoDown_Completed); 
```

和：

```
private void CardInfoDown_Completed(object sender, OpenReadCompletedEventArgs e)
{
    if (e.Error == null)
    {
        using (System.IO.StreamReader reader = new System.IO.StreamReader(e.Result))
        {
            // I want get the url here,
            // How to do this?
            var client = sender as WebClient;
            if (client != null)
            {
                var url = client.BaseAddress; //returns hhh.com
            }
            string strStream = reader.ReadToEnd();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T11:52:34.517

Anton Sizikov 的解决方案很好，但仅当 URL 是绝对的（如`http://hhh.com`）时才有效。如果使用相对 URL，.NET 将自动将基地址与相对 URL 合并（因此可能会导致无效的 URL）。

要将值发送到`OpenReadCompleted`事件处理程序，您应该使用此`OpenRead`重载来提供自定义令牌（在本例中为您的 URL）：http: [//msdn.microsoft.com/en-us/library/ms144212 (v =vs.95).aspx](http://msdn.microsoft.com/en-us/library/ms144212(v=vs.95).aspx)

```
WebClient webClient = new WebClient();
webClient.OpenReadAsync(new Uri("http://hhh.com"), "http://hhh.com");
webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(CardInfoDown_Completed); 
```

然后检索值：

```
private void CardInfoDown_Completed(object sender, OpenReadCompletedEventArgs e)
{
    if (e.Error == null)
    {
        using (System.IO.StreamReader reader = new System.IO.StreamReader(e.Result))
        {
            var url = (string)e.UserState;
            string strStream = reader.ReadToEnd();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-30T17:47:46.080

对我来说，即使是上述更简单的变化也可以正常工作

```
 private void CardInfoDown_Completed(object sender, DownloadStringCompletedEventArgs e)
    {
        string url;

        if (e.Error == null)
        {
            url  = (string)e.UserState;
        }
       // ...
    } 
```

# html - 未捕获的类型错误：无法调用 null 的方法“toDataURL”

> ID：12420875
> 
> 赞同：1
> 
> 时间：2012-09-14T08:39:15.327
> 
> 标签：html, canvas, save, image

我在尝试保存使用 html2canvas 生成的图像时遇到了此错误消息。

所以我写了这段代码：

```
<div id"mycanvas">
    <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
    <div id="container2" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
    <div id="container3" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
</div>

 </page> 

<script type="text/javascript">
var canvas = document.getElementById("mycanvas");
var img    = canvas.toDataURL("image/png");
document.write('<img src="'+img+'"/>');
    </script> 
```

即使渲染的图像在缓存中并且使用 html2canvas 生成良好，我也不知道如何保存它。

这段代码似乎没有错，但它向我显示了这条错误消息。

所以我有点失落。

以下是错误消息：

```
Uncaught TypeError: Cannot call method 'toDataURL' of null export-graphic-stat_employee.php:241
html2canvas: Preload starts: finding background-images Core.js:18
html2canvas: Preload: Finding images Core.js:18
html2canvas: Preload: Done. Core.js:18
html2canvas: start: images: 0 / 0 (failed: 0) Core.js:18
Finished loading images: # 0 (failed: 0) Core.js:18
html2canvas: Renderer: Canvas renderer done - returning canvas obj Core.js:18
Screenshot created in 167 ms<br /> Core.js:18 
```

接受我最崇高的敬意。

亲切的问候。

SP

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:41:39.833

您在这里缺少等号；

```
<div id"mycanvas"> 
```

...这意味着你的...

```
document.getElementById("mycanvas"); 
```

将返回空值。

调用`null.toDataURL("image/png");`是给您错误消息的原因。

编辑：如果您想实际使用 toDataURL，则该方法仅适用于实际的画布元素，并且您尝试在`div`. 相反，删除 id`div`并添加；

```
<canvas id="mycanvas" width="400" height="400" > </canvas> 
```

或使用 HTML2Canvas 生成的画布中的实际画布 ID 来使用实际的画布元素。

# .net - 在 linq 中加入结果列表

> ID：12420876
> 
> 赞同：0
> 
> 时间：2012-09-14T08:39:16.570
> 
> 标签：.net, linq, linq-to-sql

我有一个 var 变量，它只有一列，我想将该列与数据库表连接起来。我的代码如下：

```
var notlinked = _client.Except(linked).ToList();
var result = (from e in iEnt.clientmasters 
              join g in notlinked on e.ClientID equals g.ClientID 
              select e).ToList(); 
```

现在 notlinked 有一个列，并且取决于我想从数据库中检索信息，所以在下一行我正在加入该表但是当我执行它时出现以下错误：

> 无法创建“匿名类型”类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

建议我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:55:29.670

我不太了解 Linq to Sql，但我想问题是你正试图在来自数据库的东西和内存中的列表之间进行连接。你应该这样做：

```
var result = 
    from e in iEnt.clientmasters 
    where notlinked.Contains(e.ClientID)
    select e 
```

在这种情况下，我认为 Linq to Sql 应该能够生成 SQL IN(...) 子句。根本没有测试，但你明白了。

**编辑**

有关更多背景，请参见[此处](http://wekeroad.com/2008/02/27/creating-in-queries-with-linq-to-sql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:33:31.760

这是查找内容的示例应用程序。我拿了两个列表客户，另一个是 int 列表。

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args) {

            List customers=new List();
            customers.Add(new Customer(1,"Jalpesh"));
            customers.Add(new Customer(2, "Kaushal"));
            customers.Add(new Customer(3, "Mahesh"));

            List intList=new List{1,2};

            var customerList = customers.Where(c => intList.Contains(c.Id));

        }

    }

    public class Customer
    {
        public int Id { get; set; }
        public string Name { get; set; }

        public Customer(int id,string name) {
            Id = id;
            Name = name;
        }
    }
} 

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:57:18.063

您可以跳过连接，而只是从 LINQ 编写自己的输出

```
var notlinked = _client.Except(linked).ToList();
var result = (from e in iEnt.clientmasters 
              from g in notlinked 
              where e.ClientID == g.ClientID 
              select new 
              {
                  Colomn1 = e.firstColomn
                  Colomn2 = g.secondColomn
              }).ToList(); 
```

这不是最优雅的方式，但当其他所有想法都失败时，我倾向于这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T16:02:41.287

使用`List<int> notlinked`而不是`var notlinked`. 而是加入使用 WHERE 子句并检查`notlinked`包含`e.ClientID`

```
List<int> notlinked = _client.Except(linked).Select(o => o.ClientID).ToList<int>();
var result = (from e in iEnt.clientmasters 
              where notlinked.Contains(e.ClientID)
              select e).ToList(); 
```

# java - 如何获取调用 JPopupMenu 的组件？

> ID：12420878
> 
> 赞同：8
> 
> 时间：2012-09-14T08:39:23.483
> 
> 标签：java, swing, jtable, jpopupmenu

我有一个添加到多个 JTable 的 JPopUpMenu，我想获得右键单击的特定表，以便对其进行更改。如何在 Action Listener 中获取触发 JPopupMenu 的组件？

```
JPopupMenu popupMenu = new JPopupMenu();
JMenuItem menuItemRename = new JMenuItem("Rename");
popupMenu.add(menuItemRename);
table.getTableHeader().setComponentPopupMenu(popupMenu);

ActionListener menuListener = new ActionListener() {
    public void actionPerformed(ActionEvent event) {
           String newTitle = JOptionPane.showInputDialog(null, "Enter new title");
                   //Get the table and rename it here 
                }
            };
menuItemRename.addActionListener(menuListener); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T08:43:15.120

使用`getInvoker()`方法。

```
Component invoker = popupMenu.getInvoker(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:50:46.023

使用`event.getSource()`方法；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-11T23:05:42.010

FWIW，

```
// ActionEvent e
((JPopupMenu)((JMenuItem)e.getSource()).getParent()).getInvoker() 
```

我的天啊...

# c# - 如何从后面的代码向 AJAX 返回值？

> ID：12420879
> 
> 赞同：-1
> 
> 时间：2012-09-14T08:39:28.043
> 
> 标签：c#, asp.net, ajax, json

> **可能的重复：**
> [如何将值从后面的代码返回到 AJAX？](https://stackoverflow.com/questions/12420565/how-to-return-value-from-code-behind-to-ajax)

这是我的 AJAX 代码

```
$.ajax({
        type: 'POST',
        url: 'country_management.aspx/save',
        cache: false,
        data: "{'parameter':'paramValue'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
                 alert(data.d);
                 if (data.d == "error") {
                    $('.success_box').hide();
                    $('.error_box').show();
                 }
                 else {
                    $('#name').val('');
                    $('.error_box').hide();
                    $('.success_box').show();
                 }
        }
}); 
```

代码背后：

```
[WebMethod]
[ScriptMethod]
public static string save(string parameter)
{
    string name = HttpContext.Current.Request.QueryString["name"].Trim();
    return "error";
} 
```

写完第一行后，return 语句不会向 AJAX 返回任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:44:52.407

因为您没有发布任何字段或属性“名称”如果您在单击表单内的按钮后执行 ajax，数据将被序列化表单。

另一件事是，你为什么要在查询字符串中期待“name” var，我没有看到任何带有 aspx?name="any name" 的 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:53:08.930

在不了解整个应用程序的上下文的情况下很难回答您的问题。（名称是否从应用程序的其他地方提供，您可以使用会话吗？）

但是是什么阻止您在 ajax 调用中传递名称？而不是仅仅通过'parameter':'paramValue'发送。

您必须记住您的查询字符串应该包含您要查找的参数。目前它看起来像。

[http://www.somesite.com/country_management.aspx/save?parameter=paramValue](http://www.somesite.com/country_management.aspx/save?parameter=paramValue)

当你真正需要时

**例如**

[http://www.somesite.com/country_management.aspx/save?parameter=paramValue&name=newName](http://www.somesite.com/country_management.aspx/save?parameter=paramValue&name=newName)

**Javascript**

```
$.ajax({
        type: 'POST',
        url: 'country_management.aspx/save',
        data: { parameter:'paramValue', name: 'newName'},
        success: function (data) { 
           //do something with the response
        }         

}); 
```

**代码隐藏**

```
[WebMethod]
[ScriptMethod]
public static string save(string parameter, string name)
{
    PerformSave(name, parameter);
    return "Data Saved!";
} 
```

**提示**

试试这个应用程序。[提琴手](http://www.fiddler2.com/fiddler2/)。当您使用 ajax 调用等时，它非常有用。实际上是任何 Web 开发。:)

# android - 可以添加 "\u200e" unicode 的字体

> ID：12420880
> 
> 赞同：-1
> 
> 时间：2012-09-14T08:39:36.140
> 
> 标签：android, android-layout, fonts

我需要一种字体，它允许添加“\u200e”而不显示任何奇怪的字符，并且只会将文本从左到右反转。

例如：“\u200e00.1\u200e גירסא”

将显示：“גירסא 1.00”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:23:15.487

在字体中包含 U+200E（从左到右标记）和/或在文本中使用该字符没有任何作用，除非渲染文本的引擎/应用程序理解该标记的含义并正确应用它（即实现[Unicode 双向算法](http://unicode.org/reports/tr9/)）。

# java - 在运行测试方法之前必须调用一次 IMethodInterceptor 还是什么？

> ID：12420885
> 
> 赞同：0
> 
> 时间：2012-09-14T08:39:53.293
> 
> 标签：java, testng

据我了解，方法拦截器可用于按优先级构建正在运行的方法列表。但是在我的项目中，方法拦截器为每个测试类的测试方法运行。

例如，有两个类被放入方法 setTestClasses。第一类有 3 种测试方法（具有相似的优先级）。在第二个中有一个（具有最高优先级）。在这种情况下，优先级最高的方法将最晚运行，因为方法拦截器将首先针对第一类的 3 个方法运行，然后针对第二类的方法运行。这是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:09:41.913

它是什么方法拦截器，它通过 List 给出方法列表。在方法拦截器的拦截方法中，您可以重新排序列表并返回 List 对象。因此，在执行中，Testng 将使用您修改后的列表。代替原来的列表输入拦截方法。那就是testng中方法拦截器的使用。它不处理这个级别的优先级。当然，您可以使用 methodinterceptor 通过实现方法拦截器将测试列表重新排序为优先级。

请参阅下面的示例代码进行说明。

```
public class methodSortingListner implements IMethodInterceptor {
public List<IMethodInstance> intercept(List<IMethodInstance> methods, ITestContext context) {
    List<IMethodInstance> result = new ArrayList<IMethodInstance>();
    for (IMethodInstance method : methods) {
          if(<your logic here>)
          {
             result.add(method);
          }
    }

 return result;

} 
```

这将给出一个适合您的逻辑的列表，并将由 testng 执行

谢谢你，达沙那。

# silverlight - Datagrid 中 HeaderColumn 中的样式

> ID：12420886
> 
> 赞同：0
> 
> 时间：2012-09-14T08:39:54.043
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0

请看下面这张我的数据网格的图片。

![在此处输入图像描述](../Images/9072cc1b6be65d082bc17d5d17e8c4a8.png) 现在想要在 headerColumn 中有一个边框。我尝试过列标题样式，但它对我不起作用。我想要以下样式的数据网格标题。请参见下图。 ![在此处输入图像描述](../Images/fe455c4b5d0b6421112fe754e58a98b0.png) 我如何在 datagird 中实现这种风格。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:50:13.763

您必须更改 DataGrid 模板，而不是列标题。在默认的 DataGrid 模板中有：

```
<sdk:DataGridColumnHeadersPresenter x:Name="ColumnHeadersPresenter" Grid.Column="1"/> 
```

我想你必须在那里编辑。

# typo3 - 打字稿：父元素中的 HMENU 渲染子菜单

> ID：12420888
> 
> 赞同：0
> 
> 时间：2012-09-14T08:40:05.650
> 
> 标签：typo3, typoscript

默认情况下，第二级 HMENU 在第一个元素之后呈现。

```
 foo = HMENU
 foo {
      1 = TMENU
      1.noBlur = 1
      1.NO = 1
      1.NO.expAll = 1
      1.NO.wrap = <li class="second">|</li>

      2 = TMENU
      2.noBlur = 1
      2.NO = 1
      2.NO.wrap = <li class="second">|</li>
 } 
```

默认 HTML：

```
<li><a href="#">firstlevel 1</a></li>
<li class="second"><a href="#">secondlevel 1</a></li>
<li><a href="#">firstlevel 2</a></li> 
```

但我想要的是：

```
<li>
    <a href="#">firstlevel 1</a>
    <li class="second"><a href="#">secondlevel 1</a></li>
</li>
<li><a href="#">firstlevel 2</a></li> 
```

即第二层在第一层内呈现*，*而不是在它之后。任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T09:23:31.017

你需要使用：

```
1.NO.wrapItemAndSub 
```

代替：

```
1.NO.wrap 
```

但是您的菜单中缺少`<ul>`。它不会验证。

正确的菜单应该是这样的：

```
foo = HMENU
foo {
      1 = TMENU
      1.wrap = <ul class="first">|</ul>
      1.noBlur = 1
      1.expAll = 1 
      1.NO.wrapItemAndSub = <li>|</li>

      2 < .1
      2.wrap = <ul class="second">|</ul>

 } 
```

编辑：将 expAll 从“1.NO”移动到“1”

# c# - 如何在 C# 中删除名称中包含数字部分的 XML 元素

> ID：12420893
> 
> 赞同：-1
> 
> 时间：2012-09-14T08:40:32.910
> 
> 标签：c#, xml, xslt

像这样的元素 < **A313** >1 粗体需要删除，其中标签名称可能是 A313、A312、pa123 等。

输入是这样的

```
 <para>
text........
</para>
   <A1234>
 </A1234>
 <para-numbar>
  this contain some information
  </para-number>
  <A141>
  </A141> 
```

输出是

```
<para>
      text........
 </para>

   <para-numbar>
   this contain some information
   </para-number> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:36:16.623

**就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*[not(name() = translate(name(),'0123456789',''))]"/>
</xsl:stylesheet> 
```

**当将此转换应用于文档时，某些元素名称中包含数字，如下所示**：

```
<nums>
  <num>01</num>
  <num>02</num>
  <A314>xxx</A314>
  <b>
    <c221/>
  </b>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**产生了想要的正确结果，在这种情况下是**：

```
<nums>
   <num>01</num>
   <num>02</num>
   <b/>
   <num>03</num>
   <num>04</num>
   <num>05</num>
   <num>06</num>
   <num>07</num>
   <num>08</num>
   <num>09</num>
   <num>10</num>
</nums> 
```

**说明**：

正确使用：

1.  **[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**及其覆盖。

2.  标准 XPath**[`translate()`](http://www.w3.org/TR/xpath/#function-translate)**函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:55:33.370

此方法定义字符串是否包含数字：

```
public static class Extensions
{
    public static bool HasNumbers(this string s)
    {
        foreach (char c in s)
        {
            if (char.IsDigit(c))
            {
                return true;
            }
        }

        return false;
    }
} 
```

并从列表中删除带有数字的元素：

```
List<string> list;
list.RemoveAll(str => str.HasNumbers()); 
```

# c# - SPUtility.SendEmail 从地址

> ID：12420895
> 
> 赞同：1
> 
> 时间：2012-09-14T08:40:45.820
> 
> 标签：c#, email, sharepoint-2010, smtp

此方法是否查看 Web.CurrentUser 属性以派生“发件人”地址，还是会使用某种 SharePoint 默认系统电子邮件地址？我看不到文档中提到的任何内容：

[http://msdn.microsoft.com/en-us/library/ms477270.aspx](http://msdn.microsoft.com/en-us/library/ms477270.aspx)

我知道如何通过自己“手动”检索此信息并添加标题来明确设置它 - 但我不知道这是否只是不必要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T12:17:22.217

您有权访问中央管理员吗？

如果您这样做，我相信它将发送的电子邮件将是在系统设置 -> 电子邮件和短信 -> 外发电子邮件设置下的中央管理中设置的电子邮件。

不要强迫我这样做，但它可能是错误的

# android - android 未被识别为内部或外部命令

> ID：12420896
> 
> 赞同：0
> 
> 时间：2012-09-14T08:40:48.677
> 
> 标签：android, windows, ant, command-line

所以我在这个问题上和这个人有同样的问题

[android' 未被识别为内部或外部命令](https://stackoverflow.com/questions/11350692/android-is-not-recognized-as-an-internal-or-external-command#comment14948920_11350726)

但是当我更改我的 PATH 变量并添加到 android.bat 的路径时，我的 cmd 仍然给出

```
'android' is not recognized as an internal or external command,
operable program or batch file. 
```

我的 PATH 看起来像这样

```
D:\Program Files\Java\jdk1.7.0_04\bin;D:\BossGrand\Programing\Ant\apache-ant-1.8.4\bin;C:\Program Files\TortoiseSVN\bin;D:\Program Files\Android\tools 
```

我确保 android.bat 在 D:\Program Files\Android\tools

我知道这一点，因为当我转到这个目录时，我可以很好地使用 android update project 命令

有谁知道为什么我仍然不能使用 android 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-06T08:41:08.267

将命令提示符与管理员一起使用。它对我有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T16:19:14.557

您可能已将 Cygwin 作为 SDK 的一部分安装。我有同样的问题“android.bat 不被识别为内部或外部命令”。因此，卸载 Cygwin 并重试（您可能无法卸载 Cygwin，因为默认情况下删除 Cygwin 文件时会出现神秘的“权限被拒绝”）。您需要拥有对这个神秘的 Cygwin 文件的访问权限，方法是

取得所有权： takeown /r /dy /f cygwin （执行此操作，无论您的 cygwin 文件夹在哪里）

此命令以递归方式获取文件夹的所有权，无需询问任何内容，并在文件夹中递归地授予每个人的完全访问权限：

icacls cygwin /t /grant Everyone:F 最后，将其全部删除并删除 Cygwin 的命令：

rmdir /s /q cygwin 再见 Cygwin！

现在再试一次。（这对我有用）

PS：您可以随时重新安装cygwin。所以，试一试没有错。祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-09T12:49:59.303

您必须输入带有完整参数的命令

```
android update project -p . 
```

请注意，您必须在命令末尾输入一个点。

# asp.net-mvc-3 - 来自 nhibernate 中的 DLL 的 GenrateSchema

> ID：12420897
> 
> 赞同：0
> 
> 时间：2012-09-14T08:40:50.423
> 
> 标签：asp.net-mvc-3, nhibernate, nhibernate-mapping

我有一个 ASP.NET MVC 和 Nhibernate 项目的 DLL，它有一些模型和映射。在我的项目中，我参考了那个 DLL。现在我希望当我运行 Nhibernate 项目时，DLL 中存在的模型的 GenrateSchema 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:13:22.113

从您的 NHibernate 配置中，您可以创建一个新的 SchemaExport 对象并在其上调用 Create

例如：

```
var cfg = BuildNHibernateConfiguration();
new SchemaExport(cfg).Create(true,true); 
```

# regex - 验证字符串仅包含字母

> ID：12420898
> 
> 赞同：3
> 
> 时间：2012-09-14T08:41:01.110
> 
> 标签：regex, abap, matcher

我有一个输入字段，它应该只接受字母（不管是小写还是大写）。我可以简单地通过使用 co ca (contains only/any) 运算符来编写这个。但这很耗时。

```
 if p_input3 ca '*/ + - ? ! % ( ) = 0123456789'.
    MESSAGE e000 WITH 'Only letters are allowed. No numbers or special characters'.
  ENDIF. 
```

有用。但我想用正则表达式检查它。我试过这段代码。但它不太好用。

```
DATA: text TYPE string,
      matcher type REF TO cl_abap_matcher.

PARAMETERS: p_input3 TYPE string DEFAULT 'abCD*()fhi' LOWER CASE.

matcher = cl_abap_matcher=>create(
   pattern = `([a-zA-Z])`
    text = p_input3
  ).

  if matcher = abap_true.
    MESSAGE e000 with 'Only letters are allowed. No numbers or special characters'.
  ENDIF. 
```

有人能弄清楚吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T09:10:17.703

首先，您的正则表达式不起作用。只有当您的输入仅包含一个字母时才会成功。

这将正常工作：

```
'[a-zA-Z]*' 
```

`+`并且`*`意味着重复。这意味着属于上述类别的任意数量的字符链。不同之处在于 * 也可以表示 0 次，而 + 表示至少一次。所以空字符串会匹配`[a-z]*`但不匹配`[a-z]+`

然后，您正在检查对匹配器对象本身的引用是否等于 abap_true。这永远不会发生，因为它将始终是对匹配器对象的引用，而不是 abap_true 或 abap_false。

要获得匹配结果，您不仅要创建匹配器，还要通过调用其匹配方法实际运行它。

```
IF matcher->match( ) = abap_false.
    MESSAGE e000 with 'Only letters are allowed. No numbers or special characters'.      
ENDIF. 
```

但是还有一种更简单的方法可以使用`FIND REGEX`命令而不是类 cl_abap_matcher 来执行此操作：

```
FIND FIRST OCCURRENCE OF REGEX '[^a-zA-Z]' IN p_input3.
IF sy-subrc = 0.
    MESSAGE 'There is some non-letter in your input.' TYPE 'E'.
ENDIF. 
```

`^`表示否定。所以`[^a-zA-Z]`表示不在给定范围内的任何字符。

# c++ - 什么是让 C++ 和 WPF 应用程序进行通信的好方法

> ID：12420902
> 
> 赞同：0
> 
> 时间：2012-09-14T08:41:19.023
> 
> 标签：c++, wpf, ipc

我有一个 C++ dll，它是 ADOBE Acrobat 的插件。它需要经常（来回）和 WPF 进程使用大量复杂的数据结构进行交谈。
关于什么可能是最好的方法的任何想法。需要一些长期且可维护的东西，换句话说，我会喜欢一些想法，这些想法可以让进程产生看起来像方法调用的东西，而一些基础设施部分则可以进行编组和调度。我已经尝试过 Windows 消息，但在 ADOBE 上遇到了一些冲突问题，也对导致 dll 让 adobe 加载 CLR 的任何事情不感兴趣。只有我想到的其他东西是命名管道或http。
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:49:53.683

命名管道可以做到，但你不会感觉到只是调用函数。命名管道是相当低级的 IPC。其他 IPC 选项包括：

*   Windows RPC，你肯定会感觉到只是调用函数。
*   在 WPF 应用程序中托管 COM 对象并从 Adob​​e 插件调用它怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:57:48.110

我会选择 COM：

*   在 WPF 应用程序中实现接口
*   生成一个类型库（例如通过使用`regasm`）
*   将 typelib 导入 C++ dll
*   交流

如果您需要双向通信，C++ dll 还可以实现一个 COM 接口，然后从 WPF 应用程序访问该接口。

这就是我用来将旧版 C++ 应用程序与新的 .NET 服务连接起来的方法，而且效果很好。最大的问题是找懂COM的人，好在这不需要对COM有深入的了解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:30:43.867

您对 COM 的提示非常有趣。我试图实现这个概念。我在我的 WPF CallDllFromWpf3Interface 项目中创建了一个接口：

```
using System.Runtime.InteropServices;

namespace CallDllFromWpf3Interface
{
  [Guid("F6E0E2E8-CCC6-487B-8BF1-261265061E6A")]
  public interface SetValueInterface
  {
    void SetValue(int value);
  }
} 
```

然后我使用 regasm 工具生成了 typelib：regasm CallDllFromWpf3Interface.exe /tlb

使用“oleview”工具，我可以看到类型库和界面。

下一步是创建一个名为“CallSetValueInterface”的 c++ dll 项目。

在我的 CallSetValueInterface.cpp 文件中，我写了以下几行：

```
#import "D:\Thomas\Programming\WPF\Basics\CallDllFromWpf\CallDllFromWpf3Interface\CallDllFromWpf3Interface\bin\Debug\CallDllFromWpf3Interface.tlb"

void
CallSetValueInterface::startAcq(void)
{
    CoInitializeEx(NULL, COINIT_APARTMENTTHREADED);
    CallDllFromWpf3Interface::SetValueInterfacePtr Svip("f6e0e2e8-ccc6-487b-8bf1-261265061e6a");
    Svip->SetValue(55);
    Svip = NULL;
    CoUninitialize();
} 
```

成功构建 dll 项目后，我将“CallSetValueInterface.dll”复制到“CallDllFromWpf3Interface”项目中。

最后，我将 WPF 代码更改为：

```
#region SetValueInterface Members

public void SetValue(int value)
{
  MyValue = value;
}

#endregion

[DllImport("CallSetValueInterface.dll", EntryPoint = "startAcq", ExactSpelling = true, SetLastError = true)]
public static extern void StartAcqFromDll();

private void Button_Click(object sender, RoutedEventArgs e)
{
  StartAcqFromDll();
} 
```

当调试器来到 StartAcqFromDll() 时，出现了一个错误对话框“CallDllFromWpf3Interface.exe 中发生了类型为 'System.Runtime.InteropServices.SEHException' 的未处理异常”。

有人知道出了什么问题吗？

问候，

托马斯·L。

# java - 如何在同一个 JSP 中一次又一次地重复下拉列表？

> ID：12420905
> 
> 赞同：-1
> 
> 时间：2012-09-14T08:41:20.797
> 
> 标签：java, javascript, jquery, jsp

假设在下拉列表中选择了一个值，然后在选择下拉列表中的值之后，相同的下拉列表在同一个 JSP 页面中再次重新生成（作为前一个下拉列表）。

怎么可能？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:16:45.037

很难做到这一点 [http://jsfiddle.net/daWd9/](http://jsfiddle.net/daWd9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:35:10.220

StackOverflow 中记录了两个使用 AJAX 技术的解决方案

[如何在下拉更改事件中调用 AJAX 请求？](https://stackoverflow.com/questions/3429176/how-to-call-ajax-request-on-dropdown-change-event)

[如何在下拉更改事件中调用 AJAX 请求？](https://stackoverflow.com/questions/3429176/how-to-call-ajax-request-on-dropdown-change-event)

请看上面的内容会对你有所帮助。

顺便说一句，我不明白你为什么需要

> 在同一个 JSP 页面中再次重新生成（作为先前的下拉列表）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:52:09.050

假设您的源下拉列表 id 是“list1”。通过使用 document.getElementById('list1') 您将获得该元素的详细信息。然后使用 document.createElement 创建一个新的下拉列表并从现有的一个 document.getElementById('list1') 中获取属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:10:57.310

我想，您必须从相同的选项中选择多个值。我会使用 jQuery UI 来完成它。请点击演示链接[http://jqueryui.com/demos/autocomplete/#multiple](http://jqueryui.com/demos/autocomplete/#multiple)。

1.  打开链接。

2.  开始在文本框中输入，选项将自动填充。

3.  您可以选择一个，然后再次开始输入。

在我看来，这将是一个很好的用户友好型解决方案。

希望能帮助到你。

# javascript - 单击使用 jQuery 选择/取消选择文本

> ID：12420910
> 
> 赞同：1
> 
> 时间：2012-09-14T08:41:33.050
> 
> 标签：javascript, jquery, internet-explorer

我想在 IE9 中创建以下行为：

单击文本框将从文本框中选择文本。再次单击它将取消选择文本。

[我从这个链接尝试了以下内容：http: //www.codingforums.com/showthread.php?](http://www.codingforums.com/showthread.php?t=105530) t= 105530

```
var x = 2;

function selectIt(obj)
{
    if (x % 2 == 0)
    {
        obj.select();
    }
    else
    {
        if (document.selection)
        {
            document.selection.empty();
            obj.blur();
        }
        else
        {
            window.getSelection().removeAllRanges();
        }
    }
    obj.focus();
    x++;
} 
```

我也用过这个：http: [//jsfiddle.net/HmQxZ/1/](http://jsfiddle.net/HmQxZ/1/)

但是上述解决方案在应用于多个文本框时会出现奇怪的行为。解决此类问题的最佳方法是什么。是否可以在不使用全局变量的情况下做到这一点？

**更新：**

小提琴在 Chrome 中工作。但它在 IE9 中不起作用。在 IE9 中，文本被选中，但是当您再次单击文本框时，文本不会被取消选中/未突出显示。在 Chrome 中，第二次单击会取消选择/取消突出显示文本。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T08:45:24.927

几个文本框的问题是您的`x`变量是全局的。每个文本框都需要一个单独的`x`变量。

您可以使用地图：

```
var x = {};

function selectIt(obj)
{
    var key = ... <-- get name (or id) of textbox from obj somehow to use as key in map
    if (!x.hasOwnProperty(key)) x[key] = 0;
    if (x[key] % 2 == 0)
    {
        obj.select();
    }
    else
    {
        if (document.selection)
        {
            document.selection.empty();
            obj.blur();
        }
        else
        {
            window.getSelection().removeAllRanges();
        }
    }
    obj.focus();
    x[key]++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:49:16.960

这在 Chrome 中适用于我 - jQuery 中有一个[切换事件](http://api.jquery.com/toggle-event/)功能，但在这种情况下不需要

```
$('input').click(function() {
 // the select() function on the DOM element will do what you want
 this.select();
}); 
```

但我建议你告诉脚本你要选择哪些类型的字段

```
$("input[type=text], input[type=url]").click(function() {
  $(this).select(); // "this" is native JS 
}); 
```

​<a href="http://jsfiddle.net/mplungjan/fU83Y/" rel="nofollow">演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:56:19.783

[试试这个演示](http://jsbin.com/welcome/22843/edit)

演示 jQuery：

```
$(function(){
    $("input[type='Text']").on("click",function(){
     if (typeof this.selectionStart == "number") 
         this.select();
    });
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T09:41:10.533

这是您的完整解决方案。

**演示** [http://codebins.com/bin/4ldqp79](http://codebins.com/bin/4ldqp79)

**HTML**

```
<div id="panel">
  <input type="text" value="Click Me to Select Text" />
  <input type="text" value="Click Me to Select Text" />
  <input type="text" value="Click Me to Select Text" />
  <input type="text" value="Click Me to Select Text" />
  <input type="text" value="Click Me to Select Text" />
  <input type="text" value="Click Me to Select Text" />
</div> 
```

**jQuery**

```
$(function() {
    $("#panel input[type=text]").click(function() {
        $(this).select();
    });
}); 
```

**CSS**

```
input{
  display:block;
  border:1px solid #333;
  background:#efefef;
  margin-top:15px;
  padding:3px;
} 
```

**演示** [http://codebins.com/bin/4ldqp79](http://codebins.com/bin/4ldqp79)

# clearcase - 如何在 ClearCase 中查找特定的文件版本？

> ID：12420911
> 
> 赞同：1
> 
> 时间：2012-09-14T08:41:35.633
> 
> 标签：clearcase

有没有我提供基线名称和元素文件名的命令，它返回由该基线标记的确切文件版本？

例如：

```
baseline name: 7.5.3.1
element filename: a.java 
```

结果：

```
/main/mystream/16 
```

我的问题是关于 UCM，你不能在版本之间移动基线......

如果没有这样的命令，看来我必须写一个简短的脚本。在这种情况下，我可能必须运行`cleartool lsvtree`然后解析输出 - 对吗？这是最快的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:55:22.173

您可以通过查看该文件版本上的标签来查询确切的版本。
但这只有在基线是**完整**基线时才有效（这意味着它在与所述基线关联的组件的每个文件部分上设置了一个以基线命名的标签）。
请参阅“ [Clearcase UCM 中的完整基线和增量基线有什么区别？](https://stackoverflow.com/questions/9696598/what-is-the-difference-between-full-baseline-and-incremental-baseline-in-clearca/9696988#9696988) ”。

如果是这种情况，那么您可以使用`cleartool find`命令查看确切的版本，例如“[如何按标签搜索文件](https://stackoverflow.com/questions/2220622/how-to-search-files-by-label/2221254#2221254)”。
IBM 技术说明“[如何确定标签从哪个元素版本移动](http://www-01.ibm.com/support/docview.wss?uid=swg21500878)”中描述了其他机制。

# php - php 网站同时带有 node.js 守护进程

> ID：12420914
> 
> 赞同：0
> 
> 时间：2012-09-14T08:41:39.553
> 
> 标签：php, node.js, socket.io

我正在用 PHP（静态、预处理页面和所有 PHP 风格）创建网站，但是，

我想通过使用带有 Socket.IO 的 Node.JS 添加一些实时功能，例如通知功能。

所以它基本上是一个 PHP 网站，但有一个 Node.js 守护进程，它通过 socket.io 推送一些数据。

我玩了一下，老实说，这似乎一点也不难。

这更像是一种好奇心，但您认为通过在客户端添加 Socket.IO javascript 来监听服务器端通知，将它们组合在一起可能是一个很好的组合吗？

提前致谢。

* * *

另外，我注意到，当我在服务器上需要 socket.io 时，它也会将脚本放在客户端。由于我不会使用节点来提供页面，我想脚本不会包含在页面中。有没有办法手动包含它？

对不起我的英语，我不是本地人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:19:36.357

如果您不需要节点来提供页面，您可以只包含 socket.io 并连接到套接字服务器。

在您的客户端中，添加：

```
<script src="[server address]:[server port]/socket.io/socket.io.js"></script> 
```

接着：

```
var socket = io.connect([server address]:[server port]); 
```

# php - 在数组中使用变量

> ID：12420915
> 
> 赞同：4
> 
> 时间：2012-09-14T08:41:44.983
> 
> 标签：php

我借用了漂亮*[的 Cokidoo DateTime](http://www.php.net/manual/en/function.time.php#105257)*类，它将常规 DateTime 转换为“以前的格式”。

我正在开发多语言网站并想用变量替换`year ago`, `years ago`, 。`month ago`

### 代码示例：

```
protected $strings = array(
        'y' => array('1 year ago', '%d years ago'),
        'm' => array('1 month ago', '%d months ago'),
        'd' => array('1 day ago', '%d days ago'),
        'h' => array('1 hour ago', '%d hours ago'),
        'i' => array('1 minute ago', '%d minutes ago'),
        's' => array('now', '%d secons ago'),
    ); 
```

这是否可以在不使用替换方法的情况下做到这一点？

显然这不起作用：

`'m' => array('1' . $month_ago, '%d' . $months_ago),`

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:48:47.493

如果该类不扩展，它会更有用`DateTime`。它唯一做的就是*格式化*日期，它根本没有理由*成为*日期。它可以很容易地创建一个`DateTime`按需并在其上工作，而不是`$this`.

如果您进行此修改（并将类适当地重命名为 eg `DateTimeDiffFormatter`），那么突然所有可能性都打开了：您可以将参数传递给确定要使用的语言的构造函数，或者甚至更好地传递对您的 i18n 组件的一些引用。然后例如你可以有

```
// I have no idea why this was protected, and probably the class author did not as well
private $strings = array(
    'y' => array('years_ago_1', 'years_ago_n'),
    // etc etc
); 
```

和

```
return sprintf($localizer->get_string($this->strings[$intervalKey][$pluralKey]),
               $value); 
```

最后，假设您可以将本地化字符串的格式硬编码为“X 分钟前”等，这是一个非常糟糕的主意。该数字需要成为格式字符串的一部分，因为在许多文化中它不在“多久以前”部分之前。

### 更新

我调整了 Ilia 的候选解决方案，使其符合上述建议；结果就[在这里](http://codepad.viper-7.com/AZHyQs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:48:42.607

您在不需要它们的地方有撇号。

您是否追求：

```
 $month_ago = 'month ago';
 $months_ago = 'months ago';

//Further on within the array
'm' -> array('1 '.$month_ago, '%d '.$months_ago); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:35:01.727

根据建议的想法，我终于想出了一个可行的多语言解决方案来返回时差。

请对我温柔一点，因为我是面向对象风格编程的完全初学者，这实际上是我的第一个任务。如果您留下评论或建议的想法，我会非常高兴。

特别感谢乔恩，我很抱歉我不能体现你所有的想法。我接受你的回答，因为它有很好的建议和解释！

### 描述

1.  在我的数据库中，我有一个`added_time`字段，它指的是每个上传的 Unix 时间戳格式的视频的创建时间，例如`1345284190`.
    这个时间戳被传递给构造函数，比如 `new creationTime( '@' . $timestamp)`；

2.  我有一个特殊的功能，可以循环播放每个视频并插入
    例如：视频是在*27 天前*添加的。

我终于通过使用 Cokidoo 在[PHP Time Manual](http://www.php.net/manual/en/function.time.php#105257)上提供的一个漂亮的例子来实现这一点，并添加了对多语言网站的支持，用从语言文件派生的任何文本替换`years ago`、`months ago`等。`days ago`

### 调整

1.  我已将用英语编写的初始值（即： *一年前*、*一个月前*、*一天前*等）（以便能够在多语言网站中使用它们）更改为可以轻松处理的内容，例如: `year_ago`, `month_ago`,`day_ago`等等。

2.  然后我分解了`$value`返回输出的初始变量，例如：*1 year ago*，*1 month ago*，*1 day ago*并按照建议使用作为回报`sprintf`。

3.  最后我添加`getLocalized`了将这个类与我的语言文件连接起来的函数。

这是不引发警告的最终和工作代码（警告已启用；*PHP 版本 5.4.6*）。
我已将类名重命名`Cokidoo_DateTime`为`creationTime`：

```
class creationTime extends DateTime {

    private $strings = array(
        'y' => array('1 year_ago', '%d years_ago'),
        'm' => array('1 month_ago', '%d months_ago'),
        'd' => array('1 day_ago', '%d days_ago'),
        'h' => array('1 hour_ago', '%d hours_ago'),
        'i' => array('1 minute_ago', '%d minutes_ago'),
        's' => array('just_now', '%d seconds_ago'),
    );

   private function getLocalized($string) {

        global $lang;

        $string == 'year_ago' ? $string = $lang['global.year_ago'] : null;
        $string == 'years_ago' ? $string = $lang['global.years_ago'] : null;
        $string == 'month_ago' ? $string = $lang['global.month_ago'] : null;
        $string == 'months_ago' ? $string = $lang['global.months_ago'] : null;
        $string == 'day_ago' ? $string = $lang['global.day_ago'] : null;
        $string == 'days_ago' ? $string = $lang['global.days_ago'] : null;
        $string == 'hour_ago' ? $string = $lang['global.hour_ago'] : null;
        $string == 'hours_ago' ? $string = $lang['global.hours_ago'] : null;
        $string == 'hour_ago' ? $string = $lang['global.hour_ago'] : null;
        $string == 'hours_ago' ? $string = $lang['global.hours_ago'] : null;
        $string == 'minute_ago' ? $string = $lang['global.minute_ago'] : null;
        $string == 'minutes_ago' ? $string = $lang['global.minutes_ago'] : null;
        $string == 'just_now' ? $string = $lang['global.just_now'] : null;
        $string == 'seconds_ago' ? $string = $lang['global.seconds_ago'] : null;

        return $string;
    }

    /**
     * Returns the difference from the current time in the format X time ago
     * @return string
     */

   public function __toString() {
        $now = new DateTime('now');
        $diff = $this->diff($now);
        foreach($this->strings as $key => $value){
            if( ($text = $this->getDiffText($key, $diff)) ){
                return $text;
            }
        }
        return '';
    }

    /**
     * Try to construct the time diff text with the specified interval key
     * @param string $intervalKey A value of: [y,m,d,h,i,s]
     * @param DateInterval $diff
     * @return string|null
     */
    protected function getDiffText($intervalKey, $diff){
        $pluralKey = 1;
        $value = $diff->$intervalKey;
        if($value > 0){
            if($value < 2){
                $pluralKey = 0;
            }
            $value = explode(' ', sprintf($this->strings[$intervalKey][$pluralKey], $value) );          
            return sprintf('%d %s', implode(array_slice($value, 0)), $this->getLocalized(implode(array_slice($value, 1))));
        }
        return null;
    }
} 
```

### 已编辑

这个绝妙的解决方案虽然做同样的事情，但具有更好的格式和结构（由*[Jon](https://stackoverflow.com/users/50079/jon)*提供）。

```
class DateFormatter {
    private $localizer;

    private $strings = array(
        'y' => array('global.years_ago_1', 'global.years_ago_n'),
        'm' => array('global.months_ago_1', 'global.months_ago_n'),
        'd' => array('global.days_ago_1', 'global.days_ago_n'),
        'h' => array('global.hours_ago_1', 'global.hours_ago_n'),
        'i' => array('global.minutes_ago_1', 'global.minutes_ago_n'),
        's' => array('global.seconds_ago_1', 'global.seconds_ago_n'),
    );

    public function __construct(Localizer $localizer) {
        $this->localizer = $localizer;
    }

    /**
     * Returns the difference from the current time in the format X time ago
     * @return string
     */
    public function formatHowLongAgo(DateTime $date) {
        $now = new DateTime('now');
        $diff = $date->diff($now);
        foreach($this->strings as $unitOfTime => $formatStrings){
            $howMany = $diff->$unitOfTime;
            if (!$howMany) {
                continue;
            }

            $plural = $howMany > 1;
            return $this->localizer->format($this->strings[$unitOfTime][$plural], $howMany);
        }
        return '??';
    }
}

// Packaged the localization stuff inside a class so that it's not
// just hanging around in the global scope. Not much to see here,
// a "real" localizer would have more features.
class Localizer {
    private $lang = array(
        'global.years_ago_1'    => '1 year ago',
        'global.years_ago_n'    => '%d years ago',
        'global.months_ago_1'   => '1 month ago',
        'global.months_ago_n'   => '%d months ago',
        'global.days_ago_1'     => '1 day ago',
        'global.days_ago_n'     => '%d days ago',
        'global.hours_ago_1'    => '1 hour ago',
        'global.hours_ago_n'    => '%d hours ago',
        'global.minutes_ago_1'  => '1 minute ago',
        'global.minutes_ago_n'  => '%d minutes ago',
        'global.seconds_ago_1'  => 'just now',
        'global.seconds_ago_n'  => '%d seconds ago',
    );

    public function format($string /*, $param1, $param2, ... */) {
        $params = func_get_args(); // get variable # of params
        array_shift($params); // remove first item, we already have it in $string
        if (!isset($this->lang[$string])) {
            return '[['.$string.']]'; // a placeholder
        }

        return vsprintf($this->lang[$string], $params);
    }
}

$localizer = new Localizer;
$timestamp = '1345284190';  // Example of Unix Timestamp
$datetime = new DateTime("@$timestamp");
$formatter = new DateFormatter($localizer);

echo $formatter->formatHowLongAgo($datetime); 
```

# css - ul li 菜单下拉菜单在 ie 中不显示

> ID：12420917
> 
> 赞同：0
> 
> 时间：2012-09-14T08:41:47.087
> 
> 标签：css, internet-explorer

我正在为我的网站使用 ul li 菜单下拉菜单。它正确显示在 ifrefox 和 chrome 中。但在 IE 中它没有显示......我的代码就像......，

```
<style type="text/css"> .nav { width:1000px; } .nav ul { }
.nav ul li  { list-style: none;}
ul.dropdown { position:relative; width:auto; font:12px Arial, Helvetica, sans-serif; }
ul.dropdown li { float:left; zoom:1; height:30px; padding:6px 2px 0 2px; border-right:1px solid #bacfe4; }
ul.dropdown li li { border-right:1px solid #ccc; border-left:1px solid #ccc;  margin-left:9px;}
ul.dropdown a:hover { color:#000; } ul.dropdown a:active { color:#ffa500; }
ul.dropdown li a { display:block; padding:4px 8px; color:#000; text-decoration:none; font:bold 12px Arial, Helvetica, sans-serif; }
ul.dropdown li:last-child a { border-right:none;}
ul.dropdown li:hover { color:#000; position:relative; }
ul.dropdown li.hover a { color:#000; }
ul.dropdown ul { text-align:left; visibility: hidden; position: absolute; left:-10px; top:36px; }
ul.dropdown ul li { border-bottom:1px solid #ccc; float:none; width:120px; height:25px; }
ul.dropdown ul li a { border-right:none; width:100%; display:inline-block; color:#000; }
ul.dropdown ul ul { left:100%; top:0; }
ul.dropdown li:hover > ul { visibility:visible; }

</style>

<script type="text/javascript">

</script>
<div class="nav">

<ul class='dropdown'>
<li><a href=''>one</a></li>
<li><a href=''>two</a></li>
<li> <a href=''> three </a>
<ul class='sub_menu'>
<li><a href=''>one3</a></li>
<li><a href=''>two3</a></li>
</ul>
</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T07:22:31.987

我在实际页面中包含了两次 jquery.js 文件。

这就是为什么它没有显示。

# php - SEO友好的ajax驱动网站

> ID：12420920
> 
> 赞同：0
> 
> 时间：2012-09-14T08:41:53.703
> 
> 标签：php, ajax, seo

我创建了一个 ajax 驱动的网站，当给定正确的参数时，它可以加载任何页面。例如：www.mysite.com/?page=blog&id=7 打开一篇博文。

如果我创建一个站点地图，其中包含指向网站内所有页面的链接，这会被编入索引吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:50:35.813

如果您为将实际显示整个页面的每个页面提供一个 url，那么可以。如果这些请求只是用 JSON 响应，或者只是页面的一部分，那么不会。实际上，这可能是一个糟糕的设计 SEO 明智的。每个页面都应该有它自己的 URL，例如`www.mysite.com/unicorns`而不是`www.mysite.com/?page=blog&id=1`，并且页面上的链接应该指向那些。然后您应该使用 Javascript 来捕获 AJAX 链接的所有链接单击事件，然后使用 Javascript 以您喜欢的方式更新页面。或者更好的是，也许可以试试[PJAX](http://pjax.heroku.com/)，它只会加载页面的内容而不是整个页面刷新，这会稍微加快速度，而不会对您的正常站点设置进行任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:52:41.673

您确实意识到将站点地图制作为您的所有搜索引擎链接将是丑陋的。

正如[谷歌所说](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)，如果您使用以下内容，仍然可以使用漂亮的 url 抓取页面`fragment identifier`：

```
 <meta name="fragment" content="!"> // for meta fragment 
```

当您通过 ajax 生成页面时，将片段附加到 URL：

```
 www.mysite.com/#!page=blog-7 //(and split them) 
```

页面应该使用 PHP 直接加载内容`$_GET['_escaped_fragment_']`

正如我所读到的，必应和雅虎开始使用相同的[进程](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)进行爬网。

# asp.net - 在其他下拉列表中选择项目时如何禁用下拉列表中的项目？

> ID：12420921
> 
> 赞同：2
> 
> 时间：2012-09-14T08:42:01.830
> 
> 标签：asp.net

我想要做的是，当第一个下拉列表被选中时，它会从下一个下拉列表中删除选定的项目。因此，如果您有数据：A、B、C、D、E、F、G、H、I 在一个下拉列表中，如果我在第一个下拉列表中选择 B，那么在下一个下拉列表中它应该只显示 A、C、D ,E,F,G,H,I 等最多 7 个下拉菜单。我不知道在 asp.net 中解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:55:33.993

您需要处理 DropDownList 的 SelectedIndexChanged 事件以确定何时选择了一个项目，然后遍历其他 DropDownLists 中的项目，删除您想要的项目。例如

```
void DropDownListOne_SelectedIndexChanged(object sender, Eventargs e)
{
   ListItem selectedItem = DropDownListOne.SelectedItem;

   foreach(ListItem item in DropDownListTwo.Items)
   {
       if(item.Value == selectedItem.Value)
       {
           DropDownListTwo.Items.Remove(item);
       }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:01:03.370

尝试这个

```
 ListItem item = d1.Items.FindByText(d1.SelectedValue);
 d2.Items.Remove(item); 
```

如果你有字符作为数组，你可以有

```
 string[] letters = new string[] {"A","B","C"};

 string d1SelValue = d1.SelectedValue;

 d2.DataSource = letters.Where(l => l != d1SelValue).ToArray();
 d2.DataBind(); 
```

# iphone - 为什么在 IOS 上使用 OpenCV 的 cvLoadImage 总是返回 NULL？

> ID：12420922
> 
> 赞同：3
> 
> 时间：2012-09-14T08:42:02.433
> 
> 标签：iphone, ios, opencv

我写了一些代码在**iPad**上运行，我使用 cvLoadImage() 从中读取图像`Bundle Resources`，但它总是返回`NULL`，我不知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T10:10:15.827

您不能将应用程序包中的图像直接加载到 OpenCV 中……获得正确的 cv::Mat 涉及两个步骤：

1.) 使用 UIImage 加载图像
2.) 将 UIImage 转换为 cv::Mat

看起来像这样：

```
cv::Mat img = [UIImageCVMatConverter cvMatFromUIImage:[UIImage imageNamed:@"my_image.png"]]; 
```

从这个线程中获取 UIImageCVmatConverter 类：[OpenCV install in xcode](https://stackoverflow.com/questions/12214273/opencv-install-in-xcode/12216556#12216556)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:07:35.380

直接使用

```
[UIImage imageWithNamed:@"photo.png"]; 
```

如果图像在 Bundle 中，您可以直接使用。

# git - 仅存储一个文件

> ID：12420924
> 
> 赞同：359
> 
> 时间：2012-09-14T08:42:12.730
> 
> 标签：git, git-stash

我希望能够仅存储单个文件中的更改：

```
git stash save -- just_my_file.txt 
```

上面的方法虽然不起作用。有什么选择吗？

* * *

## 回答 #1

> 赞同：321
> 
> 时间：2019-03-09T03:59:45.490

如果您不想在隐藏的更改中指定消息，请在双破折号后传递文件名。

```
$ git stash -- filename.ext 
```

如果它是一个未跟踪的/新文件，您必须先暂存它。

但是，如果您*确实*要指定消息，请使用`push`.

```
git stash push -m "describe changes to filename.ext" filename.ext 
```

这两种方法都适用于 git 版本 2.13+

* * *

## 回答 #2

> 赞同：246
> 
> 时间：2012-09-14T13:15:28.143

我认为`stash -p`可能是您想要的选择，但以防您将来遇到其他更棘手的事情，请记住：

`Stash`实际上只是一个非常简单的替代方案，可以替代仅有的稍微复杂的`branch`集合。Stash 对于快速移动事物非常有用，但是您可以使用分支完成更复杂的事情，而不会带来更多的头痛和工作。

```
# git checkout -b tmpbranch
# git add the_file
# git commit -m "stashing the_file"
# git checkout master 
```

去做你想做的事，然后简单地`rebase`和/或`merge`tmpbranch。当您需要进行比 stash 允许的更仔细的跟踪时，实际上并没有太多额外的*工作*。

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2012-09-14T09:25:29.430

`git stash -p`您可以使用（类似于）交互式地存储单行`git add -p`。

它不需要文件名，但你可以跳过其他文件，`d`直到你到达你想要隐藏的文件，然后用`a`.

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2012-09-14T08:45:33.717

最好的选择是暂存除此文件之外的所有内容，并告诉 stash 将索引保留为`git stash save --keep-index`，从而暂存您的未暂存文件：

```
$ git add .
$ git reset thefiletostash
$ git stash save --keep-index 
```

正如 Dan 指出的那样，`thefiletostash`它是唯一一个被存储重置的文件，但它也存储其他文件，所以它不完全是你想要的。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2014-12-19T12:14:32.267

以防万一您在使用“git stash”时实际上是指“放弃更改”（并且不要真正使用 git stash 临时存储它），在这种情况下，您可以使用

```
git checkout -- <file> 
```

请注意， git stash 只是分支和做事的一种更快速、更简单的替代方法。

# asp.net-mvc - 在 asp.net mvc 3 中使用选项卡的最佳方法是什么？

> ID：12420925
> 
> 赞同：-1
> 
> 时间：2012-09-14T08:42:14.417
> 
> 标签：asp.net-mvc, asp.net-mvc-3, tabs, webgrid

我必须在我的视图中使用选项卡来管理不同类型的信息。现在我正在使用 webgrid，但我对调用方法有疑问。我必须从一个选项卡到另一个选项卡查看不同的数据。我使用以 id 作为参数的方法来执行此操作。

我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:45:23.140

检查 Jquery UI 选项卡，它很简单。检查下面的链接

[jQuery UI 选项卡](http://jqueryui.com/demos/tabs/)

# ios - iPad2 上的 Unity3d 应用程序需要旧版本。要运行的配置文件

> ID：12420931
> 
> 赞同：3
> 
> 时间：2012-09-14T08:42:34.280
> 
> 标签：ios, unity3d, provisioning, provisioning-profile, ipad-2

最近我更新了我的配置文件和证书。现在出现的问题是 iPad2 上以前的 Unity3d 应用程序现在仍然需要旧的配置文件才能**运行**。

当我尝试运行其中一个旧应用程序时，除了快速闪烁的屏幕外，没有任何反应。在日志中它说：“找不到此可执行文件的有效配置文件”

构建新应用程序时没有问题。这一切都很好。这只是旧的应用程序。

通常我可以重建旧的应用程序，但有些应用程序我没有备份。所以一个解决方案会很棒。

任何提示/技巧？

**眼镜：**

*   iPad2
*   MacOS 10.7.3（我想不通..）
*   Xcode 4.3.2

如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:18:07.847

您是否更新了过期的配置文件（如开发人员）或您的开发人员会员资格？

您是否尝试过将配置文件拖放到您的 iTunes 库中并同步您的设备？还要检查您的设备上没有冲突的配置文件。

# c# - c#中的文本框和富文本框

> ID：12420933
> 
> 赞同：-2
> 
> 时间：2012-09-14T08:42:44.717
> 
> 标签：c#, textbox, numbers

例如，当我在文本框中写数字时，我想要：我在文本框中写数字 4，然后单击 Richtextbox 中的按钮我有四个“A”（AAAA）在 Richtextbox 中写数字 6 我有六个“A”（AAAAAA）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:46:53.583

```
var sb = new StringBuilder();    
for(int i = 0 i < int.Parse(textBox.Text); i++)
{
    sb.Append("A");
}
rtb.Text = sb.ToString() 
```

# c# - 为什么要通过变量引用事件？

> ID：12420934
> 
> 赞同：4
> 
> 时间：2012-09-14T08:42:52.533
> 
> 标签：c#, events, coding-style

我一直在其他人的代码中看到这种调用事件的模式：

```
void OnMyEvent()
{
  var myEvent = MyEvent;

  if (myEvent != null)
    myEvent(this, EventArgs.Empty);
} 
```

使用变量来引用事件`MyEvent`而不是直接使用有什么好处`MyEvent(this, EventArgs.Empty)`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T08:45:07.383

在多线程应用程序中，事件可能会在调用此方法的过程中取消订阅。

`NullReferenceException`如果未以这种方式复制事件处理程序，这可能会导致错误。

```
void OnMyEvent()
{
  if (MyEvent!= null)                // Thread A checks event 
  {                                  // Thread B unsubscribes _last_ handler 
    MyEvent(this, EventArgs.Empty);  // Boom!
  }
} 
```

但是有：

```
void OnMyEvent()
{
  var myEvent = MyEvent;             // Thread A gets _copy_ of invocation list
  if (myEvent != null)               // Using copy, so no problem 
  {                                  // Thread B unsubscribes _last_ handler
    myEvent(this, EventArgs.Empty);  // Still using copy, so no problem 
  }
} 
```

# objective-c - 在Objective C中加载表单时将光标焦点设置在TextField上

> ID：12420937
> 
> 赞同：7
> 
> 时间：2012-09-14T08:43:00.550
> 
> 标签：objective-c, cocoa, textfield

我有 3 个文本字段（用户名、密码、确认密码）。当表单加载时，我希望光标在表单首次显示时在文本字段用户名中开始。请给我一些建议。预先感谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-14T08:46:15.197

`[usernameTextField becomeFirstResponder];`

这应该为您提供所需的结果。如果您想了解有关该机制的更多信息，可以在此处阅读有关[响应者链的信息。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/EventArchitecture/EventArchitecture.html)

编辑：

我的错，我以为你的意思是 UITextField (Cocoa Touch)。

> 使用 NSWindow makeFirstResponder: 方法，而不是这个方法，使对象成为第一响应者。切勿直接调用此方法。

```
[window makeFirstResponder:usernameTextField]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T08:47:04.917

使用 message `becomeFirstResponder`，如下所示：

```
[self.passwordField becomeFirstResponder] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T06:02:45.577

[yourTextfield 成为FirstResponder]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-19T11:31:16.207

在您的`loadView`or`viewDidLoad`中（仅在 10.10 中可用）在`super`调用后添加以下内容

```
dispatch_async(dispatch_get_current_queue(), ^{
    [self.usernameInputField becomeFirstResponder];
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-29T21:40:55.240

如果您尝试在 NSPanel（或任何其他工作表）中实现此目的并且禁用标题+边框，则无法设置焦点（请参阅[http://www.cocoabuilder.com/archive/cocoa/207749-nstextfield- will-not-become-editable-in-borderless-window.html](http://www.cocoabuilder.com/archive/cocoa/207749-nstextfield-will-not-become-editable-in-borderless-window.html) )

在这种情况下，尝试继承工作表窗口类并覆盖 canBecomeKeyWindow 以始终返回 YES。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-04T02:34:03.357

在斯威夫特

self.sampleUITextField.becomeFirstResponder()

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-07-20T17:15:01.500

对于 macOS，使用 Swift 3， becomeFirstResponder() 调用必须在 viewWillAppear() 方法中。

```
class myViewController {
  @IBOutlet weak var myTextField: NSTextField!

  override func viewDidLoad() {
    super.viewDidLoad()
  }

  override func viewWillAppear {
    myTextField.becomeFirstResponder()
  }
  ...
} 
```

# dependency-injection - 查看页面依赖解析器

> ID：12420945
> 
> 赞同：2
> 
> 时间：2012-09-14T08:43:48.047
> 
> 标签：dependency-injection, asp.net-mvc-4, unity-container, service-locator, viewpage

我在 Unity 中使用 MVC4 和 DependencyResolver。就像在 Brad Wilson 的博客页面[http://bradwilson.typepad.com/blog/2010/07/service-location-pt3-views.html](http://bradwilson.typepad.com/blog/2010/07/service-location-pt3-views.html)中一样，我想对我的视图使用依赖注入。但似乎 MVC4 视图引擎并没有尝试通过 DependencyResolver 创建视图页面类。是吗，或者我做错了什么？这是我的代码：

```
public static void Register() {
        var unity = new UnityContainer();
        unity.RegisterType<SpaceProject.Models.SpaceShipEntities>(new RequestLifetimeManager());
        DependencyResolver.SetResolver(new UnityDependencyResolver(unity)); 
```

}

```
public abstract class SharedView : WebViewPage
{
    [Dependency]
    public SpaceProject.Models.SpaceShipEntities Context { set; get; }
} 
```

和我的 _Layout.cshtml：

```
@inherits SharedView
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html>
<head></head>
    <body>
    @foreach (var menu in Context.Menu) { 
                            <li>
                                <a href="#">@menu.Title</a> |
                            </li>    
                        }
    </body>
    </html> 
```

我有错误，上下文为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:54:20.033

@inherits SharedView 在 _Layout.cshtml 中不起作用，我认为是因为它不像母版页那样查看和使用。在视图和部分视图中，所有的作品都很完美。

# c++ - 在 LOCAL_MACHINE 中注册一个 Dll

> ID：12420949
> 
> 赞同：-2
> 
> 时间：2012-09-14T08:44:10.440
> 
> 标签：c++, com, registry

我想将我的 Dll 注册到注册表中的特定路径，而不是通常采用的默认路径。我是 Windows 新手，不太了解它。谁能告诉我我需要在我的代码中提到的所有内容，或者是否可以添加任何内容，以便我的 dll 在 HKEY_LOCAL_MACHINE 中注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:11:13.613

你为什么想这么做？COM dll 必须在 HKEY_CLASSES_ROOT 注册，其他任何东西都没有意义。

原因是当某些其他组件需要实例化您的 COM 服务器时，它们通常会调用`CoCreateInstance`API，该 API 将在注册表的 HKCR 配置单元中查找类信息，而不是在其他地方。如果您要在其他地方注册您的类，则其他组件将无法找到它，这与它根本没有注册一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:51:36.090

您需要使用[Win32 API 注册表函数](http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms724875%28v=vs.85%29.aspx)：

1.  创建（如果存在则打开）密钥[`RegCreateKeyEx`](http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms724844%28v=vs.85%29.aspx)
2.  设置值[`RegSetValueEx`](http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms724923%28v=vs.85%29.aspx)
3.  关闭注册表项[`RegCloseKey`](http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms724837%28v=vs.85%29.aspx)

另请参阅[一些示例代码](http://www.functionx.com/visualc/articles/regvalues.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:56:06.720

您需要澄清“注册”的含义。

COM 是一个规范，如果你想为 COM 注册你的组件，你需要遵循规范。这意味着`HKEY_LOCAL_MACHINE\SOFTWARE\Classes`。在其他任何地方注册 COM 服务器是没有意义的，因为找不到它。

如果您通过“注册”表示其他意思，请澄清。

# sql - 与 postgresql 的性能比较：left join vs union all

> ID：12420950
> 
> 赞同：1
> 
> 时间：2012-09-14T08:44:16.417
> 
> 标签：sql, postgresql, join, union

我想知道“左外连接”和“全部联合”之间最好和最快的解决方案是什么。数据库是 PostgreSQL。

使用 UNION ALL 查询：

```
SELECT * FROM element, user WHERE elm_usr_id = usr_id
UNION ALL
SELECT * FROM element WHERE elm_usr_id ISNULL; 
```

使用 LEFT OUTER JOIN 查询：

```
SELECT * FROM element LEFT OUTER JOIN user ON elm_usr_id = usr_id; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:03:54.707

您的两个查询可能不会产生相同的结果。

您使用 UNION ALL 的查询会返回匹配的行以及由于 中的空值而不匹配的行`elm_usr_id`。

而使用 LEFT JOIN（与 LEFT OUTER JOIN 相同）的查询返回匹配的行以及由于任何不对应的值而不匹配的行。

关于这一点，如果您希望看到所有行，使用 LEFT JOIN 的查询会更安全。

回到您最初的问题，使用 LEFT JOIN 的查询是利用索引的最佳选择。例如，如果您想要一个排序的结果，那么 UNION 查询将是最慢的。或者，如果您的查询是主查询中的子查询，那么 UNION 将阻止对表 [元素] 索引的任何可能利用。因此，执行此类子查询的 JOIN 或 WHERE 会很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:50:06.873

在这种特殊情况下，我建议 LEFT OUTER JOIN 超过 union all，

就像在联合中一样，您必须阅读表格两次，而在 LEFT OUTER JOIN 中只需阅读一次

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:51:10.533

可能是 LEFT JOIN，但您可以通过运行来查看查询计划`EXPLAIN ANALYSE SELECT...`。如果您根据 elm_usr_id 的空值来修改列，则 UNION ALL 表单可能会更清晰，但您始终可以使用`CASE`LEFT JOIN 来进行列修改。

# javascript - Dojo：获取对 dijit.form.Select 中单击项目的访问权限？

> ID：12420956
> 
> 赞同：1
> 
> 时间：2012-09-14T08:44:45.963
> 
> 标签：javascript, dojo, dijit.form

我有一个 dijit Select 小部件，当用户单击其中一个下拉项目时需要做一些事情。这意味着我需要访问单击的项目，检索一些信息，并调用我自己的函数之一。

我已经测试在选择上附加一个 onChange ，我可以很好地选择文本值。但我需要对象而不是价值。该对象在数据信息属性中包含更多值。

基本上我想要实现的是在列表中显示一个值，但在选择时发送更多值以填充其他字段。

背景：这是一个由服务器函数通过 AJAX 填充的预输入字段。附有一家商店，但它是空的（据我所知）所以我一直没有成功尝试：`.store.fetchItemByIdentity`- 总是什么都不返回。

```
ta.store.fetchItemByIdentity({
    identity: ta.getValue(),
    onItem: function(item, request){
        console.log(item),
        console.log(request)
    }
}) 
```

我希望日志显示项目和请求对象，但它们都是未定义的。 `ta.getValue()`得到预期的选定值。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:54:12.000

看看我对[onChange 的回答不足以触发来自 Dojo Combobox 的查询](https://stackoverflow.com/questions/12376192/onchange-not-sufficient-to-trigger-query-from-dojo-combobox)以及那里提到的[jsFiddle](http://jsfiddle.net/phusick/Hp5jr/)。我在那里添加了特定于您需求的代码：

```
select.dropDown.on("itemClick", function(dijit, event) {
    var node = dijit.domNode;
    console.log(domAttr.get(node, "data-info-attribute"));
    // or
    console.log(node.dataset.infoAttribute);
}); 
```

# javascript - document.styleSheets 不返回任何内容

> ID：12420964
> 
> 赞同：2
> 
> 时间：2012-09-14T08:45:14.413
> 
> 标签：javascript, firefox, css

我正在使用 css3 动画将项目从屏幕的一侧移动到另一侧。我想确保无论屏幕分辨率如何，这种效果都有效。为了做到这一点，我使用`document.styleSheets`它来访问包含所有动画关键帧的 css 文件并更改它们的最终值。

这是我正在使用的js代码：

```
var stylesheet = document.styleSheets[1];

var rules = stylesheet.rules;
var keyframes;
var keyframe;

for (var i = 0; i < rules.length; i++){
    keyframes = rules.item(i);

    var keyframeRules = keyframes.cssRules;
    var j = keyframeRules.length;
    var index = i+1;

    while (j--) {
        keyframe = keyframeRules.item(j);
        if (keyframe.keyText === "100%") {
            if(keyframe.style.left != ''){
                keyframe.style.left = $(document).width() + $('#cloud'+ index).width() + 'px';
            }
        }
    }

    $('#cloud'+ index).addClass('animating');
} 
```

我正在使用的 css 文件包含：

```
@-moz-keyframes cloud1 {
0%{ left: -400px; }
100%{ left: 0; }
}

@-webkit-keyframes cloud1 {
0%{ left: -400px; }
100%{ left: 0; }
} 
```

我在那里有很多对关键帧。

我的问题是`document.styleSheets`如果我返回一个空的 css 文件`console.log`并在 firebug 中检查。结果，`rules.length`为空。基于 Webkit 的浏览器可以正常工作。

我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:51:22.933

不同的浏览器使用不同的名称来引用这些规则。

这是我在代码中处理此问题的方法：

```
var cssRules = stylesheet.rules; // chrome, IE
if (!cssRules) cssRules = stylesheet.cssRules; // firefox (and maybe Chrome too in recent versions) 
```

你可以这样做：

```
var cssRules = stylesheet.rules || stylesheet.cssRules; 
```

但我更喜欢第一个版本，因为它更清晰。

# postgresql - 从父表中删除记录时如何在 Postgresql 查询中使用级联

> ID：12420973
> 
> 赞同：7
> 
> 时间：2012-09-14T08:45:31.983
> 
> 标签：postgresql

我们如何在 PostgreSQL 中使用级联，同时从其他子表中引用的父表中删除一条记录。目前它给出了语法错误。

```
ERROR:  syntax error at or near "cascade"
LINE 1: DELETE FROM fs_item where itemid = 700001803 cascade; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T09:00:23.060

您必须通过`ON DELETE CASCADE`以下方式添加约束：

```
ALTER TABLE table1 ADD CONSTRAINT "tbl1_tbl2_fkey" FOREIGN KEY(reference_key) REFERENCES table2 ON DELETE CASCADE; 
```

然后，您可以简单地执行`DELETE`查询

```
 DELETE FROM fs_item where itemid = 700001803 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T08:52:13.653

删除语句没有 CASCADE。您将外键设置为 CASCADE 删除，然后它会自动为您发生。

# c# - SpreadsheetML - 错误和验证

> ID：12420974
> 
> 赞同：2
> 
> 时间：2012-09-14T08:45:37.383
> 
> 标签：c#, xml, excel, spreadsheetml

我在我的 C# 项目中为 MS Excel 生成了一个 SpreadsheetML 文件。由于昨天进行了一些更改，因此这很有效。现在我打开它时遇到问题。它出现了错误：

XML PARSE ERROR: Null or missing attribute value 错误发生在此元素堆栈或其下方：

我已经将它缩小到一个有问题的表，但它有 7000 多行，大约 20 列。当我导出一行时，它打开得很好，所以显然不是每一行都有问题。

现在我正在寻找有关如何找到问题的建议，因为 Excel 不提供行号（我讨厌那个！）。

有人知道验证 SpreadsheetML 文件的工具或好方法吗？

# javascript - 如何在javascript中获取不同的选定值？

> ID：12420980
> 
> 赞同：0
> 
> 时间：2012-09-14T08:46:02.640
> 
> 标签：javascript, jquery

大家好，我怎样才能从不同的选择框中获取两个值？我在选择框中获得第一个值，但无法从另一个选择框中获得第二个值。这是我的 javascript 代码：

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
      <script type="text/javascript">

 $(document).ready(function () {
              var select = document.forms[0].sel;
              var select2=document.forms[0].sel2;
              select.onchange = function () {
                  var value = select.options[select.selectedIndex].value; // to get Value
               alert(value);

              }
               select2.onchange = function () {
                  var value2 = select2.options[select2.selectedIndex].value; // to get Value
               alert(value2);

              }

          });

        </script>

 <form>
<SELECT NAME="sel" onChange="split(selected value)">
<OPTION VALUE=1>Milk</option>
<OPTION VALUE=2>tea</option>
<OPTION VALUE=3>water</option>
<OPTION VALUE=4>coffee</option>
</SELECT>
</form>

 <form>
<SELECT NAME="sel2" onChange="split(selected value)">
<OPTION VALUE=1>Milk</option>
<OPTION VALUE=2>tea</option>
<OPTION VALUE=3>water</option>
<OPTION VALUE=4>coffee</option>
</SELECT>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:48:26.990

[jQuery 提示 - 获取选择列表值](http://marcgrabanski.com/articles/jquery-select-list-values)

```
var foo = []; 
    $('#multiple :selected').each(function(i, selected){ 
      foo[i] = $(selected).text(); 
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:50:20.060

第二个选择框是第二种形式。所以：

```
var select2 = document.forms[1].sel2; 
```

也就是说，您实际上可以将 jQuery 用于这些事情：

```
// bind a change event handler to the second select
$("select").eq(1).on("change", function() {
  alert( $(this).val() );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T08:54:00.203

```
 $(document).ready(function () {
$('#sel').change(function(){ $('#sel option:selected').val();  }); 
```

为您的选择控件提供 id

```
<SELECT id="sel"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T08:57:00.190

在 jQuery 的帮助下（我建议逻辑，而不是解决方案）

```
$(document).on('change', 'select', function(){    
   var selecetdOption = $(this).val();
          alert(selecetdOption );    
});​ 
```

[工作演示](http://jsfiddle.net/pzxbg/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T08:50:45.680

你的javascript有错误，因为你放了

```
var select2=document.forms[0].sel2; 
```

试着放

```
 var select2=document.forms[1].sel2; 
```

它有效！

# android - AnimationDrawable 无法加载太多图片

> ID：12420982
> 
> 赞同：-1
> 
> 时间：2012-09-14T08:46:13.450
> 
> 标签：android

主java

```
import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.os.Bundle;
import android.widget.ImageView;

public class AndroidAnimation extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.animation1);

    ImageView myAnimation = (ImageView)findViewById(R.id.myanimation1);
    final AnimationDrawable myAnimationDrawable
        = (AnimationDrawable)myAnimation.getDrawable();

    myAnimation.post(
            new Runnable(){

                public void run() {
                    myAnimationDrawable.start();
                }
            });
}
} 
```

xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
android:oneshot="false"
>
<item
    android:drawable="@drawable/default_01_0001"
    android:duration="80"/>
<item
    android:drawable="@drawable/default_01_0002"
    android:duration="80"/>
 <item
    android:drawable="@drawable/default_01_0003"
    android:duration="80"/>
  <item
    android:drawable="@drawable/default_01_0004"
    android:duration="80"/>
   <item
    android:drawable="@drawable/default_01_0005"
    android:duration="80"/>
    <item
    android:drawable="@drawable/default_01_0006"
    android:duration="80"/>
     <item
    android:drawable="@drawable/default_01_0007"
    android:duration="80"/>
      <item
    android:drawable="@drawable/default_01_0008"
    android:duration="80"/>
       <item
    android:drawable="@drawable/default_01_0009"
    android:duration="80"/>
        <item
    android:drawable="@drawable/default_01_0010"
    android:duration="80"/>
         <item
    android:drawable="@drawable/default_01_0011"
    android:duration="80"/>
          <item
    android:drawable="@drawable/default_01_0012"
    android:duration="80"/>
           <item
    android:drawable="@drawable/default_01_0013"
    android:duration="80"/>
            <item
    android:drawable="@drawable/default_01_0014"
    android:duration="80"/>
             <item
    android:drawable="@drawable/default_01_0015"
    android:duration="80"/>
              <item
    android:drawable="@drawable/default_01_0016"
    android:duration="80"/>
               <item
    android:drawable="@drawable/default_01_0017"
    android:duration="80"/>
                <item
    android:drawable="@drawable/default_01_0018"
    android:duration="80"/>
                 <item
    android:drawable="@drawable/default_01_0019"
    android:duration="80"/>
                  <item
    android:drawable="@drawable/default_01_0020"
    android:duration="80"/>
                   <item
    android:drawable="@drawable/default_01_0021"
    android:duration="80"/>
                    <item
    android:drawable="@drawable/default_01_0022"
    android:duration="80"/>
                     <item
    android:drawable="@drawable/default_01_0023"
    android:duration="80"/>
                      <item
    android:drawable="@drawable/default_01_0024"
    android:duration="80"/>
                       <item
    android:drawable="@drawable/default_01_0025"
    android:duration="80"/>
       <item
    android:drawable="@drawable/default_03_0001"
    android:duration="80"/>
<item
    android:drawable="@drawable/default_03_0002"
    android:duration="80"/>
 <item
    android:drawable="@drawable/default_03_0003"
    android:duration="80"/>
  <item
    android:drawable="@drawable/default_03_0004"
    android:duration="80"/>
   <item
    android:drawable="@drawable/default_03_0005"
    android:duration="80"/>
    <item
    android:drawable="@drawable/default_03_0006"
    android:duration="80"/>
     <item
    android:drawable="@drawable/default_03_0007"
    android:duration="80"/>
      <item
    android:drawable="@drawable/default_03_0008"
    android:duration="80"/>
       <item
    android:drawable="@drawable/default_03_0009"
    android:duration="80"/>
        <item
    android:drawable="@drawable/default_03_0010"
    android:duration="80"/>
         <item
    android:drawable="@drawable/default_03_0011"
    android:duration="80"/>
          <item
    android:drawable="@drawable/default_03_0012"
    android:duration="80"/>
           <item
    android:drawable="@drawable/default_03_0013"
    android:duration="80"/>
            <item
    android:drawable="@drawable/default_03_0014"
    android:duration="80"/>
             <item
    android:drawable="@drawable/default_03_0015"
    android:duration="80"/>
              <item
    android:drawable="@drawable/default_03_0016"
    android:duration="80"/>
               <item
    android:drawable="@drawable/default_03_0017"
    android:duration="80"/>
                <item
    android:drawable="@drawable/default_03_0018"
    android:duration="80"/>
                 <item
    android:drawable="@drawable/default_03_0019"
    android:duration="80"/>
                  <item
    android:drawable="@drawable/default_03_0020"
    android:duration="80"/>
                   <item
    android:drawable="@drawable/default_03_0021"
    android:duration="80"/>
                    <item
    android:drawable="@drawable/default_03_0022"
    android:duration="80"/>
                     <item
    android:drawable="@drawable/default_03_0023"
    android:duration="80"/>
                      <item
    android:drawable="@drawable/default_03_0024"
    android:duration="80"/>
                       <item
    android:drawable="@drawable/default_03_0025"
    android:duration="80"/>
                           <item
    android:drawable="@drawable/default_03_0026"
    android:duration="80"/>
<item
    android:drawable="@drawable/default_03_0027"
    android:duration="80"/>
 <item
    android:drawable="@drawable/default_03_0028"
    android:duration="80"/>
  <item
    android:drawable="@drawable/default_03_0029"
    android:duration="80"/>

   <item
    android:drawable="@drawable/default_03_0030"
    android:duration="80"/>
    <item
    android:drawable="@drawable/default_03_0031"
    android:duration="80"/>
     <item
    android:drawable="@drawable/default_03_0032"
    android:duration="80"/>
      <item
    android:drawable="@drawable/default_03_0033"
    android:duration="80"/>
       <item
    android:drawable="@drawable/default_03_0034"
    android:duration="80"/>
        <item
    android:drawable="@drawable/default_03_0035"
    android:duration="80"/>

         <item
    android:drawable="@drawable/default_03_0036"
    android:duration="80"/>
          <item
    android:drawable="@drawable/default_03_0037"
    android:duration="80"/>
           <item
    android:drawable="@drawable/default_03_0038"
    android:duration="80"/>
            <item
    android:drawable="@drawable/default_03_0039"
    android:duration="80"/>
             <item
    android:drawable="@drawable/default_03_0040"
    android:duration="80"/>
              <item
    android:drawable="@drawable/default_03_0041"
    android:duration="80"/>
               <item
    android:drawable="@drawable/default_03_0042"
    android:duration="80"/>
                <item
    android:drawable="@drawable/default_03_0043"
    android:duration="80"/>
                 <item
    android:drawable="@drawable/default_03_0044"
    android:duration="80"/>
                  <item
    android:drawable="@drawable/default_03_0045"
    android:duration="80"/>
         <item
    android:drawable="@drawable/default_02_0001"
    android:duration="80"/>
<item
    android:drawable="@drawable/default_02_0002"
    android:duration="80"/>
 <item
    android:drawable="@drawable/default_02_0003"
    android:duration="80"/>
  <item
    android:drawable="@drawable/default_02_0004"
    android:duration="80"/>
   <item
    android:drawable="@drawable/default_02_0005"
    android:duration="80"/>
    <item
    android:drawable="@drawable/default_02_0006"
    android:duration="80"/>
     <item
    android:drawable="@drawable/default_02_0007"
    android:duration="80"/>
      <item
    android:drawable="@drawable/default_02_0008"
    android:duration="80"/>
       <item
    android:drawable="@drawable/default_02_0009"
    android:duration="80"/>
        <item
    android:drawable="@drawable/default_02_0010"
    android:duration="80"/>
         <item
    android:drawable="@drawable/default_02_0011"
    android:duration="80"/>
          <item
    android:drawable="@drawable/default_02_0012"
    android:duration="80"/>
           <item
    android:drawable="@drawable/default_02_0013"
    android:duration="80"/>
            <item
    android:drawable="@drawable/default_02_0014"
    android:duration="80"/>
             <item
    android:drawable="@drawable/default_02_0015"
    android:duration="80"/>
              <item
    android:drawable="@drawable/default_02_0016"
    android:duration="80"/>
               <item
    android:drawable="@drawable/default_02_0017"
    android:duration="80"/>
                <item
    android:drawable="@drawable/default_02_0018"
    android:duration="80"/>
                 <item
    android:drawable="@drawable/default_02_0019"
    android:duration="80"/>
                  <item
    android:drawable="@drawable/default_02_0020"
    android:duration="80"/>
                   <item
    android:drawable="@drawable/default_02_0021"
    android:duration="80"/>
                    <item
    android:drawable="@drawable/default_02_0022"
    android:duration="80"/>
                     <item
    android:drawable="@drawable/default_02_0023"
    android:duration="80"/>
                      <item
    android:drawable="@drawable/default_02_0024"
    android:duration="80"/>
                       <item
    android:drawable="@drawable/default_02_0025"
    android:duration="80"/>
                           <item
    android:drawable="@drawable/default_02_0026"
    android:duration="80"/>
<item
    android:drawable="@drawable/default_02_0027"
    android:duration="80"/>
 <item
    android:drawable="@drawable/default_02_0028"
    android:duration="80"/>
  <item
    android:drawable="@drawable/default_02_0029"
    android:duration="80"/>
   <item
    android:drawable="@drawable/default_02_0030"
    android:duration="80"/>
    <item
    android:drawable="@drawable/default_02_0031"
    android:duration="80"/>
     <item
    android:drawable="@drawable/default_02_0032"
    android:duration="80"/>
      <item
    android:drawable="@drawable/default_02_0033"
    android:duration="80"/>
       <item
    android:drawable="@drawable/default_02_0034"
    android:duration="80"/>
        <item
    android:drawable="@drawable/default_02_0035"
    android:duration="80"/>
         <item
    android:drawable="@drawable/default_02_0036"
    android:duration="80"/>
          <item
    android:drawable="@drawable/default_02_0037"
    android:duration="80"/>
           <item
    android:drawable="@drawable/default_02_0038"
    android:duration="80"/>
            <item
    android:drawable="@drawable/default_02_0039"
    android:duration="80"/>
             <item
    android:drawable="@drawable/default_02_0040"
    android:duration="80"/>
              <item
    android:drawable="@drawable/default_02_0041"
    android:duration="80"/>
               <item
    android:drawable="@drawable/default_02_0042"
    android:duration="80"/>
                <item
    android:drawable="@drawable/default_02_0043"
    android:duration="80"/>
                 <item
    android:drawable="@drawable/default_02_0044"
    android:duration="80"/>
                  <item
    android:drawable="@drawable/default_02_0045"
    android:duration="80"/>

</animation-list> 
```

我使用 AnimationDrawable 制作了逐帧动画。当图像低于 20pic 时，应用程序工作正常，但在我在应用程序中添加更多图像后，出现崩溃。

任何可以分享一些教程如何制作动画可以加载更多图像？我买了两本书也用同样的方法来创建逐帧动画。有什么好书推荐吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:59:01.067

我猜这是她阻止你的某种记忆限制。说你的错误日志`adb logcat`有用吗？

您是否尝试过而不是同时加载所有帧，而是在需要时或仅在需要之前加载每一帧？使用[AnimationDrawable.addFrame](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html#addFrame%28android.graphics.drawable.Drawable,%20int%29)添加动态新帧，但我不知道如何在下一帧显示时检测，但我想这可以做到。

# nginx - Nginx pnp4nagios 与 php5-fpm

> ID：12420986
> 
> 赞同：2
> 
> 时间：2012-09-14T08:46:36.573
> 
> 标签：nginx, php

我已经为此工作了一天。我认为现在是寻求帮助的时候了。

我正在将我们的 nagios 移动到 nginx。我正在运行 nagios 以及我最近开发的 django 应用程序。不过，Pnp4nagios 给我带来了一些麻烦。我在 Nginx 中有以下配置。

```
location ~ ^(/pnp4nagios/.*\.php)(.*)$ {
    root /usr/share/pnp4nagios/html;

    include /etc/nginx/fastcgi_params;
    rewrite ^/pnp4nagios/(.*)$ /$1 break;

    fastcgi_split_path_info ^(.+\.php)(.*)$;
    fastcgi_param   SCRIPT_FILENAME     /usr/share/pnp4nagios/html/$fastcgi_script_name;
    fastcgi_param PATH_INFO $fastcgi_path_info;
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
} 
```

这导致： ![文件夹错误](../Images/7e0f4d16952cc6aeda75ca64d24a9478.png)

如您所见，pnp4nagios 认为它​​的 index.php 位于 172.16.10.28/index.php 中，但事实并非如此。它是一个子页面（或者我应该怎么称呼它？）。我希望它指向 172.16.10.28/pnp4nagios/index.php 但我不知道如何在我的 nginx 配置中执行此操作。我宁愿不改变 pnp4nagios 中的任何东西。但如果只有一行或几行，我愿意做出妥协。我的“根”网址中已经有一个 index.php。这就是为什么我想要一个子文件夹。

导致我采用这种方法的示例是： [Example1](http://www.barrymorrison.com/2011/05/nginx-nagios-pnp4nagios-working-conf-file/) [Example2](https://wiki.icinga.org/display/howtos/Setting+up+PNP+and+Icinga+with+Nginx)

因此，回顾一下我想要的（或我认为我需要的）就是从这个出发`img src="/index.php...`：`img src="/pnp4nagios/index.php...`

PS。我没有足够的积分来创建 pnp4nagios 标签

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:06:54.240

这对我有用：

```
location /pnp4nagios {
    alias /usr/share/pnp4nagios/html;
}   

location ~ ^(/pnp4nagios.*\.php)(.*)$ {
    root /usr/share/pnp4nagios/html;
    include /etc/nginx/fastcgi_params;
    fastcgi_split_path_info ^(.+\.php)(.*)$;
    fastcgi_param PATH_INFO $fastcgi_path_info;

   fastcgi_param SCRIPT_FILENAME $document_root/index.php;
    fastcgi_pass 127.0.0.1:9000; 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:57:28.187

您在配置中进行了重写，去除了 php4nagios 路径组件。因此，看到对 的引用也就不足为奇了`/index.php`。`info.php`您应该使用相应目录中的页面验证生成的 CGI 变量。违规行是：

`rewrite /pathinfo/(.*)/ $1 break;`

# javascript - JavaScript上下滚动不可预测

> ID：12420989
> 
> 赞同：1
> 
> 时间：2012-09-14T08:46:54.480
> 
> 标签：javascript, jquery, dynamic, scroll, scrolltop

我有一个大问题或小问题。我正在尝试滚动我的网站，因此每个容器都会滑到网站顶部的特定位置。但是，据我所见，有一个问题，因为如果您单击第一个项目，然后单击下一个，脚本会滚动到相同的位置，但是如果您单击上一个单击的项目上方的项目，它会滚动到页面底部。

我的脚本是一个简单的锚脚本，看看：

```
$("a.scrollForMe").each(function() {   // go through all links
var href = $(this).attr("href");
if (typeof(href) == "undefined") { return; }
if ($(this).attr("href").match(/^#/)) {   // if href starts with #
    $(this).click(function() {  // add a click event to it
        var name = $(this).attr("href").substring(1);  // get the anchor link

        // on click, scroll to the a with a name attribute matching the anchor
        $('html, body').animate({scrollTop: $("section[name='" + name + "']").offset().top - 420}, 1000);

        //alert ("This height is: " + $("section[name='" + name + "']").height() + " and it's name is " + name);
    });
}
}); 
```

如果您想了解它目前的工作方式，请查看我的网站：http: [//1st-issue.de/2012/redaxo/#sec10](http://1st-issue.de/2012/redaxo/#sec10)

我希望你能帮帮我！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:53:19.630

如果您使用此代码，可能会更好。我在保存页面上进行了测试。

```
$(document).ready(function() {
  $("a.scrollForMe").each(function() {   // go through all links
    var href = $(this).attr("href");
    if (typeof(href) == "undefined") { return; }
    if (href.match(/^#/)) {   // if href starts with #
      $(this).click(function() {  // add a click event to it
        var name = href.substring(1);  // get the anchor link

        // on click, scroll to the a with a name attribute matching the anchor
        $('html, body').animate({scrollTop: $("section[name='" + name + "']").prevAll("section").first().offset().top + 100 }, 1000);

        //alert ("This height is: " + $("section[name='" + name + "']").height() + " and it's name is " + name);
      });
    }
  });
}); 
```

如果我能给你一个建议，你不应该使用href来锚定，因为屏幕会自动跳转到锚点。使用您添加的代码代码，屏幕会闪烁，因为浏览器会转到相应的锚点并执行 scrollTop 动画。但这只是一个建议。

# facebook - 使用 App Secret 获取访问令牌。安全吗？

> ID：12420992
> 
> 赞同：0
> 
> 时间：2012-09-14T08:47:04.263
> 
> 标签：facebook, facebook-graph-api, facebook-apps

我正在构建一个应用程序，试图显示某个公共页面的最后 5 条新闻。要访问此信息，我需要使用以下内容获取访问令牌：

```
GET https://graph.facebook.com/oauth/access_token?
        client_id=YOUR_APP_ID
       &client_secret=YOUR_APP_SECRET
       &grant_type=client_credentials 
```

我的问题是：应用程序的秘密不是......嗯，秘密？

如果我使用 jQuery 进行 GET 查询，任何人都可以查看脚本文件并了解它。这安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:15:35.803

令牌永远不会改变（除非密码更改/阻止/...）。您应该使用浏览器检索一次令牌。从那时起，您可以在不使用应用密码的情况下使用令牌。

# r - R：将列表的元素拆分为子列表

> ID：12420994
> 
> 赞同：17
> 
> 时间：2012-09-14T08:47:11.353
> 
> 标签：r, list

我有一个具有以下结构的数据框：

```
pat <- c(rep(1,50), rep(2,50), rep(3,50))
inc <- rep(c(rep(1,5), rep(2,5), rep(3,5), rep(4,5), rep(5,5),
             rep(6,5), rep(7,5), rep(8,5), rep(9,5), rep(10,5)), 3)
df <- data.frame(cbind(pat, inc)) 
```

df 被分成一个元素列表：

```
all.inc = split(df, inc) 
```

现在我想将此列表的每个元素拆分为子列表。就像是：

```
all.pat = split(all.inc, pat) 
```

这显然行不通。我已经尝试过 和 的`plyr`功能`lapply`，但没有让它工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T08:55:12.033

使用`lapply`：

```
lapply(all.inc, function(x) split(x, x$pat)) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-14T09:00:49.790

如果您想一次拆分所有数据框，可以使用

```
split(df, interaction(df$pat,df$inc)) 
```

但是，返回的值将是一个数据框列表，这与拆分列表元素得到的结果略有不同。

# jodatime - Jodatime - 为什么我的 dateTimeFormatter parseLocalDate 总是给我一个月的时间？

> ID：12420995
> 
> 赞同：0
> 
> 时间：2012-09-14T08:47:15.687
> 
> 标签：jodatime

我正在尝试将字符串解析为日期，但由于某种原因，我的月份总是显示为 1...这是一个失败的测试，向您展示我的意思：

```
@Test
public void shouldConvertStringToDate() {
    String date1 = "2012-06-28 23:01:54";
    DateTimeFormatter dateTimeFormatter = DateTimeFormat.forPattern("YYYY-MM-DD HH:mm:ss");
    LocalDate date = dateTimeFormatter.parseLocalDate(date1);
    Assert.assertEquals(2012, date.getYear());
    Assert.assertEquals(6, date.getMonthOfYear()); //actual is 1... ???
    Assert.assertEquals(28, date.getDayOfMonth());
} 
```

知道发生了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:28:34.790

天数不应为`dd`小写`DD`。
`D`- 一年
`d`中的一天 - 一个月中的一天
所以你的格式化程序应该是

```
DateTimeFormat.forPattern("YYYY-MM-dd HH:mm:ss"); 
```

# jpa - IntelliJ IDEA 在 JPQL 中用“无法解析符号”突出显示 @Entity 类名

> ID：12420996
> 
> 赞同：45
> 
> 时间：2012-09-14T08:47:21.033
> 
> 标签：jpa, intellij-idea, annotations, jpql

IntelliJ IDEA 在 JPQL 中用红色“无法解析符号”突出显示持久的 @Entity 类名称，这会分散注意力并掩盖实际问题。

因此，例如，我在我的存储库中声明了一个查询：

```
private static final String READ_BY_CANDIDATE_KEY = "SELECT cr FROM Entity AS cr left join cr.relationship AS re left join fetch cr.relationship2 WHERE re.candidateKey=:ID"; 
```

.. 并且“Entity”带有下划线，即使“Entity”是一个有效的类名，并且具有@Entity 注释。当代码实际运行时，没有问题。

我想需要某种配置才能让 IDE 知道哪些类是有效的？该配置是如何完成的？

**更新**：我确实有一个 JPA 方面，但它没有看到带注释的类。它似乎需要一个 persistence.xml 或 orm.xml （我的项目没有使用）

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-11T16:43:22.853

似乎您没有在构面配置中选择默认的 JPA 提供程序。根据您使用的提供商，从列表中选择一个。可用选项包括 EclipseLink、Hibernate、OpenJPA、TopLink

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-14T15:11:01.010

确保您在 IntelliJ IDEA 中为您的模块[配置了](https://www.jetbrains.com/help/idea/2016.1/hibernate-and-jpa-facet-pages.html)[JPA](http://www.jetbrains.com/idea/webhelp/enabling-jpa-support.html)或[Hibernate](http://www.jetbrains.com/idea/webhelp/enabling-hibernate-support.html) facet 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-11-06T06:42:34.593

文件 -> 项目结构

在左侧窗格中选择“构面”。如果没有列出 JPA，请单击“+”号并添加“JPA”

在同一对话框的底部，在“默认 JPA 提供程序”中，选择 - “休眠”，按“确定”

如果@Table annotation 有错误，请配置并选择数据源

现在选择的表名应该被识别为实体类名

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-27T22:47:58.017

如果您使用 Spring Boot 和 maven，请在`pom.xml`文件中添加此依赖项。

```
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-jpa</artifactId>
</dependency> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-13T12:36:18.167

有时 JPA Buddy 插件会阻止 springboot JPA 配置。确保这不会导致问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-29T18:22:50.097

Try adding this dependency if you are using Spring-boot.
spring-boot-starter-data-jpa

# php - 自定义功能以更改自定义帖子类型中的摘录标题和帖子缩略图

> ID：12420997
> 
> 赞同：0
> 
> 时间：2012-09-14T08:47:26.487
> 
> 标签：php, wordpress, custom-post-type, meta-boxes

我想自定义摘录文本以使其更接近我的自定义帖子类型，因此我决定删除元框并重新创建它们。我在我的functions.php中使用了这段代码：

```
function custom_post_type_boxes(){
    remove_meta_box( 'postimagediv', 'alma_client', 'side' );
    add_meta_box( 'postimagediv', __( 'Client logo' ), 'post_thumbnail_meta_box', 'alma_client', 'normal', 'high' );
    remove_meta_box( 'postexcerpt', 'alma_client', 'normal' );
    add_meta_box( 'postexcerpt', __( 'List of jobs for this client' ), 'post_excerpt_meta_box', 'alma_client', 'normal', 'core' );
}
add_action('do_meta_boxes', 'custom_post_type_boxes'); 
```

由于某种原因，缩略图元框工作正常，但摘录元框没有被绘制。我认为问题可能出`post_excerpt_meta_box`在回调函数附近，但我可能是错的。

请帮忙！我想我离修复它太近了，但无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:24:11.323

好吧，问题不在于`post_excerpt_meta_box`. 出于某种原因，当我将优先级从更改`'core'`为它时，`'high'`它起作用了。我仍然不知道为什么它是看不见的，`'core'`好像有人可以告诉我一样，我仍然想知道。谢谢

结果代码行是：

```
add_meta_box( 'postexcerpt', __( 'List of jobs for this client' ), 'post_excerpt_meta_box', 'alma_client', 'normal', 'high' ); 
```

# python - 从 python 中的 xinput 测试中读取标准输出

> ID：12420999
> 
> 赞同：1
> 
> 时间：2012-09-14T08:47:34.917
> 
> 标签：python, linux, input, pipe, xorg

我正在尝试将 xinput 的输出流式传输到我的 python 程序中，但是我的程序只是等待并保持空白。我认为这可能与缓冲有关，但我不能说。运行`xinput test 15`给了我我的鼠标移动，但这样做不会打印它。顺便说一句，要找出您的 mouseid，只需键入`xinput`它就会列出您的设备。

```
#!/usr/bin/env python
import sys
import subprocess

# connect to mouse
g = subprocess.Popen(["xinput", "test", str(mouse_id)], stdout=subprocess.PIPE)

for line in g.stdout:
    print(line)
    sys.stdout.flush() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:50:01.127

看看[sh](http://amoffat.github.com/sh/index.html)，特别是本教程[http://amoffat.github.com/sh/tutorials/1-real_time_output.html](http://amoffat.github.com/sh/tutorials/1-real_time_output.html)

```
import sh
for line in sh.xinput("test", mouse_id, _iter=True):
    print(line) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:50:35.310

你的代码对我有用；`xinput`但是，如果未连接到 tty，cmd似乎会缓冲其输出。运行代码时，继续移动鼠标，最终`xinput`应该刷新标准输出，你会看到你的行以块的形式出现......至少我在运行你的代码时做到了。

我重新编写了您的代码以消除缓冲，但我无法让它不成块出现，因此我认为这`xinput`是罪魁祸首。当未连接到 TTY 时，它不会用每个新事件刷新标准输出缓冲区。这可以用 来验证`xinput test 15 | cat`。移动鼠标将导致数据以缓冲块的形式打印；就像你的代码一样。

如果有帮助，我的测试代码如下

```
#!/usr/bin/python -u

# the -u flag makes python not buffer stdios

import os
from subprocess import Popen

_read, _write = os.pipe()

# I tried os.fork() to see if buffering was happening
# in subprocess, but it isn't

#if not os.fork():
#    os.close(_read)
#    os.close(1) # stdout
#    os.dup2(_write, 1)
#
#    os.execlp('xinput', 'xinput', 'test', '11')
#    os._exit(0) # Should never get eval'd

write_fd = os.fdopen(_write, 'w', 0)
proc = Popen(['xinput', 'test', '11'], stdout = write_fd)

os.close(_write)

# when using os.read() there is no readline method
# i made a generator
def read_line():
    line = []
    while True:
        c = os.read(_read, 1)
        if not c: raise StopIteration
        if c == '\n':
            yield "".join(line)
            line = []
            continue
        line += c

readline = read_line()

for each in readline:
    print each 
```