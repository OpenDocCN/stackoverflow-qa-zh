# StackOverflow 问答 11448000-11448999

# unit-testing - Junit：改变测试运行的顺序

> ID：11448001
> 
> 赞同：1
> 
> 时间：2012-07-12T08:39:11.420
> 
> 标签：unit-testing, netbeans, junit

我在一个班级中有 100 个测试非常混乱，并通过单击“测试项目（...）来运行所有测试。它们以随机顺序运行，我希望它们以特定顺序运行 - 从头到尾，和我写的顺序一样。在eclipse中这不是问题，因为eclipse就是这样工作的，如何在netbeans中做到这一点？

任何帮助将不胜感激。

编辑（由于答案）：清除日志需要测试顺序。他们是独立的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:44:59.963

如果您的测试需要以特定顺序运行，则说明您的设计有问题。需要一个接一个地运行的 2 个测试是 1 个测试。在寻找解决方案之前考虑这一点。

检查这个[https://blogs.oracle.com/mindless/entry/controlling_the_order_of_junit](https://blogs.oracle.com/mindless/entry/controlling_the_order_of_junit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T08:46:36.347

在 99.9% 的情况下让测试依赖于其他测试是一个非常糟糕的主意。单元测试应该彼此独立，否则您可能会遇到一连串错误，或者（甚至更糟）一个测试失败，因为另一个测试之前做了一些事情。

如果您仍然想经历这种痛苦，您将需要使用支持测试依赖项的不同单元测试框架（例如[TestNG](http://testng.org/doc/documentation-main.html) - 请参阅dependsOnMethods）。

Junit 不支持此功能，因为许多人认为它是一种不好的做法（有很好的理由）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T10:01:37.870

下一个 JUnit 版本将[支持测试方法的排序。](https://github.com/KentBeck/junit/pull/386)标准的 Maven Surefire 插件[已经支持测试方法的排序](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#runOrder)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T10:33:25.250

Netbeans 与 ant 构建文件有很好的集成。您可以编写一个可以按顺序执行每个测试的特定 ant 目标。

# wpf - 从 DataGrid 填充数据集

> ID：11448002
> 
> 赞同：0
> 
> 时间：2012-07-12T08:39:20.720
> 
> 标签：wpf, c#-4.0

当数据集与数据网格绑定时，哪个属性保存该数据集；

如果是 ; 那么它可以返回 DataGrid 的数据集吗？

我认为没有任何属性可以从 datagrid 返回数据集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:22:15.097

如果您在 xaml 中有数据网格：

```
 <Grid>
      <DataGrid AutoGenerateColumns="True" Height="200" HorizontalAlignment="Left" Margin="41,32,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="200" />
   </Grid> 
```

并且您正在将数据集分配给数据网格，例如：

```
dataGrid1.ItemsSource = ds.Tables[0].AsDataView(); 
```

然后您可以执行以下操作：

```
DataTable dt = ((DataView)dataGrid1.ItemsSource).ToTable();
DataSet dsNew = new DataSet();
dsNew.Tables.Add(dt); 
```

您`dsNew`将从数据网格中保存表格。

# python - mongodb:find 和 update 运算符可以组合成一个 sql 命令吗？

> ID：11448005
> 
> 赞同：1
> 
> 时间：2012-07-12T08:39:45.020
> 
> 标签：python, mongodb, nosql

我有一个收藏：`{"_id":1,"a":3,"b":5，“a+b”:0}`

我想做这个：

```
y=db.collection.find({"_id":1},{"a":1,"b":1})
sum=y["a"]+y["b"]
db.collection.update({"_id":1},{"$set":{"a+b",sum}}) 
```

所以集合将是：`{"_id":1,"a":3,"b":5,"a+b":8}`

我可以将这两个运算符组合成一个 sql 命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:46:25.423

不，您不能在一个命令中执行此操作，因为 mongodb 不支持更新中的字段引用。

# jquery - jQuery.ajax() 方法的异步选项已弃用，现在怎么办？

> ID：11448011
> 
> 赞同：53
> 
> 时间：2012-07-12T08:40:07.610
> 
> 标签：jquery, ajax, mobile

从 jQuery 1.8 开始，不**推荐使用**[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)`async:false`中的。 但是，在后台正在进行 AJAX 通信的情况下，您见过多少带有“加载屏幕”的网页？我可能见过成千上万的人。

 **我的情况是我正在编写一个需要加载语言文件的移动应用程序。一开始我加载语言文件，然后从语言文件中检索按钮和其他 GUI 元素的文本。

这对我来说真的很糟糕。因为如果缺少语言文件，则不应出现 GUI。那么我该如何解决呢？将我所有的代码放在`success`回调中？对我来说，这似乎不是一个好的编码实践。我可以用另一种方式解决吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-12T08:46:44.923

解决方案是手动添加一个覆盖以防止用户与界面交互，然后在 AJAX 查询完成后将其删除。

```
$(function() {
    show_overlay();        

    $.ajax({
        // Query to server
    }).done(function() {
        // Verify good data
        // Do stuff
        remove_overlay();
    });
}); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-01T08:19:06.257

我阅读了票中关于弃用此参数的[官方讨论](http://bugs.jquery.com/ticket/11013)，这是我的理解：

*   问题是为同步 AJAX实现[Promise](http://api.jquery.com/Types/#Promise) s ( [1 ) 会给它们带来开销。](http://api.jquery.com/promise/)

*   同步 AJAX 的真实世界用例有很多，例如在页面卸载之前保留状态。因此，此功能将保留，但您使用它的方式可能会改变。

*   最接近的解决方案（登陆 1.8？）是在 is 时仅支持回调（但不支持 Promises `async`）`false`。

**总结**：`async: false`如果必须，请继续使用，但要注意它的缺点（阻塞 VM）。不用担心，如果此功能从表单中删除，您将获得另一种选择[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T08:49:04.553

我敢打赌，在等待 AJAX 调用时，这 1000 个页面中的*许多页面实际上并没有阻塞 UI。*相反，他们可能会在调用时用等待屏幕掩盖 UI，然后在响应处理程序上将其删除。

有很多方法可以隐藏 UI（您甚至可以使用设置为 Modal 且没有转义或关闭按钮的 jQuery UI 对话框），所以我将由您决定。但是代码的布局是这样的：

```
var someFunction = function () {

    // any pre-conditions to the logic
    // obscure the UI here

    $.ajax({
        url: 'ajax/test.html',
        success: function(data) {

            // handle the response
            // show the UI again

        },
        error: function(data) {

            // handle the response
            // show the UI again

        }
    }); 
} 
```

我确信有多种方法可以实现这种事件顺序，但这是一般的想法。阻止 UI 从来都不是真正的意图，我认为 jQuery*包含*该功能比*删除*它更困难。它是异步的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T08:46:38.407

为什么要使用 ajax 来获取这个文件？只需使用`script`标签包含它。

在任何情况下，您都不会将所有代码都放在 onSuccess 中——而是从那里调用一个函数来启动您的代码运行。**

# hibernate - 休眠正常，但 ElipseLink 失败：类 [Y] 的属性 [x] 映射到数据库中的主键列 不允许更新

> ID：11448013
> 
> 赞同：1
> 
> 时间：2012-07-12T08:40:30.920
> 
> 标签：hibernate, jpa, eclipselink

我有一个非常简单的基于控制台（不是应用程序服务器部署）的 JPA 程序，我针对 EclipseLink 和 Hibernate 提供程序进行了测试。所有代码都是 JPA，所以我想我可以毫无问题地切换提供程序。但是，当使用 Hibernate 作为提供程序时程序成功，但在 EclipseLink 中失败。

关键部分是这个（我在防火墙后面，所以我看不到格式，因为“SO 需要来自另一个域的 JavaScript ......”所以如果格式不正确，我很抱歉 - 我会在家里进行格式化）：

```
em.getTransaction().begin();
Employee emp = service.createEmployee(id, "John Doe", 45000,1);
em.getTransaction().commit();                                        
System.out.println("Persisted "+emp);
em.getTransaction().begin();
em.getTransaction().commit(); 
```

我曾经在第二个空事务中做一些事情，但是在缩小问题范围时，我注意到即使我只是 begin() 和 commit() 立即不做任何事情，它也会失败。有趣的部分是 EclipseLink（请参阅帖子底部的堆栈跟踪）似乎抱怨实体 Specialty 的 id 属性正在更新，尽管它没有。

Employee实体有一个Specialty实体的外键（每个Employee都有一个Specialty），即来自Employee的多对一​​关系：

```
 @Entity
 public class Employee {
 @Id                                                            
 @Basic(optional = false)                                       
 @NotNull                                                       
 private int id;                                                
 private String name;                                           
 private long salary;                                           
 @JoinColumn(name = "spc_id", referencedColumnName = "id")      
 @ManyToOne(optional = false)                                   
 private Specialty spcId;
 ...} 
```

并且专业类定义为：

```
@Entity                                                  
public class Specialty {                                 
@Id                                                  
@Basic(optional = false)                             
@NotNull                                             
private int id;
... } 
```

当使用 Hibernate 作为 JPA 提供程序时，代码可以顺利执行。使用 EclipseLink 时，它会失败，并在本文底部找到堆栈跟踪。

更新：经过进一步的实验，我发现以下代码适用于两个提供程序：

```
em.getTransaction().begin();                                      
Employee emp = service.createEmployee(id, "John Doe", 45000, 1);  
em.getTransaction().commit();                                     
System.out.println("Persisted " + emp);                           
EntityManager em2 = emf.createEntityManager();
em2.getTransaction().begin();                                     
em2.getTransaction().commit();                                    
em2.close(); 
```

这仍然不能解释为什么 EclipseLink 在尝试在同一个实体管理器对象上开始（）/提交（）事务时失败（em - 请参阅帖子开头的代码），以及为什么它会失败并显示如此神秘的消息（抱怨关于正在更新的专业类的主键）。

堆栈跟踪：

```
[java] [EL Info]: 2012-07-12 11:21:09.453--ServerSession(23846608)--EclipseLink, version: Eclipse Persistence Services - 2.4.0.v20120608-r11652
 [java] [EL Info]: connection: 2012-07-12 11:21:09.59--ServerSession(23846608)--file:/home/mperdikeas/playground/jpa/01-employee-job/prj/use/build/employeetest.jar_EmployeeService login successful
 [java] Exception in thread "main" javax.persistence.RollbackException: Exception [EclipseLink-7251] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.ValidationException
 [java] Exception Description: The attribute [id] of class [mp.Specialty] is mapped to a primary key column in the database. Updates are not allowed.
 [java]     at org.eclipse.persistence.internal.Persisted mp.Employee@ea70f2
 [java] [EL Warning]: 2012-07-12 11:21:09.735--UnitOfWork(32118258)--Exception [EclipseLink-7251] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.ValidationException
 [java] Exception Description: The attribute [id] of class [mp.Specialty] is mapped to a primary key column in the database. Updates are not allowed.
 [java] [EL Info]: connection: 2012-07-12 11:21:09.738--ServerSession(23846608)--file:/home/mperdikeas/playground/jpa/01-employee-job/prj/use/buildjpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:102)
 [java]     at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:63)
 [java]     at mp.EmployeeTest.main(EmployeeTest.java:29)
 [java] Caused by: Exception [EclipseLink-7251] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.ValidationException
 [java] Exception Description: The attribute [id] of class [mp.Specialty] is mapped to a primary key column in the database. Updates are not allowed.
 [java]     at org.eclipse.persistence.exceptions.ValidationException.primaryKeyUpdateDisallowed(ValidationException.java:2458)
 [java]     at org.eclipse.persistence.mappings.foundation.AbstractDirectMapping.writeFromObjectIntoRowWithChangeRecord(AbstractDirectMapping.java:1214)
 [java]     at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildRowForUpdateWithChangeSet(ObjectBuilder.java:1378)
 [java]     at org.eclipse.persistence.internal.queries.DatabaseQueryMechanism.updateObjectForWriteWithChangeSet(DatabaseQueryMechanism.java:1003)
 [java]     at org.eclipse.persistence.queries.UpdateObjectQuery.executeCommitWithChangeSet(UpdateObjectQuery.java:84)
 [java]     at org.eclipse.persistence.internal.queries.DatabaseQueryMechanism.executeWriteWithChangeSet(DatabaseQueryMechanism.java:286)
 [java]     at org.eclipse.persistence.queries.WriteObjectQuery.executeDatabaseQuery(WriteObjectQuery.java:58)
 [java]     at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:852)
 [java]     at org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork(DatabaseQuery.java:751)
 [java]     at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWorkObjectLevelModifyQuery(ObjectLevelModifyQuery.java:108)
 [java]     at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWork(ObjectLevelModifyQuery.java:85)
 [java]     at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2875)
 [java]     at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1602)
 [java]     at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1584)
 [java]     at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1535)
 [java]     at org.eclipse.persistence.internal.sessions.CommitManager.commitChangedObjectsForClassWithChangeSet(CommitManager.java:265)
 [java]     at org.eclipse.persistence.internal.sessions.CommitManager.commitAllObjectsWithChangeSet(CommitManager.java:128)
 [java]     at org.eclipse.persistence.internal.sessions.AbstractSession.writeAllObjectsWithChangeSet(AbstractSession.java:3914)
 [java]     at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabase(UnitOfWorkImpl.java:1419)
 [java]     at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitToDatabase(RepeatableWriteUnitOfWork.java:634)
 [java]     at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabaseWithChangeSet(UnitOfWorkImpl.java:1509)
 [java]     at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitRootUnitOfWork(RepeatableWriteUnitOfWork.java:266)
 [java]     at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1147)
 [java]     at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:84)
 [java]     ... 2 more
 [java] /employeetest.jar_EmployeeService logout successful 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-21T13:54:56.920

EclipseLink 不允许您更新 PK（如果此 PK 没有任何 FK，某些 DBMS 允许这样做）

有2个解决方法：

1.  尝试删除旧记录，然后插入新记录。
2.  使用代理 PK 代替业务 PK（您仍然可以在业务 PK 字段上添加唯一约束），在这种情况下，虚拟代理键不会更改，这里是[两个键之间的比较](https://stackoverflow.com/questions/63090/surrogate-vs-natural-business-keys)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T11:23:18.483

它可能是：

```
@Entity                                                  
public class Specialty {                                 
@Id                                                  
@Basic(optional = false)                             
@NotNull
@GeneratedValue(strategy = GenerationType.AUTO)                                         
private int id;
... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-17T17:32:04.037

`<property name="eclipselink.weaving.internal" value="false"/>`按照[http://blogs.nologin.es/rickyepoderi/index.php?/archives/95-Weaving-Problem-in-EclipseLink.html](http://blogs.nologin.es/rickyepoderi/index.php?/archives/95-Weaving-Problem-in-EclipseLink.html)尝试。

# linux - i.mx 287 EVK (FreeScale) 板未检测到 USB

> ID：11448018
> 
> 赞同：0
> 
> 时间：2012-07-12T08:40:49.310
> 
> 标签：linux, usb, arm

我正在使用飞思卡尔的 i.mx 287 EVK 进行应用程序开发。

我成功移植了linux内核和rootfs。

但问题是我的硬件在连接时无法检测到 U 盘。

/dev 目录中没有任何变化，日志（dmesg）中也没有任何内容。

请帮我解决它。

硬件同时具有 USB 主机和设备端口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:57:19.863

我会检查的基本事项：

*   检查其他USB。
*   连接 USB 鼠标或 USB 键盘。检查他们是否在工作。检查设备是否通电。
*   如果你没有得到电源，肯定是内核配置有问题。

`make menuconfig`从 linux 文件夹中，转到**USB 驱动程序部分**并**启用 USB pendrive 工作所需的所有标志**。

 **简单的方法是获取正在运行的 linux 内核的配置文件（kconfig），将其复制到内核中，编译并运行它。它应该工作

我做了上述事情已经有一段时间了。但这应该可以帮助您摆脱当前的问题。**

# scala - 将 ParIterable 转换为 Iterable

> ID：11448021
> 
> 赞同：1
> 
> 时间：2012-07-12T08:40:55.397
> 
> 标签：scala

这是一个非常简短的问题。

我有一个`ParIterable`集合，我想将它“转换回”为`Iterable`. 那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:50:20.747

相应的[ScalaDoc](http://www.scala-lang.org/api/current/scala/collection/parallel/ParIterable.html)说：

> 方法：
> 
> ```
> def seq: Sequential
> def par: Repr 
> ```
> 
> 分别生成集合的顺序或并行实现。方法 par 仅返回对此并行集合的引用。方法 seq 是有效的——它不会复制元素。相反，它将使用相同的底层数据结构创建集合的顺序版本。请注意，通常顺序集合并非如此——它们可能会复制元素并产生不同的底层数据结构。
> 
> toMap、toSeq 或 toSet 方法与 par 和 seq 的组合是在不同集合类型之间进行更改的灵活方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T08:48:56.447

是的，只要打电话`.seq`。例子：

```
scala> val x = Iterable(1,2,3).par
x: scala.collection.parallel.ParIterable[Int] = ParVector(1, 2, 3)

scala> x.seq
res6: Iterable[Int] = Vector(1, 2, 3) 
```

# php - 类字段作为对象数组

> ID：11448024
> 
> 赞同：0
> 
> 时间：2012-07-12T08:41:08.610
> 
> 标签：php, oop

我已经宣布了下一个课程：

```
class Background{ 
    protected $users = array() ;
 ......
 } 
```

我使用`$users`的数组`User()`，这是我创建的另一个对象。当我尝试使用此方法时出现问题：

```
function createB(){
        foreach($this->users as $user){
            $name = $user->getName();
        }
    } 
```

`$user->getName()`实际上是一个错误，因为没有`$user`被视为一个对象。这可能是什么原因？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:54:10.707

问题可能在于 $users 实际上没有被填充尝试添加它以防止此类问题。如果这没有帮助，请添加有关如何填充 $users 的信息。

```
function createB()
{
    if(!empty($this->users))
    {
        foreach($this->users as $user)
        {
            if($user instanceof User)
            {
                $name = $user->getName();
            }
        }
    }
} 
```

# c# - 在 LINQ 中创建表达式

> ID：11448030
> 
> 赞同：-10
> 
> 时间：2012-07-12T08:41:36.303
> 
> 标签：c#, linq

我的 LINQ 查询类似于下面的代码。

```
 var data2 = data.Where(c => String.Format("{0:MM/dd/yyyy}", c.OrderDate) == "07/04/1996"); 
```

我需要在下面的表达式中自定义格式化列的谓词。我需要为谓词编写表达式并根据格式过滤数据。请检查下面的代码。

```
pred =Expression.Equal(membertype, Expression.Constant(value, type));
lambda = Expression.Lambda(predicate, paramExpression);
source.Where(paramExpression, predicate); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:34:33.577

`.Where`这是一个动态创建的示例。

```
static void DynamicWhereBuilder() {
  var datas = new Data[] {
    new Data { OrderDate  = "07/04/1996"},
    new Data { OrderDate  = "07/04/1990"},
    new Data { OrderDate  = "07/04/2001"},
    new Data { OrderDate  = "2012/04/07"}
  };
  IQueryable<Data> queryableData = datas.AsQueryable<Data>();

  var formatConstant = Expression.Constant("{0:MM/dd/yyyy}", typeof(string));
  var parameter = Expression.Parameter(typeof(Data), "dataArg");
  var property = Expression.Property(parameter, "OrderDate");

  var left = Expression.Call(property, typeof(string).GetMethod("Format", new Type[] { typeof(string), typeof(object) }), formatConstant, property);
  var right = Expression.Constant("07/04/2001", typeof(string));

  var equal = Expression.Equal(left, right);
  var whereCallExpression = Expression.Call(
    typeof(Queryable),
    "Where",
    new Type[] { queryableData.ElementType },
    queryableData.Expression,
    Expression.Lambda<Func<Data, bool>>(equal, new ParameterExpression[] { parameter }));
  var results = queryableData.Provider.CreateQuery<Data>(whereCallExpression); // returns the object with OrderDate = "07/04/2001"
} 
```

# extjs4 - 使用 ExtJS 生成大约一千个或更多控件

> ID：11448035
> 
> 赞同：2
> 
> 时间：2012-07-12T08:42:12.777
> 
> 标签：extjs4

我们决定将 ExtJS 用于我们的大型应用程序的网络改造之一，我们将不得不生成屏幕/表单，我们必须在表单中的完整可编辑网格中呈现大约一千个或更多控件。

那么我可以知道这样做的最佳方法是什么？

我已经尝试生成大约一千个控件，并且在客户端需要大约 6 秒以上，这也将取决于客户端配置，我很肯定它在大多数情况下至少是双核系统.

但是在本地主机上超过 6 秒就像在互联网上超过 10 秒，所以我很担心，当负载很高时，我仍然可以选择混合普通的 html 表单/控件，但是它会错过 ExtJS 触摸（组合/数字控件等.)，所以任何帮助或如果您有类似的经验，请分享。

在上述情况下，XTemplate 会更快吗？我对 ExtJS 还是新手，所以如果你知道/使用过，请分享最佳实践。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T09:01:36.210

最好的方法是不要这样做。无论您如何操作，创建数千个控件都需要大量内存。正如您所注意到的，这会使应用程序变得非常缓慢。

解决方案是将元素保留在服务器上，并使用某种形式的分页来仅创建用户实际可以看到的元素。

分页可以是显式的（“加载接下来的 10 行”）或通过在滚动条到达右/底端并加载更多行时触发事件来隐式分页。

通常，您甚至可以对用户隐藏它。总是加载一整行（隐藏同一行中不可见的元素，因为浏览器窗口太窄通常没有多大帮助）。

在服务器上，您将知道您有多少行。加载前 20 行并显示它们。找到行的高度（理想情况下，它们应该都是相同的高度）并在 20 行下方创建一个空的 DIV，以扩展滚动视图。这使它**看起来**好像所有的行都在那里（用户看到正确的滚动条在滚动时不会跳转）。

一旦看到那个空的 div，加载更多行并缩小它。

# java - 横向页面上的 iText TextField - 输入文本未旋转

> ID：11448036
> 
> 赞同：1
> 
> 时间：2012-07-12T08:42:13.707
> 
> 标签：java, pdf-generation, itext, textfield, pdf-form

我正在使用 iText 生成 PDF，并希望包含 iText 表单和 TextFields，以便用户可以电子方式填写 PDF 表单，而不是打印出来。

我在这里遵循了示例：http: [//itextpdf.com/examples/iia.php ?id=161](http://itextpdf.com/examples/iia.php?id=161)

在这里：http: [//itextpdf.com/examples/iia.php ?id=162](http://itextpdf.com/examples/iia.php?id=162)

到目前为止，我的横向 PDF 上有一个 TextField，我可以单击并输入文本。

我有两个问题：

1.  文本字段对齐。要单击文本字段，我必须将鼠标放在我也添加了 TextField 的单元格的右侧。如何将 TextField 与单元格对齐？
2.  输入文本旋转。一旦我输入了文本，它就会与页面的其余部分旋转 90 度显示。如何设置此显示文本的旋转？

输入文本的旋转是最让我烦恼的事情。我尝试在单元格和 TextField 上设置旋转，但这似乎没有效果。

有什么建议么？

谢谢

这是我的代码：

```
 int rotation = document.getPageSize().getRotation();

    PdfFormField pdfForm = PdfFormField.createEmpty(docWriter);
    coverSheetPdfForm.setFieldName("Form");
    coverSheetPdfForm.setRotate(rotation);

    ...

    cell = new PdfPCell(borderedTable("Cell Title:", tblHeadingFont, "", borderColor));
    cell.setColspan(1);
    cell.setPadding(5f);
    cell.setBorderWidth(0f);
    cell.setHorizontalAlignment(PdfPCell.ALIGN_LEFT);
    cell.setMinimumHeight(100f);

    TextField textField = new TextField(docWriter, new Rectangle(50, 50,rotation), "cell_text_field");
    textField.setFontSize(12);
    textField.setRotation(rotation);
    textField.setVisibility(TextField.VISIBLE);
    textField.setBorderColor(borderColor);
    textField.setBorderWidth(BORDER_WIDTH);

    cell.setCellEvent(new ChildFieldEvent(pdfForm, textField.getTextField(), 1, rotation));

    .....

    docWriter.addAnnotation(pdfForm); 
```

以及我从示例页面借用的 ChildFieldEvent 代码，并添加了一个额外的旋转参数：

```
/**
 * Creates a ChildFieldEvent.
 * @param parent the parent field
 * @param kid the child field
 * @param padding a padding
 * @param rotation 
 */
public ChildFieldEvent(PdfFormField parent, PdfFormField kid, float padding, int rotation) {
    this.parent = parent;
    this.kid = kid;
    this.padding = padding;
    this.rotation = rotation;
}

/**
 * Add the child field to the parent, and sets the coordinates of the child field.
 * @param cell
 * @param rect
 * @param cb 
 * @see com.lowagie.text.pdf.PdfPCellEvent#cellLayout(com.lowagie.text.pdf.PdfPCell,
 *      com.lowagie.text.Rectangle, com.lowagie.text.pdf.PdfContentByte[])
 */
@Override
public void cellLayout(PdfPCell cell, Rectangle rect, PdfContentByte[] cb) {
    try {
        parent.addKid(kid);
        kid.setWidget(new Rectangle(rect.getLeft(padding), rect.getBottom(padding),
                rect.getRight(padding), rect.getTop(padding),rotation),
                PdfAnnotation.HIGHLIGHT_INVERT);
    } catch (Exception e) {
        throw new ExceptionConverter(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:25:15.523

我做了更多测试，看起来 Ubuntu PDF 文件浏览器（文档查看器）在 Windows Adob​​e PDF 查看器中查看相同文件时无法正确呈现 PDF，表单看起来不错。

我会做更多的测试并报告。

# vb.net - 从 php 页面接收表单

> ID：11448041
> 
> 赞同：2
> 
> 时间：2012-07-12T08:42:38.483
> 
> 标签：vb.net

我有一个场景，我被困了一天。我正在尝试从中提取一些数据的这个 PHP 网站。所以我去网站，我可以填写这张表格，当我点击“提交”时，它会将我带到另一个页面，其中有一个包含我想要的所有信息的表格。

我拿了那个链接并试图解析 HTML，但没有表格。我从另一台计算机检查了该链接，但它没有加载表格。

所以我不确定我应该在这里做什么才能到达那张桌子？我必须做某种http请求吗？如果是这样，如何在 vb.net 中完成？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:01:44.377

听起来你在这方面遇到了一些基本的困难。根据您的浏览器尝试右键单击“表格”页面和“查看源代码”。将 HTML 保存到本地文件并使用 Visual Studio、Notepad++ 或任何其他 HTML 编辑器打开它。

Whta 在浏览器中显示时看起来像一个表格，可以编码为一个表格、一个 div，甚至是一个具有一些巧妙格式的列表。解析其中的每一个都是一项不同的任务。没有看到该页面，我认为没有人可以为您提供更多帮助。

# bash - 在 Bash 中：我可以将 for 循环中的 args 列表视为列表吗？

> ID：11448042
> 
> 赞同：0
> 
> 时间：2012-07-12T08:42:42.213
> 
> 标签：bash, for-loop, arguments

我可以将 for 循环中的 args 列表视为列表吗？我可以使用列表索引访问列表中的元素吗？让这个伪代码运行：

```
#!/bin/bash
for i in 1 2; do
    j=the next element in the for loop
    echo current is $i and next is $j
done 
```

输出应该是第一次迭代：

> 当前为 1，下一个为 2

循环的第二次迭代会是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:55:02.407

试试这个代码：

```
declare -a data=(1 2)

for (( i = 0 ; i < ${#data[@]} ; i++ )) do
    elem=${data[$i]}
    j=$((i+1))
    nextElem=${data[$j]}
    echo current is $i $elem and next is $j $nextElem
done 
```

有关的：

*   [Bash Shell 脚本遍历数组值](http://www.tech-recipes.com/rx/636/bash-shell-script-iterate-through-array-values/)
*   [带有 15 个示例的终极 Bash 数组教程](http://www.thegeekstuff.com/2010/06/bash-array-tutorial/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T10:10:40.490

我觉得 bash 的人总是追求最复杂的事情。你也可以忍受：

```
# Let's say we want to access elements 1,3,3,7 in this order
cur=$1
for next in "$3" "$3" "$7"
do
    printf "cur: %s, next: %s\n" "$cur" "$next"
    cur=$next
done 
```

`What will it be for the`~~`second`~~`last iteration of the loop?`

如果你不能回答，我也一样。这通常意味着你想得太复杂了。我认为更简单的我上面的版本没有以非常自然的方式有这个角落，因为它的不同之处在于最后一次迭代“缺失”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:56:52.483

没有（实用的）方法可以监视`for`循环中的下一个元素是什么。您必须将值存储在其他地方和/或使用不同类型的循环。

您可以使用位置参数或数组。

位置参数保证不稀疏。

```
set -- {a..f}
n=1

while ((n<=$#)); do
    printf 'cur: %s%.s%s\n' "${!n}" $((++n)) ${!n:+", next: ${!n}"}
done 
```

Bash 数组是稀疏的。如果您不直接使用`for`循环迭代值，则应该使用索引。

```
arr=({a..f}) idx=("${!arr[@]}")

while ((n<${#idx[@]})); do
    printf 'cur: %s%s\n' "${arr[idx[n]]}" ${idx[++n]:+", next: ${arr[idx[n]]}"}
done 
```

即使您认为可以保证连续的元素，这种方法也不是一个坏主意。

两个示例的输出：

```
cur: a, next: b
cur: b, next: c
cur: c, next: d
cur: d, next: e
cur: e, next: f
cur: f 
```

# axapta - 静态新建和继承

> ID：11448043
> 
> 赞同：3
> 
> 时间：2012-07-12T08:42:48.137
> 
> 标签：axapta, x++

[最佳实践](http://msdn.microsoft.com/en-US/library/aa594035%28v=ax.10%29)建议将新方法设置为受保护，并改用静态新... 方法来减轻方法重载的不足。[所以我使用这里](http://www.artofcreation.be/2010/05/18/creating-a-class-the-best-practice-way/)
解释的这种模式

但是静态方法不是继承的。所以我们必须为每个子类定义静态构造和静态 new... 方法。
因此，我们失去了继承的一些好处。

我查看了系统类，希望找到更好的解决方案，但我所看到的并没有真正帮助我：
-有些尊重静态新模式并在子类中声明方法
-有些只是使用实例 new 而没有保护它
-有些将母类用作“类工厂”，例如 SalesFormLetter

```
static SalesFormLetter  construct(DocumentStatus    document,
                                  boolean           getParmId = true)
    {
    switch(document)
    {
        case DocumentStatus::Confirmation       :   return new SalesFormLetter_Confirm           (getParmId);
        case DocumentStatus::PickingList        :   return SalesFormLetter_PickingList::construct(getParmId);
        case DocumentStatus::PackingSlip        :   return new SalesFormLetter_PackingSlip       (getParmId);
        case DocumentStatus::ProjectPackingSlip :   return new SalesFormLetter_PackingSlipProject(getParmId);
        case DocumentStatus::Invoice            :   return new SalesFormLetter_Invoice           (getParmId);
        case DocumentStatus::ProjectInvoice     :   return new SalesFormLetter_InvoiceProject    (getParmId);

        default : throw error(strfmt("@SYS19306",funcname()));
    }

    throw error(strfmt("@SYS19306",funcname()));
} 
```

所以我想知道是否有更好的解决方案，如果没有，其中最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:44:46.133

对象构造的更好解决方案？

好吧，`new`必须去某个地方，并且`new`在客户端代码中放很多东西是脆弱且不灵活的。因此，请使用“工厂”类，尤其是相关类。

两种选择：

1.  使`new`受保护。为每个子类制作一个构造，将工厂构造放在调用子类构造函数的基类中。但是任何人都可以调用子类构造方法。

2.  `new`公开。不要为每个子类创建一个构造，将构造放在基类中，新建子类。新的不能被保护，因为基类不是子类的后代。

无论您选择 1 还是 2 都是您的选择，您最终都会暴露子类构造函数。我个人更喜欢选项 2，因为它最省事。

建议：使用`new`. 这将使您的工厂复杂化，但这没关系，因为它可以将复杂性从您的客户端代码中移开。Setter 方法（`parm`方法）是邪恶的，但`RunBase`它是必需的，因为它是批处理系统所需要的。

也去看看[鲍勃叔叔](http://blog.objectmentor.com/articles/2010/01/17/dependency-injection-inversion)写了什么。

# android - 解码的位图会导致更大的尺寸

> ID：11448047
> 
> 赞同：2
> 
> 时间：2012-07-12T08:43:06.770
> 
> 标签：android, bitmap

在使用`BitmapFactory.Options.inSampleSize`. 问题是存储位图的文件大小至少是原始文件大小的两倍。我进行了很多搜索，但找不到如何处理这个问题，因为我不希望它发生以提高内存效率（后来我重用存储的位图）。这是我描述的方法：

```
private Bitmap decodeFileToPreferredSize(File f) {
    Bitmap b = null;
    try {
        // Decode image size
        Log.i("Bitmap", "Imported image size: " + f.length() + " bytes");
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;

        BitmapFactory.decodeFile(f.getAbsolutePath(), o);

        //Check if the user has defined custom image size
        int scale = 1;
        if(pref_height != -1 && pref_width != -1) {

            if (o.outHeight > pref_height || o.outWidth > pref_width) {

                scale = (int) Math.pow(
                        2,
                        (int) Math.round(Math.log(pref_width
                                / (double) Math.max(o.outHeight, o.outWidth))
                                / Math.log(0.5)));
            }
        }

        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        b = BitmapFactory.decodeFile(f.getAbsolutePath(), o2);
        String name = "Image_" + System.currentTimeMillis() + ".jpg";
        File file = new File(Environment.getExternalStorageDirectory(), name);
        FileOutputStream out = new FileOutputStream(file);
        b.compress(Bitmap.CompressFormat.JPEG, 100, out);
        out.close();
        Log.i("Bitmap", "Exported image size: " + file.length() + " bytes");

    } catch (Exception e) {
        b = null;
    }

    return b;
} 
```

**更新**我看到了两个图像文件的密度。来自相机意图的那个具有 72 dpi 的宽度和高度密度。从我上面的方法创建的图像文件的宽度和高度密度为 96 dpi。这解释了为什么使用我的上述方法将来自相机的 0.5 MB 图像的大小调整为大约 2.5 MB，因为重新缩放因子是 (96/72) * 2 ~= 2.5。出于某种原因，我创建的位图没有采用来自相机的图像的密度。我试图用 BitmapFactory.Options.inDensity 的所有变化来设置密度，但没有运气。我也尝试改变位图密度，`bitmap.setDensity(int dpi);`但仍然没有效果。所以，我的新问题是是否有办法在存储图像时定义位图的密度。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:35:54.407

我有一个类似的问题。当我从网上下载图像时，它们在 SD 上使用的空间比从浏览器下载到我的 PC 时更多。我认为问题只是 BitmapFactory 以某种非优化格式保存图像。

我的解决方法是使用以下而不是位图工厂：

```
 try {
        try {
            is = yourinputstream;
            // Consider reading stream twice and return the bitmap.

            os = youroutputstream;

            byte data[] = new byte[4096];
            int count;
            while ((count = is.read(data)) != -1) {
                os.write(data, 0, count);
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if(is != null) {
                is.close();
            }
            if(os != null) {
                os.close();
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-21T00:44:57.310

你说得对，问题出在密度变化上。

该线程揭示了一个解决方案：[BitmapFactory 返回比源更大的图像](https://stackoverflow.com/questions/7363643/bitmapfactory-returns-bigger-image-than-source)

在解码之前也禁用`inScaled`：

```
options.inSampleSize = 2; //or however you desire, power of 2
options.inScaled = false; 
```

这将保持密度不变，您将看到您正在寻找的尺寸减小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:47:52.580

当 时`BitmapFactory.Options.inSampleSize = 0.5`，它是 100% / 0.5 = 200%。
我想你想要的是`BitmapFactory.Options.inSampleSize = 2`100% / 2 = 50%

# java - 如何在 DirectionPathOverlay 类中设置不透明度/透明

> ID：11448052
> 
> 赞同：0
> 
> 时间：2012-07-12T08:43:34.130
> 
> 标签：java, android, google-maps, paint, driving-directions

如果我们制作一个应用程序来使用 android 和 google 地图制作路线/路径，我们可以使用类**DirectionPathOverlay**来制作从一个点到另一个点的线，但我不能使线更透明**（不是 100% 透明）**，它使街道名称不能看清楚了，谁能帮帮我？

这里有一些来自 DirectionPathOverlay 类的代码

```
 public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
        Projection projection = mapView.getProjection();
        if (shadow == false) {
            Paint paint = new Paint();
            paint.setAntiAlias(true);
            paint.setStrokeJoin(Join.ROUND);
            Point point = new Point();
            projection.toPixels(gp1, point);
            paint.setColor(Color.BLUE);

            Point point2 = new Point();
            projection.toPixels(gp2, point2);
            paint.setStrokeWidth(4);
            canvas.drawLine((float) point.x, (float) point.y, (float) point2.x,
                    (float) point2.y, paint);
        }
        return super.draw(canvas, mapView, shadow, when); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:31:07.857

使用`paint.setAlpha(200);`此函数接受从 0 到 255 的整数。

# iphone - UITableView 单元格中的 UILabel

> ID：11448062
> 
> 赞同：-1
> 
> 时间：2012-07-12T08:44:06.990
> 
> 标签：iphone, ipad, uitableview, uilabel

我是 iPhone 开发者的新手，

我正在使用`UITableView`，我想要在 LHS 上`Cell`的`UITableView`3 个标签和 RHS 上的 3 个标签中总共有 6 个标签

这是我的代码片段，

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return 180;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        CGRect frameL;
        frameL.origin.x = 10; 
        frameL.origin.y = 10;
        frameL.size.height = 50;
        frameL.size.width = 200;

        CGRect frameR;
        frameR.origin.x = 200; 
        frameR.origin.y = 10;
        frameR.size.height = 40;
        frameR.size.width = 180;

        UILabel *AlertNameLHS = [[UILabel alloc] initWithFrame:frameL];
        AlertNameLHS.font=[UIFont systemFontOfSize:16.0];
        AlertNameLHS.backgroundColor=[UIColor clearColor];
        AlertNameLHS.textColor=[UIColor redColor];
        AlertNameLHS.text=@"Alert Name :";
        [cell.contentView addSubview:AlertNameLHS];

        frameL.origin.y += 60;
        UILabel *AlertMonthLHS = [[UILabel alloc] initWithFrame:frameL];
        AlertMonthLHS.font=[UIFont systemFontOfSize:16.0];
        AlertMonthLHS.backgroundColor=[UIColor clearColor];
        AlertMonthLHS.textColor=[UIColor redColor];
        AlertNameLHS.text=@"Alert Month :";
        [cell.contentView addSubview:AlertMonthLHS];

         frameL.origin.y += 120;
         UILabel *DueOnLHS = [[UILabel alloc] initWithFrame:frameL];
         DueOnLHS.font=[UIFont systemFontOfSize:16.0];
        AlertNameLHS.text=@"Due On :";
         [cell.contentView addSubview:DueOnLHS];

    AlertNameRHS = [[UILabel alloc] initWithFrame:frameR];
    AlertNameRHS.backgroundColor=[UIColor greenColor];
    AlertNameRHS.textColor=[UIColor redColor];
    AlertNameRHS.textColor=[UIColor redColor];
    AlertNameRHS.font=[UIFont systemFontOfSize:18.0];
    [cell.contentView addSubview:AlertNameRHS];

     frameL.origin.y += 80;
    AlertMonthRHS = [[UILabel alloc] initWithFrame:frameR];
    AlertMonthRHS.font=[UIFont systemFontOfSize:18.0];
    [cell.contentView addSubview:AlertMonthRHS];

     frameL.origin.y += 120;
    DueOnRHS = [[UILabel alloc] initWithFrame:frameR];
    DueOnRHS.font=[UIFont systemFontOfSize:18.0];
    [cell.contentView addSubview:DueOnRHS];
    }

    cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;

    AlertNameRHS.text = [Myarray objectAtIndex:indexPath.row];

    return cell;
} 
```

但我无法正确看到我的 UILabel。

**任何帮助将不胜感激。**

**编辑** ![1](../Images/db40a598c0a49a2736867284ac89856c.png)：：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:11:04.010

要执行此类工作，我建议您创建一个自定义单元格。（添加新文件 -> Objective-C 类 -> UItableViewCell）

定义 6 个具有属性的标签

```
#import <UIKit/UIKit.h>

@interface DemoCell : UITableViewCell
{
    IBOutlet UILabel *lblOne;
}

@property (nonatomic,retain) IBOutlet UILabel *lblOne; 
```

现在创建一个新的空视图（仅 nib 文件），将其命名为 Democell（为了您的方便） 现在，从 nib 文件和库中删除视图，将 Table View Cell 拖放到 nib 文件中视图的位置。

现在选择您的 tableviewcell ，并在其身份检查器中，将其类更改为 DemoCell 所以这会将您的 nib 文件与自定义单元类链接..

现在在 nib 文件中，拖放 6 个标签，根据您的要求定位它们，并在文件所有者中将所有 lbls 链接到 lblOne,lblTwo ,,,,....

现在您的自定义单元格已完成。要在表格的 cellforrowatindexpath 中使用此单元格

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"cell";
    DemoCell *cell= (DemoCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell ==nil)
    {
        cell=[[[NSBundle mainBundle]loadNibNamed:@"DemoCell" owner:self options:nil] lastObject];
    }

cell.lblone.textlabel.text = @"lblOne"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:14:45.737

请参阅更正后的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        CGRect frameL;
        frameL.origin.x = 10; 
        frameL.origin.y = 10;
        frameL.size.height = 50;
        frameL.size.width = 200;

        CGRect frameR;
        frameR.origin.x = 200; 
        frameR.origin.y = 10;
        frameR.size.height = 40;
        frameR.size.width = 180;

        UILabel *AlertNameLHS = [[UILabel alloc] initWithFrame:frameL];
        AlertNameLHS.font=[UIFont systemFontOfSize:16.0];
        AlertNameLHS.backgroundColor=[UIColor clearColor];
        AlertNameLHS.textColor=[UIColor redColor];
        AlertNameLHS.text=@"Alert Name :";
        [cell.contentView addSubview:AlertNameLHS];

        frameL.origin.y += 60;
        NSLog(@"fr %f", frameL.origin.y);
        UILabel *AlertMonthLHS = [[UILabel alloc] initWithFrame:frameL];
        AlertMonthLHS.font=[UIFont systemFontOfSize:16.0];
        AlertMonthLHS.backgroundColor=[UIColor clearColor];
        AlertMonthLHS.textColor=[UIColor redColor];
        AlertMonthLHS.text=@"Alert Month :";
        [cell.contentView addSubview:AlertMonthLHS];

        frameL.origin.y += 60;
        NSLog(@"fr %f", frameL.origin.y);
        UILabel *DueOnLHS = [[UILabel alloc] initWithFrame:frameL];
        DueOnLHS.font=[UIFont systemFontOfSize:16.0];
        DueOnLHS.text=@"Due On :";
        [cell.contentView addSubview:DueOnLHS];

        AlertNameRHS = [[UILabel alloc] initWithFrame:frameR];
        AlertNameRHS.backgroundColor=[UIColor greenColor];
        AlertNameRHS.textColor=[UIColor redColor];
        AlertNameRHS.textColor=[UIColor redColor];
        AlertNameRHS.font=[UIFont systemFontOfSize:18.0];
        AlertNameRHS.text = @"l1";
        [cell.contentView addSubview:AlertNameRHS];

        frameR.origin.y += 60;
        AlertMonthRHS = [[UILabel alloc] initWithFrame:frameR];
        AlertMonthRHS.font=[UIFont systemFontOfSize:18.0];
        AlertMonthRHS.text =@"l2";
        [cell.contentView addSubview:AlertMonthRHS];

        frameR.origin.y += 60;
        DueOnRHS = [[UILabel alloc] initWithFrame:frameR];
        DueOnRHS.font=[UIFont systemFontOfSize:18.0];
        DueOnRHS.text = @"l3";
        [cell.contentView addSubview:DueOnRHS];
    }

    cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;

    AlertNameRHS.text = [NSString stringWithFormat:@"%d",indexPath.row];

    return cell;
} 
```

你犯了太多错误：

LHS1 是可见的，但你用 LHS3 文本覆盖它的文本： `AlertNameLHS.text=@"Due On :";`

LHS2 不可见，因为您只初始化它并添加为子视图，配置 LHS1 而不是它

LHS3 是不可见的，因为单元格高度是 180，它的 y 坐标是 190，你也不要设置它的文本，而是设置 LHS1 文本。

RHS 标签框架不正确并且超出单元格框架，您应该使用 frameR 但使用 frameL，我还建议您在每一步的 y 坐标上添加 60 个像素。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T09:14:24.707

定义 6 个标签并为此设置框架。然后，将SubView 添加到tableViewCell contentView。

# html - 我可以使用哪个元素代替具有相同属性的表格？

> ID：11448063
> 
> 赞同：-1
> 
> 时间：2012-07-12T08:44:11.653
> 
> 标签：html, css, html-table

我有许多相同大小的图片，我想将它们用于幻灯片，所以它们必须在一行中，并且可能这一行的宽度大于窗口的宽度，我想让一些图片超出屏幕而不是他们进入下一行。在此之前，我使用表格将它们排成一排，我只是移动表格来制作这张幻灯片。[像这样：]

```
<table cellspacing="0" cellpadding="0">
   <img src="..." />
   <img src="..." />
   <img src="..." />
   <img src="..." />
   <img src="..." />
   <img src="..." />
   ...
</table> 
```

但我想使用另一个元素 [例如一个具有一些 CSS 规则的 div，这些规则具有类似该表的属性]，因为表在我的页面中产生了一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:47:59.367

具有最少代码且没有“黑客”的解决方案。

```
<div style="white-space:nowrap;">
       <img src="..." />
       <img src="..." />
       <img src="..." />
       <img src="..." />
       <img src="..." />
       <img src="..." />
       ...
    </div> 
```

**[演示](http://jsfiddle.net/U757v/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:47:23.243

最常见的是，在此类滑块插件中使用无序列表。

```
<ul>
   <li><img .../></li>
   <li><img .../></li>
   <li><img .../></li>
</ul> 
```

和

```
li{float:left;} 
```

这样做的好处是，您可以将更多元素放入`<li>`元素中（例如图像+描述+短文本）。

但你也可以使用普通的 div

```
<div>
  <img />
  <img />
</div> 
```

如果您想要将更多元素组合在一起（例如图像的说明），您必须用额外的 div 包装它们。（这有效地将您带回了 ul ......）

```
<div>
  <div><img /> Text</div>
  <div><img /> more Text</div>
</div> 
```

仅供参考，使用表格的正确方法是：

```
<table>
   <tr>        <!-- the row -->
     <td></td> <!-- columns -->
     <td></td> <!-- columns -->
   </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T08:50:27.500

嘿，现在习惯了这种格式

```
<div class="slideshow">
   <img src="..." />
   <img src="..." />
   <img src="..." />
   <img src="..." />
   <img src="..." />
   <img src="..." />
   ...
</div> 
```

**CSS**

```
.slideshow{
white-space: nowrap;
}
.slideshow img{
vertical-align:top;
} 
```

# google-apps-script - 发布到图库时未提交 GUI 组件：Google 应用脚本

> ID：11448065
> 
> 赞同：1
> 
> 时间：2012-07-12T08:44:14.977
> 
> 标签：google-apps-script

当我将应用程序发布到电子表格工具的谷歌应用程序脚本库时，它也未能上传 GUI 构建器组件。你知道我应该如何解决这个问题吗？

我只是得到这个：

无效参数：resourceName（第 37 行）

尝试执行代码时。第 37 行对应于将 GUI 构建器组件加载到 UI 应用程序的代码所在的位置。我打算重写代码并以编程方式创建视觉元素，但这似乎会破坏目的！

非常感谢，

埃蒙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T12:54:39.520

你是对的，当你试图分享它时，GUI Builder 就会失败。通过 Script Gallery[或作为图书馆](http://code.google.com/p/google-apps-script-issues/issues/detail?id=623)。根本没有办法将其导出并导入另一个脚本。

这就是我从不使用它的原因。有时我玩它只是为了快速制作模型，看看一个想法在 Apps Script 上的实际外观，但从来没有作为我要开发的真实东西。

[您应该在tracker](http://code.google.com/p/google-apps-script-issues/issues/list)上打开问题报告，因为在 Gallery 上发布确实可以开箱即用。

# java - 在 Multimaps 中获取值 - Guava

> ID：11448066
> 
> 赞同：0
> 
> 时间：2012-07-12T08:44:17.167
> 
> 标签：java, guava, multimap

我使用番石榴库。

有没有办法在每个值中获取 Multimap？

例如Multimap中的值为1=[stack], 2=[over, flow], 3=[com]。如果Multimap名称为map，key为2，`map.get("2")`会出现[over, flow]。

我只想获得“流量”。有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T08:53:38.180

Multimap 返回 a `Collection<X>`，听起来您需要该列表中的最后一项，在这种情况下，您只需要通过调用`map.get("2")`并检索列表中的最后/第 n 项来获取列表。

Guava 有一个名为的类`Iterables`，它可能对您有用。例如

```
String lastValue = Iterables.getLast(your_list); 
```

# mysql - MySQL 错误代码：在 MySQL Workbench 中更新期间出现 1175

> ID：11448068
> 
> 赞同：1049
> 
> 时间：2012-07-12T08:44:39.407
> 
> 标签：mysql, sql-update, mysql-workbench

我正在尝试更新该列`visited`以赋予其值 1。我使用 MySQL 工作台，并且我正在从工作台内部的 SQL 编辑器中编写语句。我正在编写以下命令：

```
UPDATE tablename SET columnname=1; 
```

它给了我以下错误：

> 您正在使用安全更新模式，并且您尝试更新没有使用 KEY 列的 WHERE 的表 要禁用安全模式，请切换选项 ...。

我按照说明进行操作，然后`safe update`从`Edit`菜单中取消选中该选项。仍然出现相同的错误，我无法更新此值。请告诉我有什么问题吗？`Preferences``SQL Editor`

* * *

## 回答 #1

> 赞同：2023
> 
> 时间：2012-07-12T08:59:50.887

看起来您的 MySql 会话设置了[安全更新选项](http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html#option_mysql_safe-updates)。这意味着您不能`primary key`在 where 子句中不指定键（例如 ）的情况下更新或删除记录。

尝试：

```
SET SQL_SAFE_UPDATES = 0; 
```

或者您可以修改您的查询以遵循规则（使用`primary key`in `where clause`）。

* * *

## 回答 #2

> 赞同：539
> 
> 时间：2013-01-09T09:37:03.253

在执行 UPDATE 命令之前按照以下步骤操作： **在 MySQL Workbench中**

1.  转到`Edit`-->`Preferences`
2.  单击`"SQL Editor"`选项卡和`uncheck`“安全更新”`check box`
3.  `Query`--> `Reconnect to Server` // 注销然后登录
4.  现在执行你的 SQL 查询

**ps，无需重启MySQL守护进程！**

* * *

## 回答 #3

> 赞同：229
> 
> 时间：2019-08-27T22:48:53.700

```
SET SQL_SAFE_UPDATES = 0;

# your code SQL here

SET SQL_SAFE_UPDATES = 1; 
```

* * *

## 回答 #4

> 赞同：201
> 
> 时间：2013-07-26T14:42:00.110

```
SET SQL_SAFE_UPDATES=0;
UPDATE tablename SET columnname=1;
SET SQL_SAFE_UPDATES=1; 
```

* * *

## 回答 #5

> 赞同：151
> 
> 时间：2015-02-04T07:46:02.423

**无需将 SQL_SAFE_UPDATES 设置为 0**，我真的不鼓励它这样做。SAFE_UPDATES 默认开启是有原因的。如果您知道我的意思，您可以驾驶没有安全带和其他东西的汽车；）只需在 WHERE 子句中添加一个 KEY 值，该值匹配所有内容，例如与 0 比较的主键，所以不要写：

```
UPDATE customers SET countryCode = 'USA'
    WHERE country = 'USA';               -- which gives the error, you just write:

UPDATE customers SET countryCode = 'USA'
    WHERE (country = 'USA' AND customerNumber <> 0); -- Because customerNumber is a primary key you got no error 1175 any more. 
```

现在您可以放心，每条记录都会（始终）按您的预期进行更新。

* * *

## 回答 #6

> 赞同：112
> 
> 时间：2014-11-17T13:20:17.620

所需要的只是：启动一个新查询并运行：

```
SET SQL_SAFE_UPDATES = 0; 
```

然后：运行您尝试运行但以前无法运行的查询。

* * *

## 回答 #7

> 赞同：87
> 
> 时间：2018-07-31T09:35:18.870

错误代码：1175。您正在使用安全更新模式，并且您尝试更新没有使用 KEY 列的 WHERE 的表 要禁用安全模式，请切换 Preferences -> SQL Editor 中的选项并重新连接。

**暂时关闭“安全更新模式”**

```
SET SQL_SAFE_UPDATES = 0;
UPDATE options SET title= 'kiemvieclam24h' WHERE url = 'http://kiemvieclam24h.net';
SET SQL_SAFE_UPDATES = 1; 
```

**永远关闭“安全更新模式”**

mysql工作台8.0：

```
MySQL Workbench => [ Edit ] => [ Preferences ] -> [ SQL Editor ] -> Uncheck "Safe Updates" 
```

[![在此处输入图像描述](../Images/65fc885587170e67f8d37e830bec3db6.png)](https://i.stack.imgur.com/teRJd.png) 旧版本可以：

```
MySQL Workbench => [Edit] => [Preferences] => [SQL Queries] 
```

* * *

## 回答 #8

> 赞同：46
> 
> 时间：2016-02-19T17:37:45.853

1.  喜好...
2.  “安全更新”...
3.  重启服务器

[![喜好...](../Images/4b5294b3c5e915f5a0cecdd2fc4bbc9b.png)](https://i.stack.imgur.com/101Ys.png)

[![安全更新](../Images/89f8b40c5f9c61d5e2f982720af3e466.png)](https://i.stack.imgur.com/sDVA1.png) [![重启服务器](../Images/c89feebc1612360ff19ed604c3ec8841.png)](https://i.stack.imgur.com/Y4uud.png)

* * *

## 回答 #9

> 赞同：36
> 
> 时间：2013-12-02T13:32:58.083

```
SET SQL_SAFE_UPDATES=0; 
```

或者

**去** `Edit --> Preferences`

**单击** `SQL Queries`选项卡并**取消** `Safe Updates`选中复选框

`Query --> Reconnect to Server`

现在执行你的 sql 查询

* * *

## 回答 #10

> 赞同：31
> 
> 时间：2015-09-11T09:07:11.620

如果您处于安全模式，则需要在 where 子句中提供 id。所以这样的事情应该有效！

```
UPDATE tablename SET columnname=1 where id>0 
```

* * *

## 回答 #11

> 赞同：29
> 
> 时间：2019-05-20T10:16:40.340

在 WorkBench 上，我通过停用安全更新模式解决了这个问题：

-Edit -> Preferences -> Sql Editor 然后取消选中安全更新。

* * *

## 回答 #12

> 赞同：17
> 
> 时间：2015-10-30T08:55:34.783

最简单的解决方案是定义行限制并执行。这样做是出于安全目的。

* * *

## 回答 #13

> 赞同：16
> 
> 时间：2012-07-12T08:52:58.017

我找到了答案。问题是我必须在表名之前加上模式名。即，命令应该是：

```
UPDATE schemaname.tablename SET columnname=1; 
```

谢谢大家。

* * *

## 回答 #14

> 赞同：13
> 
> 时间：2014-09-10T18:46:24.603

在 MySQL Workbech 6.2 版中，不要退出 Preference`SQLQueries`选项。

在这种情况下，可以使用：`SET SQL_SAFE_UPDATES=0;`

* * *

## 回答 #15

> 赞同：9
> 
> 时间：2015-04-20T15:04:35.553

由于问题已得到回答并且与安全更新无关，因此这可能是错误的地方；我会发布只是为了添加信息。

我试图成为一个好公民，并修改了查询以使用可以更新的 id 临时表：

```
create temporary table ids ( id int )
    select id from prime_table where condition = true;
update prime_table set field1 = '' where id in (select id from ids); 
```

失败。将更新修改为：

```
update prime_table set field1 = '' where id <> 0 and id in (select id from ids); 
```

那行得通。天哪——如果我总是添加 where key <> 0 来绕过安全更新检查，或者甚至设置 SQL_SAFE_UPDATE=0，那么我的查询就丢失了“检查”。我还不如永久关闭该选项。我想它使删除和更新一个两步过程而不是一个..但是如果你输入得足够快并且停止考虑密钥是特殊的而只是一个麻烦..

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2020-09-07T16:29:23.250

> 我也遇到了同样的问题，但是当我在编辑 -> 首选项 -> SQL 编辑器 -> 安全更新中关闭“安全更新”时，我仍然习惯于面对“错误代码 1175 禁用安全模式”的错误

我对这个错误的解决方案是如果没有给出表的主键，并使用这些主键值更新列。

> 例如：**UPDATE** [表名] **SET** Empty_Column = 'Value' **WHERE** [主键列名] = value;

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2015-10-10T11:05:29.777

诚然，这对于大多数示例来说毫无意义。但最后，我得出以下声明，它工作正常：

```
update tablename  set column1 = '' where tablename .id = (select id from tablename2 where tablename2.column2 = 'xyz'); 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2018-07-05T07:22:01.727

这适用于 Mac，但对于其他操作系统必须相同，但首选项的位置除外。

当我们尝试不安全的`DELETE`操作时得到的错误

[![收到此错误时单击首选项](../Images/1d0a3bf0d9930f660fbd0e2c2649788f.png)](https://i.stack.imgur.com/edTvd.png)

在新窗口中，取消选中该选项`Safe updates`

[![取消选中安全更新](../Images/89814c8fac7e1cdb608095a746bcf542.png)](https://i.stack.imgur.com/Kww6O.png)

**然后关闭并重新打开连接。无需重新启动服务。**

现在我们将`DELETE`再次尝试并取得成功。

[![在此处输入图像描述](../Images/f77ec24410bcf67d76f34bc456218935.png)](https://i.stack.imgur.com/rZPBu.png)

那么这个安全更新的全部内容是什么？这不是一件邪恶的事情。这就是 MySql 所说的。

**使用`--safe-updates`选项**

> 对于初学者来说，一个有用的启动选项是`--safe-updates`（或 `--i-am-a-dummy`，具有相同的效果）。`DELETE FROM tbl_name`这对于您可能已经发表声明但忘记该`WHERE`条款的情况很有帮助。通常，这样的语句会从表中删除所有行。使用`--safe-updates`，您只能通过指定标识行的键值来删除行。这有助于防止事故。
> 
> 使用该`--safe-updates`选项时，mysql 在连接到 MySQL 服务器时发出以下语句：

```
SET sql_safe_updates=1, sql_select_limit=1000, sql_max_join_size=1000000; 
```

***在处理生产数据库时打开此选项是安全的。否则，您必须非常小心，不要意外删除重要数据。***

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-10-09T02:59:05.583

如果您在存储过程中遇到此问题并且无法在 WHERE 子句中使用键，则可以通过声明一个变量来解决此问题，该变量将保存应该更新的行的限制，然后使用它在更新/删除查询中。

```
DELIMITER $
CREATE PROCEDURE myProcedure()
BEGIN
    DECLARE the_limit INT;

    SELECT COUNT(*) INTO the_limit
    FROM my_table
    WHERE my_column IS NULL;

    UPDATE my_table
    SET my_column = true
    WHERE my_column IS NULL
    LIMIT the_limit;
END$ 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2020-08-26T14:08:19.300

只需键入 SET SQL_SAFE_UPDATES = 0; 在删除或更新之前再次设置为 1 SET SQL_SAFE_UPDATES = 1

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-11-06T03:31:22.200

如前文所述，更改数据库服务器的默认设置将导致对已发布项目中数据的错误查询导致对现有数据的意外修改。因此，要实现前文所述的命令，需要在样本数据的测试环境中运行它们，然后在正确测试后执行它们。

我的建议是编写一个`WHERE`条件语句，如果更新应该适用于表中的所有行，它将遍历所有条件下的所有行。例如，如果表包含一个 ID 值，则`ID > 0`可以使用该条件来选择所有行：

```
/**
 * For successful result, "id" column must be "Not Null (NN)" and defined in
 * INT data type. In addition, the "id" column in the table must have PK, UQ
 * and AI attributes.
 */
UPDATE schema_name.table_name
SET first_column_name = first_value, second_column_name = second_value, ...
WHERE id > 0; 
```

如果表不包含 id 列，则可以通过检查不能为空的列来对所有行运行更新操作：

```
/**
 * "first_column_name" column must be "Not Null (NN)" for successful result.
 */
UPDATE schema_name.table_name
SET first_column_name = first_value, second_column_name = second_value, ...
WHERE table_name.first_column_name IS NOT NULL; 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2022-01-08T11:58:05.520

MySql 工作台给了我同样的错误，在我取消选中安全模式后，我重新连接了服务器并且更新功能起作用了。转到菜单栏中的查询并重新连接服务器

查询菜单 -> 重新连接到服务器

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2022-02-15T08:57:55.327

首先：请确保您要更新该表中的所有记录，因为如果没有 where 子句，更新该表中的所有记录是危险的。您很少需要更新表中的所有记录。

大多数情况下，您想更新特定记录，如果您想再次更新所有记录，则应包括 where cluase 打开 MySQL 工作台 > 编辑 > 首选项 > SQL 编辑器 > 向右向下滚动并取消选中“安全更新（拒绝更新和删除）没有限制）”。

这是为了安全更新。

如果您取消选中上述内容，那么您可能会更新所有记录而不是一条记录，这会导致数据库备份恢复。没有回滚。

# iphone - 如何在 iPhone 的下拉框中选择多个项目？

> ID：11448069
> 
> 赞同：0
> 
> 时间：2012-07-12T08:44:42.877
> 
> 标签：iphone, objective-c, ios

我是一名 iPhone 开发人员。我正在尝试在 iPhone 的下拉框中选择多个项目。我已经尝试了所有可能性，但无法做到。请给我建议。这对我来说真的很重要。

提前致谢。法布尔..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:56:00.463

iPhone中有下拉框吗？我很安静，那些不存在并且通常被 tableView 或选择器取代。

我要做的是一个带有自制单元格视图的表格视图，这些单元格视图结合了文本和一个 2 状态按钮，该按钮的设计是一个选中或不选中的框，具体取决于按钮状态。后面有适当的控制器应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T06:35:54.747

这是您正在寻找的最佳示例之一

[https://github.com/kiran5232/KDropDownMultipleSelection/archive/master.zip](https://github.com/kiran5232/KDropDownMultipleSelection/archive/master.zip)

# spring - Spring tx:annotation-driven 在 Eclipse 中有效，但在 tomcat 中无效

> ID：11448071
> 
> 赞同：1
> 
> 时间：2012-07-12T08:44:44.743
> 
> 标签：spring, tomcat, annotations, tomcat7, spring-annotations

我似乎对 spring 注释驱动的事务管理和 tomcat 有问题。这些是我在项目中使用的一些 bean：

```
<bean id="dataSource" class="service.myBatis.RoutingDataSource"> </bean>        

<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">   
    <property name="dataSource" ref="dataSource"/>              
</bean>  

<tx:annotation-driven  transaction-manager="transactionManager"  /> 
```

当我在 Eclipse 中运行项目时，一切正常。但是当我在 tomcat 中运行项目时，它并没有超越 bean 的创建。它也没有给我一个错误或任何错误的指示。

日志显示它以实例化 bean 完成，然后突然销毁所有 bean：

```
[DEBUG] 12 jul 09:28:55.888 AM localhost-startStop-1 [org.springframework.beans.factory.support.DefaultListableBeanFactory]
Finished creating instance of bean 'org.springframework.transaction.config.internalTransactionAdvisor'

[INFO] 12 jul 09:28:55.895 AM localhost-startStop-1 [org.springframework.beans.factory.support.DefaultListableBeanFactory]
Destroying singletons in........ 
```

如果我删除该`<tx:annotation-driven transaction-manager="transactionManager" />`行，项目将在 tomcat 和 eclipse 中正常启动。

通常，如果某些东西在 Eclipse 中有效而在 tomcat 中无效，则这是由于 tomcat 找不到某些类/库或资源造成的。我不知道是什么原因造成的

谁能告诉我问题是什么？为什么它会破坏所有的bean而不给出错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:53:08.983

我想到了。导致问题的不是春天，而是我的项目中的其他问题。错误被放入一些 tomcat 日志而不是控制台。所以看起来没有错误。

# .net - .NET 的 CI 服务器：Jenkins 还是 Buildbot？

> ID：11448078
> 
> 赞同：2
> 
> 时间：2012-07-12T08:45:15.980
> 
> 标签：.net, continuous-integration, jenkins, buildbot, ci-server

在 .NET 环境中使用 buildbot 或 Jenkins 的优缺点是什么？

问候，

弗洛里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:49:19.783

I've had very positive experience with Jenkins. Easy to install and use through the web Ui. The only thing that's been troubling me lately is VCS integration. Most of the time something to do with authentication to the repository server and SSL stuff that is supported differently on Windows than on Linuxes and similar. The crowd behind Jenkins is big and lots of blogs and other resources are available.

As far as .NET is conserned... I've uised it with msbuild and powershell/[psake](https://github.com/psake/psake). In both cases it worked just fine. If any issues occurred they were usually related to .NET framework issues, SDKs or some such.

# xcode - Xcode 4 中的示例项目在哪里？

> ID：11448080
> 
> 赞同：2
> 
> 时间：2012-07-12T08:45:19.937
> 
> 标签：xcode, project

在旧版本的 Xcode 中，它们一直在开发人员文件夹中，只是想知道它们现在在哪里可用，我必须从某个地方下载它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:55:21.870

如果您从管理器的文档选项卡中找到所需项目的名称，您可以简单地选择“打开项目”，它将被下载到您选择的文件夹中。

确保您首先通过 xCode/Preferences/Downloads/Documentation/Check & Install Now 下载了文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:04:05.340

有很多示例代码。只需在 google 中进行简单搜索。

这里：

1.  [raywenderlich iPhone 教程附源代码](http://www.raywenderlich.com/tutorials)
2.  [Github - 搜索 repos](https://github.com/)
3.  [苹果自己的示例代码](https://developer.apple.com/library/mac/navigation/index.html#topic=Sample+Code&section=Resource+Types)
4.  [疯狂开发中的开源 iPhone 应用程序列表](http://maniacdev.com/2010/06/35-open-source-iphone-app-store-apps-updated-with-10-new-apps/)
5.  [Cocos2d 示例](http://maniacdev.com/2011/12/over-90-ios-source-code-examples-many-using-cocos2d/)
6.  [https://stackoverflow.com/questions/1353130/where-can-i-find-sample-iphone-code](https://stackoverflow.com/questions/1353130/where-can-i-find-sample-iphone-code)

我敢打赌这是一个好的开始。希望这可以帮助。玩得开心。

# gwt - 具有多态类型的 ListEditor

> ID：11448082
> 
> 赞同：2
> 
> 时间：2012-07-12T08:45:32.583
> 
> 标签：gwt, gwt-editors

我四处搜索并试图弄清楚是否可以将编辑器框架与多态类型一起使用。我在[Using GWT Editors with a complex usecase](https://stackoverflow.com/questions/7043760/)上找到了这篇文章，这与我正在尝试做的事情很接近。我对编辑器框架相当陌生，因此非常感谢任何帮助。

例如，这里是一些代码，

数据传输对象：

```
public class Employee{ 
 public List<Contact> contacts 
}
public class Contact {
public class ContactEmail extends Contact {}
public class ContactAddress extends Contact {}
public class ContactPhoneNumber extends Contact {} 
```

编辑：

```
public interface ContactBaseEditor<T extends Contact> extends Editor<T> {}
public class AddressEditor extends Composite implements Editor<ContactAddress>, ContactBaseEditor<ContactAddress>{}
public class EmailEditor extends Composite implements Editor<ContactEmail>, ContactBaseEditor<ContactEmail>{)
public class PhoneNumberEditor extends Composite implements Editor<ContactPhoneNumber>, ContactBaseEditor<ContactPhoneNumber>{} 
```

ContactEditor 类：

```
public class ContactEditor extends Composite implements IsEditor<ListEditor<Contact, ContactEditorWrapper>> {
private class ContactEditorSource extends EditorSource<ContactEditorWrapper> {
    @Override
    public ContactEditorWrapper create(final int index) {
        ContactEditorWrapper contactEditor = new ContactEditorWrapper();
        communicationContactsPanel.add(contactEditor);
        return contactEditor;
    }
    @Override
    public void dispose(ContactEditorWrapper subEditor) {
        subEditor.removeFromParent();   
        }
    @Override
    public void setIndex(ContactEditorWrapper editor, int index) {
        communicationContactsPanel.insert(editor, index);
    }
}

private ListEditor<Contact, ContactEditorWrapper> editor = ListEditor.of(new ContactEditorSource());
public ListEditor<Contact, ContactEditorWrapper> asEditor() {
    return editor;
}
} 
```

联系EditorWrapper：

```
class ContactEditorWrapper extends Composite implements ContactBaseEditor<Contact>, ValueAwareEditor<Contact> {

   private SimplePanel panel = new SimplePanel();

   @Path("") ContactBaseEditor<Contact> realEditor;

   public ContactEditor() {
       initWidget(panel);
   }
   @Override
   public void setValue(Contact value) {
      if (value instanceof Address) {
        realEditor = new AddressEditor();
        panel.setWidget((AddressEditor)realEditor);
      }
      else if (value instanceof Email) {
         realEditor = new EmailEditor();
         panel.setWidget((EmailEditor)realEditor);
      }
      else if (value instanceof PhoneNumber) {
         realEditor = new PhoneNumberEditor();
         panel.setWidget((PhoneNumberEditor)realEditor);
      }
      else {
         realEditor = null;
      }
   }
 } 
```

主编辑器类：

```
public class AddEmployeeEditor extends Composite implements Editor<Employee> {

@UiField
ContactEditor contacts;

interface Driver extends SimpleBeanEditorDriver<Employee, AddEmployeeEditor> {
}  
public AddEmployeeEditor(final Binder binder) {
driver = GWT.create(Driver.class);
    driver.initialize(this);

    List<Contact> list = new ArrayList<Contact>();
    list.add(new Address());
    list.add(new Email());
    list.add(new PhoneNumber());
    list.add(new PhoneNumber());
    Employee employee = new Employee();
    employee.setContacts(list);
    driver.edit(employee);
   }
} 
```

谁能告诉我这是否可行，我是否朝着正确的方向前进？

提前致谢， Mac

我已将上面的代码更新为现在包含 Thomas 建议的 ContactEditorWrapper 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:03:32.860

该代码很有可能被破坏：不能保证返回的编辑器`EditorSource`不会用于编辑列表中的另一个值。

您应该创建一个包装器编辑器，实现`ValueAwareEditor`并使用实际编辑器作为子编辑器`@Path("")`；`ContactBaseEditor`并在方法中创建适当的`setValue`。

```
class ContactEditor extends Composite implements ValueAwareEditor<Contact> {

   private SimplePanel panel = new SimplePanel();

   @Path("") ContactBaseEditor realEditor;

   public ContactEditor() {
      initWidget(panel);
   }

   @Override
   public void setValue(Contact value) {
      if (contact instanceof ContactAddress) {
         realEditor = new AddressEditor();
      }
      else if (contact instanceof ContactEmail) {
         realEditor = new EmailEditor();
      }
      else if (contact instanceof ContactPhoneNumber) {
         realEditor = new PhoneNumberEditor();
      }
      else {
         realEditor = null;
      }
      panel.setWidget(realEditor);
   } 
```

`ContactBaseEditor`但是请注意，无论使用哪种实际实现，都只会编辑来自的字段/子编辑器。如果某些子类中有其他字段/子编辑器，则必须在and方法中手动`ContactBaseEditor`实现和处理。`ValueAwareEditor``setValue``flush`

# php - PHP按索引分组数组

> ID：11448084
> 
> 赞同：1
> 
> 时间：2012-07-12T08:45:33.697
> 
> 标签：php, arrays

我有一个多维数组：

```
Array
(
[type] => Array
(
    [0] => text
    [1] => portfolio
    [2] => slide
    [3] => text
)

[grid] => Array
(
    [0] => 3
    [1] => 5
    [2] => 3
    [3] => 4
)

[title] => Array
(
    [0] => title1
    [3] => title2
)

[content] => Array
(
    [0] => content1
    [3] => content2
)

[item] => Array
(
    [1] => 6
    [2] => 7
)

[pagination] => Array
(
    [1] => 8
)

[order] => Array
(
    [1] => desc
    [2] => asc
)

) 
```

并希望通过数组中给出的 [type] 键对其进行分组：

```
Array (

[0] => Array (
        [type] => text
        [grid] => 3
        [title] => title1
        [content] => content1
    )

[1] => Array (
        [type] => portfolio
        [grid] => 5
        [item] => 6
        [pagination] => 1
        [order] => desc
    )

[2] => Array (
        [type] => slide
        [grid] => 3
        [item] => 7
        [order] => asc
    )

[3] => Array (
        [type] => text
        [grid] => 4
        [title] => title2
        [content] => content2
    ) 
```

有没有办法或 PHP 函数来做这样的数组分组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T08:53:24.930

这个片段实现了：

```
$result = array();
foreach ($array as $key => $data) {
    foreach ($data as $offset => $value) {
        if (isset($result[$offset])) {
            $result[$offset][$key] = $value;
        } else {
            $result[$offset] = array($key => $value);
        }
    }
} 
```

**[工作演示](http://codepad.viper-7.com/DimMmk)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T08:48:23.557

`array_map()`回调为 null 将完全符合您的要求。但是，它将具有索引编号而不是名称。

如果您编写自己的回调，那么您可以返回一个包含您需要的名称的数组。

因为显然人们想要实际的代码：

```
array_map(null, $type_array, $grid_array, $title_array, $content_array, $item_array); 
```

它真的是那么简单。大多数其他答案都很大而且没有必要。

注意：这假设数组的数量是固定的 - 如果它不固定，那么这将不起作用，然后使用 Florent 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:51:58.737

You can do it with this function:

```
$type_array = array('text', 'portfolio', 'slide', 'text');
$grid_array = array(3, 5, 3, 4);
$title_array = array(0 => 'title1', 3 => 'title2');
$content_array = array(0 => 'content1', 3 => 'content2');
$item_array = array(1 => 6, 2 => 7);

function group_arrays($type_array, $grid_array, $title_array, $content_array, $item_array) {
    $temp_array = array();

    for($i = 0; $i < count($type_array); $i++) {
        $temp_array[$i] = array( 'type' => @$type_array[$i],
                                 'grid' => @$grid_array[$i],
                                 'title' => @$title_array[$i],
                                 'content' => @$content_array[$i],
                                 'item' => @$item_array[$i]);
    }

    return $temp_array;
}

print_r(group_arrays($type_array, $grid_array, $title_array, $content_array, $item_array)); 
```

Hope this helps!

# sql - 可以使用什么技术来模拟表上的多个聚集索引？

> ID：11448089
> 
> 赞同：0
> 
> 时间：2012-07-12T08:45:53.367
> 
> 标签：sql, sybase

是否有任何技术可用于模拟 Sybase 12.5 中表上的多个聚集索引？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:17:51.240

我能想到的唯一近似方法是创建包含表中*所有*列的非聚集索引。这样，非聚集索引将包含所有数据。

但是，要实现这一点，整个表必须符合对非聚集索引施加的任何约束。（例如，对于 SQL Server，某些列数据类型有限制，并且以字节为单位的整个大小 - 可能类似的限制适用于任何产品）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:52:41.933

我不认为，您可以模拟多个聚集索引。因为当您在表上创建一个聚集索引时，数据会根据聚集索引列中的数据重新排列。从逻辑上讲，您不能根据另一列在表中以其他顺序排列数据。您所能做的就是为其他列创建非聚集索引

您可以做的其他事情是组合两个或更多列并创建聚集索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:52:24.900

最好的方法是创建尽可能多的表，并在这些表上尝试要模拟的不同聚集索引。然后可能对这些表运行查询以检查哪个表执行得更好，如果您的主要动机只是检查哪一列会产生更好的聚集索引。但我建议您应该运行全部工作负载或您将针对此表执行的所有查询，以便您能够更好地查看哪些组合最适合您。

# silverlight - 禁用轻弹中的地图移动

> ID：11448091
> 
> 赞同：1
> 
> 时间：2012-07-12T08:45:58.757
> 
> 标签：silverlight, windows-phone-7, bing-maps

我有一个动态显示图钉的地图，并且想与图钉交互而不与地图交互（所以我不能通过设置禁用地图`IsEnabled="False"`，也不能使用地图的图像）。

我已经尝试过这里描述的技术：[Handling tap on Pushpin in a fixed Map](https://stackoverflow.com/questions/4864243/handling-tap-on-pushpin-in-a-fixed-map)，它非常适合缩放和平移。

扩展这个想法，我为所有似乎匹配的事件设置了事件处理程序：

```
 Hold="map_Hold"
   MapPan="map_MapPan"
   MapZoom="Map_MapZoom"
   ManipulationStarted="map_ManipulationStarted"
   ManipulationDelta="map_ManipulationDelta"
   ManipulationCompleted="map_ManipulationCompleted"
   MouseLeftButtonDown="map_MouseLeftButtonDown"
   MouseLeftButtonUp="map_MouseLeftButtonUp"
   TargetViewChanged="map_TargetViewChanged"
   ViewChangeStart="map_ViewChangeStart"
   ViewChangeEnd="map_ViewChangeEnd"
   ViewChangeOnFrame="map_ViewChangeOnFrame" 
```

（在我简单设置的事件处理程序中`e.Handled = true;`）

然而，您仍然可以通过在地图上做出轻弹动作来平移地图（例如在照片应用程序中轻弹到下一张图像的方式）。

有没有办法完全禁用地图平移？或者有没有办法与引脚交互`IsEnabled="False"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:59:10.740

这篇文章是不久前的，所以你现在可能已经解决了这个问题。但是我今天遇到了这个问题，这就是我的解决方案。（它不是很优雅，但似乎工作正常）。

对我来说，在拖放后放开图钉时会出现此问题 - 即使我在拖动图钉时禁用了 map_pan 事件，地图仍会从放开推杆时创建的“轻弹”手势移动拖放后固定。

首先，创建一个页面范围的 DespatchTimer 和一个 int 作为我们的计数器：

```
 DispatcherTimer dti = new DispatcherTimer();
int counter =0; 
```

接下来，在图钉的 MouseLeftButton up 事件中，禁用您的地图，以 1 的间隔启动调度计时器。同时为它创建 Tick 事件处理程序。

```
 private void pushpin_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
Map.IsEnabled = false;
dti.Interval = new TimeSpan(0, 0, 0, 0, 1); // 1 Seconds
        dti.Start();
        dti.Tick += new EventHandler(dti_Tick);
//other code logic
} 
```

接下来，创建 dti_Tick 事件。在 tick 事件中，在第二次迭代到 tick 事件时停止发送计时器并重新启用地图。重置计数器以备将来使用。

```
 void dti_Tick(object sender, EventArgs e)
    {
        counter++;
        if (counter>= 1)
        {
            dti.Stop();
            Map.IsEnabled = true;
            counter= 0;
        }
    } 
```

此过程将阻止在您的拖放图钉逻辑之后发生任何“轻弹”。显然这段代码可以进一步优化，但希望对你有所帮助。

# scala - 在 scala 中使用 Play 框架进行 Akka Actor 测试

> ID：11448102
> 
> 赞同：0
> 
> 时间：2012-07-12T08:46:39.197
> 
> 标签：scala, playframework, akka, specs2

> **可能重复：**
> [akka actor 使用 play 测试](https://stackoverflow.com/questions/11449726/akka-actor-testing-using-play)

我是使用 Scala Akka 和 Play 框架的新手，

我只是想就如何测试我的代码寻求一些帮助。

我正在使用 org.specs2.mutable.Specification

请帮忙。

# html - W3c Validator HTML 4.01 Transitional - 这里有什么问题？

> ID：11448104
> 
> 赞同：0
> 
> 时间：2012-07-12T08:46:46.047
> 
> 标签：html, w3c, w3c-validation

这是我的一段代码，它给了我错误：

```
<ul>
<li>
    <div><span>Text</span></div>
    <div>
        <ul>
            <li>
              <a href="#">
                <div>Link</div>
              </a>
            </li>
        </ul>
    </div>
</li>
</ul> 
```

一个错误：

**文档类型在此处不允许元素“DIV”；缺少“APPLET”、“OBJECT”、“MAP”、“IFRAME”、“BUTTON”开始标签之一**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:47:40.053

`<div>`元素内不允许有`<a>`元素（直到 HTML 5 不使用 DTD 并支持透明内容模型）。

（DTD 允许 applet、object、map、iframe 和 button 在一个元素中，它允许 div 在所有这些元素中，但是规范禁止在文本中组合这两个因素，这是 DTD 的限制，这就是为什么valdator 建议将其作为修复）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T08:49:04.270

You cannot have a `div` (block element) inside an `a` (inline element).

```
<a href="#">
    <div>Link</div>
</a> 
```

# spring - 豆入豆注入

> ID：11448105
> 
> 赞同：0
> 
> 时间：2012-07-12T08:46:49.937
> 
> 标签：spring

没有Spring bean注入的经验。

```
<beans:bean id="ModeService"
        class="<path>Service">
    <beans:property name="Mode" value="true"/>
</beans:bean>

<beans:bean id="Filter"
       class="<path>.RequestFilter">
    <custom-filter position="FIRST" />
</beans:bean> 
```

如何将 ModeService bean 注入到 Filter bean 中？

好的，我在春天注射了@William 所以有：

```
<beans:bean id="maintenanceModeService"
        class="<path>.MaintenanceService">
    <beans:property name="maintenanceMode" value="true"/>
</beans:bean>

<beans:bean id="maintenanceFilter"
       class="<path>.MaintenanceRequestFilter">
    <custom-filter position="FIRST" />
    <beans:property name="modeService" ref="maintenanceModeService"/>
</beans:bean> 
```

在 MaintenanceService 中，我添加了 setter/getter 来调用变量：

```
boolean maintenanceMode;

public void setMaintenanceMode(boolean mode)
{
    this.maintenanceMode = mode;
}

public boolean getMaintenanceMode()
{
    return maintenanceMode;
} 
```

并将 setter/getter 附加到 MaintenanceRequestFilter：

```
boolean modeService;

public void setModeService(MaintenanceService maintenanceMode)
{
    this.modeService = maintenanceMode;
}

public MaintenanceService getMaintenanceMode()
{
    return modeService;
} 
```

然后在 doFilter() 中调用 modeService

但是……错了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:49:32.940

You can use `ref` attribute to define reference to another bean. `Filter` class should have property of type `ModeService` so that you can define it in `<property>` tag using `ref` attribute.

```
<beans:bean id="Filter" class="<path>.RequestFilter">
    <custom-filter position="FIRST" />
    <beans:property name="modeService" ref="ModeService"/>
</beans:bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:57:21.400

```
<beans:bean id="Filter" class="<path>.RequestFilter">
    <custom-filter position="FIRST" />
    <beans:property name="modeService" ref="ModService"/>
</beans:bean> 
```

你应该在你的类中有一个 getter/setter 方法

```
class RequestFilter{
    public void setModeService(ModService modService){
        // some set code here
    }

    public ModeService getModeService(){
        // some set code here
        return modService;
    }
} 
```

# sql-server - 在存储过程中合并 FETCHING 0 ROWS，但将结果作为查询获取

> ID：11448106
> 
> 赞同：-1
> 
> 时间：2012-07-12T08:46:56.630
> 
> 标签：sql-server, stored-procedures

样本数据

```
srNO  productname StartDate    AStartdate       pStartdate
1       new       11-11-2010    11-11-2010      11-11-2010
2       old       01-01-2011    11-11-2011      09-11-2010
3       medium    01-01-2012    01-01-2012      16-07-2012
4       out       01-08-2012    16-01-2012      16-07-2012 
```

我的查询

```
ALTER PROCEDURE [dbo].[Status_yearly]
(@MID NVARCHAR(max))
AS
BEGIN

DECLARE @Years nvarchar(max)
SELECT @Years = Stuff((SELECT DISTINCT ',[' 
                                       + Cast(Year(u.StartDate) AS 
                                       NVARCHAR(4 
                                              )) 
                                       + ']' 
                       FROM   [products] u 
                       FOR xml path('')), 1, 1, '') 
DECLARE @date nvarchar(max)
SET @date =CONVERT(VARCHAR(10),GETDATE(),105)
-- SELECT @date
DECLARE @SQL nvarchar(max)
SELECT @SQL = '
select
    *
from (
    select
      ''Product'' AS Status,''total_product'' as [YEAR], 
      productname, year(u.StartDate) as [y]
    from products u  WHERE 
    MID ='''+@MID+''' 
    AND u.Flag <> 0 

  ) Data
PIVOT (
  COUNT(productname)
  FOR [y]
  IN (
    ' + @Years + '
  )
) PivotTable

UNION ALL 
select
    *
from (
    select ''Finished'' AS Finished,
      ''In Time'' as [YEAR], 
     Coalesce(COUNT(productsname),0) AS productsname, Coalesce(COUNT(year(u.StartDate)),0) as [y]
    from products u  WHERE  u.AStartdate IS NOT NULL 
    AND u.AStartdate = u.pStartdate
    AND MID ='''+@MID+''' 

  ) Data
PIVOT (
  COUNT(productsname)
  FOR [y]
  IN (
    ' + @Years + '
  )
) PivotTable

'
EXECUTE (@SQL)
END 
```

这给了我结果

```
    状态年 2012
    产品总数_产品 4
    及时完成 0

```

```
 select ''Finished'' AS Finished,
      ''In Time'' as [YEAR], 
     Coalesce(COUNT(productsname),0) AS productname, Coalesce(COUNT(year(u.StartDate)),0) as [y]
    from products u  WHERE  u.AStartdate IS NOT NULL 
    AND u.AStartdate = u.pStartdate
    AND MID ='''+@MID+''' 
```

这给了我这样的结果

```
Finished   YEAR     productname  Y
FINISHED  In Time        1       1 
```

单独它给我计数为 1，但在存储过程中执行时它给我 0。

那么如何在程序中实现这一点？请注意，有时“完成”块中可能没有任何结果集，这就是我使用的原因

```
Coalesce(COUNT(productsname),0) AS productname, Coalesce(COUNT(year(u.StartDate)),0) 
```

请建议..

数据库是 SQL Server

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:48:19.377

除了您的示例数据缺少`flag`and`mid`列（*我假设它在您的表中*）这一事实之外，问题似乎是使用了错误的列名。

`COUNT(productsname)`应该是`COUNT(productname)`（删除***s***）。

# html - 用于简单网页设计的好工具/软件包

> ID：11448109
> 
> 赞同：-2
> 
> 时间：2012-07-12T08:47:14.883
> 
> 标签：html

我是一名服务器端 Java 开发人员，在网页设计（仅 html 和 css 的基础知识）方面没有经验（老实说也没有多大兴趣）。但是，我需要建立一个网站作为我工作的一部分。

[理想情况下，我想要一个功能与http://www.jimdo.com](http://www.jimdo.com)类似的工具，但可以获取生成的 html 文件并将它们部署到任何地方。

我尝试过 Kompozer 和 Dreamweaver，但我想要更简单的东西。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:45:14.447

你可以试试 BlueGriffon ( [http://bluegriffon.org/](http://bluegriffon.org/) )，它是开源的并且工作正常。

但在我看来，这不会比仅使用您拥有的基本技能并基于 html 表格组合一个简单的布局更简单。

# java - 在 confluence 或 jira 中获取附件下载统计信息

> ID：11448110
> 
> 赞同：1
> 
> 时间：2012-07-12T08:47:19.333
> 
> 标签：java, jira, confluence

我有带有附件的页面，我需要有关其下载次数的统计信息。

获得这些统计数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T11:11:16.357

您可以尝试免费的[tracking-plugin](https://marketplace.atlassian.com/plugins/net.customware.confluence.plugin.tracking)[`tracking-info`](http://wiki.customware.net/repository/display/AtlassianPlugins/tracking-info)提供的宏：

```
{tracking-info:[Attachment Name]
   |value=[view count|first view date|last view date]
   |format=[date format]
   |digits=[#]}
Default text
{tracking-info} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:02:30.703

如果要跟踪空间中下载次数最多的文件，请使用以下命令：

```
 {tracking-table:spaces=@self|types=attachment|maxResults=10} 
```

# c# - 实体框架按 ID 批量更新

> ID：11448111
> 
> 赞同：1
> 
> 时间：2012-07-12T08:47:22.043
> 
> 标签：c#, sql-server-2008, entity-framework-4

我正在使用一个实体框架项目，我需要在其中按 ID 批量更新记录。ID（即特定表的主键）在运行时可用，我想更新以下查询中的所有记录：

```
UPDATE EntityTable
SET Column = @p0
WHERE EntityID IN '1,2,3,[...]' 
```

我遇到的问题是我需要处理大约 60k 个 ID（最坏的情况），而我们的数据库软件（SQL Server 2008）无法处理：

> 查询处理器用尽了内部资源，无法生成查询计划。这是一个罕见的事件，仅适用于极其复杂的查询或引用大量表或分区的查询。请简化查询。如果您认为您错误地收到了此消息，请联系客户支持服务以获取更多信息。

通过谷歌搜索，我发现人们使用老派`DataTable`和`SqlDataAdapter`调用来实现这一点，但如果可能的话，我想保持实体框架的精神，或者如果需要的话，我想保留原始 sql。有没有办法以合理有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:07:25.723

EF 不直接支持批量更新，因此您必须使用直接 SQL。您最好的选择是带有包含您的 ID 的表值参数的存储过程。EF 不支持表值参数，因此您必须直接使用 ADO.NET。

您当前的解决方案只能通过将您的 ID 分成更小的组并分别为每个子集执行更新来改进。

# iphone - 如果 iPad 更改语言设置，请更改应用名称

> ID：11448113
> 
> 赞同：0
> 
> 时间：2012-07-12T08:47:25.703
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在制作一个双语应用程序，泰语是英语和韩语。现在，我希望我的应用在用户更改设备的语言设置时更改其名称。如果语言设置为英语，则应用名称为英语，如果是韩语，则应用名称将更改为韩语。

我知道这是可能的，因为我见过一些类似的应用程序。我将如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:02:46.323

转到 infoPlist.Strings 文件

写

```
CFBundleDisplayName = "Your App Name In Particular Language"; 
```

在属性中添加文件的本地化

# php - Symfony 2 不区分大小写的路由

> ID：11448114
> 
> 赞同：4
> 
> 时间：2012-07-12T08:47:25.880
> 
> 标签：php, symfony

我目前正在使用 Symfony 2 开发一个应用程序，并且希望我的路由不区分大小写。

我已经包含了一个示例路线。这仅匹配 /some_url/。我希望这能匹配该模式的任何变化。例如。/Some_url/、/SOME_URL/ 等...

```
some_route:
    pattern:  /some_url/
    defaults: { _controller: Bundle:Controller:Action } 
```

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T09:59:05.093

尝试这个：

```
some_route:
    pattern:   /{some_url}/
    defaults:  { _controller: Bundle:Controller:Action }
    requirements:
        some_url:  (?i:some_url) 
```

但正如评论中已经提到的，这是一种不好的做法

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-13T17:48:20.423

尝试这个

```
 some_route:
        pattern:  /some_url/
        defaults: { _controller: Bundle:Controller:Action }

    _Some_route:
        pattern:  /Some_url/
        defaults: { _controller: FrameworkBundle:Redirect:redirect, route: some_route }

    __SOME_route:
        pattern:  /SOME_URL/
        defaults: { _controller: FrameworkBundle:Redirect:redirect, route: some_route } 
```

您可以为不同的区分大小写的数学创建一些路由，并在默认属性中使用此说明重定向某些路由

```
defaults: { _controller: FrameworkBundle:Redirect:redirect, route: some_route } 
```

我希望这有帮助！...

# c# - 向 EF 实体类添加行为

> ID：11448117
> 
> 赞同：0
> 
> 时间：2012-07-12T08:47:41.980
> 
> 标签：c#, .net, entity-framework

要定义实体框架可序列化类（EF Code First），我们需要使用公共虚拟属性作为数据持有者，稍后将用作数据库中的列。这使开发人员失去了从构造函数初始化实体实例的能力。我希望我的实体不仅是数据“桶”，而且还具有行为，例如新对象的构造函数实例化，以及对象内数据操作的方法。

我想我可以拥有的方法，但是我应该怎么做才能克服构造函数的限制？我应该引入将逐个实例化实体属性并使用它的包装类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:52:21.960

您可以拥有“随心所欲”的方法，以及不会在数据库中映射的没有设置器的属性。或带有 a 的属性`NotMappedAttribute`，其中...不会被映射。

注意：只有导航属性（引用和集合）需要是虚拟的才能延迟加载。不是原始人。我认为这是 NHnibernate 的要求。

对于构造函数，您可以根据需要添加任意数量的参数化构造函数，您只需要还有一个无参数的构造函数。

顺便说一句，您也可以使用对象初始化器。

```
var test = new Test {
                Name = bla,
                Code = 2
                }; 
```

# visual-c++ - OnPaint() 函数中的 MemDC

> ID：11448118
> 
> 赞同：0
> 
> 时间：2012-07-12T08:47:45.893
> 
> 标签：visual-c++, mfc, gdi, onpaint

我的 OnPaint() 函数调用了其他几个绘图函数。

```
 void CGraph::OnPaint ()
 {
    CPaintDC dc(this);
    // CMemDC DC(&dc);

    dc.SetViewportOrg (0, 400);
    dc.SetMapMode(MM_ISOTROPIC);
    dc.SetWindowExt(1000, 800);
    dc.SetViewportExt(1000, -800);

    ProcessData ();
    DrawCoordinateSystem (&dc);
    DrawGrid (&dc);
    DrawGraph (&dc);
} 
```

DrawCoordianteSystem 示例：

```
void CGraph::DrawCoordinateSystem (CDC* pDC)
{
   CPen PenBlack (PS_SOLID, 1, RGB(0, 0, 0));
   pDC->SelectObject (PenBlack);
   // Rectangle round the system
   pDC->Rectangle (0, -400, 1000, 400);
   // Horizontal axis
   pDC->MoveTo (0, 0);
   pDC->LineTo (1000, 0);
   pDC->SetTextColor (RGB(0,0,0));
   pDC->SetBkColor (RGB(240, 240, 240));
   pDC->TextOut (1001, 0, L"0");
   // Vertical axis
   pDC->MoveTo (0, -400);
   pDC->LineTo (0, 400);
} 
```

我现在想避免使用 CMemDC 闪烁。但是，我无法让它正常工作。有人可以告诉我如何实施 CMemDC 吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:11:27.583

您需要使用位图加载内存 DC，然后将 BitBlt 加载到屏幕 DC。

尝试类似：

```
CDC dcMem;
CBitmap bitmap;

dcMem.CreateCompatibleDC( pDC );
bitmap.CreateCompatibleBitmap(pDC, rect.Width(), rect.Height())
CBitmap* pOldBitmap = dcMem.SelectObject(&bitmap);

... DO ALL YOUR DRAWING TO dcMem ...

pDC->BitBlt(rect.left, rect.top, rect.Width(), rect.Height(), &dcMem, 0, 0, SRCCOPY);

dcMem.SelectObject(pOldBitmap) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:52:17.880

为避免闪烁，您应该将所有内容都绘制`CMemDC`到`BitBlt`真正的 DC 上。

其次为 WM_ERASEBKGND 消息添加 windows 消息处理程序并将代码更改为

```
BOOL CGraph::OnEraseBkgnd(CDC* pDC) 
{
    return TRUE;
} 
```

# entity-framework - 实体框架 - 如何在不保存相关对象的情况下保存实体

> ID：11448125
> 
> 赞同：0
> 
> 时间：2012-07-12T08:48:05.677
> 
> 标签：entity-framework, linq-to-entities

在我的实体框架中，我有三个相关的实体“**客户端**”、“客户端**地址**”和“**查找地址类型**”。“ **LookupAddressType** ”是一个主类，指定可用地址类型的类型，如商业地址、住宅地址等。**ClientAddress**取决于**LookupAddresstype**和**Client**。在**保存**具有相关 ClientAddress 数据的**Client**实体时，我收到以下错误。

> “违反主键约束‘PK_LookupAddressType’。无法在对象‘dbo.LookupAddressType’中插入重复键。语句已终止。

我不需要插入 LookupAddressType。在这里，我只需要将相关的lookupAddressTypeId 插入到clientAddress 实体中。

保存代码是这样的：

```
Add(Client);
_objectContext.SaveChanges(); 
```

我怎样才能做到这一点？

加载代码如下：

```
private void LoadClientDetails(EFEntities.Client _Client)
    {

        EFEntities.LookupClientStatu clientStatus;
        var clientAddressList = new List<ClientAddress>();

        if (_Client == null)
        {
            return;
        }

        //Assign data to client object
        _Client.ClientName = rtxtName.Text;
        _Client.Alias = rtxtAlias.Text;
        _Client.ClientCode =Int32.Parse(rtxtClientCode.Text); 
        _Client.TaxPayerID = rtxtTaxPayerId.Text;

        if (rcboStatus.SelectedIndex != 0)
        {
            clientStatus = new EFEntities.LookupClientStatu
                               {
                                   ClientStatusID = (Guid) (rcboStatus.SelectedValue),
                                   ClientStatusDescription = rcboStatus.Text
                               };
            _Client.LookupClientStatu = clientStatus;
        }

        //_Client.Modified = EnvironmentClass.ModifiedUserInstance.Id;

        _Client.EffectiveDate = rdtEffectiveDate.Value;

        if (rdtExpDate.Value != rdtExpDate.MinDate)
        {
            _Client.ExpirationDate = rdtExpDate.Value;
        }
        else
        {
            _Client.ExpirationDate = null;
        }

        _Client.StartDate = DateTime.Now;

        EFEntities.ClientAddress clientAddress = null;
        // Iesi.Collections.Generic.ISet<ClientAddress> clientAddress = new HashedSet<ClientAddress>();
        foreach (var cAddress in _clientController.client.ClientAddresses)
        {
            clientAddress = cAddress;
            break;
        }

        if (clientAddress == null)
        {
            clientAddress = new EFEntities.ClientAddress();
        }

        clientAddress.Address1 = rtxtClientAdd1.Text;
        clientAddress.Address2 = rtxtClientAdd2.Text;
        clientAddress.Address3 = rtxtClientAdd3.Text;

        // Address type details
        if (rcboClientAddType.SelectedIndex != -1)
        {
            clientAddress.LookupAddressType = new EFEntities.LookupAddressType
                                            {
                                                AddressTypeID = (Guid) (rcboClientAddType.SelectedValue),
                                                AddressTypeDescription = rcboClientAddType.Text
                                            };

            //clientAddress.AddressType.Id = Convert.ToByte(rcboClientAddType.SelectedValue);
        }

        clientAddress.City = rtxtClientCity.Text;
        clientAddress.Client = _Client; 
```

\

```
 _Client.ClientAddresses.Add(clientAddress);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:13:31.197

好吧，我对以下代码行进行了此操作以使其正常工作。

```
if (rcboClientAddType.SelectedIndex != -1)
    {
        clientAddress.LookupAddressType = new EFEntities.LookupAddressType
                                        {
                                            AddressTypeID = (Guid) (rcboClientAddType.SelectedValue),
                                            AddressTypeDescription = rcboClientAddType.Text
                                        };

        //clientAddress.AddressType.Id = Convert.ToByte(rcboClientAddType.SelectedValue);
    } 
```

我把上面的代码改成了这个

```
if (rcboClientAddType.SelectedIndex != -1)
        {
            //clientAddress.LookupAddressType = new EFEntities.LookupAddressType
            //                                {
            //                                    AddressTypeID = (Guid) (rcboClientAddType.SelectedValue),
            //                                    AddressTypeDescription = rcboClientAddType.Text
            //                                };
            clientAddress.AddressTypeID = (Guid)(rcboClientAddType.SelectedValue);

        } 
```

# java - 制作一个唯一的对象列表 Java

> ID：11448129
> 
> 赞同：12
> 
> 时间：2012-07-12T08:48:15.613
> 
> 标签：java, list, collections, unique

我有一个 ArrayList 填充有属性名称和时间的对象。我想根据名称删除重复项并仅保留最新时间的记录。所以我在我的对象中覆盖了`equals`和`hashcode`for name 并使用了这样的代码。

```
private List<ChangedRecentlyTO> groupRecords(List<ChangedRecentlyTO> toList) {
    changedRecentlyList.clear(); //static list
    for(ChangedRecentlyTO to : toList) {
        if(!changedRecentlyList.contains(to)) {
            changedRecentlyList.add(to);
        } else {
            if(changedRecentlyList.get(changedRecentlyList.lastIndexOf(to)).getTimeChanged().before(to.getTimeChanged())) {
                changedRecentlyList.remove(to);
                changedRecentlyList.add(to);
            }
        }
    }
    return changedRecentlyList;
} 
```

但我想知道，有没有更好的解决方案？我正在考虑使用 Set 但我无法弄清楚我应该如何将时间标准放在那里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T08:57:33.817

仅当新对象比现有对象更新时，扩展`HashMap`和覆盖方法才放置。`put`

或者，您可以创建自己的专用容器，该容器将由 a 支持`HashMap`，就像 的某些实现`Stack`由`LinkedList`

* * *

这是一个模拟代码：

```
import java.util.HashMap;
import java.util.Map;

public class TimeMap<K, V> {

    private Map<K, V> timeMap;

    public TimeMap() {
        this.timeMap = new HashMap<K, V>();
    }

    public void put(K key, V value) {
        if (isNewer(key, value)) {
            this.timeMap.put(key, value);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T09:28:26.853

你有两种方法，一种需要了解集合是如何工作的，另一种对于对 Java 集合了解较少的人来说更容易理解：

如果你想让它简单，你可以简单地阅读Set的Javadoc，[http:](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#add(E) //docs.oracle.com/javase/6/docs/api/java/util/Set.html#add(E ) . 它明确指出，如果一个元素已经在其中，则不会再次添加它。

*   您仅使用名称来实现您的等号和哈希码
*   您按时间对项目进行排序，然后将它们添加到集合中。

这样，第一次将项目添加到 Set 时，您将添加具有最新时间的元素。当您添加其他人时，它们将被忽略，因为它们已经包含在内。

* * *

如果不确切知道 java.util.Set 契约的其他人的行为，您可能希望扩展 Set 以使您的意图更清晰。但是，由于不应该访问 Set 以“在删除后取回元素”，因此您需要使用 HashMap 支持您的集合：

```
interface TimeChangeable {
   long getTimeChanged();
}
public class TimeChangeableSet<E extends TimeCheangeable> implements Set<E> {

    private final HashMap<Integer,E> hashMap = new HashMap<Integer,E>();

    @Override
    public boolean add(E e) {
        E existingValue = hashMap.remove(e.hashCode());
        if(existingValue==null){
            hashMap.put(e.hashCode(),e);
            return true;
        }
        else{
            E toAdd = e.getTimeChanged() > existingValue.getTimeChanged() ? e : existingValue;
            boolean newAdded = e.getTimeChanged() > existingValue.getTimeChanged() ? true : false;
            hashMap.put(e.hashCode(),e);
            return newAdded;
        }

    }

    @Override
    public int size() {
        return hashMap.size();
    }

    @Override
    public boolean isEmpty() {
        return hashMap.isEmpty();
    }

    @Override
    public boolean contains(Object o) {
        return hashMap.containsKey(o.hashCode());
    }

    @Override
    public Iterator<E> iterator() {
        return hashMap.values().iterator();
    }

    @Override
    public Object[] toArray() {
        return hashMap.values().toArray();
    }

    @Override
    public <T> T[] toArray(T[] a) {
        return hashMap.values().toArray(a);
    }

    @Override
    public boolean remove(Object o) {
        return removeAndGet(o)!=null ? true : false;
    }

    public E removeAndGet (Object o) {
        return hashMap.remove(o.hashCode());
    }

    @Override
    public boolean containsAll(Collection<?> c) {
        boolean containsAll = true;
        for(Object object:c){
            E objectInMap = removeAndGet(object);
            if(objectInMap==null || !objectInMap.equals(object))
                containsAll=false;
        }
        return containsAll;
    }

    @Override
    public boolean addAll(Collection<? extends E> c) {
        boolean  addAll=true;
        for(E e:c){
            if(!add(e)) addAll=false;
        }
        return addAll;

    }

    @Override
    public boolean retainAll(Collection<?> c) {
        boolean setChanged=false;
        for(E e: hashMap.values()){
            if(!c.contains(e)){
                hashMap.remove(e.hashCode());
                setChanged=true;
            }
        }
        return setChanged;
    }

    @Override
    public boolean removeAll(Collection<?> c) {
        throw new UnsupportedOperationException("Please do not use type-unsafe methods in 2012");
    }

    @Override
    public void clear() {
        hashMap.clear();
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T08:53:54.103

为什么不使用[Set](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html)及更高版本：

```
new ArrayList(set); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T10:17:59.307

一个非常快速的实现我的想法。

假设`ChangedRecentlyTO`对象有一个`name`属性。

```
private List<ChangedRecentlyTO> groupRecords(List<ChangedRecentlyTO> toList) {

    Map<String, ChangedRecentlyTO> uniqueMap = new HashMap<String, ChangedRecentlyTO>();

    for(ChangedRecentlyTO to : toList) {
        if (uniqueMap.containsKey(to.getName())) {
            if (uniqueMap.get(to.getName()).getTimeChanged().before(to.getTimeChanged())) {
                uniqueMap.put(to.getName(), to);
            }
        } else {
            uniqueMap.put(to.getName(), to);
        }
    }
    return (List<ChangedRecentlyTO>) uniqueMap.values();
} 
```

毕竟，它似乎与您的原始实现没有什么不同，除了不需要覆盖`hashcode`和`equals`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T09:11:21.713

我的建议是，`Comparable`通过实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html) 接口来创建你的类。`comparetTo()`然后根据名称和时间比较它们，如果对象时间是最近的，则返回 1，否则 0（如果相等）或 -1。一旦你有了这个功能，你就可以扩展[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)类和覆盖`put`方法之类的。

```
o1.compareTo(o2) > 0 then simply overwrite the object with latest one. 
```

**向@Lopina 代码添加逻辑，例如**

```
public class MyHashMap extends HashMap<String, MyClass>{
private Map<String, MyClass> timeMap;

public MyHashMap() {
    this.timeMap = new HashMap<String, MyClass>();
}

public MyClass put(String key, MyClass value) {

    MyClass obj;
    if (isNewer(key, value)) {
        System.out.println("count");
        obj=this.timeMap.put(key, value);
    }else{
        obj=value;
    }
    return obj;
}

private boolean isNewer(String key, MyClass value) {

    if(this.timeMap.get(key)==null ||( key.equals(value.getName()))&& (this.timeMap.get(key).compareTo(value))<0)
        return true;
    else
        return false;
}

@Override
public int size() {

    return this.timeMap.size();
}

@Override
public MyClass get(Object key) {

    return this.timeMap.get(key);
}
} 
```

在 MyClass 中实现类似的接口和覆盖`compareTo`方法，如下所示。

```
@Override
public int compareTo(MyClass o) {

    return this.getTime().compareTo(o.getTime());
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-12T09:16:16.347

您可以让您的类实现`Comparable`接口并比较检查您感兴趣的时间戳。如果您然后对其进行排序（例如将所有元素放在 a 中`TreeSet`）然后将它们一一取出，前提是它们尚不存在. 像这样的东西：

```
public void removeDuplicates(List<MyObject> list){
    SortedSet<MyObject> sortedSet = new TreeSet<MyObject>();
    sortedSet.addAll(list);

    //Now clear the list, and start adding them again
    list.clear();
    for(MyObject obj : sortedSet){
        if(!list.contains(obj) {
             list.add(obj);
        } 
    }
    return list;
} 
```

但是，这仅在具有不同时间戳的两个对象不相等时才有效！（在`equals()`这个词的意义上

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-02T11:50:34.797

我编写了一个`UniqueList`扩展 ArrayList 以支持其数据并利用 a`HashSet`有效拒绝重复的类。这为手动扫描数据集提供了 O(1) 随机访问时间和许多其他速度改进。

[https://gist.github.com/hopesenddreams/80730eaafdfe816ddbb1](https://gist.github.com/hopesenddreams/80730eaafdfe816ddbb1)

```
public class UniqueList<T> extends ArrayList<T> implements Set<T>
{
    HashMap<T,Integer> hash; // T -> int

    public UniqueList()
    {
        hash = new HashMap<>();
    }

    /*
    * O(n)
    * */
    @Override
    public void add(int location, T object)
    {
        super.add(location, object);
        for( int i = location ; i < size() ; i++ )
        {
            hash.put(get(i),i);
        }
    }

    /*
    * O(1) amortized.
    * */
    @Override
    public boolean add(T object) {
        if( hash.containsKey(object) ) return false;

        hash.put(object, size());
        super.add(object);

        return true;
    }

    /*
    * O(MAX(collection.size(),n)) because of the hash-value-shift afterwards.
    * */
    @Override
    public boolean addAll(int location, Collection<? extends T> collection) {
        boolean bChanged = false;
        for( T t : collection)
        {
            if( ! hash.containsKey( t ) )
            {
                hash.put(t, size());
                super.add(t);
                bChanged = true;
            }
        }

        for( int i = location + collection.size() ; i < size() ; i ++ )
        {
            hash.put( get(i) , i );
        }

        return bChanged;
    }

    /*
    * O(collection.size())
    * */
    @Override
    public boolean addAll(Collection<? extends T> collection) {
        boolean bChanged = false;
        for( T t : collection)
        {
            if( ! hash.containsKey( t ) )
            {
                hash.put( t , size() );
                super.add(t);
                bChanged = true;
            }
        }
        return bChanged;
    }

    /*
    * O(n)
    * */
    @Override
    public void clear() {
        hash.clear();
        super.clear();
    }

    /*
    * O(1)
    * */
    @Override
    public boolean contains(Object object) {
        return hash.containsKey(object);
    }

    /*
    * O(collection.size())
    * */
    @Override
    public boolean containsAll(Collection<?> collection) {
        boolean bContainsAll = true;
        for( Object c : collection ) bContainsAll &= hash.containsKey(c);
        return bContainsAll;
    }

    /*
    * O(1)
    * */
    @Override
    public int indexOf(Object object) {
        //noinspection SuspiciousMethodCalls
        Integer index = hash.get(object);
        return index!=null?index:-1;
    }

    /*
    * O(1)
    * */
    @Override
    public int lastIndexOf(Object object)
    {
        return hash.get(object);
    }

    /*
    * O(n) because of the ArrayList.remove and hash adjustment
    * */
    @Override
    public T remove(int location) {
        T t = super.remove(location);
        hash.remove( t );
        for( int i = size() - 1 ; i >= location  ; i -- )
        {
            hash.put( get(i) , i );
        }
        return t;
    }

    /*
    * O(n) because of the ArrayList.remove and hash adjustment
    * */
    @Override
    public boolean remove(Object object) {
        Integer i = hash.get( object );
        if( i == null ) return false;
        remove( i.intValue() );
        return true;
    }

  /*
    * O( MAX( collection.size() , ArrayList.removeAll(collection) ) )
    * */
    @Override
    public boolean removeAll(@NonNull Collection<?> collection) {
        for( Object c : collection )
        {
            hash.remove( c );
        }
        return super.removeAll( collection );
    }
} 
```

# r - 在r中双重合并两个数据帧

> ID：11448133
> 
> 赞同：3
> 
> 时间：2012-07-12T08:48:23.763
> 
> 标签：r, merge, dataframe

我有两个数据框

```
df1 = data.frame(Sites=c("A","B","C"),total=c(12,6,35))

df2 = data.frame(Site.1=c("A","A","B"),Site.2=c("B","C","C"), Score=c(60,70,80)) 
```

我需要合并它们以生成数据框

```
df3=data.frame(Site.1=c("A","A","B"),Site.2=c("B","C","C"),
Score=c(60,70,80),Site.1.total=c(12,12,6),Site.2.total=c(6,35,35)) 
```

关于进行这种双重合并的最简单方法有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:58:04.943

只需`merge`两次：

```
x <- merge(df2, df1, all.x=TRUE, by.x="Site.2", by.y="Sites", sort=FALSE)
merge(x, df1, all.x=TRUE, by.x="Site.1", by.y="Sites", sort=FALSE)

  Site.1 Site.2 Score total.x total.y
1      A      B    60       6      12
2      A      C    70      35      12
3      B      C    80      35       6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:12:06.943

这里有几个 sqldf 解决方案。

首先让我们重命名名称中包含点的列以删除点，因为点是 SQL 运算符。（如果我们不希望这样做，我们可以将 SQL 语句中的那些列称为`Site_1`and`Site_2`并且它会理解我们指的是`Site.1`and `Site.2`。）

```
library(sqldf)
df1 = data.frame(Sites = c("A","B","C"), total = c(12,6,35))
df2 = data.frame(Site1 = c("A","A","B"), Site2 = c("B","C","C"), 
           Score = c(60,70,80)) 
```

现在我们有了输入，让我们尝试使用 sqldf 的几种方法：

**带有三个 sql 语句的 sqldf**

```
temp1 <- sqldf("SELECT * FROM df1 as a, df2 as b WHERE a.Sites = b.Site1 ")  
temp2 <- sqldf("SELECT * FROM df1 as a, df2 as b WHERE a.Sites = b.Site2 ")

sqldf("SELECT 
    Site1,
    b.Site2,
    a.Score, 
    a.Total as Site1Total, 
    b.Total as Site2Total 
FROM temp1 as a,  temp2 as b 
USING (Site1)
GROUP BY a.Total, b.Total") 
```

**sqldf 简化为三重连接**

我们可以进一步将上述内容简化为三重连接，这或许可以阐明计算的本质。也就是上面的三个 SQL 语句可以简化为这一条语句：

```
> sqldf("SELECT Site1, Site2, Score, a1.total AS total1, a2.total AS total2
+ FROM df1 AS a1, df1 a2, df2 AS b
+ WHERE a1.Sites = Site1 AND a2.Sites = Site2")
  Site1 Site2 Score total1 total2
1      A      B    60      12       6
2      A      C    70      12      35
3      B      C    80       6      35 
```

# spring - 我可以使用 Spring Liferay 进行移动 Web 开发吗

> ID：11448135
> 
> 赞同：0
> 
> 时间：2012-07-12T08:48:28.347
> 
> 标签：spring, liferay, liferay-6

我可以使用 Spring Liferay 进行移动 Web 开发吗？

这是一个非常基本的问题，但我在谷歌上试过，但我找不到任何关于这个的教程。任何人都可以对此提出任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:51:26.670

是的，我认为您可以使用它，因为它`Spring`是一个服务器端 Java 框架，并且对于移动 Web 开发，我认为除了自定义可以通过主题完成的页面外观之外，您不需要做任何特别的事情在生命射线。

从 Liferay 6.1 开始，您甚至可以定义[**移动设备规则**](http://www.liferay.com/community/forums/-/message_boards/message/12718570)。

对于这个的快速演示，你可以去[Liferay](http://www.liferay.com/)网站，尝试改变浏览器的窗口大小，然后看看页面是如何变化的。甚至您可以尝试在手机中查看该网站。

希望这可以帮助。

# wcf - 元数据包含无法解析的引用：'net.tcp://localhost:8083/xyx/mex'

> ID：11448137
> 
> 赞同：1
> 
> 时间：2012-07-12T08:48:37.410
> 
> 标签：wcf

我正在尝试将枚举成员添加到已经存在的 DataContract。当我尝试更新服务引用时，出现错误“元数据包含无法解析的引用：'net.tcp://localhost:8083/xyx/mex'”。

如何找到与此问题相关的问题。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:51:45.053

检查您的 mex 端点`..\Visual Studio\Common7\IDE\WcfTestClient.exe`

# php - 使用 MySQL 数据库重写 URL

> ID：11448139
> 
> 赞同：0
> 
> 时间：2012-07-12T08:48:43.737
> 
> 标签：php, mysql, .htaccess

> **可能重复：**
> [.htaccess url 用 php 重写](https://stackoverflow.com/questions/3647617/htaccess-url-rewriting-with-php)

我网站上的主页列出了许多用户。每个用户都有“查看个人资料”链接，可将您带到与`www.mysite.com/user-profiles/profile.php?id=32`该`id`用户相关的链接。

是否可以使用 URL 重写在数据库中查找该 ID 的用户的姓名和姓氏并重写它类似的东西？

`www.mysite.com/user-profiles/john-a-doe`

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T08:59:41.817

我建议这样做

以以下格式打印 URL，`mysite.com/user-profiles/(ID)/(NAME)`然后使用它来重写：

```
RewriteRule ^user-profiles/([^/]*)/([^/]*)$ /user-profiles/profile.php?id=$1&name=$2 [L] 
```

然后在你的`profile.php` `SELECT`for`id`和`name`

注意：有几种方法可以实现您想要的，但是由于您使用全名，`(NAME)`当两个用户（或更多）具有相同名称时，这会导致问题（由 Ronn0 指出），我建议您这样做'能够消除这个问题。

# php - 需要一些帮助来添加一些验证码联系表

> ID：11448140
> 
> 赞同：4
> 
> 时间：2012-07-12T08:48:44.060
> 
> 标签：php, forms, security, captcha, contact

嗨，我是 PHP 新手，我需要一些帮助。我创建了一个联系表格，我想添加一些验证码。我已经创建了一些 gif 图像，其中添加了一些噪声的数字，并将 no1 命名为 code_01.gif，将 no2 命名为 code_02.gif 等。我将其中一些静态地放在我的表单上，用于这样的显示目的：

```
<img src="images/code_01.gif" />
<img src="images/code_07.gif" />
<img src="images/code_01.gif" />
<img src="images/code_08.gif" />
<img src="images/code_03.gif" />
<img src="images/code_07.gif" />
<input name="captcha" type="text" id="captcha" /> 
```

我想添加一些功能以每次随机显示图像代码，并检查输入是否与显示的 6 位数字匹配。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T08:51:31.743

## 简单的 PHP 验证码

这是您将使用的最简单的验证码脚本之一。虽然它不会掩盖文本，但对于许多需要低级 CAPTCHA 解决方案的人来说，它将很好地发挥其作用。这个脚本几乎不需要设置。唯一的依赖是 PHP GD 库。

它可以像这样使用简单，但它也是可配置的：

```
<?php

session_start();
include("captcha.php");
$_SESSION['captcha'] = captcha();

echo '<img src="' . $_SESSION['captcha']['image_src'] . '" alt="CAPTCHA" />';

?> 
```

### 演示： http: [//labs.abeautifulsite.net/simple-php-captcha/](http://labs.abeautifulsite.net/simple-php-captcha/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T02:39:09.510

你也可以使用这个：[Securimage](http://www.phpcaptcha.org/)

Securimage 是一个开源的免费 PHP CAPTCHA 脚本，用于生成复杂的图像和 CAPTCHA 代码，以保护表单免受垃圾邮件和滥用。它可以很容易地添加到您网站上的现有表单中，以防止垃圾邮件机器人。只要您安装了 PHP，它就可以在大多数网络服务器上运行，并且 PHP 中支持 GD。Securimage 可以完成从生成 CAPTCHA 图像到验证输入代码的所有工作。有声代码可以通过 Flash 流式传输到具有视力障碍的浏览器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T11:50:19.310

这是我很久以前发现的一个**简单的数学 captha 类型的东西。**
**优点：**
- 没有图像，因此带宽使用量更少。
- 没有外部依赖。

**流水作业**

在`form.php`：

1.  选择一个随机数`$n1`
2.  选择另一个随机数`$n2`
3.  用各种数学运算计算`$n1`&`$n2`并将其存储为`$result`，以便结果数不可预测且与`$n1+$n2`
4.  回声“什么是`$n1`+ `$n2`？”
5.  要求用户输入步骤 4 中提出的问题的答案。
6.  在表单中添加`$result`为隐藏值。
7.  提交时，`$_POST`值由 处理`check.php`。

在`check.php`：

1.  如果`$_POST["answer"]`已设置，请将其存储在`$answer`
2.  `$answer`以与第 3 步相同的方式计算`form.php`
3.  现在，如果`$answer`等于`$_POST["result"]`，则验证用户是人类。

请记住，这`$answer`是用户提交的答案，`$result`是我们对`$answer`.

**代码：**

文件：`form.php`

```
<?php

$n1 = rand(1,15);
$n2 = rand(1,15);
//start making our result unpredictable & non-aligned with hidden value
$result = $n1+$n2;
$result = ($result*3)-2;
$result = ($result+4)*5;
$question="what is $n1 + $n2?";
?>
<form method="post" action="check.php">
<?php echo $question.PHP_EOL; ?>
<input name="answer" type="text"><br />
<input type="hidden" name="result" value="<?php echo $result; ?>">
</form> 
```

文件：`check.php`

```
<?php

if(isset($_POST["answer")){
    $answer = $_POST["answer"];
    // start doing same math on $answer
    $answer = ($answer*3)-2;
    $answer = ($answer+4)*5;
    if($answer == $_POST["result"]{
        // echo Hurray, you are Human..
        // Do anything here.. 
    }else{
        echo "Wrong Answer";
    } 
```

[http://codepad.org/2MtULNhZ 的逻辑实现](http://codepad.org/2MtULNhZ)

关键是使编码和解码公式更难。所以有人在看`hidden form value` `result`并且`Question`不应该找出他们两者之间的关系。

# ios - 首次启动后隐藏 ViewController

> ID：11448143
> 
> 赞同：1
> 
> 时间：2012-07-12T08:48:47.070
> 
> 标签：ios, xcode, uiviewcontroller, nsuserdefaults

在我的应用程序中，我有一个作为欢迎屏幕加载的 ViewController。您点击“开始”，然后出现另一个 ViewController，让用户创建一个帐户。提交信息后，他们的个人资料就会出现。（这是一个有趣的测试应用程序）我想这样当用户注册，使用他们的个人资料然后退出应用程序时，他们不必继续重新注册。所以我需要帮助检测应用程序首次启动，然后让 WelcomeViewController 和 RegisterViewController 在首次启动后消失。

欢迎视图控制器：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

if ([[NSUserDefaults standardUserDefaults] boolForKey:@"hasLaunchedOnce"]) {

    ProfileViewController *profileVC = [[ProfileViewController alloc] initWithNibName:nil bundle:nil];

    [self presentViewController:profileVC animated:NO completion:nil];

} else {

    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"hasLaunchedOnce"];

    [[NSUserDefaults standardUserDefaults] synchronize];

     }
} 
```

注册视图控制器：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

if ([[NSUserDefaults standardUserDefaults] boolForKey:@"hasLaunchedOnce"]) {

    ProfileViewController *profileVC = [[ProfileViewController alloc] initWithNibName:nil bundle:nil];

    [self presentViewController:profileVC animated:NO completion:nil];

} else {

    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"hasLaunchedOnce"];

    [[NSUserDefaults standardUserDefaults] synchronize];

     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:25:04.927

NSUserDefaults 是您正在寻找的...将登录用户的状态存储在 NSUserDefaults 中并在应用程序启动时检查/加载它...

# android - App registration ID not generating in GCM Android

> ID：11448144
> 
> 赞同：3
> 
> 时间：2012-07-12T08:48:52.550
> 
> 标签：android, notifications, registration, google-cloud-messaging

I have tried some forum pages and searched through stackoverflow for the same thing, but I did not find the solution.

I have used the below code to generate *registration ID* for GCM notification. But I get an empty string as a registration ID:

> GCMRegistrar.checkDevice(this); GCMRegistrar.checkManifest(this);
> 
> if (GCMRegistrar.isRegistered(this)) { Log.d("info", GCMRegistrar.getRegistrationId(this)); }
> 
> ```
> regId = GCMRegistrar.getRegistrationId(this);
> 
> Log.v("log", " register id oslo : " + regId);
> 
> if (regId.equals("")) {
>     // replace this with the project ID
>     GCMRegistrar.register(this, "718437041388");
>     Log.d("info", GCMRegistrar.getRegistrationId(this));
> } else {
>     Log.d("info", "already registered as" + regId);
> } 
> ```

Please help me with this, tell me if I got anything wrong.

Thank you in advance, Nirav.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T09:05:35.697

你不应该得到registrationId，`GCMRegistrar.register(this, "718437041388");`
实际上，你有一个正确`GCMIntentService.java`的接收regId吗？如果是，您可以从内部
获取 regId`onRegistered``GCMIntentService.java`

```
 @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
        Log.d("GCMIntentService", "in GCMIntentService");
        displayMessage(context, getString(R.string.gcm_registered));
        ServerUtilities.register(context, registrationId);
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T08:18:07.687

请注意

```
 GCMRegistrar.register(this, "..."); 
```

是异步的。因此，在那之后立即调用`GCMRegistrar.getRegistrationId(this)`是不可靠的，所以你应该避免它。

`GCMIntentService`作为注册过程的一部分，该 ID 将通过广播回调到达您的 . 从那里您可以将 gcm 密钥存储在您喜欢的任何地方，并在应用程序的其他部分（通常在服务器上）使用它。

请注意，`GCMIntentService`应该在应用程序的根包中定义它才能正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T12:41:51.047

尝试将模拟器与 Google API 一起使用，并与 Google 帐户同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-20T05:44:33.657

经过1天的努力，我遇到了同样的问题，我找到了解决方案。首先，我将我的 GCM 相关代码放入我的主包中，并根据 androidManifest.xml 中的我的包进行更改

我给你一个简单的例子。我的项目名称是 GCMExample，我有三个包 1\. com.examle.GCMExample(Main Package) , 2\. com.examle.GCMExample.activity(Second Package) , 3\. com.example.GCMExample.adapter(Third Package)

**当我的 GCM 相关类文件进入我的第二个包时，我没有获得注册 ID**

我的 GCM 相关类，如 1\. GCMIntentService 、 2\. ServerUtilities 、 3\. CommonUtilities 4\. WakeLocker 放入我的主包 com.example.GCMExample

还有我的 androidManifest.xml

```
 <uses-permission android:name="android.permission.INTERNET" />
         <uses-permission android:name="android.permission.GET_ACCOUNTS" />
         <uses-permission android:name="android.permission.WAKE_LOCK" />
         <uses-permission android:name="android.permission.VIBRATE" />

         <permission android:name="com.example.GCMExample.permission.C2D_MESSAGE"
            android:protectionLevel="signature" />

         <uses-permission android:name="com.example.GCMExample.C2D_MESSAGE" />

       <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
   <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
            <!-- Receives the actual messages. -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <!-- Receives the registration id. -->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.example.GCMExample" />
          </intent-filter>
  </receiver>  

 <service android:name="com.example.GCMExample.GCMIntentService" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-12T11:48:24.273

在项目的 lib 文件夹中添加 GCM jar 文件

# sql - Regarding combining queries into one

> ID：11448146
> 
> 赞同：1
> 
> 时间：2012-07-12T08:49:00.833
> 
> 标签：sql

I have query that is and I have executed the query..

first is the TXN_HEADER table .

```
select * from TXN_HEADER where txhd_receipt_id = 'receipt_id_val' and till_short_desc = 'till_no_val' 
```

from the above TXN_HEADER table we get the transaction_no value ( e.g. txhd_txn_nr) which is used to find the transactional details in TXN_DETAIL table.

```
select * from TXN_DETAIL where txhd_txn_nr = 'transaction_no_val' and till_short_desc = 'till_no_val 
```

My query is that I am writing these queries seprately can you guys please advise by which I can combine them into single query by any means , I means through subquery , through joins . please advise.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:56:33.337

加入版：

```
select * 
  from TXN_HEADER 
 inner join TXN_DETAIL 
    on TXN_HEADER.txhd_txn_nr = TXN_DETAIL.txhd_txn_nr
 where TXN_HEADER.txhd_receipt_id = 'receipt_id_val' 
   and TXN_HEADER.till_short_desc = 'till_no_val'
   and TXN_DETAIL.till_short_desc = 'till_no_val' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:57:48.370

如果列 [txhd_txn_nr] 可以关联这两个表，您可以尝试使用此查询：

```
select * from TXN_DETAIL where txhd_txn_nr in (select transaction_no_val from TXN_HEADER where txhd_receipt_id = 'receipt_id_val' and till_short_desc = 'till_no_val') and till_short_desc = 'till_no_val 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:58:14.160

你应该有一个身份证才能加入

```
select * from TXN_HEADER H
join TXN_DETAIL D
on H.<id>=D.<id>
where  H.txhd_receipt_id = 'receipt_id_val' and H.till_short_desc = 'till_no_val'
and D.txhd_txn_nr = 'transaction_no_val' and D.till_short_desc = 'till_no_val' 
```

# javascript - 在 Coffeescript 中使用自调用函数来隐藏其余代码中的函数和变量是个好主意吗？

> ID：11448150
> 
> 赞同：1
> 
> 时间：2012-07-12T08:49:07.527
> 
> 标签：javascript, coffeescript

使用自调用函数来隐藏这样的函数和变量是个好主意吗？

有没有更好的办法？

它比在同一级别上声明函数和变量要慢吗？

```
validator = require 'json-schema'

actionA = do ->
  schema =
    type : 'object'
    properties:
      param1 : { type : 'string', required : true }
      param2 : { type : 'string', required : true }

  encode = (results) -> JSON.parse(results)

  (params, callback) ->
    res = validator.validate params, schema
    value = if res.valid then encode(params) else false
    callback value

actionB = do ->
  schema =
    type : 'object'
    properties:
      param1 : { type : 'integer', required : true }
      param2 : { type : 'integer', optional : true }

  encode = (results) -> JSON.stringify(results)

  (params, callback) ->
    res = validator.validate params, schema
    value = if res.valid then encode(params) else false
    callback value 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T02:12:00.103

是的，我相信这很好。事实上，当你在 CoffeeScript 中创建“类”时

```
class Test
  constructor: ->
    @foo = 'bar' 
```

它编译为：

```
var Test;

Test = (function() {

  function Test() {
    this.foo = 'bar';
  }

  return Test;

})(); 
```

这主要与您发布的代码做同样的事情。

# android - phonegap fail - cordova.js error 3725

> ID：11448153
> 
> 赞同：1
> 
> 时间：2012-07-12T08:49:25.163
> 
> 标签：android, jquery, mobile, jquery-mobile, cordova

I got error "**07-12 11:39:54.578: I/Web Console(21702): JSCallback Error: Request failed. at file:///android_asset/www/js/cordova-1.8.1.js:3725**"

i have 2 pages, the first page is loading normally without an error, but when I go to the next page logcat shows this error. I searched for an answer at Google, and some people said that it is a problem with android manifest, but all permissions is added.

here is code of my pages, first page:

```
<!DOCTYPE HTML>
<html>
<head>
<title>List Mode</title>
<link rel="stylesheet" href="css/jquery.mobile-1.1.0.min.css" />
<link rel="stylesheet" href="css/style.css" />
<script type="text/javascript" src="js/cordova-1.8.1.js"></script>
<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
<script type="text/javascript" src="js/jquery.mobile-1.1.0.min.js"></script>

<script>

var i = 0;

$('#listpage').live("swiperight", function () {

    window.location.href = 'file:///android_asset/www/order.htm';
});

$('#pause').live('click', function(event){
    i++;    

    if ($('#pause .ui-btn-text').text() == "Start")
    {
    $('#pause .ui-btn-text').text("Pause");
    }

    else
    {
        $('#pause .ui-btn-text').text("Start");
    }

});

</script>
</head>
<body >
<div data-role="page" data-theme="c" id="listpage">
    <input type ="radio" name="test" class="cityArea"  id="kesklinn" /><label for="kesklinn">Kesklinn: </label>
    <input type ="radio" name="test" class="cityArea" id="lasnamae" /><label for="lasnamae">Lasnam&auml;e: </label>
    <input type ="radio" name="test" class="cityArea" id="mustamae" /><label for="mustamae">Mustam&auml;e: </label>
    <input type ="radio" name="test" class="cityArea" id="pohja-tallinn" /><label for="pohja-tallinn">P&otilde;hja-Tallinn: </label>
    <input type ="radio" name="test" class="cityArea" id="haabersti" /><label for="haabersti">Haabersti: </label>
    <input type ="radio" name="test" class="cityArea"  id="nomme" /><label for="nomme">N&otilde;mme: </label>
    <input type ="radio" name="test" class="cityArea"  id="pirita" /><label for="pirita">Pirita: </label>
    <div data-role="button" class="text" id="pause"> Start </div>
</div>
</body>
</html> 
```

and the second:

```
<!DOCTYPE HTML>
<html>
<head>
<title>New order</title>
<link rel="stylesheet" href="css/jquery.mobile-1.1.0.min.css" />
<link rel="stylesheet" href="css/style.css" />
<script type="text/javascript" src="js/cordova-1.8.1.js"></script>
<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="js/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" src="js/orderpage.js"></script>
</head>
<body>
<div data-role="page" data-theme="c" id="orderpage">
<div id="address" class="text"> HERE COMES ADDRESS AND COMMENTS</div>

<div id="line"></div>
<table id="button_table">
    <tr>
        <td>
            <div data-role="button" class="accept_button" data-a="1 Minute" id="1min">1</div>
        </td>
        <td>
            <div data-role="button" class="accept_button" data-a="5 Minutes" id="5min">5</div>
        </td>
        <td>
            <div data-role="button" class="accept_button" data-a="7 Minutes" id="7min">7</div>
        </td>
        <td>
            <div data-role="button" class="accept_button" data-a="10 Minutes" id="10min">10</div>
        </td>
</tr>
</table>
<div id="line"></div>

<div data-role="button" data-a="decline" class="decline_button" id="decline"> No,Thanks </div>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:56:13.827

`window.location.href = 'file:///android_asset/www/order.htm';`在您的第一页的这一行中，`file:///android_asset/www/order.htm write order.html`仅替换并查看 o/p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T14:48:22.310

不需要完整路径，只需要写

```
window.location.href = 'order.htm' 
```

# c# - From gridview to excel export - How can I get excel what I see in the application?

> ID：11448157
> 
> 赞同：0
> 
> 时间：2012-07-12T08:49:49.897
> 
> 标签：c#, gridview

There is a gridview which includes some data.

The header style of that gridview is

```
<HeaderStyle BackColor="#006699" CssClass="GridViewHeader" Font-Bold="True" ForeColor="White" /> 
```

How can I export that gridview to excel? I want to export what I see, colour, filter etc.

when I follow this link [gridview to excel](https://stackoverflow.com/questions/1665958/gridview-to-excel)

I get error because it says there there should be form tag which includes runat="server" but when I add it, it gives again error because masterpage has already have a form..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:02:32.383

将此代码复制并粘贴到您的页面中：

```
public override void VerifyRenderingInServerForm(Control control)
{
    /* Confirms that an HtmlForm control is rendered for the specified ASP.NET
       server control at run time. */
} 
```

这将解决您的问题。

# blackberry - 读取没有空格的传入短信

> ID：11448164
> 
> 赞同：0
> 
> 时间：2012-07-12T08:50:16.657
> 
> 标签：blackberry, sms

以下代码读取传入的短信，然后打印消息的正文。如何让应用程序打印出中间没有任何空格的消息？

例如：收到的短信显示“我在这里”，所以“我在这里”被打印出来，但我希望应用程序打印出“HereIam”。

我怎样才能做到这一点？非常感激任何的帮助。

这是我的代码：

```
public void run() {
 try {
 DatagramConnection _dc = (DatagramConnection)Connector.open("sms://"); 
   for(;;) { 
    Datagram d = _dc.newDatagram(_dc.getMaximumLength()); 
    _dc.receive(d); 
    byte[] bytes = d.getData();
    String address = d.getAddress(); 
    String msg = new String(bytes); 
    System.out.println(address);
    System.out.println(msg);
   } 

 }catch (Exception me) { 

 }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:01:53.047

试试这个

将此行添加到代码中

```
System.out.println(replaceAll(msg," ","")); 
```

也添加这个方法

```
 public static String replaceAll(String source, String pattern,
        String replacement) {
    if (source == null)
        return "";

    StringBuffer sb = new StringBuffer();
    int idx = -1;
    int patIdx = 0;

    while ((idx = source.indexOf(pattern, patIdx)) != -1) {
        sb.append(source.substring(patIdx, idx));
        sb.append(replacement);
        patIdx = idx + pattern.length();
    }

    sb.append(source.substring(patIdx));
    return sb.toString();
} 
```

它用空字符串替换所有空格，这就是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:57:57.220

使用[String.replace()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)方法：

```
msg = msg.replace("\s+", ""); 
```

# c# - writing to rfid

> ID：11448174
> 
> 赞同：1
> 
> 时间：2012-07-12T08:50:41.863
> 
> 标签：c#

```
 public void writeToCard2(string sourceText, string cardType)
    {
        Cursor.Current = Cursors.WaitCursor;

        int itemLength = sourceText.Split(',').Length;
        sourceText = itemLength.ToString() + "," + sourceText + ",";
        byte[] dataByteArray = Encoding.GetEncoding(932).GetBytes(sourceText);
        //textBox2.Text = BitConverter.ToString(dataByteArray);

        int dataByteLength = dataByteArray.Length;
        int writeLength = dataByteLength + 11;
        byte[] writeByteArray = new byte[writeLength];

        writeByteArray[0] = 0x02;//STX
        writeByteArray[1] = 0x00;//アドレス
        writeByteArray[2] = 0x78;//コマンド
        writeByteArray[3] = Convert.ToByte(dataByteLength + 4);//データ長
        writeByteArray[4] = 0xa1;//詳細コマンド
        writeByteArray[5] = 0x00;//書き込み開始ブロック番号
        writeByteArray[6] = Convert.ToByte(dataByteLength);//書き込みバイト数
        for (int i = 0; i < dataByteLength; i++)
        {
            writeByteArray[i + 7] = dataByteArray[i];//書き込みデータ
        }
        writeByteArray[dataByteLength + 7] = 0x40;//オプションフラグ
        writeByteArray[dataByteLength + 8] = 0x03;//ETX
        byte sum = 0x00;
        for (int i = 0; i <= dataByteLength + 8; i++)
        {
            sum += writeByteArray[i];
        }
        writeByteArray[dataByteLength + 9] = sum;//SUM値
        writeByteArray[dataByteLength + 10] = 0x0d;//CR

        //string tempStr = BitConverter.ToString(writeByteArray);

        //port.Write(writeByteArray, 0, writeByteArray.Length);
        serialPort1.Write(writeByteArray, 0, writeByteArray.Length);

        writeCardType = cardType;

        Cursor.Current = Cursors.Default;
    } 
```

the above method writes data on an rfid tag in the line

```
serialPort1.Write(writeByteArray, 0, writeByteArray.Length); 
```

writeByteArray is the size of the data which is exceeding the limit of the *RFID* tag, my boss said convert it to `ascii` code and then write to *RFID*.

Will this help can this conversion reduce size of data?

Is there any other way round withoud using a different *RFID* tag?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:54:11.717

您的老板说要转换为*ASCII导致设备**每字节*读取信息。我使用这些设备，这是他们读取传递给他们的数据流的常用方式。

这并没有任何*分配*好处，因为数据的大小保持不变，变化的是信息表示。那是。

# c# - Xml 序列化异常：类型 UserQuery+SpecificContentItem 不是预期的。使用 XmlInclude 或 SoapInclude

> ID：11448177
> 
> 赞同：1
> 
> 时间：2012-07-12T08:50:52.247
> 
> 标签：c#, .net, xml-serialization

我在将类序列化为 XML 时遇到问题。我创建了一个运行显示错误的示例代码。我要序列化的类名为“ContentContainer”，ContentContainer 有一个其类型为“ContentItemBase”的项目集合。因为我的要求我实现了这些类如下。但是当代码到达实际序列化调用的部分时，序列化程序会抛出此异常：

> 类型 UserQuery+SpecificContentItem 不是预期的。使用 XmlInclude 或 SoapInclude 属性指定静态未知的类型。

我已经搜索过这个问题，但我的要求是我无法实现异常消息中提到的 XmlInclude 方法。对于这个问题和类似问题，是否有任何解决方案（设计或实施技巧）？

代码 ：

```
void Main()
{
    var item  = new SpecificContentItem{ Name = "Test", Value = "TestValue" , SpecificField="TestField"};
    var container = new ContentContainer();
    container.Items.Add(item);
    container.Name = "Test Container";
    XmlSerializer ser=  new XmlSerializer(typeof(ContentContainer));
    StringWriter writer = new StringWriter();
    ser.Serialize(writer, container);
    string result = writer.ToString();
}
public abstract class ContentItemBase
{
    public abstract string Name {get; set;}
    public abstract string Value {get; set;}
}

public class SpecificContentItem: ContentItemBase
{
    public string SpecificField {get; set;}
    public override string Name {get; set;}
    public override string Value {get; set;}
}
public class ContentContainer
{
    public ContentContainer()
    {
        Items = new ContentItemCollection();
    }
    public string Name {get;set;}
    public ContentItemCollection Items{get; set;}
}

public class ContentItemCollection : IEnumerable<ContentItemBase>
{
        public SpecificContentItem SpecificItem { get; set; }
        public IEnumerator<ContentItemBase> GetEnumerator()
        {
            if (SpecificItem != null)
                yield return SpecificItem;
        }
        System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        }
        public void Add(Object obj)
        {
            if (obj is SpecificContentItem)
                SpecificItem = (SpecificContentItem)obj;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:59:43.247

将您的序列化程序创建为：

```
XmlSerializer ser = new XmlSerializer(typeof(ContentContainer), 
                            new Type[] { typeof(SpecificContentItem) }); 
```

应该做的伎俩。

您还可以向类添加`Serialize`方法`ContentContainer`

```
public string Serialize()
{
    var types = Items.Select(x => x.GetType()).Distinct().ToArray();
    XmlSerializer ser = new XmlSerializer(typeof(ContentContainer),types);
    StringWriter writer = new StringWriter();
    ser.Serialize(writer, this);
    return writer.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:43:32.650

由于允许使用的`XmlInclude`似乎模棱两可，我仍然会建议

```
[XmlInclude(typeof(SpecificContentItem))]
public class ContentItemCollection : IEnumerable<ContentItemBase>
{ 
```

作为一种可能的解决方案。很难说这如何适用于您的现实世界情况，但我希望它适用并且有效！

# windows - 使用 wmic 在 localhost 上创建一个进程作为不同的用户

> ID：11448178
> 
> 赞同：3
> 
> 时间：2012-07-12T08:50:53.907
> 
> 标签：windows, cmd, wmi, wmic

有没有办法以不同的用户身份在 localhost 上使用 wmic 创建一个进程。使用类似这样的东西：

```
wmic  /node:localhost /user:user  process call create "cmd" 
```

我知道我可以使用 runas，但我很好奇这是否可行。

一些全局开关可能会有所帮助吗？(/ROLE,/IMPLEVEL,/AUTHLEVEL,/AGGREGATE,/AUTHORITY ) 或者改变一些配置？目前我收到此错误：

```
ERROR:
Description = User credentials cannot be used for local connections 
```

**编辑：**这是我为此类情况找到[的最佳解决方案](http://ss64.org/viewtopic.php?id=1539)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T16:27:04.943

WMI 引擎不允许您使用凭据在本地连接，因此 WMIC 也不会。RunAs 是您最好的选择。

# android - DownloadManager double download

> ID：11448180
> 
> 赞同：6
> 
> 时间：2012-07-12T08:50:58.080
> 
> 标签：android, download-manager

I have the following problem: Whenever I download a file with the DownloadManager it is downloaded twice (saved in the fashion "filename.extension" and "filename-1.extension"). Here is my code:

```
public void download() {
        Request request = new Request(Uri.parse(_wrapper.getURL()));
        request.setTitle(getFileName(_wrapper.getURL()));
        request.setVisibleInDownloadsUi(false);
        request.setDestinationInExternalFilesDir(_context, null, "/" + getFileName(_wrapper.getURL()));

        _downloadID = _downloadManager.enqueue(request);
    }

    public BroadcastReceiver getDownloadFinishedBroadcastReceiver() {
        BroadcastReceiver receiver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context pContext, Intent pIntent) {
                String action = pIntent.getAction();
                if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
                    Query query = new Query();
                    query.setFilterById(_downloadID);
                    Cursor cursor = _downloadManager.query(query);
                    if (cursor.moveToFirst()) {
                        File file = new File(ScruloidConstants.APPLICATION_DIRECTORY);
                        int status = cursor.getInt(cursor.getColumnIndex(DownloadManager.COLUMN_STATUS));
                        if (status == DownloadManager.STATUS_SUCCESSFUL) {
                            String path = cursor.getString(cursor.getColumnIndex(DownloadManager.COLUMN_LOCAL_FILENAME));
                            _wrapper.setFilePath(path);
                            _wrapper.setLastDownloaded(new Date());
                            if (_listener != null) {
                                _listener.onDownloadProjectTaskFinished(new TaskResult<ProjectWrapper>(_wrapper));
                            }
                        }
                        else if (status == DownloadManager.STATUS_FAILED) {
                            int reason = cursor.getInt(cursor.getColumnIndex(DownloadManager.COLUMN_REASON));
                            DownloadFailedException ex = new DownloadFailedException(reason);
                            if (_listener != null) {
                                _listener.onDownloadProjectTaskFinished(new TaskResult<ProjectWrapper>(ex));
                            }
                        }
                    }
                }
            }
        };
        return receiver;
    } 
```

The `ProjectWrapper _wrapper` is just a simple Class that holds data, no logic is done there. The `_listener` just displays on the callback method a little Toast message. I debugged my app to make shure the `download()` Method is invoked only once. I hope you can help me find the error.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:29:44.430

不幸的是，DownloadManager 有问题，不能在所有设备上正常工作。您的问题在这里报告：[https ://code.google.com/p/android/issues/detail?id=18462](https://code.google.com/p/android/issues/detail?id=18462)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-29T17:09:39.810

我在使用 API 21 的移动设备上遇到了同样的错误，我在创建请求之前做了一个变通方法来验证，如果用于设置请求目标的文件名与已下载的最后一个文件相同，或者它的下载的任何预览的子字符串

```
if (!mLastMediaDownloadedId.any { it.contains(outputFile.name) }) {
                mLastMediaDownloadedId.add(outputFile.name)
                val url =
                    AppConstants.AWS_MEDIA_BUCKET_PATH + scoutObjectType.endPoint() + "$scoutObjectId.png"

                val request = DownloadManager.Request(Uri.parse(url))
                    .setDestinationUri(Uri.fromFile(outputFile))
                    .setTitle("Downlading media")
                    .setDescription("Downloading image medias")
                    .setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE)
                    .setAllowedOverRoaming(true)
                    .setAllowedOverMetered(true)

                val downloadId = it.enqueue(request)
                downloadIds.add(downloadId)
                downloadId
} 
```

其中“outputFile”是要下载的文件名本身，在您的情况下应该是“filename.extension”

PS：对不起 Kotlin 代码，但它应该是解决方法本身的一个很好的代表

# maven - maven-jar-plugin，包括上层目录

> ID：11448184
> 
> 赞同：0
> 
> 时间：2012-07-12T08:51:29.270
> 
> 标签：maven, maven-2, maven-plugin, maven-jar-plugin

构建 POM 的一部分

```
<plugin>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.2</version>
            <configuration>
               <classesDirectory>./</classesDirectory>
               <includes>
                  <include>*.wsdl</include>
                  <include>*.xsd</include>
                  <include>sources/</include>
                  <include>../configuration.doc</include>
               </includes>
            </configuration>
         </plugin> 
```

在目标 jar 中，我拥有来自根目录的所有 wsdl、来自根目录的 xsds 和源目录。
但 jar 中没有 configuration.doc 文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:55:13.753

您应该将 configuration.doc 移动到适当的目录中，例如 src/main/resources。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:02:33.330

如何使用- 特别是配置 - 将相关文件夹从您希望获取的位置添加`.doc`到项目 pom -[这里](http://maven.apache.org/plugins/maven-resources-plugin/examples/resource-directory.html)有示例。这将使内容可用于插件。`maven resources plugin``<resources>``jar`

# ruby-on-rails - Rails 和 Facebook - 我可以这样做吗？

> ID：11448191
> 
> 赞同：1
> 
> 时间：2012-07-12T08:51:56.740
> 
> 标签：ruby-on-rails, facebook

我正在考虑在我的网络应用程序中实现 Facebook 集成。我希望能够导入朋友的姓名、年龄和兴趣/喜好。

A. 首先，这可能吗？我可以访问这些信息吗？

这种导入或多或少将是一次性导入。

我还希望能够使用 Facebook 登录并将其与我的“正常”登录（身份验证）功能并行使用。我认为这应该很简单，因为大多数网站都有这种方式（例如 Fiverr.com）。

B. 这两件事是我整合 Facebook 的基本需求，你会推荐我使用哪个 gem？

C. 我已经 1 1/2 年进入 RoR 并且认为自己在 Rails 编程方面表现不错，但几乎不知道任何 JavaScript 和很少的 jQuery。你认为这种整合对我来说会很困难吗？

对有用的博客文章等的推荐也将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:00:00.007

A. 检查 facebook 文档的权限。我想说您可以获得用户朋友列表（id 和名称），但仅此而已：朋友必须允许您的应用程序才能检索他们的数据。几周前我偶然发现了这个问题，但我们正在检索相册和图片。你想要的数据不那么敏感，所以也许你无论如何都可以做到。底线：检查。

B. 我建议使用[设计](https://github.com/plataformatec/devise/)来管理与身份验证相关的所有内容。它是一种众所周知的宝石，被越来越多的人使用。您可以通过omniauth 添加对facebook 的支持；有一个关于如何实现这一目标的 wiki 页面。

C. 一旦你掌握了 OAuth 概念，你就会做得很好。您可以在没有 javascript/jQuery 的情况下使用 facebook connect。但是，某些功能，例如“喜欢按钮”，将需要使用 js SDK。除了这些之外，您几乎可以在服务器端执行所有操作。对于更高级的查询，[koala](https://github.com/arsduo/koala/) gem 可以做到这一点。

希望这对你来说已经足够了。

# php - Load Zend Framework and its application in a PHP script

> ID：11448195
> 
> 赞同：3
> 
> 时间：2012-07-12T08:52:13.403
> 
> 标签：php, zend-framework

I need to lo the **Zend Framework** and its **MVC application** in a **PHP script** so I could do some models to query the database. The framework and some libs are loaded this way (the script was created by someone else):

```
 /** Initialise Zend  */
define( 'BRIDGE_BASE_DIR', dirname( __FILE__ ) );
set_include_path( get_include_path().PATH_SEPARATOR.BRIDGE_BASE_DIR.'/../library' );

require_once('Zend/Loader/Autoloader.php');
require_once 'Zend/Config/Ini.php';

$autoloader = Zend_Loader_Autoloader::getInstance();
$autoloader->registerNamespace('XYz');
$autoloader->registerNamespace('Yxz'); 
```

I would like to call a model this way: `Franchisee_Model_Franchisee::find($franchiseeId)`

which is located under: `application/modules/franchisee/models/franchisee`

I tried many ways but I cannot load the full stack. Is there a simple way to load ZF in a script, including everything under application and application/modules?

UPDATE

I tried this too:

```
<?php
error_reporting( E_ALL & ~E_NOTICE );

/** Initialise Zend  */
define( 'BRIDGE_BASE_DIR', dirname( __FILE__ ) );
set_include_path( get_include_path().PATH_SEPARATOR.BRIDGE_BASE_DIR.'/../library' );

require_once('Zend/Loader/Autoloader.php');
require_once 'Zend/Config/Ini.php';

$autoloader = Zend_Loader_Autoloader::getInstance();
$autoloader->registerNamespace('Xyz');
$autoloader->registerNamespace('Yzx');

/** Handle arguments */
if ($argc < 2) {
  echo 'LOG: ' . Zend_Date::now()->toString('YYYY-MM-ddTHH:mm:ss') . ' Please set the environment.'.PHP_EOL;
    exit(1);
}

define("APPLICATION_ENV", $argv[1]);
// echo 'LOG: ' . Zend_Date::now()->toString('YYYY-MM-ddTHH:mm:ss');
// echo " Current environment is: ".APPLICATION_ENV.PHP_EOL;

/** Zend_Application */
define(APPLICATION_PATH, dirname( __FILE__ ).'/../application');
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);

$application->bootstrap();

echo "Running ZF version: " . Zend_Version::VERSION;

new Admin_Contract_Table(); 
```

but I get

```
Fatal error: Class 'Admin_Contract_Table' not found in /Users/myuser/dev/htdocs/Admin/current/vend_bridge/zend.php on line 42 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:04:48.493

您还需要引导（但不运行）应用程序。在你拥有之后，添加：

```
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);
$application->bootstrap(); 
```

你可能需要设置`APPLICATION_ENV`，`APPLICATION_PATH`如果你还没有设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:50:39.717

你还没有`Admin`在自动加载器中注册你的命名空间..

`$autoloader->registerNamespace('Admin');`

# c# - 如何在未安装 MS Office 的机器上使用 Microsoft.Office.Interop.Excel？

> ID：11448197
> 
> 赞同：76
> 
> 时间：2012-07-12T08:52:15.403
> 
> 标签：c#, excel, dll, interop

我正在编写一个适用于 excel 文件的应用程序。我需要一个功能来删除工作表。我必须使用一个程序集 Microsoft.Office.Interop.Excel.dll。

它在开发人员机器上运行良好，但是当我尝试在服务器上部署它时出现错误：

> 无法加载文件或程序集 'office, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' 或其依赖项之一

我了解当机器上未安装 MS Office 时会出现问题。客户不希望不以任何价格在服务器上安装和购买 MS Office。

我按照此处的建议在开发人员机器上安装“可再发行主互操作程序集”：[http](http://forums.asp.net/t/1530230.aspx/1) ://forums.asp.net/t/1530230.aspx/1 并再次编译我的项目。

代码示例：

```
public bool DeleteSheet(string tableName)
{
    Excel.Application app = null;
    Excel.Workbooks wbks = null;
    Excel._Workbook _wbk = null;
    Excel.Sheets shs = null;

    bool found = false;

    try
    {
        app = new Excel.Application();
        app.Visible = false;
        app.DisplayAlerts = false;
        app.AlertBeforeOverwriting = false;

        wbks = app.Workbooks;
        _wbk = wbks.Add(xlsfile);
        shs = _wbk.Sheets;
        int nSheets = shs.Count;

        for (int i = 1; i <= nSheets; i++)
        {
            Excel._Worksheet _iSheet = (Excel._Worksheet)shs.get_Item(i);
            if (_iSheet.Name == tableName)
            {
                _iSheet.Delete();
                found = true;

                Marshal.ReleaseComObject(_iSheet);
                break;
            }
            Marshal.ReleaseComObject(_iSheet);
        }

        if (!found)
            throw new Exception(string.Format("Table \"{0}\" was't found", tableName));

        _wbk.SaveAs(connect, _wbk.FileFormat, Missing.Value, Missing.Value, Missing.Value,
        Missing.Value, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlNoChange,
        Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
    }
    finally
    {
        _wbk.Close(null, null, null);
        wbks.Close();
        app.Quit();

        Marshal.ReleaseComObject(shs);
        Marshal.ReleaseComObject(_wbk);
        Marshal.ReleaseComObject(wbks);
        Marshal.ReleaseComObject(app);
    }
    return true;
} 
```

一个例外

> 由于以下错误，检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

在线上发生

```
app = new Excel.Application(); 
```

谁能建议如何使此功能成功运行？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-12T08:59:48.020

如果没有安装 ms office，您将无法使用 Microsoft.Office.Interop.Excel。

只需在 google 中搜索一些允许修改 xls 或 xlsx 的库：

*   [http://code.google.com/p/excellibrary/](http://code.google.com/p/excellibrary/)
*   [http://simpleooxml.codeplex.com/](http://simpleooxml.codeplex.com/)（仅 xlsx）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:04:09.210

如果“客户不想以任何价格在服务器上安装和购买 MS Office”，那么您就不能使用 Excel ......但我无法得到诀窍：这完全是关于一个基本的 Office 许可证，成本大约为 150美元...而且我想花时间寻找替代品的成本将远远超过这个数额！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T07:58:02.277

您可以在服务器上创建服务并生成 excel，然后允许客户端下载 excel。因为购买 1000 人的 excel 许可证，最好有一个服务器许可证。

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-30T13:01:28.373

寻找 GSpread.NET。您可以使用 Microsoft Excel 中的 API 来使用 Google 电子表格。您无需使用新的 Google API 用法重写旧代码。只需添加几行：

```
Set objExcel = CreateObject("GSpreadCOM.Application");

app.MailLogon(Name, ClientIdAndSecret, ScriptId); 
```

这是一个开源项目，不需要安装 Office。

此处提供的文档[http://scand.com/products/gspread/index.html](http://scand.com/products/gspread/index.html)

# javascript - 使用构造函数在 JavaScript 中类（从 C# 转换）

> ID：11448202
> 
> 赞同：1
> 
> 时间：2012-07-12T08:52:27.723
> 
> 标签：javascript

我有以下 C# 代码，是否可以轻松转换为 JavaScript？我需要它在浏览器中 100% 运行。

据我所知，枚举不存在，可以用字符串代替。

简而言之，我有一个 Deck 类女巫持有一组 Card，Card 类确实有一些属性，包括等级、符号等，还有一个 shuffle 函数。

我不希望任何人在这里转换我的所有代码，但请告诉我如何完成类似的事情。

```
public enum Suit
{
    Club,
    Diamond,
    Heart,
    Spade
};

public class Card
    {
    public Suit suit;
    public int value;
    public string text;
    public int HCP;

    public Card()
    {
    }

    public Card(Suit _suit, int _value, int _HCP, string _text)
    {
        suit = _suit;
        value = _value;
        HCP = _HCP;
        text = _text;
    }
};

public class Deck
{
    public Card[] Cards = new Card[52];
    public Deck()
    {
        Cards[0] = new Card(Suit.Spade, 14, 4, "A");
        Cards[1] = new Card(Suit.Spade, 13, 3, "K");
        Cards[2] = new Card(Suit.Spade, 12, 2, "Q");
        Cards[3] = new Card(Suit.Spade, 11, 1, "J");
        Cards[4] = new Card(Suit.Spade, 10, 0, "T");
        Cards[5] = new Card(Suit.Spade, 9, 0, "9");
        Cards[6] = new Card(Suit.Spade, 8, 0, "8");
        Cards[7] = new Card(Suit.Spade, 7, 0, "7");
        Cards[8] = new Card(Suit.Spade, 6, 0, "6");
        Cards[9] = new Card(Suit.Spade, 5, 0, "5");
        Cards[10] = new Card(Suit.Spade, 4, 0, "4");
        Cards[11] = new Card(Suit.Spade, 3, 0, "3");
        Cards[12] = new Card(Suit.Spade, 2, 0, "2");

        Cards[13] = new Card(Suit.Heart, 14, 4, "A");
        Cards[14] = new Card(Suit.Heart, 13, 3, "K");
        Cards[15] = new Card(Suit.Heart, 12, 2, "Q");
        Cards[16] = new Card(Suit.Heart, 11, 1, "J");
        Cards[17] = new Card(Suit.Heart, 10, 0, "T");
        Cards[18] = new Card(Suit.Heart, 9, 0, "9");
        Cards[19] = new Card(Suit.Heart, 8, 0, "8");
        Cards[20] = new Card(Suit.Heart, 7, 0, "7");
        Cards[21] = new Card(Suit.Heart, 6, 0, "6");
        Cards[22] = new Card(Suit.Heart, 5, 0, "5");
        Cards[23] = new Card(Suit.Heart, 4, 0, "4");
        Cards[24] = new Card(Suit.Heart, 3, 0, "3");
        Cards[25] = new Card(Suit.Heart, 2, 0, "2");

        Cards[26] = new Card(Suit.Diamond, 14, 4, "A");
        Cards[27] = new Card(Suit.Diamond, 13, 3, "K");
        Cards[28] = new Card(Suit.Diamond, 12, 2, "Q");
        Cards[29] = new Card(Suit.Diamond, 11, 1, "J");
        Cards[30] = new Card(Suit.Diamond, 10, 0, "T");
        Cards[31] = new Card(Suit.Diamond, 9, 0, "9");
        Cards[32] = new Card(Suit.Diamond, 8, 0, "8");
        Cards[33] = new Card(Suit.Diamond, 7, 0, "7");
        Cards[34] = new Card(Suit.Diamond, 6, 0, "6");
        Cards[35] = new Card(Suit.Diamond, 5, 0, "5");
        Cards[36] = new Card(Suit.Diamond, 4, 0, "4");
        Cards[37] = new Card(Suit.Diamond, 3, 0, "3");
        Cards[38] = new Card(Suit.Diamond, 2, 0, "2");

        Cards[39] = new Card(Suit.Club, 14, 4, "A");
        Cards[40] = new Card(Suit.Club, 13, 3, "K");
        Cards[41] = new Card(Suit.Club, 12, 2, "Q");
        Cards[42] = new Card(Suit.Club, 11, 1, "J");
        Cards[43] = new Card(Suit.Club, 10, 0, "T");
        Cards[44] = new Card(Suit.Club, 9, 0, "9");
        Cards[45] = new Card(Suit.Club, 8, 0, "8");
        Cards[46] = new Card(Suit.Club, 7, 0, "7");
        Cards[47] = new Card(Suit.Club, 6, 0, "6");
        Cards[48] = new Card(Suit.Club, 5, 0, "5");
        Cards[49] = new Card(Suit.Club, 4, 0, "4");
        Cards[50] = new Card(Suit.Club, 3, 0, "3");
        Cards[51] = new Card(Suit.Club, 2, 0, "2");
    }
    public void Shuffle(Random r)
    {
        for (int n = Cards.Length - 1; n > 0; --n)
        {
            int k = r.Next(n + 1);
            Card temp = Cards[n];
            Cards[n] = Cards[k];
            Cards[k] = temp;
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:14:38.040

枚举可以转换为*哈希*：

```
var Suit = {
  Club: 0,
  Diamond: 1,
  Heart: 2,
  Spade: 4
}; 
```

这个`Card` *类*很简单：

```
function Card(suit, value, hcp, text) {
  this.suit = suit;
  this.value = value;
  this.hcp = hcp;
  this.text = text;
} 
```

还有`Deck`：

```
function Deck() {
  this.cards = [
    new Card(Suit.Heart, 14, 4 "A"),
    new Card(Suit.Heart, 13, 3 "K"),
    // ...
  ];
} 
```

然后添加`shuffle`到`Deck`：

```
Deck.prototype.shuffle = function() {
  this.cards.sort(function() { return 0.5 - Math.random() });
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:11:05.603

在 JavaScript 中没有任何类的概念。您创建一个对象，直接向该对象添加属性和方法。

看看[这里](http://net.tutsplus.com/tutorials/javascript-ajax/the-basics-of-object-oriented-javascript/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:11:38.017

```
var Suit = {
    Club: 1,
    Diamond: 2,
    Heart: 3,
    Spade: 4
};
var Card = function (_suit, _value, _HCP, _text) {
    this.suit = _suit;
    this.value = _value;
    this.HCP = _HCP;
    this.text = _text;
};

var myCard = new Card(Suit.Club, 1, 0, "kkkj"); 
```

我建议阅读[http://javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)开始

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:36:24.503

我将尝试用纯 JS 为您提供更通用的映射。（如果你想在 JS 中认真模拟类传统的类，你应该使用库）

```
1\. Enum
C++:                JS:
enum E{ A,B };      var E = { A:0, B:1 };

2\. Class
C++:                JS:
class C{            function C(a,b){
  int a,b;             this.a = a;// When a function is called with new,
  C(int a,int b){      this.b = b;// it will be considered a constructor
    this->a = a;    }             // and the this in it will be a new object.
    this->b = b;                  // Objects are open: any object.name = something
  }                               // is valid and can be read afterwards
  int sum(){        C.prototype.sum = function(){      
    return a + b;     return this.a + this.b; // There are no real classes
  }                 }                         // in JS, only objects
                                              // that were constructed 
}                                             // the same way.
                                              // That is why things shared
                                              // by all instances are put in a
                                              // special place; the prototype
                                              // (methods are shared by all instances
                                              // if you think about it; it is always
                                              // the same function, just different
                                              // implicit this parameter)
3\. Use
C++:                               JS:
unique_ptr<C*> c = new C(1,2);     var c = new C(1,2);
c->sum();                          c.sum();

4\. Array
C++                   JS:
char arr[32];         var arr = []; // Create empty array
arr[0]=2;             arr[3]  = 4;  // You can safely assign anywhere, the array will
                                    // grow and be filled with undefined if necessary 
```

# clojurescript - 动态 js-obj 查找

> ID：11448204
> 
> 赞同：0
> 
> 时间：2012-07-12T08:52:30.390
> 
> 标签：clojurescript

鉴于以下情况：

```
(def object (js-obj "a" 1 "b" 2))
(def key "a") 
```

如何仅使用and vars获得`1`价值？这不仅仅是硬编码。`object``key``(.-a object)`

等效的 JavaScript 语法是`object[key]`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:53:22.040

可以使用`aget`and `aset`(array get and array set) 函数：`(aget object key)`

# python - Python 3、PyQt 4：为 GUI 控件拆分大类

> ID：11448205
> 
> 赞同：0
> 
> 时间：2012-07-12T08:52:34.620
> 
> 标签：python, oop, qt4, python-3.x, pyqt4

我`MainWindow(QMainWindow)`的 PyQt4 GUI 类现在已经增长，我想以某种方式拆分它。问题是所有处理信号的众多功能都非常相互关联并影响类的其他功能。有没有办法把它分成几个类/文件？也许将所有信号分为一类？我真的不明白如何在技术上做到这一点......我还听说Qt（或PyQt）对多重继承有一些限制，这可以解决我猜的问题（再次，对我来说不太明显）。

就像它现在看起来的一个想法（当然非常非常简化）：

```
calss MainWindow(QMainWindow):
   ...
   def f1(self):
      if self.a1 == '...':
       ...
   def f2(self):
      if self.a2 == '...':
       ...
   def update(self):
      self.f3()
      self.f4()
      self.lineEdit.setText(self.a3)
      ...
   ...
   def on_radioButton_toggled(self):
      if self.radioButton.isChecked():
         self.a1 = '...'
   def on_comboBox_currentIndexChanged(self):
      if self.checkBox.isChecked():
         self.a2 = '...'
         self.f1()
      else:
         self.f2()
      self.update()
   ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:23:38.277

在我的应用程序中，我这样做了，主窗口包含子窗口小部件（框架和东西......），主窗口基本上做两件事：初始化它的孩子并连接它们之间的信号。像这样，你有一个视图层次结构，处理一件大事要简单得多。

我认为从你的程序到一个更分层的程序并不是没有痛苦的，我可以说：你应该早点想到这一点，但我没有。=P 要设计主窗口及其子窗口，QTdesigner 非常方便。

是的，AFAIK 一个类不应该继承多个 PyQt 类。

# shell - vim 和 unix 管道

> ID：11448206
> 
> 赞同：0
> 
> 时间：2012-07-12T08:52:35.210
> 
> 标签：shell, unix, vim

今天我错误地运行了一个有趣的命令，看起来像 **vi filename | 六 -** . 即使 Ctrl-C 没用，它也让我的终端卡住了。我只需要关闭终端。我试了几次，也在我朋友的机器上试了试。只是想知道为什么 Ctrl-C 也无法提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:57:40.403

**vi**正在从标准输入读取。

在**vi中编辑时，** **Ctrl+c**也不起作用。

要退出**vi** ，请使用**:q**或**:q!** 将像在正常的**vi**会话中一样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:10:51.893

使用 POSIX 函数 signal() 一个 C 程序可以选择如果有键盘中断要做什么。

[这是一个例子（从这个网站](http://publications.gbdirect.co.uk/c_book/chapter9/signal_handling.html)复制）：

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>

FILE *temp_file;
void leave(int sig);

main() {
    (void) signal(SIGINT, leave);
    temp_file = fopen("tmp", "w");

    for(;;) {
        /*
        * Do things....
        */
        printf("Ready...\n");
        (void)getchar();
    }

    /* cant get here ... */
    exit(EXIT_SUCCESS);
}

/*
 * on receipt of SIGINT, close tmp file
 */
void leave(int sig) {
    fprintf(temp_file,"\nInterrupted..\n");
    fclose(temp_file);
    exit(sig);
} 
```

但是正如你所看到的，vi 并没有使用键盘中断来退出。无论您是否在管道中使用它都没有关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:46:10.817

Vi 拦截`ctrl-c`（它几乎等同于`esc`），因此`ctrl-c`在该设置中退出应用程序将不起作用。

`ctrl-z`我可以通过使用然后使用来逃离那个陷阱`kill %`

# ios - NSURLConnection 的委托方法，要求 authenticationChallenge 没有被解雇？

> ID：11448209
> 
> 赞同：2
> 
> 时间：2012-07-12T08:52:45.790
> 
> 标签：ios, certificate, nsurlconnection, ssl-certificate, nsurlconnectiondelegate

我使用 NSURLConnection 调用 Web 服务，并且我的钥匙串中存在一个客户端证书，我将其设置为`- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge`

在我删除此证书并向钥匙串添加新证书后，NSURLConnection 仍然保留我已经提供的凭据，并在我删除旧证书之前返回 417 状态错误代码，即 200。

有没有办法让 NSURLConnection 强制要求凭据。？或者如何关闭现有的 SSL 连接或身份验证质询的凭据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:10:32.623

`NSURLConnection`是善变的野兽，过去几天我一直遇到类似的问题。但是我找到了解决我的问题的方法，并提出了一些建议，说明可能是您遇到的问题的原因。

**TLS**

首先，发生在您身上的可能是缓存凭证的 TLS 层。这是因为建立 TLS 连接 [ [1](http://developer.apple.com/library/ios/#qa/qa1727/_index.html) ] 的计算成本很高。

可能的解决方案是更改您正在使用的 DNS 名称，例如通过在字符串末尾添加一个点 (.)，因为 DNS 协议接受以点结尾的字符串作为完全限定的 DNS 名称。我还看到人们向所有 URL 请求添加井号 (#)，从而欺骗系统从不查找存储的凭据，而只是发起 `didRecieveAuthenticationChallenge`调用 [ [2](http://www.springenwerk.com/2008/11/i-am-currently-building-iphone.html) ]。

**饼干**

另一种可能性是服务器正在设置您需要清除的 cookie。您可以通过执行以下操作来做到这一点：

```
-(void)clearCookies:(NSString *)urlString{
    NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedCookieStorage];
    NSURL *url = [[NSURL alloc] initWithString urlString];
    NSArray *cookies = [cookieStorage cookiesForURL:tempURL];

    for(NSHTTPCookie *cookie in cookies){
        //iterate over all cookies and delete them
        [cookieStorage deleteCookie:cookie];
    }

} 
```

**NSURLCredentialStorage**

现在可能是凭据仍存储在 中`sharedCredentialStorage`，因此应通过执行以下操作将其删除：

```
NSURLCredentialStorage *store = [NSURLCredentialStorage sharedCredentialStorage];
if(store !=nil){
   for(NSURLProtectionSpace *protectionSpace in [store allCredentials]){
      NSDictionary *map = [[NSURLCredentialStorage sharedCredentialStorage] 
                                  credentialsForProtectionSpace:protectionSpace];
      if(map!=nil){
         for(NSString *user in map){
             NSURLCredential *cred = [map objectForKey:user];
             [store removeCredential:cred forProtectionSpace:protectionSpace];
          }
      }
   }
} 
```

我希望这些会有所帮助。

# c# - 在 Metro 应用程序中将 Json 数据转换为标准字符串？

> ID：11448211
> 
> 赞同：3
> 
> 时间：2012-07-12T08:52:52.627
> 
> 标签：c#, json, silverlight, microsoft-metro

我有一个 Metro 应用程序，我在其中调用一个以 json 格式显示输出的服务。我的服务的输出数据如图：

```
 {"AssignedTo":"8",
   "AssignedUserName":"james",
   "ExpectedCompletionDate":"\/Date(1343673000000)\/",
   "Priority":"Yes",
   "Status":"Open",
   "Description":"rtrtrtrtrtr",
   "EntityID":"Q0000621",
   "EntityType":"Deal",
   "Parameters":{"Account":"fds","TaskType":"Work log"},
   "SysGenerated":false,
   "UserID":"1"} 
```

我想将该 json 数据转换为普通的字符串格式，以便我可以在我的列表视图中显示数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:22:01.877

你的意思是

```
public class DataSource : INotifyPropertyChanged
{
public string AssignedTo
{
get;set;
} 
```

... public bool SysGenerated { get;set; } 公共字符串用户 ID { 获取；设置；}

```
public DataSource(string jsonContent)
{
// use reflection to create the class
}
} 
```

或者

```
string data = string.Concact(jsonContent); 
```

?

# java - 无法从 TimerTask 线程捕获异常

> ID：11448214
> 
> 赞同：2
> 
> 时间：2012-07-12T08:53:04.060
> 
> 标签：java, multithreading

我有一个 Java 类，它在其主方法中启动 TimerTask，扩展 TimerTask 的类是一个内部类（类 myTimer 扩展 TimerTask）。在它的运行方法 myTimer 中抛出一个异常，在主要方法中我试图捕获这样的异常：

```
try {
  timer.schedule(new myTimer(arg1, arg2), 0, RETRY_PERIOD);
} catch (Exception e) {
     System.out.println("Exception caught");
} 
```

但这不起作用，它永远不会捕获异常，myTimer 线程抛出。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:59:21.257

将在与添加它的线程*不同*`Timer`的线程中执行该`TimerTask.run()`方法，父类将无法捕获抛出的异常的 main 方法。

 *一种可能的解决方案是防止异常从方法中传播出去，`run()`并通过某种查询方法向父级提供任何有用的信息。`run()`在查询结果之前，父母需要等待方法完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:47:50.653

您的情况有点棘手，我不确定您希望在代码片段中发生什么。您是否希望主线程阻塞，直到计时器线程抛出异常？因为那不会发生。唯一`try-catch`会做的是捕获调用中发生的异常`schedule`，而不是在线程定期执行的代码中。

无论如何，这没有任何意义。由于计时器线程可以与主线程并行抛出异常，因此您需要定期冻结主线程以检查异常或永久冻结它直到计时器完成。

后一种情况可以通过以下方式轻松完成`ScheduledThreadPoolExecutor`：

```
ScheduledThreadPoolExecutor exec = new ScheduledThreadPoolExecutor(1);
ScheduledFuture f = exec.scheduleWithFixedDelay(new Task(arg1, arg2), 0, 
                                   RETRY_PERIOD, TimeUnit.MILLISECONDS);

...
try {
    f.get(); // wait for task to finish
} catch(ExecutionException ex) {
    System.out.println("Exception caught");
} 
```

哪里`Task`是一个实现`Runnable`.

当然，这会阻塞主线程，直到任务返回或抛出异常（这可能永远不会发生）。或者，您可以使用定时获取来定期检查异常。*

# javascript - 循环遍历循环的数字序列

> ID：11448215
> 
> 赞同：3
> 
> 时间：2012-07-12T08:53:04.383
> 
> 标签：javascript, math

有一个`array`数字`[1,2,3,4,5,6,7,8,9,10]`

我需要从这个序列中获取与当前超过 2 个项目不同但循环的所有数字。

例如，如果当前数字为 1，则新列表应包含除 之外的所有内容`9,10,1,2,3`，或者如果当前数字为 4，则新列表应包含除 之外的所有内容`2,3,4,5,6`。

有没有什么技术可以做到这一点，而无需在开始和结束时为项目创建多个循环？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:17:59.867

```
var a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];          

var exclude = function (start, distance, array) { 
    var result = [];                              

    for (var i = 0; i < array.length; i++) {      

        var d = Math.min(                         
            Math.abs(start - i - 1),              
            Math.abs(array.length + start - i - 1)
        )                                         

        if (d > distance) {                      
            result.push(array[i]);                
        }                                         
    }                                             

    return result;                                
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:34:58.623

我认为这可以满足您的要求：

```
// Sorry about the name
function strangePick(value, array) {
  var n = array.length
    , i = array.indexOf(value);

  if (i >= 0) {
    // Picked number
    var result = [value];

    // Previous 2 numbers
    result.unshift(array[(i + n - 1) % n]);
    result.unshift(array[(i + n - 2) % n]);

    // Next 2 numbers
    result.push(array[(i + 1) % n]);
    result.push(array[(i + 2) % n]);

    return result;
  } else {
    return [];
  }
} 
```

一些测试：

```
var array = [1,2,3,4,5,6,7,8,9,10];

console.log(strangePick(1, array)); // [9,10,1,2,3]
console.log(strangePick(4, array)); // [2,3,4,5,6] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:51:28.800

您可以使用 javascript array.slice：

```
function get_offset_sequence(arr, index, offset) {
        var result = [];
        if (index - offset < 0) {
            result = arr.slice(index - offset).concat(arr.slice(0, index + offset + 1));
        }
        else if (index + offset > arr.length - 1) {
            result = arr.slice(index - offset).concat(arr.slice(0, Math.abs(arr.length - 1 - index - offset)));
        }
        else {
            result = arr.slice(index - offset, index + offset + 1)
        }
        return result;
    } 
```

使用示例：

```
var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
var index = 1;
var offset = 2;

for (var i=0; i < 10; i++) { console.log(i, arr[i], get_offset_sequence(arr, i, offset)) } 
```

# c# - 我试图理解的奇怪的 c# 语法（取自 SilkProject MileageStats App）

> ID：11448216
> 
> 赞同：0
> 
> 时间：2012-07-12T08:53:04.383
> 
> 标签：c#

```
 Using<GetFillupById>().Execute(id); 
```

从未见过这样的语法。使用的定义是：

```
protected T Using<T>() where T : class
    {
        var handler = serviceLocator.GetInstance<T>();
        if (handler == null)
        {
            throw new NullReferenceException("Unable to resolve type with service locator; type " + typeof(T).Name);
        }
        return handler;
    } 
```

如果有人能告诉我这东西到底是什么——功能，属性？或向我展示一些我可以阅读的链接 - 我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:56:20.510

此方法/函数使用服务定位器提供类型的实例`T`，返回该实例以便可以调用它。这与此类似：

```
new GetFillupById().Execute(id); 
```

但是这个辅助方法不是默认的构造函数调用，而是包装对象初始化并将其委托给服务定位器对象。泛型的使用允许将其用作服务定位器识别的任何类型的单个方法调用。

类型约束`where T : class`意味着可以为`T`类而不是结构的任何类型有效调用此方法，即引用而不是值类型。反之亦然`where T : struct`。您还可以包含约束来表示`T`必须实现特定接口、扩展特定类或公开默认构造函数 ( `where T : new()`)。

要查找的相关概念：泛型、控制反转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:56:49.330

它是某个类的通用方法。

[你可以在这里](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.80%29.aspx)找到更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T08:57:30.290

它的通用方法...

MSDN： http: [//msdn.microsoft.com/en-us/library/twcad0zb (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T08:55:45.740

this( `Using<T>`) 是一个[通用方法](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.110%29.aspx)。有关泛型方法的介绍，请查看此[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms379564%28v=vs.80%29.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T09:01:35.013

我假设 SO html 解析器已经吃掉了你`<T>`的方法，并且该方法如下所示：

```
protected T Using<T>() 
    where T: class 
{ 
    var handler = serviceLocator.GetInstance(); 

    if (handler == null) 
    { 
        throw new NullReferenceException("Unable to resolve type with service locator; type " + typeof (T).Name); 
    } 

    return handler; 
} 
```

该方法或该方法位于泛型类中（否则没有为 T 指定类型）

C#中有很多泛型类型

查看`System.Collections.Generic`

你可能见过的一种类型是`List<T>`它允许你创建一个强类型的类型列表`T`

例如

```
var myList = new List<int>(); // This is a strongly typed list of int - if you call myList.Add() the Add will expect an int as the first parameter - at design time an error will be raised if the a non compatible type is used 
```

在他的回答中查看 Prateeks 链接中的信息

# iphone - iOS 应用审查 - 不确定我是选择“等待发布”还是“立即发布”

> ID：11448217
> 
> 赞同：0
> 
> 时间：2012-07-12T08:53:08.083
> 
> 标签：iphone, xcode

**更新：该应用程序已在 iTunes 连接中配置我*不记得*我选择了哪个选项。**

我在 iTunes Connect 中有一个应用程序等待上传，但我不确定是选择“等待发布”还是“立即发布”。

在上传我的二进制文件之前，如何确保将其设置为“等待发布”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:18:08.870

如果您选择等待发布选项，在应用摘要页面中，新版本将被列为 **“发布控制：等待开发者发布”**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:11:40.287

我总是更喜欢“等待发布”选项。

如果您在最后一分钟发现错误，这使您可以*不发布更新。*您还可以将您的版本与其他与时间相关的操作同步，例如：

*   营销活动
*   后端更改
*   ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:08:19.457

如果您选择等待发布，您必须在苹果接受您的应用后发布您的应用。如果您选择“立即发布”，它将在苹果接受您的应用后自动发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-09T11:52:44.457

我相信您在作为提交过程的一部分上传二进制文件后会确认该选项。

# node.js - node.js 垃圾回收的时机

> ID：11448219
> 
> 赞同：8
> 
> 时间：2012-07-12T08:53:12.000
> 
> 标签：node.js, garbage-collection

最近，我安装了[https://github.com/lloyd/node-memwatch](https://github.com/lloyd/node-memwatch)进行开发，以研究 GC 是如何与我的程序交互的。

我已经绑定了事件“stat”，arthor 声明事件是在执行 GC 时触发的。

我发现当脚本负载很高时。“stat”事件不会被触发。我不确定这是否意味着没有执行 GC，但这表明 GC 可能没有触发。

在我的生产服务器中，全天的负载甚至更高。我很确定GC没有机会执行。内存使用量没有机会减少。这就像内存泄漏。

1.  我的观察正确吗？连续高负载时GC不能执行吗？
2.  如果是这样，我应该使用暴露的GC接口来强制GC吗？
3.  GC 阻塞了吗？我应该更频繁地执行GC，以便GC不会因为每次GC而长时间阻塞吗？

我知道手动 GC 不是一个好主意（在 node.js 中有人反对手动 GC 的想法，但我找不到参考链接），但我看到内存使用量在不断增加。确实需要解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T04:49:46.510

V8中有3种GC事件

*   `kGCTypeMarkSweepCompact`
*   `kGCTypeScavenge`
*   `kGCTypeAll`

V8 经常运行 scavenge 事件，但仅在新创建的对象上运行。在重负载期间，其他类型的 GC 可能很少发生。

您可以尝试运行使用[nodefly-gcinfo 模块的](https://github.com/nodefly/gcinfo)[NodeFly](http://apm.nodefly.com)代理来跟踪持续的内存使用情况。

你也可以`nodefly-gcinfo`直接调用，它有一个在每次 GC 事件发生时运行的回调：

```
require('nodefly-gcinfo').onGC(function(usage, type, flags){
    console.log("GC Event Occurred");
    console.log("Heap After GC:",usage, type, flags);
}); 
```

# iphone - regionThatFits 使跨度区域翻倍

> ID：11448225
> 
> 赞同：1
> 
> 时间：2012-07-12T08:53:36.667
> 
> 标签：iphone, mkmapview, region

我正在使用 MKMapView 开发组件。地图应在注释点击时加倍放大。为此，我尝试减少两倍的地图区域跨度，但有时它工作不正常： 这里代码和平：

```
 MKCoordinateSpan newSpan = mapView.region.span;
NSLog(@"old: %f, %f", newSpan.latitudeDelta, newSpan.longitudeDelta);
newSpan = MKCoordinateSpanMake(newSpan.latitudeDelta / 2.0, newSpan.longitudeDelta / 2.0);
NSLog(@"new: %f, %f", newSpan.latitudeDelta, newSpan.longitudeDelta);
MKCoordinateRegion region = [mapView regionThatFits:MKCoordinateRegionMake(centerCoordinate, newSpan)];

NSLog(@"!!!! (%f, %f) (%f, %f)", region.center.latitude, region.center.longitude, region.span.latitudeDelta, region.span.longitudeDelta); 
```

我采用当前跨度，减少它并传递给 regionThatFits。有时结果是：

```
old: 0.609257, 0.914612
new: 0.304629, 0.457306
!!!! (55.805472, 37.579371) (0.608178, 0.914612) 
```

regionThatFits 双打跨度传递给它。所以视觉效果是视图注释的居中而不缩放。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-28T07:48:07.567

我遇到了同样的问题，碰巧我有时会更改 mapView 的大小（为了应用程序的需要）。然后我在 mapView 的高度为 0 时使用 regionThatFits。

正如 FKDev 回答所说， regionThatFits 会根据 mapView 实际帧（导致崩溃的原因）重新计算跨度。希望可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:12:48.317

您不应该使用`regionThatFits:`它，因为它用于更改跨度值以匹配视图框架。来自 Apple 的文档：

> 仍以地图的同一点为中心但其跨度值已调整为适合地图视图框架的区域。

在您的情况下，您可以直接更改地图区域的跨度值。

```
[mapView setRegion:MKCoordinateRegionMake(centerCoordinate, newSpan)]; 
```

# installation - installshield 从源媒体启动 exe

> ID：11448230
> 
> 赞同：1
> 
> 时间：2012-07-12T08:53:59.433
> 
> 标签：installation, installshield

我有一个生成 CD-ROM 文件的 installshield msi 项目。

我知道如何设置自定义操作以启动存储在二进制表中的 exe 文件。

我想要做的是启动一个位于源媒体根目录的 exe 文件，而不是在安装目录中复制它。

我不想将它添加到二进制表中，因为我希望能够在不重新构建安装程序的情况下更改文件。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:35:30.443

对于首次安装，您可以引用指示安装文件位置的属性。需要考虑的常见问题包括：

*   [SETUPEXEDIR](http://helpnet.installshield.com/installshield16helplib/SETUPEXEDIR.htm)
*   [源目录](http://helpnet.installshield.com/installshield16helplib/IHelpPropReference.htm#wp1021299)
*   [OriginalDatabase](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370562.aspx) - 注意此处包含的 .msi 文件名。

对于 InstallScript 安装（而不是基于 Windows Installer 的安装），还有[PACKAGE_LOCATION](http://helpnet.flexerasoftware.com/installshield19helplib/Subsystems/installshield19langref/helplibrary/PACKAGE_LOCATION.htm)。

# objective-c - iPad相机方向人像模式？

> ID：11448231
> 
> 赞同：0
> 
> 时间：2012-07-12T08:54:03.550
> 
> 标签：objective-c, ios, ipad

我想将 iPad 相机应用程序方向设置为仅纵向模式。在 viewController 中，我们大部分时间都会将其置于横向模式。有没有办法可以将相机模式设置为仅纵向？喜欢：

```
imagePickerController setOrientation: UIInterfaceOrientationPortrait 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T12:55:36.760

我不认为我们可以控制相机的方向。它的方向属性是内置的，它随着设备的方向而变化。

选择器的方向是只读属性。

请纠正我，如果我错了

# .net - 对于“参数化”字符串构建，是否有比 StringBuilder 更快的方法？

> ID：11448232
> 
> 赞同：0
> 
> 时间：2012-07-12T08:54:09.187
> 
> 标签：.net, string, performance, t4, stringbuilder

我有一个用 T4 制作的自定义小“视图”引擎。基本上，它所做的就是使用带有特殊指令的“静态”HTML 文件并输出如下内容：

```
StringBuilder output... 
output.Append("<html> my code blah");
if(MyParameter!=null){
  output.Append(MyParameter.ToString);
}
output.append("more code");
return output.ToString(); 
```

当然，它的意义远不止于此，但这就是要点。它接受一个 HTML 文件并生成一个普通的旧 C# 类。

我真的很喜欢这种方式，因为我可以拥有静态类型的视图。不幸的是，这似乎有点慢。我的问题尤其是我有一个`index`包含多个视图的`blog entry`视图，所以基本上相同的基本字符串最终会被构建，只是根据提供的参数在这里和那里有一些不同的文本。

无论如何，我想知道是否有任何方法可以加快这个过程。真的有什么比 StringBuilder 更快的吗？

另外，不要担心“不干净”的代码。因为我使用 T4 来生成这些视图类，所以我可以编写一些非常 hack-ish 的代码，这并不重要，因为我基本上只编写一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:17:18.407

对于 StringBuilder

*   重用 StringBuilder 对象，而不是每次都创建一个新对象
*   将 StringBuilder 的容量设置为最终字符串的最大大小。

备择方案

*   创建所有可能字符串的列表，然后根据参数值从它们中进行选择（如果没有太多可能的排列）

还

*   对您的代码进行基准测试，因为构建字符串不太可能阻碍您。我可以在单核上构建 30 万串/秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:06:55.487

请为创建的 StringBuilder 指定容量。这将避免多次内存分配。例子：

```
var a = new StringBuilder(3000); 
```

其中，3000 是最终字符串的估计大小

# android - 如何在 Android 中使用带有解析字符串的 listView？

> ID：11448236
> 
> 赞同：1
> 
> 时间：2012-07-12T08:54:35.817
> 
> 标签：android, listview

这是我的代码。我想在 Android 中看到这些解析的字符串到 ListView 中。我怎样才能做到这一点？

```
 DocumentBuilder db = DocumentBuilderFactory.newInstance().newDocumentBuilder();
    InputSource is = new InputSource();
    is.setCharacterStream(new StringReader(xmlRecords));

    Document doc = db.parse(is);
    NodeList nodes = doc.getElementsByTagName("employee");

    for (int i = 0; i < nodes.getLength(); i++) {
      Element element = (Element) nodes.item(i);

      NodeList name = element.getElementsByTagName("name");
      Element line = (Element) name.item(0);
      System.out.println("Name: " + getCharacterDataFromElement(line));

      NodeList title = element.getElementsByTagName("title");
      line = (Element) title.item(0);
      System.out.println("Title: " + getCharacterDataFromElement(line));
    }

  }

       public static String getCharacterDataFromElement(Element e) {
        Node child = e.getFirstChild();
        if (child instanceof CharacterData) {
          CharacterData cd = (CharacterData) child;
          return cd.getData();
        }
        return "";
      }
    } 
```

# spring - 直接调用JSP时我可以在Spring中使用消息资源包吗

> ID：11448237
> 
> 赞同：1
> 
> 时间：2012-07-12T08:54:37.133
> 
> 标签：spring, jsp, localization, spring-security, resourcebundle

我正在使用 Spring 3.0 并使用 Spring Security 进行登录。我已将 login.jsp 页面放在 webapp 文件夹中，并且我正在尝试使用消息来支持本地化，例如：

```
<spring:message code="label.title"/> 
```

不幸的是，jsp 找不到给出错误的消息：

> javax.servlet.ServletException：javax.servlet.jsp.JspTagException：在语言环境“en_US”的代码“label.title”下找不到消息

当我在通过控制器的 jsp 中使用消息代码时，它工作正常。

由于 spring security 在用户未登录时重定向到 login.jsp 页面，因此该页面在没有控制器的情况下（直接）处理。

任何人都知道如何让 jsp 在不通过控制器时也看到资源包？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:11:57.710

您必须强制 Spring 渲染页面 login.jsp，实际上它不是由 Spring 管理的。因此，创建一个虚拟控制器：

```
/**
 * UI Controller that renders the signin-form.
 */
@Controller
public class SigninController {

    /**
     * Render the signin form to the person as HTML in their web browser.
     * Returns void and relies in request-to-view-name translation to kick-in to
     * resolve the view template to render.
     */
    @RequestMapping(value = "/login", method = RequestMethod.GET)
    public void login() {
    }
} 
```

并根据您使用的 ViewResolver（TilesViewResolver、UrlBasedViewResolver...）创建名为“login”的视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T04:14:46.913

利用

```
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%> 
```

然后直接在jsp中引用内容为

```
<spring:message code="lable.name" /> 
```

# ios - 如何在 iOS 中将日、月和年确定为 int

> ID：11448238
> 
> 赞同：6
> 
> 时间：2012-07-12T08:54:42.570
> 
> 标签：ios, int, nsdate, nsdateformatter, nsdatecomponents

我想确定 iOS 中当前日期的日、月和年。我在网上搜索后发现了这个：

```
NSDate *date = [NSDate date];
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [calendar components:(NSDayCalendarUnit) fromDate:date];
NSInteger Day = [components day];
NSInteger month = [components month];
NSInteger year = [components year]; 
```

此代码显示正确的日期，但年份和月份未按应有的方式显示。它显示了一些数字，例如 2147483647。我找不到解决方案，所以请帮助我更正找到的代码，或者编写一些新代码来满足我的需要。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T08:59:34.313

这条线是问题所在：

```
NSDateComponents *components = [calendar components:(NSDayCalendarUnit) fromDate:date]; 
```

它应该是

```
NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:date]; 
```

# iphone - 捕捉触摸的差异：UIControl vs UIGestureRecognizer

> ID：11448240
> 
> 赞同：4
> 
> 时间：2012-07-12T08:54:51.493
> 
> 标签：iphone, objective-c, uigesturerecognizer, uicontrol

我有自定义类，它有 UIView。我希望它在点击视图时执行操作。当我添加：

```
[(UIControl*)customClass addTarget:self
                           action:@selector(doAction:) 
                 forControlEvents:UIControlEventAllTouchEvents]; 
```

当我单击视图时，有时会触发“doAction”，但大多数情况下不会。但我注意到，如果我添加：

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(doAction:)];
[(UIControl*)customClass addGestureRecognizer:tapGesture]; 
```

这两个识别器有什么区别？我知道，UIControl 有委托和 UIGestureRecognizer，但不明白为什么控制并不总是能捕捉到触摸。

问题是我的发件人在手势识别器的情况下是错误的，因为我无法从中提取一些数据。

```
- (void)doAction:(customClass*)sender {
switch (sender.actionType) { // do something ... } } 
```

如何访问它？断点中显示的结构是这样的：

```
sender -> UIGestureRecognizer -> _view -> _actionType 
```

# mysql - MySQL表设计/架构，表太大

> ID：11448241
> 
> 赞同：1
> 
> 时间：2012-07-12T08:54:56.087
> 
> 标签：mysql, database-design, sphinx

我有一个包含大量文本的 MySQL 数据库，我正在从网站获取数据并将其插入到表中。

我正在为数据库使用 SSD HD (100GB)，但空间不足，我认为表结构中的某些东西太大了，我无法预测所有列的大小，所以我正在使用大多数字段的 varchar\text\medium 文本。当我将所有数据插入数据库时​​，我会监控错误，当我发现某个字段对于我要插入的数据而言太小时，我正在增加字段的大小（例如从 varchar(1000) 到varchar(2000))。

到目前为止，我有大约 1.8M~ 行，我认为我做错了什么。

这是我的桌子的结构 -

```
CREATE TABLE `PT` (
  `patID` int(11) NOT NULL,
  `Title` varchar(450) DEFAULT NULL,
  `IssueDate` date DEFAULT NULL,
  `NoFullText` tinyint(1) DEFAULT NULL,
  `Abstract` text,
  `ForeignReferences` varchar(15000) DEFAULT NULL,
  `CurrentUSClass` varchar(2200) DEFAULT NULL,
  `OtherReferences` mediumtext,
  `ForeignPrio` varchar(900) DEFAULT NULL,
  `CurrentIntlClass` varchar(3000) DEFAULT NULL,
  `AppNum` varchar(45) DEFAULT NULL,
  `AppDate` date DEFAULT NULL,
  `Assignee` varchar(300) DEFAULT NULL,
  `Inventors` varchar(1500) DEFAULT NULL,
  `RelatedUSAppData` text,
  `PrimaryExaminer` varchar(100) DEFAULT NULL,
  `AssistantExaminer` varchar(100) DEFAULT NULL,
  `AttorneyOrAgent` varchar(300) DEFAULT NULL,
  `ReferencedBy` text,
  `AssigneeName` varchar(150) DEFAULT NULL,
  `AssigneeState` varchar(80) DEFAULT NULL,
  `AssigneeCity` varchar(150) DEFAULT NULL,
  `InventorsName` varchar(800) DEFAULT NULL,
  `InventorsState` varchar(300) DEFAULT NULL,
  `InventorsCity` varchar(800) DEFAULT NULL,
  `Claims` mediumtext,
  `Description` mediumtext,
  `InsertionTime` datetime NOT NULL,
  `LastUpdatedOn` datetime NOT NULL,
  PRIMARY KEY (`patID`),
  UNIQUE KEY `patID_UNIQUE` (`patID`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

我应该怎么办？我有大约 20% 的数据（这意味着我将需要 350GB~ 空间）这里的性能影响是什么？我应该将表格分成几个 HD 上的几个表格吗？最后我将使用 sphinx 来索引和查询数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:03:07.353

所有非 TEXT 列值都存储在一个 8KB 记录中（硬盘上的未分割空间单位）。TEXT 列值存储为指向外部数据块的指针。

像 MongoDB 这样的 NOSQL（不仅仅是 SQL）数据库可以更好地处理这些类型的结构（非常面向文本）。

但我怀疑关于如何处理和构建数据，您可以做很多事情以避免保存大量文本。

构建数据库以避免重复信息并允许轻松更新（在一个地方更新 - 随处可见）的过程称为规范化。

如果您存储在那些大 VARCHAR 中的数据（例如：Inventors 长度 1500）被构造为多个数据元素（例如：发明人的姓名以逗号分隔），那么您可以通过创建一个发明人表来重构您的数据库表并引用它。

# forms - bootstrap：form-horizo ntal 没有按预期设计

> ID：11448245
> 
> 赞同：6
> 
> 时间：2012-07-12T08:55:14.587
> 
> 标签：forms, twitter-bootstrap

我正在使用 twitter 引导程序，并希望有一个水平表单，如这里的演示所示：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

但是，我得到了一种垂直表单，我猜想带有标签而不是控件，我找不到垂直表单样式不起作用的原因。

这是 html 代码（使用 symfony2 框架生成：

```
<form class="form-horizontal" method="POST" action="/yourownpoet/web/app_dev.php/register/">
    <label class=" required" for="fos_user_registration_form_email" placeholder="Email">Email:</label>
    <input id="fos_user_registration_form_email" class="text-style" type="email" placeholder="Email" required="required" name="fos_user_registration_form[email]">
    <div placeholder="Password" id="fos_user_registration_form_plainPassword">    <div>
        <label class=" required" for="fos_user_registration_form_plainPassword_Enter Password: ">Enter password: </label>
        <input type="password" required="required" name="fos_user_registration_form[plainPassword][Enter Password: ]" id="fos_user_registration_form_plainPassword_Enter Password: " class="text-style">
    </div>
  <div>
      <label class=" required" for="fos_user_registration_form_plainPassword_Verify Password: ">Verify password: </label>
    <input type="password" required="required" name="fos_user_registration_form[plainPassword][Verify Password: ]" id="fos_user_registration_form_plainPassword_Verify Password: " class="text-style">
 </div>
   etc...
</form> 
```

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T11:14:47.330

您需要将该`.control-label`类应用于您的标签并将您的输入分隔在一个`.controls`容器中，以便您的表单样式正确应用。试试这个：

```
<form class="form-horizontal" method="POST" action="/yourownpoet/web/app_dev.php/register/">
    <div class="control-group">
        <label class="control-label required" for="fos_user_registration_form_email" placeholder="Email">Email:</label>
        <div class="controls">
            <input id="fos_user_registration_form_email" class="text-style" type="email" placeholder="Email" required="required" name="fos_user_registration_form[email]">
            <div placeholder="Password" id="fos_user_registration_form_plainPassword"></div>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label required" for="fos_user_registration_form_plainPassword_Enter Password: ">Enter password: </label>
        <div class="controls">
            <input type="password" required="required" name="fos_user_registration_form[plainPassword][Enter Password: ]" id="fos_user_registration_form_plainPassword_Enter Password: " class="text-style">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label required" for="fos_user_registration_form_plainPassword_Verify Password: ">Verify password: </label>
        <div class="controls">
            <input type="password" required="required" name="fos_user_registration_form[plainPassword][Verify Password: ]" id="fos_user_registration_form_plainPassword_Verify Password: " class="text-style">
        </div>
    </div>
</form> 
```

# c# - 在 C# 中为多边形创建形状文件 (.shp)

> ID：11448246
> 
> 赞同：3
> 
> 时间：2012-07-12T08:55:18.827
> 
> 标签：c#, gis, esri

我想创建可与 GIS 解决方案地图一起使用的形状文件。情况是这样的。用户将通过单击在地图上绘制一些多边形。所以我有很长的时间来绘制多边形。

现在我想将这个 long-lat 导出为 shape 文件，这样它也可以显示在其他 GIS 应用程序中。

我对形状文件一无所知，那么创建形状文件会很困难吗？谁能指出我应该从哪里开始搜索？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:59:51.350

您可以从文档中实现它

[http://www.esri.com/library/whitepapers/pdfs/shapefile.pdf](http://www.esri.com/library/whitepapers/pdfs/shapefile.pdf)

好吧，当然，不要那样做。

Google for shapefile library c# 肯定会帮助你。

一个好的库是 SharpMap：[http ://sharpmap.codeplex.com/](http://sharpmap.codeplex.com/)

这里的其他选择（不是那么年轻） [http://www.justkez.com/creating-a-shapefile-from-c-net-what-are-the-options/](http://www.justkez.com/creating-a-shapefile-from-c-net-what-are-the-options/)

# delphi - Delphi 的 NURBS 库

> ID：11448255
> 
> 赞同：2
> 
> 时间：2012-07-12T08:55:54.587
> 
> 标签：delphi, nurbs, splines

您能否推荐一些库来操作可用于 Delphi 的样条曲线？我已经进行了一些搜索，但我发现的都是 C/C++/Python 绑定。我需要的功能是：在 2D 中操作样条线：旋转、平移、镜像、缩放以及相交、插入结、用折线插值样条线。

### 编辑：

GLScene**不是**我想要的，因为我**只**需要支持 2D 样条而不需要 3D 曲面。另外我不希望图书馆坚持使用渲染引擎。我想执行某些计算，而 GLScene 不符合我的需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:25:04.970

[GlScene](http://glscene.sourceforge.net/wikka/HomePage)是一个很好的库来做 NURBS 看看这个[http://glscene.pbworks.com/w/page/6437577/doc_demosmeshes](http://glscene.pbworks.com/w/page/6437577/doc_demosmeshes)

这里有一个鸭子 NURBS 示例……祝你好运……

# c# - parallel.invoke 事务范围实体框架

> ID：11448259
> 
> 赞同：1
> 
> 时间：2012-07-12T08:56:06.063
> 
> 标签：c#, .net, entity-framework, transactionscope

在我的 EF4 程序中，我有一个申请人和申请表。该程序的多个实例会定期运行，以根据某些业务逻辑为申请人创建应用程序。在申请表中，我不能为申请人拥有多个已提交/正在提交的记录。

所以这是一段代码，它检查是否有一个已提交/正在提交的应用程序并插入它。它在申请者列表的 foreach 循环中运行。

```
public Application SaveApplication(Int32 applicantId)
    {
        using (TransactionScope txScope = new TransactionScope(TransactionScopeOption.RequiresNew))
        {
            if (ApplicantHasPendingApplication(applicantId))
                return null;

            Application app = null;
            try
            {
                app = new Application()
                {
                    // Create the object...
                };

                _unitOfWork.DisclosureApplications.Add(app);
                _unitOfWork.Commit();
                _unitOfWork.Refresh(app); // We save and refresh it to get the Id.

                txScope.Complete();
            }
            catch (UpdateException ex)
            {
                // We get an Update exception here when multiple instances tries to insert Application.
            }

            return app;
        }
    } 
```

上面的代码防止插入重复记录，除了它在运行程序的多个实例时抛出 UpdateException。如果我吞下那个例外并继续，那么一切都很好。

但是，我尝试并行测试/运行上面的代码，但它在数据库中插入了重复的记录。

```
Parallel.Invoke(
            () => CreateApplications("Parallel Instance 1"),
            () => CreateApplications("Parallel Instance 2"));

private void CreateApplications(String dummyInstanceName)
{
   var unitOfWork = new SqlUnitOfWork();
   var applicants = unitOfWork.Applicants.FindAll().Take(100).ToList();

   var facade = new ProviderFacade(unitOfWork, new Log4NetLogger(dummyInstanceName));

   foreach (Applicant applicant in applicants)
            {
                facade.ApplicationProvider.SaveApplication(applicant.applicantID);
            }
} 
```

在上面的代码中，它抛出 UpdateException 并为申请人插入多个 Application 行。

请注意，该表只有一个代理主键，没有其他唯一约束。

我的问题是：为什么 TransactionScope 通过在 Parallel.Invoke 中运行来插入重复的行，而不是在我启动程序的多个实例时？实现它的合理方法是什么？

更新：SqlUnitOfWork 的 ctor 是

```
public SqlUnitOfWork()
    {
        _context = new MyEntities();
    } 
```

MyEntities 的 ctor 由 EF 生成 -

```
 public const string ConnectionString = "name=Entities";
    public const string ContainerName = "Entities";

    public TPIEntities() : base(ConnectionString, ContainerName)
    {
        this.ContextOptions.LazyLoadingEnabled = true;
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:31:03.317

这是一个经典的比赛条件。两个事务都检查是否存在预先`Application`存在的事务。两者都发现没有。然后，两者都尝试插入。

您需要通过锁定应用程序或`UPDLOCK, HOLDLOCK`在检查是否`Application`存在时使用 SQL Server 来同步您的检查。

# java - Ghostscript 在命令行中工作，但如果在 AIX 上从 Java 执行则不起作用

> ID：11448260
> 
> 赞同：1
> 
> 时间：2012-07-12T08:56:07.377
> 
> 标签：java, pdf, exec, aix, ghostscript

## 简短的介绍

我必须在 AIX 上运行 Ghostscript。它**在命令行中工作**：

```
XXXXXXXX:i2zate:/home/i2zate>/usr/bin/gs -dFIXEDMEDIA -dPDFFitPage -dFirstPage=1 -dLastPage=1 -dBATCH -dNOPAUSE -dNOPROMPT -dSAFER -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=0 -dDEVICEWIDTH=90 -dDEVICEHEIGHT=120 -dORIENT1=true -sDEVICE=jpeg  -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -sOutputFile=1.jpg porsche.pdf               
GPL Ghostscript 8.70 (2009-07-31)
Copyright (C) 2009 Artifex Software, Inc.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Processing pages 1 through 1.
Page 1 
```

如果我从 Java 运行相同**的程序，它会显示一个错误**：

```
ERROR: exec(): 0509-036 Cannot load program /usr/bin/gs because of the following errors:
ERROR:  0509-022 Cannot load module /usr/lib/libcairo.a(libcairo.so.2).
ERROR:  0509-150   Dependent module /usr/lib/libXrender.a(libXrender.so.1) could not be loaded.
ERROR:  0509-152   Member libXrender.so.1 is not found in archive
ERROR:  0509-022 Cannot load module gs.
ERROR:  0509-150   Dependent module /usr/lib/libcairo.a(libcairo.so.2) could not be loaded.
ERROR:  0509-022 Cannot load module . 
```

***我不明白，为什么会这样。***你有什么主意吗？您可以在下面找到一些环境信息。如果你需要别的东西，请告诉我。

## 更深入的信息

我使用的**java代码**：

```
package biz;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class DummyCaller {
    public static void main(String[] args) throws IOException, InterruptedException {
        printSystemProperties();
        System.out.println();
        printEnvironment();
        Process process = Runtime.getRuntime().exec( args );
        new StreamReader("OUT  ", process.getInputStream() ).start();
        new StreamReader("ERROR", process.getErrorStream() ).start();
        process.waitFor();
    }

    private static void printSystemProperties() {
        System.out.println( "System.getProperties(): " );
        List<String> keys = new ArrayList<String>();
        for (Object key : System.getProperties().keySet()) {
            keys.add( (String) key );
        }
        Collections.sort(keys);
        for (Object key : keys ) {
            System.out.println( "" + key + "=" + System.getProperty((String) key) );
        }
    }

    private static void printEnvironment() {
        System.out.println( "System.getEnv(): " );
        List<String> keys = new ArrayList<String>();
        keys.addAll(System.getenv().keySet());
        Collections.sort(keys);
        for (Object key : keys ) {
            System.out.println( "" + key + "=" + System.getenv().get( key) );
        }
    }

    public static class StreamReader extends Thread {
        private BufferedReader br;
        private String streamName;

        public StreamReader(String streamName, InputStream is ) {
            super();
            this.streamName = streamName;
            br = new BufferedReader( new InputStreamReader(is));
        }

        @Override
        public void run() {
            String line = null;
            try {
                while ( (line = br.readLine() ) != null ) {
                    System.out.println( streamName + ": " + line );
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

java程序的**完整输出**（一些不相关的敏感信息XXXX-ed）：

```
XXXXXXXHOST:i2zate:/home/i2zate>java -cp . biz.DummyCaller /usr/bin/gs -dFIXEDMEDIA -dPDFFitPage -dFirstPage=1 -dLastPage=1 -dBATCH -dNOPAUSE -dNOPROMPT -dSAFER -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=0 -dDEVICEWIDTH=90 -dDEVICEHEIGHT=120 -dORIENT1=true -sDEVICE=jpeg  -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -sOutputFile=1.jpg porsche.pdf
System.getProperties():
com.ibm.cpu.endian=big
com.ibm.jcl.checkClassPath=
com.ibm.oti.configuration=scar
com.ibm.oti.jcl.build=20111101_1053
com.ibm.oti.shared.enabled=false
com.ibm.oti.vm.bootstrap.library.path=/usr/java6_64/jre/lib/ppc64/default:/usr/java6_64/jre/lib/ppc64
com.ibm.oti.vm.library.version=24
com.ibm.util.extralibs.properties=
com.ibm.vm.bitmode=64
file.encoding=ISO8859-1
file.separator=/
ibm.signalhandling.rs=false
ibm.signalhandling.sigchain=true
ibm.signalhandling.sigint=true
ibm.system.encoding=ISO8859-1
java.assistive=ON
java.awt.fonts=
java.awt.graphicsenv=sun.awt.X11GraphicsEnvironment
java.awt.printerjob=sun.print.PSPrinterJob
java.class.path=.
java.class.version=50.0
java.compiler=j9jit24
java.endorsed.dirs=/usr/java6_64/jre/lib/endorsed
java.ext.dirs=/usr/java6_64/jre/lib/ext
java.fullversion=JRE 1.6.0 IBM J9 2.4 AIX ppc64-64 jvmap6460sr10-20111207_96808 (JIT enabled, AOT enabled)
J9VM - 20111207_096808
JIT  - r9_20111107_21307ifx1
GC   - 20110519_AA
java.home=/usr/java6_64/jre
java.io.tmpdir=/tmp/
java.jcl.version=20111104_02
java.library.path=/usr/java6_64/jre/lib/ppc64/default:/usr/java6_64/jre/lib/ppc64:/usr/java6_64/jre/lib/ppc64:/usr/java6_64/jre/lib/ppc64/default:/usr/java6_64/jre/lib/ppc64/j9vm:/usr/java6_64/jre/lib/ppc64:/usr/java6_64/jre/../lib/ppc64:/usr/lib:/usr/lib
java.runtime.name=Java(TM) SE Runtime Environment
java.runtime.version=pap6460sr10-20111208_01 (SR10)
java.specification.name=Java Platform API Specification
java.specification.vendor=Sun Microsystems Inc.
java.specification.version=1.6
java.util.prefs.PreferencesFactory=java.util.prefs.FileSystemPreferencesFactory
java.vendor=IBM Corporation
java.vendor.url=http://www.ibm.com/
java.version=1.6.0
java.vm.info=JRE 1.6.0 IBM J9 2.4 AIX ppc64-64 jvmap6460sr10-20111207_96808 (JIT enabled, AOT enabled)
J9VM - 20111207_096808
JIT  - r9_20111107_21307ifx1
GC   - 20110519_AA
java.vm.name=IBM J9 VM
java.vm.specification.name=Java Virtual Machine Specification
java.vm.specification.vendor=Sun Microsystems Inc.
java.vm.specification.version=1.0
java.vm.vendor=IBM Corporation
java.vm.version=2.4
jxe.current.romimage.version=15
jxe.lowest.romimage.version=15
line.separator=

os.arch=ppc64
os.encoding=ISO8859-1
os.name=AIX
os.version=6.1
path.separator=:
sun.arch.data.model=64
sun.boot.class.path=/usr/java6_64/jre/lib/ppc64/default/jclSC160/vm.jar:/usr/java6_64/jre/lib/annotation.jar:/usr/java6_64/jre/lib/beans.jar:/usr/java6_64/jre/lib/java.util.jar:/usr/java6_64/jre/lib/jndi.jar:/usr/java6_64/jre/lib/logging.jar:/usr/java6_64/jre/lib/security.jar:/usr/java6_64/jre/lib/sql.jar:/usr/java6_64/jre/lib/ibmorb.jar:/usr/java6_64/jre/lib/ibmorbapi.jar:/usr/java6_64/jre/lib/ibmcfw.jar:/usr/java6_64/jre/lib/rt.jar:/usr/java6_64/jre/lib/charsets.jar:/usr/java6_64/jre/lib/resources.jar:/usr/java6_64/jre/lib/ibmpkcs.jar:/usr/java6_64/jre/lib/ibmcertpathfw.jar:/usr/java6_64/jre/lib/ibmjgssfw.jar:/usr/java6_64/jre/lib/ibmjssefw.jar:/usr/java6_64/jre/lib/ibmsaslfw.jar:/usr/java6_64/jre/lib/ibmjcefw.jar:/usr/java6_64/jre/lib/ibmjgssprovider.jar:/usr/java6_64/jre/lib/ibmjsseprovider2.jar:/usr/java6_64/jre/lib/ibmcertpathprovider.jar:/usr/java6_64/jre/lib/ibmxmlcrypto.jar:/usr/java6_64/jre/lib/management-agent.jar:/usr/java6_64/jre/lib/xml.jar:/usr/java6_64/jre/lib/jlm.jar:/usr/java6_64/jre/lib/javascript.jar
sun.boot.library.path=/usr/java6_64/jre/lib/ppc64/default:/usr/java6_64/jre/lib/ppc64
sun.cpu.endian=big
sun.io.unicode.encoding=UnicodeBig
sun.java.command=biz.DummyCaller /usr/bin/gs -dFIXEDMEDIA -dPDFFitPage -dFirstPage=1 -dLastPage=1 -dBATCH -dNOPAUSE -dNOPROMPT -dSAFER -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=0 -dDEVICEWIDTH=90 -dDEVICEHEIGHT=120 -dORIENT1=true -sDEVICE=jpeg -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -sOutputFile=1.jpg porsche.pdf
sun.java.launcher=SUN_STANDARD
sun.java2d.fontpath=
sun.jnu.encoding=ISO8859-1
user.country=US
user.dir=/home/i2zate
user.home=/home/i2zate
user.language=en
user.name=i2zate
user.timezone=
user.variant=

System.getEnv():
AIXTHREAD_SCOPE=S
AUTHSTATE=compat
AWK=/usr/bin/awk
A__z=! LOGNAME
BAR_BSALIB_PATH=/usr/tivoli/tsm/client/api/bin/xbsa.o
CORE_MMAP=yes
CSP_HOME=/opt/csp/at/test
DSMI_CONFIG=/usr/tivoli/tsm/client/api/bin/dsm.opt
DSMI_DIR=/usr/tivoli/tsm/client/api/bin
DSMI_INF_DIR=/usr/tivoli/tsm/client/informix/bin
DSMI_LOG=/var/opt/RRZ/log
DSMI_ORC_CONFIG=/usr/tivoli/tsm/client/oracle/bin/dsm.opt
DSMO_DEBUG=/var/opt/RRZ/log/orcagent.log
DSMO_NODE=XXXXXXXX_ORA
DSM_CONFIG=/usr/tivoli/tsm/client/ba/bin/dsm.opt
DSM_DIR=/usr/tivoli/tsm/client/ba/bin
DSM_LOG=/var/opt/RRZ/log
EDITOR=vi
HOME=/home/i2zate
HOST=XXXXXXXXX
IBM_JAVA_COMMAND_LINE=java -cp . biz.DummyCaller /usr/bin/gs -dFIXEDMEDIA -dPDFFitPage -dFirstPage=1 -dLastPage=1 -dBATCH -dNOPAUSE -dNOPROMPT -dSAFER -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=0 -dDEVICEWIDTH=90 -dDEVICEHEIGHT=120 -dORIENT1=true -sDEVICE=jpeg -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -sOutputFile=1.jpg porsche.pdf
IBM_JVM_AIXTHREAD_SCOPE_NEW_VALUE=S
IBM_JVM_CHANGED_ENVVARS_3211296=AIXTHREAD_SCOPE,NULLPTR,CORE_MMAP
IBM_JVM_CORE_MMAP_NEW_VALUE=yes
IBM_JVM_NULLPTR_NEW_VALUE=NOSEGV
JAVA_HOME=/usr/java6_64/jre
JOBS=/opt/RRZ/AIX
LANG=en_US
LC_CTYPE=C
LC__FASTMSG=true
LIBPATH=/usr/java6_64/jre/lib/ppc64/j9vm:/usr/java6_64/jre/lib/ppc64:/usr/java6_64/jre/../lib/ppc64:/usr/lib
LOCPATH=/usr/lib/nls/loc
LOGIN=i2zate
LOGNAME=i2zate
LOGS=/var/opt/RRZ/log
MAIL=/usr/spool/mail/i2zate
MAILMSG=[YOU HAVE NEW MAIL]
NLSPATH=/usr/lib/nls/msg/%L/%N:/usr/lib/nls/msg/%L/%N.cat
NUI_NOCHECKSUM=1
NUI_NOTESDIR=/opt/lotus
NULLPTR=NOSEGV
ODMDIR=/etc/objrepos
PATH=/usr/java6_64/jre/bin:/usr/java6_64/jre/bin:/usr/bin:/etc:/usr/sbin:/usr/ucb:/home/i2zate/bin:/usr/bin/X11:/sbin:.
PRINTER=XXXXXXXX
PROTS=/var/opt/RRZ/prots
PS1=$HOST:$USER:$PWD>
PWD=/home/i2zate
SHELL=/usr/bin/ksh
SHLVL=1
SPOC=/opt/RRZ/AIX/spoc
SPOCVER=6.1
SSH_CLIENT=XXXXXXXXXXXXXXXXXXXX
SSH_CONNECTION=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
SSH_TTY=/dev/pts/0
SYS=AIX
TAPE=/dev/rmt0
TERM=xterm
TSM=/usr/tivoli/tsm/client/ba/bin/
TZ=MET-1METDST,M3.5.0/2:00,M10.5.0/3:00
USER=i2zate
_=/usr/java6_64/jre/bin/java

ERROR: exec(): 0509-036 Cannot load program /usr/bin/gs because of the following errors:
ERROR:  0509-022 Cannot load module /usr/lib/libcairo.a(libcairo.so.2).
ERROR:  0509-150   Dependent module /usr/lib/libXrender.a(libXrender.so.1) could not be loaded.
ERROR:  0509-152   Member libXrender.so.1 is not found in archive
ERROR:  0509-022 Cannot load module gs.
ERROR:  0509-150   Dependent module /usr/lib/libcairo.a(libcairo.so.2) could not be loaded.
ERROR:  0509-022 Cannot load module . 
```

****来自**同一**命令行**会话的**环境**信息：**

 **```
XXXXXXXX:i2zate:/home/i2zate>set
AUTHSTATE=compat
AWK=/usr/bin/awk
A__z='! LOGNAME'
BAR_BSALIB_PATH=/usr/tivoli/tsm/client/api/bin/xbsa.o
BASH=/usr/bin/bash
BASH_ARGC=()
BASH_ARGV=()
BASH_LINENO=()
BASH_SOURCE=()
BASH_VERSINFO=([0]="3" [1]="00" [2]="16" [3]="1" [4]="release" [5]="powerpc-ibm-aix5.1")
BASH_VERSION='3.00.16(1)-release'
COLUMNS=168
CSP_HOME=/opt/csp/at/test
DIRSTACK=()
DSMI_CONFIG=/usr/tivoli/tsm/client/api/bin/dsm.opt
DSMI_DIR=/usr/tivoli/tsm/client/api/bin
DSMI_INF_DIR=/usr/tivoli/tsm/client/informix/bin
DSMI_LOG=/var/opt/RRZ/log
DSMI_ORC_CONFIG=/usr/tivoli/tsm/client/oracle/bin/dsm.opt
DSMO_DEBUG=/var/opt/RRZ/log/orcagent.log
DSMO_NODE=XXXXXXXX_ORA
DSM_CONFIG=/usr/tivoli/tsm/client/ba/bin/dsm.opt
DSM_DIR=/usr/tivoli/tsm/client/ba/bin
DSM_LOG=/var/opt/RRZ/log
EDITOR=vi
EUID=623
GROUPS=()
HISTFILE=/home/i2zate/.bash_history
HISTFILESIZE=500
HISTSIZE=500
HOME=/home/i2zate
HOST=XXXXXXXX
HOSTNAME=XXXXXXXX
HOSTTYPE=powerpc
IFS=$' \t\n'
JAVA_HOME=/usr/java6_64/jre
JOBS=/opt/RRZ/AIX
LANG=en_US
LC_CTYPE=C
LC__FASTMSG=true
LINES=46
LOCPATH=/usr/lib/nls/loc
LOGIN=i2zate
LOGNAME=i2zate
LOGS=/var/opt/RRZ/log
MACHTYPE=powerpc-ibm-aix5.1
MAIL=/usr/spool/mail/i2zate
MAILCHECK=60
MAILMSG='[YOU HAVE NEW MAIL]'
NLSPATH=/usr/lib/nls/msg/%L/%N:/usr/lib/nls/msg/%L/%N.cat
NUI_NOCHECKSUM=1
NUI_NOTESDIR=/opt/lotus
ODMDIR=/etc/objrepos
OPTERR=1
OPTIND=1
OSTYPE=aix5.1
PATH=/usr/java6_64/jre/bin:/usr/java6_64/jre/bin:/usr/bin:/etc:/usr/sbin:/usr/ucb:/home/i2zate/bin:/usr/bin/X11:/sbin:.
PIPESTATUS=([0]="0")
PPID=2556030
PRINTER=prrz056
PROTS=/var/opt/RRZ/prots
PS1='$HOST:$USER:$PWD>'
PS2='> '
PS4='+ '
PWD=/home/i2zate
SHELL=/usr/bin/ksh
SHELLOPTS=braceexpand:emacs:hashall:histexpand:history:interactive-comments:monitor
SHLVL=1
SPOC=/opt/RRZ/AIX/spoc
SPOCVER=6.1
SSH_CLIENT='XXXXXXXXXXXXXXXXXXXX'
SSH_CONNECTION='XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'
SSH_TTY=/dev/pts/0
SYS=AIX
TAPE=/dev/rmt0
TERM=xterm
TSM=/usr/tivoli/tsm/client/ba/bin/
TZ=MET-1METDST,M3.5.0/2:00,M10.5.0/3:00
UID=623
USER=i2zate
_=porsche.pdf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:50:24.373

事实证明，**LIBPATH 不正确，Java 将什么传递**给分叉的流程实例。

## 1\. 步骤：获取 Ghostscript 的 LIBPATH：

经过大量的谷歌搜索，我发现了这个：

```
XXXXXXXX:i2zate:/home/i2zate>dump -Hv /usr/bin/gs

/usr/bin/gs:

                        ***Loader Section***
                      Loader Header Information
VERSION#         #SYMtableENT     #RELOCent        LENidSTR
0x00000001       0x00000137       0x00008118       0x000001ad

#IMPfilID        OFFidSTR         LENstrTBL        OFFstrTBL
0x0000000e       0x00062a68       0x00000e99       0x00062c15

                        ***Import File Strings***
INDEX  PATH                          BASE                MEMBER
0      /opt/freeware/lib:/opt/freeware/lib/gcc/powerpc-ibm-aix5.1.0.0/4.2.3:/opt/freeware/lib/gcc/powerpc-ibm-aix5.1.0.0/4.2.3/../../..:/usr/lib:/lib                   
1                                    libc.a              shr.o
2                                    libpthread.a        shr_comm.o
3                                    libpthread.a        shr_xpg5.o
4                                    libXt.a             shr4.o
5                                    libX11.a            shr4.o
6                                    libcairo.a          libcairo.so.2
7                                    libjpeg.a           libjpeg.so.62
8                                    libz.a              libz.so.1
9                                    libfontconfig.a     libfontconfig.so.1
10                                   libpng.a            libpng.so.3
11                                   libpaper.a          libpaper.so.1
12                                   libiconv.a          shr4.o
13                                   libdl.a             shr.o 
```

在这里你看到索引 0（不要问我，这意味着什么，这只是一个猜测，我需要那个）：/opt/freeware/lib: ***/opt/freeware/lib/gcc/powerpc-ibm-aix5.1.0 .0/4.2.3:/opt/freeware/lib/gcc/powerpc-ibm-aix5.1.0.0/4.2.3/../../..:/usr/lib:/lib***

## 2.步骤：在java中传递LIBPATH

我稍微改变了我的班级。DummyCaller 使用它获得的第一个参数作为分叉进程的 LIBPATH。查看更改的方法：

```
public static void main(String[] args) throws IOException, InterruptedException {
    printSystemProperties();
    System.out.println();
    printEnvironment();
    String[] command = new String[ args.length - 1 ];
    System.arraycopy(args, 1, command, 0, args.length-1);
    ProcessBuilder processBuilder = new ProcessBuilder( Arrays.asList(command));
    Map<String, String> env = processBuilder.environment();
    env.put("LIBPATH", args[0] );
    Process process = processBuilder.start();
    new StreamReader("OUT  ", process.getInputStream() ).start();
    new StreamReader("ERROR", process.getErrorStream() ).start();
    process.waitFor();
} 
```

所以第一个参数被添加到 ProcessBuilder 的环境中。

## 3\. 步骤：使用正确的 LIBPATH 进行调用

```
xiud0e02:i2zate:/home/i2zate>java -cp . biz.DummyCaller /opt/freeware/lib:/opt/freeware/lib/gcc/powerpc-ibm-aix5.1.0.0/4.2.3:/opt/freeware/lib/gcc/powerpc-ibm-aix5.1.0.0/4.2.3/../../..:/usr/lib:/lib /usr/bin/gs -dFIXEDMEDIA -dPDFFitPage -dFirstPage=1 -dLastPage=1 -dBATCH -dNOPAUSE -dNOPROMPT -dSAFER -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=0 -dDEVICEWIDTH=90 -dDEVICEHEIGHT=120 -dORIENT1=true -sDEVICE=jpeg  -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -sOutputFile=1.jpg porsche.pdf
System.getProperties():
com.ibm.cpu.endian=big
com.ibm.jcl.checkClassPath=
....
....
....
TSM=/usr/tivoli/tsm/client/ba/bin/
TZ=MET-1METDST,M3.5.0/2:00,M10.5.0/3:00
USER=i2zate
_=/usr/java6_64/jre/bin/java
OUT  : GPL Ghostscript 8.70 (2009-07-31)
OUT  : Copyright (C) 2009 Artifex Software, Inc.  All rights reserved.
OUT  : This software comes with NO WARRANTY: see the file PUBLIC for details.
OUT  : Processing pages 1 through 1.
OUT  : Page 1 
```

作品。凉爽的。**

# javascript - cocos2dJs 多行标签

> ID：11448262
> 
> 赞同：0
> 
> 时间：2012-07-12T08:56:13.607
> 
> 标签：javascript, html, cocos2d-iphone

不知道新版本0.2有没有办法在cocos2d-js中创建多行文本？

我一直在尝试一些事情，但没有奏效

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:42:49.870

它不在 cocos2d-iphone 中，如果任何其他 cocos2d 版本支持它，我会感到惊讶。

一种解决方法是拆分字符串并使用多个标签来显示每一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T05:54:31.183

cocos2d-html5 支持，查看：

Github 仓库：[https](https://github.com/cocos2d/cocos2d-html5) ://github.com/cocos2d/cocos2d-html5 站点：[http ://cocos2d-x.org/](http://cocos2d-x.org/)

# android - 我可以通过蓝牙从设备获取 VendorID、ProductID 吗？

> ID：11448266
> 
> 赞同：4
> 
> 时间：2012-07-12T08:56:28.753
> 
> 标签：android, bluetooth

我通过蓝牙连接到设备。我使用 BluetoothDevice.class 获取 mac 地址和名称。但我必须知道 VendorID、ProductID。在 iPhone 上是可能的。有什么适用于Android的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T10:53:58.013

检查此[官方 BT 规范详细信息](https://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&ved=0CFkQFjAE&url=https://www.bluetooth.org/docman/handlers/DownloadDoc.ashx?doc_id=41500&ei=Y2EoUszAL-Gd7QbjvIHYBg&usg=AFQjCNFUpTKtM8BQjYUZ5NIr_5-GYx_sFA&sig2=QnJCduukol4DWoWQjSF01Q&bvm=bv.51773540,d.ZGU)以了解如何做到这一点。

在第 10 页：

> “下面列出了 DI 服务记录属性..”

..你会发现表格后面有详细的规格。

# objective-c - 如何在 Objective C 中使用 DTO

> ID：11448267
> 
> 赞同：2
> 
> 时间：2012-07-12T08:56:29.473
> 
> 标签：objective-c, dto

我一直在 Jave 中使用数据传输对象，例如

```
public class AccountDEM
{
  private String userName;
  private String userAuthToken;
  private int user_Id;

  public void setuserName(String _userName)
  {
    this.userName=_userName;
  }
  public string getuserName()
  {
    return userName;
  }
 ...
} 
```

我如何在Objective C中使用相同的东西。可能“Objective C的属性”将达到我认为的目的。但是有人可以详细解释一下，如何使用Objective C的属性来编写DTO并有效地使用它们并保持内存安全（避免内存泄漏）。

如果可能，请尝试将上述代码转换为 Obj C。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:15:10.277

```
@interface AccountDEM
@property (nonatomic,retain) NSString* userName;
@property (nonatomic,retain) NSString* userAuthToken;
@property (nonatomic) int user_Id;
@end

@implementaion
@synthesize userName;
@synthesize userAuthToken;
@synthesize user_Id;
@end 
```

对于属性，您可以阅读[http://objective-c-properties.blogspot.in/](http://objective-c-properties.blogspot.in/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T11:18:28.277

现代答案：

```
@interface AccountDEM : NSObject

@property (nonatomic) NSString *userName;
@property (nonatomic) NSString *userAuthToken;
@property (nonatomic) NSNumber *user_Id;

@end

@implementaion

// no need in additional code

@end 
```

不要忘记从 NSObject 子类化（大多数情况下；您也可以从 NSProxy 子类化）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-13T15:09:03.607

我认为在我的情况下，DTO 模式应该包含对象读取/写入外部格式，如字典

```
// .h
@interface AccountDEM

@property (nonatomic, copy) NSString* userName;
@property (nonatomic, copy) NSString* userAuthToken;
@property (nonatomic) int userIdentifier;

// transfer between dictionary and object
@property (nonatomic, readonly) NSDictionary *serialized;

- (instancetype) initWithDictionary:(NSDictionary *)serialized;

@end

// .m
@interface AccountDEM

@property (nonatomic, strong) NSDictionary *dictionaryRepresentation; 

@end

@implementaion

- (void)setObject:(id)object forKey:(id<NSCopying>)key {
    if (key) {
        if (obj) {
            NSMutableDictionary *dictionary = [self.dictionaryRepresentation mutableCopy];
            [dictionary removeObjectForKey:key];
            self.dictionaryRepresentation = [dictionary copy];
        }
        else {
            NSMutableDictionary *dictionary = [self.dictionaryRepresentation mutableCopy];
            dictionary[key] = obj;
            self.dictionaryRepresentation = [dictionary copy];
        }
    }
}

- (id)objectForKey:(id<NSCopying>)key {
    if (!key) {
        return nil;
    }

    return self.dictionaryRepresentation[key];
}

#pragma mark - Custom Getters/Setters
- (void)setUserName:(NSString *)userName {  
    [self setObject:userName forKey:@"UserName"];
}

- (NSString *)userName {
    return
    [self objectForKey:@"UserName"];
}

- (void)setUserAuthToken:(NSString *)userAuthToken {    
    [self setObject:userAuthToken forKey:@"UserAuthToken"];
}

- (NSString *)userAuthToken {
    return  
    [self objectForKey:@"UserAuthToken"];
}

- (void)setUserIdentifier:(int)userIdentifier {
    [self setObject:@(userIdentifier) forKey:@"UserIdentifier"];
}

- (int)userIdentifier {
    return  
    [[self objectForKey:@"UserIdentifier"] intValue];
}

#pragma mark - Transfer
- (NSDictionary *)serialized {
    return self.dictionaryRepresentation;
}

- (instancetype) initWithDictionary:(NSDictionary *)serialized {
    self = [super init];

    if (self) {
        // any validation about serialized object
        // and put it into dictionaryRepresentation
        _dictionaryRepresentation = serialized;
    }
    return self;
}

@end 
```

# model-view-controller - 需要一些关于 MVC 模式的说明

> ID：11448271
> 
> 赞同：0
> 
> 时间：2012-07-12T08:56:37.740
> 
> 标签：model-view-controller

我非常了解 MVC（至少我认为我知道）并且我已经使用这种方法开发了很多应用程序。不过有一件事让我很烦恼：

在我看到的每个模型图中，它被绘制为一个三角形，控制器和视图/模型之间有直接连接，但视图和模型之间也有连接（即模型和视图直接说话，中间没有控制器）。

在我作为开发人员的所有这些年里，模型和视图之间总是完全分离，控制器充当中间人，据我所知，这也是最佳实践。

那么在什么情况下我希望模型直接与视图对话？你能给我一个简单的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:02:44.963

模型不与视图对话。但是视图显示模型中包含的数据，并从模型中调用方法来显示它们。这可能就是您的图表中它们之间存在链接的原因：

1.  控制器从数据库（通过服务层）获取模型并将其存储在请求中
2.  控制器调度到适当的视图
3.  视图从模型中获取数据并生成 HTML

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:52:10.243

一些带有“监督控制器”的 Model-View-Presenter 设计模式允许直接从 Model 更新 View，用于简单的数据绑定任务：

[http://msdn.microsoft.com/en-us/library/ff647543.aspx](http://msdn.microsoft.com/en-us/library/ff647543.aspx)

还有 ModelView - ViewModel 模式，但它与 MVC 类似，只是将 Controller 逻辑移至 View。一些 WPF 应用程序使用 MV-VM 从数据源快速更新 UI：

[http://russelleast.wordpress.com/2008/08/09/overview-of-the-modelview-viewmodel-mvvm-pattern-and-data-binding/](http://russelleast.wordpress.com/2008/08/09/overview-of-the-modelview-viewmodel-mvvm-pattern-and-data-binding/)

但是这两种替代方案（MVP w/Supervising C 和 MV-VM）实际上只是 MVC 的变体。

# java - 在 JBoss 7 上运行 Flyway 时出错

> ID：11448275
> 
> 赞同：0
> 
> 时间：2012-07-12T08:56:52.977
> 
> 标签：java, jboss, flyway

我正在尝试设置我的应用程序，以便当它部署在任何环境中时它会自动升级数据库，所以我在 Spring 配置中添加了以下内容：

```
<bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource">
<property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />
<property name="url"    value="jdbc:oracle:thin:@${db.host}:${db.port}:${db.database}" />
    <property name="username" value="${db.username}" />
    <property name="password" value="${db.password}" />
    <property name="maxActive" value="4" />
    <property name="maxWait" value="5000" />
    <property name="defaultAutoCommit" value="false" />
    <property name="defaultReadOnly" value="false" />
    <property name="validationQuery" value="select '1' from DUAL" />
</bean>
<!-- ADDED IN AN ATTEMPT TO FIX THE PROBLEM -->
<bean id="flyway-init" class="com.googlecode.flyway.core.Flyway" init-method="init">
<property name="dataSource" ref="dataSource" />
</bean>
<bean id="flyway" class="com.googlecode.flyway.core.Flyway" init-method="migrate" depends-on="flyway-init">
    <property name="dataSource" ref="datasource"/>
</bean> 
```

但是当我在 JBoss 7 中运行它时，出现以下错误：

`com.googlecode.flyway.core.validation.ValidationException: Found non-empty schema 'WMYERS' without metadata table! Use init() first to initialize the metadata table.`

我已经对数据库运行了一个flyway clean-migrate，所以它已经设置好并准备好了，并且存在SCHEMA_HISTORY表，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:09:23.103

Flyway 默认检查非空模式是否已正确初始化。此检查确保 Flyway 在配置错误的情况下不会迁移或清理错误的数据库。迁移失败并引发此异常，因为当您的数据库架构有一些数据时，具有定义名称的元数据表应该存在并且非空。元数据表可能是手动修改的。

# javascript - this.id 在随后的“每个”循环期间捕获到 var 更改中？

> ID：11448276
> 
> 赞同：0
> 
> 时间：2012-07-12T08:56:59.577
> 
> 标签：javascript, jquery, css

所以看看这个jsfiddle；[这里](http://jsfiddle.net/w3fPS/)

我正在尝试做的事情；

一系列“链接”，每个链接下方都有一个最初隐藏的内容 div。

单击链接应该 A) 显示该链接的 div 内容 B) 如果任何其他链接的 div 内容已打开，请将其关闭。

即，一次只能打开一个 div 内容部分。

在`click`处理程序的顶部，我将单击的链接的 id 捕获到一个 var 中。但是，在`each`通话期间，这似乎正在更新（如我出于演示目的而在那里的警报通话所示）。

```
$('.link-part').click(function() {
    var clickedId = this.id;
    $('.link-part').each(function(i, obj) {
        alert(clickedId + " " + obj.id);
        if(clickedId = obj.id) {
            $('#' + obj.id + 'div').slideToggle(500);
        } else {
            if('none' != $('#' + obj.id + 'div').css('display')) {
                $('#' + obj.id + 'div').slideToggle(200);
            }
        }
    });
    return false;
});​ 
```

为什么是这样？我如何让它成为一个非可变变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:59:44.807

在进行比较时，您刚刚错过了一个等号，请更改：

```
if(clickedId = obj.id) { 
```

到

```
if(clickedId == obj.id) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:02:07.987

作为替代方案，您不需要`each`循环来获得这种效果，试试这个：

```
$('.link-part').click(function() {
    $('.div-part:visible').slideUp()
    $(this).next('.div-part').slideDown()
    return false;
}); 
```

[演示](http://jsfiddle.net/w3fPS/4/)

# javascript - javascript loadUrl 和 loadData 的区别

> ID：11448284
> 
> 赞同：4
> 
> 时间：2012-07-12T08:57:30.873
> 
> 标签：javascript, android

我尝试在 Android webview 中加载一个带有 ajax 发布请求的 html 页面。

当我用 loadUrl 加载 webview 时，javascript 工作正常，但是当我尝试用 loadData 加载（我需要它）时，我得到一个错误：“ `NETWORK_ERR: XMLHttpRequest Exception 101`”。此错误听起来像是访问控制起源问题。

parseJsoup 函数将 html 页面中的某些字符串替换为好的字符串。我检查了传递给 loadData 的数据，并且脚本部分没有更改。

我的 oncreate 功能：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);        
    String html = parseJsoup("index.html");

    setContentView(R.layout.main);
    myBrowser = (WebView)findViewById(R.id.mybrowser);
    myBrowser.getSettings().setJavaScriptEnabled(true); 
    myBrowser.setWebViewClient(new MyWebViewClient());
    //myBrowser.loadUrl("file:///android_asset/index.html");            
    myBrowser.loadDataWithBaseURL("", html, "text/html", "utf-8", null);
} 
```

还有我的 javascript 代码：

```
$.ajaxSetup({
  contentType: "application/json; charset=utf-8",
  datatype: "json",
  async: false,
});

$.ajax({
    type: "POST",
    url: "my url",
    data: 'my data',        
    success: function(data){
    // Do some action here with the data variable that contains the resulting message
      document.write("OK "+JSON.stringify(data));
      console.log(data);
    },
    error: function(data){
      document.write("KO "+JSON.stringify(data));
      console.log(data);
    }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T08:48:26.863

假设你的意思是，`android.webkit.WebView.loadDataWithBaseURL`当你说 loadData 时，`android.webkit.WebView.loadUrl`当你说 loadUrl 时。

从[文档](http://developer.android.com/reference/android/webkit/package-summary.html)来看，它们之间的唯一区别是，loadURL 呈现一个具有您设置的 url 的 webkit。另一方面，loadData渲染webkit，那个源码来自一个参数，baseURL也是一个参数。

您收到的 javascript 错误消息主要与您尝试跨域 ajax 请求时有关。对于您的情况，这似乎更合理，因为您的方法之间的唯一区别似乎是其中一个是实际 URL，另一个是动态创建的网页，没有可靠的 url。

并且还来自[loadDataWithBaseURL 的文档](http://developer.android.com/reference/android/webkit/WebView.html#loadDataWithBaseURL%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)

> “...基本 URL 用于解析相对 URL 和应用 JavaScript 的同源策略时。”

你没有设置 baseURL 参数可能会给我们关于这个问题的线索。

尝试将一些虚拟域名或您拥有的域分配给 baseURL，并将此域附加到您的 javascript ajax 资源端点。如：

```
myBrowser.loadDataWithBaseURL("http://mydomain/", html, "text/html", "utf-8", null); 
```

在 Javascript 上：

```
$.ajax({
    type: "POST",
    url: "http://mydomain/my url",
    data: 'my data',        
    success: function(data){
    // Do some action here with the data variable that contains the resulting message
      document.write("OK "+JSON.stringify(data));
      console.log(data);
    },
    error: function(data){
      document.write("KO "+JSON.stringify(data));
      console.log(data);
    }
}); 
```

# .net - .net 目录类必须关闭句柄？

> ID：11448286
> 
> 赞同：0
> 
> 时间：2012-07-12T08:57:39.060
> 
> 标签：.net

当使用 EnumerateFiles 或 GetFiles 或 GetDirectories 之类的 .NET Directory 类方法时，我假设它们持有非托管句柄。那个把手是怎么释放的？他们在使用 IDispose 吗？我的意思是有手柄泄漏的可能性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:59:58.150

不，`Directory`不实现`IDisposable`，实际上它的所有方法都是静态的。非托管句柄的释放必须在每个方法中 - 如果您真的想看到更多，请尝试使用 Reflector 之类的东西来查看它。

事实上，如果你这样做，你会发现一个名为 的内部类`FileSystemEnumerableIterator<T>`，它确实实现`IDisposable`并且它的`Dispose`方法关闭了句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:00:30.097

> 我的意思是有手柄泄漏的可能性吗？

总是有*可能*的，但是这些类已经在许多生产系统中使用并且经过了彻底的测试——它们没有泄漏。

如果您想知道它们是如何实现的 - 使用 ILSpy 或 Reflector 之类的反汇编程序来查看它是如何完成的。

# cmd - 自动下载mp3文件

> ID：11448294
> 
> 赞同：-1
> 
> 时间：2012-07-12T08:58:03.887
> 
> 标签：cmd

我需要一些帮助。

我经营一个使用可下载新闻提要的广播电台。目前我每小时手动下载一次。

我想要一个脚本，最好是 cmd，所以运行它不需要花哨的东西，它将每小时下载一次文件（使用 Windows 任务调度程序）并将其放在某个文件夹中。下载不受用户/密码保护，它是免费的并受版权保护。

可以请一些善良的灵魂启动我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:08:22.877

使用[wget](http://en.wikipedia.org/wiki/Wget)。Windows 版本作为[UnxUtils](http://unxutils.sourceforge.net/)包的一部分提供。

使用它很简单：

```
wget http://www.example.com/myfile.mp3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-17T10:40:50.667

如果你想使用**纯批处理**，你可能想使用：

1.  [`CERTUTIL`](https://www.dostips.com/forum/viewtopic.php?t=8485)

    ```
    certutil -urlcache -split -f <url> 
    ```

2.  `BITSADMIN`

    ```
    bitsadmin /transfer myDownloadJob /download /priority normal <url> <destination> 
    ```

要自动执行任务，请使用[`schtasks`](https://docs.microsoft.com/windows-server/administration/windows-commands/schtasks)：

```
schtasks /create /tn "MyTask" /sc hourly /mo 1 /tr "certutil -urlcache -split -f <url>" 
```

# jquery - 滑动后的Jquery Slider设置值

> ID：11448296
> 
> 赞同：2
> 
> 时间：2012-07-12T08:58:07.263
> 
> 标签：jquery, slider, slide

我正在尝试在幻灯片事件中设置滑块的值。这是我的代码：

```
 $(document).ready(function () {
            $("#slider").slider({

                min: 0,
                max: 10000,
                step: 1, // Use this determine the amount of each interval
                values: [0], // The default range
                slide: function (event, ui) {
                    var slider = $("#slider").slider({
                        animate: true
                    });
                    slider.slider('value', 500);
                }
            });
        }); 
```

我错过了什么？我似乎无法动画和设置滑块的值。

**编辑：好的，现在我可以设置滑块的值，但它发生得太快了。我希望它慢慢达到我设定的值。这是我编辑的代码：**

```
$(document).ready(function () {
            $("#slider").slider({

                min: 0,
                max: 10000,
                animate: "slow",
                step: 1,// Use this determine the amount of each interval
               // values: [0] // The default range
               change: function (event, ui) {
                   $("#slider").slider('value', 500);
                }
            });
        }); 
```

我怎样才能让它慢慢移动到 500 而不是立即设置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:05:57.367

**参考**：

[**jsFiddle**](http://jsfiddle.net/zFsZV/)

移动滑块按钮并释放它后，滑块按钮将动画回锁定值。

**代码：**

```
$(document).ready(function() {

    $('#slider').slider({
        min: 0,
        max: 10000,
        // Values "fast", "normal", "slow", or duration can be used.
        animate: 1500,
        step: 1,
        // Starting value is 500
        value: 500,
        animate: true,
        change: function(){
           // This setTimeout will allow the slider to animated correctly.
           setTimeout("$('#slider').slider('value', 500);", 350);
        }
    });

    // On page load, animate the slider to this value of 500.
    $('#slider').slider('value', 500);

}); 
```

* * *

**状态更新：**对于其他特定要求， SO 海报需要`stop:`事件而不是`change:`UI 滑块中的事件，但在使用时没有看到视觉差异。

# android - 使用反射方法android创建蓝牙服务器

> ID：11448297
> 
> 赞同：0
> 
> 时间：2012-07-12T08:58:07.723
> 
> 标签：android

我需要有一个 android 蓝牙服务器应用程序。我已经成功创建了一个使用反射方法的客户端，如下所示：

```
Method m = zee.getClass().getMethod("createRfcommSocket", new Class[] { int.class });
sock = (BluetoothSocket) m.invoke(device, 1); 
```

但是有什么办法可以调整这个代码片段，以便我的设备可以充当服务器而不是客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:28:27.270

如果您使用两个 android 设备，您可以只创建一个不使用 reelection 并使用 uuids 的服务器。大多数设备都使用通用 uuid（例如蓝牙模块。抱歉，您必须查找它或查看我以前的问题），但使用 uuid 更容易。

# maven - 生命周期配置 Maven 错误未涵盖插件执行

> ID：11448298
> 
> 赞同：17
> 
> 时间：2012-07-12T08:58:11.693
> 
> 标签：maven

我导入了一个现有的 Maven 项目，但我在 pom.xml 中遇到了一些错误：

```
Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-

 compiler-plugin:2.3.2:compile (execution: default-compile, phase: compile) pom.xml 

 /org.squashtest.csp.tools.unittest line 50 Maven Project Build Lifecycle Mapping Problem 
```

但我不明白为什么，

这是 pom.xml ：

```
 <?xml version="1.0"?>
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org  
  /2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0   
  http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
<parent>
    <artifactId>squashtest-csp-tools</artifactId>
    <groupId>org.squashtest.tm</groupId>
    <version>1.2.0.RELEASE</version>
</parent>
<artifactId>org.squashtest.csp.tools.unittest</artifactId>
<name>Squashtest CSP - Tools module - Unit tests library</name>
<description>Library  of classes used for unit-testing other Squashtest        
     components</description>

<dependencies>
    <!-- ====== GROOVY ====== -->
    <dependency>
        <groupId>org.codehaus.groovy</groupId>
        <artifactId>groovy-all</artifactId>
        <scope>compile</scope>
    </dependency>
    <!-- ====== /GROOVY ====== -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>org.squashtest.org.hibernate.core</artifactId>
        <version>${hibernate.version}</version>
        <scope>compile</scope>
        <optional>true</optional>
    </dependency>
    <dependency>
        <groupId>org.unitils</groupId>
        <artifactId>unitils-database</artifactId>
        <version>3.1</version>
        <scope>compile</scope>
        <optional>true</optional>
        <exclusions>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-nop</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
</dependencies>
<build>
    <sourceDirectory>src/main/groovy</sourceDirectory>
    <testSourceDirectory>src/test/groovy</testSourceDirectory>
    <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-compiler-plugin</artifactId>
      <executions><execution></execution></executions>
      <version>2.3.2</version>
      </plugin> 
    </plugins>
 </build>
</project> 
```

先感谢您

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-27T19:53:56.617

这是 Groovy maven 配置的问题。更具体地说，m2e 连接器问题通常是一场噩梦。[此链接包含有关m2e 连接器混乱的](http://grumpyapache.blogspot.com/2011/08/mess-that-is-m2e-connectors.html)良好信息。

## 概括

要解决此问题，您可以获取 springsource 提供的 m2e 连接器。

[http://dist.springsource.org/release/GRECLIPSE/e4.2/](http://dist.springsource.org/release/GRECLIPSE/e4.2/)

## 细节

要使用它：

1.  单击帮助 > 安装新软件...
2.  将上面的 URL 粘贴到“使用：”字段中
3.  展开“Groovy-Eclipse 的 m2e 配置器”
4.  选择第一个选项“Groovy-Eclipse m2e Integration”并安装它

![安装 Groovy-Eclipse M2E Integratoin](../Images/5b4f2a0b3bee796ada9f8138db4eff89.png)

我还建议从 Eclipse Marketplace 安装“Groovy/Grails Tool Suite for Eclipse”（GGTS）。我刚刚在 Eclipse Kepler 中完成了这两项（安装 GGTS，然后是连接器），它解决了您在上面遇到的确切问题。此修复程序也适用于 Juno。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T09:32:34.037

在 Maven 中，在此错误之前需要检查的东西很少。

1.  你能从 .m2 Repository 下载 jars 吗？-> 为此只需删除 .m2 文件夹下的存储库文件夹并尝试更新 Maven 项目。然后您可以在 .m2 文件夹下看到新的 Repository 文件夹。-> 检查所有的 maven-plugin jar 都在 org/apache/maven 下

2.  检查您是否能够打开您在 Settings.xml 文件中提到的存储库 url -> 在任何浏览器中打开 ths url 并检查您是否能够打开。

3.  有时第三方存储库 jar 可能已损坏。-> 这将由第三方人员负责 -> 例如：如果您指向 Nexus 存储库，他们必须再次上传所需的 maven jar。有时上传 jar 文件可能已损坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-04T06:06:08.987

对我有用的是安装 M2E Groovy-Eclipse 集成，但还要向 maven 编译器插件添加更多配置，以便使用 java 和 groovy 类：

```
<plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.1</version>
    <configuration>
       <compilerId>groovy-eclipse-compiler</compilerId>
       <source>1.7</source>
           <target>1.7</target>
    </configuration>
    <dependencies>
                <dependency>
                    <groupId>org.codehaus.groovy</groupId>
                    <artifactId>groovy-eclipse-compiler</artifactId>
                    <version>2.8.0-01</version>
                </dependency>
                <dependency>
                    <groupId>org.codehaus.groovy</groupId>
                    <artifactId>groovy-eclipse-batch</artifactId>
                    <version>2.1.8-01</version>
                </dependency>
    </dependencies>
</plugin> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-08T02:16:40.230

我有一个类似的问题。日食说

> 生命周期配置未涵盖插件执行：org.apache.maven.plugins:maven-checkstyle-plugin:3.0.0:checkstyle（执行：默认，阶段：验证）

去掉checkstyle后，还有其他类似的问题。

为了解决这个问题，我单击了快速修复选项：“发现新的 m2e 连接器”。Eclipse 自动列出需要的内容。您所要做的就是单击“完成”按钮。

我的 Eclipse 版本是 Oxygen.2(4.7.2)。希望这可以帮助。

# sql - Oracle 根据输入参数更新字段 A 或字段 B

> ID：11448302
> 
> 赞同：1
> 
> 时间：2012-07-12T08:58:15.303
> 
> 标签：sql, oracle, input, parameters

我希望能够根据输入参数的值选择表中的哪个字段由我的存储过程更新。如果输入字段等于“草稿”，则应更新**id_draft**，否则应更新**id**。这可能吗？

这是我失败的尝试之一，可能有助于说明我想要做什么：

```
CREATE OR REPLACE PROCEDURE sp_test (input_field VARCHAR DEFAULT NULL)
 IS
   BEGIN
      UPDATE TABLE
      SET
        CASE
            WHEN input_field = 'draft' THEN id_draft
            ELSE id
   END = 'x' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:01:28.793

您不能使用 CASE 语句来更改查询结构本身。它只返回数据，它是一个函数。

您所拥有的 ( `CASE WHEN input_field = 'draft' then id_draft ELSE id END`) 返回字段或字段中的***值***。好像在做这个...`id``id_draft`

```
UPDATE
  yourTable
SET
  CASE WHEN 'abc' = 'draft' THEN 123 ELSE 789 END = 'x' 
```

相反，您需要将 CASE 语句放在右侧...

```
UPDATE
  yourTable
SET
  id       = CASE WHEN input_field = 'draft' THEN id  ELSE 'x'      END,
  id_draft = CASE WHEN input_field = 'draft' THEN 'x' ELSE id_draft END 
```

但是，实际上，你这样做可能会更好......

```
IF (input_field = 'draft')
  UPDATE yourTable SET id_draft = 'x'
ELSE
  UPDATE yourTable SET id = 'x' 
```

**编辑：***

要使用另一个表中的值而不是 just `'x'`，您可以使用类似这样的东西......

```
UPDATE
  yourTable
SET
  id       = CASE WHEN input_field = 'draft' THEN yourTable.id  ELSE otherTable.x       END,
  id_draft = CASE WHEN input_field = 'draft' THEN otherTable.x  ELSE yourTable.id_draft END
FROM
  otherTable
WHERE
  otherTable.a=? AND otherTable.b=? 
```

# cluster-computing - Veritas SFHA 中的 SG 资源列表

> ID：11448303
> 
> 赞同：0
> 
> 时间：2012-07-12T08:58:17.350
> 
> 标签：cluster-computing

如何提取（从`main.cf`或通过命令）按服务组划分的资源列表。

例如，我有一个多 SG 集群，我需要为每个 SG 打印：DG、Vol 和挂载点。如何在不必解析`main.cf`文件的情况下做到这一点？

我需要制作一个脚本、图形解决方案，因为不允许使用 VOM 或 Veritas Cluster Console。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:48:13.783

如果您的集群位于 unix 平台上，请在 shell 提示符下尝试此命令（最好以“root”用户身份使用，但其他用户也可以使用）

野兔展示| grep "your_SG_name_here" > SG_resources

您将在 SG_resources 文件中找到属于该服务组的所有信息。

如果您对命令、grep、awk 和 sed 有点熟悉，那么将其解析为 DG Volume 和挂载点信息将是一项非常少的工作。

如果你卡在某个地方，把它贴在这里，你会得到答案，我相信

# java - 撒克逊人：无法调用静态方法，需要来自 XSLT 的带有 xs:string 参数的字符串

> ID：11448305
> 
> 赞同：1
> 
> 时间：2012-07-12T08:58:47.833
> 
> 标签：java, xslt, saxon

我正在尝试从我的 XSLT 样式表中调用静态 Java 方法：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                              xmlns:digest="java:org.apache.commons.codec.digest.DigestUtils">
<xsl:output method="xml" encoding="utf-8" indent="yes"/>

<xsl:template match="user">
  <user>
    <firstname>
      <xsl:value-of select="value[@type='firstname'][1]" />
    </firstname>
    <lastname>
      <xsl:value-of select="value[@type='name'][1]" />
    </lastname>
    <password>
      <xsl:variable name="password" select="string(value[@type='password'][1])" />
      <xsl:value-of select="digest:md5Hex($password)"
                    disable-output-escaping="yes" />
    </password>
  </user>
</xsl:template> 
```

找到了 DigestUtils 类和静态 md5Hex 方法 [1]。问题是，调用该方法有三种可能的方式，即使用 byte[]、InputStream 或 String。鉴于“密码”变量的类型为 xs:string，我假设 Saxon 会自动选择最后一个选项。但相反，它坚持使用 byte[] 方法并相应地失败：

```
[...]
Loading org.apache.commons.codec.digest.DigestUtils
Looking for method md5Hex in Java class class org.apache.commons.codec.digest.DigestUtils
Number of actual arguments = 1
[...]
Trying method md5Hex: name matches
Method is static
Method has 1 argument; expecting 1
Found a candidate method:
    public static java.lang.String org.apache.commons.codec.digest.DigestUtils.md5Hex(byte[])
Trying method md5Hex: name matches
Method is static
Method has 1 argument; expecting 1
Found a candidate method:
    public static java.lang.String org.apache.commons.codec.digest.DigestUtils.md5Hex(java.io.InputStream) throws java.io.IOException
Trying method md5Hex: name matches
Method is static
Method has 1 argument; expecting 1
Found a candidate method:
    public static java.lang.String org.apache.commons.codec.digest.DigestUtils.md5Hex(java.lang.String)
[...]
Finding best fit method for arguments
Trying option 0: public static java.lang.String org.apache.commons.codec.digest.DigestUtils.md5Hex(byte[])
Conversion preferences are [24]
Trying option 1: public static java.lang.String    org.apache.commons.codec.digest.DigestUtils.md5Hex(java.io.InputStream) throws java.io.IOException
Conversion preferences are [80]
Trying option 2: public static java.lang.String org.apache.commons.codec.digest.DigestUtils.md5Hex(java.lang.String)
Conversion preferences are [80]
Eliminating option 1
Eliminating option 2
Number of candidate methods remaining: 1
Error at xsl:template on line 14 column 30 of migrate_users.xsl:
  Cannot convert from xs:string to byte
Failed to compile stylesheet. 1 error detected. 
```

有没有办法强制撒克逊人使用字符串方法？

[1] [http://commons.apache.org/codec/api-release/org/apache/commons/codec/digest/DigestUtils.html#md5Hex(java.lang.String](http://commons.apache.org/codec/api-release/org/apache/commons/codec/digest/DigestUtils.html#md5Hex(java.lang.String) )

-- **更新：**一位同事刚刚找到了该公司的 Saxon 9.4PE 许可证密钥。不幸的是，错误仍然存​​在，唯一改变的是 byte[] 方法的转换首选项从 24 变为 31。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:22:47.327

您需要输入变量：

```
<xsl:variable as="xs:string" name="password" select="string(value[@type='password'][1])" /> 
```

或在通话中投射：

```
<xsl:value-of select="digest:md5Hex(xs:string($password))"
                disable-output-escaping="yes" /> 
```

xs 命名空间定义为：

```
xmlns:xs="http://www.w3.org/2001/XMLSchema" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T10:32:33.713

Saxon 尝试根据对所提供参数类型的静态分析来决定在编译时使用哪种方法。如果推断的静态类型允许序列（与单例不同），那么期望数组或集合的方法将始终胜过期望单例的方法：因此，期望 byte[] 的方法是首选的事实意味着Saxon 无法确定提供的值是单例。显然，转换为字符串足以实现这种推断。

令人失望的是，在变量声明中添加类型信息是不够的。原因是在编译过程中，在类型信息从变量声明传播到变量引用之前过早地决定使用哪种方法。我将研究在未来版本中改进它的可能性。

# php - 使用 PHP/MySQL 导入 CSV 数据

> ID：11448307
> 
> 赞同：33
> 
> 时间：2012-07-12T08:58:52.213
> 
> 标签：php, mysql, database, csv, import

我在尝试从 CSV 导入数据时遇到了一些问题，并且有几个我自己还没有解决的问题。

首先，这是我的代码，可以帮助您正确看待事物（整理了一下，删除了 CSS 和 DB 连接）：

```
<body>
<div id="container">
<div id="form">

<?php
$deleterecords = "TRUNCATE TABLE tablename"; //empty the table of its current records
mysql_query($deleterecords);

//Upload File
if (isset($_POST['submit'])) {

    if (is_uploaded_file($_FILES['filename']['tmp_name'])) {
        echo "<h1>" . "File ". $_FILES['filename']['name'] ." uploaded 
 successfully." . "</h1>";
        echo "<h2>Displaying contents:</h2>";
        readfile($_FILES['filename']['tmp_name']);
    }

    //Import uploaded file to Database
    $handle = fopen($_FILES['filename']['tmp_name'], "r");

    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $import="INSERT into importing(text,number)values('$data[0]','$data[1]')";

        mysql_query($import) or die(mysql_error());
    }

    fclose($handle);

    print "Import done";

//view upload form
} else {

    print "Upload new csv by browsing to file and clicking on Upload<br />\n";

    print "<form enctype='multipart/form-data' action='upload.php' method='post'>";

    print "File name to import:<br />\n";

    print "<input size='50' type='file' name='filename'><br />\n";

    print "<input type='submit' name='submit' value='Upload'></form>";

}

?>

</div>
</div>
</body> 
```

它基本上是对我在对各种方法进行多次尝试后发现的一个示例的改编。

我的CSV有两列数据，第一列是文本，第二列是整数数据库中的表也有两列，第一列称为“文本”，第二列是“数字”

所以我的问题是：

1.  正在上传的文本在每个字段中都显示为 0，我不知道为什么
2.  我一直在阅读有关以“”结尾的数据，如果发生这种情况，我将如何对其进行排序？
3.  如何忽略标题等的 CSV 的前 X 行？
4.  在整个过程中数据格式是否发生了变化，还是可以在图表中使用？例如，一旦将小数放入数据库中，小数会保持小数吗？

我认为这涵盖了所有内容，在此先感谢您的帮助！

编辑：

刚做了10000条记录上传测试，报错：

“致命错误：超过 30 秒的最大执行时间”

有什么想法吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-12T10:02:01.347

前几天我回答了一个几乎相同的问题：[Save CSV files into mysql database](https://stackoverflow.com/questions/11432511/save-csv-files-into-mysql-database/11432767)

MySQL 有一个特性`LOAD DATA INFILE`，它允许它直接在单个 SQL 查询中导入 CSV 文件，而根本不需要通过 PHP 程序在循环中处理它。

简单的例子：

```
<?php
$query = <<<eof
    LOAD DATA INFILE '$fileName'
     INTO TABLE tableName
     FIELDS TERMINATED BY '|' OPTIONALLY ENCLOSED BY '"'
     LINES TERMINATED BY '\n'
    (field1,field2,field3,etc)
eof;

$db->query($query);
?> 
```

就这么简单。

没有循环，没有大惊小怪。而且比用 PHP 解析要快得多*。*

MySQL手册页在这里：[http ://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

希望有帮助

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T09:01:07.173

```
$i=0;
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
if($i>0){
    $import="INSERT into importing(text,number)values('".$data[0]."','".$data[1]."')";
    mysql_query($import) or die(mysql_error());
}
$i=1;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T09:12:26.710

letsay $infile = a.csv //需要导入文件。

```
class blah
{
 static public function readJobsFromFile($file)
{            
    if (($handle = fopen($file, "r")) === FALSE) 
    {
        echo "readJobsFromFile: Failed to open file [$file]\n";
        die;
    }

    $header=true;
    $index=0;
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) 
    {
        // ignore header
        if ($header == true)
        {
            $header = false;
            continue;
        }

        if ($data[0] == '' && $data[1] == '' ) //u have oly 2 fields
        {
            echo "readJobsFromFile: No more input entries\n";
            break;                        
        }            

        $a      = trim($data[0]);
        $b   = trim($data[1]);                 

        if (check_if_exists("SELECT count(*) FROM Db_table WHERE a='$a' AND b='$b'") === true)
        {

                $index++;
            continue;    
        }            

        $sql = "INSERT INTO DB_table SET a='$a' , b='$b' ";
        @mysql_query($sql) or die("readJobsFromFile: " . mysql_error());            
        $index++;
    }

    fclose($handle);        
    return $index; //no. of fields in database.
} 
function
check_if_exists($sql)
{
$result = mysql_query($sql) or die("$sql --" . mysql_error());
if (!$result) {
    $message  = 'check_if_exists::Invalid query: ' . mysql_error() . "\n";
    $message .= 'Query: ' . $sql;
    die($message);
}

$row = mysql_fetch_assoc ($result);
$count = $row['count(*)'];
if ($count > 0)
    return true;
return false;
}

$infile=a.csv; 
blah::readJobsFromFile($infile);
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-12T09:57:20.427

```
set_time_limit(10000);

$con = mysql_connect('127.0.0.1','root','password');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("db", $con);

$fp = fopen("file.csv", "r");

while( !feof($fp) ) {
  if( !$line = fgetcsv($fp, 1000, ';', '"')) {
     continue;
  }

    $importSQL = "INSERT INTO table_name VALUES('".$line[0]."','".$line[1]."','".$line[2]."')";

    mysql_query($importSQL) or die(mysql_error());  

}

fclose($fp);
mysql_close($con); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-31T09:48:15.370

我认为解析 csv 时要记住的主要事情是它遵循一些简单的规则：

a）它是一个文本文件，很容易打开 b）每一行都由行尾确定 \n 所以首先将字符串分成几行 c）每行/行都有由逗号确定的列，所以用逗号分割每一行以获得一个数组列数

[阅读这篇文章](http://php-addict.com/upload-import-csv-mysql-database-php/)，看看我在说什么

一旦你掌握了它并变得非常有用，它实际上很容易做到。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-28T04:39:33.290

数据库连接：

```
 try {
        $conn = mysqli_connect($servername, $username, $password, $db);
        //echo "Connected successfully"; 
    } catch (exception $e) {
        echo "Connection failed: " . $e->getMessage();
    } 
```

读取**CSV**文件并上传到数据库表的代码。

```
 $file = fopen($filename, "r");
            while (($getData = fgetcsv($file, 10000, ",")) !== FALSE) {
                $sql = "INSERT into db_table 
                   values ('','" . $getData[1] . "','" . $getData[2] . "','" . $getData[3] . "','" . $getData[4] . "','" . $getData[5] . "','" . $getData[6] . "')";
                $result = mysqli_query($conn, $sql);
                if (!isset($result)) {
                    echo "<script type=\"text/javascript\">
                            alert(\"Invalid File:Please Upload CSV File. 
                            window.location = \"home.do\"
                          </script>";
                } else {
                    echo "<script type=\"text/javascript\">
                        alert(\"CSV File has been successfully Imported.\");
                        window.location = \"home.do\"
                    </script>";
                }
            }
            fclose($file); 
```

# tmux - tmux 通过键入开始搜索

> ID：11448308
> 
> 赞同：2
> 
> 时间：2012-07-12T08:58:58.667
> 
> 标签：tmux

当我输入一些东西（比如在 vim 中）时，如何让 tmux 开始搜索？

实际上，我有（tmux 的 vi 模式）：

*   进入复制模式：[
*   进入搜索模式：/
*   我输入一些东西，然后按“Enter”。每次更改搜索模式后，每次都输入“Enter”，这是非常无聊的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T12:48:31.317

tmux 目前不支持增量搜索，但是已经提出[了这个特性的请求。](http://sourceforge.net/tracker/index.php?func=detail&aid=3445937&group_id=200378&atid=973265)

# facebook - Facebook 评论不会出现在 Backbonejs 视图中

> ID：11448309
> 
> 赞同：0
> 
> 时间：2012-07-12T08:59:03.040
> 
> 标签：facebook, backbone.js, facebook-like

我正在为我的应用程序使用 Backbonejs，并且我正在尝试将 Facebook 评论和喜欢/发送按钮添加到我的一些视图中。我在实例化 Router 对象之前实例化 JavaScript SDK，如下所示：

```
// main.js  
require([ "Router" ], function (Router) {

// Facebook authentication
// Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

  // Init the SDK upon load
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '302210766529054', // App ID
      channelUrl : '//'+window.location.hostname+'/channel', // Path to your Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

   // If the user has auth'd the app, instantiate the router object.
    FB.Event.subscribe('auth.statusChange', function(response) {
            if (response.authResponse) {
                 // user has auth'd your app and is logged into Facebook
                FB.api('/me', function(me){
                    if (me.username) {
                        window.currentUser = me;
                        $('#username').html(window.currentUser.name);
                        new Router();
                        Backbone.history.start();
                    }
                });
            }
    });

} 
```

});

我可以轻松地`windows.currentUser`在路由器调用的任何视图中使用该变量。但是，当我添加

```
<div class="fb-comments" data-href="http://mywebsite/i/#items/" data-num-posts="2" data-width="470"></div> 
```

对于路由器中视图调用的模板之一，不会出现评论（也不是喜欢/发送）div。当我将它添加到 index.html 文件的静态元素之一时，它工作正常。

我在这里错过了什么吗？

***编辑***

这是我的路由器，并在发布问题之前查看代码。

```
router.js
define(
[
'models/song',
'models/user',
'models/spotlight',
'models/user-playlist',
'views/spotlight-view',
'views/playlist-view',
'views/single-playlist-view',
],
function(Song, User, SpotlightModel,UserPlaylist, SpotlightView, PlaylistView, SinglePlaylistView){
    return Backbone.Router.extend({
        initialize: function(){
            window.songQue = new Array();

        },
        routes:{
            '': 'index',
            'spotlight': 'index',
            'playlists': 'allPlaylist',
            'playlists/:id':'onePlaylist',
        },

        index: function(){
            var spotlight = new SpotlightModel({id:1});
            var spotlightView = new SpotlightView({spotlight: spotlight});
            spotlight.fetch();
            $('.content').html(spotlightView.el);
        },

        allPlaylist: function(){
            $('.content').html('');
            var user = new User({id:window.currentUser.id});
            /*
             * once user details are fetched from the server,
             * loop through the arrays of their playlists and
             * render them in the template.
             */

            user.bind('change', function(){
                console.log(this);
                for(var i=0; i<this.get('objects')[0].playlists.length; i++){
                var playlistView = new PlaylistView({
                    playlist: user.get('objects')[0].playlists[i],
                    user: this.get('objects')[0]
                });
                $('.content').prepend(playlistView.el);
            }

            });
        },

        onePlaylist: function(playlist_id){
            var userPlaylist = new UserPlaylist({id:playlist_id});
            var singlePlaylistView = new SinglePlaylistView({playlist: userPlaylist});
            $('.content').html(singlePlaylistView.el);

        }
    });
}
   );

// single-playlist-view.js
define(
[
    'text!templates/single-playlist/single-playlist.html',
    'text!templates/single-playlist/single-playlist-details.html',
    'text!templates/playlist/song-row.html',
],
function(SinglePlaylistTemplate, SinglePlaylistDetailsTemplate, SongRowTemplate){
    return Backbone.View.extend({

        initialize:function(options){

            this.playlistTemplate = _.template(SinglePlaylistTemplate);
            this.playlistDetailsTemplate = _.template(SinglePlaylistDetailsTemplate);
            this.songRowTemplate = _.template(SongRowTemplate);
            this.playlist = options.playlist;

            $(this.el).prepend(this.playlistTemplate);
            this.playlist.bind('change', this.render, this);
            this.playlist.fetch();

        },

        render:function(){
            this.renderSongs();
            this.renderDetails();

        },

        renderSongs: function(){
            // Put the size of songs in a variable 
            var size = this.playlist.get('objects')[0].songs.length;
            // Extra loop just for the sake of filling the page.
            for(var j=0; j<5; j++){
                for(var i=0; i<size; i++){

                this.$("#song-row").prepend(this.songRowTemplate({
                    song: this.playlist.get('objects')[0].songs[i]
                }));
            }
            }
        },

        renderDetails: function(){
            this.$('.single-playlist-details').prepend(this.playlistDetailsTemplate({
                playlist: this.playlist,
                thumbnail: this.playlist.get('objects')[0].songs[0].song_thumbnail,
                total:this.playlist.get('objects')[0].songs.length,
            }));
        }

    });
}
  ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:03:50.183

我在@reach4thelasers 的帮助下解决了这个问题，我创建了一个从 Facebook 加载评论的 CommentsView，并在需要评论的每个视图中调用它。我只是在 CommentsView`FB.init`的`initialize`函数中调用，所以代码看起来像这样：

```
initialize: function(){
            FB.init({
                    appId      : 'APP_ID', // App ID
                    channelUrl : '//'+window.location.hostname+'/channel', // Path to your Channel File
                    status     : true, // check login status
                    cookie     : true, // enable cookies to allow the server to access the session
                    xfbml      : true  // parse XFBML
            });

            this.commentsTemplate = _.template(CommentsTemplate);
                $(this.el).html(this.commentsTemplate({
                    comments_url: window.location.href
                }));
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:03:32.590

主干视图将在 Facebook API 调用之后呈现 - 在您进行 Facebook 调用的阶段，该元素不存在。

你真的想在你想要显示 facebook API 结果的页面的路由中在你的路由器中进行 Facebook 调用。

如果您想在每个页面上显示它的内容 - 例如用户名/个人资料图片，请考虑将代码放在单独的函数中，例如 initUserInfoView()，然后从您要显示信息的每个路由中调用它。

老实说，这些东西实际上属于你的视图——路由器应该初始化并渲染视图，而视图负责从 Facebook 获取并显示

# overflow - 使用 GUI 构建器创建时 Google Apps 脚本溢出

> ID：11448313
> 
> 赞同：0
> 
> 时间：2012-07-12T08:59:11.213
> 
> 标签：overflow, google-apps-script

我使用谷歌应用程序脚本 GUI 构建器创建了这个 GUI [https://docs.google.com/open?id=0B27WaIUHQGy0UUFwS2dMS2pMUGs 。](https://docs.google.com/open?id=0B27WaIUHQGy0UUFwS2dMS2pMUGs)但是在firefox上运行它完全是废话。流面板的行为类似于水平面板。但没关系，我可以使用铬。但在这两种浏览器中，只有部分 GUI 显示。我能做些什么？请给我建议寻找。这是运行时的样子。 [https://docs.google.com/open?id=0B27WaIUHQGy0Y295VzRpYk91a3M](https://docs.google.com/open?id=0B27WaIUHQGy0Y295VzRpYk91a3M)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:55:36.103

是的，您需要 setWidth 和 setHeight 才能完成这项工作。

关于 Firefox 中的 FlowPanel，不幸的是，Firefox 使用的流规则集与任何其他浏览器不同。例如，对于没有明确设置宽度和高度的小部件，它以自己的方式流动，而不是对于有明确设置的小部件。我很想解决这个问题，但这是一个我们无法真正克服的浏览器级别问题。我建议在 Firefox 中打开 GUI Builder 以查看您可以期待什么，因为那里也应该存在相同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:11:08.503

我认为您应该使用“主面板”（绝对面板）来保存所有其他小部件，这将在渲染时修复 Ui 窗口大小。无论如何，在您的 callbackElement 中收集数据都会很有用。好吧，至少我在使用 GUI 构建器时就是这样做的。另一种选择是使用`app.setWidth('pixelsize').setHeigth('pixelsize')`正确的尺寸。

编辑：你是对的，绝对面板不能解决它......但`setWidth()`确实......像这样使用它：

```
 var app = UiApp.createApplication().setTitle("panel").setWidth('1500').setHeight('600');
  var GUI = app.loadComponent('MyGui')
       app.add(GUI) 
```

# regex - 正则表达式 perl 中的替换和匹配表达式

> ID：11448315
> 
> 赞同：0
> 
> 时间：2012-07-12T08:59:23.520
> 
> 标签：regex, perl, string-substitution

我有一个 HTML 文件，其中有很多表达式，例如

```
/v/global/nagargaurav/CALL::ROWS_ARE_MATCHED.log 
```

我有这样的代码

```
my $dir = /v/global/nagargaurav/;

$html =~ s/$dir\\/(.*?)::(.*?)\.log/$1 : $2/g;

print $html; 
```

它给出了输出 -

```
CALL : ROWS_ARE_MATCHED 
```

但我需要的是像这样输出

```
**CALL : ROWS ARE MATCHED** 
```

并且有很多这样的行，但表达是一样的。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:02:52.917

```
use strict;
use warnings;

my $html = '/v/global/nagargaurav/CALL::ROWS_ARE_MATCHED.log';
my $dir  = '/v/global/nagargaurav/';

$html =~ s/$dir\/(.*?)::(.*?)\.log/$1 : $2/g;
$html =~ s/_/ /g;

print $html; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:25:28.993

可以通过使用 /e 一步完成：

```
$html =~ s{ $dir /? ([^:]+) :: ([^.]+) \.log }
          { do{ local$_=$2;y/_/ /;"$1 : $_"} }gsex; 
```

结果：

```
CALL : ROWS ARE MATCHED 
```

顺便说一句，你的声明不是 Perl，这些应该是：

```
my $html = '/v/global/nagargaurav/CALL::ROWS_ARE_MATCHED.log';
my $dir  = '/v/global/nagargaurav/'; 
```

或类似的。

问候

rbo

# xaml - 如何更改工具提示颜色

> ID：11448323
> 
> 赞同：0
> 
> 时间：2012-07-12T08:59:49.400
> 
> 标签：xaml, tooltip

我如何在我的代码中更改工具提示颜色

```
 <Style x:Key="textBoxInError" TargetType="TextBox">
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip" Value="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=(Validation.Errors)[0].ErrorContent}" />
            </Trigger>
        </Style.Triggers>
    </Style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:04:01.033

创建您自己的工具提示样式[参见此处](http://msdn.microsoft.com/en-us/library/ms745107%28v=vs.85%29.aspx)

请注意，样式必须是默认的 `<Style TargetType="ToolTip"> ... </Style>`

让它应用“textBoxInError”样式。

# java - JOptionPane 未显示

> ID：11448326
> 
> 赞同：0
> 
> 时间：2012-07-12T08:59:54.237
> 
> 标签：java, joptionpane

JOptionPane 没有显示..请检查我的代码：

```
public void actionPerformed(ActionEvent e) {
     // TODO Auto-generated method stub
     //if (e.getActionCommand().equals("Ok")){
     if ( e.getActionCommand().equals(btnOk) ){
              if(connect(txtUser.getText(), txtPass.getText() ) ) {
                  JOptionPane.showMessageDialog(null, "WARNING", "Valid user!", JOptionPane.INFORMATION_MESSAGE);
              }
              else {
                        System.out.print("Wrong password!");
              }

     }
 } 
```

我的连接方法，请检查这个。

```
public boolean connect(String usr, String pwd){

     try {
         Class.forName("com.mysql.jdbc.Driver");
         connection = DriverManager.getConnection(
                     "jdbc:mysql://localhost:3306/USERS", "root", "root" );
          PreparedStatement ps = 
                  connection.prepareStatement( "SELECT lname, fname FROM employees where fname=? and lname =?" );
          ps.setString(1,usr);
          ps.setString(2,pwd);

         resultSet = ps.executeQuery();

       if(resultSet.next()) {
                return true;
       }

     } catch (Exception e) {
         e.printStackTrace();
     }

     return false;
 } // end of connect method 
```

我不知道我的代码有什么问题。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:06:58.723

如果不打印*密码错误！*这意味着它没有通过这`e.getActionCommand().equals(btnOk)`条线。确保`btnOk`是一个字符串，并且它是您要查找的字符串。

如果它打印*Wrong password*，这就是为什么会发生这种情况。

`btnOk`对我来说听起来像是一个按钮，而不是一个字符串（但没有任何额外的代码片段，我们只需要猜测），所以小心不要测试字符串 actionCommand 和按钮之间的相等性。

# vb.net - 如何在 blacket 之间进行子串化并返回值

> ID：11448330
> 
> 赞同：-3
> 
> 时间：2012-07-12T09:00:01.153
> 
> 标签：vb.net

如何对字符串进行子串化，例如**“A1（Value）”**并返回**“Value”**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:13:00.897

您可以使用`RegularExpression`：

```
Dim str = "A1(Value)...(anotherValue)"
Dim pattern = "\(([^)]*)\)"
Dim regex = New System.Text.RegularExpressions.Regex(pattern, System.Text.RegularExpressions.RegexOptions.Compiled)
Dim firstBracket = regex.Match(str)
If firstBracket.Value.Length <> 0 Then
    Dim inFirstBracket = firstBracket.Value.Substring(1, firstBracket.Value.Length - 2)
    'Value'
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:08:57.773

用正则表达式检查

```
Dim result As String
Dim txt As String ="A1(Value)"
Dim re1 As String=".*?"
Dim re2 As String="((?:[a-z][a-z]+))"
Dim r As Regex = new Regex(re1+re2,RegexOptions.IgnoreCase Or RegexOptions.Singleline)
Dim m As Match = r.Match(txt)
If (m.Success) Then
    Dim word1=m.Groups(1)
    result = word1.ToString()
End If 
```

得自：[http ://txt2re.com/index-vb.php3?s=A1%28Value%29&2](http://txt2re.com/index-vb.php3?s=A1%28Value%29&2)

* * *

或者只是将字符串从第 3 个字符拆分为 length-1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:12:18.063

如果您不想使用正则表达式，则可以使用`IndexOf`来查找括号的位置并`SubString`返回括号内的字符串部分：

```
Dim txt As String = "A1(Value)"
Debug.WriteLine(txt.Substring(txt.IndexOf("(") + 1, txt.IndexOf(")") - txt.IndexOf("(") - 1)) 
```

请注意，如果字符串不包含左括号和右括号，这将引发异常，因此您可能需要添加一些错误检查

# winapi - 从需要身份验证的 PAC 代理获取代理

> ID：11448333
> 
> 赞同：2
> 
> 时间：2012-07-12T09:00:37.033
> 
> 标签：winapi, proxy, winhttp, pac

我正在尝试使用`WinHttpGetProxyForUrl`指定的 PAC 文件`WINHTTP_AUTOPROXY_OPTIONS.lpszAutoConfigUrl`需要 HTTP 基本身份验证才能访问的地方。

是否有某种方法可以弹出常规身份验证对话框或提供用于代理的用户名和密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T02:00:55.733

仅[WinInet](http://msdn.microsoft.com/en-us/library/windows/desktop/hh227297%28v=vs.85%29.aspx)支持自动凭据对话框处理。在 WinHTTP 中，您必须提供一种方法来自己获取用户的用户名和密码并将其传递给`WinHttpSetCredentials`或类似的函数。我会检查`ERROR_WINHTTP_LOGIN_FAILURE`from的返回值，`WinHttpGetProxyForUrl`然后询问用户的凭据。此时，您可以尝试以下任一方法将这些凭据传递给 WinHTTP：

1.  使用`WinHttpSetOption`with`WINHTTP_OPTION_USERNAME`和`WINHTTP_OPTION_PASSWORD`设置用户名和密码并调用`WinHttpGetProxyForUrl`。
2.  或者调用包含凭据的 URL`WinHttpGetProxyForUrl`并提供参数。`lpszAutoConfigUrl`（即`http://user:pass@intranet/`）。

如果您没有使用基本身份验证，我建议您查看 `fAutoLogonIfChallenged`，但这对您没有用。

# ios - 动态更改 iOS 应用程序的语言

> ID：11448334
> 
> 赞同：2
> 
> 时间：2012-07-12T09:00:37.673
> 
> 标签：ios, object

我见过一些动态更改应用程序中使用的语言的 iOS 应用程序，我的意思是当应用程序启动时，用户可以动态更改语言（法语、英语……）；我在互联网上搜索过，我发现了任何关于此的信息。

任何想法 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:04:05.610

您必须使用本地化。这是一个教程：[http ://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:06:31.550

您需要编写自己版本的 NSLocalizedString 宏，它根据用户偏好选择语言包，而不是手机区域设置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-16T12:58:06.850

我们正在使用类似下面的东西（受 Localize-Swift 启发）。请注意，您必须以其他方式存储所选语言，而不是`UserDefaults.standard`使用应用程序扩展。如果需要，应该很容易通过复数支持进行扩展。

在下面添加类和字符串扩展后，您将调用`"key_from_string_files".localized()`而不是变体`NSLocalizedString`来获取本地化字符串。

```
extension String {
    func localized(_ key: String, arguments: [CVarArg] = []) -> String {
        return Localize.localized(key, arguments: arguments)
    }
}

class Localize {
    static var storeKey = "custom_current_language"

    class func localized(_ key: String, arguments: [CVarArg]) -> String {
        let string: String
        let lang = currentLanguage()

        if let path = Bundle.main.path(forResource: lang, ofType: "lproj"), let bundle = Bundle(path: path) {
            string = bundle.localizedString(forKey: key, value: nil, table: nil)
        } else {
            string = key
        }

        return String(format: string, arguments: arguments)
    }

    class func currentLanguage() -> String {
        if let current = UserDefaults.standard.object(forKey: storeKey) as? String, Bundle.main.localizations.contains(current) {
            return current
        } else if let preferred = Bundle.main.preferredLocalizations.first {
            return preferred
        }
        fatalError("Could not determine application localization")
    }

    class func setCurrentLanguage(_ language: String?) {
        UserDefaults.standard.set(language, forKey: storeKey)
        UserDefaults.standard.synchronize()
    }

} 
```

# c# - 释放连接或关闭连接

> ID：11448335
> 
> 赞同：8
> 
> 时间：2012-07-12T09:00:39.040
> 
> 标签：c#, asp.net, performance, database-connection, informix

以下两种方法中哪一种具有更好的性能？

```
using( var DB_Connection_s = new DBConnection() )
{
 //todo: interact with database connection
} 
```

要不就 ：

```
DB_Connection_s.Close(); 
```

在最后。

第一种方法是否使池化概念无用？因为如果我在每次使用时都处理连接，那么我每次都必须打开一个新连接（并且池中不会有任何连接）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T09:04:51.360

模式更好，`using`因为 Dispose 调用无论如何都会关闭连接，但作为奖励，即使 using 内部出现问题，连接也会关闭。例如，一个异常或只是一个强制程序执行超出使用范围的返回。使用 using，您不需要显式关闭连接，这使代码更具可读性。作为另一种模式，必须尽快关闭连接。过于频繁地关闭/打开连接并没有性能缺陷，因为连接池会为您优化连接重用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T09:07:18.350

> 当您在连接上调用 Close 或 Dispose 时，连接会被释放回池中...

来源 = [SQL Server 连接池 (ADO.NET)](http://msdn.microsoft.com/en-us/library/8xx3tyca(v=vs.100).aspx)

因此，无需担心因错过池连接而导致性能损失。
从代码的角度来看，差异应该很小，以至于`using`应该始终使用该语句

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:01:42.193

使用处置。在 Dispose 内部，它将关闭连接，因此您无需担心，如果有疑问，可以使用 Reflector 或类似工具轻松检查。

至于性能，我仍然会使用 Using。Windows 启用了各种缓存（当然是在 ODBC 中），以确保对同一连接的重复请求可以重复使用，因此您不必担心性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-03T08:50:53.707

除非你很快要再次调用 .Open() ，

使用`using(){}`块。

如果您打算很快在其他地方使用相同的连接，
请调用`.close();` then `.open()`等等...
保持您的类实现`IDisposable`并在那里处理连接！

创建 Connection 对象仍然需要时间

# java - 创建xml文件的异常

> ID：11448336
> 
> 赞同：2
> 
> 时间：2012-07-12T09:00:39.470
> 
> 标签：java, xml, xslt

我正在尝试创建一个 xml 文件。当我创建文件时，我收到此错误。我真的不知道它是什么。这是一个非常奇怪的错误。文件已正确创建，但里面没有写入任何内容。

```
Exception in thread "AWT-EventQueue-0" java.lang.AbstractMethodError: gnu.xml.dom.DomDocument.getXmlStandalone()Z
    at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.setDocumentInfo(DOM2TO.java:377)
    at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:131)
    at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2TO.parse(DOM2TO.java:98)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:683)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:727)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:340)
    at org.w3c.jigmonitor.controller.Controller.writePerformancesXmlFile(Controller.java:191)
    at org.w3c.jigmonitor.controller.Controller.actionPerformed(Controller.java:68)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:703)
    at java.awt.EventQueue.access$000(EventQueue.java:102)
    at java.awt.EventQueue$3.run(EventQueue.java:662)
    at java.awt.EventQueue$3.run(EventQueue.java:660)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:676)
    at java.awt.EventQueue$4.run(EventQueue.java:674)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:673)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

这是我用来创建 xml 文件的代码：

```
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
                    DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

                    Document doc = docBuilder.newDocument();
                    Element rootElement = doc.createElement("performances");
                    doc.appendChild(rootElement);

                    Attr attr = doc.createAttribute("date");
                    attr.setValue(dateFormat.format(cal.getTime()).toString());
                    rootElement.setAttributeNode(attr);

                    //Uptime
                    Element uptime = doc.createElement("uptime");
                    rootElement.appendChild(uptime);

                    Element days = doc.createElement("days");
                    days.appendChild(doc.createTextNode(new Long(duptime).toString()));
                    uptime.appendChild(days);

                    Element hours = doc.createElement("hours");
                    hours.appendChild(doc.createTextNode(new Long(huptime).toString()));
                    uptime.appendChild(hours);

                    Element minutes = doc.createElement("minutes");
                    minutes.appendChild(doc.createTextNode(new Long(muptime).toString()));
                    uptime.appendChild(minutes);

                    Element seconds = doc.createElement("seconds");
                    seconds.appendChild(doc.createTextNode(new Long(suptime).toString()));
                    uptime.appendChild(seconds);

                    //TotalHitCount
                    Element totalhitcount = doc.createElement("totalhitcount");
                    totalhitcount.appendChild(doc.createTextNode(new Long(stats.gettotal_hit_count()).toString()));
                    rootElement.appendChild(totalhitcount);

                    //EmittedBytes
                    Element emittedbytes = doc.createElement("emittedbytes");
                    emittedbytes.appendChild(doc.createTextNode(new Long(stats.getemitted_bytes()).toString()));
                    rootElement.appendChild(emittedbytes);

                    //Avghitsec
                    Element avghitsec = doc.createElement("avghitsec");
                    avghitsec.appendChild(doc.createTextNode(new Float(stats.getavg_hit_sec()).toString()));
                    rootElement.appendChild(avghitsec);

                    //Avgbyteshit
                    Element avgbyteshit = doc.createElement("avgbyteshit");
                    avgbyteshit.appendChild(doc.createTextNode(new Long(stats.getavgbytes_hit()).toString()));
                    rootElement.appendChild(avgbyteshit);

                    //Avgbps
                    Element avgbps = doc.createElement("avgbps");
                    avgbps.appendChild(doc.createTextNode(new Long(stats.getavgbps()).toString()));
                    rootElement.appendChild(avgbps);

                    //Total Threads
                    Element totalthreads = doc.createElement("totalthreads");
                    totalthreads.appendChild(doc.createTextNode(new Long(stats.gettotal_threads()).toString()));
                    rootElement.appendChild(totalthreads);

                    //Idle Threads
                    Element idlethreads = doc.createElement("idlethreads");
                    idlethreads.appendChild(doc.createTextNode(new Long(stats.getidle_threads()).toString()));
                    rootElement.appendChild(idlethreads);

                    TransformerFactory transformerFactory = TransformerFactory.newInstance();
                    Transformer transfomer = transformerFactory.newTransformer();
                    DOMSource source = new DOMSource(doc);
                    StreamResult result = new StreamResult(new File("/home/mazzy/Scrivania/perfor_"+dateFormat.format(cal.getTime()).toString()+".xml"));

                    transfomer.transform(source, result); 
```

我在变压器方法中遇到了那个异常。知道我得到了这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:50:34.907

这是某种配置问题，原因是当您从运行类路径中的代码编译代码时，类路径上有不同的 JAR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:23:12.457

> 公共类 AbstractMethodError 扩展 IncompatibleClassChangeError
> 
> 当应用程序尝试调用抽象方法时抛出。通常，这个错误会被编译器捕获；如果自上次编译当前执行的方法以来某些类的定义发生了不兼容的更改，则此错误只会在运行时发生。

听起来你可能错过了一个实现 jar

# javascript - 如何使用 Moment.js 以周为单位获得持续时间？

> ID：11448340
> 
> 赞同：8
> 
> 时间：2012-07-12T09:00:49.550
> 
> 标签：javascript, momentjs

我用`moment.js`人类可读的格式来格式化持续时间。
例如（`d`是一个`Date`对象）：

```
moment(d).subtract("days", 3).from(d) // 返回 "3 days ago"
```

现在我想得到“2 周前”，但下面的代码返回以天为单位的持续时间

```
moment(d).subtract("weeks", 2).from(d) // 返回 "14 天前" i/o "2 周前"
```

我怎样才能得到“2周前” `moment.js`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T23:57:02.127

You can do this pretty easily with a custom callback function.

```
moment.relativeTime.dd = function (number) {
    // round to the closest number of weeks
    var weeks = Math.round(number / 7);
    if (number < 7) {
        // if less than a week, use days
        return number + " days";
    } else {
        // pluralize weeks
        return weeks + " week" + (weeks === 1 ? "" : "s"); 
    }
} 
```

[http://jsfiddle.net/timrwood/sWsXQ/](http://jsfiddle.net/timrwood/sWsXQ/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-24T00:59:21.617

### 使用新的`updateLocale()`.

Moment.js 已再次更新，因此[首选方法](http://momentjs.com/docs/#/customization/relative-time/)如下：

```
moment.updateLocale('en', {

  relativeTime : {
    future: 'in %s',
    past:   '%s ago',
    s:      'a few seconds',
    m:      'a minute',
    mm:     '%d minutes',
    h:      'an hour',
    hh:     '%d hours',
    d:      'a day',
    dd:     function(number) {
              if (number < 7) {
                return number + ' days'; // Moment uses "d" when it's just 1 day.
              }
              else {
                var weeks = Math.round(number / 7);
                return weeks + ' ' + (weeks > 1 ? 'weeks' : 'week');
              }
            },
    M:      'a month',
    MM:     '%d months',
    y:      'a year',
    yy:     '%d years'
  }

}); 
```

感谢[@timrwood](https://stackoverflow.com/users/272034/timrwood)和[@gahen](https://stackoverflow.com/users/2669979/gahen)的回答。

我正在努力更新 Moment，以便您可以仅覆盖**单个** `relativeTime`对象，例如`dd`，而不必提供所有对象。

GitHub 问题在[这里](https://github.com/moment/moment/issues/3137)，所以如果你想做这样的事情，请给它一个大拇指：

```
moment.updateLocale('en', {

  relativeTime : {
    dd: function(number) {
          if (number < 7) {
            return number + ' days'; // Moment uses "d" when it's just 1 day.
          }
          else {
            var weeks = Math.round(number / 7);
            return weeks + ' ' + (weeks > 1 ? 'weeks' : 'week');
          }
        }
  }

}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-24T19:11:41.777

我无法评论上一个答案，但我想留下一个更新的答案（基于[timrwood](https://stackoverflow.com/users/272034/timrwood)的）

```
moment.locale('en', {
  relativeTime : {
    future: "in %s",
    past:   "%s ago",
    s:  "seconds",
    m:  "a minute",
    mm: "%d minutes",
    h:  "an hour",
    hh: "%d hours",
    d:  "a day",
    dd: function (number) {
      var weeks = Math.round(number / 7);
      if (number < 7) {
        // if less than a week, use days
        return number + " days";
      } else {
        // pluralize weeks
        return weeks + " week" + (weeks === 1 ? "" : "s"); 
      }
    },
    M:  "a month",
    MM: "%d months",
    y:  "a year",
    yy: "%d years"
  }
});

$window.moment.relativeTimeThreshold('d', 340); // if you want weeks instead of months, otherwise put a 28 or so. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-13T13:40:46.870

改进@vinjenzo 的答案，当您需要几周内的日期差异时，您很可能会遇到返回的天数：

```
var aPastDate = moment().subtract(5,'months');
var aPastDay = moment().subtract(6,'days');
var now = moment();

moment.fn.durationInWeeks = function(fromDate, toDate) {

    var days    = toDate.diff(fromDate, 'days');    
    var weeks   = toDate.diff(fromDate, 'weeks');

    if (weeks === 0) {
        return days + ' ' + (days > 1 ? 'days' : 'day');
    } else {
        return weeks + ' ' + (Math.round(days / 7) > 1 ? 'weeks' : 'week');
    }

}

moment().durationInWeeks(aPastDate,now); // 21 weeks
moment().durationInWeeks(aPastDay,now);  // 6 days 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T10:59:42.460

[文档](http://momentjs.com/docs/)列出了创建这些字符串的规则（在“从另一个时刻开始人性化时间”下）。虽然您可以通过更改来修改字符串`moment.relativeTime`，但这仅限于显示在数字周围的文本，即您不能将天更改为周。

您必须扩展`moment.js`或编写一些自定义代码来实现此功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-28T21:32:45.220

分享并希望仍然有用：

```
var aPastDate = moment().subtract(5,'months');
var now = moment();

moment.fn.durationInWeeks = function (fromDate, toDate) {

   var weeks =  toDate.diff( fromDate, 'weeks' );
   return weeks + ' weeks ago'; //your own format

}

moment().durationInWeeks(aPastDate,now);

//"21 weeks ago" 
```

# date - 从 Groovy 中的时间戳获取日期

> ID：11448341
> 
> 赞同：9
> 
> 时间：2012-07-12T09:00:56.213
> 
> 标签：date, groovy, timestamp

尽管看起来微不足道，但我找不到将 Unix 时间戳转换为 Groovy 中的 Date 对象的方法。

让我试试`1280512800`，应该变成`Fri, 30 Jul 2010 18:00:00 GMT`

我的第一次尝试是

```
new Date(1280512800)
// wrong, becomes Thu Jan 15 20:41:52 CET 1970 
```

然后我读到Java时间戳使用毫秒，因此我应该使用

```
new Date((long)1280512800 * 1000)
// the cast to long is irrelevant in Groovy, in any case I get
// Thu Jan 08 03:09:05 CET 1970 
```

将时间戳转换为日期的正确方法是什么？如果我想指定工作的时区怎么办？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-12T09:07:27.650

问题是它与整数一起使用，然后乘法导致截断......

尝试：

```
new Date( 1280512800L * 1000 ) 
```

或者

```
new Date( ((long)1280512800) * 1000 ) 
```

# iphone - 最初激活 UISearchBar 时显示 searchResultsTableView

> ID：11448342
> 
> 赞同：2
> 
> 时间：2012-07-12T09:00:56.947
> 
> 标签：iphone, ios, uikit, uisearchbar, uisearchdisplaycontroller

我目前正在使用 a`searchDisplayController`来`UISearchBar`尝试在我的 iPhone 应用程序中实现自动完成功能。

但是，当用户第一次按下 时`UISearchBar`，搜索控制器会显示一个暗色`UIView`以将焦点放在搜索栏上。

相反，我希望`searchResultsTableview`最初显示实际（包括过去的查询、自动完成建议等）。

关于覆盖/实现什么方法来让它工作的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:11:58.820

我从来没有看到过使用 UISearchBarController（或 UITableViewController）的意义，因为他们用它投入了很多动作，我只需制作 UISearchBar 出口并在你的界面中声明，这样你就可以放入你的自定义方法。

所以在这里你会在每次搜索时填充一个搜索数组，所以当按下搜索栏时（有一个类似于 (UISearchBar*) didBeginEditing; 的委托方法）你会显示你的自定义列表，当他们按下一个时，设置 searchBar. text = nil （如果他们输入了一些东西）然后 searchBar.text = [cell objectAtIndex:indexPath.row].stringValue （伪代码！没有尝试过！）只要记住根据发生的情况交换数组

# android - Phonegap 键盘在焦点输入上上下滚动页面

> ID：11448345
> 
> 赞同：1
> 
> 时间：2012-07-12T09:01:02.380
> 
> 标签：android, jquery, cordova, keyboard, scroll

当使用带有焦点输入字段的 jQuery Mobile 对话框时，由于出现了键盘，页面会不断地上下滚动。这是在相当小的手机（HTC Explorer）上，但在 HTC Sensation 等较大的手机中不存在此问题。

从屏幕上取下键盘后，问题就消失了。

有谁知道解决这个问题的任何方法？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T07:53:28.757

我基本上通过立即将页面滚动回顶部来解决这个问题：

```
$('#myInput').bind('focus',function(event){
    window.scrollTo(0, 0);
    document.body.scrollTop = 0;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:15:58.803

您可以简单地将活动的 windowSoftInputMode 标志切换为“adjustPan”。查看[官方](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)文档以获取更多信息。

# ios - Objective-C 中的指针

> ID：11448347
> 
> 赞同：-2
> 
> 时间：2012-07-12T09:01:10.940
> 
> 标签：ios, ios5, ios4

我已经学习 iOS 大约几个月了，我发现我应该使用**指向**许多 Objective-C 类型对象的指针。
但是有些情况下不应该使用指针，例如“NSInteger”“CGPoint”“BOOL”......
所以问题是：在什么情况下我应该使用指针？以及使用指针的目的是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:02:49.973

您使用指向所有对象的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:03:43.010

NSInteger、CGPoint 等不是 Objective-C 对象。它们是结构或类型定义。

您必须使用带有 Object 类型的指针。您可以将指针与其他 (C) 类型一起使用

# android - android图像过滤大图像

> ID：11448350
> 
> 赞同：0
> 
> 时间：2012-07-12T09:01:17.070
> 
> 标签：android

我正在创建一个应用程序，它将从 SD 卡中获取大图像，然后将它们变成黑白并将它们保存到 SD 卡。我无法直接读取大图像。所以需要使用流。任何人都可以为我提供解决方案. PS：我尝试了很多来找到这个问题的答案，但一直没能找到。提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:22:35.407

使用 a`RandomAccessFile`在模式下访问文件`read/write`：

```
RandomAccessFile file = new RandomAccessFile("yourimage", "rw"); 
```

比您可以使用[public int read (byte[] buffer)](http://developer.android.com/reference/java/io/RandomAccessFile.html#read%28byte%5B%5D%29)读取一大块数据，修改数据缓冲区以获得仅黑色和白色的像素颜色，执行[public void seek (long offset)](http://developer.android.com/reference/java/io/RandomAccessFile.html#seek%28long%29)以返回您开始读取的偏移量和[公共无效写入（字节 [] 缓冲区）](http://developer.android.com/reference/java/io/RandomAccessFile.html#write%28int%29)黑色和像素。

编辑：

好的，实际上我认为从文件读取不是解决方案，因为 android 不允许获取图像的原始字节。您可以使用[BitmapRegionDecoder](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html)来读取图像的小块：

```
BitmapRegionDecoder decoder = BitmapRegionDecoder.newInstance(myStream, false);
Bitmap bitmapregion = decoder.decodeRegion(new Rect(left, top, right, bottom), null); 
```

而不是`ColorMatrix`用来创建黑白图像。如果您可以链接 aginst `libjpeg`，则可以直接获取原始位图字节并将其转换为黑白。最简单的方法是平均方法。您一次读取 3 个字节（R、G、B）。然后取平均值：

```
unsigned char R;
unsigned char B;
unsigned char G;
int color = (R+G+B)/3; 
if (color > THRESHOLD) return 255;
return 0; 
```

# java - 与 JMeter 相比，Apache httpclient 4.1 慢

> ID：11448351
> 
> 赞同：1
> 
> 时间：2012-07-12T09:01:24.917
> 
> 标签：java, jmeter, apache-httpclient-4.x

我有一个使用 Apache HttpClient 4.1 的简​​单 1 线程循环。它连接到我在 localhost 上的 Apache httpd Web 服务器。

我平均每个请求/响应需要 2.5 毫秒。另一方面，JMeter 平均为 1 毫秒。（Apache Benchmark，ab，在 0.4 毫秒内完成，但由于那是本机代码，也许没有可比性。）

代码只是：

```
 final HttpGet httpGet = new HttpGet(testUrl);
    while (true) {
        try {
            final long startNanoTime = System.nanoTime();
            final HttpResponse httpResponse = httpClient.execute(httpGet); 
            final InputStream inputStream = httpResponse.getEntity().getContent();

            final byte[] buffer = new byte[8192];
            int size = inputStream.read(buffer);
            while (size > 0) {
                size = inputStream.read(buffer);
            }

                            // Elapsed time measured here
            final long elapsed = System.nanoTime() - startNanoTime;

            inputStream.close();

        } catch (MalformedURLException e) {
            // Should never happen
            throw new RuntimeException(e);
        } catch (IOException e) {
            // Count
            errors++;
            throw new RuntimeException(e);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:41:19.953

我的测试表明，以 stackoverflow.com GET 请求为例，重复 10 次以上： ![在此处输入图像描述](../Images/6708c0d49f86b4a7154795d407fe85bb.png)

正如您从图像中看到（或未看到），使用 jmeter 和`View Results in a Table`. 请注意，此侦听器不会仅打印请求统计信息的响应正文。

这是我的 Java 代码：

```
public static void main(String[] args) throws Exception{        
        long totalTimeMS = 0;

        for (int i = 0; i < 10; i++) {

        long startTime = System.currentTimeMillis();

        HttpGet get = new HttpGet("http://stackoverflow.com");
        HttpClient client = new DefaultHttpClient();
        client.execute(get);       

        long endTime = System.currentTimeMillis();
        long duration = (endTime-startTime);
        totalTimeMS +=duration;
        System.out.format("Duration %d ms\n", duration);
        }

        System.out.format("Average time is %d ms", (totalTimeMS/10));
    } 
```

所以我也不关心响应体。但这里是结果（快得多）：

```
Duration 615 ms
Duration 263 ms
Duration 264 ms
Duration 262 ms
Duration 268 ms
Duration 266 ms
Duration 265 ms
Duration 266 ms
Duration 268 ms
Duration 263 ms
Average time is 300 ms 
```

现在在 jmeter 中使用另一个案例时`View Results in a Tree`，您实际上可以看到响应正文加上 ，`View Results in a Table`因为我们仍然需要时间。

我不会附上屏幕截图，因为答案的可读性会降低，但这次的平均时间`812 ms`比以前多 100 毫秒。

现在关心响应体的java代码（新方法）：

```
public static String convertStreamToString(InputStream is) throws IOException {
        if (is != null) {
            StringBuilder sb = new StringBuilder();
            String line;
            try {
                BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));
                while ((line = reader.readLine()) != null) {
                    sb.append(line).append("\n");
                }
            } finally {
                is.close();
            }
            return sb.toString();
        } else {
            return "";
        }
    } 
```

我稍微修改了之前的代码，所以它打印出响应，模拟 jmeter 行为，发布相关部分：

```
HttpGet get = new HttpGet("http://stackoverflow.com");
        HttpClient client = new DefaultHttpClient();
        HttpResponse response = client.execute(get);       

        long endTime = System.currentTimeMillis();
        long duration = (endTime-startTime);
        totalTimeMS +=duration;
        System.out.println(convertStreamToString(response.getEntity().getContent()));
        System.out.format("Duration %d ms\n", duration); 
```

结果如下：

```
Duration 678 ms  + (including printing of response body)
Duration 264 ms + (including printing of response body)
Duration 269 ms + (including printing of response body)
Duration 262 ms + (including printing of response body)
Duration 263 ms + (including printing of response body)
Duration 265 ms + (including printing of response body)
Duration 262 ms + (including printing of response body)
Duration 267 ms + (including printing of response body)
Duration 264 ms + (including printing of response body)
Duration 264 ms + (including printing of response body)
Average time is 305 ms 
```

响应时间增加了`5 ms`。所以我不知道 jmeter 是如何比普通的 java 代码更快的。无论如何，jmeter 确实是一个很棒的工具，是最好的工具之一（免费）。

# javascript - 方向更改时如何禁用页面调整大小

> ID：11448353
> 
> 赞同：0
> 
> 时间：2012-07-12T09:01:30.490
> 
> 标签：javascript, jquery, jquery-mobile, cordova

我将我的应用程序设计为水平视图，因此我希望用户在手机上水平使用我的应用程序。

默认情况下，当手机更改为垂直时，JQM 的页面将调整大小（原始宽度为当前高度，原始高度为当前宽度），这会破坏我的布局。

我正在使用phonegap android，我希望某些页面可以自动调整大小并避免在其他一些页面中调整大小。

谢谢。

# opencl - 在 openCL 中使用蛮力进行模式匹配

> ID：11448354
> 
> 赞同：0
> 
> 时间：2012-07-12T09:01:31.410
> 
> 标签：opencl, string-matching, workgroup

我已将文本存储在 char 数组 a[textLength] 中，并将模式存储在数组 b[patternLength] 中

```
cl_char *a = (cl_char *) malloc(textLength*sizeof(cl_char));

for(int i =0; i<textLength;i++)
{
    a[i]=text[i];
    }

// A buffer object is a handle to a region of memory
cl_mem a_buffer = clCreateBuffer(context,
                                 CL_MEM_READ_ONLY | // buffer object read only for kernel
                                 CL_MEM_COPY_HOST_PTR, // copy data from memory referenced
                                 // by host pointer
                                 textLength*sizeof(cl_char), // size in bytes of buffer object
                                 a, // host pointer
                                 NULL); // no error code returned

// for text and pattern kernal arguments
cl_char *b = (cl_char *) malloc(patternLength*sizeof(cl_char));

for(int i =0; i<patternLength;i++)
{
   b[i]=pattern[i];
}

// A buffer object is a handle to a region of memory
/*cl_mem b_buffer = clCreateBuffer(context,
                                 CL_MEM_READ_ONLY | // buffer object read only for kernel
                                 CL_MEM_COPY_HOST_PTR, // copy data from memory referenced
                                 // by host pointer
                                 patternLength*sizeof(cl_char), // size in bytes of buffer object
                                 b, // host pointer
                                 NULL); // no error code returned */
cl_mem b_buffer = NULL;

    clSetKernelArg(kernel, 0, sizeof(a_buffer), (void*) &a_buffer);
clSetKernelArg(kernel, 1, sizeof(cl_mem), NULL);
clSetKernelArg(kernel, n, sizeof(cl_mem), &b_buffer);
    size_t global_work_size = numberofWorkItem;
    cl_int error= clEnqueueNDRangeKernel(queue, kernel,
                       1, NULL, // global work items dimensions and offset
                       &global_work_size, // number of global work items
                       &patternLength, // number of local work items
                       0, NULL, // don't wait on any events to complete
                       &timeEvent); // no event object returned

 I have read that in clSetKernelArg, for __local indentifiers, the arg_value should be NULL. I have done that by doing b_buffer=NULL; 
```

但是这样做会阻止 b_buffer 存储 b[] 的值（模式）我该怎么做？

另外，如果我没记错的话，local_work_size 不能大于 CL_DEVICE_MAX_WORK_ITEM_SIZES 给出的值。因为 local_work_size 受到底层设备/硬件的限制。另一方面，global_work_size 可以任意大。它必须是 local_work_size 的倍数吗？？？如果是，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:36:17.913

您的错误在 clSetKernelArg 行中：

```
//incorrect
clSetKernelArg(kernel, n, sizeof(cl_mem), &b_buffer);

//correct
clSetKernelArg(kernel, n, sizeof(cl_char)*patternLength, NULL); 
```

内核执行后本地内存被清除，因此您将无法使用您的方法获取 b_buffer 的副本。此外，本地内存不是由主机分配的。您需要从全局参数复制以将其放入 LDS。

要复制本地数据，您需要传入全局 cl_mem 以及本地参数。复制可以在内核结束时完成，并使用 clEnqueueReadBuffer 返回主机。

**更新**

这是一个如何使用动态本地缓冲区的具体示例，并将其分配给全局缓冲区的内容。

```
__kernel void copyBufferExample(__global int* srcBuff, __local int* localBuff, const int copyCount)
{
    int lid = get_local_id(0);
    int ls = get_local_size(0);
    int i;

    for(i=lid; i<copyCount; i+=ls){
        localBuff[i] = srcBuff[i];
    }

    //use localBuff here
    //copy result back to global memory if needed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:17:36.943

上面的代码不会并行复制...

这确实...

_*内核 void copyBufferExample(* _global int* srcBuff, __local int* localBuff, const int copyCount) {

```
int i = get_local_id(0); 
```

if ( i < copyCount) localBuff[i] = srcBuff[i]; // 每个线程复制 1 个 int。不需要for循环

```
barrier(CLK_LOCAL_MEM_FENCE);  // synchronize all threads before using the local memory

//use localBuff here
//copy result back to global memory if needed 
```

}

# android - java.lang.RuntimeException：无法启动活动 ComponentInfo：java.lang.NullPointerException

> ID：11448355
> 
> 赞同：1
> 
> 时间：2012-07-12T09:01:31.650
> 
> 标签：android

使用此 onclicklistener 时，我的应用程序给了我这个错误

```
private OnClickListener btn_Config_Onclick = new OnClickListener() {
    public void onClick(View v) {
        Bundle bundle = new Bundle();
        bundle.putString("Name", selected_Name);
        bundle.putString("Image", selected_Image);

        Intent intent = new Intent(v.getContext(), Configure.class);
        intent.putExtras(bundle);
        v.getContext().startActivity(intent);
    }
}; 
```

配置类在这里： http: [//pastebin.com/njMa9buE](http://pastebin.com/njMa9buE)

以及此处的完整错误：http: [//pastebin.com/REemSken](http://pastebin.com/REemSken)

我一直在查看所有内容，但我一生都找不到问题所在，清单中的所有内容都已正确定义等。希望新的眼睛能找到问题所在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:12:43.243

你永远不会初始化`chk_RunVNC`. 它是`null`。你永远不会给它分配任何东西。所以这会抛出`NullPointerException`一个`onCreate()`：

```
chk_RunVNC.setOnCheckedChangeListener(chk_RunVNC_OnCheckedChange); 
```

# powershell - 使用命令作为参数从 vbs 运行 Powershell

> ID：11448365
> 
> 赞同：6
> 
> 时间：2012-07-12T09:01:54.663
> 
> 标签：powershell, vbscript

嘿，我想从一个 vbs 脚本运行一个 powershell 突击队。诸如启动 powershell.exe 并输入特定命令（例如 Restart-Service）。我认为类似的东西可以工作：

```
strCommand = "C:\WINDOWS\system32\WindowsPowerShell\v1.0\powershell.exe -command Restart-Service [service name]"

    Set WshShell = WScript.CreateObject("WScript.Shell") 
    Set objExec = WshShell.Exec(strCommand) 
```

有人知道我该如何管理吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T09:42:58.490

1）将您的powershell命令存储为powershell脚本。
2）使用vbs运行powershell

```
 Set objShell = CreateObject("Wscript.Shell")
 objShell.Run("powershell.exe -noexit c:\scripts\test.ps1") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T11:05:34.010

试试这个：

```
powershell -command '& {command to run}' 
```

/G

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-28T04:58:34.850

您可以使用最短的版本。

```
CreateObject("Wscript.Shell").Run ("powershell.exe -noexit $c= 'lola'; write-host $c -ForegroundColor green") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T10:43:20.117

试试这个：

```
Set objShell = CreateObject("Wscript.Shell")
objShell.Run("powershell.exe -noexit .\c:\scripts\test.ps1") 
```

或者将文件保存在 PS exe 所在的同一文件夹中，然后

```
Objshell.Run("powershell.exe -noexit .\test.ps1") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-21T16:29:33.097

在研究如何使用它来使用 VBScript 运行 PowerShell 脚本时，我遇到了如下所示的问题：

[![在此处输入图像描述](../Images/a1dbd9df6e473baa0ba39ba6941822f8.png)](https://i.stack.imgur.com/W8icD.png)

从那以后我就知道为什么它不起作用了。PowerShell 无法读取脚本位置中的空格。如上图所示，`C:\Users\lpeder6\Desktop\PowerShell_Scripts\Arrays\Arrays`当完整路径为`C:\Users\lpeder6\Desktop\PowerShell_Scripts\Arrays\Arrays - Clear Method.ps1`.

从我的路径名中删除所有空格和多余字符后，使用 VBScript 运行 PowerShell 脚本可以使用以下代码：

```
Set objShell = CreateObject("Wscript.Shell")
objShell.Run("powershell.exe -noexit -command C:\Users\lpeder6\Desktop\PowerShellScripts\GUIFiles\BasicGUIScript-ComboBox.ps1"),1,True 
```

当我运行它时，我得到的是：

[![在此处输入图像描述](../Images/b6de867e9815df1200bc30a874f17905.png)](https://i.stack.imgur.com/9tf94.png)

我希望这对某人有所帮助，因为这是我真的可以使用的信息。:)

# php - Asterisk 服务器将变量从拨号计划传递到 AGI 脚本

> ID：11448366
> 
> 赞同：3
> 
> 时间：2012-07-12T09:01:58.240
> 
> 标签：php, asterisk, asteriskami, agi

我的拨号方案是这样的

```
[dial-plan]
exten => s,1,Answer()
exten => s,n,Noop(exten = ${EXTEN}
exten => s,n,Macro(dumpvars)
exten => s,n,Macro(record-enable)
exten => s,n,AGI(success.php)
exten => i,1,Noop(REASON = ${REASON})
exten => i,n,Macro(dumpvars)
exten => i,n,AGI(faile.php)
exten => failed,1,Noop(REASON = ${REASON})
exten => failed,n,Macro(dumpvars)
exten => failed,n,AGI(faile.php) 
```

我想从哪里调用faile.php，它可能是从哪里调用的，也可能是从哪里调用`failed`的`i`。我怎样才能检查这个

我需要像这样做 faile.php

```
if($some_var == 1){
     //Invalid
}
elsif($some_var == 2){
    //Failed
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:46:05.520

将使用一些标准参数调用 agi，包括被调用的扩展名（在您的情况下，这将是`i`or `failed`）。确保您正在解析传递给脚本的参数（通过标准输入）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T19:56:48.157

在您的脚本中使用[phpagi.php](http://phpagi.sourceforge.net/)，它提供了 AGI 所需的所有解析。

或查看[http://www.voip-info.org/wiki/view/Asterisk+AGI+php上的示例](http://www.voip-info.org/wiki/view/Asterisk+AGI+php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:08:47.543

如果我正确理解了您的问题，您需要将一个变量传递给您的 PHP AGI 脚本。这是如何做到的：

```
exten => i,n,AGI(faile.php,invalid)

exten => failed,n,AGI(faile.php,failed) 
```

然后，您的 PHP AGI 脚本应如下所示：

```
#!/usr/bin/php -q
<?php
set_time_limit(30);
//load PHP AGI
require('phpagi/phpagi.php');
error_reporting(E_ALL);
$agi = new AGI();

$status = $argv[1];

if($status == "invalid")
{
  // invalid
} else
{ 
  // failed
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-06T08:43:31.283

这是我使用[php-agi.php实现相同的方法](http://phpagi.sourceforge.net/)

## failed.php（调用失败时执行）

```
<?php
    require_once "phpagi.php";
    require_once "phpagi-asmanager.php";

    $astman = new AGI();
    $astman->set_variable('CallState','failed');

?> 
```

## success.php（调用成功后执行）

```
<?php
    require_once "phpagi.php";
    require_once "phpagi-asmanager.php";

    $astman = new AGI();
    $astman->set_variable('CallState','success');

?> 
```

## hangup.php（将在通话结束时执行，如果通话失败或成功）

```
<?php
    require_once "phpagi.php";
    require_once "phpagi-asmanager.php";

    $astman = new AGI();
    $call_state = agi_get_var('CallState');
    if($call_state == "success"){
        //call was success
    }
    elseif($call_state == "failed"){
        //call was failed
    }
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-18T07:57:00.823

在拨号方案中

```
exten => _*999*.,1,Answer()
exten => _*999*.,n,Set(var1=1) 
exten => _*999*.,n,AGI(test.php,${var1}) 
```

在php中

```
<?php
    require('phpagi.php');

    $agi = new AGI();

    $agi->say_digit($argv[1]);

    $agi->hangup();
?> 
```

# javascript - Knockout js -> 绑定到可编辑的 div 文本？

> ID：11448367
> 
> 赞同：15
> 
> 时间：2012-07-12T09:01:59.003
> 
> 标签：javascript, knockout.js, dom-events

如何将 observable 绑定到可编辑的 div 文本内容？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-12T09:40:18.773

您将需要修改默认的“文本”绑定，以便它能够将编辑后的 ​​div 的内容写回 observable。此任务的简单自定义绑定处理程序如下所示：

```
ko.bindingHandlers.editableText = {
    init: function(element, valueAccessor) {
        $(element).on('blur', function() {
            var observable = valueAccessor();
            observable( $(this).text() );
        });
    },
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        $(element).text(value);
    }
}; 
```

但请注意，此示例代码需要 jQuery。

用法很简单：

`<div contentEditable="true" data-bind="editableText: foo"></div>`

这是一个示例（用 CoffeeScript 编写）：http: [//jsfiddle.net/aBUEu/1/](http://jsfiddle.net/aBUEu/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T09:28:12.960

默认情况下您不能这样做，因为更改可编辑 div 中的文本不会引发任何会更新模型中的值的事件。

为此，您将需要一个自定义绑定。您可以在这里阅读：http: [//knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

# c - pcap_compile() 表达式

> ID：11448369
> 
> 赞同：2
> 
> 时间：2012-07-12T09:02:11.997
> 
> 标签：c, pcap, libpcap, wifi

我正在“wlan”接口上使用 libpcap 库编写一个 pcaket 嗅探器程序。我想过滤捕获的数据包，以便只处理信标帧。因此，我为此编写了以下代码：

```
const char *str = "wlan subtype beacon";
printf("debug stmt1\n");

struct bpf_program *fp;
printf("debug stmt2\n");

if((pcap_compile(pkt_handle, fp, str, 1, PCAP_NETMASK_UNKNOWN)==-1)
{
    pcap_perror(pkt_handle, "Compile");
}
printf("debug stmt3\n"): 
```

但是在编译时，我在 pcap_compile() 语句上遇到了分段错误：

```
debug stmt1
debug stmt2
Segmentation fault 
```

那么，可能是什么问题？

操作系统：Ubuntu 10.10

**更新：**

我在 pcap_activate() 语句之前移动了 pcap_compile() 语句。该程序运行良好，仅捕获信标帧。但是，pcap_compile() 似乎仍然返回 -1，我在输出中得到以下语句：

```
Compile: 802.11 link-layer types supported only on 802.11 
```

可能是什么问题呢？我正在使用 Netgear USB 无线网卡。
**更新2：**

根据 nos 的建议，我进行了以下更改：

```
struct bpf_program *fp = (struct bpf_program *)malloc(sizeof(struct bpf_program)); 
```

但是，我仍然收到相同的消息：

```
Compile: 802.11 link-layer types supported only on 802.11 
```

知道那条消息是什么意思吗？

**更新 3：**
我还包含以下代码以确保我的 pcap 句柄指向正确的接口：

```
int *dlt_buf;
int n;
n = pcap_list_datalinks(pkt_handle, &dlt_buf);
printf("n = %d\n",n);
if(n == -1)
{
    pcap_perror(pkt_handle, "Datalink_list");
}
else
{
    printf("The list of datalinks supported are\n");
    int i;
    for(i=0; i<n; i++)
        printf("%d\n",dlt_buf[i]);
    const char *str1 = pcap_datalink_val_to_name(dlt_buf[0]);
    const char *str2 = pcap_datalink_val_to_description(dlt_buf[0]);
    printf("str1 = %s\n",str1);
    printf("str2 = %s\n",str2);
    pcap_free_datalinks(dlt_buf);
} 
```

这是我得到的输出：

```
n = 1
The list of datalinks supported are
127
str1 = IEEE802_11_RADIO
str2 = 802.11 plus radiotap header 
```

所以，我的 pcap 句柄指向正确的接口。但我仍然收到该错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:17:40.587

如前所述，崩溃是因为 fp 没有指向某个东西。如果一个函数接受一个类型为“{something} *”的参数，那并不意味着你需要，甚至*应该*，将一个类型为“{something} *”的变量传递给它；您应该将其传递给该类型的指针*值*。

在这种情况下，例如：

```
struct bpf_program *fp;
if((pcap_compile(pkt_handle, fp, str, 1, PCAP_NETMASK_UNKNOWN)==-1) 
```

{

是错误的，并且

```
struct bpf_program pgm;
if((pcap_compile(pkt_handle, &pgm, str, 1, PCAP_NETMASK_UNKNOWN)==-1) 
```

{

是正确的。

至于`pcap_compile()`之前的调用`pcap_activate()`，那是不正确的。您必须在调用*后*调用它`pcap_activate()`，否则`pcap_t`它没有链接层标头类型，并且`pcap_compile()`不会知道它应该为其生成代码的链接层标头的类型。（我已经检查了对 libpcap 的修复，以禁止调用`pcap_compile()`尚未激活的`pcap_t`.）

# mysql - 使用转储->导入或复制器克隆 MySQL

> ID：11448370
> 
> 赞同：0
> 
> 时间：2012-07-12T09:02:29.873
> 
> 标签：mysql, database-connection, mysqldump, mysql-backup

我有一个 LAMP (CentOS) 服务于大约 100 个正常的 CMS（主要是 Joomla）站点。我对文件进行了 rsync，但我还想将数据库备份到另一台服务器**offsite**。

我一直在阅读，据我所知，您可以将数据库转储到主服务器上，rsync 转储然后将它们导入备份服务器。另一种选择是使用 MySQL 自己的 Replicator。

复制器看起来很不错，但在我阅读的所有示例中，主从器似乎都在同一个 LAN 上。当您想通过 10mbps 连接进行异地复制时，这将如何工作？这个过程真的很重吗？每晚运行一次普通的转储->导入脚本会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:51:14.923

使用 innobackupex (http://www.percona.com/software/percona-xtrabackup/) 设置从站。300-400 mb 将在几分钟内备份。这是一个热备份，不需要锁定或关闭主节点。

您甚至可以将 DRBD 支持的存储用于辅助位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:15:54.633

您是否有理由希望在异地拥有第二台服务器？如果您只想备份，请使用 MySQLDump（或许多等效项之一）并将其转储到安全的地方（异地）。如果您想要一个复制主机用于其他用途，那么 MySQL 只需要两个主机之间的一些开放端口。所需的连接速度取决于主服务器上更新了多少数据。如果您不更新太多或对奴隶滞后没关系，那么它可以稍微慢一点。它很容易测试和查看。

一旦你获得了从站数据的初始副本，binlogs 就只包含更改。您是否知道当前主服务器上正在更改多少数据？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:21:32.133

如果你有很多没有改变的数据（我想你的 CMS 数据是一个多读少写的场景），那么复制会导致整体流量减少。

复制要求主服务器对从服务器执行所有事务，而每晚转储/重建要求您每晚传输所有数据（除非您有更复杂的增量备份解决方案，或者您可能停止复制并仅在晚上；也是一个复杂的解决方案）。

因为复制通过网络发送事务，您会发现它不会使用大量带宽，除非您在 CMS 中再次触发 BLOB，这可能不太可能。

复制比夜间转储/重建更难设置，需要更仔细地管理。另一方面，备份受益于停机时间，而停机时间在网络上变得越来越少......

# javascript - 基于安全模型通过javascript控制HTML控件的可见性

> ID：11448373
> 
> 赞同：1
> 
> 时间：2012-07-12T09:02:37.080
> 
> 标签：javascript, asp.net-mvc-3, security, knockout.js, viewmodel

例如：服务器端是 Asp.net MVC，客户端是 KnockoutJS。

从安全和标准的角度来看：服务器输出编辑链接和客户端代码然后根据 javascript viewmodel 属性（例如“HasEditPermission”）设置控件的可见性是否可以接受？

或者 MVC Razor 语法是否应该根据视图模型选择性地输出控件？

传统上，这一切都将在服务器端完成，但是现在大多数数据绑定都发生在客户端上，它通过在 Razor 和 KnockoutJS 中使用条件逻辑来混合关注点。

毋庸置疑，服务器会根据权限验证所有回发，因此不可能提升权限。公平地指出，“默默无闻不是安全”的概念确实在这里发挥了作用。仅仅因为不存在编辑链接并不意味着攻击者尝试您的网站/用户/编辑/1 并不明显

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:32:15.803

我对此的务实看法是，如果您可以在页面生成时以相当干净的方式通过 Razor 输出条件 Knockout 视图模型和数据绑定表达式等，而没有太多的黑客攻击和设计权衡，那么就这样做。但是，只要您没有在 Javascript 或 DOM（密码、秘密令牌等）中存储与安全相关的数据，那么我就不会因为使用客户端逻辑来决定是否使编辑链接等内容可见或不是。正如您所说，任何人都可以修改他们已被授予合法访问权限的现有 URL - 这就是资源本身在请求时进行适当检查的原因。

通常使用 Knockout 风格的 UI，您可能会根据动态客户端条件使某些链接/按钮可用 - 以及实际的“安全漏洞”与有人厚颜无耻地暴露不足的服务器保护代码并扰乱您的应用程序逻辑之间的区别通过用 Firebug 破解东西变得有点模糊。我会说做明智的事情，并且与您特定业务环境的风险/风险成比例。

# moodle - 如何在 Moodle 日历上获取用户的所有事件？

> ID：11448379
> 
> 赞同：2
> 
> 时间：2012-07-12T09:02:51.847
> 
> 标签：moodle

Moodle的日历可以显示用户自己的所有事件。我想要这样的功能：我是 Moodle 网站的网络管理员，我想获取所有事件，详细说明用户的所有事件。

如何在 Moodle 的日历上获取用户的所有事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:17:04.110

将用户 ID 中的函数`calendar_get_events`解析用作第三个参数和`false`第四个和第五个参数。

[http://docs.moodle.org/dev/Calendar_API#Retrieve_calendar_event_information](http://docs.moodle.org/dev/Calendar_API#Retrieve_calendar_event_information)

# model-view-controller - 外部化为 facelet 组件的表单无法调用 bean 方法

> ID：11448388
> 
> 赞同：0
> 
> 时间：2012-07-12T09:03:21.650
> 
> 标签：model-view-controller, jakarta-ee, jsf-2, richfaces

我有这种形式，当更改范围一时，应该重新生成线组合框。这是使用来自richfaces 的a4j 完成的。

![表格](../Images/2eeb7064369e1a8dde28989888552a60.png)

在我把它做成一个 facelet 组件之前它工作得很好，这是我的代码：

豆

```
@Getter
@Setter
@ManagedBean(name = "creerProduit")
@SessionScoped
public class CreerProduitBean implements Serializable {
    /** serial uid genere par eclipse */
    private static final long serialVersionUID = 7901115336087748268L;

    /** contenu des comboBox */
    private List<Gamme> listeGammesAffichables;// ce que contient la combox
    private List<Famille> listeFamillesAffichables;// ce que contient la combobox
    private List<Fournisseur> listeFournisseurAffichables;// ce que contient la combobox

    /** liste de toute les familles pour nos calculs */
    private List<Famille> listeFamilles;// la liste de toutes les famille (pour calculs)

    /** resultat du form*/
    private String nomFournisseur;
    private String nomFamille;
    private String nomGamme;
    private String designation;
    private String txRecu;
    private String txVerseCGP;
    private String txVerseDR;
    private String txIncompressible;
    private String indications;

    /**
     * Constructeur
     * Creates a new {@link CreerProduitBean} instance.
     * @throws Exception
     */
    public CreerProduitBean() throws Exception {
        ProduitDelegateImpl d = new ProduitDelegateImpl();
        // recuperation de toute les gamme et famille afin de
        // populer les comboBox
        listeGammesAffichables = d.readAll(Gamme.class);
        listeFournisseurAffichables = d.readAll(Fournisseur.class);
        listeFamilles = d.readAll(Famille.class);

        //permet de faire sauter le validator JSF
       // listeFamillesAffichables = d.readAll(Famille.class);
    }

    /**
     * fabrique le produit a partir des donnée affiché puis le sauvgarde
     * @return
     * @throws Exception
     */
    public String submit() throws Exception {
       ProduitDelegateImpl d = new ProduitDelegateImpl();

       Produit p = new Produit();
       p.setDesignation(designation);
       p.setRecu(Double.parseDouble(txRecu));
       p.setIncompressible(Double.parseDouble(txIncompressible));
       p.setVerseeAuCgp(Double.parseDouble(txVerseCGP));
       p.setVerseeAuDr(Double.parseDouble(txVerseDR));

       Famille f = new Famille();
       Gamme g = new Gamme();

       for (int i=0; i<listeGammesAffichables.size(); i++){
           if (listeGammesAffichables.get(i).getLibelle().equals(nomGamme)){
               g = listeGammesAffichables.get(i);
           }
       }

       for (int i=0; i<listeFamillesAffichables.size(); i++){
           if (listeFamillesAffichables.get(i).getLibelle().equals(nomFamille)){
               f = listeFamillesAffichables.get(i);
           }
       }

       f.setGamme(g);
       p.setFamille(f);

       d.create(p);

       return "../vues/rechercherProduit.xhtml";    
    }

    /**
     * Retourne la liste des famille disponible dans la gamme selectionée
     * @param event
     */
    public void filterFamily(javax.faces.event.ValueChangeEvent event){
        listeFamillesAffichables = new ArrayList<Famille>();
        for (int i=0; i<listeFamilles.size(); i++){
            if (listeFamilles.get(i).getGamme().getLibelle().equals((String)event.getNewValue())){
                listeFamillesAffichables.add(listeFamilles.get(i));
            }
        }
    }
} 
```

小面组件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <!-- 
    prend en parametre :
    nomGamme
    listeGammesAffichables
    nomFamille
    listeFamillesAffichables
    nomFournisseur
    listeFournisseurAffichables
    designation
    txRecu
    txVerseCGP
    txVerseDR
    txIncompressible
    indications
    >>>methode<<<<
    filterFamily
     -->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:mytaglib="http://mytaglib.com/facelets"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j">

        <h:panelGrid columns="4" width="800">
            <h:column>
                <h:outputText value="#{msg['Gamme']}" />:
            </h:column>
            <h:column>
                <h:selectOneMenu value="#{nomGamme}"
                valueChangeListener="#{filterFamily}">
                <f:selectItem itemLabel="-" itemValue="-" />
                <f:selectItems value="#{listeGammesAffichables}" var="g"
                itemValue="#{g.libelle}" itemLabel="#{g.libelle}" />
                <a4j:ajax event="valueChange" render="second" execute="@this" />
                </h:selectOneMenu>
            </h:column>
            <h:column>
                <h:outputText value="#{msg['Famille']}" />:
            </h:column>
            <h:column>
                <a4j:outputPanel id="second">
                <h:selectOneMenu value="#{nomFamille}">
                <f:selectItem itemLabel="-" itemValue="-" />
                <f:selectItems value="#{listeFamillesAffichables}" var="f"
                itemValue="#{f.libelle}" itemLabel="#{f.libelle}" />
                </h:selectOneMenu>
                </a4j:outputPanel>
            </h:column>
            <h:column>
                <h:outputText value="#{msg['Fournisseur']}" />: *
            </h:column>
            <h:column>
                <h:selectOneMenu value="#{nomFournisseur}">
                <f:selectItem itemLabel="-" itemValue="-" />
                <f:selectItems value="#{listeFournisseurAffichables}" var="g"
                itemValue="#{g.libelle}" itemLabel="#{g.libelle}" />
                </h:selectOneMenu>
            </h:column>
            <h:column>
            </h:column>
        </h:panelGrid>
        <br />
        <br />
        <h:outputText value="#{msg['DesignationProduit']}" />
        : *
        <br />
        <br />
        <h:inputText value="#{designation}" id="designation"
        style="#{component.valid ? '' : 'border-color:red;border-width:2px'}">
        <f:validateRegex pattern="^([a-zA-Z'àâéèêôùûçÀÂÉÈÔÙÛÇ0-9\s-]{1,30})$"></f:validateRegex>
        <rich:validator />
        </h:inputText>
        <h:message for="designation" />
        <br />
        <br />
        <h:outputText value="#{msg['TauxDeComission']}" />
        : *
        <br />
        <br />
        <h:panelGrid  columns="4" headerClass="heading"
        rowClasses="row1,row2">
        <h:column>
            <h:outputText value="#{msg['TxRecu']}" />
        </h:column>
        <h:column>
            <h:inputText value="#{txRecu}"
            style="#{component.valid ? '' : 'border-color:red;border-width:2px'}"
            id="TxRecu">
            <f:validateRegex pattern="^[0-9]*.?[0-9]+$"></f:validateRegex>
            <rich:validator />
            </h:inputText>
        </h:column>
        <h:column>
            <h:outputText value="#{msg['TxVerseCGP']}" />
        </h:column>
        <h:column>
            <h:inputText value="#{txVerseCGP}"
            style="#{component.valid ? '' : 'border-color:red;border-width:2px'}"
            id="TxVerseCGP">
            <f:validateRegex pattern="^[0-9]*.?[0-9]+$"></f:validateRegex>
            <rich:validator />
            </h:inputText>
        </h:column>
        <h:column>
            <h:outputText value="#{msg['TxVerseDR']}" />
        </h:column>
        <h:column>
            <h:inputText value="#{txVerseDR}"
            style="#{component.valid ? '' : 'border-color:red;border-width:2px'}"
            id="TxVerseDR">
            <f:validateRegex pattern="^[0-9]*.?[0-9]+$"></f:validateRegex>
            <rich:validator />
            </h:inputText>
        </h:column>
        <h:column>
            <h:outputText value="#{msg['TxIncompressible']}" />
        </h:column>
        <h:column>
            <h:inputText value="#{txIncompressible}"
            style="#{component.valid ? '' : 'border-color:red;border-width:2px'}"
            id="TxIncompressible">
            <f:validateRegex pattern="^[0-9]*.?[0-9]+$"></f:validateRegex>
            <rich:validator />
            </h:inputText>
        </h:column>
    </h:panelGrid>
    <br />
    <br />
    <h:outputText value="#{msg['Indications']}" />
    : *
    <br />
    <br />
    <h:inputTextarea value="#{indications}" cols="113"
        rows="10"
        style="#{component.valid ? '' : 'border-color:red;border-width:2px'}"
        id="indications">
        <f:validateRegex pattern="^([a-zA-Z'àâéèêôùûçÀÂÉÈÔÙÛÇ0-9\s-]{1,1000})$"></f:validateRegex>
        <rich:validator />
    </h:inputTextarea>
<br />
<br />
        <div class="boutons">
                <span><h:commandButton type="submit"
                        value="#{msg['Enregistrer']}" action="#{creerProduit.submit}" /></span> <span><h:commandButton
                        value="#{msg['Reinitialiser']}" type="reset" /></span> <span><h:commandButton
                        value="#{msg['Annuler']}" action="rechercherProduit.xhtml"
                        onclick="return confirm('#{msg['ConfirmerAnnulation']}');"
                        immediate="true" /></span>
            </div>
</ui:composition> 
```

这是我在 jsf 页面中的称呼：

```
<mytaglib:cmProduit 
                nomGamme="#{creerProduit.nomGamme}"
                listeGammesAffichables="#{creerProduit.listeGammesAffichables}"
                nomFamille="#{creerProduit.nomFamille}"
                listeFamillesAffichables="#{creerProduit.listeFamillesAffichables}"
                nomFournisseur="#{creerProduit.nomFournisseur}"
                listeFournisseurAffichables="#{creerProduit.listeFournisseurAffichables}"
                designation="#{creerProduit.designation}"
                txRecu="#{creerProduit.txRecu}"
                txVerseCGP="#{creerProduit.txVerseCGP}"
                txVerseDR="#{creerProduit.txVerseDR}"
                txIncompressible="#{creerProduit.txIncompressible}"
                indications="#{creerProduit.indications}"
                filterFamily="#{creerProduit.filterFamily}"
                 /> 
```

当我重新定义范围时，我的 tomcat 会这样说：

坟墓：/WEB-INF/forms/formProduit.xhtml @34,43 valueChangeListener="#{filterFamily}": /vues/creerProduit.xhtml @56,8 filterFamily="#{creerProduit.filterFamily}": 属性 'filterFamily'在 com.me.web.beans.produit.CreerProduitBean 类型上找不到 javax.faces.event.AbortProcessingException: /WEB-INF/forms/formProduit.xhtml @34,43 valueChangeListener="#{filterFamily}": /vues/creerProduit .xhtml @56,8 filterFamily="#{creerProduit.filterFamily}"：在类型 com.me.web.beans.produit.CreerProduitBean 上找不到属性“filterFamily”

知道为什么我不能调用这个方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:22:24.317

这不是一个复合组件。这也不是自定义组件。那是一个标签文件。您需要`<method-signature>`在`.taglib.xml`文件中将属性声明为方法表达式。否则，它将默认为一个值表达式，该表达式需要一个带有 getter/setter 的属性。

```
<attribute>
    <name>filterFamily</name>
    <method-signature>void method(javax.faces.event.ValueChangeEvent)</method-signature>
</attribute> 
```

在*真正的*复合组件中，您可以将其声明为`<cc:attribute method-signature>`。

```
<cc:attribute name="filterFamily" method-signature="void method(javax.faces.event.ValueChangeEvent)" /> 
```

### 也可以看看：

*   [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen)

# java - 弹簧砖和#

> ID：11448389
> 
> 赞同：0
> 
> 时间：2012-07-12T09:03:22.950
> 
> 标签：java, jquery, spring, tabs, tiles

我有一个基于 Spring 的 java 项目。在前端我有 jQuery。主要的 jQuery 组件是 Tabs，因此可以访问我的主页`http://myIp/project/myController#Tab1`

我需要去这个页面的方法：

*   通过重定向：redirect:/myController#Tab1 （并且这种情况有效）

*   [当验证失败时]我需要将它们通过`return "adminOperations#Tab1"`（这种情况不起作用）

'adminOperations' 的定义：

```
<definition name="adminOperations" extends=".mainTemplate" >
    <put-attribute name="title" value="Admin page" type="string" />
    <put-attribute name="content" value="/jsp/admin.jsp" />
    <put-list-attribute name="scripts" inherit="true">
        <add-attribute value="admin.js" type="string" />
    </put-list-attribute>
</definition> 
```

模板页面内容：

```
<html>
<head>
    <title><tiles:getAsString name="title" /></title>

    <tiles:useAttribute id="scripts" name="scripts" classname="java.util.List" />
    <!-- processing script & styles data -->
</head>
<body>
<div id="header">
    <div id="headerTitle"><tiles:insertAttribute name="header" /></div>
</div>
<div id="content">
    <tiles:insertAttribute name="content" />
</div>
<div id="footer">
    <tiles:insertAttribute name="footer" />
</div>
</body>
</html> 
```

如何在此图块中正确处理“#”符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:17:26.497

哈希纯粹是浏览器的事情。当您向类似的 URL`/foo.action#bar`发送请求时，浏览器会向 发送请求`/foo.action`，从响应中呈现 HTML，然后在 HTML 中找到具有`bar`名称或 ID 的锚点，然后滚动到该锚点。如果您向`/foo.action`（提交表单时）发送请求，则服务器无法更改浏览器发送请求的 URL 并告诉它转到`bar`锚点。

唯一的方法是生成一个 HTML 页面，其中包含在页面加载并跳转到栏锚时调用的 JavaScript 函数。请参阅[如何使用 jQuery 或 Javascript 将 HTML 页面滚动到给定的锚点？](https://stackoverflow.com/questions/3163615/how-to-scroll-html-page-to-given-anchor-using-jquery-or-javascript)如何做到这一点。

# php - 如何发送带有订阅框的电子邮件？

> ID：11448392
> 
> 赞同：0
> 
> 时间：2012-07-12T09:03:33.743
> 
> 标签：php, email, web

我想向里面有订阅框的用户发送电子邮件，以便这些订阅了我的网站时事通讯的用户。

可能吗？如果是，那么该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:10:00.767

作为解决方案之一，您可以使用 php 函数[mail](http://lv.php.net/manual/en/function.mail.php)向您的用户发送包含唯一（每个用户）链接的电子邮件。如果用户点击该链接（假设他打开它并被要求登录，以确认那是您的用户），那么他订阅了您的时事通讯。

PS 正如评论中已经提出的那样，您应该发布您已经尝试过获得详细答案的内容。

# c# - 如何设置项目的调试实例内存限制

> ID：11448393
> 
> 赞同：5
> 
> 时间：2012-07-12T09:03:40.977
> 
> 标签：c#, .net, visual-studio-2008

我们有一个项目出现“内存不足异常”。我正在尝试调试此内存泄漏问题。问题是生产机器有大约 1-2 GB 的内存，而开发机器有 6 GB。而且我发现重现崩溃非常困难。

在 Visual Studio 中有没有一种方法可以减少允许分配给调试实例的内存量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:01:11.423

机器中的 RAM 量与 OutOfMemoryException 无关。当进程用尽*虚拟*内存时，您将收到该异常，无法在地址空间中找到足够大以适应分配请求的漏洞。这通常发生在进程的 VM 大小在 32 位机器上开始接近 1.5 GB 时。

限制虚拟内存空间的数量很容易，只需在程序开始时创建一堆 byte[] 数组并将它们存储在静态变量中。这根本无助于诊断内存泄漏，它只会更快地触发异常。使用内存分析器找出真正的问题。

并且请考虑这根本不是泄漏的可能性，使用垃圾收集器泄漏并不是那么容易。但这只是程序处理和存储大量数据的副作用。使用 64 位操作系统可以轻松解决这个问题，它提供了大量的虚拟内存空间，仅受页面文件最大大小的限制。不是内存。

# iphone - iPhone 相册

> ID：11448396
> 
> 赞同：2
> 
> 时间：2012-07-12T09:03:50.643
> 
> 标签：iphone, objective-c, ipad

我是 iPhone 开发的新手。我想创建类似于显示的 safari 浏览器历史记录的图片库。任何人都可以帮助它怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:10:43.310

在您的项目中使用 Coverflow 动画。它与 safari 历史浏览器相同。看看这个[链接](http://www.cocoacontrols.com/platforms/ios/controls/icarousel) 和这个[链接](http://apparentlogic.com/openflow/)

# maps - 谷歌地图瓷砖的中心坐标

> ID：11448397
> 
> 赞同：2
> 
> 时间：2012-07-12T09:03:52.257
> 
> 标签：maps, center, tiles

我正在尝试为谷歌地图创建图块。我使用为我提供地图图像的第三方处理程序。处理程序需要输入中心的坐标和比例地理值。我想使用这个处理程序来创建所有的谷歌图块，但我需要所有图块的中心。

有什么方法可以计算给定缩放级别的瓷砖中心吗？

先谢谢了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-26T16:01:37.123

我之前问过这个问题，后来自己想通了：

[在 Google Maps API v3 中获取自定义图块的中心 LatLng 点](https://stackoverflow.com/questions/25990570/get-center-latlng-point-of-a-custom-tile-in-google-maps-api-v3/25991835#25991835)

如果为您提供 div 像素中心点，Wat 就可以，您可以将其转换为您想要的任何东西（在我的例子中：LatLng）。

# sql - 如何从select语句中的2个日期中获取最后一个日期

> ID：11448399
> 
> 赞同：1
> 
> 时间：2012-07-12T09:03:55.340
> 
> 标签：sql, oracle-sqldeveloper

我正在尝试在过程中创建选择语句。

这是我的代码：

```
SELECT u.id, max(a.time), max(b.time)
FROM buy a, sell b, users u
WHERE a.user_id = u.id AND b.user_id = u.id
GROUP BY u.id; 
```

我需要在`max(a.time)`和之间取最后一个日期`max(b.time)`。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:08:12.640

那这个呢？

```
SELECT 
  u.id, 
  CASE 
    WHEN max(a.time) > max(b.time) THEN max(a.time)
    ELSE max(b.time)
  END
FROM buy a, sell b, users u
WHERE a.user_id = u.id AND b.user_id = u.id
GROUP BY u.id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:05:37.860

```
SELECT u.id, max(case when a.time > b.time then a.time else b.time end)
FROM buy a, sell b, users u
WHERE a.user_id = u.id AND b.user_id = u.id
GROUP BY u.id; 
```

如果你的数据库支持别名查询，试试这个会更有效：

```
SELECT u.id, case when a_max > b_max then a_max else b_max end
FROM (SELECT u.id, max(a.time) as a_max, max(b.time) as b_max
    FROM buy a, sell b, users u
    WHERE a.user_id = u.id AND b.user_id = u.id
    GROUP BY u.id) x; 
```

如果存在索引，则内部查询可以使用索引来快速获取每列的最大值。

* * *

当我们这样做时，让我们使用现代连接语法重新编码：

```
SELECT u.id, max(case when a.time > b.time then a.time else b.time end)
FROM buy a
JOIN sell b ON b.user_id = u.id
JOIN users u ON a.user_id = u.id
GROUP BY u.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:12:48.133

```
SELECT U.ID, 
CASE WHEN MAX(A.TIME) > MAX(B.TIME) THEN MAX(A.TIME)
     ELSE MAX(B.TIME) 
END
FROM BUY A, SELL B, USERS U
WHERE A.USER_ID = U.ID AND B.USER_ID = U.ID
GROUP BY U.ID; 
```

# oracle - 即使数据库中不存在记录，也显示列表中的值

> ID：11448406
> 
> 赞同：2
> 
> 时间：2012-07-12T09:04:14.787
> 
> 标签：oracle

我有一个奇怪的情况，我想用计数器显示所有列表值我的测试表内容

```
name, misc
A, blah
B, 123
A, asd 
```

现在，此查询将只获取 A 和 B 的结果，但我如何显示 C“结果”

```
select name, count(*) from table 
where name in ('A','B','C') 
```

结果我想得到

```
A 2
B 1
C 0 
```

这个案子已经让我发疯了一天。请帮忙

干杯，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:24:42.913

我认为您必须对此类查询使用外部联接，例如：

```
WITH mylist AS (SELECT 'A' name FROM DUAL
                UNION ALL SELECT 'B' FROM DUAL
                UNION ALL SELECT 'C' FROM DUAL)
SELECT l.name, COUNT(t.name)
  FROM mylist l
  LEFT JOIN mytable t ON l.name = t.name
 GROUP BY l.name 
```

您可以使用表对象而不是 UNION ALL：

```
CREATE TYPE name_list_t AS TABLE OF VARCHAR2(30);
/

SELECT l.name, COUNT(t.name)
  FROM (SELECT column_value name FROM TABLE(name_list_t('A', 'B', 'C')) l
  LEFT JOIN mytable t ON l.name = t.name
 GROUP BY l.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:32:03.353

从这里获取拆分器功能：[如何在 oracle 中将 csv 转换为表](https://stackoverflow.com/q/3142665/319875)

接着

```
select a.column_value, count(t.name) 
from table(splitter('A,B,C')) a
left join table t on (t.name = a.column_value)
group by a.column_value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:27:12.453

您可以通过外部加入包含您的值列表的表来完成此操作：

```
WITH lookup AS (
SELECT decode(LEVEL
             ,1,'A'
             ,2,'B'
             ,3,'C') col1
  FROM dual
CONNECT BY LEVEL <= 3
)
,test AS (
SELECT decode(LEVEL
             ,1,'A'
             ,2,'A'
             ,3,'B') col1
     ,decode(LEVEL
             ,1,'blah'
             ,2,'123'
             ,3,'asd') col2        
  FROM dual
CONNECT BY LEVEL <= 3
) 
SELECT lookup.col1,count(test.col1)
  FROM lookup
      ,test
 WHERE lookup.col1 = test.col1 (+)
GROUP BY lookup.col1
; 
```

回报：

```
A   2
B   1
C   0 
```

在我的示例中，“查找”是动态生成的。您可以使用这种方法，或者最好使用您自己的值表列表。

# c# - 一旦它的功能范围结束，线程是否会自行停止？

> ID：11448408
> 
> 赞同：12
> 
> 时间：2012-07-12T09:04:28.543
> 
> 标签：c#, multithreading

```
Thread myThread = new Thread(new ParameterizedThreadStart(threadFunction));

public void threadFunction() {
 // Run a finite code
 ...
} 
```

问题是：`myThread`一旦`threadFunction()`结束会被处理掉吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-12T09:06:04.203

不需要处理线程。该类`Thread`没有实现`IDisposable`，也没有`Dispose`方法。

当你的线程完成时，你不需要做任何特别的清理工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:06:21.787

是的..线程将停止并在函数返回后被释放..
要保留线程，您必须执行类似的操作

```
while(true){} 
```

或者，如果您不希望您的线程被处置，因为创建一个新线程会消耗资源
，您应该使用`ThreadPool`.Net 中有一个同名的类。
所以每次你需要一个线程时，它都会从线程池中获取并使用

# java - 如何为我的 Spring MVC/Security RESTful Web 服务创建自定义 JSON 401 页面？

> ID：11448409
> 
> 赞同：2
> 
> 时间：2012-07-12T09:04:28.347
> 
> 标签：java, spring, spring-mvc, spring-security

我正在尝试使用 Servlet 3.0、Spring MVC 和 Spring Security 创建一个安全的静态 Web 服务。我想在 401 上返回自定义 JSON 消息，而不是 Servlet 容器返回的默认 HTML 消息。

我尝试了几种方法，但似乎无法使其正常工作。

我的控制器如下所示::

```
@Controller
@RequestMapping("/")
public class ApplicationController {

    private ApplicationFactory applicationFactory;

    @Inject
    public ApplicationController(ApplicationFactory applicationFactory) {
        super();
        this.applicationFactory = applicationFactory;
    }

    @RequestMapping(method = GET)
    @ResponseBody
    @Secured("ROLE_USER")
    public Application getApplicationInfo() {
        return applicationFactory.buildApplication(this);
    }

} 
```

我的 Spring Security 上下文如下所示：

```
<security:global-method-security secured-annotations="enabled" mode="aspectj" />

<security:http auto-config="true" use-expressions="true">
<security:http-basic />
</security:http> 
```

我尝试添加以下内容：

```
@ExceptionHandler(AccessDeniedException.class)
@ResponseBody
public Application accessDenied() {
    return applicationFactory.buildApplication(this);
} 
```

但它会被忽略。我尝试将“access-denied-page="/denied"” 添加到我的 security:http 标记中，并在我的控制器中使用以下内容：

```
@RequestMapping(value = "/denied", method = GET)
@ResponseBody
public Application accessDenied() {
    return applicationFactory.buildApplication(this);
} 
```

但它会被忽略。我尝试了一个自定义访问被拒绝处理程序，如下所示：

```
<security:http auto-config="true" use-expressions="true">
<security:http-basic />
<security:access-denied-handler ref="jsonAccessDeniedHandler" />
</security:http> 
```

唯一似乎有效的是以下内容：

```
@ExceptionHandler(Exception.class)
@ResponseBody
public Application accessDenied() {
    return applicationFactory.buildApplication(this);
} 
```

但这可以捕获所有内容，我只想自定义失败的身份验证。

最后，将它添加到我的 web.xml 也可以：

```
<error-page>
<error-code>401</error-code>
<location>/401</location>
</error-page> 
```

但我更愿意以编程方式或通过注释进行配置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:17:40.357

在 spring 3.0 中有一个注释 ResponseStatus

我像这样使用这个注释；

```
@ResponseStatus(value = 401)
@ExceptionHandler(value = HttpMessageNotReadableException.class)
@ResponseBody
public ErrorResponse handleJsonMappingException(HttpMessageNotReadableException e) { 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:26:54.503

要使用 @ResponseBody 并操作响应标头，请执行以下操作：

```
@RequestMapping(value = "/url", method = RequestMethod.GET, headers = { "Accept=application/json" })
public @ResponseBody
List handle(HttpServletResponse response,
@RequestHeader("headerID") String headerString) {
response.setHeader("responseHeaderProperty", String);
return service.doSomething();
} 
```

# .net - 正则表达式用 char 替换空格

> ID：11448411
> 
> 赞同：1
> 
> 时间：2012-07-12T09:04:41.467
> 
> 标签：.net

输入：`Test 1 | Test 2 | Test 3 | Test 4` 这里的字符`|`就像一个分隔符。

有人可以给我正则表达式或任何简单的方法来获取这样的字符串。这不应该影响 和 之间的`Test`空间`3`。

输出应该是`Test 1|Test 2|Test 3|Test 4`

不只有一个空间。空格可能不止一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:21:39.170

这可以用作正则表达式来匹配管道前后的多个空格

```
string pattern = @"\s+\u007C\s+";
string search = "Test 1 | Test 2 | Test 3 | Test 4";
string result = Regex.Replace(search, pattern, "|"); 
```

`\s+`匹配一个或多个空格
`\u007C`以匹配垂直管道`|`- 管道是正则表达式的保留字符，因此您必须使用 unicode 约定或转义管道，`\`因此模式将是

```
string pattern = @"\s+\|\s+"; 
```

此外，如果您想考虑混合情况，即在您可以将模式更改为之前或之后有没有空间的管道：

```
string pattern = @"\s*\|\s*"; 
```

`\s*`表示零个或多个空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:24:04.427

```
string text = "Test 1 | Test 2 | Test 3 | Test 4";

text = text.Replace(" | ", "|").Replace(" |", "|").Replace("| ", "|"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-28T11:34:11.277

非正则表达式方式是：

```
var tokens = input.Split('|');
foreach (var token in tokens)
{
    token.Trim();
}
string output = string.Join("|", tokens); 
```

这会拆分分隔符上的字符串，修剪各个标记以删除前导和尾随空格，然后使用分隔符重新连接标记。

# python - 在 max os x 中安装 Python matplotlib 库

> ID：11448412
> 
> 赞同：2
> 
> 时间：2012-07-12T09:04:44.577
> 
> 标签：python, matplotlib

我正在尝试为 Python 安装 matplotlib 库。安装没问题，但是当我在 Python 中导入 pylab（例如 import pylab as p）时出现以下错误。

* * *

```
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/mathtext.py", line 61, in <module>
    import matplotlib._png as _png

ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/_png.so, 2): Symbol not found: _png_set_longjmp_fn

  Referenced from: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/_png.so

  Expected in: flat namespace  in /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/_png.so 
```

* * *

Google 搜索表明链接错误（不查找 "_png_set_longjmp_fn" ）与 png 库的 32/64 位编译问题有关。

我尝试根据库中的 README.osx 文件重新安装 matplotlib，但未修复。我发现的其他方法没有解决它。另外，我检查了这些库是用 32 位还是 64 位编译的。相关的二进制文件支持两者（通用二进制文件），如下所示。

* * *

```
>file /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/_png.so 

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/_png.so: Mach-O universal binary with 2 architectures

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/_png.so (for architecture i386):   Mach-O bundle i386

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/_png.so (for architecture x86_64): Mach-O 64-bit bundle x86_64

>file /Library/Frameworks/libpng.framework/Versions/Current/libpng 

/Library/Frameworks/libpng.framework/Versions/Current/libpng: Mach-O universal binary with 2 architectures

/Library/Frameworks/libpng.framework/Versions/Current/libpng (for architecture x86_64): Mach-O 64-bit dynamically linked shared library x86_64

/Library/Frameworks/libpng.framework/Versions/Current/libpng (for architecture i386):   Mach-O dynamically linked shared library i386 
```

* * *

我的 OS X 版本是 Lion 10.7.4。你对这个问题有什么想法吗？谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:25:16.950

前几天我遇到了和你一样的问题`matplotlib import pyplot`。在将我的头撞到墙上五个小时后，这个解决方案对我有用（来自[实用计算.org](http://practicalcomputing.org/node/69)

我得到了这组命令来设置 simlinks：

```
sudo mkdir -p /usr/local/include
sudo ln -s /usr/X11/include/freetype2/freetype /usr/local/include/freetype
sudo ln -s /usr/X11/include/ft2build.h /usr/local/include/ft2build.h
sudo ln -s /usr/X11/include/png.h /usr/local/include/png.h
sudo ln -s /usr/X11/include/pngconf.h /usr/local/include/pngconf.h
sudo ln -s /usr/X11/include/pnglibconf.h /usr/local/include/pnglibconf.h
sudo mkdir -p /usr/local/lib
sudo ln -s /usr/X11/lib/libfreetype.dylib /usr/local/lib/libfreetype.dylib
sudo ln -s /usr/X11/lib/libpng.dylib /usr/local/lib/libpng.dylib 
```

它并不能完全解决您的所有问题，但它解决了我的 pkg-config 问题（等等）。也许类似的链接会对 QT 有所帮助。

# cygwin - 错误 [+2640] TreeBuildCommand：TB 命令必须按顺序排列

> ID：11448413
> 
> 赞同：0
> 
> 时间：2012-07-12T09:04:49.740
> 
> 标签：cygwin, speech-recognition, htk

我在 voxforge julius 教程中提供的示例教程中添加了一些单词，例如水果名称。我认为语法和 voca 文件是正确的，在最后一个错误中我被困在最后一步。

我检查了我的 monophones0 文件，我没有做任何更改，因为我只是复制了它，因为它在教程中使用 perl 命令制作了树。我不知道为什么我现在有这个错误。

TB 350.00 ST_a_2_ {} 基于树的聚类错误 [+2640] TreeBuildCommand：TB 命令必须按顺序排列

需要帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:15:14.547

您需要修改 perl 脚本才能使用您的手机。结果 tree.hed 不应该有这样的行

```
TB 350.00 ST_a_2_ {} 
```

相反，线条应该看起来像

```
TB 350 "ST_jh_2_" {("jh","*-jh+*","jh+*","*-jh").state[2]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T12:38:36.000

如果我错了，首先接受我的道歉。在 tree.hed 文件中有 TR0、TR2、TR1 三个部分。

在 TR2 部分，最后一行是：

> TB 350 "ST_sil_4_" {("sil", "-sil *+* " ,"sil+ *"* ,"-sil ").state[4]}

然后 TR1 部分从应该仅添加以下附加行的位置开始：

> TR 1
> 
> AU "./fulllist"
> 
> CO“./tiedlist”
> 
> ST "./树"

但就我而言，mkclscript.jl 脚本在我上面提到的两个部分之间添加了一些行。所以我删除了这些部分，它对我来说很好。我相信问题出在脚本上。希望能帮助到你。

# android - 安卓。布局背景延伸

> ID：11448416
> 
> 赞同：2
> 
> 时间：2012-07-12T09:05:08.443
> 
> 标签：android, background, screen

我想在RelativeLayout 中放置一个背景图像。背景图像中有一些物体，比如椅子、桌子、一些卡片等。

`android:background="@drawable/remy_menu_background"`但是这该死的东西在屏幕上被拉长了，卡片和桌子看起来被拉长了。

我应该怎么做，所以它在任何屏幕上看起来都不错？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T09:06:39.380

您可以使用使用标签禁用拉伸的 XML 可绘制对象：

```
<bitmap android:src="@drawable/background" android:gravity="center" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-29T05:29:24.440

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ImageView
    android:id="@+id/main_backgroundImage"
    android:layout_width="match_parent" // comment: stretches picture in the width if too small. 
                                           use "wrap_content" does not stretch, but leaves space
    android:layout_height="match_parent" // in my case I always want the height filled
    android:layout_alignParentTop="true"
    android:scaleType="centerCrop" // will crop picture left and right , so it fits in height and keeps aspect ratio
    android:contentDescription="@string/image"
    android:src="@drawable/your_image" />

<LinearLayout
    android:id="@+id/main_root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:14:39.387

您可以在这种情况下使用 .9.png 图像，并可以指定图像的哪个区域应该拉伸，哪些不应该拉伸。您可以使用 android-sdk 内“tools”文件夹下的“draw9patch”工具将任何 png 转换为 .9.png。

# c++ - 使用 std::shared_ptr 检测循环引用

> ID：11448418
> 
> 赞同：3
> 
> 时间：2012-07-12T09:05:15.040
> 
> 标签：c++, shared-ptr, std, googletest, googlemock

为了依赖注入（测试驱动开发）的目的，我正在使用很多接口。因此，我的很多对象都通过 std::shared_ptr 指向。我会使用 std::unique_ptr 但他们在谷歌模拟时没有所需的复制构造函数。

如果发生循环引用，我可以采取哪些措施以及早发现循环引用？

我正在使用谷歌测试在 linux 平台上工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T10:13:27.233

使用共享指针自动检测循环引用是不可能的，我用来检测循环引用的一种技术是通过以下方式显式执行此操作。维护一个全局可访问的`std::vector< T* >`，在所有 ctors 中将对象添加到向量中，然后在 dtors 中将其删除。然后在 main 结束时，您只需检查向量是否为空，如果不是，那么您可能在某处有循环引用，并且向量将帮助您找到位置。如果您拥有由静态分配的对象拥有的共享指针，则很容易遇到误报，尤其是在应用静态初始化顺序惨败时。

在 boost 中，有一个定义`BOOST_SP_ENABLE_DEBUG_HOOKS`，通过它可以在所有类型的应用程序范围内执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:05:55.570

If you have a graph of homogenous objects (ie, `Node -> Node -> Node ...`), you can use the usual cycle-detection algorithms.

If your graph is heterogenous (`Document -> Element -> Table -> Document` or whatever), traversing it might be just too painful ... although perhaps feasible with a clever custom iterator type.

In that case, it's more usual to structure your ownership semantics so there can be no cycle, perhaps using `weak_ptr` to break statically-identifiable cycles.

# ruby-on-rails - 如何在黄瓜中为 Given,And,Then 编写普通小黄瓜

> ID：11448419
> 
> 赞同：-1
> 
> 时间：2012-07-12T09:05:15.750
> 
> 标签：ruby-on-rails, cucumber

我需要编写一个适用于 And,Then,Given 的步骤定义。格式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:54:40.997

Cucumber 实际上并不关心您是否使用“Given”、“And”、“When”或“Then”定义了步骤定义。基本上任何 Given/And/When/Then 都会使用匹配的正则表达式调用任何步骤定义，而不管它说 Given/And/When/Then。

例如：

所有给定/和/何时/然后使用相同正则表达式的功能：

```
Feature: Shared Step

    Scenario: Given And When Then
        Given general step
        And general step
        When general step
        Then general step 
```

与正则表达式匹配的单步定义：

```
Given /general step/ do
    puts 'shared step'
end 
```

给出以下结果，这表明即使步骤定义为“Given”，所有人都使用相同的步骤定义：

```
 Scenario: Given And When Then # features\test.feature:3
    Given general step          # features/step_definitions/steps.rb:1
      shared step
    And general step            # features/step_definitions/steps.rb:1
      shared step
    When general step           # features/step_definitions/steps.rb:1
      shared step
    Then general step           # features/step_definitions/steps.rb:1
      shared step

1 scenario (1 passed)
4 steps (4 passed)
0m0.011s 
```

# c# - C# 列表和内存

> ID：11448421
> 
> 赞同：3
> 
> 时间：2012-07-12T09:05:16.933
> 
> 标签：c#, memory

我是 C# 的新手，想知道 list1 在 list1 = null 之后是否真的从内存中删除了；

```
List<string> list1 = new List<string>()
{
    "carrot",
    "fox",
    "explorer"
};
List<string> list2 = new List<string>();
list2.Add(list1[0]);
list2.Add(list1[1]);
list2.Add(list1[2]);

list1 = null; 
```

此代码仅用于文档，在我的真实案例中 list1 对象非常大，我需要将其从内存中删除，并且仅使用 list2 继续，它是原始 list1 的一小部分。

我假设 list1[0] 和 list2[0] 引用内存中的同一个对象，直到我用新值更新 list2[0] ......这是正确的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:12:25.343

有几个问题。让我试着分别回答他们：

1.  当对 list1 的引用设置为 null 时，是否会从内存中删除 list1？

    不，当垃圾收集器下次清理堆时，列表会从内存中删除。何时进行清理取决于垃圾收集器。

2.  list1 和 list2 是否引用相同的对象？

    对，他们是。

所以总而言之，这意味着您不必处理内存管理。这是由垃圾收集器完成的。垃圾收集器足够聪明，知道何时必须收集孤立对象。所以不要试图比GC做得更好。几乎在每一种情况下，情况都会变得更糟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:15:59.123

您必须考虑不同的问题：

*   您必须考虑如何定义 List 类，请参阅 [http://msdn.microsoft.com/it-it/library/6sh2ey19.aspx](http://msdn.microsoft.com/it-it/library/6sh2ey19.aspx)（通过接口层次结构导航）

*   您还必须考虑是否可以释放 List 的基本类型 T 以释放所有资源

*   C# 是基于垃圾收集器的

*   请阅读以下文章：

    [http://msdn.microsoft.com/en-us/magazine/cc163392.aspx](http://msdn.microsoft.com/en-us/magazine/cc163392.aspx)

    [http://msdn.microsoft.com/en-us/library/b1yfkh5e.aspx](http://msdn.microsoft.com/en-us/library/b1yfkh5e.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T09:08:22.720

C# 不是 C/C++ - 没有直接的内存管理。

列表对象将不再可访问（假设这是使用它的所有代码），因此将无法从对象根访问。这将允许 GC 将其标记为收集。

一旦 GC 收集，内存将被回收。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T09:09:48.053

无法保证该列表将被删除。当您分配 null 时，它有资格进行垃圾收集，并且每当调用 GC 时，它都会收集它。

**来自 MSDN：**

一旦对象符合销毁条件，则在稍后的某个未指定的时间运行对象的析构函数（如果有）。除非被显式调用覆盖，否则对象的析构函数只运行一次。

一旦对象的析构函数运行，如果该对象或其任何部分不能被任何可能的继续执行访问，包括析构函数的运行，则该对象被视为不可访问并且该对象有资格被收集。

最后，在对象符合收集条件后的某个时间，垃圾收集器会释放与该对象关联的内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T09:11:42.587

当垃圾回收发生时，它的内存将被回收。

有关详细信息，请参阅[垃圾收集基础](http://msdn.microsoft.com/en-us/library/ee787088.aspx)。（垃圾回收的条件）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-12T09:17:31.053

保持对 null 的引用不会删除内存，但最终会被垃圾收集。

GC 神话：将对象的引用设置为 null 将强制 GC 立即收集它。

GC 真相：将对象的引用设置为 null 有时会允许 GC 更快地收集它。

[你可以在这里](http://blogs.msdn.com/b/clyon/archive/2004/12/01/273144.aspx)阅读更多

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T10:12:44.710

在您的代码中， list1 和 list2 指向不同的位置。
只需更改该`list1[1] = "Something different"`行之前的值`list1 = null`并在即时窗口中检查该值`list2[1]`仍将保持“狐狸”。

但是，如果您使用

```
List<string> list2 = list1; 
```

那么 list2[1] 将是“不同的东西”。

注意：在这两种情况下，使*list1 = null*不会对 list2 产生影响，它仍然会包含值。

# shell - (find . -name *.cpp) 和 (find . -name "*.cpp") 之间的区别

> ID：11448426
> 
> 赞同：2
> 
> 时间：2012-07-12T09:05:38.663
> 
> 标签：shell, find

我对这两个句子感到困惑：

A. `find . -name *.cpp`
B.`find . -name "*.cpp"`

正则表达式仅适用于情况B。我很高兴向U学习。谁可以解释一下，更多细节。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:12:46.760

您在这里的重点是传递给“-name”选项的参数。我们想要“find”，而不是包含 Shell (bash / tcsh / zsh) 来解释它。

当您放置**“*.cpp”**时，您实际上允许“查找”程序看到“*.cpp”，然后执行转换为以“.cpp”结尾的所有文件的列表。

当您只输入***.cpp**时，Shell 甚至会在将参数传递给 find 命令（称为[globbing](http://en.wikipedia.org/wiki/Glob_%28programming%29)）之前执行替换。find 命令实际得到的不是一个模式，而是一组文件。这导致 ：

“查找. **-name A.cpp** *B.cpp ... Z.cpp* ”

带有*斜体*名称的文件不是“-name”标志的参数，因此是意外行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:11:16.057

如果在您运行 find 命令的当前目录中有任何 .cpp 文件，那么如果没有引号，您的 shell 将扩展通配符并调用

```
find . -name file1.cpp file2.cpp ... 
```

使用引号，星号直接通过查找而无需扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:11:42.140

> -name 模式 文件名的基础（删除了前导目录的路径）与 shell 模式模式匹配。元字符（'*'、'?' 和 '[]'）匹配一个 '.' 在基本名称的开头（这是 findutils-4.2.2 中的更改；请参阅下面的标准一致性部分）。[...] **不要忘记将模式括在引号中，以防止它被 shell 扩展**。

从查找手册

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:10:02.533

在第一个命令中，`*.cpp`由您的 shell 扩展，但在第二个命令中，`*.cpp`原封不动地传递给 find，谁可以在每个子目录中使用它来查找正确的文件。

假设您有两个包含 C++ 文件的子目录：

```
a.cpp
e.cpp
sub1/
  b.cpp
  c.cpp
sub2/
  d.cpp 
```

第一个命令 ( `find . -name *.cpp`) 等价于`find . -name a.cpp e.cpp`，这不是你想要的！如果当前目录下没有 cpp 文件，它将找不到任何东西。

逃避`*`以防止外壳扩展它的另一种方法是使用：`find . -name \*.cpp`. 这不是你应该使用的东西，但它可以帮助你理解手头的问题。

# iphone - 如何在 iPhone 的下拉框中选择多个项目并在文本框中显示？

> ID：11448427
> 
> 赞同：0
> 
> 时间：2012-07-12T09:05:41.253
> 
> 标签：iphone, objective-c, ios

我是一名 iPhone 开发人员。我正在尝试在 iPhone 的下拉框中选择多个项目。我已经尝试了所有可能性，但无法做到。请给我建议。这对我来说真的很重要。请尽快发表您的看法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:03:37.300

我假设下拉框是指为某种选择字段显示的内置选择器视图。如果您发布了您正在谈论的组件，那就太好了。无论如何，根据我可以对您的问题做出的假设，我认为您正在寻找的是这个答案：[UIPickerView 中的多行选择](https://stackoverflow.com/questions/2903004/multiple-row-selection-in-uipickerview)。

# passwords - 是否可以在不创建新数据库连接的情况下验证 Sqlanywhere 系统用户？

> ID：11448428
> 
> 赞同：2
> 
> 时间：2012-07-12T09:05:54.857
> 
> 标签：passwords, sqlanywhere

在 Sybase Sqlanywhere 中，系统用户存储在 sys.sysuser 中。

这是表中的示例行，用于用户“dba”，密码为“sql”。

```
user_id 1
object_id 175
user_name 'DBA'
password 0x013819f1b5d5a9fd1ba98e5b999239277b6296bee4bc28653802cd103d50fa76141aef7500
login_policy_id 173
expire_password_on_login_policy_id 0
password_creation_time '2012-02-23 11:24:32.000'
failed_login_attempts 0
last_login_time '2012-06-27 17:33:00.000' 
```

我想知道密码是如何散列的，或者是否有人知道可以调用以在 Sqlanywhere 中验证用户名密码组合的过程或函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T12:25:16.083

SQL Anywhere 中的密码使用 SHA-256 算法进行哈希处理，但执行此操作的确切方法尚未公布。在 16.0 或更高版本中，您可以使用[sa_verify_password()](http://dcx.sybase.com/index.html#sa160/en/dbreference/sa-verify-password-system-procedure.html%2ad5e85245)存储过程来验证*当前*用户的密码。

如果要验证*其他*用户的密码，或者如果您使用的是 v16 之前的服务器，验证密码的唯一方法是尝试使用该密码进行连接。

*免责声明：我在 Sybase 的 SQL Anywhere 工程部门工作。*

# web-services - GlassFish Web Profile 是否支持 Web 服务？

> ID：11448430
> 
> 赞同：1
> 
> 时间：2012-07-12T09:05:59.967
> 
> 标签：web-services, jaxb, glassfish, jax-ws

我们更喜欢 Glassfish（Web Profile）的轻量版，但也需要 Web 服务支持。

他们[在这里](http://glassfish.java.net/webprofileORfullplatform31x.html)说，只有完整版具有 JAX-WS 2.2 和 JAXB 2.2，它们是 AFAIN，是 Web 服务的基础。

但是，我知道这两个也附带 JDK6，所以我的问题是，部署在 JDK 6 上的 Web Profile 模式下的 GlassFish 是否也支持 Web 服务？如果这只是 JAX-WS 和 JAXB 不同版本的问题，会不会造成任何问题？

# cookies - Cloud 9 IDE 仪表板未加载

> ID：11448433
> 
> 赞同：2
> 
> 时间：2012-07-12T09:06:12.743
> 
> 标签：cookies, proxy, cloud9-ide

几周后，使用 3 个不同的浏览器（chrome dev、firefox、internet explorer）我无法加载我的仪表板，网站速度很慢（互联网连接确实非常好），登录后，网站变为空白（或很少浅蓝色取决于尝试）并保持加载无限时间......几分钟后，它结束加载，但完全空白。

如果这有助于理解问题，我在代理之下。

windows XP chrome dev（目前为 20） chrome stable firefox 9 internet explorer 8

我尝试删除浏览器缓存/cookies ...（即使在我从未尝试使用cloud9的浏览器中）我尝试使用c9.io和cloud9ide.com，结果都相同。

一些建议？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:22:55.903

我有这个完全相同的问题。我认为这与他们最近所做的一些更新有关，这些更新与您帐户中可能拥有的旧项目不兼容。

出于某种奇怪的原因，我能够让仪表板（仅）加载到一台机器上。我的解决方法是下载我所有的旧项目，完全删除所有项目和我的帐户，然后重新创建它并上传你下载的项目。

# c - 块内的静态函数声明

> ID：11448436
> 
> 赞同：3
> 
> 时间：2012-07-12T09:06:32.290
> 
> 标签：c

有[教程](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=/com.ibm.vacpp7a.doc/language/ref/clrc03statdef.htm)说

> **您不能将块内的函数声明为静态的。**

是什么原因？对功能有什么影响？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T09:24:26.547

`static`当应用于函数时，意味着该函数具有**内部链接**。即它只能在这个文件中被访问。换句话说，它有**file-scope**。无论您是在另一个函数内部还是在所有函数外部声明一个函数，此链接都适用。

现在，如果您将`static`关键字应用于另一个块/函数内的函数*声明，***从语义上讲**，您正试图将函数的范围限制为该特定块/函数，这违反了声明该`static`函数的语言规则，而不管其申报地点，应有档案范围。

因此，标准**可能**禁止这样的声明。

**PS** ：最新C11标准状态中的`30`脚注-`6.2.3`

> 只有在文件范围内，函数声明才能包含存储类说明符**static ；**

# vba - 退出 Excel 并注销时出错

> ID：11448437
> 
> 赞同：1
> 
> 时间：2012-07-12T09:06:33.930
> 
> 标签：vba, excel, quit, logoff

我需要一些有关 Excel VBA（Windows 7 上的 2010）的帮助。我想要做的是关闭 Excel，然后关闭电脑。我的代码是：

```
Declare Function ExitWindowsEx& Lib "User32" (ByVal uFlags As Long, ByVal dwReserved AS Long)
Global Const EWX_LOGOFF = 0
Global Const EWX_FORCE = 4

....Main Code Here ....

Application.DisplayAlerts = False
Application.Quit

Action = ExitWindows(EWX_LOGOFF or EWX_FORCE, 0) 
```

间歇性地我收到以下错误：

> 无法退出 Microsoft Excel

机器仍然注销，这是我想要的，所以这不是一个主要问题。我只想干净利落地退出。我保留了 EWX_FORCE 因为我不想被 Windows 提示。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:02:59.957

也许`DoEvents`之后失踪？`Application.Quit`包括在内，以便 Excel 有足够的时间关闭，否则您将收到错误。顺便说一句，这对我有用。

此外，如果打开了任何工作簿/工作簿，那么最好在有/没有保存代码的情况下关闭它/它们，因为您可能会丢失数据。

```
Public Declare Function ExitWindowsEx Lib "user32" (ByVal dwOptions As Long, _
ByVal dwReserved As Long) As Long

Public Const EWX_LogOff As Long = 0
Public Const EWX_SHUTDOWN As Long = 1
Public Const EWX_REBOOT As Long = 2
Public Const EWX_FORCE As Long = 4

Sub Sample()
    '
    '~~> Main Code Here
    '
    Application.DisplayAlerts = False
    Application.Quit

    DoEvents

    ExitWindowsEx EWX_LogOff Or EWX_FORCE, &HFFFF
End Sub 
```

# css - IE 显示两个 div 之间的差距，但在 chrome 中没有

> ID：11448439
> 
> 赞同：1
> 
> 时间：2012-07-12T09:06:39.317
> 
> 标签：css, html

我们有如下简单的 div。这里的问题是 div gpsDataDiv 和 map div inIE 之间存在差距。其次，gpsDataDiv 是具有动态表的字段，使用此方法 document.getElementById("gpsDataDiv").innerHTML = htmlString; 再次在 IE 中，表格就在下方，并且不会停在 400 像素处，因此不会像在 chrome 或 firefox 中那样生成滚动条。

```
 <body>
 <div id="left" style="width:220px;height:350px;float:left;background:white;">
      <div id="gpsDataDiv" style="overflow: auto; max-height: 400px;background:white;"></div>
</div>
 <div id="map" style="top:0px;left:220px;height:100%">Map goes here.
  </div>    
 </body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:16:35.893

带有 id 的 div在样式`map`中没有`position:absolute`，这是您在单独的样式表中拥有的东西吗？

几个建议：

**1.**

您`float:left;`与绝对定位的元素（？）混合。您需要确保容器（在这种情况下为主体）已`overflow:hidden`应用于它，或者使用[clearfix](http://www.webtoolkit.info/css-clearfix.html)。这将阻止容器崩溃，并可能导致页面下方出现问题。

**2.**

其次，您应该能够通过使用针对每个浏览器的单独样式表（[尝试搜索特定样式表](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)）或尝试我在 html 元素上使用类的方法来更改不同浏览器中的样式

```
<!--[if lt IE 7 ]> <html class="ie6" lang="en" xml:lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7" lang="en" xml:lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8" lang="en" xml:lang="en"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9" lang="en" xml:lang="en"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html class="" lang="en"> <!--<![endif]--> 
```

**3.**

确保您的页面上有一个 doctype，尝试使用下面的 html 5 doctype。如果您不指定 doctype，则页面可以进入 quirks 模式。这绝对是你不想要的！

```
<!DOCTYPE html> 
```

**4.**

尝试更改`max-height: 400px;`为`height: 400px`开启`id="gpsDataDiv"`

* * *

如果这些都没有帮助你，你能把你的问题放在一起吗？它会帮助我为你调试它:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:19:55.920

我试图重现你的问题。如果我将 height: 400px 添加到 gpsDataDiv，它似乎在 IE 中正确显示。

# oracle10g - 预期结果不佳

> ID：11448440
> 
> 赞同：1
> 
> 时间：2012-07-12T09:06:54.053
> 
> 标签：oracle10g, procedure

我有两张这样的桌子

> 通量_ISU_EQU

```
ID  NUMBER(38,0)
EQU_CODE    VARCHAR2(10 BYTE)
DATE_DERNIERE_MODIF DATE 
```

> FLUX_ISU_EQU_AFF_TAB

```
ID  NUMBER(38,0)
EQU_ID  NUMBER(38,0)
DATE_DEBUT  DATE
DATE_FIN    DATE
TYPE_EQU    VARCHAR2(10 BYTE)
CODE_REGION VARCHAR2(10 BYTE) 
```

我的表中有这样的数据：

> 通量_ISU_EQU

![在此处输入图像描述](../Images/aa9e284ddfc46338f2c7ed563cb8355b.png)

> FLUX_ISU_EQU_AFF_TAB

![在此处输入图像描述](../Images/1ff4ef360dda506a1a3951f3ac92a8cf.png)

我有这样的程序：

```
PROCEDURE DONNEES_IS_PRESENT(equ_id IN NUMBER, isCheckDonnees IN OUT BOOLEAN) IS
nbEquipement NUMBER;
BEGIN
nbEquipement := 0;
select count(*) into nbEquipement from flux_isu_equ_aff_tab fieat, flux_isu_equ fie where fieat.EQU_ID = fie.id AND fie.id = equ_id;
  IF nbEquipement = 0 THEN
    isCheckDonnees := false;
    Pk_Compas_Util.LOG_ERROR('Pk_Compas_Flux_Isu.IMPORT_EQUIPEMENT_EAI', 'IMPORT_EQUIPEMENT_EAI', equ_id, NULL, NULL, 'Acune correspondance pour l''id '''||equ_id||''' dans la table FLUX_ISU_EQU_AFF_TAB', NULL);
  END IF;
END; 
```

那么，为什么当我执行我的程序 nbEquipement = 3 而不是 nbEquipement = 1 时。

为什么..？

PS：当我这样做的时候

```
select count(*)  from flux_isu_equ_aff_tab fieat, flux_isu_equ fie where fieat.EQU_ID = fie.id AND fie.id = 2; 
```

我有一个结果

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:22:03.650

在以下查询中

```
select count(*) into nbEquipement from flux_isu_equ_aff_tab fieat, flux_isu_equ fie where fieat.EQU_ID = fie.id AND fie.id = equ_id; 
```

equ_id 指的是表的字段。由于 FLUX_ISU_EQU_AFF_TAB 有一列 equ_id。因此，您有一个看起来像这样的连接。`fieat.EQU_ID = fie.id`

你应该做的很简单。只需将变量重命名为 IN_EQU_ID 或 PARAM_EQU_ID 即可。您的查询应如下所示：

```
select count(*) into nbEquipement from flux_isu_equ_aff_tab fieat, flux_isu_equ fie where fieat.EQU_ID = fie.id AND fie.id = in_equ_id; 
```

存储过程应如下所示：

```
create or replace
PROCEDURE DONNEES_IS_PRESENT(in_equ_id IN NUMBER, isCheckDonnees IN OUT BOOLEAN) AS
nbEquipement NUMBER;
BEGIN
nbEquipement := 0;
select count(*) into nbEquipement from flux_isu_equ_aff_tab fieat, flux_isu_equ fie where fieat.EQU_ID = fie.id AND fie.id = in_equ_id;
  IF nbEquipement = 0 THEN
    isCheckDonnees := false;
    --Pk_Compas_Util.LOG_ERROR('Pk_Compas_Flux_Isu.IMPORT_EQUIPEMENT_EAI', 'IMPORT_EQUIPEMENT_EAI', equ_id, NULL, NULL, 'Acune correspondance pour l''id '''||equ_id||''' dans la table FLUX_ISU_EQU_AFF_TAB', NULL);
  END IF;
END; 
```

我认为最好是所有参数都以 IN_ 或类似名称为前缀，这样您的参数名称就不会与字段名称相同

# qt - 即使套接字上的数据为 0，qsocketnotifier 也会连续触发激活信号

> ID：11448446
> 
> 赞同：1
> 
> 时间：2012-07-12T09:07:03.263
> 
> 标签：qt, qt4.7, qt5

我正在尝试将 qsocketnotifier 与 TCP 套接字一起使用，问题是 qsocketnotifier 即使在套接字上没有要读取的数据时也会持续触发“激活”信号。我已经在“阻塞”和“非阻塞”模式下在套接字上尝试过这个。行为是一样的。有没有人看到过这个？我正在粘贴下面的代码。

```
 QSocketNotifier *notifier = new QSocketNotifier(gwSocketId, QSocketNotifier::Read, this);
    connect(notifier, SIGNAL(activated(int)), this, SLOT(processClientEvents())); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T12:50:31.857

从[`QSocketNotifier`文档](http://doc.qt.nokia.com/4.7-snapshot/qsocketnotifier.html#details)：

> 尽管该类称为 QSocketNotifier，但它通常用于除套接字之外的其他类型的设备。QTcpSocket 和 QUdpSocket 通过信号提供通知，因此通常不需要在它们上使用 QSocketNotifier。

[`QTcpSocket`](http://doc.qt.nokia.com/4.7-snapshot/qtcpsocket.html)继承自[`QIODevice`](http://doc.qt.nokia.com/4.7-snapshot/qiodevice.html)，因此具有信号[`readyRead()`](http://doc.qt.nokia.com/4.7-snapshot/qiodevice.html#readyRead)。我认为这个信号就是你所追求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T02:03:30.810

我在使用 QSocketNotifier + QTextStream 从标准输入中读取时遇到了同样的问题。如果通过一次写入将多行发送到应用程序，我将获得比要读取的行更多的 QSocketNotifier::activated() 信号。导致一个额外的 QTextStream::readLine() 调用会阻塞，导致我的应用程序中的事件处理停止，直到我发送另一行。

我尝试使用 QTextStream::readAll ，但它总是阻塞直到文件结束，使得问题出现在第一个 QSocketNotifier::activated() 信号上。

在试图弄清楚如何判断在进入阻塞 QTextStream::readLine() 调用之前是否实际上有任何数据要从标准输入读取之后，我终于停止使用 QTextStream 并改用 fgets() 。这似乎解决了我的问题。

这是一些示例代码（未调整为处理非常大的行，这是给读者的练习）。希望这可以避免我在试图解决这个问题时遇到的麻烦。我已经投入了一些额外的信号/事件处理，因为这是确定您是否进入阻塞状态的可靠方法。

示例 StdinReader 标头：

```
#include <QCoreApplication>
#include <QSocketNotifier>
#include <QTimer>
#include <cstdio>

class StdinReader : public QObject
{
  Q_OBJECT

public:
  StdinReader(QObject* parent = 0)
    : QObject(parent),
      notifier(new QSocketNotifier(fileno(stdin), QSocketNotifier::Read, this))
  {
    connect(this, SIGNAL(sigOutputData(QString)), SLOT(outputData(QString)));
    connect(notifier, SIGNAL(activated(int)), SLOT(consumeData()));
    notifier->setEnabled(true);
    QTimer::singleShot(1000, this, SLOT(timerTick()));
  }

  ~StdinReader() { }

signals:
  void sigOutputData(QString);

private slots:
  void outputData(QString data)
  {
    fprintf(stdout, "Data: %s\n", data.trimmed().toUtf8().constData());
    fflush(stdout);
  }

  void timerTick()
  {
    emit sigOutputData(QString::fromUtf8("tick"));
    QTimer::singleShot(1000, this, SLOT(timerTick()));
  }

  void consumeData()
  {
    notifier->setEnabled(false);

    fprintf(stdout, "Reading\n");
    fflush(stdout);

    char sbuf[8192];
    if (!fgets(sbuf, sizeof(sbuf), stdin)) {
      fprintf(stdout, "EOF\n");
      fflush(stdout);
      QCoreApplication::exit();
      return;
    }

    emit sigOutputData(QString::fromUtf8(sbuf));

    notifier->setEnabled(true);
  }

private:
  QSocketNotifier* notifier;
}; 
```

示例 main()

```
int main(int argc, char *argv[])
{
  QCoreApplication a(argc, argv);
  new StdinReader(&a);
  return a.exec();
} 
```

# php - 如何使用 ganon DOM 解析器删除所有样式表

> ID：11448454
> 
> 赞同：2
> 
> 时间：2012-07-12T09:07:35.700
> 
> 标签：php, dom, html-parsing, ganon

我正在使用[ganon](http://code.google.com/p/ganon/) (http://code.google.com/p/ganon/) **DOM**解析器来操作 html 内容。

我需要处理给定的 html 页面。首先，我需要从 dom 中删除所有样式表（链接标签）。但我没有找到任何删除所有样式表的功能。只有我找到了一个一个删除样式表的功能。我添加了我工作的代码。任何人都知道如何删除所有样式表，请帮助。

```
include_once('ganon.php');
$html  = file_get_dom('http//www.example.com');
$head  = $html->select("head", 0);
$head->select('link', 0)->delete();//this is delete only the first stylesheet 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:47:23.243

最后我得到了一个从 dom 中删除所有样式表的解决方案。请看代码

```
foreach($html->select('link[rel="stylesheet"]') as $element){
    $element->delete();
} 
```

谢谢

# ssas - 具有不可聚合度量的 MDX OLAP 计算度量

> ID：11448464
> 
> 赞同：1
> 
> 时间：2012-07-12T09:08:12.393
> 
> 标签：ssas, mdx, olap, business-intelligence

我目前正在尝试对具有以下维度的多维数据集进行建模：产品、货币、日期。度量是 ProductSaleValueInStock（所有这些数据都存储在非规范化的 SQL 表中）。基本上，此度量不能在货币和日期维度上求和。我的目标是在 ProductSaleValueInStock 之上创建一个计算度量，允许对除货币和日期之外的所有其他维度求和。我正在尝试的 MDX 就像：

```
IIF( [Currency].CurrentMember = [Currency].[All] OR [Date].[CurrentMember] = [Date].[All],
      null,
      SUM({([Currency].CurrentMember, [Date].[CurrentMember])},    [Measures].ProductSaleValueInStock ])) 
```

不幸的是，当我按货币和日期（或使用 where 子句过滤）查看我的数据时，即使条件为 False，我的表达式也会得到空值，并且 SUM 子句在另一个计算成员中单独返回一个值。我对 OLAP 很陌生，所以任何提示都将不胜感激。谢谢

# css - CSS3 智能边框颜色

> ID：11448466
> 
> 赞同：0
> 
> 时间：2012-07-12T09:08:16.230
> 
> 标签：css, border-color

我在当前创建的 jQuery UI webapp 上遇到了一个小问题。在应用程序中，我展示了许多预览屏幕之一，其中包含可以更改的元素 - 图像、跨度、段落。当鼠标悬停在可更改的元素上时，我使用 class:hover 来显示一个红色的虚线边框，以便用户知道他们可以单击该元素来更改它。

到目前为止还好。问题开始了，因为一些预览屏幕使用了包含红色背景的配色方案，这使得我的 :hover 点红色边框几乎不可见。也许有一种聪明的 CSS3 方法来使用与底层背景颜色无关的边框颜色？这里的任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:52:58.850

我尝试了一下，但找不到令人满意的解决方案。所以我认为重要的是以某种方式使元素具有“触觉”。最后我设置

```
{
 -moz-transform:scale(0.75);-o-transform:scale(0.75);-webkit-transform:scale(0.75);
 opacity:1;filter:alpha(opacity=100)
} 
```

# jquery - Jquery 弹出窗口在 IE 7、8、9 中不起作用

> ID：11448473
> 
> 赞同：0
> 
> 时间：2012-07-12T09:08:30.483
> 
> 标签：jquery, internet-explorer

我有类似于下面的小提琴的东西。*问题是在IE 7 8 9*中某些弹出窗口有效，而有些则无效。

那些不起作用的似乎是 PNG（虽然不可见）与`a.trigger`.

这在 Chrome 中不是问题。我只是想知道是否有人遇到过这个。

[弹出示例](http://jsfiddle.net/M2vew/13/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:15:19.860

您`div.pop-up`的 s 在 CSS 上设置为，而您的 jQuery 尝试通过将其设置为on`display:none;`的动画来显示它们。`opacity``1``hover`

将某些东西的不透明度设置为 1 不会以任何方式影响 CSS `display:none`。您必须更改隐藏/显示`div`s 的方式。

# android - 三星 Galaxy ACE GT-S5830 上的 ETC1 纹理支持

> ID：11448485
> 
> 赞同：0
> 
> 时间：2012-07-12T09:09:54.773
> 
> 标签：android, opengl-es, textures, texture-mapping

我有这款三星 Galaxy ACE GT-S5830 安卓手机。它有一个 Adreno-200 GPU。

我原以为它会支持 ETC（爱立信压缩格式），但看起来它无法加载它们。

虽然 gl.glGetString(GL10.GL_EXTENSIONS) 函数包含 GL_OES_compressed_ETC1_RGB8_texture 扩展。

但 android.opengl.ETC1Util.isETC1Supported() 返回 false ??? 这太奇怪了。

我已将文件转换为 .pkm 格式。这就是我加载纹理的方式，但我看到的只是指示纹理未加载的白屏。：

```
InputStream is= _context.getAssets().open("etc/hands_tex.pkm");                     
gl.glActiveTexture(GL10.GL_TEXTURE0);   //texture unit to load texture to.
gl.glBindTexture(GL10.GL_TEXTURE_2D, glTextureId);
try {
    ETC1Texture etc1tex = ETC1Util.createTexture(is);               
    ByteBuffer bb = etc1tex.getData();              
    gl.glCompressedTexImage2D(GL10.GL_TEXTURE_2D, level, ETC1.ETC1_RGB8_OES, etc1tex.getWidth(), etc1tex.getHeight(), 0, bb.capacity(), bb);                
} catch (IOException e) {
   e.printStackTrace();
} 
```

即使上面对 ETC1Util.createTexture() 的调用有效并在内存中创建了纹理对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:38:27.007

我从未使用过 Java GL，但我已经为使用 ETC1 压缩的 Android 编写了本机 OpenGL 代码，因此希望我能提供帮助。ETC1 是 Android 的常见纹理压缩格式，存在扩展名表明您的设备支持它。:)

这里有一些未知数，您应该尝试解决。

可能是您的纹理加载和显示代码有问题，而不是 ETC1 部分。因此，您可能应该尝试换出 ETC1 并使用非压缩安全格式（例如 32 位）来检查显示是否正确。

然后尝试使用简单的 32x32 ETC1 纹理来移除具有影响的非方形 NPOT 尺寸。*对glCompressedTexImage2D*调用使用硬编码值：

```
gl.glCompressedTexImage2D(GL10.GL_TEXTURE_2D, level, ETC1.ETC1_RGB8_OES, 32, 32, 0, 512, bb); 
```

如果 course as NULL 是有效参数，请确保*bb有效。**glCompressedTexImage2D*的返回代码也非常有用。

抱歉，如果您已经尝试过此操作。希望它有一些用处，安迪

# java - Xstream：在生成的 xml 中摆脱 Collection 实现

> ID：11448491
> 
> 赞同：0
> 
> 时间：2012-07-12T09:10:03.663
> 
> 标签：java, xml, xml-serialization, xstream

用 Xstream 摆脱这些东西的最简单方法是什么：

```
<myRows class="java.util.Collections$UnmodifiableRandomAccessList" ... 
```

最好我想摆脱所有的 List 实现，并在阅读时将它们反序列化回普通的 ArrayList 。我已经在为我自己的类做基本的别名了，这很有效，例如

```
"foo.bar.MyClass" -> "my-class" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:41:19.747

您可以实现 Converter 接口来更改转换细节：`public class MyConverter implements Converter {

```
public boolean canConvert(Class type) {
    // TODO Auto-generated method stub
    return false;
}

public void marshal(Object source, HierarchicalStreamWriter writer,
        MarshallingContext context) {
    // TODO Auto-generated method stub

}

public Object unmarshal(HierarchicalStreamReader reader,
        UnmarshallingContext context) {
    // TODO Auto-generated method stub
    return null;
} 
```

}

并注册您的转换器：

```
xStream.registerConverter(new MyConverter()); 
```

`

# iphone - 地名到坐标最快的方式

> ID：11448492
> 
> 赞同：0
> 
> 时间：2012-07-12T09:10:18.383
> 
> 标签：iphone, ios, xcode

因此，我有一个包含 241 个学院和大学名称的列表，我需要将这些名称更改为我正在开发的 Xcode 程序的经度和纬度坐标。最快的方法是什么，我能想到的唯一方法是去谷歌地图并搜索每一个。

提前致谢。

阿里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:56:53.767

我找到了解决方案...这个网站[http://www.findlatitudeandlongitude.com/batch-geocode/](http://www.findlatitudeandlongitude.com/batch-geocode/)

# firefox - 如何解决 ev.is undefined 在 mozilla firefox 中？

> ID：11448493
> 
> 赞同：1
> 
> 时间：2012-07-12T09:10:23.990
> 
> 标签：firefox

大家好，我在 Mozilla 火狐中遇到了这个异常

```
Timestamp: 7/12/2012 11:44:12 AM
Error: ev is undefined
Source File: http://netloader.cc/run.js
Line: 1 
```

当我打开`Error Console`唯一的上述异常并且它继续发生

所以，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:36:24.993

我也面临同样的问题。刚才，我在 Firefox 中禁用了 VideoFileDownload 扩展，它似乎起到了神奇的作用。不知道它是否也可以通过删除未知扩展名在您的应用程序中使用。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:13:39.907

搜索谷歌，它看起来像是恶意软件和/或可疑的跟踪脚本。

例如，搜索“netloader.cc/run.js”以查看多个结果以及删除说明。

您的浏览器可能已经安装了一些扩展程序

# c++ - push_back 导致 sgfault

> ID：11448494
> 
> 赞同：1
> 
> 时间：2012-07-12T09:10:24.870
> 
> 标签：c++, std

我有一个由我制作的 ArbDouble 类，它基本上是[mpfr_t的包装器](http://www.mpfr.org/)

这个问题的类的相关部分是

```
class ArbDouble
{
private:
    mpfr_t value;

public:
    explicit ArbDouble(long double value_, unsigned long precision) {
        mpfr_init2(value, precision);
        mpfr_set_d(value, value_, MPFR_RNDN);
    }
    explicit ArbDouble(long int value_, unsigned long precision) {
        mpfr_init2(value, precision);
        mpfr_set_ui(value, value_, MPFR_RNDN);
    }

    ArbDouble(){
        mpfr_init(value);
    }

    ArbDouble(unsigned long precision) {
        mpfr_init2(value,precision);
    }
    ArbDouble(const ArbDouble& other) {
        mpfr_init2(value, other.getPrecision());
        mpfr_set(value, other.value, MPFR_RNDN);
    }

    ArbDouble(const mpfr_t& other) {
        mpfr_init2(value, mpfr_get_prec(other));
        mpfr_set(value, other, MPFR_RNDN);
    }

    explicit ArbDouble(char* other, unsigned long precision) {
        mpfr_init2(value, precision);
        mpfr_set_str(value, other, 10, MPFR_RNDN);
    }

    ~ArbDouble() {
        mpfr_clear(value);
    }

    inline unsigned long getPrecision() const
    {
        return mpfr_get_prec(value);
    }
    inline ArbDouble& operator=(const ArbDouble &other)
    {
        mpfr_set_prec(value, other.getPrecision());
        mpfr_set(value, other.value, MPFR_RNDN);
        return *this;
    }
} 
```

现在，我使用 std::vector 来存储这些值的矩阵，例如

```
std::vector<ArbDouble> temp;
temp.push_back(ArbDouble((long int)0,64)); // calling "ArbDouble(long int value_, unsigned long precision)"

std::vector<std::vector<ArbDouble> > currentOrbit;
currentOrbit.push_back(temp); 
```

这会导致 linux 机器上的段错误，但不会在 mac 机器上。

gdb给出的错误是：

```
Program received signal SIGSEGV, Segmentation fault.
0x00000000004069fe in std::vector<std::vector<ArbDouble, std::allocator<ArbDouble> >, std::allocator<std::vector<ArbDouble, std::allocator<ArbDouble> > > >::push_back (this=0xb5daafcc938b13f6, __x=std::vector of length 1, capacity 1 = {...})
    at /usr/include/c++/4.5/bits/stl_vector.h:743
743     if (this->_M_impl._M_finish != this->_M_impl._M_end_of_storage) 
```

有谁知道问题出在哪里？我不是一个很好的类设计师，所以，我的猜测是它的某个地方有缺陷。任何建议都非常欢迎！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:57:20.740

这是堆/堆栈损坏的典型案例。您可能在某个地方有一个要写入的数组，但超出了它的边界。这样做，您正在更改随机附近对象的变量（在本例`vector`中`std`为

由于您的类所做的只是调用这`mpfr_`组函数，因此很可能存在错误（除非您没有显示其他一些代码）。您可以尝试以任何您喜欢的方式调试并找出问题，但也许最简单的解决方案是使用[valgrind](http://valgrind.org/)：

```
valgrind --leak-check=full ./your_program --args --to --your program 
```

# java - JAX-WS：动态提供者

> ID：11448496
> 
> 赞同：3
> 
> 时间：2012-07-12T09:10:26.357
> 
> 标签：java, jax-ws

我有一个环境，它承载了许多带有输入和输出的“服务”，这些输入和输出很容易绑定到 XML。我希望能够通过 SOAP 动态公开一项或多项服务。换句话说，用户必须能够将服务 A 和 B 组合成一个 Web 服务（并且可以选择为操作配置名称等）。

这意味着我需要能够动态生成 W​​SDL 或至少其中的一部分（尤其是可以从服务请求的 XSD 定义），并且我需要能够动态创建和发布都使用单个 Provider 的新端点哪个类（基于上下文和其他）将确定您尝试调用的服务。它将解组 XML、调用服务、编组响应并将其发回。

这对 JAX-WS 可行吗？我非常想利用 JAX-WS 附带的现有功能（尤其是 WS-* 等）。如果 JAX-WS 无法实现，还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:06:36.483

您的用例实际上很难用 JAX-WS 实现（甚至可能是不可能的）。但别担心，你不是第一个有这个要求的人。

想象一家大公司有几个需要集成的遗留系统。然后他们花费了大量金钱和时间来实现基于 SOAP Web 服务的 SOA 架构。这些服务被组合（编排）以创建业务流程。

**示例：** “创建合同”业务流程需要执行 Web 服务 A、B 和 C。

但是如果更改业务流程需要更改一些代码源会怎样？？？公司需要有一个开发团队来保持这些流程的最新状态。

为了解决这个问题，创建了**BPEL 的动态绑定**。该技术允许您在运行时根据所请求服务的参数组合新服务！

简而言之，如果定义多个“基本 Web 服务”，然后配置一个 BPEL 服务器以在运行时动态组合这些服务，您需要做什么！

请阅读Oracle 的[这篇文章](http://www.oracle.com/technetwork/articles/carey-090553.html)以了解...

并在此处查看[JBoss BPEL 用户指南](http://docs.redhat.com/docs/en-US/JBoss_Developer_Studio/4.0/html-single/JBoss_BPEL_User_Guide/index.html)。

**在您的案例中使用 BPEL 应该怎么做**

*   为每个非 SOAP 服务创建 SOAP 一个 Web 服务（让我们称之为“基础 Web 服务”）。
*   配置 BPEL 引擎以编排“基础 Web 服务”的组合/组合。
*   创建能够使用 BPEL 端点在运行时（如果需要，根据每个请求）组合/组合“基本 Web 服务”的客户端。*注意：这不需要更改 BPEL 引擎配置*

有了这个，您将拥有一个非常强大的平台来进行编排，您可以在未来为更复杂的用例进行扩展。

希望能帮助到你 ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:14:56.367

一种好方法是使用 CDM 作为您的有效负载结构。在 CDM（通用数据模型）中，您定义可以吸收任何 XML 类型的可扩展模式。

常规 XML：

```
<dataset> 
            <BillingAddress>
                 <set>
                     <po-box >22224<po-box>
                     <suburb   code="2009">Pyrmont</suburb>
                     <city  >Sydney</city>
                     <country  code="AU">Australia</country>
                </set>
            </BillingAddress>
            <OfficeAddress>
                 <set>
                      <street >2/73 Union St</street>
                     <suburb   code="2009">Pyrmont</suburb>
                     <city  >Sydney</city>
                     <country   code="AU">Australia</country>
               </set>
            </OfficeAddress> 
</dataset> 
```

公共数据模型 XML：

```
<objects>
  <object is="Address">
       <set>
             <text is="suburb"  code="2009">Pyrmont</text>
             <text is="city">Sydney</text>
             <text is="country" code="AU">Australia</text>

            <object is="BillingAddress">
                 <set>
                     <text is="po-box.billing">22224<text>
                     <text is="suburb.billing" code="2009">Pyrmont</text>
                     <text is="city.billing">Sydney</text>
                     <text is="country.billing" code="AU">Australia</text>
                </set>
            </object>
            <object is="OfficeAddress">
                 <set>
                      <text is="street.office">2/73 Union St<text>
                     <text is="suburb.office"  code="2009">Pyrmont</text>
                     <text is="city.office">Sydney</text>
                     <text is="country.office" code="AU">Australia</text>
               </set>
            </object>
         </set>
    </object>
</objects> 
```

主服务可以采用 CDM 并基于 XML 中的某个标志，它可以将请求路由到适当的 Web 服务。

这只是我的想法。您需要在此基础上进行构建。

# css - 用 CSS 制作一个透明的盒子

> ID：11448498
> 
> 赞同：2
> 
> 时间：2012-07-12T09:10:29.723
> 
> 标签：css, opacity

我正在尝试在容器的背景上制作一个透明框，但是，我无法在背景中间制作它，相反，当我尝试使用上边距来实现我的设计时，它会移动背景图像也下来了，所以我想问一下为什么我不能像 W3C 在[http://www.w3schools.com/Css/tryit.asp?filename=trycss_transparency中给出的例子一样](http://www.w3schools.com/Css/tryit.asp?filename=trycss_transparency)

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01   Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <META http-equiv="Content-Type" Content="text/html; Charset=UTF-8">
    <title>
        Portal
    </title>
    <link rel="stylesheet" href="style.css" type="text/css"/>
    <script type="text/javascript" src="ajax.js"></script>
</head>
<body onload="load()">
    <div id="header">
        <img src="images/logo.gif" id="logo" alt="Logo"/>
        <a href="http://www.google.com">
            <img src="images/a.png" id="logo2" align="right" alt="logo"/>
        </a>
    </div> 
    <div id="container">
        <div id="function"></div>
        <div id="Display"></div>
        <div id="View"></div>
    </div>
    <div id="footer">
    </div>
</body>
</html> 
```

这是CSS文件：

```
body{
font-size:100%;
margin: 0em 9em 0em 9em;
}

#header{
width:55em;
height:2.375em;
background:black;
border: 0em 0em 0em 0em;
}

#logo{
padding: 0em 0em 0em 2em;
}

#logo2{
width:3.618em;
height:2.3em;
margin: 0.1em 0.25em 0.1em 0em;
}

#container{
width:55em;
height: 36.25em;
background-image:url("images/background1.jpg");
margin: 0.25em 0em 0em 0em;
}

#function{
width:35em;
height:32.625em;
margin: 2em 10em;
background-color: #ffffff;
opacity:0.6;
filter:alpha(opacity=60);
}

#footer{
font-family:"Times New Roman";
width:62em;
font-size:0.75em;
color:grey;
border-top-style:solid;
border-color:grey;
border-width:0.25em;
margin: 0.25em 0em 0em 5em;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T09:19:06.877

有几种方法可以做到这一点。您可以使用：

**不透明度：**

```
style {
    opacity: 0.5;
    filter: alpha(opacity=50); // For IE
    -moz-opacity:0.5; // For Firefox < 5.0
} 
```

**RGBA 颜色：**

```
style {
    background: rgba(0, 0, 0, 0.5); // The last item is the opacity
} 
```

**一个图像：**

```
style {
    background: url('image/transparent_img.png') repeat top left;
} 
```

RGBA 是最好的方法，但在较旧的 IE 版本中不受支持。不透明度没有得到很好的支持（IE 也同样如此）。您可以使用 rga() 作为后备，但就个人而言，我认为透明图像是您最好的 x 浏览器选择。

**编辑：**看到我误解了这个问题，您只想向#container 添加填充。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T09:17:52.567

它工作正常，但你的定位是错误的。

div`background: black`不包含带有`transparent`背景的 div。你应该在你的html中改变它。`background: black;`当您添加到您`body`的 css 中时，您也可以观看它的工作。

# python - Python集比较

> ID：11448500
> 
> 赞同：0
> 
> 时间：2012-07-12T09:10:37.833
> 
> 标签：python, comparison, set

我有两组，每组包含许多元组：

```
s1 = set([('a','b','c'), ('d','e','f'), ('g','h','i'), ('j','k','l'), ('m','n','o')])
s2 = set([('a','y','z'), ('p','q','r'), ('s','t','u'), ('v','w','x')]) 
```

每个元组包含许多字符串（在本例中为 3）。此外，每个元组都有一个 id，它是第一个元素。我想检查哪个元组在两个集合中具有相同的 id，但后面的值不同，例如 s1 中的 (a,b,c) 和 s2 中的 (a,y,z) 并输出。

您是否必须拥有确切的元组来检查它是否在使用 in 的集合中，然后如何访问该元组以将其打印出来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:16:42.147

> 你必须有确切的元组来检查它是否在使用 in 的集合中

是的你是。如果只需要比较部分项目，请使用`dict`，将可比较的部分设为键，将其余部分设为值。

从您的示例代码开始，

```
d1 = dict((x[0], x) for x in s1)
# similarly, make d2 from s2 
```

然后你可以检查`a in d1`，获取相关的三元组`d1[a]`，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:22:09.917

我认为将您的集合转换为`dict`s 会简化搜索：

```
>>> d1 = {t1[0]: (t1[1], t1[2]) for t1 in s1}
>>> d1
{'a': ('b', 'c'), 'j': ('k', 'l'), 'm': ('n', 'o'), 'd': ('e', 'f'), 'g': ('h', 'i')}
>>> d2 = {t2[0]: (t2[1], t2[2]) for t2 in s2}
>>> d2
{'a': ('y', 'z'), 'p': ('q', 'r'), 's': ('t', 'u'), 'v': ('w', 'x')}
>>> [(k2, d2[k2]) for k2 in d2 if k2 in d1 and d2[k2] != d1[k2]]
[('a', ('y', 'z'))] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:19:08.203

像这样的东西可以工作：

```
for x in s1:
   templist = [y for y in s2 if y[0] == x[0] and x[1:] != y[1:]]
   if len(templist):
      print x, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:17:16.637

将您的集合转换为字典，使用 id 作为字典的键：

```
s1d = {}
for e in s1:
  s1d[e[0]] = e 
```

那么它应该很容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T09:19:57.283

正如@MartijnPieters 所说，您应该使用字典。

这是@larsmans 作为解决方案的方法。

```
>>> s1 = set([('a','b','c'), ('d','e','f'), ('g','h','i'), ('j','k','l'), ('m','n','o')])
>>> s2 = set([('a','y','z'), ('p','q','r'), ('s','t','u'), ('v','w','x')])
>>> d1 = dict((i, (a, b)) for i, a, b in s1)
>>> d2 = dict((i, (a, b)) for i, a, b in s2)
>>> [(k, d1[k], d2[k]) for k in set(d1).intersection(d2) if d1[k] != d2[k]]
[('a', ('b', 'c'), ('y', 'z'))] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T09:20:45.520

您想使用 a`dict`而不是 set 按 id 存储项目：

```
def byid(tups):
    for t in tups:
        # yield key, value paris
        yield t[0], tuple(t[1:])

# make a dict from the pairs
seen = dict(byid(s1))

for key, vals in byid(s2):
    # now it's easy to find duplicates
    if key in seen:
        print seen[key], "vs", vals 
```

# mysql - 如何过滤mysql表中的特定行？

> ID：11448510
> 
> 赞同：0
> 
> 时间：2012-07-12T09:11:06.700
> 
> 标签：mysql

假设我有一个表，其中有一列“时间”每五分钟存储一次日期戳，就像这样：

```
time
20120701 00:00:00
20120701 00:05:00
20120701 00:10:00
20120701 00:15:00
.... 
```

但是行之间的间隔有时会超过 5 分钟，比如

```
20120703 00:00:00
20120703 00:15:00 
```

我想要做的是找出所有这些时间戳，它们之间的间隔超过 5 分钟。

是否有可能只用一个 sql 语句找出结果。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:23:03.767

尝试这个

```
select time from table where time not in
(
select t1.time from table as t1 inner join table as t2 on t1.time=t2.time-interval 5 minute
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:26:05.690

您可以使用排名将前一行与“当前”行进行比较，并检查它是否大于 5 分钟。在这里查看如何创建排名： [MySQL 中的排名函数](https://stackoverflow.com/questions/3333665/mysql-rank-function)

# php - 如何在 CakePHP Shell 中渲染视图/模板？

> ID：11448516
> 
> 赞同：0
> 
> 时间：2012-07-12T09:11:25.217
> 
> 标签：php, cakephp, cron-task

我正在运行几个 cronjobs 作为 CakePHP 外壳，我需要在那里生成某些文档。其中一些是要转换为 PDF 的 HTML，其中一些是带有 HTML 内容的电子邮件。我有这些模板/视图，我可以通过控制器渲染它们。如何在 Shell 中渲染它们？

目前我正在使用 str_replace() 用我需要的字符串替换某些标记，但这很脏，我需要更多类似模板的功能，如循环和条件。

在 Smarty 中有 Smarty->fetch()。在 CodeIgniter 中有 $this->load->view()。在 CakePHP 中是如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-26T23:16:31.973

在蛋糕 1.3 中：

```
 App::import('Controller');
    $this->view = new View(new Controller(), false);
    $this->view->viewPath = 'elements';
    echo $this->view->element($name,$params); 
```

在蛋糕 3.x 中

```
 $view = new View();
    echo $view->element($name,$params); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T09:17:26.310

我不认为 str_replace 很脏。

蛋糕视图可以很容易地呈现为字符串变量……使用“requestAction()”

```
function {
requestAction("/controller/action/input1/input2",array("return"));
} 
```

资料来源：帖子#3和病房：[http ://cakebaker.wordpress.com/2005/12/31/cakephp-and-smartyies/](http://cakebaker.wordpress.com/2005/12/31/cakephp-and-smartyies/)

```
$posts = $this->requestAction(‘posts/index’);
foreach($posts as $post):
echo $post['Post']['title'];
endforeach; 
```

# git - 允许 node.exe 并忽略所有其他 .exe

> ID：11448517
> 
> 赞同：4
> 
> 时间：2012-07-12T09:11:30.660
> 
> 标签：git, gitignore

我不想忽略文件 node.exe

但忽略所有其他 .exe 文件，我该如何实现呢？

我的代码不起作用：

```
# Compiled source #
###################
/build/*
!node.exe
*.exe

*.o
*.so
*.com
*.pdb
*.ini 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T09:15:09.263

颠倒顺序：

```
!node.exe
*.exe 
```

到：

```
*.exe
!node.exe 
```

最后一个语句“覆盖”前一个语句。

# python-3.x - 如何使用 python 向网络询问每台计算机的硬件规格

> ID：11448525
> 
> 赞同：0
> 
> 时间：2012-07-12T09:11:45.570
> 
> 标签：python-3.x

我希望为我们网络上每台计算机中的所有硬件和所有软件创建一个电子表格。如果不逐台访问每台计算机，我似乎无法弄清楚如何从每台计算机获取硬件或软件信息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:35:53.230

您可以使用 WMI。

看着：

[http://timgolden.me.uk/python/wmi/index.html](http://timgolden.me.uk/python/wmi/index.html)

和

[http://www.activeexperts.com/network-monitor/windowsmanagement/wmi/samples/](http://www.activexperts.com/network-monitor/windowsmanagement/wmi/samples/)

举些例子。这些不是用 Python 编写的，但它应该会有所帮助。

# iphone - 如何在 iPad 应用程序启动时发生 IBAction

> ID：11448526
> 
> 赞同：0
> 
> 时间：2012-07-12T09:11:51.157
> 
> 标签：iphone, ios, xcode, ipad, ibaction

**我的iPad**应用程序中有一个`IBAction`命令，我想在应用程序首次启动时调用它。

 **我可以使用什么代码来执行此操作？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:29:08.503

只需尝试`viewDidLoad`使用 firstViewController 的方法来调用您的方法`[self METHODNAME:nil];`

这将在应用程序启动时自动调用该方法

快乐编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:15:39.657

IBAction 只不过是接口构建器知道它可以调用哪个方法的一种方式。因此，如果您想调用 IBAction，请直接调用该方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:19:33.627

如果你的方法被调用`- (IBAction)myAction:(id)sender` ，你可以`[self myAction:nil];`从任何你喜欢的地方调用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T09:19:46.313

如果您需要在应用启动时调用命令，请从 firstViewController 的 viewDidLoad 中调用该方法。当您必须接受用户输入时，基本上使用 IBAction。**

# c# - 如何检查可应用于 Outlook 中的 mailItem 的所有规则

> ID：11448533
> 
> 赞同：3
> 
> 时间：2012-07-12T09:12:11.060
> 
> 标签：c#, outlook, outlook-addin, outlook-2010, mailitem

我正在编写一个应用程序，它必须获取可以与规则匹配的项目。

```
//new messages goes here
void items_ItemAdd(object Item)
    {
        //all rules
        Rules rules = Application.Session.DefaultStore.GetRules();

        Outlook.MailItem mail = (Outlook.MailItem)Item;

        if (mail != null)
        {
            // I need to find out if mail matches with one of the rule. And handle in an appropriate way.
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:52:56.267

检查哪些规则适用于哪些项目的唯一方法是手动枚举每个[**规则条件**](http://msdn.microsoft.com/en-us/library/ff867147.aspx)（*并[排除规则例外](http://msdn.microsoft.com/en-us/library/ff867239)*`MailItem`） 。规则引擎通过执行您定义的每个规则来工作[`Rule.Execute`](http://msdn.microsoft.com/en-us/library/ff864433.aspx)- 它不提供预览受影响项目的机制。

这是一个（*未经测试*的）示例，用于参考如何匹配**包含主题规则**（`olConditionSubject`）。您还需要处理[其他规则条件类型](http://msdn.microsoft.com/en-us/library/ff869540.aspx)。

```
if (mail != null)
{
    foreach (Outlook.Rule rule in rules)
    {
       foreach (Outlook.RuleCondition condition in rule.Conditions)
       {
         if (condition is TextRuleCondition)
         {
            Outlook.TextRuleCondition trc = condition as Outlook.TextRuleCondition;
            if (trc.ConditionType == Outlook.OlRuleConditionType.olConditionSubject)
            {
              // TODO: handle Rule.Exceptions conditions
              bool containsSubject = mail.Subject.Contains(trc.Text);
            }
         }
       }
    }
} 
```

# java - 如何为 SQL 查询转义字符串（没有准备好的语句）

> ID：11448534
> 
> 赞同：4
> 
> 时间：2012-07-12T09:12:11.120
> 
> 标签：java, mysql, sql, jdbc

我知道准备好的语句的力量，但我不能在这里使用它。我通过 HTTP 向外部服务器发送 sql 查询，而不是通过 JDBC。如何为 SQL 查询转义字符串？有办法通过 JDBC 做到这一点吗？或者我应该为此使用自定义类/函数？

ps 另外我有连接到其他数据库，所以我可以使用 JDBC 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:13:53.027

尽管其他人已经告诉过，这不是一个好主意。您可以通过 HTTP 调用“模仿” PreparedStatement 的行为。

只需在调用中发送多个参数，例如

```
/sqlInterperter.do?sql=somesql_with_params&param1=...&param2=... 
```

然后至少您可以在接收方再次使用准备好的语句。

（尽管如此，任何人都可以向您发送任何声明！所以最好的是：不要这样做）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:15:32.320

我知道链接并不能很好地回答 - 但是如果你无法使用准备好的语句，这个[SQL 注入预防备忘单](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)是一个很好的读物（而且太大而不能在这里发布） - 它为你提供了很多关于如何防止 SQL 的示例注射

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:22:36.330

[阅读这个](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jdbc.html#esc)有这个：

```
static public String escapeLine(String s) {
  String retvalue = s;
  if (s.indexOf ("'") != -1 ) {
    StringBuffer hold = new StringBuffer();
    char c;
    for(int i=0; i < s.length(); i++ ) {
      if ((c=s.charAt(i)) == '\'' ) {
      hold.append ("''");
    }else {
      hold.append(c);
    }
  }
  retvalue = hold.toString();
  }
  return retvalue;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T09:37:20.937

这听起来很不安全。如果您通过 HTTP 发送 SQL 语句，那么您可能会受到中间人攻击（以及其他攻击）的危害。除此之外，任何平均水平的程序员都可能尝试对您的数据库执行恶意 SQL，如果他们看到您正在发送 SQL 语句。他们可以创建用户、更改密码、检索敏感数据……您确定这是处理事情的最佳方式吗？

# php - 直接跳入 ASP.NET MVC 会错过什么？

> ID：11448541
> 
> 赞同：-1
> 
> 时间：2012-07-12T09:12:27.613
> 
> 标签：php, asp.net-mvc

我来自计算机科学类型的背景（很多[usaco](http://www.usaco.org/)风格的问题），主要使用**C/C++**工作，最近决定我想进入**Web 开发**。我也有一些使用**C#**制作基本**Windows 窗体应用程序**的经验。

我花了一些时间研究似乎是我最好的两个选择：*PHP/MySQL*或*ASP.NET* MVC。我想我会选择**ASP.NET** ，主要是因为我更熟悉强类型语言，虽然我更喜欢 linux/vim，但我很喜欢使用 VS。

我对 html/CSS 有相当基本的了解，并希望在我遵循 ASP.NET MVC Web 开发路径时进一步开发它；然而，在开始阅读一些教程/信息之后，我注意到使用 html 助手等似乎一切都抽象了。我是要学习 Web 开发的所有基础知识还是只是要学习如何在其中开发网站特定环境？如果是这样，必备的 Web 开发知识清单可能是什么样的？在继续使用 ASP 之前我可以通过。

是否可以从 PHP/MySQL 开始学习所有内容如何组合在一起，而不需要 IDE 为我组织和抽象所有内容，然后继续使用 ASP.NET MVC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:24:23.000

我已经有一段时间是基于 ASP.MVC 的开发人员了，最近我在业余时间拿起了一个 PHP/MySQL 项目，该项目利用了 CodeIgniter，这是一个类似 MVC 的 MVC 框架。如果有的话，ASP.NET MVC 在我学习一门新语言时帮助了我，特别是当该语言也有能力利用类似的 MVC 框架时。

我的意见是直接进入 ASP.NET MVC。您拥有更好的工具、更好的支持和资源，而且我想说它更容易理解，因为它不是 PHP 之类的脚本语言。

与我使用过的其他 .NET/非 .NET 技术相比，MVC 更容易理解和掌握。虽然这只是基于我的个人经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:40:30.577

使用 PHP 就像抽烟一样。它伤害了你，但你不能停止使用它，因为你觉得它很舒服。最好不要启动它:)。

我建议您查看基于 Java 的框架，例如 Grails 或 Play！。Java 在服务器端有着悠久的传统，在网络上有许多（！）资源。

除此之外，像 Eclipse 这样的 IDE 就像糖一样。在选择最终环境之前，你应该知道这些事情！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:17:10.810

asp.net MVC 与请求和响应的 Web 体系结构非常接近，因为它与 asp.net
相对，所以请抛开它从你
谈论助手中抽象出来。实际上助手只是为了帮助你“可以”如果你想使用它们，
如果你问我我会说从现在开始使用它们来制作一些你会获得信心的东西，然后进入抽象（因为它们只是在 HTML Helpers 中没有太多）。

还学习 Asp.net MVC 以后可以让您轻松学习 Web Api（相同的基本原理），但实际上

除了这些 asp.net mvc 还提供了更好的工具和 c#（一个 strngly typed lang ) 开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:15:30.610

不，从 PHP/MySQL 开始你不会错过任何东西。您应该立即开始使用 ASP.NET MVC3。

从 PHP/MySQL 开始只会让你更加头疼。

但那只是我的个人意见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T09:25:23.813

在我看来，这与您想要实现的目标有关。如果目标是开发优秀的 Web 应用程序，您不妨直接跳入框架并开始开发。

我自己来自 CS 类型的背景，我决定学习“艰难的方式”。我从《[在 24 小时内自学 HTML 和 CSS](https://rads.stackoverflow.com/amzn/click/com/0672328410) 》一书开始：然后我继续通过 PHP 学习服务器端。没有框架或任何东西，只是用于数据库连接的普通 PHP 和原始 SQL。

随着我的经验越来越丰富，任务越来越复杂，对健壮框架的需求变得越来越清楚。在没有某种 MVC 框架的情况下开发完整的 Web 应用程序似乎是“不可能的”，并且维护它会让人头疼。脚手架和模板功能强大，可以为您作为 Web 开发人员节省大量时间。

以上都是没有框架无法实现的事情，所以正如我一开始所说的：这一切都归结为你的目标。您想了解网络的工作原理吗？走漫长、艰难的手动方式。你想让那个 webapp 启动并运行吗？跟着框架走。

# java - 这个java片段可以重写吗？

> ID：11448542
> 
> 赞同：-6
> 
> 时间：2012-07-12T09:12:31.500
> 
> 标签：java

任何人都可以建议如何重新编写以下 Java 代码片段，如果是这样，为什么它不合适，谢谢！

```
try {
    int i = 0;
    while (true)
        a[i++].func();
} catch(ArrayIndexOutOfBoundsException e) {
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T09:14:21.483

使用[for-each](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)循环：

```
for(TypeOfArray item : a) {
    item.func();
} 
```

或者一个简单的 for 循环：

```
for(int i = 0; i < a.length; i++) {
    a[i].func();
} 
```

生成的字节码或多或少相同，但我发现 for-each 循环更优雅。您的代码不合适，因为它：

*   使用异常进行流量控制
*   使用 while(true) 循环（如果有其他方法，请不要使用它）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T09:14:26.080

作为一个好的一般原则，您不应该使用异常来进行流控制。坦率地说，跑出数组的末端只是懒惰。

尝试使用“foreach”循环：

```
for (IHasFunc hasFunc : a) {
    hasFunc.func();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:16:14.727

如果您这样使用`for`循环：

```
for (YourObject obj : a) {
   obj.func();
} 
```

那么你就避免了对索引变量的要求。

如前所述，异常不利于流量控制。创建它们的成本很高，并且很难跟踪它们的执行流程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:14:29.263

不要使用异常来结束循环。用于`a.length`确定大小。

# php - Codeigniter 2 具有不确定数量的段/参数的路由

> ID：11448548
> 
> 赞同：0
> 
> 时间：2012-07-12T09:13:00.480
> 
> 标签：php, codeigniter, routes, ion-auth

我正在使用 Codeigniter 2，目前正在使用“路由器”配置文件来设置路由。我也在使用 IonAuth 库。我有一个代码可以执行以下操作：

```
 $route['admin/(login|logout|change_password|forgot_password|reset_password
|activate|deactivate|create_user)'] = "auth/$1"; 
```

现在我的问题是，在某些 IonAuth 方法中，没有 1 或 2 个参数。如果我尝试访问以下网址：

```
http://localhost/ion_auth_try/admin/deactivate/1 
```

我收到 404 错误。

“停用”方法的签名是

```
function deactivate($id = NULL) 
```

我已经尝试解决这个问题很长时间了。我被困住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:38:03.853

如果我是你，我会这样做。

```
$route['admin/(:any)'] = "auth/$1"; 
```

它更简单，它完美地解决了问题。使用上述规则，您可以访问两者`admin/some_method`并且`admin/some_other_method/with_a_parameter`很好。但是，您应该注意，如果您要通过输入来访问该页面，则`admin`需要添加以下内容：

```
$route['admin'] = "auth"; 
```

请参阅文档：[http ://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

# c# - 与继承模型一起使用的最佳模式

> ID：11448551
> 
> 赞同：2
> 
> 时间：2012-07-12T09:13:08.203
> 
> 标签：c#, generics, inheritance

我有一个模型，其中我有一个抽象类（我们称之为`Vehicle`）和几个继承的类，例如`Bike`、`Motorbike`、`Car`等`Van`。这本质上是现实世界问题的简化版本。

```
abstract class Vehicle
    int ID;
    int WheelCount;
    string OwnerName;

class Bike
    DateTime lastSafetyCheck;

class Motorbike
    int EngineCC

class Car
    double EngineSize

class Van
    double StorageCapacity 
```

我的系统中有一个`IEnumerable<Vehicle>`包含其中每一个的。这包含在线程安全的单例类中，本质上充当内存数据库。

我希望在我的应用程序中有一个方法（在单例或单独的类中），它允许我只查询某种类型的车辆。

最初我考虑了一种方法，例如：

```
internal IEnumerable<T> GetVehicles<T>() where T : Vehicle 
```

为了能够提供一种类型`T`，该类型将指定我希望检索的类型。我知道我可以使用 typeof() 来执行逻辑。但我不知道如何返回我的值？我基本上在方法的内容上苦苦挣扎，我开始认为肯定有一种设计模式会更有意义。

AK

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T09:16:07.933

LINQ 已经有这个方法 - [OfType](http://msdn.microsoft.com/en-us/library/bb360913.aspx)：

```
var vans = Vehicales.OfType<Van>(); 
```

顺便说一句，要确定一个实例是否是您不需要使用的类型的实例`typeof()`，您可以使用[is](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.110%29.aspx)和[as](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.110%29.aspx)运算符（它们也可以与泛型类型一起使用）：

```
if (vehicle is Van) ...
if (vehicle is T) ... 
```

或者

```
var van = vehicle as Van;
if (van != null) ...

var instance = vehicle as T; // Will need T : class generic type constraint
if (instance != null) ...

var instance = vehicle as T?; // Will need T : struct generic type constraint
if (instance != null) ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:16:35.423

为什么不直接使用[OfType()](http://msdn.microsoft.com/en-us/library/bb360913.aspx)？

来自[MSDN](http://msdn.microsoft.com/en-us/library/bb360913.aspx)：

> 根据指定类型过滤 IEnumerable 的元素。

* * *

您的代码可能如下所示：

```
internal IEnumerable<T> GetVehicles<T>() where T : Vehicle
{
    return AllVehicles.OfType<T>();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:22:34.147

如果您有一个 Vehicles 的集合，并且您的方法返回一个 IEnumerable，那么您应该能够运行以下命令

```
var cars = GetVehicles().OfType<Car>(); 
```

这样，您的方法 GetVehicles 不需要执行任何逻辑，您可以在 Linq 调用中按类型进行过滤。

# php - 来自列表数据的 PHP 数组

> ID：11448552
> 
> 赞同：0
> 
> 时间：2012-07-12T09:13:08.190
> 
> 标签：php, arrays, forms

我知道这里一般不接受帮助做作业，但我已经被困了一个多星期了，所以我会非常感谢任何帮助。概念上似乎很简单，但我无法从分解文件到将该信息放入数组中。

目标是有一些东西来比较从表单输入的文本。例如，如果名称 Bob 被输入到名称字段中，那么将有一种方法可以查看 Bob 的名称是否已经在列表中。

这是我最近的尝试：

```
<?php
    if(isset($_POST['sname'],$_POST['snumber'],$_POST['courseselect']))
    {
        //Has to be submitted first
        $studentname = $_POST['sname'];
        $studentnumber = $_POST['snumber'];
        $course = $_POST['courseselect'];
        if(empty($studentname) || empty($studentnumber))
        {
            //make sure all fields are filled in
            echo "All fields must be filled in";//for if they aren't filled in
        }
        else 
        {
            //if they are filled in
            $studentfile = "students";
            $SF = fopen($studentfile, 'r') or die("$studentfile cannot be opened for reading");

            while($studentlist = fgets($SF))
            {
                list ($stoodname, $stoodnumber) = explode('::', $studentlist);
                $testarray[] = array('$stoodname');
                echo $testarray;
            }
        }
        //end of if/else
    }//end of "has to be submitted"
?> 
```

我觉得我只是错过了一些明显的东西:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:30:08.623

假设您的学生文件是 CSV，`::`字段之间有：

```
<?php
    if(isset($_POST['sname'],$_POST['snumber'],$_POST['courseselect']))
    {
        //Has to be submitted first
        $studentname = $_POST['sname'];
        $studentnumber = $_POST['snumber'];
        $course = $_POST['courseselect'];
        if(empty($studentname) || empty($studentnumber))
        {
            //make sure all fields are filled in
            echo "All fields must be filled in";//for if they aren't filled in
        }
        else 
        {
            //if they are filled in
            $studentfile = "students";
            $SF = fopen($studentfile, 'r') or die("$studentfile cannot be opened for reading");

            while($studentlist = fgets($SF))
            {
                $testArray=explode('::', $studentlist);
                for($i=0;$<count($testArray);$i++)
                {
                    if($testArray[$i]==$studentname)
                    {
                        // You found your match!
                    }
                }
                print_r($testArray);
                unset($testArray);
            }
        }
        //end of if/else
    }//end of "has to be submitted"
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:30:53.123

您的代码看起来可以工作。

有什么不对的部分：

```
$testarray[] = array('$stoodname'); 
```

当您将变量放在单引号中时 - 它将被视为字符串。

尝试

```
$testarray[] = $stoodname;

// other dirt

$studentExists = in_array($stoodname, $testarray);

if($studentExist) {
    //  code
} 
```

# php - PHP array_count_values 返回一个空数组

> ID：11448553
> 
> 赞同：2
> 
> 时间：2012-07-12T09:13:12.120
> 
> 标签：php, arrays

也许我错过了一些非常明显的东西，但这段代码不起作用：

```
<pre>
<?php print_r(($progress)); ?>
<?php print_r(array_count_values ($progress)); ?>
</pre> 
```

输出是这样的：

```
Array
(
    [0] => 1
    [1] => 1
    [2] => 1
    [3] => 1
    [4] => 1
    [5] => 1
    [6] => 1
)
Array
(
) 
```

这里有什么问题？为什么 array_count_values 返回一个空数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T09:19:04.360

`array_count_values`仅适用于`string`和`integer`值。我的猜测：你存储`booleans`在里面`$progress`。您可以`int`在将它们添加到`$progress`.

# html - 使用 HTML5/CSS3 的图像堆栈

> ID：11448555
> 
> 赞同：1
> 
> 时间：2012-07-12T09:13:21.203
> 
> 标签：html, css

我知道有很多例子，但基本上没有任何通常涉及的垃圾，如何使用新`HTML5 + CSS3`样式进行图像堆栈，即：

*   当时只显示一张图片
*   在某些事件之后显示在前一个图像上的下一个图像（例如鼠标按下；循环）

我想知道如何使用新`HTML5/CSS3`风格来做这个简单的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:21:01.800

我找到了很好的幻灯片示例，如果这是您正在寻找的内容，而无需太多额外内容。一个显示下一张照片的计时器，另一个显示更改背景。

CSS3 解决方案和每一步教程都不错

[定时幻灯片（方框）](http://coding.smashingmagazine.com/2012/04/25/pure-css3-cycling-slideshow/)
[定时幻灯片（背景）](http://tympanus.net/codrops/2012/01/02/fullscreen-background-image-slideshow-with-css3/)

我希望我没有误解你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:29:57.063

这是我发现的最好的

```
.stack {  position: relative; z-index: 10; }
.stack img { max-width: 180px; height: 180px; vertical-align: bottom; border: 5px solid #fff; border-radius: 3px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    -webkit-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.4);
    -moz-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.4);
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.4);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:27:17.103

我个人会使用 jQuery Cycle - [http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

```
<div id="shuffle" class="pics">    
    <img src="http://cloud.github.com/downloads/malsup/cycle/beach1.jpg" width="200" height="200" />    
    <img src="http://cloud.github.com/downloads/malsup/cycle/beach2.jpg" width="200" height="200" />    
    <img src="http://cloud.github.com/downloads/malsup/cycle/beach3.jpg" width="200" height="200" />    
</div>

$('#shuffle').cycle({
    fx:     'fade',
    delay:  -4000
}); 
```

老实说，我不确定是否有 HTML5 / CSS3 方法。这只是常规的 CSS，因为您所做的只是将容器设置为图像尺寸，然后将每个图像设置为绝对定位，以便它们“堆叠”在彼此之上。循环然后贯穿他们所有做动画。

您可以使用 CSS3 过渡，但您在问题中提到了 jQuery，因此 Cycle 是您最好的选择。

# html - 如何在 svg 中为矢量形状使用混合模式？

> ID：11448556
> 
> 赞同：4
> 
> 时间：2012-07-12T09:13:25.820
> 
> 标签：html, svg, vector-graphics, svg-filters

这是我的简单svg：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>

<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <defs>
    <filter id="f1" x="0" y="0">
      <feBlend mode="multiply" in="SourceGraphic" in2="SourceGraphic" />
    </filter>
    </defs>
    <path d='M100 100 L200 100 L200 200 L100 200 Z' fill='#00FFFF'/>
    <path d='M150 150 L250 150 L250 250 L150 250 Z' fill='#CC3300'/>
    <path d='M175 175 L275 175 L275 275 L175 275 Z' fill='#FFFF00'/>
</svg>

</body>
</html> 
```

它只是简单的 3 个矩形形状。是否可以将混合模式 MULTIPLY 应用于所有三个矩形？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T14:23:26.083

是的，这是可能的，但它没有应有的那么好。这里有两个选项，第一个使用 feImage，第二个使用 BackgroundImage 过滤器输入。如您所见，它们都有缺点。对引用 svg 内容或 BackgroundImage 过滤器输入的 feImage 的支持并不普遍，但您可以尝试在例如 Opera 或 Chrome 中查看一些结果。

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">
    <defs>
        <filter id="f1" x="0" y="0" width="1" height="1">
          <feImage xlink:href="#p1" result="p1"/>
          <feImage xlink:href="#p2" result="p2"/>
          <feImage xlink:href="#p3" result="p3"/>
          <feBlend mode="multiply" in="p1" in2="p2" />
          <feBlend mode="multiply" in2="p3" />
        </filter>

        <filter id="f2" x="0" y="0" width="1" height="1">
          <feBlend mode="multiply" in="BackgroundImage" in2="SourceGraphic" />
        </filter>

        <path id="p1" d='M100 100 L200 100 L200 200 L100 200 Z' fill='#00FFFF'/>
        <path id="p2" d='M150 150 L250 150 L250 250 L150 250 Z' fill='#CC3300'/>
        <path id="p3" d='M175 175 L275 175 L275 275 L175 275 Z' fill='#FFFF00'/>
    </defs>
    <rect width="100%" height="100%" filter="url(#f1)"/>

    <g transform="translate(300 0)">
        <g enable-background="new">
            <g enable-background="new">
                <path d='M100 100 L200 100 L200 200 L100 200 Z' fill='#00FFFF'/>
                <path d='M150 150 L250 150 L250 250 L150 250 Z' fill='#CC3300' filter="url(#f2)"/>
            </g>
            <path d='M175 175 L275 175 L275 275 L175 275 Z' fill='#FFFF00' filter="url(#f2)"/>
        </g>
    </g>
</svg> 
```

希望我们很快就能在所有浏览器中支持[CSS 合成和混合。](http://www.w3.org/TR/compositing-1/#mix-blend-mode)如果支持，你可以写这样的东西：

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <style>
       path { mix-blend-mode: multiply; }
    </style>
    <path d='M100 100 L200 100 L200 200 L100 200 Z' fill='#00FFFF'/>
    <path d='M150 150 L250 150 L250 250 L150 250 Z' fill='#CC3300'/>
    <path d='M175 175 L275 175 L275 275 L175 275 Z' fill='#FFFF00'/>
</svg> 
```

这是一个活生生的[例子](http://jsfiddle.net/b4Lj8mc7/)。

# android - Android：如何控制音量：如果音量按钮向上，SeekBar 向上

> ID：11448557
> 
> 赞同：2
> 
> 时间：2012-07-12T09:13:31.597
> 
> 标签：android, volume, seekbar

我的**SeekBar**有以下代码：

```
setVolumeControlStream(AudioManager.STREAM_MUSIC);

            final AudioManager audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
            int maxVolume = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
            int curVolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);

            LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View layout = inflater.inflate(R.layout.custom_dialog, (ViewGroup) findViewById(R.id.dialog_root_element));

            SeekBar volControl = (SeekBar)alert.findViewById(R.id.dialog_seekbar);

            volControl.setMax(maxVolume);
            volControl.setProgress(curVolume);
            volControl.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
                @Override
                public void onStopTrackingTouch(SeekBar arg0) {
                }

                @Override
                public void onStartTrackingTouch(SeekBar arg0) {
                }

                @Override
                public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) {
                    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, arg1, 0);
                }
            }); 
```

问题是我想当用户决定使用音量设备按钮时，我的**SeekBar**也向上或向下。

实际上，使用此代码，我可以使用两种方法（设备按钮和代码）正确控制音量，但是当我使用音量设备按钮时，我的**SeekBar**是静态的。

有什么想法或建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:46:22.693

您可以通过阅读以下讨论来解决此问题。

[有没有监听器来监听android中音量的变化？](https://stackoverflow.com/questions/3180279/is-there-a-listener-to-listen-for-changes-in-the-volume-in-android)

[接管 Android 上的音量键](https://stackoverflow.com/questions/3220556/taking-over-the-volume-key-on-android)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-27T09:23:28.487

检查以下答案：

```
 public boolean onKeyDown(int keyCode, KeyEvent event) {
          if (keyCode == KeyEvent.KEYCODE_VOLUME_UP) 
         { 
              mediaVlmSeekBar = (SeekBar) findViewById(R.id.seekBar1);
                int index = mediaVlmSeekBar.getProgress(); 
                mediaVlmSeekBar.setProgress(index + 1); 
                return true; 
         } else if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN)
          {
                int index = mediaVlmSeekBar.getProgress(); 
                mediaVlmSeekBar.setProgress(index - 1); 
                return true; 
         }
          return super.onKeyDown(keyCode, event); 
         } 
```

# php - smarty中的数字格式

> ID：11448558
> 
> 赞同：0
> 
> 时间：2012-07-12T09:13:33.277
> 
> 标签：php, smarty, number-formatting

如何`200000 into 2 Lacs, 20000000 => 2 Crore`在 smarty 中将我的价格（）显示为十进制值

我将价格值存储为

```
200000
350000
2000000
20000000 
```

在 MySQL 现在我需要将此值显示为

```
2/2.00 Lacs 
3.5 lacs 
20/20.00 lacs
2/2.00 crore 
```

可能重复的问题在[这里](https://stackoverflow.com/questions/2409110/is-it-possible-to-format-a-number-to-2-decimal-places-with-smarty-php)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:31:01.580

我同意罗布琼脂。

我不确定您拥有的数字，但是对于自定义修饰符来说，这样的事情是一个起点

```
function smarty_modifier_indian_currency($price)
{
    if($price>100000)
    {
        $lacs=$price/100000;
        // lacs

        if($lacs<100) return $lacs.' lacs';

        $crore=floor($lacs/100);
        $lacs=$lacs-($crore*100);

        if($lacs==0) return $crore.' crore';
        return $crore.'/'.$lacs.' crore';

    }
    return $price;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:24:22.270

棘手的一点是处理印度货币格式，这在[这个问题](https://stackoverflow.com/questions/10042485/how-to-display-currency-in-indian-numbering-format-in-php)中有所涉及。之后，添加[自定义 Smarty 修饰符](http://www.smarty.net/docs/en/plugins.modifiers.tpl)以允许您在模板中编写类似这样的内容很简单：

```
{$amount|format_indian_currency} 
```

# java - android比例标签图像

> ID：11448559
> 
> 赞同：0
> 
> 时间：2012-07-12T09:13:35.300
> 
> 标签：java, android

我为每个选项卡设置了一个图像，结果与预期一致，但在某些设备（平板电脑或某些智能手机型号）上，图像更大且高于文本。如何解决？谢谢你。

活动，

```
 StateListDrawable selector = new StateListDrawable();

        selector.addState(new int[] { android.R.attr.state_selected }, dSel);

        icon.setImageDrawable(selector); 
```

布局，

```
<TabHost 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

      <RelativeLayout       
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

        <LinearLayout  
            android:orientation="vertical"
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent"
            android:layout_below="@+id/mainLayout">

            <FrameLayout 
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent" 
                android:layout_height="0dip"
                android:layout_weight="1" 
                android:scrollbars="none"
                android:isScrollContainer="false">
            </FrameLayout>

            <TabWidget 
                android:id="@android:id/tabs"
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content"
                android:layout_weight="0"
                />

        </LinearLayout>         

    </RelativeLayout> 
```

![在此处输入图像描述](../Images/12956535de2d97188056e1d4c8c05357.png)![在此处输入图像描述](../Images/0cb26af4cd423caf66cf9b8f543d3600.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:27:30.387

我相信这些链接将指导您正确解决您的问题。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

[http://coding.smashingmagazine.com/2011/06/30/designing-for-android/](http://coding.smashingmagazine.com/2011/06/30/designing-for-android/)

[http://www.coronalabs.com/blog/2011/01/27/dynamic-image-resolution-made-easy/](http://www.coronalabs.com/blog/2011/01/27/dynamic-image-resolution-made-easy/)

另外，我相信这个问题引发了一个与您类似的问题。

[确定多个 android 屏幕尺寸/密度的图像尺寸](https://stackoverflow.com/questions/2691368/determining-image-sizes-for-multiple-android-screen-sizes-densities)

# php - 在同一 PHP 页面上显示表单结果

> ID：11448561
> 
> 赞同：-1
> 
> 时间：2012-07-12T09:13:55.317
> 
> 标签：php, qr-code

我有一个表格，要求提供 Google 的二维码。用户输入一个网站，然后他们被定向到结果页面，并带有 QR 码。我想知道是否有办法让二维码出现在同一页面上？我尝试将 Google 脚本放在同一页面上，但它似乎不起作用。代码如下：

```
<form method="post" action="qr-creation.php">
<input type="text" name="contractno"/>
<input type="submit" value="Get QR Code"/> 
```

这是谷歌代码：

```
<?
$urlToEncode="$short";
generateQRwithGoogle($urlToEncode);
function generateQRwithGoogle($url,$widthHeight ='500',$EC_level='L',$margin='0') {
    $url = urlencode($url); 
    echo '<img src="http://chart.apis.google.com/chart?chs='.$widthHeight.
'x'.$widthHeight.'&cht=qr&chld='.$EC_level.'|'.$margin.
'&chl='.$url.'" alt="QR code" widthHeight="'.$widthHeight.
'" widthHeight="'.$widthHeight.'"/>';
}
?> 
```

我从来没有真正深入研究过 AJAX，所以任何简单的帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:32:55.810

首先，让表单提交到自身/同一页面：

```
<form method="post" action="samefile.php"> 
```

然后，在同一页面中，检查您是否收到 POST 请求，如果有，请执行您的代码：

```
if (!empty($_POST['contractno'])) {
    // output QR code here
} 
```

# php - 返回类别树的Mysql查询

> ID：11448563
> 
> 赞同：6
> 
> 时间：2012-07-12T09:14:13.527
> 
> 标签：php, mysql, sql-order-by, categories

我正在从事品类管理。我在每一行都有 parentId。类别可以是 n 级。我可以递归调用 php 函数，该函数将返回类别树数组。

![在此处输入图像描述](../Images/d5aa315b1328e45f18ec496fa755d6c5.png)

现在的问题是：在管理面板中，我想要如下所示的类别列表页面。即属于哪个类别。

*   家
*   产品（编辑）（删除）
*   产品 > 产品 1（编辑）（删除）
*   产品 > 产品 2（编辑）（删除）
*   产品 > 产品 2 > 产品 2 1（编辑）（删除）
*   产品 > 产品 2 > 产品 2 2（编辑）（删除）
*   联系我们（编辑）（删除）

我希望 mysql 查询结果的顺序与上图相同。我不确定如何实现它。

```
SELECT *
FROM tbl_categories
ORDER BY ??? 
```

请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:01:44.900

您可以使用一个存储函数，该函数将递归地获取根路径并与您的父级连接。

```
DELIMITER $$
DROP FUNCTION IF EXISTS `get_category`$$
CREATE FUNCTION `get_category`(cat_id int) RETURNS VARCHAR(255)
READS SQL DATA
BEGIN
DECLARE c_id INT;
DECLARE p_id INT;
DECLARE count INT;
DECLARE cat_name VARCHAR(255);
DECLARE cat_path VARCHAR(255);
set c_id = cat_id;
SELECT parent_category_id, category_name INTO p_id, cat_name FROM categories WHERE category_id = c_id;
set c_id = p_id;
set cat_path=cat_name;
set count=0;
WHILE (c_id IS NOT NULL) DO 

SELECT parent_category_id, category_name INTO p_id, cat_name FROM categories WHERE category_id = c_id;
set c_id = p_id;
set cat_path = concat_ws('>',cat_name,cat_path);
set count = count + 1;
IF count=10 THEN
  SET c_id = NULL;
END IF;
 END WHILE;
RETURN cat_path;
END
$$
DELIMITER ; 
```

然后调用使用

```
select getcategory(category_id); 
```

在此功能中，我进行了完整性检查以避免无限循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:49:27.563

没有*单一的 SQL 查询*可以为您带来基于此表结构的按您期望的方式排序的结果。

解决问题的方法有两种：

1.  使用外部应用程序逻辑（在 DB 之外）进行递归调用，以发现每个类别的子项并在应用程序中构建树。

2.  使用其中一种算法将树数据存储在关系数据库中。其中一种算法称为[`Modified Preorder Tree Traversal`](http://imrannazar.com/Modified-Preorder-Tree-Traversal)或简称为 MPTT。

假设我们使用列`lft`并`rgt`在遍历中维护左/右索引，当您插入新类别时，您将需要：

1.  通过 Id 获取父类别信息：`SELECT lft,rgt FROM tbl_categories WHERE categoryId=5` 让我们假设父类别有`lft=7`并且`rgt=10`（在这种情况下它已经有一个孩子）

2.  为新条目腾出空间 - 将所有记录移动 2（lft 为 1，rgt 为 1）：

    `UPDATE tbl_categories SET rgt=rgt+2 WHERE rgt>=10 ORDER BY rgt DESC`

    `UPDATE tbl_categories SET lft=lft+2 WHERE lft>=10 ORDER BY lft DESC`

注意这里`ORDER`降序。由于`lft`和`rgt`应该是唯一的，所以建议`UNIQUE`对它们进行约束，然后在更新时需要降序排列，以防止重复键错误。

1.  设置`lft=<former parent rgt>`并`rgt=<former parent rgt +1>`插入新记录...

    `INSERT INTO tbl_categories SET categoryName="New Child",parentCategoryId=5,lft=11,rgt=12,...`

如果您搜索`MPTT PHP MySQL`. 关于这个主题有很多教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:42:17.617

您无法在单个 mysql 查询中实现此目的。那么你可以通过执行多个查询来实现这一点。算法是这样的：最初通过从数据库中获取数据来创建一个您将填充的数据集对象。创建一个以父 ID 作为参数的方法，如果存在则返回其子节点，如果没有子节点则返回 -1。Step1：获取所有没有父（根）节点的行。Step2：遍历这个结果。例如，如果 prod1 和 prod2 是结果集中的初始返回节点。迭代这个 RS 我们得到 prod1，我们在 DataSET obj 中插入一行。然后我们将 prod1 的 id 发送给 getCHILD 方法，以获取它的子节点，然后我们再次迭代返回的结果集，并再次调用 getCHILD 方法，直到我们没有得到最低节点。

# php - 当 .zip >= 4GB 时，PHP 的原生 ZipArchive 类会失败。怎么修？

> ID：11448565
> 
> 赞同：0
> 
> 时间：2012-07-12T09:14:19.950
> 
> 标签：php, ubuntu, zip, limit, ziparchive

PHP 5.3+ 的本机 ZipArchive 类 ( [http://php.net/ziparchive](http://php.net/ziparchive) ) 会创建损坏的结果文件 (.zip)，但仅当结果 .zip 大于 ~4GB 时（我认为是 3,6 GB。服务器是Ubuntu 10.10 64 位，4GB RAM，最新 PHP 5.3）。错误（使用您使用的任何软件解压缩此 .zip 时）是：

```
file #1:  bad zipfile offset (lseek): 
```

根据网上的几篇帖子，这只是这个类/ zip 函数的（未记录的）最大限制。我的问题是：如何解决这个问题，又快又脏？是否有一些可能的 php.ini 或服务器设置？或者其他一些在本机 ubuntu 系统上创建 4GB+ .zip 文件的方法？我没有 root 访问权限，无法安装新软件包。

在 Java 上有一些类似的问答： [使用 Java 压缩文件：有限制吗？](https://stackoverflow.com/questions/6738773/zip-files-with-java-is-there-a-limit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:21:40.463

[维基百科的引述](http://en.wikipedia.org/wiki/Zip_%28file_format%29#ZIP64)：

> 原始 zip 格式对各种事物（文件的未压缩大小、文件的压缩大小和存档的总大小）有 4 GiB 的限制，并且 zip 存档中的条目限制为 65535 个。

这不是类的限制，而是 zip 本身。例如，您可以切换到 tar.gz。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:20:10.187

我相信这是操作系统使用的文件系统的问题。我会考虑将数据存储在多个存档文件中。

# spring-batch - Spring Batch：OnSkipInWrite 打印日志两次？？？如何 ？

> ID：11448572
> 
> 赞同：0
> 
> 时间：2012-07-12T09:14:30.000
> 
> 标签：spring-batch

在执行春季批次时，我面临着一个奇怪的情况。我已将我的作业步骤执行配置为使用“skippable-exception-classes”作为

```
<step id="prepareFileStep" next="fillRecordsCounterStep">
<tasklet>
   <chunk reader="stagingIdReader" writer="customerIdRecordCompWriter" commit-interval="50" skip-limit="200">
    <streams>
         <stream ref="flatFileRecordWriter" />
    </streams>
    <skippable-exception-classes>
         <include class="java.lang.Exception" /> 
    </skippable-exception-classes>
</chunk>
<listeners>
         <listener ref="prepareFlatFileSkipListener" />
    <listener ref="prepareFlatFileStepListener" />
</listeners>
</tasklet> 
```

我的 onSkipInWrite() 实现为：

```
@OnSkipInWrite
public void onSkipInWrite(Object item, Throwable exception) {
    AppLog.warn(AppConstants.CALLER, "Skipping Customer Id:"+ item.getCustomer().getCustomerId()+"\n" + exception.toString());
} 
```

我想知道为什么日志文件两次打印跳过的项目，当我调试时它只执行一次？请给我修复的朋友建议我.​​..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:25:37.677

很可能是由于春季批处理块已回滚并一次作为一个块项目重试（而不是整个块大小）：

[Spring Batch：在项目写入​​期间跳过](https://stackoverflow.com/questions/6729260/spring-batch-skipping-during-item-write/6730807#6730807)

# eclipse - 使用 CDT 索引所有 #ifdef 和 #else 块

> ID：11448574
> 
> 赞同：2
> 
> 时间：2012-07-12T09:14:34.490
> 
> 标签：eclipse, eclipse-cdt, indexer, conditional-compilation

我想在 Ubuntu 上的 Eclipse indigo 上使用我的 CDT 索引器 8.0.2 对我的 C/C++ 源文件中的每个 #ifdef 和 #else 块进行索引。

添加符号不起作用，因为它不会覆盖 #else 块

有什么方法可以强制 Eclipse CDT 简单地忽略 #ifdef 和 #else 块？像其他索引器一样（如 emacs cscope）

我一直在寻找几天，并没有找到任何好的解决方案。

我有大量代码，最好不要编辑它以删除#ifdefs，即使是临时的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:52:31.407

最简洁的答案是不。CDT 预处理器不是这样工作的。它遵循正确的语义，这意味着它只解析#ifdef 的一个分支。Emacs 可能会进入每个分支，但它没有进行像 CDT 那样正确或完整的分析。

您唯一的选择是设置配置为解析每个分支的多个构建配置。然后，当您想在不同的分支中工作时，您可以切换构建配置。这远非理想，因为设置起来可能很耗时，并且每次切换时都会触发重新索引。（您还必须对其进行配置以进行重新索引，转到 Window > Preferences > C/C++ > Indexer 并选择“Use active build configuration”）

请注意，CDT 解析器将解析非活动 #else 分支内部，只是为了找到要在大纲视图中显示的声明。

# macos - 无法为实验室目录设置别名，但可以在 Lion 中为 phpMyAdmin 设置别名

> ID：11448577
> 
> 赞同：2
> 
> 时间：2012-07-12T09:14:43.167
> 
> 标签：macos, apache, web, osx-lion, alias

我正在使用带有 osx lion 的 mac 我使用以下设置为我的 apache 设置别名：

```
Alias /phpMyAdmin/ "/Users/jason/Sites/phpMyAdmin/"
<Directory "/Users/jason/Sites/phpMyAdmin">
    Options FollowSymLinks
AllowOverride None
Order allow,deny
Allow from all
</Directory>

Alias /Lab8/ "/Users/jason/Sites/Lab8/"
<Directory "/Users/jason/Sites/Lab8">
    Options FollowSymLinks
AllowOverride None
Order allow,deny
Allow from all
</Directory> 
```

我的Lab8目录和phpMyAdmin目录放在同一个地方（/Users/jason/Sites）

我可以通过**localhost/phpMyAdmin/**访问 phpMyAdmin 但是当我想通过**localhost/Lab8/**访问 Lab8 目录时 ，它会给出以下消息： Forbidden 您无权访问此服务器上的 /Lab8/。

我不知道我的设置有什么问题。 即使我为 Lab8 目录及其下的所有文件设置了权限 777，我也无法通过**localhost/Lab8访问我的 Lab8 目录。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:49:50.073

会不会是你的目录列表关闭了，Lab8目录下没有index.php/index.html文件？

# jquery - 如何通过 JQuery Ajax PUT 方法发送二进制数据

> ID：11448578
> 
> 赞同：8
> 
> 时间：2012-07-12T09:14:44.160
> 
> 标签：jquery, ajax, upload, binaryfiles, put

我是 JQuery 新手，我想使用 JQuery Ajax 将一些文件上传到服务器，仅在 PUT 方法中。当我将一些二进制文件（如 gif 或 jpeg）发送到我的服务器时，上传成功，但二进制数据的内容发生了变化（它总是大于原始文件大小）。我尝试更改内容类型或文件结果的类型，但仍然无法正常工作。任何人都知道如何解决这个问题？

PS：我无法将二进制文件的内容编码为其他形式，因为我无法触摸服务器的代码。

```
var reader = new FileReader();

reader.onloadend = (function(Thefile) {

    $.ajax({
        url: url,
        processData:false,
        //contentType:"application/octet-stream; charset=UTF-8",
        data: file.result,
        type: 'PUT',
        success : function(){console.log("OK!");},
        error : function(){console.log("Not OK!");}
    }); 
})(file);

reader.readAsBinaryString(file); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T16:59:58.590

大多数（全部？）浏览器在通过`XMLHttpRequest`. 当您将文件作为二进制字符串读取时，您会得到确切的信息：一个 JavaScript 字符串对象，其中每个字符都是 0 到 255 之间的值。

要强制 AJAX 请求发送二进制编码数据，数据参数必须是`ArrayBuffer`、`File`或`Blob`对象。

如果您需要在发送之前访问文件的内容，可以`ArrayBuffer`使用以下代码将二进制字符串转换为：

```
var arrBuff = new ArrayBuffer(file.result.length);
var writer = new Uint8Array(arrBuff);
for (var i = 0, len = file.result.length; i < len; i++) {
    writer[i] = file.result.charCodeAt(i);
} 
```

然后您将`arrBuff`实例传递给 AJAX 函数。否则，您应该能够将`File`对象本身传递给 AJAX 函数，而无需编写所有`FileReader`代码。

# javascript - 在网格列中添加按钮。ExtJs

> ID：11448580
> 
> 赞同：4
> 
> 时间：2012-07-12T09:14:45.687
> 
> 标签：javascript, extjs

我想在网格的一列中添加按钮。我试试这段代码

```
listeners: {
render: {
    fn: function(kad_tab){
        var view = kad_tab.getView();
        for (var i = 0; i < store.getCount(); i++) {
            var cell = Ext.fly(view.getCell(i, 2));
            new Ext.Button({
                handler: function(){
                    alert('Suppression')
                },
                renderTo: cell.child(".btn"),
                text: 'Supprimer'
            });
        }
    },
   // delay: 200
} 
```

}

```
{header: "", width: 70, dataIndex: '', renderer: function(){ return '<div class="btn" style="height: 11px; width: 60px"></div>';}} 
```

但是萤火虫说他在这里看到了错误`Ext.fly(this.getRow(c)) is null`。如果我使用`delay: 200`. firebug 中没有错误，但在列中看不到按钮。

我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T10:30:36.520

我找到了一个简单的方法...

```
{
        xtype: 'actioncolumn',
        width: 50,
        items: [{
            icon   : url_servlet+'externals/gxp/src/theme/img/pencil.png', 
            tooltip: 'Button click',
            handler: function(grid, rowIndex, colIndex) {
                alert("DAMACIA!!!!!");
            }
        }]
} 
```

# iphone - 如何使用 UIGetScreenImage 从一组图像制作电影

> ID：11448581
> 
> 赞同：8
> 
> 时间：2012-07-12T09:14:51.140
> 
> 标签：iphone, avfoundation, mpmovieplayer

我已经使用了这种方法并获得了多张图像。我能够成功创建电影，但我的问题是当我播放电影时，它似乎播放得太快，即电影没有所有帧。这是我的代码。

```
-(UIImage *)uiImageScreen
{
  CGImageRef screen = UIGetScreenImage();
  UIImage* image = [UIImage imageWithCGImage:screen];
  CGImageRelease(screen);
  UIImageWriteToSavedPhotosAlbum(image, self,nil, nil);
  return image;
}

-(void) writeSample: (NSTimer*) _timer 
 {
if (assetWriterInput.readyForMoreMediaData) {
    // CMSampleBufferRef sample = nil;

    CVReturn cvErr = kCVReturnSuccess;

    // get screenshot image!
    CGImageRef image = (CGImageRef) [[self uiImageScreen] CGImage];
    NSLog (@"made screenshot");

    // prepare the pixel buffer
    CVPixelBufferRef pixelBuffer = NULL;
    CFDataRef imageData= CGDataProviderCopyData(CGImageGetDataProvider(image));
    NSLog (@"copied image data");
    cvErr = CVPixelBufferCreateWithBytes(kCFAllocatorDefault,
                                         FRAME_WIDTH,
                                         FRAME_HEIGHT,
                                         kCVPixelFormatType_32BGRA,
                                         (void*)CFDataGetBytePtr(imageData),
                                         CGImageGetBytesPerRow(image),
                                         NULL,
                                         NULL,
                                         NULL,
                                         &pixelBuffer);
    NSLog (@"CVPixelBufferCreateWithBytes returned %d", cvErr);

    // calculate the time
    CFAbsoluteTime thisFrameWallClockTime = CFAbsoluteTimeGetCurrent();
    CFTimeInterval elapsedTime = thisFrameWallClockTime - firstFrameWallClockTime;
    NSLog (@"elapsedTime: %f", elapsedTime);
    CMTime presentationTime =  CMTimeMake (elapsedTime * 600, 600);

    // write the sample
    BOOL appended = [assetWriterPixelBufferAdaptor appendPixelBuffer:pixelBuffer withPresentationTime:presentationTime];

    if (appended) 
    {
        NSLog (@"appended sample at time %lf", CMTimeGetSeconds(presentationTime));
    } 
    else 
    {
        NSLog (@"failed to append");

    }
}
} 
```

然后我调用这个方法来创建电影。

```
-(void)StartRecording
{
 NSString *moviePath = [[self pathToDocumentsDirectory] stringByAppendingPathComponent:OUTPUT_FILE_NAME];
if ([[NSFileManager defaultManager] fileExistsAtPath:moviePath]) {
    [[NSFileManager defaultManager] removeItemAtPath:moviePath error:nil];
}

NSURL *movieURL = [NSURL fileURLWithPath:moviePath];
NSLog(@"path=%@",movieURL);
NSError *movieError = nil;
[assetWriter release];
assetWriter = [[AVAssetWriter alloc] initWithURL:movieURL 
                                        fileType: AVFileTypeQuickTimeMovie 
                                           error: &movieError];
NSDictionary *assetWriterInputSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                          AVVideoCodecH264, AVVideoCodecKey,
                                          [NSNumber numberWithInt:320], AVVideoWidthKey,
                                          [NSNumber numberWithInt:480], AVVideoHeightKey,
                                          nil];
assetWriterInput = [AVAssetWriterInput assetWriterInputWithMediaType: AVMediaTypeVideo
                                                      outputSettings:assetWriterInputSettings];
assetWriterInput.expectsMediaDataInRealTime = YES;
[assetWriter addInput:assetWriterInput];

[assetWriterPixelBufferAdaptor release];
assetWriterPixelBufferAdaptor = [[AVAssetWriterInputPixelBufferAdaptor  alloc]
                                 initWithAssetWriterInput:assetWriterInput
                                 sourcePixelBufferAttributes:nil];
[assetWriter startWriting];

firstFrameWallClockTime = CFAbsoluteTimeGetCurrent();
[assetWriter startSessionAtSourceTime: CMTimeMake(0, 1000)];

// start writing samples to it
[assetWriterTimer release];
assetWriterTimer = [NSTimer scheduledTimerWithTimeInterval:0.1
                                                    target:self
                                                  selector:@selector (writeSample:)
                                                  userInfo:nil
                                                   repeats:YES] ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T10:34:00.640

试试这个方法....

```
if (![videoWriterInput isReadyForMoreMediaData]) {
    NSLog(@"Not ready for video data");
}
else {
    @synchronized (self) {
        UIImage* newFrame = [self.currentScreen retain];
        CVPixelBufferRef pixelBuffer = NULL;
        CGImageRef cgImage = CGImageCreateCopy([newFrame CGImage]);
        CFDataRef image = CGDataProviderCopyData(CGImageGetDataProvider(cgImage));

        int status = CVPixelBufferPoolCreatePixelBuffer(kCFAllocatorDefault, avAdaptor.pixelBufferPool, &pixelBuffer);
        if(status != 0){
            //could not get a buffer from the pool
            NSLog(@"Error creating pixel buffer:  status=%d", status);
        }
        // set image data into pixel buffer
        CVPixelBufferLockBaseAddress( pixelBuffer, 0 );
        uint8_t* destPixels = CVPixelBufferGetBaseAddress(pixelBuffer);
        CFDataGetBytes(image, CFRangeMake(0, CFDataGetLength(image)), destPixels);  //XXX:  will work if the pixel buffer is contiguous and has the same bytesPerRow as the input data

        if(status == 0){
            BOOL success = [avAdaptor appendPixelBuffer:pixelBuffer withPresentationTime:time];
            if (!success)
                NSLog(@"Warning:  Unable to write buffer to video");
        }

        //clean up
        [newFrame release];
        CVPixelBufferUnlockBaseAddress( pixelBuffer, 0 );
        CVPixelBufferRelease( pixelBuffer );
        CFRelease(image);
        CGImageRelease(cgImage);
    }

} 
```

# javascript - 通过asp.net中的javascript获取特定组的页面验证器的错误消息

> ID：11448586
> 
> 赞同：0
> 
> 时间：2012-07-12T09:14:58.933
> 
> 标签：javascript, asp.net

我正在尝试编写javascript函数，我想在其中显示给出组名的验证器的无效字段的错误消息。

基本上我有一些不同的验证器组，如果输入的值对于使用常用功能按下按钮的组有效，则希望在警报中显示错误消息。

我正在使用以下代码：

```
function check(group) {

        if (Page_ClientValidate(group)) {
            return true;
        }
        else {
            var message="";
            for (i = 0; i < Page_Validators.length; i++) {

                if (!Page_Validators[i].isValid) {
                    message = message + Page_Validators[i].Errormessage+ "\n";
                }
            }
            alert("Enter following fields marked with * or Invalid Data\n"+message);
            return false;
        } 
```

我想为特定的验证器组运行以下代码部分：

```
var message="";
                for (i = 0; i < Page_Validators.length; i++) {

                    if (!Page_Validators[i].isValid) {
                        message = message + Page_Validators[i].Errormessage+ "\n";
                    }
                }
                alert("Enter following fields marked with * or Invalid Data\n"+message);
                return false;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:23:54.280

如果我理解正确，一个简单的`switch`语句就可以了

```
for (i = 0; i < Page_Validators.length; i++) {
    switch(Page_Validators[i].validationGroup)
    {
        case "MyGroup1":
            // your javascript code
            break;
        case "MyGroup2":
            // your javascript code
            break;
        default:
            // your javascript code
            break;
    }
} 
```

如果需要查看 javascript 对象属性，请在 javascript 中设置断点并使用 Visual Studio 进行调试

# c# - MVC3,PartialViews,Ajax 传值

> ID：11448591
> 
> 赞同：1
> 
> 时间：2012-07-12T09:15:07.550
> 
> 标签：c#, ajax, asp.net-mvc-3, partial-views

这是模型`example.cs`

```
namespace View_Partial_Editor.Models
{
    public class ExampleView
    {
            ...
            public string Field1 { get; set; }
            public string Field2 { get; set; }           
            public string Field3 { get; set; }
            public string Field4 { get; set; }
            public string Field5 { get; set; }
            ...

    }
} 
```

我有这样的看法 `example.cshtml`：

```
@model View_Partial_Editor.Models.ExampleView

@{Html.RenderPartial("EditExample",Model);}    

@Html.TextBoxFor(m => m.Field1) 
```

然后我有这个 partialView `EditExample.cshtml`：

```
@model View_Partial_Editor.Models.ExampleView    

@Html.HiddenFor(m => m.Field1)        

@using (Ajax.BeginForm("EditExample", new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "partial" }))
{
   <div>
      @Html.EditorFor(m => m, "Editor", null)
   </div>

   <p>
      <input  id="buttona" type="submit" value="Save" /> 
   </p>        
} 
```

我有这个控制器`ExampleController`：

```
namespace View_Partial_Editor.Controllers
{
    public class ExampleController : Controller
    {
        //
        // GET: /Example/    
        public ActionResult Example()
        {
            return View();
        } 

        [HttpPost]
        public ActionResult EditExample(ExampleView example)
        {
            example.Field1 ="7";

            return View("Example", example);
        }    
    }
} 
```

这是在部分中调用的编辑器`editor.cshtml`

```
@model View_Partial_Editor.Models.ExampleView

<div class="editor-label">
    @Html.LabelFor(m => m.Field1 )
</div>
<div class="editor-field">
    @Html.EditorFor(m => m.Field1)
    @Html.ValidationMessageFor(m => m.Field1)
</div>
<div class="editor-label">
    @Html.LabelFor(m => m.Field2)
</div>
<div class="editor-field">
    @Html.EditorFor(m => m.Field2)
    @Html.ValidationMessageFor(m => m.Field2)
</div> 
```

我的问题是我想在ajax调用中修改控制器中模型的数据，并将修改后的模型返回给`exampleView`.但是当ajax调用完成时，我在控制器中更改的值在模型中没有改变

编辑：我想要的是将调用发送到 ajax 方法，在数据库中保存一些内容，然后修改模型，并且在示例视图中我希望该模型具有更改。

此时，如果我用ajax的结果替换部分视图，示例视图中的模型不会被修改。另一种方法是替换完整示例视图，因此模型在那里接收，但我必须通过许多使用 Html.HiddenFor 的字段，可以在不替换视图的情况下实现这一点，只返回带有更改的模型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:28:27.047

尝试调用`ModelState.Clear()`您的 HttpPost 操作方法。Html 助手首先使用 ModelState 中的值，然后是 Model。因此，如果您在帖子上更改模型中的值，则需要从 ModelState 中清除该值。

# html - 网站上有多个关键字元标记

> ID：11448592
> 
> 赞同：1
> 
> 时间：2012-07-12T09:15:08.830
> 
> 标签：html, seo

在网站上有多个关键字元标记是正确的方法吗？

例如：

```
<meta name="keywords" content="test1" />
<meta name="keywords" content="test2" /> 
```

还是错误？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:19:08.620

取自[网站管理员](https://webmasters.stackexchange.com/a/18629/14414)

元`keywords`标记不再做任何事情，至少就大多数搜索引擎而言。您正在尝试解决一个不存在的问题。如今，搜索引擎按内容编制索引，而无需您的帮助。

请参阅[有关元标记的 Wikipedia 文章](http://en.wikipedia.org/wiki/Meta_tag#The_keywords_attribute)：

> 搜索引擎在 1998 年开始放弃对元元素提供的元数据的支持，到 2000 年代初，大多数搜索引擎已经完全摆脱了对元元素的依赖。2002 年 7 月，AltaVista，最后一个仍然提供支持的主要搜索引擎之一，终于停止考虑它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:34:11.923

这不是错误；`meta`可以使用任意数量的标签。但正如@Nerd-Herd 指出的那样，关键字元标记几乎没有用处。

如果您使用此类标签，通常没有理由在每页使用多个标签，因为仅编写`<meta name="keywords" content="test1, test2">`.

理论上，如果您使用不同语言的关键字，那么您有理由使用多个标签，因为语言标识是每个元素的，例如

```
<meta name="keywords" content="liberty" lang="en">   
<meta name="keywords" content="liberté" lang="fr"> 
```

但这只是理论上的，因为搜索引擎可能会忽略关键字`meta`标签，并且几乎肯定会忽略`lang`一般属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T22:14:25.190

元标记“描述”和“关键字”非常重要。对于网站的每个页面，它们应该是不同的。

我们在“谷歌搜索引擎优化入门指南”中阅读

> 描述元标记很重要，因为 Google**可能会将**它们用作您网页的片段。请注意，我们之所以说“可能”，是因为如果 Google 能够很好地匹配用户的查询，它可能会选择使用您网页可见文本的相关部分。
> 
> 为您的每个页面添加描述元标记始终是一个好习惯，以防谷歌无法在代码段中找到合适的文本选择。-第 6 页

强调他们的。

# c# - 替换windows phone中的serializationinfo

> ID：11448598
> 
> 赞同：5
> 
> 时间：2012-07-12T09:15:25.560
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我必须获取有关序列化对象的信息。通常我会使用`SerializationInfo`，但`WP7.5`.

你可以给我推荐哪门课？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T04:45:40.463

你是如何序列化你的对象的？自从我接触到 WP 方面已经有一段时间了，但是你不能/不应该只在你的对象上实现一个 ToBytes()/FromBytes() 并手动写入/读取你的对象的片段，也许带 BinaryReader？

# java - 数学问题：全天候放置圆圈

> ID：11448599
> 
> 赞同：2
> 
> 时间：2012-07-12T09:15:28.410
> 
> 标签：java, math, draw, geometry

看看沿线的灰色圆圈，它们需要平均放置以代表小时，这是我的代码，我哪里出错了？

```
for (int i=0; i<12; i++)
    {
        c.drawCircle(140*(float)Math.cos((double) (i*30))+ width/2,
                     140*(float) Math.sin((double) (i*30)) + height/2,  1,  p);
    } 
```

![在此处输入图像描述](../Images/aeee10f7c149a467a6b825e0049856e8.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T09:17:44.440

角度必须以弧度（在和之间）提供给[Math.cos](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Math.html#cos%28double%29)。`0``2*Math.PI`

所以，而不是

```
Math.cos((double) (i*30)) 
```

利用

```
Math.cos(i*Math.PI/6.0) 
```

请注意，我还删除了对 double 的无用强制转换：将 int 和 double 相乘已经产生了 double。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T09:17:44.627

`Math.sin`并`Math.cos`以弧度而不是度数为单位操作角度。要更正，请乘以 pi 并除以 180。

# iphone - 如何在iphone中导航到上一页

> ID：11448602
> 
> 赞同：1
> 
> 时间：2012-07-12T09:15:32.553
> 
> 标签：iphone, ipad, uinavigationcontroller

如何导航到上一页！

我将导航控制器添加到 appDelegate 所以考虑了我确实有导航控制器的应用程序。

我隐藏了导航栏并在顶部添加了 HeaderView。

// 隐藏的导航栏

```
- (void) viewWillAppear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:YES animated:animated];
    [super viewWillAppear:animated];
} 
```

现在用 UIView 自定义我的标题栏！我隐藏了导航栏并在顶部添加了 HeaderView。

现在我将 BackButton 添加到标题栏。现在我想导航上一页。任何人都可以建议我吗？

@提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:18:47.980

如果视图被推送操作调用，请调用：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

否则，如果视图通过模态调用显示：

```
[self dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T09:20:07.487

```
Use [self.navigationController popviewControllerAnimated :YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:16:58.837

当用户点击返回按钮时使用它：

```
[self popViewControllerAnimated:YES]; 
```

# database - 没有操作系统的数据库

> ID：11448615
> 
> 赞同：0
> 
> 时间：2012-07-12T09:16:24.343
> 
> 标签：database, operating-system

是否有任何数据库可以在没有任何操作系统的情况下工作。

我的要求是，我需要在嵌入式设备上移植一些代码，该设备在微控制器上运行时没有操作系统。建议我最好的数据库或这种情况下的替代品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:46:17.013

我猜你需要的是一个简单的键值存储。最好为相同的常规数据库编写一个小包，因为对于您的应用程序来说可能太重了。

顺便说一句，这些天大多数高端嵌入式系统（路由器/交换机）似乎都在使用 sqite

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:28:41.610

我认为您将在嵌入式系统上实现它。如果您使用 C/C++ 编写应用程序，请尝试使用 SQLite。有用于 C/C++的[SQLite API](http://www.sqlite.org/cintro.html)

# linux - Netgem n5200（或其他） - 如何进入 linux 操作系统层？

> ID：11448616
> 
> 赞同：-1
> 
> 时间：2012-07-12T09:16:24.957
> 
> 标签：linux, shell

通过 PuTTY 登录到 Netgem n5200 设备后，我在终端类型的 shell 中打开了大约 40 条命令，但没有关于如何关闭它并直接在 Linux 上工作的信息。

设备 99% 安装了 HardHat Linux 发行版 (MontaVista Linux)。从提到的 shell 级别，我可以使用一些简单的 linux 命令，如“！pwd”、“！ls -l”、“！ps”。也许我在 tmp 目录中并且此时我不能离开它会很有用。

我已经研究过 Netgem SDK 寻找信息，但我一无所获，在谷歌搜索后结果相同，所以我来这里寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:09:06.270

可能您可以尝试使用

```
!sh 
```

或者

```
!bash 
```

命令。

如果没有，您能否提供可用命令的列表（例如`pwd`, `ls`），其中一些可能用于获取 shell（例如`vi`）。

# iphone - iPhone 应用程序的 NodeJS API 问题

> ID：11448617
> 
> 赞同：0
> 
> 时间：2012-07-12T09:16:25.647
> 
> 标签：iphone, api, node.js, authentication, linkedin

我正在 NodeJS 中制作一个 API，它将同时被网站和 iPhone 原生应用程序使用。

它应该使用 LinkedIn API 授权用户。当 iPhone 本机应用程序在另一端工作时，我如何使用 NodeJS API 做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:21:55.300

看看passportjs.org

你应该能够用这个库做你需要的事情。

# slider - nivo滑块的淡化效果

> ID：11448618
> 
> 赞同：1
> 
> 时间：2012-07-12T09:16:33.440
> 
> 标签：slider, fade, nivo-slider

当我使用淡入淡出效果时，我的滑块无法正常工作。但有了另一个效果，一切都很好。

现在，我正在使用淡入淡出效果：但图片每次都会改变位置。如果我点击第二个点，图片不会改变： http: [//mmafitness.com.au/home](http://mmafitness.com.au/home)

但如果我使用另一种效果。示例折叠。它工作得很好。 [http://mmafitness.com.au/test-slider-3](http://mmafitness.com.au/test-slider-3)

我不知道为什么。请帮我！

# objective-c - iOS相机UIView在iPad上覆盖全屏？

> ID：11448631
> 
> 赞同：0
> 
> 时间：2012-07-12T09:17:19.390
> 
> 标签：objective-c, ios, ipad

我正在尝试在 iPad 上的相机模式上进行叠加。当相机处于横向模式时，覆盖仅覆盖屏幕的 2/3 而不是全屏。然而，它以纵向模式覆盖整个屏幕。我的猜测是叠加层可能仅以纵向尺寸显示，因此叠加层似乎不会覆盖整个屏幕。

```
UIView *overlay = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

overlay.backgroundColor = [UIColor blueColor];
overlay.alpha = 0.3; 
overlay.opaque = NO;

imagePicker.mediaTypes = mediaTypes;
imagePicker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;
imagePicker.modalPresentationStyle = UIModalPresentationFullScreen;

imagePicker.cameraOverlayView = overlay; 
```

但是我可以让它覆盖整个屏幕吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:53:03.457

对视图框架进行手动设置。当它旋转到纵向或横向时。

对于人像 CGRectMake(0,0,768,1024);

对于景观 CGRectMake(0,0,1024,768);

# excel - 如何使用梨库更新现有的 excel 文件？

> ID：11448633
> 
> 赞同：0
> 
> 时间：2012-07-12T09:17:22.650
> 
> 标签：excel, pear

我有一个包含一些数据的 excel 文件。我可以使用 pear 库更新该 excel 的第二列（单元格编号可能：b2、b3、b4、b5 ....）吗？

我使用 Spreadsheet_Excel_Reader() 来读取 excel：

```
$xlsFormatFile = UPLOADS_DIR.DS."my_xls_format.xls";

require_once (EXCEL_LIB_DIR.DS.'[excel_reader2.php][1]');

$data = new Spreadsheet_Excel_Reader($xlsFormatFile);

echo $data->dump(true, true);//Shows the content of the excel file in browser 
```

现在我该如何更新数据并保存。请给我任何示例代码或任何建议欢迎......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:08:07.753

Spreadsheet_Excel_Reader 包按照它说的做，它**读取**xls 电子表格文件，它不能写入这些文件。也有编写器：Spreadsheet_Excel_Writer 可用于创建电子表格文件，但无法读取（尽管有人告诉我其他情况）。您可以同时使用这两个包，但您需要编写“胶水”代码来获取阅读器的结果，并使用它来使用编写器创建一个新文件（同名）。

另一种方法是使用可以读写的库，例如[PHPExcel 。](http://phpexcel.codeplex.com)

# backbone.js - 模型拥有的集合中的访问方法

> ID：11448644
> 
> 赞同：0
> 
> 时间：2012-07-12T09:17:45.693
> 
> 标签：backbone.js

我的问题是访问集合中的模型函数。

我有一个这样的元素结构：

*   内容列表（集合）

    *   内容（型号）
        *   svg结构（模型）
        *   svgParameterList（集合）
            *   css样式（函数）
            *   svgParameter(模型)

                *   改变风格（功能）

mContent=新内容列表（）；

我想从我的 contentList 对象中调用 changeStyle 函数。我试过这个，但它不起作用

```
 valToSave = mContent.get(ici)  
 monstyle=valToSave.get("svgParameterList")  
 lulu=monstyle.cssStyle();  

/************************************ Model *******************************/
var content = Backbone.Model.extend({
defaults: function() {
  return {
    id : null,
    svgStructure: "",
    svgParameterList: ""
  };
},
initialize: function() {
    var self=this;
    this.svgStructure=new svgStructure();
    this.svgParameterList=new svgParameterList();
}
});

/************************************ Model *******************************/
var svgStructure = Backbone.Model.extend({
defaults: function() {
  return {
    id : null,
    name: ""};
}
});

 /************************************ Model *******************************/
 var svgParameter = Backbone.Model.extend({
defaults: function() {
  return {
    id : null,
    name: ""
  };
 },
changeStyle: function(){
    alert("ChangeStyle");
}
 });

 /************************************ Collection *******************************/
 var svgParameterList = Backbone.Collection.extend({
    initialize: function(props) {
        var self=this;

    // on definit les comportement de la collection
        _.bindAll(this, "cssStyle");
        this.bind('reset', this.cssStyle);

        //les valeurs par default doivent etre coder en dur
        props=(props==undefined)?{model: svgParameter} : props;
        this.url=(props.url==undefined)? "model.json" : props.url;
        this.elem=(props.elem==undefined)? "#age" : props.elem;
        this.model=(props.model==undefined)? svgParameter : props.model;

        //on remplit avec les valeurs dans le fichier JSON
            //~ this.fetch();
    },

    cssStyle: function(){
        alert("cssStyle");
    }
}); 
```

# php - 如何使用 $.each 函数接收两位数而不是一位数

> ID：11448657
> 
> 赞同：1
> 
> 时间：2012-07-12T09:18:48.933
> 
> 标签：php, mysql, jquery

我已经解决了从 mysql 接收数据的问题，它们会以形式（23,34,65,67...等）出现，但出现了一个新问题，通过使用 $.each() 函数，我只接收个位数，如 2,3,3,4，而不是 23,34...等，我如何使用 $.each() 函数对两位数的数据进行切片？

```
$("#add").click(function()
{
    $.ajax({
        type: "POST",
        url: "ajax.php",
        data: "buttons="+ tab_of_button,
        success: function(){
            $('div.success').fadeIn();

            $.get("sendback.php",function(data)
            {

                 $.each(data, function(index, value)
                 {
                     alert(value);

                 });
            });
        }
    });
    return false;
} 
```

**回传.php**

```
<?php

$ask = mysql_query("SELECT numbers FROM buttons");
if(!$ask)
{
    die('Incorrect ask'.mysql_error());
}
else{
    while ($row = mysql_fetch_assoc($ask)) 
    {

        $tab[] = $row['number'];
        foreach($tab as $buttons)
        {
            echo $buttons;

        }

    }
    mysql_free_result($ask);

}
?> 
```

**html**

```
<html>
<body>
.
.
.
<ul id="_button">
<li id="01" >01</li>
<li id="02" >02</li>
<li id="03" >03</li>
<li id="04" >04</li>
<li id="05" >05</li>
<li id="06" >06</li>
.
.
.
<li id="40" >40</li>
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:43:39.550

您应该修复 php 文件的输出。如果这为您提供了一个（数字）字符串，那么您在客户端上唯一能做的就是单独解析每个字符，或者将字符串作为一个整体解析。

这为您提供了一个 json 数组，因此您可以获取客户端上的每个元素。

```
$tab = array();
while ($row = mysql_fetch_assoc($ask)) 
{

    $tab[] = $row['number'];
}
echo json_encode($tab); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T23:59:08.920

I thing that receive data are string,so, changed the data to number using parseInt, after I used $each function but get only first index of array, changed code is below, maybe i done something wrong?

```
$.post('sendback.php', function(data) 
                    {

                  var arr;
                  var number;

                  arr = jQuery.parseJSON(data);
                  $.each(arr, function(key, value) 
                 {

                     number = parseInt(value);
                     $("#_button li").eq((number)-1).css("background","grey");

                  });
                }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T03:44:17.647

看起来您没有使用从 ajax 调用返回的数据，因为参数名称在引号中。你可以尝试改变这个：

```
$('#_button').children().each(function() {
    $(this).find('data').css("background","grey");
    $(this).find('data').attr("disabled",true); 
}); 
```

对此：

```
$('#_button').children().each(function() {
    $(this).find(data).css("background","grey");
    $(this).find(data).attr("disabled",true); 
}); 
```

# c - 模幂

> ID：11448658
> 
> 赞同：2
> 
> 时间：2012-07-12T09:18:51.333
> 
> 标签：c, modulus, exponentiation

`(a^b)%m`在 C/C++中，如何计算`b`不适合 64 位的位置？换句话说，有没有一种方法可以使用`b%m`而不是计算上述值`b`？

`O(log(b))`是否有任何算法可以按时间或时间计算上述结果`O(log(b%m))`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T09:54:40.513

根据[欧拉定理](http://en.wikipedia.org/wiki/Euler%27s_theorem)，如果`a`和`m`互质：

`a^b mod m = a^(b mod phi(m)) mod m`

所以如果`b`很大，您可以使用该值`b % phi(m)`而不是`b`. `phi(m)`是[欧拉的总函数](http://en.wikipedia.org/wiki/Euler%27s_totient_function)，如果您知道 的素数分解，就可以很容易地计算出`m`。

一旦你`b`以这种方式减少了 的值，就可以使用[Exponentiation by squareing](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)来计算 中的模幂`O(log (b % phi(m)))`。

# jquery - $.mobile.changePage 中的错误加载页面

> ID：11448660
> 
> 赞同：1
> 
> 时间：2012-07-12T09:18:56.673
> 
> 标签：jquery, jquery-ui, jquery-mobile, cordova, phonegap-plugins

嗨，在我的应用程序中，我想在成功登录后更改页面。在验证用户名和密码后单击登录按钮，我将下一页称为：

```
$.mobile.changePage('UI/demo/home.html') 
```

但是在单击登录按钮时，它会验证数据，当它尝试执行上述行时，我收到错误加载页面消息。据我所知，当页面路径不正确时它会得到但是相同的应用程序在 android 和 blackberry sumulator 上成功运行，当我为诺基亚模拟器尝试它时，我收到错误加载消息。

我从位于 www/js 文件夹中的 main.js 调用更改页面，而主页位于 www/UI/demo 文件夹中。

如果存在路径问题，那么它如何在 android 和 blackberry 平台上工作？任何帮助将不胜感激。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:33:32.197

如果您的登录页面位于 www/UI/AppScreen/ 文件夹中并且您的主页位于 www/UI/demo 文件夹中，那么您应该调用：

```
$.mobile.changePage('../demo/home.html'); 
```

或者更一般地说

```
$.mobile.changePage('[RelativePath/]home.html'); 
```

该路径是相对于您当前的 HTML 页面的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:35:38.077

对于其他阅读本主题但无法让 iOS 正常工作的人：

如果您的页面都在同一个目录中，则前缀 ../ 或 / 将不起作用，即使它适用于桌面。您只需要使用页面名称，例如“home.html”。

# rtsp - 如何在 Quicktime 的 RTSP url 中嵌入身份验证参数

> ID：11448672
> 
> 赞同：4
> 
> 时间：2012-07-12T09:19:54.033
> 
> 标签：rtsp, quicktime

我一直在网上搜索有关如何在 Quicktime 的 rtsp url 中嵌入身份验证参数的一些线索，但没有取得任何成功。我开始怀疑 Quicktime 是否完全支持它。我已经安装了 QT 7.7 并尝试了以下两种嵌入用户名和密码的方法：

```
<OBJECT classid='clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B' width='200' height='156' codebase='http://www.apple.com/qtactivex/qtplugin.cab'>
    <param name='src' value='Loading.jpg'/>
    <param name='href' value='rtsp://address/archive/d8138017caf5c1?username=abcd&password=xyz'/>
    <param name='target' value='myself'/>
    <param name='autohref' value='true'/>
    <param name='controller' value='false'/>
    <EMBED type='application/x-rtsp' pluginspage='http://www.apple.com/quicktime/download/' width='200' height='156' src='Loading.jpg' href='rtsp://172.21.57.125/archive/d8138017caf5c1?username=apiuser&password=cisco' target='myself' autohref='true' controller='false' loop='false'>
    </EMBED>
</OBJECT> 
```

在这种情况下，Quicktime 无法识别查询参数并弹出用户名和密码对话框。

```
<OBJECT classid='clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B' width='200' height='156' codebase='http://www.apple.com/qtactivex/qtplugin.cab'>
    <param name='src' value='Loading.jpg'/>
    <param name='href' value='rtsp://username:password@address/archive/d8138017caf5c1'/>
    <param name='target' value='myself'/>
    <param name='autohref' value='true'/>
    <param name='controller' value='false'/>
    <EMBED type='application/x-rtsp' pluginspage='http://www.apple.com/quicktime/download/' width='200' height='156' src='Loading.jpg' href='rtsp://username:password@172.21.57.125/archive/d8138017caf5c1' target='myself' autohref='true' controller='false' loop='false'>
    </EMBED>
</OBJECT> 
```

在上述情况下，Quicktime 无法播放并显示未找到服务器。

有没有办法让经过身份验证的 rtsp 流在 Quicktime 中播放？

# android - 如何在我的 ActionBar (ActionBarSherlock) 上放置阴影？

> ID：11448679
> 
> 赞同：14
> 
> 时间：2012-07-12T09:20:12.503
> 
> 标签：android, actionbarsherlock, android-theme

我包括我的样式化 xml 布局：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="Theme.Styled" parent="Theme.Sherlock">
        <item name="actionBarStyle">@style/Widget.MyApp.ActionBar</item>
        <item name="android:actionBarStyle">@style/Widget.MyApp.ActionBar</item>

    </style>

    <style name="Widget.MyApp.ActionBar" parent="Widget.Sherlock.Light.ActionBar">
        <item name="titleTextStyle">@style/Widget.MyApp.TitleTextStyle</item>
        <item name="background">@color/red</item>
        <item name="android:background">@color/red</item>
        <item name="windowContentOverlay">@null</item>
        <item name="android:windowContentOverlay">@null</item>
    </style>

    <style name="Widget.MyApp.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
        <item name="android:textColor">@color/white</item>
        <item name="android:textSize">21sp</item>
    </style>

</resources> 
```

一些通过 Internet 进行的搜索建议使用设置为 @null 的 windowContentOverlay。但是当我在样式 xml 中使用它时，它不会改变任何东西。任何人都可以帮助做什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-16T02:01:34.143

如果要在 ActionBar 下方创建阴影，则必须`android:windowContentOverlay`在应用程序主题上设置参数（在您的代码中，您错误地将其设置为 ActionBar 样式）。

在您的示例中，它将是：

```
<style name="Theme.Styled" parent="Theme.Sherlock">
        ...
        <item name="android:windowContentOverlay">@drawable/my_actionbar_shadow</item>
</style> 
```

使用`@null`value 移除阴影。

这一行在 Android 3.0 和更新版本的 ActionBar 上设置了阴影。但是，如果您使用的是 ActionBarSherlock，它将无法按预期工作。它会在运行早于 Android 4.0 的系统的 Android 设备上的 ActionBarSherlock 上的窗口顶部创建阴影（尽管 ActionBar 自 Android 3.0 以来就存在于 API 中，但 ActionBarSherlock 对所有早于 Android 4.0 的 Android 版本使用自定义实现）。

要在 ActionBarSherlock 下方创建阴影，您必须`windowContentOverlay`在应用程序主题上设置参数（注意缺少`android:`）。

```
<style name="Theme.Styled" parent="Theme.Sherlock">
        ...
        <item name="windowContentOverlay">@drawable/my_actionbar_shadow</item>
</style> 
```

再次，使用`@null`删除阴影。

尽管此行适用于 ActionBarSherlock，但它不适用于运行 Android 4.0 及更高版本的 Android 设备，在此类设备上的 ActionBar 下不会创建任何阴影。那么如何结合这两个参数在ActionBar和ActionBarSherlock下得到想要的阴影呢？

使用[资源配置限定符](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)，在您的情况下使用平台版本限定符。在`res/values/styles.xml`使用第二个 xml 代码。并在`res/values-v14/styles.xml`使用第一个 xml 代码。因此，默认使用 ActionBarSherlock 版本（Android 4.0 之前的版本），Android 4.0 及更高版本使用 ActionBar 版本。

**编辑：** Android 4.3（API 级别 18）中 有一个[错误](https://code.google.com/p/android/issues/detail?id=58280)`android:windowContentOverlay`，不起作用。它应该在将来的版本中修复。如果您需要在 Android 4.3 中修复它，您可以在错误报告中找到链接的解决方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T12:22:05.753

正如之前的答案所说，在应用程序主题中使用“windowContentOverlay”而不是操作栏样式。

```
<style name="Theme.Styled" parent="Theme.Sherlock">
        ...
        <item name="windowContentOverlay">@drawable/my_actionbar_shadow</item>
</style> 
```

如果您想要一个逼真的阴影，您可以在“您的 Android 文件夹”/platforms/android-16/data/res/drawable-hdpi/ 中找到一个

ab_solid_shadow_holo.9.png 并将其复制到您的 drawable-hdpi 文件夹，然后最终结果是

```
<style name="Theme.Styled" parent="Theme.Sherlock">
        ...
        <item name="windowContentOverlay">@drawable/ab_solid_shadow_holo</item>
</style> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-28T10:03:07.613

此外，在 API21(Lollipop) 之上，您也需要在代码中使用它。

```
getSupportActionBar().setElevation(0); 
```

# ruby-on-rails-3 - 如何从 Rails 的布局模板中获取当前视图名称？

> ID：11448681
> 
> 赞同：8
> 
> 时间：2012-07-12T09:20:21.630
> 
> 标签：ruby-on-rails-3

是否可以从内部布局中获取当前渲染视图的名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-09T08:18:29.430

我为css命名空间做了这样的事情：

```
# config/initializers/action_view.rb
ActionView::TemplateRenderer.class_eval do

  def render_template_with_tracking(template, layout_name = nil, locals = {})
    # with this gsub, we convert a file path /folder1/folder2/subfolder/filename.html.erb to subfolder-filename
    @view.instance_variable_set(:@_rendered_template, template.inspect.gsub(/(\..*)/, '').split('/')[-2..-1].join('-'))
    out = render_template_without_tracking(template, layout_name, locals)
    @view.instance_variable_set(:@_rendered_template, nil)
    return out
  end

  alias_method_chain :render_template, :tracking
end

# application.html.erb
<body class="<%= :@_rendered_template %>" > 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-19T23:03:11.550

用于`<% __FILE__ %>`获取当前视图的完整文件路径，但您只能从文件本身*内部*使用它，而无需编写一些帮助程序

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T10:57:36.387

方法 active_template_virtual_path 方法将模板作为名称返回，格式如下“控制器/动作”

```
 class ActionController::Base
  attr_accessor :active_template

  def active_template_virtual_path
    self.active_template.virtual_path if self.active_template
  end
end

class ActionView::TemplateRenderer 

  alias_method :_render_template_original, :render_template

  def render_template(template, layout_name = nil, locals = {})

    @view.controller.active_template = template if @view.controller
    result = _render_template_original( template, layout_name, locals)
    @view.controller.active_template = nil if @view.controller
    return result

  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-01T17:07:45.573

我有一个类似的问题。我找到`<%= params[:controller] %>`并`<%= params[:action] %>`满足我的需要，即在 body 标记上添加控制器名称和动作名称作为类。

以防万一对任何人有帮助。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-26T02:08:00.170

我目前正在使用 Peter Ehrlich 解决方案的修改版本。结果字符串的形式为`controller_name/view_name`，例如`users/new`，这意味着它可以直接传递给`render`以后，或更改以适应其他用途。我只在 Rails 4.2 上试过这个，但据我所知，它应该可以一直工作到*3.x* es。

```
ActionView::Base.class_eval do
  attr_accessor :current_template
end

ActionView::TemplateRenderer.class_eval do
  def render_template_with_current_template_accessor(template, layout_name = nil, locals = {})
    @view.current_template = template.try(:virtual_path)
    render_template_without_current_template_accessor(template, layout_name, locals)
  end

  alias_method_chain :render_template, :current_template_accessor
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-03T09:17:45.470

出于调试目的，您可以使用 gem 'current_template' from [here](https://github.com/shihokambara/current_template)。

此 gem 检查日志文件并显示视图/部分模板的文件名。

例如：

[![在此处输入图像描述](../Images/807d62e9d9ef53675d257070a0580072.png)](https://i.stack.imgur.com/GKiCK.png)

此外，您可以简单地添加这一行

`<%= "#{`tail log/development.log`}".scan(/\s[a-z]+\/\S+/) %>`

到您的布局/application.html.erb。

# postgresql - 专用数据库服务器严重的 iowait 峰值

> ID：11448682
> 
> 赞同：2
> 
> 时间：2012-07-12T09:20:30.013
> 
> 标签：postgresql, iowait

我们有一个在 linux debian 上运行 PostgreSQL 8.3 的专用数据库服务器。定期查询数据库以获取大量数据，同时更新/插入也经常发生。数据库会定期在短时间内（如 10 秒）不响应，然后再次进入正常执行流程。

我通过 top 注意到的是，只要数据库没有响应，在此期间就会出现 iowait 峰值。同时 pdflush 被激活。所以我的想法是pdflush必须根据脏页和背景比率将数据从缓存的内存空间写回磁盘。其余时间，当 postgresql 正常工作时，不会发生 iowait，因为 pdflush 不活动。我的 vm 的值如下：

```
 dirty_background_ratio = 5
 dirty_ratio = 10
 dirty_expire_centisecs = 3000 
```

我的记忆信息：

```
MemTotal:     12403212 kB
MemFree:       1779684 kB
Buffers:        253284 kB
Cached:        9076132 kB
SwapCached:          0 kB
Active:        7298316 kB
Inactive:      2555240 kB
SwapTotal:     7815544 kB
SwapFree:      7814884 kB
Dirty:            1804 kB
Writeback:           0 kB
AnonPages:      495028 kB
Mapped:        3142164 kB
Slab:           280588 kB
SReclaimable:   265284 kB
SUnreclaim:      15304 kB
PageTables:     422980 kB
NFS_Unstable:        0 kB
Bounce:              0 kB
WritebackTmp:        0 kB
CommitLimit:  14017148 kB
Committed_AS:  3890832 kB
VmallocTotal: 34359738367 kB
VmallocUsed:    304188 kB
VmallocChunk: 34359433983 kB
HugePages_Total:     0
HugePages_Free:      0
HugePages_Rsvd:      0
HugePages_Surp:      0
Hugepagesize:     2048 kB 
```

我正在考虑调整脏页留在内存中的持续时间（dirty_expire_centisecs），以便及时平均划分 iowait 峰值（更频繁地调用 pdflush 以便将较小的数据块写入磁盘）。任何其他建议的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T10:36:29.447

当 postgresql 进行检查点时，可能会发生 IO 峰值。[您可以通过记录检查点](http://wiki.postgresql.org/wiki/Logging_Checkpoints)来验证这一点，并查看它们是否与服务器缺乏响应一致。

如果是这种情况，调整`checkpoints_segments`可能 `checkpoint_completion_target`会有所帮助。请参阅[wiki 的建议](http://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server#checkpoint_segments_checkpoint_completion_target)以及有关[WAL 配置](http://www.postgresql.org/docs/8.3/static/runtime-config-wal.html)的文档。

# scala - Scala如何计算列表中出现的次数

> ID：11448685
> 
> 赞同：115
> 
> 时间：2012-07-12T09:20:49.073
> 
> 标签：scala

```
val list = List(1,2,4,2,4,7,3,2,4) 
```

我想像这样实现它：（`list.count(2)`返回 3）。

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2015-02-13T08:11:08.377

其他答案之一的更简洁的版本是：

```
val s = Seq("apple", "oranges", "apple", "banana", "apple", "oranges", "oranges")

s.groupBy(identity).mapValues(_.size) 
```

为`Map`原始序列中的每个项目提供一个计数：

```
Map(banana -> 1, oranges -> 3, apple -> 3) 
```

该问题询问如何查找特定项目的计数。使用这种方法，解决方案需要将所需元素映射到其计数值，如下所示：

```
s.groupBy(identity).mapValues(_.size)("apple") 
```

* * *

## 回答 #2

> 赞同：139
> 
> 时间：2012-07-12T09:24:53.980

scala 集合确实有`count`：`list.count(_ == 2)`

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2013-12-02T11:58:15.110

我和 Sharath Prabhal 有同样的问题，我得到了另一个（对我来说更清晰的）解决方案：

```
val s = Seq("apple", "oranges", "apple", "banana", "apple", "oranges", "oranges")
s.groupBy(l => l).map(t => (t._1, t._2.length)) 
```

结果：

```
Map(banana -> 1, oranges -> 3, apple -> 3) 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2016-12-13T22:55:09.013

```
list.groupBy(i=>i).mapValues(_.size) 
```

给

```
Map[Int, Int] = Map(1 -> 1, 2 -> 3, 7 -> 1, 3 -> 1, 4 -> 3) 
```

请注意，您可以`(i=>i)`用内置`identity`函数替换：

```
list.groupBy(identity).mapValues(_.size) 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2018-10-07T09:19:57.680

开始`Scala 2.13`，[groupMapReduce](https://www.scala-lang.org/api/2.13.x/scala/collection/immutable/List.html#groupMapReduce[K,B](key:A=%3EK)(f:A=%3EB)(reduce:(B,B)=%3EB):scala.collection.immutable.Map[K,B])方法在列表中一次性完成：

```
// val seq = Seq("apple", "oranges", "apple", "banana", "apple", "oranges", "oranges")
seq.groupMapReduce(identity)(_ => 1)(_ + _)
// immutable.Map[String,Int] = Map(banana -> 1, oranges -> 3, apple -> 3)
seq.groupMapReduce(identity)(_ => 1)(_ + _)("apple")
// Int = 3 
```

这个：

*   `group`s 列表元素（**组**MapReduce 的组部分）

*   `map`s 每个分组值出现为 1（映射组**Map** Reduce 的一部分）

*   `reduce`s 值在一组值 ( `_ + _`) 中，通过对它们求和（减少 groupMap **Reduce**的一部分）。

这是可以通过以下方式翻译的[一次性版本](https://github.com/scala/scala/blob/v2.13.0-M5/src/library/scala/collection/Iterable.scala#L604)：

```
seq.groupBy(identity).mapValues(_.map(_ => 1).reduce(_ + _)) 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2012-07-12T14:24:42.197

```
val list = List(1, 2, 4, 2, 4, 7, 3, 2, 4)
// Using the provided count method this would yield the occurrences of each value in the list:
l map(x => l.count(_ == x))

List[Int] = List(1, 3, 3, 3, 3, 1, 1, 3, 3)
// This will yield a list of pairs where the first number is the number from the original list and the second number represents how often the first number occurs in the list:
l map(x => (x, l.count(_ == x)))
// outputs => List[(Int, Int)] = List((1,1), (2,3), (4,3), (2,3), (4,3), (7,1), (3,1), (2,3), (4,3)) 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-10-10T13:25:39.793

我遇到了同样的问题，但想一次计算多个项目..

```
val s = Seq("apple", "oranges", "apple", "banana", "apple", "oranges", "oranges")
s.foldLeft(Map.empty[String, Int]) { (m, x) => m + ((x, m.getOrElse(x, 0) + 1)) }
res1: scala.collection.immutable.Map[String,Int] = Map(apple -> 3, oranges -> 3, banana -> 1) 
```

[https://gist.github.com/sharathprabhal/6890475](https://gist.github.com/sharathprabhal/6890475)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2015-05-23T19:49:10.267

如果您想像使用它一样使用它，`list.count(2)`则必须使用[Implicit Class](http://docs.scala-lang.org/overviews/core/implicit-classes.html "隐式类")来实现它。

```
implicit class Count[T](list: List[T]) {
  def count(n: T): Int = list.count(_ == n)
}

List(1,2,4,2,4,7,3,2,4).count(2)  // returns 3
List(1,2,4,2,4,7,3,2,4).count(5)  // returns 0 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-07-13T13:57:41.910

有趣的是，故意为这种情况设计的默认值为 0 的地图表现出最差的性能（并且不如 简洁`groupBy`）

```
 type Word = String
    type Sentence = Seq[Word]
    type Occurrences = scala.collection.Map[Char, Int]

  def woGrouped(w: Word): Occurrences = {
        w.groupBy(c => c).map({case (c, list) => (c -> list.length)})
  }                                               //> woGrouped: (w: forcomp.threadBug.Word)forcomp.threadBug.Occurrences

  def woGetElse0Map(w: Word): Occurrences = {
        val map = Map[Char, Int]()
        w.foldLeft(map)((m, c) => m + (c -> (m.getOrElse(c, 0) + 1)) )
  }                                               //> woGetElse0Map: (w: forcomp.threadBug.Word)forcomp.threadBug.Occurrences

  def woDeflt0Map(w: Word): Occurrences = {
        val map = Map[Char, Int]().withDefaultValue(0)
        w.foldLeft(map)((m, c) => m + (c -> (m(c) + 1)) )
  }                                               //> woDeflt0Map: (w: forcomp.threadBug.Word)forcomp.threadBug.Occurrences

  def dfltHashMap(w: Word): Occurrences = {
        val map = scala.collection.immutable.HashMap[Char, Int]().withDefaultValue(0)
        w.foldLeft(map)((m, c) => m + (c -> (m(c) + 1)) )
    }                                             //> dfltHashMap: (w: forcomp.threadBug.Word)forcomp.threadBug.Occurrences

    def mmDef(w: Word): Occurrences = {
        val map = scala.collection.mutable.Map[Char, Int]().withDefaultValue(0)
        w.foldLeft(map)((m, c) => m += (c -> (m(c) + 1)) )
  }                                               //> mmDef: (w: forcomp.threadBug.Word)forcomp.threadBug.Occurrences

    val functions = List("grp" -> woGrouped _, "mtbl" -> mmDef _, "else" -> woGetElse0Map _
    , "dfl0" -> woDeflt0Map _, "hash" -> dfltHashMap _
    )                                  //> functions  : List[(String, String => scala.collection.Map[Char,Int])] = Lis
                                                  //| t((grp,<function1>), (mtbl,<function1>), (else,<function1>), (dfl0,<functio
                                                  //| n1>), (hash,<function1>))

    val len = 100 * 1000                      //> len  : Int = 100000
    def test(len: Int) {
        val data: String = scala.util.Random.alphanumeric.take(len).toList.mkString
        val firstResult = functions.head._2(data)

        def run(f: Word => Occurrences): Int = {
            val time1 = System.currentTimeMillis()
            val result= f(data)
            val time2 = (System.currentTimeMillis() - time1)
            assert(result.toSet == firstResult.toSet)
            time2.toInt
        }

        def log(results: Seq[Int]) = {
                 ((functions zip results) map {case ((title, _), r) => title + " " + r} mkString " , ")
        }

        var groupResults = List.fill(functions.length)(1)

        val integrals = for (i <- (1 to 10)) yield {
            val results = functions map (f => (1 to 33).foldLeft(0) ((acc,_) => run(f._2)))
            println (log (results))
                groupResults = (results zip groupResults) map {case (r, gr) => r + gr}
                log(groupResults).toUpperCase
        }

        integrals foreach println

    }                                         //> test: (len: Int)Unit

    test(len)
    test(len * 2)
// GRP 14 , mtbl 11 , else 31 , dfl0 36 , hash 34
// GRP 91 , MTBL 111

    println("Done")
    def main(args: Array[String]) {
    } 
```

生产

```
grp 5 , mtbl 5 , else 13 , dfl0 17 , hash 17
grp 3 , mtbl 6 , else 14 , dfl0 16 , hash 16
grp 3 , mtbl 6 , else 13 , dfl0 17 , hash 15
grp 4 , mtbl 5 , else 13 , dfl0 15 , hash 16
grp 23 , mtbl 6 , else 14 , dfl0 15 , hash 16
grp 5 , mtbl 5 , else 13 , dfl0 16 , hash 17
grp 4 , mtbl 6 , else 13 , dfl0 16 , hash 16
grp 4 , mtbl 6 , else 13 , dfl0 17 , hash 15
grp 3 , mtbl 5 , else 14 , dfl0 16 , hash 16
grp 3 , mtbl 6 , else 14 , dfl0 16 , hash 16
GRP 5 , MTBL 5 , ELSE 13 , DFL0 17 , HASH 17
GRP 8 , MTBL 11 , ELSE 27 , DFL0 33 , HASH 33
GRP 11 , MTBL 17 , ELSE 40 , DFL0 50 , HASH 48
GRP 15 , MTBL 22 , ELSE 53 , DFL0 65 , HASH 64
GRP 38 , MTBL 28 , ELSE 67 , DFL0 80 , HASH 80
GRP 43 , MTBL 33 , ELSE 80 , DFL0 96 , HASH 97
GRP 47 , MTBL 39 , ELSE 93 , DFL0 112 , HASH 113
GRP 51 , MTBL 45 , ELSE 106 , DFL0 129 , HASH 128
GRP 54 , MTBL 50 , ELSE 120 , DFL0 145 , HASH 144
GRP 57 , MTBL 56 , ELSE 134 , DFL0 161 , HASH 160
grp 7 , mtbl 11 , else 28 , dfl0 31 , hash 31
grp 7 , mtbl 10 , else 28 , dfl0 32 , hash 31
grp 7 , mtbl 11 , else 28 , dfl0 31 , hash 32
grp 7 , mtbl 11 , else 28 , dfl0 31 , hash 33
grp 7 , mtbl 11 , else 28 , dfl0 32 , hash 31
grp 8 , mtbl 11 , else 28 , dfl0 31 , hash 33
grp 8 , mtbl 11 , else 29 , dfl0 38 , hash 35
grp 7 , mtbl 11 , else 28 , dfl0 32 , hash 33
grp 8 , mtbl 11 , else 32 , dfl0 35 , hash 41
grp 7 , mtbl 13 , else 28 , dfl0 33 , hash 35
GRP 7 , MTBL 11 , ELSE 28 , DFL0 31 , HASH 31
GRP 14 , MTBL 21 , ELSE 56 , DFL0 63 , HASH 62
GRP 21 , MTBL 32 , ELSE 84 , DFL0 94 , HASH 94
GRP 28 , MTBL 43 , ELSE 112 , DFL0 125 , HASH 127
GRP 35 , MTBL 54 , ELSE 140 , DFL0 157 , HASH 158
GRP 43 , MTBL 65 , ELSE 168 , DFL0 188 , HASH 191
GRP 51 , MTBL 76 , ELSE 197 , DFL0 226 , HASH 226
GRP 58 , MTBL 87 , ELSE 225 , DFL0 258 , HASH 259
GRP 66 , MTBL 98 , ELSE 257 , DFL0 293 , HASH 300
GRP 73 , MTBL 111 , ELSE 285 , DFL0 326 , HASH 335
Done 
```

奇怪的是，最简洁`groupBy`甚至比可变映射还要快！

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-09-17T20:21:44.567

**简短的回答：**

```
import scalaz._, Scalaz._
xs.foldMap(x => Map(x -> 1)) 
```

**长答案：**

使用[Scalaz](https://github.com/scalaz/scalaz)，给定。

```
import scalaz._, Scalaz._

val xs = List('a, 'b, 'c, 'c, 'a, 'a, 'b, 'd) 
```

然后所有这些（按照从简化到简化的顺序）

```
xs.map(x => Map(x -> 1)).foldMap(identity)
xs.map(x => Map(x -> 1)).foldMap()
xs.map(x => Map(x -> 1)).suml
xs.map(_ -> 1).foldMap(Map(_))
xs.foldMap(x => Map(x -> 1)) 
```

屈服

```
Map('b -> 2, 'a -> 3, 'c -> 2, 'd -> 1) 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2019-09-11T05:39:13.767

试试这个，应该可以的。

* * *

```
val list = List(1,2,4,2,4,7,3,2,4)
list.count(_==2) 
```

它将返回 3

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-08-07T13:44:14.450

使用[猫](https://typelevel.org/cats/)

```
import cats.implicits._

"Alphabet".toLowerCase().map(c => Map(c -> 1)).toList.combineAll
"Alphabet".toLowerCase().map(c => Map(c -> 1)).toList.foldMap(identity) 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2017-11-17T22:22:56.473

[由于此处](https://github.com/scala/collection-strawman/issues/146)报告的问题，我没有得到列表的大小，`length`而是`size`上面的答案建议它。

```
val list = List("apple", "oranges", "apple", "banana", "apple", "oranges", "oranges")
list.groupBy(x=>x).map(t => (t._1, t._2.size)) 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2015-04-21T18:57:58.483

这是另一种选择：

```
scala> val list = List(1,2,4,2,4,7,3,2,4)
list: List[Int] = List(1, 2, 4, 2, 4, 7, 3, 2, 4)

scala> list.groupBy(x => x) map { case (k,v) => k-> v.length }
res74: scala.collection.immutable.Map[Int,Int] = Map(1 -> 1, 2 -> 3, 7 -> 1, 3 -> 1, 4 -> 3) 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2017-07-02T08:34:46.027

```
scala> val list = List(1,2,4,2,4,7,3,2,4)
list: List[Int] = List(1, 2, 4, 2, 4, 7, 3, 2, 4)

scala> println(list.filter(_ == 2).size)
3 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2020-06-05T08:39:40.793

这是一个非常简单的方法。

```
val data = List("it", "was", "the", "best", "of", "times", "it", "was", 
                 "the", "worst", "of", "times")
data.foldLeft(Map[String,Int]().withDefaultValue(0)){
  case (acc, letter) =>
    acc + (letter -> (1 + acc(letter)))
}
// => Map(worst -> 1, best -> 1, it -> 2, was -> 2, times -> 2, of -> 2, the -> 2) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-06-24T20:09:47.637

```
val words = Array("Mary", "had", "a", "little", "lamb", "its"
  , "fleece", "was", "white", "as", "snow", "and", "everywhere"
  , "that", "Mary", "went", "the", "lamb", "was", "sure", "to", "go")

words.groupBy(_.length) 
```

# php - 在 Symfony2 中没有指定输入文件

> ID：11448687
> 
> 赞同：0
> 
> 时间：2012-07-12T09:20:53.737
> 
> 标签：php, ubuntu, symfony

我在本地主机上安装了 Symfony2。它可以工作，但是，当我在远程服务器上部署应用程序时，我看到以下错误：

> 未指定输入文件。

是什么原因造成的？

笔记：

1.  `parameters.ini`我根据`databasename`和更改了文件`password`。
2.  操作系统是 Ubuntu

# javascript - 在传递 C# 参数的 document.Load() 上调用 javascript

> ID：11448689
> 
> 赞同：1
> 
> 时间：2012-07-12T09:20:58.650
> 
> 标签：javascript, jquery, asp.net-mvc-3, razor, dom-events

我有一个需要运行的 JavaScript 函数。它需要一些参数。实际参数在我的视图模型的集合中。这个 JavaScript 函数需要被调用的次数与集合中的元素一样多，每次都将集合的元素作为各自的参数。

该函数需要在文档加载时调用。所以，我想我应该把这个函数的调用放在`document.ready`. 问题是我不知道如何遍历我的 C# 集合并同时生成 Javascript。你知道我怎么能做到这一点吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:32:32.937

您可以将视图模型序列化为 JSON 并将其呈现在视图的脚本块中：

```
<script type="text/javascript">
    $(function() {
        var collection = @Html.Raw(Json.Encode(Model));

        $.each(collection, function (i, value) {
           yourFunction(value);
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T09:34:49.827

第一步：
将集合转换为 JSON 并将其放入 viewbag ：

```
ViewBag.Collection = Json.Encode(your - collection) 
```

第二步：

使用 Viewbag 中的那个集合

```
<script>
$(document).ready(function(){
var collection = @Viewbag.collection;
});
</script> 
```

第三步：
使用该对象遍历它并在其中做一些事情：

```
<script>
    $(document).ready(function(){
    var collection = @Viewbag.collection;
    $.each(collection , function() {
     //Do Stuff
    });
    });

 </script> 
```

# python - 可以在基于 Django 类的视图中设置实例变量吗？

> ID：11448690
> 
> 赞同：34
> 
> 时间：2012-07-12T09:20:59.413
> 
> 标签：python, django, django-class-based-views

我尝试了 Django 的基于类的视图（CBV）。

```
class BlahView(TemplateView):
    template_name = 'blah/blah.html'
    def get_context_data(self, **kwargs):
        #code...

    def get(self, request, **kwargs):
        #more code... 
```

现在，我知道我可以从 self.request 中获取请求参数。现在说我想解析这些请求参数并将它们存储在类中。我可以把它们存起来`self.xxx`吗？现在，显然基于类的工作方式，这似乎很简单。

`View`但是看（超类）的定义，我无法弄清楚控制流`TemplateView`。[消息来源](https://github.com/django/django/blob/master/django/views/generic/base.py)提到是“`as_view()`入口点”

我想在开始时设置我的实例变量，`get_context_data()`但在那里进行初始化似乎不正确。

`__init__()`我可以为我的 CBV定义一个吗？如果是这样，是否存在线程问题或多个页面访问可能与我的已解析数据的全局实例一起使用的问题？

我知道这听起来有点混乱，但我只是对 CBV 中的代码流有点困惑。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-12T09:31:14.397

根据[来源](https://github.com/django/django/blob/1.4/django/views/generic/base.py#L28)`django.views.generic.base.View.as_view`：_

*   **在 django 启动**时，as_view() 返回一个`view`未调用**的函数**
*   **根据请求**，`view()` **被调用**，它实例化类并调用`dispatch()`
*   类实例是线程安全的

根据[的来源](https://github.com/django/django/blob/1.4/django/views/generic/base.py#L17)，`django.views.generic.base.View.__init__`此时请求对象超出范围，因此您无法在自己的构造函数重载中对其进行解析。

但是，您可以在 的重载中解析请求并设置类视图实例属性，`django.views.generic.base.View.dispatch`根据[来源](https://github.com/django/django/blob/1.4/django/views/generic/base.py#L57)，这是安全的：

```
class YourView(SomeView):
    def dispatch(self, request, *args, **kwargs):
        # parse the request here ie.
        self.foo = request.GET.get('foo', False)

        # call the view
        return super(YourView, self).dispatch(request, *args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-18T14:59:36.027

@jpic 提供了一个很好的答案。受此启发，我想参考以下[博客文章](http://andrewsforge.com/article/overcoming-troubles-with-class-based-views/)，其中作者声称：

> ...我们不能覆盖视图，因为这样做需要覆盖 as_view()。重写 dispatch() 很有吸引力（以及我最初在演讲时所做的），因为它提供了一个简单的地方来执行此操作，但这违背了 dispatch() 的逻辑。相反，最好在 get() 和 post() 的覆盖中调用 set_account()。...

因此，可以覆盖`get`or`post`方法并设置任何`self.whatever`变量。感觉有点干净。

# lisp - lisp做循环阶乘代码

> ID：11448693
> 
> 赞同：0
> 
> 时间：2012-07-12T09:21:05.703
> 
> 标签：lisp

```
(defun fact (n)
    (do
       ((i 1 (+ 1 i))
        (prod 1 (* i prod)))
       ((equal i n) prod))) 
```

我已经完成了上面的代码，当我尝试时`fact(4)`，它给了我`ans is 6`。我不确定出了什么问题。谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:29:51.803

改成

```
(defun fact (n)
    (do
       ((i 1 (+ 1 i))
        (prod 1 (* i prod)))
       ((equal i (+ n 1)) prod))) 
```

基本上，你做的迭代比必要的少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T10:43:32.017

米海已经给出了答案。

我会把它写成：

```
(defun fact (n)
  (do ((i    1 (+ 1 i))
       (prod 1 (* i prod)))
      ((> i n) prod))) 
```

Common Lisp 具有所有适用于数字的常用算术谓词：`=`, `<`, `>`, ...

# iphone - iPhone 上的 Unity3D 演示无法接收 udp 数据包

> ID：11448695
> 
> 赞同：1
> 
> 时间：2012-07-12T09:21:09.620
> 
> 标签：iphone, udp, unity3d

我在c#中编写了一个udp发送和接收unity3d插件dll，但它无法从iphone4s上的服务器接收任何udp数据包。

当服务器向在 iphone4s 上运行的 demo 发送 udp 数据包时，它无法接收任何内容。

当服务器向在 ipod touch 4 上运行的 demo 发送 udp 数据包时，它可以工作！收到数据包！

当服务器向 Unity3d 编辑器中运行的演示发送 udp 数据包时，它可以正常工作！

我使用Wireshark捕获客户端和服务器之间的数据包，它确实捕获了服务器发送给演示的数据包，但是客户端演示似乎没有收到任何信息。

为什么？

```
internal class RudpNetInteractor
{
    private Socket socket;
    private EndPoint serverAddress;

    internal RudpNetInteractor(IPEndPoint serverAddress)
    {
        this.rudpClient = rudpClient;
        this.serverAddress = serverAddress;
    }

    internal void BuildConnection()
    {
        socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        socket.Connect(serverAddress);
        BeginReceive();
    }

    internal void Send(byte[] buffer)
    {
        socket.BeginSend(buffer, 0, buffer.Length, SocketFlags.None, new AsyncCallback(OnSend), null);
    }

    private void OnSend(IAsyncResult ar)
    {
        try
        {
            socket.EndSend(ar);
        }
        catch {}
    }

    internal void Destroy()
    {
        socket.Close();
        socket = null;
    }

    private void OnReceive(IAsyncResult ar)
    {
        try
        {
            SocketReceiveInfo receiveInfo = (SocketReceiveInfo)ar.AsyncState;
            Socket receiveSocket = receiveInfo.ReceiveSocket;
            int len = receiveSocket.EndReceive(ar);
            if (len > 0)
            {
                byte[] dest = new byte[len];
                Array.Copy(receiveInfo.ReceiveBytes, dest, len);
                Console.WriteLine(BitConverter.ToString(dest));
            }
            BeginReceive();
        }
        catch {}
    }

    private void BeginReceive()
    {
        byte[] receiveBytes = new byte[576];
        SocketReceiveInfo info = new SocketReceiveInfo(receiveBytes, socket);
        socket.BeginReceiveFrom(receiveBytes, 0, receiveBytes.Length, SocketFlags.None, ref serverAddress, new AsyncCallback(OnReceive), info);
    }
}

internal class SocketReceiveInfo
{
    private byte[] receiveBytes;
    private Socket receiveSocket;

    internal SocketReceiveInfo(byte[] receiveBytes, Socket receiveSocket)
    {
        this.receiveBytes = receiveBytes;
        this.receiveSocket = receiveSocket;
    }

    internal byte[] ReceiveBytes
    {
        get { return receiveBytes; }
    }

    internal Socket ReceiveSocket
    {
        get { return receiveSocket; }
    }
} 
```

# decimal - 如何从 RDLC 中包含 .000 的浮点数中删除小数部分

> ID：11448699
> 
> 赞同：2
> 
> 时间：2012-07-12T09:21:23.147
> 
> 标签：decimal, expression, reportviewer, rdlc, rounding

我有一个 RDLC，包含一个列权重，以显示一个浮点数。如果有任何小数部分，我必须显示它。如果没有小数部分，我不应该显示 x.000000

你建议怎么做？

## 例子

*   数字是 10.000001 然后，我必须显示确切的数字，10.000001

*   数字是 10.000000 那么，我必须显示 10

*   数字是 10.001000 那么，我必须显示 10.001

我怎样才能在 RDLC 的表达式中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:41:28.787

你有没有试过这个 -

```
=Format(Fields!<<Field>>.Value, "#.########") 
```

“#”将显示该值（如果存在）。

你也可以试试

```
=Format(Fields!<<Field>>.Value, "D") 
```

还要检查 - [http://msdn.microsoft.com/en-us/library/ms252080%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms252080%28VS.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-25T09:49:18.337

你可以使用转换

```
 CDbl(Fields!<<Field>>.Value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T02:21:27.667

希望这可以帮助

```
=FormatNumber(field,NoOfDigitsAfterDecimal) 
```

[http://msdn.microsoft.com/en-us/library/xfta99yt(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/xfta99yt(v=vs.90).aspx)

# javascript - ie8中未定义的工具提示

> ID：11448701
> 
> 赞同：0
> 
> 时间：2012-07-12T09:21:36.417
> 
> 标签：javascript, jquery

我有以下工具提示示例，它在 chrome 和 firefox 中运行良好 - 但在 ie7 和 ie8 中，当您将鼠标悬停在问号上时，它会一直以未定义的形式返回并闪烁

[http://jsfiddle.net/zidski/nHDf4/4/](http://jsfiddle.net/zidski/nHDf4/4/)

不知道 IE 出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:28:12.530

使用多个绑定方法而不是纯事件；

你的问题出现了；当鼠标碰到对象两次或更多但使用绑定方法时，Internet Explorer 将没有未定义的返回。

检查这个jsfiddle：http: [//jsfiddle.net/nHDf4/12/](http://jsfiddle.net/nHDf4/12/)

# php - 如何使用 php file_get_content 解析移动网站

> ID：11448706
> 
> 赞同：0
> 
> 时间：2012-07-12T09:21:53.860
> 
> 标签：php, mobile

对不起，如果这是一个重复的问题。
如果浏览器不是移动设备，我的目标站点会将我重定向到桌面站点。我想解析网站的移动版本（http://mobile.mysite.com）。我不能使用 Curl，因为我的服务器为此被禁用。如果可能的话，移动端的用户代理会是什么？？！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:29:19.977

`User-Agent`如果您需要像`file_get_contents`请求一样发送自定义标头，PHP 的答案是*流上下文*：

```
$opts = array(
    'http' => array(
        'method' => "GET",
        'header' => "Accept-language: en\r\n" .
                    "Cookie: foo=bar\r\n" .
                    "User-Agent: Foo Bar Baz\r\n"
    )
);

$context = stream_context_create($opts);

file_get_contents($url, false, $context); 
```

见[`stream_context_create`](http://php.net/stream_context_create)和[`file_get_contents`](http://php.net/file_get_contents)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:31:14.653

选择一个移动用户代理字符串并使用它。可以[从 Google 轻松找到](http://www.google.com/search?mobile+user+agent)它们。

下面是一些示例代码，说明了如何使用它们`file_get_contents()`：

```
<?php

   // The first one I found on Google
   $uaStr = 'Mozilla/5.0 (Linux; U; Android 2.2; en-us; Nexus One Build/FRF91)';

   // Create a stream context
   // http://www.php.net/manual/en/context.http.php
   $context = stream_context_create(array(
     'http'=>array(
       'user_agent' => $uaStr
     )
   ));

   // The URL
   $url = "http://www.example.com/";

   // Make the request
   $result = file_get_contents($url, FALSE, $context); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:31:54.710

试试看这个 php 库：

[PHP HttpClient](http://scripts.incutio.com/httpclient/)

如果您想获得移动网站，请将用户代理设置为特定的移动浏览器

```
$userAgent = "NokiaC5-00/061.005 (SymbianOS/9.3; U; Series60/3.2 Mozilla/5.0; Profile/MIDP-2.1 Configuration/CLDC-1.1) AppleWebKit/525 (KHTML, like Gecko) Version/3.0 Safari/525 3gpp-gba";
setUserAgent($userAgent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:33:24.287

要在不使用 curl 的情况下在 php 中更改用户代理，您可以尝试以下操作：

```
<?php
ini_set('user_agent', 'Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7');
$data = file_get_contents("http://www.mobile.example.com");
?> 
```

[PS：从这里](https://stackoverflow.com/questions/3105555/what-is-the-iphone-4-user-agent)获得了 iphone 4 的用户代理！

# c++ - 使用 ifstream 查找大文件

> ID：11448713
> 
> 赞同：9
> 
> 时间：2012-07-12T09:22:15.643
> 
> 标签：c++, file-io, fstream

我正在使用必须在大文件（~1TB）中寻找的 ifstream 在 C++ 中实现一个程序。然而，这在读取 2GB 后失败。有没有办法获取文件位置，即使是大文件？我为 32 位 windows 机器编译。

```
std::ifstream f;
f.open( filename.c_str(), std::ifstream::in | std::ifstream::binary );
while(true) {
    std::cout << (uint64_t)(f.tellg()) << std::endl;
    //read data
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:51:21.100

由于您在 32 位平台上进行编译，因此如果使用`fstream`，您将获得 32 位访问权限。要访问大文件，您需要使用平台相关的解决方案：

*   对于 Windows，使用[_lseeki64()](http://msdn.microsoft.com/en-us/library/1yee101t%28v=vs.110%29.aspx)
*   对于 Linux，使用[lseek64()](http://linux.die.net/man/3/lseek64)

# java - Java 邮件中的 URL 编码

> ID：11448715
> 
> 赞同：0
> 
> 时间：2012-07-12T09:22:27.760
> 
> 标签：java, url, encoding

我用java编写了一个代码，其中有表单（输入字段），最后是底部的发送电子邮件按钮。当用户单击按钮时，应提取输入字段中的数据，然后将其用作电子邮件正文的数据。

这是我的代码：

```
if (role.getValue().equals("1")) {          
    Desktop desktop = Desktop.getDesktop();
    String message = "mailto:username@domain.com?subject=Profildaten&body=" +
                     "Externe%20Referenz:%20" +
                     person.getExternalReference() + "%20" + "-%20" +
                     person.getExternalReferenceType() + "%0A" +
                     person.getTitle() + "%20" +
                     person.getContactLandline() + "%0A" +
                     "Mobil:%20" + person.getContactMobile() + "%0A" +
                     "Addresse:" + person.getContactStreet();

    URI uri = URI.create(message); 
    try {
        desktop.mail(uri);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   
} 
```

这一切都很完美，但唯一的问题是 Address: person.getContactStreet() 实际输入字段要求用户输入街道名称，通常是两个词，例如 Cromwell Road - 克伦威尔和道路之间有一个空格. 现在电子邮件的正文不允许有空格和其他无效字符，因此为什么它会弹出一条错误消息，指出输入了无效字符。我怎样才能让它接受这个或将无效字符自动转换为 url 编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T09:25:23.330

看看这个网站，它告诉你如何在正文中自动编码 URL。

[在 Java 中编码 URL 的最佳方法](https://stackoverflow.com/questions/5291586/best-way-to-encode-url-in-java)

# apache - 将 IIS 重写规则转换为 Apache 重写规则的问题

> ID：11448720
> 
> 赞同：0
> 
> 时间：2012-07-12T09:22:37.500
> 
> 标签：apache, iis, mod-rewrite, rewrite

我无法将 IIS 重写规则转换为 Apache。

该规则的目的是重定向`domain.com/c/name/`到`domain.com/?company=name`. 它还应该重定向`domain.com/c/name/?page=me`到`domain.com/?page=me&company=name`.

这是原始的 IIS web.config 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.webServer>
    <rewrite>
        <rules>
            <rule name="multi-company management" enabled="true">
                <match url="^c/(.+?)/(.*)" />
                <action type="Rewrite" url="{R:2}?company={R:1}" logRewrittenUrl="false" />
            </rule>
        </rules>
    </rewrite>
    <tracing>
        <traceFailedRequests>
            <add path="*">
                <traceAreas>
                    <add provider="WWW Server" areas="Rewrite" verbosity="Verbose" />
                </traceAreas>
                <failureDefinitions statusCodes="200-399" />
            </add>
        </traceFailedRequests>
    </tracing>
</system.webServer>
</configuration> 
```

我想出的 apache url 给出了错误`ERR_TOO_MANY_REDIRECTS`，如下所示：

```
RewriteEngine on
RewriteRule ^c/(.+?)/(.*)$ /$2?company=$1 
```

我想我快到了，但缺少一些东西来避免继续重定向。我认为该规则在每个请求上都保持匹配。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:24:29.313

我找到了一个可行的解决方案。

```
RewriteEngine on

#Rewrite JS, CSS and Images
RewriteCond %{REQUEST_URI} (.css|.js|.css.php|.png|.jpg|.jpeg|.gif)$
RewriteRule ^c/(.+?)/(.*) /$2 [L]

#Rewrite php pages (adding company as request param)
RewriteCond %{REQUEST_URI} (.php|/)$
RewriteRule ^c/(.+?)/(.*)$ /$2?company=$1 [QSA] 
```

可能有更好的方法，但这似乎到目前为止有效。

# javascript - 在谷歌地图中创建三角形

> ID：11448721
> 
> 赞同：1
> 
> 时间：2012-07-12T09:22:45.893
> 
> 标签：javascript, google-maps

我在过去 1-2 小时内一直在搜索这个问题，但如果在此之前发布了这个问题，则没有得到任何答案，请给我链接并无论如何删除这个问题，

我的谷歌地图上有一个标记，它就像移动塔

我想在那个标记点击上创建 120 度的 10 公里三角形，

这是我的代码：

```
google.maps.event.addListener(marker2,"click",function(e){
                    var myLatLng = e.latLng;
                    var Tlat = myLatLng.lat();
                    var Tlng = myLatLng.lng();
                    var Tlng2 = Tlng+(10*0.009);
                    var Tlng3 = Tlng-(10*0.009);
                    var Tlat2 = Tlat+30;
                    var Tlat3 = Tlat-30;

                    var triangleCoords = [
                        new google.maps.LatLng(Tlat2, Tlng2),
                        new google.maps.LatLng(Tlat, Tlng),
                        new google.maps.LatLng(Tlat3, Tlng3)
                      ];
                      alert(triangleCoords);
                        Triangle = new google.maps.Polygon({
                        paths: triangleCoords,
                        strokeColor: "#FF0000",
                        strokeOpacity: 0.8,
                        strokeWeight: 3,
                        fillColor: "#FF0000",
                        fillOpacity: 0.35
                      });
                        Triangle.setMap(map); 
```

我目前的经纬度是`23.061389, 76.37222199999997`我不知道`10*0.009`找出公里或添加 30 度的正确公式是否正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:28:51.010

按照链接

[http://www.birdtheme.org/useful/v3tool.html](http://www.birdtheme.org/useful/v3tool.html)

这将帮助您在 Google Map V3 上使用源代码绘制任何类型的多边形、矩形。

# java - Android 使用来自现有 Web 应用程序的 java servlet

> ID：11448725
> 
> 赞同：0
> 
> 时间：2012-07-12T09:22:57.590
> 
> 标签：java, android, servlets

我有一个现有的和正在运行的 java web 应用程序。我想让这个应用程序在 android 上原生并打算继续使用相同的 servlet。

上次我在做一个与服务器通信的 android 应用程序时，在 servlet 中放置了这样的东西：

```
PrintWriter out = response.getWriter(); 
out.print("pass"); 
```

在android java类中我会这样做：

```
String response = null;
    try {
        response = CustomHttpClient.executeHttpPost(
        "http://10.0.2.2/ProjectName/" + "LoginServlet",postParameters);
        String res = response.toString();
                    if(res.equals("pass")
                    {
                        /**do the things i want**/
                    }
               }
               catch(Exception e)
               {
                   e.printStackTrace();
               } 
```

我的 Web 应用程序中的 servlet 使用 HttpSession 并具有如下调度方法：

```
HttpSession session = request.getSession();
session.setAttribute("user",user); 
```

和这个：

```
dispatch(request, response, "/login.jsp"); 
```

我将 PrintWriter 添加到我的 Web 应用程序使用它的现有 servlet 失败。这个错误是在 logcat 上产生的：

```
07-12 08:59:46.344: E/jdwp(487): >>> comparing 'jsp' to 'ers'
07-12 08:59:46.454: E/jdwp(487): >>> comparing 'jsp' to 'nfo'
07-12 08:59:46.524: E/jdwp(487): >>> comparing 'jsp' to 'o$1'
07-12 08:59:46.534: E/jdwp(487): >>> comparing 'jsp' to 'nfo'
07-12 08:59:46.534: E/jdwp(487): >>> comparing 'jsp' to 'o$1'
07-12 08:59:46.594: E/jdwp(487): >>> comparing 'jsp' to 'Key'
07-12 08:59:46.934: E/jdwp(487): >>> comparing 'jsp' to 'ver'
07-12 08:59:47.044: E/jdwp(487): >>> comparing 'jsp' to 'ile'
07-12 08:59:47.334: E/jdwp(487): >>> comparing 'jsp' to 'gin'
07-12 08:59:47.334: E/jdwp(487): >>> comparing 'jsp' to 'nfo'
07-12 08:59:47.354: E/jdwp(487): >>> comparing 'jsp' to 'ame'  
07-12 08:59:47.404: E/jdwp(487): >>> comparing 'jsp' to 'ger'
07-12 08:59:47.404: E/jdwp(487): >>> comparing 'jsp' to 'eme'
07-12 08:59:47.504: E/jdwp(487): >>> comparing 'jsp' to 'ams' 
```

比较的清单还在继续。

问题：我是否遗漏了什么或者我应该创建新的 servlet？（我真的希望它不是第二种选择）

**编辑**

我发现错误是由 dispatch 方法产生的，该方法将响应更改为 jsp 文件而不仅仅是文本字符串，并且注释掉 dispatch 方法允许我使用 android 成功登录到服务器。

但是，我想保留调度方法和 PrintWriter，这样 android 应用程序和 Web 应用程序都可以使用同一个 servlet 登录。反正我能做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:15:49.027

经过一番研究，这个问题的答案似乎是否定的。没有办法为 web 应用程序和 android 应用程序使用相同的 servlet。必须创建一个新的 servlet，无论这 2 个 servlet 的内容是否 95% 相同。

我目前知道可以通过以下几种方式使用android登录：

1）使用上面提到的 out.print 方法。创建 PrintWriter 对象并使用该对象进行 out.print，并通过 android java 类中的 response.toString().equals("expectedString") 进行检查。

2) cookie，我认为它可以工作，但没有，调度方法仍然妨碍了。关于 cookie，我仍然很模糊，但显然您可以将用户信息保存在 cookie 中，以便在使用应用程序的整个过程中对用户进行身份验证。

如果我在上述任何一项中有错误，请随时添加答案或纠正我。

# iphone - 声明字符串时奇怪的 BAD_EXC_ACCESS

> ID：11448732
> 
> 赞同：0
> 
> 时间：2012-07-12T09:23:12.927
> 
> 标签：iphone, objective-c, ios, nsstring, stringwithformat

好的，我所做的就是使用以下代码将 NSString 设置为一个值：

```
NSString *stringURL = [NSString stringWithFormat:@"http://api.themoviedb.org/3/movie/%@/trailers?api_key=1523229ded5824dab8bb7840782db266",searchID]; 
```

这是一个字符串，然后我将其转换为用于查询 TMDB 数据库的 URL。这行代码给了我一个 BAD_EXC_ACCESS ，这让我大吃一惊，因为使用这种 NSString 构造是我已经做了数千次没有问题的事情。

要注意的另一件事是，在进行另一个查询调用之后立即执行此行。奇怪的是，调用使 stringURL 以相同的方式，但它工作正常。

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:28:35.470

您需要使用 %i 来记录 NSInteger，而不是 %@

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:49:25.640

您需要使用以下 NSString *stringURL = [NSString stringWithFormat:@"http://api.themoviedb.org/3/movie/%d/trailers?api_key=1523229ded5824dab8bb7840782db266",searchID];

因为 searchID 具有 NSInteger 类型并且您使用的是“%@”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:15:59.347

如果`NSInteger`您需要使用**%ld**否则会收到警告，您还可以使用**%d**并`int`通过*(int)searchID显式转换为*

# c++ - boost::python 导出自定义异常并继承自 Python 的 Exception

> ID：11448735
> 
> 赞同：3
> 
> 时间：2012-07-12T09:23:34.283
> 
> 标签：c++, exception, boost-python

[boost::python Export Custom Exception](https://stackoverflow.com/questions/2261858/boostpython-export-custom-exception)的公认答案显示了如何从 C++ 中导出自定义异常类，而[Boost.Python 自定义异常类](https://stackoverflow.com/questions/9620268/boost-python-custom-exception-class)显示了如何导出继承自 Python 异常的异常类。我怎样才能做到这两点？那就是公开一个异常类，该类具有检索信息的自定义方法，并且该类还可以从 Python 的异常中派生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T04:04:00.247

Jim Bosch 在[C++-sig list](http://mail.python.org/mailman/listinfo/cplusplus-sig)上建议的一个可行的解决方案是使用组合而不是从包装的 C++ 异常继承。[代码必须像此处](https://stackoverflow.com/questions/9620268/boost-python-custom-exception-class)那样创建 Python 异常，然后将包装的 C++ 异常添加为 Python 异常的实例变量。

```
void translator(const MyCPPException &x) {
    bp::object exc(x); // wrap the C++ exception

    bp::object exc_t(bp::handle<>(bp::borrowed(exceptionType)));
    exc_t.attr("cause") = exc; // add the wrapped exception to the Python exception

    PyErr_SetString(exceptionType, x.what());
} 
```

然后可以像这样从 Python 访问包装的 C++ 异常：

```
try:
    ...
except MyModule.MyCPPExceptionType as e:
    cause = e.cause # wrapped exception can be accessed here 
```

但异常也会被

```
try:
    ...
except Exception:
    ... 
```

# c++ - 如何找到 InternetRegistry 用户密钥或父注册表项

> ID：11448737
> 
> 赞同：1
> 
> 时间：2012-07-12T09:23:43.640
> 
> 标签：c++, internet-explorer, registry, bho, sid

我有一个 BHO，它在第一次运行时正在收集激活信息并将其存储在注册表中。

（我认为）由于 IE 的许可，我只能将其存储在注册表分支中

> HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\InternetRegistry\REGISTRY\USER\S-0-0-00-000000000-000000000-000000000-0000\Software\MyBHO\MyKey

其中 S-0-0-00-000000000-000000000-000000000-0000 是每个用户的唯一密钥。

`RegCreateKey()`使用with很好`"Software\MyBHO\MyKey"`。这一切都是创建和运行的可爱。它可以毫无问题地确定在空间中存储密钥的位置。

**问题：**

当我执行卸载时，我想删除这个密钥，因为它是在 IE 之外运行的，所以我无法确定该密钥在哪里/用户字符串是什么。

我想到的选项：

**选项 1**（理想）首先找出此用户字符串，然后为我希望删除的密钥构建一个新路径并将其删除。如何？

**选项 2** 在激活点将密钥的路径存储在另一个可以访问的注册表值中。然后读取并删除两者（这似乎有点倒退，并且可能由于注册表上 BHO 的访问限制而无法工作（因此首先将其写入那里））

您是否知道是否有任何方法可以找到此用户密钥，甚至如何找到父目录。

**编辑**经过继续研究，我发现我所说的“用户密钥”是当前用户的“SID”。也许这会给我带来更好的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:31:00.673

调用`GetUserName`以获取用户名，并`LookupAccountName`获取他的 SID。

`ConvertSidToStringSid`是将 SID 格式化为`S-1-5-32-00000000-00000000-00000000-00000000-0000`字符串的有用实用程序函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:25:06.203

如果您真的想将每个用户的数据写入注册表，请使用[IEGetWriteableHKCU()](http://msdn.microsoft.com/en-us/library/ms537315%28v=vs.85%29)。

一般来说，在卸载时没有删除每个用户数据的好方法。例如，如果您以用户 A 的身份安装并以用户 B 的身份卸载会怎样？你要去找所有的并删除它们吗？把粪便留在后面。

或者，您可以考虑使用不同的数据存储。你真的需要注册表吗？您可以将这些数据存储在文件中吗？[网络存储](http://msdn.microsoft.com/en-us/library/cc197062%28v=vs.85%29.aspx)呢？

# android - 不使用 SDK 更新 Facebook 状态

> ID：11448738
> 
> 赞同：1
> 
> 时间：2012-07-12T09:23:51.317
> 
> 标签：android, facebook

好吧，我在这件事上掉头发太多了……够了！

在我的应用程序中，我有一个按钮可以调用 Facebook 应用程序来更新我的状态。我不想在我的应用程序中执行此操作，我想在 Facebook 应用程序中执行此操作！我相信这不需要SDK，是吗？

所以我发现方法是使用 Intent，就像我正在发送 SMS 或通过 Gmail 发送一样。

```
public static void viaSMS(Activity activity, String subject, String text) {
        Intent smsIntent = new Intent(Intent.ACTION_VIEW);

        smsIntent.setType("vnd.android-dir/mms-sms");
        smsIntent.putExtra("sms_body",text);

        try {
            activity.startActivity(smsIntent);
        } catch (ActivityNotFoundException ex) {
            // handle error
        }
    }

public static void viaGmail(Activity activity, String subject, String text) {
        Intent gmailIntent = new Intent(Intent.ACTION_VIEW);

        gmailIntent.setClassName("com.google.android.gm", "com.google.android.gm.ComposeActivityGmail");
        gmailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
        gmailIntent.putExtra(android.content.Intent.EXTRA_TEXT, text);

        try {
            activity.startActivity(gmailIntent);
        } catch (ActivityNotFoundException ex) {
            // handle error
        }
    } 
```

但是，我无法通过 Facebook 做到这一点。我没有找到正确的类名和附加内容..

我已经成功启动了 Facebook 应用程序，但我想直接进入“更新状态表”..

```
public static void viaFacebook(Activity activity, String subject, String text) {
        Intent facebookIntent = new Intent(Intent.CATEGORY_LAUNCHER);

        facebookIntent.setClassName("com.facebook.katana", "com.facebook.katana.LoginActivity");

        try {
            activity.startActivity(facebookIntent);
        } catch (ActivityNotFoundException ex) {
            // handle error
        }
    } 
```

# c# - 带有导体和事件聚合器的分层导航

> ID：11448740
> 
> 赞同：4
> 
> 时间：2012-07-12T09:23:51.307
> 
> 标签：c#, wpf, mvvm, caliburn.micro, eventaggregator

这是我的应用程序架构。请注意，我有指挥作为另一个指挥的孩子。我为每个导体设置了 IHandle 以接收来自它的孩子的消息。消息类型与我使用消息只是导航相同。我的问题是我将 ShellView 的 EventAggregator 传递给它的孩子。

NewConnectionView 的 EventAggregator 怎么样？因为我使用它的 EventAggregator 在 ShellView 上导航。并且它的孩子们可以在它的 ActiveItem 上导航。

如何在一个 ViewModel 中分离这 2 个 EventAggregator。

ShellView & NewConnectionView ==> Conductor.Collection.OneActive

```
 +----------------------------------+
                                         | ShellView                 |_|[]|x|
                                         +----------------------------------+
                                         | +------------------------------+ |
                                         | |                              | |
                                         | |                              | |
                                         | |                              | |
                                         | |         ActiveItem           | |
                                         | |                              | |
                                         | |                              | |
                                         | |                              | |
                                         | +------------------------------+ |
                                         +----------------------------------+
                                                     /       \
                                                    /         \
                                                   /           \
                                                  /             \
                                                 /               \
                                                /                 \
                                               /                   \
                     +----------------------------------+    +----------------------------------+
                     | NewConnectionView         |_|[]|x|    | ConnectionListView        |_|[]|x|
                     +----------------------------------+    +----------------------------------+
                     | +------------------------------+ |    | TextBlock                        |
                     | | ComboBox                 | V | |    | +----------------------+ +-----+ |
                     | +------------------------------+ |    | |                      | | Btn | |
                     | +------------------------------+ |    | |                      | +-----+ |
                     | |                              | |    | |                      | +-----+ |
                     | |                              | |    | |                      | | Btn | |
                     | |                              | |    | |    DataGrid          | +-----+ |
                     | |         ActiveItem           | |    | |                      | +-----+ |
                     | |                              | |    | |                      | | Btn | |
                     | |                              | |    | |                      | +-----+ |
                     | |                              | |    | |                      |         |
                     | +------------------------------+ |    | +----------------------+         |
                     +----------------------------------+    +----------------------------------+
                                 /       \
                                /         \
                               /           \
                              /             \
                             /               \
                            /                 \
                           /                   \
 +----------------------------------+    +----------------------------------+
 | FileConnectionView        |_|[]|x|    | DatabaseConnectionView    |_|[]|x|
 +----------------------------------+    +----------------------------------+
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 +----------------------------------+    +----------------------------------+ 
```

目前，我的方法是使用 NewConnectionShellView (Screen) 作为 NewConnectionView 的 (Conductor) 父级来分离 EventAggregator。但问题是，我无法将 NewConnectionView 的子项的 DisplayName 显示到我的主窗口（ShellView）中。

请注意，我没有使用 MEF。我的问题有什么解决方法吗？

```
 +----------------------------------+
                                         | ShellView                 |_|[]|x|
                                         +----------------------------------+
                                         | +------------------------------+ |
                                         | |                              | |
                                         | |                              | |
                                         | |                              | |
                                         | |         ActiveItem           | |
                                         | |                              | |
                                         | |                              | |
                                         | |                              | |
                                         | +------------------------------+ |
                                         +----------------------------------+
                                                     /       \
                                                    /         \
                                                   /           \
                                                  /             \
                                                 /               \
                                                /                 \
                                               /                   \
                     +----------------------------------+       +----------------------------------+ 
                     | NewConnectionShellView    |_|[]|x|       | ConnectionListView        |_|[]|x| 
                     +----------------------------------+       +----------------------------------+ 
                     | +------------------------------+ |       | TextBlock                        | 
                     | |                              | |       | +----------------------+ +-----+ | 
                     | |                              | |       | |                      | | Btn | | 
                     | |                              | |       | |                      | +-----+ |
                     | |                              | |       | |                      | +-----+ | 
                     | |                              | |       | |                      | | Btn | | 
                     | |                              | |       | |    DataGrid          | +-----+ | 
                     | |         ActiveItem           | |       | |                      | +-----+ | 
                     | |                              | |       | |                      | | Btn | | 
                     | |                              | |       | |                      | +-----+ | 
                     | |                              | |       | |                      |         | 
                     | +------------------------------+ |       | +----------------------+         | 
                     +----------------------------------+       +----------------------------------+ 
                                    |
                                    |
                                    |
                                    |
                                    |
                                    |
                                    |
                                    |
                                    V
                     +----------------------------------+
                     | NewConnectionView         |_|[]|x|
                     +----------------------------------+
                     | +------------------------------+ |
                     | | ComboBox                 | V | |
                     | +------------------------------+ |
                     | +------------------------------+ |
                     | |                              | |
                     | |                              | |
                     | |                              | |
                     | |         ActiveItem           | |
                     | |                              | |
                     | |                              | |
                     | |                              | |
                     | +------------------------------+ |
                     +----------------------------------+
                                 /       \
                                /         \
                               /           \
                              /             \
                             /               \
                            /                 \
                           /                   \
 +----------------------------------+    +----------------------------------+
 | FileConnectionView        |_|[]|x|    | DatabaseConnectionView    |_|[]|x|
 +----------------------------------+    +----------------------------------+
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 |                                  |    |                                  |
 +----------------------------------+    +----------------------------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:31:49.823

听起来您想使用事件聚合器的一个实例进行外壳/插件通信，每个插件一个实例用于视图间模型通信。我建议同时使用 IoC 容器并将 shell 事件聚合器注册为单例，然后使用引用容器的工厂来解析视图模型的实例。

您可以有一种消息类型更改显示名称并发布在 shell 视图事件聚合器的实例上，另一种消息类型更改当前活动项并用于所有事件聚合器实例。

# post - 无法访问事件发布值

> ID：11448744
> 
> 赞同：0
> 
> 时间：2012-07-12T09:24:15.550
> 
> 标签：post, google-apps-script

我正在编写一个小谷歌应用程序脚本，它允许在开发人员列表中选择多个名称。但是在我的 doPost(e) 方法中，我无法访问发布值的数组（未定义），如果我选中所有复选框...

```
function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  // add the new menu
  var menuEntries = [];
  menuEntries.push({name: "Edit page", functionName: "start"})
  ss.addMenu("My tools", menuEntries);
}

function start() {

  var app  = UiApp.createApplication();
  app.setTitle("Edit page");
  var formPanel = app.createFormPanel();
  var mainPanel = app.createVerticalPanel();
  var gridPanel = app.createGrid(1, 2);

  // developpers
  var developperPanel = app.createVerticalPanel()
  var developpers = [];
  developpers.push( "John", "Peter", "Max", "Johnny" );
  for (var i = 1; i < developpers.length; ++i) {
    var checkbox = app.createCheckBox(developpers[i]).setName("dev"+i);
    developperPanel.add(checkbox);
  }
  gridPanel.setWidget(0,0,app.createLabel("Developpers : "));
  gridPanel.setWidget(0,1,developperPanel);

  // submit button
  mainPanel.add(gridPanel);
  mainPanel.add(app.createSubmitButton().setText("OK"));
  formPanel.add(mainPanel);
  app.add(formPanel);

  var ss = SpreadsheetApp.getActive();
  ss.show(app);
}

function doPost(e) {
  var app = UiApp.getActiveApplication();
  app.add(app.createLabel(e.values[0])); // Here is the error.       
  return app;
} 
```

在示例中，列表是固定的，但在我的真实脚本中，我通过电子表格创建了列表。

谢谢

最大限度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:11:39.550

查看复选框值的正确方法是使用`e.parameter[name]`，就像您在评论中所说的那样。这是一些代码示例：

```
function start() {
  //...
  var developpers = ["John", "Peter", "Max", "Johnny"];
  //you were skiping the first developer
  for (var i = 0; i < developpers.length; ++i) { //array starts on zero, not one
    var checkbox = app.createCheckBox(developpers[i]).setName("dev"+i);
    developperPanel.add(checkbox);
  }
  //...
}

function doPost(e) {
  var app = UiApp.getActiveApplication();
  var developpers = ["John", "Peter", "Max", "Johnny"]; //repeat it here or make it global, if it's static like this
  var checked = [];
  for( var i in developpers )
    if( e.parameter['dev'+i] == 'true' )
      checked.push(developpers[i]);
  app.add(app.createLabel(checked));
  return app;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:23:25.930

你应该使用`e.parameter.yourCheckBoxName`

例如：

```
function doPost(e) {
  var app = UiApp.getActiveApplication();
  app.add(app.createLabel(e.parameter.dev1); // Access checkbox by its name
  return app;
} 
```

这将显示复选框“Peter”的状态，当它被选中时。您可以根据需要进行修改。

# java - Apache Camel 从 2.6.0 升级到 2.8.6 后，JUnit 测试开始失败

> ID：11448745
> 
> 赞同：0
> 
> 时间：2012-07-12T09:24:20.353
> 
> 标签：java, spring, apache-camel

由于迁移到 JBoss 5，我们已经将 Camel 版本从 升级`2.6.0`到`2.8.6`，从那时起我们所有的测试都失败了。命名空间有一些东西，但我在 Apache Camel 的网站上没有找到任何可以引导我走向正确方向的东西 - 相反，一切似乎都是正确的。有任何想法吗？

```
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [testRedeliverySplitterContext.xml]; nested exception is org.springframework.beans.FatalBeanException: Invalid NamespaceHandler class [org.apache.camel.spring.handler.CamelNamespaceHandler] for namespace [http://camel.apache.org/schema/spring]: problem with handler class file or dependent class; nested exception is java.lang.NoClassDefFoundError: Could not initialize class org.apache.camel.spring.handler.CamelNamespaceHandler
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:212)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:81)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
    ... 28 more
Caused by: org.springframework.beans.FatalBeanException: Invalid NamespaceHandler class [org.apache.camel.spring.handler.CamelNamespaceHandler] for namespace [http://camel.apache.org/schema/spring]: problem with handler class file or dependent class; nested exception is java.lang.NoClassDefFoundError: Could not initialize class org.apache.camel.spring.handler.CamelNamespaceHandler
    at org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:139)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1330)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1325)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    ... 38 more
Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.apache.camel.spring.handler.CamelNamespaceHandler
    at sun.reflect.GeneratedConstructorAccessor9.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:104)
    at org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:129)
    ... 44 more 
```

**testApplicationContext.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:camel="http://camel.apache.org/schema/spring"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="
      http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
      http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

<context:annotation-config />

<!-- camel context -->
<camel:camelContext id="camelApplicationContext">
    <camel:template id="template" />
    <camel:endpoint id="queue1" uri="seda:loopback" />
    <camel:endpoint id="queue2" uri="seda:loopback" />
</camel:camelContext>

<!-- ...beans... -->

</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:08:39.370

我认为骆驼弹簧支撑已经从核心移到骆驼弹簧中。您可以尝试添加此依赖项吗？

# list - 我们可以使用 sharepoint 2010 中的功能设置列表的自定义权限吗？

> ID：11448748
> 
> 赞同：2
> 
> 时间：2012-07-12T09:24:25.323
> 
> 标签：list, sharepoint-2010, custom-lists

我正在处理 SharePoint 2010 。创建功能以自动创建自定义列表。我被分配了一项任务，以编程方式使用功能自动设置每个列表的自定义权限。我想知道这是否可能，如果可以，如何。

这里有两件事：

1.  自定义权限级别将使用贡献删除权限创建。
2.  此权限和默认可用权限将设置为使用功能定制的列表。

如果可能，请务必指定要覆盖的方法。提前感谢您的宝贵答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T14:59:22.980

使用类似于以下的代码覆盖特征接收器的 FeatureActivated 方法：

```
public override void FeatureActivated(SPFeatureReceiverProperties properties)
    {
        SPWeb web = (SPWeb)properties.Feature.Parent;
        SPList list = web.GetList(web.Url + "/Lists/MyList");

        SPRoleDefinition roleDef = new SPRoleDefinition();
        roleDef.BasePermissions = SPBasePermissions.DeleteListItems 
            | SPBasePermissions.AddListItems 
            | SPBasePermissions.EditListItems;
        roleDef.Description = "Custom permissions deployed by feature";
        roleDef.Name = "Contribute-Delete";
        web.RoleDefinitions.Add(roleDef);
        roleDef = web.RoleDefinitions[roleDef.Name];
        SPMember owner = web.SiteUsers[@"Domain\username"];
        SPUser user = web.SiteUsers[@"Domain\username"];
        web.SiteGroups.Add("Contribute-Delete",owner, user,"A group for contribute delete access");
        SPGroup ContributeDeleteGroup = web.SiteGroups["Contribute-Delete"];
        SPRoleAssignment roleAssignment = new SPRoleAssignment(ContributeDeleteGroup);
        roleAssignment.RoleDefinitionBindings.Add(roleDef);
        list.BreakRoleInheritance(true);
        list.RoleAssignments.Add(ContributeDeleteGroup);
    } 
```

# jquery - 测试元素是否存在jquery

> ID：11448750
> 
> 赞同：0
> 
> 时间：2012-07-12T09:24:27.243
> 
> 标签：jquery

我正在尝试查看这些 uls 中是否存在。我用 .length 对其进行了测试，但我不确定我是否做对了。即使 select-sub-domain 类中没有 li，它也会提示 yes。

[http://jsfiddle.net/ST8Be/](http://jsfiddle.net/ST8Be/)

```
if ($('ul.expul > li.select-sub-domain').length < 0) {
var sub_doma = "Not set";
alert("no");
} else {
alert("yes");
var sub_domain = $('li.select-sub-domain').attr('id');
var sub_domainSplit = sub_domain.split('-');
var sub_doma = sub_domainSplit[1];
}​

<ul class="one expul">
<li class='select' id=eng-88>1</li>
<li class='select' id=eng-89>2</li>
<li class='select' id=eng-90>3</li>
<li class='select' id=eng-91>4</li>
<li class='select' id=eng-92>5</li>
<li class='select' id=eng-93>6</li>
<li class='select' id=eng-94>7</li>
<li class='select' id=eng-95>8</li>
<li class='select' id=eng-96>9</li>
<li class='select' id=eng-97>10</li>
<li class='select' id=eng-98>11</li>
<li class='select' id=eng-99>12</li>                    
</ul>

<ul class="two expul hide">
 <li class='select' id=fin-100>1</li>
<li class='select' id=fin-101>2</li>
<li class='select' id=fin-102>3</li>
<li class='select' id=fin-103>4</li>
<li class='select' id=fin-104>5</li>
<li class='select' id=fin-105>6</li>
<li class='select' id=fin-106>7</li>
<li class='select' id=fin-107>8</li>                
</ul>

<ul class="three expul hide">
 <li class='select' id=three-108>1</li>
 <li class='select' id=three-109>2</li>
 <li class='select' id=three-110>3</li>
 <li class='select' id=three-111>4</li>
 <li class='select' id=three-112>5</li>
 <li class='select' id=three-113>6</li>
</ul>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:27:44.300

改变`$('ul.expul > li.select-sub-domain').length > 0)`

到`$('ul.expul > li.select-sub-domain').length == 0)`

如果长度大于 0，则您的代码类似于警报号。这是不正确的。

当长度等于 0 时，它应该提示 no。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:28:19.333

只需更改您的 If 语句，现在您会在没有项目时发出“是”警报，在没有项目时发出“否”警报。

```
if ($('ul.expul > li.select-sub-domain').length === 0) {
   var sub_doma = "Not set";
   alert("no");
} else {
   alert("yes");
   var sub_domain = $('li.select-sub-domain').attr('id');
   var sub_domainSplit = sub_domain.split('-');
   var sub_doma = sub_domainSplit[1];
}​ 
```

[http://jsfiddle.net/PeterForss/ST8Be/2/](http://jsfiddle.net/PeterForss/ST8Be/2/)

**编辑：** 因为[JavaScipt 中的 0 是假的，](http://www.w3schools.com/js/js_obj_boolean.asp)所以它可以写得更短，像这样：

```
if ($('ul.expul > li.select-sub-domain').length) {
   alert("yes");
   var sub_domain = $('li.select-sub-domain').attr('id');
   var sub_domainSplit = sub_domain.split('-');
   var sub_doma = sub_domainSplit[1];
} else {
   var sub_doma = "Not set";
   alert("no");
}​ 
```

# mysql - mysql_insert_id() 中的空格；返回

> ID：11448752
> 
> 赞同：0
> 
> 时间：2012-07-12T09:24:28.770
> 
> 标签：mysql, whitespace, mysql-insert-id

我的身份证前有空格？

当它回来我得到这个？

```
&id=%20%20%20%20%20%20%20%20%20%20%20%201005 
```

它应该只是这样做

```
&id=1005 
```

会不会是我的 jquery 数据代码？

```
 success: function(data) { 
    $('.success').slideDown('slow');  
    setTimeout(function(){window.location="user.php?v=single&id="+data;}, 3000);            
    } 
```

还是可能是php代码？

```
<?php
include 'includes/db.php';
protect();
if(isset(clean($_POST['uid']))) { 
$usrid=$_SESSION['uid'];
$insertNewUser=mysql_query("INSERT INTO users (uid,status,datetime) VALUES  ('$usrid','0',NOW())") or die(mysql_error());
$id=mysql_insert_id();
echo $id;
$insertUserOptions=mysql_query("INSERT INTO users_options (uid,lid) VALUES  ('$usrid','$id')") or die(mysql_error());
mkdir('media/listings/'.$id,0755);
mkdir('media/listings/'.$id.'/photos',0755);
mkdir('media/listings/'.$id.'/documents',0755);
mkdir('media/listings/'.$id.'/video',0755);
mkdir('media/listings/'.$id.'/audio',0755);
chmod('media/listings/'.$id,0775);
chmod('media/listings/'.$id.'/photos',0775);
chmod('media/listings/'.$id.'/documents',0775);
chmod('media/listings/'.$id.'/video',0775);
chmod('media/listings/'.$id.'/audio',0775);
} 
?> 
```

更新：

id 前面的所有字符都是因为我在protect() 函数中包含了几行文件。一旦我将这些包含移动到一个新函数中并相应地调用它，它就解决了这个问题。也感谢马丁为您提供明确的解决方案:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:26:03.707

您可能在代码中输出了一些空格，例如`includes/db.php`

我的建议是永远不要在文件末尾关闭 PHP 代码。这是不必要的，只会制造麻烦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:27:06.073

试试这个，它不是解决方案，而是一种解决方法！

```
$('.success').slideDown('slow');  
    setTimeout(function(){window.location="user.php?v=single&id="+$.trim(data);}, 3000);            
} 
```

它使用 jQuery`trim`函数来删除前后的空格。它应该可以解决问题。

要真正***修复***它，你可以做一些其他的事情：

**选项1**

将 ID 作为 json 字符串返回，因此空格不可见。

**选项 2**

检查您的文件是否有回显空间，或者有时可能在不需要的地方关闭 php 标记，并在结果中回显空格。

# c# - 在 LINQ 中使用可空列测试不等式

> ID：11448755
> 
> 赞同：2
> 
> 时间：2012-07-12T09:24:40.370
> 
> 标签：c#, linq, tsql

在 LINQ 中，对可空列执行不等式测试而无需转换可空类型是否安全？

在 T-SQL 中，您必须使用 ISNULL()。但是在 LINQ 中我可以安全地做吗？：

```
mytable.nullablecol != 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:15:19.360

编译时安全吗？是的。

空比较是否会过滤您可能不想要的行？是的。它是由数据库的规则在数据库中完成的。

```
foo.X != -1 
```

此代码不会为您提供空 X。如果你想要那些，你可以像这样为空：

```
(foo.X ?? 0) != -1 
```

或者

```
(foo.HasValue ? foo : 0) != -1 
```

* * *

关于“=”与“是”查询翻译：

```
int? x = GetId();
var query = from foo in bar
  where foo.X == x
  select foo;
//LinqToSql examines the x 
 // you get an "is" comparison when x is null
 // you get an "=" comparison when x is not null 
```

您可能会遇到翻译问题的地方是编译查询。已编译的查询无法检查其参数并调整翻译。在这种情况下，您必须为每个案例创建一个编译查询（一个可为空参数的两个查询）并将您的参数定向到正确案例的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:29:23.923

是的，这样做是安全的。

编辑：鉴于您的评论，问题可能是`null == -1`结果为 null，而不是 true（在 SQL 中）。因此，您可以使用以下查询：

```
mytable.nullablecol != 1 || mytable.nullablecol == null 
```

* * *

更棘手的是，当您想与一个*可能*为空的值进行相等性比较时。你必须明确地满足这一点。例如：

```
int? x = GetId();
var query = from foo in bar
            where foo.X == x || (foo.X == null && x == null)
            select ...; 
```

# ios - Cocos2d 边界框保持为零

> ID：11448756
> 
> 赞同：0
> 
> 时间：2012-07-12T09:24:40.353
> 
> 标签：ios, cocos2d-iphone, bounding-box

我正在创建一个拨动开关。我有一个 CCScene，其中包含一个包含 ToggleNode 的 CCLayer。ToggleNode 正确显示了我放入的精灵和标签。触摸处理不起作用，因为 ToggleNode 的边界框似乎保持为零。我在 CCLayer 中捕捉到了触摸（作为 ccTouchBegan:withEvent: 正在输入），我有以下代码：

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint touchLocation = [self convertTouchToNodeSpace:touch];

    NSLog(@"bounding box: %f, %f, %f, %f", toggleNode.boundingBox.origin.x, toggleNode.boundingBox.origin.y, toggleNode.boundingBox.origin.x + toggleNode.boundingBox.size.width, toggleNode.boundingBox.origin.y + toggleNode.boundingBox.size.height);
    NSLog(@"touch: %f, %f", touchLocation.x, touchLocation.y);

    if (CGRectContainsPoint(toggleNode.boundingBox, touchLocation)) {
        [toggleNode toggle];
    }

    return NO;
} 
```

触摸 ToggleNode 会导致：

```
bounding box: 512.000000, 384.000000, 512.000000, 384.000000
touch: 508.000000, 378.000000 
```

这让我相信边界框仍然为零。但为什么？保留问题？我仍在 cocos2d 中学习，但我认为这不是正常行为。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T09:38:19.697

如果 ToggleNode 是从 CCNode 派生的，这种行为是正常的。CCNode 的边界框大小为 0，contentSize 属性也为零。

如果您从 CCNode 派生您的类，则由您将 contentSize 属性（这也会更新边界框）设置为它应该具有的任何大小。

仅当您使用使用纹理的类（CCSprite、CCLabelTTF 等）时，cocos2d 才会自行设置 contentSize。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:37:56.930

你必须自己计算你的 ToggleNode `contentSize`。您可能还需要在计算 ToggleNode 后移动其子节点`contentSize`，这样它们就不会出现在其边界框的“外部”。

# vim - Vim，我如何回到粘贴一些被拉动的文本之前的位置？

> ID：11448761
> 
> 赞同：2
> 
> 时间：2012-07-12T09:24:52.407
> 
> 标签：vim

在粘贴一些被拉动的文本之前，我如何返回到我所在的位置？

然后在粘贴后立即回到我所在的位置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T10:00:54.297

```
`[ 
```

如果您愿意，也可以重新映射它：

```
nnoremap p p`[
nnoremap P P`[ 
```

```跳转到一个标记，并`[`标记[“先前更改或拉出的文本的第一个字符”](http://vimdoc.sourceforge.net/htmldoc/motion.html)的位置。

至于粘贴后回到原来的位置，嗯，这并不奇怪``]`。

如果您遇到过类似的问题，您可以随时查看带有 . 的标记`:marks`。此外，您可能想查看`:help `[`更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T09:28:21.440

`Ctrl-o`/`Ctrl-i`会将您跳转到较旧/较新的位置。

例如`Ctrl-o`，将带您回到以前的位置，`Ctrl-i`并将您发送到以后的位置。

有关更多详细信息，请参见[此处](http://vim.wikia.com/wiki/Jumping_to_previously_visited_locations)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:50:39.373

您可以手动设置标记，然后再返回。

设置标记`a`：

```
ma 
```

返回标记`a`

```
`a 
```

请注意，这两个命令都必须在正常模式下提供，并且`:`在它们之前没有必要。您可以使用任何字母（不仅仅是`a`），也可以同时使用多个标记。

# iphone - 我可以裁剪放大的图像吗？固定坐标

> ID：11448763
> 
> 赞同：-1
> 
> 时间：2012-07-12T09:25:04.603
> 
> 标签：iphone, ios, image, crop

问题：缩放后我可以在固定坐标（50,50,200,200）处裁剪图像吗？我在谷歌上搜索了很多小时，看到了匹配的问题。但没有得到答案。

谢谢。

我的裁剪逻辑在这里..

```
CGSize itemSize = CGSizeMake(200, 200);
UIGraphicsBeginImageContextWithOptions(itemSize, NO, 0);
CGRect imageRect = CGRectMake(50, 50, 200, 200);
[imageView1.image drawInRect:imageRect];
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

但我无法在滚动视图中裁剪确切的图像。我想要缩放后在滚动视图中显示的裁剪图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:47:31.013

**我自己的问题的答案：**谷歌搜索后我找到了一个链接。[在这里](http://aasims.wordpress.com/tag/uigraphicsgetimagefromcurrentimagecontext/)和经过少许修改后，它对我来说很好。

可能会节省其他人的时间和精力。谢谢

```
UIGraphicsBeginImageContext(CGSizeMake(200, 200));

[scrollView.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *fullScreenshot = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

imageView1.contentMode = UIViewContentModeScaleAspectFill;

UIImageWriteToSavedPhotosAlbum(fullScreenshot, nil, nil, nil);

return fullScreenshot; 
```

`import QuartzCore/QuartzCore.h` 如果警告

`UIGraphicsGetImageFromCurrentImageContext();`

# sql - SQL Server：以编程方式调度

> ID：11448771
> 
> 赞同：0
> 
> 时间：2012-07-12T09:25:27.370
> 
> 标签：sql, sql-server, stored-procedures, sql-server-agent

我试图强制 SQL Server 每小时调用一个所需的存储过程。

我已阅读以下文章：

*   [http://msdn.microsoft.com/en-us/library/ms190268.aspx](http://msdn.microsoft.com/en-us/library/ms190268.aspx)
*   [http://msdn.microsoft.com/en-us/library/ms187320.aspx](http://msdn.microsoft.com/en-us/library/ms187320.aspx)

它们很大，而且不是很直截了当。

任何人都可以确认以下 SQL 代码是否适合我的任务：

```
USE msdb ;
GO
EXEC dbo.sp_add_job
    @job_name = N'Exec RemoveOldCsvImportData' ;
GO
EXEC sp_add_jobstep
    @job_name = N'Exec RemoveOldCsvImportData',
    @step_name = N'execute stored procedure',
    @subsystem = N'TSQL',
    @command = N'exec RemoveOldCsvImportData', 
    @retry_attempts = 5,
    @retry_interval = 5 ;
GO
EXEC dbo.sp_add_schedule
    @schedule_name = N'RunOnce',
    @freq_type = 4,
    @freq_interval = 1,
    @freq_subday_type = 0x8,
    @freq_subday_interval = 1,
    @active_start_time = 233000 ;
USE msdb ;
GO
EXEC sp_attach_schedule
   @job_name = N'Exec RemoveOldCsvImportData',
   @schedule_name = N'RunOnce';
GO
EXEC dbo.sp_add_jobserver
    @job_name = N'Exec RemoveOldCsvImportData';
GO 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:20:59.990

我的建议是通过向导创建作业，编写脚本，然后将其用于您的脚本。创建一个像你想做的工作是一个神秘的过程。您最终会得到它，但如果这是一次性的，那么向导路线将为您节省大量时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:34:27.470

除去中间的假`USE msdb ;`的，看起来不错，运行成功。为什么不尝试运行它？如果它不是您想要的，您可以随时再次删除该作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:41:17.400

您可以从 sql 作业代理生成脚本并以一种方式运行它。另一种方法是使用向导中的窗口任务计划生成任务。为此，请转到我的计算机->右键单击它并选择“管理”选项。它将打开服务器管理器。现在转到配置选项并选择任务计划程序。您可以在操作选项卡中从表单右侧的创建任务选项创建任务。这是从这里产生工作的非常简单的方法。实际上我也为我的项目需求使用了同样的东西。

在那我只创建任务，将在每天 12:00 执行一个存储过程一次。因此，如果不运行该脚本并在脚本中执行所有操作，您也可以执行相同的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:35:18.327

在我的 SQL Server 实例上执行此代码会给我一个时间表'每天在 23:30:00 和 23:59:59 之间每 1 小时发生一次'，我认为这不是你想要的。

> 任何人都可以确认以下 SQL 代码是否适合我的任务

答：不，这是不对的。

就像 Ben Thul 和 David M 在他们的回答中所建议的那样：您可以尝试代码并检查作业以查看它是否符合您的要求，并且通过右键单击和`Jobs`创建新作业会更好`SQL Server Agent`选择`New Job...`.

# http - “最保守”转换为 GMT？

> ID：11448772
> 
> 赞同：6
> 
> 时间：2012-07-12T09:25:40.787
> 
> 标签：http, http-headers, rfc2616

HTTP 1.1 RFC (2616) 的第 19.3 节“容忍应用程序”关于从 HTTP 客户端应用程序解析日期的主题说：

> 如果 HTTP 标头错误地携带了时区不是 GMT 的日期值，则必须使用最保守的可能转换将其转换为 GMT。

两个问题：

1.  这是否意味着服务器必须将非 GMT 日期值转换为 GMT？或者这是否意味着如果（可选）它选择将非 GMT 日期值转换为 GMT（而不是拒绝它），那么它必须使用最保守的可能转换？

2.  “最保守的可能转换”是什么意思？

**编辑**虽然这是一个老问题，但如果有人知道答案，我仍然很感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T17:35:14.803

> 这是否意味着服务器必须将非 GMT 日期值转换为 GMT？或者这是否意味着如果（可选）它选择将非 GMT 日期值转换为 GMT（而不是拒绝它），那么它必须使用最保守的可能转换？

这实际上比一般应用的东西更具体到所讨论的领域。有一个[工作组草案将淘汰 RFC 2616](https://svn.tools.ietf.org/svn/wg/httpbis/draft-ietf-httpbis/latest/p6-cache.html#age.calculations)，它对缓存中的转换有这样的说法：

*   HTTP/1.1 客户端和缓存应该假设 RFC-850 日期看起来超过 50 年实际上是过去（这有助于解决“2000 年”问题）。
*   尽管所有日期格式都指定为区分大小写，但收件人应该不区分大小写匹配日、周和时区名称。
*   HTTP/1.1 实现可以在内部将解析的过期日期表示为早于正确的值，但不能在内部将解析的过期日期表示为晚于正确的值。
*   所有与到期相关的计算必须在 GMT 中完成。本地时区不得影响年龄或到期时间的计算或比较。
*   缓存应该认为时区不是“GMT”的日期无效。

> “最保守的可能转换”是什么意思？

在这种情况下，它似乎并没有什么特别的意思，除了面对 2 个结果时，根据日期的上下文选择最“保守”的日期。

给定 2 个模糊解析的日期，在`Last-modified`标题的上下文中，最保守的将是“较晚”的日期。但在`Expires`标题的上下文中，2 中的较早者更为保守。任何需要大量猜测的东西都应该只返回一个错误响应。

# perl - Perl：测试远程文件是否存在 http

> ID：11448777
> 
> 赞同：0
> 
> 时间：2012-07-12T09:25:47.127
> 
> 标签：perl, http, lwp, remote-host

大家好！

我需要测试http服务器上的远程文件是否存在而不下载它。我查看了各种命令行程序，如 wget、curl、axel，但找不到仅测试标志。

我在生产环境中工作，并且只对我可以使用的模块有限制。环顾四周，LWP::Simple->head() 函数似乎很合适，但在尝试时返回 undef：

```
#!/usr/bin/perl -w
use strict;
use LWP::Simple;

  my $url = 
'http://hgdownload.cse.ucsc.edu/goldenPath/hg18/encodeDCC/wgEncodeUwChIPSeq/wgEncodeUwChIPSeqAlignmentsBjInput.tagAlign.gz';

 my $head = LWP::Simple->head($url);
 #my $head = head($url);

 print "$head\n"; 
```

任何指针都非常感谢！

谢谢，托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:36:20.920

[`head`](http://p3rl.org/LWP%3a%3aSimple#head-url-)是导出函数，而不是类方法。你调用它是错误的。

```
use LWP::Simple qw(head);

my $url = …
if (head($url)) {
    # sucess
} else {
    # no success
}

# alternatively skip the import, supply fully qualified function name:
# use LWP::Simple qw();
# if (LWP::Simple::head($url)) … 
```

# javascript - Blackberry Webworks：关闭键盘时的奇怪行为

> ID：11448779
> 
> 赞同：0
> 
> 时间：2012-07-12T09:25:48.653
> 
> 标签：javascript, blackberry, blackberry-webworks, virtual-keyboard

在黑莓网络中关闭虚拟键盘时，页面有时不再使用键盘空间，该空间是空白的。

有没有办法防止这个错误？

任何帮助将不胜感激，在此先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:50:21.847

我会仔细检查您是否使用了适用于您的平台（智能手机、平板电脑、BB10）的最新版本的 WebWorks SDK，以及您的设备上是否使用了最新的操作系统。如果您仍然看到问题，我会将其记录为错误： [https ://www.blackberry.com/jira/secure/Dashboard.jspa](https://www.blackberry.com/jira/secure/Dashboard.jspa)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:47:23.917

我自己找到了解决这个问题的方法：

使用 JS：

```
window.onresize = function(){
    window.scrollTo(0,0);
} 
```

或者使用 jQuery：

```
$(window).resize(function(){
    $(window).scrollTop(0);
}); 
```

这应该可以防止错误...

# asp.net - ASP.NET - 被覆盖的日志文件

> ID：11448780
> 
> 赞同：1
> 
> 时间：2012-07-12T09:25:54.973
> 
> 标签：asp.net, iis

我有一个 ASP.NET 应用程序。每次我在 Visual Studio 中使用“发布网站”选项时，对 (/logs/log.log) 上的日志文件的权限都会在服务器上被覆盖，并且 NETWORK SERVICE 不再具有访问权限。

我曾尝试更改 IIS 中的权限，即右键单击 IIS 中的文件夹并选择权限，但权限仍会恢复。如何永久更改权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:40:09.333

解决方案是编写一个在每次有更新时运行的批处理文件。

# php - 在 Codeigniter 中从 ajax 调用控制器操作

> ID：11448783
> 
> 赞同：1
> 
> 时间：2012-07-12T09:26:15.657
> 
> 标签：php, ajax, codeigniter

嘿，我有一个 ajax 调用，它当前调用一个带有查询的 php 文件。我将其移至控制器和模型。如何使用 ajax 调用控制器操作。我的 Ajax 调用是

```
 $.ajax({
                type: "POST",
                url: "/logs/opening_log.php",
                data: dataString,
                cache: false
            }); 
```

如果我必须调用 openings_log 控制器的 box_openings_log 操作，我应该在 url 中输入什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:27:29.453

```
$.ajax({
       type: "POST",
       url: "/index.php/openings_log/box_openings_log",
       data: dataString,
       cache: false
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T09:38:21.357

```
$.ajax({
       type: "POST",
       url: "<?php echo base_url(); ?>/index.php/openings_log/box_openings_log",
       data: dataString,
       cache: false
}); 
```

# model-view-controller - 如何在 PlayFramework2 上实现小部件？

> ID：11448784
> 
> 赞同：3
> 
> 时间：2012-07-12T09:26:18.633
> 
> 标签：model-view-controller, widget, playframework-2.0

# 问题

如何实现一个小部件（由数据库调用产生）出现在网站的每个页面上？

# 语境

我有一个带有侧边栏的传统 Web 应用程序。侧边栏包含以下数据：

*   用户名，
*   有关帐户的详细信息（上次连接和其他）
*   基于用户个人资料的个性化消息。
*   以及从数据库中提取的其他数据。

# 到目前为止的解决方案

如官方文档所示，可以在模板内渲染模板。这是一个有趣的功能，但还不够。因为我需要将数据库中的数据呈现在我的小部件中。

这意味着：

1.  在某处获取侧边栏所需的所有数据，
2.  将数据从每个控制器传递到每个视图，
3.  最后在每个模板中，使用给定的数据调用一个外部模板。

我想做的是 Symfony2 框架中存在的东西。我希望能够直接调用控制器。

```
{% render MyController:MyActionMethod %} 
```

如何实现这种机制？

PS：是的，我已经搜索了一下。发现了这个问题“类似的问题”：[How to Avoid pass parameters anywhere in play2?](https://stackoverflow.com/questions/9629250/how-to-avoid-passing-parameters-everywhere-in-play2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:53:46.273

There are two solutions, you described first - it's passing data from the controller as some kind of object and then using `tags` for rendering it.

Second solution is reverse, as in `Play 2` each template is just a Scala function, you can also just call some method in your controller, which will get required data and render the subtemplate.

ie. to access `controllers.MyController.myMethod(Integer a, Integer b)` from template use

```
<div>
  @MyController.myMethod(1,2) 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:55:35.593

您可以在控制器中编写静态方法，该方法返回 play.api.templates.Html（或 play.mvc.Content）而不是 Result。

```
public static Content widget() {

   Data fetchedData = fetchDataFromTheDatabase();

   return views.html.widget.render(fetchedData);
} 
```

在您看来，只需调用此静态方法即可。

# grails - Grails 重定向和弹簧安全性

> ID：11448785
> 
> 赞同：1
> 
> 时间：2012-07-12T09:26:21.557
> 
> 标签：grails, redirect, spring-security

在控制器操作中调用重定向总是会在重定向 url 中添加一个奇怪的片段。

圣杯 2.1.0

```
def index = {
   ...
   //Spring security programmatic authentication
   ...
  redirect(uri: '/me')
} 
```

将浏览器重定向到 /me#_=_

试图改变重定向添加

```
redirect(uri: '/me', fragment:null) 
```

或者

```
redirect(uri: '/me', absolute:true) 
```

不要改变结果

#_=_ 是从哪里来的？？？？

# string - JSP 中的字符串格式

> ID：11448787
> 
> 赞同：1
> 
> 时间：2012-07-12T09:26:37.650
> 
> 标签：string, jsp, format

如何在 JSP(x) 页面中获得与 String.format(String, Object ...) 相同的行为？是否有可用于此目的的标签库/函数库？我需要一些给定源字符串和一组参数的东西来执行替换，比如

```
<ns:tag source="Hi {0} {1}" arguments="'name','surname'" /> 
```

或者

```
${ns:func("Hi {0} {1}", "'name','surname'")} 
```

这导致

```
Hi name surname 
```

谢谢你的任何建议，斯特凡诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:32:20.760

您正在寻找 JSTL`<fmt:message>`标记：

```
<fmt:message key="the.message.key">
    <fmt:param value="name"/>
    <fmt:param value="surname"/>
</fmt:message> 
```

不过，它在`java.text.MessageFormat`内部使用。

大多数 UI 框架也有自己的此类标记版本。

# javascript - 使用 JavaScript 的 Google 大查询

> ID：11448789
> 
> 赞同：4
> 
> 时间：2012-07-12T09:26:45.860
> 
> 标签：javascript, google-api, google-bigquery

我对 google apis 和 JavaScript 有点陌生，

有没有人有一个示例或教程，说明我如何使用 JavaScript 连接 Google-Big Query api，并将示例表中的数据加载到一个简单的 HTML 页面。

在此先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T17:29:10.043

尝试这样的事情：

```
<html>
  <head>
    <script src="https://apis.google.com/js/client.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
      // User Submitted Variables
      var project_id = 'XXXXXXXXXXX';
      var client_id = 'XXXXXXXXXXXXXXXXXX.apps.googleusercontent.com';

      var config = {
        'client_id': client_id,
        'scope': 'https://www.googleapis.com/auth/bigquery'
      };

      function showProjects() {
        var request = gapi.client.bigquery.projects.list();
        request.execute(function(response) {     
            $('#result_box').html(JSON.stringify(response, null));
        });
      }

      function showDatasets() {
        var request = gapi.client.bigquery.datasets.list({
          'projectId':'publicdata'
        });
        request.execute(function(response) {     
            $('#result_box').html(JSON.stringify(response.result.datasets, null));
        });
      }

      function runQuery() {
       var request = gapi.client.bigquery.jobs.query({
          'projectId': project_id,
          'timeoutMs': '30000',
          'query': 'SELECT TOP(repository_language, 5) as language, COUNT(*) as count FROM [publicdata:samples.github_timeline] WHERE repository_language != "";'
        });
        request.execute(function(response) {     
            console.log(response);
            $('#result_box').html(JSON.stringify(response.result.rows, null));
        });
      }

      function auth() {
        gapi.auth.authorize(config, function() {
            gapi.client.load('bigquery', 'v2');
            $('#client_initiated').html('BigQuery client initiated');
            $('#auth_button').fadeOut();
            $('#projects_button').fadeIn();
            $('#dataset_button').fadeIn();
            $('#query_button').fadeIn();
        });
      }

    </script>
  </head>

  <body>
    <h2>BigQuery + JavaScript Example</h2>
    <button id="auth_button" onclick="auth();">Authorize</button>
    <div id="client_initiated"></div>
    <button id="projects_button" style="display:none;" onclick="showProjects();">Show Projects</button>
    <button id="dataset_button" style="display:none;" onclick="showDatasets();">Show datasets</button>
    <button id="query_button" style="display:none;" onclick="runQuery();">Run Query</button>
    <div id="result_box"></div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:18:15.730

仅供参考，您可能想尝试此处提供的 JavaScript 库： [https ://developers.google.com/bigquery/docs/libraries](https://developers.google.com/bigquery/docs/libraries)

# javascript - 如何刷新一个div？

> ID：11448791
> 
> 赞同：0
> 
> 时间：2012-07-12T09:27:04.817
> 
> 标签：javascript, html, visualforce

我发现的大多数示例都解释了如何用文本或另一个页面刷新 div。我只想在单击按钮后再次重新加载 div。我怎样才能使用javascript做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:29:11.610

使用 AJAX。

如果你使用 jQuery，它就像`$('#mydiv').load(url)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:29:11.843

对 DIV 元素的任何更改都存储在页面的 DOM 中，并立即显示出来。您无需为此做任何事情。但是，更改后 DIV 的旧状态会丢失。您需要将其存储在某处并重新设置以使其可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:30:43.263

```
<script src="/js/jquery-1.3.2.min.js" type="text/javascript"></script> 
```

因此，我们只需将这个小 JS 代码片段放入我们的页面中，以使用内容 id 刷新标签内的所有内容，假设每 5 秒刷新一次：

```
setInterval(function() {
    $("#content").load(location.href,"");
}, 5000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:29:11.413

请在单击按钮时调用 ajax 函数并将 div 的 innerHTML 属性设置为返回结果。

# struts2 - Struts2 的问题标签

> ID：11448795
> 
> 赞同：1
> 
> 时间：2012-07-12T09:27:15.917
> 
> 标签：struts2

我正在使用 hashmap 并将其设置在 session.in s:select 标记中。

```
<s:select name="language" id="language" headerKey="-1"   headerValue="All Languages" cssStyle="width:210px" list="#session.languages"  /> 
```

在jsp中访问地图时有时会出现以下错误，

```
org.apache.jasper.JasperException: org.apache.jasper.JasperException: tag 'select', field 'list', name 'language': The requested list key '#session.languages' could not be resolved as a collection/array/map/enumeration/iterator type. Example: people or people.{name} - [unknown location] 
```

请就问题提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:22:12.963

struts2 无法识别您的对象类型，您应该这样做。

```
<s:select name="language" list="#session.languages" listKey="id" listValue="name" /> 
```

# mysql - 奥运奖牌统计的mysql查询问题

> ID：11448804
> 
> 赞同：-1
> 
> 时间：2012-07-12T09:27:48.987
> 
> 标签：mysql

我在 mysql 中有一个表，`olympic`字段名称是

```
country varchar, gold(int), silver(int), bronze(int) 
```

请帮我查询，将数据按升序排列，就像奥运会奖牌榜一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:30:09.363

```
SELECT *
FROM `olympic`
ORDER BY `gold` DESC, `silver` DESC, `bronze` DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:49:04.400

尝试这个：

```
select 
country, 
Sum(gold) as gold, 
Sum(silver) as silver,
Sum(bronze) as bronze
from olympic 
group by country 
order by 
gold desc, silver desc, bronze desc 
```

这将为您提供获得奖牌的国家/地区列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:31:51.873

```
SELECT country, gold, silver, bronze
FROM olympic
ORDER BY gold DESC, silver DESC, bronze DESC; 
```

# ruby-on-rails - 无头 gem：webkit_server：无法连接到 X 服务器

> ID：11448806
> 
> 赞同：18
> 
> 时间：2012-07-12T09:27:49.793
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, webkit, capybara-webkit

我在使用 Headless gem、Xvfb 和我们的 ci 服务器运行 capybara-webkit 时遇到了一些问题。我们使用此设置对我们的 Ruby on Rails 3.2 应用程序进行自动集成测试和 javascript 测试。在测试期间它抱怨说

```
webkit_server: cannot connect to X server 
```

但是当我`ps aux | grep Xvfb`

```
deploy    1602  0.0  0.1  61696  1912 pts/2    S+   Jul10   0:00 /usr/bin/Xvfb :99 -screen 0 1280x1024x24 -ac 
```

我看到 Xvfb 正在运行。如果我用`--trace`它运行测试也只显示上面的错误日志，我无法调试错误。

有什么想法可以让我获得更多信息，甚至是解决方案吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-16T01:37:26.170

我试图让 capybara-webkit gem 与 capybara 一起工作，并最终`xvfb-run`在 CI 工作中用于我的测试。

```
xvfb-run bundle exec cucumber ... 
```

您的 CI 作业正在执行的命令是什么？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T21:36:43.387

我们遇到了同样的问题......原来在我们的 spec_helper.rb 中我们缺少无头启动命令（如下）。

这是我们的 rspec 配置：

```
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
require 'capybara/rspec'
require 'capybara/webkit'
require 'headless'

Capybara.register_driver :webkit do |app|
  Capybara::Driver::Webkit.new(app, :ignore_ssl_errors => true)
end

Capybara.javascript_driver = :webkit

# don't run on the local machine (since we don't have xvfb running locally)
if Rails.env.production?
    headless = Headless.new
    headless.start
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-16T23:30:41.537

如果您使用的是 Travis CI，您可能会从此配置设置中获得一些好处：

```
before_install:
- "echo 'gem: --no-document' > ~/.gemrc"
- "echo '--colour' > ~/.rspec"
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-30T20:05:00.140

安装 xvfb

```
sudo apt-get install xvfb 
```

然后使用 xvfb 执行您的命令

```
xvfb-run rspec 
```

# java - 文件在没有缓冲的情况下很好地流式传输，但在缓冲时会部分流式传输

> ID：11448809
> 
> 赞同：0
> 
> 时间：2012-07-12T09:28:10.783
> 
> 标签：java, servlets, streaming, httpurlconnection, buffering

我编写了一个代码，它将字节从另一台服务器流式传输到我的服务器，然后我将这些内容写入我的本地文件。当我使用不缓冲数据的 read() 方法时，它工作正常。但是当我使用缓冲时（目的是我相信流式处理大文件会更快）我使用 read(byte[]) 方法，它在流式传输时只获取部分数据。我正在发布代码。任何人都可以指出我所缺少的错误或概念。

以下代码工作正常。（没有流媒体）

```
 private void doViewDocument(HttpServletRequest request,
            HttpServletResponse response, DocumentServletService servletService) throws GEMException, MalformedURLException, ProtocolException, IOException {

        final String objectID = request.getParameter(PARAM_OBJECT_ID);

        LOGGER.info("For Viewing Document objectID received from Request == " + objectID);

        if (GEMSharedUtil.isValidObjectId(objectID)) {

            String ebesDocDownloadURL = servletService.getDocumentDownloadUrl(objectID);

            if (!GEMSharedUtil.isValidString(ebesDocDownloadURL)) {             
                //response.setStatus(HttpServletResponse.SC_NOT_ACCEPTABLE);
                response.setHeader("ResponseStatus", "Not_OK");
                throw new GEMException();
            } else {
                HttpURLConnection con = null;
                BufferedInputStream bin = null;
                BufferedOutputStream bout = null;

                try {
                    con = (HttpURLConnection) new URL(ebesDocDownloadURL).openConnection();

                    WASSecurity.preauthenticateWithLTPACookie(con);
                    con.setRequestMethod(REQUEST_METHOD_GET);
                    con.setDoOutput(true); // Triggers POST but since we have set request method so it will override it
                    con.setDoInput(true);
                    con.setUseCaches(false);
                    con.setRequestProperty("Connection", "Keep-Alive");
                    con.setAllowUserInteraction(false);
                //  con.setRequestProperty("Content-Type",
                //  "application/octet-stream");

                    response.setBufferSize(1024);
                    response.setContentType(con.getContentType());
                    response.setContentLength(con.getContentLength());
                    response.setHeader("ResponseStatus", "OK");
                    response.setHeader("Content-Disposition", con
                            .getHeaderField("Content-Disposition"));

                    bin = new BufferedInputStream((InputStream)
                            con.getInputStream(), 1024);

                    bout = new BufferedOutputStream(
                            response.getOutputStream(), 1024);

                    byte[] byteRead = new byte[1024];

                    File file = new File("C:\\Documents and Settings\\weakStudent\\Desktop\\streamed\\testStream.pdf");

                    FileOutputStream fos = new FileOutputStream(file);

                    if(file.length() > 0) {
                        file.delete();
                    }
                    file.createNewFile();

                    BufferedOutputStream fbout = new BufferedOutputStream((OutputStream) fos);
                    int c;
                    while((c= bin.read()) != -1) {
                        bout.write(c);
                        fbout.write(c);
                    }
fos.close();
                    bout.flush();
                    fbout.flush();
                    fbout.close();
                    LOGGER.info("con.getResponseCode():" + con.getResponseCode());

                } finally {
                    try {
                        if (bout != null) {
                            bout.close();
                        }
                    } catch (IOException e) {
                        LOGGER.log(Level.SEVERE, e.getMessage(), e);
                        throw new RuntimeException(e);
                    } finally {
                        try {
                            if (bin != null) {
                                bin.close();
                            }
                        } catch (IOException e) {
                            LOGGER.log(Level.SEVERE, e.getMessage(), e);
                            throw new RuntimeException(e);
                        } finally {
                            if (con != null) {
                                con.disconnect();
                            }
                        }
                    }
                }
            }

        }   //if ends

    } 
```

现在，如果我有以下 while 循环，它将无法正常工作。

```
 while(bin.read(byteRead) != -1) {
                    bout.write(byteRead);
                    fbout.write(byteRead);
                } 
```

**Q2）** 还想知道是否必须使用 BufferedInputStream/BufferedOutputStream 进行流式传输。例如，如果我使用以下代码片段，它可以工作

```
 BufferedInputStream bin = null;

    try {
        //in = request.getInputStream();        

        bin = new BufferedInputStream((InputStream) request
                .getInputStream(), 1024);

        int respcode = HttpURLConnection.HTTP_OK;
        con = createConnection(uploadURL, REQUEST_METHOD_POST);
        con.setRequestProperty("X-File-Name",fileName);

        conOut = con.getOutputStream();
        bout = new BufferedOutputStream(conOut);
        byte[] byteRead = new byte[1024];       

        while (bin.read(byteRead) != -1) {
            bout.write(byteRead);
        }
        bout.flush(); 
        respcode = con.getResponseCode(); 
```

但以下再次部分流式传输（此处未使用 BufferedInputStream）

```
 ServletInputStream in = null;

    try {
        in = request.getInputStream();      

        int respcode = HttpURLConnection.HTTP_OK;
        con = createConnection(uploadURL, REQUEST_METHOD_POST);
        con.setRequestProperty("X-File-Name",fileName);

        conOut = con.getOutputStream();
        bout = new BufferedOutputStream(conOut);
        byte[] byteRead = new byte[1024];       

        while (in.read(byteRead) != -1) {
            bout.write(byteRead);
        }
        bout.flush(); 
        respcode = con.getResponseCode(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:36:21.773

A1。您丢弃已读取的字节数，告诉输出流写入 byteRead 缓冲区的全部内容，其中可能包含先前读取的数据

```
int bytesIn = -1;
while((bytesIn = bin.read(byteRead)) != -1) {
    bout.write(byteRead, 0, bytesIn);
    fbout.write(byteRead, 0, bytesIn);
} 
```

**更新** 基本上，你所有的例子都遇到了同样的问题。您的缓冲区是 n 字节长，但读取可以在缓冲区中返回 0 到 n 字节，您需要注意 read 方法返回的字节数才能知道要写入多少

# android - 不能使用 GCMRegistrar？

> ID：11448812
> 
> 赞同：3
> 
> 时间：2012-07-12T09:28:13.973
> 
> 标签：android, google-cloud-messaging

无法使用我已添加到构建路径的 gcm.jar 中的 GCMRegisterar，但我仍然在 logcat 中收到此消息。

```
07-12 14:29:08.825: I/dalvikvm(23536): Could not find method com.google.android.gcm.GCMRegistrar.getRegistrationId, referenced from method com.example.registration_id.MainActivity.onCreate 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T13:41:19.900

您需要创建一个`/libs`文件夹并复制`gcm.jar`到该文件夹​​中，然后构建它。

# jquery - DIV 标记内容无法显示

> ID：11448814
> 
> 赞同：1
> 
> 时间：2012-07-12T09:28:18.543
> 
> 标签：jquery, html

我的代码有问题：

```
<script type="text/javascript" src="js/jquery.js"></script>
<script>
(function($)
    {
        $(document).ready(function() {
            $.ajaxSetup(
            {
                cache: false,
                beforeSend: function() {
                $('#loading').show();
            },
            complete: function() {
                $('#content').show();
            },
            success: function() {
                $('#content').show();
            }
        });
        var $container = $("#content");
        $container.load("online_users.php");
        var refreshId = setInterval(function() {
            $container.load('online_users.php');
        }, 1500);
    });
})(jQuery);
</script>

<style type="text/css">
        .content-area
        {
            overflow:hidden;
            height: 100% !important;
            width: 150px;
            overflow-y: hidden;
            overflow-x: hidden;
        }

        .jspVerticalBar
        {
            width: 8px;
            background: transparent;
            right:0px;
        }

        .jspHorizontalBar
        {
            bottom: 5px;
            width: 100%;
            height: 8px;
            background: transparent;
        }

        .jspTrack
        {
            background: transparent;
        }

        .jspDrag
        {
            background: url(images/transparent_black.png) repeat;
            -webkit-border-radius:4px;
            -moz-border-radius:4px;
            border-radius:4px;
        }

        .jspHorizontalBar .jspTrack,
        .jspHorizontalBar .jspDrag
        {
            float: left;
            height: 100%;
        }

        .jspCorner
        {
            display:none
        }

        .tables
        {

        }
    </style> 
```

* * *

```
<div id="content">
 bla bla bla
</div>
<div id="center">
 bla bla bla
</div>
<div id="right">
 bla bla bla
</div> 
```

`div id="left"`成功显示的内容。

我正在使用 jquery for div left 来自动刷新数据。为什么内容来自`div id="center"`并且`id="right"`无法显示？

我尝试删除 jquery，并从中`div id="center"`显示`div id="right"`内容。

在 online_users.php 中，这包括 CSS（内容区域）和一些用于滚动的 JS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:47:18.363

尝试这个：

```
var $container = $("#left"); 
```

而不是这个

```
var $container = $("#content"); 
```

我想您使用错误的 ID 进行更改

怎么改

```
 .content-area
        {
            overflow:hidden;
            height: 100% !important;
            width: 150px;
            overflow-y: hidden;
            overflow-x: hidden;
        } 
```

至

```
 .content-area
        {
            height: 100% !important;
            width: 150px;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:03:45.243

```
 <script>
(function($)
    {
        $(document).ready(function() {
            $.ajaxSetup(
            {
                cache: false,
                beforeSend: function() {
                $('#loading').show();
            },
            complete: function() {
                $('#content').show();
            },
            success: function() {
                $('#content').show();
            }
        });
        var $container = $("#content");
        $container.load("test3.html");

        var refreshId = setInterval(function() {
            $container.load('test3.html');
        }, 900);

        var refreshId = setInterval(function() {
            $("#center").load("test3.html");
        }, 1200);

        var refreshId = setInterval(function() {
            $("#right").load("test3.html");
        }, 1700);

    });
})(jQuery);
</script> 
```

希望这可以帮助

# scala - 如何从 ListBuffer 中删除多个索引（以快速方式）？

> ID：11448821
> 
> 赞同：3
> 
> 时间：2012-07-12T09:28:27.400
> 
> 标签：scala

Scala 中是否有一种从 ListBuffer 中删除多个索引的好方法（以快速的方式）？

例子：

```
val indicesToDelete = List(4, 1)
val buffer = ListBuffer(a, b, c, d, e) 
```

结果：

```
ListBuffer(b, c, e) 
```

我找不到可以完成这项工作的预定义函数。

可以对索引进行排序并删除以最高索引等开头的元素，因此不会有任何复杂性。但排序需要`O(n * log n)`. 有没有更快的方法（也许我错过了一些预定义的东西）？

**更新 1：**应删除现有 ListBuffer 对象中的元素，不应创建新的 ListBuffer 对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T10:03:15.447

您必须使用`zipWithIndex`，就像其他帖子已经使用的那样，因为否则索引会发生变化，您可能会意外删除错误的项目。但是我会使用`foldLeft`or而不是`filter`+ ，在这种情况下，它的作用与+相同，但只需一步。`map``collect``filter``map`

```
buffer.zipWithIndex.collect { case (x,i) if !indicesToDelete.contains(i) => x } 
```

这也可以写成

```
for {
  (x,i) <- buffer.zipWithIndex
  if !indicesToDelete.contains(i)
} yield x 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T15:01:22.790

与其他人不同，我将假设您想就地完成工作，因为您提到了对索引重新编号的担忧。如果排序是你所关心的那么

1）将要删除的索引粘贴到恒定时间查找集而不是列表中。根据索引的范围，散列集或位集似乎是合适的。2) 以相反的顺序遍历列表缓冲区，删除待删除集中的索引。

```
scala> val buffer = ListBuffer("a", "b", "c", "d", "e")
buffer: scala.collection.mutable.ListBuffer[java.lang.String] = ListBuffer(a, b, c, d, e)

scala> val indicesToDelete = BitSet(4, 1)
indicesToDelete: scala.collection.mutable.BitSet = BitSet(1, 4)

scala> for (i <- (buffer.size -1) to 0 by -1) if (indicesToDelete contains i) buffer remove i

scala> buffer
res19: scala.collection.mutable.ListBuffer[java.lang.String] = ListBuffer(a, c, d) 
```

请注意，虽然这会删除 n log n 类型的索引，但这并不能使其成为线性算法。从类似数组的结构中就地删除并不便宜。每次删除都必须向下复制更高的索引。

要获得索引的线性删除，您需要做一些更复杂的事情，您需要 1) 向前走，根据您迄今为止删除的数字向下复制未删除的元素。完成后 2) 删除前 n 个元素，其中 n 是您删除的数字。

```
scala> val buffer = ListBuffer("a", "b", "c", "d", "e")  
buffer: scala.collection.mutable.ListBuffer[java.lang.String] = ListBuffer(a, b, c, d, e)

scala> val indicesToDelete = BitSet(4, 1)
indicesToDelete: scala.collection.mutable.BitSet = BitSet(1, 4)

scala> var deleted = 0
deleted: Int = 0

scala> for (i <- 0 until buffer.size)
     |    if (indicesToDelete contains i) {
     |       deleted += 1
     |    } else if (deleted > 0) {
     |        buffer(i - deleted) = buffer(i)
     |    }

scala> }

scala> buffer trimEnd deleted

scala> buffer
res0: scala.collection.mutable.ListBuffer[java.lang.String] = ListBuffer(a, c, d) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T09:38:19.917

怎么样：

```
buffer.zipWithIndex.filter( p => !(indicesToDelete contains p._2) ).map( _._1 ) 
```

里面的数字在`O(NM)`哪里，里面的元素个数。`N``buffer``M``indicesToDelete`

如果你关心性能，你总是可以制作`indicesToDelete`一个`Set`. 在这种情况下，性能是`O(N`)：假设`O(1)`为 HashSet 或`O(NlogM)`为`TreeSet`.

并整理其他海报中的所有好主意：

```
buffer.view.zipWithIndex.collect { case (x,i) if !indicesToDelete.contains(i) => x } 
```

只为您提供一次数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:46:26.567

```
import collection.mutable.ListBuffer

val indicesToDelete = List(4, 1)
val buffer = ListBuffer('a', 'b', 'c', 'd', 'e')

def exclude[T](l:ListBuffer[T], indice: List[Int]) = {
  val set = indice.toSet
  l.zipWithIndex.foldLeft(ListBuffer.empty[T]){ case (c, next) =>
    if(set(next._2+1)) c else c :+ next._1
  } 

}

exclude(buffer, indicesToDelete) 
```

# ldap - Microsoft LDAP 架构区分大小写

> ID：11448822
> 
> 赞同：1
> 
> 时间：2012-07-12T09:28:28.833
> 
> 标签：ldap

是否可以强制模式区分大小写？

我知道在 IBM TDS 中它是默认设置的，要更改它需要手动设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:48:38.167

属性的语法（在模式中定义）限制了属性值的数据类型和结构。比较（例如，区分大小写）不是由语法提供的，而是通过单独的匹配规则提供的。有些匹配规则区分大小写，有些则不区分大小写。

符合 LDAP 的服务器支持可扩展的匹配过滤器，如果需要特定类型的比较，可使用该过滤器指定服务器要使用的匹配规则。例如，过滤器：

```
(cn:caseExactMatch:=Darth Vader) 
```

将评估条目`true`的属性是否与大小写完全匹配。`cn`

总之，属性值不是全局的，也不区分大小写或不区分大小写。属性类型的值受语法约束，并由匹配规则匹配。

# php - Zend_Date 比较错误

> ID：11448826
> 
> 赞同：1
> 
> 时间：2012-07-12T09:28:47.600
> 
> 标签：php, zend-framework, magento, datetime

我正在使用 Magento 获取产品日期字段的值。然后我决定用它`Zend_Date`来处理这些值，因为 Magento 以不同的格式返回日期（取决于语言环境集）。

但是我面对的事情让我震惊了一段时间。我得到了三个约会，`12 Jul 2012`（今天就这样吧），`2 Mar 2012`和`2 Sep 2012`。并检查今天是否晚于其他`true`两个日期的返回时间。例如。今天**比 3 月 2 日晚**（这是**真的**）**比 9 月 2 日晚**（这让我震惊）。

*以下是PhpStorm*手表的证明：

![在此处输入图像描述](../Images/22c636dd9c2df5a59bc57126f96343ba.png)

我得到的日期如下：

```
$productData['news_from'] = Mage::app()->getLocale()->date($productData['news_from']);
$productData['news_to'] = Mage::app()->getLocale()->date($productData['news_to']);

$_currentDate = Mage::app()->getLocale()->date(); 
```

我究竟做错了什么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:33:58.203

可能是您的日期没有从您从 Mage 收到的字符串中正确解析吗？它们似乎不是标准的...尝试检查每个值的 UNIX 时间戳，看看它的值是否与您的源字符串日期相符。

# iphone - 加速 x264 编码

> ID：11448827
> 
> 赞同：3
> 
> 时间：2012-07-12T09:28:48.417
> 
> 标签：iphone, objective-c, codec, x264

我正在使用 x264 对从 iphone 相机捕获的原始数据进行编码。但编码速度很慢。谁能帮我加快编码速度。

我使用以下设置来构建 x264 库：

//对于armv6

CC=/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc ./configure --host=arm-apple-darwin --sysroot=/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS4.3 .sdk --prefix='dist' --extra-cflags='-arch armv6' --extra-ldflags=-L/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS4.3.sdk/usr/lib /system/ --extra-ldflags='-arch armv6' --enable-pic --disable-asm

//对于armv7

CC=/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc ./configure --host=arm-apple-darwin --sysroot=/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS4.3 .sdk --prefix='dist' --extra-cflags='-arch armv7' --extra-ldflags=-L/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS4.3.sdk/usr/lib /system/ --extra-ldflags='-arch armv7' --enable-pic

我正在使用这样的默认预设：

```
x264_param_default_preset(param, "slow", "zerolatency"); 
```

并设置几个参数：

```
param->i_bframe = 0;
param->analyse.i_me_method = X264_ME_HEX;
param->analyse.i_subpel_refine = 2;
param->i_frame_reference = 1;
param->analyse.b_mixed_references = 0;
param->analyse.i_trellis = 0;
param->rc.b_mb_tree = 0;
param->analyse.i_weighted_pred = X264_WEIGHTP_NONE;

param->rc.i_bitrate = 180;
param->rc.i_qp_min = 20; 
param->rc.i_qp_max = 26; 

param->i_keyint_max = 15; 
param->i_keyint_min = 15;

param->i_width = w;
param->i_height = h;

x264_param_apply_profile(param, "baseline");
x264_picture_alloc( &(enc->pic), X264_CSP_I420, param->i_width, param->i_height ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:48:47.437

如果您使用默认预设为：

```
x264_param_default_preset(param, "veryfast", "zerolatency"); 
```

可能你会在速度上有所收获。但是我不认为 iPhone 能够以非常高的速度使用 x264 编码视频。我从来没有为 iPhone 开发过任何东西，但通常这些嵌入式系统都有一个硬件编码器，可以使用 API 供您的应用程序使用。

# geocoding - Mappoint - 在 FindAddressResults() 中将邮政编码优先于街道名称

> ID：11448830
> 
> 赞同：1
> 
> 时间：2012-07-12T09:28:58.547
> 
> 标签：geocoding, mappoint

我们提供路线优化服务，这些路线通常每天多次在一个小区域内进行 100 多次送货，很多送货可能存在于同一个邮政编码中。

因此，当我们使用 MapPoint 添加航点并优化邮政编码和街道名称/门牌号的运行时。

问题是，如果您`FindAddressResults()`使用错误的街道名称但有效的邮政编码调用 MapPoints 函数，它会忽略邮政编码并尝试在其他地方查找街道名称，通常是在数百英里外的一个随机城镇。

现在，虽然我们可以要求商店提高他们的数据质量——但这永远不会可靠地完成。

**我的问题：**调用时`FindAddressResults()`，有没有办法让它优先于街道名称的邮政编码，而不是优先考虑街道名称而不是邮政编码的默认行为？

示例用法（这是用 VB6 编写的（不要问）-但任何示例/信息都会有所帮助）：

```
'#### GeoCode using postcode & streetname
Set oResults = oMap.FindAddressResults(rsRequest("Request_Address"), , , , rsRequest("Request_Postalcode"))
If oResults.Count = 0 Then
    '#### Nothing was found, GeoCode using postcode only
    Set oResults = oMap.FindAddressResults(, , , , rsRequest("Request_Postalcode"))
End If 
```

我唯一能想到的就是设置一个“最大距离”变量，如果 oResults[] 中的第一个（最佳匹配）项目超过该阈值，则默认为仅邮政编码搜索 - 但这充其量只是个问题。

**编辑 1** - 刚想出这个，似乎工作正常：

```
Set oResults = oMap.FindAddressResults(rsRequest("Request_Address"), , , , rsRequest("Request_Postalcode"))
If oResults.ResultsQuality <> geoFirstResultGood Then
    echo (rsRequest("Request_Address") & " + " & rsRequest("Request_Postalcode") & " had poor results (" & CStr(oResults.ResultsQuality) & "), using postcode only instead...")
    Set oResults = oMap.FindAddressResults(, , , , rsRequest("Request_Postalcode"))
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:57:28.040

是的，您提出了我建议的结果：

1.  使用街道地址执行查询
2.  检查 ResultsQuality 是否模棱两可/不好，然后...
3.  ...仅使用邮政编码执行第二个查询

另一种提高英国地址的 FindAddressResults 质量的方法是尝试对 FindAddressResults 进行几次不同的调用，直到找到一个提供“良好”质量结果的调用。每次调用的参数都会略有不同。英国地址非常灵活，例如房屋名称可能是 1 号线（使 2 号线成为街道）；并且可能有不止一个地方（美国用语中的“城市”） - 例如。一个村庄和一个城市/城镇。地址中。

首先运行一些测试数据；并找到表现最佳的组合。然后，您的呼叫序列将从最佳组合、次佳组合等开始，直到找到“好”结果。最后，如果没有结果，您可以尝试使用 Postcode-only 调用，如上所述。

# javascript - 根据 currentTime 更改类属性

> ID：11448832
> 
> 赞同：0
> 
> 时间：2012-07-12T09:29:08.973
> 
> 标签：javascript, html, class, variables, time

所以，我有一些奇怪的原因不起作用的代码。它的任务是，更改id 为**IF**变量的`class`元素的属性等于 4、5 或 6 *（星期五、星期六、星期日），* 我还希望在. 另外，我确定问题不在**IF**语句中，因为代码甚至不会执行`blogtxt` **`day`*`hours``day = 4 &&`**`alert(currentTime)`*****

 *****> **问：**上面的代码有什么问题？

```
<script>
var currentTime = new Date()
var day = currentTime.getDay()
var hours = currentTime.getHours()
alert(currentTime)
if (day = 4 && || day = 5 || day = 6) {
    document.getElementById("blogtxt").setAttribute("class", "friss");
    else document.getElementById("blogtxt").setAttribute("class", "");
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:35:45.153

```
if (day = 4 && || day = 5 || day = 6) {
    document.getElementById("blogtxt").setAttribute("class", "friss");
    else document.getElementById("blogtxt").setAttribute("class", "");
} 
```

应该：

```
if (day == 4 || day == 5 || day == 6) {
    document.getElementById("blogtxt").setAttribute("class", "friss");
} else {
    document.getElementById("blogtxt").setAttribute("class", "");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:39:17.763

你有一堆错误，JSLint 检测到：

`day = 4`应该是`day == 4`。`&&`if 子句中有一个无关紧要的内容。then 子句没有右大括号，else 子句没有左大括号。

更正了[http://jsfiddle.net/barmar/7nRXG/上的代码](http://jsfiddle.net/barmar/7nRXG/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:33:53.123

你在这里有一个语法错误，这就是代码甚至不会执行的原因：

```
if (day = 4 && || day = 5 || day = 6) 
```

你不能写`&& ||`，将其替换为：

```
if (day === 4 || day === 5 || day === 6) 
```

您还有一个语法错误`else`，应该是：

```
if (day === 4 || day === 5 || day === 6) {
    document.getElementById("blogtxt").setAttribute("class", "friss");
} else {
    document.getElementById("blogtxt").setAttribute("class", "");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:36:05.717

给 ; 完成声明。// ";" 是语句终止符。像这样修改代码：

```
<script>
var currentTime = new Date();
var day = currentTime.getDay();
var hours = currentTime.getHours();
alert(currentTime);
if (day = 4 && || day = 5 || day = 6){
 document.getElementById("blogtxt").setAttribute("class", "friss");
else
 document.getElementById("blogtxt").setAttribute("class", "");}
</script> 
```

希望这可以帮助。

你也不能使用`&& ||`.. 这是语法错误。将其替换为`||`.

`{}`if-else 语句中的花括号（ ）也没有正确完成。

而在 if 语句中比较运算符 is `==` not `=`。*****

# java - Java Swing / JPA / Oracle 插入两次

> ID：11448838
> 
> 赞同：0
> 
> 时间：2012-07-12T09:29:15.433
> 
> 标签：java

可能是一个新手 Java ......但它就在这里。使用 JPA 调用 Oracle 11g 数据库的 INSERT 存储过程。就将数据获取到数据库表而言，一切正常。

我已将 JPA 代码包装到 Java Swing 应用程序中。我的问题是数据以某种方式提交了两次。我有一个`JOptionPane.showMessageDialog`在我提交数据时显示的。那只显示一次。但是当我查询表格时，表格中有两个条目。这是我的代码....

**按钮代码**

```
JButton btnSubmit = new JButton("Submit");
btnSubmit.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {
        AddNewCustomer();
    }
});
btnSubmit.setBounds(24, 341, 91, 23);
frmNewCustomer.getContentPane().add(btnSubmit); 
```

**动作方法**

```
public void AddNewCustomer() {
    Customer.AddCustomer(this.txtFirstName.getText(),
            this.txtLastName.getText(), this.txtAddress.getText(),
            this.txtCity.getText(), this.txtState.getText(),
            this.txtEmail.getText(), this.txtPhone.getText());

    JOptionPane.showMessageDialog(frmNewCustomer, "Added new customer",
            "Status", 1);
}

protected static void AddCustomer(String sFirstName, String sLastName,
        String sAddress, String sCity, String sState, String sEmail,
        String sPhone) {
    try {
        factory = Persistence
                .createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
        EntityManager em = factory.createEntityManager();
        em.getTransaction().begin();

        Query q = em.createNamedQuery("AddCustomer");
        q.setParameter("p_PHONE", sPhone);
        q.setParameter("p_STATE", sState);
        q.setParameter("p_FIRST_NAME", sFirstName);
        q.setParameter("p_ADDRESS", sAddress);
        q.setParameter("p_EMAIL", sEmail);
        q.setParameter("p_CITY", sCity);
        q.setParameter("p_LAST_NAME", sLastName);
        int r = q.executeUpdate();
        em.getTransaction().commit();

        List results = q.getResultList();
        if (results != null) {
            Object id = results.get(0);
            if (id != null) {
                System.out.println(id.toString());
            }
        }
        em.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:35:37.830

我解决了这个问题。将代码更改为....

```
protected static void AddCustomer(String sFirstName,String sLastName, String sAddress, String sCity, String sState,String sEmail,String sPhone )
{

    try {
        factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
        EntityManager em = factory.createEntityManager();
        em.getTransaction().begin();

        Query q = em.createNamedQuery("AddCustomer");   
        q.setParameter("p_PHONE", sPhone);
        q.setParameter("p_STATE", sState);
        q.setParameter("p_FIRST_NAME", sFirstName);
        q.setParameter("p_ADDRESS", sAddress);
        q.setParameter("p_EMAIL", sEmail);
        q.setParameter("p_CITY", sCity);
        q.setParameter("p_LAST_NAME", sLastName);
        //int r = q.executeUpdate();                
        //em.getTransaction().commit();

        List results = q.getResultList();
        if(results != null)
        {           
            Object id = results.get(0);
            if(id != null)
            {
                System.out.println(id.toString());
            }
            em.getTransaction().commit();
        }
        em.close(); 
    } catch (Exception e) {

        e.printStackTrace();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:50:34.230

您需要删除对 的调用`getResultList()`，这将再次执行相同的查询（它是插入查询，而不是选择查询）。无论如何，您都不需要它来获取 ID，请参阅[此问题](https://stackoverflow.com/questions/10035973/jpa-how-to-get-id-after-persist-in-standalone-java-app)。但是，您根本不需要为此使用查询，因为应该使用创建条目的适当方式`entityManager.persist(obj)`（假设您有一个 JPA 实体，因为无论如何您都在使用 JPA）。

# php - 从 android 应用程序访问 php webservice

> ID：11448843
> 
> 赞同：0
> 
> 时间：2012-07-12T09:29:25.533
> 
> 标签：php, android, web-services, ksoap2

我正在尝试从我的 android 应用程序访问 php 网络服务。但它给出了这个错误`“预期：START_TAG {http://schemas.xmlsoap.org/soap/envelope/}信封（位置：START_TAG @11.43 in java io .inputStreamReader@4052d300) " . 这是我的 wsdl 文件

```
 <?xml version ='1.0' encoding ='UTF-8' ?>

<definitions 
name='product' 
targetNamespace='urn:PHP_SOAP_RPC' 
xmlns:tns='urn:PHP_SOAP_RPC' 
xmlns:soap='http://schemas.xmlsoap.org/wsdl/soap/' 
xmlns:xsd='http://www.w3.org/2001/XMLSchema' 
xmlns:soapenc='http://schemas.xmlsoap.org/soap/encoding/' 
xmlns:wsdl='http://schemas.xmlsoap.org/wsdl/' 
xmlns='http://schemas.xmlsoap.org/wsdl/'>  

 <message name='gettestRequest'>
<part name='id' type='xsd:string'/>
</message>
<message name='gettestRespones'>
<part name='id' type='xsd:string'/>
</message>

<portType name='productPortType'>               
    <operation name='gettest'> 
    <input message='tns:gettestRequest'/> 
    <output message='tns:gettestRespones'/> 
    </operation>         
</portType>
 <binding name='productBinding' type='tns:productPortType'> 

    <soap:binding style='rpc' 
    transport='http://schemas.xmlsoap.org/soap/http'/>      

    <operation name='gettest'> 
        <soap:operation soapAction='urn:xmethods-delayed-quotes#gettest'/> 
        <input> 
        <soap:body use='encoded' namespace='urn:xmethods-delayed-quotes' 
        encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/> 
        </input> 
        <output> 
        <soap:body use='encoded' namespace='urn:xmethods-delayed-quotes' 
        encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/> 
        </output> 
    </operation>    
</binding>

<service name='product'> 
    <port name='productPortType' binding='productBinding'> 
    <soap:address location='http://111.223.189.236/webservice/server1.php'/> 
    </port> 
</service> 
```

这是我的java文件

```
 String METHOD_NAME = "gettest";
    String NAME_SPACE = "urn:PHP_SOAP_RPC";
    String SOAP_ACTION = NAME_SPACE + METHOD_NAME;
    String URL = "http://111.223.189.236/webservice/shoppingcart.wsdl";

    SoapObject Request = new SoapObject(NAME_SPACE, METHOD_NAME);

    Request.addProperty("userId", "userId");

    SoapSerializationEnvelope soapEnvelop = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    // soapEnvelop.dotNet = true;
    soapEnvelop.setOutputSoapObject(Request);
    HttpTransportSE aht = new HttpTransportSE(URL);

    try {
        aht.call(SOAP_ACTION, soapEnvelop);
        SoapPrimitive resultString = (SoapPrimitive) soapEnvelop.getResponse();
        tv.setText(resultString.toString());

    } catch (Exception e) {
        tv.setText(e.toString());

} 
```

这是我的 php 文件

```
<?php

echo "ccc";

 function gettest($id) {    
return $id;
  }
      $server1 = new SoapServer(null, array('uri'=> "urn://tyler/res"));
  $server1->addFunction("gettest"); 
  $server1->handle(); 

   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:35:02.947

更改您的 url 和 delete.wsdl 然后尝试它 SoapPrimitive resultString = (SoapPrimitive) soapEnvelop.getResponse(); .not getresponse 使用 bodyin

# java - 听众如何工作

> ID：11448846
> 
> 赞同：5
> 
> 时间：2012-07-12T09:29:32.523
> 
> 标签：java, android

有人可以告诉我监听器接口是如何工作的，当你设置一个 onclicklistener 时，后台到底发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:31:58.003

您注册的侦听器被添加到侦听器列表中，当操作系统接收到事件（在本例中为单击）时，它会在列表中的所有侦听器上调用相应的方法。

# wordpress - Wordpress 3.4 注销 jQuery

> ID：11448847
> 
> 赞同：2
> 
> 时间：2012-07-12T09:29:33.950
> 
> 标签：wordpress, wordpress-theming

将 WP 从 3.3 升级到 3.4 后 wp_deregister_script('jquery'); 似乎不再起作用（WP 提供的 jQuery 在部分可见）。

注销脚本包含在我的主题的 functions.php 文件中，如下所示：

```
 if( !is_admin()){
    wp_deregister_script('jquery');
} 
```

升级后我试图自定义这个，但实际上没有任何效果。例如，我也尝试将脚本出列，但仍然不行。

```
if( !is_admin()){
    wp_deregister_script('jquery');
    wp_dequeue_script('jquery');

} 
```

期待您的意见和任何可能的解决方案的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T09:46:23.153

用来`hook`做那个

```
add_action( 'admin_enqueue_scripts', 'my_enque_func' );
function my_enque_func()
{
    wp_deregister_script('jquery');
    wp_register_script(...); // Register your own script
} 
```

关于[**wp_register_script**](http://codex.wordpress.org/Function_Reference/wp_register_script)。

# c# - 从 Web 服务返回 JSON

> ID：11448850
> 
> 赞同：1
> 
> 时间：2012-07-12T09:29:51.357
> 
> 标签：c#, asp.net, json, web-services

早上好，有人可以帮我看看这个，看看为什么我只能得到回复

```
 {"d":"success : False, message  : "} 
```

理想情况下，我希望得到回应。

```
 {"success" : true, "message" : "***Message Here***"} 
```

下面是我的代码...

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string CheckFeedSubmission()
    {
        string responseText = "";
        bool responseSuccess = false;
        try
        {
            aboDataDataContext dc = new aboDataDataContext();

            List<string> id = (from fl in dc.feedLogs where fl.feedStatus == "_SUBMITTED_" select fl.feedSubmissionId).ToList();

            foreach (var submissionId in id)
            {
                try
                {
                    MarketplaceWebServiceConfig config = new MarketplaceWebServiceConfig();

                    config.ServiceURL = "https://mws.amazonservices.co.uk";
                    config.SetUserAgentHeader("twe-amazon-mws", "1.0", "c#");

                    MarketplaceWebService.MarketplaceWebService service = new MarketplaceWebServiceClient(accesskeyID, secretkey, config);

                    GetFeedSubmissionResultRequest request = new GetFeedSubmissionResultRequest();

                    MemoryStream ms = new MemoryStream();

                    request.Merchant = merchantID;
                    request.Marketplace = marketids[0];
                    request.FeedSubmissionId = submissionId;
                    request.FeedSubmissionResult = ms;

                    try
                    {
                        GetFeedSubmissionResultResponse resp = service.GetFeedSubmissionResult(request);

                        if (resp.IsSetGetFeedSubmissionResultResult() == false)
                        {
                            responseText = "IsSetGetFeedSubmissionResultResult=false";
                            responseSuccess = false;
                        }

                        else
                        {
                            StreamReader sr = new StreamReader(ms);
                            string srs = sr.ReadToEnd();

                            XmlDocument doc = new XmlDocument();
                            doc.LoadXml(srs);

                            try
                            {
                                feedLog feedUpdate = dc.feedLogs.Single(l => l.feedSubmissionId == submissionId);
                                feedUpdate.feedStatus = "_" + doc.SelectSingleNode("/AmazonEnvelope/Message/ProcessingReport/StatusCode").InnerText.ToUpper().ToString() + "_";
                                feedUpdate.totalProcessed = Convert.ToInt32(doc.SelectSingleNode("/AmazonEnvelope/Message/ProcessingReport/ProcessingSummary/MessagesProcessed").InnerText);
                                feedUpdate.sucessfulPublish = Convert.ToInt32(doc.SelectSingleNode("/AmazonEnvelope/Message/ProcessingReport/ProcessingSummary/MessagesSuccessful").InnerText);
                                feedUpdate.publishwithErrors = Convert.ToInt32(doc.SelectSingleNode("/AmazonEnvelope/Message/ProcessingReport/ProcessingSummary/MessagesWithError").InnerText);
                                feedUpdate.publishwithWarning = Convert.ToInt32(doc.SelectSingleNode("/AmazonEnvelope/Message/ProcessingReport/ProcessingSummary/MessagesWithWarning").InnerText);
                                feedUpdate.feedResponseXML = doc.InnerXml.ToString();

                                if (doc.SelectSingleNode("/AmazonEnvelope/Message/ProcessingReport/StatusCode").InnerText.ToUpper().ToString() == "COMPLETE")
                                {
                                    try
                                    {
                                        dc.tweProducts.Where(p => p.feedSubmitId == submissionId).ToList().ForEach(i => i.prodPublished = 1);
                                    }
                                    catch (Exception ee) { responseSuccess = false; responseText = "db update tweProducts exception:" + ee.Message; }
                                }

                                dc.SubmitChanges();
                            }
                            catch (Exception ex) { responseSuccess = false; responseText += "\n db update feedLog exception : " + ex.Message; }

                            XDocument pxerror = XDocument.Parse(srs);
                            var results = pxerror.Root.Descendants("Result")
                                          .Where(p => p.Element("ResultCode").Value == "Error");
                            if (results != null)
                            {
                                foreach (var t in results)
                                {
                                    publishError perrors = new publishError();
                                    {
                                        try
                                        {
                                            var resultCode = t.Element("ResultMessageCode").Value;
                                            var resultDescription = t.Element("ResultDescription").Value;
                                            var sku = t.Element("AdditionalInfo").Element("SKU").Value;

                                            perrors.sku = sku;
                                            perrors.errorId = resultCode;
                                            perrors.description = resultDescription;
                                            perrors.feedSubmissionId = submissionId;
                                            perrors.errorResolved = false;

                                            dc.publishErrors.InsertOnSubmit(perrors);
                                            dc.SubmitChanges();
                                        }
                                        catch (Exception ex) { responseSuccess = false; responseText += "db update publishError exception: " + ex.Message; }
                                    }
                                }
                            }

                            #endregion

                            responseSuccess = true;
                            responseText = "Complete";
                        }

                    }
                    catch (Exception ex) { responseSuccess = false; responseText = "GetFeedSubmissionResultResponse error" + ex.Message; }
                }
                catch (MarketplaceWebServiceException ex) { responseSuccess = false; responseText = "starts MarketplaceWebServiceConfig, exception message:" + ex.Message + ",status code:" + ex.StatusCode; }

            }
        }
        catch (Exception ex) { responseSuccess = false; responseText = "starts at aboDataDataContext, exception message:" + ex.Message; }

        return "success : " + responseSuccess + ", message  : " + responseText ;
    }
} 
```

这是我之前的问题的后续 - [How to return JSON from webservice](https://stackoverflow.com/questions/11447538/how-to-return-json-from-webservice)

另外，如果您看到任何改进代码的方法，请告诉我:)

非常感谢所有帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:37:08.940

这是因为您返回的是单个字符串而不是返回对象。您想要返回的 Json 格式表示存在一个具有 2 个属性“Success”和“Message”的对象（而您正在返回一个简单的字符串）。

首先制作一个将返回的对象

```
[DataContract]
public class Message
{
    [DataMember]
    public string Success { get; set; }
    [DataMember]
    public string Message { get; set; }
} 
```

更改方法的签名

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public Message CheckFeedSubmission()
    {
    .
    .
    } 
```

然后返回这个对象

```
return new Message() { Success = responseSuccess , Message = responseText }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:37:18.183

根据定义，webmethod 总是返回一个看起来像 { d : object } 的 json，其中 object 是你输入的任何内容，所以我认为你不能避免“d”

所以你需要返回类似 "{"success" : true, "message" : " ***Message Here*** "}"

不确定它是否会导致语法问题，所以也许你最好返回一个像“[{成功：真，消息：”msg“}]”这样的json arr

# .net - XPathNavigator - MoveTo -> XPath 表达式

> ID：11448854
> 
> 赞同：0
> 
> 时间：2012-07-12T09:30:05.173
> 
> 标签：.net, xml, xmldocument

有人知道如何将 System.Xml.XPath.XPathNavigator（由 XML.XmlDocument.CreateNavigator 创建）的光标移动到由 XPath-Expression 定义的位置吗？我的问题是我必须使用相对路径，但据我所知 XPathNavigator 不提供任何功能

Cadburry：谢谢，我试过了，但是 .moveNext() 方法只返回 TRUE 一次，并且导航器光标仍然指向根元素。（ni.current.InnerXML 返回我的 xml）

我的 xml 简化：

```
<Ediakt>
<Header>        
</Header>
<MetaData>  
</MetaData>
<Payload>
    <Layer2>    
    </Layer2>           
    <Layer2>    
    </Layer2>
    <Layer2>    
    </Layer2>
</Payload>
</Ediakt> 
```

我的 xPath 表达式是：/Ediakt/Payload/Layer[2]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:41:26.743

您可以通过将节点作为 XpathExpression 传递然后移动来选择节点来实现它

```
XPathNodeIterator ni = myNavigator.Select(xPathExpression);
while (ni.MoveNext())
{
///    .....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T06:53:23.710

感谢 HatSoft 的启发：

如果我先编译表达式并将上下文设置为我的命名空间管理器——那么它就可以工作了！！

```
System.Xml.XPath.XPathExpression ex = System.Xml.XPath.XPathExpression.Compile("myexpression");
ex.SetContext(mynamespacemanager);

System.Xml.XPath.XPathNodeIterator ni = nav.Select(ex);
// ni.Current.ReplaceSelf()
//ni.m()
while (ni.MoveNext()) {
} 
```

# android - XmlPullParserException 仅在 ICS 上

> ID：11448855
> 
> 赞同：5
> 
> 时间：2012-07-12T09:30:06.500
> 
> 标签：android, xml-parsing, android-4.0-ice-cream-sandwich, xmlpullparser

我的问题是我必须解析`HTML`数据

```
84 101 <br>some text<br><table border='1'>Here comes a table definition</table> 
```

并`XmlPullParserException`抛出以下内容：

```
while (eventType != XmlPullParser.END_DOCUMENT) {
    if (eventType == XmlPullParser.START_TAG) {
        // do something
    } else if (eventType == XmlPullParser.END_TAG) {
        // do something else 
    }

    eventType = xpp.next(); // the XmlPullParserException is thrown here, on method next()
} 
```

**非常有趣和奇怪的部分是：**仅在 Nexus S（操作系统版本 4.0.4）上引发异常，在操作系统版本较低的设备上，这种方法效果很好。

错误消息如下：

```
org.xmlpull.v1.XmlPullParserException: Unexpected token (position:TEXT 84 101 @1:8 in java.io.StringReader@414e3248) 
```

谁能解释一下为什么这只发生在 ICS 上？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:07:03.963

1) 字符编码：您是否对 Nexus S 使用不同的编码？您的文件是用 ANSI 还是 utf 解码的？将其与您的 Nexus S 编码进行比较。

2) 字符集：您是否在 XML 文件中使用不同的字符集。例如，您是否使用任何汉字？Nexus S 的默认设置是什么？

这是首先要检查的两件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T05:32:35.547

使用 CDATA 作为您的 html 标签

`Everything inside a CDATA section is ignored by the parser.`

> `A CDATA section starts with "**<![CDATA[**" and ends with "**]]>**"`

# ios - iOS6 中的谷歌地图

> ID：11448858
> 
> 赞同：18
> 
> 时间：2012-07-12T09:30:17.283
> 
> 标签：ios, google-maps, google-maps-api-3, ios6, ios6-maps

在 iOS 6 上重新获得对 Google 地图的支持。

对于已经在 iOS 5 上发布应用程序并与 Google 服务条款的法律合规性相关的许多应用程序开发人员来说，这是一个严重且建设性的问题，必须解决[http://code.google.com/apis/maps/ iphone/terms.html](http://code.google.com/apis/maps/iphone/terms.html)。

事实如下：使用 Google Maps API Web Services 的应用程序必须与 Google Map 上的信息显示相关。禁止在不显示 Google 地图的应用程序中使用该服务。

假设一些开发人员在 App Store 上有一个可供下载的应用程序，用户已经下载并正在使用它。当用户使用 iOS 6 更新他们的手机时，Apple Maps 将代替 Google Maps 显示，这突然违反了 Google 的许可条款。

从 Google 许可证的角度来看，该应用程序成为“事实上的”，成千上万的用户将使用一个已成为非法的应用程序，我想不出一种技术方法来阻止这种情况。

我们如何处理这个？

*   谷歌能容忍旧的应用程序仍然可以在这种情况下使用吗？
*   谷歌是否正在准备他们自己的 Mapkit API，我们可以在 iPhone 上使用它是否可以在以前的 IOS 版本中使用，以便开发人员可以在 IOS6 发布之前更新他们的应用程序？
*   Apple 能否提供一个选项，在提供类似的 Web 服务之前仍然显示 Google Map 以弥补差距？

欢迎任何建设性的想法？

PS。我还将这些问题发布给 Google 和 Apple。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:20:45.417

好问题！

（对于潜在的密切投票者：Apple 将提供自己的地图这一事实是公开的）

我建议您向 Apple 提交雷达文件，并在[http://www.openradar.me/上复制它](http://www.openradar.me/)

至于你的问题：

> 谷歌能容忍旧的应用程序仍然可以在这种情况下使用吗？

他们可以，我相信在实践中他们*可能*会。

> 谷歌是否正在准备他们自己的 Mapkit API，我们可以在 iPhone 上使用它是否可以在以前的 IOS 版本中使用，以便开发人员可以在 IOS6 发布之前更新他们的应用程序？

很可能。但我怀疑它是否会及时为您在 iOS 6 发布之前更新您的应用程序做好准备。

> Apple 能否提供一个选项，在提供类似的 Web 服务之前仍然显示 Google Map 以弥补差距？

我不这么认为。我不认为他们愿意，而且我认为他们与谷歌的许可合同将在不久的将来到期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T20:02:58.423

你可以在 iOS6 上使用谷歌地图瓦片，仍然使用谷歌地图 API 进行地点、地理编码等。覆盖的解决方案：[https](https://github.com/mladjan/GoogleMapsOverlayiOS) ://github.com/mladjan/GoogleMapsOverlayiOS 希望谷歌尽快发布适用于 iOS 的谷歌地图 SDK尽可能:)

# mysql - 从数据库中删除后如何在运行时从组合框中删除项目

> ID：11448859
> 
> 赞同：0
> 
> 时间：2012-07-12T09:30:19.090
> 
> 标签：mysql, vbscript

```
Private Sub btn_remove_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn_remove.Click
        Dim Query As String
        Dim query1 As String
        Dim i As Integer = 0
        i = DataGridView1.CurrentRow.Index
        Dim strValueYouWant As String = String.Empty
        strValueYouWant = DataGridView1.Item(0, i).Value
        Dim result1 As DialogResult = MessageBox.Show("Are you sure,you want delete the selected row?", _
        "Important Question", MessageBoxButtons.YesNo)
        If result1 = DialogResult.Yes Then

            mysqlconn.Open()
            Query = "delete from table1 where show_id= '" & strValueYouWant & "'"
            Dim cmd As MySqlCommand = New MySqlCommand(Query, mysqlconn)
            Dim k As Integer = cmd.ExecuteNonQuery()
            Query = Nothing

            cmd.Dispose()

            query1 = "select * from table1"
            Dim cmd1 As New MySqlCommand(query1, mysqlconn)
            Dim reader As MySqlDataReader = cmd1.ExecuteReader
            Dim table As New DataTable()
            table.Load(reader)
            DataGridView1.DataSource = table

            query1 = Nothing

        ElseIf result1 = DialogResult.No Then
            Exit Sub
        End If
        mysqlconn.Close()
    End Sub 
```

我在上面的代码中从组合框中选择一个项目并使用数据表创建一个表并将其显示在数据网格中。然后我点击删除按钮。该项目正在从数据库中删除，但在这里我想在运行时从组合框中删除该项目。我已经在上面的代码中使用了两个查询，一个用于选择，一个用于删除，如果我用户加载方法它不起作用，因为连接已经打开错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:49:14.770

请参阅此站点 [http://msdn.microsoft.com/en-us/library/19fc31ss.aspx](http://msdn.microsoft.com/en-us/library/19fc31ss.aspx)

你可以使用函数`RemoveItem`

`YourCombo.RemoveItem(index)`

或清除组合`YourCombo.Clear()`并再次加载

# javascript - 图像没有动态显示

> ID：11448860
> 
> 赞同：0
> 
> 时间：2012-07-12T09:30:22.880
> 
> 标签：javascript, html

我正在使用 hidden 属性在我的 html 页面中隐藏一个图像。`document.getElementById("check").style.visibility="visible";` 但我无法通过我的代码通过 java 脚本使其可见

```
 <html>
<head>
<style type="text/css">
</style><script type="text/javascript">
function myFunction()
{
document.getElementById("check").style.visibility="visible";
}
</script>
</head>
<body>
<table> 
<img class="hide" src="check.jpg" id="check" hidden="true" height="300" width="400">
<tr>
<td>
<img src="1.jpeg" onclick="myFunction()">
</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:32:23.583

您实际上忘记在函数中为该变量分配一些东西

```
function myFunction() {
    document.getElementById("check").style.visibility = "visible";
} 
```

您还必须删除隐藏属性并删除您的“隐藏”类

```
function hasClass(ele,cls) {
    return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}
function removeClass(ele,cls) {
    if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className = ele.className.replace(reg,' ');
}
function myFunction() {
    var ele = document.getElementById("check");
    ele.style.visibility = "visible";
    ele.hidden = "";
    removeClass(ele, "hide");

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:34:47.063

如果您设置`hidden="true"`隐藏它，那么您将需要取消设置此属性以再次显示该元素。

```
<html>
<head>
<style type="text/css">
</style><script type="text/javascript">
function myFunction()
{
    document.getElementById("check").hidden = '';
}
</script>
</head>
<body>
<table> 
<img class="hide" src="check.jpg" id="check" hidden="true" height="300" width="400">
<tr>
<td>
<img src="1.jpeg" onclick="myFunction()">
</td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:35:53.513

```
<html>
<head>      
    <script type="text/javascript">
        function myFunction()
        {
            document.getElementById("check").style.visibility="visible";
        }
    </script>
</head>
<body>
    <table> 
        <img  src="check.jpg" id="check" hidden="true" height="300" width="400" style="visibility:hidden;"/>    
        <tr>
            <td>
                <img src="1.jpeg" onclick="myFunction()">
            </td>
        </tr>
    </table>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:33:08.773

您需要更改和应用`visibility`CSS。

```
function myFunction()
{
    document.getElementById("check").style.visibility = "visible";
} 
```

最好使用脚本设置负载可见性。

```
document.getElementById("check").style.visibility = "hidden"; 
```

有时，当您在 CSS 中定义时，它不起作用。

# c++ - 无法将 QGraphicsView 坐标映射到 QGraphicsScene

> ID：11448861
> 
> 赞同：3
> 
> 时间：2012-07-12T09:30:23.227
> 
> 标签：c++, qt, qt4, coordinates, qgraphicsview

我有一个 QGraphicsView 包含一个加载图像的 QGraphicsScene 。我的应用程序所做的是让用户注释此图像，以便我可以获得此图像的用户注释区域的坐标信息。为了更容易理解，我制作了这张图片：

![在此处输入图像描述](../Images/7accee2c58630c490000637faa2e39d1.png)

我想要的是基于图像坐标的确切坐标信息，因为我在场景中添加了像素图，我认为图像和场景具有相同的坐标系。但是，QGraphicsView 和场景的坐标不同，如图所示，在我的电脑中它们的宽度和高度相差 5pix 和 1pix（总是这样吗？）。

我使用[mapToScene](http://doc-snapshot.qt-project.org/5.0/qgraphicsitem.html#mapToParent-6)函数，但我没有得到正确的坐标信息。

我在这里发布了一些代码。

```
scene = new QGraphicsScene();
scene->addPixmap (pixmapItem);
ui->graphicsView->setScene (scene);

void MainWindow::mousePressEvent(QMouseEvent *event)
{
    if ((event->button() == Qt::LeftButton)&& beginAnnotation) {
        .......   

        QPointF mousePoint = ui->graphicsView->mapToScene(event->pos());
        qDebug() << mousePoint;
    }
} 
```

当我单击图像的左上角时，我希望我能得到 (0,0)，但我得到的是 (5,1)。

请帮我。

解决方案：

我认为@effjae 是对的。我的 mainWindow 捕获 mousrPressEvent。当我将图像加载到 View 包含的场景中时，我使用`ui->graphicsView->adjustSize();`，所以，我认为 View 和 Scene 共享相同的坐标系，对吗？出于这个原因，我将图片更新为：

![在此处输入图像描述](../Images/0944767b8cb4d6b0c05c101381130fa8.png)

现在，我接受 effjae 的建议。我在 View 上安装了一个 eventFilter，现在 mouseClick 的坐标是基于 View **&** Scene 的。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:10:35.063

我认为您在这里遇到的问题是您的 mousePressEvent 来自您的主窗口，而不是实际的 QGraphicsView。mousePressEvent 为您的窗口提供坐标，这包括任何边框或装饰。

为了解决这个问题，你可以继承一个 QGraphicsView 并在那里处理 mousePressEvent，与你在 MainWindowClass 中的方式完全相同。

一个快速但可能不太有吸引力的解决方案是在 QGraphicsView 上安装一个事件过滤器。使用 QObject 的方法 installEventFilter 来执行此操作。

# c++ - C++ 朋友，重写嵌套类的函数

> ID：11448863
> 
> 赞同：3
> 
> 时间：2012-07-12T09:30:28.763
> 
> 标签：c++, overriding, friend, nested-class

我想从朋友（+子）类中覆盖嵌套类中的虚函数。这怎么可能？这是我尝试过的：

```
class Parent {
  friend class Child;
  class Nested {
    public: virtual void nestedfunc() {std::cout << "one";}
  }
};
class Child : Parent {
  void Child::Nested::nestedfun() {std::cout << "two";}
} 
```

但我得到：

```
error: cannot define member function 'Parent::Nested::nestedfunc' within 'Child' 
```

（没有“Child::”的同样错误）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T09:33:53.037

随着覆盖的进行，您需要扩展类，然后覆盖它：

```
class Parent {
  friend class Child;
  class Nested {
    public: virtual void nestedfunc() {std::cout << "one";}
  }
};
class Child : Parent {
  class ChildNested : Parent::Nested
  {
    public: virtual void nestedfunc() {std::cout << "two";}
  }
} 
```

内部类并没有那么特别，它们不会破坏继承规则或提供任何特殊的魔法来让您覆盖一个方法但不从声明它的类派生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:34:55.423

基本上你需要在 Child 中派生另一个类，如下所示，并在那里实现你的虚函数。

```
class Parent 
{
  friend class Child;
  class Nested {
    public: virtual void nestedfunc() {std::cout << "one";}
  };
};

class Child : Parent 
{

    //derive a new class in the child to override the virtual function.
    class ChildNested : public Parent::Nested
    {
       void nestedfun() {std::cout << "two";}
    };
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:33:36.910

您可以在派生类中覆盖基类的虚函数。内部类是一个单独的类。您需要创建一个从内部类派生的类。像这样的东西：

```
class Child : Parent::Nested {
  void nestedfun() {std::cout << "two";}
} 
```

# android-source - Android源存储库中“repo sync -d”的用途是什么

> ID：11448864
> 
> 赞同：10
> 
> 时间：2012-07-12T09:30:41.197
> 
> 标签：android-source, repository

从 repo 的帮助中，我发现了以下信息：

> -d/--detach 选项可用于将指定项目切换回清单版本。如果项目当前位于主题分支上，则此选项特别有用，但暂时需要清单修订。

1 谁能告诉我在什么情况下使用 -d 选项？

2 这是否意味着无论您正在研究什么主题，我都可以获得与远程存储库完全相同的工作存储库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-21T21:23:04.050

'repo sync -d' 会将存储库的 HEAD 移回清单文件中指定的那些。但是，将保留任何分阶段或工作目录更改。

如果您弄乱了工作目录并需要按顺序取回它，我会这样做：

```
repo sync -d
repo forall -c 'git reset --hard'    # Remove all working directory (and staged) changes.
repo forall -c 'git clean -f -d'     # Clean untracked files 
```

这将创建一个原始的工作文件夹。

# php - 如何在前端将搜索结果拆分为帖子类型选项卡？

> ID：11448872
> 
> 赞同：2
> 
> 时间：2012-07-12T09:31:04.050
> 
> 标签：php, wordpress, filter, custom-post-type

我有一个 Wordpress 安装。我的网站上有大约 3 种自定义帖子类型。当我进行搜索时，所有帖子类型的结果都会显示在前端的一页上。有些帖子类型在内容方面与其他帖子类型完全不同，因此结果看起来有点有趣。

有没有办法根据帖子类型将结果拆分为选项卡？我想将结果保留为现在的默认方式（所有结果），然后在右侧有选项卡根据它们所属的帖子类型过滤掉不同的结果。

我在这里创建了一个 jpeg 来帮助解释我想要做什么。

谢谢

[http://f.cl.ly/items/110S2K1A0T3m290Y0C14/Filter_post_Types.jpg](http://f.cl.ly/items/110S2K1A0T3m290Y0C14/Filter_post_Types.jpg)

![在此处输入图像描述](../Images/250037a56fdec16b653aa2d394eacc46.png)

**更新 1：** 只是想在代码方面添加更多信息

我打算使用简码作为标签

```
[tabs]
[tab]All Search Results[/tab]
[tab]Post Type 1 Results[/tab]
[tab]Post Type 1 Results[/tab]
[tab]Post Type 1 Results[/tab]
[tab] 
```

或在 PHP 模板中，我也可以通过

```
<?php 

echo do_shortcode('[tabs style="boxed" id="searchTabs"]
   [tab title="Post Type 1"]Post Type 1 Results[/tab]
   [tab title="Post Type 2"]Post Type 2 Results[/tab]
   [tab title="Post Type 3"]Post Type 3 Results[/tab]
   [/tabs]');

?> 
```

我在想这里有一些东西可以帮助我，但不知道如何实现它[http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

**更新 2：** 我在另一个论坛上收到的其他建议是尝试这样的代码，但我似乎无法将它正确地实现到我的搜索模板 php 中，这里是[http://pastie.org/4248751](http://pastie.org/4248751)

建议的代码是

```
<?php
$the_slug = 'my_slug';
$args=array(
  'name' => $the_slug,
  'post_type' => 'custom_post_Type_1',
  'post_status' => 'publish',
  'numberposts' => 1
);
$my_posts = get_posts($args);

$the_slug2 = 'my_slug2';
$args2=array(
  'name' => $the_slug2,
  'post_type' => 'custom_post_Type_2',
  'post_status' => 'publish',
  'numberposts' => 1
);
$my_posts2 = get_posts($args2);

echo do_shortcode('[tabs style="boxed" id="searchTabs"]

   [tab title="Post Type 1"]
        <?php //This code is for first post type
        foreach( $myposts as $post ) :  setup_postdata($post); ?>

            <li><a>"><?php the_title(); ?></a></li>

        <?php endforeach; ?>
   [/tab]

   [tab title="Post Type 2"]
       <?php //This code is for second post type
       foreach( $myposts2 as $post ) :  setup_postdata($post); ?>

            <li><a>"><?php the_title(); ?></a></li>

        <?php endforeach; ?>
   [/tab]

   [/tabs]');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:37:45.290

编辑：对不起 - 现在明白了。

在每个选项卡中使用不同的循环。

第一个标签：

```
<?php 
global $post; 
rewind_posts();
$query = new WP_Query(array(
 'posts_per_page' => -1,
));
while ($query->have_posts()) : $query->the_post(); 
?>

<!-- YOUR OUTPUT CODE HERE -->

<?php 
endwhile; 
wp_reset_postdata();
?> 
```

每个其他选项卡将具有相同的循环，但在查询中添加了一个参数

```
<?php 
global $post; 
rewind_posts();
$query = new WP_Query(array(
 'posts_per_page' => -1,
 'post_type' => 'post_type_name',
));
while ($query->have_posts()) : $query->the_post(); 
?>

<!-- YOUR OUTPUT CODE HERE -->

<?php 
endwhile; 
wp_reset_postdata();
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-10T17:40:09.050

我会使用 jQuery 来实现这一点，不确定是否每个人都同意，但我已经尝试过了，它对我有用。

当 Wordpress 显示搜索结果时，每个都有一个反映帖子类型的类名，例如

```
<article class="page type-page ....">blah blah blah</article> 
```

对于（所有结果选项卡），您可以将 jQuery 与以下内容一起使用：

```
$('.search-results .type-page').clone('.tab1'); 
```

首先运行上述函数，以便将所有结果的副本克隆到第一个选项卡中。至于其他选项卡，您可以使用以下方法开始剪切并粘贴适当的部分：

```
$('.search-results .type-page').appendTo('.tab2'); 
```

由于您使用的是选项卡的简码，因此请确保检查生成的选项卡代码并为每个选项卡获取正确的类名以替换上面的 ('.tab1') 和/或 ('.tab2')。您可以在 $document.ready 上运行该函数，它应该可以工作。让我知道我是否不太清楚或完全错误..

我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-02T15:49:24.960

这对我有用。它是一个选项卡中 2 种帖子类型的代码，我还有另外两个选项卡在 'post_type' => 数组（'post'，'aktualnosci'）行更改内容

```
 <?php
      $args = array(
        'orderby' => 'rand',
        's' => $s,
        'post_type' => array ( 'post', 'aktualnosci')
      );
      query_posts($args);
      if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

          <div class="col-xs-12 col-sm-6 col-md-4">
              <a href="<?php the_permalink() ?>">
                  <?php the_post_thumbnail('post-thumbnail', array( 'class' => "img-responsive"));?>
                  <div class="caption">
                      <span class="ilabel">
                      <?php 
                      if ( get_post_type() == 'post' )  {
                        echo 'Oferta';
                      }
                      else {
                        echo 'Aktualności';
                      }
                      ; ?>
                      </span>
                      <h1><?php the_title(); ?></h1>
                      <p>
                        <?php //first sentence excerpt only
                        $strings = preg_split('/(\.|!|\?)\s/', strip_tags($post->post_content), 2, PREG_SPLIT_DELIM_CAPTURE);
                        echo apply_filters('the_content', $strings[0] .  $strings[1]);?>
                      </p>
                  </div>
              </a>
          </div>
      <?php 
```

# sencha-touch - 如何在sencha touch中进行轮播图像捏合捏出（放大缩小）

> ID：11448873
> 
> 赞同：1
> 
> 时间：2012-07-12T09:31:05.597
> 
> 标签：sencha-touch, extjs, sencha-touch-2, zooming

我的应用程序中有轮播，这个应用程序是通过使用 sencha touch2 完成的。根据我的要求，我必须对***轮播图像执行捏合捏出（放大缩小）功能***。我可以在 sencha touch2 中实现这个吗？如果是，该怎么做。我已经搜索过，但我没有得到有关此轮播图像放大缩小的信息。任何人都可以告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T23:03:07.120

Sencha Touch 2 目前没有内置的 pinch-zoom 功能，但是你可以使用这些事件：**pinchstart** , **pinch**和**pinchend** from`Ext.dom.Element`

假设你有一个容器，里面有一个图像：

```
var c = Ext.create('Ext.Container',{...}); 
```

您可以向其添加侦听器以检测捏合事件：

```
 c.element.on('pinchstart',function(e){
    //...
  },this);

  c.element.on('pinch',function(e){
    //...
  },this);

  c.element.on('pinchend',function(){
    //...
  }, this); 
```

我已经设法让一些工作，但它还不是很好

[演示](http://titouanvanbelle.fr/GitHub/Sencha/Ext.ux.STCrop/)-[代码](http://titouanvanbelle.fr/GitHub/Sencha/Ext.ux.STCrop/ux/STCrop.js)

希望这可以帮助

# ruby-on-rails-3 - Rails 控制器生命周期

> ID：11448874
> 
> 赞同：20
> 
> 时间：2012-07-12T09:31:06.150
> 
> 标签：ruby-on-rails-3

我想了解一下rails中的对象生命周期，我可以指望每个请求的新实例吗？说每个Web请求都会创建一个新的控制器实例是真的吗？（默认情况下）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-05T20:40:06.220

是的，您可以依赖每个请求一个新的控制器实例。

[导轨指南：](http://guides.rubyonrails.org/action_controller_overview.html)

> 当您的应用程序收到请求时，路由将确定要运行哪个控制器和动作，然后 Rails 创建该控制器的一个实例并运行与动作同名的方法。

# java - 如何调用servlet？

> ID：11448877
> 
> 赞同：0
> 
> 时间：2012-07-12T09:31:08.537
> 
> 标签：java, servlets

我在jsp中有一个注销链接，我像这样调用注销函数

```
function logout(){
    document.getElementById("functiontype").value="logout";
    document.forms["frmTempcard"].submit();               
} 
```

我这样称呼它： `<li><a href="#" onclick="logout()">Logout</a></li>`

当我点击链接时，我看到以下网址：`http://localhost:8080/acct/notifier[the jsp file is there in this folder only ]/TempCardServlet`

当我删除 url 中的文件夹名称时，它工作正常。那么如何重定向到所需的servlet？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:40:14.320

你应该看看`action`表单的属性，根据你分享的代码和问题描述，我觉得你需要更新`action`你的表单。

目前，您会给出`action='TempCardServlet'`这意味着提交请求以`TempCardServlet`驻留在与当前 JSP 页面相同的 URL 中。这是相对路径参考。

当您指定时`action='SomePath'`，浏览器将请求提交到`http://server/currenturl/SomePath`. 如果您需要提交请求的路径不在当前路径中，则您需要通过以下方式指定相对路径或绝对路径：

相对路径（在您的情况下）：`action='../TempCardServlet'`- 不建议使用此方法，因为相对路径可能会破坏您的应用程序

带有应用程序上下文的绝对路径：`action='/acct/TempCardServlet'`- 这将引用同一服务器上的 servlet，这样做的缺点是您对应用程序上下文进行了硬编码。为了克服这个问题，您可以使用 Servlet API 获取当前应用程序上下文并将其附加到您的 servlet 路径 - 您还可以使用标准标记库来获取附加的上下文路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:37:09.453

使`action`表单的属性指向适当的 URL：

```
<form action="<c:url value='/TempCardServlet'/>" ...> 
```

如果您需要动态更改它，请将其添加到您的 JS 代码中（当然是在提交之前）：

```
document.forms["frmTempcard"].action = "<c:url value='/TempCardServlet'/>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:41:55.883

这：
`<a href="/myWebApp/servlets/logout">Logout</a>`

...调用您自己的 servlet 映射如下：

```
@WebServlet(name="logout", urlPatterns={ "/servlets/logout" })
public class LogoutServlet extends HttpServlet {
    ...
} 
```

...您在其中执行注销逻辑。

# java - WebView中的Android方向更改

> ID：11448880
> 
> 赞同：1
> 
> 时间：2012-07-12T09:31:13.930
> 
> 标签：java, android

我正在使用以下代码停止重新加载网页

```
public class MainActivity extends Activity {

WebView webView;

@Override

protected void onSaveInstanceState(Bundle outState) {

    WebView webView1 = (WebView)findViewById(R.id.webView);
     webView1.saveState(outState);

}    

@SuppressLint("SetJavaScriptEnabled")
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    webView = (WebView)findViewById(R.id.webView);

    String url="http://www.google.com";

             if (savedInstanceState != null)
                        {
                 ((WebView)findViewById(R.id.webView)).restoreState(savedInstanceState);
                        }
             else{

             webView.setWebViewClient(new WebViewClient() {

        public void onPageFinished(WebView view, String url) {

            String name = MainActivity.this.webView.getTitle();
            TextView t=(TextView)findViewById(R.id.title); 

            t.setText(name);
            Toast.makeText(getApplicationContext(), name, Toast.LENGTH_SHORT).show();

        }
    });

    final Activity activity = this;

    final ProgressDialog progressDialog = new ProgressDialog(activity);
    progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    progressDialog.setMessage("Loading...");
    progressDialog.setCancelable(false);

    final ProgressBar progressBar = (ProgressBar)findViewById(R.id.progressBar1);

    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setDomStorageEnabled(true);
    webView.getSettings().setUserAgentString("Android");
    webView.setWebChromeClient(new WebChromeClient()
    {
         public void onProgressChanged(WebView view, int progress) {

                progressBar.setVisibility(View.VISIBLE);
                progressDialog.setProgress(0);
                activity.setProgress(progress * 1000);

                progressDialog.incrementProgressBy(progress);

                if(progress > 75)
                    progressBar.setVisibility(View.GONE);
            }
    }
            );

    webView.loadUrl(url);

             } 
```

并`android:configChanges="orientation|keyboard|keyboardHidden"`在我的清单文件中使用

但是当我运行它并改变手机的方向时。

页面仍然会重新加载，进度条开始显示并且永远不会关闭。

谁能告诉我这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:35:40.603

默认情况下，活动会在方向更改时重新创建。但是您可以通过`android:configChanges="keyboardHidden|orientation`在 AndroidManifest.xml 中设置您的活动声明并覆盖`onConfigurationChanged()`活动类的方法来更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:45:24.630

把它放在你的清单活动中

```
android:configChanges="keyboardHidden|orientation" 
```

它对我有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-06T07:52:21.690

请在清单中添加 screenSize android:configChanges="orientation|keyboard|screenSize"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-16T02:22:49.763

试试这个

**在活动标签中，清单**

```
android:screenOrientation="sensor"
        android:configChanges="keyboardHidden|orientation|screenSize" 
```

**爪哇**

```
@Override
 public void onConfigurationChanged(Configuration newConfig) {
 super.onConfigurationChanged(newConfig);
 // We do nothing here. We're only handling this to keep orientation
 // or keyboard hiding from causing the WebView activity to restart.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T09:34:38.707

您需要在清单文件中为 Activity 使用 configChanges 属性。因此，在您的清单文件中为每个活动使用以下代码。

```
<activity android:name=".YOUR_ACTIVITY_NAME" android:configChanges="orientation|keyboard|keyboardHidden"/> 
```

当您不使用 configChanges`onCreate()`时，当设备方向更改或其他配置更改时再次调用该方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-15T06:56:20.553

在我的代码中 WebView 在片段中：

在清单中：

```
<activity 
...
android:configChanges="orientation|keyboard|screenSize"
... /> 
```

活动中：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
} 
```

在片段中：

```
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    webView.saveState(outState);
}
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    if (savedInstanceState == null)
        webView.loadUrl("about:blank");
    else
        webView.restoreState(savedInstanceState);
} 
```

当方向改变时，它会平滑地改变。

# bash - bash脚本按文件夹名称删除日期文件夹

> ID：11448885
> 
> 赞同：1
> 
> 时间：2012-07-12T09:31:18.643
> 
> 标签：bash

我有一个脚本，可以在当前日期之前在备份文件夹中创建文件夹。该脚本每天通过 cron 运行一次。

有没有办法通过文件夹名称删除超过 3 天的文件夹？就像是

日期-3？

有效的脚本：感谢 Jo So。此脚本按日期创建文件夹。压缩文件以进行备份，将它们粘贴在您的备份目录中并清除超过 3 天的备份 :-)

```
 #!/bin/bash

    cd /home/backups

    mkdir $(date +%Y-%m-%d)

    cd /opt/

    tar -pczf /home/backups/$(date +%Y-%m-%d)/opt.tar.gz code

    cd /var/

    tar -pczf /home/backups/$(date +%Y-%m-%d)/var.tar.gz work

cd /home/backups/
threedaysago=`date -d "3 days ago" +%Y%m%d`

for backup in [0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]
do
    backupdate=`echo "$backup" | tr -d -`   # remove dashes

    if test "$backupdate" -lt "$threedaysago"
    then
        rm -rf "$backup"
    fi
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:33:25.003

```
threedaysago=`date -d "3 days ago" +%Y%m%d`

for backup in [0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]
do
    backupdate=`echo "$backup" | tr -d -`   # remove dashes

    if test "$backupdate" -lt "$threedaysago"
    then
        rm -rf "$backup"
    fi
done 
```

独立于 mtime 工作，我可以告诉你它不会在特别奇怪的极端情况下崩溃；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:39:31.710

删除超过 3 天的每日备份（“常规文件”类型）：

```
rm -f `find $YOUR_BACKUP_DIR -maxdepth 1 -type f -mtime +3` 
```

从`find`手册页：

> ```
>  -mtime n
>           File's data was last modified n*24 hours ago.  See the  comments
>           for -atime to understand how rounding affects the interpretation
>           of file modification times. 
> ```

# php - PayPal Pro 托管解决方案和 3D 安全卡

> ID：11448886
> 
> 赞同：1
> 
> 时间：2012-07-12T09:31:33.180
> 
> 标签：php, paypal, e-commerce, paypal-sandbox, website-payment-pro

我目前正在将 PayPal Pro 托管解决方案 iFrame 版本集成到电子商务解决方案中。

使用 PayPal 沙箱，我可以很好地处理测试 Visa 和 MasterCard 交易，但我的 UK Maestro 交易总是被拒绝，并显示错误消息：“无法处理此交易。请用另一张卡付款。

这是我的表单，它调用 iframe：

```
<form target="hss_iframe" name="form_iframe" method="post" action="https://securepayments.sandbox.paypal.com/acquiringweb">    

<!-- paypal details -->
<input type="hidden" name="cmd" value="_hosted-payment">
<input type="hidden" name="business" value="XXXXXXXX">
<input type="hidden" name="paymentaction" value="sale">
<input type="hidden" name="template" value="templateD">
<input type="hidden" name="lc" value="EN">
<input type="hidden" name="return" value="https://www.mywebsite.co.uk/paypal_pro_return.php">
<input type="hidden" name="invoice" value="7783">

<!-- customer details -->
<input type="hidden" name="buyer_email" value="email@foo.com">
<input type="hidden" name="night_phone_b" value="07870 XXXXXX">
<input type="hidden" name="billing_first_name" value="Horatio">
<input type="hidden" name="billing_last_name" value="Doodlebug">
<input type="hidden" name="billing_address1" value="Blah">
<input type="hidden" name="billing_city" value="Blah">
<input type="hidden" name="billing_country" value="GB">
<input type="hidden" name="billing_state" value="Foo">
<input type="hidden" name="billing_zip" value="XXX XXX">

<!-- transaction details -->
<input type="hidden" name="currency_code" value="GBP">
<input type="hidden" name="subtotal" value="2,000.00"> 
```

我的表单中是否遗漏了导致 3D 安全卡交易失败的任何内容，或者 3D 安全卡本身无法在沙盒中进行测试？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:04:33.610

没错；Maestro 卡需要 3D Secure 身份验证，您目前无法在 PayPal Sandbox 中使用 Website Payments Pro Hosted Solution 产品测试 3D Secure 身份验证。

# c++ - 如何在 Qt for Symbian 中禁用外部警告？

> ID：11448897
> 
> 赞同：1
> 
> 时间：2012-07-12T09:32:16.300
> 
> 标签：c++, qt, symbian, qt-creator

**简短的问题：**`#pragma warning(push, 0)`是否存在与and等价的 gcce `#pragma warning(pop)`？

**长问题**：在 Qt Creator 中构建 Symbian 项目时，是否有一种“简洁”的方式来禁用 Symbian SDK 中包含的警告？即使是一个小的 hello world 项目也会产生很多，更不用说更大、更严肃的项目了。

我听说过为 SDK 打补丁，而这正是我试图避免的——这可能对一个开发人员、一个 SDK 项目有好处，但就我而言，有一个开发人员团队，每个开发人员都为多个 Symbian 平台编码。

在桌面应用程序中，我们曾经在提到的`#pragma warning(push, 0)`和中包含外部标头`#pragma warning(pop)`，但我在 gcce 中找不到任何类似的东西。

# asp.net-mvc-3 - System.Data.Entity.dll 中出现“System.Data.OptimisticConcurrencyException”类型的第一次机会异常

> ID：11448903
> 
> 赞同：0
> 
> 时间：2012-07-12T09:32:43.627
> 
> 标签：asp.net-mvc-3, sql-server-2008

下午好，完全被这个难住了。在我向数据库中添加更多记录之前，一切都很好。

按编辑我得到这个错误：

System.Data.Entity.dll 中出现“System.Data.OptimisticConcurrencyException”类型的第一次机会异常

我的代码如下：

```
 public ActionResult Edit(int id)
    {
        Time time = db.Times.Single(t => t.index == id);
        return View(time);
    }

    //
    // POST: /Default1/Edit/5

    [HttpPost]
    public ActionResult Edit(Time time)
    {
        System.Diagnostics.Debug.WriteLine("HERE");
        if (ModelState.IsValid)
        {
            db.Times.Attach(time);
            db.ObjectStateManager.ChangeObjectState(time, EntityState.Modified);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(time);
    } 
```

我已经很久没有编程 MVC 了，所以欢迎外行术语！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:05:42.733

我已经开始了一个新项目并从控制器等复制了整个代码，它似乎已经奏效了。

我认为我遇到的主要问题是使用主键等对模型进行了太多更改，这基本上是我的错。

需要更好的数据库架构！！！！

# c - 设置堆页的 PG_Referenced 位的内核函数

> ID：11448907
> 
> 赞同：1
> 
> 时间：2012-07-12T09:32:54.650
> 
> 标签：c, memory-management, linux-kernel

我有一个如下所示的小型 C 应用程序。它执行以下操作：

1.  分配两页堆内存。

2.  清除`PG_referenced`堆页 ( ) 的引用位 ( `echo 1 > /proc/pid/clear_refs`)。

3.  再次写入堆分配的页面。

4.  写操作后检查引用位是否在页面中设置。( `cat /proc/pid/smaps`) *我发现它正在设置。*

5.  重复步骤 2 到 4 以验证正确性。

因此，从这个练习中，我了解到每当我对堆页进行写入时，该`PG_referenced`位都会被设置，并且每当我使用`/proc/pid/clear_ref`它清除它时，它都会被清除。

**所以我查看了内核代码以找出哪个内核函数正在设置该`PG_referenced`位。我以为`mark_page_accessed()`是`mm/swap.c`. 但是在搜索之后，我发现其他一些功能是`PG_referenced`为每次写入设置页面的位，如果我在写入之前清除它的话。**

**所以，请有人帮我找出是哪个内核函数在做这个？**

我正在写下我用于测试的应用程序：

```
 ptr_obj = malloc(2*4096);

    while(1){
            /* clear all page refernces  */
            sprintf(buffer,"echo 1 > /proc/%d/clear_refs ",pid);
            system(buffer);

            /* move smaps to a file */
            sprintf(buffer,"cat /proc/%d/smaps > temp_before.%d",pid,count);
            system(buffer);

            /* do a  write to malloc addr */

            ptr_obj[1] = 12;;
            ptr_obj[6000] = 12;;

            /* move update smaps to file **/
            sprintf(buffer,"cat /proc/%d/smaps > temp_after.%d",pid,count);
            system(buffer);
            count ++;

            sleep(30);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:53:30.170

/proc/pid/smaps 的“已引用”表示当前标记为已引用或已访问的内存量。它包括页标志的 PG_referenced 和 MMU 在页表条目中设置的 ACCESSED_BIT。/proc/pid/smaps 的代码：

```
static void smaps_pte_entry(
    ......
        /* Accumulate the size in pages that have been accessed. */
        if (pte_young(ptent) || PageReferenced(page))
            mss->referenced += ptent_size; 
```

`pte_young()`X86 测试 PTE 的 ACCESSED_BIT。当您的代码写入堆时，该位由 MMU 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T10:16:22.260

Dhyan，如果您*要问*如何查找已写入的页面（未访问，包括读取和写入），那么您应该查看`soft dirty bit`.

所以，而不是`1`，写`4`在`clear_prefs`。

查看官方 linux 文档： [https ://www.kernel.org/doc/Documentation/vm/soft-dirty.txt](https://www.kernel.org/doc/Documentation/vm/soft-dirty.txt)

*你问的是，实际上是 2 年前。

# javascript - window.print() 适用于除一个以外的 url

> ID：11448910
> 
> 赞同：2
> 
> 时间：2012-07-12T09:33:04.017
> 
> 标签：javascript, printing, window

这些链接（iframe src）有什么区别？window.print() 适用于

```
var myWindow=window.open('','','fullscreen=yes');
myWindow.document.write("<iframe src=\"http://stackoverflow.com/questions/11447382/window-print-does-not-take-the-current-url\" width=\"100%\" height=\"100%\"></iframe>");
myWindow.document.write('<iframe src="' + url + '" width="100%" height="100%"></iframe>');myWindow.document.close();                            
myWindow.focus();
myWindow.print(); 
```

但不适用于

```
myWindow.document.write("<iframe src=\"http://localhost:8080/hiringsteps/docs/Keneth _1340800082258/Keneth _resume_1340800082258.pdf\" width=\"100%\" height=\"100%\"></iframe>"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:33:57.457

该文件是 PDF 文件，而不是 HTML 文件。

# c# - 信号R。HubConnection 客户端方法不是从服务器调用的

> ID：11448911
> 
> 赞同：1
> 
> 时间：2012-07-12T09:33:04.957
> 
> 标签：c#, signalr

有谁能帮我理解

以下代码有什么问题，即未使用 SignalR 从服务器方法调用客户端方法。

单击广播按钮时，我可以调用客户端方法。当我从控制台应用程序运行 selfInvoke 代码时，也会触发该事件。

服务器类驻留在不同程序集中的 CustomEvent 处理程序中。

聊天中心的代码如下：

```
namespace MySample.Handler
{
    [HubName("chat")] 
    public class Chat: Hub
    {
        public void Send(string message)
        {
            Clients.addMessage(message);
            // I tried this code as well:
            // IHubContext context = GlobalHost.ConnectionManager.GetHubContext<Chat>();
           // context.Clients.addMessage("Hello world");
        }
    }
} 
```

调用聊天中心的源码如下：

```
namespace MySample.Handler
{
    public static class SelfInvoke
    {
        public static void OnEvent()
        {
            var hubConnection = new HubConnection("http://localhost:48994");
            var chat = hubConnection.CreateProxy("chat");
            hubConnection.Start().Wait();
            string message1 = "Hai from OnEvent Handler!!!";
            chat.Invoke("Send", message1).Wait();
        }
    }
} 
```

索引.aspx

```
 <script src="Scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.signalR-0.5.2.min.js" type="text/javascript"></script>
    <script src="/signalr/hubs" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
          var chat = $.connection.chat;

          chat.addMessage = function (message) {
              $('#messages').append('<li>' + message + '</li>');
          };

          $("#broadcast").click(function () {
              chat.send($('#msg').val());
          });
          $.connection.hub.start();
        });
    </script>
  <input type="text" id="msg" />
  <input type="button" id="broadcast" value="broadcast" />
  <ul id="messages">
  </ul> 
```

index.aspx.cs [代码背后的代码..]

```
 protected void Page_Load(object sender, EventArgs e)
   {
        SelfInvoke.OnEvent();
   } 
```

非常感谢任何帮助。

问候文斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:34:40.817

更改您的 JavaScript 客户端函数定义，使它们：

`chat.client.XXX = function ...`

代替：

`chat.XXX = function ...`

此外，将您对服务器的调用更改为：

`chat.server.send($('#msg').val());`

代替：

`chat.send($('#msg').val());`

# android - 选择器设置的 ListView 的 TextViews 中的文本颜色仅在“正常”状态下有效

> ID：11448914
> 
> 赞同：1
> 
> 时间：2012-07-12T09:33:09.280
> 
> 标签：android

我创建了 ListView 和我自己的 ListAdapter。我使用 simple_list_item_2。我想更改每个状态的文本颜色。下面有dark.xml的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">  
    <item android:state_selected="true" android:color="@color/selectedTextListColor"/>
    <item android:state_focused="true" android:color="@color/selectedTextListColor"/>
    <item android:state_pressed="true" android:color="@color/selectedTextListColor"/>
    <item android:color="@color/textListColor"/>
</selector> 
```

接下来，当我尝试设置该功能时，它是代码的一部分。我认为有问题。

```
ArrayAdapter<Element> adapter = new ArrayAdapter<Element>(instance, android.R.layout.simple_list_item_2, songsArray){

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        TwoLineListItem row;

        if (convertView == null) {
             LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
             row = (TwoLineListItem)inflater.inflate(android.R.layout.simple_list_item_2, null);

             } else {                               
             row = (TwoLineListItem)convertView;

                        }

        Element song = songsArray[position];
        String data = song.text();

        int dashIndex = data.indexOf("-");

        TextView text2 = row.getText2();
        text2.setText(data.substring(0, dashIndex-1).trim());
        text2.setTextSize(12.0f);
        text2.setPadding(10, text2.getPaddingTop(), text2.getPaddingRight(), text2.getPaddingBottom());

        TextView text1 = row.getText1();
        text1.setText(data.substring(dashIndex+1).trim());                          
        text1.setTextSize(18.0f);
        text1.setPadding(10, text1.getPaddingTop(), text1.getPaddingRight(), text1.getPaddingBottom());

        text1.setTextColor(getResources().getColor(R.color.dark));                  

        return row;
    }

}; 
```

它仍然以这种方式工作，文本颜色为红色，并且在印刷时没有改变。你能告诉正确的方法吗？线上注意

```
text1.setTextColor(getResources().getColor(R.color.dark)); 
```

我认为这是我的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:33:20.873

```
text1.setTextColor(getResources().getColorStateList(R.color.dark)); 
```

那是我的问题。现在效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:37:19.230

强制里面的状态`onListItemClik()`。例如：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    v.setSelected(true);

} 
```

# java - 使用 xml 输出器创建 xml 文件时的异常

> ID：11448916
> 
> 赞同：1
> 
> 时间：2012-07-12T09:33:18.927
> 
> 标签：java, xml

这是我的简单代码：

```
try
                {
                    Element performances = new Element("performances");
                    Document doc = new Document(performances);
                    doc.setRootElement(performances);

                    performances.setAttribute(new Attribute("date", dateFormat.format(cal.getTime())));

                    Element uptime = new Element("uptime");
                    uptime.addContent(new Element("days").setText(new Long(duptime).toString()));
                    uptime.addContent(new Element("hours").setText(new Long(huptime).toString()));
                    uptime.addContent(new Element("minutes").setText(new Long(muptime).toString()));
                    uptime.addContent(new Element("seconds").setText(new Long(suptime).toString()));

                    doc.getRootElement().addContent(uptime);

                    XMLOutputter xmlOutput = new XMLOutputter();

                    xmlOutput.setFormat(Format.getPrettyFormat());
                    xmlOutput.output(doc, new FileWriter("/homa/mazzy/Scrivania/perfor_"+dateFormat.format(cal.getTime())+"xml")); 
```

我得到了这个例外

```
Exception in thread "AWT-EventQueue-0" org.jdom2.IllegalAddException: The element "performances" could not be added as the root of the document: The Content already has an existing parent document 
```

但我不知道这是什么意思。错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:36:26.257

这两行

```
Document doc = new Document(performances);
doc.setRootElement(performances); 
```

导致错误。第一个设置了根，第二个又死了它。

**编辑**

做

```
Document doc = new Document()
doc.setRootElement(performances) 
```

或者

```
Document doc = new Document(performances) 
```

# android - 活动不显示

> ID：11448917
> 
> 赞同：0
> 
> 时间：2012-07-12T09:33:19.697
> 
> 标签：android, android-layout, android-intent, android-activity

我创建了一个创建通知的广播接收器，通过单击一个通知启动了一个活动，该活动正在启动但我无法查看它，我正在使用以下代码：

```
private NotificationManager notificationManager;
    @Override
public void onReceive(Context context, Intent intent) {
    if (notificationManager == null) {
        notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
    }
    NotificationCompat.Builder builder = new NotificationCompat.Builder(context)
            .setTicker("Its Ticker")
            .setSmallIcon(R.drawable.ic_launcher)
            .setContentTitle("Notification Title")
            .setContentText("Its Content")
            .setAutoCancel(true)
            .setContentIntent(PendingIntent.getActivity(context,0,new Intent(context, NotificationDialog.class).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK),0));
    notificationManager.notify("interstitial_tag", 0, builder.getNotification());

} 
```

注意：`NotificationDialog.java`是我的活动，此活动在我调试但未查看时正在运行。尝试了几个小时但找不到任何答案，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:25:52.813

使用**FLAG_ACTIVITY_CLEAR_TOP**而不是**FLAG_ACTIVITY_CLEAR_TASK**

```
private NotificationManager notificationManager;
    @Override
public void onReceive(Context context, Intent intent) {
    if (notificationManager == null) {
        notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
    }
    NotificationCompat.Builder builder = new NotificationCompat.Builder(context)
            .setTicker("Its Ticker")
            .setSmallIcon(R.drawable.ic_launcher)
            .setContentTitle("Notification Title")
            .setContentText("Its Content")
            .setAutoCancel(true)
            .setContentIntent(PendingIntent.getActivity(context,0,new Intent(context, NotificationDialog.class).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP),0));
    notificationManager.notify("interstitial_tag", 0, builder.getNotification());

} 
```

# eclipse - 使用 Eclipse 身份验证的 Team Explorer Everywhere

> ID：11448922
> 
> 赞同：5
> 
> 时间：2012-07-12T09:33:35.800
> 
> 标签：eclipse, tfs, team-explorer-everywhere

我在 Eclipse 中使用 Team Explorer Everywhere。当我尝试签入我的更改时，我收到以下错误：

> 访问被拒绝连接到 TFS 服务器 myServerAddress（身份验证为 myComputerName/myUser）

我尝试将 CrossPlatformCommandLine 工具与`tf profile`命令一起使用，但收到以下消息

> 发生参数错误：命令“配置文件”未知

如何管理我的凭据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T22:43:18.677

配置文件已从 Team Explorer Everywhere 2012 中删除。TEE 2012 中的身份验证如下：

1.  如果您在命令行上指定了凭据，则将使用这些凭据。

2.  如果您为 TFS 服务器指定了凭据，则将使用这些凭据。

    *   在 Windows 上，TEE 将使用凭据[管理器](http://windows.microsoft.com/en-IN/windows7/What-is-Credential-Manager)中的凭据。

    *   在 Mac OS 上，TEE 将使用钥匙串中的凭据。

    *   在其他 Unix 系统上，TEE 将使用文件`$HOME/.microsoft/Team Foundation/4.0/Configuration/TEE-Servers/Credentials.xml`.

3.  如果没有可用的存储密码，TEE 2012 将尝试使用您当前登录的用户凭据进行身份验证。

    *   在 Windows 上，如果您与 TFS 服务器在同一个域中，您的登录域与 TFS 服务器的域之间存在信任关系，或者如果您是在本地计算机上使用“影子帐户”和 TFS 服务器上的相应帐户。

    *   在 Unix 平台上，如果您有 Kerberos 票证，我们将尝试使用它进行身份验证（如果 TFS 服务器配置为支持协商身份验证。）

4.  如果您 TEE 无法确定您的登录用户凭据，系统将提示您输入用户名和密码，除非您已指定`-noprompt`命令行选项。

因此，如果 Team Explorer Everywhere 无法使用您的登录凭据进行身份验证，您可以通过将您的凭据添加到[Credential Manager](http://windows.microsoft.com/en-IN/windows7/What-is-Credential-Manager)来覆盖此行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:16:14.990

几天前，我下载了 TEE 的更新，并且知道一切正常。我没有进行任何其他更改。可能是以前的版本有问题。

# c# - 从数据库asp.net C#的查询中为gridview内的下拉列表设置ToolTip

> ID：11448924
> 
> 赞同：0
> 
> 时间：2012-07-12T09:33:41.863
> 
> 标签：c#, asp.net, textbox, tooltip

我正在用 C# 编写 asp.net 项目，但我遇到了一个小问题。

我在gridview中有一个下拉列表，它们最初都是从一个数据库中填充的，但是不同的表（不同的选择查询）。

我想从查询中为下拉列表设置工具提示，该查询用于通过以下代码填充 gridview(DataTable1)：

```
 <asp:TemplateField HeaderText="choose supervisor"  ItemStyle-Width="100px">
                 <ItemTemplate>                
                       <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="true"                 
 OnSelectedIndexChanged="ddlTest_SelectedIndexChanged"
 ToolTip =<%#((DataSet1.DataTable1Row)(((DataRowView)Container.DataItem).Row)).p_id %>>
                       </asp:DropDownList>
                  </ItemTemplate>                
            </asp:TemplateField> 
```

但是当我尝试运行该项目时，出现以下错误：

```
Object reference not set to an instance of an object. 
```

如果我尝试手动设置 Tooltip，例如：

```
ToolTip = "abc" 
```

该项目运行没有任何问题。

有人知道如何从数据库查询中为下拉列表设置工具提示吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:45:37.740

我会从 GridView 的[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)事件中做到这一点，该事件每次触发`GridViewRow`但仅在数据`GridView`绑定时触发。

```
protected void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    var grid = (GridView)sender;
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        DropDownList DropDownList1 = (DropDownList)e.Row.FindControl("DropDownList1");
        DataRowView drv = (DataRowView)e.Row.DataItem;
        DataSet ds = drv.Row.Table.DataSet;
        // i'm not 100% sure what you need here, for example:
        DropDownList1.ToolTip = drv.Row.Field<int>("p_id").ToString();
    }
} 
```

这更具可读性，更易于维护和调试。

# javascript - 如何从 HTML 中的图形中删除网址

> ID：11448925
> 
> 赞同：-13
> 
> 时间：2012-07-12T09:33:44.783
> 
> 标签：javascript, html, amcharts

我正在用 HTML 创建一个图表。我正在使用 API amCharts，但问题是它在图表中显示了文本“amchart”。

如何删除该文本以使其看起来不错？

```
<html>

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Charts</title>
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="amcharts.js" type="text/javascript"></script>
    <script type="text/javascript">
    var chart;
    var chartData = [{
      country: "USA",
      visits: 400,
      color: "#FF0F00"
    }, {
      country: "China",
      visits: 380,
      color: "#FF6600"
    }, {
      country: "Japan",
      visits: 360,
      color: "#FF9E01"
    }, {
      country: "Germany",
      visits: 340,
      color: "#FCD202"
    }, {
      country: "UK",
      visits: 320,
      color: "#F8FF01"
    }, {
      country: "France",
      visits: 300,
      color: "#B0DE09"
    }, {
      country: "India",
      visits: 240,
      color: "#04D215"
    }, {
      country: "Spain",
      visits: 200,
      color: "#0D8ECF"
    }, {
      country: "Netherlands",
      visits: 140,
      color: "#0D52D1"
    }, {
      country: "Russia",
      visits: 100,
      color: "#2A0CD0"
    }, {
      country: "South Korea",
      visits: 80,
      color: "#8A0CCF"
    }, {
      country: "Canada",
      visits: 20,
      color: "#CD0D74"
    }];
    AmCharts.ready(function () {
      chart = new AmCharts.AmSerialChart();
      chart.dataProvider = chartData;
      chart.categoryField = "country";
      chart.startDuration = 1;
      // AXES
      // category
      var categoryAxis = chart.categoryAxis;
      categoryAxis.labelRotation = 45; // this line makes category values to be rotated
      categoryAxis.gridAlpha = 0;
      categoryAxis.fillAlpha = 1;
      categoryAxis.fillColor = "#FAFAFA";
      categoryAxis.gridPosition = "start";
      // value
      var valueAxis = new AmCharts.ValueAxis();
      valueAxis.dashLength = 5;
      valueAxis.title = "Visitors from country"
      valueAxis.axisAlpha = 0;
      chart.addValueAxis(valueAxis);
      // GRAPH
      var graph = new AmCharts.AmGraph();
      graph.valueField = "visits";
      graph.colorField = "color";
      graph.balloonText = "[[category]]: [[value]]";
      graph.type = "column";
      graph.lineAlpha = 0;
      graph.fillAlphas = 1;
      chart.addGraph(graph);
      // WRITE
      chart.write("chartdiv");
    });
    </script>
  </head>

  <body>
    <div id="chartdiv" style="width: 600px; height: 500px;"></div>
  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-12T09:36:04.400

从[产品网站](http://www.amcharts.com/download)：

> 您可以免费下载和使用所有 amCharts 产品。免费版的唯一限制是该网站的小链接将显示在图表的左上角。如果您想在没有此链接的情况下使用图表，或者您喜欢该软件并希望支持其创建者，请购买商业许可证。

所以你需要购买商业许可证...

# iphone - SimpleAudioEngine 需要时间来播放声音

> ID：11448935
> 
> 赞同：0
> 
> 时间：2012-07-12T09:34:09.857
> 
> 标签：iphone, ios, cocos2d-iphone, simpleaudioengine

我正在使用 SimpleAudioEngine 在我的 cocos2D 应用程序中播放声音。我有一种情况是在点击按钮时继续射击子弹，并在子弹被击中时播放声音。当我有时连续点击拍摄按钮时，游戏场景会抽搐。当我整合声音时，这开始发生。

这是我在按钮点击时使用的代码：

```
-(void)rocketButtonTapped:(id)sender
{
  [[SimpleAudioEngine sharedEngine] playEffect:@"rocket_fired.wav"];
  NSLog(@"Pencil Rocket");
  if(int_pencilRocketTagCount>=220)
  {
    int_pencilRocketTagCount=215;
  }
  [self performSelector:@selector(shootPencilRocket)];  
} 
```

请给我一个出路...提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:41:40.277

在游戏开始之前，请执行以下操作：

```
[[SimpleAudioEngine sharedEngine] preloadEffect:@"rocket_fired.wav"]; 
```

这会将效果加载到内存中。如果这不能解决问题，那么问题可能出在其他地方。例如，如果火箭发射声音长达几秒钟，则同时播放的音效过多，这可能是个问题。通过 NSLog 或 CCLOG 连续记录到调试控制台也很慢，很容易导致帧率下降。

它也可能有助于降低音质。22 甚至 11 kHz 的采样率足以产生（短）音效，44 kHz 是浪费的，因为它分别增加了 2 或 4 倍的内存使用量。如果效果文件使用立体声通道，请将其转换为单声道以将大小减半。效果使用的内存越少，播放它的硬件压力就越小。

# messagebox - 接收消息时的 wso2 carbon 消息框：无法获取用户的秘密

> ID：11448938
> 
> 赞同：0
> 
> 时间：2012-07-12T09:34:15.877
> 
> 标签：messagebox, wso2, amazon-sqs

我正在研究 WSO2 Carbon MessageBox(SQS) 以订阅队列，然后从消息框读取消息以进行批处理。

有一些有用的教程，例如：

[http://wso2.org/project/message-broker/1.0.2/docs/samples/messagebox_as_event_sink.html](http://wso2.org/project/message-broker/1.0.2/docs/samples/messagebox_as_event_sink.html)

当尝试连接到本地 WSO2 ESB 实例上的 MessageBox 时，它们工作成功。

但是，当从远程 WSO2 实例上具有相同配置的 MessageBox 接收消息时，它会失败。

这些是 WSO2 ESB 上的日志消息。

身份验证看起来`"ReceiveMessage"`没问题（第二条日志消息），但是请求在`AuthenticationHandler`.

> ```
> TID: [] [WSO2 ESB] [2012-07-12 09:49:19,597] ERROR {org.apache.axis2.engine.AxisEngine} - Failed to get secret id of user 
> ```
> 
> 41ca9541e96​​a077766d2 {org.apache.axis2.engine.AxisEngine}org.apache.axis2.AxisFault：无法在 org.wso2.carbon.messagebox.sqs.internal.module.AuthenticationHandler.invoke(AuthenticationHandler.java 获取用户 41ca9541e96​​a077766d2 的秘密 ID :80) 在 org.apache.axis2.engine.Phase.invoke(Phase.java:313) 在 org.apache.axis2.engine 的 org.apache.axis2.engine.Phase.invokeHandler(Phase.java:340)。 AxisEngine.invoke(AxisEngine.java:262) 在 org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:168) 在 org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)在 org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146) 在 org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199) 在 javax.servlet.http.HttpServlet .service(HttpServlet.java:641) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90) 在 org.eclipse.equinox.http .servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111) 在 org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67) 在 javax.servlet.http.HttpServlet.service(HttpServlet .java:722) 在 org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.apache.catalina.core。 ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240) 在 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462) 在 org.apache.catalina.core 的 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164) .StandardHostValve.invoke(StandardHostValve.java:164) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100) at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154) at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254) at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563) at org.apache.catalina.core.StandardEngineValve.invoke (StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399) 在 org.apache.coyote.http11.Http11NioProcessor。在 org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:第 1534 章.java:662)第908章）第908章）
> 
> ```
>  TID: [] [WSO2 ESB] [2012-07-12 09:49:19,401] INFO {org.wso2.carbon.core.services.util.CarbonAuthenticationUtil} - 
> ```
> 
> 'admin' 从 IP 地址 {org.wso2.carbon.core.services.util.CarbonAuthenticationUtil 在 [2012-07-12 09:49:19,0401] 登录

我做错了什么还是需要做一些特定的配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:24:21.137

如果您的消息框位于远程机器上，那么您的 http 请求应具有 SQS 规范指定的身份验证标头。这似乎您没有发送带有用户名和秘密 ID 的有效请求。而且 sqs:// 也只能在本地环境中工作。

# c# - 根据所选项目标记 DataTemplate

> ID：11448939
> 
> 赞同：1
> 
> 时间：2012-07-12T09:34:18.177
> 
> 标签：c#, wpf, data-binding

我想根据 TreeView 中选择的项目类型使用不同的 DataTemplates

**XAML**

```
<TreeView Name="SourceDocumentsList" ItemsSource="{Binding SourceDocuments}">
    <TreeView.Resources>
        <HierarchicalDataTemplate DataType="{x:Type docom:Document}" ItemsSource="{Binding Blocks}">
            <TextBlock Text="{Binding Filename}" />
        </HierarchicalDataTemplate>
    </TreeView.Resources>
</TreeView>
<Label Name="DescriptionLabel"
       DataContext="{Binding ElementName=SourceDocumentsList, Path=SelectedItem}">
    <Label.Resources>
        <DataTemplate x:Key="DocumentTemplate" DataType="{x:Type docom:Document}">
            <TextBlock Text="{Binding Description}" />
        </DataTemplate>
    </Label.Resources>
</Label> 
```

据我了解，只有在 TreeView 中选择了 -type 项`Label`时才会显示该`Description`属性。`Document`不幸的是，事实并非如此。无论我在 TreeView 中选择什么，它都不会显示任何内容。

TreeView 本身适用于我现有的模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:09:35.730

您提供一个密钥，这意味着模板不能被隐式应用。

```
<Window x:Class="WpfApplication10.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication10"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <TreeView ItemsSource="{Binding}" Name="lst"/>
        <Label Grid.Row="1" Content="{Binding ElementName=lst, Path=SelectedItem}">
            <Label.Resources>
                <DataTemplate DataType="{x:Type local:Class1}">
                    <TextBox Text="{Binding Foo}"/>
                </DataTemplate>
            </Label.Resources>
        </Label>
    </Grid>
</Window> 
```

上面的代码就像一个魅力

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:38:32.790

您可以使用 DataTemplateSelector 类在运行时应用不同的数据模板。

[数据模板选择器](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)

# python - 如何计算与键关联的值的数量

> ID：11448949
> 
> 赞同：1
> 
> 时间：2012-07-12T09:35:03.417
> 
> 标签：python, dictionary, find, key

给定以下字典，我想找出哪个键的值最多。如果我有一个更长的字典并且想知道哪个键以编程方式具有最多的值（没有目视检查），我将如何去做呢？我能想到的唯一方法如下：

```
dic = {'attacks': ['kick','puch','slap','elbow'], \
  'defense': ['block','parry','dodge']} 
```

dic = {'攻击'：['踢'，'puch'，'slap'，'肘部']，'防御'：['block'，'parry'，'dodge']}

```
key_values_list = []
for key in dic:
    key_name = ''
    num = 0 
    for item in dic[key]:
        num +=1
    key_values_list.append((key,num))

for  k,v in key_values_list:
    print k,v 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T09:36:32.453

```
>>> dic = {'attacks': ['kick','puch','slap','elbow'], 'defense': ['block','parry','dodge']}
>>> max(dic, key=lambda k: len(dic[k]))
'attacks' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T09:39:58.013

以下代码将计算关键标记攻击的实例：

```
>>> max(((k, len(v)) for k, v in dic.items()), key=lambda x: x[1])
('attacks', 4)
>>> 
```

# objective-c - 将照片上传到 Instagram 后，控制权不会返回到应用程序

> ID：11448950
> 
> 赞同：6
> 
> 时间：2012-07-12T09:35:07.977
> 
> 标签：objective-c, ios, cocoa-touch, instagram

我对我的申请做了什么：

**实施的**

*   在我为 Instagram 集成编写代码的应用程序中，我成功打开 Instagram 并将图像上传到 Instagram 服务器。我还展示了上传的照片。

**问题**

*   通过 Instagram 集成（类似于 Facebook 集成）共享应用内图像后，控件不会返回到我的应用程序

通过 Instagram 分享照片后，是否可以将控制权返回给我的应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T04:55:38.627

一般来说，没有可靠的方法来告诉另一个应用程序在某个时间点打开你的应用程序。您通常希望的最好结果是说服应用程序尝试打开一个使用您在应用程序中注册的自定义架构的 URL。我浏览了[instagram API 文档](http://instagram.com/developer/)，唯一具有基于 URL 回调的机制似乎是身份验证（不是通过 post-auth 传递图像）。您可以更多地探索 API，看看您是否可以完全避免交接，但我没有看到任何关于实际代表用户发布照片的内容（似乎他们将这张照片留给自己）。

祝你好运！

# image - Symfony sfThumbnail 插件，具有 5 个同时上传

> ID：11448951
> 
> 赞同：0
> 
> 时间：2012-07-12T09:35:08.353
> 
> 标签：image, symfony1, upload, thumbnails

我有一个产品表单，用户可以同时上传 5 张图片。一切正常，但我正在尝试实现 sfThumbnail 插件，以便它同时创建每张图片的缩略图。下面的代码适用于 Picture1，但 Picture2、3、4 和 5 不适用。我试过弄乱代码，我不能让它单独处理每个文件。它仅以图片 2 的上传文件为例，并将其命名为与图片 1 相同。因此，当它运行时，我最终得到了 5 张上传图片，但只有 1 个缩略图与第一张图片的文件名。

我尝试复制代码 5 次并为每张图片自定义它，但我得到了相同的结果。

如果有更有效的方法，请告诉我。这正是我从插件文档中得到的。谢谢

```
if($this->isModified())
    {
      $uploadDir = sfConfig::get('sf_upload_dir');
      $thumbnail = new sfThumbnail(150, 150);
      $thumbnail->loadFile($uploadDir.'/car/'.$this->getPicture1());
      $thumbnail->save($uploadDir.'/car/thumbnail/'. $this->getPicture1());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:34:28.913

首先删除您的功能：

```
if($this->isModified())
    {
      $uploadDir = sfConfig::get('sf_upload_dir');
      $thumbnail = new sfThumbnail(150, 150);
      $thumbnail->loadFile($uploadDir.'/car/'.$this->getPicture1());
      $thumbnail->save($uploadDir.'/car/thumbnail/'. $this->getPicture1());
    } 
```

并在您的表单类中插入此函数：

```
protected function processUploadedFile($field, $filename = null, $values = null) {

          // prendo il file che è stato caricato
          $fn = parent::processUploadedFile( $field, $filename, $values );

          // se il file esiste ed
          if ( $fn != "" ) {

               try {

                  // array multidimensionale di tutte le tipologie di thumb esistenti
                  $thumbnails[] = array( 'dir' => 'ico',           'width' => 75,      'height' => 75 );
                  $thumbnails[] = array( 'dir' => 'small',      'width' => 150, 'height' => 150 );
                  $thumbnails[] = array( 'dir' => 'medium',      'width' => 400, 'height' => 400 );
                  $thumbnails[] = array( 'dir' => 'big',           'width' => 800, 'height' => 800 );

                  foreach ( $thumbnails as $thumbParam )
                  {
                    $currentFile = sfConfig::get( 'sf_upload_dir' ).'/destination_folder/'.$thumbParam[ 'dir' ].'/'. $fn;
                    if ( is_file( $currentFile ) ) unlink( $currentFile );
                  }

                  foreach ( $thumbnails as $thumbParam )
                  {
                      $thumbnail = new sfThumbnail( $thumbParam[ 'width' ], $thumbParam[ 'height' ], true, false );
                      $thumbnail->loadFile( sfConfig::get( 'sf_upload_dir' )."/destination_folder/original/".$fn );
                      $thumbnail->save( sfConfig::get( 'sf_upload_dir' ).'/destination_folder/'.$thumbParam[ 'dir' ].'/'.$fn, 'image/jpeg' );
                  }

               } catch( Exception $e ) {

               }
          }

          return $fn;
     } 
```

其中：
-`$thumbnails[]`数组包含您需要的所有文件夹，具有 ri 尺寸，因此您需要的所有拇指 - 您在创建之前需要`destination_folder`web/uploads 目录中创建文件夹之前

还记得调用命令

```
php symfony project:permissions 
```

此函数获取表单中的所有文件，并根据需要生成尽可能多的拇指

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:44:51.173

这对我有用：

```
if($this->isModified())
    {
      $uploadDir = sfConfig::get('sf_upload_dir');
      $thumbnail = new sfThumbnail(150, 150);
      if($this->getPicture1())
      {
        $thumbnail->loadFile($uploadDir.'/car/'.$this->getPicture1());
        $thumbnail->save($uploadDir.'/car/thumbnail/'. $this->getPicture1());
      }

      if($this->getPicture2())
      {
        $thumbnail->loadFile($uploadDir.'/car/'.$this->getPicture2());
        $thumbnail->save($uploadDir.'/car/thumbnail/'. $this->getPicture2());
      }

.. the rest of my the pictures
    } 
```

# mysql - SSD 上的 MySQL 基准测试：工具和策略

> ID：11448952
> 
> 赞同：4
> 
> 时间：2012-07-12T09:35:15.563
> 
> 标签：mysql, sql, database, linux

我目前正在将我的服务器从在硬盘驱动器上运行 MyISAM 切换到在 SSD 上运行 InnoDB。

我有一个**3,800,000 行 (16GB)**表作为基准表。

我的服务器设置：

*   Ubuntu 64 + Nginx + MySQL 5.5 + ...

我有两件事要进行非常多的测试：

*   从硬盘驱动器切换到 SSD 将如何影响并发性
*   从 MyISAM 切换到 InnoDB 将如何影响并发性

我对工具和策略都有疑问：

*   由于我对并发最感兴趣，**我应该使用哪些工具来进行测试？**我玩过**Siege**，我发现它真的很容易玩。但我认为应该有很多更强大的 linux 软件更适合我的需求。
*   **测试策略是什么样的？**我了解策略的选择可能与我选择使用的工具有密切的关系。例如，在玩 Siege 时，我需要编写一个 PHP 脚本来执行一些繁重的 MySQL 操作，将其上传到服务器，将脚本 URL 作为参数传递给 Siege（安装在我的本地笔记本电脑中）并让 Siege为我模拟并发流量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:44:04.103

在 Linux 中对 MySQL 存储性能进行基准测试时要记住的重要一点是缓存。我自己对同样的测试用例很好奇。当用户抱怨查询缓慢时，这总是很有趣。他们打电话给您并再次运行，却发现由于查询缓存，他们的 50 多分钟查询现在在 30 秒内完成。总是运行一个

```
mysql> reset query cache; 
```

在 MySQL 中尝试优化查询时。也就是说，将 SSD 与传统主轴进行比较时，还有一个步骤：磁盘缓存。当操作系统自己在内存中缓存磁盘时，很难比较访问时间或 IOps。要清除磁盘缓存，请从 shell 运行以下命令：

```
$ sync && sysctl -w vm.drop_caches=3 
```

这些命令在您的每个基准查询之前运行，将帮助您实现 SSD 与您拥有的 7k2 SATA 慢波相比的潜力。通过运行相同的查询两次而不刷新缓存并观察查询时间来验证这一点。此时，最好尝试一些带有和不带索引的查询，如果可能的话，还可以尝试一些连接。对每个查询使用 EXPLAIN PLAN 来验证是否使用了索引。索引和数据文件之间的随机读取访问将暴露较慢磁盘上的瓶颈。确保你的 my.cnf 在你的 SSD 基准和你的盘片之间是一致的。我在一个简单的桌面 OCZ SSD 上测试了一些东西，发现查询性能提高了大约 10 倍于我的 7200rpm SATA 磁盘。在基于 SSD 的事务数据库中，使用 OPTIMIZE TABLE 时我会小心，因为频繁的数据库压缩和 SSD TRIM 可能会影响磁盘寿命。不过这是理论上的，我还没有看到支持这一点的证据。

希望这可以帮助！我等不及磁性 HD 取代磁带作为备份介质并发现自己在大多数硬件中完全被 SSD 取代的日子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:46:27.963

SSD 的类型和质量有很大的不同。如果您的服务器繁忙，请勿将桌面 SATA SSD 用于 mysql。你不会得到你认为你会得到的性能提升。

这里有一些很棒的文章：[http ://www.mysqlperformanceblog.com/search/innodb+log+file+ssd/](http://www.mysqlperformanceblog.com/search/innodb+log+file+ssd/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:52:58.563

通用测试是可以的，但只有真正的负载会告诉你软件和硬件配置之间的区别。也许尝试：

1.  从生产服务器转储数据库
2.  从生产服务器捕获所有查询（使用慢查询日志，设置 long_query_time = 0）
3.  将数据库加载到测试配置中并在其上播放慢查询日志（使用 pt-log-player）。
4.  再次使用 long_query_time = 0 捕获来自测试服务器的所有查询。
5.  使用 pt-query-digest 分析慢查询日志的结果。

我在这里引用了[Percona Toolkit](http://www.percona.com/doc/percona-toolkit/2.1/) for MySQL 的工具（虽然有些工具可能需要 Percona Server，但我不确定）。

# c# - 在 C# 中生成 PDF 海报

> ID：11448955
> 
> 赞同：-1
> 
> 时间：2012-07-12T09:35:17.587
> 
> 标签：c#, pdf, poster

我需要根据模板自动生成 PDF 格式的海报。此 PDF 必须包含通过 Web 应用程序提供的自定义文本和图像。我知道您可以从字段添加到 PDF，然后用 iTextSharp（我使用 C#）之类的内容填充它们，但这些具有坚实的背景，因此不能覆盖在海报上。我试图在 OpenOffice 中创建一个透明的表单控件，但似乎不可能。任何人都可以提出满足此要求的方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:38:13.010

这可以使用 ITextsharp 来完成。它是一个非常强大的 PDF 库。将背景保存为 pdf 并将其加载到流中。然后您可以在加载的 pdf 上书写并返回海报。

```
 private PdfContentByte _pcb; 
Document document = new Document();

FileStream fileStream = new FileStream(filePath, FileMode.Open, FileAccess.Read);
PdfReader Mypdfreader= new PdfReader(fileStream);
 PdfTemplate background = writer.GetImportedPage(Mypdfreader, 1);
 document.NewPage();
_pcb = writer.DirectContentUnder;
_pcb.AddTemplate(background, 0, 0);
 _pcb = writer.DirectContent;
_pcb.BeginText();
         _pcb.SetFontAndSize(BaseFont.CreateFont(BaseFont.TIMES_ROMAN, BaseFont.CP1252, false), 10);
 _pcb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, text, 10, 5, 0);//10,5 are x and y coordinates resp.
 _pcb.EndText();

 writer.Flush();
fileStream.Close(); 
```

或参考样本 [PDF 海报](http://www.codeproject.com/Articles/277065/Creating-PDF-documents-with-iTextSharp)

# php - PHP preg_replace 转义加号不起作用

> ID：11448960
> 
> 赞同：1
> 
> 时间：2012-07-12T09:35:38.813
> 
> 标签：php, regex

这个

```
preg_replace("/[^a-zA-Z0-9[:space:][:blank:]+-]/", "", $val); 
```

加号转义

```
preg_replace("/[^a-zA-Z0-9[:space:][:blank:]\+-]/", "", $val); 
```

当我想允许加号时，是否从 $val 中删除加号，如何正确转义加号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:54:18.857

我会建议：

```
echo preg_replace("/[^a-zA-Z0-9[:space:][:blank:]+\-]/", "", ':::test+++---:::'); 
```

# php - 如何获得有关 PHP 错误的反馈？

> ID：11448963
> 
> 赞同：-2
> 
> 时间：2012-07-12T09:35:51.347
> 
> 标签：php

我只是想知道如何在 .php 中激活错误消息。当我在家里做 php 时，我总是收到诸如“第 232 行没有右括号”之类的消息，但是当我在工作中做 .php 时，没有这样的功能。猜猜它与域/服务器有关，所以有人知道如何激活它，以便我更容易找到错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:38:31.417

听起来像`display_errors`和/或一堆[其他 PHP 错误报告](http://php.net/manual/en/errorfunc.configuration.php)在您在工作中使用的 php.ini 文件中被关闭。

此外，如果您使用[Eclipse PDT](http://www.eclipse.org/projects/project.php?id=tools.pdt)之类的东西，它将为您提供一个可爱的工作环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:38:46.020

您可以在代码级别上操作基本上有 2 个设置：

`error_reporting(E_ALL);`

和

`ini_set('display_errors', 'On');`

这应该够了吧。

# ios - ALAssetsLibrary 似乎返回了错误数量的照片

> ID：11448965
> 
> 赞同：5
> 
> 时间：2012-07-12T09:35:53.733
> 
> 标签：ios, ipad, photos, alassetslibrary

当我使用 ALAssetsLibrary 获取本地照片时，它工作正常。但是在我使用“照片”应用程序删除一些照片后，我的应用程序崩溃了。

崩溃信息是：

`"Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[NSOrderedSet enumerateObjectsAtIndexes:options:usingBlock:]: index 14 beyond bounds [0 .. 9]'".'14'`

看起来本地照片的数量仍然和以前一样。即使在我退出我的应用程序并重新启动它之后，它仍然会崩溃。

本地照片访问代码：

```
dispatch_async(dispatch_get_main_queue(), ^
{
   @autoreleasepool 
   {
       ALAssetsLibraryAccessFailureBlock failureblock = ^(NSError *myerror)
       {
           NSLog(@"error occour =%@", [myerror localizedDescription]);
       };

       ALAssetsGroupEnumerationResultsBlock groupEnumerAtion = ^(ALAsset *result, NSUInteger index, BOOL *stop)
       {
           if (result!=NULL) 
           {
               if ([[result valueForProperty:ALAssetPropertyType] isEqualToString:ALAssetTypePhoto]) 
               {
                   [self.g_imageArray addObject:result];
               }
           }
       };

       ALAssetsLibraryGroupsEnumerationResultsBlock
       libraryGroupsEnumeration = ^(ALAssetsGroup* group, BOOL* stop)
       {
           if (group == nil) 
           {
               return;
           }

           if (group!=nil) {
               [group enumerateAssetsUsingBlock:groupEnumerAtion];
           }
       [self updatephotoList];
       };

       self.library = [[ALAssetsLibrary alloc] init];
       [self.library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos
                              usingBlock:libraryGroupsEnumeration 
                            failureBlock:failureblock];
   }
}); 
```

如果我用系统相机拍摄另一张照片，我的应用程序会再次正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:50:07.240

这似乎是一个 iOS 错误，就像你说的 ALAssetsLibrary 返回了错误数量的照片，所以你得到了 index out of bounds 错误。解决方法是重新加载您的照片，如下所示：

```
ALAssetsLibraryGroupsEnumerationResultsBlock
libraryGroupsEnumeration = ^(ALAssetsGroup* group, BOOL* stop)
{
       if (group == nil) 
       {
           return;
       }
       //Force to reload photo as numberOfAssets is broken
       NSLog(@"how many picture I have in this group: %d",[group numberOfAssets]);
       [group setAssetsFilter:[ALAssetsFilter allPhotos]];//this will cause group to reload
       NSLog(@"how many picture I have in this group: %d",[group numberOfAssets]);

       if (group!=nil) {
           [group enumerateAssetsUsingBlock:groupEnumerAtion];
       }
   [self updatephotoList];
 }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T16:52:23.327

注册观察员对我没有帮助。用户仍在崩溃，但我没有。直到今天。

我想出了解决这个崩溃的方法。这最终是苹果照片库中的一个错误，但有一个解决方法。您所做的是，将过滤器设置为照片，然后设置为视频，而不是将其保留在默认的“资产”中。然后，您为每个枚举一次，并做一些技巧以确保您获得最终的“空值”点以进行所需的任何更新。我目前的方法有点混乱，但你明白了：

```
// pending is used to tell the block we're not done, even if result is NULL
BOOL pending = YES;
// resorted is just a flag I use in case there are no videos; if there are none, the block is never called at all, and thus the == NULL part never triggers
__block BOOL resorted = NO;

ALAssetsGroupEnumerationResultsBlock assetEnumerator = ^(ALAsset *result, NSUInteger index, BOOL *stop) {
    if(result != NULL) {
        [assets addObject:result];
    } else if (! pending) {
        // ready!!
        resorted = YES;
        [self resort]; // my own method; replace with e.g. tableView reload!
    }
};

// there are two types of assets - photos and videos; we start with photo
[group setAssetsFilter:[ALAssetsFilter allPhotos]];
NSLog(@"assets = %d", group.numberOfAssets);
[group enumerateAssetsUsingBlock:assetEnumerator];
// we then set pending to NO; even though the enumeration happens in a separate thread, it seems like pending is not caught by the above enumeration (I have 105 images in the group I am enumerating, FWIW; it may be better to set pending in the == NULL part of the enumeration though
pending = NO;
// now we switch to video and do the same thing
[group setAssetsFilter:[ALAssetsFilter allVideos]];
BriefLog(@"assets = %d", group.numberOfAssets);
[group enumerateAssetsUsingBlock:assetEnumerator];

// if there are 0 vids, the above block is not ever called so we flip to a background thread and then back (probably not necessary) and then check if resorted is set; if it isn't we call resort
if (! resorted) dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    dispatch_async(dispatch_get_main_queue(), ^{
        if (! resorted) {
            [self resort]; // my own method; replace with e.g. tableView reload!
        }
    });
}); 
```

就是这样。NSRangeExceptions 消失。至少在我的情况下他们做到了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T07:59:19.690

您需要注册一个观察者`ALAssetsLibraryChangedNotification`以获取库更改。当通知触发时，重新枚举 AssetsLibrary 的组和内容。如果您不注册通知，您的应用程序将获得库的旧快照并且枚举将失败。另请注意，`ALAssetsLibraryChangedNotification`此处记录的 iOS 5.x 下存在一个错误：[http ://www.openradar.me/10484334](http://www.openradar.me/10484334)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T06:32:41.343

我从秋朗的答案开始，但它对我不起作用。对我有用的是在开始枚举之前使用所有过滤器组合连续调用 setAssetsFilter 3 次。

```
[group setAssetsFilter:[ALAssetsFilter allPhotos]];
[group setAssetsFilter:[ALAssetsFilter allVideos]];
[group setAssetsFilter:[ALAssetsFilter allAssets]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-26T10:50:33.503

在 iOS 8 中，我还注意到 numberOfAssets 返回错误数量的照片，如果其中一些被删除并且当前位于“最近删除”相册中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-09T10:27:52.943

对于那些用所有 ALAssetRepresentations 填充一些 NSArray 并且不想过多更改代码的人，只需使用此检查器过滤您的数组 - [AssetURLChecker](http://www.codercowboy.com/code-synchronous-alassetlibrary-asset-existence-check/)

干杯!

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-28T13:10:01.963

ALAssetsLibrary 库在 PHAssetsLibrary 上已被贬低，因此请使用以下代码：

```
__block PHAssetCollection *collection;
    _arr_downloadedWallpaper = [[NSMutableArray alloc] init];

    // Find the album
    PHFetchOptions *fetchOptions = [[PHFetchOptions alloc] init];
    fetchOptions.predicate = [NSPredicate predicateWithFormat:@"title = %@", @"Bhakti Ras"];
    collection = [PHAssetCollection fetchAssetCollectionsWithType:PHAssetCollectionTypeAlbum
                                                          subtype:PHAssetCollectionSubtypeAny
                                                          options:fetchOptions].firstObject;

    PHFetchResult *collectionResult = [PHAsset fetchAssetsInAssetCollection:collection options:nil];

    [collectionResult enumerateObjectsUsingBlock:^(PHAsset *asset, NSUInteger idx, BOOL *stop) {

        //add assets to an array for later use in the uicollectionviewcell
        NSLog(@"asset is =%@",asset);

        if (asset) {
            [self.arr_downloadedWallpaper addObject:asset];
        }
    }]; 
```

# json - 如何让 MOXy 生成 Json 以了解模型何时为数字

> ID：11448966
> 
> 赞同：1
> 
> 时间：2012-07-12T09:35:57.583
> 
> 标签：json, jaxb, jersey, moxy

为了解决另一个问题，我从使用[Jersey](http://jersey.java.net/)转移到[EclipseLink MOXy](http://www.eclipse.org/eclipselink/moxy.php)以从 JAXB 创建的对象模型（由 Sun JAXB 2.1.12 创建）生成 JSON。我注意到的一个区别是，在对象模型中，数字属性定义为

```
@XmlSchemaType(name = "nonNegativeInteger")
protected BigInteger count; 
```

泽西岛转换为

```
"count":1, 
```

但 MOXy 给

```
"count" : "1", 
```

我怎样才能让 MOXy 实现它的数字字段而不是引用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:00:41.007

**更新**

已在 EclipseLink 2.4.1 和 2.5.0 流中签入一个修复程序。**从2012 年 7 月 13 日**开始，您可以从以下链接下载包含此修复程序的每晚标签：

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

* * *

[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)会将数字类型编组为不带引号的 JSON。在这种情况下，`@XmlSchemaType`注释的存在会导致问题。这是一个错误，您可以使用以下链接跟踪我们在此问题上的进展：

*   [http://bugs.eclipse.org/384919](http://bugs.eclipse.org/384919)

**解决方法**

MOXy 的外部映射文档可用于覆盖字段/属性级别的映射。我们将利用它重新映射`count`属性以删除有问题的`@XmlSchemaType`注释。

**oxm.xml**

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum11448966">
    <java-types>
        <java-type name="Root">
            <java-attributes>
                <xml-element java-attribute="count"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**根**

```
package forum11448966;

import java.math.BigInteger;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    @XmlSchemaType(name = "nonNegativeInteger")
    protected BigInteger count;

} 
```

**jaxb.properties**

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum11448966;

import java.math.BigInteger;
import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String,Object> properties = new HashMap<String, Object>(3);
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "forum11448966/oxm.xml");
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Root.class}, properties);

        Root root = new Root();
        root.count = BigInteger.TEN;

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输出**

```
{
   "count" : 10
} 
```

# python - 更改 matplotlib 3D 图的轴平面的背景颜色

> ID：11448972
> 
> 赞同：42
> 
> 时间：2012-07-12T09:36:20.463
> 
> 标签：python, 3d, matplotlib, scatter-plot

[在matplotlib的散点图示例](http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/tutorial.html#scatter-plots)的基础上，如何改变3轴网格平面的灰色背景颜色？我想将其设置为白色，使网格线保持默认的灰色。我发现[了这个问题](https://stackoverflow.com/questions/9215512/how-do-i-change-the-color-of-the-axes-of-a-matplotlib-3d-plot)，但我无法将其应用于示例。谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-27T14:09:50.223

使用相同的示例。`set_pane_color`您可以使用此处描述的方法设置窗格颜色[http://matplotlib.org/mpl_toolkits/mplot3d/api.html#axis3d](http://matplotlib.org/mpl_toolkits/mplot3d/api.html#axis3d)。您可以使用 RGBA 元组设置颜色：

```
# scatter3d_demo.py
# ...
# Set the background color of the pane YZ
ax.w_xaxis.set_pane_color((1.0, 1.0, 1.0, 1.0))
plt.show() 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2018-05-20T12:51:50.353

对于稍微不同的方法，请参见下文：

```
# Get rid of colored axes planes
# First remove fill
ax.xaxis.pane.fill = False
ax.yaxis.pane.fill = False
ax.zaxis.pane.fill = False

# Now set color to white (or whatever is "invisible")
ax.xaxis.pane.set_edgecolor('w')
ax.yaxis.pane.set_edgecolor('w')
ax.zaxis.pane.set_edgecolor('w')

# Bonus: To get rid of the grid as well:
ax.grid(False) 
```

请参阅我用作来源的这篇[博文。](https://dawes.wordpress.com/2014/06/27/publication-ready-3d-figures-from-matplotlib/)

# sharepoint - 如何获取 SPServer 的机器名？

> ID：11448977
> 
> 赞同：0
> 
> 时间：2012-07-12T09:36:28.497
> 
> 标签：sharepoint

通常在 SharePoint 中，一个 SPServer 的名称等于机器名称，但如果我们使用

```
stsadm.exe -o renameserver
       -oldservername <oldServerName>
       -newservername <newServerName> 
```

![在此处输入图像描述](../Images/49ddb5149003681d43e7c1f466a92a53.png)

要更改服务器名称，那么任何人都可以告诉如何获取定位 SPServer 的代理名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:57:57.683

如果您使用 powershell，您可以使用以下两个命令之一：

> [System.Net.Dns]::GetHostName()
> 
> $env:计算机名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:46:24.863

我已经得到答案，详情请参考[http://social.msdn.microsoft.com/Forums/en-US/sharepoint2010general/thread/73851c5d-1a6d-491e-959f-545be86326da](http://social.msdn.microsoft.com/Forums/en-US/sharepoint2010general/thread/73851c5d-1a6d-491e-959f-545be86326da)。

谢谢

# java - 从命令行运行 java 应用程序

> ID：11448978
> 
> 赞同：0
> 
> 时间：2012-07-12T09:36:31.727
> 
> 标签：java

我有一个 Eclipse 项目，我想从 ubuntu 的命令行运行它。在互联网上搜索后，我正在尝试以下命令。

```
java -cp . com.abc.utils.MyClassName 
```

我从 eclipse 用来存储所有类文件的目录发出这个命令。但我得到这个错误：

> 线程“主”java.lang.NoClassDefFoundError 中的异常：com/abc/utils/MyClassName

我在做什么错以及如何从命令行运行应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-24T05:57:51.283

你的命令是正确的。你错过了一些东西。请检查

**1.**您已经编译了您的代码，并且`MyClassName.class`在目录中创建了`classes/com/abc/utils/`文件。

**2.**您正在从正确的目录运行此命令。您的当前目录应该是您的目录所在的 classes 目录`com`。如果不是，则切换到`classes`目录

`$cd /path/to/project/folder/classes/`

希望有帮助。

此外，如果您想了解 eclipse 如何自动放置`.class`和`.java`文件，请尝试自己编译一个多包应用程序。

`$javac -d`会有帮助的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:00:58.847

你应该先设置类路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:39:10.490

您只能运行 .class 文件，也就是编译的 java 文件。所以你首先需要用'javac'命令编译你的java文件。这将生成一个 .class 文件。然后您可以使用“java”命令运行 java 类文件。

# android - 不幸的是，应用程序已在 Android 模拟器中停止 -

> ID：11448980
> 
> 赞同：1
> 
> 时间：2012-07-12T09:36:36.220
> 
> 标签：android, android-intent, android-emulator, android-listview

这是我的 Logcat 的显示项目。我的应用程序没有错误，但不幸的是它停止了

```
07-12 14:43:15.651: E/AndroidRuntime(1475): FATAL EXCEPTION: main

07-12 14:43:15.651: E/AndroidRuntime(1475): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { cmp=com.delgence.timetracker/.AddTimeActivity (has extras) }} to activity {com.delgence.timetracker/com.delgence.timetracker.MainActivity}: java.lang.NullPointerException

07-12 14:43:15.651: E/AndroidRuntime(1475):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2980)

07-12 14:43:15.651: E/AndroidRuntime(1475):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3023)

07-12 14:43:15.651: E/AndroidRuntime(1475):     at android.app.ActivityThread.access$1100(ActivityThread.java:123)

07-12 14:43:15.651: E/AndroidRuntime(1475):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1177)

07-12 14:43:15.651: E/AndroidRuntime(1475):     at android.os.Handler.dispatchMessage(Handler.java:99)

07-12 14:43:15.651: E/AndroidRuntime(1475):     at android.os.Looper.loop(Looper.java:137)

07-12 14:43:15.651: E/AndroidRuntime(1475):     at android.app.ActivityThread.main(ActivityThread.java:4424)

07-12 14:43:15.651: E/AndroidRuntime(1475):     at java.lang.reflect.Method.invokeNative(Native Method)

07-12 14:43:15.651: E/AndroidRuntime(1475):     at java.lang.reflect.Method.invoke(Method.java:511)

07-12 14:43:15.651: E/AndroidRuntime(1475):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)

07-12 14:43:15.651: E/AndroidRuntime(1475):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-12 14:43:15.651: E/AndroidRuntime(1475):     at dalvik.system.NativeStart.main(Native Method)
07-12 14:43:15.651: E/AndroidRuntime(1475): Caused by: java.lang.NullPointerException

07-12 14:43:15.651: E/AndroidRuntime(1475):     at com.delgence.timetracker.MainActivity.onActivityResult(MainActivity.java:46)

07-12 14:43:15.651: E/AndroidRuntime(1475):     at android.app.Activity.dispatchActivityResult(Activity.java:4649)

07-12 14:43:15.651: E/AndroidRuntime(1475):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2976)

07-12 14:43:15.651: E/AndroidRuntime(1475):     ... 11 more
07-12 14:43:15.841: I/dalvikvm(1475): threadid=3: reacting to signal 3
07-12 14:43:16.182: I/dalvikvm(1475): Wrote stack traces to '/data/anr/traces.txt'
07-12 14:43:16.473: I/dalvikvm(1475): threadid=3: reacting to signal 3
07-12 14:43:16.614: I/dalvikvm(1475): Wrote stack traces to '/data/anr/traces.txt'
07-12 14:43:17.211: I/dalvikvm(1475): threadid=3: reacting to signal 3
07-12 14:43:17.335: I/dalvikvm(1475): Wrote stack traces to '/data/anr/traces.txt'
07-12 14:43:21.144: I/Process(1475): Sending signal. PID: 1475 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:06:05.100

看来您的呼叫活动已被破坏。因此，被调用的活动无法将结果返回给您的调用活动。例如，如果您在被叫活动中旋转手机，或者您完成了呼叫活动，则可能会发生这种情况。

# c# - 我可以返回这个：context.CreateObjectSet ()?

> ID：11448981
> 
> 赞同：0
> 
> 时间：2012-07-12T09:36:42.923
> 
> 标签：c#

我添加了一个名为 Connect.cs 的类；

```
namespace MovieApp.DAL
{
   public class Connect
   {
      public Connection()  //my class needs to have a return type
      {
        var connStr = ConfigurationManager.ConnectionStrings["Entities"];
        ObjectContext context = new ObjectContext(connStr.ConnectionString);
        var movieContext = context.CreateObjectSet<Movie>();
        return movieContext;
      }
   }
} 
```

然后我在我的控制器类中有：

```
namespace MovieApp.Controllers
{
    public class MovieController : Controller
    {
        public ActionResult Index()
       {
        Connect connection = new Connect(//and what will i put here??);
        var movies = connection.OrderBy(m => m.Title);
        return View(movies);
        }
} 
```

显然我得到了错误，因为我不知道该怎么做。movieContext 是什么类型的？请问如何让这个代码工作？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:44:06.197

“连接”方法的返回类型应该是“ `context.CreateObjectSet<Movie>()`”方法调用的返回类型；这是`ObjectSet<Movie>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:45:36.927

像这样的东西？

```
public ObjectSet<Movie> Connection()
{
    var connStr = ConfigurationManager.ConnectionStrings["Entities"];
    ObjectContext context = new ObjectContext(connStr.ConnectionString);
    var movieContext = context.CreateObjectSet<Movie>();
    return movieContext;
} 
```

然后在你的控制器中：

```
public ActionResult Index()
{
    Connect connection = new Connect();
    var movies = connection.Connection().OrderBy(m => m.Title);
    return View(movies);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:46:14.950

您的代码的问题是您没有指定`Connection`方法的返回类型。即`public Connection()`应该是`public ObjectSet<T> Connection<T>()`。

您可以尝试这样的事情（用记事本编写的代码，因此只是为了演示这个想法）

```
public class ObjectContextManager
{
    public ObjectSet GetSet<T>()  
    {
        var connStr = ConfigurationManager.ConnectionStrings["Entities"];
        ObjectContext context = new ObjectContext(connStr.ConnectionString);
        return context.CreateObjectSet<T>();
    }
} 
```

然后将管理器注入控制器并从那里解决所需的集合。不要忘记将数据库对象包装到一个`using`块`Dispose`中，以便自动调用。

```
public class MovieController : Controller
{
    private ObjectContextManager ctxManager;

    public MovieController(ObjectContextManager ctxManager)
    {
        this.ctxManager = ctxManager;
    }

    public ActionResult Index()
    {
        using(var ctx = ctxManager.GetSet<Movie>())
        {
            var movies = ctx.OrderBy(m => m.Title);
            return View(movies);
        }
    }
} 
```

# java - 如何以 XML/JSON 格式获取 Httpclient GEtMethod 响应

> ID：11448982
> 
> 赞同：0
> 
> 时间：2012-07-12T09:36:50.513
> 
> 标签：java, get, httpclient, getmethod

我正在使用 apache **HttpClient 的 GetMethod**来获取 URL 中的内容。该 url 只包含它下面的 2 个目录。我的要求是读取这些目录名称并显示它。

我正在获取该页面的 html 源作为响应，就像这样

<ul>
<li><a href="libraries/" >libraries/</a></li>
<li><a href="services/">services/</li>
</ul>

我感觉，XML格式或者Json的响应会好用。反正有没有得到 json/xml 格式的响应？

我尝试更改没有帮助的内容类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:42:20.390

响应的格式是服务器而不是客户端的责任。

客户端只能以他想要的响应格式声明，如果服务器支持它，客户端将以想要的格式获取它。

# extjs - Ext JS 组件 - 我什么时候可以操作 DOM？

> ID：11448984
> 
> 赞同：0
> 
> 时间：2012-07-12T09:36:59.087
> 
> 标签：extjs, extjs4

我正在尝试重用一些代码来将组件初始化回其初始状态。所以我有一个`reset()`函数调用一个`update()`带有默认参数的函数。

在我尝试的所有地方，尝试访问 DOM 元素都会导致 null - 它不是代码，因为我在页面呈现后通过按钮事件对其进行了测试。似乎使用 initComponent() 为时过早，所以我查看了订阅事件。

查看 的事件`Ext.Component`，似乎唯一合适的是`render`事件：“在渲染组件标记后触发。”

同样，我得到一个空引用。我不热衷于使用它，因为我真的不想使用渲染以防万一它在其他地方重新渲染，它只是一次事件（在初始化时/之后），但可以再次调用。

我们应该何时/如何在初始化时访问组件的 DOM？

这是课程：

```
Ext.define('PegfileApp.view.ContentHeader', {
  extend: 'Ext.panel.Panel',
  alias: 'widget.contentHeader',
  id: 'contentHeader',
  // layout

  border: 1,
  html: " \
    <h1 id='survey-header' class='lg'>Blah blah</h1> \
    <h2 id='survey-subheader' class='mb'></h2> \
    <div id='survey-header-content'></div> \
    ",
  width: 634,
  height: 75,
  listeners: 
  {
    'render': function () {
      alert("rendered");
      this.reset();
    }
  },
  // funcs

//  initComponent: function () {
////    this.on("afterrender", function () {
////      alert("rendered");
////      this.reset();
////    });
//    
//  },

  reset: function () {
    this.update('This is the header', 'This is the sub-header', 'Total number of files created: <b>30</b>')
  },

  update: function (header, subheader, content) {
    Ext.get('survey-header').update(header); // << == null
    Ext.get('survey-subheader').update(subheader);
    Ext.get('survey-header-content').update(content);
  }
}); 
```

# c# - 在 LINQ to SQL 中查找引用对象的有效方法

> ID：11448987
> 
> 赞同：0
> 
> 时间：2012-07-12T09:37:11.420
> 
> 标签：c#, .net, linq, entity-framework, linq-to-sql

我有一个如下所示的支付系统。可以通过多张礼券付款。礼券随购买一起发行。客户可以使用此礼券以备将来购买。当通过礼券进行付款时，GiftCoupon 表中的 UsedForPaymentID 列将更新为该 PaymentID（用于礼券 ID）。PaymentID 是 GiftCoupon 表中的外键。

我需要写一个方法：

```
public DateTime GetPaymentDate(int GiftCouponID) 
```

此方法将查找使用礼券进行付款的日期。

为此，我可以执行以下步骤

1.  使用 GiftCouponID（来自 GiftCoupon 存储库）查找 GiftCoupon 对象
2.  从 GiftCoupon 对象中找到 PaymentID。将其存储在@PID 变量中
3.  使用 @PID 变量查找 Payment 对象（来自 Payment 存储库）
4.  从 Payment 对象中查找 PaymentDate

在 LINQ to SQL 中有更简单/有效的方法吗？

![在此处输入图像描述](../Images/9b26f3acb0e6eb4722e633239a22f4d6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:40:54.207

你可以试试这样的。

```
public DateTime GetPaymentDate(int GiftCouponID) {
    using(var db = new YourDataContext()) // Create a datacontext
    {

        GiftCoupon gc = db.GiftCouple.SingleOrDefault(g=>g.GiftCouponID == GiftCouponID)
        if(gc != null)
            return gc.Payment.PaymentDate;
        else 
            throw new Exception("No such GiftCouponID");
    }
} 
```

我添加了基本的错误检查，您可能需要更多/更少取决于您的系统如何工作。显然您还需要更改DataContext 的名称。

假设您的所有关系都设置正确，这（或类似的东西）应该适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:42:16.553

```
var c = context.GiftCoupons.FirstOrDefault(gc => gc.GiftCouponID == GiftCouponID);
if (c != null && c.Payment != null)
return c.Payment.PaymentDate 
```

# google-app-engine - Google App Engine 中属性的唯一值列表

> ID：11448996
> 
> 赞同：1
> 
> 时间：2012-07-12T09:37:42.890
> 
> 标签：google-app-engine, database-design, gql, bigtable

我目前正在用 Java 重写一个 python GAE 应用程序，并且质疑我的实体设计。我有如下实体，以便我可以查询数据存储并轻松获取唯一的设计师列表：

类设计师

*   名称：字符串

让级

*   设计师：设计师

如果我去掉 Designer 类，代码会简单得多，因为它所做的只是包装一个字符串，但我无法`SELECT DISTINCT Designer FROM Jean`获取 Jean 设计师的列表。第一种方法是正确的，还是有另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:55:59.117

GAE(datastore-bigtable) 不支持 SQL 之类的复杂查询，因此您必须像前面解释的那样设计自己的模型（db）结构。

# vb.net - 来自文本文件的组合框值

> ID：11448998
> 
> 赞同：0
> 
> 时间：2012-07-12T09:37:50.883
> 
> 标签：vb.net, visual-studio, combobox, text-files, vb.net-2010

希望人们能提供帮助！

我正在尝试创建一个组合框，其中填充了来自使用 , 作为断点分隔的文本文件中的信息。IE

objecta,grad,N,words,5,moretext

我需要 , 之间的各个区域作为整数/布尔值/字符串 .. 但我在让代码正常工作时遇到问题

我在网上搜索过，找到了这段代码，但它对我来说不能正常工作。也许我很愚蠢，但希望有人可以帮助我。帮助我哦，互联网大师！

```
Public Sub meritlist()
    Dim looksups As New ArrayList
    ' This call is required by the Windows Form Designer.
    InitializeComponent()

    Dim rdr As IO.StreamReader = IO.File.OpenText(c:merits.txt")
    While Not rdr.EndOfStream
        Dim line As String = rdr.ReadLine()

        'Split the line by a comma:
        Dim arrayList = line.Split(",")

        'Get the right values: break down is as: Merit Name,Type,Shared,Carthan,Max,Pre-Req
        Dim meritname As Integer = arrayList(0)
        Dim merittype As String = arrayList(1)
        Dim meritshared As Boolean = arrayList(2)
        Dim carthan As String = arrayList(3)
        Dim meritmax As Integer = arrayList(4)
        Dim prereq As String = arrayList(5)

        cmoMRDro.Items.Add(New lookups(arrayList(0), arrayList(1)))

    End While
    rdr.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:10:13.753

我建议有 4 件事。

1.  使用`TextFieldParser`类读取分隔/固定宽度的文本文件。他们更专业地从事这项工作，并且已经拥有正确处理它的代码。

2.  `InitializeComponent`不需要调用 to 。

3.  创建一个结构/类来存储您的订单项，而不是原始变量。这样，您就可以更有条理地拥有它。

4.  使用`List`该结构/类，而不是`ArrayList`

虽然您已经在做的事情可以通过一些修改来纠正，但我会这样做，保留我上面给出的所有建议。因此，您可以看到在此之后它变得多么容易：

```
Structure MeritListType
    Dim meritname As Integer
    Dim merittype As String
    Dim meritshared As Boolean
    Dim carthan As String
    Dim meritmax As Integer
    Dim prereq As String

    Public Sub New(ByVal data() As String)
        meritname = Integer.Parse(data(0))
        merittype = data(1)
        meritshared = Boolean.Parse(data(2))
        carthan = data(3)
        meritmax = Integer.Parse(data(4))
        prereq = data(5)
    End Sub
End Structure

Public Sub MeritList()
    Dim FileData As New List(Of MeritListType)
    Dim tfp As New FileIO.TextFieldParser("c:\merits.txt")
    tfp.TextFieldType = FileIO.FieldType.Delimited
    tfp.SetDelimiters(",")
    While Not tfp.EndOfData
        FileData.Add(New MeritListType(tfp.ReadFields))
    End While
    tfp.Close()

    '' you have the records in FileData
    '' do whaever you want to do with it here now

End Sub 
```