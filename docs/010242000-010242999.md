# StackOverflow 问答 10242000-10242999

# spring - 使用Spring注解@Autowired的构造函数注入不起作用

> ID：10242004
> 
> 赞同：9
> 
> 时间：2012-04-20T07:28:12.797
> 
> 标签：spring, annotations, default-constructor, constructor-injection

我创建了 2 个简单的类。一个类的构造函数被注释为@Autowired。它接受另一个类的对象。但是这段代码失败了。

类：- 1）SimpleBean.java

```
@Configuration
public class SimpleBean {
  InnerBean prop1;

  public InnerBean getProp1() {
    return prop1;
  }

  public void setProp1( InnerBean prop1) {
    System.out.println("inside setProp1 input inner's property is "
        + prop1.getSimpleProp1());
    this.prop1 = prop1;
  }

  @Autowired(required=true)
  public SimpleBean(InnerBean prop1) {
    super();
    System.out.println("inside SimpleBean constructor inner's property is "
        + prop1.getSimpleProp1());
    this.prop1 = prop1;
  }
} 
```

2) 内部.java

```
@Configuration
public class InnerBean {
  String simpleProp1;

  public String getSimpleProp1() {
    return simpleProp1;
  }

  public void setSimpleProp1(String simpleProp1) {
    this.simpleProp1 = simpleProp1;
  }

} 
```

当我尝试加载 ApplicationConext

```
ApplicationContext acnxt = new AnnotationConfigApplicationContext("com.domain"); 
```

它给出以下错误：-

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException:         Error creating bean with name 'simpleBean' defined in file [C:\Users\owner\Documents\Java Project\MyWorkSpace\springMVCSecond\WebContent\WEB-INF\classes\com\domain\SimpleBean.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.domain.SimpleBean$$EnhancerByCGLIB$$4bc418be]: No default constructor found; nested exception is java.lang.NoSuchMethodException: com.domain.SimpleBean$$EnhancerByCGLIB$$4bc418be.<init>()
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:965)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.context.annotation.AnnotationConfigApplicationContext.<init>(AnnotationConfigApplicationContext.java:75)
at com.test.SpringAnnotationTest.main(SpringAnnotationTest.java:12)
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.domain.SimpleBean$$EnhancerByCGLIB$$4bc418be]: No default constructor found; nested exception is java.lang.NoSuchMethodException: com.domain.SimpleBean$$EnhancerByCGLIB$$4bc418be.<init>()
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:70)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:958)
... 12 more
Caused by: java.lang.NoSuchMethodException: com.domain.SimpleBean$$EnhancerByCGLIB$$4bc418be.<init>()
at java.lang.Class.getConstructor0(Unknown Source)
at java.lang.Class.getDeclaredConstructor(Unknown Source)
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:65)
... 13 more 
```

如果我在 SimpleBean 类中引入无参数构造函数。它不会给出错误。但这并没有给我 SimpleBean 的预填充对象（如在 XML 配置中使用 <constructor-arg > ）。那么在使用注解时，是否必须有无参数构造函数？什么是合适的出路？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-20T07:59:22.430

来自的javadoc `@Configuration`：

```
 Configuration is meta-annotated as a {@link Component}, therefore Configuration
 classes are candidates for component-scanning and may also take advantage of
 {@link Autowired} at the field and method but not at the constructor level. 
```

所以不幸的是，你必须找到其他方法来做到这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T07:59:54.167

我相信您正在混淆`@Configuration`和`@Component`注释。根据[spring 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java)，[`@Configuration`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/annotation/Configuration.html)用于使用 Java 代码创建 bean（任何带有注释的方法都`@Bean`创建一个 bean，而带有注释的类[`@Component`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/stereotype/Component.html)是自动创建的。

我希望以下内容能说明这一点：

InnerBean.java：

```
// this bean will be created by Config
public class InnerBean {
  String simpleProp1;

  public String getSimpleProp1() {
    return simpleProp1;
  }

  public void setSimpleProp1(String simpleProp1) {
    this.simpleProp1 = simpleProp1;
  }
} 
```

SimpleBean.java：

```
// This bean will be created because of the @Component annotation, 
// using the constructor with the inner bean autowired in
@Component
public class SimpleBean {
  InnerBean prop1;

  public InnerBean getProp1() {
    return prop1;
  }

  @Autowired(required = true)
  public SimpleBean(InnerBean prop1) {
    this.prop1 = prop1;
  }
} 
```

OuterBean.java

```
// this bean will be created by Config and have the SimpleBean autowired.
public class OuterBean {
  SimpleBean simpleBean;

  @Autowired
  public void setSimpleBean(SimpleBean simpleBean) {
    this.simpleBean = simpleBean;
  }

  public SimpleBean getSimpleBean() {
    return simpleBean;
  }
} 
```

配置文件

```
// this class will create other beans
@Configuration
public class Config {
  @Bean
  public OuterBean outerBean() {
    return new OuterBean();
  }

  @Bean
  public InnerBean innerBean() {
    InnerBean innerBean = new InnerBean();
    innerBean.setSimpleProp1("test123");
    return innerBean;
  }
} 
```

主.java：

```
public class Main {
  public static void main(String[] args) {
    ApplicationContext ctx = new AnnotationConfigApplicationContext("com.acme");
    OuterBean outerBean = ctx.getBean("outerBean", OuterBean.class);
    System.out.println(outerBean.getSimpleBean().getProp1().getSimpleProp1());
  }
} 
```

主类使用[`AnnotationConfigApplicationContext`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/annotation/AnnotationConfigApplicationContext.html)扫描`@Configuration`和`@Component`注释并相应地创建 bean。

# iphone - NSMutableArray 与 NSMutableDictionary 的一个奇怪问题

> ID：10242006
> 
> 赞同：2
> 
> 时间：2012-04-20T07:28:34.817
> 
> 标签：iphone, objective-c, memory-leaks, nsarray, nsdictionary

我有一个 XML 解析器，它将 XML 文件（作为项目资源附加）中的所有信息解析到一个集合中。我第一次通过 NSMutableArray 完成它，然后我将其转换为 NSMutableDictionary 并且一切正常。之后我意识到没有必要拥有一个 NSMutableArray；我只能将 XML 直接解析为 NSMutableDictionary。我做到了（这只是 1 个属性和我将对象添加到集合的方式的问题），但问题是我现在有泄漏。非常奇怪的泄漏。它可能发生，也不能发生。每次它发生时，它都会说它与散列和键/值问题有关。部分代码：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
        self.currentElement = elementName;
        // category
        if(self.targetBranch==XML_KEY_CATEGORY && [elementName isEqualToString:XML_KEY_CATEGORY]) {
            self.categoryItem = [[CategoryItem alloc] initWithId:[attributeDict objectForKey:@"id"] andParentId:[attributeDict objectForKey:@"parentId"]];
            //NSLog(@"didStartElement with id %@",self.categoryItem.categoryId);
        }
    ...
        }

        - (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
        ...
            // categories
            if (self.targetBranch==XML_KEY_CATEGORY && [self.currentElement isEqualToString:XML_KEY_CATEGORY]) {
                //NSLog(@"adding category to array");
                if (self.categoryItem.categoryName)
                    self.categoryItem.categoryName = [NSString stringWithFormat:@"%@%@",self.categoryItem.categoryName,string]; //[string copy];
                else
                    self.categoryItem.categoryName = string; //[string copy];
        ...
        }

        - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
            //NSLog(@"ended element: %@", elementName);

            // category
            if (self.targetBranch==XML_KEY_CATEGORY && [elementName isEqualToString:XML_KEY_CATEGORY]) {
                //NSLog(@"adding category to array");
                //[xmlParsedInfo addObject:self.categoryItem];
                //      if (self.categoryItem.categoryId && self.categoryItem.categoryId && self.categoryItem.categoryId!=NULL 
        //      && ![xmlParsedData objectForKey:self.categoryItem.categoryId]){
        //          //NSLog(@"adding dictionary element %@",self.categoryItem.categoryId);
        //          [xmlParsedData setObject:self.categoryItem forKey:self.categoryItem.categoryId];
                    [xmlParsedInfo addObject:self.categoryItem];

                }
        ...
        }

        -(NSDictionary*) getCategoriesForParentId:(NSString*)parentId_ fromUrl:(NSString *)strUrl{
            NSLog(@"getCategoriesForParentId: %@",parentId_);
            targetBranch = XML_KEY_CATEGORY;
            parentId = parentId_;
            xmlParsedInfo = [[NSMutableArray alloc] init];
        //  xmlParsedData = [[NSMutableDictionary alloc] init];
            [self parseXMLFileAtURL:strUrl];
            NSLog(@"category for parent id count is %i",xmlParsedInfo.count);
            //return xmlParsedData;
            NSDictionary *result = [self convertCategoryItemArrayToDictionary:xmlParsedInfo];
            [xmlParsedInfo release];
            return result; //[self convertCategoryItemArrayToDictionary:xmlParsedInfo];
        }

        - (NSDictionary *) convertCategoryItemArrayToDictionary:(NSMutableArray *)array 
        {
            NSMutableDictionary *mutableDictionary = [[NSMutableDictionary alloc] init];
            for (CategoryItem *catItem in array) {
                [mutableDictionary setObject:catItem forKey:catItem.categoryId];
            }
            return (NSDictionary *)[mutableDictionary autorelease];
        } 
```

就像我说的 XML 解析器工作正常，还没有问题。但是您可以看到与字典相关的注释部分。在当前状态下它运行良好，但如果注释数组相关代码和 UNcomment 字典相关 - 它会泄漏。大多数时候，我会遇到 2 次泄漏，例如：

```
#   Category    Event Type  Timestamp   RefCt   Address Size    Responsible Library Responsible Caller
0   CFBasicHash (key-store) Malloc  1928615936  1   0x9019600   512 MyApp   -[XMLParser parser:didEndElement:namespaceURI:qualifiedName:]
#   Category    Event Type  Timestamp   RefCt   Address Size    Responsible Library Responsible Caller
0   CFBasicHash (value-store)   Malloc  1928608768  1   0x900c600   512 MyApp   -[XMLParser parser:didEndElement:namespaceURI:qualifiedName:] 
```

这些泄漏直接导致以下代码行：

```
 [xmlParsedData setObject:self.categoryItem forKey:self.categoryItem.categoryId]; 
```

那么这里的字典有什么问题呢？正如我所看到的，它与哈希/密钥相关以及它的 NSMutableDictionary 内部问题。

我只用模拟器尝试代码。所以我不能说问题是否仍然存在于真实设备上。也许它只是模拟器相关的错误（如键盘泄漏）。
我正在解析的 XML 是静态的，它只是项目中的一个文件。此 XML 文件中有 71 个类别。因此，每个运行的应用程序都对相同的数据执行相同的操作。这就是为什么我说这个问题很奇怪。在第一次使用泄漏监视器运行时，没有任何泄漏。在第二次尝试时，它可能是 1 或 2。所有下一次运行它不断显示 2（如上所示）泄漏（+1 导致字典本身，但这是由于其键或值泄漏，它只是链的末端） .

```
CategoryItem.h
@interface CategoryItem : NSObject {
    NSString * categoryName;
    NSString * categoryId;
    NSString * parentId;
}
@property (nonatomic,retain) NSString * categoryName; 
@property (nonatomic,retain) NSString * categoryId; 
@property (nonatomic,retain) NSString * parentId; 

- (id)init;
- (id)initWithId:(NSString *)id_ andParentId:(NSString *)parentId_;
- (id)initWithName:(NSString *)name_ andId:(NSString *)id_ andParentId:(NSString *)parentId_;
- (BOOL)isEqualToItem:(CategoryItem *)anItem;
- (NSUInteger)hash;

@end

CategoryItem.m

#import "CategoryItem.h"

@implementation CategoryItem

@synthesize categoryName; 
@synthesize categoryId; 
@synthesize parentId; 

-(id)init{
    self = [super init];
    return self;
}

-(id)initWithName:(NSString *)name_ andId:(NSString *)id_ andParentId:(NSString *)parentId_{
    self = [super init];
    if(self){
        self.categoryName = name_;
        self.categoryId = id_;
        self.parentId = parentId_;
    }
    return self;
}

-(id)initWithId:(NSString *)id_ andParentId:(NSString *)parentId_{
    self = [super init];
    if(self){
        self.categoryId = id_;
        self.parentId = parentId_;
    }
    return self;
}

- (void)dealloc {
    [categoryName release];
    [categoryId release];
    [parentId release];
    [super dealloc];
}

- (BOOL)isEqual:(id)other {
    if (other == self)
        return YES;
    if (!other || ![other isKindOfClass:[self class]])
        return NO;
    return [self isEqualToItem:other];
}

- (BOOL)isEqualToItem:(CategoryItem *)anItem {
    if (self == anItem)
        return YES;
    if (![(id) self.categoryName isEqual:anItem.categoryName])
        return NO;
    if (![(id) self.categoryId   isEqual:anItem.categoryId])
        return NO;
    if (![(id) self.parentId     isEqual:anItem.parentId])
        return NO;
    return YES;
}

- (NSUInteger)hash {
    NSString *string4Hash = [NSString stringWithFormat:@"%@%@%@",self.categoryName,self.categoryId,self.parentId];
    NSUInteger hash = [string4Hash hash];
    return hash;
}

@end 
```

**补充：** 我发现的解决方案是（对我来说很愚蠢）在我的 -(NSDictionary*) getCategoriesForParentId 中：

返回这个：

```
 NSDictionary *result;

    result = (NSDictionary *)[xmlParsedData copy];
    [xmlParsedData release];

    return result; 
```

！或者！

```
 return [(NSDictionary *)xmlParsedData autorelease];

} 
```

所以关键是复制 NSDictionaryMutable ......我只是不明白为什么它有帮助？！不是保留而是复制！调用 getCategoriesForParentId() 的方法需要 NSDictionary （不是可变的）。它通过 alloc+init 创建 XMLParser 并在获取它发布的字典后创建具有 dealloc 的 XMLParser

```
- (void)dealloc {
    [currentElement release];
    [targetBranch   release];

    xmlParsedInfo = nil;
    xmlParsedData = nil; 
... 
```

我还尝试在没有额外 NSDictionary *result 的情况下返回 (NSDictionary *)[xmlParsedData retain] 或 (NSDictionary *)xmlParsedData 之类的内容 - 但存在泄漏。

看起来问题是我没有使用 xmlParsedData 作为属性+@synthesize。所以现在我将它设为一个属性（保留）并在 dealloc 中将其现在 [xmlParsedData release] 并从 getCategoriesForParentId 返回 [xmlParsedData retain]。它仍然泄漏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T08:10:25.567

您的代码似乎没有使用 ARC，但请在问题中指定它。

每次进入*if*分支`didStartElement`并将新元素分配给`self.categoryItem`. 您正在分配一个新对象，但是当您将其分配给该属性时，它将在其`retain`上再发出一个。下次当您分配下一个对象时，该属性将发出一个`release`，但引用计数器仍将是一个，因为您的`alloc`.

为了使其正常工作，请在创建时发布自动释放或在将其分配给属性后发布：

```
self.categoryItem = [[[CategoryItem alloc] 
         initWithId:[attributeDict objectForKey:@"id"] 
        andParentId:[attributeDict objectForKey:@"parentId"]] autorelease]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T07:51:01.420

我不知道这是否是问题所在，但是...您可以发布 categoryItem 类吗？或者......你有没有在它上面实现哈希方法？

# sql-server-2008 - 在 SISS 包（T-SQL 任务）期间触发通知/错误到“执行结果”而不停止执行，如 php trigger_error("xyz",E_USER_NOTICE)？

> ID：10242008
> 
> 赞同：1
> 
> 时间：2012-04-20T07:28:50.340
> 
> 标签：sql-server-2008, tsql, ssis

是否可以在 SSIS 包中生成类似于 PHP (trigger_error("xyz",E_USER_NOTICE)) 的用户通知到“执行结果”？

（未显示打印。）

```
//php//
trigger_error("100 rows effected", E_USER_NOTICE); 
```

在 SSIS 包中执行数据流任务后使用的 TSQL 语句：

```
--T-SQL--
IF @COUNT_A_2 = 0 AND @COUNT_B_2 = 0 
BEGIN
RAISERROR('Import.A_B', 16, 1) -- ######## USER_NOTICE ################

--  recert.A_B befüllen--
INSERT INTO  recert.A_B (A_id, B_id)
SELECT K.A_id AS A_id, L.ID AS B_id
FROM dbo.K AS K
JOIN recert.L AS L ON K.B = L.name
WHERE NOT EXISTS (  SELECT * FROM recert.A_B AS D 
                    WHERE D.A_id = K.A_id AND K.B = L.name 
                  )
PRINT 'recert.A_B befüllt. / INSERT.A_B' 
```

[...]

```
-- Leeren der Tabellen --
DELETE FROM [testdb].[dbo].[W]

END  
ELSE
BEGIN
    PRINT 'Daten nicht verarbeitet / NO data inserted' 
    RaisError('Daten nicht verarbeitet / NO data inserted',18,1) 
    -- stopps SISS Package. OK.
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:04:05.710

是的，但受影响的行数应该在 SSIS 中可用。例如，您可以在 SQL 语句中返回受影响的行数，并使用“执行 SQL 任务”编辑器的 ResultSet 选项卡将它们加载到变量中。

然后，您可以使用以下方法之一通过“脚本任务”触发事件（进度、信息）：

```
Dts.Events.FireProgress
Dts.Events.FireInformation 
```

在您的控制流中或在“执行 SQL 任务”的 OnPostExecute 事件处理程序中添加该脚本任务。

# c# - 如何使用 DropDownList.text 进行选择

> ID：10242010
> 
> 赞同：9
> 
> 时间：2012-04-20T07:29:06.800
> 
> 标签：c#, asp.net, c#-4.0

我正在开发一个 Asp.NET 项目，我正在尝试使用文本属性设置下拉列表的选定值。例如，我在下拉列表中有一个带有文本的项目`test`。我可以以编程方式将其设置`selecteditem`为`Text`？我正在使用以下代码，但无法正常工作。

```
protected void Page_Load(object sender, EventArgs e)
{
    string t = "test";
    drpFunction.Text = t; 
} 
```

但不工作。有什么建议么 ？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-20T07:31:41.297

```
 string t = "test";
 drpFunction.ClearSelection();
 drpFunction.Items.FindByText(t).Selected = true; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-19T20:02:36.903

设置 itm.Selected = true; 仅当您首先使用 drp.ClearSelection() 时才有效。我更喜欢以下内容：

```
drpFunction.SelectedValue = drpFunction.Items.FindByText(t).Value; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-07T18:18:17.957

```
drpFunction.SelectedValue = drpFunction.Items.FindByText(t).Value; 
```

这是选择文本的更好方法。通过ioden的方式它会显示一个错误

> “下拉列表中不能选择多个项目”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T07:30:48.327

此[链接](http://www.objectreference.net/post/Select-Text-or-Value-From-DropDownList-Extension-Method.aspx)可能对您有所帮助

```
public static void SelectText(this DropDownList bob, string text)
{
    try
    {
        if (bob.SelectedIndex >= 0)
            bob.Items[bob.SelectedIndex].Selected = false;
        bob.Items.FindByText(text).Selected = true;
    }
    catch
    {
        throw new GenericDropDownListException("value", text);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T07:34:15.240

我认为[SelectedValue](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue.aspx)属性应该可以满足您的需要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-19T22:31:05.537

```
protected void Page_Load(object sender, EventArgs e)
{
    string t = "test";
    drpFunction.SelectedValue = t;
} 
```

SelectedValue 属性可用于通过设置项目的值来选择列表控件中的项目。但是，如果所选值与下拉列表中的值列表不匹配，则在回发期间将引发异常。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue(v=vs.110).aspx)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-20T07:34:09.373

用这个...

```
protected void Page_Load(object sender, EventArgs e)
{
    string t = "test";
    drpFunction.SelectedItem.Text = t;
} 
```

或者

```
protected void Page_Load(object sender, EventArgs e)
{
    string t = "test";
    drpFunction.SelectedItem.Value = t;
} 
```

这是正确的方法......

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-01-09T06:02:49.560

这适用于网络

```
ListItem li=new ListItem(); 

li.Text="Stringxyz";
li.Value="Stringxyz";       // Create object of item first and find its index.

DropDownList1.SelectedIndex = DropDownList1.Items.IndexOf(li); 
```

这也很好用。

# oop - 使用没有方法的接口

> ID：10242017
> 
> 赞同：0
> 
> 时间：2012-04-20T07:29:39.317
> 
> 标签：oop, marker-interfaces

我已将真实代码简化为说明这一点的最小示例。请原谅缺少 setter/getter 等。

想象一下，我们有几个客户按顺序浏览的网页。这里的用例是：-

*   用户选择他们想要的书
*   用户选择是否希望通过邮寄或电子邮件发送它以及相关的详细信息
*   系统完成订单

这个问题集中在两种交付方式上。这被建模如下：

```
interface DeliveryDetails
{
    // Implementations of this have nothing in common other than that they
    // fulfil the same logical role.
}

class EmailDeliveryDetails implements DeliveryDetails
{
    String emailAddress;  // It really has a constructor and getter, I promise.
}

class PostalDeliveryDetails implements DeliveryDetails
{
    String streetAddress;
    String Country;
} 
```

现在，为了表示用户在浏览页面时输入的信息，我们有这个类：

```
class PurchaseData
{
    String title;
    DeliveryDetails deliveryDetails;
} 
```

当用户浏览网页时，信息存储在`PurchaseData`. 如果用户返回一个页面，我们可以向他们展示他们之前输入的内容。在用户确认并交付图书后，引用or`deliveryDetails`的一个实例。`PostalDeliveryDetails``EmailDeliveryDetails`

总之，当用户确认他们的信息时：

```
 // Some code in a factory
    if ( purchaseData.deliveryDetails instanceof EmailDelivery )
    {
        // construct a EmailDeliveryService( purchaseData, SMTP details, etc ... )
    }
    if ( purchaseData.deliveryDetails instanceof PostalDelivery )
    {
        // construct a PostalDeliveryService( purchaseData, etc ... )
    }
} 
```

`Delivery`接口没有方法让我很困扰。

这是由于电子邮件和邮政投递之间的差异造成的。

我认为这`DeliveryDetails.deliver()`不是一个好方法，因为这会强制实现静态获取诸如 SMTP 服务器地址之类的东西。这会混淆关注点（管道与用户输入的信息）。

如果您必须存储任意类型的东西，泛型可能很有用。无法使用泛型 ( `PurchaseData<T extends Delivery>`)，因为在创建 PurchaseData 实例时不知道交付类型。无论如何，这对工厂没有帮助。

这个空界面可以吗？有没有更好的方法来设计这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:58:13.287

您的两个实现类都是某种描述符，它们实际上并没有做任何事情。对我来说，在这种情况下使用类层次结构（具有两个子类的抽象基类：EmailDeliveryDetails 和 PostalDeliveryDetails）感觉更干净，即使基类为空。EmailDeliveryDetails**是**DeliveryDetail 而不是 Delivery 实现，除非它实现了传递方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T07:58:18.557

像下面概述的那样的双重调度方法可以工作，但在这种情况下可能会过度杀伤力。我会提到它只是为了给你一些选择......

```
class DeliveryService {
    // base class doesn't handle anything
    process(EmailDelivery details) {}
    process(PostalDelivery details) {}    
}

class EmailDeliveryService extends DeliveryService {
    process(EmailDelivery details) { /* handle */ }
}

class PostalDeliveryService extends DeliveryService {
    process(PostalDelivery details) { /* handle */ }
}

interface DeliveryDetails {
    processWith(DeliveryService service);
}

class EmailDeliveryDetails implements DeliveryDetails {
    processWith(DeliveryService service) { service.process(this); }
}

// try all services (of unknown type) on the given details (also of unknown type)
List<DeliveryService> services = configureServices();
DeliveryDetails details = getDetails();
for (DeliverySerivce service : services) details.processWith(service); 
```

如果添加了新类型的 DeliveryDetails（可能不太可能......），您必须更新 DeliveryService（添加一个空的流程方法）并添加一种新类型的 DeliveryService，它实际上对新类型的 DeliveryDetails 执行某些操作。

可选地， process 和 processWith 方法可以返回布尔值以指示是否处理详细信息。

同样，这种方法在这种情况下可能不必要地复杂，但它解决了处理您最后提出的未知交付类型的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T07:35:59.807

To me the (data) differences between `EmailDeliveryDetails` and `PostalDeliveryDetails` boil down to addresses. So my first instinct would be to extract that data into a separate Address class. Then you may decide to have a single Address with optional fields for emailAddress and streetAddress, or a class hierarchy with distinct subclasses for email and postal addresses.

I would prefer the single class with optional fields, as it is cleaner to use, and to me practicality trumps conceptual "purity".

### Update

Based on the comment chain below:

When there is no overlap between the properties (thus the possible states) of specific classes, it is very awkward to try to handle them polymorphically. And if one doesn't intend to put much functionality into them either, it is even more difficult to handle them in distinct classes inheriting some common interface (as you too noted). OTOH conceptually all of this is some sort of address data, so it can be handled in one class.

Note that most of this is speculation though - it is difficult to reason about your design without more detailed information.

> You are right in that I don't intend to put much behaviour in `EmailDeliveryDetails` and `PostalDeliveryDetails`. In the real application, these details would be persisted in the database and details sent through to outside systems.

Ah OK, so you aren't actually going to treat them polymorphically. You only need a common "handle" to access different bits of data to be persisted. And persistence typically doesn't care about polymorphism and interfaces anyway. In this case having your classes inherit from an empty interface is fine.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T22:35:37.580

`EmailDeliveryDetails`他们的`PostalDeliveryDetails`共同点只有“交付”的概念，但他们的行为和知识都不相同。在这种情况下，共同祖先`DeliveryDetails`是不合适的。

就个人而言，我会从`PurchaseData`.

# jakarta-ee - 即使在安装了安全证书后也出现 SSLhandshake 异常

> ID：10242024
> 
> 赞同：1
> 
> 时间：2012-04-20T07:29:56.383
> 
> 标签：jakarta-ee, jwebunit

“ java.lang.RuntimeException：javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径”

尝试通过 jwebuint 程序连接到网站时出现上述异常。我已经导入了证书 keytool 命令。

我在这里被击中了。请帮帮我。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:00:42.000

1.  `-Djavax.net.debug=ssl,handshhake`使用 ( )上的调试标志运行
2.  您是否向 JVM 指示密钥库/信任库的正确位置？( `javax.net.ssl.keyStore`, `javax.net.ssl.trustStore`, `javax.net.ssl.keyStorePassword`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:12:17.777

谢谢你们..

解决方案：会有两个JRE的-一个在jdk1.2...下，第二个直接在java文件夹下。 **您需要在 ide 安装的 JRE 中的 jre 下使用 keytool 命令安装或导入网站安全证书**

*对于 Eclipse IDE：转到 windows->preferences-> installed jre's* 然后它将显示已安装 jre 的路径。

您需要将证书导入到该特定 jre..

使用keytool命令如下：C:\Program Files\Java\jre6\bin>keytool -import -alias aliasname -keystore ..\lib\security\cacerts -file "D:\Softwares\certificates\mycert.cer"

# php - 使用php获取字符串中第一个大写字母的位置

> ID：10242025
> 
> 赞同：8
> 
> 时间：2012-04-20T07:30:46.880
> 
> 标签：php, string, sorting

我有一个数组，其中每个单词中的不同字母都是大写的，例如：

> 苹果、橙子、香蕉、芒果、木瓜

我想得到第一个大写字母的位置。并相应地订购它们。那就是第一个大写字母的单词是第一个，然后是第二个字母大写的单词，依此类推......就像

> 橙
> 木瓜
> aAple
> 芒果
> 香蕉

如果两个单词的大写字母位于相同的位置，例如上面的列表 Orange 和 Pappaya 的首字母大写，那么它们必须按字母顺序排序。

这在php中很难实现吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T07:39:12.867

你可以使用[`strcspn()`](http://www.php.net/manual/en/function.strcspn.php)

> 查找与掩码不匹配的初始段的长度

例如：

```
echo strcspn('aAple', 'ABCDEFGHJIJKLMNOPQRSTUVWXYZ');
// prints '1' - the string starts with 1 character not in upper case 
```

完整代码

```
echo "<pre>" ;
$array = array("aPple", "Orange", "baNana", "mANgo", "Papaya");
foreach($array as $value)
{
    echo $value , "= " , strcspn($value, 'ABCDEFGHJIJKLMNOPQRSTUVWXYZ') . PHP_EOL;
} 
```

输出

```
aPple= 1
Orange= 0
baNana= 2
mANgo= 1
Papaya= 0 
```

您使用该功能进行（反向）排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T07:41:18.210

```
preg_match("/^.*?[A-Z]/", 'aAple', $arr);

$str_position = (strlen($arr[0]) - 1); 
```

有很多方法可以做到这一点。使用你认为最合乎逻辑的那个。:)

这只是将字符串的第一部分返回到第一个大写字母。然后我计算字符串长度并减去 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T08:00:49.863

如果你使用 PHP > 5.3，你可以使用这个：

```
$test = array("aPple", "Orange", "baNana", "mANgo", "Papaya");

echo implode(', ', array_map(function($value){
    $matches = array();
    preg_match('/[A-Z]/', $value, $matches, PREG_OFFSET_CAPTURE);
    return $matches[0][1];
}, $test)); 
```

否则，您必须创建另一个函数来替换 lambda 函数。

输出：`1, 0, 2, 1, 0`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T09:32:37.983

如果您想要一种非花哨的方式来做到这一点，这是我的建议：

** 获取上限位置***

```
 function getCapsPosn($str)
 {
  $i = 0;
  $CapsPosn = -1;
  for ($i =0 ; $i < strlen($str) ; $i++)
  {
    if (( ord($str[$i]) >= 65 ) && ( ord($str[$i]) <= 90))
    {
        //echo ord($str[$i]);
        $CapsPosn = $i;
        return $CapsPosn;
    }
  }
 } 
```

使用关联数组将 Caps 位置存储在数组中。例如 array['aPple'] = '1' 等等。然后使用php排序函数对其进行排序。PHP 排序函数可以在以下位置找到： http: [//php.net/manual/en/array.sorting.php](http://php.net/manual/en/array.sorting.php)

# sql - BadSqlGrammarException 通过 Spring-JDBC 但不在 SQLDeveloper 中

> ID：10242035
> 
> 赞同：2
> 
> 时间：2012-04-20T07:31:22.900
> 
> 标签：sql, spring, oracle-sqldeveloper, ora-00900

在 SQLDeveloper 中使用以下查询来测试合并一切正常：

```
merge into proj.person_registry pr 
using ( 
select null as id, 
'69696696553' as code, 
'TESTYMC' as name, 
'WHATEVER' as firstname, 
'M' as cl_gender, 
'E' as cl_status, 
null as birth_date, 
null as death_date, 
null as citizen_country_code, 
null as country_code, 
null as location_code, 
null as zip, 
'SOMETOWN' as aadress, 
null as date_updated, 
null as date_created, 
null as aadress_date 
from dual) t on (pr.code = t.code) 
when matched then update set 
pr.name                 = t.name, 
pr.firstname            = t.firstname, 
pr.cl_gender            = t.cl_gender, 
pr.cl_status            = t.cl_status, 
pr.birth_date           = t.birth_date, 
pr.death_date           = t.death_date, 
pr.citizen_country_code = t.citizen_country_code, 
pr.country_code         = t.country_code, 
pr.location_code        = t.location_code, 
pr.zip                  = t.zip, 
pr.aadress              = t.aadress, 
pr.aadress_date         = t.aadress_date 
when not matched then 
insert values (t.id, t.code, t.name, t.firstname, t.cl_gender, t.cl_status, t.birth_date, t.death_date, t.citizen_country_code, t.country_code, t.location_code, t.zip, t.aadress, t.date_created, t.date_updated, t.aadress_date); 
```

但是尝试使用 jdbc 在我的代码中执行它会引发 BadSqlGrammarException，原因如下： java.sql.SQLException: ORA-00900: invalid SQL statement

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T07:02:23.770

您可能已经满足了这一点，但您可能需要转义查询中的单引号。

我还发现，在将查询传递给 Oracle 时，在我的情况下，使用 OPENQUERY 从 SQL Server 传递查询时，分号会使查询失败，并显示该 Oracle 错误代码。

它可能就像从语句末尾删除分号一样简单

# php - 如何在 /fql/profile/ API 中使用 'pic_crop'

> ID：10242048
> 
> 赞同：1
> 
> 时间：2012-04-20T07:31:58.440
> 
> 标签：php, facebook, facebook-fql, crop

[我想在此链接https://developers.facebook.com/docs/reference/fql/profile/](https://developers.facebook.com/docs/reference/fql/profile/)中使用 Facebook 查询语言中的 Profile 的 pic_crop 对象 我在我的个人资料图片上激活了它并得到了这些结果：

```
<fql_query_response list="true">
  <profile>
    <pic_crop>
      <uri>https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/xxxxxx_xxxxxxxx_xxxxxxxxxx_n.jpg</uri>
      <width>180</width>
      <height>173</height>
      <left>0.08468</left>
      <top>0.06897</top>
      <right>0.91532</right>
      <bottom>0.93103</bottom>
    </pic_crop>
  </profile>
</fql_query_response> 
```

宽度和高度是大图中正方形的大小。如果我错了，请纠正我，但我知道`top left`和`bottom right`是原始大图中的坐标，可以正确定位正方形。我不明白这些到底是什么坐标。如何使用`<left>0.08468</left>` `<top>0.06897</top>`我可以到达大图左上角的像素来裁剪正方形的信息？顺便说一句，我正在用 PHP 编写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:14:00.777

左、上、右、下是比例，不是绝对位置。

```
x = width * left = 15.2424
y = height * top = 11.93181
sw = width * (right-left) = 149.5152
sh = height * (bottom -top ) = 149.13638 
```

其中 sw,sh 是正方形的宽度和高度。

# matlab - MATLAB 默认图形字体大小

> ID：10242049
> 
> 赞同：6
> 
> 时间：2012-04-20T07:31:58.857
> 
> 标签：matlab, default-value, font-size, matlab-figure

我发现我可以放入`set(0, 'DefaultAxesFontSize',14)`一个 startup.m 文件，然后更改刻度、轴标签和我的图形标题的默认字体大小。是否可以为标题或轴标签设置单独的默认字体大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-19T18:07:58.617

您不能使用标准机制为标题和标签设置单独的默认字体大小。如果您愿意重载标签命令，那么您可以非常接近。最简单的方法是修改`xlabel`以允许使用默认字体。您需要添加

```
if ~isempty(getappdata(ax, 'DefaultAxesXLabelFontSize'))
    set(h, 'FontSize', getappdata(ax, 'DefaultAxesXLabelFontSize'));
else
    if ~isempty(getappdata(get(ax, 'parent'), 'DefaultAxesXLabelFontSize'))
        set(h, 'FontSize', getappdata(get(ax, 'parent'), 'DefaultAxesXLabelFontSize'));
    elseif ~isempty(getappdata(0, 'DefaultAxesXLabelFontSize'))
        set(h, 'FontSize', getappdata(0, 'DefaultAxesXLabelFontSize'));
    end
end 
```

就在之前

```
set(h, 'String', string, pvpairs{:}); 
```

如果您不想修改核心文件，则可以重载`xlabel`

```
function varargout = xlabel(varargin)
    ax = axescheck(varargin{:});
    if isempty(ax)
      ax = gca;
    end
    oldPath = pwd;
    cd([matlabroot, filesep, 'toolbox', filesep, 'matlab', filesep, 'graph2d']);
    xlabel = str2func('xlabel');
    cd(oldPath);

    oldFontsize = get(ax, 'FontSize');
    if ~isempty(getappdata(ax, 'DefaultAxesXLabelFontSize'))
        set(ax, 'FontSize', getappdata(ax, 'DefaultAxesXLabelFontSize'));
    else
            if ~isempty(getappdata(get(ax, 'parent'), 'DefaultAxesXLabelFontSize'))
                set(ax, 'FontSize', getappdata(get(ax, 'parent'), 'DefaultAxesXLabelFontSize'));
        elseif ~isempty(getappdata(0, 'DefaultAxesXLabelFontSize'))
                set(ax, 'FontSize', getappdata(0, 'DefaultAxesXLabelFontSize'));
           end
    end
    varargout{1:nargout} = xlabel(varargin{:});
    set(ax, 'FontSize', oldFontsize);
    if ~nargout
        varargout = {};
    end
end 
```

无论哪种方式，您都可以设置默认字体大小

```
setappdata(0, 'DefaultAxesXLabelFontSize', 36) 
```

或者

```
setappdata(gcf, 'DefaultAxesXLabelFontSize', 36) 
```

或者

```
setappdata(gca, 'DefaultAxesXLabelFontSize', 36) 
```

请注意，它使用`setappdata`而不是`set`.

# c++ - 如何在 C++ 中找到未知窗口的句柄？

> ID：10242051
> 
> 赞同：0
> 
> 时间：2012-04-20T07:32:01.793
> 
> 标签：c++, window, handler, pocketpc

我想找到一个窗口的句柄，它的标题可能是*** *.log****类型，其中******.log**可以是**temp.log、dummy.log 等。****

 ****我不知道标题，但我知道日志类型的扩展名。**

我知道`FindWindow`API 用于查找窗口的句柄，但我们需要知道标题名称。因此，如果我对窗口一无所知，只知道扩展名，那么如何使用 c++ 检索相同的句柄？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:41:39.090

多年没有使用 WinAPI，但如果我没记错的话，有一个[EnumWindows](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497%28v=vs.85%29.aspx)函数可以在这种情况下使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T07:47:37.183

您可以将[EnumWindows](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497%28v=vs.85%29.aspx)用于顶级窗口，并使用[GetWindowText](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520%28v=vs.85%29.aspx)来检索标题。

[PathMatchSpec](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773727%28v=vs.85%29.aspx)应该适用于您的模式匹配。

如果您要求的进程没有响应，GetWindowText 确保您不会“停止”。**

# iphone - 如何在 Apple 的 MixerHost 核心音频示例中阻止音频文件循环播放

> ID：10242057
> 
> 赞同：1
> 
> 时间：2012-04-20T07:32:37.107
> 
> 标签：iphone, c, core-audio

我有一个应用程序，允许用户使用音频单元记录节拍。为了实现这一点，我从 Apple 的 MixerHost 示例代码中修改了 Mixer 类。

目前我的声音文件循环，我想停止它。我希望用户能够在声音文件通过后保存混音。

循环的原因是函数`for loop`以下部分的最后一行`inputrendercallback`：

```
for (UInt32 frameNumber = 0; frameNumber < inNumberFrames; ++frameNumber) {

        outSamplesChannelLeft[frameNumber]                 = dataInLeft[sampleNumber];
        if (isStereo) outSamplesChannelRight[frameNumber]  = dataInRight[sampleNumber];

        sampleNumber++;

        // After reaching the end of the sound stored in memory--that is, after
        //    (frameTotalForSound / inNumberFrames) invocations of this callback--loop back to the 
        //    start of the sound so playback resumes from there.
        if (sampleNumber >= frameTotalForSound) sampleNumber = 0;
    } 
```

我意识到我需要进行更改`if (sampleNumber >= frameTotalForSound) sampleNumber = 0;`，以便在样本用完后告诉回调停止请求样本，但是我在目标 C 中调用方法要比操作这个 C-Struct 更舒服。

有人对如何做到这一点有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:28:15.480

我只能想象很多人一定遇到过这个音频文件循环问题，因为 MixerHost 是 Apple 提供的为数不多的宝贵 Core Audio 示例之一。

我通过使用 NSNotificationCenter 解决了这个问题。在谴责在 C 函数中使用 Objective C 之前，请认识到我是通过在 MixerHost 示例本身中模仿 Apple 代码的其他部分来找到这个解决方案的。例如，要暂停程序并指示耳机已拔出，或者设备已从底座连接器中移除，Apple 使用了 MixerHostAudio 类中的通知中心`audioRouteChangeListenerCallback`：

```
 if (routeChangeReason == kAudioSessionRouteChangeReason_OldDeviceUnavailable) {

            NSLog (@"Audio output device was removed; stopping audio playback.");
            NSString *MixerObjectPlaybackStateDidChangeNotification = @"MixerObjectPlaybackStateDidChangeNotification";
            [[NSNotificationCenter defaultCenter] postNotificationName: MixerObjectPlaybackStateDidChangeNotification object: audioObject]; 
```

我决定还从`inputrendercallback`函数中发布通知：

```
for (UInt32 frameNumber = 0; frameNumber < inNumberFrames; ++frameNumber) {

        if (sampleNumber == frameTotalForSound) {

            NSString *AudioFileFinishedPlaying = @"AudioFileFinishedPlaying";
            [[NSNotificationCenter defaultCenter] postNotificationName: AudioFileFinishedPlaying object: nil];
        }

        outSamplesChannelLeft[frameNumber]                 = dataInLeft[sampleNumber];
        if (isStereo) outSamplesChannelRight[frameNumber]  = dataInRight[sampleNumber];

        sampleNumber++;

... 
```

然后我在程序的另一部分使用该 `addObserver:selector:name:object:`方法来停止循环并执行与我的应用程序密切相关的其他任务。

我希望这会有所帮助。如果有人有更好的解决方案，那么我愿意接受。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T07:05:00.033

您不应在音频处理或缓冲区回调的内部循环中使用任何 Objective C 消息传递。无缘无故的循环开销太大。坚持在 C 结构中使用内在的 C 类型。设置标志变量是可以的。稍后在回调和内部音频样本循环之外执行任何需要的对象消息传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T05:23:19.530

感谢您发布您的解决方案，它有效，并且与 Apple 声明其他通知的方式不一致。几点注意事项：

1.  如果您正在混合多个文件，这将在最短的文件到达结尾时停止播放器。

2.  我尝试了以下代码（假设 inputrendercallback 函数的其余部分未更改）：

    if (sampleNumber >= frameTotalForSound) { NSLog(@"到达终点！"); 这.stopAUGraph; 样本数 = 0；// 万一想再玩一次 }

# continuous-integration - 在持续集成中使用 rake jasmine:ci 的最佳方式？

> ID：10242059
> 
> 赞同：1
> 
> 时间：2012-04-20T07:33:00.047
> 
> 标签：continuous-integration, rake, jasmine

我读过一些技巧，你可以使用 NokoGiri 来保存你的 rails 应用程序的 html，然后使用它作为模板来读入你的 rake jasmine:ci 测试，并以某种方式使用它，就像你在你的 rails 应用程序中一样，然后Hudson 说，规范在持续集成中正常运行。有没有更好的方式在持续集成中运行 rake jasmine:ci？

# google-chrome - 用于更改“页面搜索”行为的 Chrome 扩展程序。这有可能做到吗？

> ID：10242060
> 
> 赞同：1
> 
> 时间：2012-04-20T07:33:07.723
> 
> 标签：google-chrome, search, interface, module

**嗨，铬专业人士！**

我有一个 chrome 扩展的想法：能够通过在页面上搜索找到的链接。*总体思路是这样的：*你有一个包含一堆链接的网页。您不想直观地扫描所有这些，因此您按 Ctrl+f 并搜索您想要的链接。现在不再使用鼠标单击链接，而是最后按下 Ctrl+Enter 来跟随链接。

现在我一直在查看 Chrome 扩展 API，但似乎找不到开始开发扩展的抓手。*所以我的问题是*——扩展是否有可能改变 chrome 应用程序本身的行为，在这种情况下，我应该在哪里查看 API、教程或任何其他可以让我开始的资源。

感谢您提供的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:22:06.793

嗯，很抱歉发送了三条评论，但我刚刚意识到它确实有效。（Ubuntu 中的 Chrome 18.0.1025.162）

同样，如果您出于其他原因想要修改核心行为，则需要将代码注入到 Chrome 进程中，这并不漂亮。

# c# - c# 创建日志文件的最佳方法

> ID：10242061
> 
> 赞同：32
> 
> 时间：2012-04-20T07:33:12.510
> 
> 标签：c#, file, logging

我正在编写一个工具，它将通过网络检查工作站的健康状况，并根据它发现的问题进行修复。我想创建一个日志文件，因为应用程序在每台机器上运行其任务/检查。我现在只想让它在一台机器上工作，但随着时间的推移，它将一次扫描 100 多台机器（线程已结束）。

***创建日志文件的最佳方法是什么？***

我正在考虑使用 a`List<string>`在内存中建立日志文件，然后在完成后将其输出到文件中。

我只是在想可能有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T07:59:06.233

我会推荐[log4net](http://www.l4ndash.com/Log4NetMailArchive/tabid/70/forumid/1/postid/17248/view/topic/Default.aspx)。

您将需要多个日志文件。所以多个文件附加程序。另外，您可以动态创建文件附加程序。

**示例代码：**

```
using log4net;
using log4net.Appender;
using log4net.Layout;
using log4net.Repository.Hierarchy;

// Set the level for a named logger
public static void SetLevel(string loggerName, string levelName)
{
    ILog log = LogManager.GetLogger(loggerName);
    Logger l = (Logger)log.Logger;

    l.Level = l.Hierarchy.LevelMap[levelName];
    }

// Add an appender to a logger
public static void AddAppender(string loggerName, IAppender appender)
{
    ILog log = LogManager.GetLogger(loggerName);
    Logger l = (Logger)log.Logger;

    l.AddAppender(appender);
}

// Create a new file appender
public static IAppender CreateFileAppender(string name, string fileName)
{
    FileAppender appender = new
        FileAppender();
    appender.Name = name;
    appender.File = fileName;
    appender.AppendToFile = true;

    PatternLayout layout = new PatternLayout();
    layout.ConversionPattern = "%d [%t] %-5p %c [%x] - %m%n";
    layout.ActivateOptions();

    appender.Layout = layout;
    appender.ActivateOptions();

    return appender;
}

// In order to set the level for a logger and add an appender reference you
// can then use the following calls:
SetLevel("Log4net.MainForm", "ALL");
AddAppender("Log4net.MainForm", CreateFileAppender("appenderName", "fileName.log"));

// repeat as desired 
```

来源/良好链接：

[Log4Net：以编程方式指定多个记录器（带有多个文件附加器）](https://stackoverflow.com/questions/308436/log4net-programmatically-specify-multiple-loggers-with-multiple-file-appenders)

[以编程方式添加附加程序](http://www.l4ndash.com/Log4NetMailArchive/tabid/70/forumid/1/postid/17248/view/topic/Default.aspx)

[如何从头开始以编程方式配置 log4net（无配置）](https://stackoverflow.com/questions/769983/how-to-configure-log4net-programmatically-from-scratch-no-config)

此外，log4net 还允许写入事件日志。一切都是基于配置的，配置也可以在运行时从 xml 动态加载。

**编辑2：**

动态切换日志文件的一种方法：Log4Net 配置文件支持环境变量：

```
Environment.SetEnvironmentVariable("log4netFileName", "MyApp.log"); 
```

在 log4net 配置中：

```
<param name="File" value="${log4netFileName}".log/> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-20T08:35:46.453

我不会使用第三方库，我会登录到 xml 文件。

这是一个从不同线程记录到 xml 文件的代码示例：

```
private static readonly object Locker = new object();
private static XmlDocument _doc = new XmlDocument();

static void Main(string[] args)
{
    if (File.Exists("logs.txt"))
        _doc.Load("logs.txt");
    else
    {
        var root = _doc.CreateElement("hosts");
        _doc.AppendChild(root);
    }

    for (int i = 0; i < 100; i++)
    {
        new Thread(new ThreadStart(DoSomeWork)).Start();
    }
}

static void DoSomeWork()
{
    /*
     * Here you will build log messages
     */
    Log("192.168.1.15", "alive");
}

static void Log(string hostname, string state)
{
    lock (Locker)
    {
        var el = (XmlElement)_doc.DocumentElement.AppendChild(_doc.CreateElement("host"));
        el.SetAttribute("Hostname", hostname);
        el.AppendChild(_doc.CreateElement("State")).InnerText = state;
        _doc.Save("logs.txt");
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-20T07:39:29.483

You might want to use the Event Log ! Here's how to access it from C# [http://support.microsoft.com/kb/307024/en](http://support.microsoft.com/kb/307024/en)

But whatever is the method that you will use, I'd recommend to output to a file every time something is appended to the log rather than when your process exits, so you won't lose data in the case of crash or if your process is killed.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-20T07:52:57.783

使用 Nlog [http://nlog-project.org/](http://nlog-project.org/)。它是免费的，允许写入文件、数据库、事件日志和其他 20 多个目标。另一个日志框架是 log4net - [http://logging.apache.org/log4net/](http://logging.apache.org/log4net/)（从 java Log4j 项目移植）。它也是免费的。

最佳实践是使用通用日志记录 - [http://commons.apache.org/logging/](http://commons.apache.org/logging/) 因此您可以稍后将 NLog 或 log4net 更改为其他日志记录框架。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-20T07:54:12.937

我们对日志记录进行了大量研究，并认为 NLog 是最好的。

见[http://nlog-project.org/](http://nlog-project.org/)

另请参阅[log4net 与 Nlog](https://stackoverflow.com/questions/710863/log4net-vs-nlog) 和[http://www.dotnetlogging.com/comparison/](http://www.dotnetlogging.com/comparison/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-18T10:10:24.930

您可以使用[Apache log4net 库](http://logging.apache.org/)：

```
using System;
using log4net;
using log4net.Config;

public class MyApp
{
    // Define a static logger variable so that it references the
    // Logger instance named "MyApp".
    private static readonly ILog log = LogManager.GetLogger(typeof(MyApp));
    static void Main(string[] args)
    {
        XmlConfigurator.Configure(new System.IO.FileInfo(@"..\..\resources\log4net.config"));
        log.Info("Entering application.");
        Console.WriteLine("starting.........");
        log.Info("Entering application.");
        log.Error("Exiting application.");
        Console.WriteLine("starting.........");
    }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-18T10:45:01.543

添加这个配置文件

* * *

```
*************************************************************************************
<!--Configuration for file appender-->

<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>
  <log4net>
    <appender name="FileAppender" type="log4net.Appender.FileAppender">
      <file value="logfile.txt" />
      <appendToFile value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%d [%t] %-5p [%logger] - %m%n" />
      </layout>
    </appender>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="FileAppender" />
    </root>
  </log4net>
</configuration>

*************************************************************************************

<!--Configuration for console appender-->

<configuration>

  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,
        log4net" />
  </configSections>

  <log4net>
    <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender" >
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%d [%t] %-5p [%logger] - %m%n" />
      </layout>
    </appender>
   <root>
      <level value="ALL" />
      <appender-ref ref="ConsoleAppender" />
    </root>
  </log4net>
</configuration> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-04-20T07:45:11.227

您还可以查看内置的 .NET 跟踪工具。有一组跟踪侦听器允许您输出到日志文件，但您可以将其配置为登录到事件查看器或数据库（或同时登录到所有数据库）。

[http://www.codeguru.com/csharp/.net/net_debugging/tracing/article.php/c5919/NET-Tracing-Tutorial.htm](http://www.codeguru.com/csharp/.net/net_debugging/tracing/article.php/c5919/NET-Tracing-Tutorial.htm)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-04-20T07:40:27.827

You can use [http://logging.apache.org/](http://logging.apache.org) library and use a database appender to collect all your log info together.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-10-02T22:27:04.880

我正在使用线程安全的**静态**类。主要思想是将消息排队在列表中，然后在每个时间段或每个计数器限制中保存到日志文件。

`DirectLog.SaveToFile();`重要提示：您应该在退出程序时强制保存文件 ( )。（如果列表中还有一些项目）

使用非常简单：`DirectLog.Log("MyLogMessage", 5);`

这是我的代码：

```
using System;
using System.IO;
using System.Collections.Generic;

namespace Mendi
{

    /// <summary>
    /// class used for logging misc information to log file
    /// written by Mendi Barel
    /// </summary>
    static class DirectLog
    {
        readonly static int SAVE_PERIOD = 10 * 1000;// period=10 seconds
        readonly static int SAVE_COUNTER = 1000;// save after 1000 messages
        readonly static int MIN_IMPORTANCE = 0;// log only messages with importance value >=MIN_IMPORTANCE

        readonly static string DIR_LOG_FILES = @"z:\MyFolder\";

        static string _filename = DIR_LOG_FILES + @"Log." + DateTime.Now.ToString("yyMMdd.HHmm") + @".txt";

        readonly static List<string> _list_log = new List<string>();
        readonly static object _locker = new object();
        static int _counter = 0;
        static DateTime _last_save = DateTime.Now;

        public static void NewFile()
        {//new file is created because filename changed
            SaveToFile();
            lock (_locker)
            {

                _filename = DIR_LOG_FILES + @"Log." + DateTime.Now.ToString("yyMMdd.HHmm") + @".txt";
                _counter = 0;
            }
        }
        public static void Log(string LogMessage, int Importance)
        {
            if (Importance < MIN_IMPORTANCE) return;
            lock (_locker)
            {
                _list_log.Add(String.Format("{0:HH:mm:ss.ffff},{1},{2}", DateTime.Now, LogMessage, Importance));
                _counter++;
            }
            TimeSpan timeDiff = DateTime.Now - _last_save;

            if (_counter > SAVE_COUNTER || timeDiff.TotalMilliseconds > SAVE_PERIOD)
                SaveToFile();
        }

        public static void SaveToFile()
        {
            lock (_locker)
                if (_list_log.Count == 0)
                {
                    _last_save = _last_save = DateTime.Now;
                    return;
                }
            lock (_locker)
            {
                using (StreamWriter logfile = File.AppendText(_filename))
                {

                    foreach (string s in _list_log) logfile.WriteLine(s);
                    logfile.Flush();
                    logfile.Close();
                }

                _list_log.Clear();
                _counter = 0;
                _last_save = DateTime.Now;
            }
        }

        public static void ReadLog(string logfile)
        {
            using (StreamReader r = File.OpenText(logfile))
            {
                string line;
                while ((line = r.ReadLine()) != null)
                {
                    Console.WriteLine(line);
                }
                r.Close();
            }
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-12T18:17:18.573

我没有使用外部库 log4net，而是创建了自己的简单类，高度可定制且易于使用（使用`YOURNAMESPACEHERE`您需要的命名空间进行编辑）。

> 控制台应用程序

```
using System;
using System.IO;

namespace YOURNAMESPACEHERE
{
    enum LogEvent
    {
        Info = 0,
        Success = 1,
        Warning = 2,
        Error = 3
    }

    internal static class Log
    {
        private static readonly string LogSession = DateTime.Now.ToLocalTime().ToString("ddMMyyyy_HHmmss");
        private static readonly string LogPath = AppDomain.CurrentDomain.BaseDirectory + "logs";

        internal static void Write(LogEvent Level, string Message, bool ShowConsole = true, bool WritelogFile = true)
        {
            string Event = string.Empty;
            ConsoleColor ColorEvent = Console.ForegroundColor;

            switch (Level)
            {
                case LogEvent.Info:
                    Event = "INFO";
                    ColorEvent = ConsoleColor.White;
                    break;
                case LogEvent.Success:
                    Event = "SUCCESS";
                    ColorEvent = ConsoleColor.Green;
                    break;
                case LogEvent.Warning:
                    Event = "WARNING";
                    ColorEvent = ConsoleColor.Yellow;
                    break;
                case LogEvent.Error:
                    Event = "ERROR";
                    ColorEvent = ConsoleColor.Red;
                    break;
            }

            if (ShowConsole)
            {
                Console.ForegroundColor = ColorEvent;
                Console.WriteLine(" [{0}] => {1}", DateTime.Now.ToString("HH:mm:ss"), Message);
                Console.ResetColor();
            }

            if (WritelogFile)
            {
                if (!Directory.Exists(LogPath))
                    Directory.CreateDirectory(LogPath);

                File.AppendAllText(LogPath + @"\" + LogSession + ".log", string.Format("[{0}] => {1}: {2}\n", DateTime.Now.ToString("HH:mm:ss"), Event, Message));
            }
        }
    }
} 
```

> 没有控制台应用程序（只有日志）

```
using System;
using System.IO;

namespace YOURNAMESPACEHERE
{
    enum LogEvent
    {
        Info = 0,
        Success = 1,
        Warning = 2,
        Error = 3
    }

internal static class Log
{
    private static readonly string LogSession = DateTime.Now.ToLocalTime().ToString("ddMMyyyy_HHmmss");
    private static readonly string LogPath = AppDomain.CurrentDomain.BaseDirectory + "logs";

    internal static void Write(LogEvent Level, string Message)
    {
        string Event = string.Empty;

        switch (Level)
        {
            case LogEvent.Info:
                Event = "INFO";
                break;
            case LogEvent.Success:
                Event = "SUCCESS";
                break;
            case LogEvent.Warning:
                Event = "WARNING";
                break;
            case LogEvent.Error:
                Event = "ERROR";
                break;
        }

        if (!Directory.Exists(LogPath))
            Directory.CreateDirectory(LogPath);

        File.AppendAllText(LogPath + @"\" + LogSession + ".log", string.Format("[{0}] => {1}: {2}\n", DateTime.Now.ToString("HH:mm:ss"), Event, Message));
    }
} 
```

用法：

> 控制台应用程序

```
Log.Write(LogEvent.Info, "Test message"); // It will print an info in your console, also will save a copy of this print in a .log file.
Log.Write(LogEvent.Warning, "Test message", false); // It will save the print as warning only in your .log file.
Log.Write(LogEvent.Error, "Test message", true, false); // It will print an error only in your console. 
```

> 没有控制台应用程序（只有日志）

```
Log.Write(LogEvent.Info, "Test message"); // It will print an info in your .log file. 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-11-15T08:42:00.357

我发现GitHub上[heiswayi的](https://gist.github.com/heiswayi)[SimpleLogger](https://gist.github.com/heiswayi/69ef5413c0f28b3a58d964447c275058)很好。

# opensuse - 如何在 opensuse 中安装和配置 gitweb？

> ID：10242062
> 
> 赞同：0
> 
> 时间：2012-04-20T07:33:14.443
> 
> 标签：opensuse, gitweb

当我运行“zypper install gitweb”时，它返回：

```
Loading repository data...
Reading installed packages...
'gitweb' not found in package names. Trying capabilities.
No provider of 'gitweb' found.
Resolving package dependencies...

Nothing to do. 
```

zypper se gitweb 也显示“未找到包”。我的 openSUSE 版本是 11.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:02:32.867

你想安装包`git-web`吗？

# c++ - 从 Windows 中的 waf 构建 Qt 程序中删除控制台

> ID：10242063
> 
> 赞同：3
> 
> 时间：2012-04-20T07:33:19.640
> 
> 标签：c++, windows, qt, waf, subsystem

[我有这个使用waf](http://docs.waf.googlecode.com/git/apidocs_16/tools/msvc.html#waflib.Tools.msvc.apply_flags_msvc)构建的 Qt 程序。我正在 Windows 中对其进行测试，每次运行 exe 文件时，控制台都会打开。在 (Qt)pro 文件中（如果使用 qmake 构建），您只需要确保删除

```
CONFIG += console 
```

但我不确定是什么链接器标志，我必须在我的 wscript(waf) 中添加才能实现这一点。我必须指定[`/SUBSYSTEM: WINDOWS`](http://msdn.microsoft.com/en-us/library/fcc1zstk%28v=vs.100%29.aspx)msvc 编译器将我的程序作为 Windows 程序

请帮忙。

我的 wscript.py

```
#! /usr/bin/env python
# encoding: utf-8
# Thomas Nagy, 2005, 2011 (ita)
"""
Including the moc files *is* the best practice (KDE), not doing it is easy,
but makes the compilations about 30-40% slower on average.
If you still want the slow version (we warned you!), see the example located
in the folder playground/slow_qt/
"""
VERSION='0.0.1'
APPNAME='qt4_test'
top = '.'
out = 'build'
def options(opt): 
    opt.load('compiler_cxx qt4 compiler_c boost')
def configure(conf):
    conf.load('compiler_cxx qt4 compiler_c boost')
    #if conf.env.COMPILER_CXX == 'msvc': g++
    #conf.check_tool('boost')
    conf.env.append_value('CXXFLAGS', ['-DWAF=1']) # test
    #conf.env.append_value('DWAF','1')
    #conf.recurse(subdirs)
    #conf.check_cc( ccflags='-mwindows', mandatory=True, msg='Checking for flags -mwindows')
def build(bld):
    cxxflags = bld.env.commonCxxFlags
    uselibcommon = 'QTCORE QTGUI QTOPENGL QTSVG QWIDGET QTSQL QTUITOOLS QTSCRIPT'
    bld(features = 'qt4 cxx',  includes = '.',source   = 'ListModel.cpp', target = 'ListModel.o', uselib = uselibcommon, cxxflags=cxxflags)
    bld(features = 'qt4 cxx',  includes = '.', source   = 'Model.cpp', target = 'Model.o', uselib = uselibcommon,  cxxflags=cxxflags)
    bld(features = 'qt4 cxx',  includes = '.', source = 'ProxyModel.cpp' , target = 'ProxyModel.o', uselib = uselibcommon, cxxflags=cxxflags)
    flags = cxxflags + ['-DWAF']
    bld(features = 'qt4 cxx',  includes = bld.options.boost_includes, source = 'TableModel.cpp', target = 'TableModel.o', uselib = uselibcommon, cxxflags=flags)
    bld(features = 'qt4 cxx',  includes = '.', source   = 'SongItem.cpp', target = 'SongItem.o',use = 'ListModel.o',  cxxflags=cxxflags)

    use = [ 'sqlite3.o', 'Master.o' , 'DatabaseUtil' , 'SQLiteError.o' ,  'Vector.o' , 'Song.o' , 'Songs.o' , 'SQLiteVector.o' , 'SQLiteVectorIterator.o' , 'ListModel.o' , 'Model.o' , 'TableModel.o' , 'SongItem.o'  ,  'ProxyModel.o']
    bld(features = 'qt4 cxx c', uselib = uselibcommon, includes = bld.options.boost_includes , source   = 'MainWindow.cpp' , target = 'MainWindow.o', lib = ['phonon'], libpath = ['/usr/lib'], use = use, cxxflags=cxxflags)

    use = [ 'sqlite3.o', 'Master.o' , 'DatabaseUtil' , 'SQLiteError.o' ,  'Vector.o' , 'Song.o' , 'Songs.o' , 'SQLiteVector.o' , 'SQLiteVectorIterator.o' , 'ListModel.o' , 'Model.o' , 'TableModel.o' , 'SongItem.o'  , 'ProxyModel.o',
    'MainWindow.o']
    bld(features = 'qt4 cxx cxxprogram', includes = bld.options.boost_includes, source = 'main.cpp MasterDetail.qrc', target   = 'app', uselib = uselibcommon , cxxflags=cxxflags, use = use, linkflags = (['-Wl,-subsystem,windows']) )

from waflib.TaskGen import feature, before_method, after_method
@feature('cxx')
@after_method('.')
@before_method('apply_incpaths')
def add_includes_paths(self):
        incs = set(self.to_list(getattr(self, 'includes', '')))
        for x in self.compiled_tasks:
                incs.add(x.inputs[0].parent.path_from(self.path))
        self.includes = list(incs) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T08:41:30.120

我得到了解决方案

在 Windows 上，使用（mingw）

```
linkflags = ['-Wl,-subsystem,windows'], -> to disable the console
linkflags = ['-Wl,-subsystem,console'], -> to enable the console 
```

使用 (msvc)

```
subsystem='windows', -> to disable the console
subsystem='console', -> to enable the console 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:26:23.260

我认为你需要/SUBSYSTEM:WINDOWS，而不是/SUBSYSTEM = WINDOWS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:55:59.087

一旦我使用了一种骇人听闻的方法——当一个应用程序，取决于命令行标志，必须表现为一个控制台应用程序或一个 UI 应用程序（没有控制台）。它归结为（在 Windows 下）将其构建为控制台应用程序并在满足某些条件时摆脱控制台：

```
#include <windows.h>

if(getRidOfTheConsole)
    FreeConsole(); 
```

另一种选择（您已经知道）是使用`/SUBSYSTEM:WINDOWS`. 我不知道如何将其放入`waf`，但是还有另一种方法 - 将以下内容放入您的文件中`int main()`：

```
#pragma comment(linker, "/SUBSYSTEM:windows /ENTRY:mainCRTStartup") 
```

# sql - 选择按所有字段分组的结果

> ID：10242065
> 
> 赞同：1
> 
> 时间：2012-04-20T07:33:35.087
> 
> 标签：sql, sql-server, tsql, select

我想要按所有字段分组的结果。我通过使用 - **WITH**关键字实现了它。有没有其他方法可以做到这一点？

```
WITH    T AS ( SELECT   a.codeid AS VendorID ,
                                    a.hname ,
                                    a.hnamee ,
                                    CASE WHEN v.AudienceID = 0 THEN 1
                                         ELSE 0
                                    END AS HasAll
                           FROM     dbo.dtAny AS a
                                    LEFT JOIN VendorAudience AS v ON a.codeid = v.VendorID
                           WHERE    a.hrclvl = @level
                                    AND a.dcode = @dcode
                                    AND a.codeid = ISNULL(@VendorID, a.codeid)
                         )
    SELECT  VendorID ,
            hname ,
            hnamee ,
            HasAll
    FROM    T
    GROUP BY vendorid ,
            hname ,
            hnamee ,
            HasAll 
```

我想要这样的东西：

```
 SELECT   a.codeid AS VendorID ,
                                    a.hname ,
                                    a.hnamee ,
                                    CASE WHEN v.AudienceID = 0 THEN 1
                                         ELSE 0
                                    END AS HasAll
                           FROM     dbo.dtAny AS a
                                    LEFT JOIN VendorAudience AS v ON a.codeid = v.VendorID
                           WHERE    a.hrclvl = @level
                                    AND a.dcode = @dcode
                                    AND a.codeid = ISNULL(@VendorID, a.codeid)
                                    GROUP BY VendorID ,a.hname ,a.hnamee ,HasAll 
```

但尝试按 HasAll 分组时出错。（我不需要按 v.AudienceID 分组）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:42:45.987

查询应该是

```
SELECT   a.codeid AS VendorID ,
                                    a.hname ,
                                    a.hnamee ,
                                    CASE WHEN v.AudienceID = 0 THEN 1
                                         ELSE 0
                                    END AS HasAll
                           FROM     dbo.dtAny AS a
                                    LEFT JOIN VendorAudience AS v ON a.codeid = v.VendorID
                           WHERE    a.hrclvl = @level
                                    AND a.dcode = @dcode
                                    AND a.codeid = ISNULL(@VendorID, a.codeid)
                                    GROUP BY VendorID ,a.hname ,a.hnamee ,
                                    CASE WHEN   v.AudienceID = 0 THEN 1
                                         ELSE 0
                                    END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:44:59.927

您可以将其用作派生表。

```
SELECT VendorID ,a.hname ,a.hnamee ,HasAll
FROM (SELECT a.codeid AS VendorID ,
        a.hname ,
        a.hnamee ,
        CASE WHEN v.AudienceID = 0 THEN 1
            ELSE 0
        END AS HasAll
    FROM     dbo.dtAny AS a
        LEFT JOIN VendorAudience AS v ON a.codeid = v.VendorID
    WHERE    a.hrclvl = @level
        AND a.dcode = @dcode
        AND a.codeid = ISNULL(@VendorID, a.codeid)) [Table]
GROUP BY VendorID ,a.hname ,a.hnamee ,HasAll 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:36:57.630

如果您按所有列分组，则无需使用 DISTINCT，因为无论如何输出都是唯一的。我倾向于同意上面的 Miika，但没有理由你原来的方法行不通。

苹果电脑

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T07:49:01.127

这`DISTINCT`就是用于：

```
WITH    T AS ( SELECT   a.codeid AS VendorID ,
                        a.hname ,
                        a.hnamee ,
                        CASE WHEN v.AudienceID = 0 THEN 1
                             ELSE 0
                        END AS HasAll
               FROM     dbo.dtAny AS a
                        LEFT JOIN VendorAudience AS v ON a.codeid = v.VendorID
               WHERE    a.hrclvl = @level
                        AND a.dcode = @dcode
                        AND a.codeid = ISNULL(@VendorID, a.codeid)
             )
SELECT DISTINCT *
FROM T 
```

# c# - Windows 安全自定义登录验证

> ID：10242067
> 
> 赞同：8
> 
> 时间：2012-04-20T07:33:42.167
> 
> 标签：c#, .net, windows

我正在创建一个 Xaml/C# 应用程序，我希望它弹出一个登录提示。

我想知道是否可以使用 CredUIPromptForWindowsCredentials。

*   显示 Windows 安全对话框
*   获取输入的用户名和密码
*   执行自定义验证
*   如果验证成功 -> 继续应用
*   否则，如果验证失败 -> - 通知用户无效的用户名或密码

我已经查看了[Windows 安全登录表单？](https://stackoverflow.com/questions/5422140/windows-security-login-form)和[http://www.pinvoke.net/default.aspx/credui/creduipromptforwindowscredentials.html?diff=y](http://www.pinvoke.net/default.aspx/credui/creduipromptforwindowscredentials.html?diff=y)但他们没有解释如何处理验证。

我真的很想要一个小例子，如果用户输入用户名=“Bo”和密码=“123”然后成功，否则显示错误消息并允许用户重试。

该应用程序将安装在多台计算机上。

或者这根本不可能？

**更新**

灵感来自这个问题的答案[Show Authentication dialog in C# for windows Vista/7](https://stackoverflow.com/questions/4134882/show-authentication-dialog-in-c-sharp-for-windows-vista-7)

我已修改代码以按预期工作。

请不要，验证部分仅用于概念证明。

WindowsSecurityDialog.cs

```
 public class WindowsSecurityDialog
    {

       public string CaptionText { get; set; }
       public string MessageText { get; set; }

        [DllImport("ole32.dll")]
        public static extern void CoTaskMemFree(IntPtr ptr);

        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
        private struct CREDUI_INFO
        {
            public int cbSize;
            public IntPtr hwndParent;
            public string pszMessageText;
            public string pszCaptionText;
            public IntPtr hbmBanner;
        }

        [DllImport("credui.dll", CharSet = CharSet.Auto)]
        private static extern bool CredUnPackAuthenticationBuffer(int dwFlags,
                                                                   IntPtr pAuthBuffer,
                                                                   uint cbAuthBuffer,
                                                                   StringBuilder pszUserName,
                                                                   ref int pcchMaxUserName,
                                                                   StringBuilder pszDomainName,
                                                                   ref int pcchMaxDomainame,
                                                                   StringBuilder pszPassword,
                                                                   ref int pcchMaxPassword);

        [DllImport("credui.dll", CharSet = CharSet.Auto)]
        private static extern int CredUIPromptForWindowsCredentials(ref CREDUI_INFO notUsedHere,
                                                                     int authError,
                                                                     ref uint authPackage,
                                                                     IntPtr InAuthBuffer,
                                                                     uint InAuthBufferSize,
                                                                     out IntPtr refOutAuthBuffer,
                                                                     out uint refOutAuthBufferSize,
                                                                     ref bool fSave,
                                                                     int flags);

        public bool ValidateUser()
        {
            var credui = new CREDUI_INFO
                                     {
                                         pszCaptionText = CaptionText,
                                         pszMessageText = MessageText
                                     };
            credui.cbSize = Marshal.SizeOf(credui);
            uint authPackage = 0;
            IntPtr outCredBuffer;
            uint outCredSize;
            bool save = false;

            const int loginErrorCode = 1326;    //Login Failed
            var authError = 0;

            while (true)
            {

                var result = CredUIPromptForWindowsCredentials(ref credui,
                                                               authError,
                                                               ref authPackage,
                                                               IntPtr.Zero,
                                                               0,
                                                               out outCredBuffer,
                                                               out outCredSize,
                                                               ref save,
                                                               1 /* Generic */);

                var usernameBuf = new StringBuilder(100);
                var passwordBuf = new StringBuilder(100);
                var domainBuf = new StringBuilder(100);

                var maxUserName = 100;
                var maxDomain = 100;
                var maxPassword = 100;
                if (result == 0)
                {
                    if (CredUnPackAuthenticationBuffer(0, outCredBuffer, outCredSize, usernameBuf, ref maxUserName,
                                                       domainBuf, ref maxDomain, passwordBuf, ref maxPassword))
                    {
                        //TODO: ms documentation says we should call this but i can't get it to work
                        //SecureZeroMem(outCredBuffer, outCredSize);

                        //clear the memory allocated by CredUIPromptForWindowsCredentials 
                        CoTaskMemFree(outCredBuffer);
                        var networkCredential = new NetworkCredential()
                                                {
                                                    UserName = usernameBuf.ToString(),
                                                    Password = passwordBuf.ToString(),
                                                    Domain = domainBuf.ToString()
                                                };

                        //Dummy Code replace with true User Validation
                        if (networkCredential.UserName == "Bo" && networkCredential.Password == "1234")
                            return true;
                        else //login failed show dialog again with login error
                        {
                            authError = loginErrorCode;
                        }

                    }
                }
                else return false;

            }
        }
    } 
```

应用程序.xaml.cs

```
protected override void OnStartup(StartupEventArgs e)
        {
            var windowsSecurityDialog = new WindowsSecurityDialog
                                            {
                                                CaptionText = "Enter your credentials",
                                                MessageText = "These credentials will be used to connect to YOUR APP NAME";
                                            };

            if (windowsSecurityDialog.ValidateUser())
                base.OnStartup(e);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:21:19.950

[您将在Ookii 对话框](https://github.com/augustoproiete/ookii-dialogs-wpf)中找到使用 CredUIPromptForWindowsCredentials 的 WPF 和 WinForms 的完整实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T07:18:48.323

当我开始认为这是可能的时，我有点害怕。

答案是肯定的和否定的。您可以获得网络域和用户名，但是（谢天谢地），您无法获得实际密码，只能获得密码的哈希值。

[从PInvoke](http://goo.gl/QeBOR)大量借用，这是一个示例 WPF 应用程序，它引入并输出用户名和密码。

**代码**

```
using System;
using System.Runtime.InteropServices;
using System.Text;
using System.Windows;
using System.Windows.Interop;

namespace LoginDialog
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            // Declare/initialize variables.
            bool save = false;
            int errorcode = 0;
            uint dialogReturn;
            uint authPackage = 0;
            IntPtr outCredBuffer;
            uint outCredSize;

            // Create the CREDUI_INFO struct.
            CREDUI_INFO credui = new CREDUI_INFO();
            credui.cbSize = Marshal.SizeOf(credui);
            credui.pszCaptionText = "Connect to your application";
            credui.pszMessageText = "Enter your credentials!";
            credui.hwndParent = new WindowInteropHelper(this).Handle;

            // Show the dialog.
            dialogReturn = CredUIPromptForWindowsCredentials(
                ref credui, 
                errorcode, 
                ref authPackage,
                (IntPtr)0,  // You can force that a specific username is shown in the dialog. Create it with 'CredPackAuthenticationBuffer()'. Then, the buffer goes here...
                0,          // ...and the size goes here. You also have to add CREDUIWIN_IN_CRED_ONLY to the flags (last argument).
                out outCredBuffer, 
                out outCredSize, 
                ref save, 
                0); // Use the PromptForWindowsCredentialsFlags Enum here. You can use multiple flags if you seperate them with | .

            if (dialogReturn == 1223) // Result of 1223 means the user canceled. Not sure if other errors are ever returned.
                textBox1.Text += ("User cancelled!");
            if (dialogReturn != 0) // Result of something other than 0 means...something, I'm sure. Either way, failed or canceled.
                return;

            var domain = new StringBuilder(100);
            var username = new StringBuilder(100);
            var password = new StringBuilder(100);
            int maxLength = 100; // Note that you can have different max lengths for each variable if you want.

            // Unpack the info from the buffer.
            CredUnPackAuthenticationBuffer(0, outCredBuffer, outCredSize, username, ref maxLength, domain, ref maxLength, password, ref maxLength);

            // Clear the memory allocated by CredUIPromptForWindowsCredentials.
            CoTaskMemFree(outCredBuffer);

            // Output info, escaping whitespace characters for the password.
            textBox1.Text += String.Format("Domain: {0}\n", domain);
            textBox1.Text += String.Format("Username: {0}\n", username);
            textBox1.Text += String.Format("Password (hashed): {0}\n", EscapeString(password.ToString()));
        }

        public static string EscapeString(string s)
        {
            // Formatted like this only for you, SO.
            return s
                .Replace("\a", "\\a")
                .Replace("\b", "\\b")
                .Replace("\f", "\\f")
                .Replace("\n", "\\n")
                .Replace("\r", "\\r")
                .Replace("\t", "\\t")
                .Replace("\v", "\\v");
        }

        #region DLLImports
        [DllImport("ole32.dll")]
        public static extern void CoTaskMemFree(IntPtr ptr);

        [DllImport("credui.dll", CharSet = CharSet.Unicode)]
        private static extern uint CredUIPromptForWindowsCredentials(ref CREDUI_INFO notUsedHere, int authError, ref uint authPackage, IntPtr InAuthBuffer,
          uint InAuthBufferSize, out IntPtr refOutAuthBuffer, out uint refOutAuthBufferSize, ref bool fSave, PromptForWindowsCredentialsFlags flags);

        [DllImport("credui.dll", CharSet = CharSet.Unicode)]
        private static extern bool CredUnPackAuthenticationBuffer(int dwFlags, IntPtr pAuthBuffer, uint cbAuthBuffer, StringBuilder pszUserName, ref int pcchMaxUserName, StringBuilder pszDomainName, ref int pcchMaxDomainame, StringBuilder pszPassword, ref int pcchMaxPassword);
        #endregion

        #region Structs and Enums
        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
        private struct CREDUI_INFO
        {
            public int cbSize;
            public IntPtr hwndParent;
            public string pszMessageText;
            public string pszCaptionText;
            public IntPtr hbmBanner;
        }

        private enum PromptForWindowsCredentialsFlags
        {
            /// <summary>
            /// The caller is requesting that the credential provider return the user name and password in plain text.
            /// This value cannot be combined with SECURE_PROMPT.
            /// </summary>
            CREDUIWIN_GENERIC = 0x1,
            /// <summary>
            /// The Save check box is displayed in the dialog box.
            /// </summary>
            CREDUIWIN_CHECKBOX = 0x2,
            /// <summary>
            /// Only credential providers that support the authentication package specified by the authPackage parameter should be enumerated.
            /// This value cannot be combined with CREDUIWIN_IN_CRED_ONLY.
            /// </summary>
            CREDUIWIN_AUTHPACKAGE_ONLY = 0x10,
            /// <summary>
            /// Only the credentials specified by the InAuthBuffer parameter for the authentication package specified by the authPackage parameter should be enumerated.
            /// If this flag is set, and the InAuthBuffer parameter is NULL, the function fails.
            /// This value cannot be combined with CREDUIWIN_AUTHPACKAGE_ONLY.
            /// </summary>
            CREDUIWIN_IN_CRED_ONLY = 0x20,
            /// <summary>
            /// Credential providers should enumerate only administrators. This value is intended for User Account Control (UAC) purposes only. We recommend that external callers not set this flag.
            /// </summary>
            CREDUIWIN_ENUMERATE_ADMINS = 0x100,
            /// <summary>
            /// Only the incoming credentials for the authentication package specified by the authPackage parameter should be enumerated.
            /// </summary>
            CREDUIWIN_ENUMERATE_CURRENT_USER = 0x200,
            /// <summary>
            /// The credential dialog box should be displayed on the secure desktop. This value cannot be combined with CREDUIWIN_GENERIC.
            /// Windows Vista: This value is not supported until Windows Vista with SP1.
            /// </summary>
            CREDUIWIN_SECURE_PROMPT = 0x1000,
            /// <summary>
            /// The credential provider should align the credential BLOB pointed to by the refOutAuthBuffer parameter to a 32-bit boundary, even if the provider is running on a 64-bit system.
            /// </summary>
            CREDUIWIN_PACK_32_WOW = 0x10000000,
        }
        #endregion
    }
} 
```

**测试**

1.  创建一个名为`LoginDialog`.
2.  将 a`TextBox`放入`MainWindow.xaml`提供的名为`textBox1`.
3.  替换文件中的代码`MainWindow.xaml.cs`。
4.  跑！

**样本输出**

给定密码“password”，这里是输出。

```
Domain: 
Username: EXAMPLE\fake
Password (hashed): @@D\a\b\f\n\rgAAAAAU-JPAAAAAAweFpM4nPlOUfKi83JLsl4jjh6nMX34yiH 
```

**注释**

这适用于 WPF。它可以为具有[正确权限](http://goo.gl/hfdZ3)的 Silverlight 工作。

我不知道为什么有人会为合法的自定义验证这样做。如果您想为您的应用程序创建登录名，我建议让客户端通过 SSL (https://) 连接到将检查使用 LINQ to SQL 提供的凭据的 ASP.NET 页面或 Web 服务。然后它可以向客户端发送通过/失败响应。

哦，为了上帝的爱和所有神圣的事物，[你的用户密码加盐和散列](http://goo.gl/NyucS)。

注意：如果您想使用此登录名来阻止用户在没有帐户/付款的情况下使用您的应用程序，上述所有方法都可以，但不足以阻止人们对应用程序进行逆向工程和破解（例如，欺骗它认为它已收到传递消息）。这种 DRM 完全是另一种游戏。

# asp.net - 头部链接标签渲染问题

> ID：10242073
> 
> 赞同：3
> 
> 时间：2012-04-20T07:34:15.220
> 
> 标签：asp.net, render

我正在使用它（带头运行）

```
<link href="https://<%= AppSettingBase.AppSetting("CdnDomain")%>/cdn/css/iebutton.css" rel="stylesheet" type="text/css" /> 
```

它正在正确渲染

```
<link href="https://cdn.mydomain.com/cdn/Content/css/iebutton.css" rel="stylesheet" type="text/css" /> 
```

现在我正在使用（带头运行）

```
<link href="https://<%= UIAppSetting.CdnDomain%>/cdn/css/iebutton.css" rel="stylesheet" type="text/css" /> 
```

它渲染错误，但没有 head runat 工作正常

```
<link href="https://&lt;%= UIAppSetting.CdnDomain%>/cdn/css/iebutton.css" rel="stylesheet" type="text/css" /> 
```

两者有什么区别，我该如何解决？

**编辑**

`UIAppSetting`是类并且`CdnDomain`是静态属性，我在 web.config 中添加了命名空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:27:54.243

[这个答案](https://stackoverflow.com/a/2221091/333223)和[这个答案](https://stackoverflow.com/a/2221091/333223)（实际上链接了第一个）表明你不能在标签`<%= %>`内使用语法`runat="server"`，你的`head`标签实际上是。我还发现互联网上的其他一些页面也有同样的说法。

鉴于此，我不明白为什么它适用于您的第一个版本

```
<link href="https://<%= AppSettingBase.AppSetting("CdnDomain")%>/cdn/css/iebutton.css" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:50:14.783

最后我解决了我的问题，但我认为这不是一个好方法。特别感谢[themarcuz](https://stackoverflow.com/users/333223/themarcuz)，他为我尽力了。

```
<link <% Response.Write("href='https://" + UIAppSetting.CdnDomain +"/cdn/css/iebutton.css'");%> rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:01:12.687

我以前也有过这样的

如果您替换它，它是否可以正常工作

```
<link href=" blah blah " /> 
```

为了

```
<link href=' blah blah ' /> 
```

单引号而不是双引号，我确定我曾经遇到过一个问题，它不喜欢我在双引号内有双引号的事实。不管它的上下文（尽管它可能在 Eval 上下文中）

# forms - 来自db的特定复选框的Symfony设置值？

> ID：10242075
> 
> 赞同：1
> 
> 时间：2012-04-20T07:34:30.340
> 
> 标签：forms, symfony1, checkbox

我想设置复选框以检查我从数据库中检索到的仅针对特定值呈现的表单。我可以在 jQuery 中做到这一点，但是 Symfony 中是否有任何特定的库函数？

建议请...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:37:04.400

你可以试试这个......

在首先显示表单时，您还可以在设置时传递表单中的值

```
 $this->samplevariable = YOURFORM($this->getYOURMODEL->setYOURFORMFIELDNAME(array of values(1,2,3) which u get form db getYOURFORMFIELDNAME); 
```

# google-chrome - 本机客户端 - 在沙箱中访问下载的文件

> ID：10242077
> 
> 赞同：1
> 
> 时间：2012-04-20T07:34:39.670
> 
> 标签：google-chrome, file-io, sandbox, google-nativeclient

我编写了一个小模块，它只在本地文件系统中打开一个文件，并向其中写入一些虚拟字节。

是否可以在用户计算机上访问此文件？我在哪里可以找到它？换句话说：用户可以（手动）从本机客户端模块沙箱中获取任何东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:37:21.123

您可以将文件传输到 javascript 并使用 HTML5 File API 从那里保存。该页面[http://www.w3.org/TR/file-writer-api/](http://www.w3.org/TR/file-writer-api/)给出了一个例子：

```
var bb = new WebKitBlobBuilder(); // adapted for chrome
bb.append("Lorem ipsum");
var fileSaver = window.saveAs(bb.getBlob(), "test_file");
fileSaver.onwriteend = myOnWriteEnd; 
```

# c# - 更新 jquery 对话框中的 gridview (ASP.net c#)

> ID：10242092
> 
> 赞同：2
> 
> 时间：2012-04-20T07:35:29.150
> 
> 标签：c#, jquery, asp.net, gridview, jquery-ui-dialog

有没有办法更新 jquery 对话框中的 gridview？我已经让按钮正常工作，但是 gridview 没有更新。下面是我的代码。

JS：

```
 <script type="text/javascript" language="javascript">

$(document).ready(function () {

    function BindEvents() {

        //alerts dialog
        $( "#pnlAlerts" ).dialog({            
            autoOpen: false,
            modal: true,
            width: 700,             
            open:function(){{
                $(this).parent().appendTo($("form:first"));
            }}

        });

        $('.openAlert').click(function () {        
            $( '#pnlAlerts' ).dialog( 'open' );
        });
          }

    BindEvents();

}); 
```

前端：

```
 <asp:Panel runat="server" ID="pnlAlerts" Visible="true" class="alert-dialog">

            <asp:UpdatePanel ID="updPanelAlert" runat="server" >
                <ContentTemplate>
                    <asp:Label id="lblDatabaseStatus" runat="server" CssClass="left found" />

                    <asp:Panel id="pnlAlert" Runat="Server" Visible="true">

                        <div id="table-search">
                            <asp:Button ID="btnDelete" runat="server" Text="Delete" CssClass="btn normal-btn left" onclick="btnDelete_Click"  />
                            &nbsp;&nbsp;<asp:Button ID="btnMark" runat="server" Text="Mark as Read" CssClass="btn normal-btn left" onclick="btnMark_Click"  />
                            <!-- Loader -->
                            <asp:UpdateProgress ID="updProgress" runat="server" AssociatedUpdatePanelID="updPanelAlert" class="loader" DisplayAfter="1">
                                <ProgressTemplate>
                                        <asp:Image ID="imgPleaseWait" runat="server" ImageUrl="~/images/pleasewait.gif" />
                                </ProgressTemplate>
                            </asp:UpdateProgress>

                            <div class="nip">
                            </div>
                            <br class="clear"/>
                        </div>
                        <asp:SqlDataSource ID="sqldsAlert" runat="server" 
                            ConnectionString="<%$ ConnectionStrings:ABCDB %>" 
                            SelectCommand="sp_AlertsGet" SelectCommandType="StoredProcedure">
                            <SelectParameters>
                                <asp:ControlParameter  ControlID="lblUserID" Name="UserID" Type="String" Direction="Input" />
                                <asp:Parameter DefaultValue="null" Direction="InputOutput" Name="op_status" 
                                    Type="String" />
                            </SelectParameters>
                        </asp:SqlDataSource>
                        <asp:Panel id="pnlAlertGrid" runat="server" ScrollBars="Auto" EnableTheming="false">
                            <!-- Table data -->
                            <asp:GridView id="gvAlertGrid" runat="server"  CssClass="grid" 
                                GridLines="Vertical" DataKeyNames="AlertID" AutoGenerateColumns="False" 
                                width="100%" PageSize="50" Border="0" 
                                AllowPaging="True" AllowSorting="True" PagerSettings-Position="Bottom" 
                                DataSourceID="sqldsAlert">

                                <Columns>

                                    <asp:TemplateField HeaderText="AlertID" Visible="false">
                                        <ItemTemplate>
                                            <asp:Label ID="lblAlertID" Text='<%# Eval("AlertID")%>'  runat="server" />
                                        </ItemTemplate>
                                    </asp:TemplateField>

                                    <asp:TemplateField HeaderText="&nbsp">
                                        <itemTemplate>
                                            <asp:CheckBox ID="cbDeleteMark" width="25px" Checked="false" runat="server" Enabled="True"/>
                                        </itemTemplate>
                                    </asp:TemplateField>

                                    <asp:TemplateField HeaderText="Subject" SortExpression="AlertSubject">
                                        <itemTemplate>
                                            <asp:Label ID="lblAlertSubject" Text='<%# Eval("AlertSubject")%>' ForeColor='<%# SetColor(Eval("ReadStatus"))%>' runat="server" />
                                        </itemTemplate>
                                    </asp:TemplateField>

                                    <asp:TemplateField HeaderText="Type" SortExpression="Priority">
                                        <itemTemplate>
                                            <asp:Label ID="lblPriority" Text='<%# Eval("Priority")%>' ForeColor='<%# SetPriorityColor(Eval("ReadStatus"), Eval("Priority"))%>' runat="server" />
                                        </itemTemplate>
                                    </asp:TemplateField>

                                    <asp:templatefield headertext="Received" SortExpression="Date">
                                        <itemtemplate>
                                          <asp:label id="lblDate" ForeColor='<%# SetColor(Eval("ReadStatus"))%>'
                                            text= '<%# String.Format("{0:dd/MM/yy}",Eval("[Date]")) %>'
                                            runat="server"/> 
                                        </itemtemplate>
                                        <ItemStyle HorizontalAlign="Center" />                          
                                    </asp:templatefield>

                                </columns>
                            </asp:GridView>
                        </asp:Panel>
                    </asp:Panel>
                </ContentTemplate>
            </asp:UpdatePanel>
            <asp:Label runat="server" ID="lblUserID" Visible="false"></asp:Label>
        </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:41:27.507

为了让 GridView 更新，您需要让页面触发回发或对 GridView 上的 DataBind 进行服务器端调用。

您可以尝试的另一个选项是在更新面板中添加一个隐藏按钮，然后调用：

```
__doPostBack('<%= Button.ClientID %>',''); 
```

这应该刷新更新面板，从而刷新 GridView。

您刚刚打开和关闭面板“pnlAlerts”作为模式对话框的 jquery。

如果要在 GridView 中编辑数据，则需要 EditTemplates。

希望有帮助。

# java - Java编译器在while循环中打破了转义逻辑

> ID：10242093
> 
> 赞同：0
> 
> 时间：2012-04-20T07:35:37.267
> 
> 标签：java, loops, while-loop

我有如下代码片段：

```
List<EmailTemplate> langTemplates = emailTemplateMap.get(categoryId+"_"+languageId);

while (langTemplates.isEmpty() && altLanguageId <= Language.ALL.length)
{
  langTemplates = emailTemplateMap.get(categoryId+"_"+altLanguageId);
  altLanguageId++;
} 
```

这没有按预期工作。我发现（反编译 .class 文件），编译器显然将其更改为：

```
List langTemplates;
for(langTemplates = (List)emailTemplateMap.get((new StringBuilder(String.valueOf(categoryId))).append("_").append(languageId).toString()); langTemplates.isEmpty() && altLanguageId <= Language.ALL.length; altLanguageId++)
{
  langTemplates = (List)emailTemplateMap.get((new StringBuilder(String.valueOf(categoryId))).append("_").append(altLanguageId).toString());
} 
```

这是不一样的。它只是用它在循环之前定义的内容替换了我正在运行的转义变量（幸运的是我得到了第二个，否则这将成为一个无限循环！）因此检查总是相同的值并且不考虑更新/重新引用循环内的局部变量。

这有道理吗？或者这可以被认为是编译器中的错误？如果不是，我的原始代码错了吗？

感谢您的任何见解。

马克

# python - 尝试递归地添加数字的平方

> ID：10242096
> 
> 赞同：0
> 
> 时间：2012-04-20T07:35:41.443
> 
> 标签：python

```
def recursive_add(s):
    sum = 0
    if len(s) == 1:
        sum += s[0] ** 2
    else:
        recursive_add(s[1:])
        sum += s[0]**2
    return sum

s = [8, 6, 8, 4]

print recursive_add(s) 
```

但是，由于某种原因，8 立即平方并返回 64，即使它应该是最后一个要平方并添加到 sum 的数字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T07:58:07.897

```
def recursive_add(s):
    if s:
        return s[0]**2 + recursive_add(s[1:])
    else:
        return 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T08:16:46.030

首先，针对您的特定问题的单线解决方案：

```
def rec_add(s):
    return s[0] * s[0] + rec_add(s[1:]) if s else 0 
```

接下来是更高级和抽象的东西。

在函数式编程术语中，您将 x**2 “映射”到一个列表上，并通过将其元素添加在一起来“折叠”该列表。Python为此提供了必要的原语（`map`和`reduce`分别），平方和可以简单地写成：

```
from operator import add, mul

xs = [1,2,3,5]
print reduce(add, map(mul, xs, xs)) # 39 
```

您还可以将 map 和 fold 步骤组合在一个函数中：

```
def map_and_fold(xs, mapfun, foldfun, init):
    if not xs:
        return init
    return foldfun(
        mapfun(xs[0]),
        map_and_fold(
            xs[1:], mapfun, foldfun, init)) 
```

并定义`sum_squares`为上述的部分应用：

```
from functools import partial

sum_squares = partial(map_and_fold, 
    mapfun = lambda x: x * x,
    foldfun = lambda x, y: x + y,
    init = 0) 
```

测试：

```
xs = [1,2,3,5]
print sum_squares(xs) # 39 
```

更多信息：[map](http://en.wikipedia.org/wiki/Map_%28higher-order_function%29)，[fold](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)，[partial application](http://en.wikipedia.org/wiki/Partial_application)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T07:41:01.697

你可以：

```
def recursive_add(s):
    return s and (recursive_add(s[1:]) + s[0]**2) or 0 
```

在您的原始代码中，问题似乎`recursive_add(s[1:])`与`sum`. s是不同的`recursive_add(s)`。`sum`试试这个：

```
sum = 0

def recursive_add(s):
    global sum
    if len(s) == 1:
        sum += s[0] ** 2
    else:
        recursive_add(s[1:])
        sum += s[0]**2

s = [8, 6, 8, 4]

print recursive_add(s) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T08:16:53.723

当您试图找出程序无法正常运行的原因时，最好弄清楚它到底在*做*什么。这是一个如何修改程序以显示它实际在做什么的示例。

```
def recursive_add(s):
    print "DEBUG: recursive_add(%s)" % repr(s)
    sum = 0
    print "DEBUG: sum: %d" % sum
    if len(s) == 1:
        sum += s[0] ** 2
        print "DEBUG: sum: %d" % sum
    else:
        recursive_add(s[1:])
        sum += s[0]**2
        print "DEBUG: sum: %d" % sum
    return sum

s = [8, 6, 8, 4]

print "result: %d" % recursive_add(s) 
```

当你运行它时，你会得到：

```
DEBUG: recursive_add([8, 6, 8, 4])
DEBUG: sum: 0
DEBUG: recursive_add([6, 8, 4])
DEBUG: sum: 0
DEBUG: recursive_add([8, 4])
DEBUG: sum: 0
DEBUG: recursive_add([4])
DEBUG: sum: 0
DEBUG: sum: 16
DEBUG: sum: 64
DEBUG: sum: 36
DEBUG: sum: 64
result: 64 
```

如您所见，您的函数确实成功地将第一个数字从列表中剪掉，并递归调用自身，直到它处理完所有数字。但问题是您不断将 sum 重新设置为 0，因此 sum 并没有累积实际总和；所以你的最终答案是 0 + 64，或者只是 64。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-02T06:34:17.433

答案很简单，只需在 else 部分添加 recursive-add(s[1:]) 即可：

```
def recursive_add(s):
    sum = 0
    if len(s) == 1:
        sum += int(s[0]) ** 2
    else:
        sum = sum+int(s[0])**2+recursive_add(s[1:])
    return sum
s = [8, 6, 8, 4]
print (recursive_add(s)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T07:42:02.587

你的代码不是你想要的。首先，声明`sum = 0`为`recursive_add`将导致您预期的不同行为方面。

我建议修改它

```
def recursive_add(s,sum):
 if len(s) == 1:
  return sum + s[0] ** 2
 else:
  sum = s[0] ** 2 + recursive_add(s[1:],sum)
 return sum 
```

并以这种方式调用它

```
s = [8, 6, 8, 4]
print recursive_add(s,0) 
```

# algorithm - 如何从 key->value_count 形式的 10 个文件中划分的大量数据中获取 Top 10？

> ID：10242100
> 
> 赞同：1
> 
> 时间：2012-04-20T07:36:13.773
> 
> 标签：algorithm, sorting

一共有30个文件，任何一个包含大约100,000个数据项，数据项就是这样：key->count，例如abcdefg->100，表示key 'abcdefg'的count值为100，key可以一次只出现在一个文件中，但它可能出现在其他文件中。

我应该如何获得 10 个键，它的总计数值应该在 30 个文件中的所有前 10 个中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:46:29.957

我假设您想要总计数最多的 10 个键 [根据您的第一条评论，这似乎是正确的]

**设计指南：**

*   由于**数据不是太大**[32 位系统上的 100,000 * 30 整数约为 11.5 MB]，并且假设密钥不是太大¹，整个数据集可能会填充到内存中。
*   当数据在内存中时——你可以在它上面做任何更快的事情，因为**磁盘 IO 比 RAM 慢得多**，所以对它进行排序和多次读取预计比在内存上操作数据要慢得多。

**算法 ：**

1.  创建一个直方图，它实际上是一个`HashMap:key->int`，它将在您阅读文件时填充。对于您正在读取的每个键，如果它已经在直方图中 - 将计数添加到直方图中的现有值，如果它不存在 - 只需将 (key,count) 对添加到直方图中。[`O(n)`平均运行时间]
2.  一旦填充了[直方图](http://en.wikipedia.org/wiki/Histogram)- 找到前 10 个很容易 - 创建一个[min heap](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)并迭代直方图，堆应该始终包含前 10 个值和匹配的键 - 当然。[在这个线程](https://stackoverflow.com/q/5960169/572670)中有一个解释如何做到这一点。- 对于恒定的top10，它也是`O(n)`如此。
3.  完成后 - 堆包含您的解决方案，只需显示其内容。

**好处：**

*   只有一个磁盘读取 - 因为磁盘**比**RAM 慢得多 - 这可能是瓶颈 - 所以尽量减少磁盘读取/写入应该是一个优先事项。
*   `O(n)`平均运行时间。

**坏处：**

*   如果您的哈希函数非常差 [不太可能] - 由于哈希表，解决方案可能会衰减到二次时间复杂度。
*   如果密钥很大并且不适合内存，则应该做更多的工作 - 请参阅脚注 (1) 如何解决它。

* * *

**1：**如果假设不成立，可以通过对密钥进行哈希处理，只存储密钥来部分解决。一旦发生哈希冲突，请检查是否相等 - 在磁盘本身中。会增加读取次数，但是碰撞次数应该比较低，有很好的hash函数。此外，您应该将它们的哈希冲突的键加载到内存中[再次，以避免多次磁盘读取]，并且只有它们，它将比元素总数小得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:15:01.133

我会尝试以下方法：

1.  按键排序（例如使用快速排序）每个文件（小心用于比较字符串的内容） - O(nlogn)。
2.  将所有文件逐个合并为一个，将相等键的计数值相加（使用合并排序中的 Merge 例程 - O(n)）。你会得到一个带有唯一键的巨大散列。
3.  按计数值对哈希进行排序 - O(nlogn)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:28:27.813

1.  按键对每个文件进行排序。如果key无法比较...跳过这个答案~~~
2.  现在你有多个排序的文件，以及你的比较规则。尝试多路合并。小心这一点，当您合并所有文件中的每个键时，请按照键的顺序并对计数求和。同时，创建一个堆来维护现在的前 10 个键。合并完成后，堆有前 10 个键。

# android - Android ProgressDialog 样式

> ID：10242101
> 
> 赞同：2
> 
> 时间：2012-04-20T07:36:15.740
> 
> 标签：android, styles, themes, progressdialog

如何在 Android 中更改 ProgressDialog 样式？我需要更改背景颜色和文本颜色。

我的应用中有我的一种样式，我必须覆盖哪些项目才能更改进度对话框样式？

我想只使用 xml 来更改样式，而无需编码。有可能吗？

PS：

我没有进度条！我有进度对话框。而且我想使用样式和主题更改它的样式，例如更改列表视图、Windows 背景等的样式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T15:39:39.687

您可以像这样更改 ProgressDialog 的主题：

```
ProgressDialog dialog = new ProgressDialog(this, AlertDialog.THEME_HOLO_DARK);
dialog.setTitle("Title");
dialog.setMessage("Message");
dialog.show(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T07:42:28.260

自定义对话框的代码：drawable下的文件声明了不同状态的颜色：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@android:id/background">
        <shape>
            <gradient
                    android:startColor="#000001"
                    android:centerColor="#0b131e"
                    android:centerY="0.75"
                    android:endColor="#0d1522"
                    android:angle="270"
            />
        </shape>
    </item>

    <item android:id="@android:id/secondaryProgress">
        <clip>
            <shape>
                <gradient
                        android:startColor="#234"
                        android:centerColor="#234"
                        android:centerY="0.75"
                        android:endColor="#a24"
                        android:angle="270"
                />
            </shape>
        </clip>
    </item>

    <item android:id="@android:id/progress">
        <clip>
            <shape>
                <gradient
                    android:startColor="#144281"
                    android:centerColor="#0b1f3c"
                    android:centerY="0.75"
                    android:endColor="#06101d"
                    android:angle="270"
                />
            </shape>
        </clip>
    </item>

</layer-list> 
```

布局 xml 中的代码：

```
<ProgressBar android:id="@+id/progressBar"
    android:progressDrawable="@drawable/progress_bar_states"
    android:layout_width="fill_parent" android:layout_height="8dip" 
    style="?android:attr/progressBarStyleHorizontal" 
    android:indeterminateOnly="false" 
    android:max="100">
</ProgressBar> 
```

# java - 将批处理文件输出记录到文件

> ID：10242104
> 
> 赞同：0
> 
> 时间：2012-04-20T07:36:26.327
> 
> 标签：java, batch-file

我想用 JAVA 运行批处理文件。

我想将批处理命令的输出记录到文件中，并隐藏 cmd 控制台。

批处理文件工作正常，但使用 Java 既不能正确记录也不能隐藏控制台。

**批处理文件“Ftp.bat”内容：**

```
ftp -s:FtpCommands.txt >> Output.log
exit 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:08:15.280

首先确保你有 VBScript，然后试试这个：

启动.bat

```
CD /D %~dp0
wscript.exe "%CD%\invisible.vbs" "%CD%\process.bat" 
```

隐形.vbs

```
CreateObject("Wscript.Shell").Run """" & WScript.Arguments(0) & """", 0, False 
```

进程.bat

```
[whatever you want to do] [perimeters] >> output.log >2>&1 
```

这将不可见地启动它并记录它以及任何错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:49:08.493

看一下[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html) api，

```
ProcessBuilder pb = new ProcessBuilder("batchfile.bat", "arg1", "arg2");
Process p = pb.start();
...
p.destroy(); 
```

不要忘记捕获任何异常并在捕获时运行`p.destroy()`

请参阅[此](https://stackoverflow.com/questions/1732455/redirect-process-output-to-stdout)问题，了解如何监听批处理文件的输出

# javascript - 使用 servlet 过滤器将 Javascript 注入每个 HTML 页面

> ID：10242107
> 
> 赞同：1
> 
> 时间：2012-04-20T07:37:00.543
> 
> 标签：javascript, servlets, servlet-filters, javascript-injection

我想修改 Spring 应用程序中的每个 HTML 页面。这背后的原因是我想在每个页面上包含一段 JavaScript 代码。

不幸的是，Sitemesh 不能帮助我（或者至少我认为它不能），因为 Ajax 请求也必须受到这个 JavaScript 的影响，并且我的 Ajax 请求被明确排除在装饰之外。

所以我的想法是在 Spring 中使用过滤器来篡改 HttpServletResponse，但我一直坚持实际访问生成的内容并对其进行修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:54:02.153

您访问作为 doFilter 一部分的 ServletResponse，`doFilter(ServletRequest request, ServletResponse response, FilterChain chain)`然后将您的其他内容添加到其中。

示例代码： http: [//myjavaswtech.blogspot.com/2012/05/modifying-response-using-filters.html](http://myjavaswtech.blogspot.com/2012/05/modifying-response-using-filters.html)

# powershell - 如何在 Powershell 中创建参数列表？

> ID：10242108
> 
> 赞同：1
> 
> 时间：2012-04-20T07:37:02.027
> 
> 标签：powershell, powershell-2.0

我有一个 PowerShell 脚本，它在程序的开头设置一个值的限制。例如

```
$value1Min      = 1
$value1Max      = 99
$value1Interval = 100
$value1Post     = 125 
```

现在我希望能够处理任意数量的值，但我不需要为每个值复制代码。如何为每个值创建参数列表？例如（伪代码）。

```
$info={{min      = 1
        max      = 99
        interval = 100
        post     = 125
       },
       {min      = 100
        max      = 1000
        interval = 10000
        post     = 548
       },
       {min      = 50
        max      = 100
        interval = 500
        post     = 452
       }
      } 
```

我在 PowerShell 方面不是很有经验

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T11:05:57.340

您可以创建一个包含这样的哈希表的数组：

```
$info=@(
    @{
    "min"      = 1;
    "max"      = 99;
    "interval" = 100;
    "post"     = 125;
   },
   @{
    "min"      = 100;
    "max"      = 1000;
    "interval" = 10000;
    "post"     = 548;
   },
   @{
    "min"      = 50;
    "max"      = 100;
    "interval" = 500;
    "post"     = 452;
   }
  ) 
```

如何获取值的示例：

```
PS C:\Users\stackoverflow> $info[0].interval
100 
```

您还可以创建一个包含哈希表的哈希表：

```
$info=@{
    "info1"=@{
    "min"      = 1;
    "max"      = 99;
    "interval" = 100;
    "post"     = 125;
   };
   "info2"=@{
    "min"      = 100;
    "max"      = 1000;
    "interval" = 10000;
    "post"     = 548;
   };
   "info3"=@{
    "min"      = 50;
    "max"      = 100;
    "interval" = 500;
    "post"     = 452;
   }
  } 
```

如何获取值的示例：

```
PS C:\Users\stackoverflow> $info.info1.max
99 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T11:32:54.643

您可以从 xml 文件导入参数并通过豪华对象访问它们。

示例：XML 文件 val.xml：

```
<Param>
    <Param1 min= '1' max= '99' interval = '100' post = '125'>
      </Param1>
      <Param2 min= '100' max= '1000' interval = '10000' post= '548'>
       </Param2>
       <Param3 min= '50' max='100' interval='500' post= '452'>
    </Param3>
</Param> 
```

使用以下命令将 xml 文件导入您的 powershell 控制台：

```
$xml = [xml](Get-Content val.xml) 
```

现在您可以像这样访问您的数据：

```
$xml.Param 
```

输出 ：

```
Param1                          Param2                          Param3                        
------                          ------                          ------                        
Param1                          Param2                          Param3 
```

如果要获取 param1 值：

```
$xml.Param.Param1 
```

输出：

```
min                     max                     interval                post                  
---                     ---                     --------                ----                  
1                       99                      100                     125 
```

然后 $xml.Param.Param1.min ...等

当您将在代码中使用值时，请注意类型。例子 ：

```
PS > $xml.Param.Param1.min.gettype()

IsPublic IsSerial Name                                     BaseType                           
-------- -------- ----                                     --------                           
True     True     String                                   System.Object 
```

您可能需要强制进行一些类型转换。

# python - 如何在元组字典中制作列表列表

> ID：10242110
> 
> 赞同：0
> 
> 时间：2012-04-20T07:37:17.453
> 
> 标签：python

例如，我有**列表列表**

```
res = [[None,'A','B'],[19980228, 'd1', 't1'],[19980302, 'd2', 't2'],[19980303, 'd3', 't3']] 
```

现在我需要将上述结果框定**为元组列表的字典，**例如

```
{'A': [(19980228, 'd1'), (19980302, 'd2'), (19980303, 'd3')], 
 'B': [(19980228, 't1'), (19980302, 't2'), (19980303, 't3')]} 
```

请让我知道这个概念，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:42:26.127

这应该这样做：

```
x, A, B = res[0]
output = {A:[], B:[]}
for a,b,c in res[1:]:
  output[A].append((a, b))
  output[B].append((a, c)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T07:46:37.013

```
>>> res = [[None,'A','B'],[19980228, 'd1', 't1'],[19980302, 'd2', 't2'],[19980303, 'd3', 't3']]
>>> {a:[(r[0], r[i]) for r in res[1:]] for i, a in enumerate(res[0]) if a}
{'A': [(19980228, 'd1'), (19980302, 'd2'), (19980303, 'd3')], 'B': [(19980228, 't1'), (19980302, 't2'), (19980303, 't3')]} 
```

注意：正如@shuzOMGchen 指出的那样，这需要在 python 2.7 和 3.0 中添加的“字典理解”，因此如果您使用的是较早版本，则必须稍微更改代码。这里没有使用字典理解（这很丑，我只是试图从上面复制我的逻辑）

```
>>> res = [[None,'A','B'],[19980228, 'd1', 't1'],[19980302, 'd2', 't2'],[19980303, 'd3', 't3']]
>>> d = {}
>>> for i, a in enumerate(res[0]):
...     if a:
...         d[a] = [(r[0], r[i]) for r in res[1:]]
... 
>>> d
{'A': [(19980228, 'd1'), (19980302, 'd2'), (19980303, 'd3')], 'B': [(19980228, 't1'), (19980302, 't2'), (19980303, 't3')]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T11:15:28.593

```
>>> res = [[None,'A','B'],[19980228, 'd1', 't1'],[19980302, 'd2', 't2'],[19980303, 'd3', 't3']]
>>> d = dict((x[0],x[1:]) for x in zip(*res))
>>> nums = d.pop(None)
>>> for key in d:
        d[key] = zip(nums,d[key])

>>> d
{'A': [(19980228, 'd1'), (19980302, 'd2'), (19980303, 'd3')], 'B': [(19980228, 't1'), (19980302, 't2'), (19980303, 't3')]} 
```

# if-statement - 如何使用 if else 退出脚本

> ID：10242114
> 
> 赞同：0
> 
> 时间：2012-04-20T07:37:30.183
> 
> 标签：if-statement, exit, wsh, jscript

请告诉我当我使用 if 语句时如何退出 javascript（我在硬盘上运行它）。以下代码不起作用：

```
if (fso.FileExists("C:\\EXT\\file.txt") ) //check if there file in the folder
            {
    log.WriteLine(file_exist_time + " - file exists C:\\EXT\\ "); 
            }
    else 
            {  
            log.WriteLine("There is no file in C:\\EXT\\"); 

                             function exit ()
                                    {
                                throw ('Script Exit');
                                    }

        } 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T05:40:51.197

用于[`WScript.Quit`](http://msdn.microsoft.com/en-us/library/fw0fx1aw%28VS.84%29.aspx)完全退出脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T07:59:40.073

为什么在这里使用函数定义？你甚至没有调用这个函数。你可以简单地这样做：

```
if (fso.FileExists("C:\\EXT\\file.txt")){ //check if there file in the folder
  log.WriteLine(file_exist_time + " - file exists C:\\EXT\\ ");
}
else{
  log.WriteLine("There is no file in C:\\EXT\\");
  throw('Script Exit');
} 
```

但是，`throw`单独并不会停止函数的执行，它只会将其移动到您的`catch`-statement 中。阅读有关[异常处理](https://developer.mozilla.org/en/JavaScript/Guide/Statements#Exception_Handling_Statements)的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:59:11.267

怎么样：

```
if (fso.FileExists("C:\\EXT\\file.txt") ) //check if there file in the folder
{
    log.WriteLine(file_exist_time + " - file exists C:\\EXT\\ "); 
}
else 
{  
    log.WriteLine("There is no file in C:\\EXT\\"); 
    return;
    // Or possibly throw("Exit");
} 
```

换句话说，不要将`throw`or`return`放在单独的函数中，特别是如果您不调用该函数。

# macos - OS X：从 Finder 启动时出现奇怪的 -psn 命令行参数

> ID：10242115
> 
> 赞同：27
> 
> 时间：2012-04-20T07:37:37.407
> 
> 标签：macos, command-line-arguments, finder

我们的 OS X Java 应用程序由`MyApp.app`捆绑包中的 shell 脚本启动，当从 Finder 启动时会收到一个奇怪的命令行参数`-psn_0_989382`，但在直接从终端启动时不会。我在哪里可以找到此命令行参数适用于哪些信息？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-20T07:44:21.753

Mac OS X 为通过 GUI 启动的所有应用程序分配一个唯一的进程序列号（“PSN”）。它用于识别可执行文件的各种进程和实例。

我没有什么可以真正添加到文档中的，所以最好的办法是阅读[Carbon Process Manager Reference 的 ProcessSerialNumber 部分](http://mirror.informatimago.com/next/developer.apple.com/documentation/Carbon/Reference/Process_Manager/prmref_main/data_type_5.html#//apple_ref/doc/uid/TP30000208/C001951)（原始 Apple 链接已失效；这是一面镜子）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-10T11:00:01.357

似乎使用 Carbon API 的旧应用程序是从这个参数开始的。如果应用程序已经更新到不再使用 Carbon 的版本，您可以通过以下方式从 LaunchServices 数据库中取消注册应用程序：

```
/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -u /Applications/AppName.app/ 
```

在此之后，它可以从 Finder 重新启动以注册新版本。那么它不应该再得到这个论点了。

# testing - 如何在 JUnit 中订购共享相同代码而不是状态或数据的测试类？

> ID：10242116
> 
> 赞同：0
> 
> 时间：2012-04-20T07:37:40.170
> 
> 标签：testing, junit

我想订购不共享任何状态的测试。

示例：有测试类 CreateFile 和 DeleteFile。

DeleteFile 测试使用与 CreateFile 相同的代码。因此，如果 CreateFile 失败，花时间尝试运行 DeleteFile 是没有意义的。DeleteFile 启动不会提供任何新信息。最终会出现同样的错误。

让我们 JUnit 跳过它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:55:04.163

您正在尝试将依赖项引入您的测试代码。按照设计，JUnit 不支持测试之间的依赖关系。您可以尝试[TestNG](http://testng.org/doc/index.html)，它专门允许依赖项。

## 依赖与优化

实际上，您提出的是优化测试，而不是测试之间的依赖关系。您不希望（删除）测试运行，因为您知道它会失败。创建测试的结果不影响删除测试的结果。

两个测试之间的依赖关系更像是“我需要运行测试 xxx 才能运行测试 yyy”，因为测试 xxx 执行测试 yyy 的设置。

您可以在这两种情况下使用 TestNG，但我更喜欢测试之间没有依赖关系。因此，您的所有设置都将通过@Before 或@BeforeClass 完成。然后，您总是可以在 Eclipse 或其他任何东西中运行单个测试。实际上，对于您的情况，由于临时文件系统问题，创建文件可能不起作用，但删除可能起作用。

# javascript - jQuery - 如何定位、调整大小和将一张图片移到另一张图片上

> ID：10242119
> 
> 赞同：2
> 
> 时间：2012-04-20T07:37:59.890
> 
> 标签：javascript, jquery, image

我想要实现的是：

*   将一个图像放置在另一个图像上并能够在包含图像的区域内移动它
*   能够通过保持其比例来调整顶部图像的大小
*   了解包含图像容器中顶部图像的大小`(w, h)`和位置`(x, y)`

我想要的实际上是 jCrop 之类的东西，但高亮区域需要是 png 图像，而不是半透明矩形。

# php - 在 php/iis/win7 上获取文本，错误的字符集

> ID：10242122
> 
> 赞同：2
> 
> 时间：2012-04-20T07:38:16.503
> 
> 标签：php, iis-7.5, gettext

我正在重构 php 5.2.17 中的一些旧应用程序并将其转换为 UTF-8 字符集。应用程序使用 gettext，但由于某种原因，即使所有文本现在都是 UTF-8 和目录文本，gettext 也会以 cp1250（在 win7 女巫捷克国家环境中）返回数据。我确实尝试从一开始就在 UTF-8 中创建一个全新的，重新启动 IIS7.5，但仍然得到错误的字符集（不是 UTF-8，而是 cp1250）。（我是win7的新手，在新电脑上，可能是在某些php配置中，mbstring和iconv已将UTF-8设置为内部编码）

编辑：这是我的 .po 文件的标题。我每次都生成 .mo：

```
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"X-Poedit-KeywordsList: _;gettext;gettext_noop\n"
"X-Poedit-Basepath: ../../../\n"
"Plural-Forms: nplurals=3; plural=(n==1) ? 0 : (n>=2 && n<=4) ? 1 : 2;\n"
"X-Poedit-Language: Czech\n"
"X-Poedit-Country: CZECH REPUBLIC\n"
"X-Poedit-SourceCharset: utf-8\n"
"X-Poedit-SearchPath-0: .\n" 
```

所有代码和 html 标头现在都是 utf-8。任何 IIS 缓存怎么样？但是重新启动 IIS 没有效果。

你知道有什么问题吗？谢谢你的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:46:05.977

我找到了解决方案。第一次在我的生活中我必须使用这个（通常我使用的是 apache2）：

```
bind_textdomain_codeset($domain, "UTF-8"); 
```

在 IIS 上，即使其他所有内容都已写入并设置为 UTF-8，也必须设置它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:13:35.910

您的`.po`/ `.mo`gettext 文件可能正在使用`cp1250`字符集。

尝试将其（例如使用 POEdit）更改为 UTF-8，重新编译`.mo`文件并重新启动服务器。

如果这不起作用，请告诉我们您如何计算输出字符集，这可能是相关的。

# c++ - 具有不同字符集的项目中的 C++ 链接错误

> ID：10242123
> 
> 赞同：2
> 
> 时间：2012-04-20T07:38:18.057
> 
> 标签：c++, character-encoding, exe

在 VS 2005 中编译我的 C++ 项目解决方案时出现链接错误。以下是场景。

我有一个解决方案，可以说`MySolution`其中有 2 个名为

`MyTestLib`是具有字符集且不支持的静态库`Use Multi-Byte Character Set`类型`CLR`项目

和

`MyTestApp``Use Unicode Character Set`是一个 .exe 应用程序，使用带有字符集和`CLR`支持的上述库

其中`MyTestLib`有两个具有以下定义的重载函数

```
int Class1::test1(int a)
{
    return a+4; 
}

bool Class1::test1(LPCTSTR param)
{
    return true;
} 
```

`MyTestApp`正在从它的代码中调用它们，例如

```
Class1 objcl1;
int a = objcl1.test1(12); //Works fine

Class1 objcl2;
string abc = "adsad";
bool t = objcl2.test1(abc.c_str()); //Error 
```

调用`test1(LPCTSTR)`版本会出错

`Error 1 error C2664: 'int TestLib::Class1::test1(int)' : cannot convert parameter 1 from 'const char *' to 'int'`

如果我将语句更改为`bool t = objcl2.test1((LPCTSTR)abc.c_str()); //Now linking Error` Then 我得到

`Error 2 error LNK2001: unresolved external symbol "public: bool __thiscall TestLib::Class1::test1(wchar_t const *)" (?test1@Class1@TestLib@@$$FQAE_NPB_W@Z) TestProject.obj`

但是如果我将项目`MyTestApp`字符集更改为，`Use Multi-Byte Character Set`那么所有错误都将得到解决。但我无法更改项目字符集，因为还有其他依赖项。

周围有工作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T08:03:48.957

问题是当您构建`MyTestLib`此签名时：

```
bool Class1::test1(LPCTSTR param); 
```

变成

```
bool Class1::test1(const char * param); 
```

因为`LPCTSTR`是一个宏，根据构建发生时的“字符集”配置进行设置。

现在，当您`MyTestApp`使用为 UNICODE 配置的“字符集”构建时，它会将该函数签名（我假设来自头文件）视为：

```
bool Class1::test1(wchar_t const * param); 
```

所以链接器没有希望将该函数链接到库中的实际内容。

解决方法是简单地不用`LPTCSTR`作函数的类型 - 已实现函数中该参数的类型将始终为`const char*`，因此只需在函数声明中说明即可。

# c# - 如何在c#中更改标签填充模式

> ID：10242124
> 
> 赞同：1
> 
> 时间：2012-04-20T07:38:19.093
> 
> 标签：c#

有什么办法可以改变标签的模式，即。取而代之的是全红色，可以说我希望背景颜色为红色，并且它必须具有垂直线/水平线等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:01:13.123

您可以创建从 Label 继承的 Label 控件并覆盖 OnPaintBackground

```
class MyLabel: System.Windows.Forms.Label {

    protected override void OnPaintBackground(System.Windows.Forms.PaintEventArgs pevent) {
        HatchBrush brush = new HatchBrush(HatchStyle.Cross, Color.Red, Color.White);
        pevent.Graphics.FillRectangle(brush, ClientRectangle);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T07:43:58.057

你可以这样做

```
Graphics g = lable1.CreateGraphics();
    g.FillRectangle(Brushes.Red, 0, 0, 100, 100);
    g.DrawLine(Pens.Black,0,0,100,0); 
```

# sencha-touch-2 - 为什么容器的添加函数使用带有对象的数组比使用带有 Sencha Touch 对象的数组更快

> ID：10242125
> 
> 赞同：3
> 
> 时间：2012-04-20T07:38:19.620
> 
> 标签：sencha-touch-2

我试图弄清楚在使用 Sencha Touch 2（速度方面）时最好使用什么。我已经发现如果我通过`Ext.create`或初始化屏幕上显示的组件几乎没有什么区别`{xtype:""}`。但是如果我将控件添加到这样的容器中，我该怎么办：

```
containerPanel = Ext.create('Ext.Container', {
            id: 'appContgdfsainer',
            fullscreen: true,
            items: Ext.create('Ext.Button', {
                text: 'Button',
                listeners: {tap:function(){containerPanel.add(items)}}
            })

        }); 
```

请注意，items 是一个包含 1000 个面板的数组，其中包含使用`{html:"test", xtype:"panel"};`或使用`Ext.create("Ext.Panel",{html:"test"});`
这给我创建的其他结果，然后是我所期望的。我期望的是`Ext.create`会更快，因为 sencha 只需要添加已经使用该`Ext.create`函数创建的组件。我预计另一种可能性会更慢，因为 sencha 首先必须先创建这个对象，然后才能添加它。
唯一的问题是，它不是。当我使用 Ext.create 添加面板时，加载面板的速度明显更快
。`{html:"test", xtype:"panel"};`

**问题：**
为什么将面板添加到容器时`{html:"test", xtype:"panel"};`会更快？`Ext.create`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T20:50:38.523

你怎么确定`faster`？

我在 jsperf.com 上创建了一个快速测试 - 它表明使用`Ext.create`速度更快。

链接：http: [//jsperf.com/st2-xtype-vs-create](http://jsperf.com/st2-xtype-vs-create)

# c# - 在 Compact Framework 中通过 HTTPS 发送请求时，HttpWebRequest 抛出异常？

> ID：10242127
> 
> 赞同：1
> 
> 时间：2012-04-20T07:38:27.670
> 
> 标签：c#, httpwebrequest, compact-framework, httpwebresponse

我正在尝试从适用于 SSL 的 Web 服务获取数据，因此它适用于[https://www.abc.com](https://www.abc.com)。但它给出了一个例外：

> System.Net.WebException：无法从传输连接中读取数据。System.Net.Sockets.SocketException：未知错误 (0x0)。

我尝试[了这个帮助文件](http://support.microsoft.com/kb/970549)，还下载了 cab 文件并再次安装它，但仍然得到同样的错误。

# postgresql - 如何从 postgis (nominatim import) 获得城市的区域管理？

> ID：10242129
> 
> 赞同：2
> 
> 时间：2012-04-20T07:38:31.430
> 
> 标签：postgresql, openstreetmap, postgis, nominatim

我用 osm2pgsql 检索了 europe.osm 数据库。现在我尝试利用它。有没有办法从小镇村庄或城市之类的方式获取州、国家、地区？

**编辑**
[http://wiki.openstreetmap.org/wiki/Nominatim](http://wiki.openstreetmap.org/wiki/Nominatim)
[https://github.com/twain47/Nominatim](https://github.com/twain47/Nominatim)

数据库 osm 格式： http:
[//download.geofabrik.de/osm/europe/](http://download.geofabrik.de/osm/europe/)
这是数据库架构：
[http ://wiki.openstreetmap.org/wiki/Osm2pgsql/schema](http://wiki.openstreetmap.org/wiki/Osm2pgsql/schema)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:02:26.983

好吧，我没有下载你的数据，但我的数据库中已经加载了几乎所有拉丁美洲的 openstreetmaps 数据，我相信它会这样做。

这是一个城市最近的州的一个例子：

```
select distinct on (a.name) 
   a.name as city,
   b.name as state,
   min(St_Distance(b.way, a.way)) as d 
from planet_osm_point as a, 
  (SELECT name, way, place from planet_osm_point WHERE place='state') as b 
where a.place='city' group by 1,2 order by 1 asc; 
```

但这并不准确，假设您可以使用多边形表进行更好的猜测：

```
select a.name as city,b.name as state,b.place 
from planet_osm_point as a, planet_osm_polygon as b 
where St_Contains(b.way, a.way) 
   and a.place='city'; -- and b.place='state' -- my polys table aren't tagged properly so I ignored polys.place 
```

希望它有效:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T06:23:24.890

我假设您已按照[安装页面](http://wiki.openstreetmap.org/wiki/Nominatim/Installation)上的说明进行了完整的 Nominatim 安装，而不仅仅是 osm2pgsql 导入。

直接在数据库上执行 SQL 查询有点复杂。通过将反向请求直接发送到本地安装，您可以更轻松地获取管理信息。如果您有自己的 OSM id，请发送如下内容： [http://your.local.nominatim.server/reverse?osm_type=W&osm_id=](http://your.local.nominatim.server/reverse?osm_type=W&osm_id=)并处理返回的 XML。

如果您仍想走 SQL 之路，请查看 placex 和 place_addressline 表。前者包含所有 OSM 对象，后者包含它们之间的关系。

# android - AndEngine：更新精灵上的处理程序

> ID：10242130
> 
> 赞同：0
> 
> 时间：2012-04-20T07:38:35.940
> 
> 标签：android, andengine

我是 and-engine 的新手，因为从两周开始就开始使用它。我正在开发球类游戏，我的要求如下，当球第二次接触地面时，它应该被破坏。我尝试在球精灵上使用更新处理程序，当计数达到 2 时它工作正常（我明确调用删除逻辑）。当它接触到地面时，我在 Update() 上的处理程序中的计数帮助下破坏了球体. 不幸的是，第一次（第一次碰撞时计数达到 2）身体被破坏了。上述场景经常重复，与联系人监听器一起工作但没有改变。任何帮助将不胜感激。

```
@Override
public void onUpdate(float pSecondsElapsed) {
Shape path = new Rectangle(ballSprite.getX(),ballSprite.getY(), 10, 10);
if (ballCount <= 2) {
                mScene.attachChild(path);
                pathCoordinates.add(path);
                dumpPathCoordinates.add(path);
            }
            if (ballSprite.collidesWith(ground)) {
                ballCount++;
                if (ballSprite.collidesWith(ground) && ballCount == 2) {
                    removePath();
                    removeBall(ballSprite);
                    addFace(10, 10);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:10:33.153

第一次接触是否可能比一次引擎迭代持续更长的时间？如果是这样，则仅当此序列发生时才需要允许移除球 `touching->not touching->touching`。到目前为止，即使序列是 ，球也会被移除 `touching->still touching`。

# c# - 在 foreach 中按 id 获取媒体项目 - umbraco

> ID：10242133
> 
> 赞同：0
> 
> 时间：2012-04-20T07:38:51.810
> 
> 标签：c#, asp.net, razor, media, umbraco

正如我在标题中所写，我在 foreach 中使用 Media 时遇到问题。

这是我的代码：

```
@foreach (var item in @Model.Children.Where("Visible").OrderBy("UpdateDate"))
    {
        @{
            var link = new umbraco.cms.businesslogic.media.Media(item.MediaID).Children.FirstOrDefault().getProperty("umbracoFile").Value;
        }
        <div class="galleryListItem" style="background-image: url('/imageGen.ashx?image=@link&width=273&height=161');">
            <a href="@item.Url" class="link"></a>
            <div class="contentGalleryList">
                <div class="highlightGalleryList">@item.Name</div>
            </div>
        </div>
    } 
```

这行：

```
@link = new umbraco.cms.businesslogic.media.Media(item.MediaID).FirstOrDefault().getProperty("umbracoFile").Value; 
```

给我这个错误：

```
Error loading MacroEngine script (file: GalleryList.cshtml); 
```

我能做些什么来开始工作？也许这是更好地解决这个问题？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T16:48:26.950

我认为这样的事情应该适合你：（我不是 100% 确定你的代码试图做什么，我假设 item.MediaID 包含媒体项目的 id）

```
@foreach (var item in @Model.Children.Where("Visible").OrderBy("UpdateDate"))
{
    var media = Library.MediaById(item.MediaID);

       <div class="galleryListItem" style="background-image: url('/imageGen.ashx?image=@media.Url&width=273&height=161');">
        <a href="@item.Url" class="link"></a>
        <div class="contentGalleryList">
            <div class="highlightGalleryList">@item.Name</div>
        </div>
    </div>
} 
```

如果您需要有关如何在 Umbraco 中的 Razor 中执行操作的更多信息，请下载宝贵的[umbraco DynamicNode 剃须刀备忘单](http://our.umbraco.org/projects/developer-tools/razor-dynamicnode-cheat-sheet)

[our.umbraco.org wiki](http://our.umbraco.org/wiki/reference/code-snippets/razor-snippets)上也有很多很棒的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:58:58.230

我解决它。问题是我在其他代码部分中有打开的代码部分。

工作代码：

```
@foreach (var item in @Model.Children.Where("Visible").OrderBy("UpdateDate"))
{
    var link = new umbraco.cms.businesslogic.media.Media(item.MediaID).Children.FirstOrDefault().getProperty("umbracoFile").Value;

    <div class="galleryListItem" style="background-image: url('/imageGen.ashx?image=@link&width=273&height=161');">
        <a href="@item.Url" class="link"></a>
        <div class="contentGalleryList">
            <div class="highlightGalleryList">@item.Name</div>
        </div>
    </div>
} 
```

# html - 表单中的提交按钮 - 单击时应用 JavaScript 检查？

> ID：10242137
> 
> 赞同：0
> 
> 时间：2012-04-20T07:39:01.697
> 
> 标签：html, button, onclick

我在表单中有一个按钮和一个文本字段，当它单击表单时，它会发布到另一个页面。是否有可能有一些 JavaScript 函数在单击按钮时检查文本字段是否包含值？如果单击按钮但该字段为空，我想要的是显示一条消息（警报框）。仅当该字段已填写时，该按钮才应提交。可能的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:35:49.963

当然这是可能的。它甚至是 Web 开发的基础知识。查看此链接以了解如何在提交前验证数据：http:
[//www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp)

# android - Adjusting size of custom dialog box in android

> ID：10242144
> 
> 赞同：22
> 
> 时间：2012-04-20T07:39:21.447
> 
> 标签：android

I am building an custom alert dialog box for my application i have written the code and its working but the only problem is its size it is not adjusting according to my content in dialog box. below is my code:

```
public class CustomDialogBoxActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button button = (Button)findViewById(R.id.Button01main);

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                final Dialog myDialog = new Dialog(CustomDialogBoxActivity.this);
                myDialog.setContentView(R.layout.dialog_sms_layout);
                myDialog.setTitle("Select any one");

                Button ok = (Button)myDialog.findViewById(R.id.buttonOK);
                final RadioGroup radioGrp = (RadioGroup)myDialog.findViewById(R.id.radioGroupSmsDialog);

                final CheckBox mob1 = (CheckBox)myDialog.findViewById(R.id.checkBoxMob1);
                final CheckBox mob2 = (CheckBox)myDialog.findViewById(R.id.checkBoxMob2);
                mob1.setText("9029691986");
                mob2.setText("99263911766");

                ok.setOnClickListener(this);

                ok.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        if(mob1.isChecked() && mob2.isChecked()) {
                            if(radioGrp.getCheckedRadioButtonId() == R.id.radioSms) {
                                String[] phoneArray = {mob1.getText().toString(),mob2.getText().toString()};

                                Log.v("MOB1",mob1.getText().toString());
                                Log.v("MOB2",mob2.getText().toString());
                                Log.v("Mobile No", ""+phoneArray.toString());
                                sendSms("SMS Message",phoneArray);

                            }else if(radioGrp.getCheckedRadioButtonId() == R.id.radioBusinessCard) {
                                String[] phoneArray = {mob1.getText().toString(),mob2.getText().toString()};

                                Log.v("MOB1",mob1.getText().toString());
                                Log.v("MOB2",mob2.getText().toString());
                                Log.v("Mobile No", ""+phoneArray.toString());
                                sendSms("SMS Business Card",phoneArray);
                            }
                        }else if(mob1.isChecked() && !mob2.isChecked()) {
                            if(radioGrp.getCheckedRadioButtonId() == R.id.radioSms) {
                                String[] phoneArray = {mob1.getText().toString()};

                                Log.v("MOB1",mob1.getText().toString());                                
                                Log.v("Mobile No", ""+phoneArray.toString());
                                sendSms("SMS Message",phoneArray);

                            }else if(radioGrp.getCheckedRadioButtonId() == R.id.radioBusinessCard) {
                                String[] phoneArray = {mob1.getText().toString()};

                                Log.v("MOB1",mob1.getText().toString());                                
                                Log.v("Mobile No", ""+phoneArray.toString());
                                sendSms("SMS Business Card",phoneArray);
                            }

                        }else if(!mob1.isChecked() && mob2.isChecked()) {
                            if(radioGrp.getCheckedRadioButtonId() == R.id.radioSms) {
                                String[] phoneArray = {mob2.getText().toString()};

                                Log.v("MOB2",mob2.getText().toString());
                                Log.v("Mobile No", ""+phoneArray.toString());
                                sendSms("SMS Message",phoneArray);

                            }else if(radioGrp.getCheckedRadioButtonId() == R.id.radioBusinessCard) {
                                String[] phoneArray = {mob2.getText().toString()};

                                Log.v("MOB2",mob2.getText().toString());
                                Log.v("Mobile No", ""+phoneArray.toString());
                                sendSms("SMS Business Card",phoneArray);
                            }

                        }else if(!mob1.isChecked() && !mob2.isChecked()) {
                            Toast.makeText(getApplicationContext(), "Select atleast one number", Toast.LENGTH_SHORT).show();
                        }                       
                    }
                });
                myDialog.show();
            }

        });
    }

    public void sendSms(String message,String[] phoneNumber) {

        Intent smsIntent = new Intent(Intent.ACTION_VIEW);
        smsIntent.setData(Uri.parse("sms:"));
        smsIntent.putExtra("sms_body", message);
        smsIntent.putExtra("address", phoneNumber);
        startActivity(smsIntent);       
    }
} 
```

This is the [output](http://i42.tinypic.com/2rw4xw3.png) that i'm getting on button click

This is my main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is my main activity, from here, I want to display a dialog, 
                        after the user clicked the button below this text." />

    <Button
        android:id="@+id/Button01main"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Show Dialog" />

</LinearLayout> 
```

and this is my dialog_sms_layout

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

<RadioGroup
        android:id="@+id/radioGroupSmsDialog"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
         >

        <RadioButton
            android:id="@+id/radioSms"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="SMS" />

        <RadioButton
            android:id="@+id/radioBusinessCard"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Card" />
    </RadioGroup>

<CheckBox
    android:id="@+id/checkBoxMob1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="true"
    android:text="Primary" />

<CheckBox
    android:id="@+id/checkBoxMob2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Secondary" />

<Button
    android:id="@+id/buttonOK"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="OK" />

</LinearLayout> 
```

I want to adjust the dialog box size please help. thanks in advance

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-04-20T09:01:22.237

我不确定这是否适合您的情况，但如果您想将其设置为全宽或类似的东西，您需要获取活动的当前窗口并设置它的布局参数，如下所示：

```
myDialog.show();
Window window = myDialog.getWindow();
window.setLayout(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT); 
```

### *编辑*

`FILL_PARENT`已弃用，请改用

```
window.setLayout(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-20T12:40:56.900

您只需将样式“Theme_AppCompat_Light_Dialog_Alert”添加到您的对话框中，如下所示：

```
Dialog dialog = new Dialog(context, R.style.Theme_AppCompat_Light_Dialog_Alert); 
```

你的对话框看起来像普通的警报对话框

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-29T20:28:07.957

我通过使用此代码删除标题栏解决了这个问题

```
 getDialog().getWindow().requestFeature(Window.FEATURE_NO_TITLE); 
```

并为我的布局中的元素添加填充以根据我的喜好拉伸对话框。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-24T06:29:45.700

好吧，我无法解决这个问题，但我发现搁浅了：创建一个 RelaytiveLayout 环绕您的根布局并将重力设置为中心，如下所示：

```
<RelativeLayout
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:gravity="center">

   <YourRootLayoutHere/>

</RelativeLayout 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-18T02:51:43.763

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical">

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="8dp"
    android:layout_marginLeft="8dp"
    android:layout_marginRight="8dp"
    android:gravity="center"
    android:text="Write Feedback"
    android:textColor="@color/colorAccent"
    android:textSize="22sp"
    android:textStyle="bold" />

<RatingBar
    android:id="@+id/rating_bar"
    style="?android:attr/ratingBarStyleIndicator"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_margin="8dp"
    android:isIndicator="false"
    android:numStars="5" />

<EditText
    android:id="@+id/inputSearchEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="20dp"
    android:layout_marginLeft="8dp"
    android:layout_marginRight="8dp"
    android:layout_marginTop="8dp"
    android:background="@drawable/edittextstyle"
    android:gravity="center"
    android:hint="@string/write_feedback"
    android:inputType="text"
    android:minHeight="100dp"
    android:padding="16dp" />

<Button
    android:id="@+id/submit_feedback_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginBottom="16dp"
    android:layout_marginLeft="8dp"
    android:layout_marginRight="8dp"
    android:layout_marginTop="8dp"
    android:background="@drawable/background_stroke"
    android:text="submit"
    android:textColor="@android:color/white" />
   </LinearLayout>

Dialog class :- 

dialog = new Dialog(mContext);
dialog.setContentView(R.layout.dialog_feedback);
dialog.show(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-19T06:57:52.127

使用 Relative_Layout 而不是 Linear_layout 来获得自定义对话框的全宽。我不知道为什么，但这对我有用。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-04-08T09:38:31.693

```
 private void showdialog() {
    final Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.activity_disclaimer);
    dialog.show();
    Window window = dialog.getWindow();
    window.setLayout(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
    Button dialogButton = (Button) dialog.findViewById(R.id.ok);
    dialogcb= (CheckBox) dialog.findViewById(R.id.checkBox);
    dialogButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            accepted = dialogcb.isChecked();
            SharedPreferences.Editor edit=prefs.edit();
            edit.putBoolean("show_again",!accepted);
            edit.commit();
            dialog.dismiss();
        }
    });

    dialog.show();
} 
```

# python - Using .sort with PyMongo

> ID：10242149
> 
> 赞同：130
> 
> 时间：2012-04-20T07:39:59.593
> 
> 标签：python, mongodb, pymongo

With PyMongo, when I try to retrieve objects sorted by their 'number' and 'date' fields like this:

```
db.test.find({"number": {"$gt": 1}}).sort({"number": 1, "date": -1}) 
```

I get this error:

```
TypeError: if no direction is specified, key_or_list must be an instance of list 
```

What's wrong with my sort query?

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-04-20T07:54:13.490

`sort`应该是键方向对的列表，即

```
db.test.find({"number": {"$gt": 1}}).sort([("number", 1), ("date", -1)]) 
```

这必须是一个列表的原因是参数的顺序很重要，并且`dict`s 在 Python < 3.6 中没有顺序

# asp.net-mvc - Json string list is coming with empty

> ID：10242150
> 
> 赞同：0
> 
> 时间：2012-04-20T07:39:59.627
> 
> 标签：asp.net-mvc, json, http-post

am passing a json string collection from Android device to .net MVC HttpPost method. my json string is like.

```
{"collection",[{"Name":"A","Age":"12","Class":"10"},{"Name":"B","Age":"12","Class":"10"}]} 
```

My MVC control function is:

```
 [HttpPost]
    public ActionResult Create(string[] collection)
    {
        try
        {
            // TODO: Add insert logic here
            JavaScriptSerializer json_serializer = new JavaScriptSerializer();
            List<Model.StudentBehaviour> stdbehaviour_list = Newtonsoft.Json.JsonConvert.DeserializeObject<List<Model.StudentBehaviour>>(collection);
            Lib.StudentModule.StudentManager.InsertStudentBehaviours(stdbehaviour_list);               
            return Json("success", JsonRequestBehavior.AllowGet);
        }
        catch
        {
            return Json("exception", JsonRequestBehavior.AllowGet);
        }
    } 
```

the function parameter value is

```
collection = "(Collection)" 
```

expected value in collection is

```
collection[0] 
Name = A 
Age = 12
Class = 10
collection[1] 
Name = B 
Age = 12
Class = 10 
```

please help to fix this issue

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:11:59.637

ASP.NET MVC 有 ModelBinding 的概念。这意味着如果您向 Action 方法添加参数，MVC 将尝试用您发送的数据填充这些参数。

这意味着您可以将代码更改为：

```
 // Example of your Student class. 
 // Make sure that all properties you want to bind to are public
 public class Student
 {
     public string Name { get; set; }
     public int Age { get; set; }
     public int Class { get; set; }
 }

// Example of an Action method. Note that instead of taking a string as parameter,
// you just accept a collection of Student objects.
[HttpPost]
public JsonResult Create(List<Student> collection)
{
    if (ModelState.IsValid)
    {
        return Json("success", JsonRequestBehavior.AllowGet);
    }
    else
    {
        return Json("exception", JsonRequestBehavior.AllowGet);
    }
} 
```

然后，您可以使用以下 jquery 发布您的数据：

```
function sendData() {    
        var data = [{ 'Name': 'A', 'Age': '12', 'Class': '10' },
            { 'Name': 'B', 'Age': '12', 'Class': '10' }];

        var collection = JSON.stringify(data);

        $.ajax({
            url: "Home/Create",
            type: "POST",
            data: collection,
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
        }).done(function (msg) {
            alert("Data Saved: " + msg);
        });
    } 
```

# iphone - MKStorekit consumable items configuring MKStoreKitConfigs.plist iphone

> ID：10242151
> 
> 赞同：0
> 
> 时间：2012-04-20T07:40:00.967
> 
> 标签：iphone, ios, in-app-purchase, mkstorekit

I am using MKSorekit for inapp purcase. I need two consumables in my app. I have tried but some problem. I don't know how to configure the MKStoreKitConfigs.plist. I have entered all items in the consumables dictionary an strings, but I found that that is not correct. Each item should be dict, Can anyone tell how to set values and keys for that dicts Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:01:08.677

您只需添加一个带有两个键的字典：`Count`和`Name`. 这就是你所需要的

`Name`是您的产品名称，`Count`是与之关联的虚拟计数。

# java - how to Put add in our android application

> ID：10242152
> 
> 赞同：0
> 
> 时间：2012-04-20T07:40:07.240
> 
> 标签：java, android

I have created an application for admob, but I am getting an error. I found an example from Google and I have tried it, but there is a problem when I'm launching the application .

I'm using Android 2.2 API 8. I am able to launch the application, but this block is causing an error.

```
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

If I change this to

```
android:configChanges="keyboard|keyboardHidden" 
```

then I am able to launch the application, but there is an error coming on our add field.

```
you must have adactivity declare in Android Manfiest.xml with config change 
```

Due to this I am not able to show google adds in our application.

Please help me to fix this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:49:01.023

我想你只需要按照[这个](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)教程。

尤其是您的问题应该与以下几行有关：

> 适用于 Android 的 Google AdMob 广告 SDK 需要 Android 1.5 或更高版本。确保您拥有最新的 Android SDK 副本并且您正在针对至少 Android v3.2 进行编译（将 default.properties 中的目标设置为 android-13）。

这意味着 minSDK 可以降到 1.5，但您至少必须在 3.2 上编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:48:47.373

```
 - AdActivity.java

package com.android.ads;

import android.app.Activity;
import android.os.Bundle;

import com.google.ads.AdRequest;
import com.google.ads.AdView;

public class AdsActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        AdView adview = (AdView) findViewById(R.id.adView);
        AdRequest re = new AdRequest();
        re.setTesting(true);
        re.setGender(AdRequest.Gender.FEMALE);
        adview.loadAd(re);
    }
}

 - main.xml

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

        xmlns:ads="http://schemas.android.com/apk/res/com.android.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

     <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="Your adunit ID" 
        android:layout_alignParentBottom="true"/>    
</LinearLayout>

Remember Put GoogleMapAdmobSdk.jar after creating libs folder for Configure build path 

Create the attrs.xml in the Values folder

<?xml version="1.0" encoding="utf-8"?>
<resources>
  <declare-styleable name="com.google.ads.AdView">
      <attr name="adSize">
          <enum name="BANNER" value="1"/>
          <enum name="IAB_MRECT" value="2"/>
          <enum name="IAB_BANNER" value="3"/>
          <enum name="IAB_LEADERBOARD" value="4"/>
      </attr>
      <attr name="adUnitId" format="string"/>
  </declare-styleable>
</resources>

 - AndroidManifest

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.ads"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
 <uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".AdsActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.google.ads.AdActivity"
                      android:configChanges="keyboard|keyboardHidden|orientation"/>
    </application>

</manifest>

Your work is done buddy............ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:46:38.293

来自 AdMob 文档

您需要将整个活动标签添加到 AndroidManifest.xml

```
<activity android:name="com.google.ads.AdActivity" 
    android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

请参阅[https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)

# jqgrid - jqgrid currency formatter

> ID：10242153
> 
> 赞同：4
> 
> 时间：2012-04-20T07:40:08.410
> 
> 标签：jqgrid

In Jqgrid for currency formatter there is only thousandsSeparator is available but i want lakhsSeparator

```
colModel: [
            {name: 'Code', index: 'Code', width: 55, editable: true, sortable: true },
        { name: 'Ammount', index: 'Ammount', width: 100, editable: true, sortable: false, formatter: 'currency', formatoptions: { prefix: '($', suffix: ')', thousandsSeparator: ','} },
          ], 
```

here in place of thousandsSeparator i want lakhsSeparator.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T11:24:36.057

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:40:07.103

您可以将此功能添加到格式化程序的货币中。首先，您需要修改内置的 NumberFormat 函数。为此，您可以在加载 jqGrid 脚本文件后运行以下脚本：

```
$.fmatter.util.NumberFormat = function(nData,opts) {
    if(!$.fmatter.isNumber(nData)) {
        nData *= 1;
    }
    if($.fmatter.isNumber(nData)) {
        var bNegative = (nData < 0);
        var sOutput = nData + "";
        var sDecimalSeparator = (opts.decimalSeparator) ? opts.decimalSeparator : ".";
        var nDotIndex;
        if($.fmatter.isNumber(opts.decimalPlaces)) {
            var nDecimalPlaces = opts.decimalPlaces;
            var nDecimal = Math.pow(10, nDecimalPlaces);
            sOutput = Math.round(nData*nDecimal)/nDecimal + "";
            nDotIndex = sOutput.lastIndexOf(".");
            if(nDecimalPlaces > 0) {
                if(nDotIndex < 0) {
                    sOutput += sDecimalSeparator;
                    nDotIndex = sOutput.length-1;
                }
                else if(sDecimalSeparator !== "."){
                    sOutput = sOutput.replace(".",sDecimalSeparator);
                }
                while((sOutput.length - 1 - nDotIndex) < nDecimalPlaces) {
                    sOutput += "0";
                }
            }
        }
        if(opts.thousandsSeparator) {
            var sThousandsSeparator = opts.thousandsSeparator;
            nDotIndex = sOutput.lastIndexOf(sDecimalSeparator);
            nDotIndex = (nDotIndex > -1) ? nDotIndex : sOutput.length;
            var sNewOutput = sOutput.substring(nDotIndex);
            var nCount = -1;
            for (var i=nDotIndex; i>0; i--) {
                nCount++;
                if ((nCount%3 === 0) && (i !== nDotIndex) && (!bNegative || (i > 1))) {
                    sNewOutput = sThousandsSeparator + sNewOutput;
                }
                sNewOutput = sOutput.charAt(i-1) + sNewOutput;
            }
            sOutput = sNewOutput;
        }
        else if(opts.lakhsSeparator) {
            var sLakhsSeparator = opts.lakhsSeparator;
            nDotIndex = sOutput.lastIndexOf(sDecimalSeparator);
            nDotIndex = (nDotIndex > -1) ? nDotIndex : sOutput.length;
            var sNewOutput = sOutput.substring(nDotIndex);
            var nCount = -1;
            var i = nDotIndex;
            while (i > 0) {
                for (var nCount = 0; nCount < 7 && i > 0; nCount++) {
                    sNewOutput = sOutput.charAt(i-1) + sNewOutput;
                    if (((nCount === 2) || (nCount === 4) || (nCount == 6)) && (!bNegative || (i > 1))) {
                        sNewOutput = sLakhsSeparator + sNewOutput;
                    }
                    i--;
                }
            }
            sOutput = sNewOutput;
        }
        sOutput = (opts.prefix) ? opts.prefix + sOutput : sOutput;
        sOutput = (opts.suffix) ? sOutput + opts.suffix : sOutput;
        return sOutput;

    } else {
        return nData;
    }
}; 
```

现在您可以像这样定义格式选项：

```
colModel: [
        { name: 'Code', index: 'Code', width: 55, editable: true, sortable: true },
        { name: 'Ammount', index: 'Ammount', width: 100, editable: true, sortable: false, formatter: 'currency', formatoptions: { prefix: '($', suffix: ')', thousandsSeparator: null, lakhsSeparator: ',' } },
        ...
], 
```

那应该会给您所需的结果。

# salesforce - When saving endpoint in Remote site settings the Remote Site URL changed

> ID：10242159
> 
> 赞同：0
> 
> 时间：2012-04-20T07:40:30.700
> 
> 标签：salesforce

I want to invoke my external service in my Apex class on Salesforce. So I add my external service endpoint in Security->Remote site settings.

My Remote Site URL like this [http://207.168.210.55:8080/testservice/jaxrs/salesforceService/restPost](http://207.168.210.55:8080/testservice/jaxrs/salesforceService/restPost)

But after I click save, the Remote Site URL is change to the [http://207.168.210.55:8080](http://207.168.210.55:8080)

I don't konw why the rest part of my endpoint disappeared. So does anyone can help me?

Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:19:02.603

[远程站点设置](https://login.salesforce.com/help/doc/en/configuring_remoteproxy.htm)只需要一个域（或者在您的情况下是一个 IP）和一个端口。截断的远程站点 URL 应该可以正常访问您的服务。

# php - php 检查字符串是否包含一些字母/数字

> ID：10242161
> 
> 赞同：1
> 
> 时间：2012-04-20T07:40:38.690
> 
> 标签：php, string, numbers, contains, letters

我有一些字符串，我想检查其中是否包含一些字母或数字。这些字母来自 az、AZ 和所有数字。

这就是例子： $goodstring = "abcdefg%$#%&asdqwe"; $badstring = "%$#&%#/&/#$%!#-.";

检查 $goodstring 是否包含字母/数字，如果，则返回 true。检查 $badstring 是否包含字母/数字，如果不包含，则返回 false。

我也使用了 preg_match，但这仅适用于字符串中没有一些字母/数字的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:53:15.670

给你（“*唯一*”版本）：

```
$containsOnlyLettersOrNumbers = (preg_match('~^[0-9a-z]+$~i', $string) > 0); 
```

或者（取决于你到底想要什么）：

```
$containsLettersOrNumbers = (preg_match('~[0-9a-z]~i', $string) > 0); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T07:56:39.240

```
var_dump(preg_match('#[0-9]|[a-z]#i', $goodstring));
var_dump(preg_match('#[0-9]|[a-z]#i', $badstring)); 
```

# database - ER/Studio 中自动生成的密钥

> ID：10242162
> 
> 赞同：-1
> 
> 时间：2012-04-20T07:40:42.173
> 
> 标签：database

如果有人知道，请告诉如何在 ER/Studio 8.0 中将密钥声明为自动生成。这很紧急。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:34:20.903

完毕。检查身份选项，提供种子和增量，同时定义密钥。

# php - How to get a profile picture from facebook

> ID：10242163
> 
> 赞同：0
> 
> 时间：2012-04-20T07:40:43.807
> 
> 标签：php, facebook, authentication, fbml, fbconnect

I am trying to get Facebook profile picture . I am using the following with my value in place of ######### . After running the PHP i get a message "Hello". I want that i get my name also with it like "Hellow Aditya" along with my profile picture. what should i edit to get that ? Also would it be possible to save the profile picture on the sever itself?

```
<?php 

   $app_id = ###############;
   $app_secret = "#################";
   $my_url = "###################";

   session_start();
   $code = $_REQUEST["code"];

   if(empty($code)) {
     $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
     $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
       . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
       . $_SESSION['state'];

     echo("<script> top.location.href='" . $dialog_url . "'</script>");
   }

   if($_REQUEST['state'] == $_SESSION['state']) {
     $token_url = "https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
       . "&client_secret=" . $app_secret . "&code=" . $code;

     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);

     $graph_url = "https://graph.facebook.com/me?access_token=" 
       . $params['access_token'];

     $user = json_decode(file_get_contents($graph_url));
     echo("Hello " . $user->name);
   }
   else {
     echo("The state does not match. You may be a victim of CSRF.");
   }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:44:47.387

你可以这样得到它：http://graph.facebook.com/[USER ID]/picture

# javascript - Intercept and pre-process jQuery-ui autocomplete data

> ID：10242165
> 
> 赞同：2
> 
> 时间：2012-04-20T07:40:48.190
> 
> 标签：javascript, jquery, ajax, jquery-ui, jquery-ui-autocomplete

I have a Jquery UI autocomplete code that grabs data from an ajax request, as i grab the data the results are already put in the input box where the autocomplete is attached. my problem is i have a other data along the data that will be posted with the result of the autocomplete.

I had tried to grab all the i need and put it in a single string with delimeters so i can split() it on the client-side. I want to save the other data in a hidden text field

here is my code

```
 <div id="01ac091c834d81b41f0ef4b6eb09cde90bb9aa1a" style="display:none" title="Add Member">
        Type the name of the member
        <br>
        <br>
        <div style="text-align:center">
            <input type="text" id="txtUserFind" size="35">
        </div>
        <input type="hidden" id="hidtxtUserFind-nickname">
        <input type="hidden" id="hidtxtUserFind-userhash">
        <input type="hidden" id="hidtxtUserFind-picture">
        <input type="hidden" id="hidtxtUserFind-sex">
    </div>
    <script type="text/javascript">
    head(function() {

        $(":button:contains('Select User')").attr("disabled","disabled").addClass("ui-state-disabled");

        $("#txtUserFind").keydown(function(){
            $(":button:contains('Select User')").attr("disabled","disabled").addClass("ui-state-disabled");
        });

        $("#txtUserFind").change(function(){

        var userdetails = $("#txtUserFind").val().split(";");
        alert($("#txtUserFind").val());

        /*
        0  profiles.nickname,
        1  profiles.firstname,
        2  profiles.surname,
        3  users.user_hash,
        4  profiles.sex,
        5  profiles.picture
        */

        $("input#hidtxtUserFind-nickname").val(userdetails[0]);
        $("input#txtUserFind").val(userdetails[1] + " " + userdetails[2]);
        $("input#hidtxtUserFind-userhash").val(userdetails[3].replace("u-",""));
        $("input#hidtxtUserFind-sex").val(userdetails[4]);
        if(userdetails.length > 5){
            $("input#hidtxtUserFind-picture").val(userdetails[5]);
        }   

        });

        $("<?php echo $tagmemberbtn; ?>").click(function(){
            $("#01ac091c834d81b41f0ef4b6eb09cde90bb9aa1a").dialog({
                modal:true,
                resizable: false,
                height:250,
                width:400,
                hide:"fade",
                open: function(event, ui){
                    searchdone = false;
                    $(":button:contains('Select User')").attr("disabled","disabled").addClass("ui-state-disabled");
                },
                beforeClose: function(event, ui){
                    $("#txtUserFind").val("");
                },
                buttons:{
                    "Select User":function(){
                        $(this).dialog("close");
                    },
                    "Close":function(){ 
                        searchdone = false;
                        $("#txtUserFind").val(""); 
                        $(this).dialog("close");                
                    }
                }
            });
        });

        $(function() {
            var cache = {},
            lastXhr;
            $("#txtUserFind").autocomplete({
                source:function(request,response) {
                    var term = request.term;
                    if ( term in cache ) {
                        response(cache[term]);
                        return;
                    }
                    lastXhr = $.getJSON(cvars.userburl+"getusers", request, function(data,status,xhr) {
                        stopAllAjaxRequest();
                        cache[ term ] = data;
                        if ( xhr === lastXhr ) {
                            response( data );
                        }
                    });
                },
                minLength: 1,
                select: function(event, ui) {

                    $(":button:contains('Select User')").removeAttr("disabled").removeClass("ui-state-disabled");
                }
            }).data("autocomplete")._renderItem = function(ul,item){
                if(item.picture==null){
                    //know if girl or boy
                    if(item.sex<=0){
                        item.picture = cvars.cthemeimg + "noimagemale.jpg";
                    }
                    else{
                        item.picture = cvars.cthemeimg + "noimagefemale.jpg"; 
                    }
                }
                else{
                    item.picture = cvars.gresuser + "hash=" + item.user_hash.replace("u-","") +"&file="+item.picture.replace("f-","");
                }
                var inner_html = '<a><div class="autocomplete-users-list_item_container"><div class="autocomplete-users-image"><img src="' + item.picture + '" height="35" width="35"></div><div class="label">' + item.nickname + '</div><div class="autocomplete-users-description">' + item.firstname + " " + item.surname + '</div></div></a>';
                return $("<li></li>")
                    .data("item.autocomplete",item)
                    .append(inner_html)
                    .appendTo(ul);
            };
        });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:12:16.857

你的想法是对的，你必须使用回调作为`source`参数。我在这里整理了一个例子：

[**jsFiddle 上的演示**](http://jsfiddle.net/vmvgL/)

如果您仔细阅读[文档](http://jqueryui.com/demos/autocomplete/)，它会说：

> 第三种变体，回调，提供了最大的灵活性，可用于将任何数据源连接到自动完成。回调有两个参数：
> 
> 一个请求对象，具有一个名为“term”的属性，它指的是文本输入中当前的值。例如，当用户在城市字段中输入“new yo”时，自动完成项将等于“new yo”。
> 
> 响应回调，它期望单个参数包含要向用户建议的数据。此数据应根据提供的术语进行过滤，并且可以采用上述简单本地数据的任何格式（字符串数组或具有标签/值/两个属性的对象数组）。在请求期间提供自定义源回调以处理错误时，这一点很重要。即使遇到错误，您也必须始终调用响应回调。这确保了小部件始终具有正确的状态。

所以这是我在演示中使用的示例实现：

```
$("#autocomplete").autocomplete({
    source: function(request, response) {
        $.ajax({
            url: "/echo/html/", // path to your script
            type: "POST",       // change if your script looks at query string
            data: {             // change variables that your script expects
                q: request.term
            },
            success: function(data) {
                                // this is where the "data" is processed
                                // for simplicity lets assume that data is a
                                // comma separated string where first value is
                                // the other value, rest is autocomplete data
                                // the data could also be JSON, XML, etc
                var values = data.split(",");
                $("<div/>").text("Other value: " + values.shift()).appendTo("body");
                response(values);
            },
            error: function() {
                response([]);   // remember to call response() even if ajax failed
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:24:27.247

您可以在选择时包含一个功能。在该函数中，您可以根据需要访问所选项目和进程的值和标签：

```
$('#input_id').autocomplete({
    source:"www.example.com/somesuch",
    select: function(event, ui){
        var value = ui.item.value;
        valueArray = value.split('whatever delimiter here');
        //do what you will with the values
        ui.item.value = ui.item.label; //This ensures only the label is displayed after processing.
    }
}); 
```

# reporting-services - SSRS 2008 How to automate sending of reports depending on parameter in a DB table

> ID：10242171
> 
> 赞同：0
> 
> 时间：2012-04-20T07:41:19.420
> 
> 标签：reporting-services

I need to send aa report on a regular basis. Depending on the wanted parameters, I should configure manually 260 subscritions. I'm guessing there is a way to automate this, I can't see exactly what to use...

Actually all my parameters are stored in a db table, with column name corresponding to my report parameter.

Any idea?

Thanks a lot

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:47:34.107

您需要使用“数据驱动订阅”[数据驱动订阅 SSRS 标准版 2008](https://stackoverflow.com/questions/7875827/data-driven-subscriptions-ssrs-standard-edition-2008)

# android - 在 4.0.3 上的 EXTRA_STATE_OFFHOOK（拨出电话）之后无法启动活动

> ID：10242175
> 
> 赞同：0
> 
> 时间：2012-04-20T07:41:25.237
> 
> 标签：android, android-activity

我在android环境中很新。

此问题发生在 android 4.0.3 上，但它在 android 2.2 上有效。我只是可以在拨出电话后开始活动。我只想在打电话时将我的活动回调到前台。但它适用于 android 2.2，但不适用于 4.0.3。

这是我的代码。此代码适用于传入状态的两个版本。但它不适用于 4.0.3 的传出意图。我从 BroadcastReceiver 调用这个意图。请注意，当我的活动处于前台状态时，我不想结束电话通话活动。我在 Mainfest.xml 上将启动模式设置为“singleInstance”。

```
Toast.makeText(context, "Should Start Activity", Toast.LENGTH_LONG).show();
                Intent callsensorintent = new Intent();
                callsensorintent.setFlags(
                        Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT
                        |Intent.FLAG_ACTIVITY_REORDER_TO_FRONT
                        |Intent.FLAG_ACTIVITY_NEW_TASK
                       );
                callsensorintent.setClassName(context,"com.example.test.sg.SensorUdp");
                context.startActivity(callsensorintent); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:05:43.307

ICS 上的呼叫屏幕具有比以前更高的优先级，因此当它位于前台时，它将显示在其他所有内容之上。现在它甚至比通知菜单/窗帘具有更高的优先级。您可以为您的应用程序使用更高的窗口优先级，例如 `WindowManager.LayoutParams.TYPE_SYSTEM_ALERT`.

# java - EJB 中 Thread.sleep 的解决方案

> ID：10242177
> 
> 赞同：1
> 
> 时间：2012-04-20T07:41:42.950
> 
> 标签：java, jakarta-ee, jboss, ejb, ejb-3.0

我正在使用 jboss5.1、EJB3.0 和独立的 Java 应用程序作为“订阅者”

我有通过 jms 主题向订阅者发布消息的机制。当订阅者收到消息时，它需要做一些操作，直到它再次开始监听未来的消息。

问题是，如果订阅者从主题中收到消息，它将需要**足够快**地返回以侦听更多消息（否则在发布另一条消息的情况下它将错过它）

所以我的解决方案是将Thread.sleep() 在ejb 发布者中放置几秒钟。

这种方式会确保所有订阅者在发布新消息之前都回去收听。

我知道不建议在 EJB'S 中使用 Thread。

这种情况的任何解决方案？

谢谢，雷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:56:39.253

恕我直言，您根本不需要让发布者的线程处于睡眠状态。根据定义，当使用 JMS 和消息驱动 bean 时，您可以保证消息将被传递。唯一不能保证的是顺序：消息驱动 Bean 可能以不同于它们发送顺序的顺序获取消息。

此外，使用 JMS 的全部意义在于允许您异步发送消息（即使您实际上可以将队列/主题配置为同步工作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:04:28.663

好的，所以您的问题实际上是您在处理消息时停止侦听 JMS 队列，然后重新注册自己。当然，您可能会在处理前一条消息时错过消息。

我建议永远不要从 JMS 队列中注销自己，并且为了确保您一次处理一条消息，您可以使用一个线程池来推送您的处理。

例如，如果以前你有这样的事情：

```
public void onNewJMSMessage(JMSMessage message) {
    unregisterMySelf();
    processMessage(message);
    registerMySelf();
} 
```

改用这个：

像这样启动一个类成员：

```
private ExecutorsService processingPool = Executors.newSingleThreadExecutor(); 
```

和

```
public void onNewJMSMessage(final JMSMessage message) {
    processingPool.submit(new Runnable() {

         @Override
         public void run() {
              processMessage(message);
         }
    });
} 
```

这将保证一次只处理一条消息（如果封闭类是唯一的，否则您将必须设置一个单例以确保单线程池的唯一性）。

完成之后，这将主要允许您`Thread.sleep`在 EJB 中删除它，这是邪恶的，也是各种令人头疼的根源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-12T00:55:06.323

我知道这条线很旧，但我觉得有必要加两分钱。我同意Kiu上面所说的。

根据 EJB2 规范，企业 bean 不应该管理线程。我不确定最新的规范对此有什么说法，但如果这已经改变，我会感到震惊。

问题是 JMS 被设计成消息不会丢失。因此，无论如何，MDB 都会使用这些消息。此外，应该记住 MDB（与其他 EJB 一样）是容器管理的。为什么您认为只有一个 MDB 实例在使用您的消息（当然，除非您将其设计为那样，我敢肯定情况并非如此）。

# build - Hudson 停止在我的 jboss 上工作

> ID：10242180
> 
> 赞同：0
> 
> 时间：2012-04-20T07:42:05.963
> 
> 标签：build, jboss, hudson

当我将 hudson 复制到 jboss 时，我在控制台上收到以下错误

在这里我发布了 jboss 控制台的错误

这是哈德森的问题还是任何其他配置的问题

13:07:12,307 严重 [hudson.WebAppMain] 无法初始化 Hudson：java.lang.ClassCastException：org.apache.xalan.processor.TransformerFactoryImpl 无法在 javax.xml.transform.TransformerFactory 转换为 javax.xml.transform.TransformerFactory .newInstance(Unknown Source) [:1.7.0_01] at hudson.WebAppMain.contextInitialized(WebAppMain.java:225) [:] at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3369) [:6.1 .0.Final] 在 org.apache.catalina.core.StandardContext.start(StandardContext.java:3828) [:6.1.0.Final] 在 org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment .java:294) [:6.1.0.Final] 在 org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:146) [:6.1.0.Final] 在 org.jboss.web .部署者。AbstractWarDeployment.start(AbstractWarDeployment.java:476) [:6.1.0.Final] 在 org.jboss.web.deployers.WebModule.startModule(WebModule.java:118) [:6.1.0.Final] 在 org.jboss。 web.deployers.WebModule.start(WebModule.java:95) [:6.1.0.Final] 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.7.0_01] 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown来源）[：1.7.0_01] 在 sun.reflect.DelegatingMethodAccessorImpl.invoke（未知来源）[：1.7.0_01]在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [:1.7.0_01] 处调用(Unknown Source) [:1.7.0_01]在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [:1.7.0_01] 处调用(Unknown Source) [:1.7.0_01]

13:07:12,335 错误 [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/hudson]] 向 hudson.WebAppMain 类的侦听器实例发送上下文初始化事件的异常：java.lang。 ClassCastException: org.apache.xalan.processor.TransformerFactoryImpl 不能在 javax.xml.transform.TransformerFactory.newInstance(Unknown Source) [:1.7.0_01] 在 hudson.WebAppMain.contextInitialized(WebAppMain .java:225) [:] 在 org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3369) [:6.1.0.Final] 在 org.apache.catalina.core.StandardContext.start(StandardContext. java:3828) [:6.1.0.Final] 在 org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:294) [:6.1.0.Final] 在 org.jboss.web。 tomcat.service.deployers。TomcatDeployment.performDeploy(TomcatDeployment.java:146) [:6.1.0.Final] 在 org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:476) [:6.1.0.Final] 在 org.jboss。 web.deployers.WebModule.startModule(WebModule.java:118) [:6.1.0.Final] 在 org.jboss.web.deployers.WebModule.start(WebModule.java:95) [:6.1.0.Final]

13:07:12,338 错误 [org.apache.catalina.core.StandardContext] 错误 listenerStart 13:07:12,338 错误 [org.apache.catalina.core.StandardContext] 上下文 [/hudson] 由于先前的错误 13:07 启动失败:12,340 错误 [org.jboss.kernel.plugins.dependency.AbstractKernelController] 安装到开始时出错：name=jboss.web.deployment:war=/hudson state=Create mode=Manual requiredState=Installed: org.jboss.deployers.spi .DeploymentException：URL 文件：/D:/jboss-6.1.0.Final/server/default/tmp/vfs/automount4814526bb3d939e0/hudson.war-ef6a3115c21523bd/ 在 org.jboss.web.tomcat.service.deployers.TomcatDeployment 部署失败.performDeployInternal(TomcatDeployment.java:325) [:6.1.0.Final] at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:146) [:6.1.0.Final] at org .jboss.web.deployers。AbstractWarDeployment.start(AbstractWarDeployment.java:476) [:6.1.0.Final] 在 org.jboss.web.deployers.WebModule.startModule(WebModule.java:118) [:6.1.0.Final] 在 org.jboss。 web.deployers.WebModule.start(WebModule.java:95) [:6.1.0.Final]

13:07:12,348 错误 [org.jboss.kernel.plugins.dependency.AbstractKernelController] 安装到 Real 时出错：name=vfs:///D:/jboss-6.1.0.Final/server/default/deploy/hudson。 war state=PreReal mode=Manual requiredState=Real: org.jboss.deployers.spi.DeploymentException: URL file:/D:/jboss-6.1.0.Final/server/default/tmp/vfs/automount4814526bb3d939e0/hudson.war- ef6a3115c21523bd/ 部署在 org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:325) [:6.1.0.Final] 在 org.jboss.web.tomcat.service.deployers.TomcatDeployment 失败。 performDeploy(TomcatDeployment.java:146) [:6.1.0.Final] 在 org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:476) [:6.1.0.Final] 在 org.jboss.web。 deployers.WebModule.startModule(WebModule.java:118) [:6.1.0.Final] 在 org.jboss.web。deployers.WebModule.start(WebModule.java:95) [:6.1.0.Final]

部署错误：部署“vfs:///D:/jboss-6.1.0.Final/server/default/deploy/hudson.war”由于以下原因而出错：org.jboss.deployers。 spi.DeploymentException：URL 文件：/D:/jboss-6.1.0.Final/server/default/tmp/vfs/automount4814526bb3d939e0/hudson.war-ef6a3115c21523bd/ 部署失败

```
at org.jboss.deployers.plugins.deployers.DeployersImpl.checkComplete(DeployersImpl.java:1370) [:2.2.2.GA]
at org.jboss.deployers.plugins.deployers.DeployersImpl.checkComplete(DeployersImpl.java:1316) [:2.2.2.GA]
at org.jboss.deployers.plugins.main.MainDeployerImpl.checkComplete(MainDeployerImpl.java:968) [:2.2.2.GA]
at org.jboss.system.server.profileservice.deployers.MainDeployerPlugin.checkComplete(MainDeployerPlugin.java:82) [:6.1.0.Final] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:32:34.277

您很可能不小心在类路径中捆绑了 Xalan 或其他 xml jar。确保删除这些库并让 JBoss 使用标准库。尝试从 hudson.war xml-apis.jar 中删除这个 jar。

# zend-framework - Zend 查询选择

> ID：10242185
> 
> 赞同：1
> 
> 时间：2012-04-20T07:42:35.483
> 
> 标签：zend-framework, zend-db-table

嗨，我需要做一个简单的查询，但出了点问题。我有 $name 和 $surname，我需要搜索表示该名称和姓氏的（可能的多个）id，并将所有 id、名称和姓氏放在一个数组中我执行以下查询：

```
$result=$this->_db_table->select()->where('name=?',$name)
    ->where('surname=?', $surname)->query()
    ->fetchAll();

$array=$result->toArray();
return $array; 
```

如果我使用

```
$result=$this->_db_table->fetchAll();
$array=$result->toArray();
return $array 
```

它工作正常，我有一个数组，其中包含该表中数据库中的所有值。我的第一个代码有什么问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:48:20.663

这样做之后

```
$result=$this->_db_table->select()->where('name=?',$name)
    ->where('surname=?', $surname)->query()
    ->fetchAll(); 
```

$result 已经是一个数组，它不是一个对象。因此，只需使用它而不是在其上调用 toArray。

正确的代码是

```
$result=$this->_db_table->select()->where('name=?',$name)
    ->where('surname=?', $surname)->query()
    ->fetchAll();

return $result; 
```

# zend-framework - 如何使用 Zend Paginator 获取第一个和最后一个项目编号？

> ID：10242189
> 
> 赞同：0
> 
> 时间：2012-04-20T07:43:15.140
> 
> 标签：zend-framework, zend-paginator

我需要在 view.phtml 中获取第一个项目和最后一个项目编号。

问题是由于 html 的结构，我无法在分页控件中访问此属性。例如：

```
<div class="list">
.... rows ...
<div class="items"> 1 - 18 of 540</div>
</div>
<div id="pagination">
<?php echo $this->paginator; ?>
</div> 
```

无论如何可以从视图中访问这些属性吗？我只是不知道我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:51:12.253

第一项为 1，最后一项为`$paginator->getTotalItemCount();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T07:47:46.460

[Zend 文档中](http://framework.zend.com/manual/en/zend.paginator.usage.html)有示例代码，其中生成了第一页和最后一页链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:33:01.143

```
$this->paginator->first;
$this->paginator->last; 
```

# youtube-api - 如何从 Youtube api 获得喜欢视频的用户

> ID：10242197
> 
> 赞同：1
> 
> 时间：2012-04-20T07:44:01.150
> 
> 标签：youtube-api

我发现有一个用户的api：

```
To request a feed of another user's favorite videos, send a GET request to the following URL. Note that this request does not require authentication.

https://gdata.youtube.com/feeds/api/users/userId/favorites 
```

有视频的 api 吗？例如：

```
 https://gdata.youtube.com/feeds/api/vidoes/videoId/favorites 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:05:13.190

我在 Data API 参考中找不到任何内容，这表明可以阅读*谁*喜欢视频，只有*多少*人喜欢：[https](https://developers.google.com/youtube/2.0/reference) ://developers.google.com/youtube/2.0/reference和[https:// /developers.google.com/youtube/2.0/developers_guide_protocol_ratings](https://developers.google.com/youtube/2.0/developers_guide_protocol_ratings)

# jquery - removeAttr() 不删除 IE 中的“禁用”属性

> ID：10242205
> 
> 赞同：24
> 
> 时间：2012-04-20T07:44:44.067
> 
> 标签：jquery, internet-explorer

```
var disableSelection = function(){
    $("#elementId").attr("disabled","disabled");    
};

var enableSelection = function(){
    $("#elementId").removeAttr("disabled");
}; 
```

我有以下要求：

1.  禁用 SELECT 元素以限制用户选择选项
2.  已禁用的 SELECT 元素已经选择了一些 OPTION 元素
3.  在提交事件时启用禁用的 SELECT 元素以保存选定的值

添加属性“禁用”适用于 IE。然而，当我尝试使用 jQuery revomeAttr() 方法删除属性时，而不是删除属性：

1.  方法将“禁用”属性添加到先前启用的 SELECT 元素
2.  方法不会删除“禁用”属性

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-20T08:00:32.820

使用[`.prop`](http://api.jquery.com/prop/)而不是[`.attr`](http://api.jquery.com/attr/)影响元素的禁用状态：

```
var disableSelection = function(){
    $("#elementId").prop("disabled", true);    
};

var enableSelection = function(){
    $("#elementId").prop("disabled", false);
}; 
```

有关更多信息，请参阅[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-03T00:26:00.217

你可以`removeProp('disabled')`改用。它对我有用，`removeAttr('disabled')`但没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-27T20:57:07.650

Jquery Docs 说，关于 .removeProp()：

> 注意：请勿使用此方法删除本机属性，例如选中、>禁用或选中。这将完全删除该属性，并且一旦 >removed，就不能再次将其添加到元素中。使用 .prop() 将这些属性 > 设置为 false。
> 
> 补充说明：
> 
> 在 Internet Explorer 9 之前的版本中，如果不删除属性（使用 > .removeProp()) 在从文档中删除 DOM 元素之前。要在 DOM 对象上安全地设置值而不会发生内存泄漏，请使用 .data()。

# php - 如何根据 wordpress 中的自定义类别获取自定义帖子？

> ID：10242208
> 
> 赞同：2
> 
> 时间：2012-04-20T07:44:53.470
> 
> 标签：php, wordpress

我尝试使用以下代码创建自定义帖子和自定义类别

```
<?php

/*** added for browse plugin custom post - start ***/
add_action('init', 'demoplugin_register');
    function demoplugin_register() {
          $labels = array(
            'name' => _x('Demoplugin', 'post type general name'),
            'singular_name' => _x('Demoplugin Entry', 'post type singular name'),
            'add_new' => _x('Add New Demoplugin', 'demoplugin'),
            'add_new_item' => __('Add New Demoplugin Entry'),
            'edit_item' => __('Edit Demoplugin Entry'),
            'new_item' => __('New Demoplugin Entry'),
            'view_item' => __('View Demoplugin Entry'),
            'search_items' => __('Search Demoplugin Entries'),
            'not_found' =>  __('No Demoplugin Entries found'),
            'not_found_in_trash' => __('No Demoplugin Entries found in Trash'), 
            'parent_item_colon' => ''
          );

        $slugRule = get_option('category_base');
        //if($slugRule == "") $slugRule = 'category';

        global $paged;

        $args = array(
            'labels' => $labels,
            'public' => true,
            'show_ui' => true,
            '_builtin' => false,
            'rewrite' => array('slug'=>'demoplugin','with_front'=>false),
            'capability_type' => 'post',
            'hierarchical' => false,
            'show_in_nav_menus'=> false,
            'query_var' => true,
            'paged' => $paged,          
            'menu_position' => 5,
            'supports' => array('title','thumbnail','excerpt','editor','comments')
        );

        register_post_type('demoplugin' , $args);

        register_taxonomy("demoplugin_entries", 
                            array("demoplugin"), 
                            array(  "hierarchical" => true, 
                                    "label" => "Demoplugin Categories", 
                                    "singular_label" => "Demoplugin Categories", 
                                    'rewrite' => array('slug' => 'demoplugin-category'),
                                    "query_var" => true,
                                    'paged' => $paged
                                ));  
flush_rewrite_rules( false );   
    }
    function demoplugin_taxonomies() {

    register_taxonomy(
        'plugtag',
        'demoplugin',
        array(
            'hierarchical' => false,
            'label' => 'Demoplugin Tags',
            'query_var' => true,
            'rewrite' => array( 'slug' => 'plugtag' ),
        )
    );

}
add_action('init', 'demoplugin_taxonomies', 0);

    add_action('admin_init', 'add_demoplugin');
    flush_rewrite_rules(false);

    add_action('save_post', 'update_demoplugin');
    function add_demoplugin(){
        add_meta_box("demoplugin_details", "Demoplugin Options", "demoplugin_options", "demoplugin", "normal", "low");
    }
    function demoplugin_options(){
        global $post;
        $custom = get_post_custom($post->ID);
        $demoplugin_path_url = $custom["demoplugin_path_url"][0];
        $download_url = $custom["download_url"][0];
        $demoplugin_video_url = $custom["demoplugin_video_url"][0];

        //$demoplugin_excerpt = $custom["demoplugin_excerpt"][0];
        $demoplugin_radiogroup = $custom["demoplugin_radiogroup"][0];
        if ($demoplugin_radiogroup == '') $demoplugin_radiogroup = 'demoplugin_post_action';

/*** added for browse plugin custom post - stop ***/

?> 
```

以上代码取自functions.php。**我的要求是根据自定义类别列出自定义帖子。**

我尝试了很多方法来满足我的要求，但都失败了。

善意的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:51:15.930

为什么会有`paged`争论？空无一人。
`query_var => true`无效，它应该是 false 或设置为字符串，我建议你完全跳过它。
也没有`singular_label`分类法*有*一个数组`singular_name``labels`

**阅读文档并首先验证您的代码**
[http://codex.wordpress.org/Function_Reference/register_post_type](http://codex.wordpress.org/Function_Reference/register_post_type)
[http://codex.wordpress.org/Function_Reference/register_taxonomy](http://codex.wordpress.org/Function_Reference/register_taxonomy)

# java - 特定格式的时间 Android Java

> ID：10242215
> 
> 赞同：0
> 
> 时间：2012-04-20T07:45:16.727
> 
> 标签：java, android, time, format

我希望将时间表示为“Thu Jan 01 08:40:38 GMT+01:00 1754”

所以我这样做了：

```
 Date datu = new Date();
                datu.setYear(1754);
                datu.setMonth(0);
                datu.setDate(1);
                DateFormat.format("%tc", datu);

                // DATU = Thu Jan 01 08:40:38 GMT+01:00 3654
                String startTime = datu.toGMTString(); 
```

现在的问题是我在代码中将年份设置为 1754。但是当我打印出来时。有3654？

编辑： datu.setYear(1754-1900) 可以做到这一点。但就没有别的办法了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:25:21.427

请尝试这样：

```
SimpleDateFormat sdf = new SimpleDateFormat("E MMM dd hh:mm:ss 'GMT'Z yyyy");
Calendar c = Calendar.getInstance();
c.set(Calendar.YEAR,1754);
c.set(Calendar.MONTH, 0); // JAN
c.set(Calendar.DATE, 1);
System.out.println(sdf.format(new Date(c.getTimeInMillis()))); 
```

输出

```
Tue Jan 01 05:23:55 GMT+0800 1754 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:06:42.863

您使用的是什么版本的 Java API？我建议您改用 java.text.SimpleDateFormat 和 java.util.Calendar。你的代码看起来像这样：

```
Calendar cal = Calendar.getInstance();
cal.set(1754, 0, 1);
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd"); // <- customize your format
sdf.format(cal.getTime()); // <- get your string 
```

date.toGMTString() 方法也已被弃用，因此最好避免使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:59:55.577

正如你所说， date.setYear(desired year-1900) 解决了这个问题。值得注意的是，该方法已被弃用，最好使用不需要从年份中减去 1900 的 Calendar 类。下面给出了一个代码片段，它将实现您使用日历所做的事情：

```
Calendar calendar =Calendar.getInstance();
calendar.setTime(date);// note that the date object here will be datu according to 
//your code. It could be any object of the Date class
int year = calendar.get(Calendar.YEAR); 
```

希望这可以帮助。

如果它解决了您的问题，请随时标记为答案。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T07:55:22.873

似乎 date.SetYear 已被[弃用](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html)。根据文档，您应该改用 Calendar.set(Calendar.YEAR, year) 。

# c# - 套接字对象生命周期

> ID：10242217
> 
> 赞同：1
> 
> 时间：2012-04-20T07:45:26.350
> 
> 标签：c#, sockets, tcp, lifecycle

我正在使用`Socket`对象通过 tcp 向其他程序发送命令。

我想知道什么是更好的决定：

1.  在每个命令发送/接收会话上初始化`Socket`对象，然后关闭它。
2.  或者要初始化一个全局`Socket`对象，使用它来发送所有命令/接收响应并在程序关闭时关闭。

所以问题是我应该多久关闭一次“相同”操作的套接字对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:55:25.213

这取决于您的应用程序要求。例如，假设您正在编写一个 smtp 客户端，那么服务器将永远不允许您连接，这也是请求/响应类型的协议（例如，您发送请求以检查任何邮件并接收它的响应）然后您必须关闭您的套接字一旦您的请求完成。但是如果您正在编写一些类似聊天的应用程序，那么您可能不想关闭您的套接字。因为聊天应用服务器可以随时向您发送服务器收到的其他聊天消息，所以在这种情况下，服务器也会在没有您请求的情况下推送您的数据。

# ruby-on-rails - 为什么我在任何来源中都找不到 multi_json-1.3.1？

> ID：10242219
> 
> 赞同：9
> 
> 时间：2012-04-20T07:45:40.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, heroku, bundler

我有一个要部署到 Heroku 的简单 Rails 应用程序。当我运行以下命令时

```
git push heroku master 
```

显示以下错误消息。

```
 Could not find multi_json-1.3.1 in any of the sources
 !
 ! Failed to install gems via Bundler.
 !
 ! Heroku push rejected, failed to compile Ruby/rails app 
```

这是我的 Gemfile

```
 gem 'rails', '3.2.3'
 gem 'pg'
 group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'therubyracer', :platform => :ruby
  gem 'uglifier', '>= 1.0.3'
end
gem 'jquery-rails' 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-20T08:43:26.087

删除 Gemfile.lock 文件，然后运行 ​​bundle install。这对我有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T23:22:29.373

尽管我知道这些 gem 可用，但我看到了针对不同 gem 的一系列错误（例如`gem list -r <gem>`，显示了它们，包括版本；浏览 ruby​​gems.org 显示我需要的版本在那里并且没有被拉走等），我有一个源集（我什至设置了 6 个不同的源）。

原来我的问题是我`git stashed`在离开一个特性分支之前有一个最新的开发和忘记弹出存储，这是一个问题，因为我已经更改了我的`.rvmrc`并且没有提交更改（使用比我们的生产更新的 ruby做过）。

因为我`.rvmrc`为该项目指定了一个 gemset，所以隐藏它意味着我突然捆绑了一个 gemset，该 gemset 中缺少一大堆 gem，`Gemfile.lock`出于我不明白的原因，Bundler 假设 gem 是否`Gemfile.lock`已经安装并且它没有不要远程查找。

所以以防万一其他人面临这个令人难以置信的令人沮丧的角落案例，我想我会把它写在这里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T02:34:38.327

如果您使用 Capistrano 进行部署并且您神秘地收到“在任何源中都找不到 multi_json-1.7.2”，请确保您`require "bundler/capistrano"`的`config/deploy.rb`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T01:48:59.407

就我而言，我缺乏

```
source 'https://rubygems.org' 
```

在`Gemfile`. 我怀疑旧版本的捆绑器可以在没有提及源的情况下运行，但新版本不能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-12T03:20:11.580

对我来说，这是因为 Pow（本地机架服务器）没有使用正确的 RVM ruby​​ 版本/gemset。

通过添加以下内容进行修复`.powrc`：

```
# based on https://coderwall.com/p/pkj39a
if [ -f "$rvm_path/scripts/rvm" ] && [ -f ".ruby-version" ] && [ -f ".ruby-gemset" ]; then
  source "$rvm_path/scripts/rvm"
  rvm use `cat .ruby-version`@`cat .ruby-gemset`
fi 
```

来源：[https ://coderwall.com/p/pkj39a](https://coderwall.com/p/pkj39a)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-20T08:44:18.700

我已经通过以下步骤解决了它。

```
Removed Gemfile.lock
bundle install 
```

问题的原因最初是我的 Gemfile.lock 有 multi_json-1.3.1

现在它的版本为 multi_json-1.3.2

# mysql - 如何改进试图从两个表中查找不同值的 MySql 查询？

> ID：10242221
> 
> 赞同：1
> 
> 时间：2012-04-20T07:45:50.517
> 
> 标签：mysql, distinct

```
SELECT distinct  source_IP, timestamp FROM  tb1 , tb2 WHERE tb1.source_IP 
not in ( SELECT source_IP FROM tb2 WHERE tb1.source_IP = tb2.source_IP) 
AND tb1.timestamp not in 
( SELECT timestamp FROM tb2 WHERE tb1.timestamp = tb2.timestamp ) 
```

上面的查询是为了比较 tb1 的属性（source_IP 和时间戳）与 tb2 中的相同属性，并且只选择属于 tb1 的不同属性。但是，这个查询运行良好，但我正在寻找更好的方法来提高它的效率，因为语句中有三个查询。请有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:54:18.233

您可以使用`not exists`. 像这样：

```
SELECT DISTINCT 
   tb1.source_IP, 
   tb1.timestamp 
FROM 
   tb1 
WHERE NOT EXISTS
   (SELECT NULL FROM tb2 
    WHERE tb1.source_IP=tb2.source_IP AND tb1.timestamp=tb2.timestamp) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:49:16.790

感谢上帝，这个查询工作正常：

```
SELECT source_IP, timestamp FROM tb1 WHERE  source_IP NOT IN (SELECT source_IP FROM tb2) 
AND timestamp NOT IN (SELECT timestamp FROM tb2) 
```

感谢 Roee Adler [比较 mysql 中两个表之间的差异](https://stackoverflow.com/questions/950414/compare-differences-between-two-tables-in-mysql)

# database - 在 VMWare 上使用 SQJDBC4 驱动程序时数据库连接速度变慢

> ID：10242224
> 
> 赞同：0
> 
> 时间：2012-04-20T07:46:13.037
> 
> 标签：database, performance, connection, vmware

我面临一个特殊的问题。

**应用程序详细信息** Java：Jre 1.6 Db：MS SQL 2008 R2（在 Vmware 上） 操作系统：Windows 2008 R2（在 Vmware 上）

**问题：** 每当我尝试使用 sqljdbc4.jar 连接到数据库时，建立连接几乎需要 5 秒。但如果我使用 jtds 驱动程序，它会立即连接。

现在，如果我尝试连接到托管在单个物理服务器上的类似数据库，它会立即使用两个驱动程序连接。

如果任何机构遇到此问题，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:11:19.503

抱歉.. 得到了有关正在使用的连接驱动程序的错误信息。使用 sqljdbc4.jar 配置应用程序，问题得到解决。

# jquery - 复选框 - 选中将更改文本框值

> ID：10242225
> 
> 赞同：0
> 
> 时间：2012-04-20T07:46:13.263
> 
> 标签：jquery

我想要的是用复选框改变文本框的值。选中复选框时，文本框必须为“2020-01-01”

我做了这个

```
$('#checkPub').click(function() {
   $("#demo1").val('2020-01-01');
}); 
```

它只给了我复选框作为输出，为什么？它不会更改文本框的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:48:46.780

```
$('#checkPub').click(function() {
  if($(this).is(':checked')) 
  $("#demo1").val('2020-01-01');
  else
  $("#demo1").val('');
}); 
```

# sql - 将数据从另一个表插入到一个表中，同时根据字段排序

> ID：10242226
> 
> 赞同：0
> 
> 时间：2012-04-20T07:46:21.210
> 
> 标签：sql, sql-server-2005

我正在使用 RFID 技术在 VS2010 中制作考勤管理系统，在 SQL Server 2005 中进行所有后端数据操作，我知道基本的 SQL，但我需要一些帮助来解决这个问题。

我有以下表格：

教师主数据

```
fname
fid
dept
title
phone
dob 
```

计时

```
fname
fid
intime_a
outtime_d
lunchout_b
lunchin_c 
```

原始转储

```
fid
timecode
currtime 
```

这里的数据是从我在 vb.net 中编写的串行端口数据记录器程序中保存的，fid 是 RFID 标签 ID，时间码是 A、B、C 或 D（用于识别时间为 intime-A、lunchout-B、lunchin-C , outtime-D) 和 currtime 是当前系统时间。我通过一个微控制器获取 RFID 标签 ID，该微控制器根据物理按钮按下添加时间码。

我需要做的是根据时间码对所有数据进行排序`rawdumps`并复制到其中。`timings`时间码为“A”的字段被保存到时间字段`fid`中。以及对应的from 。`currtime``rawdumps``intime_a``fname``facultymasterdata``fid`

任何信息帮助将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T05:58:08.110

I got the solution, someone helped me out, what I needed to do was convert a column into rows while sorting it. I needed to use cross tabs.

This is what I needed to do:

```
SELECT F.fName, F.fID, 
MIN(CASE WHEN R.TimeCode = 'A' THEN CurrTime END) AS Intime_a,
MAX(CASE WHEN R.TimeCode = 'D' THEN CurrTime END) AS outtime_d,
MIN(CASE WHEN R.TimeCode = 'B' THEN CurrTime END) AS LunchOut_b,
MAX(CASE WHEN R.TimeCode = 'C' THEN CurrTime END) AS LunchIn_c
FROM dbo.facultymasterdata F LEFT JOIN dbo.rawdumps R ON F.fid = R.fid 
GROUP BY F.fid, F.fname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:03:15.097

我不确定您对 [fid] 和 [curtime] 字段的含义有代码“A”并保存在 [intime_a] 中。这是一笔钱吗？

这应该让你走上正确的轨道。

```
INSERT INTO timings(fname,fid,intime_a)
    SELECT a.fname, b.fid, b.curtime
    FROM facultymasterdata a, rawdumps b 
    WHERE a.fid = b.fid
    ORDER BY b.timecode; 
```

编辑：在阅读您对问题的编辑和评论回复后，我会编写一个触发器来处理此插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:14:00.617

我可能会使用联合选择，导致像这样的大讨厌插入

```
insert into timings
(fname,fid,intime_a,lunchout_b,lunchin_c, outtime_d)
select
    f.fname,
    f.fid,
    r.intime_a,
    r.lunchout_b,
    r.lunchin_c,
    r.outtime_d,
from
    facultymasterdata as f
inner join (
    select
        fid as fid,
        currtime as currtime,
        currtime as intime_a,
        null as lunchout_b,
        null as lunchin_c,
        null as outtime_d,
    from
        rawdumps
    where timecode = 'A'
    union select
        fid as fid,
        currtime as currtime,
        null as intime_a,
        currtime as lunchout_b,
        null as lunchin_c,
        null as outtime_d,
    from
        rawdumps
    where timecode = 'B'
    union select
        fid as fid,
        currtime as currtime,
        null as intime_a,
        null as lunchout_b,
        currtime as lunchin_c,
        null as outtime_d,
    from
        rawdumps
    where timecode = 'C'
    union select
        fid as fid,
        currtime as currtime,
        null as intime_a,
        null as lunchout_b,
        null as lunchin_c,
        currtime as outtime_d,
    from
        rawdumps
    where timecode = 'D'
    ) r on r.fid = f.fid
order by r.currtime 
```

# git - 如何检索在 commit-msg 钩子中生成的 git commit 的 sha？

> ID：10242231
> 
> 赞同：3
> 
> 时间：2012-04-20T07:47:09.190
> 
> 标签：git, githooks, sha

希望有一种方法可以发现正在生成的提交的 sha。我在一个 commit-msg 钩子里。我想将 sha 附加到提交消息的末尾，以便我的 git gui 可以为我建立到 GitHub 的链接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T08:02:31.623

SHA1 哈希生成取决于提交消息，因此将哈希附加到提交消息会导致哈希不同。你有鸡或蛋的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T08:05:09.757

SHA1 尚未生成（提交尚未发生，因为钩子可以阻止它）并且取决于消息的内容。因此，如果您的钩子要计算“它将是什么”然后修改消息，则结果将与计算的 SHA1 不同。

因此，虽然可以计算“SHA1 将是什么”，但您不能将其转储到提交消息中。

下面是计算实际提交的 SHA1 的方法，但是，给定提交的 SHA1 :-) 或引用它的名称：

```
$ git cat-file -p HEAD > /tmp/t
$ git hash-object -t commit /tmp/t
ea5670c9d18fb1482ea2f3022c96e287afb3e906
$ git rev-parse HEAD
ea5670c9d18fb1482ea2f3022c96e287afb3e906 
```

因此，如果您知道`tree`、所有的`parent`s、the`author`和`committer`字符串并拥有消息文本，您就可以计算出 SHA1 将是什么。

# asp.net - 如果我已经有很多 try-catch 块，VB 如何一般地实现异常日志记录

> ID：10242235
> 
> 赞同：0
> 
> 时间：2012-04-20T07:47:52.187
> 
> 标签：asp.net, vb.net, logging

我正在用 VB 编写 ASP.Net Web 表单。

我有一个系统已经通过 try-catch 块处理异常。如何快速通用地实现异常日志记录，例如覆盖某些内容，而不是在每个 catch 块中插入日志记录函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:13:05.090

使用像[Postsharp](http://www.sharpcrafters.com/)这样的 AOP 框架，您可以挂钩抛出的异常并记录消息，但这只有在您尚未在代码中处理它们时才有效。

您最好的选择是重构您的异常处理代码。除了全局捕获所有异常处理之外，您应该只在可以实际处理异常的地方使用 try-catch 块。在这些情况下，您可能希望在日志中添加一条特定消息，说明处理此异常的*原因*和方式。

# python - lxml etree.iterparse 错误“TypeError：读取文件对象必须返回纯字符串”

> ID：10242237
> 
> 赞同：14
> 
> 时间：2012-04-20T07:48:01.413
> 
> 标签：python, lxml, elementtree, iterparse

我想使用 lxml 解析 HTML 文档。我正在使用 python 3.2.3 和 lxml 2.3.4 ( [http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml](http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml) )

我正在使用`etree.iterparse`解析文档，但它返回以下运行时错误：

```
Traceback (most recent call last):
  File "D:\Eclipse Projects\Python workspace\Crawler\crawler.py", line 12, in <module>
    for event, elements in etree.iterparse(some_file_like):
  File "iterparse.pxi", line 491, in lxml.etree.iterparse.__next__ (src/lxml\lxml.etree.c:98565)
  File "iterparse.pxi", line 512, in lxml.etree.iterparse._read_more_events (src/lxml\lxml.etree.c:98768)
TypeError: reading file objects must return plain strings 
```

问题是：如何解决这个运行时错误？

非常感谢。

这是代码：

```
from io import StringIO
from lxml import etree

some_file_like = StringIO("<root><a>data</a></root>")

for event, elements in etree.iterparse(some_file_like): #<-- Run-time error happens here
    print("%s, %4s, %s" % (event, elements.tag, elements.text)) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-20T08:03:01.010

您的 StringIO 缓冲区具有 unicode 字符串。`iterparse`适用于返回字节的文件之类的对象。以下缓冲区应与 iterparse 一起使用：

```
from io import BytesIO
some_file_like = BytesIO("<root><a>data</a></root>".encode('utf-8')) 
```

# asp.net - ASP.NET VB 将超链接添加到 GridView

> ID：10242238
> 
> 赞同：0
> 
> 时间：2012-04-20T07:48:04.313
> 
> 标签：asp.net, vb.net

这里对你来说有点复杂。我有一些代码列出了 GridView 中的文件及其大小、创建日期和修改日期等。我想在“文件名”列中添加一个超链接，但我一直无法找到执行此操作的方法。

我在后面的代码中构建了整个 GridView。

```
 Sub BindGrid(path)
    'Create GridView headings and add titles' 
    Dim dt As New DataTable
    Dim Name As New HyperLinkField

    dt.Columns.Add("FileName")
    dt.Columns.Add("Size")
    dt.Columns.Add("Last Accessed")
    dt.Columns.Add("Created Date")

    Dim Username = User.Identity.Name.ToString
    Dim TrimUsername = Username.Replace("ASHDOWN\", "")
    'Dim Path As String = "~\\Users\\" & TrimUsername''
    LoginNameDisplay.Text = TrimUsername

    Dim di As New IO.DirectoryInfo(Server.MapPath(Path))
    Try
        Dim diar1 As IO.FileInfo() = di.GetFiles()
        Dim dra As IO.FileInfo

        'list the names of all files in the specified directory' 
        For Each dra In diar1

            dt.Rows.Add(New Object() {dra.Name, dra.Length & " KB", dra.LastAccessTime, dra.CreationTime})
        Next
        GridView1.DataSource = dt
        GridView1.DataBind()
    Catch ex As Exception

    End Try

End Sub 
```

这是我的 ASPX 页面代码

```
 <asp:GridView ID="GridView1" Width="100%" runat="server" CellPadding="4" 
        EnableModelValidation="True" ForeColor="#333333" GridLines="None">
        <AlternatingRowStyle BackColor="White" />
                <Columns>
                    <asp:HyperLinkField AccessibleHeaderText="Hyperlink" />
                </Columns>
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
    </asp:GridView> 
```

对此的任何帮助都会非常好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:02:17.073

使用 a`TemplateField`代替：

```
<asp:TemplateField>
<ItemTemplate>
    <asp:HyperLink ID="HlFile" runat="server"
        Text='<%# Eval("FileName") %>'>
    </asp:HyperLink>
</ItemTemplate>
</asp:TemplateField> 
```

如果在 aspx 上太复杂，您可以设置`NavigateUrl`in ：[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

```
protected void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
         DataRow row = ((DataRowView)e.Row.DataItem).Row;
         HyperLink hlFile = (HyperLink)e.Row.FindControl("HlFile");
         // set the hyperlink url just as you please
         hlFile.NavigateUrl = row.Field<String>("URL");
    }
} 
```

**编辑**：这是VB版本：

```
Protected Sub GridView1_RowDataBound(sender As [Object], e As GridViewRowEventArgs)
    If e.Row.RowType = DataControlRowType.DataRow Then
        Dim row As DataRow = DirectCast(e.Row.DataItem, DataRowView).Row
        Dim hlFile = DirectCast(e.Row.FindControl("HlFile"), HyperLink)
        ' set the hyperlink url just as you please
        hlFile.NavigateUrl = row.Field(Of String)("URL")
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:07:10.617

将 HyperLinkField 的 NavigateUrl 属性设置为您的目标 URL。

请参阅：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.navigateurl.aspx#Y228](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.navigateurl.aspx#Y228)

您可以使用 设置属性`DataNavigateUrlFormatString`，类似于以下内容：

```
HyperLinkField hlf = YourGridView.Columns["hyperlinkColumnName"] as HyperLinkField;
hlf.DataNavigateUrlFormatString = "~\details.aspx?ProductID={0}"; 
```

# iphone - iPhone中从一个类到另一个类的NSMutable数组

> ID：10242241
> 
> 赞同：0
> 
> 时间：2012-04-20T07:48:23.177
> 
> 标签：iphone, objective-c, ios5, nsmutablearray, xcode4.2

我在 FirstViewController 类中有一个 NSMutable 数组，我想将该数组传递给 SecondViewController 类。我想在 SecondViewController 类中使用它。我在 Xcode 4.2.1 中使用 ARC 执行此操作...我怎么能...？以及在设置属性时我想使用哪些属性...（或）解释我也使用 Appdelegate 文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:52:39.007

**在当前班级**

```
#import "SecondViewController" 
```

* * *

```
 SecondViewController *NextViewController = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];

        NextViewController.nextClasssArray = thisClassarray; 
```

**在二等舱.h**

```
@property(nonatomic,retain) NSMutableArray *nextClasssArray; 
```

**在二等.m**

```
@synthesize nextClasssArray; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:52:46.253

有两种方法可以做到这一点。

1：在appdelegate中为NSMutableArray创建一个属性，在FirstViewController中设置数组的值，在SecondViewController中检索值。

2：在SecondViewController中为NSMutableArray创建一个属性，并为FirstViewController调用该属性但创建SecondViewController的对象，并通过FirstViewController中secondViewController的对象引用调用该属性。

# javascript - HTML - 在本地存储复选框值并检索

> ID：10242249
> 
> 赞同：2
> 
> 时间：2012-04-20T07:48:59.423
> 
> 标签：javascript, database, html, checkbox

我正在开发一个 HTML Web 应用程序。我有五个复选框，当我单击 SAVE sutton 时，我必须在本地存储选中的值。我必须从本地存储中检索检查的数据并在单击 SHOW 按钮时显示它。我不知道该怎么做。帮我完成这个。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T09:02:34.870

试试这个：http: [//jsfiddle.net/sQuEy/4/](http://jsfiddle.net/sQuEy/4/)

请记住，要在 javascript 中设置复选框值，您需要使用布尔值，但网络存储将所有值保存为字符串。所以：

```
checkboxes[i].checked = localStorage.getItem(checkboxes[i].value) === 'true' ? true:false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:54:55.590

试试这个代码

结合[quirksmode](http://www.quirksmode.org/js/cookies.html)中的三个简单函数，您可以这样做：

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
}

createCookie("checkboxes", $("input:checkbox").serialize(), 30);
alert(readCookie("checkboxes")); 
```

# javascript - setTimeout() - 在 for 循环中随机延迟

> ID：10242254
> 
> 赞同：15
> 
> 时间：2012-04-20T07:49:05.700
> 
> 标签：javascript, closures, settimeout

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

看到很多帖子谈论`setTimeout`和关闭，但我仍然无法传递一个简单的 for 循环计数器。

```
for (i = 0; i < 5; i++) {
  setTimeout(function () {
    console.log(i);
  }, Math.floor(Math.random() * 1000));
} 
```

给

> 5
> 5
> 5
> 5
> 5

想拥有

> 0
> 1
> 2
> 3
> 4

怎么了 ？
请不要发火，我以为我已经理解了这个`setTimeout()`故事，但显然没有。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-20T07:52:39.257

您可以使用闭包来保持`i`对循环内当前值的引用：

```
for (i = 0; i < 5; i++) {
    (function(i) {
        setTimeout(function () {
            console.log(i);
        }, Math.floor(Math.random() * 1000));
    })(i); //Pass current value into self-executing anonymous function
}​ 
```

但是，这不太可能按顺序打印数字，因为您使用了随机超时（您可以`i * 1000`改为使用以升序打印数字，相隔一秒）。

这是一个[工作示例](http://jsfiddle.net/uMmnV/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T07:52:04.407

您需要传递`i`给`setTimeout`. 当你的第一个方法被执行时，`i`已经设置为 5。

由于您的超时因调用而可变`Math.Random()`，因此超时将有所不同，并且您不会按照您期望的顺序获得它们。

[这是一个工作示例](http://jsfiddle.net/Ps3NL/)

```
for (i = 0; i < 5; i++) {
    (function(i) {
        setTimeout(function () {
            console.log(i);
        }, 1000);
    })(i);
} 
```

更改`Math.floor(Math.random() * 1000)`为简单地`1000`确保函数按照您期望的顺序执行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T07:52:37.690

您需要将“有趣”的代码包装在一个函数中，该函数关闭`i`并将其复制到局部变量中：

```
for (i = 0; i < 5; i++) {
  (function() {
    var j = i;
    setTimeout(function () {
      console.log(j);
    }, Math.floor(Math.random() * 1000));
  })();
} 
```

“中间”函数调用强制将值`j`固定在调用函数的点，因此在每个`setTimeout`回调中，值`j`是不同的。

# c# - .net 静态对象生命周期

> ID：10242256
> 
> 赞同：0
> 
> 时间：2012-04-20T07:49:12.923
> 
> 标签：c#, static, singleton, clr, lifecycle

我有一个带有存储库静态类的 DAL 库；它是通过单例模式（静态构造函数）初始化的。有使用这个 DAL 库的网站，以及同一解决方案中的 Windows 服务项目。

据了解，单例对象有两个实例，站点和 WINservice 的每个域中都有一个。那正确吗？

对于网站应用程序，经过一段时间的空闲时间，域会被卸载，因此 repo 类也会被卸载，对吧？

最后一个关于 winservice 的问题：据了解，当服务运行时，这个域永远不会被卸载，所以 repo 对象将保留在内存中？

PS：如果我创建一个子类对象会发生什么，例如 winservice 的 worker，它将使用其中的 repo 类。

```
using (var worker = new worker())
{
    //some DAL manipulations
} 
```

一旦我离开工作人员上下文，回购对象会被销毁吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:54:43.643

> 据了解，单例对象有两个实例，站点和 WINservice 的每个域中都有一个。那正确吗？

是的

> 对于网站应用程序，经过一段时间的空闲时间，域会被卸载，因此 repo 类也会被卸载，对吧？

是（可以在IIS中设置应用程序池的回收规则）

> 最后一个关于 winservice 的问题：据了解，当服务运行时，这个域永远不会被卸载，所以 repo 对象将保留在内存中？

是的

> 一旦我离开工作人员上下文，回购对象会被销毁吗？

不（当然，除非你把它扔掉）

# android - 如何让我的设备振动？

> ID：10242260
> 
> 赞同：9
> 
> 时间：2012-04-20T07:50:28.493
> 
> 标签：android, actionscript-3, flash, device, vibration

我正在使用 AS3 为 Android 制作 Flash 游戏。我希望用户通过让设备振动片刻来知道他按下了一个按钮。有人可以向我解释我怎样才能做到这一点吗？我需要导入特定的类吗？代码应该是什么样的？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T07:54:18.193

要使用振动扩展，AIR 应用程序会执行以下操作：

通过调用 isSupported 检查扩展是否支持。通过调用 vibrate() 使设备振动，指定振动的持续时间（以毫秒为单位）作为参数。

```
var vibe:Vibration;
if (Vibration.isSupported)
{
    vibe = new Vibration();
    vibe.vibrate(2000);
} 
```

Android 应用程序 对于 Android 应用程序，在您的应用程序描述符文件中包含 Vibration 权限：

安卓权限：`<uses-permission android:name="android.permission.VIBRATE"/>`

参考： http: [//www.adobe.com/devnet/air/native-extensions-for-air/extensions/vibration.html](http://www.adobe.com/devnet/air/native-extensions-for-air/extensions/vibration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:31:43.127

感谢您的回答。他们让我对这个主题进行了更深入的研究。我发现的是这样的：

在您可以使用之前：

```
var vibe:Vibration;
if(Vibration.isSupported){
     vibe = new Vibration();
     vibe.vibrate(500);
} 
```

您必须转到“编辑 ActionScript 设置”>“库路径”>“浏览到 SWC 文件”

在那里你必须把这两个文件放在：

VibrationActionScriptLibary.swc - 你可以使用[这个](http://www.adobe.com/devnet/air/native-extensions-for-air/extensions/vibration.html) zip 文件

com.adobe.extensions.Vibration.swc - 在同一个 zip 文件和目录中。您必须将 .ane 更改为 .swc

接下来，您必须`import com.adobe.nativeExtensions.Vibration;`将该行与其他导入。

这就是您在 Flash 中所要做的一切。（除了编码实际的游戏......）

接下来，打开 myApp-app.xml。在 xml 中，向上滚动并检查指向 ns.adobe.com 的链接是否以 3.0（或更高版本）结尾。如果没有，请将其更改为 3.0。本机扩展需要 Adob​​e AIR 3.0 或更高版本。

进一步向下滚动到您看到的部分`<initialWindow>`。在结束标记之后添加：

```
<extensions>
    <extensionID>com.adobe.Vibration</extensionID>
</extensions> 
```

如果您进一步向下滚动，您应该会看到类似`<android>`. 在 manifestAdditions 中，您必须为设备添加一个权限，以使其真正允许它可以使用振动功能。

如果那里还没有`<![CDATA[manifest>`一行，则必须添加它。如果您添加了它/或者它已经存在，您必须添加权限。这是完成`android:name="android.permission.VIBRATE"`的最后你想确保它看起来像这样：

```
<![CDATA[<manifest>
    <uses-permission android:name="android.permission.VIBRATE"/>
</manifest>]]> 
```

在此之后，您可以保存并关闭 xml 文件。

完成所有这些后，您的 .fla 可能无法在 Flash 中发布，因为 Flash 不支持我们刚刚调整的内容。但是，我们仍然可以使用 CMD（适用于 Windows）发布 .fla。遗憾的是，这也是我对 Mac 用户的支持结束的地方。在 cmd 中，您浏览到您的项目文件夹。我的项目文件夹在我的桌面上，所以我输入了 `cd desktop`, `cd games`, `cd tilt android game`. 在我浏览到我的文件夹后，我输入了这个命令行......

```
AdobeAIRSDK\bin\adt -package -target apk -storetyp pkcs12 -keystore YOUR_LICENCE.p12 myApp.apk myapp-app.xml myapp.swf -extdir extensionDir 
```

确保您的项目文件夹中有 Adob​​eAIRSDK 文件夹。如果上述所有内容（使用 cmd）有点模糊，请转到[此处](http://www.youtube.com/watch?v=Axg6E001a7I&feature=BFa&list=UUAkGwLiEYrTGCGLVS4_wVdg)观看他的视频和他关于如何使用操作系统的命令行编译 ANE 应用程序的视频。（这就是我最初所做的。）

如果您的应用程序有图标，请确保它们位于项目文件夹中名为“icons”的文件夹中。如果您的图标位于此类文件夹中，只需将文件夹名称粘贴到命令行末尾即可。

该应用程序应在您的项目文件夹中发布。

如果您对此有任何疑问，请确保观看我链接的视频。

# django - CSRF 保护的真正用途是什么？

> ID：10242263
> 
> 赞同：14
> 
> 时间：2012-04-20T07:51:01.390
> 
> 标签：django, security, csrf, django-csrf

我很久以前就听说过*CSRF ，我听到的最多的是：*

> 防止 CSRF 攻击很重要，这样某人就不会**自动提交您的表单**（使用机器人或其他东西）

嗯，这不是 100% 正确的，是吗？

我已经做了大约 3 年的网络抓取，发出请求、解析`csrftokenmiddleware`字段并将其与其他字段一起发布非常简单。

那么，它的真正用途是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-20T11:15:17.523

想象一个电子银行 Web 应用程序，`banking.example.com`使用以下表单提交交易：

```
<form action="/transaction" method="post">
    <input type="text" name="beneficiary"/>
    <input type="text" name="amount"/>
    <input type="submit" value="Pay"/>
</form> 
```

攻击者现在可以使用以下内容设置网站`hacker.net`：

```
<form action="https://banking.example.com/transaction" method="post" style="visibility:hidden">
    <input type="text" name="beneficiary" value="John Doe, Account No. 34-236326-1"/>
    <input type="text" name="amount" value="1000000"/>
    <input type="submit" value="Pay"/>
</form>
<script>
    document.forms[0].submit();
</script> 
```

然后攻击者会诱骗受害者访问`hacker.net`，这将导致受害者的浏览器向电子银行应用程序发送 POST 请求，从而向黑客进行大笔交易。这是因为受害者的浏览器很乐意将会话 cookie 连同伪造的 POST 请求一起发送到电子银行应用程序。如果表单受到 CSRF 令牌的保护，那么攻击者就无法使受害者的浏览器发送有效的 POST 请求，因此攻击是不可能的。

这种类型的攻击称为跨站点请求伪造 (CSRF) 攻击。

顺便说一句，CSRF 攻击也是人们建议在登录电子银行或其他关键 Web 应用程序时永远不要访问其他网站的原因。

CSRF 令牌不保护由常规授权用户作为他们自己自动提交的 Web 表单。为了避免这种情况，您可以使用[CAPTCHA](http://de.wikipedia.org/wiki/CAPTCHA)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-20T07:58:28.983

是的，您可以抓取表单并获取 CSRF 预防令牌。但是你*不能*在不抓取网站的情况下提交表单，并且你*不能*从其他人那里获得令牌然后提交表单——它链接到一个会话。这就是 CSRF 保护*真正*防止的，有人欺骗用户提交表单。

* * *

对 CSRF 的更一般描述，最初是为了响应[Django 的评论框架和 CSRF 而](https://stackoverflow.com/questions/9987678/djangos-comments-framework-and-csrf)发布的：

> CSRF 是一种攻击，其中未经许可访问资源的人欺骗有权访问资源的人。
> 
> 因此，例如，CSRF 保护可以防止有人欺骗用户发布带有垃圾邮件或恶意软件链接的评论。或者，他们诱骗用户提出的请求可能格式不正确，导致您的网络服务器崩溃，或者包含旨在通过验证过程并导致数据库损坏或以其他方式损害您的网站的代码。
> 
> 因此，如果没有 CSRF 保护，理论上有人可以欺骗登录用户提交他们实际上没有写的评论。
> 
> 使用 CSRF 保护，Django 将检测到它不是通过您网站上的实际表单提交的真实数据，并将拒绝它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T08:00:30.703

这是对不同类型场景的保护。有时，攻击者能够将 javascript、iframe 或 img src-s 注入您的页面，任何登录用户都可以访问的地方。当用户访问该页面时（假设一个带有评论的页面，并且一个评论请求攻击者发布的链接），该请求是由登录用户的浏览器连同他的 cookie 一起发出的。CSRF 基本上保护了这种触发提交（简单的客户端提交）。当然，任何攻击者都可以请求页面，将其解析为令牌并使用令牌创建请求，但不能在登录用户之外执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-12T19:46:59.927

你将无法

> 要发出请求，请解析 csrftokenmiddleware 字段并将其与其他字段一起发布。

[因为如果您的服务器配置正确](https://stackoverflow.com/questions/10636611/how-does-access-control-allow-origin-header-work)，不同域上的 JS 将无法从您的域中获取和使用数据来构造请求 。

阅读有关[CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS)的信息。

# c - 了解 scanf 在此代码中所做的事情

> ID：10242271
> 
> 赞同：2
> 
> 时间：2012-04-20T07:51:27.007
> 
> 标签：c, scanf

请帮助我理解下面的代码。该函数`get_digit`通过地址接受一个字符参数。我无法在 `scanf("%1[0123456789]", ch)`这里得到什么。

如果我在终端上给出 1234，那么它只需要第一个数字。同样是如果我给 2345 它需要 2。我从来没有遇到过这种用法`scanf`。请帮助我了解此功能。

```
int get_digit ( char *ch )
{
    int rc;

    printf ( "Enter a single digit: " );
    fflush ( stdout );

    if ( rc = scanf ( "%1[0123456789]", ch ) == 1 ) {
        jsw_flush();
    }
    return rc;
}

void jsw_flush ( void )
{
    int ch;
    do
        ch = getchar();
    while ( ch != '\n' && ch != EOF );
    clearerr ( stdin );
}

void fill_table ( char table[] )
{
    char ch;
    while ( get_digit ( &ch ) ) {
        unsigned i =  ch - '0';
        if ( table[i] != 0 ) {
            printf ( "That index has been filled\n" );
        }
        else {
            table[i] = ch;
        }
    }
}

void show_table ( const char table[], size_t size )
{
    size_t i;
    for ( i = 0; i < size; i++ ) {
        printf ( "%c\n", table[i] != 0 ? table[i] : '~' );
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T07:53:29.500

`scanf ( "%1[0123456789]", ch )`扫描 1 个字符 ( `%1`)，这是一个十进制数字 ( `[0123456789]`) int 指向的字符`ch`。

紧随其后的数字`%`是字段宽度，即要扫描的字符数（最大）。方括号内的字符是`scanf`可以接受的字符。当遇到未列出的字符时，扫描结束。

扫描两位数的一个非常简单的例子：

```
#include <stdlib.h>
#include <stdio.h>

int main(void) {
    char chs[2] = {0};   // space for two digits, zero-initialized
    unsigned u = 0, i;
    if (scanf("%2[0123456789]",&chs[0]) == 1) {
        // parse the number
        for(i = 0; i < 2 && chs[i]; ++i) {
            u = 10*u + chs[i] - '0';
        }
        printf("Got %u\n",u);
    } else {
        puts("Scan failed.");
    }
    return EXIT_SUCCESS;
} 
```

当然，我们可以让字符数组比我们预期的数字长一个，而不是自己解析（*零初始化！*，`scanf`不添加具有该格式的 0 终止符）并将解析留给`strtoul(chs,NULL,10)`.

# android - 为 EditText 中的文本分配文本颜色

> ID：10242274
> 
> 赞同：22
> 
> 时间：2012-04-20T07:52:03.033
> 
> 标签：android, android-widget

如何通过扩展为 EditText 中的文本分配不同的颜色？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-20T07:59:13.217

`android:textColor`您可以通过添加如下更改文本颜色：

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textColor="#f00" /> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-20T08:09:11.293

使用跨度：

```
TextView textView = (TextView)findViewById(R.id.mytextview01);
Spannable WordtoSpan = new SpannableString("partial colored text");        
WordtoSpan.setSpan(new ForegroundColorSpan(Color.BLUE), 2, 4, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
textView.setText(WordtoSpan); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-05T10:44:04.007

我知道这是一个非常古老的问题，但由于这是我在搜索时遇到的第一个问题，我想添加一个答案，以便未来的读者得到它们。

除了 textColor 之外，我们还可以在 styles.xml 文件中创建我们自己的自定义样式，并将其应用于我们的 EditText。

在styles.xml中添加这个，

```
<style name="MyEditTextstyle">
    <item name="android:textColor">@color/dark_blue</item>
    <item name="android:background">@drawable/my_custom_edittext_bg</item>
    <item name="android:layout_marginTop">5dp</item>
    <item name="android:layout_marginBottom">5dp</item>
    //many more per requirement
</style> 
```

然后只需将此样式应用于 EditText，

```
<EditText
    style="@style/MyEditTextstyle" //here
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:hint="Item Name"
    android:padding="10dp" >
    <requestFocus />
</EditText> 
```

很简单，对。:) 重要的是，如果需要，我们可以将相同的东西应用到任何更多的 EditText 上。:)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-05-26T09:45:07.077

我在 style.xml 文件中使用 textColor 属性时遇到问题：

```
 <item name="android:textColor">@color/white</item> 
```

对我来说，editTextColor 有效：

```
 <item name="android:editTextColor">@color/white</item> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-18T02:43:28.703

要以编程方式更改它，请在您的 colors.xml 文件中添加颜色

颜色.xml：

```
<resources>
    <color name="colorText">#424242</color> 
```

并像这样引用它：

```
myEditText.setTextColor(ContextCompat.getColor(this, R.color.colorText)); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-03T12:23:38.670

**从 XML 布局：**

我们可以通过添加以下内容来更改`EditText`文本颜色：`android:textColor`

```
<EditText
    android:id="@+id/myEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="Your Name"
    android:textColor="#FF0000"
</EditText> 
```

* * *

**从 Java 类：**

我们可以`EditText`通过添加以下方法来实用地更改文本颜色`EditText.setTextColor()`：

```
EditText myEditText = (EditText)findViewById(R.id.myEditText);
myEditText.setTextColor(Color.RED); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-20T07:54:57.873

android:textColor，在 EditText xml 中设置这个属性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-05T09:42:56.537

```
<EditText
  android:layout_width="what_ever_size"
  android:layout_height="what_ever_size"
  android:textColor="@color/your_choice_of_color" /> 
```

# java - Spring testing：创建和维护测试数据的常用方法是什么？

> ID：10242277
> 
> 赞同：1
> 
> 时间：2012-04-20T07:52:08.533
> 
> 标签：java, spring, testing, data-generation

我正在为我的应用程序的集成测试创建数据，其中包含从 Web 服务层到持久性的数据。我有两个主要的选择来实现这一点，但我担心为测试生成的数据的维护。我的意思是，如果我以编程方式生成数据，我认为将此代码更新到最新版本将比更新生成数据的脚本更容易。

生成测试数据的最常用方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:28:07.897

如果您只是进行单元测试，最好模拟数据库连接和数据。

如果您正在进行端到端测试，您需要以这样一种方式设计您的测试：它会创建数据、执行测试并最终删除数据。

大多数时候你有 CURD 操作的服务。您需要智能地使用现有服务。以下方法对我有用。- 检查数据是否存在。（使用 id 储备进行测试）。如果数据已经存在，请删除数据。- 使用服务创建数据。（例如，有一些唯一的 id）。- 执行更新和获取操作。- 最后删除测试数据。

这将是一种干净的方法，您可能希望为此使用您的 DEV 数据库。

可能有比这更好的方法，但上面对我有用。

# javascript - Firefox- 扩展 - 如何制作侧边栏

> ID：10242279
> 
> 赞同：0
> 
> 时间：2012-04-20T07:52:23.587
> 
> 标签：javascript, firefox, firefox-addon, xul

谁能告诉我如何制作侧边栏。XUL 参考资料中没有关于侧边栏的内容。我参考了一些旧代码。但是，我找不到在哪里编辑。在这些代码中，我必须经常创建 jar 文件，这很烦人。谁能给我一个指导，只是一个在侧边栏中添加列表框的简单代码？

**编辑：** [此](https://developer.mozilla.org/en/Creating_a_Firefox_sidebar)代码有效。我在“emptysidebar.xul”中编辑了代码。但它没有用。

欢迎任何在侧边栏中添加元素的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:44:49.093

我什至没有想到解决方案会这么简单。这就是解决方案。

```
var sidebarWindow = document.getElementById("sidebar").contentWindow;

if(sidebarWindow)
{
    sidebarWindow.location = "chrome://custombutton/content/login.xul"; 
                                 // your xul location
}
else
{
    alert("sidebar window is not null");
} 
```

# wpf - 看似奇怪的 WPF 行为：文本框 lostfocus 事件和按钮单击事件

> ID：10242284
> 
> 赞同：0
> 
> 时间：2012-04-20T07:52:43.860
> 
> 标签：wpf, .net-4.0

使用下面进一步列出的 .net 4.0 代码会发生以下行为：

单击文本框使其获得焦点，然后单击按钮：

1.  就代码而言，调用了 lostfocus 处理程序，但没有调用 buttonclick 处理程序
2.  注释掉 MessageBox.Show("handlelostfocus") 然后单击处理程序被调用
3.  在 handlelostfocus 中设置断点并命中断点，但未调用单击处理程序

这些错误或行为是设计的 - 如果稍后，是否有任何进一步的解释？

```
<Window x:Class="WpfApplication4.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="MainWindow" Height="350" Width="525">
        <Grid>
            <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="216,194,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
            <TextBox Height="23" HorizontalAlignment="Left" Margin="197,108,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" />
        </Grid>
    </Window>

public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            textBox1.LostFocus += new RoutedEventHandler(handlelostfocus);
        }

        private void handlelostfocus(object sender, RoutedEventArgs e)
        {
            MessageBox.Show("handlelostfocus");
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            MessageBox.Show("click");
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:54:50.070

将 Button 的 ClickMode 属性更改为“Press”

```
<Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="216,194,0,0" ClickMode="Press" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" MouseUp="button1_MouseUp" MouseLeftButtonUp="button1_MouseLeftButtonUp" />
<TextBox Height="23" HorizontalAlignment="Left" Margin="197,108,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:30:26.103

在这种情况下，“点击”永远不会发生，因为 HB 表示您通过显示模式消息框来中断 UI/事件逻辑，因此按钮上永远不会出现鼠标按下事件。

尝试用非模态窗口替换消息框，例如： new Window() { Width = 300, Height = 100, Title = "handlelostfocus" }.Show();

您会看到事件仍然发生，因为您没有将焦点从事件逻辑中间的主窗口移开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T08:08:30.777

您中断点击逻辑，鼠标按下和鼠标向上都需要在;上*连续发生点击。*`Button`因此观察到的行为对我来说似乎很好。

# wpf - 绑定到单例类可观察集合成员

> ID：10242292
> 
> 赞同：14
> 
> 时间：2012-04-20T07:53:06.977
> 
> 标签：wpf, binding, static, singleton

我似乎无法弄清楚这一点。我在这里发现了一些类似的问题，但要么我无法确定我的方法的正确方向，要么我做的事情完全错误。

我的应用程序有一个单例类记录器，它保存了我程序中每个类的日志消息。

```
public class Logger
{
    private Logger()
    {

    }

    private static volatile Logger instance;

    public static Logger GetInstance()
    {
        // DoubleLock
        if (instance == null)
        {
            lock (m_lock)
            {
                if (instance == null)
                {
                    instance = new Logger();
                }
            }
        }
        return instance;
    }

    //Helper for Thread Safety
    private static object m_lock = new object();

    private ObservableCollection<string> _Log;

    public ObservableCollection<string> Log
    {
        get { return _Log; }
    }

    public void Add(string text)
    {
        if (_Log == null)
            _Log = new ObservableCollection<string>();

        Log.Add(DateTime.Now.ToString() + " " + text);
    }

    public void Clear()
    {
        _Log.Clear();
    }

} 
```

现在我想在我的 MainWindow 中将 Log 绑定到 ListBox，但我无法找出正确的 Binding

```
<ListBox Name="lstboxLog" Grid.Row="2" Margin="10,0,10,10" ItemsSource="{Binding Source={x:Static tools:Logger.Log}}" Height="100" /> 
```

tools 是我的 XAML 中单例类的命名空间。我敢肯定这比我想象的要简单，但我只是忽略了一些东西。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-20T08:32:06.430

将您的`GetInstance()`方法设置为获取属性。并且为了确保在您访问它之前实例化您的日志 Observable Collection。`Add()`这样，如果在您调用第一个方法之前绑定了绑定，则不会覆盖该绑定。

*XAML：*

```
ItemsSource="{Binding Source={x:Static tools:Logger.Instance}, Path=Log}" 
```

*记录仪：*

```
public static Logger Instance
    {
      get
      {
      // DoubleLock
      if (instance == null)
      {
        lock (m_lock)
        {
          if (instance == null)
          {
            instance = new Logger();
          }
        }
      }
      return instance;
      }
    }

    //Helper for Thread Safety
    private static object m_lock = new object();

    private ObservableCollection<string> _Log;

    public ObservableCollection<string> Log
    {
      get
      {
        if (_Log == null)
        { 
          _Log = new ObservableCollection<string>();
        }
        return _Log;
      }
    }

    public void Add(string text)
    {
      Log.Add(DateTime.Now.ToString() + " " + text);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T08:44:05.960

您可以将 GetInstance 保留为方法并使用 ObjectDataProvider：

```
<Window.Resources>
  <ObjectDataProvider x:Key="data"
                      ObjectType="{x:Type local:Logger}"
                      MethodName="GetInstance" />
</Window.Resources>
<ListBox ItemsSource="{Binding Source={StaticResource data},Path=Log}"/> 
```

但是您必须再次在构造函数或 GetInstance 上初始化 _Log。

# recursion - 以递归方式更改 Active Directory 中域中的所有用户属性

> ID：10242295
> 
> 赞同：0
> 
> 时间：2012-04-20T07:53:17.697
> 
> 标签：recursion, vbscript, attributes, active-directory, ldap

我有一个小脚本（VBS）来更改所有用户的网站属性：

```
 dim objOU, objUser 

    objOU="OU=Users,DC=mysociety,DC=local"  

    Set objOU = GetObject("LDAP://" & objOU)  

on error resume next 
For each objUser in objOU  
    If objUser.Class="user" Then  
            Set objUser = GetObject("LDAP://" & objUser.distinguishedName) 
        objUser.Put "wWWHomePage", "http://mysite.mysociety.local/Person.aspx?accountname=mysociety\" & objUser.mailNickname
        objUser.setInfo 
        if err.number <> 0 then 
            wscript.echo "Error processing " & objUser.givenName & ":" & err.number & ", " & err.Description 
            err.clear 
        end if 
    End if 
Next 
```

所以我的问题是，如果我将我的 objOU 精确到最深的目录，它就可以完美地工作。但它不是递归脚本，并且由于子目录的原因，使用此代码它不起作用。我是 VBS 的初学者，你能帮我把这个脚本递归吗？

提前谢谢你，对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:39:15.897

使用线程可以非常有效地完成此任务。在一个线程中，执行搜索，其中基础对象是目录信息树 (DIT) 中存储所有必须修改的条目的点。用于`whole subtree`搜索范围和将搜索结果缩小到仅需要修改的条目的过滤器。使用 OID`1.1`对于请求的属性列表（这将导致目录服务器仅返回可分辨名称）。假设目录管理员允许此搜索——它可能由于资源原因或安全原因或其他原因而被拒绝——当搜索结果到达时，使用另一个线程来构造对搜索线程中返回的可分辨名称的修改。为获得最大效率，请使用多个线程进行修改并为您的 API 使用适当的并发机制。

## 也可以看看

*   [LDAP：编程实践](http://ff1959.wordpress.com/2011/10/27/ldap-programming-best-practices/)
*   [LDAP：搜索最佳实践](http://www.ldapguru.info/ldap/ldap-search-best-practices.html)

# asp.net - 如何在 asp.net 中选择 Listbox 值

> ID：10242299
> 
> 赞同：1
> 
> 时间：2012-04-20T07:53:31.910
> 
> 标签：asp.net

我的网页中有一个 ListBox 以这种方式从数据库绑定：

```
 ListBox1.DataTextField = "Text";
    ListBox1.DataValueField = "MenuID";
    ListBox1.DataSource = SqlHelper.ExecuteReader(DAL.DALBase.ConnectionString, "GetMenu");
    ListBox1.DataBind(); 
```

我想获取选定的项目值并使用此代码但有错误并且不起作用。

```
ListBox1.SelectedValue; 
```

如果我因为我的英语不好而在写作上遇到问题，请原谅我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T07:56:27.790

您能否更具体地说明您遇到的错误？

使用`ListBox1.SelectedValue`应该工作。

例如：

```
int mySelectedValue = int.Parse(ListBox1.SelectedValue); 
```

或者

```
string mySelectedValue = ListBox1.SelectedValue; 
```

## 编辑

添加了代码以确保原始海报将值保留在 ListBox 数据绑定中。

```
protected void Page_Load( object sender, EventArgs e)
{
   if (!Page.IsPostBack)
   {
       BindListBox();
   }
}

private BindListBox()
{
   ListBox1.DataTextField = "Text";
   ListBox1.DataValueField = "MenuID";
   ListBox1.DataSource = SqlHelper.ExecuteReader(DAL.DALBase.ConnectionString, "GetMenu");
   ListBox1.DataBind();
}

protected void SomeButton_Click( object sender, EventArgs e)
{
   string mySelectedValue = ListBox1.SelectedValue;
} 
```

# cocoa - 在可编辑的 WebView 中获取插入符号的边界框

> ID：10242300
> 
> 赞同：3
> 
> 时间：2012-04-20T07:53:35.480
> 
> 标签：cocoa, webkit

对于我正在编写的文字处理器，有时我需要知道插入符号的坐标（原因很长而且对问题本身来说无趣）。我写应用程序。在 Objective-C 中。我不想调用 JavaScript，也不想做出“技巧”，比如改变 DOM 以获取插入符号坐标（一种解决方案是在插入符号位置插入一个空跨度并测量它的边界框） . 我已经搜索了获得所选 domrange 边界框但没有成功的方法。

我发现的唯一一件事是 WebCoreFrameBridge 中的 caretRectAtNode:offset:affinity （以及其他似乎可以满足我要求的方法）。所以我基本上看到了我的问题的两个答案

1) WebView 中有一个我不考虑的*魔术方法*

2) 告诉我如何使用 Obj-C 调用 WebCoreFrameBridge 内部的方法，并引用 WebView/Frame/etc。

# regex - 将 lst 文件转换为 csv 所需的正则表达式帮助

> ID：10242301
> 
> 赞同：3
> 
> 时间：2012-04-20T07:53:47.533
> 
> 标签：regex, export-to-csv

我有一个从 IMDB Interfaces 下载的文件 (ratings.lst)。内容似乎采用以下格式：-

```
Distribution   Votes      Rating  Title
0000001222     297339     8.4     Reservoir Dogs (1992)
0000001223     64504      8.4     The Third Man (1949)
0000000115     48173      8.4     Jodaeiye Nader az Simin (2011)
0000001232     324564     8.4     The Prestige (2006)
0000001222     301527     8.4     The Green Mile (1999) 
```

我的目标是将此文件转换为具有以下所需结果的 CSV 文件（逗号分隔）（例如 1 行）：

```
Distribution   Votes      Rating  Title
0000001222,    301527,    8.4,    The Green Mile (1999) 
```

我正在使用文本板，它支持基于正则表达式的搜索和替换。我不确定需要哪种类型的正则表达式才能达到上述预期结果。有人可以帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:40:52.973

The other regular expressions are somewhat overcomplicated. Because whitespace is guaranteed not to appear in the first three columns, you don't have to do a fancy match - "three columns of **anything** separated by whitepace" will do.

Try replacing `^(.+?)\s+(.+?)\s+(.+?)\s+(.+?)$` with `\1,\2,\3,"\4"` giving the following output (using Notepad++)

```
Distribution,Votes,Rating,"Title"
0000001222,297339,8.4,"Reservoir Dogs (1992)"
0000001223,64504,8.4,"The Third Man (1949)"
0000000115,48173,8.4,"Jodaeiye Nader az Simin (2011)"
0000001232,324564,8.4,"The Prestige (2006)"
0000001222,301527,8.4,"The Green Mile (1999)" 
```

Note the use of a non-greedy quantifier, `.+?`, to prevent accidentally matching more than we should. Also note that I've enclosed the fourth column with quote marks `""` in case a comma appears in the movie title - otherwise the software you use to read the file would interpret `Avatar, the Last Airbender` as two columns.

The nice tabular alignment is gone - but if you open the file in Excel it will look fine.

[Alternately, just do the entire thing in Excel.](http://support.microsoft.com/kb/214261)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:24:28.470

首先将所有替换`"`为`""`然后执行此操作：

查找：`^\([0-9]+\)[ \t]+\([0-9]+\)[ \t]+\([^ \t]+\)[ \t]+\(.*\)`
替换为：`\1,\2,\3,"\4"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:08:47.253

*   按 F8 打开替换对话框
*   确保选择正则表达式
*   在查找内容中：放：`^([[:digit:]]{10})[[:space:]]+([[:digit:]]+)[[:space:]]+([[:digit:]]- {1,2}\.[[:digit:]])[[:space:]]+(.*)$`
*   替换为：放`\1,\2,\3,"\4"`
*   点击全部替换

![在此处输入图像描述](../Images/4e9a5da56510243f5555003f610c2a3c.png)

*注意：*这在 rating.lst 中的字段之间使用 1 个或多个空格 - 如果您知道，最好指定确切的空格数。

*另请注意：*我没有在逗号分隔的项目之间放置空格，一般情况下你不会，但可以随意添加

*最后说明：*我将电影标题放在引号中，这样如果它包含逗号，它就不会破坏 CSV 格式。您可能希望以不同的方式处理此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T13:26:29.977

*MY BAD*这是一个 C# 程序。我会把它留给*替代*解决方案。

ignorepattern 空白用于注释模式。

这将创建可以放入 CSV 文件的数据。请注意，根据您的示例，CSV 文件中没有可选的 whitepsace....

```
string data =@"Distribution   Votes      Rating  Title
0000001222     297339     8.4     Reservoir Dogs (1992)
0000001223     64504      8.4     The Third Man (1949)
0000000115     48173      8.4     Jodaeiye Nader az Simin (2011)
0000001232     324564     8.4     The Prestige (2006)
0000001222     301527     8.4     The Green Mile (1999)
";

string pattern = @"
^                     # Always start at the Beginning of line
(                     # Grouping
   (?<Value>[^\s]+)     # Place all text into Value named capture
   (?:\s+)              # Match but don't capture 1 to many spaces
){3}                  # 3 groups of data
(?<Value>[^\n\r]+)    # Append final to value named capture group of the match
";

var result = Regex.Matches(data, pattern, RegexOptions.Multiline | RegexOptions.IgnorePatternWhitespace)
                  .OfType<Match>()
                  .Select (mt => string.Join(",", mt.Groups["Value"].Captures
                                                                    .OfType<Capture>()
                                                                    .Select (c => c.Value))
                                                                    );

Console.WriteLine (result);

/* output
Distribution,Votes,Rating,Title
0000001222,297339,8.4,Reservoir Dogs (1992)
0000001223,64504,8.4,The Third Man (1949)
0000000115,48173,8.4,Jodaeiye Nader az Simin (2011)
0000001232,324564,8.4,The Prestige (2006)
0000001222,301527,8.4,The Green Mile (1999)
*/ 
```

# android - Android如何打开.doc扩展文件？

> ID：10242306
> 
> 赞同：19
> 
> 时间：2012-04-20T07:54:14.007
> 
> 标签：android, doc

有没有办法打开 .doc 扩展文件？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-20T08:06:16.440

与 iOS 不同，Android 本身不支持渲染 .doc 或 .ppt 文件。您正在寻找一种公共意图，允许您的应用程序重用其他应用程序的活动来显示这些文档类型。但这仅适用于安装了支持此 Intent 的应用程序的手机。

[http://developer.android.com/guide/topics/intents/intents-filters.html](http://developer.android.com/guide/topics/intents/intents-filters.html)

或者如果你已经安装了一些应用程序，那么使用这个 Intent：

```
//Uri uri = Uri.parse("file://"+file.getAbsolutePath());
Intent intent = new Intent();
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setAction(Intent.ACTION_VIEW);
String type = "application/msword";
intent.setDataAndType(Uri.fromFile(file), type);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-28T02:47:43.530

这是一种为您解决此问题的方法：

```
public void openDocument(String name) {
    Intent intent = new Intent(android.content.Intent.ACTION_VIEW);
    File file = new File(name);
    String extension = android.webkit.MimeTypeMap.getFileExtensionFromUrl(Uri.fromFile(file).toString());
    String mimetype = android.webkit.MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension);
    if (extension.equalsIgnoreCase("") || mimetype == null) {
        // if there is no extension or there is no definite mimetype, still try to open the file
        intent.setDataAndType(Uri.fromFile(file), "text/*");
    } else {
        intent.setDataAndType(Uri.fromFile(file), mimetype);            
    }
    // custom message for the intent
    startActivity(Intent.createChooser(intent, "Choose an Application:"));
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-02T06:27:35.620

从可用应用程序列表中打开文档 用户必须从应用程序列表中选择应用程序

```
File targetFile = new File(path);
                    Uri targetUri = Uri.fromFile(targetFile);
                    Intent intent = new Intent(Intent.ACTION_VIEW);
                    intent.setDataAndType(targetUri, "application/*");
                    startActivityForResult(intent, DOC); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-19T11:37:42.013

如果要在应用程序中打开，可以在 webview 中打开文件。前任：

```
 String doc="<iframe src='http://docs.google.com/viewer?    url=http://www.iasted.org/conferences/formatting/presentations-tips.ppt&embedded=true'"+
    " width='100%' height='100%' style='border: none;'></iframe>";

        WebView  wv = (WebView)findViewById(R.id.fileWebView); 
        wv.getSettings().setJavaScriptEnabled(true);
        wv.getSettings().setAllowFileAccess(true);
        //wv.loadUrl(doc);
        wv.loadData( doc , "text/html",  "UTF-8"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-22T12:06:13.983

以下是在 Android 7.0 或更低版本中打开 .doc 文件的完整方法：

**步骤 1：** 首先，将您的 pdf 文件放在 assets 文件夹中，如下图所示。 [![将文档文件放在资产文件夹中](../Images/bdc5c23189fecbf46d81098f805eee94.png)](https://i.stack.imgur.com/tSaPj.png)

**第 2 步：** 现在转到 build.gradle 文件并添加以下行：

```
repositories {
maven {
    url "https://s3.amazonaws.com/repo.commonsware.com"
} 
```

}

然后在依赖项下添加以下行并同步：

```
compile 'com.commonsware.cwac:provider:0.4.3' 
```

**第 3 步：** 现在添加一个新的 java 文件，该文件应该从`FileProvider`Like 在我的情况下扩展文件名是`LegacyCompatFileProvider`和其中的代码。

```
import android.database.Cursor;
import android.net.Uri;

import android.support.v4.content.FileProvider;

import com.commonsware.cwac.provider.LegacyCompatCursorWrapper;

public class LegacyCompatFileProvider extends FileProvider {
  @Override
  public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
    return(new LegacyCompatCursorWrapper(super.query(uri, projection, selection, selectionArgs, sortOrder)));
  }
} 
```

**Step-4:**`"xml"`在文件夹下 创建一个文件`"res"`夹。（如果文件夹已经存在，则无需创建）。现在`providers_path.xml`在文件夹中添加一个文件`xml`。这是屏幕截图： [![provider_path xml文件的位置](../Images/d72b3ab969bd26de61ee96031d79f21b.png)](https://i.stack.imgur.com/L8yHL.png)

内部文件添加以下行：

```
<?xml version="1.0" encoding="utf-8"?>
<paths>
    <files-path name="stuff" />
</paths> 
```

**第 5 步：** 现在转到`AndroidManifest.xml`文件并在`<application></application>`标签中添加以下行：

```
<provider
            android:name="LegacyCompatFileProvider"
            android:authorities="REPLACE_IT_WITH_PACKAGE_NAME"
            android:exported="false"
            android:grantUriPermissions="true">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/provider_paths"/>
        </provider> 
```

**第 6 步：** 现在转到要加载 pdf 的 Activity 类，并添加以下 1 行和这 2 个方法：

```
private static final String AUTHORITY="REPLACE_IT_WITH_PACKAGE_NAME";

static private void copy(InputStream in, File dst) throws IOException {
        FileOutputStream out=new FileOutputStream(dst);
        byte[] buf=new byte[1024];
        int len;

        while ((len=in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }

        in.close();
        out.close();
    }

    private  void LoadPdfFile(String fileName){

        File f = new File(getFilesDir(), fileName + ".doc");

        if (!f.exists()) {
            AssetManager assets=getAssets();

            try {
                copy(assets.open(fileName + ".doc"), f);
            }
            catch (IOException e) {
                Log.e("FileProvider", "Exception copying from assets", e);
            }
        }

        Intent i=
                new Intent(Intent.ACTION_VIEW,
                        FileProvider.getUriForFile(this, AUTHORITY, f));

        i.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);

        startActivity(i);
        finish();
    } 
```

现在调用`LoadPdfFile`方法并传递您的文件名而`.doc`不像我的情况一样`"chapter-0"`，它将在文档阅读器应用程序中打开文档文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T08:03:14.680

您可以将文件从原始资源复制到 sdcard，然后在 ACTION_VIEW Intent 上调用 startActivity()，该意图具有指向可读副本的 Uri 并且还具有正确的 MIME 类型。

当然，这仅适用于具有 Word 文档查看器的设备。

# windows - Evernote 和 Producteev GUI 工具包

> ID：10242307
> 
> 赞同：0
> 
> 时间：2012-04-20T07:54:14.653
> 
> 标签：windows, user-interface

我正在查看适用于 Windows 的 Evernote 和 Producteev，并注意到它们使用了类似的 GUI 工具包。他们使用的是什么takeit？这是一些链接。[Producteev](http://www.producteev.com/appstore.php)。（检查 Windows 屏幕截图）和[Evernote](http://i1-win.softpedia-static.com/screenshots/EverNote_3.png)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:37:15.967

我是 Producteev 的 Windows 桌面应用程序的程序员。我们没有为 GUI 使用任何工具包。所有的 UI 代码都是根据我们内部艺术家的设计从头开始编写的。我们从 Evernote 中汲取了一点影响（尤其是在工具栏区域），以使应用程序看起来很熟悉，所以这就是为什么会有一些相似之处。

应用程序本身是用 C# 编写的，我使用 GDI+ 进行所有绘图调用。大约有十几个自定义编写的控件，包括按钮（其中一些会下拉菜单）、发光的文本框、列表框（用于任务）。还有另一个集合可以替换所有默认的 Windows 控件，以强制消除锯齿文本光栅化。

# mysql - Query to Re-index Primary Key of MySQL Database

> ID：10242311
> 
> 赞同：26
> 
> 时间：2012-04-20T07:54:20.277
> 
> 标签：mysql, sql, auto-increment

I've got a table in MySQL that has a Primary Key Column.

Lets say:

```
ID | Value
1  | One
2  | Two
6  | Three
8  | Four
9  | Five 
```

How do I get it to be:

```
ID | Value
1  | One
2  | Two
3  | Three
4  | Four
5  | Five 
```

There are no other tables. Just the one. I just want the ID to be in a proper series.

Any suggestion?? A Query perhaps.. :)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2015-05-24T15:31:31.007

There is even a simple way to accomplish the result by writing this query

```
SET @newid=0;
UPDATE tablename SET primary_key_id=(@newid:=@newid+1) ORDER BY primary_key_id; 
```

This query will reindex the primary key starts from `1`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-20T08:27:50.160

Seems to me you have two options.

1) create a new table and copy the existing data over.

2) add another autoincrement field to the existing table, then delete the original column.

```
ALTER TABLE tableName ADD NewIdn INT NOT NULL AUTO_INCREMENT KEY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-06T19:00:09.857

I did this in phpmyadmin by unchecking the A_I box (Auto Increment setting), clicking save, and then checking it again, and clicking save again.

# php - 带有 \PDO::PARAM_BOOL 的 PDO bindValue 导致语句执行以静默方式失败

> ID：10242312
> 
> 赞同：10
> 
> 时间：2012-04-20T07:54:24.297
> 
> 标签：php, mysql, pdo, doctrine-orm, prepared-statement

在一个服务器设置中，我遇到了非常奇怪的错误。有用于 MySQL 的带有 PDO 驱动程序的 PHP 5.3.6，客户端库版本 5.1.61。一切都是手工编译的。

当我用 bindValue 绑定参数并将第三个参数设置为 \PDO::PARAM_BOOL 然后语句执行返回 false 并且没有任何反应（没有数据插入 MySQL，甚至根本没有异常）。当我不使用第三个参数时，它运行良好。事实上我不能省略第三个参数，因为 Doctrine2 DBAL 在转换参数时设置它......

这是代码：

```
<?php
$pdo = new \PDO('mysql:host=***;dbname=***', '***', '***'); // hidden DB access
$pdo->setAttribute(\PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION);

$stmt = $pdo->prepare('insert into outage (name, description, start_at, end_at, is_exception, extranet_id) values (?,?,?,?,?,?)');
$stmt->bindValue(1, 'Test name', \PDO::PARAM_STR);
$stmt->bindValue(2, 'Test desc', \PDO::PARAM_STR);
$stmt->bindValue(3, '2012-01-01 00:00:00', \PDO::PARAM_STR);
$stmt->bindValue(4, null, \PDO::PARAM_NULL);
$stmt->bindValue(5, false, \PDO::PARAM_BOOL);
$stmt->bindValue(6, 2, \PDO::PARAM_INT);
var_dump(array('stmt result' => ($result = $stmt->execute()), 'last insert id' => $pdo->lastInsertId(), 'stmt err code' =>  $stmt->errorCode(), 'pdo err code' =>  $pdo->errorCode())); 
```

结果：

```
array(4) {
  ["stmt result"]=>
  bool(false)
  ["last insert id"]=>
  string(1) "0"
  ["stmt err code"]=>
  string(5) "00000"
  ["pdo err code"]=>
  string(5) "00000"
} 
```

什么可能出错？我已经在其他 4 台服务器上尝试过，但没有遇到此错误。此外，如果我将 '0' （作为字符串）传递给`$stmt->bindValue(5, false, \PDO::PARAM_BOOL);`它，它的效果也很好。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T07:26:05.720

我在使用 PHP 5.3.10 的 Ubuntu 上遇到了同样的问题。（有趣的是，在带有 wamp 的 Windows 上没有问题......）

实际上这是 pdo 中的一个已知错误：[https ://bugs.php.net/bug.php?id=38546](https://bugs.php.net/bug.php?id=38546)

我使用 PDO::PARAM_INT 而不是 PDO::PARAM_BOOL。它运行良好，您不必像上面那样将布尔值转换为字符串。

# javascript - JavaScript 退出弹窗功能在 Chrome 和 IE 中无法正常工作

> ID：10242315
> 
> 赞同：0
> 
> 时间：2012-04-20T07:54:45.090
> 
> 标签：javascript, jquery, redirect

我有一个退出弹出 js 函数，当有人试图离开页面时，它会显示一个警报并在 url 中添加一些内容（并重定向）。

警报显示在所有浏览器中，但代码：

```
window.location.href = "?p=exit" 
```

不在 Chrome 和 IE 中执行。

它在 Firefox 中运行良好。当您重新加载页面时，会显示警报并修改 url。

看看源代码，很简单。

代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type="text/javascript">
var exit=true;
    function confirmExit()
            {
            if(exit)
            {
            window.location.href = "?p=exit";
            }
            if(exit)
            return "Wait! Don't Leave Empty Handed!\n\nThank you for taking the time to check out our offer! Before you go we have a complimentary crash to help you succeed. Click the 'Cancel' or 'Stay On This Page' button if you're interested!";
            }
</script>
</head>
<body  onbeforeunload="return confirmExit()">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:04:47.067

*   您不能（跨浏览器）从“onbeforeunload”重定向。
*   Chrome 会阻止在“onbeforeunload”中设置的警报。

查看此答案以获取更多信息： [https ://stackoverflow.com/a/7080331/353710](https://stackoverflow.com/a/7080331/353710)

# timeout - JUnit - 不等待被测方法完成

> ID：10242320
> 
> 赞同：1
> 
> 时间：2012-04-20T07:55:11.643
> 
> 标签：timeout, junit4

我正在使用 Junit 4.x 来测试一种方法。

被测方法预计会抛出 IllegalArgumentException。该方法是一种阻塞方法（同步），它在内部使远程 ssh 连接执行脚本并捕获结果，或抛出异常。

为了测试这一点，我编写了如下的 JUnit 测试代码。

```
@Test (timeout=3000, expected=IllegalArgumentException.class)

public final void testReadFolderWithInvalidFolder() {

    final String folder = "/home/rv_nath/xxxyyyZzz";
    rfc.readFolder(folder);
} 
```

上面的 testReadFolder() 方法应该在检查是否抛出预期的异常之前等待最多 3 秒（因为 timeout=3000）。但它会立即返回，报告测试用例失败。

谁能帮我弄清楚上面出了什么问题。如果需要更多详细信息，请告诉我。

这是来自 Junit 的故障跟踪...

> java.lang.AssertionError：应该抛出 IllegalArgumentException。在 org.junit.Assert.fail(Assert.java:91) 在 com.comviva.remotefilebrowser.server.RemoteFileCaseTest.testReadFolderWithInvalidFolder(RemoteFileCaseTest.java:94) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect .NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:616) 在 org.junit.runners。 model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java :41) 在 org.junit.internal。

Junit4 超时实现中是否存在错误，或者我在这里遗漏了什么？

因为，如果我在调试模式下运行测试用例（并跟踪它，那么完成远程执行需要时间，但它确实有效并且测试用例通过了）。只有当我选择*运行*测试用例而不是*调试*它时才会出现问题。

谢谢和问候， 房车

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:01:15.583

对不起，上面的幼稚问题。方式有问题，我使用 JSch 库例程来读取远程数据。

只是在这里发帖，所以它可以帮助像我这样的新手用户:)

JSch 库抛出了一些异常，我没有正确捕获。被调用的方法正在捕获异常并立即返回。更正后，它可以正常工作。

# ios - Safari 中不同的 Facebook 身份验证对话框？

> ID：10242323
> 
> 赞同：5
> 
> 时间：2012-04-20T07:55:34.410
> 
> 标签：ios, facebook, facebook-graph-api, authentication, facebook-ios-sdk

我在使用两个应用程序时发现了两个不同的 FaceBook 身份验证对话框，一个是“Zynga 扑克”，另一个是我正在开发的。

当我在“Poker by Zynga”中使用 FaceBook 登录时，Safari 会打开此页面：

![在此处输入图像描述](../Images/9e958cb5b01dfba8000739bf0c5cdd57.png)

当我使用我现在正在开发的应用程序时，Safari 会打开这个页面：

![在此处输入图像描述](../Images/5f6eca165436535e5a8fe9608e80a963.png)

您可以看到这两个是两个不同的页面。在 Zynga 的 Poker 中，它显示“以 Vicky Gupta 身份登录 - 注销”，用户可以选择注销以以其他用户身份登录。虽然在我的应用程序中显示“您正在以 Vicky Gupta 的身份登录此应用程序”，但其中没有“注销”按钮。以其他用户身份登录的唯一方法是在 Safari 中打开 FaceBook，然后从那里注销。

有谁知道为什么会发生这种差异？我在 Facebook 应用程序设置中遗漏了什么吗？或者这是一种正常的行为，因为我不这么认为？

注意：我使用的是最新的 Facebook SDK（带有图形 api）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:21:37.107

如果您使用的是最新的 iOS Facebook SDK，我认为要注销用户，您只需删除 Facebook 主对象获得的令牌。

# java - 内部类和类隐藏之谜

> ID：10242326
> 
> 赞同：-2
> 
> 时间：2012-04-20T07:55:44.903
> 
> 标签：java, class, inner-classes

我有一个基于`inner`类的示例代码要解决：

```
package inner;

class A {
    void m() {
        System.out.println("Outer");
    }
}

public class TestInner {
    public static void main(String[] args) {
        new TestInner().go();       
    }

    private void go() {
        new A().m();
        class A{
            void m(){
                System.out.println("Inner");
            }
        }
        new A().m();
    }
    class A{
            void m(){
            System.out.println("Middle");
        }
    }
} 
```

* * *

上面示例代码给出的输出是：

```
Middle 
Inner 
```

我的问题是，鉴于我不想使用包名来创建对象，我如何将输出打印为：

```
Outer
Inner 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:01:10.267

由于使用包显然是答案，我假设您正在寻找一些迟钝的东西。

您可以添加一个外部类并调用它。

```
class B extends A { }

// in TestInner.go()
    new B().m();
    class A{
        void m(){
            System.out.println("Inner");
        }
    }
    new A().m(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T00:08:36.450

```
public class TestInner {
public static void main(String[] args) {
    new TestInner().go();       
}

private void go() {
    new inner.A().m();        //will produce output "Outer"
    class A{
        void m(){
            System.out.println("Inner");
        }
    }
    new A().m();             //will produce output "Inner"
}
class A{
        void m(){
        System.out.println("Middle");
    }
} 
```

# php - Code Igniter - 检测浏览器的最佳方法

> ID：10242327
> 
> 赞同：2
> 
> 时间：2012-04-20T07:55:51.517
> 
> 标签：php, codeigniter

我想将特定年龄的所有浏览器分流到他们自己的页面。这样做的最佳方法是什么？也许标题中的一些 JS 包含在：

```
 <!--[if lte IE 7 ]>
    <script type="text/javascript">
        window.location = "/unsupported-browser/";
    </script>
    <![endif]--> 
```

以上不应该将浏览器发送到：[http](http://example.com/unsupported-browser/) ://example.com/unsupported-browser/我有一个基本的控制器和视图来处理它吗？就这么简单吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-20T07:58:00.857

改为在 php 中执行此操作。使用[user_agent 类](http://codeigniter.com/user_guide/libraries/user_agent.html)并[重定向](http://codeigniter.com/user_guide/helpers/url_helper.html#footer)到该页面。

但更重要的是，你为什么不让 IE 用户访问你的网站呢？是因为 CSS 还是其他原因？

**代码：**

```
$this->load->helper('url');
$this->load->library('user_agent');

if ($this->agent->browser() == 'Internet Explorer' and $this->agent->version() <= 7)
    redirect('/unsupported-browser'); 
```

**编辑：**

如前所述; 如果您想在整个站点上使用它，请在**MY_Controller**中运行它并确保添加`$this->uri->segment(1) != 'unsupported-browser'`为额外条件以避免重定向循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T12:52:04.863

[从http://mobiledetect.net](http://mobiledetect.net)下载库

将 Mobile_Detect.php 放入“库”

主控制器内部

```
public function index() {
    $this -> load -> library('Mobile_Detect');
    $detect = new Mobile_Detect();
    if ($detect->is('Chrome') || $detect->is('iOS')) {
        // whatever you wanna do here.
    }
} 
```

[在https://dwij.net/mobile-os-detection-in-php-codeigniter](https://dwij.net/mobile-os-detection-in-php-codeigniter)上查找文档

# android - Android Mobile : 使用 JqTouch 的 Tap 链接不起作用

> ID：10242331
> 
> 赞同：0
> 
> 时间：2012-04-20T07:56:16.663
> 
> 标签：android, mobile, hyperlink, jqtouch

我正在使用 JqTouch 开发移动版本。

我遇到了一些简单的按钮（`<a href=""></a>`链接）在使用 Android 手机的 Tap 时没有反应的问题。当我触摸它时，没有任何反应，链接周围甚至没有橙色轮廓。在 iPhone 手机上一切正常。

我试图禁用我的 CSS 表，但结果相同。我究竟做错了什么？这是 Android 浏览器的常见问题吗？

这是我的代码

```
 <div id="homeLang" class="current">
        <div class="scroll">

            <div id="lang">
                <a id="frBtn" class="btn" href="#fr">FR</a>
                <a id="nlBtn" class="btn" href="#nl">NL</a>
            </div>

        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:52:35.247

我有同样的问题。jQtouch 中的内部链接不适用于 Android，但适用于 iPhone。从使用 jQuery 切换到 Zepto。这将解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T11:47:43.120

我认为这不是 Android 上的常见问题。您是否尝试过在 Android 上运行 jqtouch 附带的一些演示，您是否遇到同样的问题？

我刚刚尝试了以下方法，它适用于 iPhone 和 Android 设备。

```
<div id="test">
   <ul class="rounded">
      <li><a href="#page2">Go to page 2</a></li>
   </ul>
</div>
<div id="page2">
   <a href="#" class="whiteButton goback">Go back to page 1</a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:08:49.313

我知道这是一篇旧帖子，但对于寻找此答案的未来用户，我相信在实例化 jQT 对象时，您将通过执行以下操作来使其工作：

```
var jQT = new $.jQTouch({
  useFastTouch: false
}); 
```

# macos - 无法从 mac os ping 到 xp

> ID：10242332
> 
> 赞同：3
> 
> 时间：2012-04-20T07:56:21.353
> 
> 标签：macos, networking, ping

我的mac可以ping别人的电脑是xp，但是他们不能ping我的，我已经关闭了防火墙，还有其他配置吗？提前谢谢你。我在谷歌搜索过，但找不到有用的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:54:44.080

如果您绝对确定 Mac OS 防火墙已禁用，则应检查路由器的设置。作为起点，您可以通过交叉电缆直接连接两台计算机并检查问题是否仍然存在。如果不是，那肯定与路由器设备有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:11:40.230

这个问题听起来像是防火墙问题（可能在您的 Mac 上）而不是连接问题，因为 ping 在一个方向上工作。也许入口 ping (icmpv4) 流量在您的 Mac 上被阻止？转到“系统偏好设置”>“防火墙”>“关闭”，然后再试一次？

# c# - PgSqlExcetion：日期/时间字段值超出范围：“4/20/2012 12:00:00 AM”

> ID：10242335
> 
> 赞同：0
> 
> 时间：2012-04-20T07:56:30.327
> 
> 标签：c#, asp.net, postgresql, datetime

我想在数据库中插入数据表

```
 public void InsertNote(DataTable dataTable)
            {
                var query = new StringBuilder();

                query.Append("INSERT INTO sde.\"Table1\" 
(id, disciplol, date, second_id, note, key) VALUES ");

                foreach (DataRow row in dataTable.Rows)
                {
                    query.AppendFormat(" ({0}, '{1}', '{2}', {3}, '{4}', '{5}'),", 
row["classid"], row["disciplina"], row["datelesson"], row["student_id"], "", row["key"]);
                }

                // TODO : Review
                query.Replace(',', ';', query.Length - 2, 2);

                var cmd = new PgSqlCommand(query.ToString());

                var con = DB.Sqlconnection;
                cmd.Connection = con;
                con.Open();
                try
                {
                    cmd.ExecuteNonQuery();
                    // result = true;
                }
                catch (Exception ex)
                {
                    //result = false;
                    log.Error("InsertInTable1", ex.ToString());
                }
                finally
                {
                    con.Close();
                }
            } 
```

在生成的 CMD 中，我有这个查询：

```
INSERT INTO sde."RegistruNote" (first_id, discipline, date, second_id, note, key) VALUES  
(131415, 'Painting', '4/20/2012 12:00:00 AM', 432431, 'asd', 'aWbhxZn3X'), 
(131415, 'Painting', '4/20/2012 12:00:00 AM', 432432, 'fas', '3Dl8YCSgX'), 
(131415, 'Painting', '4/20/2012 12:00:00 AM', 432433, 'asd', '8RiBgcjuL'), 
(131415, 'Painting', '4/20/2012 12:00:00 AM', 432434, 'fds', '8rAW1VfC7'), 
(131415, 'Painting', '4/20/2012 12:00:00 AM', 432435, 'gfd', 'LhRP2y5Ji'), 
(131415, 'Painting', '4/20/2012 12:00:00 AM', 432436, 'wer', 'lGVa5boYs'), 
(131415, 'Painting', '4/20/2012 12:00:00 AM', 432437, 'wer', 'hbFfo2zNg'), 
(131415, 'Painting', '4/20/2012 12:00:00 AM', 432438, 'we', 'xEq7iAhMi'), 
(131415, 'Painting', '4/20/2012 12:00:00 AM', 432439, 'rew', 'drFNV9sCm'), 
(131415, 'Painting', '4/20/2012 12:00:00 AM', 432410, 'tw', 'dJ5XwJLQy'); 
```

在捕获中我有这个异常： PgSqlExcetion 日期/时间字段值超出范围：“4/20/2012 12:00:00 AM”

我必须在哪里将日期转换为 dd.mm.yyyy 格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:00:10.203

看看使用[PgSqlParameter](http://www.devart.com/dotconnect/postgresql/docs/Devart.Data.PostgreSql~Devart.Data.PostgreSql.PgSqlCommand~Parameters.html)对象而不是将整个查询构建为字符串 - 可能是服务器未设置为识别客户端正在使用的语言环境。

# tsql - TSQL GROUP BY 字符串的一部分

> ID：10242338
> 
> 赞同：4
> 
> 时间：2012-04-20T07:56:39.147
> 
> 标签：tsql, sql-server-2005, group-by

我有一个简单的查询。像这样的东西：

```
SELECT l.list_name, COUNT(order_id) 
FROM orders o JOIN lists l ON l.order_id=o.order_id 
    WHERE l.list_name LIKE 'orders_1%' or l.list_name LIKE 'orders_2%'
GROUP BY l.list_name 
```

情况看起来像这样：一个存储过程正在更新列表表，但如果有超过 1000 个订单，它会部分地切割列表。

如果我有 1200 个带有标准或列表“orders_1”的订单，那么我的程序将创建两个列表：“orders_1_1”和“orders_1_2”，第一个有 1,000 个订单，第二个有 200 个订单。

因此，当我运行查询来计算这些订单时，我会得到如下结果：

```
list_name                  count

orders_1                   100
orders_1_more_than_100_1   1000       
orders_1_more_than_100_2   200
orders_2                   400 
orders_3_1                 1000       
orders_3_2                 1000
orders_3_3                 420  
orders_3_more_than_100_1   1000       
orders_3_more_than_100_2   900
orders_3_more_than_200_1   1000       
orders_3_more_than_200_2   1000
orders_3_more_than_200_3   100      
orders_4                   200
orders_4_more_than_300     200 
```

我想得到的结果应该是这样的：

```
list_name                  count

orders_1                   100
orders_1_more_than_100     1200       
orders_2                   400 
orders_3                   2420 
orders_3_more_than_100     1900 
orders_3_more_than_200     2100     
orders_4                   200 
orders_4_more_than_300     200 
```

这样它将汇总所有开头相同的列表。

有什么想法吗？:)

这些是我在 list_names 列中的确切值：

```
WYS_AUT_PISMO_NR_6
WYS_AUT_PISMO_NR_5_POWYZEJ_240
WYS_AUT_PISMO_NR_5_DO_240
WYS_AUT_PISMO_NR_4_POWYZEJ_240_5
WYS_AUT_PISMO_NR_4_POWYZEJ_240_4
WYS_AUT_PISMO_NR_4_POWYZEJ_240_3
WYS_AUT_PISMO_NR_4_POWYZEJ_240_2
WYS_AUT_PISMO_NR_4_POWYZEJ_240_1
WYS_AUT_PISMO_NR_4_DO_240
WYS_AUT_PISMO_NR_3_POWYZEJ_240
WYS_AUT_PISMO_NR_3_DO_240
WYS_AUT_PISMO_NR_2_POWYZEJ_240
WYS_AUT_PISMO_NR_2_DO_240
WYS_AUT_PISMO_NR_1 
```

我想要的是像这样对它们进行分组：

```
WYS_AUT_PISMO_NR_6
WYS_AUT_PISMO_NR_5_POWYZEJ_240
WYS_AUT_PISMO_NR_5_DO_240
WYS_AUT_PISMO_NR_4_POWYZEJ_240 /*here I must group those 5 lists*/
WYS_AUT_PISMO_NR_4_DO_240
WYS_AUT_PISMO_NR_3_POWYZEJ_240
WYS_AUT_PISMO_NR_3_DO_240
WYS_AUT_PISMO_NR_2_POWYZEJ_240
WYS_AUT_PISMO_NR_2_DO_240
WYS_AUT_PISMO_NR_1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:01:11.657

尝试类似的东西

```
 select substring(l.list_name, 0, 8), count(order_Id)
    FROM orders o JOIN lists l ON l.order_id=o.order_id  
    WHERE l.list_name LIKE 'orders_1%' or l.list_name LIKE 'orders_2%'        
    group by substring(l.list_name, 0, 8) 
```

更新问题的更新答案：

```
 select newColName, COUNT(order_id)
     from 
     (
          select case when GetSubstringCount(l.list_name, '_', '') > 1 then 
        SUBSTRING(l.list_name, 0, len(l.list_name) - 2)
        else l.list_name end as NewColName
        , order_Id
          FROM orders o JOIN lists l ON l.order_id=o.order_id       
          WHERE l.list_name LIKE 'orders_1%' or l.list_name LIKE 'orders_2%'           
     ) mySubTable 
     group by newColName 
```

您需要类似[This](http://dataeducation.com/counting-occurrences-of-a-substring-within-a-string/)来创建 GetSubstringCount 方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T08:31:58.313

`_`如果有多个下划线，这个可怕的表达式将从参数的开头到最后一个字符串隔离：

```
select case when len (l.list_name) - len (replace (l.list_name, '_', '')) > 1 
            then left(l.list_name, 
                      len (l.list_name) - charindex('_', reverse(l.list_name)))
            else l.list_name
        end 
```

或者，您可以从字符串中删除 'orders_'，将下划线替换为点并将其转换为浮点数，然后转换为 int 以删除小数，然后使用此怪物返回字符串：

```
select 'orders_' + cast (cast (cast (
        replace (substring (@str, 8, 100), '_', '.') 
        as float) as int) as varchar(100)) 
```

为避免重复此 blob，请使用派生表而不是`lists`：

```
SELECT l.TrimmedListName, COUNT(order_id) 
FROM orders o 
JOIN 
(
   select lists.*,
       -- Remove optional list continuation number
          case when len (list_name) - len (replace (list_name, '_', '')) > 1 
                then left(list_name, 
                          len (list_name) - charindex('_', reverse(list_name)))
                else list_name
            end AS TrimmedListName
     from lists
) l ON l.order_id=o.order_id 
WHERE (l.list_name LIKE 'orders_1%' or l.list_name LIKE 'orders_2%')
GROUP BY l.TrimmedListName 
```

# java - 生成动态文件并在 GWT 中下载

> ID：10242340
> 
> 赞同：4
> 
> 时间：2012-04-20T07:56:46.183
> 
> 标签：java, gwt, servlets, rpc

我正在开发一个 GWT 应用程序。此应用程序正在服务器中运行。好吧，我实现了一个按钮，它调用一个在服务器端生成本地文件的方法。但是我想在客户端下载/生成这个文件。我怎么能在 GWT 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T08:12:37.110

在我们的项目中，我们按需在服务器上创建了一个文件。当文件成功创建后，我们向浏览器发送通知并创建一个链接。

请参阅 servlet 代码：

```
public class DownloadServlet extends HttpServlet {              
    private FileManager fileManager;        
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        String encodedFileName = req.getRequestURI().substring(
                req.getContextPath().length() + req.getServletPath().length() + 1);
        String decodedFileName = URLDecoder.decode(encodedFileName, "utf-8");    
        File downloadableFile = fileManager.toFile(decodedFileName);

        ServletOutputStream os = resp.getOutputStream();
        try {
            InputStream is = FileUtils.openInputStream(downloadableFile);
            try {
                IOUtils.copy(is, os);
            } finally {
                is.close();
            }
        } finally {
            os.close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:05:45.443

目前的情况是，并不是所有的浏览器都能够使用本地文件系统，所以在 GWT 中没有通用的解决方案。据我所知，FileSstem API 还没有完成。

作为替代方案，您可以继续使用服务器端生成的文件，或使用 Flash 插件来生成和存储文件（您必须创建一个 Flash 应用程序，并创建一些 API 来从 GWT 控制它）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-31T09:08:39.540

```
 private native void Download(String filename, String text)/*-{
      var pom = document.createElement('a');
      pom.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
      pom.setAttribute('download', filename);
      document.body.appendChild(pom);
      pom.click();
     document.body.removeChild(pom); }-*/; 
```

**在GWT**代码中使用**JSNI**方法，除了**JSON 字符串**之外，还提供要下载的文件名作为文本（String），该方法会将文本变量中指定内容的文件下载到**客户端浏览器**。

 ******* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T16:04:09.407

您绝对应该看看[Aki Miyazaki 的 GWT 的 HTML5 文件下载代码](https://github.com/akjava/html5gwt/tree/master/src/com/akjava/gwt/html5/client/download)。它按照您的要求**在客户端工作。**

AFAIK，截至目前，它仅适用于 Chrome，但这应该会随着其他浏览器实现[download 属性](http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download)而改变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T14:06:06.207

您可以使用[Data URIs](http://en.wikipedia.org/wiki/Data_URI)做到这一点：

1.  使您的 GWT RPC 方法返回文件内容或数据以生成文件。
2.  在客户端，使用接收到的文件内容格式化[数据 URI](http://en.wikipedia.org/wiki/Data_URI)或生成数据内容。
3.  用于`Window.open`打开传递格式化[DataURI](http://en.wikipedia.org/wiki/Data_URI)的文件保存对话框。

看看这个参考，了解[Data URI](http://en.wikipedia.org/wiki/Data_URI)的使用：

> [在 jQuery 中导出为 csv](https://stackoverflow.com/questions/4639372/export-to-csv-in-jquery/7588465#7588465)******

# oracle - 不带引号的表名不起作用

> ID：10242341
> 
> 赞同：-1
> 
> 时间：2012-04-20T07:56:50.083
> 
> 标签：oracle, oracle10g

我有个问题。为什么我的 Oracle Express Edition 需要双引号表名：

不工作选择：

```
select * from table 
```

工作选择：

```
select * from "table" 
```

感谢您的回答和帮助编辑我的帖子。我很困惑如何命名这个案例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T08:38:05.180

**仅当您使用的名称是关键字（并且您的示例 -`table`在这种情况下**）或者您想要包含特殊字符或非字母数字字符（例如）时，它才需要双引号名称`"Multi word table name"`。

" 中包含的名称区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:36:54.350

仅使用双引号：select * from "table";

它在没有引号的情况下工作，只有创建的名称是大写的。默认情况下，所有未加引号的名称都以大写形式存储。

例如：

```
CREATE TABLE "T1" (x number);

-- That works:
select * from "T1";

-- that works too:
select * from t1;

-- that works too:
select * from T1; 
```

TABLE - 是一个关键字。因此，即使您在 create 语句中使用大写名称，也可以不使用引号：

```
CREATE TABLE "TABLE" (x number);

select * from table;

ORA-00906: missing left parenthesis 
```

# jquery - MVC3 AJAX ActionLink“Hello World”我无法让它工作

> ID：10242343
> 
> 赞同：1
> 
> 时间：2012-04-20T07:56:56.347
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-3, actionlink

我不知道为什么，但没有 Ajax 发生。它只是将我链接到一个新的空白页面并显示“NA”，因为它调用下面的 GetTime() 函数：这是我在 Index.cshtml 中的 Hello World 代码：

```
@ViewBag.Title = "Home Page"
<h2>@ViewBag.Message</h2>
<p>Hello there! Click Update to see the current time!</p>
<div id="MyAjaxDiv"></div>
@Html.ActionLink("Update", "GetTime", new {id="MyAjaxLink"}) 
```

这是 HomeController.cs 代码：

```
namespace MvcApplication1.Controllers {
    public class HomeController : Controller {
        public ActionResult Index() {
            ViewBag.Message = "Welcome to ASP.NET MVC!";
            return View();
        }
        public string GetTime() {
            if (Request.IsAjaxRequest())
                return DateTime.Now.ToString("hh:mm:ss tt");
            return "NA";
        }
    }
} 
```

我点击了这个链接： [Ajax.ActionLink not working, Response.IsAjaxRequest() is always false](https://stackoverflow.com/questions/4973605/ajax-actionlink-not-working-response-isajaxrequest-is-always-false)

但是，正如那篇文章所建议的那样，在单独的 myscripts.js 文件中使用或不使用 AJAXifying 代码没有区别。它仍然将我链接到带有“NA”的空白页面。这是 _layout.cshtml 的标头中声明的代码

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Content/myscripts.js")" type="text/javascript"></script> 
```

文件“contents/myscripts.js”</p>

```
$(function() { 
    $('#MyAjaxLink').click(function() { 
        $('#MyAjaxDiv').load(this.href); 
        return false; 
    }); 
}); 
```

请帮忙 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:00:59.267

在我看来，问题出在您的选择器上。您的 Javascript 以 id="mylink" 为目标，但该链接名为“MyAjaxLink”。尝试将 Javascript 更改为：

```
$(function() { 
    $('#MyAjaxLink').click(function() { 
        $('#MyAjaxDiv').load(this.href); 
        return false; 
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:15:58.873

当您 ajaxify 代码时，请确保您的视图或 masterview 中也包含以下 2 个脚本

```
 MicrosoftAjax.js
  MicrosoftMvcAjax.js 
```

# c# - 如何使用ninject从区域获取控制器

> ID：10242345
> 
> 赞同：0
> 
> 时间：2012-04-20T07:57:05.927
> 
> 标签：c#, asp.net-mvc-3, ninject

[http://site.com/Admin/User/Index](http://site.com/Admin/User/Index)

管理员 - 区域。

我需要：

```
get controller Account (path /site.com/AccountController) 
```

@Html.ActionLink("登录"、"登录"、"帐户")

这给了我以下错误：

> “IControllerFactory 'Web.Infrastructure.NinjectControllerFactory'”
> “没有返回名称为 'Account' 的控制器。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:12:22.867

使用 Ninject.MVC3 扩展而不是编写自己的`NinjectControllerFactory`. 它支持区域。[https://github.com/ninject/ninject.web.mvc/wiki/MVC3](https://github.com/ninject/ninject.web.mvc/wiki/MVC3)

# algorithm - 为其或其解决方案算法请求一个流行的名称

> ID：10242347
> 
> 赞同：-5
> 
> 时间：2012-04-20T07:57:08.023
> 
> 标签：algorithm

这是问题以及我期望的结果。我已经有一个执行此操作的例程，但我想研究其他解决方案，因此需要解决方案或问题本身的任何流行名称。

```
If name1 and name2 are aliases or equivalent and name3 and name2 are aliases then
name1, name2, and name3 are all aliases of each other.

>>> aliases = [('name1', 'name2'), ('name3', 'name2')]
>>> consolidate_aliases(aliases)
[('name2', 'name3', 'name1')]
>>> aliases = [('A', 'X'), ('B', 'Y'), ('C', 'Z'), ('S', 'L'), ('T', 'M'), ('U', 'N'), ('Y', 'T'),  ('B', 'L')]
>>> consolidate_aliases(aliases)
[('S', 'B', 'T', 'Y', 'M', 'L'), ('U', 'N'), ('C', 'Z'), ('A', 'X')]
>>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:00:41.450

这称为[传递闭包](http://en.wikipedia.org/wiki/Transitive_closure)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:01:42.283

它看起来像[Union-Find 算法](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T01:24:58.313

它是“图的连通分量”问题的一种变体。谷歌让它看到[这样](http://www.cs.umd.edu/class/sum2005/cmsc451/components.pdf)和[这个](http://computation.pa.msu.edu/NO/ConnCompPresentation.html)的答案。

# php - 在循环中分配带有 PHP/Postgresql 查询值的 javascript 数组

> ID：10242350
> 
> 赞同：2
> 
> 时间：2012-04-20T07:57:18.473
> 
> 标签：php, javascript, arrays, postgresql, geojson

所以，我有一个 postgresql 数据库，我正在查询特定列的值并将每个值分配给一个 javascript 数组。现在我有一个 javascript 函数，可以在地图上输出这些数据。当我手动测试数组时（一一输入相应的数组索引），它完美地返回输出。但是在一个循环中（当我想一次全部输出时），我只能看到第一个元素的输出。数组的其余部分被简单地忽略或出现错误。我不明白错误在哪里。这是代码：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyC0HZ81Ea8Jy8fJ6zm6_uvPp8UhLg5mczo&sensor=true"></script>
<script type="text/javascript" src="GeoJSON.js"></script>
<script type="text/javascript" src="polygon.js"></script>

<script type="text/javascript">

var geojson_Polygon = new Array();

function kaushik()
{

    <?php
        require("header.php");

        $connection = pg_connect($full);

        if(!$connection)
        {
            pg_close($connection);

        }

        $result = pg_query($connection, "SELECT ogc_fid, ST_AsGeoJSON(wkb_geometry), name FROM features");
        if (!$result) 
        {
            exit;
        }

        $i = 0;         
        while ($row = pg_fetch_row($result)) 
        {   
            echo "\n";
            echo "geojson_Polygon[$i] = $row[1];";
            echo "\n";
            echo "\n";
            $i++;
        }

    ?>

    for (var j=0; j<317; j++)
    {
        showFeature(geojson_Polygon[j]);
    }

}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:41:43.123

如果您要做的是构建一个 JS 数组，那么只需执行以下操作：

```
<script type="text/javascript">
   var data = [ <?php

      // --- snip
      $first = true;
      while ($row = pg_fetch_row($result)) 
      {
          if ( $first )
          {
             $first = false;
          }else{
             echo ',';
          }
          echo $row[$i]
      }
      // ---- snip

   ?> ];
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:49:18.790

只需将行读入 php 数组，然后将其分配为 json。

```
<script>
...
var geojson_Polygon = <?php echo json_encode($all_rows); ?>;
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:13:41.087

我认为你应该这样做

```
 while ($row = pg_fetch_row($result)) 
    {   
        echo "\n";
        echo "geojson_Polygon[$i] = $row[$i];";
        echo "\n";
        echo "\n";
        $i++;
    } 
```

否则值始终相同

# android - 当 Android 应用程序中的 Internet 连接不可用时显示警报

> ID：10242351
> 
> 赞同：15
> 
> 时间：2012-04-20T07:57:19.630
> 
> 标签：android, alert

在我的应用程序中，数据来自互联网，我正在尝试创建一个函数来检查互联网连接是否可用，如果不可用，它会发出警报消息，表明没有可用的互联网连接。我正在使用以下代码。但它不工作。

```
public void onCreate(Bundle savedInstanceState){
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main1);
  if (isOnline())
  {
   // my code
  }
  else
  {
   Hotgames4meActivity1.this.startActivity(new Intent(Settings.ACTION_WIRELESS_SETTINGS)); 
    try {
       AlertDialog alertDialog = new AlertDialog.Builder(Hotgames4meActivity1.this).create();

       alertDialog.setTitle("Info");
       alertDialog.setMessage("Internet not available, Cross check your internet connectivity and try again");
       //alertDialog.setIcon(R.drawable.alerticon);
       alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface dialog, int which) {
          finish();

         }
       });

       alertDialog.show();
    }
    catch(Exception e)
    {
       //Log.d(Constants.TAG, "Show Dialog: "+e.getMessage());
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T08:16:09.853

```
public boolean isOnline() {
    ConnectivityManager conMgr = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = conMgr.getActiveNetworkInfo();

    if(netInfo == null || !netInfo.isConnected() || !netInfo.isAvailable()){
        Toast.makeText(context, "No Internet connection!", Toast.LENGTH_LONG).show();
        return false;
    }
return true; 
} 
```

并且您必须添加访问网络状态和 Internet 的权限：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-20T08:49:47.920

```
public void onCreate(Bundle obj) {
    super.onCreate(obj)
    setContextView(layout);

    if (isOnline()) {
        //do whatever you want to do 
    } else {
        try {
            AlertDialog alertDialog = new AlertDialog.Builder(con).create();

            alertDialog.setTitle("Info");
            alertDialog.setMessage("Internet not available, Cross check your internet connectivity and try again");
            alertDialog.setIcon(android.R.drawable.ic_dialog_alert);
            alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    finish();

                }
            });

            alertDialog.show();
        } catch (Exception e) {
            Log.d(Constants.TAG, "Show Dialog: " + e.getMessage());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-09-23T06:36:11.713

您可以在任何地方使用这些方法

```
public void checkNetworkConnection(){
    AlertDialog.Builder builder =new AlertDialog.Builder(this);
    builder.setTitle("No internet Connection");
    builder.setMessage("Please turn on internet connection to continue");
    builder.setNegativeButton("close", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            dialog.dismiss();
        }
    });
    AlertDialog alertDialog = builder.create();
    alertDialog.show();
}

public boolean isNetworkConnectionAvailable(){
    ConnectivityManager cm =
            (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
    boolean isConnected = activeNetwork != null &&
            activeNetwork.isConnected();
    if(isConnected) {
        Log.d("Network", "Connected");
        return true;
        }
    else{
        checkNetworkConnection();
        Log.d("Network","Not Connected");
        return false;
    }
} 
```

当您需要检查可用连接时，请调用 isNetworkConnectionAvailable() 方法。如果网络不可用，它将弹出您的对话框。如果您需要在多个屏幕中检查网络，请将这些方法添加到超类并将该类继承到其他类并在需要时调用此方法

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T08:04:34.237

尝试这个

```
ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        android.net.NetworkInfo wifi = cm
                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        android.net.NetworkInfo datac = cm
                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
        if ((wifi != null & datac != null)
                && (wifi.isConnected() | datac.isConnected())) {
                //connection is avlilable
                 }else{
                //no connection
                  Toast toast = Toast.makeText(context, "No Internet Connection",
                Toast.LENGTH_LONG);
        toast.show();  
                } 
```

并且不要忘记添加以下权限

```
<uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T09:01:23.937

也许试试这个

```
handler.removeCallbacks(checkInternetConnection);
                handler.postDelayed(checkInternetConnection, UPDATE_INTERVAL); 

    public Runnable checkInternetConnection = new Runnable() {

            public void run() {

                handler.postDelayed(checkInternetConnection, UPDATE_INTERVAL);
                ConnectivityManager conMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

                if(conMgr.getActiveNetworkInfo()!=null
                && conMgr.getActiveNetworkInfo().isAvailable()
                && conMgr.getActiveNetworkInfo().isConnected()){
                    alertOff();

                }
                else{
                    alertOn();
                }

            }
        }; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-02T09:15:50.137

试试这个我用于我的专业应用程序

```
import androidx.appcompat.app.AlertDialog;

import android.content.DialogInterface;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

public class MainActivity extends AppCompatActivity {    

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if (isOnline()) {
             // Do you Stuff
        } else {
            try {
                new AlertDialog.Builder(MainActivity.this)
                        .setTitle("Error")
                        .setMessage("Internet not available, Cross check your internet connectivity and try again later...")
                        .setCancelable(false)
                        .setIcon(android.R.drawable.ic_dialog_alert)
                        .setNeutralButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        finish();

                    }
                }).show();
            } catch (Exception e) {
                Log.d(Constants.TAG, "Show Dialog: " + e.getMessage());
            }
        }
    }

    public boolean isOnline() {
        ConnectivityManager conMgr = (ConnectivityManager) getApplicationContext()
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = conMgr.getActiveNetworkInfo();

        if(netInfo == null || !netInfo.isConnected() || !netInfo.isAvailable()){
            return false;
        }
        return true;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-24T15:27:23.787

```
private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager 
          = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    return activeNetworkInfo != null && activeNetworkInfo.isConnected();
}

if(!isNetworkAvailable()){
        //Toast.makeText(this, "No Internet Connection", Toast.LENGTH_SHORT).show();
        new AlertDialog.Builder(this)
        .setIcon(android.R.drawable.ic_dialog_alert)
        .setTitle("Closing the App")
        .setMessage("No Internet Connection,check your settings")
        .setPositiveButton("Close", new DialogInterface.OnClickListener()
    {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            finish();    
        }

    })
    .show();
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-20T08:01:47.817

在 manifest.xml 中添加权限

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-19T05:49:58.893

```
public boolean isOnline() 
{

ConnectivityManager connectionManager;

if(app_context!=null)

connectionManager = (ConnectivityManager) app_context.getSystemService(Context.CONNECTIVITY_SERVICE);

        else
            return false;

        try 
        {
            if (connectionManager.getActiveNetworkInfo().isConnected()) 
            {
                Log.e(THIS_FILE, "Communicator ....isConnected()");
                return true;
            } 
            else
            { 
                Log.e(THIS_FILE, "Communicator ....isNotConnected()");
                return false;
            }
        } 
        catch (NullPointerException e) 
        {
            Log.e(THIS_FILE, "No Active Connection");
            return false;
        }
    } 
```

在清单中设置权限

```
<uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-15T11:25:13.607

上面的方法只是告诉你你的手机是否有可能连接到互联网，但是，它并不能准确地告诉你是否存在连接。例如，你可能能够连接到 wifi，但在咖啡店里您应该在热点网站中输入凭据...或者，您的家庭 wifi 可能正在工作，并且您已连接到它，但无法访问互联网。使用以下代码检查互联网连接。最好在异步任务中使用它。

```
public boolean hasActiveInternetConnection()
{
        try
        {
            HttpURLConnection urlc = (HttpURLConnection) (new URL("http://www.google.com").openConnection());
            urlc.setRequestProperty("User-Agent", "Test");
            urlc.setRequestProperty("Connection", "close");
            urlc.setConnectTimeout(4000);
            urlc.setReadTimeout(4000);
            urlc.connect();
            networkcode2 = urlc.getResponseCode();
            return (urlc.getResponseCode() == 200);
        } catch (IOException e)
        {
            Log.i("warning", "Error checking internet connection", e);
            return false;
        }

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-19T05:06:32.393

这在我的代码中有效，试试这个：

```
@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    if (hasConnection(MainActivity.this)){
         //call methods
         //getJsonData();
      }
    else{
        showNetDisabledAlertToUser(MAinActivity.this);
    }
}

 public boolean hasConnection(Context context){
   ConnectivityManager cm=(ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);             
    NetworkInfowifiNetwork=cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    if (wifiNetwork != null && wifiNetwork.isConnected()){
        return true;
    }          
   NetworkInfo mobileNetwork=cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
    if (mobileNetwork != null && mobileNetwork.isConnected()){
        return true;
    }
    NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
    if (activeNetwork != null && activeNetwork.isConnected()){
        return true;
    }
    return false;
}

public static void showNetDisabledAlertToUser(final Context context){
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context, AlertDialog.THEME_TRADITIONAL);
    alertDialogBuilder.setMessage("Would you like to enable it?")
            .setTitle("No Internet Connection")
            .setPositiveButton(" Enable Internet ", new DialogInterface.OnClickListener(){
                        public void onClick(DialogInterface dialog, int id){
                            Intent dialogIntent = new Intent(android.provider.Settings.ACTION_SETTINGS);                                   
                            dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                            context.startActivity(dialogIntent);
                        }
                    });

                alertDialogBuilder.setNegativeButton(" Cancel ", new DialogInterface.OnClickListener(){
                public void onClick(DialogInterface dialog, int id){
                    dialog.cancel();
                }
            });
    AlertDialog alert = alertDialogBuilder.create();
    alert.show();
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-05T08:26:56.897

**2021 年 22 月 - 沃金代码 - 没有最佳实践的互联网**

*创建一个类并使用 Application 扩展*

```
 public class App extends Application {

        private static App instance;

        public static App getInstance() {
            return instance;
        }

        @Override
        public void onCreate() {
            super.onCreate();
            instance = this;
        }

        public static boolean isOnline() {
            ConnectivityManager connectivityManager = (ConnectivityManager) instance.getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
            return activeNetworkInfo != null;
        }
} 
```

*在你的 AndroidManifest.xml*

```
 <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <application
        android:name=".App"... // "name" add your app class inside application 
      Tag. 
```

*现在调用你的活动*

```
if (App.isOnline()){
        //todo task
    }else{
        if (pBar != null && pBar.getVisibility() == View.VISIBLE) pBar.setVisibility(View.GONE);
        Toast.makeText(App.getInstance(), "No Internet", Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-03-02T10:37:36.590

此代码工作正常如果 Intenet 可用，则顺利启动应用程序如果没有，则弹出一个对话框，要求打开或退出应用程序

```
public void checkNetworkConnection(){
    AlertDialog.Builder builder =new AlertDialog.Builder(this);
    builder.setTitle("No internet Connection");
    builder.setMessage("Please turn on internet connection to continue!");
     builder.setPositiveButton("Turn On", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    MainActivity.this.startActivity(new Intent(Settings.ACTION_WIRELESS_SETTINGS));
                }
            }).show();

    builder.setNegativeButton("Exit", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            finishAffinity();
        }
    }).show();

    AlertDialog alertDialog = builder.create();
    alertDialog.show();
}

public boolean isNetworkConnectionAvailable(){
    ConnectivityManager cm =
            (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
    boolean isConnected = activeNetwork != null &&
            activeNetwork.isConnected();
    if(isConnected) {
        Log.d("Network", "Connected");
        return true;
    }
    else{
        checkNetworkConnection();
        Log.d("Network","Not Connected");
        return false;
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-07T13:54:53.697

如果您想在连接丢失时显示警报。您可以使用以下方法。

此方法用于检查一次连接。首先，您必须在您的班级中创建这个。

```
private boolean isNetworkConnected() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        if(!(cm.getActiveNetworkInfo() != null && cm.getActiveNetworkInfo().isConnected())){
            showNetworkDialog();
            return false;
        }
        return true;
    } 
```

在您的类中创建此方法作为连接侦听器。

```
private void ConnectionCheck(){
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkRequest networkRequest = new NetworkRequest.Builder().build();
            connectivityManager.registerNetworkCallback(networkRequest, new ConnectivityManager.NetworkCallback() {
                @Override
                public void onAvailable(Network network) {
                    super.onAvailable(network);
                    Log.i("Tag", "active connection");
                }

                @Override
                public void onLost(Network network) {
                    super.onLost(network);
                    Log.i("Tag", "losing active connection");
                    isNetworkConnected();
                }
            });
        }
    } 
```

为了显示对话框，您可以创建 showDialog() 方法。您可以添加 2 个按钮。重试并退出

```
private void showNetworkDialog(){
    new AlertDialog.Builder(MainActivity.this)
            .setIcon(android.R.drawable.ic_dialog_alert)
            .setTitle("Connection lost?")
            .setMessage("Please check your internet connection!")
            .setCancelable(false)
            .setPositiveButton("Exit", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    finish();
                }
            })
            .setNegativeButton("Retry", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    isNetworkConnected();
                }
            })
            .show();
} 
```

最后，您可以在 onCreate() 方法中调用此方法。

```
if(isNetworkConnected()){
            ConnectionCheck();
        } 
```

在清单文件中，您必须提及权限。

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-04-04T11:37:00.917

在您的 create 方法中编写此代码

```
if (internetConnection.hasConnection(BankAccount.this))
{
   // call your methods
}

else
{
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context, AlertDialog.THEME_DEVICE_DEFAULT_LIGHT);
    alertDialogBuilder
            .setMessage("No internet connection on your device. Would you like to enable it?")
            .setTitle("No Internet Connection")
            .setCancelable(false)
            .setPositiveButton(" Enable Internet ",
                    new DialogInterface.OnClickListener()
                    {

                        public void onClick(DialogInterface dialog, int id)
                        {
                            Intent dialogIntent = new Intent(android.provider.Settings.ACTION_SETTINGS);
                            dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                            context.startActivity(dialogIntent);
                        }
                    });

    alertDialogBuilder.setNegativeButton(" Cancel ", new DialogInterface.OnClickListener()
    {
        public void onClick(DialogInterface dialog, int id)
        {
            dialog.cancel();
        }
    });

    AlertDialog alert = alertDialogBuilder.create();
    alert.show();
} 
```

# java - 如何在 jFreeChart 中获取完成绘制条形图的事件？

> ID：10242352
> 
> 赞同：2
> 
> 时间：2012-04-20T07:57:20.110
> 
> 标签：java, jfreechart, vaadin

我在 Vaadin 中通过 JFreeChartWrapper 使用 jFreeChart 并且在绘制它时遇到问题。图表数据正在运行中，可能需要一些时间。所以我想添加进度指示器来通知用户图像加载（在它关闭窗口之前）。

我试图通过为 ProgressIndicator 添加临时布局并使用它直到从图表接收到一些事件来解决这个问题：

```
final AbsoluteLayout loadLayout = new AbsoluteLayout();
loadLayout.setImmediate(true);
ProgressIndicator progress = new ProgressIndicator();
progress.setIndeterminate(true);
progress.setVisible(true);
loadLayout.addComponent(progress, "right: 500px; top: 200px;");
setContent(loadLayout); 
```

同时，图表被添加到另一个布局中：

```
JFreeChart barChart = ChartFactory.createBarChart("Text", "", "", res, PlotOrientation.VERTICAL, true, false, false); 

barChart.addProgressListener(new ChartProgressListener() {
    @Override
    public void chartProgress(ChartProgressEvent arg0) {
        if (arg0.getType() == ChartProgressEvent.DRAWING_FINISHED) {
            loadLayout.setVisible(false);
            setContent(layout);
            layout.setVisible(true);
        }
    }
}); 
JFreeChartWrapper chartWrap = new JFreeChartWrapper(barChart);
layout.addComponent(chartWrap); 
```

但我得到的 - 只是进度指示器，我从来没有得到 ChartProgressEvent。如果在 JFreeChart 中触发，我看不到这个事件的位置。

是否可以修复它或者我应该更好地使用其他 Vaadin 插件来制作图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T16:41:19.233

要接收此类事件，您需要将图表添加到 a`ChartPanel`中，如此[处](https://stackoverflow.com/a/10226303/230513)所述。

# javascript - 从 Javascript/jquery 设置许多 IE 过滤器

> ID：10242353
> 
> 赞同：0
> 
> 时间：2012-04-20T07:57:20.377
> 
> 标签：javascript, jquery, internet-explorer

是否可以从 JavaScript 或 jquery 设置许多 IE 过滤器？

这仅适用于一个：

```
object.style.filter ="progid:DXImageTransform.Microsoft.Alpha(opacity=20)" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:28:19.520

您不能将多个过滤器放在单独的块中。您必须将所有过滤器放在单个声明中。

例子：

```
object.style.filter = "progid:DXImageTransform.Microsoft.MotionBlur(strength=50)
        progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"; 
```

[http://msdn.microsoft.com/en-us/library/ms532847%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms532847%28v=vs.85%29.aspx)

在本文档中搜索“多个”。

# c# - VB.NET 代码返回的结果与 C# 代码不同

> ID：10242355
> 
> 赞同：3
> 
> 时间：2012-04-20T07:57:29.607
> 
> 标签：c#, vb.net, bit-manipulation, runtime-error

C# 中的以下代码给出结果“228452386”

```
UInt32 a;

int k = 0;

a = 0x9E3779B9;

a += (UInt32)(url[k + 0] + (url[k + 1] << 8) + (url[k + 2] << 16) + (url[k + 3] << 24)); 
```

运行上述代码后，“a”包含“228452386”。

[但是VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)中的以下相同代码会导致“算术运算导致溢出”。基本上最后一条语句是返回值“1868983913”，所以会产生运行时错误。

```
Dim a As UInt32

Dim k As Integer = 0

a = &H9E3779B9UI

a += CUInt(AscW(url(k + 0)) + (AscW(url(k + 1)) << 8) + (AscW(url(k + 2)) << 16) + (AscW(url(k + 3)) << 24)) 
```

请注意，上述代码中的变量“url”可以是任何字符串，并且两个代码都相同。

当我在 C# 和 VB.NET 中运行以下语句时，它们都返回相同的值

C＃

```
(UInt32)(url[k + 0] + (url[k + 1] << 8) + (url[k + 2] << 16) + (url[k + 3] << 24)) 
```

VB.NET

```
CUInt(AscW(url(k + 0)) + (AscW(url(k + 1)) << 8) + (AscW(url(k + 2)) << 16) + (AscW(url(k + 3)) << 24)) 
```

两个语句都为“url”“info:microsoft.com”返回值“1868983913”。但是当我使用**+= .........**运行完整语句时， VB.NET 会给出错误，而 C# 返回值“228452386”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:25:02.600

您有溢出，因为添加您添加的两个数字的结果大于适合 UInt 的结果。

结果数字是 33 位数字，UInts 仅适合 32 位。

*   在 C# 中，最高有效位只是被切掉，保留了适合 UInt 的 32 位。（这个新值不是添加数字的实际结果。）
*   在 VB.NET 中，您会收到一个异常，指出该数字不适合。

VB.NET 编译器（或 VS）允许您关闭这种溢出检查，以便 VB.NET 在这种情况下表现得像 C#。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:02:58.363

VB.NET 会自动插入溢出测试，而 C# 不会。等效的 C# 代码将是：

```
UInt32 a;
int k = 0;
a = 0x9E3779B9;
checked{
    a += (UInt32)(url[k + 0] + (url[k + 1] << 8) + (url[k + 2] << 16) + (url[k + 3] << 24));
} 
```

**编辑**：更改代码示例以符合编辑的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:13:46.937

使用以下 VB.NET 代码：

```
 a += CUInt(AscW(url(k + 0))) + CUInt((AscW(url(k + 1)) << 8)) + CUInt((AscW(url(k + 2)) << 16)) + CUInt((AscW(url(k + 3)) << 24)) 
```

`AscW`返回一个整数（有符号），你需要的是无符号的。

*编辑*

这有效：

```
 Dim a As Int64
    Dim result As UInt32

    Dim k As Integer = 0

    Dim url As String = "info:microsoft.com"

    a = &H9E3779B9UI

    Dim a1 As UInt32 = 0
    Dim a2 As UInt32 = 0
    Dim a3 As UInt32 = 0
    Dim a4 As UInt32 = 0

    a1 = AscW(url(k + 0))
    a2 = AscW(url(k + 1)) << 8
    a3 = AscW(url(k + 2)) << 16
    a4 = AscW(url(k + 3)) << 24

    a = (a + a1 + a2 + a3 + a4) And &HFFFFFFF
    result = Convert.ToUInt32(a) 
```

# objective-c - 为什么我不能在头文件中定义纯 C 函数？

> ID：10242357
> 
> 赞同：13
> 
> 时间：2012-04-20T07:57:42.920
> 
> 标签：objective-c

当我尝试在类接口上方的头文件中定义 C 函数时，总是会遇到构建错误。

但是当我在实现文件中做同样的事情并在标题中给出一个声明时。事情解决了。

我想知道，为什么会这样，因为我在头文件中定义了枚举、结构、常量 NSStrings，那么为什么不是 C 函数呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-20T08:06:31.660

这与 C 链接器（或链接编辑器）的工作方式有关。当 C 编译器遇到函数定义时，它会准备实现该函数的汇编程序代码，并用一个*符号*标记它，该符号对链接器说“这是具有此名称的函数开始的地方”。该符号通常用下划线命名，后跟函数名，例如`_printf`。

如果您在头文件中定义函数，则导入此头文件的每个`.c`或`.m`文件都将编译该函数，并导致编译器发出相同的符号。链接器希望只找到每个符号的一个实例，因此这是一个错误。

这与守卫的存在无关`#include`，也与使用`#import`而不是`#include`. C 编译器在单独的*翻译单元*上工作——这意味着单独的源文件。预处理器策略会阻止您将相同的头文件两次包含到单个源文件中，但不会对跨多个文件的活动进行协调。这意味着在不同的源文件中包含相同的头文件是有效的：这也意味着当您编译不同的文件时，它们可以（合法地）包含相同的符号。

链接编辑器的工作是将这些文件放在一起，解决对编译时未知符号的任何引用。如果您尝试将具有相同符号的对象（已编译和组装的翻译单元的名称）链接到同一存档、共享库或可执行文件，那么您将在此处看到错误。

解决方案：

*   不要在头文件中定义函数，只需在其中声明并在实现文件中定义即可；正如您已经发现这有效。
*   在标头中定义函数，但仅在代码中的一处包含该标头。由于设计原因，这通常是不可接受的。
*   使用修饰符在标题中定义函数`inline`。内联函数只是由编译器复制到调用它们的函数中，因此永远不会为它们发出链接器符号。这有它自己的权衡，您[可能希望阅读更多关于](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka3538.html).

# eclipse-rcp - Eclipse RCP“关于窗口”

> ID：10242358
> 
> 赞同：3
> 
> 时间：2012-04-20T07:57:46.000
> 
> 标签：eclipse-rcp

在eclipse RCP中开发“about window”时，我们需要定义：

```
aboutText=我的文本将在 about 窗口中显示
```

在 about.ini 文件中。

我需要添加版本号，该版本号在 .product 文件的概览页面中定义。有没有办法参数化这个字符串？

我试图将 {featureVersion} 添加到 aboutText，但它不起作用 - 我的 about 窗口不会显示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:52:12.250

没那么难......在文本本身中使用`{0}`,`{1}`等并构造一个文件`about.mappings`：

```
0=abc
1=def
... 
```

现在问题被简化为在映射文件中进行替换。不幸的是，在 Eclipse 中没有标准化的方法来做到这一点。[对于 Tycho，我通常使用此处](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)描述的 maven 过滤器。

# php - 更新 Jquery 进度条，同时读取 txt 文件（来自 php）

> ID：10242360
> 
> 赞同：1
> 
> 时间：2012-04-20T07:57:52.937
> 
> 标签：php, jquery, progress-bar

我有一个 100.000 行的 txt 文件，我需要阅读它才能将其中的大部分插入到我的数据库中。我想使用这个插件，因为我发现它很容易使用：

[http://www.bram.us/projects/js_bramus/jsprogressbarhandler/#download](http://www.bram.us/projects/js_bramus/jsprogressbarhandler/#download)

我的问题是：我用 PHP 读取了 txt 文件，但我不明白如何更新进度条！我在想这样的事情

```
echo '$("#progressbar").progressbar({ value: '.($k++).' });'; 
```

从 0 到 100哪里`$k`去了，但是，我必须把它放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:35:00.590

我找到了这个方法：

[http://spidgorny.blogspot.it/2012/02/progress-bar-for-lengthy-php-process.html](http://spidgorny.blogspot.it/2012/02/progress-bar-for-lengthy-php-process.html)

我认为这可能有助于对代码进行一些编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:07:37.423

您不可能混合使用 php 和 javascript：

1.  PHP 将运行并生成一个 HTML/JS 文件
2.  HTML/JS 文件将被发送到客户端
3.  客户端将运行 JS：`$("#progressbar").progressbar({ value: XX });`

所以`k`会是静态的。

--

如果你真的想轻松地做这样的事情，你可以使用一个包含三列的中间数据库表：txt_file、位置、长度，并且经常在 PHP 脚本在 txt 文件上运行时更新这个表。

客户端，在 Javascript 中，您可以使用 jQuery 例如每 5 或 10 秒发出一次 ajax 请求，这将调用另一个 PHP 页面，而这个 PHP 页面只会从中间表返回相应的行。获得结果后，您可以更新进度条。

--

这是为您实现的最简单的解决方案，但它仍然很脏，而且 txt 文件的解析最好必须很长！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:13:11.137

没有直接的方法可以实现这个东西。PHP 脚本首先执行，然后将输出发送到查看网页的客户端，这就是为什么您无法向客户端显示 PHP 脚本处理的实时状态的原因。

您将不得不使用 AJAX 和 Database 的组合：

创建一个表来跟踪文本文件的加载进度。每当用户（客户端）向页面发送请求时，请继续使用进度更新表格。使用 Session id 作为表上的索引，以便轻松跟踪每个客户端的进度。现在使用 AJAX 请求从表中获取进度，并使用进度条将其呈现给客户端。

# linux - 使用〜8MB缓冲区（OSX，Linux）的write（）段错误

> ID：10242370
> 
> 赞同：5
> 
> 时间：2012-04-20T07:58:42.470
> 
> 标签：linux, segmentation-fault, bsd

我很好奇在 Linux/OSX/FreeBSD 上 write() 和 read() 可以处理什么样的缓冲区大小，所以我开始玩弄下面这样的愚蠢程序：

```
#include <unistd.h>
#include <fcntl.h>
#include <stdio.h>
#include <string.h>
#include <sys/stat.h>

int main( void ) {
    size_t s = 8*1024*1024 - 16*1024;
    while( 1 ) {
        s += 1024;
        int f = open( "test.txt", O_CREAT | O_WRONLY | O_TRUNC, S_IRUSR | S_IWUSR | S_IXUSR );
        char mem[s];
        size_t written = write( f, &mem[0], s );
        close( f );
        printf( "(%ld) %lu\n", sizeof(size_t), written );
    }
    return 0;
} 
```

这让我可以测试在出现段错误之前我能达到的“8MB 障碍”有多接近。在 8MB 左右的某个地方，我的程序死掉了，这是一个示例输出：

```
(8) 8373248
(8) 8374272
(8) 8375296
(8) 8376320
(8) 8377344
(8) 8378368
(8) 8379392
(8) 8380416
(8) 8381440
(8) 8382464
Segmentation fault: 11 
```

这在 OSX 和 Linux 上是一样的，但是我的 FreeBSD VM 不仅在运行这个测试时要快得多，而且还可以继续运行很多方法！我已经成功地测试了它高达 511MB，这只是一个可笑的数据量在一次调用中写入。

是什么导致 write() 调用段错误，我如何才能在一次调用中计算出我可能 write() 的最大数量，而不会像我现在正在做的那样做一些荒谬的事情？

（注意，这三个操作系统都是 64 位的，OSX 10.7.3，Ubuntu 11.10，FreeBSD 9.0）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T08:07:33.877

*故障*不在 内，`write()`而是堆栈溢出。试试这个：

```
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>
#include <stdio.h>
#include <string.h>
#include <sys/stat.h>

int main( void )
{
    void *mem;
    size_t s = 512*1024*1024 - 16*1024;
    while( 1 )
    {
        s += 1024;
        int f = open( "test.txt", O_CREAT | O_WRONLY | O_TRUNC, S_IRUSR | S_IWUSR | S_IXUSR );
        mem = malloc(s);
        size_t written = write( f, mem, s );
        free(mem);
        close( f );
        printf( "(%ld) %lu\n", sizeof(size_t), written );
    }
    return 0;
} 
```

# c# - 导入构造函数和子类

> ID：10242372
> 
> 赞同：5
> 
> 时间：2012-04-20T07:58:48.013
> 
> 标签：c#, mef

我有一个抽象基类和一个派生类。我正在尝试使用 MEF 通过在基类中使用 [ImportingConstructor] 来注入对我的 WindowManager 的引用。IE。

```
[ImportingConstructor]
public SomeViewModel(IWindowManager windowmanager) {...} 
```

问题是在我添加这个之前，我所拥有的只是没有参数构造函数，并且派生类正在抱怨如果我向基类添加一个无参数构造函数，则 WindowManager 永远不会被注入。

使用我目前有限的知识，我能想到的唯一方法是将管理器导入更改为属性导入，并且只有一个无参数默认构造函数。这种让我很困扰，因为一般规则似乎更喜欢对必需依赖项进行构造函数注入，而对可选依赖项进行属性注入。

我可以在我的子类中添加覆盖的 [ImportingConstructor]，但这似乎是不必要的代码重复。

有没有更好的方法来做到这一点，即确保在创建派生类时注入我的依赖项？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-21T08:49:01.903

暂时忽略 MEF 并考虑一下：

```
public abstract class BaseClass {
    protected BaseClass(IService service) { }
}

public class SubClass : BaseClass {
    public SubClass(IService service) : base(service) { }
} 
```

因为基类定义了一个构造函数，所以子类**必须**通过为基类的构造函数提供一个参数来初始化基类。

现在，对于 MEF，我认为您正在尝试做的是：

```
public abstract class BaseClass {
    [ImportingConstructor]
    protected BaseClass(IService service) { }
}

[Export]
public class SubClass : BaseClass {
    public SubClass() { }
} 
```

听起来您正在尝试向基类的构造函数中注入一些东西，但您不能这样做，因为子类有责任确保将适当的参数传递给构造函数的基类。您需要对子类进行修改：

```
[Export]
public class SubClass : BaseClass {
    [ImportingConstructor]
    public SubClass(IService service) : base(service) { }
} 
```

现在子类将注入服务并将其传递给基类。

就使用属性注入与构造函数注入而言：最好将类型初始化为可用状态。在构造函数中应该需要任何显式依赖项。但是，因为 MEF 将满足所有导入，所以当您从容器中取回您的部分时，构造函数和属性注入都已经发生，因此您可以使用属性导入来代替。我的偏好一直是使用构造函数导入。

# c# - 如何阅读 MIME 格式的电子邮件 pop3

> ID：10242374
> 
> 赞同：0
> 
> 时间：2012-04-20T07:58:52.247
> 
> 标签：c#

我正在尝试从交换服务器自动读取电子邮件，但其中一些是 MIME 格式并且无法正确读取它们，所以我需要一个类或其他东西来解密 MIME 电子邮件。任何人都知道如何查找 wath 电子邮件是 MIME 格式以及哪些电子邮件是正常的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:01:03.417

也许您可以使用[OpenPop.NET](http://hpop.sourceforge.net/)库来帮助您完成任务。它具有 MIME 解析功能。

# php - PHP 创建的表单在提交时打开新时间（仅在第一次提交时）

> ID：10242375
> 
> 赞同：0
> 
> 时间：2012-04-20T07:59:02.550
> 
> 标签：php, html, forms

我使用 PHP 生成表单，单击“提交”按钮后，它会打开新表单。在我单击“提交”按钮后的新表单中，它的格式很好并且不会打开新标签！所以新标签打开仅在页面加载时第一次应用......我第一次看到磨损的东西。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title></title>
</head>
<body>
<?php
    echo "<form method=\"get\" target=\"{$_SERVER['PHP_SELF']}\">";
    echo "<select name=\"main_value\">";
        echo "<option {$selected} value=\"{$city['ID']}\">{$city['NAME']}</option>";
    echo "</select><br />";
    echo "<input type=\"submit\" value=\"Submit!\" />";
    echo "</form>";
?>
</body>
</html> 
```

PS-当然存在PHP变量-我只是不想在这里编写整个代码！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:18:45.453

表单的“目标”属性是必须显示请求结果的窗口的名称。第一次没有指定名称的窗口，所以新窗口（选项卡）打开。下次浏览器已经有了这个名字的窗口，所以使用这个窗口。如果您想每次都打开新标签，请使用`target="_blank"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:29:20.193

改变这个：

```
echo "<form method=\"get\" target=\"{$_SERVER['PHP_SELF']}\">"; 
```

到

```
echo "<form method=\"get\" action=\"{$_SERVER['PHP_SELF']}\">"; 
```

`action`属性用于指定要传递数据的脚本名称。并且`target`属性指定在哪个窗口或框架中发送响应。

# java - 如何在 Java 中生成顺序整数的列表或数组？

> ID：10242380
> 
> 赞同：159
> 
> 时间：2012-04-20T07:59:17.570
> 
> 标签：java, arrays, collections, guava, apache-commons

是否有一种简短而甜蜜的方法来生成一个`List<Integer>`，或者可能是一个 `Integer[]`或`int[]`，从某个`start`值到一个值的顺序值`end`？

也就是说，比以下更短但等效于¹的东西：

```
void List<Integer> makeSequence(int begin, int end) {
  List<Integer> ret = new ArrayList<>(end - begin + 1);
  for (int i=begin; i<=end; i++) {
    ret.add(i);
  }
  return ret;  
} 
```

使用番石榴很好。

**更新：**

## 性能分析

由于这个问题已经收到了几个很好的答案，无论是使用原生 Java 8 还是第三方库，我想我会测试所有解决方案的性能。

第一个测试简单地测试`[1..10]`使用以下方法创建一个包含 10 个元素的列表：

*   **classicArrayList**：上面在我的问题中给出的代码（与 adarshr 的答案基本相同）。
*   **eclipseCollections** ：使用 Eclipse Collections 8.0 在下面[Donald 的回答](https://stackoverflow.com/a/36350104/149138)中给出的代码。
*   **guavaRange**：下面[daveb 的答案](https://stackoverflow.com/a/10242491/149138)中给出的代码。从技术上讲，这不会创建一个`List<Integer>`，而是创建一个`ContiguousSet<Integer>`- 但由于它`Iterable<Integer>`是按顺序实现的，因此它主要适用于我的目的。
*   **intStreamRange**：下面[Vladimir 的答案](https://stackoverflow.com/a/22829036/149138)中给出的代码，它使用`IntStream.rangeClosed()`- 在 Java 8 中引入。
*   **streamIterate**：下面[Catalin 的答案](https://stackoverflow.com/a/36114723/149138)中给出的代码也使用`IntStream`了 Java 8 中引入的功能。

以下是每秒千次操作的结果（数字越大越好），对于上述所有大小为 10 的列表：

[![列表创建吞吐量](../Images/968b045e86a751442e9a6f9f1045ae57.png)](https://i.stack.imgur.com/j830l.png)

...对于大小为 10,000 的列表，再次：

[![在此处输入图像描述](../Images/e53b0735e3558efea36006333e49e004.png)](https://i.stack.imgur.com/zdxOz.png)

最后一张图表是正确的——除了 Eclipse 和 Guava 之外的解决方案都太慢了，甚至无法获得单个像素条！快速解决方案比其他解决方案快 10,000 到 20,000*倍*。

当然，这里发生的事情是 guava 和 eclipse 解决方案实际上并没有具体化任何类型的 10,000 个元素列表 - 它们只是围绕起点和终点的固定大小的包装器。每个元素都是在迭代期间根据需要创建的。由于我们实际上并没有在这个测试中进行迭代，因此成本被推迟了。所有其他解决方案实际上都在内存中实现了完整列表，并在仅创建基准测试中付出了沉重的代价。

让我们做一些更现实的事情，并遍历所有整数，对它们求和。因此，在`IntStream.rangeClosed`变体的情况下，基准看起来像：

```
@Benchmark
public int intStreamRange() {
    List<Integer> ret = IntStream.rangeClosed(begin, end).boxed().collect(Collectors.toList());  

    int total = 0;
    for (int i : ret) {
        total += i;
    }
    return total;  
} 
```

在这里，图片变化很大，尽管非物化解决方案仍然是最快的。这里的长度=10：

[![List<Integer> 迭代（长度=10）](../Images/a5f9a6d83818a8a35096f209bcc9168f.png)](https://i.stack.imgur.com/VQDYA.png)

... 并且长度 = 10,000：

[![List<Integer> 迭代（长度=10,000）](../Images/b9bda0d35bb8ed0414d5678275ff8812.png)](https://i.stack.imgur.com/LWWtu.png)

许多元素的长时间迭代使事情变得更加平衡，但是即使在 10,000 个元素的测试中，eclipse 和番石榴仍然保持两倍以上的速度。

因此，如果你*真的*想要一个`List<Integer>`，eclipse 集合似乎是最好的选择——但当然，如果你以更原生的方式使用流（例如，忘记`.boxed()`并减少原始域），你最终可能会比所有这些更快变体。

* * *

¹也许除了错误处理之外，例如，如果`end`< `begin`，或者大小超过某些实现或 JVM 限制（例如，数组大于`2^31-1`.

* * *

## 回答 #1

> 赞同：246
> 
> 时间：2014-04-03T06:00:08.097

使用 Java 8，它非常简单，甚至不再需要单独的方法：

```
List<Integer> range = IntStream.rangeClosed(start, end)
    .boxed().collect(Collectors.toList()); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-04-20T08:07:54.907

好吧，这一个班轮可能符合条件（使用[Guava Ranges](https://github.com/google/guava/wiki/RangesExplained)）

```
ContiguousSet<Integer> integerList = ContiguousSet.create(Range.closedOpen(0, 10), DiscreteDomain.integers());
System.out.println(integerList); 
```

这不会创建`List<Integer>`.，但`ContiguousSet`提供了几乎相同的功能，特别是实现`Iterable<Integer>`允许`foreach`以与`List<Integer>`.

在旧版本中（在 Guava 14 之前的某个地方）你可以使用这个：

```
ImmutableList<Integer> integerList = Ranges.closedOpen(0, 10).asSet(DiscreteDomains.integers()).asList();
System.out.println(integerList); 
```

两者都产生：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-03-20T14:04:12.273

以下单行 Java 8 版本将生成 [ 1, 2 ,3 ... 10 ]。第一个 arg of`iterate`是序列中的第一个 nr，第一个 arg of`limit`是最后一个数字。

```
List<Integer> numbers = Stream.iterate(1, n -> n + 1)
                              .limit(10)
                              .collect(Collectors.toList()); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-04-01T07:09:19.877

您可以使用[Eclipse Collections](http://www.eclipse.org/collections/)[`Interval`](http://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/impl/list/Interval.html)中的类。

```
List<Integer> range = Interval.oneTo(10);
range.forEach(System.out::print);  // prints 12345678910 
```

该类`Interval`是惰性的，因此不会存储所有值。

```
LazyIterable<Integer> range = Interval.oneTo(10);
System.out.println(range.makeString(",")); // prints 1,2,3,4,5,6,7,8,9,10 
```

您的方法将能够实现如下：

```
public List<Integer> makeSequence(int begin, int end) {
    return Interval.fromTo(begin, end);
} 
```

如果您想避免将整数装箱为整数，但仍希望使用列表结构，那么您可以使用Eclipse Collections 中[`IntList`](http://www.eclipse.org/collections/javadoc/8.0.0/org/eclipse/collections/api/list/primitive/IntList.html)的 with 。[`IntInterval`](http://www.eclipse.org/collections/javadoc/8.0.0/org/eclipse/collections/impl/list/primitive/IntInterval.html)

```
public IntList makeSequence(int begin, int end) {
    return IntInterval.fromTo(begin, end);
} 
```

`IntList`有方法`sum()`, `min()`, `minIfEmpty()`, `max()`, `maxIfEmpty()`,`average()`和`median()`在接口上可用。

**为清晰起见更新：2017 年 11 月 27 日**

An`Interval`是 a `List<Integer>`，但它是惰性且不可变的。它对于生成测试数据非常有用，尤其是在您处理大量集合时。如果您愿意，您可以轻松地将间隔复制到 a `List`，`Set`或者`Bag`如下所示：

```
Interval integers = Interval.oneTo(10);
Set<Integer> set = integers.toSet();
List<Integer> list = integers.toList();
Bag<Integer> bag = integers.toBag(); 
```

An`IntInterval`是 an `ImmutableIntList`which extends `IntList`。它也有转换器方法。

```
IntInterval ints = IntInterval.oneTo(10);
IntSet set = ints.toSet();
IntList list = ints.toList();
IntBag bag = ints.toBag(); 
```

An`Interval`和 an`IntInterval`没有相同的`equals`契约。

**[Eclipse Collections 9.0](https://github.com/eclipse/eclipse-collections/releases/tag/9.0.0)的更新**

您现在可以从原始流创建原始集合。有`withAll`和`ofAll`方法取决于你的喜好。如果你好奇，我会解释为什么我们都在[这里](https://medium.com/@donraab/preposition-preference-1f1c709b098b)。这些方法适用于可变和不可变的 Int/Long/Double Lists、Sets、Bags 和 Stacks。

```
Assert.assertEquals(
        IntInterval.oneTo(10),
        IntLists.mutable.withAll(IntStream.rangeClosed(1, 10)));

Assert.assertEquals(
        IntInterval.oneTo(10),
        IntLists.immutable.withAll(IntStream.rangeClosed(1, 10))); 
```

注意：我是 Eclipse Collections 的提交者

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-04-20T08:07:38.650

这是我使用 Core Java 可以得到的最短时间。

```
List<Integer> makeSequence(int begin, int end) {
  List<Integer> ret = new ArrayList(end - begin + 1);

  for(int i = begin; i <= end; i++, ret.add(i));

  return ret;  
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-04-20T08:09:36.377

你可以使用[番石榴范围](http://code.google.com/p/guava-libraries/wiki/RangesExplained "番石榴山脉")

你可以`SortedSet`通过使用

```
ImmutableSortedSet<Integer> set = Ranges.open(1, 5).asSet(DiscreteDomains.integers());
// set contains [2, 3, 4] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-15T07:28:06.323

```
int[] arr = IntStream.rangeClosed(2, 5).toArray();
System.out.println(Arrays.toString(arr));
// [2, 3, 4, 5]

Integer[] boxedArr = IntStream.rangeClosed(2, 5)
  .boxed().toArray(Integer[]::new);
System.out.println(Arrays.toString(boxedArr));

// Since Java 16
List<Integer> list1 = IntStream.rangeClosed(2, 5)
  .boxed().toList();
System.out.println(list1);

List<Integer> list2 = IntStream.rangeClosed(2, 5)
  .boxed().collect(Collectors.toList());
System.out.println(list2);

List<Integer> list3 = Arrays.asList(boxedArr);
System.out.println(list3);

List<Integer> list4 = new ArrayList<>();
IntStream.rangeClosed(2, 5).forEachOrdered(list4::add);
System.out.println(list4); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-20T08:28:24.090

这是我能找到的最短的。

列表版本

```
public List<Integer> makeSequence(int begin, int end)
{
    List<Integer> ret = new ArrayList<Integer>(++end - begin);

    for (; begin < end; )
        ret.add(begin++);

    return ret;
} 
```

阵列版本

```
public int[] makeSequence(int begin, int end)
{
    if(end < begin)
        return null;

    int[] ret = new int[++end - begin];
    for (int i=0; begin < end; )
        ret[i++] = begin++;
    return ret;
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-04-20T08:29:26.977

这个可能对你有用....

```
void List<Integer> makeSequence(int begin, int end) {

  AtomicInteger ai=new AtomicInteger(begin);
  List<Integer> ret = new ArrayList(end-begin+1);

  while ( end-->begin) {

    ret.add(ai.getAndIncrement());

  }
  return ret;  
} 
```

# php - Magento 静态块图像所见即所得上传

> ID：10242382
> 
> 赞同：0
> 
> 时间：2012-04-20T07:59:24.640
> 
> 标签：php, zend-framework, magento, upload

当上传 magento 静态块中的图像或 WYSIWYG 中的页面时，我得到返回的错误，它闪烁得非常快。

![在此处输入图像描述](../Images/96e23e7b521d2eddfc82be3cf252ad60.png)

Magento 版本：1.6.2 媒体目录有 CHMOD 777 递归

图像在产品/目录图像中上传良好。

非常感谢帮助

# iphone - 如何将一些值从 detailView 发送到 splitView 控制器中的 masterView？

> ID：10242383
> 
> 赞同：0
> 
> 时间：2012-04-20T07:59:33.070
> 
> 标签：iphone, ios, ipad, uisplitviewcontroller

我在 masterView 上有一个表格，在 detailView 上有一些按钮。所以当我点击一些按钮时，基于按钮点击masterTable应该加载？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:02:36.277

你可以设计一个界面为** detailViewDelegate**

然后在** masterView**中实现

# objective-c - 在越狱的 iOS 上访问文件系统

> ID：10242386
> 
> 赞同：0
> 
> 时间：2012-04-20T07:59:40.620
> 
> 标签：objective-c, ios, file-upload, jailbreak

简短的问题：

有没有办法从越狱的 ios 应用程序中调用根文件系统（类似于 iFile），以便将文件从本地设备上传到服务器？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:11:25.087

哇，我不敢相信自四月以来没有人回答。可能您已经找到了解决方案，但无论如何：是的，您可以。查看`NSFileManager`课程：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/)

根据您是否有文本文件或二进制文件，您需要分别签出`NSString`或`NSData`（Apple 文档中提供了更多信息）。

只需确保您的应用程序不是从`/var/mobile/Applications`目录运行，而是从`/var/stash/Applications`.

# java - 使用java通过tomcat服务器发送短信

> ID：10242387
> 
> 赞同：-1
> 
> 时间：2012-04-20T07:59:47.850
> 
> 标签：java, tomcat, sms, sms-gateway

我正在尝试通过短信网关使用 java 发送短信。我找到了以下代码来发送短信`tomcatserver`。[这是源代码](http://www.nowsms.com/discus/messages/1/24573.html)。在我的 windows xp 中，tomcat 在端口 8084 上运行，并且在运行 java 类时，即`sendSMS.java`我得到以下信息：

```
D:\>javac sendSMS.java
 D:\>java sendSMS
 phone------>8366xxxx
 message---->SendMsg+via+Now.SMS
url string->http://localhost:8084/?PhoneNumber=8366xxxx&Text=SendMsg+via+Now.SMS
Opened Con->sun.net.www.protocol.http.HttpURLConnection:http://localhost:8084/?P
honeNumber=8366xxxx&Text=SendMsg+via+Now.SMS
Get Resp  ->OK 
```

`In sendSMS.java i just gave my mobile number and changed url from 8800 to 8084`.

但是我的手机号码+91xxxxxxxxxx 没有收到短信。我哪里错了？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:47:32.980

*   首先尝试从Web界面发送，`http://127.0.0.1:8800`您可以通过按Web选项卡访问，然后访问nowsms网关的Web界面。您将到达发送短信网页，在TO文本框中提供手机号码，在TEXT文本框中提交消息将从网关接收消息，并将显示已发送消息的计数。

# api - Trello API 获取卡片评论

> ID：10242393
> 
> 赞同：21
> 
> 时间：2012-04-20T08:00:11.517
> 
> 标签：api, trello

有没有办法通过 Trello API 获取卡片的所有评论？我可以得到卡片、它所在的列表、分配给它的成员等，但看不到获取评论的方法。

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-20T18:30:39.477

评论是一种操作（“commentCard”），因此请查看 /card/:id/actions

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-12-16T09:36:25.567

试试这个 API URL

方法：`GET`

[https://api.trello.com/1/cards/{card_Id}/actions?filter=commentCard&key={trellokey}&token={trellotoken}](https://api.trello.com/1/cards/%7Bcard_Id%7D/actions?filter=commentCard&key=%7Btrellokey%7D&token=%7Btrellotoken%7D)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-03T07:49:37.743

GET /1/cards/[card id or shortlink]/actions

您将获得 json 中的动作对象列表，每个对象都有其类型，注释类型为“commentCard”，注释文本在

```
object.data.text 
```

[https://trello.com/docs/api/card/index.html#get-1-cards-card-id-or-shortlink-actions](https://trello.com/docs/api/card/index.html#get-1-cards-card-id-or-shortlink-actions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-20T12:53:15.353

```
Trello.actions.get(action.id + "/data", function() {}) 
```

似乎用client.js为我做。希望有帮助:)

# c# - 从 datagridview 单元格添加值

> ID：10242395
> 
> 赞同：0
> 
> 时间：2012-04-20T08:00:13.153
> 
> 标签：c#, datagridview

我有值为 0 的 datagridview；11,4; 2,3……；

例如，如何从两个单元格添加值并将其发送到第三个单元格？

```
 dataGridView1[3, 0].Value = Convert.ToInt16(dataGridView1[1, 0].Value) + Convert.ToInt16( dataGridView1[2,0].Value); 
```

但这不起作用

所以例如在下一个单元格中，我将有 11,4+2,3=13,7。

问题在于从 datagridview 单元格中添加浮点值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:03:25.897

我认为应该是：

```
+ Convert.ToInt16( dataGridView1[i+1,0].Value); // +1 
```

代替

```
+ Convert.ToInt16( dataGridView1[i+2,0].Value); 
```

您正在将 index 处的单元格和 index 处的单元格之和的结果分配给`i+0`index`i+2`处的单元格`i+2`。我认为您想将`i+0`和分配`i+1`给 index 处的单元格`i+2`。

```
[ i+2] = [ i ] + [ i+1 ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:05:48.517

```
foreach (DataGridViewRow row in dataGridView1.Rows) {
 row.Cells["col3"].Value = decimal.Parse(row.Cells["col1"].Value.ToString()) + 
                           decimal.Parse(row.Cells["col2"].Value.ToString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:17:18.683

当你有浮点数时，为什么要转换为 INT？试试用这个

```
dataGridView1[3, 0].Value = Convert.ToDouble(dataGridView1[1, 0].Value) + Convert.ToDouble(dataGridView1[2, 0].Value); 
```

# android - 如何在 Android 上包含预建库？

> ID：10242398
> 
> 赞同：0
> 
> 时间：2012-04-20T08:00:19.410
> 
> 标签：android, include-path

我有 2 个用于 android 的预构建 libFOO.so 库。我已将它们复制到：

```
Projectfolder/lib/armeabi/libFOO.so

Projectfolder/lib/armeabi/libFOO2.so

Projectfolder/lib/armeabi-v7a/libFOO.so

Projectfolder/lib/armeabi-v7a/libFOO2.so 
```

问题是，当我构建 .apk 时，我什至没有“lib”文件夹！如何让 eclipse 在 .apk 中包含这些库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:21:56.997

尝试将`lib`文件夹重命名为`libs`. 这适用于我们的项目。尽管如此，这会产生一个`lib`文件夹，其中包含 .apk 包中的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:11:18.883

我认为您必须将外部库放在`application`标签下的 manifest.xml 中。

前任 ：`<uses-library android:name="com.your.external.package" />`

# javascript - 如何添加要在不同位置的同一事件上运行的多个函数

> ID：10242406
> 
> 赞同：1
> 
> 时间：2012-04-20T08:01:01.677
> 
> 标签：javascript, events

所以，这是我的问题。我希望能够从文档中的不同位置添加“onevent”。下面更好地解释。

假设我有一个触发器“onblur='alert(this.value)'”的输入

```
<input type="text" onblur="alert(this.value)" id="MyInput" /> 
```

但也许稍后我决定要在警报之后添加一个要触发的额外事件 - 也可以从 DOM 中的其他地方“onblur”。像下面

```
<script type="text/javascript">
  function attachOnBlurToSomething (id)
  {
    document.getElementById(id).onBlur = function () {
      alert("Another alert!");
    };
  }

  attachOnBlurToSomething ("MyInput");
</script> 
```

以上当然只是公牛代码。但情况是一样的。在这种情况下会发生什么是我会得到“另一个警报！” 关于模糊。但我希望他们两个都跑。以什么顺序并不重要。怎么样？

谢谢，安东

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:04:39.440

使用[`addEventListener`](http://alert%28%22Another%20alert!%22%29;)（或[`attachEvent`](http://msdn.microsoft.com/en-us/library/ms536343%28VS.85%29.aspx)在必要时 - 在 IE < 9 中）：

```
document.getElementById(id).addEventListener("blur", function() {
    alert("Another alert!");
}, false); 
```

通过这样做，您可以摆脱任何内联事件处理程序（如您当前的`onblur`属性），这通常被认为是不好的做法。

这也意味着您可以为同一事件注册任意数量的事件处理程序。

# javascript - 使用 RegExp 转换 JSON 键值

> ID：10242420
> 
> 赞同：1
> 
> 时间：2012-04-20T08:02:13.350
> 
> 标签：javascript, regex

我从服务器调用收到 JSON 字符串，格式如下：

```
{"0":{"jpgN":"2","spread_value":"392.22","relevant_new":"text"},"1":{"jpgN":"1","spread_value":"395.28","relevant_new":"text"},"count":2} 
```

使用 RegExp，有没有办法用字符串`"http://mydomain.com/keyValue.jpg"`（例如`"http://mydomain.com/2.jpg"`）替换任何键 jpgN 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:14:52.007

替换`"jpgN":"([^"]+)"`为`"jpgN":"http://mydomain.com/$1.jpg"`。

但最好使用您的编程语言解析 json 并更改值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:12:38.247

类似的东西？

```
var json = {"0":{"jpgN":"2","spread_value":"392.22","relevant_new":"text"},"1":{"jpgN":"1","spread_value":"395.28","relevant_new":"text"},"count":2};
var s = JSON.stringify(json);

s.replace(/\"jpgN\":\"(\w+)\"/g, "\"jpgN\":\"http://mydomain.com/$1.jpg\""); 
```

# android - 在Android中更改证书

> ID：10242423
> 
> 赞同：2
> 
> 时间：2012-04-20T08:02:20.563
> 
> 标签：android

是否可以更改 apk 的证书？
我的问题是，我已经获得了离开公司的开发人员的证书，并且他使用了自己的证书。我尝试给 apk 两个证书，像[这样](https://stackoverflow.com/questions/2881904/how-to-sign-an-apk-with-more-than-one-certificate)，但我不能更新旧的。

在我的研究中，我也发现[了这个](http://productforums.google.com/forum/#!category-topic/android-market/technical-help/nc6IJV8imlI)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T08:17:41.803

如果您已将应用程序发布到 Google Play，那么，抱歉，您无法为其更改证书。您现在只能将其发布为不同的应用程序（也可以使用不同的包名称）。谷歌明确指出，就像在文档中一样，在 IO 演示文稿中也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:17:50.913

同一应用程序的 Apk（即不同版本的应用程序）必须始终使用相同的证书/密钥签名。否则将被视为不同的应用程序

看到[这个](https://stackoverflow.com/a/4843261/1075066)和[这个](http://developer.android.com/guide/publishing/publishing.html#marketupgrade)

# python - 使用自定义字段扩展用户模型表单

> ID：10242424
> 
> 赞同：1
> 
> 时间：2012-04-20T08:02:29.297
> 
> 标签：python, django, django-forms

注册后，我想要求用户：

*   全名（我想将其保存为名字和姓氏）
*   公司名
*   电子邮件
*   密码

我在 StackOverflow 上阅读了几十个类似的情况。在 models.py 中，我像这样扩展 User 模型：

```
# models.py
class UserProfile(models.Model):
  company = models.CharField(max_length = 50)
  user = models.OneToOneField(User)

def create_user_profile(sender, instance, created, **kwargs):
  if created:
    profile, created = UserProfile.objects.get_or_create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

资料来源：[在 Django 中使用自定义字段扩展用户模型](https://stackoverflow.com/questions/44109/extending-the-user-model-with-custom-fields-in-django)

我还添加了：

```
# models.py

class SignupForm(UserCreationForm):
  fullname = forms.CharField(label = "Full name")
  company = forms.CharField(max_length = 50)
  email = forms.EmailField(label = "Email")
  password = forms.CharField(widget = forms.PasswordInput)

class Meta:
  model = User
  fields = ("fullname", "company", "email", "password")

def save(self, commit=True):
  user = super(SignupForm, self).save(commit=False)
  first_name, last_name = self.cleaned_data["fullname"].split()
  user.first_name = first_name
  user.last_name = last_name
  user.email = self.cleaned_data["email"]
  if commit:
    user.save()
  return user 
```

在views.py中：

```
# views.py

@csrf_exempt
def signup(request):
  if request.method == 'POST':
    form = SignupForm(request.POST)
    if form.is_valid():
      new_user = form.save()
      first_name, last_name = request.POST['fullname'].split()
      email = request.POST['email']
      company = request.POST['company'],
      new_user = authenticate(
        username = email,
        password = request.POST['password']
      )
      # Log the user in automatically.
      login(request, new_user) 
```

现在，它不存储公司名称。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:05:49.440

```
user_profile = new_user.get_profile()
user_profile.company = company
user_profile.save() 
```

不要忘记在设置中配置您的 UserProfile 类，以便 Django 知道在 user.get_profile() 上返回什么

# xml - 在 XML 文件中设置对打包到存档中的 XSLT 和 XSD 文件的引用

> ID：10242429
> 
> 赞同：0
> 
> 时间：2012-04-20T08:02:51.777
> 
> 标签：xml, xslt, xsd

是否可以在 XML 文件中设置对打包到某个存档中的 XSLT 和 XSD 文件的引用？如果是这样，你怎么能做到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:24:00.623

据我所知，没有通用的、独立于平台的、可互操作的方式来设置它。

每个框架（Java、.NET 等）都有自己的开箱即用方法（或没有），这通常与：

*   支持[的 URI 方案](http://en.wikipedia.org/wiki/URI_scheme)
*   XML 解析器如何解析外部引用；
*   支持外部[引用](https://stackoverflow.com/questions/9605767/produce-xml-files-that-inherit-from-other-xml-files)。

它还很大程度上取决于您希望这些引用如何为您工作，您希望这些引用看起来如何，这决定了如何在解析时解决这些问题。

如果您希望 XML 解析器完成所有工作，您可能需要查看 XInclude 等，使用您的存档支持的 URI 方案；如果有，例如在 Java 中，您可以尝试 jar://，那么这就是您的解决方案。

如果您的方案不受支持，但您的平台允许为 URI 方案定义新的处理程序或覆盖现有的处理程序，那么可能只需使用您的客户处理程序即可解决。

另一种选择是为您构建自己的辅助“服务”，以增强标准解析，并在此期间扫描 XML 以查找您的特定外部引用节点，并将这些引用节点替换为从您的外部引用中提取的内容，来自您的档案。

我看到的唯一另一个严重问题是当您的 XSLT 和 XSD 是跨多个文件创作时。

# iphone - 有没有办法将核心数据中的字符串和图像导出到cvs中，可以从itunes中提取出来？

> ID：10242436
> 
> 赞同：1
> 
> 时间：2012-04-20T08:03:17.600
> 
> 标签：iphone, objective-c, ios, ios5, cocos2d-iphone

我正在开发应用程序，该应用程序需要将保存的数据从核心数据提取到 CVS 文件中的功能。另外，我们如何从 iTunes 中获取 CVS 文件到我们的系统中？

如果工作成功，我也可以选择 SQLite。

我一直在谷歌上搜索，但没有得到可以正常工作的所需解决方案。

请帮我解决这个问题，您的任何帮助都将是可观的。

谢谢

# jquery - 如何在jquery中传递变量容易确认

> ID：10242437
> 
> 赞同：0
> 
> 时间：2012-04-20T08:03:21.763
> 
> 标签：jquery

通过使用 javascript confim，我已经完成了暂停。现在我想把它变成 jquery 容易确认我该怎么做

该函数在循环中被调用

我的 PHP 代码：

```
function prepareRow( $flag, $Id )
{
$rowResponse = '<tr>    
                    <td style="width:12%"> ' . $Id . ' </td>
                    <td><a href="javascript:void(0);" id="suspend" ></a> </td>
                </tr>'; 
return  $rowResponse            
} 
```

Jquery 轻松确认链接：[http ://projectshadowlight.org/jquery-easy-confirm-dialog/](http://projectshadowlight.org/jquery-easy-confirm-dialog/)

我试过这样，但如果点击“是”，我想将“$id”传递给它。这样我就可以暂停行。

请帮帮我

```
$("#suspend").easyconfirm({locale: {
    title: 'Are you sure?',
    text: 'Are you sure, you want to suspend?',
    button: ['No',' Yes'],
    closeText: 'Close'
}});

$("#suspend").click(function() {
    $.post("suspend.php", { "Id" : Id }, 
            function(data){
                $.ajax({
                    type:"POST",
                    url: "prepareTable.php",
                    success: function(data){
                    $("#example").html(data);
                }
                });
            });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:06:53.417

我想你需要寻找当你按下是或否按钮时会发生的回调。我会使用[http://tutorialzine.com/2010/12/better-confirm-box-jquery-css3/](http://tutorialzine.com/2010/12/better-confirm-box-jquery-css3/)你可以看到： `'action': function(){}`你在哪里指定按是或否后要做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:03:57.507

我在本地系统中尝试过有关 jquery easy confirm 的示例，发现其中有错误。所以我不再担心这个问题并使用了jConfirm。

# extbase - 保存 ExtBase 模型后如何获取 ID？

> ID：10242439
> 
> 赞同：3
> 
> 时间：2012-04-20T08:03:30.423
> 
> 标签：extbase

创建模型并将其添加到存储库后，我希望将新 ID 用于不同目的（创建邮件，更新 Extbase 世界之外的其他字段）

```
$page = t3lib_div::makeInstance('Tx_MyExt_Domain_Model_Page');
$page->setTitle('Hello World');
$this->pageRepository->add($page); 
```

此时`$page`还没有ID，uid为null。

```
$page->getUid(); // returns null 
```

它什么时候得到它？我怎样才能在运行时检索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T23:17:03.850

在 ExtBase 中，对象是“管理的”。这意味着每个持久性事务（添加/删除/更新）都只是在底层逻辑中记录下来，但直到适当的时间（如处理请求结束）才执行。因此，仅仅因为您将对象添加到存储库并不意味着它实际上已添加。这实际上发生在一次`$persistenceManager->persistAll()`被调用的情况下，这不是您需要手动执行的操作。关键是，您的`$page`对象在保存之前不会有 UID，这就是`$page->getUid()`返回 null 的原因。[在这里寻找一个很好的解释。](http://docs.typo3incubator.org/ExtbaseFluidBook/_build/html/3-BlogExample/12-automatic-persistence-of-the-domain-logic.html?highlight=persist)

我怀疑您正在尝试在 ExtBase 对象/MVC 生命周期之外做一些事情。至少，上次`null`我尝试获取对象的 UID 时，是因为我没有在框架内正确操作。

但是，如果您发布更多代码并向我们提供您想要实现的目标的更大图景，也许我们可以帮助您了解该对象实际上具有 UID。例如，如果您在 Controller 对象中，请告诉我们您在哪个 Action 方法中，或者如果您在 Repository 对象中，请告诉我们您要从存储库中获取什么以及您计划的位置/方式关于使用查询结果。

**编辑**

只是在这里猜测，但我假设您在控制器的某些操作中执行此代码。由于在执行控制器后会呈现视图，因此您只需将页面对象传递给视图：

```
$this->view->assign('page', $page); 
```

然后在您的视图中，您可以在链接中使用页面对象：

```
<f:link.action action="show" arguments="{page:page}">
    See this page object
</f:link.action> 
```

然后在控制器的显示操作中，您可以显示页面：

```
public function showAction(Tx_MyExt_Domain_Model_Page $page) {
    // Do whatever you need to show the page in the `Show.html` template
} 
```

我真的只是在这里猜测。如果你能给我们一个更大的了解你想要做什么，你的行动方法应该做什么以及类似的事情，我们可以更自信地回答你的问题。

*（我还假设您的页面对象不是常规 TYPO3 页面的替代品，并且它们完全不同。通过后端接口处理这些 TYPO3 页面比在 php 级别更容易。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T11:02:29.723

您可以像这样在您的控制器中显式调用持久性管理器

```
#TYPO3 4.x
$persistenceManager = $this->objectManager->create('Tx_Extbase_Persistence_Manager');
$persistenceManager->persistAll();

#TYPO3 6.x
$persistenceManager = \TYPO3\CMS\Core\Utility\GeneralUtility::makeInstance('TYPO3\CMS\Extbase\Persistence\Generic\PersistenceManager');
$persistenceManager->persistAll(); 
```

# c# - 为什么没有引发“除以零”或任何其他异常？

> ID：10242441
> 
> 赞同：28
> 
> 时间：2012-04-20T08:03:39.430
> 
> 标签：c#, .net, linq, ieee-754

我有一个`double[]`正在执行 LINQ 操作的：

```
MD = MD.Select(n => n * 100 / MD.Sum()).ToArray(); 
```

在某些情况下， 的所有元素`MD`都为 0，然后`Sum`也为零。然后`0 * 100 = 0 / 0`，但它没有给出除零异常或任何异常。为什么会这样？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-20T08:05:25.610

尝试这个：

```
double x = 0.0;
double y = 1.0;
double z = y / x; 
```

这也不会抛出异常：它将保持`z`正无穷大。这里没有特定于 LINQ 的内容 - 它只是 IEEE-754 浮点算术行为。

在您的情况下，您将零除以零，因此您最终得到的不是数字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T11:44:57.577

IEEE-754 浮点运算：

```
using System;
using System.Linq;

namespace ConsoleApplication1 {
    internal class Program {
        private static void Main() {
            var MD = new double [] {0, 0, 0, 0, 0};
            var result = MD.Select(n => n*100/MD.Sum()).ToArray();
            foreach (var item in result) {
                Console.WriteLine(item);
            }
            Console.ReadLine();
        }
    }
} 
```

输出：

```
NaN
NaN
NaN
NaN
NaN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:05:33.880

是`Sum`零是因为`MD`不包含任何元素吗？在这种情况下，不会执行 lambda 表达式。

# php - Mysql查询匹配月份和年份

> ID：10242443
> 
> 赞同：0
> 
> 时间：2012-04-20T08:03:52.213
> 
> 标签：php, mysql

我有 4 个字段的表单，即（开始月份、开始年份、结束月份、结束年份）和 MySQL 表结构就像 id、客户 id、金额、月份、年份

现在，我需要在开始月份和年份以及结束月份和年份之间显示具有匹配条件的行。

我试过这个查询

```
select id,customer id,concat(month,'-',year) as d1 from payroll where
empid='$_POST[emp_id]' and (STR_TO_DATE(d1,'%m-%Y') between
STR_TO_DATE('$_POST[fmonth]-$_POST[fyear]','%m-%Y') and
STR_TO_DATE('$_POST[tmonth]-$_POST[tyear]','%m-%Y')) 
```

请指教....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:35:33.603

假设列`year`和`month`4 个表单字段是整数，这将起作用：

```
SELECT id
     , customer id
     , CONCAT(month, '-', year) AS d1 
FROM payroll 
WHERE empid = '$_POST[emp_id]' 
  AND (year, month) >= ( '$_POST[fyear]', '$_POST[fmonth]' ) 
  AND (year, month) <= ( '$_POST[tmonth]', '$_POST[tyear]' ) 
```

* * *

出于安全原因（SQL 注入） ，您可能应该`$_POST[]`在将它们发送到数据库之前处理它们。

一个复合索引`(empid, year, month)`将有助于性能。

# jquery - 使用 jquery 选择包含 (Anchor) 标记的 td

> ID：10242446
> 
> 赞同：4
> 
> 时间：2012-04-20T08:04:08.350
> 
> 标签：jquery, html

我有一个 HTML 代码，如下所示。我想`a`使用 jQuery 选择所有包含 (anchor) 作为直接子级 (Here First TD tag) 的 td。

```
<table>
  <tr>
    <td><a href="abc.aspx">ABC</a></td>
    <td>Second Level<span> >> </span>
        <div>
          <table>
             <tr>
               <td><a href="efg.aspx">EFG</a></td>
             </tr>
          </table>
        </div>
    </td>
 </tr> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T08:06:07.143

### 描述

很多方法可以做到这一点

您可以使用父 css 选择器或 jQuery 的`parent()`函数。查看示例和这个[jsFiddle 演示](http://jsfiddle.net/Xrfet/)

### 样本

1.  `​$("td > a").parent()`
2.  `$("td > a:parent")`

### 更多信息

*   [jQuery - ：父选择器](http://api.jquery.com/parent-selector/)
*   [jQuery - 父（）](http://api.jquery.com/parent/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T08:05:48.847

这应该可以解决问题：

```
$("td > a").parent(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T08:26:31.253

请记住，jQuery 有`:has()`伪选择器。

```
$('td:has(> a)') 
```

这将选择所有`<td>`具有直接`<a>`子元素的元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T08:08:23.430

使用 css 子选择器选择锚点以检查锚点是否是 td 的子项，然后调用父项

```
$('td > a').parent(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T08:06:37.807

就像是

```
$('td').filter(function(){
    if($(this).children('a').length > 0){
        return this;
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T08:09:36.060

如果你给你的桌子一个#id，你可以做这样的事情：

```
$(function(){
    myTds = [];
    $('#mytable td>a').each(function(){
        myTds.push($(this).parent())
    })

//do stuff with your tds
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-20T08:10:16.910

```
var listOfTD = $("table td > a").parent(); 
```

这使您所有的 td 都具有锚定作为直接子项，从表中。我的建议是给表提供 id 而不是你应该写的：

```
var listOfTD = $("#tableid td > a").parent(); 
```

# perl - 如何离线安装 Perl

> ID：10242451
> 
> 赞同：1
> 
> 时间：2012-04-20T08:04:39.727
> 
> 标签：perl, installation, offline, perlbrew

我有一台无法访问 Internet 的 Linux 服务器（访问被防火墙阻止）。我想安装一个新的 Perl。我有什么选择，最好的方法是什么？系统 Perl（包括在 OS 安装中）必须保持不变。

我一直在使用 perlbrew，我认为这是进行在线安装的最佳方式。但是 perlbrew 中涉及的所有步骤似乎都需要互联网访问：您从网上下载它，它从网上下载新的 Perl 版本等，我还没有找到如何让它离线工作的胶水。

如果 perlbrew 没有问题，我可以将 Perl 从源代码构建到服务器上的自定义位置。我认为这最终可能会变得复杂、耗时且容易出错。每次更新 Perl 时，我都会手动创建一个新版本。

还有其他我目前不知道的安装方式。当然，我可以坚持使用 Perl 系统，但它是一个过时的版本，而且我已经在使用新的语法特性。或者我可以开始协商更改防火墙策略以允许 perlbrew 访问 Internet。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T09:06:01.663

> 但是 perlbrew 中涉及的所有步骤似乎都需要互联网访问

如果配置正确，则不会。

要离线安装 perlbrew 本身，请安装[App-perlbrew](https://metacpan.org/release/App-perlbrew) dist。手动跟踪[其依赖](http://deps.cpantesters.org/?module=App%3A%3Aperlbrew)项是一件苦差事，因此[请准备一个 MiniCPAN 镜像](http://p3rl.org/minicpan)（`-p`包括 Perl dists），将其转移到目标机器并[配置 CPAN 以使用本地镜像](http://p3rl.org/CPAN#The-urllist-parameter-has-CD-ROM-support)。运行`cpan App::perlbrew`安装。

安装 perlbrew 后，运行其[`mirror`命令](http://p3rl.org/perlbrew#COMMAND%3a-MIRROR)将 CPAN 镜像配置为`$PERLBREWROOT/Config.pm`. 编辑此文件以将其更改为本地 MiniCPAN 镜像。将 Perl dist tarball 放入`$PERLBREWROOT/dists/`.

* * *

请注意，编译 Perl 需要一个有效的 C 编译器工具链，以及可选的 libdb (BerkeleyDB) 和 gdbm 的开发文件。（再次阅读该[`INSTALL`](http://search.cpan.org/dist/perl/INSTALL)文件，即使 perlbrew 的自动配置和 Perl 的`configure.SH`默认设置对您隐藏了这些细节。）

离线获取编译器工具链可能要困难得多，除非之前已经使用操作系统安装来编译其他 C 内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T11:39:46.433

perlbrew 没有什么特别之处。如果您不打算使用它来下载 Perl 源代码，那么它不会为您节省太多。一旦你有了 Perl 源代码，你只需要配置和安装它：

```
% ./Configure -des -Dprefix=/path/to/installation
% make install 
```

完成后，该 Perl 的所有内容都在该安装路径下。

我不喜欢 perlbrew 主要是因为它向人们隐藏了这个任务是多么简单，所以他们觉得他们无法自己完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T09:53:42.363

你有没有考虑从不同的方向攻击它？如果您每次都必须请求互联网访问，那么保持最新状态将是一件痛苦的事情。同样，如果您错过/错误配置了 CPAN 镜像中的任何软件包，一旦您实际尝试使用它们就很难纠正。

也许只是用精简的 linux + perl + 模块构建一个小型 VM。保持最新状态，然后将全部内容保存在 USB 记忆棒上。您将拥有一个众所周知的易于安装的安装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T06:34:16.517

我个人所做的是在我离线（而不是在度假）时使用 git checkout 。一旦你有了整个 git 工作目录，通过检查标签来构建任何发布的版本是微不足道的：

```
git checkout v5.17.4
git clean -f # cleanup previously compiled .o files etc
sh ./Configure ... 
```

根据您如何将文件传输到您的主机，这可能很方便，因为您还可以在那里设置一个私人 git 存储库，以便其他计算机可以`git push`在那里进行新的提交。

# jquery - jQuery 移动子页面 (data-role='page') 不是 body 的直接子页面

> ID：10242454
> 
> 赞同：2
> 
> 时间：2012-04-20T08:04:56.133
> 
> 标签：jquery, jquery-mobile

在我的情况下，我在运行时从服务器加载不同的子页面，并且那些有容器（div）进行这些加载。然后容器 div 将子页面（具有 data-role='page' 的 div）保存在 div 中。

显然，如果 subpage-div 不是 body 的直接子级，则导航不起作用。

我弄错了吗？有解决方案吗？

```
<body> 

<!-- Start of first page -->
<div data-role="page" id="foo">

    <div data-role="header">
        <h1>Foo</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <p>I'm first in the source order so I'm shown as the page.</p>      
        <p>View internal page called <a href="#bar">bar</a></p> 
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->

<div class="container">
    <div data-role="page" id="bar">

        <div data-role="header">
            <h1>Bar</h1>
        </div><!-- /header -->

        <div data-role="content">   
            <p>I'm the second in the source order so I'm hidden when the page loads. I'm just shown if a link that references my ID is beeing clicked.</p>      
            <p><a href="#foo">Back to foo</a></p>   
        </div><!-- /content -->

        <div data-role="footer">
            <h4>Page Footer</h4>
        </div><!-- /footer -->
    </div><!-- /page -->
</div>

<!-- Start of second page -->

</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T08:11:12.587

您是否使用插件来执行此操作？

因为 Jquery Mobile 默认只通过 Ajax 加载 FIRST div-data-role-page 的内容。除非它是您的第一页，否则应该完全加载。其他所有内容（头、脚本、您的 container.class 都不会被加载。

[请参阅文档中的](http://jquerymobile.com/test/docs/pages/page-navmodel.html)已知限制。

要解决此问题，您可以使用[JQM 子页面插件](https://github.com/ToddThomson/jQuery-Mobile-Subpage-Widget)或[JQM 多视图插件](https://github.com/frequent/multiview)（仍在开发中）。

两者都允许您在包装 JQM 页面中加载子页面或嵌套页面。它必须是这样的，因为如果您将附加页面放在“包装器”JQM 页面之外，JQM Ajax 将不会加载它们。

**编辑：**
基于以下评论：

如果您使用多视图，您可以像这样构建您的页面，尽管这会将所有页面包装在您的容器类中。这可能吗？

```
 <div data-role="page" data-wrapper="true" id="your_wrapper_page" class="CONTAINER">
    <div data-role="header">
       <p>global header acrolls all pages</p>
    </div>
    <div data-role="panel" data-id="main" data-panel="main" data-hash="history">
        <div data-role="page" id="main_first" data-show="first">
            <div data-role="header" data-position="fixed" data-theme="a">
                <h1>First Page LOCAL HEADER</h1>
            </div>
            <div data-role="content" class="yellow">
                <p>Content</p>
            </div>
            <div data-role="footer">
                <p>first page local footer</p>
            </div>
        </div>
        <div data-role="page" id="main_second">
            <div data-role="header" data-theme="a" data-position="fixed">
                <h1>Second Page LOCAL HEADER</h1>
            </div>
            <div data-role="content" class="brown">
                <div>Lorem Ipsum</div>
            </div>
            <div data-role="footer">
                <p>second page local footer</p>
            </div>
        </div>
    </div>
    <div data-role="footer">
        <p>global footer acrolls all pages</p>
    </div>
</div> 
```

或者，您可以使用弹出面板，您可以在内容部分之后在包装页面内嵌套，但必须强制覆盖多视图中的一些内容以使弹出/弹出窗口全屏。

请注意，我仍在努力使面板转换与 JQM 1.1 保持一致。所以需要一些时间。

除此之外，您必须提出自己的解决方案，因为我认为 JQM 不是这样工作的。

问题是，您是否可以在没有 .container 的情况下工作？

# qt - Qt 创建者无法创建 Windows 应用程序

> ID：10242455
> 
> 赞同：1
> 
> 时间：2012-04-20T08:04:57.463
> 
> 标签：qt, qt-creator

在我的 Ubuntu 上安装 QT creator 时，我能够创建简单的控制台应用程序 gui 应用程序等。但是当我将它安装在我的 windows 上并尝试创建一个项目时，QT 要求目标：Symbian、Qt 模拟器、Harmattan

但我需要一个简单的 win 控制台应用程序。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:10:19.140

您确定您安装了正确版本的 Qt SDK 吗？曾经有一个单独的“诺基亚 Qt SDK”，它只包含移动目标的库。

[此链接](http://qt.nokia.com/downloads/sdk-windows-cpp)应始终将您指向完整 Windows SDK 的最新安装程序。

# javascript - ember.js - 创建新模型的正确控制器/视图模式是什么

> ID：10242467
> 
> 赞同：21
> 
> 时间：2012-04-20T08:05:52.387
> 
> 标签：javascript, ember.js

我有一个应用程序，它目前包含同一模型的对象的视图。它们从服务器检索，循环并使用 add 方法添加到列表控制器

```
<script>
App.Controllers.List = Em.ArrayProxy.create({
  content: Ember.A([]),
  add: function(obj){
    this.pushObject(obj);
  }
});
</script> 
```

我现在正在处理用户创建一个新对象（在通过验证后）将被添加到列表并发送到服务器的部分。

我找不到任何关于通过输入表单创建新对象的最佳模式的示例。我可以看到一些选项，并且已经半实现了一些，但感觉都不对。

*   创建一个带有适当表单元素的视图和一个使用 .get() 从表单元素中检索到的各种属性来实例化模型的方法
*   在视图的内容中创建一个模型并将表单元素绑定到该模型。在视图中包含一个用于添加到控制器阵列/保存到服务器的方法
*   创建一个模型，将其添加到控制器数组并打开它进行编辑

我可以拼出我想要的功能，但我更愿意确保我了解最佳实践。

我目前有这样的东西（这是我列表中的第二个项目符号）

```
<script>
App.Views.ItemCreate = Em.View.extend({
  content: App.Models.Item.create({}),
  templateName: 'create',
  createButton: function(){

    var itemObj = this.get('content');
    var item = {};
    item.title = this.get('content').get('title');

    $.ajax({
      type: 'POST',
      url: '/test/data.json',
      data: item,
      dataType: 'json',
      success: function(responseData, textStatus, jqXHR) {
        App.Controllers.List.add(itemObj);
      }
    });
  }
});
</script>

<script type="text/x-handlebars" data-template-name="create">
  {{view Em.TextField id="create-title" valueBinding="content.title"}}
  <a href="#" {{action "createButton" }}>Create</a>
</script> 
```

非常感谢任何帮助

**笔记**

我已将正确答案更改为 pangratz 的。虽然其他回复直接回答了我的问题，但我相信那些通过谷歌找到这个的人应该参考 Pangratz 提供的答案，因为它不仅是好的 MVC，而且更像是 Ember-y :o)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-20T14:56:47.247

与服务器通信绝对是视图中不应该做的事情。这是控制器的用途。为了进一步分离应用程序的不同部分，我什至会考虑实现一个`DataSource`处理 AJAX 请求的方法。这种拆分使您的应用程序更具可测试性，并且每个组件都可重用。然后通过绑定来实现视图、控制器和数据源的具体连接。

您的案例的工作流程可能如下：

*   该视图显示您的编辑表单，其中的值绑定到控制器
*   视图处理一个保存动作，告诉控制器保存创建的对象
*   控制器将保存委托给 DataSource，然后最终启动 AJAX 请求
*   保存对象时通知控制器

您还应该查看[ember-data](https://github.com/emberjs/data)，它是客户端数据存储并为您处理所有样板文件。还可以看看[Ember.js 应用程序的架构 - 数据](http://jzajpt.github.com/2012/01/24/emberjs-app-architecture-data.html)和[EmberJS：在相当复杂的应用程序中很好地分离模型、商店、控制器、视图的关注点？](https://stackoverflow.com/questions/10118466/emberjs-good-separation-of-concerns-for-models-stores-controllers-views-in-a)

* * *

看法：

```
App.View.ItemCreate = Ember.View.extend({
  templateName: 'create',
  createObject: function(evt) {
    var object = this.get('content');
    var controller = this.get('controller');
    controller.createObject(object);
  }
}); 
```

控制器：

```
App.Controllers.List = Ember.ArrayProxy.extend({
  content: [],
  createObject: function(hash) {
    var dataSource = this.get('dataSource');
    dataSource.createObject(hash, this, this.createdObject);
  },
  createdObject: function(object) {
    this.pushObject(object);
  }
}); 
```

数据源：

```
App.DataSource = Ember.Object.extend({
  createObject: function(hash, target, callback) {
    Ember.$.ajax({
      success: function(data) {
        callback.apply(target, data);
      }
    });
  }
}); 
```

把所有东西粘在一起：

```
App.dataSource = App.DataSource.create();
App.listController = App.Controllers.List.create({
  dataSourceBinding: 'App.dataSource'
});

App.View.ItemCreate.create({
  controllerBinding: 'App.listController'
}).append(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T12:47:49.810

如果你想遵循严格的 MVC 模型，那么模型不应该在视图上创建，而是在控制器上创建。Ember 还很年轻，还没有任何定义的模式，我要做的就是将您的模型设置为视图的内容（正如您已经完成的那样），所有输入都绑定到不同的模型属性。然后当按下按钮时：

```
createButton: function(){
  App.Controllers.List.create(this.get('content')); 
} 
```

在控制器上：

```
create: function(model) {
  if model.valid() { //validates the model
    model.save({
      onSuccess: function(response) { // callback
        var item = App.Models.Item.create(response.item)
        App.controllers.List.add(item)
      }
    })
  } 
```

最后是模型：

```
save: function(options) {
  $.ajax({
    type: 'POST',
    url: '/test/data.json',
    data: item,
    dataType: 'json',
    success: options.onsuccess
  });
} 
```

这是其他 js 框架期望您工作的方式。感觉有点冗长和复杂，但它使事情保持在原位

# android - 无法启动组件信息 DatePicker

> ID：10242481
> 
> 赞同：2
> 
> 时间：2012-04-20T08:07:22.020
> 
> 标签：android

我正在使用选项卡，并且还使用单个选项卡使用多个活动。我面临一个问题，即当我从父类转到子类时，该类中有日期选择器，然后单击显示日期对话的按钮，从中可以选择日期。但是，当我单击该按钮（触发日期对话框）时，当以下“无法启动组件信息”需要帮助解决此问题时，我的应用程序崩溃

这是子活动代码

```
import java.util.Calendar;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.TextView;
public class PlaceOrder extends Activity {
    private TextView tvDisplayDate,personName,Cname,cAdrress;
    private DatePicker dpResult;
    private Button btnChangeDate;
    Button cancel;
    private int year;
    private int month;
    private int day;
    static final int DATE_DIALOG_ID = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.placeorder);
        personName=(TextView)findViewById(R.id.firstName);
        Cname=(TextView)findViewById(R.id.Cname);
        cAdrress=(TextView)findViewById(R.id.CAddname);
        personName.setText(AccountInfo.fnameNlName);
        Cname.setText(AccountInfo.cName);
        cAdrress.setText(AccountInfo.cAdd);
        setCurrentDateOnView();
        addListenerOnButton();
        cancel=(Button)findViewById(R.id.Cancel);

        cancel.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if(FastPkgMainActivity.fastPackge==1) 
                {
                    Intent fastPkgQuote = new Intent(v.getContext(), FastPkgQuote.class);
                    StringBuffer urlString = new StringBuffer();
                    FastPkgQuote parentActivity = (FastPkgQuote)getParent();
                    parentActivity.replaceContentView("fastpkg1", fastPkgQuote);
                }
                else if(FastPkgMainActivity.fastPackge==2)
                {
                    Intent fastpkgQuoteNew = new Intent(v.getContext(), FastPkgQuoteNew.class);
                    StringBuffer urlString = new StringBuffer();
                    FastPkgQuoteNew parentActivity = (FastPkgQuoteNew)getParent();
                    parentActivity.replaceContentView1("fastPkg2", fastpkgQuoteNew);
                }
            }
        });
    }

    public void setCurrentDateOnView() {
        tvDisplayDate = (TextView) findViewById(R.id.tvDate);
        dpResult = (DatePicker) findViewById(R.id.dpResult);
        dpResult.setVisibility(View.INVISIBLE);
        final Calendar c = Calendar.getInstance();
        year = c.get(Calendar.YEAR);
        month = c.get(Calendar.MONTH);
        day = c.get(Calendar.DAY_OF_MONTH);
        tvDisplayDate.setText(new StringBuilder()
            .append(month + 1).append("-").append(day).append("-").append(year).append(" "));
        dpResult.init(year, month, day, null);
    }

    public void addListenerOnButton() {
        btnChangeDate = (Button) findViewById(R.id.btnChangeDate);
        btnChangeDate.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                showDialog(DATE_DIALOG_ID);
            }
        });
    }

    @Override
    public  Dialog onCreateDialog(int id) {
        switch (id) {
            case DATE_DIALOG_ID:
                return new DatePickerDialog(this, datePickerListener, year, month,day);
        }
        return null;
    }

    public  DatePickerDialog.OnDateSetListener datePickerListener = new 
        DatePickerDialog.OnDateSetListener() {
            public void onDateSet(DatePicker view, int selectedYear,int selectedMonth, int selectedDay) 
            {
                year = selectedYear;
                month = selectedMonth;
                day = selectedDay;
                tvDisplayDate.setText(new StringBuilder().append(month + 1).append("-").append(day).append("-").append(year).append(" "));
                // set selected date into datepicker also
                dpResult.init(year, month, day, null);
            }
        };
    }
} 
```

这是 logcat 结果

```
 FATAL EXCEPTION: main

android.view.WindowManager$BadTokenException: 

Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@44ef0838 

is not valid; is your activity running?

android.view.ViewRoot.setView(ViewRoot.java:505)

04-20 15:50:06.703: E/AndroidRuntime(323):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
04-20 15:50:06.703: E/AndroidRuntime(323):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
04-20 15:50:06.703: E/AndroidRuntime(323):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
04-20 15:50:06.703: E/AndroidRuntime(323):  at android.app.Dialog.show(Dialog.java:241)
04-20 15:50:06.703: E/AndroidRuntime(323):  at android.app.DatePickerDialog.show(DatePickerDialog.java:129)
04-20 15:50:06.703: E/AndroidRuntime(323):  at android.app.Activity.showDialog(Activity.java:2556)
04-20 15:50:06.703: E/AndroidRuntime(323):  at android.app.Activity.showDialog(Activity.java:2514)
04-20 15:50:06.703: E/AndroidRuntime(323):  at corrculator.fastPkg.PlaceOrder$3.onClick(PlaceOrder.java:108)
04-20 15:50:06.703: E/AndroidRuntime(323):  at android.view.View.performClick(View.java:2408)
04-20 15:50:06.703: E/AndroidRuntime(323):  at android.view.View$PerformClick.run(View.java:8816)
04-20 15:50:06.703: E/AndroidRuntime(323):  at android.os.Handler.handleCallback(Handler.java:587)
04-20 15:50:06.703: E/AndroidRuntime(323):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-20 15:50:06.703: E/AndroidRuntime(323):  at android.os.Looper.loop(Looper.java:123)
04-20 15:50:06.703: E/AndroidRuntime(323):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-20 15:50:06.703: E/AndroidRuntime(323):  at java.lang.reflect.Method.invokeNative(Native Method)
04-20 15:50:06.703: E/AndroidRuntime(323):  at java.lang.reflect.Method.invoke(Method.java:521)
04-20 15:50:06.703: E/AndroidRuntime(323):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-20 15:50:06.703: E/AndroidRuntime(323):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-20 15:50:06.703: E/AndroidRuntime(323):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-30T07:38:24.637

我相信问题可能出在这条线上：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this); 
```

尝试将其修改为：

```
AlertDialog.Builder builder = new AlertDialog.Builder(MyActivityName.this); 
```

# powershell - 在 PowerShell 中过滤字符串

> ID：10242482
> 
> 赞同：0
> 
> 时间：2012-04-20T08:07:22.650
> 
> 标签：powershell, cmdlets

我想实现一些按名称过滤某些对象的自定义 cmdlet，并且我想使用通配符启用搜索，例如常见 cmdlet（[Get-ChildItem](http://technet.microsoft.com/en-us/library/hh849800.aspx)和[Get-Process](http://technet.microsoft.com/en-us/library/hh849832.aspx)）。

我怎样才能实现这种搜索？是否有一些示例甚至一些可重用的组件？有什么例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:24:50.730

大多数情况下，这些类型的 cmdlet 使用[WildcardPattern 类](http://msdn.microsoft.com/en-us/library/system.management.automation.wildcardpattern%28v=vs.85%29.aspx)。

下面是一个如何在 PowerShell 提示符下直接使用它的示例：

```
PS>$w = New-Object System.Management.Automation.WildcardPattern "*foo*"
PS>$w.IsMatch("foobar")
True
PS>$w.IsMatch("barbar")
False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:23:30.783

[您可以通过将对象集合传递给Where-Object](http://technet.microsoft.com/en-us/library/hh849715.aspx)（或缩写形式`?`）来定义自己的过滤器。

例如，如果您通过执行`gci`（Get-ChildItem 的别名）获取文件对象的集合，则可以通过执行以下操作仅显示其中包含文本`log`的对象：`gci | ?{$_.name -match "log"}`.

# java - 在PHP中解密Java 3DES ECB NoPadding加密值

> ID：10242487
> 
> 赞同：2
> 
> 时间：2012-04-20T08:07:34.797
> 
> 标签：java, php, encryption, mcrypt, 3des

我有一个从服务器获得的 3des 加密十六进制字符串。当我用 Java ECB/NoPadding 解密它时，我得到了预期的值，但是当我尝试用 PHP 解密它时，我得到了一个不同的值。这是PHP代码：

```
<?php

$key = "428982f4658cfeb679bae2bf85ebcde9";
$input = "9CB39217A434F6339EF27C503B561342";
$encrypted_data = bin2hex(
    mcrypt_ecb(MCRYPT_3DES, pack("H*", $key), pack("H*", $input), MCRYPT_DECRYPT)
);

?> 
```

以及以 main 开头的部分 java 代码：

```
String input = "F414E86894D996F8658F9327C8EC786404192012174729";
String key = "05aa58f38a0883d1439750a2495d36ad";

byte2hex(doCryto("F414E86894D996F8658F9327C8EC7864",  "05aa58f38a0883d1439750a2495d36ad", Cipher.DECRYPT_MODE));

public static byte[] doCryto(String data, String key, int CipherMode) throws Exception {
    byte result[];
    try {
        byte data1[] = hex2byte(data);
        Key key1 = formDESKey(key);
        transformation = key1.getAlgorithm() + "/ECB/NoPadding";

        Cipher c1 = Cipher.getInstance(transformation);
        c1.init(CipherMode, key1);
        result = c1.doFinal(data1);
    } catch (Exception e) {
        throw new Exception(e);
    }
    return result;
}

public static Key formDESKey(String key) throws Exception {
    short len = (short) ((key.length() / 2) * 8);
    return formDESKey(len, hex2byte(key));
}

  public static Key formDESKey(short keyLength, byte clearKeyBytes[]) throws Exception {
    Key key = null;
    switch (keyLength) {
        case 64: // '@'
            key = new SecretKeySpec(clearKeyBytes, "DES");
            break;

        case 128:
            clearKeyBytes = concat(clearKeyBytes, 0, 128/8, clearKeyBytes, 0, getBytesLength((short) 64));
        // fall through

        case 192:
            key = new SecretKeySpec(clearKeyBytes, "DESede");
            break;
    }
    if (key == null) {
        throw new Exception("Unsupported DES key length: " + keyLength + " bits");
    } else {
        return key;
    }
}

private static byte[] concat(byte array1[], int beginIndex1, int length1, byte array2[], int beginIndex2, int length2) {
    byte concatArray[] = new byte[length1 + length2];
    System.arraycopy(array1, beginIndex1, concatArray, 0, length1);
    System.arraycopy(array2, beginIndex2, concatArray, length1, length2);
    return concatArray;
} 
```

Java 导致：31303031464646464646464646464646
而 PHP 导致：411C689D687F2F118EA05BF234F4E582

我不知道为什么 PHP 获得了不同的价值。任何帮助，将不胜感激。
谢谢。

# python - Tastypie - 找不到嵌套资源字段

> ID：10242494
> 
> 赞同：7
> 
> 时间：2012-04-20T08:08:23.080
> 
> 标签：python, django, tastypie

我有这个代码：

```
#api model 

class VideoResource(ModelResource):
    class Meta:
        queryset = Video.objects.all()
        include_resource_uri = False
        resource_name = 'video'
        authorization = DjangoAuthorization()

class QuestionResource(ModelResource):

    user = fields.ToOneField(UserResource,'user',full=True)
    video = fields.ForeignKey(VideoResource,'video',full=True)

    class Meta:
        queryset = Question.objects.all()
        resource_name = 'question'
        include_resource_uri = False
        authorization = DjangoAuthorization()

    def obj_create(self, bundle, request=None, **kwargs):
        import json
        temp = json.loads(request.body, object_hook=_decode_dict)
        video = Video.objects.get(pk=temp['video'])
        return super(QuestionResource, self).obj_create(bundle, request, user=request.user, video=video)

#model

class Question(models.Model):
    text = models.CharField('Question',max_length=120)
    created = models.DateTimeField(auto_now_add=True)
    enabled = models.BooleanField(default=True)
    flag = models.BooleanField(default=False)
    allow_comments = models.BooleanField(default=True)
    thumbnail_url = models.CharField(default='video.jpg',blank=True, null=True,max_length=200)

    user = models.ForeignKey(User)
    video = models.ForeignKey(Video)

    def __unicode__(self): 
        return self.text;

class Video(models.Model):
    created = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now_add=True)
    url = models.URLField(default="")

    user = models.ForeignKey(User)

    def __unicode__(self): 
        return str(self.pk) + ' > ' + self.status 
```

问题是我在发送此对象时收到此错误：

```
{"video":21,"text":"sadasds"} 
```

**'video' 字段的数据不是 URI，不是字典，也没有 'pk' 属性：21。**

如果我评论这一行：

```
video = fields.ForeignKey(VideoResource,'video',full=True) 
```

一切正常，但是在询问时我无法获得此信息（视频）`/api/v1/questions/`

我的问题是：

*   我应该创建资源，一个发布，另一个检索信息<-这似乎不是一个很好的解决方案。或者
*   如何创建嵌套资源？我尝试按照网络上的示例[http://django-tastypie.readthedocs.org/en/latest/cookbook.html#nested-resources](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#nested-resources) 但您可以看到由于某种原因无法正常工作。

也许你的眼睛可以帮助我找到错误:) 谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T12:40:44.100

> 'video' 字段的数据不是 URI，不是字典，也没有 'pk' 属性：21。

因此，这意味着整数 21 不满足该字段的要求，它也模糊地暗示什么将满足要求。

首先，您可以发送 URI 进行记录，这可能是最正确的方式，因为 URI 确实是唯一的，而 pk 不是。

```
{"video":"/api/v1/video/21","text":"sadasds"} 
```

或者，您可以发送带有 pk 字段集的类似字典的对象。

```
{"video":{'pk':21},"text":"sadasds"} 
```

当您注释掉 ForeignKey 字段时，它起作用的原因是因为那么美味派将其视为一个 IntegerField，它可以被一个普通整数引用。

这让我发育迟缓了一段时间，希望它有帮助！

# mongodb - 如何在 Mongodb 的字段中查找子字符串

> ID：10242501
> 
> 赞同：67
> 
> 时间：2012-04-20T08:08:34.163
> 
> 标签：mongodb, nosql

如何找到数据库中的所有对象，其中对象的字段包含子字符串？

如果该字段是具有字符串值的集合对象中的 A：

我想在 db“数据库”中找到所有对象，其中 A 包含一个子字符串，比如“abc def”。

我试过：

```
db.database.find({A: {$regex: '/^*(abc def)*$/''}}) 
```

但没有用

**更新**

一个真正的字符串（在 unicode 中）：

```
Sujet  Commentaire sur  Star Wars  Episode III - La Revanche des Sith 1 
```

需要用 Star Wars 搜索所有条目

```
db.test.find({A: {$regex: '^*(star wars)*$''}}) not wokring 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-04-20T10:01:30.937

而不是这个：

```
db.database.find({A: {$regex: '/^*(abc def)*$/''}}) 
```

你应该做这个：

```
db.database.find({A: /abc def/i }) 
```

^* 实际上不是有效的语法，因为 ^ 和 $ 是锚点，而不是可重复的东西。你可能是指 ^.* 这里。但是不需要 ^.* 因为这只是表示“直到后面的字符的所有内容”并且 (abc def)* 表示“0 次或多次“abc def”，但它必须位于字符串的末尾，因为你的 $. 最后的“i”是为了使它不区分大小写。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-02-06T16:53:53.610

只需使用字符串“Star Wars”，[`$regex`](https://docs.mongodb.com/manual/reference/operator/query/regex/)剩下的就做

```
db.test.find({A: {$regex: 'Star Wars'}}) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-06-28T14:38:43.853

`$regex`在大型收藏中太贵/太慢了。

我建议利用聚合框架和[$indexOfCP](https://docs.mongodb.com/manual/reference/operator/aggregation/indexOfCP/)。

```
db.test.aggregate([{$match: 
    {$expr: { $gt: [{ $indexOfCP: [ "$A", "Star Wars" ] }, -1]}}
    }, {$project: {A:1}}]) 
```

对于不区分大小写的搜索，您可以添加`$toUpper`到组合中并搜索`STAR WARS`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-03-11T06:44:36.520

这对我有用：

```
db.test.find({"A": {'$regex': '.*star wars.*'}}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-12T15:52:01.360

```
// executes, name LIKE john and only selecting the "name" and "friends" fields
db.collection.find({ name: /john/i }, 'name friends').exec();

// passing options
db.collection.find({ name: /john/i }, null, { skip: 10 }).exec(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-13T06:30:58.240

这个使用聚合语法：

```
db.movies.aggregate([
  {$match: 
    {
      title: {$regex: 'Star'}
    } 
  }
] ) 
```

# facebook - Facebook Connect - 登录错误 - 发生错误。请稍后再试

> ID：10242504
> 
> 赞同：3
> 
> 时间：2012-04-20T08:08:42.160
> 
> 标签：facebook, login, dialog

单击“Facebook Connect”时显示的登录框弹出窗口显示某个流的“发生错误。请稍后再试”错误（如下所述）

看起来[我们不是唯一看到这个问题的人](http://drupal.org/node/1016164)

1.  登录 facebook.com
2.  转到 webapp 并单击 facebook 连接按钮登录
3.  从 web 应用程序注销
4.  从 facebook.com 注销
5.  再次尝试第 2 步

这很常见吗？我尝试[提交一个错误](https://developers.facebook.com/bugs/create)，但这也是错误的（卡住了）

当我在“访问令牌调试器”工具下查看访问令牌时，它显示“会话无效，因为用户已注销。” 但是，如果我转到 facebook.com，我会看到我已登录。

# c++ - 如何将 CString 转换为 UCHAR 数组？

> ID：10242506
> 
> 赞同：0
> 
> 时间：2012-04-20T08:08:49.663
> 
> 标签：c++, visual-studio, visual-c++, mfc, cstring

我有一个 cstring 对象 str = "5043"，现在我想转换为 Hex 并将其放入 UCHAR 数组中

```
UCHAR sample[2];
Sample[0] = 0X50 
Sample[1] = 0X43 
```

我怎样才能做到这一点？请给我建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:14:05.237

你试过[strol](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)吗？这似乎有点低技术，但应该做的伎俩。不要忘记通过 16 作为基础...

您需要将它与一点移位和按位与运算结合起来，以将结果完全拆分为您需要的结果，但这应该很简单。

希望这可以帮助，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:36:31.567

您可以使用 直接从字符串中扫描十六进制值`sscanf()`，如下所示：

```
UCHAR sample[2];
for ( int i = 0; i < str.length() / 2 ; i++) {
    sscanf( (str.substr(i*2,2)).c_str(), "%hx", &sample[i]);
} 
```

`h`是缩写，`x`显然是十六进制。

此外，这假设`UCHAR`数组被声明为`string`大小的一半。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:57:25.530

为了使您的代码更简单，您可以使用联合，例如

```
 union
    {
    UCHAR char_val[2];
    long long_val;
    };

    CString str = "5043";
    long_val = strtol(str.GetString(), nullptr, 16);
    // use char_val here 
```

# java - android中自定义行视图ListView中的按钮OnclickEvent

> ID：10242508
> 
> 赞同：0
> 
> 时间：2012-04-20T08:09:02.557
> 
> 标签：java, android

我是安卓新手。我为行视图创建了 custome_row_view.xml 文件。

使用列表我显示两行。现在我在custome_row_view 中添加了一个按钮。

如何为该按钮 onclick 编写代码

主要的。XML

```
 <ListView
        android:id="@id/android:list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

custom_row_view.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<Button
    android:id="@+id/buton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

CustomeViewActivity.java

```
package naresh.custom.view;

import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;
import java.util.ArrayList;
import java.util.HashMap;
import android.app.ListActivity;

public class CustomeViewActivity extends ListActivity implements OnItemClickListener{
    static final ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        list.removeAll(list);

        ListView lista=(ListView)findViewById(android.R.id.list);
        int count = lista.getChildCount();

        SimpleAdapter adapter = new SimpleAdapter(
            this,
            list,
            R.layout.custom_row_view,
            new String[] {"title","description"},
            new int[] {R.id.textView1,R.id.textView2}
        );

        if(count<5){
            HashMap<String,String> temp = new HashMap<String,String>();
            temp.put("title","On/Off");
            temp.put("description", "Alert to be On or Off");
            list.add(temp);
            HashMap<String,String> temp1 = new HashMap<String,String>();
            temp1.put("title","Select tone");
            temp1.put("description", "Select tone for alerting");

            list.add(temp1);
            HashMap<String,String> temp2 = new HashMap<String,String>();
            temp2.put("title","Alert Time");
            temp2.put("description", "Select Time for alerting Before/After");
            list.add(temp2);
            HashMap<String,String> temp3 = new HashMap<String,String>();
            temp3.put("title","Change Password");
            temp3.put("description", "Can cahnge password any time");
            list.add(temp3);

            setListAdapter(null);
            setListAdapter(adapter);
        }
        getListView().setOnItemClickListener(this);
    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub
        Toast.makeText(this,"ITem clicked", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:18:01.567

我认为您正在使用 CustomAdapter 填充列表视图..

如果是，那么在 getView() 中包含按钮操作：

```
 public View getView(final int position, View convertView, ViewGroup parent) 
                    {

                             View row=convertView;
                          FetchHolder holder=null;

                          if (row==null) 
                          {
                          LayoutInflater inflater=getLayoutInflater();
                          row=inflater.inflate(R.layout.grid, parent, false);

                          holder=new FetchHolder(row);

                          row.setTag(holder);
                          }
                         else 
                          {
                          holder=(FetchHolder)row.getTag();
                          }

                           holder.button.setOnClickListener(new OnClickListener()
                          {
                              public void onClick(View v) {

                                 }
                          });
                          return row;
                           }

                      }

                    static class FetchHolder
                     {
                        private Button time=null;

                        FetchHolder(View row) 
                        {

                            time=(Button)row.findViewById(R.id.timebutton);

                              } 
```

# android - Android TextUtils

> ID：10242509
> 
> 赞同：1
> 
> 时间：2012-04-20T08:09:05.800
> 
> 标签：android

我可以看到 TextUtils 类有许多功能与标准 Java String 类中的函数（例如 indexOf）的用途相同。我想知道他们是否旨在为开发人员添加更多选项，与 Android 环境没有任何关系，例如在 CharSequence 上调用 indexOf 而不仅仅是在 String 上，或者它们是否应该实际替换原始函数由于他们在Android上使用时遇到的问题。有人可以回答这个信息丰富的问题​​吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:23:52.890

我认为这`TextUtils`只是有用方法的集合，并不意味着替换字符串类中的方法，只是替换字符串中的一些方法和其他使您的代码更小的方法（请参阅`TextUtils.isEmpty()`和`TextUtils.concat()`）

# spring - 使用 spring-security-bcrypt 插件在 Grails 中集成 bcrypt

> ID：10242519
> 
> 赞同：2
> 
> 时间：2012-04-20T08:10:07.503
> 
> 标签：spring, grails, spring-security, bcrypt

我想在我的 grails 项目中使用 bcrypt 散列算法，而不是它的 defaultSHA-256 消息摘要算法。要启用 bcrypt，您只需使用`grails install-plugin spring-security-bcrypt`命令。

您可以通过将其添加到以下内容来自定义键控轮次`BuildConfig.groovy`：

```
grails.plugins.springsecurity.password.bcrypt.logrounds = 15 
```

我的问题是，我需要做的就是将 bcrypt 设置为我的密码算法吗？当我从spring-security-core生成的域类中使用此方法时，它是否会自动使用bcrypt算法：

```
springSecurityService.encodePassword(params.password) 
```

如何检查 bcrypt 是否正在处理我的项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T08:32:19.783

您还需要添加

```
grails.plugins.springsecurity.password.algorithm='bcrypt' 
```

# asp.net - 如何在 asp.net 网页中实现 html 表单 - asp.net 中的两个表单问题

> ID：10242520
> 
> 赞同：2
> 
> 时间：2012-04-20T08:10:11.210
> 
> 标签：asp.net, html, ajax, forms

请查看此 html 代码：

```
<!--   PAGE - 5  -->
                <div class="section cc_content_5" id="page5" style="display: none;">
                    <div class="pad_content">
                        <div class="right grid_1">
                            <h1>
                                Contact Address
                            </h1>
                            <img src="Images/photo_5.jpg" alt=""><br />
                            <br />
                            <strong>The Companyname Inc</strong> 8901 Marmora Road,<br />
                            Glasgow, D04 89GR.<br />
                            Telephone: +1 800 123 1234<br />
                            Fax: +1 800 123 1234<br />
                            E-mail: <a href="mailto:#">www.copanyname.com</a><br />
                        </div>
                        <div class="left grid_2">
                            <h1>
                                Contact Form
                            </h1>
                            <div id="note">
                            </div>
                            <div id="fields">
                                <form id="ajax-contact-form" action="javascript:alert('success!');">
                                <label>
                                    Name:</label><input class="textbox" name="name" value="" type="text">
                                <label>
                                    E-Mail:</label><input class="textbox" name="email" value="" type="text">
                                <label>
                                    Subject:</label><input class="textbox" name="subject" value="" type="text">
                                <label>
                                    Comments:</label><textarea class="textbox" name="message" rows="5" cols="25"></textarea>
                                <label>
                                    Captcha</label><img src="Images/captcha.php" style="margin: 3px 0px; width: 200px;
                                        height: 32px;">
                                <div class=" clear">
                                </div>
                                <label>
                                    &nbsp;</label><input class="textbox" name="capthca" value="" type="text">
                                <div class=" clear">
                                </div>
                                <label>
                                    &nbsp;</label><input class="pin" name="submit" value="Submit" type="submit">
                                </form>
                                <div class="clear">
                                </div>
                            </div>
                        </div>
                        <div class="clear">
                        </div>
                    </div>
                </div> 
```

和他们的脚本：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#ajax-contact-form").submit(function () {
            var str = $(this).serialize(); $.ajax({ type: "POST", url: "contact.php", data: str, success: function (msg) {
                if (msg == 'OK') // Message Sent? Show the 'Thank You' message and hide the form
                { result = '<div class="notification_ok">Your message has been sent. Thank you!<br /> <a href="#" onclick="freset();return false;">send another mail</a></div>'; $("#fields").hide(); } else
                { result = msg; } $("#note").html(result);
            }
            }); return false;
        });
    });
    function freset()
    { $("#note").html(''); document.getElementById('ajax-contact-form').reset(); $("#fields").show(); }
</script> 
```

我真的很想知道如何将第 5 页放入我的 asp.net 网络表单中？
正如您一样，我们不能在默认的 asp.net 网页表单中使用表单。
那么我可以对第 5 页做些什么呢？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T08:24:03.517

您不能在一个 asp.net 页面中拥有两个表单，并且两者都在后面的代码上工作。

您拥有的替代方案。

1.  将第二个表单放在 asp.net 表单之前或之后
2.  不要设置第二种形式，只需在后面的代码中读取您感兴趣的输入数据。
3.  使用 javascript 在页面末尾动态创建表单并发布。

因为在这里我看到你发布到 php 并且我认为你喜欢用 asp.net 保留旧代码，`add them after the closing form of the asp.net form.`

```
<form id="AspForm" runat="server">
...
</form>
<form id="ajax-contact-form"  method="post" action="contact.php" >
...
</form> 
```

## 更极端

因为你们都准备好使用 javascript，所以你可以做到这一点。将所有内容复制并粘贴到页面末尾的表单中并发布。

```
 <form id="AspForm" runat="server">
    ...
      <div id="ajax-contact-infos" >
       <label>
          Name:</label><input class="textbox" name="name" value="" type="text">
       <label>
       <input class="pin" name="submit" value="Submit" 
         type="button" onclick="SubmitThisForm();return false;" >
        ...
      </div>
    </form>
    <form id="ajax-contact-form"  method="post" action="contact.php" >
       <div id="PlaceOnMe" ></div>
    </form> 
```

并在 javascript 上复制它，然后将其发布为

```
<script type="text/javascript">
    function SubmitThisForm()
    {
            // here I copy (doublicate) the content of the data that I like to post
            //  in the form at the end of the page and outside the asp.net
        jQuery("#PlaceOnMe").html(jQuery("#ajax-contact-infos"));
            // Now we submit it as its your old code, with out change anything
        jQuery("#ajax-contact-form").submit();
    }

    // here is the old code.
    $(document).ready(function () {
        $("#ajax-contact-form").submit(function () {
            var str = $(this).serialize(); $.ajax({ type: "POST", url: "contact.php", data: str, success: function (msg) {
                if (msg == 'OK') // Message Sent? Show the 'Thank You' message and hide the form
                { result = '<div class="notification_ok">Your message has been sent. Thank you!<br /> <a href="#" onclick="freset();return false;">send another mail</a></div>'; $("#fields").hide(); } else
                { result = msg; } $("#note").html(result);
            }
            }); return false;
        });
    });
    function freset()
    { $("#note").html(''); document.getElementById('ajax-contact-form').reset(); $("#fields").show(); }
</script> 
```

所有这些都是最小的变化。您可以进行优化，但这是一般的想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T08:35:35.297

您有多种选择；嵌套表单是最糟糕的，因为它会/不会根据浏览器工作。

正如@Aristos 所提到的，您可以采用一种又一种形式。这是一个很好的解决方案，但在您的网站设计方面不一定是最好的。

第二个是您可以将联系表单嵌入到普通的 HTML 页面中，然后将其包含在 iframe 或类似的父页面中。这将解决嵌套表单的问题，但可能不会在用户体验方面为您提供您想要的行为。

第三是您的联系表格更适合作为[用户控件](http://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx)

您可以将所有联系表单字段放入 ascx 文件中，并在此控件中处理按钮单击以进行提交。处理此提交后，您可以将用户控件替换为感谢用户输入的简单消息。

您还可以将所有必需的表单验证放入其中。您的 ASCX 可能类似于：

```
<asp:Panel runat="server" id="ContactPanel">
<div class="left grid_2">
        <h1>
            Contact Form
        </h1>
        <div id="note">
        </div>
        <div id="fields">
            <label for="<%=InputContactName.ClientID%>">Name:</label>
            <asp:TextBox runat="server" id="InputContactName" value="" />
            <!-- Rest of Form goes here -->
            <div class=" clear">
            </div>
            <asp:Button runat="server" id="ContactFormSubmit" OnClick="ContactFormSubmit_Click" Text="Send Feedback" />
            <label>&nbsp;</label><input class="pin" name="submit" value="Submit" type="submit">
            <div class="clear"></div>
        </div>
    </div>
</div>
</asp:Panel>
<asp:Panel runat="server" id="ThanksPanel" Visible="false">
    <p>Thank you for your feedback. We'll try not to ignore it. But it is Friday. So we might. At least until Monday.</p>
</asp:Panel> 
```

在您的 ContactFormSubmit_Click 按钮中，您可以从联系表单中获取文本，隐藏 ContactPanel，并显示ThanksPanel。

非常简单，并且封装在用户控件中。

# iphone - 适用于 iOS 的具有多行的 EasyTableView

> ID：10242522
> 
> 赞同：0
> 
> 时间：2012-04-20T08:10:18.080
> 
> 标签：iphone, ios, ipad, uitableview

我正在使用[https://github.com/alekseyn/EasyTableView](https://github.com/alekseyn/EasyTableView)创建带有图像的可滚动表格视图。它在演示中给出的效果非常好。

但我的自定义要求是 2 行而不是 1 行。所以我决定为表格中的单个单元格添加 2 个图像视图而不是 1 个。

```
- (UIView *)easyTableView:(EasyTableView *)easyTableView viewForRect:(CGRect)rect {
    // Create a container view for an EasyTableView cell
    UIView *container = [[UIView alloc] initWithFrame:rect];;

    // Setup an image view to display an image
    UIImageView *imageView  = [[UIImageView alloc] initWithFrame:CGRectMake(1, 0, rect.size.width-2, rect.size.height/2)];
    imageView.tag           = IMAGE_TAG;
    imageView.contentMode   = UIViewContentModeScaleAspectFill;

    [container addSubview:imageView];

    // Setup a label to display the image title
    CGRect labelRect        = CGRectMake(10, rect.size.height/2-20, rect.size.width-20, 20);
    UILabel *label          = [[UILabel alloc] initWithFrame:labelRect];
    label.textAlignment     = UITextAlignmentCenter;
    label.textColor         = [UIColor colorWithWhite:1.0 alpha:0.5];
    label.backgroundColor   = [UIColor clearColor];
    label.font              = [UIFont boldSystemFontOfSize:14];
    label.tag               = LABEL_TAG;

    [container addSubview:label];

    // Setup an image view to display an image
    UIImageView *imageView2 = [[UIImageView alloc] initWithFrame:CGRectMake(1, rect.size.height/2, rect.size.width-2, rect.size.height)];
    imageView.tag           = IMAGE_TAG2;
    imageView.contentMode   = UIViewContentModeScaleAspectFill;

    [container addSubview:imageView2];

    // Setup a label to display the image title
    CGRect labelRect2       = CGRectMake(10, rect.size.height-20, rect.size.width-20, 20);
    UILabel *label2         = [[UILabel alloc] initWithFrame:labelRect2];
    label.textAlignment     = UITextAlignmentCenter;
    label.textColor         = [UIColor colorWithWhite:1.0 alpha:0.5];
    label.backgroundColor   = [UIColor clearColor];
    label.font              = [UIFont boldSystemFontOfSize:14];
    label.tag               = LABEL_TAG2;

    [container addSubview:label2];

    return container;
}

// Second delegate populates the views with data from a data source

- (void)easyTableView:(EasyTableView *)easyTableView setDataForView:(UIView *)view forIndexPath:(NSIndexPath *)indexPath {
    // Set the image title for the given index
    UILabel *label = (UILabel *)[view viewWithTag:LABEL_TAG];
    label.text = [self.imageStore.titles objectAtIndex:indexPath.row];

    // Set the image for the given index
    UIImageView *imageView = (UIImageView *)[view viewWithTag:IMAGE_TAG];
    imageView.image = [self.imageStore imageAtIndex:indexPath.row];

    // Set the image title for the given index
    UILabel *label2 = (UILabel *)[view viewWithTag:LABEL_TAG2];
    label2.text = [self.imageStore.titles objectAtIndex:indexPath.row];

    // Set the image for the given index
    UIImageView *imageView2 = (UIImageView *)[view viewWithTag:IMAGE_TAG2];
    imageView2.image = [self.imageStore imageAtIndex:indexPath.row];

} 
```

最初为了测试，我对两个单元格使用了相同的图像和标签。但令人怀疑的是，它在第​​一行显示图像和行意味着任何单元格的第一张图像。

我怎样才能完成我的要求。

# java - 使用两个计时器连接服务器时出现 Java 客户端 + SSL 套接字错误

> ID：10242524
> 
> 赞同：1
> 
> 时间：2012-04-20T08:10:23.610
> 
> 标签：java

## 设想

具有两个类的 ssl 客户端。一个用于交易，另一个用于发送网络消息。他们共享连接功能。如果我分别运行每个，则建立连接并收到适当的响应。如果我同时运行它们，则会建立连接，但出现诸如 Errorjava.io.UTFDataFormatException: malformed input around byte 135 socket timeouts 之类的错误，系统最终会冻结。

## 问题

我怎样才能同时运行网络和处理消息而不会发生冲突？

```
// connect code
try {
            secureRandom = new SecureRandom();
            secureRandom.nextInt();
            System.out.println("Done.. Initializing Random Numbers.....:-");

            String host = getHost();
            int port = getPort();

            setupServerKeystore();
            setupClientKeyStore();
            setupSSLContext();

            SSLSocketFactory sf = sslContext.getSocketFactory();
            SSLSocket socket = (SSLSocket) sf.createSocket(host, port);
            socket.setSoTimeout(10000);
            InputStream in = socket.getInputStream();
            OutputStream out = socket.getOutputStream();

            this.din = new DataInputStream(in);
            this.dout = new DataOutputStream(out);

// snip

// Schedule the two timers to run with different delays.
        pingTimer.schedule(new Ping("ping"), 0, pingdelay);
        vendTimer.schedule(new Vend("vend"), 0, venddelay);
    } // end main 
```

// 堆栈跟踪

```
vend - Current time: 20.04.2012 12:04:28

ping - Current time: 20.04.2012 12:04:28
Incoming Errorjava.io.UTFDataFormatException: malformed input around byte 135
java.io.UTFDataFormatException: malformed input around byte 135
    at java.io.DataInputStream.readUTF(DataInputStream.java:639)
    at java.io.DataInputStream.readUTF(DataInputStream.java:547)
    at timerexample.Ping.run(Ping.java:76)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462)
=========== Connected is True
null
ping - Current time: 20.04.2012 12:04:30
Incoming Errorjava.net.SocketTimeoutException: Read timed out
java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:789)
=========== Connected is True
null
vend - Current time: 20.04.2012 12:04:46
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:746)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
    at java.io.DataInputStream.readFully(DataInputStream.java:178)
    at java.io.DataInputStream.readUTF(DataInputStream.java:592)
    at java.io.DataInputStream.readUTF(DataInputStream.java:547)
    at timerexample.Ping.run(Ping.java:76)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462)
Incoming Errorjava.net.SocketTimeoutException: Read timed out
java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:789)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:746)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
    at java.io.DataInputStream.readFully(DataInputStream.java:178)
    at java.io.DataInputStream.readUTF(DataInputStream.java:592)
    at java.io.DataInputStream.readUTF(DataInputStream.java:547)
    at timerexample.Ping.run(Ping.java:76)
=========== Connected is True
null
ping - Current time: 20.04.2012 12:05:02
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462)
java.net.SocketTimeoutException: Read timed out
Incoming Errorjava.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:789)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:746)
=========== Connected is True
null
ping - Current time: 20.04.2012 12:05:17
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:50)
    at java.io.DataInputStream.readUnsignedShort(DataInputStream.java:320)
    at java.io.DataInputStream.readUTF(DataInputStream.java:572)
    at java.io.DataInputStream.readUTF(DataInputStream.java:547)
    at timerexample.Ping.run(Ping.java:76)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462) 
```

# python - 在 Python 中何时以及何时不将 map() 与 multiprocessing.Pool 一起使用？大输入值的情况

> ID：10242525
> 
> 赞同：2
> 
> 时间：2012-04-20T08:10:24.133
> 
> 标签：python, dictionary, parallel-processing, multiprocessing, large-data

`multiprocessing.Pool.map()`在每个输入值*很大*（例如 500 MB）但输入值通常包含相同的大对象的情况下并行计算许多结果是否有效？恐怕工作方式`multiprocessing`是将每个输入值的腌制版本发送到池中的每个工作进程。如果不执行优化，这将意味着为每个输入值发送大量数据`map()`。是这样吗？我很快看了一下`multiprocessing`代码，但没有发现任何明显的东西。

更一般地说，你会推荐什么简单的并行化策略来做一个`map()`说 10,000 个值，每个值都是一个元组`(vector, very_large_matrix)`，其中向量总是不同的，但是只有 5 个不同的非常大的矩阵？

**PS**：大输入矩阵实际上是“渐进式”出现的：首先发送 2,000 个向量与第一个矩阵一起发送*，*然后发送 2,000 个向量与第二个矩阵一起发送，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:41:26.753

我认为显而易见的解决方案是发送对very_large_matrix 的引用而不是对象本身的克隆？如果只有五个大矩阵，则在主进程中创建它们。然后当它`multiprocessing.Pool`被实例化时，它将创建许多克隆父进程地址空间的子进程。这意味着如果池中有六个进程，那么内存中将同时存在 (1 + 6) * 5 个不同的矩阵。

因此，在主过程中创建所有唯一矩阵的查找：

```
matrix_lookup = {1 : matrix(...), 2 : matrix(...), ...} 
```

然后将每个矩阵的索引`matrix_lookup`与向量一起传递给工作进程：

```
p = Pool(6)
pool.map(func, [(vector, 1), (vector, 2), (vector, 1), ...]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:19:48.683

我遇到了一个类似的问题：在大数据集上并行计算。正如你提到`multiprocessing.Pool.map`的腌制论点。我所做的是实现我自己的`fork()`包装器，它只将返回值腌制回父进程，从而避免腌制参数。`map()`和包装顶部的平行线。

# ios - 正确处理 UIControlEventValueChanged 事件

> ID：10242527
> 
> 赞同：4
> 
> 时间：2012-04-20T08:10:32.637
> 
> 标签：ios, event-handling, uikit, race-condition, uiswitch

我有一个[`UISwitch`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISwitch_Class/Reference/Reference.html)与其对应的[`UIControlEventValueChanged`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006779)事件绑定到一个函数`[- handleSwitch:]`。

**视图控制器**

```
- (IBAction)handleSwitch:(UISwitch *)sender
{
    static BOOL oldState;

    if (sender.on && !oldState) {
        NSLog(@"off => on");
    } else if (oldState && !sender.on) {
        NSLog(@"on => off");
    } else if (oldState && sender.on) {
        NSLog(@"Big bug source: on => on");
    } else {
        NSLog(@"Big bug source: off => off");
    }
    oldState = sender.on;
} 
```

当我每隔几秒钟按下一次开关时，程序运行良好。但是，一旦我开始向交换机发送垃圾邮件，我就会开始获得“大错误源”。

在调用函数之前，它似乎`sender.on`再次更改为其旧值。`[- handleSwitch]`

1.  将更改从 切换`Off`到`On`
2.  事件“值改变”被放入队列
3.  将更改从 切换`On`到`Off`
4.  `[- handleSwitch:]`响应“值已更改”事件消息而调用。但是，由于开关已经变回`Off`状态，它无法检测到开关处于`On`发送事件之前的状态。
5.  没有第二次调用`[- handleSwitch]`. 不知何故，这两个“价值改变”事件合并为一个。

这导致了以下问题：

*   此案一般如何处理？真的有必要`UISwitch`手动处理从 ' 状态到相同状态的转换吗？

*   该框架足够智能，可以将两个开关转换组合成一个事件。`On`为什么在这些情况下检测=>`On`和`Off`=>`Off`情况并从队列中删除事件还不够智能？

*   是否有可能在功能期间开关值发生*变化*`[- handleSwitch]`？或者是在 GUI 线程上调用的函数，因此在运行时阻塞了用户界面？

    如果在方法中值可能发生变化，那么如何应对呢？由于该方法仅获取指向`UISwitch`自身的指针作为参数，因此无法在事件创建时获取其值。只能检索当前值，该值可能已经更改。

# android - 实时设置更改

> ID：10242528
> 
> 赞同：0
> 
> 时间：2012-04-20T08:10:42.753
> 
> 标签：android, service, settings

请问如何将设置更改传播到正在运行的服务中？android对此有一些回调吗？我在 sharedpreferences 中有自己的设置，所以我不这么认为...通常的方法是什么？例如禁用从服务发送后台数据。我的意思是我自己的自定义设置..不是全球电话偏好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:17:24.980

如果“设置”是指“设置”应用程序，其中一些具有关联的广播`Intents`，例如 [`ACTION_BACKGROUND_DATA_SETTING_CHANGED`](http://developer.android.com/reference/android/net/ConnectivityManager.html#ACTION_BACKGROUND_DATA_SETTING_CHANGED)“禁用从服务发送后台数据”。

# html - 如何仅使用 ccs 创建三角形和正方形？

> ID：10242532
> 
> 赞同：0
> 
> 时间：2012-04-20T08:11:05.770
> 
> 标签：html, css

我想只用css在它的顶部创建一个正方形和一个三角形，所以

1.  我可以在三角形中写一些动态文本
2.  在运行时使用 css 动态设置三角形颜色会很容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:24:25.153

这是一种方法：

[http://jsfiddle.net/VWdxj/](http://jsfiddle.net/VWdxj/)

**HTML**

```
<div class="container">
    <div class="content">Hello World</div>
    <div class="triangle"></div>
</div> 
```

**CSS**

```
.container{
    border:1px solid #000;
    position:relative;
}
.content{
    z-index:500;
    position:absolute;
    top:230px;
    left:120px;
    color:#fff;
}
.triangle{
    border-color: #fff #fff red #fff;
    border-width:160px;
    border-style:solid;
    width:0;
    height:0;
    position:absolute;
    top:0;
    left:0;
    z-index:2;
} 
```

# javascript - jQuery计数

> ID：10242534
> 
> 赞同：1
> 
> 时间：2012-04-20T08:11:14.333
> 
> 标签：javascript, jquery, math, count

我如何用jquery计算#total value + 170？

```
$("#member").click(function() {
if ($('#member').is(':checked')) {
    var totalv = $("#total").val();
    var skatz = 170;
    var skaits = totalv + skatz;
    $("#total").val(skaits);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:13:42.010

的结果`.val()`将是一个字符串，因此您首先需要将其转换为数字：

```
var totalv = $("#total").val();
var skatz = 170;
var skaits = +totalv + skatz;
$("#total").val(skaits); 
```

（注意 totalv 变量的附加 + 前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:19:13.910

您应该检查提供的值是否实际上是一个数字（您可以每次都执行 onkeypress 或 keyup 但我说您应该始终检查提交）。下面是修改后的代码（通过检查值是否为数字）。

编辑：确保您的 javascript 已准备好包裹它的文档。（函数可以在这个调用之外）

```
$(document).ready(function () {
    $("#member").click(function() {
    if ($('#member').is(':checked')) {
        var totalv = $("#total").val();
        if(isNumber(totalv) == true)
        {
            var skatz = 170;
            var skaits = parseInt(totalv) + skatz;
            $("#total").val(skaits);
        }
        else
        {
            alert("You must enter a numerical value");
        }
    }
});

function isNumber(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

# ice - 如何在版本 4.0.6 GA 的 infobright 中使用拒绝文件

> ID：10242536
> 
> 赞同：0
> 
> 时间：2012-04-20T08:11:34.203
> 
> 标签：ice, infobright

在[4.0.6 GA 版本的发行说明中](http://www.infobright.org/downloads/ice/ICE_4.0.6_Release_Notes.pdf)，我们可以发现第一个新特性是“ **Infobright Loader 现在支持 Reject 文件**”

但是我找不到更多关于它的信息，比如如何使用它，在这种情况下我们可能需要它。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:16:48.170

要启用拒绝文件功能，您必须指定 BH_REJECT_FILE_PATH 和相关参数之一（BH_ABORT_ON_COUNT 或 BH_ABORT_ON_THRESHOLD）。例如，如果您想将文件 DATAFILE.csv 中的数据加载到表 T，但您预计此文件中的 10 行可能格式错误，您将运行以下命令：

设置@BH_REJECT_FILE_PATH = '/tmp/reject_file';

设置@BH_ABORT_ON_COUNT = 10；

将文件 DATAFILE.csv 中的数据加载到表 T 中；

如果少于 10 行被拒绝，将输出警告，加载将成功，所有有问题的行将输出到文件 /tmp/reject_file。如果 Infobright 加载程序发现第十个坏行，加载将终止并出现错误，并且到目前为止找到的所有坏行都将输出到文件 /tmp/reject_file。

# mysql - 基于特定随机数列表的Mysql查询？

> ID：10242538
> 
> 赞同：0
> 
> 时间：2012-04-20T08:11:41.557
> 
> 标签：mysql

我正在尝试根据特定数字进行查询，在这个阶段我只需要将其作为逗号分隔值硬编码到页面中。

```
2312,2431,2439,2440,2442,.... 
```

但我不能使用 between 因为中间的数字可能不相关

那么如何进行这种类型的查询呢？

```
$sql= "SELECT * FROM table 
WHERE pc=2431 OR pc=2439 OR 
      pc=2440 OR pc=2442 OR 
      pc=2443 OR pc=2444 OR 
      pc=2445 OR pc=2446 OR 
      pc=2312 AND v=1 
ORDER BY id DESC 
LIMIT $offset, $rowsperpage"; 
```

我尝试了这种方法，但必须有更好的方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:16:41.383

确实有...您可以使用`IN`运算符使查询变为：

```
SELECT *
  FROM table
 WHERE pc IN (2431,2439,2440,2442,2443,2444,2445,2446,2312)
   AND v=1
 ORDER BY id DESC
 LIMIT $offset, $rowsperpage 
```

简单：o）

有关更多信息，请查看[http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_in上的 MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_in)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:20:10.617

我建议对其他答案进行一些改进：

$pcs = 数组（2431,2439,2440,2442,2443,2444,2445,2446,2312）；

```
"SELECT *
FROM table
WHERE pc IN (" . implode(",", $pcs) . ")
AND v=1
ORDER BY id DESC
LIMIT $offset" 
```

这样，如果以后您的 id 将更改并且您有多个使用它们的查询，您将只需要更新一个地方而不是 N（其中 N 是查询数）。如果您在许多不同的文件中使用这些 id，请考虑制作一个常量

# c - 使用哈希 (#) 符号来指示数据库链表 C 程序的命令输入换行符？

> ID：10242539
> 
> 赞同：0
> 
> 时间：2012-04-20T08:11:50.760
> 
> 标签：c, database, hash, io, linked-list

嗨，由于我的大学项目，我正在做一个基于线性单链表的 C 数据库程序。我还不明白的问题是输入和输出程序。

基本上程序的输入应该是这样的

```
INSERT
001 // indicates patient's number
John // indicates patient's name
M // indicates patient's gender
#
002 
Mary
F
#
SELECT // which means print the list
* // indicates all the list to be print
#
EXIT 
```

输入完成，下面一行是输出

```
Data is added.
#
Hospital ID : 001
Name : John
Gender : M
#
Hospital ID : 002
Name : Mary
Gender : F
# 
```

就这样。这是我一直在做的事情（在描述中）

*   第一行是获取命令
*   然后执行while命令不是退出而不是char中的#符号，我使用strcmp检查命令是“INSERT”还是“SELECT”，如果它等于
*   下一行是在linkedlist命令中使用的输入的gets，我在int中给出一个标志，如果命令是insert，它将要求3次，或者SELECT如果它是带有strcmp的* in char符号，它将删除所有
*   所以基本上在它重复（标志）次要求输入行（使用gets）之后，它会再次要求命令（忘了在那个char [size]之前提到），如果输入#
*   所以为了打印命令，我将它们排入我的队列以打印输出
*   直到输入 EXIT ，它保持入队，否则它将出队直到队列为 NULL （将队列放在 char temp 的前面）

但是整个算法似乎不起作用，因为该程序仅适用于 INSERT 函数。

然后我将回到我的 C 书并阅读有关宏、参数等的内容并研究互联网，直到我发现将 # 本身定义为请求更多命令的命令的想法

但似乎不太明白这件事是如何运作的。知道我应该怎么做才能获得正确的输入和输出吗？使用这种 strcmp while 和 if 还是定义 # 本身？

在此先感谢您，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:01:16.027

`#`除非您为此编写程序，否则主题标签在程序的输入中没有意义。

用于预处理指令的标签，如`#include`或**在 C 源代码文件**（或 C 头文件）中`#define`是有意义的。作为输入的所有程序都是字符，而不是命令。

# php - 使用 htaccess 使 url 不区分大小写

> ID：10242546
> 
> 赞同：3
> 
> 时间：2012-04-20T08:12:23.117
> 
> 标签：php, .htaccess, url

> **可能重复：**
> [带有 mod_rewrite 的不区分大小写的 URL](https://stackoverflow.com/questions/1998156/case-insensitive-urls-with-mod-rewrite)

我必须使网址不区分大小写。这意味着我必须工作[http://www.test.com/About.php](http://www.test.com/About.php)和[http://www.test.com/about.php](http://www.test.com/about.php) .. 我尝试了下面的代码.但它不起作用。它显示索引页面。即，它显示索引页面的内容

```
 #Options +FollowSymlinks
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?q=$1 [L,QSA,NC] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T09:06:03.817

我已经找到[了这个问题](https://stackoverflow.com/questions/1998156/case-insensitive-urls-with-mod-rewrite)，它有一个公认的答案（复制如下以供参考）：

```
CheckSpelling on 
```

它似乎与您的情况相同（或足够相似）。

我不确定如何/是否可以将这个问题作为重复项关闭，但值得看看引用的答案是否首先解决了您的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:28:32.387

*nix 平台上的 apache 网络服务器对 URL 区分大小写，而 *nix 文件系统也已经区分大小写。

因此，开箱即用不支持您在 apache 配置中尝试执行的操作。

如果您只有一些文件，您也可以将规则硬编码到 .htaccess 中，或者开始创建重写映射：

```
RewriteRule ^about.php$ About.php [L,QSA]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA,NC] 
```

`mod_spelling`您可能也有兴趣使用可以处理 URL 和磁盘上的文件名差异的模块（例如 like ）扩展您的网络服务器。

另一种选择是您在内部`index.php`检查所请求文件的小写版本，`$_GET['q']`如果存在，则检查`include`它，`return`然后：

```
$basename = strtolower(basename(realpath($_GET['q'])));
if (is_file($path = __DIR__ . '/' . $basename)) {
    include($path);
    return;
} 
```

与实际文件系统进行比较的方式取决于您的具体需求和解决策略。

# iphone - 如何使用 NSXMLParser 将 XML 的节点存储到 NSArray

> ID：10242547
> 
> 赞同：0
> 
> 时间：2012-04-20T08:12:27.033
> 
> 标签：iphone, objective-c, nsxmlparser

我无法完全理解 NSXMLParser 的流程以及与它们关联的委托方法。是否有任何方式或任何示例详细解释如何使用 NSXMLParser 完成解析。我有另一个 XML，我需要在解析 XMl 后将相关的 qno、tin、tout 和 answer 存储到相应的字符串中。PFB XML。

```
<?xml version="1.0" encoding="UTF-8"?>
<ParticipantService>   
    <Response> 
        <FileName>CustomerSkillsIntro</FileName>
        <playlist>
            <question answer="t" qno="1" tin="71" title="Greet" tout="73"/>
            <question answer="t" qno="2" tin="74" title="Have Name Tag" tout="77"/>
            <question answer="t" qno="3" tin="78" title="Greet" tout="83"/>
            <question answer="t" qno="4" tin="109" title="Helping Do My Job" tout="112"/>
            <question answer="t" qno="5" tin="131" title="Greet Happily" tout="134"/>
            <question answer="t" qno="6" tin="141" title="Stay cheerful when resident is crabby" tout="144"/>
            <question answer="t" qno="7" tin="151" title="Bond with the new resident" tout="154"/>
            <question answer="t" qno="8" tin="161" title="Welcome cheerfully" tout="164"/>
            <question answer="t" qno="9" tin="169" title="Offer Help" tout="172"/>
            <question answer="t" qno="10" tin="178" title="Help with interest" tout="181"/>
            <question answer="t" qno="11" tin="183" title="Accompany" tout="186"/>
            <question answer="t" qno="12" tin="189" title="Pay attention to 2 resudents" tout="192"/>
            <question answer="t" qno="13" tin="199" title="Juggle the two accurately" tout="202"/>
            <question answer="t" qno="14" tin="207" title="Bring in other help when needed" tout="212"/>
            <question answer="t" qno="15" tin="219" title="Correct response I can ask" tout="222"/>
            <question answer="t" qno="16" tin="231" title="Be charming" tout="237"/>
            <question answer="t" qno="17" tin="247" title="Respond and delegate" tout="250"/>
            <question answer="t" qno="18" tin="261" title="Apologize" tout="263"/>
            <question answer="t" qno="19" tin="266" title="Offer activities" tout="270"/>
            <question answer="t" qno="20" tin="273" title="Be sensitive to needs" tout="276"/>
            <question answer="t" qno="21" tin="287" title="Offer anything you need" tout="290"/>
            <question answer="t" qno="22" tin="311" title="Take off shoes, honor unusual request" tout="315"/>
            <question answer="t" qno="23" tin="328" title="Always available menu explained" tout="331"/>
            <question answer="t" qno="24" tin="333" title="Willing to stay beyond shift" tout="336"/>
            <question answer="t" qno="25" tin="377" title="Explain policy" tout="380"/>
            <question answer="t" qno="26" tin="390" title="Understand resident" tout="396"/>
        </playlist>
        <path>lmsstaging.2xprime.com</path>
        <EncodedVideoURL>HTTP://lmsstaging.2xprime.com/test/vdos/Alzheimers.mp4</EncodedVideoURL>
    </Response>
    <RequestStatus> 
        <Code>1</Code>
        <Status>SUCCESS</Status> 
        <Message/>   
    </RequestStatus> 
</ParticipantService> 
```

有人可以解释一下如何解析这个 XML 以及关于 NSXMLParser 和委托方法如何工作的详细解释吗？我想将“tin”和“tout”存储到 NSArray 中，但我无法理解如何逐个节点解析它。这将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:31:31.017

`NSXMLParser`是所谓*的基于事件的 XML 解析器*或[SAX 类型](http://en.wikipedia.org/wiki/Simple_API_for_XML)解析器。它从头开始读取您的 XML，每次它找到一个新元素、一个关闭元素或字符数据时，它都会通知您。这是通过委托完成的，如果这些事件发生，您必须通过实现回调函数来指定您想要做什么。在解析您的示例 XML 时，它将或多或少地调用这些函数：

```
parser:yourParser didStartElement:@"playlist" namespaceURI:@"" qualifiedName:@"" attributes:attribDict
// attribDict empty

parser:yourParser didStartElement:@"question" namespaceURI:@"" qualifiedName:@"" attributes:attribDict
// attribDict = {@"answer" -> @"t", @"qno" -> @"2", @"tin" -> @"71", @"title" -> @"Greet", @"tout" -> @"73"}

parser:yourParser didEndElement:@"question" namespaceURI:@"" qualifiedName:@""

// ...repeating the last two calls for each question...

parser:yourParser didEndElement:@"playlist" namespaceURI:@"" qualifiedName:@"" 
```

所以，你应该像这样实现 didStartElement ：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict {
  if (elementName == @"question") {
    // save the elements of attributeDict in your array
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:27:02.293

NSXML Parser 有几个委托方法-

```
-(BOOL) parse:(NSData *)xmlData 

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict 

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string 
```

您可以在方法 didStartElement- 中使用以下代码行

```
if([elementName isEqualToString:@"question"]) {
    NSString *answer = [attributeDict valueForKey:@"answer"];
    NSString *qno = [attributeDict valueForKey:@"qno"];
    NSString *tin = [attributeDict valueForKey:@"tin"];
    NSString *title = [attributeDict valueForKey:@"title"];

   // Now You can store these in your preferable data models - data objects/array/dictionary
} 
```

编辑 -

```
@interface Question : NSObject

@property (nonatomic, retain) NSString *answer;
@property (nonatomic, retain) NSString *qno;
@property (nonatomic, retain) NSString *tin;
@property (nonatomic, retain) NSString *title;

@end

@implementation Question

@synthesize answer = _answer;
@synthesize qno = _qno;
@synthesize tin = _tin;
@synthesize title = _title;

- (void) dealloc {
    self.answer = nil;
    self.qno = nil;
    self.tin = nil;
    self.title = nil;

    [super dealloc];         
}
@end 
```

现在在您的 didStartElement 方法中-

```
NSMutableArray *questionsArray = [NSMutableArray array];
if([elementName isEqualToString:@"question"]) {
    Question *questionObject = [[Question alloc] init];
    questionObject.answer = [attributeDict valueForKey:@"answer"];
    questionObject.answerqno = [attributeDict valueForKey:@"qno"];
    questionObject.answertin = [attributeDict valueForKey:@"tin"];
    questionObject.answertitle = [attributeDict valueForKey:@"title"];

    [questionsArray addObject:questionObject];
    [questionObject release];
} 
```

您可以在类级别创建此数组并在您想要的地方使用。

编辑 2-从数组中提取数据-

```
//Suppose dataArray contains information - 
for (int i = 0; i < [dataArray count]; i++) {
    Question *obj = [dataArray objectAtIndex:i];
    NSLog(@"%@",obj.answer);
    NSLog(@"%@",obj.qno);
    NSLog(@"%@",obj.tin);
    NSLog(@"%@",obj.title);
} 
```

# php - 会话数据在本地工作但不在远程服务器上

> ID：10242549
> 
> 赞同：0
> 
> 时间：2012-04-20T08:12:30.963
> 
> 标签：php, session

这是我的代码。干净利落。

**1) first.html**

```
<body>
    <?php
    session_start();
    ...
    $somearray = $Object->method($somevar);
    $_SESSION["somearray"] = $somearray;
    ...
    ?>
</body> 
```

**1）第二个.html**

```
<body>
    <div id="map_canvas">
        <script language="javascript" type="text/javascript">
        <?php session_start(); ?>
        some_render_function(<?php echo json_encode($_SESSION["somearray"]); ?>);
        </script> 
    </div>       
</body> 
```

本地主机上完美运行的代码。

有两个事实可以帮助你们找出问题出在哪里。

**1）如果您离线和在线查看页面second.html的来源，您可以分别看到`some_render_function('all the stuff from the json')`和`some_render_function(NULL)`**

**2）如果我检查我的共享服务器文件夹，我可以看到一个目录`php_session`，其中显然包含所有正确的文件（在我测试我的项目时打开的所有会话中，其中包含正确的数据）**

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:30:32.657

Session_start 应该在任何输出之前。所以，移动`<?php`到文件的开头。否则，行为取决于服务器配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:34:10.883

您好`session_start`（[http://php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)）应该始终是您页面上的第一个参数...

例子

第一页

```
<?php session_start();?>
<html>
<head>
<title>First</title>
</head>
<body>
    <?php
    $somearray = $Object->method($somevar);
    $_SESSION["somearray"] = $somearray;
    ?>
</body>

</html> 
```

第二页

```
<?php session_start(); ?>
<html>
<head>
<title>Second</title>
</head>
<body>
    <?php
    var_dump($_SESSION["somearray"]);
    ?>
</body>
</html> 
```

# android - android eclipse java logcat 运行时错误

> ID：10242554
> 
> 赞同：0
> 
> 时间：2012-04-20T08:13:10.527
> 
> 标签：android, eclipse

```
04-21 02:27:40.341: E/vold(27): Error opening switch name path '/sys/class/switch/test2' (No such file or directory)

04-21 02:27:40.341: E/vold(27): Error bootstrapping switch '/sys/class/switch/test2' (No such file or directory)

04-21 02:27:40.341: E/vold(27): Error opening switch name path '/sys/class/switch/test' (No such file or directory)

04-21 02:27:40.341: E/vold(27): Error bootstrapping switch '/sys/class/switch/test' (No such file or directory)

04-21 02:27:49.111: E/BatteryService(52): usbOnlinePath not found

04-21 02:27:49.111: E/BatteryService(52): batteryVoltagePath not found

04-21 02:27:49.111: E/BatteryService(52): batteryTemperaturePath not found

04-21 02:27:49.111: E/SurfaceFlinger(52): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake

04-21 02:27:52.211: E/EventHub(52): could not get driver version for /dev/input/mouse0, Not a typewriter

04-21 02:27:52.211: E/EventHub(52): could not get driver version for /dev/input/mice, Not a typewriter

04-21 02:27:53.231: E/System(52): Failure starting core service

04-21 02:27:53.231: E/System(52): java.lang.SecurityException

04-21 02:27:53.231: E/System(52):   at android.os.BinderProxy.transact(Native Method)

04-21 02:27:53.231: E/System(52):   at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)

04-21 02:27:53.231: E/System(52):   at android.os.ServiceManager.addService(ServiceManager.java:72)

04-21 02:27:53.231: E/System(52):   at com.android.server.ServerThread.run(SystemServer.java:176)

04-21 02:27:53.251: E/AndroidRuntime(52): Crash logging skipped, no checkin service

04-21 02:28:01.915: E/ActivityThread(102): Failed to find provider info for android.server.checkin

04-21 02:28:03.255: E/ActivityThread(102): Failed to find provider info for android.server.checkin

04-21 02:28:03.325: E/ActivityThread(102): Failed to find provider info for android.server.checkin

04-21 02:28:05.265: E/MediaPlayerService(31): Couldn't open fd for content://settings/system/notification_sound

04-21 02:28:05.295: E/MediaPlayer(52): Unable to to create media player

04-21 02:28:13.005: E/AndroidRuntime(131): ERROR: thread attach failed

04-21 02:28:14.785: E/AndroidRuntime(210): ERROR: thread attach failed

04-21 02:28:14.975: E/jdwp(222): Failed sending req to debugger: Broken pipe (-1 of 27)

04-21 02:28:14.975: E/jdwp(222): Failed sending req to debugger: Broken pipe (-1 of 27)

04-21 02:28:14.975: E/jdwp(222): Failed sending reply to debugger: Broken pipe 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:49:02.553

我认为问题出在您的本机函数签名中。您应该使用 JNIEXPORT 和 JNICALL 来处理它。

使用[javah](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javah.html)工具生成头文件和源文件。

这是示例：[JNI 示例](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jniexamp.html)

下次在问另一个问题之前尝试找到一些相关的答案，例如[java-lang-unsatisfiedlinkerror 。](https://stackoverflow.com/questions/4813336/java-lang-unsatisfiedlinkerror)

# javascript - 选择下拉值的值时，将默认选项添加到某些控件中

> ID：10242556
> 
> 赞同：0
> 
> 时间：2012-04-20T08:13:12.210
> 
> 标签：javascript, knockout.js

我有两个下拉列表和一个输入框。当从下拉列表中选择一个值时，应在其他两个控件中预先选择一个特定值。

这是我的淘汰赛代码：

```
var viewModel = {
    templates: ko.observableArray(["Template1", "Template2"]),
    //when Template2 is selected Spanish should be preselected from the languages select list and name of the template should be written in the folderName inputbox (Template2)
    //when Template1 is selected French should be preselected and name of the template should be written in the folderName inputbox (Template1)
    languages: ko.observableArray(["English", "Spanish", "French"]),
    folderName: ko.observable()
}

ko.applyBindings(viewModel); 
```

这是我的示例 html 代码：

```
<select id="templates" data-bind="options: templates"></select>

<div>
<input data-bind="value: folderName"/>
</div>

<div>
<select id="languages" data-bind="options: languages"></select>
</div> 
```

选择 Template2 时，应从语言选择列表中预先选择西班牙语，并且应将模板名称写入 folderName 输入框 (Template2)。选择 Template1 时，应预先选择法语，并将模板名称写入 folderName 输入框（Template1）

小提琴：http: [//jsfiddle.net/PsyComa/Q8unN/19/](http://jsfiddle.net/PsyComa/Q8unN/19/)

我对javascript相当陌生，对工作示例的每一个帮助都会非常感激。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:23:14.217

这是更通用的代码。如果您`templateLanguageMap`使用模板语言对填充，此代码将解决您的问题。你不必写很多`if`语句。祝你好运！

```
<select id="templates" data-bind="options: templates"
    onchange="onTemplateChange(value);"></select>

<div>
<input id="folderName"  data-bind="value: folderName"/>
</div>

<div>
<select id="languages" data-bind="options: languages"></select>
</div> 
```

JavaScript：

```
 var viewModel = {
        templates: ko.observableArray(["Template1", "Template2"]),
        //when Template2 is selected Spanish should be preselected from the languages select list and name of the template should be written in the folderName inputbox (Template2)
        //when Template1 is selected French should be preselected and name of the template should be written in the folderName inputbox (Template1)
        languages: ko.observableArray(["English", "Spanish", "French"]),
        folderName: ko.observable()
    }

    var selectTemplates = document.getElementById('templates');
    var selectLanguages = document.getElementById('languages');
    var inputFolderName = document.getElementById('folderName');

    var templateLanguageMap = {"Template1":"Spanish", "Template2":"French"};

    onTemplateChange = function(value){
        inputFolderName.value = value;
        for ( var i = 0; i < selectLanguages.options.length; i++ ) {
            if ( selectLanguages.options[i].value == templateLanguageMap[value]) {
                selectLanguages.options[i].selected = true;
                return;
            }
        }
    }

    ko.applyBindings(viewModel);
    onTemplateChange(selectTemplates.value); 
```

# mongodb - 在mongoDB中按字符代码搜索

> ID：10242558
> 
> 赞同：0
> 
> 时间：2012-04-20T08:13:19.717
> 
> 标签：mongodb

如何找到包含字符 0x1F 的文档？

> {"描述":new RegExp("▼")}

返回 0 个结果。此外，搜索换行符返回 0 结果，尽管它存在于某些文档的描述中：

> {"描述":new RegExp("♪")}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:58:14.933

在 Mongo shell 上，您可以执行以下操作：

```
db.char.find( { "Description": /\x1F/ } ); 
```

# java - 使用 SAX Parser，获取属性的值

> ID：10242561
> 
> 赞同：17
> 
> 时间：2012-04-20T08:13:31.960
> 
> 标签：java, android, xml, saxparser, xml-attribute

我正在使用 Android 从 Web 解析 XML。下面的代码显示了 XML 的示例。我遇到的问题是我无法获取项目标签的字符串值。当我使用`name = attributes.getQName(i);`它时，它会输出名称，而不是属性的值。

```
<weatherdata>
 <timetags>
  <item name="date">
   <value>20/04/2012</value>
   <unit/>
   <image/>
   <class>dynamic</class>
   <description>The current date</description>
  </item> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-20T08:17:31.677

利用

```
attributes.getValue(i); 
```

代替

```
attributes.getQName(i); 
```

因为正如[医生](http://developer.android.com/reference/org/xml/sax/helpers/AttributesImpl.html#getQName%28int%29)所说：

**getQName**：*返回属性的限定（前缀）名称。*

**getValue**：*通过限定（前缀）名称查找属性的值。*

请参阅[此](http://examples.javacodegeeks.com/core-java/xml/sax/get-element-attributes-in-sax-xml-parsing)示例以获取属性名称和值

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-20T08:22:44.360

```
 @Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
     if(localName.equalsIgnoreCase("item")){
        //currentMessage.setMediaUrl(attributes.getValue(BaseFeedParser.Url));
                     String valueis=attributes.getValue("name")
    }
    super.startElement(uri, localName, qName, attributes);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T08:18:12.380

尝试`attributes.getValue(i)`方法

# function - Matlab中的限制变量

> ID：10242562
> 
> 赞同：0
> 
> 时间：2012-04-20T08:13:33.910
> 
> 标签：function, matlab, restriction

matlab中有没有办法限制函数中的变量

例如我有一个功能

```
function S0 = S0Func(obj, c, delta, xT, sigma)
beta = obj.betaFunc(sigma);
xb = obj.xbFunc(c, delta, sigma);
S0 = (1-obj.tau).*(obj.x0./(obj.r-obj.mu)-c./obj.r-(xb./(obj.r-obj.mu)-c./obj.r).*((obj.x0./xb).^beta)-((delta-1).*c./obj.r).*((obj.x0./xT).^beta-((obj.x0./xb).^beta)));
end 
```

我想要限制的地方（obj是一个类的对象）

```
0<xb<xT<1
0<c
1<delta 
```

我想做的是在上面提到的限制下绘制以下的 3d 图

```
S0Func(2.7, 1, 1, 0.3)-S0Func(c,delta,xT,0.2)<0; 
```

**编辑** 我尝试过使用等值面

```
optimalStraightCoupon = fminbnd(@(c) -(S0Function(c,1,1)+D0Function(c,1,1)), 0, 4);
[xT, delta, c] = meshgrid(0.8:.01:1, 1:.1:3, 0:.1:4);
values = S0Function(optimalStraightCoupon,1, 1)- S0Function(c,delta, xT);            
patch(isosurface(xT, c, delta, values, 1), 'FaceColor', 'red');
view(3); 
```

我得到了一些输出，但它不正确，因为违反了对 xT 的限制。

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:25:58.343

有点不清楚您要达到的目标。我希望您知道您可以编写诸如（伪代码）之类的语句：

```
if c>=0 exit 
```

从某种意义上说，这将您的函数限制为仅对满足定义约束的值进行操作。

前面说的太简单了，我敢肯定我误解了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:46:29.317

当您的约束被违反时，我只会返回 NaN 。

只需将以下行添加到您的函数中（最好在计算之前以节省时间）

```
if delta <= 1 || c <= 0 || ... % I assume you can write them yourself
   S0 = NaN;
   return
end 
```

绘图不会绘制 NaN。

尽管在您输入`c,delta,xT`时，问题是为什么它们首先被设置为*无效*值。如果您事先保证，您可以节省一些支票并因此节省时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:33:29.593

不，看来您希望的不仅仅是 3-d 图形。您似乎希望将此函数视为三个变量的函数：c、delta、xT。所以是一个 4-d 图。在这种情况下，您将需要简单地评估 3-d 网格上的函数（使用 meshgrid 或 ndgrid 生成点。）

然后使用等值面将结果可视化，本质上是一个更高维的等高线图。在不同的等值水平上做几个这样的图。

# iphone - 在 uitableviewcellstyledefault 中调整标题大小

> ID：10242566
> 
> 赞同：1
> 
> 时间：2012-04-20T08:13:46.590
> 
> 标签：iphone, objective-c, ios, uitableview

我已经尝试了一段时间，似乎无法找到解决方案。我`UITableViewCellStyleDefault`在我的表格视图中使用单元格样式，并试图在文本太长时调整字体大小。

**细胞创建**

```
static NSString *CellIdentifier = @"thisMonthCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    cell.selectionStyle = UITableViewCellSelectionStyleGray;

    [cell.textLabel setTextColor:[UIColor darkGrayColor]];
    [cell.textLabel setAdjustsFontSizeToFitWidth:YES];
    [cell.textLabel setMinimumFontSize:14];

    UILabel *valueLabel = [[UILabel alloc]initWithFrame:CGRectMake(190, 10, 100, 20)];
    [valueLabel setBackgroundColor:[UIColor clearColor]];
    valueLabel.tag = 1001;
    [valueLabel setTextAlignment:UITextAlignmentRight];
    [cell addSubview:valueLabel];

}

Expense *expense = [[self.dataHandler monthExpenses]objectAtIndex:indexPath.row];

UILabel *value = (UILabel*)[cell viewWithTag:1001];
[cell.textLabel setText:[expense name]];

if ([[expense value]doubleValue] > 0) {
    [value setText:[NSString stringWithFormat:@"+%.2f",[[expense value]doubleValue]]];
    [value setTextColor:[self greenColor]];    

}
else{
    [value setText:[NSString stringWithFormat:@"%.2f",[[expense value]doubleValue]]];
    [value setTextColor:[self redColor]];    
}
return cell; 
```

但不知何故，`textLabel`如果文本太长，则不会调整大小。

这是演示问题的屏幕截图：

![自动调整大小失败](../Images/01edff0708147c543030b922ade316e0.png)

有任何想法吗？

**更新**我设法通过删除标准标签并添加自定义标签来实现我的目标，..奇怪的是它不适用于标准标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:01:25.310

尝试这个`cell.textLabel.numberOfLines = 0;` `cell.textLabel.lineBreakMode = UILineBreakModeWordWrap`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:17:53.220

在创建值标签时也使用以下两行代码。

```
valueLabel.lineBreakMode = UILineBreakModeWordWrap;
valueLabel.numberOfLines = 0; 
```

已编辑-更改单元格的高度-

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *cellText = @"oooooooooooooooooooo"; //Text that you are using
    UIFont *cellFont = [UIFont fontWithName:@"Helvetica" size:16.0]; //Whatever font you are using.
    CGSize constraintSize = CGSizeMake(280.0f, MAXFLOAT);
    CGSize labelSize = [cellText sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

    return labelSize.height + 25.0; //25.0 is offset, you can change as per need 
```

}

# mysql - 错误（代码 1034）：加载数据错误

> ID：10242568
> 
> 赞同：1
> 
> 时间：2012-04-20T08:13:46.860
> 
> 标签：mysql, key, tmp

我当前的mysql版本是5.0.77。我创建了一个数据库，并尝试使用“load data infile”命令将我的数据加载到 MyISAM 表中。数据大小约为 3.5GB。

我在加载时遇到此错误：-

> 错误（代码 3）：写入文件“/tmp/STH06V6g”时出错（错误代码：28）
> 
> 错误（代码 1034）：固定桌子时出现 28
> 
> 错误（代码 1034）：行数从 106558636 更改为 237525263

当我检查 /var/logs/mysqld.log 时，它会显示以下警告：-

> 120420 9:33:10 [警告] 警告：启用键在 sample.X004 上得到 errno 28，重试

我做了一个 df -h 来检查我的文件使用情况：-

> 已使用的文件系统大小可用使用百分比已安装在
> 
> /dev/mapper/KusuVolGroup00-VAR
> 
> 2.0G 1.6G 342M 82% /var

在加载之前我没有启用/禁用任何键。我可以知道如何解决这个错误吗？

非常感谢您！

乔安妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:27:49.100

错误代码 28 表示“设备上没有剩余空间”。

# php - 如何在 php 中使用 LIKE 进行查询

> ID：10242574
> 
> 赞同：0
> 
> 时间：2012-04-20T08:14:09.980
> 
> 标签：php, mysql

在尝试进行 LIKE 选择查询时，我遇到了一些问题。这是我的代码：

```
$products = mysql_query("SELECT * FROM product WHERE 
                         prod_name LIKE '%" . $search_text . "%'")
            or die(mysql_error()); 
```

其中 $search_text 是用户输入。当我尝试输入“sony”文本进行测试并运行它时，它向我显示了如下错误消息：

```
Unknown column 'sony' in 'where clause' 
```

我不知道错误在哪里。有人可以告诉我有什么问题吗？

非常感谢你的帮助！

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:15:47.290

您的查询无效：

```
$products = mysql_query("SELECT * FROM product WHERE prod_name LIKE '%" . $search_text . "%'") or die(mysql_error()); 
```

替换`=`为`LIKE`

**编辑：**
好的。现在你改变了它。问题仍然存在？

让我猜猜……你`$search_text`是逃过周围的`''`？

尝试回显该值，看看你得到什么。您可能正在解析类似`LIKE '%'sony'%'`.

如果是这种情况并且您的值自动转义，您可以执行

```
$search_text = trim($search_text, "'"); 
```

或一个

```
$search_text = substr($search_text, 1, (strlen($search_text) - 2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:26:31.847

虽然这只是猜测

您可能在变量周围有反引号`$search_text`。再次检查您的查询并确保变量用单引号或双引号而不是反引号括起来。

反引号`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:41:14.613

从这行得到想法，我尝试在我的数据库上运行并为我工作

```
"select * from product where prod_name like('%".$search_text."%')" 
```

希望这会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T08:38:37.917

A. 我认为你已经净化了你的价值观

尝试

```
$searchText = mysql_real_escape_string ( $search_text );
$products = mysql_query ( "SELECT * 
        FROM product WHERE
        prod_name LIKE '%" . $searchText . "%'" ) or die ( mysql_error () ); 
```

B. 使用 double`%`不是一种有效的搜索方式 try use `LIKE '" . $searchText . "%'"`is Better Approach 

C. 运行`var_dump($searchText)`以确保您正在输出您期望的准确数据

# java - 我可以根据比例缩放 ValueAxis 吗？

> ID：10242575
> 
> 赞同：1
> 
> 时间：2012-04-20T08:14:19.817
> 
> 标签：java, swing, graph, jfreechart

![在此处输入图像描述](../Images/dd04924aefd3429dc91fc16cd1ffe362.png)

我正在使用 JFreeChart，我想根据旁边给出的比例缩放这个图，我该如何缩放这个图？这个问题有什么解决方案吗？

谷歌搜索时，我发现[writeScaledChartAsPNG](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartUtilities.html#writeScaledChartAsPNG%28java.io.OutputStream,%20org.jfree.chart.JFreeChart,%20int,%20int,%20int,%20int%29)，我可以使用它吗，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:14:02.993

> 我需要缩放`rangeAxis`

看起来`writeScaledChartAsPNG()`只是对现有图表进行了重新采样。相反，请使用与缩放相关的方法[`ChartPanel`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartPanel.html)，例如`zoomInRange()`，并使用 保存图表`writeChartAsPNG()`。你也可以`zoomRange()`在你的`rangeAxis`.

# javascript - onclick="javascript:func()" 与 onclick="func()"

> ID：10242576
> 
> 赞同：9
> 
> 时间：2012-04-20T08:14:26.547
> 
> 标签：javascript

有没有区别

```
<input type="submit" value="Register" onclick="javascript:submitTheForm();"> 
```

和

```
<input type="submit" value="Register" onclick="submitTheForm();"> 
```

我应该`javascript:`在 JS 函数调用之前使用吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T08:16:35.140

`javascript:`处理程序内部`onwhatever=""`是无操作的。此属性的内容始终是 JavaScript，因此`javascript:`定义了一个[标签](https://developer.mozilla.org/en/JavaScript/Reference/Statements/label)- 但在`switch`块或循环之外（您可以将它用于`break`/`continue`到标签的位置）它什么也不做。

但是，不鼓励使用内联事件处理程序，有[更好的](https://developer.mozilla.org/en/DOM/element.addEventListener) [方法](http://api.jquery.com/on/)来注册事件处理程序。

* * *

虽然问题中没有提到，但值得注意的是，`javascript:`在`href`属性中使用确实有效（并且在其中实际上是必要的），但由于各种原因非常不鼓励：

*   `this`不指向元素
*   调用返回值的函数会导致浏览器离开站点
*   单击禁用 JavaScript 中断的链接
*   尝试在新窗口/标签页中打开链接

因此，如果您真的必须使用内联事件，请始终使用`onclick=""`etc. 而不使用`javascript:`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:16:54.363

当你在一个`onclick`属性中时，你不应该使用`javascript:`前缀。当您想要一个链接`<a />`来处理 JS 函数时，这很有用，例如：

```
<a href="javascript:myfunc();"></a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T08:19:47.420

`javascript:func()`正在使用[javascript 协议](http://msdn.microsoft.com/en-us/library/aa767736%28v=VS.85%29.aspx)，以便它可以在锚`href`属性中使用。但是，不要这样做，请参阅[Why is it bad practice to use links with the javascript: “protocol”？](https://stackoverflow.com/q/2479557/540765)了解更多信息。

事件处理程序更适合触发事件而不是属性。

# c# - 如何将对象数组作为参数传递给 RESTful 服务

> ID：10242577
> 
> 赞同：0
> 
> 时间：2012-04-20T08:14:28.810
> 
> 标签：c#

我有一个类型类，其中包含键和值属性，我需要将类型对象数组发送到 restful 服务。我尝试了以下网址，但它不起作用。请改正。提前致谢。

[http://localhost:8080/CRService/services/CRService/newContentObjectRequest?User=abcd&types=](http://localhost:8080/CRService/services/CRService/newContentObjectRequest?User=abcd&types=) {"key":name, "value":xyz}&types={"key":assigned_to, "value":abcd}&types= {“键”：状态，“值”：完成}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:51:36.063

请查看restful服务的文档。看来它需要 JSON 格式的数据。

您需要将数据作为 HTTP POST 请求发送。

# c++ - 易失性重载？

> ID：10242578
> 
> 赞同：11
> 
> 时间：2012-04-20T08:14:51.557
> 
> 标签：c++, overloading, volatile

我听说 volatile 是像 const 一样的重载因素。

如果一个函数被 volatile 参数重载，那么什么时候调用 volatile 版本？

我无法想象调用 volatile-version 的情况。 

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T08:20:01.380

这是一个例子：

```
#include <iostream>

struct A {
    void foo() {
        std::cout << "in non-volatile" << std::endl;
    }
    void foo() volatile {
        std::cout << "in volatile" << std::endl;
    }
};

int main()
{
    A a;
    a.foo();
    volatile A b;
    b.foo();
} 
```

`b.foo()`将调用`volatile`重载。如果`struct A`, 没有 volatile 重载`foo`，`b.foo()`则无效。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-20T08:21:07.323

volatile 可以应用于参数，但直接应用于参数时，它不是重载的因素。然而，可以使用它来区分参数的类型。例如，这是合法的：

```
void f(int &p) {}; //reference to int
void f(volatile int &p) {}; //reference to volatile int 
```

这不是：

```
void f(int p) {};
void f(volatile int p) {}; 
```

原因是在第一个示例中，引用不是易失性的，而是整数。在第二个示例中，两种类型都是整数，因此是相同的类型。

还有一些不稳定的方法。它们类似于宣布`this`易变。因为`this`是指针而不是包含类型本身，所以以下也是合法的：

```
void c::f(int p) {};
void c::f(int p) volatile {}; 
```

这与通过 重载相同`const`。

C++ 标准的这个相关部分是 §13.1 可*重载声明*。来自 C++11 草案 n3290：

> 仅在存在或不存在 const 和/或 volatile 方面不同的参数声明是等效的。也就是说，在确定声明、定义或调用哪个函数时，将忽略每个参数类型的 const 和 volatile 类型说明符。[ 例子：

```
typedef const int cInt;
int f(int);
int f(const int);          // redeclaration of f(int)
int f(int) { /* ... */ }   // definition of f(int)
int f(cInt) { /* ... */ }  // error: redefinition of f(int) 
```

> —结束示例]
> 
> 只有参数类型说明最外层的 const 和 volatile 类型说明符以这种方式被忽略；隐藏在参数类型规范中的 const 和 volatile 类型说明符很重要，并且可用于区分重载函数声明^(124)。特别是，对于任何类型 T，`pointer to T`、`pointer to const T`和`pointer to volatile T`被视为不同的参数类型，如`reference to T`、`reference to const T`和`reference to volatile T`。
> 
> [124) 当参数类型包括函数类型时，例如在参数类型是指向函数的指针的情况下，内部函数类型的参数类型规范的最外层的 const 和 volatile 类型说明符也是忽略。]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T08:22:10.997

编写一个测试程序来找出答案。

```
void func(const int& a)
{
    std::cout << "func(const)" << std::endl;
}

void func(const volatile int& a)
{
    std::cout << "func(const volatile)" << std::endl;
}

int main()
{
    const int a = 0;
    const volatile int b = 0;
    func(a);
    func(b);
    system("pause");
    return 0;
} 
```

将输出：

```
func(const)
func(const volatile) 
```

# delphi - 如何将任何类型的文件编码为 base64 字符串，然后使用 Lazarus/Delphi 再次将其解码为文件？

> ID：10242580
> 
> 赞同：1
> 
> 时间：2012-04-20T08:14:55.080
> 
> 标签：delphi, serialization, base64, freepascal, lazarus

你能告诉我我该怎么做吗？是否有任何 Freepascal 单元可以为我做到这一点？我需要它，这样我的程序才能以基于 XML 的文件格式存储二进制数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T08:21:17.437

使用[`base64`](http://www.freepascal.org/docs-html/fcl/base64/index.html)单位和它的两个类，`TBase64EncodingStream`和`TBase64DecodingStream`。

这是一个[简单的例子](http://fpc-docs.gorilla3d.com/built-in-units/base64/tbase64encodingstream)：

```
program demo;

uses Classes, base64;

var
  DecodedStream: TStringStream;
  EncodedStream: TStringStream;
  Encoder: TBase64EncodingStream;
  Output: string;
begin
  DecodedStream := TStringStream.Create('Hello World!');
  EncodedStream := TStringStream.Create('');
  Encoder       := TBase64EncodingStream.Create(EncodedStream);
  Encoder.CopyFrom(DecodedStream, DecodedStream.Size);

  Output := EncodedStream.DataString;
  { Outputs 'SGVsbG8gV29ybGQh' }
  WriteLn(Output);

  DecodedStream.Free;
  EncodedStream.Free;
  Encoder.Free;
end. 
```

并且，在[相反的方向](http://fpc-docs.gorilla3d.com/built-in-units/base64/tbase64decodingstream)：

```
program demo;

uses Classes, base64;

var
  DecodedStream: TStringStream;
  EncodedStream: TStringStream;
  Decoder: TBase64DecodingStream;
  Output: string;
begin
  EncodedStream := TStringStream.Create('SGVsbG8gV29ybGQh');
  DecodedStream := TStringStream.Create('');
  Decoder       := TBase64DecodingStream.Create(EncodedStream);
  DecodedStream.CopyFrom(Decoder, Decoder.Size);

  Output := DecodedStream.DataString;
  { Outputs 'Hello World!' }
  WriteLn(Output);

  DecodedStream.Free;
  EncodedStream.Free;
  Decoder.Free;
end. 
```

或用于非基于流的使用的简写[encodestringbase64](http://www.freepascal.org/docs-html/fcl/base64/encodestringbase64.html)和[decodestringbase64](http://www.freepascal.org/docs-html/fcl/base64/decodestringbase64.html) (2.4.4+)：

```
Uses Base64;
var 
   s : AnsiString;
Begin
  s:=EncodeStringBase64('Hello world!');
  Writeln('Encoded : ',s);
  s:=DecodeStringBase64(s);
  Writeln('Decoded again : ',s);    
end. 
```

# c# - 从c#执行（jar文件）批处理脚本

> ID：10242584
> 
> 赞同：-1
> 
> 时间：2012-04-20T08:15:01.447
> 
> 标签：c#, selenium, jar, batch-file, executable-jar

我有一个包含硒 jar 文件的批处理脚本。我想从 C# 执行批处理脚本。我可以知道这是怎么可能的。

例子.bat

> java -jar“硒罐的路径”

我想从 C# 执行这个 example.bat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:17:05.173

使用[Process 和 ProcessStartInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)

将您的 java 命令或您的批处理文件名放在`command`字符串中。

```
 System.Diagnostics.ProcessStartInfo procStartInfo = new System.Diagnostics.ProcessStartInfo("cmd", "/c " + command);

// The following commands are needed to redirect the standard output.
// This means that it will be redirected to the Process.StandardOutput StreamReader.
procStartInfo.RedirectStandardOutput = true;
procStartInfo.UseShellExecute = false;
// Do not create the black window.
procStartInfo.CreateNoWindow = true;
// Now we create a process, assign its ProcessStartInfo and start it
System.Diagnostics.Process proc = new System.Diagnostics.Process();
proc.StartInfo = procStartInfo;
proc.Start();

// Get the output into a string
string result = proc.StandardOutput.ReadToEnd();
// Display the command output.
Console.WriteLine(result); 
```

如果你想异步运行它，试试这个：

```
/// <summary>
/// Execute the command Asynchronously.
/// </summary>
/// <param name="command">string command.</param>
public void ExecuteCommandAsync(string command)
{
   try
   {
    //Asynchronously start the Thread to process the Execute command request.
    Thread objThread = new Thread(new ParameterizedThreadStart(ExecuteCommandSync));
    //Make the thread as background thread.
    objThread.IsBackground = true;
    //Set the Priority of the thread.
    objThread.Priority = ThreadPriority.AboveNormal;
    //Start the thread.
    objThread.Start(command);
   }
   catch (ThreadStartException objException)
   {
    // Log the exception
   }
   catch (ThreadAbortException objException)
   {
    // Log the exception
   }
   catch (Exception objException)
   {
    // Log the exception
   }
} 
```

# java - 安卓加载动画

> ID：10242585
> 
> 赞同：7
> 
> 时间：2012-04-20T08:15:15.940
> 
> 标签：java, android

我正在寻找一些关于如何在 android 中创建加载动画的信息。是否可以创建这个动画，我可以在一个线程中调用这个动画并在另一个线程中结束？

我寻求这个：

![在此处输入图像描述](../Images/39018a6badea399be946aa1e45e1a9dd.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-20T08:19:08.577

试试下面的代码

ProgressDialog 用于显示：

```
 ProgressDialog mDialog = new ProgressDialog(getApplicationContext());
                mDialog.setMessage("Loading...");
                mDialog.setCancelable(false);
                mDialog.show(); 
```

取消 ProgressDialog 后，代码如下：

```
 mdialog.dismiss(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T08:19:15.187

这基本上是通过[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)和由[AsyncTask启动和关闭的](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html#WorkerThreads)[ProgressDialog](http://developer.android.com/reference/android/app/ProgressDialog.html)（使用微调器样式）完成的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T08:30:22.903

您不能从该 UI 线程以外的任何线程启动/结束 ProgressDialog。这是最简单的，因为您希望使用 AsyncTask 方法 onPreExecute onPostExecute。但我会小心的。

1.  您不想从异步任务中丢失对对话框的引用（用户更改方向或旋转屏幕）。所以你想保持 WeakReference 到对话框
2.  如果您正在认真加载 worj，我建议您使用 Service 并侦听服务回调（如广播）来控制对话。这也将允许您将活动生命周期与后台工作分开。

# java - 如何在休眠中将子类用于表中的属性？

> ID：10242587
> 
> 赞同：0
> 
> 时间：2012-04-20T08:15:31.913
> 
> 标签：java, hibernate, hibernate-mapping

我有以下域对象

```
Loan {
     int id;
     Date attribute1;
}

LoanExtension {
     Date attribute2;
} 
```

我想像这样保留我的对象，因为有时我只想更改数据库中 LoanExtension 中的属性（即，贷款对象中的属性 1 在对象中将为空，我不希望在数据库中设置它）。

这怎么可能使用带有 xml 的休眠映射？我做了以下

```
<class name="org.domain.borrowerReview.Loan" table="loan_profiles" >
    <cache usage="read-only"/>
    <id name="loanId" column="id">
        <generator class="native"/>
    </id>
    <version name="attribute1" column="date_1/>
    <subclass name="org.domain.borrowerReview.LoanExtension" extends="org.rangde.domain.borrowerReview.LoanProfilesUpdate">
        <property name="attribute2" column="date_2" />
    </subclass>
</class> 
```

我得到了这个例外：当使用“单表每个层次结构”并且一个类有子类时，需要鉴别器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:10:25.743

**简短的回答**

您需要添加一个鉴别器列并将代码段更改为类似的内容。

```
<class name="org.domain.borrowerReview.Loan" table="loan_profiles" > 
    <cache usage="read-only"/> 
    <id name="loanId" column="id"> 
        <generator class="native"/> 
    </id> 
    <version name="attribute1" column="date_1/> 
    <discriminator column="loan_profiles_type" type="string"/>
    <subclass name="org.domain.borrowerReview.LoanExtension" extends="org.rangde.domain.borrowerReview.LoanProfilesUpdate"> 
        <property name="attribute2" column="date_2" /> 
    </subclass> 
</class> 
```

**长答案**

首先，请记住 JPA 中的继承与常规继承并非绝对平行。

必须评估类的设计将如何影响底层模式。

你还没有提到你希望你的表结构如何。

Hibernate 提供了三种继承机制。

*   每个类层次结构表
*   每个子类的表
*   每个具体类的表

[在此处](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch10.html)查看详细信息

您的 xml 片段表明您正在使用每个类层次结构的表。

现在，如果一个有子类，那么如果它只是一个子类（尽管它是允许的），那将没有什么用处。在“每个类层次结构表”下，所有子类都放在同一个表中。

为了区分特定记录属于哪个子类，hibernate 依赖于鉴别器列。

您需要定义相同的。

请参阅以下文档[文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch10.html#inheritance-tableperclass)。

# javascript - 在 qtip2 中使用 themeroller 主题

> ID：10242588
> 
> 赞同：3
> 
> 时间：2012-04-20T08:15:42.880
> 
> 标签：javascript, jquery, qtip2

我目前在我的应用程序中使用 REDMOND 主题，并且只需要将 THEMEROLLER 主题用于 qtip2 工具提示。由于我已将工具提示定义为小部件，因此它应该使用主题滚轮它们。我无法决定如何以及在我的 javascript 文件中添加 themeroller css 文件的位置。

请帮忙。

头部分的css文件是：

```
<link rel="stylesheet" type="text/css" href="css/redmond/jquery-ui-1.8.19.custom.css" />
<link rel="stylesheet" type="text/css" href="css/jquery.qtip.min.css" />
<link rel="stylesheet" type="text/css" href="css/wms11.css" /> 
```

我的 js 文件末尾的 javascript 文件是：

```
<script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="js/jquery-ui-1.8.19.custom.min.js" type="text/javascript"></script>
<script src="js/jquery.qtip.min.js" type="text/javascript"></script>
<script src="js/wms11.js" type="text/javascript"></script> 
```

我的 qtip2 语句是：

```
$(this).qtip({
     content: {
    text: function(api) {
        return(return_array[POPUP_HTML_STR]);
    },
    title: {
        text: function(api) {
            return(qtip_title);
        }
    }
    },
    position: {
    viewport: $(window)
    },
    style: { 
    classes: 'ui-widget ui-tooltip-rounded ui-tooltip-shadow ui-tooltip-dark',
    widget: true,
    tip: 'top center',
    width: 220,
    height: 200,
    padding: 5,
    background: 'black',
    textAlign: 'left',
    border: {
        width: 7,
        radius: 5,
        color: '#A2D959'
    },
    tip: 'top center',
    },
    show: {
    ready: true
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-19T11:52:56.373

如 P6345uk 所述，您应该设置 style.def = false 以删除 qTip2 的任何自定义样式。为我工作。

```
$('.selector').qtip({
    content: 'I won\'t be styled by the pages Themeroller styles',
    style: {
        widget: true, // Use the jQuery UI widget classes
        def: false // Remove the default styling (usually a good idea, see below)
    }
}) 
```

# c# - EventHandler 和 ElapsedEventHandler 有什么区别？

> ID：10242591
> 
> 赞同：1
> 
> 时间：2012-04-20T08:16:08.513
> 
> 标签：c#, events

到目前为止，在我对 c# 的有限使用中，我订阅了几个事件。为什么以下两个代码片段使用两个不同的单词`EventHandler`and `ElapsedEventHandler`？

```
 myProcess = new Process();
        myProcess.StartInfo.FileName = @"notepad.exe";
        myProcess.Exited += new EventHandler(MyProcessExited); 
```

相比：

```
 myTimer = new System.Timers.Timer(tickLength);
        myTimer.Elapsed += new ElapsedEventHandler(myTimer_Elapsed); 
```

这些词是特定于我正在使用其事件的对象吗`EventHandler`？`ElapsedEventHandler`或者是否有一整套对象我必须使用“EventHandler”和不同的对象集我必须使用“ElapsedEventHandler”？（即对于我们使用的对象集合 X`xxxxxEventHandler`等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T10:18:48.440

> 这些词 EventHandler 和 ElapsedEventHandler 是否特定于我正在使用其事件的对象？

这个词是代表的名字。它们特定于从对象传递的信息，该对象将事件引发到该事件的订阅者。阅读下面的事件、委托和参数传递。

C# 中的事件是类在对象发生一些有趣的事情时向该类的客户端提供通知的一种方式。事件是使用[委托](http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.80%29.aspx)声明的。

因此，如果您想通知客户您的对象中发生了一些有趣的事情，您可以声明委托：

```
public delegate void SomethingHappenedDelegate(); 
```

并在你的类中声明这种类型的事件：

```
class Foo
{
    public event SomethingHappenedDelegate SomethingHappened;

    // other code, which raises SomethingHappened event
    // when something interesting happened
} 
```

当这个类的客户想要被通知有趣的事情发生时，他们应该订阅SomethingHappened事件。并且事件处理程序签名必须匹配事件类型（在这种情况下为 SomethingHappenedDelegate）：

```
static void Main(string[] args)
{
    Foo foo = new Foo();
    foo.SomethingHappened += new SomethingHappenedDelegate(Foo_SomethingHappened);            
}

// this method should be: void MethodName()
static void Foo_SomethingHappened()
{
    // you notified, that something happened
} 
```

当您需要在通知客户端时传递一些额外的数据时，您应该使用不同的委托类型，它需要一些参数。例如，如果您想将一些消息传递给客户端，请更改事件的委托类型：

```
public delegate void SomethingHappenedDelegate(string message); 
```

现在您应该更改事件处理程序以对应此委托类型：

```
static void Foo_SomethingHappened(string message)
{
    // you notified, that something happened and you recieved a message
} 
```

另一个例子，如果我们想传递引发事件的对象实例，以及一些额外的参数消息和时间：

```
public delegate void SomethingHappenedDelegate(object sender, string message, DateTime time); 
```

然后我们应该有具有相同签名的事件处理程序：

```
static void Main(string[] args)
{
    Foo foo1 = new Foo();
    foo1.SomethingHappened += new SomethingHappenedDelegate(Foo_SomethingHappened);
    Foo foo2 = new Foo();
    foo2.SomethingHappened += new SomethingHappenedDelegate(Foo_SomethingHappened); 
}

// we use same event handler for all SomethingHappened events
static void Foo_SomethingHappened(object sender, string message, DateTime time)
{
    Foo foo = sender as Foo; // now we get object, which raised event
    // and we can use message and time
} 
```

因此，所有事件都具有某种委托的类型。该委托的定义描述了哪些参数应该接收方法，哪些将处理事件。在您的代码中，您使用两个事件 - [Process.Exited](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)和[Timer.Elapsed](http://msdn.microsoft.com/en-us/library/system.timers.timer.elapsed.aspx)。让我们看看这些事件是如何定义的：

```
public event EventHandler Exited;
public event ElapsedEventHandler Elapsed; 
```

您可以在这里看到不同类型的代表：

```
public delegate void EventHandler(object sender, EventArgs e);
public delegate void ElapsedEventHandler(object sender, ElapsedEventArgs e); 
```

从定义中可以看出，这些委托具有相同的第一个参数（发送者）和不同的最后一个参数。因此，这些事件的处理程序也应该有不同的签名，应该匹配这些委托。

您可能想知道，为什么第二个参数的名称以 EventArgs 结尾。如果你想通知其他对象，SomethingHappened，那么 C# 中存在以下约定：

*   事件名称应该是`SomethingHappened`
*   如果客户端需要传递一些额外的数据，这些数据封装在对象中，该对象派生自 EventArgs 类：`SomethingHappenedEventArgs`。
*   事件委托应该是[EventHandler](http://msdn.microsoft.com/en-us/library/system.eventhandler%28v=vs.80%29.aspx)（如果没有额外的信息应该传递给客户端），或者它应该是通用类型[EventHandler](http://msdn.microsoft.com/en-us/library/db0etb8x.aspx)`<SomethingHappenedEventArgs>`，或者它应该是具有名称`SomethingHappenedEventHandler`和签名的自定义委托 void（对象发送者，SomethingHappenedEventArgs e）

[在这里](http://msdn.microsoft.com/en-us/library/edzehd2t%28v=vs.80%29.aspx)阅读更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:19:13.143

不，事件名称是框架设计者选择的问题 + 它们与代表任何特定对象事件的委托紧密耦合。

EventHandler 定义为：

```
[Serializable]
[ComVisible(true)]
public delegate void EventHandler(object sender, EventArgs e); 
```

ElapsedEventHandler 定义为：

```
public delegate void ElapsedEventHandler(object sender, ElapsedEventArgs e); 
```

如您所见，它们是不同的`delegate`类型。

# ios - 我如何将 UIWebView 转换为位图

> ID：10242592
> 
> 赞同：1
> 
> 时间：2012-04-20T08:16:08.950
> 
> 标签：ios, uiwebview, bitmap

大家好，我一直在尝试将我当前正在显示 ppt 文件的 UIWebView 转换为位图图像。

我有这个代码：

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 768, 708)];

NSString *path = [[NSBundle mainBundle] pathForResource:documentName ofType:nil];
NSURL *targetURL = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
[webView loadRequest:request];

NSLog(@"Ouverture du contexte image");
UIGraphicsBeginImageContext(webView.bounds.size);
[webView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

webview实际上显示得很好，但我没有设法创建它的渲染图像，如果有人知道问题出在哪里;）谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:44:35.113

你的截图代码没有任何问题——你只是过早地使用它。

`[webView loadRequest:request];`发起一个异步客户端请求。这意味着您`webView`甚至在加载其内容之前就对其进行了截图。

将您的截屏代码移至`UIWebViewDelegate`'s 方法`webViewDidFinishLoad:`。当然，你将不得不为`delegate`你分配一个`webView`来实现这一点。

# node.js - socket.io 保持 404 状态？

> ID：10242594
> 
> 赞同：2
> 
> 时间：2012-04-20T08:16:23.530
> 
> 标签：node.js, socket.io

对不起这个愚蠢的问题，我确定这是一个菜鸟错误。我正在关注如何使用套接字 io：[http](http://socket.io/#how-to-use) ://socket.io/#how-to-use并一直遇到问题；

我有一个节点应用程序（运行版本 3.0 alpha 的 express）并具有以下内容：

```
app = express()

io = require('socket.io').listen app 
```

我已经编辑了 layout.jade 并添加了：

```
script(src="/socket.io/socket.io.js") 
```

我也运行`npm install socket.io`并确认它在服务器上启动正常。

如果我浏览到任何页面，控制台会一直显示：

`GET http://localhost:3000/socket.io/socket.io.js 404 (Not Found)`

其他人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T08:56:50.693

这是我刚刚测试过的分步说明

```
express socket
cd socket
npm install
npm install socket.io 
```

在 app.js 中添加以下内容

```
var io = require('socket.io').listen(app); 
```

跑

```
node app 
```

在控制台中，您应该看到

```
info  - socket.io started 
```

在浏览器中转到

[http://localhost:3000/socket.io/socket.io.js](http://localhost:3000/socket.io/socket.io.js)

你应该看到原始的 JavaScript

编辑：

我也遇到了 3.0alpha1 的问题。看起来像一个错误。这是一个丑陋的解决方法

```
var fs = require('fs');
app.get('/socket.io/socket.io.js', function(req, res) {
    fs.readFile('/PROJECT_HOME/node_modules/socket.io/lib/socket.io.js', function(error, content) {
        if (error) {
            res.writeHead(500);
            res.end();
        }
        else {
            res.writeHead(200, { 'Content-Type': 'text/javascript' });
            res.end(content, 'utf-8');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:06:41.310

你是从 app.js 运行 layout.jade 吗？

```
app.get('/',function(req,res){
    res.sendfile('index.html');
}); 
```

假设您的模板位于 index.html 文件中，这需要包含在 app.js 中。

# java - Maven + javadoc：添加离线链接

> ID：10242598
> 
> 赞同：0
> 
> 时间：2012-04-20T08:16:42.017
> 
> 标签：java, maven, jenkins, javadoc

对于我们詹金斯服务器中的每项工作，我还想构建 javadoc。这些项目是 maven 项目，所以我使用 mvn javadoc:javadoc 来生成 javadoc。这工作得很好，但现在我想与我们使用的第三方 API 的外部 javadoc 链接（例如 wicket）。为此，我向（父）pom.xml 添加了一个属性，如下[所述](http://maven.apache.org/maven-1.x/plugins/javadoc/faq.html#offlineLinks)：

```
<properties>
    <maven.javadoc.offlineLinks>http://wicket.apache.org/apidocs/1.5/</maven.javadoc.offlineLinks>
</properties> 
```

但是，这不起作用。在生成的 javadoc 中，对 Wicket 类的引用被呈现为简单的文本，而不是离线 javadoc 的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:40:50.200

Just use the following configuration for [maven-javadoc-plugin](http://maven.apache.org/plugins/maven-javadoc-plugin/):

```
<offlineLinks>
  <offlineLink>
    <url>http://download.oracle.com/javase/1.5.0/docs/api/</url>
    <location>../javadoc/jdk-5.0/</location>
  </offlineLink>
</offlineLinks> 
```

# php - 如何使用 Doctrine 记录我的对象的每个版本？

> ID：10242601
> 
> 赞同：1
> 
> 时间：2012-04-20T08:16:50.057
> 
> 标签：php, symfony1, doctrine, symfony-1.4

```
 public function executeNew(sfWebRequest $request)
  {
    $this->form = new JobeetJobForm();
  }

  public function executeCreate(sfWebRequest $request)
  {
    $this->forward404Unless($request->isMethod('post'));

    $this->form = new JobeetJobForm();

    $this->processForm($request, $this->form);

    $this->setTemplate('new');
  }

    protected function processForm(sfWebRequest $request, sfForm $form)
  {
    $form->bind($request->getParameter($form->getName()));
    if ($form->isValid())
    {
      $jobeet_job = $form->save();

      $this->redirect('job/edit?id='.$jobeet_job['id']);
    }
  } 
```

我用学说生成器生成了模块。我想制作：如果我编辑当前作业并单击保存，那么我想创建具有新 ID 和与当前编辑作业相同数据的新对象作业，而不是保存此编辑。我怎样才能做到？我想让它和维基百科一样。

**编辑：** 我不知道如何打开动作编辑，编辑几个字段并单击保存，而是保存我想创建新对象的更改。我必须在**processForm**中编辑什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T08:33:31.230

这正是[Doctrine 可版本化行为](http://readthedocs.org/docs/doctrine/en/latest/en/manual/behaviors.html#versionable)的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:04:56.897

当您需要保留所有相关对象的版本时。您可以序列化对象并将其保存在数据库中。查看 github 上的 JMSerializerBundle。

# sql - 关于从上传的文档中提取文本的建议

> ID：10242605
> 
> 赞同：0
> 
> 时间：2012-04-20T08:17:03.317
> 
> 标签：sql, apache-poi, text-extraction

目前，我每天都会将大量文档（.doc、.docx、.odt、pdf）上传到我的网站，这些文档存储在 sql 数据库（mediumblob）中。

目前，我从数据库中打开文档并将文本版本剪切并粘贴到数据库中的字段中，以便快速参考和搜索功能。

我正在寻找自动化这个“剪切和粘贴”过程 - 只要我可以提取文本，格式就不是一个真正的问题 - 并且希望有些人能够提出一条好的路线？

我尝试使用正则表达式来操作 blob 字段的内容，但它并没有真正起作用。

我一直在研究 Apache POI，以便在上传时提取文本，但考虑到我相对简单的需求，我不禁认为这可能有点矫枉过正。

鉴于我遇到的各种文档格式以及当前将内容存储在 blob 字段中，Apache POI 是否是在这种情况下使用的最佳解决方案，或者有人可以提出替代方案吗？

非常感谢您的帮助和建议。

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:36:29.323

[Apache POI](http://poi.apache.org/)仅适用于 Microsoft Office 格式（.xls、.docx、.msg 等）。对于这些格式，它提供了用于处理文件的类（总是读取，也支持许多写入），以及文本提取器。

对于通用文本提取框架，您应该查看[Apache Tika](http://tika.apache.org/)。Tika 在内部使用 POI 来处理 Microsoft 格式，并使用许多其他库来处理不同的格式。例如，Tika 将同时处理 PDF 和 ODF/ODT，这是您在问题中提到的另外两种文件格式。

[Apache Tika 网站](http://tika.apache.org/)上有一些快速入门教程和示例，我建议您浏览一下。它上手非常快，您应该能够轻松更改代码以在上传期间通过 Tika 发送文档以获得纯文本版本，或事件 XHTML（如果这对您更有帮助）。

# java - 了解 java 或 GWT 中的复合材料

> ID：10242618
> 
> 赞同：0
> 
> 时间：2012-04-20T08:18:07.107
> 
> 标签：java, gwt, composite

我在理解复合材料方面有问题。

在 Frame 类中，当加载 vp 时，我有 verticalPanel(vp)，getAction 和 get Button 在 vp 上可见

当单击按钮时，执行 getTree 并且在自定义树的位置初始化了 treeC 类。和树项。

我想在 TreeC 类中使用动作对象

怎么做。

请帮助。

```
public class Frame{
public frame () {
    initWidget(getFramePanel());
}
Private VerticalalPanel getFramePanel() { 
    if (vp== null) {
        vp= new VerticalalPanel();
        vp.setSize("1442px", "750px");
        vp.add(getAction());// **are composites**
        vp.add(getButton) // **are composite**

    }
    return vp;

private Action getAction() {
        if (action == null) {
            action = new Action(); // In action class there are 7 buttons and 2 methods //setDisplayRepository(), and setDisplayFolder()
            action.setDisplayRepository();
        }
        return action;
    }
}
private Button getButton() {
        if (btn == null) {
            btn = new Button("Click");
            btnProperties.addClickHandler(new ClickHandler() {
                public void onClick(ClickEvent event) {
                    hp.add(getTree());
                }
            });
            btn.setSize("37px", "36px");

        }
        return btnProperties;
    }

private TreeCmis getTreeC() {
        if (treeC == null) {
            treeC = new TreeC();
            treeC.setWidth("360px");
        }
        return treeCmis;
    }
} 
```

* * *

```
public class TreeC extends Composite{
private Tree repo;
//constructor
public TreeC {

createTree()
}
Void createTree(){
/* here i need to to use the object action declared in frame class
For using action.setDisplayfolder*/
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:43:58.887

最简单的方法是：

```
public class TreeC extends Composite{
  private Tree repo;
  private Action action;
  //constructor
  public TreeC(Action action) {
   this.action = action;
   createTree()
  }
  void createTree(){
   /* here i need to to use the object action declared in frame class
   For using action.setDisplayfolder*/
  }
} 
```

创建实例时 `treeC = new TreeC(action);`

# svn - 有关 svn 中结帐目录的信息

> ID：10242619
> 
> 赞同：0
> 
> 时间：2012-04-20T08:18:07.210
> 
> 标签：svn

我有一个 svn 存储库，我用过一段时间。我很确定在我的一台机器上某处的工作目录中有一些未提交的更改。但是，我找不到工作目录（可能是偶然删除了它）。

这似乎是一个长镜头。存储库是否包含有关签出目录的任何信息。具体来说，远程 (ssh) 检出中继的机器的 IP/主机名？

-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:27:45.630

不，svn 存储库不包含有关签出目录的信息。该操作`svn checkout`基本上是只读操作。

但是，您可能会在其他地方找到有关客户端的信息 - 取决于您访问存储库的方式。如果您使用*http/apache*访问存储库，您将在 apache 日志文件中找到包含 IP 地址的客户端。如果您使用 访问存储库`ssh`，您可以在 中找到信息`/var/log/auth`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:47:28.973

正如@nosid 所说：*不，svn 存储库不包含有关签出目录的信息* （或未提交的更改）。但是，如果您没有删除未提交的数据，`svn status`将显示所有更改/添加/未版本化的项目。修改的项目将以`M`(run `svn status --help`) 开头。因此，如果您在所有可疑的工作副本上运行它 - 也许您会很幸运。如果您已经知道我写的内容，请提前抱歉。

# java - 使用 freemarker 生成要在电子邮件中发送的 html，他们是否还是要使用呈现的 jsp 页面来代替？

> ID：10242625
> 
> 赞同：0
> 
> 时间：2012-04-20T08:18:53.253
> 
> 标签：java, spring, jsp, freemarker

使用 Spring 和 java mail sender 发送电子邮件。

他们无论如何我都可以使用普通的jsp视图和jstl标签吗？我不想再学习一堆标签/语法？

目前我的代码如下所示：

```
StringBuffer content = new StringBuffer();
Configuration configuration = freeMarkerConfigurer.getConfiguration();
String templateName = "vslEmail.ftl";
Map<String, String> templateVars = new HashMap<String, String>();
templateVars.put("firstName", "john");
templateVars.put("surname", "doe");
try {
  content.append(FreeMarkerTemplateUtils.processTemplateIntoString(configuration.getTemplate(ftlName), tempalteVars));
}
catch (Exception e) {
  // handle
}
// content.append("<br>Test data");
sendMime(defaultEmailAddress, subject, content.toString()); 
```

我只想引用一个 jsp 而不是 ftl ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:10:29.793

你可以显式渲染一个jsp，但你需要一个请求对象！

```
request.getRequestDispatcher("/WEB-INF/mai/myMail.jsp").include(request, response); 
```

另请参阅此[StackOverflow 答案](https://stackoverflow.com/a/1719549/280244)（以及该问题的其他答案）。它显示了一个创建（假）响应对象的示例，该对象允许您处理创建的 html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:55:31.347

您总是可以向位于您自己的 Web 服务器上的 JSP 发出请求，获取响应，然后将其放入您的电子邮件中。这有点hacky，必须注意确保您不会向外界打开这些页面，但它会起作用。

# iphone - 如何在 UIScrollView 中自定义分页？

> ID：10242626
> 
> 赞同：0
> 
> 时间：2012-04-20T08:18:56.467
> 
> 标签：iphone, objective-c, uiscrollview

我在滚动视图中有一个问题。

现在我写了一个关于带有滚动视图的图片库的示例。我在滚动视图中添加了很多图像。每次显示3个图像，问题是如何正确测量滚动。例如：每次滚动最少移动 1 张图像。现在，我认为每次滚动时，移动的最小图像是 3。这让我无法在我想看到的正确图像上停下来。下面是代码。

```
- (void)layoutScrollImages
{
    UIImageView *view = nil;
    NSArray *subviews = [scroll subviews];

    // reposition all image subviews in a horizontal serial fashion
    CGFloat curXLoc = 0;
    for (view in subviews)
    {
        if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
        {
            CGRect frame = view.frame;
            frame.origin = CGPointMake(curXLoc, 0);
            view.frame = frame;

            curXLoc += (kScrollObjWidth);
        }
    }

    // set the content size so it can be scrollable
    [scroll setContentSize:CGSizeMake((kNumImages * kScrollObjWidth), [scroll bounds].size.height)];
}

#pragma mark - View lifecycle
- (void)viewDidLoad
{
    [super viewDidLoad];
    // 1\. setup the scrollview for multiple images and add it to the view controller
    //
    // note: the following can be done in Interface Builder, but we show this in code for clarity
    [scroll setBackgroundColor:[UIColor blackColor]];
    [scroll setCanCancelContentTouches:NO];
    scroll.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    scroll.clipsToBounds = YES;     // default is NO, we want to restrict drawing within our scrollview
    scroll.scrollEnabled = YES;

    // pagingEnabled property default is NO, if set the scroller will stop or snap at each photo
    // if you want free-flowing scroll, don't set this property.
    scroll.pagingEnabled = YES;

    // load all the images from our bundle and add them to the scroll view
    NSUInteger i;
    for (i = 1; i <= kNumImages; i++)
    {
        NSString *imageName = [NSString stringWithFormat:@"image%d.jpg", i];
        UIImage *image = [UIImage imageNamed:imageName];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

        // setup each frame to a default height and width, it will be properly placed when we call "updateScrollList"
        CGRect rect = imageView.frame;
        rect.size.height = kScrollObjHeight;
        rect.size.width = kScrollObjWidth;
        imageView.frame = rect;
        imageView.tag = i;  // tag our images for later use when we place them in serial fashion
        [scroll addSubview:imageView];
        [imageView release];
    }

    [self layoutScrollImages];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:42:22.150

使用此代码......

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView
 {
if(scroll.contentOffset.y> 320)
{

    int y  = scrollView.contentOffset.y;
    y = y/3;
    [scrollView setContentOffset:CGPointMake(0, y)];
}
} 
```

希望，这会帮助你......冷静

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T04:10:35.080

子类化内容视图并覆盖此函数：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
if ([self pointInside:point withEvent:event]) {
    if ([[self subviews] count] > 0) {
        //force return of first child, if exists
        return [[self subviews] objectAtIndex:0];
    } else {
        return self;
    }
}
return nil; } 
```

[请参阅https://github.com/taufikobet/ScrollViewCustomPaging](https://github.com/taufikobet/ScrollViewCustomPaging)的详细信息。

# sonarqube - 您如何在 Sonar 中列出项目中最复杂的方法？

> ID：10242628
> 
> 赞同：0
> 
> 时间：2012-04-20T08:19:00.010
> 
> 标签：sonarqube, cyclomatic-complexity

在 Sonar 中，您可以将类列表按类方法的平均复杂度排序（当您从仪表板列出每个方法的复杂度时）

但是您如何列出项目范围内最复杂的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:28:10.990

您不能这样做，因为 Sonar 不会在方法级别进行测量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T12:33:44.400

您可以使用我们的名为[SourceMeter](http://www.sourcemeter.com/)（由 FrontEndART 提供）的工具来完成此操作，该工具也有一个适用于 Sonar 的插件。您可以看一下[SourceMeter 的在线演示界面](https://sonarqube.sourcemeter.com/dashboard/index?id=JFreeChart)。

# iphone - 在将选项卡从一个选项卡更改为另一个选项卡时切换到父视图控制器

> ID：10242629
> 
> 赞同：0
> 
> 时间：2012-04-20T08:19:01.477
> 
> 标签：iphone, ios, cocoa, uitabbarcontroller, tabbarcontroller

在我登录后的应用程序中，我展示了一个包含四个选项卡的选项卡栏，我的问题是每次当我的应用程序从后台到前台时如何返回到第一个选项卡的父视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:29:59.500

```
YourAppDelegate *appdelegate = ((YourAppDelegate*)[[UIApplication sharedApplication]delegate]);

    appdelegate.tabBarController.selectedViewController = [appdelegate.tabBarController.viewControllers objectAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:33:16.460

在 appdelegate.m 文件中

我正在添加启动视图。您应该调用 tabbar 对象并将其加载到您的视图中。

```
- (void)applicationWillResignActive:(UIApplication *)application {

    viewController1=[[splasView alloc]initWithNibName:@"splasView" bundle:nil];
[self.window addSubview:viewController1.view];
[self.window makeKeyAndVisible];
} 
```

如果您有任何疑问，请告诉我

# ffmpeg - FFmpeg：从 mp4 读取配置文件级别信息

> ID：10242630
> 
> 赞同：11
> 
> 时间：2012-04-20T08:19:01.663
> 
> 标签：ffmpeg, h.264, mp4

我有一个 mp4 文件，需要它的配置文件级别。FFmpeg 说，它有基线配置文件，这是我需要的，但我也需要[level](http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC#Levels)。

这是我从 FFmpeg 得到的：

```
ffmpeg version 0.8, Copyright (c) 2000-2011 the FFmpeg developers
  built on Jul 20 2011 13:32:19 with gcc 4.4.3
  configuration: --enable-gpl --enable-version3 --enable-nonfree --enable-postproc --enable-libfaac --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis --enable-libx264
  libavutil    51\.  9\. 1 / 51\.  9\. 1
  libavcodec   53\.  7\. 0 / 53\.  7\. 0
  libavformat  53\.  4\. 0 / 53\.  4\. 0
  libavdevice  53\.  1\. 1 / 53\.  1\. 1
  libavfilter   2\. 23\. 0 /  2\. 23\. 0
  libswscale    2\.  0\. 0 /  2\.  0\. 0
  libpostproc  51\.  2\. 0 / 51\.  2\. 0
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'test-show.mp4':
  Metadata:
    major_brand     : f4v 
    minor_version   : 0
    compatible_brands: isommp42m4v 
    creation_time   : 2012-03-21 16:00:00
  Duration: 00:56:07.40, start: 0.000000, bitrate: 2004 kb/s
    Stream #0.0(eng): Video: h264 (Baseline), yuv420p, 854x480 [PAR 1:1 DAR 427:240], 1904 kb/s, 25 fps, 25 tbr, 90k tbn, 50 tbc
    Metadata:
      creation_time   : 2012-03-21 16:00:00
    Stream #0.1(eng): Audio: aac, 48000 Hz, stereo, s16, 96 kb/s
    Metadata:
      creation_time   : 2012-03-21 16:00:00
At least one output file must be specified 
```

`-i`除了我可以用来获取级别信息之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-10T06:16:16.890

试试`ffprobe -show_streams`。

`ffprobe`与 FFmpeg 捆绑在一起，提供有关视频文件的大量信息，包括级别信息，例如：

```
$ ffprobe -loglevel error -show_streams Test.mp4 
[STREAM]
index=0
codec_name=h264
codec_long_name=H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10
codec_type=video
codec_time_base=1001/48000
codec_tag_string=avc1
codec_tag=0x31637661
width=704
height=400
has_b_frames=0
sample_aspect_ratio=N/A
display_aspect_ratio=N/A
pix_fmt=yuv420p
level=51                 <== level!
timecode=N/A
is_avc=1
nal_length_size=4
id=N/A
r_frame_rate=24000/1001
avg_frame_rate=1384898760/57761819
time_base=1/44100
start_time=0.000000
duration=6548.959070
bit_rate=701946
nb_frames=157018
nb_read_frames=N/A
nb_read_packets=N/A
TAG:creation_time=2006-08-17 18:14:49
TAG:language=eng
TAG:handler_name=
[/STREAM] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-03-30T19:13:10.683

**带有**show_entries命令的****ffprobe**应该更快，并且它有更多选项可以仅显示相关数据并仅过滤视频流。**

 **仅过滤视频（还添加 :0 以仅过滤第一个视频流）

```
ffprobe -v error -select_streams v:0 -show_entries stream=level -of default=noprint_wrappers=1 <filepath> 
```

> 例如输出：
> 级别=50

* * *

仅输出值（添加：nokey=1）：

```
ffprobe -v error -select_streams v:0 -show_entries stream=level -of default=noprint_wrappers=1:nokey=1 <filepath> 
```

> 例如输出：
> 50

* * *

一次性输出 Profile 和 Level：

```
ffprobe -v error -select_streams v:0 -show_entries stream=profile,level -of default=noprint_wrappers=1 <filepath> 
```

> 例如输出：
> 配置文件=高
> 级别=50

* * *

以 json 格式输出：

```
ffprobe -v error -select_streams v:0 -show_entries stream=profile,level -of json <filepath> 
```

> 例如输出：

```
{
    "programs": [

    ],
    "streams": [
        {
            "profile": "High",
            "level": 41
        }
    ]
} 
```

* * *

在 MS 批处理文件中（作为假函数）：
调用 :ffprobeGetFormatProfile ffprobe.exe file.mp4 txtFormat

```
:ffprobeGetFormatProfile <exe> <infile> <outStr>
echo.
echo FILE: %2

set tmpProfile=
set tmpLevel=
for /f "usebackq delims== tokens=1-2" %%a in (`%~s1 -v error -select_streams v:0 -show_entries stream^=profile^,level -of default^=noprint_wrappers^=1 %2`) do (
    if /I %%a == profile set tmpProfile=%%b
    if /I %%a == level set tmpLevel=%%b
)
if not defined tmpLevel set tmpLevel=??
echo on
set %3=%tmpProfile%@%tmpLevel:~0,1%.%tmpLevel:~1%
@echo off

exit /b %errorlevel% 
```

> 例如 OUTPUT（在作为第三个参数传递的变量 txtFormat 中）：
> High@4.1

* * *

[您可以从ffmpeg.org](https://trac.ffmpeg.org/wiki/FFprobeTips)获得更多想法- 提示

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-10T09:46:59.613

对于这种输出，您可以使用带有选项 -info 的[MP4Box ：](http://gpac.wp.mines-telecom.fr/)

```
Track # 2 Info - TrackID 2 - TimeScale 25000 - Duration 01:29:42.160
Media Info: Language "Undetermined" - Type "vide:avc1" - 134554 samples
MPEG-4 Config: Visual Stream - ObjectTypeIndication 0x21
AVC/H264 Video - Visual Size 1280 x 720 - **Profile High @ Level 3.1**
NAL Unit length bits: 32
Pixel Aspect Ratio 1:1 - Indicated track size 1280 x 720
Synchronized on stream 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-19T06:04:27.507

尝试以下以获取更详细的 json 输出

```
$ ffprobe -print_format json -show_streams -show_format <filepath> 
```**

# c++ - 如何从 C++ 程序执行 ac# exe

> ID：10242632
> 
> 赞同：-6
> 
> 时间：2012-04-20T08:19:06.217
> 
> 标签：c++, c

我在 C# 中制作了一个名为 Registry.exe 的小程序。

现在我的 c++ 程序我想调用这个 Registry.exe 有没有办法做到这一点。

用户不能根据条件提供任何输入调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:28:41.593

你不能简单地使用

系统（“注册表.exe”）；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:31:11.780

你可以使用 ShellExecute()、ShellExecuteEx() 或 CreateProcess()...

IE。

```
HINSTANCE hInst = ShellExecute(0, "open", "c:\\windows\\notepad.exe",  "c:\\example.txt", 0, SW_SHOW); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:16:19.660

编写可执行文件的语言无关紧要，操作系统只看到可执行文件。

`system()`您可以使用在 中声明的调用从命令行调用任何有效的命令`<cstdlib>`。启动单独进程的任何更灵活或更可控的方法都是特定于操作系统的，您需要查阅操作系统文档。在 Win32 中，您可以选择：

*   [`CreateProcess()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)（及相关功能），
*   [`ShellExecute()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)，或其`..Ex`变体，
*   [`_spawn`函数](http://msdn.microsoft.com/en-us/library/20y988d2%28v=vs.71%29.aspx)族，
*   或[`_exec`函数族](http://msdn.microsoft.com/en-us/library/431x4c1w.aspx)。

# jquery - jQuery：如何使用循环创建数组

> ID：10242633
> 
> 赞同：4
> 
> 时间：2012-04-20T08:19:07.727
> 
> 标签：jquery, arrays, loops

我正在尝试在 jQuery 中创建一个数组，该数组通过循环填充。

```
count = jQuery('#count_images').val(); 
```

使用上面的代码，我得到一个整数值（例如 5）。我想知道的是如何在 jQuery 中做这样的事情：

```
int arrLength = count;
string[] arr1 = new string[arrLength];
int i = 0;
for (i = 0; i < arr1.Length; i++){
    arr1[i] = i;
} 
```

所以最后我的数组（例如 5）看起来像这样`[1,2,3,4,5]`：

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T08:23:16.373

### 描述

这更多是关于 javascript 而不是 jquery。查看我的示例和这个[jsFiddle 演示](http://jsfiddle.net/Mv6mX/)

### 样本

```
var arrLength = 5;
var arr1 = [];
var i = 0;

for (i = 0; i != arrLength; i++){
  arr1.push(i)
}

alert(arr1.length) 
```

### 更多信息

*   [JavaScript 数组教程](http://www.tizag.com/javascriptT/javascriptarray.php) ​</li>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:22:50.350

首先，`val()`将返回一个字符串，因此将其解析为整数

```
var count = parseInt(jQuery('#count_images').val(),10); 
```

然后你可以简单地使用一个循环来创建你的数组：

```
var arr = [];
for(var i=0;i<count;i++){
   arr.push(i);
} 
```

这将创建一个带有值的数组`[0,1,2,3,4]`，如果您希望它从 1 开始，只需将 1 添加到`i`

```
var arr = [];
for(var i=0;i<count;i++){
   arr.push(i+1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:22:56.153

像这样的东西就足够了：

```
var my_array = [];
var count = 5;      // let's assume 5

for(var i=0; i < count; i++) {
    my_array.push(i);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T08:24:04.720

在 jQuery 中没有特殊的方法。这是最简单的方法：

```
arr1 = []; 
for (var i = 0; i < count; i++) arr1[i] = i + 1;
// arr1 = [1, 2, 3, 4, 5] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-15T19:32:10.313

```
var days = $.map(new Array(31), function(item, index){return index+1;}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-28T13:25:06.270

```
$(".chk-individual-vendor").each(function() {
    var arrVendors = [];
    arrVendors.push($(this).attr('vendor-user-id'));    
}); 
```

# blackberry - 如何创建黑莓自定义标签栏

> ID：10242635
> 
> 赞同：0
> 
> 时间：2012-04-20T08:19:08.870
> 
> 标签：blackberry, custom-controls, tabbar

我是黑莓开发的新手。我想在我的项目中的黑莓应用程序的屏幕底部有一个自定义选项卡栏，与下面给出的图像相同。我尝试了黑莓给出的示例代码。

但是现在我想使用自定义的 UI。我在 Google 上搜索过它，但没有得到任何关于我想要的自定义字段的有效信息。请告诉我如何在黑莓中做到这一点。

以前有人这样做过吗？

请回复任何链接/代码/片段。

![我想要这样的标签栏](../Images/d81ba87fe255b534a61af513b6f32b0e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:25:38.483

试试这个代码 -

```
EncodedImage e2 = EncodedImage.getEncodedImageResource("map.png");
EncodedImage e3 = EncodedImage.getEncodedImageResource("members.png");
EncodedImage e4 = EncodedImage.getEncodedImageResource("message.png");
EncodedImage e5 = EncodedImage.getEncodedImageResource("settings.png");
EncodedImage e6 = EncodedImage.getEncodedImageResource("logout.png");

EyelidFieldManager manager = new EyelidFieldManager();
HorizontalFieldManager buttonPanel = new HorizontalFieldManager(Field.FIELD_TOP | Field.USE_ALL_WIDTH);

  VerticalFieldManager vfm=new VerticalFieldManager();
  vfm.add(new BitmapField(e2.getBitmap(),FOCUSABLE){
     protected boolean navigationClick(int status, int time){

        Dialog.alert("MAP");
        return true;
       }

  });
  buttonPanel.add(vfm);
  buttonPanel.add(new LabelField("  "));

  VerticalFieldManager vfm1=new VerticalFieldManager();
  vfm1.add(new BitmapField(e3.getBitmap(),FOCUSABLE){
     protected boolean navigationClick(int status, int time){

        Dialog.alert("Members");
        return true;
       }

  });
  buttonPanel.add(vfm1);

  VerticalFieldManager vfm2=new VerticalFieldManager();
  vfm2.add(new BitmapField(e4.getBitmap(),FOCUSABLE){
     protected boolean navigationClick(int status, int time){

        Dialog.alert("Message");
        return true;
       }

  });
  buttonPanel.add(vfm2);

  VerticalFieldManager vfm3=new VerticalFieldManager();
  vfm3.add(new BitmapField(e5.getBitmap(),FOCUSABLE){
     protected boolean navigationClick(int status, int time){

        Dialog.alert("Settings");
        return true;
       }

  });
  buttonPanel.add(vfm3);

  VerticalFieldManager vfm4=new VerticalFieldManager();
  vfm4.add(new BitmapField(e6.getBitmap(),FOCUSABLE){
     protected boolean navigationClick(int status, int time){

        Dialog.alert("Logout");
        return true;
       }

  });
  buttonPanel.add(vfm4);

  manager.add(buttonPanel);

  setTitle(manager); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:51:40.073

你忘记了什么。在构造函数中创建新类，该类推送另一个扩展主屏幕的类

例子：

```
public class MyApp extends UiApplication{
public MyApp(){        
    pushScreen(new LoadingScreen());
}    } 
```

# c# - 需要概念来使用 c# 4.0 开发 p2p 文件共享应用程序

> ID：10242639
> 
> 赞同：-4
> 
> 时间：2012-04-20T08:19:25.503
> 
> 标签：c#, tcp, p2p

我需要通过 p2p 在互联网上开发文件共享应用程序。对于开发基于 p2p 的应用程序，我有一个非常粗略的想法。

假设我有一台服务器，它的静态 IP 在特定端口（如 5001）上运行。现在客户端连接到服务器并发送自己的公共 IP。

## 问题 1

在 C# 的帮助下，客户端如何连接到服务器并发送自己的公共 IP？指导我需要使用哪个类？

当服务器将从客户端获取 IP 时，它将存储。因此，当两个客户端连接时，服务器具有两台不同 PC 的 IP 信息。PC1 将请求服务器获取 PC2 的 IP，同样 PC2 将请求获取 PC1 的 IP。所以现在PC1和PC2都拥有彼此的IP。

## 问题 2

现在的问题是 PC1 如何连接到 PC2 我需要编写哪些代码来连接？

## 问题 3

现在的问题是，如果 PC1 可以连接到 PC2，那么 PC1 如何将文件发送到 PC2？

请告诉我我需要使用哪个类来开发这种基于 P2P 的文件共享应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:22:59.530

谈到 peer2peer，您总是需要至少一台启用了端口转发的 PC。这意味着，如果您在 pc1 上有一个侦听器/服务器，在 pc2 上有一个客户端，则需要在 pc1 上进行端口转发。

这通常称为 HighID/LowID，是几乎在每个路由器中实施的 NAT 防火墙的症状。如果没有至少一个端口转发，两台 PC 就无法连接。这是因为路由器不知道将哪个本地 IP 映射到传入的 TCP 数据包，除非有转发。

至于你可以使用哪些类：看看`System.Net.TcpClient`和`System.Net.TcpListener`

# android - Android：删除应用内cookie //如何获取浏览器上下文

> ID：10242640
> 
> 赞同：0
> 
> 时间：2012-04-20T08:19:33.683
> 
> 标签：android, browser

我目前无法让我的应用删除浏览器 cookie 或某些特定 cookie。我发现的方法是实现以下内容：

```
CookieSyncManager.createInstance(this);
CookieManager cookieManager = CookieManager.getInstance();
cookieManager.removeAllCookie(); 
```

但什么都没有发生。使用 hasCookie() 方法的返回结果为 false。有没有办法从我的应用程序中删除 cookie？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:15:58.193

您可以使用`CookieSyncManager`从您自己的`WebView`小部件中删除 cookie。

`WebView`您不能从使用或其他 Web 渲染引擎的第三方应用程序中删除 cookie 。

# ruby-on-rails - 删除 collection_select 中的重复选项

> ID：10242646
> 
> 赞同：0
> 
> 时间：2012-04-20T08:20:02.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 User 模型，其中用户有一个名为**Division**的属性。许多用户可以有相同的划分。
所以我在使用的时候，

```
<%= collection_select(:user, :div, User.all, :division, :division) %> 
```

它为除法字段提供重复值。我知道这很明显，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:26:41.687

怎么样：

```
<%= collection_select(:user, :div, User.pluck(:division).uniq) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:26:34.600

尝试使用`options_for_select`（[options_for_select](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_for_select)`divisions` ）助手并用`User`模型中的 uniq 数组填充它。

# xml - XSLT 转换：将固定文本添加到现有节点值

> ID：10242647
> 
> 赞同：4
> 
> 时间：2012-04-20T08:20:03.657
> 
> 标签：xml, xslt

我对 XSLT 转换有基本的了解，但一直在努力解决以下问题：

我的 xml 包含：

```
<fixednode1>do not transform me</fixednode1>
<fixednode2>do not transform me also</fixednode2>
<element1Label>1234</element1Label>
<element7Label>hello</element7Label>
<element9Label>bar</element9Label> 
```

我想转换整个 xml，以便除了 2 个固定节点之外，每个节点值都由其节点名称前置，后跟冒号和空格，如下所示：

```
<fixednode1>do not transform me</fixednode1>
<fixednode2>do not transform me also</fixednode2>
<element1Label>element1Label: 1234</element1Label>
<element7Label>element7Label: hello</element7Label>
<element9Label>element9Label: bar</element9Label> 
```

它最好是通用转换——xml 有时会包含样式表未知的节点名称。只有 2 个固定节点将保持不变，但它们不能被转换，只保留在结果中。

我一直在与“选择，何时，否则”声明作斗争，但此刻我迷路了。任何帮助或建议将不胜感激。

亲切的问候

斯克特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T08:27:04.943

只要有一个通用模板和一个专用模板：

```
<xsl:template match="*">
  <!-- prepend code here -->
</xsl:template>

<xsl:template match="fixednode1|fixednode2" priority="10">
  <xsl:copy-of select="."/>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:22:51.170

**这种转变：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*[not(starts-with(name(), 'fixednode'))]/text()">
  <xsl:value-of select="concat(name(..), ': ', .)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档**（提供的 XML 片段，包装到顶部元素中以成为格式良好的 XML 文档）时：

```
<t>
    <fixednode1>do not transform me</fixednode1>
    <fixednode2>do not transform me also</fixednode2>
    <element1Label>1234</element1Label>
    <element7Label>hello</element7Label>
    <element9Label>bar</element9Label>
</t> 
```

**产生想要的正确结果：**

```
<t>
   <fixednode1>do not transform me</fixednode1>
   <fixednode2>do not transform me also</fixednode2>
   <element1Label>element1Label: 1234</element1Label>
   <element7Label>element7Label: hello</element7Label>
   <element9Label>element9Label: bar</element9Label>
</t> 
```

# c - 编程Linux串口，ttyS0

> ID：10242648
> 
> 赞同：3
> 
> 时间：2012-04-20T08:20:06.140
> 
> 标签：c, linux, serial-port, tty

我正在尝试学习如何使用 C 在 Linux 中对 ttyS0 串行端口进行编程。我有另一台机器连接到我的串行端口，大约每两秒发送 5f 和 6f 的交替十六进制值。我已经通过其他端口监控应用程序验证了这些值出现在端口上。在我的代码中，我将阻塞**read()**用于 10 字符长度的缓冲区。即使我的另一台机器仍在发送数据，**read()**也会永远阻塞。如果我包含**fcntl(fd, F_SETFL, FNDELAY);**它将 read() 设置为非阻塞 read() 总是返回值 -1，这意味着 UART 缓冲区中没有数据，而我的 for 循环代码只是打印出缓冲区中的随机值。所以简而言之，我的假设是我的代码没有读取 ttyS0，我不知道为什么。下面是我的代码，希望有人会看到是什么导致了我的问题并让我直截了当。顺便说一句，我使用的是 Scientific Linux，我相信 ttyS0 是 com 端口 1，就像在 RedHat 和 Fedora 中一样。下面是我运行代码时的输出。它似乎正在毫无问题地写入 COM 端口，但读取它说它不可用。同样很明显，我打印出来的缓冲区只是随机值，而不是读入的数据。谢谢

## 控制台输出

```
hello world
hi again
write error: : Success
 wrote 4 bytes
number of bytes read is -1
read error:: Resource temporarily unavailable
4  8  120  -99  -73  -65  41  -120  4  8  
should of put something out 
```

## 代码

```
#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include <errno.h>
#include <termios.h>
#include <unistd.h>

int main()
{
    printf("hello world\n");
    int n;
    int fd;
    char c;
    int bytes;

    char buffer[10];
    char *bufptr;
    int nbytes;
    int tries;
    int x;
    struct termios options;

    fd = open("/dev/ttyS0", O_RDWR | O_NOCTTY | O_NDELAY);
    if(fd == -1)
    {
        perror("open_port: Unable to open:");
    }
    else
    {
        fcntl(fd, F_SETFL, 0);
        printf("hi again\n");
    }

    tcgetattr(fd, &options);

    cfsetispeed(&options, B115200);
    cfsetospeed(&options, B115200);
    options.c_cflag |= (CLOCAL | CREAD);
    options.c_cflag &= ~PARENB;
    options.c_cflag &= ~CSTOPB;
    options.c_cflag &= ~CSIZE;
    options.c_cflag |= CS8;
    options.c_cflag &= ~( ICANON | ECHO | ECHOE |ISIG );
    options.c_iflag &= ~(IXON | IXOFF | IXANY );
    options.c_oflag &= ~OPOST;

    tcsetattr(fd, TCSANOW, &options);

    write(fd, "ATZ\r",4);
    printf(" wrote\n");
    bufptr = buffer;

    fcntl(fd, F_SETFL, FNDELAY);
     bytes = read(fd, bufptr, sizeof(buffer));
    printf("number of bytes read is %d\n", bytes);
    perror ("read error:");

    for (x = 0; x < 10 ; x++)
    {
        c = buffer[x];
        printf("%d  ",c);
    }
    close(fd);

    //puts(buffer[0]);
    printf("\nshould of put something out \n");

    return (0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T10:10:08.640

以下行将导致问题：

```
options.c_cflag &= CSTOPB; 
```

它将重置 c_cflag 的所有其他位。

如果要使用 1 个停止位，请使用：

```
options.c_cflag &= ~CSTOPB; 
```

如果要使用 2 个停止位，请使用：

```
options.c_cflag |= CSTOPB; 
```

编辑：

以下行也会导致问题：

```
fcntl(fd, F_SETFL, 0); 
```

它将重置几个重要的标志。

# batch-file - 检查 cmd 文件中的网络共享是否正确映射

> ID：10242651
> 
> 赞同：1
> 
> 时间：2012-04-20T08:20:19.507
> 
> 标签：batch-file, cmd

我正在创建一个使用此命令的脚本 .cmd：

```
net use y: \\serverip\folder  /u:domain\user passwd 
```

在此之后，我需要检查文件夹是否正确映射，如果不正确则发送电子邮件。我怎样才能做到这一点？谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:31:24.693

利用 ：

```
IF EXIST Y:\NUL GOTO USE_MY_NEW_DRIVE_Y 
```

# c - MARS MIPS 和结构节点

> ID：10242653
> 
> 赞同：1
> 
> 时间：2012-04-20T08:20:22.750
> 
> 标签：c, assembly, struct, mips

```
typedef struct node {    
    int data;    
    struct node *next;    
} nodeL; 
```

假设我想用 MIPS 汇编语言翻译上述声明，我应该怎么做？除了分配内存（使用系统调用 9），这是在 .text 段中完成的，**那么 .data 段**呢？另外，**对齐**呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T23:22:17.973

甚至在提及代码之前，您需要明确您要创建的结构是静态数据（数据段）、本地数据（堆栈）还是动态分配的数据（堆）。每个都有不同的分配方式。

但在讨论之前，您需要做的第一件事是确定结构实例的布局。至少它可能是：

```
------------------
| data - 32-bits |
------------------
| next - 32-bits |
------------------ 
```

要静态创建实例，很简单：

```
 .data
    .align 2
anInstance:     .word   0,0 
```

在堆上：

```
 .text
Allocator.newNode:
    li $a0, 8           #allocate 8 bytes
    li $v0, 9
    syscall             #returns word-aligned ptr
    jr $ra 
```

如果放在堆栈上，只需为其分配 8 个字节。

一种更简洁的方法是使用基于原型的方法。

您的对象布局变为：

```
------------------
| size - 32-bits |
------------------
| atr 1 - 32-bits|
------------------
| atr 2 - 32-bits|
------------------
.
.
.
------------------
| atr n - 32-bits|
------------------ 
```

对于每个结构，您创建一个原型，分配例程将使用它来创建实例。

```
 .data
ListProto:      .word   8,0     #size, head ptr
NodeProto:      .word   12,0,0  #size, data, next ptr    

    .text
main:
    la $a0, ListProto
    jal Allocator.newObject     #create new list instance

    la $a0, NodeProto
    jal Allocator.newObject     #create new node instance

Allocator.newObject:
    lw $a0, 0($a0)      #a0 = object size
    li $v0, 9
    syscall
    jr $ra 
```

您是否希望实例实际保留大小字段取决于您。使用这种方法，您可以简单地添加原型，仅此而已。

# emacs - Emacs / Slime 键绑定 / 向 Swank 服务器发送命令

> ID：10242654
> 
> 赞同：3
> 
> 时间：2012-04-20T08:20:26.430
> 
> 标签：emacs, slime

我熟悉方案，但对 emacs（从 VIM 切换）和 elisp 很陌生。

我知道如何执行以下操作：

*   做一个简单的键绑定
    *   Cc iwb = 缩进整个缓冲区
    *   F2 = 打开/关闭折叠
*   使用来自 emacs 的粘液
*   一些基本键，如 Cx 2、paredit 键、一些基本移动键

我需要帮助做一些更高级的事情：

我希望 F3 等于：

*   将 emacs 置于 Cx 2 模式
*   在底部窗口中，切换到“slime-repl”缓冲区
*   在 "slime-repl" 缓冲区中，发送命令 "(test/run)" <-- 注意，这意味着发送到 swank 服务器，而不是 elisp

我意识到让别人为我写剧本是很糟糕的。但是，如果有人能做到这一点，我会很快从中学习。[通过研究您的示例，我可以编写更复杂的脚本类型。]

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:19:28.323

这不完全是您想要的，但应该是进一步调整的良好起点：

```
(defun slime-run-test ()
  (interactive)
  (slime-interactive-eval "(test/run)")
  (slime-pop-to-buffer (slime-output-buffer) t))

(global-set-key (kbd "<f3>") 'slime-run-test) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:15:15.953

我不使用粘液，但假设它使用 comint-mode 那么我认为以下方法可能会奏效：

```
(defun my-slime-test-run ()
  (interactive)
  (delete-other-windows)
  (split-window-below)
  (with-selected-window (next-window)
    (switch-to-buffer "slime-repl")
    (goto-char (point-max))
    (insert "(test-run)")
    (comint-send-input)))

(global-set-key (kbd "<f3>") 'my-slime-test-run) 
```

可能有更好的方法来做到这一点，但希望这能让您了解如何编写 elisp 函数以在编辑器中执行任务（并注意该函数的读取方式非常像一组编辑器指令——您只需将您将使用的击键转换为等效代码即可完成很多工作——甚至根本不编写代码，只需记录和保存键盘宏）。

用于`C-h``f` `name-of-the-function` `RET`获取有关该函数中任何函数/宏调用的文档。

对于键绑定，我曾经`C-h``k``F3`检查 Emacs 如何引用该键，然后使用该字符串作为参数`kbd`（并注意如何使用该序列来查找绑定到任何给定键序列的函数的名称，您可以然后根据需要在代码中使用）。

如果您还不了解许多事情，那么它们就远不那么明显了，但这只有在与此一样大的代码库（并且可以追溯到与此一样长）的情况下才能预期。

最棒的是，如果您不知道自己在寻找什么，您始终可以搜索与模式匹配的函数名称`C-u``C-h``a`（类似地，对于变量、值、库和文档；`M-:` `(info "(emacs) Apropos")` `RET`有关此工具的更多信息，请参阅）。加上信息手册（带有索引 - 按`I`或`i`在任何特定手册中，或使用`info-apropos`命令一次搜索*所有*信息手册）。

实际上，您能做的最好的事情之一就是学习如何使用 Emacs 的自我记录特性来找到您不知道的事情的答案。

# jquery - 发布在 DataTables 中不可见的表单元素

> ID：10242655
> 
> 赞同：15
> 
> 时间：2012-04-20T08:20:43.880
> 
> 标签：jquery, datatables

我在表单中包含的表上使用了一个名为 Datatables 的 jQuery 插件，该表将包含许多表单元素。

我在页面上有一个保存更改按钮，它将执行 AJAX 请求以根据用户输入的内容更新数据库。

我遇到的问题是它只会发布当前在数据表中可见的表单元素。在我的一个示例中，有 74 行（全部包含多个字段）。要显示的默认记录数量为 10。

因此，当提交表单时，仅提交 10 行的表单元素。我要提交所有行的字段——在这种情况下，所有 74 行的字段都是有价值的。

有人对此有解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T08:26:08.000

Datatables 销毁隐藏的行并将它们从 DOM 中取出。如果您需要提交，您应该在提交之前使用 fnGetHiddenNodes() 来检索隐藏的行。看看[api](http://datatables.net/plug-ins/api)页面

```
$.fn.dataTableExt.oApi.fnGetHiddenNodes = function ( oSettings )
{
    /* Note the use of a DataTables 'private' function thought the 'oApi' object */
    var anNodes = this.oApi._fnGetTrNodes( oSettings );
    var anDisplay = $('tbody tr', oSettings.nTable);

    /* Remove nodes which are being displayed */
    for ( var i=0 ; i<anDisplay.length ; i++ )
    {
        var iIndex = jQuery.inArray( anDisplay[i], anNodes );
        if ( iIndex != -1 )
        {
            anNodes.splice( iIndex, 1 );
        }
    }

    /* Fire back the array to the caller */
    return anNodes;
} 
```

# ios - 处理 UIView 大小调整的最稳定方法？

> ID：10242657
> 
> 赞同：2
> 
> 时间：2012-04-20T08:20:55.120
> 
> 标签：ios, event-handling, uikit, resize

上有许多与几何相关的属性`UIView`。

*   `frame`
*   `bounds`
*   `transform`

也许更多。

如果我想在调整视图大小时执行一些行为，我该怎么办？

我通常尝试覆盖`-layoutSubviews`方法，但它也被非调整大小事件调用。即使我覆盖了所有属性，我仍然不能确定我已经处理了所有的可能性。

处理调整大小事件的最稳定和推荐的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-21T15:42:16.367

在*Swift*中，您可以执行以下操作：

```
override var bounds: CGRect {
    didSet {
        // Do stuff here
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T09:40:06.730

我通常不会覆盖`layoutSubviews`调整大小，正是因为你所说的。我自己编写`layoutSubviewz`并在需要时调用它，例如我`setFrame`这样覆盖：

```
-(void)setFrame:(CGRect)frame
{
  [super setFrame:frame];
  [self layoutSubviewz];
} 
```

# spring-mvc - 如何使用带有注释的springmvc3上传多个文件？

> ID：10242659
> 
> 赞同：2
> 
> 时间：2012-04-20T08:21:01.037
> 
> 标签：spring-mvc, file-upload

我试过这个：MyController.java：

```
@RequestMapping("new")
public void newNotify(Model model,
@RequestParam(value = "doc", required = false) List<MultipartFile> files){
     //blablabla...
} 
```

我使用 curl 向该 url 发布请求：

```
D:\Software\CURL>curl.exe http://127.0.0.1:8080/new -F"@doc=cookie.txt" -F"@doc=obm.gif" -b cookie.txt 
```

但是当我在控制器中调试时，我发现文件的大小为 0。

我应该在 bean 中制作文件吗？

更新：这是我的错。 curl 发布的文件必须类似于 -F"doc=@docname.txt"。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:40:29.567

尝试这个 ：

```
@RequestMapping(value = "new", method = { POST, PUT })
public void newNotify(Model model, MultipartHttpServletRequest multipartRequest){
    MultipartFile file = request.getFile("doc");
    //blablabla...
} 
```

# wpf - 如何确保装饰层中的验证显示在其他控件后面

> ID：10242661
> 
> 赞同：5
> 
> 时间：2012-04-20T08:21:14.390
> 
> 标签：wpf, c#-4.0, adorner, adornerlayer

我有一个具有用户验证的 WPF 应用程序。根据[文档](http://msdn.microsoft.com/en-us/library/ms743737.aspx#rendering_behavior_for_Adorners)，这是在装饰层中呈现的，该层出现在所有其他层之上。

在屏幕截图中，您可以看到这不是我想要的。我有一个名为“警报详细信息”的弹出窗口，它[`ChildWindow`](http://wpftoolkit.codeplex.com/wikipage?title=ChildWindow)来自[Extended WPF Toolkit](http://wpftoolkit.codeplex.com/)。它位于装饰层后面。如何使弹出窗口出现在装饰层前面？

我已经尝试[`Panel.ZIndex`](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.zindex.aspx)在 ChildWindow 上设置一个非常高的值，但这并没有什么不同。

* * *

![截屏](../Images/910170f1b076df409d8bfc6c0b0c19ed.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T08:51:12.537

An用于为一组控件[`AdornerDecorator`](http://msdn.microsoft.com/en-us/library/system.windows.documents.adornerdecorator.aspx)提供给定值。[`AdornerLayer`](http://msdn.microsoft.com/en-us/library/system.windows.documents.adornerlayer.aspx)默认情况下，这个装饰器在默认`Window`模板中，从而覆盖了窗口中的所有控件。

在你的表单周围添加一个新`AdornerDecorator`的，并确保`ChildWindow`它在它之后，这样它就在装饰器的上方。

```
<Grid>
  <AdornerDecorator>
    ... your summary form ...
  </AdornerDecorator>
  <ChildWindow .. />
</Grid> 
```

# objective-c - 使用 NSScanner 进行高效的 NSString 解析

> ID：10242663
> 
> 赞同：4
> 
> 时间：2012-04-20T08:21:20.770
> 
> 标签：objective-c, ios, ios5, foundation, nsscanner

首先，我正在编写一个 iOS 5 应用程序。例如，假设我有以下字符串：

```
100 - PARK STREET / JAMES PLACE 
```

我想以最有效（和代码优雅）的方式从这个字符串中提取两个道路名称。我已经尝试过使用`[string componentsSeparatedByString...]`等的组合，但这变得非常混乱，非常快。此外，它需要大量的条件语句来处理如下情况：

```
100 - BI-CENTENNIAL DRIVE / JAMES PLACE 
```

`[string componentsSeparatedByString:@"-"]`因为它包含一个嵌套的连字符，如果我们正在使用并且需要重新组装，它将被拆分。

在某些情况下，字符串的格式可能*略有*不同，例如：

```
100- BI-CENTENNIAL DRIVE / JAMES PLACE 
```

（数字和连字符之间没有空格）

```
100-BI-CENTENNIAL DRIVE /JAMES PLACE 
```

（数字周围完全没有空格，斜线和第二个道路名称之间没有空格）

但是，我们总是可以假设字符串中只有一个斜杠来分隔两个道路名称。

道路名称​​也应该去掉任何前导和尾随空格。

我认为使用 an 可以以更有效和优雅的方式实现整个过程，`NSScanner`但不幸的是，我没有必要的此类课程的经验来使其工作。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:03:35.730

您也可以使用[正则表达式](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)。

请注意，在该块中，我使用捕获块，通过[`[result rangeAtIndex:i]`](https://developer.apple.com/library/ios/#documentation/AppKit/Reference/NSTextCheckingResult_Class/Reference/Reference.html#//apple_ref/occ/instm/NSTextCheckingResult/rangeAtIndex%3a).
索引 1 现在将是门牌号，索引 2 将返回第一条街道，索引 3 将返回第二条街道。

```
#import <Foundation/Foundation.h>

int main (int argc, const char * argv[])
{

    @autoreleasepool {
        NSArray *streets = [NSArray arrayWithObjects:@"100 - PARK STREET / JAMES PLACE", @"100 - BI-CENTENNIAL DRIVE / JAMES PLACE", @"100- BI-CENTENNIAL DRIVE / JAMES PLACE", @"100-BI-CENTENNIAL DRIVE /JAMES PLACE", nil];

        NSString *text = [streets componentsJoinedByString:@" "];
        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(\\d+) {0,1}- {0,1}(\\D+) *\\/ *(\\D+)" options:NSRegularExpressionCaseInsensitive error:nil];

        [regex enumerateMatchesInString:text options:0 
                                  range:NSMakeRange(0, [text length]) 
                             usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) 
        {
            for (int i = 1; i< [result numberOfRanges] ; i++) {
                NSLog(@"%@", [text substringWithRange:[result rangeAtIndex:i]]);
            }
        }];
    }
    return 0;
} 
```

**输出：**

```
100
PARK STREET 
JAMES PLACE 
100
BI-CENTENNIAL DRIVE 
JAMES PLACE 
100
BI-CENTENNIAL DRIVE 
JAMES PLACE 
100
BI-CENTENNIAL DRIVE 
JAMES PLACE 
```

**根据评论进行编辑**

```
int main (int argc, const char * argv[])
{

    @autoreleasepool {
        NSArray *streets = [NSArray arrayWithObjects:@"100 - PARK STREET / JAMES PLACE", @"100 - BI-CENTENNIAL DRIVE / JAMES PLACE", @"100- BI-CENTENNIAL DRIVE / JAMES PLACE", @"100-BI-CENTENNIAL DRIVE /JAMES PLACE",@"100 - PARK STREET", nil];

        NSRegularExpression *regex1 = [NSRegularExpression regularExpressionWithPattern:@"(\\d+) *- *([^\\/]+) *$" options:NSRegularExpressionCaseInsensitive error:nil];
        NSRegularExpression *regex2 = [NSRegularExpression regularExpressionWithPattern:@"(\\d+) *- *([^\\/]+) *\\/ *([^\\/]+) *$" options:NSRegularExpressionCaseInsensitive error:nil];
        for (NSString *text in streets) {                        
            NSRegularExpression *regex = ([regex1 numberOfMatchesInString:text options:NSRegularExpressionCaseInsensitive range:NSMakeRange(0, [text length])]) ? regex1 : regex2;
            [regex enumerateMatchesInString:text options:0 
                                      range:NSMakeRange(0, [text length]) 
                                 usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) 
             {
                 for (int i = 1; i< [result numberOfRanges] ; i++) {
                     NSLog(@"%@", [text substringWithRange:[result rangeAtIndex:i]]);
                 }

             }];
        }
    }
    return 0;
} 
```

**第二次编辑**

```
int main (int argc, const char * argv[])
{

    @autoreleasepool {
        NSArray *streets = [NSArray arrayWithObjects:   @"100 - PARK STREET / JAMES PLACE", 
                                                        @"100 - BI-CENTENNIAL DRIVE / JAMES PLACE", 
                                                        @"100- BI-CENTENNIAL DRIVE / JAMES PLACE", 
                                                        @"100-BI-CENTENNIAL DRIVE /JAMES PLACE",
                                                        @"100 - PARK STREET",
                                                        @"100 - PARK STREET / ",
                                                        @"100 - PARK STREET/ ",
                                                        @"100 - PARK STREET/",
                            nil];

        NSRegularExpression *regex1 = [NSRegularExpression regularExpressionWithPattern:@"(\\d+) *- *([^\\/]+) *$" options:NSRegularExpressionCaseInsensitive error:nil];
        NSRegularExpression *regex2 = [NSRegularExpression regularExpressionWithPattern:@"(\\d+) *- *([^\\/]+) *\\/ *([^\\/]*) *$" options:NSRegularExpressionCaseInsensitive error:nil];
        for (NSString *text in streets) { 

            text= [text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
            NSLog(@"\n>%@<", text);
            NSRegularExpression *regex = ([regex1 numberOfMatchesInString:text options:NSRegularExpressionCaseInsensitive range:NSMakeRange(0, [text length])]) ? regex1 : regex2;
            [regex enumerateMatchesInString:text options:0 
                                      range:NSMakeRange(0, [text length]) 
                                 usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) 
             {
                 for (int i = 1; i< [result numberOfRanges] ; i++) {
                     NSLog(@"%@", [text substringWithRange:[result rangeAtIndex:i]]);
                 }

             }];
        }
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:54:57.243

刚刚在我的浏览器中编码：

```
NSString* line = @"100- BI-CENTENNIAL DRIVE / JAMES PLACE";
NSScanner* scanner = [NSScanner scannerWithString:line];
NSString* number;
if (![scanner scanUpToString:@"-" intoString:&number])
    /* handle parse failure */;
NSString* firstRoad;
if (![scanner scanUpToString:@"/" intoString:&firstRoad])
    /* handle parse failure */;
NSString* secondRoad = [str substringFromIndex:[scanner scanLocation]]; 
```

可能有额外的空格要从结果字符串中修剪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:48:40.120

这看起来像是[NSRegularExpression](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009708-CH1-SW48)的工作。

我认为 RE 类似于

```
^[0-9]+ *- *(.*)$ 
```

会匹配你想要的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-19T20:34:55.950

这是另一个使用这个可怕的小**NSScanner**类的例子。

假设您有一个包含四个值的字符串，并希望将它们转换为 CGRect：

```
NSString* stringToParse = @"10, 20, 600, 150";             
CGRect rect = [self stringToCGRect:stringToParse];

NSLog(@"Rectangle: %.0f, %.0f, %.0f, %.0f", rect.origin.x, rect.origin.y, rect.size.width, rect.size.height); 
```

为此，您将编写一个像这样令人讨厌的小函数：

```
-(CGRect)stringToCGRect:(NSString*)stringToParse
{
    NSLog(@"Parsing the string: %@", stringToParse);
    int x, y, wid, hei;

    NSString *subString;
    NSScanner *scanner = [NSScanner scannerWithString:stringToParse];
    [scanner scanUpToCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:nil];
    [scanner scanCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:&subString];
    x = [subString integerValue];

    [scanner scanUpToCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:nil];
    [scanner scanCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:&subString];
    y = [subString integerValue];

    [scanner scanUpToCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:nil];
    [scanner scanCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:&subString];
    wid = [subString integerValue];

    [scanner scanUpToCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:nil];
    [scanner scanCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:&subString];
    hei = [subString integerValue];

    CGRect rect = CGRectMake(x, y, wid, hei);
    return rect;
} 
```

原谅我的消极情绪，但我累了，现在是晚上 10.30 点，我很鄙视不得不编写这样的 Objective-C 代码，我很清楚使用过去 15 年的任何微软开发环境，这将需要一个行代码。

呜呜呜……

# silverlight - RIA 在 Silverlight 中两次创建相同的实例

> ID：10242668
> 
> 赞同：0
> 
> 时间：2012-04-20T08:21:58.780
> 
> 标签：silverlight, poco, ria

```
class Profile { string name; Book[] books} 

class Book { string name } 
```

两个单独的配置文件（A 和 B）都与同一本书有关系。

当我使用 WCF/RIA 从 Silverlight 中一一加载配置文件时。我最终得到了两个同名的书对象。（同一本书！）。我希望 RIA 检测到这本书已经存在于 silverlight 中，并使用现有实例而不是第二次创建它。

它们是 POCO（复杂对象，不在 DB 中）。

如何告诉 RIA 名称是唯一的，并且 Silverlight（RIA 客户端）中不能有两个具有相同名称的实例？

更新自从询问我已经实施了一个解决方法 - 虽然我并不认为它是一个优雅的解决方案！但这里是：GetProfile 上的回调方法被替换为遍历所有 profile.books 并检查每本书是否已存在于本地 Dictionary 中的方法。如果该书在本地存在，则使用本地书并删除第二个实例。如果不是，则将这本书添加到字典中并使用。

解决方案我创建自己的 Book-class 客户端，然后将 RIA 创建的书籍转换为我自己的书籍类型。当我将更新后的 Books 发送回服务器时，我会创建 RIA Books 的实例，并在更新任何属性之前调用 OnDeserializing() 和 OnDesriallized()。这允许我编辑 RIA-Book。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:54:16.977

解决方案 GetProfile 上的回调方法被替换为遍历所有 profile.books 并检查每本书是否已存在于本地 Dictionary 中的方法。如果该书在本地存在，则使用本地书并删除第二个实例。如果不是，则将这本书添加到字典中并使用。

我创建自己的 Book-class 客户端，然后将 RIA 创建的书籍转换为我自己的书籍类型。当我将更新后的 Books 发送回服务器时，我会创建 RIA Books 的实例，然后在更新任何属性（如 FavouriteBook）之前调用 OnDeserializing() 和 OnDesriallized()。这允许我编辑 RIA-Book。

# ios - IOS：AVAudioPlayer管理内存

> ID：10242678
> 
> 赞同：0
> 
> 时间：2012-04-20T08:22:58.233
> 
> 标签：ios, xcode, avaudioplayer

我有这种播放mp3的方法：

```
- (void) playSound:(NSString*)sound{

    NSString *path = [NSString stringWithFormat:@"%@/%@",
                      [[NSBundle mainBundle] resourcePath],
                      sound];
    NSURL *filePath = [NSURL fileURLWithPath:path isDirectory:NO];
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:filePath error:nil];
    [player prepareToPlay]; 
    [player play];  
} 
```

每次调用此方法时，我都会得到一个新字符串“声音”，然后每次此 AVAudioplayer“播放器”时都必须分配；我想在我停止或完成时释放它……有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:41:12.623

试试下面的说明

你的ViewController.h

```
 @interface yourViewController : UIViewController <AVAudioPlayerDelegate> 
```

用于添加功能的 yourViewController.m 文件

```
-(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
 //play finished
} 
```

在代码下面声明 AVAudioPlayer 对象

```
AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL
                                                                fileURLWithPath:[[NSBundle mainBundle] 
                                                                                 pathForResource:@"audio" ofType:@"mp3"]] error:NULL]; 

    audioPlayer.delegate = self;
    audioPlayer.currentTime=0.0f;
    [audioPlayer prepareToPlay];
    [audioPlayer play]; 
```

谢谢..！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:39:20.653

看看 AVAudioPlayerDelegate。

它有方法 audioPlayerDidFinishPlaying:successfully: 和 audioPlayerDecodeErrorDidOccur:error: 应该让你做你想做的事。

# android - 如何在微调器中显示位置，而不是在 Android 中显示所选选项？

> ID：10242682
> 
> 赞同：0
> 
> 时间：2012-04-20T08:23:18.400
> 
> 标签：android, spinner

我的应用程序中有一个显示位置的微调器。您必须输入的当前位置或您自己选择的位置。或者应该这样你可以找到一个很好的例子就是谷歌地方。这就是我想要达到的，或多或少...

因此，如果第一次创建应用程序，我会获取用户的当前位置并将我的自定义 arrayadapter 的位置属性设置为该位置。之后，我刷新drawablestate。在我的 Adapter 的 getView 中，我将文本更改为白色并将文本设置为 location 属性。这工作正常。

当我选择不同的位置时，我会看到一个输入对话框来输入我的位置。完成后，我更新我的适配器的 location 属性并使微调器刷新它的 drawableState。之后，我再次在适配器中输入我的 getView 函数，编辑文本的颜色和文本本身，但微调器中的文本保持不变。只有在我再次点击微调器并点击“当前位置”后，它才会显示我之前给它的位置。如果我再次点击“当前位置”，它什么也不做（它获取位置，但不更新视图）。当我再次点击“另一个位置”时，它会显示您当前的位置并要求另一个位置，并且再次相同。

有人知道如何解决这个问题吗？请参阅下面的代码：

```
public class FooActivity extends Activity {

//UI-elements
private Spinner _locationSpinner;
private LocationArrayAdapter _locationAdapter;

//Location
private String[] _locationArray = {"Current location", "Different location"};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //config spinner
    configSpinner();
}
//functions
private void configSpinner() {
    _locationSpinner = (Spinner)findViewById(R.id.main_location);

    _locationAdapter = new LocationArrayAdapter(this, R.layout.spinner_item, _locationArray);
    _locationAdapter.setDropDownViewResource(R.layout.spinner_dropdown_item);

    showCurrentLocationInSpinner();
    _locationSpinner.setAdapter(_locationAdapter);
    _locationSpinner.setOnItemSelectedListener(new OnItemSelectedListener(){

        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
            if (pos == 0)
                showCurrentLocationInSpinner();
            else
                showOtherLocationInSpinner();
        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {}

    });
}

//view functions
private void showCurrentLocationInSpinner() {
    try {
        Location loc = getCurrentLocation();
        if (loc == null) return;

        List<Address> addresses = _geo.getFromLocation(loc.getLatitude(), loc.getLongitude(), 1);
        Address curAddress = addresses.get(0);

        _locationAdapter.setLocation(curAddress.getAddressLine(0) + ", " + curAddress.getLocality());
        _locationSpinner.refreshDrawableState();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (IndexOutOfBoundsException e){
        e.printStackTrace();
    }
}
protected void showOtherLocationInSpinner() {
    AlertDialog.Builder alert = new AlertDialog.Builder(this);

alert.setMessage(getResources().getString(R.string.location_dialog_message));

    // Set an EditText view to get user input 
    final EditText input = new EditText(this);
    alert.setView(input);

    alert.setPositiveButton(getResources().getString(R.string.dialog_ok), new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        Editable value = input.getText();
        _locationAdapter.setLocation(value.toString());
        _locationSpinner.refreshDrawableState();
      }
    });

    alert.setNegativeButton(getResources().getString(R.string.dialog_cancel), new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int whichButton) {
      }
    });

    alert.show();
}
} 
```

我的自定义 ArrayAdapter：

```
public class LocationArrayAdapter extends ArrayAdapter<CharSequence> {

private String _location;

public LocationArrayAdapter(Context context, int textViewResourceId, CharSequence[] objects) {
    super(context, textViewResourceId, objects);
}

public String getLocation() {
    return _location;
}
public void setLocation(String location) {
    this._location = location;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = super.getView(position, convertView, parent);

    TextView t = (TextView) view.findViewById(android.R.id.text1);
    t.setTextColor(Color.WHITE);
    t.setText(_location);

    return view;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:11:43.147

结果证明这是一个非常愚蠢的错误......我只需要通知我的适配器数据集已经改变......

```
public class LocationArrayAdapter extends ArrayAdapter<CharSequence> {

    private String _location;

    public LocationArrayAdapter(Context context, int textViewResourceId, CharSequence[] objects){
        super(context, textViewResourceId, objects);
    }

    public String getLocation() {
        return _location;
    }
    public void setLocation(String location) {
        this._location = location;
        notifyDataSetChanged(); //FIXES IT
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);

        TextView t = (TextView) view.findViewById(android.R.id.text1);
        t.setTextColor(Color.WHITE);
        t.setText(_location);

        return view;
    }

} 
```

# javascript - 如何获取jquery mobile中显示的页面的“id”

> ID：10242683
> 
> 赞同：2
> 
> 时间：2012-04-20T08:23:29.263
> 
> 标签：javascript, html, jquery-mobile

我有各种像这样的html页面

```
<body onload="init()">

<div data-role="page" id="home">
<div data-role="header">
<h1>Here is the index page.</h1>
</div>

<div data-role="content">
<p><center>Below you may transition to our other pages.</center></p>

<a href="#about" data-ajax="false" data-role="button" data-inline="true">About  Me</a>
</div>
</div>

<div data-role="page" id="about">
<div data-role="header">
<h1>About Us</h1>
</div>

<div data-role="content">
<a href="#home" data-ajax="false" data-role="button" data-inline="true">Back Home</a>
</div>
</div>
</body> 
```

现在我需要获取当前显示的页面的 id... 怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T08:28:21.893

你有没有尝试过：`$.mobile.activePage.attr('id')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:37:31.077

这些中的任何一个：

```
$('div:jqmData(role="page").ui-page-active').attr('id');

$('.ui-page-active').attr('id'); 
```

也应该这样做。

# java - 数据报套接字“必须被捕获或声明被抛出”

> ID：10242684
> 
> 赞同：0
> 
> 时间：2012-04-20T08:23:32.950
> 
> 标签：java

以下代码产生错误

```
DatagramSocket socket = new DatagramSocket(); 
```

java.net.* 包含在顶部

错误是`unreported exception java.net.SocketException; must be caught or d eclared to be thrown`

它在使用线程的类中的方法 run() 中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:27:35.950

我建议你在 try/catch 块中捕获它并记录它，或者将你的 Runnable 更改为一个 Callable<Void> ，它可以抛出一个 excaption。

顺便说一句：我会使用 ExecutorService 而不是普通的线程，因为它允许您回收线程并更轻松地管理它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T08:27:44.480

错误消息尽可能清晰。要么放在一个`catch`块中：

```
try {
    DatagramSocket socket = new DatagramSocket();
    // ...
}
catch (SocketException ex)
{
     // ...
} 
```

或者声明您在其中创建套接字的方法可能会抛出`SocketException`：

```
void foo() throws SocketException
{
    DatagramSocket socket = new DatagramSocket();
    // ...
} 
```

Java 已检查异常，这意味着编译器会为您监视这些事情。我不能说这是语言的一个很好的部分，但它是一个强制性的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T08:28:02.480

好吧，您没有捕捉到可能发生的 SocketException

```
try {
   DatagramSocket socket = new DatagramSocket();

    } catch (SocketException e) {
        e.printStackTrace();
    } 
```

# php - Rackspace Clouds：修改容器镜像并清除缓存

> ID：10242685
> 
> 赞同：2
> 
> 时间：2012-04-20T08:23:35.317
> 
> 标签：php, rackspace-cloud, rackspace

我已经厌倦了几次使用 php 将图像上传到 rackspace 云并用另一个图像修改它。但是在将第二张图片上传到同一个对象并替换它之后，它显示了第一张图片。

这是我在第一个脚本上所做的：

```
<?php
$images    = $conn->get_container('title');
$obj       = $images->create_object('sample_test1');
$file_name = $_SERVER['DOCUMENT_ROOT'] . '/cloudfiles/images/1308.jpg';
$obj->load_from_filename($file_name);
echo $obj->public_uri();
?> 
```

修改 sample_test1 对象的第二个脚本：

```
<?php
$images    = $conn->get_container('title');
$obj       = $images->get_object('sample_test1');
$file_name = $_SERVER['DOCUMENT_ROOT'] . '/cloudfiles/images/2000.jpg';
$obj->load_from_filename($file_name);
echo $obj->public_uri();
?> 
```

当我在浏览器上检查打印的 url 时，它总是显示我上传的第一张图片。不是第二个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:07:43.540

我有一个解决方案。CDN 会一直缓存图片，直到 TTL 过期。因此，您将在大约一天后看到您上传的第二张图片（因为您的 TTL 到期）。您必须保留带有时间戳或其他内容的图像对象。并删除第一个上传的图像。

# javascript - jQuery 中 $.each 的奇怪行为

> ID：10242692
> 
> 赞同：0
> 
> 时间：2012-04-20T08:24:24.697
> 
> 标签：javascript, jquery, onmouseover

我正在编写一段代码，它从 MySQL 数据库中获取 SVG 路径并使用 raphaeljs.com 的脚本绘制形状。我在使用 onmouseover 属性时遇到了问题：我希望每个形状在悬停它们时获得不同的填充颜色，但发生的情况是，每当我悬停任何形状时，最后绘制的形状都是彩色的，而不是我徘徊。

这是绘制数据中包含的形状的 JS 函数的代码：

```
function drawShapes(data,geolevel,transparent){
    $.each(data, function(code,shape){
        var contour = shape.contour.split(" ");
        attributes = {};
        attributes["fill"] = (transparent ? "none" : shape.fillcolor);
        attributes["fill-opacity"] = "0.75";
        attributes["stroke"] = shapeProperties[geolevel]["stroke"];
        attributes["stroke-width"] = shapeProperties[geolevel]["stroke-width"];

        index = shapeProperties[geolevel]["prefix"] + code;
        shapes[index] = drawPath("M " + contour.join(" ") + " z").attr(attributes);
        shapes[index].fill = shape.fillcolor;
        if (!transparent) {
            shapes[index][0].onmouseover = function () {
                shapes[index].attr({fill: hoverfill});
            };
            shapes[index][0].onmouseout = function () {
                shapes[index].attr({fill: shapes[index].fill});
            };
        }
    });
} 
```

`shapeProperties`是一个全局变量（对象），包含形状的属性，具体取决于形状的类型。

我的鼠标悬停有问题吗？有关信息，我的脚本大致基于此演示：[http ://raphaeljs.com/australia.html](http://raphaeljs.com/australia.html)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:30:45.723

这一行：

```
index = shapeProperties[geolevel]["prefix"] + code; 
```

看起来它正在声明一个全局变量，这可能是您的问题的原因。使用`var`关键字，使其作用于函数。

# javascript - javascript window.print()，将副本数作为参数传递

> ID：10242695
> 
> 赞同：1
> 
> 时间：2012-04-20T08:24:29.133
> 
> 标签：javascript

有什么方法可以将参数值传递给 javascript window.print() 函数。假设我想打印 2 份，但默认打印对话框显示 1。

是否有替代功能可以从浏览器调用打印和传递副本数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T08:28:26.883

不，（不）幸运的是，这是不可能的。

我会说这是一件好事；否则，某些网站会指定一个很大的数字，而那些不希望这样做的人会不小心打印很多页面，而不仅仅是一个页面。

# crm - 将 CRM 中的登录用户作为参数传递给 IFRAME

> ID：10242698
> 
> 赞同：0
> 
> 时间：2012-04-20T08:24:40.507
> 
> 标签：crm, dynamics-crm-4

在 MS Dynamics CRM 4.0 中，我们为 salesorder 实体创建了一个额外的选项卡，其中加载了带有自定义远程 PHP 页面的 IFRAME。有没有办法从 PHP 文件中找出哪个 CRM 用户打开了带有 IFRAME 的选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:33:27.217

您应该使用 postMessage 将用户信息发送到 IFRAME。即使 IFRAME 在其他域（跨域）上，这也有效。postMessage 支持：

*   互联网浏览器 8.0+
*   火狐 3.0+
*   Safari 4.0+
*   谷歌浏览器 1.0+
*   歌剧 9.5+

资源：

*   [http://msdn.microsoft.com/en-us/library/ie/cc197015(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/cc197015(v=vs.85).aspx)
*   [http://robertnyman.com/2010/03/18/postmessage-in-html5-to-send-messages-between-windows-and-iframes/](http://robertnyman.com/2010/03/18/postmessage-in-html5-to-send-messages-between-windows-and-iframes/)

# android - 如何将 networklocation.apk 和 com.google.android.maps.jar 集成到我的应用程序中？

> ID：10242699
> 
> 赞同：0
> 
> 时间：2012-04-20T08:24:49.100
> 
> 标签：android, map, gps

我最近开发了一个安卓应用程序，使用网络位置和谷歌地图。但是我遇到了一个严重的问题：默认情况下，我的国家（中国）制造的android手机中没有谷歌服务框架（networklocation.apk和com.google.maps.jar）。所以我无法安装和使用我的应用程序在这些手机里。

如何解决这个问题，我可以将 networklocation.jar（？如何获取）和 com.google.android.maps.jar 集成到我的应用程序中吗？如何 ？

# android - 从 Activity、Async 和 Service 访问 SQLite

> ID：10242700
> 
> 赞同：0
> 
> 时间：2012-04-20T08:24:58.273
> 
> 标签：android, sqlite, android-asynctask, android-service

我正在从收件箱中读取前 100 条短信并将其存储在本地数据库中。我在 AsyncTask 的帮助下做到了这一点。之后，我正在从本地数据库中读取这些 SMS 并显示它。在读取和存储前 100 条短信后，在 AysncTask 的 onPostExecute 中，我正在调用该服务来读取剩余的短信并将其存储在本地数据库中。在调用服务之前，UI 是响应式的，但在调用服务后，UI 变得无响应。是由于数据库锁定还是其他原因。请帮忙解决这个问题...

我的 AsyncTask 代码

```
private class InitialSetup extends AsyncTask<String, Integer, Long> {
    @Override
    protected Long doInBackground(String... urls) {
        fetchSMS();
        updateDatabase();
        return 0L;
    }

    @Override
    protected void onPostExecute(Long result) {
        if (this.dialog.isShowing()) {
            this.dialog.dismiss();
        }
        populateUI(getApplicationContext());
        Intent intent = new Intent(getApplicationContext(), SMSService.class);
        getApplication().startService(intent);
    }
} 
```

服务代码

```
public class SMSService extends Service {

    Long inboxSMSID, localSMSID;

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public void onStart(Intent intent, int startid) {
        if (intent.hasExtra("InboxSMS") && intent.hasExtra("SMSID")) {
            inboxSMSID = intent.getLongExtra("InboxSMS", 0);
            localSMSID = intent.getLongExtra("SMSID", 0);
            globalToLocalSMSDB(inboxSMSID);
        }
    }

    private void globalToLocalSMSDB(Long id) {
        SMSTable smsObj = new SMSTable(getApplicationContext());
        smsObj.open();
        Uri uriSMSURI = Uri.parse("content://sms/inbox");
        Cursor smscur = getContentResolver().query(uriSMSURI, null,
                "_id < " + id, null, "_id DESC");
        while (smscur.moveToNext()) {
            String sender = SMSManagement.getSender(smscur);
            String message = SMSManagement.getMessage(smscur);
            String timeStamp = SMSManagement.getTime(smscur);
            smsObj.insertIntoSMSTable(sender, message, timeStamp);
        }
        smscur.close();
        smsObj.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:34:23.713

该服务也在 UI 线程中运行，除非它是 IntentService，否则您必须在那里手动创建工作线程。

# filter - 数值过滤器和缺失值 (Weka)

> ID：10242701
> 
> 赞同：1
> 
> 时间：2012-04-20T08:24:58.720
> 
> 标签：filter, numeric, weka, missing-data

我正在使用 SMOTE 对我的数据集进行过采样（受类不平衡的影响）。我的一些属性具有整数值，其他属性只有两位小数，但 SMOTE 创建具有许多小数的新实例。所以为了解决这个问题，我想使用 NumericCleaner 过滤器并设置我想要的小数位数。这似乎可行，但我遇到了缺失值的问题。每个缺失值都替换为 0.0 值，我需要使用数据集中的缺失值来评估我的模型。那么如何使用 NumericCleaner（或其他允许舍入值的过滤器）并保留我的缺失值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:34:23.033

非常有趣的问题。好的，这是解决方案：

1.  使用 SMOTE 对少数群体进行过采样（这会产生小数点，但缺失值仍然是缺失值）
2.  然后选择 weka filter->unsupervised->attribute->NumericTransform
3.  然后单击此过滤器并设置属性实例（您具有小数点功能的地方）并在 methodName 而不是“abs”中输入“ceil”。

我希望这能解决问题。

# python - 如何在 Windows 7 上的 Pycharm 2.5 中为 Google App Engine 设置虚拟环境？

> ID：10242704
> 
> 赞同：1
> 
> 时间：2012-04-20T08:25:10.420
> 
> 标签：python, google-app-engine, pycharm

首先我创建一个新的 Python 虚拟环境：

`File`> `Settings`> `Project Interpreter`> `Python Interpreters`>`Create Virtual Environment`

*   姓名：`gae`
*   地点：`C:\gae`
*   基本解释器：`Python 2.7.2`
*   继承全局站点包：`No`
*   包：`pip`, `setuptools`,`distribute`

然后，我创建了一个新的 Google App Engine 项目，该项目使用虚拟环境作为 Python 解释器。当我运行“Hello World”项目时，我得到这个错误：

```
global pdb = <module 'pdb' from 'C:\Python27\Lib\pdb.pyc'>
<type 'exceptions.ImportError'>: No module named pdb 
      args = ('No module named pdb',) 
      message = 'No module named pdb' 
```

我应该怎么做才能解决这个错误？

**更新：**该项目使用默认的 Python 解释器运行而没有错误。使用虚拟环境 Python 解释器会导致问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T17:31:11.963

我不确定这一点，但我认为 SDK 设置了自己的虚拟环境。至少，它将一堆默认库覆盖为 SDK 中可用的库。

我还没有看到有人抱怨 python 库的交叉污染。我建议，不要打扰虚拟环境，这是在浪费你的时间。

# java - 使用 java langdetect 库的日语检测

> ID：10242707
> 
> 赞同：2
> 
> 时间：2012-04-20T08:25:23.953
> 
> 标签：java, encoding, nlp

[我在使用java 库](http://code.google.com/p/language-detection/)对日语进行语言检测时遇到问题：

使用日文文本，我试图检测它的文本语言，但我得到的不是预期的“ja”，而是“en”。以前有人见过这个问题吗？

什么是预期的输出？

```
[ja:0.9999952022259697] 
```

你看到了什么呢？

```
[en:0.9999952022259697] 
```

附件中带有日语文本的原始问题描述，您可以在[此处找到](http://code.google.com/p/language-detection/issues/detail?id=36)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:43:00.287

这几乎可以肯定是与输入文件的编码有关的问题（如果该文件完全包含日语——我不相信它确实如此）。

您链接到的 Java 库假定 - 根据文档 - 输入作为`String`对象给出。这意味着它**假设编码已经被正确猜测**并且输入字节序列被转换为**Java 字符串。**

当您使用该库时，您必须确保是这种情况，即如果您正在处理未知编码的文本（例如日文 EUC-JP 或 SJIS），您必须先检测编码并正确转换字符串。

（由于这些原因，好的语言检测器能够通过使用特定于语言和编码的内部字典同时检测编码*和*语言。）

# haskell - 为什么 Haskell 中除了类型构造函数还有值构造函数？

> ID：10242709
> 
> 赞同：15
> 
> 时间：2012-04-20T08:25:33.017
> 
> 标签：haskell, type-constructor

我是 Haskell 的新手，目前正在使用 Real World Haskell。书中说类型构造函数仅用于类型签名，而值构造函数用于实际代码。它还提供了一个声明示例，以表明两者的名称是相互独立的。如果在实际代码中只使用其中一个，为什么首先需要两个构造函数？既然我们不会在实际代码中使用类型构造函数，那么类型构造函数有什么作用呢？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-20T08:34:33.037

也许这些名字有点误导。**类型构造函数**表示您要声明的类型的名称。之所以这样称呼它们，是因为它们构建类型，而不是值：实际上，（可能）在类型变量上被参数化，它们定义了一系列类型。它们的行为类似于 C++ 的模板和 Java 的泛型。其中`data MyType a b = Constr a b`，MyType 是一个类型构造函数，它采用两种类型`a`并`b`构建一个新类型`(MyType a b)`。

值**构造函数**是在其他（面向对象的）语言中唯一可以称为“构造函数”的部分，因为您需要它来为该类型构建值。所以，在前面的例子中，如果你使用 value 构造函数`Constr :: a -> b -> MyType a b`，你可以构建一个 value `Constr "abc" 'd' :: MyType [Char] Char`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-20T09:34:49.840

这有点像说“如果对象是唯一实际运行的东西，为什么我们需要类*和对象？”*

这两种构造函数做不同的工作。类型构造函数进入类型签名。值构造函数进入可运行代码。

在最简单的情况下，类型“构造函数”*只是*一个类型名称。在最简单的情况下，一个类型只有一个值构造函数。所以你最终会得到类似的东西

`data Point = Point Int Int`

你可能会对自己说“现在为什么我需要写`Point`两次？”

但现在考虑一个不那么简单的例子：

`data Tree x = Leaf x | Branch (Tree x) (Tree x)`

这`Tree`是一个类型构造函数。你给它一个类型参数，它“构造”一个​​类型。`Tree Int`一种类型也是如此，另`Tree String`一种类型也是如此，依此类推。（如 C++ 中的模板，或 Java 或 Eiffel 中的泛型。）

另一方面，`Leaf`是一个值构造函数。给定一个值，它会从中生成一棵单节点树。所以`Leaf 5`是一个`Tree Int`值，`Leaf "banana"`是一个`Tree String`值，等等。

同样对于`Branch`。它采用两个树值并以这些树为子节点构造一个树节点。例如，`Branch (Leaf 2) (Leaf 7)`是一个`Tree Int`值。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-20T08:41:53.837

获得关于类型和值的直觉的一种方便方法是，前者是**编译时值**，而后者是**运行**时值。换句话说，类型构造函数是 Haskell 类型集合中值的构造函数，其唯一目的是在编译时键入程序。这也意味着您不能在运行时构造类型，也不能在编译时构造值。

因此，因为您不能在运行时基于类型值显式分支（尽管您可以隐式使用类型类），所以类型构造函数作为运行时对象完全没有用，并且在许多情况下在最终二进制文件中完全不存在。相反，因为值构造函数允许在运行时在其类型集中构造值，所以它们作为编译时对象完全没有用。

由于这个简单的属性，类型构造函数和值构造函数可以明确地共享名称。

# javascript - jQuery - 检查拖动后元素是否可见

> ID：10242710
> 
> 赞同：1
> 
> 时间：2012-04-20T08:25:38.023
> 
> 标签：javascript, jquery, jquery-ui, visible

我正在通过 ajax 为地图加载元素。其中一些只有在您拖动（使用 jquery-ui）地图时才可见。（溢出：隐藏）有什么方法可以知道元素（div）现在是否在页面的可见部分中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T08:27:55.573

您可以获取`$(window).height()`and`.width()`并查看`$('div').position().top`and`.left`是否在其中。

# user-controls - web用户控件可以创建默认事件吗？

> ID：10242715
> 
> 赞同：0
> 
> 时间：2012-04-20T08:25:50.047
> 
> 标签：user-controls

[默认事件（“我的自定义事件”）]

```
public partial class WebUserControl1 : System.Web.UI.UserControl
{
    public delegate void onButtonClick(object sender, Myeventargs e);
    public event onButtonClick btnHandler;

 protected void ASPxButton1_Click(object sender, EventArgs e)
    {
        if (btnHandler != null)
        {
            btnHandler(this,e);
        }
    } 
```

}

此代码可以与公共部分类 jscript 一起使用：System.Web.UI.Page { protected void Page_Load(object sender, EventArgs e) {

```
 XFButton1.MYClick += new EventHandler(XFButton1_MYClick);
    }

    void XFButton1_MYClick(object sender, EventArgs e)
    {
       ASPxLabel1.Text = "Hello";
    } 
```

但问题是我希望它在我双击按钮时自动生成一个新事件。我可以通过使用网络用户控件来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:33:58.653

太糟糕了，不能告诉您 Web 用户控件可能无法做到那样...请阅读此[http://dotnet-framework-aspnet.itgroups.info/32/9/thread-796040.html](http://dotnet-framework-aspnet.itgroups.info/32/9/thread-796040.html)。

# google-chrome - Chrome/Webkit 中的 CSS3 动画问题

> ID：10242716
> 
> 赞同：1
> 
> 时间：2012-04-20T08:25:56.883
> 
> 标签：google-chrome, css, image-rotation, css-animations

我以为我已经成功地在悬停时旋转了一个齿轮，直到我使用最新的 Chrome v18（重新安装）在另一台 PC 上查看。似乎一些齿轮在旋转时被遮住了。

错误 img - [http://dl.dropbox.com/u/67891839/gear.png](http://dl.dropbox.com/u/67891839/gear.png)

代码 - [http://jsfiddle.net/seanjacob/JHwC7/](http://jsfiddle.net/seanjacob/JHwC7/)

即使您不知道为什么，如果它在您的 Chrome 上运行，请发表评论。

# c++ - 测量相互依赖线程的并行计算时间

> ID：10242728
> 
> 赞同：4
> 
> 时间：2012-04-20T08:27:03.423
> 
> 标签：c++, pthreads, runtime, parallel-processing, time-measurement

我有一个关于并行程序中的运行时测量的问题（我使用了 C++，但我认为这个问题更笼统）。

一些简短的解释：3个线程并行运行（pthread），以不同的方式解决相同的问题。每个线程可以将信息传递给另一个线程（例如，一个线程获得但另一个线程尚未获得的部分解决方案）以加速其他线程，这取决于他自己的状态/他自己计算中的可用信息。一旦第一个线程准备好，整个过程就会停止。现在我想要一个独特的时间测量来评估从开始到问题解决的运行时间。（最后，我想确定通过并行计算使用协同效应是否比单线程计算更快）。

在我看来，问题在于（由于操作系统暂停/取消暂停单个线程），在进程中传递信息的点在每个进程的状态中都不是确定性的。这意味着，在线程 1 上经过 xxx 单位的 cpu 时间后获得了某个信息，但无法控制线程 2 是在其计算所花费的 yyy 或 zzz 单位的 cpu 时间之后收到此信息。假设这个信息无论如何都会完成线程 2 的计算，线程 2 的运行时间是 yyy 或 zzz，这取决于操作系统的操作。

我可以做些什么来获得运行时比较的确定性行为？我可以命令操作系统“不受干扰”地运行每个线程（在多核机器上）吗？有什么我可以在实现（c++）的基础上做的吗？

或者是否有其他概念用于评估此类实现的运行时间（时间增益）？

最好的问候马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T17:29:33.677

任何时候有人在同一个句子中使用术语“确定性”和“多核”，它都会敲响警钟:-)

程序中的不确定性有两大来源：1）操作系统，它通过操作系统抖动和调度决策给线程计时增加了噪音；2) 算法，因为程序遵循不同的路径，具体取决于（部分解决方案的）通信发生的顺序。

作为一名程序员，您对操作系统噪音无能为力。即使对于在专用（静止）节点上运行的程序，标准操作系统也会增加很多噪音。用于计算节点的专用操作系统在一定程度上降低了这种噪声，例如[Blue Gene 系统的操作系统噪声显着降低，因此时序变化也更小](http://dx.doi.org.virtual.anu.edu.au/10.1007/s10586-007-0047-2)。

关于算法，您可以通过添加同步将确定性引入您的程序。如果两个线程同步，例如交换部分解决方案，那么同步之前和之后的计算顺序是确定性的。您当前的代码是异步的，因为一个线程“发送”部分解决方案但不等待它被“接收”。您可以通过将计算分成多个步骤并在每个步骤之后在线程之间同步来将其转换为确定性代码。例如，对于每个线程：

1.  计算一步
2.  记录部分解决方案（如果有）
3.  屏障 - 等待所有其他线程
4.  从其他线程读取部分解决方案
5.  重复 1-4

当然，我们不希望这段代码也能执行得这么好，因为现在每个线程都必须等待所有其他线程完成它们的计算，然后才能继续下一步。

最好的方法可能是接受不确定性，并使用统计方法来比较您的时间安排。针对给定的线程数多次运行程序，并记录时间的范围、平均值和标准偏差。知道给定线程数的所有运行的最大计算时间可能就足够了，或者您可能需要统计测试（例如[学生*t*测试](https://en.wikipedia.org/wiki/Student%27s_t-test)）来回答更复杂的问题，例如“从4 到 8 个线程减少了运行时间？'。正如 DanielKO 所说，时间的波动是用户实际体验到的，因此测量这些波动并进行统计量化是有意义的，而不是旨在完全消除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:27:52.820

这样的测量有什么用？

假设您可以通过一些人为的方法，以线程不受干扰地运行的方式设置 OS 调度程序（即使是间接事件，例如使用缓存、MMU 等的其他进程），这对于并行的实际使用来说是现实的程序？

现代操作系统很少让应用程序控制一般中断处理、内存管理、线程调度等。除非你直接与金属对话，否则你的确定性测量不仅不切实际，而且你的程序的用户永远不会体验到它们（除非它们与您进行测量时一样接近金属。）

所以我的问题是，为什么你需要如此严格的条件来衡量你的程序？在一般情况下，只需接受波动，因为这是用户最有可能看到的。如果某个算法/实现的加速如此微不足道，以至于无法与背景噪声区分开来，那么这对我来说比知道实际的加速分数更有用。

# actionscript-3 - 将一个对象放在另一个对象的当前位置

> ID：10242746
> 
> 赞同：0
> 
> 时间：2012-04-20T08:28:39.677
> 
> 标签：actionscript-3, flash

我试图在我的玩家当前位置放置一个对象，但是当我移开时，该对象会粘在我的玩家身上。我有点知道为什么它会粘在我的播放器上，但我想不出任何其他代码可以使用。

英雄是我在屏幕上移动的玩家。

谢谢洛奇

```
var trap1:trap = new trap();

function keydown(event:KeyboardEvent) :void {

    if(event.keyCode ==32)
    addChild(trap1);
    trap1.x = hero.x;
    trap1.y = hero.y; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:35:25.227

您的显示列表的组织方式不是很清楚，但请尝试将陷阱添加为英雄父级的子级。IE：

```
hero.parent.addChild(trap1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:04:10.847

有几种方法可以完成此任务。基本上有一个细节你必须知道。在 Flash 中，显示列表负责管理屏幕上的元素。DisplayObject 和 DisplayObjectContainer 类提供了访问和操作显示列表的 API。

一种天真的方法是

```
function placeAbove(d1:DisplayObject, d2:DisplayObject):void
{
  if (!d1 || !d2) return;

  d1.x = d2.x;
  d1.y = d2.y;
} 
```

但是当两个 DisplayObjects 有不同的父对象时，DisplayObjects 不在同一个坐标系中，所以这个小方法是行不通的。我编写了一个小例子：

包裹 {

```
 import flash.display.DisplayObject;
  import flash.display.DisplayObjectContainer;
  import flash.display.Sprite;
  import flash.geom.Point;

  public class Points extends Sprite
  {
    public function Points()
    {
      const child1:Sprite = createSquare(50, 50, 0xFF0000, .5)
          , child2:Sprite = createSquare(100, 100, 0x0000FF, .5)
          , container1:Sprite = new Sprite()
          , container2:Sprite = new Sprite();

      DisplayObjectContainer(placeRandomly(addChild(container1))).addChild(child1);
      DisplayObjectContainer(placeRandomly(addChild(container2))).addChild(child2);

      placeAbove(child1, child2);
    }

    private function createSquare(width:Number, height:Number, color:uint = 0, alpha:Number = 1):Sprite
    {
      const sprite:Sprite = new Sprite();
      sprite.graphics.beginFill(color, alpha);
      sprite.graphics.drawRect(0, 0, width, height);
      sprite.graphics.endFill();

      return sprite;
    }

    private function placeAbove(child1:Sprite, child2:Sprite):void
    {
      const point:Point = child2.localToGlobal(new Point(0, 0))
              , point2:Point = child1.globalToLocal(point);

      child1.x = point2.x;
      child1.y = point2.y;
    }

    private function placeRandomly(displayObject:DisplayObject):DisplayObject
    {
      displayObject.x = Math.random() * 100;
      displayObject.y = Math.random() * 100;

      return displayObject;
    }
  }
} 
```

应用程序生成 2 个方格并将其添加到不同的父项中。容器（父项）随机放置在屏幕上，两个子显示对象也是如此。placeAbove 方法完成了所有的魔法。它从全局计算第二个显示对象的位置，并将其映射到父坐标系内的第一个显示对象目标本地位置。

我希望它有所帮助。

# xslt - 结果通过 XPath 构造返回错误的计算值

> ID：10242749
> 
> 赞同：1
> 
> 时间：2012-04-20T08:28:51.777
> 
> 标签：xslt, xpath

**我的源文件是：**

```
<?xml version="1.0" encoding="UTF-8"?>
    <toc>
        <tit>Table des matières</tit>
        <lev1 id="lev1-1">
            <disp>display contents for «@id='lev1-1'».</disp>
        </lev1>
        <lev1 id="lev1-2">
            <disp>display contents for «@id='lev1-2'».</disp>
            <lev3 id="lev3-1">
                <disp>display contents for «@id='lev3-1'».</disp>
                <lev4 id="lev4-1">
                    <disp>display contents for «@id='lev4-1'».</disp>
                </lev4>
            </lev3>
            <lev3 id="lev3-2">
                <disp>display contents for «@id='lev3-2'».</disp>
            </lev3>
            <lev3 id="lev3-3">
                <disp>display contents for «@id='lev3-3'».</disp>
            </lev3>
            <lev3 id="lev3-4">
                <disp>display contents for «@id='lev3-4'».</disp>
            </lev3>
            <lev3 id="lev3-5">
                <disp>display contents for «@id='lev3-5'».</disp>
            </lev3>
        </lev1>
        <lev1 id="lev1-3">
            <disp>display contents for «@id='lev1-3'».</disp>
            <lev2 id="lev2-1">
                <disp>display contents for «@id='lev2-1'».</disp>
                <lev4 id="lev4-2">
                    <disp>display contents for «@id='lev4-2'».</disp>
                </lev4>
                <lev4 id="lev4-3">
                    <disp>display contents for «@id='lev4-3'».</disp>
                </lev4>
                <lev4 id="lev4-4">
                    <disp>display contents for «@id='lev4-4'».</disp>
                </lev4>
                <lev3 id="lev3-6">
                    <disp>display contents for «@id='lev3-6'».</disp>
                    <lev4 id="lev4-5">
                        <disp>display contents for «@id='lev4-5'».</disp>
                    </lev4>
                    <lev4 id="lev4-6">
                        <disp>display contents for «@id='lev4-6'».</disp>
                    </lev4>
                    <lev4 id="lev4-7">
                        <disp>display contents for «@id='lev4-7'».</disp>
                    </lev4>
                    <lev4 id="lev4-8">
                        <disp>display contents for «@id='lev4-8'».</disp>
                    </lev4>
                    <lev4 id="lev4-9">
                        <disp>display contents for «@id='lev4-9'».</disp>
                    </lev4>
                    <lev4 id="lev4-10">
                        <disp>display contents for «@id='lev4-10'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-7">
                    <disp>display contents for «@id='lev3-7'».</disp>
                </lev3>
                <lev3 id="lev3-8">
                    <disp>display contents for «@id='lev3-8'».</disp>
                </lev3>
            </lev2>
            <lev2 id="lev2-2">
                <disp>display contents for «@id='lev2-2'».</disp>
                <lev3 id="lev3-9">
                    <disp>display contents for «@id='lev3-9'».</disp>
                    <lev4 id="lev4-11">
                        <disp>display contents for «@id='lev4-11'».</disp>
                    </lev4>
                    <lev4 id="lev4-12">
                        <disp>display contents for «@id='lev4-12'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-10">
                    <disp>display contents for «@id='lev3-10'».</disp>
                    <lev4 id="lev4-13">
                        <disp>display contents for «@id='lev4-13'».</disp>
                    </lev4>
                    <lev4 id="lev4-14">
                        <disp>display contents for «@id='lev4-14'».</disp>
                    </lev4>
                    <lev4 id="lev4-15">
                        <disp>display contents for «@id='lev4-15'».</disp>
                    </lev4>
                    <lev4 id="lev4-16">
                        <disp>display contents for «@id='lev4-16'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-11">
                    <disp>display contents for «@id='lev3-11'».</disp>
                    <lev4 id="lev4-17">
                        <disp>display contents for «@id='lev4-17'».</disp>
                    </lev4>
                    <lev4 id="lev4-18">
                        <disp>display contents for «@id='lev4-18'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-12">
                    <disp>display contents for «@id='lev3-12'».</disp>
                    <lev4 id="lev4-19">
                        <disp>display contents for «@id='lev4-19'».</disp>
                    </lev4>
                    <lev4 id="lev4-20">
                        <disp>display contents for «@id='lev4-20'».</disp>
                    </lev4>
                    <lev4 id="lev4-21">
                        <disp>display contents for «@id='lev4-21'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-13">
                    <disp>display contents for «@id='lev3-13'».</disp>
                </lev3>
            </lev2>
            <lev2 id="lev2-3">
                <disp>display contents for «@id='lev2-3'».</disp>
                <lev3 id="lev3-14">
                    <disp>display contents for «@id='lev3-14'».</disp>
                    <lev4 id="lev4-22">
                        <disp>display contents for «@id='lev4-22'».</disp>
                    </lev4>
                    <lev4 id="lev4-23">
                        <disp>display contents for «@id='lev4-23'».</disp>
                    </lev4>
                    <lev4 id="lev4-24">
                        <disp>display contents for «@id='lev4-24'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-15">
                    <disp>display contents for «@id='lev3-15'».</disp>
                    <lev4 id="lev4-25">
                        <disp>display contents for «@id='lev4-25'».</disp>
                    </lev4>
                    <lev4 id="lev4-26">
                        <disp>display contents for «@id='lev4-26'».</disp>
                    </lev4>
                    <lev4 id="lev4-27">
                        <disp>display contents for «@id='lev4-27'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-16">
                    <disp>display contents for «@id='lev3-16'».</disp>
                </lev3>
                <lev3 id="lev3-17">
                    <disp>display contents for «@id='lev3-17'».</disp>
                </lev3>
            </lev2>
            <lev2 id="lev2-4">
                <disp>display contents for «@id='lev2-4'».</disp>
                <lev3 id="lev3-18">
                    <disp>display contents for «@id='lev3-18'».</disp>
                </lev3>
                <lev3 id="lev3-19">
                    <disp>display contents for «@id='lev3-19'».</disp>
                    <lev4 id="lev4-28">
                        <disp>display contents for «@id='lev4-28'».</disp>
                    </lev4>
                    <lev4 id="lev4-29">
                        <disp>display contents for «@id='lev4-29'».</disp>
                    </lev4>
                    <lev4 id="lev4-30">
                        <disp>display contents for «@id='lev4-30'».</disp>
                    </lev4>
                    <lev4 id="lev4-31">
                        <disp>display contents for «@id='lev4-31'».</disp>
                    </lev4>
                    <lev4 id="lev4-32">
                        <disp>display contents for «@id='lev4-32'».</disp>
                    </lev4>
                    <lev4 id="lev4-33">
                        <disp>display contents for «@id='lev4-33'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-20">
                    <disp>display contents for «@id='lev3-20'».</disp>
                    <lev4 id="lev4-34">
                        <disp>display contents for «@id='lev4-34'».</disp>
                    </lev4>
                    <lev4 id="lev4-35">
                        <disp>display contents for «@id='lev4-35'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-21">
                    <disp>display contents for «@id='lev3-21'».</disp>
                    <lev4 id="lev4-36">
                        <disp>display contents for «@id='lev4-36'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-22">
                    <disp>display contents for «@id='lev3-22'».</disp>
                </lev3>
                <lev3 id="lev3-23">
                    <disp>display contents for «@id='lev3-23'».</disp>
                </lev3>
            </lev2>
            <lev2 id="lev2-5">
                <disp>display contents for «@id='lev2-5'».</disp>
                <lev3 id="lev3-24">
                    <disp>display contents for «@id='lev3-24'».</disp>
                    <lev4 id="lev4-37">
                        <disp>display contents for «@id='lev4-37'».</disp>
                    </lev4>
                    <lev4 id="lev4-38">
                        <disp>display contents for «@id='lev4-38'».</disp>
                    </lev4>
                    <lev4 id="lev4-39">
                        <disp>display contents for «@id='lev4-39'».</disp>
                    </lev4>
                    <lev4 id="lev4-40">
                        <disp>display contents for «@id='lev4-40'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-25">
                    <disp>display contents for «@id='lev3-25'».</disp>
                    <lev4 id="lev4-41">
                        <disp>display contents for «@id='lev4-41'».</disp>
                    </lev4>
                    <lev4 id="lev4-42">
                        <disp>display contents for «@id='lev4-42'».</disp>
                    </lev4>
                    <lev4 id="lev4-43">
                        <disp>display contents for «@id='lev4-43'».</disp>
                    </lev4>
                    <lev4 id="lev4-44">
                        <disp>display contents for «@id='lev4-44'».</disp>
                    </lev4>
                    <lev4 id="lev4-45">
                        <disp>display contents for «@id='lev4-45'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-26">
                    <disp>display contents for «@id='lev3-26'».</disp>
                </lev3>
                <lev3 id="lev3-27">
                    <disp>display contents for «@id='lev3-27'».</disp>
                </lev3>
            </lev2>
        </lev1>
        <lev1 id="lev1-4">
            <disp>display contents for «@id='lev1-4'».</disp>
            <lev2 id="lev2-6">
                <disp>display contents for «@id='lev2-6'».</disp>
                <lev3 id="lev3-28">
                    <disp>display contents for «@id='lev3-28'».</disp>
                    <lev4 id="lev4-46">
                        <disp>display contents for «@id='lev4-46'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-29">
                    <disp>display contents for «@id='lev3-29'».</disp>
                    <lev4 id="lev4-47">
                        <disp>display contents for «@id='lev4-47'».</disp>
                    </lev4>
                    <lev4 id="lev4-48">
                        <disp>display contents for «@id='lev4-48'».</disp>
                    </lev4>
                    <lev4 id="lev4-49">
                        <disp>display contents for «@id='lev4-49'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-30">
                    <disp>display contents for «@id='lev3-30'».</disp>
                    <lev4 id="lev4-50">
                        <disp>display contents for «@id='lev4-50'».</disp>
                    </lev4>
                    <lev4 id="lev4-51">
                        <disp>display contents for «@id='lev4-51'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-31">
                    <disp>display contents for «@id='lev3-31'».</disp>
                    <lev4 id="lev4-52">
                        <disp>display contents for «@id='lev4-52'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-32">
                    <disp>display contents for «@id='lev3-32'».</disp>
                    <lev4 id="lev4-53">
                        <disp>display contents for «@id='lev4-53'».</disp>
                    </lev4>
                    <lev4 id="lev4-54">
                        <disp>display contents for «@id='lev4-54'».</disp>
                    </lev4>
                    <lev4 id="lev4-55">
                        <disp>display contents for «@id='lev4-55'».</disp>
                    </lev4>
                    <lev4 id="lev4-56">
                        <disp>display contents for «@id='lev4-56'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-33">
                    <disp>display contents for «@id='lev3-33'».</disp>
                </lev3>
                <lev3 id="lev3-34">
                    <disp>display contents for «@id='lev3-34'».</disp>
                </lev3>
            </lev2>
            <lev2 id="lev2-7">
                <disp>display contents for «@id='lev2-7'».</disp>
                <lev3 id="lev3-35">
                    <disp>display contents for «@id='lev3-35'».</disp>
                    <lev4 id="lev4-57">
                        <disp>display contents for «@id='lev4-57'».</disp>
                    </lev4>
                    <lev4 id="lev4-58">
                        <disp>display contents for «@id='lev4-58'».</disp>
                    </lev4>
                    <lev4 id="lev4-59">
                        <disp>display contents for «@id='lev4-59'».</disp>
                    </lev4>
                    <lev4 id="lev4-60">
                        <disp>display contents for «@id='lev4-60'».</disp>
                    </lev4>
                    <lev4 id="lev4-61">
                        <disp>display contents for «@id='lev4-61'».</disp>
                    </lev4>
                    <lev4 id="lev4-62">
                        <disp>display contents for «@id='lev4-62'».</disp>
                    </lev4>
                    <lev4 id="lev4-63">
                        <disp>display contents for «@id='lev4-63'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-36">
                    <disp>display contents for «@id='lev3-36'».</disp>
                    <lev4 id="lev4-64">
                        <disp>display contents for «@id='lev4-64'».</disp>
                    </lev4>
                    <lev4 id="lev4-65">
                        <disp>display contents for «@id='lev4-65'».</disp>
                    </lev4>
                    <lev4 id="lev4-66">
                        <disp>display contents for «@id='lev4-66'».</disp>
                    </lev4>
                    <lev4 id="lev4-67">
                        <disp>display contents for «@id='lev4-67'».</disp>
                    </lev4>
                    <lev4 id="lev4-68">
                        <disp>display contents for «@id='lev4-68'».</disp>
                    </lev4>
                    <lev4 id="lev4-69">
                        <disp>display contents for «@id='lev4-69'».</disp>
                    </lev4>
                    <lev4 id="lev4-70">
                        <disp>display contents for «@id='lev4-70'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-37">
                    <disp>display contents for «@id='lev3-37'».</disp>
                </lev3>
                <lev3 id="lev3-38">
                    <disp>display contents for «@id='lev3-38'».</disp>
                </lev3>
            </lev2>
            <lev2 id="lev2-8">
                <disp>display contents for «@id='lev2-8'».</disp>
                <lev3 id="lev3-39">
                    <disp>display contents for «@id='lev3-39'».</disp>
                    <lev4 id="lev4-71">
                        <disp>display contents for «@id='lev4-71'».</disp>
                    </lev4>
                    <lev4 id="lev4-72">
                        <disp>display contents for «@id='lev4-72'».</disp>
                    </lev4>
                    <lev4 id="lev4-73">
                        <disp>display contents for «@id='lev4-73'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-40">
                    <disp>display contents for «@id='lev3-40'».</disp>
                    <lev4 id="lev4-74">
                        <disp>display contents for «@id='lev4-74'».</disp>
                    </lev4>
                    <lev4 id="lev4-75">
                        <disp>display contents for «@id='lev4-75'».</disp>
                    </lev4>
                    <lev4 id="lev4-76">
                        <disp>display contents for «@id='lev4-76'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-41">
                    <disp>display contents for «@id='lev3-41'».</disp>
                </lev3>
                <lev3 id="lev3-42">
                    <disp>display contents for «@id='lev3-42'».</disp>
                </lev3>
            </lev2>
            <lev2 id="lev2-9">
                <disp>display contents for «@id='lev2-9'».</disp>
                <lev3 id="lev3-43">
                    <disp>display contents for «@id='lev3-43'».</disp>
                    <lev4 id="lev4-77">
                        <disp>display contents for «@id='lev4-77'».</disp>
                    </lev4>
                    <lev4 id="lev4-78">
                        <disp>display contents for «@id='lev4-78'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-44">
                    <disp>display contents for «@id='lev3-44'».</disp>
                </lev3>
                <lev3 id="lev3-45">
                    <disp>display contents for «@id='lev3-45'».</disp>
                    <lev4 id="lev4-79">
                        <disp>display contents for «@id='lev4-79'».</disp>
                    </lev4>
                    <lev4 id="lev4-80">
                        <disp>display contents for «@id='lev4-80'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-46">
                    <disp>display contents for «@id='lev3-46'».</disp>
                </lev3>
                <lev3 id="lev3-47">
                    <disp>display contents for «@id='lev3-47'».</disp>
                    <lev4 id="lev4-81">
                        <disp>display contents for «@id='lev4-81'».</disp>
                    </lev4>
                    <lev4 id="lev4-82">
                        <disp>display contents for «@id='lev4-82'».</disp>
                    </lev4>
                    <lev4 id="lev4-83">
                        <disp>display contents for «@id='lev4-83'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-48">
                    <disp>display contents for «@id='lev3-48'».</disp>
                </lev3>
                <lev3 id="lev3-49">
                    <disp>display contents for «@id='lev3-49'».</disp>
                </lev3>
            </lev2>
            <lev2 id="lev2-10">
                <disp>display contents for «@id='lev2-10'».</disp>
                <lev3 id="lev3-50">
                    <disp>display contents for «@id='lev3-50'».</disp>
                    <lev4 id="lev4-84">
                        <disp>display contents for «@id='lev4-84'».</disp>
                    </lev4>
                    <lev4 id="lev4-85">
                        <disp>display contents for «@id='lev4-85'».</disp>
                    </lev4>
                    <lev4 id="lev4-86">
                        <disp>display contents for «@id='lev4-86'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-51">
                    <disp>display contents for «@id='lev3-51'».</disp>
                    <lev4 id="lev4-87">
                        <disp>display contents for «@id='lev4-87'».</disp>
                    </lev4>
                    <lev4 id="lev4-88">
                        <disp>display contents for «@id='lev4-88'».</disp>
                    </lev4>
                    <lev4 id="lev4-89">
                        <disp>display contents for «@id='lev4-89'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-52">
                    <disp>display contents for «@id='lev3-52'».</disp>
                    <lev4 id="lev4-90">
                        <disp>display contents for «@id='lev4-90'».</disp>
                    </lev4>
                    <lev4 id="lev4-91">
                        <disp>display contents for «@id='lev4-91'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-53">
                    <disp>display contents for «@id='lev3-53'».</disp>
                    <lev4 id="lev4-92">
                        <disp>display contents for «@id='lev4-92'».</disp>
                    </lev4>
                    <lev4 id="lev4-93">
                        <disp>display contents for «@id='lev4-93'».</disp>
                    </lev4>
                    <lev4 id="lev4-94">
                        <disp>display contents for «@id='lev4-94'».</disp>
                    </lev4>
                </lev3>
                <lev3 id="lev3-54">
                    <disp>display contents for «@id='lev3-54'».</disp>
                </lev3>
                <lev3 id="lev3-55">
                    <disp>display contents for «@id='lev3-55'».</disp>
                </lev3>
            </lev2>
        </lev1>
        <lev1 id="lev1-5">
            <disp>display contents for «@id='lev1-5'».</disp>
            <lev3 id="lev3-56">
                <disp>display contents for «@id='lev3-56'».</disp>
            </lev3>
            <lev3 id="lev3-57">
                <disp>display contents for «@id='lev3-57'».</disp>
            </lev3>
            <lev3 id="lev3-58">
                <disp>display contents for «@id='lev3-58'».</disp>
            </lev3>
        </lev1>
    </toc> 
```

**这是 XSL 文档：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">

    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <!-- for testing resons, nested structures removed -->
    <xsl:template match="/">
        <levs>
            <xsl:apply-templates select="//lev1|//lev2|//lev3|//lev4|//lev5"/>
        </levs>
    </xsl:template>

    <xsl:template match="//lev1|//lev2|//lev3|//lev4|//lev5">
        <xsl:variable name="depth" select="replace(local-name(),'lev','','i')"/>
        <xsl:variable name="position" select="count(preceding::*[matches(local-name(),'^lev\d+')]) + 1"/>
        <lev id="{@id}" position="{$position}" depth="{$depth}" name="{local-name()}"/>
    </xsl:template>

    <!-- final output would be like following -->
    <!--
        <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
        <xsl:param name="extref">file:/c:/somefolder/somefile.xml</xsl:param>
        <xsl:strip-space elements="*"/>
        <xsl:template match="/">
            <toc>
                <xsl:apply-templates select="toc"/>
            </toc>
        </xsl:template>

        <xsl:template match="//lev1|//lev2|//lev3|//lev4|//lev5">
            <xsl:variable name="depth" select="replace(local-name(.),'lev','','i')"/>
            <xsl:variable name="position" select="count(preceding::*[matches(local-name(),'^lev\d+')]) + 1"/>

            <lev id="{@id}" position="{$position}" depth="{$depth}">
                <disp><xsl:apply-templates/></disp>
                <refdoc href="{concat($extref,'#',@id)}"/>
            </lev>
        </xsl:template>
    -->

</xsl:transform> 
```

**和输出：**

```
<?xml version="1.0" encoding="UTF-8"?>
<levs>
   <lev id="lev1-1" position="1" depth="1" name="lev1"/>
   <lev id="lev1-2" position="2" depth="1" name="lev1"/>
   <lev id="lev3-1" position="2" depth="3" name="lev3"/>
   <lev id="lev4-1" position="2" depth="4" name="lev4"/>
   <lev id="lev3-2" position="4" depth="3" name="lev3"/>
   <!--items removed for clarity-->
   <lev id="lev3-58" position="166" depth="3" name="lev3"/>
</levs> 
```

* * *

我的问题是计算 XPath 构造`count(preceding::*[matches(local-name(),'^lev\d+')]) + 1`会产生错误的结果。的产生的值`@position`不是线性的，因为值之间的共同差异应该是`1`，而生成的序列是`0`，`1`或`>1`。

我可以简单地通过使用`«for-each»`循环来解决这个问题，但我也必须保留嵌套结构。

有人帮我解决我的问题吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:15:56.373

我想你只是想要

```
<xsl:variable name="position" as="xs:integer">
  <xsl:number level="any" count="*[starts-with(local-name(), 'lev')]"/>
</xsl:variable> 
```

这样你应该得到一个数字序列 1,2,3,4,5,....

# java - OAuth - 无效令牌：请求令牌在不允许时使用

> ID：10242751
> 
> 赞同：5
> 
> 时间：2012-04-20T08:28:53.213
> 
> 标签：java, oauth, google-docs-api

我正在尝试使用 OAuth 2.0 访问 Google 的 Documents List API 3.0，但遇到了 401 错误问题。

用户接受后，我的代码如下：

```
GoogleOAuthParameters oauthParameters = new GoogleOAuthParameters();
oauthParameters.setOAuthConsumerKey(CLIENT_ID);
oauthParameters.setOAuthConsumerSecret(CLIENT_SECRET);
oauthParameters.setOAuthToken(token);
oauthParameters.setOAuthTokenSecret(tokenSecret);
oauthParameters.setScope("https://docs.google.com/feeds/");

service = new DocsService("myapp");
service.setOAuthCredentials(oauthParameters, new OAuthHmacSha1Signer());

DocumentListFeed feed = service.getFeed(new URL("https://docs.google.com/feeds/default/private/full/?v=3"), DocumentListFeed.class); 
```

然后，在最后一行 -getFeed()- 抛出异常：

```
com.google.gdata.util.AuthenticationException: Token invalid - Invalid token: Request token used when not allowed.
<HTML>
<HEAD>
<TITLE>Token invalid - Invalid token: Request token used when not allowed.</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Token invalid - Invalid token: Request token used when not allowed.</H1>
<H2>Error 401</H2>
</BODY>
</HTML> 
```

这是怎么回事？在静态主测试类上的工作就像一个魅力，但是当我在服务器上运行它时，这条线不再工作了。任何的想法？

* * *

**解决了**

访问令牌需要以这种方式检索，使用 GoogleOAuthHelper，而不是直接使用 GoogleOAuthParameters：

```
String accessToken = oauthHelper.getAccessToken(oauthParameters); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T15:58:58.260

您使用的不是 OAuth 2.0，而是使用 HMAC-SHA1 作为签名方法的 OAuth 1.0。要使用 OAuth 2.0，您至少需要 1.47.0 版的[gdata-java-client](http://code.google.com/p/gdata-java-client/)库和 1.8.0-beta 版的[google-oauth-java-client](http://code.google.com/p/google-oauth-java-client/)库。

使用[google-api-java-client](http://code.google.com/p/google-api-java-client/)库提供了帮助类来处理 Google 的 OAuth 2.0 实现。

要检索 OAuth 2.0 凭据，您可以使用以下代码段：

```
import com.google.api.client.auth.oauth2.Credential;
import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeRequestUrl;
import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeTokenRequest;
import com.google.api.client.googleapis.auth.oauth2.GoogleCredential;
import com.google.api.client.googleapis.auth.oauth2.GoogleTokenResponse;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.jackson.JacksonFactory;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Arrays;
import java.util.List;

public class MyClass {

  // Retrieve the CLIENT_ID and CLIENT_SECRET from an APIs Console project:
  //     https://code.google.com/apis/console
  static String CLIENT_ID = "<YOUR_CLIENT_ID>";
  static String CLIENT_SECRET = "<YOUR_CLIENT_SECRET>";
  // Change the REDIRECT_URI value to your registered redirect URI for web
  // applications.
  static String REDIRECT_URI = "urn:ietf:wg:oauth:2.0:oob";
  // Add other requested scopes.
  static List<String> SCOPES = Arrays.asList("https://docs.google.com/feeds");

  /**
   * Retrieve OAuth 2.0 credentials.
   * 
   * @return OAuth 2.0 Credential instance.
   */
  static Credential getCredentials() throws IOException {
    HttpTransport transport = new NetHttpTransport();
    JacksonFactory jsonFactory = new JacksonFactory();

    // Step 1: Authorize -->
    String authorizationUrl =
        new GoogleAuthorizationCodeRequestUrl(CLIENT_ID, REDIRECT_URI, SCOPES).build();

    // Point or redirect your user to the authorizationUrl.
    System.out.println("Go to the following link in your browser:");
    System.out.println(authorizationUrl);

    // Read the authorization code from the standard input stream.
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    System.out.println("What is the authorization code?");
    String code = in.readLine();
    // End of Step 1 <--

    // Step 2: Exchange -->
    GoogleTokenResponse response =
        new GoogleAuthorizationCodeTokenRequest(transport, jsonFactory, CLIENT_ID, CLIENT_SECRET,
            code, REDIRECT_URI).execute();
    // End of Step 2 <--

    // Build a new GoogleCredential instance and return it.
    return new GoogleCredential.Builder().setClientSecrets(CLIENT_ID, CLIENT_SECRET)
        .setJsonFactory(jsonFactory).setTransport(transport).build()
        .setAccessToken(response.getAccessToken()).setRefreshToken(response.getRefreshToken());
  }

  // …
} 
```

获得 OAuth 2.0 凭据后，您可以授权服务对象，如下所示：

```
// ...
import com.google.api.client.auth.oauth2.Credential;
import com.google.gdata.client.docs.DocsService;
import com.google.gdata.data.docs.DocumentListEntry;
import com.google.gdata.data.docs.DocumentListFeed;
import com.google.gdata.util.ServiceException;
// ...
import java.io.IOException;
import java.net.URL;
// ...

public class MyClass {
  // …

  /**
   * Print document entries using the provided authorized DocsService.
   * 
   * @param credential OAuth 2.0 credential to use to authorize the requests.
   * @throws IOException
   * @throws ServiceException
   */
  static void printDocuments(Credential credential) throws IOException, ServiceException {
    // Instantiate and authorize a new DocsService object.
    DocsService service = new DocsService("<YOUR_APPLICATION_NAME>");
    service.setOAuth2Credentials(credential);

    // Send a request to the Documents List API to retrieve document entries.
    URL feedUri = new URL("https://docs.google.com/feeds/default/private/full/");
    DocumentListFeed feed = service.getFeed(feedUri, DocumentListFeed.class);

    for (DocumentListEntry entry : feed.getEntries()) {
      System.out.println("Title: " + entry.getTitle().getPlainText());
    }
  }

  // ...
} 
```

,可以从[API 控制台](https://code.google.com/apis/console)`CLIENT_ID`检索，并且必须与您的 API 项目中注册的匹配。`CLIENT_SECRET``REDIRECT_URI`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-26T04:21:08.063

以下是将 OAuth2.0 令牌添加到 GData 服务的方法：

```
SpreadsheetService service = new SpreadsheetService("MySpreadsheetIntegration-v1");

service.setOAuth2Credentials(new Credential(BearerToken
    .authorizationHeaderAccessMethod())
    .setFromTokenResponse(new TokenResponse().setAccessToken(mToken))); 
```

确保导入所有必要的库（很多）。

应使用 Google Play 服务 OAuth 机制获取 Android 令牌：

```
String token = GoogleAuthUtil.getToken(String email, String scopes); 
```

# java - 建议如何重写以下Java代码片段

> ID：10242755
> 
> 赞同：1
> 
> 时间：2012-04-20T08:29:10.973
> 
> 标签：java

我试图将此代码转换为更优雅或更有效的编码方式。

```
final ContentSlotForPageModel rel = modelService.create(ContentSlotForPageModel.class);
rel.setUid("rel_1");
rel.setPosition("no");
rel.setCatalogVersion(catalogVersionModel);
rel.setPage(firstContentPage);
rel.setContentSlot(slot);
modelService.save(rel);

final ContentSlotForTemplateModel relTemplate = modelService.create(ContentSlotForTemplateModel.class);
relTemplate.setUid("relTemplate_1");
relTemplate.setPosition("no");
relTemplate.setCatalogVersion(catalogVersionModel);
relTemplate.setPageTemplate(template);
relTemplate.setContentSlot(slot);
modelService.save(rel); 
```

Where`ContentSlotForPageModel`和`ContentSlotForTemplateModel`是 的子类型`CMSRelationModel`。所以我尝试创建一个方法，通过使用它的超类型来设置这些属性，如下所示：

```
private void setRelationModel(final CMSRelationModel rel, final ContentSlotModel slot, final String id)
{
    rel.setUid(id);
    rel.setCatalogVersion(catalogVersionModel);

    if (rel instanceof ContentSlotForPageModel)
    {
        ((ContentSlotForPageModel) rel).setPage(firstContentPage);
        ((ContentSlotForPageModel) rel).setContentSlot(slot);
        ((ContentSlotForPageModel) rel).setPosition("no");
    }
    else if (rel instanceof ContentSlotForTemplateModel)
    {
        ((ContentSlotForTemplateModel) rel).setPageTemplate(template);
        ((ContentSlotForTemplateModel) rel).setContentSlot(slot);
        ((ContentSlotForTemplateModel) rel).setPosition("no");
    }

    modelService.save(rel);

} 
```

但是，CMSRelationModel 上没有定义许多方法，因此我需要创建一个验证来进行正确的调用。我不能在它的超类上定义这个方法。有没有更好的方法来写这个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:04:50.547

请执行下列操作。
不`instanceof`，强类型，重复代码的最小化。

```
private void setRelationModel(ContentSlotForPageModel rel, ContentSlotModel slot, String id) {
    rel.setPage(firstContentPage);
    rel.setContentSlot(slot);
    rel.setPosition("no");
    setCMSRelationModel(rel);
}

private void setRelationModel(ContentSlotForTemplateModel rel, ContentSlotModel slot, String id) {
    rel.setPageTemplate(template);
    rel.setContentSlot(slot);
    rel.setPosition("no");
    setCMSRelationModel(rel);
}

private void setCMSRelationModel(CMSRelationModel rel, String id) {
    rel.setUid(id);
    rel.setCatalogVersion(catalogVersionModel);
    modelService.save(rel);
} 
```

我还`final`从参数中删除以减少“代码噪音”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:36:47.973

你能在它们之间创建一个新的超类吗？

```
public abstract class SuperContentSlotModel extends CMSRelationModel{
    private String position;
    private ContentSlotModel slot;
    //...
}

class ContentSlotForPageModel extends SuperContentSlotModel{
    private int page;
    //...
} 
```

此外，您可以使用方法重载而不是`instanceof`：

```
private void setRelationModel(final ContentSlotForPageModel rel, final ContentSlotModel slot, final String id){
    //...
}
private void setRelationModel(final ContentSlotForTemplateModel rel, final ContentSlotModel slot, final String id){
    //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:57:35.387

你能试试这个吗..

首先，您填充从 继承的字段`CMSRelationModel`，然后根据您的子类填充字段，例如 using`instanceof`运算符。

这是样本

```
private void setRelationModel(final CMSRelationModel rel, final ContentSlotModel slot, final String id)
{
    rel.setUid(id);
    rel.setCatalogVersion(catalogVersionModel);
    rel.setContentSlot(slot); // assume this is inherited method from CMSRelationModel
    rel.setPosition("no"); // assume this is inherited method from CMSRelationModel

    if (rel instanceof ContentSlotForPageModel)
    {
        ((ContentSlotForPageModel) rel).setPage(firstContentPage);
    }
    else if (rel instanceof ContentSlotForTemplateModel)
    {
        ((ContentSlotForTemplateModel) rel).setPageTemplate(template);
    }

    modelService.save(rel);
} 
```

# delphi - 在 IDE 中运行时，无法在 Win7 64 位上的 Delphi2007 中加载 ODBC DLL

> ID：10242759
> 
> 赞同：3
> 
> 时间：2012-04-20T08:29:40.940
> 
> 标签：delphi, windows-7, 64-bit, odbc, syswow64

有人能帮忙吗。

我正在使用Delphi2007 12 月更新。

我正在尝试通过 ODBC 连接到 Gupta 数据库并收到错误消息：找不到指定的模块。C:\Windows\System32\c2gup15.dll。

这些 DLL 是 32 位的，应该可以在 c:\Windows\SysWow64 中找到。

独立运行我编译的程序（不在 Delphi 内部）时，我没有问题。

在 Delphi IDE 中运行的 XP（我的另一台机器）上没有问题。

通过此 ODBC 驱动程序进行的所有其他连接方式（如 Excel）都可以完美运行。

我在使用 ODBCExpress 和 AnyDac 时都遇到了这个问题。

据我了解：在 Win7 64 位窗口中运行 32 位应用程序时，应自动使用 SysWow64 而不是 System32。

Delphi2007 会以某种方式破坏或覆盖它吗？

任何建议如何解决它？（不能使用调试器时，开发软件并不容易）

# jquery - 如何在 asp.net 的 $.post 方法中获取/传递动态控件？

> ID：10242760
> 
> 赞同：1
> 
> 时间：2012-04-20T08:29:48.820
> 
> 标签：jquery, asp.net, ajax, dynamic-controls, request.form

我从数据库中动态地在我的页面中添加控件，并且我正在使用 $.post() 方法在客户端传递值。现在我想在 $.post() 方法中传递这个控件。所以任何人都可以建议我如何在 post 方法中获取这些控件。

```
 $.post("TestPage.aspx", { Type: 'SaveData', drpGender: $('#MainContent_drpGender').val(), cmbMonth: $('#MainContent_cmbMonth').val(), cmbYear: $('#MainContent_cmbYear').val(), drpTall: $('#MainContent_drpTall').val(), txtWeight: $('#MainContent_txtWeight').val() }, function (data) {
                    alert(data);
                }, "html"); 
```

在上面，drpGender、cmbMonth、drpTall、txtheigh 是我在页面中添加的动态控件。

在客户端，我在 SaveData() 方法中保存数据。我正在使用这个控件值客户端通过使用

```
Request.Form["drpGender"]; 
```

那么谁能告诉我如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:36:31.513

`Request.Form`不会为您的 Ajax 帖子填充，因为您正在手动序列化数据并将其作为 JSON 对象发送到控制器，而不是作为表单编码数据。

在使用 $.post 发送之前尝试对您的对象进行 URL 编码。为了便于阅读，我拆分了一些代码 -`$.param()`如果需要，您可以添加内联调用。

```
// Get your submit data.
var sendData = { Type: 'SaveData', drpGender: $('#MainContent_drpGender').val(), cmbMonth: $('#MainContent_cmbMonth').val(), cmbYear: $('#MainContent_cmbYear').val(), drpTall: $('#MainContent_drpTall').val(), txtWeight: $('#MainContent_txtWeight').val() };

// Form encode your data.
sendData = $.param(sendData);

// Send.
$.post("TestPage.aspx", sendData, function (data) {
                    alert(data);
                }, "html"); 
```

这将导致控制器将接收到的请求视为 Form post 和 populate `Request.Form`。

# qt - 在 Qt 中设置视频小部件的大小

> ID：10242761
> 
> 赞同：0
> 
> 时间：2012-04-20T08:29:48.927
> 
> 标签：qt, phonon

我是一个正在尝试使用 Qt phonon 工具的新手 Qt 程序员。

我在在线教程的帮助下创建了这个程序。我能够在我的程序中加载一个 video.avi 文件，但帧中视频的大小非常小。我试图用我非常贫乏的 Qt 知识来增加视频的大小。这是我的代码：

```
simpleplayer::simpleplayer(QWidget *parent) : QMainWindow(parent)
{
    Phonon::VideoPlayer *videoPlayer = new Phonon::VideoPlayer(Phonon::VideoCategory, this);
    videoPlayer->play(Phonon::MediaSource("/home/sabbir/Downloads/heli2.avi"));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:56:05.797

`Phonon::VideoPlayer`继承[QWidget](http://qt-project.org/doc/qt-4.8/phonon-videoplayer.html)，因此您应该能够使用[size 属性设置大小](http://qt-project.org/doc/qt-4.8/qwidget.html#size-prop)

我自己没有使用过 Phonon，所以我不确定您的视频是否会随`Phonon::VideoPlayer`?

# c# - 剪切图像的中心

> ID：10242762
> 
> 赞同：3
> 
> 时间：2012-04-20T08:29:55.193
> 
> 标签：c#, image, image-processing

假设我有一个 400x300px 的图像，我想在服务器端（C#，.NET 4.0）将其剪切为 200x200px 居中。

我该怎么做？使用一种画布并移动它？任何教程/代码示例/建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:30:59.757

尝试这样的事情：

```
 Bitmap sourceImage = ...;

        int targetWidth = 200;
        int targetHeight = 200;

        int x = sourceImage.Width / 2 - targetWidth / 2;
        int y = sourceImage.Height / 2 - targetHeight / 2;

        Rectangle cropArea = 
            new Rectangle(x, y, targetWidth, targetHeight);

        Bitmap targetImage = 
            sourceImage.Clone(cropArea, sourceImage.PixelFormat); 
```

如果源图像小于目标图像大小，这显然会失败，但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T20:09:42.750

如果需要，此方法将保存在中心裁剪的图像：

```
bool SaveCroppedImage(Image image, int targetWidth, int targetHeight, string filePath)
{
    ImageCodecInfo jpgInfo = ImageCodecInfo.GetImageEncoders().Where(codecInfo => codecInfo.MimeType == "image/jpeg").First();
    Image finalImage = image;
    System.Drawing.Bitmap bitmap = null;
    try
    {
        int left = 0;
        int top = 0;
        int srcWidth = targetWidth;
        int srcHeight = targetHeight;
        bitmap = new System.Drawing.Bitmap(targetWidth, targetHeight);
        double croppedHeightToWidth = (double)targetHeight / targetWidth;
        double croppedWidthToHeight = (double)targetWidth / targetHeight;

        if (image.Width > image.Height)
        {
            srcWidth = (int)(Math.Round(image.Height * croppedWidthToHeight));
            if (srcWidth < image.Width)
            {
                srcHeight = image.Height;
                left = (image.Width - srcWidth) / 2;
            }
            else
            {
                srcHeight = (int)Math.Round(image.Height * ((double)image.Width / srcWidth));
                srcWidth = image.Width;
                top = (image.Height - srcHeight) / 2;
            }
        }
        else
        {
            srcHeight = (int)(Math.Round(image.Width * croppedHeightToWidth));
            if (srcHeight < image.Height)
            {
                srcWidth = image.Width;
                top = (image.Height - srcHeight) / 2;
            }
            else
            {
                srcWidth = (int)Math.Round(image.Width * ((double)image.Height / srcHeight));
                srcHeight = image.Height;
                left = (image.Width - srcWidth) / 2;
            }
        }
        using (Graphics g = Graphics.FromImage(bitmap))
        {
            g.SmoothingMode = SmoothingMode.HighQuality;
            g.PixelOffsetMode = PixelOffsetMode.HighQuality;
            g.CompositingQuality = CompositingQuality.HighQuality;
            g.InterpolationMode = InterpolationMode.HighQualityBicubic;
            g.DrawImage(image, new Rectangle(0, 0, bitmap.Width, bitmap.Height), new Rectangle(left, top, srcWidth, srcHeight), GraphicsUnit.Pixel);
        }
        finalImage = bitmap;
    }
    catch { }
    try
    {
        using (EncoderParameters encParams = new EncoderParameters(1))
        {
            encParams.Param[0] = new EncoderParameter(Encoder.Quality, (long)100);
            //quality should be in the range [0..100] .. 100 for max, 0 for min (0 best compression)
            finalImage.Save(filePath, jpgInfo, encParams);
            return true;
        }
    }
    catch { }
    if (bitmap != null)
    {
        bitmap.Dispose();
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T08:39:45.123

使用目标大小创建新的位图对象。

围绕该位图创建图形对象。

在该 Graphcs 对象上，使用适当的参数调用 DrawImage()，这将从第一张图片中切出适当的片段。

代码将类似于：

```
Bitmap dstBitmap=new Bitmap(200, 200);
using (Graphics g=Graphics.FromImage(dstBitmap)) 
{
    srcBitmap.DrawImage(dstBitmap, /* cropping parameters here */);
}
//  at the end you'll have your bitmap in dstBitmap, ... 
```

我没有包含方法的文字参数，使用智能感知和手动来找出它们。

# ios - atos 和 dwarfdump 不会象征我的地址

> ID：10242766
> 
> 赞同：14
> 
> 时间：2012-04-20T08:30:16.257
> 
> 标签：ios, ipad, dwarf, symbolicate, airbrake

我通过 AirBrake.io 收到了一份没有符号化的崩溃报告。由于崩溃报告的格式与 Apple 崩溃日志的格式不完全相同，因此我不能像往常一样将其放在 XCode 上，因此我从 XCode 存档中获取了完全相同的构建，试图在命令行上对其进行符号化。结果如下：

```
$ atos -o kidsapp.app/kidsapp 0x0002fc4c
0x0002fc4c (in kidsapp) 
```

我绝对确定我使用的是与崩溃报告相同的版本。所以我也尝试了 dwarfdump：

```
$ dwarfdump --lookup 0x0002fc4c --arch armv7 kidsapp.app.dSYM
----------------------------------------------------------------------
 File: kidsapp.app.dSYM/Contents/Resources/DWARF/kidsapp (armv7)
----------------------------------------------------------------------
Looking up address: 0x000000000002fc4c in .debug_info... not found.
Looking up address: 0x000000000002fc4c in .debug_frame... not found. 
```

也没有结果。除了使用错误的 dSYM 文件之外，还有什么我可能做错的吗？我知道它是正确的，因为这是 AirBrake 的崩溃报告中提到的版本，它在我的 XCode 存档中。

欢迎任何想法/提示！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-17T17:55:03.140

我使用以下算法来计算它：

`slide`+ `stack address`- `load address`=`symbol address`

和

`stack address`是我从堆栈转储崩溃报告中获得的十六进制值（不是 .crash 文件，只是堆栈转储）。

和

`slide`是运行时 LC_SEGMENT cmd 的 vmaddr `otool -arch armv7 -l APP_BINARY_PATH`。我的通常最终是 0x00001000。

和

`load address`是复杂的部分。它实际上是主线程的最底部堆栈地址与运行时包含符号的二进制文件部分的第一个地址之间的差异`dwarfdump --arch armv7 --all DSYM_BINARY_PATH`。这只是`main`函数的符号地址。因此，如果您的最底部崩溃地址是 0x8000，而您的主函数的符号地址是 0x2000，那么您`load address`就是 0x6000。

现在有了所有这些部分，我可以计算符号地址并将其放入 atos 或 dwarfdump: `dwarfdump --lookup SYM_ADDR --arch armv7 APP_BINARY_PATH`。

转储示例（您可以看到`load address`是 0x00003af4）：

> `----------------------------------------------------------------------`
> 
> 文件：/Users/user/Desktop/MyApp.xcarchive/dSYMs/MyApp.app.dSYM/Contents/Resources/DWARF/MyApp (armv7)
> 
> `----------------------------------------------------------------------`
> 
> 0x00000024: [0x00003af4 - 0x00003b4e) 主要
> 
> 0x00000098：[0x00003b50 - 0x00003d8c）-[MyAppDelegate 应用程序：didFinishLaunchingWithOptions：]
> 
> ...垃圾场的其余部分

最困难的部分是意识到我包含的 2 个静态库之一在链接到我的应用程序二进制文件之前已经剥离了它们的符号！这留下了巨大的符号地址差距，所以我只得到了 dSYM 中所需符号的三分之二。

确保在您的静态库 xcode 项目中将以下标志设置为 NO，以便当您链接它时，您可以将符号拉入应用程序的二进制文件（稍后可以剥离）：`COPY_PHASE_STRIP`、`DEAD_CODE_STRIPPING`和`STRIP_INSTALLED_PRODUCT`.

现在你可能会问，“如果堆栈转储不包含主函数，因为它不在主线程上，所以我无法获取主函数的堆栈地址，我该怎么办？”。对此我会回答，“我没有一个该死的线索！”。只需交叉手指，希望您可以获得包含符号地址的堆栈跟踪，或使用模仿 Apple 崩溃日志的崩溃报告系统，如 PLCrashReporter。

[编辑 2013 年 5 月 26 日] -

我注意到这`load address`实际上是 mach-o 二进制文件的地址。虽然我上面描述的通常可以工作 - 它实际上并不正确。这可以通过崩溃报告获得，但是这个答案的重点是在您没有崩溃报告时提供崩溃的符号。我弄清楚`load address`何时想要象征性的最好方法是确保我`load address`使用`stack addresses`.

我亲自创建了一个用于记录崩溃（不是崩溃报告）并将它们发送到 S3 存储桶的系统，以便稍后我可以检索它们以进行调试。当我启动我的应用程序时`slide`，如果我的应用程序崩溃`load address`并且`main function address`我发送一个`stack addresses`.

注意：dyld 函数使用`#include <mach-o/dyld.h>`

`slide`= 返回的地址`_dyld_get_image_vmaddr_slide(0)`

`load address`= 返回的地址`_dyld_get_image_header(0)`

`main function address``[NSThread callStackReturnAddresses]`=在主线程上调用时的最后一个地址

在崩溃时，我肯定会记录`[NSThread callStackReturnAddresses]`以及`[NSThread callStackSymbols]`可以通过使用此方法检索的体系结构：

```
- (NSString*) arch
{
    NSString* arch =
#ifdef _ARM_ARCH_7
        @"armv7";
#elif defined (_ARM_ARCH_6)
        @"armv6";
#else
        nil;
#endif

    return arch;
} 
```

不过，我还不知道如何区分 armv7 和 armv7s。

因此，这可能会在将来有所帮助。我计划把我学到的所有东西都变成一个简单的崩溃工具——比 natos 工具（可能是 natos v2）更好。

我已经更新了 natos 以支持`load address`手动提供：[https ://github.com/NSProgrammer/natos](https://github.com/NSProgrammer/natos)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-23T12:07:44.203

首先检查 dSYM 是否真的适合该应用程序：

```
dwarfdump --uuid kidsapp.app/kidsapp
dwarfdump --uuid kidsapp.app.dSYM 
```

两者都应该返回相同的结果。

接下来检查 dSYM 是否有任何有效内容

```
dwarfdump --all kidsapp.app.dSYM 
```

这应该至少提供一些信息，除了`not found`.

我猜 dSYM 已损坏。通常，您可能希望使用崩溃报告器，它为您提供包含所有线程和最后异常回溯信息的完整崩溃报告。我建议使用基于 PLCrashReporter 的东西，例如 QuincyKit（开源 SDK + 服务器 + Mac 上的符号）或 HockeyApp（开源 SDK + 付费服务 + 服务器端符号）（注意：我都是开发人员之一！）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-14T16:36:17.713

对于某些时间没有像这样的加载地址值的人：

```
Jan 14 11:02:39 Dennins-iPhone AppName[584] <Critical>: Stack Trace: (
    0   CoreFoundation                      0x2c3084b7 <redacted> + 150
    1   libobjc.A.dylib                     0x39abec8b objc_exception_throw + 38
    2   CoreFoundation                      0x2c21cc35 CFRunLoopRemoveTimer + 0
    3   AppName                             0x0005a7db AppName + 272347 
```

我创建了一个简单的 bash 来帮助我调试：

```
#! /bin/bash
read -p "[Path] [App Name] [Stack Address] [Relative Address] " path appName runtimeAddress relativeAddress
loadAddress=`echo "obase=16;ibase=10;$((runtimeAddress-relativeAddress))" | bc`
atos -o $path/Payload/$appName.app/$appName -l $loadAddress $runtimeAddress -arch armv7 
```

它只是读取应用程序的路径、应用程序名称、运行时地址和“+”信号后的值（十进制值），然后找到加载地址的值来运行 atos 命令。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-11T12:35:38.690

所以我的情况是：我从 NSException.callStackSymbols 中接收到崩溃字符串。

崩溃堆栈跟踪如下所示：

```
2   AppName                               0x00000001006c75b4 AppName + 2356660\r3   AppName                               0x00000001004f5cfc AppName + 449788\r4   UIKit                               0x000000018c0a8968 \u003credacted\u003e + 108\r5   UIKit      0x000000018c0a9328 \u003credacted\u003e + 28\r6   UIKit                               0x000000018beea250 \u003credacted\u003e + 1320\r7   UIKit                               0x000000018beede98 \u003credacted\u003e + 188\r8   UIKit                               0x000000018bcb5820 \u003credacted\u003e + 116\r9   UIKit                               0x000000018bbdec88 \u003credacted\u003e + 760\r10  UIKit                               0x000000018bbde610 \u003credacted\u003e + 312\r11  UIKit                               0x000000018bbde31c \u003credacted\u003e + 296\r12  UIKit                               0x000000018bbde3bc \u003credacted\u003e + 456\r13  QuartzCore                          0x0000000185b93b7c \u003credacted\u003e + 284\r14  libdispatch.dylib                   0x00000001811a8a2c \u003credacted\u003e + 16\r15  libdispatch.dylib                   0x00000001811b5654 \u003credacted\u003e + 1012\r16  CoreFoundation                      0x0000000181851650 \u003credacted\u003e + 12\r17  CoreFoundation                      0x000000018184f1a8 \u003credacted\u003e + 2272\r18  CoreFoundation                      0x000000018176f488 CFRunLoopRunSpecific + 552\r19  GraphicsServices                    0x0000000183735020 GSEventRunModal + 100\r20  UIKit         0x000000018bc09cc0 UIApplicationMain + 236\r21  AppName                               0x000000010048f714 AppName + 30484\r22  libdyld.dylib 0x000000018120dfc0 \u003credacted\u003e + 4 
```

不要包含位码，因为 Apple 可以重新编译您的代码，并且您在 Organizer 中的存档中的 dsym 文件将不匹配。 [![在此处输入图像描述](../Images/eccc7ee24ef73161c3179f625e862657.png)](https://i.stack.imgur.com/A8Nxz.png)

运行这样的 bash 脚本：

```
#!/bin/bash
appName=AppName
runtimeAddress=0x00000001006c75b4
relativeAddress=2356660
loadAddress=`echo "obase=16;ibase=10;$((runtimeAddress-relativeAddress))" | bc`
atos -o $appName.app/$appName -l $loadAddress $runtimeAddress -arch arm64 
```

假设您已经创建了一个 test.sh (touch test.sh)。如果由于权限问题而无法运行 sctipt (./test.sh)：调用 chmod +x test.sh 现在 ./test.sh 应该可以工作了。并生成结果。

[![在此处输入图像描述](../Images/4f5523476fb6a693f4674633dea4acba.png)](https://i.stack.imgur.com/tN9dx.png)

也可以使用 AppName.app.dSYM 文件来表示崩溃文件：

```
#!/bin/bash
appName=AppName
runtimeAddress=0x00000001006c75b4
relativeAddress=2356660
loadAddress=`echo "obase=16;ibase=10;$((runtimeAddress-relativeAddress))" | bc`
atos -o $appName.app.dSYM/Contents/Resources/DWARF/$appName -l $loadAddress $runtimeAddress -arch arm64 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-10T08:15:51.927

我认为这篇文章可能会对您有所帮助，[https://stackoverflow.com/a/12559150/1773317](https://stackoverflow.com/a/12559150/1773317)。乔的承诺解决了我的问题。

原因是我的 .app 和 .dSYM 文件不能被聚光灯索引，所以我的 XCode 不能正确地表示崩溃信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-11T09:04:57.290

您可以尝试使用我为符号化编写的脚本，使用*atos*命令：

[https://github.com/IdoTene/MacosSymbolicateCrash](https://github.com/IdoTene/MacosSymbolicateCrash)

# linux - 这个正则表达式有什么问题？

> ID：10242773
> 
> 赞同：2
> 
> 时间：2012-04-20T08:30:41.980
> 
> 标签：linux, bash, sed

我相信我在这方面没有做错：

```
sed -e "s_//[01]\.thumbs\.4chan\.org/[a-z0-9]\+/src/\([0-9]\*\)s\.jpg_/${LOC}/\1s.jpg_g" -e "s_//images\.4chan\.org/[a-z0-9]\+/src/\([0-9]\*\)\.\(jpg\|gif\|png\)_/${LOC}/\1.\2_g" $LOC.html > a 
```

有人能告诉我为什么它不能将在线链接转换为离线链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:38:31.310

我认为`\*`和`\+`应该是`*`和`+`？否则，它会按字面意思查找`*`and `+`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:26:25.433

`sed`在简单的正则表达式模式下使用，就像你所做的那样，`+`必须`\+`像你所做的那样转义到 ，并且正如“预期”的那样，星号`*`需要是 asis，即。没有逃脱。这里有几个测试，使用`\+`和`*`

如果您想简化`sed`在`extended regex`模式下的使用，请使用该`-r`选项。你不需要逃跑 `+`,, `(`....`)`

```
echo '//0.thumbs.4chan.org/abc123/src/029s.jpg' |
    sed -n "\_//[01]\.thumbs\.4chan\.org/[a-z0-9]\+/src/\([0-9]*\)s\.jpg_p"

echo '//images.4chan.org/abc123/src/029.jpg' |
    sed -n "\_//images\.4chan\.org/[a-z0-9]\+/src/\([0-9]*\)\.\(jpg\|gif\|png\)_p" 
```

输出：

```
//0.thumbs.4chan.org/abc123/src/029s.jpg
//images.4chan.org/abc123/src/029.jpg 
```

# css - CSS3圆角不使用htc

> ID：10242774
> 
> 赞同：0
> 
> 时间：2012-04-20T08:30:45.323
> 
> 标签：css

我正在尝试让 CSS3 边框半径在 IE8 上工作但由于某些原因，它无法正常工作 [http://uiux.atwebpages.com/](http://uiux.atwebpages.com/)

我正在使用border-radius.htc 文件

是否有其他方法可以在不使用 .htc 文件的情况下使边框半径在 IE8 上工作？

请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:34:59.143

在 IE<9 中仅使用纯 CSS 不使用 VML 是不可能的。唯一的另一种方法是使用切片图像。我建议，如果那些圆角不是真的必要，就省略它们。如果人们使用过时的浏览器，这不是你的错。

不过我可以推荐你[css3pie](http://css3pie.com/)。看看它。

编辑：

1.  您的页面在 css_reset.css 上有 404
2.  您确定，您的资源已全部正确加载吗？
3.  您需要包含`behavior:url(border-radius.htc)`在您的 css 中（当然使用正确的 url），但我在您的 css 中找不到它。试试看，是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:39:47.817

jQuery是一个选项吗？如果是这样，那么试试这个 - [http://jquery.malsup.com/corner/](http://jquery.malsup.com/corner/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:41:29.657

如果您按照此页面上的说明进行操作，它应该可以正常工作。还有一个建议：在执行一般 css 规则之前，清理你的 css 并定义浏览器依赖的规则。

[ie中的css3](http://fetchak.com/ie-css3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T08:36:58.933

不，IE8 不支持 CSS3 边框半径。请参阅此图表以获取有关兼容性的信息：

[http://msdn.microsoft.com/en-us/library/cc351024(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc351024(v=vs.85).aspx)

# asp.net - 使用 ASP.NET 进行智能卡身份验证

> ID：10242782
> 
> 赞同：8
> 
> 时间：2012-04-20T08:31:33.153
> 
> 标签：asp.net, authentication, smartcard

在 ASP.net 中获得智能卡身份验证需要哪些步骤？

*   智能卡读卡器已安装并在客户端机器上正常工作
*   用户导航到 Login.aspx 页面并被提示刷他的访问卡
*   我如何验证用户

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T19:51:04.950

我知道通过 ASP.Net 访问客户端计算机上的硬件设备的唯一方法是编写一个 ActiveX 控件。这样做会使该站点对不运行 Internet Explorer 的任何人都无用。根据我的经验，您可以说 IE 是您的标准，但也会有人尝试使用其他浏览器。只要您的 App Admin 团队支持您说“抱歉，请使用 IE 或根本不使用它”，这很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:10:22.213

假设您已经知道如何访问智能卡读卡器的 API，并且您可以成功读取和解码该数据，那么下一步就是验证该数据。

同样，您在这里没有给我任何信息，所以我假设您有一个数据库，您需要根据该数据库验证您从智能卡获得的数据。

如果上面返回 true 那么这只是调用的一种情况`FormsAuthentication.RedirectFromLoginPage`，或者如果您想要对 Authentication Cookie 进行更精细的控制，那么您可以创建自己的`FormsAuthenticationTicket`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T11:05:15.300

如果这是一个即插即用设备，并且您的客户端是 AD 域的一部分，那么只需启用 Windows 身份验证，您就可以启用智能卡身份验证，而无需求助于自定义 ActiveX 控件和浏览器插件。

朝那个方向的几个指针：

*   [IIS 支持客户端证书](http://technet.microsoft.com/en-us/library/cc732116.aspx)
*   [IIS 论坛主题：配置 IIS 7.5 以从智能卡读取证书](http://forums.iis.net/t/1165336.aspx)

# iphone - 是否可以在一个 UIlabel 中设置不同的字体？

> ID：10242786
> 
> 赞同：6
> 
> 时间：2012-04-20T08:31:57.600
> 
> 标签：iphone, fonts, uilabel

我有一个类似“这是一个好苹果”的字符串。显示在我的 UIlabel 上。我想用不同的字体设置“好”这个词。看起来就像“这是一个***好***苹果”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T08:37:03.697

看看[NSAttributedString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsattributedstring_Class/Reference/Reference.html) ... 使用[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)绘制 NSAttributedString 因为 UILabel,UITextView 不支持 NSAttributedString ...

*PS：如果你打算发布 iOS6 或更新的应用程序，因为 UILabel 现在支持 NSAttributedString，你应该直接使用 UILabel 而不是 OHAttributedLabel，因为它现在被操作系统原生支持。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T08:06:06.257

有一种方法可以使用 NSMutableAttributedString 在标签上设置不同/多种字体和其他属性。Foll是我的代码：

```
 UIFont *ArialFont = [UIFont fontWithName:@"arial" size:18.0];
 NSDictionary *arialdict = [NSDictionary dictionaryWithObject: ArialFont forKey:NSFontAttributeName];    
 NSMutableAttributedString *AattrString = [[NSMutableAttributedString alloc] initWithString:title attributes: arialdict];

 UIFont *VerdanaFont = [UIFont fontWithName:@"verdana" size:12.0];
 NSDictionary *veradnadict = [NSDictionary dictionaryWithObject:VerdanaFont forKey:NSFontAttributeName];
 NSMutableAttributedString *VattrString = [[NSMutableAttributedString alloc]initWithString: newsDate attributes:veradnadict];    
 [VattrString addAttribute:NSForegroundColorAttributeName value:[UIColor blackColor] range:(NSMakeRange(0, 15))];

 [AattrString appendAttributedString:VattrString];

 lblText.attributedText = AattrString; 
```

请注意，lblText 是 UILabel，作为文件所有者的出口。
人们可以继续附加他想要的尽可能多的 NSMutableAttributedString ..

另请注意，我在我的项目中添加了 verdana 和 arial 字体并为此添加了 plist。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T08:37:10.547

这对于 UILabel 是不可能的。但是你可以使用[Core Text](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html)。

另一种更简单的方法是使用非常小的 UIWebView。在此您可以使用 html 命令设置字体。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T08:37:24.727

很抱歉，但 UILabel 实现无法做到这一点，您有两个选择：

*   您可以创建一个 UIWebView 并将文本 HTML 格式化
*   您可以使用该功能制作自己的 UILabel 实现，例如[Core Text](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T10:14:07.393

您可以使用一个带有多种文本字体样式和颜色的标签，而不是使用两个 UILabel。这是一个例子：

```
UILabel *customLbl = [[UILabel alloc] initWithFrame:CGRectMake(50, 100, 200, 25)];
customLbl.backgroundColor = [UIColor yellowColor];
[self createTwoTextStyleInSingleUILabel:customLbl];// custom method calling
[self.view addSubview:customLbl]; 
```

自定义方法如下：在应用此方法之前，在您的项目中添加 QuartzCore 框架（CALayers 需要）和 CoreText 框架（属性字符串需要。）。

```
 #import <QuartzCore/QuartzCore.h>
  #import <CoreText/CoreText.h>  

- (void)createTwoTextStyleInSingleUILabel: (UILabel *) myLabel{
NSString *firstText = NSLocalizedString(@"First text:", nil);
NSString *secondText = [NSString stringWithFormat:@"%@ %@",firstText,@"Second text"];
CATextLayer *myLabelTextLayer;
/* Create the text layer on demand */
if (!myLabelTextLayer) {
    myLabelTextLayer = [[CATextLayer alloc] init];
    myLabelTextLayer.backgroundColor = [UIColor clearColor].CGColor;
    myLabelTextLayer.wrapped = NO;
    CALayer *layer = myLabel.layer; //assign layer to your UILabel
    myLabelTextLayer.frame = CGRectMake((layer.bounds.size.width-180)/2 + 10, (layer.bounds.size.height-30)/2 + 10, 180, 30);
    myLabelTextLayer.contentsScale = [[UIScreen mainScreen] scale];
    myLabelTextLayer.alignmentMode = kCAAlignmentCenter;
    [layer addSublayer:myLabelTextLayer];
}
/* Create the attributes (for the attributed string) */
// customizing first string
CGFloat fontSize = 16;
UIFont *boldFont = [UIFont boldSystemFontOfSize:fontSize];
CTFontRef ctBoldFont = CTFontCreateWithName((__bridge CFStringRef)boldFont.fontName, boldFont.pointSize, NULL);
CGColorRef cgColor = [UIColor redColor].CGColor;
NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:
                            (__bridge id)ctBoldFont, (id)kCTFontAttributeName,
                            cgColor, (id)kCTForegroundColorAttributeName, nil];
CFRelease(ctBoldFont);
 // customizing second string
UIFont *font = [UIFont systemFontOfSize:16];
CTFontRef ctFont = CTFontCreateWithName((__bridge CFStringRef)font.fontName, font.pointSize, NULL);
CGColorRef cgSubColor = [UIColor blackColor].CGColor;
NSDictionary *subAttributes = [NSDictionary dictionaryWithObjectsAndKeys:(__bridge id)ctFont, (id)kCTFontAttributeName,cgSubColor, (id)kCTForegroundColorAttributeName, nil];
CFRelease(ctFont);
/* Create the attributed string (text + attributes) */
NSMutableAttributedString *attrStr = [[NSMutableAttributedString alloc] initWithString:secondText attributes:attributes];
float lengthOfSecondString = 12.0; // length of second string including blank space inbetween text, space in front , space after text.. Be careful, your  app may crash here if length is beyond the second text length (lengthOfSecondString = text length + blank spaces)
[attrStr addAttributes:subAttributes range:NSMakeRange(firstText.length, lengthOfSecondString)];
// you can add another subattribute in the similar way as above , if you want change the third textstring style
/* Set the attributes string in the text layer :) */
myLabelTextLayer.string = attrStr;
myLabelTextLayer.opacity = 1.0; //to remove blurr effect

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-19T08:57:24.587

修改了 Akshay 的答案并用 Swift 实现了它：

```
// First part with font size 10
let firstPartInfo = [NSFontAttributeName: UIFont.systemFontOfSize(10.0)]
var attributedString = NSMutableAttributedString(string: "First Part", attributes: firstPartInfo)

// Second part with font size 20
let secondPartInfo = [NSFontAttributeName: UIFont.systemFontOfSize(20.0)]
attributedString.appendAttributedString(
    NSAttributedString(string: "Second Part", attributes: secondPartInfo))

// Lastly set the attributed text
label.attributedText = attributedString 
```

没有理由使用第三方解决方案或子类。

# c - 使用 set_usart_base((void *)) EVK1105 dev 时函数的隐式声明。木板。爱特梅尔

> ID：10242788
> 
> 赞同：1
> 
> 时间：2012-04-20T08:31:58.850
> 
> 标签：c, printf, atmel, avr-studio5, usart

我刚开始使用 evk1105 dev.board。我需要将 printf() 重定向到 usart。我有以下代码（evk1105 的编辑 usart 示例）：

```
#include <avr32/io.h>
#include "compiler.h"
#include "board.h"
#include "power_clocks_lib.h"
#include "gpio.h"
#include "usart.h"
#include "nmea.h"
#include <stdio.h>

/*! \name USART Settings
 */
//! @{

#  define EXAMPLE_TARGET_PBACLK_FREQ_HZ FOSC0  // PBA clock target frequency, in Hz

#if BOARD == EVK1105
#  define EXAMPLE_USART                 (&AVR32_USART0)
#  define EXAMPLE_USART_RX_PIN          AVR32_USART0_RXD_0_0_PIN
#  define EXAMPLE_USART_RX_FUNCTION     AVR32_USART0_RXD_0_0_FUNCTION
#  define EXAMPLE_USART_TX_PIN          AVR32_USART0_TXD_0_0_PIN
#  define EXAMPLE_USART_TX_FUNCTION     AVR32_USART0_TXD_0_0_FUNCTION
#  define EXAMPLE_USART_CLOCK_MASK      AVR32_USART0_CLK_PBA
#  define EXAMPLE_PDCA_CLOCK_HSB        AVR32_PDCA_CLK_HSB
#  define EXAMPLE_PDCA_CLOCK_PB         AVR32_PDCA_CLK_PBA
#endif

#if !defined(EXAMPLE_USART)             || \
    !defined(EXAMPLE_USART_RX_PIN)      || \
    !defined(EXAMPLE_USART_RX_FUNCTION) || \
    !defined(EXAMPLE_USART_TX_PIN)      || \
    !defined(EXAMPLE_USART_TX_FUNCTION)
#  error The USART configuration to use in this example is missing.
#endif

//! @}

#if UC3L
/*! \name Parameters to pcl_configure_clocks().
 */
//! @{
static scif_gclk_opt_t gc_dfllif_ref_opt = { SCIF_GCCTRL_SLOWCLOCK, 0, false };
static pcl_freq_param_t pcl_dfll_freq_param =
{
  .main_clk_src = PCL_MC_DFLL0,
  .cpu_f        = EXAMPLE_TARGET_MCUCLK_FREQ_HZ,
  .pba_f        = EXAMPLE_TARGET_PBACLK_FREQ_HZ,
  .pbb_f        = EXAMPLE_TARGET_PBACLK_FREQ_HZ,
  .dfll_f       = EXAMPLE_TARGET_DFLL_FREQ_HZ,
  .pextra_params = &gc_dfllif_ref_opt
};
//! @}
#endif
/* STIAN */
char nmea1[] ="$GPRMC,131637.000,V,5820.0658,N,00834.5652,E,0.00,,090911,,,A*69";
char nmea2[]="$GPRMC,131637.000,A,5820.0658,N,00834.5652,E,0.00,,090911,,,A*7E";
char nmea3[]="$GPRMC,131640.000,A,5820.0657,N,00834.5652,E,0.00,,090911,,,A*71";
char line [82];
char nmea[90];
/*END STIAN*/
int usart_get_return(volatile avr32_usart_t *usart)
{
  int rx_char;
  int retval = USART_SUCCESS;
  int i = 0;

  while (1)
  {
    rx_char = usart_getchar(usart);
    if (rx_char == USART_FAILURE)
    {
      usart_write_line(usart, "Error!!!\r\n");
      retval = USART_FAILURE;
      break;
    }
    if (rx_char == '\x03')
    {
      retval = USART_FAILURE;
      break;
    }
    usart_putchar(usart, rx_char);
    nmea[i] = rx_char;
    i++;

    if (rx_char == '\r')
    { // Add a LF and consider this as the end of the line.
      usart_putchar(usart, '\n');
      break;
    }
  }

  return retval;
}
int main(void)
{
  pcl_switch_to_osc(PCL_OSC0, FOSC0, OSC0_STARTUP);
    static const gpio_map_t USART_GPIO_MAP =
    {
        {EXAMPLE_USART_RX_PIN, EXAMPLE_USART_RX_FUNCTION},
        {EXAMPLE_USART_TX_PIN, EXAMPLE_USART_TX_FUNCTION}
    };

    // USART options.
    static const usart_options_t USART_OPTIONS =
    {
        .baudrate     = 57600,
        .charlength   = 8,
        .paritytype   = USART_NO_PARITY,
        .stopbits     = USART_1_STOPBIT,
        .channelmode  = USART_NORMAL_CHMODE
    };

    //set_usart_base( ( void * ) EXAMPLE_USART );

    // Assign GPIO to USART.
    gpio_enable_module(USART_GPIO_MAP,
            sizeof(USART_GPIO_MAP) / sizeof(USART_GPIO_MAP[0]));

    // Initialize USART in RS232 mode.
    usart_init_rs232(EXAMPLE_USART, &USART_OPTIONS, EXAMPLE_TARGET_PBACLK_FREQ_HZ);

    // Hello world!
    usart_write_line(EXAMPLE_USART, "Polycon AIS-module! (press enter)\r\n");

    // Press enter to continue.
    while (usart_get_return(EXAMPLE_USART) == USART_FAILURE);  // Get and echo characters until end of line.

    printf("NMEA inneholder:%s\r\n",nmea);
    while (usart_get_return(EXAMPLE_USART) == USART_FAILURE);  // Get and echo characters until end of line.
    usart_write_line(EXAMPLE_USART, "Goodbye.\r\n");

    while (true);
} 
```

添加 set_usart_base 时，我在`implicit declaration of function 'set_usart_base'` 此处找到以下编译错误 set_usart_base：[avrfreaks.net](http://www.avrfreaks.net/index.php?name=PNphpBB2&file=printview&t=74529&start=0)

关于我做错了什么的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:48:47.150

而不是这个：

```
set_usart_base( ( void * ) EXAMPLE_USART ); 
```

用这个：

```
extern volatile avr32_usart_t *volatile stdio_usart_base;
stdio_usart_base = EXAMPLE_USART; 
```

使用声明可以是：

```
extern volatile struct avr32_usart_t *volatile stdio_usart_base; 
```

看看： http: [//support.atmel.no/knowledgebase/avr32studiohelp/AT32UC3B_Software_Framework/SERVICES/USB/CLASS/HID/EXAMPLES/HID_EXAMPLE_STANDALONE/DOC/html/a00045.html#l00171](http://support.atmel.no/knowledgebase/avr32studiohelp/AT32UC3B_Software_Framework/SERVICES/USB/CLASS/HID/EXAMPLES/HID_EXAMPLE_STANDALONE/DOC/html/a00045.html#l00171)

# c# - 无法使用事件接收器在 SharePoint 中发送邮件

> ID：10242790
> 
> 赞同：0
> 
> 时间：2012-04-20T08:32:12.917
> 
> 标签：c#, sharepoint, events, email

我在 SharePoint 2010 中有一个 Web 部件，它有一个在将项目添加到列表时触发的事件接收器。事件接收器应该发送邮件但没有。

当我尝试不使用事件接收器时它工作正常，如何使用事件接收器发送邮件？

```
StringDictionary headers = new StringDictionary();
string body = "Hi!";
headers.Add("to", "paulo@paulo.se");
headers.Add("from", "paulosaysno@paulo.se");
headers.Add("subject", "Paulo says hi");
headers.Add("content-type", "text/html");
SPUtility.SendEmail(web, headers, body) 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:37:05.280

并且事件接收器在 HTTP 请求的上下文中运行。众所周知，SPUtility.SendEmail 有这方面的问题。一种常见的做法是在发送电子邮件时将 HttpContext.Current 设置为 null：

```
SPWeb thisWeb = thisSite.RootWeb;
string toField = "someone@microsoft.com";
string subject = "Test Message";
string body = "Message sent from SharePoint";
HttpContext oldContext = HttpContext.Current;
HttpContext.Current = null;

bool success = SPUtility.SendEmail(thisWeb, true, true, toField, subject, body);
HttpContext.Current = oldContext; 
```

参考（向下滚动到评论）： http: [//msdn.microsoft.com/en-us/library/microsoft.sharepoint.utilities.sputility.sendemail (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.utilities.sputility.sendemail(v=office.12).aspx)

# networking - 不同子网上的两台机器通过 L2 交换机连接 - 可以连接吗？

> ID：10242793
> 
> 赞同：1
> 
> 时间：2012-04-20T08:32:45.587
> 
> 标签：networking

我们可以将两个子网连接到同一个交换机吗？

假设我有 2 台 PC 连接到 L2 交换机

Pc1 - 10.232.167.10 Pc2 - 192.168.3.1

是否可以从 pc2 ping pc1，反之亦然？

从理论上讲，它必须是可能的——因为开关只在 L2 上操作。如果我从 Pc1 发送 ping 数据包，则交换机（因为未更新映射表）在其所有连接的端口上发送广播。

当 Pc2 收到数据包时，发现它是针对自己的 IP 地址的，应该接受数据包，因此在交换机中创建了一个映射（源 MAC + 端口 -> 目标端口）。之后，我可以从 Pc1 ping Pc2。

但是它实际上并没有起作用。我想知道原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T08:37:16.617

原因：如果 ip 不在设备的范围内，它会自动将其发送到默认网关，这就是为什么它无法在仅连接 L2 交换机的不同子网中工作。广播数据包“谁拥有 ip xxxx”（在 ARP 中使用）仅在 ip 与发送它的机器位于同一子网时发生。

唯一的解决方案是将路由器连接到该交换机，并在 LAN 侧配置 2 个子网，连接到 L2 交换机。如果可能，您可以使用子接口或仅使用 2 个接口。

如果您只是想要更大的范围，则可以调整子网掩码（如果它们位于以下子网中）：

192.168.1.0 / 255.255.255.0 => 255.255.254.0 这允许 192.168.0.x 与 192.168.1.x 对话。

然而，这只是扩大了您的范围，它没有 vlan 或子网划分的优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T13:44:47.507

在您的相同设置上。尝试分别将默认网关配置为 PC2 和 PC1 的 PC1 和 PC2。即使没有路由器它也能工作

# javascript - 如何让 JQuery JScrollpane 在本地保存的网页上工作

> ID：10242796
> 
> 赞同：0
> 
> 时间：2012-04-20T08:32:56.213
> 
> 标签：javascript, jquery, jscrollpane

当我将包含 JScollpane 的页面保存到我的机器上时，我无法让 JScrollpane 工作。

通过在本地保存以下示例页面的副本并将本地页面加载到浏览器中，该问题很容易重现（对于 Firefox 11.0、IE 8 和 Opera）：http: [//jscrollpane.kelvinluck.com/basic.html](http://jscrollpane.kelvinluck.com/basic.html)

不过，这个例子可以完美地在线运行，而且看起来很棒！我真的很喜欢 JScrollpane，所以非常热衷于在我的网站中使用它 - JScrollpane 看起来很棒！

使用 Firebug 调试器，我将问题跟踪到 JScrollpane.js（未缩小版本）的第 164 行，如下所示：

```
contentHeight = pane[0].scrollHeight; 
```

它似乎是 javascript，而不是 JScrollpane 问题。对于示例页面的本地版本（即从文件加载），pane[0].scrollHeight 似乎反映了 div 的高度，而不是包含在 div 中的内容的高度。这可以防止垂直滚动条在 JScrollpane 中初始化，因此 JScrollpane 不会滚动。

有谁知道为什么在这种情况下 scrollHeight 不起作用？如果这是一个有明显答案的问题，请原谅，因为我对 javascript 和 JQuery 非常陌生。除了修改 JScrollpane javascript 文件之外，还有一个简单的解决方法吗？

我只想能够在本地开发一个包含 JScrollpane 的网页，而无需访问互联网。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:34:00.720

Firefox does not save a 1:1 copy of a webpage. For example the link to the google cdn is converted etc.

I did a "git clone github.com/vitch/jScrollPane" and opened the basic.html example locally... Works fine...

# java - Android：ListView 中 getCount() 和 getChildCount() 之间的区别

> ID：10242800
> 
> 赞同：32
> 
> 时间：2012-04-20T08:33:03.853
> 
> 标签：java, android, android-listview

`getCount()`和`getChildCount()`in和有什么不一样`ListView`？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-20T08:36:58.580

`getCount()`返回适配器中的项目计数（列表中的总数），`getChildCount()`是一种`ViewGroup`返回子视图数量的方法。`ListView`积极地重用视图，所以如果你的列表有 1000 个项目`getCount()`将返回 1000，`getChildCount()`- 大约 10 个左右......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T08:37:08.983

`getCount()`是适配器中的项目数，而`getChildCount()`指的是 ViewGroup 的方法，该方法返回此视图包含的视图数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-22T08:06:13.943

在您的适配器中，有一种方法`getChildrenCount();`可以决定您要创建多少个孩子。

```
 @Override
    public int getChildrenCount(int groupPosition) {
        return 1;
    } 
```

# genetic-programming - 遗传编程中测试用例的动态数量？

> ID：10242801
> 
> 赞同：2
> 
> 时间：2012-04-20T08:33:10.237
> 
> 标签：genetic-programming

在查看遗传编程论文时，在我看来，测试用例的数量总是固定的。然而，大多数突变应该（？）在执行的每个阶段都是非常有害的，即在一个测试用例之后很明显，突变的程序比前一个执行得更差。如果您一开始只尝试很少（一个？）测试用例并查看突变是否有意义，会发生什么？

是否可能是不同的测试用例测试解决方案的不同特性，而一个突变可能只会改进其中一个特性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-08T11:48:54.193

我认为这是个好主意。适应度评估是 GP 中计算量最大的过程，因此估计个体的适应度值以减少实际计算适应度的计算开销可能是一个重要的优化。

您的想法是适应度近似的一种形式，有时称为惰性评估（尝试搜索这些词，有一些研究论文）。

还有一些**不同**但有些重叠的方案，例如：

*   动态子集选择 (Chris Gathercole, Peter Ross) 是一种选择训练数据集的一小部分子集的方法，在该子集上实际执行 GP 算法；
*   基于片段的遗传编程（Nailah Al-Madi，Simone Ludwig）是一种通过将数据集划分为片段并在适应度评估过程中使用片段来减少 GP 执行时间的技术。

PS 也在 Brood Recombination Crossover (Tackett) 子程序中通常对有限数量的测试用例进行评估以加速交叉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:11:41.000

我也不确定“测试用例”是什么意思，但对我来说，听起来你正在寻找与多目标优化（MOO）相关的东西。这意味着您尝试针对问题的不同方面优化解决方案 - 因此您不需要为特定的测试用例改变/评估总体，而是要找到一个多目标适应度函数。“MOO 的主要思想是帕累托优势的概念”（[http://www.gp-field-guide.org.uk](http://www.gp-field-guide.org.uk)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:31:12.417

我不知道我是否同意你的假设，即大多数突变应该是非常有害的，但**即使它们是**，你也不应该在意。您的目标不是优化个体，而是优化总体。因此，试图确定“突变是否有意义”正是基因编程应该做的事情：即消除“没有意义”的突变。您对算法的唯一“指导”应该来自适应度函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-15T16:10:40.977

我认为这在理论上是一个好主意，但很难付诸实践。我不记得以前实际使用过这种方法，但如果有，我不会感到惊讶。

我认为您这样做的动机是提高应用适应度函数的效率 - 如果测试看起来很糟糕，您可以提前停止评估并丢弃个体（或将适应度设置为 0）。

一个挑战是决定应用多少个测试用例；在一个随机测试用例之后丢弃一个人肯定不是一个好主意，因为测试用例可能是一个真正的异常值。如果个体的适应度小于最佳值的 10%，则在 50% 的测试用例之后终止评估可能不会丢弃任何非常好的个体；另一方面，考虑到很多人都处于中等水平并且很可能只节省一小部分计算，这可能不值得。您可以调整这些数字，以便节省更多精力，但是您尝试节省的精力越多，真正优秀的人被意外丢弃的机会就越大。

考虑到额外的时间来编写这个和可能的错误等，我不应该认为这样的好处是值得的（除非这是一个研究项目，在这种情况下，尝试它可能会很有趣）。

# xcode - Xcode：有没有办法获取父项目的包标识符？

> ID：10242804
> 
> 赞同：7
> 
> 时间：2012-04-20T08:33:24.613
> 
> 标签：xcode, xcode4

我有一个 Mac 应用程序的 Xcode 项目，其中包含另一个帮助程序应用程序的项目，以在登录时启动主应用程序。有没有一种方法可以将辅助应用程序的捆绑标识符从主应用程序中建立起来，并使用类似`${PRODUCT_NAME}`但类似的项目变量`${ROOT_PRODUCT_IDENTIFIER}`？

所以主应用程序的包标识符将是：

`com.mydomain.app`

辅助应用程序的捆绑标识符将是：

`${ROOT_PRODUCT_IDENTIFIER}.Helper`→`com.mydomain.app.Helper`

[![](../Images/70f9328ebbec218bdd6a21ba4cf895c0.png)](https://i.stack.imgur.com/Evo7S.png)

*我的目标是在登录助手应用程序*中创建一个非常易于使用的通用启动，任何 mac 应用程序都可以使用，我已经在这个 repo 中工作了它，但它需要更改几个值：[https://github。 com/kgn/LaunchAtLoginHelper](https://github.com/kgn/LaunchAtLoginHelper)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:42:58.067

恐怕您要查找的变量不存在，请查看[此处](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html)或[此处](https://stackoverflow.com/a/6911421/655221)

但是我可以通过创建自己的环境变量来想到一种解决方法，这并不困难。为了实现您想要的，为您的主项目创建一个构建脚本，该脚本提取标识符并将其保存到环境变量中。

转到主项目的目标，然后单击 Add Build Phase -> Add Run Script。在出现的外壳框中，输入以下内容：

```
ROOT_PRODUCT_IDENTIFIER_PLIST=`/usr/libexec/PlistBuddy -c "Print :CFBundleIdentifier" $INFOPLIST_FILE`
export ROOT_PRODUCT_IDENTIFIER=`eval echo $ROOT_PRODUCT_IDENTIFIER_PLIST` 
```

现在转到您的助手项目并在其 plist/build 设置中引用 $(ROOT_PRODUCT_IDENTIFIER) 。

请记住将您的主项目添加为后者的依赖项，以便始终在需要的时间设置该变量。

# javascript - 使用javascript打开网址

> ID：10242813
> 
> 赞同：1
> 
> 时间：2012-04-20T08:34:31.297
> 
> 标签：javascript, firefox-addon

我需要一种加载网站的方法——比如 gBrowser.loadURI、window.location 或 window.open——但我需要在加载网站（并由浏览器解析）之后执行更多代码。我提到的功能在站点完全加载之前不会阻止我的代码的执行，但只会在它开始加载之前。

以防万一：此代码将不是我/一个网站的一部分，而是一个 FireGestures 脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:29:05.880

[https://developer.mozilla.org/en/Code_snippets/Tabbed_browser#Manipulating_content_of_a_new_tab](https://developer.mozilla.org/en/Code_snippets/Tabbed_browser#Manipulating_content_of_a_new_tab)似乎是你想要的。他们建议：

```
var newTabBrowser = gBrowser.getBrowserForTab(gBrowser.addTab("http://www.google.com/"));  
newTabBrowser.addEventListener("load", function () {  
    // use newTabBrowser.contentDocument to manipulate DOM
    // or do whatever you want on-load
}, true); 
```

另请参阅[`tabbrowser`](https://developer.mozilla.org/en/XUL/tabbrowser)和的文档[`browser`](https://developer.mozilla.org/en/XUL/browser)。

# extjs - 如何在 ExtJS4 中为单例添加方法？

> ID：10242816
> 
> 赞同：3
> 
> 时间：2012-04-20T08:34:36.943
> 
> 标签：extjs, extjs4, prototype, extjs4.1

这是 ExtJS**形状类**：

```
Ext.define('Ext.chart.Shape', {

    singleton: true,

    circle: function (surface, opts) {
        return surface.add(Ext.apply({
            type: 'circle',
            x: opts.x,
            y: opts.y,
            stroke: null,
            radius: opts.radius
        }, opts));
    },
    ...
}); 
```

我想向这个类添加一个方法。例如：

```
myCircle: function (surface, opts) {
        return ...
}, 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T16:34:59.170

我找到了答案。如果有人需要，这是解决方案：

```
Ext.define('MyShape', {
    override: 'Ext.chart.Shape',

    initialize: function() {
        this.callOverridden(arguments);
    },

    myCircle: function (surface, opts) {
        return ...
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:23:32.363

您可以扩展以添加新函数，或覆盖以更改类上现有函数的行为。下面的链接是 sencha 文档中解释如何使用它们的详细信息。

[延长](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Class-cfg-extend)

[覆盖](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Class-cfg-override)

扩展的示例实现：

```
Ext.define('yourCustomClassHere', {
    extend: 'Ext.chart.Shape',
    newFunctionName: function () {
       //your function here
    }
}); 
```

# java - 通过 Java 读取 Win32 应用程序状态

> ID：10242819
> 
> 赞同：0
> 
> 时间：2012-04-20T08:35:07.770
> 
> 标签：java, windows, winapi

如何通过java读取win32应用状态？我需要使用java阅读任务栏上应用程序显示的工具提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:04:26.053

这需要一个不那么简单的方法，使用 Windows API。首先，如果您有应用程序的窗口名称，您的方法会变得更简单。我会假设你这样做。用于`FindWindow`获取您正在寻找的应用程序的句柄。如果句柄被成功找到，那么您需要为 message 定义一个自定义的 Windows 消息处理程序`TTM_NEEDTEXT`。如需进一步帮助，请查看另一个 stackoverflow 问题：[link](https://stackoverflow.com/questions/1333770/how-to-get-tooltip-text-for-a-given-hwnd)

请注意，我还没有尝试自己做这件事。我会尽快尝试。

# intersystems-cache - 等待完整性测试完成（Do Silent^Integrity("/tmp/logfile")）

> ID：10242820
> 
> 赞同：0
> 
> 时间：2012-04-20T08:35:13.417
> 
> 标签：intersystems-cache

我想知道如何在不在后台启动的情况下运行完整性测试。所以我想在前台运行它并等到它完成。

以下在后台运行（http://docs.intersystems.com/cache20071/csp/docbook/DocBook.UI.Page.cls?KEY=GSA_manage）：

```
Do Silent^Integrity("/tmp/logfile") 
```

我也找不到 ^Integrity 的例程（在 %SYS 中）。我怎样才能看到代码？

使用 Caché Intersystems 2008。

预先感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:57:28.143

在 %SYS 命名空间中，您可以直接运行 ^Integrity 而无需提供标记名称，例如：

```
> Do ^Integrity 
```

假设您位于 %SYS 命名空间中，您应该能够在您的版本中查看 Cache Studio 中的源代码。我可以在 Cache 2010 中很好地使用它，尽管我知道 Intersystems 在最近的版本中已经停止为其大部分标准代码库提供底层源代码。事实上，如果您的系统上没有 ^Integrity 的源代码，您只需联系他们获取文档提供之外的任何所需信息。

# cocoa - NSWorkspaceRecycleOperation 不删除文件

> ID：10242821
> 
> 赞同：1
> 
> 时间：2012-04-20T08:35:18.317
> 
> 标签：cocoa

我使用此代码从目录中删除文件：

```
[ws performFileOperation: NSWorkspaceRecycleOperation source: @"/Users/user/path" destination: @"" files: [[_l_ArrayController selectedObjects] mutableArrayValueForKey: @"LName"] tag: 0];           
[_l_ArrayController removeObjects:[_l_ArrayController selectedObjects]]; 
```

它工作得很好，但是如果我通过Finder及时从_l_ArrayController中删除了任何文件，在 `NSWorkspaceRecycleOperation`此之后不要删除文件。

例如：

我有文件数组{一、二、三}并开始删除。如果我及时通过 Finder 删除了文件“二”，则文件“三”不会通过`NSWorkspaceRecycleOperation`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T02:18:57.630

如果您没有意识到它是异步发生的，您可能会对这个函数的行为感到惊讶。该函数立即退出并移动到程序中的下一条语句，并且回收操作在一段时间后发生。如果你在回收操作之后得到的代码以某种方式依赖于文件已经消失的概念......你可能会感到惊讶。所以在这种情况下，你告诉 NSWorkspace “这是要删除的文件数组”。然后在下一步中，您将其中一个文件拉出。然后进行回收操作；NSWorkspace 说“让我们看看那个数组”。它找到一些文件并执行其操作。它不知道在它看起来之前曾经有不同的文件。这有意义吗？你可以做几件事。一，给它一个数组的副本，然后修改原始的。或者将您的代码放在 completionHandler 块中。保证在回收操作完成（成功与否）之前不会执行。

# mysql - 是否有创建视图的能力

> ID：10242823
> 
> 赞同：0
> 
> 时间：2012-04-20T08:35:31.543
> 
> 标签：mysql, sql-view

假设我有一个拥有一千个或更多用户的表。如果我为每个用户创建一个视图，它会影响性能吗？

```
CREATE VIEW vw_userid of user AS
SELECT * 
FROM Updates 
WHERE userid='userid of user' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:47:18.990

我认为在你的情况下它会产生影响，因为第一个查询将读取一个表并生成视图，它会再次执行读取操作以检索数据，而且你正在运行时创建**视图**，所以每次它都会消耗内存。如果**I/O**请求将更多，然后您的服务器可能会变得无响应。我建议使用**Select 语句**对你来说会更好。

# django - 创建 django 管理命令

> ID：10242826
> 
> 赞同：2
> 
> 时间：2012-04-20T08:35:41.233
> 
> 标签：django, django-admin, python-2.7

我想运行一个类似这样的命令，但该函数`handle (self,*args,**options)`似乎没有执行嵌套函数。

如何在其中包含我的功能`handle()`？

```
from django.core.management.base import NoArgsCommand

class Command(NoArgsCommand):
    def handle(self, *args, **options):
        def hello():
            print "hello1"
        def hello1():
            print "hello2" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T08:55:20.523

您还可以“动态”定义函数：

```
class Command(NoArgsCommand):
    def handle_noargs(self):
        def hello():
            print "hello1"

        def hello1():
            print "hello2"

        hello()
        hello1() 
```

或在命令之外（因为它们在“服务”起作用）：

```
def hello():
    print "hello1"

def hello1():
    print "hello2"

class Command(NoArgsCommand):

    def handle_noargs(self):
        hello()
        hello1() 
```

# jquery - css的流畅内容布局问题

> ID：10242828
> 
> 赞同：0
> 
> 时间：2012-04-20T08:35:44.133
> 
> 标签：jquery, html, css

我有一个布局问题：

```
.sectorMenuContentPane {
    float: left;
    width: 25%;
}

.sectorContentPane {
    float: left;
    width: 75%;
}

.sectorContentPaneRight {
    float: right;
    width: 32%;
} 
```

这是我使用相同 css 的布局： ![布局](../Images/2f6c697beb8c7d1cf3dbdcec3affc940.png)

在 3 列布局中，页面看起来不错，但在 2 列布局中它已损坏。如果没有扇区内容窗格，我该如何做到这一点，然后扇区内容窗格会按照我的图表填充该区域？

还好像我需要它流体？你能帮我举一个jsfiddle的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:46:39.623

表格将是您最简单的解决方案。这是一个使用 div 的示例`display: table`

[http://jsfiddle.net/9x2SC/](http://jsfiddle.net/9x2SC/)

左右单元格具有设定的宽度。中心的将填充剩余的空间。这将是您唯一的 100% css 解决方案。您可以使用 Javascript 来确定要做什么并将一个类应用于包装器元素，但这更优雅（在我看来。）

CSS：

```
.wrapper {
    display: table;
    width: 100%;
    height: 100px;
}

.sectorMenuContentPane {
    display: table-cell;
    width: 25%;
}

.sectorContentPane {
    display: table-cell;
}

.sectorContentPaneRight {
    display: table-cell;
    width: 32%;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:51:49.540

一个简单的解决方案：http: [//jsfiddle.net/JdpYP/](http://jsfiddle.net/JdpYP/)

css

```
.menu {
    float: left;
    width: 25%;
}

.slider {
    float: left;
    width: 32%;
} 
```

只是避免浮动最右边的div

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T11:28:20.110

现在你知道很多人都在使用 CSS3。

这可以使用 CSS3 轻松完成。

这是你如何做到的..

```
.containerOfDivs{
   width:950px;
   display:-webkit-box;
   -webkit-box-flex: 1;
   -webkit-box-orient: horizontal;
}

.sectorMenuContentPane{
   width: 250px;
}

.sectorContentPane {
   display:-webkit-box;
   -webkit-box-flex: 1;
}

.sectorContentPaneRight {
    width: 250px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T08:59:13.253

不确定这是否是您所追求的？

```
<div id="menu"></div>
<div id="right">
    <div id="slider"></div>
    <div id="content"></div>
</div>

<style>
    #menu { width:25%; height:400px; border:2px solid #000; float:left; margin-right:10px; }
    #slider, #content { width:48%; height:400px; border:2px solid #000; float:left; margin-right:10px; }
    #right { width:74%; height:400px; float:left; }
</style> 
```

# c# - 在 https 中从一个站点登录到另一个站点

> ID：10242831
> 
> 赞同：0
> 
> 时间：2012-04-20T08:36:10.260
> 
> 标签：c#, asp.net, https

我是stackoverflow的新手，我有一个问题要问你：

我必须从我的网站自动登录到另一个外部网站（不是我的）。

该站点使用 https，当我访问站点地址时，它会要求我（使用经典的弹出表单）输入用户名和密码。我试过用这种方式做一个 POST

[http://www.terminally-incoherent.com/blog/2008/05/05/send-a-https-post-request-with-c/](http://www.terminally-incoherent.com/blog/2008/05/05/send-a-https-post-request-with-c/)

我在字符串 post_data 中放置了“Username=xxxx&Password=xxxx”

但不起作用；返回的代码是 401：未经授权。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:47:50.367

您需要设置凭据吗？[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.credentials.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.credentials.aspx)

# c# - 果园实现“表名”没有持久性

> ID：10242832
> 
> 赞同：0
> 
> 时间：2012-04-20T08:36:25.727
> 
> 标签：c#, asp.net, asp.net-mvc, nhibernate, orchardcms

当我尝试保存数据时发生错误。错误是：没有持久性：“test.FileRecord”（我创建的表名并希望将数据插入此表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:59:04.390

Orchard 对表使用特定的命名约定 ( `[ModuleName]_FileRecord`)，如果您希望表记录自动映射到对象，则需要遵守它。`[ModuleName]`是您的模块名称，其中点 (.) 替换为下划线 (_)。

我假设你有一个`FileRecord`对象，你想使用 through `IRepository<FileRecord>`，对吧？*这是在 Orchard 中使用数据库的正确方法，顺便说一句。*如果你的模块被调用`My.Module`，那么表名应该是`My_Module_FileRecord`.

如果您已按上述方式进行了所有设置，那么它应该可以正常工作。

# javascript - Javascript，for循环，不携带值

> ID：10242835
> 
> 赞同：-1
> 
> 时间：2012-04-20T08:36:32.300
> 
> 标签：javascript, for-loop, decrement

获取值的表单：

```
<input name="validatecard" type="text" id="myCardNumber"> 
<input onclick="isLuhn()" type="button" value="Check Credit Card" /> 
```

Javascript：

```
function isLuhn(cardnumber) {
var number_element = document.getElementById('myCardNumber');
var cardnumber = number_element.value;

e= '';
i= '';
var sum1 = 0;
var sum2 = 0;
for(var len = cardnumber.length, i = len - 1; i >= 0;  i -=2){
sum1 = sum1 + (+cardnumber[i]);

for (var len2 = cardnumber.length, e = len2 - 1; e > 0; e -=2){
sum2 = sum2 + (+cardnumber[e]);
}}} 
```

所以现在这几乎可以工作了，它正在迭代 cardnumber 变量并且 sum1 和 sum2 接受值。但我仍在迭代变量 cardnumber 的相对长度，而不是其中的值。这是什么

```
(+cardnumber[i]); 
```

应该做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:38:35.957

```
for(i = cardnumber.length; i > 0;  i -=2){

for (e = cardnumber.length; e > 0; e -=2){ 
```

由于您的`for`循环是反向的，因此循环条件是`i > 0`，`e > 0`否则它们永远不会执行

来自[http://en.wikipedia.org/wiki/JavaScript_syntax#For_loop](http://en.wikipedia.org/wiki/JavaScript_syntax#For_loop)

> JavaScript for 循环的语法如下：
> 
> for (initial; condition; loop statement) {
> /* 每次 for{} 循环循环时都会执行语句，**同时满足条件** */
> }

除了加载`i-th`您的号码之外，您还应该这样做：

```
for(var len = cardnumber.length, i = len - 1; i >= 0;  i -=2){
    sum1 = sum1 * cardnumber[i]; 
```

注意

1.  字符串的索引是`0..n-1`和不是`1..n`
2.  循环也必须进入 when`i = 0`以便 for 条件必须为 true for`i >= 0`

不需要 parseInt。由于乘法假定数字，Javascript 使您的`i-th`角色成为一个数字。

# css - 响应式 WP 网站在 ie8 中不起作用

> ID：10242836
> 
> 赞同：0
> 
> 时间：2012-04-20T08:36:45.373
> 
> 标签：css, wordpress, internet-explorer-8, media-queries, responsive-design

我遇到了 ie8 无法正确显示网站的问题，它似乎使用的是移动样式而不是浏览器样式。

我有 response.js polyfill 加载，但看起来它不起作用......

这是在线网站 [http://www.mediacake.net/cake123/ecomore/](http://www.mediacake.net/cake123/ecomore/)

原始模板有效，但 iv 对布局进行了广泛的更改，主要是主页

[http://demo2.woothemes.com/?name=shelflife](http://demo2.woothemes.com/?name=shelflife)

如果有人可以帮助我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:06:08.120

您的页面有以下...

```
<!--[if lt IE 8]>
<script src="http://www.mediacake.net/cake123/ecomore/wp-content/themes/shelflife/includes/js/respond-IE.js"></script>
<![endif]--> 
```

如果你想让它在 IE8 中工作，它看起来不应该更像......

```
<!--[if lt IE 9]>
<script src="http://www.mediacake.net/cake123/ecomore/wp-content/themes/shelflife/includes/js/respond-IE.js"></script>
<![endif]--> 
```

# javascript - 简单但棘手的显示/隐藏切换开/关组合让我发疯

> ID：10242837
> 
> 赞同：2
> 
> 时间：2012-04-20T08:36:45.767
> 
> 标签：javascript, jquery, toggle, show-hide, javascript-databinding

有一些 div 需要显示/隐藏，其中的按钮需要知道它何时打开和何时关闭。不知何故，他们需要“与他人交流”才能知道何时隐藏或可见。哦，是的，我想在所有元素上保持平滑的淡入/淡出效果。

谢谢！！

我的小提琴在这里：http: [//jsfiddle.net/Pe9jn/](http://jsfiddle.net/Pe9jn/)

这是我得到的最有效的代码，但它有点古怪：

```
//hide maximize link on page load
$('.maximize_menu').css('display','none');

  //settings
  var opacity = 1, toOpacity = 0, duration = 350;
  //set opacity ASAP and events

$('.toggle_all, .toggle_all2').css('opacity',opacity).toggle(function() {
      $('#content, .maximize_menu, #menu, .minimize_menu').fadeTo(duration,toOpacity);
    }, function() {
      $('#content, .maximize_menu, #menu, .minimize_menu').fadeTo(duration,opacity);
    }                                         
  );

// this minimizes the menu and should make the mazimize_menu link visible when toggled off
$('.minimize_menu').css('opacity',opacity).toggle(function() {
      $('#menu, .minimize_menu,.maximize_menu').fadeTo(duration,toOpacity);
    }, function() {
      $('.maximize_menu, #menu, .minimize_menu, .maximize_menu').fadeTo(duration,opacity);
        $('.maximize_menu').show(duration,toOpacity);
        $('.maximize_menu').css('display','block');
    }                                                    
  );

// this maximizes the menu and should disappear once the menu is visible
$('.maximize_menu').css('opacity',opacity).toggle(function() {
      $('#menu, .minimize_menu,').fadeTo(duration,toOpacity);
    }, function() {
      $('#menu, .minimize_menu, .maximize_menu').fadeTo(duration,opacity);

    }                                                   
  ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:42:24.370

我认为你应该重新考虑所有的逻辑，因为你实际上并没有隐藏元素，你只是将不透明度设置为 0。你真正应该使用的是[`fadeOut()`](http://api.jquery.com/fadeOut/)和[`fadeIn()`](http://api.jquery.com/fadeIn/)

# c - C中的递归深度是否有任何硬连线限制

> ID：10242839
> 
> 赞同：14
> 
> 时间：2012-04-20T08:36:49.917
> 
> 标签：c, recursion, stack, segmentation-fault

讨论中的程序尝试`sum-of-first-n-natural-numbers`使用`recursion`. 我知道这可以使用一个简单的公式来完成，`n*(n+1)/2`但这里的想法是使用`recursion`.

程序如下：

```
#include <stdio.h>

unsigned long int add(unsigned long int n)
{
    return (n == 0) ? 0 : n + add(n-1); 
}

int main()
{
    printf("result : %lu \n", add(1000000));
    return 0;
} 
```

该程序运行良好，`n = 100,000`但当 的值`n`增加到`1,000,000``Segmentation fault (core dumped)`

以下内容来自`gdb`消息。

```
Program received signal SIGSEGV, Segmentation fault.
0x00000000004004cc in add (n=Cannot access memory at address 0x7fffff7feff8
) at k.c:4 
```

我的问题：

1.  `recursion depth`in是否有任何硬接线限制`C`？还是`recursion depth`取决于可用的堆栈内存？

2.  程序收到 reSIGSEGV 信号的可能原因是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T08:43:55.793

通常，限制将是堆栈的大小。每次调用函数时，都会吃掉一定数量的堆栈（通常取决于函数）。吃掉的量就是栈帧，函数返回时回收。当程序启动时，堆栈大小几乎是固定的，要么是由操作系统指定（并且通常可以在那里调整），要么是在程序中硬编码。

*   一些实现可能有一种技术，可以在运行时分配新的堆栈段。但总的来说，他们没有。

*   一些函数会以稍微更不可预测的方式消耗堆栈，例如当它们在那里分配一个可变长度数组时。

*   某些函数可以编译为使用尾调用，以保留堆栈空间。有时您可以重写您的函数，以便所有调用（例如对自身的调用）作为它所做的最后一件事发生，并期望您的编译器对其进行优化。

函数每次调用到底需要多少栈空间并不是那么容易看出的，还要看编译器的优化程度。在您的情况下，一种便宜的方法是在`&n`每次调用时打印；`n`可能会在堆栈上（特别是因为程序需要获取它的地址 - 否则它可能在寄存器中），并且它的连续位置之间的距离将指示堆栈帧的大小。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-20T10:54:39.413

1）预计栈的消耗会减少，写成尾递归优化。

gcc -O3 prog.c

```
#include <stdio.h>

unsigned long long int add(unsigned long int n, unsigned long long int sum){
    return (n == 0) ? sum : add(n-1, n+sum); //tail recursion form
}

int main(){
    printf("result : %llu \n", add(1000000, 0));//OK
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-20T08:42:04.817

C 中的递归深度没有理论上的限制。唯一的限制是您的实现，通常是有限的堆栈空间。
（请注意，C 标准实际上并不需要基于堆栈的实现。我不知道任何不基于堆栈的实际实现，但请记住这一点。）

SIGSEGV 可能由任意数量的事物引起，但超出您的堆栈限制是一种相对常见的情况。取消引用坏指针是另一回事。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-20T09:10:57.033

C 标准没有定义函数调用的最小支持深度。如果确实如此，无论如何都很难保证，它会在第 1 节中的某个地方提到它[`5.2.4 Environmental limits`](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)。

# c - 使用 ctrl-c 的信号处理程序 - 需要有关无限循环的帮助

> ID：10242843
> 
> 赞同：0
> 
> 时间：2012-04-20T08:37:03.650
> 
> 标签：c, linux, signals, signal-handling

我正在为 ctrl-c 信号使用信号处理程序。即每当生成 ctrl-c 信号而不是退出应用程序时，我都会执行一些操作。

让我们假设如果我的应用程序由于 while(1) 循环（任何错误情况）而挂起，我是否只能在这种情况下退出应用程序？

前任：

```
void handle()
{
    /*do some action*/
    ----
    ----
    ---

    if ( while(1) detected)
    {
    exit(0);
    }
}

main()
{
    struct sigaction myhandle; 
    myhandle.sa_handler = handle;
    sigemptyset(&myhandle.sa_mask);
    myhandle.sa_flags = 0;
    sigaction(SIGINT, &myhandle, NULL);

   while(1);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:40:43.723

在收到类似`Ctrl-C`. 我可以建议一些启发式方法。有一个足够长的变量，最好是一个 global `unsigned long long int`，并在你怀疑在循环的每次迭代中可能滑入无限循环的循环内不断增加这个变量。现在，当您收到信号时，请根据阈值检查信号处理程序中此变量的值`MAX_NUMBER_OF_ITERATIONS`。如果变量超过用户定义的阈值，则声明一个无限循环，`exit`否则继续。

这些线上的东西-

```
#define MAX_NUMBER_OF_ITERATIONS 100000000

unsigned long long checkForEndlessLoop=0;
bool overflow;

void sigHandler (int signum)
{
   signal(sig, SIG_IGN); // Ignore it so that another Ctrl-C doesn't appear any soon
   if (overflow || (checkForEndlessLoop > MAX_NUMBER_OF_ITERATIONS) )
   {
      //Something's fishy in the loop.
      exit(0);
   }
   else
   {
      signal(SIGINT, sigHandler );
   }
}

int main ()
{
   signal(SIGINT, sigHandler );

   for (checkForEndlessLoop=0; SOME_SLOPPY_CONDITION; )
   {
      //Some processing here
      if (++checkForEndlessLoop == 0 )
          overflow=true;
   }

   checkForEndlessLoop=0;

   while (SOME_SLOPPY_CONDITION)
   {
      //Some processing here
      if (++checkForEndlessLoop == 0 )
          overflow=true;
   }

} 
```

或者更简单的是，只要检测到故障情况，就忽略`SIGINT`使用`SIG_IGN`和`break`退出故障循环，打印出错误信息并退出！

# c# - 如何连接 Windows Phone 应用程序以使用存储在 sql azure 中的数据库

> ID：10242855
> 
> 赞同：0
> 
> 时间：2012-04-20T08:37:35.290
> 
> 标签：c#, windows-phone-7

如何连接 Windows Phone 7 应用程序以使用存储在 SQL Azure 中的数据库...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:39:35.853

使用 WCF 服务从 Windows Phone 7 访问 SQL Azure 数据库。教程：http: [//mobile.dzone.com/news/how-use-wcf-services-access](http://mobile.dzone.com/news/how-use-wcf-services-access)

# yii - Yii 模拟模型

> ID：10242856
> 
> 赞同：3
> 
> 时间：2012-04-20T08:37:37.900
> 
> 标签：yii, functional-testing

我尝试使用 Yii 框架构建一个项目。在功能测试期间是否有可能模拟模型对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:23:29.043

我认为您正在寻找这个：

[http://www.yiiframework.com/doc/guide/1.1/en/test.fixture](http://www.yiiframework.com/doc/guide/1.1/en/test.fixture)

Yii 中的功能测试非常简单。创建夹具，构建模型，做出断言，开始。

# php - 哎呀私有变量值不返回错误

> ID：10242857
> 
> 赞同：0
> 
> 时间：2012-04-20T08:37:46.320
> 
> 标签：php

为什么下面的代码不返回值？我只是得到一个空白屏幕。

当我在子类中尝试私有变量 val 时，至少它应该返回一些错误。

```
class Customer {

    private $instance_count = 0; //private data member
    function sub1(){
         return $this->instance_count++;
    }

}
class CustomerChild extends Customer{
    function sub2(){
         return $this->instance_count++;
    }

}
$CustomerObj = new CustomerChild();
print $CustomerObj->sub2(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:46:43.663

```
 private $instance_count = 0; 
```

改成

```
 protected $instance_count = 0; 
```

子类不能访问私有变量。您需要受保护的变量。

另外，您的评论：

```
//static data member 
```

该变量不是静态的，不确定为什么会有评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:43:04.803

原因是，您正在尝试打印 NULL：

```
var_dump($CustomerObj->sub2());
NULL

print NULL;
//nothing.... 
```

有关详细信息，请查看@James 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:45:23.680

尝试打开登录 php.ini 并创建您指定的文件（对于 Windows）：

```
log_errors = On
error_log = C:\TEMP\PHP.LOG 
```

不要忘记创建文件夹、文件并启用对该文件的写入权限。

# firefox - 如何在构建 Firefox 时禁用 JIT 模式？

> ID：10242858
> 
> 赞同：3
> 
> 时间：2012-04-20T08:37:52.683
> 
> 标签：firefox, build, interpreter, jit

众所周知，firefox中有两种执行javascript的模式：解释器和JIT。我的问题是我是否可以在 linux 中构建 firefox 时禁用 JIT，如果可以，如何？任何有用的建议将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:14:29.017

使用 --disable-methodjit 配置选项*可能会*起作用：SpiderMonkey 支持它，但它是否会从主构建传播到 SpiderMonkey 配置步骤对我来说并不明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T14:24:54.620

在没有 JIT 的情况下构建 Firefox 被破坏了。来源不仔细跟踪 ENABLE_JIT 和朋友。

# drupal - Drupal 7 更改模块的主题

> ID：10242867
> 
> 赞同：0
> 
> 时间：2012-04-20T08:38:24.650
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-theming

[我基于http://drupal.org/project/examples](http://drupal.org/project/examples)中的可扩展向导示例创建了一个新模块。这是 5 个表单模块之一，它们都将在同一个 drupal 站点上运行。

我需要所有 5 个模块来使用不同的主题，但无法弄清楚如何在模块级别设置主题。

我已经尝试过[Drupal 中的建议：How to theme a module](https://stackoverflow.com/questions/2500748/drupal-how-to-theme-a-module) and [Drupal theme functions workflow in module](https://stackoverflow.com/questions/1328756/drupal-theme-functions-workflow-in-module)但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T03:23:48.517

要以编程方式执行此操作，您可以使用 themekey 模块 api，如本文所述：http: [//drupal.org/node/622450](http://drupal.org/node/622450)

还有几个模块可以帮助根据前端的不同情况切换主题：

[主题键： http](http://drupal.org/project/themekey) ://drupal.org/project/themekey

页面主题：[http ://drupal.org/project/page_theme](http://drupal.org/project/page_theme)

内容主题：[http ://drupal.org/project/content_theme](http://drupal.org/project/content_theme)

还有角色主题切换器和其他一些

# java - java 1.6 升级

> ID：10242869
> 
> 赞同：2
> 
> 时间：2012-04-20T08:38:28.850
> 
> 标签：java, jaxb, jdk1.6, unmarshalling

我们最近升级到了jdk1.6。结果我们不得不从项目中删除所有与 jaxb 相关的 jar，因为 jdk 1.6 支持 jaxb。现在，当我们尝试填充 jaxb 对象时出现以下错误

```
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.a: Invalid content was found starting with element 
```

尽管以前使用 jaxb jar 之前确实可以使用相同的 xsd 和 xml 组合。我需要更新我的 xsd/xml 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:08:32.760

您需要再次编译 xsd。从类路径中删除 xercesImpl.jar jaxb-api.jar 和其他。

# android - 使用谷歌搜索结果查询时间

> ID：10242876
> 
> 赞同：1
> 
> 时间：2012-04-20T08:38:48.347
> 
> 标签：android, html, google-search

这个让我很费解...

对于我的 Android 应用程序，我希望能够在用户请求的任何位置（一直到城市级别）返回当前时间。请求本身来自语音命令，因此我无法使用其他方法。

最明显的方法（所以我认为）是查询谷歌，但我需要你的大脑来帮助我解决如何提取我想要的数据！

在谷歌中，查询：

**“中国现在几点”**

您应该会在顶部看到一个“小部件”，很好地显示答案。查看页面源代码并在“中国”上搜索，它就在那里 - 我觉得很好，这很容易！

但...

**“伦敦几点了”**

尽管 Google 中的显示看起来相同，但在搜索源 HTML 时没有“London”的结果...？

使用谷歌浏览器，我检查“小部件”的元素，然后可以查看我希望在所有情况下提取的内容。

所以，我的问题首先是，我是否遗漏了一些明显的东西（例如，谷歌不希望我们能够做到这一点）？或者有没有办法通过构造查询来“强制”结果在 HTML 中？

其次，有没有办法访问特定的“元素容器”并将结果返回给我的 Android 应用程序？

我提前谢谢你...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:35:29.217

您应该真正使用 API 而不是解析 html。我想有很多 API 可以让你在一个给定的城市里有时间。 [http://www.worldweatheronline.com/time-zone-api.aspx](http://www.worldweatheronline.com/time-zone-api.aspx)例如（我自己试过）

如果您仍想从 google 结果（即 html）中提取数据，请检查 html 解析器，如这篇文章：[Parse HTML in Android](https://stackoverflow.com/questions/2188049/parse-html-in-android)

# c# - DDD 实体类

> ID：10242878
> 
> 赞同：2
> 
> 时间：2012-04-20T08:38:49.687
> 
> 标签：c#, domain-driven-design, entity

我正在尝试在脑海中实施 DDD 方法。到目前为止，我知道实体是唯一的，并通过其属性的组合来识别。

实体是抽象类，将由其他实体类实现。

到目前为止，我知道 Version 属性用于管理并发性。在本课程的其余部分需要帮助。

我正在学习 DDD，所以请描述您对此的想法或分享有用的具体主题链接。

```
public abstract class Entity<T>
    {
        #region Properties
        protected T _Id;
        private int _Version;
        #endregion

        private static bool IsTransient(Entity<T> obj)
        {
            return (obj != null) &&
                Equals(obj.Id, default(T));
        }

        private Type GetUnproxiedType()
        {
            return GetType();
        }

        public virtual T Id
        {
            get
            {
                return _Id;
            }
            protected set
            {
                _Id = value;
            }
        }

        public virtual int Version
        {
            get
            {
                return _Version;
            }
            set
            {
                _Version = value;
            }
        }

        public override bool Equals(object obj)
        {
            return Equals(obj as Entity<T>);
        }

        public virtual bool Equals(Entity<T> other)
        {
            if (other == null) return false;
            if (ReferenceEquals(this, other)) return true;
            if (!IsTransient(this) &&
                !IsTransient(other) &&
                Equals(Id, other.Id))
            {
                var otherType = other.GetUnproxiedType();
                var thisType = GetUnproxiedType();
                return (thisType.IsAssignableFrom(otherType)
                    || otherType.IsAssignableFrom(thisType));
            }
            return false;
        }

        public override int GetHashCode()
        {
            if (Equals(Id, default(T)))
            {
                return base.GetHashCode();
            }
            return Id.GetHashCode();
        }

        public static bool operator ==(Entity<T> e1, Entity<T> e2)
        {
            return Equals(e1, e2);
        }

        public static bool operator !=(Entity<T> e1, Entity<T> e2)
        {
            return !Equals(e1, e2);
        }

    } 
```

更新

经过一番研究，我得出结论

当我们尝试比较两个对象时，使用 Equals 方法会很方便。例如，应用程序中的成像位置，我们在多个实例中拥有相同的对象。一份来自数据库，一份来自客户端。我们需要找出该对象是否相同但又不相同。

为此，我们将使用 Equals 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T08:43:24.643

实体不是由其属性值唯一标识的；一个实体有一个身份，但这并不意味着该身份是由其属性的值组成的。这意味着，如果你改变一个实体的属性，它的身份就会改变，你不想要这种行为。（例如，如果您的地址改变了，您的身份没有改变，您仍然是同一个人，住在另一个地址）。

（我看到您已经通过使用 Id 属性实现了身份/平等，这是一件好事）。

在实体旁边，您有价值 - 对象。值对象的身份由其属性的值组成，因此，值对象最好是不可变的，因为更改值对象也意味着您更改其身份。

但是，你的问题是什么？

# php - 在php中使用simplexlsx读取excel xlsx文件

> ID：10242879
> 
> 赞同：10
> 
> 时间：2012-04-20T08:38:51.310
> 
> 标签：php, xlsx

我正在使用`simplexlsx.class.php`读取 xlsx 文件类型。当文件在 excel 文件中包含日期字段时，它会出现问题。

**样本输出：**

在文件数据中：

日期 日期 2012 年 2 月 2 日星期四 2012 年 2 月 3 日星期五

**程序输出：**

日期

星期四 40941
星期五 40942

它没有给出正确的日期

```
<?php

if (isset($_FILES['file'])) {

require_once "simplexlsx.class.php";

$xlsx = new SimpleXLSX( $_FILES['file']['tmp_name'] );

echo '<h1>Parsing Result</h1>';
echo '<table border="1" cellpadding="3" style="border-collapse: collapse">';

list($cols,) = $xlsx->dimension();

foreach( $xlsx->rows() as $k => $r) {
    if ($k == 0) continue; // skip first row
    echo '<tr>';
    for( $i = 0; $i < $cols; $i++)
    {

        echo '<td>'.( (isset($r[$i])) ? $r[$i] : '&nbsp;' ).'</td>';

    }
    echo '</tr>';
}
echo '</table>';
}

?>
<h1>Upload</h1>
<form method="post" enctype="multipart/form-data">
*.XLSX <input type="file" name="file"  />&nbsp;&nbsp;<input type="submit" value="Parse" /> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T09:08:22.557

这些是正确的日期，只是 Excel 的内部格式：自 1900 年 1 月 1 日以来的天数（允许 1900 年是闰年）。显然，simplexlsx 类中的某些内容正在将 xlsx 日期值转换为 Excel 内部格式。

我以前没有遇到过 simplexlsx（这让我感到惊讶，因为我以为我知道 PHP 的所有 Excel 文件读取器/写入器库）......但是在代码的某个地方必须有一种方法来处理这种转换，所以我会想象一下也会有一种相反的方法（将 Excel 时间戳转换为 PHP）

**编辑**

您想要的方法在代码中：

```
function unixstamp( $excelDateTime ) {
    $d = floor( $excelDateTime ); // seconds since 1900
    $t = $excelDateTime - $d;
    return ($d > 0) ? ( $d - 25569 ) * 86400 + $t * 86400 : $t * 86400;
} 
```

我不保证它是准确的

**进一步编辑**

```
function unixstamp( $excelDateTime ) {
    $d = floor( $excelDateTime ); // seconds since 1900
    $t = $excelDateTime - $d;
    return ($d > 0) ? ( $d - 25569 ) * 86400 + $t * 86400 : $t * 86400;
}

$dateVal = 40941;
$unixDateVal = unixstamp($dateVal);
var_dump($unixDateVal);
echo date('d-M-Y',$unixDateVal); 
```

给

```
float 1328140800 
```

这看起来非常像今年正确范围内的 unix 时间戳值，果然：

```
02-Feb-2012 
```

所以看起来它对我有用

# jquery - jquery ui datepicker 仅限日/月，而不是年份选择

> ID：10242886
> 
> 赞同：13
> 
> 时间：2012-04-20T08:39:23.370
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我已经在 SO 和周围进行了搜索，但没有为这个问题找到合适的解决方案。使用 jQueryUI DatePicker 我需要为所有年份选择一个递归日期，所以我不想显示年份选择，因为它没有意义。

我怎样才能在调用中获得这个，如下所示？

```
$('#myInput').datepicker({ dateFormat: "dd/mm" }); 
```

注意：我不能使用[这里](https://stackoverflow.com/questions/6799092/jquery-datepicker-only-day-and-month) `.ui-datepicker-year{ display:none; }`建议的 css 解决方案，因为同一页面中还有其他日期选择器。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-20T08:51:49.337

**试试这个演示**： http: [//jsfiddle.net/rAdV6/20/](http://jsfiddle.net/rAdV6/20/)
另请参阅下面的两个屏幕截图。

进一步详细说明，此修复将允许在日历顶部显示多个日期选择器，无论是否在顶部显示**年份。**

**jQuery代码：**

```
$('.DateTextBox.NoYear').datepicker({
    beforeShow: function (input, inst) {
        inst.dpDiv.addClass('NoYearDatePicker');
    },
    onClose: function(dateText, inst){
        inst.dpDiv.removeClass('NoYearDatePicker');
    }
});

$('#datepicker').datepicker( { changeYear: false, dateFormat: 'dd/mm',});
$('#datepicker1').datepicker( { changeYear: true, dateFormat: 'dd/mm', });
$('#datepicker2').datepicker( { changeYear: false, dateFormat: 'dd/mm', }); 
```

**CSS：**

```
.NoYearDatePicker .ui-datepicker-year
{
   display:none;   
} 
```

**HTML：**

```
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" type="text/css" media="all">

date (without year) <input type="text" id="datepicker" class="DateTextBox NoYear">

<br />
date 1: (With year) <input type="text" id="datepicker1" >
<br />
date 2: (Without year) <input type="text" id="datepicker2" class="DateTextBox NoYear">
​ 
```

**它在我的 lappy OSX 中的显示方式：**

![在此处输入图像描述](../Images/1e0c60fd78c1f93aaba8c0b8eb5e729c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:57:51.363

试试这个：

```
$("#myInput").datepicker();
$("#myInput").datepicker("option", "dateFormat", "dd/mm"); 
```

作为 jQuery UI DatePicker 文档，

[http://docs.jquery.com/UI/Datepicker#option-dateFormat](http://docs.jquery.com/UI/Datepicker#option-dateFormat)

您必须在初始化中调用以下函数。

```
$("#myInput").datepicker({ dateFormat: "dd/mm" }); 
```

如果在 init 方法之后调用它，它将不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-01T20:22:49.030

基于 Tats_innit 的答案，这里有一个解决方案，可以解决几个问题。

```
$(function() {
  $('.dp').datepicker({
    dateFormat: 'd MM yy',
    beforeShow: function(inp, inst) {
      if (inp.classList.contains("Birthday")) {
        inst.dpDiv.addClass('BirthdayDatePicker');
        return {
          dateFormat: 'MM d',
          defaultDate: new Date(1904, 0, 1),
          minDate: new Date(1904, 0, 1),
          maxDate: new Date(1904, 11, 31),
        };
      }
    },
    onClose: function(dateText, inst) {
      inst.dpDiv.removeClass('BirthdayDatePicker');
    }
  });
});
```

```
.BirthdayDatePicker .ui-datepicker-year {
  display: none;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

Birthday: <input type='text' class='dp Birthday' placeholder='Month day'>

<div style="height: 12px" class="spacer"></div>

Defaults: <input type='text' class='dp' placeholder='day Month year'>
```

我发现在输入上使用一个类是一种更简单的方法来指定我们希望从日期选择器中获得哪些行为。

如果找到*生日*类，我们使用 1904 年而不是当前年份，因为 1904 年是闰年，确保 2 月 29 日可用。此外，我们使用 minDate/MaxDate 选项将小部件限制为一个 12 个月的周期。如果您愿意，您还可以`numberOfMonths: [ 3, 4 ]`在返回的对象中包含一次显示全年。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-03T11:43:02.870

我知道这是一个很老的问题，但也许它会对某人有所帮助。如果您设置选项`changeYear: false`，您可以看到`<span>`带有年份值的 a，但如果您设置`changeYear: true`，您可以看到 a `<select>`。我们可以像这样使用这种差异：

```
$(function() {
  $("#year-datepicker").datepicker({
    changeMonth: true,
    changeYear: true
  });

  $("#no-year-datepicker").datepicker({
    dateFormat: "MM d",
    changeMonth: true,
    changeYear: false
  });
});
```

```
span.ui-datepicker-year {
  display: none;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />

<p>With year: <input type="text" id="year-datepicker"></p>
<p>Without year: <input type="text" id="no-year-datepicker"></p>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T08:41:57.767

你不能吗

```
#myInput .ui-datepicker-year{ display:none; } 
```

将其限制为您关注的日期选择器？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-30T08:24:03.133

简单的解决方案：

```
$(".daypicker").datepicker( { 
    changeYear: false, 
    dateFormat: 'MM-dd',
}).focus(function () {
    $(".ui-datepicker-year").hide();
}); 
```

它不会影响同一页面中的其他日期选择器。

# java - 在 View 子类中实现监听器有问题吗？

> ID：10242887
> 
> 赞同：1
> 
> 时间：2012-04-20T08:39:31.740
> 
> 标签：java, android, android-view, onclicklistener

我需要继承 TextView 让它为我保存一些额外的数据。我正在使用自定义 ListAdapter 将这些新的 View 对象放入 ListView。

我有一个我想要执行的操作`onClick()`，它是基于附加数据的 ListView 的所有元素的相同操作。

**这个定义会有任何缺点或导致任何问题吗？**

```
public class UserTextView extends TextView implements OnClickListener {

    public int userId;

    public UserTextView(Context context) {
        super(context);

        this.setClickable(true);
        this.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

} 
```

我希望我的`onClick()`实现中的代码实际上不会被复制，而只会在内存中存在一次并使用特定`UserTextView`的数据调用。所以我不期望额外的内存使用。事实上，没有额外的类和对象（匿名与否）可能会提高性能（尽管不是以真正、有意义的方式）。

如果需要，`setOnClickListener()`如果我需要针对特定​​对象的不同行为，可以调用该方法来更改侦听器。

它似乎很适合我的需要：

1.  一个可以保存额外数据的 TextView (userId)
2.  具有相同默认行为的 TextView 类
3.  可以通过 ListAdapter 轻松创建和管理

我只是觉得我从未见过这样做过，并且怀疑我缺少一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:51:26.180

据我所知，对于一个类的每个实例，所有非静态的东西都在内存中。这意味着通过这种设计，您的代码既漂亮又干净，但外观和内存使用并没有什么不同。

# orchardcms - Orchard CMS - 从视图中查询列表

> ID：10242889
> 
> 赞同：0
> 
> 时间：2012-04-20T08:39:43.293
> 
> 标签：orchardcms

我创建了一个列表并向其中添加了一些项目。从视图（与此列表无关）来看，我正在尝试访问此列表的项目。

我可以使用以下查询获取项目列表：

```
contentManager.Query<ContentPart>("myContentTypeName") 
```

这给了我一个清单。

但是，考虑这种情况 -

-> 我创建了一个 myContentTypeName 并将其添加到列表中。

-> 我创建了另一个项目，但没有将它添加到任何列表中。

上面的查询返回该类型的所有项目。如何过滤此查询并仅获取列表中的项目？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T12:58:24.883

如果您使用 >= 1.4 版本的 Orchard，请使用投影仪模块。从 1.4 开始的 List 几乎已被弃用。如果您仍然需要使用列表，我认为您想要做的是查询列表内容项，而不是其中的项目。

# api - 无法使用管理 REST API 升级 Azure 部署（SSL 证书问题）

> ID：10242893
> 
> 赞同：5
> 
> 时间：2012-04-20T08:39:50.357
> 
> 标签：api, rest, azure, ssl-certificate

我目前正在为 Windows Azure 的托管服务进行自动化部署过程。`.cspkg`和文件的创建`.cscfg`使用调用`msbuild`. 现在我正在编写一个小型 .NET 控制台应用程序，它应该使用管理 REST API 将这些文件部署到 Azure。

API 本身没有问题。我可以使用我的一个管理证书向 API 发送请求。我将`.cspkg`文件上传到 Azure BLOB 存储，然后尝试调用`Upgrade Deployment`. 但每次我尝试时，我都会收到“400 Bad Request”响应，指出未找到带有指纹 xy 的证书。此证书是我用于自定义域 (DNS CNAME) 的 HTTPS的 SSL 证书（*不是管理证书）。*

现在，整个事情变得有趣了：

当我在 Visual Studio 中使用“发布”命令部署文件时，没有问题。（我比较了VS 和我的输出中的`.cscfg`/文件：除了一些 GUID 之外，它们是相同的）。此外，使用浏览器中的 Silverlight Management，我什至可以上传无法使用 API 上传的生成文件。`.cspkg``msbuild`

当我使用调用检索所有证书的列表时`List Certificates`，据说丢失的证书显然在那里。我还可以使用`Get Certificate`调用检索其数据。

那么为什么 Azure 在使用`Upgrade Deployment`调用时一直告诉我找不到证书呢？有没有人经历过类似的事情？有人**给**我提示吗？提前致谢。

PS：这是 Azure 在我使用 API 时所说的：

```
<Error xmlns="http://schemas.microsoft.com/windowsazure" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <Code>BadRequest</Code>
    <Message>The certitficate with thumbprint 7b232c4a2d6e3deadbeef120d5dbc1fe8049fbea was not found.</Message>
</Error> 
```

PPS：是的，回复中的词是`certitficate`，不是`certificate`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T15:44:51.810

好的，在使用`List Subscription Operations`API 调用找出 Visual Studio 调用部署应用程序后，我找到了解决方案。

事实证明，我用于 API 请求的 URL 是错误的，**但是：**恕我直言，我责怪微软糟糕地记录了它的[Azure Management API](http://msdn.microsoft.com/en-us/library/windowsazure/ee460793.aspx)。

在他们的文档中，他们写了要使用的 URL：

`https://management.core.windows.net/<subscription-id>/services/hostedservices/<service-name>/deploymentslots/<deployment-slot>/?comp=upgrade`

描述如下：

> 要生成请求 URI，请将 <subscription-id> 替换为您的订阅 ID，将 <service-name> 替换为您的服务名称，将 <deployment-slot> 替换为 staging 或 production，并将 <deployment-name> 替换为你的部署。

他们忘记提及的是，您必须**使用服务的 DNS 名称**，而**不是名称**！他们至少可以返回适当的错误消息，告诉您服务名称无效、不存在或不属于您的订阅 ID，而不是抱怨某些证书问题。

谢谢微软，这花了我两天多的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:12:48.393

该错误表明您尚未将该证书上传到托管服务的机密存储中。Visual Studio 可能会自动为您执行此操作，但如果您想以编程方式复制它，请使用添加证书 API 调用并将 PFX 上传到部署中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T16:20:54.610

您可以看到“400 BadRequest - 未找到带有指纹 XYZ 的证书。” 由于以下原因（我刚刚调试过），出现在 CreateDeployment 或 UpgradeDeployment 场景中：

1.  您使用与托管服务中的 SSL 或远程桌面密码加密相同的证书进行*订阅管理。*因此，您将使用带有指纹 XYZ 的证书来验证创建部署的服务管理 REST 调用。
2.  指定部署参数时，您传入 CSCFG，它通过指纹引用相同的证书，因为它需要配置远程桌面/SSL 等。
3.  该证书尚未添加到您的*托管服务*证书中。

在这种情况下，400 Bad Request 错误*实际上是在*告诉您您有一个错误的请求，因为您的 CSCFG 中的证书尚未附加到您的托管服务。出现混淆（对我而言）是因为，由于它是一个多用途证书，您将错误消息误解为指的是请求的身份验证，即使您没有得到 401。

# excel - 如何在 excel 2010 中构建条件单元格合并？

> ID：10242895
> 
> 赞同：0
> 
> 时间：2012-04-20T08:40:29.893
> 
> 标签：excel, vba

我有很多 3 种语言的原始数据，其中大部分是`.xlsx`. 您可以将数据视为包含 3 列和很多行（数百万）的表。

我想构建一个实现这个的宏：

检查相邻单元格上的单元格是否为空，将自己合并到上述单元格。

```
if (the cell on your left is empty):
     merge yourself to the above cell; 
```

我对VB一无所知，但我想自己实现，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:32:00.943

没有更多信息很难回答，但这概述了一些问题。

您需要在某个地方存储感兴趣的单元格的行和列：

```
Dim ColCrnt As Long
Dim RowCrnt As Long 
```

如果要遍历列，可以编写如下内容：

```
ColCrnt = 5     ' 5 represents column "E".  Columns are numbered from 1.

For RowCrnt = 1 to 1000
  'Update code.
Next 
```

如果你想移动光标然后调用宏，你可以这样写：

```
ColCrnt = ActiveCell.Column
RowCrnt = ActiveCell.Row
' Update Code. 
```

假设更新代码是对活动工作表进行操作，它将类似于：

```
If Cells(RowCrnt, ColCrnt - 1).Value = "" Then
  Cells(RowCrnt-1, ColCrnt).Value = _
          Cells(RowCrnt-1, ColCrnt).Value & Cells(RowCrnt-1, ColCrnt).Value    
  Cells(RowCrnt, ColCrnt).Value = ""
End If 
```

`Cells(RowCrnt, ColCrnt).Value`是当前单元格的值。从 RowCrnt 中减去 1，引用上面的单元格。从 ColCrnt 中减去 1，引用左侧的单元格。

`Cells(RowCrnt-1, ColCrnt).Value = Cells(RowCrnt-1, ColCrnt).Value & Cells(RowCrnt-1, ColCrnt).Value`将当前单元格的值连接到上面单元格的末尾。

`Cells(RowCrnt, ColCrnt).Value = ""`清除当前单元格。

所以：

```
 |    E    |
       |---------|
       | The     |
       | cat     | 
```

变成：

```
 |    E    |
       |---------|
       | Thecat  |
       |         | 
```

如果你想在“The”和“cat”之间有一个空格：

```
 Cells(RowCrnt-1, ColCrnt).Value = _
       Cells(RowCrnt-1, ColCrnt).Value & " " & Cells(RowCrnt-1, ColCrnt).Value 
```

如果您想在新行上添加“猫”::

```
 Cells(RowCrnt-1, ColCrnt).Value = _
      Cells(RowCrnt-1, ColCrnt).Value & vblf & Cells(RowCrnt-1, ColCrnt).Value 
```

注意：一个单元格可以占用很长的字符串，但只有开头可见。

希望这能让你开始。

# java - Java：如何以编程方式选择和扩展 JTree 中的多个节点？

> ID：10242896
> 
> 赞同：13
> 
> 时间：2012-04-20T08:40:36.230
> 
> 标签：java, swing, select, jtree, treenode

我有一个`JTree`和一个`awt.Canvas`。当我从 中选择多个对象时`Canvas`，`objList`我希望所有选定的项目都显示在`JTree`所选中。这意味着例如，如果我选择了 2 个对象，则它们到根的路径都应该扩展，并且每个选定的对象都应该选择相应的对象`TreeNode`。我的 JTree 有`TreeSelectionModel.DISCONTIGUOUS_TREE_SELECTION`.

这是我使用的扩展函数的示例：

```
public void selectTreeNodes() {

    HashMap <String, MyEntity> entities = ...;
    Iterator it = entities.keySet().iterator();
    while (it.hasNext()) {

        String str = it.next().toString();
        MyEntity ent = entities.get(str);

        if (ent.isSelected()) {
            DefaultMutableTreeNode searchNode = searchNode(ent.getName());
            if (searchNode != null) {

                TreeNode[] nodes = ((DefaultTreeModel) tree.getModel()).getPathToRoot(searchNode);
                TreePath tpath = new TreePath(nodes);
                tree.scrollPathToVisible(tpath);
                tree.setSelectionPath(tpath);
            }
        }
    }
}

public DefaultMutableTreeNode searchNode(String nodeStr) 
{ 
    DefaultMutableTreeNode node = null; 

    Enumeration enumeration= root.breadthFirstEnumeration(); 
    while(enumeration.hasMoreElements()) {

        node = (DefaultMutableTreeNode)enumeration.nextElement(); 
        if(nodeStr.equals(node.getUserObject().toString())) {

            return node;                          
        } 
    } 

    //tree node with string node found return null 
    return null; 
} 
```

在我当前的状态下，如果我选择一个对象，它将被选中`JTree`并`TreePath`显示。但是，如果`entities`选择了超过 1 个对象，它将不显示任何内容，my`JTree`将保持不变。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-20T09:15:39.473

您正在寻找`TreeSelectionModel`的`JTree`（使用吸气剂）。用于[`TreeSelectionModel#setSelectionPaths`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeSelectionModel.html#setSelectionPaths%28javax.swing.tree.TreePath%5B%5D%29)多个路径。现在您只设置一个因您的`tree.setSelectionPath(tpath);`呼叫而选择的节点。`TreeSelectionModel`还具有添加/删除现有选择的方法，...（基本上是您将来可能需要的一切）。

一个有趣的扩展[`JTree#setExpandsSelectedPaths`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTree.html#setExpandsSelectedPaths%28boolean%29)方法是允许配置`JTree`自动扩展选定路径的方法。如果要手动管理，可以使用[`JTree#setExpandedState`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTree.html#setExpandedState%28javax.swing.tree.TreePath,%20boolean%29)方法

# sql-server - SQL-DMO：您必须使用 SQL Server 2005 管理工具连接到此服务器

> ID：10242897
> 
> 赞同：1
> 
> 时间：2012-04-20T08:40:38.133
> 
> 标签：sql-server, sql-server-2005, sql-server-2000

在 SQL Server 2000 企业管理器中出现错误 - 请参阅随附的屏幕截图！

请帮助如何克服这个问题

![在此处输入图像描述](../Images/fd89877541e068709ed2f8c31cca83c0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T08:53:47.433

您必须安装[向后兼容](http://msdn.microsoft.com/en-US/library/ms143706%28v=SQL.90%29.aspx)的软件包。你可以[从这里下载](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=15748)。文件名为 SQLServer2005_BCxxx.msi

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:52:38.087

您正在尝试使用 SQL Server 2000 的企业管理器访问 SQL Server 2005 实例，但这是不可能的。你需要安装一份SQL Server Management Studio - [2008 R2Express版本](http://www.microsoft.com/download/en/details.aspx?id=22985)应该没问题，或者你可以挖出[2005版本](http://www.microsoft.com/download/en/details.aspx?id=8961)

# android - 如何按行分割位图

> ID：10242899
> 
> 赞同：0
> 
> 时间：2012-04-20T08:40:40.817
> 
> 标签：android, bitmap, slice

我正在为 android 设备开发一个项目。我想按一行将位图图像拆分为 2 个位图。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:44:53.100

如果生成的位图是矩形的，即线条是水平的或垂直的 - 您需要使用这种画布方法：

[绘制位图](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28android.graphics.Bitmap,%20android.graphics.Rect,%20android.graphics.RectF,%20android.graphics.Paint%29)

您只需创建新位图并使用此方法在其 Canvas 上部分绘制原始位图。

否则 - 更棘手，我想您将需要使用 PorterDuff 算法（所有这些都可以通过 Canvas API 获得）使用蒙版和颜色混合，或者只使用路径进行剪辑。

# python - PySNMP 无法识别响应

> ID：10242902
> 
> 赞同：5
> 
> 时间：2012-04-20T08:40:59.657
> 
> 标签：python, snmp, mib, pysnmp

我正在使用以下简单脚本：

```
from pysnmp.entity.rfc3413.oneliner import cmdgen

errorIndication, errorStatus, errorIndex, \
varBindTable = cmdgen.CommandGenerator().bulkCmd(
            cmdgen.CommunityData('test-agent', 'public'),
            cmdgen.UdpTransportTarget(('IP.IP.IP.IP', 161)),
            0,
            1,
            (1,3,6,1,2,1,4,24,4,1,2,169,254)
        )

if errorIndication:
   print errorIndication
else:
    if errorStatus:
        print '%s at %s\n' % (
            errorStatus.prettyPrint(),
            errorIndex and varBindTable[-1][int(errorIndex)-1] or '?'
            )
    else:
        for varBindTableRow in varBindTable:
            for name, val in varBindTableRow:
                print '%s = %s' % (name.prettyPrint(), val.prettyPrint()) 
```

从命令行使用 snmpwalk 到此设备会返回预期结果。但是脚本在超时之前返回 No SNMP response received。如果我省略这个 OID，那么一切正常。所以问题出在这个 OID 上

这里 tcpdump 统计信息：

```
/usr/sbin/tcpdump -nn -vv -s0 -A host HOST and udp

tcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes

12:15:31.494920 IP (tos 0x0, ttl  64, id 0, offset 0, flags [DF], proto: UDP (17), length: 77) IP.IP.IP.IP.47911 > IP.IP.IP.IP.161: [bad udp cksum 4b7d!]  { SNMPv2c { GetBulk(34) R=8993731  N=0 M=1 .1.3.6.1.2.1.4.24.4.1.2.169.254 } }
E..M..@.@.I..]<..]</.'...9.S0/.....public."....;.......0.0...+..........).~..

12:15:31.495666 IP (tos 0x0, ttl  64, id 0, offset 0, flags [DF], proto: UDP (17), length: 98) IP.IP.IP.IP.161 > IP.IP.IP.IP.47911: [udp sum ok]  { SNMPv2c { GetResponse(55) R=8993731  .1.3.6.1.2.1.4.24.4.1.2.169.254.0.0.0.0.255.255.0.0.0.0.0=[inetaddr len!=4]0.0.255.255.0.0.0.0 } }
E..b..@.@.I..]</.]<....'.N.\0D.....public.7....;.......0)0'..+..........).~.............@.........

12:15:32.500226 IP (tos 0x0, ttl  64, id 0, offset 0, flags [DF], proto: UDP (17), length: 77) IP.IP.IP.IP.47911 > IP.IP.IP.IP.161: [bad udp cksum 4b7d!]  { SNMPv2c { GetBulk(34) R=8993731  N=0 M=1 .1.3.6.1.2.1.4.24.4.1.2.169.254 } }
E..M..@.@.I..]<..]</.'...9.S0/.....public."....;.......0.0...+..........).~..

12:15:32.500624 IP (tos 0x0, ttl  64, id 0, offset 0, flags [DF], proto: UDP (17), length: 98) IP.IP.IP.IP.161 > IP.IP.IP.IP.47911: [udp sum ok]  { SNMPv2c { GetResponse(55) R=8993731  .1.3.6.1.2.1.4.24.4.1.2.169.254.0.0.0.0.255.255.0.0.0.0.0=[inetaddr len!=4]0.0.255.255.0.0.0.0 } }
E..b..@.@.I..]</.]<....'.N.\0D.....public.7....;.......0)0'..+..........).~.............@......... 
```

正如我们所看到的，设备返回 response `.1.3.6.1.2.1.4.24.4.1.2.169.254.0.0.0.0.255.255.0.0.0.0.0=[inetaddr len!=4]0.0.255.255.0.0.0.0`，但什么也没发生，pysnmp 只是继续一次又一次地尝试这个 OID 的值.. snmpwalk 将此响应识别为`IP ADDRESS 0.0.255.255`

你们能帮帮我吗？在此先感谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T17:56:12.527

您的 SNMP 代理似乎生成了损坏的 SNMP 消息。虽然 IPv4 地址的长度为 4 个八位字节，但您的代理会报告八位字节的值。

根据 SNMP RFC，pysnmp 丢弃格式错误的 SNMP 消息并重试原始请求几次，希望得到正确的响应。

要使 pysnmp 使用特定格式错误的 IP 地址值，您可以在运行时修补其 IpAddress 类，使其仅从可能更长的初始化程序中获取四个前导八位字节：

```
>>> def ipAddressPrettyIn(self, value):
...   return origIpAddressPrettyIn(self, value[:4])
...
>>> origIpAddressPrettyIn = v2c.IpAddress.prettyIn
>>> v2c.IpAddress.prettyIn = ipAddressPrettyIn
>>>
>>> msg, rest = decoder.decode(wholeMsg, asn1Spec=v2c.Message())
>>> print msg.prettyPrint()
Message:
version='version-2'
 community=public
 data=PDUs:
 response=ResponsePDU:
  request-id=6564368
  error-status='noError'
  error-index=0
  variable-bindings=VarBindList:
   VarBind:
    name=1.3.6.1.2.1.4.24.4.1.2.169.254.0.0.0.0.255.255.0.0.0.0.0
    =_BindValue:
     value=ObjectSyntax:
       application-wide=ApplicationSyntax:
       ipAddress-value=0.0.255.255 
```

# javascript - 我的表使用 Jquery Table Sorter 得到重复的行

> ID：10242903
> 
> 赞同：4
> 
> 时间：2012-04-20T08:41:03.840
> 
> 标签：javascript, jquery, html, asp.net-mvc, tablesorter

我的项目中有搜索字段，`$.post`用于获取搜索查询的结果。我的问题：当用户单击搜索按钮时，它可以正常工作，但是当用户再次单击搜索按钮，然后单击我的标题列时，jquery 排序器会将其与表中显示的先前搜索重复。

我该如何解决这个问题，这样我的分拣机功能就不会重复？

这是搜索按钮单击的 Jquery 代码。

```
 $(function () {
            $('#submitfloat').click(function () {
                $('#loading').show();
                setTimeout(function () { $("#loading").hide(); }, 800);
                var SubjectTypes = $('#SubjectTypes').val();
                var Teams = $('#Teams').val();
                var Companies = $('#Companies').val();
                var Consultants = $('#Consultants').val();
                var PlannedDates = $('#PlannedDates').val();
                var CompletedDates = $('#CompletedDates').val();
                var DateTypes = $('#DateTypes').val();
                var data = {
                    Subjectypes: SubjectTypes,
                    Companies: Companies,
                    Teams: Teams,
                    Consultants: Consultants,
                    PlannedDates: PlannedDates,
                    CompletedDates: CompletedDates,
                    DateTypes: DateTypes
                };

                var fromDate = $('#PlannedDates').val();
                var endDate = $('#CompletedDates').val();
                if (Date.parse(fromDate) > Date.parse(endDate)) {
                    jAlert("End date must be later than start date", "Warning");
                    return false;
                } else {
                    $('#GoalcardSearchResult tbody').hide();
                    setTimeout(function () { $("#GoalcardSearchResult tbody").show(); }, 800);
                    $.post('@Url.Action("Search", "SearchNKI")', data, function (result) {

                        $("#GoalcardSearchResult tbody").empty();

                        result.forEach(function (goalcard) {

                            $("#GoalcardSearchResult tbody").append(
                                $('<tr/>', {
                                    click: function () {
                                        id = goalcard.Id;
                                        var url = '@Url.Action("AnswerForm", "AnswerNKI", new { id = "__id__"})';
                                        window.location.href = url.replace('__id__', id);

                                    },

                                    html: "<td>" + goalcard.Name + "</td><td>" + goalcard.Customer + "</td><td>" + goalcard.PlannedDate + "</td><td>" + goalcard.CompletedDate + "</td>"
                                }));
                        });
                        $("#GoalcardSearchResult").tablesorter();
                    });
                    return false; 
                }
            });
        }); 
```

感谢您的帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T19:16:34.060

我猜在用户点击排序按钮之前，tablesorter 已经被初始化了。在这种情况下，请替换此代码：

```
$("#GoalcardSearchResult").tablesorter(); 
```

有了这个：

```
$("#GoalcardSearchResult").trigger('update'); 
```

# javascript - 如何在新窗口中打开

> ID：10242908
> 
> 赞同：3
> 
> 时间：2012-04-20T08:41:22.410
> 
> 标签：javascript, asp.net

我还有一个问题:(这是我的脚本

```
<script type="text/JavaScript">
    function first()
    {
        var first = confirm("Are you sure you want to navigate away from this page?");
            if (first)
                window.location = "http://www.yahoo.com.sg"
            else
            window.close;
    }
    function second()
    {
        var second = confirm("Are you sure you want to navigate away from this page?");
        if (second)
            window.location = "http://www.google.com"
        else
            window.close;
    }
</script>

<p><b>Click the following link to enter yahoo</b></p>
<p><a href="javascript:first()"title="Opens in an external website in a new window">yahoo</a></p>

<p><b>Click the following link to check google</b></p>
<p><a href="javascript:second()" title="Opens in an external website in a new window">google</a></p> 
```

它不会在新窗口中打开。请我需要一些帮助。有什么建议或建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T08:43:27.537

试试[`window.open`](https://developer.mozilla.org/en/DOM/window.open)。这将打开一个新窗口：

```
window.open("http://www.google.com"); 
```

也可以看看：

*   [MDN：`window.open`可用性问题](https://developer.mozilla.org/en/DOM/window.open#Usability_issues)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:54:00.820

使用该`window.open`方法并指定`_blank`为目标：

```
window.open('http://www.yahoo.com.sg', '_blank'); 
```

这将在新窗口或新选项卡中打开页面，具体取决于浏览器中的用户设置。

如果您希望它始终在新的弹出窗口中打开，您可以为窗口指定具有宽度和高度的参数字符串。但是，大多数浏览器会阻止这种从不同域打开页面的弹出窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:46:45.453

如果您在新窗口中打开，则无需与用户确认导航离开。

```
function first()
    {
           window.open("http://www.yahoo.com.sg")
    }
    function second()
    {
        window.open"http://www.google.com")
    } 
```

# php - PHP 检测并存储返回的电子邮件

> ID：10242909
> 
> 赞同：1
> 
> 时间：2012-04-20T08:41:23.653
> 
> 标签：php, mysql, email

我正在使用带有发件人地址的 PHP mail() 发送一些通讯。

由于某些我将不得不检查的原因，这些新手中的许多都被退回并向我的发件人地址返回“失败通知”。

目前，这些电子邮件只是返回到我们阅读发件人电子邮件的电子邮件客户端。

我希望我可以为我的营销人员存储和管理所有这些“失败”的电子邮件地址。当然，从电子邮件客户端复制/粘贴每个电子邮件地址非常困难（它们有数百个）。

有没有办法通过 PHP 检测和捕获这些地址以存储在 Mysql 表中？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:54:10.180

您无法从`mail()`命令中获取有关失败消息的信息，因为这只会将消息发送到本地邮件服务器进行处理。

您将需要实现一个 cronjob 或以其他方式定期调用的脚本来检查邮箱。因此，您需要使用 PHP 中的[IMAP 和 POP 函数](http://php.net/manual/en/book.imap.php)来获取消息并处理失败的消息。

或者，您需要查看邮件服务器的手册，以检查是否可以包含一些代码以在服务器遇到故障时执行。所以邮件服务器本身会在你的数据库中标记失败的消息，或者至少调用一个脚本来为它提供失败的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:09:25.670

对此的习惯解决方案是 VERP [http://cr.yp.to/proto/verp.txt——](http://cr.yp.to/proto/verp.txt)基本上，为每条消息使用唯一的信封发件人；从您尝试发送到的地址发送回该特定地址的任何内容都是退回的。

例如，如果您的列表被调用`fnord@example.org`并且您将消息 12345 发送到，`djb@example.net.invalid`那么该消息的信封发件人将类似于`fnord-12345-djb=example.net.invalid@example.org`并且您的 MTA 应配置为将任何电子邮件路由到此地址到正确的位置（删除失败地址的脚本从你的数据库，或其他）。

当然，如果您使用适当的邮件列表管理器（而且您应该！），它已经包含处理所有这些的逻辑；这应该是一个简单的配置问题。

# python - 在 Django 中引入冻结列

> ID：10242913
> 
> 赞同：-3
> 
> 时间：2012-04-20T08:41:45.963
> 
> 标签：python, django, django-views

我正在寻找一个 python 代码，当我横向滚动时，它允许我冻结网页中的前两列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:42:06.757

这不是 Django。这是一个 javascript/css/html 问题。

首先，您必须更清楚地说“列”是什么意思。人们经常使用相似的词来描述不同的事物。尽量说清楚。举个例子。粘贴一些代码。在寻求帮助之前，您是否先尝试过自己？你 bing/google 你的问题吗？你发现了什么。

你提供的细节越多，你得到的答案就越好。它是如此简单。

话虽如此，Django 主要是一个后端框架。Django 帮助您在将数据显示给用户之前对其进行建模。我怀疑你会根据你的要求找到一个 django 小部件[3]。

最后，如果你真的需要从 Django 开始，最好的地方是它的很棒的文档[1]。然后你可以得到一本书。我建议这个[2]。虽然它有点旧纹理，但它为您提供了一个简单的逐步过程，以便在 django 中构建您的第一个站点。它甚至涵盖了一些我相信你会需要的 jQuery。

希望有帮助。

[1] [https://docs.djangoproject.com/en/1.4/](https://docs.djangoproject.com/en/1.4/)

[2] [http://www.amazon.com/Django-Website-Development-Ayman-Hourieh/dp/1847196780/ref=sr_1_4?s=books&ie=UTF8&qid=1334921864&sr=1-4](https://rads.stackoverflow.com/amzn/click/com/1847196780)

[3] [http://djangosnippets.org/](http://djangosnippets.org/)

# cookies - 如何使用 --header 选项通过 Siege 发送 cookie？

> ID：10242914
> 
> 赞同：9
> 
> 时间：2012-04-20T08:41:50.720
> 
> 标签：cookies, webserver, load-testing, stress-testing

我刚刚开始使用 Siege 在新的 Web 服务器上进行负载/压力测试。我正在尝试测试我最重资源/性能的脚本，但该脚本需要 cookie。在 siege 中使用 --header 选项的正确格式是什么？

我试过这个没有运气：

siege --header="Set-Cookie: PHPSESSID=--COOKIE--; iptoken=--COOKIE--" [http://www.myurl.com/script.php](http://www.myurl.com/script.php) ,

我找不到关于此的文档，因此任何想法/建议将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T17:17:25.320

答案是使用`--header="Cookie: --COOKIE_DATA--"`（参考[wiki.wsmoak.net/cgi-bin/wiki.pl?Siege](http://wiki.wsmoak.net/cgi-bin/wiki.pl?Siege)）。

# python - App Engine 分片计数器和高复制数据存储

> ID：10242918
> 
> 赞同：4
> 
> 时间：2012-04-20T08:42:00.703
> 
> 标签：python, google-app-engine, google-cloud-datastore, eventual-consistency

我将 App Engine 与最终一致的高复制数据存储一起使用。我也在使用分片计数器。

当我查询所有分片并将它们相加时，我可以假设计数是强一致的吗？也就是说，下面的代码会返回我的分片计数的准确总和吗？

```
sum = 0
for counter in Counter.all():
    sum += counter.count 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T00:08:34.440

不。即使按键获取，您也不能依赖高度一致的计数（尽管它会比其他方式更新）。批量获取操作不是事务性的，因此可以在您获取它们时更新其中一个分片。

然而，在这里要求强一致性是没有意义的。首先，在像 App Engine 这样的分布式系统中，同时性在最好的时候是一个模糊的概念——同步需要协调，这会产生瓶颈。其次，即使您可以获得计数器值的交易总和，但在您获取它的那一刻它已经过时了，因为无论如何在您阅读它们之后计数器可以立即更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:31:18.480

如果你想创建强一致的分片计数器，你应该使用键，而不是查询。

```
#for getting
total = 0
shard_keys = []
for i in range(20): #20 shards
    key_name = shard + str(i)
    shard_keys.append(db.Key.from_path('Counter', key_name))
counters = db.get(shard_keys)
for counter in counters:
    if counter:
        total += counter.count

#for incrementing a shard
import random
key_name = 'shard' + str(int(random.random()*20)) #choose a random shard
counter = Counter.get_by_key_name(key_name) #try to retrieve from datastore
if not counter:
    counter = Counter(key_name=key_name) #shard doesn't exist, create one
counter.count += 1
db.put(counter) 
```

在事务中执行递增以确保一致性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T16:18:26.113

您可以增加分片计数器总计当前状态的概率，但您不能（据我所知）将该概率提高到 100%。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T13:02:06.403

HRD 中的查询最终是一致的，因此您无法确定通过查询获得的实体是否已更新。如果查询依赖于正在更新的实体属性，则查询甚至可能找不到实体。

# zend-form - zend-form-validation

> ID：10242920
> 
> 赞同：0
> 
> 时间：2012-04-20T08:42:06.633
> 
> 标签：zend-form

我已经在 zend 中制作了表单，并为其添加了验证，如下所示

```
$firstname = $this->createElement('text','firstname');
$firstname->setLabel('First Name:')
              ->setRequired(true); 
```

验证正在工作并给出错误消息->“值是必需的，不能为空。”

但我希望它必须说->“名字是必需的，不能为空。”

我不知道该怎么做。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:47:29.117

这应该完全符合您的要求：

```
$firstname = $this->createElement('text', 'firstname');
$firstname = $this->getElement('firstname')
                  ->setRequired(true)
                  ->addValidator('NotEmpty', true);
$firstname->getValidator('NotEmpty')
          ->setMessage('First Name is required and can't be empty.'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T23:25:52.507

如果您只进行一次验证，您可以这样做：

```
$firstname = $this->createElement('text','firstname');
$firstname->setLabel('First Name:')
          ->setRequired(true);
          ->addErrorMessage('First Name is required and can't be empty.'); 
```

# git - 如何关闭分支而不将其从 git 的历史记录中删除？

> ID：10242924
> 
> 赞同：62
> 
> 时间：2012-04-20T08:42:21.423
> 
> 标签：git, branch

我想提交并关闭其分支，**而不将其从历史记录**中删除。

使用 mercurial 我会`commit --close-branch`，然后`update`到前一个，然后继续工作。与 git ......我很困惑。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-04-20T09:05:41.570

在 Git 中没有完全等同于关闭分支的方法，因为 Git 分支比 Mercurial 中的更轻量级。他们的 Mercurial 等价物是书签多于分支。

如果我理解正确，在 Mercurial 中关闭一个分支大致会使它从分支列表中消失，因此您可以通过归档它来实现相同的目的。通常[的做法](https://stackoverflow.com/q/1307114/11343)是将其提示标记为存档，然后将其删除：

```
git tag archive/<branchname> <branchname>
git branch -d <branchname>
git checkout master 
```

分支将被删除，稍后可以通过签出标签并重新创建分支来检索：

```
git checkout archive/<branchname>
git checkout -b new_branch_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-08T23:35:39.900

我创建了一个 powershell 脚本来自动化这个过程。此脚本存档 3 个月或更长时间的分支。您可以更改正则表达式（第 11 行）以匹配您的存档策略。

```
#Get all branches on remote and place in array. Format of strings in array is for example "3 months ago|origin/branch-name"
$branches = git branch -r --sort=-committerdate --format="%(committerdate:relative)|%(refname:short)|%(refname:lstrip=3)"
#Loop through all branches
ForEach ($branch in $branches)
{
  #split the branch between last commit time and branch name
  $split = $branch.Split("|")
  try
  { 
    #check if the last commit date is 4 months or more
    if($split[0] -match "((^([4-9]|10|11|12) month)|year)")
    {
      $splitBranch = $split[1].Split("/")
      #tag the branch
      git tag archive/$split[2] $split[1]
      #delete the branch
      git push --delete $splitBranch[0] $split[2]
      #add the archived branch name to a text file
      Add-Content .\archived.txt $split[1]
    }
  }
  catch
  {
    #log any branches that failed
    Add-Content .\archiveFailures.txt $split[1]
  }
}
#push all newly created tags
git push --tags

#to restore archived branch
#git checkout -b <branchname> archive/<branchname> 
```

# android - 刷新放大的图像，同时保持它在android中的放大

> ID：10242927
> 
> 赞同：2
> 
> 时间：2012-04-20T08:42:25.483
> 
> 标签：android, imageview, zooming

谁能告诉我如何在保持图像缩放的同时更改图像视图中的图像？以前的和新的图像具有相同的大小。对于缩放功能，我使用来自[https://stackoverflow.com/a/7458910/1346016](https://stackoverflow.com/a/7458910/1346016)的代码 我尝试使用 setimagebitmap、setimagedrawable 和其他一些，但它们似乎都不起作用。每次我刷新图像时，图像大小都会恢复到原来的大小。

谢谢你

这是我的代码的样子：

```
TouchImageView img,buffer;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // set multi touch zooming
    img = new TouchImageView(this);
    img.setMaxZoom(4f);
    Bitmap img1 = BitmapFactory.decodeResource(getResources(), R.drawable.blueprint);
    img.setImageBitmap(img1);

    // refresh image
    refreshImage();

    setContentView(img);
}
public void refreshImage() {
       handler.postDelayed(new Runnable() {
             public void run() {
                 Bitmap img1 = BitmapFactory.decodeResource(getResources(), R.drawable.blueprint);
                 Canvas newImg = new Canvas(img1);
                 newImg.drawBitmap(img1, 0f, 0f, null);
                 Paint inner = new Paint();
                 Paint outer = new Paint();            
                 inner.setARGB(255, 0, 138, 255);
                 outer.setARGB(100, 0, 138, 255);

                 newImg.drawCircle(axis[0], axis[1], 9, inner);
                 newImg.drawCircle(axis[0], axis[1], 50, outer);

                 buffer = img;
                 img.setImageBitmap(img1);
                 img.bmHeight = buffer.bmHeight;
                 img.bmWidth = buffer.bmWidth;
                 img.bottom = buffer.bottom;
                 img.setImageDrawable(buffer.getDrawable());
                 img.origHeight = buffer.origHeight;
                 img.origWidth = buffer.origWidth;
                 img.redundantXSpace = buffer.redundantXSpace;
                 img.redundantYSpace = buffer.redundantYSpace;
                 img.right = buffer.right;
                 img.saveScale = buffer.saveScale;
                 img.setImageMatrix(buffer.matrix);
                 img.setScaleType(ScaleType.MATRIX);
             }
         }, 2000);
} 
```

**编辑：**现在我尝试将更改图像的代码更改为：

```
m = img.matrix;
img.setImageBitmap(img1);
img.matrix = m;
img.setImageMatrix(m); 
```

但我仍然有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:23:19.383

您是否尝试在更改之前保存`Matrix`图像并在更改后重新应用`Matrix`到图像？

# java - 验证 AndroidManifest.xml 文件

> ID：10242929
> 
> 赞同：1
> 
> 时间：2012-04-20T08:42:31.673
> 
> 标签：java, android, xml, validation

我正在开发一个分析 android 应用程序的 Java SE 应用程序。

是否有任何架构/DTD 可用于验证 AndroidManifest.xml？如果找到命名空间定义，例如：

```
xmlns:android="http://schemas.android.com/apk/res/android" 
```

但是 schemas.android.com 无法解析为实际主机，因此那里没有架构文件:-(

注意：我**不想**在作为平台的 Android 上进行验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:06:40.107

尝试 android-sdk 附带的 aapt 工具。你可以执行

aapt 徽章命令从 Android apk 文件中找出 android manifest xml 的详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:13:06.143

**Android XML 没有 DTD/模式**，您必须依赖其他可以进行验证的工具，例如像 Naresh 解释的那样。

另请参阅[“Android 项目中 XML 文件的架构在哪里？”](https://stackoverflow.com/questions/605325/where-are-the-schemas-for-xml-files-on-an-android-project)

# git - Git 流和特定于客户端的功能

> ID：10242932
> 
> 赞同：6
> 
> 时间：2012-04-20T08:42:40.603
> 
> 标签：git, git-flow

您建议如何在[Git-flow](https://github.com/nvie/gitflow)或一般的 Git 中管理特定于客户端的功能和更改请求？特定于客户端的功能是否应该位于专用于客户端的单独分支中？（每个客户端都有自己的开发分支。）还是应该在单独的存储库中？（每个客户端都有一个专用的存储库，主存储库是我们的主存储库。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T20:50:43.990

听起来你有一个所有客户端都使用的代码库，然后你有一些针对客户端特定功能的“黑客”。

在我看来，您将拥有 master 分支上的所有“基本”代码。所有客户端都有一个特定于客户端的分支。小心并知道您的更改是在哪里进行的。

每隔一段时间，确保你重新定位你的客户端分支，基本上将它们带到基本代码，然后在此之上重放它们的所有特定更改。

重新定基可能会非常令人困惑，直到您看到它在起作用。

为了清楚起见，使用顺序提交号。提交在现实生活中不是数字

```
大师在提交 10
 \
   分支有提交 10、11、12、13、14、15（注意它也有提交 10）
|
Master 提交 16、17

当你变基时：
  大师有10、16、17。
  分支有 10, 16, 17, 11, 12, 13, 14, 15

```

这里的顺序非常重要。Rebase 将分支回退到 10，应用 16 和 17，然后重放其对 11、12、13、14 和 15 的更改。

此时，只要没有冲突，分支与 master 是最新的，并且具有客户端特定的更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T19:51:42.010

我将为您的基础和客户创建一个单独的存储库。客户将有一个基地，该基地将有一个远程分支，作为您的基地。当客户需要新版本时，这种方式会容易得多。如果您将所有客户端放在一个存储库中，则必须在启动 git flow 发布之前手动更改集成/开发人员分支。这将限制您为不同客户处理多个版本的能力。

# olap - 总和和不同计数措施（星型模式设计公案）

> ID：10242933
> 
> 赞同：0
> 
> 时间：2012-04-20T08:42:41.610
> 
> 标签：olap, business-intelligence, pentaho, star-schema

我是数据仓库设计的初学者。我有一些理论，但最近遇到了一个 OLAP 多维数据集设计的实际问题。我使用星型模式。
假设我有 2 个维度表和 1 个事实表：

* * *

**维度地名录：**
维度
_id国家名称
省份名称
地区名称

* * *

**维度设备：**
dimension_id
device_category
device_subcategory

* * *

**事实表：**
gazetteer_id
device_dimension_id
hazard_id（测量列）
area_m2（测量列）

* * *

一个“业务对象”（实际上是一个雷区）可以有多个设备，位于一个位置（地名词典）并占据 X 平方米。
因此，为了了解存在哪些设备类别，我为每个处于危险中的设备创建了一个事实，如下所示：

```
+--------------+---------------------+-----------------------+-----------+
| gazetteer_id | device_dimension_id | hazard_id             | area_m2   |
+--------------+---------------------+-----------------------+-----------+
| 123          | 321                 | 0a0a-502c-11aa1331e98 | 6000      |
+--------------+---------------------+-----------------------+-----------+
| 123          | 654                 | 0a0a-502c-11aa1331e98 | 6000      |
+--------------+---------------------+-----------------------+-----------+
| 123          | 987                 | 0a0a-502c-11aa1331e98 | 6000      |
+--------------+---------------------+-----------------------+-----------+ 
```

我将度量“危害数”定义为 hazard_id 的不同计数。
我还将“占用的总面积”度量定义为 area_m2 的总和。
现在我可以使用维度地名词典和设备，并知道给定维度成员有多少危险。
但问题是 area_m2：因为它被定义为一个总和，它给出的值是实际面积的 n 倍，其中 n 是危险对象的第 th 个设备数。例如，上面的数据将给出 18000 平方米。
你将如何解决这个问题？

我正在使用 Pentaho 堆栈。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T01:22:37.227

[移自评论]

如果一个 hazard-id 是一个雷区，并且您正在按地区（地名）查看地雷和按地名的雷区大小，也许您可​​以制作一个 Hazard 维度，它包含 Hazard 的区域；或者可能在DeviceDimension表中创建一个Null-device条目，并且只有Null-device条目获取area_m2设置，真实设备获取area_m2=0。

如果您需要回答以下问题：包含设备 321 的雷区总面积，则第二种方法不会轻易回答这些问题，这表明制作危险维度可能是更好的方法。

我还会考虑添加一个设备计数事实，它可能具有每种危害的每种类型的设备数。

# iphone - 刷新后表格视图单元格中的文本标签不会调整大小

> ID：10242937
> 
> 赞同：1
> 
> 时间：2012-04-20T08:42:48.873
> 
> 标签：iphone, ios

当我从 viewDidLoad 中的静态 tableview 单元格初始化 textlabel 时，一切都按原样显示。但是，当我在按下按钮后稍后更改 textvalue 时，如果文本大于 viewDidLoad 中设置的原始文本，则文本将被剪裁。当新文本较短时，它会正确显示。

有人知道这个问题的解决方案吗？

- 编辑 -

解决了：

在更改文本值后尝试调用标签的 setNeedsLayout 方法 - 这可能会调整标签的大小。–

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:08:39.033

将标签的adjustsFontSizeToFitWidth 属性设置为YES。当文本变长时，它会使字体变小。还将 minimumFontSize 属性设置为比默认值更小的值。

# java - 从 WiFi 连接切换到 3g 会导致连接挂起？

> ID：10242942
> 
> 赞同：3
> 
> 时间：2012-04-20T08:43:11.807
> 
> 标签：java, android, wifi, httpurlconnection, 3g

我有一个连接到 Web 服务的应用程序。只要我在应用程序的生命周期内始终忠实于我的连接类型，我就可以使用 WIFI 或 3G 连接到 Web 服务任意次数而不会出现任何问题。那就是如果我不从WIFI切换到3G。如果我从 WIFI 切换到 3G，我将无法再得到响应。我的连接一直在等待响应。

我尝试了以下 4 个场景。我只对第三种情况有问题。可能是什么问题呢？

**第一种情况：连接始终在 WIFI 上（好的）**

1.  应用程序使用 WIFI 连接到 Web 服务。
2.  已成功收到响应。
3.  应用程序使用 WIFI 再次连接到 Web 服务。
4.  响应已成功接收。

**第二种情况：连接始终在 3G 上（好的）**

1.  应用程序使用 WIFI 连接到 Web 服务。
2.  已成功收到响应。
3.  应用程序使用 WIFI 再次连接到 Web 服务。
4.  响应已成功接收。

**第三种情况：连接从WIFI切换到3G（无响应）**

1.  应用程序使用 WIFI 连接到 Web 服务。
2.  已成功收到响应。
3.  连接已切换到 3G。WIFI被禁用。3G 已启用。
4.  应用程序再次使用 3G 连接到 Web 服务。
5.  没有响应或收到错误。应用程序继续等待响应。调用之前显示的最后一个日志`getResponseCode`。

**第四种情况：连接从 3G 切换到 WIFI（Ok）**

1.  应用程序使用 3G 连接到 Web 服务。
2.  已成功收到响应。
3.  连接已切换到 WIFI。3G 被禁用。WIFI已启用。
4.  应用程序使用 WIFI 再次连接到 Web 服务。
5.  响应已成功接收。

我的猜测是默认情况下，`HttpURLConnection`认为 WIFI 是比 3G 更好的连接类型。所以当连接从WIFI切换到3G时，`HttpURLConnection`拒绝承认3G，仍然尝试使用WIFI连接。另一方面，`HttpURLConnection`允许从 3G 切换到 WIFI，因为 WIFI 是更好的连接类型。我对此是否正确？如果是这样，我如何允许从 WIFI 切换到 3G？

下面是我的代码片段：（我每次连接到 Web 服务时都会调用它。）

```
//open new connection
httpsURLConnection = (HttpURLConnection) ((new URL(url)).openConnection());
httpsURLConnection.setDoInput(isDoInput);
httpsURLConnection.setDoOutput(isDoOutput);

try
{
    //supply parameters
    OutputStreamWriter wr = new OutputStreamWriter(httpsURLConnection.getOutputStream());
    wr.write(data);
    wr.flush();

    if(httpURLConnection != null)
    {
        if (httpsURLConnection.getResponseCode() == HttpsURLConnection.HTTP_OK) //connection hangs here
        {
            //some code
        }
        else
        {
            //some code
        }
    }

}catch(Exception e)
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:30:23.960

我不确定为什么，但添加`System.setProperty("http.keepAlive", "false")`代码可以解决问题。

根据 Android 开发者博客 ( [androids-http-clients](http://android-developers.blogspot.ca/2011/09/androids-http-clients.html) )，`HttpURLConnection`在 Froyo 之前有一个错误，可以通过禁用连接池来解决，就像上面一样。但是，我使用的是 Gingerbread，所以我不确定为什么 HttpURLConnection 在我的应用程序中仍然行为不端。

*致其他人：如果您可以提供更多解释，请不要犹豫编辑我的帖子。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:05:29.063

当您在 wifi 上建立连接并切换回 3G 时，您是否看到任何连接断开异常？

据我所知，如果您在 wifi 上打开连接，则相同的连接不能用于 3G。您需要拆除现有连接并在 3G 上重新建立新连接。

我猜你的问题可能是因为你没有为你的请求设置任何连接超时，因此当连接断开时，HttpUrlConnection 需要很长时间才能意识到你的连接丢失。

我已经将一些默认超时的http连接上的实用程序库放在一起，看看这是否可以帮助你

[https://github.com/nareshsvs/android-libraries](https://github.com/nareshsvs/android-libraries)

# vi - Vi Editor 一个完整的块删除

> ID：10242947
> 
> 赞同：0
> 
> 时间：2012-04-20T08:43:30.210
> 
> 标签：vi

几天以来我一直在使用 vi 编辑器。我发现这个编辑器对用 c 编程非常有用。我有一个他以下的问题。

是否有任何选项可以删除 vi ediotr 中的块。块是指 if-block 或 while-block 还是 for 块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:15:38.783

如果你有一个空行分隔的块，你可以做

```
d} 
```

d - 删除 } - 直到块结束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:50:29.557

我不知道是否有办法完全按照您的意愿行事（编辑器检测到逻辑代码块并标记它）。

您可以做的（仅当您使用 vi 改进（vim）时）是进入可视模式（“v”键），用箭头（或 h、j、k、l）突出显示代码，然后按“d”删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:54:01.333

我曾经使用（在左括号上）导航到结束块`%`，设置标记（`ma`），导航回到块的开头（仍然使用`%`或按`''`）然后删除直到标记（`d'a`）

如果您使用 VI 的改进版本（即 VIM），则有更快的方法。

# javascript - ajax调用后jquery在IE中不起作用

> ID：10242953
> 
> 赞同：1
> 
> 时间：2012-04-20T08:44:12.050
> 
> 标签：javascript, jquery, ajax

我正在使用 Organictabs 插件，我在每次页面加载时都以这种形式启动它：

```
 $(function() {
        $("#example-one").organicTabs();

        $("#example-two").organicTabs({
            "speed": 200
        });    
    }); 
```

这些选项卡在所有浏览器中都可以正常工作，然后我执行一个 ajax 调用，它使用以下代码重新生成选项卡：

```
if(xmlHttp.readyState == 4)
{
  HandleResponse(xmlHttp.responseText,'page-wrap');

  $(function() {
        $("#example-two").organicTabs({
            "speed": 200                
        });                   

  });
} 
```

同样，选项卡已正确重新生成，并且在所有浏览器中一切正常，除了在 IE 中，当我尝试切换选项卡时它不起作用。我正在启动 jquery 代码 onreadystate 更改，但我真的不知道 IE 有什么问题？

任何帮助将不胜感激。

祝一切顺利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:13:46.450

问题在于 IE 如何处理 ("a.sample_class").attr("href") 属性。在 Chrome/FF 中返回相对路径（在这种情况下只是锚点#tag），而在 IE 中，在我调用 ajax 页面后，返回的是绝对路径（http://www.mysite.com/#标记），因此试图在当前页面中找到整个锚（字符串）。

有关此问题的更多信息，您可以在本文中阅读：[http ://www.glennjones.net/2006/02/getattribute-href-bug/](http://www.glennjones.net/2006/02/getattribute-href-bug/)

希望这对某人有所帮助，因为这确实花了我几天的时间

# javascript - 使用主干视图在模板上动态添加 ID 和类

> ID：10242956
> 
> 赞同：4
> 
> 时间：2012-04-20T08:44:39.277
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我想在我的视图模板中添加一个 ID 和 CLASS 属性。这是我尝试但失败的方法。

```
$("#login").html( _.template( LoginTemplate ) );
        this.loginmodel = new LoginModel();
        this.loginview = new LoginView({
            el: $("#loginContainer"),
            model: this.loginmodel,
            className: "test"
        });

<div id="loginContainer">
    <div id="loginForm">
      <input class="user-input formContainerInput" id="username" placeholder="Username" required="required"/>
      <input class="user-input formContainerInput"  id="password" type="password" placeholder="Password" required="required"/>
      <a class="connection-btn" data-role="button">Connection</a>
      <a class="login-btn" data-role="button">Log In</a>
    </div> 
```

我想使用视图而不是 html 本身来分配 id 和 class。我将如何做？

# 更新

尝试#1

```
loginview: function(){
    $("#login").html( _.template( LoginTemplate ) );
    this.loginmodel = new LoginModel();
    this.loginview = new LoginView({
        id: "#loginContainer",
        model: this.loginmodel,
        attributes:{ id:'Test', class: "myClass otherClass" }
    });
}, 
```

它甚至在“类”部分显示 aptana 错误。

甚至在主视图上尝试过，因为上面的代码是父视图。

```
var LoginView = Backbone.View.extend({
    events: {
        "click .login-btn": "Login",
        "click .connection-btn": 'Connect',
    },
    initialize: function(){
        //some code here
    },
    attributes: {
        id:"test"
    }
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T08:58:59.507

使用[View.attributes](http://documentcloud.github.com/backbone/#View-attributes)怎么样。

您可以指定如下内容：

```
attributes: {
  id:     "myId",
  class:  "myClass otherClass"
} 
```

我没有尝试，但也许您也可以使用`functions`它来使其更加动态：

```
attributes: {
  id:     function(){ return "element-" + this.id; },
  class:  "myClass otherClass"
} 
```

请注意，这只会影响`view.el`DOM 元素.. 不会影响它的任何子元素。

### 更新

上述解决方案仅在`View.el`匿名时有效。

因此，我看到的唯一可以在您的具体场景中使用的解决方案是`View.el`直接通过 JavaScript 操作，`initialize()`如下所示：

```
initialize: function(){
  this.$el.attr( "id", "my-id" );
  this.$el.attr( "class", "myclass1 myclass2" );
}, 
```

[检查 jsfiddle](http://jsfiddle.net/fguillen/sxh4F/)`View.el`以了解操作属性的三种不同场景。

# java - 运行JUnit插件测试时出现java.lang.NoClassDefFoundError

> ID：10242962
> 
> 赞同：5
> 
> 时间：2012-04-20T08:45:23.150
> 
> 标签：java, eclipse, junit, eclipse-plugin, xtext

当我运行 JUnit 插件测试时，我不断收到**java.lang.NoClassDefFoundError**。

这是一些丢失的捆绑包，但我怀疑这是问题所在，因为我在运行插件时也得到了这些捆绑包，并且在那里一切正常。

```
!ENTRY org.eclipse.osgi 2 0 2012-04-20 10:27:45.533
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-04-20 10:27:45.533
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.help.base_3.6.2.v201202080800.jar/ was not resolved.
!SUBENTRY 2 org.eclipse.help.base 2 0 2012-04-20 10:27:45.533
!MESSAGE Missing required bundle org.apache.lucene_[2.9.0,3.0.0).

!ENTRY org.eclipse.osgi 2 0 2012-04-20 10:27:45.541
!MESSAGE The following is a complete list of bundles which are not resolved, see the prior log entry for the root cause if it exists:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-04-20 10:27:45.542
!MESSAGE Bundle org.eclipse.help.base_3.6.2.v201202080800 [54] was not resolved.
!SUBENTRY 2 org.eclipse.help.base 2 0 2012-04-20 10:27:45.542
!MESSAGE Missing required bundle org.apache.lucene_[2.9.0,3.0.0).
!SUBENTRY 2 org.eclipse.help.base 2 0 2012-04-20 10:27:45.542
!MESSAGE Missing optionally imported package org.eclipse.equinox.http.jetty_0.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-04-20 10:27:45.542
!MESSAGE Bundle org.eclipse.sdk_3.7.2.v201202080800 [78] was not resolved.
!SUBENTRY 2 org.eclipse.sdk 2 0 2012-04-20 10:27:45.542
!MESSAGE Missing required bundle org.eclipse.help.ui_[3.2.0,4.0.0).
!SUBENTRY 2 org.eclipse.sdk 2 0 2012-04-20 10:27:45.543
!MESSAGE Missing required bundle org.eclipse.help.base_[3.1.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-04-20 10:27:45.543
!MESSAGE Bundle org.eclipse.help.ui_3.5.101.r37_20110819 [126] was not resolved.
!SUBENTRY 2 org.eclipse.help.ui 2 0 2012-04-20 10:27:45.543
!MESSAGE Missing required bundle org.eclipse.help.base_[3.5.0,4.0.0).

!ENTRY org.eclipse.equinox.app 0 0 2012-04-20 10:27:45.551
!MESSAGE Product org.eclipse.sdk.ide could not be found. 
```

我得到的堆栈跟踪如下：

```
org.eclipse.swt.SWTException: Failed to execute runnable (java.lang.NoClassDefFoundError: junit/framework/TestCase)
    at org.eclipse.swt.SWT.error(SWT.java:4282)
    at org.eclipse.swt.SWT.error(SWT.java:4197)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:138)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4140)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3757)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.pde.internal.junit.runtime.NonUIThreadTestApplication.runApp(NonUIThreadTestApplication.java:54)
    at org.eclipse.pde.internal.junit.runtime.UITestApplication.runApp(UITestApplication.java:41)
    at org.eclipse.pde.internal.junit.runtime.NonUIThreadTestApplication.start(NonUIThreadTestApplication.java:48)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1386)
Caused by: java.lang.NoClassDefFoundError: junit/framework/TestCase
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClassHoldingLock(ClasspathManager.java:626)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:601)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:562)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:486)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:459)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:473)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClassHoldingLock(ClasspathManager.java:626)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:601)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:562)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:486)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:459)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:476)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClassHoldingLock(ClasspathManager.java:626)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:601)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:562)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:486)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:459)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:476)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:345)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1207)
    at org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner$BundleClassLoader.findClass(RemotePluginTestRunner.java:38)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClass(RemoteTestRunner.java:693)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClasses(RemoteTestRunner.java:429)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main(RemotePluginTestRunner.java:62)
    at org.eclipse.pde.internal.junit.runtime.PlatformUITestHarness$1.run(PlatformUITestHarness.java:47)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    ... 26 more
Caused by: java.lang.ClassNotFoundException: junit.framework.TestCase
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 87 more 
```

后来又是另一个

```
Exception in thread "WorkbenchTestable" org.eclipse.swt.SWTException: Failed to execute runnable (java.lang.NoClassDefFoundError: junit/framework/TestCase)
    at org.eclipse.swt.SWT.error(SWT.java:4282)
    at org.eclipse.swt.SWT.error(SWT.java:4197)
    at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:196)
    at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
    at org.eclipse.swt.widgets.Display.syncExec(Display.java:4683)
    at org.eclipse.ui.internal.testing.WorkbenchTestable.runTest(WorkbenchTestable.java:112)
    at org.eclipse.pde.internal.junit.runtime.PlatformUITestHarness.runTests(PlatformUITestHarness.java:69)
    at org.eclipse.ui.internal.testing.WorkbenchTestable$1.run(WorkbenchTestable.java:71)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoClassDefFoundError: junit/framework/TestCase
...
Caused by: java.lang.ClassNotFoundException: junit.framework.TestCase
... 
```

我将 junit 插件添加到我的 runco​​nfig 中。

有人可以指出我正确的方向吗？

**编辑：** 以下是“添加所需插件”为我添加的 junit 插件： ![在此处输入图像描述](../Images/027f96b1c6c906c8f040496efa9ac595.png) 我删除了对 junit4 的引用，并使用测试运行程序 JUnit3 开始了插件测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:15:57.623

我缺少的插件是

```
org.eclipse.xtext.xbase.junit
org.junit (3.8.2)
org.junit (4.8.2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:00:11.473

您添加了哪些 JUnit 插件？我注意到错误引用了 JUnit 3 或更早版本 ( `junit.framework.TestCase`)

JUnit 3 和 JUnit 4 类绝对不应该混合在一起 - 它通常可以工作，但可能会导致一些非常奇怪且难以发现的错误。

您还可以通过右键单击项目来检查您的项目，然后选择`Properties`，`Java Build Path`然后在选项卡下`Libraries`...您应该在那里找到您的 JUnit jar 文件 - 检查库的版本是否与您正在使用的版本兼容。

# android - ClassNotFoundException 当类在那里？

> ID：10242969
> 
> 赞同：0
> 
> 时间：2012-04-20T08:45:50.603
> 
> 标签：android, eclipse, classnotfoundexception

我有点坚持这一点。`ClassNotFoundException`即使有这样的课程，Android 也会抛出一个。

```
04-20 09:07:50.179: E/AndroidRuntime(525): FATAL EXCEPTION: main
04-20 09:07:50.179: E/AndroidRuntime(525): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.company.app/com.company.app.Main}: java.lang.ClassNotFoundException: com.company.app.Main
04-20 09:07:50.179: E/AndroidRuntime(525):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
04-20 09:07:50.179: E/AndroidRuntime(525):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-20 09:07:50.179: E/AndroidRuntime(525):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-20 09:07:50.179: E/AndroidRuntime(525):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-20 09:07:50.179: E/AndroidRuntime(525):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 09:07:50.179: E/AndroidRuntime(525):  at android.os.Looper.loop(Looper.java:137)
04-20 09:07:50.179: E/AndroidRuntime(525):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-20 09:07:50.179: E/AndroidRuntime(525):  at java.lang.reflect.Method.invokeNative(Native Method)
04-20 09:07:50.179: E/AndroidRuntime(525):  at java.lang.reflect.Method.invoke(Method.java:511)
04-20 09:07:50.179: E/AndroidRuntime(525):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-20 09:07:50.179: E/AndroidRuntime(525):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-20 09:07:50.179: E/AndroidRuntime(525):  at dalvik.system.NativeStart.main(Native Method)
04-20 09:07:50.179: E/AndroidRuntime(525): Caused by: java.lang.ClassNotFoundException: com.company.app.Main
04-20 09:07:50.179: E/AndroidRuntime(525):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
04-20 09:07:50.179: E/AndroidRuntime(525):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-20 09:07:50.179: E/AndroidRuntime(525):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-20 09:07:50.179: E/AndroidRuntime(525):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
04-20 09:07:50.179: E/AndroidRuntime(525):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
04-20 09:07:50.179: E/AndroidRuntime(525):  ... 11 more 
```

有这样一个类叫做`Main`in `Main.java`。

`public class Main extends FragmentActivity`这是在包中`com.company.app`。

它以前可以工作，但是当我今天重新开始使用该应用程序时，它就停止了工作。我不知道发生了什么。

它在 Manifest 中正确定义。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.company.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="4" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:theme="@android:style/Theme.Light" >
        <activity
            android:label="@string/app_name"
            android:name=".Main" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**我尝试过的几件事：**

*   重启 Eclipse
*   重启模拟器
*   在模拟器中卸载并重新安装应用程序
*   清理项目。
*   检查是否`gen`并且`src`位于`Source`构建路径的选项卡中。

现在看来，我可能不得不放弃当前的项目并从头开始。

任何帮助将非常感激。

**更新：**

如果`Main`扩展`Activity`而不是`FragmentActivity`. 也许它与 Android 支持包有关？

**更新 2：**

我很确定是的。当我不使用支持包并使用`Fragment`Android 3.0 及更高版本中的普通类时，该应用程序运行良好。

* * *

现在问题已解决。:)

出于某种原因，Android 支持包将自身从`/libs`项目目录中删除，并从外部位置（`workspace`目录外）引用它。

我会将 Abdu Egal 的第一个答案标记为正确，因为他指导我走上了正确的道路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:49:33.677

您的主要活动的 onCreate 似乎有错误。如果是，您是否提供了 onCreate(Bundle savedInstance) ，请尝试清除它并查看它是否有效。

如果这不起作用，请尝试使用扩展 Activity 而不是扩展 FrameActivity。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:55:17.757

根据您的退出详细信息，我假设您忘记将 FrameActivity 声明为 AndroidManifest.xml ，请检查您的 AndroidManifest.xml 文件条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T08:58:30.490

我认为您以错误的方式使用了 FragmentActivity，我猜 FragmentActivity 应该是正常活动的一部分，见下文：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">
    <fragment
        android:name="com.mamlambo.tutorial.tutlist.TutListFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:id="@+id/tutlist_fragment"
        android:layout_weight="45">
    </fragment>
    <fragment
        android:name="com.mamlambo.tutorial.tutlist.TutViewerFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:id="@+id/tutview_fragment"
        android:layout_weight="55">
    </fragment>
</LinearLayout> 
```

取自此链接（第 9 部分）

[http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-21T14:12:11.253

右键单击您的项目文件夹 => 属性 => Java 构建路径 => 订购和导出 => 如果未选中，请选中“Android Private Libraries”框。做一个干净的。它有效！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-03T14:44:14.280

我在 MobilTuts 示例中遇到了同样的问题，问题出在支持库上。我已将构建目标更改为高于 10 的 API，例如 15，然后所有错误都消失了。

**项目属性 --> Android --> 项目构建目标 --> 设置为 15 .eg**

**建议：**至少将 manifest 中的 MIN API 设置为 8。

# dropbox-api - 如何使用 php-api 在 Dropbox 帐户中创建文件夹（如果不存在）？

> ID：10242970
> 
> 赞同：1
> 
> 时间：2012-04-20T08:45:56.253
> 
> 标签：dropbox-api, dropbox-php

我正在尝试学习保管箱 php-api。我已完成上传，但无法在 Dropbox 帐户中创建新文件夹（如果不存在）

**代码片段：**

```
// Create new directory
$create_new_folder = $dropbox->createFolder('new_folder','dropbox');

// Create a temporary file and write some data to it
$tmp = tempnam('/tmp', 'dropbox');
$data = 'This file was uploaded using the Dropbox API!';
file_put_contents($tmp, $data);

// Upload the file with an alternative filename
$put = $dropbox->putFile($tmp, 'abc.txt');

// Unlink the temporary file
unlink($tmp);

// Dump the output
var_dump($put); 
```

**错误：**

在第 18 行调用 C:\wamp\www\BenTheDesigner-Dropbox-b49576c\examples\putFile.php 中未定义的方法 Dropbox\API::createFolder()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:04:25.377

就用它

require_once('bootstrap.php');

// 创建新目录 $create_new_folder = $dropbox->create('docs','dropbox');

现在检查您的保管箱:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T19:48:34.183

此错误似乎表明您正在尝试调用不存在的名为“createFolder”的函数。检查图书馆：

[https://github.com/BenTheDesigner/Dropbox/blob/master/Dropbox/API.php](https://github.com/BenTheDesigner/Dropbox/blob/master/Dropbox/API.php)

看起来该函数实际上只是命名为“create”：

```
/**
 * Creates a folder
 * @param string New folder to create relative to root
 * @return object stdClass
 */
public function create($path)
{ 
```

# jquery - 如何在 jQuery 插件中公开公共函数的所有属性

> ID：10242971
> 
> 赞同：0
> 
> 时间：2012-04-20T08:45:58.423
> 
> 标签：jquery, jquery-plugins

这是我的插件（试图让设计师轻松地将 Flowplayer 添加到我的网站）

```
 (function ($) {
     $.fn.irvVideoPlayer = function (options) {

         var settings = $.extend({
             'fpKey': '#@12345678905',
             'videoPath': 'path-to-my-video.mp4',
             'seekTo': 1,
             'autoPlay': true,
             'src': "/flash/flowplayer/flowplayer.commercial-3.2.9.swf"
         }, options);

         return this.each(function () {

             var $this = $(this);

             var firstTimeVisitor, playedOnce;

             firstTimeVisitor = function () {
                 if ($.cookie("videoplayerhome") == null) {
                     firstTimeVisitor = null;
                     $.cookie("videoplayerhome", "Video Loaded", {
                         path: "/",
                         expires: 30
                     })
                 } else {
                     this.seek(settings.seekTo).pause();
                     $.cookie("playedOnce", "User Pressed Play");
                 }
             }

             playedOnce = function () {
                 if ($.cookie("playedOnce") == null) {
                     playedOnce = null
                 } else {
                     $f().seek(0);
                     $.cookie("playedOnce", null);
                 }
             };

             fpPlayer = {
                 src: settings.src,
                 wmode: "transparent"
             };

             this.fpConfig = {
                     key: settings.fpKey,
                     plugins: {
                         controls: {
                             autoHide: false,
                             background: "#272D6A",
                             backgroundGradient: "none"
                         },
                         lighttpd: {
                             url: "/flash/flowplayer/flowplayer.pseudostreaming-3.2.9.swf"
                         }
                     },
                     clip: {
                         provider: "lighttpd",
                         autoBuffering: true,
                         ipadUrl:  settings.videoPath + "/playlist.m3u8",
                         autoPlay: settings.autoPlay
                     },
                     onStart: firstTimeVisitor,
                     onResume: playedOnce,
                     playlist: [{
                         url: settings.videoPath
                     }],
                     canvas: {
                         background: "#000000",
                         backgroundGradient: "none"
                     }
                 }

             $(this, fpPlayer, this.fpConfigSetup()).ipad();

         });

         return this.initialize();

     };
 })(jQuery); 
```

我可以像这样使用这个插件：

```
$('#homePageVideo').irvVideoPlayer({
seekTo: 10
}); 
```

太好了！但有时我需要访问 fpConfig 中设置的所有属性，并且希望能够执行以下操作：

```
fpConfig.plugins.controls.all = false;
fpConfig.plugins.controls.play = true;
fpConfig.plugins.controls.scrubber = true;
fpConfig.canvas.background = "#444444"
// etc.... 
```

# c# - 如何克隆具有内部委托的对象

> ID：10242973
> 
> 赞同：2
> 
> 时间：2012-04-20T08:46:08.717
> 
> 标签：c#, visual-studio-2010, .net-4.0

我为化学分析仪器编写了一个序列转换器。我将每一行视为一个对象，将该对象的每个字段视为另一个对象。当将一行添加到列表中时，我需要对某些字段对象（例如订单编号）进行一些更新，因此我实现了一个委托，该委托指向该行中的每个字段对象。当我尝试克隆行对象时会出现问题，委托仍指向原始对象并仅更新字段成员。我试图取消注册克隆上的侦听器并将其注册回来，但它仍然在源对象上运行代码。我是否应该取消注册所有侦听器，然后进行克隆并将其注册回原点和克隆？做这个的最好方式是什么？

第二个问题：我尝试使用 Delegate.RemoveAll 函数，但不知道要传递什么。它说目标和方法作为代表。有人用过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:07:30.127

使用委托使对象有状态而不是无状态。为了实现无状态对象，它需要它的所有属性都是自包含的，这样克隆操作就可以做到这一点，是一个克隆而不是原始对象。

由于它是一个有状态的对象，因此需要创建一个管理对象（或复制构造函数），它可以巧妙地遍历原始对象并重新创建新对象，而无需原始对象的委托，而是它自己*的正确委托。*

# ghostscript - 如何使用 ghostscript 将 CMYK eps 转换为 CMYK jpeg？

> ID：10242974
> 
> 赞同：2
> 
> 时间：2012-04-20T08:46:13.463
> 
> 标签：ghostscript

Ghostscript 在将 CMYK eps 转换为 jpeg 时将 colospace 更改为 RGB。问题是在转换过程中保持颜色空间不变。提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T12:16:20.387

假设您要将EPS 中可能存在的任何 RGB 转换为 CMYK，请在 Windows 上使用此命令*：*

```
gswin32c.exe ^
   -o c:/path/to/output-cmyk.jpeg ^
   -sDEVICE=jpegcmyk ^
    input-rgb.eps 
```

这在 Linux/Unix/MacOSX 上：

```
gs \
   -o /path/to/output-cmyk.jpeg \
   -sDEVICE=jpegcmyk \
    input-rgb.eps 
```

请注意，默认情况下，Ghostscript 使用 72 dpi 的分辨率输出 JPEG。如果您想将其更改为 300 dpi，请添加`-r300`到命令行。

# c# - 自定义组件属性具有唯一值

> ID：10242975
> 
> 赞同：2
> 
> 时间：2012-04-20T08:46:23.280
> 
> 标签：c#, winforms, textbox, custom-controls

我通过覆盖 TextBox 组件实现了自定义控件。它有一个名为“DbColumn”的自定义属性。我希望它像 TextBox 上的“名称”属性一样，这是一个表单不能在两个控件上具有具有相同“DbColumn”值的组件。

有没有办法将属性设置为在一个表单中具有唯一值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:53:53.127

您可以在构造函数中使用随机数或计数器对其进行初始化。如果选择计数器，则需要检查该类的所有其他对象，找到最大的数字并使用该数字加 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:56:26.277

如果运行时检查对您来说足够了，请尝试实现`System.ComponentModel.ISupportInitialize`并将检查逻辑添加到`EndInit()`：

```
public class MyTextBox : TextBox, ISupportInitialize
{
     ...
     public string DbColumn { get; set; }

     public void BeginInit() { }
     public void EndInit()
     {
         bool duplicatesFound = Parent.Controls
             .OfType<MyTextBox>()
             .GroupBy(mtb => mtb.DbColumn)
             .Any(x => x.Count() > 1);

         if (duplicatesFound)
             throw InvalidOperationException("MyTextBoxes with duplicate DbColumn property found."); 
     }
} 
```

这在这种形式下相当昂贵，但可以很容易地优化为对每个父容器执行一次检查，而不是`n`多次（对于`n`MyTextBox 的数量）。

# search - 谷歌搜索结果改变链接颜色

> ID：10242982
> 
> 赞同：0
> 
> 时间：2012-04-20T08:47:03.457
> 
> 标签：search, google-search-console

我正在疯狂地改变我们在工作中实施的自定义谷歌搜索中的颜色......研究了几个小时，什么都没有......

我们正在使用这个：

```
<div id="search">
    <div id="results_007269481408127051346:b2b1fyxrklw"></div>
</div>
<script type="text/javascript">
    var googleSearchIframeName = "results_007269481408127051346:b2b1fyxrklw";
    var googleSearchFormName = "searchbox_007269481408127051346:b2b1fyxrklw";
    var googleSearchFrameWidth = 600;    
    var googleSearchFrameborder = 0;
    var googleSearchDomain = "www.google.com";
    var googleSearchPath = "/cse";
    var googleSearchResizeIframe = true;
</script>
<script type="text/javascript" 
src="http://www.google.com/afsonline/show_afs_search.js"></script> 
```

你知道我是否可以将任何其他 var 添加到这些参数中以更改搜索中默认出现的蓝色和绿色？

非常感谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:11:58.370

当您转到 Google 网站管理员工具，然后转到实验室 > 自定义搜索时，您可以配置新的搜索引擎。有 4 个选项卡，在第二个选项卡 Look and Feel 中，您可以自定义其外观。

应生成此样式表并将其放入您的样式表中应编辑其外观:)

```
<style type="text/css">
  .gsc-control-cse {
    font-family: Verdana, sans-serif;
    border-color: #FF0000;
    background-color: #999999;
  }
  .gsc-control-cse .gsc-table-result {
    font-family: Verdana, sans-serif;
  }
  input.gsc-input {
    border-color: #FFFFCC;
  }
  input.gsc-search-button {
    border-color: #999999;
    background-color: #FFCC00;
  }
  .gsc-tabHeader.gsc-tabhInactive {
    border-color: #E9E9E9;
    background-color: #E9E9E9;
  }
  .gsc-tabHeader.gsc-tabhActive {
    border-top-color: #FF9900;
    border-left-color: #E9E9E9;
    border-right-color: #E9E9E9;
    background-color: #FFFFFF;
  }
  .gsc-tabsArea {
    border-color: #E9E9E9;
  }
  .gsc-webResult.gsc-result,
  .gsc-results .gsc-imageResult {
    border-color: #000000;
    background-color: #660000;
  }
  .gsc-webResult.gsc-result:hover,
  .gsc-imageResult:hover {
    border-color: #009900;
    background-color: #CC33CC;
  }
  .gsc-webResult.gsc-result.gsc-promotion:hover {
    border-color: #009900;
    background-color: #CC33CC;
  }
  .gs-webResult.gs-result a.gs-title:link,
  .gs-webResult.gs-result a.gs-title:link b,
  .gs-imageResult a.gs-title:link,
  .gs-imageResult a.gs-title:link b {
    color: #666666;
  }
  .gs-webResult.gs-result a.gs-title:visited,
  .gs-webResult.gs-result a.gs-title:visited b,
  .gs-imageResult a.gs-title:visited,
  .gs-imageResult a.gs-title:visited b {
    color: #C0C0C0;
  }
  .gs-webResult.gs-result a.gs-title:hover,
  .gs-webResult.gs-result a.gs-title:hover b,
  .gs-imageResult a.gs-title:hover,
  .gs-imageResult a.gs-title:hover b {
    color: #999999;
  }
  .gs-webResult.gs-result a.gs-title:active,
  .gs-webResult.gs-result a.gs-title:active b,
  .gs-imageResult a.gs-title:active,
  .gs-imageResult a.gs-title:active b {
    color: #666666;
  }
  .gsc-cursor-page {
    color: #666666;
  }
  a.gsc-trailing-more-results:link {
    color: #666666;
  }
  .gs-webResult .gs-snippet,
  .gs-imageResult .gs-snippet,
  .gs-fileFormatType {
    color: #CCCCCC;
  }
  .gs-webResult div.gs-visibleUrl,
  .gs-imageResult div.gs-visibleUrl {
    color: #330000;
  }
  .gs-webResult div.gs-visibleUrl-short {
    color: #330000;
  }
  .gs-webResult div.gs-visibleUrl-short {
    display: none;
  }
  .gs-webResult div.gs-visibleUrl-long {
    display: block;
  }
  .gs-promotion div.gs-visibleUrl-short {
    display: none;
  }
  .gs-promotion div.gs-visibleUrl-long {
    display: block;
  }
  .gsc-cursor-box {
    border-color: #000000;
  }
  .gsc-results .gsc-cursor-box .gsc-cursor-page {
    border-color: #E9E9E9;
    background-color: #660000;
    color: #666666;
  }
  .gsc-results .gsc-cursor-box .gsc-cursor-current-page {
    border-color: #FF9900;
    background-color: #FFFFFF;
    color: #C0C0C0;
  }
  .gsc-webResult.gsc-result.gsc-promotion {
    border-color: #336699;
    background-color: #FFFFFF;
  }
  .gsc-completion-title {
    color: #666666;
  }
  .gsc-completion-snippet {
    color: #CCCCCC;
  }
  .gs-promotion a.gs-title:link,
  .gs-promotion a.gs-title:link *,
  .gs-promotion .gs-snippet a:link {
    color: #0000CC;
  }
  .gs-promotion a.gs-title:visited,
  .gs-promotion a.gs-title:visited *,
  .gs-promotion .gs-snippet a:visited {
    color: #0000CC;
  }
  .gs-promotion a.gs-title:hover,
  .gs-promotion a.gs-title:hover *,
  .gs-promotion .gs-snippet a:hover {
    color: #0000CC;
  }
  .gs-promotion a.gs-title:active,
  .gs-promotion a.gs-title:active *,
  .gs-promotion .gs-snippet a:active {
    color: #0000CC;
  }
  .gs-promotion .gs-snippet,
  .gs-promotion .gs-title .gs-promotion-title-right,
  .gs-promotion .gs-title .gs-promotion-title-right *  {
    color: #000000;
  }
  .gs-promotion .gs-visibleUrl,
  .gs-promotion .gs-visibleUrl-short {
    color: #008000;
  }</style> 
```

# visual-studio-2010 - Visual Studio 安装项目：安装标记为隐藏的服务可执行文件，系统

> ID：10242983
> 
> 赞同：1
> 
> 时间：2012-04-20T08:47:09.670
> 
> 标签：visual-studio-2010, windows-services, installation, windows-installer

我正在使用 Visual Studio 2010 的“安装项目”来安装我的 C# Windows 服务应用程序。

我想将已安装的服务可执行文件标记为文件属性，如下所示`hidden`：`system`

![隐藏和系统属性设置为 true](../Images/d30db56d06d34155e6abbfea107a596f.png)

我已根据**[本文](http://support.microsoft.com/kb/816169)**添加了安装服务的自定义操作，但是当我运行创建的 MSI 安装程序文件时，我在安装过程中收到以下错误消息：

> 错误 1001。初始化安装时发生异常：System.IO.FileNotFoundException: 无法加载文件或程序集 'file:///C:\path\to\my\service.exe' 或其依赖项之一。该系统找不到指定的文件。

我检查了安装位置，并且服务可执行文件*在*那里标记为`hidden`and `system`，所以我只能假设服务安装由于这些属性而失败。

**如何让安装程序安装服务可执行文件，将其标记为`hidden`and ，并*成功*`system`安装 Windows 服务？**

 *如果 Visual Studio*允许*您将项目中的文件设置为`hidden`和`system`？*

# c# - 删除保存文件对话框中的“打开”按钮（仅限 IE）

> ID：10242987
> 
> 赞同：0
> 
> 时间：2012-04-20T08:47:28.757
> 
> 标签：c#, asp.net, .net, internet-explorer, savefiledialog

我使用以下代码生成保存文件对话框：

```
Response.AppendHeader("content-disposition", "attachment; filename=" + name);
Response.WriteFile(Server.MapPath("~/test.html"), true);
Response.End(); 
```

按预期工作。但是，我想删除“打开”按钮，所以我只得到“另存为”和“取消”。有没有办法生成另一种对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:50:16.310

这是不可能的（以跨浏览器的方式），**这是一件好事**。
文件应该保存在他指定的文件夹中还是系统的临时文件夹中（然后自动打开），这完全由用户决定。

但是，对于 HTML 文件，我明白你的意思......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T08:51:15.790

自己找到了答案：

```
<META name="DownloadOptions" content="noopen"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T10:07:48.580

有一种新方法可以使用[“下载”属性](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-download)来执行此操作，当空白值将简单地触发下载时。然而，这[在 IE 中不起作用。](http://caniuse.com/#feat=download)但它可以与元标记结合使用。

# python - python中的mongo查询

> ID：10242988
> 
> 赞同：4
> 
> 时间：2012-04-20T08:47:38.717
> 
> 标签：python, mongodb, pymongo

我有一个命令行参数 user_id 作为 --uid。

我想从 python 中的另一个集合“student_details”访问该特定 user_id 的记录。

由于我是 mongoDB 的新手，因此我想获得特定查询的答案

```
users={
_id :Object(###),
name:"",
standard:""
..
..
..
}

student_details={
_id:Object(###),
user_id:"", -----> referenced
..
} 
```

我试过这样做，

```
collection = db['student_details']
query = "%s" % option.uidfile
results = collection.find({"user_id":query})

print results 
```

输出：

```
<pymongo.cursor.Cursor object at 0x95c910c> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T09:10:04.417

你应该看看这里的教程
[http://api.mongodb.org/python/2.0/tutorial.html](http://api.mongodb.org/python/2.0/tutorial.html)
但是如果你在 python 中打开了集合“student_details”，你会查询：

```
collection.find({"userID" : user_id}) 
```

# c# - 登录失败：未知用户名或密码错误？但我使用了正确的用户名和密码

> ID：10242990
> 
> 赞同：0
> 
> 时间：2012-04-20T08:47:56.540
> 
> 标签：c#, xml, iis, webrequest, remote-access

我想在远程服务器中连接 xml 文件。我这样写我的代码：

```
 string XMLPATH = @"\\10.222.54.141\c$\Data\CL\Casinolink30\BuildFiles\Logging\980\NoLog4NetFile.UnitTest.Tests.nunit-results.xml";
        FileWebRequest request = (FileWebRequest)FileWebRequest.Create(XMLPATH);
        request.Credentials = new NetworkCredential("administrator", "Igtcorp123");
        FileWebResponse response = request.GetResponse() as FileWebResponse;
        Stream stReader = response.GetResponseStream();
        XmlTextReader reader = new XmlTextReader(stReader);
        int count = 100;
        while (reader.Read())
        {
            if (reader.NodeType == XmlNodeType.Element)
            {
                if (reader.Name == "test-case")
                {

                    //Console.WriteLine("testcase name:" + reader.GetAttribute("name"));
                    Console.WriteLine("testcase info");
                    Console.WriteLine("name: " + reader.GetAttribute("name").ToString());
                    //Console.WriteLine("success: " + reader.GetAttribute("success").ToString());
                    Console.WriteLine("------------------------------------");
                }
            }
        } 
```

我收到一个错误：**“登录失败：未知用户名或错误”**。我试着这样做：

1.  在地址栏输入地址（10.222.54.141\c$\Data\CL\Casinolink30\BuildFiles\Logging\980\NoLog4NetFile.UnitTest.Tests.nunit-results.xml），打开。出现一个对话框让我添加用户名和密码。我输入了正确的单词，并成功访问了该文件。
2.  我运行上面的代码。我成功拿到了数据。
3.  我在另一台计算机上尝试这个程序。他们可以访问该地址，但程序不起作用。

我对此感到困惑？为什么会这样？

现在我将我的项目部署到服务器上，我可以成功地在服务器上的本地主机地址（http://localhost:61547/）中获取我的数据。但是我无法通过 addr: [http://10.222.54.140:8080/](http://10.222.54.140:8080/)远程获取计算机中的数据。发生什么事？谁能帮我？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:07:19.777

尝试更改 app.config 文件：

```
<system.net>
    <defaultProxy useDefaultCredentials="false">
      <proxy usesystemdefault="true"/>
    </defaultProxy>
  </system.net> 
```

这可能会解决问题。

您可以在 Web.config 文件中添加如下内容：

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>
  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.net>
    <defaultProxy useDefaultCredentials="false">
      <proxy  usesystemdefault="True"/>
    </defaultProxy>  
  </system.net>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication> 
```

# sql - SQL：如何选择具有最多已知值的行？

> ID：10242991
> 
> 赞同：1
> 
> 时间：2012-04-20T08:48:00.683
> 
> 标签：sql, postgresql, deduplication

我有用户表（用户名，性别，date_of_birth，zip），其中用户的 id 是永久的，但用户可以在过去多次注册，有时他填写所有数据，有时不填写。除此之外，他可以更改居住地（在这种情况下 zip 可以更改）。

所以查询

```
SELECT username, sex, date_birth, zip FROM users_log WHERE username IN('user1', 'user2', 'user3') 
```

返回以下结果：

```
"user1";"M";"1982-10-04 00:00:00";"6320"
"user2";"";"";"1537"
"user3";"";"";"1537"
"user3";"";"";"1000"
"user3";"";"";"1000"
"user3";"";"1979-05-29 00:00:00";"1000"
"user3";"";"";"1537"
"user3";"";"1979-05-29 00:00:00";"1000"
"user1";"";"";"1000"
"user3";"";"";"1537" 
```

在这种情况下，用户 1 已更改住所；邮政编码已更改；“属于”他的第二行不包含人口统计数据。User3 也有多条记录，只有两条记录包含人口统计数据。

我想做的是将用户与包含最多关于他的数据的行绑定，并考虑包含在行中的 zip 与最知名的值。有谁知道如何编写适当的查询？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T09:05:50.500

这会很痛苦；非常痛苦。

您的问题不清楚这个问题，但我假设您所指的“用户 ID”是用户名。如果这是错误的，则需要进行相应的修改。

与任何复杂的查询一样，分阶段构建它。

第 1 阶段：每条记录有多少个非空字段？

```
SELECT username, sex, date_of_birth, zip,
       CASE WHEN sex           IS NULL THEN 0 ELSE 1 END +
       CASE WHEN date_of_birth IS NULL THEN 0 ELSE 1 END +
       CASE WHEN zip           IS NULL THEN 0 ELSE 1 END AS num_non_null_fields
  FROM users_log 
```

第 2 阶段：给定用户名的最大字段数是多少？

```
SELECT username, MAX(num_non_null_fields) AS num_non_null_fields
  FROM (SELECT username, sex, date_of_birth, zip,
               CASE WHEN sex           IS NULL THEN 0 ELSE 1 END +
               CASE WHEN date_of_birth IS NULL THEN 0 ELSE 1 END +
               CASE WHEN zip           IS NULL THEN 0 ELSE 1 END AS num_non_null_fields
          FROM users_log
       ) AS u
 GROUP BY username 
```

第 3 阶段：为具有最大数量的非空字段的给定用户选择（全部）行：

```
SELECT u.username, u.sex, u.date_of_birth, u.zip
  FROM (SELECT username, MAX(num_non_null_fields) AS num_non_null_fields
          FROM (SELECT username, sex, date_of_birth, zip,
                       CASE WHEN sex           IS NULL THEN 0 ELSE 1 END +
                       CASE WHEN date_of_birth IS NULL THEN 0 ELSE 1 END +
                       CASE WHEN zip           IS NULL THEN 0 ELSE 1 END AS num_non_null_fields
                  FROM users_log
               ) AS u
         GROUP BY username
       ) AS v
  JOIN (SELECT username, sex, date_of_birth, zip,
               CASE WHEN sex           IS NULL THEN 0 ELSE 1 END +
               CASE WHEN date_of_birth IS NULL THEN 0 ELSE 1 END +
               CASE WHEN zip           IS NULL THEN 0 ELSE 1 END AS num_non_null_fields
          FROM users_log
       ) AS u
    ON u.username = v.username AND u.num_non_null_fields = v.num_non_null_fields; 
```

现在，如果某人有多行（比如说）填写了所有三个字段，那么所有这些行都将被返回。但是，您没有指定在这些行之间进行选择的任何标准。

这里的基本技术可以适应任何变化的需求。关键是随时构建和测试子查询。

这些 SQL 都没有靠近 DBMS。它可能有错误。

您尚未指定您使用的 DBMS。然而，Oracle 似乎不喜欢用于表别名的 AS 表示法，尽管它在列别名上使用 AS 没有问题。如果您使用任何其他 DBMS，则不必担心这种小怪癖。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T09:11:33.850

幸运的是，您使用的是 PostgreSQL。通过将布尔值转换为整数来计算填充的字段更容易：

```
SELECT username, 
   ( 
      (sex is not null)::int 
    + (date_birth_birth is not null)::int 
    + (zip is not null)::int
   ) / 3.0 as percent_complete
FROM users_log 
```

您的代码目标与此问题相似：
[Postgresql: Calculate rank by number of true OR clauses](https://stackoverflow.com/questions/10210517/postgresql-calculate-rank-by-number-of-true-or-clauses/10211022#10211022)

# android - wifi和3G能在安卓上同时工作吗？

> ID：10242997
> 
> 赞同：7
> 
> 时间：2012-04-20T08:48:35.300
> 
> 标签：android, wifi, 3g

我正在做一个项目，它需要 Android 平板电脑通过 Wifi（tcp/ip）与本地网络设备通信，同时通过 3G（http 请求）向服务器发送数据。

Android 平板电脑每 1 秒从本地网络设备接收一次数据。在整个运行期间不得断开此连接。并且 Android 平板电脑会在一段时间（每分钟或更长时间）使用 HTTP 请求向服务器发送数据。

WIFI和3G可以同时工作吗？如果没有，对我的问题有什么建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:01:52.903

是的，它应该工作。您可以在下载彩信时观察到这一点，通常即使您的 wifi 开启，彩信也只能在 3G 或数据网络上下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:54:11.100

我开发了一个应用程序，它可以在 W-lan 打印机上打印，还可以通过 3G 发送和获取数据，所以我会说是的。但是，如果您正在使用手机，它会更喜欢 w-lan 并且只使用其中一个。

# javascript - 数据库条目（缩略图）周围的随机颜色边框（Javascript）

> ID：10242999
> 
> 赞同：0
> 
> 时间：2012-04-20T08:48:42.897
> 
> 标签：javascript, jquery, html, css

目前我正在开发一个网站，该网站旨在成为我的作品集，所以我希望它是一个挑战。

我展示我的作品的部分使用 PHP 编码并连接到数据库。使用 WHILE 循环，它会在我的网站上添加所有数据库记录。

对于这个网站，我决定第一次使用 Javascript，使其更具挑战性并学习这一点。

我想要的是 PHP WHILE 循环添加的每个数据库记录周围的边框，它仅在悬停时显示，并且每次悬停在缩略图上时都会更改颜色（固定的颜色数组）。

这是我到目前为止的代码：

```
function loaded() {

        var colors = ["#FC3E6B","#24FF00","#0087F9","#F9F900"];
        var images = document.getElementById("thumbnails").getElementsByTagName("div");

        console.log(images);

        for (var i = 0; i < images.length; i++) {
            var rand   = Math.floor(Math.random()*colors.length);

            images[i].style.borderStyle = 'solid';
            images[i].style.borderWidth = '1px';
            images[i].style.borderColor = 'transparent';

            $(images[i]).hover(function(){
                console.log('hovering over');
                images[i].style.borderColor = colors[rand];
            }, function(){
                console.log('hovering out');
                images[i].style.borderColor = 'transparent';
            });

         };

}; 
```

我现在的问题是它不起作用或部分不起作用。此代码仅适用于 WHILE 循环添加的第一个条目。在控制台中，我可以看到“console.log(images)”只返回第一个条目。

另一个问题是它也返回一个错误：

```
images[i] is undefined
images[i].style.borderColor = colors[rand]; 
```

这是我目前正在努力解决的两件事。这很可能是初学者/容易犯的错误，因为这是我第一次使用 Javascript。

如果有什么我忘了提及或您需要知道的，请告诉我。我期待着回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:01:11.113

好的，首先：`(colors.length - 1)`是你想去的地方，一个长度为 3 的数组，有 2 作为最高键（0 索引！）

第二：您可以发布实际的 HTML，或者更好的是：获取一个 jsfiddle，这样我们就可以实际修改您的代码，或者分叉您的 jsfiddle？

第三：我注意到您正在使用 jQuery，您是否尝试过使用`$('#thumbnails').find('div');`来获取您的`images`数组？那你会得到什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:15:51.790

如果我理解正确，您应该有一个 HTML 页面（使用 PHP 生成），如下所示：

```
<div id="thumbnails">
  <img src="..." />
  <img src="..." />
  <img src="..." />
  ...
</div> 
```

如果您悬停其中一个图像，您想为其添加边框，如果鼠标离开图像，则删除边框。我假设您使用的是 jQuery，因此您可以将每个图像添加一个类，例如`<img class="record" src="..." />`并尝试以下 javascript：

```
$(function() {
  var colors = ["#FC3E6B","#24FF00","#0087F9","#F9F900"];

  $('.record').hover(
    function() {
      var rand = Math.floor(Math.random()*colors.length);

      $(this).css('border-style', 'solid');
      $(this).css('border-width', '1px');
      $(this).css('border-color', colors[rand]);
    },
    function() {
      $(this).css('border-style', 'none');
    }
  );
}).call(this); 
```

每次光标进入一个元素（在你的情况下是一个图像）时，这将获得一个边框，如果光标离开它，边框将被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T09:56:07.987

万一读到这篇文章的人想知道，原始示例不起作用的原因是因为它正在创建一个闭包。内部函数可以访问在外部函数中创建的变量，但是当外部函数返回时，它会获取变量的值。

在这种情况下，当代码：

```
images[i].style.borderColor = colors[rand]; 
```

执行后，对于每个图像， i 的值将是 4，超出范围。

请参阅此以获取解释：

[循环内的 JavaScript 闭包——简单实用的示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)