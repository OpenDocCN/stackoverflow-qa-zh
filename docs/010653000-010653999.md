# StackOverflow 问答 10653000-10653999

# jrules - 尝试创建到规则执行服务器的无状态会话时返回 java.lang.NoSuchFieldError

> ID：10653000
> 
> 赞同：0
> 
> 时间：2012-05-18T12:50:38.783
> 
> 标签：jrules

我正在使用 Ilog JRules Studio 7.1.1 进行规则开发。我正在使用 JUnit 测试用例来测试开发的规则。当我尝试创建到 RES 的无状态会话时，它返回以下错误。

IlrStatelessSession 会话 = factory.createStatelessSession();

有人有什么想法吗？

java.lang.NoSuchFieldError：ilog.rules.res.decisionservice.plugin.IlrWsdlGeneratorInteractionExtension.getSupportedFunctionNames 上的 ilog/rules/res/decisionservice/plugin/IlrWsdlGenerationInteractionSpec.FUNCTION_NAME_BACKPORT_GENERATE_WSDL.getSupportedFunctionNames(IlrWsdlGeneratorInteractionExtension.java:418) 在 ilog.rules.res.xu. .impl.IlrPluginManager.createPlugins(IlrPluginManager.java:222) 在 ilog.rules.res.xu.plugin.impl.IlrPluginManager.changePlugins(IlrPluginManager.java:173) 在 ilog.rules.res.xu.plugin.impl.IlrPluginManager .start(IlrPluginManager.java:135) 在 ilog.rules.res.xu.spi.IlrManagedXUConnectionFactory.createConnectionFactory(IlrManagedXUConnectionFactory.java:648) 在 ilog.rules.res.xu.spi.IlrManagedXUConnectionFactory.createConnectionFactory(IlrManagedXUConnectionFactory.java:668) ) 在 ilog.rules.res.session.util。IlrJ2SEConnectionFactoryFinder.findConnectionFactory(IlrJ2SEConnectionFactoryFinder.java:23) 在 ilog.rules.res.session.IlrJ2SESessionFactory.createClientFactory(IlrJ2SESessionFactory.java:93) 在 ilog.rules.res.session.IlrJ2SESessionFactory.getClientFactory(IlrJ2SESessionFactory.java:129) 在 ilog .rules.res.session.IlrJ2SESessionFactory.createStatelessSession(IlrJ2SESessionFactory.java:62)

问候， 哈里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:02:59.590

与会话无关。
JRules 崩溃是因为它无法生成 WSDL，这意味着您的项目一开始有问题。
尝试先在本地运行它。
问题是如果 XOM 基于 XSD，则会自动提供 Web 服务
。您的项目中某处有错误。如果您使用 XSD（我猜）然后查看您的规则项目。如果您使用 JAVA XOM，那么您的 Web 服务服务器中就会出现错误（我对此表示怀疑），因为我看不出 JRules 为什么会抱怨您自己的代码。
验证您的输入/输出参数
先简单化，然后再复杂化过程。
如果简单然后重新部署...
希望它有帮助

# javascript - Javascript初始数据策 略

> ID：10653001
> 
> 赞同：1
> 
> 时间：2012-05-18T12:50:42.730
> 
> 标签：javascript, jquery

为了保持我的页面干净，我创建了一些 javascript 文件，这些文件在生产模式下组合成更少的文件。
我在正文中使用数据属性来确定要运行哪个脚本。问题是当我需要一些初始数据时。在这种情况下，我使用脚本标签并将我的数据放在一个 json 数组中。这些数据可能会改变，所以我想知道对数据发出 json 请求而不直接将它们放在我的页面中是否更好？

# asp.net-mvc-3 - 自定义验证器不会更改已验证的输入类

> ID：10653004
> 
> 赞同：1
> 
> 时间：2012-05-18T12:51:04.967
> 
> 标签：asp.net-mvc-3, validation

对于多个必填字段的简单验证，我正在使用[此处解释的自定义验证器](https://stackoverflow.com/questions/6075339/mvc-form-validation-on-multiple-fields/9580331)

我得到了所需的行为并且验证摘要消息正确显示，但我现在缺少的是无效输入元素上缺少验证错误 css 类，这是在使用内置验证器时添加的。

这是正确的行为：

```
<input class="input-validation-error" name="ModelName" ... /> 
```

这就是我在使用提到的自定义验证器时得到的：

```
<input name="ModelName" ... /> 
```

请注意，我指的是**服务器端**验证。

**更新**

这是我的模型：

```
public class Register
{
        [MultiFieldRequired(new[] { "Name", "UserName" }, ErrorMessage = "Please provide all required information")]
        [Display(Name = "Name")]
        public string Name { get; set; }

        [MultiFieldRequired(new[] { "Name", "UserName" }, ErrorMessage = "Please provide all required information")]
        [Display(Name = "User name")]
        public string UserName { get; set; }
} 
```

这是渲染的输出：

```
<input class="text-box single-line" data-val="true" data-val-multifield="Please provide all required information" id="Name" name="Name" type="text" value="" />
<input class="text-box single-line" data-val="true" data-val-multifield="Please provide all required information" id="UserName" name="UserName" type="text" value="" /> 
```

我现在意识到只有当我使用**MultiFieldRequired**属性装饰整个模型类时才会出现问题：

```
[MultiFieldRequired(new[] { "Name", "UserName" }, ErrorMessage = "Please provide all required information")]
public class Register
{
... 
```

在这种情况下，没有无效字段修改了 css 类，而在另一种情况下，当我注释模型中的每个字段时，我得到相同的错误消息乘以无效字段的数量。

> 因此，总而言之 - 无论无效字段的数量如何，我都希望有**一条**错误消息，并且我还希望**每个**无效字段都用 .input-validation-error 类标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:49:32.917

我刚刚对此进行了测试，它工作正常。这是我所做的：

**控制器：**

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Index(IndexModel model)
    {
        if (ModelState.IsValid)
        {
            return RedirectToAction("NextAction");
        }
        return View(model);
    }
} 
```

**模型：**

```
public class IndexModel
{
    [MultiFieldRequiredAttribute(new string[] { "AreaCode", "PhoneNumber" })]
    public string AreaCode { get; set; }

    [MultiFieldRequiredAttribute(new string[] { "AreaCode", "PhoneNumber" })]
    public string PhoneNumber { get; set; }
} 
```

我完全按照示例中提供的方式使用了验证：

```
public class MultiFieldRequiredAttribute : ValidationAttribute, IClientValidatable
{
    private readonly string[] _fields;

    public MultiFieldRequiredAttribute(string[] fields)
    {
        _fields = fields;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        foreach (string field in _fields)
        {
            PropertyInfo property = validationContext.ObjectType.GetProperty(field);
            if (property == null)
                return new ValidationResult(string.Format("Property '{0}' is undefined.", field));

            var fieldValue = property.GetValue(validationContext.ObjectInstance, null);

            if (fieldValue == null || String.IsNullOrEmpty(fieldValue.ToString()))
                return new ValidationResult(this.FormatErrorMessage(validationContext.DisplayName));
        }

        return null;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        yield return new ModelClientValidationRule
        {
            ErrorMessage = this.ErrorMessage,
            ValidationType = "multifield"
        };
    }
} 
```

**看法：**

```
@model IndexModel

@using (Html.BeginForm())
{
    @Html.EditorFor(m => m.AreaCode)
    @Html.EditorFor(m => m.PhoneNumber)
    <input type="submit" value="submit" />
} 
```

如果您随后显示该视图，则会为区号显示以下内容：

```
<input class="text-box single-line" data-val="true" data-val-multifield="" id="AreaCode" name="AreaCode" type="text" value="" /> 
```

如果您然后单击提交按钮，您将获得以下信息：

```
<input class="input-validation-error text-box single-line" data-val="true" data-val-multifield="" id="AreaCode" name="AreaCode" type="text" value="" /> 
```

当您单击添加的提交按钮时`input-validation-error`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:56:50.860

我期待视图中的无效字段将用**.input-validation-error**类标记，而不管属性的位置，所以我使用自定义验证器属性来注释我的模型类，如下所示：

```
[MultiFieldRequired(new[] { "Name", "UserName" }, ErrorMessage = "Please provide all required information")]
public class Register
{
        [Display(Name = "Name")]
        public string Name { get; set; }

        [Display(Name = "User name")]
        public string UserName { get; set; }
} 
```

另一方面，如果我注释每个字段：

```
public class Register
{
        [MultiFieldRequired(new[] { "Name", "UserName" }, ErrorMessage = "Please provide all required information")]
        [Display(Name = "Name")]
        public string Name { get; set; }

        [MultiFieldRequired(new[] { "Name", "UserName" }, ErrorMessage = "Please provide all required information")]
        [Display(Name = "User name")]
        public string UserName { get; set; }
} 
```

我的视图在验证摘要中生成多个相同的消息。

所以我最终使用**ValidationSummary**得到了一个自定义验证摘要错误消息，如下所示：

```
@Html.ValidationSummary(true, "Please provide all required information") 
```

我的字段用简单的星号装饰，如下所示：

```
public class Register
{
        [Required(ErrorMessage = "*")]
        [Display(Name = "Name")]
        public string Name { get; set; }

        [Required(ErrorMessage = "*")]
        [Display(Name = "User name")]
        public string UserName { get; set; }
} 
```

最后，我的视图呈现如下：

![验证错误消息](../Images/94dd93c408fa8194b997cfa3a8a04c11.png)

高温高压

# sql-server-2008 - SQL - 将 int 转换为 double

> ID：10653010
> 
> 赞同：12
> 
> 时间：2012-05-18T12:51:26.367
> 
> 标签：sql-server-2008

我的 sql 表中有两个`bit`类型列，其中的值就像，

```
FirstHalfLeave         SecondHalfLeave
 ------------           -------------
      0                      1
      1                      1 
```

我需要对这两个字段求和以使其离开一天，我需要显示确切的结果`(3/2=1.5)`

我只是将这些转换`bit`为`integer`喜欢

```
sum(CAST(StaffAttendance.FirstHalfStatus as Integer) + 
             CAST(StaffAttendance.SecondHalfStatus as integer))/2 as TotalLeave 
```

它显示结果`1`不是`1.5`，为此我认为我需要将其转换为双倍或浮动，我不知道如何执行此操作，有人可以在这里帮助我，提前谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-18T12:52:58.517

改用`/2.0`强制十进制类型

## 编辑：

删除强制转换为的尾随零`float`。我认为你放`)`错了。尝试：

```
select cast(
           sum(
                 (
                   CAST(StaffAttendance.FirstHalfStatus as Integer) + 
                   CAST(StaffAttendance.SecondHalfStatus as integer)
                 ) 
                 / 2.0
           ) as float
       ) as TotalLeave
from your_table 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T12:52:52.463

转换为 double 的最简单方法是乘以 1.0，如下所示：

```
 1.0 * (sum(CAST(StaffAttendance.FirstHalfStatus as Integer) + 
         CAST(StaffAttendance.SecondHalfStatus as integer)))/2 as TotalLeave 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T12:53:55.303

除以`2.0`或乘以`0.5`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T12:54:20.367

您是否尝试过铸造位列和浮点数而不是整数？

```
sum(CAST(StaffAttendance.FirstHalfStatus as float) + 
             CAST(StaffAttendance.SecondHalfStatus as float))/2 as TotalLeave 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T12:54:49.383

尝试

```
 Sum(Case Cast(FirstHalfLeave + SecondHalfLeave as Numeric)) / Count(*) 
```

# doctrine-orm - Doctrine2 findby 上的多对一映射

> ID：10653013
> 
> 赞同：2
> 
> 时间：2012-05-18T12:51:32.497
> 
> 标签：doctrine-orm, many-to-one, arraycollection, findby

我有两个具有单向多对一映射的实体。

这是`Product`：

```
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @Entity
 * @Table(name="Product")
 * @gedmo:TranslationEntity(class="GPos_Model_Translation_ProductTranslation")
 */
class GPos_Model_Product extends GPos_Doctrine_ActiveEntity {
    /**
     * @Id @Column(type="integer")
     * @GeneratedValue
     */
    protected $id;

    /**
     * @ManyToMany(targetEntity="GPos_Model_Category")
     * @JoinTable(name="products_categories",
     *      joinColumns={@JoinColumn(name="product_id", referencedColumnName="id")},
     *      inverseJoinColumns={@JoinColumn(name="category_id", referencedColumnName="id")}
     *      )
     */
    protected $categories;

    public function __construct() {
        $this->categories = new ArrayCollection();
    }

    public function addCategory(GPos_Model_Category $category) {
        if (!$this->categories->contains($category))
            $this->categories->add($category);
    }
} 
```

如您所见，$categories 是 GPos_Model_Category 实体的 ArrayCollection。

**怎么办？** 好吧，现在我想检索给定类别中的所有产品以及不在给定类别中的所有*产品*。

我已经尝试过`$products = GPos_Model_Product::findByCategories($category->getId());` ，但这只给了我
`SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= '1'' at line 1`并且`$category`ID 是 1，所以我想这不是要走的路。任何人都知道如何处理？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:45:00.637

[感谢https://stackoverflow.com/a/9808277/1300454](https://stackoverflow.com/a/9808277/1300454)，我终于找到了如何选择一个类别中的所有产品。

我稍微调整了他的解决方案，这样我就可以传递一个类别实体数组，它会找到这些类别中的所有产品。如果您提供多个实体，它将返回至少属于给定类别之一的任何产品。

这是我的调整（我在我的产品实体中找到了这个函数）：

```
/**
 *
 * Takes an array of GPos_Model_Category entities as parameter and returns all products in these categories
 * @param array $categories
 */
public static function findByCategories($categories) {
    $categoryArray = array();
    foreach ($categories as $category) {
        array_push($categoryArray, $category->getId());
    }
    $qb = Zend_Registry::get('entityManager')->createQueryBuilder();
    $qb ->select('p')
    ->from('GPos_Model_Product', 'p')
    ->leftJoin('p.categories', 'c')
    ->andWhere($qb->expr()->in('c.id', $categoryArray));

    return $qb->getQuery()->execute();;
} 
```

这是你如何称呼它的：

```
$products_cat = GPos_Model_Product::findByCategories(array($category)); 
```

在这种情况下，$category 是一个单独的实体，这就是为什么我在将其提供给函数之前将其放入数组中的原因。

以下是您查找不在给定类别或类别列表中的产品的方式：

```
/**
 *
 * Takes an array of GPos_Model_Category entities as parameter and returns all products not in these categories
 * @param array $categories
 */
public static function findByNotCategories($categories) {
    $categoryArray = array();
    foreach ($categories as $category) {
        array_push($categoryArray, $category->getId());
    }
    $qb = Zend_Registry::get('entityManager')->createQueryBuilder();
    $qb2 = Zend_Registry::get('entityManager')->createQueryBuilder();
    $qb->select('p')
    ->from('GPos_Model_Product', 'p')
    ->where($qb->expr()->notIn('p.id',
        $qb2->select('p2.id')
        ->from('GPos_Model_Product', 'p2')
        ->leftJoin('p2.categories', 'c')
        ->andWhere($qb->expr()->in('c.id', $categoryArray))
        ->getDQL()
    ));

    return $qb->getQuery()->execute();
} 
```

这实际上是使用子选择。我选择给定类别中的所有产品 ID（即子选择），然后选择不在子选择结果中的所有产品。我在这里的工作完成了！

# javascript - 如何找到屏幕宽度并将其应用于特定的 css

> ID：10653019
> 
> 赞同：2
> 
> 时间：2012-05-18T12:52:07.913
> 
> 标签：javascript, html, css

我需要找到用户屏幕宽度，并且需要将此宽度应用于样式。

我有一个`container`.

```
<div id="container">

</div> 
```

我需要使用 JavaScript 或任何其他选项将宽度放入 css 中。

我怎样才能做到这一点？？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:54:09.530

要获取屏幕分辨率使用`screen`对象：

```
document.getElementById("container").style.width = screen.width + "px"; 
```

要获得浏览器窗口的宽度（对于除 IE6 及以下的所有浏览器，否则请检查[此跨浏览器方法](http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/)），请使用：

```
document.getElementById("container").style.width = window.innerWidth + "px"; 
```

另外，请注意，仅在文档完全加载时才应调用脚本。

**演示：http:** [//jsfiddle.net/DNPNz/](http://jsfiddle.net/DNPNz/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T12:57:01.137

对于这个**CSS 媒体查询**是最好的。像这样写：

```
@media screen and (max-width: 980px)
 {
      #container{
        background: #ccc;
      }
    } 
```

查看更多[http://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:07:49.357

我相信你正在寻找的是这个。下面的代码将帮助您获取所有浏览器的宽度或高度。

```
function getViewPortSize()
{
    var viewportwidth;
    var viewportheight;

    // Standard browsers
    if (typeof window.innerWidth != 'undefined')
    {
        viewportwidth = window.innerWidth,
        viewportheight = window.innerHeight
    }

    // IE6
    else if (typeof document.documentElement != 'undefined' && typeof document.documentElement.clientWidth != 'undefined' && document.documentElement.clientWidth != 0)
    {
        viewportwidth = document.documentElement.clientWidth,
        viewportheight = document.documentElement.clientHeight
    }

    //Older IE
    else
    {
        viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
        viewportheight = document.getElementsByTagName('body')[0].clientHeight
    }

    return viewportwidth + "~" + viewportheight;
} 
```

设置容器的宽度

```
window.onload = function() {
    document.getElementById("container").style.width = your_width_Here;
} 
```

确保容器在 js 之前加载。我认为这是正确的语法

或者

我想如果你只想用 div 填充浏览器窗口的宽度。你可以只使用css

```
#container { width: 100%; } 
```

# c++ - C++ MFC 命名线程，以便 Procmon 可以看到它们

> ID：10653022
> 
> 赞同：1
> 
> 时间：2012-05-18T12:52:12.510
> 
> 标签：c++, multithreading, mfc, naming, visual-c++-6

是否可以在 MFC 中为线程提供字符串名称，以便 procmon 等其他应用程序将转储出更有用的消息，而不仅仅是 ThreadID #### exited 等。

我现在也在使用VC6。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:55:46.003

是的，您可以通过引发特殊类型的异常。[在这里](http://msdn.microsoft.com/en-us/library/xcb2z8hs.aspx)说明。

# jquery - 有没有办法限制 Google Places Autocomplete 搜索城市的街道？

> ID：10653023
> 
> 赞同：11
> 
> 时间：2012-05-18T12:52:16.570
> 
> 标签：jquery, google-maps-api-3, google-places-api

使用 Google 地方信息时，我可以将搜索限制在城市的街道上`Autocomplete`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T14:12:37.930

您可以设置`Autocomplete`要用作类型的选项`geocode`，这将限制返回到地址的结果：

```
var input = document.getElementById( 'searchTextField' );
var options = {
  bounds: yourBounds,
  types: ['geocode']
};

autocomplete = new google.maps.places.Autocomplete( input, options ); 
```

没有办法将结果限制在*街道*上，但这将在很大程度上实现您想要的。如果您设置`yourBounds`正确，可能仅限于城市区域，它将让您尽可能接近。

**更新回复评论：**

如果您想从输入城市开始，您可以将地图的边界绑定到`Autocomplete`s 边界，当在 中选择城市时，地图会自动设置其视口`Autocomplete`：

```
var options = {
  bounds: yourBounds,
  types: ['(cities)']
};
autocomplete =
    new google.maps.places.Autocomplete( input, options );
// This will bind the map's bounds to the Autocomplete's bounds:
autocomplete.bindTo('bounds', map); 
```

然后，您可以更新`Autocomplete`的类型，类似于上面，让它返回地址：

```
autocomplete.setTypes( [ "geocode" ] ); 
```

从那里，您可以阅读[Places Library API Docs](https://developers.google.com/maps/documentation/javascript/reference#Autocomplete)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-05T18:18:11.560

只是 html 代码的一个例子（twitter bootstrap 3 compatible :)）

```
<div class="well container">
    <form role="form">
      <div class="form-group">
        <label for="locality" class="sr-only">Stadt oder PLZ</label>
          <input type="text" class="form-control" id="locality" name="locality" placeholder="Stadt oder PLZ" />
          <p class="help-block">Bitte zuerst die Stadt oder PLZ eingeben.</p>
      </div>
      <div class="form-group">
        <label for="route" class="sr-only">Straße / Hausnummer</label>
        <div class="row">
          <div class="col-xs-6">
            <input type="text" class="form-control col-xs-8" id="route" name="route" placeholder="Straße" disabled="true" />
          </div>
          <div class="col-xs-6">
            <input type="text" class="form-control col-xs-4" id="street_number" name="street_number" placeholder="Nr." disabled="true" />
          </div>
        </div>
      </div>
    </form>
</div> 
```

我认为代码是不言自明的，只需尝试一下

```
<script>
var localityInput = document.getElementById('locality');
var localityOptions = {
  types: ['geocode'], //['(cities)'], geocode to allow postal_code if you only want to allow cities then change this attribute
  componentRestrictions: {country: 'de'}
};
autocomplete = new google.maps.places.Autocomplete(localityInput, localityOptions);

google.maps.event.addListener(autocomplete, 'place_changed', function() {
    $('#route').attr('disabled', false).focus();
    $('#street_number').attr('disabled', false);

    var boundsByCity = autocomplete.getPlace().geometry.viewport;
    var routeInput = document.getElementById('route');
    var routeOptions = {
        bounds: boundsByCity,
        types: ['geocode']
    };
    new google.maps.places.Autocomplete(routeInput, routeOptions);
});
</script> 
```

演示：[JSFIDDLE](http://jsfiddle.net/8ncqjbeg/)

[另一个更高级的演示](http://jsfiddle.net/emnafs74/2/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-13T14:16:12.000

将类型设置为**区域**。

```
var input = document.getElementById( 'searchTextField' );

var options = {
  bounds: yourBounds,
  types: ['(regions)']
};

autocomplete = new google.maps.places.Autocomplete( input, options ); 
```

希望能帮助到你..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-09T14:41:43.943

我正在寻找一种方法来将地方自动完成限制为`street_number`水平，但没有找到。

我能想出的最佳解决方案是检查`street_number`位置结果中的组件，并在它丢失时向用户显示通知。

示例代码：

```
var searchbox = document.getElementById('location');

var options = {             
    types: ['geocode']
};

autocomplete = new google.maps.places.Autocomplete(searchbox, options);

google.maps.event.addListener(autocomplete, 'place_changed', function() {
        var place = autocomplete.getPlace();

        var foundStreet = false;

        for (var i = 0; i < place.address_components.length; i++) {
            var c = place.address_components[i];

            for (var j = 0; j < c.types.length; j++) 
            {
                if (c.types[j] == "street_number")
                {
                    foundStreet = true;
                    break;
                }
            }

            if (foundStreet)
                break;
        }

        if (!foundStreet)
            alert("Not a valid street number, add some pretty message to the user.");

        console.log(place);
    }); 
```

# sql-server - 使用 powershell 以事务方式创建数据库

> ID：10653025
> 
> 赞同：1
> 
> 时间：2012-05-18T12:52:20.360
> 
> 标签：sql-server, powershell

我正在使用 powershell 在 SQL Server 2008R2 实例上创建一组数据库，如下所示：

```
foreach ($database in $databases) {
    # Create DB
    $db = New-Object Microsoft.SqlServer.Management.SMO.Database
    $db.Parent = Get-Item "SQLSERVER:\SQL\$DBServer\$Instance"
    $db.Name = $database
    $db.Create()

    #
    # Create tables, fill in data, etc
    #
} 
```

在这里，我假设要创建的数据库都不存在。如果事实证明确实如此，我想中止并回滚。在 SQL 中，我只需将其包装在`BEGIN TRAN`and `ROLLBACK`or`COMMIT`中，但我可以在 Powershell 中执行此操作吗？有一个 cmdlet `Start-Transaction`，但它需要事务中使用的命令的支持，但`$db.Create()`不需要。

对象中有没有办法`SMO`进行交易？我当然可以提前检查所有的数据库，但是整个脚本相当复杂，我觉得如果我能把逻辑更接近于创建的话会更容易理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:16:40.880

您也无法将其包装在事务中的 SQL 中，因为[`CREATE DATABASE`](http://msdn.microsoft.com/en-us/library/ms176061.aspx)无法在事务中注册：

> CREATE DATABASE 语句必须在自动提交模式（默认事务管理模式）下运行，并且不允许在显式或隐式事务中运行。

所以PS、SMO或任何其他方式都无法实现该能力。在缺少事务的情况下，您需要小心处理错误。要创建“全部或全部”数据库，要实现原子行为将非常困难。如果遇到错误，则不能保证可以删除已创建的数据库。

如果可能，最好使用幂等性：如果您运行脚本并在数据库 5 上遇到错误，下次运行它会跳过已经创建的数据库 1-4。或者，如果存在，它会删除已经创建的数据库并再次创建它们（这是有风险的，因为脚本可能最终会由于操作员错误而删除错误的数据库）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:55:19.500

你不能运行一个

```
if not exists(select 1 from sys.databases where name like ='your_db_name') begin
 create
end else begin
  log?
end 
```

# javascript - 如何取消订阅淘汰赛中的订阅功能？

> ID：10653030
> 
> 赞同：48
> 
> 时间：2012-05-18T12:52:37.003
> 
> 标签：javascript, knockout.js

我已经订阅了使用 ko 监听属性值变化的函​​数。

```
var self = this;
$( document ).ready( function () {

var postbox = new ko.subscribable();
var myViewModel =
{
    FirstName: ko.observable( "Bert" ),
    LastName: ko.observable( "pual" )
};
var sub = null;
for ( var i in myViewModel ) {
    var model = myViewModel[i];
    model.subscribe( self.notifyChange.bind( model, i ) );

}

$( '#unsubscribeButton' ).click( function () {
    // here i want to unsubscribe.
} );
 ko.applyBindings( myViewModel );
  });
 notifyChange = function ( PropName, newValue ) {
var self= this;
);
    } 
```

这里我想从myViewModel的属性中一一退订notifyChange，怎么做呢？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-05-18T13:37:28.513

将调用订阅的结果存储在变量中（或者，在您的情况下，存储在数组中）。

当您想取消订阅时，只需在每个订阅上调用 dispose 即可。

在这里完全描述 - [http://knockoutjs.com/documentation/observables.html](http://knockoutjs.com/documentation/observables.html)

您的代码将如下所示：

```
//store subscriptions in array
var subscriptions = [];

for ( var i in myViewModel ) {
    var model = myViewModel[i];
    subscriptions.push(model.subscribe( self.notifyChange.bind( model, i ) ));
}

//unsubscribe
for(var i in subscriptions) {
    subscriptions[i].dispose(); //no longer want notifications
} 
```

# javascript - 删除 highchart 图表上的导出和打印按钮插件

> ID：10653037
> 
> 赞同：21
> 
> 时间：2012-05-18T12:53:01.013
> 
> 标签：javascript, asp.net-mvc, charts, highcharts

我正在使用 MVC，目前正在使用 highchart

我正在使用 Exporting.js，因此用户可以打印或导出 highchart 图表。我在一个视图中有两个图表，我想在其中一个图表上禁用打印和导出。我怎样才能做到这一点？

Exporting.js 会自动为图表提供这 2 个按钮选项。

提前致谢

正确解决方案：

```
.SetExporting(new Exporting { Enabled = false, EnableImages = false }); 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-05-18T13:09:22.910

您可以同时禁用两个按钮（即整个导出部分），

```
exporting: {
         enabled: false
} 
```

您也可以像这样禁用其中任何一个或两个，

```
exporting: {
    buttons: { 
        exportButton: {
            enabled:false
        },
        printButton: {
            enabled:false
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-18T12:58:35.023

有关如何禁用导出的信息，请参阅以下[“导出模块已加载但已禁用” 。](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/exporting/enabled-false/)可以在[此处](http://www.highcharts.com/ref/#exporting--enabled)找到所有可修改的导出选项的说明。

**编辑**

看起来您正在使用 DotNet.Highcharts。以下是有关如何使用和设置导出功能的示例：

```
.SetExporting(new Exporting
{
    Buttons = new ExportingButtons
        {
            ExportButton = new ExportingButtonsExportButton
                {
                    Align = HorizontalAligns.Right,
                        //BackgroundColor  <-- Don't know how to set yet
                        BorderColor = Color.Black,
                        BorderRadius = 3,
                        BorderWidth = 1,
                        Enabled = true,
                        Height = 35,
                        HoverBorderColor = Color.Red,
                        HoverSymbolFill = Color.Black,
                        HoverSymbolStroke = Color.Black,
                        //Onclick
                        //MenuItems
                        SymbolSize = 25,
                        SymbolX = 18,
                        SymbolY = 18,
                        VerticalAlign = VerticalAligns.Top,
                        Width = 35,
                        Y = 10,
                        X = -50
                },
                PrintButton = new ExportingButtonsPrintButton
                {
                    Align = HorizontalAligns.Right,
                        //BackgroundColor  <-- Don't know how to set yet
                        BorderColor = Color.Black,
                        BorderRadius = 3,
                        BorderWidth = 1,
                        Enabled = true,
                        Height = 35,
                        HoverBorderColor = Color.Red,
                        HoverSymbolFill = Color.Black,
                        HoverSymbolStroke = Color.Black,
                        //Onclick
                        //MenuItems
                        SymbolStroke = Color.Teal,
                        SymbolSize = 25,
                        SymbolX = 18,
                        SymbolY = 18,
                        VerticalAlign = VerticalAligns.Top,
                        Width = 35,
                        Y = 10,
                        X = -15
                }
    },
        Enabled = true,
        EnableImages = true,
        Filename = "HomeChart",
        Type = "image/png",
        Url = "http://export.highcharts.com",
        Width = 800
}) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-12T21:31:24.477

您提到的第一个选项：

```
exporting: {
         enabled: false
} 
```

如果您在重用 html 容器（即刷新数据）的场景中使用它，则会破坏 highcharts 对象。

在这种情况下，对我来说唯一可行的选择是将两者结合起来：

```
 optionsMini.exporting = {
        enabled: false,
        buttons: {
            exportButton: {
                enabled: false
            },
            printButton: {
                enabled: false
            }

        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-12T20:14:02.233

以下适用于我在此行之前添加的 MVC 5 和 Highsoft.Highcharts：`Title = new Title { Text = "charts" },`

```
Exporting = new Exporting { Enabled = false }, 
```

# jquery - JQuery“onclick”事件加上“onload”

> ID：10653038
> 
> 赞同：2
> 
> 时间：2012-05-18T12:53:01.713
> 
> 标签：jquery

有时我遇到以下问题：我在客户端使用 asp.net 和 JQuery。例如，我想根据复选框的状态显示/隐藏 texbox。我写这样的东西：

```
 $(function() {         

       $('#<%=chbMyCheckbox.ClientID %>').click(function(event) {

           if (this.checked) {
             $('#txFirstAid').show();
           } else {
             $('#txFirstAid').hide();
           }
       });
   }); 
```

它工作正常。但我也想在页面刚刚加载时运行此代码。当然，我可以像这样将代码移动到单独的函数中：

```
 $(function() {         
         myFunc();
       $('#<%=chbMyCheckbox.ClientID %>').click(function(event) {
           myFunc();

       });

          function myFunc()
          {
           if (this.checked) {
             $('#txFirstAid').show();
           } else {
             $('#txFirstAid').hide();
           }
          }
   }); 
```

问题是：是否有可能以某种方式不移动代码，并编写类似这样的东西

```
$('#<%=chbMyCheckbox.ClientID %>').click(function(event).onloadEvent()
{
    bla-bla
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T12:56:24.820

您可以使用 jquery 的`trigger()`方法来触发单击事件 onLoad。

比如注册一个点击事件：

`$('#someElement').on('click', function () { console.log('I BE CLICkED') });`

触发它：

`$('#someElement').trigger('click');`

您可以使用自定义事件触发任何事件`trigger()`，也可以触发自定义事件。（它允许您绑定到由插件等触发的事件。

[完整的触发器文档在这里](http://api.jquery.com/trigger/)，这里有一篇关于在 jquery 中使用[自定义事件的好帖子](https://learn.jquery.com/events/introduction-to-custom-events/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:03:53.117

渲染页面时如何隐藏服务器上的文本框？所以用户在domready之前看不到文本框。

# cloud-foundry - 将独立应用程序部署到 Micro Cloudfoundry

> ID：10653040
> 
> 赞同：0
> 
> 时间：2012-05-18T12:53:03.200
> 
> 标签：cloud-foundry

这篇[文章](http://blog.cloudfoundry.com/post/13481011624/cloud-foundry-improves-support-for-background-processing)演示了如何将独立应用程序部署到 CloudFoundry。

但是，我无法使用 Micro CloudFoundry 1.2 做到这一点。如何将独立插件添加到框架列表中？

```
>vmc runtimes

+--------+-------------+-----------+
| Name   | Description | Version   |
+--------+-------------+-----------+
| java   | Java 6      | 1.6       |
| ruby18 | Ruby 1.8    | 1.8.7     |
| ruby19 | Ruby 1.9    | 1.9.2p180 |
| node   | Node.js     | 0.4.12    |
| node06 | Node.js     | 0.6.8     |
+--------+-------------+-----------+

>vmc frameworks

+----------+
| Name     |
+----------+
| spring   |
| java_web |
| sinatra  |
| grails   |
| node     |
| lift     |
| rails3   |
+----------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T21:17:05.587

Micro Cloud Foundry 1.2 基于旧版本的 Cloud Foundry 源代码，不支持独立应用程序。您需要等待 Micro Cloud Foundry 的新版本包含最新功能。

同时，您可以设置本地 Ubuntu VM 并在[http://www.cloudfoundry.org/](http://www.cloudfoundry.org/)安装最新的 Cloud Foundry 源，或者直接使用 CloudFoundry.com。

# c# - 按属性值选择节点

> ID：10653054
> 
> 赞同：0
> 
> 时间：2012-05-18T12:54:05.567
> 
> 标签：c#, linq-to-xml

我有一个如下的 XML：

```
 <TRANSFORMATION DESCRIPTION ="" NAME ="RTR_LRC_RF_REFL_Unproc" OBJECTVERSION ="1" REUSABLE ="NO" TYPE ="Router" VERSIONNUMBER ="1">
              <GROUP DESCRIPTION ="" NAME ="INPUT" ORDER ="1" TYPE ="INPUT"/>
              <GROUP DESCRIPTION ="" EXPRESSION ="EXP 1" NAME ="Good" ORDER ="2" TYPE ="OUTPUT"/>
              <GROUP DESCRIPTION ="Path for the data when none of the group conditions are satisfied." NAME ="DEFAULT1" ORDER ="3" TYPE ="OUTPUT/DEFAULT"/>
              <TRANSFORMFIELD DATATYPE ="integer" DEFAULTVALUE ="" DESCRIPTION ="" GROUP ="INPUT" NAME ="OWNER_HEORG_REFNO" PICTURETEXT ="" PORTTYPE ="INPUT" PRECISION ="10" SCALE ="0"/>
              <TRANSFORMFIELD DATATYPE ="integer" DEFAULTVALUE ="" DESCRIPTION ="" GROUP ="INPUT" NAME ="PATNT_REFNO" PICTURETEXT ="" PORTTYPE ="INPUT" PRECISION ="10" SCALE ="0"/>
              <TRANSFORMFIELD DATATYPE ="integer" DEFAULTVALUE ="" DESCRIPTION ="" GROUP ="INPUT" NAME ="REFRL_REFNO" PICTURETEXT ="" PORTTYPE ="INPUT" PRECISION ="10" SCALE ="0"/>
==============================================================================================
<GROUP DESCRIPTION ="" EXPRESSION ="(Valid_Record_Flag = &apos;Y&apos; 
<GROUP DESCRIPTION ="Path for the data when none of the group condition
<GROUP DESCRIPTION ="" EXPRESSION ="EXP2" .../> 
<GROUP DESCRIPTION ="" EXPRESSION ="EXP3" .../> 
<GROUP DESCRIPTION ="" EXPRESSION ="EXP4" .../> 
```

我使用 C# (LINQ to XML) 从上面的 XML 中获取一些信息。

在上面的 XML 中，您可以看到 . 您还可以看到 GROUP 节点的 EXPRESSION 属性只出现一次。我还有其他节点集，它们也包含节点，但它们具有多个 EXPRESSION 属性（===== 分隔符下方的节点）。

我的要求是，我想从 EXPRESSION 属性只出现一次的 GROUP 节点中提取一些信息。

我目前使用以下 C# 代码来提取信息：

```
 var q = from c in xmlDoc.Descendants("TRANSFORMATION")
                    where c.HasAttributes &&
                    c.Attribute("TYPE") != null && !String.IsNullOrEmpty(c.Attribute("TYPE").Value) &&
                    c.Attribute("TYPE").Value.ToUpper().Equals("ROUTER")

                    select c.Descendants("TRANSFORMFIELD"); 
```

但这使得所有 TRANSFORMFIELD 节点，包括具有 EXPRESSION 属性的 GROUP 节点仅出现一次。

如何获得具有 EXPRESSION 属性的 GROUP 节点多次出现的 TRANSFORMFIELD 节点？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T04:04:21.917

我不是 100% 确定我了解您的要求，但我认为您只想获取包含多个已定义元素的`TRANSFORMFIELD`所有内容。你可以这样做：`TRANSFORMATION``GROUP``EXPRESSION`

```
var query =
    from transform in doc.Descendants("TRANSFORMATION")
    where String.Equals((string)transform.Attribute("TYPE"), "router",
                        StringComparison.OrdinalIgnoreCase)
    // GROUP elements that have more than one EXPRESSIONs defined
    where transform.Elements("GROUP")
                   .Where(e => e.Attribute("EXPRESSION") != null)
                   .Skip(1).Any() // more than one
    select transform.Elements("TRANSFORMFIELD"); 
```

# xcode - 为什么 xcodebuild 给出的构建结果与 XCode UI 不同

> ID：10653065
> 
> 赞同：4
> 
> 时间：2012-05-18T12:54:38.627
> 
> 标签：xcode, build, xcodebuild, workspace

我在工作区中有一系列项目，并尝试使用以下类型的命令通过命令行构建它们：

```
"Xcodebuild -project XXX"
or 
"Xcodebuild -workspace XXX -scheme YYY" 
```

我的一些项目构建良好，但其他项目给出了奇怪的错误，例如“'XXX' 例如消息没有声明带有选择器的方法”或“ld：找不到 -lMyLibrary 的库”

然而，所有这些项目都可以在 XCode UI 中正常构建，没有问题。

基于此，命令行和 UI 构建似乎使用了不同的工具集，但这似乎是一个非常糟糕的主意，所以我希望我错了。或者可能在命令行构建中设置了几个不同的构建标志。

我可以尝试一一解决问题，但我希望我可以编写一个脚本，它与 UI 执行完全相同的构建类型。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:00:58.530

如果不包括`-configuration`，xcodebuild 将为每个项目使用默认配置。一般是Release。在 Xcode 中，您选择的配置将应用于每个项目，而不管默认值如何。

鉴于您的错误，您最可能的问题是您使用了构建窗格（[为什么我讨厌大型项目的构建窗格](http://robnapier.net/blog/build-system-1-build-panel-360)），并且您犯了一个经典错误，即为调试应用一些设置而不是所有配置。

# c - Unix-Waitpid '状态'

> ID：10653070
> 
> 赞同：1
> 
> 时间：2012-05-18T12:54:52.323
> 
> 标签：c, unix, signals, status, waitpid

我正在使用 C 语言开发 Unix-Shell。我使用 waitpid 来等待我的进程终止，我想知道我的子进程（使用 创建`fork()`）是否收到了类似`SIGSEGV`.

当前代码：

```
static const t_error    error[ERROR_NBR]= {
  {SIGHUP, "Hangup"},
  {SIGQUIT, "Quit (core dumped)"},
  {SIGABRT, "Abort (core dumped)"},
  {SIGBUS, "Bus error (core dumped)"},
  {SIGFPE, "Floating exception (core dumped)"},
  {SIGKILL, "Killed"},
  {SIGUSR1, "User signal 1"},
  {SIGSEGV, "Segmentation fault (core dumped)"},
  {SIGUSR2, "User signal 2"},
  {SIGPIPE, "Broken pipe"},
  {SIGTERM, "Terminated"},
};

void print_signal_message(int status)
{
 int i;
 if (WIFSIGNALED(status))
    status = WTERMSIG(status);
 else
    return ;
 i = -1;
 while (++i < ERROR_NBR)
   {
     if (status == error[i].error_status)
       {
         fprintf(stderr, "%s\n", error[i].error);
         return ;
       }
   }
 return ;
}
int             xwaitpid(int pid, int *status, int opt)
{
  int           ret;

  ret = waitpid(pid, status, opt);
  if (ret == -1)
    fprintf(stderr, "Can't perfom waitpid (pid = %d)\n", pid);
  if (WIFEXITED(*status))
    *status = WEXITSTATUS(*status);
  else
    **print_sigerr(*status);**
  return (ret == -1 ? (1) : ret);
} 
```

`xwaitpid`在父进程中调用。

似乎 WIFSIGNALED 总是返回 TRUE，即使我执行类似`false || true`.

有人有一个好主意可以帮助我吗？

-> 找到我的答案，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:08:15.173

```
if (WIFEXITED(*status))
    *status = WEXITSTATUS(*status); 
```

那是你的问题。在那之后你不能`WIFSIGNALED`继续`*status`，你已经丢失了`int`.

# java - 在 BigDecimal 中显示 0.20 而不是 0.2

> ID：10653071
> 
> 赞同：1
> 
> 时间：2012-05-18T12:54:54.400
> 
> 标签：java, bigdecimal

我只有一个问题:)

> BigDecimal val = BigDecimal.valueOf(0.20);
> System.out.println(a);

我想存储`val`一个值`0.20`而不是`0.2`。我可以做什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T12:56:13.283

当您想控制数字的格式时，请查看[`NumberFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html)特别是具体的[`DecimalFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)子类。

您可以从模式创建一个`DecimalFormat`，或者直接设置它的各个方面。然后你要求它格式化你的`BigDecimal`，它会给你字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T13:05:14.477

这是如何使用`DecimalFormat`以满足您的需要的小示例

```
double d = 1.2345;
DecimalFormat df = new DecimalFormat("#0.00");
System.out.println(df.format(d)); // will print 1.23
d = 3.400;
System.out.println(df.format(d)); // will print 3.40
d = 3.456;
System.out.println(df.format(d)); // will print 3.46

BigDecimal b = new BigDecimal(0.20001);
System.out.println(df.format(b)); // will print 0.20 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:59:23.933

您不能存储`0.20`而不是存储`0.2`在变量中，因为它们是相同的值。但是，您可以更改打印结果的方式。

您的问题让我假设您是 Java 编程的初学者。[您应该阅读本教程](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)以详细了解其工作原理，而不仅仅是简单的回答。

# delphi - Delphi XE2 现代外观 MainMenu

> ID：10653074
> 
> 赞同：1
> 
> 时间：2012-05-18T12:55:11.650
> 
> 标签：delphi, delphi-xe2

既然我们正在使用 Delphi XE-2，我正在尝试使旧的 Delphi 7 应用程序的外观现代化。我尝试了 TRibbon，虽然我喜欢它，但它可能不是正确的解决方案，因为我们目前使用 TMainMenu 并对它进行许多运行时更改 - 我们的用户可以修改主菜单。但是默认的 Mainmenu 看起来很旧，尤其是与显示的图像相比。

我想要做的是非常接近附加图像的东西，尤其是背景颜色，但我不太明白这是如何完成的。谁能告诉我这个例子（文件/视图/插入部分）是使用 TMainMenu，还是工具栏上的按钮？如果我们需要可自定义的主菜单，您认为显示的示例是一个选项吗？

此示例图像来自 DevExpress 打印示例库。

编辑：我是新来的，所以我不能包含图像。链接在这里 ：

[http://www.devexpress.com/Products/VCL/ExPrintingSystem/gallery.xml](http://www.devexpress.com/Products/VCL/ExPrintingSystem/gallery.xml)

第二张图片，绿色的，上面写着“打印预览”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:50:58.867

您可以使用 TActionMainMenuBar，但更简单的解决方案是使用 Vcl 样式，选择一个主题，修改 MainMenu 组件的图形属性，然后使用 StyleHooks 为 MainMenu 组件强制样式，而不将其用于整个应用程序。

# javascript - Ember.js 将参数从视图传递到控制器函数

> ID：10653084
> 
> 赞同：2
> 
> 时间：2012-05-18T12:55:58.843
> 
> 标签：javascript, ember.js

我有一个 Ember.js 应用程序，如下所示（借自andyMatthews.net 上的[这篇文章](http://www.andymatthews.net/read/2012/03/20/Reversing-the-output-of-an-Ember.js-content-array)）：

看法：

```
<script type="text/x-handlebars" >
    {{view App.UserTextField}}
    {{#each App.recentUsersArray.reverse tagName="ul"}}
        <li>{{this}}</li>
    {{/each}}
</script>​ 
```

应用程序：

```
App = Ember.Application.create();

App.UserTextField = Ember.TextField.extend({
    insertNewline: function(){
        var term = this.get('value');
        App.recentUsersArray.pushObject(term);
    }
});

App.recentUsersArray = Em.ArrayController.create({
    content: ['noelle', 'evan', 'mason'],
    reverse: function(){
        return this.get('content').toArray().reverse();
    }.property('content.@each').cacheable(),
});​ 
```

但我想从视图中向 App.recentUsersArray.reverse 传递一个参数（例如，设置要返回的反转项目的数量）。我遇到了一个问题，因为虽然您可以接受控制器函数上的参数，但您似乎无法从视图中传递它。如果您想将参数 3 传递给控制器​​上的反向函数，我正在想象这样的事情：

```
{{#each App.recentUsersArray.reverse(3) tagName="ul"}}
   <li>{{this}}</li>
{{/each}} 
```

但它会引发错误（未捕获的错误：解析错误）......想法？最终目标是创建三个`<ul>`，每个都有不同数量的元素*，而不*为每个长度创建不同的函数（即`App.recentUsersArray.reverseThree()`,`App.recentUsersArray.reverseFive()`等）。我也不想制作三个不同的控制器，因为每个`<ul>`'s 应该使用相同的数据源，只是切片不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T06:58:08.950

是的，Ember 可以作为一种奇怪的范式出现。也许尝试：

```
App.recentUsersArray = Em.ArrayController.create({
  recentCount: 3
  content: ['noelle', 'evan', 'mason'],
  reverse: function(){
      var max = this.get('recentCount');
      return this.get('content').reverse().slice(0, max)
  }.property('content.@each', 'recentCount').cacheable(),
});​

//some event handler
App.recentUsersArray.set('recentCount', count) 
```

我认为没有`toArray()`必要，而且文档说它不能保证返回元素的顺序：http: [//docs.emberjs.com/#doc=Ember.Enumerable&method=.toArray&src=false](http://docs.emberjs.com/#doc=Ember.Enumerable&method=.toArray&src=false)

# ruby-on-rails - 在 Papertrail 中显示单个记录的所有版本

> ID：10653085
> 
> 赞同：1
> 
> 时间：2012-05-18T12:56:02.440
> 
> 标签：ruby-on-rails, paper-trail-gem

我正在建立一个联赛系统，目前它根据结果存储和更新玩家的“elo score”。现在，我正在尝试添加“HighCharts”，以用漂亮的折线图显示本赛季球员的 elo 得分。有人建议我使用 Papertrail 来存储更新，我已经安装好了。

现在我的问题来了，我似乎无法弄清楚如何在一个易于“HighCharts”使用的数组中吐出用户 elo_score 版本。我可以获得 elo_score 的最新更新：

```
Last updated score = <%= @player.versions.last.reify.elo_score %> 
```

但我似乎找不到为“elo_score”吐出**所有**“版本”的语法。类似于“1000、1020、1043、1020”。

我也试过：

```
<%= @player.versions.map { |version| version.reify.elo_score} %> 
```

但这给了我“nil:NilClass 的未定义方法 `elo_score'”。虽然只是 <%= @player.versions.map { |version| version.reify %> 吐出记录中的*所有*信息，显然不仅仅是 elo_score。

任何人都可以帮忙吗？抱歉，如果我没有说清楚，我对 Rails 绝对是全新的，这只是我业余时间的一个有趣的项目，但我玩得很开心！

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:07:31.230

你在这里做了什么：

```
@player.versions.map { |version| version.reify.elo_score } 
```

将所有这些分数放在一个数组中是完全可以的。你得到的问题（`nil:NilClass`东西）来了，因为至少有一个`reify`是零。也就是说，某些版本没有具体化。

如果每个版本都应该有一个 reify，请务必将其添加为模型验证，并在您的代码中找到设置 reify 的位置并查看它为什么为零。

如果一个版本可以使用 nil reify，您可以通过多种方式完成它，但直接和明确的方式如下所示：

```
elo_scores = []
@player.versions.each do |version|
    unless version.reify.nil?
        elo_scores << version.reify.elo_score
    end
end 
```

我建议将其放入方法中，例如`get_elo_scores`，然后您可以更轻松地调用它：

```
@player.get_elo_scores 
```

**编辑**为了澄清评论：

您的 User 模型（或 Player 模型，无论您如何命名）应该具有如下所示的方法：

```
def get_elo_scores
    elo_scores = []
    self.versions.each do |version|
        unless version.reify.nil?
            elo_scores << version.reify.elo_score
        end
    end
    return elo_scores
end 
```

我很抱歉没有让这一点更清楚，但您将无法`@player`在此方法中访问，因为它仅存在于您的控制器和视图的上下文中。上面现在是一个适当的实例方法：它会调用`.versions`自己，其余的都很好。我还在最后添加了一个明确的返回调用。

现在您将能够调用`@player.get_elo_scores`任何用户（或播放器）对象。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-29T12:17:52.503

这是@MrDanA 答案的单行版本：

```
elo_scores = self.versions.map{|version| version.reify.elo_scores} 
```

请注意，您无法检查`version.reify.nil?`是否

# macos - OS X 上签名二进制文件的规范

> ID：10653087
> 
> 赞同：5
> 
> 时间：2012-05-18T12:56:05.200
> 
> 标签：macos, code-signing, mach-o

我正在寻找 OS X 上已签名二进制文件的内部格式的详细描述。对于 Windows 可执行文件，Microsoft 已经发布了[规范](http://download.microsoft.com/download/9/c/5/9c5b2167-8017-4bae-9fde-d599bac8184a/authenticode_pe.docx)，但我无法找到 OS X 应用程序（Mach-O 二进制文件）的等效文档。该命令的[手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/codesign.1.html)`codesign`没有描述如何修改文件。

有谁知道在哪里可以找到这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-12T19:28:13.647

当我遇到同样的问题时，我没有找到任何描述。似乎找出格式的最佳方法是查看 codesign 实用程序的来源。来源可以在

[http://www.opensource.apple.com/source/security_systemkeychain/security_systemkeychain-55191/src/codesign.h](http://www.opensource.apple.com/source/security_systemkeychain/security_systemkeychain-55191/src/codesign.h)

PS 构建它们非常棘手，我没有做到。

**更新：**查看[https://github.com/saucelabs/isign/](https://github.com/saucelabs/isign/)上的项目**isign**，其中 Apple 的代码设计在 Python 中重新实现，并且可以在 Linux 上运行。

# php - zend 框架兼容 xmpp facebook 聊天库或 sdk

> ID：10653101
> 
> 赞同：0
> 
> 时间：2012-05-18T12:57:22.883
> 
> 标签：php, facebook, zend-framework, xmpp, facebook-chat

我想将 facebook 聊天集成到我的 php zend 框架 1.11 项目中。

是否有任何与 zend 框架兼容的 facebook 聊天 xmpp 库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-09T12:04:19.907

我也被同样的问题困扰了好几天。最后我用[Strophe.js 来做](http://strophe.im/strophejs/doc/1.2.0/files/strophe-js.html)。它是一个很棒的图书馆。你也可以查看[Converse.js](https://conversejs.org/)。

# iphone - 在 presentModalViewController 之后 UITableView 不会响应

> ID：10653102
> 
> 赞同：0
> 
> 时间：2012-05-18T12:57:24.170
> 
> 标签：iphone, objective-c, xcode

我有一个带有 UITableView 的自定义类。如果我向班级展示：

```
MessageViewController *message = [[MessageViewController alloc] initWithNibName:@"MessageViewController" bundle: nil]; 
[self presentModalViewController: message animated: YES]; 
```

... tableView 不会响应 MessageViewController 中的触摸。

但是，如果我使用 pushViewController，一切正常..

```
MessageViewController *m = [[MessageViewController alloc] initWithNibName: @"MessageViewController" bundle: nil]; 
[self.navigationController pushViewController: m animated:YES]; 
```

但我想使用 presentModalViewController。

任何建议将不胜感激。

谢谢

编辑

如果我在代码中添加 UITableView，它可以工作......但不适用于界面生成器......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:03:54.933

尝试更改：

```
[self presentModalViewController: message animated: YES]; 
```

进入

```
[self.navigationController presentModalViewController: message animated: YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:50:11.290

使用这个模式没有出现，我认为是因为父视图没有导航控制器，不知道因为我是新来的......

# image - cakephp 2.1 如何以简单的形式上传图片并查看

> ID：10653106
> 
> 赞同：1
> 
> 时间：2012-05-18T12:57:56.347
> 
> 标签：image, cakephp, upload

如此简单的事情怎么会如此困难，这太疯狂了。

请致电所有 cakephp 2.1 大师。我有一个表单，它有一个名称和文本图像 (var) 字段。

我想简单地发布一张图片，没有调整大小，没有缩略图，没有什么特别的，只是一个简单的 mvc 示例，发布一张图片并在 view.ctp 中查看它。

而已。我已经浏览了 cakephp.org 上的 /en/2.1 书和 api，但我似乎无法让 mvc 工作，因为看到它上传到文件夹并在 ctp 中查看它。

我的控制器

```
public function add() {
    if ($this->request->is('post')) {
        $this->ListShExPainImage->create();
        if ($this->ListShExPainImage->save($this->request->data)) {
            $this->Session->setFlash(__('The list sh ex pain image has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The list sh ex pain image could not be saved. Please, try again.'));
        }
    }
}

public function view($id = null) {
    $this->ListShExPainImage->id = $id;
    if (!$this->ListShExPainImage->exists()) {
        throw new NotFoundException(__('Invalid list sh ex pain image'));
    }
    $this->set('listShExPainImage', $this->ListShExPainImage->read(null, $id));
} 
```

我的 add.ctp

```
<?php echo $this->Form->create('ListShExPainImage');?>
<fieldset>
    <legend><?php echo __('Add List Sh Ex Pain Image'); ?></legend>
<?php
    echo $this->Form->input('name');
    echo $this->Form->input('image', array('type' => 'file'));
?>
</fieldset>
<?php echo $this->Form->end(__('Submit'));?> 
```

我的观点.ctp

```
<h2><?php  echo __('List Sh Ex Pain Image');?></h2>
<dl>
    <dt><?php echo __('Id'); ?></dt>
    <dd>
        <?php echo h($listShExPainImage['ListShExPainImage']['id']); ?>
        &nbsp;
    </dd>
    <dt><?php echo __('Name'); ?></dt>
    <dd>
        <?php echo h($listShExPainImage['ListShExPainImage']['name']); ?>
        &nbsp;
    </dd>
    <dt><?php echo __('Image'); ?></dt>
    <dd>
        <?php echo h($listShExPainImage['ListShExPainImage']['image']); ?>
        &nbsp;
    </dd>
</dl> 
```

非常感谢您的帮助，在此先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T22:56:02.430

在您的控制器中，您没有对文件上传做**任何事情。**尽管 Cake 有时很神奇，但自动猜测你想用那个上传做什么并不是其中之一。

如[书中](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper%3a%3afile)所述，文件上传字段返回一个包含多个键的数据数组。您应该获取`name`密钥并将其保存为`image`字段（因为这就是您似乎在调用的内容）。例如：

```
$filename = $this->request->data['ListShExPainImage']['image']['name'];

// Move the image
move_uploaded_file(
    $this->request->data['ListShExPainImage']['image']['tmp_name'],
    '/path/to/your/image/dir/' . basename($filename)'
);

// Set the filename in the database
$this->request->data['ListShExPainImage']['image'] = $filename; 
```

此外，您需要为您的表单设置一个所谓的`multipart/form-data`enctype，以便能够通过将文件类型添加到[表单创建选项](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#options-for-create)来解析图像上传。

另外，不要忘记将文件从临时文件夹移动到最终位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T22:59:56.993

您还需要在表单中添加“类型”：

```
<?php echo $this->Form->create('ListShExPainImage', array('type' => 'file'));?> 
```

然后在控制器中做这样的事情：

```
if (is_uploaded_file($data['ListShExPainImage']['image']['tmp_name']))
{
    move_uploaded_file(
        $this->request->data['ListShExPainImage']['image']['tmp_name'],
        '/path/to/your/image/dir/' . $this->request->data['ListShExPainImage']['image']['name']
    );

    // store the filename in the array to be saved to the db
    $this->request->data['ListShExPainImage']['image'] = $this->request->data['ListShExPainImage']['image']['name'];
} 
```

然后执行您的创建和保存程序。

在您的视图中，您会执行以下操作来显示图像：

```
<?php echo $this->Html->image('/path/to/your/image/dir/' . $listShExPainImage['ListShExPainImage']['image']); ?> 
```

# c# - 为什么，如果我有两个 , “Enter”（在键盘上）被禁用？

> ID：10653108
> 
> 赞同：0
> 
> 时间：2012-05-18T12:58:01.873
> 
> 标签：c#, .net, forms, input, submit

代码 ：

```
<form id="form1" runat="server">
<div>
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
</div>
</form> 
```

如果我单击输入字段并按 Enter，它不会提交任何内容。为什么？以及如何确定每个输入框按 Enter 键调用哪个页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:03:56.590

您设置表单默认按钮：

```
<form id="Form1"
    defaultbutton="SubmitButton"
    runat="server"> 
```

或者您可以在代码中执行此操作 - Page_load：

```
Page.Form.DefaultButton = btnSearch.UniqueID; 
```

另一个有用的提示是您也可以设置`default button`on `asp:panel`。将您的“表单”包装到一个面板或多个面板中，这样您就可以设置多个`submit`按钮`Panel Control`：

```
<asp:Panel runat="server" id="pnlForm1" DefaultButton="btnSubmit">
   <asp:Button runat="server" id="btnSubmit"/>
</asp:Panel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:01:37.360

您可以将两个框放在单独的面板中，并为每个面板设置 DefaultButton。

**如果您使用 Button，则更新**DefaultButton 将起作用，LinkBut​​ton 仅在 IE 中起作用，有一些解决方法：

[在 asp.net 中将链接按钮设置为 asp:panel 的默认按钮](https://stackoverflow.com/questions/3581369/set-linkbutton-as-default-button-for-asppanel-in-asp-net)

[asp.net 中可重用的 Page_PreRender 函数](https://stackoverflow.com/questions/3642269/reusable-page-prerender-function-in-asp-net)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:13:55.997

使用 Jquery 来解决它：

```
$(document).ready(function () {
    $('body').bind('keypress', function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        var button = $("#<%= SubmitButton.ClientID %>");
        if (button != null && code == 13) {
            button.click();
        }
    });
}) 
```

或在 C# 中

```
Page.Form.DefaultButton = SubmitButton.UniqueID; 
```

[HtmlForm.DefaultButton 属性](http://msdn.microsoft.com/en-US/library/system.web.ui.htmlcontrols.htmlform.defaultfocus%28v=vs.80%29)

[在 ASP.NET 中使用 Panel.DefaultButton 属性和 LinkBut​​ton 控件](http://kpumuk.info/asp-net/using-panel-defaultbutton-property-with-linkbutton-control-in-asp-net/)

# java - 强制开发人员明确定义配置数据的键

> ID：10653109
> 
> 赞同：0
> 
> 时间：2012-05-18T12:58:03.230
> 
> 标签：java, configuration, enums, configuration-files

我们正在与多个开发人员合作一个项目，目前从配置文件中检索值有点“狂野的西部”：

*   每个人都使用一些字符串从 Config 对象中检索一个值
*   这些键分布在多个类和包中
*   有时甚至没有声明为常量
*   键的命名不一致，配置文件 (.properties) 看起来很乱

我想解决这个问题并强制每个人明确定义他们的配置键。理想情况下在一个地方简化配置键的实际外观。

我正在考虑使用 Enum 作为键并将我的检索方法变成：

```
getConfigValue(String key) 
```

变成类似的东西

```
getConfigValue(ConfigKey) 
```

注意：我正在使用这种方法，因为 Preferences API 对我来说似乎有点矫枉过正，而且我实际上希望将配置放在一个简单的文件中。

这种方法有什么缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:04:15.557

首先，FWIW，我认为这是个好主意。但是您确实特别询问了“缺点”是什么，所以：

最大的“缺点”是它将任何需要使用配置数据的`ConfigKey`类与该类联系起来。添加一个配置键用于向您正在处理的代码添加一个字符串；现在这意味着添加到`enum` *您*正在处理的代码中。这是（略微）更多的工作。

否则，您可能不会显着增加相互依赖性，因为我假设`getConfigValue`属于其中的类是您定义`enum`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:58:51.767

合并的另一个缺点是，如果您在同一代码库的不同部分有多个项目。当你开发时，你必须处理交付依赖，这可能是一个 PITA。

假设项目 A 和项目 B 计划按该顺序发布。在第 9 个小时突然政治力量发生变化，您必须在 A 之前交付 B。您是否重新打包配置来处理它？您的 QA 周期是否可以处理重新包装，或者是否会强制重置其时间线。

典型的发布问题，但只是您必须管理的另一件事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T21:25:55.967

从您的问题来看，很明显您打算为原始 Java Properties API 编写一个包装类，目的是让您的包装类提供更好的 API。我认为这是一个很好的方法，但我想提出一些我认为会改进你的包装 API 的东西。

我建议的第一个改进是检索配置值的操作应该采用两个参数而不是一个参数，并按以下伪代码所示实现：

```
class Configuration {
    public String getString(String namespace, String localName) {
        return properties.getProperty(namespace + "." + localName);
    }
} 
```

然后，您可以鼓励每个开发人员定义一个字符串常量值来表示他们正在开发的任何类/模块/组件的*命名空间*。只要每个开发人员（以某种方式）为其命名空间选择不同的字符串常量，您就可以避免意外的名称冲突并促进一些有组织的属性名称集合。

我建议的第二个改进是你的包装类应该提供对属性值的类型安全访问。例如，提供，`getString()`但也提供名称为`getInt()`、和的方法。变体应将属性值作为字符串检索，尝试将其解析为适当的类型，如果失败则抛出描述性错误消息。该方法应将属性值作为字符串检索，然后根据使用逗号作为分隔符将其拆分为字符串列表。这样做将为开发人员提供一种一致的方式来获取列表值。`getBoolean()``getDouble()``getStringList()``int/boolean/double``getStringList()`

我建议的第三个改进是你的包装类应该提供一些*额外*的方法，例如：

```
int getDurationMilliseconds(String namespace, String localName);
int getDurationSeconds(String namespace, String localName);
int getMemorySizeBytes(String namespace, String localName);
int getMemorySizeKB(String namespace, String localName);
int getMemorySizeMB(String namespace, String localName); 
```

以下是其预期用途的一些示例：

```
cacheSize = cfg.getMemorySizeBytes(MY_NAMSPACE, "cache_size");
timeout = cfg.getDurationMilliseconds(MY_NAMSPACE, "cache_timeout"); 
```

该`getMemorySizeBytes()`方法应将字符串值（例如`"2048 bytes"`或）`"32MB"`转换为适当的字节数，并`getMemorySizeKB()`执行类似的操作，但返回以 KB 而非字节为单位的指定大小。同样，这些`getDuration<units>()`方法应该能够处理字符串值，例如,`"500 milliseconds"`和（转换为 , 比如说）。`"2.5 minutes"``"3 hours"``"infinite"``-1`

有些人可能认为上述建议与提出的问题无关。实际上，他们确实如此，但以一种偷偷摸摸的方式。上述建议将产生一个配置 API，开发人员会发现它比“原始”Java 属性 API 更容易使用。他们将使用它来获得易于使用的好处。但是使用 API 会产生副作用，迫使开发人员采用命名空间约定，这将有助于解决*您*有兴趣解决的问题。

或者换个角度来看，问题中描述的方法的主要缺点是它提供了一种双赢的局面：*你赢*了（通过对开发人员强加一个属性命名约定），但*开发人员输了*，因为他们交换了熟悉的另一个 API 的 Java Properties API，它不为他们提供任何好处。相比之下，我提出的改进旨在提供双赢的局面。

# javascript - 在 IE/Safari 中无法访问谷歌地图

> ID：10653111
> 
> 赞同：0
> 
> 时间：2012-05-18T12:58:20.187
> 
> 标签：javascript, google-maps-api-3

我正在尝试将谷歌地图集成到我的项目中。在 Firefox 上，地图工作正常。但在 IE 和 Safari 中它会抛出一个错误说

> 在 IE 中，它说 GEO 位置不可用并抛出错误消息。
> 
> 在 Safari 中，弹出窗口简单地说 ERROR(2) 并抛出相同的错误消息。

我能为 ot.. 做什么

另外，我为我的项目创建了一个菜单，菜单栏在 Firefox 中很好，但在 Google Chrome 和 Opera 上没有显示。请为此提供建议和相应的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:27:24.450

您好，为了解决您的问题，请尝试阅读此[文档](http://support.google.com/maps/bin/answer.py?hl=en&answer=21849)

享受

# php - 使用循环（mysql，php）将记录列表插入表中

> ID：10653112
> 
> 赞同：0
> 
> 时间：2012-05-18T12:58:24.617
> 
> 标签：php, mysql

我有 2 张桌子。在`table_1`我有每天更新的不同任务。在`table_2`我有工人名单。我需要自动随机地将 1 个工作人员（table_2）分配给 1 个任务（table_1），这样每个工作人员将拥有大致相同数量的任务。

我尝试使用`rand()`方法，它随机分配但不均等，我的意思是一名工人可以比另一名工人有更多的任务要做。然后我尝试使用`count()`方法，但无法连接它们......我是 php 和 mysql 的新手 :(

我做了这样的东西，但只在 mysql 中，但由于（不是）功能，它只能工作一次。

```
insert into table_1(worker) 
    select col_1 from table_2 
    where col_1 not in (select worker from table_1) 
    order by col_1 rand() 
    limit 0,1; 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:15:32.150

为了随机分配任务，我首先将任务随机化，然后通过简单地遍历工作人员数组列表并在执行过程中一个接一个地将任务附加到它们上，将它们分发给工作人员。这是我的意思的一个想法。显然我没有你的代码的全部细节，但我希望它有所帮助。

```
// assuming you already have a list of tasks and workers fetched from the database
// and flattened into simple integer indexed arrays. I'll call them $workers 
// and $tasks

// create an array of tasks per worker
$worker_tasks = array();

// randomize the tasks
shuffle($tasks); // built in php function
while(!empty($tasks)){
    foreach($workers as $worker){
        if(empty($tasks)) break;

        // add a new task under the worker
        $worker_tasks[$worker][] = array_pop($tasks);
    }
}

// insert the array of worker_tasks into w/e table you want.
// high five everyone 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:26:54.947

我有2个解决方案给你。第一个更简单，但前提是您可以修改 table_2 以添加当前分配的任务数的字段。这将是一个计数器，您将初始化为 0，然后在每次分配任务时递增。如果您可以修改您的表，这将选择分配最少任务的工作人员：

```
select worker_id, MIN(tasks_assigned)
FROM table_2
GROUP BY worker_id 
```

这是一个循环分配器，但并不是那么随机。我认为公平分配更重要。如果您无法更改表格，则相同的解决方案会更加混乱：

```
CREATE TEMPORARY TABLE task_list
( worker_id INT,
  tasks_assigned INT )

SELECT INTO task_list
  SELECT worker_id, count(worker_id) AS tasks_assigned
  FROM table_1
  GROUP BY worker_id

SELECT INTO task_list
  SELECT worker_id, 0 
  FROM table_2
  WHERE worker_id NOT IN (SELECT worker_id FROM task_list)

SELECT worker_id MIN(tasks_assigned) 
FROM task_list
GROUP BY worker_id 
```

Obviously this isn't the entire solution. But this will give you a worker_id that has the fewest number of tasks assigned. You'll then have to use this id to do an update to your task table (table_1)

# css - css active 在 IE9 中不做鼠标释放

> ID：10653114
> 
> 赞同：2
> 
> 时间：2012-05-18T12:58:31.050
> 
> 标签：css, internet-explorer-9

当我在 IE9 中按下鼠标时，图像保持不变。我必须单击页面的其他部分才能将其备份。Firefox 和 Chrome 工作正常（他们放回原始图像）。有任何想法吗？

如果我使用 IE9 [http://www.w3schools.com/html/tryit.asp?filename=tryhtml_intro ，它甚至可以在这里工作](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_intro)

但如果我在桌面上创建一个 html 并在 IE9 中打开它，则不会。

```
<html>
<head>
<style type="text/css">
  #button{background:url("http://www.webstuffshare.com/wp-content/uploads/2010/03/button3.jpg") no-repeat 0 0;display:block;width:201px;height:67px;}
  #button:hover{background-position:0px -67px;}
  #button:active{background-position:0px -134px;}
  #button span{position:absolute;top:-99999999em;}
</style>    
</head>
<body>
  <a id="button" href="#"><span>this is foo</span></a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:38:47.107

最好使用 js 事件，因为它的`:active`行为可能不直观（类似问题；[：active css 选择器不适用于 IE8 和 IE9](https://stackoverflow.com/questions/5594102/active-css-selector-not-working-for-ie8-and-ie9)）

阻止您想要的行为的一种方法是；

```
<a id="button" href="#" onclick="this.blur();" onmouseout="this.blur();"><span>this is foo</span></a> 
```

# objective-c - 在 Objective-C 中是否默认初始化原始实例变量？

> ID：10653119
> 
> 赞同：7
> 
> 时间：2012-05-18T12:59:15.087
> 
> 标签：objective-c, initialization, instance-variables, primitive

在下面的代码中，使用它是否安全`_test`并期望它的价值为`NO`? 还是我需要始终明确地初始化它`- (id)init`？

```
@implementation Test {
    BOOL _test;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T13:02:55.830

可以安全地假设所有实例变量都将初始化为 0。

但是，对于本地/方法范围的变量，情况并非如此，如果不手动初始化，这些变量将指向垃圾。

为了将来参考，正如[Rob Napier 指出的那样](https://stackoverflow.com/a/10653168/732284#comment-13814806)，这可以在[以下文档中`+ (id)alloc`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/clm/NSObject/alloc)找到：

> 新实例的`isa`实例变量被初始化为描述类的数据结构；所有其他实例变量的内存设置为`0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:07:22.110

我习惯于显式初始化它，主要是因为可追溯性和可读性。但是，当您查看 的定义时`BOOL`，您会发现它`NO`只不过是`#define`0 的 a。因此，我假设您可以放心地期望`_test`是`NO`。

关于布尔值及其处理的一个非常好的帖子是[Objective-C：BOOL vs bool](https://stackoverflow.com/questions/541289/objective-c-bool-vs-bool)

# mysql - tomcat7, hibernate 4, struts 2, 没有找到合适的驱动

> ID：10653124
> 
> 赞同：0
> 
> 时间：2012-05-18T12:59:28.460
> 
> 标签：mysql, hibernate, postgresql, tomcat, struts

我在基于 struts 框架 2.3.3 和 tomcat 7.0.26 的项目中使用休眠 4.1.2。我也在使用 mysql（和 postgres）进行测试。这是我使用 MySql 的 hibernate.cfg.xml：

```
<session-factory>

  <property name="c3p0.min_size">5</property>
  <property name="c3p0.max_size">20</property>
  <property name="c3p0.timeout">300</property>
  <property name="c3p0.max_statements">50</property>
  <property name="c3p0.idle_text_period">3000</property>

  <property name="show_sql">true</property>

  <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
  <property name="connection.url">jdbc:mysql://localhost/struts2</property>
  <property name="connection.username">semperEst</property>
  <property name="connection.password">*******</property>
  <property name="dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>

  <!-- Enable Hibernate's automatic session context management -->
  <property name="current_session_context_class">thread</property>

  <!-- Disable the second-level cache -->
  <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

  <!-- Drop and re-create the database schema on startup -->
  <property name="hbm2ddl.auto">create-drop</property>

  <mapping class="firstname.secondname.lesson2.User"/>

</session-factory> 
```

我的 WEB-INF/lib 包含：

```
antlr-2.7.7.jar

asm-3.3.jar

asm-commons-3.3.jar

asm-tree-3.3.jar

commons-fileupload-1.2.2.jar

commons-io-2.0.1.jar

commons-lang-2.4.jar

commons-lang3-3.1.jar

dom4j-1.6.1.jar

freemarker-2.3.19.jar

hibernate-commons-annotations-4.0.1.Final.jar 

hibernate-core-4.1.2.Final.jar

hibernate-jpa-2.0-api-1.0.1.Final.jar

javassist-3.11.0.GA.jar

javassist-3.15.0-GA.jar

jboss-logging-3.1.0.GA.jar

jboss-transaction-api_1.1_spec-1.0.0.Final.jar

log4j-1.2.16.jar

mysql-connector-java-5.1.20-bin.jar

ognl-3.0.5.jar

postgresql-9.1-902.jdbc4.jar

slf4j-api-1.6.4-sources.jar

slf4j-log4j12-1.6.4.jar

struts2-core-2.3.3.jar

xwork-core-2.3.3.jar 
```

***我已经在 $CATALINA_HOME/lib 中添加了 mysql-connector-java-5.1.20-bin.jar***

但我仍然有这个例外：

**java.sql.SQLException：在 java.sql.DriverManager.getConnection(DriverManager.java:604)***找不到适合 jdbc:mysql://localhost/struts2 的驱动程序*****

 **```
 at java.sql.DriverManager.getConnection(DriverManager.java:190)

    at  org.hibernate.service.jdbc.connections.internal.
       DriverManagerConnectionProviderImpl.
       getConnection(DriverManagerConnectionProviderImpl.java:192) 

    at org.hibernate.internal.
       AbstractSessionImpl$NonContextualJdbcConnectionAccess.
       obtainConnection(AbstractSessionImpl.java:278)

    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.
       obtainConnection(LogicalConnectionImpl.java:297)

    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.
       getConnection(LogicalConnectionImpl.java:169)

    at org.hibernate.engine.transaction.internal.
       jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:67)

    at org.hibernate.engine.transaction.spi.
       AbstractTransactionImpl.begin(AbstractTransactionImpl.java:160)

    at org.hibernate.internal.SessionImpl.
       beginTransaction(SessionImpl.java:1363)

    at firstname.lastname.lesson2.
       PortfolioService.usernameExists(PortfolioService.java:122)

    at firstname.lastname.lesson2.CreateUser.validate(CreateUser.java:255)

    at com.opensymphony.xwork2.validator.ValidationInterceptor.
       doBeforeInvocation(ValidationInterceptor.java:251)

    at com.opensymphony.xwork2.validator.ValidationInterceptor.
       doIntercept(ValidationInterceptor.java:263)

    at org.apache.struts2.interceptor.validation.
       AnnotationValidationInterceptor.
       doIntercept(AnnotationValidationInterceptor.java:68)
at 
     .
     .
     .(struts activation frame...)
     .
     at org.apache.catalina.core.ApplicationFilterChain.
        internalDoFilter(ApplicationFilterChain.java:243)

     at org.apache.catalina.core.ApplicationFilterChain.
        doFilter(ApplicationFilterChain.java:210)

     at org.apache.catalina.core.StandardWrapperValve.
       invoke(StandardWrapperValve.java:224)

     at org.apache.catalina.core.StandardContextValve.
        invoke(StandardContextValve.java:169)

      at org.apache.catalina.authenticator.AuthenticatorBase.
        invoke(AuthenticatorBase.java:472)

      at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)

      at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)

      at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)

      at org.apache.catalina.core.StandardEngineValve.
         invoke(StandardEngineValve.java:118)

      at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)

      at org.apache.coyote.http11.AbstractHttp11Processor.
          process(AbstractHttp11Processor.java:987)

      at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.
         process(AbstractProtocol.java:579)

      at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.
         run(JIoEndpoint.java:307)

      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)

      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)

      at java.lang.Thread.run(Thread.java:722) 
```

使用 postgres，同样的问题。一切都在一个独立的应用程序中工作，没有 struts 和 tomcat。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T21:14:49.690

发生这种情况时的常见问题（“找不到合适的驱动程序”）是您的 JDBC 库位于错误的位置（取决于您的要求）或位于太多位置（例如在 WEB-INF/lib 中）如在容器的 lib/ 目录中）。

哪个组件实际上在创建您的 JDBC 连接池？如果是 Tomcat（似乎并非如此），那么您的 mysql.jar 需要位于 Tomcat 的 lib/ 目录中（特别是不在您的 webapp 的 WEB-INF/lib 中）。如果您在 webapp 中执行所有操作，那么您可能希望 mysql.jar 位于 webapp 的 WEB-INF/lib 和 Tomcat 的 lib 目录中的 /not/ 中。

如果您有多个 webapps，其中一些正在使用 Tomcat 的 DataSource 配置，那么最好将 mysql.jar 放入 Tomcat 的 lib/ 目录中，并将其从所有 webapps 的 WEB-INF/lib 目录中删除。**

# r - 标记 coplot 子图

> ID：10653125
> 
> 赞同：4
> 
> 时间：2012-05-18T12:59:34.383
> 
> 标签：r, plot

有没有办法让每个“给定”变量的标签显示在它各自的子图中？例如，在下面的图中（`x`和`y`数字，`c`因子，称为 using `coplot(y ~ x | c)`），在每个图上放置一个小文本框或标签会很有帮助，指示图中`c`的哪个因子代表（点击查看embiggerment）：

[![大型共情节](../Images/36355a7e37fd404e801df54db63029bc.png)](https://i.stack.imgur.com/PE8fj.png)

谢谢！

# python - 获取 Python 中线程的所有统计信息

> ID：10653126
> 
> 赞同：0
> 
> 时间：2012-05-18T12:59:40.113
> 
> 标签：python, multithreading, python-multithreading

在我的应用程序中，我使用线程模块创建了许多线程，我需要尽可能多地获取有关它们的信息。没有任何问题，我可以获取有关运行时间的信息。但是如何获取线程的内存使用情况和 CPU 使用情况（最好是 CPU 时间）等信息。

我找到了 yappi 模块，但它不适合我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:29:48.153

好吧，我不知道您使用的是哪个操作系统，但我建议您寻找您的操作系统提供的工具或 api 来解决这个问题。

例如，在 Linux 中，每个进程都存在一个目录`/proc/[pid]/`，[pid] 是进程 ID。在此目录中，您将找到各种伪文件，其中包含有关该过程的几乎每个方面的信息。您可以像任何其他文件一样在 python 中打开这些文件，因此很容易获得这些信息。对于您的问题，最重要的文件之一是`/proc/[pid]/stat`.

还有其他目录`/proc/[pid]/task/[tid]`，[tid] 与线程 ID 一致。这些保存每个线程的信息。

所以你在 Linux 中看到你可以通过简单的文件操作来获取你的信息，比如`open()`和`.read()`. 我怀疑大多数其他操作系统也会以一种或另一种方式提供这些信息。

要了解有关`/proc`使用[man proc](http://linux.die.net/man/5/proc)的更多信息。

# php - PHP/MYSQL - 与通过 php 添加到 mysql 表相关的令人困惑的代码块

> ID：10653128
> 
> 赞同：0
> 
> 时间：2012-05-18T13:00:05.520
> 
> 标签：php, mysql, if-statement

有人能告诉我为什么在我的脚本中运行以下代码块时，会触发错误，但是当直接通过 php myadmin 尝试 sql 查询时，没有问题。

脚本中正在运行一个 mysql 连接。

```
// Generate a random key and add details to specials table
$email = $_POST['specials'];
$randomKey = substr(str_shuffle(str_repeat('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',12)),12);
$sql = "
    INSERT INTO specials SET
    id='',
    email='$email',
    verified='0',
    `key`='$randomKey',
    timestamp=NOW()
";
if (!mysqli_query($link, $sql))
{
    $error = 'Error adding email address to specials table.';
    include "$docRoot/html/main/error.html.php";
    exit();
} 
```

我很确定我已经正确地编写了代码，在我进行跟踪和错误测试之前，我认为有人可以简要查看一下，并告诉我他们是否发现了任何明显的错误，这些错误可能没有让我发现。

感谢您花时间阅读本文！

编辑：

使用以下代码：

```
if (!mysqli_query($link, $sql12))
{
    echo mysqli_error();
    $error = 'Error adding email address to specials table.';
    include "$docRoot/html/main/error.html.php";
    exit();
} 
```

我得到以下输出：

`Warning: mysqli_error() expects exactly 1 parameter, 0 given in /serveraddress/includes/inc/assistors/controllers.inc.php on line 161`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:05:16.990

试试这个看看它到底返回了什么

```
$result = mysqli_query($link, $sql);
var_dump($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:19:38.883

您能否检查一下是否有任何字段是数字？您正在每个中发送字符数据，因此这可能是 SQL 失败的原因。

既然您提到 ID 是一个 INT 那么请使用下面的修改代码：

```
// Generate a random key and add details to specials table
$email = $_POST['specials'];
$randomKey = substr(str_shuffle(str_repeat('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',12)),12);
$sql = "
    INSERT INTO specials SET
    id=0,
    email='$email',
    verified=0,
    `key`='$randomKey',
    timestamp=NOW()
";
if (!mysqli_query($link, $sql))
{
    $error = 'Error adding email address to specials table.';
    include "$docRoot/html/main/error.html.php";
    exit();
} 
```

`''`表示空白字符串，MySQL 无法成功地将空白字符串转换为 INT 类型的数字，因此它使您的 SQL INSERT 命令失败。因此，您需要发送，`0`或者如果您的 ID 列允许，`NULL`那么您也可以发送`NULL`. 但是发送`''`会产生错误。

这里要注意的一点是，`'0'`您发送给验证的内容不会触发错误，因为`'0'`成功转换为`0`，因此 MySQL 没有问题。

`''`当您尝试将空白字符串保存到 ID 列时，正在生成错误。

# xml - 使用 XQuery 得到不正确的结果？

> ID：10653134
> 
> 赞同：1
> 
> 时间：2012-05-18T13:00:34.177
> 
> 标签：xml, xpath, xquery

以下是 XML 文件 -

```
<Chapters>
  <Chapter n="1">
    <Desc>....</Desc>
    <References>
       <BookRef>HTML : in 21 Days</BookRef>
       <Page>12, 13</Page>
       <BookRef>HTML : Unlimited</BookRef>
       <Page>21, 22</Page>
       <BookRef>The Complete Reference - HTML</BookRef>
       <Page>32-35</Page>
    </References>
  </Chapter>
  <Chapter n="2">
    <Desc>....</Desc>
    <References>
       <BookRef>HTML : in 21 Days</BookRef>
       <Page>52, 53</Page>
       <BookRef>The Complete Reference - HTML</BookRef>
       <Page>132-145</Page>
       <BookRef>The Complete Reference - Javascript</BookRef>
       <Page>132-145</Page>
    </References>
  </Chapter>
</Chapters> 
```

我正在尝试列出 - 所有包含的`HTML`单词使用 `/Chapters/Chapter/References[BookRef contains text 'HTML']/BookRef`

但是一切都被显示出来了……！！检索相同内容的 XQuery 将是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:10:17.037

尝试以下一种：

```
/Chapters/Chapter/References/BookRef[. contains text 'HTML'] 
```

否则，`References`将返回具有`BookRef`包含 的节点的所有节点`HTML`，并且接下来的步骤将返回所有`BookRef`节点（即，您丢失了哪些 BookRef 节点具有搜索到的令牌的信息）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T13:11:21.090

**你想要**：

```
/Chapters/Chapter/References/BookRef[contains(., 'HTML')] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T13:08:55.397

使用 XPath =`/Chapters/Chapter/References/BookRef[contains(., 'HTML')]`

# android - Android - 未找到 Youtube 3gp 文件

> ID：10653139
> 
> 赞同：1
> 
> 时间：2012-05-18T13:00:56.780
> 
> 标签：android, youtube-api, android-video-player

我正在尝试在我的 Android 应用上播放 youtube 视频，但我无法访问从 Youtube Api 返回给我的 3gp 网址。我也尝试在 VLC 播放器和 QuickTime 播放器中打开它，但响应始终是播放器无法接收数据。这是 VLC 播放器日志：

> 主调试：`rtsp://v5.cache2.c.youtube.com/CiILENy73wIaGQmyk7Qe6Z5HyRMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp' successfully opened live555 warning: no data received in 10s. Switching to TCP avcodec debug: ffmpeg codec (H263) stopped main debug: removing module "avcodec" main debug: killing decoder fourcc`h263'，FIFO avcodec 中的 0 PES 调试：ffmpeg 编解码器（AMR 窄带）停止主调试：删除模块“avcodec”主调试：杀死解码器fourcc`samr', 0 PES in FIFO main debug: Program doesn't contain anymore ES live555 debug: RTP subsession 'video/H263-2000' main debug: looking for decoder module: 32 candidates avcodec debug: libavcodec already initialized avcodec debug: trying to use direct rendering avcodec debug: ffmpeg codec (H263) started main debug: using decoder module "avcodec" main debug: TIMER module_need() : 0.758 ms - Total 0.758 ms / 1 intvls (Avg 0.758 ms) main debug: thread (decoder) created at priority 0 (../../src/input/decoder.c:301) main debug: thread started live555 debug: RTP subsession 'audio/AMR' main debug: looking for decoder module: 32 candidates avcodec debug: libavcodec already initialized avcodec debug: ffmpeg codec (AMR narrow band) started avcodec debug: Using 192000 bytes output buffer main debug: using decoder module "avcodec" main debug: TIMER module_need() : 391.931 ms - Total 391.931 ms / 1 intvls (Avg 391.931 ms) main debug: thread (decoder) created at priority 22 (../../src/input/decoder.c:301) main debug: thread started live555 debug: setup start: 0.000000 stop:28.666000 live555 debug: play start: 0.000000 stop:28.666000 live555 error: no data received in 10s, aborting main debug: EOF reached main debug: finished input avcodec debug: ffmpeg codec (H263) stopped main debug: removing module "avcodec" main debug: killing decoder fourcc`h263'，FIFO avcodec 调试中的 0 PES：ffmpeg 编解码器（AMR 窄带）停止主调试：删除模块“avcodec”主调试：杀死解码器fourcc `samr'，FIFO 主调试中的 0 PES：删除模块“live555”主调试: 程序不再包含 ES main debug: 线程结束 main debug: 死输入 main debug: 在没有请求的情况下更改项目（当前 0/1） main debug: 没什么可玩的 macosx debug: 输入已停止，正在刷新界面 main debug: 'rtsp://v5.cache2.c.youtube.com/CiILENy73wIaGQmyk7Qe6Z5HyRMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp'的定时器输入启动：449.262 ms - 总计 449.262 ms / 1 intvls（平均 449.262 ms）

这是Android日志：

> 05-18 14:51:42.008: D/MediaPlayer(2152): 无法在客户端打开文件，尝试服务器端 05-18 14:51:42.258: D/MediaPlayer(2152): getMetadata 05-18 14: 51:53.823: E/MediaPlayer(2152): 错误 (1, -2147483648) 05-18 14:51:53.823: E/MediaPlayer(2152): 错误 (1,-2147483648) 05-18 14:51:53.823: D/VideoView(2152): 错误: 1,-2147483648 05-18 14:51:54.060: D/AndroidRuntime(2152): 关闭 VM 05-18 14:51:54.060: W/dalvikvm(2152): threadid= 1：线程以未捕获的异常退出（组= 0x409c01f8）05-18 14：51：54.088：E/AndroidRuntime（2152）：致命异常：主要05-18 14：51：54.088：E/AndroidRuntime（2152）：android。 view.WindowManager$BadTokenException: 无法添加窗口——令牌 android.app.LocalActivityManager$LocalActivityRecord@418c8408 无效；您的活动正在运行吗？05-18 14:51:54.088: E/AndroidRuntime(2152):

还有我的 VideoActivity 类来播放视频：

```
 public class VideoActivity extends Activity{

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.video);

            VideoView videoView = new VideoView(this);
            String urlRtsp = "rtsp://v5.cache2.c.youtube.com/CiILENy73wIaGQmyk7Qe6Z5HyRMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp";
            videoView.setVideoURI(Uri.parse(urlRtsp));
            videoView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));

            videoView.setMediaController(new MediaController(this));
            videoView.requestFocus();
            videoView.start();
            LinearLayout main = (LinearLayout) findViewById(R.id.video_layout);
            main.addView(videoView);        
       }

    } 

```

我想了解的是这是 Youtube 问题还是我的代码有问题。我尝试过很多视频，代码中的视频只是我最后一次尝试。我正在使用 Android SDK 版本 15。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:36:35.977

将其作为答案发布为 OP 使用此建议解决了它，以便它可以帮助任何其他寻找类似解决方案的人。

有一个开源项目可以在 中播放 YouTube 视频`VideoView`，名为[android-youtube-player](http://code.google.com/p/android-youtube-player/)。还提供了一个样本`Activity`，以便可以测试该组件。

# java - 配置 p2 存储库管理器以编程方式使用客户端证书连接到 HTTPS 存储库（-ies）

> ID：10653145
> 
> 赞同：2
> 
> 时间：2012-05-18T13:01:28.170
> 
> 标签：java, eclipse, osgi, p2

我想配置 p2 存储库管理器以连接到 HTTPS 存储库（Apache + 客户端证书）。

有几种方法可用于加载存储库：

```
public IMetadataRepository loadRepository(URI location, IProgressMonitor monitor) throws ProvisionException, OperationCanceledException;
public IMetadataRepository loadRepository(URI location, int flags, IProgressMonitor monitor) throws ProvisionException, OperationCanceledException;
public IArtifactRepository loadRepository(URI location, IProgressMonitor monitor) throws ProvisionException;
public IArtifactRepository loadRepository(URI location, int flags, IProgressMonitor monitor) throws ProvisionException; 
```

使用`location`参数我可以提供 URI 到 HTTPS 服务器。如何提供包含客户端和 CA 证书的密钥库/信任库的路径？我不喜欢对 Java 进程使用全局密钥库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:38:13.337

找到了解决方案。p2 使用[ECF](http://www.eclipse.org/ecf/)作为通信层。

要激活 SSL 支持：

*   安装和启动捆绑包：`org.eclipse.ecf.provider.filetransfer.httpclient.ssl`和/或`org.eclipse.ecf.provider.filetransfer.ssl`
*   使用密钥库创建 SSLSocketFactory 对象并注册为 OSGi 服务

    > SSLContext sslContext = SSLContext.getInstance("SSL");
    > 
    > sslContext.init(keymanagers, trustmanagers, null);
    > 
    > SSLSocketFactory 工厂 = sslContext.getSocketFactory();
    > 
    > bundleContext.registerService(SSLSocketFactory.class.getName(), factory, null);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:35:54.660

请参阅“安全存储运行时选项”帮助章节：[http ://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Freference%2Fref-securestorage-options.htm](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Freference%2Fref-securestorage-options.htm)

...还有[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fruntime-options.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fruntime-options.html)

```
-eclipse.keyring <file path> (Equinox)
    Set to override location of the default secure storage 
```

可能您可以以某种方式以编程方式设置此值，请查看源代码。

# c# - 将 Devexpress WaitForm 显示为对话框

> ID：10653146
> 
> 赞同：1
> 
> 时间：2012-05-18T13:01:32.773
> 
> 标签：c#, devexpress

我想`WaitForm`在用户中显示一个，同时做一个很长的后台操作。

我将 a`Thread`用于这项工作，并在工作完成时使用事件得到通知。

在这种情况下，我想集成一个 DevExpress WaitForm。

此表单可以在作业将要开始时显示（从线程内部或外部），并且可以在完成事件触发时停止。

`.ShowWaitForm`from只是显示`SplashScreenManager`表格。如何让表单在等待时丢弃窗口消息？

例如：我不希望用户在等待时能够单击按钮和东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-09T15:51:53.597

您必须创建继承的表单并覆盖 SetDescription() 和 SetCaption()。您将根据自己的喜好使用一些图标或动画 gif 来装饰表单。在下面的示例中，我创建了一个名为 MyWaitForm 的表单，并简单地放置了两个标签来显示描述和标题文本。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace DXApplication1
{
    public partial class MyWaitForm : DevExpress.XtraWaitForm.WaitForm
    {
        public MyWaitForm()
        {
            InitializeComponent();
        }

        public override void SetDescription(string description)
        {
            base.SetDescription(description);

            lbDescription.Text = description;
        }

        public override void SetCaption(string caption)
        {
            base.SetCaption(caption);

            lbCaption.Text = caption;
        }
    }
} 
```

这里是 Visual Studio 设计器中所示的 MyWaitForm： [![在此处输入图像描述](../Images/5861932906478de317fe54d13ec761e3.png)](https://i.stack.imgur.com/xhR16.png)

之后，您将使用 Devexpress 代码示例来显示 WaitForm

[https://documentation.devexpress.com/#WindowsForms/CustomDocument10832](https://documentation.devexpress.com/#WindowsForms/CustomDocument10832)

但是将您的 MyWaitForm 类类型传递给 SplashScreenManager.ShowForm() 方法：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using DevExpress.XtraSplashScreen;
using System.Threading;

namespace WaitForm_SetDescription {
    public partial class Form1 : Form {
        public Form1() {
            InitializeComponent();
        }

        private void btnShowWaitForm_Click(object sender, EventArgs e) {
            //Open MyWaitForm!!!
            SplashScreenManager.ShowForm(this, typeof(MyWaitForm), true, true, false);

            //The Wait Form is opened in a separate thread. To change its Description, use the SetWaitFormDescription method.
            for (int i = 1; i <= 100; i++) {
                SplashScreenManager.Default.SetWaitFormDescription(i.ToString() + "%");
                Thread.Sleep(25);
            }

            //Close Wait Form
            SplashScreenManager.CloseForm(false);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:57:43.433

据我所知，WaitForm 的当前实现不允许它显示为对话框。我[找到](http://www.devexpress.com/Support/Center/Search?searchString=WaitForm%20as%20a%20modal%20dialog)了提供此功能的建议：[SplashScreenManager - 提供将 WaitForm 显示为模式对话框的功能](http://www.devexpress.com/Support/Center/Question/Details/S39550)。因此，您可以跟踪它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-26T16:50:17.043

你可以这样使用；

```
SplashScreenManager.ShowForm(typeof(WaitForm1));
........
your code
........
SplashScreenManager.CloseForm(); 
```

# android - 在android应用程序中集成google place api

> ID：10653149
> 
> 赞同：1
> 
> 时间：2012-05-18T13:01:41.680
> 
> 标签：android

我正在关注这个链接

[http://ddewaele.blogspot.in/2011/05/introducing-google-places-api.html](http://ddewaele.blogspot.in/2011/05/introducing-google-places-api.html)

我下载了 google place api 的示例代码

[https://github.com/tuthan/Google-Place-Api-Demo](https://github.com/tuthan/Google-Place-Api-Demo)

当我运行项目并单击按钮时，它会强制关闭并在 logcat 处出错

> com.google.api.client.http.apache.ApacheHttpTransport'，引用自方法 hang.vo.PlaceRequest。
> 
> ```
> Could not find class 'hung.vo.PlaceRequest$1', referenced from method hung.vo.PlaceRequest.createRequestFactory
> 
> Could not find class 'com.google.api.client.http.GenericUrl', referenced from method hung.vo.PlaceRequest.performSearch
> 
> Caused by: java.lang.VerifyError: hung.vo.PlaceRequest hung.vo.hung.vo.GooglePlaceActivity$SearchSrv.doInBackground(GooglePlaceActivity.java:36) 
> ```
> 
> 在 GooglePlaceActivity 第 36 行是
> 
> pl = new PlaceRequest().performSearch();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:29:34.483

在 android manifest 文件中添加这一行

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# linux - 在正则表达式之后更改行的一部分

> ID：10653157
> 
> 赞同：1
> 
> 时间：2012-05-18T13:02:21.813
> 
> 标签：linux, bash, sed, awk

如何在正则表达式之后更改行的一部分？

我有一个文件，我需要在其中修改行（动态），`name =`但只有在行之后`cluster {`的那个。文件是这样的：

```
cluster {
  name = "Some _ Name"
  owner = "Cavendish Laboratory"
  .....
  .....
}
module {
    name = "core_metrics"
}
service {
    name = "ssh_check"
}
......
...... 
```

我可以分别执行这两个任务，例如：

```
sed -n '/cluster\ {/{n;p;}'               # next line after cluster
sed -ic "/name\ =\ /{s:OLD:NEW:g}"        # replace OLD with NEW on the fly 
```

但是我如何将这两者结合起来得到最终结果，例如：？

```
cluster {
  name = "Worker Nodes"
  owner = "Cavendish Laboratory"
  .....
  .....
} 
```

我怎么做？干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:21:36.340

这是我“用文字”做的方式：

1）阅读每一行

2) 每当一行模式匹配`cluster {`时，设置一个布尔变量`wasClusterLine = true`

3）在下一行，如果`wasClusterLine`是真的，那么你的正则`name =`表达式替换当前行

4) set `wasClusterLine = false`，因为你只想在`cluster {`.

希望有帮助！这是一个应该执行我上面描述的 perlscript。

```
使用严格；
我的 $wasClusterLine = 0;
而（<标准输入>）{
        咀嚼$_;

        if($wasClusterLine == 1) {
                $_ =~ s/name = .*/name = "工作节点"/g;
        }
        $wasClusterLine = 0;

        if($_ =~ /cluster/) {
                $wasClusterLine = 1;
        }

        打印“$_\n”；
}

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:36:43.787

这可能对您有用：

```
old="Some _ Name" new="Worker Nodes"

sed '/cluster {/,/}/s/name = "'"$old"'"/name = "'"$new"'"/' file
cluster {
  name = "Worker Nodes"
  owner = "Cavendish Laboratory"
  .....
  .....
}
module {
    name = "core_metrics"
}
    service {
    name = "ssh_check"
}
......
...... 
```

*   关注 和 之间的`cluster {`线`}`。`/cluster {/,/}/`
*   代替`new`_`old` `s/name = "'"$old"'"/name = "'"$new"'"/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T22:00:49.613

这是一个 Perl 单行代码：

```
perl -ple 'do {$_ =~ s/name = .*/name = "Worker Nodes"/; $flag = 0} if $flag; $flag = 1 if $_ =~ /cluster/' inputfile 
```

# java - 在哪里下载 java.util.*、java.io.* 类？

> ID：10653158
> 
> 赞同：-1
> 
> 时间：2012-05-18T13:02:24.123
> 
> 标签：java, url, io, download

我设法下载了一个名为“Robobmbo”的java游戏文件。但是我遇到了一些问题。大多数类都导入了其他类，例如`java.net.URLConnection`. 但我不知道在哪里可以找到这些文件。谁能告诉我在哪里可以下载：`java.net.*`，，`java.io.*`等等。?

下面的示例来自 MusicPlayer.class。它应该在游戏中播放模块音乐曲目。我很难找到这个模块。我相信模块的链接在`URLConnection`or中`URL`。如何打开`URLConnection`类文件？

```
package game;

import java.io.BufferedInputStream;
import java.net.URL;
import java.net.URLConnection;
import java.util.Hashtable;
import java.util.zip.ZipInputStream;
import litecom.Trace;
import litecom.modplayer.Mod;
import litecom.modplayer.ModPlayer; 
```

我下载了 Eclipse，打开它，然后尝试打开类文件，但它失败了。我搜索了互联网，发现你应该去`preference > general editor`和`Class File Editor`作为默认值。但是列表中没有类编辑器:(。我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T13:05:20.277

io、util 等包是核心 Java API 的一部分，应该与您的 JRE 一起使用。

请您粘贴您遇到的错误。

-- 因为你的更新 --

URL 类是Java API 的一部分——也就是说，当您安装Java 时，您会看到它。

尝试安装 Java + Eclipse，然后在 Eclipse 中打开这个文件，右键单击你找不到的类，然后选择“定义”，它会告诉你它们来自哪里。

但是 - 善良 - 这是一个可怕的问题，您已经下载了 Java 代码并且不了解如何编译或编辑它的基本知识。

# php - 如何使用 MIME 验证文件？

> ID：10653159
> 
> 赞同：3
> 
> 时间：2012-05-18T13:02:25.130
> 
> 标签：php, javascript, jquery, ajax

我想使用 php 验证服务器中的文件类型。现在我已经通过检查文件的文件扩展名类型来验证它。这可以正常工作，但问题是这不是作为用户验证文件的最佳方法，更改可以将文本文件转换为 jpeg 并且仍然能够上传它。

所以我想做的是添加另一种验证方法，我还想使用 php 检查文件的 MIME 类型，以识别文件是图像、视频还是音频。

所以我的问题是它是如何编码的，以便我可以在 php 中使用 MIME 类型来验证文件？另外，如果我有一个非常大的文件，MIME 验证是否需要很长时间才能启动，还是立即验证？

以下是我目前仅用于图像的代码，它使用 php 代码检查文件类型：

```
<?php
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Error: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:14:25.530

MIME 类型查找通常非常快，在 PHP 中，您可以使用[`finfo`](http://www.php.net/manual/en/function.finfo-file.php)扩展来完成。例子：

```
$finfo = finfo_open(FILEINFO_MIME_TYPE);
$mimetype = finfo_file($finfo, '/path/to/file.jpg'); // image/jpeg
finfo_close($finfo); 
```

此外，您不应该依赖超全局的`type`索引`$_FILES`，因为该值可能会被攻击者可能想要的任何东西所欺骗。当然，文件扩展名也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:18:29.107

您可以使用[getID3()](http://getid3.sourceforge.net/)。[getimagesize](http://de.php.net/getimagesize)也可以让您放心。

javascript 代码在这里似乎无关紧要。此外，您可能知道，中指示的类型`$_FILES`仅应被视为来自用户/浏览器的建议。

# facebook - 通过图形 API 将照片上传到 Facebook 的可能方法有哪些？

> ID：10653161
> 
> 赞同：0
> 
> 时间：2012-05-18T13:02:28.997
> 
> 标签：facebook, facebook-graph-api

通过图形 API 将照片上传到 Facebook 的可能方式有哪些？我知道你可以通过发给我/照片来做到这一点。还有其他方法可以通过图形 API 上传照片吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:13:20.130

您还可以在帖子旁边上传照片。

来自[Graph API 文档](https://developers.facebook.com/docs/reference/api/)：

> 我们支持编写以下类型的对象：
> 
> 方法：/PROFILE_ID/feed
> 描述：在给定配置文件的提要/墙上发布新帖子
> 
> 参数：消息、**图片**、链接、名称、标题、描述、来源、地点、标签

这里是更详细的“发布”对象[。](https://developers.facebook.com/docs/reference/api/post/ "这里")

# regex - Django搜索存储在模型中的正则表达式列表

> ID：10653162
> 
> 赞同：2
> 
> 时间：2012-05-18T13:02:36.493
> 
> 标签：regex, django, django-models, filtering

这是我的问题。
我有一个带有正则表达式列表的模型，比如说

```
|__Field_|  
| (\w+)  |  
| ([op]+)|  
| .*     |  
| others.| 
```

我有一个单词列表，比如说（'cat'，“dog”，“wolf”），我需要找到存储在我的模型中的哪个正则表达式与我列表中的一个单词（或多个单词）匹配......
它是就像一个反向 __regexp 过滤器。
我怎样才能实现这个功能？

有没有更好的方法来做这样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:02:00.603

你没有指定两个重要的事情：

*   你用的是什么数据库？
*   您可以在 PCRE 和 POSIX 正则表达式之间切换吗？

假设您使用的数据库允许使用正则表达式执行查询，并且您的数据库支持您需要的标准（PCRE/POSIX），您可以使用[extra() Queryset 修饰符](https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra)`__regex`进行反向过滤。看看下面的代码：

```
Model.objects.extra(where=[sql_regex('REGEX_COLUMN')], params=['TEXT TO MATCH']).all() 
```

代码`sql_regex()`类似于：

```
from django.db import backend

def sql_regex(column, type='regex'):
    op = backend.DatabaseWrapper.operators[type].replace('%s', column)
    return '%s ' + op 
```

我曾经使用`backend.DatabaseWrapper.operators[type]`预定义的模式来查询存储在数据库后端的正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T14:52:09.617

正如@DrTyrsa 评论的那样，除了遍历每个案例之外，我非常怀疑是否有一种“方法”可以做到这一点。

我想你可以做一些优化，如果性能是一个问题。例如，假设您的许多正则表达式都有`\w\w+`（即带有两个或多个字母的单词）。您可以检查每个单词，例如 "cat" 或 "1234" 与 just `\w\w+`，如果单词不匹配，那么您不必费心运行其余的正则表达式，因为它们都依赖于一个组件。

当然，接受零的量词`?`, `*`, and`{}`和交替运算符`|`使这个特殊的想法变得不可能，除非你正则表达式你的正则表达式来过滤掉`^[^?*{}]+$`。但现在我们变得可笑了。你需要一种“正则表达式层次结构”来实现这样的“优化”已经很疯狂了。我认为其他人可以提出更实用的优化。

祝你好运。

# objective-c - ProgressIndicator 纺车如何

> ID：10653163
> 
> 赞同：2
> 
> 时间：2012-05-18T13:02:39.310
> 
> 标签：objective-c, xcode, cocoa, nsprogressindicator

我想添加一个`NSProgressIndicator`. 我有一个启用计时器的按钮，然后在延迟之后调用一个方法。

我想在按下按钮时开始旋转动画，我想在方法结束时停止动画。

所以，在我的`.h`我添加

```
NSProgressIndicator * ConnectingProgress; 
```

然后在我`.m`的按钮操作中我添加了

```
 [ConnectingProgress startAnimation:sender]; 
```

最后在我的方法结束时，我添加了

```
[ConnectingProgress stopAnimation:sender]; 
```

**问题：**

1.  我的方法无法识别“发件人”。
2.  没什么用，还有 startAnimation ......

我做错了什么，我该如何通过？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:11:16.177

编译器说你没有任何局部变量`sender`。直接传递`self`（视图控制器引用）或声明`sender`为

```
id sender = self;
[ConnectingProgress startAnimation:sender]; 
```

和

```
id sender = self;
[ConnectingProgress stopAnimation:sender]; 
```

声明以大写 C 开头的`NSProgressIndicator`变量的原因是什么？`ConnectingProgress`大写首字母用于类、类别等名称，`connectingProgress`改为使用。

我希望在`connectingProgress`某处（可能在`viewDidLoad`）初始化并在某处添加为子视图。

# c++ - 为什么链接器允许多个符号定义？

> ID：10653174
> 
> 赞同：2
> 
> 时间：2012-05-18T13:03:24.043
> 
> 标签：c++, visual-c++, linker

**案例一：一个函数的多个定义**

模块1.cpp：

```
void f(){} 
```

主.cpp：

```
void f(){} // error LNK2005: "void __cdecl f(void)" (?func@@YAXXZ) already defined in module1.obj
int main(){} 
```

**案例2：一个类的多个定义**

模块1.cpp：

```
class C{}; 
```

主.cpp：

```
class C{}; // OK
int main(){} 
```

在*案例 1*中，正如预期的那样，（Microsoft）链接器遇到相同函数的两个定义并发出错误。在*案例 2*中，它允许同一类的两个定义。

**问题 1：为什么在同一个类有多个定义时链接器不报错？**这是否与函数名只是其指令开始的地址的名称而类名是新类型的名称这一事实有关？

此外，即使我们使用不同的类定义，链接器也不会抱怨（我添加了调用类构造函数的函数，因此它们出现在符号表中）：

模块1.cpp：

```
class MyClass
{
    int n;
public: 
    MyClass() : n(123){}
};

void func()
{
   MyClass c;
} 
```

主.cpp：

```
class MyClass
{
   float n;
public: 
   MyClass() : n(3.14f){}
};

int main()
{
   MyClass c;
} 
```

我设置了编译器选项，以便它`COD`沿着文件生成`OBJ`文件。我可以看到两个构造函数都出现在相同的名称（`??0MyClass@@QAE@XZ`）下，每个都在自己的单元（`COD`文件）中。如果在模块中引用了某个符号，则链接器将使用同一模块中的定义（如果存在）。如果不是，它将使用定义它的模块中的符号定义。这可能很危险，因为链接器似乎从它遇到的第一个目标文件中选择符号：

模块1.h：

```
#ifndef MODULE1_H_
#define MODULE1_H_

void func1();

#endif 
```

模块1.cpp：

```
#include <iostream>
#include "module1.h"

class MyClass
{
    int myValue;

public:
    MyClass() : myValue(123)
    {
        std::cout << "MyClass::MyClass() [module1]" << std::endl;
    }   

    void foo()
    {       
        std::cout << "MyClass::foo() [module1]: n = " << myValue << std::endl;
    }
};

void func1()
{
    MyClass c;
    c.foo();
} 
```

模块2.cpp：

```
#include <iostream>

class MyClass
{   
public:
    MyClass()
    {
        std::cout << "MyClass::MyClass() [module2]" << std::endl;
    }   
};

// it is necessary that module contains at least one function that creates MyClass object
void test2()
{
    MyClass c;
} 
```

主.cpp：

```
#include "module1.h"

int main()
{
    func1();
} 
```

如果目标文件在传递给链接器时按此顺序列出：

*module2.obj module1.obj main.obj*

`MyClass::MyClass`链接器将从第一个 obj 文件中选择构造函数，但从`MyClass::foo`第二个文件中选择构造函数，因此输出是意外的（错误的）：

> MyClass::MyClass() [module2]
> MyClass::foo() [module1]: n = 1

如果目标文件在传递给链接器时按此顺序列出：

*module1.obj module2.obj main.obj*

`MyClass`链接器将从第一个 obj 文件中选择两个成员：

> MyClass::MyClass() [module1]
> MyClass::foo() [module1]: n = 123

**问题 2：为什么链接器的设计方式允许多个类定义，这会导致上述错误？链接过程取决于目标文件的顺序，这不是错的吗？**

似乎链接器在扫描目标文件时选择了它遇到的第一个符号定义，然后默默地丢弃所有后续定义重复。
**问题 3：链接器是这样构建其符号查找表的吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:13:53.017

关于您的问题 1：只要您不违反单一定义规则 (ODR)，就允许对类和内联函数进行多重定义。

当你在一个类中定义一个函数时，它是隐式的`inline`。您通过使用`MyClass`.

这种行为的基本原理是：当你在一个类中有一个内联函数时，它在许多编译单元中都是可见的，没有编译单元显然是“首选”编译单元。但是，您的工具链可以依赖 ODR 并假设所有内联方法具有相同的语义。因此，链接器可以在链接中选择任何内联函数定义，因为它们都是相同的。

问题的解决方案很简单：不要违反 ODR。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T13:18:45.017

Q1：因为函数定义会生成链接符号，而类定义不会。

请注意，这在一般情况下是不正确的，因为某些函数可能不参与链接（例如，使用 static 关键字的全局），而某些类可能间接参与（例如，使用虚拟方法或静态变量）。

Q2、Q3：链接器仅适用于符号名称；它不知道符号是变量还是函数或其他东西。它需要一组由编译器生成的模块 M1、M2、M3、...、Mn。那可能是彼此不了解的不同编译器。每个模块可以包含符号，例如，，，并且`Mi.A`可以引用外部符号，例如，，，，。（链接器还获取只是模块档案的库）。`Mi.B``Mi.C``Mi.foo``??.E``??.F``??.G``??.printf`

The linker's job is to resolve each external symbol reference by finding the module that contains symbol with that name.

For example, if M1 contains `main` and refers to `??.printf` and `??.foo`, and M2 contains `foo`, the linker will replace all references of `??.foo` with address of `M2.foo`, and all references of `??.printf` with address of `standard_c_library.printf`.

That's basically all that a linker does — merges modules into a single binary, replaces each reference to a symbol with its final memory address, throws away unused symbols.

# xaml - 如何使用 C# 和 XAML 在 Metro 中的画布上绘图

> ID：10653179
> 
> 赞同：7
> 
> 时间：2012-05-18T13:03:47.663
> 
> 标签：xaml, windows-8, winrt-xaml, draw

我希望允许我的用户在 Windows 8 Metro 应用程序的画布上绘制他们的签名。

有谁知道使用 C# 和 XAML 的任何示例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T13:37:27.050

试试这个方法，

[http://code.msdn.microsoft.com/InkPen-sample-in-CSharp-189ce853](http://code.msdn.microsoft.com/InkPen-sample-in-CSharp-189ce853)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T22:04:15.050

您可以使用[Canvas](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.canvas.aspx)面板并跟踪所有指针事件，例如[PointerPressed](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.uielement.pointerpressed.aspx) /Moved/Released/Entered/Exited。确保您按 ID 跟踪所有指针（调用 e.GetCurrentPoint(myCanvas) 以获取指针 ID），因为您可能拥有比鼠标更多的指针设备。然后，只需将[Windows.UI.Xaml.Shapes](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.shapes.aspx)命名空间中的一些形状（如[Line](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.shapes.line.aspx)）添加到 Canvas 中，您就有了绘图。您可能遇到的问题是如果您想保存图像，因为以前基于 XAML 的 UI 框架的 WriteableBitmap.Render() 方法在 WinRT 中不可用。最近获得[WinRT 版本的](http://kodierer.blogspot.com/2012/05/one-bitmap-to-rule-them-all.html)[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-15T11:55:01.403

在 XAML 代码的网格中执行此操作：

```
<Canvas>
   <Rectangle Width="80"
              Height="80"
              Fill="Red"
              Canvas.Left="80"
              Canvas.Top="80" />
</Canvas> 
```

然后运行您的代码，它将有一个 80x 80y 的正方形。

# updatepanel - Ajax TabContainer ActiveTabChanged 触发两次

> ID：10653182
> 
> 赞同：1
> 
> 时间：2012-05-18T13:03:50.973
> 
> 标签：updatepanel, tabcontainer

我无法弄清楚为什么我在 ajax tabPanel 上的 ActiveTabChanged 事件处理程序会触发两次。

任何人都应该能够将以下代码粘贴到新项目中（参考 AjaxControlToolkit）来重现该问题。

当用户单击选项卡时，tabchanged 被触发两次，从文本框的内容可以看出。您还可以通过调试和设置断点来查看它，该断点会被命中两次。

**标记**

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="WebForm1.aspx.vb" Inherits="Project1.WebForm1" %>
<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="ajax" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:ScriptManager runat="server" ID="ScriptManager1" 
                            EnablePartialRendering="true" 
                            SupportsPartialRendering="true" 
                            ScriptMode="Release"
                            LoadScriptsBeforeUI ="true">
      </asp:ScriptManager>
      <asp:UpdatePanel ID="up" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
             <ajax:TabContainer id="TabContainer" runat="server"  EnableViewState="true" AutoPostBack="true">
                    <ajax:TabPanel id="tab1" runat="server"  HeaderText="Tab1">
                        <ContentTemplate>
                            <asp:TextBox runat='server' ID="txtTab1" Text="" Width="600px"></asp:TextBox>
                        </ContentTemplate>
                    </ajax:TabPanel>
                     <ajax:TabPanel id="tab2" runat="server"  HeaderText="Tab2">
                        <ContentTemplate>
                            <asp:TextBox runat='server' ID="txtTab2" Text=""  Width="600px"></asp:TextBox>
                        </ContentTemplate>
                    </ajax:TabPanel>
              </ajax:TabContainer>

            </ContentTemplate>
      </asp:UpdatePanel>
    </div>
    </form>
</body>
</html> 
```

**代码隐藏**

```
Public Class WebForm1
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    End Sub

    Private Sub TabContainer_ActiveTabChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles TabContainer.ActiveTabChanged

        Me.txtTab1.Text = Me.txtTab1.Text & "_changed"
        Me.txtTab2.Text = Me.txtTab2.Text & "_changed"
    End Sub
End Class 
```

# android - 无法实例化活动组件信息.....无法转换为 android.app.Activity

> ID：10653189
> 
> 赞同：1
> 
> 时间：2012-05-18T13:04:00.590
> 
> 标签：android

我无法弄清楚为什么我会收到此`org.example.sudoku.Prefs cannot be cast to android.app.Activity`错误。我正在使用 Ed Burnette 的这本书*Hello, Android*，我正在尝试制作一个简单的设置菜单。我到处寻找答案，要么我还不够了解，无法弄清楚，要么我是个白痴。我将所有内容都放入了我的 XML 设置和清单中，但是每次从选项菜单中单击我的设置时它都会崩溃。这是我的代码和错误消息：

Prefs.java：

```
 package org.example.sudoku;

    import android.os.Bundle;
    import android.preference.PreferenceFragment;
    //import android.preference.PreferenceActivity;

    public class Prefs extends PreferenceFragment {
        public void onCreate(Bundle saveInstanceState) {
            super.onCreate(saveInstanceState);
            addPreferencesFromResource(R.xml.settings); 
        }

    } 
```

数独.java：

```
 package org.example.sudoku;
        import android.app.Activity;
        import android.os.Bundle;

        import android.content.Intent;
        import android.view.View;
        import android.view.View.OnClickListener;

        import android.view.Menu;
        import android.view.MenuInflater;
        import android.view.MenuItem;

        public class Sudoku extends Activity implements OnClickListener{

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);

                // Set up click listeners for all the buttons

                View continueButton = findViewById(R.id.continue_button);
                    continueButton.setOnClickListener(this);
                View newButton = findViewById(R.id.new_button);
                    newButton.setOnClickListener(this);
                View aboutButton = findViewById(R.id.about_button);
                    aboutButton.setOnClickListener(this);
                View exitButton = findViewById(R.id.exit_button);
                    exitButton.setOnClickListener(this);
            }

            public void onClick(View v) {
                switch (v.getId())
                {
                case R.id.about_button:
                    Intent i = new Intent(this, About.class);
                    startActivity(i);
                    break;
                }
        }

            @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            super.onCreateOptionsMenu(menu);
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.menu, menu);
            return true;    

        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            switch(item.getItemId()) {
            case R.id.settings:
                //startActivity(new Intent(this, Prefs.class));
                Intent intent = new Intent(this, Prefs.class);
                startActivity(intent);
                return true;
            }
            return false;

        }
        } 
```

AndroidManifest.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
        <menu xmlns:android="http://schemas.android.com/apk/res/android">
            <item android:id="@+id/settings"
                android:title="@string/settings_label"
                android:alphabeticShortcut="@string/settings_shortcut" />

        </menu>

        <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="org.example.sudoku"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk android:minSdkVersion="15" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name" >
            <activity
                android:name=".Sudoku"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

            <activity android:name=".About"
                    android:label="@string/about_title"
                    android:theme="@android:style/Theme.Dialog">

            </activity>
            <activity android:name=".Prefs"
                    android:label="@string/settings_title">

            </activity>
        </application>

    </manifest> 
```

字符串.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <resources>

        <string name="hello">Hello World, Sudoku!</string>
        <string name="app_name">Sudoku Game</string>
        <string name="continue_label">Continue</string>
        <string name="new_game_label">New Game</string>
        <string name="about_label">About</string>
        <string name="exit_label">Exit</string>
        <string name="about_text">Sudoku is a logic-based number placement puzzle. Starting with a partially completed 9x9 grid so that each row, each column, and each of the 3x3 boxes(also called <i>block</i>) contains the digits 1 to 9 exactly once</string>
        <string name="about_title">About Android Sudoku</string>

        <string name="settings_label">Settings
            </string>
        <string name="settings_title">Sudoku Settings</string>
        <string name="settings_shortcut">s</string>
        <string name="music_title">Music</string>
        <string name="music_summary">Play Background Music</string>
        <string name="hints_title">Hints</string>
        <string name="hints_summary">Show hints during play</string>

        </resources> 
```

设置.xml：

```
 <code>
    <?xml version="1.0" encoding="utf-8"?>
        <PreferenceScreen
        xmlns:android="http://schemas.android.com/apk/res/android">
        <PreferenceCategory
                android:title="@string/settings_title"> 
        <CheckboxPreference
            android:key="music"
            android:title="@string/music_title"
            android:summary="@string/music_summary"
            android:defaultValue="true" />
        <CheckBoxPreference
            android:key="hints"
            android:title="@string/hints_title"
            android:summary="@string/hints_summary"
            android:defaultValue="true" />
        </PreferenceCategory>
        </PreferenceScreen> 
```

主.xml：

 ````
 <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/app_name"
            android:gravity="center"
            android:layout_marginBottom="20dip"
            android:textSize="24.5sp"
             />
        <TableLayout 
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_gravity="center"
            android:stretchColumns="*">
            <TableRow>

                <Button 
            android:id="@+id/continue_button"
            android:text="@string/continue_label"
            />
            <Button 
            android:id="@+id/new_button"
            android:text="@string/new_game_label"
            />
            </TableRow>
            <TableRow >
            <Button 
            android:id="@+id/about_button"
            android:text="@string/about_label"
            />

            <Button 
            android:id="@+id/exit_button"
            android:text="@string/exit_label"
            />
            </TableRow>
            </TableLayout>

    </LinearLayout> 
```

Here is all the error messages I am recieving:` 

```
 05-18 12:37:16.781: E/AndroidRuntime(623): FATAL EXCEPTION: main
    05-18 12:37:16.781: E/AndroidRuntime(623): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{org.example.sudoku/org.example.sudoku.Prefs}: java.lang.ClassCastException: org.example.sudoku.Prefs cannot be cast to android.app.Activity
    05-18 12:37:16.781: E/AndroidRuntime(623):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
    05-18 12:37:16.781: E/AndroidRuntime(623):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    05-18 12:37:16.781: E/AndroidRuntime(623):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
    05-18 12:37:16.781: E/AndroidRuntime(623):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    05-18 12:37:16.781: E/AndroidRuntime(623):  at android.os.Handler.dispatchMessage(Handler.java:99)
    05-18 12:37:16.781: E/AndroidRuntime(623):  at android.os.Looper.loop(Looper.java:137)
    05-18 12:37:16.781: E/AndroidRuntime(623):  at android.app.ActivityThread.main(ActivityThread.java:4424)
    05-18 12:37:16.781: E/AndroidRuntime(623):  at java.lang.reflect.Method.invokeNative(Native Method)
    05-18 12:37:16.781: E/AndroidRuntime(623):  at java.lang.reflect.Method.invoke(Method.java:511)
    05-18 12:37:16.781: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    05-18 12:37:16.781: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    05-18 12:37:16.781: E/AndroidRuntime(623):  at dalvik.system.NativeStart.main(Native Method)
    05-18 12:37:16.781: E/AndroidRuntime(623): Caused by: java.lang.ClassCastException: org.example.sudoku.Prefs cannot be cast to android.app.Activity
    05-18 12:37:16.781: E/AndroidRuntime(623):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
    05-18 12:37:16.781: E/AndroidRuntime(623):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
    05-18 12:37:16.781: E/AndroidRuntime(623):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:15:37.133

您不能将您的班级偏好设置为活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T17:16:43.103

# ruby - 我正在尝试计算 `10 * (50 / 100)`，我得到了 `0`，但是当我计算 `10 * 50 / 100` 时，我得到了 `5`！

> ID：10653192
> 
> 赞同：-4
> 
> 时间：2012-05-18T13:04:12.003
> 
> 标签：ruby, numbers

> **可能的重复：**
> [Ruby 拒绝正确划分](https://stackoverflow.com/questions/1448036/ruby-refuses-to-divide-correctly)

我正在使用 Ruby on Rails 3.2.2，当我尝试计算时`10 * (50 / 100)`我回来了，`0`但是当我让`10 * 50 / 100`我回来时`5`。

由于技术原因，我不能使用后者，因为我的代码如下：

```
perc = 50 /100

# Some code that uses the 'perc' variable
... = method_name(perc)

return 10 * perc 
```

我应该做些什么来解决问题并拥有`5`（*不是* `5.0`或其他东西；也就是说，回报是一个`Integer`）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T13:05:16.523

50 / 100 为 0，因为您使用的是整数除法。结果被截断为整数。

首先执行乘法，因为然后除法给出一个整数。

您可以使用浮点数而不是整数执行计算：50.0 / 100.0 == 0.5，然后在计算结束时将结果四舍五入为整数。

```
proportion = 50.0 / 100.0
result = (10 * proportion).round
return result 
```

在线查看它：[ideone](http://ideone.com/8TUWZ)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T13:05:44.183

50/100 将在整数除法中返回 0，如果您尝试 50.0/100.0，您将得到 0.5。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:08:01.057

不熟悉 Ruby，但我认为答案是按操作顺序排列的。

在 的情况下`10 * (50 / 100)`，程序首先计算`(50 / 100)`，结果为`0.5`。由于您使用的是整数，因此将其四舍五入为`0`，从而解释了原因`10 * (50 / 100) = 0`。

在 的情况下`10 * 50 / 100`，程序首先计算`10 * 50`，即`500`。接下来，它将这个结果除以`100`，你得到`10 * 50 / 100 = 5`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T13:23:09.510

您问题的最后一部分是关于[类型转换](http://en.wikipedia.org/wiki/Type_conversion)。

如果你想得到 5 作为结果`return 10 * perc`而不是 5.0，那么你应该将它转换为整数，比如`return (Integer) 10 * perc`或`return (10 * perc).to_i`

# jqgrid-formatter - jqGrid：根据行值设置颜色条件自定义格式化程序

> ID：10653194
> 
> 赞同：1
> 
> 时间：2012-05-18T13:04:15.753
> 
> 标签：jqgrid-formatter

我已经看过关于这个主题的其他帖子，但我的略有不同我有一个 jqGrid，如下所示，名称如下：

```
 grid = $("#list"); 
```

现在，我有一个名为 total 的列，我想根据一个值为数字设置颜色。我试过这样

```
grid.jqGrid({
...
colModel:[
...
{name:'total',index:'total',width:60,
    formatter:function(cellvalue, options, rowObject){
              if (cellvalue > 300) {
              return "<span style='background-color:orange'>"+cellvalue+"</span>";
              } else {
              return "<span style='color:red'>"+cellvalue+"</span>";
              }
              },

                  align:'right'},
... 
```

这似乎可以很好地评估 if 条件但无法显示 cellvalue 变量。

我应该如何在 if 括号内使用正确的标记重新显示总单元格值？

# android - 不需要在 Manifest 中注册 Activity 基类吗？

> ID：10653195
> 
> 赞同：12
> 
> 时间：2012-05-18T13:04:18.607
> 
> 标签：android, overriding, extends

我有自己的基础抽象类，它扩展了`Activity`类。

```
public abstract class BaseActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(getLayoutResourceId());
    }

    protected abstract int getLayoutResourceId();
}

public class Activity1 extends BaseActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // do extra stuff 
    }

    @Override
    protected int getLayoutResourceId() {
        return R.layout.layout_for_activity1;
    }
} 
```

我的基类`BaseActivity`未在`Manifest`文件中注册，我没有收到任何错误。

这是一个定时炸弹（不在 Manifest 中注册基类）还是应该这样？有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T13:08:57.833

您不需要在清单中注册*BaseActivity*类，因为它不是您在意图启动时调用的类。

例如：

```
Intent i = new Intent(context, Activity1.class);
startActivity(i); 
```

在上面的代码中，您需要`Activity1`在清单中注册活动，因为您是在意图中提及它，**而不是**在`BaseActivity`类中。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-18T13:07:38.857

根据文档，`<activity>`清单上的：

> 声明一个实现应用程序可视用户界面的一部分的活动（一个活动子类）。所有活动都必须由清单文件中的元素表示。**任何** **未在此处声明的内容都不会被系统看到并且永远不会** **运行**。

可以这样想：如果有一个活动（任何扩展`Activity`的类或扩展它的类）您将在应用程序的某个位置导航到，则需要在清单中声明它。无论您**如何**达到该活动。这不包括仅扩展`Activity`类但您无法直接访问的类。

[来源](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-24T05:29:17.970

No need to register Base class in manifest because it is an abstract class , we cannot make an object of Abstract class, we can define only its methods and declaration.

# c# - 如何防止子类的继承属性序列化

> ID：10653199
> 
> 赞同：0
> 
> 时间：2012-05-18T13:04:29.220
> 
> 标签：c#, serialization, xml-serialization

我有一个基类，许多其他类都继承自该基类。基类支持 XML 序列化并具有可序列化的属性。

我想防止在其中一个子类中序列化相同的属性。这可能吗？我该怎么做？

谢谢

托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:09:34.440

您可以使用`XmlIgnoreAttribute`. 见这篇文章。

[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlignore.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlignore.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:09:23.743

用属性装饰你想要隐藏的`[XmlIgnore]`属性：

```
[Serializable]
[XmlRoot(ElementName = "Customer")]
public class SimplifiedCustomer
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    [XmlIgnore]
    public long CustomerId { get; set; }
} 
```

# .net - 在 Metro 风格应用程序中点击时禁用 ListView 选择

> ID：10653202
> 
> 赞同：0
> 
> 时间：2012-05-18T13:04:44.183
> 
> 标签：.net, windows-8, windows-runtime, winrt-xaml

我试图允许滑动作为在我的 ListView 中选择项目的唯一方法（一个 la tile）。当您点击一个项目时，有什么方法可以阻止 ListView 更改选择？

我已经尝试将 IsTapEnabled 放在我能做的所有事情上，ListView 以及 ItemContainerStyle 的副本，我对所有视觉元素都这样做了，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:00:08.217

事实上，您可以通过将 IsItemClickEnabled 设置为 true 来实现。根据 Mark Rideout：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/2572f184-b163-4732-9a9d-8d5c404e40b5](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/2572f184-b163-4732-9a9d-8d5c404e40b5)

# html - 通过触摸多个 div 模拟 HTML 悬停

> ID：10653209
> 
> 赞同：0
> 
> 时间：2012-05-18T13:05:17.420
> 
> 标签：html, css, touch, jquery-isotope

我试图弄清楚如何使用 touchmove 事件在 iOS 上模拟悬停/鼠标输入功能。

我想在 iOS 上复制 BigGraph 悬停效果。如果你不熟悉它，链接在下面。请注意，当您将鼠标悬停在正方形上时，它们会展开，然后在移除悬停时折叠。

[http://isotope.metafizzy.co/custom-layout-modes/big-graph.html](http://isotope.metafizzy.co/custom-layout-modes/big-graph.html)

在 BigGraph 中，您会注意到悬停行为，我试图在触摸设备上复制它。我正在努力想办法让你的手指在屏幕上移动并让框展开。由于不支持悬停，我认为触摸移动是一种选择。

我已经能够使用 touchstart 和 touchend 事件扩展项目，但似乎 touchmove 无法捕获您悬停的 DIV，因此我无法捕获项目来扩展它。

下面是一个简单的片段，任何想法将不胜感激。谢谢

```
$(".item").bind("touchstart", function(e){
    log("touch start");
    $(e.currentTarget).find('.icon').css("background-color", "red");
    e.preventDefault();
});

$(".item").bind("touchend", function(e){
    log("touch end");
});

.big-graph .item:hover .icon {
  -webkit-transform: scale(2);
     -moz-transform: scale(3);
      -ms-transform: scale(3);
       -o-transform: scale(3);
          transform: scale(3);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:16:47.887

我不确定你想用 touchmove 捕捉什么。但是要模拟盒子展开和折叠的悬停

```
$('.item').bind('touchstart', function() {
    // expand box
});

$('.item').bind('touchend', function() {
    // collapse
}); 
```

我认为你根本不需要 touchmove，除非我遗漏了什么。也许有一种你想要但没有明确提及的行为？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:12:28.720

我不是 iOS 程序员，但你能以某种方式使用多点触控功能吗？例如，单指触摸是“点击”；2 指触摸是“悬停”。或切换按钮（单击/悬停）。

# c# - SerialPort.ReadLine() 返回垃圾

> ID：10653211
> 
> 赞同：2
> 
> 时间：2012-05-18T13:05:32.907
> 
> 标签：c#, visual-studio-2010, serial-port

我正在使用串行端口从秤读取数据。通信工作正常，但我从串口收到垃圾。

一个例子：

```
???s.R?????0?   ??o???????0?    ??o???????0? 
```

我的问题是，我不知道秤的行为。我不知道它是给我发送十六进制、二进制还是什么。而且我不知道它实际发送的价值是什么。我没有任何关于规模的文件来研究它。

所以我猜，默认情况下，通常通过串行端口发回的内容以及如何将其转换为可读值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:50:54.607

许多问号表明 SerialPort 设置错误。从波特率开始，接下来是奇偶校验。

如果秤发送二进制数据，则 Encoding 属性很重要。默认值为 ASCII，因此如果二进制数据中的字节 >= 128，则会生成很多问号。在这种情况下，您应该使用 Read() 而不是 ReadLine()。你想用哪个来开始解决这个问题，你想查看原始字节值，从问号看不到太多。请特别注意从读数中获得的最后一两个字节，它们应该很好地重复。

# java - JMenu 作为带有子菜单的 JRadioButtonMenuItem

> ID：10653212
> 
> 赞同：2
> 
> 时间：2012-05-18T13:05:37.673
> 
> 标签：java, swing, jmenu, jpopupmenu

我有一个要求，我有一个 JPopupMenu 作为右键菜单。我有一些 JMenu 作为 JPopupMenu 的一部分，它们类似于模式，并且它们都有子菜单选项，如 SliderMenuItems(custom)、JCheckBoxMenuItems 和 JRadioButtonMenuItems。

我需要有 JMenu 的单选按钮来指示模式的选择，并且行为应该与 JRadioButtonMenuItem 中的一样，即单选按钮应该在鼠标单击时选择，而不是在鼠标悬停时选择。

我可以通过扩展 BasicMenuUI 并在 installDefaults 方法中设置 checkIcon 来添加单选按钮图标。

但是我不能像在 JRadioButtonMenuItem 中那样具有单击行为，因为 JMenu 在鼠标悬停时选择了按钮图标。

有人可以建议一种在菜单中创建带有单选按钮的 JMenu 和带有不同菜单项的子菜单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:01:49.220

*   在 AWT 和 Swing 中，如果没有肮脏的技巧来同时显示[两个轻量级或重量级的弹出窗口，是不可能的](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4799266)，

*   最安全的方法是只`JPopup`用未装饰的[JDialog 或 JWindow替换](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)

*   例如，此问题适用[于 JPopupMenu](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4799266) ei中的 JComboBox

# php - 严格标准：从空值创建默认对象

> ID：10653214
> 
> 赞同：1
> 
> 时间：2012-05-18T13:05:40.277
> 
> 标签：php

我有以下代码。

```
 public function get_users_theme($uid)
            {
                    $r = $this->db2->query('SELECT * FROM users_theme WHERE user_id="'.$uid.'" LIMIT 1', FALSE);
                    if ($this->db2->num_rows($r) > 0) {
                            $o->user_theme = new stdClass();
                            $ut = $this->db2->fetch_object($r);
                            foreach($ut as $l=>$s) {
                                    $o->user_theme->$l  = stripslashes($s);
            }
                            return $o->user_theme;
                    } else {
                            return FALSE;
                    }
            } 
```

第 5 行似乎产生了以下错误：

> 严格标准：从空值创建默认对象

我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:27:07.507

`$o`当您开始将其用作对象时尚未声明，因此只需事先将其设为 stdClass 对象：

```
$o = new stdClass();
$o->user_theme = new stdClass(); 
```

或者，更好的是，`$o->user_theme`将该函数中的所有位置替换为`$user_theme`- 因为您的代码似乎不需要特殊对象，因此普通变量就足够了。

# javascript - 从 Jquery 添加类到添加的类

> ID：10653215
> 
> 赞同：-3
> 
> 时间：2012-05-18T13:05:40.610
> 
> 标签：javascript, jquery

有这个：

```
 $(function(){
        $("a.next.down").click(function() {
            $("ul.panel li").addClass("upOne");
            $("a.next").removeClass("down").addClass("downTwo");
        });
        $("a.next.downTwo").click(function() {
            $("ul.panel li").addClass("upTwo");
            $("a.next").removeClass("downTwo").addClass("downThree");
        });
    }); 
```

并且想知道当我单击第二个事件`a.next.downTwo`时它不会删除该类并添加新的。

所以真的有一种方法可以在每次点击时添加和删除类。所以点击1（添加A类），点击2（添加B类）等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:15:09.227

我的第一反应是： http: [//pastebin.com/LNjLzrwh](http://pastebin.com/LNjLzrwh)。

```
$(function(){
    var panelLi = $("ul.panel li");

    $("a.next").click(function() {
        var self = $(this);

        if (self.hasClass("down")) {
            panelLi.addClass("upOne");
            self.removeClass("down").addClass("downTwo");
        } else if (self.hasClass("downTwo")) {
            panelLi.addClass("upTwo");
            self.removeClass("downTwo").addClass("downThree");
        }
    });
}); 
```

# c# - Linq 结果作为父（用户）对象的集合

> ID：10653220
> 
> 赞同：0
> 
> 时间：2012-05-18T13:06:11.990
> 
> 标签：c#, linq, entity-framework

我有这个 Linq 查询，它（正确地）提供了来自用户的静态数据。我现在手动执行用户表的“包含”。我要找的是这个查询的结果实际上变成了父用户对象的集合。

如果我选择多个用户名（s.User.Name）而不是我现在使用的一个，我只会返回与我搜索的用户名相同数量的用户对象，并且他们的统计信息（User.Statistics）集合填充了数据就像下面的查询返回的一样。

```
var statistics =    (( 
        from s in db.Statistics
        where s.User.ScreenName == screenName && 
              s.CreateDate > EntityFunctions.AddDays(DateTime.Now, days)
        group s by EntityFunctions.TruncateTime(s.CreateDate) into dg

        let maxDate = dg.Max(x => x.CreateDate)
        from s2 in db.Statistics
        where s2.User.ScreenName == screenName && 
              s2.CreateDate == maxDate
        orderby s2.CreateDate
        select s2) as ObjectQuery<Statistic>).Include("User").ToList(); 
```

## 更新 18-05-2012 15:41

简单地返回 s2.User 将不起作用，因为它将返回用户的次数与从统计表返回的行一样多，我只想获取 1 个用户对象并让它的统计信息集合（User.Statistics）填充结果的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:26:39.057

在您的选择子句中返回用户：

```
var users=
    ( 
    from s in db.Statistics
    where s.User.ScreenName == screenName && 
          s.CreateDate > EntityFunctions.AddDays(DateTime.Now, days)
    group s by EntityFunctions.TruncateTime(s.CreateDate) into dg

    let maxDate = dg.Max(x => x.CreateDate)
    from s2 in db.Statistics
    where s2.User.ScreenName == screenName && 
          s2.CreateDate == maxDate
    orderby s2.CreateDate
    select s2.User.User       // <--------
    ).ToList(); 
```

获取用户添加的唯一列表`.Distinct()`。如果这不起作用，这里是关于如何获取用户的猜测（不知道您的对象模型）：

```
 var allusernames=
    ( 
    from s in db.Statistics
    where s.User.ScreenName == screenName && 
          s.CreateDate > EntityFunctions.AddDays(DateTime.Now, days)
    group s by EntityFunctions.TruncateTime(s.CreateDate) into dg

    let maxDate = dg.Max(x => x.CreateDate)
    from s2 in db.Statistics
    where s2.User.ScreenName == screenName && 
          s2.CreateDate == maxDate
    orderby s2.CreateDate
    select s2.User.UserName       // <--------
    ).ToList();

var distinct users =
    (
        from u in users
        where allusernames.Contains(u.UserName)
        select u
    ).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:16:56.223

您想要查询用户，统计属性仅填充您想要的数据，而不是数据库中的数据。

如果您编写用户的标准“包含查询”，您将获得所有统计数据，然后您可以在本地过滤这些数据。在这种情况下，加载的数据可能比您实际需要的多。

```
from u in db.Users.Include("Statistics")
where u.ScreenName == theScreenName
select u; 
```

您还可以编写一个查询，只在结果类型中加载您想要的统计信息。在这种情况下，不会填充 User 实例的统计属性。

```
from u in db.Users
where u.ScreenName == theScreenName
let stats = u.Statistics.Where(...)
select new {User = u, Stats = stats.ToList()}; 
```

* * *

无法在 LinqToEntities（User.Statistics 部分填充）中获得您所要求的内容。在 LinqToSql 中——我们将使用它[`DataLoadOptions.AssociateWith`](http://msdn.microsoft.com/en-us/library/bb534221.aspx)来完成这项工作。

LinqToSql 再一次战胜了 EF。

# jquery - 将悬停时的背景图像更改为每个图片库链接

> ID：10653221
> 
> 赞同：0
> 
> 时间：2012-05-18T13:06:16.570
> 
> 标签：jquery, background, hover, document-body

当我将鼠标悬停到页面上的每个图像链接时，如何更改页面背景。我想根据页面上的每个图像动态更改页面背景。请查看代码以准确了解我要说的内容。

```
 <script>
        $(function() {
        $("a").hover(function() {
        var $link = $("img").attr("src");
                $("body").css("background", "url(" + $link + ")" );
        });
        });
    </script>

<html>
   <body>
      <a href="#" title="">
        <img src="portfolio_files/NEWSALV.gif" alt="">
      </a>
      <a href="#" title="">
        <img src="portfolio_files/TSThumb.gif" alt="">
      </a>
      <a href="#" title="">
        <img src="portfolio_files/MoreheadThumb.gif" alt="">
      </a>
   </body>
</html> 
```

请对此提供帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:07:52.380

Using每次`$("img")`都会返回文档中的第一个元素。每次都`img`需要找到`img`相对于元素的元素。`a`

这可以通过使用`$(this)`and来实现[`.find()`](http://api.jquery.com/find/)；

```
<script>
    $(function() {
        $("a").hover(function() {
            var $link = $(this).find("img").attr("src");
            $("body").css("background", "url(" + $link + ")" );
        });
    });
</script> 
```

# powershell - Powershell 将标准输出重定向到标准错误

> ID：10653223
> 
> 赞同：2
> 
> 时间：2012-05-18T13:06:27.257
> 
> 标签：powershell, stderr

在 Powershell 中，如何**将标准输出重定向到标准错误**？

我知道我可以与之相反，`2>&1`所以我尝试了：

```
echo "Hello" 1>&2 
```

但我得到一个愚蠢的错误`The '1>&2' operator is reserved for future use.`

我问是因为能够做到这一点将使我更容易调试另一个问题。请参阅[$LastExitCode=0 但 $?=False 在 PowerShell 中。将标准错误重定向到标准输出会产生 NativeCommandError](https://stackoverflow.com/questions/10666101/powershell-lastexitcode-0-but-false-redirecting-stderr-to-stdout-gives-nat)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:53:23.747

唉，不可能将标准输出重定向到标准错误。我认为这是一个不幸的疏忽。让我们希望这在 Powershell 的未来版本中得到修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:52:01.957

首先：你得到的错误没有什么愚蠢的。例如，在 v3 中，我们获得了一些额外的重定向选项，最终我想我们将能够根据需要将详细重定向到警告、调试到错误和输出到错误。

在此之前，您可以尝试模拟这种行为，至少对于输出。不确定这是否能解决您的问题，但您可以：

```
echo "foo" | Write-Error
yourproram.exe | Write-Error 
```

HTH 巴特克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:25:55.610

假设你完全控制了这些消息，你可以利用 .NET 来帮助解决这个问题：

```
[Console]::Error.WriteLine("Hello") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T13:27:29.500

Powershell方式：

`$host.ui.WriteErrorLine('Hello'`)

这不填充`$error`自动变量。

# ruby-on-rails-3 - 设计会话长度计数器

> ID：10653224
> 
> 赞同：0
> 
> 时间：2012-05-18T13:06:28.893
> 
> 标签：ruby-on-rails-3, session, devise, counter, duration

我需要计算每个用户登录的时间——我现在正在使用 devise——是否有 Rails/devise 的功能/插件可以计算这一点？这**不是**关于设置“让我保持登录”选项的问题 - 请记住这一点；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T23:41:07.983

参考 SO 线程： 1.[这](https://stackoverflow.com/questions/3184973/rails-using-devise-to-show-online-users)是一个简单但不完善的关于找出谁在线的逻辑。2.[这](https://stackoverflow.com/questions/5504130/whos-online-using-devise-in-rails)是一个成熟的插件解决方案。

# xcode - Xcode - 现在更改了枚举声明 Xcode 找不到枚举类型

> ID：10653232
> 
> 赞同：1
> 
> 时间：2012-05-18T13:07:28.647
> 
> 标签：xcode, enums

所以我决定改变枚举声明。在 Enums.h 中像这样定义我的声明之前：

```
typedef enum { 

    DateNoneReminderRepeat = 0,
    DateDayReminderRepeat = 1,
    DateWeekReminderRepeat = 2,
    DateMonthReminderRepeat = 3,
    DateYearReminderRepeat = 4

} ReminderDateRepeat; 
```

然后我决定把它改成这样：

```
typedef enum { 

    APDateNoneReminderRepeat = 0,
    APDateDayReminderRepeat = 1,
    APDateWeekReminderRepeat = 2,
    APDateMonthReminderRepeat = 3,
    APDateYearReminderRepeat = 4

} APReminderDateRepeat; 
```

现在 Xcode 不会构建抱怨“Parse Issue Expected a type”（见下图）。

![在此处输入图像描述](../Images/699d2c0733db4017bdda82aaa0382f2a.png)[Image Link As Display 很小](https://i.stack.imgur.com/Ldd8P.png)

我已经清理了几次项目，但无济于事。

我在我的 Prefix.pch 文件中导入枚举：

```
#import <Availability.h>

#ifndef __IPHONE_3_0
    #warning "This project uses features only available in iOS SDK 3.0 and later."
#endif

#ifdef __OBJC__

    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
    #import <CoreData/CoreData.h>
    #import <SSToolkit/SSToolkit.h>
    #import "Enums.h"
    #import "Constants.h"
    #import "Utilities.h"

#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:37:11.053

您在`ReminderDateRepeat`整个代码中使用了该类型，现在该类型已消失，因为您已将其更改为`APReminderDateRepeat`. 你现在有两个选择：

1.  您必须将每次出现的 ReminderDateRepeat 更改为 APReminderDateRepeat
2.  `typedef APReminderDateRepeat ReminderDateRepeat;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:34:51.963

感谢你的帮助。事实证明，更改枚举使 Xcode 变成了 bazonkas。因此，只需注释掉一些代码以使 Xcode 冷静下来，然后将我的枚举类型重命名为更改后的枚举类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-11T06:24:58.980

这是派生数据的问题。所以请按照以下步骤操作：

1.  转到组织者。
2.  选择位置。
3.  打开派生数据。
4.  删除派生数据。
5.  清洁项目。
6.  退出 XCode。
7.  再次删除派生数据。
8.  打开 XCode。
9.  清洁项目。
10.  构建项目。
11.  现在这些错误将被删除。

# oracle - oracle 存储过程根据计数返回数据集

> ID：10653235
> 
> 赞同：1
> 
> 时间：2012-05-18T13:07:38.020
> 
> 标签：oracle, stored-procedures, if-statement, count

我们目前有一个存储过程，需要执行以下操作：如果 Query1 返回任何结果，则为此打开一个 sys_refcursor 游标并将其返回，否则为 Query2 打开一个游标

目前我们正在对 Query1 的 from 和 where 子句执行 count(*)，并在 if-else stmt 中使用该计数。但是，这会导致 query1 被执行两次。有没有办法优化这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:21:02.273

打开 query1 的游标并执行真正的查询。将其包装在 BEGIN .. END 块中并捕获未找到数据的异常。

```
BEGIN

-- query1 code

-- return data

EXCEPTION
   WHEN NO_DATA_FOUND THEN
   NULL;

BEGIN
-- query2 code

-- return data

END; 
```

当 query1 没有返回数据时，query2 代码将运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:24:43.913

我也喜欢 Phil 的回答，但另一种选择是使用您正在使用的相同逻辑，但将计数查询更改为使用 rownum 停止键，例如：

```
select count(1)
into v_cnt
from some_table
where some_field like 'ABC%'
and rownum <= 1; 
```

rownum 可以允许 Oracle 在命中后停止计数（意味着从查询返回 1 行或更多行）。当然可以根据数据和查询产生很大的不同。

# c# - 内置方法或属性，以便我们可以通过禁用表单右侧和底部的拖动菜单来固定表单大小

> ID：10653237
> 
> 赞同：0
> 
> 时间：2012-05-18T13:07:39.093
> 
> 标签：c#, winforms

我们正在开发基于 Windows 的 .Net 应用程序，我们正在设计表单，就像我们过去在 .Net IDE 中所做的那样，使用`IServiceProvider`接口和`BasicHostLoader`抽象类设计 Winforms。

我们在向设计器中添加新表单时遇到了问题。我们想修复表单 a 的大小，但默认情况下，在设计时表单是可调整大小的，我们无法修复表单。

我们在该方法中添加了一个停止调整大小的`Resize`方法，我们再次存储了原始大小，因此看起来表单大小在拖动表单时不会改变，但我们希望在鼠标向右和按钮时禁用拖动鼠标菜单光标窗体的边界中心。

您能否建议任何内置方法或属性，以便我们可以通过禁用表单右侧和按钮侧的拖动菜单来修复表单大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:40:49.610

在设计表单时，将 设置`FormBorderStyle`为`Sizable`。当你有你想要的大小时，将 设置`FormBorderStyle`为固定样式。

# tomcat - 动态更新文件夹中的文件列表

> ID：10653244
> 
> 赞同：0
> 
> 时间：2012-05-18T13:07:57.787
> 
> 标签：tomcat, directory-listing

实现这一目标的最佳方法是什么？我有一个 tomcat 服务器，文件被上传到`WEB-INF`文件夹中，我曾经编写一个 html 文件（index.html）并手动添加文件。我在 Tomcat 中启用了目录列表，但是当我输入时，`http://127.0.0.1/test_server/WEB-INF/` 我得到一个 404，如果我将文件移动到 test_server 而不是`WEB-INF`并且如果我转到`http://127.0.0.1/test_server/`文件被列出在那里，那么当我导航到文件夹时如何让它工作`WEB-INF`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:21:35.577

“WEB-INF 目录不是应用程序公共文档树的一部分。WEB-INF 目录中包含的任何文件都不能由容器直接提供给客户端。但是，WEB-INF 目录的内容对 servlet 代码是可见的使用 getResource 和 getResourceAsStream() 方法调用 ServletContext 或使用 RequestDispatcher 包含/转发。"

更多解释可以在这里找到：http: [//docs.oracle.com/cd/E11035_01/wls100/webapp/configurewebapp.html](http://docs.oracle.com/cd/E11035_01/wls100/webapp/configurewebapp.html)

因此，如果要启用目录列表，则应使用不同的目录。

# jquery - 在这个 jquery 上开火

> ID：10653251
> 
> 赞同：0
> 
> 时间：2012-05-18T13:08:13.597
> 
> 标签：jquery, action

我有以下 Jquery 代码，它只有 40% 的功能。我有几个用 php 动态生成的产品模块。每个包含选择组合框并选择一个选项都应该在我的 jquery 代码上触发，但不幸的是它仅在第一个模块的情况下执行。

```
 <div class="ajax_bar">

            <select id="ajax_call" size="1" name="Weitere Produkte">
                <option value='50'>Weitere Produkte</option>
                <option value='100'>weitere 100</option>
                <option value='150'>weitere 150</option>
            </select>

        </div>    

$(document).ready(function(){

    $("#ajax_call").change(function(){
        var domain = document.domain;
        var count = $('#ajax_call :selected').val();
        var $parent = $(this).closest(".product_box");
        var modul_title = $("h4", $parent).text();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:13:26.723

您是否为其他模块中的每个组合框生成了相同的 ID。我认为这可能就是为什么只执行第一个。您可以使用类而不是 id 来触发更改事件。

```
 <select class="ajax_call" size="1" name="Weitere Produkte">
  $(".ajax_call").change(function(){}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:18:37.290

你的选择器是错误的。使用 ID 进行选择仅适用于一个元素。使用类进行通用选择。您应该在带有类 ajaxbar 的 div 中包含 select 元素。

```
$(document).ready(function(){
    $(".ajax_bar select").change(function(){
       var item=$(this);
       var domain = document.domain;
       var count = item.val();
       var $parent = item.closest(".product_box");
       var modul_title = $("h4", $parent).text();
       alert("count : "+count)
    });
}); 
```

这将与您提供的**n**个 HTML 标记一起使用（假设您为每个选择元素使用唯一的 ID。如果不是，您应该**。ID 应该是唯一**的元素）

JsFiddle 示例 [http://jsfiddle.net/AZAZn/5/](http://jsfiddle.net/AZAZn/5/)

# flash - .fla 中的链接更改

> ID：10653254
> 
> 赞同：0
> 
> 时间：2012-05-18T13:08:19.410
> 
> 标签：flash, hyperlink

对不起这个不好的问题，但我必须问。

我有一个 Flash 站点（我没有创建） 1 个链接到另一个站点的区域，并且想要更改此链接。但我没找到。单击该区域并打开 ActionScript 文件，但未找到。

我该如何更改此链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:50:19.900

您提供的信息不足。

我最初的建议是使用`Movie Explorer`（顶部菜单-> 窗口-> 电影资源管理器）。您会在那里找到一个搜索字段，输入 URL（您要更改的 URL）并查看它是否为您提供任何结果。

要获得更详细的建议，我们至少需要知道：

1.  这是 AS2 还是 AS3
2.  你有任何额外的 .as 文件吗
3.  可点击的“区域”是文本、图像/动画还是按钮？

# android - 如何从 android 市场中删除 .apk 文件？

> ID：10653261
> 
> 赞同：2
> 
> 时间：2012-05-18T13:09:05.247
> 
> 标签：android, google-play

我更新了一个应用程序，我必须删除现有的应用程序并将其替换为我的客户所说的现有应用程序。我的问题是：如何从几天前上传的 android Market 中删除一个 android 应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T13:15:14.740

从您的谷歌开发者帐户中取消发布它，您的应用程序将不会出现在市场上。

# iphone - 在 UIButton 实例中发送额外参数

> ID：10653263
> 
> 赞同：0
> 
> 时间：2012-05-18T13:09:15.127
> 
> 标签：iphone, ios, ios5, uikit

当我实例化这个按钮类时，是否可以发送**额外的参数，如下所示：？**

```
BttClass *myButton = [[BttClass alloc] init]; 
```

如果是这样，正确的语法是什么？我一直在尝试各种！ **我想发送一个 BOOL 和一个字符串。** 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:21:22.950

通过继承 UIButton 来扩展它。

```
//MyButton.h
@interface MyButton : UIButton {

}

@property (nonatomic, strong) NSString* aString;
@property (nonatomic, weak) BOOL aBool; 
```

您需要定义一个初始化方法

```
-(id)initWithStringValue:(NSString *)stringValue andWithBoolValue:(bool)boolValue; 
```

然后实现初始化方法

```
//MyButton.m
-(id)initWithStringValue:(NSString *)stringValue andWithBoolValue:(bool)boolValue {
    self = [super init];
    if (self) {
        self.aString = stringValue;
        self.aBool = boolValue;
    }
    return self;
} 
```

在调用类中，您的代码看起来像

```
MyButton* myButton = [[MyButton alloc] initWithStringValue:@"tralala" andWithBoolValue:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:16:10.677

只需定义一个自定义初始化程序并传入您的值：

```
- (id)initWithBoolValue:(bool)boolValue stringValue:(NSString *)stringValue  {
    self = [super init];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:18:31.797

创建您的自定义按钮

在你的

自定义按钮.h

```
@interface CustomButton : UIButton

    - (id)initWithBooleanValue:(BOOL)value;

@end 
```

并在您的 CustomButton.m

```
- (id)initWithBooleanValue:(BOOL)value
{
    self = [super init];
    if (self)
    {
        NSLog(@"Bool = %d",value);
    }
    return self;
} 
```

您可以使用此类代替普通的 UIButton

# php - 功能仅在手动调用 URL 时有效？

> ID：10653264
> 
> 赞同：0
> 
> 时间：2012-05-18T13:09:17.160
> 
> 标签：php, function, include, scope

在过去的三个小时里，我一直在用头撞墙。

我有一个简短的脚本，我不久前编写了一个用于 PHP/MySQL 应用程序的日常维护。问题不在于脚本本身。我可以通过它的 URL 手动调用这个 PHP 脚本，它执行得很好并且做它应该做的事情。问题是当某个事件碰巧让它运行并且它不起作用时，我试图将脚本包含在应用程序中。

我得到了致命的 Cannot use string offset as a array only in function error with the following line: $ingredientID = $prepItems[$i]['ingredientID'];

我理解错误意味着您分配了一个字符串，然后尝试将其视为一个数组，但是在此行之前的函数中的任何地方都没有声明 $ingredientID，并且 $prepItems[$i]['ingredientID'] 本身就是一个字符串反正！我检查并正确返回了 $prepItems。当我返回并调用该脚本的 URL 时，当我尝试从应用程序中的另一个脚本中包含它时，它将不起作用。我不明白......

完整代码如下......

```
//UPDATE PRODUCTION NUMBERS

function fixOrders(){

$k = 0;
$date = date('Y-m-d',strtotime('yesterday'));

$qry = "SELECT a.orderID,a.qty,a.date,a.itemID,b.itemName,b.itemType FROM orders a join items b on a.itemID = b.itemID WHERE a.date > '$date' AND a.itemID = '$itemID'";
$res = mysql_query($qry);
$qry = "INSERT INTO prep (orderID,dateProd,qty,itemID,dept) VALUES ";
while ($row = mysql_fetch_array($res))
{
$itemID = $row['itemID'];
$qty = $row['qty'];
$itemType = $row['itemType'];
$date = $row['date'];
$orderID = $row['orderID'];
$prepItems = prepItems($itemID);
if ($prepItems) removePrepItems($orderID);
$cp = count($prepItems);

if ($prepItems)
{
    for ($i = 0; $i < $cp; $i++)
    {               
        $ingredientID = $prepItems[$i]['ingredientID'];
        $ingredientWeight = $prepItems[$i]['ingredientWeight'];
        $ingredientUnit = $prepItems[$i]['ingredientUnit'];
        $productionOffset = $prepItems[$i]['productionOffset']; 
        $qty = ($ingredientWeight * $qty);
        if ($ingredientUnit == 'lbs') $qty = ($qty * 16);
        $date = date('Y-m-d',strtotime($date.' +'.$productionOffset.' days'));
        echo $date.' '.$productionOffset.'<br>';
        $qry .= "('$orderID','$date','$qty','$ingredientID','$itemType'),";
    }   
    $k++;
}   
}
$qry = substr($qry,0,-1);
mysql_query($qry);
echo $qry;
}

fixOrders($itemID) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:19:20.853

问题出在您的`$prepItems`变量/函数上。插入 a`var_dump`以查看您实际查看的内容。

```
...
$cp = count($prepItems);

var_dump($prepItems);

if ($prepItems)
{
... 
```

# python - 将集合设置为全局集合的内容

> ID：10653273
> 
> 赞同：1
> 
> 时间：2012-05-18T13:09:50.120
> 
> 标签：python

我正在制作一个使用 6 个全局集的程序。在被调用的各种函数中，我通过执行类似`temp_set = set`. 当我这样做时，当我更改原始集时，临时集会以某种方式被修改。我假设 Python 在此处设置`temp_set`为指向原始指针的指针`set`。我怎样才能防止它这样做。快速反应将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:13:01.363

使用该[`copy`](http://docs.python.org/library/copy.html)模块创建浅/深副本。

更好的是，使用`set.copy()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T13:10:39.137

不要使用全局变量。相反，将变量作为函数的输入。没有更多的细节，没有更多的建议。

现在你可以做

```
import copy
temp_set = copy.copy(set) 
```

但是，我建议不要使用它们并更改您的代码，这样您就不需要它们（有一个很好的参考说明为什么不在 stackoverflow 的某个地方，但似乎找不到它。相信我的话）

# android - 使用 monodroid 将图像共享到应用程序

> ID：10653279
> 
> 赞同：1
> 
> 时间：2012-05-18T13:10:14.477
> 
> 标签：android, xamarin.android

如何使用 Monodroid 通过我的 APP 启用共享图像？
我正在使用这段代码来共享我在 android 图库应用程序中的应用程序菜单。

```
<application android:icon="@drawable/icon" android:label="TestRun!">
    <activity android:name=".ImageFromGallery">
      <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
      <intent-filter>
        <action android:name="android.intent.action.SEND" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="image/*" />
      </intent-filter>
    </activity>
  </application> 
```

`Effects :`
两个应用程序图标出现在菜单上。
在图库中添加了一个共享按钮。
任何人都可以为我提供示例代码吗？
我调试的应用程序`ImageFromGallery`活动从未被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:17:41.627

这是您的完美示例。

[http://eggie5.com/8-hook-share-picture-via-menu-android](http://eggie5.com/8-hook-share-picture-via-menu-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T18:24:53.820

如果您在 android 上执行此操作，Bhavin 发布的解决方案非常棒，但您需要添加以下两行关于您的课程：

```
[Activity(Label = "Activity label", ScreenOrientation = ScreenOrientation.Portrait)]
[IntentFilter(new[]{Intent.ActionSend},Categories = new[]{Intent.CategoryDefault},DataMimeType = "image/*",Label = "Your application name")] 
```

然后，您可以根据需要处理图像信息，并且在 Bhavin 发布的链接上告知的方式是一种可靠的方法。

# ruby-on-rails - 如何建立一个将第一个关系传回的范围

> ID：10653283
> 
> 赞同：0
> 
> 时间：2012-05-18T13:10:46.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3

好的，所以我有用户和公司，并且有一个关于多对多关系的连接表

所以我可以

```
@user.companies 
```

我可以做一个回传第一家公司的范围吗

我在用户模型中绑定了这个

```
 scope :first_company, includes(:companies_users).where(:user_id => self.id).first 
```

这失败了....任何建议

更新

我有这个也可以，但我想知道是否有等效的范围

```
 def company
   self.companies.first
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:37:36.423

您需要将作用域定义为 lambda，因为作用域中 self 的上下文将是类而不是实例。

有关如何执行此操作的信息，请参阅此 SO 文章。

[Ruby Lambda 和范围](https://stackoverflow.com/questions/1476678/rails-named-scope-lambda-and-blocks)

# iphone - iPad 2 上带有 HDMI 适配器的黑条

> ID：10653285
> 
> 赞同：3
> 
> 时间：2012-05-18T13:10:49.730
> 
> 标签：iphone, ios, xcode, ipad, hdmi

我的应用程序支持 HDMI 输出。

我询问了电视分辨率的代码，得到了 1920 x 1080 像素

```
externalScreen.bounds 
```

好的，一切都很好。我已经设置了我的视图并在电视上尝试了它......

**但是：**尽管电视被正确检测为 1920 x 1080 并且我的视图也设置正确，但屏幕底部/顶部/侧面有*黑条？*

为什么格式不对？

PS 当我镜像主屏​​幕时，它也显示了条，当我用 Youtube App 观看视频时，黑条消失了？

感谢您的帮助！

**更新：**

好的，虽然我在控制台中得到了这个输出：

```
A new screen got connected: <UIScreen: 0x3439a0; bounds = {{0, 0}, {1920, 1080}}; mode = <UIScreenMode: 0x345240; size = 1920.000000 x 1080.000000>> 
```

...我仍然得到黑框。`CGRectMake(0.0f,0.0f,1920.0f,1080.0f)`为了测试目的，我初始化了我的视图。

这是我可以在屏幕上看到的视图（注意黑条）：

![在此处输入图像描述](../Images/e726759c035ab7dd630472bac9a91949.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:47:29.837

主屏幕会有黑条，因为纵横比与 16:9 不匹配（我认为是 4:3）。至于外部显示器，请检查主视图的框架（应该跨越屏幕的视图）。它可能未设置为 1920 x 1080

编辑：我将此代码用于一个项目，我必须从 iPad 输出到 1920 x 1080 显示器并且它有效

```
- (void) screenDidConnect:(NSNotification *)aNotification
{
    NSLog(@"A new screen got connected: %@", [aNotification object]);
    //[self printScreenInfo];

    UIScreen* newScreen = [aNotification object];

    CGRect screenBounds = newScreen.bounds;

    if (!self.externalWindow)
    {
        self.externalWindow = [[UIWindow alloc] initWithFrame:screenBounds];

        self.externalWindow.screen = newScreen;
        self.externalViewController.view.frame = externalWindow.frame;

        [self.externalWindow addSubview:externalViewController.view];

        self.externalWindow.hidden = NO;
        // Set the initial UI for the window.
        // [externalViewController displaySelectionInSecondaryWindow:externalWindow];

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T11:00:45.393

```
externalScreen.overscanCompensation = UIScreenOverscanCompensationInsetApplicationFrame; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T17:04:06.010

最适合大多数电视的设置是：

```
externalScreen.overscanCompensation = UIScreenOverscanCompensationInsetBounds | UIScreenOverscanCompensationInsetApplicationFrame; // this is the same as setting it to 3 
```

仅将其设置为 UIScreenOverscanCompensationInsetApplicationFrame 可能会导致 UIWindow 内容未对齐。

# jquery - 显示工具提示而不是编写多个 jquery 函数的任何替代方式

> ID：10653286
> 
> 赞同：1
> 
> 时间：2012-05-18T13:10:50.553
> 
> 标签：jquery, asp.net, jquery-tooltip

这是我的设计

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>FormBubble Examples</title>
    <link href="stylesheets/formbubble.css" media="screen" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.formbubble.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            $('#foobar1').hover(function () { //hover
                $(this).formBubble({
                    closeButton: false
                });
                $.fn.formBubble.text('hover hover hover hover');
            }, function () { //mouse out
                var thisBubble = $.fn.formBubble.bubbleObject;

                $.fn.formBubble.close(thisBubble);
            });

            $('#foobar2').hover(function () { //hover
                $(this).formBubble({
                    closeButton: false
                });
                $.fn.formBubble.text('Hello');
            }, function () { //mouse out
                var thisBubble = $.fn.formBubble.bubbleObject;

                $.fn.formBubble.close(thisBubble);
            });

        });
    </script>
</head>
<body>
    <div style="width: 220px; margin: auto;">
        <p>
            <a href="#" id="foobar1">Static Text (Hover)</a>
        </p>
        <p>
            <a href="#" id="foobar2">HTML-based AJAX (Click)</a>
        </p>
    </div>
</body>
</html> 
```

如果您看到我正在为每个 ID 编写多个函数。取而代之的是，我可以拥有一个功能并显示所需的工具提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:15:08.320

我不熟悉该`formbubble`插件，但您应该能够按类而不是单独附加事件`id`。试试这个：

```
<p>
    <a href="#" id="foobar1" class="formbubble">Static Text (Hover)</a>
</p>
<p>
    <a href="#" id="foobar2" class="formbubble">HTML-based AJAX (Click)</a>
</p> 
```

```
$('.formbubble').hover(
    function () { //hover
        $(this).formBubble({ closeButton: false });
        $.fn.formBubble.text('hover hover hover hover');
    }, 
    function () { //mouse out
        var thisBubble = $.fn.formBubble.bubbleObject;
        $.fn.formBubble.close(thisBubble);
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:15:04.030

这是类存在的原因之一。

```
$('.tooltip').hover(function(){ //hover
    $(this).formBubble({ closeButton: false });
    $.fn.formBubble.text('hover hover hover hover');
}, function(){ //mouse out
    var thisBubble = $.fn.formBubble.bubbleObject;
    $.fn.formBubble.close(thisBubble);
}); 
```

然后，您只需为每个元素提供该类的工具提示。

```
<p>
    <a href="#" id="foobar1" class="tooltip">Static Text (Hover)</a>
</p>
<p>
    <a href="#" id="foobar2" class="tooltip">HTML-based AJAX (Click)</a>
</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:14:45.810

```
$("[title]").hover(function(){
            $(this).formBubble({
                closeButton: false
            });
            $.fn.formBubble.text('hover hover hover hover');
},function () { //mouse out
            var thisBubble = $.fn.formBubble.bubbleObject;

            $.fn.formBubble.close(thisBubble);
        }); 
```

# java - 在 Android 中使用 JSoup 解析 html 不起作用

> ID：10653287
> 
> 赞同：0
> 
> 时间：2012-05-18T13:10:57.700
> 
> 标签：java, android, jsoup

我在使用 JSoup 解析 html 时遇到问题

该代码来自 [此处](http://xjaphx.wordpress.com/2012/02/04/android-xml-adventure-parsing-html-using-jsoup)找到的教程，但它只是无法正常工作，它会不断出现错误

这是代码

```
static final String BLOG_URL = "http://xjaphx.wordpress.com/";

@Override
public void onCreate(Bundle savedInstanceState) {
    // set layout view
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // process
   try {
        ((TextView)findViewById(R.id.text)).setText(getBlogStats());
        Log.i("complete","completed");
    } catch (Exception ex) {
        ((TextView)findViewById(R.id.text)).setText("Error");
         Log.i("error","error", ex);
    }
}

protected String getBlogStats() throws Exception {
    String result = "";
    // get html document structure
    Document document = Jsoup.connect(BLOG_URL).get();
    // selector query
    Elements nodeBlogStats = document.select("div#blog-stats ul li");
    // check results
    if(nodeBlogStats.size() > 0) {
        // get value
        result = nodeBlogStats.get(0).text();
    }

    // return
    return result;
}
    } 
```

我也尝试记录错误，但我不了解输出中的任何内容

```
05-18 15:18:19.706: V/Performance(28824): >>AppBindData{appInfo=ApplicationInfo{40d7a918 com.android.test}} handleBindApplication
05-18 15:18:19.746: V/Performance(28824): >>android.app.ActivityThread@40d792d0 newApplication
05-18 15:18:19.746: V/Performance(28824): <<android.app.ActivityThread@40d792d0 newApplication, 0ms
05-18 15:18:19.746: V/Performance(28824): >>android.app.Application@40d82028 onCreate
05-18 15:18:19.746: V/Performance(28824): <<android.app.Application@40d82028 onCreate, 0ms
05-18 15:18:19.746: V/Performance(28824): <<AppBindData{appInfo=ApplicationInfo{40d7a918 com.android.test}} handleBindApplication, 35ms
05-18 15:18:19.746: V/Performance(28824): >>com.android.test.testActivity@40d83970 onCreate
05-18 15:18:19.876: I/error(28824): error
05-18 15:18:19.876: I/error(28824): android.os.NetworkOnMainThreadException
05-18 15:18:19.876: I/error(28824):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1178)
05-18 15:18:19.876: I/error(28824):     at java.net.InetAddress.lookupHostByName(InetAddress.java:394)
05-18 15:18:19.876: I/error(28824):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:245)
05-18 15:18:19.876: I/error(28824):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
05-18 15:18:19.876: I/error(28824):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
05-18 15:18:19.876: I/error(28824):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
05-18 15:18:19.876: I/error(28824):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
05-18 15:18:19.876: I/error(28824):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
05-18 15:18:19.876: I/error(28824):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
05-18 15:18:19.876: I/error(28824):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
05-18 15:18:19.876: I/error(28824):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
05-18 15:18:19.876: I/error(28824):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
05-18 15:18:19.876: I/error(28824):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
05-18 15:18:19.876: I/error(28824):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
05-18 15:18:19.876: I/error(28824):     at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:404)
05-18 15:18:19.876: I/error(28824):     at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:391)
05-18 15:18:19.876: I/error(28824):     at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:157)
05-18 15:18:19.876: I/error(28824):     at org.jsoup.helper.HttpConnection.get(HttpConnection.java:146)
05-18 15:18:19.876: I/error(28824):     at com.android.test.testActivity.getBlogStats(testActivity.java:42)
05-18 15:18:19.876: I/error(28824):     at com.android.test.testActivity.onCreate(testActivity.java:29)
05-18 15:18:19.876: I/error(28824):     at android.app.Activity.performCreate(Activity.java:4531)
05-18 15:18:19.876: I/error(28824):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
05-18 15:18:19.876: I/error(28824):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2150)
05-18 15:18:19.876: I/error(28824):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
05-18 15:18:19.876: I/error(28824):     at android.app.ActivityThread.access$600(ActivityThread.java:139)
05-18 15:18:19.876: I/error(28824):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
05-18 15:18:19.876: I/error(28824):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-18 15:18:19.876: I/error(28824):     at android.os.Looper.loop(Looper.java:154)
05-18 15:18:19.876: I/error(28824):     at android.app.ActivityThread.main(ActivityThread.java:4944)
05-18 15:18:19.876: I/error(28824):     at java.lang.reflect.Method.invokeNative(Native Method)
05-18 15:18:19.876: I/error(28824):     at java.lang.reflect.Method.invoke(Method.java:511)
05-18 15:18:19.876: I/error(28824):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-18 15:18:19.876: I/error(28824):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-18 15:18:19.876: I/error(28824):     at dalvik.system.NativeStart.main(Native Method)
05-18 15:18:19.876: V/Performance(28824): <<com.android.test.testActivity@40d83970 onCreate, 128ms
05-18 15:18:19.876: V/Performance(28824): >>com.android.test.testActivity@40d83970 onStart
05-18 15:18:19.876: V/Performance(28824): <<com.android.test.testActivity@40d83970 onStart, 0ms
05-18 15:18:19.876: V/Performance(28824): >>com.android.test.testActivity@40d83970 onPostCreate
05-18 15:18:19.876: V/Performance(28824): <<com.android.test.testActivity@40d83970 onPostCreate, 1ms
05-18 15:18:19.876: V/Performance(28824): >>com.android.test.testActivity@40d83970 onResume
05-18 15:18:19.876: V/Performance(28824): <<com.android.test.testActivity@40d83970 onResume, 0ms
05-18 15:18:19.936: D/libEGL(28824): loaded /system/lib/egl/libGLES_android.so
05-18 15:18:19.936: D/libEGL(28824): loaded /system/lib/egl/libEGL_adreno200.so
05-18 15:18:19.946: D/libEGL(28824): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
05-18 15:18:19.946: D/libEGL(28824): loaded /system/lib/egl/libGLESv2_adreno200.so
05-18 15:18:20.027: D/OpenGLRenderer(28824): Enabling debug mode 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:18:00.133

由于您尚未发布错误日志，以下是猜测工作的结果。

您正在连接到服务器并在主/UI 线程中解析 HTML。这将使主线程无响应并最终终止（或`NetworkOnMainThreadException`抛出）。查看[Painless Threading](http://developer.android.com/resources/articles/painless-threading.html)以了解如何在后台执行长时间任务并在完成后更新 UI。

# asp.net-mvc - 带有 Rest API 的 ASP.Net MVC CMS

> ID：10653288
> 
> 赞同：-1
> 
> 时间：2012-05-18T13:11:08.123
> 
> 标签：asp.net-mvc, content-management-system

我正在寻找有关基于 ASP.Net MVC 的内容管理系统 (CMS) 的建议。我需要有一个独立的管理站点，内容贡献者可以在其中管理内容。他们应该能够使用内容可用的站点和页面来标记他们的内容。我还需要通过 RESTful API 访问数据，我可以在其中以编程方式将内容拉入网站页面。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:12:45.820

[Orchard](http://www.orchardproject.net/)和[Umbarco](http://umbraco.com/)是一些最流行的 ASP.NET MVC CMS。确保您已经检查过它们，看看它们是否适合您的需要。

# opencl - Radeon HD 4850 和 OpenCL：cl_khr_fp64 可以在这个显卡上工作吗？

> ID：10653289
> 
> 赞同：0
> 
> 时间：2012-05-18T13:11:12.393
> 
> 标签：opencl, double-precision

[根据 AMD兼容性表](http://developer.amd.com/sdks/AMDAPPSDK/pages/DriverCompatibility.aspx)，此视频卡 (Radeon HD 4850) 仅符合 OpenCL 1.0 。我需要一些硬件来使用**doubleN 类型**进行密集的财务计算（根本没有浮点数！）。根据[这张](http://radeon.ru/reference/cardtable/)卡片表，这张卡片可以使用双重类型。现在我有可能以极具吸引力的价格购买它。

**如果回答者在使用带有fp64**扩展的 OpenCL 卡方面有真正的经验，我将不胜感激。当然，如果这张卡有问题，请在这里放两行。

谢谢你，对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:38:36.687

此卡支持双精度，但 4xxx 系列芯片中不包含本地内存。由于标准要求本地内存支持，因此它使用全局内存进行模拟并且速度非常慢。许多算法需要本地内存来获得良好的加速。因此，5xxx 或更高的新卡要好得多。

此外，一些旧卡/旧 SDK 版本的组合仅通过 cl_amd_fp64 扩展（不是官方的 cl_khr_fp64 扩展）支持双精度，因为标准中的一些小东西不受支持。在大多数情况下，这无关紧要，只是您需要更改代码中的扩展名以使其与双打配合使用。

作为一般提示，如果您打算进行认真的 GPGPU 开发，我会尽量避免使用 4xxx 系列。还要记住，较新的 7xxx 系列比 5xxx 和 6xxx 系列更优化了 GPU 计算，缩小了与 NVIDIA 卡的大部分差距。因此，如果可以，请尝试以支持双精度的 7xxx 为目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:37:12.037

我以前没有在 DP 上使用过这张卡，但如果规范说它是支持的，那么值得一试。

在我看来，您应该使用较新的型号卡。有很多便宜的卡会胜过 4850，而且它们也将支持一些新功能。

# php - TCPDF 文本字段中的默认值和样式

> ID：10653293
> 
> 赞同：0
> 
> 时间：2012-05-18T13:11:23.697
> 
> 标签：php, textfield, tcpdf

我正在尝试在 PDF 文件中生成一个表单，其中包含具有默认值的可编辑文本字段。这是代码的摘录：

```
$pdf = new TCPDF('P','mm','A5',true,'UTF-8',false);

$pdf->SetCreator(PDF_CREATOR);
$pdf->SetAuthor('Author');
$pdf->SetTitle('Document');

$pdf->SetMargins(0,0,0);
$pdf->setImageScale(1);
$pdf->setPrintHeader(false);
$pdf->setPrintFooter(false);
$pdf->SetAutoPageBreak(FALSE, 0);
$pdf->setLanguageArray($l);

$pdf->TextField('field',100,30,array(),array(V=>'hello world'),10,10);

$pdf->Output('out.pdf','I'); 
```

我正在 Chrome 的 PDF 查看器和 Adob​​e Reader X 中对此进行测试，结果是默认文本没有出现，尽管当我单击该字段时它会出现。当我更改初始值并取消聚焦该字段时，文本字段将可见。如果我不更改初始字段并且只是取消焦点而不更改任何内容，则文本字段仍然不可见。

另一个问题是场地周围的丑陋边界。

我基本上想要实现的是：

```
<input type="text" value="hello world" style="border:0"/> 
```

这是生成的 PDF：[doc.pdf](https://www.dropbox.com/s/0j5gh0rt99ujbb4/doc.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:55:46.690

$pdf->TextField('field',100,30,array(),array( **'v'** =>'hello world'),10,10);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-05T15:36:15.553

请参阅第 424 页上的[Acrobat API 参考的](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/js_api_reference.pdf)[TCPDF 文档](http://www.tcpdf.org/doc/code/classTCPDF.html#a71d382a4356e7fb3f9fa72e53642c09c)和官方Javascript

或使用

```
$pdf->TextField('customer', 159, 7, array('multiline'=>true, 'lineWidth'=>0, 'borderStyle'=>'none', 'defaultStyle' => array('textFont'=>array('fontWeight'=>'bold'))), array('v' => $customer_name)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:24:35.820

刚开始使用 TCPDF，遇到了同样的问题。

将您的文本字段更改为此

$pdf->TextField('field',100,30,array(),array('V'=>'hello world','dv'=>'hello world'),10,10);

您需要 'v'=> 设置和 'dv' => 设置。

您可以在 TCPDF 附带的示例代码 example_014.php 中看到它的示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-08T11:52:08.523

就我而言，我们将 html 转换为 pdf（其中包含许多可编辑字段）。
此代码禁用了转换后的 pdf 中所有字段的边框：

`$pdf->setFormDefaultProp(array('lineWidth' => 0, 'borderStyle' => 'none'));`

# jquery - jQuery 即兴之旅 - 覆盖的不透明度

> ID：10653299
> 
> 赞同：1
> 
> 时间：2012-05-18T13:11:58.633
> 
> 标签：jquery, overlay, impromptu

我正在使用[jQuery impromptu](http://trentrichardson.com/Impromptu/)在我的网站上显示弹出框之旅（页面右下角的示例 19）。

`#idOfContainer`有没有办法使覆盖层不覆盖单个容器？换句话说，我希望覆盖覆盖的整个页面除了我在游览中引用的容器（即兴引用的具有 id 属性的任何元素）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:06:27.880

我通过在用户单击时使用 jQuery 更改 z-index 解决了这个问题。:)

# bash - 确认存在一个或多个目录

> ID：10653300
> 
> 赞同：0
> 
> 时间：2012-05-18T13:12:08.543
> 
> 标签：bash, shell, if-statement

我想使用通配符检查 Bash 脚本中是否存在一个或多个目录。

我试过这个；

```
if [ -d app/*management ]
then
    for mscript in `ls -d app/*management`
    do
        ...
    done
fi 
```

如果有一个匹配项但会引发错误“预期二元运算符”，则该方法有效。

关于这样做的好方法有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:16:19.227

如果表达式中没有 && (and)，则不能使用 -d 同时检查多个目录。我会用这个：

```
for dir in app/*management; do
   if [[ -d $dir ]]; then
      ...
   fi
done 
```

您应该使用 glob 而不是解析 ls 的输出。有关更多信息，请参阅以下链接：http: [//mywiki.wooledge.org/ParsingLs](http://mywiki.wooledge.org/ParsingLs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T13:14:37.243

你为什么不这样做：

```
for mscript in app/*management ; do
  if [ -d "$myscript" ] ; then
    ...
  fi
done 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T13:25:24.797

在 glob 扩展到您的管理目录列表后，`if`语句看起来像

```
if [ -d app/1management app/2management ] 
```

由于`-d`只接受一个参数，bash 不知道如何处理剩余的目录。要 bash，您似乎忘记包含二元运算符。

您可以执行以下操作：

```
for mscript in app/*management; do
    if [ ! -d $mscript ]; then
        continue
    fi
    ...
done 
```

编辑：正如 jordanm 评论的那样，以下内容可能不是必需的，但我将把它留在这里以供参考，`nullglob`很高兴知道。

一个警告。如果 app/*management 可能不会扩展到任何内容，则需要`nullglob`在循环之前设置 shell 选项，否则“app/*management”将被视为文字字符串，而不是 shell glob。

```
if ! shopt nullglob; then
   setting_nullglob=1
   shopt -qs nullglob
fi
for mscript in app/*management; do
...
done
if [ ${setting_nullglob:-0} = 1 ]; then
    unset setting_nullglob
    shopt -qu nullglob
fi 
```

# emacs - 使用 reftex-citation 插入引用会中断 Emacs 缓冲区

> ID：10653303
> 
> 赞同：1
> 
> 时间：2012-05-18T13:12:18.127
> 
> 标签：emacs

我正在尝试在 Emacs 24.1.50.3 中开始使用 RefTeX，构建`--without-x`. 跑步

```
(reftex-citation) 
```

一开始似乎有效。我可以输入一个正则表达式并在我的参考书目中获取匹配的引文列表。但是，选择一个条目会使缓冲区停止工作。尝试导航会出现以下错误

```
Debugger entered--Lisp error: (error "Marker does not point anywhere")
  posn-at-point()
  line-move-visual(1 nil)
  line-move(1 nil nil 1)
  byte-code("\302\303\211   $\207" [arg try-vscroll line-move nil] 5)
  next-line(1 1)
  call-interactively(next-line nil nil) 
```

这不应该是由我的 init.el 引起的，因为即使我启动 emacs并手动`--no-site-files`输入也会发生这种情况。`(reftex-mode)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T14:03:36.677

实际上，`--no-site-file`不会禁止您的 init.el 文件。

看`C-h``i``g` `(emacs) Initial Options` `RET`

开始`emacs -Q`确保这不是由非标准库引起的。

如果是这样，那么这听起来像是一个错误，在这种情况下：

`M-x` `report-emacs-bug` `RET`

# javascript - 用于计算单词的javascript正则表达式

> ID：10653305
> 
> 赞同：0
> 
> 时间：2012-05-18T13:12:28.527
> 
> 标签：javascript, regex

我得到了这个代码来计算来自 html 编辑器的字数。

```
(providing htmlData has already been set)
var rawWords = htmlData.replace(/<(?:.|\s)*?>/g, '')
                       .replace(/(\r\n|\n|\r)/gm,' ');
var filteredWords = rawWords.replace(/\[([^\]]+)\]/g,'')
                            .replace(/\s+/g, " ")
                            .replace(/^\s+|\s+$/g, ""); 
```

据我了解，第一行删除了 html，然后删除了任何返回。

下一行删除括号中的任何内容（这是在不影响字数的情况下添加注释），然后删除多余的空格

但是如果我输入这个：

```
Apple

Charlie

Tom 
```

它给我的字数是 6，而不是 3。知道为什么吗？我不擅长正则表达式！！！！

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:52:39.887

这些正则表达式丑陋且多余。我的建议是通过执行以下操作来获得清理后的 HTML：

```
var a=document.createElement('div')
a.innerHTML=htmlData;
textData=a.innerText 
```

然后用一个简单的正则表达式循环并增加一个计数器：

```
var patt=new RegExp(/(^|\W)(\w+)($|\W)/g);
var counter=0;
var result=patt.exec(textData);
while(result!=null) {
  counter++;
  result=patt.exec(textData);
} 
```

这是非常粗略的（并且做出了很多可能对您不起作用的假设）但是，A/您将与“单词”[您必须处理的定义]的数量相反，而 B/在获得您想要的内容之前，您不必替换和删除大量文本。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:54:37.483

试试这个，很简单，只需拆分空格/数字，并对数组进行计数。

```
window.onload = function() {

    // get string as text
    var text = document.body.innerText;

    // replace all non letters (so we don't count 1 as a word)
    text     = text.replace(/[^a-zA-Z\s]/g, '');

    // split on whitespace
    var words = text.split(/[\s]+/);

    // output -- 52
    console.log('numwords', words, words.length); // numwords 52
} 
```

下面的完整示例：

```
<html>
<head>
<script type="text/javascript">// script</script>
</head>
<body>

a b c d e f g
1 1 1 1 1 1 1

the quick brown fox jumped over the lazy dog.
the quick brown fox jumped over the lazy dog.
the quick brown fox jumped over the lazy dog.<br><br><br><br><br>
the quick brown fox jumped over the lazy dog.
the quick brown fox jumped over the lazy dog.

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T13:49:57.510

用“”替换空格不适合这种方式。尝试：

```
 .replace(/[ ]{2,}/gi," ");  /*{2,}=repeated*/
 .replace(/(^\s*)|(\s*$)/gi,""); 
```

代替：

```
.replace(/\s+/g, " ")
.replace(/^\s+|\s+$/g, ""); 
```

它应该可以正常工作。

# iphone - ASIFormDataRequest responseString 返回 nscfstring 或 nscfconstant 字符串

> ID：10653306
> 
> 赞同：0
> 
> 时间：2012-05-18T13:12:29.863
> 
> 标签：iphone, objective-c, web-services, nsstring, asihttprequest

我`ASIFormDataRequest`用来调用`web service`带有视频文件的文件。如果视频很小，它可以正常工作，但如果视频大约 30 秒或以上，那么它的响应会在`__NSCFString`某个时间或某个时间返回`__NSCFConstantString`

我的代码如下。

```
__block ASIFormDataRequest *request=[[ASIFormDataRequest alloc] initWithURL:[NSURL URLWithString:APP_APIURL]];

    [request setPostValue:strVal forKey:@"jsonRequest"];
    if (videoData) {
        [request setData:videoData withFileName:videoName andContentType:nil forKey:@"videoFile"];
    }

    [request startSynchronous];
    request.timeOutSeconds=999999999;
    // response 
    NSString *strResponse=[request responseString];

if (strResponse) {
    SBJsonParser *parser=[[SBJsonParser alloc] init];
    NSMutableDictionary *dicData=[[parser objectWithString:strResponse] valueForKey:@"uploadVideo"]; 
```

请帮我解决这个问题。

希瓦姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:52:28.673

以下是您的问题的一些解决方案：

*   使用自省并检查返回的对象的类。如果你得到一个“常量”字符串，可能不是你所期望的。打印它或检查它的内容。
*   如果您正在接收视频文件 - 使用 [request responseData] 或更好，请使用 ASIHTTPRequest 库中描述的文件保存技术。如何同时下载文件和解析 json 响应？
*   使用[JSONKit](https://github.com/johnezang/JSONKit "JSONKit github 存储库") - 恕我直言，最快的 json 解析器。

# windows - 代码签名有效期

> ID：10653307
> 
> 赞同：0
> 
> 时间：2012-05-18T13:12:34.730
> 
> 标签：windows, winapi, code-signing

我有兴趣为内核模式驱动程序购买 Microsoft 代码签名证书。

我的第一个问题是：威瑞信或 Globalsign 证书是强制性的吗？它们很贵，我找到了另一个名为 Digicert 的提供商，第一年只有 178 美元。

这是stackoverflow的一个老问题： [内核模式代码签名](https://stackoverflow.com/questions/3879595/kernel-mode-code-signing)

这是digicert页面的链接： [http ://www.digicert.com/code-signing/driver-signing-in-windows-using-signtool.htm](http://www.digicert.com/code-signing/driver-signing-in-windows-using-signtool.htm)

我的第二个问题是用户能够运行应用程序多长时间。如果证书过期是否意味着用户将无法运行该应用程序，或者只是我无法编译并再次签署另一个可执行文件，但该应用程序将运行？

谢谢

亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:04:40.487

DigiCert 证书绝对可以用于内核模式签名 - VeriSign 和 GlobalSign 不是强制性的，但它们可能是链接发布时唯一支持的证书。DigiCert 在 2 月正式宣布了内核模式签名功能 ( [http://www.digicert.com/news/2012-02-28-kernel-mode-code-signing.htm](http://www.digicert.com/news/2012-02-28-kernel-mode-code-signing.htm) )。

对于您的第二个问题 - 您将无法在证书过期后签署新的受信任应用程序，但如果它在签名时带有时间戳，用户可以继续运行该应用程序。

DigiCert 关于时间戳的说明可在[http://www.digicert.com/code-signing/signcode-signtool-command-line.htm](http://www.digicert.com/code-signing/signcode-signtool-command-line.htm)找到。

完全公开，我是 DigiCert 的营销副总裁。看到这篇文章出现并认为我可以提供帮助:-)。如果您有任何其他问题，请随时联系我们的支持团队 801-896-7973。

# php - 使用 PHPUnit，使用 Data Provider，最后一个数据集总是显示“测试用例被意外终止”

> ID：10653313
> 
> 赞同：2
> 
> 时间：2012-05-18T13:13:00.740
> 
> 标签：php, testing, phpunit, zend-studio

所以我使用 PHPUnit 进行测试。尝试在我的一项测试中使用 DataProvider。

```
/**
 * Tests Events_Event->Events_Event()
 * @dataProvider provider
 */
public function testEvents_Event($Name, $param, $time) {
        //$this->assertInstanceOf("Events_Event", $this->Events_Event->Events_Event("test2", array()));
        $this->assertTrue(true);
    }

public static function provider()
    {
        return array(
            array("test", array("Like a boss"), "Cheack the time"),
            array("test2", array("Like a boss"), "9:00"),
            array("test3", array("Time to go home"), "4:00"),
            array("test3", array("Time to go home"), "4:00")
            );
    } 
```

结果：

```
testEvents_Event with data set#0
testEvents_Event with data set#1
testEvents_Event with data set#2
testEvents_Event with data set#3: The test case was unexpectedly terminated 
```

无论有多少数据集以及最后一个数据集是否有效，这都会发生在最后一个数据集上。如您所见，我们已将测试简化为一个简单`$this->assertTrue(true)`的，但它仍然给我们错误。

我们需要做什么才能让数据提供者正常工作？

如果我在 Zend Studio 9.0.3 中使用 PHPUnit 很重要，我已经检查了更新，它告诉我一切都是最新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:58:29.827

我正在经历

```
.... 
```

时间：0秒，内存：12.75Mb

OK（4 个测试，0 个断言）

```
/**
 * Tests Events_Event->Events_Event()
 * @dataProvider provider
 */
public function testEvents_Event($Name, $param, $time)
{

}

public static function provider()
{
    return array(
        array("test", array("Like a boss"), "Cheack the time"),
        array("test2", array("Like a boss"), "9:00"),
        array("test3", array("Time to go home"), "4:00"),
        array("test3", array("Time to go home"), "4:00")
        );
} 
```

你如何运行测试？有没有其他依赖？通过任何 IDE 运行的测试？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:20:21.297

PHPUnit 为每个数据提供者方法实例化测试用例。由于*PHP 的魔力，*您可以摆脱使用静态数据提供者方法，但它们是使用实例调用的，因此应该是非静态的。

如果您的测试用例有一个构造函数，它必须接受三个参数（参见源代码`PHPUnit_Framework_TestCase`）并将它们传递给父构造函数。其中之一是来自该特定测试的提供者的数据。

然而，我怀疑这些是问题所在。我的钱花在 ZendStudio 上，以及它如何按照 Gordon 的建议解析 PHPUnit 的输出。当您从命令行运行此测试用例时，您是否看到相同的问题？

# c++ - 获取场景节点的父节点

> ID：10653315
> 
> 赞同：0
> 
> 时间：2012-05-18T13:13:14.003
> 
> 标签：c++, member, irrlicht

我有一个我制作的“门”类对象，它有一个名为“块”的 ISceneNode 成员。挡是门的物理表现。我需要门在单击时运行其“打开”功能。

我正在使用“getSceneNodeFromScreenCoordinatesBB”和十字准线，以便用户可以瞄准房间另一侧的门并打开它。

但是，getSceneNodeblah 返回块。我需要能够引用包含块的门对象，而不是块本身。关于我将如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:16:42.983

当然，我在问它 10 分钟后就知道了，哈哈。这是我的答案：“点击鼠标时，获取视野中所有对象的位置，并将它们与您正在查看的 SceneNode 进行比较。匹配的是您的对象。

# php - ereg("^[0-9a-z] 只限制 0-9 和 az 字符，其他语言字符呢？

> ID：10653318
> 
> 赞同：0
> 
> 时间：2012-05-18T13:13:21.603
> 
> 标签：php

我有一个表格，我想允许所有字符的用户没有任何空格。所以我用这个作为英文字符

```
ereg("^[0-9a-z] 
```

但后来我决定允许其他不同语言的字符，如阿拉伯语、西班牙语、中文，所以我取消了这个限制，但之后用户开始使用带空格的用户名注册，因此我的网站显示找不到页面。所以你能建议我应该使用什么，以便我可以允许使用不同语言的用户注册我的网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:17:00.930

```
ereg("[^\s]") 
```

`^\s`表示除空格以外的任何字符。

但请注意，`ereg`已弃用。您应该研究`preg_*`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:23:13.310

不要使用`ereg`，它已被弃用。相反，使用`preg`：

```
preg_match("/^\S+/$", $input_value); 
```

这将匹配任何没有空格的字符串。

# macros - 我可以在 OpenOffice Calc 中创建水平自动过滤器吗

> ID：10653319
> 
> 赞同：2
> 
> 时间：2012-05-18T13:13:25.077
> 
> 标签：macros, openoffice-calc, openoffice-basic

自动过滤器垂直排序数据，但我想水平过滤行。可以说我有下表：

1 2 2 1 2

BAEFF

BDEFF

CDEFF

我能做的是设置一个自动过滤器并只过滤第一列中包含“B”的行。我想做的是只过滤包含“2”的行（在这种情况下，这些行是第二个、第三个和最后一个）。

我找到了一些关于这个问题的信息。我找到的所有答案都包含一些宏来完成工作，但它们是为 MS Excel 编写的，并且与 OpenOffice 不兼容

例如，此宏应该过滤行，但在 OpenOffice Calc 中不起作用：

```
Option Explicit

Sub horizontal_filter()
'Erik Van Geit
'060910

Dim LC As Integer           'Last Column
Dim R As Long
Dim i As Integer
Dim FilterValue As String

Const FilterColumn = 1      '1 is most logical value but you may change this

R = ActiveCell.Row
LC = Cells(R, Columns.Count).End(xlToLeft).Column

FilterValue = Cells(R, FilterColumn)

Application.ScreenUpdating = False

'to filter starting after FilterColumn
For i = FilterColumn + 1 To LC
'to filter all columns even before the filtercolumn
'For i = 1 To LC
    If i <> FilterColumn Then
    Columns(i).Hidden = Cells(R, i) <> FilterValue
    End If
Next i

Application.ScreenUpdating = True

End Sub 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:45:06.840

在合理费用的假设下，你不能。仅转换数据以使行获得列会容易得多，反之亦然。因此，我强烈建议与该选项`Paste Special`一起使用来转换数据。`Transpose`您甚至可以使用该`TRANSPOSE()`函数动态地执行此操作。

**编辑：**

现在我明白了 - 你想**隐藏**基于某个值的列。事实上，这可以使用宏来实现，所以我的第一个答案是不正确的 - 抱歉！周围有一些宏可以为您执行此操作。您可以将此类解决方案与自动过滤器结合使用。这是[来自 OpenOffice.org 论坛的 king_026 的解决方案](http://user.services.openoffice.org/en/forum/viewtopic.php?f=20&t=11745#p55209)（稍微适应了表格结构 - 见下文）：

```
REM  *****  BASIC  *****
sub hide
   rem ----------------------------------------------------------------------
   rem define variables
   dim document   as object
   dim dispatcher as object
   rem ----------------------------------------------------------------------
   rem get access to the document
   document   = ThisComponent.CurrentController.Frame
   dispatcher = createUnoService("com.sun.star.frame.DispatchHelper")

   rem get the current column
   nCol = ThisComponent.CurrentSelection.CellAddress.Column

   rem set the properties for moving right
   dim args2(1) as new com.sun.star.beans.PropertyValue
   args2(0).Name = "By"
   args2(0).Value = 1
   args2(1).Name = "Sel"
   args2(1).Value = false

   rem make thecurrent column counter
   dim cCol as integer
   CCol = 0

   rem goto the first column
   dim args1(0) as new com.sun.star.beans.PropertyValue
   args1(0).Name = "ToPoint"
   args1(0).Value = "$A$2"

   dispatcher.executeDispatch(document, ".uno:GoToCell", "", 0, args1())

   rem loop until you get back to the selected cell
    Do Until cCol > nCol

    rem hide if the cell value is 1
        if ThisComponent.CurrentSelection.string <> "" and ThisComponent.CurrentSelection.value = 1 then

            rem ----------------------------------------------------------------------
            dispatcher.executeDispatch(document, ".uno:HideColumn", "", 0, Array())

        End if

        rem goto the right nad increment the column counter
        dispatcher.executeDispatch(document, ".uno:GoRight", "", 0, args2())
        cCol = cCol + 1

    Loop

End sub 
```

所以，下表：

![计算1](../Images/924c318e7726d97519b0440c1bc573c7.png)

在 Col1 上的 Autofilter 和宏完成他的工作之后将如下所示：

![计算](../Images/6c2f917ac970b88cbe32d1f81696e55a.png)

# video - 如何在线播放视频，一个扩展，兼容所有平台？

> ID：10653330
> 
> 赞同：0
> 
> 时间：2012-05-18T13:14:17.900
> 
> 标签：video

我需要帮助才能在所有平台上播放带有一个扩展名的视频，例如 FLV 在 WIN 下运行但不在 MAC 下运行，所以我必须上传 FLV 并使用 FFMPEG 编码器生成另一个带有 MP4 扩展名的视频文件.. 有什么解决方案在所有平台上使用一个扩展播放视频？问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:04:40.510

# You can't.

There is no one-size-fits-all video codec for ***all*** platforms.

That said, you can go for a lowest common denominator that will cover most platforms.

*   h264 video
*   mp3 audio
*   baseline 3.0

For the most part, if you really want to distribute video to all platforms you'll need to do multiple encodings of the source video. FLV is particularly a bad choice, unless you are only interested in playing the video in Flash-based players.

*BTW: Your question would be easier to answer with more specifics if you defined the "platforms" you are targeting, the use case, codec parameters/details, etc.*

# php - 加载更多我想要的 jquery 函数

> ID：10653337
> 
> 赞同：-1
> 
> 时间：2012-05-18T13:14:50.567
> 
> 标签：php, jquery, model-view-controller

我正在使用 MVC，我的网站设计是有页眉、正文和页脚，我网站中的每个页面都有相同的页眉和页脚，但正文不同

并且对于任何页面都有一个包含 jquery 调用的 JS 文件

对于许多页面，当它打开时，jquery调用工作并使用ajax从数据库中获取数据并将该数据放入该页面

我的问题是：感觉 jquery 调用`$(document).ready`以

# 例子

这个 jquery 只是一个页面

```
$(document).ready(function(){
    $.getJSON("http://localhost/Mar7ba/Cell/getAllCountries/TRUE",function(data){
        var select = $("#countrySelector");
        var options = '';
        for(var i=0;i<data.length;i++){
            options += "<option>"+data[i]+"</option>";
        }
        select.html("<option>Select Source</option>"+options);
    });
}); 
```

这个 jquery 用于另一个页面，但它是在我加载第一页时加载的

```
$(document).ready(function(){
        $.getJSON("http://localhost/Mar7ba/Type/getAllTypes/TRUE",function(data){
            var options = '';
            options+="<option>Select Type</option>";
            for(var i=0;i<data.length;i++){
                options += "<option>"+data[i]+"</option>";
            }
            $("#addPlace #apTypeSelect").html(options);
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:16:45.327

如果您不希望脚本在页面上运行，那么：

1.  不要把它放在页面上，*或者*
2.  将其包装在一个条件中，检查运行它是否适合当前页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:36:36.000

在触发 AJAX 方法之前，测试您正在操作的元素是否存在。例如，在您的第一个示例中：

```
$(document).ready(function(){
    var select = $("#countrySelector");
    if (select.length) { // must test .length; 'select' always exists even if it's empty
        $.getJSON("http://localhost/Mar7ba/Cell/getAllCountries/TRUE",function(data){
            var options = '';
            for(var i=0;i<data.length;i++){
                options += "<option>"+data[i]+"</option>";
            }
            select.html("<option>Select Source</option>"+options);
        });
    }; // end if
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T15:25:03.307

我认为如果你将所有页面的所有启动功能都放在 document.ready 中，那么功能会变得太冗长并且会影响可读性。您应该为每个页面编写不同的启动函数并在加载时从页面调用它们，在此您的代码将保持简单，例如

在 js 文件中

```
function InitialFunctionOfPage1()
{//define all prerequisites}

function InitialFunctionOfPage2()
{//define all prerequisites} 
```

并且在每一页中，您都可以在 document.ready 上使用相关功能，对于第 1 页来说足够了

```
$(document).ready(function()
{
 InitialFunctionOfPage1();
} 
```

# umbraco - Umbraco 5 自定义蜂巢/树提供者 - 如何确定位置？

> ID：10653339
> 
> 赞同：0
> 
> 时间：2012-05-18T13:14:55.403
> 
> 标签：umbraco, provider, umbraco5, umbraco-hive

我正在使用 Umbraco 5.1 来实现[这篇博文](http://web-matters.blogspot.com/2011/11/umbraco-5-hive-provider-tree-editor.html)，该博文描述了如何使用自定义树提供程序创建自定义配置单元提供程序以在内容树中显示数据。这一切都很好，但是节点显示如下：

> *   内容
>     *   音乐目录（自定义）
>     *   内容（默认内容节点）

![Umbraco 树输出](../Images/c597af6e02924364729eb5d4d69722d6.png)

所以就凭空出现了一个新的*层次*。`Content`

为什么是这样？有没有办法让`Music Catalog`节点成为的**兄弟**`Custom test block`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T23:32:48.617

有可能，[线程](http://our.umbraco.org/forum/core/umbraco-5-general-discussion/31614-How-do-I-create-subnodes-in-my-tree-controller)会帮助你

# calendar - Apache 轴：日历对象中返回的日期错误

> ID：10653343
> 
> 赞同：0
> 
> 时间：2012-05-18T13:15:06.713
> 
> 标签：calendar, axis

使用 Apache 轴来使用具有`type="xsd:dateTime"`. 在带有普通请求的 SOAP UI 中，响应具有 -

```
 <UpdateDateTime>2012-05-08T04:58:00</UpdateDateTime> 
```

但是，当使用轴使用者时，对于相同的值 - l`istOfValues[pos].getUpdateDateTime().getTime()`返回不同的时间 - `2012-05-07 21:58:00`。 `getUpdateDateTime()`在上面返回 java.util.Calendar 的实例。

是时区问题还是中间的“T”解析不正确？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:18:27.743

您如何显示“2012-05-07 21:58:00”？这几乎可以肯定只是时区问题。我怀疑它将 2012-05-08T04:58:00 视为通用时间，并将您的本地时区应用于该时间。很难说没有看到任何代码或您的诊断来自哪里，但如果这不仅仅是一个时区问题，我会感到*惊讶*。

当然，如果您可以使用[Joda Time](http://joda-time.sf.net)而不是`java.util.Date/Calendar`，您可以使用`LocalDateTime`我怀疑在这里表示的内容（鉴于响应中缺少时区信息）。我不知道 Axis 是否支持这一点，但值得研究一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T17:20:53.757

这是 Inspect 中带有日期时间值的 Eclipse 调试 -

[http://i45.tinypic.com/157zpy1.jpg](http://i45.tinypic.com/157zpy1.jpg)

＆soap UI中的简单请求给出-

2012-05-08T04:58:00 印度孟买

抱歉，我的第一个回复是指 UTC。

# facebook-graph-api - 如何通过 facebook 事件的状态（参加、受邀等）获取用户计数

> ID：10653351
> 
> 赞同：0
> 
> 时间：2012-05-18T13:15:26.013
> 
> 标签：facebook-graph-api

有没有办法通过 facebook 事件的状态来获取用户数？Facebook 在活动页面上执行此操作（每个状态的左侧栏旁边都有一个计数），但找不到任何有关如何执行此操作的文档。它需要适用于小型或大型活动。对于小型活动，我可以轻松获取用户列表并快速计数。但是对于超过 1000 个用户的事件，以前的方法太慢并且不能接受。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:29:56.957

我认为没有比计算每个用户列表更好的方法了，如下所述。

> 您可以通过向 /EVENT_ID/attending 发出 HTTP GET 来“参加”活动的用户
> 
> 您可以通过向 /EVENT_ID/maybe 发出 HTTP GET 来查看哪些用户已对事件回复“可能”
> 
> 您可以通过向 /EVENT_ID/declined 发出 HTTP GET 来拒绝哪些用户的事件（即响应“否”）
> 
> 您可以通过向 /EVENT_ID/noreply 发出 HTTP GET 来确定哪些用户尚未回复事件

取自[https://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

6 月 28 日更新：

截至今天，Facebook 向 Event FQL 表中添加了新字段，允许您完全按照自己的意愿行事。

来自开发者博客：

> 我们已将以下字段添加到事件 FQL 表中，以便更轻松地获取 RSVP-ed 到事件的用户计数：
> 
> all_members_count
> Attend_count
> unsure_count
> denied_count
> not_replied_count

它们几乎是不言自明的。

# asp.net-mvc-3 - 在 Mvc3 中的图像上显示工具提示

> ID：10653352
> 
> 赞同：4
> 
> 时间：2012-05-18T13:15:28.743
> 
> 标签：asp.net-mvc-3, tooltip

我正在使用 asp.net MVC3，我想显示一个包含有关课程信息的表格，其中我有一个名为“信息”的字段，它显示图像。我想在鼠标放在该图像上时显示工具提示

我正在显示这样的图像：

```
<img id="ok" src="../../Images/info.jpg" alt="tooltip"/> 
```

我不想使用任何添加的插件

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T13:22:00.317

在 HTML 标签中使用`title`以及`alt`

```
<img id="ok" src="../../Images/info.jpg" title="This is your tooltip message"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T13:25:33.403

`alt`如果图像不存在，元素上的属性`img`将用作**替代文本。**一些浏览器在将鼠标悬停在图像上时将这些显示为工具提示，但这不是标准的。

您可以使用该`title`属性在图像悬停时显示**工具提示**。

使用图像时，您应该始终提供一个`alt`属性，这对于可访问性（屏幕阅读器阅读`alt`文本）是最好的，如果您没有该属性，XHTML 将失败。

# ruby - 如何使这个 ruby 代码更具可读性？

> ID：10653353
> 
> 赞同：3
> 
> 时间：2012-05-18T13:15:30.883
> 
> 标签：ruby

以示例 ruby​​ 代码为例，如何重写/缩进它，以便下面的 ruby​​ 代码使其更具可读性并确保它适合一行，即 80-90chars？

```
%w(survey survey_section question_group question dependency dependency_condition answer answer_type answer_validity validation validation_condition validation_prefix validation_precludes error error_type error_level error_code style style_info style_override user user_model_name user_type).each {|m| require m } 
```

阅读它很痛苦，因为我在整个代码库中都有这样的长数组。它需要很多水平滚动，我不喜欢那样

有什么办法可以改善这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T13:21:01.723

空格上的`%w`拆分，因此您可以随时插入换行符并获得相同的结果：

```
dependencies = %w(survey survey_section question_group question 
  dependency dependency_condition answer answer_type answer_validity 
  validation validation_condition validation_prefix 
  validation_precludes error error_type error_level error_code 
  style style_info style_override user user_model_name user_type)

dependencies.each {|m| require m } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:31:19.363

与@derekerdmann 的做法类似，我*可能会*使用：

```
%w[
  survey               survey_section       question_group       question
  dependency           dependency_condition answer               answer_type
  answer_validity      validation           validation_condition validation_prefix
  validation_precludes error                error_type           error_level       error_code
  style                style_info           style_override       user
  user_model_name      user_type
].each { |m| require m } 
```

使用 Align 插件，在 Vim 中这样的包装和对齐很简单。

但是，更有可能的是，我会将所有要求放入一个单独的文件中并要求它，就像在 C 中使用包含文件来拉入一堆其他包含文件一样。在这种情况下，它们仍在加载中，但它们不在视线范围内。所以，在一个`requirements.rb`文件中，我有：

```
require 'answer'
require 'answer_type'
require 'answer_validity'
require 'dependency'
require 'dependency_condition'
require 'error'
require 'error_code'
require 'error_level'
require 'error_type'
require 'question'
require 'question_group'
require 'style'
require 'style_info'
require 'style_override'
require 'survey'
require 'survey_section'
require 'user'
require 'user_model_name'
require 'user_type'
require 'validation'
require 'validation_condition'
require 'validation_precludes'
require 'validation_prefix' 
```

在我的主代码文件中，我有`require_relative './requirements'`.

或者，我会将列表拆分为更易于管理的分组，例如按字母顺序：

```
%w[ answer answer_type answer_validity ].each { |r| require r }
%w[ dependency dependency_condition ].each { |r| require r }
%w[ error error_code error_level error_type ].each { |r| require r }
%w[ question question_group ].each { |r| require r }
%w[ style style_info style_override survey survey_section ].each { |r| require r }
%w[ user user_model_name user_type ].each { |r| require r }
%w[ validation validation_condition validation_precludes validation_prefix ].each { |r| require r } 
```

它不像我想要的那样干燥，但它更有条理和可读性。

# php - php $_get 变量在提交表单后消失

> ID：10653359
> 
> 赞同：-2
> 
> 时间：2012-05-18T13:15:56.823
> 
> 标签：php, mysql, html, database

我的问题是这样的：我的主页有表格，其中包含从数据库中提取的行（while 循环）每行都有一个 - 单元格，他可以在其中向该特定行添加一个事件，以便我将行 ID 作为$_GET 来自主页表和“添加事件”页面的变量，我将它存储为一个变量，但是当我提交我的 addevent 表单时没有正确填写它（如我编码的那样），它只是刷新表单而没有行 id url 因此，我在页面开头所做的用于拉取行数据的查询也无法再执行，并且会弹出一个 PHP 错误，用于 id 变量，我将其签名为 $_GET 和查询（mysql fetch 数组）。当然，我在该查询的表单中显示的所有数据都消失了。

关于如何解决这个问题的任何建议？预先感谢，问候。

编辑：**杀死新人！-对不起，我猜

我发送 id 的主页：

```
$sql = "SELECT * FROM alarms WHERE alarmstatus = 'OFF' and starttime='::' ORDER BY clientid ASC";
$query = mysql_query($sql);
echo "<table cellpadding='1px' border='1px' bordercolor='#0066FF' cellspacing='0'>
        <form action='hpage.php' method='get'>";
while($fetch = mysql_fetch_array($query)) {
echo "<tr>
            <td>
            ".$fetch['clientid']."</td>
            <td>".$fetch['controller']."</td>
            <td>".$fetch['typeid']."</td>
            <td style='color: red'>".$fetch['alarmstatus']."</td>
            <td>".$fetch['starttime']."</td>
            <td>".$fetch['endtime']."</td>
            <td><a href='includes/editalarm.php?id=".$fetch['id']."'>Edit</a></td>
            <td><a href='includes/addevent.php?id=".$fetch['id']."'>Add event</a></td>
            <td><a href='includes/deletealarm.php?id=".$fetch['id']."'>Delete</a></td>
    </tr>";
} 
```

我获取变量并进行查询的添加事件：

```
$alarmid = $_GET['id'];
  $sql = "SELECT * FROM alarms WHERE id=".$alarmid;
  $query = mysql_query($sql);
  $fetch = mysql_fetch_array($query);
?> 
```

表格：

```
<table cellpadding="2px" cellspacing="0" >
 <form action="addevent.php" method="post">
   <tr>
     <td>סניף:</td>
     <td><input style="width:200px; background-color: #d6d6d6;" readonly name="client" value="<?php echo $fetch['clientid']; ?>" /></td>
   </tr> 
   <tr>
     <td>בקר:</td>
     <td><input style="width:200px; background-color: #d6d6d6;" readonly name="controller" value="<?php echo $fetch['controller']; ?>" /></td>
   </tr>
   <tr>
     <td>אזעקה:</td>
     <td><input style="width:200px; background-color: #d6d6d6;" readonly name="controller" value="<?php echo $fetch['typeid']; ?>" /></td>
   </tr>
   <tr>
     <td>מוקדן:</td>
     <td>
       <?php 
       $sql = "SELECT * FROM users WHERE privilege = '2'";
       $query = mysql_query($sql);
       echo "<select name='user' style='width:207px;'>";
       echo "<option>..</option>";
       while ($fetch2 = mysql_fetch_array($query)){
         echo "<option>".$fetch2['username']."</option>";
       }
       echo "</select>";
       ?>       
     </td>
   </tr>
   <tr>
     <td>איש קשר:</td>
     <td><input type="text" name="contact" /></td>

   </tr>
   <tr>
     <td>הודעה:</td>
     <td><input type="text" style="width:200px; height:100px" name="message" /></td>
   </tr>
   <tr>
     <td>תשובה:</td>
     <td><input type="text" style="width:200px; height:100px" name="answer" /></td>
   </tr>
   <tr>
     <td>שעה:</td>
     <td>
       <select name="eventhour">
         <option value ="default"></option>         
         <?php
           for($i = 0; $i<60; $i++){
             $value = $i;
             if($i<=9){
               $value= "0".$i;
             } 
           echo "<option>".$value."</option>";
           }
         ?>
       </select>  
       <select name="eventminute">
         <option value ="default"></option>
         <?php
           for($i = 0; $i<24; $i++){
             $value = $i;
             if($i<=9){
               $value= "0".$i;
             } 
           echo "<option>".$value."</option>";
           }
         ?>
       </select>         
     </td>
   </tr>
   <tr>
     <td>  
       <input type="submit" name="save" value="שמור" />
       <input type="submit" name="cancell" value="בטל" />
     </td>
     <td></td>
   </tr>
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:00:57.100

您的表单操作是 POST。如果您将其更改为 GET，那么您的表单将为 $_GET。

# c# - 序列化/反序列化对象模型和事件问题

> ID：10653360
> 
> 赞同：1
> 
> 时间：2012-05-18T13:15:59.497
> 
> 标签：c#, events, serialization

我们有一个相当复杂的对象模型，我们需要在特定时间保存当前状态，并在出现特定问题时将状态恢复到原来的状态。几乎是一个撤消功能。

我最初考虑过深拷贝，但最终决定将模型序列化为二进制，然后在需要时反序列化。这是我第一次做这样的事情，最初遇到事件处理程序没有序列化的问题，我用 [field: NonSerialized] 属性解决了这个问题。

然而，现在的问题是，当模型被反序列化时，事件就不起作用了。

处理这个问题的最佳解决方案是什么？我遇到了几个解决方案，我可以使用 [OnDeserialized()] 或实现 IDeserializationCallback 接口，然后在后续方法中重新订阅每个事件。

不过，这似乎确实需要做很多工作，而且由于我对此没有经验，所以我只是想在继续前进之前检查这是否是正确的方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:29:43.713

您不能序列化附加到对象模型中的事件的事件处理程序。反序列化模型后，您需要重新订阅。

我会选择 IDeserializationCallback 接口，因为您需要通知其他类重新订阅您刚刚反序列化的实例。

# javascript - 如何在 jQuery 中检查“未定义”值

> ID：10653367
> 
> 赞同：189
> 
> 时间：2012-05-18T13:16:30.723
> 
> 标签：javascript, jquery, undefined

> **可能重复：**
> [在 JavaScript 中检测未定义的对象](https://stackoverflow.com/questions/27509/detecting-an-undefined-object-property-in-javascript)
> [属性](https://stackoverflow.com/questions/2778901/javascript-undefined-compare)

我们如何为未定义的变量添加检查，例如：

```
function A(val) {
  if (val == undefined) 
    // do this
  else
    // do this
} 
```

* * *

## 回答 #1

> 赞同：425
> 
> 时间：2012-05-18T13:17:12.360

JQuery 库是专门为简化和统一某些 JavaScript 功能而开发的。

但是，如果您需要根据`undefined`值检查变量，则无需发明任何特殊方法，因为 JavaScript 有一个[`typeof`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/typeof)运算符，它简单、快速且跨平台：

```
if (typeof value === "undefined") {
    // ...
} 
```

它返回一个字符串，指示变量或其他未计算操作数的类型。与 相比，此方法的主要优点`if (value === undefined) { ... }`是在变量不存在`typeof`的情况下永远不会引发异常。`value`

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-05-18T13:24:52.060

在这种情况下，您可以使用`=== undefined`比较：`if(val === undefined)`

这是有效的，因为它`val`始终*存在*（它是一个函数参数）。

如果你想测试一个不是参数的任意变量，即可能根本没有定义，你必须使用它`if(typeof val === 'undefined')`来避免异常，以防万一`val`不存在。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-18T13:18:07.540

请注意，typeof 总是返回一个字符串，如果变量根本不存在，则不会产生错误。

```
function A(val){
  if(typeof(val)  === "undefined") 
    //do this
  else
   //do this
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-09-21T13:28:27.703

我知道我回答这个函数迟到了，但是 jquery 有一个内置函数来做到这一点

```
if(jQuery.type(val) === "undefined"){
    //Some code goes here
} 
```

请参阅 jquery.type [https://api.jquery.com/jQuery.type/](https://api.jquery.com/jQuery.type/)的 jquery API 文档。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-03T10:41:44.070

您可以使用速记技术来检查它是否未定义或为空

```
 function A(val)
 {
   if(val || "") 
   //do this
 else
 //do this
 } 
```

希望对你有帮助

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-02-27T11:53:46.260

```
if (value === undefined) {
    // ...
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-27T19:38:39.030

当我测试“ `typeof obj === undefined`”时，即使 obj 未定义，也会`alert(typeof obj)`返回。`object`由于 obj 是`Object`其返回的类型`Object`，而不是`undefined`.

因此，经过数小时的测试，我选择了以下技术。

```
if(document.getElementById(obj) !== null){
//do...
}else{
//do...
} 
```

我不确定为什么第一种技术不起作用。但是我使用它完成了我的工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-14T14:29:42.153

如果您有元素的名称而不是 id，我们可以对所有文本元素（例如）进行未定义检查，如下所示，并用默认值填充它们，例如 0.0：

```
var aFieldsCannotBeNull=['ast_chkacc_bwr','ast_savacc_bwr'];
 jQuery.each(aFieldsCannotBeNull,function(nShowIndex,sShowKey) {
   var $_oField = jQuery("input[name='"+sShowKey+"']");
   if($_oField.val().trim().length === 0){
       $_oField.val('0.0')
    }
  }) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-24T09:25:20.533

我不确定这是不是最好的解决方案，但它工作正常：

```
if($someObject['length']!=0){
    //do someting
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-14T02:24:09.790

```
function isValue(value, def, is_return) {
    if ( $.type(value) == 'null'
        || $.type(value) == 'undefined'
        || $.trim(value) == ''
        || ($.type(value) == 'number' && !$.isNumeric(value))
        || ($.type(value) == 'array' && value.length == 0)
        || ($.type(value) == 'object' && $.isEmptyObject(value)) ) {
        return ($.type(def) != 'undefined') ? def : false;
    } else {
        return ($.type(is_return) == 'boolean' && is_return === true ? value : true);
    }
} 
```

试试这个~所有类型检查器

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-27T12:00:59.070

您可以使用两种方式 1) `if ( val == null )` 2)`if ( val === undefine )`

# jython - 为什么在 WLST (wls12.1.1) 中引发异常时堆栈跟踪不可用

> ID：10653368
> 
> 赞同：2
> 
> 时间：2012-05-18T13:16:30.820
> 
> 标签：jython, wlst

我已经为 weblogic server 12.1.1 创建了一个脚本来*在*联机模式下执行操作。

我显然把事情搞砸了，我想要堆栈跟踪，这样我就可以分析出了什么问题。

我目前正在做这样的事情：

```
try:
    connect("user","pass","t3://localhost:7001")
    messThingsUp()
except:
    dumpStack()
    rollback() 
```

我得到的不是堆栈跟踪：“没有可用的堆栈跟踪”。

请帮忙

Thx，你们统治！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T16:57:19.720

我有同样的问题，我最终使用了这段代码：

```
except Exception, inst:
    print('some diagnostic message here')
    print inst
    print sys.exc_info()[0] 
```

# java - GWT 超级源码在开发模式下无法解析类 java/lang/Object

> ID：10653369
> 
> 赞同：1
> 
> 时间：2012-05-18T13:16:32.533
> 
> 标签：java, gwt

我正在尝试模拟一些 java.lang 和 java.io 类，例如 GWT 中的 OutputStream。

我在我的模块中创建了一个“超级”包并使用超级源引用它。

我的包结构看起来像

```
com/example/gwt/client
com/example/gwt/server
com/example/gwt/shared
com/example/gwt/super
com/example/gwt/super/java/io/OutputStream.java
com/example/gwt/mymodule.get.xml 
```

并且 mymodule.xml 包含一个条目

`<super-source path="super" />`

在 Eclipse 中，超级文件夹中的所有文件都存在错误——这是意料之中的，因为包结构错误。.class 文件正在 WEB-INF/classes 文件夹中生成，同样具有“错误”的包结构，因此应忽略。

当我在开发模式下运行我的应用程序时，我得到了很多

`unable to resolve class java/lang/Object`

错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:48:00.363

将 ....get.xml 重命名为 ....gwt.xml？

您可以从 Eclipse 构建路径中排除“超级”。尝试右键单击或构建路径菜单排除选项..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:56:27.583

这种方法没有任何问题——只是执行。

我在模拟类中编译了错误，这些错误被 Eclipse 由于“不正确”的包结构而显示错误的事实所掩盖。从 Eclipse 中运行编译器会清除这些内容。

删除 gwt-unitCache 似乎也有帮助。当我四处移动代码时，似乎这里仍有一些陈旧的条目仍在被引用。

# batch-file - 如何让批处理文件接受来自 txt 文件的输入？

> ID：10653371
> 
> 赞同：8
> 
> 时间：2012-05-18T13:16:37.993
> 
> 标签：batch-file

我想在多台计算机上的批处理文件中运行命令。

例如：

```
@echo off
ping %1
pause
exit 
```

如果这个批处理文件被称为 pingme.bat，并且我键入`pingme.bat yahoo.com`，那么它将 ping yahoo.com。我的问题是我希望批处理文件接受来自文本文件的输入。

例如，`pingme.bat computers.txt`将读取computers.txt 文件中列出的计算机名称，然后执行我指定的任何命令对它们执行。

`%1`接受我在键入批处理文件时指定的输入。现在我希望批处理文件从该输入文本文件中读取行并将它们用作命令的参数。

文本中的行是列表形式，不使用逗号或任何东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T13:29:11.637

这样做的一种方法是将 URLS 放在一个文本文件中，如下所示：

www.google.com
www.yahoo.com

然后运行以下批处理

```
for /f %%a in (%1) do (
echo Pinging %%a...
ping %%a
) 
```

并从 cmd 作为 pingme.bat URLs.txt 运行它

或者，您可以在批处理中指定文本文件的名称，并在没有参数的情况下运行它

```
for /f %%a in (URLs.txt) do (
echo Pinging %%a...
ping %%a
) 
```

**这是另一种方法**

这个特定批次将从列表中提取，如果 ping 成功，则写入 output.txt

```
@ECHO OFF
SET output=output.txt
IF EXIST "%output%" DEL "%output%"
FOR /f %%a IN (URLs.txt) DO (
    CALL :ping %%a

)
GOTO :EOF

:ping
ping -n 1 %1 | find "Approximate round trip" >NUL || ECHO %1>>"%output%" 
```

希望这能让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:29:21.220

您可以使用[`FOR`](http://ss64.com/nt/for_f.html)循环 - 将其保存为*pingme.bat*：

```
FOR /F "tokens=*" %%L IN (%1) DO (
    ping %%L
    pause 
) 
```

并使用文本文件作为参数调用它`pingme.bat computers.txt`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T21:08:57.440

在文本文件中查找多个 URL 的 IP 地址并在文本文件中获取输出：

```
FOR /F "tokens=*" %%L IN (%1) DO (
    nslookup %%L >> output.txt
    pause 
) 
```

将脚本另存为“ping.bat”并`ping.bat URL.txt`从命令提示符调用。

# lotus-notes - 在 Lotus Notes Design 元素中使用 DXL 批量替换或将列转换为共享列？

> ID：10653374
> 
> 赞同：1
> 
> 时间：2012-05-18T13:16:53.753
> 
> 标签：lotus-notes, lotus

我有一堆视图，其中有一堆我想变成共享列的列。我注意到我可以编辑 DXL 并简单地将标签放在列周围。这适用于一两个视图中的一两列，但我有几列可以更改几十个视图。我有 Team Studio，但它似乎限制了可以进入查找和替换文本字段的文本数量。

是否有现有的实用程序可以让我将常规列变成共享列？或者至少是大量 DXL 文本的批量模式更改？我已经想到我可能需要有创意，因为我已经有了一些共享列的视图，我不想在这些视图周围放置一组额外的 sharedcolumn 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T04:25:09.370

虽然不是免费工具，但[Ytria viewEZ](http://www.ytria.com/website.nsf/WebPageRequest/Solutions_viewEZen?OpenDocument&Lang=en)可以做到这一点（以及更多）。

# sql - SQL Server 索引使用统计信息何时更新？

> ID：10653377
> 
> 赞同：6
> 
> 时间：2012-05-18T13:17:03.830
> 
> 标签：sql, sql-server-2008, indexing

我正在使用 SQL Server 2008 R2，并运行以下查询来尝试查看上次使用以下 SQL 在我的数据库中更新索引的时间：

```
SELECT last_system_update, last_user_update,
OBJECT_NAME(object_id) AS tblName
FROM sys.dm_db_index_usage_stats
WHERE database_id = DB_ID('mydatabase') 
```

**last_user_update**字段是正确的，并且包含 NULL，其中自上次重新启动 SQL Server 以来没有对表进行更新。

当我运行以下查询来重建索引时，我希望**last_system_update**字段包含一个日期以指示索引已重建：

```
ALTER INDEX ALL ON dbo.MyTable
REBUILD 
```

但是，此字段仍为 NULL。事实上，服务器上所有数据库中的所有索引的 last_system_update 字段都是空的 (NULL)。**last_user_update**也不会改变。

我也试过：

```
UPDATE STATISTICS dbo.MyTable 
```

但没有运气。那么这个字段什么时候更新呢？我怎样才能强制它更新？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T18:57:17.483

您可以使用以下查询来确定索引上次更新的时间，它使用[`STATS_DATE()`](http://technet.microsoft.com/en-us/library/ms190330.aspx)：

```
USE your_db;
SELECT t.name AS Table_Name
      ,i.name AS Index_Name
      ,i.type_desc AS Index_Type
      ,STATS_DATE(i.object_id,i.index_id) AS Date_Updated
FROM sys.indexes i
JOIN sys.tables t
  ON t.object_id = i.object_id
WHERE i.type > 0 
ORDER BY t.name ASC
    ,i.type_desc ASC
    ,i.name ASC; 
```

我相信这仅适用于 SQL Server 2005 或更高版本，因为 sys.indexes 不在 SQL Server 2000 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:52:17.543

我在以下位置找到了有关这些列的更多详细信息：

[http://sqlblog.com/blogs/louis_davidson/archive/2007/07/22/sys-dm-db-index-usage-stats.aspx](http://sqlblog.com/blogs/louis_davidson/archive/2007/07/22/sys-dm-db-index-usage-stats.aspx)

> system_seeks、system_scans、system_lookups、system_updates、last_system_seek、last_system_scan、last_system_lookup、last_system_update
> 
> 与用户查询列相同，但记录索引用于系统操作时，例如自动统计操作。

# javascript - 使用 mongoose 在 mongodb 中创建唯一索引

> ID：10653378
> 
> 赞同：-1
> 
> 时间：2012-05-18T13:17:04.893
> 
> 标签：javascript, node.js, mongodb, mongoose

我正在使用 mongodb 和 mongoose.js 创建一个机器人。我已经定义了一个模式并正在收集数据，但我注意到我无法添加具有重复 ID 的记录。

我已经确认 mongoose 已经为我的 ID 字段创建了索引。是否需要索引？如果是这样，有没有办法为索引自动生成唯一 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:09:40.433

为字段创建索引的是 MongoDB `_id`，而不是 Mongoose。如果您希望您的 id 是唯一的，请确保您的唯一性，或者在插入时根本不指定 _id 字段。

_id 字段的默认类型是 ObjectId。它被设计为独一无二的，因此您可以在应用程序中安全地生成这些 id 并发送到数据库。

# mysql - 如何使用 ANT 任务启动 MySql

> ID：10653379
> 
> 赞同：0
> 
> 时间：2012-05-18T13:17:05.543
> 
> 标签：mysql, ant

我需要使用 ant 任务启动和停止 mysql 5.5。

早期的 ANT 脚本是为它使用的类是 .hsqldb 数据库执行此操作`org.hsqldb.Server`。有人可以告诉我 mysql 5.5 使用哪个类。

在 hsqldb for mydb 的情况下使用以下内容： `<java fork="true" spawn="true" classname="org.hsqldb.Server" classpathref="build.runtime.classpath"> <arg line="-database.0 file:data/mydb -dbname.0 mydb"/> </java>`

我需要有 mysql 5.5 的等价物。我知道一个连接器用于连接到 mysql 5.5 数据库，我使用`mysql-connector-java-5.1.15-bin.jar`.

有人可以告诉我如何使用 ant 脚本启动和停止 mysql 数据库。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:54:45.643

[将 MySQL 配置为在机器启动时自动启动](http://dev.mysql.com/doc/refman/5.6/en/automatic-start.html)会更正常 。MySQL 被设计为在后台持续运行。

如果您真的想从 ANT 中停止和启动 MySQL，则可以调用服务器脚本（当然假设 MySQL 与构建运行在同一台机器上）。

```
<target name="start-db">
  <exec executable="C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqld" osfamily="windows">
  </exec>

  <exec executable="mysql.server" osfamily="unix">
    <arg value="start"/>
  </exec>
</target>

<target name="stop-db">
  <exec executable="C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqld" osfamily="windows">
    <arg value="-u"/>
    <arg value="root"/>
    <arg value="shutdown"/>
  </exec>

  <exec executable="mysql.server" osfamily="unix">
    <arg value="stop"/>
  </exec>
</target> 
```

**笔记：**

*   此脚本包含在 windows 和 unix 上启动/停止的命令。
*   MySQL 文档描述[了如何从 windows 命令行启动 Mysql](http://dev.mysql.com/doc/refman/5.6/en/windows-start-command-line.html)

# javascript - 替代 jQuery 的 .last

> ID：10653384
> 
> 赞同：1
> 
> 时间：2012-05-18T13:17:18.790
> 
> 标签：javascript, jquery

我需要使用 1.3.2 库，不幸的是它不支持最后一个功能。这导致我的功能失败：

```
$op.last().next().after($op); 
```

> “$op.last 不是函数”

**演示：**

[http://jsfiddle.net/uscyH/](http://jsfiddle.net/uscyH/)

我在纯js中重写这个功能没有成功，有什么建议吗？请注意，我还需要 .first()，但我假设我将能够从 .last 备用代码中推断出它。非常感谢-

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T13:19:19.463

您可以使用`:last`自 1.0 以来存在的选择器：

```
$op.filter(':last') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T13:22:44.767

要获取最后一个元素，请执行以下操作：

```
$op.slice( -1 ) 
```

**现场演示：http:** [//jsfiddle.net/uscyH/4/](http://jsfiddle.net/uscyH/4/)

> jQuery`.slice()`方法是在 JavaScript .slice() 数组方法之后设计的。它模仿的功能之一是能够将负数作为`start`or`end` 参数传递。如果提供了负数，则表示从集合末尾开始的位置，而不是开头。

来源：[http ://api.jquery.com/slice/](http://api.jquery.com/slice/)

* * *

要获取第一个元素，请执行以下操作：

```
$op.eq( 0 ) 
```

**现场演示：http:** [//jsfiddle.net/uscyH/5/](http://jsfiddle.net/uscyH/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:20:17.210

假设`$op`是选项的集合，使用以下方法获取集合中的第一个 DOM 元素：

```
var first = $op[0]; 
```

最后一次使用：

```
var last = $op[$op.length-1]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T13:20:55.030

看起来您可以使用此方法找到最后一项或第一项 [http://jsfiddle.net/uscyH/3/](http://jsfiddle.net/uscyH/3/)

```
alert("Last is: "+$("option:last").html()+" and first is: "+$("option:first").html());​ 
```

**更新**：看起来你现在有很多想法可供选择。随意使用您喜欢的任何方法。这种方法可能不是最快的方法，因为它执行两个 DOM 查询，而不是对您已经存储在数组中的列表进行操作。很高兴看到即使在这些版本中 jQuery 也如此强大。感谢大家的想法！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T13:21:01.283

```
$($op[$op.length-1]).next().after($op); 
```

您还可以选择扩展 jquery 并创建自己的 last 方法。

# iphone - 在 UIView( 子视图 ) 中播放视频

> ID：10653386
> 
> 赞同：0
> 
> 时间：2012-05-18T13:17:24.300
> 
> 标签：iphone, video, subview, mpmoviewcontroller

是否可以仅通过使用以全屏模式播放视频的 iPhone 视频播放器在同一屏幕上播放 uiview 的子视图（弹出窗口）中的视频。

任何帮助，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:21:57.590

将 HTML5`video`标记插入到`UIWebView`中，然后将其子视图到`UIView`. 我可以保证它适用于 Youtube 视频。

# php - PHPUnit 未定义函数 mysql_connect()

> ID：10653395
> 
> 赞同：2
> 
> 时间：2012-05-18T13:18:03.863
> 
> 标签：php, mysql, phpunit

当我尝试从 PHP 代码连接到我的 MySQL 数据库时，一切似乎都很好，所有查询都成功执行。但是，当使用 PHPUnit 中的单元测试对代码进行测试时，我收到以下致命的 PHP 错误：

> PHP 致命错误：调用未定义的函数 mysql_connect()。

如前所述，此代码在单元测试之外运行良好，但 PHPUnit 会产生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:13:52.620

您可能正在使用命名空间，因此`mysql_query`or`MySQLi`在那里未定义。

尝试以下操作：

```
$mysqli = new \MySQLi(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-07T11:47:36.457

我相信您正在使用 PHP 7 或更高版本进行测试。

在[php 文档 mysql_query](http://us3.php.net/manual/en/function.mysql-query.php)中，它们描述了以下内容

> 警告 此扩展在 PHP 5.5.0 中已被弃用，并在 PHP 7.0.0 中被删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此函数的替代方法包括： mysqli_query() PDO::query()

因此，两种可能的解决方案：

1.  将 PHP 降级到较低版本（< 7）；
2.  用 MySQLi 或 PDO 替换你的 mysql 函数。

# dynamics-crm - Dynamics CRM Online 中的自定义报告 - 默认日期参数

> ID：10653410
> 
> 赞同：1
> 
> 时间：2012-05-18T13:19:01.147
> 
> 标签：dynamics-crm, business-intelligence, microsoft-dynamics

我正在 Business Intelligence Devlopment Studio 中为 Dynamics CRM 创建自定义报告。我的 FETCHXML 中有一个过滤器，其日期为“在或之后”，值作为日期参数。

当我没有设置默认值时，这工作正常但是当我尝试返回它时会导致与下面相同的错误，我有我的日期选择器并且可以从那里运行报告。我想将默认设置为 1 个月前，所以我将以下默认表达式放入参数中：

```
=DateAdd("M",-1,Today()) 
```

但我收到以下错误：

```
The date-time format for 18/04/2012 00:00:00 is invalid, or value is outside the supported range. 
```

我假设日期时间格式对于`createdon`Dynamics 中的字段无效，但我不知道它应该如何以默认值呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:12:53.837

MS Dynamics CRM 2011 使用 SortableDateTimePattern。

所以，我想需要采用这种格式：*yyyy'-'MM'-'dd'T'HH':'mm':'ss* (2008-03-09T16:05:07)。

至少，我像这样使用它从 JS 创建 SOAP 请求。

# postgresql - 如何在不破坏我的数组的情况下执行此查询？

> ID：10653412
> 
> 赞同：2
> 
> 时间：2012-05-18T13:19:05.307
> 
> 标签：postgresql, plpgsql

我可以执行这样的查询吗？如果没有，您能否给我一个更好的方法来做到这一点，而无需遍历我的阵列或使其内爆。

```
 ....
    DECLARE
     examples example[];
     myinput myinput[];
    BEGIN
     select array(select e from mytable e where row_id in (myinput)) into examples
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:20:39.853

```
SELECT  e
FROM    mytable e
WHERE   row_id = ANY(myinput) 
```

# cocoa-touch - 放置大图时 UIImageView 图像变形

> ID：10653413
> 
> 赞同：4
> 
> 时间：2012-05-18T13:19:11.773
> 
> 标签：cocoa-touch, uiimageview

尝试在 UIImageView 中设置大图像时，图像的分辨率会失真。有没有办法在将图像放入较小的视图时保持相同的分辨率？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T13:21:24.047

尝试将 imageview 内容模式设置为 aspectfit。

```
imageView.contentMode = UIViewContentModeScaleAspectFit; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T14:44:08.797

```
UIViewContentModeScaleToFill
Scales the content to fit the size of itself by changing the aspect ratio of the content if necessary.
Available in iOS 2.0 and later.
Declared in UIView.h.

UIViewContentModeScaleAspectFit
Scales the content to fit the size of the view by maintaining the aspect ratio. Any remaining area of the view’s bounds is transparent.
Available in iOS 2.0 and later.
Declared in UIView.h.

UIViewContentModeScaleAspectFill
Scales the content to fill the size of the view. Some portion of the content may be clipped to fill the view’s bounds.
Available in iOS 2.0 and later.
Declared in UIView.h.

UIViewContentModeRedraw
Redisplays the view when the bounds change by invoking the setNeedsDisplay method.
Available in iOS 2.0 and later.
Declared in UIView.h.

UIViewContentModeCenter
Centers the content in the view’s bounds, keeping the proportions the same.
Available in iOS 2.0 and later.
Declared in UIView.h.

UIViewContentModeTop
Centers the content aligned at the top in the view’s bounds.
Available in iOS 2.0 and later.
Declared in UIView.h.

UIViewContentModeBottom
Centers the content aligned at the bottom in the view’s bounds.
Available in iOS 2.0 and later.
Declared in UIView.h.

UIViewContentModeLeft
Aligns the content on the left of the view.
Available in iOS 2.0 and later.
Declared in UIView.h.

UIViewContentModeRight
Aligns the content on the right of the view.
Available in iOS 2.0 and later.
Declared in UIView.h.

UIViewContentModeTopLeft
Aligns the content in the top-left corner of the view.
Available in iOS 2.0 and later.
Declared in UIView.h.

UIViewContentModeTopRight
Aligns the content in the top-right corner of the view.
Available in iOS 2.0 and later.
Declared in UIView.h.

UIViewContentModeBottomLeft
Aligns the content in the bottom-left corner of the view.
Available in iOS 2.0 and later.
Declared in UIView.h.

UIViewContentModeBottomRight
Aligns the content in the bottom-right corner of the view.
Available in iOS 2.0 and later.
Declared in UIView.h. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-16T19:09:22.510

设置大小必须在设置 contentMode 之后发生

```
[imageView setContentMode: UIViewContentModeScaleAspectFit];
imageView.frame = CGRectMake(x, y, width, height); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-03T04:19:24.437

我通过将图像大小调整为包含图像的 UIImageView 的大小来解决此问题。

对我来说，`imageView.contentMode = UIViewContentModeScaleAspectFit`设置 imageView 的框架也不起作用。

**场景**：

我正在使用 Xib 的 UITableViewCell，它有一个 UIImageView。我以编程方式为 UIImageView 设置图像。

# stax - StAX 和命名空间

> ID：10653416
> 
> 赞同：5
> 
> 时间：2012-05-18T13:19:21.383
> 
> 标签：stax

我正在尝试将一些代码从使用 DOM（通过 jDOM）转换为使用 StAX。同时，我正在从基于 DTD 的验证迁移到基于 XSD 的验证。哦，为了更好的衡量，我将 JAXB 引入等式:)

无论如何，作为临时迁移步骤，我希望允许用户仍然提供遗留文档（也就是使用 DTD，因此没有命名空间）。我仍将使用 XSD 验证文档，因此忽略 DTD。除了 StAX（也不是 JAXB）似乎不喜欢非命名空间文档之外，这可行。我尝试禁用命名空间支持（使用 javax.xml.stream.isNamespaceAware），但这没有任何效果。将 xmlns 显式添加到文档根目录解决了这个问题，所以我相当有信心这是一个命名空间问题。

有没有办法使用 StAX XMLEventReader “引入”默认命名空间？类似于[这种方法](https://stackoverflow.com/questions/277502/jaxb-how-to-ignore-namespace-during-unmarshalling-xml-document)的东西（这是特定于 SAX 的），但对于 StAX...

或者关于如何实现这一目标的任何其他想法？

示例文档如下所示：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="org.hibernate.test.abstractembeddedcomponents.cid">
    ...
</hibernate-mapping> 
```

我目前用来阅读这些文件的代码是：

```
public JaxbRoot unmarshal(InputStream stream, Origin origin) {
    try {
        XMLEventReader staxReader = staxFactory().createXMLEventReader( stream );
        try {
            return unmarshal( staxReader, origin );
        }
        finally {
            try {
                staxReader.close();
            }
            catch ( Exception ignore ) {
            }
        }
    }
    catch ( XMLStreamException e ) {
        throw new MappingException( "Unable to create stax reader", e, origin );
    }
}

private XMLInputFactory staxFactory;

private XMLInputFactory staxFactory() {
    if ( staxFactory == null ) {
        staxFactory = buildStaxFactory();
    }
    return staxFactory;
}

@SuppressWarnings( { "UnnecessaryLocalVariable" })
private XMLInputFactory buildStaxFactory() {
    XMLInputFactory staxFactory = XMLInputFactory.newInstance();
    // tried with and without, no effect
    //staxFactory.setProperty( "javax.xml.stream.isNamespaceAware", false );
    return staxFactory;
}

@SuppressWarnings( { "unchecked" })
private JaxbRoot unmarshal(XMLEventReader staxEventReader, final Origin origin) {
    XMLEvent event;
    try {
        event = staxEventReader.peek();
        while ( event != null && !event.isStartElement() ) {
            staxEventReader.nextEvent();
            event = staxEventReader.peek();
        }
    }
    catch ( Exception e ) {
        throw new MappingException( "Error accessing stax stream", e, origin );
    }

    if ( event == null ) {
        throw new MappingException( "Could not locate root element", origin );
    }

    final Schema validationSchema;
    final Class jaxbTarget;

    final String elementName = event.asStartElement().getName().getLocalPart();

    if ( "entity-mappings".equals( elementName ) ) {
        final Attribute attribute = event.asStartElement().getAttributeByName( ORM_VERSION_ATTRIBUTE_QNAME );
        final String explicitVersion = attribute == null ? null : attribute.getValue();
        validationSchema = validateXml ? resolveSupportedOrmXsd( explicitVersion ) : null;
        jaxbTarget = JaxbEntityMappings.class;
    }
    else {
        validationSchema = validateXml ? hbmSchema() : null;
        jaxbTarget = JaxbHibernateMapping.class;
    }

    final Object target;
    final ContextProvidingValidationEventHandler handler = new ContextProvidingValidationEventHandler();
    try {
        JAXBContext jaxbContext = JAXBContext.newInstance( jaxbTarget );
        Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
        unmarshaller.setSchema( validationSchema );
        unmarshaller.setEventHandler( handler );
        target = unmarshaller.unmarshal( staxEventReader );
    }
    catch ( JAXBException e ) {
        throw new MappingException( ... );
    }

    return new JaxbRoot( target, origin );
} 
```

在我的测试中，DTD 是否存在都没有影响。就像我之前说的，只是改变

```
<hibernate-mapping package="org.hibernate.test.abstractembeddedcomponents.cid"> 
```

到

```
<hibernate-mapping xmlns="http://www.hibernate.org/xsd/hibernate-mapping" package="org.hibernate.test.abstractembeddedcomponents.cid"> 
```

修复了我看到的故障，它们是：

```
[org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'hibernate-mapping'.]
    at ...
Caused by: org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'hibernate-mapping'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1916)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:705)
    at com.sun.org.apache.xerces.internal.jaxp.validation.ValidatorHandlerImpl.startElement(ValidatorHandlerImpl.java:550)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.ValidatingUnmarshaller.startElement(ValidatingUnmarshaller.java:78)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.InterningXmlVisitor.startElement(InterningXmlVisitor.java:60)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.StAXEventConnector.handleStartElement(StAXEventConnector.java:247)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.StAXEventConnector.bridge(StAXEventConnector.java:116)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:394)
    ... 27 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T15:36:49.813

这可以通过实现一个过滤器来完成，该过滤器将默认命名空间声明添加到第一个（即根）`StartELement`事件。StAX 已经提供了`EventReaderDelegate`实用程序类，其中`peek()`和`nextEvent()`方法需要被覆盖。

这是代码：

```
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import javax.xml.namespace.QName;
import javax.xml.stream.XMLEventFactory;
import javax.xml.stream.XMLEventReader;
import javax.xml.stream.XMLStreamException;
import javax.xml.stream.events.StartElement;
import javax.xml.stream.events.XMLEvent;
import javax.xml.stream.util.EventReaderDelegate;

/**
 * Filter adding default namespace declaration to root element.
 */
public class NamespaceAddingEventReader extends EventReaderDelegate {
    private final XMLEventFactory factory = XMLEventFactory.newInstance();
    private final String namespaceURI;

    private int startElementCount = 0;

    public NamespaceAddingEventReader(XMLEventReader reader, String namespaceURI) {
        super(reader);
        this.namespaceURI = namespaceURI;
    }

    /**
     * Duplicate event with additional namespace declaration.
     * @param startElement
     * @return event with namespace
     */
    private StartElement withNamespace(StartElement startElement) {
        List<Object> namespaces = new ArrayList<Object>();
        namespaces.add(factory.createNamespace(namespaceURI));
        Iterator<?> originalNamespaces = startElement.getNamespaces();
        while (originalNamespaces.hasNext()) {
            namespaces.add(originalNamespaces.next());
        }
        return factory.createStartElement(
                new QName(namespaceURI, startElement.getName().getLocalPart()),
                startElement.getAttributes(),
                namespaces.iterator());
    }

    @Override
    public XMLEvent nextEvent() throws XMLStreamException {
        XMLEvent event = super.nextEvent();
        if (event.isStartElement()) {
            if (++startElementCount == 1) {
                return withNamespace(event.asStartElement());
            }
        }
        return event;
    }

    @Override
    public XMLEvent peek() throws XMLStreamException {
        XMLEvent event = super.peek();
        if (startElementCount == 0 && event.isStartElement()) {
            return withNamespace(event.asStartElement());
        } else {
            return event;
        }
    }
} 
```

要了解它是如何使用的，让我们使用事件 API 将一些没有命名空间声明的 XML 复制到 System.out：

```
StringReader xml = new StringReader("<?xml version='1.0'?><alice>bob</alice>");
XMLEventReader reader = XMLInputFactory.newInstance().createXMLEventReader(xml);
reader = new NamespaceAddingEventReader(reader, "http://foo");
XMLEventWriter writer = XMLOutputFactory.newInstance().createXMLEventWriter(System.out);
writer.add(reader);
writer.flush(); 
```

运行代码将打印

```
<?xml version='1.0' encoding='UTF-8'?><alice xmlns="http://foo">bob</alice> 
```

# python - 嵌入在 bash 中的 Python 脚本，不退出

> ID：10653422
> 
> 赞同：3
> 
> 时间：2012-05-18T13:19:42.907
> 
> 标签：python, bash, terminate, continue

我有一个奇怪的问题。我有一个 bash 脚本，它在其中调用一个 python 脚本。python脚本成功执行，但从未完全终止

Bash 脚本的内容：

```
#! /usr/bin/env bash
python python_script.py
echo "bar" 
```

Python脚本的内容：

```
#Much stuff
sys.exit("The python script just ended") 
```

我希望在终止时看到的是：

```
>The python script just ended
>bar 
```

我得到的是：

```
>The python script just ended 
```

如果我键盘中断，bash 将继续：

```
^C>bar 
```

是什么赋予了？显然，出口正在正确调用，并且它与调用 python 脚本的 bash 脚本中的输出语句之间没有任何关系。

（我不一定能详细说明 python 脚本中“很多东西”的工作原理，因为我正在修改我不完全理解的现有代码。我大部分时间都单独留下了脚本的工作原理，并且修改后的输出比格式化更重要，但我很乐意尝试为您提供所需的任何其他信息）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T13:23:09.410

什么`sys.exit()`是抛出 type 的异常[`SystemExit`](http://docs.python.org/library/exceptions.html#exceptions.SystemExit)。如果您的脚本要捕获此异常，它将继续执行过去`sys.exit()`的 .

此外，如果您有非守护线程，这些可能会阻止进程终止。

如果是这种情况，您可以[将它们变成守护线程](http://docs.python.org/library/threading.html#threading.Thread.daemon)，或者以某种方式向它们发出您希望退出脚本的信号，并让它们自行关闭。

最后，有[`os._exit()`](http://docs.python.org/library/os.html#os._exit)，但你不应该诉诸于此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-02T13:08:47.883

以下也有效：

```
import os
print('Hellow world')
os._exit(os.EX_OK) 
```

在 Ubuntu 中，它退出终端。另请参阅此链接中的示例[Program With the os.exit() Method](https://www.delftstack.com/howto/python/python-exit-program/)

# python - 使用 struct.pack struct.unpack 的字节序

> ID：10653425
> 
> 赞同：1
> 
> 时间：2012-05-18T13:20:01.863
> 
> 标签：python, endianness

我正在尝试读取一些二进制数据文件。数据文件中写入了一个“sentinal”整数，始终为 -1。我以为我可以用它来检查写入数据的机器是大端还是小端，但经过一些实验，情况似乎并非如此。具体来说：

```
import struct
data=struct.pack('<i',-1)
print (struct.unpack('<i',data))  #(-1,)
print (struct.unpack('>i',data))  #(-1,) ??? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:23:13.247

-1 的表示在 big 和 liddle 字节序（和二进制补码）中是相同的，即（假设为 32 位）

```
ffffffff # big endian
ffffffff # little endian 
```

使用诸如 的值进行检查`0x01020304`，或者，如果您想添加额外的检查，`0x0d0aff00`（`0d0a`是 Windows [EOL CRLF](http://en.wikipedia.org/wiki/Newline)，`ff`将打破 8 位不透明通道，`00`并将打破以空值结尾的字符串）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T13:23:16.493

值 -1 表示为二进制的 0XFFFFFFFF（二进制补码）。无论字节序如何，它看起来都一样。

# c - OpenCV：cvHoughCircles 使用错误

> ID：10653433
> 
> 赞同：2
> 
> 时间：2012-05-18T13:20:39.777
> 
> 标签：c, opencv, image-processing, hough-transform, opencvdotnet

我正在使用 cvHoughCircles 在下图中找到两个白色椭圆：

![在此处输入图像描述](../Images/e3f53158233517cb79390e62b7f9b855.png)

我首先使用阈值来定位白色区域，然后使用霍夫变换。但是输出不正确，如下所示：

![在此处输入图像描述](../Images/0041137c6644aff9a8155f0a62796d19.png)

我无法理解发生了什么？为什么它检测到 3 个圆圈，为什么只有一个被正确检测到？有什么建议么？

下面是我的代码：

```
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include <iostream>
#include <stdio.h>
#include <math.h> 
#include <ctype.h>
#include <stdlib.h>
#include "opencv/cv.h"
#include "opencv/highgui.h"
#include<conio.h>
#include<malloc.h>

using namespace cv;
using namespace std;
int main( ) {
IplImage* image = cvLoadImage( 
"testing.bmp",
  CV_LOAD_IMAGE_GRAYSCALE
);

IplImage* src = cvLoadImage("testing.bmp");
CvMemStorage* storage = cvCreateMemStorage(0);

cvThreshold( src, src,  200, 255, CV_THRESH_BINARY );

CvSeq* results = cvHoughCircles( 
image, 
 storage, 
 CV_HOUGH_GRADIENT, 
 3, 
 image->width/10 
 ); 

 for( int i = 0; i < results->total; i++ ) 
 {
 float* p = (float*) cvGetSeqElem( results, i );
 CvPoint pt = cvPoint( cvRound( p[0] ), cvRound( p[1] ) );
 cvCircle( 
  src,
  pt, 
  cvRound( p[2] ),
  CV_RGB(0xff,0,0) 
);
}
cvNamedWindow( "HoughCircles", 1 );
cvShowImage( "HoughCircles", src);
cvWaitKey(0);
} 
```

编辑：

由于我对霍夫变换没有得到满意的结果，我愿意采取其他方式。我可以假设图中每个白色斑点的大小相同（大小已知），并且斑点之间的距离也是已知的。有没有一种不平凡的方法可以找到一条垂直线（切线）接触左侧白色斑点的左侧？一旦我知道了这个切线，我就知道了边界位置，然后我将在 x=（这个位置 + 半径（已知））处画一个圆，y = 这个位置。我可以使用一些重要的方法找到这样的 x 和 y 坐标吗？

**解决了，通过如下改变：**

```
cvThreshold(image, image,  220, 255, CV_THRESH_BINARY );

cvCanny(image, image, 255, 255, 3);

cvNamedWindow( "edge", 1 );
cvShowImage( "edge", image);
cvWaitKey(0);

CvMemStorage* storage = cvCreateMemStorage(0);
CvSeq* results = cvHoughCircles( 
             image, 
             storage, 
             CV_HOUGH_GRADIENT, 
             4, 
             image->width/4, 100,100,0,50); 
```

这是输出：

![在此处输入图像描述](../Images/942d33e6d78a7e7f731e9a07dd718b77.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:48:46.807

[这都是关于](https://stackoverflow.com/a/6417109/176769) [参数的](https://stackoverflow.com/a/6500949/176769)：

```
IplImage* src = cvLoadImage(argv[1]);
if (!src)
{
    cout << "Failed: unable to load image " << argv[1] << endl;
    return -1;
}

//IplImage* image = cvLoadImage(argv[1], CV_LOAD_IMAGE_GRAYSCALE);
IplImage* image = cvCreateImage(cvSize(src->width, src->height), IPL_DEPTH_8U, 1);
cvCvtColor(src, image, CV_RGB2GRAY);

cvThreshold(image, image,  220, 255, CV_THRESH_BINARY );
//  cvNamedWindow( "thres", 1 );
//  cvShowImage( "thres", image);
//  cvWaitKey(0);

CvMemStorage* storage = cvCreateMemStorage(0);
CvSeq* results = cvHoughCircles( 
                 image, 
                 storage, 
                 CV_HOUGH_GRADIENT, 
                 4, 
                 image->width/3); 

std::cout << "> " << results->total << std::endl;

for( int i = 0; i < results->total; i++ ) 
{
    float* p = (float*) cvGetSeqElem( results, i );
    CvPoint pt = cvPoint( cvRound( p[0] ), cvRound( p[1] ) );
    cvCircle(src,
             pt, 
             cvRound( p[2] ),
             CV_RGB(0xff,0,0));
}

cvNamedWindow( "HoughCircles", 1 );
cvShowImage( "HoughCircles", src);
cvWaitKey(0); 
```

如果您进行了更多实验，您最终会发现[使用不同的参数会得到不同的结果](https://stackoverflow.com/a/6416361/176769)：

![](../Images/d898929249cb84d6ff083a2786c3de03.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T08:13:16.197

您应该使用边缘检测图像作为输入，而不是阈值。其次，霍夫圆不适用于椭圆，除非它们非常接近圆。我推荐阅读[广义霍夫变换](http://en.wikipedia.org/wiki/Generalised_Hough_transform)并为椭圆实现它。

# asp.net - ViewState 完整性检查和无效身份验证票证失败

> ID：10653435
> 
> 赞同：1
> 
> 时间：2012-05-18T13:20:42.140
> 
> 标签：asp.net

在任何人说之前，是的，我们在 Web.config 中明确指定了验证和机器密钥

然而，我们仍然不时收到此错误。我花了很长时间试图追查这个问题并且完全空了。

我们确实使用 TMG 进行了负载平衡，但我们已将服务器场减少到 1 台服务器进行测试，这些错误仍然存​​在，所以在我看来，排除了负载平衡。

因为 ViewState 完整性检查以及身份验证票证失败都在发生，所以对我来说，这直接指向定期重新生成验证和机器密钥的情况，但是如何？！是否出于某种原因忽略了 Web.config 中的显式键声明？

曾几何时，我们的设置运行良好，只有当服务器从 Server 2008 升级到 Server 2008R2 时才开始发生这种情况，Web 应用程序方面的其他一切都与旧设置相同。

我现在在想的是，如果有什么方法可以在运行时获取这些密钥，那么我们可以看看它们是否会以某种方式发生变化？！

欢迎任何其他想法！

# javascript - JavaScript 代码优化

> ID：10653436
> 
> 赞同：0
> 
> 时间：2012-05-18T13:20:52.053
> 
> 标签：javascript

以下是我的javascript代码，有没有更好的方法来编写我的代码？我认为我的概念不好。下面的'$'代表'document.getElementById'，为了更好地查看我正在使用'$'，代码是JavaScript 不是 JQuery。

```
function() {
    if (1) {
        $("AprEmail1").style.display = "";
        $("chkApp1").style.display = "";
        $("AprEmail2").style.display = "";
        $("chkApp2").style.display = "";
        $("chkApp2").disabled = false;
        $("AprEmail3").style.display = "";
        $("chkApp3").style.display = "";
        $("chkApp3").disabled = false;
    }
    else if (2) {
        $("AprEmail1").style.display = "";
        $("chkApp1").style.display = "";
        $("AprEmail2").style.display = "";
        $("chkApp2").style.display = "";
        $("chkApp2").disabled = true;
        $("AprEmail3").style.display = "";
        $("chkApp3").style.display = "";
    }
    else if (3) {
        $("AprEmail1").style.display = "";
        $("chkApp1").style.display = "";
        $("AprEmail2").style.display = "";
        $("chkApp2").style.display = "";
        $("chkApp2").disabled = true;
        $("AprEmail3").style.display = "";
        $("chkApp3").style.display = "";
        $("chkApp3").disabled = true;
    }
    else {
        $("AprEmail1").style.display = "none";
        $("chkApp1").style.display = "none";
        $("AprEmail2").style.display = "none";
        $("chkApp2").style.display = "none";
        $("AprEmail3").style.display = "none";
        $("chkApp3").style.display = "none";
    }
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:22:47.007

是的，有更好的方法。根据您应用的谓词，在您的元素上使用类值以对应于它们的关系，然后让代码按类而不是按 id 操作。

如果您的 JavaScript 通过在某些*父*元素（如`<body>`标签）上设置类（基于条件）来处理这些不同的条件，则可以主要使用 CSS 来完成。然后，您可以拥有看起来像的 CSS 规则

```
.condition1 .hidden-when-1 { display: none; }

.condition2 .hidden-when-2 { display: none; } 
```

等等。当`<body>`标签的类别为“condition1”时，所有类别为“hidden-when-1”的元素都将被隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:23:47.043

您可以将它们分组到 div 容器中，然后改为显示和隐藏 div。这样会更干净。此外，您可以查看 Jquery。它允许您编写更简洁的代码。

# c# - 本机上下文菜单 c#

> ID：10653437
> 
> 赞同：1
> 
> 时间：2012-05-18T13:20:54.003
> 
> 标签：c#, c++, winforms, pinvoke, native

有没有办法将 ContextMenuStrip 设置为原生 ContextMenu？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:27:32.963

不，可用的工具条渲染器，尤其是 ToolStripSystemRenderer，试图模拟本机 Windows 外观，但程序员没有时间机器来猜测它们在 Windows 7 中的外观。Winforms 处于维护模式，该类是'不会得到更新。

如果您想要本机 Windows 外观，请改用 ContextMenu 类。通过右键单击它并选择“选择项目”将其添加到工具箱中。

# iphone - iPhone SDK - 在 UITableViewController 上添加静态图像

> ID：10653444
> 
> 赞同：1
> 
> 时间：2012-05-18T13:21:20.143
> 
> 标签：iphone, objective-c, uitableview

我正在尝试将静态固定图像添加到 a `UITableViewController`，但是当我执行标准时`[self.view addSubview:imageView];`，图像被放置在 tableview 上并随着滚动而移动。

有什么办法可以使图像保持固定吗？我知道一种方法是创建 a `UIViewController`，然后添加`UIImageView`和 a `UITableView`，但不幸的是，我使用的是自定义`UITableViewController`（只是在上面找到的一个库`gihub`来做我需要的事情），所以我的控制器**必须**是 a `UITableViewController`。

有没有办法做到这一点？我已经有一段时间没有运气了。

干杯，布雷特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:31:30.760

`UIViewController`使用idea没有问题。您只需保留 2 个视图控制器： 1) `UIViewController`，它具有`UIImageView`内部，并子视图 2) 的视图`UITableViewController`。如有必要，请`UITableViewController`对`UIViewController`.

我一直在做类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:25:59.830

根本不要使用 UITableViewController（我从不使用它，而且我听说几乎所有开发人员都在使用它）。当您想用它定制设计时，这是一场噩梦。

创建自己的 UIViewController 子类（MYTableViewController），添加 UITableView *tableView 实例@property 和@synthetize：

```
@interface MYTableViewController : UIViewController <UITableViewDelegate,UITableViewDataSource> {

    UITableView *tableView;

}
@property (nonatomic, retain) IBOutlet UITableView *tableView;

@end 
```

然后在实现中将其添加到视图中（使用 XIB 或 viewDidLoad 方法）：

```
@implementation MYTableViewController
@synthesize  tableView;

// If not XIB used:
-(void)viewDidLoad{

[super viewDidLoad];

CGRect frame = self.view.bounds;
self.tableView = [[[UITableView alloc] initWithFrame:frame style:UITableViewStylePlain] autorelease];

tableView.dataSource = self;
tableView.delegate = self;
[self.view addSubview:tableView];

// And here you van add your image:
[self.view addSubview:imageView];

}

// Do not forget to release it and clear delegate and datasourcce when view uloads:

 #pragma mark - Memory management:

 -(void)dealloc{

    self.tableView.delegate = nil;
    self.tableView.dataSource = nil;
    self.tableView = nil;

    [super dealloc];
}
- (void)didReceiveMemoryWarning {

    self.tableView.delegate = nil;
    self.tableView.dataSource = nil;
    self.tableView = nil;

    [super didReceiveMemoryWarning];
}
-(void)viewDidUnload{

    self.tableView.delegate = nil;
    self.tableView.dataSource = nil;
    self.tableView = nil;

    [super viewDidUnload];
    }

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:35:15.347

是的，有几种方法。您可以在 `viewDidLoad`或使用 NIB 文件以编程方式创建视图层次结构。确保正确链接代理和视图属性。

> 如果通过 initWithNibName:bundle: 方法（由超类 UIViewController 声明）指定 nib 文件，UITableViewController 会加载归档在 nib 文件中的表视图。否则，它会创建一个未配置的 UITableView 对象，具有正确的尺寸和自动调整大小的掩码。您可以通过 tableView 属性访问此视图。如果加载了包含表视图的 nib 文件，则数据源和委托将成为 nib 文件中定义的那些对象（如果有）。如果没有指定 nib 文件，或者 nib 文件没有定义数据源或委托，UITableViewController 将数据源和表视图的委托设置为 self。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T13:35:58.373

正如[https://stackoverflow.com/a/6961973/127493](https://stackoverflow.com/a/6961973/127493)所说，UITableViewControllers 可以替换为简单的 UIViewControllers。

事实上，诀窍是向您的 UIViewController 添加一个 UITableView，使其委托等等......，并将其添加到您的 UIViewController.view。

因此，您将能够向控制器主视图添加一些“姐妹”视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T13:36:07.890

就我而言，我正在添加一个图像（实际上是带有图像的按钮），当用户触摸图像时，它会消失并显示表格视图。

所以我先禁用滚动然后再启用它

在下面找到代码

```
// in viewDidLoad
[self.view addSubview:imgview];
tbl.scrollEnabled = NO;

// in -(IBAction)btnClicked:(id)sender
[imgview removeFromSuperview];
tbl.scrollEnabled = YES; 
```

那对我有用。

# javascript - 如何向 Jquery UI Multiselect 添加新选项

> ID：10653445
> 
> 赞同：2
> 
> 时间：2012-05-18T13:21:22.047
> 
> 标签：javascript, jquery, html

我已经尝试了一段时间，但我似乎无法为多选添加更多选项。

即使我尝试添加一条硬编码的信息，它也不会被添加。（Multiselect 和 JQuery 的标题在不同的文件中）。

您可以在此处查看链接：http: [//www.fakegaming.eu/GoT/index.php?act=selectteam &matchid=3](http://www.fakegaming.eu/GoT/index.php?act=selectteam&matchid=3)

```
<?php
$matches = new Matches();
$user = new User();
$id = $_GET['matchid'];
$matchinfo = $matches->getmatch($id);
$matchplayers = $matches->getmatchplayers($id);
?>
<script type="text/javascript">
    $(function(){
        $.localise('ui-multiselect', {/*language: 'en',*/ path: 'script/locale/'});
        $(".multiselect").multiselect();

        $("#add").click(function() {
          $('#players').multiselect('addOptions', 'Test=123');
          alert("Handler for .click() called.");
        });
    });
</script>
Kies hier 10 spelers die mee doen aan de match.<br /> <br />

<form action='index.php?act=createteam' method='post'>
    <select id="players" class="multiselect" multiple="multiple" name="players[]">
    <?php
        foreach($matchplayers as $matchplayer){
            $userinfo = $user->getuserbyid($matchplayer['user_id']);
            if($matchplayer['type'] == 0 OR $matchplayer['type'] == 2){
                $name = $userinfo['EU_username'];
                ?>
                <option value="<?= $name ?>"><?= $name ?></option>
                <?php
            }
        }

    ?>
    </select>
    <input name='name' type='text' id='name' />
    <input type='button' id="add" name="add" value="Toevoegen" />
    <input name="submit" value="Maak team" type="submit" />
</form> 
```

我可能只是在做一些非常错误的事情，但我只是想要一个好的多选并为其添加一些名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:58:39.690

你说正在使用 jQuery，但我看到它的使用很少......这将是一个“jQuery 方式”添加`<OPTION>`到你的多选

```
$('#players').append($('<option></option>').attr('value', '123').text('345')); 
```

要选择一个属性：

```
$('#players option[value="123"]').attr('selected', true); 
```

取消选择一个属性：

```
$('#players option[value="123"]').removeAttr('selected'); 
```

删除一个选项

```
$('#players option[value="123"]').remove(); 
```

****编辑****

（我没有看你的参考链接。我应该是最好的回答者，我是这个小部件的原作者之一！）

这个小部件的下一个版本是 Michael Aufreiter 和我开发的，它实现了您需要的更多功能。它在某些配置下有点不稳定，但在基本（默认）设置下应该足够稳定。

[你可以在这里](https://github.com/michael/multiselect/blob/next/js/ui.multiselect.js)找到它，你可以通过选项访问值：

```
 $('#players').multiselect('addOptions', '123=456'); // value=123, text=456 
```

抱歉，API 文档未更新以记录此内容。这个小部件实际上得到了其他贡献者的支持，我们中的任何一个，原作者，都维护这个版本。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:39:15.813

如果您想将玩家提交给您的`index.php?act=createteam`操作，请确保您在发送请求之前选择了玩家。

```
<script>
    function selectPlayers() {
        var opts = document.getElementById("players").options;
        for (var i = 0; i < opts.length; i++) {
            opts[i].selected = "selected";
        }
        return true;
    }
</script> 
```

和

```
<form action='index.php?act=createteam' method='post' onsubmit='selectPlayers()'> 
```

# java - EL 与 equalIgnoreCase 的比较

> ID：10653448
> 
> 赞同：10
> 
> 时间：2012-05-18T13:21:25.823
> 
> 标签：java, jsp, jsf, el

如何在 EL 中检查 equalIgnoreCase？

```
String a = "hello";
a.equalsIgnoreCase("hello"); 
```

现在在 JSP 页面上..

```
<h:panelGroup rendered="#{patientNotePrescriptionVar.prescriptionSchedule ==  patientNotePresBackingBean.sendPrescription}">
            ... Some code here ....
</h:panelGroup> 
```

有什么办法可以`patientNotePresBackingBean.sendPrescription`匹配为equalIgnoreCase？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-18T13:27:28.907

如果您使用的是 EL 2.2（Servlet 3.0 的一部分）或 JBoss EL，那么您应该能够在 EL 中调用该方法。

```
<h:panelGroup rendered="#{patientNotePrescriptionVar.prescriptionSchedule.equalsIgnoreCase(patientNotePresBackingBean.sendPrescription)}"> 
```

如果您还没有使用 EL 2.2，那么最好的办法是通过[JSTL](https://stackoverflow.com/tags/jstl/info) [`fn:toLowerCase()`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/toLowerCase.fn.html)（或[`fn:toUpperCase()`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/toUpperCase.fn.html)）传递两个字符串，然后进行比较。

```
<%@taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
...
<h:panelGroup rendered="#{fn:toLowerCase(patientNotePrescriptionVar.prescriptionSchedule) == fn:toLowerCase(patientNotePresBackingBean.sendPrescription)}"> 
```

然而，最好不要让它们区分大小写。如果它们代表某种常量，最好将它们设为枚举或其他东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T13:23:24.457

您可以将两个操作数都转换为小写，然后将它们等同起来。

如果是 JSTL，我会这样做

```
fn:toLowerCase(patientNotePrescriptionVar.prescriptionSchedule) eq fn:toLowerCase(patientNotePresBackingBean.sendPrescription) 
```

只需检查您是否可以在 JSF 中执行类似的操作。抱歉，我最近与 JSF 失去了联系。

# powershell - 从 C# 转换为 Powershell 语法

> ID：10653452
> 
> 赞同：3
> 
> 时间：2012-05-18T13:21:36.563
> 
> 标签：powershell

在 C# 中，我可以使用方法`Console.Error.WriteLine`. 这在 Powershell 中不起作用，而是我必须写

```
[Console]::Error.WriteLine 
```

为什么是方括号，为什么是双冒号？

附言。需要明确的是，我对日志记录不感兴趣，我想了解有关类型、对象和方法的语法

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T13:26:32.240

方括号 = 访问类型

双冒号 = 访问类型的静态成员：[MyType] 返回一个 Type 实例

前任：

> c:> [System.Int32]
> 
> IsPublic IsSerial 名称 BaseType
> 
> -------- -------- ---- --------
> 
> True True Int32 System.ValueType

使用点符号只会让您访问 Type 实例的实例成员（大多数与反射相关的方法）......

```
c:\> [System.Int32].Parse("3")

Method call failed because [System.Runtype] does not have any "Parse" member

c:\> [System.Int32].AssemblyQualifiedName

System.Int32, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
```

所以 :: 是访问类的静态成员的方式

```
c:\> [System.Int32]::Parse("3")
3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T13:30:36.730

方括号`[]`是 Powershell 表示类型的方式。双冒号`::`表示该类型的静态成员或方法，其中正常句点`.`表示实例成员或方法。

请注意，这些受到其他 .NET 语言的影响 - C# 使用`.`用于所有成员访问，而 C++ 使用`::`用于命名空间、子类和静态调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T16:05:23.737

在这里观看 - [http://www.youtube.com/watch?feature=player_detailpage&v=jpswk-4ykcc](http://www.youtube.com/watch?feature=player_detailpage&v=jpswk-4ykcc)

# css - CSS 子菜单 WordPress

> ID：10653462
> 
> 赞同：0
> 
> 时间：2012-05-18T13:22:35.837
> 
> 标签：css, wordpress, menu, submenu

大家好，我现在的菜单是这样的：

![在此处输入图像描述](../Images/aafe15427de530b057460e48731a02c5.png)

我需要这样做，以便子菜单不会使其父宽度拉伸（对于 ul ul 和 ul ul ul），如下所示：

![在此处输入图像描述](../Images/820ebc4d78feeb4d360e3e0802f36b0d.png)

这是我创建的一个 JS Fiddle：

[http://jsfiddle.net/7NC8A/](http://jsfiddle.net/7NC8A/)

非常感谢您的帮助！

谢谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T02:14:45.070

不是一个完整的解决方案，但有些看起来像您的第二张图片。请注意，有一些固定的宽度值，这可能会给您带来麻烦，如果它不能解决您的问题，我很抱歉。

```
#access ul ul {
    display: none;
    float: left;
    left: -70px;
    margin: 0 auto;
    position: relative;
    top: 0;
    width: 400px;
    z-index: 9999;
}
#access ul ul li {
    float: left;
}
#access li {
    display: inline-block;
    width: 170px;
} 
```

# c# - 同时在两个位置显示画布

> ID：10653465
> 
> 赞同：0
> 
> 时间：2012-05-18T13:22:43.420
> 
> 标签：c#, wpf, wpf-controls

在 C# 中，使用 WPF 组件，是否可以在屏幕上的两个位置显示画布（其内容在运行时根据用户输入发生变化）？还是在两个窗口中？所以基本上，位于一个位置的画布中发生的任何事情都会发生在位于另一个位置的画布中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:26:42.870

您是否需要它们都具有交互性？

如果没有，那么您可以使用 VisualBrush 将 Canvas 复制到另一个位置。VisualBrush 部分不会是交互式的，但它会反映另一个部分发生的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:59:56.993

如果您通过数据绑定填充和更新 Canvas，您可以创建一个定义 Canvas 及其所有样式、模板等的用户控件，并将该用户控件的每个实例绑定到同一个源对象。即使在不同的窗口中，因为它们是从内存中的同一个对象更新的，它们应该看起来是同步的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:56:12.233

所以，有两种解决方案：

1.  创建包含您的画布的控件并将它们添加到所需的位置并绑定到您的虚拟机
2.  使用@Tim提到的visualbrush，例如：

    ```
    <Window x:Class="visualbrushmirroringstackoverflow.MainWindow"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       Title="MainWindow" Height="350" Width="525">

    <Window.Resources>
        <VisualBrush x:Key="MirrorBrush" 
             Visual="{Binding ElementName=TargetCanvas}" TileMode="None" 
             Stretch="None" AutoLayoutContent="False"/>
    </Window.Resources>
    <StackPanel>
        <Button Click="Button_Click" Content="Add Random Rects" Margin="5"/>

        <Border BorderThickness="1" BorderBrush="Black" Margin="5">
            <Canvas x:Name="TargetCanvas" Width="100" Height="100" 
                    Background="White" />
        </Border>

        <Border BorderThickness="1" BorderBrush="Black" Margin="5">
            <Rectangle Width="100" Height="100" 
                       Fill="{StaticResource MirrorBrush}" />
        </Border>
    </StackPanel> 
    ```

后面代码中的处理程序：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    var rnd = new Random();
    var element = new Rectangle { Fill = Brushes.Black, Width = 5, Height=5 };
    Canvas.SetLeft(element, rnd.Next(100));
    Canvas.SetTop(element, rnd.Next(100));
    TargetCanvas.Children.Add(element);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T13:44:37.503

我遇到了同样的问题，我被要求在其他窗口中显示画布，同时保留原始画布。

我所做的，你可以做的是：

由于一个孩子不能有多个父母，因此您可以通过使用`XamlReader.Save`.

将此画布放在 ViewBox 中（以便它延伸到其父级）。将新窗口的内容设置为此 ViewBox。

```
Canvas copycanvas = XamlReader.Parse(XamlWriter.Save(OriginalCanvas)) as Canvas;
ViewBox vb = new ViewBox() { Stretch.Uniform, Child = copyCanvas };
Windows newwin = new Window() { Content = vb };
newwin.ShowDialog(); 
```

# css - CSS 叠加效果 - 排除某些容器

> ID：10653471
> 
> 赞同：0
> 
> 时间：2012-05-18T13:23:06.040
> 
> 标签：css, overlay

我正在使用此处显示的 CSS 对网页应用叠加效果：

```
.jqifade{
    position: relative; 
    background-color: #000000; 
    height:2315px !important; /*set to page height*/
} 
```

这个 CSS 用一种颜色（黑色）覆盖整个网页，后来用 JS 将其设置为 30% 的不透明度。我想排除一个 div，`id="noOverlay"`这样 CSS 就不会应用于这个 div。这可能吗？如果是这样……怎么办？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:33:25.877

*最简单的解决方案是从 id 为noOverlay*的 div中删除类*jqifade*：

 *```
$("#noOverlay").removeClass("jqifade"). 
```

或者使用 CSS3 :not 选择器（适用于所有现代浏览器）：

```
.jqifade:not(#noOverlay) {} 
```

编辑：另一个解决方案：使用 jQuery 应用 css 样式：

```
$(".jqifade:not(#noOverlay)").css(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:47:46.810

可以使某个元素的 z-index 高于叠加层。同样对于覆盖，您可能会考虑使用 rgba 作为不透明度。

```
.jqifade{
    position: relative; 
    background-color: rgba(255, 255, 255, .3); 
    height:2315px !important; /*set to page height*/
} 
```

只需注意浏览器与此的兼容性。*

# php - 使用 .htaccess 文件重构 url

> ID：10653478
> 
> 赞同：1
> 
> 时间：2012-05-18T13:23:27.460
> 
> 标签：php, .htaccess, url, redirect

我需要转换链接，例如

`http://www.example.co.uk/blog/archive.php?date=2012-05`

到

`http://www.example.co.uk/blog/archive/2012/05/`

使用 php 或 .htaccess 文件。

.htaccess 文件

```
RewriteEngine on
RewriteRule ^blog/archive/([0-9]+)/([0-9]+)/$ http://www.example.co.uk/blog/archive.php?date=$1-$2 [NC] 
```

我已经尝试过了，但没有任何运气。任何想法或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:53:26.973

将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^blog/archive/([0-9]+)/([0-9]+)/?$ blog/archive.php?date=$1-$2 [NC,L,QSA] 
```

# php - 数组不是从多个复选框php创建的

> ID：10653486
> 
> 赞同：1
> 
> 时间：2012-05-18T13:23:51.427
> 
> 标签：php, arrays, post, checkbox

我对复选框输入中的特定数组有疑问。

```
$insert .= '<tr>
<td>' .$uname. '</td>
<td>' .$fname. '</td>
<td>' .$lname. '</td>
<td>' .$email. '</td>
<td>'.(($admin == 'y') ? 'Admin':'User').'</td>
<td><input type="checkbox" name="change['.$uid.']" 
           value="'.(($admin == 'y')?'n':'y').'"/>'
                   .(($admin == 'y')?'Make a user':'Make an admin user').'</tr>'; 
```

从我一直在阅读的内容来看，如果有多个复选框，这应该创建一个可以运行的数组。$uid 是`user id`，名称显示为 change[1]、change[2] 等。这有效。

问题是当我通过这样的while语句运行它时：

```
while(list($key, $val) = each($_POST['change'])) { 
```

我收到这条消息：

```
Warning: Variable passed to each() is not an array or object 
```

有谁知道为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:26:31.700

复选框的名称不应包含索引值：

`<td><input type="checkbox" name="change[]" value="'.(($admin == 'y')?'n':'y').'"/>'.(($admin == 'y')?'Make a user':'Make an admin user').'</tr>';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:32:37.050

```
//$uid is unique, so you perhaps might use this
// make sure $uid is set correctly
// This is correct for multiple checkboxes

<input type="checkbox" name="change['.$uid.'][]" ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:36:20.467

您需要使复选框名称 = change[]

并且值 = $uid

然后您可以遍历 $_POST['change'] 并检索 $uid

编辑请记住，仅发送选中的复选框值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T13:57:43.097

提交时未创建您的数组。我拿了你的代码并制作了所需的表格等。

`var_dump($_POST['change']);`返回 NULL，即使我删除了 $uid。

我希望我能告诉你原因，但看起来它“应该”对我有用。我建议清理你的代码，将三元运算符取出来更美观，然后仔细检查你的引号。PHP 讨厌单引号，即使它们理论上应该可以工作，例如在 POST 数组 ('change') 的参数中，引号可能会混淆它。

好吧 PHP 不讨厌单引号，你只需要小心它们，就好像它们使用不正确，这意味着代码不会被解析......

# java - 实现上传功能的最佳设计模式

> ID：10653492
> 
> 赞同：2
> 
> 时间：2012-05-18T13:24:21.000
> 
> 标签：java, design-patterns

我正在开发一个基于 Spring MVC 的 Web 应用程序。我们有各种屏幕用于添加不同的域组件（例如帐户详细信息、员工详细信息等）。我需要为这些域组件中的每一个实现上传功能，即上传帐户、上传员工详细信息等，这些将在 csv 文件中提供（打开文件、解析其内容、验证然后持久化）。

我的问题是，我应该考虑哪种设计模式来实现这样的要求，以便上传（打开文件、解析其内容、验证然后持久化）功能变得通用。我正在考虑使用模板设计模式。[模板模式](http://en.wikipedia.org/wiki/Template_method_pattern)

任何建议，指针，链接将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T13:36:20.683

我不会回答你的问题。说了这么多，我来回答你的问题！;-)

我认为设计模式不应该成为这个开发阶段的问题。尽管它们很棒（我一直在使用它们），但它们不应该是您的主要关注点。

我的建议是让您实现第一个上传功能，然后是第二个，然后观察他们是否拥有相同的内容并创建一个“母亲”类。每当你来到第三节课时，重复概括的过程。泛型类会在这个过程中自然而然地出现。

有时，我相信人们倾向于过度设计和过度计划。我的公司很好： http: [//www.joelonsoftware.com/items/2009/09/23.html](http://www.joelonsoftware.com/items/2009/09/23.html)。显然，我并不是在提倡没有设计软件——它永远不会很好用。然而，在一些东西已经实现并重构它们之后寻找相似之处可能会获得更好的结果（你是否已经阅读过[http://www.amazon.com/Refactoring-Improving-Design-Existing-Code/dp/0201485672/ref=sr_1_1 ?ie=UTF8&qid=1337348138&sr=8-1](https://rads.stackoverflow.com/amzn/click/com/0201485672)？它很旧但仍然很棒！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:37:35.517

您可以使用抽象工厂模式。

有一个上传接口，然后为每个领域对象实现它，并根据传入的类在工厂中构造它。

例如

上传者 uploader = UploadFactory.getInstance(Employee.class);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:53:50.313

一种[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)在这里对上传者很有用。Uploader 类将是一种容器/管理器类，它只包含一个解析属性和一个持久性属性。这两个属性都将被定义为抽象基类，并具有多个实现。即使您说它将始终是 csv 和 oracle，但这种方法将是面向未来的，并且还将解析/验证与持久性代码分开。

这是一个例子：

```
class Uploader
{
private:
    Parser parser_;
    Persistence persistence_;

    void upload() {
        parser_.read();
        parser_.parse();
        parser_.validate();
        persistence_.persist(parser_.getData());
    }

public:
    void setParser(Parser parser) {parser_ = parser;}
    void setPersister(Persistence persistence) {persistence_ = persistence;}
};

Class Parser
{
    abstract void read();
    abstract void parse();
    abstract void validate();
    abstract String getData();
};

class Persistence
{
    abstract persist(String data);
};

class CsvParser : public Parser
{
    // implement everything here
};

// more Parser implementations as needed

class DbPersistence : public Persistence
{
    // implement everything here
};

class NwPersistence : public Persistence
{
    // implement everything here
};

// more Persistence implementations as needed 
```

# c# - c# winform 应用程序解析问题？

> ID：10653493
> 
> 赞同：-9
> 
> 时间：2012-05-18T13:24:28.790
> 
> 标签：c#

我必须使用解析类，所以需要哪个命名空间才能在 C# 的 vs 2008 中包含这个类？

```
Resolution.CResolution 
```

我找不到这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:30:57.470

您似乎一直在阅读与开发人员创建的某些客户类相关的文章。

Resolution.CResolution 不是 .net 框架的一部分。

然而，我发现这个链接[http://blog.stevienova.com/2005/01/08/net-changing-screen-resolution/](http://blog.stevienova.com/2005/01/08/net-changing-screen-resolution/)引用了该类。

您需要下载 DLL 并在您构建的任何解决方案中引用该库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T13:29:48.690

给定的命名空间不是 .NET 框架的一部分。这似乎是此处显示的示例代码的一部分：
[http ://www.csharphelp.com/2007/09/how-to-change-the-screen-resolution-in-c/](http://www.csharphelp.com/2007/09/how-to-change-the-screen-resolution-in-c/)

您需要做的是集成示例中的命名空间/文件，然后您就可以导入它。

亲切的问候，
博

# php - 如何从部分内容 rss 中提取全部内容

> ID：10653494
> 
> 赞同：1
> 
> 时间：2012-05-18T13:24:40.517
> 
> 标签：php, wordpress, rss, rss-reader, rss2

我正在开发一个 PHP 项目。目标（在一个简单的语言中）是读取 RSS 提要，并从中获取标题、完整内容和媒体（视频和/或图像），并将其发布在 wordpress 博客中。（客户希望使用一些开放共享的资源，并使用它们在他的博客中自动发布）

我成功地提取了标题、内容和图像或视频，并将它们发布在 wordpress 中。但是，存在一些问题：

1) 我只能提取包含在 RSS 中的媒体。2) 如果 RSS 是部分内容 RSS，我无法提取内容的全文。

那么，是否有任何解决方案能够从 RSS 访问原始内容并提取全文内容和媒体（如果有）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:50:27.963

如果您提供指向 rss 提要的链接，我将更新我的答案以准确地告诉您。这只能根据具体情况确定。可以在此处找到阅读器示例[http://www.w3schools.com/php/php_ajax_rss_reader.asp](http://www.w3schools.com/php/php_ajax_rss_reader.asp)显然使用现代技术可以做得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T14:52:34.140

RSS 提供者决定是否导出全文。因此，如果它仅导出部分内容，您可能必须通过 curl（或其他）获取链接的完整内容，并尝试找出完整内容的位置。

# postgresql - 通过连接 PostgreSQL 中的列进行更新

> ID：10653495
> 
> 赞同：20
> 
> 时间：2012-05-18T13:24:45.453
> 
> 标签：postgresql, syntax-error

我需要通过将其与 vendorcitycode （用下划线分隔）连接来设置酒店代码，如下所示。

```
update schema.table_name set
       hotelcode = hotelcode+"_"+vendorcitycode)
 where vendorid = 'INV27' and vendorcitycode = 'LON' 
```

注意： `hotelcode`和`vendorcitycode`是两列类型`character varying(100)`。我使用 PostgreSQL 8.0。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-18T13:27:00.240

```
UPDATE   table_name
SET      hotelcode = hotelcode || '_' || vendorcitycode
WHERE    (vendorid, vendorcitycode) = ('INV27', 'LON') 
```

# c - 如何在 C 程序的 unsigned char 变量中打包十六进制值？

> ID：10653499
> 
> 赞同：2
> 
> 时间：2012-05-18T13:25:03.160
> 
> 标签：c, hex, packing

我在一个字符串中有一个十六进制值`"F69CF355B6231FDBD91EB1E22B61EA1F"`，我在我的程序中使用这个值，方法是硬编码一个 unsigned char 变量中的值，如下所示： `unsigned char a[] = { 0xF6 ,0x9C ,0xF3 ,0x55 ,0xB6 ,0x23 ,0x1F ,0xDB ,0xD9 ,0x1E ,0xB1 ,0xE2 ,0x2B ,0x61 ,0xEA ,0x1F};` 是否有任何函数或任何其他方法可以从字符串中获取值并将其放入通过打包成十六进制格式的无符号变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:53:46.063

```
#include <stdio.h>
#include <ctype.h>

int hctoi(const char h){
    if(isdigit(h))
        return h - '0';
    else
        return toupper(h) - 'A' + 10;
}

int main(void){
    const char cdata[]="F69CF355B6231FDBD91EB1E22B61EA1F";
    unsigned char udata[(sizeof(cdata)-1)/2];
    const char *p;
    unsigned char *up;

    for(p=cdata,up=udata;*p;p+=2,++up){
        *up = hctoi(p[0])*16 + hctoi(p[1]);
    }

    {   //check code
        int i;
        for(i=0;i<sizeof(udata);++i)
            printf("%02X", udata[i]);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:12:56.900

检查[这个答案](https://stackoverflow.com/questions/10242506/how-to-convert-cstring-to-uchar-array/10242834#10242834)以在[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")中使用`sscanf()`.

对于[c](/questions/tagged/c "显示标记为“c”的问题")，它会是这样的：

```
char *str           = "F69CF355B6231FDBD91EB1E22B61EA1F";
char substr[3]      = "__";    
unsigned char *a    = NULL;    
len                 = strlen(str);
a                   = malloc(sizeof(unsigned char)*(len/2)+1);
for (  i = 0; i < len/2; i++) {
    substr[0]       = str[i*2];
    substr[1]       = str[i*2 + 1];
    sscanf( substr, "%hx", &a[i] );
}
free(a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:33:19.327

您可以使用 将字符串中的十六进制值转换为值`sscanf`。如果您想要一个值数组，那么您可以编写一个函数将输入字符串分成两个字符段并用于`sscanf`转换每一段。（我从来没有做过 C，所以我不知道这是否是一个好方法。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T15:57:25.817

如果它仅用于 32 个单个十六进制值（16 字节，128 位），那么您可以查看`libuuid`.

`libuuid`是[`e2fsprogs`](http://e2fsprogs.sourceforge.net/)包装的一部分。无论如何，一些 linux 发行版，例如 Debian，`libuuid`作为一个[单独的包发布](http://packages.debian.org/squeeze/libuuid1)。要将 Debian 软件包用于您的开发，您还需要查看[此处](http://packages.debian.org/squeeze/uuid-dev)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-11T18:06:18.897

引入辅助函数`data_length`并`data_get`轻松迭代您的数据。以下程序将解压的无符号字符转储到 上`stdout`，每行一个：

```
#include <stdlib.h>
#include <stdio.h>
#include <ctype.h>
#include <string.h>

/* htoi(H)
    Return the value associated to the hexadecimal digit H. */
int
htoi(char h)
{
  int a = -1;
  if(isdigit(h))
  {
    a = h - '0';
  }
  else
  {
    a = toupper(h) - 'A' + 10;
  }
  return a;
}

/* data_length(D)
    The length of the data stored at D. */
int
data_length(const char* d)
{
  return strlen(d) / 2;
}

/* data_get(D, K)
    Return the K-th unsigned char located encoded in d. */
unsigned char
data_get(const char *d, int k)
{
  return htoi(d[2*k]) * 0x10 +
    htoi((d+1)[2*k]);
}

int
main()
{
    const char cdata[]="F69CF355B6231FDBD91EB1E22B61EA1F";
    for(int i = 0; i < data_length(cdata); ++i)
    {
      printf("0x%02hhx\n", data_get(cdata, i));
    }
    return EXIT_SUCCESS;
} 
```

# entity-framework - 如何在远程目标上初始化 EF Code First 迁移

> ID：10653500
> 
> 赞同：1
> 
> 时间：2012-05-18T13:25:10.377
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first, entity-framework-migrations

我想在我的项目中引入 Code First 迁移，但我不确定如何将其部署到我的客户进行测试。到目前为止，事情一直很简单，我只是使用了一个`CreateDatabaseIfNotExists`初始化程序。现在，我有两种情况：

1.  他删除了他现有的迁移前数据库，并使用初始化程序创建了一个新的迁移后数据库，我们从这里开始使用迁移来升级他的数据库。如果丢失，我可以使用`MigrateDatabaseToLatestVersion`初始化程序来创建数据库吗？

2.  我只是部署我的代码并让它执行迁移。我不太确定`MigrateDatabaseToLatestVersion`这里是否需要使用 a 。这会将迁移前的数据库升级到适合迁移的数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:47:57.260

这就是我在需要自动迁移时所做的；我希望这可以帮助您找到解决方案：

```
Database.SetInitializer(
    new MigrateDatabaseToLatestVersion<ContextFileName, PathToMigrationsConfig>()
    );
Database.Initialize(false); 
```

在迁移的配置文件中，我在构造函数中设置了以下内容

```
AutomaticMigrationsEnabled = true;
AutomaticMigrationDataLossAllowed = false; 
```

在配置文件中，您应该覆盖种子方法，如果没有，您可以添加它并填写您的种子数据。

只要不发生数据丢失，上面的操作就是创建/升级数据库到最新的。这应该允许您将代码交给客户端。

* * *

另一方面，对于生产系统，我通常会争论不这样做的意义。这有很多缺点。对于我无法控制的数据库，我还没有找到拒绝生成的脚本文件的客户端。

通过包管理器控制台添加迁移后，您可以使用以下命令获取此信息：

```
Update-database –script -verbose 
```

# android - 我的加速度计代码有问题

> ID：10653502
> 
> 赞同：0
> 
> 时间：2012-05-18T13:25:12.490
> 
> 标签：android, accelerometer

我在这段代码中找不到什么问题。我正在尝试获取加速度计数据，但是当我尝试在设备上运行它时，它会出现一条消息，该过程已被关闭。

```
public class SensorActivity extends Activity implements SensorEventListener {   
SensorManager sm;
Sensor sensor ;
TextView yViewA = null;
TextView zViewA = null;
TextView xViewO = null;
TextView yViewO = null;
TextView zViewO = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

 sm = (SensorManager)getSystemService(SENSOR_SERVICE);
 sensor = sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
 xViewA = (TextView) findViewById(R.id.xbox);
 yViewA = (TextView) findViewById(R.id.ybox);
 zViewA = (TextView) findViewById(R.id.zbox);
 xViewO = (TextView) findViewById(R.id.xboxo);
 yViewO = (TextView) findViewById(R.id.yboxo);
 zViewO = (TextView) findViewById(R.id.zboxo);

}    

@Override
protected void onResume() {
    super.onResume();
    sm.registerListener(this, sensor, SensorManager.SENSOR_DELAY_NORMAL);
}

@Override
protected void onStop() {
    sm.unregisterListener(this);
    super.onStop();
}

public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // TODO Auto-generated method stub

}

public void onSensorChanged(SensorEvent event) {
    // TODO Auto-generated method stub  

    xViewO.setText("Orientation X: " + event.values[0]);
    yViewO.setText("Orientation Y: " + event.values[1]);
    zViewO.setText("Orientation Z: " + event.values[2]);

} 
```

升级版：

```
05-18 19:42:17.570: E/AndroidRuntime(14875): android.app.SuperNotCalledException: Activity {daler.sensor/daler.sensor.SensorActivity} did not call through to super.onCreate()

05-18 19:42:17.570: E/AndroidRuntime(14875):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1933)

05-18 19:42:17.570: E/AndroidRuntime(14875):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)

05-18 19:42:17.570: E/AndroidRuntime(14875):    at android.app.ActivityThread.access$600(ActivityThread.java:127)

05-18 19:42:17.570: E/AndroidRuntime(14875):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)

05-18 19:42:17.570: E/AndroidRuntime(14875):    at android.os.Handler.dispatchMessage(Handler.java:99)

05-18 19:42:17.570: E/AndroidRuntime(14875):    at android.os.Looper.loop(Looper.java:137)

05-18 19:42:17.570: E/AndroidRuntime(14875):    at android.app.ActivityThread.main(ActivityThread.java:4441)

05-18 19:42:17.570: E/AndroidRuntime(14875):    at java.lang.reflect.Method.invokeNative(Native Method) 
```

UPD2：代码已更新，仍然面临问题。UPD3：更新日志猫

UPD4：我更新了代码，现在它可以工作了。也许有人会需要它。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:30:30.293

你不能把`findViewById(R.id.xbox);`你的班级身体。它应该去`onCreate()`after `setContentView()`。

问题出在代码的第 18 行（根据 logcat）。大概就是这个：

`Sensor sensor = sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);`

因为你写： `SensorManager sm;` 所以传感器管理器是空的，所以你不能在`sm.getDefaultSensor()`.

请参阅此[链接](http://developer.android.com/reference/android/hardware/SensorManager.html)以了解如何初始化传感器管理器：

```
 public SensorActivity() {
     sm = (SensorManager)getSystemService(SENSOR_SERVICE);
     sensor = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T14:15:02.727

在你 onCreate() 尝试从所有这 6 个 findViewById 语句中删除开始的 TextView 。

从改变

```
TextView xViewA = (TextView) findViewById(R.id.xbox); 
```

至

```
xViewA = (TextView) findViewById(R.id.xbox); 
```

编辑：

```
public class SensorActivity extends Activity implements SensorEventListener {

SensorManager sm;
Sensor sensor; 
TextView xViewA = null;
TextView yViewA = null;
TextView zViewA = null;
TextView xViewO = null;
TextView yViewO = null;
TextView zViewO = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);

 sm = (SensorManager)getSystemService(SENSOR_SERVICE);
 sensor= sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
 sm.registerListener(this, sensor, SensorManager.SENSOR_DELAY_NORMAL);

 xViewA = (TextView) findViewById(R.id.xbox);
 yViewA = (TextView) findViewById(R.id.ybox);
 zViewA = (TextView) findViewById(R.id.zbox);
 xViewO = (TextView) findViewById(R.id.xboxo);
 yViewO = (TextView) findViewById(R.id.yboxo);
 zViewO = (TextView) findViewById(R.id.zboxo);

 setContentView(R.layout.main);

}
.. 
```

# objective-c - 如何在 iPad 的 UITextField 中限制特殊字符？

> ID：10653506
> 
> 赞同：6
> 
> 时间：2012-05-18T13:25:30.587
> 
> 标签：objective-c, ipad, uitextfield

在我的 iPad 应用程序中。我有一个 UITextField。用户将在该文本字段中输入一些值。此值必须是字母数字。如果他/她输入任何特殊字符，我想向用户显示警报。我该怎么做？警觉的条件应该是什么？

任何帮助将不胜感激。

谢谢和问候， PC

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T13:30:02.037

在委托中实现`textField:shouldChangeCharactersInRange:replacementString:`，检查替换字符串是否有特殊字符，如果检测到任何替换，则禁止替换。

检查非字母数字的最简单方法如下：

```
if ([replacementString rangeOfCharacterFromSet:[[NSCharacterSet alphanumericCharacterSet] invertedSet]].location != NSNotFound) {
    // There are non-alphanumeric characters in the replacement string
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T13:47:49.787

你可以这样做： -

```
#define ACCEPTABLE_CHARECTERS @" ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
   NSCharacterSet *acceptedInput = [NSCharacterSet characterSetWithCharactersInString:ACCEPTABLE_CHARECTERS];

   if (![[string componentsSeparatedByCharactersInSet:acceptedInput] count] > 1)
      return NO;
   else
      return YES;
} 
```

# haskell - Haskell：将列表转换为数据

> ID：10653507
> 
> 赞同：5
> 
> 时间：2012-05-18T13:25:32.653
> 
> 标签：haskell, type-conversion

我有很多这样的代码：

```
data Post =
    Post
    { postOwner :: Integer
    , postText :: ByteString
    , postDate :: ByteString
    }

sqlToPost :: [SqlValue] -> Post
sqlToPost [owner, text, date] = Post (fromSql owner) (fromSql text) (fromSql date) 
```

（这里使用的库是 HDBC）。未来会有很多类似的数据和类似的`Post`函数`sqlToVal`。我可以减少这个样板代码`sqlToVal`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T14:39:03.197

模板 Haskell 代码生成是一个非常高级的话题。不过，如果您掌握了 TH 的艺术，则可以使用所述技术来生成您正在寻找的代码。

请注意，以下代码仅适用于`data`只有一个构造函数的类型（例如 not `data Foo = A String Int | B String Int`，它有两个构造函数`A`和`B`），因为您没有说明在代码中应该如何处理。

我们将创建一个在编译时运行的 Template Haskell 函数，采用数据类型的名称，并生成一个名为`sqlTo<nameofdatatype>`. 这个函数看起来像这样：

```
module THTest where

import Control.Monad (replicateM)

-- Import Template Haskell
import Language.Haskell.TH
-- ...and a representation of Haskell syntax
import Language.Haskell.TH.Syntax

-- A function that takes the name of a data type and generates a list of
-- (function) declarations (of length 1).
makeSqlDeserializer :: Name -> Q [Dec]
makeSqlDeserializer name = do
  -- Look up some information about the name. This gets information about what
  -- the name represents.
  info <- reify name

  case info of
    -- Is the name a type constructor (TyConI) of a data type (DataD), with
    -- only one normal constructor (NormalC)? Then, carry on.
    -- dataName is the name of the type, constrName of the constructor, and
    -- the paramTypes are the constructor parameter types.
    -- So, if we have `data A = B String Int`, we get
    -- dataName = A, constrName = B, paramTypes = [String, Int]
    TyConI (DataD _ dataName _ [NormalC constrName paramTypes] _) -> do

      -- If the dataName has a module name (Foo.Bar.Bla), only return the data
      -- name (Bla)
      let dataBaseName = nameBase dataName

      -- Make a function name like "sqlToBla"
      let funcName = mkName $ "sqlTo" ++ dataBaseName

      -- Also access the "fromSql" function which we need below.
      let fromSqlName = mkName "Database.HDBC.fromSql"

      -- Count how many params our data constructor takes.
      let numParams = length paramTypes

      -- Create numParams new names, which are variable names with random
      -- names.
      -- This could create names like [param1, param2, param3] for example,
      -- but typically they will look like
      -- [param[aV2], param[aV3], param[aV4]]
      paramNames <- replicateM numParams $ newName "param"

      -- The patterns are what's on the left of the `=` in the function, e.g.
      -- sqlToBla >>>[param1, param2, param3]<<< = ...
      -- We make a list pattern here which matches a list of length numParams
      let patterns = [ListP $ map VarP paramNames]

      -- The constructor params are the params that are sent to the
      -- constructor:
      -- ... = Bla >>>(fromSql param1) (fromSql param2) (fromSql param3)<<<
      let constrParams = map (AppE (VarE fromSqlName) . VarE) paramNames

      -- Make a body where we simply apply the constructor to the params
      -- ... = >>>Bla (fromSql param1) (fromSql param2) (fromSql param3)<<<
      let body = NormalB (foldl AppE (ConE constrName) constrParams)

      -- Return a new function declaration that does what we want.
      -- It has only one clause with the patterns that are specified above.
      -- sqlToBla [param1, param2, param3] =
      --   Bla (fromSql param1) (fromSql param2) (fromSql param3)
      return [FunD funcName [Clause patterns body []]] 
```

现在，我们像这样使用这个函数（注意`LANGUAGE`启用 Template Haskell 的编译指示）：

```
{-# LANGUAGE TemplateHaskell #-}

-- The module that defines makeSqlDeserializer (must be in a different module!)
import THTest

-- Also import the fromSql function which is needed by the generated function.
import Database.HDBC

-- Declare the data type
data Bla = Bla String Int deriving (Show)

-- Generate the sqlToBla function
makeSqlDeserializer ''Bla 
```

如果要查看生成的函数，只需`-ddump-splices`在编译时传递给 GHC。输出是这样的：

```
test.hs:1:1: Splicing declarations
    makeSqlDeserializer 'Bla
  ======>
    test.hs:7:1-25
    sqlToBla [param[aV2], param[aV3]]
      = Bla (Database.HDBC.fromSql param[aV2]) (Database.HDBC.fromSql param[aV3]) 
```

# cocoa - 使用可可刷新finder中文件或文件夹的图标

> ID：10653509
> 
> 赞同：1
> 
> 时间：2012-05-18T13:25:44.603
> 
> 标签：cocoa, applescript, finder

我正在为 Mac 开发一个可可应用程序。我正在使用我的应用程序在文件和文件夹上应用覆盖图标。但我的问题是，当我从我的应用程序更改文件或文件夹的图标时，它不会反映在 Finder 中，除非我单击 Finder 中的任何文件或文件夹。为了刷新 Finder，我正在使用我的应用程序中的以下代码运行以下 applescript：

```
NSString *source=[NSString stringWithFormat:@"tell application \"Finder\" to update POSIX file \"%@\"",itemPath];
NSAppleScript *run = [[NSAppleScript alloc] initWithSource:source];
[run executeAndReturnError:nil]; 
```

但是这段代码并没有刷新我的 Finder。知道如何刷新 Finder 以立即反映文件或文件夹的图标吗？？？提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T21:05:59.300

当您在 Finder 中使用字符串时，您必须指定类（文件夹、文件、磁盘、项目...），**项目**将适用于所有（文件夹、文件、...）。

没有它，它适用于某些人，但并非适用于所有人

此外，Finder 中的“ **posix file thePath** ”使用括号更可靠。

尝试这个

```
NSString *source=[NSString stringWithFormat:@"tell application \"Finder\" to update item (POSIX file \"%@\")",itemPath]; 
```

或者没有**NSApplescript**：

```
[[NSWorkspace sharedWorkspace] noteFileSystemChanged: itemPath]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:59:30.280

`@"tell application \"Finder\" to update POSIX file \"%@\""`这个脚本对我来说很好。
您还可以使用苹果事件。
以下代码由[JWWalker编写](https://stackoverflow.com/users/309425/jwwalker)

```
OSStatus    SendFinderSyncEvent( const FSRef* inObjectRef )
{
    AppleEvent  theEvent = { typeNull, NULL };
    AppleEvent  replyEvent = { typeNull, NULL };
    AliasHandle itemAlias = NULL;
    const OSType    kFinderSig = 'MACS';

OSStatus    err = FSNewAliasMinimal( inObjectRef, &itemAlias );
if (err == noErr)
{
    err = AEBuildAppleEvent( kAEFinderSuite, kAESync, typeApplSignature,
        &kFinderSig, sizeof(OSType), kAutoGenerateReturnID,
        kAnyTransactionID, &theEvent, NULL, "'----':alis(@@)", itemAlias );

    if (err == noErr)
    {
        err = AESendMessage( &theEvent, &replyEvent, kAENoReply,
            kAEDefaultTimeout );

        AEDisposeDesc( &replyEvent );
        AEDisposeDesc( &theEvent );
    }

    DisposeHandle( (Handle)itemAlias );
}

    return err;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T22:55:12.857

这是我在需要时“刷新 Finder”的方法。也许它会帮助你；）

```
tell application "Finder"
    tell window 1 to update items
end tell 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-08T11:03:21.243

对我有用的是“触摸”更新文件修改日期的文件，从而触发 Finder 刷新缩略图图标。

```
NSString* path = "/Users/xx/...path_to_file"
NSString* command = [NSString stringWithFormat:@"touch \"%@\"", path];
int res = system(command.UTF8String); 
```

# asp.net-mvc - 某些操作缺少 HttpContext.Items

> ID：10653510
> 
> 赞同：0
> 
> 时间：2012-05-18T13:25:54.030
> 
> 标签：asp.net-mvc

背景：

MVC3 Intranet 应用程序使用 windows 身份验证。windows 身份验证完成后，HttpModule 从 HR 数据库中查找用户的网络 ID，并返回用户的员工信息并将其设置为`HttpContext.Items`. 我有一个基本控制器，它查找此信息并通过覆盖 OnActionExecuting 设置 ViewBag 属性。

我的问题是，`HttpContext.Items["UserInfo"]`尽管 HomeController 继承了 BaseController，但这些信息似乎仅在 Home/Index 上可用，而当我单击 Home/About 或 Home/Help 时不可用。任何人都可以阐明为什么会这样吗？

```
protected override void OnActionExecuting(ActionExecutingContext ctx)
        {          
            if (this.HttpContext.Items["UserInfo"] != null)
            {
                UserInfo User = (UserInfo)this.HttpContext.Items["UserInfo"];
                ViewBag.CurrentUser = User;
            }            

            base.OnActionExecuting(ctx);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:45:01.197

`HttpContext.Items`仅根据请求；当您重定向到另一个视图甚至在当前视图中回发时，它不会保留。所以你需要使用`Session`或其他东西来持久化它。

# magento - 如何在 magento 的顶部链接中仅显示我的帐户链接？

> ID：10653512
> 
> 赞同：3
> 
> 时间：2012-05-18T13:25:54.323
> 
> 标签：magento, header

我已在页脚中显示所有链接，我只想在页眉中显示我的帐户链接

那我该怎么做。

我应该使用 cms 页面中的静态块还是 xml 文件中的块？

谁能帮帮我吗

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T17:37:54.233

添加“我的帐户”链接的另一种方法转到**app/design/frontend/default（或您的主题包）/（主题文件夹）/page/html/header.phtml**。在此文件中，您可以添加您的自定义“li”标签，并可以为“我的帐户”放置一个链接，因为控制器将其移动到“我的帐户”页面。

在这里为您提供另一种方式:)

打开 theme/layout/customer.xml 文件，然后修改在所有页面上显示客户链接的部分，以包含链接主页以及指向您认为必要的其他客户服务页面的链接，例如“退货”（如果您得到很多这样的询问......）。

```
<default>

    <!-- Mage_Customer -->
    <reference name="top.links">
        <action method="addLink" translate="label title" module="customer"><label>Home</label><url></url><title>Home</title><prepare>true</prepare><urlParams/><position>5</position></action>
        <action method="addLink" translate="label title" module="customer"><label>My Account</label><url helper="customer/getAccountUrl"/><title>My Account</title><prepare/><urlParams/><position>94</position></action>
        <action method="addLink" translate="label title" module="customer"><label>Deliveries</label><url>deliveries</url><title>Deliveries</title><prepare>true</prepare><urlParams/><position>95</position></action>
        <action method="addLink" translate="label title" module="customer"><label>Returns</label><url>returns</url><title>Returns</title><prepare>true</prepare><urlParams/><position>96</position></action>
        <action method="addLink" translate="label title" module="customer"><label>Contact Us</label><url>contacts</url><title>Contact Us</title><prepare>true</prepare><urlParams/><position>97</position></action>
    </reference>
</default> 
```

享受 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T14:01:00.673

> **选项1：**

布局文件用于在 top.links 块中显示链接。您可以在相关的 xml 文件中删除它们，并保留其他所有内容，例如，`checkout.xml`您有类似的内容：

```
 <default>
    <reference name="top.links">
        <block type="checkout/links" name="checkout_cart_link">
            <action method="addCartLink"></action>
            <action method="addCheckoutLink"></action>
    </block>
    </reference>
</default> 
```

如果您删除该块，那么它们将不再在 top.links 块中显示这两个链接。

> **选项 2：**

正如您所说，另一种方法是创建一个 cms 块并将其包含在您的标题中。要在模板文件中包含 cms 块，您可以使用

```
<?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('toplinksblock')->toHtml() ?> 
```

或者，如果您想使用布局系统，请在布局文件中使用：

```
<reference name="footer">
  <block type="cms/block" name="sample_links">
    <action method="setBlockId"><block_id>sample_links</block_id></action>
  </block>
</reference> 
```

然后在模板文件中：

```
<?php echo $this->getChildHtml('sample_links') ?> 
```

> **选项 3：**

或者只是编辑`top.links.phtml`.

# ruby - Ruby Mechanize gem，从本地 html 副本恢复 Mechanize::Page 对象

> ID：10653519
> 
> 赞同：1
> 
> 时间：2012-05-18T13:26:24.697
> 
> 标签：ruby, gem, copy, mechanize, local

这是我拥有的代码：

```
agent = Mechanize.new
page = agent.get 'http://google.com'
page.save 'google_index.htm' 
```

如何将其还原`google_index.htm`为`Mechanize::Page`对象并继续使用该页面，例如。提交，解析等？

我试图做`YAML::dump()`or `Marshal::dump()`，但这似乎是不可能的：

```
irb(main):024:0> page.class
=> Mechanize::Page 
```

然后：

```
irb(main):013:0> YAML::dump(page) 
TypeError: can't dump anonymous class Class 
```

和：

```
irb(main):023:0> Marshal::dump(page)
TypeError: no marshal_dump is defined for class Nokogiri::XML::Element 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:33:57.397

```
 f = File.open("google_index.htm")
    doc = Nokogiri::HTML(f)
    # do stuff with f 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T23:33:39.400

也许你可以只恢复 cookie：

```
agent.cookie_jar.save_as('cookies')
agent.cookie_jar.load('cookies') 
```

不过，您的会话很有可能会过期。

# javascript - javascript 使用正则表达式或其他方式替换破折号字符

> ID：10653529
> 
> 赞同：2
> 
> 时间：2012-05-18T13:26:45.837
> 
> 标签：javascript, regex

我有这个：

```
11111-22222-333---444---55--5566--6-----7- 
```

我正在使用这段代码：

```
overlaps.replace(/-{2}/g, '-'); 
```

但是它不起作用，我想要的是`-`应该用一个替换多个实例，`-`如果有的话，应该删除结束破折号。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:39:23.813

无需使用两个正则表达式。这应该可以正常工作。

```
overlaps.replace(/-+$|(-)+/g, '$1') 
```

[http://jsfiddle.net/wJLTB/3/](http://jsfiddle.net/wJLTB/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:28:48.433

您可以使用：

```
overlaps.replace(/-+/g, "-").replace(/-$/, ""); 
```

**演示：http:** [//jsfiddle.net/wJLTB/1/](http://jsfiddle.net/wJLTB/1/)

另一种方法是使用回调函数：

```
overlaps.replace(/-+/g, function(str, p1, offset) {
    return offset.lastIndexOf("-") == p1 ? "" : "-";
}) 
```

**演示：http:** [//jsfiddle.net/wJLTB/2/](http://jsfiddle.net/wJLTB/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:31:29.697

关闭但忘记了最终条件：

> 如果有的话，应该删除结尾的破折号。

所以改用这个：

```
overlaps.replace(/-+/g, "-").replace(/-+$/, ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T13:52:37.983

这对我来说看起来更干净：

```
overlaps.replace(/-(?=-|$)/g, '') 
```

expr 读取：删除破折号后跟另一个破折号或输入结束。

# iphone - OCMock 一个 NSOperation

> ID：10653531
> 
> 赞同：5
> 
> 时间：2012-05-18T13:26:53.417
> 
> 标签：iphone, objective-c, unit-testing, ocmock

我正在尝试编写一些单元测试来测试`NSOperations`我们正在编写的一些自定义。我想做的是创建一个 Mock`NSOperation`并将其放在 上`NSOperationQueue`，然后等待它完成。我知道我可以调整方法而不使用`OCMoc`k ，但我真的不想这样做。我想用`OCMock`. 我尝试运行的代码如下所示：

```
MYOperation *operation = [MYOperation new];
id mockOperation = [OCMockObject partialMockForObject:operation];
[NSOperationQueue *queue = [NSOperationQueue new];
[queue setMaxConcurrentOperationCount:1];
[queue addOperation:mockOperation]; 
```

当单元测试到达这一行时：

```
[queue addOperation:mockOperation]; 
```

我接到一个释放对象异常的调用。有人对我如何克服这个有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T17:45:07.850

如果您使用的是 ARC，`operation`则可能会在您创建模拟后立即发布，因为它不再被访问。如果将其更改为此，它应该修复错误：

```
[queue addOperation:operation]; 
```

...无论如何你都应该这样做——你正在测试你的对象，而不是模拟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:33:10.783

当使用 ARC 时，对*mockOperation*中对象的引用将被 Apple 运行时非常激进地（我认为过于激进）设置为 nil。不过，并非一切都丢失了。*您可以使用mockOperation*设置存根和期望，并且仍然将*操作*传递给 addOperation: 方法；即使您使用对原始对象的引用，部分模拟也可以工作。

# jquery - 函数在 Jquery 中的 prepend 内部不起作用

> ID：10653534
> 
> 赞同：0
> 
> 时间：2012-05-18T13:27:04.113
> 
> 标签：jquery

这是我的 HTML 代码：

```
<div id="playlist_item">
    <ul class="link" id="link">
        <div class="style"><input type="checkbox" class="styled">
            <div id="style"></div>   
        </div>
        <li class="edit">http://carouselinfo.com/canal/</li>
        <span class="main edit">123</span>
    </ul>
</div> 
```

当我预先添加 ul 元素时，该元素的其他 jquery 事件不起作用

jQuery代码：

```
$(function() {    
    $(".new").click(function(){
    $("#playlist_item").prepend("<ul class='link' id='link'><div class='style'><input type='checkbox' class='styled'><div id='style'></div></div><li class='edit'>Please edit this file</li><span class='main edit'>Write Duration</span></ul>")
}); 
```

此代码不适用于前置元素

```
$('.edit').editable();

$('input:checkbox').click(function () {
    var check_all = $("input[type='checkbox']");
    if ($(this).closest("ul").hasClass("change_link")) {
        $(this).closest("ul").removeClass("change_link");
    } else {
        $(this).closest("ul").addClass("change_link");
        $(".option").html("<div id='icons'><div class='add'></div></div><div id='icons'><div class='delete'></div></div>");
    }

    if (check_all.length == $("input[type='checkbox']").not(":checked").length) {
        $(".option").html("");
    }
}); 
```

我哪里错了？请帮帮我。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:36:57.563

替换`$('input:checkbox').click(function() {`为以下代码：

```
$('#playlist_item').on('click', 'input:checkbox', function() { 
```

将事件绑定到`$('input:checkbox')`它时，只会绑定到执行绑定时存在的匹配元素。通过使用委托语法，您可以将事件绑定到父元素，从而从所有子元素接收事件，即使它们在调用`.on()`函数时不存在。

由于您还想调用`.editable()`新元素，请在添加新元素后执行以下操作：

```
$('.edit:not(.editable-done)').addClass('editable-done').editable(); 
```

这将确保`.editable()`每个元素只调用一次。如果它是一个 jQuery UI 小部件，您可以简单地保留`$('.edit').editable()`- 它们会自动检测该小部件是否已经创建。

# java - 使用 Struts Select 标签指定选项标签 (listValue)

> ID：10653537
> 
> 赞同：1
> 
> 时间：2012-05-18T13:27:23.793
> 
> 标签：java, struts2, ognl

标签的 listValue 属性用于指定在选择该选项时应向用户显示的标签。

例子 -

```
<s:select name="user" list='users' listValue="username" listKey="userId"
label="Select an User" /> 
```

使用 OGNL 文字枚举列表时是否可以这样做？

```
<s:select name="distance" cssClass="textBoxStyle" headerValue="Select Distance"
 headerKey="" list="{'1 Km', '2 Km', '3 Km', '5 Km', '8 Km', '12 Km', '20 Km'}" /> 
```

我希望将 1Km 显示给用户并且整数 1 而不是字符串 1Km 与表单一起提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:51:41.033

您应该考虑从位于该视图后面的 Action 中获取 Map，而不是使用像您编码的那样的原始数组。在这种情况下，Action 中的 Map 将如下所示：

```
Map<String, Integer> myMap = new HashMap<>();
myMap.put("1 Km", 1);
... 
```

视图中的代码将是：

```
<s:select name="distance" cssClass="textBoxStyle" headerValue="Select Distance"
    headerKey="" list="myMap" /> 
```

将地图的键视为标签，将值视为选项主体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:55:43.727

您需要使用`listKey`and`listValue`属性，并构建一个实际的对象列表。

从技术上讲，您可能会做一些不正当的 OGNL，当然您也可以通过 JavaScript 和隐藏字段预提交来做到这一点，但是正如其他答案所述，您最好在 Java 层而不是视图层中进行。

我不同意另一个答案，因为对象列表似乎更具交流性，并且易于构建，但是从技术角度来看，这种情况没有区别，因此更多的是见仁见智。

# twitter - Twitter 小部件在页面加载时仅显示 1 条推文，并且无法降低间隔

> ID：10653545
> 
> 赞同：0
> 
> 时间：2012-05-18T13:27:56.030
> 
> 标签：twitter

当您将[Twitter 搜索小部件](https://twitter.com/about/resources/widgets/widget_search)添加到您的网站时，您会看到该小部件在页面加载后仅以 1 条推文开始。

是否可以在页面加载时让小部件填充更多推文？

似乎也无法降低间隔，因为它是`'30000'`最小的微秒。我试图降低代码中的间隔，但它不起作用。是否可以为此创建解决方法？

```
<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script>
<script>
    new TWTR.Widget({
        version: 2,
        type: 'search',
        search: '#myhash',
        interval: 5000,
        title: '',
        subject: '',
        width: 'auto',
        height: 294,
        theme: {
            shell: {
                background: '#ffffff',
                color: '#000000'
            },
            tweets: {
                background: '#ffffff',
                color: '#444444',
                links: '#1985b5'
            }
        },
        features: {
            scrollbar: false,
            loop: true,
            live: true,
            behavior: 'default'
        }
    }).render().start();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T00:04:45.773

```
 <script>
        new TWTR.Widget({
          version: 2,
          type: 'profile',
          rpp: 3,
          interval: 30000,
          width: 240,
          height: 300,
            features: {
            hashtags: false,
            timestamp: false,
            avatars: false,
            scrollbar: false,
            loop: false,
            live: false,
            behavior: 'all'
          }
        }).render().setUser('USERNAME&exclude_replies=true').start();
     </script> 
```

**rpp**是要显示的推文数量：将数字更改为您喜欢的任何内容。另外 - 我添加了 &exclude_replies=true 来关闭我的提要中的回复。

# c++ - 如何为随机生成器生成好的随机种子？

> ID：10653546
> 
> 赞同：2
> 
> 时间：2012-05-18T13:27:59.500
> 
> 标签：c++, visual-c++, random, seed

我当然不能为此使用随机生成器。目前我正在从 unixtime()+microtime() 创建一个 CRC32 哈希。

有没有比散列 time()+microtime() 更聪明的方法？

虽然我对结果并不完全满意，我希望它更随机，但我可以看到其中的强烈模式，直到我添加了更多对 MicroTime() 的调用，但它变得慢了很多，所以我正在寻找一些这样做的最佳方式。

这个愚蠢的代码生成了迄今为止我能做出的最好的输出，计算是必要的，或者我可以在输出中看到一些模式：

```
starthash(crc32);
    addtohash(crc32, MicroTime());
    addtohash(crc32, time(NULL)); // 64bit
    addtohash(crc32, MicroTime()/13.37f);
    addtohash(crc32, (10.0f-MicroTime())*1337.0f);
    addtohash(crc32, (11130.0f-MicroTime())/1313137.0f);
endhash(crc32); 
```

MicroTime() 返回程序启动后经过的微秒。我已将 addtohash() 重载到每种可能的类型。

我宁愿采用非库解决方案，反正大概只有大约 10 行代码，我不想安装庞大的库，因为我实际上并不需要那么多东西，而且我对代码比对代码更感兴趣只是从函数调用中使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T14:13:03.497

如果有任何疑问，请从 Windows 上获取您的种子，或者从*NIX 系统上`CryptGenRandom`读取`dev/random`或读取。`dev/urandom`

出于您的目的，这可能有点矫枉过正，但除非它导致性能问题，否则像时间这样的低熵源是没有意义的。

它不太可能被低估。如果您正在编写真正需要高质量安全随机数据的代码，并且没有在问题中提及这一点，那么您将得到应得的 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:43:04.690

您可以检查 lfsr 和伪随机生成器。通常这是一个硬件解决方案，但您可以轻松实现自己的软件 lfsr

# iis - IIS 7.5 和未缓存的图像

> ID：10653549
> 
> 赞同：21
> 
> 时间：2012-05-18T13:28:02.090
> 
> 标签：iis, caching, iis-7.5, browser-cache

我无法将图像文件缓存起来。我已经尝试了在此站点和其他站点上找到的所有内容，但仍然无法将它们缓存。

我尝试过的 Web 配置设置

```
 <staticContent>
    <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="1.00:00:00" />
    </staticContent>
    <httpProtocol allowKeepAlive="true" />

    <caching enabled="true" enableKernelCache="true">
    <profiles>
    <add extension=".png" policy="CacheUntilChange" />
    <add extension=".jpg" policy="CacheForTimePeriod" duration="12:00:00" />
    </profiles>
    </caching> 
```

这是其中 1 张图片的响应标头

```
 Key Value
    Response    HTTP/1.1 200 OK
    Cache-Control   no-cache
    Content-Type    image/png
    Last-Modified   Thu, 16 Dec 2004 18:33:28 GMT
    Accept-Ranges   bytes
    ETag    "a1ca4bc9de3c41:0"
    Server  Microsoft-IIS/7.5
    X-Powered-By    ASP.NET
    Date    Fri, 18 May 2012 13:21:21 GMT
    Content-Length  775 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-21T14:49:49.493

以下应该会导致浏览器缓存您的图像：

```
<staticContent>
    <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="1.00:00:00" />
</staticContent>
<httpProtocol>
    <customHeaders>
        <add name="Cache-Control" value="public" />
    </customHeaders>
</httpProtocol> 
```

该`<caching>...</caching>`块用于服务器端缓存，而不是客户端缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-29T21:54:25.843

如果有人需要将您的站点配置为 Chrome Audits 或 GTMetrix 要求，我已经使用以下内容配置了我的环境（感谢 Marco 的[回答](https://stackoverflow.com/a/10687548/1787312)）：

```
<clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="365.00:00:00" /> 
```

使用`365`天数，这两个工具都将该值视为缓存时间可接受的值。

# drupal - 如何使用 php 获取变量的变量名？

> ID：10653561
> 
> 赞同：0
> 
> 时间：2012-05-18T13:28:49.280
> 
> 标签：drupal

我有一个drupal模板。我想知道使用 php 的活动变量的名称是什么。我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:32:01.680

如果您只是想获取已定义的变量，可以使用 PHP 的函数`get_defined_vars`：

```
print_r(get_defined_vars()); 
```

[http://php.net/manual/en/function.get-defined-vars.php](http://php.net/manual/en/function.get-defined-vars.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:41:55.660

如果您在 Drupal 之后的全局变量，那么它们就在这里......

[http://api.drupal.org/api/drupal/globals/7](http://api.drupal.org/api/drupal/globals/7)

# apache - 在 Centos 上颠覆失败

> ID：10653562
> 
> 赞同：0
> 
> 时间：2012-05-18T13:29:03.383
> 
> 标签：apache, svn, centos

一旦我重新启动了我的 centos 服务器，我的 apache 服务器就失败了。当我尝试启动服务时，出现此错误：

httpd：/usr/local/apache/conf/httpd.conf 第 35 行的语法错误：无法将 /usr/local/apache/modules/mod_dav_svn.so 加载到服务器：/usr/local/apache/modules/mod_dav_svn.so ：未定义符号：dav_register_provider

阅读一些文章我发现我需要在 mod_dav_svn.so 之前加载 mod_dav.so 但我的服务器中没有这个文件。

重新安装颠覆也不起作用。

任何想法 ？？？谢谢你 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:36:16.690

你是说你没有 mod_dav.so 吗？你有线吗

```
LoadModule dav_module modules/mod_dav.so 
```

在你的 httpd.conf 中？也许您可以发布 conf 文件的相关部分。

至于为什么重启后你会看到它，也许你做了一些更改并且还没有重启 apache 服务，这意味着它只是没有向你显示问题。

# itextsharp - 从 asp.net 页面视图创建 pdf

> ID：10653570
> 
> 赞同：1
> 
> 时间：2012-05-18T13:29:42.573
> 
> 标签：itextsharp

我尝试使用 itextsharp 从 html 页面视图创建一个 pdf 文件。

此代码块有效，但我从 url 获取 html 代码字符串，我想将此字符串转换为。因此，我可以通过提供 url 来将任何站点视图转换为 pdf。谢谢..

```
Response.ContentType = "application/pdf";
Response.AddHeader("content-disposition", "attachment;filename=TestPage.pdf");
Response.Cache.SetCacheability(HttpCacheability.NoCache);
StringWriter sw = new StringWriter();
HtmlTextWriter hw = new HtmlTextWriter(sw);

WebClient wc = new WebClient();
string htmlText = wc.DownloadString("http://");

this.Page.RenderControl(hw);
StringReader sr = new StringReader(sw.ToString());
Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 100f, 0f);
HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
pdfDoc.Open();
htmlparser.Parse(sr);
pdfDoc.Close();
Response.Write(pdfDoc);
Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:25:03.477

HTMLWorker 是有缺陷的，已经停止使用，取而代之的是 XMLWorker。

*   项目页面：http: [//sourceforge.net/projects/xmlworker/](http://sourceforge.net/projects/xmlworker/)

*   演示页面：[http ://demo.itextsupport.com/xmlworker/](http://demo.itextsupport.com/xmlworker/)

*   文档：[http ://demo.itextsupport.com/xmlworker/itextdoc/index.html](http://demo.itextsupport.com/xmlworker/itextdoc/index.html)

尽管文档引用了 Java 版本，但将示例改编为 iTextSharp 应该很简单。

# .net - 如何判断文件传输何时完成（服务器到客户端）

> ID：10653573
> 
> 赞同：4
> 
> 时间：2012-05-18T13:29:45.767
> 
> 标签：.net, ftpwebrequest

我正在从 ftp 服务器中提取文件，但我对验证传输是否成功完成的方法感到不舒服。

感觉必须有一种更具体的方法来检测成功的转移。有任何想法吗？

我的代码：

```
 var request = (FtpWebRequest)FtpWebRequest.Create(ftpFilePath);

            request.KeepAlive = false;
            request.UseBinary = true;
            request.UsePassive = false;
            request.Credentials = new NetworkCredential("Username", "Password");
            request.Method = WebRequestMethods.Ftp.DownloadFile;

            FtpWebResponse response = (FtpWebResponse)request.GetResponse();

            using (var stream = response.GetResponseStream())
            {
                using (var reader = new StreamReader(stream))
                {
                    contents = reader.ReadToEnd();
                }
            }

            //Check to see if transfer was successful
            if (response.StatusDescription.StartsWith("2"))
                transferSuccessful = true; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T13:32:39.687

检查`FtpWebResponse.StatusCode`成功。例如`FtpStatusCode.ClosingData`

# android - Android Robotium：单击/启动另一个活动后如何返回我的测试活动

> ID：10653576
> 
> 赞同：3
> 
> 时间：2012-05-18T13:29:54.753
> 
> 标签：android, unit-testing, android-activity, robotium

我的 Robotium 测试有问题。在我的一个活动 A 中，我单击了一个按钮。单击此按钮会启动另一个活动 B。所以在我的机器人测试中，我有这样的东西：

```
Button myBtn = (Button) solo.getView(R.id.myBtn); 
```

所以在这个动作之后，模拟器会自动启动活动B。现在，问题是我没有任何可能回到代码中的被测活动（A）。

您能否告诉我在单击触发其启动的按钮时如何避免在活动 B 中入狱？换句话说，是否有可能回到被测活动？

**仅供参考**：我需要回到正在测试的活动，因为还有其他测试方法等待被解雇。

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T22:38:29.557

请尝试类似的方法

```
solo.clickOnView(R.id.myBtn) 
```

点击你的按钮你也可以试试

```
solo.clickOnButton() 
```

要返回活动，您可以使用

```
solo.goBack(); 
```

或者

```
solo.goBackToActivity("ActivityName"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T18:38:07.743

一旦您调用了应用程序之外的任何活动，就不可能使用 回到您的应用程序`solo.<any API>`，因为`solo`它与您的应用程序的 UID 紧密相关，并且不适用于其他应用程序的活动（使用不同的 UID）。

基本上`solo`只能处理属于为其创建的应用程序的活动。

# php - MySQL“错误1046（3D000）：未选择数据库”更新查询

> ID：10653577
> 
> 赞同：6
> 
> 时间：2012-05-18T13:29:55.070
> 
> 标签：php, mysql, database

我有一个 UPDATE 查询，我在其中明确引用了数据库，但 MySQL 仍然抱怨消息：`ERROR 1046 (3D000): No database selected`.

其他结构相似但使用 INSERT 的查询可以正常工作。仅执行 SELECT 的其他查询也可以正常运行。

要在测试用例中重复该问题，请尝试运行以下查询：

```
create table test.object1 (
    id_object1 int unsigned not null auto_increment,
    total int,
    weight int,
    dt datetime,
    primary key (id_object1)
) engine=InnoDB;

create table test.object2 (
    id_object2 int unsigned not null auto_increment,
    primary key (id_object2)
) engine=InnoDB;

create table test.score (
    id_object1 int unsigned not null,
    id_object2 int unsigned not null,
    dt datetime,
    score float,
    primary key (id_object1, id_object2),
    constraint fk_object1 foreign key (id_object1) references object1 (id_object1),
    constraint fk_object2 foreign key (id_object2) references object2 (id_object2)
) engine=InnoDB;

insert into test.object1 (id_object1, total, weight, dt) values (1, 0, 0, '2012-01-01 00:00:00');
insert into test.object1 (id_object1, total, weight, dt) values (2, 0, 0, '2012-01-02 00:00:00');

insert into test.object2 (id_object2) values (1);

insert into test.score (id_object1, id_object2, dt, score) values (1, 1, '2012-01-03 00:00:00', 10);
insert into test.score (id_object1, id_object2, dt, score) values (2, 1, '2012-01-04 00:00:00', 8);

update test.object1 p
join (
    select ur.id_object1, sum(ur.score * ur.weight) as total, count(*) as weight
    from ( 
        select lur.* 
        from ( 
            select s.id_object1, s.id_object2, s.dt, s.score, 1 as weight
            from test.score as s 
            join test.object1 as o1 using(id_object1) 
            where s.dt > o1.dt
            order by s.id_object1, s.id_object2, s.dt desc 
        ) as lur 
        group by lur.id_object2, lur.id_object1, date(lur.dt) 
        order by lur.id_object1, lur.id_object2 
    ) as ur 
    group by ur.id_object1
) as r using(id_object1) 
set 
    p.total = p.total + r.total, 
    p.weight = p.weight + r.weight, 
    p.dt = now(); 
```

注意：我在 PHP 环境中运行这些查询，并且没有明确使用 mysql_select_db('test')，因为我不喜欢这样做，而且其他（很多！）查询都不需要它。我确信使用 mysql_select_db 会解决我的问题，但我想知道为什么这个特定的查询不起作用。

为了比较起见：如果您运行这个更简单的查询，也不使用 mysql_select_db，一切正常：

```
update test.object1 set total=1, weight=1, dt=now() where id_object1=1; 
```

我已经搜索无济于事。我发现唯一接近的就是这个错误报告：[http](http://bugs.mysql.com/bug.php?id=28551) ://bugs.mysql.com/bug.php?id=28551 ，尤其是最后一条（未答复的）消息......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:51:27.907

您的字段名称不正确，但即使您更正它们，这也是一个错误，`MySQL`如果您没有默认数据库，则不会让您这样做。

```
update  test.object1 p
join    (
        select  ur.id_object1, sum(ur.score * ur.weight) as total, count(*) as weight
        from    (
                select  lur.*
                from    (
                        select s.id_object1, s.id_object2, s.dt, s.score, 1 as weight
                        from   test.score as s
                        join   test.object1 as o1
                        using  (id_object1)
                        where  s.dt > o1.dt
                        order by
                               s.id_object1, s.id_object2, s.dt desc
                        ) as lur
                group by
                        lur.id_object1, lur.id_object1, date(lur.dt)
                order by
                        lur.id_object1, lur.id_object1
                ) as ur
        group by ur.id_object1
        ) as r
USING   (id_object1)
SET     p.total = p.total + r.total,
        p.weight = p.weight + r.weight,
        p.dt = now(); 
```

该问题特定于`UPDATE`双嵌套查询且没有默认数据库（`SELECT`或单嵌套查询或默认数据库工作正常）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:42:49.373

您在 UPDATE 语句中有一些错误的字段名称 -

*   是什么`s.object`？不应该`s.id_object2`吗？
*   是什么`lur.object1`？不应该`lur.id_object1`吗？
*   是什么`lur.object2`？不应该`lur.id_object2`吗？
*   最后是什么`ur.id_object`？

修复所有这些问题并尝试再次更新；-)

* * *

我第一次运行这个脚本时遇到了这个错误。我的输出：

```
1 row inserted [0,184s]
1 row inserted [0,068s]
1 row inserted [0,066s]
1 row inserted [0,147s]
1 row inserted [0,060s]
Error (32,1): No database selected 
```

当我设置默认数据库名称时，问题消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T19:15:53.923

请记住，当引擎设置为 MyISAM 时，您不能使用外键。您创建外键的表不仅需要是 InnoDB，而且您从中获取键的表也需要是 InnoDB。

在我想到这一点之前，我遇到了和你一样的错误并且把我的头发拉了几天。我进入了我的每个表，并确保每个表的引擎都设置为 InnoDB，现在设置外键没有问题。

# ruby - Watir 和文本字段自动完成列表

> ID：10653581
> 
> 赞同：1
> 
> 时间：2012-05-18T13:30:04.367
> 
> 标签：ruby, xpath, watir

我正在尝试从文本框中选择一个值，该值在输入内容时显示建议列表，我尝试过：

```
$browser.li(:xpath, "//div[@id='question1']/div/div[2]/input").select 'Value 1'
$browser.li(:text, /Value/).select
$browser.li(:text, /Value/).click 
```

有了这个，当我在文本字段中设置一个字符串时，我会显示列表：

```
$browser.text_field(:name => 'choice').set("Value") 
```

我尝试用这个选择一个值：

```
$browser.li(:text, /Value/).when_present.click 
```

但似乎没有一个工作，我可以设法让浏览器显示列表，但我需要从列表中选择一个值。任何的想法？

以下是列表显示时的 HTML 示例：

```
<ul class="ui-autocomplete" role="listbox">
    <li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">Value 1</a></li>
    <li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">Value 2</a></li>
    <li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">Value 3</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:29:47.037

也许尝试单击链接而不是列表项？

```
$browser.link(:text, /Value/).when_present.click 
```

# wpf - x:Reference 的替代品是什么？

> ID：10653585
> 
> 赞同：2
> 
> 时间：2012-05-18T13:30:29.870
> 
> 标签：wpf, xaml

我有如下所示的 XAML：

```
<DataTemplate x:Key="CdTeThickness">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <StackPanel Grid.Row = "0" Orientation="Horizontal">
                <CheckBox x:Name="DisplayMarkers"   Content="Display Data Points" Margin="8,5,0,5" HorizontalAlignment="Left" IsChecked="False"/>
                <CheckBox x:Name="DisplayIndicator" Content="Display Indicator"   Margin="8,5,0,5" HorizontalAlignment="Left" IsChecked="False"/>
            </StackPanel>

            <vf:Chart Grid.Row = "1" Style="{StaticResource chartStyle}" IndicatorEnabled="{Binding Source={x:Reference DisplayIndicator}, Path=IsChecked}">
                <vf:Chart.Titles>
                    <vf:Title Text="{Binding Chart.ChartTitle}"/>
                </vf:Chart.Titles> 
```

我的理解是 x:Reference 尚未得到广泛支持。但是，这是我能够绑定到所需属性 (DisplayIndi​​cator) 的唯一方法，如屏幕截图所示。有人可以建议在这种情况下有效的 x:Reference 替代方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:34:06.237

通常您可以使用[`ElementName`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.elementname.aspx)绑定，但*实际上它*得到了很好的支持。[`x:Reference`](http://msdn.microsoft.com/en-us/library/ee795380.aspx)

 *```
{Binding IsChecked, ElementName=DisplayIndicator} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:51:21.903

此外，作为直接绑定的替代方法，您可以将 the`Checkbox.IsChecked`和`Chart.IndicatorEnabled`enabled 绑定到视图模型上的属性（例如 ChartDisplayMarkers）。*

# javascript - MVVM 模式 javascript

> ID：10653589
> 
> 赞同：4
> 
> 时间：2012-05-18T13:30:42.010
> 
> 标签：javascript

**任何人都可以在没有**Knockout.js的情况下与我分享`MVVM pattern`JavaScript的代码或示例。我想在我的项目中实现 MVVM 模式，但不使用.**`Knockout.js`**

 ****更新**

我正在工作的应用程序不是基于 Web 的，并且有使用 Knockout.js 的限制。无论如何我喜欢这种模式，但要实现我需要一个更好的纯 JS 示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:35:00.853

[Microsoft 有一个](http://msdn.microsoft.com/en-us/magazine//hh297451.aspx)使用 jQuery 的示例。（通过快速谷歌搜索找到）您可能会分享您不想要 Knockout.js 的原因，以便人们可以发布一个对您的需求更有用的示例。**

# dotcloud - dotcloud supervisord.conf 文件环境规范

> ID：10653590
> 
> 赞同：3
> 
> 时间：2012-05-18T13:30:48.203
> 
> 标签：dotcloud

[http://docs.dotcloud.com/guides/daemons/](http://docs.dotcloud.com/guides/daemons/)状态：

```
Configuring The Environment
You can easily modify the environment of execution of your daemon with the “directory” and “environment” directives to change the directory where the command is executed and to define additional environment variable. For example:

[program:daemonname]
command = php my_daemon.php
directory = /home/dotcloud/current/
environment = QUEUE=*, VERBOSE=TRUE 
```

但是，我发现我的 PYTHONPATH 环境变量没有被设置：

点云.yml：

```
www:
  type: python
db:
  type: postgresql
worker:
  type: python-worker 
```

supervisord.conf：

```
[program:apnsd]
command=/home/dotcloud/current/printenv.py
environment=PYTHONPATH=/home/dotcloud/current/apnsd/ 
```

打印环境文件

```
#! /home/dotcloud/env/bin/python
import os
print "ENVIRONMENT"
print os.environ 
```

日志：

```
 ENVIRONMENT
    {'SUPERVISOR_ENABLED': '1', 'SUPERVISOR_SERVER_URL': 'unix:///var/dotcloud/super
    visor.sock', 'VERBOSE': 'no', 'UPSTART_INSTANCE': '', 'PYTHONPATH': '/', 'PREVLE
    VEL': 'N', 'UPSTART_EVENTS': 'runlevel', '/': '/', 'SUPERVISOR_PROCESS_NAME': 'a
    pnsd', 'UPSTART_JOB': 'rc', 'PWD': '/', 'SUPERVISOR_GROUP_NAME': 'apnsd', 'RUNLE
    VEL': '2', 'PATH': '/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
    ', 'runlevel': '2', 'previous': 'N'} 
```

不要显示修改后的 python 变量！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:31:16.043

主管中有一个错误；`/`必须引用一些变量（例如包含 a 的变量）。

在这种情况下，您需要：

```
[program:apnsd]
command=/home/dotcloud/current/printenv.py
environment= PYTHONPATH="/home/dotcloud/current/apnsd/" 
```

（in 中的空格`= PYTHONPATH`不是强制性的，只是为了使文件更具可读性；`PYTHONPATH`但是，值周围的引号是必需的！）

我将更新 dotCloud 的文档以提及此问题。

# ruby-on-rails-3 - Rails 3 - 如果用户是管理员，如何使用 declarative_authorization 测试？

> ID：10653594
> 
> 赞同：0
> 
> 时间：2012-05-18T13:31:05.117
> 
> 标签：ruby-on-rails-3, declarative-authorization

在文档中，我发现了这部分：

```
<% permitted_to? :create, :employees do %>
  <%= link_to 'New', new_employee_path %>
<% end %> 
```

这很好，但我需要测试，如果当前用户是管理员，如果是，那么显示一些文本......像

> 如果管理员？

我可以从关联中获取此信息，例如：

> 如果 current_user.role == 0

但这有点肮脏的解决方案......支持**声明式授权**一些更清洁，更好的方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:58:18.487

这就是我一直在寻找的：

```
if has_role?(:admin)
  ...
end 
```

# mysql - 从另一个表的行更新一个表中的列

> ID：10653596
> 
> 赞同：0
> 
> 时间：2012-05-18T13:31:07.207
> 
> 标签：mysql, sql-update

我的情况如下：

我有一张`articles`包含这些详细信息的表格：

```
 article | image1 | image2 | image3 
    ---------------------------------    
      1     | im-x
      2     | im-y
      3     | im-z 
```

和其他带有此数据的 article_images 表：

```
 article | image    
    ---------------    
        1   | im-a
        1   | im-b
        2   | im-c
        2   | im-d
        3   | im-e 
```

我需要像这样更新表格文章：

```
 article | image1 | image2 | image3    
    ---------------------------------    
       1    | im-x   | im-a   | im-b
       2    | im-y   | im-c   | im-d    
       3    | im-z   | im-e   | 
```

我知道这似乎不是很困难，但不可能在谷歌上找到一个例子。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:35:18.247

如果您可以向 article_images 表添加一个额外的列并确定图像需要进入哪个列：

```
 article | image | col
    ------------------------    
        1   | im-a  | image2
        1   | im-b  | image3
        2   | im-c  | image3
        2   | im-d  | image2
        3   | im-e  | image3 
```

那么这应该工作：

```
update articles 

  set image1 = CASE WHEN col = 'image1' THEN image else image1 END,
      image2 = CASE WHEN col = 'image2' THEN image else image2 END,
      image3 = CASE WHEN col = 'image3' THEN image else image3 END

  from articles inner join article_images
  on articles.article = article_images.article 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T14:10:46.110

您当前使用单独的“article_images”表的方法是最好的方法。这种表是关系数据库的基础！如果您的文章必须在同一行中包含前 3 张图像，那么我建议您创建一个视图，并保留您当前的表结构。视图可以定义为：

```
SELECT  ar.Article,
        MIN(img1.Image) AS Image1,
        MIN(img2.Image) AS Image2,
        MIN(img3.Image) AS Image3
FROM    Articles ar
        LEFT JOIN Article_images img1
            ON img1.Article = ar.Article
        LEFT JOIN Article_images img2
            ON img2.Article = ar.Article
            AND img2.Image > img1.Image
        LEFT JOIN Article_images img3
            ON img3.Article = ar.Article
            AND img3.Image > img2.Image
GROUP BY ar.Article 
```

* * *

**[SQL Fiddle 现场测试](http://sqlfiddle.com/#!2/1e598/6)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T14:16:10.430

此查询将生成所需的 Pivot：

```
SELECT a.article, coalesce(i1.image,'') AS img1, coalesce(i2.image, '') AS img2
  FROM (SELECT article FROM article_images GROUP BY article) a
  LEFT JOIN article_images i1 ON a.article = i1.article AND i1.image =
       (SELECT image FROM article_images WHERE article = a.article
         ORDER BY image LIMIT 1)
  LEFT JOIN article_images i2 ON a.article = i2.article AND i2.image =
       (SELECT image FROM article_images WHERE article = a.article
         ORDER BY image LIMIT 1 OFFSET 1); 
```

有点复杂，但是这个子查询可以在 MySQL + PostgreSQL 中工作。

要更新使用（这`UPDATE`是 MySQL 特定的）：

```
UPDATE articles a, (SELECT a.article, coalesce(i1.image, '') AS img1,
                    coalesce(i2.image, '') AS img2
  FROM (SELECT article FROM article_images GROUP BY article) a
  LEFT JOIN article_images i1 ON a.article = i1.article AND i1.image =
       (SELECT image FROM article_images WHERE article = a.article
         ORDER BY image LIMIT 1)
  LEFT JOIN article_images i2 ON a.article = i2.article AND i2.image =
       (SELECT image FROM article_images WHERE article = a.article
         ORDER BY image LIMIT 1 OFFSET 1)) AS s
SET a.image2 = s.img1, a.image3 = s.img2
WHERE a.article = s.article; 
```

如果您的数据库支持窗口函数 + CTE，如 SQL Server、PostgreSQL 或 ORACLE，则可以使用以下查询来生成 Pivot：

```
WITH rowed AS (
  SELECT article, image,
         row_number() OVER (PARTITION BY article ORDER BY image) AS row
    FROM article_images)
SELECT a.article, coalesce(i1.image, '') AS img1, coalesce(i2.image, '') AS img2
  FROM (SELECT article FROM article_images GROUP BY article) AS a
  LEFT JOIN rowed i1 ON i1.article = a.article AND i1.row = 1
  LEFT JOIN rowed i2 ON i2.article = a.article AND i2.row = 2; 
```

现在，每篇文章都有一个较短的行，您可以使用此子查询进行更新：

```
UPDATE articles a
SET image2 = s.img1,
    image3 = s.img2
FROM (WITH rowed AS (
  SELECT article, image,
         row_number() OVER (PARTITION BY article ORDER BY image) AS row
    FROM article_images)
  SELECT a.article, coalesce(i1.image, '') AS img1, coalesce(i2.image, '') AS img2
     FROM (SELECT article FROM article_images GROUP BY article) AS a
      LEFT JOIN rowed i1 ON i1.article = a.article AND i1.ROW = 1
      LEFT JOIN rowed i2 ON i2.article = a.article AND i2.ROW = 2) AS s
WHERE a.article = s.article; 
```

此`UPDATE`查询将在 PostgreSQL 中工作，但在 ORACLE / SQL Server 上可能不会。

您可以使用[MySQL](http://www.sqlfiddle.com/#!2/d4768/4)和[PostgreSQL](http://www.sqlfiddle.com/#!1/d4768/9)变体。

# javascript - 如何从对象内部的对象获取/寻址元素？

> ID：10653604
> 
> 赞同：0
> 
> 时间：2012-05-18T13:31:32.590
> 
> 标签：javascript, jquery, object

我有一个名为“消息”的对象

"message" 包含一个匿名对象（作为字符串）：

```
{"action":"wakeup","hello":"testing123"}
// this is what I get when I output "message" with alert() 
```

我如何从中解决/获取“你好”的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:44:38.490

如果`message`是一个字符串（使用 进行检查`typeof message === 'string'`），您可以使用`message = JSON.parse(message)`. 之后，您将拥有`message.action`(value 'wakeup') 和`message.hello`(value 'testing123') 可用`message`，现在是一个对象。

如果`message`已经是一个对象，`message.wakeup`并且`message.hello`两者都应该在没有转换的情况下可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:34:17.877

我认为这是一个 JSON 对象，因此您应该使用 eval 函数将其转换为 json，您可以将其用作包含转换结果的变量的属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:48:01.473

由于您使用 JSON 和 jQuery，我假设您从 AJAX 调用中获取数据。您可以使用该`$.getJSON()`方法将提供一个很好的完全形成的 Javascript 对象。

如果这不正确，您应该调用`eval()`消息字符串来创建 Javascript 对象。

# flash - 支持播放列表的 Flash 音频播放器？

> ID：10653607
> 
> 赞同：0
> 
> 时间：2012-05-18T13:31:49.863
> 
> 标签：flash, wordpress, mp3, playlist

因此，我正在开发一个 wordpress 主题，管理员可以在其中发布 mp3 文件，这些文件又会作为 Flash 音频播放器中的列表显示在首页上。我已经使用自定义帖子类型创建了管理后端，但现在我找不到支持播放列表以从中选择歌曲的 Flash 播放器。我的客户对外观不是很挑剔，但它应该看起来像这样： ![带播放列表的 Flash 音频播放器](../Images/792716b532cfcaf03290b772153638f6.png)

是否有任何我可以用于此目的的 Flash 音频播放器？我宁愿不依赖基于 XML 的播放列表。也欢迎商业解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:39:27.770

我知道它不是 Flash，但也许 jPlayer 对您来说是一个不错的解决方案。它是为音频而构建的，但它也支持视频和播放列表。

[http://jplayer.org/latest/demo-02-video/](http://jplayer.org/latest/demo-02-video/)

都是html5。我们喜欢的。永远..

# c++ - C++设置While循环每秒的速度

> ID：10653611
> 
> 赞同：6
> 
> 时间：2012-05-18T13:32:06.767
> 
> 标签：c++, loops, time, while-loop, modifier

我对 C++ 比较陌生，所以我没有大量的经验。我已经学习了 Python，并且正在尝试制作我用 C++ 编写的 Python 代码的改进版本。但是，我希望它实时工作，所以我需要设置 While 循环的速度。我确定有答案，但我找不到。我想要一个与此类似的代码：

```
rate(timeModifier * (1/dt)) 
```

这是我在 Python 中使用的代码。我可以设置一个变量 dt 来使计算更精确，而 timeModifier 可以将速度提高一倍或三倍（1 将其设置为实时）。这意味着程序将每秒循环 1/dt 次。我知道我可以在标题中包含 time.h，但我想我对 C++ 太陌生了，无法理解如何将其转移到我的需求中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T13:39:22.817

您可以编写自己的计时器类：

```
#include <ctime>

class Timer {
    private:
        unsigned long startTime;
    public:
        void start() {
            startTime = clock();
        }

        unsigned long elapsedTime() {
            return ((unsigned long) clock() - startTime) / CLOCKS_PER_SEC;
        }

        bool isTimeout(unsigned long seconds) {
            return seconds >= elapsedTime();
        }
};

int main() 
{
    unsigned long dt = 10; //in seconds
    Timer t;
    t.start();

    while(true) 
    {
        if(t.elapsedTime() < dt) 
        {
            //do something to pass time as a busy-wait or sleep
        }
        else 
        {
            //do something else
                    t = Timer(); //reset the timer
        }
    }
} 
```

请注意，不鼓励忙等待，因为它们会占用 CPU。如果您不需要执行任何操作，请使用[`sleep`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx)命令 (Windows) 或[`usleep`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/usleep.html)( Linux)。有关在 C++ 中制作计时器的更多信息，请参阅[此链接](http://www.cplusplus.com/forum/beginner/317/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T13:42:20.667

您不能在 C++ 中以相同的方式进行操作。`Sleep`您需要在计算循环、 Windows 或`usleep`*NIX上手动调用某种睡眠函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T13:43:59.030

It's been a while since I've done something like this, but something like this will work:

```
#include <time.h>

time_t t2, t1 = time(NULL);

while(CONDITIONS)
{
    time_t t2 = time(NULL);
    if(difftime(t2, t1) > timeModifier)
    {
        //DO the stuff!
        t1 = time(NULL);
    }
} 
```

I should note, however, that I'm not familiar with the precision of this method, I think it measures the difference in seconds.

If you need something more precise, use the `clock()` function which has the number of milliseconds since 12:00 AM beginning January 1, 1980, to the nearest 10 milliseconds. Perhaps something like this:

```
#include <time.h>

clock_t t2, t1 = clock();

while(CONDITIONS)
{
    t2 = clock();
    if((t2-t1) > someTimeElapsed*timeModifier)
    {
        //DO the stuff!
        t1 = clock());
    }
} 
```

Update: You can even yield the CPU to other threads and processes by adding this after the end of the `if` statement:

```
else
{
    usleep(10000); //sleep for ten milliseconds (chosen because of precision on clock())
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T14:25:49.100

在 Windows 下，您可以使用[QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)，同时轮询时间（例如在另一个 while 循环中）调用`Sleep(0)`以允许其他线程继续操作。

记住`Sleep`是非常不准确的。为了完全控制，只需运行一个没有操作的循环，但是您将使用 100% 的 CPU。为了减轻 CPU 的压力，您可以调用`Sleep(10)`等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T13:42:50.737

Depending on the accuracy you need, and your platform, you could use `usleep` This allows you to set the pause time down to microseconds:

```
 #include <unistd.h>

 int usleep(useconds_t useconds); 
```

Remember that your loop will always take longer than this because of the inherent processingtime of the rest of the loop but it's a start. For anything more accurate,you'd probably need to look at timer based callbacks.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T13:44:02.167

You should really create a new thread and have it do the timing so that it remains unaffected by the processing work done in the loop.

**WARNING:** Pseudo code... just to give you an idea of how to start.

```
Thread* tThread = CreateTimerThread(1000);
tThread->run();
while( conditionNotMet() )
{
    tThread->waitForTimer();
    doWork();
} 
```

`CreateTimerThread()` should return the thread object you want, and run would be something like:

```
run()
{
    while( false == shutdownLatch() )
    {
        Sleep( timeout );
        pulseTimerEvent();
    }
}

waitForTimer()
{
    WaitForSingleObject( m_handle );
    return;
} 
```

# php - “警告：preg_replace() [function.preg-replace]：编译失败：在偏移量 3 处没有可重复的内容......”

> ID：10653615
> 
> 赞同：1
> 
> 时间：2012-05-18T13:32:23.710
> 
> 标签：php, error-handling

我搜索了其他问题，但找不到可行的解决方案。这是一个 CMS 程序，我尝试将文件上传到任何目录并收到以下错误：

```
Warning: preg_replace() [function.preg-replace]: Compilation failed: nothing to repeat at offset 3 in /home/...on line 1017 
```

这是代码，有什么建议吗？

```
function _IsValidPath($Path)
{ // First check if the path starts with the starting directory     
$basePath = preg_replace("/{1,}/", "/", $_SESSION['rootdirectory'] . '/' . // this line (1017) causing the error
 $_SESSION["startingdirectory"]);
$sdPos = strpos($basePath, $Path);
if (!is_numeric($sdPos))
        {
            $sdPos = strpos($Path, $basePath);
        }

        if(is_numeric($sdPos) && $sdPos == 0)
        {
            // Make sure it doesn't contain any invalid characters
            if(is_numeric(strpos($Path, "..")) ||
            (is_numeric(strpos($Path, "./"))) ||
            (is_numeric(strpos($Path, "//"))) ||
            (is_numeric(strpos($Path, "\\"))) ||
            (is_numeric(strpos($Path, "../"))) ||
            (is_numeric(strpos($Path, "&"))) ||
            (is_numeric(strpos($Path, "*"))) ||
            (is_numeric(strpos($Path, " "))) ||
            (is_numeric(strpos($Path, "'"))) ||
            (is_numeric(strpos($Path, "\?"))) ||
            (is_numeric(strpos($Path,"<"))) ||
            (is_numeric(strpos($Path, ">"))))
            {
                return false;
            }
            else
            {
                // The path is OK
                return true;
            }
        }
        else
        {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:33:28.810

将其更改为：

```
$basePath = preg_replace("@/{1,}/@", "/", $_SESSION['rootdirectory'] . '/' .
 $_SESSION["startingdirectory"]); 
```

`preg_replace`期望正则表达式由字符串中的字符分隔，以便您可以指定类似`g`或`i`之后的标志（我通常使用`@`）。它被`/`视为分隔符。有关更多信息，请参阅[`preg_replace`手册页](http://php.net/manual/en/function.preg-replace.php)。

即使这样，这段代码**也没有多大意义**，并且可能有更好的方法来完成它应该做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:33:29.050

```
/{1,}/ 
```

看起来您正在尝试匹配 1 个或多个*nothing*。

# javascript - Javascript：使用 . 和 : 用于在函数或对象中指定变量的运算符？

> ID：10653617
> 
> 赞同：0
> 
> 时间：2012-05-18T13:32:36.757
> 
> 标签：javascript, function, static-members

为了在 javascript 函数中使用静态变量，我发现了两种方法，使用 . 和 : 运算符。使用时。运算符我们必须使用“f.variable”指定变量，并且在使用时：我们必须使用“this.variable”。这两个运算符的用法有什么区别。

```
function f(){
  f.a += 1;
  this.b += 1;
  console.log("f.a: ", f.a);
  console.log("this.b: ", this.b);
}
f.a = 0;
f:b = 0; 
```

我们也不能使用 : 在其函数之外使用该变量时，例如：

```
function g(){
  f:b = 0; //this works fine.
  var c = f:b; //raises error invalid label.
  console.log(f:b);//but this raises an error missing ')'.
} 
```

当我们使用 var 创建对象时也是如此。

```
var obj = {
 a: 2,
 b: 3
}
//accessing a and b is done using obj.a & obj.b
//but here
obj:a = 4;
console.log(f.a); // this gives 2
//and similarly using obj:a as rhs value gives error. 
```

这两个运算符实际上是如何使用的。

编辑：创建的这两种类型的变量有什么区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:33:57.983

这：

```
f:b = 0; 
```

在表达式语句之前被解释为[*标签*](https://developer.mozilla.org/en/JavaScript/Reference/Statements/label)`b = 0;`“f” 。":" 在[对象字面](https://developer.mozilla.org/en/JavaScript/Guide/Values%2C_Variables%2C_and_Literals#Object_literals)量语法中用于将属性名称表达式与其值表达式分开。否则，它不用于引用对象的属性。

# blackberry - 如何使用黑莓 api 从服务器下载文件并将其保存到设备

> ID：10653623
> 
> 赞同：2
> 
> 时间：2012-05-18T13:33:05.910
> 
> 标签：blackberry, java-me, download, store

我想从 http 服务器下载一个 .txt 文件并将其存储在设备内存中。我该怎么做。我是新手，所以任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:57:43.283

我不会为您编写代码，但我可以为您提供逻辑，因为我已经完成了此类工作。

您将需要`HttpConnection`,`DataInutStream`和Class`DataOutputStream`来`FileConnection`实现相同的目的。

[这](http://www.java2s.com/Tutorial/Java/0430__J2ME/LoadImagewithHttpConnection.htm)是一个示例的链接，它与您的问题要求相同，您需要自己研究并编写代码。

提示：如果你能弄明白的话，只需要对该代码进行微小的更改。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-18T14:08:04.107

使用下面的代码

```
package com.neel.java.rim.api.net;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;
import javax.microedition.io.file.FileConnection;
import net.rim.device.api.ui.component.Dialog;

public class FileDownloader implements Runnable {
    // Holds the URL to download the file
    StringBuffer url = null;

    //holds the instance of the delegate screen
    protected Object delegate;

    public FileDownloader(String url) {
        // image URL 
        this.url = new StringBuffer();
        this.url.append(url.toString());
    }

    //taking the instance of the delegate
    //this is the object of the active screen from where the request is made
    public Object getDelegate() {
        return delegate;
    }

    public void setDelegate(Object delegate) {
        this.delegate = delegate;
    }

    // Thread starts the execution
    public void run() {
        byte[] dataArray;
        InputStream input;  
        //url.append(updateConnSuffix()); // ad connection suffix for the data usage

        HttpConnection httpConn = null;
        try {
            httpConn = (HttpConnection) Connector.open(url.toString());

            input = httpConn.openInputStream();

            dataArray = net.rim.device.api.io.IOUtilities.streamToBytes(input);

            writeFile(dataArray);

        } catch (IOException e) {
            e.printStackTrace();
            Dialog.alert("Eoor in downloading image");
        }       
    }   

    public void writeFile(byte[] data){
        FileConnection fc = null;

        // to save in SD Card
        String pFilePath = "SDCard/BlackBerry/pictures/text.txt";

        /*use below path for saving in Device Memory*/
        //String pFilePath = "store/home/user/pictures/text.txt";

        OutputStream lStream = null;
        String time = new String();
        if (pFilePath != null) {
            try {
                fc = (FileConnection)Connector.open("file:///" + pFilePath ,Connector.READ_WRITE);
                if(null == fc || fc.exists() == false){
                    fc.create();
                }
                lStream = fc.openOutputStream(fc.fileSize());

                lStream.write(data);

            } catch (Exception ioex) {
                ioex.printStackTrace();
            } finally {
                if (lStream != null) {  
                    try {
                        lStream.close();
                        lStream = null;
                    } catch (Exception ioex){
                    }
                }
                if (fc != null) {   
                    try {
                        fc.close();
                        fc = null;
                    } catch (Exception ioex){
                    }
                }
            }
        }
    }

} 
```

# c# - asp.net-mvc 3 c# Math.round 不舍入浮点数，如 0.010000001 或 0.2399999999997

> ID：10653624
> 
> 赞同：-2
> 
> 时间：2012-05-18T13:33:08.627
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, rounding

我的控制器中有以下代码：

```
 private void setProgress(float value)
    {
        progress = (float)Math.Round(value,4);
    } 
```

但是当 value 类似于标题中的数字（一个非常接近 int 的数字）时，它不起作用，progress 只会获得原始值。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:35:45.963

因为 1 和 24 可能无法使用二进制浮点数精确表示，这取决于这些数字的计算方式。如果您需要一个真正的整数，请将其四舍五入，然后将其转换为 int：

```
private void setProgress(float value)
{
    progress = Convert.ToInt32((float)Math.Round(value,0));
} 
```

如果您需要*将*浮点数与 int 进行比较（甚至是常数，则将*差异*与一些非常小的数字进行比较：

```
private bool AreCloseEnoughToEqual(double d1, double d2)
{
    const double _EPSILON = 0.00000001;
    return Math.Abs(d1-d2) < _EPSILON;
} 
```

如果您需要将其*显示*为整数，请使用 0 位小数显示：

```
 Console.WriteLine("{0:N0}",d1); 
```

# xcode - xCode 外部构建没有这样的文件或目录

> ID：10653625
> 
> 赞同：1
> 
> 时间：2012-05-18T13:33:09.247
> 
> 标签：xcode

我在 xCode 4.3.2 中添加了一个带有外部构建的新目标，它应该运行一个 shell 脚本。该脚本位于项目中的文件夹 Scripts/update.sh 中。我的外部构建工具配置是：

```
Build Tool /bin/bash
Arguments ../Scripts/update.sh 
```

但是当我跑步时，我得到：

```
 /bin/bash: ../Scripts/update.sh: No such file or directory 
```

我如何正确引用文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:36:39.270

根据[Apple's Documentation](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html)，您可能希望将其`update.sh`称为：

```
${SRCROOT}/Scripts/update.sh 
```

# html - 保持 div 高度与已旋转的文本一致

> ID：10653626
> 
> 赞同：3
> 
> 时间：2012-05-18T13:33:12.947
> 
> 标签：html, css

我有一个 div，里面有一个标题，它已经用 CSS 进行了转换，可以旋转 -90 度，所以它垂直显示。

```
#mydiv h2 {
    writing-mode: tb-rl;
    -webkit-transform: rotate(-90deg);
    -moz-transform: rotate(-90deg);
    -o-transform: rotate(-90deg);
    transform: rotate(-90deg);
    filter: progid: DXImageTransform.Microsoft.BasicImage(rotation=3);
    white-space: nowrap;
    width: 20px;
    height: 20px;
} 
```

问题是包含的 div 不随文本拉伸；相反，文本浮动在 div 框之外。

如何使 div 与文本一起拉伸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:58:47.193

尝试设置`width: auto;`and `transform-origin`，但在包含`div`- 像这样：

```
div {
    writing-mode:tb-rl;
    transform: rotate(-90deg);
    transform-origin: top left;
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
    white-space:nowrap;
    display:block;
    bottom:0;
    position: absolute;
    outline: solid 2px green;
    width:auto;
    height:20px;
}
h2 {
    margin-top: -5px;
    background: pink;
} 
```

您可以在这里看到它的实际效果：http: [//dabblet.com/gist/2725392](http://dabblet.com/gist/2725392) 希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-17T16:43:08.547

有关 的方法`transform`，请参阅我对类似问题的回答：[https ://stackoverflow.com/a/47860039/1709587](https://stackoverflow.com/a/47860039/1709587)

或者，*在*现代版本的 Chrome 中使用`writing-mode: vertical-lr`（或不推荐使用的`writing-mode: td-lr`）似乎可以正常工作；包含的 div 将正确容纳其中的 h2，并且不需要`transform`s。请参见下面的示例：

```
#container {
  /* Pink background for easier visualisation of the end result */
  background: pink;

  /* Optional; shrinks width of div to minimum required to contain h2 */
  display: inline-block;
}

#container h2 {
  /* Note that the td-lr value used in the question is deprecated;
     vertical-lr is the modern equivalent. See:
     https://developer.mozilla.org/en-US/docs/Web/CSS/writing-mode

     Consider also using
       -webkit-writing-mode: vertical-lr
     and
       -ms-writing-mode: td-lr
     for compatibility with older browsers. */
  writing-mode: vertical-lr;

  /* Optional; flips the heading, so that it is written bottom-to-top
     instead of top-to-bottom.
     Consider also using -webkit-transform and -moz-transform and
     -o-transform and an equivalent transform with filter for compatibility
     with old browsers.*/
  transform: scale(-1, -1);

  /* Optional: disable breaks in the title */
  white-space: nowrap;
}
```

```
<div id="container">
  <h2>Some text</h2>
</div>
<div>
  More stuff
</div>
```

但是，如果您尝试在当前（2017 年 12 月）版本的 Firefox、Edge 或 Safari 上使用此功能，您会发现大量布局错误；目前，四大浏览器对垂直`writing-mode`s 的处理相当糟糕。它们彼此不一致，而且它们通常甚至都不是确定性的——您可以在开发工具中关闭和再次打开样式规则，最终得到一个不同布局的页面。因此，虽然这种方法是一种选择，但请注意使用它并进行广泛测试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T19:44:34.847

如果你只是转换了 div 而不是文本，相信这样做，它也会转换 div 的内容。

你也可以设置`height`为`auto`.

或者您可以尝试`height`通过添加必要数量的像素来手动增加。

我希望这些解决方案之一有效！

-布赖恩

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-18T13:46:44.783

您必须针对 div 大小而不是 h2 大小添加以下代码并检查。

```
#block-views-archive-block {
height: 20px;
width:20px;
overflow: visible;
} 
```

# c# - 数据网格视图中的 DevExpress 级联组合框

> ID：10653627
> 
> 赞同：0
> 
> 时间：2012-05-18T13:33:13.397
> 
> 标签：c#, devexpress, cascadingdropdown

我有一个绑定到数据源的 datagridview，在网格的每一行中都有一个类别、产品和数量。我想根据所选类别过滤每一行中的产品。我正在使用 C# 和 DevExpress。我怎样才能做到这一点？

![网格示例](../Images/f253cec3dedd27544deab5490b982fef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:17:35.813

请参阅[如何根据第一个 LookUp 列的值过滤第二个 LookUp 列，该](http://www.devexpress.com/Support/Center/kb/p/A237.aspx)文章解释了如何实现此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:58:10.457

根据您想要过滤的方式，您可以设置

```
gridView1.OptionsCustomization.AllowFilter = true; 
```

这将在您的网格中显示一个额外的过滤器行，允许您按您想要的任何文本过滤所有列；

或者您可以确保将`gridView1.OptionsCustomization.AllowFilter`其设置为 true。然后在您的列标题上应该有一个小图标（当您将光标移到列标题上时在右上角可见），单击它后将显示过滤器。

# c# - ObjectDataSource - 处理 CRUD 错误

> ID：10653629
> 
> 赞同：1
> 
> 时间：2012-05-18T13:33:20.603
> 
> 标签：c#, asp.net, objectdatasource

**扩展ObjectDataSource**以处理 CRUD 错误的好方法是什么。我知道创建、删除等事件可以具有检查**e.Exception**和**e.ExceptionHandled**的处理程序，但我并不热衷于在所有 CRUD 表单上一遍又一遍地重复相同的委托。我正在考虑从**ObjectDataSource**继承，还有其他想法吗？

谢谢，帕维尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:39:59.167

这听起来像是一个计划，而不是在内部订阅您需要的事件。另一种方法是使用一种方法来创建`ObjectDataSource`您使用的（并订阅事件），而不是自己创建它。

```
public static ObjectDataSource CreateObjectDataSource()
{
   var obj = new ObjectDataSource();
   obj.Deleted  += OnDeleted; //function for handling event
   ...

   return obj;
} 
```

# jrebel - IBM RAD 的 JREBEL 替代品

> ID：10653631
> 
> 赞同：2
> 
> 时间：2012-05-18T13:33:24.740
> 
> 标签：jrebel, redeploy, javarebel

我正在寻找可用于 IBM RAD 的 JREBEL 的开源替代品

我尝试了带有 IBM Websphere 和 RAD 的[Dynamic Code Evolution VM。](http://ssw.jku.at/dcevm/)DCEVM 无法识别 IBM jdk。有没有人试过这个并得到解决方法？我相信这是因为安装程序在 bin/client/jvm.dll 和 bin/server/jvm.dll 文件夹中搜索 jvm.dll 并且 ibm jdk 在 jdk\jre\bin\j9vm 和 jdk\jre 中有它\bin\经典。不确定这是否是唯一的问题。

但只是想知道是否有人尝试过并解决了这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T14:20:14.283

据我所知，JRebel 没有直接的替代品，无论是开源的还是商业的。DCEVM 仅能够改进代码重新加载（与 HotSwap 相比），并且没有任何框架或应用程序服务器意识。此外，您已经发现它仅适用于 SUN JVM。顺便说一句，如果 DCEVM 提供的对您来说足够的话，您也应该能够将 Websphere 与 SUN JVM 一起使用。

Javeleon 是另一种进行代码重新加载的产品，但它专注于 NetBeans 平台，无法帮助重新加载框架和应用程序服务器特定位，例如 Spring/JPA/EJB/Log4j 以及许多其他特定配置和代码更改。它有免费版本，但不是开源的。

PS。我是 JRebel 开发人员之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-04T04:22:10.077

我的 JEE 项目也有同样的问题（DCEVM+hotswapagent 无法处理我的项目被部署为符号链接）。

JDK 已经提供了一种使用 JDI（Java 调试接口）对“体内”代码更改进行热交换的方法。这对我来说已经足够好了，当我对方法体进行更改时，我只想让自己完全重新部署。

我用可执行的 jar 编写了一个基本的 java hotswapper：

[https://github.com/tencnivel/java-basic-hotswapper](https://github.com/tencnivel/java-basic-hotswapper)

# c# - JQuery Ajax 发布到 C#

> ID：10653637
> 
> 赞同：13
> 
> 时间：2012-05-18T13:33:36.183
> 
> 标签：c#, jquery, asp.net, ajax, json

我正在尝试在 C# 上检索 JSON 对象，这是我的 JavasSciprt 帖子，但我无法在代码隐藏中处理它，谢谢！

```
$.ajax({
    type: "POST",
    url: "facebook/addfriends.aspx",
    data: { "data": response.data },
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        location = '/facebook/login?URL=' + ReturnURL + '&UID=' + response.authResponse.userID + '&TK=' + response.authResponse.accessToken + '';
    }
}); 
```

我试图检索如下数据：

```
Request.Form["data"]
Request["data"] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-18T13:37:09.950

这是来自[Encosia.com](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)的示例（我添加了一个表单参数）。您不需要访问`Page.Form`- 您可以使用方法参数来代替。

代码隐藏

```
public partial class _Default : Page 
{
  [WebMethod]
  public static string GetDate(string someParameter)
  {
    return DateTime.Now.ToString();
  }
} 
```

Javascript

```
$(document).ready(function() {
  // Add the page method call as an onclick handler for the div.
  $("#Result").click(function() {
    $.ajax({
      type: "POST",
      url: "Default.aspx/GetDate",
      data: {someParameter: "some value"},
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function(msg) {
        // Replace the div's content with the page method's return.
        $("#Result").text(msg.d);
      }
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T13:46:56.620

我就是这样做的，它对我有用：

```
$.ajax({
    type: "POST",
    url: "facebook/addfriends.aspx",
    data: "data=" + response.data + "&data1=anyothervaluelikethis",
    contentType: "application/x-www-form-urlencoded",
    dataType: "json",
    success: function (msg) {
        location = '/facebook/login?URL=' + ReturnURL + '&UID=' + response.authResponse.userID + '&TK=' + response.authResponse.accessToken + '';
    }
}); 
```

这两行被修改

```
 data: "data=" + response.data + "&data1=anyothervaluelikethis",
 contentType: "application/x-www-form-urlencoded", 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T13:50:05.597

代码隐藏 C# 方法签名应类似于：

```
[WebInvoke(UriTemplate = "MyMethod", Method = "POST", ResponseFormat = WebMessageFormat.Json)]
public Object MyMethod(Object data){
 // your code
} 
```

其中 Object 可以是任何可序列化的类

# c++ - 在 C++ 中使用 linux 系统调用和文件和文件夹管理

> ID：10653638
> 
> 赞同：0
> 
> 时间：2012-05-18T13:33:40.697
> 
> 标签：c++, linux, system-calls, file-management

我正在编写一个 c++ 程序，这是任务：

我有一个`string proj_Name`和另一个字符串地址，我的程序旁边有一个名为 root 的文件夹。现在我必须`proj_name`在根文件夹中创建一个文件夹，并将地址中的所有内容复制到这个新文件夹中。

当使用 linux 终端创建目录或处理文件时，我键入`mkdir proj_name`或`cp [src] [dst]`. 有人告诉我，要在我的程序中使用终端命令，我必须使用系统调用，但我不知道什么是系统调用或如何使用它。

除此之外，我可能会在根目录下创建更多项目文件夹，并且我必须能够访问我的程序中的每个文件夹。

如何使用 OOP 设计来处理这些文件和文件夹（例如，我`proj_name`从用户那里得到一个，我必须在根目录中找到相应的文件夹，然后对该项目执行一些任务）？

绝对我应该有一个`_project_ class`，但我不知道它需要什么成员变量。此外，有人告诉我，我可以像这样以递归方式复制文件夹：复制文件夹->打开它->为每个文件->复制文件->为每个文件夹从头开始执行此算法。

有人可以帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:58:02.237

我假设这是家庭作业，尽管您没有表明它是。三个解决方案浮现在脑海：

1.  使用`system()`调用创建命令行字符串并执行它们。坦率地说，这很糟糕，原因有很多：（i）很难检查命令是否有效，（ii）很容易插入恶意代码（即黑客），以及（iii）它是非常特定于平台的。

2.  正如您所提到的，您可以使用系统调用来复制文件、创建目录等。如果您在 UNIX 上工作，您可以[看看这个问题](https://stackoverflow.com/questions/2672470/where-can-i-obtain-a-list-of-unix-system-calls)，这可能会有所帮助。同样，这里的缺点是它非常特定于平台。

3.  最后，您可以使用通用库，例如[​​ Boost 文件系统](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/index.htm)，它是最好的（这三种解决方案中的），但如果您必须证明可以在 OO 中建模文件系统，则可能对您没有太大帮助。不过，通过 API 查看可能会为您提供一些关于各种对象如何在 OO 设计中组合在一起的线索。

# android - Twitter api我回调没有回调我的应用程序

> ID：10653639
> 
> 赞同：0
> 
> 时间：2012-05-18T13:33:42.833
> 
> 标签：android, api, twitter, android-emulator, callback

我正在开发一个使用 OAuth（通过 twitter api me）对 twitter 进行身份验证的应用程序。这是我的代码：

```
public final static String CALLBACK_URL = "twittappmarc://twitter";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    WebView webView = new WebView(this);
    setContentView(webView);

    WebViewOAuthDialogWrapper pageWrapper =
        new WebViewOAuthDialogWrapper(webView,CONSUMER_KEY,CONSUMER_SECRET,CALLBACK_URL,this);
    pageWrapper.setEnableCustomResultPages(false);
    pageWrapper.login();    
}

public void onAuthorize(Token accessToken) {
    Intent i = new Intent();
    i.setClass(this,FriendListActivity.class);
    i.putExtra("TOKEN_STRING", accessToken.toString());
    startActivity(i);
}
... 
```

尽管我的代码似乎可以正常工作（我可以登录并取回令牌），但我不知道如何处理回调 URL。我以为我的应用程序会使用“onAuthorize”方法自动回调，但这就是发生的情况：

1：我在我的 webview 中成功连接到 Twitter

2 : webview 尝试加载 twittappmarc://twitter?%token% 失败

3：使用正确的令牌调用 onAuthorize 方法，启动我的 FriendListActivity

我应该怎么做才能使第 2 步不再发生？我的回调网址不正确吗？我应该使用意图过滤器将该 URL 的调用重定向到我的应用程序吗？我尝试了很多事情都没有成功...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:22:02.813

Sunshirond 的想法，非常适合我，我在[http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application](http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application)源代码中做了一些更改。登录和 twitt 的主要活动将是这样的：

```
public class PrepareRequestTokenActivity extends Activity {

final String TAG = getClass().getName();

private OAuthConsumer consumer; 
private OAuthProvider provider;
private  WebView webView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_webview);

    try {
        this.consumer = new CommonsHttpOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
        this.provider = new CommonsHttpOAuthProvider(Constants.REQUEST_URL,Constants.ACCESS_URL,Constants.AUTHORIZE_URL);
    } catch (Exception e) {
        Log.e(TAG, "Error creating consumer / provider",e);
    }

    Log.i(TAG, "Starting task to retrieve request token.");

    webView = (WebView) findViewById(R.id.mywebview);
    webView.setWebViewClient(new MyWebViewClient(getApplicationContext(), PreferenceManager.getDefaultSharedPreferences(this)));
    webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

    WebSettings webSettings = webView.getSettings();

    webSettings.setSavePassword(false);                
    webSettings.setSupportZoom(false);
    webSettings.setSaveFormData(false);
    webSettings.setJavaScriptEnabled(true);
    webSettings .setCacheMode(WebSettings.LOAD_NO_CACHE);
    try {
        final String url = provider.retrieveRequestToken(consumer, Constants.OAUTH_CALLBACK_URL);
        webView.loadUrl(url);
    }
    catch (Exception e) {
        webView.clearHistory();
        webView.clearFormData();
        webView.clearCache(true);
        finish();
    }        

}

private class MyWebViewClient extends WebViewClient {

    private Context context;
    private SharedPreferences prefs;

    public MyWebViewClient(Context context, SharedPreferences prefs) {
        this.context = context;
        this.prefs = prefs;
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url.contains(Constants.OAUTH_CALLBACK_SCHEME)) {
            Uri uri = Uri.parse(url);
            new RetrieveAccessTokenTask(context,consumer,provider,prefs).execute(uri);
            finish();
            return true;
        }
        return false;
    }
}

public class RetrieveAccessTokenTask extends AsyncTask<Uri, Void, Void> {

    private Context context;
    private OAuthProvider provider;
    private OAuthConsumer consumer;
    private SharedPreferences prefs;

    public RetrieveAccessTokenTask(Context context, OAuthConsumer consumer,OAuthProvider provider, SharedPreferences prefs) {
        Log.d("hi there", "im gonna make the twitt");
        this.context = context;
        this.consumer = consumer;
        this.provider = provider;
        this.prefs=prefs;
    }

    /**
     * Retrieve the oauth_verifier, and store the oauth and oauth_token_secret 
     * for future API calls.
     */
    @Override
    protected Void doInBackground(Uri...params) {
        final Uri uri = params[0];
        final String oauth_verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);

        try {
            provider.retrieveAccessToken(consumer, oauth_verifier);

            final Editor edit = prefs.edit();
            edit.putString(OAuth.OAUTH_TOKEN, consumer.getToken());
            edit.putString(OAuth.OAUTH_TOKEN_SECRET, consumer.getTokenSecret());
            edit.commit();

            String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
            String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

            consumer.setTokenWithSecret(token, secret);
            //context.startActivity(new Intent(context,AndroidTwitterSample.class));

            executeAfterAccessTokenRetrieval();

            Log.i(TAG, "OAuth - Access Token Retrieved");

        } catch (Exception e) {
            Log.e(TAG, "OAuth - Access Token Retrieval Error", e);
        }

        return null;
    }

    private void executeAfterAccessTokenRetrieval() {
        String msg = getIntent().getExtras().getString("tweet_msg");
        try {
            TwitterUtils.sendTweet(prefs, msg);
        } catch (Exception e) {
            Log.e(TAG, "OAuth - Error sending to Twitter", e);
        }
    }
} 
```

}

如果你有一些问题让它工作，给我发邮件......我可以将项目上传到谷歌代码。

注意 - 这是 web 视图的 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<WebView
    android:id="@+id/mywebview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:55:23.453

我发现最好的方法是覆盖 WebviewClient 的 shouldOverrideUrlLoading。

```
WebView webView = (WebView) findViewById(R.id.webview);
webView.setWebViewClient(new WebViewClient() {
    @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            if (url.contains(Const.CALLBACK_URL)) {
                Uri uri = Uri.parse(url);
                mIntent.setData(uri);
                setResult(RESULT_OK, mIntent);
                finish();
                return true;
            }
            return false;
        }
    }); 
```

但请注意，只有当 url 形式类似于“string1://string2”时才会调用 shouldOverrideUrlLoading，其中 string1 和 2 是没有特殊字符的字符串（例如：myappname://callback）。

# c# - 运行循环通过多个页面的编码 UI 测试方法

> ID：10653640
> 
> 赞同：0
> 
> 时间：2012-05-18T13:33:43.867
> 
> 标签：c#, coded-ui-tests

我有一个`TestMethod`将遍历所有包含特定用户控件的页面。我遇到的问题是，当/如果我的断言失败时，我无法在错误消息或堆栈跟踪中看到它失败的页面。有没有办法自定义或添加其他参数以显示在测试结果详细信息中？

并不是真的需要它，但这是我的代码......

```
[TestMethod]
public void uiTestCourseListingPages() {
    UiBrowserWindow uiBrowserWindow = new UiBrowserWindow();
    string controlType = "~/_control/course/courseList.ascx";
    var request = WebRequest.Create(Utility.GET_PAGES_WITH_CONTROL_URL + controlType);
    request.ContentType = "application/json; charset=utf-8";

    using(var response = request.GetResponse()) {
        using(var streamReader = new StreamReader(response.GetResponseStream())) {
            JavaScriptSerializer serializer = new JavaScriptSerializer();
            List<PagesWithControl> pagesWithControl = serializer.Deserialize<List<PagesWithControl>>(streamReader.ReadToEnd());
            pagesWithControl.ForEach(x => {
                // launch browser
                uiBrowserWindow.launchUrl(x.key);
                // setup assertions
                Assert.AreEqual(
                     uiBrowserWindow.uiHtmlDocument.searchHtmlElementByAttributeValues<HtmlDiv>(new Dictionary<string, string> {
                        {HtmlDiv.PropertyNames.Class, "footer"}
                    }).Class,
                    "footer"
                );
            });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:01:14.137

当发生`CodedUI Test`故障时，它会在发生故障时保留桌面的图像。您可以检查是否创建了错误图像。

它默认在`TestResults`文件夹中创建，默认情况下位于您的`Project`文件夹中。如果您的测试作为您的一部分`Team Build`或通过`MTM`您的测试运行，您可以通过编辑测试设置来更改默认的 TestResults 路径：

*   [如何：从 Microsoft Visual Studio 编辑测试设置文件](http://msdn.microsoft.com/en-us/library/ms404693.aspx)
*   [如何：编辑测试计划的现有测试设置](http://msdn.microsoft.com/en-us/library/dd535596.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:00:24.220

有一个重载的 Assert.AreEqual(object,object,string)。如果您将 URL 放入将显示在测试结果中的字符串中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T14:56:42.393

记录错误的最佳方法是尝试..捕获它们。然后将它们添加到一个字符串中，如果字符串不为空，则在测试结束时断言。

这种方式可以为错误、位置等提供更多细节。

下面的视频解释了如何：

健壮的代码，继续错误 [http://www.microsoft.com/en-gb/showcase/details.aspx?uuid=65967d59-798b-47ce-9743-534d1c106657](http://www.microsoft.com/en-gb/showcase/details.aspx?uuid=65967d59-798b-47ce-9743-534d1c106657)

# php - 基本：CakePHP 数据未保存或验证工作？

> ID：10653641
> 
> 赞同：0
> 
> 时间：2012-05-18T13:33:51.150
> 
> 标签：php, postgresql, cakephp, pdo

我想知道的是一个两部分的问题。

为什么验证没有做任何事情，为什么数据不会发布到数据库？

QuestionsController.php

```
public function index() {
    $this->set('questions', $this->Question->find('all'));
}

public function view($id = null) {
    $this->Question->id = $id;
    $this->set('question', $this->Question->read());

}

public function ask() {

    if ($this->request->is('post')) {
        if ($this->Question->save($this->request->data)) {
            $this->Session->setFlash('Your Question has been asked.');
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('Unable to ask your question.');
        }
    }
}
}
  ?> 
```

问题模型

```
 class Question extends AppModel {

   public $validate = array(
    'question' => array(
        'rule' => 'notEmpty'
    ),
);
} 
```

表 postgreSQL

```
CREATE TABLE questions (
id serial not null unique primary key,
question varchar(245),
timecreated timestamp default CURRENT_TIMESTAMP

) 
```

问.ctp

```
<?php
 echo $this->Form->create('Post');
 echo $this->Form->input('question');
 echo $this->Form->end('Ask');
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T14:20:53.397

问题可能是您在创建表单时指定了错误的模型。以下行

```
echo $this->Form->create('Post'); 
```

应该

```
echo $this->Form->create('Question'); 
```

# php - 使用 foreach 将元素数组放在正确的标题下

> ID：10653643
> 
> 赞同：0
> 
> 时间：2012-05-18T13:33:54.340
> 
> 标签：php, mysql, codeigniter, foreach

我有一系列供应商，称为：

```
$listOfVendors 
```

在我看来，我用一个 foreach 遍历这个数组。

```
<?php foreach($listOfVendors as $vendor):?>         

    <p class="vendor">
        <span class="vendor-title"><?php echo $vendor->name ?>(<?php echo $vendor->country ?>)</span>, 
        <?php echo $vendor->goods ?>, <a href="<?php echo $vendor->site_adres ?>" class="vendor-link"><?php echo $vendor->site_adres ?></a>
    </p>                                            

<?php endforeach ?> 
```

每个供应商对象都具有以下属性：

**vendor_Id**、**名称**、**国家**、**商品**、**site_address**、**activity_Id**。最后一个，activity_Id，是表活动的 FK，目前有两种类型的活动：经销商和艺术家。

现在我想为每种类型的供应商添加一次标题。所以想要得到类似的东西：

**艺术家**

Vendor1(DE)，Eigen 海报 ea 商品，[http://www.linktosite.com](http://www.linktosite.com)

**经销商**

Vendor2(BE)，玩具，DVD，书籍，[http: //www.anotherlink.be](http://www.anotherlink.be)

Vendor3(FR)，商品，[http: //www.anotherlink2link.be](http://www.anotherlink2link.be)

我该怎么做呢？我似乎无法理解这个看似简单的事情。

## 编辑解决方案

### 控制器活动 -> 功能供应商

```
//Get the vendor information and add the needed headers
//Here I get all the vendors
if($listOfVendors = $this->atsusacon_model->get_records()) { 
    foreach($listOfVendors as $vendor) {
        $listOfVendorsByType[$vendor->activities_Id][] = $vendor;   
    }   
    $data['listOfVendorsByType'] = $listOfVendorsByType;    
    var_dump($listOfVendorsByType);
} 
```

### 查看活动/供应商

```
<section class="vendors-overview twelvecol clearBoth">

    <?php foreach($listOfVendorsByType as $activity):?> 

        <?php if ($activity[0]->activities_Id == 1) :?> 
            <h3>Artists</h3>
         <?php else :?>
            <h3>Dealers</h3>
        <?php endif ?>

        <?php foreach($activity as $vendor):?>      

            <p class="vendor">
                <span class="vendor-title"><?php echo $vendor->name ?>(<?php echo $vendor->country ?>)</span>, <?php echo $vendor->goods ?>, <a href="<?php echo $vendor->site_address ?>" class="vendor-link"><?php echo $vendor->site_address ?></a>
            </p>                                    

        <?php endforeach ?>         
    <?php endforeach ?> 

</section> 
```

我可以让它更有活力，但就目前而言，这正是它应该的样子。

$listOfVendorsByType 的 var_dump 如下所示：

![Var_dump($listOfVendorsByType)](../Images/43f4909a6d26b4828638824ca5ef05d0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:38:13.583

猜猜你必须获取外键的数据，而不是循环两次：确保正确“链接”供应商和活动。

```
foreach (activities ...) {
  // looping 2 times
  foreach (vendor ...) {
    // looping x times (=amount of vendors)
    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:39:16.017

您必须创建一个嵌套数组：

```
<?php 
 foreach($listOfVendors as $vendor) {
   $vendorsByType[$vendor['activities_id']][] = $vendor;
 }
?> 
```

现在您只需要使用两个 foreach 循环遍历这个嵌套数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:44:51.743

添加这个数组

```
$header = array( "header1", "header2", "header3" ); 
```

//现在 $header[0] = "header1" $header[1] = "header2" 以此类推

```
$i=0;
<?php foreach($listOfVendors as $vendor):?>         
<p class="header">
<?php echo $header[$i]; $i++; ?>
</p>
<p class="vendor">
    <span class="vendor-title"><?php echo $vendor->name ?>(<?php echo $vendor->country ?>)</span>, 
    <?php echo $vendor->goods ?>, <a href="<?php echo $vendor->site_adres ?>" class="vendor-link"><?php echo $vendor->site_adres ?></a>
</p>                                            

<?php endforeach ?> 
```

# java - 在android中将文件保存到sdcard的问题

> ID：10653646
> 
> 赞同：0
> 
> 时间：2012-05-18T13:34:01.730
> 
> 标签：java, android, sd-card

我正在尝试获取一个文件以保存到我的 SD 卡。这是我到目前为止的代码。我非常感谢您提供的任何帮助。谢谢编辑：问题是文件没有保存。当我退出程序并查看 sdcard 时，没有保存任何文件。我在错误捕获器中放了一个祝酒词，看起来我得到了一个 IOException。我不知道如何检查 StackTrace 日志

```
class bSaveListen implements Button.OnClickListener{
    @Override

    public void onClick(View arg0) {
        savef();
    }

}

public void savef(){
    sdCard = Environment.getExternalStorageDirectory();
    String filename = "aaaaaaa.txt";
    file = new File(sdCard, filename);
    FileOutputStream fileout;
    byte[] thatString = new String("awesome string").getBytes();
    try {
        fileout = new FileOutputStream(file);
        fileout.write(thatString);
        fileout.flush();
        fileout.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:05:44.187

我今天花了一整天的时间试图弄清楚这个问题，我终于有了答案。只是想我会把它贴在这里，以防其他人遇到类似的问题。我愚蠢地将我的权限写在应用程序代码块中，而不是在它下面。应该是这样的

```
<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".Main"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

不像这样

```
<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".Main"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
</application>` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:18:53.993

可能您遇到了异常，您根本没有看到它。而不是`e.printStackTrace();`，这是无用的，因为它没有出现在 DDMS 中，使用`L.e(TAG, "Error", e);` 这样你应该能够看到`Exception`并找出问题所在

# c - 标记数据包以通过原始套接字发送

> ID：10653655
> 
> 赞同：1
> 
> 时间：2012-05-18T13:34:33.460
> 
> 标签：c, linux, sockets, iptables, netfilter

我有以下函数通过原始套接字发送数据包。

```
#include <unistd.h>
#include <stdio.h>
#include <sys/socket.h>
#include <netinet/ip.h>
#include <netinet/udp.h>

#include "pkt-types.h"
#include "pkt-log.h"
#include "pkt-utils.h"

int
send_packet_raw (void *data, int size)
{
  log_message (LOG_DEBUG, " inside send_packet_raw");
  int sd;
  struct iphdr *iph = (struct iphdr *) data;
  struct udphdr *udph = (struct udphdr *) (data + sizeof (struct ip));
  struct sockaddr_in sin;
  // needed for notify kernel to not to build header for this
  int one = 1;
  const int *val = &one;
  // creating a socket
  if ((sd = socket (PF_INET, SOCK_RAW, IPPROTO_UDP)) < 0)
    {
      log_message (LOG_ERROR, " problem creating a socket");
      return EXITCODE_SOCK_CREATION_FAILED;
    }
  // setting address family
  sin.sin_family = AF_INET;
  // setting port
  sin.sin_port = udph->dest;
  // setting ip
  sin.sin_addr.s_addr = iph->daddr;
  // notifying kernel do not fill up the packet structure.
  if (setsockopt (sd, IPPROTO_IP, IP_HDRINCL, val, sizeof (one)) < 0)
    {
      log_message (LOG_ERROR, "error notifying kernel about raw socket");
      return EXITCODE_SOCK_KERN_NOTIF_FAILED;
    }
  /* setting socket option to use MARK value */
  if (setsockopt (sd, SOL_SOCKET, SO_MARK, val, sizeof (one)) < 0)
  {
    log_message (LOG_ERROR, "error notifying kernel about MARK");
    return EXITCODE_SOCK_MARK_FAILED;
  }
  #ifdef CHECKSUM
  /* compute checksum */
  udph->check = udp_checksum (data + IP_OFFSET, size - IP_OFFSET, iph->saddr, iph->daddr);
  /* testing purposed */
  #else
  udph->check = 0x00;
  #endif
  /* dscp 101000 means express forwarding */
  if (sendto (sd,               /* our socket */
              data,             /* data to send */
              size,     /* total length of our ip packet */
              0,                /* routing flag, normally always zero */
              (struct sockaddr *) &sin, /* socket addr */
              sizeof (sin)) < 0)
    {
      log_message (LOG_ERROR, "sending over raw socket failed");
      return EXITCODE_SOCK_SEND_FAILED;
    }
  else
  {
    /* shutdown the socket */
    if(shutdown (sd, 2)) /* shutdown ok */
      return EXITCODE_OK;
  }
} 
```

现在我从 libnetfilter_queue 的 nfq_set_verdict2() 设置标记：http: [//www.netfilter.org/projects/libnetfilter_queue/doxygen/group__Queue.html](http://www.netfilter.org/projects/libnetfilter_queue/doxygen/group__Queue.html)

```
int nfq_set_verdict2    (   struct nfq_q_handle *   qh,
u_int32_t   id,
u_int32_t   verdict,
u_int32_t   mark,
u_int32_t   data_len,
const unsigned char *   buf  
)           
nfq_set_verdict2 - like nfq_set_verdict, but you can set the mark.

Parameters:
qh  Netfilter queue handle obtained by call to nfq_create_queue().
id  ID assigned to packet by netfilter.
verdict     verdict to return to netfilter (NF_ACCEPT, NF_DROP)
mark    mark to put on packet
data_len    number of bytes of data pointed to by buf
buf     the buffer that contains the packet data 
```

当我收到来自 netfilter_queue 的数据包时，我会执行以下操作：

```
nfq_set_verdict(..,NF_DROP,MARK,...);
process_packet(); 
```

此 process_packet() 调用 send_packet_raw()。

相关的 iptable 规则：

```
$iptables -t mangle -A PREROUTING -m mark --mark 0xa -j ACCEPT
$iptables -t mangle -A PREROUTING -p udp --dport $PORT -j NFQUEUE
$iptables -t mangle -A OUTPUT -m mark --mark 0xa -j ACCEPT
$iptables -t mangle -A OUTPUT -p udp --sport $PORT -j NFQUEUE 
```

我还设置了一些 -j LOG 规则来查看数据包是否实际上匹配。但似乎没有数据包出去或进入，因为没有显示日志条目。无法理解如何在这里找到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:34:39.733

不完全确定问题是什么，但是

```
nfq_set_verdict(..,NF_DROP,MARK,...);
process_packet(); 
```

看起来很糟糕。*在处理数据包之前*我不会调用 NF_DROP 。我写了几个隧道程序，我首先处理数据包，把它放在我的缓冲区中，发出一个 NF_DROP。在此之后，我可以使用原始套接字从缓冲区重新发出数据包。所以：

```
process_packet();    
nfq_set_verdict(..,NF_DROP,MARK,...); 
```

会更好。至少在发布判决之前复制数据包数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-20T12:53:11.587

RAW 套接字绕过 TCP/IP 堆栈，因此它们不会被 Netfilter 钩子捕获。并且在 IPTables 中没有看到查看这篇[文章](https://diablohorn.com/2013/11/28/qp-raw-sockets-iptables)和这条[消息](http://lists.netfilter.org/pipermail/netfilter-devel/2003-March/010826.html)

# windows - 用于从批处理脚本 FTP 文件而不以纯文本存储密码的选项

> ID：10653656
> 
> 赞同：1
> 
> 时间：2012-05-18T13:34:50.527
> 
> 标签：windows, batch-file, ftp, password-protection

我想运行一个预定的批处理脚本，它将文件上传到 ftp 目录，但是我想避免在批处理文件中写入密码。如果有的话，我有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:54:01.047

您可以安排任务以 userX 身份运行，然后将密码存储在只有 userX 有权读取的文件或注册表项中。Windows 调度程序可以将帐户密码存储在作业旁边。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T13:44:14.617

如果它要留在同一台机器上，您可以将其存储为环境变量。然后在批处理文件中调用它

# java - 如何将实际方法作为参数传递给 Java 中的另一个方法？

> ID：10653658
> 
> 赞同：4
> 
> 时间：2012-05-18T13:35:04.473
> 
> 标签：java, generics, methods

我想要做的是轻松地将实际方法对象传递给另一个方法。这样我就可以创建一个通用的 Joiner 函数，该函数在对象列表的给定方法上进行连接，而无需传入表示该方法的字符串。这在 Java 中是否可行，以便我可以使用如下语法：

```
joinOnMethod(String, Collections<T>, Method) e.g. 
joinOnMethod(", ", someList, T.getName()) 
```

其中 T.getName() 将 getName() 方法传递给列表中的每个对象，而不是传递方法本身的返回类型。

希望这对我的需求足够清楚，

阿列克谢蓝。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T13:38:21.273

Java 中没有直接的一流函数支持。两种选择：

*   传入方法的名称，并使用反射来获取它
*   创建具有单个成员的类型，如下所示：

    ```
    public interface Function<In, Out> {
        Out apply(In input);
    } 
    ```

    然后您可以使用匿名内部类，如下所示：

    ```
    joinOnMethod(", ", someList, new Function<T, String>() {
                     @Override public String apply(T input) {
                         return input.getName();
                     }
                 }); 
    ```

    当然，您可以将该函数提取为变量：

    ```
    private static Function<T, String> NAME_EXTRACTOR = 
        new Function<T, String>() {
            @Override public String apply(T input) {
                return input.getName();
            }
        };

    ...

    joinOnMethod(", ", someList, NAME_EXTRACTOR); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:38:18.177

我敢打赌，您刚刚从 Javascript 或其他将函数视为对象的语言迁移到 Java。据我所知，这是不可能的，因为 Java 不将函数视为对象。您必须在`for`循环或其他构造中实际写出它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:38:40.527

不，没有这样的语法。此外，由于*类型擦除*，实际类型`T`在运行时不可用，因此即使语法可用，在泛型中也不可能。

诀窍是与其他参数一起传递`Class<T>`，并使用反射来获取方法：

```
joinOnMethod(String separator, Collections<T> items, String methodName, Class<T> theClass) 
```

现在您可以在类中查询方法`methodName`，并在计算中使用该方法。这并不能帮助您避免传递字符串（即当方法不存在时编译器不会触发错误），但您可以使其与泛型一起使用，尽管类型擦除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T13:37:16.140

我建议研究 Java 中的命令模式。它支持回调功能。

[http://en.wikipedia.org/wiki/Command_pattern#Java](http://en.wikipedia.org/wiki/Command_pattern#Java)

# android - 如何在 Photoshop 中创建 9 个补丁？什么是 9.png 编码？

> ID：10653661
> 
> 赞同：16
> 
> 时间：2012-05-18T13:35:11.593
> 
> 标签：android, photoshop, nine-patch

提供的实用程序看起来很糟糕，例如它不允许执行“另存为”，或使用类似的切片绘制多个按钮状态。

是否可以在 Photoshop 中绘制 9.png？我注意到，生成的 png 只在外边缘包含黑色像素。这是在标记切片吗？

如果黑色像素出现在两个相反的边缘怎么办？这是如何工作的？

在android上显示时外边缘是否被切断？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-18T13:41:16.143

是的，我在 Photoshop 中完成了所有九个补丁。以下是创建 9-patch 的基本规则：

1.  外部 1px 边距只能包含 100% 黑色（RGB 0、0、0）或完全透明。

2.  上边距和左边距的黑色像素定义了拉伸点，并且必须是实线、单个点或两个单独的点。如果定义了两个点，它将在这两个点之间平均拉伸。

3.  下边距和右边距的黑色像素定义了内容区域。这些像素必须是一条连续的线。

4.  保存时，请务必附加`.9.png`扩展名。

希望这可以帮助。:)

编辑：是的，在您的布局中使用时不会显示这些内容，前提是它的格式正确并且您已将其保存为 .9.png。

![在此处输入图像描述](../Images/6765179f8814e6fbb7788df959a00d4e.png)

![在此处输入图像描述](../Images/219463a98ac3b938137689b1dcd0437c.png)

好的，所以顶部将是一个简单的九个旋转器补丁。第二张图片中的横线和下线显示了哪些行/列的像素将被复制。第二张图片中的蓝色矩形显示了 Android 允许放置内容的区域。因此，例如，文本将简单地换行以留在此矩形内。

# architecture - MVC4 WebAPI 的正确架构是什么

> ID：10653673
> 
> 赞同：5
> 
> 时间：2012-05-18T13:35:56.673
> 
> 标签：architecture, asp.net-mvc-4, asp.net-web-api

我进行了一些搜索，但没有找到此问题的可用答案。

好的，我的 MVC 3 架构是这样的：

```
- Project.EDM (contains only the entity framework edmx file and its .tt and .cs entity classes)
- Project.DAL (contains IXxxRepositiory and XxxRepository where CRUD is performed on the entity classes)
- Project.Web (the MVC3 project. Controllers transfer data from ViewModels into entity models and call the CRUD functions in the DAL repositories.) 
```

`WebApi`in看起来很有吸引力，`MVC4`因为我们将能够从其他应用程序调用 CRUD 操作。我们都喜欢这个想法。

但是我发现的现有示例在`ApiController`. 我习惯将这些操作放到一个单独的 DAL 项目中。推荐的选择是什么？我们还能有一个单独的 DAL 类吗？你们的专家如何设计架构？

感谢您提供所有有用的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T13:53:47.350

我要做的是：

*   用于查询数据库的存储库
    *   用于验证内容并避免代码重复的服务层
        *   网页界面
        *   网络 API

因此，UI 和 API 都将拥有一个或多个服务，而这些服务又拥有一个或多个存储库对象。

大多数示例直接从 ApiController 查询数据库的唯一原因可能是因为简单。

# linux - 以减号开头的参数传递给 shell 命令

> ID：10653674
> 
> 赞同：3
> 
> 时间：2012-05-18T13:35:58.060
> 
> 标签：linux, bash, kde

我想使用以“-”开头的参数（-0.1）运行以下（特定于 KDE）命令

```
kdialog --textinputbox 'Output:' '-0.1' 
```

应该显示一个带有“-0.1”的文本框，但命令给出

```
unknown option "-0.1" 
```

尽管

```
kdialog --textinputbox 'Output:' '0.1' 
```

作品。显然，该命令试图将 0.1 解释为一个选项。有没有办法将参数“-0.1”传递给这样的命令？我尝试将它作为变量传递，但这也不起作用！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T13:37:53.270

尝试：

```
kdialog --textinputbox 'Output:' -- '-0.1' 
```

`--`表示“选项结束”并且应该适用于使用该框架的标准参数函数的所有 Qt（因此 KDE）应用程序。

# wpf - 如何让 WPF 组件占用所有可用空间？

> ID：10653677
> 
> 赞同：4
> 
> 时间：2012-05-18T13:36:01.260
> 
> 标签：wpf, xaml, mvvm, wpf-controls

我有一个在用户控件之间切换很多的应用程序，我希望它们拉伸到窗口的最大大小，但是有些东西阻止它们这样做，而是占用尽可能少的空间。

我注意到我在用户控件中的组件调整了它们应该的大小（即锁定到控件底部的按钮保持在原位，控件只是没有到达窗口底部，按钮最终应该结束）而且我没有t 在它们上设置任何与大小相关的属性（我尝试了几个，但没有一个达到预期的效果）。所以我假设问题出在显示控件的主要组件上。是这样设置的：

```
<Window.Resources>
    <DataTemplate DataType="{x:Type vm:MessageViewModel}">
        <vw:MessageView/>
    </DataTemplate>
    <DataTemplate DataType="{x:Type vm:ConnectionsViewModel}">
        <vw:ConnectionView/>
    </DataTemplate>
    ...
</Window.Resources>
<Grid>
    <ItemsControl ItemsSource="{Binding ViewModels}" Margin="0,20,0,0"/>
    ...
</Grid> 
```

感谢 Erno，我使用的解决方案：

改变

```
<ItemsControl ItemsSource="{Binding ViewModels}" Margin="0,20,0,0"/> 
```

至

```
<ItemsControl ItemsSource="{Binding ViewModels}" Margin="0,20,0,0">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <Grid/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T14:10:49.090

ItemsControl 将项目放在 ItemTemplate 中，并将它们放在 ItemsPanel 中。

可以通过设置 ItemsPanelTemplate 来调整 ItemsPanel。

默认情况下，ItemsPanel 是 StackPanel（垂直），并且 StackPanel 不会垂直分布行/拉伸项目。

所以你可以做的是在 ItemsPanelTemplate 中放置一个不同的控件，它可以随意拉伸和对齐项目。

# .htaccess - 开始使用 htaccess 时遇到问题

> ID：10653679
> 
> 赞同：1
> 
> 时间：2012-05-18T13:36:11.470
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我一直在尝试实现一个 mod-rewrite 来清理我的网址。我以前从来没有这样做过。

以下是我的一个网址的示例：

```
http://www.example.com/listings.php?category=Accident%20and%20Crash%20Repairs 
```

Listings.php 文件位于我网站的根目录**。**

我已经测试了我的服务器上启用了 mod-rewrite 并且发现它工作正常。

从一个空白文件开始，我试图创建一个 .htaccess 文件来重写我的网址。这是我到目前为止所尝试的：

```
RewriteEngine On
RewriteRule ^([^/]*)\.html$ /listings.php?category=$1 [L]

RewriteEngine On
RewriteRule ^/listings.html$ /listings.php?category=Accident%20and%20Crash%20Repairs [L] 
```

在下一个示例中，我只是试图根据对堆栈溢出的另一个查询的答案松散地更改 url 的一部分。

```
<IfModule mod_rewrite.c>
 RewriteEngine on
 RewriteBase /
 RewriteRule    ^lineage/?$    listings.php   [NC,L]
</IfModule> 
```

我尝试了更多组合并遵循了一些教程。不用说什么都没奏效。

如果可能的话，我希望 url 显示为：

```
http://www.example.com/listings/accident-and-crash-repairs 
```

但如果不是，我会满足于根本看不到变量。

谁能指出我哪里出错或以任何方式帮助我解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:52:10.127

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+listings/[^\?\s%20]+\s [NC]
RewriteRule ^listings/([^-]+)-([^-]+)(.*)$ listings/$1\%20$2$3 [L,NC]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+listings/[^\?\s%20]+\s [NC]
RewriteRule ^listings/([^-]+)/?$ listings.php?category=$1 [L,NC,QSA]

RewriteCond %{QUERY_STRING} ^(category)=([^%20]+)%20([^%20]+)(.*)$ [NC]
RewriteRule ^(listings\.php)/?$ $1?%1=%2-%3%4 [R=302,L,NC,NE]

RewriteCond %{QUERY_STRING} ^category=([^\s%20]+)$ [NC]
RewriteRule ^(listings)\.php/?$ $1/%1? [R=302,L,NC,NE] 
```

一旦这个基于递归的规则到位，一个 URI`/listings/accident-and-crash-repairs`将被转发到`/listings.php?category=accident%20and%20crash%20repairs`

并且 URI`/listings.php?category=accident%20and%20crash%20repairs`将在外部重定向到`/listings/accident-and-crash-repairs`.

一旦您验证它的工作更改`R=302`为`R=301`.

# ruby-on-rails - 日期时间选择定义小时范围

> ID：10653680
> 
> 赞同：0
> 
> 时间：2012-05-18T13:36:14.317
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在使用日期时间在日历中保存一些约会。通过这种方式，我可以将日期和时间存储在一起，而不会使这两个值不同。

我想要的是允许用户编辑约会和更改日期/时间。事实上，我不能让用户自由选择任何时间，但任何约会都必须设置在预定义的时间范围内（24 小时格式：10、12、14、16、18、20）。

由于在文档中我找不到任何自定义方法，`datetime_select`因此我实际上使用的是以下表单：

```
.control-group
  = f.label :start_at, :class => 'control-label'
  .controls
    = f.date_select :start_at, :value => f.object.start_at, :class => "datetimefield"
.control-group
  = f.label :start_at, :class => 'control-label'
  .controls
    = f.select :start_at, :value => Event::ALLOWED_HOURS, :class => 'number_field' 
```

`Event::ALLOWED_HOURS`是一个数组，其中包含我想让用户从中选择的时间。提交此表单时，更新操作会丢失时间信息，从而导致日期时间如下：`2012-05-18 00:00:00`而不是使用我的选择中定义的小时。

我该怎么做才能根据需要完成这项工作？

这是控制器，请注意这是一个嵌套资源`EventCalendar`：

```
class EventsController < ApplicationController
  before_filter :authenticate_user!
  load_and_authorize_resource

  # GET /events
  # GET /events.json
  def index
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @events }
    end
  end

  # GET /events/1
  # GET /events/1.json
  def show
    @event_calendar = EventCalendar.find(params[:event_calendar_id])
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @event }
    end
  end

  # GET /events/new
  # GET /events/new.json
  def new
    @event_calendar = EventCalendar.find(params[:event_calendar_id])
    @start_at = Time.parse("#{params[:day]} #{params[:hour]}")
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @event }
    end
  end

  # GET /events/1/edit
  def edit
    @event_calendar = EventCalendar.find(params[:event_calendar_id])
  end

  # POST /events
  # POST /events.json
  def create
    @event_calendar = EventCalendar.find(params[:event_calendar_id])
    @start_at = params[:start_at]

    respond_to do |format|
      if @event.save
        format.html { redirect_to root_path, notice: 'Appuntamento creato con successo.' }
        format.json { render json: @event = EventCalendar.find(params[:event_calendar_id]), status: :created, location: @event }
      else
        format.html { render action: "new" }
        format.json { render json: @event.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /events/1
  # PUT /events/1.json
  def update
    @event_calendar = EventCalendar.find(params[:event_calendar_id])
    respond_to do |format|
      if @event.update_attributes(params[:event])
        format.html { redirect_to root_path, notice: 'Appuntamento aggiornato con successo.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @event.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /events/1
  # DELETE /events/1.json
  def destroy
    @event_calendar = EventCalendar.find(params[:event_calendar_id])
    @event.destroy

    respond_to do |format|
      format.html { redirect_to root_url, notice: 'Appuntamento cancellato con successo.'}
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:31:54.073

根据大卫的建议，我将创建一个虚拟属性`start_at_hours`，而不是将线放在控制器内，只需编辑模型，将回调`Event`定义为：`before_update`

```
# inside your model
before_update :set_hour

def start_at_hours
  if !self.start_at.blank?
    self.start_at.hour
  end
end

def start_at_hours=(value)
end

# model code ...
private
def set_hour
  self.start_at = Time.parse(self.start_at.to_s) + self.start_at_hours.to_i.hours
end 
```

这应该可以根据您的需要正常工作，没有例外。它与 David 的解释做同样的事情，但是直接在模型中而不需要改变你的控制器。

编辑：通过定义一个getter和一个setter，您还可以为您的选择设置默认值（在这种情况下不需要setter，但我还是把它放了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:01:55.823

问题出在：您的创建（和更新）方法在创建`@start_at`变量时没有查看小时字段。尝试以下，它应该工作：

```
.control-group
  = f.label :start_at, :class => 'control-label'
  .controls
    = f.date_select :start_at, :value => f.object.start_at, :class => "datetimefield"
.control-group
  = f.label :start_at, :class => 'control-label'
  .controls
    = f.select "start_at_hours", :value => Event::ALLOWED_HOURS, :class => 'number_field' 
```

在控制器上的更新方法中：

```
# PUT /events/1
# PUT /events/1.json
  def update
    @event_calendar = EventCalendar.find(params[:event_calendar_id])
    respond_to do |format|
      params[:start_at] = Time.parse(params[:start_at]) + params[:start_at_hours].to_i.hours
      if @event.update_attributes(params[:event])
        format.html { redirect_to root_path, notice: 'Appuntamento aggiornato con successo.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @event.errors, status: :unprocessable_entity }
      end
    end
  end 
```

关键是这一行：

```
params[:start_at] = Time.parse(params[:start_at]) + params[:start_at_hours].to_i.hours 
```

它将`start_at`参数（仅包含日期）替换为包含额外时间的新时间对象。

# java - gzip 存档，里面有多个文件

> ID：10653683
> 
> 赞同：12
> 
> 时间：2012-05-18T13:36:18.333
> 
> 标签：java, compression, gzip

我需要创建一个包含多个文件的 gzip 存档，如果不能上课，我该怎么`ArchiveEntry`做`java.util.zip.GZIPOutputStream`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-18T14:10:32.527

根据维基[百科条目](http://en.wikipedia.org/wiki/Gzip#File_format)`gzip`：

> 虽然它的文件格式还允许连接多个这样的流（压缩文件只是简单地解压缩连接，就好像它们最初是一个文件一样），但 gzip 通常只用于压缩单个文件。

这就是`GZIPOutputStream`不支持的原因`ArchiveEntry`。

通常，多个文件用 存档为一个`tar`，然后用 压缩`gzip`以生成`.tar.gz`压缩存档。

您可以`tar.gz`通过使用以下[`Apache Commons Compress`实现以`tar`](http://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.html#putArchiveEntry%28org.apache.commons.compress.archivers.ArchiveEntry%29)这种方式创建：

```
file_out = new FileOutputStream (new File ("archive.tar.gz"));
buffer_out = new BufferedOutputStream (file_out);
gzip_out = new GzipCompressorOutputStream (buffer_out);
tar_out = new TarArchiveOutputStream (gzip_out);

// .. and then talk to 'tar_out' to write stuff 
```

[这是一个压缩整个目录的更彻底的示例](https://gist.github.com/anonymous/399853983e97dd5c39d4)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T14:02:36.880

GZip 压缩流。通常，当人们使用 GZip 处理多个文件时，他们也会使用 tar 将它们一起咀嚼

你可以在这里找到一个 java tar 库：[http ://www.trustice.com/java/tar/](http://www.trustice.com/java/tar/)

或者你可以使用 Zip 而不是 GZip

# c# - ASP.NET MVC - 使用构建服务器进行远程调试

> ID：10653684
> 
> 赞同：1
> 
> 时间：2012-05-18T13:36:19.167
> 
> 标签：c#, asp.net-mvc, remote-debugging

我正在尝试使用 Visual Studio 和 IIS 设置远程调试。

我有 3 台计算机： - 我的带有 Visual Studio 的 PC - 构建服务器 - 带有 IIS 的生产机器

构建服务器从存储库构建源并在生产机器上发布网站（仅通过替换文件）。

我已经在生产机器上设置了远程调试器工具，我可以使用 Visual Studio 连接到它。

问题是我无法设置任何断点，因为我收到消息“未加载任何符号”

我想这是因为我的本地构建与构建服务器所做的有所不同。

谁能指出我正确的方向？该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:37:54.193

客户端和服务器（您正在调试的机器）上的`.pdb`文件和所有文件`.dll`必须相同（相同版本）

确保将随程序集生成的 .PDB 文件复制到远程计算机上的同一文件夹中

# c# - 如何在 TreeView 中将子节点设置为父节点？

> ID：10653685
> 
> 赞同：0
> 
> 时间：2012-05-18T13:36:20.387
> 
> 标签：c#, asp.net, sql-server-2008

```
protected void TreeView1_SelectedNodeChanged(object sender, EventArgs e)
{
    string input = TreeView1.SelectedValue.ToString();
    DataSet ds = new DataSet();
    TreeLogic bl = new TreeLogic();
    TreeNode root= new TreeNode(input);
    ds = bl.getChild(input);
    for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
    {
        TreeNode tnode = new TreeNode(ds.Tables[0].Rows[i][1].ToString());
        tnode.SelectAction = TreeNodeSelectAction.Expand;
        root.ChildNodes.Add(tnode);
    }
} 
```

当我选择父节点时，子节点不显示。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:39:27.763

**编辑：**如果您尝试将这些新节点添加为所选节点的子节点，那么您做错了 =) 您需要这样做：

```
for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
{
    TreeNode tnode = new TreeNode(ds.Tables[0].Rows[i][1].ToString());
    tnode.SelectAction = TreeNodeSelectAction.Expand;
    // Add the new TreeNodes underneath the currently selected TreeNode.
    TreeView1.SelectedNode.ChildNodes.Add(tnode);
}
TreeView1.SelectedNode.Expand(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:41:32.680

在我看来，您正在将子节点添加到 root，这是一个仅在本地创建的节点，不属于您的 TreeView。

# android - 服务真的是私人的吗

> ID：10653688
> 
> 赞同：2
> 
> 时间：2012-05-18T13:36:27.653
> 
> 标签：android

我有一个读取用户数据的服务，比如联系人、音乐、图像、文件和...... ，我有一个服务不是Intent Service；

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:41:43.687

如果您还没有定义任何接口来将您的服务绑定到外部应用程序，那么*是*的，您的服务只为它定义的应用程序提供服务。

# .net-3.5 - PetaPoco 数据库类应该在每次请求时创建一次还是在每次需要时创建？

> ID：10653695
> 
> 赞同：4
> 
> 时间：2012-05-18T13:37:07.313
> 
> 标签：.net-3.5, webforms, petapoco

使用 PetaPoco，我应该如何处理`Database`类的创建？我的应用程序可能会使用各种存储库（不完全是 DDD 存储库，更像是网关存储库）来封装查询。

由于我将有多个存储库需要访问同一个数据库连接，我正在考虑创建一个基类，在构造函数中创建数据库类并调用`Dispose`其析构函数，并在所有派生类中简单地调用这个对象，所以我认为在这种情况下我不需要 using 块（因为当类超出范围时，它将关闭数据库本身）。

我还考虑在`Application_BeginRequest`方法上在 global.axax 中创建数据库对象，以便它在每个页面上都可用，但我不完全确定它是如何工作的（我想我需要某种`DatabaseManager`实例化它的类？我只见过这种方法与 NHibernate 和 RavenDB 之类的东西一起使用），这似乎将数据库对象的使用推送到 ASPX 页面本身，而不是通过存储库/数据层类，这看起来很臭。

任何建议这些方法中的哪一种（如果有的话）最有效？我还看到 PetaPoco 支持“共享连接”，所以我也想看看这是否可以最大限度地减少与数据库的打开连接数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T03:32:25.630

我通常`Database`为每个请求创建一个。它是一个轻量级的对象。要么在`ActionFilter`使用`Controller`基类。

# c - C - 返回值错误

> ID：10653702
> 
> 赞同：-2
> 
> 时间：2012-05-18T13:37:16.907
> 
> 标签：c

如何识别是什么类型的错误导致返回值为-1？

前任：

```
a = sscanf(ptr, "%s",output);
printf("%d",a); 
```

输出：

```
-1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:42:30.310

从文档中：

`...and errno shall be set to indicate the error`.

用于`perror()`查看错误是什么。通常，errno 仅适用于存在读取错误的情况，不适用于 sscanf。当没有匹配失败或转换时，简单地返回 -1。由于您的 fmt 字符串只是 '%s'，我能想到的获得 -1 返回值的唯一原因是 ptr 指向的字符串是否仅包含空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:42:35.720

`ptr`您可以通过检查内容并检查`output`是否正确声明来识别错误。典型的错误是`ptr`或`output`是`NULL`。

您不会从中获得更多诊断信息`sscanf`。

# python - PyQt 将 SIGNAL 连接到多个 SLOT

> ID：10653704
> 
> 赞同：9
> 
> 时间：2012-05-18T13:37:25.987
> 
> 标签：python, qt, pyqt4

我正在尝试学习`PyQt`，`rapid gui programming with python and qt`目前正在学习`Signals`和`Slots`.

以下是我的代码的一小段：

```
self.connect(self.dial, SIGNAL("valueChanged(int)"),self.spinbox.setValue) #1
self.connect(self.dial, SIGNAL("valueChanged(int)"),self.getValue_dial)    #2
self.connect(self.spinbox, SIGNAL("valueChanged(int)"),self.dial.setValue)
self.connect(self.spinbox, SIGNAL("valueChanged(int)"),self.getValue_spinbox)

def getValue_dial(self):
        print self.dial.value()

def getValue_spinbox(self):
        print self.dial.value() 
```

我在这里想要实现的是在发出信号`2`后立即调用 SLOTS`spinbox.setValue`和对象。`getValue_dial``dial``ValueChanged(int)`

上面的代码成功执行，没有任何错误，并且`print`更改了适当的值。

现在我的问题是上述方式适合为单个信号调用多个插槽。？

可以将上述两个语句（1 和 2）组合成一个语句。

这是我的[完整代码](http://pastie.org/3930507)的链接。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T13:56:09.507

你这样做的方式很好。如果你有很多事情要做，你可以连接到一个为你处理所有事情的新函数。

我注意到在您连接的`getValue`函数中，您直接从对象中获取值；您是否知道该值作为参数与`valueChanged(int)`信号一起传递？如果您更改`getValue`函数以接受附加参数，则无需直接从对象获取值。当然，您可以`getValue`一起取消该函数并在辅助函数中发出您的打印语句。

```
self.connect(self.dial, SIGNAL("valueChanged(int)"), self.dial_value_changed)
self.connect(self.spinbox, SIGNAL("valueChanged(int)"),self.spinbox_value_changed)

def dial_value_changed(self, value):
    self.spinbox.setValue(value)
    self.getValue_dial(value)

def spinbox_value_changed(self, value):
    self.dial.setValue(value)
    self.getValue_spinbox(value)

def getValue_dial(self, value):
        print value

def getValue_spinbox(self, value):
        print value 
```

此外，这取决于偏好，有一种[新的信号和插槽样式](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/new_style_signals_slots.html)可以使代码更易于阅读。它会改变

```
self.connect(self.dial, SIGNAL("valueChanged(int)"), self.dial_value_changed)
self.connect(self.spinbox, SIGNAL("valueChanged(int)"),self.spinbox_value_changed) 
```

上面的行

```
self.dial.valueChanged.connect(self.dial_value_changed)
self.spinbox.valueChanged.connect(self.spinbox_value_changed) 
```

但是对于最初的问题和你正在做的两件事，我只是连接信号两次而不是有一个辅助函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T17:29:23.403

您可以使用列表在单个语句中连接两个插槽/功能：

```
# in Python 2.X
map(self.dial.valueChanged.connect, [self.spinbox.setValue, self.getValue_dial])

# in Python 3.X (map returns an iterator instead of processing the list)
list(map(self.dial.valueChanged.connect, [self.spinbox.setValue, self.getValue_dial]))

# or with any Python version
[self.dial.valueChanged.connect(x) for x in [self.spinbox.setValue, self.getValue_dial]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:42:52.060

这是适当的方式，是的。您`can't combine`将两个 CONNECT 语句合二为一。

# php - DropBox PHP-API 检查用户是否登录并且应用程序是否被授权

> ID：10653706
> 
> 赞同：3
> 
> 时间：2012-05-18T13:37:29.167
> 
> 标签：php, dropbox, dropbox-api

我正在使用 Dropbox API 来读取和写入 Dropbox 中 App 文件夹的数据。当我使用 AJAX 将内容发布到 putFile.php 并从 getFile.php 获取内容时，重定向到 DropBox-Login 不起作用。我稍微更改了 accountInfo.php，您将在身份验证后被重定向到主页。我想在主页中检查用户是否在 dropbox 上登录并且应用程序被授权（因为我想将用户重定向到 accountInfo.php，如果他没有登录）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-03T04:58:17.563

根据我在文档中读到的内容，这应该可以解决问题：

```
<?php
require_once "dropbox-sdk/Dropbox/autoload.php";
use \Dropbox as dbx;

function isLogged() {
    $dbxClient = new dbx\Client($accessToken, "PHP-Example/1.0");
    $accountInfo = $dbxClient->getAccountInfo();

    return (empty($accountInfo)) ? false : true;
}

if(!isLogged()) {
    $appInfo = dbx\AppInfo::loadFromJsonFile("INSERT_PATH_TO_JSON_CONFIG_PATH");
    $webAuth = new dbx\WebAuthNoRedirect($appInfo, "PHP-Example/1.0");

    $authorizeUrl = $webAuth->start();

    echo "1\. Go to: " . $authorizeUrl . "\n";
    echo "2\. Click \"Allow\" (you might have to log in first).\n";
    echo "3\. Copy the authorization code.\n";
    $authCode = \trim(\readline("Enter the authorization code here: "));

    list($accessToken, $dropboxUserId) = $webAuth->finish($authCode);
    print "Access Token: " . $accessToken . "\n";
} else {
    //User is logged in
}
?> 
```

# glib - 有没有办法将数据附加到现有的 GVariant 字典？

> ID：10653707
> 
> 赞同：1
> 
> 时间：2012-05-18T13:37:32.023
> 
> 标签：glib, gio

我使用 GSettings 来存储我的应用程序设置。这些格式是“a{q(bsyssbyqqqq)}”，所以它是字典。

有时我需要向该字典添加新记录。我可以从 GSettings 作为 GVariant 检索它。有没有办法只添加一条记录？

我创建了新的 GVariantBuilder 来创建该新条目，它工作正常，但其操作结果只是一条记录。要添加所有剩余的，我需要遍历所有现有的字典条目并将它们添加到构建器中。有没有更简单、更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:06:10.403

可能为时已晚，但只是为了记录，glib 文档（[http://developer.gnome.org/glib/2.32/glib-GVariant.html](http://developer.gnome.org/glib/2.32/glib-GVariant.html)）说：

> **GVariant**实例总是有一个类型和一个值（在构造时给出）。**GVariant**实例的类型和值永远不会改变，**除非 GVariant**本身被销毁。

因此，无法更改（向您的字典中添加一些记录）**GVariant**。做你想做的事情的唯一方法就是你现在正在做的事情。

# eclipse - JSF 无法使用 Eclipse 创建托管 bean X

> ID：10653708
> 
> 赞同：1
> 
> 时间：2012-05-18T13:37:35.130
> 
> 标签：eclipse, jsf, javabeans

我正在使用 Eclipse 靛蓝。我正在关注[这个](http://blog.icesoft.org/blojsom/blog/default/2009/04/23/Making-distinctions-between-different-kinds-of-JSF-managed-beans/)站点的一个模式，它将 bean 分成 5 个类，我正在使用`ModelBean`和。`BackingBean``ControllerBean`

我的项目结构是：

`Java resources`-> `src`->`com.erp3.gui.user`上面提到的那些豆子

这是我的**用户控制器**

```
package com.erp3.gui.user;

import java.io.Serializable;

import com.erp3.bo.user.UserBO;

public class UserController implements Serializable {

    private static final long serialVersionUID = 1L;
    private UserBO bo;
    private UserModel model;

    public UserController() {
        bo = new UserBO();
        model = new UserModel();
    }

    public void Login() {
        model.setVo(bo.executeLogin(model.getVo()));
        System.out.println("Foi");
    }

    public UserBO getBo() {
        return bo;
    }

    public void setBo(UserBO bo) {
        this.bo = bo;
    }

    public UserModel getModel() {
        return model;
    }

    public void setModel(UserModel model) {
        this.model = model;
    }   
} 
```

当我运行`index.html`：

```
<h:inputText label="Usuário" id="username" value="#{userController.model.vo.login}"/> 
```

我有这个例外：

```
javax.servlet.ServletException: Unable to create managed bean userController.  The following problems were found:
     - Bean or property class com.erp3.gui.user.UserController for managed bean userController cannot be found.
     - Bean or property class com.erp3.gui.user.UserController for managed bean userController cannot be found.
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:321) 
```

有人告诉我 Eclipse 不能使用注释，所以我有我的`faces-config`

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">
 <managed-bean>
  <managed-bean-name>userController</managed-bean-name>
  <managed-bean-class>com.erp3.gui.user.UserController</managed-bean-class>
  <managed-bean-scope>request</managed-bean-scope>
 </managed-bean>
 <managed-bean>
  <managed-bean-name>userBacking</managed-bean-name>
  <managed-bean-class>com.erp3.gui.user.UserBacking</managed-bean-class>
  <managed-bean-scope>request</managed-bean-scope>
 </managed-bean>
 <managed-bean>
  <managed-bean-name>userModel</managed-bean-name>
  <managed-bean-class>com.erp3.gui.user.UserModel</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
 </managed-bean>
 <application>
  <message-bundle>com.erp3.gui.helpers.messages</message-bundle>
 </application>
</faces-config> 
```

*如有必要，我可以添加我的其他豆子，没有这样做，因为会提出一个巨大的问题*

**编辑**

我在我的 bean 上添加了注释，问题变为：

```
javax.el.PropertyNotFoundException: /views/user/login.xhtml @18,135 value="#{userController.model.vo.login}": Target Unreachable, identifier 'userController' resolved to null
    com.sun.faces.facelets.el.TagValueExpression.getType(TagValueExpression.java:97)
    com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getConvertedValue(HtmlBasicInputRenderer.java:91)
    javax.faces.component.UIInput.getConvertedValue(UIInput.java:1023)
    javax.faces.component.UIInput.validate(UIInput.java:953)
    javax.faces.component.UIInput.executeValidate(UIInput.java:1204)
    javax.faces.component.UIInput.processValidators(UIInput.java:693)
    javax.faces.component.UIForm.processValidators(UIForm.java:240)
    javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1081)
    javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1081)
    javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1159)
    com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:72)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:308) 
```

但是当我将 bean 添加到`faces-config`错误时，错误又回来了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T15:03:32.330

不幸的是，这是一个巨大的缺乏关注。

在我的项目构建路径中，我引用了服务器上的 jars，而另一个程序员更改了这些 jars 地址，所以我的引用被破坏了。

奇怪的是 Eclipse 没有发送任何关于这个问题的警报。

问题解决了。

感谢 BalusC 和 Montolide 的时间和关注。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T13:41:35.580

Eclipse 可以很好地使用注释（或者可能是它的 JBoss 工具？），所以你应该`@ManagedBean`在你的类上使用。

你`faces-config`在 WEB-INF 文件夹上吗？

# css - 当有人在搜索框上按 Enter 时，如何防止电子邮件订阅框打开？

> ID：10653717
> 
> 赞同：0
> 
> 时间：2012-05-18T13:37:59.030
> 
> 标签：css, themes

我的[网站](http://noahsdad.com/)上有两个表单，一个电子邮件注册框和一个搜索框（都在侧栏上）。我有一个问题，如果有人试图在搜索框上按 Enter 键来搜索网站，它总是打开电子邮件注册表单。换句话说，站点搜索表单将不会打开。

我不知道如何解决这个问题，有什么想法吗？

这是我在文本小部件中用于显示表单的代码。

```
<div class="signupForm"><form action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=noahsdad', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
   <p>
       <input type="text" name="email" onblur="if (this.value == '') {this.value = 'Enter your email address';}" onfocus="if (this.value == 'Enter your email address') {this.value = '';}" value="Enter your email address"/>
   </p>
   <input type="hidden" value="noahsdad" name="uri"/><input type="hidden" name="loc" value="en_US"/>
   <input type="submit" value="Subscribe" /></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:42:09.797

您需要为页面上的第一个元素添加一个`</form>`标签`<form>`（第 506 行）。这个问题是因为这两个表单被视为一个表单，并且点击“enter”会导致它们都提交。

如果你把它们分开，每一个都会是一个不同的表单，然后点击“enter”只会提交用户当前正在使用的表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:46:28.557

这可能是由于搜索表单嵌套在电子邮件注册表单中。

表单不应嵌套在 HTML 中。

您可以使用 W3 Validator 验证此问题：

[http://validator.w3.org/check?uri=http%3A%2F%2Fnoahsdad.com&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fnoahsdad.com&charset=%28detect+automatically%29&doctype=Inline&group=0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:42:21.197

“Enter”键是任何 HTML 表单的默认提交键。在您的情况下会发生这种情况，因为您将两个字段放在同一个 HTML 表单中。尝试将它们分开。我不相信，有必要使用 javascript 代码（尽管你可以这样做而不是分开表格）来捕捉 enter 键的按下。优雅的解决方案是使用不同的形式，因为它们将对应不同的动作。

# android - 媒体播放器错误

> ID：10653725
> 
> 赞同：0
> 
> 时间：2012-05-18T13:38:43.157
> 
> 标签：android, media-player, android-audiomanager

这是我用于控制两个搜索栏以在媒体播放器中设置音量控制以同时播放两个声音的代码。但是在seekbar的进度变化时声音会打开和关闭，在进度变化时不会频繁增加或减少音量。我哪里错了？

```
audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

        int maxVolume = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
        int curVolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);

        volume2 = (SeekBar)findViewById(R.id.volbar2);
        volume1 = (SeekBar)findViewById(R.id.volbar);

        volume1.setMax(maxVolume);
        volume2.setMax(maxVolume);
        volume1.setProgress(curVolume);
        volume2.setProgress(curVolume);

        volume1.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {

               }
            @Override
            public void onStartTrackingTouch(SeekBar arg0) {

            }
            @Override
            public void onProgressChanged(SeekBar seekBar, int progress, boolean arg2) {

                if(seekBar.equals(volume1)){

                    mediaPlayer.setVolume(progress,progress);

                    Toast.makeText(getApplicationContext(), ""+progress+progress, 1).show();

                      }

            }
            });

        volume2.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub

            }

            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub

            }

            public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) {
                // TODO Auto-generated method stub
                if(seekBar.equals(volume2)){ 
                     mediaPlayer2.setVolume(progress,progress);
             }

            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:50:41.597

我认为 mediaplayer.setVolume() 希望值介于 0.0f 和 1.0f 之间，因此它是相对于 audiomanagers 音量的音量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:57:02.287

@Ankush嗨，实际上我使用以下代码为我的项目解决了这个问题：

```
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    Log.w("MovingProgressBar","Progress change to: " + progress);
    try {
        if (seekBar == seekMusic){
            musicCurrentVol = (float) (progress/100.0);
            musicPlayer.setVolume(musicCurrentVol, musicCurrentVol);
        } else if (seekBar == seekIns) {
            insCurrentVol = (float) (progress/100.0);
            insPlayer.setVolume(insCurrentVol, insCurrentVol);
        } 
    } catch (Exception e) {
        Log.w("MovingProgressBar:", "Progress not change: " + e);
    }
} 
```

这对我有用。希望这也对你有用。

# javascript - 谷歌地图仅绘制正纬度/经度值，如果传递负纬度/经度值，则重置 NaN

> ID：10653728
> 
> 赞同：2
> 
> 时间：2012-05-18T13:38:48.497
> 
> 标签：javascript, google-maps

我对地图完全陌生。我面临一个问题。当我传递的纬度和经度值为负数`NaN`时，动态生成的文件将分配给这些值。`lat/long =values`将`code a-= x; b-= y`负纬度/经度值设为空并接受（不转换）正纬度/经度值。奇怪的。这段代码在

```
 point = new GLatLng(lat, long); 
```

在哪里

```
 myIcon.shadow = null;
        myIcon.printShadow = null;
        myIcon.iconAnchor = new GPoint(5, 15); 
```

我正在做标记

```
gmarkers.sort(function () { return 0.5 - Math.random() });

        mgr.addMarkers(gmarkers.slice(0, 50), 1);
        mgr.addMarkers(gmarkers.slice(51, 100), 5);
        mgr.addMarkers(gmarkers.slice(101, 150), 6);
        mgr.addMarkers(gmarkers.slice(151, 200), 7);
        mgr.addMarkers(gmarkers.slice(201, 300), 8);
        mgr.addMarkers(gmarkers.slice(301, 400), 9);
        mgr.addMarkers(gmarkers.slice(401, 600), 10);
        mgr.addMarkers(gmarkers.slice(601, 800), 11);
        mgr.addMarkers(gmarkers.slice(801, 1100), 12);
        mgr.addMarkers(gmarkers.slice(1101, 1500), 13);
        mgr.addMarkers(gmarkers.slice(1501, 2000), 14);
        mgr.addMarkers(gmarkers.slice(2001, 999999), 15);

        mgr.refresh(); 
```

有人请帮助我...在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:44:31.323

也许你应该写

```
a = -x; 
```

而不是

```
a -= x; 
```

因为`a -= x`是简写`a = a - x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:18:04.237

The issue in my case was that of data. As for Brazillian culture, the decimal in the latitude and longitude values were being set to comma (,) instead of a decimal or period (.) this can be resolved by doing a (Globalization.CultureInfo.InvariantCulture) to avoid replacement.

Thanks for your help.

# jquery - jQuery 可排序在 IE 中不起作用

> ID：10653730
> 
> 赞同：2
> 
> 时间：2012-05-18T13:38:50.607
> 
> 标签：jquery, jquery-ui, internet-explorer, jquery-ui-sortable

我正在使用 jQuery sortable 来允许用户`<li>`在`<ul>`列表中重新排列。HTML 仅包含

```
<ul id="uisortable"></ul> 
```

javascript包含以下内容：

```
$(function() {
    $('#uisortable').sortable();
    $("#uisortable").disableSelection();
}); 
```

这些项目是从 JS 动态添加的，在添加项目之后，我正在调用

$('#uisortable').sortable("刷新");

在 FF、Opera 和 Webkit 中一切正常，但在 IE 中根本不起作用——任何版本，甚至是 IE 9。我尝试添加类似这样`activate`的选项：`sortable`

```
$('#uisortable').sortable({
    activate: function() {
        throw("Start sorting");
    }
}); 
```

在 IE 9 脚本调试器中，我在线上放置了一个断点`throw("Start sorting")`- 但该行永远不会激活。似乎在 IE 中，可排序对象根本没有将自己附加到列表中。

我将 jquery 1.4.2 与 jquery UI 1.8.13 一起使用。

有趣的是，jquery ui 可排序演示页面工作正常，所以它必须与我的代码有关 - 但我可以进一步简化多少？好吧，我可以——我做到了。我没有动态地创建项目，而是在我的 HTML 中静态地创建它们（用于测试）。我从`<li>`除了一行文本中删除了所有内容。现在我的 HTML 看起来像这样：

```
<ul id="uisortable">
    <li class="sortitem">Item 1</li>
    <li class="sortitem">Item 2</li>
    <li class="sortitem">Item 3</li>
</ul> 
```

使用上面的javascript代码。不过，不能在 IE 中工作。并且错误控制台中没有任何类型的错误。不过在 FF、Webkit 和 Opera 中都很好。我现在完全被难住了。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:56:45.773

显然，问题与 jquery.ui 版本有关。我从 1.8.13 升级到 1.8.20（比将 jquery 从 1.4.2 升级到 1.7.2 容易得多） - 现在它可以工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:49:24.077

看看 [这个 JSFiddle](http://jsfiddle.net/edmM7/)。

在带有 JQuery 1.4.4 的 IE9 中工作正常。但是，如果我降到 JQuery 1.3.2（JSFiddle 上可用的下一个较低版本），它就会停止工作。

您可以在 JSFiddle 上“添加资源”以获取您正在使用的确切版本，但我认为使用 JQuery 1.4.4 或更高版本（使用适当版本的 JQueryUI）可以解决它。

# php - 为 fread fwrite 设置 utf-8 编码

> ID：10653735
> 
> 赞同：6
> 
> 时间：2012-05-18T13:39:22.447
> 
> 标签：php, fopen, fwrite, fread

嗨，我使用此代码在文件中读取和写入文本。

```
$d = fopen("chat.txt", "r");
 $content=fread($d,filesize('chat.txt'));
 $bn=explode('||',$content);
 foreach($bn as $bn)
 echo $bn.'<br>'; 
```

和

```
$d = fopen("chat.txt", "a");
 $c=$_GET['c'];
 if($c=='') die();
 fwrite($d,$c.'||');
 fclose($d); 
```

但在 =ie only= utf-8 字符显示“？” 或者 ”[]” 。我的编码 Utf-8 没有 BOM，我用这个

```
header('Content-type: text/html; charset=UTF-8'); 
```

和这个 ：

```
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
```

我在 php.ini 中的默认编码是 utf-8 但还显示？. 我在文件中看到了 chat.txt 文件和字符，但是当使用 ie 保存在文件中并且在页面中显示时显示“？” 而不是对。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-18T13:56:02.297

读取时使用此函数而不是 fopen，但写入时不使用

```
function utf8_fopen_read($fileName) { 
    $fc = iconv('windows-1250', 'utf-8', file_get_contents($fileName)); 
    $handle=fopen("php://memory", "rw"); 
    fwrite($handle, $fc); 
    fseek($handle, 0); 
    return $handle; 
} 
```

**来源**
[http://www.php.net/manual/en/function.fopen.php#104325](http://www.php.net/manual/en/function.fopen.php#104325)

**在你的情况下**

```
$d = utf8_fopen_read("chat.txt", "r");
 $content=fread($d,filesize('chat.txt'));
 $bn=explode('||',$content);
 foreach($bn as $bn)
 echo $bn.'<br>'; 
```

**尝试这个**

```
$content = iconv('windows-1250', 'utf-8', file_get_contents($fileName));
$bn = mb_split('||',$content);
foreach($bn as $b)
     echo $b.'<br>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:49:19.357

TXT 是用 utf8 编码保存的吗？您需要确保 TXT 编码为 utf-8，否则您将需要使用 utf8_encode 函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:49:43.197

您可以像这样使用 utf8_encode() 对要输出的字符串进行编码，在本例中为 $bn：

```
$d = fopen("chat.txt", "r");
$content=fread($d,filesize('chat.txt'));
$bn=explode('||',$content);
foreach($bn as $bn)
echo utf8_encode($bn).'<br>'; 
```

试试看它是否仍然很奇怪。

# ruby-on-rails - 方法未找到，但方法存在

> ID：10653740
> 
> 赞同：1
> 
> 时间：2012-05-18T13:39:28.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我为我的一个对象添加了一个附加视图，以及相应的方法和路由，但我无法加载该视图：

```
NoMethodError in Scans#parse

Showing J:/code/vsdb/app/views/scans/parse.html.erb where line #18 raised:

undefined method `parse' for #<Scan:0x23b0590>
Extracted source (around line #18):

15: 
16:   <div class="field">
17:     <%= s.label :parse %><br />
18:     <%= s.text_field :parse %>
19:   </div>
20: <% end -%> 
```

这是扫描控制器中的方法。该方法就在那里，所以我不明白错误消息真正在抱怨什么。我尝试重新启动服务器。我打算用这种方法做更多的事情，我只是想让它现在显示视图。

```
def parse
  @scan = Scan.new
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:43:15.493

The error is complaining about parse not being a method of your Scan model (not your controller). In this context parse will be a method defined automatically by Rails for one of Scan's attributes but in this case it's missing.

If you have added an attribute called parse to Scan using a migration you might need to run rake db:migrate.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:46:02.293

通常，Rails 视图不能访问控制器。如果您有一个需要调用的控制器方法，您应该在将控制权传递给视图之前在操作中执行它。

在您的情况下，您有一个名为的变量`@scan`，它是`Scan`该类的一个实例。这是视图试图找到方法的地方。

正如评论中所指出的，您可以通过将特定方法声明为“帮助器”方法来绕过此限制，这会将它们公开给视图。

```
ScanController < ApplicationController

  helper_method :parse

  def parse
    @scan = Scan.new
  end

  ...

end 
```

# jsp - 从“webcontent”或“WEB-INF\local”文件夹访问 i18n 属性文件

> ID：10653742
> 
> 赞同：0
> 
> 时间：2012-05-18T13:39:43.130
> 
> 标签：jsp, jstl

我正在开发一个需要 i18n 的 JSP / Servlet 页面。我在网上看到的示例代码是使用 JSTL 的 setlocal 和 setbundle 标签。他们正在将`.properties`文件添加到 java 源文件夹或`WEB-INF\classes`文件夹中。

我正在为该项目使用 Apache Tomcat 6.0.32 和 JSTL1.2 jar 文件。

我想知道我们是否可以将`.properties`文件添加到say`webcontent\i18n`或`WEB-INF\local`文件夹中。并使用 JSTL 标签访问它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:46:05.467

它必须进入类路径。它们在[`ResourceBundle`](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html)默认情况下从类路径加载它们的封面下。所以，把它放在类路径之外是行不通的。你总是可以把它们放在一个（子）包中，就像这样`/WEB-INF/classes/local/filename.properties`。然后，您应该只使用 basename`local.filename`而不是`filename`.

### 也可以看看：

*   [如何使 Java Web 应用程序国际化？](https://stackoverflow.com/questions/4276061/how-to-internationalize-a-java-web-application)

# c# - 将委托将所有事件排队并一一执行

> ID：10653743
> 
> 赞同：0
> 
> 时间：2012-05-18T13:39:46.063
> 
> 标签：c#, windows, asynchronous, delegates, client-server

我正在制作一个服务器 - 客户端项目。在这里，服务器根据客户端调用对数据库进行更改。客户端调用是异步的。我正在使用事件根据来电调用一些委托。下面的代码可以给你一个想法

```
public delegate void Client_Logging_In_Delegate(WebSocketSession session, string e);
public event Client_Logging_In_Delegate Admin_Logging_In_Event;
public void Client_Logging_In_Function(WebSocketSession session, string e)
{
    //Database -> this particular client status= true
}

public void Main()
{
    server.NewMessageReceived += new SessionEventHandler<WebSocketSession, string>     (server.WebSocketServer_NewMessageReceived);

    server.Client_Logging_In_Event = new Client_Logging_In_Delegate(server.Client_Logging_In_Function);
}

public void WebSocketServer_NewMessageReceived(WebSocketSession session, string e)
{
    string type = e.Substring(0, e.IndexOf("#"));
    if (type == "Client_Logging_In")
        Client_Logging_In_Event(session, e);
} 
```

我在同一个系统中运行两者。我还没有收到任何崩溃。但在实际情况下，客户 => 5 -> 20 。所以问题是如果两个事件同时发生，那么会发生什么？

**编辑：**

我正在为服务器部分使用第三方库“SuperWebsocket”。这个定义了 message_Received 事件。文档说它是线程安全的。我的是单线程应用程序。只有一个服务器对象。一些函数（由代表调用）有一些长代码。例如拿这个

```
public void called_By_Some_Delegate(WebSocketSession session, string e)
{
       //1) retrieve a big list from database
       //2) change the list into a dictionary object
       //3) create a string using dictionary object
       //4) send this string to the client using the "session" object
} 
```

现在，假设有两个事件到达同一个委托/函数。现在假设第一个将执行该函数并在第二个点执行。如果第二个同时访问该函数，它将更改列表。所以，我认为会有崩溃。这是我必须弄清楚的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:56:48.553

当您同时说时，我有点理解服务器中有多个线程在侦听请求和引发事件。在这种情况下，每个线程都将触发事件，并且事件处理程序将在各自的线程中运行而没有任何问题（假设事件处理程序是线程安全的）。

如果没有，并且只有一个线程在侦听套接字，那么无论如何您都是顺序的并且不应该有问题。

如果侦听线程触发另一个线程来处理传入请求，那么您再次让事件处理程序在其自己的线程上下文中运行，并且只要您的处理程序是线程安全的，那么您仍然是安全的。

我编写了以下程序来模拟服务器生成多个请求并处理相同的请求。

```
using System;
using System.Threading;
namespace AsyncFiber
{
    class Program
    {
        public event EventHandler<int> ClientEventReceived;
        public event EventHandler<int> MessageProcessed;
        static void Main(string[] args)
        {
            Program p = new Program();
            p.ClientEventReceived += p.p_ClientEventReceived;
            p.MessageProcessed += p.p_MessageProcessed;
            for (int i = 0; i < 5; i++)
                new Thread(new ThreadStart(p.target)).Start();
        }
        private void p_MessageProcessed(object sender, int e)
        {
            PrintHelper("C->" + e);
        }

        private void p_ClientEventReceived(object sender, int e)
        {
            MessageProcessed(sender, e);
        }

        void target()
        {
            while (true)
            {
                var data = new Random().Next();
                Console.WriteLine("P->" + data);
                ClientEventReceived(Thread.CurrentThread.Name, data);
            }
        }

        void PrintHelper(string message)
        {
            for (int i = 0; i < Thread.CurrentThread.ManagedThreadId; i++)
                Console.Write("  ");
            Console.Write(message);
            Console.WriteLine();
        }
    }
} 
```

因此，要回答您的问题，事件处理程序将同时在各个线程中执行。但是，数据库锁定方案应该足够清晰以处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:04:27.677

这取决于`server`调用`NewMessageReceived`事件的方式。但最可能的情况是它为此使用了一个线程池线程，并且没有防范多次调用。这意味着它可能`Client_Logging_In_Function`会同时执行两次（或更多）。

调用委托（无论它是否来自事件）与调用普通方法非常相似：没有锁定或排队，它直接在当前线程上调用（除非您使用`BeginInvoke()`）。

调用委托和直接调用方法之间的唯一区别是委托调用是间接的（在调用委托时您不选择调用哪个方法，您之前已选择）并且可以同时调用多个方法这种方式（如果委托是多个简单委托的组合）。

# c++ - 删除回调函数中new创建的指针

> ID：10653746
> 
> 赞同：0
> 
> 时间：2012-05-18T13:39:56.753
> 
> 标签：c++

我正在执行以下操作：

```
LRESURT CALLBACK WindowProc{
    .......
    Case VK_RETURN:
        int i;
        for ( i = 0; i <1000; i++) {
            int  size = determinesize(i);
            int *pttest = new int[size];
            .....(some work)....
            delete[] pttest;
        }
     ........
} 
```

但是`VK_RETURN`发生时我遇到了问题。如果我不使用`delete[] pttest`.

我的问题是：我需要删除 ptttest 吗？当我在谷歌上搜索时，几乎每个人都说每一个新的，必须有一个删除。另一个问题是：如果我将 for 循环代码`VK_RETURN`放在一个函数中，比如说`void whenvkreturn()`，那么我需要删除 pttest 吗？由于任何局部变量在返回后都会被销毁，我猜这个循环中创建的 1000 个对象会被自动删除，对吧？我不太了解堆栈，所以我发现的一些解释对我来说并不清楚。

=====

好的，有一个矢量解决方法。但是当它是这种情况时：

`TCHAR *text = new text[size];`

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:45:01.403

您总是需要删除分配的内存。对于每个**new**都应该有一个**delete**，即使它在一个函数中。您正在解决的问题可以通过使用其他具有动态大小的容器轻松解决，例如 std::vector。在本地函数中使用动态容器，它会自动释放自己分配的内存，你不用担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:45:18.420

关于您的问题，是的，您需要 delete `pttest`，除非您想故意泄漏内存。基本上，每当您使用`new`/分配某些东西时`new[]`，您应该在以后不再需要它时手动`delete`/它。`delete[]`

但是你真的应该考虑使用`std::vector`而不是使用分配的数组`new[]`。然后您不必担心使用`delete[]`,`std::vector`会在其析构函数中自动释放内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:47:17.847

如果您保留代码原样，那么您不需要使用 delete 或 new ：

```
int size = determinesize(i);
std::vector<int> test( size );
.....(some work).... 
```

基于堆栈的解决方案也可以正常工作。如果您想保持原样，那么此时您当然*不需要*删除`pttest`它，但是您必须在某个时候将其删除，并且将其从交换机中取出会增加它无法正常工作的风险并且会倾斜。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T13:53:25.060

当您在 C++ 中使用 new 或 new[] 操作创建指针时，您会在堆中分配内存。即使您在方法中执行此操作也是如此。因此，您需要酌情使用 delete 或 delete[] 来释放堆内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T15:58:01.050

作为一项规则，这些天你永远不应该使用 new[] ，当然也不应该删除。而是使用矢量。为了获得额外的效率点，重用相同的向量调整它的大小以避免分配 1000 个单独的数组：

```
vector<int> test;

for(int i = 0; i < 1000; ++i) {
    test.resize(determinsize(i));
    ...
} 
```

# java - BigDecimal 数字的格式

> ID：10653747
> 
> 赞同：3
> 
> 时间：2012-05-18T13:39:57.840
> 
> 标签：java, bigdecimal

```
BigDecimal val = BigDecimal.valueOf(0.20);
System.out.println(a); 
```

我想在 val 中存储一个值`0.20`而不是`0.2`. 我可以做什么 ？

我不认为我可以`NumberFormat`在这种情况下使用，当我使用时`NumberFormat`我必须知道我的十进制数的长度是多少！我可以有 0.20 或 0.5000，我不知道十进制数的确切长度，所以我不能使用：

```
DecimalFormat df = new DecimalFormat("#0.00"); 
```

或者

```
DecimalFormat df = new DecimalFormat("#0.00000"); 
```

也许我在点后只有 2 个数字或 5 个或更多数字，这个程序不起作用：

```
 BigDecimal a = BigDecimal.valueOf(0.20);//i give an example of 0.2 i can have 0.98...0
         System.out.println(a);

         NumberFormat nf1 = NumberFormat.getInstance();
         System.out.println(nf1.format(0.5000)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T13:44:14.673

BigDecimal 记住尾随的零 - 具有一些显着的副作用：

```
BigDecimal bd1 = new BigDecimal("0.20"); 
BigDecimal bd2 = new BigDecimal("0.2");

System.out.println(bd1);
System.out.println(bd2);
System.out.println(bd1.equals(bd2)); 
```

将打印

```
0.20
0.2
false 
```

我们需要记住，我们不能将 BiGDecimal 用于数字，其中十进制扩展有句点：

```
BigDecimal.ONE.divide(new BigDecimal(3)); 
```

将引发异常（在您的评论中部分回答您的担忧）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T13:45:17.527

您可以使用 BigDecimal 的 String 构造函数。它保留了比例（这是你想要的）。

```
BigDecimal val = new BigDecimal("0.20"); 
```

请参阅[http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#BigDecimal(java.lang.String](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#BigDecimal(java.lang.String) )

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T13:49:02.807

你将一个 double 传递给`BigDecimal.valueOf()`. 并且与`0.20`完全相同`0.2`。给它传一个String，结果会不一样，因为BigDecimal的小数位数会从String中的小数位数推导出来：

```
BigDecimal bd1 = new BigDecimal("0.20");
BigDecimal bd2 = new BigDecimal("0.2");

System.out.println(bd1.toPlainString() + ", scale = " + bd1.scale()); // 0.20, scale = 2
System.out.println(bd2.toPlainString() + ", scale = " + bd2.scale()); // 0.2, scale = 1

NumberFormat nf = NumberFormat.getInstance();

nf.setMinimumFractionDigits(bd1.scale());
System.out.println(nf.format(bd1)); // 0,20 (in French locale)

nf.setMinimumFractionDigits(bd2.scale());
System.out.println(nf.format(bd2)); // 0,2 (in French locale) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T13:44:06.030

编辑：正如评论中指出的那样，这个答案是错误的：| 谢谢安德烈亚斯_D

问题是 0.2 和 0.20 之间在数学上没有区别，所以你唯一的机会是在小数点后显示一定数量的数字。一旦将 0.2 或 0.20 存储在 a 中，`BigDecimal`它们就无法区分

# asynchronous - UI 忙时 WebResponses 被阻止

> ID：10653749
> 
> 赞同：0
> 
> 时间：2012-05-18T13:40:01.460
> 
> 标签：asynchronous, httpwebrequest, windows-phone-7.1, system.reactive

我对 Windows Phone 7 WebRequests 有一点问题。在我的程序中，很少有“网络进程”——每个进程都必须向服务器发送一条或多条 REST-s 消息。来自对该消息的响应的信息将用于下一个 REST，因此所有 WebRequest 必须以正确的顺序发送。因此，为了轻松同步所有消息，我创建了这样的方法：

```
//There was some try-catch blocks,  I cut them because they are not important 
//for the problem
public string SendString(string URL, string message)
        {
            WebRequest wr = HttpWebRequest.CreateHttp(URL);
            wr.Method = "POST";
            var req = Observable.FromAsyncPattern<Stream>(wr.BeginGetRequestStream, wr.EndGetRequestStream);
            var resp = Observable.FromAsyncPattern<WebResponse>(wr.BeginGetResponse, wr.EndGetResponse);
            WebResponse WR = req().SelectMany(reqStream =>
                {
                    byte[] stream = UTF8Encoding.UTF8.GetBytes(message);
                    reqStream.Write(stream, 0, stream.Length);
                    reqStream.Close();
                    return resp();
                })
                .First();
            Stream respStream = WR.GetResponseStream();
            StreamReader readStream = new StreamReader(respStream, UTF8Encoding.UTF8);
            String response = readStream.ReadToEnd();
            _acctualResponse = response;

            return _acctualResponse;
        } 
```

当然，“web 进程”是异步运行的：

```
Observable.Start(() => _registration.Execute(String.Empty)).Subscribe(); 
```

问题是，当 UI 线程忙时，直到 UI 线程空闲时才会响应。我不知道为什么。也许有人会帮助我。

**编辑**

我制作了一些伪图来可视化我的应用程序的结构。每个过程都必须是异步的，而且每个动作都必须等待前一个动作的结果。

![申请流程](../Images/d904bd0698b4db1f36ffe1d538b06c31.png)

**编辑 2**

部分代码`Action`，在所有情况下都非常简单，如下所示：

```
public override JsonMap.Response Perform(string token)
        {
            JsonMap.authenticationRequest dataToSend = new JsonMap.authenticationRequest
            {
                tid = token,
                platform = "wp7",
                version = "1.0.0",
                userid = ApplicationData.Instance.UserID
            };
            string jsonDataToSend = JsonConvert.SerializeObject(dataToSend,Formatting.Indented,new JsonSerializerSettings { NullValueHandling = NullValueHandling.Ignore });
            string jsonResponse = _webClient.SendString(_serviceURL, jsonDataToSend);
            Response response = JsonConvert.DeserializeObject<Response>(jsonResponse);
            return response;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:15:33.680

我怀疑你的问题是你正在打电话`First()`，这是一个阻塞电话。

每当你打电话`First()`时，你可能做错了什么。

您可能已经走上了这条“黑暗之路”，因为您的函数签名也是阻塞签名。您需要将其更改为：

```
public IObservable<string> SendString(string URL, string message) 
```

现在您可以像这样编写函数：

```
public IObservable<string> SendString(string URL, string message)
{
    WebRequest hwr = HttpWebRequest.CreateHttp(URL);
    hwr.Method = "POST";

    Func<IObservable<Stream>> getRequest = 
        Observable
            .FromAsyncPattern<Stream>(
                hwr.BeginGetRequestStream,
                hwr.EndGetRequestStream);

    Func<Stream, IObservable<WebResponse>> getResponse = ...

    Func<WebResponse, string> getResult = ...

    return
        from rq in getRequest()
        from rp in getResponse(rq)
        select getResult(rp);
} 
```

请注意，最终查询确实很整洁。

该`getResponse`函数如下所示：

```
 Func<Stream, IObservable<WebResponse>> getResponse =
        st =>
        {
            var resp =
                Observable
                    .FromAsyncPattern<WebResponse>(
                        hwr.BeginGetResponse,
                        hwr.EndGetResponse);
            var bytes = UTF8Encoding.UTF8.GetBytes(message);
            st.Write(bytes, 0, bytes.Length);
            st.Close();
            return resp();          
        }; 
```

`getResult`看起来像这样：

```
 Func<WebResponse, string> getResult =
        wr =>
        {
            using (var st = wr.GetResponseStream())
            {
                using (var sr = new StreamReader(st, UTF8Encoding.UTF8))
                {
                    return sr.ReadToEnd();
                }
            }
        }; 
```

最后，您需要订阅结果 observable 以获得结果。您可能需要调用`ObserveOn`以使调用返回到 UI 线程。

让我知道这是否有帮助。

# php - 在移动设备上隐藏 Wordpress 小部件

> ID：10653751
> 
> 赞同：0
> 
> 时间：2012-05-18T13:40:38.233
> 
> 标签：php, wordpress, mobile, version

我在使用广告时遇到了问题 - 我已将它们放在小部件中，现在该网站的[移动版本](http://nix-pix.co.uk)很糟糕 - 广告对于手机来说太大并且破坏了主题。我现在想出的是这样的：

`.mobile #widget{ display: none; }`

但问题是，`#widget`它不起作用，我不知道如何摆脱这样的小部件。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:07:00.263

没有看到任何代码或 URL，就不可能告诉您应该使用什么 CSS。但是，我的建议是根本不要使用 CSS，如果用户在移动设备上，就不要将侧边栏写入页面。

我不知道您使用什么来检测移动设备，但这是我过去使用的。不理想，但它在紧要关头完成了这项工作。

在functions.php中，添加：

```
function mobile_detected($agents)
{
    $userAgent = strtolower($_SERVER['HTTP_USER_AGENT']);
    foreach($agents as $agent)
    {
        if(strpos($userAgent,strtolower($agent)) !== false)
            return true;
    }
    return false;
} 
```

在您调用侧边栏的主题中：

```
<?php
$devices = array(
"iphone", "ipod", "ipad",
"android", "windows ce", "windows phone os",
"blackberry", "palm", "symbian", "series60"
);
if(!mobile_detected($devices))
    dynamic_sidebar('Your Sidebar');
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:12:44.643

您写的内容并没有多大意义，因为您正在编写 CSS，就好像存在这种情况一样：

```
<div class="mobile">
    <div id="widget">your ad</div>
</div> 
```

这显然是不存在的。

您可以在此处查看主题如何使用来自您网站上的 CSS 文件的 @media 查询来定位移动设备：

[http://nix-pix.co.uk/wp-content/themes/alyeska/assets/css/responsive.css](http://nix-pix.co.uk/wp-content/themes/alyeska/assets/css/responsive.css)

所以，它实际上非常简单——任何你想针对移动设备的自定义样式都可以简单地放在@media 查询中，如下所示：

```
@media(max-width:480px){
    /* All styles for mobile devices go here. */
} 
```

基本上用简单的英语说的是：“如果设备的视口为 480 像素或更小，请包含此 CSS”——这正在迅速成为针对移动设备的最现代和最流行的方式之一，因为现在有这么多。许多人认为尝试使用 javascript 或带有 PHP 的用户代理来专门针对 iPhone 或 Android 手机等是一种倒退的想法。在我看来，这些方法肯定有其目的，但并不是真正用于如此简单的事情。相反，我们使用 CSS @media 查询来定位不同的设备宽度。

好的，所以现在您要隐藏内容底部的广告区域。使用 Firebug 或 Google Chrome 的 Web 开发工具等工具检查它后，我们可以很快看到它包含在一个名为“main-bottom”的类中——

![在此屏幕截图中，我使用的是 Firebug，它是 Firefox 的扩展。](../Images/2a98b85c6ba786d11de2f255f635326e.png)

因为我们知道在 CSS 中当你引用一个类时，我们会在它前面加上一个句点，并且为了隐藏一个元素，我们可以使用[display](http://www.w3schools.com/cssref/pr_class_display.asp)属性，我们现在将它放入我们的 @media 查询中。

```
@media(max-width:480px){
    .main-bottom {
        display:none;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-10T05:55:31.123

最简单的方法是使用`Widget Options Plugin`它可以隐藏移动设备和其他设备上的小部件。它在存储库中是免费的：[https](https://wordpress.org/plugins/widget-options/) ://wordpress.org/plugins/widget-options/ 。您可以查看下面的屏幕截图。谢谢！

[![在此处输入图像描述](../Images/ba389c66dd11484a49391ab562c18f26.png)](https://i.stack.imgur.com/dvriW.png)

# python - 使用 UTF-8 进行输出时，Python ElementTree 不会转换不间断空格

> ID：10653752
> 
> 赞同：10
> 
> 时间：2012-05-18T13:40:45.150
> 
> 标签：python, xml, encoding, elementtree

我正在尝试使用 Python 的 ElementTree 解析、操作和输出 HTML：

```
import sys
from cStringIO  import StringIO
from xml.etree  import ElementTree as ET
from htmlentitydefs import entitydefs

source = StringIO("""<html>
<body>
<p>Less than &lt;</p>
<p>Non-breaking space &nbsp;</p>
</body>
</html>""")

parser = ET.XMLParser()
parser.parser.UseForeignDTD(True)
parser.entity.update(entitydefs)
etree = ET.ElementTree()

tree = etree.parse(source, parser=parser)
for p in tree.findall('.//p'):
    print ET.tostring(p, encoding='UTF-8') 
```

当我在 Mac OS X 10.6 上使用 Python 2.7 运行它时，我得到：

```
<p>Less than &lt;</p>

Traceback (most recent call last):
  File "bar.py", line 20, in <module>
    print ET.tostring(p, encoding='utf-8')
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 1120, in tostring
    ElementTree(element).write(file, encoding, method=method)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 815, in write
    serialize(write, self._root, encoding, qnames, namespaces)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 931, in _serialize_xml
    write(_escape_cdata(text, encoding))
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 1067, in _escape_cdata
    return text.encode(encoding, "xmlcharrefreplace")
UnicodeDecodeError: 'ascii' codec can't decode byte 0xa0 in position 19: ordinal not in range(128) 
```

我认为指定“encoding='UTF-8'”会处理不间断的空格字符，但显然它没有。我应该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T02:37:00.347

0xA0 是 latin1 字符，而不是 unicode 字符，并且循环中 p.text 的值是 str 而不是 unicode，这意味着为了将其编码为 utf-8，它必须首先由 Python 隐式转换为 unicode字符串（即使用解码）。当它这样做时，它假定为 ascii，因为它没有被告知其他任何内容。0xa0 不是有效的 ascii 字符，但它是有效的 latin1 字符。

您使用 latin1 字符而不是 unicode 字符的原因是 entitydefs 是名称到 latin1 编码字符串的映射。您需要可以从 htmlentitydef.name2codepoint 获得的 unicode 代码点

下面的版本应该为您修复它：

```
import sys
from cStringIO  import StringIO
from xml.etree  import ElementTree as ET
from htmlentitydefs import name2codepoint

source = StringIO("""<html>
<body>
<p>Less than &lt;</p>
<p>Non-breaking space &nbsp;</p>
</body>
</html>""")

parser = ET.XMLParser()
parser.parser.UseForeignDTD(True)
parser.entity.update((x, unichr(i)) for x, i in name2codepoint.iteritems())
etree = ET.ElementTree()

tree = etree.parse(source, parser=parser)
for p in tree.findall('.//p'):
    print ET.tostring(p, encoding='UTF-8') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T13:54:48.113

XML 仅定义`&lt;`、`&gt;`、`&apos;`和. 和其他来自HTML。所以你有几个选择。`&quot;``&amp;``&nbsp;`

1.  您可以将源更改为使用数字实体，例如`&#160;`或`&#xA0;`两者都等效于`&nbsp;`.
2.  您可以使用定义这些值的 DTD。

[XSLT FAQ](http://www.dpawson.co.uk/xsl/sect2/nbsp.html)中有一些有用的信息（它是关于 XSLT 的，但 XSLT 是使用 XML 编写的，所以同样适用）。

* * *

现在问题似乎包括堆栈跟踪；这改变了事情。你确定字符串在`UTF-8`吗？如果它解析为单个 byte `0xA0`，那么它不是`UTF-8`但更有可能是`cp1252`or `iso-8859-1`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T03:37:44.473

您`&nbsp;`正在转换为 '\xa0'，这是不间断空格的默认 (ascii) 编码（UTF-8 编码为 '\xc2\xa0'。）

```
'\xa0'.encode('utf-8') 
```

导致 UnicodeDecodeError，因为默认编解码器 ascii 最多只能工作 128 个字符并且 ord('\xa0') = 160。将默认编码设置为其他内容，即：

```
import sys
reload(sys)  # must reload sys to use 'setdefaultencoding'
sys.setdefaultencoding('latin-1')

print '\xa0'.encode('utf-8', "xmlcharrefreplace") 
```

应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-18T14:09:51.557

HTML 与 XML 不同，因此 like 标记`&nbsp;`将不起作用。理想情况下，如果您尝试通过 XML 传递该信息，您可以首先对上述数据进行 xml 编码，因此它看起来像这样：

```
<xml>
<mydata>
&lt;htm&gt;
&lt;body&gt;
&lt;p&gt;Less than &amp;lt;&lt;/p&gt;
&lt;p&gt;Non-breaking space &amp;nbsp;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</mydata>
</xml> 
```

然后在解析 XML 之后，您可以对字符串进行 HTML 解编码。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-18T15:05:10.973

我认为您在这里遇到的问题不在于您的 nbsp 实体，而在于您的打印语句。

你的错误是：

> UnicodeDecodeError：“ascii”编解码器无法解码位置 19 中的字节 0xa0：序数不在范围内（128）

我认为这是因为您正在获取一个 utf-8 字符串（来自`ET.tostring(p, encoding='utf-8')`）并试图在 ascii 终端中回显它。所以 Python 隐式地将该字符串转换为 unicode，然后再将其转换为 ascii。nbsp虽然*可以*直接用utf-8表示，但*不能*直接用ascii表示。因此错误。

尝试将输出保存到文件中，看看是否得到了预期的结果。

或者， try `print ET.toString(p, encoding='ascii')`，这应该会导致 ElementTree 使用数字字符实体来表示无法用 ascii 表示的任何内容。

# c++ - 将 STL lib 添加到 mac os x bin

> ID：10653754
> 
> 赞同：3
> 
> 时间：2012-05-18T13:41:02.847
> 
> 标签：c++, macos, stl

我下载了 STL 库并对其进行了一些测试，但该文件夹没有“配置、制作、制作安装”文件。如何将其添加到 bin 中？所以我可以一直使用

```
 #include <vector.h> 
```

代替

```
 #include "vector.h" 
```

并在我的所有项目中添加 STL 文件夹。 ![在此处输入图像描述](../Images/7b2c82b436ad713af984ec9df99b5fc3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:46:23.063

如果您安装 C++ 编译器，它将附带一个 C++ 标准库实现，其中包括您正在谈论的 STL（STLPort？）。

XCode 和 macports gcc 也包括这个。你不应该像现在这样设置它。

另请注意，标准库头文件没有`.h`后缀。所以你需要

```
#include <vector> 
```

# bash - URL 与正则表达式的比较

> ID：10653756
> 
> 赞同：0
> 
> 时间：2012-05-18T13:41:11.157
> 
> 标签：bash

```
regexp='^http:\/\/(?:www\.)?youtube.com\/watch\?(?=.*v=\w+)(?!\S+http:\/\/)(?:\S*)$'

fURL()
{
       echo -n "Enter the YouTube URL to download: "
       read URL
       if [ "$URL" != "$regexp" ]; then
               echo "${red}Invalid YouTube URL!${normal}"
               fURL;
       fi
} 
```

[我用http://www.youtube.com/watch?v=tfTWHbtv_-Y](http://www.youtube.com/watch?v=tfTWHbtv_-Y)测试我的脚本- 但它仍然说它无效。

我尝试修改代码：

```
echo $URL | grep "^http:\/\/(?:www\.)?youtube.com\/watch\?(?=[^?]*v=\w+)(?:[^\s?]+)?$"

if [ $? -ne "0" ]; then
    echo "${red}Invalid YouTube URL!${normal}"
    fURL;
else
    echo URL is good. 
```

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:43:02.447

You need to use =~ operation to compare against regexp.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:02:13.077

问题出在你的正则表达式 - 你需要转义`/`：

```
^http:\/\/(?:www\.)?youtube.com\/watch\?(?=.*v=\w+)(\S*)$ 
```

这将正确验证您的测试网址

*表达式是一个示例，未使用所有可能的 URL 进行测试*

# c# - MVVM UI 使用 WPF 控制用户依赖的可见性

> ID：10653758
> 
> 赞同：0
> 
> 时间：2012-05-18T13:41:20.363
> 
> 标签：c#, wpf, mvvm, menuitem

这更像是一个 MVVM 应用程序设计问题。我正在尝试实现一个非常基本的基于用户的权限管理，其中我的应用程序中某些控件的可见性来自当前用户角色。这是我的简化模型：

```
public class User
{
 public string UserName {get;set;}
 public Role UserRole {get;set;}
}

public enum Role
{
  Developer,
  BusinessAnalyst
}

public class MenuItemModel
{
   public ICommand Command {get;set;}
   public string Header {get;set;}
   public bool Visible {get;set;}
   private List<MenuItemModel> _Items;
   public List<MenuItemModel> Items
   {
        get { return _Items ?? (_Items = new List<MenuItemModel>()); }
        set
        {
            _Items = value;
        }
    }
} 
```

我的 MainViewModel 包含以下属性：

```
public class MainViewModel : ViewModelBase<MainViewModel>
{
    private ObservableCollection<MenuItemModel> _MainMenu;
    public ObservableCollection<MenuItemModel> MainMenu
    {
        get { return _MainMenu; }
        set
        {
            _MainMenu = value;
            NotifyPropertyChanged(x=>x.MainMenu);
        }
    }
    private User _CurrentUser;
    public User CurrentUser
    {
        get { return _CurrentUser; }
        set { 
            _CurrentUser = value;
            NotifyPropertyChanged(x=>x.CurrentUser);
        }
    }
} 
```

这是我声明和绑定菜单的 XAML：

```
<Menu DockPanel.Dock="Top" ItemsSource="{Binding Path=MainMenu}">
            <Menu.ItemContainerStyle>
                <Style>
                    <Setter Property="MenuItem.Header" Value="{Binding Path=Header}"/>
                    <Setter Property="MenuItem.ItemsSource" Value="{Binding Path=Items}"/>
                    <!-- How to bind Visibility????-->
                    <!--Setter Property="MenuItem.Visibility" /-->
                </Style>
             </Menu.ItemContainerStyle>
         </Menu> 
```

现在这里是我的要求：

1.  某些 UI 控件（例如 MenuItems）的可见性取决于 User.Role。例如：MenuItemA 应该对 Role.Developer 可见，但对 Role.BusinessAnalyst 不可见
2.  某些控件可能对多个角色可见（例如开发人员和业务分析师）

到目前为止我的两个选择

1.  创建一个自定义转换器，该转换器具有根据允许的角色派生可见性的逻辑并将其绑定到 MenuItem.Visibility 值属性。这样做的问题： a) 允许此控件的角色需要在运行时传递，因为它们来自数据库，并且您不能将 CommandParameters 绑定到角色集合。b) 转换器如何访问 User.Role 以获取可见性？
2.  在我的 UI 模型（例如 MenuItemModel）的属性中创建可见性逻辑。但是在这里我不想在我的 User 和 MenuItemModel 类之间创建依赖关系。

什么是基于 User.Role 动态派生 UI 控件可见性而不遇到紧密耦合的场景（依赖项）的最简洁方法？

谢谢！

**解决方案：**所以这就是我根据@fmunkert 的建议最终解决它的方式。请注意，我必须将 MenuItemModel.Items 属性更改为 List 才能访问“RemoveAll”方法：

```
 public MainViewModel()
    {
        //Create a new User with a Role
        InitializeUser();
        //Get all the Menus in the application
        List<MenuItemModel> allItems = GetAllMenus();
        //Remove recursively all Items that should not be visible for this user
        allItems.RemoveAll(x=>!IsVisibleToUser(x));
        //Set my MainMenu based on the filtered Menu list
        _MainMenu = new ObservableCollection<MenuItemModel>(allItems);
    }

    private void InitializeUser()
    {
        CurrentUser = new User {UserName = "apsolis", UserRole = Role.Developer};
    } 
```

这是我`MainViewModel`递归删除禁止项目的方法：

```
 /// <summary>
    /// Method to check if current MenuItem is visible to user
    /// and remove items that are forbidden to this user
    /// </summary>
    /// <param name="m"></param>
    /// <returns></returns>
    public bool IsVisibleToUser(MenuItemModel m)
    {
        if (m.Items != null && m.Items.Count > 0)
        {
            m.Items.RemoveAll(y=>!IsVisibleToUser(y));
        }
        return m.Roles == null || m.Roles.Contains(CurrentUser.UserRole);
    } 
```

这似乎工作正常

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:56:18.183

由于您在 ViewModel 中生成菜单项，我建议根本不要使用`MenuItem.Visibility`。相反，让您的 ViewModel 确定允许用户查看哪些菜单项，并仅使用该菜单项子集填充 MainMenu 集合。即您的 MainViewModel 必须知道允许用户查看哪些菜单项。

即，您将在 MainViewModel 的构造函数中使用类似的内容：

```
_MainMenu = new ObservableCollection<MenuItemModel>(_allMenuItems.Select(m => IsVisibleToUser(m))); 
```

# asp.net-mvc-3 - 无法使用 NuGet PagedList ASP.NET MVC # 查看

> ID：10653759
> 
> 赞同：15
> 
> 时间：2012-05-18T13:41:21.243
> 
> 标签：asp.net-mvc-3, razor

我不能使用以下命名空间在视图的最顶部`PagedList`使用剃须刀 `@model PagedList.IPagedList<PhoneBook.Models.Contact>``Index.cshtml`

我已经安装了 PagedList 并且我已经在我的控制器中使用了下面的代码

```
 using PagedList; 
```

控制器页面没有错误，但为什么不能在 Index.cshtml（视图）中使用命名空间？请帮忙..

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-18T15:06:50.553

BuildStarted 引用或存在于同时使用，

在控制器中

```
using PagedList;
using PagedList.Mvc; 
```

并在视图中使用

```
@model PagedList.IPagedList<PhoneBook.Models.Contact>
@using PagedList;
@using PagedList.Mvc; 
```

并使用分页

```
@Html.PagedListPager(Model, page => Url.Action("Index", new { page =
page })) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-22T20:10:41.123

重新启动 Visual Studio 为我修复了它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-06T21:57:57.503

我刚刚发现了这个问题，因为我遇到了同样的问题。我已经阅读了许多建议使用这个 PagedList 对象的教程，但是没有一个说任何关于向 web.config 文件中添加任何内容的内容。这就是我为完成这项工作所做的。我使用了来自@BuildStarted 的评论中的一些信息。我正在使用VS2010。

将此添加到 web.config 文件中：

```
<add assembly="PagedList.Mvc" namespace="PagedList.Mvc" tagPrefix="plmvc"/> 
```

所以它应该看起来像这样（剪断）：

```
<configuration>
  <system.web>
    <pages ...>
      <controls>
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
        **<add assembly="PagedList.Mvc" namespace="PagedList.Mvc" tagPrefix="plmvc"/>**
      </controls>
    </pages>
  </system.web>
</configuration> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-17T13:54:20.840

当我使用@model 时，我遇到了同样的问题

> PagedList.IPagedList

我得到错误：

> PagedList.IPagedList<> 不包含...的定义。

解决方案 ：

在 View -> Index.cshtml 中将
model.Code 替换为 model.First().Code

*   只需在所有属性之前添加 First() 即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-10T09:38:52.147

您需要在 bin/assembly 文件夹中添加参考。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-03T14:18:46.003

我相信我遇到了完全相同的问题。Visual Studio 用红色强调 PagedList 并询问“您是否缺少 using 指令或程序集引用？”。

我所要做的就是构建项目。然后 Visual Studio 停止抱怨。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-10T09:53:55.000

尝试在您的导入中使用非大写的“M **vc** ”，然后重新构建。

```
@using PagedList.Mvc;
//@using PagedList.MVC; 
```

# entity-framework - 选择数据时排除属性

> ID：10653768
> 
> 赞同：2
> 
> 时间：2012-05-18T13:42:02.920
> 
> 标签：entity-framework

我有一个具有虚拟属性 ( `public virtual List<Ingredients>`) 的类，但在某些情况下我不想获取该数据。我怎样才能做到这一点？我知道`.Include`and `.Select`，但如果我这样做，我需要在我的存储库中更改大量代码，因为我也返回一个 Queryable 和 Service 层。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T11:13:17.500

间接回答：我不会`IQueryable`在服务层中公开。出于（至少）三个原因：

*   当访问导航属性时，您必须保持上下文处于活动状态。
*   使用您的服务层的层可以深刻地影响发送到数据库的 SQL。您希望控制您的服务或存储库中的内容。
*   对服务层进行单元测试非常困难。

因此，如果您在应用程序中公开您需要*`IEnumerable`的*对象，您可以提供具有在特定场景中所需的完全加载的导航属性的对象。例如，产品实体（名称等）的维护功能将只获得裸产品（并且没有代码会访问成分）。从成分中组合产品的函数也将获取其成分。服务/存储库方法应该有参数来指定你需要什么。

如果你想 100% 保证惰性导航属性不会被访问，你需要将投影对象（或 DTO）暴露给你的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:10:39.357

默认情况下不返回相关属性，您需要使用 Include() 来指定返回相关属性。
这可能并不总是很清楚，因为如果您使用延迟加载您不需要显式请求相关属性，EF 将在请求时确定是否需要相关属性并将其添加到数据库请求中。

为了测试这一点，当您通过附加 .First() 声明它时强制执行 LINQ 查询，并查看返回的对象，该对象应该没有相关属性。

**编辑** 无法从相关属性中仅加载某些属性。如果您加载相关属性，其所有属性都将自动加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T09:20:05.283

您不能简单地构建一个类 SubClass（从 SomeCompany 继承）并包含您需要的属性，这些属性不应包含在您的代理类 (SomeCompany) 中。

例如一个类

## 某公司

```
public class SomeCompany
{
    public virtual string SomeProperty { get; set; }
    public virtual Company MyCompany { get; set; }
}

public class SomeCompanyEx : SomeCompany
{
    public string CompanyName { get; set; }

    public override Company MyCompany
    {
        get
        {
            return this.myCompany;
        }

        set
        {
            this.SetProperty(ref this.myCompany, value);

            if (value != null)
            {
                this.CompanyName = value.Name;
            }
            else
            {
                this.CompanyName = null;
            }
        }
    }
} 
```

SomeCompanyEx 类您可以使用，例如，在列表对象等中......所以您现在拥有可以在程序中使用的属性 CompanyName，但在您的代理类中没有。

# iphone - 删除子视图后重新加载 UITableView

> ID：10653772
> 
> 赞同：0
> 
> 时间：2012-05-18T13:42:17.170
> 
> 标签：iphone

我添加了`TableView`填写表格后哪些数据将动态更改。我已经在`TableView`视图控制器类上插入了表单。但无法重新加载表格视图。

`UITableView`删除子视图后如何重新加载？

请提出解决方案。

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:43:35.897

使用 - `[tableView reloadData]`。

# java - 如何从另一个类激活 loaddata()

> ID：10653780
> 
> 赞同：0
> 
> 时间：2012-05-18T13:42:38.733
> 
> 标签：java, android

我在 Main extends Activity 中有这段代码

```
 public void loaddata()
    {
        Toast.makeText(Main.this, ("Working"),Toast.LENGTH_LONG).show();
    } 
```

我在第二个扩展活动中使用它

```
 public void turnon() 
    {
        Main dp = new Main();
        dp.loaddata();
    }

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);

    okbutton = (Button) findViewById(R.id.okbutton);

    okbutton.setOnClickListener(new OnClickListener() 
    { 
        public void onClick(View arg0)
        {
              turnon();
        }
    });
} 
```

但它给了力量关闭任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:48:50.847

请创建公共类，然后将该代码放入其中然后访问它。

前任：-

```
public class GLobal{

public static void loaddata(Activity act)
    {
        Toast.makeText(act, "Working",Toast.LENGTH_LONG).show();
    }

} 
```

像这样打电话...

```
Global.loaddata(this); 
```

# javascript - var之外的jquery访问函数

> ID：10653781
> 
> 赞同：0
> 
> 时间：2012-05-18T13:42:45.343
> 
> 标签：javascript, jquery

我正在尝试从我的 var 中访问我的 var 之外的 newTokenText 函数。

```
(function ($) {

// Default settings
    var DEFAULT_SETTINGS = {
        resultsFormatter: function(item, resultSize, index){
            return "<li>" + newTokenText(item[this.propertyToSearch], resultSize, index) + "</li>"
        },
    }

   init: function(url_or_data_or_function, options) {
        var settings = $.extend({}, DEFAULT_SETTINGS, options || {});
   }

    function newTokenText(value, resultSize, index) {
        if(settings.newTokenText && resultSize == index) {
            return value + " " + settings.newTokenText;
        }
        return value;
    }

    function populate_dropdown (query, results) {
        if(results && results.length) {               
            var resultSize = results.length - 1;
            $.each(results, function(index, value) {
                var this_li = settings.resultsFormatter(value, resultSize, index);
            }
        }
    } 
```

出现错误，newTokenText 不是函数。有人可以告诉我如何访问此功能吗？

# javascript - 获取 prototype, CSSStyleRule/CSSRule mess

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-05-18T13:42:48.2931184 次This question shows research effort; it is useful and clear4This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I'm in the middle of creating a Javascript framework for my job, supporting the most modern browsers (FF 4+, Chrome, Opera 11+, IE8+). I'm having some problems trying to extend the `prototype` of the style rules (suppose `rule` is a style rule):

1.  In Opera (v. 11.64 so far) there's no `CSSStyleRule` object, even if `String(rule) === "[object CSSStyleRule]"`. It's still true that `rule instanceof CSSRule`, but `CSSRule.prototype` is undefined. The only way I know to get the right prototype is `rule.__proto__`.
2.  In other browsers (for example, IE) I wish to define the `parentStyleSheet` property. `"parentStyleSheet" in CSSStyleRule.prototype` is always false, and I preferably don't want to override the native implementation since the a soft coded one isn't exactly cheap (at least, the first time it's run).

Having a style rule available would be enough to let me go on, but these two points are problems since I'm working on a framework, which is defined *before* the document is loaded, so I can't add `<style>` elements to the DOM.

So, what I'm asking is:

1.  Is there a way to create a dummy style rule (and eventually its parent style sheet) without the need to attach it to the DOM?
2.  How can access to the style rule prototype in Opera?

I fear the answer to the first question is "no".

[javascript](/tags/javascript "show questions tagged 'javascript'")[html](/tags/html "show questions tagged 'html'")4

## 1 回答 1

This answer is useful0

> 在加载文档之前，所以我不能向 DOM 添加元素

如果你不能追加到 document.head 那么你可以做丑陋的`document.write('<link rel="stylesheet" ...`. 然而，AFAIK 这不是问题，只要您附加到 document.head - 这是我们在我们的框架中所做的：

```
<script> (function(){ var s='blueskin'; var link=document.createElement('link'); var h=document.getElementsByTagName('head')[0]; link.type='text/css'; link.rel='stylesheet'; link.href='/skins/'+s+'.css'; h&&h.appendChild(link); })(); </script> 
```

为外部 css 文件动态添加样式表：

```
var link = document.createElement('link'); link.setAttribute('rel', 'stylesheet'); link.type = 'text/css'; link.href = 'http://example.com/stylesheet.css'; document.head.appendChild(link); 
```

如果您将 CSS 作为字符串，那么您可以`style`使用动态添加元素（这适用于我使用的所有浏览器，我认为这适用于 Opera，但我最近没有尝试过）：

```
var styleElement = document.createElement('style'); styleElement.type = 'text/css'; styleElement.rel = 'stylesheet'; setCss(styleElement, css); document.head.appendChild(styleElement); function setCss(styleElement, css) { if (styleElement.styleSheet) { // IE styleElement.styleSheet.cssText = css || ''; } else { var firstChild = styleElement.firstChild; firstChild && styleElement.removeChild(firstChild); var textnode = document.createTextNode(css || ''); styleElement.appendChild(textnode); } } 
```

如果您想做更复杂的事情，cssFx 项目会动态修复歌剧元素的[CSS](http://imsky.github.com/cssFx/)。`<link rel="stylesheet"`

如果您不想添加到 document.head，那么您也可以将子样式表添加到现有样式表（相当于`@import`），尽管我没有相应的片段。

最后，如果样式表需要进入正文，则必须使用 onload 或 jQuery $(myReadyFn); 事件处理程序。

于 2012-05-29T03:50:16.567 回答

#### Related

[1](/questions/16739508 "Question score (upvotes - downvotes)")[c# - Trying to understand this use of SelectMany](/questions/16739508)[1](/questions/16739514 "Question score (upvotes - downvotes)")[javascript - Changing G+ url parameter without refreshing the page](/questions/16739514)[1](/questions/16739517 "Question score (upvotes - downvotes)")[java - 仅当代码覆盖率增加时有条件地允许签入](/questions/16739517)[1](/questions/16739527 "Question score (upvotes - downvotes)")[sql - 在 SQL 中有效地查找 2 lat/longs 之间的距离](/questions/16739527)[2](/questions/16739528 "Question score (upvotes - downvotes)")[c# - 使用带有 Stream、StreamReader 和 WebResponse 的语句](/questions/16739528)[1](/questions/16739529 "Question score (upvotes - downvotes)")[jquery - selectedIndex 选择器（检查选择数组是否有 selectedIndex > 0）](/questions/16739529)[1](/questions/16739530 "Question score (upvotes - downvotes)")[c++ - GpuMat::upload 在线程中调用时停止？](/questions/16739530)[1](/questions/16739531 "Question score (upvotes - downvotes)")[sql-server-2008 - sql server 2008 not generating random value](/questions/16739531)[3](/questions/16739533 "Question score (upvotes - downvotes)")[c - Windows 共享内存段](/questions/16739533)[0](/questions/16739536 "Question score (upvotes - downvotes)")[c# - c# WinForm Inherited child (Form) cannot access parent collection property when parent has item填充](/questions/16739536)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：10653782
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# sitecore - Sitecore Mobile detection

> ID：10653783
> 
> 赞同：2
> 
> 时间：2012-05-18T13:42:48.730
> 
> 标签：sitecore

I cant seem to get mobile detection working. I added the following "mobile" web.config changes:

```
<site name="mobile" hostName="m.localhost" device="mobile" virtualFolder="/" physicalFolder="/" rootPath="/sitecore/content" startItem="/home" database="web" domain="extranet" allowDebug="true" cacheHtml="true" htmlCacheSize="10MB" registryCacheSize="0" viewStateCacheSize="0" xslCacheSize="5MB" filteredItemsCacheSize="2MB" enablePreview="true" enableWebEdit="true" enableDebugger="true" disableClientData="false" />

<site name="website" virtualFolder="/" physicalFolder="/" rootPath="/sitecore/content" startItem="/home" database="web" domain="extranet" allowDebug="true" cacheHtml="true" htmlCacheSize="10MB" registryCacheSize="0" viewStateCacheSize="0" xslCacheSize="5MB" filteredItemsCacheSize="2MB" enablePreview="true" enableWebEdit="true" enableDebugger="true" disableClientData="false" /> 
```

I also added a new device called "Mobile" to the device list. From what I understand if someone visits m.localhost (dev URL, yes I know) no matter the device I would expect it to use the "Mobile" device presentation. It's not, its using the standard one. If I specify sc_device=mobile it does load the "Mobile" device layout. Any thoughts?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:36:32.343

你应该检查几件事：

*   该设置可能区分大小写，请尝试在设备属性中将 Mobile 大写
*   确保设备已发布
*   确保在点击 URL 时获得正确的站点——尝试输出 Sitecore.Context.Site.Name 或使用[Glimpse](https://www.sitecore.net/unitedkingdom/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/04/Sitecore-Users-Virtual-Group-April-2012-Meeting-The-Sitecore-Plug-in-for-Glimpse.aspx)之类的工具进行调试。如果不是，请确保您的主机名完全匹配，并且移动网站首先出现在您的网站列表中。
*   也许尝试使用 defaultDevice 属性而不是站点上的 device 属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:08:56.453

我想您也应该在“网站”站点中添加一个主机名。并且该设备可能区分大小写。

您还可以扩展 Sitecore httpRequestBegin 管道，以根据浏览器的 USER_AGENT 字符串识别要使用的设备，并在同一站点上下文中切换设备。

请参阅此处如何操作：http: [//briancaos.wordpress.com/2012/04/12/identifying-mobile-devices-in-sitecore/](http://briancaos.wordpress.com/2012/04/12/identifying-mobile-devices-in-sitecore/)

# android - How to block installation of other application using device administrator app in android

> ID：10653787
> 
> 赞同：4
> 
> 时间：2012-05-18T13:42:52.760
> 
> 标签：android

How to block installation of other application using device administrator app in android. How can we code it to restrict the installation of the application using device administration application?

please help me out.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:42:28.783

据我所知，对于 ICS (<= 3.2) 的 android 版本，您的应用程序（设备管理员）无法阻止安装其他应用程序。即使安装/卸载了新应用程序，您也只能处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:47:39.320

我想您应该为此操作创建一个接收器 `android.app.action.ACTION_INSTALL_PACKAGE`检查该程序包是否是您要阻止的程序包，还请按照 Android 页面上有关如何创建[设备管理应用程序的说明进行操作](http://developer.android.com/guide/topics/admin/device-admin.html)

# c - How to map /proc/bus/usb/devices entry to a /dev/sdX device?

> ID：10653794
> 
> 赞同：4
> 
> 时间：2012-05-18T13:43:17.217
> 
> 标签：c, linux, usb-drive

I need to know how I can figure out to which entry in /proc/bus/usb/devices a /dev/sdX device maps to. Basically, I need to know the vendor id and product id of a given USB stick (which may not have a serial number).

In my case, I have this entry for my flash drive in /proc/bus/usb/devices:

```
T:  Bus=01 Lev=01 Prnt=01 Port=00 Cnt=01 Dev#=  6 Spd=480 MxCh= 0
D:  Ver= 2.00 Cls=00(>ifc ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=0781 ProdID=5530 Rev= 2.00
S:  Manufacturer=SanDisk
S:  Product=Cruzer
S:  SerialNumber=0765400A1BD05BEE
C:* #Ifs= 1 Cfg#= 1 Atr=80 MxPwr=200mA
I:* If#= 0 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=usb-storage
E:  Ad=81(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms
E:  Ad=02(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms 
```

I happen to know that in my case it is /dev/sda, but I'm not sure how I can figure this out in code. My first approach was to loop through all /dev/sdXX devices and issue a SCSI_IOCTL_GET_BUS_NUMBER and/or SCSI_IOCTL_GET_IDLUN request, but the information returned doesn't help me match it up:

```
/tmp # ./getscsiinfo /dev/sda
SCSI bus number: 8
ID: 00
LUN: 00
Channel: 00
Host#: 08
four_in_one: 08000000
host_unique_id: 0 
```

I'm not sure how I can use the SCSI bus number or the ID, LUN, Channel, Host to map it to the entry in /proc/bus/usb/devices. Or how I could get the SCSI bus number from the /proc/bus/usb/001/006 device, which is a usbfs device and doesn't appear to like the same ioctl's:

```
/tmp # ./getscsiinfo /proc/bus/usb/001/006
Could not get bus number: Inappropriate ioctl for device 
```

Here's the test code for my little getscsiinfo test tool:

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <fcntl.h>
#include <errno.h>
#include <scsi/scsi.h>
#include <scsi/sg.h>
#include <sys/ioctl.h>

struct scsi_idlun
{
    int four_in_one;
    int host_unique_id;
};

int main(int argc, char** argv) {
    if (argc != 2)
        return 1;

    int fd = open(argv[1], O_RDONLY | O_NONBLOCK);
    if (fd < 0)
    {
        printf("Error opening device: %m\n");
        return 1;
    }

    int busNumber = -1;
    if (ioctl(fd, SCSI_IOCTL_GET_BUS_NUMBER, &busNumber) < 0)
    {
        printf("Could not get bus number: %m\n");
        close(fd);
        return 1;
    }

    printf("SCSI bus number: %d\n", busNumber);

    struct scsi_idlun argid;
    if (ioctl(fd, SCSI_IOCTL_GET_IDLUN, &argid) < 0)
    {
        printf("Could not get id: %m\n");
        close(fd);
        return 1;
    }

    printf("ID: %02x\n", argid.four_in_one & 0xFF);
    printf("LUN: %02x\n", (argid.four_in_one >> 8) & 0xFF);
    printf("Channel: %02x\n", (argid.four_in_one >> 16) & 0xFF);
    printf("Host#: %02x\n", (argid.four_in_one >> 24) & 0xFF);
    printf("four_in_one: %08x\n", (unsigned int)argid.four_in_one);
    printf("host_unique_id: %d\n", argid.host_unique_id);

    close(fd);
    return 0;
} 
```

Does anyone have any idea?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:23:18.723

`udevadm`能够实现您想要实现的目标。

```
udevadm info -a -p $(udevadm info -q path -n /dev/sda) 
```

`udevadm`的消息来源会告诉你它是如何完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T14:14:28.377

我相信您可以使用 libudev 库收集此类信息。

以下是有关它的一些详细信息：[http ://www.signal11.us/oss/udev/](http://www.signal11.us/oss/udev/)

我在上面的网站上发现了类似的东西：

> .. 使用libudev，我们将能够检查设备，包括它们的供应商ID (VID)、产品ID (PID)、序列号和设备字符串，而无需打开设备。此外，libudev 将准确地告诉我们设备节点在 /dev 中的位置，从而为应用程序提供一种强大且独立于分发的方式来访问设备。...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-14T01:15:03.683

这并不是那么容易，也没有很好的记录（至少从高层次的角度来看）。以下内容应该在 3.1 版以上的内核中工作（至少）。

我发现最简单（可能不是唯一的方法）是从块设备条目导航并测试每个块设备，直到找到与 USB 条目匹配的块设备。

例如，给定一个块设备`/sys/block`，例如`sdb`，您可以像这样找到硬件设备描述符条目：

```
# cd /sys/block
# cd $(readlink sdb); cd ../../../../../..
# ls -l
total 0
drwxr-xr-x 6 root root     0 Aug 14 10:47 1-1:1.0
-rw-r--r-- 1 root root  4096 Aug 14 10:52 authorized
-rw-r--r-- 1 root root  4096 Aug 14 10:52 avoid_reset_quirk
-r--r--r-- 1 root root  4096 Aug 14 10:47 bcdDevice
-rw-r--r-- 1 root root  4096 Aug 14 10:49 bConfigurationValue
-r--r--r-- 1 root root  4096 Aug 14 10:47 bDeviceClass
-r--r--r-- 1 root root  4096 Aug 14 10:49 bDeviceProtocol
-r--r--r-- 1 root root  4096 Aug 14 10:49 bDeviceSubClass
-r--r--r-- 1 root root  4096 Aug 14 10:49 bmAttributes
-r--r--r-- 1 root root  4096 Aug 14 10:49 bMaxPacketSize0
-r--r--r-- 1 root root  4096 Aug 14 10:49 bMaxPower
-r--r--r-- 1 root root  4096 Aug 14 10:49 bNumConfigurations
-r--r--r-- 1 root root  4096 Aug 14 10:49 bNumInterfaces
-r--r--r-- 1 root root  4096 Aug 14 10:49 busnum
-r--r--r-- 1 root root  4096 Aug 14 10:52 configuration
-r--r--r-- 1 root root 65553 Aug 14 10:47 descriptors
-r--r--r-- 1 root root  4096 Aug 14 10:52 dev
-r--r--r-- 1 root root  4096 Aug 14 10:49 devnum
-r--r--r-- 1 root root  4096 Aug 14 10:52 devpath
lrwxrwxrwx 1 root root     0 Aug 14 10:47 driver -> ../../../../../../bus/usb/drivers/usb
drwxr-xr-x 3 root root     0 Aug 14 10:52 ep_00
-r--r--r-- 1 root root  4096 Aug 14 10:47 idProduct
-r--r--r-- 1 root root  4096 Aug 14 10:47 idVendor
-r--r--r-- 1 root root  4096 Aug 14 10:52 ltm_capable
-r--r--r-- 1 root root  4096 Aug 14 10:47 manufacturer
-r--r--r-- 1 root root  4096 Aug 14 10:49 maxchild
lrwxrwxrwx 1 root root     0 Aug 14 10:52 port -> ../1-0:1.0/port1
drwxr-xr-x 2 root root     0 Aug 14 10:52 power
-r--r--r-- 1 root root  4096 Aug 14 10:47 product
-r--r--r-- 1 root root  4096 Aug 14 10:52 quirks
-r--r--r-- 1 root root  4096 Aug 14 10:47 removable
--w------- 1 root root  4096 Aug 14 10:52 remove
-r--r--r-- 1 root root  4096 Aug 14 10:47 serial
-r--r--r-- 1 root root  4096 Aug 14 10:49 speed
lrwxrwxrwx 1 root root     0 Aug 14 10:47 subsystem -> ../../../../../../bus/usb
-rw-r--r-- 1 root root  4096 Aug 14 10:47 uevent
-r--r--r-- 1 root root  4096 Aug 14 10:52 urbnum
-r--r--r-- 1 root root  4096 Aug 14 10:49 version 
```

[（您可以在 BeyondLogic 网站上](http://www.beyondlogic.org/usbnutshell/usb5.shtml)找到有关 USB 描述符内容的优秀文档。 ）

鉴于上述情况，您应该能够将一个或多个 USB 设备字段映射到`/proc/bus/usb/devices`. 我发现序列号是最容易匹配的，所以如果你是`cat serial`上面的，你会得到与列出的相同的序列号：

```
T:  Bus=01 Lev=01 Prnt=01 Port=00 Cnt=01 Dev#=  2 Spd=480 MxCh= 0
D:  Ver= 2.00 Cls=00(>ifc ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=0781 ProdID=5575 Rev=01.26
S:  Manufacturer=SanDisk
S:  Product=Cruzer Glide
S:  SerialNumber=4C530100801115115112
C:  #Ifs= 1 Cfg#= 1 Atr=80 MxPwr=200mA
I:  If#= 0 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=usb-storage 
```

如果您转到`/sys/block`，您可以在每个设备的存储驱动程序 sysfs 条目中列出主机设备条目的完整路径。通常，我使用一些编程方式而不是在 shell 提示符下执行此操作，但在这里您可以看到链接本身：

```
# ls -l sd*
lrwxrwxrwx 1 root root 0 Aug 14 10:45 sda -> ../devices/pci0000:00/0000:00:10.0/host32/target32:0:0/32:0:0:0/block/sda
lrwxrwxrwx 1 root root 0 Aug 14 10:47 sdb -> ../devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb1/1-1/1-1:1.0/host33/target33:0:0/33:0:0:0/block/sdb 
```

请注意，您不能对链接中看到的数字做出任何假设。根据总线子系统，映射可能完全不同。例如，在 Raspberry Pi 上，它看起来像这样：

```
# ls -l sd*
lrwxrwxrwx 1 root root 0 Aug 13 23:54 sda -> ../devices/platform/soc/3f980000.usb/usb1/1-1/1-1.4/1-1.4:1.0/host3/target3:0:0/3:0:0:0/block/sda
lrwxrwxrwx 1 root root 0 Aug 13 23:54 sdb -> ../devices/platform/soc/3f980000.usb/usb1/1-1/1-1.3/1-1.3:1.0/host4/target4:0:0/4:0:0:0/block/sdb 
```

因此，最好的方法是采用顶部列出的方法并相对于存储驱动程序导航以找到 USB 设备描述符。

我很好奇对此有更权威的答案。上面的方法是通过反复试验得出的，但已经在几种不同的设备和内核上运行，没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-16T02:16:22.973

您可以使用 /proc/scsi/scsi，而不是使用用于 usbfs 的 proc/bus/usb。在那里，您可以找到具有特定通道 ID 和 LUN 编号的供应商和序列号。

# sql-server - SCCM 2012 Install / SQL Server 2008 R2 Connect

> ID：10653795
> 
> 赞同：0
> 
> 时间：2012-05-18T13:43:20.043
> 
> 标签：sql-server, sccm

We are working to install SCCM 2012 using SQL Server 2008 R2 as our Database Target.

**About our environment.**

*   SCCM server is part of of "Domain A" and SQL Server is Part of "Domain B". A two trust is between the two.
*   SQL Server is running CU 6 (10.50.1765).
*   I've enabled: Named Pipes, TCIP, Disable Dynamic Ports and set the Port to 1433
*   SQL Server is running under a named instance
*   I granted the SCCM Server full access and as well as the domain account being used to do the install.
*   The default collation is set to "SQL_Latin1_General_CP1_CI_AS

To rule out firewall problems we ran a PS script to test the connectivity to the server\instance and it checked out ok.

We are getting the error.

Setup is unable to connect to SQL Server with the connection information provided. Verify the following:

The sql server and instance names are entered correctly The specified sql server instance is not configured to use dynamic ports If a firewall is enabled on the SQL Server, inbound rules exists to allow connection to the correct ports. The account used to run Setup has permissions to connect to the specified SQL Server Instance.

Any assistance would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:58:56.120

可以在此处找到不同版本的 SQL Server 所需的不同修补程序的详细信息：

[http://technet.microsoft.com/en-us/library/gg682077#BKMK_SupConfigSQLDBconfig](http://technet.microsoft.com/en-us/library/gg682077#BKMK_SupConfigSQLDBconfig)

支持的最低配置包括：

*   具有最低累积更新 9 的 SQL Server 2008 SP2
*   具有最低累积更新 4 的 SQL Server 2008 SP3
*   SQL Server 2008 R2 SP1 和最低累积更新 6

System Center Configuration Manager 2012 不支持 SQL Server Express（任何版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:56:48.210

我们终于想通了。

我们检查的东西。

使用查询启用 CLR 任何 IP 上都没有动态端口 升级到 2008 R2 CU 6 使用查询添加了 SCCM 计算机作为系统管理员

最后，如果您处于具有多个租户的环境中（我们为多个学区提供服务），则无法安装 Windows SUS 并指向不同的服务器。预检查会自动检查与 SUS 相同的数据库服务器。我们卸载了它（out 指向一个较旧的数据库服务器），然后它就像一个冠军一样工作。

# jquery - 在页面加载结束时加载 webapp 的按钮？

> ID：10653801
> 
> 赞同：0
> 
> 时间：2012-05-18T13:43:50.060
> 
> 标签：jquery, web-applications, button

我正在开发[该网站](http://www.bunch-it.com)，但我的问题是结果页面上的按钮首先加载为普通的 html 按钮，而不是由我使用的 jquery 按钮功能塑造。是否有任何解决方案可以从一开始就将这些按钮显示为形状？可能我可以将它们隐藏到页面加载结束吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:50:21.097

加载正文后立即调用 jquery 函数。或使用 jquery [.ready()](http://api.jquery.com/ready/)事件

```
<script>
  $(document).ready(function () {
   shape_box(); //your box shaping function
});
  </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:45:31.910

最快的方法是检查 jquery 在默认状态下将哪些样式类应用于您的按钮，然后自己将这些相同的类添加到 html 模板中。这也适用于任何其他 jquery 样式的元素。

# android - Logcat real-time monitoring and notify on assert

> ID：10653803
> 
> 赞同：0
> 
> 时间：2012-05-18T13:43:59.407
> 
> 标签：android, macos, logcat, growlnotify

When developing on Android, I sometimes miss some asserts in the console (logcat), so I would like to be notified whenever an "Assert" message comes in the logcat, with a "growl" notification for example (I'm on Mac OS X).

I tried this simple command:

```
adb logcat | grep Assert | growlnotify 
```

but it does not send any notification until I kill the logcat process.

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:43:44.150

好的，我已经能够使它工作，但是我必须使用外部脚本：

**咆哮断言.sh**

```
#!/bin/bash
while read; do
    COUNT=`echo "$REPLY" | grep -c Assert`
    if [ $COUNT -ne 0 ]; then
        echo "$REPLY" | growlnotify -t "Assert on logcat"
    fi
done 
```

然后在控制台中使用这个单行代码启动监控：

```
while [ 1 ]; do adb logcat -sv time *:E | growl-on-assert.sh; done 
```

无限循环很有用，因此**adb**可以在设备连接/断开连接时自动重新连接。

欢迎任何改进，例如在同时连接多个设备/模拟器的情况下启动并行监控，或者发送电子邮件而不是*咆哮*通知。;-)

# javascript - 使 WebWorkers 成为一个安全的环境

> ID：10653809
> 
> 赞同：73
> 
> 时间：2012-05-18T13:44:32.507
> 
> 标签：javascript, web-worker

为了获得一个能够在浏览器中运行任意 javascript 代码的界面，并且没有典型的 yo-mama 笑话大小的安全漏洞，[Esailija](https://stackoverflow.com/users/995876/esailija)建议使用[Web Workers](http://www.whatwg.org/specs/web-apps/current-work/multipage/workers.html)。它们在半沙盒环境中运行（没有 DOM 访问权限并且已经在浏览器中）并且可以被杀死，因此用户不能将它们置于无限循环中。

这是他提出的例子：http: [//tuohiniemi.fi/~runeli/petka/workertest.html](http://tuohiniemi.fi/~runeli/petka/workertest.html)（打开你的控制台）

[jsfiddle](http://jsfiddle.net/BwgKn/4/)（仅限谷歌浏览器）

现在，这似乎是一个很好的解决方案；但是，它是完整的（或接近完整的）吗？有什么明显的缺失吗？

整个事情（因为它连接到一个机器人）可以在 github 上找到：[worker](https://github.com/Zirak/SO-ChatBot/blob/master/source/codeWorker.js) , [evaluator](https://github.com/Zirak/SO-ChatBot/blob/master/source/eval.js)

主要的：

```
workercode = "worker.js";

function makeWorkerExecuteSomeCode( code, callback ) {
    var timeout;

    code = code + "";
    var worker = new Worker( workercode );

    worker.addEventListener( "message", function(event) {
        clearTimeout(timeout);
        callback( event.data );
    });

    worker.postMessage({
        code: code
    });

    timeout = window.setTimeout( function() {
        callback( "Maximum execution time exceeded" );
        worker.terminate();
    }, 1000 );
}

makeWorkerExecuteSomeCode( '5 + 5', function(answer){
    console.log( answer );
});

makeWorkerExecuteSomeCode( 'while(true);', function(answer){
    console.log( answer );
});

var kertoma = 'function kertoma(n){return n === 1 ? 1 : n * kertoma(n-1)}; kertoma(15);';

makeWorkerExecuteSomeCode( kertoma, function(answer){
    console.log( answer );
}); 
```

工人：

```
var global = this;

/* Could possibly create some helper functions here so they are always available when executing code in chat?*/

/* Most extra functions could be possibly unsafe */

    var wl = {
        "self": 1,
        "onmessage": 1,
        "postMessage": 1,
        "global": 1,
        "wl": 1,
        "eval": 1,
        "Array": 1,
        "Boolean": 1,
        "Date": 1,
        "Function": 1,
        "Number" : 1,
        "Object": 1,
        "RegExp": 1,
        "String": 1,
        "Error": 1,
        "EvalError": 1,
        "RangeError": 1,
        "ReferenceError": 1,
        "SyntaxError": 1,
        "TypeError": 1,
        "URIError": 1,
        "decodeURI": 1,
        "decodeURIComponent": 1,
        "encodeURI": 1,
        "encodeURIComponent": 1,
        "isFinite": 1,
        "isNaN": 1,
        "parseFloat": 1,
        "parseInt": 1,
        "Infinity": 1,
        "JSON": 1,
        "Math": 1,
        "NaN": 1,
        "undefined": 1
    };

    Object.getOwnPropertyNames( global ).forEach( function( prop ) {
        if( !wl.hasOwnProperty( prop ) ) {
            Object.defineProperty( global, prop, {
                get : function() {
                    throw new Error( "Security Exception: cannot access "+prop);
                    return 1;
                }, 
                configurable : false
            });    
        }
    });

    Object.getOwnPropertyNames( global.__proto__ ).forEach( function( prop ) {
        if( !wl.hasOwnProperty( prop ) ) {
            Object.defineProperty( global.__proto__, prop, {
                get : function() {
                    throw new Error( "Security Exception: cannot access "+prop);
                    return 1;
                }, 
                configurable : false
            });    
        }
    });

onmessage = function( event ) {
    "use strict";
    var code = event.data.code;
    var result;
    try {
        result = eval( '"use strict";\n'+code );
    }
    catch(e){
        result = e.toString();
    }
    postMessage( "(" + typeof result + ")" + " " + result );
}; 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-29T09:42:24.173

当前代码（如下所列）已经在 Stackoverflow javascript 聊天室中使用了一段时间，到目前为止，最棘手的问题是`Array(5000000000).join("adasdadadasd")`当我运行代码执行器机器人时，我会立即崩溃一些浏览器选项卡。Monkeypatching`Array.prototype.join`似乎已经解决了这个问题，并且 50 毫秒的最大执行时间对于任何其他占用内存或使浏览器崩溃的尝试都有效。

```
var global = this;

/* Could possibly create some helper functions here so they are always available when executing code in chat?*/

/* Most extra functions could be possibly unsafe */

var wl = {
    "self": 1,
    "onmessage": 1,
    "postMessage": 1,
    "global": 1,
    "wl": 1,
    "eval": 1,
    "Array": 1,
    "Boolean": 1,
    "Date": 1,
    "Function": 1,
    "Number" : 1,
    "Object": 1,
    "RegExp": 1,
    "String": 1,
    "Error": 1,
    "EvalError": 1,
    "RangeError": 1,
    "ReferenceError": 1,
    "SyntaxError": 1,
    "TypeError": 1,
    "URIError": 1,
    "decodeURI": 1,
    "decodeURIComponent": 1,
    "encodeURI": 1,
    "encodeURIComponent": 1,
    "isFinite": 1,
    "isNaN": 1,
    "parseFloat": 1,
    "parseInt": 1,
    "Infinity": 1,
    "JSON": 1,
    "Math": 1,
    "NaN": 1,
    "undefined": 1
};

Object.getOwnPropertyNames( global ).forEach( function( prop ) {
    if( !wl.hasOwnProperty( prop ) ) {
        Object.defineProperty( global, prop, {
            get : function() {
                throw "Security Exception: cannot access "+prop;
                return 1;
            }, 
            configurable : false
        });    
    }
});

Object.getOwnPropertyNames( global.__proto__ ).forEach( function( prop ) {
    if( !wl.hasOwnProperty( prop ) ) {
        Object.defineProperty( global.__proto__, prop, {
            get : function() {
                throw "Security Exception: cannot access "+prop;
                return 1;
            }, 
            configurable : false
        });    
    }
});

Object.defineProperty( Array.prototype, "join", {

    writable: false,
    configurable: false,
    enumerable: false,

    value: function(old){
        return function(arg){
            if( this.length > 500 || (arg && arg.length > 500 ) ) {
                throw "Exception: too many items";
            }

            return old.apply( this, arguments );
        };
    }(Array.prototype.join)

});

(function(){
    var cvalues = [];

    var console = {
        log: function(){
            cvalues = cvalues.concat( [].slice.call( arguments ) );
        }
    };

    function objToResult( obj ) {
        var result = obj;
        switch( typeof result ) {
            case "string":
                return '"' + result + '"';
                break;
            case "number":
            case "boolean":
            case "undefined":
            case "null":
            case "function":
                return result + "";
                break;
            case "object":
                if( !result ) {
                    return "null";
                }
                else if( result.constructor === Object || result.constructor === Array ) {
                    var type = ({}).toString.call( result );
                    var stringified;
                    try {
                        stringified = JSON.stringify(result);
                    }
                    catch(e) {
                        return ""+e;
                    }
                    return type + " " + stringified;
                }
                else {
                    return ({}).toString.call( result );
                }
                break;

        }

    }

    onmessage = function( event ) {
        "use strict";
        var code = event.data.code;
        var result;
        try {
            result = eval( '"use strict";\n'+code );
        }
        catch(e) {
            postMessage( e.toString() );
            return;
        }
        result = objToResult( result );
        if( cvalues && cvalues.length ) {
            result = result + cvalues.map( function( value, index ) {
                return "Console log "+(index+1)+":" + objToResult(value);
            }).join(" ");
        }
        postMessage( (""+result).substr(0,400) );
    };

})(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-07T09:40:37.427

尽管表面上不允许访问`XMLHttpRequest`（因为它没有被列入白名单），但问题中显示的当前代码（2014-11-07）仍然允许代码访问它。

如果我将代码放在网页和工作人员组合中的问题（或接受的答案）中，并在 Chrome 38 上执行以下代码：

```
makeWorkerExecuteSomeCode('event.target.XMLHttpRequest', function (answer) { console.log( answer ); }); 
```

结果是：

```
function XMLHttpRequest() { [native code] } 
```

但是它在 FF 中不起作用。Chrome中的错误？

我发现的另一件事，但似乎并没有把兔子洞引向很远的地方，那就是恢复`console.log`。这适用于 FF 31 但不适用于 Chrome 38：

```
makeWorkerExecuteSomeCode(
    'var c = self.__proto__.__proto__.__lookupGetter__("console").call(self); c.log("FOO");', 
    function (answer) { console.log(answer) }); 
```

这将登录`"FOO"`到控制台，而不会通过`console.log`网络工作者提供的虚假信息。上面的代码使用`self`，它可以被列入黑名单（通过从白名单中删除）但`this`也`global`可以工作。我发现`global`在 FF 和 Chrome 上尝试黑名单失败：工作人员因错误而死亡。

注意：Chrome 拒绝加入黑名单`Intl`，因此必须将其添加到白名单中才能运行代码。

# php - ftp_connect 不适用于某些主机

> ID：10653813
> 
> 赞同：0
> 
> 时间：2012-05-18T13:44:41.210
> 
> 标签：php, ftp

ftp_connect 功能对某些主机不起作用，而如果我通过 ftp 软件连接它，它就可以工作。虽然它对其他网站做得很好。

可能的原因是什么？或者有没有其他更好的方法可以连接到 ftp 来复制和删除文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:33:44.833

您可能对“被动 FTP”的要求有疑问。查看 PHP 的[ftp_pasv()](http://php.net/ftp_pasv)函数。

还要记住，FTP 是一种古老的、不安全的协议。它早于大多数互联网，并且在复杂的网络环境中工作可能很挑剔。如果您可以切换到[SFTP](http://ir.php.net/manual/en/function.ssh2-sftp.php)或[SCP](http://www.php.net/manual/en/function.ssh2-scp-recv.php)，甚至通过 HTTPS 切换到[WebDAV](http://code.google.com/p/sabredav/wiki/WebDAVClient)，您可能会过得更好。

# ios - 如何将多个地名转换为坐标？

> ID：10653819
> 
> 赞同：1
> 
> 时间：2012-05-18T13:45:26.953
> 
> 标签：ios, ios5, geocoding, core-location

我正在尝试使用以下代码将地理编码 2 地名转发到坐标中：

> CLGeocoder *geocoder = [[CLGeocoder alloc] init];
> 
> ```
> [geocoder geocodeAddressString:place 
>                       inRegion:nil 
>              completionHandler:^(NSArray* placemarks, NSError* error){
>                  NSLog(@"a");
>                  NSLog(@"count %d", [placemarks count]);
>                  for (CLPlacemark* aPlacemark in placemarks) {
>                      CLLocationCoordinate2D coord = aPlacemark.location.coordinate;
> 
>                      NSLog(@"%f, %f", coord.latitude, coord.longitude);
>                  }
>              }];
> 
> [geocoder geocodeAddressString:place 
>                       inRegion:nil 
>              completionHandler:^(NSArray* placemarks, NSError* error){
>                  NSLog(@"b");
>                  NSLog(@"count %d", [placemarks count]);
>                  for (CLPlacemark* aPlacemark in placemarks) {
>                      CLLocationCoordinate2D coord = aPlacemark.location.coordinate;
> 
>                      NSLog(@"%f, %f", coord.latitude, coord.longitude);
>                  }
>              }]; 
> ```

为了简化，我将一个地名转换了两次。当我运行代码时，只运行第一个地理编码完成处理程序。其余的地理编码完成处理程序将被忽略。

我想知道为什么会发生这种情况以及如何转换多个地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:51:24.957

您一次不应执行多个地理编码操作。该块是异步发生的，因此第二个地理编码操作可能会在第一个有机会完成之前开始。这是文档：

> 该方法将指定的位置数据异步提交给地理编码服务器并返回。您的完成处理程序块将在主线程上执行。发起正向地理编码请求后，不要尝试发起另一个正向或反向地理编码请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:53:38.880

请参阅 Apple 的指南：http: [//developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)

> 应用程序应该意识到它们如何使用地理编码。以下是有效使用此类的一些经验法则：
> 
> 1) 最多为任何一个用户操作发送一个地理编码请求。
> 
> 2) 如果用户执行涉及对同一位置进行地理编码的多个操作，请重用来自初始地理编码请求的结果，而不是为每个操作启动单独的请求。
> 
> 3) When you want to update the user’s current location automatically (such as when the user is moving), issue new geocoding requests only when the user has moved a significant distance and after a reasonable amount of time has passed. For example, in a typical situation, you should not send more than one geocoding request per minute.
> 
> 4) Do not start a geocoding request at a time when the user will not see the results immediately. For example, do not start a request if your application is inactive or in the background.

# ruby-on-rails - RoR 有许多额外的字段访问权限

> ID：10653820
> 
> 赞同：0
> 
> 时间：2012-05-18T13:45:37.690
> 
> 标签：ruby-on-rails

我有 3 张桌子`employees`：`projects`和`teams`

```
Employee has_many :projects, :through => :teams
Project has_many :employees, :through => :teams 
```

我将角色 ID 列添加到团队表中。

```
Team belongs_to :role 
```

现在我列出项目、团队成员及其角色。

```
<% @project.employees.each do |employee| %>
  <tr>
    <td><%= employee.employee_full_name %></td>
    <td><%= employee.team.role.rolecode %></td> 
```

但是，角色行不正确。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:00:43.450

`roles_id => role_id`？） 或者`belongs_to :role, :foreign_key => "roles_id"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:53:51.927

您的代码有两个问题：

1.  您的关联不完整。请参阅[解释](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)如何建模 a 的解释`has_many :through`。

2.  一个`employee has_many teams`，所以你不能说`employee.team`。

第一个问题的解决方案是您必须定义以下关联：

```
class Employee
  has_many :teams
  has_many :projects, :through => :teams
end

class Project
  has_many :teams
  has_many :employees, :through => :teams
end

class Team
  belongs_to :role
  belongs_to :employee
  belongs_to :project
end 
```

至于你的第二个问题：一个员工可以属于多个团队，所以你不能这样做`employee.team`。你只能这样做`employee.teams`。解决方案是像这样更改您的迭代：

```
<% @project.teams.each do |team| %>
  <tr>
    <td><%= team.employee.employee_full_name %></td>
    <td><%= team.role.rolecode %></td> 
```

# internet-explorer-9 - IE9：记录 jQuery 对象

> ID：10653821
> 
> 赞同：1
> 
> 时间：2012-05-18T13:45:44.693
> 
> 标签：internet-explorer-9, jquery

在 Google Chrome 中，当记录一个 jQuery 对象时，控制台会显示一个包含各种 DOM 元素的数组。我什至可以将鼠标悬停在控制台中的 DOM 元素上，它们会在浏览器窗口中突出显示。

在 IE9 中，当记录一个 jQuery 元素时，我只是得到`[object Object]`.

在记录 jQuery 对象时如何让 IE9 更有帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:31:15.777

不理想，但比内置功能更有帮助

```
var obj = $("div#myTestDIV");

log(obj);

function log(o, level)
{
    level = level || 1;
    var str = '';
    for (var i = 0; i < level; i++)
    {
        str += '  ';
    }

    for (var p in o)
    {
        if (typeof o[p] == 'function')
        {
            try
            {
                console.log(str + p + ": " + o[p]());
            }
            catch(e){}
        }
        else if (typeof o[p] == 'object')
        {
            log(o[p], level + 1)
        }
        else
        {
            try
            {
                console.log(str + p + ": " + o[p]);
            }
            catch(e){}
        }
    }

} 
```

# html - HTML5 音频控制停止按钮（与暂停相反）

> ID：10653823
> 
> 赞同：6
> 
> 时间：2012-05-18T13:45:58.190
> 
> 标签：html, controller, html5-audio

我到处都是（我认为），似乎找不到在 html5 音频控制器中调用停止事件的方法。我的音频控制器有一个播放列表，其中每个曲目将在选择时播放或循环播放每个曲目到下一个曲目。还有一个可以使用的下一步按钮。

我的播放/暂停按钮如下所示：

```
function playPause() {
    var audioPlayer = document.getElementsByTagName('audio')[0];
    if(audioPlayer!=undefined) {
        if (audioPlayer.paused) {
            audioPlayer.play();
        } else {
            audioPlayer.pause();
        }
    } else {
        loadPlayer();
    }
} 
```

我需要一个“停止”按钮来停止音频并返回到当前正在播放的曲目的开头。我想过以某种方式使用当前的播放位置，但无法理解。

我也试过这个（根据另一个问题的建议改编），但无济于事：

```
function stop() {
    var audioPlayer = document.getElementsByTagName('audio');
    addEventListener('loadedmetadata', function() {
        this.currentTime = 0;
    }, false);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T13:52:53.700

如果您的播放/暂停工作正常，这应该适用于停止：

```
function stop() {
    var audioPlayer = document.getElementsByTagName('audio')[0];
    audioPlayer.pause();
    audioPlayer.currentTime = 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T17:22:22.730

这是一个小演示代码，您可以在其中播放、暂停和停止音频。

[现场演示](http://jsfiddle.net/yrshaikh/RGJCf/)

**HTML**

```
<input type="button" value="play" id="playBtn" />
<input type="button" value="pause" id="pauseBtn" />
<input type="button" value="stop" id="stopBtn" /> 
```

**jQuery**

```
var source = "http://www.giorgiosardo.com/HTML5/audio/audio/sample.mp3"
var audio = document.createElement("audio");
audio.src = source;

$("#playBtn").click(function () {
    audio.play();
});

$("#pauseBtn").click(function () {
    audio.pause();
});

$("#stopBtn").click(function () {
    audio.pause();
    audio.currentTime = 0;
}); 
```

[来源](http://yassershaikh.com/play-pause-and-stop-an-audio-in-html-5-by-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T14:02:39.373

如果要停止音乐并中止下载操作，可以使用以下代码：

```
<button id="btnStop" onclick="player.src = ''; player.src = 'song.mp3';">Stop</button> 
```

我们这里是用java改歌曲src然后放回去！棘手但工作

# session - Varnish 是否处理用户 Web 会话

> ID：10653826
> 
> 赞同：4
> 
> 时间：2012-05-18T13:46:00.903
> 
> 标签：session, varnish

我有来自 2 个大型托管组织的 2 个系统管理员告诉我 Varnish 将处理 Web 服务器之间的会话共享。我在网上找不到任何支持这一点的东西，实际上在那个人明确表示没有的地方找到了[这一点。](https://www.varnish-cache.org/forum/topic/426)我不知道这个人是 Varnish 的员工还是只是贡献者或什么。

只是在这一点上寻找更多验证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T08:02:01.297

会话允许您存储许多东西（购物车、登录用户等），并且通常由 cookie 标识（例如`sessionid`）。Web 服务器知道如何使用此 sessionid 获取会话（并且可以访问/更新您的购物车），但 varnish 仅处理 cookie。Varnish 可以对后端进行负载平衡查找，无论 cookie 值如何或基于某些规则（您需要编写自己的 varnish 配置）。

但是，Web 服务器之间会话共享的一个挑战是 Web 服务器是否可以访问由另一个 Web 服务器创建/更新的会话。在许多 Java Web 容器中，会话默认存储在内存中（只有一个 Web 服务器），负载均衡器实现了某种“粘性会话”机制（始终将带有会话的用户发送到特定的后端，可以用清漆轻松设置）。另一种选择是将（序列化的）会话值存储在共享数据库中，以便任何后端都可以检索它们（并且在 Web 服务器出现故障时将继续工作）。第三种选择是将 session 完全序列化为 cookie 并停止使用 sessionid，但这很复杂（有限的大小、带宽、安全性需要一些签名机制，但可扩展性很好）。

所有方法都有优点和缺点。你必须选择，清漆支持任何选项，但不会“自动”做你想做的事，所以准备写一点清漆配置......

如果您要描述您希望如何进行负载平衡，或者您尝试实现什么，您可以获得更具体的答案。

# javascript - 带有 PDF、显示和滚动问题的 IOS 5 IFrame

> ID：10653830
> 
> 赞同：2
> 
> 时间：2012-05-18T13:46:14.820
> 
> 标签：javascript, ios, pdf, iframe, jquery-mobile

我在 iPad One 上运行 IOS 5.1.1。我的应用程序是一个`HTML5`应用程序并使用`JQuery Mobile`. 我有一个`IFrame`以编程方式插入的。有`IFrame`一些标准，然后用于`PDF`在`IFrame`.

1.  `PDF`除非旋转 I-Pad，否则不会显示 。
2.  我无法滚动`IFrame`

在 I-Pad 2（运行 4.1.3）上，它显示没有问题，并且（两根手指）滚动正常。

代码如下：

**JQM 页面，内容部分**

```
 <div class="content overflowScroll" data-role="content">
        </div><!-- /content --> 
```

**CSS**

```
.overflowScroll {
    height: auto;
    overflow: scroll;
    -webkit-overflow-scrolling: touch;
} 
```

**IFrame 插入**

```
strHtml = '<iframe src="' + fullUrl + '" width="100%" height="95%" style="background-color: #FFFFFF;"></iframe>';
$page.find(".content").empty().html(strHtml); 
```

**更新**

问题看起来是 IOS5，因为同样的事情发生在运行 IOS5 的移动设备上。这里有什么好的选择吗？也许如果我从 iframe 中删除依赖关系？

# php - 实现母版页功能。PHP

> ID：10653831
> 
> 赞同：5
> 
> 时间：2012-05-18T13:46:19.960
> 
> 标签：php, master-pages

如何制作母版页`php`？像ASP.NET MVC 中的`Layout.cshtml`(and )？`RenderBody()`

谢谢！

PS也许有第三方工具可以达到这个目的？

**编辑**

行。问题与 MVC 架构无关！请看这里：http: [//jsfiddle.net/challenge/8qn22/109/](http://jsfiddle.net/challenger/8qn22/109/)

1.  `I want the master page/layout to stay when user gets redirected to the other page`
2.  `Want an average page to be nested inside the content division`. `So if it is a form I want this form to be displayed like:` [http://jsfiddle.net/challenge/XgFGb/17/](http://jsfiddle.net/challenger/XgFGb/17/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T15:36:36.703

以下是 PHP 标准框架/api 支持的内容：

该`require("/definitions.php")`函数从文件加载类、函数和常量定义，并将 PHP 代码之外的内容输出到 php://stdout（在网络服务器上，这是发送到浏览器的内容）。您可能想`require_once`用于导入依赖项（带有定义的 php 文件）。

使用 PHP 的打开和关闭标签来获得接近模板功能的东西。例如，普通页面如下所示： ![普通页面](../Images/b9cfed1c57588380fec1d6f216d8754c.png)

而一个包含（并且可重复包含）的可能看起来像这样： ![在此处输入图像描述](../Images/22a00600541543b08229d7e96828dcf1.png)

我并不是说“不要使用模板引擎”，只是展示了一种清晰而简单的方式来实现 PHP 专门为之构建的目标。如果这足以满足您的需求，那么我会说“不要为了它而使用模板引擎”（顺便说一句，如果您很整洁，您可以轻松地将逻辑与视图分离，而无需严格且有时繁琐的 MVC 框架）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:53:16.633

顺便说一下，我知道[Laravel 框架](http://laravel.com/)包括[Blade 模板引擎](http://laravel.com/docs/views/templating)。它使用与 Razor 非常相似的语法。

例子：

```
@layout('master')

@section('navigation')
    @parent
    <li>Nav Item 3</li>
@endsection

@section('content')
    Welcome to the profile page!
@endsection 
```

[（*剃须刀、刀片、懒人溜冰鞋*）]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T09:23:56.363

在 PHP 中，有一种非常相似的技术，称为模板。您有一个模板，而不是一个母版页。该语言本身没有内置模板功能，但有第三方模板引擎（Smarty、PHPTAL 和 XTemplate 等等）。

如果您想拥有“真正的”母版页，完全可以实现它们。只需将您的母版页包装到一个类中，然后将该类包含（）到您的内容页面中。

Zend Framework 还支持两步视图，其中视图模板在布局模板中呈现。我认为这可以满足您对母版页的需求。

请参阅以下链接：

1.  [PHP 中的近似母版页](http://spinningtheweb.blogspot.in/2006/07/approximating-master-pages-in-php.html)
2.  [CodeIgniter 框架上有类似 MasterPages 的东西吗？](https://stackoverflow.com/questions/3200512/is-there-anything-like-masterpages-on-codeigniter-framework)
3.  [ASP.NET 中母版页的 PHP 等效项](https://stackoverflow.com/questions/1933168/php-equivalent-of-master-page-in-asp-net)
4.  [ASP.Net MVC 或 Zend 框架。你有什么意见](https://stackoverflow.com/questions/733714/asp-net-mvc-or-zend-framework-what-is-your-opinion)
5.  [http://hoolihan.net/blog-tim/2008/09/24/simple-masterpages-with-php/](http://hoolihan.net/blog-tim/2008/09/24/simple-masterpages-with-php/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T15:42:53.740

Twig 模板引擎提供[模板继承](http://twig.sensiolabs.org/doc/templates.html#template-inheritance)

> Twig 最强大的部分是模板继承。模板继承允许您构建一个基本“骨架”模板，该模板包含您网站的所有常见元素并定义子模板可以覆盖的块。

可以独立使用，但由流行的[symfony 框架](http://symfony.com/)背后的人制作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T05:20:28.527

行。此处描述了最适合我的解决方案[http://www.phpro.org/tutorials/Introduction-to-PHP-templating.html#9](http://www.phpro.org/tutorials/Introduction-to-PHP-templating.html#9)。它易于实现、快速实现，并且不会强制您使用模板引擎。凉爽的！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-28T03:30:41.773

不久前（几年），我使用 Smarty 实现了类似的功能，并将其扩展为包含 DisplayMaster("NameOfTemplate", "NameOfMasterTemplate") 效果的方法

它通过渲染模板并将结果传递到另一个（主）模板来工作。

上面有 2 个模板：NameOfTemplate，只有主要内容部分，例如

```
<div>...{$someProcessing}</div> 
```

NameOfMasterTemplate 具有外部 html

```
<html>...<body><div class="layout">{$innerHtml}</div></body></html> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-22T07:05:03.167

> 在您的 master.php 文件的内容区域中添加这段代码......我正在使用它，它对我来说非常有用

`<li><a href="master.php?page=blog.php">BLOG</a></li>`

```
<div class="container content">

     <?php 
    if(isset($_GET['page']))
    {
        $page_name = $_GET['page'];
        include("/".$page_name);
    }
    ?>
    </div> 
```

# sql - 子查询中 varchar 数据类型的聚合子句

> ID：10653834
> 
> 赞同：0
> 
> 时间：2012-05-18T13:46:29.163
> 
> 标签：sql

我想用子查询来做以下事情，即使我可以用另一种方式来做。我正在查询一个大型联结表，在该查询中，我想计算出现次数超过 X 的所有县名称。

```
select v.id, k.countyName
from v inner join k on v.countyID=k.countyID inner join
icd_jxn on v.id = icd_jxn.id
where k.countyName in
(select count(k.countyName) from k
having count(k.countyName) > 10) 
```

给出的错误是`conversion failed when converting the varchar value X to int`。我不想做任何转换，我只想要县名出现在表格上的次数。

![在此处输入图像描述](../Images/787728c0333f5b367a8b75e39065f0c1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:49:03.343

您的内部查询仅返回一个计数。您的查询需要是这样的：

```
select v.id, k.countyName 
from v inner join k on v.countyID=k.countyID inner join 
icd_jxn on v.id = icd_jxn.id 
where k.countyName in 
(select k.countyName from k 
group by k.countyName
having count(k.countyName) > 10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:49:51.150

您可以尝试以下方法

```
select v.id, k.countyName
from v inner join k on v.countyID=k.countyID 
       inner join icd_jxn on v.id = icd_jxn.id
where k.countyName in
(
    select k.countyName from k
    group by k.countyName
    having count(k.countyName) > 10
) 
```

问题是您在 IN 子查询中选择`count`并检查了`varchar`类型。所以，你应该选择`countyName`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:50:20.417

您正在尝试查看计数中的国家/地区名称（因此将 varchar 与整数进行比较）

```
select v.id, k.countyName
from v 
inner join k on v.countyID=k.countyID 
inner join icd_jxn on v.id = icd_jxn.id
where k.countyName in
(
   select k.countyName as c from k
   having count(k.countyName) > 10 
   group by k.countyName
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T13:50:39.850

在您的查询中，您将`k.CountryName`varchar 类型转换`Count`为导致错误的 int 类型。尝试这个

```
select v.id, k.countyName
from v inner join k on v.countyID=k.countyID inner join
icd_jxn on v.id = icd_jxn.id
where k.countyName in
(select k.countyName from k
group by k.countyName
having count(k.countyName) > 10) 
```

# php - array_keys 在 php 中返回数组

> ID：10653837
> 
> 赞同：0
> 
> 时间：2012-05-18T13:46:44.350
> 
> 标签：php, arrays

我有这个功能

```
protected function insert($data){
        $data['datecreated'] = date('Y-m-d h:i:s');
        echo "array_keys(data) = ".$data['datecreated'];
        var_dump($data);
        echo array_keys($data);
        $sql = "INSERT INTO {$this->table_name} (".  array_keys($data).")"; 
        $sql.= " VALUES ('";
        $sql.=implode("','", $data);
        $sql.=")";
        $this->execute($sql);
        $this->last_id = mysql_insert_id();
    } 
```

当我读到`array_keys($data)`它返回“数组”而不是我这样称呼它的键时，`$this->insert(array());`为什么会这样？编辑：这是输出

```
array_keys(data) = 2012-05-18 04:44:46array(2) { [0]=> array(0) { } ["datecreated"]=> string(19) "2012-05-18 04:44:46" } Array
Notice: Array to string conversion in /Applications/MAMP/htdocs/Tamara/model/dbTable.php on line 105
INSERT INTO account (Array) VALUES ('Array','2012-05-18 04:44:46)You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''2012-05-18 04:44:46)' at line 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T13:49:05.423

array_keys 返回一个包含所有键的数组。你也需要内爆

```
implode(',', array_keys($data)); 
```

编辑：你可能想看看这部分

```
$sql.=implode("','", $data);
$sql.=")"; 
```

您需要一个起始和尾随`'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:48:36.247

你想要的是`implode(',', array_keys($data))`因为[`array_keys()`](http://php.net/array_keys)返回一个包含所有键的数组 - 但你想要一个逗号分隔的字符串：

```
$sql = "INSERT INTO {$this->table_name} (".implode(',', array_keys($data)).")"; 
```

顺便说一句，我希望里面的值`$data`已经被转义了。如果不是，请替换`implode("','", $data)`为`implode("','", array_map('mysql_real_escape_string', $data))`

# java - 使用 maven 从已部署的工件运行主类

> ID：10653839
> 
> 赞同：2
> 
> 时间：2012-05-18T13:46:45.470
> 
> 标签：java, maven, main, artifact, exec-maven-plugin

我不明白。我已经将我的 pom.xml 设置为使用 Maven exec 插件，这样我就可以使用正确的类路径、-D 定义和 -javaagent 来执行我的项目中的一些类。因此，从带有内置类的外壳 ./target/classes 等。我可以使用运行 main() 方法

```
mvn exec:java -Dexec:mainClass=classWithAMainMethod 
```

到目前为止一切都很好。

现在我想发布我的项目（一个 jar 工件），并且我仍然希望能够使用我在 pom.xml 中放置的配置来运行具有正确参数等的类。我该怎么做？有没有什么住的方法

```
mvn -artifactJar=MyArtifact.jar exec:java -Dexec:mainClass=classWithAMainMethod 
```

当我只有 MyArtifact.jar（或其中包含 MyArtifact.jar 的 Maven 存储库）时？

我尝试了以下方法：

*   获取具有依赖项的 jar：get 目标并解压缩。我无法用它做任何事情，因为 pom.xml 似乎最终出现在工件 jar 中的 META-INF/maven 中。有什么使用方法吗？

*   创建一个虚拟 pom，我想在其中运行我的项目，只依赖我的项目工件。然后我可以使用 exec:java 运行主类，但它不使用我的项目 pom.xml 中的配置。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:36:10.377

AppAssembler 插件对我来说效果很好。我在构建部分用类似这样的东西替换了项目 pom 中的 exec 插件配置：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>appassembler-maven-plugin</artifactId>
    <version>1.2.2</version>
    <configuration>
        <repositoryLayout>flat</repositoryLayout>
        <repositoryName>lib</repositoryName>
        <extraJvmArguments>
            -Djava.rmi.server.hostname=localhost
            -javaagent:${spring.javaagent.jar}
        </extraJvmArguments>
        <programs>
            <program>
                <name>foo1</name>
                <mainClass>net.foor.FooMain</mainClass>
            </program>
               ...
    </configuration>
</plugin> 
```

在 Eclipse 中，我创建了一个外部工具启动器来从*target/appassembler/bin运行生成的脚本*

在我想部署到的机器上（假设访问已安装/部署我的工件+依赖项的内部 Maven 存储库）：

*   首先使用*wget*或*mvn dependency:get*来获取我的工件 jar 的副本。
*   提取 pom。 *解压 -j artifact.jar ** /pom.xml*
*   运行*mvn appassembler:assemble -DassembleDirectory=。*
*   将 artifact.jar 移动到 ./lib 目录中
*   在 ./bin 中设置生成的 shell 脚本的执行权限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T14:00:26.770

您是否尝试过使用类似[onejar](http://code.google.com/p/onejar-maven-plugin/)的东西？

这听起来像你在找什么。

# java - Java 中的向上转换和两个单独的对象属性

> ID：10653845
> 
> 赞同：1
> 
> 时间：2012-05-18T13:47:02.847
> 
> 标签：java, oop, upcasting

试图理解 Java 中的向上转换。最近观察到的奇怪行为。

例子：

```
public class A extends B {

    public int i = 2;

    public void printI() {
        System.out.println("print i = " + this.i);
    }

    public static void main(String[] args) {

        B a = new A(); // <- upcasting here

        System.out.println("i = " + a.i);
        a.printI();
    }
}

class B {
     public int i = 1;
     public void printI() {}
}

//Output:
//i = 1
//print i = 2 
```

似乎，该向上转换的对象具有两个单独的“i”属性。一个“i”可以直接访问（ai），另一个通过子类的方法访问（a.printI()）。

看起来向上转换的对象从超类获取属性，从子类获取方法。

对象怎么可以有两个单独的“i”？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T13:51:16.057

> 似乎，该向上转换的对象具有两个单独的“i”属性。

首先，有必要明确术语。没有“向上转换的对象”之类的东西 - 并且“i”是每个and中的一个*字段*。`A``B`

但是，是的，这里有两个单独的字段。这不像一个字段“覆盖”另一个字段或类似的东西。

目前尚不清楚您*要*达到什么目的，但in的声明**掩盖**`i`了in的声明。有关详细信息，请参阅[Java 语言规范的第 6.4 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.4)。`A` **`i``B`**

 **请注意，在几乎所有情况下，字段都应该是私有的——此时隐藏真的无关紧要，因为您不会尝试引用未在您正在编码的类中声明的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:50:33.513

这就是 Java 的工作原理。您有两个字段“可用”，它们恰好具有相同的名称。当您从子类引用时，它隐藏了超类的版本，但它仍然存在。**

# iphone - fb:// 架构被 Supersonic App 取代？

> ID：10653848
> 
> 赞同：-1
> 
> 时间：2012-05-18T13:47:25.910
> 
> 标签：iphone, ios, facebook

我不喜欢 Apple 如何处理 IOS 应用程序的 URL 架构注册，但一个名为“Supersonic”的 IOS 游戏已将 fb:// 注册为他们自己的 URL 架构，因此无论您单击 fb://friends 等链接，IOS 都会打开这个游戏。并忽略您是否安装了 Facebook。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:59:04.247

我认为您没有在正确的位置发布此内容。但无论哪种方式 - 尝试卸载并重新安装 facebook 应用程序。它可能会将自己重新注册为该 URL 类型的处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T16:22:04.330

向下滚动苹果文档以实现自定义 URL 方案，

[http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)

苹果可能应该阻止这种滥用，但据我所知，SuperSonicHD 应用程序仍然这样做。

# git - 特定项目搜索

> ID：10653849
> 
> 赞同：0
> 
> 时间：2012-05-18T13:47:26.317
> 
> 标签：git, github

掌握新的工具或技术时，我经常因缺乏示例项目而苦恼——我可以将这些开源项目用作实践研究的基础。

不幸的是，在 Github 上搜索除了项目的语言之外，我没有比这更精确的了。例如，我不能指定我需要一个用 Ruby 编写的项目，Sinatra 作为后端，Backbone 作为前端，Cucumber 和 RSpec 作为 BDD 工具。

那么，在 Github 团队为他们的精彩服务添加标签之前，我怎样才能更好地解决上述问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:52:58.520

我通常*使用*谷歌搜索来找到我想要的东西。

例如：

*   `"app.rb" "spec" site:github.com`使用 RSpec 搜索 Sinatra 项目。如果 Sinatra 的主文件不称为*app.rb* ，则此示例将不起作用。
*   `"describe" "last_response.body" "should change" site:github.com`寻找特定的测试代码。

我不知道 Cucumber 和 Backbone 是如何工作的，所以我想不出任何*相关*的查询。

祝你好运！

# google-apps-script - Google 电子表格条件格式脚本

> ID：10653851
> 
> 赞同：18
> 
> 时间：2012-05-18T13:47:36.450
> 
> 标签：google-apps-script, google-sheets, gs-conditional-formatting

我试图弄清楚如何在谷歌电子表格上使用条件格式，类似于您可以通过公式在 excel 中执行的操作。

如果单元格 O2 的值为“X”，我希望单元格 A2 变为绿色，这将在两列一直向下完成。我知道这需要一个脚本。

我遇到了一个类似的链接，但我不知道如何调整它以满足我的需求。这是可以做到的吗？

链接： [https ://webapps.stackexchange.com/questions/16745/google-spreadsheets-conditional-formatting](https://webapps.stackexchange.com/questions/16745/google-spreadsheets-conditional-formatting)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-21T18:28:58.510

这是一个脚本，您可以使用它来执行您所描述的操作：

```
function formatting() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Sheet1');
  var columnO = sheet.getRange(2, 15, sheet.getLastRow()-1, 1);
  var oValues = columnO.getValues();

  for (var i = 0; i < oValues.length; i++) {
    if (oValues[i][0] == 'X') {
      sheet.getRange(i + 2, 1, 1, 1).setBackgroundColor('green');
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-27T00:36:57.677

在新的 Google 表格中，这不再需要脚本。

相反，在条件格式中，选择“自定义公式”选项，然后输入一个值，例如`=O2="X"`- 或任何返回布尔真/假值的表达式。

据我所知，这些自定义脚本中列出的引用有点奇怪，应用如下......

如果它是您所选范围内的单元格，则将其更改为“突出显示的单元格”。

如果它是您所选范围之外的单元格，则将其更改为“该位置，加上与当前单元格到所选范围左上角的偏移量相同的偏移量”。

也就是说，如果您的范围是`A1:B2`，则上述内容与在每个单元格上设置单独的格式相同，如下所示：

```
A1 =O2="X"
A2 =O3="X"
B1 =P2="X"
B2 =P3="X" 
```

您还可以指定固定引用，例如`=$O$2="X"`- 这将检查所选范围内所有单元格的特定单元格 O2。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-03-07T01:39:05.910

**（2017 年 2 月）**正如另一个答案中提到的，Google 表格现在允许用户直接从用户界面添加[条件格式](http://support.google.com/docs/answer/78413)，无论是在台式机/笔记本电脑、Android 还是 iOS 设备上。

同样，使用[Google Sheets API v4](http://developers.google.com/sheets/api)（和更新版本），开发人员现在可以编写 CRUD 条件格式规则的应用程序。查看[指南](http://developers.google.com/sheets/api/guides/conditional-format)和[示例](http://developers.google.com/sheets/api/samples/conditional-formatting)页面以获取更多详细信息以及[参考文档](http://developers.google.com/sheets/api/reference/rest/v4/spreadsheets/request)（搜索`{add,update,delete}ConditionalFormatRule`）。该指南以这个 Python 片段为特色（假设文件 ID为 API 服务端点`SHEET_ID`并`SHEETS`作为 API 服务端点）：

```
myRange = {
    'sheetId': 0,
    'startRowIndex': 1,
    'endRowIndex': 11,
    'startColumnIndex': 0,
    'endColumnIndex': 4,
}

reqs = [
    {'addConditionalFormatRule': {
        'index': 0,
        'rule': {
            'ranges': [ myRange ],
            'booleanRule': {
                'format': {'textFormat': {'foregroundColor': {'red': 0.8}}}
                'condition': {
                    'type': 'CUSTOM_FORMULA',
                    'values':
                        [{'userEnteredValue': '=GT($D2,median($D$2:$D$11))'}]
                },
            },
        },
    }},
    {'addConditionalFormatRule': {
        'index': 0,
        'rule': {
            'ranges': [ myRange ],
            'booleanRule': {
                'format': {
                    'backgroundColor': {'red': 1, 'green': 0.4, 'blue': 0.4}
                },
                'condition': {
                    'type': 'CUSTOM_FORMULA',
                    'values':
                        [{'userEnteredValue': '=LT($D2,median($D$2:$D$11))'}]
                },
            },
        },
    }},
]

SHEETS.spreadsheets().batchUpdate(spreadsheetId=SHEET_ID,
        body={'requests': reqs}).execute() 
```

除了 Python，Google API 还支持[多种语言](http://developers.google.com/discovery/libraries)，因此您可以选择。无论如何，该代码示例格式化一张表格（见下图），以便那些年龄小于中位数的人以浅红色突出显示，而那些超过中位数的人的数据以红色字体着色。

[![条件格式示例](../Images/1db3f58d45b6451c6204e756e8e4c6a9.png)](http://developers.google.com/sheets/api/guides/conditional-format)

* * *

公共服务声明

最新的 Sheets API 提供了旧版本中没有的功能，即让开发人员可以像使用用户界面一样以编程方式访问工作表（条件格式 [!]、冻结行、单元格格式、调整行/列大小、添加数据透视表、创建图表等）。

如果您是 API 新手，并且希望看到更长、更通用的使用 API 的“真实世界”示例，我创建了各种视频和相关博客文章：

*   [将 SQL 数据迁移到工作表](http://gsuite-developers.googleblog.com/2016/06/introducing-google-sheets-api-v4.html)加代码深入研究[帖子](http://wescpy.blogspot.com/2016/06/using-new-google-sheets-api.html)
*   [使用 Sheets API](http://gsuite-developers.googleblog.com/2016/11/formatting-cells-with-the-google-sheets-api.html)和代码深潜[帖子格式化文本](http://wescpy.blogspot.com/2016/09/formatting-cells-in-google-sheets-with.html)
*   从电子表格数据和代码深入研究生[成](http://wescpy.blogspot.com/2016/11/generating-slides-from-spreadsheet-data.html)[幻灯片](https://gsuite-developers.googleblog.com/2016/11/generating-slides-from-spreadsheet-data.html)

如您所知，Sheets API 主要用于上述面向**文档的功能，但执行****文件**级访问，例如上传和下载、导入和导出（与上传和下载相同，但转换为/从各种格式），请改用[Google Drive API](http://developers.google.com/drive)。使用 Drive API 的示例：

*   将 Google 表格导出为 CSV（仅限博客[文章](http://wescpy.blogspot.com/2016/07/exporting-google-sheet--as-csv.html)）
*   “穷人的纯文本到 PDF”转换器（仅限博客[文章](http://wescpy.blogspot.com/2015/12/google-drive-uploading-downloading.html)）(*)

(*) - TL;DR：将纯文本文件上传到云端硬盘，导入/转换为 Google Docs 格式，然后将该 Doc 导出为 PDF。上面的帖子使用 Drive API v2；这篇[后续帖子](http://wescpy.blogspot.com/2015/12/migrating-to-new-google-drive-api-v3.html)描述了将其迁移到 Drive API v3，这是一个结合了“穷人转换器”帖子的[视频。](http://googledevelopers.blogspot.com/2016/01/google-drive-uploading-downloading.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-08-05T14:08:24.210

使用最新的[Sheet API](https://developers.google.com/apps-script/reference/spreadsheet/sheet)，您可以以编程方式将条件格式规则添加到您的工作表中以进行突出显示。

您可以添加一个自定义公式规则，将 A 列中的背景颜色设置为绿色，其中 O 列是“X”，如下所示：

```
function applyConditionalFormatting() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Sheet1');

  var numRows = sheet.getLastRow();
  var rangeToHighlight = sheet.getRange("A2:A" + numRows);
  var rule = SpreadsheetApp.newConditionalFormatRule()
      .whenFormulaSatisfied('=INDIRECT("R[0]C[14]", FALSE)="X"')
      .setBackground("green")
      .setRanges([rangeToHighlight])
      .build();

  var rules = sheet.getConditionalFormatRules();
  rules.push(rule);
  sheet.setConditionalFormatRules(rules);
} 
```

条件格式适用的范围是工作表中从第 2 行到最后一行的 A 列。

自定义公式为：

```
=INDIRECT("R[0]C[14]", FALSE)="X" 
```

这意味着在所选范围列的右侧移动 14 列并检查其值是否为“X”。

O 列是 A 列右侧的 14 列。

# c - 定义了 unicode 的 int _tmain ( int argc, TCHAR* argv[] ) 无法识别命令行参数

> ID：10653857
> 
> 赞同：0
> 
> 时间：2012-05-18T13:47:53.660
> 
> 标签：c, windows, winapi, unicode, mingw

```
#define UNICODE
#define WINVER 0x502
#include <stdio.h>
#include <windows.h>
#include <tchar.h>

int _tmain( int argc, TCHAR* argv[] ) {

    if ( argc > 1 && lstrcmpi( argv[1], L"install" ) == 0 ) {
        printf ( "In install\n");
    }
    else if ( argc > 1 && lstrcmpi( argv[1], L"uninstall" ) == 0 ) {
        printf ( "In Uninstall\n" );
    }
    else if ( argc > 1 && lstrcmpi( argv[1], L"start" ) == 0 ) {
        printf ( "In Start\n" );
    }
    else {
        printf ( "In else part\n" );
    }

    return 0;
} 
```

上面的代码没有检测到命令行参数并且总是打印“else”部分。如何实现我的意图？

我正在使用“MINGW”..在 Windows XP 中..

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:33:42.080

我认为 MINGW 编译器虽然定义了 UNICODE，但并没有定义 wmain。在您的检查代码中使用 CommandLineToArgvW。

Ps：对不起我的英语:-)

# algorithm - 为什么过度拟合给出了一个糟糕的假设函数

> ID：10653860
> 
> 赞同：2
> 
> 时间：2012-05-18T13:48:05.927
> 
> 标签：algorithm, machine-learning, linear-regression

在线性或逻辑回归中，如果我们找到一个完全适合训练集的假设函数，那么这应该是一件好事，因为在这种情况下，我们已经使用了 100% 的信息来预测新信息。
虽然它被称为过度拟合并被称为坏事。
通过使假设函数更简单，我们实际上可能会增加而不是减少噪声。
为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:53:33.420

因为你实际上并没有从你的训练集中“学习”任何东西，你只是适应了你的数据。

想象一下，你有一个一维回归

```
x_1 -> y_1 
...  
x_n -> y_1 
```

以这种方式定义的函数

```
 y_n, if x = x_n
  f(x)=     
         0, otherwise 
```

会给你完美的配合，但它实际上是无用的。

希望，这有点帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T13:54:32.333

当您尝试“太努力”以使训练集中的示例符合分类规则时，就会发生过度拟合。

它被认为是坏事，主要有两个原因：

1.  数据可能有**噪音**。过于努力地对 100% 的示例进行正确分类，会使噪音变得重要，并在忽略这种噪音的同时给你一个坏规则——*通常*会好得多。
2.  请记住，分类训练集只是真实数据的一个样本。如果您容忍一些错误分类的样本，此解决方案通常比您得到的解决方案更复杂。根据[**Occam's Razor**](http://en.wikipedia.org/wiki/Occam%27s_razor)，您应该更喜欢更简单的解决方案，因此忽略一些样本会更好，

**示例**：

根据奥卡姆剃刀，您应该容忍错误分类的样本，并假设它是噪声或不显着，并采用该数据集中的简单解决方案（绿线）： ![在此处输入图像描述](../Images/a06fd309cfe7af3610ca5b9308414972.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:56:29.150

假设您的回归解释了数据中*所有*偏差的来源，那么您可能会争辩说您的回归完全适合数据。但是，如果您知道系统中的所有（我的意思是*所有*）影响，那么您可能不需要回归。您可能有一个可以完美预测新信息的分析解决方案。

实际上，你所掌握的信息还达不到这个完美的水平。噪声（测量误差、部分可观测性等）会导致数据出现偏差。作为回应，回归（或其他拟合机制）应寻求数据的总体趋势，同时尽量减少噪声的影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T16:09:59.597

实际上，该陈述并不完全正确。如果您的假设函数是线性的，那么匹配 100% 的数据是完全可以的。每个连续非线性函数都可以通过一个线性函数在局部近似，该线性函数给出了关于它的局部行为的重要信息。

如果数据匹配 100%，则将 100 个数据点与二次曲线匹配也很好。您可以确信您没有过度拟合数据，因为数据始终显示二次行为。

但是，通过使用足够高的多项式函数，总是可以得到 100% 的拟合。但是，即使没有其他人指出的噪音，您也不应该假设您的数据具有某种高度多项式行为，而没有对该假设进行某种理论或实验确认。表明多项式行为的两个良好指标是：

*   您有一些理论上的理由期望数据在方向限制之一中增长为 x^n。
*   随着越来越多的数据被收集，您的数据一直支持固定次数多项式拟合。

但是请注意，即使**指数和倒数**关系可能具有符合足够高阶多项式的数据，但它们并不倾向于遵守上述两个条件中的任何一个。

关键是您的数据拟合需要对预测有用。您总是知道线性拟合会在本地提供信息，但是拟合的点越多，该信息就越有用。即使只有两个点和噪声，线性拟合仍然可以给出迄今为止收集的数据的最佳理论外观，并建立数据的第一个期望值。但是，除此之外，对三点使用二次拟合或对四点使用三次拟合并不能有效地提供更多信息，因为它假设局部和渐近行为信息都加上一个点。你需要为你的假设函数提供理由。这种理由可以来自更多观点或理论。

（有时会出现的第三个原因是

*   您有理论和实验理由相信误差和噪声的贡献不会超过某些界限，并且您可以采用多项式假设来查看局部导数以及匹配数据所需的行为。

这通常用于理解数据以构建理论模型，而没有良好的理论起点。您仍然应该努力使用尽可能小的多项式次数，并寻找用它们在无限级数中可能表示的（倒数、指数、高斯等）来替换系数中的模式。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T14:06:15.067

尝试以这种方式想象它。您有一个函数，您可以从中选择`n`不同的值来表示样本/训练集：

```
y(n) = x(n), n is element of [0, 1] 
```

但是，既然你想建立一个健壮的模型，你想给你的训练集添加一点噪音，所以你实际上在生成数据时添加了一点噪音：

```
data(n) = y(n) + noise(n) = x(n) + u(n) 
```

其中，`u(n)`我用平均 0 和标准偏差 1 标记了一个均匀的随机噪声：`U(0,1)`。很简单，它是一个噪声信号，它最有可能取一个值`0`，而不太可能取一个远离它的值`0`。

然后你画出 10 个点作为你的训练集。如果没有噪音，他们都将躺在一条线上`y = x`。由于存在噪声，可以表示它们的多项式函数的最低阶可能是 10 阶的，函数如下：`y = a_10 * x^10 + a_9 * x^9 + ... + a_1 * x + a_0`.

如果您考虑，仅使用来自训练集的信息的*估计*，您可能会得到一个比 10 阶多项式函数更简单的函数，并且它会更接近真实函数。

进一步考虑，您的真实函数可以具有`[0, 1]`区间之外的值，但由于某种原因，只能从该区间收集训练集的样本。现在，在训练集的区间之外，一个简单的估计可能会*表现得更好*，而如果我们要完美地拟合训练集，我们会得到一个*过度拟合*的函数，整个函数都有很多起伏:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-10T02:27:42.583

过度拟合被称为坏的，因为它对真正的解决方案有一定的影响。过拟合的解决方案是 100% 拟合所使用的训练数据，但添加任何小数据点后，模型将发生巨大变化。这称为模型的方差。因此，我们尝试在这两个因素之间取得平衡，以便模型不会在小的数据变化时发生剧烈变化，但也可以合理地正确预测输出。

# jquery - Jquery选择所有以'Urgent-'开头的选项

> ID：10653862
> 
> 赞同：2
> 
> 时间：2012-05-18T13:48:09.420
> 
> 标签：jquery

基于以下标记，我将如何（在 JQuery 中）选择以`Urgent-`or开头的选项`Urgent -`？

```
<select name="List1" id="list1">
<option>One</option>
<option>Two</option>
<option>urgent-Three</option>
<option>Urgent-Four</option>
<option>Urgent - Five</option>
</select> 
```

根据下面的答案，我使用以下 JQuery 将匹配的元素包装在`<optgroup>`.

```
$opts = $("#list1 > option").filter(function() {
    return /^Urgent\s?-/.test(this.innerHTML);
});

$opts.wrapAll('<optgroup label="Urgent">'); 
```

我需要从选项文本中删除匹配的文本，从而产生如下标记：-

```
 <select name="List1" id="list1">
    <option>One</option>
    <option>Two</option>
    <optgroup label="Urgent">
    <option>Three</option>
    <option>Four</option>
    <option>Five</option>
    </optgroup>
    </select> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T13:50:55.710

您可以使用[`filter`](http://api.jquery.com/filter/)方法和[正则表达式](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)：

```
$("#list1 > option").filter(function() {
    return /^Urgent\s?-/.test(this.innerHTML);
}); 
```

**演示：http:** [//jsfiddle.net/th83R/](http://jsfiddle.net/th83R/)

* * *

**更新。**要遵循您更新的问题，您必须稍微修改代码。

```
$("#list1 > option").filter(function() {
    var newVal = this.innerHTML.replace(/^urgent\s?-\s?/i, "");
    if (newVal != this.innerHTML) {
        this.innerHTML = newVal;
        return true;
    }
    return false;
}).wrapAll('<optgroup label="Urgent" />');​ 
```

**演示：http:** [//jsfiddle.net/th83R/3/](http://jsfiddle.net/th83R/3/)

# jquery - 如何为跨度设置动画以正确位置？

> ID：10653867
> 
> 赞同：-1
> 
> 时间：2012-05-18T13:48:34.357
> 
> 标签：jquery

> **可能重复：**
> [如何重新计算正确的位置](https://stackoverflow.com/questions/10643303/how-to-recalculate-correct-position)

我一直在尝试实现这种效果：当我将鼠标悬停在 menu 上时，带有**“问题”**类的 span跟随我的鼠标并且它是动态扩展的（与悬停的 li 标签具有相同的宽度）。我的跨度的宽度工作正常，但它的位置搞砸了，因为我不知道如何进行正确的计算。
***尝试将鼠标悬停在我的菜单上以查看问题。***
[在这里提琴](http://jsfiddle.net/w3DrE/)
有人知道如何解决这个问题或指出我正确的方向吗？

```
 $(document).ready(function(){
    $('.menu ul li').hover(function(){
        var index=$(this).index();
        var width=$(this).outerWidth();        
        $('.problem').stop().animate({'marginLeft':135*index+195,'width':width},1000);     
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:57:29.690

嗯，你没有正确地得到你的花车和底层文本。您`li`似乎向左浮动，但超出了其父级的宽度。因此最后一个菜单项（`li`）自动下降。您必须减小字体大小或执行类似的操作。

```
ul li{
    float:left;
    width : 120px;
    overflow : hidden;
    white-space : nowrap;
    margin-left:10px;
} 
```

看到[这个](http://jsfiddle.net/w3DrE/13/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T14:10:21.290

我认为这会更好：

[http://jsfiddle.net/w3DrE/16/](http://jsfiddle.net/w3DrE/16/)

# python - 具有本地要求的 PIP 和 setup.py

> ID：10653893
> 
> 赞同：-2
> 
> 时间：2012-05-18T13:50:08.697
> 
> 标签：python, pip, distutils

我有一个将与 PIP 一起安装的包，假设它的名称为 PackageA。PackageA 有一个要求，写在 requirements.txt 到 PackageB 中。喜欢：file://../../PackageB

PackageB 应该需要另一个 PackageC，使用 setup.py 或 requrements.txt。所有包都放置在本地。应该怎么做？

setup.py 不能对本地包有要求。我现在不知道如何将包 B 的要求放在本地 PackageC 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:06:03.857

尝试`pip install --download-cache=<cachedir> packageA`

其中 cachedir 是包含依赖包的目录。

试着摆弄`--no-download`和`--no-deps`

查看`pip install --help`更多信息。

# wordpress - Wordpress 查询 - 循环更改 div 的 CSS

> ID：10653894
> 
> 赞同：0
> 
> 时间：2012-05-18T13:50:19.233
> 
> 标签：wordpress, while-loop

我已经构建了一个 WP Loop，它仅限于它加载的“ **2 ”篇文章。**我想做的是循环中的第二篇文章或底部的文章，没有边框底部。

如何在 WP Loop 中执行此操作？

我的 PHP 代码是：

```
<div class="span content"> <!-- This is column 1 -->
    <?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
            <h2><?php the_title(); ?></h2>
            <p class=""<?php the_content(); ?>
   <?php endwhile; ?>
</div><!-- /.span8 .content --> 
```

CSS 是：

```
.article {
border-bottom: 1px dotted #000000;
width: 170px;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:54:13.893

只需使用简单的 CSS 即可。应该工作到IE7。

```
.article {
    width: 170px;
}

.article:first-child {
    border-bottom: 1px dotted #000000;
} 
```

注意：如果您的第一个孩子是像评论这样的文本节点，IE7 中的 :first-child 实现有点错误。

**:first-child 将匹配项目 1**

```
<ul>
    <li>Item 1</li>
    <li>Item 2</li>
</ul> 
```

**:first-child 与第 1 项不匹配**，因为该评论。

```
<ul>
    <!-- Comment -->
    <li>Item 1</li>
    <li>Item 2</li>
</ul> 
```

**解决方法**

```
<ul><!-- Comment --><li>Item 1</li>
    <li>Item 2</li>
</ul> 
```

或者只是删除评论。

您还可以在 while 循环中计算您的迭代次数。那不是一个优雅的方法，但应该适合你......

```
<?php
    //Set Counter to 0
    $counter = 0;

    // Start Loop
    if ( have_posts() ) while ( have_posts() ) : the_post();

    // Increment Coounter
    $counter++;
?>
    <div class="span content item-<?php echo $counter; ?>">
        <h2><?php the_title(); ?></h2>
        <p><?php the_content(); ?></p>
    </div><!-- /.span8 .content -->
<?php endwhile; ?> 
```

WP-Loop 的每次迭代都会将 $counter 增加 1。

第一次迭代：

```
 <div class="span content item-1"> 
```

第二次迭代：

```
 <div class="span content item-2"> 
```

第三次迭代：

```
 <div class="span content item-3"> 
```

... 等等。

# c++ - C 和 C++ 中 += 的结果是什么？

> ID：10653903
> 
> 赞同：93
> 
> 时间：2012-05-18T13:50:54.030
> 
> 标签：c++, c

我有以下代码：

```
#include <stdio.h>
int main(int argc, char **argv) {
    int i = 0;
    (i+=10)+=10;
    printf("i = %d\n", i);
    return 0;
} 
```

如果我尝试使用 gcc 将其编译为 C 源代码，则会出现错误：

```
error: lvalue required as left operand of assignment 
```

但是，如果我使用 g++ 将其编译为 C++ 源代码，则不会出现错误，并且当我运行可执行文件时：

```
i = 20 
```

为什么会有不同的行为？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-05-18T13:57:58.457

复合赋值运算符的语义在 C 和 C++ 中是不同的：

C99 标准，6.5.16，第 3 部分：

> 赋值运算符将值存储在左操作数指定的对象中。赋值表达式在赋值后具有左操作数的值，但不是左值。

在 C++ 5.17.1 中：

> 赋值运算符 (=) 和复合赋值运算符都从右到左分组。它们都需要一个可修改的左值作为它们的左操作数，并在赋值发生后返回一个左操作数的类型和值的左值。

**编辑：** C++ 中的行为`(i+=10)+=10`在 C++98 中未定义，但在 C++11 中定义良好。有关标准的相关部分，请参阅[NPE](https://stackoverflow.com/users/367273/npe)对问题的[回答。](https://stackoverflow.com/a/10655884/335858)

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-05-18T13:56:06.507

除了是无效的 C 代码之外，该行

> ```
> (i+=10)+=10; 
> ```

将导致 C 和 C++03 中的未定义行为，因为它会`i`在序列点之间修改两次。

至于为什么允许在 C++ 中编译：

> [C++N3242 5.17.1] 赋值运算符 (=) 和复合赋值运算符都从右到左分组。所有这些都需要一个可修改的左值作为它们的左操作数**，并返回一个指向左操作数的左值。**

同一段继续说

> 在所有情况下，赋值都在左右操作数的值计算之后和赋值表达式的值计算之前进行排序。

这表明在 C++11 中，表达式不再具有未定义的行为。

# ruby - Sinatra、Unicorn 和服务 JavaScript

> ID：10653905
> 
> 赞同：2
> 
> 时间：2012-05-18T13:50:55.560
> 
> 标签：ruby, webserver, sinatra, unicorn

我正在使用[unicorn](http://unicorn.bogomips.org/)来提供[sinatra](http://www.sinatrarb.com/)应用程序，前端使用的是[bootstrap.js](http://twitter.github.com/bootstrap/)和[jQuery(UI)](http://jquery.com/)。

目前，当我在本地机器上运行应用程序并从本地机器访问页面时，一切正常。但是，我让同事从局域网上的机器连接，他们的结果是不同的。目前还不清楚究竟什么加载，什么不加载，但有一件事是肯定的：并非所有的 JavaScript 都将用于远程机器。主页使用 jQueryUI 选项卡，但是当页面加载到除服务器之外的任何主机上时，它会在没有它们的情况下呈现（相反，有一个带有链接的项目符号列表）。

这些文件由 Sinatra 提供的 ERB 文件中`.js`的普通 HTML 标记引用。`<script>`

unicorn 的输出表明 js 文件正在被请求并正确发送（我正在为每个文件获取 HTTP 200 状态）：

```
xxx.xxx.xxx.xxx - - [18/May/2012 09:41:12] "GET /js/jquery-1.7.2.min.js HTTP/1.1" 200 94840 0.0257
xxx.xxx.xxx.xxx - - [18/May/2012 09:41:12] "GET /js/jquery-ui-1.8.20.custom.min.js HTTP/1.1" 200 206731 0.0113
xxx.xxx.xxx.xxx - - [18/May/2012 09:41:12] "GET /js/bootstrap.js HTTP/1.1" 200 50089 0.0056 
```

每个文件的本地权限为 755，位于 [app_root]/public/js。

显然，我的问题可能*与*Sinatra 或 Unicorn 无关，但这是我目前的情况。如果有什么我应该调查的，或者是否应该在问题中添加更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:58:22.950

我认为问题出在 DSL 链接中，如果您的代码中没有描述该路由，Sinatra 将无法理解该`/js/jquery-1.7.2.min.js`路由，但只要它是静态文件，您就可以这样做：

```
set :public, File.dirname(__FILE__) + '/js' 
```

这告诉 Sinatra 您`/js`文件夹中的所有文件都是静态的，并且应该以正确的方式提供服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:28:01.963

我已经设法让事情正常进行，但在某种程度上让我仍然好奇最初是什么导致了这个问题。

我一直在我的本地机器上运行 Unicorn，这是一台 MacBook Pro。我决定使用 Ubuntu 映像启动一个 AWS 实例并在那里安装应用程序（这是应用程序完成后的预期用例）。完全不更改配置，应用程序在 AWS 节点上完美运行。显然 MBP 不知道如何成为 Web 服务器。

如果有人对为什么会这样有见解，我很想听听他们的意见，但我会接受这个答案，因为这个问题已经为我解决了。

# xml - Mac/Apple 可以读取 .bmp 吗？

> ID：10653910
> 
> 赞同：0
> 
> 时间：2012-05-18T13:51:03.740
> 
> 标签：xml, xcode

Mac/Apple 电脑可以使用 .bmp 照片格式吗？

背景：我们有一个家庭项目来创建 Mac/Apple 绘本。我使用 .bmp 选项将扫描的图片复制到我的 PC 中。然后，我将图像下载到光盘上，以向仅使用 Mac/Apple 计算机的图画书组织者发送蜗牛邮件。现在 Mac/Apple 用户担心我的图片无法正确下载到他们的计算机中。我被要求以 .jpg 格式重做该项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:55:13.887

查看以下链接以了解 mac 和 windows 上支持的图像类型，mac 几乎支持大多数图像类型。

[http://www.cnsplug-ins.com/Plug-ins/CNS_Image/Knowledge_Base/Documentation/Supported_Image_Types](http://www.cnsplug-ins.com/Plug-ins/CNS_Image/Knowledge_Base/Documentation/Supported_Image_Types)

# java - 缺少“框架级别”访问修饰符

> ID：10653919
> 
> 赞同：8
> 
> 时间：2012-05-18T13:51:45.317
> 
> 标签：java, access-modifiers

这是场景。作为公开许可的开源 API 的创建者，我的团队创建了一个基于 Java 的 Web 用户界面框架（那么还有什么新东西？）。为了在 Java 中保持良好和有序，我们使用了命名约定为 org.mygroup.myframework.x 的包，其中 x 表示组件、验证器、转换器、实用程序等（同样，还有什么是新的？）。

现在，在 org.mygroup.myframework.foo.Bar 类中的某处是`void doStuff()`我需要执行特定于我的框架的逻辑的方法，并且我需要能够从我的框架中的其他几个地方调用它，例如 org. mygroup.myframework.far.Boo。鉴于 Boo 既不是 Bar 的子类，也不是在完全相同的包中，所以必须将方法 doStuff() 声明为 public 才能被 Boo 调用。

然而，我的框架作为一种工具存在，允许其他开发人员为他们的客户创建更简单、更优雅的 RIA。但是如果 com.yourcompany.yourapplication.YourComponent 调用 doStuff()，它可能会产生意想不到的不良后果。我宁愿这永远不会被允许发生。 **请注意， Bar 包含其他真正公开的方法。**

在象牙塔世界中，我们将重写 Java 语言并插入一个标记化的模拟来默认访问，这将允许我们选择的包结构中的任何类访问我的方法，可能看起来类似于：

```
[org.mygroup.myframework.*] void doStuff() { .... } 
```

其中通配符表示包以 org.mygroup.myframework 开头的任何类都可以调用，但不能调用其他类。

鉴于这个世界不存在，我们还有什么其他好的选择？

* * *

请注意，这是由现实生活场景驱动的；为了保护罪犯，他们改名了。存在一个真正的框架，在其整个 Javadoc 中，人们会发现公共方法被注释为“此方法是 MYFRAMEWORK 的内部，而不是其公共 API 的一部分。请勿调用！！！！！！” 一些研究表明，这些方法是从框架内的其他地方调用的。

事实上，我是一名使用相关框架的开发人员。尽管我们的应用程序已部署并取得了成功，但我的团队经历了如此多的挑战，以至于我们想说服我们的老板不要再使用这个框架了。我们希望通过对框架开发人员做出的糟糕设计决策进行深思熟虑的介绍来做到这一点，而不仅仅是咆哮。这个问题将是我们的一个（几个）观点，但我们无法指出我们可能会如何以不同的方式做到这一点。在我的工作场所已经有一些热烈的讨论，所以我想知道世界其他人会怎么想。

* * *

更新：到目前为止，这两个回答者没有冒犯，但我认为你错过了标记，或者我表达得不好。无论哪种方式，都可以让我尝试阐明事物。尽可能简单地说，框架的开发人员应该如何重构以下内容。请注意，这是一个非常粗略的示例。

```
package org.mygroup.myframework.foo;
public class Bar {
     /** Adds a Bar component to application UI */
     public boolean addComponentHTML() {
         // Code that adds the HTML for a Bar component to a UI screen
         // returns true if successful
         // I need users of my framework to be able to call this method, so
         // they can actually add a Bar component to their application's UI
     }

     /** Not really public, do not call */
     public void doStuff() {
         // Code that performs internal logic to my framework
         // If other users call it, Really Bad Things could happen!
         // But I need it to be public so org.mygroup.myframework.far.Boo can call
     }
} 
```

* * *

另一个更新：所以我刚刚了解到 C# 具有“内部”访问修饰符。因此，表达这个问题的更好方法可能是“如何在 Java 中模拟/模拟内部访问？” 尽管如此，我并不是在寻找新的答案。我们的老板最终同意了上面提到的担忧

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:01:35.757

为了提供这个缺失的“框架级访问修饰符”，我能想到的唯一想法是 CDI 和更好的设计。如果您必须在各种（但很少）情况下使用来自非常不同的类和包的方法，那么肯定会有一种重新设计这些类的方法，以使这些方法“私有”并且无法访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:07:45.970

Java 语言不支持这种访问级别（您想要类似“内部”的名称空间）。您只能限制对包级别（或已知的继承公共保护私有模型）的访问。

根据我的经验，您可以使用 Eclipse 约定：创建一个名为“internal”的包，该包的所有类层次结构（包括子包）都将被视为非 API 代码，并且可以随时更改，而不保证您的用户。在该非 API 代码中，您可以随时使用公共方法。由于这只是一个约定，并且不是由 JVM 或 Java 编译器强制执行的，因此您不能阻止用户使用该代码，但至少要让他们知道这些类不打算由 3rd 方使用。

顺便说一句，在 Eclipse 平台源代码中，有一个复杂的插件模型，它通过为每个插件实现自定义类加载器来防止加载这些插件中应该是“内部”的类，从而强制您不要使用其他插件的内部代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:11:27.233

有时使用接口和动态代理来确保您只公开您确实想要公开的方法。

但是，如果您的方法经常被调用，那么这会带来相当高的性能成本。

使用`@Deprecated`注释也可能是一种选择，尽管它不会阻止外部用户调用您的“框架私有”方法，但他们不能说他们没有被警告过。

总的来说，我认为你不应该担心你的用户故意在脚上射击自己太多，只要你向他们明确表示他们不应该使用某些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T01:03:22.103

当您提到文档问题时，您最接近答案。真正的问题不是你不能“保护”你的内部方法；相反，内部方法污染了您的文档并引入了客户端模块可能错误地调用内部方法的风险。

当然，即使您确实拥有细粒度的权限，您仍然无法阻止客户端模块调用内部方法——jvm 无论如何都不能防止基于反射的私有方法调用。

我使用的方法是为每个有问题的类定义一个接口，并让该类实现它。接口可以仅根据客户端模块进行记录，而实现类可以提供您想要的内部文档。如果您不想，您甚至不必在分发包中包含实现 javadoc，但无论哪种方式，边界都已明确划分。

只要您确保在运行时每个文档接口只加载一个实现，现代 jvm 将保证您不会因使用它而遭受任何性能损失；并且，您可以在测试期间加载线束/存根版本以获得额外的奖励。

# javascript - 在 jquery 的源代码中将名称“jQuery”更改为其他名称

> ID：10653920
> 
> 赞同：0
> 
> 时间：2012-05-18T13:51:49.257
> 
> 标签：javascript, jquery, jquery-selectors

是否可以将 jquery 源代码中的名称“jQuery”更改为其他名称。我想用这个新名称执行我的 jQuery 操作。
例如： 我该怎么做`jQuery('#something').attr();`？ `myName('#something').attr();`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T13:52:51.890

```
var myName = jQuery.noConflict(true); 
```

这将恢复它们之前`$`的`jQuery`任何值（可能`undefined`）并将 jQuery 对象分配给`myName`.

但是，考虑使用 jQuery 将代码包装在`$`指向 jQuery 对象的闭包中：

```
(function($) {
    $('#something').something();
})(jQuery.noConflict(true)); 
```

使用您的代码的人希望`$`被使用，如果他们不得不使用其他东西，他们很可能会感到恼火；特别是如果它更长！

如果**不需要**去掉`$`and `jQuery`，就不要用了`jQuery.noConflict(true)`，直接写`jQuery`在我用过的地方`jQuery.noConflict(true)`。还要记住，如果您`jQuery`在加载它们之前删除全局，则没有 jQuery 插件将起作用（如果它们已正确编写，则在加载它们之后这样做很好，即使用我向您建议的闭包）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:53:19.963

```
 var $j = jQuery.noConflict();

 // Use jQuery via $j(...)
 $j(document).ready(function(){
   $j("div").hide();
 }); 
```

# php - 无法使用 php 打开 gnome-terminal

> ID：10653921
> 
> 赞同：1
> 
> 时间：2012-05-18T13:51:52.960
> 
> 标签：php

我实际上尝试使用 php 脚本来 laucnh 一个 gnome-term，似乎我对用户 www-data 有一些问题；

我的脚本只在目录中创建一个 ls -l 命令（仅用于测试），我在本地网站中使用 php 页面运行它。

这里是我的 bash 脚本中的 gnome-terminal 命令（当我双击他时，他运行得很好）：

**gnome-terminal --working-directory=/opt/cuckoo -x bash -c "ls -l"**

这是 php-page 上的调用：

**system("/my/path/to/the/script/script.sh");**

我的脚本中有一些回声，在我尝试使用 php.page 运行脚本后，我在 php 页面中看到了它们。

我认为 www-data 无权这样做，因此我使用 chown 命令授予脚本的所有权，最后尝试使用**sudo visudo**命令并使脚本像用户 www-data 是 root 一样执行（使用**没有密码**参数）

但是我最终无法打开终端并制作 ls，我也尝试使用 exec，并使用 $ouput 显示结果，但结果也相同。

最后我的问题是：Php 真的可以运行终端，或者我自己可能是个傻瓜^^？感谢您花时间救我；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:12:33.640

PHP 可以运行一切，但取决于生成它的人。忘记只从 Web 服务器运行 X 应用程序 - 您需要的不仅仅是执行它们（权限、DISPLAY 和 Xauth 设置）。阅读有关 X 客户端和架构的更多信息。

可能问这个问题的正确地方是[SuperUser](https://superuser.com/)，因为问题不在于编码本身。

# asp.net-mvc - 在 ASP.NET 应用程序中为每个用户使用单独的 DB

> ID：10653924
> 
> 赞同：0
> 
> 时间：2012-05-18T13:51:53.723
> 
> 标签：asp.net-mvc, entity-framework

我正在构建一个 ASP.NET MVC 应用程序。我将为每个应用程序用户存储大量数据，因此我正在考虑为每个用户的数据设置单独的数据库。当然，所有数据库在结构上都是 100% 相同的。它们都应该来自某种主数据库。有人可以告诉我如何实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:03:25.163

出于很多原因，每个用户的数据库听起来是个糟糕的主意。如果数据或读/写很大，您应该考虑分片（根据主键将数据库拆分为单独的数据库，但不是每个主键的单独数据库）。

如果您使用的是 SQL Server，只需稍作调整即可处理数十亿行 - [http://www.sql-server-performance.com/2011/index-maintenance-performance/](http://www.sql-server-performance.com/2011/index-maintenance-performance/)对此有很好的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T14:04:10.817

除非您打算在每个表中处理数百万行的数百万用户，否则您不需要使用多个数据库。

MS Sql 可以轻松处理具有良好索引的表中的十亿行，并且仍然保持良好的查询性能。

使用多个数据库很可能只会让人头疼。

也就是说，您应该设计脚本来创建数据库，然后更新脚本以更改它们，因为您必须将任何更改传播到所有数据库。

但我的建议是坚持使用一个数据库。如果您实际上设法超出了您很可能需要重新设计数据库结构的能力:)

# visual-studio-2010 - WIX 3.6 安装程序 - Visual Studio 2010 (HeatDirectory)

> ID：10653930
> 
> 赞同：12
> 
> 时间：2012-05-18T13:52:31.563
> 
> 标签：visual-studio-2010, wix, windows-installer, wix3.6, heat

我正在为 Web 服务开发 WIX 3.6 安装程序。但是当我尝试使用 HeatDirectory 来获取所有必要的输出时遇到了一个问题，无论我尝试什么，我都会为每个收获的文件收到以下错误：

***系统找不到文件'SourceDir\Some.dll ...'***

错误发生在 WcfService.wxs 中；奇怪的是 WcfService.wxs 是由我的项目文件中的 heatdirectory 部分自动创建的（如下）。 *如果它必须首先知道它们在哪里来创建 WcfService.wxs，它怎么能说找不到这些 .dll 呢？* 当我从我读过的任何教程下载和构建 WIX 示例项目（原样）时，甚至会发生这些错误。

*目标*：尽可能多地自动化 .dll 包含（即利用收获来处理依赖项项目等）

我正在运行 Win 7 64 位，项目是 .NET 4。

**产品.wxs：**

```
 <?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Product Id="*" Name="CompleteInstall" Language="1033" Version="1.0.0.0" Manufacturer="Technologies" UpgradeCode="b2ae6aa5-263f-4f9a-a250-8599a7f2cb03">
    <Package InstallerVersion="200" Compressed="yes" />

    <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
    <MediaTemplate />

    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="ProgramFiles64Folder">
        <Directory Id="CommonDir1" Name="Common Directory 1">
          <Directory Id="CommonDir2" Name="Common Directory 2">
            <Directory Id="INSTALLFOLDER" Name="Install Directory"/>
          </Directory>
        </Directory>
      </Directory>
    </Directory>

    <Feature Id="ProductFeature" Title="CompleteInstall" Level="1">
      <ComponentGroupRef Id="WcfService_Project" />
    </Feature>

    <Property Id="WIXUI_INSTALLDIR">INSTALLFOLDER</Property>
    <UIRef Id="WixUI_InstallDir" />
  </Product>
</Wix> 
```

**项目文件：**

```
<Target Name="BeforeBuild">
    <MSBuild Projects="%(ProjectReference.FullPath)" Targets="Build" Properties="Configuration=$(Configuration);Platform=x86" Condition="'%(ProjectReference.ContentProject)'=='True'" />
    <PropertyGroup>
      <LinkerBaseInputPaths>%(ProjectReference.RootDir)%(ProjectReference.Directory)bin\$(Platform)\$(Configuration)\</LinkerBaseInputPaths>
    </PropertyGroup>
    <HeatDirectory OutputFile="%(ProjectReference.Filename)-temp.xml" 
                   Directory="%(ProjectReference.RootDir)%(ProjectReference.Directory)bin\$(Platform)\$(Configuration)\"
                   DirectoryRefId="INSTALLFOLDER" 
                   ComponentGroupName="%(ProjectReference.Filename)_Project"
                   SuppressCom="true" 
                   SuppressFragments="true" 
                   SuppressRegistry="true"
                   SuppressRootDirectory="true" 
                   AutoGenerateGuids="false" 
                   GenerateGuidsNow="true" 
                   ToolPath="$(WixToolPath)" 
                   Condition="'%(ProjectReference.ContentProject)'=='True'" />
    <XslTransformation XmlInputPaths="%(ProjectReference.Filename)-temp.xml"
                       XslInputPath="XslTransform.xslt" 
                       OutputPaths="%(ProjectReference.Filename).wxs" 
                       Condition="'%(ProjectReference.ContentProject)'=='True'" />
  </Target> 
```

**WcfService.wxs：**

```
<?xml version="1.0" encoding="utf-8"?><Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="INSTALLFOLDER">
            <Component Id="cmpE6EBA3D8D6D4DB0C93E73200C78DCC51" Guid="{C88B5CF9-8807-45DF-AA6F-732437B74BB6}">
                <File Id="fil0118BBA61671E80581CA9C9AA6DD3E8D" KeyPath="yes" Source="SourceDir\Some.dll" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <ComponentGroup Id="WcfService_Project">
            <ComponentRef Id="cmpE6EBA3D8D6D4DB0C93E73200C78DCC51" />
        </ComponentGroup>
    </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T17:48:47.523

问题是缺少 HeatDirectory PreprocessorVariable 属性。我通过在我的 wixproj 文件中添加以下内容解决了这个问题：

```
<PropertyGroup>
  <DefineConstants>BasePath=%(ProjectReference.RootDir)%(ProjectReference.Directory);</DefineConstants>
</PropertyGroup>
<HeatDirectory OutputFile="%(ProjectReference.Filename).wxs" 
               DirectoryRefId="INSTALLFOLDER" 
               Directory="%(ProjectReference.RootDir)%(ProjectReference.Directory)"
               ComponentGroupName="%(ProjectReference.Filename)_Project"
               SuppressCom="true"
               SuppressFragments="true"
               SuppressRegistry="true"
               SuppressRootDirectory="true"
               AutoGenerateGuids="false"
               GenerateGuidsNow="true"
               ToolPath="$(WixToolPath)"
               Condition="'%(ProjectReference.ContentProject)'=='True'" 
               PreprocessorVariable="var.BasePath"/> 
```

如您所见，我需要首先定义一个本地使用的常量变量。我将变量设置为我的 WCF 项目的根路径。其次，我将该变量用作我的 PreprocessorVariable。最后，我能够动态/递归地收集从 MsBuild 生成的文件。下一步：排除不必要的文件。我会参考这个[链接](http://www.chrissurfleet.co.uk/post/Using-Packaged-Project-Output-in-WiX-and-Visual-Studio.aspx)。

请参阅下面我完整的wixproj：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
    <ProductVersion>3.5</ProductVersion>
    <ProjectGuid>{4005592f-cc0e-41a3-8e64-33b2824e7fd9}</ProjectGuid>
    <SchemaVersion>2.0</SchemaVersion>
    <OutputName>MyWCF.WCF.Webservice</OutputName>
    <OutputType>Package</OutputType>
    <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' AND '$(MSBuildExtensionsPath32)' != '' ">$(MSBuildExtensionsPath32)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
    <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' ">$(MSBuildExtensionsPath)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
    <OutputPath>bin\$(Configuration)\</OutputPath>
    <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
    <OutputPath>bin\$(Configuration)\</OutputPath>
    <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
  </PropertyGroup>
  <ItemGroup>
    <Compile Include="MyWCF.WcfService.wxs" />
    <Compile Include="IISConfig.wxs" />
    <Compile Include="InstallUi.wxs" />
    <Compile Include="Product.wxs" />
    <Compile Include="UIDialogs.wxs" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\MyWCF.WcfService\MyWCF.WcfService.csproj">
      <Name>MyWCF.WcfService</Name>
      <Project>{8e528b38-2826-4793-a66d-f6ff181e1139}</Project>
      <Private>True</Private>
      <RefProjectOutputGroups>Binaries;Content;Satellites</RefProjectOutputGroups>
      <RefTargetDir>INSTALLFOLDER</RefTargetDir>
      <ContentProject>True</ContentProject>
      <DoNotHarvest>True</DoNotHarvest>
      <PackageThisProject>True</PackageThisProject>
    </ProjectReference>
  </ItemGroup>
  <ItemGroup>
    <WixExtension Include="WixIIsExtension">
      <HintPath>$(WixExtDir)\WixIIsExtension.dll</HintPath>
      <Name>WixIIsExtension</Name>
    </WixExtension>
    <WixExtension Include="WixUtilExtension">
      <HintPath>$(WixExtDir)\WixUtilExtension.dll</HintPath>
      <Name>WixUtilExtension</Name>
    </WixExtension>
    <WixExtension Include="WixUIExtension">
      <HintPath>$(WixExtDir)\WixUIExtension.dll</HintPath>
      <Name>WixUIExtension</Name>
    </WixExtension>
    <WixExtension Include="WixNetFxExtension">
      <HintPath>$(WixExtDir)\WixNetFxExtension.dll</HintPath>
      <Name>WixNetFxExtension</Name>
    </WixExtension>
  </ItemGroup>
  <ItemGroup>
    <Content Include="ConfigurationInitialize.wxi" />
  </ItemGroup>
  <Import Project="$(WixTargetsPath)" />
  <PropertyGroup>
    <PreBuildEvent />
  </PropertyGroup>
  <Target Name="BeforeBuild">
    <MSBuild Projects="%(ProjectReference.FullPath)" Targets="Package" Properties="Configuration=$(Configuration);Platform=$(Platform)" Condition="'%(ProjectReference.PackageThisProject)'=='True'" />
    <PropertyGroup>
      <DefineConstants>BasePath=%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Platform)\$(Configuration)\Package\PackageTmp\</DefineConstants>
    </PropertyGroup>
    <HeatDirectory OutputFile="%(ProjectReference.Filename).wxs" 
                   Directory="%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Platform)\$(Configuration)\Package\PackageTmp"
                   DirectoryRefId="INSTALLFOLDER"
                   ComponentGroupName="%(ProjectReference.Filename)_Project"
                   SuppressCom="true"
                   SuppressFragments="true"
                   SuppressRegistry="true"
                   SuppressRootDirectory="true"
                   AutoGenerateGuids="false"
                   GenerateGuidsNow="true"
                   ToolPath="$(WixToolPath)" Condition="'%(ProjectReference.PackageThisProject)'=='True'"
                   PreprocessorVariable="var.BasePath" />
  </Target>
</Project> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:13:18.393

当我从使用 Wix 建立基本网站转移到我们的生产网站之一时，我遇到了与您类似的问题。

假设您遵循示例[Paul Reynolds 的示例](https://web.archive.org/web/20110701073920/https://blogs.planetsoftware.com.au/paul/archive/2011/02/20/creating-a-web-application-installer-with-wix-3.5-and-visual.aspx)和这个[Paraesthesia 的示例](https://web.archive.org/web/20110702114126/http://www.paraesthesia.com/archive/2010/07/30/how-to-consume-msdeploy-staged-web-site-output-in-a.aspx)

如果您查看以下页面的评论 - [http://blogs.planetsoftware.com.au/paul/archive/2011/02/20/creating-a-web-application-installer-with-wix-3.5-and -visual.aspx](http://blogs.planetsoftware.com.au/paul/archive/2011/02/20/creating-a-web-application-installer-with-wix-3.5-and-visual.aspx)

第一条评论提到更改 Paraesthesia 示例中的 beforebuild 方法。

```
 <Target Name="BeforeBuild"> 

    <MSBuild Projects="%(ProjectReference.FullPath)" Targets="Package" Properties="Configuration=$(Configuration);Platform=AnyCPU" Condition="'%(ProjectReference.WebProject)'=='True'" /> 
    <PropertyGroup> <DefineConstants Condition="'%(ProjectReference.WebProject)'=='True'"> %(ProjectReference.Name).PackageDir=%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\ </DefineConstants> </PropertyGroup> <HeatDirectory OutputFile="%(ProjectReference.Filename).wxs" Directory="%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\" DirectoryRefId="INSTALLDIR" ComponentGroupName="%(ProjectReference.Filename)_Project" AutogenerateGuids="true" SuppressCom="true" SuppressFragments="true" SuppressRegistry="true" SuppressRootDirectory="true" ToolPath="$(WixToolPath)" Condition="'%(ProjectReference.WebProject)'=='True'" Transforms="%(ProjectReference.Filename).xsl" PreprocessorVariable="var.%(ProjectReference.Name).PackageDir" /> 
</Target> 
```

我不得不删除转换属性并更改 DirectoryRefId 但到目前为止一切都很好。

希望这有助于为您指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T17:29:12.570

更新：如果你把

```
<PropertyGroup>
<DefineConstants Condition="'%(ProjectReference.WebProject)'=='True'">
%(ProjectReference.Name).PackageDir=%(ProjectReference.RootDir)
%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\
</DefineConstants> 
```

并添加：

```
PreprocessorVariable="var.%(ProjectReference.Name).PackageDir" 
```

[请参阅底部的评论](http://blogs.planetsoftware.com.au/paul/archive/2011/02/20/creating-a-web-application-installer-with-wix-3.5-and-visual.aspx)。我不做转换，所以我把它省略了。到 HeatDirectory 它应该可以工作，而不必将 proj 文件放在底部。

这可能会降低我的声誉，但我发现有趣的是[http://www.paraesthesia.com](http://www.paraesthesia.com/archive/2010/07/30/how-to-consume-msdeploy-staged-web-site-output-in-a.aspx/)网站，我曾经为一个项目工作，但在尝试另一个项目时它不起作用。
在查看输出后，它似乎为 Heat 和 Candle 选择了正确的项目，但 Light 似乎随机选择了一个。在比较了这两个项目之后，我注意到工作项目的收获项目是最后列出的项目。当我将 .wixproj 文件中的项目移动到最后一个引用时，它起作用了。
我此时使用的是 3.5.2519。我知道这是一个旧的，但我们的项目需要 Harvest 到 True 并且实际上 Harvest 在 Visual Studio 中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-19T08:48:55.657

所以你的 WcfService.wxs 包括：

```
<File Id="fil0118BBA61671E80581CA9C9AA6DD3E8D" KeyPath="yes" Source="SourceDir\Some.dll" /> 
```

这是指`SourceDir\Some.dll`. 该文件必须存在于您编译项目的电脑上。您可能需要更改路径。

# android - 将覆盖项添加到 ItemizedOverlay 时向 ArrayList 或 SortedMap 添加自定义索引

> ID：10653938
> 
> 赞同：0
> 
> 时间：2012-05-18T13:53:00.460
> 
> 标签：android, itemizedoverlay

我正在使用 ItemizedOverlay 在地图上显示事件点。我的主要目标是能够找到之前添加的事件，以便我可以删除（或编辑）它而不清除整个 itemizedOverlay。所以我决定将每个事件添加到 ArrayList 中，使用它自己的唯一 ID 作为索引。

这是我添加事件的代码。

```
myItemizedOverlay itemizedOverlay = new MyItemizedOverlay(drawable, mapView);

OverlayItem overlayItem = new OverlayItem(geoPoint, title, subtext);
itemizedOverlay.addOverlay(overlayItem, event_id);
mapOverlays.add(itemizedOverlay); 
```

这是 myItemizedOverlay 类的 ArrayList 和构造函数代码：

```
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

public void addOverlay(OverlayItem overlay, int event_id)
{
 // **Original** mOverlays.add(overlay);
    mOverlays.add(event_id, overlay);
    populate();
} 
```

所以我想我要说的是：将项目 OverlayItem 'overlay' 添加到位置 'event_id' 的 ArrayList mOverlays （例如，4）。

这给了我一个错误，虽然在这部分：

```
mOverlays.add(event_id, overlay); 
```

错误：

```
05-18 13:17:03.989: E/AndroidRuntime(559): Caused by: java.lang.IndexOutOfBoundsException: Invalid index 4, size is 0 
```

有谁知道这里出了什么问题？无论如何，我知道即使这有效，我也不能使用 ArrayList 来使用它，因为稍后删除事件（因此 ArrayList 中的一个项目）时，所有其他项目的索引都会相应地移动？这会搞砸的。

所以我查了一下，发现我应该使用 SortedMap 代替：

```
private SortedMap<Integer, OverlayItem> mOverlays = new TreeMap<Integer, OverlayItem>(); 
```

所以我做了，并将以下代码行更改为：

```
mOverlays.put(event_id, overlay); 
```

但这给了我错误，我不明白为什么（请参阅下面的完整错误）：具体来说，它在 myItemizedOverlay 的第 42 行给了我错误：

```
populate(); 
```

在 ItemizedOverlay 的第 311 行，我不知道如何访问并查看该行包含的内容，但它显然与上面的 populate() 错误有关。

在我有这个的第 418 行

```
itemizedOverlay.addOverlay(overlayItem, event_id); 
```

完整错误：

```
05-18 13:15:16.450: E/AndroidRuntime(524): FATAL EXCEPTION: main
05-18 13:15:16.450: E/AndroidRuntime(524): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cylbs.android/com.cylbs.android.Home}: java.lang.NullPointerException
05-18 13:15:16.450: E/AndroidRuntime(524):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
05-18 13:15:16.450: E/AndroidRuntime(524):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-18 13:15:16.450: E/AndroidRuntime(524):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-18 13:15:16.450: E/AndroidRuntime(524):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-18 13:15:16.450: E/AndroidRuntime(524):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-18 13:15:16.450: E/AndroidRuntime(524):  at android.os.Looper.loop(Looper.java:130)
05-18 13:15:16.450: E/AndroidRuntime(524):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-18 13:15:16.450: E/AndroidRuntime(524):  at java.lang.reflect.Method.invokeNative(Native Method)
05-18 13:15:16.450: E/AndroidRuntime(524):  at java.lang.reflect.Method.invoke(Method.java:507)
05-18 13:15:16.450: E/AndroidRuntime(524):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-18 13:15:16.450: E/AndroidRuntime(524):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-18 13:15:16.450: E/AndroidRuntime(524):  at dalvik.system.NativeStart.main(Native Method)
05-18 13:15:16.450: E/AndroidRuntime(524): Caused by: java.lang.NullPointerException
05-18 13:15:16.450: E/AndroidRuntime(524):  at com.google.android.maps.ItemizedOverlay.populate(ItemizedOverlay.java:311)
05-18 13:15:16.450: E/AndroidRuntime(524):  at com.cylbs.android.MyItemizedOverlay.addOverlay(MyItemizedOverlay.java:42)
05-18 13:15:16.450: E/AndroidRuntime(524):  at com.cylbs.android.Home.getEvents(Home.java:418)
05-18 13:15:16.450: E/AndroidRuntime(524):  at com.cylbs.android.Home.onCreate(Home.java:128)
05-18 13:15:16.450: E/AndroidRuntime(524):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-18 13:15:16.450: E/AndroidRuntime(524):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:48:02.203

你的`createItem`方法是什么样的？

*这可能应该是评论，但我无权访问评论，所以我会在收到回复时删除*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:20:33.963

错误

```
05-18 13:15:16.450: E/AndroidRuntime(524):  at com.google.android.maps.ItemizedOverlay.populate(ItemizedOverlay.java:311) 
```

是因为函数`createItem(int i)`返回造成的`null`。

# iphone - 在自定义键盘中添加表情符号

> ID：10653939
> 
> 赞同：2
> 
> 时间：2012-05-18T13:53:04.867
> 
> 标签：iphone, iphone-softkeyboard

我想在键盘中添加表情符号以添加评论`:P`，`<3`如果我这样做是为了创建自定义键盘，Apple 会拒绝我的应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:26:29.950

您可以在键盘上方添加带有按钮的简单 UIView，并在键盘出现时显示此视图。通过按下按钮，只需在文本中插入相应的微笑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:18:09.457

如果您使用的是 UITextField 之类的东西，您可以简单地创建一个带有“：P”之类的按钮的 UIView，然后将此视图分配给 UITextField 的 inputAccessoryView 属性。

# c# - 在内存地址中查找数字（值） - 无法识别 1 行

> ID：10653945
> 
> 赞同：1
> 
> 时间：2012-05-18T13:53:26.577
> 
> 标签：c#, memory-address, kernel32

这是代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;
namespace WindowsFormsApplication1
{

    public partial class Form1 : Form
    {
        [DllImport("user32.dll", EntryPoint = "GetWindowThreadProcessId")]
        public static extern int GetWindowThreadProcessId(IntPtr hWnd, out int lpdwProcessId);

        [DllImport("kernel32.dll", EntryPoint = "ReadProcessMemory")]
        public static extern Int32 ReadProcessMemory(IntPtr hProcess, int lpBaseAddress, out string buffer, int size, out int lpNumberOfBytesRead);

        public List<int> Search(string ProcessName, int _Length, int Value)
        {
             Process[] P = Process.GetProcessesByName(ProcessName);
            List<int> tmp = new List<int>();
            if (P.Length < 0) return tmp;
            try
            {
                if (P[0].HasExited)
                    return tmp;
            }
            catch { return tmp; }
            byte[] buff = new byte[4];
            int Address = P[0].MainModule.BaseAddress.ToInt32();
            for (int i = 0; i < _Length; i++)
            {
               ReadProcessMemory(P[0].Handle, Address + i, buff, 4, 0);
                if (BitConverter.ToInt32(buff, 0) == Value)
                {
                    tmp.Add(Address + i);
                }
            }
            return tmp;
        }

        public Form1()
        {

            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            listBox1.DataSource = Search("plugin-container", 0x100, 15035990);
        }
    }
} 
```

问题：

```
ReadProcessMemory(P[0].Handle, Address + i, buff, 4, 0); 
```

那条线是错误的 他用红线标记 有人知道为什么他不认识这条线吗？对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:09:56.690

Your P/Invoke definitions are not quite right. [While `lpBuffer` is annotated as an `__out` parameter, this does not translate to the .Net P/Invoke meaning of `out`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553%28v=vs.85%29.aspx). If you notice it is an `LPVOID`, which if this was truly a .Net `out` it should be `LPVOID*` (pointer to a pointer).

Instead:

```
[DllImport("kernel32.dll", EntryPoint = "ReadProcessMemory")]
public static extern bool ReadProcessMemory(
    IntPtr hProcess,             // <-- Pointers should be IntPtr
    IntPtr lpBaseAddress,
    byte[] buffer,               // <-- Using byte[], also IntPtr could be used
    uint size,                   // <-- SIZE_T is unsigned
    out uint lpNumberOfBytesRead); 
```

Used like so:

```
uint bytesRead;
byte[] buffer = new byte[4];
IntPtr baseAddress = P[0].MainModule.BaseAddress;
for (int i = 0; i < _Length; i++)
{
    IntPtr nextAddress = IntPtr.Add(baseAddress, i);
    if (ReadProcessMemory(
            P[0].Handle,
            nextAddress,
            buffer,
            (uint)buffer.Length,
            out bytesRead))
    {
        if (bytesRead == buffer.Length
         && BitConverter.ToInt32(buffer, 0) == Value)
        {
            tmp.Add(nextAddress);
        }
        else if (bytesRead != buffer.Length)
        {
            throw new InvalidOperationException(String.Format(
                @"Read {0} bytes (expecting {1}) at {2:X}",
                bytesRead,
                buffer.Length,
                nextAddress.ToInt64()));
        }
    }
    else
    {
        throw new InvalidOperationException(String.Format(
            @"Could not read {0} bytes at {1:X}",
            buffer.Length,
            nextAddress.ToInt64()));
    }
}

return tmp; 
```

# javascript - 如何使用 Chromebug 或 Firebug 调试 Add-on SDK 扩展面板

> ID：10653953
> 
> 赞同：0
> 
> 时间：2012-05-18T13:53:41.343
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk, chromebug

> **可能重复：**
> [Firefox 扩展调试](https://stackoverflow.com/questions/12663226/firefox-extension-debugging)

一些主题指出 Chromebug 可用于调试 Add-on SDK 扩展。我刚刚安装了它，但无法让它工作。我正在使用`-chromebug`命令行参数启动 Firefox 12.0，并希望能够检查面板的 JavaScript 代码，但 Chromebug 的文件和上下文选择器为空。我还能用什么？

# java - 什么是正确的模式？

> ID：10653956
> 
> 赞同：1
> 
> 时间：2012-05-18T13:53:53.730
> 
> 标签：java, spring, class, design-patterns

正确的解决方法是什么：

```
Class A {

methodDoSomeOperation() {

  ClassB b.someOperation(.....);
....

 }

ClassB {

someOperation(....) {

 if (this.someCondition) then{
   ClassC c.anotherOperation(....)
  } else {
 ClassD d....
 }
}

 } 
```

方法`c.anotherOperation`需要很长时间。我想收到有关所选内容的通知：`c.anotherOperation(....)`或`d.....`在调用之前在用户界面中显示`c.anotherOperation`。

就像是：

```
someOperation(....) {

if (this.someCondition) then{
 //notify ClassA what was selected and continue
 ClassC c.anotherOperation(....)
 } else {
 ClassD d....
 }
} 
```

显然可以调用一些方法，`ClassA`但这会产生强耦合和混乱的逻辑。是否可以使用 Spring 的某些功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:00:01.730

可能是您在寻找[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)吗？如果每个类都添加/聚合它们的部分，这将适用。

甚至是[责任链](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)？这可能更适用，因为每个类都可以选择性地进行处理。假设 A、B 和 C 类是处理对象，它们将具有定义它们将进行何种操作的逻辑，因此可以选择执行它们的特定处理，然后传递给下一个处理对象。考虑到您似乎将 A、B 和 C 链接在一起，每个都各司其职，这似乎最适合您的描述。然后，要了解哪些处理对象发挥了作用，您可以定义一个上下文并将其沿链传递，每个对象将填充它们的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T14:25:07.210

你会考虑某种形式的观察者模式吗？无论哪个更接近 UI 的类（可能是 A 类？）都可以注册为 B 类的观察者。这可以预先完成，也可以通过添加参数作为对 B.SomeOperation() 的调用的一部分。然后当你检查 B.someCondition 时，你可以调用注册的观察者然后调用 C 上的长时间运行的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T15:15:27.700

你想让用户有机会在 c.anotherOperation() 开始之前取消它吗？如果是这样，那么 someOperation() 实际上并没有调用它。相反，它会导致显示 ok/cancel 对话框，并且 UI 将 ok 选项视为导致 c.anotherOperation() 的命令。（也许又是 ClassA 和 ClassB，取决于他们的职责。）

# java - 使用 GPS 获取 MyLocation - 如何实现“if else”语句？

> ID：10653960
> 
> 赞同：0
> 
> 时间：2012-05-18T13:54:03.590
> 
> 标签：java, android, windows-mobile-gps

我是 android 新手，并且通过逆向工程来学习 java。

到目前为止使用下面的代码，我有一些问题需要解决，同时定制它以适应我的意图。

```
@Override

public void onCreate(Bundle savedInstanceState)

{

super.onCreate(savedInstanceState);

setContentView(R.layout.main);

/* Use the LocationManager class to obtain GPS locations */

LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

LocationListener mlocListener = new MyLocationListener();

mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);

}

/* Class My Location Listener */

public class MyLocationListener implements LocationListener

{

@Override

public void onLocationChanged(Location loc)

{

loc.getLatitude();

loc.getLongitude();

String Text = “My current location is: “ +

“Latitud = “ + loc.getLatitude() +

“Longitud = “ + loc.getLongitude();

Toast.makeText( getApplicationContext(),

Text,

Toast.LENGTH_SHORT).show();

}

@Override

public void onProviderDisabled(String provider)

{

Toast.makeText( getApplicationContext(),

“Gps Disabled”,

Toast.LENGTH_SHORT ).show();

}

@Override

public void onProviderEnabled(String provider)

{

Toast.makeText( getApplicationContext(),

“Gps Enabled”,

Toast.LENGTH_SHORT).show();

}

@Override

public void onStatusChanged(String provider, int status, Bundle extras)

{ 
```

问题是我的（android）主屏幕以显示两个选项（复选框）的复选框页面开始；

GPS 开启（启用） GPS 关闭（禁用）

现在，问题是，我不知道如何编写“if else”语句/方法，这可能有助于将“开启”场景引导到获取我的位置的下一阶段，并将“关闭”场景引导回开始（主屏幕）。

我在哪里/如何在代码中声明/插入复选框代码？

欢迎任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:17:50.227

基本复选框检查：

```
 final CheckBox cbGPS = (CheckBox) findViewById(R.id.checkBox1);
 cbGPS.setOnCheckedChangeListener(new OnCheckedChangeListener() {

      public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
            // TODO Auto-generated method stub
            if (buttonView.isChecked()) {
                  // do this if checked

                  StartGPSMethod();
           } else {
                  // if not checked do this
                  // do nothing  or

                    EndGPSMethod();
           }
      }
  }); 
```

# php - 比较2个字段并在MySQL中列出结果

> ID：10653969
> 
> 赞同：1
> 
> 时间：2012-05-18T13:54:25.777
> 
> 标签：php, mysql, sql

这可能已经被回答或者可能太容易了，但我还没有找到适合我的东西，所以我在这里。

我想要做的是列出具有 2 种匹配记录的人员列表，这就是我所拥有的：

```
----------------------------------------------------
| user_id | username | total_exp | exp_since_death |
| 1       | test     | 123       | 123             |
| 2       | abd      | 112       |  43             |
| 3       | bcd      | 144       | 144             |
| 4       | def      |  90       | 50              |
| 5       | asdf     | 173       | 173             |
| 6       | zxvf     | 220       | 113             |
---------------------------------------------------- 
```

这就是我想要展示的：

*   1 - 测试 - 123
*   3 - bcd - 144
*   5 - 自卫队 - 173

我怎样才能做到这一点？两个列，total_exp 和 exp_since_death，必须具有相同的值。非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T13:55:58.100

```
select user_id, username, total_exp
from yourtable
where total_exp = exp_since_death; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:58:00.890

```
Select user_id, username, total_exp from table
where total_exp = exp_since_death 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:58:24.277

使用此查询：

```
select * from table1 where total_exp = exp_since_death 
```

# jquery - 内联 CSS 工作，但 Jquery CSS 不能在同一个元素上工作

> ID：10653974
> 
> 赞同：1
> 
> 时间：2012-05-18T13:54:41.750
> 
> 标签：jquery, css

我需要对具有特定类名的元素进行更改。在我正在处理的网页的代码中找不到该元素。但是，它出现在页面上。当我尝试使用内部 css 进行样式更改时，它可以工作，但我无法单独使用 css 完成我想要完成的任务。因此，当我尝试使用 jquery css 对该类进行更改时，我无法修改该元素。关于为什么内联 css 有效但 jquery css 无效的任何想法？

我的 CSS 代码（这有效）：

```
.jqZoomWindow{
    border:2px solid red;
} 
```

jQuery 代码

```
$(".jqZoomWindow").css("border","2px solid red"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:56:55.297

这听起来像是一个 CSS 特异性问题。

创建的内联规则`.css(..)`总是优先于样式表规则。

您是否有其他一些影响边框的 CSS 样式比 更具体`.jqZoomWindow`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:58:06.263

> 在我正在处理的网页的代码中找不到该元素。但是，它出现在页面上。

如果您在页面上存在元素之前运行那一点 jQuery，那么它不会做任何事情。`.css()`仅使用 style 属性将 css 添加到元素中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:57:52.873

试试这个。

```
$(".jqZoomWindow").css({ 
     borderWidth: "2px", 
     borderStyle: "solid", 
     borderColor: "red"
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T14:00:51.470

问题是，在这两个 CSS 中，您都应用了相同的边框、颜色和像素。这就是为什么您无法看到差异的原因。

它按预期工作。参考这个**[DEMO](http://jsfiddle.net/3XYGd/)**和**[另一个 DEMO](http://jsfiddle.net/3XYGd/1/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T14:13:49.843

为什么不在 CSS 文件中创建一个新类，然后在需要时使用 .addClass() 添加它？您可以在 HTML 中手动添加类来测试它，如果它仍然不起作用，那肯定会缩小问题的范围。

更多信息：[http ://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

如果您必须使用 .css()，您是否尝试过使用任何其他类型的属性，例如颜色、字体粗细？

# windows - 在 Win7 中使用 Google App Engine 部署应用程序，连接需要带有身份验证的代理

> ID：10653977
> 
> 赞同：0
> 
> 时间：2012-05-18T13:54:54.457
> 
> 标签：windows, google-app-engine, deployment, proxy

我在大学代理后面，它也需要身份验证。我是学习应用程序开发的初学者，我已经尝试了很多关于堆栈溢出的论坛帖子，以及在 developer.google 上使用 Win7 中的 GAE 进行应用程序部署，连接需要代理和身份验证但徒劳无功。我在 cmd 窗口中使用了“set http_proxy.....”命令，但它从未要求我进行身份验证。

每次，我都会收到一个错误 no 10060 Connection timed out

这是我在“部署到 Google(Myapp) 窗口”中得到的结果——

```
2012-05-18 11:59:26 Running command: "['C:\\Python27\\python.exe', '-u', 'C:\\Program Files (x86)\\Google\\google_appengine\\appcfg.py', '--no_cookies', u'--email=aaaagrawal@gmail.com', '--passin', 'update', u'C:\\webapp\\arbitx']"
Application: arbitx; version: 1
Host: appengine.google.com

Starting update of app: arbitx, version: 1
Getting current resource limits.
2012-05-18 12:03:36,849 ERROR appcfg.py:2156 An error occurred processing file '': <urlopen error [Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond>. Aborting. 
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\appcfg.py", line 125, in <module>
    run_file(__file__, globals())
  File "C:\Program Files (x86)\Google\google_appengine\appcfg.py", line 121, in run_file
    execfile(script_path, globals_)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 4062, in <module>
    main(sys.argv)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 4053, in main
    result = AppCfgApp(argv).Run()
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 2543, in Run
    self.action(self)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 3810, in __call__
    return method()
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 3006, in Update
    self.UpdateVersion(rpcserver, self.basepath, appyaml)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 2995, in UpdateVersion
    self.options.max_size)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 2122, in DoUpload
    resource_limits = GetResourceLimits(self.rpcserver, self.config)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 355, in GetResourceLimits
    resource_limits.update(GetRemoteResourceLimits(rpcserver, config))
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 326, in GetRemoteResourceLimits
    version=config.version)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py", line 366, in Send
    f = self.opener.open(req)
  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 418, in _open
    '_open', req)
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1215, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "C:\Program Files (x86)\Google\google_appengine\lib\fancy_urllib\fancy_urllib\__init__.py", line 367, in do_open
    raise url_error
urllib2.URLError: <urlopen error [Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond>
2012-05-18 12:03:36 (Process exited with code 1)

You can close this window now. 
```

非常感谢在 Win7 中处理代理（带身份验证）和部署的分步说明。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:25:27.073

我没有将此标记为重复，因为您尝试通过控制台窗口而不是 GAE 启动器使用 Google App Engine API。但是，请尝试遵循我大约一年前发布的[这个问题中给出的建议。](https://stackoverflow.com/questions/6468191/google-app-engine-launcher-slow-to-launch-behind-proxy-possibly-because-of-ch)

简而言之，您需要在您的机器上设置一个名为的环境变量`HTTP_PROXY`，它的值需要是`host_or_ip:port`.

我与一家拥有代理服务器的公司合作，我也必须通过该代理服务器进行身份验证。只要我在我的机器上通过了身份验证，这种方法就可以在发布我的请求时不需要进行身份验证。

如果这仍然不起作用，您可以尝试修改`HTTP_PROXY`to的值`username:password@host_or_ip:port`。我没有尝试过（目前还不能），但如果您的代理服务器接受此类请求，这可能会起作用。

# php - PHP - REST API - http 标头 - 错误处理

> ID：10653978
> 
> 赞同：1
> 
> 时间：2012-05-18T13:54:54.707
> 
> 标签：php, api, rest, http-headers

我正在尝试返回一个 HTTP 标头和 XML，说明一个过程是否成功。

在开发我的 API 时，这一切似乎都运行良好，我正在从同一服务器对 API 进行测试调用，并将相关的标头状态代码与 XML 一起获取。但是，当我再次测试它但从其他服务器调用 API 并遇到问题时。

如果响应是 200，那么我会得到响应 XML。如果有错误，我会收到标头状态代码 OK，但不会收到错误 XML。我玩过错误消息功能，并注意到如果我注释掉`header($status_header);` 错误 XML 被发送。任何人都可以阐明为什么会发生这种情况吗？

```
 static function errorResponse($status = 400, $body = '')  {  

    $status_message = APIResponse::getStatusCodeMessage($status);
            $status_header = 'HTTP/1.1 ' . $status . ' ' . $status_message;  

    // set the HTTP status  
    header($status_header);   

    if($body == '')  {  
       // create the message if none is passed  
      $body = '';  

      switch($status)  
      {  
          case 401:  
              $body = 'You must be authorized to view this page.';  
              break;  
          case 404:  
              $body = 'The requested URL ' . $_SERVER['REQUEST_URI'] . ' was not found.';  
              break;  
          case 500:  
              $body = 'The server encountered an error processing your request.';  
              break;  
          case 501:  
              $body = 'The requested method is not implemented.';  
              break;  
      }  

    } 

      $response_xml = '<?xml version="1.0" encoding="utf-8"?> 
          <error>  
              <date>' . date("D, d M Y H:i:s", time()) . '</date>
              <status>' . $status . ' - ' . $status_message . '</status> 
              <message><![CDATA[' . $body . ']]></message> 
          </error>';  

      return $response_xml;  
      exit;  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:39:36.230

我现在已经对此进行了排序，这是我的包含 CURL 函数的类的错误，与此类无关。

# sap - 有没有什么快速简便的方法可以从 SAP 上传 Google Doc？

> ID：10653979
> 
> 赞同：1
> 
> 时间：2012-05-18T13:55:04.947
> 
> 标签：sap, google-docs, google-docs-api, google-apps

我们正在 SAP 中创建一个自定义表，其中包含我们需要的所有信息，客户需要将此表中的报告上传到 Google Docs。我们不使用商业设计。有没有其他快速简便的方法来上传我们的报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:44:12.160

我对 SAP 了解不多，但 Documents List API 有以编程方式将文档上传到 Google Docs 的方法：[https](https://developers.google.com/google-apps/documents-list/) ://developers.google.com/google-apps/documents-list/ 。

例如，如果您可以将 SAP 表导出为 csv 文件，则可以在上传过程中自动将其转换为 Google 电子表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T03:28:54.370

您还可以使用无需编程的解决方案，并在可以访问文件以自动同步到 Google Drive 的机器上安装 Google Drive 应用程序：

[http://support.google.com/drive/bin/answer.py?hl=en&answer=2374989](http://support.google.com/drive/bin/answer.py?hl=en&answer=2374989)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-19T03:35:08.313

建议您查看 SAP Developer Network (SDN) / SAP Community Network (SCN)，其中有一个名为 ABAP2GAPPS 的项目已经完成了这项工作。

请注意，ABAP2GAPPS 示例有点难以理解（但您可以从中学到很多东西），并且它还使用 OAuth2“授权代码流”OAuth2.0 流/模式，这需要最终用户的“同意”浏览器弹出窗口...因此，如果您想在没有最终用户交互的情况下从后台作业自动从 ABAP 推送文件，那么 ABAP2GAPPS 不是完整的答案（但同样，ABAP2GAPPS 是一个很好的例子，建议您查看它。）

我们最近能够使用 OAuth2 实现从 SAP ABAP 到 Google Fusion Table API 的接口，只需要大约 100 行 ABAP...我们采用的技术可以用于任何 Google API...这里有一个视频链接：

[链接 YouTube 视频接口 ABAP 到 Google API](http://youtu.be/uDgTxiR00cY)

希望你觉得这有帮助

# jquery - 用Thickbox加载元素后覆盖内联样式

> ID：10653980
> 
> 赞同：2
> 
> 时间：2012-05-18T13:55:07.323
> 
> 标签：jquery, html, css, inline, thickbox

我有一个表格，上面有一个绑定到`<a>`元素的厚框。当您单击该元素时，它会在框中加载一个 URL 并运行一些脚本。由于我正在使用的平台的限制，我无法访问脚本、thickbox.js 或正在加载的 HTML。我所能做的就是编写自己的样式和脚本。

问题是某些东西`#TB_window`在加载后会提供几种内联样式。看一看：

```
<div id="TB_window" style="position: fixed; z-index: 10002; top: 50%; left: 50%; margin-left: -315px; width: 630px; margin-top: -220px; display: block; "> 
```

我的整个问题在于宽度，我需要覆盖该样式。我试图将点击事件绑定到`<a>`，如下所示：

```
('a#btnReferAFriend').click(function(){
    if('#TB_title.length'){
        $('#TB_window').css('width','400px');
        alert($#TB_window.css('width');
    } else {
        alert('Wrong');
    }
}); 
```

结果是脚本是显示“400px”的警报。但就在此之后，我的样式被内联样式覆盖。我不知道到底发生了什么，我认为另一个脚本正在某个地方运行，也许是修改后的`thickbox.js`？

*应用内联样式后*，我应该怎么做才能覆盖它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:57:18.317

您可以使用以下样式：

```
#TB_window { width:400px !important; } 
```

这应该覆盖在内联样式中找到的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:59:13.950

您可以删除内联样式以强制它尊重您自己的声明：

```
$('#TB_window').removeAttr('style') 
```

# php - 如何使用 PHP 对字符串进行 rot13 处理？

> ID：10653981
> 
> 赞同：3
> 
> 时间：2012-05-18T13:55:08.103
> 
> 标签：php, decode, encode, rot13

我有一个很大的 php 代码，我想手动对其进行编码和解码。
我的问题是 php 代码里面有很多单引号和双引号，因此我在使用`str_rot13()`下面的函数时出现错误......
那么正确的语法是什么以及如何使用下面的函数进行编码：

```
str_rot13 ('That php Code'); 
```

我怎样才能解码那个编码文件？我找不到反向功能！

提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T13:56:02.393

rot13 的优点在于它具有反射性。应用 rot 13 两次（例如 rot 26）会让你回到原来的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T14:03:05.567

Rot 13 仅设计用于处理标准英文字母表的 26 个字符。如果您需要更多字符，您可能想看看[这里简要说明的 ROT47](http://en.wikipedia.org/wiki/ROT-47)

# javascript - 谷歌地图商店定位器将硬编码初始化修改为动态

> ID：10653985
> 
> 赞同：5
> 
> 时间：2012-05-18T13:55:41.163
> 
> 标签：javascript, google-maps-api-3, this, typeerror

我正在尝试修改此示例 [http://storelocator.googlecode.com/git/examples/panel.html](http://storelocator.googlecode.com/git/examples/panel.html)

javascript代码在这里： [https ://gist.github.com/2725336](https://gist.github.com/2725336)

我遇到困难的方面正在改变这一点：

```
MedicareDataSource.prototype.FEATURES_ = new storeLocator.FeatureSet(
  new storeLocator.Feature('Wheelchair-YES', 'Wheelchair access'),
  new storeLocator.Feature('Audio-YES', 'Audio')
); 
```

从一个函数创建 FeatureSet，例如，我有一个解析 JSON 对象的函数

```
WPmmDataSource.prototype.setFeatures_ = function(json) {
    var features = [];

    // convert features JSON to js object
    var rows = jQuery.parseJSON(json);

    // iterate through features collection
    jQuery.each(rows, function(i, row){

    var feature = new storeLocator.Feature(row.slug + '-YES', row.name)

    features.push(feature);
    });

    return  new storeLocator.FeatureSet(features);
    }; 
```

所以然后将第一个代码片段更改为类似

```
WPmmDataSource.prototype.FEATURES_ = this.setFeatures_(wpmm_features); 
```

返回错误：

```
Uncaught TypeError: Object [object Window] has no method 'setFeatures_' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T00:28:43.170

我认为您只需要对`WPmmDataSource.prototype`您的`setFeatures_`方法进行一些更改：

```
WPmmDataSource.prototype = {
    FEATURES_ : null,        
    setFeatures_ : function( json ) {
        //Set up an empty FEATURES_ FeatureSet
        this.FEATURES_ = new storeLocator.FeatureSet();
        //avoid the use of "this" within the jQuery loop by creating a local var
        var featureSet = this.FEATURES_;
        // convert features JSON to js object
        var rows = jQuery.parseJSON( json );
        // iterate through features collection
        jQuery.each( rows, function( i, row ) {
            featureSet.add(
                new storeLocator.Feature( row.slug + '-YES', row.name ) );
        });
    }
} 
```

有了这个，您不必通过从`setFeatures_`;返回一个值来完成分配。它可以直接访问该`FEATURES_`成员。所以这一行：

```
WPmmDataSource.prototype.FEATURES_ = this.setFeatures_(wpmm_features); 
```

不再需要。这也意味着稍后，当您创建 的实例时`WPmmDataSource`，您的代码可以像这样工作：

```
var wpmd = new WPmmDataSource( /* whatever options, etc. you want */ );
wpmd.setFeatures_( json );
// Thereafter, wpmd will have its FEATURES_ set 
```

我不确定您要达到什么目标，但我相信这将使您克服当前摊位的障碍。我希望这能让你继续前进 -

# php - PHP5 成员可见性

> ID：10653991
> 
> 赞同：0
> 
> 时间：2012-05-18T13:56:00.017
> 
> 标签：php, visibility, private, encapsulation

有人可以解释一下，为什么可以在 PHP 中执行以下操作，但是，例如，不能在 C# 或 Java 中执行以下操作：

```
Class A {
    protected $a = 'Howdy!';
}

Class B extends A {
    public function howdy() {
        $created = new A();
        echo $created->a; <----- This is legal due to per-class visibility
    }
}

$b = new B();
echo $b->howdy();  <----- Hence, no fatal error here 
```

此处似乎指定了此行为[**，**](http://php.net/manual/en/language.oop5.visibility.php)但**我无法理解其背后的根本原因** *（在我看来，不能简单地实现`per-class`可见性而不是`per-instance`没有充分理由的可见性）。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:01:30.800

这在 C#（和 Java 中）也是可能的。

```
class A                               // declare new class type B
{
   protected string a = "Howdy!";     // that has a protected member called `a`
}

class B : A                           // declare new type B which extends type A
{
   public void howdy()
   {
       A created = new A();
       Console.WriteLine(created.a);  // no problem accessing a b/c B extends A
   }
}

B bInst = new B();                    // create a new instance of type B
bInst.howdy();                        // invoke it's public method howdy() 
```

基本上发生了什么是这样的：

*   类 A 包含一个名为的*受保护*成员`a`，这意味着它在扩展 A 的类的范围内是可见的（在我们的例子中是类 B）
*   B 类扩展 a 以便它可以访问它的受保护成员（在我们的例子中`a`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T14:02:02.690

也可以在 C# 和 Java 中进行。`protected`表示该变量可以从 A 的任何子类访问。B 是 A 的子类，因此它可以访问该变量。这里没有魔法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T14:07:06.053

您链接到的页面有一个标题为[“其他对象的可见性”](http://php.net/manual/en/language.oop5.visibility.php#language.oop5.visibility-other-objects)的部分，其中指出：

> 相同类型的对象将可以访问彼此的私有成员和受保护成员，即使它们不是相同的实例。这是因为在这些对象内部时，特定于实现的细节是已知的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T19:33:41.120

它不起作用的原因是，正如您所指定的，PHP 在类级别实现访问控制，而其他语言使用实例级别的方法。

为什么有用？它允许您的类在不暴露其私有数据的情况下对其自身的其他实例进行操作。让我们举一个简单的值对象示例：

```
class Int {
    protected $value = 0;
    public function __construct($value) {
        $this->value = (int) $value;
    }
    public function add(Int $new) {
        return new Int($new->value + $this->value);
    }
}

$a = new Int(1);
$b = new Int(2);
$c = $a->add($b); 
```

这使您可以封装受保护的信息，但仍然可以跨实例使用它......

这两种方法各有利弊...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T14:27:57.017

如果你这样做是行不通的：

```
$b = new B();
echo $b->a; 
```

在您的示例中，您没有直接从 B() 访问 $a 成员。您正在从恰好从 B() 内部实例化的 A() 对象访问它。

# button - 如何在我的 Facebook 应用程序中添加“喜欢”按钮栏？

> ID：10653998
> 
> 赞同：1
> 
> 时间：2012-05-18T13:56:20.927
> 
> 标签：button, facebook-like, facebook-canvas

这是我的第一个 FB 应用程序，我真的需要一些帮助。我不知道如何在我的应用程序顶部显示这样的栏。

截图的网址是[http://www.perideogroup.com/greenparty/like-button-bar.jpg](http://www.perideogroup.com/greenparty/like-button-bar.jpg)

# asp.net - 如何在 IIS 上托管无限的未知域？

> ID：10653999
> 
> 赞同：2
> 
> 时间：2012-05-18T13:56:23.870
> 
> 标签：asp.net, .net, iis, powershell, dns

在当前正在开发的 web 应用程序的即将发布的版本中，我需要从一个站点为多个域提供服务。网站上的代码将识别各个域并相应地改变内容。我不知道我们将服务的所有域，因为客户可以将新域添加到他们的站点。编码部分，我知道怎么做——当客户添加一个域时，我们的数据库中会有一个相应的条目，这将作为控制显示哪组内容的关键。

问题是，我不擅长系统管理。服务器已经托管了十几个与此 webapp 无关的不同站点，因此并不是每个访问我们服务器 IP 的域都可以通过我上面描述的代码。如果我提前知道这些域，我可以简单地将它们指向我们服务器的 IP，然后在 IIS 中创建绑定来处理每个域。但是由于我不提前知道这些领域，所以我很茫然。我该怎么做才能使我的 IIS7 服务器支持这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T14:33:43.133

环顾四周后，我找到了一些选择。

**1) 将其构建到代码**
中 最好的选择可能是以 [编程方式在 IIS6](https://stackoverflow.com/q/3321927/259014)和[IIS7](http://bloggingabout.net/blogs/dennis/archive/2008/05/16/programmatically-creating-an-iis7-site.aspx)中创建绑定。通过这种方式，所有内容都集成到了 webapp 中，这意味着在应用程序之外没有任何麻烦或大惊小怪。它需要在应用程序本身中做更多的工作，但是保持事物整洁并将围绕此操作的所有功能保留在单个代码库中的好处几乎绝对值得。

**2) PowerShell**
另一种选择是为 powershell 设置一个脚本，让它根据检测到数据库更改的脚本来处理这些东西。这也可以很好地工作，但缺点是要创建两个代码库来维护。

**3）删除域绑定**
[这个答案](https://stackoverflow.com/a/8444458/259014)引导我尝试从 IIS 中的 webapp 绑定中删除现有域。进行此更改后，只需访问 IP 地址即可访问我的 webapp（因此绑定不再是问题）。到目前为止，我们为此 web 应用程序设置的一个域仍然可以到达所需的站点。因此，该解决方案似乎可以简单到在 IIS 的绑定中没有列出主机/域。只要只有一个站点执行此操作，所有与另一个绑定不匹配的流量都会加载该站点。这里的一个很大的好处是它比上面提到的任何编码解决方案都花费更少的时间/精力。缺点是您只能让服务器上的一个站点以这种方式执行，并且您不能再将服务器锁定为仅提供具有可识别域的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:05:14.647

是否可以向服务器添加额外的 IP 地址？

这样，您可以让 IIS 处理此 IP 地址上的所有请求，并仅为这些请求运行您的逻辑。保持现有网站不变。