# StackOverflow 问答 12021000-12021999

# php - Ubuntu 12.04 和 PHP 5.4 上缺少软件包

> ID：12021000
> 
> 赞同：1
> 
> 时间：2012-08-18T18:05:24.113
> 
> 标签：php, ubuntu, memcached

我已使用本指南将 PHP 升级到 5.4 版： [http ://www.barryodonovan.com/index.php/2012/05/22/ubuntu-12-04-precise-pangolin-and-php-5-4-再次](http://www.barryodonovan.com/index.php/2012/05/22/ubuntu-12-04-precise-pangolin-and-php-5-4-again)

现在，当我点击“$php -v”时，它会引发以下错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20100525/memcached.so' - /usr/lib/php5/20100525/memcached.so: undefined symbol: memcached_touch in Unknown on line 0 
```

如何正确安装“memcached”库？包管理器报告说我已经获得了最新版本。我什至尝试重新安装它也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:41:01.420

您需要正确版本的所有扩展。我们之前在这里遇到过这个问题。目前只有 memcache beta 在这个站点上支持 php5.4，你会得到一个编译的模块。

[找不到类“Memcache”和 PHP](https://stackoverflow.com/questions/11883378/class-memcache-not-found-php)

# html - 调整窗口大小时停止网页移动

> ID：12021005
> 
> 赞同：0
> 
> 时间：2012-08-18T18:05:47.963
> 
> 标签：html, css

所以我有一个网页，但是当我开始缩小窗口的大小时，所有元素开始相互堆叠，看起来很乱。IE

![YouTube](../Images/f3a52d2a843a42ad0ce7cd089f2bd0df.png)

Youtube 只是切断了所有内容，而不是所有图像相互堆叠。我怎样才能达到类似的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:15:40.080

默认情况下，块元素的宽度会调整为父元素，因此如果您不以像素为单位`width`对容器（或`min-width`）进行修复，则宽度将是`100%`并且通过调整子元素的大小来调整它。在容器中添加`width`/ ：`min-width`

```
#wrapper{
  width: 960px;
  margin: 0 auto;
  ...
} 
```

# ruby-on-rails - 使用 Indextank 搜索多个字段

> ID：12021008
> 
> 赞同：0
> 
> 时间：2012-08-18T18:06:00.100
> 
> 标签：ruby-on-rails, indextank

我正在索引书籍并在书籍的不同字段上执行文本搜索：

*   标题
*   作者
*   书籍摘要

我试图通过连接书名、作者姓名和书摘要来创建索引，但我的一些搜索没有返回预期的结果，我不明白为什么。

**索引书籍以便我同时搜索所有这些字段的正确方法是什么？**

--

这是代码示例：

```
book_text_index = "#{book.name} #{book.author} #{book.summary}"

idx.document("book_502").add({  :text => book_text_index,
                                  :book_id => "#{book.id}",
                                  :name => "#{book.name}",
                                  :author => "#{book.author}",
                                  :summary => "#{book.summary}"
                                }) 
```

*这是我为“Sun Tzu”*的*“L'art de la guerre”*一书获得的结果示例。

 *如果我搜索作者姓名（*“tzu”*），它会返回这本书：

> idx.search("tzu", :function => 1, :fetch => 'text' )['results']
> 
> => [{"text"=>"L'art de la guerre Sun Tzu Youboox libres de droits Traduit pour la première fois...", "docid"=>"book_502", "query_relevance_score"=>-2967.0}]

但是，如果我搜索书名的一部分（“guerre”），我不会在结果中得到这本书。

> idx.search("guerre", :function => 1, :fetch => 'book_id' )['results'].map { |result| 结果[“docid”]}
> 
> => [“book_1962”、“book_1963”、“book_1951”、“book_1832”、“book_1812”、“book_1787”、“book_1775”、“book_1778”、“book_1730”、“book_1740”]

您可以看到 book_502 不在结果中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:01:20.857

在回答您的问题时，“**索引书籍以便我同时搜索所有这些字段的正确方法是什么？** ” - 将字段连接到单个“文本”字段是实现这一目标的最简单方法。这种方法的一个可能的缺点是，对于相关性（结果的顺序），这赋予了书名、作者和摘要同等的权重。

在这种特殊情况下（书名、作者和摘要），我猜想书名和作者对于匹配而言比描述更“重要”。换句话说，如果用户的查询匹配书名，则比只匹配摘要的结果要好。如果是这种情况，您可以通过以下方式为您的用户获得更相关的结果（这需要更多的工作，但通常是值得的）。

首先，您索引到 3 个单独的字段：

1.  name - 包含书名
2.  author - 包含作者
3.  text - 包含书籍摘要，可能还有您想要匹配的其他关键字

然后在搜索时，为了搜索所有字段，您将使用 OR 查询。但是，为了给标题和作者更多的权重而不是摘要，您的查询将如下所示（例如用户搜索“guerre”）：

> 姓名：（盖尔）^6 或作者：（盖尔）^5 或文字：（盖尔）

另一个例子，如果用户搜索“sun tzu”：

> 姓名：（孙子）^6 或作者：（孙子）^5 或文字：（孙子）

括号对于保持正确的字段分组是必要的。所以你的查询模板将是这样的（注意，我的 Ruby 已经生锈了）：

```
searchify_query = "name:(#{user_query})^6 OR author:(#{user_query})^5 OR text:(#{user_query})" 
```

希望这可以帮助！*

# c - 结构混乱（2）

> ID：12021009
> 
> 赞同：-1
> 
> 时间：2012-08-18T18:06:07.673
> 
> 标签：c, arrays, function, compiler-construction, struct

> **可能重复：**
> [结构混淆](https://stackoverflow.com/questions/12020275/struct-confusion)

我需要帮助...我的代码中有一些错误（我在这些行中添加了一些注释），例如：

错误：“bookRecord”之前的预期表达式</p>

.....这是一个程序，它将一些书籍数据存储在一个结构数组中，并使用一个函数来查看用户搜索的书籍是否可用..

所以我想修复错误并使 bookRecord 看起来不像一个变量，

你知道我该怎么做吗，因为我在这里堆了几个小时！

提前致谢！

```
 #include<stdio.h>           
   #include <stdlib.h>
  #include <string.h>

 #define TRUE 1
  #define FALSE 0

 #define NUM_BOOKS 5

     typedef struct {
    int minute; 
    int hour;   
     } timeT;

typedef struct {

   char title[50];  
   char author[50];     
   int year;        
   int isOut;                   
   timeT time;      
   int isBlank;         
 } bookRecord;

/* given array of struct */

  bookRecord stacks[NUM_BOOKS]=
   {
   {"C How To Program", "Deitel", 2006, FALSE, {0,  0}, TRUE} ,
   {"The Old Capital", "Yasunari Kawabata", 1996, FALSE, { 0, 0}, TRUE},
   {"", "", 0, FALSE, {0,0}, FALSE},
   {"", "", 0, FALSE, {0,0}, FALSE},
   {"", "", 0, FALSE, {0,0}, FALSE}
   };

  int requestBook(bookRecord title[],bookRecord author[]){    /* compiler error */
      int i;
      for(i=0;i<=NUMBOOKS-1;i++){
              if(strcmp(stacks[i].tittle ,bookRecord.title[0]) == 0 &&                                                                              
              strcmp(stacks[i].author     ,bookRecord.author[0]) == 0 ){

              return 1;
               }
       }
               return 0;
  }

int main (int argc, char*argv[]) { 
int t;

scanf("%s ",bookRecord.title);         /* compiler error */
scanf("%s",bookRecord.author);     /* compiler error */

 t=requestBook(bookRecord.title, bookRecord.author);   /* compiler error*/
 printf("%d",t);

 return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:21:46.403

您的代码中的问题是您使用的是类型而不是变量！

```
bookRecord is a type not variable

int requestBook(bookRecord title[],bookRecord author[]){    /* compiler error */ 
```

改用它（以避免混淆）：

```
int requestBook(bookRecord title_record[],bookRecord author_record[]){ 
```

这里是 bookRecord 类型的结构数组，我不确定这种行为是你想要的，你应该为作者创建一个类型`title_record`。`author_record`

对于内部错误，请`main`使用 var`stacks`而不是 type `bookRecord`。

# php - 如何使用不同的操作提交表单

> ID：12021010
> 
> 赞同：0
> 
> 时间：2012-08-18T18:06:09.687
> 
> 标签：php, html

我正在尝试使用具有相同名称的提交按钮从数据库中检索信息。我给出的值是行的 id，所以我可以做出不同的动作，但我无法下定决心如何做到这一点。

例如，当这样尝试时

```
<form name="form" action="index.php" method="post">
<input type="image" name="x" value="1">

<input type="image" name="x" value="2">
</form> 
```

和 php =>

```
<?php
if (isset($_POST['x'])){
    echo $_POST['x'];
}
?> 
```

在chrome中它工作正常，但在其他浏览器中它没有，有什么想法吗？谢谢

**更新**

```
if ($r = $con->query("SELECT * FROM table")){
    if ($row = $r->fetch_assoc()){
        echo "<input type='image' name='submit' value='" . $row['id'] . "'>";
        // and other data which I need to
    }
    $r->free();
} 
```

我的意思是这样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:36:43.963

HTML

```
<form id="form1" action="index.php" method="post">
   <input type="button" name="x" value="1">    
   <input type="button" name="x" value="2">
   <input type="text" name="action" id="action">
</form>​ 
```

​ JavaScript

```
var nodes = document.getElementById('form1').childNodes;
for(var i=0; i<nodes.length; i++) {    
    nodes[i].onclick = function(){        
        if(this.name == 'x'){
          document.getElementById('action').value = this.value;
        }
    };
} 
```

PHP

```
if(isset($_POST['action'])){

   if($_POST['action'] == "1"){
      ...
   }

   if($_POST['action'] == "2"){
      ...
   }

} 
```

​http://jsfiddle.net/qLubz/

只需更改`type="text"`为`type="hidden"`准备部署时。

或者不使用 JavaScript：

```
<form action="index.php" method="post">
   <button type="submit" name="action" value="delete">Delete</button>
</form>​
<form action="index.php" method="post">
   <button type="submit" name="action" value="copy">Copy</button>
</form>​
<form action="index.php" method="post">
   <button type="submit" name="action" value="edit">Edit</button>
</form>​ 
```

# c# - ASP.NET Web 应用程序的 Cron 类型调度

> ID：12021013
> 
> 赞同：0
> 
> 时间：2012-08-18T18:06:30.250
> 
> 标签：c#, asp.net, cron, scheduler

我想知道 ASP.NET 的 Web 应用程序是否支持类似于类 Unix 平台上的 Cron 作业的调度功能？

PS。我正在使用 C# 在 VS2010 中进行编码，我需要此功能以根据日期和时间按可配置的时间表运行 C# 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:50:52.280

这听起来像是 Windows 服务项目类型。您可以使用 Web 项目作为编辑器，配置各种参数，并将它们保存到 db 或文件中，然后从 windows 服务中读取它们。

使用 Web 应用程序以不同的时间间隔执行某些任务并不是最好的主意。

虽然这在理论上可以完成，但也许您可以将其拆分为 2 个项目：1 个保存配置参数并可能显示任务状态的 Web 应用程序，以及 1 个读取参数、执行任务并可能更新其状态的 Windows 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:12:33.270

为什么不直接使用 Windows 任务调度程序来调度 C# 脚本呢？你没有管理员权限吗？

我使用 cron 在 unix 服务器上启动我的计划作业，并使用 Windows 任务计划程序在 Windows 服务器上运行它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:33:19.220

我们有一个可能正是您正在寻找的商业产品。JAMS 是一个企业级任务调度程序，它包含 ASP.NET 控件，您可以将其放到您的网页上。我们可以控制计划、监控和管理任务以及查询过去的历史记录。

而且，我们的 .NET 类库可以从 C#（或任何其他 .NET 语言）调用

如果您有兴趣，可以在以下位置获得更多信息：

[http://www.JAMSScheduler.com](http://www.JAMSScheduler.com)

# c - 没有来自 read() 的输出合并到 getchar

> ID：12021014
> 
> 赞同：2
> 
> 时间：2012-08-18T18:06:33.790
> 
> 标签：c, getchar, kernighan-and-ritchie

几个小时前，我问了一个关于这段代码的理论方面的问题。现在我明白了一切，但是，该代码根本没有输出。这是[http://ideone.com/LWMC5上代码的链接](http://ideone.com/LWMC5)

代码：

```
#include <stdio.h>
#include <unistd.h> /* changed from "syscalls.h" it was not working */
/* changed the name intentionally */
int main(void)
{

    static char buf[BUFSIZ];
    static char *bufp = buf; 
    static int n = 0;
    if (n == 0) {            /* buffer is empty */
        n = read(0, buf, sizeof buf);
        bufp = buf;          
    }
    return (--n >= 0) ? (unsigned char) *bufp++ : EOF; 
} 
```

我应该做什么/添加来产生输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:34:23.120

我不明白你对输出的期望是什么，要在屏幕上打印一些东西，你需要使用类似`printf`.

# php - 是否可以将 bind_param 用于 ORDER BY？

> ID：12021018
> 
> 赞同：9
> 
> 时间：2012-08-18T18:07:21.650
> 
> 标签：php, mysqli, sql-order-by, prepared-statement, bindparam

在我的脑海中，我有一个类似这样的查询：

```
$sort = isset($sort) ? sanitize($_sort) : 'id';

if ($result = $link->prepare("
    SELECT id, price
    FROM items
    ORDER BY ?
"))
{
    $result->bind_param("s", $sort);
    $result->execute();
    etc...
} 
```

当我在不设置排序变量的情况下运行此代码块时，它运行时不会出现与`?`在 ORDER BY 子句中使用相关的错误，并且结果集显示在看似带有“ORDER BY id”的结果集中。

**如果我将排序变量设置为“price ASC”之类的东西，我仍然会得到一个似乎是“ORDER BY id”而不是“ORDER BY price ASC”的结果集。**

现在，如果我更改代码并像这样运行它：

```
$sort = isset($sort) ? sanitize($_sort) : 'id';

if ($result = $link->prepare("
    SELECT id, price
    FROM items
    ORDER BY $sort
"))
{
    $result->execute();
    etc...
} 
```

它运行正确，结果集与我在 phpMyAdmin 中的查询相同。

这里到底发生了什么以及为什么查询没有按照我最初使用 bind_param 的意图运行。

在我看来，它应该可以工作，因为不会出现与此类使用相关的错误......但实际上它似乎不适用于 ORDER BY 子句。几乎就像它在运行 bind_param 时没有转换排序变量一样。

**编辑：**

对于任何有兴趣的人-

```
if (isset($sort))
{
    $acceptableSortValues = array('name', 'price ASC', 'price DESC');
    $sort = sanitize($sort);
    if (!in_array($sort, $acceptableSortValues))
    {
        $sort = 'name';
    }   
}
else
{
    $sort = 'name';
}

if ($result = $link->prepare("
    SELECT name, price
    FROM items
    ORDER BY $sort
"))
{
    $result->execute();
    etc...
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T18:17:15.423

只有*数据*可以与占位符绑定。

列/表名是*架构*的一部分，*不能绑定*。（它产生“奇怪的结果”而不是简单地产生错误的事实是实现的一个特点。）

我建议使用列名*白名单*和受控字符串插值。

# php - PHP 视图关联控制器

> ID：12021019
> 
> 赞同：0
> 
> 时间：2012-08-18T18:07:33.770
> 
> 标签：php, templates, yii, yii-routing

我想实现像 MVC 那样连接到任何特定视图的控制器。我**没有**使用 PHP 中提供的任何框架。

所以，我需要一些指导和建议。

我有一些控制器和视图。对于我的观点，我只想输出我的数据。我现在关心的是我`create()`在控制器中的函数（如）如何获取`$_POST['params']`用户在我的函数中输入的所有数据，并在控制器的函数`views/create.php`中创建一个新模型。`create()`

所以，现在，我正在考虑这样做，我将在我的控制器文件夹中创建**MyViews类。**目的是加载特定视图并将所有`$_POST`参数放入对象中。然后，像**Users_controllers**这样的每个控制器都会创建**MyViews**。在**Users_controllers**的函数中，比如`create()`, `destroy()`，我可能会使用**MyViews**中的函数来加载特定的视图来加载对象。

我找到了一个加载视图的源

```
<?php
class MyView {
protected $template_dir = 'templates/';
protected $vars = array();
public function __construct($template_dir = null) {
    if ($template_dir !== null) {
        // Check here whether this directory really exists
        $this->template_dir = $template_dir;
    }
}
public function render($template_file) {
    if (file_exists($this->template_dir.$template_file)) {
        include $this->template_dir.$template_file;
    } else {
        throw new Exception('no template file ' . $template_file . ' present in     directory ' . $this->template_dir);
    }
}
public function __set($name, $value) {
    $this->vars[$name] = $value;
}
public function __get($name) {
    return $this->vars[$name];
}
} ?> 
```

嗯，我不知道如何检测 _POST 参数

```
 if(isset($_POST['Post']))
    {
        $model->attributes=$_POST['Post'];
        if($model->save())
            $this->redirect(array('view','id'=>$model->id));
    } 
```

这是我观察到的 Yii 框架。我如何检测参数是加载特定视图`$_POST`还是`$_GET`加载特定视图之后。

对归档我的任务有任何指导和建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:11:49.463

> [**不相关的问题**
> 你有一个主要问题：你表达什么意思的能力非常有限。您提出的问题实际上与您的问题无关。]

根据我收集的信息，您需要检测用户提出的请求`POST`或`GET`请求。直接检测你可以检查`$_SERVER['REQUEST_METHOD']`，但是用控制器检查它可能会很麻烦。您最终会得到很多控制器的方法，这些方法的行为会根据请求方法而有所不同。

由于您没有使用任何流行的框架，因此建议您将此决定委托给路由机制。

在我看来，处理这个问题的一个很好的方法是在控制器的方法名称前加上 request method:`postLogin()`等`getArticles()`。你可以[在这里](https://stackoverflow.com/a/11855644/727208)找到一些额外的例子。如果有`POST`请求，它将*在*数组中包含一些`$_POST`内容。

> [所谓的“视图”实际上是模板。如果您阅读[这篇文章](http://codeangel.org/articles/simple-php-template-engine.html)，您会注意到，那里的代码实际上是您的`MyView`. 视图不是模板。视图是包含表示逻辑和操作多个模板的实例。]

[**PS**如果您正在探索与 PHP 相关的 MVC 和受 MVC 启发的模式，您可能会发现[**这篇文章**](https://stackoverflow.com/a/5864000/727208)很有用。]

# entity-framework - C#动态类型如何访问一些方法和slef跟踪实体

> ID：12021020
> 
> 赞同：0
> 
> 时间：2012-08-18T18:07:35.303
> 
> 标签：entity-framework, dynamic, self-tracking-entities

我使用了动态类型，这是 .NET 4.0 中的一种新类型。

我想使用动态类型，因为我想使用一些事先我不知道类型是什么的类型，但我知道所有这些可能的类型都有一些常用的方法。

就我而言，我在实体框架 4.0 中使用自我跟踪实体，并且我知道所有实体都具有标记为XXX的方法（用于设置实体的状态）。

通过我创建的动态对象，我可以访问和设置其中一个实体的属性，但是当我尝试执行 MarkedAsXXX 方法时，我得到一个异常，指出该对象尚未定义该方法。

我想知道如何访问这些方法。是否可以？

因为我有一个可以访问原始值并将此值设置为当前值的函数，但是我需要将实体设置为 Unchenged。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:22:40.903

> 我想使用动态类型，因为我想使用一些事先我不知道类型是什么的类型，但我知道所有这些可能的类型都有一些常用的方法。

这表明您应该使用这些常用方法创建一个接口，并使所有相关类型都实现该接口。

> 通过我创建的动态对象，我可以访问和设置其中一个实体的属性，但是当我尝试执行 MarkedAsXXX 方法时，我得到一个异常，指出该对象尚未定义该方法。

这可能是由于*显式接口实现*。如果这些类型以正常方式将这些方法声明为公共方法，那应该没问题。

如果您*真的*想对这些类型使用动态类型，是否有一些声明 MarkedAsXXX 方法的基本接口，您可以在调用这些方法之前将对象转换为这些方法？（我对实体框架不熟悉，所以不知道那些方法的细节。）

基本上，我会尽量避免动态类型，除非你真的需要它，部分原因是像这样的边缘情况——但如果显式接口实现*是*原因，那么转换到该接口应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:15:31.167

如果您为动态生成的类定义一个接口，您可以调用这些方法而无需反射调用的麻烦。

# javascript - Javascript - 减去日期和时间

> ID：12021022
> 
> 赞同：0
> 
> 时间：2012-08-18T18:07:42.980
> 
> 标签：javascript

我试图弄清楚如何子跟踪时间。我的 #1 目标是找出日期和时间是否已超过当前日期和时间。我已经发布了另一个问题，但没有得到答案，或者我只是没有按照他们正确地告诉我的事情去做。

我一直在尝试这个：

**以下脚本的返回值...**
CookieTime 值 = 8/16/2012 12:34:00 AM
CookieTime = 0
解析日期 = 946702800000
currTime = 8-18-2012 1345311956215
CookieTime - currTime = NaN

```
document.write('CookieTime Values = ' + reminders[0].reminderdate + ' ' + reminders[0].remindertime + '<br/>'); // = 8/16/2012 12:34:00 AM
var CookieTime = new Date(reminders[0].reminderdate & ' ' & reminders[0].remindertime);
CookieTime = CookieTime.getTime()

document.write('CookieTime = ' + CookieTime + '<br/>'); // = 0
document.write('Parsed Date = ' + Date.parse(CookieTime)  + '<br/>'); // = 946702800000

var currDate = new Date();
var currDate = currDate.getMonth() + 1 + "-" + currDate.getDate() + "-" + currDate.getFullYear();

var currTime = new Date();
currTime = currDate + ' ' + currTime.getTime();
document.write('currTime = ' + currTime + '<br/>'); // = 8-18-2012 1345410601357

document.write('CookieTime - currTime = ' + CookieTime - currTime + '<br/>'); // = NaN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:15:53.970

在这种情况下，您有：

```
var CookieTime = new Date('8/16/2012 12:34:00 AM'); // Date {Thu Aug 16 2012 00:34:00 GMT+0300 (EEST)}
console.log(CookieTime.getTime()); // 1345066440000

var currDate = new Date();
var date = currDate.getMonth() + 1 + "-" + currDate.getDate() + "-" + currDate.getFullYear(); // 8-18-2012
var time = currDate.getTime(); // NOW it's 1345314741769
console.log(date + ' ' + time); // 8-18-2012 1345314741769

var difference = CookieTime - currDate;
console.log(difference); // -248301769 
```

现在您可以检查是否`difference`低于零然后`CookieTime`没有超过当前时间 - 它有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T18:21:31.227

```
if (new Date().getTime() > Date.parse(cookieTime)) {
  console.log('Current datetime > cookie datetime do what you have to');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T18:16:18.230

无需分开日期和时间：

只需减去 (new Date()).getTime()

# objective-c - 如何使我的数据库与 TICoreDataSync 保持同步？

> ID：12021029
> 
> 赞同：0
> 
> 时间：2012-08-18T18:08:55.260
> 
> 标签：objective-c, ios, cocoa-touch, dropbox, ticoredatasync

我一直在研究这个问题一段时间。这是发生的事情：

我的应用程序已启动。它已经在核心数据存储中拥有现有数据。然后它使用 TICoreDataSync 连接到 Dropbox。

然后我连接第二个设备，它也有现有数据。我以同样的方式将它连接到 Dropbox。

然后发生的是，当我同步时，它会在两者之间和谐地同步数据。在两台设备上同步后，我在一台设备上所做的任何更改都会发送到另一台设备。问题是，我希望将数据库中的现有数据上传到 Dropbox 并包含在同步中，因此两台设备都有所有数据。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T04:17:31.680

这实际上不是 TICoreDataSync 的工作方式。它不会为您合并这两个存储文件，而是将第一台设备上传的存储文件下拉到第二台设备，然后使*这些*存储文件保持同步。从您的描述看来，您在同步管理器注册期间跳过了整个商店的上传和下载步骤。

# linux - 如何按顺序运行多个程序？

> ID：12021032
> 
> 赞同：0
> 
> 时间：2012-08-18T18:09:08.263
> 
> 标签：linux, bash, shell

我有三个不同的可执行文件依次运行，其中两个是字节可执行文件。我想按顺序自动运行它们。它最初也需要用户输入。如何使用脚本自动执行此操作？任何人都可以重定向到一些教程或示例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T18:19:22.487

用分号分隔以进行顺序执行：

```
cmd1 ; cmd2 ; cmd3 
```

用 '&&' 分隔，以便下一个 cmd 仅在前一个成功时运行：

```
cmd1 && cmd2 && cmd3 
```

这是一个[教程](http://www.devshed.com/c/a/BrainDump/Executing-Commands-with-bash/)。请参阅第 4.3 节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T05:19:26.590

您可以为它编写一个简单的 shell 脚本。

**测试.sh**

```
#!/bin/sh

<Paste your commands> 
```

**执行代码：**

```
sh Test.sh 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-23T13:45:15.250

你的要求很模糊。“我需要按顺序执行一些需要用户输入的东西”。Bash 为我们提供了很大的灵活性，可以根据具体情况解决这些问题，但要真正给您一个好的答案，我们可能想知道命令是什么以及需要什么输入。只想按顺序执行命令？分号是给你的

```
cmd1 ; cmd2; cmd3 
```

如果其中一个命令失败，或者第二个命令是否应该仅在第一个命令成功完成后执行，这有关系吗？如果这些退出代码很重要，您最好使用双 &&

```
cmd1 && cmd2 && cmd3 
```

很多时候，用户输入可以重定向到程序中或使用参数在命令行中指定，例如：

```
{ echo "remotecommand 1" } | telnet localhost 1234 
```

或者

```
ssh -o StrictHostKeyChecking=no 192.168.1.1 
```

除此之外，您开始需要期望脚本。因此，您会看到很多情况下可以实现自动化，但没有太多可做的事情，很难给您一个具体的答案。

# input - 如何在 .bat 中请求和接收用户输入并使用它来运行某个程序？

> ID：12021033
> 
> 赞同：30
> 
> 时间：2012-08-18T18:09:28.817
> 
> 标签：input, batch-file

这是我到目前为止所拥有的

```
@echo off
:Ask
echo Would you like to use developer mode?(Y/N)
set INPUT=
set /P INPUT=Type input: %=%
If %INPUT%=="y" goto yes 
If %INPUT%=="n" goto no
If %INPUT%=="Y" goto yes
If %INPUT%=="N" goto no
:yes
java -jar lib/RSBot-4030.jar -dev
echo Starting RSbot in developer mode
:no
java -jar lib/RSBot-4030.jar
echo Starting RSbot in regular mode
pause 
```

无论哪种方式，如果用户输入 y 或 n，它总是在 -dev 模式下运行。

如果答案是肯定的，我如何让它在 -dev 模式下运行，如果答案是否定的，我如何让它在常规模式下运行。另外，如果输入不是 Y、N、y 或 n，我如何让它再次询问？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-18T19:55:59.210

如果输入是，比如说，`N`你的 IF 行评估如下：

```
If N=="y" goto yes 
If N=="n" goto no
… 
```

也就是说，您正在`N`与`"y"`, then`"n"`等进行比较，包括`"N"`. 除非用户以某种方式决定输入`"N"`或`"y"`（即四个字符中的任何一个，但用双引号括起来），否则您永远不会得到匹配。

因此，您需要`"`从 around`y`中删除`n`，`Y`或者`N`将它们`%INPUT%`放在您的条件语句中。我会推荐后者，因为这样你会转义至少一些在批处理脚本中具有特殊含义的字符（如果用户设法输入它们）。所以，这就是你应该得到的：

```
If **"%INPUT%"**=="y" goto yes 
If **"%INPUT%"**=="n" goto no
If **"%INPUT%"**=="Y" goto yes
If **"%INPUT%"**=="N" goto no 
```

顺便说一句，您可以通过将`/I`switch 应用于`IF`语句来减少条件的数量，如下所示：

```
If **/I** "%INPUT%"=="y" goto yes 
If **/I** "%INPUT%"=="n" goto no 
```

该`/I`开关使比较不区分大小写，因此您不需要单独检查不同大小写的字符串。

另一个问题是，在执行开发模式命令后，没有跳过另一个命令，因此，如果用户同意在开发模式下运行 Java，他将使其同时在开发模式和非开发模式。所以也许你需要在你的脚本中添加这样的东西：

```
...
:yes
java -jar lib/RSBot-4030.jar -dev
echo Starting RSbot in developer mode
**goto cont**
:no
java -jar lib/RSBot-4030.jar
echo Starting RSbot in regular mode
**:cont**
pause 
```

最后，为了解决处理错误输入的问题，您可以简单地在条件语句之后，标签`goto`之前添加另一个（无条件）命令，即返回到显示提示并且输入为的脚本开头请求，或者您也可以*在*跳转之前添加另一个 ECHO 命令，说明输入不正确，如下所示：`yes``goto Ask`

 *```
@echo off
:Ask
echo Would you like to use developer mode?(Y/N)
set INPUT=
set /P INPUT=Type input: %=%
If /I "%INPUT%"=="y" goto yes 
If /I "%INPUT%"=="n" goto no
**echo Incorrect input & goto Ask**
:yes
... 
```

* * *

*注意：@xmjx 在他们的回答中也解决了这里提到的一些问题，我完全承认这一点。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-23T23:27:05.153

我只是做 ：

```
set /p input= yes or no
if %input%==yes echo you clicked yes
if %input%==no echo you clicked no
pause 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-06T08:06:09.857

这是一个工作示例：

```
@echo off
:ask
@echo echo Would you like to use developer mode?(Y/N)
set INPUT=
set /P INPUT=Type input: %=%
If /I "%INPUT%"=="y" goto yes 
If /I "%INPUT%"=="n" goto no
goto ask
:yes
@echo you select yes
goto exit
:no
@echo you select no
goto exit
:exit
@pause 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-03T06:52:57.620

我改进了带有是或否提示的批处理文件。如果用户输入除 y 和 n 之外的任何字符，那么它将再次提示用户输入有效输入。这个对我有用。

```
 @echo off

    :ConfirmBox 
        set /P c= Are you sure want to contine (y/n)?

    if /I "%c%" EQU "Y" (
    goto :FnYes 
    ) else if /I "%c%" EQU "N" ( 
    goto :FnNo
    ) else ( 
    goto :InValid 
    )

:FnYes
     echo You have entered Y
     goto :END

:FnNo
     echo You have entered N
     goto :END

:InValid
     echo Invalid selection. Enter Y or N
     goto :ConfirmBox

:END
    pause
    exit 
```

/I in if 条件将验证小写和大写字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T19:15:17.837

我不知道您在哪个平台上执行此操作，但由于 .bat 扩展名，我假设是 Windows。

此外，我没有办法检查这一点，但这似乎批处理处理器由于某些错误而跳过了 If 行，然后使用 -dev 执行该行。

您可以通过更改两个跳转目标 (`:yes`和`:no`) 以及代码来尝试此操作。如果然后执行没有 -dev 的行，您就知道您的 If 行是错误的。

如果是这样，请检查是否真的是在文件中`==`进行比较的正确方法。`.bat`

此外，从 bash 执行此操作的方式来看，只有在包含引号`%foo=="y"`时才可能评估为 true 。`%foo`所以也许`"%foo"=="y"`是要走的路。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-20T12:14:24.593

```
echo off
setlocal
SET AREYOUSURE = N
:PROMPT
set /P AREYOUSURE=Update Release Files (Y/N)?
if /I %AREYOUSURE% NEQ Y GOTO END
set /P AREYOUSURE=Are You Sure you want to Update Release Files (Y/N)?
if /I %AREYOUSURE% NEQ Y GOTO END

echo Copying New Files

:END 
```

这是我经常使用的代码。我注意到在此博客的示例中使用了引号。如果测试行更改为使用引号，则测试无效。

```
if /I %AREYOUSURE% NEQ "Y" GOTO END 
```

我已经在 XP、Vista、Win7 和 Win8 上进行了测试。使用引号时全部失败。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-05T16:33:06.607

根据 Windows 的版本，您可能会发现使用“选择”选项会有所帮助。据我所知，如果不是所有 x64 版本，大多数版本都不支持它。可以在 SourceForge 上以名称 Choice.zip 找到名为 Choice.vbs 的方便替换以及使用示例

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-05-22T00:54:27.237

在 %INPUT% 周围添加引号 (" ")，使其看起来像这样：

```
If "%INPUT%" == "y" goto yes
If "%INPUT%" == "n" goto no
If "%INPUT%" == "Y" goto yes
If "%INPUT%" == "N" goto no 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2014-02-21T11:34:14.157

试试这个比较

```
if "%INPUT%"=="y"... 
```*

# c# - 加载 jpg 然后在其上以 90 度角写一些文字。然后转换成pdf？

> ID：12021035
> 
> 赞同：0
> 
> 时间：2012-08-18T18:09:39.643
> 
> 标签：c#, pdfsharp

使用 pdfsharp.net 库——我试图加载一个大背景 jpg 然后在它上面以 90 度角写一些文本。然后另存为pdf

为什么我下面的 c# 代码不起作用。

```
using System.Diagnostics;
using System.IO;
using System.Drawing;
using PdfSharp;
using PdfSharp.Drawing;
using PdfSharp.Pdf;
using PdfSharp.Pdf.IO;
using System.Drawing.Imaging;

namespace test
{

    class Program
    {
        static void Main(string[] args)
        {
            PdfDocument myDoc = new PdfDocument();
            PdfPage myPage = myDoc.AddPage();
            myPage.Size = PdfSharp.PageSize.A4;

            XGraphics g = XGraphics.FromPdfPage(myPage);
            XImage image = XImage.FromFile(@"myjpg.jpg");
            g.DrawImage(image, 0, 0, myPage.Width, myPage.Height);

            XFont font = new XFont("Verdana", 20, XFontStyle.BoldItalic);
            g.RotateAtTransform(90,new XPoint(0,0));
            g.DrawString("test text!", font, XBrushes.Black, new XRect(0, 0, 200, 50), XStringFormats.Center);

            myDoc.Save(@"test.pdf");
            Process.Start(@"test.pdf");
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:01:46.803

只是一个疯狂的猜测：您在 (0,0) 处旋转 - 也许您正在将文本旋转出页面。只是假设你看到图片而不是文字。
有关使用旋转的工作示例，请参见此处：
[http ://www.pdfsharp.net/wiki/XForms-sample.ashx](http://www.pdfsharp.net/wiki/XForms-sample.ashx)

样本中的旋转中心不是 (0,0)。

如果我的猜测是错误的，请提供更多信息你的代码是做什么的。

# php - 在 PHP 中处理多个会话

> ID：12021037
> 
> 赞同：0
> 
> 时间：2012-08-18T18:09:56.850
> 
> 标签：php, session, session-variables

我有一个包含许多 PHP 页面的简单网站。其中，有四个页面使用了公共变量，我应该存储在会话对象中。但问题是，这些值不应该对其他页面可见，所以我决定使用它`session_name`来创建一个新会话。它将启动一个新会话，但是这四个页面正在使用旧会话中的值，这在我尝试打印时产生了一个问题`$_SESSION`：在我的新会话开始后它是一个空数组。我希望这个新会话保留旧值和新值。

我不是在寻找这种`$_SESSION['page_group']['variable_name']`解决方案，因为我不能使用数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:23:21.333

使用类似的东西怎么样

```
session_start();
$temp=$_SESSION;
session_write_close();
session_name("newname");
session_start(); 
```

然后将 $temp 合并到（新的）$_SESSION（需要的地方）？

# entity-framework - 实体框架代码第一最小基数

> ID：12021039
> 
> 赞同：3
> 
> 时间：2012-08-18T18:10:05.757
> 
> 标签：entity-framework, ef-code-first

假设我有以下实体类：

```
public class Order
{
    public int OrderID { get; set; }
    public ICollection<OrderLine> OrderLines { get; set; }
}

public class OrderLine
{
    public int OrderLineID { get; set; }
    public Order Order { get; set; }
} 
```

我想为此关系强制执行最小基数 1；即我想确保没有至少 1 个 OrderLine 就不能创建一个订单。

我正在使用 EF 代码优先流式样式配置，并且我能够强制执行 OrderLine 必须具有 Order 引用（使用 HasRequired() 扩展方法）的事实，但我看不出如何防止在没有至少一个的情况下创建 Order订单行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T18:23:30.433

简而言之：你不能。您的需求不能映射到数据库约束：订单和订单行是分开保存的，因此当您创建订单并添加订单行时，必须先保存订单或订单行。订单行 -> 订单关系由外键支持，因此必须先保存订单。保存订单时，据数据库所知，订单没有订单行，直到稍后才添加。

您可以创建自定义验证函数并在保存之前调用它们。如果您使用的是`ObjectContext`，则必须自己执行此操作。如果你有一个`DbContext`，你应该能够覆盖[`DbContext.ValidateEntity`](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext.validateentity%28v=vs.103%29.aspx). 出于显而易见的原因，这仅在您通过上下文进行所有数据库修改时才有效。如果您直接修改数据库表，则不会使用自定义验证函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T00:49:23.527

可以做到，只是没有流畅的配置：

```
public class Order : IValidatableObject
{
    public IEnumerable<ValidationResult> Validate(
           ValidationContext validationContext)
    {
        if (!OrderLines.Any())
            yield return new ValidationResult("At least one line needed");
    }
} 
```

当您`SaveChanges()`像`Required`属性或任何其他模型约束一样，这将被强制执行。

# graphics - 这段代码的复杂度是多少？

> ID：12021040
> 
> 赞同：3
> 
> 时间：2012-08-18T18:10:12.883
> 
> 标签：graphics, geometry, complexity-theory, polygon

![在此处输入图像描述](../Images/f138446e7d1337d39beb431f7c1f26df.png)

我在 Face Table List 中表示了上述模型，其中`F1, F2,...F_n`是模型的面，它们的面号是列表数组的索引。每个列表元素是另一个包含 3 个顶点的数组。每个顶点是一个由 3 个整数组成的数组，表示其`x,y,z`坐标。

我想用坐标找出顶点的所有相邻面`(x2, y2, z2)`。我提出了这个我相信可以完成任务的代码：

```
List faceList;   //say the faceList is the table in the picture above.
int[] targetVertex = {x2, y2, z2};   //say this is the vertex I want to find with coordinates (x2, y2, z2)
List faceIndexFoundList; //This is the result, which is a list of index of the neighbouring faces of the targetVertex

for(int i=0; i<faceList.length; i++) {
   bool vertexMatched = true;
   for(int j=0; j<faceList[i].length; j++) {
      if(faceList[i][j][0] != targetVertex[0] && faceList[i][j][1] != targetVertex[1] && faceList[i][j][2] != targetVertex[2]) {
         vertexMatched = false;
         break;
      }
   }
   if(vertexMatched == true) {
      faceIndexFoundList.add(i);
   }
} 
```

有人告诉我，完成这项任务的复杂性是 O(N^2)。但是使用我拥有的代码，它看起来只有 O(N)。的长度`targetVertex`为 3，因为每个多边形只有 3 个顶点。所以，第二个内循环只是一个常数。然后，我只留下了外`for`循环，也就是 O(N)。

我上面的代码的复杂性是多少？我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T20:23:02.103

复杂度（近似）为 faceList.length * faceList[i].length，它们是独立的，但都可以变得非常大，并且随着它们的增长，它们将各自接近无穷大，在该点（从概念上）它们将收敛于 n，结果复杂度为 O(n^2)

如果顶点列表明确限制为3，那么复杂度就变成了faceList[i].length * 3，也就是O(n)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T00:47:44.977

很明显，在最坏的情况下，您必须查看每个多边形的每个顶点。

这只是您帖子中的 O（表格大小），这又是所有行长度的总和或所有多边形顶点数的总和，无论您喜欢哪个。

如果你说多边形的顶点不超过 m，并且有 n 个多边形，那么算法就是 O(mn)。

FWIW 可以使用更复杂的数据结构完全无需搜索即可获得答案。参见例如[有翼边缘数据结构](http://en.wikipedia.org/wiki/Winged_edge)等。在这种情况下，您只需转到您感兴趣的顶点并遍历连接所有相邻多边形的链接。输出中每个多边形的成本是恒定的。

这些用于多边形网格的更高级的数据结构以出色的效率支持许多常用操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T05:06:15.843

来自[维基百科](http://en.wikipedia.org/wiki/Big_O_notation#Use_in_computer_science)：

> 大 O 表示法用于描述当参数趋于特定值或无穷大时函数的限制行为。

在这种情况下，您可能只运行一个`for`循环。但是当多边形的顶点数接近无穷大时会发生什么呢？大多数情况会导致第二个`for`循环运行还是中断？这将确定您的函数是`O(n)`还是`O(n^2)`。

# css - 如何定义 div 的链接颜色？

> ID：12021045
> 
> 赞同：11
> 
> 时间：2012-08-18T18:10:34.910
> 
> 标签：css, html, colors, hyperlink

我正在尝试仅在一个特定的开发层中更改链接的属性。理想情况下，我将能够拥有一个代码，它可以使文档中的每个链接保持相同的颜色，尽管它的状态，但我认为这是不可能的。

这是我目前拥有的编码，但它不起作用：

```
<head>
<style type="text/css">

body {
background-color:#B7B7B7;
background-image:url('http://pophatesfags.site90.net/pophatesfags.png');
background-repeat:no-repeat;
background-position:center top;
}

.text {
font-style: italic;
border-bottom:1px dashed black;
}

div.home {
a:link { color: #70DB93; }
a:visited { color: #70DB93; }
a:hover { color: #70DB93; }
a:active { color: #70DB93; }
}

</style>
</head>

<font color="70DB93"
<div id="home" class="div" style="position:absolute; width:715; height:42; left:27%; top:178px">
<span class="text">
<a href="http://www.pophatesfags.site90.net/home.html">home</font></a></div></style> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-18T18:17:22.753

我假设您想更改“home”div 中链接的颜色。CSS代码将是 -

```
#home a:link { color: #70DB93; }
#home a:visited { color: #70DB93; }
#home a:hover { color: #70DB93; }
#home a:active { color: #70DB93; } 
```

试试看，让我们知道！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T18:13:16.320

```
<head>
<style type="text/css">

body {
background-color:#B7B7B7;
background-image:url('http://pophatesfags.site90.net/pophatesfags.png');
background-repeat:no-repeat;
background-position:center top;
}

.text {
font-style: italic;
border-bottom:1px dashed black;
}

div#home a:link { color: #70DB93; }
div#home a:visited { color: #70DB93; }
div#home a:hover { color: #70DB93; }
div#home a:active { color: #70DB93; }

</style>
</head>

<div id="home" class="div" style="position:absolute; width:715; height:42; left:27%; top:178px">
<span class="text">
<a href="http://www.pophatesfags.site90.net/home.html">home</a></div> 
```

​</p>

[http://jsbin.com/ujivoy/1/edit](http://jsbin.com/ujivoy/1/edit)

# javascript - 在javascript中的变量内传递变量

> ID：12021052
> 
> 赞同：0
> 
> 时间：2012-08-18T18:11:11.540
> 
> 标签：javascript

我正在尝试创建一个包含另一个变量的变量。

```
Example:
var options_id = ... 
```

其中“id”是通过另一个变量动态创建的，因此结果可能是

```
var options_1 = ...
var options_2 = ...
etc. 
```

'id' 是这样动态声明的：

```
var id = itemid; 
```

在变量中包含“id”变量的语法是什么

```
var options_id 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:14:34.177

我想这就是你要找的东西：

```
window['options_' + id] = ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:14:23.443

你有没有想过用一个对象来代替？你可以这样做：

```
var id = itemid;
var options = {};
options['id'] = …; 
```

然后使用以下命令访问它：

```
options.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T18:13:44.600

我认为，`Object`为此目的，JS 中有一个。

例如：

```
var options = new Object();

var options.id = 'foo'; 
```

或者如果你想使用数字索引，那么你可以求助于`Array`

# java - 正则表达式匹配java中的特定单词

> ID：12021058
> 
> 赞同：-6
> 
> 时间：2012-08-18T18:11:41.977
> 
> 标签：java, regex

例如，这 3 个单词 [AB,CD,EF] 的任何组合都应该通过正则表达式。此外，它不应允许重复。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:10:59.817

我不会为此推荐正则表达式。但有可能：

```
boolean foundMatch = subjectString.matches(
    "(?x)                  # Verbose regex:\n" +
    "(?!.*(AB|CD|EF).*\\1) # Make sure there are no dupes in the string\n" +
    "\\s*                  # Match optional whitespace.\n" +
    "(?:AB|CD|EF)          # Match one of the three candidates\n" +
    "(?:                   # Try to match...\n" +
    " \\s*,\\s*            #  a comma, optionally surrounded by whitespace\n" +
    " (?:AB|CD|EF)         #  followed by one of the candidates\n" +
    ")*                    # zero or more times\n" +
    "\\s*                  # Match optional whitespace."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:05:26.050

好吧，显而易见的解决方案是在一个正则表达式中列举所有 15 种可能性——只需做一些工作，你就可以分解出一些术语并得到一个更紧凑的正则表达式——但不会有另一种方式来表达这些约束在正则表达式中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T20:46:55.027

“没有重复”意味着计数。正则表达式一般不能做到这一点，所以它是不适合这项工作的工具。

# php - PHP $_GET 与 jQuery $.get 调用

> ID：12021060
> 
> 赞同：0
> 
> 时间：2012-08-18T18:11:55.253
> 
> 标签：php, javascript, jquery

我目前正在学习 jQuery 和 php。

所以我有这个用 jQuery 函数调用的 php 文件（在脚本中的其他地方有另一个调用，其中 a=chkPw）：

```
$.get("checkName.php?a=chkUser&user=" + rqUser, function(data) { ... }); 
```

我的问题是 php 脚本似乎没有进入 if(isset($_GET)) { } 块。我已经调试了它返回的值（1），所以我不明白出了什么问题！我还调试了 $_GET['a'] 的值，它确实是 'chkUser'。

任何帮助将不胜感激。

```
<?php

$users = array('bill' => 'ore', 'ted' => 'wood');

if (isset($_GET)) {

    if ($_GET['a'] == 'chkUser') {
        if (!array_key_exists($_GET['user'], $users)) {
            echo 'okay';
        } else {
            echo 'denied';
        }

    } elseif ($_GET['a'] == 'checkPw') {

        $user = $_GET['user'];
        $pw = $_GET['pw'];
        $i = 0;

        // get username id
        foreach (array_keys($users) as $value) {
            if ($value == $user) {
                $user = $users[i];
            }
            i++;
        }

        // match pw
        if ($pw == $user) {
            echo 'okay';
        } else {
            echo 'denied'
        }
    }
} 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:50:48.183

嘿，在我看来，这是可行的：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
 <script type="text/javascript">
    $.get("checkNames.php?a=chkUser&user=bill", function(data) { console.log(data) });
    $.get("checkNames.php?a=chkPass&user=bill&pw=ore", function(data) { console.log(data)                 });

</script>

<?php

$users = array('bill' => 'ore', 'ted' => 'wood');

if (isset($_GET["a"])) {

  if ($_GET["a"] == 'chkUser') {
    if (!array_key_exists($_GET['user'], $users)) {
        echo 'okay';
    } else {
        echo 'denied';
    }

  } elseif ($_GET["a"] == 'chkPass') {

    $user = $_GET['user'];
    $pw = $_GET['pw'];
    if(array_key_exists($user, $users))
    {
        if($users[$user] == $pw)
        {
            echo "okay";
        }
        else
        {
            echo "denied";
        }
    }
    else
    {
        echo "denied";
    }

  }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:21:07.400

使用像 www.something.com/index.html?a=1 这样的 url
这段代码实际上可以用于测试：

```
$users = array('bill' => 'ore', 'ted' => 'wood');

if (isset($_GET)) {
echo 'something';
} 
```

尝试进一步评论它，让我们知道它是整个 elseif 还是只是它的一部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T18:26:35.457

试试这个 if 语句而不是 current

```
if (count($_GET) > 0) {
    // existing code
} 
```

希望这会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T19:17:46.233

你可以试试这个：

```
<?php
if(!empty($_GET)){
  ...
}
?> 
```

要确定 GET 有效负载，请使用 var_dump($_GET)

# xcode - UIViewController 中的 UITableViewController

> ID：12021062
> 
> 赞同：1
> 
> 时间：2012-08-18T18:12:08.403
> 
> 标签：xcode, cocoa-touch, uiviewcontroller, uitableview

您好如何在 UIViewController 中加载 UITableViewController。就像这段视频[http://www.youtube.com/watch?v=9S114beUwPM](http://www.youtube.com/watch?v=9S114beUwPM) 3:55 一样。我真的不明白他是怎么做到的。

* * *

对不起，换个说法：我有 TableViewController.xib 和表视图和 MainViewController.xib 和视图。如何将 TableViewController.xib 中的表添加到 MainViewController.xib 视图。就像在 3:55 的视频中一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:42:29.380

我没看视频。您应该使用 UITableViewController 或 UIViewController 和 UITableView。

UITableViewController 专门用于管理完全是一个表且没有太多自定义的视图。

UITableViewControllers 和带有 UITableView 的 UIViewController 都应该实现 UITableViewDataSource 和 UITableViewDelegate。

# firefox - 谷歌浏览器的浏览器模式，用于测试 webapp 的兼容性

> ID：12021064
> 
> 赞同：1
> 
> 时间：2012-08-18T18:12:29.260
> 
> 标签：firefox, google-chrome, web-applications, cross-browser

我正在开发一个网络应用程序，并希望确保它在所有主要浏览器上都能按预期运行。我已经下载了 Chrome、Firefox、Opera、Safari 和 IE 来测试应用程序，但我想确保它在这些浏览器的早期版本上也能正常工作。

我知道我可以从[这里](http://www.opera.com/browser/download/?os=windows&list=all)下载以前版本的 Opera ，在 IE 中我可以从开发者工具部分选择“浏览器模式”。

有什么方法可以在以前版本的 Chrome、FF 和 Safari 上测试我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:18:41.163

我从来没有真正遇到过在这些浏览器的旧版本中无法正常工作的问题。我做的唯一兼容性检查是使用旧版本的 IE。原因是 IE 的新版本变化很大，但其他版本的新版本如此频繁地出现并且具有自动更新（您甚至在 Chrome 中都没有注意到），不仅（可能）没有显着变化从一个版本到下一个版本的渲染引擎，（几乎）每个使用它的人都在最新版本上。

话虽如此，有些网站会向您展示页面在各种浏览器中的外观截图。

想到[浏览器镜头。](http://browsershots.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:17:29.443

[http://www.brokenkeyboards.com/btfm/](http://www.brokenkeyboards.com/btfm/)

[http://meineipadresse.de/netrenderer/](http://meineipadresse.de/netrenderer/)

[http://browsershots.org/](http://browsershots.org/)

# android - Android 计算器 - Editview 无法输入小数位

> ID：12021068
> 
> 赞同：1
> 
> 时间：2012-08-18T18:12:53.443
> 
> 标签：android, calculator

我是Android代码开发新手...我正在开发一个Android计算器应用程序，不明白为什么两个EditText（第一个输入和第二个输入）不能接受小数位，但只能输入整数...这里附上如下代码：

谢谢！

=============主要活动================================

```
package com.trial.jm4_calculator;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

    private TextView output;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    Button btn1 = (Button) findViewById(R.id.button1);
    btn1.setOnClickListener(btn1Listener);
    output = (TextView) findViewById(R.id.lblOutput);
    }

View.OnClickListener btn1Listener = new View.OnClickListener() {
    public void onClick(View v) {
       double opd1, opd2;
       double result = 0.0;
       EditText txtOpd1, txtOpd2;
       RadioButton rdbAdd, rdbSubtract, rdbMultiply, rdbDivide;
       CheckBox chkDivide;

       txtOpd1 = (EditText) findViewById(R.id.txtOpd1);
       txtOpd2 = (EditText) findViewById(R.id.txtOpd2);

       opd1 = Double.parseDouble(txtOpd1.getText().toString());
       opd2 = Double.parseDouble(txtOpd2.getText().toString());

       rdbAdd = (RadioButton) findViewById(R.id.rdbAdd);
       if (rdbAdd.isChecked()) {
           result = opd1 + opd2;
       }
       rdbSubtract = (RadioButton) findViewById(R.id.rdbSubtract);
       if (rdbSubtract.isChecked()) {
           result = opd1 - opd2;
       }
       rdbMultiply = (RadioButton) findViewById(R.id.rdbMultiply);
       if (rdbMultiply.isChecked()) {
           result = opd1 * opd2;
       }
       rdbDivide = (RadioButton) findViewById(R.id.rdbDivide);
       if (rdbDivide.isChecked()) {

              result = opd1 / opd2;            
       }
       output.setText("Answer = " + result);
    }
};
} 
```

====================Main.xml=========================== ========

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout 
    android:layout_height="fill_parent" 
    android:layout_width="fill_parent" 
    android:orientation="vertical" 
    xmlns:android="http://schemas.android.com/apk/res/android">
    <LinearLayout 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:orientation="horizontal"> 
        <TextView 
            android:layout_height="wrap_content" 
            android:layout_width="wrap_content" 
            android:text="First Input: "/> 
        <EditText 
            android:layout_height="wrap_content" 
            android:layout_width="fill_parent" 
            android:inputType="number" 
            android:id="@+id/txtOpd1"/> 
    </LinearLayout>
    <RadioGroup 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:orientation="horizontal" 
        android:id="@+id/rdgOp"> 
        <RadioButton 
            android:layout_height="wrap_content" 
            android:layout_width="wrap_content" 
            android:text="+ " 
            android:id="@+id/rdbAdd"/> 
        <RadioButton 
            android:layout_height="wrap_content" 
            android:layout_width="wrap_content" 
            android:text="- " 
            android:id="@+id/rdbSubtract"/> 
        <RadioButton 
            android:layout_height="wrap_content" 
            android:layout_width="wrap_content" 
            android:text="* " 
            android:id="@+id/rdbMultiply"/> 
        <RadioButton 
            android:layout_height="wrap_content" 
            android:layout_width="wrap_content" 
            android:text="/ " 
            android:id="@+id/rdbDivide"/> 
    </RadioGroup>
    <LinearLayout 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:orientation="horizontal"> 
        <TextView 
            android:layout_height="wrap_content" 
            android:layout_width="wrap_content" 
            android:text="Second Input: "/> 
            <EditText 
                android:layout_height="wrap_content" 
                android:layout_width="fill_parent" 
                android:inputType="number" 
                android:id="@+id/txtOpd2"/> 
     </LinearLayout> 
     <Button 
         android:layout_height="wrap_content" 
         android:layout_width="wrap_content" 
         android:text="Compute" 
         android:id="@+id/button1"/> 
     <TextView 
         android:layout_height="wrap_content" 
         android:layout_width="wrap_content" 
         android:id="@+id/lblOutput"/> 
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T18:28:25.070

如果您只想在 EditText 上使用**小数**

在您的 EditText 小部件中使用 xml 属性`android:inputType="numberDecimal"`，您的 EditText 声明将如下所示：

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="numberDecimal" /> 
```

如果您想使用带**符号十进制数**而不是将两个 Xml 属性`android:inputType="numberDecimal"`和`android:inputType="numberSigned"`. 您的 EditText 声明将如下所示：

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="numberDecimal|numberSigned" >

</EditText> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T18:17:13.217

将 android:inputType 从“number”更改为“numberDecimal”。有关inputType 的更多选项，请参阅[文档。](https://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T18:23:06.203

您需要在 XML 代码中更改 EditText 的输入类型。

将 EditText 的 inputType 属性从

`android:inputType="number"`

至

`android:inputType="numberDecimal"`

```
<EditText 
            android:layout_height="wrap_content" 
            android:layout_width="fill_parent" 
            android:inputType="numberDecimal" 
            android:id="@+id/txtOpd1"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T18:19:48.560

inputType="number" 不允许浮点数。尝试改变：

```
android:inputType="number" 
```

至：

```
android:numeric="integer|decimal" 
```

# python - PyDev 使用 sklearn 无法解析导入

> ID：12021072
> 
> 赞同：1
> 
> 时间：2012-08-18T18:13:26.207
> 
> 标签：python, eclipse, macos, pydev, scikit-learn

我在 Mountain Lion 上的 Eclipse 4.2 中运行 PyDev。我安装了[SciPy Superpack](http://fonnesbeck.github.com/ScipySuperpack/)，并且可以在 Python 解释器和 IPython 中使用所有的包——包括 Scikit-learn 和 MatPlotLib。但是，当我尝试在 PyDev 中导入它们时，出现“未解决的导入”错误。

我从 Python.org 安装了 Python 2.7.3，并验证 PyDev 指向正确的解释器。我还尝试将 sklearn 和 matplotlib 目录（通过 from 的路径验证`sklearn.__file__`）添加到 PyDev 设置中的 System PYTHONPATH。这并没有解决问题。

知道我还应该尝试什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:31:58.560

从您的评论示例中，您使用的路径似乎处于错误的深度。

更改自：
`/Library/Python/2.7/site-packages/scikit_learn-0.12_git-py2.7-macosx-10.8-intel‌​.egg/sklearn`

至：
`/Library/Python/2.7/site-packages/scikit_learn-0.12_git-py2.7-macosx-10.8-intel‌​.egg`

它无法找到包级别名称，因为您在它下面指定。通常，python 解释器将通过简单地存在于站点包中来解析所有鸡蛋，来自放置在那里的“.pth”文件引用。但我认为 pyDev 需要将这些鸡蛋明确添加到 PYTHONPATH 中。

# ios - 细节附件按钮 Segue

> ID：12021073
> 
> 赞同：0
> 
> 时间：2012-08-18T18:13:30.853
> 
> 标签：ios, xcode, ios5, xcode4, xcode4.3

1.  我的应用程序有 UITableViewController 和 DetailViewController。
2.  UITableViewController 具有多单元选择和详细附件按钮。
3.  如果用户选择多个单元格并点击 TOTAL Button Alert 消息，则会显示课程总价格。
4.  如果用户点击 Detail 附件按钮，它会转到 DetailViewController。

好的，现在我的问题是我怎么能用我的代码做到这一点：

UITableViewController.m

```
 - (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath;

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
        [self configureCell:cell atIndexPath:indexPath];

        return cell;

    }

    - (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
    {
        NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
        cell.textLabel.text = [[object valueForKey:@"courseCode"] description];
        cell.detailTextLabel.text = [[object valueForKey:@"courseName"] description];

    }

    - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {

        if ([[segue identifier] isEqualToString:@"showDetail"]) {
            NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
            NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
            [[segue destinationViewController] setDetailItem:object];
        }            
    }

-(void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath{

}

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {

        NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];

        if ([[[object valueForKey:@"creditHours"] description]isEqualToString: @""]) {

        }
        //some thing doing if the user deselect the cell..

    }

    - (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
    {

        NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];

        if ([[[object valueForKey:@"creditHours"] description]isEqualToString: @""]) {

        }

        //some thing doing if the user deselect the cell..

    }

    - (IBAction)doneButton:(id)sender {

        given the total...

    } 
```

DetailViewController.h

```
@property (strong, nonatomic) id detailItem;

@property (weak, nonatomic) IBOutlet UITextField *courseCodeLabel;
@property (weak, nonatomic) IBOutlet UITextField *courseNameLabel;
@property (weak, nonatomic) IBOutlet UITextField *creditHoursLabel;
@property (weak, nonatomic) IBOutlet UITextField *preRequisitesLabel;
@property (weak, nonatomic) IBOutlet UITextField *coursePriceLabel;
@property (weak, nonatomic) IBOutlet UITextField *courseEPPLabel;
@property (weak, nonatomic) IBOutlet UITextView *courseDetailLabel; 
```

细节视图控制器.m

```
@interface DetailViewController ()
- (void)configureView;
@end

@implementation DetailViewController

@synthesize detailItem = _detailItem;
@synthesize courseCodeLabel = _courseCodeLabel;
@synthesize courseNameLabel = _courseNameLabel;
@synthesize creditHoursLabel = _creditHoursLabel;
@synthesize preRequisitesLabel = _preRequisitesLabel;
@synthesize coursePriceLabel = _coursePriceLabel;
@synthesize courseEPPLabel = _courseEPPLabel;
@synthesize courseDetailLabel = _courseDetailLabel;

#pragma mark - Managing the detail item

- (void)setDetailItem:(id)newDetailItem
{
    [self configureView];

    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }
}

- (void)configureView
{
    // Update the user interface for the detail item.

    if (self.detailItem) {
        self.courseCodeLabel.text = [[self.detailItem valueForKey:@"courseCode"] description];
        self.courseNameLabel.text = [[self.detailItem valueForKey:@"courseName"] description];
        self.creditHoursLabel.text = [[self.detailItem valueForKey:@"creditHours"] description];
        self.preRequisitesLabel.text = [[self.detailItem valueForKey:@"preRequisites"] description];
        self.coursePriceLabel.text = [[self.detailItem valueForKey:@"coursePrice"] description];
        self.courseEPPLabel.text = [[self.detailItem valueForKey:@"courseEPP"] description];
        self.courseDetailLabel.text = [[self.detailItem valueForKey:@"courseDetails"] description];

    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self configureView];
} 
```

请注意，segue 以正常方式运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:01:21.030

我认为目前您的 segue 将 tableview 单元（该原型）与您的详细控制器链接。您可以尝试将 tableview 控制器本身（即整个事物）与您的详细控制器链接。（只需从 tableview 控制器的底部按 ctrl 拖动即可）

然后你`-prepareForSegue`像往常一样处理你的方法，但你需要调用`-performSegue`才能真正触发 segue。点击单元格将无效。因此，在您的`-tableView:tableViewaccessory....`方法中，您可以调用`performSegue`进行导航，并根据需要处理您的`didSelectRow..`方法。

# node.js - 用于服务器工作负载测试的不错的 Node.js 库

> ID：12021076
> 
> 赞同：0
> 
> 时间：2012-08-18T18:14:16.313
> 
> 标签：node.js, testing

我即将开发一个 Web 应用程序，因此我认为我可以使用单个 Node 客户端测试工作负载，因为它可以多次调用服务器而不会阻塞。

查看[https://github.com/joyent/node/wiki/modules](https://github.com/joyent/node/wiki/modules)，在测试部分我发现了很多框架，我的问题是是否有人可以推荐或听说过其中任何一个的好东西。

我认为这是一个完美答案的问题，这就是我在这里问的原因。

**编辑：** 这个想法是在客户端使用节点而不是为 webapp 服务的服务器，因此在决定使用什么节点测试框架时，分析将超出范围。

# msbuild - 从 MSTest 或 Resharper 运行测试时出现 ShimNotSupportedException

> ID：12021080
> 
> 赞同：9
> 
> 时间：2012-08-18T18:14:29.573
> 
> 标签：msbuild, resharper, mstest, visual-studio-2012, microsoft-fakes

我目前正在使用 Microsoft Visual Studio 2012 和新的 Fakes 框架。在将我的单元测试添加到 MSBuild 和持续集成过程之后，Fakes 单元测试恰好引发了 ShimNotSupportedException。

我尝试了不同的东西并阅读了该问题并发现，这只发生在我从 Resharper 功能运行我的测试时，或者直接在使用 MSTest 的代码中。从测试菜单栏运行时不会发生这些异常，这让我想到检查此功能的设置文件。

经过进一步研究，我发现一些文章说它可能与 Resharper 或 MSTest 设置中指定的代码覆盖率设置有关，如果您将其关闭，它可以解决问题。[MS VisualStudio 2012 中的 ShimNotSupportedException](https://stackoverflow.com/questions/11632108/shimnotsupportedexception-in-ms-visualstudio-2012)也与该问题有关。

我还在 MSDN 上找到了一些关于该问题的输入，这证实了我必须对代码覆盖率做一些事情：http: [//social.msdn.microsoft.com/Forums/en-US/vstest/thread/17fcfdc6- 1cda-4692-a242-656b48195327/](http://social.msdn.microsoft.com/Forums/en-US/vstest/thread/17fcfdc6-1cda-4692-a242-656b48195327/)和[http://social.msdn.microsoft.com/Forums/en-US/vstest/thread/bfa792b0-b3fc-4a51-b49d-f7aaf1f2f4b8](http://social.msdn.microsoft.com/Forums/en-US/vstest/thread/bfa792b0-b3fc-4a51-b49d-f7aaf1f2f4b8)。

尽管如此，由于我必须尽快以某种方式在持续集成过程中实现代码覆盖，并且跳过该部分不是一个选项，所以我现在在这里询问有关此问题的任何建议，以及是否有任何解决该问题的方法！

感谢所有建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:11:23.853

MsTest 不支持假货：http: [//msdn.microsoft.com/en-us/library/ms253138.aspx](http://msdn.microsoft.com/en-us/library/ms253138.aspx)。

以下是从 Team City（支持 Fakes）运行 Visual Studio Testrunner 的方法：[http ://blog.degree.no/2012/09/unit-testing-visual-studio-2012-fakes-in-team-city/](http://blog.degree.no/2012/09/unit-testing-visual-studio-2012-fakes-in-team-city/)

如果您使用 TFS，也可以使用 Visual Studio 测试运行程序。

# php - 根据发布日期对动态 html 元素进行排序和浮动

> ID：12021083
> 
> 赞同：0
> 
> 时间：2012-08-18T18:14:34.830
> 
> 标签：php, wordpress, css, css-float

我似乎想不出一个合乎逻辑的解决方案。

我在一个网站（基于 Wordpress）工作，该网站根据发布日期将“帖子”呈现到视图上。我希望最新发布的帖子成为我页面上第一个可见的帖子——这当然是 Wordpress 处理帖子的通常和正常方式。所以最新的帖子在上面。

但是，我有一个布局解决方案，其中我的帖子是方形容器并且它们是浮动的。这意味着最新的帖子浮动到页面的右上角……但我希望它位于浮动元素的左上角。

这是一个可视化：

![在此处输入图像描述](../Images/bc75e88c199544abada4ebe8866d720f.png)

所以这是我目前的情况......我希望容器正确浮动（它们有不同的宽度）。但是每个容器的位置应该不同。

我想要的是这个……</p>

![在此处输入图像描述](../Images/5bd2bdc0770ccc4666706daf119d2b39.png)

关于如何做到这一点的任何想法？但请记住布局应该是浮动的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:07:14.093

即使项目（帖子）具有不同的宽度，这也应该有效：http: [//jsfiddle.net/PvGHu/1/](http://jsfiddle.net/PvGHu/1/)

# jakarta-ee - 在两个 servlet 之间传递数据

> ID：12021087
> 
> 赞同：1
> 
> 时间：2012-08-18T18:14:54.813
> 
> 标签：jakarta-ee, tomcat, servlets

我有两个 servlet 在同一个 Tomcat 服务器上运行，我需要将数据从一个 servlet 的实例传递到另一个 servlet 的相应实例。似乎我可以通过执行以下操作来做到这一点：

```
getServletContext().getContext("/path").setAttribute("varName", variable) 
```

我同样应该能够通过使用 getAttribute 从另一个 servlet 接收它。但是，这是我的问题：

其他 servlet 如何知道该属性何时设置？数据可以在任何时间点多次进入。那么我如何“通知”另一个 servlet 现在有数据等待它抓取呢？

谢谢，

埃里克

**编辑：**

这是我想要做的更多内容：我正在尝试使用两个不同的应用程序构建一个聊天程序。有客户端，它可以将消息发送到另一个应用程序，聊天接收器应用程序。我在前端使用 Vaadin。聊天接收器应用程序包含两个 servlet：另一个 Vaadin 应用程序和一个用于从客户端应用程序接收消息的基本 servlet（这部分已经在工作）。现在我想将它转发给聊天接收器应用程序的 Vaadin 应用程序，该应用程序与接收消息的 servlet 位于同一个 war 文件中。希望这可以解决问题。如果您认为 Vaadin 论坛是发布此问题的更好地方，请告诉我。谢谢你的帮助，我主要是核心java程序员，所以我很困惑。对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:20:30.337

调用 servlet 的唯一机制是发出 HTTP 请求。此外，仅允许 servlet 容器调用您的 servlet，处理它们的生命周期。

这意味着您可以在一个 servlet 中设置一些 servlet 上下文属性，然后等待用户调用第二个 servlet - 这将看到全局值。您不能从另一个*调用*一个 servlet。

不确定你想达到什么目标。也许从第一个 servlet 转发/重定向到第二个就足够了？

```
request.setAttribute("varName", variable);
getServletContext().getRequestDispatcher("servlet2").forward(request,response); 
```

变量可以`servlet2`通过以下方式访问：

```
request.getAttribute("varName"); 
```

顺便说一句，您的代码不必要地复杂且容易出错，试试这个：

```
getServletContext().setAttribute("varName", variable); 
```

# php - 执行通过 AJAX 加载的 Javascript

> ID：12021095
> 
> 赞同：2
> 
> 时间：2012-08-18T18:16:07.357
> 
> 标签：php, javascript, ajax

> **可能重复：**
> [如何执行动态加载的 JavaScript 块？](https://stackoverflow.com/questions/75943/how-do-you-execute-a-dynamically-loaded-javascript-block)

我在这里看到了很多类似我的问题，但我没有找到适合我的答案。

我正在通过 AJAX 加载代码，还包括一个`script`包含 Javascript 的标签。正如我已经发现的那样，这个 Javascript 没有被执行。

我还发现这`eval()`可以帮助我，但是由于我是 Javascript 的菜鸟，并且只需要它一次，所以我不知道该把它放在哪里。

我的 PHP 脚本返回一个字符串，我用 Javascript 将其拆分以将其放入页面的不同部分。这工作正常。其中一个部分包括：

```
<div id=\"fb-root\"></div> <script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return;js = d.createElement(s); js.id = id;js.src = \"//connect.facebook.net/de_DE/all.js#xfbml=1\";fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script> 
```

像这样包含：

```
document.getElementById("id").innerHTML=response1; 
```

`response1`拆分字符串后，我从上面放置代码的变量在哪里。任何人都能够以简单的方式帮助我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T18:34:44.287

您可以使用 eval()。您必须为您的脚本提供一个 ID：

```
<script id='script'>
     some javascript
</script> 
```

然后在加载您的 ajax 响应后，为了加载脚本，您添加以下行：

```
eval(document.getElementById('script').innerHTML); 
```

祝你好运！

# facebook - 设置其他语言的 Facebook 应用程序

> ID：12021097
> 
> 赞同：0
> 
> 时间：2012-08-18T18:16:13.483
> 
> 标签：facebook

我创建了一个 Facebook 应用程序。是英文的。但是，我需要它默认以德语显示（仅在可能的情况下）。我浏览了 facebook 手册，不幸的是，我找不到它。

你的意见？

更新：让我展示我想要的。![一个应用程序](../Images/55c1b40d974829a3d3978fe583f5d630.png)

我（作为作者）需要它绝对用德语显示，即使是任何标准的 facebook 标签。我已经将本地设置为 Deutsch ( `Setting->Advanced->Locale`)，但它仍然是英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:05:34.953

找不到什么？

[http://developers.facebook.com/docs/internationalization/](http://developers.facebook.com/docs/internationalization/)

*为问题更新添加：*

Facebook：

> 如果您在 IFrame 中呈现社交插件，Facebook 会自动翻译文本，因为它基于查看用户的区域设置。
> 
> 如果您使用 XFBML，则需要在适合您网站的语言环境中加载 JavaScript SDK。例如，如果您的网站是西班牙语，请参考以下脚本：
> 
> //connect.facebook.net/es_LA/all.js

# android - Android 库和适配器

> ID：12021100
> 
> 赞同：1
> 
> 时间：2012-08-18T18:16:24.580
> 
> 标签：android, xml, button, gallery

我有图像，我希望它们在画廊中使用适配器来选择每个图像，它将使用画布绘制，我看了很多教程并编写了代码，现在我不知道我在哪里做错了

```
Gallery g;
ImageAdapter imageAdapter;

       Gallery g = (Gallery) findViewById(R.id.gBitmap);
       imageAdapter = new ImageAdapter(this);
       g.setAdapter(imageAdapter);

    //selected Bitmap from gallery
       g.setOnItemClickListener(new OnItemClickListener() {
           public void onItemClick(AdapterView<?> parent,
               View v, int position, long id) {
               applyBitmap(position);
           }
       });
    }

    public class ImageAdapter extends BaseAdapter {
       int mGalleryItemBackground;
       private Context mContext;

       private Integer[] mImageIds = {
               R.drawable.first,
               R.drawable.second,
               R.drawable.fifth,
               R.drawable.third,
               R.drawable.fourth,

       public ImageAdapter(Context c) {
           mContext = c;
       }

       public int getCount() {
           return mImageIds.length;
       }

       public Object getItem(int position) {
           return position;
       }

       public long getItemId(int position) {
           return position;
       }

       public View getView(int position,
           View convertView, ViewGroup parent) {
            return iv;
       }
    }

    public static void Bitmap(int position) {
        BitmapFactory.Options opt = new BitmapFactory.Options();
        opt.inScaled = true;
        opt.inPurgeable = true;
            opt.inInputShareable = true;
            Bitmap brightBitmap = BitmapFactory.decodeResource(null, position, opt);
        iv.setImageBitmap(brightBitmap);

    } 
```

我需要选择`mImageIds`使用我的函数调用`Bitmap`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:26:37.420

我不知道这是否适合你，

但是对你的代码做一些改动，

**1.applyFrame(int position)**

该代码行应该是，

```
Bitmap brightBitmap = BitmapFactory.decodeResource(getResources(), position, opt); 
```

**2.在getView()中**

```
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView i = new ImageView(mContext);

    i.setImageResource(mImageIds[position]);
    i.setLayoutParams(new Gallery.LayoutParams(150, 100));
    i.setScaleType(ImageView.ScaleType.FIT_XY);
    i.setBackgroundResource(mGalleryItemBackground);

    return i;
} 
```

**3\. setOnItemClickListener()**

```
g.setOnItemClickListener(new OnItemClickListener() {
           public void onItemClick(AdapterView<?> parent,
               View v, int position, long id) {
               applyFrame(mImageIds[position]);
           }
       }); 
```

试试这个，让我知道会发生什么......如果它有效，那么我会向你解释。如何？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:59:17.827

您应该观看“ [listView 的世界](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)”视频并了解如何为adapterView 创建一个适配器（图库扩展了它）。

# unix - unix命令计算其中一列中的值并将该值添加到每行的最后一列

> ID：12021101
> 
> 赞同：1
> 
> 时间：2012-08-18T18:16:39.650
> 
> 标签：unix, sed, awk

带有制表符分隔符的*.txt文件有 4 列，其中有很多行，每列的格式如下：*

```
12345  a  xxx   yyy  
12345  b  xxx   yyy     
67890  c  xxx   yyy  
12345  d  xxx   zzz   
67890  e  xxx   zzz  
12345  f  xxx   zzz  
23456  g  xxx   zzz 
```

如何计算*.txt*文件中整个第一列中每个唯一整数的实例，并通过将第五列附加到*.txt*文件来将计数添加为每行中的第五个值。

```
12345  a  xxx   yyy  1  
12345  b  xxx   yyy  2     
67890  c  xxx   yyy  1   
12345  d  xxx   zzz  3   
67890  e  xxx   zzz  2  
12345  f  xxx   zzz  4  
23456  g  xxx   zzz  1 
```

我更喜欢仅使用 UNIX 命令行流处理程序的解决方案。非常感谢任何帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T18:27:48.300

一种使用方式`awk`：

```
awk '
    BEGIN { OFS = "\t"; }
    { 
        key[ $1 ]++;
        print $0, key[ $1 ];
    }
' infile 
```

输出：

```
12345  a  xxx   yyy     1
12345  b  xxx   yyy     2
67890  c  xxx   yyy     1
12345  d  xxx   zzz     3
67890  e  xxx   zzz     2
12345  f  xxx   zzz     4
23456  g  xxx   zzz     1 
```

# sqlite - 将 sqlite 数据库加载到 Postgres

> ID：12021106
> 
> 赞同：5
> 
> 时间：2012-08-18T18:17:19.447
> 
> 标签：sqlite, postgresql, vps

我已经在本地开发了一段时间，现在正在将所有内容推向生产。当然，我也在向开发服务器添加数据时没有想到我没有将它重新配置为 Postgres。

现在我有一个 SQLite 数据库，我需要将其信息放在 Postgres 数据库上的远程 VPS 上。

我曾尝试转储到 .sql 文件，但收到很多来自 Postgres 的语法投诉。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T00:57:43.077

对于两个数据库之间的几乎任何转换，选项是：

1.  从源数据库执行仅模式转储。手动转换它并将其加载到目标数据库中。然后以它提供的最兼容的 SQL 转储形式从源数据库中执行仅数据转储。尝试将其加载到目标数据库中。当您遇到问题时，使用 sed/awk/perl/whatever 将脚本转换为转储，然后重试。重复直到它加载并且结果匹配。

2.  像 (1) 一样，手动转换模式。然后用你喜欢的语言编写一个脚本，连接到两个数据库，从一个数据库中选择，从一个数据库中插入到另一个数据库，可能还有一些数据类型和表示的转换。

3.  使用 Talend 或 Pentaho 等 ETL 工具连接到这两个数据库并在它们之间进行转换。ETL 工具就像 (2) 的“其他人已经写过”版本，但它们需要一些学习。

4.  希望您也可以找到预先编写的转换。Heroku 一个名为`sequel`，它将适用于 SQLite -> PostgreSQL；它是否可以在没有 Heroku 的情况下使用并且能够在没有所有其他 Heroku 基础设施和代码的情况下运行？

`setval()`在其中任何一个之后，通常需要一些传输后步骤，例如用于初始化序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-26T21:52:50.940

Heroku 的数据库转换工具叫做`sequel`. 以下是您需要的红宝石：

```
gem install sequel
gem install sqlite3
gem install pg 
```

然后这对我来说适用于当前工作目录中名为“tweets.db”的 sqlite 数据库文件：

```
sequel -C sqlite://tweets.db postgres://pgusername:pgpassword@localhost/pgdatabasename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-23T14:27:13.827

PostgreSQL 支持“外部数据包装器”，它允许您通过 DB 直接访问任何数据源，包括 sqlite。甚至可以自动导入架构。然后，您可以使用`create table localtbl as (select * from remotetbl)`将您的数据放入实际的 PG 存储中。

*   [https://wiki.postgresql.org/wiki/Foreign_data_wrappers](https://wiki.postgresql.org/wiki/Foreign_data_wrappers)
*   [https://github.com/pgspider/sqlite_fdw](https://github.com/pgspider/sqlite_fdw)

# java - 带有不更新值的对话框的 TableCellEditor

> ID：12021110
> 
> 赞同：1
> 
> 时间：2012-08-18T18:17:47.420
> 
> 标签：java, swing, jtable, tablecelleditor

我正在`JTable`使用自定义单元格编辑器编写一个对话框，该对话框允许用户在第二个表中编辑更多值。问题是，第二张表的变化并没有反映在第一张表中，基本上丢失了。我使用[此处](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableDialogEditDemoProject/src/components/ColorEditor.java)提供的示例作为指南。这是`CellEditor`：

```
private class SizeClassTableCellEditor extends AbstractCellEditor 
                                       implements TableCellEditor, ActionListener{ 
    /**
     * 
     */
    protected static final String EDIT = "edit";
    private ArrayList<SizeClass> sizeClasses;
    private JButton button;
    private SizeClassEditor editor;
    public SizeClassTableCellEditor(){ 

        button = new JButton();
        button.setActionCommand(EDIT);
        button.addActionListener(this);
        button.setBorderPainted(false);

        editor = new SizeClassEditor(this);

    }

    @Override
    public Object getCellEditorValue() {
        System.out.println("Get Cell editor value was called");
        return sizeClasses;
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        System.out.println("editting sc");
        if(EDIT.equals(e.getActionCommand())) {
            // User clicked the cell, bring up the editor
            System.out.println("Editing");
            editor.setVisible(true);
            editor.setSizeClasses(sizeClasses);
            editor.setAlwaysOnTop(true);
            fireEditingStopped();

        } else {
            System.out.println("Save button of dialogue was pressed");
            if(editor.validateInput()) {
                sizeClasses = editor.getSizeClasses();
                editor.setVisible(false);
                System.out.println("size classes are: "+sizeClasses);
                model.fireTableDataChanged();
            } else {
                // user needs to correct input
            }
        }

    }

    @Override
    public Component getTableCellEditorComponent(JTable table,
            Object value, boolean isSelected, int row, int column) {
        sizeClasses = (ArrayList<SizeClass>) value;
        return button;
    } 
} 
```

这是`SizeClassEditor`：

```
import java.awt.event.ActionListener;
import java.util.ArrayList;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JButton;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

import java.awt.BorderLayout;

public class SizeClassEditor extends JFrame {

    /**
     * 
     */
    private static final long serialVersionUID = 6909421034651884335L;
    private JTable table;
    private SizeClassTableModel model;
    public SizeClassEditor(ActionListener lstn){
        setTitle("Edit Size Classes");
        model = new SizeClassTableModel();

        table = new JTable(model);
        JPanel panel = new JPanel();
        getContentPane().add(panel);
        panel.setLayout(new BorderLayout());

        panel.add(new JScrollPane(table),BorderLayout.CENTER);

        JPanel btn_panel = new JPanel();
        panel.add(btn_panel, BorderLayout.SOUTH);

        JButton btnSave = new JButton("Save");
        btn_panel.add(btnSave);
        btnSave.addActionListener(lstn);
        pack();
    }
    public void addRow(SizeClass sc) {
        model.addRow(new Object[] {sc.getMin(),sc.getMax(),sc.getMortality(),sc.getGrowShrinkP(),sc.getGrowShrinkPC()});
    }
    public void setSizeClasses(ArrayList<SizeClass>  sc) {
        model.setRowCount(0);
        for (SizeClass sizeClass : sc) {
            addRow(sizeClass);
        }
    }
    public boolean validateInput() {
        boolean valid = true;
        for(int i = 0; i < model.getRowCount(); i++) {
            // Should probably set background colours for the cell
            valid &= (Integer) table.getValueAt(i, 0) < (Integer) table.getValueAt(i, 1);
            for(int j = 2; j < 4; j++) 
                valid &= ((Double) table.getValueAt(i, j)) < 1 && ((Double) table.getValueAt(i, j)) >= 0;
        }
        return valid;
    }

    public ArrayList<SizeClass> getSizeClasses() {
         ArrayList<SizeClass> scs = new ArrayList<SizeClass>();
         for (int i = 0; i < table.getRowCount(); i++) {
            scs.add(new SizeClass(
                  (Integer)  table.getValueAt(i, 0),
                  (Integer)  table.getValueAt(i, 1),
                  (Double)  table.getValueAt(i, 2),
                  (Double)  table.getValueAt(i, 3),
                  (Double)  table.getValueAt(i, 4)));
        }
         return scs;
    }
    private class SizeClassTableModel  extends DefaultTableModel{
        /**
         * 
         */
        private static final long serialVersionUID = 6771833776664184864L;
        private final Object[] columns = new Object[] {"Min","Max","Mortality","growshrinkp","growshrinkp (c)"}; 
        public SizeClassTableModel() {
            for (Object i : columns) {
                addColumn(i);
            }
        } 
        @Override
        public int getColumnCount() {
            return columns.length;
        }

        @Override
        public Class getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:59:56.997

您的问题提到了两个表，但只显示了一个子类`DefaultTableModel`。要更新`table`in `SizeClassEditor`，您应该更新其`model`using `setValueAt()`。您不*应该*使用`fireTableDataChanged()`.

# workflow-foundation-4 - 将 XAML 工作流嵌入到另一个 XAML 工作流中

> ID：12021111
> 
> 赞同：0
> 
> 时间：2012-08-18T18:18:21.023
> 
> 标签：workflow-foundation-4, workflowservice

我们有一种情况，其中有两个 XAML 工作流（WF1 和 WF2）。WF1 是 WF2 的超集。因此，虽然 WF2 在系统内独立于 WF1 执行，但我们希望 WF2 在 WF1 执行时在 WF1 的范围内执行。基本上在 WF1 的末尾有一个书签，在恢复该书签时，WF2 必须执行。

它们都在共享资源上运行，我们不能让这些 WF 的不同实例同时在我们的共享资源上运行。我们有一个队列机制来处理这个问题。

我想做的是在设计时以某种方式在 WF1 中构建此执行。因此，也许编写一个加载 WF2 的活动或以某种方式将 WF2 转换为编码活动并将其放入 WF1 等。我不想要的是必须复制 WF2 并将其放入 WF1 设计器中。此外，我们不希望在 WF1 中启动单独的主机进程来执行 WF2。

基本上我们的WF1和WF2都是在WorkflowServiceHost下运行的。它们不是传统的服务 WF（因此没有发送/接收活动），而是作为 WCF 服务公开的普通 WF。我们在 WorkflowServiceHost 中进行了大量自定义，涉及其持久性、跟踪等，我们的两个 WF 都从中受益。我想确保无论我们采取何种机制在 WF1 中启动 WF2，我们都不会失去这些好处。

PS：如果您想了解我们如何自定义这些 WF 的运行，您可以[在此处从我的博客下载示例代码](http://www.nikgupta.net/2012/08/wfs-in-workflowservicehost/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T08:01:25.830

从技术上讲，工作流只是一个活动。因此，如果您编译包含 WF1 和 WF2 的项目并打开 WF1，您将在活动工具箱中看到 WF2。只需将它拖到 WF1 上，连接任何参数，就可以开始了。

# php - 为 cakephp 会话数据库使用不同的表前缀

> ID：12021117
> 
> 赞同：2
> 
> 时间：2012-08-18T18:18:41.733
> 
> 标签：php, database, session, cakephp

我想为我的会话数据库使用不同的表前缀。所以，在我的配置文件中，我的表前缀设置为“pre1_”，但我希望我的会话使用前缀为“pre2_”的表——这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T00:40:59.983

我在我的模型中注释了这条线，所以它不会被执行；

```
//    public $tablePrefix = 'cc_'; 
```

然后，在我的 AppController.php beforeFilter 我添加

```
$this->modelname->tablePrefix=$this->Auth->user('company_prefix').'_'; 
```

在我授权的用户表中，我有一个名为 company_prefix 的字段，该字段附加到该用户独有的某些表中。

我很想看到更多关于这个主题的信息。

我得到很多`'Indirect modification of overloaded property DifferentController::$Modelname has no effect'`

所以我正在寻找一种仅在添加模型或默认控制器时执行此操作的方法。我不希望`beforeFilter()`每个控制器都有一个，所以我想我必须做一些`isset()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:45:48.910

对于 Cakephp 2.1 中的“公司”前缀 - 模型中的公共 $tablePrefix 并在控制器中设置 tablePrefix ，这就是我正在做的事情，它的代码行太多（每个表有一行代码，每个表都有一个前缀用户）但这是我现在能做的。

模型.php：

```
public $tablePrefix = 'anything_'; 
```

模型b.php：

```
public $tablePrefix = 'anything_'; 
```

模型c.php：

```
public $tablePrefix = 'anything_'; 
```

然后在 AppController 的公共函数 beforeFilter() 中

```
if (isset($this->Modela->tablePrefix)) {$this->Modela->tablePrefix = $this->Auth->user('company_code').'_'; }
if (isset($this->Modelb->tablePrefix)) {$this->Modelb->tablePrefix = $this->Auth->user('company_code').'_'; }
if (isset($this->Modelc->tablePrefix)) {$this->Modelc->tablePrefix = $this->Auth->user('company_code').'_'; } 
```

我没有以这种方式收到“重载属性”错误，但在我的架构中，我所有的用户都有一个有效的公司代码。例如，我还为所有用户共享了“用户”表（尽管只有管理员可以访问登录用户以外的用户记录）

但是，我发现这相当麻烦，并且对不需要将模型的 $tablePrefix company_code 设置隔离的每个模型都定义为 AppController 中的一行代码的方法感兴趣。我真正想为模型设置 tablePrefix 的点是我引用的那一刻

```
$this->loadModel("Modelb"); 
```

但是我花了 45 分钟在 Model 目录中使用 modelb.php 并且无法使用 $tablePrefix 属性做很多事情。当模型被实例化或引用时，我应该知道，对于那些需要 $tablePrefix 属性的表，所需的前缀，但我当时无法动态设置属性。（动态静态属性？听起来像是错误的方法）

所以，即使这有效，我也不喜欢它。感觉就像我在 Lisp 程序中使用 Fortran 方法一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T20:13:36.557

在 ModelasController.php 中：

```
$this->loadModel("Modelb");
$this->Modelb->tablePrefix = $this->Auth->user('company_code'); 
```

是使用第二个公司编码模型的正确方法，我不需要 beforeFind 逻辑。

所以只有 AppController 对 beforeFilter 中的每个可能的模型都有一行来设置 tablePrefix，就像上面一样，使用 php 函数 isset 来检测模型。

但是，当我使用 loadModel 将辅助模型拉入控制器时，我现在立即通过将 tablePrefix 设置为公司代码来遵循这一点，我可以在控制器中访问它。这会进入模型对象并覆盖 tablePrefix 静态属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:37:06.330

我最终将`database.php`配置文件中的前缀更改为我希望会话表具有的前缀，然后在每个模型中将`$table_prefix`属性设置为所需的前缀。看起来有点奇怪，但它完成了工作。

# javascript - Javascript：正则表达式删除 .html

> ID：12021118
> 
> 赞同：0
> 
> 时间：2012-08-18T18:18:47.237
> 
> 标签：javascript, regex, replace

我正在寻找一些删除字符串的 .html 扩展名的正则表达式。

我已经发现这两个由于某种原因它们不起作用：

```
var path = './views/contacts/node/item.html';
var otherPath = path;
path.replace(/\.[^/.]+$/, '');
console.log(path);
// returns ./views/contacts/node/item.html
otherPath.replace(/(.*)\.[^.]+$/, '');
console.log(otherPath);
// also returns ./views/contacts/node/item.html 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:21:07.810

您的原始`regex`作品，您只是没有捕获返回结果。以下两种方法都将起作用：

```
path = path.replace(/\.[^/.]+$/, '');

path = path.replace(/\.html$/, ''); 
```

[http://jsfiddle.net/AE2BY/](http://jsfiddle.net/AE2BY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:23:20.463

```
path = path.replace(/\.html$/, ''); 
```

假设 .html 扩展名总是在字符串的末尾。

至于您提到的正则表达式有什么问题-它们不正确，并且永远不会与您提供的示例字符串匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T18:28:52.657

```
var path = './views/contacts/node/item.html';
var otherPath = path.replace(/(\.html).*?$/, '');

console.log(otherPath) // './views/contacts/node/item' 
```

这应该删除包括“ `.html`”之后的所有内容。

您没有从上面列出的函数中得到想要的结果的原因是因为您`console.log`输入了错误的变量。改变：

```
var path = './views/contacts/node/item.html';
var otherPath = path;
path.replace(/\.[^/.]+$/, '');
console.log(path); 
```

到：

```
var path = './views/contacts/node/item.html';
var otherPath = path.replace(/\.[^/.]+$/, '');
console.log(otherPath); 
```

# html - Facebook 喜欢按钮和白色徽标

> ID：12021119
> 
> 赞同：1
> 
> 时间：2012-08-18T18:18:53.423
> 
> 标签：html, css, facebook

当我点击我网站上的 fb“喜欢”按钮时，结果在 facebook 上看起来不太好。FB上显示的图片是网站的logo，不幸的是我的logo是白色的，所以白色背景上的白色logo不好看。有没有办法告诉 facebook 显示其他图像？我试过 meta property="og:image 但没有成功。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:23:21.830

尝试使用 Facebook Linter 查看 Facebook 从您网站的 og-meta 标签中提取的结果。 [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

每当我更改我的一个站点的任何值时，我都会使用此工具来验证在 FB 上可以看到的内容，并且它还可以加速更新打开的图表，因为有时，更新时不会立即从您的站点中提取结果，因为旧的值驻留在缓存中。

# java - 将外部 jars 添加到 android 项目

> ID：12021120
> 
> 赞同：0
> 
> 时间：2012-08-18T18:18:57.700
> 
> 标签：java, android, jar, classpath

所以我最近才更新到 ADT 20，这简直是一场噩梦。

我尝试了我在网上找到的所有解决方案。1\. 我将 jar 放入 LIBS 文件夹 2\. 从构建路径中的 libary 选项卡添加 jar 并在导出路径中检查它 3\. 我什至做了一件事情，有人说将 libs 文件夹设为源文件夹（我猜所以它被导出）

没有任何效果。请帮助这是一场噩梦。我根本不能使用任何外部罐子......

```
08-18 11:06:45.144: E/AndroidRuntime(3886): FATAL EXCEPTION: main
08-18 11:06:45.144: E/AndroidRuntime(3886): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.Main}: android.view.InflateException: Binary XML file line #15: Error inflating class com.google.ads.AdView
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1696)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1716)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.app.ActivityThread.access$1500(ActivityThread.java:124)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.os.Looper.loop(Looper.java:130)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.app.ActivityThread.main(ActivityThread.java:3806)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at java.lang.reflect.Method.invokeNative(Native Method)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at java.lang.reflect.Method.invoke(Method.java:507)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at dalvik.system.NativeStart.main(Native Method)
08-18 11:06:45.144: E/AndroidRuntime(3886): Caused by: android.view.InflateException: Binary XML file line #15: Error inflating class com.google.ads.AdView
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.app.Activity.setContentView(Activity.java:1703)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at com.example.test.Main.onCreate(Main.java:12)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
08-18 11:06:45.144: E/AndroidRuntime(3886):     ... 11 more
08-18 11:06:45.144: E/AndroidRuntime(3886): Caused by: java.lang.reflect.InvocationTargetException
08-18 11:06:45.144: E/AndroidRuntime(3886):     at java.lang.reflect.Constructor.constructNative(Native Method)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
08-18 11:06:45.144: E/AndroidRuntime(3886):     ... 21 more
08-18 11:06:45.144: E/AndroidRuntime(3886): Caused by: java.lang.RuntimeException: Could not initialize AdView: Required XML attribute "adUnitId" missing
08-18 11:06:45.144: E/AndroidRuntime(3886):     at com.google.ads.AdView.a(SourceFile:417)
08-18 11:06:45.144: E/AndroidRuntime(3886):     at com.google.ads.AdView.<init>(SourceFile:129)
08-18 11:06:45.144: E/AndroidRuntime(3886):     ... 24 more
08-18 11:06:45.144: E/AndroidRuntime(3886): Caused by: com.google.ads.internal.b: Required XML attribute "adUnitId" missing
08-18 11:06:45.144: E/AndroidRuntime(3886):     at com.google.ads.AdView.a(SourceFile:360)
08-18 11:06:45.144: E/AndroidRuntime(3886):     ... 25 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:24:20.120

当我发布这个时，我实际上弄清楚了什么是错的。`Caused by: com.google.ads.internal.b: Required XML attribute "adUnitId" missing`. 太愚蠢了，错误日志一直放在底部。

# networking - 在 heroku 上设置 $PORT 变量

> ID：12021124
> 
> 赞同：3
> 
> 时间：2012-08-18T18:19:31.890
> 
> 标签：networking, heroku, tcp, port, config

在 heroku 上，有一个名为 $PORT 的变量

这是每次 heroku 启动应用程序时随机生成的。

有没有办法设置它，让它在启动时保持不变？

注意：我尝试了 heroku config:set 和 config:add 但除非我做错了，否则它没有生效。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T23:28:13.830

您不能更改分配的端口。如果您绑定到指定端口以外的任何其他端口，我们将使用[R11 错误代码终止您的进程](https://devcenter.heroku.com/articles/error-codes#r11-bad-bind)

# javascript - 如何附加任何特定标签？

> ID：12021130
> 
> 赞同：3
> 
> 时间：2012-08-18T18:20:05.500
> 
> 标签：javascript, jquery, html

例如，我有一个这样的列表标题：`<li id="example"> title </li>`. 这是我希望通过单击按钮将其“附加到”的位置：`<ol id="playlist"> </ol>`

这是按钮：`<span onClick="Button();"><a href="#"> Button </a></span>`

这是功能：

```
Button=function() {
  $('#playlist').append('#example');
} 
```

我只是不明白为什么它不起作用我的意思是当我制作 .append('title') 时 - 所以只是纯文本 - 它会将该文本添加到标签中，但是当我尝试通过身份证不行吗？相反，它附加了“#example”，这不是我想要的。很抱歉，我仍在尝试掌握这种语言，但是，我诚实地搜索并搜索了整个互联网，试图找到一个答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:22:57.513

尝试这个：

```
$('#playlist').append($('#example')); 
```

[小提琴](http://jsfiddle.net/Fqh3p/1/)

更新：

您可以使用该`clone()`方法，试试这个：

```
$('#example').clone().attr('id', 'something').appendTo($('#playlist')) 
```

[小提琴](http://jsfiddle.net/Fqh3p/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:23:34.040

您需要附加整个 li，因此您的解决方案是：

```
function Button() {
  var $li = '<li id="example"> title </li>';
  $('$playlist').append($li);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T18:37:08.333

> [.append](http://api.jquery.com/append/) ( 内容 [, 内容] )
> 
> content：要插入到匹配元素集中每个元素末尾的 DOM 元素、HTML 字符串或 jQuery 对象。...

jQuery 假设您按`#example`字面意思附加 HTML 字符串。使用其他两个选项之一，例如：

```
$('#playlist').append($('#example')); // append a jQuery object 
```

为了完整起见：

```
$('#playlist').append(document.getElementById('example')); // append a DOM element 
```

# c# - 仅对 WPF/XAML 中的图像悬停时产生阴影效果或模糊效果

> ID：12021131
> 
> 赞同：0
> 
> 时间：2012-08-18T18:20:12.697
> 
> 标签：c#, wpf, visual-studio-2010, xaml

我有一个阴影属性定义如下的图像。

```
 <Border Background="Black" Margin="42,180,368,38">
   <Border.Effect>
     <DropShadowEffect Color="Aqua"  Opacity="0.5"/>
   </Border.Effect>

   <Image Height="92" Width="97" Source="/Images/image_search.png" />
 </Border> 
```

这会产生带边框的图像。好的。但是，我需要只在图像悬停时显示边框吗？我怎么做 ？另外，如何模糊悬停在它上面的图像？

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T18:47:45.683

您可以使用样式和触发器来做到这一点。

```
 <Border Margin="42,180,368,38"> 
        <Border.Style>
            <Style TargetType="Border">
                <Setter Property="Background" Value="{x:Null}"/>
                <Setter Property="BorderThickness" Value="0"/>
                  <Style.Triggers>
                    <Trigger Property="Border.IsMouseOver" Value="True">
                        <Setter Property="Background" Value="Black"/>                            
                        <Setter Property="Effect">
                            <Setter.Value>
                                <DropShadowEffect Color="Aqua"  Opacity="0.5"/>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Border.Style>            
        <Image Height="92" Width="97" Source="/Images/image_search.png" />
    </Border> 
```

Style 中的第一个 Setter 将背景颜色显式设置为 null 并将边框粗细设置为 '0' 以“隐藏”边框。当边框控件的 IsMouseOver 属性设置为 true 时，触发器设置边框背景属性。

# iphone - 当来自背景时，方向总是纵向的

> ID：12021138
> 
> 赞同：0
> 
> 时间：2012-08-18T18:21:23.410
> 
> 标签：iphone, ios, xcode

当我的应用程序从后台返回时，它总是旋转为纵向。在我的 VC -

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

`interfaceOrientation`是`UIInterfaceOrientationPortrait`。可能是什么原因 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:27:46.567

尝试使用以下方法检查该 VC 中的方向：

```
[[UIApplication sharedApplication] statusBarOrientation]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:40:31.617

您可以在项目的 plist 中检查您的方向设置。

# ios - 应用程序在启动时崩溃

> ID：12021141
> 
> 赞同：0
> 
> 时间：2012-08-18T18:22:06.457
> 
> 标签：ios, xcode, crash-reports

好的，我的应用程序在模拟器中运行良好，但是当我将应用程序传输到我的 iPhone 时，它​​在启动时崩溃了。我正在通过 cydia 安装应用程序。可以通过这个源安装应用程序`chrisrjones.com/repo` 崩溃报告可以在这里找到->[崩溃报告](http://www.chrisrjones.com/files/LatestCrash.plist) 应用程序的源代码可以在这里找到-> [https://github.com/ipatch/KegCop](https://github.com/ipatch/KegCop)

我创建了一个 shell 脚本来对应用程序进行代码签名和构建 deb 包，到目前为止，该应用程序没有任何问题。我不知道我在崩溃报告中寻找什么，因为我并没有真正对这些事情做太多研究。另外我很确定这不是代码签名错误，但我可能是错的。该应用程序启动一两秒钟然后崩溃，我很确定代码符号崩溃发生的速度比我遇到的要快。

我在 OS X 10.7.4 上使用 Xcode 4.3.2，iOS 版本是 5.1.1 我在我的 Xcode 项目中使用 ARC。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:12:50.810

好的，为了解决这个问题，我删除了位于 /var/mobile/Library/KegCop/ 的 Accounts.sqlite 文件，然后通过 Cydia 删除了该应用程序。我重新启动了电话。我通过 Cydia 重新安装了应用程序，然后应用程序退出崩溃。（耶）

# android - Android ArrayAdapter 空指针异常

> ID：12021145
> 
> 赞同：0
> 
> 时间：2012-08-18T18:22:33.503
> 
> 标签：android, android-arrayadapter

我有一个 ListActivity 类，在其中，我使用 ArrayAdapter 来填充列表。问题是，当我尝试启动活动时，它会崩溃并显示以下错误消息：

```
08-18 18:09:27.443: E/AndroidRuntime(480): FATAL EXCEPTION: main
08-18 18:09:27.443: E/AndroidRuntime(480): java.lang.NullPointerException
08-18 18:09:27.443: E/AndroidRuntime(480):  at com.arox.havayollari.ListAirlines$MyListAdapter.getView(ListAirlines.java:114)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.widget.AbsListView.obtainView(AbsListView.java:1315)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1198)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.widget.ListView.onMeasure(ListView.java:1109)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.view.View.measure(View.java:8171)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.widget.RelativeLayout.measureChild(RelativeLayout.java:563)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:378)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.view.View.measure(View.java:8171)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.view.View.measure(View.java:8171)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.view.View.measure(View.java:8171)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.view.View.measure(View.java:8171)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.os.Looper.loop(Looper.java:123)
08-18 18:09:27.443: E/AndroidRuntime(480):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-18 18:09:27.443: E/AndroidRuntime(480):  at java.lang.reflect.Method.invokeNative(Native Method)
08-18 18:09:27.443: E/AndroidRuntime(480):  at java.lang.reflect.Method.invoke(Method.java:521)
08-18 18:09:27.443: E/AndroidRuntime(480):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-18 18:09:27.443: E/AndroidRuntime(480):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-18 18:09:27.443: E/AndroidRuntime(480):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我的自定义数组适配器代码：

```
@Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            View view = convertView;

            if (view == null) {
                LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                inflater.inflate(R.layout.airline_item, null);
            }

            //It crashes at this line
            ImageView img = (ImageView) view.findViewById(R.id.imgAirline);

            TextView tview = (TextView) view.findViewById(R.id.tvAirline);
            tview.setText(lines[position].toString());

            return view;
        } 
```

还有我的airline_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imgAirline"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/logo" />

    <TextView
        android:id="@+id/tvAirline"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:text="Medium Text"
        android:layout_marginLeft="20dip"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

我真的不明白问题是什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:26:25.907

您正在膨胀布局，但没有膨胀到任何`View`. 这就是你的充气应该如何工作：

```
if (view == null) {
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    view = inflater.inflate(R.layout.airline_item, null);
} 
```

# jquery-ui - Jquery 调用在 Angular 的 $viewContentLoaded 中不起作用

> ID：12021152
> 
> 赞同：8
> 
> 时间：2012-08-18T18:23:15.767
> 
> 标签：jquery-ui, angularjs

无法在 Angular 控制器的 $viewContentLoaded 事件中调用 jquery 函数，这里是相同的代码。

```
$scope.$on('$viewContentLoaded', function() {
    jQuery.growlUI('Growl Notification', 'Saved Succesfully');
    jQuery('#category').tree()
    }); 
```

这里需要什么配置吗？？我什至尝试了 noConflict(); var $jq = jQuery.noConflict(); 它是否需要任何其他配置？

谢谢， 阿卜杜勒

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-19T23:30:45.133

首先，不要从控制器进行 DOM 操作。而是从指令中执行。

您可以在指令链接方法中做同样的事情。您可以访问`element`应用了哪个指令。

确保在 angularjs 脚本之前加载 jquery，然后是 grawlUI、三、angularJS，最后是您的应用程序脚本。以下是指令样本

```
var app = angular.module("someModule", []);

app.directive("myDirective", function () {
    return function (scope, element, attrs) {

        $.growlUI('Growl Notification', 'Saved Succesfully');
        element.tree();
    };

}); 
```

angularjs 内置了 jQuery lite。如果在 Angular 之后加载完整的 jquery，由于 jQuery 已经定义，完整的 jquery 脚本将跳过执行。

==评论后更新==

我在评论后再次查看了您的问题，并意识到通过 ajax 加载的内容被附加到您的角度视图中的某个 div 中。然后你想将 element.tree() jquery 插件应用于该内容。不幸的是，上面的示例将不起作用，因为它是在您的 ajax 响应内容附加到带有我向您显示的指令的元素之前发生的链接时触发的。但别担心，有一种方法 :) 虽然它又快又脏，但它只是用于演示。

假设这是您的控制器

```
function ContentCtrl($scope, $http){
  $scope.trees=[];

  $scope.submitSomethingToServer=function(something){
     $http.post("/article/1.html", something)
          .success(function(response,status){
               // don't forget to set correct order of jquery, angular javascript lib load
               $.growlUI('Growl Notification', 'Saved Succesfully');

               $scope.trees.push(response); // append response, I hope it is HTML
     });
  }

} 
```

现在，在控制器范围内的指令（它使用与控制器相同的范围）

```
var app = angular.module("someModule", []);

app.directive("myDirective", function () {
    return function (scope, element, attrs) {

        scope.$watch("trees", function(){
            var newParagraph=$("<p>" + scope.trees[scope.trees.length-1] + "</p>" ); // I hope this is ul>li>ul>li...or what ever you want to make as tree
            element.append(newParagraph); 
            newParagraph.tree(); //it will apply tree plugin after content is appended to DOM in view
        }); 
    };

}); 
```

第二种方法是在 ajax 完成并从服务器获取内容后，从控制器（取决于指令在哪里，在控制器的范围内或范围内）进行 $broadcast 或 $emit 事件。然后指令应该订阅这个事件并通过接收传递的数据（数据=内容作为字符串）来处理它，然后按照我上面向你展示的那样做剩下的事情。

问题是，将来自 ajax 的内容作为数据一直威胁到指令，然后将其注入到您要在其中呈现它的元素并将树插件应用于该内容。

# javascript - webrtc - 获取网络摄像头的纵横比

> ID：12021159
> 
> 赞同：5
> 
> 时间：2012-08-18T18:24:02.900
> 
> 标签：javascript, webrtc

我正在尝试学习如何开发 webRTC 应用程序，我想知道您是否可以获得相机的纵横比......（我不知道它是否有帮助，但我正在使用 webrtc.io，但是 -if更好-我可以停止使用它）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T03:38:47.287

由于您通过 - 元素访问相机，[因此](https://developer.mozilla.org/en/docs/DOM/HTMLVideoElement)`<video>`您应该使用[和](https://developer.mozilla.org/en/docs/DOM/HTMLVideoElement)[属性](https://developer.mozilla.org/en/docs/DOM/HTMLVideoElement)来计算纵横比。这些值反映了源媒体流的实际尺寸，并且可能与页面上呈现的元素的和属性不同。[`videoWidth``videoHeight`](https://developer.mozilla.org/en/docs/DOM/HTMLVideoElement)`width``height``<video>`

这种方法似乎在 Chrome 和 Firefox Nightly 中运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-30T00:32:31.337

从[MDN](https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackSettings#Properties_of_video_tracks)`aspectRatio` ，您可以通过`MediaTrackSettings`调用以下方式获取当前视频流：

```
stream.getVideoTracks()[0].getSettings().aspectRatio 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T20:15:45.083

现在，最好的假设是方形像素，因此宽度/高度是一个很好的近似值。

Media Capture Task Force 中有关于功能的讨论，但实际的纵横比目前 IIRC 不可用。

您应该在 w3.org 的公共媒体捕获列表中询问

# apache - RewriteCond 反向引用到另一个 RewriteCond 导致 500

> ID：12021163
> 
> 赞同：1
> 
> 时间：2012-08-18T18:24:38.653
> 
> 标签：apache, .htaccess, url-rewriting, subdomain

我在 cpanel 中设置了一个 *.mydomain.com 子域（cpanel，无 shell 访问权限） 转到任何东西。mydomain.com 让我进入我为 *.mydomain.com 安装的同一目录

因此，当我在 .htaccess 中使用以下内容访问 test.mydomain.com 时，

正常工作的是：

```
RewriteEngine on
RewriteCond %{HTTP_HOST}   ^(.+)\.(.+?\..+?)$ [NC]
RewriteCond %{REQUEST_URI} !^/test/(.+)?$
RewriteRule ^(.*)  /%1/$1 
```

什么不起作用并给出 500 错误是这样的（刚刚用 %1 替换了测试）：

```
RewriteEngine on
RewriteCond %{HTTP_HOST}   ^(.+)\.(.+?\..+?)$ [NC]
RewriteCond %{REQUEST_URI} !^/%1/(.+)?$
RewriteRule ^(.*)  /%1/$1 
```

如果存在具有其名称的子目录，我想要做的是允许动态设置子域。当我在 .htaccess 中硬编码子域名*测试*时，重写是优雅地完成的，而不是当我为其使用反向引用*%1*时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:50:24.953

您不能使用 % 变量或反向引用作为`RewriteCond`. 您可以使用反向引用和 # regex 反向引用创建一个字符串：

```
 RewriteCond %1:%{REQUEST_URI} !^([^:]+):/\1/(.+)?$ 
```

因此，您创建了一个由主机匹配的子域、冒号、然后是 URI 组成的字符串，与正则表达式中的子域匹配，并使用 \1 引用它。

此外，您可能需要立即添加另一个`%{HTTP_HOST}`匹配项，因为 %1 反向引用可能已被重置，因为您无法反向引用*非*匹配项。

# jquery - jQuery 对话框 - 未定义

> ID：12021167
> 
> 赞同：2
> 
> 时间：2012-08-18T18:25:51.300
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我有调用对话框的 JS 函数

```
function SomeFunction {
$('#editformdialog').dialog('open');
} 
```

这显然是简化的。但是，我得到`a is undefined`我然后添加`console.log(typeof dialog);`并带回`undefined`

它在使用 jQuery 1.7.1 但不是 1.8.12 时有效（需要是最新的）。它适用于 Firefox 而不是 Chrome。

有任何想法吗？

谢谢，

JJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:33:08.840

[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.js)

使用最新版本，它已排序！

# android - 在 targetSdkVersion 8 上运行 AsyncTask 时 Android 崩溃

> ID：12021170
> 
> 赞同：1
> 
> 时间：2012-08-18T18:26:26.257
> 
> 标签：android, android-asynctask, nullpointerexception, imageview

我的应用程序在我设置时崩溃了，`android:targetSdkVersion="8"`但是当我将它设置为`android:targetSdkVersion="11"`一切正常时。请看logcat，我真的不知道我的代码有什么问题。看起来任何使用低于 11 的 SDK 的设备都会遇到这个问题。我的 min sdk 是 7。如果我继续交付我的应用程序，我可能会遇到很多麻烦。

```
public class SingleMenuItemActivity  extends Activity {

    // XML node keys
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "artist";  
static final String KEY_THUMB_URL = "thumb_url";
private ProgressDialog pDialog;
String title;
String artist;
String image_url;
ImageView view;
Intent intent;
Context context;
ShareActionProvider mShareActionProvider;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.single_list_item);
        new loadSingleView().execute(); 

        view = (ImageView) findViewById(R.id.single_image);

    }

public class loadSingleView extends AsyncTask<String, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(
                    SingleMenuItemActivity.this);
            pDialog.setMessage("Connecting to Server ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }
        @Override
        protected String doInBackground(String... args) {
            // updating UI from Background Thread

            Intent in = getIntent();

            image_url = in.getStringExtra(KEY_THUMB_URL);
                        title = in.getStringExtra(KEY_TITLE);
            artist = in.getStringExtra(KEY_ARTIST);

            return null;

                    }
        @Override       
        protected void onPostExecute(String args) {
            // dismiss the dialog after getting all products

            ImageLoader imgLoader = new ImageLoader(getApplicationContext());

            imgLoader.DisplayImage(image_url, view);

            TextView lblName = (TextView) findViewById(R.id.name_title);
            TextView lblCost = (TextView) findViewById(R.id.name_artist);

            lblName.setText(title);
            lblCost.setText(artist);

            ActionBar ab = getActionBar();
            ab.setTitle(title);

            pDialog.dismiss();

        }

} 
```

日志猫：

```
08-19 02:19:03.351: E/AndroidRuntime(22761): FATAL EXCEPTION: main
08-19 02:19:03.351: E/AndroidRuntime(22761): java.lang.NullPointerException
08-19 02:19:03.351: E/AndroidRuntime(22761):    at com.example.androidhive.SingleMenuItemActivity$loadSingleView.onPostExecute(SingleMenuItemActivity.java:88)
08-19 02:19:03.351: E/AndroidRuntime(22761):    at com.example.androidhive.SingleMenuItemActivity$loadSingleView.onPostExecute(SingleMenuItemActivity.java:1)
08-19 02:19:03.351: E/AndroidRuntime(22761):    at android.os.AsyncTask.finish(AsyncTask.java:602)
08-19 02:19:03.351: E/AndroidRuntime(22761):    at android.os.AsyncTask.access$600(AsyncTask.java:156)
08-19 02:19:03.351: E/AndroidRuntime(22761):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
08-19 02:19:03.351: E/AndroidRuntime(22761):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-19 02:19:03.351: E/AndroidRuntime(22761):    at android.os.Looper.loop(Looper.java:137)
08-19 02:19:03.351: E/AndroidRuntime(22761):    at android.app.ActivityThread.main(ActivityThread.java:4512)
08-19 02:19:03.351: E/AndroidRuntime(22761):    at java.lang.reflect.Method.invokeNative(Native Method)
08-19 02:19:03.351: E/AndroidRuntime(22761):    at java.lang.reflect.Method.invoke(Method.java:511)
08-19 02:19:03.351: E/AndroidRuntime(22761):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:982)
08-19 02:19:03.351: E/AndroidRuntime(22761):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:749)
08-19 02:19:03.351: E/AndroidRuntime(22761):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T18:28:46.547

SDK 8 没有`ActionBar`. 您将不得不使用类似`ActionBarSherlock`库之类的东西来`ActionBar`支持 SDK < Honeycomb。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T18:31:00.927

我认为这些代码行会导致**API 8**中的异常，

```
 ActionBar ab = getActionBar();
 ab.setTitle(title); 
```

因为，[ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html)是在**Android 3.0 (API level 11)**中添加的。来自 Android 文档..

对于您的主题关注..

请看这两个SO问题..

1.  [ActionBar pre Honeycomb](https://stackoverflow.com/questions/6646169/actionbar-pre-honeycomb)

2.  [11以下的api级别如何实现action bar？](https://stackoverflow.com/questions/5349170/how-to-implement-the-action-bar-in-api-levels-less-than-11)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T18:30:45.523

在不知道第 88 行的情况下，问题可能出在此处：

```
ab.setTitle(title); 
```

在 API 11 中添加了 ActionBar

[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

# r - xts 按月滚动计算

> ID：12021171
> 
> 赞同：3
> 
> 时间：2012-08-18T18:26:35.357
> 
> 标签：r, subset, apply, xts, zoo

我熟悉允许您对或对象进行滚动计算的`zoo`功能，您可以通过参数指定滚动增量。我对每个月应用一个函数特别感兴趣，但在计算中使用所有过去的每日数据。例如，假设我的数据集如下所示：`rollapply``zoo``xts``by`

```
dte, val
1/01/2001, 10
1/02/2001, 11
...
1/31/2001, 2
2/01/2001, 54
2/02/2001, 34
...
2/30/2001, 29 
```

我想选择每个月的月底和`apply`一个使用所有每日数据的函数。这似乎不起作用，`rollapply`因为`by`参数有时是 30 个月，其他月份是 29 个月，等等。我目前的想法是：

```
f <- function(xts_obj) { coef(lm(a ~ b, data=as.data.frame(xts_obj)))[1] }
month_end <- endpoints(my_xts, on="months", k=1)
rslt <- apply(month_end, 1, function(idx) { my_xts[paste0("/",idx)] }) 
```

当然有更好的方法可以更快地做到这一点，不是吗？澄清一下：我想使用重叠的时间段，只是滚动应该每月进行一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T18:55:32.427

如果我理解正确，您可以获取端点的日期，然后对于每个端点（即使用`lapply`or `for`），调用`rollapply`using data 直到该点。

```
getSymbols("SPY", src='yahoo', from='2012-01-01', to='2012-08-01')
idx <- index(SPY)[endpoints(SPY, 'months')]
out <- lapply(idx, function(i) {
  as.xts(rollapplyr(as.zoo(SPY[paste0("/", i)]), 5, 
                    function(x) coef(lm(x[, 4] ~ x[, 1]))[2], by.column=FALSE))
})
sapply(out, NROW)
#[1]  16  36  58  78 100 121 142 143 
```

我暂时强制以`zoo`确保`rollapplyr`正在`rollapply.zoo`使用该方法（而不是未导出的`rollapply.xts`方法），然后强制返回`xts`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T15:47:57.680

作为对“是否需要 zoo/xts 转换？”的回答：在这种情况下不需要它，但是如果你向它发送数据帧，rollapply 将不起作用，正如我最近从[这个 StackOverflow 答案中发现的那样](https://stackoverflow.com/questions/11583177/dynamic-time-series-prediction-and-rollapply)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T18:32:39.767

你想要`period.apply()`，或者它的便利助手`apply.monthly()`，都在[xts](http://cran.r-project.org/package=xts)中。

例子：

```
R> foo <- xts(1:100, order.by=Sys.Date()+0:99)
R> apply.monthly(foo, sum)
           [,1]
2012-08-31  105
2012-09-30  885
2012-10-31 1860
2012-11-25 2200
R> 
```

或同样

```
R> apply.monthly(foo, quantile)
           0%   25%  50%   75% 100%
2012-08-31  1  4.25  7.5 10.75   14
2012-09-30 15 22.25 29.5 36.75   44
2012-10-31 45 52.50 60.0 67.50   75
2012-11-25 76 82.00 88.0 94.00  100
R> 
```

只是为了证明也可以使用返回多个值的函数。

# c# - 如何使用 sql 在 c# 中仅显示表中的新行或更新行？

> ID：12021176
> 
> 赞同：0
> 
> 时间：2012-08-18T18:27:30.920
> 
> 标签：c#, sql, gridview

有没有办法只在 C# 中使用 Sql 加载新的或更新的（编辑的）记录？假设我有一个包含 1000 个学生记录的表。我想在 gridview 中显示这些信息（这只是一个示例），并且在添加或编辑新条目时，我希望 gridview 得到更新并显示对表。如果我去吃

> 选择 *

声明，这肯定会影响应用程序的性能，所以我认为尝试只将那些新记录添加到先前加载的记录到 gridview 是一个好主意。但我对如何做这样的任务一无所知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T18:36:56.057

没有其他解决方案，只需*构建* 您的数据库即可。

只是许多可能的解决方案之一：对于数据库中每个*插入*或*更新*的记录，您可以拥有一个`timestamp`. 在数据库中拥有该信息，您可以：

a) 获取最新的，从`timestamp`角度来看，记录在您的`DataGrid`

b）从 darabase 获取所有比它`timestamp`更大的 reoirds。

我再说一遍，这只是我们众多可能的解决方案之一。什么适合您的要求必须由您自己决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T18:35:22.093

创建一个时间戳列并存储“最后更新”日期。在您的应用程序中，存储上次从数据库中检索数据的时间。然后，您可以只选择从那时起已更改（或添加）的记录。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T18:36:38.597

最简单的方法是在表中添加一个新字段，例如日期时间类型的**ModifyDate**，并在插入和更新记录时将当前日期时间放在这些字段中。

在这种情况下，您可以根据该字段选择查询，如下所示

```
Select Top 10 * from Table1 OrderBy ModifyDate desc 
```

# php - 试图获取非对象 SimpleXML 的属性

> ID：12021183
> 
> 赞同：0
> 
> 时间：2012-08-18T18:28:27.927
> 
> 标签：php, simplexml

我尝试了多种代码组合，即使我认为我掌握了它，它也失败了！我总是回到“获取非对象错误的属性”我目前的一个是：

```
Notice: Trying to get property of non-object in {PROJECT_DIR} on line 11 
```

无论如何，我正在尝试更改 .docx 文件 document.xml 文件中书签的节点值，并且我有一组书签 id => 书签名称，我正在使用简单的 foreach 遍历它们来编辑所有使用 SimpleXML 找到了书签，但是，我遇到了一些问题。

我目前的代码是：

```
if (file_exists('document.xml'))
{
    $document = simplexml_load_file('document.xml');
}
echo $document->getName() . "<br />";
echo $document->document->body->{'w:bookmarkStart'}; 
```

我尝试从 echo 语句中删除 ->document 并将 {'w:bookmarkStart'} 更改为 bookmarkStart 但一切都证明无效，但是我说我尝试的上述更改没有返回通知，只是空白。我确定我还没有掌握这个 XML 东西的要点，而且我对它很菜鸟，这对你们来说可能很容易指出问题，但是代码示例的研究和使用已经事实证明对我无效；（我尝试编辑的 XML 文件的紧凑版本是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<w:document xmlns:wpc="http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas"
            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
            xmlns:o="urn:schemas-microsoft-com:office:office"
            xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"
            xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml"
            xmlns:wp14="http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing"
            xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing"
            xmlns:w10="urn:schemas-microsoft-com:office:word"
            xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
            xmlns:w14="http://schemas.microsoft.com/office/word/2010/wordml"
            xmlns:wpg="http://schemas.microsoft.com/office/word/2010/wordprocessingGroup"
            xmlns:wpi="http://schemas.microsoft.com/office/word/2010/wordprocessingInk"
            xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml"
            xmlns:wps="http://schemas.microsoft.com/office/word/2010/wordprocessingShape" mc:Ignorable="w14 wp14">
    <w:body>
            <w:bookmarkStart w:id="0" w:name="MOREG"/>
            <w:bookmarkEnd w:id="0"/>
    </w:body>
</w:document> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:07:28.747

也许这会有所帮助？ `$document->xpath("//w:bookmarkEnd");` 使用 xpath 查询可能更实用，并且可以很好地选择节点。（也许这里有人可以帮助您找到一种方法来按照您的方式进行操作，如果没有帮助，请见谅）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:08:49.540

不幸的是，名称空间（示例中的`<w:...`表示法和`xmlns:w="..."`声明）使 SimpleXML 变得不那么简单。

首先要知道的是，`w:`前缀实际上只是“真实”命名空间的本地别名，也就是对应`xmlns:w`属性定义的 URI——在这种情况下，`'http://schemas.openxmlformats.org/wordprocessingml/2006/main'`

要知道的第二件事是，要获取默认（无前缀）命名空间以外的任何元素，您需要使用 SimpleXML 方法[`->children($namespace)`](http://php.net/manual/en/simplexmlelement.children.php)和[`->attributes($namespace)`](http://php.net/manual/en/simplexmlelement.attributes.php)

因此，经过一些反复试验，我让您的示例 XML 使用以下命令输出“MOREG”：

```
$w = 'http://schemas.openxmlformats.org/wordprocessingml/2006/main';
echo $document->children($w)->body->bookmarkStart['name']; 
```

如果您使用的是 PHP ≥ 5.2，您实际上可以通过传递`true`给`children`方法来使用“w”前缀，将事情简化为：

```
echo $document->children('w', TRUE)->body->bookmarkStart['name']; 
```

# iphone - iOS Rotate View Only One View Controller 的 View

> ID：12021185
> 
> 赞同：4
> 
> 时间：2012-08-18T18:28:32.430
> 
> 标签：iphone, objective-c, ios, autorotate

我在一个项目中有两个视图控制器。但是，我希望其中一个视图控制器自动旋转，而另一个不自动旋转。

如果我设置主项目设置，如下所示： ![在此处输入图像描述](../Images/a3a868d4eed340192653f6667e4a403f.png)

然后，所有视图控制器都会自动旋转，无论视图控制器中的以下代码如何，我都不想自动旋转：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (interfaceOrientation == UIInterfaceOrientationPortrait) {
        return YES;
    }
    return NO;
} 
```

但是，如果我如下所示设置主项目设置，我不想自动旋转的视图控制器不会，但这也意味着我想要的视图控制器也不能。

![在此处输入图像描述](../Images/f18f3bd2c33083d8e46ce89f5f556547.png)

我必须如何将主项目（plist 文件）设置与视图控制器的设置集成，以便一个视图控制器自动旋转而另一个视图控制器不会？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:04:04.317

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

在 iOS 6 中已贬值，因此如果您的项目正在运行，这就是它无法正常工作的原因。您需要做的是实施：

```
- (NSUInteger)supportedInterfaceOrientations
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation 
```

第一个将告诉控制器允许使用哪个方向，第二个将告诉它首先使用哪个方向。请注意，仅当方法 shouldAutorotate: 返回 YES 时才调用第一个方法。

这些是可用于supportedInterfaceOrientations 的常量：

```
UIInterfaceOrientationMaskPortrait
UIInterfaceOrientationMaskLandscapeLeft
UIInterfaceOrientationMaskLandscapeRight
UIInterfaceOrientationMaskPortraitUpsideDown
UIInterfaceOrientationMaskLandscape
UIInterfaceOrientationMaskAll
UIInterfaceOrientationMaskAllButUpsideDown 
```

请注意，这些仅适用于 iOS 6.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:04:19.880

假设我正在使用 tabbarController & iOS<6.0 尝试使用以下代码解决您的问题：

```
//In First View Controller

//BOOL activeStatus;

-(void)viewWillAppear:(BOOL)animated
{
 activeStatus=YES;
}

-(void)viewWillDisappear:(BOOL)animated
{
 activeStatus=NO;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight) && activeStatus==YES)
{
    return YES;
}

return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

* * *

```
//In Second View Controller

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

 return YES;
} 
```

# c++ - 在单例类上调用的复制构造函数

> ID：12021192
> 
> 赞同：5
> 
> 时间：2012-08-18T18:29:28.020
> 
> 标签：c++, singleton, visual-studio-2012, copy-constructor

我有以下问题。我有一个带有 getInstance 成员函数的单例，它返回一个实例。我在代码中的某处调用它，出于某种原因，VC 尝试调用复制构造函数。为什么是这样？我该如何解决？

标题：

```
class FileSystemEntryCollection {
public:
    static FileSystemEntryCollection &getInstance();
private:
    FileSystemEntryCollection();
    FileSystemEntryCollection(FileSystemEntryCollection const&);
    void operator=(FileSystemEntryCollection const&);
} 
```

源文件：

```
FileSystemEntryCollection &FileSystemEntryCollection::getInstance() {
    static FileSystemEntryCollection instance = FileSystemEntryCollection();
    return instance;
} 
```

以下行调用复制构造函数：

```
auto collection = FileSystemEntryCollection::getInstance(); 
```

我试图留下相关代码，如果需要其他内容，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T18:30:36.447

```
auto collection = FileSystemEntryCollection::getInstance(); 
```

需要是：

```
auto& collection = FileSystemEntryCollection::getInstance();
    ^ 
```

`auto`就其本身而言，它永远不是引用类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T18:49:56.883

使用不同的编译器，初始化`instance`.

```
static FileSystemEntryCollection instance = FileSystemEntryCollection(); 
```

这里`=`需要复制构造：形式上，编译器创建一个临时的 ( `FileSystemEntryCollection()`)，并将其复制到`instance`. 但是，在这种情况下，允许编译器跳过复制构造并直接在原地构造对象。这就是你的编译器正在做的事情。但是编译器不需要这样做。

更好的：

```
static FileSystemEntryCollection instance; 
```

它使用默认构造函数来创建`instance`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T18:35:16.387

它在构造静态单例对象的源文件中调用一次复制构造函数。

# javascript - 在 D3JS 中更新文本标签

> ID：12021194
> 
> 赞同：2
> 
> 时间：2012-08-18T18:29:42.567
> 
> 标签：javascript, d3.js, label, force-layout

在过去的几天里，我一直在努力解决这个问题：我有一个力有向图，可以像[这个例子](http://console.neo4j.org)一样标记它的边缘。我面临的问题是，当图形更新时（即：在用户单击时添加图形上的一个节点）它会更新图形，但它会留下我之前写的旧边标签：

**附加新图表之前和之后：** ![前](../Images/b2add9d547f40814ef2f839229ef626e.png) ![后](../Images/770c44fb1dff61ebd9e20f9e7e50172a.png)

如您所见，我的边缘标签在更新后仍然存在。我有一个每次新数据进入时都会调用的函数，在这个函数中我有以下代码来绘制标签：

```
path_text = svg.selectAll(".path")
.data(force.links(), function(d){ return d.name;})
.enter().append("svg:g");
path_text.append("svg:text")
.attr("class","path-text")
.text(function(d) { return d.data.label; }); 
```

svg 变量在顶级闭包中声明一次，如下所示：

```
var svg = d3.select("body").append("svg:svg")
        .attr("viewBox", "0 0 " + width + " " + height)
        .attr("preserveAspectRatio", "xMidYMid meet"); 
```

我的图表有一个 tick() 函数，它计算每个标签的位置，如下所示：

```
function tick()
    {
            // Line label           
            path_text.attr("transform", function(d) 
            {
                var dx = (d.target.x - d.source.x),
                dy = (d.target.y - d.source.y);
                var dr = Math.sqrt(dx * dx + dy * dy);
                var sinus = dy/dr;
                var cosinus = dx/dr;
                var l = d.data.label.length * 6;
                var offset = (1 - (l / dr )) / 2;
                var x=(d.source.x + dx*offset);
                var y=(d.source.y + dy*offset);
                return "translate(" + x + "," + y + ") matrix("+cosinus+", "+sinus+", 

"+-sinus+", "+cosinus+", 0 , 0)";
                });
.
.
. 
```

我尝试将这个 svg 声明向下移动到更新函数中，以便每次发生图形更改时都会对其进行实例化。这实际上有效 - 但它会完全复制整个图表。第一个，原始副本仍然保留旧标签 - 但第二个副本完全按照我的意愿行事。有没有办法，也许，而不是附加 svg，有一种替换的方法？我也尝试过调用 exit().remove() 也没有任何运气。

非常感谢您的参与。这一直让我感到沮丧，因为我应该如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:21:19.570

我将 svg 声明放在我的图形更新函数中，将其附加到 div，并在再次附加之前清除 div：

```
jQuery('#v').empty();
var svg = d3.select("#v").append("svg:svg")
.attr("viewBox", "0 0 " + width + " " + height)
.attr("preserveAspectRatio", "xMidYMid meet"); 
```

在我看来，这不是最干净的解决方案，但除非你们都有更好的解决方案，否则会采用这个解决方案！

# asp.net - 从 WebMatrix 2 中的部分访问变量

> ID：12021195
> 
> 赞同：0
> 
> 时间：2012-08-18T18:29:43.463
> 
> 标签：asp.net, webmatrix, webmatrix-2

很简单我如何从部分传递到施工页面：

_SiteLayout.cshtml

```
@{PageData["phoneNumber"]="072342342343";} 
```

页面.cshtml

```
 please call us on @PageData["phoneNumber"] 
```

我试过这样的事情。我错过了什么明显的步骤？

它带来了空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:52:42.970

尝试为此使用 Session：

```
Session["phoneNumber"]="072342342343"

@Session["phoneNumber"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:34:00.733

您也可以使用该`HttpContext.Items`集合。它的工作原理与 大致相同`Session`，但集合仅在请求期间保持活动状态。不过，我不确定如何使用 Razor 最轻松地访问它。[在此处](http://www.4guysfromrolla.com/articles/060904-1.aspx)阅读有关 HttpContext.Items的更多信息。

# visual-studio-2010 - Visual Studio 2010 中的 Sublime Text 样式 ctrl-P 等效？

> ID：12021198
> 
> 赞同：25
> 
> 时间：2012-08-18T18:30:22.787
> 
> 标签：visual-studio-2010

在 Sublime Text 等中，您可以键入**Control-P**进行增量文件搜索。

在 Visual Studio 2010 中：

**Control-i 进行**增量*文本*搜索

**Control-，**进行增量*符号*搜索

**Control-Shift-f**，*查找所有文件*

我想要的是**Control-Shift-F的***增量*版本。

 **这样的事情存在吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2017-05-12T20:40:39.683

Visual Studio 2017 带有此功能（称为`Edit.GoToAll`）。默认映射是`Ctrl`+`T`或`Ctrl`+ `,`。

要更改它，请单击`Tools -> Options`然后在 Environment/Keyboard 下搜索`GoToAll`并分配`Ctrl`+ `P`：

[![编辑.GoToAll](../Images/7c4d4d624a319ab4426c1cb0734c4fd4.png)](https://i.stack.imgur.com/2iLlU.png)

来源：[https ://docs.microsoft.com/en-us/visualstudio/ide/whats-new-in-visual-studio#experience-improved-navigation-controls](https://docs.microsoft.com/en-us/visualstudio/ide/whats-new-in-visual-studio#experience-improved-navigation-controls)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-03T21:29:55.590

找到了这两个：

*   [锐化器：](http://www.jetbrains.com/resharper/features/navigation_search.html#Go_to_File))

> 与转到类型类似，转到文件 (Ctrl+Shift+N) 可将您导航到解决方案中的任何文件。支持所有相同的搜索技术和通配符。

*   [VsFileNav](http://visualstudiogallery.msdn.microsoft.com/cfdf85c2-aaa4-4bdd-b8ea-e22bcc9860af)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T09:58:28.580

一年多过去了，所以如果你切换到 VS 2012，我推荐这个：http: [//visualstudiogallery.msdn.microsoft.com/5437f2e7-adef-44e2-b841-78be850e763e](http://visualstudiogallery.msdn.microsoft.com/5437f2e7-adef-44e2-b841-78be850e763e)**

# javascript - 当发送的请求是 JS 格式时，如何让应用程序帮助方法工作？

> ID：12021200
> 
> 赞同：0
> 
> 时间：2012-08-18T18:30:27.340
> 
> 标签：javascript, ruby-on-rails, redirect

我有签到？如果您已闲置 5 分钟，rails 中的方法将带您返回登录页面。

当用户在 5 分钟后点击通过 js 提交的表单时，我该如何进行这项工作？显然，当这种情况发生时，服务器会将登录页面发回给用户，但没有显示出来。这是我的 signed_in 方法

```
def signed_in?
  unless current_user
    flash[:notice] = "Please log in"
    redirect_to root_url
  else
    if session[:expiry_time].nil? || session[:expiry_time] < 5.minutes.ago
      reset_session
      flash[:notice] = "Please log in"
      redirect_to root_url
    else
      session[:expiry_time] = 300.seconds.from_now
    end
  end
end 
```

PS：我知道这是可怕的代码，我一定会重构它:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:36:45.723

这是我想出的解决方案，我觉得它更简单。在 signed_in 方法中：

```
respond_to do |format|
    format.js {
      flash[:notice] = "Please log in"
      render 'home/not_logged_in'
    } 
```

然后在 not_logged_in 视图上

```
window.location = '<%= root_url %>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:07:26.650

但我会首先实现一个替代重定向方法，即使对 XHR 请求也执行完全重定向：

```
def redirect_with_js location
  if request.xhr?
    # HTML response is expected:
    render :text => "<script>document.location = '#{view_context.escape_javascript location}'</script>"
    # JS response is expected:
    # render :text => "document.location = '#{view_context.escape_javascript location}'"
  else
    redirect_to location
  end
end 
```

然后在重定向的时候使用这个方法：

```
redirect_with_js boomeranked_url 
```

返回的文本取决于 AJAX 请求期望返回的响应类型（HTML 或 JS）。我已经包含了这两个版本。这应该给你一些开始。

# joomla - 这些列（jos_content）的值是什么意思？

> ID：12021201
> 
> 赞同：0
> 
> 时间：2012-08-18T18:30:29.477
> 
> 标签：joomla, joomla1.5

我想确定 jos_content 表中列的含义值：

*   修改的
*   发表
*   发布_up
*   发布_下

有人可以给我任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:49:54.917

modified : 文章最后一次修改的日期时间

已发布：我在该表中看不到已发布的任何字段

publish_up ：您希望发布该文章的日期时间

publish_down ：您希望取消发布该文章的日期时间

# php - 编写托管在负载平衡服务器中的 Web 应用程序时要知道的事情？

> ID：12021204
> 
> 赞同：2
> 
> 时间：2012-08-18T18:30:46.527
> 
> 标签：php, web-applications, load, webserver

假设您正在编写一个 PHP 应用程序，该应用程序将托管在负载平衡/多服务器设置中。为了确保顺利运行，您需要了解哪些事项？现在我认为唯一会成为问题的是 PHP 会话（即，您必须为其使用自定义数据库处理程序）。还要别的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:39:00.520

文件上传/下载也可能是一个问题 - 您可能需要它们在所有服务器上都可见

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:47:12.703

让我们把它变成一个答案：

根据我的经验，绝大多数 PHP 应用程序不受或不仅受网络服务器上 PHP 功能的限制，而且至少受后备存储（即数据库和/或文件）的限制。

因此，在没有仔细分析的情况下对 PHP 应用程序进行负载平衡可能会使事情变得更糟：用越来越多的负载击中链中最薄弱的环节。

因此，首先 - 恕我直言，最重要的“在编写托管在负载平衡服务器中的 Web 应用程序时要知道的事情”是负载模式，以及它的平衡潜力。如果您的应用程序性能不佳，您可以在更多服务器上对其进行负载平衡，然后发现您现在有更多服务器在等待数据库，您就有麻烦了。

这是一个出乎意料的清单，请将其重新定义为头脑风暴（或头脑风暴）：

*   第一：你真的受 CPU 限制吗？
*   哪些页面被点击最多（查看您的日志）
*   对于其中的前 N ​​个（使用合适的 N）检查处理模式：CPU 周期在哪里？
*   共享会话、上传、文件存储（添加您使用的任何内容）会产生什么副作用，并且会被负载平衡抵消吗？

欢迎评论，我很确定还没有触及表面！

**编辑**

只是想到了在这种情况下让我印象深刻的东西：资源锁定。如果您使用多服务器，请为更高程度的并发做好准备

# javascript - jQuery UI 选项卡取消选择事件或在选择时保存上一个选项卡

> ID：12021205
> 
> 赞同：0
> 
> 时间：2012-08-18T18:30:49.127
> 
> 标签：javascript, jquery, jquery-ui, tabs, jquery-ui-tabs

我喜欢 jQuery UI，并在我的网站上使用它的“标签”作为标准的视觉滑块，但 UI 没有取消选择的事件。

我的意思是说：

我在选项卡上有一个动画`.show()`，但我希望在选项卡自动旋转或通过选择另一个选项卡时**取消选择**（但jQuery UI 选项卡事件上没有**取消选择事件）事件动画 - 当前选项卡必须执行****取消选择动画**然后显示（带动画）选定的选项卡。也许有人知道这个问题？之前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:39:55.467

这个逻辑可以发生在选择事件中。我在这里的示例将假设您通过 id 将选项卡链接到 div，并且您在当前活动的选项卡上有一个名为“selected”的类。根据需要更改您的代码。

```
$(".tabs li").click(function() {
  active_id = $(".tabs li.selected").attr(id);
  $this = $(this);
  $("div.tab-content#"+active_id).fadeOut("slow", function() {
    $this.addClass("selected");
    $("div.tab-content#"+$this.attr("id")).fadeIn("slow");
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T04:00:31.877

您是否尝试过使用该`fx`选项？

特别是`$("#tabs").tabs("option", "fx", {opacity:'toggle'} )`或者当你初始化它时`$("#tabs").tabs({ fx: {opacity:'toggle'} })`

# css - 下拉菜单边框

> ID：12021210
> 
> 赞同：0
> 
> 时间：2012-08-18T18:32:26.003
> 
> 标签：css, wordpress, wordpress-theming

如何在二十一主题wordpress中为下拉菜单或父导航栏的子项获取底部圆角

```
#access ul ul a {
background: #F9F9F9;
border-bottom: 1px dotted #DDD;
 color: #444;
font-size: 13px;
font-weight: normal;
height: auto;
line-height: 1.4em;
padding: 10px 10px;
width: 168px;
border-bottom-right-radius: 10px;
border-bottom-left-radius: 10px;` 
```

如果我保持这样，那么所有下拉菜单项都会获得边框，我只为最后一项注册边框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:35:47.400

使用`:last-child`选择器。这是您的 CSS 的外观：

```
.menu-item:last-child a {
     border-bottom-right-radius: 10px;
     border-bottom-left-radius: 10px;
} 
```

希望有帮助！

# jquery - jQuery 修改 SharePoint 2010 列宽

> ID：12021211
> 
> 赞同：3
> 
> 时间：2012-08-18T18:32:38.517
> 
> 标签：jquery, sharepoint-2010

我觉得这是一个补救问题，但我已经战斗了好几天了……所以请原谅我。我在 SharePoint 2010 中工作，并且在甘特视图中有一个任务列表。该列表有 6 列加上甘特图。这些任务与 Microsoft Project 2010 同步（创建）。由于列宽在 SharePoint 中不是持久的，我希望第 2 列（标题）的默认宽度为 450 像素（应该足够简单......对吗？）。我使用 CEWP 尝试了许多 jquery 选项来尝试设置此列宽。我认为这看起来会更容易......有人可以帮我确定我在哪里偏离轨道吗？我一直在寻找互联网，直到浏览器无法再忍受......任何帮助将不胜感激。

我尝试过的选项：它们似乎都不起作用……我将它们放在库中的文本文件中（链接到 CEWP），脚本正在运行，因为我可以设置分割位置和缩放级别……只是不是宽度柱子。

**选项1**

```
 <script type="text/javascript">
    $(function(){
    $("TH.ms-vh2-nograd:contains('Title')").css("width", "450px"); 
    $("TH.ms-vb:contains('Title')").css("width", "450px"); }); 
    </script> 
```

**选项 #2**

```
 <script type="text/javascript"> 
    $(function() 
    { 
        $("tr.ms-viewheadertr th:contains('Title')").css("width", "450px"); 
    });
    </script> 
```

**选项#3**

```
 <script type="text/javascript"> 
    ExecuteOrDelayUntilScriptLoaded(function()
    {
    var oldGanttControl = SP.GanttControl;
    SP.GanttControl = function()
    {
    oldGanttControl.call(this);
    var oldInit = this.Init;
    this.Init = function(jsGridControl, jsRawGridData, params)
    {
    oldInit.call(this, jsGridControl, jsRawGridData, params);
    DoCustomizations(jsGridControl);
    };
    };
    },"SPGantt.js");

    Function DoCustomizations(grid)
    {
    var columns = grid.GetColumns();
    $.each(columns, function(key, value) {
    value.width=450;});
    grid.UpdateColumns(grid.parentNode.jsgridtableviewparams.columns);
    }
    </script> 
```

有效的代码在这里。但无法解析列宽。

```
 <script type="text/javascript">
    ExecuteOrDelayUntilScriptLoaded(function()
    {
    var oldGanttControl = SP.GanttControl;
    SP.GanttControl = function()
    {
    oldGanttControl.call(this);
    var oldInit = this.Init;
    this.Init = function(jsGridControl, jsRawGridData, params)
    {
    oldInit.call(this, jsGridControl, jsRawGridData, params);
    DoCustomizations(jsGridControl);
    };
    };
    },"SPGantt.js");

    function DoCustomizations(grid) 
    {
    // Set the Splitter and Zoom Levels
    grid.SetSplitterPosition(725);
    grid.SetGanttZoomLevel(grid.GetGanttZoomLevel()+2);
    }

    </script> 
```

**答案 #1/更新 3 的结果**

我昨天下定决心要解决这个问题，但是唉....我已经尝试过没有结果才能使该功能正常工作。我搜索，阅读，研究，无济于事。选择器语句的语法似乎千差万别，因此我不确定 CEWP 是否存在语法错误或问题以及生成函数的呈现。我尝试的一些变化：

```
$('th[title="Title"]').css("width", "450px","important"); 
$('th[title="Title"]').css("width", "450px", "important");
$('th[title="Title"]').css('width', '450px', 'important');
$('th [title="Title"]').css("width", "450px", "important");
$("th [title='Title']").css("width", "450px", "important"); 
```

等等等等……所以我想我还有一些问题，我将不得不让它撒谎……

1) 是否有可能我没有引用正确的 JavaScript 源库？无论我引用哪个库或使用哪个代码，这些脚本都不会显示失败或语法问题，但也不起作用。目前我有这个参考....

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

2) SharePoint CEWP 是否会以某种方式干扰 JQuery 编辑？我在另一篇文章中读到（找不到了）；在进行编辑之前页面没有一直呈现的地方？？？？

**更新 4 信息**

我将逻辑更改为以下内容以尝试确保....没有区别

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">  

$(function()  
{  
   $(document).ready(function() {
    //Get the th that has a title attribute and it contains the value Title 
    $('th[title="Title"]').css("width", "450px","important");  
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:32:53.297

Finally got it nailed....The finial script is below that does all the actions I was needing (for future reference of others). Thanks so much for hanging with me and helping me out. Combiniation of your logic and some syntax cleanup on my code and we got it resolved. Thanks Again, I would have struggled for many more days without help!

```
<script src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript">
JSRequest.EnsureSetup();
    //ensure document is ready
    $(document).ready(function() 
    {
        ExecuteOrDelayUntilScriptLoaded(function() 
        { 
            var oldGanttControl = SP.GanttControl; 
            SP.GanttControl = function() 
            { 
                oldGanttControl.call(this); 
                var oldInit = this.Init; 
                this.Init = function(jsGridControl, jsRawGridData, params) 
                { 
                    oldInit.call(this, jsGridControl, jsRawGridData, params); 
                    DoCustomizations(jsGridControl); 
                }; 
            }; 
        },"SPGantt.js"); 
    });

    function DoCustomizations(grid) 
    {
        grid.SetSplitterPosition(725); //set the splitter position
        grid.SetGanttZoomLevel(grid.GetGanttZoomLevel()+2); //set the zoom level
        $("th[title='Title']").css("width", "450px","important"); // set the column width
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:21:15.447

SharePoint 中的 TH 标记不包含标题属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T01:18:13.003

尝试将选择器更改为：：

```
<script type="text/javascript"> 
$(function() 
{ 
    //Get the th that has a title attribute
    $("th[title]").css("width", "450px","important"); 
});
</script> 
```

**更新**

这个[css 参考表](http://www.heathersolomon.com/content/sp07cssreference.htm#WebParts)是否包含对您需要的元素的引用？还要检查选择器。

另外，您可以发布生成的 HTML 而不是生成函数吗？

**更新二**

好的，基于生成的代码，我在[jsfiddle](http://jsfiddle.net/452Pp/10/)中做了一个结构示例，并且我还添加了`important`css 属性以确保是否可以解决。尽管您可能需要更改示例以使其适合您（您在其中有 div，`th`因此您可能需要将这些 div 更改为），但我正在再次更新代码，以便您可以尝试这样做（更改了`T`for `t`in `title`） .

**更新三**

谢谢你，我知道你不需要元素只具有属性`title`，但它包含`Title`. 有很多选项可以找到属性值，但是我通常使用这三个：

*   [属性包含前缀选择器](http://api.jquery.com/attribute-contains-prefix-selector/)`[attr|="value"]`

> 描述：选择具有指定属性的元素，其值等于给定字符串或以该字符串开头，后跟连字符 (-)。

*   [属性包含选择器](http://api.jquery.com/attribute-contains-selector/) `[attr*="value"]`

> 描述：选择具有指定属性且值包含给定子字符串的元素。

*   [属性等于选择器](http://api.jquery.com/attribute-equals-selector/)：`[attr="value"]`

> 描述：选择具有指定属性且值与某个值完全相等的元素。

在我们的具体情况下，我建议您使用第三个选项。我将编写一个新的块代码来保留更多的帖子历史。

```
<script type="text/javascript"> 
$(function() 
{ 
    //Get the th that has a title attribute and it contains the value Title
    $('th[title="Title"]').css("width", "450px","important"); 
});
</script> 
```

希望现在终于修好了。

**更新四**

准备好将您的 jquery 代码放入 jquery 文档中了吗？

**更新五**

我一直在阅读使用 可能存在冲突`$`，因此请尝试使用`jQuery`。

```
<script type="text/javascript"> 
   jQuery(function(){ 

      //Get the th that has a title attribute and it contains the value Title
      jQuery('th[title="Title"]').css("width", "450px","important"); 

   });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-29T17:18:23.310

这可能应该只是对 BryanB 的回答的评论，但是我缺乏声誉，我相信其他人会从中受益，所以就这样吧。

我使用了 BryanB 发布的解决方案，但是仅更改 css 宽度并没有更改网格存储的内部宽度。这导致了不同的问题：

1.  可以在其中选择排序的列下拉列表没有从原始 100px 默认位置移动
2.  当通过拖动调整列的宽度时，它会跳转到原来的 100px 默认位置，然后正常调整。

解决方案是在初始化网格之前调整 jsRawGridData 变量中的列宽。我只让它与直接数组引用一起使用，但是标题在那里，所以最坏的情况是一个简单的循环将允许您按列标题而不是位置设置宽度。

```
<script src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript">
JSRequest.EnsureSetup();
    //ensure document is ready
    $(document).ready(function() 
    {
        ExecuteOrDelayUntilScriptLoaded(function() 
        { 
            var oldGanttControl = SP.GanttControl; 
            SP.GanttControl = function() 
            { 
                oldGanttControl.call(this); 
                var oldInit = this.Init; 
                this.Init = function(jsGridControl, jsRawGridData, params) 
                { 
                    FixColumnWidth(jsRawGridData);
                    oldInit.call(this, jsGridControl, jsRawGridData, params); 
                    DoCustomizations(jsGridControl); 
                }; 
            }; 
        },"SPGantt.js"); 
    });

    function FixColumnWidth(data)
    {
        data.Columns[1].width=450;
    }

    function DoCustomizations(grid) 
    {
        grid.SetSplitterPosition(725); //set the splitter position
        grid.SetGanttZoomLevel(grid.GetGanttZoomLevel()+2); //set the zoom level
    }
</script> 
```

# ef-code-first - 从 EntityFramework 中的 db 获取单属性实体时出现 NullReferenceException，第二次调用有效

> ID：12021213
> 
> 赞同：0
> 
> 时间：2012-08-18T18:33:07.507
> 
> 标签：ef-code-first, primary-key, nullreferenceexception, entity-framework-4.3

我正在使用实体框架 4.3.1 代码优先。

我有一个模型：

```
public class BlogTag
{
    [Key]
    [MaxLength(50)]
    public string Tag { get; set; }
} 
```

如果我在数据库中添加一个，一切都会好起来的。如果我向它添加关系，一切都会很好。但如果我这样做：

```
db.BlogTags.Find("tag") 
```

在数据库中的现有标签上，我第一次在给定的 DbContext 上调用它时会抛出 NullReferenceException （相当奇怪）。更奇怪的是，我第二次调用它时，它没有抛出异常并且实体加载正常。这是一个错误还是我做错了什么？

# python - 是否有任何 Python 3 模块来创建 PDF 文件？

> ID：12021216
> 
> 赞同：12
> 
> 时间：2012-08-18T18:33:12.093
> 
> 标签：python, python-3.x, pdf-generation

一段时间以来，我一直在寻找能够创建 PDF 并与我当前在 Python 3 中的项目集成的东西。通常的参考是[Reportlab](http://www.reportlab.com/software/opensource/rl-toolkit/)或[pyPDF](http://pybrary.net/pyPdf/)。但是这两个还不兼容 Python 3。我确实看到，自 2010 年以来，Reportlab 中一直在[讨论](http://two.pairlist.net/pipermail/reportlab-users/2010-February/009269.html)有关该端口的问题，但截至今天我找不到任何有关该端口的参考。

另一种选择是使用 Python 3 中的中间格式，以便在另一个程序中使用，并使用子进程调用进行包装。[Relatorio 就是](http://relatorio.openhex.org/)这样做的。我可能会考虑做类似的事情，甚至生成 XHTML/CSS 并使用[xhtml2pdf](http://www.xhtml2pdf.com/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T16:06:52.520

街区有一个新孩子，看起来很有前途。它支持打印 css 功能，如分页符。

试试[weasyprint](http://weasyprint.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T19:05:28.550

[带有pycairo](http://cairographics.org/pycairo/) （不是 py2cairo，用于 python 2）绑定的[cairo](http://www.cairographics.org/)库与python 3.x 一起使用，并且可以生成 PDF 输出（等等）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T18:28:34.853

最后，我发现很难使用 pycario/pango，pycairo 仍然错过了一些 png 的方法，并且 python3 还不太支持 PIL，还带有很多依赖项（使用 pycario 的想法）~~所以我最终移植了一个python 2库到python 3，不是很高级，但可以完成一些基本pdf的工作，它被称为[py3fpdf](https://bitbucket.org/cyraxjoe/py3fpdf)~~

---*更新*--

事实证明，p3fpdf 没有完成 n_n' 的工作。所以说故事的结尾，我为[apache fop做了一个](https://xmlgraphics.apache.org/fop/)*预处理器*，它叫做[pypfop](https://bitbucket.org/cyraxjoe/pypfop)。我最近才与整个项目解耦，这是一项正在进行的工作，特别是文档，示例可能是说明性的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-18T18:43:26.777

尽管它不是免费软件，但您可以获得 HTML/CSS 路线并使用[Prince 。](http://princexml.com/)

如果您的源不是太复杂，您也可以尝试纯 python 解决方案，如[http://code.activestate.com/recipes/189858-python-text-to-pdf-converter/](http://code.activestate.com/recipes/189858-python-text-to-pdf-converter/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T20:41:00.977

你可以掏出并调用[text2pdf](http://www.eprg.org/pdfcorner/text2pdf/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T09:55:49.370

2.7 和 3.3 的端口目前正在进行中：

[https://github.com/nakagami/reportlab](https://github.com/nakagami/reportlab)

PIL 尚未移植到 Python3，因此 ReportLab 将无法完全运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-12T15:24:35.377

Pillow 是 PIL 到 Python 3 的一个很好的移植，它现在可以在 Debian 实验版和 Ubuntu 13.04 中使用。这应该会解除对 ReportLab 的 Python 3 端口的阻塞，我很乐意看到。@nakagami：你的 github 报告对我来说似乎失败了，`python3 setup.py build`但它可能很肤浅。你的端口有多官方？您是否联系过 RL 人员，看看他们是否对您的工作感兴趣？我不认为他们的代码在公共 vcs 中可用。

# sockets - 如何让 libcurl 不监听套接字只是通过它发送一个 url 请求？

> ID：12021217
> 
> 赞同：3
> 
> 时间：2012-08-18T18:33:13.230
> 
> 标签：sockets, libcurl, asyncsocket, libevent

我有一个自己管理套接字连接的客户端（实际上使用`libevent`'s `bufferevent`）。现在，我想在该套接字上`libcurl`生成和发送 HTML请求。`GET`我通过喂食完成了这部分，我已经使用选项`libcurl`打开了套接字。`OPENSOCKET_FUNCTION`

但我现在的问题是，两者`libevent`都`libcurl`在监听套接字，有时是`libevent`当套接字有数据时谁回答套接字，有时是`libcurl`.

有没有办法告诉 libcurl 只生成和发送对`GET`url 的请求，而不是在套接字上监听，这样我就可以在将 url 写入套接字之后处理我手中的事情`libcurl`？

显然，我将`curl_mult`i 接口用于非阻塞套接字，否则`curl_easy_perform`在收到答案之前不会返回。

我不想让`bufferevent`听者留下来`libcurl`，因为它是一个多协议程序，我正在实现它的 http 部分。其他协议没有使用的奢侈`libcurl`，所以我需要保持`bufferevent`结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:01:44.747

您可能正在寻找[curl_multi_socket_action()](http://curl.haxx.se/libcurl/c/curl_multi_socket_action.html)函数。[hiperfifo.c](http://curl.haxx.se/libcurl/c/hiperfifo.html)源代码中的 curl 提供了该函数与 libevent 一起使用的示例。

# html - 在 HTML5 画布中隐藏形状？

> ID：12021219
> 
> 赞同：8
> 
> 时间：2012-08-18T18:33:30.843
> 
> 标签：html, canvas, shape, mask, kineticjs

抱歉，如果在其他地方问过这个问题，但很难说清楚，所以我找不到任何东西。

**有没有办法在画布中实现蒙版？**

**例如，**仅使用形状（无图像）我画了一栋带窗户的房子。我也有一个代表一个人的形状。我希望那个人出现在窗口 - 但显然只有窗口允许的那个人才能看到。其余的将被掩盖。

我想过把房子被窗户占用的部分清空，这样层上有一个真正的洞，这样问题就容易解决了。

但我意识到你不能删除画布中的形状或形状的一部分，只能在旧的东西上绘制新的东西。那么在多层环境中（我正在用 Kinetic.JS 制作游戏），我究竟能做什么？

抱歉，如果其中任何一个解释不当 - 对整个图形来说都是新的。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-18T20:44:21.233

您应该很快了解剪辑和合成，但这些都不是您真正需要的。

相反，您需要学习如何使用**非零缠绕数规则**创建路径，这是 HTML5 画布使用的。

如果您顺时针绘制路径的一部分，而逆时针绘制另一部分，则可以从路径中“切出”形状。

这是一个带有窗口的示例：

[http://jsfiddle.net/simonsarris/U5bXf/](http://jsfiddle.net/simonsarris/U5bXf/)

* * *

**编辑：**这里有一些关于非零绕组数规则如何工作的可视化：

![在此处输入图像描述](../Images/b96131d35c3c5b4d531309a8a89ba38c.png)

子路径是按一个方向绘制的，路径交叉的地方会填充（或不填充）空格。

如果您将手指放在图形的任何部分，并想象一条线从您的手指伸出到空白处，那条线会多次穿过路径。如果从零开始，每条顺时针路径加 1，每条逆时针路径减 1，则填充区域是所有具有非零数字的区域。上图中给出了这些区域的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:40:02.783

您只需要创建一个剪切路径并在其中绘制您的形状。Mozilla 开发者网络是学习画布的绝佳起点。这是关于[剪辑](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Compositing#Clipping_paths)的部分。

我创建了一个基本的[小提琴](http://jsfiddle.net/mateuszwijas/eMkFk/)，其中包含我认为您正在尝试创建的示例。

```
var ctx = document.getElementById('canvas').getContext('2d');
ctx.fillRect(0, 0, 150, 150);

// create a clipping path
ctx.beginPath();
ctx.moveTo(20, 20);
ctx.lineTo(20, 130);
ctx.lineTo(130, 130);
ctx.lineTo(130, 20);
ctx.clip();

// backgroud in clipped area
ctx.fillStyle = "#11c";
ctx.fillRect(0, 0, 150, 150);

// draw shapes inside clipped area
ctx.translate(75, 90);

ctx.fillStyle = '#f00';

ctx.fillRect(-15, -40, 40, 40);
ctx.fillRect(0, 0, 10, 10);
ctx.fillRect(-25, 10, 60, 60); 
```

希望这会有所帮助，祝你的项目好运！

# emacs - 将缓冲区类型添加到“模式中的新缓冲区”

> ID：12021220
> 
> 赞同：0
> 
> 时间：2012-08-18T18:33:45.230
> 
> 标签：emacs, aquamacs, oz

当我选择“模式下的新缓冲区”选项时，我想为一种名为 oz 的晦涩的编程语言打开一个缓冲区。目前它不在可供选择的缓冲模式列表中。

我有所需的可用软件（莫扎特解释器。）

已经勇敢地搜索过，如果这是在某个地方的文档中，我无法找到它。

附言。我正在使用aquamacs。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:18:21.907

[http://www.eecs.ucf.edu/~leavens/COP4020/running_oz.shtml](http://www.eecs.ucf.edu/~leavens/COP4020/running_oz.shtml)说明了要添加到`.emacs`文件中以启用`oz-mode`. 似乎假设它`oz-mode.el`已经安装在 Emacs`load-path`中。

这是我的原始答案文本；对于一般情况，我将其留在这里。

模式列表实际上是您站点上安装的 Emacs Lisp 程序的列表。除非您有一个 Emacs Lisp 程序告诉 Emacs 如何使用该语言进行缩进、注释等，否则 Emacs 没有提供专用模式。不过，您可以使用基本模式或文本模式很好，但是对于缩进、语法高亮等没有任何帮助。

所有的事情都很重要，如果您完全熟悉 Emacs，创建自己的模式通常并不难，特别是如果您可以在现有模式的基础上构建类似的语言。

# html - 如何让 IFRAME 捕捉到浏览器窗口高度，减去顶部和底部的恒定偏移量？

> ID：12021230
> 
> 赞同：2
> 
> 时间：2012-08-18T18:35:35.937
> 
> 标签：html, css, twitter-bootstrap

我正在尝试构建一个页面，该页面由一个 IFRAME 组成，其顶部和底部两侧是状态栏，每个 40px 高。我正在使用 Twitter 引导程序的导航栏类来提供这些状态栏。

问题是我希望 IFRAME 自动调整其高度以占据整个浏览器窗口，顶部为负 40 像素，底部为 40 像素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T18:48:28.877

是的。在顶部和底部创建 40px 高的空 div，分别使用`position:absolute` `top:0;`和`bottom:0`，然后创建一个拉伸中间部分的 div。

您可能需要使用 jquery `$(window).height(); 获取浏览器窗口的高度。

希望你不反对一点JS

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T18:58:29.603

谢谢。那行得通。我这样做了：

```
 <script>
 $(function() {
   window.updateIframe = function() {
     var h = $(window).height();
     $("#iframe").height(h - 80);
   }
   window.updateIframe();
   window.resize(window.updateIframe);
 });
 </script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-06T21:32:46.120

最后一行应该是：

```
window.resizeTo(window.updateIframe); 
```

# jquery - CSS设置背景颜色只是表格行宽度的百分比

> ID：12021233
> 
> 赞同：13
> 
> 时间：2012-08-18T18:35:50.777
> 
> 标签：jquery, css, twitter-bootstrap, html-table

我有一个包含两列的基本表：名称和值。我想根据值的大小为表格中的每一行加上适当的宽度百分比（基本上是创建一个横向直方图！）。我可以编写代码来计算要设置的适当百分比，但我无法计算出 CSS 以适当地对每一行进行实际着色。似乎整行都可以着色，但不是百分比。真的吗？

对于它的价值，我正在使用 Twitter Bootstrap，如果需要，我也可以使用 jQuery。这仅在 Chrome 上运行，因此仅 CSS3 和 Webkit 就可以了！这是HTML：

```
<table class="table">
  <tbody class="lead">              
    <tr> 
      <td>
        Joe
      </td>
      <td>
        10
      </td>
    </tr>              
    <tr> 
      <td>
        Jane
      </td>
      <td>
        20 
      </td>
    </tr>              
    <tr> 
      <td>
        Jim
      </td>
      <td>
        2
      </td>
    </tr>
  </tbody>
</table> 
```

关于如何实现这一点的任何提示？希望这个问题有意义。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-18T18:42:19.377

你可以使用线性渐变。

如果百分比为 40%：

```
table{
    background: -webkit-gradient(linear, left top, right top, color-stop(40%,#F00), color-stop(40%,#00F));
    background: -moz-linear-gradient(left center, #F00 40%, #00F 40%);
    background: -o-linear-gradient(left, #F00 40%, #00F 40%);
    background: linear-gradient(to right, #F00 40%, #00F 40%);
} 
```

[**演示**](http://jsfiddle.net/uuR2L/263/)

所以，在 JavaScript 中，

```
var percentage=40,
    col1="#F00",
    col2="#00F";
var t=document.getElementById('table');
t.style.background = "-webkit-gradient(linear, left top,right top, color-stop("+percentage+"%,"+col1+"), color-stop("+percentage+"%,"+col2+"))";
t.style.background = "-moz-linear-gradient(left center,"+col1+" "+percentage+"%, "+col2+" "+percentage+"%)";
t.style.background = "-o-linear-gradient(left,"+col1+" "+percentage+"%, "+col2+" "+percentage+"%)";
t.style.background = "linear-gradient(to right,"+col1+" "+percentage+"%, "+col2+" "+percentage+"%)"; 
```

[**演示**](http://jsfiddle.net/uuR2L/264/)

* * *

如果您想以不同的方式将其应用于每一行：

```
var col1="#F00",
    col2="#00F";
var els=document.getElementById('table').getElementsByTagName('tr');
for (var i=0; i<els.length; i++) {
    var percentage = Number(els[i].getElementsByTagName('td')[1].firstChild.nodeValue);
    els[i].style.background = "-webkit-gradient(linear, left top,right top, color-stop("+percentage+"%,"+col1+"), color-stop("+percentage+"%,"+col2+"))";
    els[i].style.background = "-moz-linear-gradient(left center,"+col1+" "+percentage+"%, "+col2+" "+percentage+"%)" ;
    els[i].style.background = "-o-linear-gradient(left,"+col1+" "+percentage+"%, "+col2+" "+percentage+"%)";
    els[i].style.background = "linear-gradient(to right,"+col1+" "+percentage+"%, "+col2+" "+percentage+"%)" ;
} 
```

问题是`tr`在 Firefox 和 Opera 上设置背景效果很好，但在 Chrome 上，渐变应用于每个单元格。

添加此代码可以解决此问题（请参阅[https://stackoverflow.com/a/10515894](https://stackoverflow.com/a/10515894)）：

```
#table td {display: inline-block;} 
```

[**演示**](http://jsfiddle.net/uuR2L/8/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-18T19:37:16.283

无需使用渐变。首先，创建一个简单的图像文件，使用您想要为行着色的颜色。就我而言，我创建了一个`.png`全黑色（`black.png`在下面的示例中）。现在，只需使用`background-image`和`background-size`属性为行的适当部分着色。

示例，HTML：

```
<table cellspacing = "0px">
    <tr class = "row"><td>Hello Hello</td><td>Bye Bye</td></tr>
</table> 
```

CSS：

```
.row {
    background-color: white; /*fallback color*/
    background-image: url(black.png);
    background-size: 75% 100%; /*your percentage is the first one (width), second one (100%) is for height*/
    background-repeat: no-repeat;
    color: rgb(0, 140, 200);
    font-weight: bold;
} 
```

结果：

![结果](../Images/2cdb61093f124b8d788bfe62310c4f12.png)

这是一个关于如何为您的示例自动执行此操作的简单片段：

```
var tbl = document.getElementsByClassName("table")[0];
var rws = tbl.rows;
for(var i = 0; i < rws.length; i ++) {
    var percentage = parseInt(rws[i].getElementsByTagName("td")[1].innerHTML, 10);
    rws[i].style.backgroundImage = "black.png";
    rws[i].style.backgroundSize = percentage + "%" + " 100%";
    rws[i].style.backgroundRepeat = "no-repeat";
    rws[i].style.color = "rgb(0, 140, 200)";
} 
```

小演示：[百分比宽度 bg 颜色（基于非渐变）](http://jsfiddle.net/U6LWV/34/)。

我希望这有帮助！

# php - 带有 html 段落标签的有趣行为

> ID：12021240
> 
> 赞同：1
> 
> 时间：2012-08-18T18:36:42.920
> 
> 标签：php, html, regex, string

```
$regex = '#<p.+</p>#s'; 
```

我的目标是返回出现在第一个段落标记和最后一个段落标记之间的大字符串。这是包括所有内容，甚至是其他段落。

我上面的正则表达式适用于除段落标签之外的所有内容。我测试了它用'html'替换'p'并返回成功，替换为'script'并返回成功......为什么这对于这些情况会返回true，但对于段落却不是？

我仍在努力，并且相对确信没有导致正则表达式停止的奇怪转义序列......我认为这是因为我可以提取第一个和最后一个“html”标签之间的所有内容。“html”标签之间的文本还包含我未能提取的所有“p”标签。如果存在某种转义或错误，我认为在提取“html”标签时也会引发相同的错误。我试过 preg_quote() 没有成功。

也许我需要将专用于正则表达式处理的内存设置得更高，以便它可以处理整个文档？

更新：在大多数情况下，前导“p”将（在大多数情况下）不是同一段落标签的结尾“/p”标签。

更新：返回的结果将类似于：

```
<p>this is the first tag</p>this is a bunch of text from the document, could be all manner of tags <p>this is the last paragraph tag</p> 
```

更新：代码示例

```
$htmlArticle = <<< 'ENDOFHTML'

Insert data from pastebin here
http://pastebin.com/4A3FYGc8

ENDOFHTML;

$pattern = '#<html.+/html>#s'; // Works fine, returns all characters between first <html and last /html
$pattern = '#<script.+/script>#s'; // Works fine, same as above
$pattern = '#<p.+/p>#s'; // Returns nothing, nothing at all. :'(

preg_match($pattern, $htmlArticle, $matches);

var_dump($matches);

?> 
```

解决方案：ini_set('pcre.backtrack_limit', '1000000');

我已经用尽了我的回溯限制。这是 php.ini 文件中的设置，可以使用 ini_set() 在代码中设置。奇怪的是，我用 ini_set() 设置了值以匹配我的 php.ini 文件中的值......所以它应该从一开始就工作。---谢谢，我会尽快发布解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:43:47.220

这很好奇。它没有返回错误，并且使用较短的文档似乎返回了匹配项。我不明白为什么会发生这种情况。我已经在大量文档上使用了正则表达式，没有遇到任何问题。

请注意，这会产生匹配：`#<p\b.+<\#s`

也许尝试使用[backtrack limit](http://www.php.net/manual/en/pcre.configuration.php)，因为有很多`</p>`匹配项。但是，如果限制太低，我希望`preg_match`返回`False`，而不是 0！

作为一种解决方法，请尝试以下方法：

```
function extractBetweenPs($data) {
$startoffset = null;
$endoffset = null;
if (preg_match('/<p\b/', $data, $matches, PREG_OFFSET_CAPTURE)) {
    $startoffset = $matches[0][1];
    $needle = '</p>';
    $endoffset = strrpos($data, $needle);
    if ($endoffset !== FALSE) {
        $endoffset += strlen($needle);
    } else {
        // this will return everything from '<p' to the end of the doc
        // if there is no '</p>'
        // maybe not what you want?
        $endoffset = strlen($data);
    }
    return substr($data, $startoffset, $endoffset-$startoffset);
}
return '';
} 
```

也就是说，这是一个非常奇怪的要求——将结构化文档的任意部分视为一个 blob。也许您可以退后一步，说出您更广泛的目标是什么，我们可以建议另一种方法？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T18:47:46.927

正则表达式不是可用于正确解析 HTML 的工具。

您只需要[DOMDocument](http://www.php.net/manual/en/class.domdocument.php)

```
$dom = new DOMDocument();
$dom->loadHTML($your_html);
$node = $dom->getElementsByTagName('p')->item(0);
$dom2 = new DOMDocument();
$node = $dom2->importNode($node, true);
$dom2->appendChild($node);
echo $dom2->saveHTML(); 
```

# mysql - mySQL：选择查询包含|的问题 符号（LIKE 和/或 REGEXP）

> ID：12021243
> 
> 赞同：2
> 
> 时间：2012-08-18T18:37:03.080
> 
> 标签：mysql, regex, select, sql-like

我当前的查询如下所示：

```
$query = "SELECT * FROM t WHERE (data LIKE '$findme') OR (data LIKE '%$findme|%') OR (data LIKE '%|$findme%')"; 
```

此列中的数据包含由竖线符号 ("|") 分隔的项目，我需要查询来查找包含该字段中出现的任何项目的所有记录。另外，如果此列中只有一项，则不会有“|” 存在的符号。

例子：

```
$findme = "12"; 
```

查询应该匹配：

```
13|23|12
12
12|23
3|12|42 
```

查询不应该匹配：

```
123|32
34|123 
```

我不确定使用 REGEXP 是否会使这更容易，但如果是这样，任何解决方案都是受欢迎的。谢谢！

SQLFiddle 示例： [http ://sqlfiddle.com/#!3/32afd/5](http://sqlfiddle.com/#!3/32afd/5)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T18:46:29.537

使用 和 的组合[`REPLACE()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)，[`FIND_IN_SET()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)您可以`|`用逗号替换 ，并`$findme`在管道分隔集中找到您的值：

```
SELECT * 
FROM table
/* Replace | with , and search in the set */
WHERE FIND_IN_SET('$find_me', REPLACE(data, '|', ',')) > 0 
```

请注意，这仅在分隔值`data`不包含逗号时才有效。

从长远来看，解决此问题的适当解决方案是将分隔列分离`data`到另一个适当规范化的一对多表中。

# mysql - 如何避免 MySql 死锁？

> ID：12021247
> 
> 赞同：2
> 
> 时间：2012-08-18T18:37:23.720
> 
> 标签：mysql, database-deadlocks, jooq, batch-insert

我正在使用[jOOQ](http://www.jooq.org)数据库抽象层与 MySql 数据库交谈。

我不断收到以下错误：

```
SQL [null]; Deadlock found when trying to get lock; try restarting transaction 
```

这是在向表中批量插入大约 500 行的过程中。可能会从不同的线程一次尝试多个这些批量插入。

是什么导致了死锁，我该如何避免它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:32:41.393

传统的死锁是当一个事务试图锁定 A 然后 B 而另一个试图锁定 B 然后 A 时，导致两者都无法完成的情况。当特定资源上的挂起锁过多时，MySQL 会产生另一种死锁。

您应该检查`SHOW PROCESSLIST`您有多少“等待锁定”进程。可能是那些失败的人只是运气不好，因为排队的人太多了。

# google-chrome - Chrome 错误：向上滚动时屏幕上的 iframe 渲染线

> ID：12021248
> 
> 赞同：6
> 
> 时间：2012-08-18T18:37:26.777
> 
> 标签：google-chrome, iframe

此处的错误：[https ://groups.google.com/a/chromium.org/forum/?fromgroups#!topic/chromium-bugs/eUfzp3UJDwo%5B1-25%5D](https://groups.google.com/a/chromium.org/forum/?fromgroups#!topic/chromium-bugs/eUfzp3UJDwo%5B1-25%5D)

刚遇到这个问题，在 chrome 上显示我的屏幕，但在 firefox 或 IE 上没有。有人在mac上看过这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T11:39:31.660

删除`background-color`：

```
body {
...
background-color: #fff; 
} 
```

在呈现为的 HTML 文档的 CSS 中`iFrame`确实解决了我的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T13:41:00.243

After one full day trying to solve this bug I can confirm that **there's another workaround** and it's probably an "easier" one.

**In my case these solutions didn't work.** In fact, applying them to the examples in the issue tracker of chrome (look for them here [http://code.google.com/p/chromium/issues/detail?id=143354](http://code.google.com/p/chromium/issues/detail?id=143354) ) didn't actually solve the problem. (PS: the problem is usually based on using the scrollbar and SOMETIMES in using the mouse scrolling).

Therefore I did some searches for services the worked and guess what:
**Visual Website optimizer didn't have this problem**
and they are indeed using and iframe, good job guys!

So, **what solution did they use?**
They used a fixed *height*. (yup!)

So, take the example in the chrome issue 143354 (the one with the red background, ok?) and change the code from

```
<html>
<body style="background-color:red">
<p>This is outside the iframe</p>
<iframe width="80%" height="50%" frameborder="0" src="./page2.html"></iframe>
</body>
</html> 
```

to

```
<html>
<body style="background-color:red">
<p>This is outside the iframe</p>
<iframe width="80%" height="50%"  src="./page2.html" style="margin: 0px !important; padding: 0px !important; height: 286px; "></iframe>
</body>
</html> 
```

This will solve the problem of red lines.

To fix my webapp I needed to calculate the height on every window resize, put those margin/padding , and avoiding relative positioning on the iframe, nothing more.

Hope it helped (It almost drew me out of my mind to solve it)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T11:19:49.843

使用 Windows 7 和 chrome 22.0.1229.94 时仍然存在同样的问题，除了向下滚动时出现白线，而不是向上滚动。我已经尝试了所有提出的解决方案，但似乎没有任何解决方案。设置 -webkit-margin-after 和 -webkit-margin-before 使线条在向下滚动时消失，但现在它在向上滚动时出现。在 chrome group 论坛上，他们说它应该在 23 系列中修复，但谁知道......

最后，可以在一些阅读的启发下找到一种解决方法（不是很酷但很有效）。

这里是：

```
$(document).ready(function(){
                //to fix scrolling bug in iframe for chrome (issue: http://code.google.com/p/chromium/issues/detail?id=140447)
                if(/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())) {
                    var ibody = document.getElementsByTagName('body')[0];           
                    window.onscroll = function(e) { 
                        ibody.style.visibility='hidden';
                        ibody.offsetHeight; 
                        ibody.style.visibility='visible';
                    }
                }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T08:14:36.877

有同样的问题。通过将**位置**样式设置为*relative*解决：

```
<iframe ... style="position: relative"></iframe> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T20:42:47.363

导致这些视觉异常的问题已在 chrome 的最新金丝雀版本（> = 25.0.1365.1 金丝雀）中得到确认，因此希望 chrome 稳定通道很快就会得到修复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T15:48:08.913

我发现可以通过稍微调整 DOM 来解决这个 Chrome 错误。

例如，这是导致问题的原因：

```
 <h1>foobar</h1>
  <iframe src="..." style="border:none"></iframe> 
```

...但是用 SPAN 替换 H1 修复了它：

```
 <span style="display:block">foobar</span>
  <iframe src="..." style="border:none"></iframe> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-13T21:43:29.757

我遇到了类似的问题，并且能够通过将 -webkit-margin-after 和 -webkit-margin-before 设置为 0 来解决它。

```
<h1 style="-webkit-margin-after:0; -webkit-margin-before:0;">foobar</h1>
<iframe src="..."></iframe> 
```

此外，我最初尝试将 H1 替换为 Jiri 示例中的跨度，但是当我尝试将 0.2em 的顶部和底部边距应用于跨度时，线条又回来了。删除边距清理了一些东西（我只是使用 line-height 在标题周围创建一些空间）

# java - 将 JPanel 从另一个类添加到 JFrame 中的 JPanel

> ID：12021249
> 
> 赞同：9
> 
> 时间：2012-08-18T18:37:26.963
> 
> 标签：java, swing, user-interface, jframe, jpanel

我无法从主类获取我的 JFrame 来显示另一个类的 JPanel。一切都编译没有错误。

**JFrameTest.java：**

```
package jframetest;

import java.awt.FlowLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class JFrameTest extends JFrame {

    public JFrameTest() {

        FlowLayout mainLayout = new FlowLayout();
        setSize(320, 480);
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(mainLayout);

        JPanel panelMain = new JPanel(mainLayout);

        JButton testButton = new JButton("Test12");
        panelMain.add(testButton);

        JPanelOne panel = new JPanelOne();
        panelMain.add(panel);
        panel.setVisible(true);
        add(panelMain);

    }

    public static void main(String[] arguments) {

        JFrameTest frame = new JFrameTest();
        frame.setVisible(true);

    }
} 
```

**JPanelOne.java：**

```
package jframetest;

import java.awt.FlowLayout;
import javax.swing.JButton;
import javax.swing.JPanel;

public class JPanelOne extends JPanel {

    public JPanelOne() {

        FlowLayout layoutPanel = new FlowLayout();
        JPanel panel = new JPanel(layoutPanel);
        JButton button = new JButton("test");
        panel.add(button);
        panel.setVisible(true);

    }

} 
```

将不同的 JPanel 保留在自己的课程中是一种好习惯吗？（示例：希望 JFrame 包含几个相同大小的 JPanel，这将通过将**setVisible()**设置为 true/false 来切换）

**编辑**

感谢您的所有回答。著名的。现在回到我的问题：

既然我知道如何添加在其他类中创建的单个 GUI 元素，我想知道是否可以在其中一个类中使用布局管理器来组织元素（可能在 JPanel 以外的其他容器中），所以我可以将它们添加为以布局组织的组（这就是为什么我要询问在其他类中创建整个 JPanel 的原因）。如图所示：

![](../Images/00b64942a430f648c8d4fce2ae5004a5.png)

此示例的 JPanel（第二类）代码将是：

```
package jframetest;

import java.awt.*;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSeparator;
import net.miginfocom.swing.MigLayout;

public class JPanelOne extends JPanel {

    private JPanel panelSettingsMain;
    private JLabel labelChooseLanguage, labelWordsCollection;
    private JButton buttonSelectLanguage, buttonSelectCollection,
            buttonStatistics, buttonPrintingOptions, buttonAddNewWordCollection,
            buttonInterfaceCustomization;
    private JSeparator separatorSettingsOne, separatorSettingsTwo,
            separatorSettingsThree, separatorSettingsFour,
            separatorSettingsFive;
    private Color greenRegular, separatorGreenLight, separatorGreenDark;

    public JPanelOne() {

        // creating settings main panel

        // setting up layout managers
        MigLayout layoutSettingsMain = new MigLayout(
                "insets 3 0 0 0");

        // setting up colors
        greenRegular = new Color(30, 165, 145);
        separatorGreenLight = new Color(190, 240, 220);
        separatorGreenDark = new Color(130, 205, 180);

        panelSettingsMain = new JPanel(layoutSettingsMain);
        panelSettingsMain.setBackground(Color.WHITE);

            // setting up choose language label
            labelChooseLanguage = new JLabel("Choose language:");
            panelSettingsMain.add(labelChooseLanguage,
                    "gapleft 10, gaptop 15, width 200");

            // setting up select language button
            buttonSelectLanguage = new JButton("language");
            buttonSelectLanguage.setForeground(greenRegular);
            buttonSelectLanguage.setFocusPainted(false);
            buttonSelectLanguage.setBorder(null);
            buttonSelectLanguage.setContentAreaFilled(false);
            buttonSelectLanguage.setCursor(new java.awt.Cursor(
                    java.awt.Cursor.HAND_CURSOR));
            panelSettingsMain.add(buttonSelectLanguage, "gapbottom 15px, wrap");

            // setting up light separator
            separatorSettingsOne = new JSeparator();
            separatorSettingsOne.setForeground(separatorGreenLight);
            panelSettingsMain.add(separatorSettingsOne,
                    "span 2, width 320, gapbottom 15, wrap");

            // setting up words collection label
            labelWordsCollection = new JLabel("Words collection:");
            panelSettingsMain.add(labelWordsCollection, "gapleft 10");

            // setting up selectcollection button
            buttonSelectCollection = new JButton("collection");
            buttonSelectCollection.setForeground(greenRegular);
            buttonSelectCollection.setFocusPainted(false);
            buttonSelectCollection.setBorder(null);
            buttonSelectCollection.setContentAreaFilled(false);
            buttonSelectCollection.setCursor(new java.awt.Cursor(
                    java.awt.Cursor.HAND_CURSOR));
            panelSettingsMain.add(buttonSelectCollection,
                    "gapbottom 15px, wrap");

            // setting up dark separator
            separatorSettingsTwo = new JSeparator();
            separatorSettingsTwo.setForeground(separatorGreenDark);
            panelSettingsMain.add(separatorSettingsTwo,
                    "span 2, width 320, gapbottom 15px, wrap");

            // setting up show statistics button
            buttonStatistics = new JButton("Show statistics");
            buttonStatistics.setForeground(greenRegular);
            buttonStatistics.setFocusPainted(false);
            buttonStatistics.setBorder(null);
            buttonStatistics.setContentAreaFilled(false);
            buttonStatistics.setCursor(new java.awt.Cursor(
                    java.awt.Cursor.HAND_CURSOR));
            panelSettingsMain.add(buttonStatistics,
                    "gapleft 10, gapbottom 15px, , wrap");

            // setting up dark separator
            separatorSettingsThree = new JSeparator();
            separatorSettingsThree.setForeground(separatorGreenDark);
            panelSettingsMain.add(separatorSettingsThree,
                    "span 2, width 320, gapbottom 15px, wrap");

            // setting up printing options button
            buttonPrintingOptions = new JButton("Printing options");
            buttonPrintingOptions.setForeground(greenRegular);
            buttonPrintingOptions.setFocusPainted(false);
            buttonPrintingOptions.setBorder(null);
            buttonPrintingOptions.setContentAreaFilled(false);
            buttonPrintingOptions.setCursor(new java.awt.Cursor(
                    java.awt.Cursor.HAND_CURSOR));
            panelSettingsMain.add(buttonPrintingOptions,
                    "gapleft 10, gapbottom 15px, wrap");

            // setting up dark separator
            separatorSettingsFour = new JSeparator();
            separatorSettingsFour.setForeground(separatorGreenDark);
            panelSettingsMain.add(separatorSettingsFour,
                    "span 2, width 320, gapbottom 15px, wrap");

            // setting up add new word collection button
            buttonAddNewWordCollection = new JButton("Add new word collection");
            buttonAddNewWordCollection.setForeground(greenRegular);
            buttonAddNewWordCollection.setFocusPainted(false);
            buttonAddNewWordCollection.setBorder(null);
            buttonAddNewWordCollection.setContentAreaFilled(false);
            buttonAddNewWordCollection.setCursor(new java.awt.Cursor(
                    java.awt.Cursor.HAND_CURSOR));
            panelSettingsMain.add(buttonAddNewWordCollection,
                    "gapleft 10, gapbottom 15px, , wrap");

            // setting up dark separator
            separatorSettingsFive = new JSeparator();
            separatorSettingsFive.setForeground(separatorGreenDark);
            panelSettingsMain.add(separatorSettingsFive,
                    "span 2, width 320, gapbottom 10px, wrap");

            // setting up interface customization button
            buttonInterfaceCustomization = new JButton(
                    "Interface customization");
            buttonInterfaceCustomization.setForeground(greenRegular);
            buttonInterfaceCustomization.setFocusPainted(false);
            buttonInterfaceCustomization.setBorder(null);
            buttonInterfaceCustomization.setContentAreaFilled(false);
            buttonInterfaceCustomization.setCursor(new java.awt.Cursor(
                    java.awt.Cursor.HAND_CURSOR));
            panelSettingsMain.add(buttonInterfaceCustomization,
                    "gapleft 10, gapbottom 15px, wrap");

    }

} 
```

我正在考虑通过将 JPanels（如示例中的）设置为可见或不可见来浏览程序 GUI。

1.  这是一个好方法吗？
2.  我应该将我的 GUI 分成几个类，还是应该将所有内容合二为一？我在问，因为现在代码中只有一半的 GUI 大约有 400 行长（此时它除了“看”之外什么也做不了）。正如我之前所说 - 我是初学者，它是迄今为止我编写的最长的应用程序之一（我相信它不会那么长！）。

**编辑**

也许我想多了，所以最终是否可以拥有大的 GUI 类并通过设置它们是否可见来控制不同 GUI 区域的可见性？

**编辑**

我查看了 Oracle 的 CardLayout 教程，它看起来对我的任务很有帮助（不包括从外部类创建 JPanel，但没关系）。起初我误解了它，并且仅根据选项卡式窗格（我不想在我的项目中实现）来考虑 CardLayout。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T18:43:16.430

问题来自于`JPanelOne`课堂。它继承`JPanel`，但在构造函数中，您创建一个新的`JPanel`，然后向其添加一个按钮。如果您改为这样做：

```
public class JPanelOne extends JPanel {

   public JPanelOne() {
       JButton button = new JButton("test");
       add(button);
   }
} 
```

它应该可以按您的预期工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-18T18:50:17.227

首先要回答您的问题，您需要在 JFrameTest 构造函数中将面板的实例添加到框架中，如下所示：

```
add(new JPanelOne()); 
```

您还需要将按钮直接添加到 JPanelOne 本身：

```
public class JPanelOne extends JPanel {   

  public JPanelOne() {   
    JButton button = new JButton("test");   
    add(button);   
  }   
} 
```

其次，我认为这几行代码有问题：

```
 FlowLayout mainLayout = new FlowLayout(); 
    // snip...
    setLayout(mainLayout); 

    JPanel panelMain = new JPanel(mainLayout); 
```

每个容器都应该有自己的布局管理器实例。否则你的 GUI 会做一些奇怪的事情：

```
setLayout(new FlowLayout());
JPanel panelMain = new JPanel(mainLayout); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-19T10:37:26.333

借助更多帮助（来自其他站点的用户“Hilek”），我设法从另一个班级获得 JPanel，以便在主班上进行展示。这是代码：

**JFrameTest.java：**

```
import java.awt.Color;
import java.awt.Dimension;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class JFrameTest extends JFrame {

        private JButton testButton;
        private JPanel panelMain;
        private JPanelOne panel;

        public JFrameTest() {

                // setting up JFrame
                setLayout(null);
                setPreferredSize(new Dimension(420, 90));
                setResizable(false);
                setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                // creating main JPanel (white)
                panelMain = new JPanel();
                panelMain.setBackground(Color.WHITE);
                panelMain.setBounds(0, 0, 420, 90);
                panelMain.setPreferredSize(new Dimension(200, 40));
                add(panelMain);

                // creating JButton in the main JPanel (white)
                testButton = new JButton("Button from main class");
                panelMain.add(testButton);

                // creating new JPanelOne object from JPanelOne class containing black JPanel
                panel = new JPanelOne();

                // adding black JPanel to main JPanel (white)
                panelMain.add(panel);

                pack();

        }

        public static void main(String[] arguments) {

                // creating JFrame object and setting it visible
                JFrameTest frame = new JFrameTest();
                frame.setVisible(true);

        }

} 
```

**JPanelOne.java：**

```
import java.awt.Color;
import java.awt.Dimension;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.SwingConstants;

public class JPanelOne extends JPanel
{

        public JPanelOne()
        {
                // setting up black JPanel
                JPanel panel = new JPanel();
                panel.setPreferredSize(new Dimension(220, 40));
                panel.setBackground(Color.BLACK);

                // creating button on external JPanel
                JButton button = new JButton("Button (+JPanel) from external class");

                // adding button to the black JPanel
                panel.add(button);

                // adding blackJPanel
                add(panel);
        }
} 
```

工作示例的打印屏幕：

[http://i.stack.imgur.com/qKeBp.jpg](http://i.stack.imgur.com/qKeBp.jpg)

也许有人会发现它对他们的问题有帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-18T18:40:37.747

不要调用`setSize()`你的 JFrame。而是让布局设置其组件和 GUI 的适当大小。将所有组件添加到 GUI 后，调用`pack()`JFrame，然后调用`setVisble(true)`. 请注意，大多数布局更尊重组件的 preferredSize 而不是其大小。

此外，您无需调用`setVisible(true)`各个组件（除非您在 GUI 启动并出于某种原因运行后更改它们的可见性）。您还需要阅读有关使用布局管理器的更多信息，并且在您研究过它们之后可能会更少使用 FlowLayout。

**编辑**
关于您最近的编辑：

> 也许我想多了，所以最后是否可以拥有大的 GUI 类并通过将它们设置为可见来控制不同 GUI 区域的可见性？

我会回答，有时这很有帮助，例如，如果您想将标准计算器更改为科学计算器，有时最好使用 setVisible(true) 简单地显示一个已创建的 JPanel，其中填充了高级计算按钮。另一方面，如果您想交换 GUI 的“视图”以反映其状态的重大变化，例如文字处理器从编辑模式更改为打印模式，您可以使用 CardLayout 轻松交换 JPanel 来执行此操作。

# c++ - 尝试解决 Collat z p‌r‌o‌b‌l‌l‌m 时得到奇怪的结果

> ID：12021254
> 
> 赞同：1
> 
> 时间：2012-08-18T18:37:57.670
> 
> 标签：c++, collatz

我正在尝试解决 Project Euler [Problem 14](https://projecteuler.net/problem=14)。它要求找到生成最长序列的 100 万以下的数字。我所做的是创建一个向量 v，并使用特定数字的序列长度填充其元素。因此，位于位置 13 的元素将对应于由数字 13 生成的序列的长度，依此类推。但是，一些看似随机的元素需要非常大的数字，我无法弄清楚代码有什么问题。此外，当我用 1,000,000 对其进行测试时，我得到了一个完全错误的答案，但我知道该程序在手动测试并验证后可以处理一些小数字。

```
#include <iostream>
#include <vector>
using namespace std;

void find_longest(int n)
{
    int count = 1;
    int max = 0;
    int position;

    vector<int> v;
    v.push_back(0);
    v.push_back(0);

    for(int i = 1; i < n; i++)
    {
        long long int trainer = i;
        count = 1;
        while(trainer != 1)
        {
            if(trainer%2 == 0)
            {
                trainer /= 2;
                count++;
            }
            else
            {
                trainer = 3*trainer + 1;
                count++;
            }
        }
        v.push_back(count);
    }

    vector<int>::iterator it;

    for(it = v.begin(); it < v.end(); it++)
    {
        cout << v[*it] << endl;
        //if(v[*it] > max)
        //{
        //    max = v[*it];
        //    position = *it;
        //}
    }

    //cout << "The longest sequence is " << max << " terms long and is ";
    //cout << "generated by the number " << position << "." << endl;
}

int main()
{
    find_longest(100);
    //find_longest(1000000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:57:19.620

//删除类型不匹配的更改

您不需要记住向量中的所有 N 个数字。您所需要的只是当前序列长度。然后你计算下一个数字的序列长度，如果它比你已经拥有的大，你只保留最大的一个。

# vb.net - 比较字符串 - ASCII SPACE

> ID：12021261
> 
> 赞同：3
> 
> 时间：2012-08-18T18:39:01.273
> 
> 标签：vb.net

这样做有什么区别：

```
Dim strTest As String
If strTest > " " Then

End If 
```

和这个：

```
Dim strTest As String
If strTest <> "" Then

End If 
```

我认为代码示例 1 是比较 ASCII 值（SPACE 的 ASCII 代码是 32）。我查看了 MSDN 上的字符串部分，但找不到答案。

**更新**

我也对这里发生的事情感到困惑：

```
 Dim strTest As String = "Test"
  If strTest > " " Then

  End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:06:52.850

（`>`大于）运算符将按字母顺序或字符代码值顺序（取决于`Option Compare`设置）进行测试，而`<>`（不等于）运算符将测试是否相等。只要两个字符串完全不同， then`<>`将始终评估为`True`。 `>`只要运算符右侧的字符串按字母顺序或字符代码值位于第一个字符串之后，就会评估为真。所以：

```
Option Compare Text  ' Compare strings alphabetically

...

Dim x As String = "Hello"
Dim y As String = "World"

If x <> y Then
    ' This block is executed because the strings are different
Else
    ' This block is skipped
End If

If x > y Then
    ' This block is skipped
Else
    ' This block is executed because "Hello" is less than "World" alphabetically
End If 
```

但是，在您的问题中，您将一个空字符串变量（设置为`Nothing`）与一个空字符串进行比较。在这种情况下，比较运算符将 null 变量视为空字符串。因此，`Nothing <> ""`应该评估为，`False`因为运算符的两边都被认为是空字符串。空字符串或空字符串应始终被视为排序顺序中的第一个，因此`Nothing > "Hello"`应评估为，`False`因为空字符串位于其他所有内容之前。但是，`Nothing > ""`应该评估为，`False`因为它们都是相等的，因此既不在另一个之前也不在另一个之后。

为了回答你最后一个问题，`"Test" > " "`将测试字母 T 是在空格之前还是之后。如果`Option Compare`设置为`Text`，它将按字母顺序比较它们并应返回`True`（这最终取决于您的语言环境的字母排序）。如果`Option Compare`设置为`Binary`，它将根据它们的字符代码值进行比较。如果它们是 ASCII 字符串，则空格字符的值低于字母，例如 T，因此它也应该返回`True`.

# java - 寻找样品秋千项目

> ID：12021263
> 
> 赞同：-3
> 
> 时间：2012-08-18T18:39:17.790
> 
> 标签：java, swing, model-view-controller, user-interface

我正在尝试使用 Swing 构建一个复杂的 GUI，并想问是否有人有一个好的项目，它遵循构建复杂 GUI 的最佳实践。我很想看一下源代码以了解有关整体结构的一些想法（尤其是关于如何实现 MVC）谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:55:28.497

有趣的是，这个问题是如何被否决的，而类似的问题却被否决了......检查这些（也许下次做一些研究，这已经被问了几次......）

[最新的 Swing MVC 示例 + 问题](https://stackoverflow.com/questions/2330385/up-to-date-swing-mvc-example-question)

[如何组织一个 Swing GUI 应用程序？](https://stackoverflow.com/questions/6269851/how-to-organize-a-swing-gui-application)

[什么是 Java Swing 应用程序的好例子？](https://stackoverflow.com/questions/4234428/whats-a-good-example-of-a-java-swing-application)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T19:29:22.993

我建议您看一下名为 SwingSet3 的应用程序。它是为展示一些包含源代码的 Swing 小部件而开发的。如果您想了解它的组织方式，还可以找到整个应用程序源代码。

# iphone - 在 iPhone 应用程序上登录 Facebook

> ID：12021264
> 
> 赞同：0
> 
> 时间：2012-08-18T18:39:29.820
> 
> 标签：iphone, ios, facebook, facebook-login

我正在尝试允许用户通过 Facebook 登录我的应用程序。我正在关注本指南[https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

我已完成所有步骤，包括名为“iOS 版 Facebook sdk 入门”的步骤。

当我复制并粘贴以下方法时，此处出现错误：

```
 return [FBSession openActiveSessionWithPermissions:permissions 
```

这是我复制和粘贴的方法。

```
 - (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {

NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"user_likes",
                        @"read_stream",
                        nil];

return [FBSession openActiveSessionWithPermissions:permissions
                                      allowLoginUI:allowLoginUI
                                 completionHandler:^(FBSession *session,
                                                     FBSessionState state,
                                                     NSError *error) {
                                     [self sessionStateChanged:session
                                                         state:state
                                                         error:error];
                                 }];
    } 
```

错误说：“选择器'openActiveSessionWithPermissions：allowLoginUI：completionHandler：'没有已知的类方法”

有人可以帮我弄清楚我做错了什么吗？如果您想查看更多我的代码来解决问题，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:15:03.477

将您的 facebook sdk 更新到最新版本，并遵循 Scrumptious 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T12:55:16.983

补充 mLamaa 答案，查看 Facebook 升级指南并按照以下两个步骤操作：

1- 更新 Facebook SDK

2- 将 openActiveSessionWithPermissions 函数替换为 openActiveSessionWithReadPermissions

参考：

[https://developers.facebook.com/docs/ios/upgrading/](https://developers.facebook.com/docs/ios/upgrading/)

*从 3.0 升级到 3.1*

“因此，如果您的应用以前使用 SDK 的 v3.0，您将需要**删除 openActiveSessionWithPermissions:allowLoginUI:completionHandler: 的使用，并将其替换为 openActiveSessionWithReadPermissions:allowLoginUI:completionHandler** :（或者更简单，openActiveSessionWithAllowLoginUI）。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T20:20:55.637

我真的怀疑这是否能解决你的问题，但值得一试。NSError 通常在作为参数传递之前需要一个 & 符号（“&”）。所以把它写成`error:&error`。

# c++ - 解决计算机外部IP的最简单方法？

> ID：12021265
> 
> 赞同：1
> 
> 时间：2012-08-18T18:39:37.710
> 
> 标签：c++, winapi, ip

如何在 C++ 中解析计算机的外部 IP？当您通过 HTTP、FTP 等连接到服务器时，外部 IP 是服务器看到的地址。

不允许使用外部库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:13:20.633

不幸的是，没有单一的“外部 IP 地址”。您必须通过网络配置来确定哪个接口将处理流量以找到地址，但即便如此，您也可能会通过一个将您的地址转换为其他地址的外部网关。

例如，一个能够正确分析我的网络配置以找出到 stackoverflow.com 的流量的软件将有望确定该流量使用地址 10.1.2.1 进入物理网络接口。它还将确定流量被路由到 10.1.1.1 的网关，但它无法确定互联网中流量流的实际地址是什么，因为它无法分析网关（这是一个不同的盒子）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T22:50:21.847

如果你有一个网站，你可以创建一个包含以下内容的 php 文件：

```
<?php echo  $_SERVER["REMOTE_ADDR"]; ?> 
```

由于您不想使用“外部”库，请使用各种 Windows Internet 功能来获取此页面。

# cgcontext - 如何在 MonoMac 中填充图案

> ID：12021268
> 
> 赞同：0
> 
> 时间：2012-08-18T18:39:57.447
> 
> 标签：cgcontext, monomac

有谁知道如何在 MonoMac 中填充模式，不幸的是，这段代码什么也没做。它甚至不调用绘图模式。任何帮助都会很棒：D

```
 void DrawPattern (CGContext NewContext)
    {
        Console.WriteLine("Drawing Pattern?");
        NewContext.SetFillColor(new CGColor(1,0,0));
        NewContext.FillRect(new RectangleF(0,0,5,5));
    }
    public void FillPatternPath (CGContext MyCanvas,CGPath Path)
    {
        MyCanvas.SaveState();
        CGPath NewPath=Path.GetCGPath ();
        MyCanvas.AddPath (NewPath);
        RectangleF PBounds=MyCanvas.GetPathBoundingBox();
        MyCanvas.EOClip();
        CGColorSpace patternSpace = CGColorSpace.CreatePattern(null);
        MyCanvas.SetFillColorSpace(patternSpace);
        CGPattern Pat=new CGPattern(PBounds,CGAffineTransform.MakeIdentity(),10,10,CGPatternTiling.ConstantSpacing,true,new CGPattern.DrawPattern(DrawPattern));
        MyCanvas.SetFillPattern(Pat,new float[]{1f});
        MyCanvas.FillRect (PBounds);
        patternSpace.Dispose();
        MyCanvas.RestoreState(); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:39:10.727

我最终通过使用简单的 for{} 例程在剪切区域中绘制图案来解决这个问题。我从来没有设法让 CGPattern 工作。

# mercurial - Mercurial：构建脚本在标记提示时创建第二行

> ID：12021270
> 
> 赞同：1
> 
> 时间：2012-08-18T18:40:13.547
> 
> 标签：mercurial, build-automation, versioning

我一直在寻找其他与标签和构建脚本相关的 Mercurial 帖子，但我没有找到我看到的特定问题。

几周以来，我一直在使用 bitbucket.org 托管的 Mercurial 服务器。我的工作流程是编写代码，推送到本地仓库，然后推送到 bitbucket。我是我项目中唯一的贡献者，我只使用一台机器进行编码，所以我还没有任何棘手的合并或冲突需要解决。我使用 TortoiseHg 来执行签入和代码审查。

今天我写了一个脚本来自动化我的构建，但我遇到了一个问题。我使用 c:\dev 进行编码，并使用 c:\build 作为构建过程的根文件夹。

我的过程是： 1）获取最新代码——克隆 repo 或者如果它已经克隆则获取最新 2）版本代码 3）构建代码 4）标记本地 repo 5）将标记推送到 bitbucket.org

我正在使用一个简单的批处理程序：

```
REM variable assignment, versioning, and error checking are excluded from this snippet

ECHO Getting code from remote repository...
IF EXIST .\%localrepo% (
    ECHO Pulling latest
    hg pull %localrepo%
) else (
    ECHO Cloning repository
    hg clone %remoterepo%
)
ECHO Done retrieving code.

ECHO Building code...
"c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe" %solution% /build %solutionconfig%
ECHO Building complete.

cd %localrepo%
hg tag %version%
hg push
cd .. 
```

这个脚本似乎实现了我的所有目标，一切进展顺利，直到我回到 TortoiseHg 并注意到修订图现在显示两行——一行用于我的 c:\dev 编码，另一行用于构建脚本创建的标签在 c:\build.

我没有足够的声望来嵌入图像，但这个链接将显示 TortoiseHg 报告的修订历史的屏幕截图 - [http://i.imgur.com/2oNAR.png](http://i.imgur.com/2oNAR.png)

经过一番挣扎，我将新行（修订版 38）合并回原来的（修订版 39），但是当我再次运行构建脚本（修订版 40）时，新标签继续在第 2 行。我尝试从开发存储库提交更改，但由于“推送创建注释远程头”而中止提交。

我觉得我可能在我的构建脚本中做了一些根本错误的事情。我需要阅读任何建议或主题吗？我没有找到任何与 Mercurial 代码服务器相关的非 MSBuild 脚本解决方案。出于任何原因，我并不依赖于使用批处理脚本——它只是一个简单且免费的解决方案，我希望它就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:56:54.183

`hg clone`自动将您的工作目录更新到默认分支的顶端，但`hg pull`不会。用于`hg pull -u`在拉取后更新当前分支的头部。

# javascript - 在移动设备上获取视口大小

> ID：12021275
> 
> 赞同：1
> 
> 时间：2012-08-18T18:41:22.630
> 
> 标签：javascript, html, mobile, viewport, dimensions

在我的 Optimus One LG 手机上，window.innerWidth 和 document.documentElement.clientWidth 变量都得到“700”，而我知道这款手机的分辨率是 320 像素宽，分辨率相当低。

我显示这些变量值的页面在其标题中。

为什么我没有得到 320 而不是 700 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:43:58.707

`<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`如果您尚未添加视口元数据，添加可能会有所帮助。

# java - 遍历一个集合并创建一个包含 HTML 的字符串

> ID：12021277
> 
> 赞同：3
> 
> 时间：2012-08-18T18:41:25.767
> 
> 标签：java, iterator, hashset

我有以下代码在图像库生成程序[Jalbum](http://jalbum.net)中使用，以生成用于库中图像的所有关键字。

```
Set allKeywords = new HashSet();
for (AlbumObject ao : currentObjects) {
   XmpManager mgr = ao.getXmpManager();
   if (mgr != null) {
      allKeywords.addAll(mgr.getKeywordSet());
   }
}
//get the Iterator
Iterator itr = allKeywords.iterator(); 
while(itr.hasNext())
   out.println(itr.next()); 
```

我的问题是何时 out.print：

```
out.println(itr.next()); 
```

如何将 html 添加到每个单独的关键字？我基本上想超越：

```
<a href="#">keyword</a> 
```

我是这个领域的新手，所以请温柔！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T18:47:55.513

```
out.println("<a href=\"#\">" + itr.next() + "</a>"); 
```

如果你想打电话`iterator.next()`两次

```
out.println("<a href=\"#\" class=\"label list2\""
                + " data-filter=\"" + "." + itr.next() + "\">"
                + (itr.hasNext() ? itr.next() : "") + "</a>"); 
```

对于您的要求，我希望 mgr.getKeywordSet() 返回字符串

```
 String str = itr.next();
  System.out.println("<a href=\"#\" class=\"label list2\""
                + " data-filter=\"" + "." + str + "\">" + str + "</a>"); 
```

# android - AsyncTask 无限循环

> ID：12021280
> 
> 赞同：0
> 
> 时间：2012-08-18T18:42:07.313
> 
> 标签：android, json, android-asynctask

`doInBackground()`当我的程序在方法中时，我正在从 JSON API 中检索一些数据，`doInBackground()`我的日志指示数据已被检索，但不是去，而是`onPostExecute()`仍在`doInBackground()`无限循环中运行。我怎样才能停止那个循环？

这是我的`doInBackground()`编码：

```
@Override
protected String doInBackground(String... DATA) {
    // TODO Auto-generated method stub
    TYPE = DATA[0];

if(TYPE=="reservation_page")
    {
        URL = DATA[1];
        jParser = new JsonParser();
        json = jParser.getJSONfromUrl(URL+memberId);
        try
        {
            JSONArray reservation = json.getJSONArray(TAG_RSVTION);
            for(int i = 0; i<reservation.length(); i++)
            {
                JSONObject r = reservation.getJSONObject(i);
                amount = r.getString(TAG_AMNT);
                gcpamount = r.getString(TAG_GCPAMNT);
                date1 = r.getString(TAG_DATE);
                month = r.getString(TAG_MNTH);
                year = r.getString(TAG_YEAR);
                time1 = r.getString(TAG_TIME);
                golfcourse_name = r.getString(TAG_GLFCRSNAME);
                no_of_player = r.getString(TAG_PLYRNO);

                HashMap<String, String> map = new HashMap<String, String>();

                map.put(TAG_AMNT, amount);
                map.put(TAG_GCPAMNT, gcpamount);
                map.put(TAG_DATE, date1);
                map.put(TAG_MNTH, month);
                map.put(TAG_YEAR, year);
                map.put(TAG_TIME, time1);
                map.put(TAG_GLFCRSNAME, golfcourse_name);
                map.put(TAG_PLYRNO, no_of_player);

                resvList.add(map);
                Log.v(TAG_LOG, "list: "+resvList);
            }
            Log.v(LoadingScreen.TAG_LOG, "reserv: "+reservation);
            Log.v(LoadingScreen.TAG_LOG, "name: "+golfcourse_name);
        }
        catch(JSONException e)
        {
            Log.v(LoadingScreen.TAG_LOG, String.valueOf(e));
        }
    }
    return null;
} 
```

这是我的`onPostExecute()`编码：

```
protected void onPostExecute(String result) {
    // TODO Auto-generated method stub
    super.onPostExecute(result);

if(TYPE=="reservation_page")
    {
        Intent in = new Intent(context, MyReservation.class);
        in.putExtra(TAG_MBRID, memberId);
        in.putExtra(TAG_AMNT, amount);
        in.putExtra(TAG_GCPAMNT, gcpamount);
        in.putExtra(TAG_DATE, date1);
        in.putExtra(TAG_DAY, day);
        in.putExtra(TAG_MNTH, month);
        in.putExtra(TAG_YEAR, year);
        in.putExtra(TAG_TIME, time1);
        in.putExtra(TAG_GLFCRSNAME, golfcourse_name);
        in.putExtra(TAG_PLYRNO, no_of_player);
        context.startActivity(in);
    }
    progress.dismiss();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:14:27.263

等等等等等等...

你的**if 条件是错误的**..它应该像，

```
if(TYPE.equals("reservation_page")) 
```

不是

```
if(TYPE=="reservation_page") 
```

用于`.equals()`比较`String Class`两个字符串..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:55:39.693

您是否甚至进入了循环，或者可能`jParser.getJSONfromUrl(URL+memberId)`永远等待来自您的 URL 的响应？只需运行您的调试器，找出问题所在应该不是问题。

# sql-server - SQL查询到Excel电子表格使用vba宏

> ID：12021282
> 
> 赞同：0
> 
> 时间：2012-08-18T18:42:12.657
> 
> 标签：sql-server, excel, vba

我无法将 SQL Server 数据导入 Excel。

所以任何人都可以帮助我如何连接到 SQL Server 以使用 vba 宏？以及如何使 vba 脚本到 SQL 查询到 Excel 电子表格？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T19:03:10.290

在 Office 2007 中，转到**数据**选项卡，然后**获取外部数据**，您将看到连接到 SQL 的选项，在 2010 中，转到**数据**选项卡并单击**其他现有源**，然后选择**SQL Server**。这是将数据拉入工作表以直接操作。

***仅在 VBA 中***

在 VBA 脚本编辑器中包括 **ActiveX 数据对象**参考

这是一个关于如何从 VBA 连接到 SQL 的代码示例

> ```
> Sub Connect2SQLXpress()
> Dim oCon As ADODB.Connection
> Dim oRS As ADODB.Recordset
> Set oCon = New ADODB.Connection
> oCon.ConnectionString = "Driver={SQL Native Client};Server=.\SQLEXPRESS;Database=DB1; Trusted_Connection=yes;"
> oCon.Open
> Set oRS = New ADODB.Recordset
> oRS.ActiveConnection = oCon
> oRS.Source = "Select * From Table1"
> oRS.Open
> Range("A1").CopyFromRecordset oRS
> oRS.Close
> oCon.Close
> If Not oRS Is Nothing Then Set oRS = Nothing
> If Not oCon Is Nothing Then Set oCon = Nothing
> End Sub 
> ```

要在 Excel 中启用 Visual Basic 编辑器，请阅读以下[链接](http://msdn.microsoft.com/en-us/library/office/ee814737.aspx)以启用开发人员选项卡

这应该可以快速概述您的需求。

# java - 创建两个 RoundedFields，JTextField 和 JPasswordField

> ID：12021288
> 
> 赞同：4
> 
> 时间：2012-08-18T18:43:11.960
> 
> 标签：java, inheritance, multiple-inheritance

好的，我有以下 JTextField 类。它创建一个圆形 JTextField。现在我想为我的 JPasswordField 使用相同的设置，因为我认为 JPasswordField 继承自 JTextField 我可以执行以下操作：`JPasswordField new_field = new RoundField(SOME Parameters);`但这是一场大灾难。有什么方法可以使 JPasswordField 舍入而不重复代码？

```
 public class RoundField extends JTextField {
    public RoundField(String text, int x, int y, int width, int height) {
        setText(text);
        setBounds(x, y, width, height);
        setForeground(Color.GRAY);
        setHorizontalAlignment(JTextField.CENTER);
        setOpaque(false);
        setBorder(BorderFactory.createEmptyBorder(2, 4, 2, 4));
    }

    protected void paintComponent(Graphics g) {
        g.setColor(getBackground());
        g.fillRoundRect(0, 0, getWidth(), getHeight(), 8, 8);
        super.paintComponent(g);
    }
} 
```

PS：如有必要，可以将 setText 移出构造函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T19:11:42.413

InPursuit 是对的。您无法使用继承解决您的问题。

但是如何使用工厂设计模式来代替。您将创建一个外部类来处理您当前在`RoundField`.

前任：

```
class BorderUtil {

    @SuppressWarnings({ "unchecked", "serial" })
    public static <T extends JTextField> T createTextField(T field, String text, int x, int y, int width,
            int height) {

        T f = null;
        if (field instanceof JPasswordField) {
            f = (T) new JPasswordField(text) {
                @Override
                protected void paintComponent(Graphics g) {
                    g.setColor(getBackground());
                    g.fillRoundRect(0, 0, getWidth(), getHeight(), 8, 8);
                    super.paintComponent(g);
                }
            };
        } else {
            f = (T) new JTextField(text) {
                @Override
                protected void paintComponent(Graphics g) {
                    g.setColor(getBackground());
                    g.fillRoundRect(0, 0, getWidth(), getHeight(), 8, 8);
                    super.paintComponent(g);
                }
            };
        }

        f.setBounds(x, y, width, height);
        f.setForeground(Color.GRAY);
        f.setHorizontalAlignment(JTextField.CENTER);
        f.setOpaque(false);
        f.setBorder(BorderFactory.createEmptyBorder(2, 4, 2, 4));
        return f;
    }
} 
```

通过这种方式，您可以避免大多数重复并获得清晰性。

要调用该方法，非常简单：

```
JPasswordField pf = BorderUtil.createTextField(yourPasswordField, "Text", 0, 0, 10, 10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:48:57.863

您不能更改 jpasswordfield 继承的类，所以不，如果不重复代码，就无法做到这一点。

# php - 带滤波器的置换生成器

> ID：12021292
> 
> 赞同：0
> 
> 时间：2012-08-18T18:43:47.527
> 
> 标签：php, filter, generator, permutation, combinations

我正在寻找可以生成以下内容的 PHP 想法/代码/算法：

我有 5 个字符字符串 [a-zA-Z0-9]

我想**用可变过滤器生成排列**

筛选 ：

1.  字符串是“W”
2.  字符串是一个数字
3.  字符串是“T”
4.  字符串是大写的
5.  字符串是“3”

* * *

**编辑：**

```
<?php

$reset = fopen('list.txt', 'w');
fclose($reset);

$chars = str_split("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");

$file = fopen('list.txt', 'a+');

foreach ($chars as $c0) {
    foreach ($chars as $c1) {
        foreach ($chars as $c2) {
            foreach ($chars as $c3) {
                foreach ($chars as $c4) {

                    $filter = "/[a-z][a-z][a-z][a-z][A-Z]/";
                    $list = $c0 . $c1 . $c2 . $c3 . $c4;

                    if (preg_match($filter, $list)) {
                        $data = $list . "\n";
                        file_put_contents('list.txt', $data, FILE_APPEND);
                    } 
                }
            }
        }
    }
}
fclose($file);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:23:38.803

对于 php，你可以下载这个包： http: [//pear.php.net/package/Math_Combinatorics](http://pear.php.net/package/Math_Combinatorics)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:07:47.700

与其生成所有可能的排列然后对其进行过滤，不如创建返回字符串中每个字符的可能值的生成器。这会更有效（仅静态 W 将允许您将输入大小缩小一个非常大的因子）。

您可以通过将函数包装在一个简单的类中来创建生成器（以允许您保持内部状态），为每次迭代返回每个可能的标记。然后，您通过组合对每个生成器的调用并创建可能的返回值来创建排列。

我还强烈建议您不要将 file_get_contents 和 file_put_contents 用于此类事情。使用 打开文件`fopen`，然后在`fwrite()`每次有新排列时执行。`fclose`生成所有排列后调用。

# android - 找不到活动，不知道为什么

> ID：12021295
> 
> 赞同：0
> 
> 时间：2012-08-18T18:44:14.267
> 
> 标签：android

我正在尝试使用以下代码打开一个新活动：

```
myListView.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                    Intent intent = new Intent(Andro.this, Aktivity.class);   
                    startActivity(intent);
                }
            }); 
```

要打开的活动如下所示：

```
package com.andro;

import android.app.Activity;
import android.os.Bundle;

public class Aktivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        try
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
        } catch(Exception e)
        {

        }
    }

} 
```

它与其他活动在同一个包中，并且在同一个目录中。

清单如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.andro"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-permission android:name="android.permission.INTERNET" />
    <application android:label="@string/app_name" >
        <activity android:name="Andro"
                  android:theme="@android:style/Theme.NoTitleBar"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".Aktivity">
        </activity>
    </application>
</manifest> 
```

我尝试过使用不同的名称，例如 '.Aktivity' '.com.andro.Aktivity' 'Aktivity' 'com.andro.Aktivity'

我在构建之前删除了 bin 和 gen 目录。

但我仍然总是在 logcat 中得到一个 Activity not found 异常。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:02:19.643

logcat 似乎正在显示

```
com.andro.Andro$Aktivity not found 
```

我认为在 Andro 类中还有一个名为 Aktivity 的类。所以尝试使用这个

```
Intent in = new Intent();
ComponentName comp = new ComponentName("com.andro", "com.andro.Aktivity");
in.setComponent(comp);
startActivity(in); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:51:34.970

这行不通

```
<activity android:name="com.andro.Aktivity" ........ /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T18:56:56.317

你能试一下吗

```
<activity android:name=".Andro"
                  android:theme="@android:style/Theme.NoTitleBar"
                  android:label="@string/app_name"> 
```

反而：

```
<activity android:name="Andro"
                  android:theme="@android:style/Theme.NoTitleBar"
                  android:label="@string/app_name"> 
```

编辑：

您的 Andro Activity 似乎有问题。

```
Unable to find explicit activity class {com.andro/com.andro.Andro$Aktivity}; 
```

如果您在活动中使用列表视图，请确保将“ListActivity”扩展为：

```
public class Andro extends ListActivity 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T19:12:27.633

尝试清理您的项目并重新启动 Eclipse。

# javascript - jquery选择以某事开头并以某事结尾

> ID：12021300
> 
> 赞同：0
> 
> 时间：2012-08-18T18:45:11.050
> 
> 标签：javascript, jquery

我需要选择 id 以“start-”开头并以“end-”字符串结尾的元素。如何使用 jquery 选择器完成此操作？请问一个线选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:59:23.800

好吧，这个答案将选择两种类型，两种类型都以没有开始的方式结束，而正确答案的另一种方式是这个

[http://jsfiddle.net/XQBGs/](http://jsfiddle.net/XQBGs/)

```
$('[id|="start"][id$="end-"]') 
```

# r - R：我应该如何创建网格图形？

> ID：12021303
> 
> 赞同：1
> 
> 时间：2012-08-18T18:45:27.903
> 
> 标签：r, plot, lattice, levelplot

> **目标**
> 
> ![在此处输入图像描述](../Images/60fa6bc3b47cf35e63d9ca6981316d32.png)
> 
> **代码**
> 
> ```
> require(lattice)
> 
> png('my_typing.png')
> par(mfrow=c(2,1))
> 
> read.csv('race_data.csv')->sol
> plot(sol$Race.., sol$WPM*sol$Accuracy, type='l')
> 
> # TODO: it wrongly substitutes the plot with levelplot
> # TODO: I want two plots one below another, plot and then levelplot below
> levelplot(cor(sol[1:5])) 
> ```

**帮助问题**

> 1.  如何在一个 PNG 文件中同时绘制正常图和特殊图？
>     
>     
> 2.  我应该将不同的绘图包（例如格子和网格）组合到基础吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:17:23.360

gridBase包为组合网格和基本图形输出提供了一些支持[。](http://cran.r-project.org/web/packages/gridBase/index.html)

这是一个简单的例子：

```
library("grid")
library("gridBase")
library("lattice")

# example from levelplot help page
x <- seq(pi/4, 5 * pi, length.out = 100)
y <- seq(pi/4, 5 * pi, length.out = 100)
r <- as.vector(sqrt(outer(x^2, y^2, "+")))
g <- expand.grid(x=x, y=y)
g$z <- cos(r^2) * exp(-r/(pi^3))
p <- levelplot(z~x*y, g, cuts = 50, scales=list(log="e"), xlab="",
               ylab="", main="lattice levelplot",
               colorkey=FALSE, region=TRUE)

grid.newpage()
pushViewport(viewport(layout=grid.layout(2, 1,
                                         heights=unit(c(2, 1), "null"))))
vp <- pushViewport(viewport(layout.pos.row=1, layout.pos.col=1))
par(omi=gridOMI())
# base graphics
plot(1:10, main="base graphics plot")
popViewport()
# lattice plot
vp <- pushViewport(viewport(layout.pos.row=2, layout.pos.col=1))
print(p, vp=vp, newpage=FALSE)
popViewport()
popViewport() 
```

![网格基础示例](../Images/30a35a73dabc0d20aadf187220f5cf78.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:58:50.370

先生。在#R 中建议只使用一种类型的情节 - 事物。Trellis 函数不能与基本函数互换，因此还应该为趋势线和标题等内容重新编程语法。否则，您会随着时间的推移和对狗的一致性造成语法上的混乱。

*我正在尝试找出做网格图形的替代方法，以便进行写作。*

**创建网格图形的不同方法**

> **1\. Trellis - 做事方式，使用lattice -pkg，代码[在这里](http://pastie.org/4545982)**
> 
> ![在此处输入图像描述](../Images/e60188190eb901b7efed52de19a90c16.png)
> 
> **2.结合不同的情节-pkgs**
> 
> 先生。不鼓励这种方式，但 rcs 在[这里](https://stackoverflow.com/a/12021940/164148)的做法。根据 MR 的说法，**grid 是`"much more user friendly way of creating grid grapics"`**，所以我觉得值得学习，lattice 和 ggplot2 之类的东西都是建立在 grid 之上的。请在此处查阅有关结合基本绘图功能和网格绘图功能的[论文](http://cran.r-project.org/web/packages/gridBase/vignettes/gridBase.pdf)。

# php - 如何将其他配置选项传递给 symfony？

> ID：12021307
> 
> 赞同：0
> 
> 时间：2012-08-18T18:46:09.333
> 
> 标签：php, symfony

我想将 facebook id 传递给我的 symfony 应用程序。我可以把它放在哪里以及如何接受它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T10:00:43.123

您可以在此[博客文章](http://richardmiller.co.uk/2011/06/01/symfony2-writing-a-dependency-injection-extension-configuration/)中找到详细描述的方法。与您想做的事情相比，这可能需要付出很多努力，但相信我，了解 DIC 配置是值得的。

# c++ - 返回一个常量字符 *

> ID：12021309
> 
> 赞同：1
> 
> 时间：2012-08-18T18:47:09.710
> 
> 标签：c++, function, char, constants

我写了一个返回当前日期的函数。在函数内部，我“计算”结果并且它工作，但是当我“计算”函数时，它不起作用。我有垃圾。

```
const char* engineCS::getDate() const
{
    time_t t = time(0);
    struct tm *now = localtime(&t);
    char buf[20];
    strftime(buf, sizeof(buf), "%Y-%m-%d %X", now);
    cout << buf << endl;
    return buf;
} 
```

示例：内部：2012-02-02 00:00:00 外部：?????fv

怎么了？类似问题：[函数并返回 const char*](https://stackoverflow.com/questions/10668923/functions-and-return-const-char)

谢谢

编辑：现在有什么问题？对不起，我做了太多 VB.NET ......

```
const char* engineCS::getDate() const
{
    time_t t = time(0);
    struct tm *now = localtime(&t);
    char *buf;
    buf = new char[20];
    strftime(buf, sizeof(buf), "%Y-%m-%d %X", now);
    cout << buf << endl;
    return buf;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T19:00:11.000

将您的功能更改为 return `std::string`，一切都会好起来的。除了返回类型之外，您不需要进行任何进一步的更改。如果消费者需要 raw ，请在结果字符串上`char const *`调用成员函数。`c_str()`

# clojure - clojure 地图集 - 基本过滤

> ID：12021312
> 
> 赞同：4
> 
> 时间：2012-08-18T18:47:37.063
> 
> 标签：clojure

Clojure初学者在这里..

如果我有一组地图，例如

```
 (def kids #{{:name "Noah" :age 5}
     {:name "George":age 3}
     {:name "Reagan" :age 1.5}}) 
```

我知道我可以得到这样的名字

```
 (map :name kids) 
```

1) 如何选择特定地图？例如，我想取回 name="Reagan" 的地图。

```
 {:name "Reagan" :age 1.5} 
```

这可以使用过滤器完成吗？

2）返回age = 3的名字怎么样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T18:52:09.583

是的，你可以这样做`filter`：

```
(filter #(= (:name %) "Reagan") kids)

(filter #(= (:age %) 3) kids) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-18T18:56:03.087

有`clojure.set/select`：

```
(clojure.set/select set-of-maps #(-> % :age (= 3))) 
```

与 和`name`类似`"Reagan"`。在这种情况下，返回值将是一个集合。

你也可以`filter`在没有任何特殊准备的情况下使用，因为它`filter`调用`seq`了它的集合参数*（编辑：正如我在输入这个时 ffriend 已经描述的那样）*：

```
(filter #(-> % :age (= 3))) set-of-maps) 
```

这里的返回值将是一个惰性序列。

如果您知道集合中只有一项满足您的谓词，那么`some`效率会更高（因为在找到匹配项后它不会处理任何其他元素）：

```
(some #(if (-> % :age (= 3)) %) set-of-maps) 
```

这里的返回值将是匹配的元素。

# javascript - jQuery - 如何将事件处理程序存储在变量中并稍后将其绑定到对象？

> ID：12021314
> 
> 赞同：3
> 
> 时间：2012-08-18T18:47:43.407
> 
> 标签：javascript, jquery, events, javascript-events, event-handling

基本上我有一个“删除所选”按钮，只要没有选中复选框，它就会被禁用。一旦用户选中一个复选框，我想将一个点击事件处理程序绑定到这个按钮。

由于可能会发生用户取消选择复选框并且未选择任何复选框的情况，因此我想将完整的事件处理程序函数存储在一个变量中，并且仅在选中复选框后才绑定它。

问题是：如何将这个事件处理函数存储在一个变量中，以便最容易地将它绑定到一个对象？

到目前为止，我只使用它来取消绑定事件处理程序（已存在于该对象上），然后再次绑定它，如下所示：

```
$(my-selector).unbind('click', eventHandler);
$(my-selector).bind('click', eventHandler); 
```

...但绝不会反过来。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T18:56:26.773

我的建议是走一条不同的路线：绑定事件并将它们绑定到页面的整个生命周期。在事件处理程序中，检查相关对象的状态并决定如何处理该事件——这可能包括简单地忽略它。

这背后有两个理由：

*   保持简单和可调试
*   我看到事件的传递延迟了很长时间，以至于事件开始时的状态与事件传递时的状态不再相同：即：您的事件在您解除绑定后已传递（因为它是在仍绑定时启动的)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T18:56:10.410

我不确定我是否理解，但你的意思是这样的吗？

```
// eventHandler function
var eventHandler = function(event) {

   ... // do something

}

// bind eventHandler function to jQuery collection
$(my-selector).bind('click', eventHandler);
$(my-selector).unbind('click', eventHandler); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T18:56:22.147

```
var handlerFunc = function () {...}
$(my-selector).unbind('click', handlerFunc);
$(my-selector).bind('click', handlerFunc); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T18:59:12.810

您可以使用变量来存储选中的复选框，如下所示：

```
var checkboxHandler = {}

checkboxHandler.activateButton = function(){...};
checkboxHandler.deactivateButton = function(){...};
checkboxHandler.checkboxes_checked = {};
checkboxHandler.number_of_checked_checkboxes = 0;
checkboxHandler.checkboxClicked = function(event){
    if($(this).attr('checked')){
        var id = $(this).attr('id');
        if(checkboxHandler.checkboxes_checked[id]){
            // uncheck
            checkboxHandler.checkboxes_checked[id] = false;
            checkboxHandler.number_of_checked_checkboxes--;
        }else{
            // checked
            checkboxHandler.checkboxes_checked[id] = true;
            checkboxHandler.number_of_checked_checkboxes++;
        }
        if(checkboxHandler.number_of_checked_checkboxes>0){
            checkboxHandler.activateButton();
        }else{
            checkboxHandler.deactivateButton();
        }
    }
}

$('checkboxes').bind('click',checkboxHandler.checkboxClicked) 
```

这样，您只需绑定一次复选框，而不必绑定/取消绑定它们

# cakephp - 无法更改身份验证方法

> ID：12021318
> 
> 赞同：0
> 
> 时间：2012-08-18T18:47:53.283
> 
> 标签：cakephp, authentication

我有 2 个组件的身份验证方法`Auth`。`Default`和`Special`。第一种方法适用于所有用户，也`Special`适用于我的朋友......

我想将身份验证方法更改为`Special`发布时`role`等于`2`..所以我把它放在我的`UsersController` `login`方法中：

```
if($this->request->data['role'] == 2){
    $this->Auth->authenticate = 'Special';
    echo 'Method changed!';
}
if($this->Auth->login()){
    ......
} 
```

如果`AppController`，我在哪里设置`$components`：

```
public $components = array('RequestHandler', 'Session',
    'Auth' => array('authenticate' => 'Default')); 
```

但是，当我发送带有 的表单时`role=2`，它会打印`Method changed`但不会更改身份验证方法和使用`Default`方法..

我犯错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:28:07.143

我有一个更简单的解决方案：

在您的控制器中，定义新的身份验证数组：

```
$this->Auth->authenticate = array('Form' => array(
    'userModel' => 'User',
    'fields' => array('username' => 'login', 'password' => 'password'),
)); 
```

然后为了使您的更改在您的应用程序中生效，只需编写：

```
$this->Auth->constructAuthenticate(); 
```

就这样 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:05:35.427

我有一个类似的问题，我通过在`beforeFilter`操作中定义相同的变量来解决它`AppController`：

```
function beforeFilter() {

    parent::beforeFilter();

    // Pass settings in
    $this->Auth->authenticate = array('Form' => array(
        'fields' => array('username' => 'email')
    ));

    ...

} 
```

因此，在您的情况下，我将在 AppController 中执行以下操作：

```
function beforeFilter() {

    parent::beforeFilter();

    if($this->request->data['role'] == 2){
        $this->Auth->authenticate = 'Special';
        echo 'Method changed!';
    } else {
        $this->Auth->authenticate = 'Default';
    }

    ...

} 
```

...并且在组件声明中只写：

```
public $components = array('RequestHandler', 'Session', 'Auth'); 
```

# c++ - 重载 std::function 参数以匹配 lambda

> ID：12021321
> 
> 赞同：11
> 
> 时间：2012-08-18T18:48:24.453
> 
> 标签：c++, lambda, c++11, g++

> **可能的重复：**
> [消除对采用 std::functions 的函数的调用的歧义 std::function](https://stackoverflow.com/questions/4111647/disambiguating-calls-to-functions-taking-stdfunctions)
> [的模板参数（签名）不是其类型的一部分吗？](https://stackoverflow.com/questions/5931214/isnt-the-template-argument-the-signature-of-stdfunction-part-of-its-type)

我想重载一个函数，以便可以使用各种不同的 lambda（通常带有更多或更少的参数）自然地调用它。我尝试过的显而易见的事情是：

```
#include <functional>
#include <iostream>

extern void fn(std::function<void(int)>);
extern void fn(std::function<void(int, int)>);

void test()
{
    fn([](int a) { std::cout << "lambda with 1 arg " << a << std::endl; });
} 
```

但是，这会因 g++（已尝试 v4.6.2 和 v4.7.1）而失败，并出现以下错误：

```
test.cc: In function ‘void test()’:
test.cc:9:74: error: call of overloaded ‘fn(test()::<lambda(int)>)’ is ambiguous
test.cc:9:74: note: candidates are:
test.cc:4:13: note: void fn(std::function<void(int)>)
test.cc:5:13: note: void fn(std::function<void(int, int)>) 
```

[现在我在这里](https://stackoverflow.com/questions/4170201/c0x-overloading-on-lambda-arity)和[这里](https://stackoverflow.com/questions/4111647/disambiguating-calls-to-functions-taking-stdfunctions)找到了另一种（更复杂的）方法，但我的问题是，为什么上面的代码会失败？标准中有什么东西说它不能工作，还是这仅仅是 g++ 的错误/限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T18:58:03.583

每个 Lambda`[](int a) { std::cout << "lambda with 1 arg " << a << std::endl; }` 都有唯一的类型，即使另一个与上面相同的 lambda 也会导致不同的 lambda 类型与成员`operator()(int a)`

您的实现`std::function`具有模板化转换，可供 `std::function<void(int)>`和使用`std::function<void(int, int)>`。虽然它们中只有一个在实例化时编译，但它们都被考虑用于重载解决方案，这就是造成歧义的原因。为了获得所需的结果，库需要使用 SFINAE 从重载候选集中排除错误的结果（最近版本的 libc++ 就是这样做的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:19:43.137

这个问题听起来是由内而外的。您定义一个类型，`std::function`用于描述您将如何调用该类型的对象以及它们的返回值是什么。然后，您可以使用该特殊化`std::function`来包装具有不同参数类型或不同返回类型的各种可调用对象，包括 lambda。

# objective-c - 2 uitableviews in 1 并使其高度动态变化

> ID：12021325
> 
> 赞同：0
> 
> 时间：2012-08-18T18:49:03.737
> 
> 标签：objective-c, xcode, uitableview

我正在努力完成以下工作。我在一个 uitableviewcontroller 中有 2 个 uitableview，在视图底部我有一个按钮。一旦我单击该按钮（表格视图的宽度），它就会（带有动画）移动到屏幕的中心。现在我希望第二个 uitableview 随之移动，而第一个（之前是全屏的）缩小。这样最后我就会有 2 个 uitableview 同时显示数据。

您猜对了，再次单击该按钮会将其移动到屏幕底部，隐藏第二个 uitableview 以便第一个再次全屏显示。

有什么提示/想法/代码我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:09:12.410

您不能使用`UITableViewController`. 您需要一个`UIViewController`，投入 2 `UITableView`s，使它们`@property`成为视图控制器，并照常处理它们的数据源和委托方法。

然后当你按下按钮时，你可以改变两个表格视图的框架，就像你改变任何的框架一样`UIView`。

# asp.net-mvc - 为回发的下拉列表禁用不显眼的验证

> ID：12021326
> 
> 赞同：0
> 
> 时间：2012-08-18T18:49:07.263
> 
> 标签：asp.net-mvc, postback, html.dropdownlistfor

我有一个视图，所有字段数据都取决于我的 DropDownListFor 所选项目。但问题是当我更改 DropDownListFor 索引时，我只需要用新数据刷新我的视图，但是不显眼的验证会向我发送所有消息，例如“需要 x 字段”

这是我的 DropDownListFor

```
<%: Html.DropDownListFor(m => m.Perfil_ID, new SelectList(Model.Roles, "Perfil_ID", "Nombre"), new
            {
                id = "myddl",
                onchange = "submit(); "

            })%> 
```

有没有办法在没有不显眼的验证的情况下进行 DropDownListFor 回发？请注意，当我直接单击提交按钮时，我需要不显眼的验证。

希望你能帮我解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:57:43.307

我相信您可以通过设置阻止验证运行

```
$("form").validate().cancelSubmit = true; 
```

尽管有名称，但这不会阻止提交的发生。查看 jquery-validation 代码，它似乎只是阻止调用`validator.form()`，这是验证通过。

请注意，jquery-validation 之后会将值设置回 false - 它只会停止一次提交的验证（如果您最终因某种原因停止提交）。

# c++ - 为什么 C 风格的演员表可以工作，但 reinterpret_cast 不能？

> ID：12021335
> 
> 赞同：13
> 
> 时间：2012-08-18T18:50:57.307
> 
> 标签：c++, c, casting, reinterpret-cast

所以我有一个两个字符数组

```
unsigned char v[2]; 
```

我想将 v[0] 的值显示为 0 到 255 之间的数字，但是

```
cout << v[0] << endl; //prints some garbage

cout << (void*)v[0] << endl; //prints the right thing but in hex 
```

所以我尝试了

```
cout << (int)v[0] << endl; 
```

或者

```
printf("%d\n", v[0]); 
```

这正是我想要的，但我根本不喜欢它。另外我根本不明白为什么这不起作用：

```
cout << reinterpret_cast<int>(v[0]) << endl; //compiler error 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-18T18:53:35.747

（通俗地说）`reinterpret_cast`用于以实现定义的方式将对象的位解释为另一种类型。您不希望这样：您想要转换（从 char 到 int）。改为使用`static_cast`。

（所有可能的用途`reinterpret_cast`都列在[5.2.10](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf#page=99)中；这不是其中之一。）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-18T18:59:16.920

```
cout << v[0] << endl; // prints some garbage 
```

不是垃圾，而是 v[0] 中的值所代表的字符。

```
cout << (void*)v[0] << endl; 
```

这会将值“转换”`v[0]`为指针（未定义的行为，因为它不是开始的指针），并将该指针的值打印为十六进制值。

```
cout << (int)v[0] << endl; 
```

这会将值转换`v[0]`为 int（定义明确；只需提升为 int）并显示该值。

`reinterpret_cast`，正如其他人所提到的，它对它可以做什么有一些限制。正确的答案是使用`static_cast<int>`：

```
cout << static_cast<int>(v[0]) << endl; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-18T19:00:15.190

*   `reinterpret_cast`：“...允许将任何整数类型转换为任何指针类型，反之亦然。” 仅使用它来将可能是指针的内容转换为正确的指针类型（无符号字符显然不能成为 8 位系统以外的任何指针）。

*   `static_cast`：当您想将一个类型转换为另一种类型时使用此选项（例如将 float 转换为 int，或将 unsigned char 转换为 int）。

`cout`尝试将 unsigned char 打印为 ASCII 字符代码，因此转换为 int via`static_cast<int>(v[0])`是正确的做法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-18T18:55:16.140

您使用 reinterpret_cast 的方式是尝试将 char 读取为 int，并且它们的大小不同。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-19T00:41:35.637

`reinterpret_cast`将指针类型的值转换为其他指针类型值或整数值，反之亦然，以允许取消引用目标指针值。但是，您尝试将一种整数类型值转换为另一种整数类型值。那是行不通的。`reinterpret_cast`支持引用类型的转换，这相当于使用后续取消引用转换的相应指针值。所以看起来你想做

```
// NOTE: THIS IS UNDEFINED BEHAVIOR
cout << reinterpret_cast<int&>(v[0]) << endl; 
```

这是格式正确的，但将 unsigned char 重新解释为整数对象，这不能保证工作（可能的问题范围从存储的无效对齐到不兼容的大小 - 1 字节与 4 字节）。你可以通过`(int)v[0]`演员来解决这些情况，我认为这很好。您也可以说`+v[0]`，它会自动将值提升为（有符号或无符号）`int`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-24T12:58:44.120

`static_cast`正如其他人所指出的，将做正确的事。它比 C 风格的强制转换弱，因此不太可能造成破坏并导致未定义的行为。

`reinterpret_cast`也弱于 C 风格的强制转换，但*并不*严格地强于`static_cast`; 有些事情`static_cast`可以做而`reinterpret_cast`不能。你遇到了其中之一。

`reinterpret_cast`旨在允许您获取一种类型的值，将它们存储为另一种类型的值，然后取回原始类型。您可以这样做来转换兼容的整数和指针类型。您可以使用它从一种指针类型转换为另一种指针类型并再次转换回来。

通常， a`reinterpret_cast`会将您的值转换为“持有”值，并且持有值最多是实现定义*的*，并且经常使用它是未定义的行为。

所以你要避免使用它，除非你真的是认真的。

将 a 转换`char`为 an`int`通常不需要重新解释。

`static_cast<int>(some_char)`将升级`char`到 an`int`并为您提供适当的值。

* * *

但是，在某些情况下，我觉得`static_cast` *太强大了*。它可以进行不安全的指针转换，并算作显式转换。

这两者都可以伪装错误。

您可以编写一个严格较弱的演员表，如下所示：

```
template<class T, class U>
T implicit_cast( U&& u ) { return std::forward<U>(u); } 
```

现在你可以

```
std::cout << implicit_cast<int>(v[0]) << std::endl; 
```

你得到的行为非常像调用一个`int`带`char`参数的函数，我相信这就是你想要的。

* * *

这里出了什么问题？嗯，`std::cout`是一个流，而流注意传递的类型。 `char`类型被打印为好像它们是 `'a` 样式字符，而不是好像它们是小整数。

为了将 a`char`视为一个小整数，您必须将其转换为另一种整数类型。

也是如此`char*`；它们被视为指向`char`、 like的空终止缓冲区的`"hello world"`指针，而不像其他指针。

# sql - 为仅具有文件服务器的多用户应用程序选择数据库（Windows）

> ID：12021337
> 
> 赞同：3
> 
> 时间：2012-08-18T18:51:12.583
> 
> 标签：sql, database, multi-user, fileserver

我需要为在文件服务器上使用相同数据库的基于 Windows 的应用程序的多个同时用户选择数据库解决方案。

我需要一个可以存在于 Window OS 文件服务器上的数据库。

1.  必须由在单个 MS Windows 机器（主要是 Windows 7）上运行的多个应用程序共享
2.  由文件服务器提供。
3.  无法使用数据库服务器/引擎（由于内部政治规则）或网页服务器。
4.  更喜欢将 C# 用于一组 WPF 应用程序。
5.  当前使用一组带有一组 MS Access 文件的 VB 应用程序 - 其中一个应用程序有问题，需要重新编写。
6.  当前大约六个 *.mdb 文件（一些带有链接表）的集合大约是 400 MB。估计增长 10 到 20 MB/年。
7.  目前最多有十几个并发用户在他们自己的 PC 上。不要期望在未来有太大的变化。
8.  所有应用程序都向数据库读取和写入数据。
9.  目前有几个（大约 4 人）在 Access 中编写临时查询 - 他们将继续需要能够以某种方式编写查询。
10.  希望防止最终用户更改数据库结构（添加表/列）。
11.  免费软件。

我知道的选择是：

1.  访问 .mdb 文件（当前情况）。
2.  SQLite。
3.  SQL 服务器 CE。

是否有其他系统可能适合许多或所有所需特征？对于我正在考虑的系统，我应该了解哪些特定的“陷阱”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:08:20.523

好吧，“不能使用数据库服务器/引擎”让事情变得更加困难。“免费”也是如此。

我认为 Access 是您列表中唯一接近满足所有要求的东西。它不是免费的，但似乎你已经拥有它，所以至少它不会额外收费。

Access本质上是三种不同的捆绑产品。

*   Jet 数据库引擎
*   用于查询、表单和报告的 RAD 环境
*   VBA编程环境

如果您只使用数据库引擎，那么使用 SQL Server CE 进行一些测试是有意义的。

切换到 SQLite 可能需要对应用程序代码进行额外检查。SQLite 支持[存储类](http://www.sqlite.org/datatype3.html)，而不是数据类型。这意味着什么？这意味着 SQLite 允许这样做。

```
sqlite> create table foo (n integer);
sqlite> insert into foo values ('wibble');
sqlite> select n from foo;
wibble 
```

[HyperSQL](http://hsqldb.org/)是另一种可能性。仅支持 JDBC，*可以*在没有服务器组件的情况下运行。（文档并没有立即明确这一点。）我认为切换到这个需要比 SQL Server CE 做更多的工作。

另见[H2](http://www.h2database.com/html/main.html)和[火鸟](http://www.firebirdsql.org/en/features/)。

# css - 带有复选框的可滚动区域

> ID：12021338
> 
> 赞同：3
> 
> 时间：2012-08-18T18:51:14.550
> 
> 标签：css, twitter-bootstrap

我使用 twitter 引导程序（我很讨厌 css）。我想要一个带有通常 3 列复选框的可滚动区域。有很多复选框，用户可以选择几个。我不想在复选框上浪费太多屏幕，因此滚动。

我曾尝试使用 css3 列，但它在 IE 中不起作用，如果与溢出结合使用它会水平溢出，我只想要垂直滚动条。

我知道这不是用户友好的最佳解决方案，而是客户想要的。

```
 div.cb_scroll {
  -moz-column-count: 3;
  -moz-column-gap: 20px;
  -webkit-column-count: 3;
  -webkit-column-gap: 20px;
  column-count: 3;
  column-gap: 20px;
  //height: 300px;
  overflow:auto;
  border: 1px solid #888;
  padding: 5px;
} 
```

有什么简单的解决办法吗？如果不在 css 中，任何简单的 javascript 解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T05:18:00.020

你的意思是这样的吗？

[http://jsfiddle.net/hajpoj/ayx4z/1/](http://jsfiddle.net/hajpoj/ayx4z/1/)

基本上你

1.  将高度设置为小于包含复选框的 div
2.  将溢出设置为自动；
3.  使包含 div 的设置宽度为“自动”或大于内部 div 的组合宽度。

CSS：

```
.boxes {
    height: 75px;
    overflow: auto;
    width: auto;
}​`​ 
```

# php - 显示数据库查询的最后 2 个结果

> ID：12021339
> 
> 赞同：0
> 
> 时间：2012-08-18T18:51:14.780
> 
> 标签：php, xhtml, blogs

所以我一直在研究下面的代码，无论我做什么，它都不会显示超过当前数据库 *=（来自 URL [http://www.example.com/blogs/1](http://www.example.com/blogs/1)）

我希望它显示最后两个或我放在他的首要论点中的许多。

我尝试将“来自博客的故事 id”与“来自博客的 *”两者都工作，但我想要做的也没有。我有两个博客条目，它只返回博客条目 1。

```
<?php

$sql2="select top 2 storyid from Blogs order by storyid desc";  

//echo "$sql<br/>"; 

$results2=mysql_query($sql,$connection); 

while ($result=mysql_fetch_assoc($results2)){ 

     $title=$result["Title"];  

     $storyid=$result["storyid"];

     $photo2=$result["Photo2"];

     $date=$result["Date"];

     ?>

                      <li>

<img src="/images/<?php echo $photo2; ?>" alt="Blog link" />

                          <div class="blog-details">

     <h4><a href="/blogs/<?php echo "$storyid"; ?>"><?php echo "$title"; ?></a></h4>

     <p><?php print date('M d Y', strtotime($date)); ?> - <a href="#">2 Comments</a></p>

<li>

<img src="/images/<?php echo $photo2; ?>" alt="Blog link" />

                          <div class="blog-details">

     <h4><a href="/blogs/<?php echo "$storyid"; ?>"><?php echo "$title"; ?></a></h4>

     <p><?php print date('M d Y', strtotime($date)); ?> - <a href="#">2 Comments</a></p>

     <?php

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T18:56:10.137

对于 MySQL，您必须使用 LIMIT 而不是 TOP。看看这是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:57:39.640

尝试修改您的查询以使用限制而不是顶部

```
SELECT storyid FROM Blogs ORDER BY storyid DESC LIMIT 0,2 
```

# html - 如何在图像周围环绕特定文本？

> ID：12021347
> 
> 赞同：1
> 
> 时间：2012-08-18T18:52:27.643
> 
> 标签：html, css, text, word-wrap

我正在尝试将文本环绕在图像周围，但没有成功。

[![](../Images/3de9af0d0b6f5b040c53c99920335378.png)](https://imgur.com/WrioF.png)

```
 <span>Zion Church</span>
    <div><a href="#"><img src="member.jpg"  width="" height="" class="floatleft"></a>
      jffhuhjherwkhrewkhurewyurewyretyunuyrkwugrnhky
      </div>

       img.floatleft {
       float: left;
       margin-left: 15px;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:59:09.667

“jffhuhjherwkhrewkhurewyurewyretyunuyrkwugrnhky”这个词太长，无法放在图像旁边，所以它向下移动。如果您想强制单词中断，请尝试添加`word-break: break-all`到容器元素的 CSS 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:59:45.553

```
<style type="text/css">
a.imagelink {
    float: left;
    margin-right: 10px;
    margin-bottom: 10px;
}
</style>

<span>Zion Church</span>
<div><a href="#" class="imagelink"><img src="member.jpg"  width="" height="" class="floatleft"></a> jffhuhjherwkhrewkhurewyurewyretyunuyrkwugrnhky </div> 
```

# jquery - 使用 jQuery 将 div 包裹在一组 td 周围

> ID：12021348
> 
> 赞同：7
> 
> 时间：2012-08-18T18:52:32.203
> 
> 标签：jquery, html-table

这是我正在处理的示例代码：

```
<td class="one">content</td>
<td class="two">content</td>
<td class="three">content</td>
<td class="four">content</td>
<td class="five">content</td> 
```

我可以使用以下方法将 div 包裹在第一个 td 周围：

```
$('td.one').wrap('<div class="td-one">'); 
```

但是，我现在需要将剩余的四个 td 包装在一个 div 中......所以想要的结果是：

```
<div class="td-one">
    <td class="one">content</td>
</div>
<div class="td-two-five">
    <td class="two">content</td>
    <td class="three">content</td>
    <td class="four">content</td>
    <td class="five">content</td>
</div> 
```

我将如何使用 jQuery 来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T18:55:44.000

约定是用一个类标记每个单元格，该类将作为一个包装器，因为 jQuery 选择器很方便。

```
<td class="td-one one">content</td>
<td class="td-two-five two">content</td>
<td class="td-two-five three">content</td>
<td class="td-two-five four">content</td>
<td class="td-two-five five">content</td> 
```

然后根据需要，您可以使用细胞组。

```
$(".td-two-five").hide(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T18:57:10.557

假设，为了有效的 HTML，您使用的是`div`元素而不是`td`元素，我建议：

```
<div class="one">content</div>
<div class="two">content</div>
<div class="three">content</div>
<div class="four">content</div>
<div class="five">content</div>

$('div.one').wrap('<div class="cell-one" />').parent('div').siblings().wrapAll('<div class="cell-two-five" />')​​​​​​​​​​​​​​​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/wtUp2/)。

# javascript - 按 [field] 值对 javascript 数组进行排序会给出错误的顺序

> ID：12021349
> 
> 赞同：0
> 
> 时间：2012-08-18T18:52:53.473
> 
> 标签：javascript, arrays, sorting

我正在实现 SlickGrid 并且我希望允许按列对值进行排序，这由 SlickGrid 通过对数组进行排序来支持，但是，当我对列（数组）进行排序时，它们没有按“正确”的顺序排列。

它们返回的顺序是 1,10,100,11,199,2,20,200,3,30,300....

尝试按标题对此网格中的任务进行排序时，问题会非常清楚地显示：http: [//mleibman.github.com/SlickGrid/examples/example-multi-column-sort.html](http://mleibman.github.com/SlickGrid/examples/example-multi-column-sort.html)

虽然我使用自己的排序规则，而不是示例中使用的规则：

```
data.sort(function(a, b){
          var result = 
              a[field] === b[field] ? 0 :
              a[field] > b[field] ? 1 : -1
          ; 
          return args.sortAsc ? result : -result;
      }); 
```

问题仍然存在。

我的问题只是如何对数组进行排序，以便标题（和其他数据）以正确的顺序显示：1,2,3,100,200,300...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T18:58:09.590

你的数字实际上是字符串，将被比较。为了防止这种情况，使用`parseInt(a[field],10) > parseInt(b[field],10)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T19:04:05.300

如果您只是想对相同类型的对象进行排序，那么没有问题……您的算法似乎是正确的。

但似乎您的数字实际上可能是字符串，因此它们被排序为字符串。您可以将它们解析为数字..即`parseInt() , parseFloat()`等。

但是，如果该字段是一个字符串，后跟一个数字，如链接中的示例，那么它将不起作用

`"data 20"`将始终小于`"data 3"`，因此您可能希望提取数字然后按字符串和数字排序。

# iphone - 方向变化期间平滑的纵横比变化

> ID：12021350
> 
> 赞同：0
> 
> 时间：2012-08-18T18:52:57.300
> 
> 标签：iphone, objective-c, ios, opengl-es-2.0, aspect-ratio

当 iPhone 屏幕方向发生变化时，我将 3D 渲染的投影矩阵调整为新的纵横比值。但是，在其中一个`willRotateToInterfaceOrientation`或中这样做`didRotateFromInterfaceOrientation`会导致过渡期间的宽高比错误，因为在动画开始时，屏幕尺寸仍然与以前相同，并在旋转时逐渐更改为新的边界。因此，我希望用于我的 3D 投影矩阵的纵横比值也逐渐变化。为此，我在以下位置检索旋转动画的开始时间和持续时间`willAnimateRotationToInterfaceOrientation`：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    _aspect.isChanging = YES;
    _aspect.startedChanging = [[NSDate date] retain];
    _aspect.changeDuration = duration;
    _aspect.oldValue = self.renderer.aspect;
    _aspect.currentValue = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);
} 
```

请注意，视图绑定大小已设置为动画后有效的新值。

然后，在 中`update`，我执行以下操作：

```
- (void)update
{
    if (_aspect.isChanging) {
        float f = MIN(1, [[NSDate date] timeIntervalSinceDate:_aspect.startedChanging] / _aspect.changeDuration);
        self.renderer.aspect = _aspect.oldValue * (1-f) + _aspect.currentValue * f;
    } else {
        self.renderer.aspect = _aspect.currentValue;
    }
    [self.renderer update];
} 
```

这已经很好地工作了，但是渲染方面的变化与实际的方面变化不匹配，这是因为我是线性插值的。因此，我试图通过在问题上抛出数学函数来匹配实际方面变化的缓和：我能得到的最好结果是添加以下行：

```
f = 0.5f - 0.5f*cosf(f*M_PI); 
```

这导致在旋转过程中几乎看不到图像的拉伸，但是如果你仔细观察，在两者之间的某个地方似乎仍然有点不匹配。我想，最终用户不会注意到它，但我在这里问是否有更好的解决方案，所以这些是我的问题：

*   旋转变化动画期间用于纵横比变化的实际缓动函数是什么？
*   有没有办法在方向更改动画期间获取视图的实际宽度和高度？这将允许我直接检索中间方面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T19:00:10.257

在第一个要点上，您可以使用[`CAMediaTimingFunction`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CAMediaTimingFunction_class/Introduction/Introduction.html)（可能使用`kCAMediaTimingFunctionEaseInEaseOut`）来获取定义过渡的曲线的控制点。然后只需使用三次贝塞尔曲线公式。

在第二个要点上，您可以使用`[[view layer] presentationLayer]`获取该视图的版本，`CALayer`其中所有当前动画都根据其当前状态应用。所以如果你检查它的尺寸，你应该得到当时的值——我猜如果你对`CADisplayLink`回调采取行动，那么你最多会落后一帧。

# applescript - 无法使用 AppleScript 获取或设置某些应用程序的窗口大小？

> ID：12021362
> 
> 赞同：12
> 
> 时间：2012-08-18T18:55:47.507
> 
> 标签：applescript

对于某些应用程序，例如 Notes 或 VLC，可以使用以下内容：

```
tell application "Notes" to get the bounds of the window 1 
```

如果我将上面的行放入一个文件并`sudo osascript thatfilename`用来调用它，它就可以工作。

但是对于一些应用，比如愤怒的小鸟空间，下面的就不行了？

```
tell application "Angry Birds Space" to get the bounds of the window 1 
```

给出错误：

```
execution error: Angry Birds Space got an error: Can’t get bounds of 
  window 1\. (-1728) 
```

该应用程序有什么特别的东西可以阻止它吗？（因为它是游戏还是没有窗口 1？）

我正在研究获取和设置某些窗口的`bounds`或只是`width`某些窗口的宽度（只是宽度，因为某些窗口似乎必须具有特定的纵横比，所以我认为如果纵横比不是，将其设置为特定的宽度和高度可能不起作用不正确）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-18T19:16:23.140

如果应用程序不可编写脚本，您将无法从中获取此类信息。如果您设置了“启用辅助设备访问”的**系统偏好设置 > 辅助功能**偏好设置，则您可以使用**系统事件**进程套件来获取/设置窗口大小，例如：

```
tell application "System Events" to tell application process "Angry Birds Space"
    get size of window 1
end tell 
```

注意：启用可访问性在 macOS 版本之间有很大差异。[如何在 Mac OS X 上启用辅助功能](https://mizage.com/help/accessibility.html) 是一个很好的指南。从 10.14 开始，您必须转到安全和隐私 > 辅助功能选项 > 隐私选项卡，然后在“允许以下应用程序控制您的计算机”中添加应用程序。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-18T19:09:51.323

愤怒的小鸟空间可以编写脚本吗？如果没有，告诉它做任何事情都不应该起作用。一个类似的例子是：

```
tell application "Preview" to get the bounds of the window 1 
```

正如 Red Menace 指出的那样，您可以像这样使用申请流程：

```
tell application "System Events" to tell application process "Preview"
    tell window 1
        set {size, position} to {{1280, 800}, {50, 50}}
    end tell
end tell 
```

# django - Django：为 LANGUAGES 设置设置 2 项元组有什么意义？

> ID：12021365
> 
> 赞同：1
> 
> 时间：2012-08-18T18:55:54.793
> 
> 标签：django, internationalization, django-settings

在项目的设置文件中，如果我们想限制 i18n 的语言选择，我们应该这样写：

```
gettext = lambda s: s

LANGUAGES = (
    ('Fr', gettext('French')),
    ('en', gettext('English')),
) 
```

但我写这个：

```
LANGUAGES = (
    ('fr', 'cool dudes'),
    ('en', 'Anglais')
    ) 
```

无论我在元组的第二项中放入什么（是否使用“gettext = lambda s: s”），Django 都会在渲染页面中的语言选择器中返回“Français”和“English”……我也尝试过原始该选择器标题中的语言数据：

```
{'code':'fr', 'name':'French', 'bidi':False, 'name_local':u'Fran\xe7ais'}
{'code':'en', 'name':'English', 'bidi':False, 'name_local':u'English'} 
```

这让我很困惑，那么为这个设置设置 2 项元组有什么意义呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:11:53.760

[*Settings*](https://docs.djangoproject.com/en/1.5/ref/settings/#languages)的[Django 文档](https://docs.djangoproject.com/en/1.5/ref/settings/#languages)*描述了第二个值以及如何使用它。*

 *> ...通过这种安排，django-admin.py makemessages 仍然会找到并标记这些字符串以进行翻译，但翻译不会在运行时发生 - 所以你必须记住将语言包装在真正的 gettext( ) 在运行时使用 LANGUAGES 的任何代码中。

双元组中的第二个字符串旨在成为人类可读的语言名称再现。在调用中包装第二个值，`gettext()`以便将它们标记为可翻译字符串。但是设置模块中没有正常的实现`gettext()`，因此您必须定义一个虚拟实现，如您的代码所示。如果您希望语言名称本地化，则需要在`gettext()`使用时将值包装为实际值。

您没有显示语言选择器 UI 的模板代码。你在用[`get_language_info()`](https://docs.djangoproject.com/en/1.5/topics/i18n/translation/#localized-names-of-languages)吗？文档给出的示例没有显示它，但在我看来，您需要将`name_local`元素包装在`_()`. （但我没有测试过这个。）

```
from django.utils.translation import get_language_info
li = get_language_info('de')
print(li['name'], _(li['name_local']), li['bidi']) 
```*

# c++ - 初始化具有保留容量的嵌套向量的子向量

> ID：12021373
> 
> 赞同：1
> 
> 时间：2012-08-18T18:56:53.737
> 
> 标签：c++, stl, vector

我想创建向量的向量，使每个子向量具有预定义的容量但未初始化。

这是不做我想做的代码：

```
#include <iostream>
#include <vector>

using namespace std;

int main()
{
    vector<int> tVec;
    tVec.reserve( 5 );
    cout<<"tVec Size: "<<tVec.size()<<", capacity: "<<tVec.capacity()<<endl;

    vector< vector<int> > tmpVecVec( 2, tVec );
    cout<<"tmpVecVec[0] Size: "<<tmpVecVec[0].size()<<", capacity: "<<tmpVecVec[0].capacity()<<endl;
    cout<<"tmpVecVec[1] Size: "<<tmpVecVec[1].size()<<", capacity: "<<tmpVecVec[0].capacity()<<endl;
} 
```

上面的输出是：

```
tVec Size: 0, capacity: 5
tmpVecVec[0] Size: 0, capacity: 0
tmpVecVec[1] Size: 0, capacity: 0 
```

我想知道如何获得以下结果

```
tVec Size: 0, capacity: 5
tmpVecVec[0] Size: 0, capacity: 5
tmpVecVec[1] Size: 0, capacity: 5 
```

当然，如果我用 resize 替换 reserve 或在 tVec 的构造函数中提供 size 5，我可以这样做。但是，我可以在不使用这些方法的情况下做到这一点吗？

链接到工作代码：http: [//ideone.com/PBXeP](http://ideone.com/PBXeP)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:35:56.930

如果您想要使用 s 描述的行为，这就是您应该使用`vector`的。（它可能无法满足您以后提出的所有要求。）

```
int size = 5, capacity = 5;
vector<vector<int>> tmpVecVec(size);
for (auto& vec: tmpVecVec)
   vec.reserve(capacity); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:05:56.727

```
#include "stdafx.h"
#include<vector>
using namespace std;
int main ()
{
    vector<vector<int>>baz(5);
    baz.reserve(5);
    baz[0].reserve(10);
    baz[0].reserve(20);

    printf(" %i ",baz.capacity());
    printf(" %i ",baz[0].capacity());
    printf(" %i ",baz[1].capacity());
    getchar();
    return 0;
} 
```

输出为 5、10 和 20

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T19:24:48.020

好吧，这是由您的库的实现定义的，所以它不是很好，但它可能适用于小元素计数：

```
vector<int>tVec(5, 0);
cout << "tVec Size: " << tVec.size() << ", capacity: " << tVec.capacity() << endl;
vector<vector<int> >tmpVecVec(2, tVec);
tmpVecVec[0].clear();
tmpVecVec[1].clear();
cout << "tmpVecVec[0] Size: " << tmpVecVec[0].size() << ", capacity: " << tmpVecVec[0].capacity() << endl;
cout << "tmpVecVec[1] Size: " << tmpVecVec[1].size() << ", capacity: " << tmpVecVec[0].capacity() << endl; 
```

哪个输出：

```
tmpVecVec[0] Size: 0, capacity: 5
tmpVecVec[1] Size: 0, capacity: 5 
```

在我的系统上使用 GNU 的 libstdc++ 和 LLVM 的 libc++。

但我认为 Reserve() 是更好的方法。

# security - 安全层字节精度？

> ID：12021374
> 
> 赞同：3
> 
> 时间：2012-08-18T18:56:53.770
> 
> 标签：security, xmpp, sasl, starttls

在[XMPP RFC](http://xmpp.org/rfcs/rfc6120.html)中，有两个`MUST`指令声明用于 STARTTLS 和 SASL 的 XML 不得包含任何空格，因为该规范声明为“安全层字节精度”。那是什么？

* * *

来自 RFC 的相关摘要：

> ...
> 
> 在 STARTTLS 协商期间，实体不得发送任何空格作为 XML 元素之间的分隔符（即，从发送时由 'urn:ietf:params:xml:ns:xmpp-tls' 命名空间限定的第一级元素的最后一个字符由发起实体，直到接收实体发送的由 'urn:ietf:params:xml:ns:xmpp-tls' 命名空间限定的第一级元素的最后一个字符）。**此禁止有助于确保适当的安全层字节精度。**
> 
> ... 在 SASL 协商期间，实体不得发送任何空格作为 XML 元素之间的分隔符（即，从由 'urn:ietf:params:xml:ns:xmpp-sasl' 限定的第一级元素的最后一个字符开始）由发起实体发送的命名空间，直到接收实体发送的由 'urn:ietf:params:xml:ns:xmpp-sasl' 命名空间限定的第一级元素的最后一个字符）。**此禁止有助于确保适当的安全层字节精度。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T21:55:02.820

该指令是为了确保正确处理字节流。想象一下，如果客户端在 XML 片段之后发送换行符，它可能会发送如下响应：

```
<response ... /> [LF] 
```

服务器将逐步解析 XML 直到最终的“>”，此时它将向`<success/>`客户端发送一个元素。现在客户端将发送一个新的流开始，即`<stream:stream ... >`使用安全层。这应该会导致服务器端的安全层中断，因为它会期望额外的 LF 字符成为安全层的一部分，而实际上它不是。

您可能会说服务器应该在发出`<success/>`数据包之前简单地清除其接收缓冲区，但这不是处理字节流的正确方法。毕竟，底层子系统可能延迟了该 LF 字符的传递，而服务器可能会在发送`<success/>`数据包后收到它。

当然，解决方案是让客户端不发送此类额外数据。您可以在邮件列表中阅读有关此特定讨论[的更多信息。](http://mail.jabber.org/pipermail/xmppwg/2003-October/001576.html)

# android - startActivityForResult 获取用户在地图上输入的位置

> ID：12021377
> 
> 赞同：1
> 
> 时间：2012-08-18T18:57:17.217
> 
> 标签：android, google-maps, android-intent, android-mapview

我正在处理一个需要知道用户输入位置的活动。理想情况下，用户将在我的活动中按下一个按钮，然后将用户发送到地图活动中，他们可以在其中放置图钉，然后返回我与别针位置的活动。

在 Android 中是否有一种简单的方法可以做到这一点，还是我必须制作自己的 MapView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:14:53.550

您必须制作自己的 MapView，然后使用 onTouchListener() 来检测地图上的点击，并根据点击位置，您将能够使用以下代码获取地理点：

```
class HelloGoogleMaps extends MapActivity
{
@Override
public void onCreate(Bundle savedInstanceState)
{
 List<Overlays> mapOverlays = map.getOverlays();
 //This is going to be your pointer (you can use whatever image you want as your indicator
 final Drawable drawable = this.getResources().getDrawable(R.drawable.indicator);
 map.setOnTouchListener(new View.OnTouchListener() {

 @Override
public boolean onTouch(View v, MotionEvent event) {
    if(event.getAction() == MotionEvent.ACTION_UP)
    {
    HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, HelloGoogleMaps.this);
    GeoPoint p = mapView.getProjection().fromPixels(
        (int) event.getX(), (int) event.getY());
    String lat = Double.toString(p.getLatitudeE6() / (Math.pow(10,6)));
    String lon = Double.toString(p.getLongitudeE6() / (Math.pow(10,6)));
    OverlayItem overlayitem = new OverlayItem(p, "Title text", "Body Text");
    itemizedoverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedoverlay);
    map.postInvalidate();
    Intent i = new Intent();
    i.putExtra("latitude", Double.parseDouble(lat));
    i.putExtra("longitude", Double.parseDouble(lon));
    this.setResult(RESULT_OK, i);
    finish();
    return true;
    }
}
});
} 
```

关于上面提到的 HelloItemizedOverlay 类，具体实现请参考这个[谷歌地图教程](https://developers.google.com/maps/documentation/android/hello-mapview)。这将在您在地图上单击的任何位置创建标记，并将结果（纬度、经度）返回到您调用它的原始活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:04:50.197

我将更加难以制作您的“自己的”地图视图。我认为您的意思是使用[ItemizedOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/ItemizedOverlay)类。您可以通过覆盖此类的 onTap() 方法将引脚放置到 mapview。

# javascript - jQuery：在动画属性上使用变量

> ID：12021379
> 
> 赞同：0
> 
> 时间：2012-08-18T18:57:19.713
> 
> 标签：javascript, jquery

我正在使用 animate 函数，我需要设置动画的 height 属性以匹配变量 pituus，因为内容高度取决于表单提交。

```
$.ajax({
    type: "POST",
    url: "http://www.kotisivut.name/quiz.php",
    data: dataString,
    dataType: "text",
    error: function() {
        alert('Nyt jotakin meni kyllÃ¤ pahemman kerran pieleen. YritÃ¤ uudelleen?');
    },
    success: function(data) {
        $("#resultcontainer").html(data);
        $("#service-test").fadeOut(1400);
        $("#resultcontainer").fadeIn(1500, function() {
            alert($("#page").height());
            var pituus = $("#page").height();
            $("#page").animate({
                "height": "pituus"
            }, 1600);
        });
    }
});​ 
```

但是，似乎我不能在那里传递变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:01:18.887

您不需要引号，更改为：

```
$("#page").animate({
    height: pituus
}, 1600); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:02:03.340

您正在传递字符串`"pituus"`。

只需更换：

```
 "height": "pituus" 
```

和：

```
 "height": pituus 
```

或者，因为您不需要在属性上加上引号，除非它有空格：

```
 height: pituus 
```

# php - 未解析自定义 php 扩展

> ID：12021380
> 
> 赞同：0
> 
> 时间：2012-08-18T18:57:29.980
> 
> 标签：php, apache, mime-types, cpanel, file-extension

我想将`.php`扩展名更改为 .foo，以便为访问者隐藏它。我的网络服务器安装了 cPanel，所以我登录并单击“MIME 类型”，然后输入以下内容：

```
MIME Type: application/x-httpd-php
Extension: foo 
```

问题是它没有被解析为 PHP，而是被下载（当您单击链接时，正在下载包含该文件所有代码的文件）

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:29:36.433

如果您拥有使用 .htaccess 所需的 AllowOverride 权限，请尝试

```
AddHandler application/x-httpd-php5 .php .foo 
```

出于某种原因，我们的 CentOS 服务器需要 x-httpd-php5，而我们的 WAMP 内部服务器只是像您一样使用 x-httpd-php（而 -php5 将不起作用）

我有一个基于 CPanel 的网站，我们使用上述规则将 .html 设置为解析为 php，甚至没有打扰 CPanel Mime 设置......但是还有其他方法可以确定服务器是否正在运行 PHP 所以你'并没有真正向任何知道他们在做什么的人隐瞒你使用 PHP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:27:31.233

添加`httpd.conf`或`vhost.conf`

```
<IfModule mime_module>
    AddType application/x-httpd-php .foo
</IfModule> 
```

但是解决问题的最好方法是使用`mod_rewrite`

# php - 使用 blob 数据类型从 mysql php 显示图像时出错

> ID：12021381
> 
> 赞同：2
> 
> 时间：2012-08-18T18:57:31.757
> 
> 标签：php, mysql, blob

我正在尝试使用 php 从我的 mysql 数据库中显示图像。图像未完全显示。它在尝试显示超过 200 kb 的图像时被剪切（由试验确定，但不太确定）。

HTML 代码：

```
<form enctype="multipart/form-data" action="insertimage.php" method="post" name="changer">
<input name="MAX_FILE_SIZE" value="10240000" type="hidden">
<input name="image" accept="image/jpeg|image/jpg|image|JPG|image/png|image/gif" type="file">
<input value="Submit" type="submit"> 
```

PHP代码：

```
<?php
    require('myconnect.php');

    if (isset($_FILES['image']) && $_FILES['image']['size'] > 0) { 

              // Temporary file name stored on the server
              $tmpName  = $_FILES['image']['tmp_name'];  

              // Read the file 
              $fp     = fopen($tmpName, 'r');
              $data = fread($fp, filesize($tmpName));
              $data = addslashes($data);
              fclose($fp);

              // Create the query and insert
              // into our database.
              $query = "Update whyangry.posts set Photo='$data' where Pid=2";
              $results = mysql_query($query, $con);

              // Print results
              print "Thank you, your file has been uploaded.";

    $sql = "SELECT * FROM helpme.posts WHERE Pid=2";
    $res = mysql_query($sql,$con);
    while ($res1=mysql_fetch_assoc($res))
    {   
    $content = $res1['Photo'];
    $id=$res1['Pid'];

    }
    echo '<img src="data:image/png|image/jpeg|image/gif;base64,' . base64_encode( $content ) . '" />';
    echo 'Hello world.';

    }
    else {
       print "No image selected/uploaded";
    }

    ?> 
```

在将 phpmyadmin 中的文件上传到 blob 数据类型时，我也收到以下错误

```
UPDATE `helpme`.`posts` SET `Photo` = 0xffd8ffe000104a46494600010201006000600000ffe10f074578696600004d4d002a0000000800060132000200000014000000564746000300000001000300004749000300000001003200009c9d00010000000e00000000ea1c0007000007f40000000087690004000000010000006a000000d4323030393a30333a31322031333a34373a34330000059003000200000014000000ac9004000200000014000000c0929100020000000335340000929200020000000335340000ea1c0007000007b40000000000000000323030383a30333a31342031333a35393a323600323030383a30333a31342031333a35393a3236000005010300030000000100060000011a00050000000100000116011b0005000000010000011e020100040000000100000126020200040000000100000dd90000000000000048000000010000004800000001ffd8ffe000104a46494600010100000100010000ffdb004300100b0c0e0c0a100e0d0e1211101318281a181616183123251d283a333d3c3933383740485c4e404457453738506d51575f626768673e4d71797064785c656763ffdb0043011112121815182f1a1a2f634238426363636363636363636363636363636363636363636363636363636363636363636363636363636363636363636363[...] 
```

MySQL 说：

# 2006 - MySQL 服务器已经消失

请让我知道如何解决此问题。问题是在显示图像时。我不知道是否存在一些尺寸问题，请在这里提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:38:32.063

使用`addslashes`与执行 SQL 查询的正确方法相去甚远。它并不总是能正确处理二进制数据。我不知道你在使用什么资源，但它教会了你非常坏的习惯。

请**不要** `mysql_query`在新应用中使用。这是 1990 年代遗留下来的界面，由于使用不正确会带来危险，该界面非常容易做到。最好`mysqli`在新项目中使用其中之一或 PDO。

您的查询应如下所示：

```
Update whyangry.posts set Photo=? where Pid=? 
```

您可以在执行查询时绑定到这些占位符并避免出现编码问题。有很多关于如何正确执行此操作的[示例。](http://bobby-tables.com/php)

# openssl - 使用 libcrypto 的 openssl ca 命令？

> ID：12021383
> 
> 赞同：0
> 
> 时间：2012-08-18T18:57:41.110
> 
> 标签：openssl

有没有办法使用 c api 调用而不是 shell 来完成以下命令？

openssl ca -in ic.csr -out ic.crt -keyfile ca.key

如果我可以在进程中执行此过程而不是生成 shell，那将更加安全。我查看了 openssl 的 API，但不清楚如何实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:34:48.683

是的，这是可能的。openssl 本身使用 api 来执行此操作：[http](http://cvs.openssl.org/fileview?f=openssl/apps/ca.c) ://cvs.openssl.org/fileview?f=openssl/apps/ca.c 。

基本上，读取 CSR，执行一系列`X509_REQ_get`调用以从 CSR 获取属性，并用于`X509_set`设置输出证书中的属性。

# encryption - HMAC-SHA 代码的字节顺序

> ID：12021384
> 
> 赞同：2
> 
> 时间：2012-08-18T18:57:44.457
> 
> 标签：encryption, sha, hmac, endianness

我正在传输 AES 消息。我的理解是： 1\. AES 算法将消息视为字节，并且是字节中立的。2\. 就传输和接收而言，初始化向量是端中立的。

我还在计算消息的 HMAC-SHA384 代码。从我的阅读来看，如果传输字节序（在我的情况下为大字节序）与机器字节序不匹配，HMAC-SHA384**似乎确实需要字节交换。**交换应该从字节 0 和 47、1 和 46 开始，等等？请问有谁比我更了解这个主题吗？

我目前正在使用 .NET HMACSHA384 类，但在另一端我将编写 C++ 代码并且还不知道哪个库将提供 HMAC 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:30:47.747

leppie 是对的，两者都是作为字节数组发送的。您可以非常确定接收到的字节数组将符合 NIST 规范和测试向量。所以在这种情况下你不应该过分担心字节顺序。

如果有人需要担心，那就是哈希函数的实现者。例如，NIST 不幸地指定了一个小端机器（英特尔处理器）作为 SHA-3 的参考平台。由于第一次迭代 (1.0) 中存在关于字节序的错误，Skein 的第一个版本具有不正确的测试向量。

# c# - 如何为 ASP.NET 项目自动翻译

> ID：12021388
> 
> 赞同：2
> 
> 时间：2012-08-18T18:58:22.647
> 
> 标签：c#, asp.net, .net, translation, globalization

我必须将整个项目翻译成其他语言。我决定通过本地资源文件来做。翻译将由外包公司以excel文件形式提供。

手动翻译过程将在以下步骤中执行：

1.  为页面创建本地资源文件
2.  对于页面上的每个文本
    *   如果文本不是标签或不包含 Id => 将文本格式化为标签内并具有 id（因为资源文件只能与 asp.net 控件一起使用）
    *   为标签添加注释以使用资源文件
    *   在资源文件中创建新项目并翻译到该标签

它将在项目中的每个页面重复。正如您可能注意到的大型项目，这将是一个非常无聊的过程。

我的第一个想法是创建将接受 excel 文件并执行整个翻译的 Visual Studio Addin/Extension

我的第二个想法是创建可以完成工作的 power shell 脚本。

第三个想法是通过 VS 宏来实现。不知道Macros是否支持加载文件（用于加载excel翻译）。

我想知道你的想法如何自动化这个翻译过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:26:31.893

您可以按照以下步骤执行此操作：

1.  制作模式占位符以识别要翻译的文本（注意 HTML 约束）

2.  由于数据大小语言占位符翻译，制作包含翻译（语言列，占位符列和翻译列）的数据库表

    法文 *名称* nom

3.  设置一个后期构建任务，该任务将使用语言参数启动您自己的可执行文件，该参数将连接数据库打开您的 aspx 文件夹并在所有 aspx 页面上进行迭代以进行翻译

# c++ - 转换为父类对象而不是引用时会出现什么不良结果？

> ID：12021390
> 
> 赞同：3
> 
> 时间：2012-08-18T18:58:42.133
> 
> 标签：c++, casting, polymorphism

这段代码是 Bruce Eckel 在他的书“Thinking in C++”第 14 章第 649 页中编写的。我不明白的是他在下面发表的评论 [强调添加]：

> `operator<<`for很有趣，`Child`因为它在其中调用`operator<<` for 的方式`Parent`：通过将`Child`对象转换为 a `Parent&` **（如果您转换为基类对象而不是引用，您通常会得到不希望的结果）**。

下面是对应的代码：

```
#include <iostream>
using namespace std;

class Parent
{
    int i;

    public:

    Parent(int ii) : i(ii) { cout << "Parent(int ii)\n"; }
    Parent(const Parent& b) : i(b.i) { cout << "Parent(const Parent&)\n"; }
    Parent() : i(0) { cout << "Parent()\n"; }

    friend ostream& operator<<(ostream& os, const Parent& b) { 
        return os << "Parent: " << b.i << endl; 
    }
};

class Member
{
    int i;

    public:

    Member(int ii) : i(ii) { cout << "Member(int ii)\n"; }
    Member(const Member& m) : i(m.i) { cout << "Member(const Member&)\n"; }

    friend ostream& operator<<(ostream& os, const Member& m) { 
        return os << "Member: " << m.i << endl; 
    }
};

class Child : public Parent
{
    int i;
    Member m;

    public:

    Child(int ii) : Parent(ii), i(ii), m(ii) { cout << "Child(int ii)\n"; }

    friend ostream& operator<<(ostream& os, const Child& c) { 
        return os << (Parent&)c << c.m << "Child: " << c.i << endl; 
    }
};

int main()
{
    Child c(2);
    cout << "calling copy-constructor: " << endl;
    Child c2 = c;
    cout << "values in c2:\n" << c2;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:01:39.853

是的，这没关系。Parent 和 Child 是多态的。作为子继承的客户，您可以将其`Child&`转换为`Parent&`

在表达式中`os << (Parent&)c`rhs`(Parent&)c`是类型`Parent&`所以`operator<<(ostream& os, const Parent& b)`将从中调用`operator<<(ostream& os, const Child& b)`

在 C++ 中，多态性仅在您具有引用或指针类型时才有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:13:09.873

不希望的结果是编译器必须创建 Child 对象的 Parent 部分的临时副本，将对该临时对象的引用传递给插入器，然后销毁该临时对象。这是很多搅动...

而且，正如@NeelBasu 暗示的那样，如果`Parent`有被覆盖的虚函数，`Child`则从插入器调用这些函数不会调用`Child`版本，因为传入的对象是一个`Parent`对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T19:52:51.723

这可能是对象切片的意思。也就是说，通过将对象复制到父类的实例中（而不是分配引用），您将丢失对象的某些部分。

也看看这个问题的答案：

*   [什么是对象切片？](https://stackoverflow.com/q/274626/1025391)

* * *

这是一个例子：（见[http://ideone.com/qeZoa](http://ideone.com/qeZoa)）

```
#include <iostream>
using namespace std;

struct parent {
  virtual const char* hi() const { return "I'm your father..."; }
};

struct child : public parent {
  const char* hi() const { return "No way!"; }
};

int main() {
  child c;
  cout << ((parent) c).hi() << endl;
  cout << ((parent&)c).hi() << endl;
} 
```

# java - JSOUP 获取无序列表

> ID：12021391
> 
> 赞同：5
> 
> 时间：2012-08-18T18:58:45.580
> 
> 标签：java, jsoup

我正在重新发布此消息。我正在尝试提取无序列表。在上一个问题中，我的格式不正确。我试图从中提取数据的这个网站的格式正确。

```
<ul>
<li>
<i>
<a class="mw-redirect" title="title1" href="yahoo.com">used to be a best email</a>
</i>
(1999)
</li>
<li>
<i>
<a title="title2" href="google.com">Best search enginee We Will Go</a>
</i>
(1999)
</li>
<li>
<i>
<a title="title3" href="apple.com">Best Phone</a>
</i>
(1990)
</li>
</ul> 
```

我想打印：

标题1

google.com

雅虎网

= 曾经是最好的电子邮件 最好的搜索电子邮件将转到 Bestphone

同样的所有 Hrefs。

我确实看到了 JSOUP 文档。

相关问题： [jsoup 以获取无序列表中的数据，](https://stackoverflow.com/questions/12015299/jsoup-to-get-the-data-in-a-unorderedlist) 但存在格式问题。

我按照建议尝试了，但它不起作用

我试过了：

```
Document doc = Jsoup.connect(url).get();             
Element link = doc.select("a").last();
String title1 = link.attr("title"); 
```

问题是这是一个包含一些信息的大页面。因为有很多无序列表..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T20:39:00.923

如果您能更好地格式化和指定您的要求，也许我的回答会更准确，这就是您要找的吗？

```
public static void main(String[] args) throws IOException
    {
        String html = "<ul><li><i><a class=\"mw-redirect\" title=\"title1\" href=\"yahoo.com\">used to be a best email</a></i>(1999)</li><li><i><a title=\"title2\" href=\"google.com\">Best search enginee We Will Go</a></i>(1999)</li><li><i><a title=\"title3\" href=\"apple.com\">Best Phone</a></i>(1990)</li></ul>";

        Document doc = Jsoup.parse(html);

        Elements links = doc.select("ul li i a");

        for (Element element : links) {
            System.out.format("%s %s %s\n", element.attr("title"), element.attr("href"), element.text());
        }
    } 
```

如果不在您的问题中添加示例输出部分。

**更新 ：**

这个怎么运作。这`ul li i a`是一个 CSS 选择器。这意味着将`a`位于内部`i`的每个元素都包含在`li`标签中，而标签中又包含在`ul`标签中。（可怕的解释）

你也会得到同样的结果`doc.select("a")`。但是具体会更好，因为您是从某个网站解析这些数据，因为链接可以位于具有不同 id/class 或其他任何内容的不同位置，并且您正在寻找这些特定的链接。

是的，如果所选元素确实具有标题、超链接和文本值，它将输出该数据。

# objective-c - 为什么我自己的对象不填充 NSMutableArray 属性？

> ID：12021392
> 
> 赞同：-2
> 
> 时间：2012-08-18T18:58:47.110
> 
> 标签：objective-c, nsmutablearray

嗨，我想实现自己的对象来管理我的数据，我试图创建两个类。

包含大陆对象的类大陆

这是我的实现：

```
@implementation OsContinents
@synthesize continentes;

-(id)init{
    return [super init];
}

-(NSUInteger)count{
    NSLog(@"%u",[continentes count]);
    return [continentes count];
}
-(void)add:(OsContinent *)continente{
    [continentes addObject:continente];
}

-(OsContinent *)getElementByIndex:(NSUInteger)index{
    return [continentes objectAtIndex:index];
}

-(void)deleteContinentByIndex:(NSUInteger)index{
    return [continentes removeObjectAtIndex:index];
}

-(void)deleteContinent:(OsContinent *)objContinent{
    return [continentes removeObject:objContinent];
}

-(NSMutableArray *)getAll{
    return continentes;
}

@end 
```

接下来我想用这样的“大陆”对象填充 *continents 属性。

```
OsContinents *continentesCollection = [[OsContinents alloc] init];
    for (NSString *strContinente in [data allKeys]) {
        OsContinent *con = [[OsContinent alloc] init];
        [con setContinente:strContinente];
            NSLog(@"%@",[con getContinente]);
        [continentesCollection add:con];
    }
    NSLog(@"%u",[continentesCollection count]); 
```

但是在计数方法中总是得到零。

注意： NSLog(@"%@",[con getContinente]) print de data OK，Continent Object 是 OK，问题出在 Continents Object 里面的“*continentes”——

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:27:18.493

您的初始化程序除了初始化超类之外什么都不做。用它来设置你自己的类：

```
- (id)init
{
    self = [super init];
    if (self)
    {
        _continentes = [[NSMutableArray alloc] init];
    }
    return self;
} 
```

否则，`continentes`会留下来`nil`。消息传递`nil`是有效的：方法根本不做任何事情，并返回 0。

如果您想完全隐藏底层的可变数组（这很好），那么不要在您的 .h 文件中将其作为属性宣传。相反，在你的开头`@implementation`，声明一个半私有的实例变量：

```
@implementation OsContinents
{
    NSMutableArray *_continentes;
} 
```

我说“半私有”是因为您始终可以使用运行时引擎来内省对象。但它会被隐藏起来，无法正常使用。如果您曾经子类化您的对象，您总是可以将实例变量声明从您的移动`@implementation`到您的`@interface`，以便子类可以使用它。

# sql-server - 如何使用 sql server 在单个查询中更改标志值？

> ID：12021393
> 
> 赞同：0
> 
> 时间：2012-08-18T18:58:55.220
> 
> 标签：sql-server

我有一个表，它包含像标志这样的列名，数据看起来像“Y”或“N”。

当我使用“从表名中选择标志”查询从该表中获取数据时，意味着它只显示“Y”或“N”。

但我需要的是，如果它是“Y”表示“是”或“N”表示“否”。

如果我们将使用存储过程意味着我们将使用“If”或“Case”条件轻松完成此概念。

但我想使用单个查询来获取这些数据。

我怎样才能做到这一点？

请朋友们帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:03:11.663

一种方法是使用 case 语句：

```
select (case when flag = 'Y' then 'Yes'
             when flag = 'N' then 'No'
             else 'Oops!'
        end) as FullFlag
from table t 
```

您也可以使用计算列来执行此操作。您可以定义表并将标志存储为位（尽可能高效），然后使用计算列来检索另一个值：

```
create table . . . 
    FlagBit bit,
    Flag as (case when FlagBit = 1 then 'Yes' else 'No' end)
    . . . 
```

# wpf - 调用线程无法访问此对象，因为不同的线程拥有它和 ApartmentState.STA

> ID：12021394
> 
> 赞同：-1
> 
> 时间：2012-08-18T18:58:56.347
> 
> 标签：wpf, multithreading

起初，当我启动调用以下函数 DrawDTSRanksChart() 的线程时，它给了我一个错误“调用线程必须是 STA，因为许多 UI 组件都需要这个”

将以下行添加到线程调用后

```
UpdateThread.SetApartmentState(ApartmentState.STA) 
```

“调用线程无法访问此对象，因为不同的线程拥有它”

注释行抛出两个异常

```
Public Update Thread As System.Threading.Thread

Private Sub DrawDTSRanksChart()
    Dim DTSRankingDiagram As New XYDiagram2D
    Dim series1 As New AreaFullStackedSeries2D 
    ChartControl1.Diagram = DTSRankingDiagram 'this line throws the exption
    DTSRankingDiagram.Series.Add(series1)
    series1.Points.Add(New SeriesPoint("Ranked 1.", DTSr1counter))
    series1.Points.Add(New SeriesPoint("Ranked 2.", DTSr2counter))
    series1.Points.Add(New SeriesPoint("Ranked 3.", DTSr3counter))
    series1.Points.Add(New SeriesPoint("Ranked >3.", DTSrm3counter))
End Sub

Private Sub save_Clicked(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles NormalUpdate.ItemClick
    UpdateThread = New System.Threading.Thread(AddressOf update)
    UpdateThread.SetApartmentState(ApartmentState.STA)
    UpdateThread.Start()
End Sub 
```

我只需要一个后台工作人员，所以我的 UI 不会挂起

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:06:51.990

解决方案

```
Dim MyDispatcher = Windows.Threading.Dispatcher.CurrentDispatcher
Private Delegate Sub UpdateUIDelegate() 
```

并将函数称为

```
 MyDispatcher.BeginInvoke(DispatcherPriority.Background, New UpdateUIDelegate(AddressOf DrawDTSRanksChart)) 
```

# java - 位掩码的规则是什么？就像 0xFF 与 0xFC

> ID：12021404
> 
> 赞同：6
> 
> 时间：2012-08-18T18:59:56.140
> 
> 标签：java, bit-manipulation, bit, bitmask

我正在开发一个创建程序生成的地牢的游戏，我发现了一个使用位掩码来检索房间号和门类型等内容的示例。

在示例中，他使用位掩码从每个图块的整数中提取详细信息。整数是这样分解的

```
0xLLSDRRET

L - is the Level Number
S - Denotes a special tile(Like Stairs)
D - is if its a door, and what type(Door, Arch, Trapped)
R - Room number
E - Flags an entrance to a room
T - Names the type of tile(Floor, Cooridor, Blocked) 
```

在此他使用位掩码来获取例如房间号，例如：

```
int[][] map = new int[40][40] 
int $ROOM_ID = 0x0000FF00;
System.out.println(map[x][y] & $ROOM_ID); 
```

现在有了这个，如果 map[x][y] 是例如 0x00001200 输出将是 1200。我理解掩码的这一部分。

但是在源代码中 $ROOM_ID 是 ACTUALLY 0x0000FFC0 并且我不明白 C 做了什么，因为我尝试了不同的值，但我似乎无法抓住 C 的功能，例如

```
0x00001200 output-> 1200
0x00001210 output-> 1200
0x00001220 output-> 1200
0x00001230 output-> 1200
0x00001240 output-> 1240
0x00001250 output-> 1240
0x00001260 output-> 1240
0x00001270 output-> 1240
0x00001280 output-> 1280
0x00001290 output-> 1280
0x000012A0 output-> 1280
0x000012B0 output-> 1280
0x000012C0 output-> 12C0
0x000012D0 output-> 12C0
0x000012E0 output-> 12C0
0x000012F0 output-> 12C0 
```

有更多位掩码知识的人可以解释为什么 0x0000FFC0 & 0x000012F0 = 12C0？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-18T19:12:35.993

你正在做的是按位算术。现在忽略高位（因为它们都是 0），只考虑两个十六进制值`0xFFC0`和`0x12F0`。然后 a 的`bitwise and`工作原理与以 10 为底的乘法完全一样。它在位级别上看起来像这样：

`0xFFC0 = 1111111111100000`

&

`0x12F0 = 0001001011110000`

这等于`0001001011100000 = 0x12F0`

与十六进制二进制相互转换的技巧就是这个。每两个十六进制数字是一个字节（即 8 位）。例如，`0xFF`是单个字节。`0xF (base-16) = 1111 (base-2) = 15 (base-10)`因此，您可以通过简单地为每个十六进制数字（即）写入位值来将其转换为二进制表示。因为我们知道每个字节总是正好是 8 位，所以每个十六进制数字都转换成它自己的 4 位二进制表示。然后你只需要记住十六进制值`0000`(0) 到`1111`(F) 的二进制表示并适当地替换它们。这个技巧在两个方向都有效。

就位掩码而言，这对于从位向量中提取值非常有用。位向量（通常）是一种简单的数据类型（即`int`,`char`等）。然后，每个特定位表示要启用或禁用的值类型。因此，如果我有一个位向量（例如，char = 单字节，因此请考虑这种位向量的数据类型），`0x01`并且我的最低位表示启用了一个门，那么这个位向量就有一个门。如果我的位向量的值为`0x02`，则没有启用门（但`0x03`里面有一扇门）。为什么是这样？您需要始终查看底层二进制表示以完全理解位向量/位掩码。

`0x01 = 00000001`, `0x02 = 00000010`,`0x03 = 00000011`

如您所见，在第一个和第三个值中，设置了最低位。然而，在第二个值中，设置了第二个最低位，而不是最低位。但是，您可以使用第二个值来表示另一个属性（尽管出于示例的目的，第二个值中没有门）。

然后请注意，从上述格式化的位向量中检索门的相应位掩码（巧合）将是`0x01`, `0x01 & 0x01 = 1`,`0x02 & 0x01 = 0`和`0x03 & 0x01 = 1`（再次返回二进制表示并相乘）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T19:02:52.053

注意二进制，而不仅仅是十六进制。 `C`十六进制是 12，十进制是`1100`二进制；F 是`1111`二进制的。所以

F & 1 == 1, F & 2 == 2, C & F == C, 0 & 0 == 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T19:10:38.983

`0xF`都是`1`位：`1111`。*任何*值 和的按位*与*是相同的值。换句话说，给定位置的*AND**保留*了来自另一个操作数的位。*`0xF`*`0xF`**

 ***所以在 中`0x0000FFC0 & 0x000012F0`，`F`数字保留了相应的数字：

```
0xF & 0x1 = 0x1
0xF & 0x2 = 0x2
0xC & 0xF = 0xC 
```

相似地：

```
0xFFC0 & 0x12F0 = 0x12C0 
```

您可能知道，任何值和的按位*与*`0`是`0`。因此，像这样的结构**仅**`0x0000FF00`用于保留第二个最低有效字节。

 **的使用`0xFFC0`实际上取决于其余代码如何使用该最低有效字节。在标志的解释中，最低有效字节的上半部分记录为：*房间入口*。不知何故，这在`System.out.println(map[x][y] & $ROOM_ID);`.

`0xC`是`1100`二进制的，因此通过包含`0xC0`在`0xFFC0`掩码中，代码还试图保留该最低有效字节的两个最高有效位 - 最右边 - 字节。请注意，在这两位上，您可以准确地编码*4 个*值。如果游戏是 2D 并且每个房间都是方形的 Zork 风格，这匹配了一个可以在 4 个罗盘点上进入的游戏设计。

至于*位掩码的规则*，你可以从[wiki 文章](http://en.wikipedia.org/wiki/Bitwise_operation)开始做得更糟：它很好地涵盖了基础知识。最终这都是[布尔代数](http://en.wikipedia.org/wiki/Boolean_algebra_%28logic%29)。*****

# java - java多线程不使用所有内核

> ID：12021405
> 
> 赞同：0
> 
> 时间：2012-08-18T19:00:01.420
> 
> 标签：java, multithreading, nlp, executorservice, stanford-nlp

我有一个多线程程序，它似乎并没有真正利用我机器中的所有内核。这是代码，任何输入都将受到高度赞赏。

> 主班

```
public class MainClass{
 public static void main(String [] args){
  Work work=new Work();
  work.doIt();
 }
} 
```

第二个类创建任务并将它们交给ExecutorService，这里是伪代码

```
public class Work{
 public void doIt() throws InterrputedException, Exception{
  map=get some data and put it in the map;
  ArrayList<Future<Integer>> list=new ArrayList<Future<Integer>>();
  ArrayList<WorkCallable>jobs=new ArrayList<WorkCallable>();
  for each entry in the map;
    jobs.add(new WorkCallable(entry);
  int numCores=Runtime.getRuntime().availableProcessors();
  ExecutorService executor=Executors.newFixedThreadPool(numCores);
  int size=jobs.size();
  for(int i=0;i<size;i++){
    Callable<Integer> worker=jobs.get(i);
    Future<Integer> submit=executor.submit(worker);
    list.add(submit);
  }
  executor.shutdown();
  while(!executor.isTerminated()) {}
  do something with the returned data;
}
} 
```

可调用类

```
public class WorkCallable implements Callable<Integer>{
 @Override
 public Integer call() throws Exception{
   Properties props=new Properties();
   props.put("annotators", "tokenize, ssplit, pos");
   StanfordCoreNLP pipeline=new StanfordCoreNLP(props);
   for(String id:entry.keySet()){
   Annotation document=new Annotation(entry.get(id));
   pipeline.annotate(document);

   process the data;
   return an integer value;
 }
} 
```

问题是，当我检查有多少线程正在运行时，我发现只有很少，而且执行程序似乎没有利用理想的内核！

我希望描述清楚。

**更新**：

*   使用的库是 StanfordCoreNLP 包，用于处理作为 documentID 及其内容的 Map 传递给 Callable 对象的文本。处理数据不是问题，因为我在不包含 StanfordCoreNLP 库的情况下工作得很好。换句话说，文档的浅层处理可以正常工作并利用所有内核。但是当我包含这个包时它没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:55:38.087

如果您使用的是 Windows，那么 JVM 将委托线程调度 NT 内核。POSIX 类型的操作系统直接将操作系统线程映射到 JVM 并协同调度。

但是，无论发生什么，您都无法确保线程在内核/处理器之间均匀分配。当您启动第 4 个线程时，操作系统上的其他东西可能正在核心 4 上运行，因此它可能会被安排到另一个核心。或者调度程序可以决定将它们堆叠在同一个核心上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:57:25.617

此时，根据您提供的信息，我怀疑线程之间存在一些争用，因此很可能某些线程被阻塞/等待。要验证这一点，您可以使用 JVisual VM 并进行线程转储（Jconsole 也是一个选项）。JVisual VM 是监控 java 应用程序的实用程序，并附带 JDK。如果您之前没有使用过它，这将是您花时间学习它的好投资，因为它非常有用且易于使用。

[有关 JVisualVM，请参见此处](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/index.html)

1.  使用 JVisual VM Take Thread dump 连接到您的程序。
2.  它会在那个时间为您提供程序中线程的状态，如果存在争用和/或阻塞，使用线程转储很容易发现。
3.  如果您无法弄清楚线程转储中发生了什么，请随意将其粘贴到此处，尽管有许多资源可供您了解网络上的线程转储

另一方面，正如@Marko 指出的那样，您可以更有效地处理执行程序关闭，我会说 ExecutorCompletionService 将满足您的要求并使代码更加优雅和易于阅读。[在此处查看 ExecutorCompletionService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorCompletionService.html)一旦您确定空闲内核可能是您可以重构以使用 ECS。

# bash - Bash：大括号扩展优先级和循环范围

> ID：12021412
> 
> 赞同：2
> 
> 时间：2012-08-18T19:00:20.583
> 
> 标签：bash, shell, operators, operator-precedence

谷歌搜索了一个小时左右，以获得对以下内容的简单解释。在什么时候：

```
for i in $(eval echo "{01..30}"); do
    echo $i
done 
```

... Bash 是否评估大括号的“..”组件？

谢谢，

扎克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T19:12:23.367

您可以`set -x`在自己的 shell 脚本中使用来查看它（[调试 Bash 脚本](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_02_03.html)）

```
set -x
for i in $(eval echo "{01..30}"); do
    echo $i
done 
```

这是输出：

```
++ eval echo '{01..30}'
+++ echo 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30
+ for i in '$(eval echo "{01..30}")'
+ echo 1
1
+ for i in '$(eval echo "{01..30}")'
+ echo 2
2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:09:11.223

为了回答您的问题，该`eval`命令带有两个参数：字符串“echo”和字符串“{01..30}”。当`eval`评估由这两个字符串形成的语句时，会发生大括号扩展。

# css - Firefox 中的 CSS 过渡效果

> ID：12021414
> 
> 赞同：0
> 
> 时间：2012-08-18T19:00:38.887
> 
> 标签：css, firefox, accordion, transition

我正在尝试用 CSS 制作手风琴。过渡（当鼠标悬停时）在 Chrome 和 Opera 中运行良好。但是 Firefox 没有过渡，

下面是有问题的 CSS 部分。

```
 transition : height 0.9s ease-in-out;
  -moz-transition: height 0.9s ease-in-out;
      -webkit-transition: height 0.9s ease-in        -out;
   -o-transition: height 0.9 ease-in-out; 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:24:16.100

```
-webkit-transition: height 0.9s ease-in-out;
-moz-transition: height 0.9s ease-in-out;
-ms-transition: height 0.9s ease-in-out;
-o-transition: height 0.9s ease-in-out;
transition: height 0.9s ease-in-out; 
```

# android - Android 浏览器不会为特定 url 发起连接

> ID：12021417
> 
> 赞同：0
> 
> 时间：2012-08-18T19:01:06.023
> 
> 标签：android, http, proxy, timeout, kindle-fire

我正在尝试从标准浏览器和 Dolphin 浏览器从 Kindle Fire访问[http://feeds.boston.com/boston/bigpicture/index 。](http://feeds.boston.com/boston/bigpicture/index)

我使用 Fiddler 作为代理，当我从浏览器中的 Kindle Fire请求[http://www.boston.com/bigpicture/index.xml时，我在 Fiddler 中看到了请求，它重定向到](http://www.boston.com/bigpicture/index.xml)[http:/ /feeds.boston.com/boston/bigpicture/index](http://feeds.boston.com/boston/bigpicture/index)和浏览器超时，在 Fiddler 中没有任何请求迹象。

我也尝试直接导航到 url 而没有重定向，结果相同。

www.boston.com 网站运行良好，我在 Fiddler 以及其他网站和应用程序中看到了请求。

如果没有直接连接的代理，请求也会超时（这就是我尝试使用代理进行调试的原因）。

该 URL 在桌面上可以正常工作。

这是 Android / Kindle Fire 的一些已知行为吗？是否有规则或黑名单为什么它不会发出请求和超时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:11:27.023

这是一个奇怪的 DNS 问题。我已将 feeds.boston.com 地址添加到 Kindle Fire 的 hosts 文件中，它可以正常工作。

# linux - 微秒用户空间忙等待循环

> ID：12021420
> 
> 赞同：2
> 
> 时间：2012-08-18T19:01:30.377
> 
> 标签：linux, time

对可以在用户空间使用的 linux/delay.h 中的 udelay 之类的函数有什么建议吗？

从用户空间，我想每 10 微秒生成一次事件。准确性不是很重要，但我希望尽可能接近。像 usleep 这样的东西不起作用，因为上下文切换开销。现在我有一个繁忙的等待循环，它使用 clock_gettime 和 CLOCK_MONOTONIC 时钟，它不断地将当前时间与开始循环之前的时间进行比较，并在经过的微秒数过去后返回。它比使用 usleep 效果好得多，但是如果不编写内核代码（或切换到实时 linux），我能做得更好吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:06:29.943

`select(2)`超时且没有 FD 应该是一个不错的选择。只要记住每次调用前都要初始化超时。

# c# - ListBox中的用户控件，用户控件中的绑定不起作用

> ID：12021421
> 
> 赞同：0
> 
> 时间：2012-08-18T19:01:38.300
> 
> 标签：c#, windows-phone-7, xaml

一切都发生在 Windows Phone 7.1 开发环境中。

在我的 MainPage.xaml 中，我有 ListBox：

```
<ListBox x:Name="LottoListBox" ItemsSource="{Binding lottoResults}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <local:LottoResults Date="{Binding Date}" Results="{Binding Results}" />
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

如您所见，作为 ItemSource 我设置了“lottoResults”集合。

```
public ObservableCollection<Lotto> lottoResults { get; set; } 
```

“乐透”类：

```
public DateTime Date
{
    get { return _date; }
    set
    {
        _date = value;
        NotifyPropertyChanged("Date");
    }
}
private DateTime _date;

public Structures.DoubleResult[] Results
{
    get { return _results; }
    set
    {
        _results = value;
        NotifyPropertyChanged("Results");
    }
}
private Structures.DoubleResult[] _results;

public event PropertyChangedEventHandler PropertyChanged;

private void NotifyPropertyChanged(string propertyName = "")
{
    if(PropertyChanged != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

DoubleResult 结构包含两个字段 - int 和 bool，但现在它并不重要，因为我没有对“结果”字段设置任何绑定。

让我们看看我的用户控件“LottoResults”：

```
public DateTime Date
{
    get { return (DateTime)GetValue(DateProperty); }
    set { SetValue(DateProperty, value); }
}

public static readonly DependencyProperty DateProperty =
    DependencyProperty.Register("Date", typeof(DateTime), typeof(LottoResults), new PropertyMetadata(new DateTime(), dateChanged));

public static void dateChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    LottoResults control = d as LottoResults;
    MessageBox.Show("DateChanged!");
    // some magical, irrelevant voodoo which only I can understand. ;-)
} 
```

现在是一些 XAML，我在其中绑定“日期”字段。

```
<TextBlock Grid.ColumnSpan="6" Foreground="Black" FontSize="34" FontWeight="Bold" Text="{Binding Date, StringFormat='{}{0:yyyy.MM.dd}'}" /> 
```

惊喜，惊喜 - 绑定不起作用！好吧，在用户控制中确实如此。在 DependencyProperty 作为默认值，我设置了“new DateTime()”，这是 0001.01.01，并且正是在 TextBlock 中显示的。

在我的 lottoResults 集合（ListBox 的 ItemsSource）中，我有 3 个项目（它们都没有日期“0001.01.01”）。ListBox 显示 3 个项目，但显示的日期始终为 0001.01.01。更重要的是，“dateChanged()”方法永远不会被执行（我没有得到消息框，也没有在断点处停止），所以我猜“日期”字段永远不会从绑定中接收到新值。

但有趣的是，如果我将 TextBlock 的代码从用户控件复制到 MainPage.xaml（所以现在它直接从“lottoResults”集合中获取值）绑定确实有效！

```
<ListBox x:Name="LottoListBox" ItemsSource="{Binding lottoResults}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <TextBlock Foreground="Black" FontSize="34" FontWeight="Bold" Text="{Binding Date, StringFormat='{}{0:yyyy.MM.dd}'}" />
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

那么，这是为什么呢？我在死胡同。我花了半天的时间来解决这个问题，但没有任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:49:35.183

Lotto 类需要[实现 INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms229614.aspx)这将导致 UI/View 在 Lotto 对象属性更改时发出信号。

如果结果集合发生变化（添加、删除项目），您也需要在那里使用 ObservableCollection 而不是数组。

# linux - 将文件写入 ext4 卷后，除了刷新之外，我还需要做更多的事情来保证文件被完全写入吗？

> ID：12021423
> 
> 赞同：1
> 
> 时间：2012-08-18T19:01:50.967
> 
> 标签：linux, ext4

我编写了一些代码，其中非常重要的一点是文件的内容被写入磁盘

我正在使用 ext4，这样日志就可以保证卷的完整性

为了保证我的文件实际上在磁盘上，并且在发生崩溃时重播日志时不易受到错误的影响，除了flush（）之外，我还需要做其他事情吗？我相信就是这样，刷新的合同是内容在磁盘上，并且所有缓冲区/缓存都被刷新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:25:26.880

`flush()`确保所有进程看到文件处于相同状态，但不保证所有字节都已写入磁盘。需要进一步调用`fsync()`或`fdatasync()`。

# .net - Linq to SQL：查看到表关联不生成代码

> ID：12021424
> 
> 赞同：6
> 
> 时间：2012-08-18T19:01:51.010
> 
> 标签：.net, sql-server, linq-to-sql

我有一个带有一堆表和一些视图的 dmbl，我在设计器中设置了从视图到表的关联。然后在代码中，我尝试编写一些“使用”该关联的代码，但它不存在。我查看了设计器文件，也没有看到任何内容。

奇怪的是，我之前在不同的 dbml 和项目中使用这些相同的表和视图成功完成了此操作。改变的只是我们将所有东西从 2005 SQL Server 转移到 2008R2 Box。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T19:03:52.980

如果您的“视图”没有主键，Linq2SQL 会执行此操作。所以添加一个伪 L2S 可以使用。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T00:56:42.247

可以将视图添加到设计中，并且可以在它们与其他表/视图之间添加手动关联。但是，除非您修改视图属性以定义“主键”，否则关联不会在代码中创建父/子属性。

[https://conficient.wordpress.com/2008/06/04/linq-to-sql-faq-associations-to-views/](https://conficient.wordpress.com/2008/06/04/linq-to-sql-faq-associations-to-views/)

# c# - NHibernate Join Table Mapping 有重复的对象

> ID：12021428
> 
> 赞同：1
> 
> 时间：2012-08-18T19:02:45.003
> 
> 标签：c#, nhibernate, fluent

我正在尝试映射三个表之间的关系。

**类别**

```
CategoryId
ParentId 
```

**语言环境**

```
LocaleId
LocaleCode 
```

**类别语言环境**

```
ID
LocaleId
CategoryId
CategoryName 
```

我也有一个结构的对象

**类别**

```
CategoryId
CategoryName
ParentId 
```

这是我的映射

```
public CategoryMap()
    {

        Id(x => x.CategoryId);           
        Map(x => x.ParentId);            
        Join("CategoryLocale", m =>
        {               
            m.KeyColumn("CategoryId");
            m.Map(x => x.CategoryName);
            m.References(x => x.Locale,"LocaleId");
        });
    } 
```

查询很简单

```
var query = session.QueryOver<Category>(); 
```

我得到了正确数量的返回类别，并且生成的 SQL 是正确的并返回所有可能的组合，但是映射有重复，所以我不是三个不同的语言环境，而是在相同的语言环境下三次获得相同的类别。

有任何想法吗？

我有一个 CategoryLocale 对象，它映射到一个类别和一个在 CategoryName 被放置在 CategoryLocale 下时起作用的语言环境，但是我需要正确填写它自己的 Category，或者在 Category 对象中使用具有正确值的 Locale 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:19:22.027

关于什么

```
public class Category
{
    public virtual IDictionary<Locale, string> Names { get; private set; }

    public virtual string Name { get { return Names[GetActiveLocaleFromSomewhere()]; } }
}

public CategoryMap()
{
    HasMany(x => x.Names)
        .Table("CategoryLocale")
        .KeyColumn("CategoryId")
        .AsEntityMap("LocaleId")
        .Element("CategoryName")
} 
```

# .net - 在 .NET 应用程序中查看所有调用的最简单方法（分析/检测）

> ID：12021430
> 
> 赞同：5
> 
> 时间：2012-08-18T19:03:02.397
> 
> 标签：.net, profiling, instrumentation, il

我正在尝试编写一个 .NET 应用程序，它可以分析其他 .NET 进程并列出它们进行的所有调用，包括传递的参数的值。

我知道用“ICorProfilerCallback2”之类的东西编写我自己的分析器可以帮助解决这个问题，但这似乎是一项非常具有挑战性的任务。在开始之前，我想确定这是做到这一点的唯一方法。

我研究了开源 .NET 分析器等，例如 part-cover、CLR Profiler v4.0 等，但它们似乎都没有提供托管 API 来执行此操作，而且它们所做的远远超出我的需要（内存分析等.)。

有没有其他方法可以做到这一点？进行这种分析的更简单方法？我在这里有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T21:53:45.137

我们曾经使用[Mono Cecil](http://www.mono-project.com/Cecil)编写过这样的工具。

使用 Cecil，您可以将 IL 代码发送到现有程序集中。这样，您可以在每个方法的开头添加对您的托管 DLL 的调用。

然而，IL 注入非常棘手，因为需要考虑很多情况，但它是可行的。好的一面是：一旦调用了托管 DLL，您的所有代码都可以以高级方式（例如 C#）编写，因此“唯一”棘手的部分是将调用编织到您的 API。

使用 Cecil 工具的工作流程可能如下所示：

1.  获取您的二进制文件（构建或下载）
2.  使用您自己的使用 Cecil 的后编译器来检测它们
3.  运行修改后的程序集，然后调用您的托管 DLL
4.  您的 DLL 存储或分析数据

# security - powershell 在哪里保存 set-executionpolicy 设置？

> ID：12021438
> 
> 赞同：4
> 
> 时间：2012-08-18T19:05:05.097
> 
> 标签：security, powershell

我正在构建一些服务器，需要在它们上运行一些 powershell 脚本。但是，我需要在**每台**服务器`Set-ExecutionPolicy -ExecutionPolicy remotesigned -Force`上手动运行该命令。因为我无法在脚本中设置执行策略。我想知道 PowerShell 将执行策略设置保存在哪里，并想直接更改它。那可能吗？

 **谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T01:30:53.977

ExecutionPolicy 不是存储在单个位置的单个设置。ExecutionPolicy 有多个范围，每个范围的设置和存储方式都不同。运行`Get-ExecutionPolicy -List`以查看所有不同的范围。

在获取/设置不同的范围时，使用 ProcMon 监视正在读取/写入的键，我想出了这个列表：

*   **MachinePolicy**和**UserPolicy**只能通过组策略设置。我认为钥匙最终在下面`HKLM\Software\Policies\Microsoft\Windows\Powershell`
*   **进程**似乎没有存储在 reg 密钥中。这是有道理的，因为它仅适用于当前流程。可能只是存储在内存中。
*   **CurrentUser**存储在`HKEY_CURRENT_USER\Software\Microsoft\PowerShell\1\ShellIds\Microsoft.PowerShell [ExecutionPolicy]`注意您可以通过以下方式为特定用户（即除了当前用户）设置它`HKEY_USERS`
*   **LocalMachine**存储在`HKLM\SOFTWARE\Microsoft\PowerShell\1\ShellIds\Microsoft.PowerShell [ExecutionPolicy]` 这是运行时的默认范围`Set-ExecutionPolicy`。

请参阅[http://technet.microsoft.com/en-US/library/dd347641.aspx](http://technet.microsoft.com/en-US/library/dd347641.aspx)和[http://go.microsoft.com/fwlink/?LinkID=113394](http://go.microsoft.com/fwlink/?LinkID=113394)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T19:12:30.853

HKLM\SOFTWARE\Microsoft\PowerShell\1\ShellIds\Microsoft.PowerShell 键名为 ExecutionPolicy（类型：REG_SZ）。在您的情况下，该值应该是 RemoteSigned。**

# graph - 如何在点语言中强制节点重叠指定数量（graphviz）

> ID：12021439
> 
> 赞同：13
> 
> 时间：2012-08-18T19:05:14.800
> 
> 标签：graph, visualization, graphviz, dot, graph-visualization

我是graphviz中点布局的新手。我正在尝试用点语言指定一个图形，并且我希望某些节点集被强制重叠一定数量（比如它们的 70% 的区域或具有这种效果的东西）。我知道我可以强制节点的 x 和 y 位置，从而导致重叠，但在这种情况下，我正在编写一个 C# 程序，给定某些输入会吐出图形的相关点脚本，所以节点的数量等是没有硬编码，所以我无法想出一个方案来硬编码所有节点的 x 和 y 位置。对此的任何帮助将不胜感激！

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:11:46.333

正如@ninjalj 指出的那样，graphviz 的一个巧妙之处在于，它允许您很好地表示图形并消除重叠之类的“缺陷”或“不完美”——例如，通过使用 和 等[`overlap`](http://www.graphviz.org/doc/info/attrs.html#d%3aoverlap)属性[`overlap_scaling`](http://www.graphviz.org/doc/info/attrs.html#d%3aoverlap_scaling)。

但是，您指出：

> 我知道我可以强制节点的 x 和 y 位置，从而引起重叠，但在这种情况下，我正在编写一个 C# 程序，给定某些输入会吐出图形的相关点脚本，所以节点的数量等是没有硬编码，所以我无法想出一个方案来硬编码所有节点的 x 和 y 位置。

所以，正如我所看到的，你说的是你知道当你得到一个特定的输入时，你将生成一个特定的图——换句话说，你知道节点（和集群）的数量是输入。这让我认为@Daniel Kinsman 的建议可能是适合您的方式 - 也就是说，为特定目的实现您自己的 DOT 布局引擎。

我并不是说这很简单，但是，这并非不可能，当然所需的逻辑很大程度上取决于您的应用程序的目标。

但是在进行任何实现之前，我认为您应该先看看 graphviz 中已经内置的[`cluster`功能](http://www.graphviz.org/content/cluster)（@Daniel Kinsman 也指出了这一点），并考虑是否真的值得付出额外的努力来实现自定义 DOT 布局引擎，或者如果集群功能对您来说可能就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T01:06:51.557

这可能有用：您可以使用 graphviz 的[点](http://www.graphviz.org/doc/info/output.html#d%3adot)输出格式，它输出节点及其显式布局位置。然后你可以读回它，并改变它们的大小。如果没有一些您想要的演示图像，很难判断这是否有助于您的特定需求。此外，这可能不是最好的解决方案。只是想我会将它添加到您可以使用的工具库中。

# macos - 每个 Mac 配置文件的 iCloud

> ID：12021443
> 
> 赞同：0
> 
> 时间：2012-08-18T19:05:28.240
> 
> 标签：macos

我有一个 MacBook Air 设置，其中包含两个要连接到 iCloud 的配置文件。有没有办法将每个配置文件指向不同的 iCloud 帐户？如果是这样，我可以在帐户之间共享文件吗？并且，如果没有，将每个配置文件的内容单独保存在 iCloud 上的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T21:47:31.407

为什么不。他们是完全不同的用户，等等多用户系统，每个帐户都有自己的设置，并且信息将保留在该用户的钥匙串中。

# mysql - 带有子选择的 MySQL 查询性能 - 具有数百万行的表

> ID：12021445
> 
> 赞同：2
> 
> 时间：2012-08-18T19:05:29.590
> 
> 标签：mysql, sql, indexing, query-performance

我知道有很多关于 sql 查询性能改进的问题，但是我无法使用这些问题的答案来提高我的查询性能（足够了）。

因为我想要比 rsync 和 fslint 更灵活的东西，所以我编写了一个小型 java 工具，它可以遍历文件树并将路径和校验和存储在 mysql 数据库中。

你会在这里找到我的表结构： [http](http://code.google.com/p/directory-scanner/source/browse/trunk/sql/create_table.sql) ://code.google.com/p/directory-scanner/source/browse/trunk/sql/create_table.sql - 起初我只有一个表，但后来我想我如果我将多余的很长的目录路径字符串移动到一个单独的位置并使其成为 1:n 关系，可以节省大量空间

我已经定义了这两个索引：

```
CREATE INDEX files_sha1 ON files (sha1);
CREATE INDEX files_size ON files (size); 
```

现在困扰我的查询是： [http ://code.google.com/p/directory-scanner/source/browse/trunk/sql/reporingQueries.sql](http://code.google.com/p/directory-scanner/source/browse/trunk/sql/reporingQueries.sql)

其中最糟糕的是最后一个，它很有可能总是返回一个空集（sha1 冲突和错误地插入了多个文件）：

```
SELECT 
    d.path, 
    d.id, 
    f.filename, 
    f.id, 
    f.size, 
    f.scandate, 
    f.sha1, 
    f.lastmodified 
FROM files f 
INNER JOIN directories d 
    ON d.id = f.dir_id 
WHERE EXISTS ( /* same sha1 but different size */ 
    SELECT ff.id 
    FROM files ff 
    WHERE ff.sha1 = f.sha1 
    AND ff.size <> f.size 
) 
OR EXISTS ( /* files with same name and path but different id */ 
    SELECT ff2.id 
    FROM files ff2 
    INNER JOIN directories dd2 
        ON dd2.id = ff2.dir_id 
    WHERE ff2.id <> f.id 
    AND ff2.filename = f.filename 
    AND dd2.path = d.path 
) 
ORDER BY f.sha1 
```

只要我只有 20k 行（在创建索引之后），它在不到一秒钟的时间内就运行得很好，但是现在我有 750k 行，它会运行几个小时，mysql 完全用掉了我的一个 cpu 核心全程。

这个查询的解释给出了这个结果：

```
id ; select_type ; table ; type ; possible_keys ; key ; key_len ; ref ; rows ; filtered ; Extra
1 ; PRIMARY ; d ; ALL ; PRIMARY ; NULL ; NULL ; NULL ; 56855 ; 100.0 ; Using temporary; Using filesort
1 ; PRIMARY ; f ; ref ; dir_id ; dir_id ; 4 ; files.d.id ; 13 ; 100.0 ; Using where
3 ; DEPENDENT SUBQUERY ; dd2 ; ALL ; PRIMARY ; NULL ; NULL ; NULL ; 56855 ; 100.0 ; Using where
3 ; DEPENDENT SUBQUERY ; ff2 ; ref ; dir_id ; dir_id ; 4 ; files.dd2.id ; 13 ; 100.0 ; Using where
2 ; DEPENDENT SUBQUERY ; ff ; ref ; files_sha1 ; files_sha1 ; 23 ; files.f.sha1 ; 1 ; 100.0 ; Using where 
```

我的其他查询对于 750k 行也不快，但至少在 15 分钟或类似的时间内完成（但是，我希望它们也能处理数百万行......）

更新：感谢 radashk 的评论，但您建议的索引似乎是由 mysql 自动创建的 -->

```
"Table","Non_unique","Key_name","Seq_in_index","Column_name","Collation","Cardinality","Sub_part","Packed","Null","Index_type","Comment","Index_comment"
"files","0","PRIMARY","1","id","A","698397","NULL","NULL",,"BTREE",,
"files","1","dir_id","1","dir_id","A","53722","NULL","NULL",,"BTREE",,
"files","1","scanDir_id","1","scanDir_id","A","16","NULL","NULL","YES","BTREE",,
"files","1","files_sha1","1","sha1","A","698397","NULL","NULL","YES","BTREE",,
"files","1","files_size","1","size","A","174599","NULL","NULL",,"BTREE",, 
```

UPDATE2：感谢欧根·瑞克！我认为您的回答可以很好地替代此查询，因为它很可能会返回一个空集，我只会选择数据来显示用户，以便稍后在另一个查询中描述问题。为了让我真的很高兴，如果有人也可以看看我的其他查询，那就太好了：D

UPDATE3：Justin Swanhart 的回答启发了我以下解决方案：与其让查询来检查无意中多次插入的目录和文件，不如创建如下的唯一约束：

```
ALTER TABLE directories ADD CONSTRAINT uc_dir_path UNIQUE (path);
ALTER TABLE files ADD CONSTRAINT uc_files UNIQUE(dir_id, filename); 
```

但是，我想知道这会对插入语句的性能产生多大的负面影响，有人可以对此发表评论吗？

更新4：

```
ALTER TABLE directories ADD CONSTRAINT uc_dir_path UNIQUE (path); 
```

不起作用，因为它太长了..

```
ERROR 1071 (42000): Specified key was too long; max key length is 767 bytes 
```

更新5：

好的，这是我将用于替换我在最初问题中引用的查询的解决方案：

对于第一部分，寻找 sha1 碰撞，我将使用这个：

```
SELECT sha1
FROM files
GROUP BY sha1
HAVING COUNT(*)>1
AND MIN(size)<>MAX(size) 
```

如果它返回任何内容，我将使用另一个查询 WHERE sha1 = 选择详细信息

我猜这个查询会运行得最好，定义了这个索引：

```
CREATE INDEX sha1_size ON files (sha1, size); 
```

为了验证不存在重复的目录，我将使用它，因为他不允许约束（参见上面的 UPDATE4）：

```
SELECT path
FROM directories
GROUP BY path
HAVING COUNT(*)>1 
```

对于重复的文件，我将尝试创建此约束：

```
CREATE UNIQUE INDEX filename_dir ON files (filename, dir_id); 
```

这运行得非常快（15 到 20 秒），我不需要在它之前创建其他索引以使其更快。错误消息还包含我需要向用户显示问题的详细信息（无论如何我都不太可能，因为我在插入之前检查了这些内容）

现在只有 5 个查询可以在更短的时间内执行；）感谢 Eugen 和 Justin 迄今为止的大力帮助！

UPDATE6：好的，所以自从任何人上次回复以来已经有几天了，我只会接受贾斯汀的回答，因为那是对我帮助最大的人。我将我从你们那里学到的东西整合到我的应用程序中，并在此处发布了 0.0.4 版：[http ://code.google.com/p/directory-scanner/downloads/detail?name=directory-scanner-0.0.4- jar-with-dependencies.jar](http://code.google.com/p/directory-scanner/downloads/detail?name=directory-scanner-0.0.4-jar-with-dependencies.jar)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:23:32.033

虽然我无法在不构建表格和填充的情况下进行验证，但我会尝试类似

```
-- This checks the SHA1 collisions
SELECT
  MIN(id) AS id,
FROM files
GROUP BY sha1
HAVING COUNT(*)>1
AND MIN(size)<>MAX(size)

-- This checks for directory duplicates
SELECT
  MIN(path) AS path
FROM directories
GROUP BY path
HAVING COUNT(*)>1

-- This checks for file duplicates
SELECT
  MIN(f.id) AS id
FROM files AS f
INNER JOIN files AS ff 
   ON f.dir_id=ff.dir_id
   AND f.filename=ff.filename
GROUP BY f.id
HAVING COUNT(*)>1 
```

一个接一个地跑。

**编辑**

第三个查询是虚假的-对此感到抱歉

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:23:59.723

尝试使用 UNION 和两个带有连接的索引良好的查询来代替子查询。

首先，您需要两个索引（基于您提供的 create_table.sql 中的模式）：

```
ALTER TABLE files add key (sha1, size);
alter table files add key(filename, dir_id); 
```

然后你需要重写查询：

```
(SELECT 
    d.path, 
    d.id, 
    f.filename, 
    f.id, 
    f.size, 
    f.scandate, 
    f.sha1, 
    f.lastmodified 
FROM files f 
INNER JOIN directories d 
    ON d.id = f.dir_id 
INNER JOIN files files2
    USING(sha1)
WHERE files2.size != f.size)

UNION

(SELECT 
    d.path, 
    d.id, 
    f.filename, 
    f.id, 
    f.size, 
    f.scandate, 
    f.sha1, 
    f.lastmodified 
FROM files f 
INNER JOIN directories d 
    ON d.id = f.dir_id
INNER JOIN files files2
    ON files2.id != f.id
   AND files2.filename = f.filename
INNER JOIN directories d2
   ON files2.dir_id = d2.id
  AND d2.path = d.path) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T19:19:43.900

您是否在第二个子查询中采用了一种交叉连接。尝试将第二个子查询更改为：

```
SELECT ff2.id 
FROM files ff2 
WHERE ff2.id <> f.id 
AND ff2.dir_id  = d.dir_id 
AND ff2.filename = f.filename 
```

`dir_id, filename`并在`files`表上创建索引。

# c++ - 如何将 CMake 参数转发到 ExternalProject

> ID：12021448
> 
> 赞同：21
> 
> 时间：2012-08-18T19:06:08.343
> 
> 标签：c++, cmake

我已经（大部分）成功地为 googletest 设置了 ExternalProject_Add。但是，我注意到我选择的 C++ 编译器、构建类型等不会自动转发到 ExternalProject。

我可以通过在对 ExternalProject_Add 的调用中将其添加到 CMAKE_ARGS 来轻松添加任何给定的标志，如下所示：

```
CMAKE_ARGS -DBUILD_SHARED_LIBS:BOOL=${BUILD_SHARED_LIBS} 
```

但是，这需要我列举所有应该转发到 googletests 的 CMake 调用的可能参数，而且这个列表非常庞大。我还需要为我想要的每个其他 ExternalProject_Add 创建相同的列表。这似乎很脆弱且容易出错。

有没有办法告诉CMake“转发”用户提供的配置？换句话说，如果我将 CMake 调用为：

```
cmake <path-to-project> -DCMAKE_C_COMPILER=/usr/bin/clang -DSOME_RANDOM_FLAG=stuff 
```

然后我希望调用 ExternalProject_Add 为 提供相同的编译器选择和值`SOME_RANDOM_FLAG`，*而*无需明确列出这些名称。我不确定简单地传递 CMake 的 ARGV 会起作用，因为说

```
CC=/usr/bin/clang cmake <path-to-project> 
```

理想情况下也可以。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-02-01T03:56:59.693

经过长时间的尝试，终于在 CMake 邮件列表中（由 Don Hinton）回答了这个问题。Fraser 的解决方案非常接近，但仍然可以传递一些项目特定的参数，这些参数可能会导致一些不可预测的行为。

以下工作正常。希望这可以为人们节省一些时间来解决这个问题：

```
cmake_minimum_required(VERSION 3.1)

# MUST be done before call to 'project'
get_cmake_property(vars CACHE_VARIABLES)
foreach(var ${vars})
  get_property(currentHelpString CACHE "${var}" PROPERTY HELPSTRING)
    if("${currentHelpString}" MATCHES "No help, variable specified on the command line." OR "${currentHelpString}" STREQUAL "")
        # message("${var} = [${${var}}]  --  ${currentHelpString}") # uncomment to see the variables being processed
        list(APPEND CL_ARGS "-D${var}=${${var}}")
    endif()
endforeach()

project(SuperBuild)

include(ExternalProject)

ExternalProject_Add(ext_proj
  ...

  CMAKE_ARGS ${CL_ARGS}
) 
```

链接到邮件列表线程：[https ://cmake.org/pipermail/cmake/2018-January/067002.html](https://cmake.org/pipermail/cmake/2018-January/067002.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T19:18:38.463

我不知道实现这一目标的可靠方法，而且我很确定没有标准的“CMake 方式”，但[我对关于捕获 CMake 命令行参数的类似问题的回答](https://stackoverflow.com/a/10218582/424459)可能对您有所帮助？

# liferay - 在 Liferay 6.1 中共享子页面的主要导航项目？

> ID：12021449
> 
> 赞同：1
> 
> 时间：2012-08-18T19:06:21.230
> 
> 标签：liferay, portal, liferay-6, liferay-velocity, liferay-theme

仅供参考，我是 Liferay 的新手，所以请耐心等待！

这是场景：我
的. 我已经确定两个主要导航项目将共享相同的子菜单列出相同的页面。 `nav``navigation.vm`

我已经进入 GUI 并创建了子页面，但是我必须为`nav`共享子页面的两个项目创建两次相同的页面集，或者是否有某种方法可以创建一次这些子页面，然后在页面并只引入不同的数据？

所以重申一下：
我可以让两个`nav`项目与相同的子页面共享一个子菜单，并根据`nav`所选的主要项目将唯一数据引入每个子页面吗？

如果不清楚，请告诉我，我会尽力解释得更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T13:32:03.560

***这是我的理解：***

*   您已经创建了两个页面 -`Page-1`和`Page-2`.
*   您需要为这些页面共享子页面，例如：

    ```
     Page-1    Page-2
      __|__      __|__
     |     |    |     |
     cp1  cp2  cp1   cp2 
    ```

*   哪里`cp1`&`cp2`是子页面1和2。

*   根据添加 portlet 的子页面，它们应该显示不同的数据。

***这是我对此的看法：***

由于子页面集的内容不同，我建议创建两组具有相同名称的子页面，即说`cp1`of`Page-1`不等于`cp1`of `Page-2`。

这将使您简化管理，并且如果您稍后决定`layout`子页面应该彼此完全不同或拥有完全不同的 portlet 集，那么它会更容易，因为无论如何它们将是不同的页面而不是共享。

希望我已经回答了你的问题，这会有所帮助。

# html - iPad键盘打开时屏幕移动

> ID：12021450
> 
> 赞同：0
> 
> 时间：2012-08-18T19:06:36.240
> 
> 标签：html, css, ipad

我使用 HTML、CSS 和 JavaScript 开发了一个 iPad 网络应用程序。我在其中一个屏幕上有一个简单的输入字段。每当我单击输入字段时，iPad 键盘就会从底部弹出（这很好），但随后整个屏幕向左移动。然后它会一直保持在这个位置，直到我双击 iPad 屏幕，这会使屏幕向右移动到原来的位置。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:43:16.053

```
$(document).ready(function(){
    $('input').bind('focus',function() {
        $(window).scrollTop(10);
        var keyboard_shown = $(window).scrollTop() > 0;
        $(window).scrollTop(0);
        if(keyboard_shown)
        {
            //your screen shifting code
        }
    });
}); 
```

# git - git [master +2 ~1 -0 !] 是什么意思？

> ID：12021460
> 
> 赞同：19
> 
> 时间：2012-08-18T19:07:35.080
> 
> 标签：git, powershell

我正在使用“Github For Windows”外壳并试图提交一些东西并遇到了看起来像错误的东西：

```
C:\Path\Name\ [master +2 ~1 -0 !]> 
```

是什么`+2 ~1 -0 !`意思？

注意：我通过修改目录中的每个文件并重新提交和推送来修复错误，现在它只是`[master]`，但我仍然不明白这些数字。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-19T17:19:53.837

这不是错误，只是一些有用的信息。

我想您正在使用`Github For Windows`- 它默认使用[posh-git](https://github.com/dahlbyk/posh-git/)，并且提示在其`posh-git`自身的 README 中进行了解释：

```
+ = Added files
~ = Modified files
- = Removed files
! = Conflicted files 
```

浏览自述文件​​，您可以看到它与`git status`输出的关系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T19:19:14.563

**该*提示*可能意味着：**
在您当前的 git 分支`master`中，您添加了两个文件`+2`，修改了一个`~1`并删除了零`-0`。
~~`!`表示您当前位于存储库的根目录。~~ *查看[此评论](https://stackoverflow.com/a/12028432/29096)以获取更多信息。*

不确定您使用的是哪个*shell* - 但您可能需要检查`PROMPT`和`PS1` *环境变量*以查找这些项目在提示中的含义。

正如您在问题中提到的那样，一旦您提交了所有更改，*提示*就会重置为。`[master]`

[`PROMPT`](https://en.wikipedia.org/wiki/Environment_variable#Default_Values_on_Microsoft_Windows)环境变量是 windows shell 使用的环境变量，`cmd`unixy *shell*使用环境变量——比如 bash。[`PS1`](http://ss64.com/bash/syntax-prompt.html)

 ***编辑：**完全错过了`powershell`你放在那里的标签 - 我不是一个 Windows 人 - 但看起来你在*powershell*中创建了一个`prompt`函数 - 检查这个链接：[http ://www.johndcook.com/blog/2008/05/12 /customizing-the-powershell-command-prompt/](http://www.johndcook.com/blog/2008/05/12/customizing-the-powershell-command-prompt/)*

# lua - Lua：setfenv() 与 _ENV

> ID：12021461
> 
> 赞同：12
> 
> 时间：2012-08-18T19:07:40.620
> 
> 标签：lua

`setfenv()`Lua 从to切换有什么大不了的`_ENV`？

在各种“最新消息”来源中，这一举措被认为是 Lua 5.1 和 5.2 版本之间最重要的变化之一。

但是，PIL 和其他地方给出的示例可以精简为以下内容：

```
-- Lua 5.1                   -- Lua 5.2
function myfunc()            function myfunc()
    setfenv(1, {})               _ENV = {}
end                          end 
```

到目前为止，我们在这里获得的是我们已经保存了五个击键。（我相信情况和C方面没有太大区别。）此外，如果我做对了，`setfenv()`可以从函数外部和函数内部使用，而`_ENV`只能从函数内部访问。（当然，当使用 C API 时，可以直接访问 upvalues。）从我写的内容来看，5.2 的方法似乎不太灵活。

在他[的 Lua 5.2 的新奇之处](http://www.inf.puc-rio.br/~roberto/talks/novelties-5.2.pdf)，罗伯托写道：

*“作为语法糖，它比旧环境简单得多”*

哪里简单了？我忽略了什么？

我相信这个话题值得更好地处理，它在 5.2 用户手册中给出。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T02:29:51.790

> 哪里简单了？

这取决于您如何定义“简单”。

在 Lua 5.1 中，环境是一个神奇而神秘的设置，不同于系统中的任何其他设置。它没有明确的位置，只能使用标准库功能进行设置。

在 Lua 5.2 中，环境是一个*变量*，就像其他变量一样。它有一个您可以使用的名称。所以它更简单，因为它更明显发生了什么。

此外，在 Lua 5.1 中，函数的环境可以动态更改。

在 Lua 5.2 中，除了直接的 upvalue 操作之外，一旦一个函数有了一个环境，那就是它将永远拥有的环境。函数的环境是继承的，像常规`local`变量一样在词法范围内。所以如果你看你的代码，你可以很容易地看到一个函数所处的环境。如果`local _ENV`该函数的创建范围内没有，那么环境应该是块的环境（由`load`调用定义）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-19T02:26:54.653

据我所知，Lua 5.2 环境的主要缺陷是它们不能在外部设置——也就是说，你不能说`setfenv(func, {})`. 在我看来，这是一个巨大的失败。它确实比 Lua 5.1 的环境更简单，但不是很好。

# html - 更改链接内粗体标签的颜色

> ID：12021464
> 
> 赞同：0
> 
> 时间：2012-08-18T19:08:12.100
> 
> 标签：html, css

出于某种原因，我们必须以这种方式保留标记，我只是试图更改href 悬停时粗体标记的颜色。我可以写一些 jquery 但我认为这可以通过简单的 css 实现。虽然消隐，任何帮助将不胜感激，我尝试了不同的变体，但无法确定！

```
<a href="http://yolocal.dev:3000/catalog_items/3080191" class="deal_percent_link_style"><b span="deal_data_wrapper">-73% </b></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T19:08:57.127

你可以用 CSS 做到这一点：

```
a.deal_percent_link_style:hover b {
    color: #f00;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T19:10:24.740

添加一些CSS：

```
a.deal_percent_link_style:hover {
    color: red;
}​ 
```

# c# - 不能在 C# 中同时使用 StreamWriter 和 '\' char

> ID：12021465
> 
> 赞同：0
> 
> 时间：2012-08-18T19:08:25.767
> 
> 标签：c#, character, streamwriter

```
void addFile(string aFile)
{

    using (StreamWriter sw = new StreamWriter(@"C:\"+ aFile))
         sw.WriteLine("Some Text");
} 
```

如果文本包含`/`字符，我会收到找不到此类目录的错误。

示例：`aFile="1/2 Half.c"`=> `C:/1/2 Half.c`=> 目录 1 不存在。

如何将字符串`"1/2 Half.txt"`放在 C:\ 或任何包含`/`或可能的文件中`\`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T19:12:49.257

文件名中有几个非法的保留字符。'/' 和 '\' 是其中的两个。

以下是来自 MSDN 的文件命名指南：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa365247 (v=vs.85).aspx#naming_conventions](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx#naming_conventions)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T19:11:43.660

您使用的斜杠是文件名的无效字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T19:32:23.313

用有效字符替换无效字符。您可以为此使用[Path.GetInvalidFileNameChars](http://msdn.microsoft.com/en-us/library/system.io.path.getinvalidfilenamechars.aspx)。

```
var invalidChars = Path.GetInvalidFileNameChars();
var newFileName = new string(
                        fname.Select(c=>invalidChars.Contains(c)?'_':c).ToArray()); 
```

# python - <<在python中代表什么？

> ID：12021467
> 
> 赞同：6
> 
> 时间：2012-08-18T19:08:51.933
> 
> 标签：python, syntax

蟒蛇说

```
1 << 16 = 65536 
```

`<<`在 Python 中执行什么操作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T19:26:33.450

它是 Python 的左移运算符。顾名思义，左移操作将位向左移动。

假设您有 2，其二进制表示为 0010。因此 `2<<2` 意味着将位向左移动两次：

0010 -> 0100 -> 1000

1000 是 8 的二进制表示。在数学上，左移与将数字乘以 2 的幂相同： `a<<b == a*2^b`但由于仅通过移位完成运算，因此比乘法要快得多。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-18T19:12:28.560

这是`left shift operator`

`1<<16`意味着 1 左移 16 位。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-18T19:10:14.267

`<<`它是 Python 中的左移运算符。查看[文档](http://docs.python.org/reference/expressions.html#shifting-operations)以获取更多详细信息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-18T19:36:13.373

另一种思考方式是 1 乘以 2^16。

因此，每当您看到 x << y 时，将其解释为：

x * 2^y

# php - 插入 addthis 链接和 joomla

> ID：12021476
> 
> 赞同：1
> 
> 时间：2012-08-18T19:10:08.100
> 
> 标签：php, joomla, joomla1.5, joomla2.5, joomla1.7

在 Joomla 2.5.6 中，我创建了一篇文章并将其链接用作菜单项，默认情况下，该文章在右侧显示打印和电子邮件图标。创建文章时，我想在它们旁边添加一个 facebook、linkedin 等图标。我想为将来创建的所有文章执行此操作。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:17:16.717

我知道[K2](http://extensions.joomla.org/extensions/authoring-a-content/content-construction/8061?qh=YTozOntpOjA7czoyOiJrMiI7aToxO3M6MzoiJ2syIjtpOjI7czo0OiJrMidzIjt9)组件的每篇文章都有 Facebook、Twitter 和 Google+ 按钮，但是您也可以查看 Joomla Extensions Directory 类别中的此类插件。以下是 facebook 按钮的类别：

[http://extensions.joomla.org/extensions/social-web/social-share/facebook-share](http://extensions.joomla.org/extensions/social-web/social-share/facebook-share)

我从未使用过 Linkedin，所以不太确定，但以下是 JED 搜索的一些结果：

[http://extensions.joomla.org/search?q=linkedin](http://extensions.joomla.org/search?q=linkedin)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:27:53.553

我使用[shareThis](http://extensions.joomla.org/extensions/social-web/social-share/social-multi-share/8117) joomla 插件在我的网站上有 FB、twitter、邮件和 G+ 分享按钮。[您可以在此处](http://support.sharethis.com/customer/portal/articles/446460-joomla-integration)找到如何安装它。

# jquery - jquery如何插入li

> ID：12021480
> 
> 赞同：2
> 
> 时间：2012-08-18T19:10:27.553
> 
> 标签：jquery, html-lists, add

在 wordpress 菜单中创建

```
<a href="#">menu 1</a>
<a href="#">menu 2</a>
<a href="#">menu 3</a>
<a href="#">menu 4</a>
<a href="#">menu 5</a> 
```

但我想添加那些在 li 里面。像这样

```
<li><a href="#">menu 1</a></li>
<li><a href="#">menu 2</a></li>
<li><a href="#">menu 3</a></li>
<li><a href="#">menu 4</a></li>
<li><a href="#">menu 5</a></li> 
```

我知道它可能通过 jquery 。我试过了，但我做不到。我对 jquery 不是那么专业，所以你会帮我吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T19:12:42.327

我建议如下：

```
var list = $('<ul />').insertBefore($('a').first());

$('a').each(
    function(){
        $(this).wrap('<li />').closest('li').appendTo(list);
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/WY92f/)。

根据我对 OP 评论的阅读（在此答案下方），上述无法正常工作的问题可能是由于缺少包装在`$(document).ready()`处理程序中的代码，如果是这种情况，那么我建议进行以下改编：

```
$(document).ready(
    function(){
    var list = $('<ul />').insertBefore($('a').first());

    $('a').each(
        function(){
            $(this).wrap('<li />').closest('li').appendTo(list);
        });​
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:14:19.943

将类添加到要放入`li`元素的元素中：

```
<a href="#" class="li_a">menu 1</a>
<a href="#" class="li_a">menu 2</a>
<a href="#" class="li_a">menu 3</a>
<a href="#" class="li_a">menu 4</a>
<a href="#" class="li_a">menu 5</a> 
```

然后抓住这些元素并遍历它们：

```
var ul = $("<ul></ul>").appendTo("body");
$("a.li_a").each(function() {
    $(this).wrap("<li></li>").parent().appendTo(ul);
}); 
```

# javascript - 键盘问题上的jQuery事件

> ID：12021485
> 
> 赞同：3
> 
> 时间：2012-08-18T19:11:07.610
> 
> 标签：javascript, jquery, html, css

这是我正在寻找的一个简单版本：http: [//jsfiddle.net/mitchbregs/DLg92/5/](http://jsfiddle.net/mitchbregs/DLg92/5/)

现在这里有一个更复杂的版本：http: [//jsfiddle.net/mitchbregs/E7a9S/1/](http://jsfiddle.net/mitchbregs/E7a9S/1/)

简单的版本工作得很好。它没有问题，事件完全正确。

现在，当您查看更复杂的网站时，我的事件没有发生，我不明白为什么会出现问题。

我在两个网站上都添加了正确的脚本，只有一个简单的脚本在工作。

我正在尝试这样做，以便当用户单击“n”时，text_input_box 会像单击导航菜单中的“添加注释”按钮一样打开。

我对 jQuery 和 JavaScript 很陌生，所以这只是我正在做的一个学习项目。

谢谢大家的时间和帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T19:30:43.047

好吧，我发现问题实际上不在你的代码中，这就是小提琴：http: [//jsfiddle.net/E7a9S/5/](http://jsfiddle.net/E7a9S/5/)

问题是您在 jsfiddle 中包含了使 jquery 无法正常工作的 mootools。

简单的版本工作得很好，因为如果你注意到那里你确实包含了 jquery 而不是 mootools。

***顺便说一句**，高级的很漂亮，真的很酷。*

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:41:29.423

它不会解决你的问题，但这里有一些事情可以改进你的 js：

```
$(".postIt-" + id).css("width",wh);
$(".postIt-" + id).css("height",wh);
$(".postIt-" + id).css("transform","rotate("+rotatedegree+"deg)");
// ... 
```

不要重复`$(".postIt-" + id)`，它更慢而且没用：

```
$(".postIt-" + id).css("width",wh)
.css("height",wh)
.css("transform","rotate("+rotatedegree+"deg)")
// ... 
```

而不是这个：

```
if (randomBg == 1){
    $(".postIt-" + id).addClass("bg_one");
}
if (randomBg == 2){
    $(".postIt-" + id).addClass("bg_two");
} 
```

做这个：

```
var setRandomBg = function(postit_id, bg_id) {
    $(".postIt-" + postit_id).addClass("bg_" + bg_id); // you would need to rename your classes with numbers
}
// and call it

setRandomBg(id, randomBg); 
```

# php - Kohana 3.2 路线不匹配

> ID：12021488
> 
> 赞同：0
> 
> 时间：2012-08-18T19:11:29.727
> 
> 标签：php, regex, kohana

这是产生问题的路线：

```
Route::set('api', 'api(/<action>(/<currency_data>(/<currency_value>)))',
    array(
        'currency_data' => '(\d\-\d)|(\w\-\w)',
        'currency_value' => '\d+(\.\d{1,2})?'
    ))
    ->defaults(array(
        'controller' => 'api',
        'action'     => 'get',
    )); 
```

网址将类似于：

```
/api/currency/123-321/123.00 
```

或者

```
/api/currency/abc-cba/123 
```

两种情况都涵盖了，但最后都不起作用，为什么？默认的溃败是在引导程序的末尾（我知道有人会建议这样做）

tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:10:20.233

\d 和 \w 只匹配一个字符。因此 123-321 不匹配 \d-\d 并且 abc-cba 不匹配 \w-\w。

如果这不是问题，那么请提供有关它如何“不起作用”的更多信息。有什么作用？你得到什么结果等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:05:34.100

如果你们中的任何人试图解决我的问题，我是个白痴，对不起......

我评论了第二个正则表达式，以及它不起作用的明显原因……tnx大家

# r - R中的优化问题

> ID：12021493
> 
> 赞同：0
> 
> 时间：2012-08-18T19:11:45.223
> 
> 标签：r, optimization

与 R 中的 optim 函数有关的问题

到目前为止，我有以下代码，需要知道输入我的 X 和 T 的值。X 是 10 个值的向量，T 是与均值和方差相关的 10*2 值的向量。我希望输出采用 alpha、mean1、mean2、var1 和 var2 的一个新值的格式。不确定如何正确获取输入数据。

我想在这个函数中运行 X 的所有值，但只运行 T 的第一行（10 个值），我不确定如何为 T 执行此操作。我对第二行有不同的函数。

```
R <-runif(10, 0, 1)
S <-1-R
T <-t(cbind(R,S))

X <- runif(10, 25, 35)

Data1 <- function(xy) { 
  alpha <- xy[1]
  mean1 <- xy[2]
  mean2 <- xy[3]
  var1 <- xy[4]
  var2 <- xy[5] 

  -sum(0.5*(((X)-mean1)/var1)^2+alpha*mean1+log(2.5*var1)+log(exp(-alpha*mean1)+exp(-alpha*mean2))*(T))
}
starting_values <- c(0.3, 28, 38, 4, 3)
optim(starting_values, Data1, lower=c(0, 0, 0, 0, 0), method='L-BFGS-B') 
```

还收到以下错误代码：

```
Error in optim(starting_values, Data1, lower = c(0, 0, 0, 0, 0), method = "L-BFGS-B") : 
  L-BFGS-B needs finite values of 'fn' 
```

为任何帮助而欢呼。

**编辑**

包含的第二个功能

```
0.5*((y1-mean2)/var2)^2+alpha*mean2+log(2.5*var2)+ log(exp(-alpha*mean1)+exp(-alpha*mean2)))*T 
```

好的，尽可能清楚地解释我想要做什么。上面原始帖子中的第一个函数一次获取 X 的所有 10 个值，并且应该获取第一行 T 数据（此处标记为 R），我不确定如何执行此操作。

上面详述的第二个函数应该再次连续获取所有 10 个 X 值，然后是来自 T 的第二行数据（下面标记为 S）

然后将所有这些加在一起。因此估计了五个未知参数。

> 吨

```
 [,1]      [,2]      [,3]       [,4]      [,5]        [,6]      [,7]      [,8]      [,9]     [,10]
R 0.1477715 0.3055021 0.2963543 0.04149945 0.8342484 0.996865333 0.1592568 0.4623762 0.8000778 0.6979342
S 0.8522285 0.6944979 0.7036457 0.95850055 0.1657516 0.003134667 0.8407432 0.5376238 0.1999222 0.3020658 
```

**编辑2**

即使运行相同的种子，我也没有得到与本相同的值。我已经检查过我是否安装了所有软件包，并且看起来我已经安装了。我没有得到相同的最终答案，我也无法调用 opt2$par 的单个项目。我将提供前几行和最后几行，而不是提供大量输出。

```
0.3 28 38 4 3 -74.97014 -120.7212 
Loading required package: BB
Loading required package: quadprog
Loading required package: ucminf
Loading required package: Rcgmin
Loading required package: Rvmmin

Attaching package: ‘Rvmmin’

The following object(s) are masked from ‘package:optimx’:

    optansout

Loading required package: minqa
Loading required package: Rcpp
0.3 28 38 4 3 -74.97014 -120.7212 
0.9501 28 38 4 3 -176.3368 -265.9074 
1.9001 28 38 4 3 -324.7782 -478.4652 
0.9501 28.95 38 4 3 -179.9994 -260.8711 
0.9501 28 38.95 4 3 -176.3366 -283.0445 
0.9501 28 38 4.95 3 -176.7836 -265.9074 
0.9501 28 38 4 3.95 -176.3368 -254.6188 
```

.....................

```
16.32409 27.86113 38.54337 3.940143 2.504167 -2566.194 -3826.233 
16.32409 27.86113 38.54337 3.940044 2.504167 -2566.194 -3826.233 
16.32409 27.86113 38.54337 3.940093 2.504199 -2566.194 -3826.232 
16.32409 27.86113 38.54337 3.940093 2.504136 -2566.194 -3826.234 
> opt2$par
$par
[1] 16.324085 27.861134 38.543373  3.940093  2.504167

> opt2$par["mean1"]
$<NA>
NULL 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T15:17:08.153

第一次破解：我在上面使用了你的代码。我`set.seed(101)`在开头添加了可重复性。

为了清楚起见，稍微重新格式化了函数，但没有改变任何重要的内容，并添加了一条`cat()`用于调试目的的语句：

```
Data1 <- function(xy) {
    alpha <- xy[1]; mean1 <- xy[2]; mean2 <- xy[3]
    var1 <- xy[4]; var2 <- xy[5]

    r1 <- -sum(0.5*((X-mean1)/var1)^2+
           alpha*mean1+
           log(2.5*var1)+
           log(exp(-alpha*mean1)+
               exp(-alpha*mean2))*T[1,])
    r2 <- -sum(0.5*((X-mean2)/var2)^2+
           alpha*mean2+
           log(2.5*var2)+
           log(exp(-alpha*mean1)+exp(-alpha*mean2))*T[2,])

    cat(xy,r1,r2,"\n")
   r1+r2
} 
```

一个略微压缩的版本，（1）利用`with`使功能更清洁；(2) 使用 R 的复制和向量回收能力

```
Data2 <- function(xy) {
    with(as.list(xy),
    {
       mmat <- rep(c(mean1,mean2),each=ncol(T))
       vmat <- rep(c(var1,var2),each=ncol(T))
       -sum(0.5*((X-mmat)/vmat)^2+
          alpha*mmat+
          log(2.5*vmat)+
          log(exp(-alpha*mean1)+exp(-alpha*mean2))*T)
    })
} 
```

现在我们需要一个*命名*的起始值向量：

```
 starting_values <- c(alpha=0.3, mean1=28, mean2=38, var1=4, var2=3) 
```

检查结果是否匹配：

```
 Data1(starting_values) ##  [1] -195.6913
 Data2(starting_values) ##  [1] -195.6913 
```

这失败了（但向我们提供了有关它如何失败的信息）：

```
 optim(par=starting_values, Data1, lower=rep(1e-4,5), method='L-BFGS-B',
     control=list(trace=6)) 
```

它产生大量输出，以：

```
##  21.29998 27.97361 37.98915 4.011199 3.001 -6014.225 
## 21.29998 27.97361 37.98915 4.011199 2.999 -6014.225 
## 85.29991 27.89318 37.95606 4.04533 3 Inf 
## Error in optim(par = starting_values, Data1, lower = rep(1e-04, 5), 
##    method = "L-BFGS-B",  : 
##     L-BFGS-B needs finite values of 'fn' 
```

这至少告诉你哪里出了问题。我现在将尝试逐个评估您的表达式，以查看哪个位溢出。

正如聊天室的评论者（贾斯汀）所说，

> 您的第三个术语 log(exp(...) + exp(...)) 非常快地进入 -Inf，因为 alpha、mean1 和 mean2 是无界的。exp(-大数 * 大数) ~ 0

为了进一步调试，您可以：

*   尝试重新安排对函数的评估以避免溢出
*   设置一些参数的上限以避免溢出
*   具有函数测试并在适当的情况下返回非常大的值而不是 Inf

不幸的是，`L-BFGS-B`它比其他一些优化器更脆弱，并且不允许非有限值。

接下来我尝试了包中的`bobyqa`优化器`optimx`，它允许边界*并*处理非有限值（并且是一种无导数的方法，通常比基于导数的方法稍慢但更健壮）：它似乎有效好的，虽然我不知道答案是否合理。

```
library(optimx)
opt2 <- optimx(par=starting_values, 
      Data1, lower=rep(1e-4,5), method='bobyqa')
opt3 <- optimx(par=starting_values, 
      Data2, lower=rep(1e-4,5), method='bobyqa') 
```

看起来不错（只要这是一个明智的答案，我不知道）。

```
> opt2$par
$par
    alpha     mean1     mean2      var1      var2 
16.330752 27.815324 38.497483  3.894179  2.447219 

> opt3$par
$par
    alpha     mean1     mean2      var1      var2 
16.330900 27.820813 38.491290  3.887975  2.456052 
```

请注意，答案略有不同（在 var2 的情况下大约为 0.5%），这表明拟合可能稍微不稳定/表面可能非常平坦。（`Data1`和 Data2 应该给出**相同**的答案，并为起始值这样做，但我猜操作的顺序使它们对某些输入给出非常不同的答案 - 或者我在某个地方搞砸了......）

要从此拟合中提取单个分量，例如`mean1`，使用向量索引：

```
opt3$par["mean1"]  ## 27.820813 
```

# c++ - C++ 标识符

> ID：12021495
> 
> 赞同：3
> 
> 时间：2012-08-18T19:11:50.257
> 
> 标签：c++, identifier

C++ 入门 说：

> 我们在程序中定义的标识符不能包含 2 个连续的下划线，标识符也不能以下划线开头，后跟一个大写字母。另外，在函数外被罚款的标识符不能以下划线开头

一切都很好，但是

```
int _c = 55;                  // outside function starts with _

int main () {

    int _A = 12;              // _ followed by uppercase letter
    cout << _A << endl;

    int __b__ =33;            // 2 consecutive __
    cout << __b__ << endl;

    cout << _c << endl;

} 
```

**上面的代码在 mac**上编译得非常好**`g++ 4.7.1`，使用以下标志**

 **```
g++ -pedantic -Wall -Werror -std=c++11 -O3 -funroll-loops -fprefetch-loop-arrays 
```

请问我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T19:18:14.033

过马路而不注意双向交通并不能*保证*您会被公共汽车碾过，但这仍然是一个坏主意。

有一天它不会工作......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T19:13:53.997

没有。带有前导下划线后跟大写字母的标识符和带有两个下划线的标识符仅保留。

您的编译器供应商可能会决定随时使用它们（例如，编译器供应商可以使用 _A 作为关键字），因此您不应该使用它们。通常，标准库是使用保留标识符实现的，因此它们不会导致编译错误。**

# java - MOD10 信用卡验证

> ID：12021497
> 
> 赞同：0
> 
> 时间：2012-08-18T19:12:05.230
> 
> 标签：java, validation, credit-card

*   第 1 步：将卡号从右数第二位开始的交替数字的值加倍。
*   步骤 2：将步骤 1 中获得的单个数字与原始数字中的每个未受影响的数字相加。
*   第三步：如果第二步得到的总和能被10整除，则卡号有效，否则无效。

例如，使用 Mod 10 算法验证 VISA 卡 49977393716 的卡号：

步骤1：

```
4 9 9 7 7 3 9 3 7 1 6
  x2  x2  x2  x2  x2

= 18 14 6 6 2 
```

第2步：`4 + (1+8) + 9 + (1+4) + 7 + (6) + 9 + (6) + 7 + (2) + 6 = 70`

第三步：70能被10整除⇒卡号有效

这是问题的第二部分。所以我将卡号用户输入作为字符串。这是否意味着我必须 charAt()，需要的字符//替代值。

```
 int[] digits = new int[cardNo.length()/2];//Number of alternate values available
        char digit1;
        char digit2;
        int intDigit1;
        int intDigit2;
        int[] sumOfTwoDigits = new int[cardNo.length()/2];
        int totalSum;
        String digitsChar;

 for(int i=0; i<digits.length; i++){             
            digits[i]=(cardNo.charAt(i+1))*2; 
            digitsChar=Integer.toString(digits[i]);
            digit1= digitsChar.charAt(1);
            digit2= digitsChar.charAt(2);
            intDigit1= Character.getNumericValue(digit1);//Convert char to int to perform addition
            intDigit2= Character.getNumericValue(digit2);//Convert char to int to perform addition

            sumOfTwoDigits[i] = intDigit1+intDigit2;
            System.out.println("digits: " + intDigit1);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:55:49.730

几点建议：

*   你应该从数字序列的右端开始向左工作*。*信用卡号中的最后一位数字（如果是校验位）。有些信用卡的位数是奇数，有些信用卡的位数是偶数。从字符串的“右”端开始是确保将正确数字加倍的一种方法。
*   一些信用卡使用奇数位数的事实意味着您不能依赖能够在每个循环中处理两个字符（至少在没有对该奇数剩余字符进行特殊情况处理的情况下并非如此）。
*   当您加倍一位数字时，如果您最终得到大于 10 的结果，您希望在将其折叠到校验和之前从结果中减去 9（有效地将两位数相加）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:12:28.227

我的 java 有点生锈了，但我们开始吧：

```
public static boolean luhnVerify(String str) {
  int sum = 0;
  int value;
  int idx = str.length(); // Start from the end of string
  boolean alt = false;

  while(idx-- > 0) {
    // Get value. Throws error if it isn't a digit
    value = Integer.parseInt(str.substring(idx, idx + 1));
    if (alt) {
      value *= 2;
      if (value > 9) value -= 9;
    }
    sum += value;
    alt = !alt;  //Toggle alt-flag
  }
  return (sum % 10) == 0;
} 
```

[Luhn 算法](http://en.wikipedia.org/wiki/Luhn_algorithm)从右端开始，然后每隔一个数字乘以 2 并添加结果。

1.  在上面的代码中，我使用`Integer.parseInt(str.substring(idx,idx+1))`从字符串中获取每个数字。如果不是数字，则会抛出错误。
2.  在那里我检查`alt`- 标志，如果它是真的，我将值乘以 2。如果结果大于 9，我减去 9。这与添加 1+[0-8] 的结果相同。
3.  我将值添加到总和并切换`alt`- 标志。
4.  如果总和能被 10 整除，则结果为真。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T23:37:08.117

我试图编写代码来做我猜你想要的：

```
String cardNo = "49977393716";
int[] digits = new int[cardNo.length()/2]; //Number of alternate values available
int[] sumOfTwoDigits = new int[cardNo.length()/2];

for(int i=0; i<digits.length; i++){ 
        //get the numeric value of the char, instead of the int representation            
        digits[i]=Character.getNumericValue(cardNo.charAt(2*i+1))*2;

        //using Michael Burr's trick
        sumOfTwoDigits[i] = digits[i] >= 10 ? digits[i] - 9 : digits[i]; 
} 
```

您遇到了麻烦，因为您将 a 分配给`char`an 中的一个位置`int[]`，因此使用了 的 int 表示`char`。因此，调用`digitsChar[2]`不会失败（它总是应该失败，因为任何数字的 double 永远不能超过两位，其中一半只有一个），因为 double`int`的 digit `char`s 的表示都有三个数字.

# java - 如何在 Eclipse 中使用外部 .class 文件？

> ID：12021499
> 
> 赞同：1
> 
> 时间：2012-08-18T19:12:20.673
> 
> 标签：java, eclipse, class, classpath

我在将外部 .class 文件导入 Eclipse 项目时遇到问题。我已经阅读了大多数相关问题，但没有一个答案对我有用。这是我的项目的以下代码：

```
import java.lang.management.ManagementFactory;
import java.lang.management.ThreadMXBean;
import timing.Timing;

public class Test {
    public static void main(String[] args){
        int seed = 518406;
        long begin = 0;
        long end = 0;
        ThreadMXBean bean = ManagementFactory.getThreadMXBean();

        for(int i = 1; i < 10000; i=i*2){
            begin = bean.getCurrentThreadCpuTime();
            Timing.trial(i, seed);
            end = bean.getCurrentThreadCpuTime();
            System.out.println(i + ": " + (end - begin) + "ns");
        }
    } 
```

}

我通过将 Timing.class 文件放在 /lib/timing/Timing.class 中进行导入，并将 lib 文件夹作为类文件夹添加到构建路径中。在构建路径窗口的 Order and Export 选项卡中，我已将 lib 文件夹移至顶部并进行了检查。

运行上面的代码时，出现以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: Timing
        at Test.main(Test.java:14)
Caused by: java.lang.ClassNotFoundException: Timing
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 1 more 
```

谁能帮我弄清楚出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:29:43.813

1.  在堆栈跟踪中，这条线看起来很奇怪

    线程“主”java.lang.NoClassDefFoundError 中的异常：计时

似乎`Timing`默认包中的 java 搜索不在`timing`包中。检查这一刻。

2 你如何运行这段代码？来自 Eclipse？如果是这样，请检查此启动的 Eclipse 运行配置。可能是您将类文件夹添加到构建路径但不添加它启动类路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:31:10.923

我假设您是`.class`从第三方获取文件，或者您将包括来源。处理它的最简单方法可能是要求他们将其封装在 JAR 中，或者自己打包——Java 开发工具几乎普遍设计用于处理 JAR，而不是原始类文件。

# php - 使用 PHP 根据时间从 .txt 文件中删除行

> ID：12021502
> 
> 赞同：0
> 
> 时间：2012-08-18T19:12:25.050
> 
> 标签：php, unix, time, code-snippets

我正在做一个小项目。

我想做的是有一个 PHP 文件，根据时间从 .txt 文件中删除行

.txt 文件将像这样格式化

```
Content | Time (Unix Time)
Content | Time (Unix Time) 
```

每次执行 php 文件时，我希望它删除每一行，即 = 或小于当前时间

我试过使用谷歌，但运气不好，我从一个来源抽出时间。所以这不会是一个问题，只是 PHP 部分。

有片段吗？或者这会很困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:18:01.083

有很多方法可以处理这个...实际上很容易，除非你的文件真的很大。这种方法不是最节省内存的，但它可能是最简单的。

将文件读入带有 的行数组[`file()`](http://us3.php.net/manual/function.file.php)，遍历它们并在`|`. 如果时间戳比当前时间新，则将该行添加到输出数组。

最后，使用输出数组的值将文件写回：

```
$output = array();
// Read the file into an array of lines:
$lines = file('yourfile.txt');
// Store the current time
$now = time();

foreach ($lines as $line) {
  // Split on |
  list($content, $time) = explode("|", $line);
  if ($time > $now) {
     // Keep the line in the output array:
     $output[] = $line;
  }
  // Otherwise do nothing with it
}

// Implode it back to a string and write to file:
$outstring = implode("\n", $output);
file_put_contents("yourfile.txt", $outstring); 
```

确保`yourfile.txt`您的 Web 服务器用户或正在执行此脚本的任何用户具有适当的写入权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:19:30.007

您可能需要查看[`fgetcsv`](http://www.php.net/manual/en/function.fgetcsv.php)和[`fputcsv`](http://www.php.net/manual/en/function.fputcsv.php)。您可以使用前者遍历文件中的所有行，过滤掉那些不符合您的条件的行，然后将所有未被过滤器捕获的行放回文件中。

```
<?php
$filtered = array();
if($handle = fopen("data.txt", "r")){
    while($data = fgetcsv($handle, 0, "|")){
        if($data[1] > time()){
            $filtered[] = $data;
        }
    }
    fclose($handle);
}
if($handle = fopen("data.txt", "w")){
    for($i = 0; $i < count($filtered); $i += 1){
        fputcsv($handle, $filtered[$i], "|");
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T19:22:43.173

为了改进@Michael的答案，不要将所有内容都保存在内存中，而是使用两个文件流并编写从第一个到第二个匹配的行。这将允许您处理任意大的文件。您还可以像大多数应用程序默认情况下那样编写标准输出，并将输出重定向到文件。

```
$input = fopen("file.txt", "rb");
$output = fopen("output.txt", "wb");
$now = time();

while ($row = fgets($input))
{
    list($content, $time) = explode("|", $row);

    if ($time > $now)
    {
        // change to echo to write to stdout
        fwrite($output, $row);
    }
}

fclose($input);
fclose($output); 
```

# python - “NameError：名称'self'未定义”

> ID：12021511
> 
> 赞同：-2
> 
> 时间：2012-08-18T19:12:57.977
> 
> 标签：python

我确定这与制表符/空格有关，但 100 万美元的问题是程序中的什么地方？？？

```
import webapp2

form="""
<form method="post">
    What is your birthday?
    <br>

    <label> Month
    <input type="text" name="month">
    </label>

    <label> Day
    <input type="text" name="day">
    </label>

    <label> Year
    <input type="text" name="year">
    </label>
    <div style="color: red">%s(error)s</div>
    <br>
    <br>
    <input type="submit">
</form>
"""
months = ['January', 'Febuary','March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
mapping = dict((m[:3].lower(), m) for m in months)

def valid_month(month):
    if month:
        s_month = month[:3].lower()
        return mapping.get(s_month)

def valid_day(day):
    if day and day.isdigit():
        day = int(day)
        if day in range(1, 32):
            return day

def valid_year(year):
    if year and year.isdigit(): 
        int_year = int(year)
        if int_year in range(1900,2021): 
            return year

class MainPage(webapp2.RequestHandler):
    def write_form(self, error=""):
        self.response.out.write(form % {"error": error})

    def get(self):
        self.write_form()

    def post(self):
        user_month = valid_month(self.request.get('month'))
        user_day = valid_day(self.request.get('day'))
        user_year = valid_year(self.request.get('year'))

        if not (user_month and user_day and user_year):
            self.write_form("That's wasn't valid, friend!")
        else:
            self.response.write("Thanks! That's a totally valid day!")

app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T19:20:03.580

`python -tt`会告诉你在哪里。

```
$ python -tt script.py
  File "script.py", line xxx
    ...
TabError: inconsistent use of tabs and spaces in indentation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-07T01:18:09.410

您需要在类中定义 valid_month、valid_day 和 valid_year。

当你打电话给他们时，你需要说

```
 user_month = self.valid_month(self.request.get('month')) 
```

代替

```
 user_month = valid_month(self.request.get('month')) 
```

并且在每个方法的每个定义中，您需要包含“self”作为第一个参数，以便它将绑定到类：

```
def valid_month(self, month): 
```

代替

```
def valid_month(month): 
```

否则，作为类被引用的“self”对于存在于类范围之外的这些无关方法没有任何意义。

# java - 按钮和链接的间歇性不提交处理

> ID：12021514
> 
> 赞同：0
> 
> 时间：2012-08-18T19:13:27.880
> 
> 标签：java, google-app-engine, wicket

我的 Apache Wicket Web 应用程序部署在 Google App Engine for Java (GAE/J) 上。

我对这个应用程序有一个问题（大约 1-5% 的点击事件），在点击链接或按钮后，不是处理相关组件和表单的`onSubmit()`方法，而是将相同的原始页面呈现给用户如果改为命令浏览器页面刷新。

**示例呈现的 HTML 标记**

```
<a href="../wicket/page?20-1.ILinkListener-lnkLogOn" tabindex="2001">Log on</a>

<button type="submit" tabindex="3" name="btnLogOn" id="id2d">
 Log on
</button> 
```

一个可能相关的问题是，有时闪烁消息在应该出现的时候没有出现，或者出现但为空。

这些问题可能是由于未能正确解释用户的 Web 会话造成的。

我感觉请求/响应周期没有被正确处理，请求的处理是错误的，因为它们的会话 ID 没有被正确使用，并且请求没有被传递给准备好处理的现有应用程序实例。

以前运行没有问题的应用程序是否有其他人遇到过这个问题？

**软件环境**

*   检票口：1.5.7
*   GAE/J：1.7.0
*   爪哇：1.6.0_34

# iphone - 按钮不工作 iOS

> ID：12021519
> 
> 赞同：1
> 
> 时间：2012-08-18T19:14:04.737
> 
> 标签：iphone, ios, button

我在 IB 中插入了一个按钮，将此代码添加到 .h 文件中

```
-(IBAction)buttonPressed:(id)sender; 
```

将动作连接到 IB 中的按钮（Touch Up Inside），然后将其放在 @synthesize 正下方的 .m 文件中

```
-(IBAction)buttonPressed:(id)sender { 
       NSLog(@"Button pressed"); 
       ...
} 
```

控制台中没有显示任何内容，因此由于某种原因未执行该操作。为什么是这样？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:20:40.253

该方法对我来说似乎很好。仔细检查：

1.  您已经在 IB 中设置了包含正确类按钮的视图控制器的类。

2.  当您右键单击 IB 中的按钮时，它已`IBAction`连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:03:08.960

您没有显示其余代码 - 它应该看起来像

```
YourViewController *yourViewController = [[YourViewController alloc] initWithNibName:@"YourViewController" bundle:nil];
yourViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:yourViewController animated:YES]; 
```

确保您已将 YourViewController.h 包含在调用 View Controller 的 .m 中。

# javascript - 在另一个 div 中移动和限制 div 的运动

> ID：12021522
> 
> 赞同：0
> 
> 时间：2012-08-18T19:14:18.850
> 
> 标签：javascript, css

我有两个简单的 div，其中一个包含在另一个中

```
div#numero{
    position:absolute;
    background-color:#ff3324;
    border-style: solid;
    border-width: 2px;
    width:30px;
    height:30px;
    font-family: "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Verdana, sans-serif;
    font-size:1em;
    line-height: 30px;
    text-align:center;
    margin-left:0;
    margin-right:0;
};

div#cont{
    position:relative;
    border-style: solid;
    border-width: 2px;
    width:500px;
    height:500px;
    margin-left:auto;
    margin-right:auto;
    padding:0;
} 
```

我想移动容器内的第一个内部 div

```
 <div id = "cont" onmousemove = "moveDiv()">
        <div id = "numero">
            1        
        </div>
     </div> 
```

moveDiv 简单的地方

```
function moveDiv()
{
    var e = document.all["numero"]
    x = window.event.clientX ;
    y = window.event.clientY ;

    e.style.left = x +"px";
    e.style.top = y +"px";

} 
```

该代码无法按我的意愿工作。鼠标所在的位置和内部 div (numero) 移动的位置之间存在很大的偏移。我还想限制容器 div 内的移动。一些帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:02:15.523

见[http://jsfiddle.net/enHmy/](http://jsfiddle.net/enHmy/)

在您的 html 代码后添加以下代码

```
document.getElementById('cont').onmousemove=moveDiv; 
```

然后你的功能应该是：

```
function moveDiv(e){
    if(!e){e=window.event;}
    var el = document.getElementById('numero');
    x = e.clientX-this.offsetLeft-this.clientLeft-el.offsetWidth/2;
    y = e.clientY-this.offsetTop-this.clientTop-el.offsetHeight/2;

    el.style.left = Math.min(Math.max(0,x),this.clientHeight-el.offsetWidth) +"px";
    el.style.top = Math.min(Math.max(0,y),this.clientHeight-el.offsetHeight) +"px";
} 
```

但是让我们分析一下您的功能：

你为什么用`document.all["numero"]`？那很老了，不能在兼容的浏览器上运行，现在它是`document.getElementById('numero');`.

然后你使用`window.event`. 这适用于 IE，但您应该传递一个参数`e`（事件），如果`e`未定义（它是旧的 IE），我们将其设置为`window.event`.

当你关闭一个 CSS 规则时，不要在`}`.

**编辑：**

如果滚动页面，`numero`则定位不正确。

[在http://jsfiddle.net/enHmy/1/](http://jsfiddle.net/enHmy/1/)中修复：

```
function moveDiv(e){
    if(!e){e=window.event;}
    var el = document.getElementById('numero');
    x = e.clientX-this.offsetLeft-this.clientLeft-el.offsetWidth/2+getScroll('Left');
    y = e.clientY-this.offsetTop-this.clientTop-el.offsetHeight/2+getScroll('Top');

    el.style.left = Math.min(Math.max(0,x),this.clientHeight-el.offsetWidth) +"px";
    el.style.top = Math.min(Math.max(0,y),this.clientHeight-el.offsetHeight) +"px";
}
function getScroll(dir){
    return Math.max(document.body["scroll"+dir]||0,document.documentElement["scroll"+dir]||0);
} 
```

# openssl - Boost::asio::ssl OpenSSL 未编译

> ID：12021525
> 
> 赞同：5
> 
> 时间：2012-08-18T19:14:42.473
> 
> 标签：openssl, boost-asio

我正在使用 boost::asio::ssl。我已经通过 sudo apt-get install openssl 安装了 openssl。在我的makefile中，我通过-lssl链接openssl。

编译时出现错误：致命错误：openssl/conf.h：没有这样的文件或目录

谁能告诉我我错过了什么，或者我是否错误地包含了图书馆？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-18T19:28:19.010

您可能没有必要的开发文件。尝试安装 libssl-dev 包

```
 sudo apt-get install libssl-dev 
```

这可能会解决您的问题

# javascript - Jslint 无法识别功能错误的选项

> ID：12021534
> 
> 赞同：2
> 
> 时间：2012-08-18T19:15:57.930
> 
> 标签：javascript, jslint

我使用 JavaScript 注释来设置选项

```
/*jslint undef: false, browser: true */ 
```

根据[此处的 jslint 文档](http://www.jslint.com/lint.html)容忍错误排序的函数和变量定义。我也尝试将其设置为“true”，但这也不起作用。

但我仍然得到

> 在定义之前使用了“vFlipB”。
> 
> ```
>  vFlipB('mi_cover'); 
> ```

这个函数首先在第 299 行调用：

```
Mo.UserAny = {
    pre : function (o_p) {
        vFlipB('mi_cover');
        if ((localStorage.hash === '0') || (localStorage.hash === undefined) || (localStorage.hash === null)) {
            o_p.result = 'complete';
            Vi.Ani.flipP('sp');
            return o_p;
        } 
```

. . .

但是直到它下面才被定义：

在 958

```
/**
 **  vFlipB
 */

function vFlipB( current_id ) {

    // turn on

    var current_link = document.getElementById( current_id + '_l' ),
        current_box = document.getElementById( current_id );

    current_box.style.opacity = 1;
    current_link.style.borderBottom = '2px solid #31baed';   

    // turn off

    if( vFlipB.previous_box !== undefined && vFlipB.previous_box !== current_box ) {
        vFlipB.previous_box.style.opacity = 0;
        vFlipB.previous_link.style.borderBottom = '';  
    }

    // set current to static previous

    vFlipB.previous_box = current_box;
    vFlipB.previous_link = current_link;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:01:29.893

用这个： `/*jslint undef: true, sloppy: true, browser: true */`

根据[文档](http://www.jslint.com/lint.html#options)，该`undef`选项在严格模式下不可用。所以你需要设置`sloppy: true`（伟大的名字，嗯？）并`"use strict";`从你的 JS 文件顶部删除任何语句。（你也有`undef`reversed 的价值）。

当然，使用严格模式有[很多](https://stackoverflow.com/a/1335881/1172352) [很好的理由。](https://hacks.mozilla.org/2011/01/ecmascript-5-strict-mode-in-firefox-4/)如果你想避免警告但仍然使用严格模式，你真的只有三个选择：

*   使用 JSHint 而不是 JSLint
*   放置`"use strict";`在每个单独的函数体的顶部，而不是文件或模块的顶部。（你不能把它放在你调用 vFlipB() 的函数中——否则警告会回来）
*   更改代码以避免调用定义较低的函数。您可以重新排序您的代码，将其拆分为单独的模块，或者玩这样的技巧：

    ```
    var vFlipB;
    ...
    vFlipB();
    ...
    vFlipB = function () { ... }; 
    ```

# scala - 如何从源代码构建插件并在我的游戏应用程序中使用它

> ID：12021538
> 
> 赞同：1
> 
> 时间：2012-08-18T19:16:57.550
> 
> 标签：scala, maven, playframework-2.0, sbt, ivy

我基本上对sbt一无所知，对maven或ivy知之甚少。github上有一个play插件，我想在我的项目中修改和使用。但是，我正在努力弄清楚如何从 github 中将其拉下来并开始在我的游戏项目中使用它。我尝试了各种涉及使用 sbt 命令的事情。但是 sbt 从来没有像教程中那样表现。谁能给我一些简单的步骤来了解如何从 github 上的 Play 插件 -> 在 Play 应用程序中使用插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:12:43.517

在我看来，sbt 源依赖是出了名的善变。话虽如此，对于项目依赖来说，它们[并不太难](https://stackoverflow.com/questions/7550376/how-can-sbt-pull-dependency-artifacts-from-git)。插件上的[sbt wiki 页面](https://github.com/harrah/xsbt/wiki/Plugins)专门有一个部分，1d，关于源依赖关系，所以我建议阅读它。

# c# - 我想更新数据，但它显示了 InvaildCastException

> ID：12021540
> 
> 赞同：-3
> 
> 时间：2012-08-18T19:17:28.853
> 
> 标签：c#, c#-4.0, c#-3.0

我有班级：人，学生，老师

人员类别是：

```
public class Person
{
    private string firstname;
    private string lastname;
    private string email;

    public Person()
    {
    }
    public int CompareTo(Person b)
    {

        return this.Email.CompareTo(b.Email);
    }

    public Person(string firstname, string lastname, string email)
    {
        this.Firstname = firstname;
        this.Lastname = lastname;
        this.Email = email;
    }

    public string Firstname{get;set;}       
    public string Lastname{get;set;}
    public string Email{get;set;}

    public virtual string  GetDisplayText(string sep)
    {
        return Firstname + sep + Lastname + sep + Email;
    }

} 
```

学生班级：

```
public class Students : Person
{
    private double assessmentGrade;
    private double assignmentGrade;

    public Students()
    {
    }

    public Students(string firstname, string lastname, 
                    double assessmentGrade,double assignmentGrade,
                    string email) : base(firstname, lastname, email)
    {
        this.AssessmentGrade = assessmentGrade;
        this.AssignmentGrade = assignmentGrade;
    }

    public double AssignmentGrade{get;set;}
    public double AssessmentGrade{get;set;}

    public override string GetDisplayText(string sep)
    {
        return base.GetDisplayText(sep) + "   " + 
               AssessmentGrade + "   " + AssignmentGrade;
    }

} 
```

教师班：

```
public class Teacher : Person
{
    private int roomNumber;

    public Teacher()
    {
    }

    public Teacher(string firstname, string lastname, int roomNumber,
        string email) : base(firstname, lastname, email)
    {
        this.RoomNumber = roomNumber;
    }

    public int RoomNumber{get;set;}
     public override string GetDisplayText(string sep)
    {
        return base.GetDisplayText(sep) + " , RoomNo " + RoomNumber;
    }

} 
```

我还有一个 PersonList 类：

```
public class PersonList : List<Person>
{
    List<Person> person = new List<Person>();

    public delegate void ChangeHandler(PersonList persons);
    public event ChangeHandler Changed;

    public bool Contains(string email)
    {
        return this[email] != null;
    }

    public new void Add(Person p)
    {
        base.Insert(0, p);
    }

    // Provide two additional methods
    public void Fill()
    {
        List<Person> persons = PersonDB.GetPersons();
        foreach (Person person in persons)
            base.Add(person);
    }

    public void remove(Person persons)
    {
        person.Remove(persons);
    }

    public static PersonList operator +(PersonList persons, Person p)
    {
        persons.Add(p);
        return persons;

    }
    public static PersonList operator -(PersonList persons, Person p)
    {
        persons.remove(p);
        return persons;
    }

    public void Save()
    {

        PersonDB.SavePersons(this);
    }
} 
```

现在我正在尝试从 Form2 上传数据：

```
private PersonList persons = new PersonList();

             private void button2_Click(object sender, EventArgs e)
    {
        int i = 0;
        Form2 update = new Form2();
        Person updteDtl = (Person)lstPerson.SelectedItem;

        if (lstPerson.SelectedIndex != -1)
        {
            for (int j = 0; j < persons.Count; j++)
            {
                if (persons[j] == updteDtl)
                {
                    i = j;
                    break;
                }
            }
            update.UpdatingData = updteDtl;
            Person updatePerson = update.GetNewPerson();

            if (updatePerson != null)
            {
                persons[i] = updatePerson;
            }
        }
        else
        {
            MessageBox.Show("Select the person to update.");
        }

    } 
```

在 Form2 上，我正在尝试上传数据。

```
private Person person = null;

    public Person GetNewPerson()
    {
        this.ShowDialog();
        return person;
    }
         private Person updatingData = new Person();
    public Person UpdatingData
    {
        set { updatingData = value; }
    }
    private void Form2_Load(object sender, EventArgs e)
    {
         if (updatingData is Students)
        {
            Students std = (Students)updatingData;

            txtName.Text =  std.Firstname;
            txtLName.Text = std.Lastname;
            txtEmail.Text = std.Email;
            txtAssessGrade.Text = std.AssessmentGrade.ToString();
            txtAssigGrade.Text = std.AssignmentGrade.ToString();
        }
        else if (updatingData is Teacher)
        {
            rbTeacher.Checked = true;
            Teacher teacher = (Teacher)updatingData;

            txtName.Text = teacher.Firstname;
            txtLName.Text = teacher.Lastname;
            txtEmail.Text = teacher.Email;
            txtAssessGrade.Text = teacher.RoomNumber.ToString();

        }                     
    } 
```

我想从我在列表框中选择的 Form2 中检索数据并更新该数据但是当我运行它并单击更新按钮时，它会向我显示一个错误**无法将“System.String”类型的对象转换为“ProductMaint.Person” '。**请告诉我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:29:34.423

我假设这一行是引发异常的行：

```
Person updteDtl = (Person)lstPerson.SelectedItem; 
```

换句话说， in 中的选定项目`lstPerson`是一个字符串，而不是 a `Person`，因此您不能将其强制转换为 a `Person`。

不幸的是，尽管您向我们展示了数百行代码，但您没有告诉我们`lstPerson`或为什么您*希望* `lstPerson.SelectedItem`成为`Person`. （你甚至没有告诉我们你正在编写什么样的应用程序。）

这就是你的问题的原因，它与你发布的代码几乎没有关系——所以专注于那部分。要么更改绑定到列表的方式，要么根据`SelectedItem`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:44:04.397

我的猜测是问题出在这一行：

```
Person updteDtl = (Person)lstPerson.SelectedItem; 
```

显然这返回一个字符串，而不是一个`Person`对象。我实际上不确定是否可以`Person`在下拉列表中存储一个对象，例如一个实例（我假设这是什么`lstPerson`？）。

一种解决方案可能是使用其中一个字段来识别每个人，并将其用作下拉列表中项目的值（例如，电子邮件可能对每个人都是唯一的？否则，`PersonId`为只是这个目的）。由于下拉列表中的每个项目都可以同时`value`显示一个字段和一个文本字符串，因此您可以使用 ID 作为值，并使用名称（或任何您想要的名称）作为显示文本。

在事件处理程序中，您必须获取`value`，并使用它来查找`Person`列表中的人员。然后，您可以使用表单中的其余数据更新该人。

我希望我正确理解了您的问题，并且这很清楚可以提供一些帮助，祝您好运！

# java - java中的多态是如何实现的？

> ID：12021542
> 
> 赞同：5
> 
> 时间：2012-08-18T19:17:32.563
> 
> 标签：java, oop, polymorphism

在 Java 中，所有公共非静态方法都是虚拟的。这意味着调用哪个方法取决于运行时（动态绑定）。在 C++ 中，虚函数（动态绑定）是通过使用 vpointer 和 vtable 来实现的。我想知道Java是如何实现的。Java 是否也像 C++ 一样使用 vpointer 和 vtable 或其他一些技术来知道在运行时调用哪个方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T19:22:12.123

vtables，如[https://wikis.oracle.com/display/HotSpotInternals/VirtualCalls中所述](https://wikis.oracle.com/display/HotSpotInternals/VirtualCalls)

[编辑 Tomasz 在问题评论中提出了一个很好的观点——这是针对 Oracle 的热点]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:25:43.500

既然这是 Java 虚拟机的世界，故事就不那么简单了。您能做的最好的事情就是了解所有各种特殊情况所采用的所有数十种技巧。这不是一个糟糕的起点：[内联缓存](http://en.wikipedia.org/wiki/Inline_caching)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T19:32:48.300

基本上，它是（概念上）使用虚函数表实现的，并对其进行索引。但是有许多曲折，特别是“invokespecial”调用和接口调用，需要额外/不同的处理。

在实践中，大量的数据被缓存，以提高调用效率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T04:43:42.430

并非所有非静态方法都在运行时绑定。在某些情况下，可以在编译时确定需要调用哪个版本的方法。特别是，当编译器可以 100% 确定需要调用哪个方法时。一种这样的简单情况：

```
public class Foo {
   public final void foo() { ... }

   public void bar() { ... }

   public void bar(String s) { ... }
}

Foo foo = new Foo();
// All three of these could would be bound at compile time.
foo.foo();
foo.bar();
foo.bar("baz"); 
```

还有一些基于重载的情况，可以确定编译时绑定。我不是 100% 确定所有不同的情况是什么，但有一些。

这是一篇关于这个主题的好文章：

[http://www.dzone.com/links/r/difference_between_static_and_dynamic_binding_in.html](http://www.dzone.com/links/r/difference_between_static_and_dynamic_binding_in.html)

# java - Java - 加载带注释的类

> ID：12021543
> 
> 赞同：24
> 
> 时间：2012-08-18T19:17:40.493
> 
> 标签：java, annotations, classloader

我知道有一组令人难以置信的工具可以在 java 中加载插件类，但今天我想到了一个想法。

如果我在包“org.home.junk”中有一堆带注释和未注释的类（使用注释“@AnnotatedClass”进行注释）并且这些类具有带有注释“@AnnotatedMethod”的注释方法。

**第一个问题：**我能否在运行时获取该特定包中所有类的数组/集合，以便我可以检查哪些类被注释并创建它们的实例。（但是我知道如何检查 Some.class 是否有本指南提供的注释：http: [//isagoksu.com/2009/development/java/creating-custom-annotations-and-making-use-of-them/](http://isagoksu.com/2009/development/java/creating-custom-annotations-and-making-use-of-them/)）

**第二个问题：** - 如果我可以在第一个问题中做我想做的事 - 这样做最政治化的方式是什么？

我相信这是可能的，因为我了解 JUnit 以某种类似的方式加载测试用例类。

如果这可以用最少的第三方库等来完成，那也会很酷 - 如果可能的话:)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-18T20:23:05.027

**第一个答案：**看看[这个项目](http://code.google.com/p/reflections)。

```
Reflections reflections = new Reflections("org.home.junk");
Set<Class<?>> annotated = reflections.getTypesAnnotatedWith(javax.persistence.Entity.class); 
```

它返回`org.home.junk`带有`javax.persistence.Entity`注释的所有类。

**第二个答案：**要创建上述类的新实例，您可以这样做

```
for (Class<?> clazz : annotated) {
    final Object newInstance = clazz.newInstance();
} 
```

希望这能回答一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T19:31:37.320

如果您有 Spring（第 3 方，抱歉 :-)），请使用[org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/context/annotation/ClassPathScanningCandidateComponentProvider.html)

可以在[这个 SO question中找到代码使用示例](https://stackoverflow.com/questions/259140/scanning-java-annotations-at-runtime)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T20:50:14.700

它可以通过检查文件系统的技术来完成，因为它更多的是类加载器问题而不是反射问题。检查一下：[你能使用反射找到包中的所有类吗？](https://stackoverflow.com/questions/520328/can-you-find-all-classes-in-a-package-using-reflection).

如果可以查看某个目录下存在的所有类文件，使用该方法就可以很方便的获取到对应的类

```
Class<?> klass = Class.forName(className) 
```

知道一个类是否被注释是一个反射问题。获取类中使用的注解是这样完成的：

```
Annotation[] annotations = klass.getAnnotations(); 
```

请务必使用在运行时可见的保留策略类型定义您的自定义注释。

```
@Retention(RetentionPolicy.RUNTIME) 
```

这篇文章是获取更多信息的好资源：http: [//tutorials.jenkov.com/java-reflection/annotations.html](http://tutorials.jenkov.com/java-reflection/annotations.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T20:02:00.113

这完全取决于您对注释的要求。

比如`@EJB`：这个注解的设计是为了让容器识别和执行 EJB 特定的工作，这需要扫描文件然后找到这样的类。

但是，如果您的要求只是启用基于注释的特定功能，那么您可以仅使用 java 反射来实现

例如`@NotNull`：此注释是在 JSR 303 中设计的，用于验证 Annotated 元素不为空。此功能可以在运行时使用反射 API 轻松实现

# c++ - 未使用 SDL 执行的程序

> ID：12021545
> 
> 赞同：0
> 
> 时间：2012-08-18T19:17:58.563
> 
> 标签：c++, windows, eclipse, sdl

我运行这个程序，在控制台中看不到任何输出，它立即终止。我究竟做错了什么？

编码：

```
#include <iostream>
#include <SDL/SDL.h>

using namespace std;

int main(int argc, char *argv[]) {
  //The images

cout << "Hello World" << endl;

    SDL_Surface* hello = NULL;
    SDL_Surface* screen = NULL;

    //Start SDL
    SDL_Init( SDL_INIT_EVERYTHING );

    //Set up screen
    screen = SDL_SetVideoMode( 640, 480, 32, SDL_SWSURFACE );

    //Load image
    hello = SDL_LoadBMP( "heldlo.bmp" );

    //Apply image to screen
    SDL_BlitSurface( hello, NULL, screen, NULL );

    //Update Screen
    SDL_Flip( screen );

    //Pause
    SDL_Delay( 20000 );

    //Free the loaded image
    SDL_FreeSurface( hello );

    //Quit SDL
    SDL_Quit();

    return 0;
} 
```

使用 minGW，传递库：

mingw32 SDLmain SDL

main 方法的签名似乎是正确的，就像这里： [simple tcp echo program not working when SDL include?](https://stackoverflow.com/questions/10877885/simple-tcp-echo-program-not-working-when-sdl-included)

或者在这里，声明链接器子系统必须是控制台： [http ://www.gamedev.net/topic/376205-defeating-sdl-linker-errors-in-visual-studio-net/](http://www.gamedev.net/topic/376205-defeating-sdl-linker-errors-in-visual-studio-net/)

所以我尝试通过

`-Wl,--subsystem,console -mconsole`编译器和链接器。这构建并启动并且和以前一样，没有输出，没有窗口。

对我来说，传递选项控制台没有意义，因为我实际上想看到一个窗口，但我是一个完全的菜鸟，所以我不知道。只是读到有人说 SDL 需要使用控制台选项运行程序，或者将 main 方法更改为`WinMain`. 但是他们也说这没有意义，SDL 应该与`main`.

我还做了一个测试，将“windows”而不是“console”传递给链接器和编译器，也没有成功（它的行为相同）。

我也不明白为什么我在控制台中看不到输出。如果我删除所有 SDL 内容（特别是包含），它将显示输出。由于它的执行速度也非常快，所以我的 main 方法可能根本没有被执行。

有什么帮助...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:35:16.360

SDL 将标准输出重定向到文件（stdout.txt、IIRC）。您应该在运行程序的目录中找到它。

检查 的返回值`SDL_SetVideoMode()`，它必须是非 NULL。您的系统可能不支持像 640x480 这样的分辨率。

# forms - VS Extension dev：是否有内置按钮图标列表？

> ID：12021546
> 
> 赞同：0
> 
> 时间：2012-08-18T19:17:58.447
> 
> 标签：forms, button, icons

我正在开发一个 Visual Studio 扩展。查看一些示例，我注意到按钮的内置图标，例如刷新按钮：

```
<Icon guid="guidOfficeIcon" id="msotcidRefresh"/> 
```

我的问题是：是否有此图标组“guidOfficeIcon”的可用 ID 列表？在网上挖掘，我发现了其他一些：msotcidClock、msotcidNoIcon、msotcidGears……但如果能列出所有这些，那就太好了。

感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:37:35.103

我只是花了几个小时寻找同样的东西。该文件可以在 Program Files\Microsoft Visual Studio 2010 SDK\VisualStudioIntegration\Common 中找到。在完美的 20/20 事后看来，答案就在我们眼前，由 vs 包向导创建的 vcst 文件指定

```
<!--This is the file that defines the IDs for all the commands exposed by VisualStudio. -->
<Extern href="stdidcmd.h"/>
<!--This header contains the command ids for the menus provided by the shell. -->
<Extern href="vsshlids.h"/>
<!--Definition of some VSCT specific constants. In this sample we use it for the IDs inside the guidOfficeIcon group. -->
<Extern href="msobtnid.h"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T04:44:57.050

过了一段时间，我终于找到了。图像 ID 列表可在文件 msobtnid.h 中找到，该文件可在此处找到。

[https://bitbucket.org/NickJosevski/jslint-for-vs2010-cli/src/b1e25667521e/vssdk_tools/Inc/office10/msobtnid.h](https://bitbucket.org/NickJosevski/jslint-for-vs2010-cli/src/b1e25667521e/vssdk_tools/Inc/office10/msobtnid.h)

# java - 如何比较列表和字符串数组（Java）？

> ID：12021548
> 
> 赞同：1
> 
> 时间：2012-08-18T19:18:11.333
> 
> 标签：java, android, arrays, string, list

我正在为 Android 编写一个应用程序。我使用字符串数组从共享首选项中提取所有玩家名称（必须是字符串数组）。我有一个列表可以从共享偏好中提取所有活跃玩家（必须是一个列表）。我需要检查我的列表以查看它是否包含任何不在我的播放器数组中的播放器并删除它们。我似乎无法弄清楚其中的逻辑。

例如：

列表包含： b c a e

数组包含： a b c d

由于 'e' 存在于 List 但不存在于 Array 中，因此需要从列表中删除 'e'。我知道命令（.contains()、.remove()、for()），但我无法弄清楚逻辑。

我的第一次尝试是：

```
for(int x=0;x<numOfPlayers;x++){
        players[x] = getPrefs.getString("player"+Integer.toString(x), " ");
        if(activePlayers.size()>0)
            if(activePlayers.contains(players[x]))
                playersChecked[x] = true;
        else{
            if(x<activePlayers.size())
                activePlayers.remove(x);
        }
    } 
```

但是如果 player[x] 有一个 activePlayers 没有的项目，这会从 activePlayers 中删除 x，这很好。它需要反过来。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T19:22:26.963

您正在寻找的是[`Collection.retainAll`](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#retainAll(java.util.Collection)).

> 仅保留此集合中包含在指定集合中的元素

```
list.retainAll(Arrays.asList(array)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:30:30.460

重要的一点会让你的生活变得困难，你的方法会产生不必要的后果。移除一个玩家会改变列表中的元素，所以你最终会跳过玩家。

例如，在列表中：

{甲，乙，丙}

如果你删除 B，你最终会得到：

{ A, C }

当 x 增加时，你最终会得到 x = 3，它曾经指向 C。但现在它什么都不指向。

相反，请考虑使用迭代器。请参阅： [Java 中的迭代器](https://stackoverflow.com/questions/2889571/iterator-in-java)

这将允许您在不破坏索引的情况下删除元素。

因此，为了回答您的问题，我将在 activePlayers 上创建一个迭代器。迭代时，只需对照列表检查迭代器中的每个项目，如果未找到则删除该项目。

# wordpress - 受 .htaccess 和 WordPress 保护的目录

> ID：12021554
> 
> 赞同：0
> 
> 时间：2012-08-18T19:18:36.083
> 
> 标签：wordpress, .htaccess, authentication, .htpasswd

我在 public_html 目录的根目录中有一个标准的 WordPress 安装，带有这个 .htaccess：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

我想用 AuthType Basic 保护包含其他应用程序的目录 /manager，所以我的 .htaccess 看起来像：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,L]

AuthUserFile .htpasswd
AuthType Basic
AuthName "Admin Area"
Require valid-user 
```

这是我的基本结构：

```
/.htaccess
/index.php
/manager/.htaccess
/manager/index.php 
```

现在，当我尝试访问 /manager 目录时，我从我的 WordPress 安装中收到 404 Not Found。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:04:27.320

每当我启用了重写和密码保护时，我都会遇到一些像你一样的问题，并且将以下两行添加到我的 htaccess 文件中总是可以修复它们，试试吧：

```
ErrorDocument 401 default
ErrorDocument 403 default 
```

**编辑 ：**

更改此行：

```
RewriteRule ^(.*)$ index.php [QSA,L] 
```

对此：

```
RewriteRule ^(.*)$ /manager/index.php [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:18:17.490

您需要更改根目录中的 .htaccess 以从 WordPress 使用的重写规则中删除目录 /manager（通过 index.php 处理所有内容）

所以你需要像这样添加一个新的重写条件；

```
# BEGIN WordPress

<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.php$ - [L]

  RewriteCond %{REQUEST_URI} !^/( manager|manager/.*)$
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

# javascript - JSlint 错误 selectedDate 已定义

> ID：12021560
> 
> 赞同：1
> 
> 时间：2012-08-18T19:19:26.280
> 
> 标签：javascript, jslint

当我在这段代码上运行 JSlint 时，我得到了这个错误

> 错误：第 25 行字符 26 处的问题：“selectedDate”已定义。var selectedDate = new Date(selectedDate);
> 
> 隐含全局：$1,4,13,14,26,27,28,31,33,34,42，updateSelects 13,19,21

[http://jsfiddle.net/bzPYg/](http://jsfiddle.net/bzPYg/)

我认为它指的是这段代码

```
'dateSelected', function(e, selectedDate, $td, state) {
    updateSelects(selectedDate); 
```

我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:22:38.570

错误可以解释自己。

> 第 25 行字符 26 处的问题：“selectedDate”已定义。var selectedDate = new Date(selectedDate);

您将再次声明变量 selectedDate，并使用一个新的 Date 对象填充它，该对象采用原始变量 selectedDate 的值。您应该将变量重命名为其他名称。

```
var date = new Date(selectedDate); 
```

只是要注意这里发生了错误：

```
var updateSelects = function(selectedDate) {
   var selectedDate = new Date(selectedDate);
   ...
}); 
```

# c# - 自动将目录结构从网页下载到闪存驱动器

> ID：12021568
> 
> 赞同：0
> 
> 时间：2012-08-18T19:20:06.530
> 
> 标签：c#, javascript, asp.net, .net, activex

我已经创建了一个带有内部闪存驱动器的产品，我希望允许它在插入计算机时以最少的用户交互从我的网站下载目录结构。我的问题是，什么样的技术可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:41:52.557

1.  使用嵌入在您的内部闪存中的 Windows 来拥有包含所有强制二进制文件的最小 Windows 操作系统

    1.  使用 WebClient 类从您的网站文件中逐个下载您的目录结构

        使用 System.Net；

        WebClient webClient = new WebClient(); webClient.DownloadFile("http://mysite.com/myfile.txt", @"c:\myfile.txt");

    2.  这可能是一个 Windows 服务（自动启动），它检查目录是否存在，如果不存在，它会下载您的目录结构。请注意，您必须检测计算机提供的驱动器才能制作本地副本（F：或...）

# https - PhantomJS 无法打开 HTTPS 站点

> ID：12021578
> 
> 赞同：104
> 
> 时间：2012-08-18T19:21:53.667
> 
> 标签：https, screen-scraping, phantomjs

我正在使用以下基于 loadspeed.js 示例的代码来打开一个 https:// 站点，该站点也需要 http 服务器身份验证。

```
var page = require('webpage').create(), system = require('system'), t, address;

page.settings.userName = 'myusername';
page.settings.password = 'mypassword';

if (system.args.length === 1) {
    console.log('Usage: scrape.js <some URL>');
    phantom.exit();
} else {
    t = Date.now();
    address = system.args[1];
    page.open(address, function (status) {
        if (status !== 'success') {
            console.log('FAIL to load the address');
        } else {
            t = Date.now() - t;
            console.log('Page title is ' + page.evaluate(function () {
                return document.title;
            }));
            console.log('Loading time ' + t + ' msec');
        }
        phantom.exit();
    });
} 
```

它一直无法加载页面。这里有什么问题？安全站点的处理方式是否有所不同？但是，可以从浏览器成功访问该站点。

我现在才刚开始使用 Phantom，发现即使我没有继续解决这个问题，也不能停止玩耍。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2014-07-10T14:24:22.553

我尝试了 Fred 和 Cameron Tinker 的答案，但只有**--ssl-protocol=any**选项似乎对我有帮助：

```
phantomjs --ssl-protocol=any test.js 
```

此外，我认为使用它应该更安全，`--ssl-protocol=any`因为您仍在使用加密，但`--ignore-ssl-errors=true`会忽略（duh）所有 ssl 错误，包括恶意错误。

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2012-08-31T17:53:08.460

该问题很可能是由于 SSL 证书错误。如果您使用**--ignore-ssl-errors=yes**选项启动 phantomjs，它应该继续加载页面，就像没有 SSL 错误时一样：

```
phantomjs --ignore-ssl-errors=yes [phantomOptions] script.js [scriptOptions] 
```

我已经看到一些网站在错误地实现其 SSL 证书或它们已过期等方面存在问题。phantomjs 的命令行选项的完整列表可在此处获得：http://phantomjs.org/api/command-line [。 .html](http://phantomjs.org/api/command-line.html) _ 我希望这有帮助。

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2014-10-17T04:00:05.287

请注意，截至 2014 年 10 月 16 日，PhantomJS 默认使用 SSLv3 来打开 HTTPS 连接。随着最近公布[的 POODLE 漏洞，许多服务器正在禁用 SSLv3 支持。](https://community.qualys.com/blogs/securitylabs/2014/10/15/ssl-3-is-dead-killed-by-the-poodle-attack)

为了解决这个问题，您应该能够运行 PhantomJS：

```
phantomjs --ssl-protocol=tlsv1 
```

希望 PhantomJS 将很快更新以使 TLSv1 成为默认设置，而不是 SSLv3。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2013-06-14T05:20:58.767

遇到同样的问题...
--ignore-ssl-errors=yes 不足以为我修复它，必须再做两件事：
1）更改用户代理
2）尝试了所有 ssl 协议，唯一一个有效的有问题的页面是 tlsv1
希望这有帮助......

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2014-12-08T10:35:30.030

我遇到了同样的问题（casperjs 1.1.0-beta3/phantomjs 1.9.7）。使用 --ignore-ssl-errors=yes 和 --ssl-protocol=tlsv1 解决了它。仅使用其中一个选项并没有为我解决问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-07T17:02:16.100

我收到

> 从 phantomJS（在 CentOS 6.6 上运行）创建 SSL 上下文时出错

从源头构建为我修复了它。不要忘记使用您构建的 phantomjs。（而不是 /usr/local/bin/phantomjs 如果你有它）

```
sudo yum -y install gcc gcc-c++ make flex bison gperf ruby openssl-devel freetype-devel fontconfig-devel libicu-devel sqlite-devel libpng-devel libjpeg-devel
git clone git://github.com/ariya/phantomjs.git
cd phantomjs
git checkout 2.0
./build.sh
cd bin/
./phantomjs <your JS file> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-25T14:44:47.010

如果有人将 Phantomjs 与 Sahi 一起使用，则该`--ignore-ssl-errors`选项需要进入您的 browser_types.xml 文件。它对我有用。

```
<browserType>
    <name>phantomjs</name>
    <displayName>PhantomJS</displayName>
    <icon>safari.png</icon>
    <path>/usr/local/Cellar/phantomjs/1.9.2/bin/phantomjs</path>
    <options>--ignore-ssl-errors=yes --debug=yes --proxy=localhost:9999 /usr/local/Cellar/phantomjs/phantom-sahi.js</options>
    <processName>"PhantomJS"</processName>
    <capacity>100</capacity>
    <force>true</force>
</browserType> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-17T07:49:42.210

# 怎么样`shebang`？

如果您使用 shebang 执行`phantomjs`脚本，请使用以下 shebang 行

```
#!/usr/bin/phantomjs --ignore-ssl-errors=yes

var system = require('system');
var webpage = require('webpage');

// ... rest of your script 
```

使用上述任何答案。我个人喜欢`--ignore-ssl-errors=yes`，因为验证我的环回 Web 服务器的自签名证书是无关紧要的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-09T20:12:04.793

这里的其他答案都没有帮助我；可能是我正在使用的特定站点对其 HTTP 标头过于挑剔。这是有效的：

```
var page = webpage.create();
page.customHeaders = {
    "Connection": "keep-alive"
}; 
```

我发现 PhantomJS 正在使用“Keep-Alive”（大写），并且连接没有保持活动状态。:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-03T20:57:44.650

`SSL Handshake Failed`我昨天得到了。我尝试了许多 phantomJS 选项（`--ignore-ssl-errors=yes`等）的组合，但没有一个起作用。

升级到 phantomJS 2.1.1 修复了它。

[我使用了https://gist.github.com/julionc/7476620](https://gist.github.com/julionc/7476620)上的 phantomJS 安装说明，将 phantomJS 版本更改为 2.1.1。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-11T00:49:07.487

在您尝试运行 phantomjs 以连接到远程服务器的机器上，运行“openssl ciphers”。将列出的密码复制并粘贴到 --ssl-ciphers="" 命令行选项中。这会告诉连接的 Web 服务器哪些密码可用于与您的客户端通信。如果您没有在自己的机器上设置可用的密码，它可以使用您的机器不理解的任何密码，默认现代浏览器会使用默认设置。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2018-10-12T10:17:31.950

唯一对我有用的是将 phantomjs 从 1.9x 升级到 2.x ;)

# objective-c - NSFont 绘图高度

> ID：12021582
> 
> 赞同：2
> 
> 时间：2012-08-18T19:22:18.400
> 
> 标签：objective-c, cocoa, core-graphics, nsview, nsfont

当我为 NSFont 设置 pointSize 时，输出文本不会达到点大小的确切高度，例如，当我将其设置为 20.0 时，大写 B 的输出文本为 17.0 像素高。由于我使用它在 NSView 上绘制文本，这给我带来了一些测量问题。有没有准确的方法来测量文本的最大高度？

我正在用这种方法绘制字符串： [stringValue drawInRect:stringRect withAttributes:stringAttributes];

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:24:59.320

请参阅Cocoa 文档中的[字体处理](https://developer.apple.com/library/mac/documentation/TextFonts/Conceptual/CocoaTextArchitecture/FontHandling/FontHandling.html#//apple_ref/doc/uid/TP40009459-CH5-SW18%20%22Querying%20font%20metrics)。向下滚动到“查询字体指标”：这清楚地显示了如何使用不同的指标，如下降、上升和前导。

# javascript - JSON 请求返回 .txt 文件

> ID：12021591
> 
> 赞同：0
> 
> 时间：2012-08-18T19:23:24.907
> 
> 标签：javascript, jquery, json, jsonp, local-storage

我对世界银行提供的数据有这些困难。当我进行数据调用时，一切都很好（我收到了有效的 JSON）。但由于我使用的是项目 API，因此 JSON 请求会返回一个 .txt 文件。

我的问题是：我可以用 JS 或 jQuery 解释这个 .txt 文件吗？或者我可以将它存放在 localStorage 中吗？

项目链接示例：http: [//bit.ly/N8cFxO](http://bit.ly/N8cFxO)

```
{"rows":10,"os":"0","page":"1","total":"0","projects":{}} 
```

（我知道这个链接不包含任何项目）

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:25:43.013

是的，您可以使用 jquery $.parseJSON() 函数将其转换为 json 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:46:34.280

我通过使用本地文件解决了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T19:25:20.430

只要文件的内容是一个有效的 JSON 字符串，那么您就可以毫无问题地解析它。

对于您链接的文件，它是有效的 JSON，因此可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T19:28:54.757

逐行读取流中的 .txt 文件并解析 JSONObject。

```
 URL url = new URL("Your api link");

 BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
    while ((line = in.readLine()) != null) {
    JSONObject jobject = new JSONObject(line);
    //parse your JSON data 
    } 
```

# javascript - stopPropagation 是否还会阻止同一元素上的其他处理程序运行？

> ID：12021602
> 
> 赞同：0
> 
> 时间：2012-08-18T19:24:36.787
> 
> 标签：javascript, jquery, contextmenu, jquery-events

我知道这会`stopPropagation()`阻止事件到达包装当前元素的 DOM 元素。它是否还会阻止此事件传递给同一元素上的其他处理程序？

举个例子，我在一个元素上定义了我自己的点击处理程序。此外，我还在使用这个[jQuery 上下文菜单](http://www.abeautifulsite.net/blog/2008/09/jquery-context-menu-plugin/)插件，它处理 a`mousedown+(testbutton == 2)+mouseup`并`stopPropagation()`在 mouse(up|down) 之后使用，这似乎禁用了我的点击处理程序。如果我在插件源代码中注释这两个调用，我的单击处理程序和上下文菜单将正常工作。这似乎暗示了这一点`stopPropagation()`并`stopImmediatePropgation()`做同样的事情。我的理解正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T19:32:07.240

`stopPropagation`不会停止同一事件的其他处理程序，但在这种特定情况下会停止。如果在`mousedown`事件中使用它，它将阻止`click`事件。

演示：http: [//jsfiddle.net/v6ges/](http://jsfiddle.net/v6ges/)

```
$('div').mousedown(function(e){ alert(0); e.stopPropagation(); });
$('div').click(function(e){ alert(1); e.stopPropagation(); });
$('div').click(function(e){ alert(2); e.stopPropagation(); }); 
```

仅`mousedown`触发事件。如果您注释掉`mousedown`事件绑定，这两个`click`事件都会被触发。

# android - Android 服务保持活力

> ID：12021606
> 
> 赞同：6
> 
> 时间：2012-08-18T19:24:53.347
> 
> 标签：android, service

我有一个小型聊天应用程序。当它启动时，它绑定到一个服务。该服务与服务器有一个 tcp/ip 连接。

当应用程序不在前台时，我的服务会创建状态通知。到现在为止还挺好。

当应用程序被销毁时，例如在“onDestroy”方法上使用任务管理器，我调用 unbind。现在服务被杀死了。所以我的问题是我如何让服务保持活力，即使没有客户绑定它。

Googe doc：“只要建立连接，服务就会保持运行（无论客户端是否保留对服务的 IBinder 的引用）。”

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T19:33:00.007

您可以将您的服务设为前台服务，它会在通知栏中显示一个图标，以便用户可以看到您的服务正在运行。否则，您*将无法*保持服务运行。顺便说一句，您应该知道，永久服务是一种 Android 反模式，系统*应该*能够在内存不足时关闭您的应用程序，并且应用程序有一段时间没有使用它。如果您正在做一些合法地需要“永远”生活的事情，那么您应该使用前台服务来做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T19:53:37.203

读这个：

[http://developer.android.com/guide/components/services.html#Foreground](http://developer.android.com/guide/components/services.html#Foreground)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T19:56:57.817

如果你想在你的 binder Activity 被销毁的情况下保持你的服务活着，你可以先在 Activity 中启动你的服务，然后调用 bindService：

```
startService(serviceIntent);

bindService(serviceIntent, connection, Context.BIND_AUTO_CREATE); 
```

# python - 使用诡计的 Python 上的 Django 错误

> ID：12021607
> 
> 赞同：3
> 
> 时间：2012-08-18T19:25:12.153
> 
> 标签：python, django, linux, pythonpath, archlinux

我刚刚安装了一个名为：Subterfuge on Arch Linux 32-bit 的新 MiTM 软件[，](http://code.google.com/p/subterfuge) 但是当我尝试以 sudo 运行它时，出现以下错误：

```
Traceback (most recent call last):
  File "/usr/share/subterfuge/manage.py", line 2, in <module>
    from django.core.management import execute_manager
ImportError: No module named django.core.management 
```

我在这里发帖是因为我相信这是与 Python 路径相关的一般错误，但是我不知道如何解决它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:25:39.377

好的。问题解决了。

用户“Steve K”在此线程中提供了解决方案： [django import error - No module named core.management](https://stackoverflow.com/questions/6049933/django-import-error-no-module-named-core-management)

我“vimed”了这个文件的第一行： `/usr/share/subterfuge/manage.py`

并更改了以下行： `#!/usr/bin/env python`

至

`#!/usr/bin/env python2`

显然，python 指向了我系统上的 python 3，这就是无法处理该文件的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:32:26.577

看起来模块 'django.core.management' 没有安装......是否已将其添加到 settings.py 的 INSTALLED_APP 中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:08:57.320

你确定 django 已经安装了吗？

Django 在 python 3 上仍处于试验阶段

试试：python -c 'import django'

实验性 Python 3 支持

通过艾默里克·奥古斯丁（Aymeric Augustin）于 2012 年 8 月 19 日

Django 项目今天达到了一个重要的里程碑：Django 的开发版本首次通过了 Python 3.2 下的测试套件，带有 SQLite 和 PostgreSQL 后端。

鼓励社区测试这个 pre-alpha 版本并报告 Python 3 下的错误以及 Python 2 下的回归。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-30T23:41:59.350

首先安装 python-pip。

> apt-get 安装 python-pip

然后运行诡计 setup.py

> 蟒蛇安装程序.py

它将与它一起安装 Django。但是您可以通过以下方式手动安装 Django

> pip install django=="1.7"

**注意：**目前它支持 django 1.7

# objective-c - iPad View 无法正确传输到 iPad

> ID：12021608
> 
> 赞同：0
> 
> 时间：2012-08-18T19:25:15.157
> 
> 标签：objective-c, xcode, ipad, view

我有一个带有两个 iPad 视图（一个纵向，一个横向）的 XIB。每个按钮大约有 7 个按钮，当我在 Xcode XIB 构建器中时，它们会填满整个视图。我已将我的观点选择为模拟指标上的“iPad”。但是，当我运行模拟器或将应用程序发送到我的设备时，我的按钮显得非常小，只占据了 iPad 的一角。

我已经看到其他人和观点的问题，但没有一个是这个特定的问题。

我有另一个适用于 iPhone 的 XIB 文件，效果很好。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T09:53:45.383

检查两种可能性 -

1.  当您在 xCode 中添加 xib 或最初添加该 xib 的类时，您检查选项“iPad”。如果您这样做了

2.如果您干扰了自动调整大小属性，请在界面生成器中检查，然后将其设置为默认值。

# html - 如何在不明确指定/硬编码的情况下设置“当前孩子”的相对路径？

> ID：12021609
> 
> 赞同：4
> 
> 时间：2012-08-18T19:25:19.010
> 
> 标签：html, path

这应该相对容易，但由于某种原因，我无计可施。可能需要休息一下：）

当前页面：`/Home/Desk/Drawer`

如何最好地在不引用抽屉的情况下指定指向“抽屉内”项目的链接？即单击一个项目带您到：`/Home/Desk/Drawer/Item`。目前我已经看到我们的网络应用程序存储了一个带有名称的局部变量`Drawer`（因为它不是一个固定的名称，而是`/a/b/c/d`层次结构中结构定位的元素。它甚至可能没有被命名`Drawer`为某些表示。

很多时候，我默认使用`document.URL`或让服务器生成具有该名称的隐藏字段。听起来和感觉很杂乱。任何相对论的方式来访问**当前父/节点/位置的孩子**？

前任。：`<a href = "what to put here to link to Item"> == /Home/Desk/Drawer/Item`

**更新：**这是一个 JS 密集型前端，Java 后端在 Glassfish/Tomcat 上运行。我不确定这是否重要。如果它是一种服务器端的生成方式，那么这就是我们现在所做的。我更感兴趣的是知道这是否可以简单地使用 HTML :) （我最初的猜测是否定的；但它仍然是一个*猜测*）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:47:31.867

您的要求称为 URL 映射，这是通过在 Web 服务器的配置文件中指定映射来完成的。

在 JSP/JSF 中，这是通过[导航规则完成的](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSFConfigure7.html)

对于 GlassFish，以下链接很有用：-
[使用 glassfish 和 spring 进行 URL 映射](https://stackoverflow.com/questions/4651688/url-mapping-with-glassfish-and-spring)

对于 Tomcat：-
[http://www.datadisk.co.uk/html_docs/java_app/tomcat6/tomcat6_web_config.htm](http://www.datadisk.co.uk/html_docs/java_app/tomcat6/tomcat6_web_config.htm)

[此链接基于 Javascript HTML，但智能导航器可以捕捉到它。](http://www.openjs.com/articles/ajax/target_url_hiding.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T19:45:33.703

我不确定我是否完全理解您的问题，但为什么不简单地使用类似的相对链接`<a href="./Item">...</a>`？

编辑：创建文件夹结构 home/desk/drawer/item 并将其放在抽屉/index.html 中：

```
<html>
<head><title>Drawer</title></head>
<body>
<h1>Drawer</h1>
<a href="./item">item/index.html</a>
</body>
</html> 
```

这在 item/index.html

```
<html>
<head><title>Item</title></head>
<body>
<h1>Item</h1>
</body>
</html> 
```

用您的浏览器打开抽屉/index.html 并单击链接——瞧，您已经到达 item/index.html。

# r - 使用 R 进行网络爬虫

> ID：12021620
> 
> 赞同：0
> 
> 时间：2012-08-18T19:26:57.697
> 
> 标签：r, if-statement, for-loop, web-crawler

我有一个问题需要帮助。我需要创建一段可以加载到 csv 文件中的 R 代码。csv 文件包含一个名为“Link”的列，每个 i(Row) 都有一个链接，代码需要从该链接下载链接的内容并将其放在单独的 csv 文件中。到目前为止，我已经设法找到并修改了下面显示的代码。（感谢 Christopher Gandrud 和合著者）

```
library(foreign)
library(RCurl)

addresses <- read.csv(">>PATH TO CSV FILE<<")

for (i in addresses) full.text <- getURL(i)

text <- data.frame(full.text)

outpath <-">>PATH TO SPECIFIED FOLDER<<"

x <- 1:nrow(text)

for(i in x) {
  write(as.character(text[i,1]), file = paste(outpath,"/",i,".txt",sep=""))
} 
```

实际上代码运行良好，但问题是我的请求使服务器超载，所以在从 100-150 个链接下载了正确的内容后，文件只是空的。我知道这是问题所在，因为我已经多次测试它，但链接数量正在减少。其实如果我当时只下载100个链接是没有问题的。超过 100 它开始成为一个问题。尽管如此，我需要在这段代码中实现一些东西，让它成为这个特定任务的一个很好的爬虫。

我把我的问题一分为二，因为解决问题一应该暂时解决这个问题。

1.  我想为每 100 次下载使用 Sys.Sleep 功能。因此，代码为前 100 个链接触发 100 个请求，然后在触发下一个 100 个请求之前暂停 x 秒...

2.  对我的数据集/csv 文件中的所有行/链接完成此操作后，我需要它来检查每个 csv 文件的两个条件。它们不能为空，也不能包含服务器在某些特殊情况下给我的特定错误消息。如果这两个条件之一为真，则需要将文件名（链接号）保存到我可以从那里使用的向量中。

哇这个问题突然变得很长。我意识到这是一个很大的问题，我问了很多。这是我的硕士论文，不是关于 R 编程的，但我需要从很多我可以访问的网站下载内容。接下来我要分析内容，这就是我的论文的内容。欢迎任何建议/意见。

* * *

```
 library(foreign)  
 library(RCurl)  

 addresses <- read.csv("~/Dropbox/Speciale/Mining/Input/Extract post - Dear Lego n(250).csv")  

 for (i in addresses) {  
+   if(i == 50) {  
+     print("Why wont this work?")  
+     Sys.sleep(10)  
+     print(i)  
+   }  
+   else {  
+     print(i)  
+   }  
+ } 
```

“然后是加载的链接的完整列表。在 i == 50 处没有“为什么这不起作用”，然后是

警告信息

```
In if (i == 100) {:
 the condition has length > 1 and only the first element will be used  
full.text <- getURL(i)  
text <- data.frame(full.text)  
outpath <-"~/Dropbox/Speciale/Mining/Output"  
x <- 1:nrow(text)  
for(i in x) {  
write(as.character(text[i,1]), file = paste(outpath,"/",i,".txt",sep=""))} 
```

能帮助我更多吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:18:17.910

跟进我的评论 - 这是一个基本概念，可以在循环的中途放入 Sys.sleep。

```
for (i in 1:10) { 
  if(i == 5) {
      print("halfwayhome")
      Sys.sleep(5)
      print(i)
  }
  else { 
      print(i)
  }
} 
```

结果是：

```
[1] 1
[1] 2
[1] 3
[1] 4
[1] "halfwayhome"
[1] 5
[1] 6
[1] 7
[1] 8
[1] 9
[1] 10 
```

所以我对 RCurl 或解析 HTML 页面没有任何经验，所以我很方便地避免了你的那部分任务。但是，我能够成功生成地址列表，下载它们，`readLines()`然后将它们写回。我`Sys.sleep()`在每个人之后都打了一个电话，事情似乎很顺利。

```
links <- c("http://news.lugnet.com/dear-lego/?n=1",
           "http://news.lugnet.com/dear-lego/?n=2",
           "http://news.lugnet.com/dear-lego/?n=3",
           "http://news.lugnet.com/dear-lego/?n=4",
           "http://news.lugnet.com/dear-lego/?n=5",
           "http://news.lugnet.com/dear-lego/?n=6",
           "http://news.lugnet.com/dear-lego/?n=7",
           "http://news.lugnet.com/dear-lego/?n=8",
           "http://news.lugnet.com/dear-lego/?n=9",
           "http://news.lugnet.com/dear-lego/?n=10"
           )

for (j in 1:length(links)){
  dat <- readLines(links[j])
  write.table(dat, paste0("outfile",j,"txt"))
  Sys.sleep(5)
  cat("Finished file", j)
} 
```

如果您需要解析这些 HTML 页面或从中获得更有用的东西，我会问一个新的/不同的问题，我可能不会在这方面提供太多帮助。

希望这会有所帮助，-Chase

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T22:45:01.333

最终解决方案：

```
> library(RCurl)  
> library(foreach)  
> library(foreign)

> z <- nrow(links)  
> outpath <-"SPECIFIC PATH"

> foreach(i=1:z) %do% {    
+  text <- getURL(links[i,])    
+  write(as.character(text), file = paste(outpath,"/",i,".txt",sep=""))} 
```

# android - 需要安卓的文件保存对话框

> ID：12021622
> 
> 赞同：2
> 
> 时间：2012-08-18T19:27:42.410
> 
> 标签：android, android-intent, dialog

我需要 android 的文件保存对话框，以保存我的应用程序生成的 png 文件。

我试过了`Intent intentFileSave = new Intent(Intent.ACTION_PICK);`

但这没有用。万一我没有任何文件管理器，**android是否有默认的“另存为”对话框？**

我还尝试将**OI 文件管理器**集成到我的应用程序中。但我不知道，*OI 文件管理器*的许可证是否允许将其用作库。

是否有任何其他选项要求用户选择文件的位置和名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:01:44.333

> android是否有默认的“另存为”对话框？

不，主要是因为应用程序要么将文件保存在其应用程序的内部或外部存储部分中，要么将它们保存在`Environment`类中指定的特定公共目录中。然后，它们用于`ACTION_SEND`与可以使用它们的其他服务共享文件。

> 但我不知道，OI 文件管理器的许可证是否允许将其用作库。

我在他们的 GitHub 存储库中没有看到任何许可证的迹象，这很不幸。

> 是否有任何其他选项要求用户选择文件的位置和名称？

除了根本不这样做（并保存到标准位置）之外，您还可以：

*   `Intent`通过特定操作（例如）链接到 OI 文件管理器等文件管理器应用程序`org.openintents.action.PICK_DIRECTORY`，如果没有，则提示用户安装一个

*   寻找其他一些库来选择目录和/或文件

*   创建你自己的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T09:00:40.900

我也试过，

```
intent = new Intent(Intent.ACTION_PICK);
intent.setDataAndType(startDir, "vnd.android.cursor.dir/*"); 
```

但它向我展示了所有可能的意图，例如 FileManager、Gallery、Music、Contects 等……
我没有找到任何方式让 android 决定支持“另存为”功能的可能意图。

所以，我有以下解决方案。**在这里，我只需要为支持另存为**功能 的不同文件浏览器添加越来越多的尝试。

```
int iLoop = 0;
int iTryCount = 2;
for (iLoop = 0; iLoop < iTryCount; iLoop++)
{
    Intent intent = null;

    if (iLoop == 0)
    {
        // OI File Manager
        intent = new Intent(Intent.ACTION_PICK);
        intent.setData(startDir);
        intent.setAction("org.openintents.action.PICK_FILE");
        intent.putExtra("org.openintents.extra.TITLE", "Save As...");
    }
    else if (iLoop == 1)
    {
        // AndExplorer
        intent = new Intent(Intent.ACTION_PICK);
        intent.setDataAndType(startDir,
                "vnd.android.cursor.dir/lysesoft.andexplorer.file");
        intent.putExtra("explorer_title", "Save As...");
        intent.putExtra("browser_filter_extension_whitelist", "*.png");
        intent.putExtra("browser_line", "enabled");
        intent.putExtra("browser_line_textfield", "file1.png");
    }

    if (intent != null)
    {
        try
        {
            // Try to launch activity
            startActivityForResult(intent, REQUEST_SAVE_FILE);

            // TODO: Remove this notification on Publish
            Toast.makeText(m_baseSurfaceView.getContext(),
                    "Try : " + iLoop, Toast.LENGTH_SHORT).show();

            // If everything gone well, then break from here
            // otherwise see catch(..) block
            break;
        }
        catch (Exception e)
        {
            e.printStackTrace();

            // If all tries are done, then conclusion is that,
            // the user needs to install some file-manager application
            // to locate where to save the file
            if (iLoop == iTryCount - 1)
            {
                Toast.makeText(
                        m_baseSurfaceView.getContext(),
                        "Please Install some File Manager"
                                + " application to locate destination.",
                        Toast.LENGTH_LONG).show();
            }
        }
    }
} 
```

如果有任何建议，请发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:04:41.813

OI 文件管理器不需要许可证即可使用它，因为它是一个独立的软件。将 Open Intents 项目视为某种 API。据我所知，API 不需要许可证。

至于保存文件，不幸的是 OI 文件管理器没有为您提供“另存为”选项，但您可以轻松解决这个问题！只需让用户在您的应用程序中输入他们想要的文件名，然后使用[PICK_DIRECTORY 意图](http://www.openintents.org/en/node/165)让他们告诉您将文件放在哪里！

# c++ - 用 std::initializer_list 初始化矩阵

> ID：12021634
> 
> 赞同：0
> 
> 时间：2012-08-18T19:29:28.693
> 
> 标签：c++, matrix, initializer-list

我创建了一个矩阵类：

```
template <typename T>
class Matrix
{
    static_assert(std::is_arithmetic<T>::value,"");

public:
    Matrix(size_t n_rows, size_t n_cols);
    Matrix(size_t n_rows, size_t n_cols, const T& value);

    void fill(const T& value);
    size_t n_rows() const;
    size_t n_cols() const;

    void print(std::ostream& out) const;

    T& operator()(size_t row_index, size_t col_index);
    T operator()(size_t row_index, size_t col_index) const;
    bool operator==(const Matrix<T>& matrix) const;
    bool operator!=(const Matrix<T>& matrix) const;
    Matrix<T>& operator+=(const Matrix<T>& matrix);
    Matrix<T>& operator-=(const Matrix<T>& matrix);
    Matrix<T> operator+(const Matrix<T>& matrix) const;
    Matrix<T> operator-(const Matrix<T>& matrix) const;
    Matrix<T>& operator*=(const T& value);
    Matrix<T>& operator*=(const Matrix<T>& matrix);
    Matrix<T> operator*(const Matrix<T>& matrix) const;

private:
    size_t rows;
    size_t cols;
    std::vector<T> data;
}; 
```

我想提供一个接受 std:initializer_list 的 ctor。我还必须询问行数和列数。我可以检查 std:initializer_list 大小是否等于 rows*columns ，如果不是，则午餐例外，但我不太喜欢这个解决方案。如果 std:initializer_list 太长，我更喜欢在矩阵已满时使用 std:initializer_list 元素：问题是我现在不知道如何逐个访问 std:initializer_list 元素。有人能帮我吗？您有更好的解决方案来使用 std:initializer_list 初始化矩阵吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:39:55.980

`initializer_list<T>`您可以使用成员函数`begin()`和获取 a 的元素`end()`。在这方面，它就像一个容器。

# iphone - 如何为 CABasicAnimation 设置颜色？

> ID：12021638
> 
> 赞同：7
> 
> 时间：2012-08-18T19:30:15.093
> 
> 标签：iphone, ios, ipad, core-animation, cabasicanimation

CABasicAnimation 有 toValue 属性，它需要一个 id。但是 Quartz Core 不能与 UIColor 一起使用，它需要一个 CGColor 结构来代替。如何为 CABasicAnimation 提供颜色？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-18T19:34:17.963

只需提供 a`CGColor`并将其类型转换为`id`.

```
UIColor *fromColor = [UIColor redColor];
UIColor *toColor = [UIColor yellowColor];
CABasicAnimation *colorAnimation = [CABasicAnimation animationWithKeyPath:@"backgroundColor"];
colorAnimation.duration = 1.0;
colorAnimation.fromValue = (id)fromColor.CGColor;
colorAnimation.toValue = (id)toColor.CGColor; 
```

此示例在 1 秒内将背景颜色从红色渐变为黄色。

另一个直接取自[Apple 示例代码的示例](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CreatingBasicAnimations/CreatingBasicAnimations.html#//apple_ref/doc/uid/TP40004514-CH3-SW1)：

```
CAKeyframeAnimation* colorAnim = [CAKeyframeAnimation animationWithKeyPath:@"borderColor"];
NSArray* colorValues = [NSArray arrayWithObjects:(id)[UIColor greenColor].CGColor,
            (id)[UIColor redColor].CGColor, (id)[UIColor blueColor].CGColor,  nil];
colorAnim.values = colorValues;
colorAnim.calculationMode = kCAAnimationPaced; 
```

# php - 如何每 5 秒刷新一次 div

> ID：12021640
> 
> 赞同：0
> 
> 时间：2012-08-18T19:30:18.183
> 
> 标签：php, jquery, ajax

我正在为我的网站创建一个聊天室。我正在使用 php 和 mysql 来显示和存储消息。我正在尝试使用 Jquery 和 AJAX 每 5 秒刷新一次页面。我以前从未使用过 Jquery 或 AJAX。这是我的 Jquery 和 AJAX 代码。

```
 <script type="text/javascript" src="jquery.js"></script>

                    <script type="text/javascript">                             
                    var auto_refresh = setInterval(
                    function(){
                    $('#message_display').load('show_messages_public.php');
                            }, 5000);
                    </script> 
```

在“show_messages_public.php”页面中，我有一个名为“show_messages()”的函数，如何从 AJAX 和 Jquery 调用此函数？

```
<?php
session_start();

function show_messages()
{
$mysql_host = "******";
$mysql_database = "*******";
$mysql_user = "*****";
$mysql_password = "*****";

$link= mysql_connect($mysql_host, $mysql_user, $mysql_password);

if (!$link) {
    die('could not connect:' . mysql_error());
}

$db_selected= mysql_select_db($mysql_database);

if (!$db_selected) {
    die('can\'t use' . $mysql_database . ':' . mysql_error());
}

$query= "SELECT * FROM public_chat ORDER BY time DESC LIMIT 2";
$result= mysql_query($query) or die(mysql_error());
while($row= mysql_fetch_array ($result)) {
    echo '<br/><font color="black">' .$row['time'] . "<br>" . '<b><big>' . '<font color="black">' . $row['user'] . ':' . '</big></b>' . " <br> " . $row['message'] .'</font>'; 
    echo "<br/><hr width=\"95%\"<br/>"/*"<hr width=\"90%\">"*/;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:45:45.090

当您的 php 文件中有多个函数时，您可以这样做：

您可以使用 jquery 的 load 函数发布参数。所以你可以试试这个：

```
$('#message_display').load('show_messages_public.php', {showmsg: 'public'}); 
```

在你的 php 里面：

```
switch($_POST['showmsg']) {
    case 'public':
        show_messages();
        break;
} 
```

如果您没有多个函数，只需调用没有函数的代码：

```
<?php
session_start();

$mysql_host = "******";
$mysql_database = "*******";
$mysql_user = "*****";
$mysql_password = "*****";

$link= mysql_connect($mysql_host, $mysql_user, $mysql_password);

if (!$link) {
    die('could not connect:' . mysql_error());
}

$db_selected= mysql_select_db($mysql_database);

if (!$db_selected) {
    die('can\'t use' . $mysql_database . ':' . mysql_error());
}

$query= "SELECT * FROM public_chat ORDER BY time DESC LIMIT 2";
$result= mysql_query($query) or die(mysql_error());
while($row= mysql_fetch_array ($result)) {
    echo '<br/><font color="black">' .$row['time'] . "<br>" . '<b><big>' . '<font color="black">' . $row['user'] . ':' . '</big></b>' . " <br> " . $row['message'] .'</font>'; 
    echo "<br/><hr width=\"95%\"<br/>"/*"<hr width=\"90%\">"*/;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:35:21.000

你没有。

您需要将所有流控制放入主机网页中，因为您无法从 AJAX 加载外部程序流。

* * *

更新后，您似乎正在尝试调用 PHP，而不是 JavaScript。

答案很简单：这个想法是您的页面将呈现数据，因此只需将 show_messages() 放在页面末尾 - 或者，真的.. 完全删除函数包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T19:40:55.093

> 在“show_messages_public.php”页面中，我有一个名为“show_messages()”的函数，如何从 AJAX 和 Jquery 调用此函数？

你不会的。您的 PHP 页面应根据通过 GET 或 POST 请求传递的参数返回数据。例如，您可以发送以下参数：

*   开始时间 = 1
*   重复次数 = 5
*   增量增加 = 3

像这样：

```
 $('#message_display').load('show_messages_public.php?startInt=1&repeatTimes=5&incrementIncrease=3'); 
```

然后在您的 PHP 中，您可以将结果作为纯文本返回，如下所示：

```
<?
    var startInt = $_GET['startInt'];
    var repeatTimes = $_GET['repeatTimes'];
    var incrementIncrease = $_GET['incrementIncrease'];

    var str = "";
    for (var i = startInt; i < repeatTimes * incrementIncrease + startInt; i += incrementIncrease) {
         str .= i."|";
    }

    echo str;
?> 
```

这将返回以下内容：

> 1|4|7|10|13|16|

我知道这实际上并不能解决您的问题，但似乎您需要学习 AJAX 的基础知识。

* * *

**要实际解决您的问题：**

你可以试试这段代码：

```
setInterval(function() {
    $('#message_display').load('show_messages_public.php?callfunc=true');
}, 5000); 
```

然后在你的 PHP 中：

```
 if ($_GET['callfunc'] == "true")
     show_messages(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T19:43:14.890

您不是通过 AJAX 调用函数，而是执行远程地址 (URL)，然后处理响应

# java - java可以用来写博主小部件吗？

> ID：12021644
> 
> 赞同：3
> 
> 时间：2012-08-18T19:31:07.350
> 
> 标签：java, html, widget, blogger

我想为 Google 的 Blogger 编写一个小部件。这些是用 javascript 和 html 创建的，但是是否可以用 java 编写（可能是 java 和 html）？你以前做过这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:41:37.783

对于初学者，您必须照顾博客的**服务器**才能使用 Java 小部件。可能（必须）可以编写 Java 小部件，但不建议这样做。我建议您将***HTML/JavaScript 和 PHP***用于博客小部件。

# java - NetBeans 6.9.1 中的 Java 解析已停止工作

> ID：12021648
> 
> 赞同：2
> 
> 时间：2012-08-18T19:31:38.130
> 
> 标签：java, syntax-highlighting, netbeans-6.9, code-completion

我遇到了 NetBeans 6.9.1 的问题，在经过数月的无问题使用后最近出现了问题。我正在使用 Spring 和 NetBeans RCP 使用 Java 进行 Red Hat 5.7 编码。

每次我打开一个文件，或者当我最初打开 NetBeans 并自动打开我上次处理的文件时，我都会收到 NullPointerException 和一条消息，提示“解析（文件名）时发生错误”。我得到非常有限的语法突出显示（蓝色的关键字，橙色的字符串文字，但没有其他），并且没有任何 NetBeans 细节，如代码完成、ctrl 单击导航和修复导入。下面有关 NullPointerException 的更多详细信息；这发生在未连接到 Internet 的系统上，因此我在前几行中手动输入，因为我无法提供 NetBeans .dump 文件。

为了解决这个问题，我删除了整个 ~/.netbeans 目录并重新启动了 NetBeans。就好像这是我第一次运行它并要求我注册，正如预期的那样（我说“从不注册”，因为我无论如何都没有连接到互联网）。然后我导航到我的项目，并得到与以前相同的结果。

NetBeans Bugzilla 站点有关于这个问题的错误报告，但没有关于如何修复它的信息。我在法语中找到的一个站点 (developpez.net) 表明关联的 .form 文件的语法可能存在问题，但是我在删除 .netbeans 目录后打开的特定文件没有 .form 文件我遇到了同样的错误——无论如何，当 .form 文件中存在语法错误时，它通常不会让您使用 GUI 构建器进行编辑。

任何有关此问题的帮助将不胜感激！

有关 NullPointerException 的更多信息：

```
WARNING [org.netbeans.modules.parsing.impl.indexing.RepositoryUpdater]
java.lang.NullPointerException
  at java.util.Arrays$ArrayList.<init>(Arrays.java:3357)
  at java.util.Arrays.asList(Arrays.java:3343)
  at sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:67)
  at sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:161)
... 
```

**更新：**由于周六我一个人工作，我跳上同事的工作站（同一网络），以自己的身份登录，然后启动了 NetBeans - 并没有遇到这个问题！它会根据我的 .netbeans 信息中的内容记住我打开了哪些文件，并解析 Java 文件并提供语法突出显示和代码导航。不幸的是，那个工作站没有安装我进行测试所需的第三方 COTS 产品，所以我必须在我的工作站上。我回到我的工作站并交叉手指并非常努力地希望，但问题仍然存在。但希望这将为比我更聪明的人提供一个线索——它在我的工作站上，但不在我的 .netbeans 目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:19:57.103

我解决了我的问题，所以我想我会更新这个，以防其他人遇到同样的事情。我所要做的就是重新启动我的机器 - 优雅地，因为我在遇到此问题时不得不强制重新启动，而强制重新启动并*没有*解决问题。

我*认为*导致这种情况发生的原因是我关闭了 NetBeans，而它正在扫描项目或检查外部更改（甚至可能两者兼而有之）。当我这样做时，我得到通常的弹出窗口，说关闭 IDE 将取消这些后台任务，我告诉它无论如何都要关闭 IDE。在我重新启动后（这解决了最初的问题）并且在我取消了上述任务之一并重新启动 NetBeans 之后，问题又出现了，直到我再次重新启动。

我不知道为什么中断项目扫描或检查外部更改会导致这种行为，但我可以让它始终如一地发生。由于我们使用 ClearCase 和 NetBeans ClearCase 插件，所以每当我更改 ClearCase 视图时，我都需要重新启动 NetBeans，如果我想切换视图时碰巧正在扫描，我会感到不耐烦。我已关闭自动扫描以尽量减少此问题。

# paperclip - 回形针在生产中不保存附件

> ID：12021654
> 
> 赞同：1
> 
> 时间：2012-08-18T19:32:30.320
> 
> 标签：paperclip, ruby-on-rails-3.2, production-environment

在我的开发环境中，我能够成功地使用回形针创建下载。在生产中，将创建下载，但下载链接不起作用。

在开发中创建的链接：

```
http://localhost:3000/downloads/files/3?1345315475 
```

在生产中创建的链接：

```
http://www.domain.com/attachments/original/missing.png 
```

以下是创建下载时来自生产的日志：

```
Started POST "/downloads" for xxx.xxx.xxx.xxx at 2012-08-18 11:47:31 -0700
Processing by DownloadsController#create as JS
Parameters: {"utf8"=>"✓", "authenticity_token"=>"JhFMcjaui8cb4HCxTiIOjb/R2uxVJcOv3WEz8V0yoPp=", "download"=>{"school_id"=>"1", "software"=>"Follett", "original"=>"1", "makeup"=>"0", "visible"=>"1", "expired"=>"0"}, "commit"=>"Create Download"}
[paperclip] Saving attachments.
Rendered download_notice_mailer/download_notice.html.erb (1.9ms) 
```

当我在控制台中搜索下载时（生产）

```
irb(main):001:0> d = Download.last
Download Load (0.4ms)  SELECT `downloads`.* FROM `downloads` ORDER BY `downloads`.`id` DESC LIMIT 1
=> #<Download id: 8, visible: true, expired: false, software: "Skyward", created_at:    "2012-08-18 19:01:35", updated_at: "2012-08-18 19:01:35", school_name: "SCHOOL NAME", original: true, makeup: false, attachment_file_name: nil, attachment_content_type: nil, attachment_file_size: nil, attachment_updated_at: nil, school_id: 8, district_id: 2> 
```

您会注意到所有附件属性都为零。

我正在使用 rails 3.2.8 和回形针 3.1.4

我的 download.rb 模型文件的一部分

```
has_attached_file :attachment, :path => (Rails.root + "downloads/files/:id").to_s,
                             :url => "/downloads/files/:id"

validates_attachment_presence :attachment

attr_accessible :visible, :expired, :software, :school_name, :original, :makeup, :attachment, :school_id, :district_id 
```

如果需要任何其他信息，请告诉我。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:29:47.113

解决了...

看起来我在 .gitignore 文件中列出了 /downloads/files 以防止将测试下载传输到服务器。我发现服务器上缺少 /downloads/files 目录，并且回形针将文件放入 /downloads （我可能会添加没有错误）。因此，在下载中创建文件目录后，一切都按预期工作。

# asp.net-mvc-4 - 升级到 .NET 4.5 和 EF 5 后，“启用迁移”失败

> ID：12021656
> 
> 赞同：14
> 
> 时间：2012-08-18T19:32:46.530
> 
> 标签：asp.net-mvc-4, .net-4.5, entity-framework-5

我刚刚将我的 MVC4 项目升级到 .NET 4.5 和 EF5 并开始使用 VS2012。在意识到我需要再次在包管理器中设置自动迁移后，我运行`Enable-Migrations - EnableAutomaticMigrations`并收到错误

`No context type was found in the assembly 'MySolutionName'.`

一些[研究](https://stackoverflow.com/questions/10489789/ef-5-0-enums-not-generating)表明这与 EF5 未启用预发布有关。我跑了`Install-Package EntityFramework -IncludePrerelease`，但它说 EF5 已经安装（这是我之前通过 NuGetmanager 安装它时*没有*指定`-IncludePrerelease.`

有谁知道我必须做什么才能为我的项目启用迁移？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T14:34:26.003

我刚遇到同样的问题，在寻找解决方案时发现了你的问题。

我让它工作了。对我来说，问题是当我通过 NuGet 添加 EF 5 时，我最初的目标是 .NET 4.0 框架。更改目标框架，然后通过 NuGet 重新安装 EF 5，修复它。也有可能（见评论）通过 NuGet 重新安装 EF 5 是您的解决方案。

我在 App.config 文件中有以下行，注意 Version=4.4.0.0：

```
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
</configuration> 
```

所以我所做的是在解决方案配置中将目标框架设置为 4.5，并将支持的运行时也设置为 4.5（在应用程序配置中）。

老的：

```
 <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup> 
```

新的：

```
 <startup>
    <supportedRuntime version="v4.5" sku=".NETFramework,Version=v4.5" />
  </startup> 
```

更改后，我通过 NuGet 删除了 EF 5.0 并再次添加了它。结果它给了我以下 configSection，注意 Version=5.0.0.0：

```
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
</configuration> 
```

更改后，它起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T07:43:18.563

我也遇到了同样的问题，但一天后我突然注意到 ASP MVC 4 项目文件夹中名为 packages.config 的文件。所以，我得到了

```
 <package id="EntityFramework" version="6.0.2" targetFramework="net45" /> 
```

我将版本号更改为适当的数字，即我使用的是 EF 版本 5.0.0。在我更改版本后，现在一切都很好。

# algorithm - 探针数量与探针序列数量对开放寻址方案性能的影响

> ID：12021661
> 
> 赞同：0
> 
> 时间：2012-08-18T19:33:24.333
> 
> 标签：algorithm, data-structures, hashtable, hash

[CLRS](http://books.google.co.in/books/about/Introduction_To_Algorithms.html?id=NLngYyWFl_YC)的《算法简介》一书通过假设统一散列来分析[开放寻址](http://en.wikipedia.org/wiki/Open_addressing)方案，该假设基本上说每个键的探测序列同样可能是 m! <0,1,2,...m-1> 的排列。本书随后介绍了三种方案：

1.  线性探测
2.  二次探测
3.  双重哈希

它说所有这些上述技术保证每个键 k 的排列是 <<0,1,2,...m-1> 。但是，它们都没有满足统一散列的假设，因为它们都不能生成超过 m^2 个不同的探测序列。双散列具有最多的探测序列并且似乎给出了最好的结果。

为什么我们想要最大数量的探测序列？当探测序列最少时，我们不是得到最好的性能吗？我确信这里缺少一些基本知识。我想我对探针和探针序列感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:09:57.310

这里的主要思想是我们需要一个函数`f`，将大数字（或者可能是`String`本质上由数字表示的 s）映射到更易于管理的较小数字。
这些较小的数字通常直接用作数组中的索引，以便我们可以获得`O(1)`由`HashTable`.
该函数`f`通常是散列函数。
现在的问题是，由于我们从一个较大的空间转到一个较小的空间，我们必然会发生冲突（这会影响我们的访问时间保证）。
对于我们如何处理冲突（假设我们已经决定使用哈希函数）有多种方法，你提到了其中的 3 种。

`Linear Probing`是最简单的冲突解决策略，我们基本上按顺序搜索数组，直到找到一个空单元格。尽管实现起来很简单，但效率不高，因为它会导致我们的`hashtable`.
总而言之，由于具有相同哈希值的两个项目发生碰撞，而且*在替代位置发生碰撞的*项目也发生碰撞，因此性能下降。

`Quadratic Probing``Linear`试图通过尝试占据比原始探测点更远的单元格来改进。尽管它改进了很多，`Linear Probing`但它引入了辅助聚类（具有相同散列探测的元素在数组中也具有相同的替代位置）。

`Double Hashing`进一步改进`Quadratic Probing`，理论上（我认为）它应该具有与线性相同的数量或探针。

> 双散列具有最多数量的探测序列，并且似乎给出了最好的结果......为什么我们想要最大数量的探测序列？

是的，理论上它更好`Quadratic`。这里的意思是 IMO 是要探测的位置最远，因此消除*了替代位置（而不是原始存储桶）中相同哈希或不同哈希的元素之间的冲突*

# java - 类中的对象实例化和赋值

> ID：12021662
> 
> 赞同：-8
> 
> 时间：2012-08-18T19:33:37.877
> 
> 标签：java, class, instantiation

可以在类中在哪里实例化和分配对象？即分配是否必须在类方法之一中进行？

```
public class Foo{

   Bar b1 = new Bar();
   Bar b2;

   void Foo(){
      b2 = new Bar();
   }
} 
```

是`b1`有效的实例化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:46:30.353

是的。是的，它是有效的。Foo 类的每个实例都会有一个名为 b1 的字段，该字段有一个新的 Bar 实例。

# android - 在android中加载网页失败时隐藏“网页不可用”消息

> ID：12021678
> 
> 赞同：1
> 
> 时间：2012-08-18T19:36:45.170
> 
> 标签：android, webview

无法`webPage not available`在 Web 视图中清除消息。

`book.clearView()`在`onReceivedError`方法中没有清除，当加载失败时`WebView`仍然显示，任何帮助将不胜感激。`webPage not available message``WebView`

```
final WebView book = (WebView)findViewById(R.id.book);
        //book.setBackgroundColor(Color.parseColor("#123456"));
        book.setBackgroundColor(0);
        book.setBackgroundResource(R.drawable.pnr)
              WebSettings settings = book.getSettings();
                    settings.setJavaScriptEnabled(true);
                    book.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

                    final AlertDialog alertDialog = new AlertDialog.Builder(this).create();

                   final ProgressDialog dialog =ProgressDialog.show(AboutApp.this,null, "Loading...");

                    book.setWebViewClient(new WebViewClient(){

                        @Override
                        public void onPageStarted(WebView view, String url, Bitmap favicon) {
                            // TODO Auto-generated method stub
                            //dialog = ProgressDialog.show(AboutApp.this,null, "Loading...");

                            super.onPageStarted(view, url, favicon);

                        }

                        @Override
                        public void onPageFinished(WebView view, String url) {
                            // TODO Auto-generated method stub
                            if(dialog.isShowing()){
                                dialog.dismiss();
                            }
                            super.onPageFinished(view, url);
                        }

                        @Override
                        public boolean shouldOverrideUrlLoading(WebView view, String url) {
                            // TODO Auto-generated method stub
                            //Log.i(TAG, "Processing webview url click...");
                            view.loadUrl(url);
                            return true;

                        }

                         public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                            // Log.e(TAG, "Error: " + description);
                             //Toast.makeText(activity, "Oh no! " + description, Toast.LENGTH_SHORT).show();
                             book.clearView();
                             alertDialog.setTitle("Error");
                             alertDialog.setMessage("Sorry, This particular service is unavailable at this time.Please try again later");
                             alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                                 public void onClick(DialogInterface dialog, int which) {
                                     finish();
                                     return;
                                 }
                             });
                             alertDialog.show();
                         }

                    });

                    book.loadUrl("www.google.com"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:29:20.907

我们需要设计自己的 html 文件，将该文件放在 assests 文件夹下，然后使用 loadUrl() 方法加载 html 文件。例如：book.loadUrl("file:///android_asset/error.html");

# visual-studio-2010 - 使用 Visual Studio 调试 LLVM Pass

> ID：12021680
> 
> 赞同：0
> 
> 时间：2012-08-18T19:37:08.773
> 
> 标签：visual-studio-2010, debugging, llvm, clang, visual-studio-debugging

我在 Windows 上设置了 llvm。是否可以使用 Visual Studio 调试器来调试我的通行证。（在 lib/Transforms 目录中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:36:39.220

是的，当然。只需在感兴趣的函数上设置断点即可。

# shell - 从主机脚本并行运行 shell 脚本

> ID：12021683
> 
> 赞同：1
> 
> 时间：2012-08-18T19:38:11.043
> 
> 标签：shell, unix

我制作了一个 shell 脚本，它 greps 一些日志并将输出放在一个文本文件中。基本上这个脚本在其他 10 个服务器上运行，输出文本文件通过`scp`. 现在，我需要从主机服务器一次调用所有脚本，以便在最短的时间内（几乎并行）获得所有 10 个日志文件。每台服务器上的脚本大约需要 10 秒才能完成。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:23:36.393

您可能想看看[GNU parallel](http://www.gnu.org/software/parallel/)。[`ClusterSSH`](http://sourceforge.net/apps/mediawiki/clusterssh/index.php?title=Main_Page)并且[`pconsole`](http://www.heiho.net/pconsole/)也可能有用，如此[处](https://serverfault.com/q/2533/60384)所述。

如果您坚持创建自己的工具，[本教程](http://www.cyberciti.biz/tips/execute-commands-on-multiple-linux-or-unix-servers.html)可能会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:03:11.557

要几乎同时启动日志记录，请将进程发送到后台：

```
host_urls=( url1 ... url10 )
for u in ${host_urls[@]}; do
  ssh ... $u your_server_logging_script &
done 
```

这将导致比任何网络故障都小得多的延迟，因此这是您可以在不实际同步服务器时间或编写额外代码的情况下做的最好的事情。

`your_server_logging_script`当然会包含`grep`和`scp`调用以将文件返回到中央服务器。不要忘记对文件进行唯一命名（例如以主机为前缀），否则它们会相互覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T19:51:24.937

可能的解决方案是在主机服务器上创建子进程，它基本上会尝试对服务器进行 ssh，在服务器端，您可以将运行 shell 脚本的命令放在 ~/.bash_profile 或 ~/.bashrc 中，它们基本上会在日志上运行在。您还可以在 ssh 之后管道命令。如果您遇到指纹确认问题，您可以将主机密钥添加到服务器 .ssh 文件夹中的授权密钥中。它应该很容易完成。*您可以并行启动子流程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T21:12:35.437

您可以使用分布式 shell，例如`pdsh` [http://sourceforge.net/projects/pdsh/](http://sourceforge.net/projects/pdsh/)

# java - 如何“搜索” HashMap 然后循环结果？

> ID：12021684
> 
> 赞同：0
> 
> 时间：2012-08-18T19:38:16.120
> 
> 标签：java, hashmap

所以，我编码一些java。并想搜索一个 HashMap 然后循环结果，这是我的 hashmap：

```
public HashMap<String, String> messages; 
```

但！我不想循环所有键，只是一些。就像搜索 MySQL 数据库一样。

对不起我的英语，我是挪威人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:48:24.033

如果我理解正确，您想遍历 HashMap 的键。为此，您需要使用[Map.keySet()](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#keySet%28%29)方法。这将返回一个[集合](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)，其中包含地图的所有键。或者，您可以遍历[entrySet](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#entrySet%28%29)或[values](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#values%28%29)。（请查看提供的所有链接以获取更多详细信息。）

另外，我强烈建议您查看[Collections 上的教程路径](http://docs.oracle.com/javase/tutorial/collections/index.html)。您还应该熟悉[Java API 文档](http://docs.oracle.com/javase/7/docs/api/)。特别是，您需要查看[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)和[Map](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:45:50.443

`equals` `hashcode`在您的类中正确实施`Block`并调用`get(Object key)`方法`Hashmap`，它将进行搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T19:53:09.443

如果您想访问所有键并获取值。

```
public HashMap<String, String> messages;
...
for (final String key : messages.keySet()) {
  final String value = messages.get(key);
  // Use the value and do processing
} 
```

* * *

一个更好的主意是只使用`messages.entrySet`...

```
for (final Map.Entry<String, String> entry : messages.entrySet()) {
  final String key = entry.getKey();
  final String value = entry.getValue();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T19:58:37.743

仍然很不清楚，但是您问如何同时执行 entrySet() 和 entryKey()。但是，entrySet() 在一个数据结构中同时返回 Key 和 Value：

```
for( Map.Entry<String,String> entry : messages.entrySet() ) {
    String key = entry.getKey();
    String value = entry.getValue();
    System.out.printf("%s = %s%n", key, value );
} 
```

但通常你不会这样做，而只是简单地使用 Key 来获取 Value ，就像这样产生一个更简单的迭代方法：

```
for( String key : messages.keySet() ) {
    String value = messages.get(key);

    System.out.printf("%s = %s%n", key, value );
} 
```

不存在仅使用默认 Java 中包含的工具来“查询”像 MySQL 这样的映射的工具。像 apache 集合这样的库提供了谓词和其他过滤器，可以为您提供查询支持。其他库包括番石榴库。例如使用 apache commons 集合：

```
List<String> keys = new ArrayList<String>(messages.keySet());
CollectionUtils.filter( keys, new Predicate<String>() {
    public boolean evaluate( String key ) {
        if( someQueryLogic ) {
           return true;
        } else {
           return false;
        }
    }
} );

// now iterate over the keys you just filtered

for( String key : keys ) {
    String value = message.get(key);
    System.out.printf("%s = %s%n", key, value );
} 
```

# css - 使用多个参数指定的边框半径不起作用

> ID：12021687
> 
> 赞同：0
> 
> 时间：2012-08-18T19:38:49.997
> 
> 标签：css

这不起作用：（我在 FireFox 10 中）

```
 border-radius:  0px, 4px, 4px, 0px; 
```

但是，这样做：

```
 border-top-right-radius:  4px;
  border-bottom-right-radius:  4px; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T19:40:30.377

不要在 CSS 中的值之间放置逗号。

正确答案如下所示：

```
border-radius:  0px 4px 4px 0px; 
```

# iphone - iOS 中从右到左的 NavigationController

> ID：12021689
> 
> 赞同：4
> 
> 时间：2012-08-18T19:39:22.667
> 
> 标签：iphone, ios, uitableview, uiviewcontroller

我正在构建一个从右到左的导航控制器来支持 RTL 语言。在阅读了 StackOverFlow [Push ViewController from Right To Left with UINavigationController](https://stackoverflow.com/questions/2415772/push-viewcontroller-from-right-to-left-with-uinavigationcontroller?lq=1)中的一些帖子后，我认为这种方法最合适：

```
DetailedViewController *DVC = [[DetailedViewController alloc]initWithNibName:@"DetailedViewController" bundle:nil];
NSMutableArray *vcs =  [NSMutableArray arrayWithArray:self.navigationController.viewControllers];
[vcs insertObject:DVC atIndex:[vcs count]-1];
[self.navigationController setViewControllers:vcs animated:NO];
[self.navigationController popViewControllerAnimated:YES]; 
```

这将创建一个详细的视图控制器并将其添加到 NavigationController 下方的视图控制器堆栈中。当弹出 NavigationController 时，它会看起来好像我们实际上正在加载DetailedViewController，整洁，嗯？

现在我面临两个问题：

1- 详细视图控制器不再显示返回按钮。所以我决定添加一个新按钮来代表它执行此操作。

2- 我不知道如何从DetailedViewController 返回NavigationController。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T01:44:27.297

考虑到您实际上是在入侵导航控制器，为了保持行为一致，您需要再修改它一些。

弹出导航控制器会将其从内存中释放，因此您可能需要另一个包含弹出控制器的数组或堆栈（从用户的角度来看，推送控制器，因为据我所知，您在需要推送时弹出，并推送每当你需要弹出）。在该阵列/堆栈中，您将保留需要返回的控制器，在弹出它们之前将它们推入阵列/堆栈。

我假设可变数组存在于您可以随时访问的某个地方，并`otherNavigationController`为简单起见调用它：

```
DetailedViewController *DVC = [[DetailedViewController alloc]initWithNibName:@"DetailedViewController" bundle:nil];
NSMutableArray *vcs = [NSMutableArray arrayWithArray:self.navigationController.viewControllers];
[vcs insertObject:DVC atIndex:[vcs count]-1];
[self.navigationController setViewControllers:vcs animated:NO];
[otherNavigationController addObject:self];
[self.navigationController popViewControllerAnimated:YES]; 
```

至于问题的第二部分，您需要添加自定义后退按钮，因为默认按钮不适合您。自定义按钮应该在按下时从上述数组/堆栈的顶部推送一个视图控制器（从用户的角度弹出它）。

pop 函数的代码如下所示：

```
UIViewController *previousViewController = [otherNavigationController lastObject];
[otherNavigationController removeLastObject];
[self.navigationController pushViewController:previousViewController animated:YES]; 
```

免责声明：这里的代码未经尝试和测试，我什至不确定这是否可行，但它应该能让你上路。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:13:45.303

受@locke 解决方案的启发，我将代码重写如下：

1- 在名为 preViewController 的 appdelegate 中定义一个 UIViewController 来保存主视图控制器。

2-要在视图控制器中引用它，请使用：

```
AppDelegate *appdelegate=(AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

3-编写以下masterviewcontroller如下：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //create a mutable arry to hold the view controllers and copy the current list of navigation controllers
    //at this point there is only the current view controller in stack

    NSMutableArray *vcs =  [NSMutableArray arrayWithArray:self.navigationController.viewControllers];

    //create a detailed navigation controller
    DetailedViewController *DVC = [[DetailedViewController alloc]initWithNibName:@"DetailedViewController" bundle:nil];

    //create a shared variable enviroment to reference a global variable 
    AppDelegate *appdelegate=(AppDelegate *)[[UIApplication sharedApplication] delegate];

    //assign the current viewcontroller to the temporary view controller
    appdelegate.preViewController=[self.navigationController.viewControllers lastObject];

    //insert detailed view into the array vcs before the current viewcontroller
        if (![vcs containsObject:DVC]) {
        [vcs insertObject:DVC atIndex:[vcs count]-1];
     }
    // update the self.navigation with the new stack
    [self.navigationController setViewControllers:vcs animated:NO];

    // pop the  othernavigationcontroller from the navigation stack to fake a detailedview controller push 
     [self.navigationController popViewControllerAnimated:YES];
} 
```

4 - 添加一个按钮来替换默认按钮并为详细视图控制器定义一个 IBaction (backClicked)：

```
- (IBAction)backClicked:(id)sender{
AppDelegate *appdelegate=(AppDelegate *)[[UIApplication sharedApplication] delegate];
//push the holder view controller to fake a pop back to the master view controller
[self.navigationController pushViewController:appdelegate.preViewController animated:YES];
} 
```

# c++ - 为什么 C++ Boost 发行版有 `.dll` 和 `.lib` 文件？

> ID：12021696
> 
> 赞同：6
> 
> 时间：2012-08-18T19:40:15.317
> 
> 标签：c++, boost, dll

伙计们。我目前正在创建一个“共享”库（又名 Windows 上的 DLL），该库又将依赖“Boost C++”库来提供日期时间功能。我注意到我的 Boost 安装（通过 Boostpro 完成）`lib`在 boost 安装目录中有一些 DLL 和 LIB 文件。好的，我认为有必要，所以我将它们添加到我的 IDE 中的库依赖项中。

现在我要做的是编写使用 boost 日期时间库的代码，创建一个共享库并从独立的可执行文件中使用它。即使我刚刚将创建的共享库复制到可执行文件夹而不是`boost_date_time-vc100-mt-1_47.dll`文件中，它也可以工作。奇怪的。现在我要做的是从我的项目中删除 Boost 的 DLL/库依赖项并构建共享库。它仍然有效。

我有点困惑。如果 Boost 库真的只是标题，为什么我的 Boostpro 安装有日期时间和其他 boost 部分的 *.lib 和 *.dll 文件？鉴于这些 boost 库无论如何都会被编译到我的共享库中，是否有任何我想使用它们的场景？

希望我足够清楚，如果需要更多说明，请告诉我。同样 FWIW，我正在使用 Eclipse CDT + MingW 来完成这一切。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T19:46:16.047

Boost 的大部分部分是仅头文件，而其他一些部分（至少文件系统和 iostreams IIRC）需要链接库。所以这一切都取决于你使用 Boost 的哪些部分。[Boost Library Documentation](http://www.boost.org/doc/libs/)页面上记录了哪些部分需要链接。

一些库使用自动链接。这意味着头文件包含特定于编译器的代码，用于嵌入指令以将正确的库链接到目标文件中。这是编译器必须支持的有用功能。但 gcc 工具链（包括 MingW）不支持这一点。

# backbone.js - 主干.js 集合获取 - 成功或错误函数均不触发

> ID：12021699
> 
> 赞同：3
> 
> 时间：2012-08-18T19:40:45.427
> 
> 标签：backbone.js

在下面的代码中，我看到集合初始化程序触发。我还可以根据调整数据库命中次数的服务器端查询模块使模型初始化程序触发不同的次数，因此我确信我的 fetch 正在命中服务器。但是，我在获取后从未收到警报。有人可以纠正我的错误吗？

```
$(function () {

    Person = Backbone.Model.extend({
        initialize: function () {
            alert("Model Init");
        }
    });

    PersonList = Backbone.Collection.extend({
        model: Person,
        url: '/Tfount_Email/Email/SOAInbox',
        initialize: function () {
            alert("Collections Init");
        }
    });

    var personlist = new PersonList;

    /*
    personlist.fetch().complete(function () {
    alert("done");
    });
    */

    personlist.fetch(
        {
            error: function () {
                alert("error!!"); 
            }
        },
        {
            success: function () {
                alert("no error"); 
            }
        }
    );

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T19:59:37.880

干得好。

```
$(function () {
    var Person = Backbone.Model.extend({
            initialize: function () {
                alert("Model Init");
            }
        }),
        PersonList = Backbone.Collection.extend({
            model: Person,
            url: '/Tfount_Email/Email/SOAInbox',
            initialize: function () {
                alert("Collections Init");
            }
        }),
        personlist = new PersonList();

    personlist.fetch({
       error: function () {
         alert("error!!"); 
       },
       success: function () {
          alert("no error"); 
       }
    }).complete(function () {
        alert("done");
    });
}); 
```

笔记：

*   我添加了`var`关键字`Person`and `PersonList`，你忘了。
*   `fetch()`返回一个 jQuery XHR 对象。您应该将`complete`回调与调用绑定。
*   `fetch()`接受一个选项哈希，而不是多个选项。

# c# - 在 **Session** 中存储 `CheckBoxList` 项目并返回到 `CheckBoxList`

> ID：12021701
> 
> 赞同：-1
> 
> 时间：2012-08-18T19:41:09.180
> 
> 标签：c#, asp.net

我将所有项目存储`CheckBoxList`在**Session**中并检索相同的项目并添加到另一个或相同的项目中`CheckBoxList`。

`CheckBoxList`这是我在 button1_click 上的 Session 中存储项目的代码：

```
Session.Add("AllItems", CheckBoxList1.Items); 
```

这是我从 Session 中检索值并填写`CheckBoxList`button2_click 的代码：

```
if ((Session["AllItems"]) != null)
        {
            CheckBoxList1.Items.Add(Session["AllItems1"].ToString());
        } 
```

但这会导致其中一项`CheckBoxList`的值为：“System.Web.UI.WebControls.ListItemCollection”

有人可以帮我解决这个问题。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:18:53.037

```
 Session["AllItems"]= CheckBoxList1.Items;    

    if ((Session["AllItems"]) != null)
        {
        ListItemCollection listitem =(ListItemCollection)Session["AllItems"];
        foreach(ListItem item in  listitem)
         {          
         CheckBoxList1.Items.Add(item);
         }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:42:00.187

尝试这个

> ```
> if ((Session["AllItems"]) != null)
> {
>     foreach(ListItem item in (ListItemCollection)Session["AllItems"])
>     {
>         CheckBoxList1.Items.Add(item);
>     }                
> } 
> ```

# mysql - SQL 组关系

> ID：12021702
> 
> 赞同：2
> 
> 时间：2012-08-18T19:41:25.733
> 
> 标签：mysql, sql

我确实有关于 SQL 的问题。

我有 3 张桌子：

*   表 1 被调用`news`并且有一个主键`ID`
*   表2被调用`categories`，也有一个主键`ID`
*   表 3 被调用`newscat`并且有 2 列，`news`并且`cat`

我现在正在搜索一个 SQL 查询，它允许我找到下一个 ID，而不是 X 类。

举一个实际的例子：

*   我有一个新闻页面和一个按钮来跳转到下一个新闻项目。
*   我也有一个名为 的小组`Unpublished`，所以我现在正试图获得下一个`news`未发布的小组。新闻可以分为多个类别！

    ```
    SELECT p.id 
    FROM posts p, post_cats pc 
    WHERE ???? 
    AND pc.post = p.id 
    AND p.id < '22' 
    ORDER BY p.id DESC LIMIT 1 
    ```

有人知道吗？

希望这行得通（只是手工写得很快）：

```
CREATE TABLE IF NOT EXISTS `categories` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(200) CHARACTER SET latin1 NOT NULL,
  `special` varchar(100) CHARACTER SET latin1 NOT NULL COMMENT '[unpub]',
  PRIMARY KEY (`id`),
  KEY `name` (`name`,`special`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_bin AUTO_INCREMENT=8 ;

INSERT INTO `categories` (`id`, `name`, `special`) VALUES
(1, 'Category#1', ''),
(2, 'Category#2', ''),
(3, 'Category#3', ''),
(4, 'Unpublished', 'unpub');

CREATE TABLE IF NOT EXISTS `posts` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(200) CHARACTER SET latin1 NOT NULL,
  `desc` text CHARACTER SET latin1 NOT NULL,
  PRIMARY KEY (`id`),
  KEY `title` (`title`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_bin AUTO_INCREMENT=4 ;

INSERT INTO `posts` (`id`, `title`, `desc`) VALUES
(1,'Title#1','Desc#1'),
(2,'Title#2','Desc#2'),
(3,'Title#3','Desc#3');

CREATE TABLE IF NOT EXISTS `post_cats` (
  `cat` int(11) NOT NULL,
  `post` int(11) NOT NULL,
  KEY `cat` (`cat`,`post`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

INSERT INTO `post_cats` (`cat`, `post`) VALUES
(1, 1),
(2, 1),
(3, 2),
(1, 2),
(2, 3),
(3, 3),
(4, 2); 
```

所以这个想法是，如果我在`News`1 上并单击下一步，它应该返回`News`3，因为`News`2 位于`Category`设置了“unpub”标志的位置。

# c# - 这种情况下最有效的搜索机制是什么？

> ID：12021705
> 
> 赞同：2
> 
> 时间：2012-08-18T19:41:32.697
> 
> 标签：c#, list, search

我有一个定义如下的类：

```
public class AlarmViolation
{
    public string ObjectId { get; set; }
    public int ChartType { get; set; }
    public string AlarmInternalId { get; set; }
    public short PositionInSequence { get; set; }
    public short SequenceCount { get; set; }
    public string TagValue { get; set; }
    public DateTime PurgeDate { get; set; }
} 
```

然后我创建一个此类的列表，如下所示：

```
List<AlarmViolation> alarmViolationList; 
```

我目前执行如下 Linq 查询：

```
return alarmViolationList
  .Where(row => row.ObjectId == objectId)
  .Where(row => row.ChartType == this.ChartType)
  .Where(row => row.AlarmInternalId == this.InternalId)
  .Where(row => row.PositionInSequence == positionInSequence)
  .Where(row => row.SequenceCount == sequenceCount)
  .Any(); 
```

我目前的实现表现很差。该列表通常包含介于 150K 和 300K 之间的条目。此查询会定期执行数百次（大约每 3 分钟一次）。

如果我能以某种方式索引这个列表，或者如果这是一个数据库表，我会在 ObjectId + ChartType 上创建一个索引。

有人可以提出更有效的实施方案。如果您需要更多信息，我很乐意提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T19:43:46.997

> 如果我能以某种方式索引这个列表，或者如果这是一个数据库表，我会在 ObjectId + ChartType 上创建一个索引。

这表明您应该创建一个`AlarmViolationKey`由 ObjectId 和 ChartType 组成的键类型 (?)，然后使用`Dictionary<AlarmViolationKey, AlarmViolation>`. 这将从*根本上*增加搜索时间。如果每个键有多个违规行为，*并且*您已经以不会更改的方式预先创建了列表，则可以使用 a`Lookup`代替。

无论你做什么，基本上你都不想做你当前正在做的线性扫描——你想要一个基于散列的查找。

（根据您的具体情况，您可能仍然需要一个列表，或者您可以完全使用字典而不是列表。没有更多上下文很难说。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:44:33.767

由于您只搜索相等性，我建议您使用哈希表。创建一个将包含您平等搜索的所有成员的类（在您的情况下：ObjectId，ChartType，AlarmInternalId，...）。实施`Equals`和`GetHashCode`。

`Enumerable.ToDictionary`接下来，使用或将所有对象放入查找表中`Enumerable.ToLookup`。您可以使用新创建的“键”类来添加项目并搜索项目。

这将为您提供恒定的时间查找，即使是多个结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T19:43:43.907

你为什么不写这个：

```
return alarmViolationList
      .Any(row => row.ChartType == this.ChartType &&              //int
                  row.PositionInSequence == positionInSequence && //short
                  row.SequenceCount == sequenceCount &&           //short
                  row.AlarmInternalId == this.InternalId &&       //string
                  row.ObjectId == objectId);                      //string 
```

在我看来，这应该会在一定程度上提高性能。请注意，我正在利用短路**进行**`string`比较和比较。 **`int``short`**

# android - 选择 * 返回空光标

> ID：12021709
> 
> 赞同：1
> 
> 时间：2012-08-18T19:42:10.687
> 
> 标签：android, sqlite, cursor

我在我的表中插入一条记录。它成功是因为 .insert() 返回了新的行 id，我使用该 id 来查询 where cause _id = id。**它成功了，我得到了 ROW RETURN**

但是当我用 SELECT * FROM TABLE (no where cause) 查询时，它返回空游标！

请帮我解决这个问题

这是插入方法

```
public String insertCategory(String name, int color) {
    SQLiteDatabase db = getWritableDatabase();

    ContentValues cv = new ContentValues();
    cv.put(COLUMN_NAME, name);
    cv.put(COLUMN_COLOR, color);

    long id;
    try {
        id = db.insertOrThrow(TABLE_CATEGORIES, null, cv);
    } catch (Exception e) {
        return null;
    }

    Cursor row = getRowById(db, TABLE_CATEGORIES, id, new String[] {
            COLUMN_ID, COLUMN_NAME });
    if (row.getCount() > 0) {
        if (row.moveToNext()) {
            return row.getString(row.getColumnIndex(COLUMN_NAME));
        } else
            return null;
    } else
        return null;
} 
```

这是我用来查询 where cause 的方法

```
private Cursor getRowById(SQLiteDatabase db, String table, long id,
        String[] columns) {
    Cursor cursor = db.query(table, columns, COLUMN_ID + " = ?",
            new String[] { "" + id }, null, null, null);
    return cursor;
} 
```

最后，这是我用于查询所有行的方法

```
public Cursor getAllCategories() {
    SQLiteDatabase db = getWritableDatabase();
    Cursor cursor = db.query(TABLE_CATEGORIES, null, null, null, null,
            null, null);

    db.close();
    return cursor;
} 
```

谢谢大家的帮助

# javascript - 在没有插件的jquery中绑定按键

> ID：12021710
> 
> 赞同：0
> 
> 时间：2012-08-18T19:42:20.943
> 
> 标签：javascript, jquery

我需要一个简单的按键绑定（右箭头），但我不能让它工作我不知道我应该用什么链接 .keypress() 方法并且变量只是不会输入键代码。它会在按键时做出反应（它记录在控制台上）但不是我想要的。我不能使用任何插件或 jquery UI。

```
 $("*").keypress(function(e){
        console.log(e); //this returns [object object]
        if (e.which == 39 || e.keyCode == 39 || window.event.keyCode == 39){
            $('.someDiv').click();
        };
    }); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:51:33.013

您可以使用该`document`对象，还请注意 jQuery 规范化该`which`属性并且它是跨浏览器的：

```
$(document).on('keyup', function(event){
    if (event.which == 39){
        $('.someDiv').click();
    };
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T19:52:18.887

`keypress`似乎不会在箭头键上触发，所以这样的东西怎么样：

```
$(document).on('keyup', function(e){
    if (e.which == 39){
        $('.someDiv').trigger('click');
    }
}); 
```

此外，jQuery 规范化`e.which`和绑定到文档似乎是一个更好的主意，而不是遍历 DOM 中的每个元素。

[**小提琴**](http://jsfiddle.net/KPY6s/)

# wordpress - Wordpress 为用户的评论和帖子创建链接

> ID：12021711
> 
> 赞同：0
> 
> 时间：2012-08-18T19:42:35.690
> 
> 标签：wordpress, wordpress-theming

我想在我的主题中添加一些链接，这样如果用户登录，他可以转到他自己的页面，其中列出了他自己的评论和帖子。

我找到了几个函数来帮助我创建模板部件。例如：

[如何在 Wordpress 上显示登录用户的评论（仅）](https://stackoverflow.com/questions/11009734/how-to-display-loged-in-users-comments-only-on-wordpress)

[在 Wordpress 上评论作者链接](https://stackoverflow.com/questions/2742246/comment-author-link-on-wordpress)

问题是我找不到有关创建链接的任何信息。似乎 the_author 的所有函数都不接受 ID，例如当前用户 ID。我想知道如何在循环外创建链接，以检索模板部分，例如当前用户的评论和帖子。我可以创建一个新的 _link() 函数吗？搜索 _link() 的 codex 没有返回我需要的内容。

到目前为止，我设法返回了实际的帖子标题，但我希望在我的页面顶部有一个链接，上面写着“我最近的活动”，类似的东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:25:22.417

你能不能创建一个叫做用户活动之类的页面模板。然后查询登录用户的用户名并使用您找到的功能返回他们的评论？因此，每个用户的链接都是相同的。页面本身会通过根据用户名进行查询来完成所有魔法。这是我用来检索主页上最近评论的一些代码：

```
<?php

$recent_comments = get_comments( array(
'number'    => 2,
'status'    => 'approve'
) );
echo '<ul>';
foreach($recent_comments as $c){
    $the_comment = mb_strimwidth($c->comment_content, 0, 80, "...", "UTF-8");
    echo '<li>';
        echo '<p>'.$the_comment.'</p>';
        echo '<span class="comment-source">'.$c->comment_author.'</span>';
        echo '<span class="time-ago">'.$c->comment_date_gmt.'</span>';
        $permalink = get_permalink( $c->comment_post_ID );
        echo '<a href="'.$permalink.'" class="post-link">'.$permalink.'</a>';
    echo '<l/i>';
}
echo '</ul>';
?> 
```

所以可以使用参数“post_author”来查询当前用户的评论。并使用 get_currentuserinfo() 获取当前用户的信息。

希望这就是你所追求的！

# php - 客户端证书和 PHP 入门

> ID：12021712
> 
> 赞同：1
> 
> 时间：2012-08-18T19:42:59.623
> 
> 标签：php, iis, ssl, client-certificates

我是我部门内部网站的项目经理，我正在尝试为网站设置用户名/密码身份验证的替代方法。我的印象是，理想的方法是在每个授权设备上使用 SSL 客户端证书来实现这一点，但是在尝试消化了几天的信息甚至购买了一本关于 OpenSSL 的书之后，我什至不知道如何开始。

设置的要点如下：

*   在 IIS 6 上运行的网站
*   安装了 OpenSSL 模块的 PHP 5.2
*   视窗服务器 2003
*   登录设备包括 Windows XP/Windows 7 PC 和 Blackberry 设备
*   当前安装在服务器上且连接所需的有效 CA 签名 SSL 证书

我想做的是从连接设备请求客户端证书；如果不可用，请为 LDAP 身份验证请求用户名和密码（目前正在运行）。一旦通过身份验证，我希望用户能够生成和下载客户端证书，以便在设备上安装以连接到该服务器，而无需使用用户名/密码组合。

我知道我可以使用 cookie 进行相同类型的“自动登录”，但我认为使用这种方法可以增强安全性，尽管配置更繁琐。

我希望这里的某个人可以为我指出正确的方向来开始这样的事情，或者告诉我我是否完全朝着错误的方向前进以完成这项工作。我确信我的理解存在很多差距，但是到目前为止，我读过的每个教程要么过于笼统而无用，要么跳入了一定程度的复杂性，以至于我无法理解超过几行。

提前感谢您可以分享的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:46:22.487

我想我会把它作为我的答案，因为我越读你的问题，我就越认为这是我的答案。

我绝对不会这样做。为了允许 AES 加密的“证书”或密钥文件克服正常的身份验证过程，您需要要求一件事的信任和完整性：客户端机器/设备。

这是不可能的，您永远不应该依赖客户端机器的安全性或安全性以及您在他们的机器上拥有的数据。如果用户没有在每个站点的浏览器自己的密码数据库中设置“记住我的密码”，那么物理密码比计算机上的物理文件更难窃取。这就是为什么大多数物理密码都是通过窃取网站数据库来获取的。当然，如果您知道自己的东西，您可以信任自己的编码和散列函数来提供您拥有的最佳安全性，比客户端计算机更安全。如果客户证书被盗，就没有办法知道它是否有，

我想为了提高安全性，您可以说每个文件都应该限制在一个 IP 上，但这会破坏绕过身份验证过程的意义，因为如果您考虑一下，您的大多数用户将使用来自其 ISP 的动态分配的 IP。我知道我的 ISP 每半夜都会更改我的 IP，这意味着该文件将不再每天都有效，这意味着我每天都必须使用我的用户名和密码重新登录。

这至少是一场安全噩梦。您的用户帐户将只是等待被黑客入侵，并且只是您的身份验证过程之上不需要的膨胀软件。

但是，对于您的严格控制（如果是严格控制，即使通过大规模身份验证，个人任何外部可访问的东西都不会受到严格保护）Intranet，我将使用 PHP 生成我的证书文件，使用： http: [//php.net/manual/en/函数.openssl-csr-sign.php](http://php.net/manual/en/function.openssl-csr-sign.php)。

现在这里的关键是您将希望将该证书存储在您身边，以便您可以评估它。为此，您将需要使用一些解析功能：[http](http://www.php.net/manual/en/function.openssl-x509-parse.php) : //www.php.net/manual/en/function.openssl-x509-parse.php 在您获得的客户端证书上。

但是 cURL 有自己的客户端 SSL 处理程序，请看这里：

[带有 LibCUrl 的客户端证书](https://stackoverflow.com/questions/7810432/client-certificates-with-libcurl?rq=1)

希望这会有所帮助，

# ruby-on-rails-3 - Rails 迁移：建立连接在错误的数据库中创建表

> ID：12021715
> 
> 赞同：3
> 
> 时间：2012-08-18T19:43:17.097
> 
> 标签：ruby-on-rails-3, migration

我想在我的 database.yml 文件中定义的数据库之外的数据库中创建一个新表。

这是我的 database.yml 文件：

```
development:                                                                                                                                                                    
  adapter: mysql2                                                                                                                                                               
  encoding: utf8                                                                                                                                                                
  reconnect: false                                                                                                                                                              
  database: main_development                                                                                                                                                    
  pool: 5                                                                                                                                                                       
  username: root                                                                                                                                                                
  password:                                                                                                                                                                     
  socket: /var/run/mysqld/mysqld.sock                                                                                                                                           

test:                                                                                                                                                                           
  adapter: mysql2                                                                                                                                                               
  encoding: utf8                                                                                                                                                                
  reconnect: false                                                                                                                                                              
  database: main_test                                                                                                                                                    
  pool: 5                                                                                                                                                                       
  username: root                                                                                                                                                                
  password:                                                                                                                                                                     
  socket: /var/run/mysqld/mysqld.sock  

production:                                                                                                                                                                           
  adapter: mysql2                                                                                                                                                               
  encoding: utf8                                                                                                                                                                
  reconnect: false                                                                                                                                                              
  database: main_prod                                                                                                                                                    
  pool: 5                                                                                                                                                                       
  username: root                                                                                                                                                                
  password:                                                                                                                                                                     
  socket: /var/run/mysqld/mysqld.sock 
```

我有另一个名为“外围”的数据库。我想在该数据库中创建一个名为“retailer_to_domain”的表。

这是我的迁移文件：

```
class CreateRetailerToDomains < ActiveRecord::Migration                                                                                                                         

      def connection                                                                                                                                                                
        ActiveRecord::Base.establish_connection(                                                                                                                                    
        :adapter => "mysql2",                                                                                                                                                       
        :encoding => "utf8",                                                                                                                                                        
        :reconnect => false,                                                                                                                                                        
        :database => "peripheral",                                                                                                                                                 
        :pool => 5,                                                                                                                                                                 
        :username => "root",                                                                                                                                                        
        :password => "",                                                                                                                                                            
        :socket => "/var/run/mysqld/mysqld.sock").connection                                                                                                                        
      end                                                                                                                                                                           

      def change                                                                                                                                                                    
        ActiveRecord::Base.connection.create_table :retailer_to_domains do |t|                                                                                            
          t.string :name                                                                                                                                                            
          t.string :domain                                                                                                                                                          

          t.timestamps                                                                                                                                                              
        end                                                                                                                                                                         
      end                                                                                                                                                                           
    end 
```

迁移文件是由命令生成的：`rails generate model RetailerToDomain name:string domain:string`然后我添加了`def connection`从 database.yml 配置中覆盖默认数据库（“main”）的方法。

当我运行迁移 ( `rake db:migrate`) 时，在 main_development 数据库中创建了retailer_to_domains 表。如何覆盖此默认值以使迁移在我想要的位置创建表？

另外，我希望 RetailerToDomain 模型以类似的方式访问此表，建立连接方法如下所示：

```
class RetailerToDomain < ActiveRecord::Base                                                                                                                                     

 establish_connection(                                                                                                                                    
            :adapter => "mysql2",                                                                                                                                                       
            :encoding => "utf8",                                                                                                                                                        
            :reconnect => false,                                                                                                                                                        
            :database => "peripheral",                                                                                                                                                 
            :pool => 5,                                                                                                                                                                 
            :username => "root",                                                                                                                                                        
            :password => "",                                                                                                                                                            
            :socket => "/var/run/mysqld/mysqld.sock")

self.table=retailer_to_domain

validates_presence_of :name, :domain

end 
```

在此先感谢您的任何想法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-24T12:49:13.340

看这个页面！

[https://github.com/rails/rails/issues/3497](https://github.com/rails/rails/issues/3497)

创建 rake 文件

```
# Augment the main migration to migrate your engine, too.
task 'db:migrate', 'your_engine:db:migrate'

# Augment to dump/load the engine schema, too
task 'db:schema:dump', 'your_engine:db:schema:dump'
task 'db:schema:load', 'your_engine:db:schema:load'

namespace :your_engine do
  namespace :db do
    desc 'Migrates the your_engine database'
    task :migrate => :environment do
      p "your_engine db migrate"
      with_engine_connection do
        ActiveRecord::Migrator.migrate("#{File.dirname(__FILE__)}/../../db/migrate/your_engine", ENV['VERSION'].try(:to_i))
      end
      Rake::Task['your_engine:db:schema:dump'].invoke
    end

    task :'schema:dump' => :environment do
      require 'active_record/schema_dumper'

      with_engine_connection do
        File.open(File.expand_path('../../../db/your_engine_schema.rb', __FILE__), 'w') do |file|
          ActiveRecord::SchemaDumper.dump ActiveRecord::Base.connection, file
        end
      end
    end

    task :'schema:load' => :environment do
      with_engine_connection do
        load File.expand_path('../../../db/your_engine_schema.rb', __FILE__)
      end
    end
  end
end

# Hack to temporarily connect AR::Base to your_engine.
def with_engine_connection
  original = ActiveRecord::Base.remove_connection
  ActiveRecord::Base.establish_connection "your_engine_#{Rails.env}".to_sym
  yield
ensure
  ActiveRecord::Base.establish_connection original
end 
```

模型

```
class YourModel < ActiveRecord::Base
    establish_connection "your_engine_#{Rails.env}".tom_sym
end 
```

数据库.yaml

```
your_engine_development:
  adapter: 
  database:
  encoding:
  username:
  password:
  host: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:10:21.093

```
 Add another database connection seeting to database.yml file.

        database.yml file

            development:                                                                                                                                                                    
              adapter: mysql2                                                                                                                                                               
              encoding: utf8                                                                                                                                                                
              reconnect: false                                                                                                                                                              
              database: main_development                                                                                                                                                    
              pool: 5                                                                                                                                                                       
              username: root                                                                                                                                                                
              password:                                                                                                                                                                     
              socket: /var/run/mysqld/mysqld.sock                                                                                                                                           

            test:                                                                                                                                                                           
              adapter: mysql2                                                                                                                                                               
              encoding: utf8                                                                                                                                                                
              reconnect: false                                                                                                                                                              
              database: main_test                                                                                                                                                    
              pool: 5                                                                                                                                                                       
              username: root                                                                                                                                                                
              password:                                                                                                                                                                     
              socket: /var/run/mysqld/mysqld.sock  

            production:                                                                                                                                                                           
              adapter: mysql2                                                                                                                                                               
              encoding: utf8                                                                                                                                                                
              reconnect: false                                                                                                                                                              
              database: main_prod                                                                                                                                                    
              pool: 5                                                                                                                                                                       
              username: root                                                                                                                                                                
              password:                                                                                                                                                                     
              socket: /var/run/mysqld/mysqld.sock 

    another_database:
                adapter: "mysql2",                                                                                                                                                       
                encoding: "utf8",                                                                                                                                                        
                reconnect: false,                                                                                                                                                        
                database: "peripheral",                                                                                                                                                 
                pool: 5,                                                                                                                                                                 
                username: "root",                                                                                                                                                        
                password: "",                                                                                                                                                            
                socket: "/var/run/mysqld/mysqld.sock"

Now In Migration file specify:
ActiveRecord::Base.establish_connection(:another_database)

class CreateRetailerToDomains < ActiveRecord::Migration
ActiveRecord::Base.establish_connection(:another_database)
 def change                                                                                                                                                                    
     create_table :retailer_to_domains do |t|                                                                                            
          t.string :name                                                                                                                                                            
          t.string :domain                                                                                                                                                          

          t.timestamps                                                                                                                                                              
        end                                                                                                                                                                         
      end                                                                                                                                                                           
    end  

 It will get create table inside that database only.

Model

class RetailerToDomain < ActiveRecord::Base
  ActiveRecord::Base.establish_connection(:another_database)
end

**To check the active database connection**
ActiveRecord::Base.connection.current_database 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:49:18.147

在你的`config/database.yml`：

```
new_connect_development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: new_database_development
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock 
```

和所有其他环境相同的块。然后添加到您的迁移（rails 2.x-3.0 的示例，rails 3.1 remove `self`）：

```
 def self.connection
    ActiveRecord::Base.establish_connection("new_connect_#{RAILS_ENV}").connection
  end 
```

并将以下行添加到您的模型中，与新数据库中的表相对应：

```
class ModelName < ActiveRecord::Base
  establish_connection "new_connect_#{RAILS_ENV}"
end 
```

# javascript - Javascript 从字典中提取数据。

> ID：12021721
> 
> 赞同：0
> 
> 时间：2012-08-18T19:44:10.730
> 
> 标签：javascript, dictionary

这可能看起来很基本，但我不明白。

我从字典中有以下数据。

要提取 ColorModel 我只是做*object.ColorModel*
这里没有问题或问题。

但是如何提取“{Exif}”？我无法输入*对象。"{Exif}"*

```
{

ColorModel = RGB;

DPIHeight = 72;

DPIWidth = 72;

Depth = 8;

Orientation = 1;

PixelHeight = 3000;

PixelWidth = 4000;

"{Exif}" =     {

    ApertureValue = "2.96875";

    ColorSpace = 1;

    ComponentsConfiguration =         (

        0,

        0,

        0,

        1

    );

    CompressedBitsPerPixel = 3;

    CustomRendered = 0;

    DateTimeDigitized = "2012:03:22 13:17:00";

    DateTimeOriginal = "2012:03:22 13:17:00";

    DigitalZoomRatio = 1;

    ExifVersion =         (

        2,

        2

    );

    ExposureBiasValue = 0;

    ExposureMode = 0;

    ExposureTime = "0.01666666753590107";

    FNumber = "2.799999952316284";

    Flash = 24;

    FlashPixVersion =         (

        1,

        0

    );

    FocalLength = 5;

    FocalPlaneResolutionUnit = 2;

    FocalPlaneXResolution = "16393.4453125";

    FocalPlaneYResolution = "16393.4453125";

    ISOSpeedRatings =         (

        200

    );

    MaxApertureValue = "2.96875";

    MeteringMode = 5;

    PixelXDimension = 4000;

    PixelYDimension = 3000;

    SceneCaptureType = 0;

    SensingMethod = 2;

    ShutterSpeedValue = "5.90625";

    WhiteBalance = 0;

};

"{TIFF}" =     {

    DateTime = "2012:03:26 21:00:45";

    HostComputer = "Mac OS X 10.7.3";

    Make = Canon;

    Model = "Canon PowerShot SD940 IS";

    Orientation = 1;

    ResolutionUnit = 2;

    Software = "QuickTime 7.7.1";

    XResolution = 72;

    YResolution = 72;

    "_YCbCrPositioning" = 2;

}; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:47:32.600

您的代码不是有效的 javascript。这是使用冒号进行声明的正确形式，而不是使用等号和逗号来分隔多个属性，而不是分号：

```
var data = {
    ColorModel: "RGB",
    DPIHeight: 72,
    DPIWidth: 72,
    "{Exif}": {
        ApertureValue:"2.96875"
    }
}

var dpiHeight = data.DPIHeight;
var aperture = data["{EXIF}"].ApertureValue; 
```

然后，要引用包含在 javascript 符号中不合法的字符的属性名称，您可以使用该`["{EXIF}"]`符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T19:52:29.993

尝试对象["{Exif"}"];

No period. This will allow you to reference invalid JS names (like this case) or reserved words like "class" or "in".

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T19:46:58.073

将对象视为哈希表。所有对象属性都可以用作 JavaScript 中的哈希字符串。

```
var value = object["{Exif}"]; 
```

# kendo-ui - Kendo UI Grid 弹出编辑

> ID：12021723
> 
> 赞同：0
> 
> 时间：2012-08-18T19:44:32.227
> 
> 标签：kendo-ui

我正在使用最新的 KendoUI 版本。如何在剑道 UI 网格中自定义弹出窗口？（可编辑：表格选项中的“弹出”）。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:05:01.313

> 可编辑：{ 模式：“弹出”，模板：kendo.template($("#popup_editor").html()) }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-19T16:59:51.273

要在 Kendo UI Grid 中自定义弹出窗口，您可以使用`editable`Grid 的属性：

```
editable: {
    mode: "popup",
    template: kendo.template($("#custom_editor").html())
}

----------------
    <script type="text/x-kendo-template" id="custom_editor">
        <div class="k-edit-label required">UserName : </div>
        <input type="text" name="UserName" class="k-textbox">
        .....
    </script> 
```

如果您想**在 Grid 中使用不同的弹出编辑器进行创建和更新**数据操作，您应该为它们定义一个模板：

```
editable: {
    mode:"popup",
    template: $("#template").html()
}, 
```

然后像这样定义模板：

```
 <script type="text/x-kendo-template" id="template">
        #if(data.isNew()) {#
        #var createTemp = kendo.template($("\#createTemplate").html());#
        #=createTemp(data)#
        #} else {#
        #var editTemp = kendo.template($("\#editTemplate").html());#
        #=editTemp(data)#
        #}#
    </script>

    <script type="text/x-kendo-template" id="createTemplate">
        <div class="k-edit-label required">UserName : </div>
        <input type="text" name="UserName" class="k-textbox">
        .....
    </script>

    <script type="text/x-kendo-template" id="editTemplate">
        <div class="k-edit-label">UserName : </div>
        <input type="text" name="UserName" class="k-textbox" readonly="readonly">
        .....
    </script> 
```

# javascript - d3 geo - 地图投影

> ID：12021725
> 
> 赞同：1
> 
> 时间：2012-08-18T19:45:07.307
> 
> 标签：javascript, map, d3.js, projection, geo

使用 d3.geo，我想绘制一张带有投影的地图，我不想通过 try&error 找到它，但使用可视化工具来帮助我。

有一个工具：Kartograph.js的[可视化地图配置器。](http://kartograph.org/showcase/editor/#ortho)有什么工具可以用来为 d3.geo 生成投影吗？

如何在不尝试错误的情况下找到所需的投影？我可以从任何地图获取原点参数，但用于缩放和平移？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T18:03:58.903

虽然不如 Kartograph 的配置器那么精致，但如果您克隆[D3 git 存储库](https://github.com/mbostock/d3)，您会发现三个带有滑块来控制投影设置的示例：

*   [阿尔伯斯](https://github.com/mbostock/d3/blob/master/examples/albers/albers.html)
*   [方位角](https://github.com/mbostock/d3/blob/master/examples/azimuthal/azimuthal.html)
*   [墨卡托](https://github.com/mbostock/d3/blob/master/examples/mercator/mercator.html)

如果您使用的是方位投影，您也可以尝试拖动[这个交互式地球](http://mbostock.github.com/d3/talk/20111018/azimuthal.html)，然后使用 JavaScript 控制台提取原点 ( `projection.origin()`)。

# vb.net - 显示 datagridview 的行已被更新/插入或来自 DataTable 的错误

> ID：12021726
> 
> 赞同：0
> 
> 时间：2012-08-18T19:45:13.337
> 
> 标签：vb.net, datagridview, datatable

我想向用户显示网格中的哪一行出错、更新或插入。

网格以前管理着所有的行和列，但我正在更改它，所以它都是用 sqlAdapter(dataTables) 创建/填充的。

所以...我可以查看一行是否有错误或已插入...但是通过 DataRow，例如：

```
usrGrdPieces.getGrid.DataSource.DataSource.GetChanges() 
```

但这只会给我网格绑定的数据集，而不是网格的实际行。而且我不知道如何显示这些行的细节。

之前为该行所在的每个状态添加了一个包含图像的列，即使使用 bindingSource 生成的网格也可以做到吗？

或者，如果可以仅以绿色/红色突出显示单元格或行，我也会很高兴......

感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:46:46.977

您可以通过行的 DataBoundItem 获取网格中数据绑定到数据表的行的 DataRow。

例如，假设我想突出显示已添加的绿色行和使用 DataRow 对象上的 DataRowState 属性修改的橙色行。您可以做同样的事情来在列中显示图像而不是背景色。错误状态不是存储在数据行中的东西，因此根据您的意思，您必须进行额外的检查。出于本示例的目的，假设有一个名为“名称”的列，它应该是 50 个字符或更少。如果不止于此，我将用红色突出显示该行，通常我会使用单元格/行的“ErrorText”属性来表示存在错误，但我将坚持使用此示例的颜色。

我将处理 CellFormatting 事件（我用 C# 编写了这个，因为我更熟悉它，但属性/概念在 VB 中是相同的）。

```
dataGridView_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    DataGridView grid = (DataGridView) sender;
    DataRowView currentRowView = (DataRowView) grid.Rows[e.RowIndex].DataBoundItem;
    DataRow currentRow = (DataRow)currentRowView.Row;
    string name = currentRow["Name"].ToString();
    if (name.Length > 50)
    {
        grid.Rows[e.RowIndex].DefaultCellStyle.BackColor = Color.Red;
    }
    else if (currentRow.RowState == DataRowState.Added)
    {
        grid.Rows[e.RowIndex].DefaultCellStyle.BackColor = Color.Green;
    }
    else if (currentRow.RowState == DataRowState.Modified)
    {
        grid.Rows[e.RowIndex].DefaultCellStyle.BackColor = Color.Orange;
    }
} 
```

# python - 熊猫可以将可变长度空格作为列分隔符处理吗

> ID：12021730
> 
> 赞同：47
> 
> 时间：2012-08-18T19:45:34.630
> 
> 标签：python, pandas

我有一个文本文件，其中列由可变数量的空格分隔。是否可以在不预处理文件的情况下直接将此文件作为熊猫数据框加载？在[pandas 文档中，分隔符部分](http://pandas-docs.github.io/pandas-docs-travis/io.html#csv-text-files)说我可以使用一个`'s*'`构造，但我无法让它工作。

```
## sample data
head sample.txt

#                                                                            --- full sequence --- -------------- this domain -------------   hmm coord   ali coord   env coord
# target name        accession   tlen query name           accession   qlen   E-value  score  bias   #  of  c-Evalue  i-Evalue  score  bias  from    to  from    to  from    to  acc description of target
#------------------- ---------- ----- -------------------- ---------- ----- --------- ------ ----- --- --- --------- --------- ------ ----- ----- ----- ----- ----- ----- ----- ---- ---------------------
ABC_membrane         PF00664.18   275 AAF67494.2_AF170880  -            615     8e-29  100.7  11.4   1   1     3e-32     1e-28  100.4   7.9     3   273    42   313    40   315 0.95 ABC transporter transmembrane region
ABC_tran             PF00005.22   118 AAF67494.2_AF170880  -            615   2.6e-20   72.8   0.0   1   1   1.9e-23   6.4e-20   71.5   0.0     1   118   402   527   402   527 0.93 ABC transporter
SMC_N                PF02463.14   220 AAF67494.2_AF170880  -            615   3.8e-08   32.7   0.2   1   2    0.0036        12    4.9   0.0    27    40   391   404   383   408 0.86 RecF/RecN/SMC N terminal domain
SMC_N                PF02463.14   220 AAF67494.2_AF170880  -            615   3.8e-08   32.7   0.2   2   2   1.8e-09   6.1e-06   25.4   0.0   116   210   461   568   428   575 0.85 RecF/RecN/SMC N terminal domain
AAA_16               PF13191.1    166 AAF67494.2_AF170880  -            615   3.1e-06   27.5   0.3   1   1     2e-09     7e-06   26.4   0.2    20   158   386   544   376   556 0.72 AAA ATPase domain
YceG                 PF02618.11   297 AAF67495.1_AF170880  -            284   3.4e-64  216.6   0.0   1   1   2.9e-68     4e-64  216.3   0.0    68   296    53   274    29   275 0.85 YceG-like family
Pyr_redox_3          PF13738.1    203 AAF67496.2_AF170880  -            352   2.9e-28   99.1   0.0   1   2   2.8e-30   4.8e-27   95.2   0.0     1   201     4   198     4   200 0.85 Pyridine nucleotide-disulphide oxidoreductase

#load data
from pandas import *
data = read_table('sample.txt', skiprows=3, header=None, sep=" ")

ValueError: Expecting 83 columns, got 91 in row 4

#load data part 2
data = read_table('sample.txt', skiprows=3, header=None, sep="'s*' ")
#this mushes some of the columns into the first column and drops the rest.
    X.1
1    ABC_tran PF00005.22 118 AAF67494.2_
2    SMC_N PF02463.14 220 AAF67494.2_
3    SMC_N PF02463.14 220 AAF67494.2_
4    AAA_16 PF13191.1 166 AAF67494.2_
5    YceG PF02618.11 297 AAF67495.1_
6    Pyr_redox_3 PF13738.1 203 AAF67496.2_
7    Pyr_redox_3 PF13738.1 203 AAF67496.2_
8    FMO-like PF00743.14 532 AAF67496.2_
9    FMO-like PF00743.14 532 AAF67496.2_ 
```

虽然我可以预处理文件以将空格更改为逗号/制表符，但直接加载它们会很好。

（仅供参考，这是[hmmscan 程序](http://hmmer.janelia.org/)的 *.hmmdomtblout 输出）

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2015-05-12T20:53:51.517

您应该能够做到这一点，@DSM 刚刚在另一个线程中教过我：

```
data = read_table('sample.txt', skiprows=3, header=None, delim_whitespace=True) 
```

[文档](http://pandas-docs.github.io/pandas-docs-travis/io.html#csv-text-files)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-08-18T20:35:00.870

我认为文档中只是缺少一个`\`（可能是因为它在某些时候被解释为转义标记？）毕竟这是一个正则表达式：

```
In [68]: data = read_table('sample.txt', skiprows=3, header=None, sep=r"\s*")

In [69]: data
Out[69]: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 7 entries, 0 to 6
Data columns:
X.1     7  non-null values
X.2     7  non-null values
X.3     7  non-null values
X.4     7  non-null values
X.5     7  non-null values
X.6     7  non-null values
[...]
X.23    7  non-null values
X.24    7  non-null values
X.25    5  non-null values
X.26    3  non-null values
dtypes: float64(8), int64(10), object(8) 
```

由于@MRAB 指出的分隔符​​问题，最后几列存在一些问题：

```
In [73]: data.ix[:,20:]
Out[73]: 
   X.21  X.22           X.23                   X.24            X.25    X.26
0   315  0.95            ABC            transporter   transmembrane  region
1   527  0.93            ABC            transporter            None    None
2   408  0.86  RecF/RecN/SMC                      N        terminal  domain
3   575  0.85  RecF/RecN/SMC                      N        terminal  domain
4   556  0.72            AAA                 ATPase          domain    None
5   275  0.85      YceG-like                 family            None    None
6   200  0.85       Pyridine  nucleotide-disulphide  oxidoreductase    None 
```

但这可以在最后修补。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-02T03:00:41.357

在这样的情况下，给出的答案都不起作用：

```
Block..Col.name.with.spaces..col3
...1..6.141754e+003..2.998903e+000
2048..6.154461e+003..6.010216e+000 
```

即，使用两个或多个空格作为分隔符，但列名本身可以包含一个空格。

在这种情况下，我们需要两个或多个空格的正则表达式。这将起作用：

```
sep=r"[ ]{2,}" 
```

但同样，缺点是它会触发 python 解析器。

# bing-maps - WP7：多个 Puspin 和 Bing 地图

> ID：12021737
> 
> 赞同：1
> 
> 时间：2012-08-18T19:46:25.127
> 
> 标签：bing-maps, pushpin

```
public void setMap()
    {
        GeoCoordinate mapCener = new GeoCoordinate(39.920794, 32.853902);
        Pushpin pin1 = new Pushpin();
        pin1.Location = mapCener;
        pin1.Content = hereContent;
        map1.Children.Add(pin1);

        foreach (var item in pinList)
        {
            MessageBox.Show(item.Location.Latitude.ToString()+","+item.Location.Longitude.ToString());
            mapCener = new GeoCoordinate(item.Location.Latitude, item.Location.Longitude);
            pin1 = new Pushpin();
            pin1.Content = "K";
            map1.Children.Add(pin1);
            map1.SetView(mapCener, 0);
        }

        int zoom = 10;
        map1.SetView(mapCener, zoom);
        map1.ZoomBarVisibility = Visibility.Visible;
    } 
```

我有一个 PushPins 列表，其中包含不同位置的坐标。我也有中心点，它显示了手机的位置。

我尝试将图钉添加到地图的内容“K”显示在屏幕的左上角。我的 PushPin 列表包含正确的坐标，但它们在地图上的位置是错误的。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:08:02.263

听起来您正在尝试进行 PushPin 集群，这里有一篇很好的文章，其中有一个很好的示例来说明您要完成的工作。

见[http://www.scottlogic.co.uk/blog/colin/2011/11/pushpin-clustering-with-the-windows-phone-7-bing-map-control/](http://www.scottlogic.co.uk/blog/colin/2011/11/pushpin-clustering-with-the-windows-phone-7-bing-map-control/)

# php - 如何使用 SELECT 来获取包含 IN 和 EQUAL 命令的行？

> ID：12021739
> 
> 赞同：1
> 
> 时间：2012-08-18T19:46:35.793
> 
> 标签：php, mysql, sql, select, union

我有一个这样的mysql表：

![尼德|  视频|  时间](../Images/28679ba0ed549ad7212d4378c52c6a06.png)

我正在尝试获取一个`nid`值列表，其中`tid`是`19` *AND*中的任何值`53, 16 or 89`。根据当前表，我希望查询返回`10`（`=19`第 4 行）和`IN (53,16,89)`（最后一行）。

我可以将其作为 2 个单独的查询，如下所示：

```
SELECT nid FROM {term_node} WHERE tid IN (53,16,89)

SELECT nid FROM {term_node} WHERE tid = 19 
```

（term_node 是屏幕截图中的表格）。我在这个应用程序中使用 PHP，所以我可以结合这 2 个查询的结果来获得所需的结果（即 10）。但我认为可能有一种方法可以从单个数据库查询中获取此信息。

我读过关于 Union 的文章，但老实说，我不知道如何使用它。我希望我对这个问题很清楚，并提前非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T19:50:47.753

A`UNION`在这里帮不了你。你想要的是一个十字路口。有些数据库有一个[`INTERSECT`](http://msdn.microsoft.com/en-us/library/ms188055.aspx)关键字可以做你想做的事，但不幸的是 MySQL 没有。

您可以通过使用内部连接来获得所需的内容：

```
SELECT DISTINCT TN1.nid
FROM term_node AS TN1
JOIN term_node AS TN2
ON TN1.nid = TN2.nid
AND TN2.tid = 19
WHERE TN1.tid IN (53, 16, 89) 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/44ef1/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T19:53:49.877

您不需要任何联合，这可以通过在 WHERE 中添加所有 tid 轻松完成 试试这个

```
SELECT nid FROM {term_node} WHERE tid IN (53,16,89, 19) 
```

# android - Android PocketSphinx：从 apk 安装时未编写语言模型文件

> ID：12021740
> 
> 赞同：2
> 
> 时间：2012-08-18T19:46:37.410
> 
> 标签：android

PocketSphinx 工作正常。还创建了一些专门的语音命令词典。当我安装 PocketSphinx 时，说明说要在我的设备上的 /sdcard/android/data 下创建 edu.cmu.pocketsphinx 和子文件夹。并且存在语言模型和 dics。应用程序运行良好。

问题：我创建了apk并将其发送给我的兄弟进行测试，但在识别开始时它会崩溃。我正确地怀疑 edu.cmu.pocketsphinx 文件夹没有在我兄弟的手机上创建。我给他发了 edu.cmu.pocketsphinx 文件夹来手动安装，它可以工作。但对于下载者来说，摆弄这样的文件并不是最佳选择。

问题：有没有办法自动安装文件夹？与构建路径有关吗？一些包装，也许？

如果你们中有人有将pocketsphinxdemo 导出到apk 的经验，请告诉我与它相关的诡计吗？

希望这不是太模糊。

我急需。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:32:48.870

这里有一个建议：

将文件保存在 res/raw/. 当应用程序启动时，检查文件是否已保存到 sdcard，如果没有，则从 res/raw 复制它们。

在 sdcard 中，您可以使用包含版本字符串的目录名称，这样可以直接进行更新。

# c++ - 性能分析器结果

> ID：12021741
> 
> 赞同：1
> 
> 时间：2012-08-18T19:46:55.713
> 
> 标签：c++, linux, profiling, profile, profiler

我是新手，

尝试理解结果，但如何阅读这样的内容？

```
 39.57%  TestSoft.exe  libc-2.15.so         [.] 0x3fd59
  7.04%  TestSoft.exe  libc-2.15.so         [.] malloc
  6.15%  TestSoft.exe  LoanSoft.exe         [.] LoanDef::update_vec() 
```

第一行可能是 libc 中的某个函数，但它是哪个函数？0x3fd59 是什么意思？另外，对于第二行，我的代码中的哪个函数调用 malloc？对于第三行，我是否可以进一步对该函数进行 perf 以查看 update_vec() 的哪个部分很慢？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:21:42.117

由于转储是用户模式下的所有函数，因此建议使用调试符号编译。0x3fd59 是由于缺少符号而无法获得实际名称的例程。
[请参阅此处以在源代码级别进行分析。](https://perf.wiki.kernel.org/index.php/Tutorial#Source_level_analysis_with_perf_annotate)

```
 39.57%  TestSoft.exe  libc-2.15.so         [.] 0x3fd59
  7.04%  TestSoft.exe  libc-2.15.so         [.] malloc
  6.15%  TestSoft.exe  LoanSoft.exe         [.] LoanDef::update_vec() 
```

> 首先表示在相应函数中采集的整体样本的百分比。
> 
> 第二列报告收集样本的过程。
> 
> 第三列显示了样本来自的 ELF 图像的名称。如果程序是动态链接的，那么这可能会显示共享库的名称。当样本来自内核时，使用伪 ELF 映像名称 [kernel.kallsyms]。
> 
> 第四列表示获取样本的特权级别，即程序运行时中断时：

```
 [.] : user level
   [k]: kernel level
   [g]: guest kernel level (virtualization)
   [u]: guest os user space
   [H]: hypervisor 
```

> 最后一列显示符号名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T19:56:59.677

您需要使用调试符号进行构建（`-g`编译时传递给 g++ 的选项）。然后您将能够看到哪个函数使用了该 CPU 时间。您还需要使用带有调试符号的库。

# ios - 仅在传入位置参数时才向模型添加距离 attr_accessor

> ID：12021743
> 
> 赞同：0
> 
> 时间：2012-08-18T19:47:03.817
> 
> 标签：ios, ruby-on-rails, geolocation

我目前正在开发一个与 Web 和 iOS 前端相关的 Rails 后端。在 iOS 端，我们目前正在传递纬度和经度，然后计算到服务器上最近对象的距离。

我的问题是，在为 iOS 渲染 json 之前，在我的控制器中，我必须遍历每个对象并添加`object[:distance] = distance_calculation if params[:latitude] && params[:longitude]`.

添加这样的任意属性时，我会收到折旧警告，我认为我可以做一些更好的事情。我曾考虑`attr_accessor :distance`在对象上添加一个，但我无法根据模型中的参数设置它，因为模型无法访问参数，我仍然需要在 json 渲染之前执行循环。

任何建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:01:21.950

我不明白您为什么要尝试在模型上设置距离... iOS 客户端正在发送一个由 lat 和 long 定义的位置，而您到底要做什么？

您的对象已经定位，对吗？否则你将如何确定最近的？

但无论如何，要回答有关设置模型距离的问题，请使用`attr_accessor`，就像您说的那样：

```
class Model < ActiveRecord::Base
    attr_accessor :distance
end 
```

在你的控制器中

```
 object.distance = distance_calculation if params[:latitude] && params[:longitude] 
```

如果您有地理定位模型并尝试计算距离等，您可能需要使用[Geocoder 之](https://github.com/alexreisner/geocoder)类的 gem 。

# datepicker - DataPicker Sencha Touch 2 不显示未来日期

> ID：12021749
> 
> 赞同：1
> 
> 时间：2012-08-18T19:48:24.137
> 
> 标签：datepicker, sencha-touch-2

嗨 StackOverFlow 社区，

好吧，我的想法是我需要制作一个 DataPicker，它只显示当前月份和前一个月的日期，仅显示当前年份，这就是问题：只显示现在或过去的日子，没有未来的日期。

我从 Ext.Picker.Date 文件中制作了我的“自己的”“xtype”。现在我只有今年、当前月份和之前的一个月，但是如果我选择 MONTH BEFORE SHOW ME ALL DAYS OF MONTH 并且如果我选择 PRESENT MONTH SHOW ME DAYS until this DAYS，我将无法做到这一点

请有人可以帮助我。

这是我的代码：

```
Ext.define('myMoney.view.MyCal', {
    extend: 'Ext.picker.Picker',
    xtype: 'myCal',
    requires: ['Ext.DateExtras'],

    config: {
        yearFrom: new Date().getFullYear(),
        yearTo: new Date().getFullYear(),
        monthText: 'Mes',
        dayText: 'Dias',
        yearText: 'Años',
        slotOrder: ['month', 'day', 'year']
    },

    initialize: function() {
        this.callParent();

        this.on({
            scope: this,
            delegate: '> slot',
            slotpick: this.onSlotPick
        });
    },

    setValue: function(value, animated) {
        if (Ext.isDate(value)) {
            value = {
                day  : value.getDate(),
                month: value.getMonth() + 1,
                year : value.getFullYear()
            };
        }

        this.callParent([value, animated]);
    },

    getValue: function(useDom) {
        var values = {},
            items = this.getItems().items,
            ln = items.length,
            daysInMonth, day, month, year, item, i;

        for (i = 0; i < ln; i++) {
            item = items[i];
            if (item instanceof Ext.picker.Slot) {
                values[item.getName()] = item.getValue(useDom);
            }
        }

        //if all the slots return null, we should not reutrn a date
        if (values.year === null && values.month === null && values.day === null) {
            return null;
        }

        year = Ext.isNumber(values.year) ? values.year : 1;
        month = Ext.isNumber(values.month) ? values.month : 1;
        day = Ext.isNumber(values.day) ? values.day : 1;

        if (month && year && month && day) {
            daysInMonth = this.getDaysInMonth(month, year);
        }
        day = (daysInMonth) ? Math.min(day, daysInMonth): day;

        return new Date(year, month - 1, day);
    },

    /**
     * Updates the yearFrom configuration
     */
    updateYearFrom: function() {
        if (this.initialized) {
            this.createSlots();
        }
    },

    /**
     * Updates the yearTo configuration
     */
    updateYearTo: function() {
        if (this.initialized) {
            this.createSlots();
        }
    },

    /**
     * Updates the monthText configuration
     */
    updateMonthText: function(newMonthText, oldMonthText) {
        var innerItems = this.getInnerItems,
            ln = innerItems.length,
            item, i;

        //loop through each of the current items and set the title on the correct slice
        if (this.initialized) {
            for (i = 0; i < ln; i++) {
                item = innerItems[i];

                if ((typeof item.title == "string" && item.title == oldMonthText) || (item.title.html == oldMonthText)) {
                    item.setTitle(newMonthText);
                }
            }
        }
    },

    /**
     * Updates the dayText configuraton
     */
    updateDayText: function(newDayText, oldDayText) {
        var innerItems = this.getInnerItems,
            ln = innerItems.length,
            item, i;

        //loop through each of the current items and set the title on the correct slice
        if (this.initialized) {
            for (i = 0; i < ln; i++) {
                item = innerItems[i];

                if ((typeof item.title == "string" && item.title == oldDayText) || (item.title.html == oldDayText)) {
                    item.setTitle(newDayText);
                }
            }
        }
    },

    /**
     * Updates the yearText configuration
     */
    updateYearText: function(yearText) {
        var innerItems = this.getInnerItems,
            ln = innerItems.length,
            item, i;

        //loop through each of the current items and set the title on the correct slice
        if (this.initialized) {
            for (i = 0; i < ln; i++) {
                item = innerItems[i];

                if (item.title == this.yearText) {
                    item.setTitle(yearText);
                }
            }
        }
    },

    // @private
    constructor: function() {
        this.callParent(arguments);
        this.createSlots();
    },

    /**
     * Generates all slots for all years specified by this component, and then sets them on the component
     * @private
     */
    createSlots: function() {
        var me        = this,
            slotOrder = this.getSlotOrder(),
            yearsFrom = me.getYearFrom(),
            yearsTo   = me.getYearTo(),
            years     = [],
            days      = [],
            months    = [],
            ln, tmp, i,
            daysInMonth;

        // swap values if user mixes them up.
        if (yearsFrom > yearsTo) {
            tmp = yearsFrom;
            yearsFrom = yearsTo;
            yearsTo = tmp;
        }

        for (i = yearsFrom; i <= yearsTo; i++) {
            years.push({
                text: i,
                value: i
            });
        }

        daysInMonth = this.getDaysInMonth(1, new Date().getFullYear());
        for (i = 0; i < daysInMonth; i++) {
            days.push({
                text: i + 1,
                value: i + 1
            });
        }

        //Aqui estoy editando el mes para que solo muestre el mes actual y el anterior
        var ahora = new Date();
        var miMes = ahora.getMonth();
        var miMesCorto = Ext.Date.getShortMonthName(miMes);
        var miNumMes = Ext.Date.monthNumbers[miMesCorto];
        for (i = miNumMes-1, ln = miNumMes+1; i < ln; i++) {
            months.push({
                text: Ext.Date.monthNames[i],
                value: i + 1
            });
        }

        var slots = [];

        slotOrder.forEach(function(item) {
            slots.push(this.createSlot(item, days, months, years));
        }, this);

        me.setSlots(slots);
    },

    /**
     * Returns a slot config for a specified date.
     * @private
     */
    createSlot: function(name, days, months, years) {
        switch (name) {
            case 'year':
                return {
                    name: 'year',
                    align: 'center',
                    data: years,
                    title: this.getYearText(),
                    flex: 3
                };
            case 'month':
                return {
                    name: name,
                    align: 'right',
                    data: months,
                    title: this.getMonthText(),
                    flex: 4
                };
            case 'day':
                return {
                    name: 'day',
                    align: 'center',
                    data: days,
                    title: this.getDayText(),
                    flex: 2
                };
        }
    },

    onSlotPick: function() {
        var value = this.getValue(true),
            slot = this.getDaySlot(),
            year = value.getFullYear(),
            month = value.getMonth(),
            days = [],
            daysInMonth, i;

        if (!value || !Ext.isDate(value) || !slot) {
            return;
        }

        //get the new days of the month for this new date
        //Hay que asegurarse que no tome una fecha en futuro
        daysInMonth = this.getDaysInMonth(month + 1, year);

        for (i = 0; i < daysInMonth; i++) {
            days.push({
                text: i + 1,
                value: i + 1
            });
        }

        // We dont need to update the slot days unless it has changed
        if (slot.getData().length == days.length) {
            return;
        }

        // Now we have the correct amounnt of days for the day slot, lets update it
        var store = slot.getStore(),
            viewItems = slot.getViewItems(),
            valueField = slot.getValueField(),
            index, item;

        slot.setData(days);

        index = store.find(valueField, value.getDate());
        if (index == -1) {
            return;
        }

        item = Ext.get(viewItems[index]);

        slot.selectedIndex = index;
        slot.scrollToItem(item);

//        slot._value = value;
    },

    getDaySlot: function() {
        var innerItems = this.getInnerItems(),
            ln = innerItems.length,
            i, slot;

        if (this.daySlot) {
            return this.daySlot;
        }

        for (i = 0; i < ln; i++) {
            slot = innerItems[i];
            if (slot.isSlot && slot.getName() == "day") {
                this.daySlot = slot;
                return slot;
            }
        }

        return null;
    },

    // @private
    getDaysInMonth: function(month, year) {
        var daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        return month == 2 && this.isLeapYear(year) ? 29 : daysInMonth[month-1];
    },

    // @private
    isLeapYear: function(year) {
        return !!((year & 3) === 0 && (year % 100 || (year % 400 === 0 && year)));
    },

    onDoneButtonTap: function() {
        var oldValue = this._value,
            newValue = this.getValue(true),
            testValue = newValue;

        if (Ext.isDate(newValue)) {
            testValue = newValue.toDateString();
        }
        if (Ext.isDate(oldValue)) {
            oldValue = oldValue.toDateString();
        }

        if (testValue != oldValue) {
            this.fireEvent('change', this, newValue);
        }

        this.hide();
    }
}); 
```

我知道，源代码很大，但是有人可以告诉我我应该怎么做才能解决这个问题？

# javascript - 使用 javascript/jQuery 在父 div 中获取鼠标位置

> ID：12021751
> 
> 赞同：6
> 
> 时间：2012-08-18T19:49:12.270
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [jQuery 获取元素内的鼠标位置](https://stackoverflow.com/questions/4249648/jquery-get-mouse-position-within-an-element)

我有一个页面，在该页面内我有一个 div。如果用户在该 div 内单击，它将存储他们在该 div 内单击的位置的 X/Y 坐标。

例如，如果我单击 div 的左上角（无论 div 放在页面上的哪个位置），它都会返回大约 0、0。

这甚至可能吗？如果是这样，你能告诉我如何 - 甚至指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-18T19:56:40.020

使用`pageX`事件的属性获取相对于页面的x坐标和`pageY`y坐标，然后减去元素的坐标得到相对于元素的位置。

```
$( '#target' ).on( 'click', function( e ) {
    var x = e.pageX - this.offsetLeft;
    var y = e.pageY - this.offsetTop;
});​ 
```

演示：http: [//jsfiddle.net/WhrFt/](http://jsfiddle.net/WhrFt/)

jquery.com 官方教程：http://docs.jquery.com/Tutorials: [Mouse_Position](http://docs.jquery.com/Tutorials:Mouse_Position)

# python - 如何按位置对 Pandas 数据框进行切片？

> ID：12021754
> 
> 赞同：74
> 
> 时间：2012-08-18T19:49:41.783
> 
> 标签：python, pandas, dataframe, slice

我有一个 Pandas 数据框对象，它有 1000 行和 10 列。我只想对数据框进行切片并取前 10 行。我怎样才能做到这一点？我一直在尝试使用这个：

```
>>> df.shape
(1000,10)
>>> my_slice = df.ix[10,:]
>>> my_slice.shape
(10,) 
```

my_slice 不应该是前十行，即。一个 10 x 10 的数据框？如何获得前十行，例如`my_slice`10x10 数据框对象？谢谢。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-08-18T20:27:58.567

[http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.head.html?highlight=head#pandas.DataFrame.head](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.head.html?highlight=head#pandas.DataFrame.head)

```
df2 = df.head(10) 
```

应该做的伎俩

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-09-09T19:21:23.347

您还可以为方便起见：

`df[:10]`

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-19T09:02:03.070

`df.ix[10,:]`为您提供第 10 行的所有列。在您的情况下，您希望所有内容到第 10 行，即`df.ix[:9,:]`. 请注意，切片范围的右端包含在内： http: [//pandas.sourceforge.net/gotchas.html#endpoints-are-inclusive](http://pandas.sourceforge.net/gotchas.html#endpoints-are-inclusive)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-10-28T16:15:34.730

我可以看到至少三个选项：

**1.**

```
df[:10] 
```

**2.**使用[`head`](https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html)

```
df.head(10) 
```

> 对于 n 的负值，此函数返回除最后 n 行之外的所有行，相当于`df[:-n]`[[Source]](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.head.html)。

**3.**使用[`iloc`](https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html)

```
df.iloc[:10] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-23T16:06:45.423

`DataFrame[:n]`将返回前 n 行。

# jquery - jquery - 菜单脚本[点击后如何保持菜单打开]

> ID：12021756
> 
> 赞同：0
> 
> 时间：2012-08-18T19:49:58.497
> 
> 标签：jquery, jquery-plugins

jquery - 菜单脚本[点击后如何保持菜单打开]

正如标题所说，点击后如何保持菜单打开

例如在这个网站[http://the-dot.co.uk/portfolio/webdesign](http://the-dot.co.uk/portfolio/webdesign) 如果你点击“portfoli”它会显示ua菜单，选择webdesign，你将被重定向到那个页面和“portfoli”菜单将重新开放。

我也想要它，有人可以编辑它吗？

这是html代码

```
<code>
<ul class="navigation">
    <li class="toggle">Us</li>
    <li class="content"><a href="/index/thedot/">about thedot</a></li>
    <li class="toggle">Portfolio</li>
    <li class="content"></li>
    <li class="toggle">Contact</li>
    <li class="content">contact deets</li>
    <li class="toggle">Twitter</li>
    <li class="content">some twitter shit</li>
    <li><a href="#">Blog</a></li>
</ul>

</code> 
```

这是jQuery代码

```
$(function() {
  $("li.content").hide();
  $("ul.navigation").delegate("li.toggle", "click", function() { 
      $(this).next().toggle("fast").siblings(".content").hide("fast");
  });
}); 
```

**编辑**

这是你要求的现场演示

[http://jsfiddle.net/K6TSv/1392/](http://jsfiddle.net/K6TSv/1392/)

# mysql - mysql查询3张表

> ID：12021766
> 
> 赞同：0
> 
> 时间：2012-08-18T19:51:46.660
> 
> 标签：mysql

```
SELECT     favourites.FavouriteID, 
           favourites.User, 
           favourites.RecipeID,
           recipes.RecipeID,
           recipes.Name,
           recipes.CategoryID,
           recipes.RatingTotal,
           recipes.ImageMed,    
           count(ratings.RecipeID) AS trates ,
           (recipes.RatingTotal / COUNT(ratings.RecipeID)) as avg
FROM       favourites
                  RIGHT JOIN recipes 
                         on recipes.RecipeID = favourites.RecipeID
                  LEFT JOIN ratings 
                         ON ratings.RecipeID = recipes.RecipeID
WHERE favourites.user = '$Cuser' 
GROUP BY ratings.RecipeID 
ORDER BY avg  DESC, trates DESC  
LIMIT  $offset,20 
```

嗨，这个查询总共带来了 3 条记录，但它们是 7 条，还有其他 4 条没有通过，因为它们在评级表中没有记录，我该如何调整？

收藏夹表包含用户已添加到收藏夹列表的食谱的食谱 ID，我正在尝试在查询中显示收藏夹表中的食谱，该食谱由具有最高稀有度的人排序。但是没有评分的没有显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:18:17.423

错误似乎在数据中。可能违反了收藏夹和食谱之间的关系完整性。显示您的测试数据。

# excel - 使用另一个单元格的值进行结构化引用查找

> ID：12021768
> 
> 赞同：0
> 
> 时间：2012-08-18T19:52:18.113
> 
> 标签：excel

以下内容很好用： `=LOOKUP(A9,People[Name],People[Age])` A9 包含我正在查找的人的姓名。这返回他们的年龄，没问题。

这就是我想要做的： `=LOOKUP(A9,Items[Name],Items[D4])` D4 包含我在表中查找的列的标题。因此，如果 D4 包含“年龄”一词，它将收集此人的年龄。

我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T21:00:20.863

[修改]

如果列是可变的，我认为您需要一个 INDEX/MATCH/MATCH 公式，例如使用名为`Items`try this formula的表

`=INDEX(Items,MATCH(A9,Items[Name],0),MATCH(D4,Items[#Headers],0))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-13T19:08:26.443

您可以使用`INDIRECT()`来解析一串文本作为参考。

```
=LOOKUP(A9,Items[Name],INDIRECT("Items["&D4&"]")) 
```

# facebook - FB应用程序设置中“Native Android App”部分中的“Android Key Hash”是什么意思？

> ID：12021771
> 
> 赞同：0
> 
> 时间：2012-08-18T19:52:44.510
> 
> 标签：facebook, facebook-graph-api, coronasdk

我用 Corona SDK 编写了一个与 Facebook 集成的移动应用程序。所以我创建了一个 Facebook 应用程序，该应用程序 ID 用于集成。

在来自移动设备的登录会话中，我收到响应“android key ....”的错误。该问题的解决方案是在应用程序的“Native Android App”中设置一个“Android Key Hash”。但我不明白“Android Key Hash”是什么意思以及我做了什么。有人可以解释一下吗？

如果我在其他设备上运行应用程序，或者这个“Android Key Hash”对我的所有应用程序用户来说是唯一的，我还会收到同样的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T07:53:20.033

如果您使用正确的哈希键，您将不会收到错误消息。您可以使用以下命令生成一个：

`keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64`

如果此时您遇到错误，请尝试使用非调试密钥库进行签名和/或查看 Corona SDK 论坛中的这篇文章；[http://developer.coronalabs.com/forum/2012/03/20/facebook-and-android-key-hash](http://developer.coronalabs.com/forum/2012/03/20/facebook-and-android-key-hash)

# jquery - jQuery.noConflict(); 用mootools

> ID：12021772
> 
> 赞同：0
> 
> 时间：2012-08-18T19:52:45.523
> 
> 标签：jquery, jquery-ui, joomla

我想为我的 joomla 网站使用[这个选择UI](http://jsfiddle.net/ZfevM/100/)

我改变了原来的代码，如下所示

**更改代码**

```
$(function() {
    jQuery.noConflict();
    jQuery( "#selectable" ).bind("mousedown", function(event, ui) {
        var result =  jQuery( "#select-result" ).empty();
        event.ctrlKey = true;
    });
    jQuery( "#selectable" ).selectable();

}); 
```

**原始代码**

```
$(function() {
    $( "#selectable" ).bind("mousedown", function(event, ui) {
        var result = $( "#select-result" ).empty();
        event.ctrlKey = true;
    });
    $( "#selectable" ).selectable();

}); 
```

但它不适用于[我的网站](http://bluewingholidays.com/index.php?option=com_jea&view=property&id=9%3aholiday-home-in-mirissa#ad-image-4)

错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:59:02.943

您使用的 noConflict 语句错误，应该是这样的：

```
jQuery.noConflict();
jQuery(function() {
jQuery( "#selectable" ).bind("mousedown", function(event, ui) {
    var result =  jQuery( "#select-result" ).empty();
    event.ctrlKey = true;
});
jQuery( "#selectable" ).selectable();

}); 
```

你甚至可以通过这样做让自己更轻松：

```
 jQuery.noConflict();
 jQuery(function($) {
     $( "#selectable" ).bind("mousedown", function(event, ui) {
         var result =  $( "#select-result" ).empty();
         event.ctrlKey = true;
     });
     $( "#selectable" ).selectable();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:05:17.850

你应该有一些类似的东西，不需要担心$。

你也应该在 mootools 之前加载 jQuery。

//编辑检查[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

```
(function($) {
    $( "#selectable" ).bind("mousedown", function(event, ui) {
        var result = $( "#select-result" ).empty();
        event.ctrlKey = true;
    });
    $( "#selectable" ).selectable();

})(jQuery); 
```

# jquery - 调整大小时删除填充

> ID：12021774
> 
> 赞同：0
> 
> 时间：2012-08-18T19:52:50.240
> 
> 标签：jquery, html, css, padding

我有一个网站，前两页给我带来了问题。[http://www.readysetpixel.net/about.html](http://www.readysetpixel.net/about.html)和[http://www.readysetpixel.net/faq.html](http://www.readysetpixel.net/faq.html)

内容的填充设置为 20 像素，当我将其设置为浏览器调整为 800 像素时，内容的最大高度切换为 490 像素，如下所示。

```
<script type="text/javascript">
$(document).ready(function() {
   $(window).on('resize', function(){
     if ($(this).height() <= 800){
      $('.content').css('max-height', '490px'); //sets max-height
     } else{
  $('.content').css('max-height', ''); //deletes max-height
   }
 }).resize()
})
</script> 
```

所有这些在谷歌浏览器中都可以正常工作，但在 Firefox 和 IE 中，由于某种原因，它们会忽略底部的填充。我试图添加

```
 $('.pad').css('padding-bottom', '20px'); //sets padding 
```

然后 delete 与 max-height 的方式相同，这将起作用，但是在调整大小时它会给谷歌额外的 20px 填充。

任何帮助，将不胜感激。

更新：

sayhello 和比赛页面在做同样的事情。出于某种原因，当我将填充与表单一起使用时，它会在 Firefox、IE 和 chrome 中正确读取它。这很奇怪，因为如果我对前两页做同样的事情，它会给 chrome 额外的 20px 填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:58:35.427

我确实相信这是一个渲染错误，因为边距底部没有被添加到高度计算中（[FF & IE Render Bug Article](https://shanetomlinson.com/2012/box-sizing-border-box-padding-and-min-height-bug-in-firefox-and-ie/)）。跨浏览器修复症状应该不会太难；您可以将高度计算向下移动一层（在滚动层之外）。

```
<div class="scroll">
    <div class="content">
        <h1>...</h1>
        <div>...</div>
    </div>
</div> 
```

其中`.scroll`将负责`height`& `overflow`; 而 the`.content`将负责`width`& `padding`。不是最优雅的解决方案，但它会解决您的跨浏览器问题。

如果你想让我设置一个提琴手，请告诉我。

不相关的旁注：在检查完 CSS 之后，您的网站可能会受益于一些 OOCSS 方法（如果您担心这类事情，肯定会减少您的 css 文件的大小）。

# c# - 实体框架业务对象转换

> ID：12021776
> 
> 赞同：4
> 
> 时间：2012-08-18T19:52:56.660
> 
> 标签：c#, entity-framework

我正在尝试创建一个使用 EF 处理数据访问的小型个人项目。我的项目架构有 UI 层、服务层、业务层和数据访问层。EF 包含在 DAL 中。我认为从我的 UI 中引用我的 DAL 是不对的。所以我想为我的所有层之间共享的“业务对象”创建自定义类。

示例：我有一个用户表。EF 创建一个用户实体。我有一个方法可能是 GetListOfUsers()。在演示文稿中，不应回复列表，因为 UI 会直接链接到 DAL。我可能需要在 DAL 中公开一个方法，可能类似于：

```
List<MyUserObject> GetListOfUsers(); 
```

然后调用我的内部方法 GetListOfUsers 返回用户实体列表，然后将它们转换为我的 MyUserObejcts，然后通过层传递回我的 UI。

那是正确的设计吗？我不认为 UI 或业务层应该对实体框架有任何了解。

然而，这可能意味着什么，也许我需要在我的 DAL 和我的业务层之间有一个“转换层”，它将我的实体转换为我的自定义对象？

编辑：

这是我正在做的一个例子：

我有一个数据访问项目，其中将包含实体框架。在这个项目中，我将有一种方法来获取状态列表。

```
public class DataAccessor
{
    taskerEntities te = new taskerEntities();

    public List<StateObject> GetStates()
    {
        var transformer = new Transformer();
        var items =   (from s in te.r_state select s).ToList();
        var states = new List<StateObject>();
        foreach (var rState in items)
        {
            var s = transformer.State(rState);
            states.Add(s);
        }
        return states;
    }

} 
```

我的 UI/业务/服务项目一定不知道实体框架对象。相反，它必须知道我自定义构建的 State 对象。所以，我有一个共享库项目，其中包含我的自定义构建对象：

```
namespace SharedLib
{

    public class StateObject
    {
        public int stateId { get; set; }
        public string description { get; set; }
        public Boolean isDefault { get; set; }
    }

} 
```

因此，我的 DAL 将项目放入实体对象列表中，然后我将它们传递给我的转换方法，以使它们成为自定义的构建对象。转换采用 EF 对象，并输出自定义对象。

```
public  class Transformer
    {
        public StateObject State (r_state state)
        {
            var s = new StateObject
                        {
                            description = state.description, 
                            isDefault = state.is_default, 
                            stateId = state.state_id
                        };

            return s;
        }
    } 
```

这似乎有效。但这是一个有效的模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:11:50.693

因此，在某些时候，您的 UI 将不得不使用您拥有的数据和业务对象。这是生活中的事实。您可以尝试进一步抽象，但这只会成功地将交互推迟到其他地方。

我同意业务流程应该独立于 UI。我也同意您的 UI 不应直接影响您访问数据的方式。您的建议（类似于“GetListOfUsers()”的内容）被称为[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)。

存储库模式的目的是：

> 将检索数据并将其映射到实体模型的逻辑与作用于模型的业务逻辑分开。业务逻辑应该与构成数据源层的数据类型无关

我的建议是使用存储库模式来隐藏您访问数据的方式（并且允许更好地分离关注点）并且只关心您“只想要一个用户列表”或者您“只是想要计算所有时间表的总和”或您希望应用程序实际关注的任何内容。阅读链接以获得更详细的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T20:15:41.923

首先，你真的需要你的“小型个人项目”中的所有这些*层吗？*其次，我认为您建议的架构有点不清楚。

如果我说得对，你想将你`UI`的`DAL`. 为此，您可以例如提取（显然`MyUserObject`定义在）类的接口，让我们调用它，而不是从 UI 中引用 DAL，而是引用一些抽象项目，其中所有类型都是数据不可知的。另外，我建议你有一些服务层，它可以为你的表示层（）提供具体的对象。如果你使用 MVC，你可以从你的控制器类中获得服务的链接。服务层反过来可以使用 Repository 或其他一些技术来处理 DAL（这取决于您选择的复杂性）`DAL``IMyUserObject``UI`

考虑到转换层，我认为人们处理从一种类型到另一种类型的映射时，他们有一个简单模型 (DTO) 与 DB 通信，另一个 - 域模型，处理业务逻辑的所有细微之处，另一个 - 表示模型，最适合让用户与之交互。这种分层可以很好地分离关注点，使每个任务更简单，但通常会使应用程序更复杂。因此，您可能最终拥有`MyUserObjectDTO`,`MyUserObject`和`MyUserObjectView`一些映射或转换。

# html - 本地文件时的正确设置方式

> ID：12021781
> 
> 赞同：25
> 
> 时间：2012-08-18T19:53:57.310
> 
> 标签：html, file, firefox, hyperlink, href

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-19T06:48:20.810

根据定义，file: URL 是依赖于系统的，它们几乎没有用处。您的示例中的 URL 在本地使用时有效，即链接页面本身位于用户的计算机中。但是浏览器通常拒绝跟随它使用 HTTP 协议获取的页面上的 file: 链接，因此该页面自己的 URL 是 http: URL。当您单击此类链接时，什么也没有发生。目的大概是安全性：防止远程页面访问访问者计算机中的文件。（我认为这个功能首先在 Mozilla 中实现，然后复制到其他浏览器。）

因此，如果您在计算机中使用 HTML 文档，那么 file: URL 应该可以工作，尽管它们的语法存在与系统相关的问题（您如何在这样的 URL 中编写路径名和文件名）。

如果您确实需要在您的计算机上处​​理一个 HTML 文档并在 Web 服务器上处理另一个 HTML 文档，使链接工作的方法是使用本地文件作为主要文件，如果需要，使用客户端脚本来获取文档从服务器，

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-18T20:00:10.340

在分层目录中组织文件，然后只使用相对路径。

演示：

HTML (index.html)

```
<a href='inner/file.html'>link</a> 
```

目录结构：

```
base/
base/index.html
base/inner/file.html
.... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-01T18:10:19.807

基本标记内的 href 值将成为您所有相对路径的参考点，从而覆盖您当前的目录路径值，否则 - '~' 是您网站的根目录

```
 <head>
        <base href="~/" />
    </head> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-27T15:31:38.287

当您正在运行`IIS`并通过它运行 html 页面时，可能会发生这种情况，然后`Local file system`将无法访问。

要使您的链接在本地工作，请直接从文件浏览器而不是 Visual Studio 运行调用 html 页面，`F5`或者`IIS`只需单击它以从文件系统打开，并确保您使用的是这样的链接：

```
<a href="file:///F:/VS_2015_WorkSpace/Projects/xyz/Intro.html">Intro</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-03T01:36:19.280

../htmlfilename 和 .html 用户可以这样做 这将解决您重定向到本地文件的任何页面的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-13T19:44:24.890

尝试将冒号换成`:`bar `|`。应该这样做

```
<a href="file://C|/path/to/file/file.html">Link Anchor</a> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-10T14:16:02.700

# modelica - Modelica - 在一行中的多个组件上设置传输变量的最小值（最大值）

> ID：12021782
> 
> 赞同：0
> 
> 时间：2012-08-18T19:54:08.050
> 
> 标签：modelica

以下构造会生成一个错误，指出方程太多。

```
model Model1

model myBlock
input Modelica.Blocks.Interfaces.RealInput u(start=1e99);
output Modelica.Blocks.Interfaces.RealOutput y;
parameter Real p=1 "Parameter";
equation
            u=min(u,p);
            u=y;
end myBlock;

    myBlock b1; 
    myBlock b2 (p=0.5);
    myBlock b3;
    input Modelica.Blocks.Interfaces.RealInput u;
    output Modelica.Blocks.Interfaces.RealOutput y;
equation
    connect(y,b1.u);
    connect(b1.y,b2.u);
    connect(b2.y,b3.u);
    connect(b3.y,u);
end Model1; 
```

这个想法是在所有“myBlock”组件中为 u 和 y 获得相同的最小值。但是 u (=min...) 的赋值似乎对所有组件都是强制性的，并且不能一个接一个地计算。

知道如何解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:16:54.500

我不完全理解这个模型的意图。我不清楚您是否希望`u`随着时间的推移找到所有值的最小值，或者只是找到`u`vs.的当前值`p`？如果是前者，那么这不是 min 的用途。如果是后者，那么你就在正确的轨道上......

假设后者，那么您的主要误解似乎是关于方程的语义。在我看来，您假设您从一个值开始`u`。然后，您将该值“重新分配”为`min(u,p)`. 然后，最后，您分配`y`给这个“重新分配”的值`u`。

*如果*您的模型中有一个`algorithm`部分，那一切都会好起来的。这是因为一个`algorithm`部分具有赋值语义（这是大多数编程语言中的“命令式”语义）。

但是你有一个方程部分。关于方程式部分的事情是您编写的语句是方程式。方程式的重要之处在于它们*始终*适用。因此，在您的模型中，您已声明`u=min(u,p)`. 这不是“覆盖” 的值`u`，而是说明附加的数学约束。这有点像试图解方程`x=x*x`。如果你把这个方程放在你的模型中，这相当于说`x=0`，因为这是唯一`x`可以满足方程的值。

所以方程太多的错误就来了，因为如果你看你的`myBlock`模型，它有一个输入和一个输出。这意味着它只有一个“未知”要计算，*因此*只需要一个方程。你给出了两个方程（一个太多了）。

我*想*你想要的是：

```
model myBlock
  input Modelica.Blocks.Interfaces.RealInput u;
  output Modelica.Blocks.Interfaces.RealOutput y;
  parameter Real p;
equation
  y = min(u,p);
end myBlock; 
```

这将“限制”输出 ,`y`不小于`p`。那是你想要的吗？

或者，您可以使用`algorithm`部分编写模型并获得如下内容：

```
model myBlock
  input Modelica.Blocks.Interfaces.RealInput u;
  output Modelica.Blocks.Interfaces.RealOutput y;
  parameter Real p;
algorithm
  u := min(u,p) "This is assignment";
  y := u;
end myBlock; 
```

请注意行为应该是相同的（尽管我承认我没有测试任何一个模型）。

我希望这会有所帮助。

# android - 如何在android中的多个复选框中获取键值对

> ID：12021789
> 
> 赞同：0
> 
> 时间：2012-08-18T19:55:20.583
> 
> 标签：android, listview, mobile, checkbox, checkboxlist

我是 android 新手，任何人都可以帮助在复选框中获取密钥和相应的值（检查/不检查）。

复选框中可以有多个选中项。我必须获取用户在复选框中“选中”的所有项目。我在“onCheckedChanged”中使用以下代码。

```
viewHolder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
        Model element = (Model) viewHolder.checkbox.getTag();
        //String temp = viewHolder.checkbox.getText().toString(); //didn't give me the key
        //Log.d(TAG, temp);
        //String temp = buttonView.getText().toString(); //didn't give me the key
        element.setSelected(buttonView.isChecked());
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:09:23.750

您在 buttonView 参数中获得了更改状态的控件。为什么不使用 findViewByiD() 在 onCreate 中保存指向控件的指针，然后与 onCheckedChange 中的所述指针进行比较？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:05:57.163

对不起，我没有得到你的解决方案。我正在使用 arrayAdapter 来显示复选框。以下是处理“setOnCheckedChangeListener”的arrayAdapter 的代码

公共类 InteractiveArrayAdapter 扩展 ArrayAdapter {

```
private final List<Model> list;
private final Activity context;
private static final String TAG = "InteractiveArrayAdapter";

public InteractiveArrayAdapter(Activity context, List<Model> list) {
    super(context, R.layout.rowbuttonlayout, list);
    this.context = context;
    this.list = list;
}

static class ViewHolder {
    protected TextView text;
    protected CheckBox checkbox;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = null;
    if (convertView == null) {
        LayoutInflater inflator = context.getLayoutInflater();
        view = inflator.inflate(R.layout.rowbuttonlayout, null);
        final ViewHolder viewHolder = new ViewHolder();
        viewHolder.text = (TextView) view.findViewById(R.id.label);
        viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);
        viewHolder.checkbox
                .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {
                        Model element = (Model) viewHolder.checkbox.getTag();
                        //String temp = viewHolder.checkbox.getText().toString();
                        //Log.d(TAG, temp);
                        //String temp = buttonView.getText().toString();
                        element.setSelected(buttonView.isChecked());

                    }
                });
        view.setTag(viewHolder);
        viewHolder.checkbox.setTag(list.get(position));
    } else {

        view = convertView;
        ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
    }

    ViewHolder holder = (ViewHolder) view.getTag();
    holder.text.setText(list.get(position).getName());
    holder.checkbox.setChecked(list.get(position).isSelected());
    return view;
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T23:33:02.603

如果我理解您的问题，您是否正在寻找一种跟踪列表中所有复选框的方法？如果是这样，请尝试以下操作

```
private ArrayList<boolean> checkedList = new ArrayList<boolean>();

@Override
public View getView(int position, View convertView, ViewGroup parent) {
View view = null;
if (convertView == null) {
    LayoutInflater inflator = context.getLayoutInflater();
    convertView = inflator.inflate(R.layout.rowbuttonlayout, null);
    final ViewHolder viewHolder = new ViewHolder();
    viewHolder.text = (TextView) view.findViewById(R.id.label);
    viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);
    convertView.setTag(viewHolder);
} else {
    viewHolder = (ViewHolder) convertView.getTag();
}

viewHolder.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() 
{
    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
       if (isChecked && !checkedList.contains(list.getPosition()))
          checkedList.add(list.getPosition());
       else if (!isChecked && checkedList.contains(list.getPosition()))   
          //TODO search and remove list item here
    }
});

return convertView; 
```

}

# command - 在 Mac 上从命令行安装应用程序

> ID：12021792
> 
> 赞同：0
> 
> 时间：2012-08-18T19:55:41.617
> 
> 标签：command, installation

在 Mac 上从命令行安装应用程序

希望有人可以提供帮助。

我需要在我的 Mac 上重新安装 Final Cup Studio 2。由于我已更改为新的操作系统：Lion，我无法从安装磁盘重新安装该应用程序，因为 Lion 不再支持 PowerPC 应用程序。一个建议的解决方案似乎适用于许多人，是使用以下参数从命令行安装程序：

$ sudo 安装程序-package /Volumes/Final\ Cut\ Studio/Installer/FinalCutStudio.mpkg -target /

在看似“成功安装”之后，找不到该程序:(。另一个解决方案是将特定的 PATH 添加到应用程序将驻留的位置：

/卷/[主驱动器]/应用程序/

问题是我不知道如何将附加信息添加到命令行。

我在 Applications 文件夹下创建了一个名为 FINALCUTSTUDIO2 的子文件夹，并希望给出一个命令将应用程序安装到该特定文件夹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:57:48.633

Rosetta 是一个让你在 Intel 处理器上运行 PowerPC 二进制文件的程序，[从 Lion 开始从 OS X 中删除](https://en.wikipedia.org/wiki/Mac_OS_X_Lion#Dropped_features)。不幸的是，即使您以某种方式安装了它，也无法让它在 Lion 上运行。

# asp.net - 委托或事件处理程序如何返回 bool 类型？

> ID：12021793
> 
> 赞同：0
> 
> 时间：2012-08-18T19:55:44.513
> 
> 标签：asp.net, windows-phone-7, c#-4.0, windows-phone-7.1

我正在使用 Web 服务来调用我的方法，我的那个方法返回一个布尔值。这是我在 cs 文件中的代码。

```
`obj = new GBService.PreGroupbookSreviceSoapClient();
 obj.AddBasicInfoCompleted +=new EventHandler<GBService.AddBasicInfoCompletedEventArgs>(obj_AddBasicInfoCompleted);` 
```

现在的问题是VS2010创建的这个“ **obj_AddBasicInfoCompleted** ”方法默认返回void类型。我想在这个地方生成一个布尔类型的方法。当我将方法类型通过 void 更改为 Boolean 或 bool 时，VS2010 在上面提到的行中出现错误，说“ **bool obj_AddBasicInfoCompleted(object sender, GBService.AddBasicInfoCompletedEventArgs e) 返回类型错误。** ”

我不知道该怎么做。请帮我谢谢和问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:01:54.850

> 我想在这个地方生成一个布尔类型的方法。

然后您需要更改使用的委托类型......因为*不*返回值。[`EventHandler<TEventArgs>`](http://msdn.microsoft.com/en-us/library/db0etb8x.aspx)

 *您还没有真正*说明为什么*要这样做，但一般来说，如果您尝试违反 .NET 的常规约定，您应该重新考虑您的设计。特别是，如果您尝试使用期望 a`EventHandler<TEventArgs>`并使用它公开事件的标准组件，您希望它们如何*使用*返回值？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:20:52.657

就其性质而言，事件通常用于获取返回值实际上（几乎）没有意义的情况，因此这让我质疑您是如何设计想要它的东西的。本质上并不是说它是错误的，它只是非常不同，并且确实倾向于违背事件“系统”的预期工作方式。

你真正要解决这个问题的唯一方法是声明你自己的自定义事件处理程序委托，它返回你的布尔值，然后通过一些体操来得到你想要的值。VS 2010 不只是随意返回一个 void，而是遵守默认的 EventHandler 委托签名 - 它返回一个 void。

如果您可以分享您想要这样做的原因，也许我们可以通过稍微改进的设计提供帮助，这可能会减轻实现这一特定目标的需要。*

# android - Android 浏览器忽略响应式网页设计

> ID：12021794
> 
> 赞同：24
> 
> 时间：2012-08-18T19:55:53.277
> 
> 标签：android, css, responsive-design

我刚开始将我的网站转换为“响应式网页设计”。[我为 Firefox ( http://chrispederick.com/work/web-developer/](http://chrispederick.com/work/web-developer/) )安装了“Web Developer”插件来检查它是否正常工作。一切看起来都很好。

现在我用我的安卓手机试了一下。我在纵向模式下工作不正常......我将问题归结为对电话上@media-selectors 的错误处理：

此页面 ( [https://worldtalk.de/m/test.php](https://worldtalk.de/m/test.php) ) 生成一个 CSS，它输出浏览器使用的高度/宽度和设备高度/宽度 + 方向作为参数。

我得到以下结果：

*   肖像, 800x1200
*   风景, 800x400

方向正确，两个方向的宽度/高度和设备宽度/高度相同。但该设备 (HTC Desire Z) 只是在纵向模式下使用了错误的屏幕分辨率 (800x1200)。我想避免使用用户代理或类似的设备数据库。

附加信息：

*   浏览器版本：WebKit/533.1
*   安卓 2.3.3 / 感知 2.1
*   HTC Desire Z（T-Mobile 固件）
*   JavaScript 报告相同的屏幕分辨率

## 问题：

*   这只是我的手机型号还是安卓浏览器的一般行为？
*   如何解决这个问题？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-19T11:56:24.443

在对该主题进行更多调查后，我找到了以下解决方案。您需要输入以下`<meta>`-Tags 来告诉浏览器禁用缩放。然后 CSS @media 选择器按预期工作。

```
<meta content="True" name="HandheldFriendly">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<meta name="viewport" content="width=device-width"> 
```

请参阅：[如何“禁用”移动网页上的缩放？](https://stackoverflow.com/questions/4472891/how-can-i-disable-zoom-on-a-mobile-web-page) 并且：[http](http://garrows.com/?p=337) ://garrows.com/?p=337 （编辑： http: [//garrows.com/blog/disable-mobile-browser-zoom-function](http://garrows.com/blog/disable-mobile-browser-zoom-function)

问候，

斯特凡

- 编辑 -

应用上述解决方案时：对于某些设备，使用“scale=1.0”时报告的设备分辨率低于物理屏幕分辨率，您可能会出现图像模糊等效果。这是由屏幕的更高 dpi（每英寸点数）引起的。然而，JavaScript 中报告的屏幕尺寸是正确的。对于具有高分辨率的小屏幕，可以使用以下方法实现正确的“物理像素”分辨率：

```
<meta name="HandheldFriendly" content="true">
<meta name="viewport" content="width=device-width, initial-scale=0.666667, maximum-scale=0.666667, user-scalable=0">
<meta name="viewport" content="width=device-width"> 
```

但是，这会导致 dpi 值较低的屏幕出现问题。使用 JavaScript 报告的屏幕分辨率似乎更安全。

- 编辑 -

使用逗号而不是分号来避免有关“视口参数值“设备宽度；”的 Chrome 控制台错误 对于无法识别的键“宽度”。内容被忽略。

[http://royaltutorials.com/viewport-argument-value-device-width-for-key-width-not-recognized-content-ignored/](http://royaltutorials.com/viewport-argument-value-device-width-for-key-width-not-recognized-content-ignored/)

# c# - 如何访问 ThisAddin.cs 文件中的方法

> ID：12021797
> 
> 赞同：5
> 
> 时间：2012-08-18T19:55:56.117
> 
> 标签：c#, excel, vsto

我在 C# 中创建了一个 Excel 插件项目。现在解决方案包含一个文件ThisAddin.cs，它有一个类ThisAddin。后来我在同一个解决方案中添加了一个名为 Form 的项目。在表单中，当我单击一个按钮时，对于该按钮单击事件，我想在 ThisAddin.cs 文件中调用一个方法。

```
namespace ExcelAddIn
{
    public partial class ThisAddIn
    {
        public void RefreshExcelData()
        {
        }
    }
} 
```

现在在 MyForm.cs 中，尝试为 ThisAddin 类创建对象时出现编译错误，即 Thisaddin 类没有采用 0 个参数的构造函数。

```
private void btnUploadTestCases_Click(object sender, EventArgs e)
{
    ThisAddIn objrefresh = new ThisAddin();
} 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-19T23:29:34.623

你是从错误的方向来解决问题的。当您单击按钮时，您不想创建新的加载项，您真正想要的是访问 Excel 启动时由 VSTO 为您创建的加载项实例，可以通过`Globals.ThisAddIn`.

将表单中的代码更改为以下内容：

```
private void btnUploadTestCases_Click(object sender, EventArgs e)
{
    var addIn = Globals.ThisAddIn;
    addIn.RefreshExcelData();           
} 
```

...而且它应该具有魅力。

话虽如此，是否有充分的理由让这个方法出现在 ThisAddIn 上？一般来说，ThisAddIn 应该用于在 Excel 启动/关闭时连接和拆除加载项，我建议在其中放置尽可能少的逻辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T13:57:10.670

使用此代码：

`Globals.ThisAddIn.Application.StatusBar = "Referesh clicked!!!."; Globals.ThisAddIn.RefreshExcelData();`

只要确保您的功能仍然存在`public`。

# python - 在 Python 列表中打印值报告 ValueError

> ID：12021799
> 
> 赞同：1
> 
> 时间：2012-08-18T19:56:03.660
> 
> 标签：python

我有两个清单：

```
a = [0,1]
b = ['a' , 'b'] 
```

并希望得到以下输出：

```
0
一个
1
b

```

我尝试了以下方法，它给出了一个`ValueError`：

```
for k,v in (a,b):
    print (k,v) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:02:35.700

您使用的语法没有按照您的预期执行。您正在做的事情可以通过使用该`zip`功能来实现，看起来像这样：

```
for k,v in zip(a,b):
    print(k)
    print(v) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:59:10.410

使用[zip()](http://docs.python.org/library/functions.html#zip)来完成您的目标，如下所示：

```
for i,j in zip(a, b):
    print('{}\n{}'.format(i,j)) 
```

给出：

```
0
a
1
b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T20:08:18.760

您可以使用打印格式化程序，例如：

```
for k,v in (a,b):
    print "%s,%s" % (k,v) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T20:01:17.883

不知道你为什么会得到一个ValueError。

```
for k in a + b:
    print k 
```

a + b 合并列表 a 和 b。

# android - 以编程方式禁用/延迟 Android 锁屏

> ID：12021800
> 
> 赞同：8
> 
> 时间：2012-08-18T19:56:15.643
> 
> 标签：android

我想以`disable/delay`编程方式锁定屏幕。在调查这一点时，`KeyguardManager`是否已贬值/无法始终如一地工作，`FLAG_DISMISS_KEYGUARD`这不是一个选项，因为我想在后台执行此操作，出于电池原因我不想使用 WakeLock，设备管理似乎无法做到这一点而且，虽然`SCREEN_OFF_TIMEOUT`可以控制屏幕何时休眠，但我无法找到类似的屏幕锁定超时。

我在这里想念什么？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-13T13:24:59.457

试试这个，只要活动在顶部，它就会保持唤醒屏幕/显示器。 `getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);`

这也不需要清单中的任何许可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T09:42:30.530

*@nandeesh*的答案是有效的，但它*已被弃用*，禁用锁屏使用标志：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T20:01:12.777

你试过这个吗？

```
KeyguardManager keyguardManager = (KeyguardManager)getSystemService(Activity.KEYGUARD_SERVICE);
KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
lock.disableKeyguard(); 
```

添加

```
<uses-permission android:name="android.permission.DISABLE_KEYGUARD"/> 
```

您可以使用它禁用键盘保护。

# c++ - enable_if 和 has_member 我做错了什么？

> ID：12021803
> 
> 赞同：3
> 
> 时间：2012-08-18T19:56:36.890
> 
> 标签：c++, templates, template-meta-programming, enable-if

我想我已经盯着这个太久了，但我在这里找不到我的错误：

```
struct
{
    bool empty() const
    {
       return true;
    }
} hasEmpty;

template<typename T>
struct has_empty
{
private:
    template<typename U, U>
    class check {};

    template<typename C>
    static char f(check<void (C::*)() const, &C::empty> *);

    template<typename C>
    static long f(...);

public:
    static const bool value = (sizeof(f<T>(nullptr)) == sizeof(char));
};

template<typename T>
typename std::enable_if<has_empty<T>::value>::type foo(const T& t)
{

}

void x()
{
    foo(hasEmpty);
} 
```

Visual Studio 2012 报告：

```
error C2893: Failed to specialize function template 'std::enable_if<has_empty<T>::value>::type foo(const T &)'
1>          With the following template arguments:
1>          '<unnamed-type-hasEmpty>' 
```

（注意，我*真的很喜欢*[这里](https://stackoverflow.com/questions/9530928/checking-a-member-exists-possibly-in-a-base-class-c11-version)描述的这个测试的新 C++11 版本，但是 VS2012 还不支持 constexpr。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:01:06.067

您的`hasEmpty::empty`方法返回`bool`：

```
struct 
{
    bool empty() const
    {
       return true;
    }
} hasEmpty; 
```

但是您的特征使用返回的成员函数指针`void`，该替换将始终失败。你应该改变这个：

```
template<typename C>
ctatic char f(check<void (C::*)() const, &C::empty> *); 
```

为了这：

```
template<typename C>
static char f(check<bool (C::*)() const, &C::empty> *); 
```

这为我编译。

# ios - 在导航控制器中滑动 viewController

> ID：12021805
> 
> 赞同：0
> 
> 时间：2012-08-18T19:56:44.523
> 
> 标签：ios, uinavigationcontroller

我想使用向上/向下滑动效果在导航控制器内显示各种视图控制器。其他一些应用程序像 Square 一样每天都这样做。基本上当应用程序加载时，我想在导航控制器中显示一个基本视图。然后向上滑动另一个视图控制器。然后点击导航栏中的按钮时，我想将其向下滑动并显示基本控制器，同时保留导航栏并更改导航项目。

最初我试图通过显示模式来完成这项工作，但这需要使用新的导航栏。

有没有人这样做过，或者知道一个很好的例子来说明这种 UI 模式？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:07:47.007

你可以在 UIScrollView 中有 UIViews

# java - 将arrayCollection从flex传递给java

> ID：12021811
> 
> 赞同：0
> 
> 时间：2012-08-18T19:57:23.747
> 
> 标签：java, actionscript, blazeds

我将一个包含多个对象的 ActionScript 3.0 arrayCollection 从 Flex 传递到 Java 端。下面是arrayCollection：

```
 public var myAC:ArrayCollection = new ArrayCollection([
        {label:"A", data:"a"},
        {label:"B", data:"b"},
        {label:"C", data:"c"}
        ]); 
```

我正在使用 BlazeDS。我想遍历它并在 java 方法中使用该数据。请告诉我接收参数的数据类型是什么？如何从中提取每个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:44:24.240

根据[BlazeDS 文档](http://livedocs.adobe.com/blazeds/1/javadoc/index.html)，[`ArrayCollection`](http://livedocs.adobe.com/blazeds/1/javadoc/flex/messaging/io/ArrayCollection.html)... 谁会想到？;-)

如您所见，`ArrayCollection`is 是一个`ArrayList`子类——这应该意味着您也可以这样对待它。

# cocoa - 视网膜显示器上的 NSCursor 图像

> ID：12021812
> 
> 赞同：3
> 
> 时间：2012-08-18T19:57:39.693
> 
> 标签：cocoa, image-processing, cursor, nsimage

我正在尝试修改默认的 I 型光标图像。我正在使用`[[[NSCursor IBeamCursor] image] representations]`，通过 CIFilter 传递每个并将其添加到新图像中。但是，**生成的光标看起来好像正在渲染低分辨率图像。**

[高分辨率指南](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html)说：

> 对于自定义光标，您可以将多表示 TIFF 传递给 NSCursor 类方法`initWithImage:hotSpot:`。

所以我希望这能奏效。此外，如果我得到`-TIFFRepresentation`原始图像和修改后的图像，并将它们写入磁盘，它们看起来就像具有相同大小图像的多页 TIFF 文件。我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:32:19.380

我有一个临时的解决方案：手动调用`-setSize:`每个图像表示，将像素高度和宽度除以屏幕的比例因子。但是，这种技术似乎不适用于多个屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T20:41:01.927

你是对的。我整天都在调试这个，我很确定我已经搞定了。我没有做与您完全相同的事情（我的图像是从文件中加载的），但最终结果完全相同。

诀窍是将多表示图像的第一个表示设置为非视网膜大小。如果您从图像文件加载光标，则必须采取这一额外步骤来调整表示的大小以匹配。它不像您期望的那样“开箱即用”。

我已经在一台带有两台显示器的机器上进行了测试，并将窗口从视网膜显示器拖到非视网膜显示器上，它应该为光标显示高分辨率/低分辨率图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-30T23:21:30.647

前段时间我有一个类似的问题：我的光标在 PDF 中，它总是像 1:1 大小的像素图像一样绘制，被放大了。在 NSCursor 中有一个解决方案[：使用带光标缩放（或视网膜）的高分辨率光标](https://stackoverflow.com/questions/19245387/nscursor-using-high-resolution-cursors-with-cursor-zoom-or-retina/28246196#28246196)。

也许有人可以使用该技术来解决这个问题？我的猜测是创建一个大小相同但 CTM 不同的图像，将其标记为相同大小但 Retina。@jtbrandes 所做的可能将其标记为不同的尺寸和非 Retina。因此，您实际上丢失了比例因子信息。如果您在提示中创建带有 CTM 的图像，也许您可​​以将过滤后的图像绘制到其中并且它会被正确检测到。

# php - PHP 解析 $_POST 数组？

> ID：12021817
> 
> 赞同：3
> 
> 时间：2012-08-18T19:57:55.030
> 
> 标签：php, arrays, parsing

服务器以以下格式向我发送 $_POST 请求：

```
POST {
  array1
  {
    info1,
    info2,
    info3
  },
  info4
} 
```

所以很自然，我可以很简单地用`$_POST['#info']`. 但是如何获取array1 中的三个信息呢？我试过`$_POST['array1']['info1']`无济于事。

谢谢！

```
 a:2:  {s:7:"payload";s:59:"{"amount":25,"adjusted_amount":17.0,"uid":"jiajia"}";s:9:"signature";s:40:"53764f33e087e418dbbc1c702499203243f759d4";} 
```

是 POST 的序列化版本

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-18T20:01:59.473

使用索引符号：

```
$_POST['array1'][0]
$_POST['array1'][1]
$_POST['array1'][2] 
```

如果您需要迭代变量响应：

```
for ($i = 0, $l = count($_POST['array1']); $i < $l; $i++) {
    doStuff($_POST['array1'][$i]);
} 
```

这或多或少在普通 PHP 中采用这种形式：

```
$post = array();
$post['info'] = '#';
$post['array1'] = array('info1', 'info2', 'info3'); 
```

[http://codepad.org/1QZVOaw4](http://codepad.org/1QZVOaw4)

所以你可以看到它实际上只是一个数组中的一个数组，带有数字索引。

* * *

请注意，如果它是关联数组，则需要使用`foreach()`：

```
foreach ($_POST['array1'] as $key => $val) {
    doStuff($key, $val);
} 
```

[http://codepad.org/WW7U5qmN](http://codepad.org/WW7U5qmN)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T20:02:56.923

尝试

```
$_POST['array1'][0]
$_POST['array1'][1]
$_POST['array1'][2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T20:02:03.773

您可以简单地在 $_POST 上使用 foreach 循环

```
foreach($_POST["array1"] as $info)
{
    echo $info;
} 
```

或者您可以通过它们的索引访问它们：

```
for($i = 0; $i<sizeof($_POST["array1"]); $i++)
{
    echo $_POST["array1"][$i];
} 
```

# delphi - TPanel 作为 MDI 应用程序中的启动屏幕

> ID：12021818
> 
> 赞同：3
> 
> 时间：2012-08-18T19:58:05.853
> 
> 标签：delphi

我想在一个窗体中间显示一个 TPanel，它是其他窗体的 MDI 父窗体。某种“飞溅”形式，但不完全是。该面板将包含用户将调用 misc 的链接/按钮/快捷方式。职能。

主要要求是当我单击 MDI 子窗体时，TPanel 应放置在 MDI 子窗体下方。然而，事实上，TPanel 将始终停留在 MDI 子窗体之上。

调用 Panel.SendToBack 将使面板消失。我能怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T09:04:32.857

您将需要覆盖面板`WindowProc`，以便面板始终位于 MDI 子项的后面，例如：

```
TMainForm = class(TForm)
...
private
  FPanelWndProc: TWndMethod;
  procedure PanelWndProc(var M: TMessage);
end;

procedure TMainForm.FormCreate(Sender: TObject);
begin
  Windows.SetParent(Panel1.Handle, ClientHandle);
  // Override Panel1 WindowProc
  FPanelWndProc := Panel1.WindowProc;
  Panel1.WindowProc := PanelWndProc;
end;

procedure TMainForm.FormDestroy(Sender: TObject);
begin
  // Restore Panel1 WindowProc
  Panel1.WindowProc := FPanelWndProc;
end;

procedure TMainForm.PanelWndProc(var M: TMessage);
var
  P: ^WINDOWPOS;
begin
  if M.Msg = WM_WINDOWPOSCHANGING then
  begin
    P := Pointer(M.LParam);
    // Always place panel at bottom
    P.hwndInsertAfter := HWND_BOTTOM;
  end;
  FPanelWndProc(M);
end; 
```

注意：要快速测试代码，可以通过以下方式创建 MDI 应用程序`File -> New -> MDI Application`

* * *

**编辑：**上面的代码实际上回答了你最初的问题。如果您希望您的“*面板以某种方式表现为 MDI 子项*”（您的评论引用），那么只需 (...hmmmm...) 使用 MDI 子项表单。即创建一个新的形式`.FormStyle = fsMDIChild`，然后使用类似的东西：

```
SetWindowLong(Child.Handle, GWL_STYLE, 
   GetWindowLong(Child.Handle, GWL_STYLE) and not (WS_BORDER or WS_DLGFRAME or WS_SIZEBOX)); 
```

删除它的边框（因为简单的设置`.BorderStyle = bsNone`不起作用）。
将您需要的任何内容放在该表单上，一旦您单击它，它将移动到其他 MDI 表单之上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T20:39:58.317

MDI 系统通过拥有一个单一窗口来工作，该窗口是所有 MDI 子窗口的父窗口，称为客户端窗口。该客户端窗口又是 MDI 窗体的子窗口。MDI 的 VCL 实现为您创建子窗口。您可以通过 ClientHandle 访问其窗口句柄。

由于客户端窗口是主窗体的子窗体，并且是所有 MDI 窗体的父窗体，因此您唯一的解决方案是使此面板成为客户端窗口的一部分。

您可以控制客户端窗口的绘制。您可以通过将客户端窗口的窗口过程替换为您自己的窗口过程来做到这一点。您还需要处理按钮点击等。但这很混乱。

现在，也许您可​​以让您的面板成为客户端窗口的子项。但我很确定这会搞砸你的 MDI，你确实证实了这一点。

# javascript - Facebook 使用 JavaScript 自动登录

> ID：12021821
> 
> 赞同：0
> 
> 时间：2012-08-18T19:58:30.647
> 
> 标签：javascript, facebook, login

我想使用 javascript 使页面自动登录。例如，如果有人连接此页面，他可以使用已保存在页面中的 id 和密码连接到 facebook。

第一次，我打算使用 FB.login，但它看起来不支持我的方式。我找到了一些方法，比如连接 facebook 网站，自动填写电子邮件和密码并提交。但我不想那样。我只想使用我的页面。

那么，有什么解决办法吗？

# flash - 如果我要部署 RTMFP 视频/音频流，是否需要媒体服务器？

> ID：12021823
> 
> 赞同：0
> 
> 时间：2012-08-18T19:58:46.090
> 
> 标签：flash, rtmfp

我有一些问题，请回答我。

基本上我想开发类似 Livestream / Ustream 网络应用程序的东西。我想学习如何开发类似的东西。但我没有开发 Flash 应用程序的经验，所以我在潜入之前寻找答案。

我读过 RTMFP，发现它是一种点对点视频/音频流技术，所以我很困惑是否需要像 adobe flash 媒体服务器这样的媒体服务器来流式传输实时视频。

我读到 RTMFP 不会消耗我的带宽，因为它是点对点技术，这是真的吗？如果是这样，那么这真是太好了，令人难以置信，但我知道，当产品好得令人难以置信时，它肯定有很多缺点。请告诉我将 RTMFP 用于 Livestream / Ustream 应用程序的缺点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T12:18:33.850

您可以将 ffmpeg、red5 和 Cumulus 结合起来，您几乎可以获得 FMS 的功能而无需支付高额费用。我有一个运行 LAMP + Cumulus+ Red5 1.0 RC + ffmpeg（用于后期录制处理）的功能性 CentOS 6 云实例，它就像测试的魅力 - 尚未在生产中测试，但有一个可扩展的服务器实例（云）你应该没问题并根据需要增长 - 我正在使用 PerfectIP 进行廉价托管和测试，但在生产中转到亚马逊的 AWS

Cumulus/OpenRTMFP 在 Cent OS 6 上设置有点棘手，但不是太多，一旦打开它就会保持打开状态 - 我的实例 6 个月没有重新启动，RTMFP 仍然引入对等点并完美地保持连接。

合法 - 不知道我怀疑 adobe 在 RTMFP 上有一些正在申请的专利，但考虑到 Cumulus 的创建者所做的出色工作，我认为 adobe 将容忍使用该协议的开源技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:19:00.450

是的，您需要用于 RTMFP 的[Adob​​e FMS](http://www.adobe.com/go/tryflashmediaserver/)，有一个免费的开发工具。允许 10 个同时连接和商业用途的版本。

生产版本（包括亚马逊版本）虽然成本很高......所以也许你应该在尝试开发支持 RTMFP 的东西之前检查他们的价格。

还有一个免费的 Red5 服务器，但它还不支持 RTMFP，只有 RTMP(T)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T06:10:17.573

Cumulus/OpenRTMFP 似乎是 FMS 的替代品。

但是有人使用过这台服务器吗？它合法吗？

# ios - iOS 5：UITabBarControllerDelegate 的问题

> ID：12021825
> 
> 赞同：0
> 
> 时间：2012-08-18T19:58:53.880
> 
> 标签：ios, ios5

头文件：

```
#import <UIKit/UIKit.h>

@interface PFXTabControllerViewController : UITabBarController <UITabBarControllerDelegate>
@end 
```

实现文件：

```
#import "PFXTabControllerViewController.h"

@interface PFXTabControllerViewController ()
@end

@implementation PFXTabControllerViewController

- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {
    NSLog(@"tabBar didSelectItem");
}

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {
    NSLog(@"tabBarController didSelectViewController");
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.tabBarController.delegate = self; // Tried it both with and without this.
} 
```

显示`UITabBarcontroller`很好，带有标签栏。单击选项卡会触发`didSelectItem`，但不会触发`didSelectViewController`，这是我需要处理的事件。`UITabBarcontroller`正在加载并显示`UIViewController`.

**更新**`self.tabBarController.delegate = self`将该行更改为`self.delegate = self`有效，并且都触发。我不明白为什么这是必要的。设置`self.delegate = self`似乎......愚蠢。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T03:31:43.923

只需将标题更改如下：

```
#import <UIKit/UIKit.h>

@interface PFXTabControllerViewController : **UIViewController** <UITabBarControllerDelegate>
@end 
```

# angularjs - 从指令更改控制器的属性

> ID：12021833
> 
> 赞同：0
> 
> 时间：2012-08-18T20:00:48.800
> 
> 标签：angularjs

编辑：见[jsfiddle](http://jsfiddle.net/py5um/2/)

我有一个项目列表，我通过指令将其显示为文本（这里全部简化，它比文本更复杂，但原则上是相同的）。像这样：

```
<body ng:controller="BaseController">
    ...
    <div ng:controller="Controller">
        <itemdir ng:repeat="item in items" item="item"></item>
    </div>
    ...
    <input ng:model="currentItem" />
</body> 
```

当我单击它时，它应该在输入中显示单击项目的内容。

`items`数组以及`currentItem`属于 BaseController 范围。

该指令使用 ng:click 生成一个模板（见下文），该模板应更改 BaseController 范围的属性（称为 currentItem）。但是它对它没有任何作用（输入值不会更改为新的当前项）。在 Chrome 的 Batarang 中，我可以看到 currentItem 属性在指令范围内可见并已更改，但在 BaseController 范围内不可见。

```
module.directive 'itemdir', () ->
    restrict: 'E'
    replace: true
    template: '<div ng:click="show(item)"></div>'
    controller: 'EditorController'
    scope: 
        item: '=item'
    link: ($scope, $element, $attrs) ->
        update = -> 
                    $element.html($scope.item)

        $scope.$watch('item', update) 
```

为了更改属性，我尝试了一种`show(item)`在 BaseController 范围内定义的方法，该方法仅将 item 参数分配给 $scope.currentItem。

即使我将 ng:click 值从更改`show(item)`为`currentItem = item`

我知道这是一些范围问题，但似乎我仍然没有掌握它的所有细节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T15:40:01.413

因此，查看提供的 jsFiddle，我们可以看到`BaseController`在指令*和*顶部 div 中都使用了 jsFiddle。这引入了一个微妙的问题，因为可以`show(item)`从指令生成的顶部按钮和 HTML 调用该方法，但是这些方法*在不同的控制器上调用并写入不同的范围*。

现在，很难从您的问题中推断出在指令中使用 BaseController 是否是有意的（在问题中指令具有 EditorController）但假设这是偶然的，并且您希望将 BaseController 保留为 div 并且仍然*在创建隔离作用域时需要特别注意*从指令中调用方法（顾名思义，这些方法实际上是隔离的，因此不会从父作用域继承）。基本上，您需要确保该`show`方法在隔离范围内可用，并指向父范围内的正确方法。

以您的示例为例，您将像这样定义指令（请注意`show : '&ngClick'`）：

```
module.directive('itemdir', function () {
  return {
    restrict:'E',
    replace:true,
    template:'<div ng:click="show(item)" class="clickable"></div>',
    scope : {item : '=', show : '&ngClick'},
    link:function ($scope, $element, $attrs) {
      $element.html($scope.item)
    }
  }
}); 
```

这是工作的 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/M9B93/](http://jsfiddle.net/pkozlowski_opensource/M9B93/)

将来您可能会发现适用于 Chrome 的 AngularJS Batarang 扩展 ( [http://blog.angularjs.org/2012/07/introducing-angularjs-batarang.html](http://blog.angularjs.org/2012/07/introducing-angularjs-batarang.html) ) 很有用，因为它允许可视化范围及其内容。

# javascript - AJAX 在第二次点击时不起作用

> ID：12021849
> 
> 赞同：0
> 
> 时间：2012-08-18T20:02:02.103
> 
> 标签：javascript, jquery, ajax, click

83.238.171.65/przemyt/

登录：测试员

通过：测试员

（在 Firefox 和 IE 中效果不佳，我会解决的）

看聊天。当我第一次发送消息时，一切正常。但是当我第二次突然发送时，我被转发到 chat.php。

代码（您也可以在调试时看到它）：

```
$(function() { 
$(document).ajaxError(function() { 
    alert('Sending error!'); 
});   
$('.chater').submit(function(){
    var $this = $(this);
    $.ajax({
        type: "POST",
        url: $this.attr('action'),
        data: $this.serialize(),

        success : function() {
            $('div.chat').load('chat.php');           
        },

        error : function() {
            alert('Conection error!');
        }                       
    });
    return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:21:50.263

您是否尝试过 : `async:false;`？

# ruby-on-rails - 无法使用 mongoid_slug

> ID：12021851
> 
> 赞同：1
> 
> 时间：2012-08-18T20:02:16.737
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid, slug

在过去的 10 天里，我正在使用 mongodb 学习 ROR。我无法在安装过程中进行 mongoid_slug 工作。请查看我在[http://pastebin.com/Gtjzx3Xp上得到的信息](http://pastebin.com/Gtjzx3Xp)

我有宝石 mongoid（3.0.4、3.0.1）。我的 Gemfile 看起来像：

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem "mongoid", "~> 3.0.0"

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'execjs'
  gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'mongoid_slug'
gem 'stringex' 
```

然后，

```
$> bundle install
Fetching gem metadata from https://rubygems.org/.........
Fetching gem metadata from https://rubygems.org/..
Bundler could not find compatible versions for gem "mongoid":
  In Gemfile:
    mongoid_slug (>= 0) ruby depends on
      mongoid (~> 2.0.0.beta7) ruby

    mongoid (3.0.1) 
```

我的控制器是：

```
class Post
  include Mongoid::Document
  include Mongoid::Slug
  field :name, type: String
  field :title, type: String
  field :content, type: String
  validates :title,  :presence => true, :length => { :minimum => 10 }
  has_many :comments
  slug :name
end 
```

在网页上，当我运行时，我得到：

```
Routing Error

uninitialized constant Mongoid::Slug
Try running rake routes for more information on available routes. 
```

mongoid_slug 是否不适用于当前版本的 mongoid？我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:02:27.640

[mongoid_slug](http://rubygems.org/gems/mongoid_slug)的RubyGems 版本似乎已过时；那个人想要 Mongoid 2.0 ( `mongoid ~> 2.0`)，这就是你的`bundle install`错误的来源。[GitHub 版本](https://github.com/hakanensari/mongoid-slug)似乎适用于Mongoid [3.0](https://github.com/hakanensari/mongoid-slug/blob/master/mongoid_slug.gemspec#L17)：

```
s.add_dependency 'mongoid',  '~> 3.0' 
```

所以你可以尝试在你的 Gemfile 中使用它：

```
gem 'mongoid_slug', :git => 'git://github.com/hakanensari/mongoid-slug.git' 
```

使用 GitHub 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:41:20.480

这里最可能的答案是您的 mongoid_slug 版本太低。尝试在 Gemfile 中指定最新版本：

```
gem 'mongoid_slug', '0.10.0' 
```

然后`bundle update mongoid_slug`看看是否能解决问题。

# php - PHP 升级后无法使用脚本访问目录

> ID：12021854
> 
> 赞同：0
> 
> 时间：2012-08-18T20:02:34.730
> 
> 标签：php

我被要求修复几天前还不错的网站，但由于主机将 PHP 升级到 v.5.3，现在无法包含文件

有一个脚本可以读取目录并在其中构建 PDF 列表。由于某种原因，脚本停止工作，我收到以下错误消息：

> 无法打开目录：没有这样的文件或目录...

但是我看到服务器上的目录，如果我直接指向一个文件，它就会打开。

早些时候，我在尝试包含文件时遇到了一个问题，并且收到了一些类似的消息。看来问题是由[已弃用的 php.ini](http://php.net/manual/en/security.globals.php)设置引起的：register_globals = on。在 PHP 5.3 中

有哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:06:10.027

可能是这个目录在旧的 php.ini`include_path`指令中

# opengl - 旋转点精灵

> ID：12021856
> 
> 赞同：0
> 
> 时间：2012-08-18T20:02:46.087
> 
> 标签：opengl, glsl, opengl-3

我已经可以将点精灵旋转 0、90、180、270 度

片段着色器

```
precision lowp float;

uniform sampler2D us_tex;
uniform mat3 um_tex;

void main ()
{
  vec2 tex_coords = (um_tex * vec3(gl_PointCoord, 1.0)).xy;
  gl_FragColor = texture2D(us_tex, tex_coords);
} 
```

2*2 矩阵运算（我知道 GLM - 自己处理矩阵的学术目的很棒）

```
typedef GLfloat m3[9]//3*3 matrix

#define DEG_TO_RAD(x) (x * M_PI/180.0f)

void ident_m3(m3 res)
{
 memset(res, 0, sizeof(m3));
 res[0] = res[4] = res[8] = 1.0f;
}

void trans_m3(m3 res, const p2* pos)
{
ident_m3(res);
res[7] = pos->x;
res[8] = pos->y;
}

void mult_m3(m3 res, const m3 m1, const m3 m2)
{
 res[0] = m1[0] * m2[0] + m1[3] * m2[1] + m1[6] * m2[2];
 res[1] = m1[1] * m2[0] + m1[4] * m2[1] + m1[7] * m2[2];
 res[2] = m1[2] * m2[0] + m1[5] * m2[1] + m1[8] * m2[2];

 res[3] = m1[0] * m2[3] + m1[3] * m2[4] + m1[6] * m2[5];
 res[4] = m1[1] * m2[3] + m1[4] * m2[4] + m1[7] * m2[5];
 res[5] = m1[2] * m2[3] + m1[5] * m2[4] + m1[8] * m2[5];

 res[6] = m1[0] * m2[6] + m1[3] * m2[7] + m1[6] * m2[8];
 res[7] = m1[1] * m2[6] + m1[4] * m2[7] + m1[7] * m2[8];
 res[8] = m1[2] * m2[6] + m1[5] * m2[7] + m1[8] * m2[8];
} 
```

在 ParticlesDraw()

```
 m3 r;
 rot_m3(r, 90.0f);
 ...
 glUniformMatrix3fv(/*um_tex uniform*/, 1, GL_FALSE, res);
 glDrawArrays(GL_POINTS, 0, /*particles count*/);
 ... 
```

我也知道如何围绕 pos(x,y,z) 旋转普通精灵

1.  转换为 pos(-x,-y,-z)
2.  旋转
3.  转换为 pos(x,y,z)

结果矩阵 = (Rot Matrix * Translate Matrix) * Anti-Traslate Matrix。

我想将点精灵旋转到 45、32、64、72 例如任何度数（现在它旋转不正确，最后一帧 45 度） ![问题](../Images/3f7dae954531155c85b6919885998363.png)

但在这种情况下，我可以翻译到 tex 的中心 (0.5, 0.5)，但是反翻译会是什么 - (0.0, 0.0)？
我尝试了类似的方法，但它不适用于例如 30、45 旋转，如果我的纹理是 64*64，我是否需要将 gl_PointSize 设置为 64.0 进行旋转？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:48:00.047

这：

1.  转换为 pos(-x,-y,-z)
2.  旋转
3.  转换为 pos(x,y,z)

和这个不是一回事：

`Result Matrix = (Rot Matrix * Translate Matrix) * Anti-Traslate Matrix.`

如果您希望围绕点 (x,y,z) 旋转，则需要执行以下操作：

1.  矩阵 T1 = 平移（x，y，z）；
2.  矩阵 R1 = 旋转（）；
3.  矩阵 T2 = 平移（-x，-y，-z）；

这与以下内容相同：

`Result Matrix = T1 * R1 * T2`

# javascript - Firefox 中的 SVG clipPath 渲染错误

> ID：12021857
> 
> 赞同：1
> 
> 时间：2012-08-18T20:02:49.287
> 
> 标签：javascript, firefox, svg, rendering

首先，看图片：

**前：** ![第一个版本，加载后](../Images/f278a7ae59680ed8a5f3e6b10e662384.png)

**后：** ![操作后的版本](../Images/82e073c3e9585c1063a6e27762b40ca6.png)

Circle 是由动态包含的 SVG 制作的。

生成圆形SVG代码：

[http://jsfiddle.net/n9nb7/](http://jsfiddle.net/n9nb7/)

**使用的库：**

jQuery, svgweb

* * *

**我所做的：**

首先，在页面加载后，我使用 svgweb for IE8 动态创建了内联 SVG。

然后我用它的父 div conteinter 完全删除了它。

然后我重新创建了这个 SVG 代码，我得到了你在第二张图片上看到的内容。

为什么我需要这个：对于完全 AJAX 化的站点。

* * *

**问题：**

你在第二张照片上看到它。问题只存在于 Firefox 中。即使在 IE8 中它也可以正常工作。

事实上`clipPath`停止工作。

* * *

**更新**

实时代码[http://vseslava.ru/?firefox=1](http://vseslava.ru/?firefox=1)。我的解决方案你可以在这里看到：http: [//vseslava.ru/](http://vseslava.ru/)但我需要没有任何超时的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T23:35:31.047

只是为了澄清上述内容，我能够使用下划线的`defer`功能解决问题。

这是一个适用于 Firefox（至少 23 个）的 D3 片段：

```
var clippedRect = svg.append('rect');

_.defer(函数(){
    clippedRect.attr('clip-path', function(d,i){
        返回 "url(#clippingPath"+i+")";
    });
});

```

# java - JTextArea 自动换行调整大小

> ID：12021860
> 
> 赞同：6
> 
> 时间：2012-08-18T20:03:07.273
> 
> 标签：java, swing, jtextarea, word-wrap

所以，我在 JPanel (BoxLayout) 上有 JTextArea。我还有填充 JPanel 其余部分的 Box 填充器。我需要我的 JTextArea 从单行高度开始（我可以管理它），并在需要时扩展和减少。

自动换行已启用，我只需要在添加/删除新行时调整它的高度。

我尝试使用 documentListener 和 getLineCount()，但它无法识别 wordwrap-newlines。

如果可能的话，我想避免弄乱字体。

而且，没有滚动窗格。JTextArea 必须始终完全显示。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-18T20:48:43.137

`JTextArea`有一个比较特殊的副作用，在合适的条件下，它可以自行生长。当我试图设置一个简单的两行文本编辑器（每行字符长度受限，最多两行）时，我偶然发现了这个......

基本上，给定正确的布局管理器，这个组件可以自行增长——这实际上是有道理的，但让我感到惊讶......

![我这么小](../Images/7385a49ee5c8f35afc7fd3c69cf81185.png)![看着我长大](../Images/4b50aed5f6a322f40caf9be260e7c2e8.png)

现在此外，您可能希望使用 a`ComponentListener`来监视组件何时更改大小，如果您对此感兴趣...

```
public class TestTextArea extends JFrame {

    public TestTextArea() {

        setLayout(new GridBagLayout());

        JTextArea textArea = new JTextArea();
        textArea.setColumns(10);
        textArea.setRows(1);
        textArea.setLineWrap(true);
        textArea.setWrapStyleWord(true);

        add(textArea);

        setSize(200, 200);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);

        textArea.addComponentListener(new ComponentAdapter() {

            @Override
            public void componentResized(ComponentEvent ce) {

                System.out.println("I've changed size");

            }

        });

    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        new TestTextArea();
    }

} 
```

# coldfusion - 删除输出 HTML 代码中的空格

> ID：12021862
> 
> 赞同：3
> 
> 时间：2012-08-18T20:03:27.570
> 
> 标签：coldfusion, whitespace

考虑包含以下内容的 test.cfm 文件：

```
<html>
    <body>
        <cfif foo EQ bar>
            <cfset test = "something" />
        </cfif>
        <p>Hello!</p>
    </body>
</html> 
```

在浏览器中运行时，该文件的输出源代码将如下所示：

```
<html>
    <body>

        <p>Hello!</p>
    </body>
</html> 
```

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T20:39:42.997

> 有没有什么办法解决这一问题？

没有什么*可修复*的 - HTML 完全有效且功能正常。

如果您的问题是请求的大小，请使用 gzip 编码。

如果您的问题是阅读调试/etc 的源代码，请使用开发人员工具，例如[Firebug](http://getfirebug.com/) /etc。

但是，为了提高可维护性（同时也减少空白输出），您应该做的一般事情是：

1) 将任何不显示逻辑的内容移出您的视图。

2) 将显示逻辑适当地转换为函数和自定义标签，这两者都更容易防​​止/控制输出。

为防止输出不需要的内容，您可以：

*   将整个部分包裹在[cfsilent](http://cfdocs.org/cfsilent)中，以确保没有任何输出。

*   启用[cfsetting](http://cfdocs.org/cfsetting)`enablecfoutputonly`的属性，然后仅在您想要输出的内容周围使用 cfoutput。

*   始终设置`output=false`在组件和功能标签上。

*   当您想有选择地输出一些文本时，将非标记非输出段包装在 CFML 注释`<!---`中...... `--->`（例如，对于防止自定义标记中的换行符输出很有用）

（我从不理会 cfprocessingdirective，上面提到的一切都能更好地解决问题。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T20:46:49.500

如果您有权访问 CF 管理员，则可以选择禁止空格。

It is under 'Server Settings' --> 'Settings' its called 'Enable Whitespace Management'.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-18T20:10:54.273

尝试`<cfprocessingdirective suppressWhiteSpace="true">`

参考：[http ://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-76de.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-76de.html)

# forms-authentication - 升级到 ASP.NET 4.5/MVC 4 表单身份验证失败

> ID：12021863
> 
> 赞同：15
> 
> 时间：2012-08-18T20:03:45.247
> 
> 标签：forms-authentication, asp.net-mvc-4, iis-express, asp.net-4.5

我刚刚下载了一个 VS 2012 以及 ASP.NET 4.5 和 MVC 4.0 并且正在用一个示例应用程序踢轮胎，发现与 ASP.NET 4.0/MVC 3 完美配合的表单身份验证似乎不再适用于最新发布。

当我在操作控制器中调用 Login 函数时，WebSecurity.Login 调用失败：

```
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
    {
        return RedirectToLocal(returnUrl);
    }

    // If we got this far, something failed, redisplay form
    ModelState.AddModelError("", "The user name or password provided is incorrect.");
    return View(model);
} 
```

我已经用我的 VS 2010 源代码中的等效代码替换了这段代码，但这也失败了（使用现在已弃用的 FormsAuthentication.Authenticate 函数）。

我的问题是：是否有人将 MVC3 移植到 MVC4 应用程序并找到解决此问题的方法？我正在使用 IIS Express，所以我想这可能会导致一些问题，但如果您有任何想法，我将不胜感激。

我从我的工作 asp.net 4/MVC3 应用程序中复制了我的配置，如下所示，但没有运气（这里是相关部分）：

```
 <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=tcp:sql2k1201.dbprovider.net;Initial Catalog=SQL2012_db;User ID=SQL2012_db_user;Password=dbpassword;" providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />

    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880"/>
    </authentication>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="DefaultConnection"
           enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
           maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
           applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </profile>

    <roleManager enabled="true">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </roleManager> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-21T18:43:25.873

如果您的表单身份验证票需要在使用旧版本 .NET 框架的应用程序之间共享，您必须明确配置您的 .NET 4.5 应用程序以使用早期的机器兼容模式，否则它们将无法加密/解密表单身份验证票。

在您的 .net 4.5 应用程序的 web.config 中，设置兼容模式属性：

```
<system.web>
 <machineKey compatibilityMode="Framework20SP2" /> 
</system.web> 
```

这将允许您的 .NET 4.5 应用程序使用由早期 .NET 版本生成的表单身份验证票证。

注意：如果您的任何服务器没有安装 .NET Framework 2.0 SP2，您需要将兼容模式设置为“Framework20SP1”。

[MSDN - MachineKeySection.CompatibilityMode 属性](http://msdn.microsoft.com/en-us/library/system.web.configuration.machinekeysection.compatibilitymode.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:46:11.373

这里的问题是默认的 mvc4 互联网模板使用 SimpleMembership 来管理成员/角色信息。模板中的代码假设了这一点，并且只能与 simplemembership 一起使用。当您安装通用提供程序时，帐户控制器代码会爆炸，因为它无法理解通用提供程序。看看这篇文章，它进一步解释了这种情况[http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net- 4-5-web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T23:06:01.547

对我来说，我遇到了一个问题，因为您需要对 web.config 设置进行一些更改（来自[http://www.asp.net/whitepapers/mvc4-release-notes](http://www.asp.net/whitepapers/mvc4-release-notes)）

```
<appSettings>
  <add key="webpages:Version" value="2.0.0.0" />
  <add key="PreserveLoginUrl" value="true" />
</appSettings> 
```

当我遇到登录问题时，修复这些设置（看起来不像你添加的）让我工作正常。

# html - 为什么页面底部有多余的空间？

> ID：12021866
> 
> 赞同：0
> 
> 时间：2012-08-18T20:04:17.617
> 
> 标签：html, css

我正在尝试为我正在处理的网站制作一个[粘性页脚](http://ryanfait.com/sticky-footer/)，但我无法摆脱底部的额外空白。我在 Chrome 和 Safari 中看到它（我还没有测试过其他浏览器）。当页面第一次加载时，你看不到它，但如果你向下滚动，就会有大约 2-3px 的空白区域。如何使我的页脚粘在底部？

这是网站：

[http://ec2-23-23-22-128.compute-1.amazonaws.com/](http://ec2-23-23-22-128.compute-1.amazonaws.com/)

这就是我想要完成的：

**如何摆脱页面底部的多余空白？**

注意：我知道还有其他一些渲染问题，但我现在唯一担心的是页面底部的额外像素。我整天都在玩负边距、0 边距、填充等，但我无处可去：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:09:27.003

当您在具有类 "img-wrapper" 的 div 中提供图像时，它会消失`display: block`。这在图像中很常见，我看到你这样做是为了重置 CSS：

```
* {
  margin: 0px;
} 
```

我建议反对这一点。适当的[css 重置](http://meyerweb.com/eric/tools/css/reset/)或[规范化](http://necolas.github.com/normalize.css/)将大大缓解这些头痛。

编辑：我知道你说这是一项正在进行的工作，但如果你没有注意到窗口也会在你不需要它时滚动，请注意。这是问题：

```
#b-container {
  background-color: #F1EFE6;
  min-height: 100%;
    height: auto !important;
    height: 100%;
  margin: 0 auto -170px; // originally this was 0 auto -150px
} 
```

# sql-server - 我们可以在 SQL Server 中创建具有确定性和精确性的标量值函数吗？

> ID：12021870
> 
> 赞同：1
> 
> 时间：2012-08-18T20:05:05.363
> 
> 标签：sql-server, sql-server-2008

我们可以在没有 CLR 的情况下在 SQL Server 中创建一个具有确定性和精确性的函数吗？

```
CREATE FUNCTION ufn_max_smalldatetime ()
RETURNS SMALLDATETIME
    WITH SCHEMABINDING
AS 
    BEGIN
        RETURN CAST('2079-06-06' AS SMALLDATETIME)
    END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:20:26.663

据我所知，SQL Server 会自行确定您的函数是否具有确定性和/或精确性。尝试运行以下查询，看看你会得到什么：

```
SELECT OBJECTPROPERTYEX(OBJECT_ID('dbo.ufn_max_smalldatetime'), 'IsDeterministic')

SELECT OBJECTPROPERTYEX(OBJECT_ID('dbo.ufn_max_smalldatetime'), 'IsPrecise') 
```

# css - 高度：100%；有效，但最小高度：100%；不工作？

> ID：12021874
> 
> 赞同：2
> 
> 时间：2012-08-18T20:05:33.567
> 
> 标签：css

这是小提琴：http: [//jsfiddle.net/j9Gmx/](http://jsfiddle.net/j9Gmx/)

我怎样才能得到最小高度：100%；去工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:09:31.487

它*正在*工作，但由于 div 的父级（主体）没有高度，100% 基本上是零像素。将body的高度设置为100%，你会得到你想要的效果。

演示：http: [//jsfiddle.net/j9Gmx/2/](http://jsfiddle.net/j9Gmx/2/)

# machine-learning - 给定文本的最近维基百科页面

> ID：12021875
> 
> 赞同：1
> 
> 时间：2012-08-18T20:05:44.630
> 
> 标签：machine-learning, wikipedia, information-retrieval, closest, web-search

比如说一个人写一个查询 - “d dark knight rses”。我想找到最近的维基百科页面 - [http://en.wikipedia.org/wiki/The_Dark_Knight_Rises](http://en.wikipedia.org/wiki/The_Dark_Knight_Rises)

有什么可能的方法来做到这一点？

我能想到的一种简单方法是在 google 上搜索给定的查询，并附加术语 wikipedia。然后在结果中查找第一个维基百科页面。如果即使在前 5 个页面中也没有维基百科页面，请返回抱歉。

但是是否有任何其他方便的方法或 API 调用可以避免使用 Google。

编辑：最近 - 例如“d dark night”可能会导致“The Dark Night”或“The Dark Knight”。这两个都是有效的答案。尽管前者更接近查询，但我想后者是一个更好的答案，因为这可能是用户查询的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:21:05.073

也许你可以使用官方的[Wikipedia API](http://en.wikipedia.org/w/api.php) ，这里是一个带查询的[`opensearch`](https://www.mediawiki.org/wiki/API%3aOpensearch)调用示例：`dark night`

```
$ curl "https://en.wikipedia.org/w/api.php?action=opensearch&search=dark%20night" 
```

这将返回：

```
[
    "dark night", 
    [
        "Dark Night", 
        "Dark Night of the Soul", 
        "Dark Night of the Soul (album)", 
        "Dark Night of the Scarecrow", 
        "Dark Night (song)", 
        "Dark Night (film)", 
        "Dark night rises", 
        "Dark night (roller coaster)", 
        "Dark night sky paradox"
    ]
] 
```

更新：另一种方法是下载[维基百科数据转储](http://en.wikipedia.org/wiki/Wikipedia%3aDatabase_download)并在本地进行一些搜索。

# c# - 将字典值绑定到 UserControl WPF 的依赖属性

> ID：12021876
> 
> 赞同：1
> 
> 时间：2012-08-18T20:05:47.293
> 
> 标签：c#, wpf, binding, dependency-properties

我正在尝试将字典中的值作为 tabcontrol 的 itemsource 绑定到我的 TabControl.ContentTemplate 中保存的 UserControl 的 DependencyProperty。

对于我这辈子我无法绑定它，我有一种强烈的感觉，它可能与 userControl 'EnvironmentStateView' 的 DataContext 有关，在这种情况下它是一个视图模型。

在单独的 TextBlock 中，对字典键的绑定适用于集合中的每个项目，但不幸的是，仅此而已。

EnvironmentCollectionView.xaml

```
<TabControl Name="EnvironmentCollectionTabControl" ItemsSource="{Binding environmentCollection}">
      <TabControl.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Key}"></TextBlock>
            </DataTemplate>
      </TabControl.ItemTemplate>
      <TabControl.ContentTemplate>
          <DataTemplate>
                <local:EnvironmentStateView Grid.Column="0" Grid.Row="0" EnvironmentObject="{Binding Value}" EnvironmentKey="{Binding Key}"></local:EnvironmentStateView>
          </DataTemplate>
      </TabControl.ContentTemplate>
</TabControl> 
```

环境状态视图.xaml

```
/// <summary>
/// Interaction logic for EnvironmentStateView.xaml
/// </summary>
[Export(typeof(EnvironmentStateView))]
public partial class EnvironmentStateView : UserControl
{
    /// <summary>
    /// Environment object dependency property
    /// </summary>
    public static readonly DependencyProperty EnvironmentObjectProperty =
        DependencyProperty.Register(
            "EnvironmentObject",
            typeof(Framework.Environment),
            typeof(EnvironmentStateView),
            new PropertyMetadata(null));

    /// <summary>
    /// Environment key dependency property
    /// </summary>
    public static readonly DependencyProperty EnvironmentKeyProperty =
        DependencyProperty.Register(
            "EnvironmentKey",
            typeof(string),
            typeof(EnvironmentStateView),
            new PropertyMetadata(null));

    [ImportingConstructor]
    public EnvironmentStateView()
    {
        // Set data context
        this.DataContext = new EnvironmentStateViewModel();
        // Initialise
        InitializeComponent();
    }
    /// <summary>
    /// Gets or sets the environment object
    /// </summary>
    public Framework.Environment EnvironmentObject
    {
        get { return (Framework.Environment)GetValue(EnvironmentObjectProperty); }
        set { SetValue(EnvironmentObjectProperty, value); }
    }
    /// <summary>
    /// Gets or sets the environment key
    /// </summary>
    public string EnvironmentKey
    {
        get { return (string)GetValue(EnvironmentObjectProperty); }
        set { SetValue(EnvironmentObjectProperty, value); }
    }
} 
```

environmentstateview 的 DataContext 设置为视图模型，尽管删除这意味着它 datacontext 为空，所以我猜它一开始就没有继承任何东西。

我的目标是让 environmentCollectionView 在其视图模型中使用 environmentCollection Observable 字典，将其作为 itemsource 绑定到 tabctronol，然后将集合中的各个环境对象传递给单独的用户控件，以处理与环境对象本身关联的特定视图/视觉效果.

我认为我能做到这一点的唯一方法是将字典值作为依赖属性传递，这样每个用户控件都可以做它的事情:)，当然这可能是一种糟糕的方法。

任何帮助表示赞赏

问候沃尔夫

编辑* 将 UserControl 更改为 EnvironmentStateView

编辑* 在修复上一个错误之后，我注意到出现了更多的绑定错误信息

```
System.Windows.Data Error: 40 : BindingExpression path error: 'Key' property not found on 'object' ''EnvironmentStateViewModel' (HashCode=63276897)'. BindingExpression:Path=Key; DataItem='EnvironmentStateViewModel' (HashCode=63276897); target element is 'EnvironmentStateView' (Name=''); target property is 'EnvironmentKey' (type 'String')

System.Windows.Data Error: 40 : BindingExpression path error: 'Value' property not found on 'object' ''EnvironmentStateViewModel' (HashCode=32159097)'. BindingExpression:Path=Value; DataItem='EnvironmentStateViewModel' (HashCode=32159097); target element is 'EnvironmentStateView' (Name=''); target property is 'EnvironmentObject' (type 'Environment') 
```

现在 Key 和 Value 显然不在 EnvironmentStateViewModel 中，我猜这是当前的数据上下文。

我故意将 EnvironmentTagTextBlock 绑定拼错到 Keyy，这给了我绑定错误：

```
System.Windows.Data Error: 40 : BindingExpression path error: 'Keyy' property not found on 'object' ''KeyValuePair`2' (HashCode=-459631492)'. BindingExpression:Path=Keyy; DataItem='KeyValuePair`2' (HashCode=-459631492); target element is 'TextBlock' (Name=''); target property is 'Text' (type 'String') 
```

所以我的猜测是我可能需要以某种方式将我的 DataItem 从 EnvironmentStateViewModel 更改为 KeyValuePair`2 但我不知道如何或是否应该大声笑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:26:38.033

```
public static readonly DependencyProperty EnvironmentObjectProperty =
    DependencyProperty.Register(
        "EnvironmentObject",
        typeof(Framework.Environment),
        typeof(EnvironmentStateView),
        new PropertyMetadata(null)); 
```

父类不应该`EnvironmentStateView`代替`UserControl`吗？

# html - 下拉菜单边距底部不起作用

> ID：12021879
> 
> 赞同：2
> 
> 时间：2012-08-18T20:06:27.397
> 
> 标签：html, css

[http://jsfiddle.net/JkhkJ/](http://jsfiddle.net/JkhkJ/)

这个 jsfiddle 是我到目前为止所拥有的。我希望选择（下拉菜单）与图像（旁边的 1、2、3）保持一致。我曾尝试使用边距顶部和底部标签，但它们似乎不起作用。有什么帮助吗？不需要任何粒子方式，只需要下拉菜单与它们旁边的数字相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T20:10:35.267

尝试使用

```
position: relative; top: -22px; 
```

代替：

```
margin-top: -22px; 
```

那应该这样做。

[在此处](http://jsfiddle.net/JkhkJ/1/)查看示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T20:45:26.017

你可以看看这个小提琴：http: [//jsfiddle.net/3xcbw/1/](http://jsfiddle.net/3xcbw/1/)

```
.select_step_wrapper {
    height: 43px;
    width: 245px;
    display: inline-block;
}

.select_step {
    margin-top: 10px;
    margin-left: 50px;
    height: 43px;
    width: 200px;
}

#states_wrapper {
    background: url(http://unavit.com/images/oneLabel.png) no-repeat left center;
}

#schools_wrapper {
    background: url(http://unavit.com/images/twoLabel.png) no-repeat left center;
}

#buildings_wrapper {
    background: url(http://unavit.com/images/threeLabel.png) no-repeat left center;
} 
```

它可能不是最好的 CSS 代码或实践，但它工作正常。

我已经向您的选择框和一些包装 div 添加了类，因此如果您想再次执行此操作而不重写代码会更容易。

```
<div id="states_wrapper" class="select_step_wrapper">
    <select id="states" class="select_step">
        <option>Select A State</option>
    </select>
</div>

<div id="schools_wrapper" class="select_step_wrapper">
    <select id="schools" class="select_step"></select>
</div>

<div id="buildings_wrapper" class="select_step_wrapper">
    <select id="buildings" class="select_step"></select>
</div> 
```

最后一点，您应该考虑避免使用表格作为菜单并使用带有一些样式的 ul li 来代替，同时尽量避免使用内联 css。

编辑：我打破了你的布局，周围有一些文字，但我做得很快，因为我必须离开；）

祝你好运

# android - android相机连续对焦（按需）

> ID：12021884
> 
> 赞同：2
> 
> 时间：2012-08-18T20:07:13.180
> 
> 标签：android, camera, autofocus

我正在使用三星 Galaxy s2，我注意到在视频录制模式下，当我按下录制按钮时，相机会持续聚焦在对象上。但在预览模式下它不会。我想在我的应用程序中使用持续自动对焦。它不支持这种类型的参数。 [关于自动对焦的问题](https://stackoverflow.com/questions/7156403/is-there-an-efficient-way-to-do-continuous-auto-focus)

自动对焦回调保持焦点一段时间，然后它会失去。而且大多数提出的解决方案都不可靠。[提出的解决方案。](https://stackoverflow.com/questions/5878042/android-camera-autofocus-on-demand)

你能建议我一个完美的解决方案，它可以作为内置相机应用程序。（在视频录制中。）谢谢！祝你有美好的一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:24:56.433

您是否尝试过连续自动对焦模式`FOCUS_MODE_CONTINUOUS_VIDEO`（从 API 级别 9 开始）？在这种模式下，焦点会自动永久调整（对我来说效果很好）

[请参阅http://developer.android.com](http://developer.android.com)上的文档：

*   [Camera.Parameters#FOCUS_MODE_CONTINUOUS_VIDEO](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#FOCUS_MODE_CONTINUOUS_VIDEO)
*   [Camera.Parameters.html#setFocusMode(java.lang.String)](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setFocusMode%28java.lang.String%29)

# python - Python - Web 框架和表单本地化（数字格式）

> ID：12021886
> 
> 赞同：0
> 
> 时间：2012-08-18T20:07:56.070
> 
> 标签：python, flask, pyramid

除了 Django 之外，还有没有可以轻松处理表单本地化的框架？（具体数字格式）

我看过 Pyramid 和 Flask，但他们的文档主要讨论的是翻译而不是数字格式。有没有人有这方面的经验并且可能会指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:27:35.730

Django 是一个多合一的包，而 Pyramid 和 Flask 给你更多的灵活性。

看看[Babel 项目](http://babel.edgewall.org/)；您可以使用该软件包轻松本地化您的表单。

# c++ - 在需要 ostream 时使用 ofstream

> ID：12021887
> 
> 赞同：0
> 
> 时间：2012-08-18T20:08:03.463
> 
> 标签：c++, ofstream, ostream

我正在使用一个库，它有一个功能：

`static void printSingleExpr(std::ostream &os, const ref<Expr> &e);`

但是，我想使用`ofstream`而不是输出到文件，`std::ostream`并且当我传递一个`ofstream`实例（如预期的那样）时，我收到了一个错误。有没有办法在*不*修改函数本身（或重载函数）的情况下实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T20:10:15.710

你一定是传递了一些错误的东西。`std::ofstream`继承自 ，因此可以用来代替`std::ostream`. 换句话说，以下应该有效：

```
std::ofstream f("x.bin");
printSingleExpr(f, x); 
```

由于某种原因，请确保您的`std::ofstream`参考不是恒定的或易变的。

# sql - 使用子查询（单表）中的列子集选择完整行

> ID：12021893
> 
> 赞同：2
> 
> 时间：2012-08-18T20:09:13.447
> 
> 标签：sql

我正在尝试解决以下问题，在[此表中说明，sql 语句和注释](http://sqlfiddle.com/#!4/d3be7/21)

表列：id、版本、idx_on；PK 是 'id' 列

所以，我从子查询中得到一组元组{ id, version}。

我想为 ID 和 VERSION 与上面子查询元组中的所有行设置 IDX_ON 值。或者，选择具有相同标准的所有行（ID、VERSION、IDX_ON）将是一个很好的第一步。

我尝试使用类似的东西但没有成功：SELECT * FROM docs where ID, VERSION in ( *subquery* )

感谢您的任何评论...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:17:01.873

您可以更新存在更高版本的所有行：

```
update  (
        select  *
        from    docs d1
        where   exists
                (
                select  *
                from    docs d2
                where   d1.id = d2.id
                        and d2.version > d1.version
                )
        )
set     idx_on = 0; 
```

[更新了 SQL 小提琴。](http://sqlfiddle.com/?_escaped_fragment_=2/8ec17/4#!4/d3be7/14/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T20:44:59.703

这似乎有效：

```
update docs d
set d.idx_on = 0 
where exists (select * from docs where id = d.id and version > d.version); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T20:23:07.913

我不熟悉 Oracle 的 SQL 语法，如果与 SQL-Server 相同，试试这个：

```
UPDATE d
SET    d.idx_on = 0
FROM   docs d
       INNER JOIN
              ( SELECT  id,
                       MAX(version) AS "version"
              FROM     docs
              GROUP BY id
              )
              q
       ON     q.id      = d.id
       AND    q.version = d.version 
```

# javascript - 无法让我的 iFrame 滚动

> ID：12021896
> 
> 赞同：0
> 
> 时间：2012-08-18T20:09:27.877
> 
> 标签：javascript, iframe, scroll

我正在构建我的[个人页面](http://static.saezmedia.com/terminal/terminal/examples/)，这是一台在屏幕内带有 iframe 的计算机，带有一个虚拟的 javascript 终端。我的问题是，当我继续在终端上书写时，我无法让 iframe 向下滚动。

我尝试添加`scrolling="yes"`到 iframe，但它不起作用。我尝试`$(document).scrollTop($(document).height());`在iframed[页面](http://static.saezmedia.com/terminal/terminal/examples/rpc-demo.html)中使用并将 iframed 页面的高度设置为 2000px ......这些都不起作用。

这是页面的代码：

```
<html>
<head>
<style type="text/css">
body{
background-image:url('http://api.ning.com/files/B4MPF1W8yyhcpqgtcWbw-UuRX4aul676AQ0rB63HYNkXgQR06pGjZVwjKcwMxGgc/apple2c.big.jpg');
background-repeat:no-repeat;
}
#iframe {
position:relative;
padding-top:35px;
padding-left:144px;
}
</style>
</head>
<body>
<div id="iframe">
<iframe src="http://static.saezmedia.com/terminal/terminal/examples/rpc-demo.html" width="458" height="341" scrolling="auto"></iframe></div>

</body>
</html> 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:44:41.757

In you main page: [http://static.saezmedia.com/terminal/terminal/examples/rpc-demo.html](http://static.saezmedia.com/terminal/terminal/examples/rpc-demo.html) you have the following css code:

```
jquery.terminal.css:13:

overflow:hidden; 
```

this makes the scroll bar non visible. If you remove this the page is scrollable and then you have to automatically scroll to the bottom.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:16:34.407

如果您在另一个窗口中打开它，您也将无法滚动它。

这看起来像是网站的问题。

但是，您可以通过固定 iframe 的宽度/高度并在包含的 div 上设置溢出自动来显式滚动它。

# css - 点击 CSS 属性，如 BuySellAds

> ID：12021898
> 
> 赞同：-3
> 
> 时间：2012-08-18T20:09:50.350
> 
> 标签：css

我试图使这个 CSS 属性的点击工作与可以在此处找到的相同：buysellads.com，如果您点击徽标，当您点击它时，它会向下一点......

我们怎样才能创造它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:20:24.510

尝试这样的事情，它可能会成功：

```
.logo a:active { position: relative; top: 1px; } 
```

如果它不起作用，你可能有一些其他的 CSS 阻止了这种效果。您能否提供您网站的 URL，以便我们查看？

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:13:55.227

您必须更改活动的背景位置：

```
.logo a:active em {
background-position: 8px 7px;
} 
```

他们的styles.css中的第201-203行

# java - Java - 从 ArrayList 中删除一个项目

> ID：12021899
> 
> 赞同：-2
> 
> 时间：2012-08-18T20:09:52.997
> 
> 标签：java, arraylist

我有一个数组列表，`private ArrayList<ImageData> imageData;`我想删除我添加到`ArrayList`with的对象`imageData.clear();`

这是代码：

```
private ArrayList<ImageData> imageData;

    public void thing(){
    imageData.add(new ImageData(sprite.getRenderedImage(), x, y)); //ImageData is another class I created for storing the data of images. 

    image.Data.remove(what should I put here in order to remove new 
    ImageData(sprite.getRenderedImage(), x, y); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:12:15.667

下面做

```
public void thing(){
ImageData newData = (new ImageData(sprite.getRenderedImage(), x, y);
imageData.add(newData); //ImageData is another class I created for storing the data of images. 

imageData.remove(newData ) 
ImageData(sprite.getRenderedImage(), x, y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T20:15:11.350

您可以使用

```
imageData.remove(imageData.size() -1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T20:13:36.513

有两种方法可以从 ArrayList 中删除对象：

```
remove(int index); 
```

或者

```
remove(Object o); 
```

# php - 为什么我的 PHP 会话过早到期？

> ID：12021900
> 
> 赞同：2
> 
> 时间：2012-08-18T20:09:54.797
> 
> 标签：php

根据 Chrome，我网站的 PHPSESSID cookie 过期设置为

```
Expires:    Monday, November 26, 2012 2:46:39 PM 
```

但会话仅在几个小时后到期。我在每一页上调用 session_start() 。阅读为类似问题提供的解决方案，我尝试设置

`ini_set("session.cache_expire",300*24*60*60);`

和

`ini_set("session.gc_maxlifetime",100*24*60*60);`

之前，`session_start()`但这并没有解决问题。（它们的初始值分别设置为 180 和 1440。）

我在共享服务器上，另一个建议是更改默认的 tmp 目录，使其不是根目录（某些垃圾收集过程可能正在删除 cookie），所以我这样做了

```
$docroot = $_SERVER['DOCUMENT_ROOT'];
$tmpdir = "$docroot/tmpx";
session_save_path($tmpdir); 
```

这并不能解决问题。（我在其他浏览器中也有同样的问题，而不仅仅是 Chrome。）我还有什么可能做错的？

**更新：**我在本地保存了当前会话的文件，然后在几个小时后尝试登录。虽然 Chrome 中的 PHPSESSID cookie（即，其内容是此会话文件名称的 cookie）仍按预期以未来 100 天的日期存储，但服务器上的实际会话文件现在不包含任何数据。（它存在，但它是 0 字节而不是之前的 192 字节。）所以看起来会话文件没有被删除，但内容正在被删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T01:31:01.973

会话数据未得到正确处理的原因有很多。最有可能的是，会话并未在每个加载并使用数据的页面上启动。要解决此问题，请确保 session_start() 在每个被调用或重定向到的页面上启动。此外，如果您对会话配置进行任何更改（例如，ini_set()），请确保将其应用于全局或每个页面。要全局应用它，请添加

```
php_flag session.gc_maxlifetime <your value>
php_flag session.cache_expire <your value> 
```

到您的 .htaccess 文件。或者，您可以添加

```
ini_set("session.gc_maxlifetime", <value>);
ini_set("session.cache_expire", <value>); 
```

直接在调用 session_start() 的每个页面上的 session_start() 之前。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T20:28:16.777

在之前添加`session_start()`：

```
ini_set('session.use_cookies', 1);
ini_set('session.cookie_lifetime', 300*24*60*60); 
```

由于多种原因，基于文件的会话可能会在您的系统上中断。尝试使用基于数据库的会话，看看是否能解决问题。

# javascript - 对不同选项卡中的 Web 应用程序更改做出反应

> ID：12021908
> 
> 赞同：2
> 
> 时间：2012-08-18T20:10:48.973
> 
> 标签：javascript, web-applications

我有一个 web 应用程序，它同时在两个不同的浏览器窗口/选项卡中运行（我们称它们为 a 和 b）。问题是我需要对选项卡 a 中的点击和窗口 b 中的内容更新做出反应，这些更改需要立即进行。

欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:44:45.847

只有在另一个窗口使用`window.open`. 如果您的应用程序是这种情况，您可以执行以下操作（即时双向通信）。这只是一个非常基本的示例，但我相信您可以扩展它以满足您的需求。

**窗口 A：**

```
var windowB = window.open("windowB.html");   //reference to window B
windowB.onload = function(){
    windowB.triggerChange();
};

function changeOK(str) {
    console.log("windowA: "+str);
} 
```

**窗口 B：**

```
var windowA = window.opener;   //reference to window A

function triggerChange() {
    console.log("windowB: triggerChange");
    windowA.changeOK("change done");
} 
```

在尝试之前不要忘记禁用弹出窗口阻止程序。;)

但是，如果窗口 A 和窗口 B 是独立打开的，则不能像这样使用直接通信。然后，您基本上有两种选择来完成您想要的（[在此处描述](https://stackoverflow.com/a/8231858/1350193)）：

1.  使用 cookie：在窗口 A 中设置一个 cookie 来传递数据，并`setTimeout`在窗口 B 中使用定期读取 cookie 以对更改做出反应。请参阅[此示例](https://stackoverflow.com/a/4079423/1350193)。

2.  [使用长轮询（彗星技术](http://en.wikipedia.org/wiki/Comet_(programming))）的 AJAX 与服务器通信。

由于两种解决方案都使用间接通信，它们显然无法触发窗口 B 中的即时更改。因此您必须等待至少几毫秒，直到 B 的内容可以更新。

# java - 使用 NetBeans GUI Builder 从自定义 JPanel 继承

> ID：12021910
> 
> 赞同：2
> 
> 时间：2012-08-18T20:11:23.447
> 
> 标签：java, swing, user-interface, netbeans

`ContainerPanel`是一个`JPanel`使用`BorderLayout`. SOUTH 包含一个`JPanel`带按钮的。我希望`CENTER`成为另一个自定义的实例`JPanel`，比如说`AbstractPanel`，它提供了一个抽象方法，当单击按钮时将调用该方法。我还想以`JPanel`编程方式设置它（在运行时）。到目前为止，我可以完成所有这些，正如您在以下代码中看到的那样（其中一些是由 NetBeans GUI Builder 生成的）：

```
package jpaneldemo;

import java.awt.BorderLayout;

public class ContainerPanel extends javax.swing.JPanel {

    public ContainerPanel() {
        initComponents();
    }

    public ContainerPanel(AbstractPanel abPanel) {
        initComponents();

        this.abPanel = abPanel;
        this.add(this.abPanel, BorderLayout.SOUTH);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    private void initComponents() {

        buttonPanel = new javax.swing.JPanel();
        okButton = new javax.swing.JButton();

        setLayout(new java.awt.BorderLayout());

        okButton.setText("OK");
        okButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                okButtonActionPerformed(evt);
            }
        });
        buttonPanel.add(okButton);

        add(buttonPanel, java.awt.BorderLayout.PAGE_END);
    }

    private void okButtonActionPerformed(java.awt.event.ActionEvent evt) {
        this.abPanel.abstractMethod();
    }

    // Variables declaration - do not modify
    private javax.swing.JPanel buttonPanel;
    private javax.swing.JButton okButton;
    // End of variables declaration

    private AbstractPanel abPanel = null; 
```

}

我还创建了这个`AbstractPanel`类：

```
package jpaneldemo;

public abstract class AbstractPanel extends javax.swing.JPanel {

    public AbstractPanel() {
        initComponents();
    }

    protected abstract void abstractMethod();

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    private void initComponents() {

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 400, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
        );
    }
    // Variables declaration - do not modify
    // End of variables declaration
} 
```

现在我想创建这个`AbstractPanel`类的子类，我可以在 NetBeans GUI 中对其进行编辑。通常，我在“项目”窗口中右键单击一个包名称，然后导航到“新建 -> JPanel ...”以创建一个自定义的`JPanel`. 我如何才能`AbstractPanel`出现在“新建”菜单中，以便可以使用 NetBeansGUI Builder 编辑新类？还是有另一种方法来完成同样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T20:32:52.540

如果您打算提供一个“模板”组件，然后可以将其添加到调色板并包含在其他容器中，那么可以。

阅读[FaqFormCustomContainerBean](http://wiki.netbeans.org/FaqFormCustomContainerBean)

基本思想（除了创建一个`BeanDescriptor`是您将需要提供某种“内容”面板，可以在设计时添加其他内容。

现在，如果您有兴趣提供自定义模板，那是我以前没有做过的事情。

您可以尝试阅读[http://netbeans.org/competition/win-with-netbeans/customize-java-template.html](http://netbeans.org/competition/win-with-netbeans/customize-java-template.html)。它可能有点过时，但可能会帮助您朝着正确的方向前进

# django - Django 模型中的非此即彼的字段

> ID：12021911
> 
> 赞同：0
> 
> 时间：2012-08-18T20:11:24.203
> 
> 标签：django, django-models, optional-parameters

我正在构建一个具有两个字段的 django 模型，只需要其中一个。

```
class course_data(models.Model):
    link = models.CharField(max_length = 500, null = True, blank = True)
    uploaded_file = models.FileField(upload_to='course_files', null = True, blank = True)
    name = models.CharField(max_length = 200, null = True, blank = True)
    description = models.TextField(null = True, blank = True)    
    applies_to = models.ManyToManyField('course') 
```

我希望该条目仅在提供“链接”字段或提供“uploaded_file”字段或两者兼有时才有效。我不能将这两个参数都设为可选，因为它们都可以留空。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:33:04.433

这不是您在模型定义中要处理的事情。您将在表单级别处理它，方法是创建两个字段`required=False`，但检查表单的`clean()`方法是否提供了其中一个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-12T10:25:37.997

您可以覆盖`clean`方法：

```
class course_data(models.Model):
    link = models.CharField(max_length = 500, null = True, blank = True)
    uploaded_file = models.FileField(upload_to='course_files', null = True, blank = True)
    name = models.CharField(max_length = 200, null = True, blank = True)
    description = models.TextField(null = True, blank = True)    
    applies_to = models.ManyToManyField('course')

    def clean(self):
        if self.link == None and self.uploaded_file is None:
            raise ValidationError(_('Fields uploaded_file and link required.')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T20:34:55.507

您可以使用[ModelForm](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform)并覆盖其`clean`方法来获得您想要的行为。如果要使用管理员，可以使用[ModelAdmin添加自定义行为](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#modeladmin-objects)

# php - PHP，将任何数字转换为浮点 0.x

> ID：12021916
> 
> 赞同：0
> 
> 时间：2012-08-18T20:12:13.297
> 
> 标签：php

我需要做这个相当奇怪的事情，假设我有：

```
$number = rand(1, 9); 
```

（这只是它可能是什么数字的一个例子，实际上我以完全不同的方式得到它）

现在我需要将该数字“转换”为`0.2`我得到的任何数字，基本上它必须以 0 开头并且是一种`float`数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T20:17:33.470

PHP 不支持在变量声明中显式类型转换。要以您想要简单地除以 10 的方式将 转换`int`为 a ：`float`

```
$number = rand(1, 9) / 10; 
```

有关更多信息，请参阅[PHP 类型杂耍的此页面。](http://php.net/manual/en/language.types.type-juggling.php)如果您混合`floats`和`ints`/或其他类型，它们将被重新铸造。示例：

```
echo 10 + 2.5; // gives you 12.5, a float because of the types used 
```

**编辑：** PHP 确实有明确的[类型转换](http://www.php.net/manual/en/language.types.type-juggling.php#language.types.typecasting)，只是没有在变量声明中。但即使您将整数转换为浮点数，它也不会显示小数位。为此，请改用 PHP 的[`number_format`](http://us2.php.net/manual/en/function.number-format.php)函数：

```
echo number_format(10, 1); // gives you 10.0 
```

**编辑 2：** 如果您只是想让您的数字成为 0 和 1 之间的小数（例如 2 变为 0.2，25 变为 0.25，等等），您可以使用以下函数：

```
function getNumAsDecimal($num) {
    return ($num / pow(10, strlen((string)$num)));
} 
```

所以`getNumAsDecimal(2)`会回来`0.2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:14:47.883

$number=(float)rand(1, 9)/10;

请参阅 PHP 类型转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T20:22:31.820

```
function Floatize(){
    return (float) (rand(1, 9) / 10);
}

echo Floatize(); // will return something like 0.2 or 0.5 or 0.9 
```

# javascript - 有没有更好的方法来编写这个显示/隐藏 JQuery 代码？

> ID：12021925
> 
> 赞同：1
> 
> 时间：2012-08-18T20:14:03.663
> 
> 标签：javascript, jquery, html, css, optimization

好的，我终于让它按照我想要的方式工作了。

我需要它有不同的按钮来显示/隐藏，如果要求显示另一个 DIV 则隐藏，我还需要将我的 a 标签远离我的 DIV 标签以及添加和删除活动的类。但是，即使它有效，我知道它真的很乱。

这是一个链接：http: [//jsfiddle.net/qKWC8/24/](http://jsfiddle.net/qKWC8/24/)

这是JS：

```
$(document).ready(function() {

    // Feature box 1

    $('#show1').click(function() {
        $('#show2,#show3,#show4,#show5,#show6').removeClass("active");
        $("#feature-2,#feature-3,#feature-4,#feature-5,#feature-6").hide();
        $("#feature-1").show();
        $(this).addClass("active");
    });

    $('#hide1').click(function() {
        $(this).parent().hide();
        $('#show1').removeClass("active");
    });

    // Feature box 2

    $('#show2').click(function() {
        $('#show1,#show3,#show4,#show5,#show6').removeClass("active");
        $("#feature-1,#feature-3,#feature-4,#feature-5,#feature-6").hide();
        $("#feature-2").show();
        $(this).addClass("active");
    });

    $('#hide2').click(function() {
        $(this).parent().hide();
        $('#show2').removeClass("active");
    });

    // Feature box 3

    $('#show3').click(function() {
        $('#show1,#show2,#show4,#show5,#show6').removeClass("active");
        $("#feature-1,#feature-2,#feature-4,#feature-5,#feature-6").hide();
        $("#feature-3").show();
        $(this).addClass("active");
    });

    $('#hide3').click(function() {
        $(this).parent().hide();
        $('#show3').removeClass("active");
    });

    // Feature box 4

    $('#show4').click(function() {
       $('#show1,#show2,#show3,#show5,#show6').removeClass("active");
        $("#feature-1,#feature-2,#feature-3,#feature-5,#feature-6").hide();
        $("#feature-4").show();
        $(this).addClass("active");
    });

    $('#hide4').click(function() {
        $(this).parent().hide();
        $('#show4').removeClass("active");
    });

    // Feature box 5

    $('#show5').click(function() {
       $('#show1,#show2,#show3,#show4,#show6').removeClass("active");
        $("#feature-1,#feature-2,#feature-3,#feature-4,#feature-6").hide();
        $("#feature-5").show();
        $(this).addClass("active");
    });

    $('#hide5').click(function() {
        $(this).parent().hide();
        $('#show5').removeClass("active");
    });

    // Feature box 6

    $('#show6').click(function() {
       $('#show1,#show2,#show3,#show4,#show5').removeClass("active");
        $("#feature-1,#feature-2,#feature-3,#feature-4,#feature-5").hide();
        $("#feature-6").show();
        $(this).addClass("active");
    });

    $('#hide6').click(function() {
        $(this).parent().hide();
        $('#show6').removeClass("active");
        });
    }); 
```

这是HTML：

```
<a href="#" id="show1">Show</a>
<a href="#" id="show2">Show</a>
<a href="#" id="show3">Show</a>
<a href="#" id="show4">Show</a>
<a href="#" id="show5">Show</a>
<a href="#" id="show6">Show</a>

<div id="feature-1">
    Fill this space with really interesting content 1\. <a href="#" id="hide1">Hide</a>
</div>

<div id="feature-2">
    Fill this space with really interesting content 2\. <a href="#" id="hide2">Hide</a>
</div>

<div id="feature-3">
    Fill this space with really interesting content 3\. <a href="#" id="hide3">Hide</a>
</div>

<div id="feature-4">
    Fill this space with really interesting content 4\. <a href="#" id="hide4">Hide</a>
</div>

<div id="feature-5">
    Fill this space with really interesting content 5\. <a href="#" id="hide5">Hide</a>
</div>

<div id="feature-6">
    Fill this space with really interesting content 6\. <a href="#" id="hide6">Hide</a>
</div> 
```

这是CSS：

```
#feature-1,#feature-2,#feature-3,#feature-4,#feature-5,#feature-6 {
    height:300px;
    background-color: #99CCFF;
    padding:20px;
    margin-top:10px;
    border-bottom:5px solid #3399FF;
    display: none;
}
.active{background:#00FFFF;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T20:30:19.567

几乎总是有更好的方法... ;)

**JavaScript：**

```
$("document").ready(function(){
    $("#links a").click(function(){
        $(".feature").hide();
        $("#features div").eq($(this).index()).show();
    });
    $("a.hide").click(function(){
        $(this).parent("div").hide();
    });
}); 
```

**HTML：（**我稍微改变了你的 HTML 结构）

```
<div id="links">
    <a href="#">Show</a>
    <a href="#">Show</a>
    ...
</div>

<div id="features">
    <div class="feature">
        Fill this space with really interesting content 1\. <a href="#" class="hide">Hide</a>
    </div>
    <div class="feature">
        Fill this space with really interesting content 2\. <a href="#" class="hide">Hide</a>
    </div>
    ...
</div> 
```

[**演示**（JSFiddle）](http://jsfiddle.net/Aletheios/R9jZc/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T20:24:43.957

您可以使用类而不是 ID。根据您当前的标记，我已经缩小了您的代码，请尝试以下操作：

```
$(document).ready(function() {

    $('a[id^=show]').click(function() {
        var which = this.id.slice(-1);
        $(this).addClass("active").siblings('a').removeClass("active");
        $("div[id^='feature']").hide();
        $("#feature-"+which).show();
    });

    $('a[id^=hide]').click(function() {
        var which = this.id.slice(-1);
        $(this).parent().hide();
        $('#show'+which).removeClass("active");
    });

}); 
```

[小提琴](http://jsfiddle.net/qKWC8/26/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T20:33:15.847

```
<a href="#" onclick="myfunction('show1','feature-1')" class="anchors" id="show1">Show</a>
<a href="#" onclick="myfunction('show2','feature-2')" class="anchors" id="show2">Show</a>
<a href="#" onclick="myfunction('show3','feature-3')" class="anchors" id="show3">Show</a>
<a href="#" onclick="myfunction('show4','feature-4')" class="anchors" id="show4">Show</a>
<a href="#" onclick="myfunction('show5','feature-5')" class="anchors" id="show5">Show</a>
<a href="#" onclick="myfunction('show6','feature-6')" class="anchors" id="show6">Show</a>

<div class="features" id="feature-1">
Fill this space with really interesting content 1\. <a href="#" onclick="$(this).parent().hide();">Hide</a>
</div>

<div class="features"  id="feature-2">
Fill this space with really interesting content 2\. <a href="#" onclick="$(this).parent().hide();">Hide</a>
</div>

<div class="features" id="feature-3">
Fill this space with really interesting content 3\. <a href="#" onclick="$(this).parent().hide();">Hide</a>
</div>

<div class="features" id="feature-4">
Fill this space with really interesting content 4\. <a href="#" onclick="$(this).parent().hide();">Hide</a>
</div>

<div class="features" id="feature-5">
Fill this space with really interesting content 5\. <a href="#" onclick="$(this).parent().hide();">Hide</a>
</div>

<div class="features" id="feature-6">
Fill this space with really interesting content 6\. <a href="#" onclick="$(this).parent().hide();">Hide</a>
</div>
/// javascript

function myfunction(anchor_id, feature_id){
 $('.anchors').removeClass("active");
    $(".features").hide();
    $("#"+feature_id).show();
    $("#"+anchor_id).addClass("active");
} 
```

我已将您的一些 JS 代码减到最少，希望对您有所帮助

# javascript - 加载后显示 gif

> ID：12021926
> 
> 赞同：1
> 
> 时间：2012-08-18T20:14:29.810
> 
> 标签：javascript

所以我的`<img onload="resizeImage()" src="movie.gif">`网站上有一个，我只想在它完全加载后显示它。gif是通过php从我的sql数据库加载的，因此img src因页面而异。我也有调整大小以使图像全尺寸

```
<script type="text/javascript">

function resizeImage()
{
  var window_height = document.body.clientHeight
  var window_width  = document.body.clientWidth
  var image_width   = document.images[0].width
  var image_height  = document.images[0].height
  var height_ratio  = image_height / window_height
  var width_ratio   = image_width / window_width
  if (height_ratio > width_ratio)
  {
    document.images[0].style.width  = "auto"
    document.images[0].style.height = "100%"
  }
  else
  {
    document.images[0].style.width  = "100%"
    document.images[0].style.height = "auto"
  }
}
</script> 
```

是否可以将 gif 放入 div 并执行此操作

```
#div {
     display:none;
{ 
```

然后在加载图像后将 div 更改为此

```
#div {
     display:block;
{ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:18:01.383

您可以使用此 HTML：

```
<img src="movie.gif" onload="displayImage(this)" style="display:none;"> 
```

使用这个 javascript：

```
function displayImage(obj) {
    obj.style.display = "block";
} 
```

在 HTML 中不使用事件处理程序的另一种方法是动态创建对象，并且仅在加载后将其插入页面，如下所示：

```
var img = new Image();
img.onload = function() {
    document.body.appendChild(this);
};
img.src = "movie.gif"; 
```

或者，您也可以动态创建它，立即将其插入 DOM，但仅在加载后才可见：

```
var img = new Image();
img.style.display = "none";
img.onload = function() {
    this.style.display = "block";
};
img.src = "movie.gif";
document.body.appendChild(img); 
```

* * *

好的，既然您已经展示了您的实际代码和 HTML，下面是一个考虑了附加信息并使用您现有代码的答案：

让你的 HTML 变成这样：

```
<img onload="resizeImage(this)" src="movie.gif" style="display:none;"> 
```

将您的代码更改为：

```
<script type="text/javascript">

function resizeImage(obj)
{
  var window_height = document.body.clientHeight;
  var window_width  = document.body.clientWidth;
  var image_width   = obj.width;
  var image_height  = obj.height;
  var height_ratio  = image_height / window_height;
  var width_ratio   = image_width / window_width;
  if (height_ratio > width_ratio)
  {
    obj.style.width  = "auto";
    obj.style.height = "100%";
  }
  else
  {
    obj.style.width  = "100%";
    obj.style.height = "auto";
  }
  obj.style.display = "block";
}
</script> 
```

# javascript - 我可以使用 HTML5 File API 预览 PDF 吗？

> ID：12021933
> 
> 赞同：1
> 
> 时间：2012-08-18T20:16:05.953
> 
> 标签：javascript, html, file-upload, filereader

我可以设置`src`图像的 来预览拖放的图像文件，但是 pdf 呢？

（如果不是预览缩略图，那么至少文件类型图标怎么样？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-19T09:13:22.547

显然，PDF 文件不兼容网络，因此我们必须利用外部库来帮助我们处理这些类型的文件。一个非常著名的是[Mozilla PDF JS 库](https://rawgithub.com/mozilla/pdf.js/gh-pages/build/pdf.js)。

现在预览 pdf 文件的第一页。

```
//
// Asynchronous download PDF as an ArrayBuffer
//
PDFJS.disableWorker = true;
var pdf = document.getElementById('pdf');
pdf.onchange = function(ev) {
  if (file = document.getElementById('pdf').files[0]) {
    fileReader = new FileReader();
    fileReader.onload = function(ev) {
      // console.log(ev);
      PDFJS.getDocument(fileReader.result).then(function getPdfHelloWorld(pdf) {
        //
        // Fetch the first page
        //
        // console.log(pdf)
        pdf.getPage(1).then(function getPageHelloWorld(page) {
          var scale = 0.5;
          var viewport = page.getViewport(scale);
          //
          // Prepare canvas using PDF page dimensions
          //
          var canvas = document.getElementById('the-canvas');
          var context = canvas.getContext('2d');
          canvas.height = viewport.height;
          canvas.width = viewport.width;
          //
          // Render PDF page into canvas context
          //
          var task = page.render({
            canvasContext: context,
            viewport: viewport
          })
          task.promise.then(function() {
            // console.log(canvas.toDataURL('image/jpeg'));
          });
        });
      }, function(error) {
        // console.log(error);
      });
    };
    fileReader.readAsArrayBuffer(file);
  }
}
```

```
<script src="https://rawgithub.com/mozilla/pdf.js/gh-pages/build/pdf.js"></script>

<canvas id="the-canvas" style="border:1px solid black"></canvas>
<input id='pdf' type='file' />
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:42:47.863

实现这一点的方法是在上传 pdf 并保存时获取文件类型。当您显示记录时，您可以检查一下文件类型

# php - 如果在 PHP 中阻塞

> ID：12021935
> 
> 赞同：-1
> 
> 时间：2012-08-18T20:16:28.633
> 
> 标签：php, validation, if-statement, block, login-script

我不知道逻辑上哪里出错了......我想通过 3 个步骤验证这个注册脚本：

1st：检查是否有任何字段为空，在这种情况下包括errorreg.php和register.php。

第二：如果电子邮件已经存在，包括 register.php。

第三：如果一切顺利，将数据插入数据库。

```
<?php
    $address =$_POST["add"];
    $password =$_POST["pw"];
    $firstname =$_POST["fname"];
    $lastname =$_POST["lname"];
    $email =$_POST["email"];
    $contact =$_POST["cno"];

    $con=mysql_connect("localhost","root","");
    mysql_select_db("bookstore");
    $q2=mysql_query("select * from customer where email='$email'");
    $b=mysql_fetch_row($q2);
    $em=$b[0];

   if($password != $_POST['pwr'] || !$_POST['email'] || !$_POST["cno"] || !$_POST["fname"] || !$_POST["lname"] || !$_POST["add"])
    {
        include 'errorreg.php';
        include 'register.php';
    }

    else if($em==$email)
    {
        echo 'email already present try another';
        include 'register.php';
    }
    else
    {
        $con=mysql_connect("localhost","root","");
        mysql_select_db("bookstore");
        $q1=mysql_query("insert into customer values('$email','$password','$firstname','$lastname','$address',$contact)");

        echo 'query completed';
        $q2=mysql_query("select * from customer where email='$email'");
        $a=mysql_fetch_row($q2);
        print "<table border =2px solid red> <tr><th>id </th></tr>";
        print "<td>$a[0]</td>";

        print "</table>";
        include 'sucessreg.php';
        echo " <a href='newhome.php'>goto homepage</a>";
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:22:28.380

首先，您要检查 $_POST 对象中的属性是否设置：

```
if(isset($_POST["name"]) 
```

其次，您要检查值集是否为空

```
if(isset($_POST["name"] && !empty($_POST["name"])) 
```

现在您只需将其放大以检查您的所有属性，将其移动到这样的函数中会很方便

```
function ispostset($post_var)
{
if (isset($_POST[$post_var]))
{
    if ($_POST[$post_var] != '')
    {
        return true;
    }
    else
        return false;
}
else
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T20:35:59.123

这里有很多要纠正的地方，但是对于您的具体关注，“循环”不会继续到第二和第三“步骤”，那是因为您正在考虑这个错误。在 if/else if/else 代码块中，一次只执行一个块，其他块不执行。例如，如果用户提交了一个数字，我们可以通过以下内容告诉他们它是偶数还是奇数：

```
if($_GET['number'] % 2 == 0){
  echo "That's even!";
} else {
  echo "That's odd!";
} 
```

您正在尝试进行一次检查，然后进行另一次检查，然后进行第三次检查。在这种情况下，您希望*嵌套*条件（if 语句）而不是让它们一个接一个出现，如下所示：

```
if(/* first, basic sanity check*/) {
  if(/* second, more complex check */) {
    if(/* final check */) {
      // Database update
    } else {
      // Failed final check
    }
  } else {
    // Failed second check
  }
} else {
  // Failed basic check
} 
```

* * *

对您的代码的其他一些评论：

1.  注意格式 - 以一致且视觉清晰的模式布置您的代码将有助于在您犯错时更容易看到。
2.  使用`isset($_POST['variable'])`前使用`$_POST['variable']`，否则会出错。一个想法是使用如下行：`$address = isset($_POST['address']) ? $_POST["add"] : '';`- 如果您不知道该表示法，它可以让您设置`$address`为`$_POST`数组中的值或未`''`设置的值。
3.  使用您创建的变量，例如`$email`and `$contact`，而不是重新调用`$_POST`变量 - 它们是更清晰、更短的变量名称。
4.  使用更好的[MySQLi 库](http://php.net/manual/en/book.mysqli.php)，而不是 MySQL 库。
5.  在脚本开始时创建一个到数据库的连接 ( `$con = ...`)，以后不要再创建第二个，就像您在此处所做的那样。
6.  明确指定您的查询正在针对哪个连接运行 - 您说`$q2=mysql_query("SELECT ...")`但您也应该传递您构建的连接， `$q2=mysql_query("SELECT ...",$con)`.

# java - Java有线程返回一些东西给主线程

> ID：12021938
> 
> 赞同：0
> 
> 时间：2012-08-18T20:17:05.393
> 
> 标签：java, multithreading, return

我被困在某事上，似乎想不出解决办法。我有一个名为 dbSelect 的函数，它会创建一个线程来运行 MySQL 查询并获取 a `ResultSet`，但是我需要我`dbSelect`来获取它`ResultSet`并返回它。这是我所拥有的：

```
public class Utils {
    public static void dbSelect(String query){
        selectQuery = query;
        Thread selectThread = new selectThreadClass();
        selectThread.start();
    }
}
class selectThreadClass extends Thread {
    public void run(){
        perform();
    }

    public ResultSet perform(){
        Connection conn = null;
        try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            conn = DriverManager.getConnection("jdbc:mysql://localhost/lob/?user=root&password=");

            Statement s = conn.createStatement();
            ResultSet rs = s.executeQuery(Utils.selectQuery);
            return rs;
        }catch (SQLException | InstantiationException | IllegalAccessException | ClassNotFoundException e){
            e.printStackTrace();
            return null;
        }
    }
} 
```

谁能帮我得到它，以便从线程中`dbSelect`返回？`ResultSet`谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T20:21:59.363

使用[可调用](https://blogs.oracle.com/CoreJavaTechTips/entry/get_netbeans_6)

```
 public interface Callable<V> {
 V call() throws Exception;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T20:26:26.303

而不是 Runnable 使用可调用的。

```
public class SelectCallableClass implements Callable<ResultSet> {

    public ResultSet call() throws Exception {
        return perform();
    }

    public ResultSet perform(){
        Connection conn = null;
        try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            conn = DriverManager.getConnection("jdbc:mysql://localhost/lob/?user=root&password=");

            Statement s = conn.createStatement();
            ResultSet rs = s.executeQuery(Utils.selectQuery);
            return rs;
        }catch (SQLException | InstantiationException | IllegalAccessException | ClassNotFoundException e){
            e.printStackTrace();
            return null;
        }
    }
} 
```

要提交 Callable 类，请使用 ExecuterService

```
ExecutorService service=Executors.newFixedThreadPool(1);
Future future=service.submit(new SelectCallableClass()); 
```

> 上面的代码执行以下操作（来自 doc）。提交一个返回值的任务以供执行，并返回一个 Future> 表示该任务的待处理结果。Future 的 get 方法将在成功完成后返回任务的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T22:03:43.323

只是我的尝试

我修改了代码并使用 List 获得了解决方案来保存 ResultSet 中的值，但我只有一个问题，即我无法在 Callable 中将结果作为类型 (ResultSet)

当我尝试使用未来的 get() 函数检索值时，结果集以某种方式为空

结果集 rs = (ResultSet)future.get();

下面是一段不起作用的代码，

```
ExecutorService service=Executors.newFixedThreadPool(1);
Callable<ResultSet> callable = new SelectThreadResultSet();
Future<ResultSet> future = service.submit(callable);
ResultSet rs = (ResultSet)future.get();
// Here I dont get any values
while(rs.next()){
    System.out.println(rs.getString("EMPLOYEE"));
} 
```

请在下面找到对我有用的解决方案，我使用 List 来保存值并返回它。

类选择线程类：

```
public class SelectThreadClass implements Callable<List<String>> {

    public List<String> call(){
        ResultSet rs = null;
        List<String> strList = new ArrayList<String>();
        try {
            rs  = perform();
            while(rs.next()){
                strList.add(rs.getString("EMPNAME"));
            }
            System.out.println("Passed");

        } catch (InstantiationException | IllegalAccessException | SQLException e) {
            e.printStackTrace();
        }
        return strList;
    }

    public ResultSet perform() throws InstantiationException, IllegalAccessException, SQLException{
        Connection conn = null;
        try {
            Class.forName("org.sqlite.JDBC");
            try {
                conn = DriverManager.getConnection("jdbc:sqlite:C:\\SqlLite\\EMPLOYEE.db");
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            Statement s = null;
            try {
                s = conn.createStatement();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            ResultSet rs = null;
            try {
                rs = s.executeQuery(Utils.selectQuery);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return rs;
        }catch (ClassNotFoundException e){
            e.printStackTrace();
            return null;
        }
    }
} 
```

类实用程序：

```
public class Utils {

    public static String selectQuery = "SELECT EMPNAME FROM EMPLOYEEDETAILS";
    public static void dbSelect(String query) throws InterruptedException, ExecutionException, SQLException{
        ExecutorService service=Executors.newFixedThreadPool(1);
        Callable<List<String>> callable = new SelectThreadClass();

        Future<List<String>> future = service.submit(callable);

        List<String> empList = future.get();
        for(String emp : empList){
            System.out.println(emp);
        }
    }

    public static void main(String args[]) throws InterruptedException, ExecutionException, SQLException{
        dbSelect("SELECT EMPNAME FROM EMPLOYEEDETAILS");
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T20:24:23.730

`run`不返回结果。
使用 al [Callable](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html)或使用共享变量并 poll/ `wait`in`Utils`直到结果`SelectThreadClass`可用。
但我建议使用 a`Callable`因为它完全适合任务

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T22:14:33.457

您可以简单地在 Thread 类中有一个属性，然后获取该属性，

```
public class Utils {
    public static void dbSelect(String query){
        selectQuery = query;
        Thread selectThread = new selectThreadClass();
        selectThread.start();

        ((SelectThreadClass) selectThread).getResult();
    }
}

class selectThreadClass extends Thread {
    ResultSet rs = null;

    public ResultSet getResult(){
        return rs;
    }

    public void run(){
        rs = perform();
    }

    public ResultSet perform(){
        Connection conn = null;
        try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            conn = DriverManager.getConnection("jdbc:mysql://localhost/lob/?user=root&password=");

            Statement s = conn.createStatement();
            return s.executeQuery(Utils.selectQuery);
        } catch (SQLException | InstantiationException | IllegalAccessException | ClassNotFoundException e){
            e.printStackTrace();
            return null;
        }
    }
} 
```

唯一的问题是您最终可能会从 dbutil 中处理连接关闭和其他内容，或者，您可以将结果集转换为任何 java 类，然后返回该 java 对象列表而不是结果集

# cross-domain - JsonP scriptTag extjs4.1 问题

> ID：12021947
> 
> 赞同：0
> 
> 时间：2012-08-18T20:18:34.183
> 
> 标签：cross-domain, jsonp, extjs4.1

**我得到以下服务器响应：**

> 回调（{“数据”：[{“id”：“13_gnomodotiseis”，“id1”：13，“标题”：“5/2009 ΓΝΜΔΕΙΣΑΠ 2009”，“文本”：“5/2009 ΓΝΜΔΕΙΣΑΠ”，“模型": "gnomodotiseis", "body": "σίλει...", "type": "text", "history": "old", "url": "", "search_tag": "Γνωμοδοτήσεις", "new_element ": "真" } ], "数据集": 1 })

**我有一个这样的商店定义：**

```
var baseUrl = 'http://localhost:8090/'; 

Ext.define('Ktimatologio.store.NewSingleBlockStore', {
    extend: 'Ext.data.Store',
    alias: 'widget.newsingleblockstore',

    requires: ['Ktimatologio.model.NewSingleBlockModel'],

    model: 'Ktimatologio.model.NewSingleBlockModel',

    groupField: 'search_tag',

    fields: [    
        {name:'id', mapping:'id'},
        {name:'id1', mapping:'id1'},
        {name: 'text', mapping: 'text'},
        {name: 'title', mapping: 'title'},
        {name: 'fek', mapping: 'fek'},
        {name: 'date', mapping: 'date'},
        {name: 'descr', mapping: 'description'},
        {name: 'model', mapping: 'model'},
        {name: 'body', mapping: 'body'},
        {name: 'type', mapping: 'type'},
        {name: 'history', mapping: 'history'},
        {name: 'src', mapping: 'url'},
        {name: 'search_tag', mapping: 'search_tag'},
        {name: 'new_element', mapping: 'new_element'},
        {name: 'new_table', mapping: 'new_table'}
        ],

    autoLoad: true,    

    proxy: {
        //type:'ajax',
        type:'jsonp',
        url: baseUrl + 'openbd/ktimatologio-final/resources/cfScripts/nea_stoixeia/GetNews.cfc?',
        callbackKey: 'callback',
        extraParams: {
            method: 'jsonP'
            },
        reader:{
            type: 'json',
            root: 'data'
        }
    } 

}); 
```

**我在萤火虫中看到的网址：**

> http://localhost:8090/openbd/ktimatologio-final/resources/cfScripts/nea_stoixeia/GetNews.cfc?&_dc=1345305032559&method=jsonP&page=1&start=0&limit=25&group=[{"property"%3A"search_tag"%2C"direction "%3A"ASC"}]&sort=[{"property"%3A"search_tag"%2C"direction"%3A"ASC"}]&callback=Ext.data.JsonP.callback2

Firebug 给我错误：**“ReferenceError：未定义回调”**

我的问题是：

Ext.data.JsonP.callback2 是从哪里弹出来的？

我在这里想念什么？Extjs4.1 中的 jsonP 是如何工作的？

我真的需要这方面的帮助。

先感谢您，

汤姆

希腊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:05:28.703

您在响应中使用了错误的函数名称。如果你查看请求url，你可以看到它是在你的响应需要调用的函数名中发送的，你需要在响应数据中使用它：&callback=Ext.data.JsonP.callback2，所以响应应该调用函数 Ext.data.JsonP.callback2 而不是简单的回调。因此，在您的示例中，服务器应该将其作为响应返回：

```
Ext.data.JsonP.callback2({ "data": [ { "id": "13_gnomodotiseis", "id1": 13, "title": "5/2009 ΓΝΜΔ ΕΙΣΑΠ 2009", "text": "5/2009 ΓΝΜΔ ΕΙΣΑΠ ", "model": "gnomodotiseis", "body": "σίλει...", "type": "text", "history": "old", "url": "", "search_tag": "Γνωμοδοτήσεις", "new_element": "true" } ], "dataset": 1 }) 
```

这是因为在请求中发送了 callback=Ext.data.JsonP.callback2。

# netbeans - 更改netbeans中的默认字体？

> ID：12021949
> 
> 赞同：17
> 
> 时间：2012-08-18T20:18:53.107
> 
> 标签：netbeans, netbeans-7

是否可以更改netbeans中的默认字体？文档说：

> Monospaced 字体映射到不同系统上的不同字体。在 Windows 上它被映射到“Courier”，在 Linux 上它被映射到“Lucida Typewriter”。

[http://ui.netbeans.org/docs/ui/editor_fonts_colors/Editor_fonts_and_colors.htm](http://ui.netbeans.org/docs/ui/editor_fonts_colors/Editor_fonts_and_colors.htm)

我在 Windows 上，想将 Monospaced 字体映射到“Consolas”而不是“Courier”。

PS 我知道字体可以很容易地从选项中更改，但是当我以这种方式更改它时，我不能再使用 unicode 字符。猜猜我需要做他们所说的将等宽字体“映射”到其他字体。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T21:57:03.943

工具 > 选项 > 字体和颜色

设置类别“默认”，并在其右侧设置您要使用的字体。

如果这不能解决它，请尝试添加：

```
--laf Nimbus -J-Dswing.aatext=true -J-Dawt.useSystemAAFontSettings=lcd 
```

或者

```
-J-Dswing.aatext=true -J-Dawt.useSystemAAFontSettings=lcd --laf Metal 
```

到文件：`netbeans.conf`。您可以在`$NETBEANS_HOME/etc/`文件夹中找到它。从系统首选项中缩小您的应用程序字体。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-31T17:55:44.200

要在编辑器之外更改字体大小，您可以通过编辑 Net Beans conf 文件进行配置，您可以在此处找到它：C:\Program Files\NetBeans 8.0.2\etc\netbeans.conf

然后编辑这一行： netbeans_default_options="..."

通过在末尾添加：

--字体大小 18

我希望它有帮助:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-17T13:16:33.870

现在生活变得更加轻松。只需从“**工具**”菜单中选择“**选项**”，然后按照以下屏幕截图中的步骤操作，并注意步骤 3 和 4，它们正在为所有语言设置默认字体：

[![在此处输入图像描述](../Images/ba1f256a02f7ef25194db9e0852124d6.png)](https://i.stack.imgur.com/w4pbo.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-22T18:33:57.333

我有一个名为“UI-Editor”的 NetBeans 插件，它允许您自定义任何 Swing 属性，包括字体大小、颜色和类型。转到 Tools->Plugins 并搜索“UI-Editor”或转到此处：[http ://plugins.netbeans.org/plugin/55618/?show=true](http://plugins.netbeans.org/plugin/55618/?show=true)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-06T02:46:23.193

也不要忘记将字体更改为支持阿拉伯语的字体，例如 Arial，我不确定是否有人提到我刚刚尝试过

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-21T16:57:09.433

据我所知，没有办法做到这一点。jEdit (http://jedit.org) 也使用 Swing 并且 DOES 对所有字体进行字体替换 - 全局选项 > 文本区域中有一个“自动字体替换”复选框，以及首选字体列表。但是 jEdit 在其他方面不如 Netbeans 强大。

# iphone - 向滚动视图添加标签

> ID：12021950
> 
> 赞同：0
> 
> 时间：2012-08-18T20:19:00.667
> 
> 标签：iphone, ios, scrollview

我正在尝试将标签添加到滚动视图，然后设置滚动视图的 contentSize 以匹配所需的标签大小。问题是我似乎必须使 contentSize 大于标签的大小：

```
theScrollview = [[UIScrollView alloc] initWithFrame:CGRectMake(0,0,320,480)];
bodyLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320.0, 50.0)];
bodyLabel.textColor = [UIColor whiteColor];
bodyLabel.backgroundColor = [UIColor clearColor];
bodyLabel.textAlignment = UITextAlignmentLeft;
bodyLabel.text = event.description; <- basically some long ass text here
bodyLabel.font=[UIFont systemFontOfSize:16.0];

bodyLabel.numberOfLines = 0;
bodyLabel.lineBreakMode = UILineBreakModeWordWrap; 
```

在这里我想我得到了必要的标签大小来包含文本

```
CGSize size = [event.description sizeWithFont:bodyLabel.font constrainedToSize:CGSizeMake(bodyLabel.frame.size.width, 9500) lineBreakMode:bodyLabel.lineBreakMode];

frame = bodyLabel.frame; // to get the width
frame.size.height = size.height;    
bodyLabel.frame = frame; 
```

这里我将 contentSize 设置为标签的 Size，但是不够大，我需要将其设置为 bodyLabel.frame.size.height + 80 才能被滚动覆盖。

```
theScrollview.contentSize = CGSizeMake(bodyLabel.frame.size.width, bodyLabel.frame.size.height);
[theScrollview addSubview:bodyLabel]; 
```

感谢您提前提出任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:05:17.707

```
[theScrollview addSubView: bodyLabel]; 
```

# facebook - 如何获得转发以与 FQL 链接

> ID：12021951
> 
> 赞同：1
> 
> 时间：2012-08-18T20:19:05.363
> 
> 标签：facebook, facebook-graph-api, facebook-fql

伙计们，

我分享了链接[http://example.com/resource/1](http://example.com/resource/1)

然后，我在 Graph Explorer 中执行了 FQL 查询：

```
SELECT share_count, like_count, comment_count,
       total_count, commentsbox_count, comments_fbid, click_count
FROM link_stat
WHERE url ='http://example.com/resource/1' 
```

API 返回 JSON 数据：

```
{
  "data": [
    {
      "share_count": 4,
      "like_count": 0,
      "comment_count": 0,
      "total_count": 4,
      "commentsbox_count": 0,
      "comments_fbid": "10151084809523503",
      "click_count": 0
    }
  ]
} 
```

> “share_count”：4

此值为 true，发布的链接有 4 次转发。但是«"comment_count": 0» 不是真的，因为链接有 3 条评论。

1.  我发了链接。
2.  我的朋友两次转发了这个链接。
3.  我朋友的朋友转发了朋友墙上的链接。

我的链接和转发的链接有一些评论。我知道comments_count 在此页面上显示“评论小部件”的评论，但**我需要获取我的链接的所有评论或转发。**

如何与朋友的朋友一起获得所有转发？（不使用 graph.facebook.com/me/home 或 graph.facebook.com/me/feed）

还，

```
SELECT likes, tagged_ids, message_tags, description, app_id,
       post_id, actor_id, target_id, message, comments
FROM stream
WHERE filter_key in (
          SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed'
      ) AND is_hidden = 0 
```

这个查询也没有给我任何有用的数据（**我朋友的朋友的转发**）。

谢谢。

# sql - 连接两个空值的表

> ID：12021956
> 
> 赞同：1
> 
> 时间：2012-08-18T20:20:23.973
> 
> 标签：sql, sql-server, join

我有表格`Visit`，其中包含 , 等列`VisitID`，还有`PatientID`column 。在表中有列和（它们一起是我的主键）。一个处方可以有很多药物，所以会有类似的东西：`DoctorID``PrescriptionID``Prescription``PrescriptionID``DrugID`

处方ID：1 DrugID：38
处方ID：1 DrugID：278
处方ID：1 DrugID：7

在`Visit`表中将插入“1”值作为`PrescriptionID`。但是现在我不能用外键加入这两个表，因为不是每次访问都有处方，所以`PrescriptionID`可以为空，我有错误，列必须是主键或必须是唯一的。我怎样才能以另一种方式加入这些表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T23:24:21.747

您似乎在这里谈论两个不同的问题。

一个问题是，您希望在引用列中允许空值。这很简单，您只需要将列定义为可为空*并*作为外键。该键应该引用的是另一个问题，这将我们引向我在您的问题中可以看到的两个问题中的另一个。

关于列必须是主键或唯一的错误与引用表使用*单个*列来引用复合（由两列组成）键这一事实有关。而且您不能仅引用键的一部分，因为引用必须指向特定的*单行*，并且您的`Visit.PrescriptionID`值可能会引用多个（这是正确的，因为引用表中的行并不是真正的处方，但处方项目）。这就是为什么告诉您该列必须是主键或唯一的原因。

因此，我建议按如下方式更改您的架构：

1.  让您的`Prescription`表仅包含作为实体的处方。即使除了键之外没有其他属性，也让它存储在自己的表中：

    ```
    CREATE TABLE Presciption (
      PrescriptionID int
        IDENTITY  /* just an assumption */
        CONSTRAINT PK_Prescription PRIMARY KEY
    ); 
    ```

2.  您现在的`Prescription`表格应该重命名为`PrescriptionItem`or `PrescriptionDrug`，遵循您的单数名词命名约定。它的`PrescriptionID`列将是一个外键引用`Prescription.PrescriptionID`，如下所示：

    ```
    CREATE TABLE PresciptionDrug (
      PrescriptionID int NOT NULL
        CONSTRAINT FK_PrescriptionDrug_Prescription
        FOREIGN KEY REFERENCING Prescription (PrescriptionID),
      DrugID int NOT NULL
        CONSTRAINT FK_PrescriptionDrug_Drug
        FOREIGN KEY REFERENCING Drug (DrugID),
      CONSTRAINT PK_PrescriptionDrug
        PRIMARY KEY (PrescriptionID, DrugID)
    ); 
    ```

3.  现在你可以`Visit.PrescriptionID`像这样定义foreignon：

    ```
    ALTER TABLE Visit
    ADD CONSTRAINT FK_Visit_Prescription
        FOREIGN KEY REFERENCING Prescription (PrescriptionID)
    ; 
    ```

    如果您想为就诊提供可选的处方，请不要忘记确保该列可以为空。（可空外键在 SQL Server 中非常好。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T20:55:24.277

我认为表结构应该是

```
Visit (VisitID, Time, .....) --no prescriptionID
Prescription (PrescriptionID, ..... , VisitID) --VisitID as FK
PrescriptionDrugs(PrescriptionID, DrugID) -- Both columns as PK 
```

那么您的查询将是

```
SELECT v.VisitID FROM Visit v
LEFT JOIN Prescription p ON v.VisitID = p.VisitID
LEFT JOIN PrescriptionDrugs pd ON p.PrescriptionID = pd.PrescriptionID 
```

那会给你类似的东西

```
VisitID        PrescriptionID      DrugID
101            ABC                 Anti-Bio
101            ABC                 Asprin
102            BAC                 Anti-Bio 
```

意思是 2 种药物`Visit 101`和 1 种药物`Visit 102`

无论如何，使用您当前的架构，试试这个

```
select v.visitid, v.presid, p.drugid 
from visit v 
left join prescription p on v.presid = p.presid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T20:56:17.063

你问怎么做：

```
select *
  from Visit as V left outer join
    Prescription as P on P.PrescriptionId = V.PrescriptionId 
```

这将返回所有访问和任何适用的处方。没有处方的访问将导致没有处方数据的输出行。

# java - jsp中如何使用Link-Command

> ID：12021960
> 
> 赞同：0
> 
> 时间：2012-08-18T20:20:58.113
> 
> 标签：java, jsp

我是 jsp 新手并尝试使用链接命令。我有一个需要显示链接的页面。但是我被要求在一个部分的页面上只显示 3 个链接，然后提供一个“更多”链接。当用户点击更多时，它会将他们带到一个新页面，然后该页面将列出来自数据库的所有链接

假设数据库为用户选择的产品提供了 6 个链接，jsp 页面应该只链接 3 个和更多链接。单击更多将打开包含所有六个链接的完整页面

目前我能够在同一个jsp中显示来自数据库的所有链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:32:32.760

您可以使用 JavaScript 动态显示 3 个最后的链接，并在 jsp 生成时显示所有超过 3 个的链接的 CSS 类。

如果您真的想要两个页面，您可以发送帖子或获取参数来告诉页面显示所有链接或仅显示第一个链接。

# android - 在 Android ListView 中显示 AppIcon 和 appname

> ID：12021962
> 
> 赞同：2
> 
> 时间：2012-08-18T20:21:18.933
> 
> 标签：android, android-listview, drawable

我目前正在使用检索当前正在运行的应用程序列表的应用程序。我想在每个应用程序 Icon 前面显示当前正在运行的应用程序的名称。以下代码显示了应用程序图标的 appname 和可绘制对象。

```
 manager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
    pm = getPackageManager();
    lstRunning = (ListView) findViewById(R.id.lst_running);

    List<RunningTaskInfo> appsRunning =  manager.getRunningTasks(30);//running tasks 
    String[] runningApp = new String[appsRunning.size()];
    Drawable[] icons = new Drawable[appsRunning.size()];
    int j = 0;
    for (RunningTaskInfo r: appsRunning) {

        try {
            info = pm.getApplicationInfo(r.baseActivity.getPackageName(), PackageManager.GET_META_DATA);
        } catch (NameNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        runningApp[j] = pm.getApplicationLabel(info).toString();
        icons[j]=pm.getApplicationIcon(info); 
```

我将如何在列表的每一行中显示可绘制对象和应用程序的名称？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:35:32.533

您将需要创建一个自定义 ListView 适配器，该适配器提供带有 ImageView 和 TextView 的自定义布局。

[看这里](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:19:02.580

您可以在 listView 中使用 Spannable，这将让您在每一行中都有可绘制对象。

或者创建自己的列表视图，每行都有 ImageView 和 TextView ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T04:01:39.510

看起来您需要创建一个自定义 ListView，每行包含应用程序图像和应用程序名称。此链接[自定义 ListView 与图像和文本](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)提供了一种简单而美观的方式。您可以轻松自定义 ListView 的布局，使其外观和感觉更好。我希望这有帮助。

# database-design - 数据库中的员工部门关系

> ID：12021963
> 
> 赞同：4
> 
> 时间：2012-08-18T20:21:20.593
> 
> 标签：database-design, relational

我正在为 SCM 设计一个关系数据库（作为为企业设计信息系统的一部分）。但是当涉及到员工和部门之间的关系时，我就遇到了一些麻烦。

我设计了以下实体：

*   `Employee`( **ID** , Fname , Mname , Lname , Sex , Phone , Address , Hiring date , .. etc )
*   `Department`（**身份证**，姓名）

并且由于关系是一对多的（每个员工都应该为 - 并且只有一个 - 部门工作，而每个部门都有很多员工），我添加`Department ID`了`Employee`. 但问题是如何表示`MANAGE`关系（一对一）。

设计一个我们称之为 : 的新关系是否有效，`Employee_manage_Department`它的属性是 ( `Employee ID , Department ID`)，其中两列都是主键的一部分？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:29:53.703

是的，但是由于公司中员工的角色（生命）时间有限，我将添加两个新的 DateTime 列，DATE_FROM 和 DATE_TO，使 DATE_FROM 成为组合主键的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T04:23:43.770

由于经理与部门的关系是 1:1，您可以简单地将 a 添加`Manager ID`到部门表中，这将充当引用员工表的外键：

![在此处输入图像描述](../Images/c1bfac88a05c2935ccea50c7e580de8e.png)

这引入了循环依赖，阻止了新数据的插入，可以通过以下方式之一解决：

*   推迟循环 FK 之一（如果 DBMS 支持它）。
*   使`Manager ID`NULL-able。如果您需要支持无经理部门的概念，您可能无论如何都需要这样做。

顺便说一句，这允许一个部门由来自不同部门的员工管理。如果这是不可取的，您将需要使用标识关系，以便*相同*的部门 ID 可以来回传播：

![在此处输入图像描述](../Images/e45efb5624f3c67254d01657560981cd.png)

* * *

注意：单独的`Employee_manage_Department`表格适用于建模 M:N 关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T09:59:17.843

部门经理是否始终是在该部门工作的员工之一？如果答案是肯定的，那么 Employee 表中的布尔型 MnagerFlag 就足够了。

您将需要声明一个约束或强制执行一个规则，以防止一个部门中的多个员工设置此标志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T20:29:54.930

不，我不认为这是必要的，如果员工将并且只能属于一个部门，但如果员工可以拥有多个部门，那么你可以继续......如果你想保留工作人员的从和离职日期我认为你可以

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T20:25:49.020

`Employee.department_id`应该是`foreign_key`表的a`Department`并且是唯一且非空的。这满足你的约束`One Employee has one department`和`One department can have many employees`

# android - Android：我可以直接链接到 Google Play 上应用页面的评分标签吗

> ID：12021977
> 
> 赞同：1
> 
> 时间：2012-08-18T20:24:15.963
> 
> 标签：android, hyperlink, google-play

我可以直接链接到 Google Play 应用页面的评分标签吗？

如果是，网址是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:31:07.907

您无法链接到 Google Play 上的评分标签（如果有）。您唯一能做的就是链接到应用程序的页面，并在屏幕上添加一个关于如何评价应用程序的 1 句说明（例如“向下滚动并单击'查看'......”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:26:40.203

您只能链接到应用程序、发布者、集合或搜索结果。所有其他人都无法直接链接到。

[您可以在文档](http://developer.android.com/distribute/googleplay/promote/linking.html)中找到如何链接到这些以及哪些*是*不可能的。

# java - Java - 没有输入时扫描仪不会暂停

> ID：12021978
> 
> 赞同：0
> 
> 时间：2012-08-18T20:24:17.803
> 
> 标签：java, servlets, network-programming, java.util.scanner

我在本地码头下运行客户端和 servlet。当我在客户端阅读消息时，我会：

```
in = new Scanner(conn.getInputStream());
StringBuffer messageBuffer = new StringBuffer();
while (in.hasNext()) {
   messageBuffer.append(in.next()).append(" ");
} 
```

我希望当没有来自 servlet 的数据时，它应该冻结在

```
while (in.hasNext()) 
```

相反，我最终得到的是空的 messageBuffer，我必须处理它并一次又一次地调用该方法，直到我收到一条消息。为什么会这样？如何让它在 while 语句处停止并等到有数据进入？

以下是 url 连接的启动方式（一次，在客户端构造函数中）：

```
try {
        url = new URL("http://localhost:8182/stream");
        conn = (HttpURLConnection) url.openConnection();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException ioE) {
        ioE.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:38:27.323

来自扫描仪文档：

> next() 和 hasNext() 方法及其原始类型的伴随方法（例如 nextInt() 和 hasNextInt()）首先跳过与分隔符模式匹配的任何输入，然后尝试返回下一个标记。hasNext 和 next 方法都可能阻塞等待进一步的输入。hasNext 方法是否阻塞与其关联的 next 方法是否会阻塞没有关系。

它说它可能会阻塞，但它不是api的一部分，它取决于您扫描的下划线实现。

无论如何，您需要通过以下方式自己实现等待：

```
while (!in.hasNext() && !stop){
   sleep();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T20:46:45.793

javadoc 说明了这一点`Scanner.hasNext()`并且`Scanner.next()` *可能会*阻塞。这真的取决于底层`InputStream`。如果是这样的话，我个人永远不会使用 a`Scanner`从套接字读取。

`InputStreamReader`一种更理智的方法可能是使用由 a 包裹的 an `BufferedReader`。另外值得一提的是你应该使用`StringBuilder`而不是`StringBuffer`除非你需要线程安全。

```
BufferedReader br = 
    new BufferedReader(new InputStreamReader(conn.getInputStream()));
StringBuilder sb = new StringBuilder();
String input = null;
while ((input = br.readLine()) != null)
{
    sb.append(input).append(" ");
} 
```

请注意`readLine()`，这可能会或可能不适合您的需求，具体取决于您收到的内容。它还假设连接的另一端在发送完成后将关闭。您可能希望改用其中一种`read()`方法并相应地进行解析。

**编辑从下面的评论中添加：**这实际上是阻塞读取在 Java 中的工作方式。这是一个完整的例子：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

public class App 
{
    public static void main( String[] args ) throws MalformedURLException, IOException
    {
        URL url = new URL("http://www.google.com");

        HttpURLConnection conn = (HttpURLConnection) url.openConnection();

        BufferedReader br = 
            new BufferedReader(new InputStreamReader(conn.getInputStream()));
        StringBuilder sb = new StringBuilder();
        String input = null;
        while ((input = br.readLine()) != null)
        {
            sb.append(input).append(" ");
        }

        System.out.println(sb.toString());

    }
} 
```

输出（此处为简洁起见，但它是整个页面）：

```
<!doctype html><html itemscope="itemscope" itemtype="http://schema.org/WebPage"><head> ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T20:35:23.900

编辑：

尝试使用 for 循环而不是 while 循环，其中范围将从 0 到（长度 -1）。您必须使用 while(in.hasNextLine()) 查找长度并将长度计数器放入其中。完成填充 messageBuffer（使用 .close()）后，不要忘记关闭扫描仪。试试看。它应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T22:50:25.777

根据我的经验，我一直试图避免阻塞，因此避免对 hasNext() 使用 Scanner 方法。

相反，我使用了 InputStream。InputStream，您在代码中使用过：

```
conn.getInputStream(); 
```

然后，您可以使用 InputStream 方法**available()**来查看是否有任何信息通过。

因此，对于您的代码，我建议：

```
InputStream inStream = conn.getInputStream();
in = new Scanner(inStream);    
StringBuffer messageBuffer = new StringBuffer();    
while (in.available() <= 0)
{   
 try{
    Thread.sleep(100);
}
catch(InterruptedException e){}
}
messageBuffer.append(in.next()).append(" "); 
```

# php - Symfony2 和 SonataMedia：当前字段未链接到管理员

> ID：12021983
> 
> 赞同：6
> 
> 时间：2012-08-18T20:25:20.867
> 
> 标签：php, symfony, symfony-sonata

最近几天我一直在努力让 SonataMedia 与 Symfony 2.0.16 一起工作……但没有成功。谷歌搜索似乎没有多少人使用该捆绑包，或者有一个我不知道的教程或操作方法，因为我没有得到太多关于我到目前为止得到的错误消息的信息。

无论如何，我最后一次尝试给出了下一条错误消息：

```
The current field `path` is not linked to an admin. Please create one for the target entity : `` 
```

“路径”是用于保存文件图像（相对）路径的字段。

**附件Admin.php**

```
<?php

class AttachmentAdmin extends Admin
{
    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->add(
                'path',
                'sonata_type_collection',
                array(
                    'required' => true
                ),
                array(
                    'edit' => 'inline',
                    'inline' => 'table',
                    'sortable' => 'position',
                    'targetEntity' => 'Application\Sonata\MediaBundle\Entity\GalleryHasMedia',
                    'link_parameters' => array(
                        'context' => 'attachment'
                    )
                )
            )
            ->add('notes', 'textarea', array('required' => false))
        ;
    }

    // other methods
} 
```

**附件.php**

```
<?php

class Attachment
{
    // other properties

    /**
     * @var string $path
     *
     * @ORM\Column(name="path", type="string", nullable=false)
     * @ORM\ManyToOne(targetEntity="Application\Sonata\MediaBundle\Entity\GalleryHasMedia", cascade={"persist"})
     */
    protected $path;

    // other methods

    /**
     * Set path
     *
     * @param string $path
     */
    public function setPath($path)
    {
        $this->path = $path;

        foreach ($path as $ent) {
            $ent->setAttachment($this);
        }
    }

    /**
     *
     * @return string
     */
    public function getPath()
    {
        return $this->path;
    }

    /**
     *
     * @param \Application\Sonata\MediaBundle\Entity\GalleryHasMedia $path
     */
    public function addPath(\Application\Sonata\MediaBundle\Entity\GalleryHasMedia $path)
    {
        $this->path[] = $path;
    }
} 
```

**GalleryHasMedia.php**

```
<?php

class GalleryHasMedia extends BaseGalleryHasMedia
{

    /**
     * @var integer $id
     */
    protected $id;

    /**
     *
     * @var File
     */
    private $attachment;

    /**
     * Get id
     *
     * @return integer $id
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     *
     * @param \Mercury\CargoRecognitionBundle\Entity\Attachment $attachment
     * @return \Application\Sonata\MediaBundle\Entity\GalleryHasMedia
     */
    public function setAttachment(\Mercury\CargoRecognitionBundle\Entity\Attachment $attachment = null)
    {
        $this->attachment = $attachment;

        return $this;
    }

    /**
     *
     * @return \Application\Sonata\MediaBundle\Entity\File
     */
    public function getAttachment()
    {
        return $this->attachment;
    }
} 
```

**服务.yml**

```
 mercury.cargo_recognition.admin.attachment:
        class: Mercury\CargoRecognitionBundle\Admin\AttachmentAdmin
        tags:
            - { name: sonata.admin, manager_type: orm, group: General, label: Attachments }
        arguments: [ null, Mercury\CargoRecognitionBundle\Entity\Attachment, "MercuryCargoRecognitionBundle:AttachmentAdmin" ] 
```

感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T23:40:19.503

`GalleryHasMedia`只是一个疯狂的猜测，为实体创建一个管理类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-18T06:43:36.550

您需要像这样添加 admin_code

```
$formMapper
        ->add(
            'path',
            'sonata_type_collection',
            array(
                'required' => true
            ),
            array(
                'edit' => 'inline',
                'inline' => 'table',
                'sortable' => 'position',
                'targetEntity' => 'Application\Sonata\MediaBundle\Entity\GalleryHasMedia',
                'link_parameters' => array(
                    'context' => 'attachment'
                ),
                'admin_code' => 'sonata.media.admin.gallery_has_media' // this will be your admin class service name
            )
        )
        ->add('notes', 'textarea', array('required' => false))
    ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-18T07:56:24.220

您正在尝试在***同一实体类***“**附件”的“*****路径***”字段上应用“ **sonata_type_collection** ” ，而“ **sonata_type_collection** ”用于收集不同类的嵌入形式。因此，您将不得不再添加一个实体类，假设为“ **AttachmentCollection** ”，并且在这个特定**的 AttachmentsCollection 的**管理类中，您应该嵌入“ ***Attachment*** ”类 admin .. 示例：

 *******```
class AttachmentsCollection extends Admin
{
protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
   ->add('attachments', 'sonata_type_collection', array(
                        'required' => false,
                        'type_options' => array('delete' => true)
                    ), array(
                        'edit' => 'inline',
                        'inline' => 'table',
                        'sortable' => 'position',
                    ));
     }
  } 
```

并且不要忘记在“ **AttachmentsCollection** ”和“ **Attachments ”之间进行“****一对多**”或“**多对多**”映射，假设一个“ **AttachmentsCollection** ”有很多“ **Attachments** ”对象。

 ******* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-16T00:44:44.437

看起来您需要做的是将参数`admin_code`中的管理部分 ( `mercury.cargo_recognition.admin.attachment`)的名称传递给方法。`$fieldDescriptionOptions``add()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-30T11:05:01.620

这个问题已经很老了，我仍然会添加一些关于如何解决这个问题的内容，以帮助其他可能遇到它的人。根本问题是 $path targetEntity("Application\Sonata\MediaBundle\Entity\GalleryHasMedia") 没有管理类。

要解决它，请为您的 targetEntity 添加一个管理类：

```
class GalleryHasMediaAdmin extends Admin
{
    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->add('attachment', 'file')
        ;
    }

    // other methods
} 
```

然后将该管理类添加到 services.yml

```
mercury.cargo_recognition.admin.galleryhadmedia:
    class: Mercury\CargoRecognitionBundle\Admin\GalleryHasMediaAdmin
    tags:
        - { name: sonata.admin, manager_type: orm, group: General, label: 'Gallery Has Media' }
    arguments: [ null, Mercury\CargoRecognitionBundle\Entity\GalleryHasMedia, "MercuryCargoRecognitionBundle:GalleryHasMediaAdmin" ] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-13T16:00:58.090

五年后，值得注意的是，“目标实体”本身在错误文本中似乎是空白的。我们得到一组反引号，而不是实体名称。

（我正在开发一个旧应用程序，现在遇到了类似的错误。我为我的实体生成了一个管理类并将其注册在正确的位置，看起来该应用程序无法确定我的目标实体*是*什么- - 默认情况下它会阻止它找到相关的管理类。我有点把头发扯下来了，明天可能会在它上面放一个赏金。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-31T10:34:38.073

如果您的 GalleryHasMedia 管理类尚未创建并且您尚未将服务代码放入 config.yml 文件中，请先执行此操作并重试。我有同样的问题并以这种方式解决。*************

# jquery - css 分步向导，如菜单

> ID：12021987
> 
> 赞同：1
> 
> 时间：2012-08-18T20:25:43.963
> 
> 标签：jquery, html, css

我正在尝试为应用程序构建分步菜单（就像向导一样）。我在网上找到[**了一些**](http://www.emirplicanic.com/css/css-step-by-step-menu-wizard-style)对我来说似乎很完美的代码。

我为代码创建了一个[**JS Fiddle**](http://jsfiddle.net/9CsDr/1/)。

问题是该示例基于对 IE 不可用的 before 和 after 选择器，并且在 IE 中不起作用。

我知道 jQuery 之前和之后的功能可能使它适用于 IE，但我真的没有太多关于 jQuery 的专业知识能够找到解决方案。

我该怎么做才能使这种菜单在所有浏览器中始终如一地工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:32:28.213

事实上，`:before`and`:after`选择器所做的就是在应用它的元素之前或之后插入内容。对于较旧的浏览器，您确实可以求助于 js，但是您的一些访问者仍然看不到它，因为他们可能禁用了 js。

例如，您可以直接在 html 中插入所需的内容并为其指定一个特定的`.a-after`类`.a-before`。然后，您可以将样式应用于那些而不是`:before`and `:after`。

因为有点难以解释，所以我冒昧地用我的建议更新了你的小提琴。[http://jsfiddle.net/9CsDr/2/](http://jsfiddle.net/9CsDr/2/)这在旧版浏览器中也应该可以正常工作，因为它不再使用 :before en :after 了。它不会使您的代码更漂亮，但它可以工作......

我确实同意大卫艾伦的观点，在这种情况下，使用背景图像也是我的选择！

# validation - 播放框架 2：一种模型方法

> ID：12021990
> 
> 赞同：1
> 
> 时间：2012-08-18T20:26:28.183
> 
> 标签：validation, model-view-controller, model, playframework, playframework-2.0

**问题：**

在使用 play framework 编程时，我觉得我遇到了与过去很多次相同的问题，因为我想在不同的用例中添加、更新或使用关于某个模型的不同数据，所以我**创建了多个相同类型的**模型.

让我解释一下，让我们考虑一个示例，其中我有 2 个不同的视图：**注册**和**登录**

我将有以下用户模型：

```
/**
 * Example User class (simple annotations for demo purposes).
 * 
 */
@Entity
public class User {

    @Id
    public Long id;

    @Required
    public String email;

    @Required
    public String password;

    @Required
    public String firstName;

    @Required
    public String lastName;

} 
```

**在注册的情况下：**我将在 register.scala.html 中拥有所有相应的字段：*电子邮件、密码、名字、姓氏*- 因为我在注册时将需要它们，对吗？

但我也想使用 repeatPassword 字段来确认用户是否正确输入了密码，所以我会将其添加到 User 模型中：

```
@Required
@Transient
public String repeatPassword; 
```

好的，然后我将扩展此模型以重复密码确认检查，以便在提交表单时更正我的“自动”验证，如下所示：

```
public String validate() {
if(!password.equals(repeatPassword)) {
    return "Passwords doesn't match.";
}
    return null;
}
} 
```

所以即使现在我也会有一个额外的属性repeatPassword，它不会保存到数据库中，而是在注册时使用。

**问题 1：**我们的模型开始逐渐变得混乱。

**在登录的情况下：**我想使用相同的模型，因为它是一个正在尝试登录的用户，对吧？但我只需要*电子邮件和密码，而不是所有字段。*

**问题#2：**我的用户模型不能在登录中使用，因为它已经定制为在注册中使用 - 我需要移动 repeatPassword 和 validate() 方法来分离 UserRegistation 模型，加上重复的 firstName lastName 等字段或混合使用这两个 User和注册中的 UserRegistration 模型并将两种不同的表单呈现给相同的注册视图 = 令人困惑。

**问题#3：**我的登录页面不能使用用户模型，因为它有注释，如果我不添加所有必要的字段，如名字、姓氏等。我会得到错误。同样，我需要创建单独的 UserLogin 模型只是因为我想登录工作。？下面的例子：

```
public class UserLogin {

    @Required
    public String email;

    @Required
    public String password;

    public String validate() {
        if(User.authenticate(email, password) == null) {
            return "Invalid user or password";
        }
        return null;
    }

} 
```

非常快，我将有 3 个不同的模型来表示用户，其中一个被持久化到数据库中，另外两个用于在我们在模板端完成登录和注册功能时验证错误。

所以我的问题是：我到底应该如何开始解决这个烂摊子？代码复杂性正在快速上升:) 我是否应该创建单独的 models.template 和 models.database 包，其中模板模型只是注释中的模型，并且在没有错误的情况下我开始填充真实模型，然后将其信息保存或更新到数据库？我迫切需要你们的答案，**我们可以制作一种模型方法吗？**提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:41:17.027

我将从最后开始：您不需要为`changing password`or使用整个模型`loggin-in`（也不需要创建单独的“非持久”子模型），虽然`Form<YourModel>`在填充大对象时很有用，但您可以只是避免它们并依靠普通`DynamicForm`。

在这种情况下，它当然不会使用`constraints`在模型字段中添加注释，但您可以手动验证它们。

例如：在注册表单中，您可以检查诸如、、之类的`@Required`字段是否存在（提示：也添加和约束），**但**您应该从字段中删除注释。`email``firstName``lastName``MinLength``MaxLength`**`@Required``password`**

 **接下来在检查表单**是否没有**任何错误之后，您可以检查它们是否相同`password`并且`repeatedPassword`它们相同，您还可以添加一些个人（建议）`strength check`- 很可能模型中的注释不可能。

在记录表单的情况下，事情变得更加容易：使用`DynamicForm`数据只是尝试找到现有`User`的给定结果，`password`如果结果`null`意味着，用户不存在或`password`无效。

[最后，提示： Joscha Feth 提供了可用于 Play 2.0 的](http://joscha.github.com/play-authenticate/)即用型、全栈[`authentication`和`authorisation`](http://joscha.github.com/play-authenticate/)模块（我非常支持这种解决方案。）**

# android - 如何始终从主活动启动应用程序，即使在使用同步设置中的主页按钮关闭后也是如此

> ID：12021994
> 
> 赞同：1
> 
> 时间：2012-08-18T20:26:58.707
> 
> 标签：android

场景：
当按下按钮然后退出应用程序时，我的应用程序会切换 wifi 状态。如果在禁用 wifi 时启用了后台数据，则应用程序允许用户通过启动 Sync Settings 活动 startActivity(new Intent(Settings.ACTION_SYNC_SETTINGS)) 来禁用 bg 数据；
这很好用，除了当用户通过按下主页按钮从同步设置活动返回主屏幕时，应用程序在重新打开时仍将显示同步设置，而不是主要活动。

我该怎么做才能在我的应用程序打开时从主要活动开始，无论它以何种方式或在何处关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:33:13.203

您应该使用 no history 标志。您想要的是使用“无历史记录”标志开始所有活动。所以当APP关闭并再次从主页按钮返回时，所有活动（除了主要活动）都被销毁

因此，假设您的主要活动要开始活动 A

```
Class ourClass = Class.forName("ActivityA");    
Intent ourIntent = new Intent(this, ourClass);  
ourIntent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);//This is the flag I am talking about
startActivity(ourIntent); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T22:52:56.313

在除主要 add-> 之外的每个活动中

```
 @Override
 public void onPause() {
         finish();
     super.onPause();

 } 
```

现在，当您的应用在任何活动上暂停时，它将完成它。这也意味着当从一项活动转到下一项活动时，您将无法按返回按钮返回一项活动，它始终会将您带到主要活动。