# StackOverflow 问答 10493000-10493999

# tapestry - Tapestry5 - 在消息目录中使用 HTML 标签

> ID：10493000
> 
> 赞同：1
> 
> 时间：2012-05-08T05:23:10.460
> 
> 标签：tapestry

在消息目录文件中，是否可以使用 HTML 标记？它似乎在页面上按字面意思显示文本。

如果不可能，有没有更好的方法在没有 c 的段落中间包含嵌入的链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:23:46.887

也许您可以使用 OutputRaw 组件来实现这一点：

```
<t:outputraw t:value="message:messagename" /> 
```

或者您可以制作自己的绑定前缀，例如`messagehtml:`

关于如何添加自己的绑定前缀的示例：

[http://wiki.apache.org/tapestry/Tapestry5HowToAddMessageFormatBindingPrefix](http://wiki.apache.org/tapestry/Tapestry5HowToAddMessageFormatBindingPrefix)

# nginx - 当用户中止请求时，如何让 PHP-FPM 进程终止？(Nginx)

> ID：10493001
> 
> 赞同：5
> 
> 时间：2012-05-08T05:23:13.937
> 
> 标签：nginx, request, abort, php

我知道 Nginx 与 PHP-FPM 进程无关，但我更希望 PHP-FPM 进程在用户中止时死亡，这样它就不会继续做不必要的事情或浪费资源。对于 PHP-FPM/Nginx，`trigger_error`无论用户是否中止，都会发生：

```
<?php

sleep(30);
trigger_error('Still happened?');

?> 
```

如何为 PHP-FPM 进行用户中止？（如果可能的话）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-11T20:28:35.343

这不是由 php-fpm 实现的，更多信息[在这里](https://stackoverflow.com/questions/20251224/nginx-php-stop-process-at-canceled-request)。

设置`ignore_user_abort(FALSE)`仅在 PHP 通过套接字发送数据时有效，而不是在它忙于计算响应时。

理想情况下，它应该在 php-fpm 中实现，但我认为这不会很容易，因为 PHP 大多是单线程的。

在紧急情况下，您可以杀死所有连接断开的 php-fpm 进程。假设您在 localhost:9000 上监听 php-fpm，这将起作用：

```
netstat -ntp | grep 127.0.0.1:9000 | grep php-fpm | grep CLOSE_WAIT |\
awk ' { print $7; } ' | cut -d/ -f1 | while read pid; do
    echo "Killing php-fpm/$pid because client has closed connection"
    kill $pid
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-27T11:00:33.283

> `nginx`在尝试设置 PHP 脚本的行为之前，您必须检查您的配置。

[@YAAK](https://stackoverflow.com/a/12920528/3088045)链接的设置并不*总是*适用于`nginx`. 在我的实际情况下，无论您在 PHP 端做什么，都无法停止脚本。

使用*nginx fastcgi*参数`fastcgi_ignore_client_abort`（默认设置为`off`）可能会有所帮助。

此外，手动解决方案（仅用于*开发*环境）是执行（在*Linux*上）`sudo service php-fpm restart`：，这样运行脚本的工作进程将被杀死（**注意：**这将杀死*所有*工作人员或其他正在运行的服务）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T17:48:01.807

> 您可以决定是否希望客户端断开连接导致脚本中止。

根据 PHP 手册：[连接处理](http://php.net/manual/en/features.connection-handling.php)

要设置此行为，请使用[`ignore_user_abort`](http://www.php.net/manual/en/function.ignore-user-abort.php)

[`ignore_user_abort(FALSE);`](http://www.php.net/manual/en/function.ignore-user-abort.php)客户端断开连接后将中止 PHP 脚本的运行。

[`ignore_user_abort(TRUE);`](http://www.php.net/manual/en/function.ignore-user-abort.php)将忽略客户端断开连接并继续运行脚本。

在第二种情况下，您可能还想[`set_time_limit`](http://php.net/manual/en/function.set-time-limit.php)根据您的需要使用给您的脚本足够的时间来完成任务。

此设置已在`PHP-FPM/nginx`环境中成功测试。

# java - 硒网格 2 的工作原理是什么？

> ID：10493004
> 
> 赞同：0
> 
> 时间：2012-05-08T05:23:41.177
> 
> 标签：java, excel, selenium-webdriver, selenium-grid

我正在研究一个关键字驱动的框架，它的数据写在 excel 表中。每行代表一个测试用例。最初，读取包含数据的表。我如何将每一行并行分配给硒。我想知道，如何并行运行 excel 表的行。对于没有 junit 和 testng 的框架，如何使 selenium 网格并行工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:46:44.680

TestNG 是此类测试的最佳选择。您可以阅读有关`@DataProvider`属性的更多信息。您还必须在 TestNG.xml 中添加属性 parallel="tests" 才能并行运行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:14:24.907

如果你不能使用 TestNG 或 jUnit，你只需要使用你自己的多线程运行器。这将变得更加困难，但它肯定是可行的。无论如何，这就是所有这些其他工具都会为你做的事情。

# php - 在我更新我的通知计数后，该框有一个额外的空间。我怎样才能删除这个？

> ID：10493013
> 
> 赞同：0
> 
> 时间：2012-05-08T05:24:42.940
> 
> 标签：php, javascript, html, css, ajax

最好添加一张图片来说明我的意思。在我单击通知将其从我的通知计数中删除后，我想摆脱出现的数字左侧的额外空间。

![后](../Images/603b6d62f5f7397f0fbe3344cd8bf5f5.png)

![之前](../Images/e08d94f16f92549e038482eede2cd9e7.png)

这是我的代码。

```
<?php echo "<span id='notification_count'>".trim(count($notifications))."</span>;"?> 
```

这是将通知标记为已读并更新计数的 ajax。

```
<script>
function mark_notification_read(id){
$.post('../php/notification/mark_notification_read.php',{id:id},function(data){
data = $.trim(data);
    if(data == 'success'){
    notification_count();
    }else{
    alert(data);
    }
});
}
function notification_count(){
$.post('../php/notification/notification_count.php',{},function(data){
    $('#notification_count').text(data);
});
}
</script> 
```

这是从 notification_count.php 插入到新计数中的文本

```
$notifications=show_notifications($_SESSION['user_id']);
echo trim(count($notifications)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:42:00.610

我真的很高兴它有帮助

```
 .html(data) 
```

# javascript - JavaScript 方法 array.forEach 在 Chrome 中是否有效？

> ID：10493017
> 
> 赞同：7
> 
> 时间：2012-05-08T05:25:12.960
> 
> 标签：javascript, google-chrome

[这是我的演示。](http://jsbin.com/ekivuf/2/edit#javascript,html,live)

我正在尝试让 JavaScript`forEach`方法在 Google Chrome 中工作。
[Caniuse](http://caniuse.com/#search=foreach)没有太大帮助。:(

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T05:38:03.557

将 NodeList 转换为数组：

```
nodes = Array.prototype.slice.call(nodes); 
```

然后你就可以使用`.forEach()`它了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T05:30:16.173

`document.querySelectorAll`不返回数组，而是一个`NodeList`没有方法“forEach”的对象。

错误消息显示：

```
Object #<NodeList> has no method 'forEach' 
```

检查[这篇文章](https://developer.mozilla.org/En/DOM/NodeList)，它解释了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-10T03:37:50.660

只需使用一些现代 JavaScript 转换它：

```
let paragraphs = Array.from(nodes)
paragraphs.forEach(paragraph => console.log(`This is the paragraph: ${paragraph}`); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-16T06:35:15.183

是的，您可以`forEach`在数组上调用。

在您的情况下，数据可能不在数组中，它可能是一个`HTMLCollection`，这就是您看到此错误的原因，您可以通过将数据更改为来解决此问题`Array`，如下所示：-

```
// HTMLCollection
const allJobs = document.getElementsByClassName('component_4d072');

// Array
const arrayAllJobs = [...allJobs];

// and now you can run
arrayAllJobs.forEach(jobs => console.log(jobs)); 
```

# c# - 如果不为 COM 互操作性注册二进制文件会怎样？

> ID：10493021
> 
> 赞同：0
> 
> 时间：2012-05-08T05:25:40.760
> 
> 标签：c#, windows, com

我有一些用 C# 编写的二进制文件，其中在他们的 assemblyinfo.cs 文件中包含 COM 互操作的 guid。在安装二进制文件时，如果我没有注册（在注册表中）这些用于 COM 互操作的二进制文件，我会面临什么后果？我怀疑这在不同的平台上会有所不同，例如 windows 7、vista、windows XP、windows server 2003 和 2008 等。提前感谢 xplaining...

# python - 为什么我不能用另一个函数替换 Python 对象的 __str__ 方法？

> ID：10493025
> 
> 赞同：5
> 
> 时间：2012-05-08T05:26:03.377
> 
> 标签：python

这是代码：

```
class Dummy(object):
    def __init__(self, v):
        self.ticker = v

def main():
        def _assign_custom_str(x):
            def _show_ticker(t):                
                return t.ticker
            x.__str__ = _show_ticker
            x.__repr__ = _show_ticker
            return x

    a = [Dummy(1), Dummy(2)]

    a1 = [_assign_custom_str(t) for t in a]
    print a1[1]
    # print a1[1].__str__ # test to if orig __str__ is replaced 
```

我希望看到这样的输出

```
2 
```

但是，相反，我看到了标准表示：

```
<__main__.Dummy object at 0x01237730> 
```

为什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-08T05:31:02.517

魔术方法只有在[定义在 type 上而不是在 object 上时](https://docs.python.org/3/reference/datamodel.html#special-method-lookup)才能保证有效。

例如：

```
def _assign_custom_str(x):
        def _show_ticker(self):                
            return self.ticker
        x.__class__.__str__ = _show_ticker
        x.__class__.__repr__ = _show_ticker
        return x 
```

但请注意，这将影响所有`Dummy`对象，而不仅仅是您用于访问该类的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T05:43:34.900

如果你想`__str__`为每个实例进行自定义，你可以调用另一个方法 _str in `__str__`，然后自定义 _str：

```
class Dummy(object):
    def __init__(self, v):
        self.ticker = v

    def __str__(self):
        return self._str()

    def _str(self):
        return super(Dummy, self).__str__()

def main():
    a1 = Dummy(1)
    a2 = Dummy(2)

    a1._str = lambda self=a1:"a1: %d" % self.ticker
    a2._str = lambda self=a2:"a2: %d" % self.ticker

    print a1
    print a2    

    a1.ticker = 100
    print a1

main() 
```

输出是：

```
a1: 1
a2: 2
a1: 100 
```

# html - 您可以在未连接到 wifi 时让您的网络应用程序 html5 脱机运行吗？

> ID：10493028
> 
> 赞同：2
> 
> 时间：2012-05-08T05:26:14.067
> 
> 标签：html, html5-apps

我已经完成了我的第一个 Web 应用程序，并且我将它用于离线模式的 cache.manifest。问题出在我所在的地区，我没有现成的 3G 可用，当我运行我的应用程序时，速度很慢。是否有解决方案告诉您的浏览器在未连接到 wifi 时从缓存中运行？

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:51:20.700

您无法直接检测到互联网检测方法，但您可以尝试测试连接速度并根据结果进行操作？

这是另一个可能对您有所帮助的答案：[如何在 Javascript 中检测互联网速度？](https://stackoverflow.com/questions/5529718/how-to-detect-internet-speed-in-javascript)

尽管如此，我的印象是应用程序缓存文件将在任何一种情况下使用，并且任何缓存的文件都会被加载。它尝试下载它们的唯一时间是如果应用程序缓存文件已更新，提示刷新所有缓存文件本身......

# iphone - 将活动指示器添加到另一个视图的另一个视图时发生内存泄漏

> ID：10493029
> 
> 赞同：2
> 
> 时间：2012-05-08T05:26:16.657
> 
> 标签：iphone, ios, ios4, cocos2d-iphone

我正在使用 Xcode 4.3.2 开发启用 ARC 的 iPhone 应用程序。在项目中导航时没有崩溃，但是当我使用泄漏工具看到项目执行时，它显示 malloc 泄漏可能有很多次我不知道要解决...

我在项目中使用了以下编码..主题是在加载数据时用另一个视图隐藏一个视图.....

```
[NSThread detachNewThreadSelector: @selector(StartActivityIndicator) toTarget:self withObject:nil];

-(void)StartActivityIndicator
{ 
    hideView= [[UIView alloc] initWithFrame: CGRectMake(0,0,320,480)];
    activityIndicator= [[UIActivityIndicatorView alloc] initWithFrame: CGRectMake(148,188, 24, 24)];
    hideView.backgroundColor =[UIColor blackColor];
    hideView.alpha=0.8;
    [hideView addSubview:activityIndicator];
    [self.view addSubview:hideView];
    [activityIndicator startAnimating];  

} 
```

此编码或此编码的任何替代方法是否有任何错误..

当启用 ARC 时，我们必须处理泄漏与否.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:35:05.927

当您使用 ARC 时，您需要将代码放入：

**@autoreleasepool {

}**

```
-(void)StartActivityIndicator { 
@autoreleasepool {
    hideView= [[UIView alloc] initWithFrame: CGRectMake(0,0,320,480)]; 
    activityIndicator= [[UIActivityIndicatorView alloc] initWithFrame: CGRectMake(148,188, 24, 24)]; 
    hideView.backgroundColor =[UIColor blackColor]; hideView.alpha=0.8;
    [hideView addSubview:activityIndicator]; 
    [self.view addSubview:hideView];
    [activityIndicator startAnimating];
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:30:15.207

您无需使用线程来显示动画活动指示器。代替

```
[NSThread detachNewThreadSelector: @selector(StartActivityIndicator) toTarget:self withObject:nil]; 
```

只需使用

```
[self StartActivityIndicator]; 
```

使用线程很容易导致问题，例如在主线程之外访问与 UI 相关的类和方法，或者使用声明为非原子的 setter，或者忘记添加自动释放池等等。除非必须，否则不要去那里。如果必须，请使用大型中央调度而不是创建自己的线程。:)

# hadoop - 在hadoop中执行作业时为映射器和reducers设置什么值以及如何决定它？

> ID：10493034
> 
> 赞同：0
> 
> 时间：2012-05-08T05:26:38.883
> 
> 标签：hadoop, mapper, reducers

我在 hadoop 集群上运行 Hive 作业。我才知道如果你只专注于不同的行为映射器和减速器，性能将会得到改善/改变。但是直到现在我还没有玩过它。直到没有，我只是使用 Hive 并使用默认映射器和减速器执行查询？

正如我对映射器和减速器的了解，我担心要设置映射器和减速器的值，以便性能会有所不同。我还想是只需要设置为主节点还是我们必须为所有节点设置？

任何对此有想法的人请向我解释有关此的情况。

在执行作业时我们还需要设置哪些其他参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:57:27.490

据我所知，映射器的数量并不是您为每个工作设置的。它是由 JobTracker 计算的，考虑到每个节点的插槽数（您在 MapRed-site.xml 中设置的集群范围、您拥有的拆分数和其他作业（如果您使用 Fair of Capacity Scheduler - 您的队列参数也是考虑到） 。reducer
的数量会影响结果，您可以为每个作业设置它。通过以下命令
set mapred.reduce.tasks=128

# bash - Wget 和 cURL 不适用于 Wikipedia

> ID：10493040
> 
> 赞同：0
> 
> 时间：2012-05-08T05:27:08.490
> 
> 标签：bash, unix, curl, wget

我正在尝试将特定维基百科文章的来源下载到我的计算机上。但是，wget 和 curl 工具不起作用！我不确定为什么。每当我输入类似`wget http://en.wikipedia.org/wiki/List_of_current_NFL_team_rosters`or`curl http://en.wikipedia.org/wiki/List_of_current_NFL_team_rosters`的内容时，我都会出现乱码（curl 和 wget 也是如此）。

我得到的输出的第一行：`??N?????g???????^??L??~???IR?OX/?џ??X???4????b???m??Jk??o߾5E_S???D?xT????y???>??b?C?g?B?#?}????ŏ?Hv?K?dڛ?L˿l?K??,???T?c????n?????F*???'???w??z??d??? ???Y1Id?z?:7C?'W2??(?%>?~ԫ?|~7??4?%qz?r???H?]??P?PH 77I??Z6~{z??UG?~???]?.?#?G?F\????ӓ???8??ߞ?`

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T05:33:44.440

```
curl --compressed http://en.wikipedia.org/wiki/List_of_current_NFL_team_rosters 
```

wget： http: [//www.commandlinefu.com/commands/view/7180/get-gzip-compressed-web-page-using-wget](http://www.commandlinefu.com/commands/view/7180/get-gzip-compressed-web-page-using-wget)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T05:42:57.100

您获得 gzip 数据的原因是因为默认情况下 Wiki 数据以 gzip 格式发送。如果您检查响应的标头（您可以在 Fiddler 之类的工具中执行此操作）

```
HTTP/1.0 200 OK
Date: Tue, 08 May 2012 03:45:40 GMT
Server: Apache
X-Content-Type-Options: nosniff
Cache-Control: private, s-maxage=0, max-age=0, must-revalidate
Content-Language: en
Vary: Accept-Encoding,Cookie
Last-Modified: Tue, 08 May 2012 02:33:41 GMT
Content-Length: 83464
Content-Type: text/html; charset=UTF-8
Age: 6415
X-Cache: HIT from cp1008.eqiad.wmnet
X-Cache-Lookup: HIT from cp1008.eqiad.wmnet:3128
X-Cache: MISS from cp1018.eqiad.wmnet
X-Cache-Lookup: MISS from cp1018.eqiad.wmnet:80
Connection: close
Content-Encoding: gzip 
```

标题中的最后一行是您所看到内容的线索。因此，您可以从 wiki 流式传输输出并将其通过管道传输到 gunzip 以获得所需的响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T05:35:17.803

我猜你的终端有问题。试试这个：

`wget -q -O - http://en.wikipedia.org/wiki/List_of_current_NFL_team_rosters`

# java - 您如何处理和解析 JPA 持久性异常以向用户提供有意义的消息

> ID：10493053
> 
> 赞同：26
> 
> 时间：2012-05-08T05:28:34.147
> 
> 标签：java, parsing, exception, jpa, exception-handling

我对 JPA 相当陌生，并且希望在处理来自 JPA 的持久性异常时找到最佳实践，例如*可以*由用户解决的唯一约束违规。有大量关于如何编写 JPA 应用程序的示例，但几乎没有关于如何处理由它们抛出的异常的示例。：/

例如注册一个用户，这个人输入一个系统已经在使用中的电子邮件地址，并得到一个约束违规：

```
try {
     em.persist(credentials);
} catch (javax.persistence.PersistenceException ex) { 
```

添加重复电子邮件时会产生此错误：

```
WARNING: SQL Error: 0, SQLState: 23505
SEVERE: ERROR: duplicate key value violates unique constraint "EMAIL_UQ_IDX"
  Detail: Key (email)=(testuser@xyz.com) already exists. 
```

我怎样才能得到一个有意义的答案给用户？例如：哎呀，好像有人已经在使用该电子邮件地址了，你确定你以前没有注册过吗？是否有内置的工具来解析这个，或者我需要在（可能是一系列的）if 语句中针对异常消息运行正则表达式？

如果它被捕获在业务层怎么办......将它提升到表示层的最佳实践是什么......就像我之前所说的那样，可以为用户提供“好”消息。

* * *

为清楚起见添加：让人们知道，我曾经，曾经并且仍在研究所有不同类型的持久性异常，这是我一直在做的一些研究，我没有包含在“尝试声明”中我在上面包含的示例：

```
try {
     em.persist(credentials);
     } catch (javax.persistence.PersistenceException ex) {
         System.out.println("EXCEPTION CLASS NAME: " + ex.getClass().getName().toString());
         System.out.println("THROWABLE CLASS NAME: " + ex.getCause().getClass().getName().toString());
                Throwable th = ex.getCause();
         System.out.println("THROWABLE INFO: " + th.getCause().toString());
         Logger.getLogger(CredentialsControllerImpl.class
              .getName()).log(Level.INFO, "Credentials Controller "
                  + "persistence exception "
                      + "EXCEPTION STRING: {0}", ex.toString());
         Logger.getLogger(CredentialsControllerImpl.class
              .getName()).log(Level.INFO, "Credentials Controller "
                  + "persistence exception "
                      + "THROWABLE MESSAGE: {0}", th.getMessage());
         Logger.getLogger(CredentialsControllerImpl.class
              .getName()).log(Level.INFO, "Credentials Controller "
                  + "persistence exceptions "
                      + "THROWABLE STRING: {0}", th.toString());
     } 
```

:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T06:36:01.893

您通常不使用低级异常来执行此操作。

相反，您明确检查电子邮件是否可用（使用查询），并且仅在电子邮件不存在时才保留该电子邮件。

当然，如果两个线程并行执行相同的检查，可能会出现竞争条件，但这种情况非常罕见，并且数据库约束可以保证唯一性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T06:40:56.837

PersistenceException 有子类：EntityExistsException、EntityNotFoundException、NonUniqueResultException、NoResultException、OptimisticLockException、RollbackException、TransactionRequiredException。来源：[http ://docs.oracle.com/javaee/5/api/javax/persistence/PersistenceException.html](http://docs.oracle.com/javaee/5/api/javax/persistence/PersistenceException.html)

你可以使用它们。尝试检查异常的类型或重载错误处理方法（这样更好）。EntityExistsException 我认为您在上面给出的示例中搜索的错误。但是您应该自己检查“是否存在”。这是最好的做法。

**永远不需要向用户显示 SQL 错误。那个错误总是给你的。任何需要通知用户的数据相关错误必须手动检查。**

我使用 J2EE Web 环境。如果有异常，我只是将请求转发给 error.jsp。我还为 error.jsp 提供了一个额外的对象，以阐明用户可以返回、出错后可以转到哪个页面等信息。当然，我自动化了这个，我不喜欢编写冗余代码，因为它很难更新。所以我只是写了将异常和错误消息发送到 catch 块中的另一个类。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-21T12:39:21.983

我在我的数据库服务层中做了类似的事情，以确定异常是由冲突的约束还是一般的数据库故障引起的：

```
try {
....
} catch (final PersistenceException e) {
    final Throwable cause = e.getCause();
    if (cause instanceof MySQLIntegrityConstraintViolationException) {
        throw new ConflictException(cause);
    }
    throw new ServiceException(e);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-21T12:59:13.503

将您的 JPA 项目与 Spring 集成，并让 spring 将异常抛出为`DataAccessException`

`DataAccessException`in 的子类`org.springframework.dao`

```
class   CannotAcquireLockException
      Exception thrown on failure to aquire a lock during an update, for example during a "select for update" statement.
class   CannotSerializeTransactionException
      Exception thrown on failure to complete a transaction in serialized mode due to update conflicts.
class   CleanupFailureDataAccessException
      Exception thrown when we couldn't cleanup after a data access operation, but the actual operation went OK.
class   ConcurrencyFailureException
      Exception thrown on concurrency failure.
class   DataAccessResourceFailureException
      Data access exception thrown when a resource fails completely: for example, if we can't connect to a database using JDBC.
class   DataIntegrityViolationException
      Exception thrown when an attempt to insert or update data results in violation of an integrity constraint.
class   DataRetrievalFailureException
      Exception thrown if certain expected data could not be retrieved, e.g.
class   DeadlockLoserDataAccessException
      Generic exception thrown when the current process was a deadlock loser, and its transaction rolled back.
class   EmptyResultDataAccessException
      Data access exception thrown when a result was expected to have at least one row (or element) but zero rows (or elements) were actually returned.
class   IncorrectResultSizeDataAccessException
      Data access exception thrown when a result was not of the expected size, for example when expecting a single row but getting 0 or more than 1 rows.
class   IncorrectUpdateSemanticsDataAccessException
      Data access exception thrown when something unintended appears to have happened with an update, but the transaction hasn't already been rolled back.
class   InvalidDataAccessApiUsageException
      Exception thrown on incorrect usage of the API, such as failing to "compile" a query object that needed compilation before execution.
class   InvalidDataAccessResourceUsageException
      Root for exceptions thrown when we use a data access resource incorrectly.
class   OptimisticLockingFailureException
      Exception thrown on an optimistic locking violation.
class   PermissionDeniedDataAccessException
      Exception thrown when the underlying resource denied a permission to access a specific element, such as a specific database table.
class   PessimisticLockingFailureException
      Exception thrown on a pessimistic locking violation.
class   TypeMismatchDataAccessException
      Exception thrown on mismatch between Java type and database type: for example on an attempt to set an object of the wrong type in an RDBMS column.
class   UncategorizedDataAccessException
      Normal superclass when we can't distinguish anything more specific than "something went wrong with the underlying resource": for example, a SQLException from JDBC we can't pinpoint more precisely. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-13T13:18:45.830

我不喜欢进行查询以检查是否可以插入数据的想法，因为它添加了往返以检查数据库服务器无论如何都会进行检查，而且它甚至在每种情况下都不起作用，因为数据库可以在`SELECT`和`INSERT`（尽管这可能取决于您如何处理交易）。

无论如何，处理错误对我来说似乎是唯一安全的选择，它是“免费的”（没有多余的检查，没有额外的往返），而且不难做到。但这取决于您的 JDBC 驱动程序。例如，使用 PostgreSQL，您可以：

```
try {
    em.persist(credentials);
} catch (javax.persistence.PersistenceException ex) {
    // use a loop to get the PSQLException
    for (Throwable current = ex; current != null; current = current.getCause()) {
        if (current instanceof PSQLException) {
            final PSQLException psqlEx = (PSQLException) current;
            final ServerErrorMessage serverErrorMessage = psqlEx.getServerErrorMessage();
            if ("EMAIL_UQ_IDX".equals(serverErrorMessage.getConstraint())) {
                // handle duplicate E-Mail address
            }
            break;
        }
    }
} 
```

ServerErrorMessage（[Javadoc](https://jdbc.postgresql.org/documentation/publicapi/org/postgresql/util/ServerErrorMessage.html)，[源代码](https://github.com/pgjdbc/pgjdbc/blob/master/pgjdbc/src/main/java/org/postgresql/util/ServerErrorMessage.java)）提供了很多信息（用于生成异常消息）：

```
System.out.println(serverErrorMessage.getColumn());
System.out.println(serverErrorMessage.getConstraint());
System.out.println(serverErrorMessage.getDatatype());
System.out.println(serverErrorMessage.getDetail());
System.out.println(serverErrorMessage.getFile());
System.out.println(serverErrorMessage.getHint());
System.out.println(serverErrorMessage.getInternalPosition());
System.out.println(serverErrorMessage.getInternalQuery());
System.out.println(serverErrorMessage.getLine());
System.out.println(serverErrorMessage.getMessage());
System.out.println(serverErrorMessage.getPosition());
System.out.println(serverErrorMessage.getRoutine());
System.out.println(serverErrorMessage.getSQLState());
System.out.println(serverErrorMessage.getSchema());
System.out.println(serverErrorMessage.getSeverity());
System.out.println(serverErrorMessage.getTable());
System.out.println(serverErrorMessage.getWhere()); 
```

当您在触发器中进行检查时，您可以使用语法自己[设置](https://www.postgresql.org/docs/current/static/plpgsql-errors-and-messages.html)其中的许多字段`USING option = expression`，例如

```
RAISE integrity_constraint_violation USING CONSTRAINT = 'EMAIL_UQ_IDX' 
```

# vb.net - 检查动态创建的richtextbox是否不在焦点

> ID：10493058
> 
> 赞同：0
> 
> 时间：2012-05-08T05:29:18.540
> 
> 标签：vb.net, winforms

如果创建一个字典程序。当使用在剪贴板上复制一些文本时，它将以系统尝试可见的形式给出复制文本的含义。当用户单击他/她屏幕上的任何位置时，我想关闭表单。但是如果用户想从不关闭的含义中复制一些文本，我会在选项卡控件中添加一个动态创建的丰富文本框以显示含义的数量。当用户滚动richtextboxes 表单时，我的代码运行良好，接受一件事会自行关闭。滚动条似乎不是richtextbox的一部分。帮我解决这个问题，我的代码如下。

```
Dim s As Boolean = True

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    If MouseButtons.ToString = "Left" Or MouseButtons.ToString = "Right" Then
        If s = True Then
            If InStr(LCase(Me.ActiveControl.ToString), LCase("Label")) Then
                Me.Close()
            End If
        End If
    End If
End Sub

Private Sub Label1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Label1.Click
    Me.Close()
End Sub
Private Sub frmdict_MouseEnter(ByVal sender As Object, ByVal e As EventArgs) Handles Me.MouseEnter
    s = False
    Button1.Focus()
End Sub

Private Sub frmdict_MouseLeave(ByVal sender As Object, ByVal e As EventArgs) Handles Me.MouseLeave
    s = True
    Label1.Focus()
End Sub 
```

**==更新==**

我有 form1，其中包含此代码以将richtextboxes 和选项卡添加到 tabcontrl

```
Dim myTabPage As New TabPage()
Dim myrichtext As New RichTextBox()
myrichtext.Name = "RichTextBox" & i
myTabPage.Text = StrSearch & i
frmdict.TabControl1.TabPages.Add(myTabPage)
myTabPage.Controls.Add(myrichtext)
myrichtext.RightToLeft = Windows.Forms.RightToLeft.No
myrichtext.Dock = DockStyle.Fill
myrichtext.Font = New Font("Urdulink", 14) 
```

最后打开frmdict来表示意思

```
If frmdict.TabControl1.TabPages.Count > 0 Then
  frmdict.TabControl1.RightToLeftLayout = True
  frmdict.Show()
  frmdict.Label1.Focus()
  ' frmdict.TabControl1.Focus()
Else
  frmdict.Close()
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:23:59.897

每当鼠标移过表单的其中一个子控件时，您`MouseLeave`就会触发，这可能不是您所期望的。

我不确定你的标签和按钮发生了什么，但这样的事情可能会让它对你有用：

```
If s = True Then
  If Not rtb1.Bounds.Contains(Me.PointToClient(Cursor.Position)) AndAlso _
     TypeOf Me.ActiveControl Is Label Then
    Me.Close()
  End If
End If 
```

**更新：**

就您的动态富文本控件而言，您实际上并不需要名称。像这样的东西应该可以工作（未完全测试）：

```
If TabControl1.SelectedTab IsNot Nothing Then
  For Each rtb As RichTextBox In TabControl1.SelectedTab.Controls.OfType(Of RichTextBox)()
    If Not rtb.Bounds.Contains(rtb.PointToClient(Cursor.Position)) Then
      Me.Close()
    End If
  Next
End If 
```

# php - 将带有 PHP 代码的帮助文件加载到 MySql 数据库？

> ID：10493062
> 
> 赞同：0
> 
> 时间：2012-05-08T05:29:35.697
> 
> 标签：php, mysql, load-data-infile

有一个我在记事本++中创建的帮助文件，语法如下

```
//Filename:PHP_Help.html

<!-- Heading of the Issue/Solution

// it may contain PHP Code or Mysql Queries or General Description
<?php

    // Code that fixed the issue/ Solution to a problem
?>

Some general Description
--> 
```

我使用了上述格式，因为在记事本++中，如果我按“ALT + 0”

它显示为

```
<!-- Heading of issue 1
<!-- Heading of issue 2 
```

以便它有助​​于找到阅读标题问题的解决方案。但是帮助文件变大了，包含了数百个问题

所以我正在尝试将文件加载到数据库并使用 PHP 来搜索问题/解决方案

我的数据库架构就像

```
Create table issues
(
 id int auto_increment primary key,
 header nvarchar(100),
 content text
); 
```

我的问题是如何将特定文件加载到数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:44:16.507

```
// Read the file into a php variable:
$filecontents = file_get_contents ("PHP_Help.html");

// explode the string into individual records:
$records = explode ( "<!--" , $filecontents );

// work through the array of records:
foreach($records as $record) {
    // find your first linefeed
    $headingend = strpos($record, chr(13) );
    // get the heading
    $heading = substr($record, 0, $headingend);
    // and the content
    $content = substr($record, $headingend);
    // write to the database...
} 
```

# asp.net-mvc-3 - 没有按照定义的路由构建 url

> ID：10493064
> 
> 赞同：1
> 
> 时间：2012-05-08T05:29:52.227
> 
> 标签：asp.net-mvc-3, telerik, telerik-grid, telerik-mvc

我正在为 mvc 使用 Telerik 网格。我正在使用ajax绑定，以下是代码

```
 colums.Bound(o => o.SomeNumber)
.Groupable(false)
.ClientTemplate(Html.ActionLink("<#=SomeNumber#>", "ActionResult", "ControllerName", new { docid = ViewContext.RouteData.Values["docid"], id = "<#=RequisitionID#>" }).ToString())
.Title("Some No.")
.Width(100); 
```

我有一条路线定义为

```
routes.MapRoute(
              "strict",
              "{controller}.mvc/{docid}/{action}/{id}",
              new {docid = "",action = "Index", id = ""},
              new { docid = @"\d+"}

            ); 
```

我希望网址像

```
<a href='ControllerName.mvc/docid/ActionResult/id'>SomeNumer</a> 
```

构造的网址就像

```
<a id="32" href="/ControllerName.mvc/docid/ActionResult?Length=3" docid="160">SomeNumber</a> 
```

我无法理解为什么它没有根据定义的路线构建，如果重要的话，我已经在默认路线上方定义了路线。

请帮我找出我哪里出错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:02:20.290

您似乎使用了[错误的 ActionLink 重载](http://msdn.microsoft.com/en-us/library/dd492124.aspx)，并且路由值被解释为 HTML 属性。

试试[这个](http://msdn.microsoft.com/en-us/library/dd504972.aspx)（注意`null`作为最后一个参数）

```
Html.ActionLink(
    "<#=SomeNumber#>", //Link text
    "ActionResult", // Action name
    "ControllerName", //Controller name
    new { docid = "...", id = "..." }, //route values
    null //html attributes
) 
```

# asp.net-mvc - MVC 3 模型 ID 属性中 ScaffoldColumn 属性设置为 False 的真正优势是什么

> ID：10493066
> 
> 赞同：8
> 
> 时间：2012-05-08T05:30:15.873
> 
> 标签：asp.net-mvc, asp.net-mvc-3, scaffolding

我是 MVC 的新手，当我为代码优先方法构建模型类时，每个键 ID 列都有属性`[ScaffoldColumn(false)]`集。我这样做是因为我不希望明显地在视图中显示 ID，而且我知道解决此问题的方法是删除包含 ID 字段的每个视图中的 UI 生成的 HTML。

`ScaffoldColumn`我在模型中使用set to遇到的问题`false`是在触发视图的 Edit 方法时首先注意到的，并且我收到此错误：Store update, insert, or delete statement影响了意外的行数（0）。当我在调试中运行代码时，ID 属性实际上设置为零，如我的视图编辑`HttpPost`方法中所示。

`ScaffoldColumn`我希望有人可以详细说明我的问题，如果没有将 ID 发送到控制器方法（例如在这种情况下为 Edit ），那么在 MVC中具有属性有什么意义`HttpPost`？我是否应该以旧的方式进行此操作，并删除当该属性未添加到键/外键属性时生成的 MVC 寺庙创建的每个视图中的 HTML 标记？

如果将此属性设置为，我发现的解决方法`false`是为每个方法添加一个 ID 参数`HttpPost`，而不是在调用之前设置适当的 ID 属性字段`SaveChanges()`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-14T10:33:27.163

您可以为此使用数据注释并使用：

```
[HiddenInput(DisplayValue=false)] 
```

这样，您的字段将使用视图中的隐藏输入显示。无需进行任何更改，视图将知道如何显示它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T05:34:10.187

好吧，您不希望它作为可编辑字段搭建，但您当然希望它在表单中，正如您所注意到的。解决方案是手动将其添加为视图中的隐藏字段。像这样的东西：

```
@Html.HiddenFor(model => model.id) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-28T17:23:25.837

[ScaffoldColumn(false)]，它只是隐藏了属性。假设您有一个 id 自动递增的属性。用户与此属性没有任何关系。所以用它来隐藏视图中的属性。

# ruby-on-rails - 为什么我在尝试运行 rake db:migrate 时不断收到此错误？

> ID：10493069
> 
> 赞同：0
> 
> 时间：2012-05-08T05:30:42.800
> 
> 标签：ruby-on-rails, migration, dbmigrate, ancestry

```
==  AddAncestryToMessages: migrating ==========================================
-- add_column(:messages, :ancestry, :string)
rake aborted!
An error has occurred, this and all later migrations canceled:

SQLite3::SQLException: no such table: messages: ALTER TABLE "messages" ADD "ancestry" varchar(255) 
```

所以我的应用程序有你可以发布的消息（有点像 twitter），我正在添加回复，我正在使用祖先 gem 这样做。

我的`schema.rb`文件中的代码（我认为这是每次运行 rake db:migrate 时用于创建表的文件。但我可能是错的（这可能是问题所在！）

```
 create_table "messages", :force => true do |t|
    t.string   "content"
    t.integer  "user_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "ancestry"
  end

  add_index "messages", ["user_id", "created_at", "ancestry"], :name =>   "index_messages_on_user_id_and_created_at_and_ancestry" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:30:15.067

哦，现在我明白了：您将代码添加到了，`schema.rb`但您必须使用迁移。从中删除您手动添加的代码`schema.rb`并运行：

```
rails g migration CreateMessages 
```

您将获得文件 db/migrate/[timestamp]_create_messages.rb。用您的代码填充它的`change`方法，然后运行（它应该为您创建，但为空。对于旧版本，它被命名为`up`）：

```
rake db:migrate 
```

此命令将自行更改您`schema.rb`的。**不要手动更改！**（至少在你成为一个成熟的 Rails 程序员之前）。

# python - Python - 解析字符串

> ID：10493072
> 
> 赞同：0
> 
> 时间：2012-05-08T05:31:04.547
> 
> 标签：python, parsing, beautifulsoup

我有一个非常烦人的问题，答案可能很简单，但我不能把 2 和 2 放在一起......

我有一个字符串示例，如下所示：

```
<a href="javascript:void(0);" onclick="viewsite(38903);" class="followbutton">Visit</a> 
```

每次加载页面时，数字**38903都会有所不同。**我需要一种能够在每次加载页面时解析这些数字的方法。我已经足够获取并包含上面的 HTML 代码，但不能只获取数字。

再说一次，这可能是一件很容易做的事情，只是想不通。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:36:29.737

如果您使用的是 BeautifulSoup，那么仅获取`onclick`字符串非常简单，这将使这更容易。但这是一种非常粗暴的方法：

```
import re
result = re.sub("\D", "", html_string)[1:] 
```

`\D`匹配所有非数字，因此这将删除字符串中不是数字的所有内容。然后取一片来去掉`javascript:void(0)`.

其他选项：使用 re.search 抓取一系列数字并获取第二组。或者使用 re.search 匹配子字符串后的一系列数字，其中子字符串为`<a href="javascript:void(0);" onclick="viewsite(`.

编辑：听起来你正在使用 BeautifulSoup。在这种情况下，大概你有一个代表`a`标签的对象。假设对象名为`a`：

```
import re
result = re.sub("\D", "", a['onclick']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T05:42:07.820

```
import re
r = re.compile('viewsite\((\d+)\)')
r.findall(s) 
```

这将专门寻找 viewsite() 的全数字参数。您可能更喜欢 Andrew 的回答，因为如果 HTML 字符串中出现其他数字，您将开始得到不正确的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:41:44.137

```
>>> import re
>>> grabbed_html = '''<a href="javascript:void(0);" onclick="viewsite(38903);" class="followbutton">Visit</a>'''
>>> re.findall(r'viewsite\((\d+)\);',grabbedhtml)[0]
'38903' 
```

# web-services - 如何在 sencha touch2 中使用外部 Web 服务

> ID：10493077
> 
> 赞同：0
> 
> 时间：2012-05-08T05:32:05.433
> 
> 标签：web-services, sencha-touch-2

我是 sencha touch2 的新手，我想在 sencha touch2 中使用外部 Web 服务。我为此编写了代码，显示警报消息不起作用！在控制台中给出这样的错误 XMLHttpRequest cannot load [http://localhost/SLS.BRND.Services/Service1.asmx/Helloworld?_dc=1336466078991&method=Helloworld&format=json](http://localhost/SLS.BRND.Services/Service1.asmx/Helloworld?_dc=1336466078991&method=Helloworld&format=json)。

> Access-Control-Allow-Origin 不允许来源[http://localhost:49692 。](http://localhost:49692)app/view/Blog.js?_dc=1336466047687:27响应状态：- 0

请帮我解决问题。谢谢

这是我的代码：-

```
 Ext.define("GS.view.Blog", {
    extend: 'Ext.navigation.View',
    xtype: 'blog',
    config: {
        title: 'WebService',
        scrollable: true,       
        items: [
            {
            xtype: 'button',
            text: 'Press Me',
            height: 40,
            width: 200,
            listeners: {
                tap: function () {
//                    alert("Hi Welcome To Sencha");
                    Ext.Ajax.request({
                        method: 'GET',
                        url: 'http://localhost/SLS.BRND.Services/Service1.asmx/Helloworld',
                        params: { method: 'Helloworld', format: 'json' },
                        success: function (response, request) {
                            alert('Working!')
                            alert(response.responseText)
                            console.log('Response:-' + response.responseText)
                        },
                        failure: function (response, request) {
                            alert('Not working!')
                            console.log('Response Status:- ' + response.status)
                        }
                   });
                }
            }
          }
        ]
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:54:46.390

您可以使用 eval 函数将纯文本转换为 JSON 数据。

```
var newObject=eval('('+response.responseText+')'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:18:27.683

试试这个代码

```
 Ext.data.JsonP.request({

                    url: 'http://localhost/SLS.BRND.Services/Service1.asmx/Helloworld',
                    params: { method: 'Helloworld', format: 'json' },
                    success: function (response) {
                        alert('Working!')
                        console.log(response);
                    },
                    failure: function (response) {
                        alert('Not working!')
                        console.log(response);
                    }
               }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:25:53.173

我想，我想出了解决您问题的方法。

首先，阅读Nicholas C. Zakas的这篇关于[跨域 Ajax 和跨域资源共享的优秀文章。](http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/)它清楚地解释了这个Cross-domain Cross-Origin资源共享问题。

因此，在您的情况下，您需要发出[JSONP](http://en.wikipedia.org/wiki/JSON#JSONP)请求。

> JSONP 或“带填充的 JSON”是对基本 JSON 数据格式的补充，这种使用模式允许页面从主服务器以外的服务器请求并更有意义地使用 JSON。
> 
> `JSONP is an alternative to a more recent method called Cross-Origin Resource Sharing`.

你需要做的就是[`Ext.util.JSONP.request()`](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.JsonP-method-request)像这样打一个电话，

```
Ext.util.JSONP.request({
     url: 'http://localhost/SLS.BRND.Services/Service1.asmx/Helloworld',
     params: { 
         method: 'Helloworld',
         format: 'json',
         callback: 'callback',
     },

     success: function (response) {
           alert('Working!')
           console.log(response);
     },
     failure: function (response) {
            alert('Not working!')
            console.log(response);
     }
}); 
```

现在应该可以了！

# java - 使用反射调用构造函数会产生 NoSuchMethodException

> ID：10493078
> 
> 赞同：1
> 
> 时间：2012-05-08T05:32:16.063
> 
> 标签：java, reflection, constructor

给定班级奖：

```
public class Award {

    /*
     * 
     */

    // fields of the class 

    Award()
    {
        // some initializations

    } 
```

我正在尝试从 Main 调用此构造函数：

```
 try
    {
        Award myAward = Award.class.getConstructor().newInstance();
        myAward.calculateAward(); 
    }

    catch (Exception e) 
    {
       e.printStackTrace();
    } 
```

但它进入异常块并产生 NoSuchMethodException 异常。

怎么了 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T05:37:06.430

问题是您的构造函数不是`public`，所以您需要使用`getDeclaredConstructor().newInstance();`或制作构造函数`public`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T05:37:10.003

根据[Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getConstructor%28java.lang.Class...%29)：

> 要反映的构造函数是此 Class 对象表示的类的公共构造函数，其形参类型与 parameterTypes 指定的类型匹配。

您的构造函数可能需要公开。在构造函数之前添加`public`关键字，然后`Award`重试。

# android - android中自定义列表视图上单个列表的预览/详细信息

> ID：10493079
> 
> 赞同：0
> 
> 时间：2012-05-08T05:32:17.597
> 
> 标签：android

我是 Android 新手，正在使用自定义列表视图，它运行良好，但问题是当我单击单个列表以显示列表详细信息时，每次它只显示最后一个列表详细信息。在 onItemClick 方法中，只有最后一个发票 id 被传递...这里是代码

```
 try {

      //*** Getting Array of Attributes
            attributes = jsonreturn.getJSONObject(TAG_ATTRIBUTE);
            String status = attributes.getString(TAG_VALIDCODE);
            JSONObject invoices = jsonreturn.getJSONObject(TAG_INVOICELIST);
            JSONArray invoice = invoices.getJSONArray(TAG_INVOICE);

            if(status.equals("200")){
     // looping through All Invoice
       for(int i = 0; i < invoice.length(); i++)
         {

            JSONObject c = invoice.getJSONObject(i);

     //***** Storing each JSON item in variable
            JSONObject client = c.getJSONObject(TAG_CLIENT);
            String organization = client.getString(TAG_ORGANIZATION);
            String invoiceno = c.getString(TAG_ID);
            String date = c.getString(TAG_DATE);
            String currency = c.getString(TAG_CURRENCY);
            String outstanding = c.getString(TAG_OUTSTANDING);
            String invoice_status = c.getString(TAG_STATUS);
            invoice_id = c.getString(TAG_INVOICE_ID);

    //**** creating new HashMap

            HashMap<String, String> map = new HashMap<String, String>();

   //*** adding each child node to HashMap key => value
            map.put(TAG_ORGANIZATION, organization);
            map.put(TAG_ID, invoiceno);
            map.put(TAG_DATE, date);
            map.put(TAG_CURRENCY, currency);
            map.put(TAG_OUTSTANDING, outstanding);
            map.put(TAG_STATUS, invoice_status);
            map.put(TAG_INVOICE_ID, invoice_id);

  //**** adding HashList to ArrayList

            invoiceList.add(map);

            }
       }

       else{
            Toast.makeText(this, "Invalid Details", 1000).show();       }

    }
           catch (JSONException e)
           {
           e.printStackTrace();
           }

     /**
     Updating parsed JSON data into ListView
     * */

    InvoiceListAdapter invoiceadapter = new InvoiceListAdapter(this, invoiceList);

    mListView.setAdapter(invoiceadapter);

 //****** Launching new screen on Selecting Single ListItem

 mListView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view, int position, long id)
        {
            // getting values from selected ListItem

            //--String date = ((TextView) view.findViewById(R.id.date)).getText().toString();
            //--String status = ((TextView) view.findViewById(R.id.invoicestatus)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), PreviewInvoice.class);
            in.putExtra("myinvoiceid", invoice_id);
            in.putExtra("uniquetoken", tokenid);
           //-- in.putExtra(TAG_DATE, date);
            //---in.putExtra(TAG_STATUS, status);
            startActivity(in);
        }
    }); 
```

我的 InvoiceList 适配器类代码

```
public class InvoiceListAdapter extends BaseAdapter {

//--private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;

public InvoiceListAdapter(ManageInvoice manageInvoice, ArrayList<HashMap<String, String>> invoiceList) {
   //-- activity = manageInvoice;
    data=invoiceList;

    inflater = (LayoutInflater)manageInvoice.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

public int getCount() {
    if(null==data){
        return 0;
    }
    return data.size();
}

public Object getItem(int position) {
    if(null==data || data.size()<=position){
        return null;
    }
    return data.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent)
{

    View vi=convertView;
    if(convertView==null)

    vi = inflater.inflate(R.layout.invoice_list, null );

    TextView title = (TextView)vi.findViewById(R.id.organization);
    TextView invoiceId = (TextView)vi.findViewById(R.id.invoice_id);
    TextView date = (TextView)vi.findViewById(R.id.date);
    TextView currency = (TextView)vi.findViewById(R.id.currency);
    TextView currencyvalue = (TextView)vi.findViewById(R.id.outstanding);
    TextView status = (TextView)vi.findViewById(R.id.invoice_status);
   // ImageView thumb_image=(ImageView)vi.findViewById(R.id.invoice_status);

    HashMap<String, String> Invoice = new HashMap<String, String>();
    Invoice = data.get(position);

    // Setting all values in listview
    title.setText(Invoice.get(ManageInvoice.TAG_ORGANIZATION));
    invoiceId.setText(Invoice.get(ManageInvoice.TAG_ID));
    date.setText(Invoice.get(ManageInvoice.TAG_DATE));
    currency.setText(Invoice.get(ManageInvoice.TAG_CURRENCY));
    currencyvalue.setText(Invoice.get(ManageInvoice.TAG_OUTSTANDING));
    status.setText(Invoice.get(ManageInvoice.TAG_STATUS));

    return vi;
}

public JSONArray get(int position) {
    // TODO Auto-generated method stub
    return null;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:40:57.233

```
 public void onItemClick(AdapterView<?> parent, View view, int position, long id)
        {
              // Starting new intent
            Intent in = new Intent(getApplicationContext(), PreviewInvoice.class);
            in.putExtra("myinvoiceid",invoiceList.get(position).get(TAG_INVOICE_ID));
            in.putExtra("uniquetoken", tokenid); // Actually I can't find your tokenId in HashMAp object
            startActivity(in);
        }
    }); 
```

因为您在 中引用 invoice_id 的静态值，所以`onItemClick()`只需从适配器获取定位`HashMap`对象并使用它的键获取`invoice_id`.

`invoiceadapter.get(position)`这为您提供了一个用于单击位置的对象`ListView`。并使用 `TAG_INVOICE_ID`来自 HashMap 对象的键，您可以获得它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:38:41.640

这是因为您的 JSON 对象已经迭代到 invoice.length() 并且您传递到 Intent 的 invoice_id 和 tokenid 内容是最后一条记录的记录或值。将您的 JSON 对象移动到所需位置 onitemclick 并从那里检索变量的值。

# iphone - 从 iPhone 中的联系人中获取单个人的所有属性

> ID：10493080
> 
> 赞同：0
> 
> 时间：2012-05-08T05:32:20.800
> 
> 标签：iphone, ios, attributes, contacts, abaddressbook

我正在从事需要从联系人中获取单个人的所有信息的项目。

我可以使用此代码获取所有电话、电子邮件或其他属性

```
- (BOOL)peoplePickerNavigationController: (ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {

ABMultiValueRef multi = ABRecordCopyValue(person, kABPersonPhoneProperty);

for(CFIndex i = 0; i < ABMultiValueGetCount(multi); i++) {

    NSLog(@"Phone number is here >>>>>>%@",(NSString*)ABMultiValueCopyValueAtIndex(multi, i));
} 
```

}

但是我需要为所有属性编写这段代码。而且您知道有很多字段，例如昵称，生日等。

那么，有什么方法可以让我获得单身人士的所有属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:02:35.733

```
 CFDictionaryRef dict = ABMultiValueCopyValueAtIndex(multi, i);
                    NSString *displayName=(NSString*)ABMultiValueCopyLabelAtIndex(multi, i);
                    displayName=[displayName stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"_$!<>"]];

                    if ([displayName isEqualToString:@"Home"]) 
                    {
                        propertyIndexUser=imIndex_HomeUser;
                        propertyIndexService=imIndex_HomeService;
                        imIndex_HomeUser+=2;
                        imIndex_HomeService+=2;
                    }
                    else if ([displayName isEqualToString:@"Work"]) 
                    {
                        propertyIndexUser=imIndex_WorkUser;
                        propertyIndexService=imIndex_WorkService;
                        imIndex_WorkUser+=2;
                        imIndex_WorkService+=2;
                    }
                    else
                    {
                        propertyIndexUser=imIndex_OtherUser;
                        propertyIndexService=imIndex_OtherService;
                        imIndex_OtherUser+=2;
                        imIndex_OtherService+=2;
                    }

                    ContactProperty* objIMContactProperty;

                    objIMContactProperty=[[ContactProperty alloc] init];
                    if (displayName==nil) {
                        displayName = @"Other";
                    }
                    objIMContactProperty.mDisplayName= [NSString stringWithString:displayName];
                    objIMContactProperty.mContactPropertyString=(NSString*)CFDictionaryGetValue(dict, @"username");
                    objIMContactProperty.mContactPropId=propertyIndexUser;
                    objIMContactProperty.mContactDataType=@"Text";
                    [objPhoneContact.mPropertyArray addObject:objIMContactProperty];
                    [objIMContactProperty release];

                    objIMContactProperty=[[ContactProperty alloc] init];

                    objIMContactProperty.mDisplayName= [NSString stringWithString:displayName];
                    objIMContactProperty.mContactPropertyString=(NSString*)CFDictionaryGetValue(dict, @"service");
                    objIMContactProperty.mContactPropId=propertyIndexService;
                    objIMContactProperty.mContactDataType=@"Text";
                    [objPhoneContact.mPropertyArray addObject:objIMContactProperty];
                    [objIMContactProperty release];

                    if(dict)
                        CFRelease(dict);
                }
            }
            //CFRelease(dict);
            if(multi)
                CFRelease(multi);

            multi=ABRecordCopyValue(record,kABPersonURLProperty);

            NSUInteger urlIndex_home_page=501;
            NSUInteger urlIndex_home=521;
            NSUInteger urlIndex_work=541;
            NSUInteger urlIndex_other=561;  //~600

            multiCount=ABMultiValueGetCount(multi);
            if(multiCount ==0)
            {
                //objPhoneContact.mWebUrl=@"";
            }
            else 
            {
                for( int i=0; i < multiCount; i++)
                {

                    ContactProperty* objUrlContactProperty=[[ContactProperty alloc] init];

                    objUrlContactProperty.mContactPropertyString=(NSString*)ABMultiValueCopyValueAtIndex(multi, i);
                    objUrlContactProperty.mDisplayName=(NSString*)ABMultiValueCopyLabelAtIndex(multi, i);
                    objUrlContactProperty.mDisplayName = [objUrlContactProperty.mDisplayName stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"_$!<>"]];

                    if([objUrlContactProperty.mDisplayName caseInsensitiveCompare:@"HomePage"]==NSOrderedSame)
                    {
                        objUrlContactProperty.mContactPropId=urlIndex_home_page;
                        urlIndex_home_page++;
                    }
                    else if([objUrlContactProperty.mDisplayName caseInsensitiveCompare:@"home"]==NSOrderedSame)
                    {
                        objUrlContactProperty.mContactPropId=urlIndex_home;
                        urlIndex_home++;
                    }
                    else if([objUrlContactProperty.mDisplayName caseInsensitiveCompare:@"work"]==NSOrderedSame)
                    {
                        objUrlContactProperty.mContactPropId=urlIndex_work;
                        urlIndex_work++;
                    }

                    else 
                    {
                        objUrlContactProperty.mContactPropId=urlIndex_other;
                        urlIndex_other++;
                    }

                    objUrlContactProperty.mContactDataType=@"Url";

                    [objPhoneContact.mPropertyArray addObject:objUrlContactProperty];
                    [objUrlContactProperty release];
                }
            }

            if(multi)
                CFRelease(multi);

            multi = ABRecordCopyValue(record, kABPersonAddressProperty);

            NSUInteger addressIndex_home=701;
            NSUInteger addressIndex_work=901;
            NSUInteger addressIndex_other=1101;  //~1300

            multiCount=ABMultiValueGetCount(multi);
            if(multiCount ==0)
            {
                //objPhoneContact.mWebUrl=@"";
            }
            else 
            {

                for( int i=0; i < multiCount; i++)
                {
                    CFTypeRef adressDictionaryRef=ABMultiValueCopyValueAtIndex(multi, i);

                    NSDictionary* addressDictionary=(NSDictionary*)adressDictionaryRef;
                    NSString* street=[addressDictionary objectForKey:(NSString*)kABPersonAddressStreetKey];
                    NSString* city=[addressDictionary objectForKey:(NSString*)kABPersonAddressCityKey];
                    NSString* state=[addressDictionary objectForKey:(NSString*)kABPersonAddressStateKey];
                    NSString* zip=[addressDictionary objectForKey:(NSString*)kABPersonAddressZIPKey];
                    NSString* country=[addressDictionary objectForKey:(NSString*)kABPersonAddressCountryKey];
            //      NSString* countryCode=[addressDictionary objectForKey:(NSString*)kABPersonAddressCountryCodeKey];

                    //objAddressContactProperty.mContactPropertyString=[NSString stringWithFormat:@"%@ %@ %@ %@ %@ %@",street,city,state,zip,country,countryCode];

                    NSMutableString *displayName;
                    displayName=(NSString*)ABMultiValueCopyLabelAtIndex(multi, i);
                    displayName = [displayName stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"_$!<>"]];

                    DLog(@"Address Property: %@",displayName);

                    int propertyIndex=0;

                    if([displayName caseInsensitiveCompare:@"home"]==NSOrderedSame)
                    {
                        propertyIndex=addressIndex_home;
                        addressIndex_home+=10;
                    }

                    else if([displayName caseInsensitiveCompare:@"work"]==NSOrderedSame)
                    {
                        propertyIndex=addressIndex_work;
                        addressIndex_work+=10;
                    }
                    else 
                    {
                        propertyIndex=addressIndex_other;
                        addressIndex_other+=10;
                    }

                    ContactProperty* objAddressContactProperty;

                    if (street!=nil) 
                    {
                        objAddressContactProperty=[[ContactProperty alloc] init];
                        objAddressContactProperty.mDisplayName=displayName;
                        objAddressContactProperty.mContactPropId=propertyIndex;
                        objAddressContactProperty.mContactDataType=@"Text";
                        objAddressContactProperty.mContactPropertyString=street;
                        [objPhoneContact.mPropertyArray addObject:objAddressContactProperty];
                        [objAddressContactProperty release];
                    }

                    propertyIndex++;

                    if (city!=nil) 
                    {
                        objAddressContactProperty=[[ContactProperty alloc] init];
                        objAddressContactProperty.mDisplayName=displayName;
                        objAddressContactProperty.mContactPropId=propertyIndex;
                        objAddressContactProperty.mContactDataType=@"Text";
                        objAddressContactProperty.mContactPropertyString=city;
                        [objPhoneContact.mPropertyArray addObject:objAddressContactProperty];
                        [objAddressContactProperty release];
                    }

                    propertyIndex++;

                    if (state!=nil) 
                    {
                        objAddressContactProperty=[[ContactProperty alloc] init];
                        objAddressContactProperty.mDisplayName=displayName;
                        objAddressContactProperty.mContactPropId=propertyIndex;
                        objAddressContactProperty.mContactDataType=@"Text";
                        objAddressContactProperty.mContactPropertyString=state;
                        [objPhoneContact.mPropertyArray addObject:objAddressContactProperty];
                        [objAddressContactProperty release];
                    }

                    propertyIndex++;

                    if (zip!=nil) 
                    {
                        objAddressContactProperty=[[ContactProperty alloc] init];
                        objAddressContactProperty.mDisplayName=displayName;
                        objAddressContactProperty.mContactPropId=propertyIndex;
                        objAddressContactProperty.mContactDataType=@"Text";
                        objAddressContactProperty.mContactPropertyString=zip;
                        [objPhoneContact.mPropertyArray addObject:objAddressContactProperty];
                        [objAddressContactProperty release];
                    }

                    propertyIndex++;

                    if (country!=nil) 
                    {
                        objAddressContactProperty=[[ContactProperty alloc] init];
                        objAddressContactProperty.mDisplayName=displayName;
                        objAddressContactProperty.mContactPropId=propertyIndex;
                        objAddressContactProperty.mContactDataType=@"Text";
                        objAddressContactProperty.mContactPropertyString=country;
                        [objPhoneContact.mPropertyArray addObject:objAddressContactProperty];
                        [objAddressContactProperty release];
                    }

                    if(adressDictionaryRef)
                        CFRelease(adressDictionaryRef);
                }
            }

            if(multi)
                CFRelease(multi);

            [tempArray addObject:objPhoneContact];
            [objPhoneContact release];

            if(shouldReleasePool)
            {
                [innerPool drain];
                shouldReleasePool=NO;
            }

        }
        self.mPhoneContactArray=tempArray;
        CFRelease(iPhoneAddressBook);
        CFRelease(allPeople);

        [pool drain];

        return [tempArray autorelease];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:02:14.720

不，您必须对所有属性执行此操作，除此之外别无他法。然而，这里是所有这些获取细节的代码。这里可能有一些额外的东西，因为我是为我的应用程序做的。不一般。这里的联系人是我自己的对象，其中包含名称、公司和包含属性的属性数组等数据。这不是完美的代码，只是为了展示 ua 模型，分为两部分：

```
-(NSMutableArray*)getPhoneContacts
{

    NSLog(@"getPhoneContacts");

    NSAutoreleasePool *pool= [[NSAutoreleasePool alloc] init];

    NSMutableArray *tempArray=[[NSMutableArray alloc] init];
    ABAddressBookRef iPhoneAddressBook=ABAddressBookCreate();
    if(!iPhoneAddressBook)
    {
        DLog(@"unable to open addressBook");
    }
    for(i=0;i<[peopleArray count];i++)
    {

        if((i&255)==0)
        {
            innerPool= [[NSAutoreleasePool alloc] init];
            shouldReleasePool=YES;
        }

        ABRecordRef record=[peopleArray objectAtIndex:i];

        Contact *objPhoneContact=[[Contact alloc] init];
        objPhoneContact.contactType=STATIC_CONTACT;

        int32_t uniqueId=ABRecordGetRecordID(record);

        objPhoneContact.addressBookId=uniqueId;

        CFStringRef temp;

        temp=ABRecordCopyValue(record, kABPersonPrefixProperty);
        if (temp) {
            objPhoneContact.mPrefixName=[NSString stringWithString:(NSString*)temp];
            CFRelease(temp);
        }

        temp=ABRecordCopyValue(record, kABPersonMiddleNameProperty);
        if (temp) {
            objPhoneContact.mMiddleName=[NSString stringWithString:(NSString*)temp];
            CFRelease(temp);
        }

        temp=ABRecordCopyValue(record, kABPersonNicknameProperty);
        if (temp) {
            objPhoneContact.mNickName=[NSString stringWithString:(NSString*)temp];
            CFRelease(temp);
        }

        temp=ABRecordCopyValue(record, kABPersonSuffixProperty);
        if (temp) {
            objPhoneContact.mSuffixName=[NSString stringWithString:(NSString*)temp];
            CFRelease(temp);
        }

        ContactProperty* objAddressContactProperty;
        int propertyIndex=0;

        temp=ABRecordCopyValue(record, kABPersonFirstNamePhoneticProperty);
        if (temp) {

            propertyIndex=4;

            objAddressContactProperty=[[ContactProperty alloc] init];
            objAddressContactProperty.mDisplayName=@"PhoneticFirstName";
            objAddressContactProperty.mContactPropId=propertyIndex;
            objAddressContactProperty.mContactDataType=@"Text";
            objAddressContactProperty.mContactPropertyString=[NSString stringWithString:(NSString*)temp];
            [objPhoneContact.mPropertyArray addObject:objAddressContactProperty];
            [objAddressContactProperty release];

            CFRelease(temp);
        }

        temp=ABRecordCopyValue(record, kABPersonLastNamePhoneticProperty);
        if (temp) {

            propertyIndex=5;

            objAddressContactProperty=[[ContactProperty alloc] init];
            objAddressContactProperty.mDisplayName=@"PhoneticLastName";
            objAddressContactProperty.mContactPropId=propertyIndex;
            objAddressContactProperty.mContactDataType=@"Text";
            objAddressContactProperty.mContactPropertyString=[NSString stringWithString:(NSString*)temp];
            [objPhoneContact.mPropertyArray addObject:objAddressContactProperty];
            [objAddressContactProperty release];

            CFRelease(temp);
        }

        temp=ABRecordCopyValue(record, kABPersonJobTitleProperty);
        if (temp) {

            propertyIndex=6;

            objAddressContactProperty=[[ContactProperty alloc] init];
            objAddressContactProperty.mDisplayName=@"JobTitle";
            objAddressContactProperty.mContactPropId=propertyIndex;
            objAddressContactProperty.mContactDataType=@"Text";
            objAddressContactProperty.mContactPropertyString=[NSString stringWithString:(NSString*)temp];
            [objPhoneContact.mPropertyArray addObject:objAddressContactProperty];
            [objAddressContactProperty release];

            CFRelease(temp);
        }

        temp=ABRecordCopyValue(record, kABPersonDepartmentProperty);
        if (temp) {

            propertyIndex=7;

            objAddressContactProperty=[[ContactProperty alloc] init];
            objAddressContactProperty.mDisplayName=@"Department";
            objAddressContactProperty.mContactPropId=propertyIndex;
            objAddressContactProperty.mContactDataType=@"Text";
            objAddressContactProperty.mContactPropertyString=[NSString stringWithString:(NSString*)temp];
            [objPhoneContact.mPropertyArray addObject:objAddressContactProperty];
            [objAddressContactProperty release];

            CFRelease(temp);
        }
        NSDate *tempDate=nil;

        tempDate=(NSDate*)ABRecordCopyValue(record, kABPersonBirthdayProperty);
        if (tempDate) {

            propertyIndex=1401;

            objAddressContactProperty=[[ContactProperty alloc] init];
            objAddressContactProperty.mDisplayName=@"BirthDay";
            objAddressContactProperty.mContactPropId=propertyIndex;
            objAddressContactProperty.mContactDataType=@"Date";
            objAddressContactProperty.mContactPropertyString=[NSString stringWithFormat:@"%@",tempDate];
            [objPhoneContact.mPropertyArray addObject:objAddressContactProperty];
            [objAddressContactProperty release];

            [tempDate release];
           // CFRelease(temp);
        }

        temp=ABRecordCopyValue(record, kABPersonNoteProperty);
        if (temp) {

            propertyIndex=1901;

            objAddressContactProperty=[[ContactProperty alloc] init];
            objAddressContactProperty.mDisplayName=@"Note";
            objAddressContactProperty.mContactPropId=propertyIndex;
            objAddressContactProperty.mContactDataType=@"Text";
            objAddressContactProperty.mContactPropertyString=[NSString stringWithString:(NSString*)temp];
            [objPhoneContact.mPropertyArray addObject:objAddressContactProperty];
            [objAddressContactProperty release];

            CFRelease(temp);
        }
        NSDate *localSyncDate=[[DataModel sharedDataModel] getValueForKey:LOCAL_SYNC_TIME_FOR_MODIFICATION];
        // Check modified Date
        CFDateRef modDate = ABRecordCopyValue(record, kABPersonModificationDateProperty);
        //NSDate *lastSyncTime = [[NSDate alloc] initWithString:lastSyncTimeStr];

       DLog(@"Record's modification date is: %@",(NSDate*)modDate);
//        NSLog(@"%@  and %@",modDate,localSyncDate);
        NSComparisonResult result = [localSyncDate compare:(NSDate*)modDate];

        if (result==-1) {
            if (appDelegate.shouldUpdateContactsCounter && appDelegate.isSyncInProgress!=0) {
                appDelegate.updatedInDeviceCounter++;
            }
            DLog(@"lastSyncTime is: %@",localSyncDate);
            DLog(@"Record's modification date is: %@",(NSDate*)modDate);
        }

        CFRelease(modDate);
        DLog(@"Date Comparison Result is: %d",result);

        objPhoneContact.mDateComparisionResult = result;
        /*switch (result)
        {
            case NSOrderedAscending:
                DLog(@"moddate=%@ is in future from lastsynctime=%@", modDate, lastSyncTime); 
                // the contact has been modified/updated
                break;
            case NSOrderedDescending:
                DLog(@"moddate=%@ is in past from lastsynctime=%@", modDate, lastSyncTime);
                // No need to update the contact
                CFRelease(record);
                [objPhoneContact release];
                continue;
            case NSOrderedSame: DLog(@"moddate=%@ is the same as lastsynctime=%@", modDate, lastSyncTime); break;
            default: DLog(@"erorr dates %@, %@", modDate, lastSyncTime); break;
        }*/

        // Get NoteToSelf
        /*kABPersonNoteProperty*/

        temp=ABRecordCopyValue(record, kABPersonOrganizationProperty);

        if (temp!=nil)
        {

            NSUInteger OrganizationPropertyId=3;
            ContactProperty* objCompanyContactProperty=[[ContactProperty alloc] init];

            NSMutableString *companyname=[NSMutableString stringWithFormat:@"%@",(NSString*)temp];

            objCompanyContactProperty.mContactPropertyString=[companyname stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];;

            objCompanyContactProperty.mDisplayName=@"Company";

            objCompanyContactProperty.mContactPropId=OrganizationPropertyId;
            objCompanyContactProperty.mContactDataType=@"Text";
            [objPhoneContact.mPropertyArray addObject:objCompanyContactProperty];
            [objCompanyContactProperty release];

            CFRelease(temp);
        //    temp=nil;
        }

        if (ABPersonHasImageData(record))
        {

            CFDataRef* dataRef=ABPersonCopyImageData(record);
            NSData* imageData=[[NSData alloc] initWithData:(NSData*)dataRef];;

            UIImage *img = [ImageUtility resizedImageWithImage:[UIImage imageWithData:imageData] scaledToDimension:CGSizeMake(50, 50)]; // Scale it to 50x50px

            objPhoneContact.mUserPhotoData = [NSData dataWithData:UIImageJPEGRepresentation(img, 1.0f)];

           [imageData release];
            if(dataRef)
                CFRelease(dataRef);
        }

        ABMutableMultiValueRef multi;
        int multiCount=0;

        multi = ABRecordCopyValue(record, kABPersonDateProperty);

        multiCount=ABMultiValueGetCount(multi);
        if(multiCount ==0)
        {

        }
        else
        {

            int propertyIndex=1402;   

            for (CFIndex i = 0; i < multiCount; i++) 
            {
                ContactProperty* objPhoneContactProperty=[[ContactProperty alloc] init];

                objPhoneContactProperty.mContactPropertyString=[NSString stringWithFormat:@"%@",(NSDate*)ABMultiValueCopyValueAtIndex(multi, i)];
                objPhoneContactProperty.mDisplayName=(NSString*)ABMultiValueCopyLabelAtIndex(multi, i);
                objPhoneContactProperty.mDisplayName=[objPhoneContactProperty.mDisplayName stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"_$!<>"]];

                objPhoneContactProperty.mContactPropId=propertyIndex;
                objPhoneContactProperty.mContactDataType=@"Date";

                [objPhoneContact.mPropertyArray addObject:objPhoneContactProperty];
                [objPhoneContactProperty release];

                propertyIndex++;
            }
        }
        if(multi)
            CFRelease(multi);

        multi = ABRecordCopyValue(record, kABPersonPhoneProperty);

        NSUInteger phoneIndex_mobile=11;
        NSUInteger phoneIndex_iPhone=31;
        NSUInteger phoneIndex_home=51;
        NSUInteger phoneIndex_work=71;
        NSUInteger phoneIndex_main=91;
        NSUInteger phoneIndex_home_fax=111;
        NSUInteger phoneIndex_work_fax=131;
        NSUInteger phoneIndex_pager=151;
        NSUInteger phoneIndex_other=171;  

        multiCount=ABMultiValueGetCount(multi);
        if(multiCount ==0)
        {
            //objPhoneContact.mPhoneNum=@"";
        }
        else 
        {
            for( int i=0; i < multiCount; i++)
            {

                ContactProperty* objPhoneContactProperty=[[ContactProperty alloc] init];

                objPhoneContactProperty.mContactPropertyString=(NSString*)ABMultiValueCopyValueAtIndex(multi, i);
                objPhoneContactProperty.mDisplayName=(NSString*)ABMultiValueCopyLabelAtIndex(multi, i);
                objPhoneContactProperty.mDisplayName=[objPhoneContactProperty.mDisplayName stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"_$!<>"]];
                if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"mobile"]==NSOrderedSame)
                {
                    objPhoneContactProperty.mContactPropId=phoneIndex_mobile;
                    phoneIndex_mobile++;
                }
                else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"iPhone"]==NSOrderedSame)
                {
                    objPhoneContactProperty.mContactPropId=phoneIndex_iPhone;
                    phoneIndex_iPhone++;
                }
                else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"home"]==NSOrderedSame)
                {
                    objPhoneContactProperty.mContactPropId=phoneIndex_home;
                    phoneIndex_home++;
                }
                else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"work"]==NSOrderedSame)
                {
                    objPhoneContactProperty.mContactPropId=phoneIndex_work;
                    phoneIndex_work++;
                }
                else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"main"]==NSOrderedSame)
                {
                    objPhoneContactProperty.mContactPropId=phoneIndex_main;
                    phoneIndex_main++;
                }
                else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"HomeFAX"]==NSOrderedSame)
                {
                    objPhoneContactProperty.mContactPropId=phoneIndex_home_fax;
                    phoneIndex_home_fax++;
                }
                else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"WorkFAX"]==NSOrderedSame)
                {
                    objPhoneContactProperty.mContactPropId=phoneIndex_work_fax;
                    phoneIndex_work_fax++;
                }
                else if([objPhoneContactProperty.mDisplayName caseInsensitiveCompare:@"pager"]==NSOrderedSame)
                {
                    objPhoneContactProperty.mContactPropId=phoneIndex_pager;
                    phoneIndex_pager++;
                }
                else
                {
                    NSRange range1,range2,range3;

                    range1=[objPhoneContactProperty.mDisplayName rangeOfString:@"mobile" options:NSCaseInsensitiveSearch];
                    range2=[objPhoneContactProperty.mDisplayName rangeOfString:@"home" options:NSCaseInsensitiveSearch];
                    range3=[objPhoneContactProperty.mDisplayName rangeOfString:@"work" options:NSCaseInsensitiveSearch];

                    if (range1.location!=NSNotFound) 
                    {
                        objPhoneContactProperty.mContactPropId=phoneIndex_mobile;
                        phoneIndex_mobile++;
                    }
                    else if (range2.location!=NSNotFound) 
                    {
                        objPhoneContactProperty.mContactPropId=phoneIndex_home;
                        phoneIndex_home++;
                    }
                    else if (range3.location!=NSNotFound) 
                    {
                        objPhoneContactProperty.mContactPropId=phoneIndex_work;
                        phoneIndex_work++;
                    }
                    else 
                    {
                        objPhoneContactProperty.mContactPropId=phoneIndex_other;
                        phoneIndex_other++;
                    }
                }

                objPhoneContactProperty.mContactDataType=@"Phone";

                [objPhoneContact.mPropertyArray addObject:objPhoneContactProperty];
                [objPhoneContactProperty release];
            }
        }

        if(multi)
            CFRelease(multi);

        multi=ABRecordCopyValue(record,kABPersonEmailProperty);

        NSUInteger emailIndex_home=301;
        NSUInteger emailIndex_work=321;
        NSUInteger emailIndex_other=341;  //~400

        multiCount=ABMultiValueGetCount(multi);
        if(multiCount ==0)
        {
            //objPhoneContact.mEmailId=@"";
        }
        else 
        {
            for( int i=0; i < multiCount; i++)
            {
                ContactProperty* objEmailContactProperty=[[ContactProperty alloc] init];

                objEmailContactProperty.mContactPropertyString=(NSString*)ABMultiValueCopyValueAtIndex(multi, i);
                objEmailContactProperty.mDisplayName=(NSString*)ABMultiValueCopyLabelAtIndex(multi, i);
                objEmailContactProperty.mDisplayName=[objEmailContactProperty.mDisplayName stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"_$!<>"]];

                if([objEmailContactProperty.mDisplayName caseInsensitiveCompare:@"home"]==NSOrderedSame)
                {
                    objEmailContactProperty.mContactPropId=emailIndex_home;
                    emailIndex_home++;
                }
                else if([objEmailContactProperty.mDisplayName caseInsensitiveCompare:@"work"]==NSOrderedSame)
                {
                    objEmailContactProperty.mContactPropId=emailIndex_work;
                    emailIndex_work++;
                }

                else 
                {
                    objEmailContactProperty.mContactPropId=emailIndex_other;
                    emailIndex_other++;
                }

                objEmailContactProperty.mContactDataType=@"Email";

                [objPhoneContact.mPropertyArray addObject:objEmailContactProperty];
                [objEmailContactProperty release];
            }
        }

        if(multi)
            CFRelease(multi);

        NSUInteger imIndex_HomeUser=1601;
        NSUInteger imIndex_HomeService=1602;
        NSUInteger imIndex_WorkUser=1651;
        NSUInteger imIndex_WorkService=1652;
        NSUInteger imIndex_OtherUser=1701;
        NSUInteger imIndex_OtherService=1702;

        multi = ABRecordCopyValue(record, kABPersonInstantMessageProperty);

        multiCount=ABMultiValueGetCount(multi);
        if(multiCount ==0)
        {
            //objPhoneContact.mEmailId=@"";
        }
        else 
        {
            for(int i=0;i<multiCount;i++)
            {

                int propertyIndexUser=0;
                int propertyIndexService=0; 
```

# microcontroller - “6 通道 DMA”是什么意思？

> ID：10493081
> 
> 赞同：6
> 
> 时间：2012-05-08T05:32:30.993
> 
> 标签：microcontroller

当我浏览 TMS320F2806x (Piccolo) MCU 的架构时，我发现它的功能之一是 6 通道 DMA。您能否详细说明DMA*通道*是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T13:48:54.713

DMA 允许在不使用 CPU 的情况下将数据从一个位置传输到另一个位置。它由“DMA 控制器”完成。多通道 DMA 控制器一次可以促进多个 DMA 传输。Piccolo 可以同时进行 6 次 DMA 传输。

# html - 在背景图片上添加填充

> ID：10493082
> 
> 赞同：0
> 
> 时间：2012-05-08T05:32:46.520
> 
> 标签：html, css

请帮助我使用此代码。

CSS 代码

```
 #nav, #nav ul
            {
                width:1000px;
                background-color: #F3F3F3;
                margin: 0 auto;

            }

     #nav li
        {
            float: left;
            padding-top:3px;
            height:20px;
            text-align:left;
            text-transform:uppercase; 
            position: relative; 
            display: block;
            font-family: Tahoma;
            font-size: 10px;
            font-weight:bold;
            text-align: left;
            text-decoration: none;
            padding:10px 15px 0 15px;
            background:url(../image/border.png) no-repeat right center;
        } 
```

我有问题

```
#nav li:hover
    {   

        background: #3EBBEC url(../image/arrow.png) no-repeat left; 
        color: #FFFFFF;
        margin:0 auto;
    } 
```

HTML 代码

```
<html>
<head>Test Page</head>
<body>
<ul>
<li id="nav">test1</li>
<li id="nav">test2</li>
</ul>
</body>
</html> 
```

总代码如下。在这里，我需要删除文本和图像“箭头”之前的空格。我将如何做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:36:36.243

```
.nav li{
   padding-left: 20px;
} 
```

我刚刚意识到您当前的 css 不正确，这不会对您的 html 生效。你应该使用：

```
li.nav{
   padding-left: 20px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:30:44.813

替换这个 CSS 看看会发生什么

```
#nav li:hover
    {   

        background: url("../image/arrow.png") no-repeat scroll 4px 10px #3EBBEC; 
        color: #FFFFFF;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:40:22.660

要删除图像，您必须删除此行

```
background:url(images/arrow.png) no-repeat left center; 
```

关于你需要这样做的空间：

```
li {float:right; display:block;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T05:46:58.163

下面的代码永远不会工作....

```
.nav li
{
  padding:0px;
  margin: 0px;
}

.nav li:hover
{
  background:url(images/arrow.png) no-repeat left center;
  text-align:center;
  margin 0 auto;

} 
```

采用，

```
li.nav
{
  padding:0px;
  margin: 0px;
}

li.nav:hover
{
  background:url(images/arrow.png) no-repeat left center;
  text-align:center;
  margin: 0 auto;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T05:53:48.090

ul 元素也有默认样式，如果你想删除所有的空间，尝试添加这个

```
ul{
  margin:0px;
  padding:0px;
}
li.nav{
  padding:0px;
  margin: 0px;
}

li.nav:hover{
  background:url(images/arrow.png) no-repeat left center;
  text-align:center;
  margin: 0 auto;
} 
```

你也可能想要这个：

```
ul{
margin:0px;
padding:0px;
list-style-type: none;
} 
```

# r - ggplot2 - 抖动和位置闪避一起

> ID：10493084
> 
> 赞同：40
> 
> 时间：2012-05-08T05:33:05.750
> 
> 标签：r, ggplot2

我正在尝试从 GGplot2 研讨会[http://dl.dropbox.com/u/42707925/ggplot2/ggplot2slides.pdf](http://dl.dropbox.com/u/42707925/ggplot2/ggplot2slides.pdf)重新创建一个数字。

在这种情况下，我试图生成示例 5，其中抖动的数据点会受到闪避。当我运行代码时，这些点以正确的线为中心，但没有抖动。

这是直接来自演示文稿的代码。

```
set.seed(12345)
hillest<-c(rep(1.1,100*4*3)+rnorm(100*4*3,sd=0.2),
       rep(1.9,100*4*3)+rnorm(100*4*3,sd=0.2))
rep<-rep(1:100,4*3*2)
process<-rep(rep(c("Process 1","Process 2","Process 3","Process 4"),each=100),3*2)
memorypar<-rep(rep(c("0.1","0.2","0.3"),each=4*100),2)
tailindex<-rep(c("1.1","1.9"),each=3*4*100)
ex5<-data.frame(hillest=hillest,rep=rep,process=process,memorypar=memorypar, tailindex=tailindex)
stat_sum_df <- function(fun, geom="crossbar", ...) {stat_summary(fun.data=fun, geom=geom, ...) }

dodge <- position_dodge(width=0.9) 
p<- ggplot(ex5,aes(x=tailindex ,y=hillest,color=memorypar)) 
p<- p + facet_wrap(~process,nrow=2) + geom_jitter(position=dodge) +geom_boxplot(position=dodge)  
p 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2014-05-24T10:13:46.327

在`ggplot2`版本`1.0.0`中，有一个新的职位被命名`position_jitterdodge()`为这种情况。这个位置应该在里面使用，`geom_point()`并且应该在`fill=`里面使用`aes()`来显示通过哪个变量来躲避你的数据。为了控制躲避参数的宽度，`dodge.width=`应该使用。

```
ggplot(ex5, aes(x=tailindex, y=hillest, color=memorypar, fill=memorypar)) +
      facet_wrap(~process, nrow=2) +
      geom_point(position=position_jitterdodge(dodge.width=0.9)) +
      geom_boxplot(fill="white", outlier.colour=NA, position=position_dodge(width=0.9)) 
```

![在此处输入图像描述](../Images/62c62bca9d6f13deb61a524f983c8da3.png)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-05-08T09:57:55.260

**编辑**`ggplot2`：版本 1.0.0有一个更好的解决方案，使用`position_jitterdodge`. 请参阅@Didzis Elferts 的回答。注意`dodge.width`控制闪避的宽度和`jitter.width`控制抖动的宽度。

我不确定代码如何在 pdf 中生成图表。

但是这样的事情会让你接近你所追求的吗？

我将`tailindex`and转换`memorypar`为数字；将它们加在一起；结果是`geom_jitter`图层的 x 坐标。可能有一种更有效的方法来做到这一点。另外，我想看看如何躲避`geom_boxplot`和`geom_jitter`并且没有抖动，将如何在 pdf 中生成图形。

```
library(ggplot2)
dodge <- position_dodge(width = 0.9)
ex5$memorypar2 <- as.numeric(ex5$tailindex) + 
  3 * (as.numeric(as.character(ex5$memorypar)) - 0.2) 

p <- ggplot(ex5,aes(x=tailindex , y=hillest)) +
   scale_x_discrete() +
   geom_jitter(aes(colour = memorypar, x = memorypar2), 
     position = position_jitter(width = .05), alpha = 0.5) +
   geom_boxplot(aes(colour = memorypar), outlier.colour = NA, position = dodge) +
   facet_wrap(~ process, nrow = 2)
p 
```

![在此处输入图像描述](../Images/5159261d8569051eb262b79aff3cecc9.png)

# performance - 在 SQL Server 中返回单选而不是多选

> ID：10493089
> 
> 赞同：0
> 
> 时间：2012-05-08T05:33:42.590
> 
> 标签：performance, sql-server-2008, stored-procedures

我想从 3 个不同的表中返回 3 个单个值。

我想知道考虑到资源使用和性能（在存储过程中），这些代码中哪一个更好：

代码 1：

```
declare @acc_cnt int, @selected_item int, @worker_cnt int
select @acc_cnt=count(0) from accounts
select @selected_item=id from items where name='something'
select @worker_cnt=count(0) from workers
select @acc_cnt ,@selected_item,@worker_cnt 
```

代码 2：

```
select count(0) from accounts
select id from items where name='something'
select count(0) from workers 
```

返回 3 次选择和单次选择之间有区别吗？我正在使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:40:33.830

2 号将*稍微*提高性能，因为您没有声明变量并节省少量内存。

注意：性能改进几乎是不可估量的。

# openid - 如何在依赖方的登录页面上列出我的 OpenID 提供者？

> ID：10493095
> 
> 赞同：0
> 
> 时间：2012-05-08T05:34:27.710
> 
> 标签：openid, google-openid

**是否有任何注册流程才能成为 openid 提供者**

> 我开发了一个 openid 提供程序，我想在所有支持 openid 的网站中将其显示为 openid 提供程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:45:57.440

哪有这回事。成为 openid 提供者并不是什么神奇的事情——其他网站必须专门对你实施信任。您提交系统并使其作为选项出现在其他人的网站上的中心位置不存在。在大多数情况下，很难让人们注册的网站实施 openid 以允许在其他知名网站上拥有现有帐户的人通过信任 Google、Yahoo、Twitter 或 AOL 等知名提供商来跳过注册过程。这些网站中的任何一个都不可能将这种信任回报给您的网站。

# c# - C# 中类似 TestNG 的框架

> ID：10493100
> 
> 赞同：1
> 
> 时间：2012-05-08T05:35:18.153
> 
> 标签：c#, java, testng

我目前正在从事一个项目，我必须选择一个自动化 C# 测试脚本的框架。我已经在 J​​ava 中使用 TestNG 完成了这项工作。但是对于 C#，我还没有找到合适的框架。C# 中是否有类似 TestNG 的框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:49:26.977

我认为[MBUnit](http://www.mbunit.com/)可能是最接近的，看看，如果我没记错的话，mbunit应该很容易扩展，也许你可以通过一些努力来填补空白。

# jquery - 哪里可以更快地加载 PHP 信息、JS 变量或元素选择器？

> ID：10493106
> 
> 赞同：0
> 
> 时间：2012-05-08T05:35:50.260
> 
> 标签：jquery, performance

我想知道一旦在 PHP 中存储信息，哪种方式更好、更有效。假设数据*将*来自 PHP 变量，并*最终*将在 javascript 中使用：

1.  立即存储为 js 变量，然后在函数中使用变量

    ```
    <script type="text/javascript">
           var information = "lots and lots and lots of text";
              // and then later use... 
    ```

或者

2 .. 将其加载到 div 中，稍后使用 jquery '调用'它

```
 <div id="whatever" information="lots and lots and lots of text"></div> 
```

只需使用 jquery 调用“信息”元素

一种方式更好吗？还是我在浪费时间调查这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T05:37:24.307

**最快的方法是 js 变量。**

它并没有说这是最好的方法，这取决于您的需求，但它是最快的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T05:37:54.557

我认为使用变量比使用 HTML 元素**更有效。**在 HTML 元素中存储信息将花费更多时间（我相信），因为它将**解析 DOM**以获取信息。变量可以直接访问。

# jquery - ASP.NET WebAPI - 如何使用 $.getJSON 传递对象

> ID：10493111
> 
> 赞同：3
> 
> 时间：2012-05-08T05:36:11.673
> 
> 标签：jquery, asp.net-mvc, asp.net-web-api

我在下面有一个 ASP.NET WebAPI 控件：

```
public SomeObject GetBenchMarkData(Comment comment)
        {
            //do stuff
        } 
```

在客户端，我在下面尝试：

```
var comment = { ID: 0, Text: $('#text').val(), Author: $('#author').val(), Email: $('#email').val(), GravatarUrl: '' };
            var json = JSON.stringify(comment);
            $.getJSON("api/MintEIQAPI/" + json, 
```

问题是 GetBenchMarkData 操作永远不会被上面的 getJSON 查询调用。

有人可以帮助我，我做错了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-08T21:34:57.377

默认情况下，如果您通过 GET 传递复杂类型，则需要使用 FromUri 属性装饰操作参数。

在客户端：

```
$.get('api/movies/test',
      {Name:'Henrique', Age:'24'}, 
      function (res) {
           console.log(res);
      }
); 
```

在控制器上：

```
public void Get([FromUri] Customer c)
{
    ...
} 
```

这样你就告诉 WebApi 从查询字符串中反序列化参数。另外，请注意，您不会对传递给服务器的对象进行字符串化。

这篇博文解释了 WebApi 和 MVC 模型绑定的区别：http: [//blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T05:49:58.423

问题是`getJSON`执行`GET`对服务器的请求。要传入整个对象，**您必须执行一个`POST`request**。

在**GET 的情况下，**您传递给 jQuery Ajax 调用的 JavaScript 对象通常会转换为 URL 编码参数，然后可以由您的服务器端方法单独获取，例如

```
$.ajax({
  url: "/someurl/getbenchmarkdata",
  data: JSON.stringify({ filterValue: "test" }),
  type: "GET"
  ... 
```

});

在你的服务器端

```
public SomeObject GetBenchMarkData(String filterValue)
{
   ...
} 
```

相反，**如果要传输整个对象**，则应将 ajax 调用作为 POST 执行，例如

```
$.ajax({
    url: "/someurl/benchmarkdata",
    type: "POST",
    data: JSON.stringify({ title: "My title"}),
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    ...
}); 
```

并且您的服务器端方法必须采用具有`Title`type 属性的对象`String`。

我的[博文在这里也可能有帮助](http://juristr.com/blog/2011/08/posting-json-data-to-aspnet-mvc-3-web/)。

# c# - servicemodel异常的异常处理

> ID：10493112
> 
> 赞同：2
> 
> 时间：2012-05-08T05:36:22.713
> 
> 标签：c#, exception-handling

我有一个 wpf 应用程序，它使用 wcf 服务。我希望在服务请求期间捕获任何异常。所以我有这样的东西

```
 try{  call to service }
  catch(CommunicationObjectFaultedException){}
   catch (EndpointNotFoundException){} 
```

我如何创建一个函数来处理异常，而不是为每个请求执行上述操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:33:03.457

一个 lambda 会完成这项工作，如下所示：

```
 public static bool TryExecute(Action a) {
        try {
            a();
            return true;
        }
        catch (CommunicationObjectFaultedException) { }
        catch (EndpointNotFoundException) { }
        return false;
    } 
```

并像这样使用：

```
 bool ok = TryExecute(() => {
            // call to service
            //...
        }); 
```

# iphone - Objective-C UILabel 作为超链接

> ID：10493119
> 
> 赞同：0
> 
> 时间：2012-05-08T05:37:07.273
> 
> 标签：iphone, objective-c, ios

我正在尝试`UILabel`为`UIWebView`. 我怎样才能使一个`UILabel`作为超链接工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T05:49:30.513

您可以使用 UITapGestureRecognizer，它可以实现您想要的类似功能 -

```
UILabel *myLabel = [[UILabel alloc] initWithFrame:];//Define label here as per needs
myLabel.userInteractionEnabled = YES;
UITapGestureRecognizer *gr = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(myAction:)];
[myLabel addGestureRecognizer:gr];
gr.numberOfTapsRequired = 1;
gr.cancelsTouchesInView = NO;
[self.view addSubview:myLabel]; 
```

现在行动——

```
- (void) myAction: (UITapGestureRecognizer *) gr {
    // Define actions here
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T05:40:43.743

一种可能的解决方案是使用`UIButton`with 类型`UIButtonTypeCustom`而不是`UILabel`. 它看起来像一个标签，并且是可点击的。

您还可以考虑第三方实现，例如 TTLabel of [three20](https://github.com/facebook/three20)和[Fancy UILabels](http://furbo.org/2008/10/07/fancy-uilabels/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-26T10:06:22.417

我找到了一些超链接UILabe的代码......希望它会有所帮助：来源：[http ://sickprogrammersarea.blogspot.in/2014/03/adding-links-to-uilabel.html](http://sickprogrammersarea.blogspot.in/2014/03/adding-links-to-uilabel.html)

```
#import "ViewController.h"
#import "TTTAttributedLabel.h"
@interface ViewController ()

@end

@implementation ViewController
{
UITextField *loc;
TTTAttributedLabel *data;
}

- (void)viewDidLoad
{
[super viewDidLoad];
UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(5, 20, 80, 25) ];
[lbl setText:@"Text:"];
[lbl setFont:[UIFont fontWithName:@"Verdana" size:16]];
[lbl setTextColor:[UIColor grayColor]];
loc=[[UITextField alloc] initWithFrame:CGRectMake(4, 20, 300, 30)];
//loc.backgroundColor = [UIColor grayColor];
loc.borderStyle=UITextBorderStyleRoundedRect;
loc.clearButtonMode=UITextFieldViewModeWhileEditing;
//[loc setText:@"Enter Location"];
loc.clearsOnInsertion = YES;
loc.leftView=lbl;
loc.leftViewMode=UITextFieldViewModeAlways;
[loc setDelegate:self];
[self.view addSubview:loc];
[loc setRightViewMode:UITextFieldViewModeAlways];
CGRect frameimg = CGRectMake(110, 70, 70,30);
UIButton *srchButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
srchButton.frame=frameimg;
[srchButton setTitle:@"Go" forState:UIControlStateNormal];
[srchButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
srchButton.backgroundColor=[UIColor clearColor];
[srchButton addTarget:self action:@selector(go:) forControlEvents:UIControlEventTouchDown];
[self.view addSubview:srchButton];
data = [[TTTAttributedLabel alloc] initWithFrame:CGRectMake(5, 120,self.view.frame.size.width,200) ];
[data setFont:[UIFont fontWithName:@"Verdana" size:16]];
[data setTextColor:[UIColor blackColor]];
data.numberOfLines=0;
 data.delegate = self;
data.enabledTextCheckingTypes=NSTextCheckingTypeLink|NSTextCheckingTypePhoneNumber;
[self.view addSubview:data];
}
- (void)attributedLabel:(TTTAttributedLabel *)label didSelectLinkWithURL:(NSURL *)url
{
NSString *val=[[NSString alloc]initWithFormat:@"%@",url];
if ([[url scheme] hasPrefix:@"mailto"]) {
          NSLog(@" mail URL Selected : %@",url);
    MFMailComposeViewController *comp=[[MFMailComposeViewController alloc]init];
    [comp setMailComposeDelegate:self];
    if([MFMailComposeViewController canSendMail])
    {
        NSString *recp=[[val substringToIndex:[val length]] substringFromIndex:7];
        NSLog(@"Recept : %@",recp);
        [comp setToRecipients:[NSArray arrayWithObjects:recp, nil]];
        [comp setSubject:@"From my app"];
        [comp setMessageBody:@"Hello bro" isHTML:NO];
        [comp setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
        [self presentViewController:comp animated:YES completion:nil];
    }

}
else{
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:val]];
}
}
-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error{
if(error)
{
    UIAlertView *alrt=[[UIAlertView alloc]initWithTitle:@"Erorr" message:@"Some error occureed" delegate:nil cancelButtonTitle:@"" otherButtonTitles:nil, nil];
    [alrt show];
    [self dismissViewControllerAnimated:YES completion:nil];
}
else{
    [self dismissViewControllerAnimated:YES completion:nil];
}
}

- (void)attributedLabel:(TTTAttributedLabel *)label didSelectLinkWithPhoneNumber:(NSString *)phoneNumber
{
NSLog(@"Phone Number Selected : %@",phoneNumber);
UIDevice *device = [UIDevice currentDevice];
if ([[device model] isEqualToString:@"iPhone"] ) {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:%@",phoneNumber]]];
} else {
    UIAlertView *Notpermitted=[[UIAlertView alloc] initWithTitle:@"Alert" message:@"Your device doesn't support this feature." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [Notpermitted show];
}
}
-(void)go:(id)sender
{
[data setText:loc.text];
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
NSLog(@"Reached");
[loc resignFirstResponder];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T05:40:55.273

您只需检查此链接，这将对您有所帮助。尝试一次，如果它对您有帮助，请通知我们。

[如何使特定单词在文本中的含义可触摸？](https://stackoverflow.com/questions/10478878/how-to-make-a-specific-word-touchable-for-its-meaning-in-a-text)

# php - 无法在主页或类别页面查看产品列表

> ID：10493124
> 
> 赞同：0
> 
> 时间：2012-05-08T05:37:29.970
> 
> 标签：php, magento

我在 magento 工作，我添加了一种产品并将其分配给几个类别。我想在我分配它的主页和类别页面中查看此产品。

我在 list.phtml 中有以下代码

```
<?php $_productCollection=$this->getLoadedProductCollection() ?>
<?php if(!$_productCollection->count()): ?>
<p class="note-msg"><?php echo $this->__('No Products Found in this Category') ?></p>
<?php endif: ?> 
```

但这总是显示**在此类别中未找到任何产品**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:12:27.640

为了能够回答这个问题，需要更多信息。

你能做到以下几点。

确保您添加的产品是：

1.  启用
2.  设置为“目录，搜索”
3.  设置为“应税商品”
4.  设置为正股票价值
5.  设置为“有货”

一旦您仔细检查了所有这些，请转到产品网址。我的意思是，打开产品，找到它的“URL Key”值，然后使用该产品密钥导航到您的项目 url。IE ：

www.yourproject/testproducturlkey.html

或者

www.yourproject/index.php/testproducturlkey.html

取决于您如何设置项目。您也可以在搜索栏中输入产品 sku 值，然后尝试查找类似的产品。如果您能够查看此产品，那么我们已准备好进一步调试。你能确认你能看到这个产品在前端正确呈现吗？

# c# - 使用 C# 打开并发布到标签页

> ID：10493125
> 
> 赞同：0
> 
> 时间：2012-05-08T05:37:39.657
> 
> 标签：c#, facebook-graph-api, facebook-c#-sdk

我可以使用 open graph api 和 c# 发布到页面。但是我如何在标签页中发布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:57:46.050

页面选项卡只是安装在页面上的应用程序。您可以在 上“发布”给他们`graph.facebook.com/PAGE_ID/tabs/APP_ID`。

[http://developers.facebook.com/docs/reference/api/page/#tabs](http://developers.facebook.com/docs/reference/api/page/#tabs)

通过 API，您可以在页面中添加/删除选项卡。您可以给他们一个自定义名称和图标。

# algorithm - 大文本中给定关键字的最短短语的长度

> ID：10493128
> 
> 赞同：1
> 
> 时间：2012-05-08T05:38:00.500
> 
> 标签：algorithm, data-structures

这个问题是在一次采访中向我的一位朋友提出的。

给定两个关键字，我们必须在大文本中找到给定关键字的最短短语的长度。关键字可以在该文本中以任何顺序出现。约束：保持高效的数据结构，这样每次文本都不需要为不同关键字的查询解析

> 例如。关键词：“一”、“四” 文字：“一二三四五四六一”
> 
> 这里最短的短语是“四六一”而不是“一二三四”

我们想到的解决方案是：用文本的所有单词构建一个 BST。每个节点维护单词的位置。（这将是一个排序列表）当查询来搜索 [O(logn)] 两个词时，找到它们在 [O(n)] 中的位置之间的最小差异，从而使其有效地 [O(nlogn)]。

我们能做得更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:51:30.650

您可以将哈希表用于反向索引，即从单词（关键字）到它们在文本中位置的排序列表的哈希表。当你得到查询的两个关键字时，查找它们的关联记录就是 O(1) 操作。

找到发生位置之间的最小差异是 O(k) 操作，其中 k 是较长发生列表的长度。在异常情况下，可能是 k 接近于 n，但在实际使用中并非如此（除非您使用“the”和“a”作为两个关键字，但这些类型的词，称为停用词，通常被排除在完整的无论如何文本搜索）。

在通常的设置中，k 与 n 相比非常小，所以这应该非常快，即 O(1) + O（更常见关键字的出现次数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:09:48.973

看起来这可以使用[Dynamic Programming](http://en.wikipedia.org/wiki/Dynamic_programming)解决。在不失一般性的情况下，我可以将问题重新表述为：

> 给定搜索空间`S = {s1, s2, ..., sn}`，一个针对`(si, sj)`，我们必须找到`(k, l)`这样的位置对：
> 
> 1.  `(sk, sl) == (si, sj)`
> 2.  `distance(k, l)`是最小值。

可以通过以下方式制定该问题的递归解决方案：

> `Cost(m) =`
> 
> 1.  `LARGEST_NUMBER, if m = 0`
> 2.  `Min (Cost(m-1), distance(S[m], Latest_si)), if m > 0 and S[m] == sj`
> 3.  `Min (Cost(m-1), distance(S[m], Latest_sj)), if m > 0 and S[m] == si`
> 4.  `Cost(m-1), if m > 0 and S[m] != (si, sj)`

在哪里，

1.  `Cost(m)`是优化函数。`(si, sj)`它表示搜索空间中的最小距离`S[1:m]`。
2.  `Latest_si`是 的最新位置`si`。
3.  `Latest_sj`是 的最新位置`sj`。

这可以转换为空间复杂度为to store的`O(n)`自下而上循环。`O(n)``Cost`

这是上述算法在 Python 中的实现：

```
def min_phrase (S, si, sj):
  Cost = []
  for i in S:
    Cost.append([len(S), [-1, -1]])

  latest_si = -1
  latest_sj = -1

  for idx, v in enumerate(S):
    if v == si:
      if latest_sj >=0:
        cost = idx - latest_sj
        if cost < Cost[idx - 1][0]:
          Cost[idx] = [cost, [latest_sj, idx]]
        else:
          Cost[idx] = Cost[idx - 1]
      else:
        Cost[idx] = Cost[idx - 1]

      latest_si = idx

    elif v == sj:
      if latest_si >=0:
        cost = idx - latest_si
        if cost < Cost[idx - 1][0]:
          Cost[idx] = [cost, [latest_si, idx]]
        else:
          Cost[idx] = Cost[idx - 1]
      else:
        Cost[idx] = Cost[idx - 1]

      latest_sj = idx

    else:
      Cost[idx] = Cost[idx - 1]

  return Cost[len(S) - 1]

if __name__ == '__main__':
  S = ("one", "two", "three", "four", "five", "four", "six", "one")
  si = "one"
  sj = "four"

  result = min_phrase(S, si, sj)
  if result[1][0] == -1 or result[1][1] == -1:
    print "No solution found"
  else:
    print "Cost: {0}".format(result[0])
    print "Phrase: {0}".format(" ".join(S[result[1][0] : result[1][1] + 1])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:21:27.863

First split up the text in phrases. Assign a number to each of these phrases. Now each word in the text is present in some of these phrases. Put the phrase lengths in an array. Put the words in a hash table, with the numbers of the phrases in which they are present as an ordered array.

Now when we want the shortest phrase containing two words, first get the two prase-arrays for the words, then do a set intersection, then look up the phrase lengths for the resulting phrase numbers. Pick the shortest.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T12:03:32.147

我可能错过了重点，但这看起来可以使用`String[] text`O(n) 中的简单数组而不是一些花哨的数据结构来完成。

*   1* 将文本加载到数组中。
*   2* 找到关键字的位置`x`并跟踪其位置。
*   3* 找到关键字的位置`y`并跟踪其位置。
*   4* 标记 x 和 y 之间的距离。
*   5* 第一次设置`minx = x`和`miny = y`
*   6* 不断寻找 x 和 y，交替，每次找到新的更小的距离时改变 minx 和 miny 的值。
*   7* 最后返回以 minx 和 miny 为界的子字符串

# c++ - 使用 Win32/MFC 加密数据

> ID：10493130
> 
> 赞同：1
> 
> 时间：2012-05-08T05:38:06.523
> 
> 标签：c++, winapi, encryption, mfc, cryptography

我想使用公钥加密发送到服务器的数据。我在互联网上搜索使用 Win32 或 MFC 执行此操作，但对使用的不同 API（如 CryptExportKey、CryptImportKey、CryptGenKey 等）感到困惑。谁能指出我可以学习如何做到这一点的一些资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:32:47.117

您有两个选项，较新的[CNG](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376210%28v=vs.85%29.aspx) api 或较旧的[CryptoAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/ms721572%28v=vs.85%29.aspx#_security_cryptoapi_gly)。这是 Windows 上加密的两个本机代码接口。没有任何 MFC 特定的。CNG 可能不是 32 位的，但 CryptoAPI 是虽然您可能需要定义

```
_WIN32_WINNT 
```

启用该支持。

# iphone - 为客户使用 MDM 供应商签署 CSR

> ID：10493138
> 
> 赞同：1
> 
> 时间：2012-05-08T05:38:58.037
> 
> 标签：iphone, ios, apple-push-notifications, mdm, csr

为客户使用 MDM 供应商签署 CSR。

我想为客户确认 MDM Vendor Signing CSR 的使用情况。签名的 CSR 上传到 Apple 的通知门户后，客户会收到客户移交给 MDM 供应商的 APNS 证书。

MDM Vendor 使用的证书在哪里？

它是否用于捆绑在注册资料中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:51:29.007

是的，如果您询问从[https://identity.apple.com/pushcert/](https://identity.apple.com/pushcert/)下载的 .pem 格式的 APNS 证书。此 apns 证书包含使用 IPCU 生成注册配置文件时应使用的主题。

此详细信息在[MDM_Protocol](https://media.blackhat.com/bh-us-11/Schuetz/BH_US_11_Schuetz_InsideAppleMDM_WP.pdf) pdf 中提供，搜索“APSP”

# parsing - 解析搜索结果

> ID：10493142
> 
> 赞同：0
> 
> 时间：2012-05-08T05:39:39.907
> 
> 标签：parsing

我想去[这个网站](http://food.guidingstars.com/Templates/FoodFinder.aspx?word=fat)，点击列出的每个食品，点击“查看更多详细信息”，然后将整个营养成分标签复制到文本编辑器中。

我被困在几个地方：

*   首先，当我点击食物列表上的“查看页面源代码”时，我没有看到每个列表的 <a> </a>，而且我看到的搜索结果解析器似乎依赖于那个 html 标签。
*   其次，我不知道如何编写脚本来实际跟踪每个食品的链接。
*   第三，我不知道如何告诉脚本单击“查看更多详细信息”。

任何帮助深表感谢！

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:47:34.790

好吧，您似乎需要帮助的所有事情都是大量的工作。

我给你一个提示。食物列表是通过 ajax 加载的。注意 PageNo 参数。使用正则表达式在结果中查找链接。

来自谷歌开发工具：

网址： http: [//food.guidingstars.com/ajax/pages/foodfindergetfood.aspx](http://food.guidingstars.com/ajax/pages/foodfindergetfood.aspx)

查询参数：_:1336455942029 : categoryID:-1 sortBy:GuidingStars PageNo:2 Filter:-1 back:word=fat pathBreadCrumbs: word:fat

# iphone - 如何从我们的服务器中找到发送给用户的 Apple 推送通知？

> ID：10493145
> 
> 赞同：7
> 
> 时间：2012-05-08T05:40:17.007
> 
> 标签：iphone, ios, apple-push-notifications, apns-php

我是 iPhone 应用程序中 Apple 推送通知服务的新手。我已经学习了这些教程和苹果文档，

*   www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12
*   www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2

我们正在将通知从我们的服务器 (PHP) 推送到 Apple Push Notification Server，APNS 会将通知推送到设备。*在这种情况下，我们如何知道通知是否已从我们的服务器成功发送给用户？如果我们向所有订阅用户（超过 100 个用户）发送通知，我们可以为这 100 个用户提供发送报告吗？*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T05:47:25.787

APNS 不会告诉您消息是否成功传递。您可以获得的最接近的方法是轮询其[反馈服务](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Appendixes/BinaryProviderAPI.html#//apple_ref/doc/uid/TP40008194-CH106-SW4)，以查看您的应用程序是否已从设备上卸载。查看此 SO 帖子以了解如何：[查询 APNs 反馈服务器的 PHP 技术](https://stackoverflow.com/questions/1278834/php-technique-to-query-the-apns-feedback-server)

您可以做的是让您的 iOS 应用程序在推送通知到达时记录一些内容，`application:didReceiveRemoteNotification`但这仅在您的应用程序在前台运行时才有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T05:48:47.630

本地和[推送通知指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)说：

> 通知的传递是“尽力而为”，不能保证。

但是，文档中描述了一个反馈服务：

> Apple Push Notification Service 包括一项反馈服务，APN 会不断更新每个应用程序的失败交付尝试设备列表

# asp.net - 实体和 ASP.NET 成员资格 - 如何检索用户？

> ID：10493156
> 
> 赞同：0
> 
> 时间：2012-05-08T05:41:05.087
> 
> 标签：asp.net, asp.net-mvc, entity-framework, c#-4.0

我有一个实体查询，它使用 aspnet_Users 的 UserID 以及表单提交来存储信息。如何访问实体中的 aspnet_users 表？我是否必须创建一个新的数据模型才能访问内置表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:46:49.937

根据[Entity Framework code first aspnet_Users mapping / joins](https://stackoverflow.com/questions/6514733/entity-framework-code-first-aspnet-users-mapping-joins)，不建议为 aspnet_* 表创建 EF 模型。相反，您应该将 ASPNET API 用于角色/成员资格提供程序。如果与其他表共享数据，请创建视图并且不要更新 aspnet_* 表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:52:48.080

Asp Net SQL Membership 提供程序“开箱即用”通过 SQL 客户端连接提供自己的功能，因此对于实体框架，您还需要另一个连接字符串。

正如@rt2800 所说，不要直接更新成员表 - 使用 Membership API。

但是出于只读查询的目的，我建议可以在`aspnet_users / aspnet_membership`（加入 UserId）上创建一个 SQL 视图并将其包含在您的 EF 模型中。类似的东西`dbo.vw_aspnet_MembershipUsers`。

# android - 完成查询后的列表重新排列

> ID：10493165
> 
> 赞同：0
> 
> 时间：2012-05-08T05:42:36.977
> 
> 标签：android, sqlite, listview, sqliteopenhelper

创建可搜索的联系人类型的应用程序。下面是我的代码

```
public class EmployeeList extends Activity {

    protected EditText searchText;
    protected SQLiteDatabase db;
    protected Cursor cursor, listcursor;
    protected ListAdapter adapter;
    protected ListView employeeList;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        db = (new DatabaseHelper(this)).getWritableDatabase();
        searchText = (EditText) findViewById (R.id.searchText);
        employeeList = (ListView) findViewById (R.id.list);

        listcursor = db.rawQuery("SELECT * FROM employee",null);

        adapter = new SimpleCursorAdapter(
                this, 
                R.layout.employee_list_item, 
                listcursor, 
                new String[] {"firstName", "lastName", "title"}, 
                new int[] {R.id.firstName, R.id.lastName, R.id.title});
        employeeList.setAdapter(adapter);
    }

        public void search(View view) {
            // || is the concatenation operation in SQLite
                    cursor = db.rawQuery("SELECT _id, firstName, lastName, title FROM employee WHERE firstName || ' ' || lastName LIKE ?", 
                                                    new String[]{"%" + searchText.getText().toString() + "%"});
                    adapter = new SimpleCursorAdapter(
                                    this, 
                                    R.layout.employee_list_item, 
                                    cursor, 
                                    new String[] {"firstName", "lastName", "title"}, 
                                    new int[] {R.id.firstName, R.id.lastName, R.id.title});
                    employeeList.setAdapter(adapter);

                                        } 
```

}

问题出在从编辑文本中清除单词之后。它应该回到以前的列表视图，即它应该显示数据库中的所有值。

![在此处输入图像描述](../Images/a5866d84298589067f5de8c19dd5030d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:53:43.897

而不是使用第二个光标，您应该使用带有 EditText 的[FilterQueryProvider](http://developer.android.com/reference/android/widget/FilterQueryProvider.html)来更新对 ListView 执行多个更新，就像 AutoCompleteTextView 一样。

或者您可以添加一个 TextWatcher 并在长度变为零时将光标更改回您的第一个。

# php - 如何创建文件系统数据库？

> ID：10493167
> 
> 赞同：0
> 
> 时间：2012-05-08T05:42:51.497
> 
> 标签：php, mysql, database, filesystems

我一直在尝试使用 php 创建文件系统，起初我使用的是 php 文件管理方法，例如 readdir、mkdir 等。但是很多人说数据库要快得多，但是当我想到它时，我只是不知道如何创建数据库。

文件系统应该允许人们：

1.  创建新文件夹。
2.  将文件上传到用户创建的文件夹。

每个文件夹都会有一些文件或没有文件，具体取决于用户，用户可以在文件夹内创建另一个文件夹。很困惑，文件夹----文件，如何创建这样的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-01T03:47:39.120

我也想做这样的东西，我的研究表明你可以创建一个类似于Windows的系统文件现在我们正在讨论如何创建数据库表。

所有元素都必须存储在一个表中并且具有父子关系如下例所示

```
medias table
------
id
user_id
parent_id
type
name
data

user_id = relationship to user table
parent_id = Refers to the parent ID
type = folder,file
name = file name
data = To store other file components such as file size and type and so on 
```

当我们如下设计表格时，我们得到一个更好的查询如果您有任何意见，请告诉我们，以便我们完成这篇文章

# selenium - 运行 selenium 网格演示时出错

> ID：10493176
> 
> 赞同：0
> 
> 时间：2012-05-08T05:43:56.567
> 
> 标签：selenium, selenium-grid, demo

我正在学习实现硒网格。

当我尝试运行 DEMO 时，它显示以下错误。谁能帮我 ？

D:\selenium-grid\selenium-grid-1.0.8>ant run-demo-in-sequence Buildfile: build.xml

```
run-demo-in-sequence:
 [java] [Parser] Running:
 [java]   Selenium Grid Demo In Sequence
 [java]
 [java] Nov 7, 2011 4:30:19 PM
com.thoughtworks.selenium.grid.tools.ThreadSafeSeleniumSessionStorage
startSeleniumSession
 [java] INFO: Contacting Selenium RC at localhost:4444
 [java] Nov 7, 2011 4:30:19 PM
 com.thoughtworks.selenium.grid.tools.ThreadSafeSeleniumSessionStorage
closeSeleniumSession
 [java] INFO: Closing Selenese session:
 com.thoughtworks.selenium.DefaultSelenium@4d3c7378
 [java] Nov 7, 2011 4:30:19 PM
com.thoughtworks.selenium.grid.tools.ThreadSafeSeleniumSessionStorage
startSeleniumSession
 [java] INFO: Contacting Selenium RC at localhost:4444
 [java] Nov 7, 2011 4:30:19 PM
 com.thoughtworks.selenium.grid.tools.ThreadSafeSeleniumSessionStorage
 closeSeleniumSession
 [java] INFO: Closing Selenese session:
 com.thoughtworks.selenium.DefaultSelenium@788ab708
 [java] Nov 7, 2011 4:30:19 PM
 com.thoughtworks.selenium.grid.tools.ThreadSafeSeleniumSessionStorage
 startSeleniumSession
 [java] INFO: Contacting Selenium RC at localhost:4444
 [java] Nov 7, 2011 4:30:19 PM
 com.thoughtworks.selenium.grid.tools.ThreadSafeSeleniumSessionStorage
 closeSeleniumSession
 [java] INFO: Closing Selenese session:
 com.thoughtworks.selenium.DefaultSelenium@789934d4
 [java] Nov 7, 2011 4:30:19 PM
  com.thoughtworks.selenium.grid.tools.ThreadSafeSeleniumSessionStorage
  startSeleniumSession
 [java] INFO: Contacting Selenium RC at localhost:4444
 [java] Nov 7, 2011 4:30:19 PM
 com.thoughtworks.selenium.grid.tools.ThreadSafeSeleniumSessionStorage
  closeSeleniumSession
 [java] INFO: Closing Selenese session:
  com.thoughtworks.selenium.DefaultSelenium@3747c1db
  [java]
 *     [java] ===============================================*
 *     [java] Selenium Grid Demo In Sequence*
 *     [java] Total tests run: 4, Failures: 4, Skips: 0*
 *     [java] ===================================*============
  [java]

 *BUILD FAILED*
 D:\selenium-grid\selenium-grid-1.0.8\build.xml:116: Java returned: 1 
 Total time : 0 seconds 
```

我也没有启动任何浏览器..请任何人帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:50:26.050

你能去[http://localhost:4444/](http://localhost:4444/)确认grid是否启动了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T14:49:27.827

如果您刚刚开始，您应该使用 Selenium Grid 2。您使用的演示适用于 Selenium Grid 1，这实际上是一个死项目。所有新的努力都进入了保证向后兼容的 Grid 2。

请参阅[http://code.google.com/p/selenium/wiki/Grid2](http://code.google.com/p/selenium/wiki/Grid2)

# sql - 如何确定在 sqlite 中删除表的正确顺序？

> ID：10493179
> 
> 赞同：2
> 
> 时间：2012-05-08T05:44:21.420
> 
> 标签：sql, sqlite, database-schema

我有一组需要放入 Sqlite 文件的表。他们有外键约束。我如何确定删除表格的正确顺序？或者是否有一个“删除表格列表”命令可以帮我解决这个问题？我在网络上搜索什么来获得有关此问题的帮助，因为将“订单”添加到与 SQL 相关的任何网络搜索都会返回有关 ORDER 关键字的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:51:31.027

如果表中有外键，则约束将阻止您删除拥有外键的表。“外键”只是另一个表的主键，因此对您来说它是“外键”。所以你需要先删除带有外键的表——然后你可以删除那些其他的表。删除表也会删除其约束。

对于蛮力的事情，您应该能够使用以下方法禁用约束：

```
PRAGMA foreign_keys = OFF; 
```

# django - 在 django 中发送视频作为响应

> ID：10493181
> 
> 赞同：4
> 
> 时间：2012-05-08T05:44:27.287
> 
> 标签：django, video, response

如何在 django 中发送视频 mp4 文件作为响应？我不想嵌入 html 的视频或对象标签，但想发送 mp4 本身。有人可以帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T06:10:34.573

通常你不想这样做；最好重定向到非 Django 服务器来[提供静态文件](https://docs.djangoproject.com/en/1.3/howto/static-files/#serving-static-files-in-production)，例如[`django.shortcuts.redirect`](https://docs.djangoproject.com/en/1.3/topics/http/shortcuts/#redirect)——它会更快、更节省内存，并且可能更安全。但当然有时这并不方便。这应该有效：

```
from wsgiref.util import FileWrapper

file = FileWrapper(open('path/to/video.mp4', 'rb'))
response = HttpResponse(file, content_type='video/mp4')
response['Content-Disposition'] = 'attachment; filename=my_video.mp4'
return response 
```

使用`FileWrapper`( [docs](http://docs.python.org/library/wsgiref.html#wsgiref.util.FileWrapper) ) 是为了不会一次发送太多数据，因为 Python 文件对象一次迭代一行，并且`\n`字符在 mp4 中可能不是特别常见。（发送太多意味着网络服务器在从硬盘读取文件时无法发送文件，而是必须等待很长的间隔增量。）

请注意，尽管我在任何地方的文档中都没有看到这一点，但文件[在使用](https://github.com/django/django/blob/master/django/http/__init__.py#L676).

# c# - 如何发布 Visual Studio asp.net 解决方案？

> ID：10493184
> 
> 赞同：2
> 
> 时间：2012-05-08T05:45:03.963
> 
> 标签：c#, asp.net, .net, visual-studio-2008

通过创建新的空白解决方案并在其中添加现有网站，我已将我的网站转换为解决方案。现在我想发布该解决方案，但它没有显示任何发布解决方案的选项。

我如何发布解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:47:21.857

发布命令应该在网站或 Web 应用程序项目上，而不是在解决方案本身上。

![在此处输入图像描述](../Images/f5f043a865f7208530785a1ff868dcb7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T06:08:41.690

右键单击您的项目文件并选择发布网站。请记住，如果它要求删除现有文件，那么它会询问已发布的文件而不是源文件。因此删除之前发布的文件并发布新网站是安全的，您也可以更改新发布网站的文件夹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:49:38.443

您可以从以下文章中获得一些帮助：[如何部署 ASP.Net Web 应用程序](http://www.codeproject.com/Articles/53075/How-to-deploy-ASP-NET-Web-Application-on-server)

但只是一个友好的建议，你[在提问之前做一些研究自己](http://mattgemmell.com/2008/12/08/what-have-you-tried/)。

# php - Codeigniter 从多个表中选择数据

> ID：10493187
> 
> 赞同：0
> 
> 时间：2012-05-08T05:45:25.743
> 
> 标签：php, codeigniter

我一直在使用这个模型从一个表中获取数据

```
function model_employee_all()
 {
  $this->load->database();
  $query = $this->db->get('mytable1');
  return $query->result();
 } 
```

我应该如何配置它以从 mytable1 和 mytable2 等多个表中获取数据，有什么方法可以使用连接...

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:49:22.150

```
$this->db->join 
```

请参考以下网址 [http://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

# python - 将 python 应用程序转换为 webapp 的最简单框架？

> ID：10493188
> 
> 赞同：3
> 
> 时间：2012-05-08T05:45:53.900
> 
> 标签：python, django

我有一个小型 python 应用程序，我想将其转换为 web 应用程序。我看过一些框架，比如 django。

我需要一些关于一个非常简单的框架的建议。我的 webapp 将只有一个文本框和两个按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:36:12.893

查看[Bottle](http://bottlepy.org/docs/dev/)，非常适合简单的 webapps。他们网站上的示例代码：

```
from bottle import route, run

@route('/hello/:name')
def index(name='World'):
    return '<b>Hello %s!</b>' % name

run(host='localhost', port=8080) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T06:33:19.777

**如果您正在寻找极简主义， CherryPy**将为您提供最好的服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T06:44:56.103

[它是 webapp Flask](http://flask.pocoo.org/)框架的小框架

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T05:54:34.113

也许看看[Google App Engine](https://developers.google.com/appengine/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T11:24:28.827

+1 瓶。

尽管如此，考虑到开发 Web 应用程序时范围通常会扩大，并且文本框和这 2 个按钮稍后会需要：模板、大量路由、可能是翻译等。因此，请始终考虑使用可以让您进入一些强大的框架，例如 web2py 或 Django。

# ssis - DTS_E_CANNOTACQUIRECONNECTIONFROMCONNECTIONMANAGER 错误

> ID：10493189
> 
> 赞同：10
> 
> 时间：2012-05-08T05:45:54.350
> 
> 标签：ssis

我的包由动态数据库连接组成。当我运行我的包时，它会抛出类似 DTS_E_CANNOTACQUIRECONNECTIONFROMCONNECTIONMANAGER 的错误。对连接管理器“conn”的 AcquireConnection 方法调用失败，错误代码为 0xC0202009。

我尝试在包级别将延迟验证属性设置为 true。

我试图将包保护级别属性更改为 EncryptSensitiveWithpassword。仍然面临同样的错误。

我能够手动运行包。

如何摆脱这个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T06:52:51.347

这可以通过2种方式解决

首先，我已将包级别的延迟验证属性从 false更改为**True 。**

将 ProtectionLevel 更改为**EncryptSensitiveWithUserKey**。

其次，删除旧的连接管理器并创建新的。

大多数情况下，第一种方法可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-12T10:33:49.113

将包转换为包部署模型 请为连接字符串创建一个包配置文件。在此处保存密码。将包部署到单独的环境时，将包与配置文件一起复制。确保本地和新环境中的路径相同。这解决了我的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-06T21:52:18.377

我有这个错误不断再次出现，因为我忘记了我的连接字符串是使用变量和表达式动态创建的（见图）。一旦我在那里编辑了连接字符串，这个错误就消失了。[![连接字符串](../Images/8bfcd25ca309c780a5e1dc9bb97093af.png)](https://i.stack.imgur.com/knvGH.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-12T06:35:01.543

我在 dts（配置文件）中添加了端口号和数据库名称，并将提供程序添加为 SQLNCLI11，并在 dtsx 文件（SSIS 包）中添加了端口号和 IP 地址，它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-21T17:22:42.467

就我而言，我忘记为执行包的用户分配/授予对包中使用的数据库执行操作所需的权限。

# logging - 通用日志输出

> ID：10493190
> 
> 赞同：2
> 
> 时间：2012-05-08T05:45:54.540
> 
> 标签：logging

我想在 StandardXAPoolDataSource (org.enhydra.jdbc.pool) 中打开日志记录。似乎使用 JCL 日志记录。我正在使用tomcat 6.0。

问题是如何将日志输出到文件？

谢谢。

# web-services - 在服务器上运行 asp.net WebAPI 而无需安装 asp.net mvc 4 beta

> ID：10493193
> 
> 赞同：2
> 
> 时间：2012-05-08T05:46:15.383
> 
> 标签：web-services, asp.net-mvc-4, asp.net-web-api

我使用 apicontroller 创建了一个简单的 http 服务，我想将它上传到服务器上。但问题是我无法在服务器上安装 asp.net mvc4 beta。是否有任何解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:25:52.683

您可以[bin 部署 MVC](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)。（链接适用于 MVC3，但也适用于 MVC4。）

基本上，您将在项目的 bin 文件夹中复制必要的 MVC 程序集，因此无需在服务器上安装任何额外内容，并且您的主机不需要支持它。

# android - 不使用 webView 的会话管理

> ID：10493202
> 
> 赞同：0
> 
> 时间：2012-05-08T05:47:06.790
> 
> 标签：android, android-layout

用户成功登录应用程序后，我需要为我的 android 应用程序实现会话。但我希望通过使用应用程序而不是 webView 来实现。并将此登录凭据发送到服务器进行身份验证。我们可以不使用 webView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:52:10.653

为此，您可以使用偏好设置。如果登录成功，您可以在偏好设置中设置用户名和密码。如果用户注销偏好设置回默认的访客帐户。

参考这个..http://developer.android.com/reference/android/preference/Preference.html

如果登录成功设置偏好是这样的

```
 String user_name_key = "Username";
String pass_word_key = "Password";

String Shared_preference_key = "Shared Preference";
private SharedPreferences USERNAME_and_PASSWORD;

public boolean setUserName(String userName) {
    editor = USERNAME_and_PASSWORD.edit();
    editor.putString(user_name_key, userName);
    editor.commit();
    return true;
}

public boolean setPassword(String password) {

    editor = USERNAME_and_PASSWORD.edit();
    editor.putString(pass_word_key, password);
    editor.commit();
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T05:58:01.677

您可以为此使用 SharedPreferences 来存储登录用户的信息。

```
// Access the default SharedPreferences
  SharedPreferences.Editor editor = getPreferences(MODE_PRIVATE).edit();

// Edit the saved preferences
editor.putString("UserName", "JaneDoe");
editor.putInt("password", "******");
editor.commit(); 
```

并且可以通过这种方式检索这些值。

```
SharedPreferences prefs = getPreferences(MODE_PRIVATE); 
String UserName= prefs.getString("UserName", null); 
```

这样这些信息就可以在任何地方的应用程序中使用。

# php - 为什么代码无法更新 csv 中的内容？

> ID：10493208
> 
> 赞同：1
> 
> 时间：2012-05-08T05:47:39.407
> 
> 标签：php

我想删除`Upload`, 并将列中的 0 更改为 888 `qty`，以下是我的代码，它使`csv`文件内容混乱。如何更正我的代码。谢谢你

```
 $dir   = getcwd();
   $files = scandir($dir);
   foreach ($files as $file)
   {
       $parts = pathinfo($file);
       if($parts['extension']!="csv") continue;
       if (($handle = fopen($file, "r")) !== FALSE)
       {
           $new_content =  implode(',', fgetcsv($handle, 1000, ","))."\n";
           while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
           {
               $data[12]=substr($data[12],9);
               $data[13]=substr($data[13],9);
               $data[14]=substr($data[14],9);
               $data[42]=888;
               $new_content .= implode(',', $data)."\n";
           }
           fclose($handle);
        file_put_contents($file, $new_content);
       }
   } 
```

测试 csv 文件 [http://phplist.xxmn.com/women.csv](http://phplist.xxmn.com/women.csv)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:04:19.990

这是因为 .csv 文件的第一行超过 1000 个字符。如果您提前不确定每行有多大，我建议您这样做：

```
$data = fgetcsv($handle, 0, ','); // >= PHP 5.0.4 
```

或者

```
$data = fgetcsv($handle, 4096, ','); 
```

第一个选项可能会减慢处理速度，但可能可以忽略不计。

您还应该考虑使用`fputcsv`来编写输出。

```
$dir   = getcwd();
$files = scandir($dir);
foreach ($files as $file) {
   $parts = pathinfo($file);
   if ($parts['extension']!="csv") {
       continue;
   }
   if (false === ($outfile = fopen("$file.tmp", "w"))) {
       continue;
   }
   if (($handle = fopen($file, "r")) !== FALSE) {
       fputcsv($outfile, fgetcsv($handle, 4096, ","));

       while (($data = fgetcsv($handle, 4096, ",")) !== FALSE) {
           $data[12]=substr($data[12],9);
           $data[13]=substr($data[13],9);
           $data[14]=substr($data[14],9);
           $data[42]=888;
           fputcsv($outfile, $data);
       }
       fclose($handle);
       fclose($outfile);
       if (false === rename("$file.tmp", $file)) {
           die("Could not rename temporary file");
       }
   }
} 
```

# php - 如何在 Yii 中设置 FCK 编辑器？

> ID：10493210
> 
> 赞同：2
> 
> 时间：2012-05-08T05:47:54.590
> 
> 标签：php, yii, fckeditor

我是 Yii 框架的新手，我的 CMS 管理页面需要一个 FCK 编辑器。我将 FCKeditor 下载并解压到根文件夹，并将其扩展名放在 yii 扩展文件夹中。我在我的视图中添加了以下代码

```
<?php $this->widget('application.extensions.fckeditor.FCKEditorWidget',array(
    "model"=>$model,                # Data-Model
    "attribute"=>'content',         # Attribute in the Data-Model
    "height"=>'400px',
    "width"=>'100%',
    "toolbarSet"=>'Basic',          # EXISTING(!) Toolbar (see: fckeditor.js)
    "fckeditor"=>Yii::app()->basePath."/../fckeditor/fckeditor.php",
                                    # Path to fckeditor.php
    "fckBasePath"=>Yii::app()->baseUrl."/fckeditor/",
                                    # Realtive Path to the Editor (from Web-Root)
    "config" => array(
        "EditorAreaCSS"=>Yii::app()->baseUrl.'/css/index.css',),
                                    # http://docs.fckeditor.net/FCKeditor_2.x/Developers_Guide/Configuration/Configuration_Options
                                    # Additional Parameter (Can't configure a Toolbar dynamicly)
    ) ); ?> 
```

这些都工作正常。但编辑器单独显示。我需要编辑器代替内容文本区域。![在此处输入图像描述](../Images/5a694c5384520d225da353815cd6dd12.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:09:51.633

```
<?php echo CHtml::activeTextArea($model,'content',array('rows'=>6, 'cols'=>50)); ?> 
```

要使用 FCKEditor 而不是上面的 textarea，请**通过将上面的代码替换为以下代码来**调用集成小部件：

```
<?php $this->widget('application.extensions.fckeditor.FCKEditorWidget',array(
 'model'     =>  $model,
 'attribute' => 'content',
 'height'    =>  '600px',
 'width'     =>  '100%',
 'fckeditor' =>  dirname(Yii::app()->basePath).'/htdocs/fckeditor/fckeditor.php',
 'fckBasePath' => Yii::app()->baseUrl.'/fckeditor/')
 ); ?> 
```

你做了这样的事情吗，如果你这样做了，那么文本区域将被编辑器替换，希望对你有所帮助

# php - CodeIgniter：显示弹出消息

> ID：10493212
> 
> 赞同：0
> 
> 时间：2012-05-08T05:48:10.000
> 
> 标签：php, codeigniter

我的场景是：当用户点击添加到购物车图标时，产品必须通过显示一条消息“**产品已添加到购物车**”来存储在数据库中。

在这里，我使用了 json url：

```
$add_to_cat = http://www.sitename.com/cgi-bin/phts.sh/js/jsread.p?call=basket&user=&lang=en&id=".$user_logged_id."&type=in&ph=".$product_id; 
```

用于将记录存储在 Progress Database Server 中。

我的代码是：

```
if(redirect($add_to_cat, 'location')){
 // here I want pop up message          
} 
```

发生重定向时，会显示我不想要的 json 文件。我只想在不打开 json 记录文件的情况下显示一条消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:20:00.640

使用[闪存数据](http://codeigniter.com/user_guide/libraries/sessions.html)（会话类的一部分）。

在控制器中执行类似的操作；

```
if(redirect($add_to_cat, 'location')){
   $this->session->set_flashdata('message', 'Added to cart');          
} 
```

然后在你看来，类似的东西；

```
<?php
    if ($this->session->flashdata('message')) {
    ?>
    <div class="message flash">
        <?php echo $this->session->flashdata('message'); ?>
    </div>
    <?php
    }
?> 
```

# model - 如何编写更好的zend模型类，避免在每个方法中一次又一次地编写适配器

> ID：10493213
> 
> 赞同：-1
> 
> 时间：2012-05-08T05:48:21.080
> 
> 标签：model, zend-db-table

这是我用于我的 zend 框架模型的基本代码。

```
class Model_FormMapper extends Zend_Db_Table_Abstract
{ 
    protected $_name    = 'tblMapper'; 
    protected $_primary     = 'mapId';

    public function insertColumns($arrData){

  $db               = Zend_Db_Table::getDefaultAdapter();        
      $sql              = $this->insert($arrData);
      $lastId       = $this->_db->lastInsertId();
      return $lastId;
   }
} 
```

在我的模型中我不喜欢的一件事是在每种方法中初始化适配器。
$db = Zend_Db_Table::getDefaultAdapter();

谁能告诉我编写zend模型的更好解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:31:01.647

我得到了答案，我可以在注册表中设置一个数据库连接变量，并且可以在任何地方使用，例如：`$this->_db`.

```
class Model_FormMapper extends Zend_Db_Table_Abstract
{ 
   protected $_name    = 'tblMapper'; 
   protected $_primary     = 'mapId';

  public function insertColumns($arrData){

     $sql              = $this->insert($arrData);
     $lastId           = $this->_db->lastInsertId();
     return $lastId;
  }
} 
```

# java - 输入流和 SAXParser 的问题

> ID：10493214
> 
> 赞同：1
> 
> 时间：2012-05-08T05:48:23.917
> 
> 标签：java, android

当我使用`HTTPGET`特殊的 TIMEOUT 处理并获得响应槽`HttpResponse`和 passto`xmlR.parse(new InputSource(instream));` 并进行休息程序时，我遇到了解析问题。但有抛出错误：

```
05-08 11:03:38.637: WARN/System.err(522): java.io.IOException: Attempted read on closed stream.
05-08 11:03:38.667: WARN/System.err(522):     at org.apache.http.conn.EofSensorInputStream.isReadAllowed(EofSensorInputStream.java:127)
05-08 11:03:38.667: WARN/System.err(522):     at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:176)
05-08 11:03:38.677: WARN/System.err(522):     at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:515)
05-08 11:03:38.677: WARN/System.err(522):     at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:478)
05-08 11:03:38.677: WARN/System.err(522):     at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:317)
05-08 11:03:38.677: WARN/System.err(522):     at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:275)
05-08 11:03:38.677: WARN/System.err(522):     at com.housedisplay.mapspec.MyMapActivity.Sendsarchparameter(MyMapActivity.java:334)
05-08 11:03:38.687: WARN/System.err(522):     at com.housedisplay.mapspec.MyMapActivity.access$0(MyMapActivity.java:289)
05-08 11:03:38.697: WARN/System.err(522):     at com.housedisplay.mapspec.MyMapActivity$SearchATask.doInBackground(MyMapActivity.java:251)
05-08 11:03:38.697: WARN/System.err(522):     at com.housedisplay.mapspec.MyMapActivity$SearchATask.doInBackground(MyMapActivity.java:1)
05-08 11:03:38.697: WARN/System.err(522):     at android.os.AsyncTask$2.call(AsyncTask.java:252)
05-08 11:03:38.697: WARN/System.err(522):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
05-08 11:03:38.697: WARN/System.err(522):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
05-08 11:03:38.697: WARN/System.err(522):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
05-08 11:03:38.697: WARN/System.err(522):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
05-08 11:03:38.697: WARN/System.err(522):     at java.lang.Thread.run(Thread.java:1020) 
```

**代码：：**

```
HttpGet httpGet = new HttpGet(strURL.toURI());
            HttpParams httpParameters = new BasicHttpParams();
            // Set the timeout in milliseconds until a connection is established.
            // The default value is zero, that means the timeout is not used. 
            int timeoutConnection = 3000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            // Set the default socket timeout (SO_TIMEOUT) 
            // in milliseconds which is the timeout for waiting for data.
            int timeoutSocket = 5000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

            DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
            HttpResponse response = httpClient.execute(httpGet);

            HttpEntity entity = response.getEntity();
            InputStream instream = entity.getContent();
            if (entity != null) {

                strResponse = convertStreamToString(instream);

            }
        /**********test*******/
            SAXParserFactory saxPF = SAXParserFactory.newInstance();

            SAXParser saxP = saxPF.newSAXParser();
            XMLReader xmlR = saxP.getXMLReader();
            System.out.println("url >>>>>" + strURL);
            HandlerFromLatLongCustom myXMLHandler = new HandlerFromLatLongCustom();
            xmlR.setContentHandler(myXMLHandler);
            xmlR.parse(new InputSource(instream));
            instream.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:57:52.970

我怀疑这是问题所在：

```
strResponse = convertStreamToString(instream); 
```

我的猜测是那个方法（你没有显示）关闭了流。除此之外，它至少会*读取*流，这将使其以后难以再次读取......

您可以*将*整个响应读入一个字节数组，然后您可以根据需要将其包装在任意数量`ByteArrayInputStream`的 s 中，或者您可以将`strResponse`其用作解析的源。不过，这可能会引发编码问题。

HttpClient 可能会为您完成所有这些 - 您可以简单地编写：

```
instream = entity.getContent(); 
```

并再次获得相同的数据 - 我对返回的流是否有效“实时”或客户端代码是否读取数据并缓存它的详细信息知之甚少。

另请注意，此代码非常可疑：

```
HttpEntity entity = response.getEntity();
InputStream instream = entity.getContent();
if (entity != null) {
    ... 
```

如果`entity`为 null，则第二行将已经抛出 a `NullPointerException`，使得对第三行的检查毫无意义......

# php - javascript中的页面打印

> ID：10493215
> 
> 赞同：0
> 
> 时间：2012-05-08T05:48:23.967
> 
> 标签：php, javascript, css, printing

我正在尝试通过 java 脚本打印页面。代码如下：

```
<script type="text/javascript">
        function PrintContent(){
            var DocumentContainer = document.getElementById("divtoprint");
            var WindowObject = window.open("", "PrintWindow","width=1200,height=650,top=50,left=50,toolbars=no,scrollbars=yes,status=no,resizable=yes");
            WindowObject.document.writeln(DocumentContainer.innerHTML);
            WindowObject.document.close();
            WindowObject.focus();
            WindowObject.print();
            WindowObject.close();
        }
    </script> 
```

然后我调用了那个函数`<a onclick="PrintContent();" style="cursor:pointer;"><img src="images/printer.png" alt="Print" title="printer"/></a>` 还有我想打印的内容，放在`<div id="divtoprint"> </div>`.

但在这种情况下，我得到的打印页面没有 css 样式。那么如何将 css 也集成到我的打印页面中呢？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:50:13.913

找到`link`CSS 的（或其他）并确保它具有`media`包含`print`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T05:57:44.410

尝试：

```
<script type="text/javascript">
    function PrintContent(){
    var DocumentContainer = document.getElementById("divtoprint");
    var WindowObject = window.open("", "PrintWindow","width=1200,height=650,top=50,left=50,toolbars=no,scrollbars=yes,status=no,resizable=yes");
    WindowObject.document.write('<html><head><title>Printwindow</title>');
    WindowObject.document.write('<link rel="stylesheet" href="style.css">');
    WindowObject.document.write('</head><body>');
    WindowObject.document.writeln(DocumentContainer.innerHTML);
    WindowObject.document.write('</body></html>');
    WindowObject.document.close();
    WindowObject.focus();
    WindowObject.print();
    WindowObject.close();
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:01:59.087

你可以试试这个：

```
<style type="text/css">
    @media print {
        #divtoprint { /** your css code goes here **/ }
        /** other selector style goes here which style you print **/
    }
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T23:43:10.503

您是否尝试过更改 CSS 标签以适用于所有媒体？

```
<link rel="stylesheet" href="style.css" media="all" type="text/css" /> 
```

或者如果你想更具体

```
<link rel="stylesheet" href="style.css" media="screen, print" type="text/css" /> 
```

# android - 将业务逻辑放在 ListView 控制器中以使用 Cursor 和 SimpleCursorAdapter 还是使用带有数据类的自定义 ListView 适配器？

> ID：10493217
> 
> 赞同：2
> 
> 时间：2012-05-08T05:48:29.020
> 
> 标签：android, sqlite, oop, model-view-controller, cursor

我有来自 SQLite 数据库的数据，通常，我从数据库中获取一个项目并将其放入我的自定义数据类“发票”中，该类包含发票的所有详细信息。在发票中，我有返回诸如发票余额之类的业务逻辑（销售发票将返回发票的贷方，费用发票将返回发票的借方）以及其他会计特定的怪癖。

话虽如此，当我执行我的 SQL 查询并抓取一个游标时，将游标放入 SimpleCursorAdapter 并按我的方式处理它不起作用，因为嵌入到我的 Invoice 类中的业务逻辑被绕过了。我想我将不得不将每个光标结果转换为一个 Invoice 对象，然后以某种方式在 ListView 中列出这些对象。这是最优化的方式吗？或者，我应该打破约定并将逻辑编码到我的控制器中（类首先抓住光标）？

我想让事情尽可能容易理解。话虽这么说，我宁愿对这个问题采取“纯粹”的方法（例如，尽可能地在 MVC 范式中保持这个面向对象），而不是在控制器中将一些逻辑组合在一起来执行逻辑。

你怎么看？你会怎么办？一方面使用“纯粹主义”方法肯定会占用更多的处理能力，因为它不那么直接，但是，代码的可维护性和清晰度是否可以弥补这一点？

我很欣赏你的观点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:30:31.730

> ...将光标放入 SimpleCursorAdapter 并按我的方式处理它不起作用，因为嵌入到我的 Invoice 类中的业务逻辑被绕过了。

如果你使用普通的`SimpleCursorAdapter`. 相反，您可以`SimpleCursorAdapter`在方法中扩展和实现您想要的任何逻辑`bindView()`，但我想您已经知道这一点（？！）。另一种选择是使用纯文本`SimpleCursorAdapter`并使用 a[`SimpleCursorAdapter.ViewBinder`](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.ViewBinder.html)将数据绑定到您需要执行`SimpleCursorAdapter`无法处理的额外内容的地方。

> 这是最优化的方式吗？

可能不是。

> 你怎么看？你会怎么办？

如果您构建`Invoice`类（连同额外的东西）**只是**为了将其显示给用户（在 a 中`ListView`），那么我将放弃构建`Invoice`类并直接在等中实现任何逻辑`Adapter`（`ViewBinder`这可能不是“纯粹主义”方法，但我认为这是最有效的方法，特别是如果带有数据的游标将有数百行）。

如果您还要`Invoce`在代码的其他部分使用该类，那么我可能会首先从光标中提取数据。

# excel - 带有月份标准的 SUMIF

> ID：10493224
> 
> 赞同：3
> 
> 时间：2012-05-08T05:49:28.897
> 
> 标签：excel, date, excel-formula

我有：

```
=SUMIF('Log'!A2:A139,MONTH('Log'!A2:A139)=1,'Log'!M2:M139) 
```

“日志”表中的 A 列包含日期。如果月份是一月，我只想对日志表的 M 列中的值求和。

当前的表达式不断返回`0`，我做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T05:59:02.927

在第二个参数中，标准必须与第一个参数中的每个单元格相关联。所以，给出`MONTH()`一个范围在那里没有任何好处，它只是不断地比较 A *x*并`MONTH(A2)`得到一个 FALSE。

有两个简单的解决方案：

1.  使用 MONTH(A2)创建一个暂存列，例如`N`，然后使用*该*列：

    ```
    =SUMIF('Log'!N2:N139,1,'Log'!M2:M139) 
    ```

2.  使用数组公式：

    ```
    {=SUM('Log'!M2:M139 * IF(MONTH('Log'!A2:A139)=1,1,0))} 
    ```

（数组公式不是`{}`在它们周围输入文字，它们是使用 Shift-Enter 输入的，只是`{}`在 Excel 中显示在它们周围。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-16T11:16:31.430

可能不会在询问此 Q 但[SUMIFS](https://support.office.com/en-us/article/sumifs-function-c9e748f5-7ea7-455d-9406-611cebce642b)现在可用并且通过接受多个条件时，一个 ( `>`) 可以设置为 12 月底，一个 ( ) 可以设置为`<`2 月初 - 因此选择没有帮助列的 1 月并且没有潜在的慢速数组公式。这不会结合不同年份的一月（但可以设置为这样做）。

# php - komodo IDE -> 使用 komodo+xdebug 远程调试 php：如何查看 $_SERVER 变量？

> ID：10493226
> 
> 赞同：1
> 
> 时间：2012-05-08T05:49:34.677
> 
> 标签：php, xdebug, remote-debugging, komodo, server-variables

我已经设置了 komodo IDE 和 xdebug 来远程调试 PHP。一切正常。现在我想在调试过程中观察一些变量。我可以毫无问题地观看任何变量，但我无法观看任何 PHP SERVER 变量，例如如何观看 $_SERVER['SERVER_NAME'] ，如果我使用 $_SERVER 或 SERVER 或 $SERVER ，它将返回 0。任何人都知道怎么做 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:55:24.810

Komodo 有一个用于超级全局变量的特定选项卡。左下角有“Watch”、“Locals”和“Superglobals”。对于 SERVER、GET、POST 等，您需要激活“Superglobals”选项卡。

# shell - 是否有适用于 Windows 的 KornShell (ksh) IDE？

> ID：10493232
> 
> 赞同：7
> 
> 时间：2012-05-08T05:49:46.523
> 
> 标签：shell, unix, ssh, editor, ksh

我的工作是编写 KornShell (ksh) 脚本并在远程服务器上运行该脚本。我正在努力寻找最好的方法来做到这一点。

目前，我在 Notepad++ 中编辑代码，将文件传输到服务器（通过 FTP），在服务器中运行脚本，然后重复该过程，直到脚本运行正常。

所以，我正在寻找的是一个具有良好编辑器、ftp 支持和调试工具的 IDE（用于 Windows）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T07:41:11.437

您需要的只是一个具有语法高亮功能的编辑器。个人比较喜欢winscp和notepad2的组合。将您的 winscp 配置为使用 notepad2 作为编辑器。然后，在 winscp 中找到远程脚本文件，右键单击并选择编辑。您现在可以开始编码，并且每在您的 notepad2 中按下 CTRL+S（保存），winscp 就会检测并传输到服务器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T11:56:20.547

[Zeus](http://www.zeusedit.com)编辑器可以进行无缝的FTP/SFTP 编辑。

至于调试，也可以使用[plink](http://www.zeusedit.com/zforum/viewtopic.php?t=1549)之类的东西运行远程脚本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T07:40:34.470

Vim 和 Emacs 都将在某种程度上透明地编辑远程机器上的文件，并且都具有运行良好的 Windows 端口。

此[链接](http://vim.wikia.com/wiki/Edit_remote_files_locally_via_SCP/RCP/FTP)将告诉您如何使用 Vim 进行操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T05:58:03.567

我建议打开与远程机器（ssh 或 X windows）的终端连接并在那里编辑/测试/调试脚本。除非您可以进行 X 连接，否则您将不得不使用像 vi 或 emacs 这样的文本模式编辑器（学习曲线陡峭但非常强大），或者像 pico/nano 这样简单的东西。完成后，您可以将文件复制回您的 Windows 机器。这种方法还不错。我一直都这样做。

# php - 防止 PHP 打印错误堆栈

> ID：10493234
> 
> 赞同：0
> 
> 时间：2012-05-08T05:50:05.333
> 
> 标签：php

如果出现致命错误——比如无法连接到数据库，那么 PHP 会在浏览器中打印错误堆栈，如下所示——

```
mysql_pconnect() [<a href='function.mysql-pconnect'>function.mysql-pconnect</a>]: Lost connection to MySQL server at 'reading initial communication packet', system error: 111

#0 /var/www/platform/db/connection.php:12 mysql_pconnect('127.0.0.1','root','password')
#1 /var/www/platform/db/front_page.php:10 open_db_connection()
#2 /var/www/platform/services/front_page_services.php:7 find_top_courses()
#3 /var/www/platform/inc/main.php:75 get_top_courses()
#4 /var/www/index.php:198 F3::run() 
```

我该如何防止这种情况？`error_reporting`in`php.ini`已设置为`0`关闭`display_errors`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:52:34.333

确保`display_errors`在运行时或通过`.htaccess`.

如果这仍然不起作用，请确保您正在修改正确的`php.ini`，并在进行任何更改后重新启动 Apache/IIS/nginx。如果仍然失败，请加载 a`phpinfo()`并确保正在进行更改。

另外，请务必`html_errors`关闭。以防万一脚本偷偷改变您的 error_reporting，并将您的堆栈跟踪显示给公众。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T05:54:37.720

要么您编辑了错误的 php.ini，要么在其他地方重新打开了设置（.htaccess 文件、用户级别的 php.ini 或运行时的脚本中）。请参阅 phpinfo() 以帮助您找到 php.ini 文件，对其进行编辑，然后重新启动。

您只需要关闭 display_errors 即可。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-08T05:54:30.603

您可以在引发错误的函数之前使用“@”。

"@" 将静音您的函数可能引发的任何 php 错误。

[http://php.net/manual/en/language.operators.errorcontrol.php](http://php.net/manual/en/language.operators.errorcontrol.php)

# jquery - jQuery遍历嵌套的有序列表并获取每个元素的索引值

> ID：10493237
> 
> 赞同：4
> 
> 时间：2012-05-08T05:50:18.673
> 
> 标签：jquery

```
<ol id="author_list">
    <li id="author_8"><div class="author">Author 1</div>
        <ol>
            <li class="affiliation_7"><div class="affiliation">School1</div>
            </li>

            <li class="affiliation_8"><div class="affiliation">School2</div>
            </li>
        </ol>
    </li>
    <li id="author_10"><div class="author">Author 3</div>
        <ol>
            <li class="affiliation_7"><div class="affiliation">School1</div>
            </li>
        </ol>
    </li>
    <li id="author_9"><div class="author">Author 2</div>
        <ol>
            <li class="affiliation_8"><div class="affiliation">School2</div> 
            </li>
        </ol>
    </li>
</ol> 
```

看起来像这样

![在此处输入图像描述](../Images/af4b37191150fdc7b439e28dfd8058d6.png)

我希望能够遍历这个列表并以 json 格式存储列表的确切位置，以便以后可以以相同的顺序重现该列表。

我不确定 json 应该是什么样子，但这就是我想出的。不确定这是否也是存储数据的最佳方式..

```
{
    "association1" : {
         "author": "author_8",
         "affiliation": {
             "affiliation_7": "0,0",
             "affiliation_8": "0,1"
         },
    "association2" : {
         "author": "author_10",
         "affiliation": {
             "affiliation_7": "1,0",
         },
    "association3" : {
         "author": "author_9",
         "affiliation": {
             "affiliation_8": "2,0",
         },       
} 
```

到目前为止我的代码

```
var indexList = [];
var level2 = $('#author_list li ol li')

level2.each(function() {
    var topIndex = $(this).index();
    var subIndex = $(this).parent().parent().index();
    indexList.push((topIndex, subIndex));    
    alert(indexList);
}) 
```

**更新**

只是为了澄清一下`0,0`， ,分别`0,1`指 和 的索引值，`School1`依此类推`School2``Author1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:35:40.213

```
var result = [];

function getList(element) {
    $.each($(element).children('li'), function() {
        var target = $(this),
            index = target.index(this) + 1,
            data = $(target).find('div.author').text(),
            eachObj = {};

        eachObj.author = data;

        if(target.has('ol')) {
            var aff = {};
            $.each($('ol li',  target), function() {
                aff[this.className] = $(this).find('div.affiliation').text();
            });     
        }
        eachObj.affiliation = aff;
        result.push(eachObj)
    });
    return result;
}

getList($('ol#author_list')); 
```

***[演示](http://jsfiddle.net/Zsa42/1/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:24:00.283

这很简单。你显示它的方式就是它应该被存储的方式。并且保持 ID 分开使它更灵活。

```
[
{
 "author": { "id":8, "name":"Author 3"},
 "schools":[ {"affilication":7,      "school":"School 1"},
             {"affilication":8,      "school":"School 2"}
           ]
},
{
 "author": { "id":10, "name":"Author 3"},
 "schools":[ {"affilication":7,      "school":"School 1"}     ]
},
{
 "author": { "id":9, "name":"Author 2"},
 "schools":[ {"affilication":8,      "school":"School 2"}     ]
}
] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T07:15:09.057

您实际上并不需要学校的索引值来重建列表，因为您在 JSON 结构中捕获了学校的相对位置。

下面是一些基于 Imdad 架构松散构建 JSON 的 JQuery 代码：

```
var authors = [];
$('#author_list > li').each(function(){
  var author = {};
  author.id = $(this).attr('id').substring(7);
  author.name = $(this).find('div.author').text();

  author.schools = [];
  $(this).find('ol li').each(function(){
    var school = {};
    school.sid = $(this).attr('class').substring(12);
    school.name = $(this).find('div.affiliation').text();
    author.schools.push(school);
  });

  authors.push(author);
});

var authorsJson = JSON.stringify(authors);
console.log(authorsJson); 
```

格式化结果如下所示：

```
[
  {
    "id":"8",
    "name":"Author 1",
    "schools":[
      {"sid":"7","name":"School1"},
      {"sid":"8","name":"School2"}
    ]
  },
  {
    "id":"10",
    "name":"Author 3",
    "schools":[
      {"sid":"7","name":"School1"}
    ]
  },
  {
    "id":"9",
    "name":"Author 2",
    "schools":[
      {"sid":"8","name":"School2"}
    ]
  }
] 
```

# ruby-on-rails - 用新创建但未保存的记录替换现有记录

> ID：10493242
> 
> 赞同：1
> 
> 时间：2012-05-08T05:50:41.917
> 
> 标签：ruby-on-rails, activerecord

如果我有记录 A 已保存在数据库中，那么我想用新创建的**尚未保存**的记录 B 替换它。所以 B 然后可以保存在数据库中，但使用来自 A 的 id （并且 A 被替换）。这在 Rails Active Record 中可行吗？

PS这背后的原因是我需要通过某种条件合并对象，并且构造一个对象需要一些互联网获取/解析。因此，如果使用时间来解析 BI，则希望防止再次为 A 解析它，而是将其替换为 B。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:05:51.923

尝试这样的事情（没有测试这段代码）：

```
a = Model.find(params[:id])
b = Model.new(params)
a.update_attributes(b.attributes) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T06:07:06.993

你可以这样做：

```
a = A.find(1)
b = B.new

# Modify b

a.update_attributes(b.attributes.delete_if{ |k,v| %w(id created_at updated_at).include?(k) }) 
```

# xcode - Xcode - localizable.strings - 并不总是有效

> ID：10493243
> 
> 赞同：1
> 
> 时间：2012-05-08T05:50:44.883
> 
> 标签：xcode, localization

我开发了一个相当大的项目，但现在我一直遇到一个愚蠢的问题。

我的本地化并不总是本地化。每一秒构建他们都会失败。这是一个已知的 Xcode 错误吗？

我正在运行最新版本的 Xcode。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:12:37.950

这可能是因为您的解决方案中有两个`localizable.strings`文件。如果您从另一个项目（例如 ShareKit）中放入源文件，这很容易发生。有关解释和解决方案，请参阅其他问题：[本地化字符串在项目中使用 ShareKit 并不总是有效](https://stackoverflow.com/questions/7747436/localisation-strings-not-always-work-having-sharekit-in-a-project/7747614#7747614)

# java - 实施产品密钥

> ID：10493246
> 
> 赞同：1
> 
> 时间：2012-05-08T05:50:57.893
> 
> 标签：java

我开发了一个基于 Java 的桌面应用程序，我想用产品密钥分发它，这样当输入正确的密钥时，应用程序就会被激活。因此，个人用户的产品密钥应该不同。我如何在 Java 中实现这个概念。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:14:03.077

基于 Mikera 的回答，针对您的安全需求非常重要。在你的情况下，你可能只需要一种快速的方法来过滤掉 99.9% 的黑客。只有采取法律行动才能阻止剩下的 0.1%，但您（可能）不需要担心它们。Mikera 的解决方案有点简单，但在您觉得需要更好的东西之前应该可以正常工作。

一个更强大但更庞大的解决方案是让您的用户在您的网站上注册，并让您的 Java 应用程序向用户询问此产品密钥（由您的网站随机生成），然后从网站上查找它。缺点是它开始感觉像是一个登录过程而不是激活过程，你需要连接到互联网，并且任何体面的盗版者仍然可以相对容易地绕过它。

基本上，除非您将产品密钥与程序中的每一个操作联系起来（这可能会降低性能），否则任何人都可以简单地从实际二进制代码中删除/跳过产品密钥检查。这是一个活跃的研究领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:56:32.147

这取决于您希望您的密钥安全性有多强。

一种非常简单的方法是只创建用户电子邮件地址的哈希并将其作为密钥提供给用户。该应用程序可以询问用户的电子邮件地址和密钥，然后重新创建哈希码以确认该密钥对于该用户是正确的。

这显然不会击败坚定的攻击者......但是坚定的攻击者将能够击败您实施的任何其他计划。如果你要做的只是确保注册并防止随意复制，那么这种方案应该足够好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:03:36.670

我认为您可以通过查找处理器或硬盘的序列号来做到这一点，这意味着处理器序列号和硬盘序列号对于每台机器都是唯一的，因此您的程序应该获取这些序列号中的任何一个并对其应用一些算法来生成产品密钥。这是在java中查找处理器和硬盘序列的链接。

[http://www.rgagnon.com/javadetails/java-0580.html](http://www.rgagnon.com/javadetails/java-0580.html)

希望这会帮助你 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:08:07.043

我听说的一个是为每个副本分配一个序列号，有些使用客户名称。然后使用非对称密钥计算密钥签名。您的程序可以使用公钥来验证签名。此[QA](https://stackoverflow.com/questions/646086/implementation-for-product-keys)更详细地回答了您的问题。

# ios - 在 iOS 上的 open gl es 2.0 中缩放对象以适应屏幕

> ID：10493251
> 
> 赞同：0
> 
> 时间：2012-05-08T05:51:42.383
> 
> 标签：ios, opengl-es

我正在 iOS 上使用 open gl es 2.0。我想在最初渲染时将对象设置为适合屏幕。

我有这个代码：

```
CATransform3D currentCalculatedMatrix = CATransform3DIdentity;
currentCalculatedMatrix = CATransform3DScale(currentCalculatedMatrix,scaleFactor, scaleFactor,scaleFactor); 
```

我应该如何计算和设置比例因子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:58:07.323

这取决于您使用的投影以及物体与相机的距离。显然，这也取决于您的对象形状。如果我刚才提到的所有参数都是恒定的，那么您可能只想进行反复试验，直到您对结果感到满意为止。如果形状是可变的，但其他形状是不变的，那么您将需要使用您正在使用的投影在数学上投影您的顶点，以确保它们都落在视口内。

这是另一篇可能对您有帮助的帖子：[在窗口内拟合 3d 模型](https://stackoverflow.com/questions/4180289/fit-3d-model-inside-a-window)

# .net - Metro 应用程序 (.NET) 中受控的非 UI 计时器

> ID：10493253
> 
> 赞同：4
> 
> 时间：2012-05-08T05:52:04.020
> 
> 标签：.net, timer, windows-8, windows-runtime, winrt-xaml

我需要一个计时器类，它应该提供启动/停止/启用/禁用的功能，并且应该是非 UI。

我看到 2 个选项

1.  [DispatcherTimer](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.dispatchertimer) -> 具有除在 UI 线程上执行之外的所有功能

2.  [ThreadPoolTimer](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.threading.threadpooltimer) -> 无法控制周期性计时器。

我正在考虑在线程池计时器上创建包装器，但似乎非常复杂，因为对它没有/有限的控制。

如何为所述场景设计计时器类。（我需要类似于 System.Threading.Timer 的东西）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:41:16.887

由于 UI 在 Metro 应用程序中的响应速度应该非常快 - 运行 DispatcherTimer 并在您希望在后台线程上运行的东西上调用 Task.Run() 可能就足够了。

如果这对您不起作用 - 看看是否有效。它应该具有与 DispatcherTimer 类似的 API，但在不同的线程上运行。并不是说它一直在等待 Interval 集的持续时间，所以计时器会迟到。它也不完全是线程安全的，我只玩了 10 分钟，所以它可能并不总是有效，但由于它是开源的 - 你可以修改它以适应你的账单。

```
public class BackgroundTimer
{
    private AutoResetEvent _stopRequestEvent;
    private AutoResetEvent _stoppedEvent;

    #region Interval
    private TimeSpan _interval;
    public TimeSpan Interval
    {
        get
        {
            return _interval;
        }
        set
        {
            if (IsEnabled)
            {
                Stop();
                _interval = value;
                Start();
            }
            else
            {
                _interval = value;
            }
        }
    }
    #endregion

    public event EventHandler<object> Tick;

    #region IsEnabled
    private bool _isEnabled;
    public bool IsEnabled
    {
        get
        {
            return _isEnabled;
        }
        set
        {
            if (_isEnabled == value)
                return;

            if (value)
                Start();
            else
                Stop();
        }
    } 
    #endregion

    public BackgroundTimer()
    {
        _stopRequestEvent = new AutoResetEvent(false);
        _stoppedEvent = new AutoResetEvent(false);
    }

    public void Start()
    {
        if (_isEnabled)
        {
            return;
        }

        _isEnabled = true;
        _stopRequestEvent.Reset();
        Task.Run((Action)Run);
    }

    public void Stop()
    {
        if (!_isEnabled)
        {
            return;
        }

        _isEnabled = false;
        _stopRequestEvent.Set();
        _stoppedEvent.WaitOne();
    }

    private void Run()
    {
        while (_isEnabled)
        {
            _stopRequestEvent.WaitOne(_interval);

            if (_isEnabled &&
                Tick != null)
            {
                Tick(this, null);
            }
        }

        _stoppedEvent.Set();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:05:21.007

我能够使用以下代码创建一个时钟：

```
ThreadPoolTimer Timer1 = ThreadPoolTimer.CreatePeriodicTimer(Timer1_ElapsedHandler, TimeSpan.FromSeconds(1));
clockTick = false;
UpdateLoop(); 
```

为此，您需要一个事件处理程序，在我的时钟中，计时器已计时：

```
public void Timer1_ElapsedHandler(ThreadPoolTimer timer)
{
    clockTick = true;
} 
```

然后更新 GUI（或任何你需要的东西），有一个更新循环：

```
public async void UpdateLoop()
{
    do
    {
        await Task.Delay(100);
    } while (!clockTick);
    ClockTextBlock.Text = DateTime.Now.ToString();
    clockTick = false;
    UpdateLoop();
} 
```

可能将其包装在一个类中并对其进行一些清理可能会为您提供良好的非 UI 计时器的基础。

# python - 在Python中随机选择类属性

> ID：10493258
> 
> 赞同：2
> 
> 时间：2012-05-08T05:52:35.663
> 
> 标签：python, class, attributes, instance

```
class person():
    def __init__(self):
        self.height = 3.0
        self.weight = 240.0
        self.temp = 99.23

        self.statlist = [self.height, self.weight, self.temp]

    def grow(self):
        self.statlist[1] = self.statlist[1] + 26.0 
```

解决这个问题的最佳方法是什么？

问题是我试图从列表中访问这些“统计”属性并更改它们，但我真的不知道如何调用它们。我需要这样做，以便我可以随机选择要修改的统计数据。我应该创建一个统计类，以便每个统计都是该类的一个实例吗？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:00:51.100

使用 getattr() 和 setattr()：

```
import random
class person():
    def __init__(self):
        self.height = 3.0
        self.weight = 240.0
        self.temp = 99.23

        self.statlist = ["height", "weight", "temp"]

    def grow(self):
        name = random.choice(self.statlist)
        setattr(self, name, getattr(self, name) + 26.0)

    def __str__(self):
        return "%f, %f, %f" % (self.height, self.weight, self.temp)

p = person()
print p
p.grow()
print p
p.grow()
print p 
```

输出是：

```
3.000000, 240.000000, 99.230000
3.000000, 266.000000, 99.230000
3.000000, 266.000000, 125.230000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:57:09.870

```
import random

class person():
    def __init__(self):
        self.height = 3.0
        self.weight = 240.0
        self.temp = 99.23

        self.attrlist = ['height', 'weight', 'temp']

    def grow(self):
        rand_attr = random.choice(self.attrlist)
        attr_value = getattr(self, rand_attr)
        setattr(self, rand_attr, attr_value + 26.0) 
```

# javascript - Javascript - 如何做一个启动画面？

> ID：10493263
> 
> 赞同：0
> 
> 时间：2012-05-08T05:53:03.567
> 
> 标签：javascript, html, document-body

我正在寻找一个 javascript 函数，它会延迟网页正文加载，我希望它显示我的 html 背景 1 或 2 秒，然后显示正文内容。需要帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:50:45.370

您可以在 jquery 中使用 .delay() 函数（我使用的是 Jquery 1.7.1 版本），如下例所示：

```
 $(selector).delay(2000).fadeIn("slow"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:22:40.283

follow these steps

1) put a div on top of your content and set it css property display:none like

```
&lt;body&gt;
&lt;div id="wrapperdiv" style="display:none;"&gt;
......<br/>
&lt;/div&gt;
&lt;/body&gt;
<br/> 
```

2) now on body tag of your page add a onload function like

```
 <body onload="displaypage()">; 
```

3) Now add script under body tag like

```
<script type="text/javascript">;
function displaypage()
{<br/>
var t=setTimeout("displaydiv()",3000);//Number of seconds *1000, Currently its **3** seconds 
}
function displaydiv()
{
document.getElementById("wrapperdiv").style.display='block';
}    
</script>; 
```

**Live Example**

```
<html>
<head>
<title>Test Delay Display Page By IuR</title>
</head>
<body onload="displaypage()">
<script type="text/javascript">
function displaypage()<br/>
{
var t=setTimeout("displaydiv()",3000);// it will Delay for 3 seconds
}

function displaydiv()
{
document.getElementById("wrapperdiv").style.display='block';
}

</script>
<div id="wrapperdiv" style="display:none;height:500px;width:300px;background-color:red;">
</div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T06:14:40.203

您不能延迟加载正文内容，但是您可以在内容顶部放置一个 div（使用绝对定位和 z-index），该 div 显示在其顶部并隐藏您的内容，直到您运行两秒钟并且然后你可以隐藏覆盖 div。

这是一个工作示例： http: [//jsfiddle.net/jfriend00/Ru6tk/](http://jsfiddle.net/jfriend00/Ru6tk/)，您可以在其中看到 HTML、CSS 和 javascript。

或者，您可以将您的主体内容放在它自己的 div 中，并将该 div 设置为`display: none`通过初始 CSS，然后首先显示任何其他内容，然后在两秒钟后，您可以显示您的主 div 并隐藏其他 div 因此隐藏背景并显示您的主要内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T05:57:51.150

你不能停止页面加载。但是您可以通过隐藏内容的主容器直到指定时间来强制启动闪屏。

```
<div id="bg">
  <div id="container" style="display:none">
  -- your content goes here -- 
  </div>
</div>
<script type="text/javascript">
// use setTimeout to show #container
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-21T01:05:25.907

这在其他地方作为临时警报发布，但我也将其用作启动屏幕。样式设置使它在页面上居中，并使文本居中。

```
function alertTimeout(mymsg,mymsecs)
{
 var myelement = document.createElement("div");
myelement.setAttribute("style","background-color: grey;color:black; width: 450px;height: 200px;position: absolute;top:0;bottom:0;left:0;right:0;margin:auto;border: 4px solid black;font-family:arial;font-size:25px;font-weight:bold;display: flex; align-items: center; justify-content: center; text-align: center;");
 myelement.innerHTML = mymsg;
 setTimeout(function(){
  myelement.parentNode.removeChild(myelement);
 },mymsecs);
 document.body.appendChild(myelement);
} 
```

致电：

```
alertTimeout("Splash 1.0<br>This is a splash<br>Thank you for watching",5000) 
```

# java - 如何使用 hql 在 MySql 中设置日期时间字段

> ID：10493273
> 
> 赞同：3
> 
> 时间：2012-05-08T05:53:50.513
> 
> 标签：java, mysql, spring, hibernate

我在 MySql DB 中以 YYYY-mm-dd hh:mm:ss 格式插入日期时遇到问题。在 DB 中归档的类型为 datetime。

我尝试过这个 ：

```
Calendar calendar = Calendar.getInstance();
calendar.setTime(new Date());
calendar.set(Calendar.MINUTE, startMinute);
calendar.set(Calendar.SECOND,01);
Date startTime = calendar.getTime();

String hqlUpdate = "update challenge set start_time = :startTime where challenge_id =  :id";
sessionFactory.getCurrentSession().createSQLQuery(hqlUpdate)
                                 .setDate("startTime", startTime)
                                 .setInteger("id", id).executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-05T08:33:37.040

尝试使用以下内容。

```
.setTimestamp("startTime", startTime); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:59:05.097

在这里，我专门尝试使用 simpleDateFormat 格式化日期对象，然后再将其传递给休眠状态。检查这是否有效。

```
DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
Calendar calendar = Calendar.getInstance();
calendar.setTime(new Date());
calendar.set(Calendar.MINUTE, startMinute);
calendar.set(Calendar.SECOND,01);
Date startTime = dateFormat.parse(dateFormat.format(calendar.getTime();));

String hqlUpdate = "update challenge set start_time = :startTime where challenge_id =  :id";
sessionFactory.getCurrentSession().createSQLQuery(hqlUpdate)
                             .setDate("startTime", startTime)
                             .setInteger("id", id).executeUpdate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T04:22:16.573

`setParameter()`如果使用而不是`setDate()`......它对我有用

# python - 如何编写可以自动规范化数据的 django 模型？

> ID：10493279
> 
> 赞同：2
> 
> 时间：2012-05-08T05:54:28.513
> 
> 标签：python, django

我正在构建一个音乐推荐引擎，它使用曲目的歌词来确定歌曲在情感上彼此之间的关联程度。我已使用 tfidf 算法（此处未显示）为每首歌曲生成分数，我想将每首曲目的 tfidf 分数存储在名为`tfidf`. 但我想将每个 tfidf 分数标准化为 0-1。

我遇到的困难是弄清楚如何在有人在管理界面中输入 tfidf 值后立即自动标准化这些 tfidf 分数。所以想象一下，你已经进入了管理界面，想要将歌曲“In Da Club”添加到数据库中。您输入歌曲的名称及其 tfidf 分数，如下所示：

![在此处输入图像描述](../Images/c38aadac546bf58060ea47d54aebbdf9.png)

我想做的是确保一旦你点击保存按钮，它就会自动`normalized_tfidf`用标准化值填充空列。我正在使用一个简单的算法来规范化 tfidf 值。不过，在我开始之前，让我向您展示这张表的外观，以便您更清楚地了解算法正在做什么。因此，在将“In Da Club”添加到数据库后（并且数据已被规范化），表格列应如下所示：

![在此处输入图像描述](../Images/f66e39b4fc5508ee12f38fd32ab08898.png)

歌曲 x 和歌曲 y 只是我在数据库中播种的虚拟歌曲，用于设置算法工作的上限和下限。你看到的那个值`.50077`就是我想要自动生成的值。

该算法说要找到歌曲 x 中特征 tfidf 的归一化值 (nv)，求歌曲的 tfidf 分数与表中最小 tfidf 分数之间的差值，然后除以表中最大和最小 tfidf 分数之间的差值桌子。这是数学上的。

nv(In da club *tfidf* ) = (In da club *tfidf* – tfidf *min* ) / (tfidf *max* – tfidf *min* )

这是计算：

nv（在俱乐部中）= (.25048 - .00010) / (.50000 - .00010) = **.50077**

所以我试图将它编码到我的模型中。问题是 django 似乎没有允许我像使用 SQL 语句那样在表中选择最小和最大 tfidf 值的方法。我对 django 很陌生，并不完全了解它的功能。如果我的这个表的模型看起来像我下面的模型，那么重写它以便在将 tfidf 输入管理员后自动标准化的最佳方法是什么？

```
class Party(models.Model):
    song = models.CharField(max_length=30)
    tfidf = models.FloatField()
    normalized_tfidf = models.FloatField() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:38:50.670

保存模型时有两种方法可以触发某些操作：覆盖`save`方法或编写`post_save`侦听器。我将展示 override 方法，因为它更简单一些，并且非常适合这个用例。

要获得最大值/最小值，您可以使用 Django 的[查询集聚合函数](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#aggregation)：

```
from django.db.models import Max, Min

class Party(models.Model):
    ...
    def save(self, *args, **kwargs):
        max = Party.objects.all().aggregate(Max('tfidf'))['tfidf__max']
        min = Party.objects.all().aggregate(Min('tfidf'))['tfidf__min']
        self.normalized_tfidf = (self.tfidf - min) / (max - min)
        super(Party, self).save(*args, **kwargs) 
```

像这样覆盖默认模型方法`save`非常简单，但如果您有兴趣，[这里还有更多信息。](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-predefined-model-methods)

请注意，如果您在任何时候进行[批量更新](https://docs.djangoproject.com/en/dev/topics/db/queries/#updating-multiple-objects-at-once)，`Party.tfidf`则不会调用保存处理程序（或发送 post_save 信号，就此而言），因此您必须手动处理所有行 - 这意味着很多数据库写入，并且几乎会使批量更新变得毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-05T15:51:52.667

正如@klaws 在上面的评论中提到的那样，为了防止过时数据等问题，在添加新歌曲时计算归一化值可能并不理想。

相反，您可以使用让数据库在需要时计算标准化值的查询。

你需要从 django 的[表达式](https://docs.djangoproject.com/en/stable/ref/models/expressions/#window-functions)和[聚合](https://docs.djangoproject.com/en/stable/ref/models/querysets/#aggregation-functions)中导入一些东西：

```
from django.db.models import Window, F, Min, Max 
```

这是一个简单的示例，适用于 OP 的问题，假设不需要分组：

```
def query_normalized_tfidf(party_queryset):
    w_min = Window(expression=Min('tfidf'))
    w_max = Window(expression=Max('tfidf'))
    return party_queryset.annotate(
        normalized_tfidf=(F('tfidf') - w_min) / (w_max - w_min)) 
```

该类`Window`允许我们继续注释单个对象，如此[处](https://www.postgresql.org/docs/12/tutorial-window.html)和 Django[文档](https://docs.djangoproject.com/en/stable/ref/models/expressions/#window-functions)中所述。

除了使用单独的查询函数，我们还可以将其添加到自定义[模型管理器](https://docs.djangoproject.com/en/stable/topics/db/managers/#custom-managers)中。

如果您需要针对某些组计算归一化值（例如，如果歌曲有 a `genre`），则可以扩展和概括上述内容，如下所示：

```
def query_normalized_values(queryset, value_lookup, group_lookups=None):
    """
    a generalized version that normalizes data with respect to the
    extreme values within each group
    """
    partitions = None
    if group_lookups:
        partitions = [F(group_lookup) for group_lookup in group_lookups]
    w_min = Window(expression=Min(value_lookup), partition_by=partitions)
    w_max = Window(expression=Max(value_lookup), partition_by=partitions)
    return queryset.annotate(
        normalized=(F(value_lookup) - w_min) / (w_max - w_min)) 
```

这可以按如下方式使用，假设会有一个`Party.genre`字段：

```
annotated_parties = query_normalized_values(
    queryset=Party.objects.all(), value_lookup='tfidf',
    group_lookups=['genre']) 
```

这将使`tfidf`值相对于`tfidf`每个中的极值标准化`genre`。

注意：在除以零的特殊情况下（当`w_min`等于时`w_max`），生成的“归一化值”将为`None`.

# .htaccess - 阻止对文件夹的直接访问，但从子域授予访问权限

> ID：10493288
> 
> 赞同：0
> 
> 时间：2012-05-08T05:54:48.950
> 
> 标签：.htaccess, lighttpd

我已经成功安装了一个 joomla 网站，并且想知道是否可以通过子域重定向访问管理面板，但阻止直接访问“管理员”文件夹。

换句话说：

domain.net/administrator 应该被阻止（错误 403 或其他）并且 admin.domain.net 应该重定向到管理员文件夹。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:37:39.027

我通过安装 AdminExile 插件解决了我的问题：http: [//extensions.joomla.org/extensions/access-a-security/site-security/login-protection/15711](http://extensions.joomla.org/extensions/access-a-security/site-security/login-protection/15711)

然后我创建了一个重定向到 /administrator?key=value 的管理子域，这解决了我的问题。

# wordpress - 如何删除wordpress的页面链接默认菜单

> ID：10493291
> 
> 赞同：0
> 
> 时间：2012-05-08T05:55:34.420
> 
> 标签：wordpress, menu

当我在 wordpress 中创建页面时，该页面会自动添加到默认菜单中。我应该怎么做才能不在默认菜单中显示页面链接，或者如何删除默认菜单中的链接。管理面板中是否有任何地方可以管理默认菜单链接。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:02:38.027

在 Appearance->Menu 下创建您自己的菜单，然后选择 Theme Location 作为您创建的菜单。如果您有任何疑问，请告诉我。
检查图像以供参考-

![图片](../Images/7451428f5cb630f60946f7b5d2a62b3f.png)

您需要从 header.php 文件中的 wp_nav_menu 函数中排除页面。
关注链接可能对您有用-[关注链接](http://ehsanis.me/2010/11/30/wordpress-wp_nav_menu-to-exclude-pages/)

# iphone - 无法使用导航控制器在标签栏控制器上推送类

> ID：10493294
> 
> 赞同：0
> 
> 时间：2012-05-08T05:55:49.480
> 
> 标签：iphone, xcode, uinavigationcontroller, uitabbarcontroller

我使用 TabBarController 和 NavigationController 创建了一个应用程序。标签栏控制器有 3 个标签。在每个选项卡上单击按钮时应推送到新类。如何才能做到这一点？？我不能这样做，因为 TabBarController 是父类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:03:53.503

在 MainWindow xib 文件中实现 UINavigationController 然后分配属性并拖动它。然后当你点击按钮想要导航到另一个页面时放这个，比如调用这个代码

```
YourPage *js=[[YourPage alloc] initWithNibName:@"YourPage" bundle:nil]; 
[self.navigationController pushViewController:js animated:YES];
[js release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:07:01.503

我假设您正在尝试推送到 UIViewController。将您的 TabBarController 连接到 UINavigationController，然后将所需的 UIViewController 连接为 UINavigationController 的根视图，您的按钮现在应该能够通过 UINavigationController 推送到 UIViewController（根视图控制器）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T05:22:54.837

最后，我尝试使用委托对象推送我的课程并且它成功了。这是代码。

```
loginViewController = [[ LoginViewController alloc] init];
    RewardieAppDelegate *appDelegate =  [[UIApplication sharedApplication] delegate];
    [appDelegate.navigationController pushViewController:loginViewController animated:YES]; 
```

# gcc - 如何在 Cygwin 中使用 MinGW-w64？

> ID：10493297
> 
> 赞同：13
> 
> 时间：2012-05-08T05:56:11.620
> 
> 标签：gcc, cygwin, mingw, mingw-w64

至少从2010 年[**12 月起**](ftp://www.fruitbat.org/pub/cygwin/circa/2010/12/30/094549/index.html)，Cygwin 就可以使用 MinGW-w64 。但是我很难用它来编译几乎任何东西。我已经设置了[**替代品的符号链接**](http://linux.die.net/man/8/alternatives)

```
p=x86_64-w64-mingw32
alternatives \
    --install /usr/bin/gcc.exe gcc /usr/bin/$p-gcc.exe 0 \
    --slave /usr/bin/ar.exe ar /usr/bin/$p-ar.exe 
```

例如，如果我尝试编译`wget`

```
./configure --without-ssl
make 
```

错误（为简洁而编辑）

```
connect.o:connect.c:(.text+0x3f): undefined reference to `__imp_htons'
connect.o:connect.c:(.text+0xbe7): undefined reference to `__imp_ntohs'
connect.o:connect.c:(.text+0xd96): undefined reference to `run_with_timeout' 
```

如果我使用

*   带有 MinGW gcc 的 MinGW shell
*   Cygwin shell 与 Cygwin gcc ( `gcc4-core`)

然后 Wget 将编译。

基于 ak2 的答案，这似乎有效

```
./configure --host=x86_64-w64-mingw32 --disable-ipv6 --without-ssl
make 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-01T01:35:18.567

ak2 部分不正确，如此[处](http://www.linuxquestions.org/questions/slackware-14/explaining-build-host-target-509739/)所述。

`--host=x86_64-w64-mingw32`正如您所发现的，正确的选项是。`--target`用于构建交叉编译器本身。选项包括：

*   `--build`: 你正在建立什么
*   `--host`: 你正在建造什么
*   `--target`：如果您正在构建的是交叉编译器，那么该交叉编译器将用于构建什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-08T07:27:00.233

Cygwin 的 MinGW-w64 编译器是一个交叉编译器，因为它托管在 Cygwin 上但针对 MinGW-w64。您只需要`configure`使用该`--target`选项来说明它，如下所示：

```
--target=x86_64-w64-mingw32 
```

这样，`make`将调用适当的工具。您还需要安装或构建您尝试构建的软件包所依赖的任何库的 MinGW-w64 版本。

弯曲替代系统以使工具`/usr/bin`指向 MinGW-w64 并不是一个好主意，因为这样您将使用带有 Cygwin 标头和库的 MinGW 工具，这会导致像您上面引用的错误。

# java - Android BufferedReader ReadLine() got IOException - Expected a hex chunk size ，如何解决这个问题？

> ID：10493298
> 
> 赞同：2
> 
> 时间：2012-05-08T05:56:16.203
> 
> 标签：java, android, readline, bufferedreader, ioexception

我在 Android 中使用 BufferedReader 接收 http 流连接，解析消息时收到使用代码：

```
url = new URL(HOST_URL_PUSHMESSAGE);
urlConnection = url.openConnection();
in = (InputStream) urlConnection.getContent();
reader = new BufferedReader(new InputStreamReader(in));
line = reader.readLine();
in.close(); 
```

它看起来运行良好，但有时我得到 IOException - 预期为十六进制块大小，但......发生在：

```
line = reader.readLine(); 
```

这是如何发生的？如何解决？更改缓冲阅读器大小有帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:05:24.580

见源 [http://www.java2s.com/Open-Source/Android/android-core/platform-libcore/org/apache/harmony/luni/internal/net/www/protocol/http/ChunkedInputStream.java.htm](http://www.java2s.com/Open-Source/Android/android-core/platform-libcore/org/apache/harmony/luni/internal/net/www/protocol/http/ChunkedInputStream.java.htm) 异常发生在那里

```
try {
    bytesRemainingInChunk = Integer.parseInt(chunkSizeString.trim(), 16);
} catch (NumberFormatException e) {
    throw new IOException("Expected a hex chunk size, but was " + chunkSizeString);
} 
```

看起来数据中有一些不正确的地方。

# c++ - 用于调试 C++ 项目的 ide

> ID：10493306
> 
> 赞同：0
> 
> 时间：2012-05-08T05:57:42.693
> 
> 标签：c++, c, visual-c++, netbeans, ide

我已经下载了rx。有人可以告诉一个合适的 ide 来调试和构建“rdf-3x”的源代码。根据操作系统：ubuntu 和 Windows 都适合我。

我尝试了 netbeans (C++)，但它对我不起作用，因为它不会将其中的所有文件夹视为一个项目，而是将它们视为单独的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:15:25.880

我正在使用 Eclipse..

它对我来说是用户友好的。
你可以试试。 [http://www.eclipse.org/cdt/](http://www.eclipse.org/cdt/)

CMIIW

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:02:48.667

您是否尝试过查看[CodeBlocks](http://www.codeblocks.org/)？既然你提到了 Ubuntu，我假设你需要在 Linux 上运行的东西。如果您不是并且正在使用 Windows，则可以查看[Dev C++](http://www.bloodshed.net/devcpp.html)。

不过，我从未广泛使用过它们，因此我无法提供更多信息。

# asp.net-mvc-3 - 无法在 MVC 应用程序中显示内存中的值

> ID：10493314
> 
> 赞同：0
> 
> 时间：2012-05-08T05:58:05.703
> 
> 标签：asp.net-mvc-3

我有以下代码：

```
<div>
        UserName: @{ 
                ((Person>)CacheDispatcher.LoadFromCache("LoggedInUser")); 
             } 
    </div> 
```

它根本不会产生任何用户名。我放了一个断点，我绝对可以看到 CacheDispatcher 正在返回一个值（即用户名），但是当页面呈现时，它不显示一个值。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:11:18.133

这太烦人了.. asp.net MVC 的缺点是您无法在没有 HTML 帮助器的情况下呈现字符串.. 我通过使用 @Html.Label 来生成值来解决这个问题..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:13:38.113

这个问题不需要使用@Html.Label 来解决。

你应该使用过类似的东西：

```
@((Person>)CacheDispatcher.LoadFromCache("LoggedInUser")).ToString(); 
```

代替：

```
@{ 
    ((Person>)CacheDispatcher.LoadFromCache("LoggedInUser"))
} 
```

您的原件永远不会对响应呈现任何内容。那只是一段代码。

# iphone - 使用 iPhone 的 HDR 功能

> ID：10493317
> 
> 赞同：1
> 
> 时间：2012-05-08T05:58:43.830
> 
> 标签：iphone, ios5, photo, hdr

我正在尝试创建一个在使用 iPhone 4/4s 拍照时默认为 HDR 模式的 iPhone 照片应用程序。如果用户有 iPhone 4/4s，我不希望用户使用我的应用程序拍照时使用非 HDR 选项。但是，UIImagePickerController 中不提供 HDR 模式。你能告诉我如何让 iPhone 应用程序“自动默认为 HDR 模式”吗？（我正在iOS5上开发）非常感谢

# android - XMPP 托管服务

> ID：10493327
> 
> 赞同：-1
> 
> 时间：2012-05-08T05:59:43.067
> 
> 标签：android, xmpp

我目前正在开发一个使用 XMPP 作为聊天堆栈的 Android 应用程序。我为我的大部分开发设置了一个本地 OpenFire 服务器，现在正在考虑使用商业托管服务进行生产。我需要满足许多要求：

1.  需要支持客户端用户注册。
2.  需要支持 IQProviders，例如 vCard（用户配置文件）和 query（用户搜索）。
3.  最好不限制用户数量。

我有哪些选择？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:57:29.227

1.  您必须自己实现用户注册，因为 OpenFire 不支持它。
2.  我对这里了解不多。
3.  现在一台机器可以支持 10 万用户。现在，如果您需要扩展，您将需要使用 Oracle Coherence，它会起作用。

这里要注意：Coherence 不是免费的，而且要花费 $$。因此，如果您选择 OpenFire 并认为它是免费的，您可能需要再次检查。

# vb.net - 使用类名在加载的 dll 中调用共享方法

> ID：10493328
> 
> 赞同：0
> 
> 时间：2012-05-08T05:59:53.537
> 
> 标签：vb.net

```
sample.vb
class sam
public shared sub hh()
Console.WriteLine("asasas")
end sub
end class

test.vb
Dim ass as Assembly  = Assembly.LoadFile("sample.dll") 
```

现在，我想使用类名调用共享方法。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:06:05.983

反射是你的朋友。添加一个`Imports System.Reflection`并尝试以下操作：

```
Sub Main()
    Dim ass As Assembly = Assembly.LoadFile("sample.dll")
    Dim t_sam As Type = ass.GetType("sam")
    Dim hh_m As MethodInfo = t_sam.GetMethod("hh", BindingFlags.Public Or BindingFlags.Static)
    hh_m.Invoke(Nothing, New Object() {})
End Sub 
```

# compiler-construction - Lex（flex）：如何提供输入以及输出在哪里？

> ID：10493330
> 
> 赞同：0
> 
> 时间：2012-05-08T06:00:01.677
> 
> 标签：compiler-construction, yacc, lex, flex-lexer

我对 Flex 非常陌生，我被困在这个早期阶段。我有一个 Lex 文件 20.l，其内容是

```
%{
/* a Lex program that adds line numbers
   to lines of text, printing the new text
   to the standard output
*/
#include <stdio.h>
int lineno = 1;
%}
line .*\n
%%
{line} { printf("%5d %s", lineno++, yytext); }
%%
main()
{ yylex(); return 0; } 
```

我从教科书中复制了代码（它没有告诉我如何在这里处理我的问题）。我已经做好了

```
flex 20.l 
```

并得到文件 lex.yy.c。然后我编译它

```
gcc lex.yy.c -o ADD -lfl 
```

并得到可执行文件 ADD。

现在如何使用此 ADD 将行号添加到其他文本文件？例如，如果输入文件名为“try.c”，我应该使用什么命令？我试过“./ADD try.c”，但显然没有用。以及如何表示输出？

谢谢你。我知道这真的是一个愚蠢的问题，但似乎没有人在网上教如何做到这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:23:25.900

> 我试过“./ADD try.c”

```
./ADD < try.c 
```

输出出现在标准输出上。如果您想要不同的文件处理，您可以编写自己的 main()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T04:09:29.907

要启用 ./ADD try.c 即不使用重定向，您可以在用户代码部分使用以下代码替换您的 main：

```
void main (int argc, char **argv)
{
    if (argc>0)
        yyin =fopen(argv[0], "r");
    else
        yyin = stdin;

    yylex();
} 
```

您可以增强输入参数选项解析以获得更好的输入和输出控制。

# javascript - xml 文件中的 JavaScript

> ID：10493332
> 
> 赞同：0
> 
> 时间：2012-05-08T06:00:15.373
> 
> 标签：javascript, xml

我正在制作具有 xml 文件的 ssrs 报告。

我想从 xml 本身调用一个 javascript [for tooltip]。

我知道我可以将它放在要部署的页面中，但在我的特定场景中这是不可能的。

供参考：

*   javascript 用于工具提示及其使用 jQuery 和 css 文件。

*   它在 html、aspx 页面中工作正常。

脚本要包含的文件：

```
<link rel="stylesheet" type="text/css" href="http://.../SiteAssets/Styles/master.css" />
<link rel="stylesheet" type="text/css" href="http://.../SiteAssets/Styles/jquery.qtip.min.css" />
<link rel="stylesheet" type="text/css" href="http://.../SiteAssets/Styles/demos.css" /> 
```

脚本是：

```
 $(document).ready(function () {
        // We'll target all DIV elements with title tags.)
        $('div[title]').qtip(
{
    content: {
        attr: 'title' // Use the jstooltip attribute of the area map for the content
    },
    style: {
        classes: 'ui-tooltip-tipsy ui-tooltip-shadow'
    }
});
    });

</script> 
```

任何想法/其他方式？

# android - 播放-->停止-->播放-->触摸停止音频

> ID：10493333
> 
> 赞同：0
> 
> 时间：2012-05-08T06:00:33.173
> 
> 标签：android, audio, media-player

我做了一个项目，其中两个音频使用触摸两个不同的文本视图播放。这是一个文本视图的简单代码

```
 tv.setOnTouchListener(new OnTouchListener() {
   @Override
   public boolean onTouch(View v, MotionEvent event)   
   {  
       if(event.getAction() == MotionEvent.ACTION_DOWN)  
       {  
           if( v == findViewById( R.id.CustomFontText ))
           {

               if (mp != null && mp.isPlaying()) {
                   mp.stop();
               }
               else
               {
                   mp.start();
               }

               if (mp1 != null && mp1.isPlaying()) {
                   mp1.pause();
               }
                mp.start();

       }  

   }
    return false;  
   } 
```

这里`mp`和`mp1`是两个媒体播放器。`tv=textview`.当`tv`触摸`mp`播放。并且当`tv`再次触摸它停止时，如果我再次触摸它停止后`tv`它不会再次播放音频。但我想在这个过程中的每次触摸中让它`Play -->Stop-->Play-->Stop....continuous`............我需要修复它或实施它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:10:41.220

请看一下状态[图](http://developer.android.com/reference/android/media/MediaPlayer.html#StateDiagram)。`MediaPlayer`

请注意：

> 一旦处于 Stopped 状态，播放将无法开始，直到[`prepare()`](http://developer.android.com/reference/android/media/MediaPlayer.html#prepare%28%29)或被[`prepareAsync()`](http://developer.android.com/reference/android/media/MediaPlayer.html#prepareAsync%28%29)调用以将 MediaPlayer 对象再次设置为*Prepared*状态。

您的代码中似乎也有一个错误，您调用`mp.start()`了两次，并且`mp1.start()`从未调用过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:15:27.583

先把这段代码去掉.....

```
if (mp1 != null && mp1.isPlaying()) {
               mp1.pause();
           }
            mp.start(); 
```

然后每次在启动mp之前，释放上一个并将setDataSource设置为Music player对象，准备它...

像这样更改您的代码...

```
if (mp != null && mp.isPlaying()) {
               mp.stop();
           }
           else
           {
               mp.release(); // this will bring mp to idle state
               mp.setDataSource(MEDIA_PATH + File.separator + songs.get(position));
               mp.prepare();
               mp.start();
           } 
```

我认为现在它肯定会工作......

# android - 适用于 Android SDK/NDK 的 Ubuntu PPA？

> ID：10493334
> 
> 赞同：15
> 
> 时间：2012-05-08T06:00:38.837
> 
> 标签：android, sdk, deb

有没有人费心为 Android SDK 和/或 NDK 包创建 PPA？

我在谷歌搜索中看到了一些暗示这一点的东西，但没有一个作为首选解决方案跳出来的。

我猜想许可问题可能要求它像 flash-installer（或更类似的 google-earth）包一样运行，但它会非常有用。SDK 安装 OOB 缺少正确的包管理可能带来的许多功能（依赖项、多用户权限/能力等）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T17:37:23.253

您是否尝试过[Upubuntu 的指南](http://www.upubuntu.com/2012/07/install-android-sdk-manager-revision-20.html)？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-09T02:44:03.290

试试这个，我是新手，正在研究这个。我正在为 Gajj Distro 打包这些工具，

为了精确

```
 sudo add-apt-repository ppa:linuxgndu/gajj-sci 
```

为了值得信赖

```
 sudo add-apt-repository ppa:linuxgndu/adt-raring 

    sudo apt-get update 
```

Android 开发者工具

```
 sudo apt-get install adt (Google may be ending eclipse plugin support, so this package may not be further maintained on this ppa, however you can check plugin updates from eclipse, using Help-> Install new software-> Then adding or selecting plugin repository.) 
```

您还必须安装 Android-sdk

```
 sudo apt-get install android-sdk

   sudo sh /opt/android-sdk/install-sdk 
```

（安装android studio可以跳过`sudo sh /opt/android-sdk/install-sdk`，安装时bcz studio会自动查找sdk（首次启动也可以手动设置路径）。）

对于 Android 工作室

```
 sudo apt-get install android-studio 
```

注意：您可能希望从突触包管理器（或任何）锁定包版本，以防止通过此 ppa 下载大型更新，谷歌提供的 bcz 补丁非常小。此 ppa 仅用于安装目的。

* * *

您还可以帮助我测试我的包构建，bcz 我是新手，我对 ppa 和打包了解不多。

希望这就是你所要求的。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T20:24:54.797

到目前为止，我还没有找到任何 ppa，因为 Upubuntu ppa 不再更新并且没有 Quantal 的软件包。`android-sdk`但是在 Backtrack Linux 的存储库中有一个包。截至 2012 年 12 月 25 日，这个包声称是 sdk 的 r20.0.3-bt0 版本，并且有一个 x64 版本，但由于我没有测试它，我对此一无所知。

如果你想使用这个存储库，[Ubuntubuzz 有一个关于如何将它们添加到 Ubuntu 的教程](http://www.ubuntubuzz.com/2011/09/install-backtrack-5-application-in.html)。

# html - 同步文件系统api可以在chrome扩展中使用吗

> ID：10493337
> 
> 赞同：0
> 
> 时间：2012-05-08T06:00:49.713
> 
> 标签：html, google-chrome, google-chrome-extension, html5-filesystem

我正在谷歌扩展中创建页面操作弹出窗口。当弹出窗口关闭时，我需要将内容写回文件。为此，我附上了该`window.unload`活动。在卸载处理程序中，我试图写入文件。但是由于我使用的是异步api，因此在为`getFile`函数设置successHandler之后，页面立即关闭并且successHandler没有被执行。我可以在这里使用同步文件api吗？我读到同步 api 只能与 webworkers 一起使用。可以在扩展中使用吗？或者有没有其他方法可以处理这种情况。我将我的代码粘贴到此处的文件中

```
fileSystem.root.getFile(fileName, {create : true, exclusive : true}, function (fileEntry) {
                file.createWriter(function() {
                    window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder;
                    var bb = new BlobBuilder(); 
                    bb.append(JSON.stringify(credentialsObj));
                    fileWriter.write(bb.getBlob('text/plain'));                         
                }, errorHandler);
            }, errorHandler); 
```

**修改最初发布的问题**

我将上面的代码移到了内容脚本中。现在，当页面操作关闭时，我正在尝试与内容脚本进行通信。为此，我将一个函数附加到`window.onunload`. 我在调试器模式下打开了页面操作弹出窗口并执行了`location.reload(true)`. 然后我的`window.unload`监听器被调用，我的程序控制到达内容脚本并且代码正在运行。但是当我实际部署扩展时，当用户单击弹出窗口以外的某个位置时，弹出窗口将关闭。在这种情况下不会调用卸载处理程序。Google 没有提供任何事件来检测弹出窗口何时关闭。提供的唯一事件是单击事件，如果页面操作有弹出窗口，则不会触发该事件。我可以做些什么来检测弹出窗口何时关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:40:52.560

要找出答案，请创建一个测试用例。以下代码在[后台页面的控制台](https://stackoverflow.com/a/10258029/938089?google-chrome-extension-logging-from-background-js)中进行了测试。

```
 webkitRequestFileSystem(TEMPORARY, 1024);     // TypeError: Not enough arguments 
```

以下测试用例[使用 Web worker](https://stackoverflow.com/a/10372280/938089?how-to-create-a-web-worker-from-a-string)**可以正常**工作：

```
// Create a worker for testing purposes
var blob = new Blob([
    'onmessage=function(e){postMessage(eval(e.data))}'
], {
    type: 'application/javascript'
});
var worker = new Worker((window.webkitURL || URL).createObjectURL(blob);
worker.onmessage = function(e) {console.log(e.data)};

// Test:
worker.postMessage('webkitRequestFileSystem(TEMPORARY, 1024)'); // No error
// For comparison, check whether we receive an error when something goes wrong:
worker.postMessage('webkitRequestFileSystem(0)');     // E: Not enough arguments 
```

因此， Chrome 扩展的范围内**不支持**同步 FileSystem API 。

不用在弹窗里做虚拟I/O，用[`chrome.extension.getBackground()`](https://developer.chrome.com/extensions/extension.html#method-getBackground)or[`chrome.runtime.sendMessage`](https://developer.chrome.com/extensions/runtime.html#method-sendMessage)把数据传到后台，让后台处理。

# objective-c - 两次分配初始化属性是否会导致 ARC Objective C 中的内存泄漏？

> ID：10493346
> 
> 赞同：4
> 
> 时间：2012-05-08T06:01:36.823
> 
> 标签：objective-c, memory-management, automatic-ref-counting

我有一段代码在功能上等同于：

```
self.myProperty = [[MyClass alloc] initWithBla:bla blur:blur];
self.myProperty = [[MyClass alloc] initWithBla:bla blur:blur]; 
```

如上所示，我实际上并没有连续两次这样做，但这实际上是正在发生的事情。我的问题是，这是否会导致 ARC Objective C 下的任何内存泄漏？`self.myProperty`在第一次调用中分配的内存是否在`self.myProperty`被重新分配以指向新分配的实例之前被回收`MyClass`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T06:31:01.920

属性实现中没有泄漏，只要您使用 ARC，您分配给属性的位置也没有泄漏。

来电：

```
self.myProperty = something 
```

调用生成的访问器，如下所示（假设`_myProperty`是您的属性的支持 ivar）：

```
- (void)setMyProperty:(MyClass *)anInstance
{
    if (_myProperty == anInstance)
        return;
    [_myProperty release];
    _myProperty = [anInstance retain];
} 
```

以前由该属性持有的对象被释放，因此它不会在这里泄漏。如果您使用的是 ARC，编译器生成的代码的工作方式相同。

您注意到泄漏的可能性是正确的，但不是（据我所知）您怀疑的地方。

```
self.myProperty = [[MyClass alloc] initWithBla:bla blur:blur]; 
```

这将创建一个保留计数为 +1 的新对象并将其分配给属性（然后再次保留它：+2）。因此，您在此处的代码仍然具有对该对象的所有权引用。当你重复这行时，你已经孤立了你仍然拥有的第一个引用——如果你使用的是 ARC，你很好：它确保对象被释放。如果没有，该孤立对象仍会保留：您确实有泄漏。适当的非 ARC 事情是：

```
self.myProperty = [[[MyClass alloc] initWithBla:bla blur:blur] autorelease]; 
```

但是，再一次，使用 ARC 你就好了。

* * *

要解决评论中的一个相关问题：如果您分配给局部变量而不是 to ，这仍然可以 - 但仅限于 ARC 下`self.myProperty`。当你写：

```
id myLocalVar;
myLocalVar = [[MyClass alloc] initWithBla:bla blur:blur];
myLocalVar = [[MyClass alloc] initWithBla:bla blur:blur]; 
```

编译器把它变成：

```
__strong id myLocalVar; // variables are strong by default
myLocalVar = [[MyClass alloc] initWithBla:bla blur:blur];
[myLocalVar release]; // ARC inserts release before myLocalVar is reassigned to another object
myLocalVar = [[MyClass alloc] initWithBla:bla blur:blur];
// ... sometime later ...
[myLocalVar release]; // ARC inserts another release when myLocalVar goes out of scope 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T06:18:22.247

没关系，这里没有内存泄漏。这就是 ARC 的全部意义所在。

# java - 没有为代码缓存内存池运行垃圾收集

> ID：10493348
> 
> 赞同：1
> 
> 时间：2012-05-08T06:01:51.960
> 
> 标签：java, memory, garbage-collection, jvm-hotspot

当我使用 GarbageCollectorMXBean 打印垃圾收集的详细信息时，输出会显示以下信息：-

```
Name: PS ScavengeCollection 
count: 72
Collection time: 3041
Memory Pools:   PS Eden Space   PS Survivor Space

Name: PS MarkSweepCollection 
count: 5
Collection time: 4922
Memory Pools:   PS Eden Space   PS Survivor Space   PS Old Gen 
```

现在，ScavengeCollection 和 MarkSweep 集合非常正确地涵盖了 5 个可用内存池中的 4 个，不包括

> 代码缓存（非堆内存）。

我想知道为什么垃圾收集器从来没有运行过

> CodeCacheManager 内存池管理的代码缓存内存池。

这是否意味着 GC 永远不会从 CodeCacheManager 内存池中垃圾收集对象？

有没有同样的意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:32:47.230

阅读[MemoryMXBean](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/MemoryMXBean.html)的文档。特别是关于**非堆内存的部分：**

> Java 虚拟机管理堆以外的内存（称为非堆内存）。Java 虚拟机有一个在所有线程之间共享的方法区。方法区属于非堆内存。它存储每个类的结构，例如运行时常量池、字段和方法数据，以及方法和构造函数的代码。它是在 Java 虚拟机启动时创建的。
> 
> 方法区在逻辑上是堆的一部分，但 Java 虚拟机实现**可以选择不进行垃圾收集或压缩它。**与堆类似，方法区可以是固定大小的，也可以是扩展和收缩的。方法区的内存不需要是连续的。
> 
> 除方法区外，Java 虚拟机实现可能需要内存用于内部处理或优化，这也属于非堆内存。例如，JIT 编译器需要内存来存储从 Java 虚拟机代码转换而来的本地机器代码，以实现高性能。

你问什么属于非堆内存？

**Permanent Generation**：包含虚拟机本身的所有反射数据的池，例如类和方法对象。对于使用类数据共享的 Java VM，这一代分为只读区和读写区。

**代码缓存**：HotSpot Java VM 还包括一个代码缓存，其中包含用于编译和存储本机代码的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T09:39:33.923

代码缓存是一个非堆空间，它会被垃圾收集，但不会被普通的 GC 线程收集。相反，它由 JIT 的帮助线程收集，因此它不会以与其他内存池相同的方式出现。不幸的是，代码缓存 MXBean 不支持通知，因此您必须轮询或想出另一种方法来监控内存使用情况。

总而言之，总内存使用可能无济于事，因为无法移动代码缓存中的代码块，这意味着无法压缩代码缓存。因此，您可能有很多内存，但如果它是碎片化的，您仍然可能会遭受分配失败。如果 JIT 线程无法正确清理缓存，则会导致 JIT 关闭。它不会在 JVM 的生命周期内重新启动。

# c# - 如何将 RTF 和 HTML 加载到 Crystal Reports 中？

> ID：10493354
> 
> 赞同：1
> 
> 时间：2012-05-08T06:02:13.503
> 
> 标签：c#, vb.net, crystal-reports, report

Crystal Report 不支持 RTF 大尺寸，我认为 Crystal Report 限制了消息，请告诉我如何解决？或者我应该更改为 SQL Reporting Services？

请帮我。

相关问题（见最后评论）：

*   [http://vbcity.com/forums/p/104797/709343.aspx#709343]
*   [http://vbcity.com/forums/t/152980.aspx]

谢谢， 乌腾

* * *

> 现在问题解决了，谢谢奔驰

```
 Dim tblData As New DataTable()
    tblData.Columns.Add("Display", GetType(String))

    Dim dr As DataRow = tblData.NewRow()
    'dr(0) = RichTextBox1.Rtf
    RichTextBox1.LoadFile("test2.rtf")
    dr(0) = RichTextBox1.Rtf

    tblData.Rows.Add(dr)

    Dim report1 As New CrystalReport1()
    report1.SetDataSource(tblData)

    CrystalReportViewer1.ReportSource = report1 
```

# android - 文本视图中的颜色变化

> ID：10493367
> 
> 赞同：-1
> 
> 时间：2012-05-08T06:02:59.790
> 
> 标签：android, textview

我正在使用 XML parser.in 我必须根据来自 API 的值更改 textview 的颜色。

从 api 它将返回 1 或 -1（对我来说，如果它是 1 意味着我必须将背景更改为绿色，否则为红色）。

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:12:48.917

简单的...

```
TextView yourTextView = (TextView)findViewById(R.id.yourTextView);

int response = responseFromParse(); // your parser logic

if(response == 1){
    yourTextView.setBackgroundColor(Color.GREEN);    
}else{    
    yourTextView.setBackgroundColor(Color.RED);    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:18:19.237

尝试这个，

```
TextView txt= (TextView) findViewById(R.id.textview1);
int val=Integer.parseInt(txt.getText().toString());
if(val==1)
   txt.setBackgroundColor(Color.GREEN);
else if(val==-1)
   txt.setBackgroundColor(Color.RED); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:14:19.610

这很简单：

```
if(API()==1)
    textView.setBackgroundColor(R.color.black);
else
    textView.setBackgroundColor(R.color.black); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:15:20.360

如果返回值在字符串中，请尝试

`TextView txt =(TextView) findViewById(R.id.textView01);`

`String k;`

`if(k.contentEquals("1")){`

```
 `txt.setBackgroundColor(Color.GREEN);` 
```

`}`

`else{`

```
txt.setBackgroundColor(Color.RED); 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T06:25:09.607

TextView text_view =(TextView) findViewById(R.id.textView1);

```
int returnval= your_returnval();

if(returnval== 1){

    text_view.setBackgroundColor(Color.GREEN); 

}
else if(returnval== -1){   

    text_view.setBackgroundColor(Color.RED);    
} 
```

# c# - 可序列化类

> ID：10493370
> 
> 赞同：3
> 
> 时间：2012-05-08T06:03:05.747
> 
> 标签：c#, .net-2.0

如何使**学生**类可序列化？我正在阅读这篇[文章](https://stackoverflow.com/questions/364253/how-to-deserialize-xml-document)，但如果我要在以下场景中实施它，我不知道什么是正确的方法。

```
public class Student
{
    private string _studentNumber;
    private string _lastName;
    private string _firtName;
    private List<Subject> _subjects;

    public Student() { }

    public string StudentNumber
    {
        get { return _studentNumber; }
        set { _studentNumber = value; }
    }

    public string LastName
    {
        get { return _lastName; }
        set { _lastName = value; }
    }

    public string FirstName
    {
        get { return _firtName; }
        set { _firtName = value; }
    }

    public List<Subject> Subjects
    {
        get { return _subjects; }
        set { _subjects = value; }
    }
}

public class Subject
{
    private string _subjectCode;
    private string _subjectName;

    public Subject() { }

    public string SubjectCode
    {
        get { return _subjectCode; }
        set { _subjectCode = value; }
    }

    public string SubjectName
    {
        get { return _subjectName; }
        set { _subjectName = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T06:05:54.843

对于`BinaryFormatter`, 只需`[Serializable]`在`public class ....`

对于`XmlSerializer`，没有；假设您想要元素，那应该可以正常工作

对于`DataContractSerializer`（严格来说是 3.0 类），添加`[DataContract]`到类和`[DataMember]`属性

对于 protobuf-net，您可以使用`DataContractSerializer`属性，只要每个属性都`[DataMember]`指定一个 unique `Order=`，或者您可以`[ProtoContract]`在类和`[ProtoMember(n)]`每个属性上使用 unique `n`。

对于`JavaScriptSerializer`（技术上 3.5），什么都没有——它应该可以工作

因为`Json.NET`，什么都没有-它应该工作

其他选项包括实施`ISerializable`or `IXmlSerializable`，但坦率地说：你不需要那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T06:06:20.990

通常我序列化以制作我的对象的深层副本而不实现`IClonenable`接口。

在您的情况下，您可以使用

```
[Serializable()]
public class Student
{
   // Your Class
} 
```

做一个扩展方法

```
public static class ExtensionMethod
{  
    public static T DeepClone<T>(this T element)
    { 
        MemoryStream m = new MemoryStream();
        BinaryFormatter b = new BinaryFormatter();
        b.Serialize(m, element);
        m.Position = 0;
        return (T)b.Deserialize(m);
    }
} 
```

并称它为

```
yourclassobject.DeepClone(); 
```

# jquery - 使用 jQuery 克隆多个表行

> ID：10493371
> 
> 赞同：3
> 
> 时间：2012-05-08T06:03:18.277
> 
> 标签：jquery, html, html-table, clone, rows

我想要一个包含字段表和我希望用户能够复制的一些字段的表单。想象一张发票有一些标题字段（即发票日期、客户名称等），然后有多个明细行（即产品、数量、价格），其中可能有任意数量，最后是一些页脚字段（即税、总计等）。我想最初用一个详细信息行显示表单，并让用户单击一个按钮以添加更多详细信息行，我想使用 jQuery 来做到这一点。

我找到了多个示例来展示如何克隆单个表格行，但我想做一些更灵活的东西；我希望能够指定几个表行并在单击按钮时克隆它们。

到目前为止，我有以下代码：

```
<form action="" method="post">
  <table border="0" align="center" cellpadding="2" cellspacing="1" id="invoice">
    <tr>
      <td>Name:</td>
      <td><input name="name" type="text" id="name" size="50" maxlength="100"></td>
    </tr>
    <tbody class="multi">
      <tr>
        <td>Product:</td>
        <td><input name="product[]" type="text" size="50" maxlength="50"></td>
      </tr>
      <tr>
        <td>Qty:</td>
        <td><input name="qty[]" type="text" size="5" maxlength="5"></td>
      </tr>
      <tr>
        <td>Price:</td>
        <td><input name="price[]" type="text" size="10" maxlength="10"></td>
      </tr>
    </tbody>
    <tr>
      <td>Tax:</td>
      <td><input name="tax" type="text" id="tax" size="10" maxlength="10"></td>
    </tr>
      <td>&nbsp;</td>
      <td><input type="button" id="addline" value="Add Another Line">
        <input name="Submit" type="submit" value="Submit Invoice"></td>
    </tr>
  </table>
</form> 
```

此示例的 HTML 已被缩短，但您会看到我指定了要克隆的表行，方法是将它们放在具有“multi”类的 tbody 中。我将使用 PHP 来处理提交的表单，因此 [] 位于要复制的字段末尾（这将使用 PHP 的数组处理功能）。在要复制的行的上方和下方可能有任意数量的表格行，但为了简洁起见，我只显示了一个。

然后我有一些看起来像这样的 JavaScript：

```
$(document).ready(function($) {
  $('#addline').click(function() {
    $('#invoice > tbody.multi').clone().insertAfter('#invoice > tbody.multi');
  });
}); 
```

这意味着选择我想要复制的整个行块，然后克隆它并在复制块之后立即插入它。

这行得通，但我遇到的问题是，在单击“添加行”按钮后，我最终得到了两个 tbody 块，它们都具有“multi”类。所以第二次单击 Add Line 按钮时，我克隆了两个 tbody 块，最终得到了四个 tbody！

解决此问题的最佳方法是什么？我是否应该尝试更改新复制的 tbody 的类，使其不会包含在未来的复制中？还是有更好的方法来完全处理这个问题？

请记住，我希望能够一次复制多个表格行，而不是像我在许多示例中看​​到的那样只复制一行。此外，我在一些示例中看到它们包含要在 jQuery 代码中复制的所有表格和表单 HTML，这对我来说似乎是一种不整洁的方式。最后，最好清除任何重复字段的值并能够删除重复的块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:12:25.620

如果您想要多个`<tbody>`s （这很好并且可以很好地组织 HTML），那么只需在克隆时混合[`:last`](http://api.jquery.com/last-selector/)以仅选择最后一个`tbody.multi`，然后再次在末尾附加克隆：

```
$('#addline').click(function() {
    $('#invoice > tbody.multi:last').clone().insertAfter('#invoice > tbody.multi:last');
});​ 
```

然后你可以通过一个简单的`val`调用来清除克隆的输入：

```
$('#addline').click(function() {
    var clone = $('#invoice > tbody.multi:last').clone();
    clone.find('input').val('');
    clone.insertAfter('#invoice > tbody.multi:last');
}); 
```

演示：http: [//jsfiddle.net/aeYED/1/](http://jsfiddle.net/aeYED/1/)

# java - 设备进入睡眠状态后清理主 Activity

> ID：10493373
> 
> 赞同：0
> 
> 时间：2012-05-08T06:03:23.330
> 
> 标签：java, android, eclipse

实际上，我已经开发了我的 Android 应用程序版本 10(2.33)，但我发现了一个问题，当我在移动设备上运行应用程序时它工作正常，但一段时间后移动设备进入睡眠模式并且当我启用或解锁设备然后观察当设备的方向改变时，该应用程序显示由用户填充的内容被清除并且内容恢复。先生，请在这方面帮助我，谢谢。我还绑定了 onCretae 方法的源代码。

@Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); 尝试{

```
 setContentView(R.layout.main);
    ListView lstMain = (ListView) findViewById(R.id.lstMain);
    btnSetting =(Button)findViewById(R.id.btnSetting);
    btnCheck = (Button)findViewById(R.id.btnCheckStatus);
    btnabout = (Button)findViewById(R.id.btnabout);
    imgUserAdmin = (ImageView)findViewById(R.id.imgUserAdmin);
    btnCheck.setOnClickListener(buttonhandler);
    btnSetting.setOnClickListener(buttonhandler);
    btnExit = (Button)findViewById(R.id.btnExit);
    btnLocation = (Button)findViewById(R.id.btnAddSelLocation);
    btnLocation.setOnClickListener(buttonhandler);
    btnExit.setOnClickListener(buttonhandler);        
    startService(new Intent(this,SmsService.class));
    IntentFilter filter = new IntentFilter(ConstantClass.SMS_RECEIVED);
    registerReceiver(smsSend.sms_send,smsSend.getSentIntentFilter());
    registerReceiver(smsSend.sms_delivered,smsSend.getDeliveredFilter());
    registerReceiver(receivedSms,filter);
   lstMain.setOnItemClickListener(lstMainClick);

    dba.Open();
    String str = "SELECT " + DataBaseAdapter.Key_UserID + " FROM " + ConstantClass.dbName[0] + " WHERE " +
    DataBaseAdapter.Key_MBID + " = ?";
     id = dba.CurrentWorkingCoordinator(DataBaseAdapter.Key_SendCoord, 1);
     if(!Integer.toString(id).equals(ConstantClass.isCrdDiffer))
         ConstantClass.isAuditrequestSend=true;
     if(ConstantClass.isAuditrequestSend==false)
        btnCheck.setText("Checking..");
    String c = null;
    if(id!=0){
    Cursor admin =dba.ExecuteSelect(str, id);
    if (admin!=null)
        admin.moveToFirst();
    if(admin.getCount()>0){
         c = admin.getString(admin.getColumnIndex(DataBaseAdapter.Key_UserID));
        if(c.equals("A")){
            ConstantClass.has_authority = "A";
            imgUserAdmin.setImageResource(R.drawable.admin);
        }else
        imgUserAdmin.setImageResource(R.drawable.admingreen);
    }
    if(ConstantClass.SelectCord.equals("All")){
        btnCheck.setEnabled(false);
        btnSetting.setEnabled(false);
        String dev="000000";
        curMain = dba.SelectDeviceOnId(DataBaseAdapter.Key_DevID, dev);
        /*cursor = dba.getCoord(1);
        if (cursor.getCount()>0){
            cursor.moveToFirst();
            ConstantClass.address = cursor.getString(cursor.getColumnIndex(DataBaseAdapter.Key_MbNo)).toString();
        }*/
        startManagingCursor(curMain);
        if(curMain.getCount()>0){
            curMain.moveToFirst();
            adpt = new customCursorAdapter(this,curMain);  
            lstMain.setAdapter(adpt);           
        }

    }else{
    curMain = dba.SelFromDeviceStorage(DataBaseAdapter.Key_DevCoordId,id); 
    cursor = dba.getCoord(1);
    if (cursor.getCount()>0){
        cursor.moveToFirst();
        ConstantClass.address = cursor.getString(cursor.getColumnIndex(DataBaseAdapter.Key_MbNo)).toString();
    }
    startManagingCursor(curMain);
    if(curMain.getCount()>0){
        curMain.moveToFirst();
        adpt = new customCursorAdapter(this,curMain);  
        lstMain.setAdapter(adpt);           
            }
        }
    }
    }catch(Exception ex){
        dlg = new ExceptionDialog(this,"Zigbee Activity",ex.getMessage());
        dlg.show();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:10:42.000

将此行添加到清单中的活动中。

```
android:configChanges="orientation"> 
```

另请阅读 Greg 的链接：-p

# php - PHP获取完整的图像属性

> ID：10493383
> 
> 赞同：1
> 
> 时间：2012-05-08T06:04:22.097
> 
> 标签：php

我正在获取像 facebook 这样的 url。对于该页面中的所有图像，我都会使用

```
$src = $tag->getAttribute('src'); 
```

如果外国网站将完整的网络路径放到他们的图像中，它就可以正常工作。但有时他们只使用相对路径，这会返回损坏的图像。

由于我有完整的网址，有没有办法检查 $src 是否包含`http://`or `https`？

如果不是那么我可以做

```
$src = $link . '/' . $src; 
```

对于那些相对图像。我试过了，他们显示。但如果他们已经拥有它，那么他们将不会显示为路径然后包含双 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:07:48.260

使用[`strpos`](http://de2.php.net/manual/en/function.strpos.php)：

```
if(strpos($src,'http://')===0 || strpos($src,'https://')===0){
  // full url provided
}else{
  // add domain here
} 
```

请注意，您必须使用`===`而不是仅仅`==`区分返回值`false`（未找到）和`0`（在位置 0 找到）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:10:59.237

嗨，你可以使用`parse_url`它

```
<?php
$url = parse_url('https://example.org');

if($url['scheme'] == 'https'){
  // is https;
} 
```

?>

谢谢

# objective-c - 目标 C：如何将 sqlite3 数据库存储在应用程序文件夹之外？

> ID：10493389
> 
> 赞同：1
> 
> 时间：2012-05-08T06:05:22.910
> 
> 标签：objective-c, ios, sqlite, ipa

我正在开发一个应用程序，我正在使用 SQLite 3 在本地存储我的数据。现在我将在未来更新同一个应用程序的版本，我将不得不在删除它后使用下载和安装新的 IPA 文件来更新它。

但是这里出现了问题。客户端希望在不使用 Web 服务器的情况下，在较新的版本中替换先前版本中本地存储的数据。

我浏览[了几个](http://www.iphonedevsdk.com/forum/iphone-sdk-development/6239-database-sync-between-iphone-server.html) [链接](https://stackoverflow.com/questions/2086873/how-to-store-iphone-apps-data-even-if-it-is-uninstalled)，所有结果都变成了否定响应我想知道是否有任何方法可以帮助我将数据库存储在应用程序文件夹之外，这样即使删除应用程序也不会影响数据库和较新的版本可以从同一个数据库中获取数据。还是有其他方法？感谢您提前回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:11:38.217

您应该将数据库存储在`Documents`文件夹中，因为其中的所有内容仍然存在，即使通过应用商店更新了应用程序（如果您删除应用程序，那么这也会被删除..所以请记住这一点）

`Documents`您可以在名为的文件夹中创建一个单独的文件夹`Database`，并将您的文件存储在其中。您可以创建这样的路径..

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"Database"]; 
```

**编辑：**

由于即使在删除应用程序后您仍想保留它，由于应用程序的沙盒功能，我认为您无法在设备上执行此操作，但您仍然有更多选择..

您可以在您的个人服务器上备份此数据库，并且每次安装应用程序时，它都应查询服务器是否存在该特定用户的数据库。如果它存在，您可以下载并将其存储在文档目录中，否则您给他一个新数据库。您可以每隔一段时间执行一次此备份，也可以为用户自己提供同步选项。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T06:42:40.627

iOS 数据存储指南。

iCloud 包括备份，它每天通过 Wi-Fi 自动备份用户的 iOS 设备。备份应用程序主目录中的所有内容，但应用程序包本身、缓存目录和临时目录除外。购买的音乐、应用程序、书籍、相机胶卷、设备设置、主屏幕和应用程序组织、消息和铃声也会得到备份。因为备份是无线完成的，并为每个用户存储在 iCloud 中，所以最好尽量减少为您的应用存储的数据量。大文件会延长执行备份所需的时间，并消耗更多用户可用的 iCloud 存储空间。

为确保备份尽可能高效，请务必按照以下准则存储应用程序的数据：

1.  只有用户生成的或应用程序无法重新创建的文档和其他数据，才应存储在 /Documents 目录中，并由 iCloud 自动备份。

2.  可以再次下载或重新生成的数据应存储在 /Library/Caches 目录中。您应该放在 Caches 目录中的文件示例包括数据库缓存文件和可下载内容，例如杂志、报纸和地图应用程序使用的内容。

3.  仅临时使用的数据应存储在 /tmp 目录中。虽然这些文件没有备份到 iCloud，但请记住在完成后删除这些文件，以免它们继续占用用户设备上的空间。

4.  使用“不备份”属性指定应保留在设备上的文件，即使在存储空间不足的情况下也是如此。将此属性用于可以重新创建但即使在存储空间不足的情况下也需要保留的数据，以便您的应用程序正常运行，或者因为客户希望它在离线使用期间可用。此属性适用于标记的文件，无论它们位于哪个目录，包括 Documents 目录。这些文件不会被清除，也不会包含在用户的 iCloud 或 iTunes 备份中。由于这些文件确实使用设备上的存储空间，因此您的应用程序负责定期监控和清除这些文件。学到更多

有关更多信息，请阅读 iOS 应用程序编程指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:27:43.583

如果您想在删除应用程序时保留应用程序数据，您基本上有两种选择：

*   将应用数据存储在您的服务器上
*   将应用程序数据同步到[iCloud等云服务](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/iCloud/iCloud.html)

删除应用程序后，无法（AFAIK）将应用程序数据保留在设备上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:28:05.083

您不能将任何用户数据存储在 Documents 文件夹之外，因为 Apple 反对。如果您确实将用户数据存储在其他地方 - 您将在 Apple 应用审核期间被拒绝您的应用。

# javascript - 如何获取和比较java脚本中的子字符串？

> ID：10493391
> 
> 赞同：2
> 
> 时间：2012-05-08T06:05:29.523
> 
> 标签：javascript

对你来说可能是愚蠢的Q。我正在使用 document.URL 获取 URL

现在我想检查该 URL 是否包含我的输入字符串。

有什么办法可以做到这一点，或者我必须进行手动处理。？

将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:07:05.197

有几种检查方法。`document.URL`是 a `String`，因此您可以使用例如：

```
 //use indexof
 document.URL.indexOf('this is my input string') > -1;

 //use the String.search method (equivalent to indexOf)
 document.URL.search('this is my input string') > -1

 //use a regular expression with method 'test'
 /this is my input string/i.test(document.URL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:10:22.123

您可以使用 indexOf() 方法返回指定值在字符串中第一次出现的位置。

或者，使用带有正则表达式的 search() 方法。哪个更强大。

查看 w3school 中的信息：

[http://www.w3schools.com/jsref/jsref_indexof.asp](http://www.w3schools.com/jsref/jsref_indexof.asp)

[http://www.w3schools.com/jsref/jsref_search.asp](http://www.w3schools.com/jsref/jsref_search.asp)

# iphone - 如何验证 youtube 视频以检查 URL 中是否存在视频？

> ID：10493393
> 
> 赞同：0
> 
> 时间：2012-05-08T06:05:31.600
> 
> 标签：iphone, validation, youtube, xcode4.3

我是这个 iPhone 开发的新手。目前我面临验证 YouTube 视频的问题。我正在从 SOL 服务器获取 YouTube URL。我只是想检查该视频是否存在于 YouTube 服务器中。我知道这可以通过 YouTube 视频 ID 进行检查。但我找不到任何示例代码。可以有人建议我更好的方法或提供示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:27:18.887

Youtube有[数据api](https://developers.google.com/youtube/2.0/reference)

例如，您可以执行以下操作：

1) 您有视频的完整网址，格式为[http://www.youtube.com/watch?v=uCYTpCYLqbs](http://www.youtube.com/watch?v=uCYTpCYLqbs)它的 id 是`uCYTpCYLqbs`
2) 向`http://gdata.youtube.com/feeds/api/videos/<VIDEO ID>?v=2&alt=json`. 在我们的例子中是：`http://gdata.youtube.com/feeds/api/videos/uCYTpCYLqbs?v=2&alt=json`
3）如果视频是有效的，你会收到一些有用的信息。否则你会得到一个错误。

代码可以是这样的：

```
- (BOOL)isValid:(NSURL *)youtubeVideoURL
{
  NSString *urlStr = [youtubeVideoURL absoluteString];
  // retrieve id param from url (ex http://www.youtube.com/watch?v=uCYTpCYLqbs)
  NSString *ID = [urlStr substringFromIndex:[urlStr rangeOfString:@"="].location + 1];

  NSString *apiMethodStr = [NSString stringWithFormat:@"http://gdata.youtube.com/feeds/api/videos/%@?v=2&alt=json", ID];
  NSString *fetchedProperies = [NSString stringWithContentsOfURL:[NSURL URLWithString:apiMethodStr] encoding:NSUTF8StringEncoding error:nil];

  return fetchedProperies != nil;
} 
```

您可以使用*错误*参数`stringWithContentsOfURL:encoding:error:`来更准确地处理错误。或者使用 NSURLRequest。无论如何，主要思想是相同的。

# android - 如何在运行时在 android 中更改 EditText 中的文本

> ID：10493395
> 
> 赞同：0
> 
> 时间：2012-05-08T06:05:35.967
> 
> 标签：android, android-edittext

我想在运行时更改编辑文本的文本，比如我在edittext中输入字符，如果edittext lenth大于3，那么它应该保持括号。

如果有人这样做，请告诉我。

提前致谢

特拉普蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:30:59.003

您可以为在 EditText 字段中输入或删除字符时调用的 EditText注册一个[TextWatcher ：](http://developer.android.com/reference/android/text/TextWatcher.html)

```
EditText editText = (EditText) findViewById(R.id.edit_text_field_id);
editText.addTextChangedListener(new TextWatcher() {

        @Override 
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
          // This method is called to notify you that, within s, the count characters 
          // beginning at start are about to be replaced by new text with length after.  
        }

        @Override 
        public void onTextChanged(CharSequence s, int start, int before, int count) {
          // This method is called to notify you that, within s, the count characters 
          // beginning at start have just replaced old text that had length before.
        }

        @Override 
        public void afterTextChanged(Editable s) {
          // This method is called to notify you that, somewhere within s, the text has 
          // been changed.
        }
      }); 
```

有关详细信息，请参阅[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)的文档。

# c# - 如何动态改变中继控件的绑定字段？

> ID：10493396
> 
> 赞同：1
> 
> 时间：2012-05-08T06:05:37.450
> 
> 标签：c#, asp.net, repeater, dynamic-data

我正在开发一个具有完成状态的网页。

第 1 阶段：DraftName
第 2 阶段：FinalName

我想根据 Stage Completion 绑定 Repeater 控件，如果*Stage 1*完成，则 bind `<%# Eval("DraftName")%>`if *Stage 2* : then bind `<%# Eval("FinalWard")%>`。

那么，如何有条件地动态绑定Repeater Control呢？

我有许多条件相同的数据库，所以我不想在每个数据库的每个完成状态之后都进行硬编码。如果两个值都存在仍然想设置我需要的任何一个！我怎样才能做到这一点？

```
<asp:Repeater ID="ResultsRepeater" runat="server">
     <HeaderTemplate>
     <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td>
              &nbsp;
          </td>
       </tr>
     </HeaderTemplate>
     <ItemTemplate>
      <tr>
           <td>
              <table width="100%">
                  <tr>
                     <td align="left" class="searchResFieldName" width="40%">
       <asp:Image ID="Image1" Visible='<%# DeletedImageVisibility(Eval("IsActive"))%>' runat="server"
                                                                ImageUrl="~/images/deleted.png" Style="z-index: 1; position: absolute; margin-left: -5px;" /><br />
       <%# Eval("UnicodeFullName")%>
   </td>
   <td width="10%">
     Constno
   </td>
   <td width="10%">
     Partno
   </td>
   <td width="10%">
     Serialno
   </td>
   </td>
   <td width="8%">
     Age
   </td>
     <td width="5%">
    Gender
     </td>
   <td width="20%">
       Cardno
   </td>
   </tr>
   <tr>
     <td align="left" class="searchResFieldName" width="35%">
        <%# Eval("EnglishFullName")%>
     </td>
     <tr>
     <td align="left">
         <%# Eval("HouseNumber")%><br />
         <%# Eval("UnicodeAddress")%>
     </td>
     <td>
       <b>
        <%# Eval("Constno")%>
       </b>
     </td>
     <td>
     <b>
          <%# Eval("FinalWard")%>
          <%# Eval("PartNumber")%>
          <%#Eval("SerialNumberFinal")%></b>
     </td>
     <td>
          <b>
            <%# Eval("SerialInPart")%>
         </b>
     </td>
           <td>
              <b>
                 <%# Eval("Age")%>
             </b>
             </td>
             <td>
              <b>
               <%# Eval("Sex")%>
              </b>
             </td>
             <td>
               <b>
                <%# Eval("CardNo")%>
               </b>
             </td>
             </tr>
             <tr>
             <td>
                 <%# Eval("Address")%>
             </td>
             <tr>
             <td>
             </td>
            <td class="searchResPrabhag" colspan="10" align="right">&nbsp;
           </td>
           </tr>
              </table>
                 </td>
                       </tr>
                       <tr>
                 <td>
                 <hr />
                 </td>
                 </tr>
         </ItemTemplate>
               <FooterTemplate>
                     <tr>
                       <td>&nbsp;</td>
                     </tr>
                </table>
              </FooterTemplate>
       </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:54:19.807

您可以编写一个以 Container.DataItem 作为参数的内联函数。在里面你可以编写你的逻辑来返回所需的字符串......在标记中创建更少的混乱

# jdbc - ResultSet getDouble 给出不正确的值

> ID：10493397
> 
> 赞同：0
> 
> 时间：2012-05-08T06:05:39.087
> 
> 标签：jdbc

1) 我有一个 Sybase 数据库，其中包含一个表“TABLE1”。其中一个字段为“X”（在商业术语中代表金钱），该表中的类型为“float”。不幸的是，我无法更改此列的类型，因为如果我这样做会影响许多应用程序。

2) 我在 JDBC 中使用 jconn2.jar。我使用 getDouble() 检索“X”（我在某处读到浮点、双 SQL 类型最好映射为双“java 数据类型”）。

3) 数据库中“X”中存储的值为“212400000”。当我执行 getDouble(int col) 时，我得到 '212399999.99999997' （以科学形式）。我正在失去精确度。我知道有些数字不能以基数 2 精确表示，因此我们在使用 double 时会看到一些不正确的输出。

4）我试过 getBigDecimal 但徒劳无功。我被困住了。有人可以指导我完成同样的事情吗？

编辑：- 我需要问的一个问题是，有没有一种方法可以使用 getDouble() 根据我需要的精度来检索一个值，比如 12,17 等？与 getDouble() 关联的默认精度是多少？

# jira - 在 JIRA 小工具上显示未解决问题的数量

> ID：10493402
> 
> 赞同：4
> 
> 时间：2012-05-08T06:06:17.947
> 
> 标签：jira

我需要帮助查询我的 JIRA 实例的 hsqldb 以查找每个项目中未解决问题的数量并在我的小工具上显示此数据。我需要使用什么？可以直接使用 jql 完成吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:33:56.580

我认为您不能开箱即用地做到这一点，但您可以使用[JQL Tricks Plugin](https://marketplace.atlassian.com/31399)来做到这一点。如果您想设计自己的东西，您可以[使用远程 API 查询 Jira](https://developer.atlassian.com/display/JIRADEV/JIRA+Remote+API+Reference)并将结果保存为 HTML 页面。您可以使用[Jira 自定义内容插件](https://marketplace.atlassian.com/plugins/com.tngtech.jira.plugins.customcontent.jira-gadget-custom-content) 在仪表板中显示页面。最后安排查询每分钟左右运行一次。

希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T13:22:44.423

1.  创建过滤器，列出您要计算的问题（例如，打开、重新打开的错误等） 在问题/搜索问题中创建过滤器
2.  创建仪表板 仪表板/管理仪表板 ...
3.  将问题统计小工具添加到仪表板
4.  配置问题统计小工具以使用您在步骤 1 中创建的过滤器。
5.  配置小工具的其他参数
    *   排序顺序
    *   统计类型（我使用了组件，影响统计信息的分组方式）

通过这种方式，我创建了显示项目中每个组件的打开错误数量的仪表板。

我们正在使用 Jira 6.0.5 版

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-18T20:37:01.467

最新版本的 JIRA Cloud 现在有一个可用的*过滤器计数*小工具，它似乎可以满足您的需要： [![添加 JIRA 过滤器计数小工具](../Images/f5ca1b2eb1c7b022eb873ffdc1edbdbe.png)](https://i.stack.imgur.com/3hiDA.png)

这是它在野外的样子：

[![JIRA 过滤器对小工具进行计数](../Images/5b5483c45b2fbc34584411dfce6933e4.png)](https://i.stack.imgur.com/9EjfO.png)

就像大多数功能一样，它最终应该会进入 JIRA 服务器。

# c - 什么是位掩码？

> ID：10493411
> 
> 赞同：253
> 
> 时间：2012-05-08T06:07:28.693
> 
> 标签：c, bit-manipulation, bitwise-operators, terminology, bitmask

我对 C 编程相当陌生，我遇到了位掩码。有人可以向我解释位掩码的一般概念和功能吗？非常感谢示例。

* * *

## 回答 #1

> 赞同：314
> 
> 时间：2012-05-08T06:24:27.597

掩码定义要保留哪些位，以及要清除哪些位。

掩码是将掩码应用于值的行为。这是通过执行以下操作来完成的：

*   按位与运算以提取值中的位子集
*   按位或运算以设置值中的位子集
*   按位异或，以切换值中的位子集

下面是一个提取值中位子集的示例：

```
Mask:   00001111b
Value:  01010101b 
```

将掩码应用于值意味着我们要清除前（高）4 位，并保留最后（低）4 位。因此，我们提取了低 4 位。结果是：

```
Mask:   00001111b
Value:  01010101b
Result: 00000101b 
```

屏蔽是使用 AND 实现的，所以在 C 中我们得到：

```
uint8_t stuff(...) {
  uint8_t mask = 0x0f;   // 00001111b
  uint8_t value = 0x55;  // 01010101b
  return mask & value;
} 
```

这是一个相当常见的用例：从较大的单词中提取单个字节。我们将字中的高位定义为第一个字节。我们为此使用两个运算符`&`， 和`>>`(右移)。这就是我们如何从 32 位整数中提取四个字节的方法：

```
void more_stuff(uint32_t value) {             // Example value: 0x01020304
    uint32_t byte1 = (value >> 24);           // 0x01020304 >> 24 is 0x01 so
                                              // no masking is necessary
    uint32_t byte2 = (value >> 16) & 0xff;    // 0x01020304 >> 16 is 0x0102 so
                                              // we must mask to get 0x02
    uint32_t byte3 = (value >> 8)  & 0xff;    // 0x01020304 >> 8 is 0x010203 so
                                              // we must mask to get 0x03
    uint32_t byte4 = value & 0xff;            // here we only mask, no shifting
                                              // is necessary
    ...
} 
```

请注意，您可以切换上述运算符的顺序，您可以先执行掩码，然后执行移位。结果是一样的，但现在你必须使用不同的掩码：

```
uint32_t byte3 = (value & 0xff00) >> 8; 
```

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2018-12-11T11:02:13.463

**掩蔽**意味着保留/更改/删除所需的信息部分。让我们看一个图像屏蔽操作；就像-这个遮罩操作正在去除任何不是皮肤的东西-

[![在此处输入图像描述](../Images/9220f1fd05629d79310673fa9cd85c99.png)](https://i.stack.imgur.com/8qTr3.jpg)

在这个例子中，我们正在做*AND操作。*还有其他掩码运算符- *OR*，*XOR*。

* * *

**位掩码**意味着对位施加掩码。*这是一个带有AND*的位掩码-

> ```
>  1 1 1 0 1 1 0 1   [input]
> (&)  0 0 1 1 1 1 0 0    [mask]
> ------------------------------
>      0 0 1 0 1 1 0 0  [output] 
> ```

因此，只剩下中间的 4 位（因为这些位`1`在此掩码中）。

让我们用*XOR*来看看-

> ```
>  1 1 1 0 1 1 0 1   [input]
> (^)  0 0 1 1 1 1 0 0    [mask]
> ------------------------------
>      1 1 0 1 0 0 0 1  [output] 
> ```

现在，中间的 4 位被翻转（`1`成为`0`，`0`成为`1`）。

* * *

因此，使用位掩码我们可以访问各个位 [[示例](https://stackoverflow.com/questions/47981/how-do-you-set-clear-and-toggle-a-single-bit)]。有时，这种技术也可用于提高性能。以此为例——

```
bool isOdd(int i) {
    return i%2;
} 
```

这个函数告诉一个整数是奇数还是偶数。我们可以使用位掩码更高效地实现相同的结果-

```
bool isOdd(int i) {
    return i&1;
} 
```

**简短说明**：如果二进制数的[最低有效位](https://www.computerhope.com/jargon/l/leastsb.htm)`1`是奇数；因为`0`它会是平的。因此，通过与我们进行*AND*操作，`1`我们将删除除最低有效位之外的所有其他位，即：

> ```
>  55  ->  0 0 1 1 0 1 1 1   [input]
> (&)   1  ->  0 0 0 0 0 0 0 1    [mask]
> ---------------------------------------
>       1  <-  0 0 0 0 0 0 0 1  [output] 
> ```

# c# - 这两个属性实现之间的区别？

> ID：10493412
> 
> 赞同：0
> 
> 时间：2012-05-08T06:07:39.380
> 
> 标签：c#, static

我正在尝试在另一个类中调用静态变量的 getter。有人可以告诉我为什么会这样：

```
protected static SymTab _symTab;

public SymTab symTab
{
    get{return _symTab;}
    set{_symTab = value;}
} 
```

这不会：

```
public static SymTab symTab {get; protected set;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:14:26.847

第一个版本有一个*实例*属性，它获取/设置一个*静态*变量。

第二个版本有一个*静态*属性，它获取/设置一个*静态*变量。（二传手也受到保护，但这似乎不是您的直接问题。）

我强烈反对第一种形式——实例属性应该反映该实例的某些内容；您不会期望在一个实例上设置一个属性来更改另一个实例的属性值。

使用第二种形式，您可以使用：

```
SymTab currentTab = TypeName.symTab; 
```

代替：

```
SymTab currentTab = someVariable.symTab; 
```

另外，我要注意：

*   属性名称`symTab`违反 .NET 命名约定
*   类型名称`SymTab`不如`SymbolTable`该缩写的缩写那样清晰
*   可变静态变量几乎*总是*一个坏主意。

编辑：请注意，现在我们知道它来自 Java，这解释了您所看到的问题。在 Java 中，“通过”变量或其他表达式引用静态成员是合法的（但不是一个好主意）。不过，这会导致代码非常混乱。例如：

```
Thread backgroundThread = new Thread(someRunnable);
backgroundThread.start();
backgroundThread.sleep(1000); 
```

这*看起来*像是在告诉新线程休眠，但*实际上*`Thread.sleep`它是对导致*当前*线程休眠的静态方法的调用。一些 Java IDE 会选择性地将其标记为警告或错误。

幸运的是，C# 一开始就不允许这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:16:13.850

有两个区别：

*   在第一种情况下，`symTab`属性（考虑将其命名为 SymTab，以遵循约定）作为实例属性。第二，它是静态的。所以`MyClass.symTab`将在第二种情况下工作，而不是在第一种情况下，`myInstance.symTab`反之亦然。

*   在第一种情况下，属性的 getter 和 setter 都是公共的，而在第二种情况下，只有 getter 是公开的，并且 setter 是受保护的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:10:49.627

使用第一个解决方案，您有一个公共设置，后面有一个受保护的静态变量，而使用第二个解决方案，您已经获得了一个受保护的 setter。

# wpf - 如何在 Microsoft.Win32.OpenFileDialog() 中多次过滤

> ID：10493417
> 
> 赞同：1
> 
> 时间：2012-05-08T06:08:06.480
> 
> 标签：wpf, winforms

```
 Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();
dlg.FileName = "Document"; // Default file name
dlg.DefaultExt = ".txt"; // Default file extension
dlg.Filter = "Text documents (.txt)|*.txt"; // Filter files by extension here 
```

我想过滤不止一种类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:11:21.657

从[http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filter.aspx)：

> 对于每个过滤选项，过滤器字符串包含过滤器的描述，后跟竖线 (|) 和过滤器模式。不同过滤选项的字符串由竖线分隔。
> 
> 以下是过滤字符串的示例：
> 
> `Text files (*.txt)|*.txt|All files (*.*)|*.*`

# java - “concat”这个词实际上或最初是什么意思？

> ID：10493428
> 
> 赞同：1
> 
> 时间：2012-05-08T06:09:22.967
> 
> 标签：java, concat

最近，我正在阅读用 Java 编写的某处源代码的副本。

有一个方法的声明喜欢：

```
public static <T> List<T> concat(List<T>... lists){
    ...
} 
```

我想知道是否适合将其命名为“concat”？原来，“concat”这个词是什么意思？它的意思是“连接字符”还是其他？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T06:11:47.373

“连接”是“连接”的缩写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T06:22:52.757

如前所述，*concat*代表*concatenate*。作为一名前拉丁人，我在这里认识到两个部分：

*   *con* (cum)，意思是“与”、“在一起”
*   *catena*，意思是“链”

*因此，连接*的字面意思是“将两条链放在一起”。有趣的是，*String（of characters）*的法语单词（法语主要来自拉丁语）是*Chaine（de caractères） ，与法语中的**Chain*是同一个词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T06:13:11.313

这意味着您将多个值连接到一个新值。参见 String.concat 将两个字符串合二为一。

缩写为`concat`，[Reference.com](http://dictionary.reference.com/browse/concatenate)定义`concatenate`为

> 连接在一起；联合成一个系列或链条。

所以基本上所有连接多个值的东西都可以命名为值。所以这个函数，如果它加入多个Lists，可能会被命名为concat。合并为名称是可能的，但这意味着所有列表中的这些值在它们连接时以某种方式排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:12:04.963

签名似乎定义了一种接受一个或多个`List`对象并只返回一个的方法`List`。我看到它的方式`concat`意味着`concatenate`，这意味着它将一个列表附加到另一个列表，从而产生一个更大的列表，其中包含作为方法参数传递的所有列表的元素。

# javascript - javascript中childNode的ChilNode树

> ID：10493429
> 
> 赞同：0
> 
> 时间：2012-05-08T06:09:29.443
> 
> 标签：javascript, dom, javascript-events

我有这个简单的 html：

```
<div id="tree">
    <div class="roi">
        <ul>
            <li>text1</li>
            <li>text2</li>
            <li>text3
                <ul>
                    <li>insideText1<li>
                    <li>insideText2<li>
                </ul>
            </li>
        </ul>
    </div>
</div> 
```

我只想得到项目“text2”和项目“insideText2”；所以我试着写：

```
var Tree=document.getElementById("tree").document.getElementsByTagName("UL"); 
```

但我不知道如何找到`li`包含：“text2”和“insideText2”的具体内容。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:13:51.903

假设 JQuery

```
//text2
alert($('div#tree ul > li:eq(1)').text())

//insideText2
alert($('div#tree ul > li > ul li:eq(1)').text())​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:38:12.033

只有一个文档对象，所以你几乎就在那里`var Tree=document.getElementById("tree").document.getElementsByTagName("UL");`，只需放下第二个`document`：

```
var Tree=document.getElementById("tree").getElementsByTagName('ul'); 
```

在此页面上的 chrome 控制台中尝试过

```
document.getElementById('question').getElementsByTagName('td'); 
```

像魅力一样工作

**更新**

这很容易......该`getElementsByTagName()`方法返回一个 nodeList （不仅仅是任何旧数组）。上面的代码提供了`ul`元素中具有“ul”标签的所有元素的列表。您可以遍历`ul`列表中的所有标签，并检查`li`包含无序列表或某个 innerText/innerHTML 的子项。我会在一分钟内为你举一个简单的例子。

检查[这个 jsfiddle](http://jsfiddle.net/Bsg83/1/)以获得一个工作示例。随心所欲地玩它，让我知道是否还有一些你不完全清楚的东西......干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T21:11:32.397

如果您想访问“text2” li，请使用：

```
document.getElementsByTagName('li')[1] 
```

并且项目“insideText2”将是

```
document.getElementsByTagName('li')[2].getElementsByTagName('li')[1] 
```

# excel - 如何编写 VBS 脚本来修复损坏的 Excel 文件？

> ID：10493431
> 
> 赞同：0
> 
> 时间：2012-05-08T06:09:47.460
> 
> 标签：excel, vbscript, automation, corrupt

我们如何编写 VBS 脚本来修复 Excel 中的无效工作表名称？

当我们在 Excel 中打开文件时，会出现三个对话框，向我们显示错误 - 第三个是“修复 'Bad.xls'”。

我的问题是，我们如何编写 VBS 脚本来自动执行此操作，以便我们可以处理大量文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:58:27.907

当你找不到 vba 语法做某事时，你开始录制宏，做你想要自动化的事情，停止宏并检查 VBA 代码，你应该能够从那里提取你想要的东西。成功 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:31:54.027

最重要的是如何使用方法打开损坏的数据来恢复损坏的 XLS，进行一些规范化，然后写入固定的 XLS。

如果找到并证明了上面最重要的功能，那么使用它来处理许多文件就像自动循环或基于特定文件列表一样简单。

# android - Android JNI 函数在主线程上运行？

> ID：10493434
> 
> 赞同：12
> 
> 时间：2012-05-08T06:09:59.833
> 
> 标签：android, android-ndk, java-native-interface

我对从 Android 进行的 JNI 函数调用有疑问。它们是否与 Android 应用程序在同一线程上运行？如果本机功能需要更多时间运行，UI 会冻结吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-08T06:11:59.537

JNI 调用是同步的，就像任何其他 Java 调用一样，您可以切换或生成线程，但如果您没有指定它，它们将在同一个线程上执行。所以如果你从 UI 线程调用一个 JNI 函数，它将被阻塞，直到函数返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:20:31.603

JNI 函数与调用 JNI 函数的人在同一线程中运行。

看起来是这样的，如果你在一个服务中创建一个新的 Thread(Thread A)，并在 Thread A 中调用了一个 JNI 函数，那么 JNI 就运行在 Thread A 中。

# openssl - Tomcat6 中的证书吊销列表

> ID：10493436
> 
> 赞同：0
> 
> 时间：2012-05-08T06:10:07.383
> 
> 标签：openssl, tomcat6, authentication

我已经对我的 Tomcat 服务器实施了客户端身份验证。我已经分发了使用我自己的 CA crt 和 openSSL 生成的客户端 X509 证书和 JKS。现在我想使用 CRL 来阻止我的一些客户。如何将 CRL 添加到 tomcat？...我在这方面没有从 Google 那里找到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:29:42.093

我在回答我自己的问题..在 tomcat 连接器标签中，您有 crlFile 参数，可以使用 openssl 生成。命令看起来像这样

```
openssl ca -config openssl.my.cnf -revoke certs/server.crt
openssl ca -config openssl.my.cnf -gencrl -out crl/myca.crl 
```

并且文件 myca.crl 将在 tomcat 的连接器标记中更新，看起来像这样

```
<Connector protocol="org.apache.coyote.http11.Http11Protocol"
    port="8443"
    SSLEnabled="true"
    maxThreads="150"
    scheme="https"
    secure="true"
    clientAuth="true"
    sslProtocol="TLS"
    keystoreFile="one.mamoi.semdev.com.pkcs12"
    keystoreType="PKCS12"
    keystorePass="changeit"
    truststoreFile="server.truststore"
    truststorePass="changeit"
    truststoreType="JKS"
    crlFile="/home/ubuntu/myCA/crl/myca.crl"/> 
```

# php - 更改php中的数组顺序？

> ID：10493438
> 
> 赞同：0
> 
> 时间：2012-05-08T06:10:23.063
> 
> 标签：php, arrays

我想知道如何更改以下数组的顺序：

```
Array
(
    [1] => Array
        (
            [0] => stdClass Object
                (
                    [id] => 120
                    [hteam] => Heatherton
                    [ateam] => Dingley
                    [round] => 1
                    [catid] => Seniors
                    [date] => Saturday 14th April, 2012
                    [time] => 12:00am
                    [venue] => Heatherton Recreational Reserve
                )

            [1] => stdClass Object
                (
                    [id] => 121
                    [hteam] => Heatherton
                    [ateam] => Dingley
                    [round] => 1
                    [catid] => Reserves
                    [date] => Saturday 14th April, 2012
                    [time] => 11:45am
                    [venue] => Heatherton Recreational Reserve
                )

        )

    [2] => Array
        (
            [0] => stdClass Object
                (
                    [id] => 122
                    [hteam] => Clayton
                    [ateam] => Heatherton
                    [round] => 2
                    [catid] => Seniors
                    [date] => Saturday 21st April, 2012
                    [time] => 12:00am
                    [venue] => Clayton Reserve
                )

            [1] => stdClass Object
                (
                    [id] => 139
                    [hteam] => Clayton
                    [ateam] => Heatherton
                    [round] => 2
                    [catid] => Reserves
                    [date] => Saturday 21st April, 2012
                    [time] => 12:00am
                    [venue] => Clayton Reserve
                )
        )

    [3] => Array
        (
            [0] => stdClass Object
                (
                    [id] => 123
                    [hteam] => Heatherton
                    [ateam] => St Pauls
                    [round] => 3
                    [catid] => Seniors
                    [date] => Saturday 28th April, 2012
                    [time] => 12:00am
                    [venue] => Heatherton Recreational Reserve
                )

            [1] => stdClass Object
                (
                    [id] => 140
                    [hteam] => Heatherton
                    [ateam] => St Pauls
                    [round] => 3
                    [catid] => Reserves
                    [date] => Saturday 28th April, 2012
                    [time] => 12:00am
                    [venue] => Heatherton Recreational Reserve
                )

        )

    [4] => Array
        (
            [0] => stdClass Object
                (
                    [id] => 124
                    [hteam] => Mordialloc
                    [ateam] => Heatherton
                    [round] => 4
                    [catid] => Seniors
                    [date] => Saturday 5th May, 2012
                    [time] => 02:00pm
                    [venue] => Ben Kavanagh Reserve
                )

            [1] => stdClass Object
                (
                    [id] => 141
                    [hteam] => Mordialloc
                    [ateam] => Heatherton
                    [round] => 4
                    [catid] => Reserves
                    [date] => Saturday 5th May, 2012
                    [time] => 11:45am
                    [venue] => Ben Kavanagh Reserve
                )

        )
) 
```

从^^到这个：

```
Array
(

    [3] => Array
        (
            [0] => stdClass Object
                (
                    [id] => 123
                    [hteam] => Heatherton
                    [ateam] => St Pauls
                    [round] => 3
                    [catid] => Seniors
                    [date] => Saturday 28th April, 2012
                    [time] => 12:00am
                    [venue] => Heatherton Recreational Reserve
                )

            [1] => stdClass Object
                (
                    [id] => 140
                    [hteam] => Heatherton
                    [ateam] => St Pauls
                    [round] => 3
                    [catid] => Reserves
                    [date] => Saturday 28th April, 2012
                    [time] => 12:00am
                    [venue] => Heatherton Recreational Reserve
                )

        )

    [4] => Array
        (
            [0] => stdClass Object
                (
                    [id] => 124
                    [hteam] => Mordialloc
                    [ateam] => Heatherton
                    [round] => 4
                    [catid] => Seniors
                    [date] => Saturday 5th May, 2012
                    [time] => 02:00pm
                    [venue] => Ben Kavanagh Reserve
                )

            [1] => stdClass Object
                (
                    [id] => 141
                    [hteam] => Mordialloc
                    [ateam] => Heatherton
                    [round] => 4
                    [catid] => Reserves
                    [date] => Saturday 5th May, 2012
                    [time] => 11:45am
                    [venue] => Ben Kavanagh Reserve
                )

        )

        [1] => Array
        (
            [0] => stdClass Object
                (
                    [id] => 120
                    [hteam] => Heatherton
                    [ateam] => Dingley
                    [round] => 1
                    [catid] => Seniors
                    [date] => Saturday 14th April, 2012
                    [time] => 12:00am
                    [venue] => Heatherton Recreational Reserve
                )

            [1] => stdClass Object
                (
                    [id] => 121
                    [hteam] => Heatherton
                    [ateam] => Dingley
                    [round] => 1
                    [catid] => Reserves
                    [date] => Saturday 14th April, 2012
                    [time] => 11:45am
                    [venue] => Heatherton Recreational Reserve
                )

        )

    [2] => Array
        (
            [0] => stdClass Object
                (
                    [id] => 122
                    [hteam] => Clayton
                    [ateam] => Heatherton
                    [round] => 2
                    [catid] => Seniors
                    [date] => Saturday 21st April, 2012
                    [time] => 12:00am
                    [venue] => Clayton Reserve
                )

            [1] => stdClass Object
                (
                    [id] => 139
                    [hteam] => Clayton
                    [ateam] => Heatherton
                    [round] => 2
                    [catid] => Reserves
                    [date] => Saturday 21st April, 2012
                    [time] => 12:00am
                    [venue] => Clayton Reserve
                )
        )
) 
```

所以在这个例子中，数组从 3 号开始，到 4 号，然后又回到 1 号。如果这有意义吗？任何帮助将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:22:00.980

您可以使用 允许定义自己的排序函数的[usort php 函数。](http://www.php.net/manual/en/function.usort.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:41:20.440

您可以使用 array_keys() 函数提取所有键，然后从旧键映射到新键，然后最后使用新键构造一个新数组，使用新键从旧数组中获取值-old关键地图。

# html - 如何在html页面中使div自动填充空白

> ID：10493439
> 
> 赞同：1
> 
> 时间：2012-05-08T06:10:25.543
> 
> 标签：html, css

我写了一个 html 页面，我想要一个页眉、内容、页脚。所有这三个部分都包含在 div 中，如下所示

但我观察到标题 div 没有占用提供的全部空间（即，高度：CSS 中的 50%）

并且内容 div（包含表格）不占用页眉和页脚 div 之间的可用空间，尽管在 CSS 中指定了 100% 的高度

编写的html如下。我错过了什么。

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>Html with divs</title>
<style type="text/css">

h1,h2,h3,h4,h5,h6{
    font-size:100%;
    font-weight:normal;
}
q:before,q:after{
    content:'';
}
abbr,acronym{
    border:0;
}

html{
    height:100%;

}
body{
    font-family:Arial,Verdana,sans-serif;
    font-size:0.75em;
    color:#333;
    width:100%;
    margin:0 auto;
    padding:0px;
}

#header1
{
    background-color: steelblue;
    height: 50%;
}

h1{
    font-family:Calibri, Arial, Verdana, sans-serif;
    font-size:2em;
    width:520px;
}

#content
{
    background-color: orange;
    padding: 5px;
height:100%;

}

#content table
{
width:100%;
}

#footer {
        position:absolute;
        bottom: 0px;
    width: 100%;
        height:70px;
        }
#footer div#navigation {
    background: steelblue;
        height: 70px;
    width: 100%;
}

#footer div#navigation div {
    margin: 0 auto;
    width: 100%;
}

#footer div#navigation div p {
    color: #995870;

        color:white;
        width:100%;
        align:center;
        font-size: 11px;
    margin: 0;
    text-align: center;

}

</style>
</head>
<body>

    <div id="header1">
        <p align="center">Header1</p>
        <p align="center">Header2</p>
        <p align="center">Header3</p>

    </div>

    <div id="content">

                <table bgcolor="#fadd09" align="center" style="color:white">
                    <tr><td>Text1 here</td><td>  <input type="text" name="value1"/></td></tr>
                    <tr><td>Text2 here</td><td>  <input type="text" name="value2"/></td></tr>
                    <tr><td>Text3 here</td><td>  <input type="text" name="value3"/></td></tr>
                    <tr><td>Text4 here</td><td>  <input type="text" name="value4"/></td></tr>
                    <tr><td>Text5 here</td><td>  <input type="text" name="value5"/></td></tr>
                    <tr><td>Text6 here</td><td>  <input type="text" name="value6"/></td></tr>
                    <tr><td>Text7 here</td><td>  <input type="text" name="value7"/></td></tr>
                    <tr><td>Text8 here</td><td>  <input type="text" name="value8"/></td></tr>
                    <tr><td>Text9 here</td><td>  <input type="text" name="value9"/></td></tr>
                    <tr><td>Text10 here</td><td>  <input type="text" name="value10"/></td></tr>

                </table>

    </div>

            <!--Footer-->
        <div id="footer">
            <div id="navigation">
                <p style="color: ivory;font-size: 15px;">footer-head</p>
                <div style="float: inherit">
                    <p>The footer</p>
                    </div>
            </div>
        </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:04:50.790

在 html 和 body 上将高度设置为 100% 将允许您在 div 上指定百分比高度，但您的页面仍然存在许多问题。我根据您的代码创建了一个更简单的示例。

解释：

*   我在页面顶部添加了一个 doctype，以便您在浏览器之间获得更一致的结果。我添加了过渡文档类型。

*   每个区域都被一个“容器”div 包围，这是指定高度的地方。headercontainer 设置为 50%，contentcontainer 设置为 40%，页脚设置为 10%。在您的代码中，页脚绝对位于页面底部。这似乎工作正常，但它实际上是在内容 div 的底部切割/重叠。

*   容器 div 都有 overflow: auto; 设置，这样如果页面被调整大小，如果内容太长，每个部分都会出现滚动条（测试一下）。

*   内部 div、'header'、'content' 和 'footer' 应该包含任何页面内容，这样在 p、h1 或其他任何元素上出现的边距/填充不会导致页面变大超过 100% - 在您的页面中，您在 header1 div 中直接有一个“p”元素，这导致页面顶部出现一个白条（由于默认情况下 p 元素顶部的 10px 边距）。

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>Html with divs</title>
    <style type="text/css">
        * 
        {
            margin: 0px;
            padding: 0px;
        }

        html
        {
            height: 100%;
        }

        body
        {
            font-family: Arial,Verdana,sans-serif;
            font-size: 1.3em;
            color: #333;
            width: 100%;
            margin: 0 auto;
            padding: 0px;
            height: 100%;
        }

        #headercontainer
        {
            background-color: steelblue;
            overflow: auto;
            height: 50%;
        }

        #header
        {
            padding: 10px;
        }

        #contentcontainer
        {
            background-color: orange;
            overflow: auto;
            height: 40%;
        }

        #content
        {
            padding: 10px;
        }

        #footercontainer
        {
            width: 100%;
            height: 10%;
            background: steelblue;
            overflow: auto;
        }

        #footer
        {
            padding: 10px;
        }
    </style>
</head>
<body>
    <div id="headercontainer">
        <div id="header">
            <h1>
                Header</h1>
        </div>
    </div>
    <div id="contentcontainer">
        <div id="header">
            Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh
            euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad
            minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip
            ex ea commodo consequat.<br />
            Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat,
            vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio
            dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait
            nulla facilisi.
            <br />
            Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming
            id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est
            usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt
            lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus,
            qui sequitur mutationem consuetudium lectorum.<br />
            Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit
            litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem
            modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.
        </div>
    </div>
    <div id="footercontainer">
        <div id="footer">
            <h1>
                Footer</h1>
        </div>
    </div>
</body>
</html> 
```

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:33:15.280

尝试这样做，更改：

```
#content{
background-color: orange;
padding: 5px;
height:50%;
} 
```

通过总共使用超过 100%，您使页面变得超大。让我知道这是否是您的想法。另外，如果您将 % 用于其余 div，我也建议将页脚更改为基于百分比的高度。

你想要总高度= 100%

所以header+content+footer的高度=100%，比如40%+50%+10%=100%

# php - 如何从 PHP 中获取远程 JSON 或 XML API 数据并将返回对象分配为 PHP 变量？

> ID：10493444
> 
> 赞同：5
> 
> 时间：2012-05-08T06:10:36.977
> 
> 标签：php, xml, json, api, get

**我在做什么：**

我正在用 PHP 编写一个自定义程序，它通过 API 从在线 LMS 服务中提取数据。现在，我正在尝试实现可用的单点登录功能。

这部分程序需要在单击按钮时（通过 js 或 php POST 或？）执行对 API 的 GET 请求，并最终将用户浏览器重定向到 API 响应中提供的 URL。

API 允许选择 XML 或 JSON 响应，我更喜欢使用 JSON，但如果需要，将使用 XML。

**从关于发出请求的 API 文档中：**

> 本文档中列出的所有请求都应在请求标头中包含内容类型（XML 或 JSON），并以以下基本 Uri 为前缀：[https ://api.example.com/v1.svc](https://api.example.com/v1.svc)
> 
> 例如，以 XML 格式获取用户列表的 Uri 将是：
> 
> 内容类型：文本/xml
> 
> 获取[https://api.example.com/v1.svc/users?apikey=MY-KEY&source=MY-APP](https://api.example.com/v1.svc/users?apikey=MY-KEY&source=MY-APP)

**以下是我要实现的：**

> 如何获取用户的登录密钥
> 
> 一旦您拥有要登录的用户 ID，您需要向 /users/{user-id} 发出 GET 请求，该请求将返回有关用户的信息。其中包括一个 LoginKey，您可以使用它来将用户的浏览器重定向到。
> 
> 例如。
> 
> 获取 [https://api.example.com/v1.svc/users/USER-ID?apikey=YOUR_API_KEY&source=sampleapp](https://api.example.com/v1.svc/users/USER-ID?apikey=YOUR_API_KEY&source=sampleapp)
> 
> 来自 API 的响应：
> 
> ```
> <User>
>   <Id>abc12345678</Id>
>   <UserName>rich_demo@example.com</UserName>
>   <FirstName>Rich</FirstName>
>   <LastName>Chetwynd</LastName>
>   .....
>   <LoginKey>https://demo.example.com/login.aspx?loginkey=xxxzzzyyy777222</LoginKey>
> </User> 
> ```

`<LoginKey>`对象数据是我需要最终将用户浏览器重定向到的 URL 。

我是使用 API 的新手，并且尝试了很多在发布之前无法使用的方法。如果您知道如何做到这一点，如果您分享您的知识，我将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:20:27.973

从 HTML`<form>`使用传统的帖子（不是 AJAX）到执行此操作的 PHP 脚本：

```
if(isset($_POST['userid']))
{
    $userId = (int)$_POST['userid'];

    $obj = simplexml_load_file('https://api.xxx.com/v1.svc/users/' . $userId . '?apikey=YOUR_API_KEY&source=sampleapp');

    if($obj && isset($obj->LoginKey))
    {
        $loginKey = $obj->LoginKey;

        header('Location: ' . $loginKey);
    }
    else
    {
        // failed to load the xml
    }

} 
```

如果你想用 JSON 来做，你可以使用[`file_get_contents()`](http://uk3.php.net/manual/en/function.file-get-contents.php)从 URL 中获取原始 JSON，然后使用[`json_decode()`](http://uk3.php.net/manual/en/function.json-decode.php)它来将它变成一个对象。

此外，如果您想通过 AJAX 执行此操作，则必须使用 PHP 回显 URL 而不是尝试重定向，然后让 Javascript 使用`window.location.href = '...'`

# c# - WPF DataGrid 上的拖放行行为

> ID：10493450
> 
> 赞同：5
> 
> 时间：2012-05-08T06:11:01.503
> 
> 标签：c#, wpf, drag-and-drop, wpfdatagrid, attachedbehaviors

我正在尝试做一个附加的行为来重新排序行`Drag & Drop`

我找到了一些解决方案（在 Stackoverflow 上并通过谷歌搜索）并使用它们我试图做出这种行为......我以 Hordcodenet 网站为例（我现在没有链接）

# 代码

```
public static class DragDropRowBehavior
{
    private static DataGrid dataGrid;

    private static Popup popup;

    private static bool enable;

    private static object draggedItem;

    public static object DraggedItem
    {
        get { return DragDropRowBehavior.draggedItem; }
        set { DragDropRowBehavior.draggedItem = value; }
    }

    public static Popup GetPopupControl(DependencyObject obj)
    {
        return (Popup)obj.GetValue(PopupControlProperty);
    }

    public static void SetPopupControl(DependencyObject obj, Popup value)
    {
        obj.SetValue(PopupControlProperty, value);
    }

    // Using a DependencyProperty as the backing store for PopupControl.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty PopupControlProperty =
        DependencyProperty.RegisterAttached("PopupControl", typeof(Popup), typeof(DragDropRowBehavior), new UIPropertyMetadata(null, OnPopupControlChanged));

    private static void OnPopupControlChanged(DependencyObject depObject, DependencyPropertyChangedEventArgs e)
    {
        if (e.NewValue == null || !(e.NewValue is Popup))
        {
            throw new ArgumentException("Popup Control should be set", "PopupControl");
        }
        popup = e.NewValue as Popup;

        dataGrid = depObject as DataGrid;
        // Check if DataGrid
        if (dataGrid == null)
            return;

        if (enable && popup != null)
        {
            dataGrid.BeginningEdit += new EventHandler<DataGridBeginningEditEventArgs>(OnBeginEdit);
            dataGrid.CellEditEnding += new EventHandler<DataGridCellEditEndingEventArgs>(OnEndEdit);
            dataGrid.MouseLeftButtonUp += new System.Windows.Input.MouseButtonEventHandler(OnMouseLeftButtonUp);
            dataGrid.MouseLeftButtonDown += new MouseButtonEventHandler(OnMouseLeftButtonDown);
            dataGrid.MouseMove += new MouseEventHandler(OnMouseMove);
        }
        else
        {
            dataGrid.BeginningEdit -= new EventHandler<DataGridBeginningEditEventArgs>(OnBeginEdit);
            dataGrid.CellEditEnding -= new EventHandler<DataGridCellEditEndingEventArgs>(OnEndEdit);
            dataGrid.MouseLeftButtonUp -= new System.Windows.Input.MouseButtonEventHandler(OnMouseLeftButtonUp);
            dataGrid.MouseLeftButtonDown -= new MouseButtonEventHandler(OnMouseLeftButtonDown);
            dataGrid.MouseMove -= new MouseEventHandler(OnMouseMove);

            dataGrid = null;
            popup = null;
            draggedItem = null;
            IsEditing = false;
            IsDragging = false;
        }
    }

    public static bool GetEnabled(DependencyObject obj)
    {
        return (bool)obj.GetValue(EnabledProperty);
    }

    public static void SetEnabled(DependencyObject obj, bool value)
    {
        obj.SetValue(EnabledProperty, value);
    }

    // Using a DependencyProperty as the backing store for Enabled.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty EnabledProperty =
        DependencyProperty.RegisterAttached("Enabled", typeof(bool), typeof(DragDropRowBehavior), new UIPropertyMetadata(false,OnEnabledChanged));

    private static void OnEnabledChanged(DependencyObject depObject,DependencyPropertyChangedEventArgs e)
    {
        //Check if value is a Boolean Type
        if (e.NewValue is bool == false)
            throw new ArgumentException("Value should be of bool type", "Enabled");

        enable = (bool)e.NewValue;

    }

    public static bool IsEditing { get; set; }

    public static bool IsDragging { get; set; }

    private static void OnBeginEdit(object sender, DataGridBeginningEditEventArgs e)
    {
        IsEditing = true;
        //in case we are in the middle of a drag/drop operation, cancel it...
        if (IsDragging) ResetDragDrop();
    }

    private static void OnEndEdit(object sender, DataGridCellEditEndingEventArgs e)
    {
        IsEditing = false;
    }

    /// <summary>
    /// Initiates a drag action if the grid is not in edit mode.
    /// </summary>
    private static void OnMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        if (IsEditing) return;

        var row = UIHelpers.TryFindFromPoint<DataGridRow>((UIElement)sender, e.GetPosition(dataGrid));
        if (row == null || row.IsEditing) return;

        //set flag that indicates we're capturing mouse movements
        IsDragging = true;
        DraggedItem = row.Item;
    }

    /// <summary>
    /// Completes a drag/drop operation.
    /// </summary>
    private static void OnMouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        if (!IsDragging || IsEditing)
        {
            return;
        }

        //get the target item
        var targetItem = dataGrid.SelectedItem;

        if (targetItem == null || !ReferenceEquals(DraggedItem, targetItem))
        {
            //remove the source from the list
            ((dataGrid).ItemsSource as IList).Remove(DraggedItem);

            //get target index
            var targetIndex = ((dataGrid).ItemsSource as IList).IndexOf(targetItem);

            //move source at the target's location
            ((dataGrid).ItemsSource as IList).Insert(targetIndex, DraggedItem);

            //select the dropped item
            dataGrid.SelectedItem = DraggedItem;
        }

        //reset
        ResetDragDrop();
    }

    /// <summary>
    /// Closes the popup and resets the
    /// grid to read-enabled mode.
    /// </summary>
    private static void ResetDragDrop()
    {
        IsDragging = false;
        popup.IsOpen = false;
        dataGrid.IsReadOnly = false;
    }

    /// <summary>
    /// Updates the popup's position in case of a drag/drop operation.
    /// </summary>
    private static void OnMouseMove(object sender, MouseEventArgs e)
    {
        if (!IsDragging || e.LeftButton != MouseButtonState.Pressed) return;

        //display the popup if it hasn't been opened yet
        if (!popup.IsOpen)
        {
            //switch to read-only mode
            dataGrid.IsReadOnly = true;

            //make sure the popup is visible
            popup.IsOpen = true;
        }

        Size popupSize = new Size(popup.ActualWidth, popup.ActualHeight);
        popup.PlacementRectangle = new Rect(e.GetPosition(dataGrid), popupSize);

        //make sure the row under the grid is being selected
        Point position = e.GetPosition(dataGrid);
        var row = UIHelpers.TryFindFromPoint<DataGridRow>(dataGrid, position);
        if (row != null) dataGrid.SelectedItem = row.Item;
    }

} 
```

# 助手类

/// /// 常见的 UI 相关的辅助方法。/// 公共静态类 UIHelpers {

```
#region find parent

/// <summary>
/// Finds a parent of a given item on the visual tree.
/// </summary>
/// <typeparam name="T">The type of the queried item.</typeparam>
/// <param name="child">A direct or indirect child of the
/// queried item.</param>
/// <returns>The first parent item that matches the submitted
/// type parameter. If not matching item can be found, a null
/// reference is being returned.</returns>
public static T TryFindParent<T>(DependencyObject child)
  where T : DependencyObject
{
  //get parent item
  DependencyObject parentObject = GetParentObject(child);

  //we've reached the end of the tree
  if (parentObject == null) return null;

  //check if the parent matches the type we're looking for
  T parent = parentObject as T;
  if (parent != null)
  {
    return parent;
  }
  else
  {
    //use recursion to proceed with next level
    return TryFindParent<T>(parentObject);
  }
}

/// <summary>
/// This method is an alternative to WPF's
/// <see cref="VisualTreeHelper.GetParent"/> method, which also
/// supports content elements. Do note, that for content element,
/// this method falls back to the logical tree of the element.
/// </summary>
/// <param name="child">The item to be processed.</param>
/// <returns>The submitted item's parent, if available. Otherwise
/// null.</returns>
public static DependencyObject GetParentObject(DependencyObject child)
{
  if (child == null) return null;
  ContentElement contentElement = child as ContentElement;

  if (contentElement != null)
  {
    DependencyObject parent = ContentOperations.GetParent(contentElement);
    if (parent != null) return parent;

    FrameworkContentElement fce = contentElement as FrameworkContentElement;
    return fce != null ? fce.Parent : null;
  }

  //if it's not a ContentElement, rely on VisualTreeHelper
  return VisualTreeHelper.GetParent(child);
}

#endregion

#region update binding sources

/// <summary>
/// Recursively processes a given dependency object and all its
/// children, and updates sources of all objects that use a
/// binding expression on a given property.
/// </summary>
/// <param name="obj">The dependency object that marks a starting
/// point. This could be a dialog window or a panel control that
/// hosts bound controls.</param>
/// <param name="properties">The properties to be updated if
/// <paramref name="obj"/> or one of its childs provide it along
/// with a binding expression.</param>
public static void UpdateBindingSources(DependencyObject obj,
                          params DependencyProperty[] properties)
{
  foreach (DependencyProperty depProperty in properties)
  {
    //check whether the submitted object provides a bound property
    //that matches the property parameters
    BindingExpression be = BindingOperations.GetBindingExpression(obj, depProperty);
    if (be != null) be.UpdateSource();
  }

  int count = VisualTreeHelper.GetChildrenCount(obj);
  for (int i = 0; i < count; i++)
  {
    //process child items recursively
    DependencyObject childObject = VisualTreeHelper.GetChild(obj, i);
    UpdateBindingSources(childObject, properties);
  }
}

#endregion

/// <summary>
/// Tries to locate a given item within the visual tree,
/// starting with the dependency object at a given position. 
/// </summary>
/// <typeparam name="T">The type of the element to be found
/// on the visual tree of the element at the given location.</typeparam>
/// <param name="reference">The main element which is used to perform
/// hit testing.</param>
/// <param name="point">The position to be evaluated on the origin.</param>
public static T TryFindFromPoint<T>(UIElement reference, Point point)
  where T : DependencyObject
{
  DependencyObject element = reference.InputHitTest(point)
                               as DependencyObject;
  if (element == null) return null;
  else if (element is T) return (T)element;
  else return TryFindParent<T>(element);
} 
```

}

问题是`OnMouseLeftButtonDown`当我将事件按在一行上以拖动它时不会调用它......但`OnMouseLeftButtonUp`在那之后调用它......

有没有办法做到这一点......

我似乎找不到方法

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T06:41:56.090

最后我遇到了问题，并为此进行了一些更改以使其正常工作

我用[这个](http://www.hardcodet.net/2009/03/moving-data-grid-rows-using-drag-and-drop)例子来使`Drag Drop Logic`amd做出这种行为可能对其他人有用....请提出改进​​我很乐意改变...

# 行为

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using Microsoft.Windows.Controls;
using System.Windows.Input;
using System.Collections;

namespace DataGridDragAndDrop
{
public static class DragDropRowBehavior
{
    private static DataGrid dataGrid;

    private static Popup popup;

    private static bool enable;

    private static object draggedItem;

    public static object DraggedItem
    {
        get { return DragDropRowBehavior.draggedItem; }
        set { DragDropRowBehavior.draggedItem = value; }
    }

    public static Popup GetPopupControl(DependencyObject obj)
    {
        return (Popup)obj.GetValue(PopupControlProperty);
    }

    public static void SetPopupControl(DependencyObject obj, Popup value)
    {
        obj.SetValue(PopupControlProperty, value);
    }

    // Using a DependencyProperty as the backing store for PopupControl.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty PopupControlProperty =
        DependencyProperty.RegisterAttached("PopupControl", typeof(Popup), typeof(DragDropRowBehavior), new UIPropertyMetadata(null, OnPopupControlChanged));

    private static void OnPopupControlChanged(DependencyObject depObject, DependencyPropertyChangedEventArgs e)
    {
        if (e.NewValue == null || !(e.NewValue is Popup))
        {
            throw new ArgumentException("Popup Control should be set", "PopupControl");
        }
        popup = e.NewValue as Popup;

        dataGrid = depObject as DataGrid;
        // Check if DataGrid
        if (dataGrid == null)
            return;

        if (enable && popup != null)
        {
            dataGrid.BeginningEdit += new EventHandler<DataGridBeginningEditEventArgs>(OnBeginEdit);
            dataGrid.CellEditEnding += new EventHandler<DataGridCellEditEndingEventArgs>(OnEndEdit);
            dataGrid.MouseLeftButtonUp += new System.Windows.Input.MouseButtonEventHandler(OnMouseLeftButtonUp);
            dataGrid.PreviewMouseLeftButtonDown += new MouseButtonEventHandler(OnMouseLeftButtonDown);
            dataGrid.MouseMove += new MouseEventHandler(OnMouseMove);
        }
        else
        {
            dataGrid.BeginningEdit -= new EventHandler<DataGridBeginningEditEventArgs>(OnBeginEdit);
            dataGrid.CellEditEnding -= new EventHandler<DataGridCellEditEndingEventArgs>(OnEndEdit);
            dataGrid.MouseLeftButtonUp -= new System.Windows.Input.MouseButtonEventHandler(OnMouseLeftButtonUp);
            dataGrid.MouseLeftButtonDown -= new MouseButtonEventHandler(OnMouseLeftButtonDown);
            dataGrid.MouseMove -= new MouseEventHandler(OnMouseMove);

            dataGrid = null;
            popup = null;
            draggedItem = null;
            IsEditing = false;
            IsDragging = false;
        }
    }

    public static bool GetEnabled(DependencyObject obj)
    {
        return (bool)obj.GetValue(EnabledProperty);
    }

    public static void SetEnabled(DependencyObject obj, bool value)
    {
        obj.SetValue(EnabledProperty, value);
    }

    // Using a DependencyProperty as the backing store for Enabled.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty EnabledProperty =
        DependencyProperty.RegisterAttached("Enabled", typeof(bool), typeof(DragDropRowBehavior), new UIPropertyMetadata(false,OnEnabledChanged));

    private static void OnEnabledChanged(DependencyObject depObject,DependencyPropertyChangedEventArgs e)
    {
        //Check if value is a Boolean Type
        if (e.NewValue is bool == false)
            throw new ArgumentException("Value should be of bool type", "Enabled");

        enable = (bool)e.NewValue;

    }

    public static bool IsEditing { get; set; }

    public static bool IsDragging { get; set; }

    private static void OnBeginEdit(object sender, DataGridBeginningEditEventArgs e)
    {
        IsEditing = true;
        //in case we are in the middle of a drag/drop operation, cancel it...
        if (IsDragging) ResetDragDrop();
    }

    private static void OnEndEdit(object sender, DataGridCellEditEndingEventArgs e)
    {
        IsEditing = false;
    }

    /// <summary>
    /// Initiates a drag action if the grid is not in edit mode.
    /// </summary>
    private static void OnMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        if (IsEditing) return;

        var row = UIHelpers.TryFindFromPoint<DataGridRow>((UIElement)sender, e.GetPosition(dataGrid));
        if (row == null || row.IsEditing) return;

        //set flag that indicates we're capturing mouse movements
        IsDragging = true;
        DraggedItem = row.Item;
    }

    /// <summary>
    /// Completes a drag/drop operation.
    /// </summary>
    private static void OnMouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        if (!IsDragging || IsEditing)
        {
            return;
        }

        //get the target item
        var targetItem = dataGrid.SelectedItem;         

        if (targetItem == null || !ReferenceEquals(DraggedItem, targetItem))
        {
            //get target index
            var targetIndex = ((dataGrid).ItemsSource as IList).IndexOf(targetItem);

            //remove the source from the list
            ((dataGrid).ItemsSource as IList).Remove(DraggedItem);              

            //move source at the target's location
            ((dataGrid).ItemsSource as IList).Insert(targetIndex, DraggedItem);

            //select the dropped item
            dataGrid.SelectedItem = DraggedItem;
        }

        //reset
        ResetDragDrop();
    }

    /// <summary>
    /// Closes the popup and resets the
    /// grid to read-enabled mode.
    /// </summary>
    private static void ResetDragDrop()
    {
        IsDragging = false;
        popup.IsOpen = false;
        dataGrid.IsReadOnly = false;
    }

    /// <summary>
    /// Updates the popup's position in case of a drag/drop operation.
    /// </summary>
    private static void OnMouseMove(object sender, MouseEventArgs e)
    {
        if (!IsDragging || e.LeftButton != MouseButtonState.Pressed) return;

        popup.DataContext = DraggedItem;
        //display the popup if it hasn't been opened yet
        if (!popup.IsOpen)
        {
            //switch to read-only mode
            dataGrid.IsReadOnly = true;

            //make sure the popup is visible
            popup.IsOpen = true;
        }

        Size popupSize = new Size(popup.ActualWidth, popup.ActualHeight);
        popup.PlacementRectangle = new Rect(e.GetPosition(dataGrid), popupSize);

        //make sure the row under the grid is being selected
        Point position = e.GetPosition(dataGrid);
        var row = UIHelpers.TryFindFromPoint<DataGridRow>(dataGrid, position);
        if (row != null) dataGrid.SelectedItem = row.Item;
    }

}
} 
```

# UIHelper 类

```
public static class UIHelpers
{

    #region find parent

    /// <summary>
    /// Finds a parent of a given item on the visual tree.
    /// </summary>
    /// <typeparam name="T">The type of the queried item.</typeparam>
    /// <param name="child">A direct or indirect child of the
    /// queried item.</param>
    /// <returns>The first parent item that matches the submitted
    /// type parameter. If not matching item can be found, a null
    /// reference is being returned.</returns>
    public static T TryFindParent<T>(DependencyObject child)
      where T : DependencyObject
    {
        //get parent item
        DependencyObject parentObject = GetParentObject(child);

        //we've reached the end of the tree
        if (parentObject == null) return null;

        //check if the parent matches the type we're looking for
        T parent = parentObject as T;
        if (parent != null)
        {
            return parent;
        }
        else
        {
            //use recursion to proceed with next level
            return TryFindParent<T>(parentObject);
        }
    }

    /// <summary>
    /// This method is an alternative to WPF's
    /// <see cref="VisualTreeHelper.GetParent"/> method, which also
    /// supports content elements. Do note, that for content element,
    /// this method falls back to the logical tree of the element.
    /// </summary>
    /// <param name="child">The item to be processed.</param>
    /// <returns>The submitted item's parent, if available. Otherwise
    /// null.</returns>
    public static DependencyObject GetParentObject(DependencyObject child)
    {
        if (child == null) return null;
        ContentElement contentElement = child as ContentElement;

        if (contentElement != null)
        {
            DependencyObject parent = ContentOperations.GetParent(contentElement);
            if (parent != null) return parent;

            FrameworkContentElement fce = contentElement as FrameworkContentElement;
            return fce != null ? fce.Parent : null;
        }

        //if it's not a ContentElement, rely on VisualTreeHelper
        return VisualTreeHelper.GetParent(child);
    }

    #endregion

    #region update binding sources

    /// <summary>
    /// Recursively processes a given dependency object and all its
    /// children, and updates sources of all objects that use a
    /// binding expression on a given property.
    /// </summary>
    /// <param name="obj">The dependency object that marks a starting
    /// point. This could be a dialog window or a panel control that
    /// hosts bound controls.</param>
    /// <param name="properties">The properties to be updated if
    /// <paramref name="obj"/> or one of its childs provide it along
    /// with a binding expression.</param>
    public static void UpdateBindingSources(DependencyObject obj,
                              params DependencyProperty[] properties)
    {
        foreach (DependencyProperty depProperty in properties)
        {
            //check whether the submitted object provides a bound property
            //that matches the property parameters
            BindingExpression be = BindingOperations.GetBindingExpression(obj, depProperty);
            if (be != null) be.UpdateSource();
        }

        int count = VisualTreeHelper.GetChildrenCount(obj);
        for (int i = 0; i < count; i++)
        {
            //process child items recursively
            DependencyObject childObject = VisualTreeHelper.GetChild(obj, i);
            UpdateBindingSources(childObject, properties);
        }
    }

    #endregion

    /// <summary>
    /// Tries to locate a given item within the visual tree,
    /// starting with the dependency object at a given position. 
    /// </summary>
    /// <typeparam name="T">The type of the element to be found
    /// on the visual tree of the element at the given location.</typeparam>
    /// <param name="reference">The main element which is used to perform
    /// hit testing.</param>
    /// <param name="point">The position to be evaluated on the origin.</param>
    public static T TryFindFromPoint<T>(UIElement reference, Point point)
      where T : DependencyObject
    {
        DependencyObject element = reference.InputHitTest(point)
                                     as DependencyObject;
        if (element == null) return null;
        else if (element is T) return (T)element;
        else return TryFindParent<T>(element);
    }
} 
```

# 用法

```
 <!--  Drag and Drop Popup  -->
    <Popup x:Name="popup1"
           AllowsTransparency="True"
           IsHitTestVisible="False"
           Placement="RelativePoint"
           PlacementTarget="{Binding ElementName=shareGrid}">

    <!--  Your own Popup construction Use properties of DraggedObject inside for Binding  -->

                <TextBlock Margin="8,0,0,0"
                           VerticalAlignment="Center"
                           FontSize="14"
                           FontWeight="Bold"

    <!--  I used name property of in my Dragged row  -->

                           Text="{Binding Path=Name}" />
    </Popup>
    <DataGrid x:Name="myDataGrid"
                     AutoGenerateColumns="False"
                     CanUserAddRows="False"
                     CanUserDeleteRows="False"
                     CanUserReorderColumns="False"
                     CanUserSortColumns="False"
                     ItemsSource="{Binding}"
                     SelectionMode="Single"
                     this:DragDropRowBehavior.Enabled="True"
                     this:DragDropRowBehavior.PopupControl="{Binding ElementName=popup1}"></DataGrid > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:25:35.753

如果事件没有在所需的对象上触发，那是因为其他一些控件正在“吞噬”它。尝试改用 OnPreviewMouseLeftButtonDown。如果预览未显示事件，请尝试将该预览方法移至父类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T18:24:00.977

我从@Dave 解决方案中创建了一个行为：

```
 public class DragDropRowBehavior : Behavior<DataGrid>
{
    private object draggedItem;
    private bool isEditing;
    private bool isDragging;

    #region DragEnded
    public static readonly RoutedEvent DragEndedEvent =
        EventManager.RegisterRoutedEvent("DragEnded", RoutingStrategy.Bubble, typeof(RoutedEventHandler), typeof(DragDropRowBehavior));
    public static void AddDragEndedHandler(DependencyObject d, RoutedEventHandler handler)
    {
        UIElement uie = d as UIElement;
        if (uie != null)
            uie.AddHandler(DragDropRowBehavior.DragEndedEvent, handler);
    }
    public static void RemoveDragEndedHandler(DependencyObject d, RoutedEventHandler handler)
    {
        UIElement uie = d as UIElement;
        if (uie != null)
            uie.RemoveHandler(DragDropRowBehavior.DragEndedEvent, handler);
    }

    private void RaiseDragEndedEvent()
    {
        var args = new RoutedEventArgs(DragDropRowBehavior.DragEndedEvent);
        AssociatedObject.RaiseEvent(args);
    }
    #endregion

    #region Popup
    public static readonly DependencyProperty PopupProperty =
        DependencyProperty.Register("Popup", typeof(System.Windows.Controls.Primitives.Popup), typeof(DragDropRowBehavior));
    public System.Windows.Controls.Primitives.Popup Popup
    {
        get { return (System.Windows.Controls.Primitives.Popup)GetValue(PopupProperty); }
        set { SetValue(PopupProperty, value); }
    }
    #endregion

    protected override void OnAttached()
    {
        base.OnAttached();

        AssociatedObject.BeginningEdit += OnBeginEdit;
        AssociatedObject.CellEditEnding += OnEndEdit;
        AssociatedObject.MouseLeftButtonUp += OnMouseLeftButtonUp;
        AssociatedObject.PreviewMouseLeftButtonDown += OnMouseLeftButtonDown;
        AssociatedObject.MouseMove += OnMouseMove;
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();

        AssociatedObject.BeginningEdit -= OnBeginEdit;
        AssociatedObject.CellEditEnding -= OnEndEdit;
        AssociatedObject.MouseLeftButtonUp -= OnMouseLeftButtonUp;
        AssociatedObject.MouseLeftButtonDown -= OnMouseLeftButtonDown;
        AssociatedObject.MouseMove -= OnMouseMove;

        Popup = null;
        draggedItem = null;
        isEditing = false;
        isDragging = false;
    }

    private void OnBeginEdit(object sender, DataGridBeginningEditEventArgs e)
    {
        isEditing = true;
        //in case we are in the middle of a drag/drop operation, cancel it...
        if (isDragging) ResetDragDrop();
    }

    private void OnEndEdit(object sender, DataGridCellEditEndingEventArgs e)
    {
        isEditing = false;
    }

    private void OnMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        if (isEditing) return;

        var row = UIHelpers.TryFindFromPoint<DataGridRow>((UIElement)sender, e.GetPosition(AssociatedObject));
        if (row == null || row.IsEditing) return;

        //set flag that indicates we're capturing mouse movements
        isDragging = true;
        draggedItem = row.Item;
    }

    private void OnMouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        if (!isDragging || isEditing)
            return;

        //get the target item
        var targetItem = AssociatedObject.SelectedItem;

        if (targetItem == null || !ReferenceEquals(draggedItem, targetItem))
        {
            //get target index
            var targetIndex = ((AssociatedObject).ItemsSource as IList).IndexOf(targetItem);

            //remove the source from the list
            ((AssociatedObject).ItemsSource as IList).Remove(draggedItem);

            //move source at the target's location
            ((AssociatedObject).ItemsSource as IList).Insert(targetIndex, draggedItem);

            //select the dropped item
            AssociatedObject.SelectedItem = draggedItem;
            RaiseDragEndedEvent();
        }

        //reset
        ResetDragDrop();
    }

    private void ResetDragDrop()
    {
        isDragging = false;
        Popup.IsOpen = false;
        AssociatedObject.IsReadOnly = false;
    }

    private void OnMouseMove(object sender, MouseEventArgs e)
    {
        if (!isDragging || e.LeftButton != MouseButtonState.Pressed)
            return;

        Popup.DataContext = draggedItem;
        //display the popup if it hasn't been opened yet
        if (!Popup.IsOpen)
        {
            //switch to read-only mode
            AssociatedObject.IsReadOnly = true;

            //make sure the popup is visible
            Popup.IsOpen = true;
        }

        var popupSize = new Size(Popup.ActualWidth, Popup.ActualHeight);
        Popup.PlacementRectangle = new Rect(e.GetPosition(AssociatedObject), popupSize);

        //make sure the row under the grid is being selected
        var position = e.GetPosition(AssociatedObject);
        var row = UIHelpers.TryFindFromPoint<DataGridRow>(AssociatedObject, position);
        if (row != null) AssociatedObject.SelectedItem = row.Item;
    }
} 
```

希望它对未来的用户有所帮助:)

# vim - Vim：打开一个显示可执行文件输出的临时缓冲区

> ID：10493452
> 
> 赞同：6
> 
> 时间：2012-05-08T06:11:05.257
> 
> 标签：vim, makefile

我发现该`:cwindow`命令非常有用，我想知道是否可以使用已编译代码的输出获得类似的功能。我希望输出`:!./a.out`出现在“快速修复”样式缓冲区中。

我还注意到，即使在采取标准步骤来阻止`"Press Enter to continue"`消息之后，它仍然至少会发生一次`:make`并且`:!./a.out`- 使用`:silent`来抑制这会导致我的 tmux 完全空白。我当前的解决方法涉及带有大量回车的映射，还有其他方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T09:15:41.677

当然，你可以使用 vim 的预览窗口和一个简短的函数来执行命令，在你的 .vimrc 中试试这个：

```
fun! Runcmd(cmd)
    silent! exe "noautocmd botright pedit ".a:cmd
    noautocmd wincmd P
    set buftype=nofile
    exe "noautocmd r! ".a:cmd
    noautocmd wincmd p
endfun
com! -nargs=1 Runcmd :call Runcmd("<args>") 
```

那么你也能：

```
:Runcmd ls 
```

`ls`并在预览窗口中查看结果

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T08:09:29.167

我找到了这个：

```
" Shell ------------------------------------------------------------------- {{{

function! s:ExecuteInShell(command) " {{{
    let command = join(map(split(a:command), 'expand(v:val)'))
    let winnr = bufwinnr('^' . command . '$')
    silent! execute  winnr < 0 ? 'botright vnew ' . fnameescape(command) : winnr . 'wincmd w'
    setlocal buftype=nowrite bufhidden=wipe nobuflisted noswapfile nowrap nonumber
    echo 'Execute ' . command . '...'
    silent! execute 'silent %!'. command
    silent! redraw
    silent! execute 'au BufUnload <buffer> execute bufwinnr(' . bufnr('#') . ') . ''wincmd w'''
    silent! execute 'nnoremap <silent> <buffer> <LocalLeader>r :call <SID>ExecuteInShell(''' . command . ''')<CR>:AnsiEsc<CR>'
    silent! execute 'nnoremap <silent> <buffer> q :q<CR>'
    silent! execute 'AnsiEsc'
    echo 'Shell command ' . command . ' executed.'
endfunction " }}}
command! -complete=shellcmd -nargs=+ Shell call s:ExecuteInShell(<q-args>)
nnoremap <leader>! :Shell

" }}} 
```

在 steve losh 的 .vimrc 中 -[看看](https://github.com/sjl/dotfiles)我无耻地复制了哪个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T14:32:41.133

我刚刚发现了这个`:read`命令，它将 shell 命令的输出放到一个窗口中。

我去找这个是因为我经常想在当前目录中查找包含某个字符串的文件（然后将其打开到我当前的 VIM 中）。

这是我的快捷方式`$MYVIMRC`：

```
noremap <leader>g :new<CR>:read ! grep -rn " 
```

有了这个，当我按下时，`\g`我会在拆分窗口中创建一个新缓冲区并找到

```
:read ! grep -rn " 
```

坐在指挥区等我。现在我只需输入我的搜索字符串，关闭双引号并点击`<Enter>`，然后缓冲区将填充命令输出。

完成后，一个简单的

```
:bw! 
```

在那个新缓冲区中会杀死它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-14T19:52:27.937

首先打开一个预览窗口，并将其设置为自动读取文件：

```
:botr pedit +:setl\ autoread /tmp/out.log 
```

现在只需运行您的命令，并将输出发送到文件。

```
:!date > /tmp/out.log 2>&1 
```

命令的结果应该出现在预览窗口中。

但是，我们仍然收到“Press ENTER”提示。避免这种情况的一个简单方法是为我们创建一个按 Enter 键的映射：

```
:nmap <Leader>r :exec '!date > /tmp/out.log 2>&1'<CR><CR><CR> 
```

我以为只`<CR>`需要两个，但后来发现自己需要三个。

# c++ - 直到第一次向用户显示表单时应用程序才启动

> ID：10493457
> 
> 赞同：0
> 
> 时间：2012-05-08T06:11:28.373
> 
> 标签：c++, .net, mfc, process

这是一个奇怪的问题。我编写了一个启动进程的 .NET 应用程序。这个进程是一个用 C++ 编写的 MFC 应用程序。出于某种原因，该过程在第一次向用户显示表单之前不会开始执行任何操作。例如，如果进程开始最小化，我必须取消最小化（单击它），然后它才会开始执行它应该执行的任何操作。此外，如果我的应用程序正在运行并在屏幕锁定时启动此进程，则该进程的行为与最小化一样。在我解锁屏幕并首次向用户显示之前，它不会开始做任何事情。就像我说的，这是一个奇怪的问题，所以我希望我能正确地传达这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:22:07.160

听起来您的功能嵌入在 MFC Windows 的加载事件中。如果您希望应用程序更具反应性，请将该代码移至您的应用程序类。

# css - 带有预定义图像的 HTML5 画布

> ID：10493468
> 
> 赞同：2
> 
> 时间：2012-05-08T06:12:44.510
> 
> 标签：css, image, html, canvas

最近我开始研究 HTML5 Canvas，我是新手。我有一个问题如下：

我正在加载带有人体图表图像（预定义图像）的画布，用户将在该画布上绘制一些线条、形状等。

之后，我将生成一个图像对象，如下所示

```
var canvas = document.getElementById("MyCanvas");
var dataURL = canvas.toDataURL();
var image = new Image();
image.src = dataURL; 
```

但是，这里它只生成用户绘制的那些元素（线条、形状）作为 PNG 图像。它不会采用预定义的画布背景图像。

我需要生成一个 PNG 图像，它应该包括 Canvas 背景图像以及用户输入的绘图元素。

这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:41:14.480

尝试使用以下功能将图像实际绘制到画布上：

```
 var canvas = document.getElementById("MyCanvas");
  var img = new Image();
  img.src = 'pathToYourImageHere';
  canvas.drawImage(img,0,0); /* 0,0 is x and y from the top left */ 
```

当您现在尝试保存它时，它还应该保存您的背景图像。

编辑：回应您的评论：

您可以通过使用两个不同的画布来解决分层问题。一个用于图像，一个用于您的绘图。然后使用绝对定位将它们层叠在一起。您可以在此处阅读更多内容：[将许多画布元素另存为图像](https://stackoverflow.com/questions/3750580/save-many-canvas-element-as-image/3797989#3797989)

EDIT2：但实际上你不应该有分层问题，因为下面的代码会先绘制图像然后绘制弧线，分层就可以了：

```
var canvas = document.getElementById("myCanvas");
var context = canvas.getContext("2d");
var imageObj = new Image();
imageObj.src = "somePathToAnImage";
context.drawImage(imageObj, 50, 50);   

var x = canvas.width / 2;
var y = canvas.height / 2;
var radius = 75;
var startAngle = 1.1 * Math.PI;
var endAngle = 1.9 * Math.PI;
var counterClockwise = false;

context.beginPath();
context.arc(x, y, radius, startAngle, endAngle, counterClockwise);
context.lineWidth = 15;
// line color
context.strokeStyle = "red";
context.stroke(); 
```

即使分层很好，您最好使用两个画布，以防您只想保存绘图而没有背景。您始终可以将两者保存到新画布中并保存，当您只使用一个画布时，您将很难将绘图与背景分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T10:43:30.963

这是因为图像需要时间来加载，你必须使用**onload**函数。

```
imgObj.onload = function() { context.drawImage(imageObj, 50, 50); imgLoaded = true;}
if (imgLoaded) { /*you draw shapes here */ } 
```

# iphone - 如何准确找到iPhone项目中内存泄漏的位置

> ID：10493470
> 
> 赞同：7
> 
> 时间：2012-05-08T06:12:52.623
> 
> 标签：iphone, ios, ios4, iphone-sdk-3.0

在 Xcode 中开发应用程序时，内存泄漏正在发生。当我在扩展详细视图中检查它们时，它们显示了与实现无关的不同方法。如何准确找出哪个对象正在泄漏以及它在哪里泄漏内存。

启用 ARC 后，我们是否必须处理内存泄漏？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T06:19:31.157

是的，即使**使用 ARC，也会存在内存泄漏**。ARC 不是垃圾收集器，它只在编译时为您插入、保留、释放和自动释放关键位置。因此，尽管它确实对开发人员有所帮助，但您应该知道内存泄漏仍然存在（例如循环引用）。您可以从使用**静态分析器**开始并纠正它向您显示的任何问题。然后您可以转到**Instruments 并选择 Leaks**。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-08T06:23:51.963

即使`ARC`可能发生内存泄漏，它也只是在编译时插入释放和自动释放。

**1.**`Build and analyze`您必须在 XCode 中检查泄漏，`shift+command+b`您应该清除这些问题。

**2.**之后，您可以使用配置文件选项开始使用仪器`command+i`。这将指向您可能泄漏的位置。

这个链接也会帮助你[http://soulwithmobiletechnology.blogspot.in/2011/04/how-to-check-memory-leaks-in-xcode-4.html](http://soulwithmobiletechnology.blogspot.in/2011/04/how-to-check-memory-leaks-in-xcode-4.html)

**编辑：**添加了一些屏幕截图，希望能清楚地说明。

在`leaks`选择`call tree`选项并选中复选框后进行分析`hide system libraries`，如下图所示。`invert call tree``show obj-c only`

双击下面的符号名称后，您将看到泄漏的行。 ![在此处输入图像描述](../Images/001dae1e7ecf71c8a517cff2133ac824.png)

你会得到这样的东西。

![在此处输入图像描述](../Images/60b8d7591f66db22fc0293b9da8ffc3d.png)

# iphone - 为 iphone 自定义共享工具包

> ID：10493473
> 
> 赞同：0
> 
> 时间：2012-05-08T06:13:00.937
> 
> 标签：iphone, facebook, sharekit

我想自定义 Facebook 分享按钮功能，并希望在用户使用 iphone 分享或发布到墙上后立即推送一个新的 viewController。我知道这是可能的，我们只需要编写 2 或 3 行 javaScript 代码，但没有得到代码。我在我的应用程序中使用 Sharekit。有人知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:33:39.987

您可以通过 FBDialogDelegate 方法检测用户墙上的帖子发送或共享。在您的项目中展开 Sharekit > Sharers > Services > Facebook > SHKFacebook.m 并找到方法

`- (void)dialogDidSucceed:(FBDialog*)dialog` 当用户在墙上发帖或分享时会调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:15:35.860

您可以收听在 ShareKit 工作流程期间默认发出的通知。好处是，您不需要更改 ShareKit 的代码。

要预览 ShareKit 发送的通知，请查看`SHKSharer.m`委托通知部分。

例如，要收听的通知是

```
@"SHKSendDidStartNotification" 
```

或者

```
@"SHKSendDidFinish" 
```

等等

# jquery - 屏蔽动画 GIF - 使用 Jquery 或其他方法可以实现吗？

> ID：10493476
> 
> 赞同：0
> 
> 时间：2012-05-08T06:13:18.050
> 
> 标签：jquery, css, html, mask, animated-gif

我想知道是否有人对如何为网站屏蔽动画 GIF 电影提出建议。

示例： - 方形动画循环 GIF 电影（就像您在[http://iwdrm.tumblr.com/](http://iwdrm.tumblr.com/)看到的那样） - 类似 alpha 通道的蒙版，例如星形 - 动画背后是一张照片（不是纯色） - 结果：相反看到方形动画，您会看到星形动画，您可以在其中看到星形蒙版后面的背景

当前，但对我来说并不理想的解决方案是使用带有透明低帧 GIF 的 Flash 作为移动设备的后备方案，但很想知道您是否对使用 Jquery 或其他适用于移动设备和桌面的非 Flash 解决方案有任何建议。

考虑的想法： - 在方形 GIF 动画上方覆盖类似 alpha 的 png，例如 png 的星形剔除通过它显示动画 - Flash，这是最简单和最快的，但尽可能避免使用 Flash - 将整个 GIF 动画制作成最好的透明度和哑光颜色的背景

也许 Flash 是最好的解决方案 - 但只是将这个问题发送出去以防万一我错过了一些我确定是这样的情况。

感谢您考虑这一点。

期待听到任何想法，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:43:12.763

```
<div style='possition: absolute; z-index:0;'><img src='animated.gif'></div>
<div style='possition: absolute; z-index:1;'><img src='mask.png'></div> 
```

这样的想法呢？顺便说一句，可以在没有 DIV 的情况下使用相同的逻辑，只需使用 IMG

在 BG 上，你有你的动画 gif。

最重要的是，您的加载 mask.png 具有您需要的透明区域。

另一种方式：

```
<div style="background-image: url('animated.gif');"><img src='mask.png'></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:01:28.073

您想阅读[Jeff Croft 的文章](http://www.digital-web.com/articles/web_standards_creativity_png/)以了解有关如何在网络上使用透明图像的许多想法。文章本身强调了 PNG 图像的可能性，但演示的技术也可以将 GIF 图像用作背景。

这个干净的示例使用 HTML + CSS 进行图像屏蔽：

```
<a class="photo-container" href="http://www.flickr.com/photos/jcroft/2622915/">
  <img class="full-size-photo" src="http://static.flickr.com/2/2622915_8b78c1207d.jpg" 
    alt="CTA, a photo by Jeff Croft" />
  <img class="mask" src="http://media.jeffcroft.com/img/core/jeffcroft_logo_mask.png" 
    alt="Mask" />
</a> 
```

然后是 CSS：

```
a.photo-container {
  position: relative;
  display: block;
} 
img.mask {
  position: absolute;
  top: 0;
  left: 0;
} 
```

这是一个带有蒙版动画 GIF的演示[示例](http://jsfiddle.net/Nbc3R/1/)

# java - 在Java中，为什么在使用二进制搜索搜索数组时返回负数？

> ID：10493482
> 
> 赞同：3
> 
> 时间：2012-05-08T06:13:59.537
> 
> 标签：java, arrays, search, sorting, binary

我是 Java 初学者，正在学习使用数组。我了解使用Array的二分查找方法时，如果找不到该条目，它将返回一个负数。但是，在下面的代码中，我得到了一个负数，分别代表 9、10 和 11。

我想知道是否有人可以帮助指出我做错了什么？谢谢！

```
 String [] oneToSixteen = {"1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16"};

   System.out.println("Searching for 7: "+ Arrays.binarySearch(oneToSixteen, "7"));
   System.out.println("Searching for 8: "+ Arrays.binarySearch(oneToSixteen, "8"));
   System.out.println("Searching for 9: "+ Arrays.binarySearch(oneToSixteen, "9"));
   System.out.println("Searching for 10: "+ Arrays.binarySearch(oneToSixteen, "10"));
   System.out.println("Searching for 11: "+ Arrays.binarySearch(oneToSixteen, "11")); 
```

我得到的输出是：

```
Searching for 7: 6
Searching for 8: 7
Searching for 9: -17
Searching for 10: -2
Searching for 11: -2 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T06:15:16.237

这是因为您的数组是一个数组`String`而不是`int`并且**它没有排序**。

文档明确指出，必须对正在搜索的数组进行排序，如果不是，则结果未定义。

要对数组进行排序，您可以使用 Arrays 类的[sort 方法](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:22:52.043

负数是指将在您的数组中找到/插入字符串的组件1，并且由于您的数组未排序而出现。未找到该元素。因此，对于您的数组“9”为-17，它将被插入到组件 16 “10”将被插入到组件 1 “11”将被插入到组件 1

Array 的类型无关紧要，因为 Arrays 方法已被重载。

按使用排序

```
Arrays.sort(oneToSixteen); 
```

然后使用您的 binarySearch()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T07:16:55.663

请记住，要使`Array.binarySearch(array, key)`方法正常工作，**必须先对源数组进行排序**。如果源数组未排序，则结果将是未定义的。根据您的问题，源数组未排序。要按自然顺序对数组进行排序，请使用 util 方法`Arrays.sort(array)`。您还可以提供一个额外的比较器来控制排序顺序`Arrays.sort(array, comparator)`。

例子：

```
// sort in natural order (ascending)
Arrays.sort(oneToSixteen);

// sort descending using comparator
Arrays.sort(oneToSixteen, new Comparator<String>() {
    @Override
    public int compare(String o1, String o2) {
        return o2.compareTo(o1);
    }
}); 
```

# ruby-on-rails - 无法启动 rails 服务器

> ID：10493487
> 
> 赞同：0
> 
> 时间：2012-05-08T06:14:36.213
> 
> 标签：ruby-on-rails, windows, webrick

当我尝试启动我的 Rails 服务器时，出现此错误

```
 C:/Ruby187/lib/ruby  /gems/1.8/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/1.8/mysql 2.so: 193: %1 is not a valid Win32 application.  
 - C:/Ruby187/lib/ruby/gems/1.8 /gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/1.8/mysql2.so (LoadError) 
```

尝试更改 libmysql.dll 文件，即使那样它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:02:53.613

问题出在mysql上。它是 64 位安装。将其更改为 32 位，它运行良好。

# python - 使用 shutil.copytree 复制权限被拒绝的文件时处理异常

> ID：10493490
> 
> 赞同：2
> 
> 时间：2012-05-08T06:14:44.043
> 
> 标签：python, python-3.x

考虑以下目录树

```
Work--->subdir1--->File1
    |         |
    |         ---->File2
    |
    -->subdir2--->File3 
```

存在另一个类似的目录树

```
Gold--->subdir1--->File1
    |         |
    |         ---->File2
    |
    -->subdir2--->File3 
```

我必须编写一个脚本来将`Work`目录复制到另一个位置。我一直在使用`shutil.copytree`相同的。

问题是，有时（但并非总是）我可能无权访问目录`File2`中的某些文件`Work`，并且会收到以下错误：

```
Traceback (most recent call last):
File "C:\Script.py", line 81, in <module>
shutil.copytree(source_loc,dest_loc)
File "C:\Python32\lib\shutil.py", line 239, in copytree
   raise Error(errors)
   shutil.Error: [('C:\\Work\\subdir1\\File2', 
   'C:\\Dest\\subdir1\\File2', 
"[Errno 13] Permission denied: 'C:\\Work\\subdir1\\File2'")] 
```

在这种情况下，我将不得不从`Gold`目录中复制那些相应的文件。`Gold`有没有一种方法可以通过异常自动从目录中复制相应的文件？像这样说：

```
try:
   shutil.copytree(r'C:\Work',r'C:\Dest')
except:
   << Copy Inaccessible Files from Gold >> 
```

我最初考虑使用`os.walk`, 来单独复制文件。这样，每当我遇到特定文件的异常时，我都可以从 Gold 复制相应的文件。有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:31:14.407

您可以从 shutil.Error 中获取复制失败的文件列表。通过阅读源代码，shutil.Error 包含 (src, dst, why) 三元组。您可以执行以下操作：

```
try:
    shutil.copytree(srcdir, dstdir)
except shutil.Error, exc:
    errors = exc.args[0]
    for error in errors:
        src, dst, msg = error
        # Get the path to the file in Gold dir here from src
        shutil.copy2(goldsrc, dst) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:20:44.880

是的，使用`os.walk`将是正确的方法。

`copytree`是有限的。它并非设计为复杂的复制工具，并且在其文档字符串中也是如此：

```
XXX Consider this example code rather than the ultimate tool. 
```

（此注释已在 Python 3 中删除）

# ios - 在原生 iOS 应用中使用 Facebook SDK 邀请多个朋友

> ID：10493498
> 
> 赞同：4
> 
> 时间：2012-05-08T06:15:32.727
> 
> 标签：ios, facebook, facebook-graph-api, mobile, ios5

我正在使用 FB SDK 允许用户邀请朋友下载我的应用程序。当用户单击邀请按钮时，我正在创建一个 FB 请求。动作如下所示：

```
- (IBAction)inviteButtonPressed:(UIButton *)sender {
// create a dictionary for our dialog's parameters
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithCapacity: 7];

// set the frictionless requests parameter to "1"
[params setObject: @"1" forKey:@"frictionless"];
[params setObject: @"Test Invite" forKey:@"title"];
[params setObject:appID forKey:@"app_id"];

[params setObject: @"Test" forKey: @"message"];
if([friendsToInvite count] != 0){

    [params setObject:friendsToInvite forKey:@"to"];

    NSLog(@"%@", params);
}

// show the request dialog
[facebook dialog:@"apprequests" andParams:params andDelegate: nil];

} 
```

问题是我正在为@“to”属性的对象传递一组朋友（由用户选择）。这就是 Facebook 库尝试解析 @"to" 对象的方式（来自 Facebook 的代码）：

```
 id fbid = [params objectForKey:@"to"];
        if (fbid != nil) {
            // if value parses as a json array expression get the list that way
            SBJsonParser *parser = [[[SBJsonParser alloc] init] autorelease];
            id fbids = [parser objectWithString:fbid];
            if (![fbids isKindOfClass:[NSArray class]]) {
                // otherwise seperate by commas (handles the singleton case too)
                fbids = [fbid componentsSeparatedByString:@","];
            }                
            invisible = [self isFrictionlessEnabledForRecipients:fbids];             
        } 
```

我的代码给了我这个错误：

```
-[__NSArrayM UTF8String]: unrecognized selector sent to instance 0x1aea00
 2012-05-08 01:48:29.958 shmob[2976:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM UTF8String]: unrecognized selector sent to instance 0x1aea00' 
```

当我将单个应用程序 ID 硬编码到 @"to" 对象中时，它可以工作！你知道如何邀请 Facebook 好友列表吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T04:14:00.650

找到了修复：

我使用 componentsjoinedbystring 将数组转换为字符串，然后将字符串设置为 @"to" 属性的参数。像这样：

```
if([friendsToInvite count] != 0){

    NSString * stringOfFriends = [friendsToInvite componentsJoinedByString:@","];

    [params setObject:stringOfFriends forKey:@"to"];

    NSLog(@"%@", params);
}

// show the request dialog
[facebook dialog:@"apprequests" andParams:params andDelegate: nil]; 
```

奇迹般有效。

# python - 在python函数中缓存

> ID：10493500
> 
> 赞同：0
> 
> 时间：2012-05-08T06:15:38.100
> 
> 标签：python

这似乎是一些测试问题。如果您考虑这个使用缓存参数作为第一个参数的函数

```
def f(cache, key, val): 
    cache[key] = val
    # insert some insanely complicated operation on the cache
    print cache 
```

现在创建一个字典并像这样使用该函数：

```
c = {}
f(c,"one",1)
f(c,"two",2) 
```

这似乎按预期工作（即添加到 c 字典），但它实际上是在传递该引用还是在做一些低效的复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:48:13.073

传递给缓存的字典不会被复制。只要`cache`变量没有在函数内部**反弹**，它就保持同一个对象，对它所引用的字典的修改会影响外部的字典。

在这种情况下甚至不需要返回`cache`（实际上示例代码也不需要）。

如果`f`是类字典对象上的方法可能会更好，以便在概念上更清楚。

如果使用该`id()`函数（内置，不需要导入），您可以获得任何对象的唯一标识符。您可以使用它来确认您确实在处理同一个对象而不是任何类型的副本。

# bash - 制表符完成时如何防止bash完成替换字符

> ID：10493505
> 
> 赞同：16
> 
> 时间：2012-05-08T06:16:18.863
> 
> 标签：bash, bash-completion

我正在为一个与 curl 共享文件上传语义的工具构建一个 bash 完成脚本。

使用 curl，您可以执行以下操作：

curl -F var=@文件

上传文件。

我的应用程序具有类似的语义，我希望能够在按下“@”后显示可能的文件。不幸的是，事实证明这很困难：

```
cur="${COMP_WORDS[COMP_CWORD]}"
prev="${COMP_WORDS[COMP_CWORD-1]}"
if [[ "$cur" == @* && "$prev" == '=' ]]; then
    COMPREPLY=( $(compgen -f ${cur:1}) )
    return 0
fi 
```

因此，如果命令（到目前为止）以：

```
abc=@ 
```

将显示当前目录中的文件。

```
 var=@/usr/                                                                                                                       
 /usr/bin      /usr/games 
```

问题是如果我真的点击标签来完成，'@'就会消失！

```
 var=/usr/bin 
```

所以看起来 bash 用选项卡 COMPREPLY 替换了整个当前单词。

避免这种情况的唯一方法是这样做：

```
 COMPREPLY=( $(compgen -f ${cur:1}) )
        for (( i=0; i<${#COMPREPLY[@]}; i++ )); 
        do 
            COMPREPLY[$i]='@'${COMPREPLY[$i]} 
        done 
```

但是现在选项卡完成看起来很奇怪，至少可以说：

```
@/usr/bin      @/usr/games 
```

无论如何显示正常的文件选项卡完成（没有'@'前缀）但在点击选项卡时保留'@'？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T15:30:08.150

所以，这引起了我的兴趣，所以我一直在阅读 bash 完成源（可在 /etc/bash_completion 获得）。

我遇到了这个变量：`${COMP_WORDBREAKS}`，它似乎允许控制用于分隔单词的字符。

我也遇到了这个功能，`_get_cword`和互补的`_get_pword`，都被推荐用于代替`${COMP_WORDS[COMP_CWORD]}`和`${COMP_WORDS[COMP_CWORD-1]}`。

所以，把所有这些放在一起，我做了一些测试，这就是我想出的：这似乎对我有用，至少，希望它也对你有用：

```
# maintain the old value, so that we only affect ourselves with this
OLD_COMP_WORDBREAKS=${COMP_WORDBREAKS}
COMP_WORDBREAKS="${COMP_WORDBREAKS}@"

cur="$(_get_cword)"
prev="$(_get_pword)"

if [[ "$cur" == '=@' ]]; then
    COMPREPLY=( $(compgen -f ${cur:2}) )

    # restore the old value
    COMP_WORDBREAKS=${OLD_COMP_WORDBREAKS}
    return 0
fi

if [[ "$prev" == '=@' ]]; then
    COMPREPLY=( $(compgen -f ${cur}) )

    # restore the old value
    COMP_WORDBREAKS=${OLD_COMP_WORDBREAKS}
    return 0

fi 
```

现在，我承认拆分`if`箱有点脏，肯定有更好的方法，但我需要更多的咖啡因。

此外，无论它对你有价值，我还发现了`-P <prefix>`to 的参数`compgen`，这将阻止你在调用之后遍历`$COMPREPLY[*]}`数组`compgen`，就像这样

```
COMPREPLY=( $(compgen -P @ -f ${cur:1}) ) 
```

不过，面对完整的解决方案，这有点多余。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T23:29:22.687

尝试这个 ....

```
function test
{
  COMPREPLY=()
  local cur="${COMP_WORDS[COMP_CWORD]}"
  local opts="Whatever sort of tabbing options you want to have!"
  COMPREPLY=($(compgen -W "${opts}" -- ${cur}))
}
complete -F "test" -o "default" "test"
# complete -F "test" -o "nospace" "sd" ## Use this if you do not want a space after the completed word 
```

# android - 如何在显示软键盘时保持所有字段和文本可见

> ID：10493506
> 
> 赞同：5
> 
> 时间：2012-05-08T06:16:38.793
> 
> 标签：android, xml, layout, keyboard

我正在这个登录屏幕中工作，我希望在显示 IME 时调整所有字段、文本和按钮的大小。我已经在 androidManifest.xml 上使用了 android:windowSoftInputMode="adjustResize"，但是我仍然在其他元素下面得到了一些元素。

TextView “Cadastre Agora”（id= cadastrar）是否仍然被虚拟键盘覆盖并不重要。但是，我至少希望 EditTexts、它们的 TextViews 和按钮是可见的。

我发现这个悬而未决的问题可能是一个有趣的方法：http://stackoverflow.com/questions/6484024/soft-keyboard-keep-one-view-stationary-while-moving-other

感谢您的帮助！

没有 IME 的屏幕：http: [//imageshack.us/photo/my-images/138/semttulo2mr.png/](http://imageshack.us/photo/my-images/138/semttulo2mr.png/)

带有 IME 的屏幕（TextView1 变为隐藏）：http: [//imageshack.us/photo/my-images/404/semttulo3xw.png/](http://imageshack.us/photo/my-images/404/semttulo3xw.png/)

Stackoverflow 抱怨我的代码格式，所以我在这里上传了 xml 文件：https://rapidshare.com/files/1767398103/login.xml 而且我不能发布超过 2 个链接，这就是我在其中放置空格的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:48:28.287

在这种情况下，我会说您的初始布局（没有显示键盘）已经有问题。鉴于您正在创建看起来纯粹是登录屏幕的内容，将所有控件放在屏幕的上半部分并在用户访问页面时自动显示键盘是可以接受的。这使用户的体验更快，并且您不必想出灵活的布局。

但是，如果您想尝试使布局在两个视图中都起作用，则需要将间距更改为控件之间的动态。

例如：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width = "fill_parent"
    android:layout_height = "fill_parent"
    android:orientation="vertical"
    >
    <Space 
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_weight="1">
        <!-- Username Controls here -->
    <Space 
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_weight="1">
        <!-- Password Controls here -->
    <Space 
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_weight="1">
        <!-- Login Button here -->
    <Space 
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_weight="1">
        <!-- TextView here -->
    <Space 
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_weight="1">
</LinearLayout> 
```

为了使其正常工作，必须从控件中删除所有垂直填充，文本框标签之间的填充除外。

# unity3d - Unity iPhone 应用程序大小太大

> ID：10493507
> 
> 赞同：8
> 
> 时间：2012-05-08T06:16:45.103
> 
> 标签：unity3d

我为 iPhone 构建了一个统一游戏，其应用大小为 288 MB。所以尝试了一个**空的统一项目**。最初它生成大小为 33 MB 的应用程序。但在谷歌搜索后，我可以将其减少到**19.2 MB**。

我所做的更改： 1\. 发布版本而不是调试版本。2\. 目标设备：仅限 iPhone（在 Unity 设置中）。3.目标平台：armv7

unity的设备日志显示：

构建
mscorlib.dll中包含的 Mono 依赖项

纹理 0.0 kb 0.0%
网格 0.0 kb 0.0%
动画 0.0 kb 0.0%
声音 0.0 kb 0.0%
着色器 0.0 kb 0.0%
其他资源 0.0 kb 0.0%
级别 6.7 kb 0.3%
脚本 0.0 kb 0.0%
包含的 DLL 2.4 mb 99.4%
文件头kb 0.3%
完整大小 2.4 mb 100.0%

我的应用程序的包内容具有大小为**13.3 MB**和数据 5.7 MB的**unix 可执行文件。**

 **我必须在统一设置或 Xcode 中更改什么以进一步减小应用程序大小吗？请帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T12:06:42.203

如果您拥有 Unity Pro iPhone Pro 许可证，您可以更改剥离级别以*使用 micro mscorlib*。阅读[优化内置 iOS 播放器的大小以](http://unity3d.com/support/documentation/Manual/iphone-playerSizeOptimization.html)获取更多信息。

在 XCode 中，GCC 4.2*代码生成/优化级别*应该是*最快、最小 (-Os)* - Unity3d 通常会为您的发布版本做到这一点。

另一个兴趣点是纹理、音频和其他资源。如果您不需要 iPad 分辨率，您也许可以减小图像的大小。检查您的所有图像是否符合 POT 规则（二的幂），即 128x128、256x256，...以便 Unity3D 可以使用 PVRTC 硬件压缩来构建 iOS 播放器。非 POT 图像最终将成为未压缩的真彩色图像。**

# c# - 单元测试中的重复代码

> ID：10493510
> 
> 赞同：11
> 
> 时间：2012-05-08T06:16:45.853
> 
> 标签：c#, unit-testing, nunit, moq, autofixture

我们发现自己在许多测试用例中编写重复的夹具/模拟设置 - 例如这种情况：

```
var fixture = new Fixture().Customize(new AutoMoqCustomization());
var encodingMock = fixture.Freeze<Mock<IEncodingWrapper>>();
var httpClientMock = fixture.Freeze<Mock<IHttpWebClientWrapper>>();
var httpResponseMock = fixture.Freeze<Mock<IHttpWebResponseWrapper>>();
var httpHeaderMock = fixture.Freeze<Mock<IHttpHeaderCollectionWrapper>>();
var etag = fixture.CreateAnonymous<string>();
byte[] data = fixture.CreateAnonymous<byte[]>();
Stream stream =  new MemoryStream(data);

encodingMock.Setup(m => m.GetBytes(It.IsAny<string>())).Returns(data);
httpHeaderMock.SetupGet(m => m[It.IsAny<string>()]).Returns(etag).Verifiable();
httpClientMock.Setup(m => m.GetResponse()).Returns(httpResponseMock.Object);
httpResponseMock.Setup(m => m.StatusCode).Returns(HttpStatusCode.OK);
httpResponseMock.SetupGet(m => m.Headers).Returns(httpHeaderMock.Object);
httpResponseMock.Setup(m => m.GetResponseStream()).Returns(stream); 
```

根据测试应该是自包含且从头到尾可读的想法，我们不使用神奇的设置/拆卸方法。

我们能以任何方式（AutoFixture 自定义、辅助方法）减少这些测试的“繁重工作”吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-08T08:10:36.263

越来越[多的面向对象软件](https://rads.stackoverflow.com/amzn/click/com/0321503627)(GOOS) 提出了一个很好的建议：如果一个测试很难编写，它是关于被测系统 (SUT) 的 API 的反馈。考虑重新设计 SUT。在这个特定示例中，看起来 SUT 至少有四个依赖项，这可能表明违反了[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。是否可以[重构为 Facade Services](http://blog.ploeh.dk/2010/02/02/RefactoringToAggregateServices.aspx)？

来自 GOOS 的另一个很好的建议是

*   模拟应该只用于[命令](http://en.wikipedia.org/wiki/Command-query_separation)
*   存根应该用于[查询](http://en.wikipedia.org/wiki/Command-query_separation)

在上面的示例中，您似乎需要为真正属于查询的方法进行大量 Moq 设置。这也表明测试气味。有没有违反[得墨忒耳法则的地方？](http://en.wikipedia.org/wiki/Law_of_Demeter)是否有可能切断方法链？

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-08T07:13:42.883

您可以创建一个复合定制，该定制将使用所有包含的定制来定制灯具。

```
public class HttpMocksCustomization : CompositeCustomization
{
    public HttpMocksCustomization()
        : base(
            new AutoMoqCustomization(),
            new HttpWebClientWrapperMockCustomization(),
            new HttpWebResponseWrapperMockCustomization()
            // ...
            )
    {
    }
} 
```

每个自定义可以定义如下：

```
public class HttpWebClientWrapperMockCustomization : ICustomization
{
    public void Customize(IFixture fixture)
    {
        var mock = new Mock<IHttpWebClientWrapper>();
        mock.Setup(m => m.GetResponse()).Returns(httpResponseMock.Object);

        fixture.Inject(mock);
    }
}

public class HttpWebResponseWrapperMockCustomization : ICustomization
{
    public void Customize(IFixture fixture)
    {
        var mock = new Mock<IHttpWebResponseWrapper>();
        mock.Setup(m => m.StatusCode).Returns(HttpStatusCode.OK);

        fixture.Inject(mock);
    }
}

// The rest of the Customizations. 
```

然后在测试方法中你可以这样做：

```
var fixture = new Fixture().Customize(new HttpMocksCustomization()); 
```

这样，当您请求 Mock 实例时，您不必重复设置步骤。我们之前自定义的那个会被返回：

```
var httpClientMock = fixture.Freeze<Mock<IHttpWebClientWrapper>>(); 
```

* * *

但是，**如果您使用 xUnit.net**，事情可以进一步简化。

您可以创建一个 AutoDataAttribute 派生类型，以提供由 AutoFixture 生成的自动生成的数据样本，作为 xUnit.net 的 Theory 属性的扩展：

```
public class AutoHttpMocksDataAttribute : AutoDataAttribute
{
    public AutoHttpMocksDataAttribute()
        : base(new Fixture().Customize(new HttpMocksCustomization()))
    {
    }
} 
```

然后，在您的测试方法中，您可以将 Mocks 作为参数传递：

```
[Theory, AutoHttpMocksData]
public void MyTestMethod([Freeze]Mock<IHttpWebClientWrapper> httpClientMock, [Freeze]Mock<IHttpWebResponseWrapper> httpResponseMock)
{
    // ...
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T06:22:03.727

如果您的所有测试都使用此代码，则应将其放在设置/拆卸方法中。如果您的设置/拆卸方法有些复杂，那没关系，只要您的所有单元测试都依赖于它。这肯定比在每次测试中复制所有复杂的东西要好。当我阅读测试时，我知道 setup 和 teardown 是每个测试的一部分，所以我认为你也不会失去任何可读性。要避免的事情是在设置中包含并非每个测试都需要的东西。这会造成令人困惑的情况，即您设置的方法不能很好地匹配所有测试。理想情况下，您的设置方法应 100% 应用于每个测试。

如果您的所有测试中都没有使用共享代码，请将共享代码提取到辅助函数中。编写好的测试代码就像编写任何其他好的代码一样，并且适用相同的原则。

# sql - 如何在 OUTER JOIN 语句中编写子查询

> ID：10493512
> 
> 赞同：35
> 
> 时间：2012-05-08T06:16:58.520
> 
> 标签：sql

我想加入两个表 CUSTMR 和 DEPRMNT。

我需要的是： LEFT OUTER JOIN 内带有子查询的两个或多个表的 LEFT OUTER JOIN，如下所示：

表：CUSTMR，DEPRMNT

查询为：

```
SELECT
    cs.CUSID
    ,dp.DEPID
FROM
    CUSTMR cs
        LEFT OUTER JOIN (
            SELECT
                    dp.DEPID
                    ,dp.DEPNAME
                FROM
                    DEPRMNT dp
                WHERE
                    dp.DEPADDRESS = 'TOKYO'
        )
            ON (
                dp.DEPID = cs.CUSID
                AND cs.CUSTNAME = dp.DEPNAME
            )
WHERE
    cs.CUSID != '' 
```

这里的子查询是：

```
SELECT
    dp.DEPID, dp.DEPNAME
FROM
    DEPRMNT dp
WHERE
    dp.DEPADDRESS = 'TOKYO' 
```

是否可以在 LEFT OUTER JOIN 中编写这样的子查询？

在我的 DB2 数据库上运行此查询时出现错误。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-08T06:24:43.787

您需要子选择上的“相关 id”（“AS SS”东西）来引用“ON”条件下的字段。在子选择中分配的 id 在连接中不可用。

```
SELECT
       cs.CUSID
       ,dp.DEPID
FROM
    CUSTMR cs
        LEFT OUTER JOIN (
            SELECT
                    DEPID
                    ,DEPNAME
                FROM
                    DEPRMNT 
                WHERE
                    dp.DEPADDRESS = 'TOKYO'
        ) ss
            ON (
                ss.DEPID = cs.CUSID
                AND ss.DEPNAME = cs.CUSTNAME
            )
WHERE
    cs.CUSID != '' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:34:32.630

我认为在这种情况下您不必使用子查询。您可以直接将 DEPRMNT 表左外连接。

使用 Left Outer Join 时，不要在 where 条件下使用 join 的 RHS 表中的列，会得到错误的输出

# ios - 将核心数据与服务器端数据同步的最佳方式？

> ID：10493514
> 
> 赞同：3
> 
> 时间：2012-05-08T06:17:16.040
> 
> 标签：ios, core-data

我认为这是一种非常常见的情况，但由于我是 iOS 编程的新手，我不确定最佳的编码方式。

**概要：**

我在服务器上有数据，iPhone 应用程序可以通过 REST 服务检索这些数据。在服务器端，数据是具有外键（整数 id 号）的对象。

我将通过 REST 检索到的数据存储在 Core Data 中。托管对象具有“objId”属性，以便我可以在其余代码中唯一标识托管对象。

我的应用程序必须始终反映服务器数据。

在向服务器发出的后续请求中：

*   有些对象可能不会返回，它们已在服务器上被删除——在这种情况下，我需要从 Core Data 中删除相应的对象——这样我才能正确反映服务器的状态。

*   一些对象的属性发生了变化，因此相应的托管对象需要用新数据进行更新。

**我的解决方案 - 并向您提问**

为了在我的应用程序中运行，我做了最简单的解决方案，删除 Core Data 中的所有对象，然后添加所有新对象，使用最新的服务器端数据创建。

我不认为这是处理它的最佳方法:) 随着我的应用程序的进展，我现在想将我的 tableview 与 NSFetchedResultsController 链接起来，并且已经意识到我删除所有内容并重新添加的方法是行不通的工作了。

将 Core Data 与服务器端数据同步的可靠方法是什么？

我是否需要为从服务器返回的每个对象 ID 发出获取请求，然后用新数据更新对象？

然后遍历核心数据中的所有对象，看看哪些没有更新，然后删除那些？

这是最好的方法吗？对 Core Data 中的每个对象进行 fetch 似乎有点贵，仅此而已。

伪代码适用于任何答案:)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:31:19.887

好吧，考虑你的下载。首先，您应该在后台线程中执行此操作（如果没有，有很多关于如何执行此操作的 SO 帖子）。

我建议你先实现有意义的东西，然后，在你可以从运行的 Instruments 中获得有效的性能数据之后，再考虑性能优化。当然，在“简单”的性能东西上使用一些常识（你的设计可以很容易地处理大的东西）。

无论如何，从在线资源中获取您的数据，然后，对于获取的每个对象，使用“唯一对象 ID”从核心数据中获取对象。您知道只有一个具有该 ID 的对象，因此您可以在 fetch 请求中将 fetchLimit 设置为 1。您还可以将“对象 ID”属性配置为数据库中的 INDEX。这样，您可以从底层数据库中获得最快的搜索，并且一旦找到您的一个对象，它就会停止查找。这应该很活泼。

现在你有了你的对象。更改任何必要的属性。保存，冲洗并重复。

此外，出于多种原因，您可能想知道对象上次更新的时间。我建议为每次更改对象时随当前时间更改的每个对象添加一个时间戳。这也将有助于删除对象。由于您的在线数据库不会告诉您哪些对象被删除，因此您必须通过某种方式知道某个项目是“旧的并且不再需要”。

一个简单的方法是记住您开始更新的时间。处理完下载的所有对象后，您现在可以找到从在线数据库中删除的所有对象。基本上，在您开始更新之前具有“最后一次更新”时间戳的任何对象都应该被删除（因为它们没有在最后一次更新中添加或修改）。您还可以在该字段上为数据库编制索引，这样可以更快地找到这些对象 - 除非您的数据库很大，否则我会等着看 Instruments 对此有什么看法。

# jquery - 使用 Jquery 的嵌套表排序顺序

> ID：10493519
> 
> 赞同：0
> 
> 时间：2012-05-08T06:17:49.080
> 
> 标签：jquery, asp.net

我正在尝试使用 Jquery.inner html 重新排序内部 html 表行，其中包含嵌套表。我需要在子表中重新排序子表行，在父表本身中重新排序父表行

我的表层次结构是指以下链接 [http://jsfiddle.net/PcDPr/](http://jsfiddle.net/PcDPr/)

我也使用了嵌套表插件..没有什么帮助..我没有得到预期的结果。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:21:37.143

Hiya**示例演示**：http : [//jsfiddle.net/T4Vh4/](http://jsfiddle.net/T4Vh4/)

首先，您`<th>`的示例中缺少标签。我为您提供了一个工作示例，以便您可以将表排序器的实现与演示进行比较。:))

请让我知道这是否是您要找的东西！

好读：[http ://tablesorter.com/docs/](http://tablesorter.com/docs/)

希望这会有所帮助并有一个不错的选择，如果有帮助，请不要忘记接受答案:)！

**HTML**

```
<table class="tablesorter">
    <thead>
        <tr>
            <th>Make</th>
            <th>Model</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Honda</td>
            <td>Accord</td>
        </tr>
        <tr class="expand-child">
            <td colspan="2" style="padding: 0 30px 0 30px;">
                <table class="tablesorter-child">
                    <thead>
                        <tr>
                            <th>Doors</th>
                            <th>Colors</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Honda 2-Door</td>
                            <td>Honda Red</td>
                        </tr>
                        <tr>
                            <td>Honda 4-Door</td>
                            <td>Honda Blue</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>Toyota</td>
            <td>Camry</td>
        </tr>
        <tr class="expand-child">
            <td colspan="2" style="padding: 0 30px 0 30px;">
                <table class="tablesorter-child">
                    <thead>
                        <tr>
                            <th>Doors</th>
                            <th>Colors</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Toyota 2-Door</td>
                            <td>Toyota Yellow</td>
                        </tr>
                        <tr>
                            <td>Toyota 4-Door</td>
                            <td>Toyota Green</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>
​ 
```

**jQuery代码**

```
$(document).ready(function() 
{ 
    $("table").tablesorter({selectorHeaders: '> thead > tr > th'}); 
});

​ 
```

# java - 如何在标准序列化中序列化不可序列化的基类？

> ID：10493521
> 
> 赞同：8
> 
> 时间：2012-05-08T06:17:50.157
> 
> 标签：java, serialization

我无法控制基类的源代码，那么，如何在子类上使用标准序列化呢？

在这个例子中，字段`a`根本没有被序列化，尽管 B 是可序列化的：

// 一个.jar

```
class A {
    int a;
} 
```

// b.jar

```
class B
        extends A
        implements Serializable {
    int b;
}

public class HelloWorldApp {

    public static void main(String[] args)
            throws Exception {
        B b = new B();
        b.a = 10;
        b.b = 20;

        ByteArrayOutputStream buf = new ByteArrayOutputStream();

        ObjectOutputStream out = new ObjectOutputStream(buf);
        out.writeObject(b);
        out.close();

        byte[] bytes = buf.toByteArray();
        ByteArrayInputStream _in = new ByteArrayInputStream(bytes);
        ObjectInputStream in = new ObjectInputStream(_in);
        B x = (B) in.readObject();
        System.out.println(x.a);
        System.out.println(x.b);
    }

} 
```

输出：

```
0
20 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T06:27:25.133

你不能！
字段`a`不会被序列化！
解决方法：实现您的自定义序列化。您应该实现`Externalizable`接口和`writeExternal, readExternal`方法。在这些方法中，您可以写入和读取`a`字段的值。

# vba - 使用来自另一个单元格的超链接匹配/替换单元格数据

> ID：10493522
> 
> 赞同：-2
> 
> 时间：2012-05-08T06:18:05.320
> 
> 标签：vba, excel

我正在做很多手工工作，我尝试找到相关的宏，但不幸的是找不到任何宏。

基本上，我的 Excel 表有 4 列（A、B、C、D）。在对当月的公司文件进行大量筛选后，我在 A 列和 B 列中留下了数据（我删除了高于和低于我的范围的某些限制，我删除了与我所在行业无关的数据等）。

*   A列有公司名称（大写，小写，有时组合）

*   B列有日期（我现在按月做）

准备好这两列后，我会从网站运行网络查询，该查询会下载整个月提交给 SEC 的文件以及超链接。

*   C 列的公司名称带有 HYPERLINKS（不一定与 Col A 中的大小写格式相同）

*   D列有日期（我每月下载，所以这将是同一个月）

C 列的数据比 A 列多得多；它也有所有不受欢迎的公司的超链接，并且该网站上的搜索无法比目前的程度更加定制。

Col D 比 Col B 长得多，因为提交的文件更多

例如：

```
Col A   Col B        Col C          Col D
                     (Hyperlinks)
Abc     3/1/2008     AAA            3/1/2008
BCD     3/1/2008     AAB            3/1/2008
BCD     3/2/2008     AAC            3/1/2008 
cDE     3/2/2008     ABC            3/1/2008
DeF     3/3/2008     ABE            3/1/2008
                     BCD            3/1/2008
                     ABC            3/2/2008
                     BCD            3/2/2008
                     CDE            3/2/2008
                     AAA            3/3/2008
                     AAF            3/3/2008
                     DEF            3/3/2008 
```

我需要 Col C 中的公司用其超链接替换 ​​Col A，前提是它们在同一日期（Col B = Col D），无论大小写如何（公司名称是唯一的）。

Col A 和 C 中公司的顺序不一样，即使我为这些列排序“AZ”，因为 Col C 中不需要的公司数据。C 列比 A 长得多。

每个月有 1200 到 1500 份文件，我正在手动检查并按日期手动替换。我必须这样做3年，过去10天我仍然在同一个月。还有更多：我必须打开每个文件并阅读并更新备注栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:20:34.707

我相信下面的代码可以满足您的需求。

我创建了此工作表以匹配您的图像：

![图像前](../Images/96cd03f24b8e8707f28963343d06d127.png)

下面的宏将工作表更改为：

![在此处输入图像描述](../Images/85668fe35c424ad64b6e4668d883caee.png)

C 列和 D 列现在是冗余的，因为这些列中的每个值都已移至 F 列和 G 列。

希望这可以帮助。

**编辑**

Meena 针对她的数据运行宏，但它没有匹配所有应该匹配的值。她通过电子邮件向我发送了一份她的数据副本。在检查了她的数据后，我对下面的宏进行了三处更改：

*   Meena 的工作表没有标题行。我使用一个常量来指定第一个数据行。我已将值从 2 更改为 1。
*   许多参考值都有尾随空格。在比较之前，我使用 TRIM() 删除了那些尾随空格。
*   该宏创建两个新的数据列。这些保留在默认宽度，因此如果值很长，它将换行并需要几行。我现在添加了将列宽从源列复制到目标列的代码。

.

```
 Option Explicit
  ' If the columns have to be moved, update these constants
  ' and the code will change to match.
  Const ColRefCompany As Long = 1
  Const ColRefDate As Long = 2
  Const ColWebCompany As Long = 3
  Const ColWebDate As Long = 4
  Const ColSaveCompany As Long = 6
  Const ColSaveDate As Long = 7
  Const ColLastLoad As Long = 4
  Const RowDataFirst As Long = 1        ' No header row
Sub CopyWebValuestoSaveColumns()

  Dim CellValue() As Variant
  Dim ColCrnt As Long
  Dim Rng As Range
  Dim RowRefCrnt As Long
  Dim RowSave() As Long
  Dim RowSaveCrnt As Long
  Dim RowWebCrnt As Long
  Dim RowLast As Long

  ' Find the last cell with a value
  With Worksheets("Sheet1")
    Set Rng = .Cells.Find(What:="*", After:=.Range("A1"), LookIn:=xlFormulas, _
                          LookAt:=xlWhole, SearchOrder:=xlByRows, _
                          SearchDirection:=xlPrevious)

   If Rng Is Nothing Then
     Call MsgBox("Sheet is empty", vbOKOnly)
     Exit Sub
   End If
   RowLast = Rng.Row
   ' Load all reference and web values to CellValue.  Searching an array
   ' is faster than searching the worksheet and hyperlinks are converted
   ' to their display values which gives an easier comparison.
   ' Note for arrays loaded from a worksheet, dimension one is for rows
   ' and dimension two is for columns.
   CellValue = .Range(.Cells(1, 1), .Cells(RowLast, ColLastLoad)).Value

   ' RowSave() will record the position in the save columns of the values
   ' in the web columns.  Allow for one entry per row in web list.
   ReDim RowSave(1 To RowLast)

   RowRefCrnt = RowDataFirst

   ' Set web company names to lower case and remove leading and trailing
   ' spaces ready for matching
   For RowWebCrnt = RowDataFirst To RowLast
     CellValue(RowWebCrnt, ColWebCompany) = _
                               Trim(LCase(CellValue(RowWebCrnt, ColWebCompany)))
   Next

   Do While True
     If CellValue(RowRefCrnt, ColRefCompany) = "" Then
       ' Empty cell in reference company column.  Assume end of list
       Exit Do
     End If
     ' This loop makes no assumptions about the sequence of the
     ' Reference and Web lists.  If you know their sequences match or
     ' if you can sort the two pairs of columns, this loop could be
     ' made faster
     ' Set reference company name to lcase and remove leading and trailing
     ' spaces ready for matching
     CellValue(RowRefCrnt, ColRefCompany) = _
                              Trim(LCase(CellValue(RowRefCrnt, ColRefCompany)))

     For RowWebCrnt = RowDataFirst To RowLast
       If CellValue(RowRefCrnt, ColRefCompany) = _
                                      CellValue(RowWebCrnt, ColWebCompany) And _
          CellValue(RowRefCrnt, ColRefDate) = _
                                          CellValue(RowWebCrnt, ColWebDate) Then
         ' Reference and web values match.
         ' Record that the web values from row RowWebCrnt
         ' are to be copied to row RowRefCrnt
         RowSave(RowWebCrnt) = RowRefCrnt
         Exit For
       End If
     Next
     RowRefCrnt = RowRefCrnt + 1
   Loop
   RowSaveCrnt = RowRefCrnt     ' First row in save column that is available
                                ' for unused web values
   For RowWebCrnt = RowDataFirst To RowLast
     If RowSave(RowWebCrnt) = 0 Then
       ' The web values on this row has not been matched to reference values.
       ' Record these web values are to be moved to the next available row
       ' in the save columns
       RowSave(RowWebCrnt) = RowSaveCrnt
       RowSaveCrnt = RowSaveCrnt + 1
     End If
   Next

   .Columns(ColSaveCompany).ColumnWidth = .Columns(ColWebCompany).ColumnWidth
   .Columns(ColSaveDate).ColumnWidth = .Columns(ColWebDate).ColumnWidth

   ' Copy values from web columns to save columns
   For RowWebCrnt = RowDataFirst To RowLast
     .Range(.Cells(RowWebCrnt, ColWebCompany), _
            .Cells(RowWebCrnt, ColWebDate)).Copy _
                       Destination:=.Cells(RowSave(RowWebCrnt), ColSaveCompany)
   Next

  End With

End Sub 
```

# mysql - 从 TOAD 但不是从 myphpadmin 或从 mysql 控制台部署的 mysql 触发代码

> ID：10493523
> 
> 赞同：0
> 
> 时间：2012-05-08T06:18:17.143
> 
> 标签：mysql, phpmyadmin, mysql-management

我有一个非常简单的触发器。我从**Toad for mysql**工具创建它并部署它并且它的工作完美没有任何问题。当我把它交给管理员在生产服务器中部署时，他们遇到了错误。

**phpmyadmin 错误：**

> # 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法使用
> 
> 在第 4 行的 '' 附近

**Mysql 控制台报错：**

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“END”附近使用正确的语法

当被问到时，他们正在从 phpmyadmin 运行代码，并且他们试图从 mysql 控制台运行他们得到错误

为什么同样的事情是从 GUI 工具运行而不是从 webtool 或控制台运行，这真的令人沮丧和恼火。来自三种不同工具的 3 种不同行为

然后我尝试了同样的事情，我也得到了错误。我很惊讶为什么

```
DROP TRIGGER IF EXISTS TRG_ ;
CREATE TRIGGER TRG_ BEFORE INSERT ON users FOR EACH ROW
BEGIN

  DECLARE X INTEGER;
  SELECT COUNT(*) into X FROM users;

  IF X >= 16 THEN -- CHANGE THIS NUMBER 
    SIGNAL SQLSTATE '45000'
    SET MESSAGE_TEXT = 'cant create more users';
  END IF;

END; 
```

有人可以告诉我我做错了什么吗？我不确定，但我猜它与我从未理解其目的的**分隔符关键字有关。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:15:49.910

看看这个问题 - [MySQL：如何在触发器中使用分隔符？](https://stackoverflow.com/questions/8154158/mysql-how-do-i-use-delimiters-in-triggers)

在创建触发器等源对象时，您应该使用分隔符。DELIMITER 不是 MySQL 语句，它是控制台命令，许多 MySQL 客户端都支持此命令。您可以在 MySQL 控制台中尝试此代码 -

```
DROP TRIGGER IF EXISTS TRG_ ;

DELIMITER $$

CREATE TRIGGER TRG_ BEFORE INSERT ON users FOR EACH ROW
BEGIN

  DECLARE X INTEGER;
  SELECT COUNT(*) INTO X FROM users;

  IF X >= 16 THEN -- CHANGE THIS NUMBER 
    SIGNAL SQLSTATE '45000'
    SET MESSAGE_TEXT = 'cant create more users';
  END IF;

END$$

DELIMITER ; 
```

据我所知，一些旧的 phpmyadmin 版本不支持分隔符。

# mysql - 使用 LIKE 删除重复行 GROUP BY

> ID：10493525
> 
> 赞同：0
> 
> 时间：2012-05-08T06:18:21.670
> 
> 标签：mysql, sql, json, group-by, duplicate-removal

我在数据库（mysql）中有一个字符串，如下所示：

```
{"StateId":73,"CallTime":"\/Date(1336365498912+0500)\/","CallId":"1336365489.14157","Target":"agi://127.0.0.1"}},"Profile":{"$type":"DataWriter.DbProfile, DataWriterObjects","Name":"DataService","Provider":"mssql","ConnectionString":"Data Source=localhost\\mydb; Database=mydb; User Id=sa; Password=admin;"}} 
```

该字符串是一个包含多个字段的 JSON 对象。问题是我有多个要从数据库中删除的重复行。如果**CallId**和**StateId**相同但**CallTime**不同，则将一行视为重复。所以首先我想获取那些具有相同**CallId**并忽略**CallTime**差异的行的重复列表（GROUP BY） 。下面的记录与第一个具有不同的**CallTime但相同的****CallId**，因此它被认为是重复的（基本上不需要考虑**CallTime**重复）

```
{"StateId":73,"CallTime":"\/Date(1336365498913+0500)\/","CallId":"1336365489.14157","Target":"agi://127.0.0.1"}},"Profile":{"$type":"DataWriter.DbProfile, DataWriterObjects","Name":"DataService","Provider":"mssql","ConnectionString":"Data Source=localhost\\mydb; Database=mydb; User Id=sa; Password=admin;"}} 
```

那么如何进行 GROUP BY 呢？基本上 GROUP BY 中的所有内容都应该匹配忽略**CallTime**值。

表结构为

```
mysql> describe Statements;

+------------+-------------+------+-----+---------+----------------+
| Field      | Type        | Null | Key | Default | Extra          |
+------------+-------------+------+-----+---------+----------------+
| SequenceId | bigint(10)  | NO   | PRI | NULL    | auto_increment |
| Profile    | varchar(32) | YES  | MUL | NULL    |                |
| CacheItem  | text        | NO   |     | NULL    |                |
+------------+-------------+------+-----+---------+----------------+ 
```

之后，我想删除重复项。有人帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:26:50.637

我认为您的数据库不够原子，您可能必须将 JSON 字符串拆分为单独的字段

# javascript - 在 document.write 中用于带有属性的标签的正确语法是什么？

> ID：10493527
> 
> 赞同：0
> 
> 时间：2012-05-08T06:18:27.613
> 
> 标签：javascript, document.write

我在 javascript 的 document.write 方法中使用以下代码：

```
 <script type="text/javascript">
      document.write("<font color="blue">["+time()+"]</font>");
    </script> 
```

但这似乎不起作用。请指导我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:21:54.803

这个问题与 HTML 没有直接关系，只是与字符串文字在 JavaScript（以及几乎所有其他编程语言）中的工作方式有关。如果要`"`在 JavaScript 字符串中使用由字符分隔的`"`字符，则必须对其进行转义：`\"`. 或者用于`'`分隔字符串或属性值。

```
document.write("<font color=\"blue\">["+time()+"]</font>");
document.write('<font color="blue">['+time()+"]</font>");
document.write("<font color='blue'>["+time()+"]</font>"); 
```

* * *

也就是说，`document.write`通常使用生成 HTML 并不是一个好主意（它只在加载时起作用，通常最好用更可靠的服务器端代码或更可重用的 DOM 操作代替））并且该`font`元素已被弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:27:58.573

```
<script type="text/javascript">
      document.write("<font color=\"blue\">[" + time() + "]</font>");
</script> 
```

或者

```
<script type="text/javascript">
      document.write('<font color="blue">[' + time() + ']</font>');
</script> 
```

请注意，`time`它在 JavaScript 中不作为函数存在——我假设您在上面创建了一个未包含在代码片段中的函数。`document.write`此外，除非您只是在尝试，否则您不应该真正使用任何东西。您可以`console.log`在 Firefox 的 Firebug 或 Safari / Chrome Web Inspector 中测试所有这些，这比全页刷新要快得多。还注意到我如何在标志的两侧添加空格`+`：更容易阅读。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T06:22:24.507

```
var color = 'blue';     
document.write("<font color="+color+">["+time()+"]</font>"); 
```

或者

```
 document.write("<font color='blue'>["+time()+"]</font>"); 
```

# android - 带有 asynctask 的进度对话框

> ID：10493528
> 
> 赞同：5
> 
> 时间：2012-05-08T06:18:32.420
> 
> 标签：android, android-asynctask, progressdialog

我有 3 个类，名为 WebServiceCleint 的类正在扩展`Asynctask`并在`doInBackgrnd()`我传递 url 和我从 web 服务获取数据。但我从另一个名为 VerifyTeacherId 的类的方法中调用它。现在我怎样才能显示进度对话框？？？我应该在哪里写 pg.show 和 pg.dismiss.???

```
public  class WebServiceClient extends AsyncTask<String, Void, String>
{

 private static final String base_path = "http://www.gdaschools.in/";
 protected static final String SLASH = "/";

 private ProgressDialog dialog;
 private Activity activity;

 public WebServiceClient(Activity activity) {
        this.activity = activity;
        this.dialog = new ProgressDialog(activity);
    }

    @Override
     protected void onPreExecute() {
            this.dialog.setMessage("Progress start");
            this.dialog.show();
        }

@Override
protected String doInBackground(String... params) {

    StringBuffer sb = new StringBuffer();
    sb.append(base_path);
    sb.append(params[0]);
    HttpRetriever retrieveResponse = new HttpRetriever();
    retrieveResponse.retrieve(sb.toString());
    return retrieveResponse.getResponseXml();
}

 @Override
protected void onPostExecute(String result) {
     if (this.dialog.isShowing()) {
           this.dialog.dismiss();
     }
}
} 
```

我调用的方法是在另一个名为`SelectOptionActivity`. 方法是

```
public void verifyTeacherId(View view)
{
    teacherIdString = TeacherId.getText().toString().trim();

    clientThread = new WebServiceClient(SelectOptionActivity.this);
    clientThread.execute("teacher/" + teacherIdString);     

    try 
    {
        String xml = clientThread.get();

        DocumentBuilderFactory factory1 = DocumentBuilderFactory.newInstance();
        factory1.setNamespaceAware(true);
        try
        {
            DocumentBuilder builder = factory1.newDocumentBuilder();
            Document doc =builder.parse(new InputSource(new StringReader(xml))); 
            Element root = doc.getDocumentElement();
            if (doc != null) 
            {
                    NodeList nl = doc.getElementsByTagName("empId");
                    if (nl.getLength() > 0)
                    {
                        Node node = nl.item(0);
                        responseTeacherId = node.getTextContent();
                    }
                    NodeList n2=doc.getElementsByTagName("empName");
                    if (n2.getLength() > 0)
                    {
                        Node node = n2.item(0);
                        responseTeacherName = node.getTextContent();

                    }
            }

             Toast.makeText(getBaseContext(),""+responseTeacherId,10).show();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ExecutionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

现在出现错误

```
05-08 12:10:10.834: D/AndroidRuntime(524): Shutting down VM
05-08 12:10:10.834: W/dalvikvm(524): threadid=1: thread exiting with uncaught exception (group=0x40014760)
05-08 12:10:10.872: E/AndroidRuntime(524): FATAL EXCEPTION: main
05-08 12:10:10.872: E/AndroidRuntime(524): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.GDAProj/com.GDAProj.SelectOptionActivity}: java.lang.NullPointerException
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1739)
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.os.Looper.loop(Looper.java:132)
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.app.ActivityThread.main(ActivityThread.java:4123)
05-08 12:10:10.872: E/AndroidRuntime(524):  at java.lang.reflect.Method.invokeNative(Native Method)
05-08 12:10:10.872: E/AndroidRuntime(524):  at java.lang.reflect.Method.invoke(Method.java:491)
05-08 12:10:10.872: E/AndroidRuntime(524):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
05-08 12:10:10.872: E/AndroidRuntime(524):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
05-08 12:10:10.872: E/AndroidRuntime(524):  at dalvik.system.NativeStart.main(Native Method)
05-08 12:10:10.872: E/AndroidRuntime(524): Caused by: java.lang.NullPointerException
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.content.ContextWrapper.getApplicationInfo(ContextWrapper.java:132)
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.view.ContextThemeWrapper.getTheme(ContextThemeWrapper.java:65)
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.app.AlertDialog.resolveDialogTheme(AlertDialog.java:120)
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.app.AlertDialog.<init>(AlertDialog.java:80)
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.app.ProgressDialog.<init>(ProgressDialog.java:76)
05-08 12:10:10.872: E/AndroidRuntime(524):  at com.GDAProj.WebServiceClient.<init>(WebServiceClient.java:20)
05-08 12:10:10.872: E/AndroidRuntime(524):  at com.GDAProj.SelectOptionActivity.<init>(SelectOptionActivity.java:70)
05-08 12:10:10.872: E/AndroidRuntime(524):  at java.lang.Class.newInstanceImpl(Native Method)
05-08 12:10:10.872: E/AndroidRuntime(524):  at java.lang.Class.newInstance(Class.java:1301)
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.app.Instrumentation.newActivity(Instrumentation.java:1022)
05-08 12:10:10.872: E/AndroidRuntime(524):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1730)
05-08 12:10:10.872: E/AndroidRuntime(524):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T06:26:19.783

**将当前活动的上下文传递给 AsyncTask**类，并使用该上下文显示进度对话框`onPreExecute()`并关闭它`onPostExecute()`

```
public  class WebServiceClient extends AsyncTask<String, Void, String>
{
 private static final String base_path = "http://www.gdaschools.in";
 protected static final String SLASH = "/";
 private ProgressDialog dialog;
 private Activity activity;

public WebServiceClient(Activity activity) {
    this.activity = activity;
    this.dialog = new ProgressDialog(activity);
}

@Override
 protected void onPreExecute() {
        this.dialog.setMessage("Progress start");
        this.dialog.show();
    }

@Override
    protected void onPostExecute(final Boolean success) {
        if (this.dialog.isShowing()) {
           this.dialog.dismiss();
        }

.
.
. 
```

代码仅供您理解..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T07:16:33.217

Activity 的实例为空，因为您是在 oncreate 函数之前创建 WebServiceClient 的对象。在传递 Activity 或 Context 时，请确保 Activity 已创建其他方式，否则将传递 null 并且您将收到此错误

# java - mysql连接主机

> ID：10493533
> 
> 赞同：0
> 
> 时间：2012-05-08T06:18:41.483
> 
> 标签：java, android, mysql

我们正在尝试使用下面显示的代码连接到主机：

```
 Connection con=null;
             try {
                 Class.forName("com.mysql.jdbc.Driver");
                    con=DriverManager.getConnection("jdbc:mysql://sql3.000webhost.com/a17644_cc","chat_cc",                       "pass");          
                 ResultSet rs;
                 if(!con.isClosed())
                 {
                Statement st = con.createStatement();

                  rs= st.executeQuery("SELECT * FROM  user_info");
                 while(rs.next()){
                    t1.append(rs.getString(3));
                 }
                 }
               } catch(Exception e) {
                   t1.setText(e.toString());
                 //e.printStackTrace();
               } finally {
                 try {
                   if(con != null)
                     con.close();
                 }catch (java.sql.SQLException e) {
                    // TODO Auto-generated catch block
                    //e.printStackTrace();
                     t1.setText(e.toString());
                } 
```

我们也在清单文件中授予了互联网许可。

但得到以下错误：

java.sql.exception：**数据源拒绝建立连接**，来自服务器的消息：“**主机'182.71.248.226\. is not allowed to connect to this MySQL server** ”

这是我得到的以下详细信息：请告诉我们必须在连接字符串中提供哪个名称 Domain chitchat.site90.net 用户名 a1740644 密码 ***** **磁盘使用量 0.14 / 1500.0 MB 带宽 100000 MB (100GB) 主根目录 /home/a1740644 服务器名称 server19.000webhost.com IP 地址 31.170.160.83 Apache 版本。2.2.19 (Unix) PHP 版本 5.2。* MySQL版本。5.1 激活于 2012-05-01 02:14 状态激活*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:37:43.657

该错误告诉您用户无权连接和选择数据库。您需要授予所有主机或来自您正在使用的特定 IP 地址的主机的权限。要授予所有主机，您必须以管理用户身份发布：

```
GRANT ALL ON a17644_cc.* TO 'chat_cc'@'%' 
```

或者

```
GRANT ALL ON a17644_cc.* TO 'chat_cc'@'182.71.248.226' 
```

假设有问题的 IP 是静态的，并且您想通过 IP 限制连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:36:33.173

[正如https://stackoverflow.com/a/1559992/700926](https://stackoverflow.com/a/1559992/700926)所指出的，这可能是一种安全预防措施。查看该问题的已接受答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:45:58.880

Alternitavely to the answer from gview you can set priviliges in MySQL Workbench.Navigate to Security -> Users and Priviliges.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:26:40.680

MySQL 服务器的端口号是多少？也许你把它忘了。*

# jquery - 引导轮播：插件向我显示所有图像而不是幻灯片

> ID：10493535
> 
> 赞同：1
> 
> 时间：2012-05-08T06:18:43.403
> 
> 标签：jquery, twitter-bootstrap, carousel

我`bootstrap carousel`在我的网站上使用。插件向我显示所有图像的问题。
请参阅[jsFiddle](http://jsfiddle.net/XSywC/3/)上的示例。

该插件调用正确，因为在 Firebug 中`item`并且`active item`正在发生变化。
哪里有问题？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:40:39.117

你只是错过了[bootstrap.css](http://twitter.github.com/bootstrap/assets/css/bootstrap.css)它定义了很多东西，比如

```
.carousel {
  position: relative;
  margin-bottom: 18px;
  line-height: 1;
}

.carousel-inner {
  position: relative;
  width: 100%;
  overflow: hidden;
}

.carousel .item {
  position: relative;
  display: none;
  -webkit-transition: 0.6s ease-in-out left;
     -moz-transition: 0.6s ease-in-out left;
      -ms-transition: 0.6s ease-in-out left;
       -o-transition: 0.6s ease-in-out left;
          transition: 0.6s ease-in-out left;
}

.carousel .item > img {
  display: block;
  line-height: 1;
}

.carousel .active,
.carousel .next,
.carousel .prev {
  display: block;
}

.carousel .active {
  left: 0;
}

.carousel .next,
.carousel .prev {
  position: absolute;
  top: 0;
  width: 100%;
}

.carousel .next {
  left: 100%;
}

.carousel .prev {
  left: -100%;
}

.carousel .next.left,
.carousel .prev.right {
  left: 0;
}

.carousel .active.left {
  left: -100%;
}

.carousel .active.right {
  left: 100%;
}

.carousel-control {
  position: absolute;
  top: 40%;
  left: 15px;
  width: 40px;
  height: 40px;
  margin-top: -20px;
  font-size: 60px;
  font-weight: 100;
  line-height: 30px;
  color: #ffffff;
  text-align: center;
  background: #222222;
  border: 3px solid #ffffff;
  -webkit-border-radius: 23px;
     -moz-border-radius: 23px;
          border-radius: 23px;
  opacity: 0.5;
  filter: alpha(opacity=50);
}

.carousel-control.right {
  right: 15px;
  left: auto;
}

.carousel-control:hover {
  color: #ffffff;
  text-decoration: none;
  opacity: 0.9;
  filter: alpha(opacity=90);
}

.carousel-caption {
  position: absolute;
  right: 0;
  bottom: 0;
  left: 0;
  padding: 10px 15px 5px;
  background: #333333;
  background: rgba(0, 0, 0, 0.75);
}

.carousel-caption h4,
.carousel-caption p {
  color: #ffffff;
} 
```

工作演示：http: [//jsfiddle.net/naveen/nPyKZ/](http://jsfiddle.net/naveen/nPyKZ/)

# android - Android 向后兼容性

> ID：10493538
> 
> 赞同：2
> 
> 时间：2012-05-08T06:19:13.153
> 
> 标签：android, sdk, backwards-compatibility

目前我正在为旧的 sdk 版本开发 Android 项目。但是 - 新的 SDK 版本已经发布，并考虑在 UI 中使用新功能。

如果我希望应用程序也可以在旧的 SDK 设备上运行，我如何为所有设备制作一个 APK（对于新的 SDK 设备将使用新功能）？可能吗？或者我应该创建不同的版本？

示例 - ActionBar 在 SDK 版本上。3.0 和最新版本，如果我包含它 - 那么将无法在 SDK 版本上运行。2.1，但我仍然想支持拥有最旧SDK版本的用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:29:55.080

最好的方法是使用 Android 的兼容性库 - [http://developer.android.com/sdk/compatibility-library.html](http://developer.android.com/sdk/compatibility-library.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T06:21:49.773

有适用于 Android 的兼容性项目。

`ActionBar`尝试使用[ActionBarSherlock](http://actionbarsherlock.com/)。

# c# - 从业务逻辑层使用带有 EntityFramework 的事务

> ID：10493540
> 
> 赞同：0
> 
> 时间：2012-05-08T06:19:24.943
> 
> 标签：c#, entity-framework, entity-framework-4, transactionscope

请先看看这个： [良好的编码实践](https://stackoverflow.com/questions/10485120/good-coding-practices)

所以，这是我的设计。

1.  Website 2.Business Logic Layer 3.DALFacade (我们使用dalfacade来隐藏数据访问，因为我们使用了2个不同的store，sql和db2) 4.DAL

在 DAL 中，我们使用工作单元模式和存储库模式。1\. 这里最大的问题是：如果下面的代码对于从业务逻辑创建的事务运行正常。？

```
Page:

public partial class NewBonusRequest : System.Web.UI.Page
{

    #region Constructor and Instantiation of Business Logic
        /// <summary>
        /// Property that holds the Business Logic type to call methods
        /// </summary>
        public IRequestBL RequestBL { get; private set; }

        /// <summary>
        /// The default constructor will use the default implementation of the business logic interface
        /// </summary>
        public Request()
            : this(new RequestBL())
        {
        }

        /// <summary>
        /// The constructor accepts a IEcoBonusRequestFacade type
        /// </summary>
        /// <param name="ecoBonusRequestBL">IEcoBonusRequestFacade type</param>
        public NewRequest(IRequestBL RequestBL)
        {
            RequestBL = RequestBL;
        } 
    #endregion

    protected void PageLoad(object sender, EventArgs e)
    {
        if(!Page.IsPostBack)
        {

        }
    }

    #region Control Events
        protected void BtnSubmitRequestClick(object sender, EventArgs e)
        {
            var request= new Request
                                       {
                                           IsOnHold = true
                                           //All other properties go here.
                                       };

            RequestBL.Save(request);
        }

    Business Logic Code.

    public interface IRequestBL
    {
        void Save(Request request);
    }

    /// <summary>
    /// Class in charge of the business logic for EcoBonusRequest
    /// </summary>
    public class RequestBL : IRequestBL
    {
        /// <summary>

        /// <summary>
        /// Saves a new ecobonus request into database and evaluate business rules here
        /// </summary>
        /// <param name="ecoBonusWorkflow">EcoBonusWorkflow entity</param>
        public void Save(Request Request)
        {
            using (var scope = new TransactionScope())
            {
                Request.Save(request);
                // Call to other DALCFacade methods that insert data in different tables
                // OtherObject.Save(otherobject)
                scope.Complete();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:15:24.857

是的，在同一个线程中，EF 将正确考虑事务范围（如果存在）。如果已经在一个事务中，EF 将不会创建新事务。

但是，您必须小心，因为如果您在没有事务的情况下查询数据库，那么您将获得脏读。因为如果事务不存在，EF 将不会读取事务中的任何内容，但如果在保存更改时不存在，它将创建新事务。

在您的代码中，您只是保存事务中的更改，但在阅读时应该小心，并且您也应该将查询封装在更小的单元中。

# html - Html 表单到 PDF（客户端，预先设计的 PDF 表单）

> ID：10493542
> 
> 赞同：0
> 
> 时间：2012-05-08T06:19:32.497
> 
> 标签：html, pdf, converter

有没有一种方法，当我的用户在 html 表单中填写所有内容时，会有一个下载 PDF 按钮，这些数据将传递到 PDF 并以 pdf 格式保存到桌面，但是客户端不允许我使用任何服务器端脚本。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-08T17:20:35.227

是的，但是您必须使用[pdfmyform 之](http://www.pdfmyform.com)类的第 3 方解决方案。

您只需在网页上放置一个链接，该链接就会将您的所有页面和表单信息传输到网络服务并返回 PDF。您只需要考虑是否可以将所有内容发送给第 3 方。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T06:23:12.307

您可以使用[FPDF Library](http://www.fpdf.org/)，但它是服务器端解决方案。可能没有任何服务器端脚本是不可能的。

编辑：

虽然，我刚刚找到了一些 JS 解决方案。阅读： [使用 Javascript 生成 PDF 文件](https://stackoverflow.com/questions/742271/generating-pdf-files-with-javascript)

# sql-server - 如何在存储过程的单个参数中传递多个值？

> ID：10493545
> 
> 赞同：1
> 
> 时间：2012-05-08T06:19:43.980
> 
> 标签：sql-server, tsql, sql-server-2005

我想在一个参数中传递多个值。SQL 服务器 2005

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:14:04.253

你*可以*做一个功能：

```
ALTER  FUNCTION [dbo].[CSVStringsToTable_fn] ( @array VARCHAR(8000) )
RETURNS @Table TABLE ( value VARCHAR(100) )
AS 
    BEGIN
        DECLARE @separator_position INTEGER,
            @array_value VARCHAR(8000)  

        SET @array = @array + ','

        WHILE PATINDEX('%,%', @array) <> 0 
            BEGIN
                SELECT  @separator_position = PATINDEX('%,%', @array)
                SELECT  @array_value = LEFT(@array, @separator_position - 1)

                INSERT  @Table
                VALUES  ( @array_value )

                SELECT  @array = STUFF(@array, 1, @separator_position, '')
            END
        RETURN
    END 
```

并从中选择：

```
DECLARE @LocationList VARCHAR(1000)
SET @LocationList = '1,32'

SELECT  Locations 
FROM    table
WHERE   LocationID IN ( SELECT   CAST(value AS INT)
                           FROM     dbo.CSVStringsToTable_fn(@LocationList) ) 
```

或者

```
SELECT  Locations
FROM    table loc
        INNER JOIN dbo.CSVStringsToTable_fn(@LocationList) list
            ON CAST(list.value AS INT) = loc.LocationID 
```

当您尝试将多值列表从 SSRS 发送到 PROC 时，这非常有用。

**已编辑：**显示您可能需要 CAST - 但是要小心控制在 CSV 列表中发送的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T20:59:52.407

你可以让你的 sproc 接受一个**`xml`**类型化的输入变量，然后解包元素并抓取它们。例如：

```
DECLARE @XMLData xml

DECLARE 
    @Code varchar(10),
    @Description varchar(10)

SET @XMLData = 
'
    <SomeCollection>
      <SomeItem>
        <Code>ABCD1234</Code>
        <Description>Widget</Description>
      </SomeItem>
    </SomeCollection>
'

SELECT 
    @Code = SomeItems.SomeItem.value('Code[1]', 'varchar(10)'),
    @Description = SomeItems.SomeItem.value('Description[1]', 'varchar(100)')
FROM @XMLDATA.nodes('//SomeItem') SomeItems (SomeItem)

SELECT @Code AS Code, @Description AS Description 
```

结果：

```
Code        Description
==========  ===========
ABCD1234    Widget 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:36:28.590

只是建议。在 SQL Server 2005 中您不能真正做到这一点。至少没有直接的方法。您必须使用 CSV 或 XML 或 Base 64 或 JSON。但是，我强烈不鼓励您这样做，因为它们都容易出错并产生非常大的问题。

如果您能够切换到 SQL Server 2008，则可以使用表值参数（[Reference1](http://msdn.microsoft.com/en-us/library/bb510489.aspx)、[Reference2](http://msdn.microsoft.com/en-us/library/bb675163.aspx)）。

如果您不能，我建议您考虑在存储过程中执行此操作的必要性，即您是否真的希望（应该/必须）使用 SP 执行 sql 操作。如果您要解决问题，只需使用 Ad hoc 查询。如果您想出于教育目的这样做，~~您可能会尝试~~甚至不尝试上述内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-10T12:50:48.317

有多种方法可以实现这一点，方法是：

1.  **将字符串的CSV 列表**作为参数传递给 (N)VARCHAR 参数，然后在您的 SP 中对其进行解析，[请查看此处](http://sqlwithmanoj.com/2012/09/09/passing-multipledynamic-values-to-stored-procedures-functions-part1-by-passing-csv/)。

2.  首先创建一个**XML 字符串**，然后将其作为 XML 数据类型参数传递。您将需要解析 SP 中的 XML，您可能需要 APPLY 运算符，[请查看此处](http://sqlwithmanoj.com/2012/09/09/passing-multipledynamic-values-to-stored-procedures-functions-part2-by-passing-xml/)。

3.  在 SP 外创建一个**临时表**，将多个值作为多行插入，此处不需要参数。然后在 SP 内部使用临时表，[检查这里](http://sqlwithmanoj.com/2012/09/09/passing-multipledynamic-values-to-stored-procedures-functions-part3-by-using-table/)。

4.  如果您在 2008 年及以上，请尝试**TVP（表值参数）**并将它们作为参数传递，[请查看此处](http://sqlwithmanoj.com/2012/09/10/passing-multipledynamic-values-to-stored-procedures-functions-part4-by-using-tvp/)。

# android - 禁用返回按钮

> ID：10493546
> 
> 赞同：0
> 
> 时间：2012-05-08T06:19:44.943
> 
> 标签：android

我在一个 android 应用程序中工作，我想在我的 android 应用程序中禁用后退按钮。我将它重定向到一个 url，我想在那里禁用后退按钮。请帮我。

这是马代码

```
public class PrepareRequestTokenActivity extends Activity {

    final String TAG = getClass().getName();

    private OAuthConsumer consumer;
    private OAuthProvider provider;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        try {
            setContentView(R.layout.twitter);
            ProgressDialog dialog = ProgressDialog.show(PrepareRequestTokenActivity.this, "", 
                    "Loading. Please wait...", true);
            this.consumer = new CommonsHttpOAuthConsumer(
                    Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
            this.provider = new CommonsHttpOAuthProvider(Constants.REQUEST_URL,
                    Constants.ACCESS_URL, Constants.AUTHORIZE_URL);
        } catch (Exception e) {
            Log.e(TAG, "Error creating consumer / provider", e);
        }

        Log.i(TAG, "Starting task to retrieve request token.");
        new OAuthRequestTokenTask(this, consumer, provider).execute();
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK)) {
            Log.d(this.getClass().getName(), "back button pressed");
        }
        return super.onKeyDown(keyCode, event);
    }

    /**
     * Called when the OAuthRequestTokenTask finishes (user has authorized the
     * request token). The callback URL will be intercepted here.
     */
    @Override
    public void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        SharedPreferences prefs = PreferenceManager
                .getDefaultSharedPreferences(this);

        final Uri uri = intent.getData();
        if (uri != null
                && uri.getScheme().equals(Constants.OAUTH_CALLBACK_SCHEME)) {
            Log.i(TAG, "Callback received : " + uri);
            Log.i(TAG, "Retrieving Access Token");
            new RetrieveAccessTokenTask(this, consumer, provider, prefs)
                    .execute(uri);

            setResult(Activity.RESULT_OK);

            finish();
        }
    }

    public class RetrieveAccessTokenTask extends AsyncTask<Uri, Void, Void> {

        private Context context;
        private OAuthProvider provider;
        private OAuthConsumer consumer;
        private SharedPreferences prefs;

        public RetrieveAccessTokenTask(Context context, OAuthConsumer consumer,
                OAuthProvider provider, SharedPreferences prefs) {
            this.context = context;
            this.consumer = consumer;
            this.provider = provider;
            this.prefs = prefs;
        }

        /**
         * Retrieve the oauth_verifier, and store the oauth and
         * oauth_token_secret for future API calls.
         */
        @Override
        protected Void doInBackground(Uri... params) {
            final Uri uri = params[0];
            final String oauth_verifier = uri
                    .getQueryParameter(OAuth.OAUTH_VERIFIER);

            try {
                provider.retrieveAccessToken(consumer, oauth_verifier);

                final Editor edit = prefs.edit();
                edit.putString(OAuth.OAUTH_TOKEN, consumer.getToken());
                edit.putString(OAuth.OAUTH_TOKEN_SECRET,
                        consumer.getTokenSecret());
                edit.commit();

                String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
                String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

                consumer.setTokenWithSecret(token, secret);                             

                Log.i(TAG, "OAuth - Access Token Retrieved");

            } catch (Exception e) {
                Log.e(TAG, "OAuth - Access Token Retrieval Error", e);
            }

            return null;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:33:40.730

覆盖 onBackPressed 方法

```
@Override
public void onBackPressed() {
   return;
} 
```

需要 API 5 级或更高级别

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:23:45.940

返回 true 而不是 super.onKeyDown(..,..)

[http://developer.android.com/reference/android/view/View.html#onKeyDown%28int,%20android.view.KeyEvent%29](http://developer.android.com/reference/android/view/View.html#onKeyDown%28int,%20android.view.KeyEvent%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T06:34:12.660

避免调用父行为，即在覆盖方法中删除 super.onBackPressed()

```
@Override
public void onBackPressed() {
   return;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:27:51.743

@Override public void onBackPressed() { // 什么都不做。}

# hbase - 使用 HBase 来保存经常更改的设置值是否合适？

> ID：10493547
> 
> 赞同：1
> 
> 时间：2012-05-08T06:19:46.020
> 
> 标签：hbase, hdfs

考虑到作为HBase 基础的 HDFS*的一次写入*约束，**在我看来，使用 HBase 作为数据库来管理数千万用户的*经常更改***的每用户设置值是不合适的。例如，此处设置的值是用于控制用户个人信息（例如生日、电话号码和电子邮件地址）的可见性的布尔值和用于控制允许谁访问个人信息的可见部分的每个朋友标志。我担心每次用户更改其设置值时存储大小可能会不断增长，即使 HBase 将多个更改合并到一次写入 HDFS 上。

但是，我不确定这是否真的不合适。我的理解可能有误。你能给我评论一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:30:41.293

HBase 用于其文件系统的 HDFS 是仅附加文件系统，这意味着文件的任何部分都不会被覆盖。新的变化是在旧的变化之上打包的，就像 CouchDB 一样。

然而，与 CouchDB 不同的是，HBase 管理自己的拆分和压缩。

> 重要的是要强调主要压缩对于 StoreFile 清理是绝对必要的，唯一的变体是它们何时发生。它们可以通过 HBase shell 或 HBaseAdmin 进行管理。

在压缩期间，您的旧数据将被释放，并释放空间。

您可能应该将经常更改的数据分成自己的列族，并可能打开压缩。不幸的是，此时刷新是全局完成的，而不是每个列族，但是[HBase-3149](https://issues.apache.org/jira/browse/HBASE-3149)正在解决这个问题。

我想直接回答你的问题，是的，HBase 可以存储经常修改的数据。只要确保有人仔细阅读[配置页面](http://hbase.apache.org/book/important_configurations.html)并根据您的情况做出正确的决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:57:02.683

为了扩展 Jacob 的答案，理解为什么 HBase 对经常变化的值有好处涉及理解[Log Structured Merge Trees](https://docs.google.com/viewer?a=v&q=cache%3ajrJOdFUFAAoJ%3aciteseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.44.2782&rep=rep1&type=pdf%20&hl=en&gl=us&pid=bl&srcid=ADGEEShoxgNyKrfFF2HCVkOiDQsPo8n0xfHP5mibwSEQQBELgR9t2MH4YPUls1ge0Q3-ALIuno8zkdwF80m1tT28at8Y6q3geSkxY39XEEa3h4Hcf96iOVezNwgaY3YE0blM-5LxA4re&sig=AHIEtbQGm6eBJN5hsVo_q0mLfXBeQIGaEQ&pli=1)的方法。

与典型的关系数据库（使用 B+ 树和“就地更新”语义）不同，所有对 HBase 的写入都被视为时间戳附加。对于您执行的每个 PUT，无论它是新值（“INSERT”，RDBMS 语言）还是现有键（“UPDATE”，RDBMS 领域），都会发生两件事：

1.  它被写入预写日志 (WAL)，这样如果机器在下一次文件刷新之前出现故障，您就不会丢失数据；和
2.  它被插入到内存中区域数据的排序表示中（这非常快，即使它已排序，因为它在内存中）。

下次当内存中有足够的新内容来保证它的存在时，内存中的内容就会被刷新到磁盘中（同样，由于它已经排序，所以速度非常快）。而且，根据您在表格上使用的设置（例如，您是否要保留许多过去的版本，是否要保留已删除的值等），旧版本的值可能会在刷新时立即被清除时间也是如此。

但是，无论哪种情况，很明显，随着时间的推移，单个值的不同版本可能会保存在多个这些存储文件中，并且一次读取将不得不访问许多存储文件。这就是紧缩的用武之地：将许多存储文件合并为一个，这样读取就不必这样做了。

# c# - 我们可以从 .net 中的私有基类型创建派生的公共类型吗？

> ID：10493548
> 
> 赞同：0
> 
> 时间：2012-05-08T06:19:47.097
> 
> 标签：c#, .net, oop, microsoft-metro, windows-runtime

我知道这个问题听起来有些愚蠢，但我有这种情况。

语境

我正在创建 2 个后台任务（METRO 应用程序、winRT），它们有很多共同点。现在我想要的是，一个定义通用功能的通用基类，以及从基类派生的 2 个任务。

问题：后台任务应该针对WinMD，在这种模式下，不能创建非密封的公共类。如果我创建密封，我不能从它派生，如果我创建私有，我不能公开派生类型，因为基是私有的。

关注点：实现所需功能的方法有哪些。（从私有基础派生的公共类型）。一种方法是使用组合（而不是继承）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:21:47.930

你根本做不到。.NET 不允许您使派生类型比基类型更易于访问。您必须公开基本类型。

请注意，如果您只给它内部构造函数，那么其他代码将无法实例化它或创建自己的派生类型......此时暴露它有什么问题？

编辑：好的，我刚刚重读了这个问题，看到了这个：

> 无法创建非密封的公共类

所以：

*   你能把*所有*涉及的类型都放在内部吗？
*   你能把它变成一个公共*抽象*类吗？（WinMD 允许吗？）

（如果您有关于 WinMD 中允许的任何其他文档，那将很有用。）

如果您被允许导出接口，也许您可​​以将基类和派生类放在内部，但让它们实现公共接口。然后在公共静态类中使用公共静态方法来创建这些内部类型的实例并通过接口返回它们。再说一次，我不知道这是否被允许——如果你有任何关于 WinMD 中允许的文档的链接，这对我们这些没有做过任何 WinRT 开发的人来说会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:15:56.913

是的，您可以将其隐藏在派生类中，然后公开`base.Property`，即

```
new public ScrollBar HorizontalScrollBar
    {
        get { return base.HorizontalScrollBar; }
    } 
```

# facebook - 如何向 Facebook 上的朋友发送大量电子邮件/消息

> ID：10493549
> 
> 赞同：0
> 
> 时间：2012-05-08T06:19:56.833
> 
> 标签：facebook, invite

我正在制作一个网站，其中一些拥有 facebook 帐户的人可以邀请他的朋友。

问题是标准的 facebook API 为这种情况提供了一个弹出窗口，其中想要邀请他的朋友的用户必须手动单击他想要邀请的每个朋友，然后单击 enter。

我如何在 Facebook 上向客户的朋友群发消息/通知？关于 sneding 电子邮件的同样问题，尽管我怀疑一个人能否从 facebook 获得 frieds 电子邮件。

请给我建议。至少告诉我如何自动化“从弹出窗口中选择所有朋友”过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:25:37.440

这是不可能的。您必须使用[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)。这是一种安全措施，可确保应用程序在未经用户批准的情况下无法向用户的朋友发送邀请。

# regex - 正则表达式，如果 N+1 == x 则查找 x 然后 N 个字符

> ID：10493550
> 
> 赞同：1
> 
> 时间：2012-05-08T06:20:00.527
> 
> 标签：regex, string, split

好的，这就是我所拥有的：

```
(24(?:(?!24).)*) 
```

它的工作原理是它发现从 24 到下一个 24 但不是第二个 24 ......（哇一些逻辑）。

* * *

像这样：

```
 23252882240013152986400000006090000000787865670000004524232528822400513152986240013152986543530000452400 
```

* * *

它从第一个 24 到下一个 24 找到但不包括它，所以它找到的字符串是：

```
 23252882 - 2400131529864000000060900000007878656700000045 - 2423252882 - 2400513152986 - 24001315298654353000045 - 2400 
```

这是我想要它做的一半，我需要它找到的是：

```
 23252882 - 2400131529864000000060900000007878656700000045 - 2423252882240051315298624001315298654353000045 - 2400 
```

让我们说：

```
x = 24
n = 46 
```

我需要：

```
find x then n characters if the n+1 character == x 
```

所以找到下一个 46 的开始，第 45 个必须是下一个字符串的开始，包括该字符串中的所有 24。

希望这很清楚。

提前致谢。

**编辑**

```
 answer = 24.{44}(?=24) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:29:22.013

您快到了。

首先，找到`x`(24)：

```
24 
```

然后，找到`n`=46 个字符，其中 46**包括**原来的 24 个（因此剩下 44 个）：

```
.{44} 
```

以下字符*必须*是`x`(24)：

```
(?=24) 
```

全部一起：

```
24.{44}(?=24) 
```

你可以在[这里](http://regexr.com?30sj0)玩弄它。

就从给定的 , 构造这样的正则表达式而言`x`，`n`您的正则表达式包括

```
x.{n-number_of_characters(x)}(?=x) 
```

您按`x`原样替换并计算`n-number_of_characters(x)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:34:36.217

**试试这个：**

```
(?(?=24)(.{46})|(.{25})(.{24})) 
```

**解释：**

```
<!--
(?(?=24)(.{46})|(.{25})(.{24}))

Options: case insensitive; ^ and $ match at line breaks

Do a test and then proceed with one of two options depending on the result of the text «(?(?=24)(.{46})|(.{25})(.{24}))»
   Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=24)»
      Match the characters “24” literally «24»
   If the test succeeded, match the regular expression below «(.{46})»
      Match the regular expression below and capture its match into backreference number 1 «(.{46})»
         Match any single character that is not a line break character «.{46}»
            Exactly 46 times «{46}»
   If the test failed, match the regular expression below if the test succeeded «(.{25})(.{24})»
      Match the regular expression below and capture its match into backreference number 2 «(.{25})»
         Match any single character that is not a line break character «.{25}»
            Exactly 25 times «{25}»
      Match the regular expression below and capture its match into backreference number 3 «(.{24})»
         Match any single character that is not a line break character «.{24}»
            Exactly 24 times «{24}»
--> 
```

# asp.net-mvc-3 - 没有得到 SendEmail 属性

> ID：10493552
> 
> 赞同：-1
> 
> 时间：2012-05-08T06:20:18.953
> 
> 标签：asp.net-mvc-3, c#-4.0, entity-framework-4.1

我正在尝试发送电子邮件以忘记密码，同时尝试以下代码

```
 [HttpPost]
         public ActionResult ResetPassword(ResetPasswordModel Model)
              {
                   MembershipUser currentUser = Membership.GetUser(Model.Username);

                   if (ModelState.IsValid)
               {
                   SendEmail.SendResetEmail(currentUser);
                 }
          return View();
       } 
```

SendEmail 不是一个属性，任何人都可以提供我们必须使用哪个命名空间来获取此 SendEmail 的详细信息。

我使用了名称空间 System.net.mail 和 System.web.mail 但没有用

谢谢巴努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:29:35.157

您正在寻找的似乎是一些专有代码。BCL 很少使用过程编程（类型上的静态方法），但在 .NET 中发送邮件还是很容易的：

```
MailMessage message = new MailMessage();
message.From = new MailAddress("info@foo.bar.com");

message.To.Add(new MailAddress("recipient1@somewhereelse.com"));

message.Subject = "This is the subject";
message.Body = "This is the body/content of the mail message";
SmtpClient client = new SmtpClient(); //might have to provide details here depending on the server setup
client.Send(message); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:30:15.973

`SendEmail.SendResetEmail`在上述任何命名空间中都没有类似的东西。
`SendResetMail`应该是`SendEmail`处理电子邮件操作的类中的静态方法。

请找出您在哪里定义了该类并导入该命名空间。或者，如果您从另一个项目中复制了代码，请将该类也复制到您的项目中。

# android - RoboGuice 和 ActionbarSherlock 似乎不能一起工作

> ID：10493555
> 
> 赞同：1
> 
> 时间：2012-05-08T06:20:31.837
> 
> 标签：android, actionbarsherlock, roboguice

事情是这样的：

我正在使用 roboguice-sherlock 来工作 ActionBarSherlock 和 RoboGuice，并且想使用 RoboGuice 的功能来注入布局，`@ContentView()`还想显示 Indeterminate 进度条。`requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS)``onCreate()`

在此之后，捕获了运行时异常：

> java.lang.RuntimeException: 无法启动活动 ComponentInfo{...}: android.util.AndroidRuntimeException: requestFeature() 必须在添加内容之前调用

这是一个错误还是我做错了？

例如，actionbarsherlock 示例的 sample-roboguice 中，如果 在下面的方法`requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS)`中添加，则示例在运行时会崩溃，但上述异常除外。`onCreate()``super.onCreate(savedInstanceState)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T12:08:19.433

只需在 super.onCreate() 之前调用 requestWindowFeature()。它应该可以解决您的问题。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    super.onCreate(savedInstanceState);
    // do some epic things
} 
```

# java - 对目录结构有点困惑

> ID：10493556
> 
> 赞同：1
> 
> 时间：2012-05-08T06:20:34.630
> 
> 标签：java, jakarta-ee, spring-mvc

我正在使用 Spring 和休眠创建一个 Web 应用程序。

我对目录结构的方法有点困惑。

**方法 1：** 为每个模块创建单独的文件夹/包。例如，如果我必须创建登录和上传文件模块，并且我的基本包是 com.abc，那么我将创建包 com.abc.login 并在其中创建控制器、服务、表单、dao 文件夹，并且与上传文件模型相同。

**方法2：** 在同一个项目下创建controller、service、form、dao文件夹，然后为com.abc.controller下的所有模块添加所有控制器类，以及一个服务文件夹下所有模块的所有服务，以及forms和daos

我应该遵循哪种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:28:11.243

这些包只是一种将有意义的类组合在一起并避免与其他类发生名称冲突的方法。它对性能的影响绝对为零。做任何你认为最好的事情。这两种方法都很常见（首先是基于技术的分离与首先是基于功能的分离）。

我更喜欢您的第一种方法（首先是基于功能的分离），但是 YMMV。

# c++ - 使用流式传输的 gsoap restful c++ 客户端

> ID：10493559
> 
> 赞同：8
> 
> 时间：2012-05-08T06:20:47.503
> 
> 标签：c++, linux, web-services, rest, gsoap

如何编写一个 gsoap restful C++/Solaris 客户端，它应该使用流向 web 服务发送一个文档（xsd__base64Binary）？

我们尝试编写一个没有流式传输的 gsoap restful 客户端，它工作正常。我们使用 gsoap 生成了一个请求 xml (serialization-soap_begin_send(--)、soap_serialize(--)、soap_put(--)、soap_end_send(--))，然后使用了soap_post_connect(---)、soap_send(---) ,soap_end_send(---) 发送请求。

我们使用 MTOM 在 gsoap 客户端中进行流式传输并且工作正常。是否可以在 gsoap restful 客户端中流式传输文档？我们可以在安静的情况下使用 MTOM 吗？如果是，您能否告诉我们，我应该使用哪些 gsoap 函数进行序列化然后发送该 xml 请求？另外，如果您有任何示例代码，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:37:17.920

一种方法是将 doc 作为字符串并将该字符串作为参数发送到服务器。soapcpp2 将为您生成客户端/服务器代码。 [有关更多详细信息，请参见此处](http://www.cs.fsu.edu/~engelen/soapdoc2.html)。

我同意这一点，但是如果您的文档很大，则可以部分拆分。创建您自己的标头数据组合并在数据包中分配文档并以字符串形式发送。

# android - 单击编辑文本

> ID：10493560
> 
> 赞同：4
> 
> 时间：2012-05-08T06:20:48.987
> 
> 标签：android, android-edittext

如何使 EditText 具有 onClick 事件，以便单击时完成操作。

```
private void addListenerOnButton() {

        dateChanger = (EditText) findViewById(R.id.date_iWant);

        dateChanger.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                showDialog(DATE_DIALOG_ID);
            }
        });
    } 
```

这不能正常工作....单击仅提供屏幕键盘，但不提​​供仅在我双击时出现的日期选择器对话框

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-23T13:20:15.123

如果我们只是`android:focusableInTouchMode="false"`在布局页面上添加编辑文本，它应该可以在其 onclicklistener 上单击一次。无需处理 onFocusChangeListener。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:25:35.067

**改写**

我有一个 EditText，当用户单击它一次或使用轨迹球/方向键导航到它时，它会启动一个对话框。我使用这种方法：

*   使用 OnFocusChangeListener 获得焦点以打开对话框。
*   当用户关闭对话框时，覆盖dismissDialog() 以清除EditText 的焦点，防止用户在没有对话框的情况下输入文本（据我所知）。

我也试过这个（但是我现在记得这个方法确实响应了轨迹球的运动）：

*   对触摸事件使用 OnClickListener。
*   设置`setFocusable(false)`为防止用户输入。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:26:27.937

将您的代码从 onClickListener 更改为 OnFocusChangeListener。

```
private void addListenerOnButton() {

    dateChanger = (EditText) findViewById(R.id.date_iWant);

    dateChanger.setOnFocusChangeListener(new OnFocusChangeListener() {

        public void onFocusChange(View v, boolean hasFocus) {
            if(hasFocus) {
                showDialog(DATE_DIALOG_ID);
            }
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:29:12.100

`EditText`不是为了`singleClick`.

我的意思是你不应该使用 Click Listener。相反，你可以这样做，

使用`onFocusChangeListener`也不是 100% 正确的方法。

最好的做法是`EditText`使用其中的一种方法，如果需要，可以为该 TextView 提供背景图像`TextView`。`onClick`

* * *

![在此处输入图像描述](../Images/fd9661e5ff40e3d3e501d23999e8670e.png)

# c# - C#使用脚本创建数据库

> ID：10493565
> 
> 赞同：2
> 
> 时间：2012-05-08T06:21:19.607
> 
> 标签：c#, sql, sql-server

我喜欢`FILENAME`在下面的代码中使用参数 for，而不是 N'D:\DBName.mdf' 和 N'D:\DBName.ldf'。

如何在`.sql`文件中更改它以及如何使用参数从 C# 调用它？谢谢。

SQL脚本：

```
CREATE DATABASE [DBName] ON  PRIMARY 
( NAME = N'DBName', FILENAME = N'D:\DBName.mdf' , SIZE = 3072KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'DBName_log', FILENAME = N'D:\DBName.ldf' , SIZE = 3456KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
END 
```

C# 代码

```
string appPathDB = Path.GetDirectoryName(Application.ExecutablePath) + "\\DBName.mdf";
string appPathLog = Path.GetDirectoryName(Application.ExecutablePath) + "\\DBName_log.ldf";

private void CreateDatabase()
{
   string connection = "Data Source=localhost;Initial Catalog=master;User ID=sa;Password=abcd1234";
   FileInfo file = new FileInfo(Path.GetDirectoryName(Application.ExecutablePath) + "\\DBName.sql");
   string script = file.OpenText().ReadToEnd();
   ExecSql(script, connection, "DBName");
   file.OpenText().Close();
}

public void ExecSql(string sql, string connectionString, string dataBaseNameToPrepend)
{
   using (SqlConnection conn = new SqlConnection(connectionString))
   {
      conn.Open();
      Server server = new Server(new ServerConnection(conn));
      server.ConnectionContext.ExecuteNonQuery(sql);
      server.ConnectionContext.Disconnect();
      server.ConnectionContext.ExecuteNonQuery(sql);
      MessageBox.Show("DB Uploaded.");
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:41:32.140

对您的脚本文件进行以下更改并保存。

```
CREATE DATABASE [DBName] ON  PRIMARY 
( NAME = N'DBName', FILENAME = N'DB_NAME_MDF' , SIZE = 3072KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'DBName_log', FILENAME = N'DB_NAME_LDF' , SIZE = 3456KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
END 
```

将以下行添加到您的代码中。

```
private void CreateDatabase()
    {
        string connection = "Data Source=localhost;Initial Catalog=master;User ID=sa;Password=abcd1234";
        FileInfo file = new FileInfo(Path.GetDirectoryName(Application.ExecutablePath) + "\\DBName.sql");
        string script = file.OpenText().ReadToEnd();
        script = script.Replace("DB_NAME_MDF", appPathDB).Replace("DB_NAME_LDF", appPathLog);
        ExecSql(script, connection, "DBName");
        file.OpenText().Close();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:37:22.520

我认为有不同的方法可以解决这个问题。

但根据我的说法，在这里找到工作的简单方法是

创建一个文件说 dbcreate.sql

```
CREATE DATABASE [DBName] ON  PRIMARY 
( NAME = N'DBName', FILENAME = XXXMDFXXX , SIZE = 3072KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'DBName_log', FILENAME = XXXLDFXXX , SIZE = 3456KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
END 
```

将此文件保存在应用程序中的某个位置，并在 C# 代码中读取此文件，并将 XXXLDFXXX 的值替换`XXXMDFXXX`为您的参数值`N'D:\Work\DBLocation\Files\Employee.mdf'`，并将 XXXLDFXXX 替换为您的第二个参数值`N'D:\Work\DBLocation\Files\Employee.ldf'`

替换完成后将新文件保存在新位置并使用新名称说 dbMainCreate.sql

保存成功后，按照您的代码使用新参数创建数据库。

**注意：**在存储新文件之前，您可以检查文件是否已在该位置可用，如果是，则删除现有文件，然后保存。您还可以将文件移动或复制到另一个位置以保持版本控制。

# android - Android：无法启动活动 java.lang.nullpointerexception

> ID：10493566
> 
> 赞同：0
> 
> 时间：2012-05-08T06:21:34.343
> 
> 标签：android, android-activity

我已经创建了一个`activity`并且我在函数内部编写了一些`onCreate()`函数。在运行应用程序时，我收到一些错误消息无法启动活动`java.lang.nullpointerexception`。我*已*将此活动包含在`AndroidManifest.xml`

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.user_report_hr_full);
         List<Employee> data = new ArrayList<Employee>();
            Employee eg=new Employee();
            ListView li=(ListView)findViewById(R.id.user_report_hr_list);
            Intent myIntent = getIntent(); // this is just for example purpose
            Bundle b=myIntent.getExtras();
            Log.i("User Report by Hours", b.toString());
            Toast.makeText(getApplicationContext(), "User ", Toast.LENGTH_LONG).show();
            if(b !=null)
            {
                String username = b.getString("username");
                String userid = b.getString("userid");
                String startdate = b.getString("startdate");
                String enddate = b.getString("enddate");
                String mode=b.getString("mode");
                Log.i("LOOP", userid+"-"+startdate+"-"+enddate+"-"+mode);
                data=eg.getReports(username, userid, startdate, enddate,mode);
                Log.i("Get Report",data.toString());
                li.setAdapter(new UserHoursByReportArrayadapter(getApplicationContext(),data));
            }

    } 
```

我的日志文件是

```
05-08 11:45:30.745: I/User Report by HoursActivity:mode(517): 1
05-08 11:45:30.837: I/User Report by Hours(517): Bundle[mParcelledData.dataSize=236]
05-08 11:45:30.845: I/LOOP(517): 1-2012-04-08-2012-05-08-1
05-08 11:45:30.855: D/HTTP(517): Execute HTTP Post Request
05-08 11:45:30.855: D/UserID(517): Userid in EmpGlobal [1]
05-08 11:45:30.855: D/Start date(517): Start date in EmpGlobal [2012-04-08]
05-08 11:45:30.855: D/End date(517): End date in EmpGlobal [2012-05-08]
05-08 11:45:30.855: D/Mode(517): Mode in EmpGlobal [1]
05-08 11:45:48.275: I/log_tag(517):  Time: 2033755
05-08 11:45:48.275: I/log_tag(517):  project name: AndroidTimesheet
05-08 11:45:48.285: I/log_tag(517):  username: admin1
05-08 11:45:48.285: I/log_tag(517):  Time: 34692
05-08 11:45:48.285: I/log_tag(517):  project name: Google
05-08 11:45:48.285: I/log_tag(517):  username: admin1
05-08 11:45:48.285: I/Get Report(517): [com.technogems.employeetimecard.EmployeeGlobal@44da2ca8, com.technogems.employeetimecard.EmployeeGlobal@44da2f88]
05-08 11:45:48.285: I/User Report by HoursAdapter(517): Inside constructor
05-08 11:45:48.285: D/AndroidRuntime(517): Shutting down VM
05-08 11:45:48.285: W/dalvikvm(517): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-08 11:45:48.285: E/AndroidRuntime(517): Uncaught handler: thread main exiting due to uncaught exception
05-08 11:45:48.295: E/AndroidRuntime(517): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.technogems.employeetimecard/com.technogems.employeetimecard.UserHoursByReport}: java.lang.NullPointerException
05-08 11:45:48.295: E/AndroidRuntime(517):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
05-08 11:45:48.295: E/AndroidRuntime(517):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-08 11:45:48.295: E/AndroidRuntime(517):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-08 11:45:48.295: E/AndroidRuntime(517):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-08 11:45:48.295: E/AndroidRuntime(517):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-08 11:45:48.295: E/AndroidRuntime(517):  at android.os.Looper.loop(Looper.java:123)
05-08 11:45:48.295: E/AndroidRuntime(517):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-08 11:45:48.295: E/AndroidRuntime(517):  at java.lang.reflect.Method.invokeNative(Native Method)
05-08 11:45:48.295: E/AndroidRuntime(517):  at java.lang.reflect.Method.invoke(Method.java:521)
05-08 11:45:48.295: E/AndroidRuntime(517):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-08 11:45:48.295: E/AndroidRuntime(517):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-08 11:45:48.295: E/AndroidRuntime(517):  at dalvik.system.NativeStart.main(Native Method)
05-08 11:45:48.295: E/AndroidRuntime(517): Caused by: java.lang.NullPointerException
05-08 11:45:48.295: E/AndroidRuntime(517):  at com.technogems.employeetimecard.UserHoursByReport.onCreate(UserHoursByReport.java:35)
05-08 11:45:48.295: E/AndroidRuntime(517):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-08 11:45:48.295: E/AndroidRuntime(517):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
05-08 11:45:48.295: E/AndroidRuntime(517):  ... 11 more 
```

请为我提供开始该活动的正确方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:45:24.013

删除这一行： **Log.i("User Report by Hours", b.toString());** 其中 b 为 null 所以发生了 nullpointerException

# c++ - 在 c 中使用 c++ 对象

> ID：10493568
> 
> 赞同：1
> 
> 时间：2012-05-08T06:21:45.933
> 
> 标签：c++, c

我正在用 C++ 编写代码。我需要支持一些基本的数据类型，比如 BigInt。这些类型将暴露给外界（通过头文件），其中可能还包括 c 程序。
我应该将 BigInt 之类的数据类型实现为结构还是类？
困惑是因为
1\. 如果我将其实现为类，作为 OO 的优势，我可以在类中进行所有处理。但是我可能需要为 c 程序
2 实现一些工作。如果我将它实现为结构，我不需要为 c 程序做任何特殊的事情，但我会失去模块化和易于实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:32:20.167

基本上 C 不能访问 C++ 对象，无论是结构/类（它们在 C++ 中是相同的，只是在默认可见性说明符上有所不同）。您必须为 C++ 对象创建过程包装器（即创建、方法调用、销毁等）。

为了创建，创建一个返回不透明指针的函数（在 C++ 中，这将是对象指针）。对于方法调用，将返回的指针（来自上面的创建函数）添加为（通常是第一个）参数之一。对于销毁，它与方法调用相同，但通常除了上面的指针之外不接收其他参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:24:21.487

如果您打算在 C 中使用它，我建议您用 C 编写它。C++ 与 C 的相处比 C 与 C++ 的相处好一百万倍。另一种选择是用 C 语言编写它，然后提供一个薄的 C++ 包装器，为其提供 OO 接口。

# vbscript - 绕过“您只想查看安全传送的网页内容吗？” 对话框

> ID：10493581
> 
> 赞同：2
> 
> 时间：2012-05-08T06:22:13.383
> 
> 标签：vbscript

我想知道如何绕过**“您只想查看安全传送的网页内容吗？”** 使用**VBscript的****对话框**..

我试图通过**IE**在**XP**中打开网页，登录后出现此对话框.. 并加载页面内容。

我想绕过对话框..我尝试使用**睡眠**和**发送键**但没有工作，因为当页面加载时脚本等待睡眠时间并执行但实际上该对话框在此期间没有出现（即这一切都基于互联网速度）

我想有一个很好的解决方案，它可以完美地工作。

谢谢大家..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:43:35.967

你的答案就[在这里](http://answers.microsoft.com/en-us/ie/forum/ie8-windows_7/how-to-turn-off-do-you-want-to-view-only-the/500bd75c-a104-407f-9230-3379de5c4133)。

以下是您需要采取的步骤：

> A) 打开 Internet Explorer 并单击“工具”，然后单击“Internet 选项”。
> 
> B) 单击“安全”选项卡，然后单击“Internet”。
> 
> 在“选择一个区域以查看或更改安全设置”下。
> 
> C) 单击“此区域的安全级别”下的“自定义级别”。
> 
> D) 向下滚动到“杂项”部分。
> 
> E) 在“显示混合内容”下选择“启用”。
> 
> F) 点击“确定”和“应用”保存设置。

# iphone - Facebook 非好友无法点赞来自 ios 应用的公开帖子

> ID：10493582
> 
> 赞同：1
> 
> 时间：2012-05-08T06:22:15.757
> 
> 标签：iphone, ios, facebook, facebook-graph-api, facebook-like

```
[Facebook requestWithGraphPath:@"1000029327084_2428832476/likes" andParams:params andHttpMethod:@"POST" andDelegate:nil]; 
```

这就是我在 Facebook 上发布我喜欢的内容。即使帖子是公开的，这也仅适用于朋友。那是非朋友不能喜欢任何帖子并收到错误210：

```
{
   "error": {
"message": "(#210) User not visible", 
"type": "OAuthException", 
"code": 210
}
} 
```

这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T22:32:50.540

这几乎可以肯定是用户的隐私设置——我的设置是这样的，即使在公开帖子上，也只有朋友的朋友可以与他们互动——帖子的详细信息说明了你喜欢或评论帖子的能力？IIRC 有一个布尔值返回

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:09:30.207

检查您的应用是否在应用仪表板中设置了任何用户限制。确保用户 ID 不受您设置的限制。

检查 FB 是否对您的应用设置了任何限制（例如，移动 Web 集成被 FB 阻止）。如果是这样，解决它们。

在 App Dashboard 中设置“iPhone App Store ID”。您可以输入一个假的，例如 123456，用于测试/开发。

# c# - 可以在 C# 中使用没有强命名程序集的 InternalVisibleTo 吗？

> ID：10493583
> 
> 赞同：9
> 
> 时间：2012-05-08T06:22:16.303
> 
> 标签：c#, unit-testing, scope, internal, internalsvisibleto

我在 MSDN 上找不到任何关于此的明确声明，有一些带有强名称的例子，其他的没有，对我来说，它似乎即使没有也应该工作，但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-08T06:26:38.340

该[文档](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)非常明确：

> 当前程序集和友元程序集都必须是未签名的，或者都必须使用强名称进行签名。如果它们使用强名称签名，则`InternalsVisibleToAttribute` 构造函数的参数必须包括完整的公钥以及程序集的名称。

有关*完整公钥*含义的示例，请参[见此答案。](https://stackoverflow.com/a/107958/464709)

# iphone - iPhone 中的 SOAP 和 REST 服务

> ID：10493586
> 
> 赞同：2
> 
> 时间：2012-05-08T06:22:28.140
> 
> 标签：iphone, ios, rest, soap

我正在学习 iPhone 中的解析，当我在搜索教程时，我对 SOAP 和 REST 服务了解得很少。

现在我想学习 SOAP 和 REST 服务。

有没有人有 SOAP 和 REST 的理论知识？有适合初学者的简单教程吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:37:58.760

查看这些链接，以及两者的比较

[http://www.ajaxonomy.com/2008/xml/web-services-part-1-soap-vs-rest](http://www.ajaxonomy.com/2008/xml/web-services-part-1-soap-vs-rest)

[http://greatgandhi.wordpress.com/2010/06/16/soap-vs-rest-%E2%80%93-the-best-webservice/](http://greatgandhi.wordpress.com/2010/06/16/soap-vs-rest-%E2%80%93-the-best-webservice/)

[http://www.petefreitag.com/item/431.cfm](http://www.petefreitag.com/item/431.cfm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T06:36:17.497

肥皂指南

```
http://sudzc.com/ 
```

休息指南

```
http://stackoverflow.com/questions/630306/iphone-rest-client 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T06:40:17.197

SOAP 网络服务

```
 -(IBAction) read_data
 {
  NSString *soapMessage = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                         "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                         "<soap:Body>\n"
                         "<CelsiusToFahrenheit xmlns=\"http://tempuri.org/\">n"
                         "<Celsius>%@</Celsius>n"
                         "</CelsiusToFahrenheit>n"
                         "</soap:Body>\n"
                         "</soap:Envelope>\n",name.text
                         ];

NSLog(@"soap Message= %@",soapMessage);
NSURL *url = [NSURL URLWithString:@"your URL "]; 
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

[theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue: @"http://tempuri.org/CelsiusToFahrenheit" forHTTPHeaderField:@"SOAPAction"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"POST"];
[theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
if( theConnection )
{
    webData = [[NSMutableData data] retain];
}
else
{
    NSLog(@"theConnection is NULL");
}
}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
[webData setLength: 0];
 }
 -(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
 {
[webData appendData:data];
 }
 -(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
 {
NSLog(@"ERROR with theConenction");
[connection release];
[webData release];
 }
 -(void)connectionDidFinishLoading:(NSURLConnection *)connection
 {
NSLog(@"DONE. Received Bytes: %d", [webData length]);
NSString *theXML = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
NSLog(@"theXML %@",theXML);    // Here is your received Value from url
[theXML release];
 } 
```

这是[RESTful WebService的示例](https://stackoverflow.com/questions/1452154/iphone-restful-webservices)

# ios - 无法将 UITableView 添加为子视图

> ID：10493587
> 
> 赞同：1
> 
> 时间：2012-05-08T06:22:29.470
> 
> 标签：ios, ios5

Xcode 4.3/iOS 5.1/故事板。

我在情节提要中有一个带有 UITableView 的 UIViewController

初始化该视图时

```
 -(void) loadView {

        UITableView *tTableView = [[UITableView alloc] initWithFrame:CGRectMake(20,60, 300, 300)
                                                               style:UITableViewStyleGrouped];
        [tTableView setDelegate:self];
        [tTableView setDataSource:self];
        [tTableView setBackgroundView:[[UIView alloc] initWithFrame:self.tableView.bounds]];
        self.tableView = tTableView;
        self.view = tTableView;  // <--- THIS WORKS
} 
```

这可行，但 TableView 会在屏幕的整个宽度上拉伸。我希望它具有一定的大小，因为我将它用于登录用户名/密码控制。

我被告知将其添加为子视图，但这会使我的应用程序崩溃，因为某种递归调用到相同的“loadView”方法中。

```
-(void) loadView {

    UITableView *tTableView = [[UITableView alloc] initWithFrame:CGRectMake(20,60, 300, 300)
                                                           style:UITableViewStyleGrouped];
    [tTableView setDelegate:self];
    [tTableView setDataSource:self];
    [tTableView setBackgroundView:[[UIView alloc] initWithFrame:self.tableView.bounds]];
    self.tableView = tTableView;
    [self.view. addSubview: tTableView]; // <-- THIS CRASHES

} 
```

为什么会崩溃？如何将 UITableView 添加到可以控制其宽度而不是占据整个屏幕宽度的子视图中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:26:48.660

您需要`self.view = tTableView`或`self.view = [UIView alloc] initWithFrame....`然后添加表格视图。覆盖该`loadView`方法意味着您将创建`self.view`. 因此，对于您的情况，创建一个`UIView`，将其设置为 self.view，然后将您的 tableView 添加为`self.view`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:29:58.190

您使用 loadView 方法，这意味着您自己定义视图。所以 self.view 没有定义，控制器抱怨它的视图在它应该显示自己时没有定义。

要么将您的界面放在 xib（或故事板）中，然后在 viewDidLoad 中绑定这些值，要么在 loadView 中手动实例化 self.view。

# c# - 'basePage' 类型同时存在于 ASP1.DLL 和 ASP2.DLL 中？

> ID：10493592
> 
> 赞同：1
> 
> 时间：2012-05-08T06:23:13.773
> 
> 标签：c#, asp.net, frameworks

我已将我的网页拍摄到一个新的虚拟主机上，现在我不时收到此异常：

> “/”应用程序中的服务器错误。
> 
> 编译错误
> 
> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS0433：类型“basePage”存在于“c:\Windows\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP.NET Files\root\60a943dd\2f0f659a\App_Code.n45tvdm2.dll”和“ c:\Windows\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP.NET Files\root\60a943dd\2f0f659a\App_Code.4kvzrnma.dll'
> 
> 源错误：
> 
> 第 9 行：使用 System.Web.UI.HtmlControls；第 10 行：第 11 行：公共部分类 _Default：basePage 第 12 行：{ 第 13 行：受保护的 void Page_Load(object sender, EventArgs e)
> 
> 源文件：\webstorage\storage_content\28\106228\MySite\public_html\sites\MySite\Default.aspx.cs 行：11

这在旧的虚拟主机上运行良好。

我已经阅读[了这个](https://stackoverflow.com/questions/2596118/asp-net-error-the-type-foo-exists-in-both-temp1-dll-and-temp2-dll-pt-2)和[这个](https://stackoverflow.com/questions/371426/asp-net-error-the-type-foo-exists-in-both-temp1-dll-and-temp2-dll)，但我不明白这个，为什么这一直在旧的虚拟主机上工作？ASP.NET 解决方案中没有任何改变？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T06:31:00.920

**从“c:\Windows\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP.NET Files\”**位置删除所有内容并尝试。

# ios - 如何以编程方式更改uibutton的背景颜色

> ID：10493600
> 
> 赞同：0
> 
> 时间：2012-05-08T06:24:01.903
> 
> 标签：ios, uibutton, uikit

如何将按钮的背景颜色更改为黑色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:17:53.340

如果您想以编程方式更改按钮的颜色，则必须将按钮的类型自定义为：-

```
UIButton *button = [UIButton buttonWithType:uibuttontypecustom];
note "uibuttontypecustom" 
```

然后你可以改变背景`[btn setBackgroundColor:[UIColor blackColor]];`或者你可以通过使用`steImage`方法设置黑色背景图像 on `btn`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T06:31:57.753

我想这会对你有所帮助

```
[button setBackgroundColor:[UIColor redColor]]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T06:40:37.900

Baiju 先生/女士请在下面查看我的代码，

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button.frame = CGRectMake(10, 200, 300, 40);
[button setTitle:@"Button" forState:UIControlStateNormal];
[button addTarget:self action:@selector(buttonAction) forControlEvents:UIControlEventTouchUpInside];
[button setBackgroundColor:[UIColor blackColor]];
[button setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];
[self.view addSubview: button]; 
```

我认为它将帮助您设置背景颜色并为按钮设置背景图像。如果要设置图像，请更改按钮类型`RoundedRect to Custom`。我希望它会对你有所帮助。谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T06:29:09.797

使用这行代码并尝试使用任何彩色图像。

```
[myButton setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-21T17:12:54.747

如果有人想知道如何用完整的代码在 swift 中制作同样的东西，那么这里就是……只需在你的 ViewController.swift 中编写这段代码

```
import UIKit

class ViewController: UIViewController
{ 
    var firstbutton:UIButton? //firstbutton = Your Button Name

    override func viewDidLoad() {
        super.viewDidLoad()
        self.firstbutton = UIButton.buttonWithType(UIButtonType.Custom) as? UIButton
        self.firstbutton!.frame = CGRectMake(100, 200, 100, 100)

        //This Line is used for color of your button

        self.firstbutton!.backgroundColor = UIColor.redColor()
        self.view.addSubview(firstbutton!)
    }

    //This section is used to bring the button in front of everything on the view

    override func viewDidAppear(animated: Bool) {
        self.view.bringSubviewToFront(self.firstbutton!)
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T06:40:21.187

在您的 XIB 中拖放一个按钮。进入右侧的按钮属性**并将按钮类型设置为自定义**。（或者你也可以在代码中做到这一点）。在您的 .h 文件中创建`UIButton * btn;`并将其绑定到 XIB。

然后转到 .m 文件并在 viewdidload 方法中对这段代码。

```
[btn setBackgroundColor:[UIColor blackColor]]; 
```

谢谢 ：）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-17T05:38:54.633

更改图层颜色 例如 self.btn.layer.backgroundColor = [UIColor redColor].CGColor;

# jsf - 如果放在里面就不起作用

> ID：10493601
> 
> 赞同：1
> 
> 时间：2012-05-08T06:24:14.490
> 
> 标签：jsf, jakarta-ee, primefaces, mojarra

jsf 有几个限制（缺陷？）导致这个问题。

```
 <ui:repeat value="#{myBean.myAttrs}" var="attr">
          <h:outputText value="#{myBean.selectedObj.values[attr.name]}" 
            rendered="#{attr.dataType=='Text'}"/>
          <h:selectBooleanCheckbox value="#{myBean.selectedObj.values[attr.name]}"
            rendered="#{attr.dataType=='Boolean'}"/>
           .... render other data type like list, date etc.
    </ui:repeat> 
```

jsf中的第一个“render”属性限制，即使render为false，组件仍然被处理。这会导致 ui:repeat 中的每个 attr 类型都会尝试评估每个输出组件的值。即 selectBooleanCheckbox 的值将尝试评估日期类型。如果 render 为 false，则组件最终不会被渲染。如果没有 selectBooleanCheckbox（第二期），即使有这个问题，一切都很好。第二个问题，selectBooleanCheckbox 将始终假定输入值是布尔类型。因此，对于日期类型，评估值（由于第一个问题）将失败。

这个代码狙击手是否常见于在 JSF 中动态显示不同的数据类型？我尝试为 selectBooleanCheckbox 配置自定义渲染器、转换器。但它仍然因数据类型转换异常而失败。任何想法？如何将 selectBooleanCheckBox 的默认“expectedType”从“Boolean”更改为“Object”，就像其他 JSF 输入组件一样。

--更新：这个问题只针对 mojarra 而不是 myfaces。

# macos - 为 NSTableView 启用编辑菜单

> ID：10493607
> 
> 赞同：0
> 
> 时间：2012-05-08T06:24:53.897
> 
> 标签：macos, cocoa, nstableview, edit, copy-paste

我是可可新手，但对 Cococa-Touch 有一些经验。当我正在开发一个使用表格（NSTableView 和 NSOutlineView）的 OSX Lion 应用程序时，我在尝试向表格添加复制粘贴功能时遇到了麻烦。

我在表格视图控制器中编码的拖放功能没有问题。但我无法启用编辑菜单选项（复制和粘贴）。

我确实阅读了苹果文件，但我错过了一些东西。我不能让它工作。您能否指导我启用该编辑菜单选项并从表格视图的控制器中处理它们的第一步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:07:35.300

我已经解决了，所以我回答我自己的问题。

我对 NSTableView 和 NSOutlineView 进行了子类化，并且在新类中包含了方法： -validateUserInterfaceItem: 、 copy: 等等。我错误地期望在 Table Delegates 中接收操作。

# linq - 如何使用 linq 打印所有值？

> ID：10493608
> 
> 赞同：1
> 
> 时间：2012-05-08T06:24:56.830
> 
> 标签：linq, windows-phone-7

我有一个列表框，我必须用查询中的元素填充它。查询是，

```
var query = from b in context.table select b; 
 List<Tab> reclist = q.ToList(); 
```

使用 LINQ 如何在列表框中打印所有获得的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:35:21.693

您需要创建一个`DataTemplate`包含您绑定到对象上`TextBlock`的`Text`属性的属性。所以，一些 XAML 之类的；

```
<ListBox x:Name="MyListBox">
  <ListBox.ItemTemplate>
    <DataTemplate>
      <TextBlock Text="{Binding Name}" />
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

假设您的`Tab`班级有一个名为`Name`. 显然，如果不是，您需要更改`{Binding Name}`XAML 的部分以匹配您要在`ListBox`.

然后你绑定到你的项目；

```
MyListBox.ItemsSource = reclist; 
```

# python - Python 模块导入重新定义命名空间/__repr__ 用于重构

> ID：10493611
> 
> 赞同：0
> 
> 时间：2012-05-08T06:25:23.273
> 
> 标签：python, django

我正在尝试为一系列 Django 模型重构我的代码，但这对一般的 python 导入有效。让我解释一下我的设置和问题（完全是假的课程等）

```
APP_ROOT/
|- __init__.py
|- tests/
|- urls.py
|- models/
|    |- __init__.py
|    |- BunchOfModels.py
|    |- SomeMoreModels.py
\- admin.py 
```

在`models.__init__`：

```
# models/__init__.py
from APP_ROOT.models.BunchOfModels import *
from APP_ROOT.models.SomeMoreModels import * 
```

这允许我执行以下操作：

```
from APP_ROOT.models import SuperModel
# Where SuperModel is in SomeMoreModels 
```

问题是类**repr**是：

`<class 'project.APP_ROOT.models.SomeMoreModels.SuperModel'>` 这弄乱了外键。

**我的问题**：

有没有办法做到这一点，以便我所有的课程都有一个更像是： `<class 'project.APP_ROOT.models.SuperModel'>`无需手动重载`__repr__`每个课程。我什至不确定这是否会解决问题，即使解决了，这也不会很好地移植。

还是我需要重新使用一个又大又丑的文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:24:50.053

正如我已经评论过的，Django 不建议您将模型分布在多个文件上。但这可以解决你的问题

```
from django.db import models

class SuperModel(models.Model):
    class Meta:
        app_label = 'APP_ROOT' 
```

`app_label`attr 应该在`Meta`每个模型中的类中。您也可以从基本元类[继承。](https://docs.djangoproject.com/en/dev/topics/db/models/#meta-inheritance) `Meta`

其他方法可能是将管理器、实用功能移到外部`models.py`（如果有的话）。但在这种情况下，您可能会获得循环导入。

# c - 使用结构变量时的链接器错误

> ID：10493618
> 
> 赞同：0
> 
> 时间：2012-05-08T06:25:48.607
> 
> 标签：c, linker

当我尝试编译下面的程序时，出现链接器错误：

```
/tmp/ccAikIsV.o    undefined reference to uvlc_encode_blockline 
```

我有声明和类型定义的所有结构 video_controller_t .. etc

```
int uvlc_encode_blockline(struct video_controller_t* controller, const struct    vp_api_picture_t* blockline, bool_t picture_complete );
int uvlc_decode_blockline(struct video_controller_t* controller,struct vp_api_picture_t* picture, bool_t* got_image );
int uvlc_update( struct video_controller_t* controller );
int uvlc_cache( struct video_controller_t* controller,struct video_stream_t* ex_stream);

const uvlc_codec_t uvlc_codec = {
uvlc_encode_blockline,
uvlc_decode_blockline,
uvlc_update,
uvlc_cache,
{ 0 }
}; 
```

如果有人有任何建议，请告诉我。

* * *

### 更新

我同意我们应该定义函数来告诉链接器获取并使用它。当我做类似的事情时，我没有收到任何错误。我声明了函数指针：

```
typedef C_RESULT (encode_blockline_fc)(struct video_controller_t controller,
                                       const struct vp_api_picture_t* blockline,
                                       bool_t picture_complete); 
```

并在下面的结构中使用它：

```
typedef struct _video_codec_t
{
    encode_blockline_fc encode_blockline;
    decode_blockline_fc decode_blockline;
    update_fc update;
    cache_stream_fc cache_stream;
} video_codec_t; 
```

如果以下语法有任何错误，请告诉我：

```
const uvlc_codec_t uvlc_codec = {
uvlc_encode_blockline,
uvlc_decode_blockline,
uvlc_update,
uvlc_cache,
{ 0 }
}; 
```

* * *

我同意我们应该定义函数来告诉链接器获取并使用它。当我做类似的事情时，我没有收到任何错误。我声明了函数指针 typedef C_RESULT (encode_blockline_fc)( struct video_controller_t controller, const struct vp_api_picture_t* blockline, bool_t picture_complete); 并在下面的结构中使用它 typedef struct _video_codec_t { encode_blockline_fc encode_blockline; decode_blockline_fc decode_blockline; update_fc 更新；cache_stream_fc 缓存流；}video_codec_t

如果下面的语法有什么问题，请告诉我： const uvlc_codec_t uvlc_codec = { uvlc_encode_blockline, uvlc_decode_blockline, uvlc_update, uvlc_cache, { 0 } };

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:27:44.897

链接器抱怨对函数的未解析引用，而不是结构。您应该将包含此函数的目标文件或库传递给链接器，或者在当前编译单元中定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:34:45.703

链接器错误的可能性很小-

**1-**如果您未能在链接过程中包含所有必要的目标文件。

**2-**如果一个类、函数或变量有多个定义。

所以检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:38:53.173

您已经告诉编译器该函数`uvlc_encode_blockline()`存在于某个地方，但是当链接器去寻找它时，它实际上找不到它——所以它抱怨它找不到它。

该声明足以让源文件编译为目标代码。要链接程序，您实际上必须定义函数并将包含定义的目标文件与引用它的目标文件链接。

# ssis - 是否可以在 SSIS 的平面文件源中设置记录数

> ID：10493623
> 
> 赞同：1
> 
> 时间：2012-05-08T06:26:19.810
> 
> 标签：ssis

有两种方式行采样和百分比采样，但都将所有数据加载到缓存中，然后从中获取一组记录。我有 6500 万条记录，无法将所有数据加载到缓存中。感谢建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:21:51.563

Unfortunately there's no property to determine how many rows to read on the flat file connection manager.

Another approach might be to use a script component and use the System.IO (or similar) namespace to manually import your CSV file. In that script you could limit the amount of rows that are read. Google "read CSV file .NET".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T11:00:04.547

没有直接的方法可以做到这一点。您可以使用“要跳过的数据行”属性尝试解决方法

![在此处输入图像描述](../Images/f3e2f1926833e3ec004bed8d420b7a7c.png)

您可以创建一个随机数字变量并通过配置将其设置为该属性：

![在此处输入图像描述](../Images/29da2ba6767cf4625fe7a1f6a51a44c0.png)

# actionscript-3 - How to change the style of listbox in as3?

> ID：10493627
> 
> 赞同：0
> 
> 时间：2012-05-08T06:26:35.037
> 
> 标签：actionscript-3, flash

i have created one textbox named cb and i added items

```
cb.addItem( { label: "Sovereign", data:1 } );
cb.addItem( { label: "Banks (with option - I)", data:2 } );
cb.addItem( { label: "Banks (with option - II)", data:3 } );
cb.addItem( { label: "Retail", data:4 } );
cb.addItem( { label: "Residential", data:5 } );
cb.addItem( { label: "Corporate", data:6 } ); 
```

i want to style these list items above.i have put the setStyle to text box but its changing only the stlye of selected item.

```
var myFormat:TextFormat = new TextFormat("verdana",12,0x000000);
cb.textField.setStyle ("textFormat",myFormat); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:33:07.130

I think you need to format the cell renderer also, hopefully this post will help:

[Combo box text formatting](http://www.rockabit.com/2008/04/15/combobox-text-formatting-in-as3/)

# c# - iis7集成windowsauthentication提示输入用户名和密码

> ID：10493631
> 
> 赞同：0
> 
> 时间：2012-05-08T06:26:42.107
> 
> 标签：c#, asp.net, iis-7

我在 vs 2008 中使用 asp.net 应用程序，我需要在 iis7 中使用 windows 身份验证。我已经在 web.config 中设置了 windows 身份验证，并在 iis 中启用了 windows 身份验证。我禁用了匿名身份验证。当我浏览本地主机时，它会询问用户名和密码。

对于 localhost 它不应该询问用户名和密码。

任何想法

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:35:17.210

如果您使用的是 IE，则从工具 --> Internet 选项 -- 高级选项卡启用 Windows 集成身份验证。此外，当您访问该站点时，请查看它要去哪个区域。如果要上网，单点登录可能不起作用。因此，您必须通过转到工具 --> 互联网选项 --> 安全选项卡 --> 本地 Intranet --> 站点 --> 高级 --> 键入 URL，例如[http://来将站点添加到您的 Intranet 区域yoursitename.test.com](http://yoursitename.test.com)并单击添加 还要确保工具 --> 互联网选项 --> 安全选项卡 --> 本地 Intranet --> 自定义级别 --> 身份验证 --> 仅在 Intranet 区域中自动登录选项被选中

Kerberos 也永远不会在本地机器上工作。您必须从网络中的远程计算机尝试。

祝你好运。

# php - 以 _ 开头的文件夹的正则表达式

> ID：10493635
> 
> 赞同：1
> 
> 时间：2012-05-08T06:26:49.947
> 
> 标签：php, regex

嗨，我正在编写一个脚本来遍历当前目录并列出所有子目录一切正常，但我无法排除以 _ 开头的文件夹

```
<?php

$dir = __dir__;

// Open a known directory, and proceed to read its contents
if (is_dir($dir)) {
    if ($dh = opendir($dir)) {
        echo("<ul>");
    while (($file = readdir($dh)) !== false) {
        if ($file == '.' || $file == '..' || $file == '^[_]*$' ) continue;
        if (is_dir($file)) {
            echo "<li> <a href='$file'>$file</a></li>";
        }
    }
    closedir($dh);
}
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:28:21.057

不需要正则表达式，使用`$file[0] == '_'`或`substr($file, 0, 1) == '_'`

如果你*确实*想要一个正则表达式，你需要使用[`preg_match()`](http://php.net/preg_match)来检查：`preg_match('/^_/', $file)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T06:29:39.433

您可以使用[`substr`*^([docs] 之)*](http://php.net/manual/en/function.substr.php)类的：

```
||  substr($file, 0, 1) === '_' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:32:51.553

或者，如果你想使用正则表达式，你应该使用正则表达式函数，比如 preg_match: `preg_match('/^_/', $file)`; 但正如ThiefMaster所说，在这种情况下`$file[0] == '_'`就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T07:09:18.683

更优雅的解决方案是使用[SPL](http://www.php.net/manual/en/book.spl.php)。GlobIterator[可以](http://www.php.net/manual/en/globiterator.construct.php)帮助您。每个项目都是[SplFileInfo](http://www.php.net/manual/en/class.splfileinfo.php)的一个实例。

```
<?php

$dir = __DIR__ . '/[^_]*';
$iterator = new GlobIterator($dir, FilesystemIterator::SKIP_DOTS);

if (0 < $iterator->count()) {
    echo "<ul>\n";
    foreach ($iterator as $item) {
        if ($item->isDir()) {
            echo sprintf("<li>%s</li>\n", $item);
        }
    }
    echo "</ul>\n";
} 
```

# ruby-on-rails - rake db:seed thorwing 无法批量分配受保护的属性

> ID：10493640
> 
> 赞同：3
> 
> 时间：2012-05-08T06:27:08.270
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake

我正在学习 ruby​​ on rails。我正在创建一个用于存储用户信息的模型，并且在调用**rake db:seed**时出现以下错误，知道我缺少什么吗？

```
rake db:seed

require 'digest'
class User < ActiveRecord::Base
  attr_accessor :password 
  attr_accessible :email, :password
  validates :email, :uniqueness => true, 
                                    :length => {:within => 5..50},
                                    :presence => true

  validates :password, :confirmation => true, :length => { :within => 4..20 }, :presence => true, :if => :password_required?

  has_one :profile

  has_many :articles, :order => 'published_at DESC, title ASC',
                      :dependent => :nullify
  has_many :replies, :through => :articles, :source => :comments

  before_save :encrypt_new_password

  def self.authenticate(email, password)
    user = find_by_email(email)
        return user if user && user.authenticated?(password)
  end

  def authenticated?(password)
    self.hashed_password == encrypt(password)
  end

  def encrypt_new_password
    return if password.blank?
      self.hashed_password  = encrypt(password)                                                                                                                                                                                                                                                                                                                                                                                                                                                              
  end

  def password_required?
    hashed_password.blank? || password.present?
  end

 def encrypt(string)
   Digest::SHA2.hexdigest(string)
 end 

end

Can't mass-assign protected attributes: password_confrimation
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security/sanitizer.rb:48:in `process_removed_attributes'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security/sanitizer.rb:20:in `debug_protected_attribute_removal'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security/sanitizer.rb:12:in `sanitize'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security.rb:230:in `sanitize_for_mass_assignment'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/attribute_assignment.rb:75:in `assign_attributes'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/base.rb:498:in `initialize'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/persistence.rb:44:in `new'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/persistence.rb:44:in `create'
C:/Users/huzaifa.gain/My Documents/Aptana Studio 3 Workspace/blog/db/seeds.rb:6:in `<top (required)>'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `block in load'
c:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:23 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T06:28:56.517

你必须添加`password_confirmation`到`attr_accessible`

```
class User < ActiveRecord::Base
  attr_accessor :password 
  attr_accessible :email, :password, :password_confirmation 
```

它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T09:06:19.077

正如日志所说“无法批量分配受保护的属性：password_confrimation”，您需要将 password_confrimation 添加到用户模型

attr_accessible :password_confrimation

# apache-flex - 找不到类 mx.core::DesignLayer

> ID：10493644
> 
> 赞同：0
> 
> 时间：2012-05-08T06:27:24.850
> 
> 标签：apache-flex, compiler-errors, flash-builder, runtime-error

我正在尝试运行我的 Flex 项目，但是在运行时出现错误： **VerifyError: Error #1014: Class mx.core::DesignLayer could not be found**

所以我为设计层类添加了一个导入语句：**import mx.core.DesignLayer**，现在我在编译时得到错误： **找不到定义 mx.core::DesignLayer**

什么是设计层？为什么即使我很难找到它导入它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:42:47.420

您可能正在使用旧 SDK 构建新功能。或者，您可能在使用较旧 SDK 构建的应用程序中重用使用较新 SDK 构建的第三方组件。

在任何一种情况下，`DesignLayer`该类都是在 Flex 版本 4 中引入的，如[docs 中所述](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/DesignLayer.html)。`DesignLayer`因此，如果您正在使用某种 Flex 3 风格构建应用程序，那么找不到该类是有道理的，只是因为它不存在。

去看看框架的源代码`[sdk-path]\frameworks\projects\framework\src\mx\core`。在 Flex 4+ 中，您会在`DesignLayer.as`那里找到该文件。在 Flex 3 中并非如此。

# javascript - 如何在网站上集成 Skype 聊天

> ID：10493652
> 
> 赞同：0
> 
> 时间：2012-05-08T06:27:57.140
> 
> 标签：javascript, html, skype

我正在此网站客户端中建立新网站，需要 24/7 实时客户支持。我想在网站上集成Skype聊天聊天界面应该在客户端的网站上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:37:31.020

您可以通过在您的网站上放置一个 Skype 按钮来使用它。 [http://www.skype.com/intl/en/tell-a-friend/get-a-skype-button/](http://www.skype.com/intl/en/tell-a-friend/get-a-skype-button/)

# python - Python 的新型类的基础 - `object` 和 `type`

> ID：10493655
> 
> 赞同：5
> 
> 时间：2012-05-08T06:28:03.540
> 
> 标签：python, object, types

根据文档，`object`是所有新式类的基类。

而且AFAIK，所谓的新式类只是可以通过继承获得一些新功能的类`object`，对吗？

我认为`object`继承`type`或使用`type`作为它的`__metaclass__`，但`object.__bases__`什么也没给我，那么这`object`是从哪里来的，它和它之间的关系是什么`type`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T06:40:53.420

事实上，一个类的类型（即元类）`object`是`type`：

```
type(object) == type      # True 
```

由于`object`是基类，它没有自己的父类，正如您所期望的：

```
object.__bases__ == ()    # True 
```

`object`没有`__metaclass__`属性，因为它不需要：它使用默认元类`type`.

现在它有点令人困惑，因为`type`它实际上是 的子类`object`，这令人难以置信（当你需要构造*时*`type`如何派生？）但这可以通过 Python 解释器中的 C 级别的一些硬编码来解决。`object``type` *`object`*

 *所有这些仅适用于新式类，即那些从`object`. 在 Python 3 中，所有类都是新样式的，因此这在 Python 3 中全局适用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T06:38:20.023

有两个概念可能有助于记住：

*   python中的一切都是一个对象，包括类和元类
*   元类是类的构造函数，而不是它们的祖先，所以它们不会出现在`__bases__`.

这意味着`object`确实具有`type`元类。

就像好奇一样，故事的“自相矛盾”部分`type`是关于它）。

这个悖论是用python源代码中的一些C voodoo解决的，但我对此了解不多！

**编辑：（**一些示例代码）

```
>>> class MyMeta(type):
...     def __new__(cls, name, bases, dct):
...         return type.__new__(cls, name, bases, dct)
... 
>>> class MyClass(object):
...     __metaclass__ = MyMeta
... 
```

现在观察`obj`继承自`object`

```
>>> obj = MyClass()
>>> MyClass.__bases__
(<type 'object'>,) 
```

至于您在评论中关于`dir(obj)`不输出`__metaclass__`属性**的问题：原因是这`__metaclass__`是*类*的属性，而不是其实例化*对象***的属性。实际上请注意：

```
>>> dir(MyClass)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__metaclass__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__']
>>> MyClass.__metaclass__
<class '__main__.MyMeta'> 
```

如果您有兴趣加深对元类的理解，这是一个经典的 SO 问题（当然答案非常全面！）：

[Python 中的元类是什么？](https://stackoverflow.com/q/100003/146792)

！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T07:58:38.700

你可能会发现[这个](http://eli.thegreenplace.net/2012/04/03/the-fundamental-types-of-python-a-diagram/)和[这个](http://eli.thegreenplace.net/2012/03/30/python-objects-types-classes-and-instances-a-glossary/)帖子很有趣。这是第一个的图表：

![在此处输入图像描述](../Images/fc806041a93c49553dad8555db1302d8.png)*

# objective-c - 在 iphone 应用程序的 PickerView 中显示不正确的值。

> ID：10493660
> 
> 赞同：0
> 
> 时间：2012-05-08T06:28:29.700
> 
> 标签：objective-c, ios, xcode

这是我显示pickerview的代码。

```
 - (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
{
    UILabel *pickerLabel = (UILabel *)view;
    CGSize limitSize = CGSizeMake(300.0f, 50.0f);
    CGSize textSize;
    CGRect labelRect;

    switch ([pickerView tag]) {

        case 1: //Quiz picker
        {    
            //m_txtPurpose.text=@"Test";
            QuizGenre *quiz = [m_arrQuizGenre objectAtIndex:row];
            NSString *title = [quiz m_quizGenreName];
            textSize = [title sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:limitSize lineBreakMode:UILineBreakModeWordWrap];
            labelRect = CGRectMake(0, 0, textSize.width, textSize.height);
            NSLog(@"length:%i title:%@",[title length],title);
            NSLog(@"h:%f w:%f",textSize.height,textSize.width);
            if (pickerLabel == nil)
            {
                pickerLabel = [[[UILabel alloc] initWithFrame:labelRect] autorelease];
                [pickerLabel setFont:[UIFont systemFontOfSize:14]];
                [pickerLabel setBackgroundColor:[UIColor clearColor]];
                [pickerLabel setLineBreakMode:UILineBreakModeWordWrap];
                [pickerLabel setTextAlignment:UITextAlignmentCenter];
                [pickerLabel setText:title]; 
                [pickerLabel setNumberOfLines:3];

            }

            break;  
        case 2:  //Purpose picker
            {
                //cost.text = @"ABC";
                Purpose *prp = [m_arrPurpose objectAtIndex:row];
                NSString *title = [prp m_purposeName];
                textSize = [title sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:limitSize lineBreakMode:UILineBreakModeWordWrap];
                labelRect = CGRectMake(0, 0, textSize.width, textSize.height);
                NSLog(@"length:%i title:%@",[title length],title);
                NSLog(@"h:%f w:%f",textSize.height,textSize.width);
                if (pickerLabel == nil)
                {
                    pickerLabel = [[[UILabel alloc] initWithFrame:labelRect] autorelease];
                    [pickerLabel setFont:[UIFont systemFontOfSize:14]];
                    [pickerLabel setBackgroundColor:[UIColor clearColor]];
                    [pickerLabel setLineBreakMode:UILineBreakModeWordWrap];
                    [pickerLabel setTextAlignment:UITextAlignmentCenter];
                    [pickerLabel setText:title]; 
                    [pickerLabel setNumberOfLines:3];

                }
                break;
            default:

                break;
            }

        }
    }
    return pickerLabel;
} 
```

我的 Picker 视图在第 6 行后显示错误值。我的测验选择器视图中有 13 个值。像测验类型：1>艺术2>地理3>常识到13号>电视。在第 6 个值之后，它从第一条记录开始。这是图像

![选择器快照中的错误值](../Images/54a0252ba503262bb3b0ddbcb40c9a56.png)

安装它应该显示类似这样的东西。电影、音乐、电视、政治等等。您的帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:22:45.107

我已经找到了解决这个问题的正确方法。这段代码所做的是在六条记录之后刷新选择器并且这个条件“如果（pickerLabel == nil）”变为假因此它重复相同的记录。我曾经将这行代码复制到其他部分，它对我来说也很好。

```
 else{
                [pickerLabel setFont:[UIFont systemFontOfSize:14]];
                [pickerLabel setBackgroundColor:[UIColor clearColor]];
                [pickerLabel setLineBreakMode:UILineBreakModeWordWrap];
                [pickerLabel setTextAlignment:UITextAlignmentCenter];
                [pickerLabel setText:title]; 
                [pickerLabel setNumberOfLines:3];
      } 
```

可能对像我这样面临同样问题的其他人有所帮助。

# c# - 如何从 asp.net mvc3 中的 ModelState 中删除以前保存的消息

> ID：10493661
> 
> 赞同：1
> 
> 时间：2012-05-08T06:28:30.700
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, modelstate

我有一个关于 asp.net mvc3 中的模型状态的问题，我有一个控制器假设`Home`和一个动作`submitform`。现在我第一次将我的表单提交给这个操作并且用户输入了一些错误我使用模型状态返回错误

```
ModelState.AddModelError("", "Your entered date is wrong ."); 
```

现在当用户再次提交表单时假设日期是正确的但这次他输入了错误的名称，现在当我在这一步返回错误时

```
ModelState.AddModelError("", "name should be at least 4 character long ."); 
```

但是现在当我返回这个时，我看到`name should be at least 4 character long .`并且也看到 `Your entered date is wrong.`了，有什么问题？

以下是我的完整代码

```
 [Authorize]
[System.Web.Mvc.OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
public class HomeController : Controller
{
       public ActionResult Formsubmit(mymodel RModel)
       {
          if(RModel.date != "2/2/2012")
           {
               ModelState.AddModelError("", "Your entered date is wrong .");
           }
           if(RModel.name.cout() < 4)
           {
               ModelState.AddModelError("", "name should be at least 4 character long .");

           }

           return View(RModel);
       } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T06:41:56.823

```
Modelstate.Remove("yourkey"); //remove one

Modelstate.Clear(); //remove all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:32:12.883

使用命名的错误消息。这使您能够清理它们：

```
ModelState.AddModelError("WrongData", "Your entered date is wrong ."); 
```

之后

```
ModelState.AddModelError("WrongData", ""); //clear error message
ModelState.AddModelError("WrongLenth", "name should be at least 4 character long ."); 
```

作为奖励，如果您出于某种原因决定显示某些错误消息 2 次，您也可以这样做：

```
ModelState.AddModelError("WrongData", "Your entered date is wrong .");
ModelState.AddModelError("WrongData2", "Your entered date is wrong ."); 
```

# android - 在项目单击时获取数组索引

> ID：10493663
> 
> 赞同：2
> 
> 时间：2012-05-08T06:28:37.997
> 
> 标签：android, textview

我已经创建了一个 Android RSS 阅读器应用程序。我在我的 android 应用程序中有一个文本框。我正在获取 RSS 提要并将 RSS 标题存储为一个数组。我将此数组设置为标记文本。检查代码，

```
String MarqueeStr="";
TextView flashnews;

for (int i = 0; i < nl.getLength(); i++) {

    MarqueeStr = MarqueeStr +" | "+ Headlines.Title[i];
        }

           flashnews.setText(MarqueeStr); 
```

现在我必须为我的选框设置一个 onclick 监听器，以便用户可以查看他们被点击的标题的详细描述。我知道如何设置它。但我的问题是，我怎样才能在用户单击选框时的选框文本？

这是我的 XML 布局，

```
<TextView
  android:id="@+id/flashs"
  android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:lines="1"
    android:ellipsize="marquee"
    android:layout_marginLeft="70dp"
    android:fadingEdge="horizontal"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:textColor="#e7e7e7" /> 
```

屏幕截图在这里..

![在此处输入图像描述](../Images/47a2f72bcede7310dc709a38abc09ef7.png)

你能看到那个“最新消息”吗？这是我的字幕文字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:29:35.097

I think that will only be possible if you will create your textviews dynamically and set id for them. like if you are having 10 news link then use 10 textviews

```
 TextView txt = null;
        View.OnClickListener marquee_click = new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                int selected_item = v.getTag();
                switch (selected_item) {
                case 0:

                    break;
                case 1:

                    break;
                case 2:

                    break;
                default:
                    break;
                }
            }
        };

        LinearLayout news_text_layout = new LinearLayout(getApplicationContext());
        news_text_layout.setOrientation(LinearLayout.HORIZONTAL);

        for (int i = 0; i < 10; i++) {
            txt = new TextView(getApplicationContext());
            txt.setTag(i);   // OR txt.setId(i);
            txt.setText("new " + i);
            txt.setOnClickListener(marquee_click);
            news_text_layout.addView(txt);
        }
        // ADD YOUR LINEAR LAYOUT ON WHICH YOU HAVE ADDED ALL TEXT VIEW IN YOUR LISTVIEW FOOTER.
        // NOW PERFORM SAME ANIMATION OR TRICK ON LINEAR LAYOUT WHICH YOU WERE PERFORMING ON marquee text. 
```

Hope it can help you...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:13:11.480

对于动画，看看我刚刚创建的这个。创建新项目，然后添加我提供的类和 xml 文件。

```
public class Test_stflowActivity extends Activity {
    LinearLayout ll = null;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final LinearLayout ll = (LinearLayout) findViewById(R.id.linearLayout1);
        final TranslateAnimation ts = new TranslateAnimation(200, -100, 0, 0);
        ll.setAnimation(ts);
        ts.setDuration(5000);
        TextView tv = new TextView(getApplicationContext());
        tv.setText("*bharat sharma*");
        tv.setTextSize(30);
        ll.addView(tv);
        ll.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                ll.startAnimation(ts);
            }
        });
    }
} 
```

这是xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true" >

    </LinearLayout>

</RelativeLayout>

it is working for me 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T06:46:58.767

您可以将每个 FlashNews 添加为动态创建的 TextView。您可以将所有这些放在一个 Horizo​​ntalScrollView 中。并分别设置他们的听众。

对于选取框功能，您可以在代码中以编程方式滚动水平视图。

我不知道你的想法是否可以实现。（实际上可以做到，但我猜它会包含痛苦）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:32:18.483

如果您将 a`ListView`与适配器一起使用（您应该这样做），您可以使用该`getItem(int position)`函数来获取特定项目。

# imagemagick - 使用 imagemagick 从图像中裁剪矩形区域

> ID：10493664
> 
> 赞同：3
> 
> 时间：2012-05-08T06:28:49.767
> 
> 标签：imagemagick, crop

我有一个图像。我需要从图像中裁剪矩形区域。该矩形区域由黑色边框标识。矩形里面是我需要的。是否可以在 imagemagick 中裁剪黑色边框的矩形区域？我知道可以通过提供矩形区域的偏移量（-crop WxH+X+Y）来使用裁剪命令。但我想裁剪矩形区域而不手动测量矩形的左上角和右下角。是否可以仅使用黑色边框来裁剪矩形区域...？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:24:10.560

这样的事情怎么样？

```
convert source.jpg -fuzz 10% -bordercolor black -border 1x1 -trim +repage dest.jpg 
```

您可能不得不使用“模糊”百分比。您需要 fuzz 选项的原因是，如果没有它，则修剪只会修剪完全黑色的像素 - 对于 JPEG，情况不太可能如此。

所有这些都在此页面上进行了解释：[http ://www.imagemagick.org/Usage/crop/#trim](http://www.imagemagick.org/Usage/crop/#trim)

此解决方案仅在黑色边框一直延伸到图像边缘时才有效。如果不是这种情况，那么我认为如果不以编程方式检查图像（例如逐个像素），您将无法使用 IM 做您需要做的事情。

# c# - 对得墨忒耳原理的法则感到困惑

> ID：10493666
> 
> 赞同：1
> 
> 时间：2012-05-08T06:29:00.150
> 
> 标签：c#, design-principles, law-of-demeter

为了解释我的问题，让我向您展示 C# 的示例代码。

```
interface IConstructorInfoSelector
{
    //ConstructorInfo is System.Reflection.ConstructorInfo class.
    ConstructorInfo SelectConstructorInfo(Type declaringType);
}

class TestClass
{
    private readonly ConstructorInfo _constructorInfo;

    public TestClass(IConstructorInfoSelector constructorInfoSelector, Type type)
    {
        //Let the line to (A)
        _constructorInfo = constructorInfoSelector.SelectConstructorInfo(type);
    }

    public TestClass(ConstructorInfo constructorInfo)
    {
        _constructorInfo = constructorInfo;
    }

    public Type GetTypeForConstructor()
    {
        //Let the line to (B)
        return _constructorInfo.DeclaringType;
    }
} 
```

在示例中，如果我用ctor(IConstructorInfoSelector, Type) 构造TestClass 并调用GetTypeForConstructor，它将通过(A) 和(B) 行违反LoD（Demeter 法则）。

但是，如果我执行以下代码，该代码是否违反了 LoD？我认为，一方面，它不违反，因为 (C) 行的 testClass 对象在方法内初始化并调用 GetTypeForConstructor 方法，另一方面，它似乎违反了上述情况的原则。综上所述，如果一个返回对象被用来创建另一个对象，这个执行会被认为是违反LoD？

```
class LoDQuestionForTestClass
{
    public void DeosThisVoliateTheLoD()
    {
        IConstructorInfoSelector concreteSelector = ...; 
        Type testType = ...;
        var selectConstructorInfo = concreteSelector.SelectConstructorInfo(testType);
       //Let the line to (C)
        var testClass = new TestClass(selectConstructorInfo);
        var result = testClass.GetTypeForConstructor();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:37:17.743

如果一个对象依赖于由第三个对象提供的另一个对象的行为，则您违反了 LoD。其民粹版本是“不要相信朋友的朋友”

在您的第二个示例中，您有另一个对象，该对象取决于第三方提供的对象，因此是的，这确实违反了“不信任朋友的朋友”，除非**仅用**`selectConstructorInfo`于其价值。

值得注意的是，LoD 是为*特定*项目（Demeter）创建的，并且它最严格的形式可能不适用于任何其他项目。

# ipad - jquery mobile splitview插件，从非分页过渡到分页

> ID：10493678
> 
> 赞同：1
> 
> 时间：2012-05-08T06:29:38.377
> 
> 标签：ipad, jquery-mobile

我正在将 jquery mobile 用于 iPad 应用程序，并且我想拥有典型的 splitview 布局，所以我使用了 splitview 插件，它到目前为止工作正常，但我仍然有一些小问题：

*   我的第一页可以是普通页面，即不拆分，然后例如当我单击一个按钮时转到将要拆分的第二页吗？
*   如果我发现左侧面板有点窄，如何放大左侧面板？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:17:17.460

我有同样的问题。我可以通过在导航菜单中的链接上提供 rel="external" 来解决此问题。然而，这会重新加载整个页面，并且 ajax 效果消失了。

```
 <li><a href='somepage' rel="external">Some Text</a></li> 
```

这个周末我会花一些时间来让它通过 ajax 工作，如果我找到解决方案会告诉你。

# c++ - 如何在Linux中获取当前目录下的文件信息

> ID：10493682
> 
> 赞同：0
> 
> 时间：2012-05-08T06:29:43.880
> 
> 标签：c++, linux, ftp

我正在 Linux 中实现一个 FTP 服务器。当用户发送 CWD 命令时，我使用 chroot 命令更改当前工作目录。但是后来我不能再使用“ls -l”命令来获取文件列表信息了。在这种情况下有没有办法获取文件信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:38:32.473

`chroot`并不意味着更改当前目录。你应该使用`chdir`它。

（`chroot`更改根文件系统。因此，在进入用户目录之后，很可能在这个新的根文件系统中`chroot`找不到了。）`/bin/ls`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:41:05.480

您应该使用 chdir 而不是 chroot 来更改目录。然后，您可以使用[opendir](http://linux.die.net/man/3/opendir) [readdir](http://linux.die.net/man/3/readdir)扫描目录中的子目录。不要忘记也调用 ​​closedir。

# html - 我怎样才能让妈妈知道她的苏打饮料何时开始销售？

> ID：10493684
> 
> 赞同：4
> 
> 时间：2012-05-08T06:29:48.153
> 
> 标签：html, pdf, rss, feed, yahoo-pipes

我正在尝试创造一种方法，让我妈妈在她在 Stater Bros 购买的 Diet Rite 饮料开始销售时收到通知。我的想法是，我可以创建一个 Yahoo Pipe 来接收每周的广告提要和字符串 Diet Rite 的过滤器。雅虎管道本身就是一个 RSS 提要，因此，我会将管道传送到谷歌阅读器，这样我妈妈就会知道 Stater Bros 是否有促销活动。

看到 Stater Bros 如何拥有他们[每周广告](http://www.staterbros.com/Images/PDFs/weekly.aspx)的可搜索 PDF ，我认为让 Yahoo Pipes 搜索它是一件简单的事情。但是，Yahoo Pipes 不支持 PDF。

然后，我决定通过在线 PDF 到 HTML 转换器来传输 PDF，并将其提供给`Fetch Page`Yahoo Pipes 中的模块。事实上，转换器[非常成功](http://www.pdfdownload.org/pdf2html/pdf2html.php?url=http://www.staterbros.com/Images/PDFs/weekly.aspx&images=yes)，因为生成的 HTML 保留了文本，我可以搜索它并找到我需要的内容。然而，事实证明它以帧的形式吐出数据——因此我不能使用它。我找不到任何其他在线 PDF 到 HTML 转换器。

即使我能够将 PDF 的 HTML 导入 Yahoo Pipes，我也不确定这会带来什么好处，因为 Yahoo Pipes 不提供搜索/过滤 HTML 的方法。它主要适用于提要。

所以我被困住了。关于如何实现我想要做的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:23:18.597

如果您还没有完全使用它，那么您可能需要查看 Google 的缓存系统 ..

```
http://webcache.googleusercontent.com/search?q=cache:http://www.staterbros.com/Images/PDFs/weekly.aspx 
```

它在 SEO 圈子之外并不广为人知，但 Googlebot 实际上确实执行了粗略的 PDF 到 HTML 和文本的转换。如果您迫不及待地等待 Google 转换 PDF 文件，还有几个免费的 PHP 脚本可以执行相同的功能。

因为管道没有等效的“Preg_match”，所以你必须通过删除不是你想要的东西来向后工作。

替换模块的正则表达式看起来像这样...... **^(.+?)Diet Rite(.+?)$** *替换从字符串开头到“Diet Rite”的所有内容，然后替换“Diet Rite”之后的所有内容' 到字符串的末尾没有任何内容..*

因此，如果页面上存在“Diet Rite”，它将显示在管道中并且可以添加到 RSS 提要中，否则管道将返回空白。

# sql - SQL 中不同数据日期的不同值

> ID：10493685
> 
> 赞同：0
> 
> 时间：2012-05-08T06:29:53.853
> 
> 标签：sql, sql-server, date, sql-server-2008-r2, distinct

在我的表中，有时我有两个带有两个值的日期，但我只需要其中一个。无论如何要根据不同的日期选择一个不同的值吗？

例子：

```
DATADATE                ID
2008-06-30 00:00:00.000 12
2008-03-31 00:00:00.000 12
2007-12-31 00:00:00.000 3
2007-12-31 00:00:00.000 12
2007-09-30 00:00:00.000 3
2007-09-30 00:00:00.000 12
2007-06-30 00:00:00.000 3
2007-06-30 00:00:00.000 12
2007-03-31 00:00:00.000 3
2007-03-31 00:00:00.000 12
2006-12-31 00:00:00.000 3
2006-09-30 00:00:00.000 3
2006-06-30 00:00:00.000 3 
```

我需要得到的是：

```
DATADATE                ID
2008-06-30 00:00:00.000 12
2008-03-31 00:00:00.000 12
2007-12-31 00:00:00.000 12
2007-09-30 00:00:00.000 12
2007-06-30 00:00:00.000 12
2007-03-31 00:00:00.000 12
2006-12-31 00:00:00.000 3
2006-09-30 00:00:00.000 3
2006-06-30 00:00:00.000 3 
```

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:31:59.370

你可以使用`group by`：

```
select  DATADATE
,       max(IDs)
from    YourTable
group by
        DATADATE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:44:09.690

如果您使用的是 sql server 2005+。然后你可以这样做：

```
;WITH CTE
AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY ID ORDER BY DATADATE DESC) AS RowNbr,
        Table1.*
    FROM
        Table1
)
SELECT
    *
FROM
    CTE
WHERE
    CTE.RowNbr=1 
```

**编辑**

在 CTE 函数中，您可以`join`或做任何您无法获得所需输出的事情。像这样：

```
;WITH CTE
AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY Table1.ID ORDER BY Table2.DATADATE DESC) AS RowNbr,
        Table1.*
    FROM
        Table1
        JOIN Table2
            ON Table1.ID = Table2.ID
)
SELECT
    *
FROM
    CTE

WHERE
    CTE.RowNbr=1 
```

# c# - 如何检查每个特定元素是否存在

> ID：10493687
> 
> 赞同：0
> 
> 时间：2012-05-08T06:29:56.563
> 
> 标签：c#, xml, c#-4.0, .net-4.0

我想知道如何检查每个特定元素是否存在。
我编写了以下代码，但我认为这并不聪明。

```
if(xmlDoc.Descendants("ElementA").Any() && xmlDoc.Descendants("ElementB").Any() && .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:34:17.760

你可以这样做：

```
if (new[] {"ElementA", "ElementB", "ElementC"}
           .All(element => xmlDoc.Descendants(element).Any()))
{
} 
```

如果可以的话，我建议保存一个成员：

```
private static readonly string[] ELEMENTS = new string[]
                                                {
                                                    "ElementA",
                                                    "ElementB",
                                                    "ElementC"
                                                }; 
```

而不是每次都重新创建它。然后你可以这样做：

```
if (ELEMENTS.All(element => xmlDoc.Descendants(element).Any()))
{
} 
```

# jquery - 使用 CSS/jQuery 重新定位 5 个 DIV 的最佳方法？

> ID：10493691
> 
> 赞同：4
> 
> 时间：2012-05-08T06:30:06.517
> 
> 标签：jquery, css

我有一个缓存页面（所以，我不能修改它），有 5 个结果。我想让用户按“旧”或“新”订购。

所以，这将是html：

```
<div class="result">Result #1</div>
<div class="result">Result #2</div>
<div class="result">Result #3</div>
<div class="result">Result #4</div>
<div class="result">Result #5</div> 
```

我想要一种方法来轻松地重新排序结果，这样它们就可以看到：

```
Result #5
Result #4
Result #3
Result #2
Result #1 
```

我怎么能做到？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:35:20.773

有一个很棒的插件可以做到这一点

[http://jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T06:40:27.057

`result`您可以像这样颠倒 div的顺序：

```
var items = $(".result");
var parent = items.eq(0).parent();
items.each(function() {
    parent.prepend(this);
});​ 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/hvGy5/](http://jsfiddle.net/jfriend00/hvGy5/)

# c# - C#：如何将数学函数从文本框传递到函数

> ID：10493699
> 
> 赞同：0
> 
> 时间：2012-05-08T06:30:30.853
> 
> 标签：c#, function, string-parsing

我有一个文本框，我想在其中读取用户输入的数学函数（例如：Math.Sqrt(x) 等）。

我用于控制台测试功能的代码是

```
 static double f(double x)
    {
        double f;
        f = Math.Sqrt(x);
        return f;
    } 
```

我不确定如何修改它：我是否读取字符串中的文本框内容，并将该字符串作为第二个参数添加到 f 函数（ static double f(double x, string s)? 我应该使用哪种类型的解析适用于字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T06:33:20.297

有[几个公式解析器](http://www.codeproject.com/search.aspx?q=formula%20parser&doctypeid=1)可供您使用。

基本上，您需要评估您的公式的某人/某事。

我在自己的项目中成功地使用[了这个。](http://www.codeproject.com/Articles/13779/The-expression-evaluator-revisited-Eval-function-i)它允许像这样调用它

```
var ev = 
    new Eval3.Evaluator(
        Eval3.eParserSyntax.c,/*caseSensitive*/ 
        false);

MessageBox.Show(ev.Parse("1+2+3").value.ToString()); 
```

我*不*建议使用[C# 代码的动态编译，](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)因为它将每个编译的代码添加到您的应用程序域（“应用程序域”）中，并且没有再次卸载它的选项。（如我错了请纠正我）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:37:22.440

另一位评估员：[http ://csharp-eval.com/](http://csharp-eval.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:39:07.120

如果您对如何从文本框中获取文本并使用该值执行某些操作感兴趣，则以下代码将为您执行此操作。如果你想在文本框中输入一个函数 - sqrt(40) 你应该检查这个项目： http: [//www.codeproject.com/Articles/23061/MathParser-Math-Formula-Parser](http://www.codeproject.com/Articles/23061/MathParser-Math-Formula-Parser)

[http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.aspx)

```
static double f(Textbox tb)
{
    double f;
    double x = Double.Parse(tb.Text);
    f = Math.Sqrt(x);
    return f;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:39:21.927

您可以执行任意代码，但并不容易。对于一般代码，您必须创建一个包装类并将代码插入到函数中。

看看[http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/6a783cc4-bb54-4fec-b504-f9b1ed786b54/](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/6a783cc4-bb54-4fec-b504-f9b1ed786b54/)

# python - Project Euler #22 Python，缺少 2205 个点？

> ID：10493702
> 
> 赞同：2
> 
> 时间：2012-05-08T06:30:45.703
> 
> 标签：python

我正在处理 Project Euler 的问题 22：

> 使用 names.txt（右键单击并“将链接/目标另存为...”），一个 46K 的文本文件，其中包含超过 5000 个名字，首先按字母顺序对其进行排序。然后计算每个名称的字母值，将该值乘以其在列表中的字母位置以获得名称分数。
> 
> 例如，当列表按字母顺序排序时，价值 3 + 15 + 12 + 9 + 14 = 53 的 COLIN 是列表中的第 938 个名称。因此，COLIN 将获得 938 × 53 = 49714 的分数。
> 
> 文件中所有名称分数的总和是多少？

[http://projecteuler.net/problem=22](http://projecteuler.net/problem=22)

当我在下面编译我的代码时，我得到了答案**871196077**。正确答案应该是**871198282**。

> 进口时间
> 
> def euler_22():
> 
> ```
> ## Creates a sorted list of the names in Py_Euler_22.txt
> names = open('Py_Euler_22.txt', 'r')
> names = names.read()
> names = names.split('","')
> names[0] = names[0][1:]
> names[-1] = names[-1][:-2]
> names = sorted(names)
> 
> ## Creates a dictionary: letter -> value
> value_letters = {}
> start = ord("A")
> for i in range(0, 26):
>     value_letters[chr(start+i)] = i+1
> 
> result = 0
> 
> for i in range(1, len(names)+1):
>     name = names[i-1] 
>     sum_letters = 0
>     for letter in name:
>         sum_letters += value_letters[letter]*i 
>         # = value of the letter multiplied with the name position
>     result += sum_letters
> return result 
> ```
> 
> tstart = time.time() print euler_22() print "运行时间：" + str(time.time() - tstart)

我试图找到一个具有类似解决方案的程序，但我只知道 Python，这限制了选项。我用我创建的更简单的文本文件运行程序，在那里我可以在没有程序的情况下得到答案，并且所有这些都有效。我用谷歌搜索了问题的答案，但这也无济于事，因为我找不到缺失的点。

我是初学者，所以我非常感谢有关程序和 Python 的任何提示，不仅是那些，这将帮助我正确解决问题。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:57:03.867

你不小心弄错了一个名字。

这`qnames`是您的代码生成的名称排序列表，`sorted_names`是我的：

```
>>> for a,b in zip(qnames, sorted_names):
...     if a != b:
...         print a, b
... 
ALONS ALONSO 
```

* * *

为了好玩：单行 - 嵌套列表推导，你好！

```
print sum ( [ (pos+1) * nv for pos, nv in enumerate([ sum ( [ ord(char) - 64 for char in name ] ) for name in sorted([name.strip('"') for name in open('names.txt','r').readline().split(",")]) ]) ] ) 
```

或者更具可读性：

```
print sum (
    [(pos+1) * nv for pos, nv in
        enumerate([ sum ([ ord(char) - 64 for char in name ] ) for name in
            sorted([name.strip('"') for name in
                open('names.txt','r').readline().split(",")]) ]) ] ) 
```

黑魔法是 ASCII`A`是整数`65`，ASCII`B`是整数`66`，依此类推——这样`ord(char) - 64`就可以得到`char`.

* * *

编辑2：

我将完整的、人类可读的解决方案塞进一行以供您娱乐。

```
with open('names.txt','r') as f:
    data = f.readline();

names = [name.strip('"') for name in data.split(",")]
sorted_names = sorted(names)
name_values = [ sum ( [ ord(char) - 64 for char in name ] ) for name in sorted_names ]
name_position_values = [ (pos+1) * nv for pos, nv in enumerate(name_values) ]
total_sum = sum(name_position_values)

# debug output
from pprint import pprint
#position, word value, position * word value, word
pprint(zip(xrange(1,len(names)+1),name_values,name_position_values,sorted_names)) 
```

请注意大量使用列表推导`[x for x in list_of_xes]`而不是循环，以及`sum()`函数而不是`for x in xes: sum += x`.

这里还有一些其他技巧，但带回家的教训是列表推导和处理列表的函数可以使您的代码更简单，更易于阅读。

* * *

编辑3：

该`pprint.pprint()`功能是一个“漂亮`print()`”。非常适合调试。

* * *

编辑4：

代码高尔夫版本（142 个字符）：

```
print sum([(p+1)*v for p,v in enumerate([sum(map(ord,n))-64*len(n) for n in sorted([n[1:-1] for n in open('names.txt').read().split(",")])])]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:51:52.073

我刚刚交叉检查了你的代码，看起来你无意中砍掉了最后一个单词的最后一个字符。要从最后一个单词中去掉引号，请使用：

```
names[-1] = names[-1][:-1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T15:43:03.140

当您将文件内容转换为列表时，不要尝试一次从名称中删除所有引号，而是在处理列表时删除它们。

```
# Project Euler Problem 22
# Name Scores

def score(name):
    total = 0

    for char in name:
        total += (ord(char) - 64) # scale so A = 1, B = 2...

    return total

def main():
    # Open the names file for reading
    infile = open('names.txt', 'r')

    # Read the entire contents of the file
    file_contents = infile.read()

    # Close the file
    infile.close()

    # Convert file contents to a list of quoted names and sort them
    list_of_names = file_contents.split(',')
    list_of_names.sort()

    position = 1
    total = 0
    for name in list_of_names:
        name = name.strip('"') # strip the quotes from names individually
        total += score(name) * position
        position += 1

    print(total)

if __name__ == "__main__":
    main() 
```

# ios - iPad 应用程序在锁定屏幕后变为非活动状态

> ID：10493703
> 
> 赞同：1
> 
> 时间：2012-05-08T06:30:49.157
> 
> 标签：ios, ipad, background, screen-lock

在我的应用程序中，我在某个时间点使用`NSOperation`. 这两个过程大约需要。2-3 分钟。如果应用程序保持活动状态，那么一切正常。但是，如果 iPad 屏幕被锁定（自动或手动），应用程序将变为非活动状态，下载/上传会暂停，并且当屏幕在一段时间后解锁时，进程因超时错误而失败。

我在 plist 文件中有“所需背景模式”的“应用程序播放音频”。屏幕锁定时，我是否需要为运行应用程序设置任何其他标志？

请帮助我出了什么问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T06:44:01.423

当屏幕锁定时，您的应用程序将变为非活动状态。根据iOS App Programming Guide 中的[“响应中断” ：](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

> 按下睡眠/唤醒按钮是另一种类型的中断，它会导致您的应用程序暂时停用。当用户按下此按钮时，系统禁用触摸事件，**将应用程序移至后台**，但将应用程序的 applicationState 属性的值设置为`UIApplicationStateInactive`（而不是`UIApplicationStateBackground`），最后锁定屏幕。

根据同一指南[中的“在后台执行有限长度任务”](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW28) ，您可以获得额外的后台任务时间：

> 正在过渡到后台的应用程序可以请求额外的时间来完成任何重要的最后一分钟任务。要请求后台执行时间，请调用该类的[`beginBackgroundTaskWithExpirationHandler:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/beginBackgroundTaskWithExpirationHandler:)方法`UIApplication`。如果您的应用在任务进行时移动到后台，或者如果您的应用已经在后台，则此方法**会延迟您的应用暂停**。如果您的应用程序正在执行一些重要任务，例如将用户数据写入磁盘或**从网络服务器下载重要文件，**这可能很重要。

您可以参考文档在后台实现一个有限长度的下载任务。

其他参考：

*   [使用 iOS4 在后台下载数据](https://stackoverflow.com/q/4704037/1241690)
*   [iOS应用后台下载](https://stackoverflow.com/q/4579810/1241690)

# javascript - 在 Web Worker 中解析 HTML DOM

> ID：10493706
> 
> 赞同：1
> 
> 时间：2012-05-08T06:31:04.380
> 
> 标签：javascript, html, firefox-addon, web-worker

我正在尝试使用我的 firefox/chrome/safari 扩展从网页中提取内容。捕获工作正常，但是当我捕获完整的网页时，需要很长时间并且 UI 被阻止。我想将捕获/DOM 解析代码移动到不同的线程（Web Worker）。但是网络工作者无权访问 DOM。有没有办法解决这个问题？

我正在使用以下代码将脚本注入网页：

```
function executeScript(script, messageKey, callback) {
        var wm = Components.classes["@mozilla.org/appshell/window-mediator;1"].getService(Components.interfaces.nsIWindowMediator);
        var mainWindow = wm.getMostRecentWindow("navigator:browser");
        mainWindow.gBrowser.selectedBrowser.messageManager.loadFrameScript(script, true);
        mainWindow.gBrowser.selectedBrowser.messageManager.addMessageListener(messageKey, callback);
    }

executeScript("chrome://extension/content/contentscript.js", "onSelectionReceived", onSelection); 
```

所有的 DOM 处理都发生在这个脚本'contentscript.js'中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T17:45:24.207

如果您尝试执行的工作需要与 DOM 交互，而这恰好需要很长时间，并且您无法将其重构为*不需要*与 DOM 交互，那么有一种方法可以不使用 WebWorkers。

（因为正如您所发现的，WebWorkers 无权访问 DOM）

考虑使用数组处理。基本思想是将你需要做的工作分成不同的块，在完成工作块后，使用 Timer 定期将控制权交还给 DOM（UI 线程）。

这是数组处理的基本示例：

```
function saveDocument(id){
    var tasks = [openDocument,writeText,closeDocument,updateUI]

    setTimeout(function(){

        //execute the next task
        var task = tasks.shift();
        task(id);

        //determine if there's more
        if (tasks.length > 0) {
            setTimeout(arguments.calee, 25);
        }
    }, 25);
} 
```

# iphone - 如何将标签栏控制器添加到拆分视图控制器应用程序的根视图

> ID：10493711
> 
> 赞同：3
> 
> 时间：2012-05-08T06:31:23.900
> 
> 标签：iphone, objective-c, uisplitviewcontroller, ipad

![在此处输入图像描述](../Images/4d606f27e54ce7311209ee41766db07a.png)

我对 iPad 很陌生`UISplitViewController`。

我需要在主视图/左视图的底部添加一个包含 3 个选项卡的选项卡栏。对于 3 个选项卡中的每一个，我都有一个不同的视图控制器。我还没有找到在基于拆分视图的应用程序中使用标签栏的任何其他示例。

在哪里插入标签栏控制器以显示在根视图的底部？

如何建立连接，以便当我选择表格单元格时，detailItem 信息会显示在详细信息视图中？选项卡栏已添加到 IB 的根视图中。我应该以编程方式添加它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:40:22.967

在您的应用程序委托中添加标签栏控制器，然后将您的视图控制器添加到标签栏控制器并将窗口根视图控制器设置为标签栏控制器。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
 self.tabbar=[[UITabBarController alloc] init];

   self.vc1 = [[vc1 alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];
   // do the same to other VCs
    self.tabbar.viewControllers=[NSArray arrayWithObjects:vc1,vc2,vc3,vc4, nil];

self.window.rootViewController = self.tabbar;

[self.window makeKeyAndVisible];
return YES; 
```

}

我希望它有帮助:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:43:55.650

你必须动态地使用 UITabBarController。

在 .h 文件中

**UITabBarController *tabBar;**

在 .m 文件中

在 appDidFinish Launch 中为您的类创建对象

例如你有

1 类和 2 类

**在 appDidFinishLaunch 中**

**Class1 *obj1=[Class1 alloc]initWithNibName:@"Class1" bundle:nil];** **Class2 *obj2=[Class2 alloc]initWithNibName:@"Class2" bundle:nil];* *

// 主导航控制器默认自带模板代码

// 现在你已经为 tabBar 创建了数组

**NSArray *tabViewArray=[[NSArray alloc] initWithObjects:obj1,obj2,masterNavigationController, nil];**

**tabBar=[[UITabBarController alloc] 初始化];**

**[tabBar setViewControllers:tabViewArray];**

// 现在你必须用 tabBar 编辑包含 splitview.viewArray repalce masterNavigataionControler 的语句

**self.splitViewController.viewControllers = [NSArray arrayWithObjects:tabBar, detailNavigationController, nil];**

试试这个我希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:13:10.280

您所要做的就是将uispliviewcontroller 的第一个参数初始化为选项卡而不是视图，或者您可以使用uisegmentedcontrol。

# javascript - 将事件处理程序添加到孙子

> ID：10493714
> 
> 赞同：2
> 
> 时间：2012-05-08T06:31:48.870
> 
> 标签：javascript, jquery, html

我有一些具有层次结构的html代码

```
<div id="a">
    <span>
        <span id="s1">...</span>
        <span id="s2">...</span>
        <span id="s3">...</span>
    </span>
</div> 
```

我想将事件处理程序附加到 s1、s2、s3 并假设我不知道 id div.span。我试过了

```
$('#a span span').click(function(){
    alert('called');
}); 
```

但这不起作用。是否有任何其他选项可以访问元素的孙子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:32:53.643

[尝试使用`on()`和`> * > *`](http://jsfiddle.net/XUqTp/)。`>`指孩子。没有它，就意味着后代。然后第一个`> *`是孩子，第二个`> *`是孩子的孩子或“孙子”

```
$('#a > * > *').on('click', function() {
    alert('called');
}); 
```

我删除了我的第一个答案（的委托版本`on()`），因为我无法让它在 jsFiddle 上工作。我不确定为什么它不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T06:38:18.480

```
$('#a>span>span').click(function(){
    alert('called');
}); 
```

它将查看#a 和#a 的所有直接子级，这是一个跨度它在该跨度中查找直接子级的跨度

```
<div id="a">
    <span>
        <span id="s1">hit</span>
        <span id="s2">hit</span>
        <span id="s3">hit</span>
    </span>
    <span>
        <strong>
            <span>Wont hit</span>
        </strong>
    </span>
</div> 
```

使用该标记，所有文本命中的跨度都会在它们上产生一个点击事件。jsfiddle 测试：http: [//jsfiddle.net/voigtan/TeN2q/](http://jsfiddle.net/voigtan/TeN2q/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T06:44:14.183

您还可以在此处使用[事件委托](http://www.nczonline.net/blog/2009/06/30/event-delegation-in-javascript/)。仅将单击处理程序分配给父元素，在处理程序中检查单击发生的元素，并采取相应措施。例如：

```
$('#a').click(function(e){
  e = e || event;
  var src = e.target || e.srcElement;
  if (/^s/i.test(src.id)){ /* actions */ }
  return true;
}); 
```

# php - 如何将 php 数组传递给 Javascript？

> ID：10493718
> 
> 赞同：0
> 
> 时间：2012-05-08T06:31:59.747
> 
> 标签：php, javascript, mysql

> **可能重复：**
> [将 php 数组传递给 javascript 函数 将 PHP 数组](https://stackoverflow.com/questions/4885737/pass-php-array-to-javascript-function)
> [传递给 Javascript 数组](https://stackoverflow.com/questions/10220642/pass-php-array-into-javascript-array)

我在将 PHP 数据传递给 Javascript 时遇到问题。我需要将 addr 列传输到数组，然后将数组传递给 Javascript，我如何从 PHP 中获取它然后在 Javascript 中使用数组？谢谢你

```
<?php
  require_once 'Common/system_start.php';
  $sql="select addr from tab_mem order by sn desc ";
  $result=  mysql_query($sql);
  $data=mysql_fetch_assoc($result);
  $row=mysql_num_rows($result);
  $n = array(); 
  for($i=0;$i<$rows;$i++) 
  { 
   $data=mysql_fetch_row($result); 
   $n[i] = $data[i]; 
  } 

  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:38:40.877

尝试：

```
<script>
var jsArray = ["<?php echo join("\", \"", $n); ?>"];
alert(jsArray);
</script> 
```

# java - 如何在按下时以编程方式更改按钮文本颜色？

> ID：10493719
> 
> 赞同：0
> 
> 时间：2012-05-08T06:32:07.440
> 
> 标签：java, android

我创建这样的按钮：

```
Button button = new Button(this); 
button.setText("2012");
button.setBackgroundColor(Color.TRANSPARENT);
button.setOnClickListener(mCorkyListener);
layout.addView(dateButton); 
```

在点击listiner上我有这个方法。在这里，我想更改按钮文本颜色。Bu View 没有这个方法

```
 private OnClickListener mCorkyListener = new OnClickListener() {
        public void onClick(View v) {
          // do something when the button is clicked
            //v.setBackgroundColor(Color.RED);
//so how to change pressed button text color ?
//v.setTextColor(colors);
        }
    }; 
```

不会只有一个按钮。其中会有很多，我需要在按下按钮时更改文本颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:45:22.123

我知道你问过关于更改文本颜色的问题，其他人都很好地涵盖了这一点，但你也可以更改按钮颜色本身（我发现它比文本颜色更改更明显：p）......

```
import android.graphics.PorterDuff; 
```

要将其设置为绿色（假设您从标准灰色按钮开始）：

```
aButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View view) {
        Button aButton = (Button) view.findViewById(R.id.abutton);
        aButton.getBackground().setColorFilter(0xFF00FF00, PorterDuff.Mode.MULTIPLY);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:35:56.857

```
button.setTextColor(Color.WHITE); 
```

这将改变按钮的文本颜色。你想在点击按钮时给按钮一个按下效果吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:36:26.467

最好的方法不是以编程方式（使用[selector](http://www.mkyong.com/android/android-imagebutton-selector-example/)），但如果您想以编程方式进行，您可以将其转换为`Button`然后更改颜色。

```
public void onClick(View v) {
    Button b = (Button) findViewById(v.getId());
    b.setBackgroundColor(Color.RED)l
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:37:59.710

```
 private OnClickListener mCorkyListener = new OnClickListener() {
    public void onClick(View v) {          
     Button button = (Button)v;
     button.setTextColor(Color.RED);
        }
    }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T06:38:26.123

如果您有兴趣使用 View`onClick(View v)`则只需将其转换为 Button

```
 public void onClick(View v) {
        if(v instanceof Button){
              ((Button)v).setTextColor(Color.WHITE);
           }
     } 
```

# php - 如何从主范围内的子类中获取受保护的静态值

> ID：10493720
> 
> 赞同：0
> 
> 时间：2012-05-08T06:32:09.887
> 
> 标签：php, oop, static

如何从子类中获取值作为主范围内的受保护 ststic 属性。我在这些行中使用，但它不起作用。

```
self::$table_name="Table_shape_B";
self::$table_name="Table_shape_C"; 
```

我想看看这些线谢谢。

```
selected Database Table name: Table_shape_B
selected Database Table name: Table_shape_C 
```

输出是

```
new B : are created :
new C : are created :
selected Database Table name:
selected Database Table name: 
```

这是我的代码：

```
<?php
    abstract class Class_A {

      protected static $table_name;
         //Class_B Database Table name =  "Table_shape_B"
         //Class_CA Database Table name =  "Table_shape_C"
        public function __construct()   {
            echo "<br />"." new ".get_class($this)." : are created :";
        }

        public function get_table_name_protected() {
            return self::$table_name;
        }
    }

    class B extends Class_A {
        //self::$table_name="Table_shape_B";
    }

    class C extends Class_A     {
     //self::$table_name="Table_shape_C";
    }

    $NewObject1= new B ( );
    $NewObject2= new C ( );

    echo "<br />".' selected Database Table name: '.$NewObject1->get_table_name_protected();
    echo "<br />".' selected Database Table name: '.$NewObject2->get_table_name_protected();

 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:37:02.613

见[http://docs.php.net/language.oop5.late-static-bindings](http://docs.php.net/language.oop5.late-static-bindings)

> 自 PHP 5.3.0 起，PHP 实现了一种称为后期静态绑定的功能，该功能可用于在静态继承的上下文中引用被调用的类。[...] “后期绑定”来自这样一个事实，即 static:: 不会使用定义该方法的类来解析，而是使用运行时信息来计算。它也被称为“静态绑定”，因为它可以用于（但不限于）静态方法调用。

不幸的是，您不能像使用抽象成员方法那样“强制”子类定义这个静态成员。

```
<?php
abstract class Class_A {

    public function __construct()   {
        echo get_class($this), "\n";
    }

    public function get_table_name_protected() {
        return static::$table_name;
    }
}

class B extends Class_A {
    protected static $table_name="Table_shape_B";
}

class C extends Class_A     {
    protected static $table_name="Table_shape_C";
}

$NewObject1= new B ( );
$NewObject2= new C ( );

echo $NewObject1->get_table_name_protected(), "\n";
echo $NewObject2->get_table_name_protected(), "\n"; 
```

印刷

```
B
C
Table_shape_B
Table_shape_C 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:57:04.833

[编辑] 早餐后，我意识到这段代码在我正在研究的 CMS 中会有多酷。并利用数组完成了它。

```
<?php

error_reporting(E_ALL);

abstract class Class_A {

    protected static $table_name = array();

    public function __construct()   {
        $tmp = get_class($this);
        echo "<br />"." new ".$tmp." : are created :";
        self::$table_name[$tmp] = "Table_shape_" . $tmp;
    }

    public function get_table_name_protected() {
        $tmp = get_class($this);
        return self::$table_name[$tmp];
    }
}

class B extends Class_A {

}

class C extends Class_A {

}

$NewObject1= new B( );

$NewObject2= new C( );

echo "<br />".' selected Database Table name: '.$NewObject1->get_table_name_protected();

echo "<br />".' selected Database Table name: '.$NewObject2->get_table_name_protected();

?> 
```

旧的输出，一次完成 1 个：

```
 new B : are created :
 selected Database Table name: Table_shape_B
 new C : are created :
 selected Database Table name: Table_shape_C 
```

新输出：

```
 new B : are created :
 new C : are created :
 selected Database Table name: Table_shape_B
 selected Database Table name: Table_shape_C 
```

我真的要感谢发帖人提出这样一个有趣的问题。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:24:49.063

但是为什么你需要静态变量呢？

```
abstract class Class_A
{

    /**
    * Hold table name
    * @var string
    */
    protected $table_name = null;

    /**
    * Get protected table name
    * @return string
    * @throws RuntimeException
    */
    public function get_table_name_protected()
    {
        if (null === $this->table_name) {
            throw new RuntimeException('Table name is not defined');
        }
        return $this->table_name;
    }
}

class Class_B extends Class_A
{
    protected $table_name = "Table_shape_B";
}

class Class_C extends Class_B
{
    protected $table_name = "Table_shape_C";
} 
```

# google-calendar-api - 如何使用 gdata iphone 客户端在谷歌日历中检查特定事件

> ID：10493722
> 
> 赞同：0
> 
> 时间：2012-05-08T06:32:15.303
> 
> 标签：google-calendar-api, gdata-api

使用 GData 客户端，我可以从 Google 日历中获取所有事件，但我只想从 Google 日历中获取特定事件（即通过 iCalUDID）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:22:01.107

我不熟悉 GData 客户端，但也许您可以通过阅读 api 文档并使用示例找到答案。你看过[Events:get](https://developers.google.com/google-apps/calendar/v3/reference/events/get)的文档了吗？获取特定事件的 json 的 URL 如下所示：[https ://www.googleapis.com/calendar/v3/calendars/calendarId/events/eventId?pp=1&key=yourApiKey](https://www.googleapis.com/calendar/v3/calendars/calendarId/events/eventId?pp=1&key=yourApiKey)

# cvs - 如果从工作副本中删除了某些文件，如何将工作副本提交到 CVS 存储库？

> ID：10493727
> 
> 赞同：0
> 
> 时间：2012-05-08T06:32:26.060
> 
> 标签：cvs, commit

我想将我的工作副本提交到 CVS 存储库，首先我这样做：

```
>>> cvs -n update 
```

查看进行了哪些更改。我得到以下信息：

```
cvs update: warning: crc/etable.tar.gz was lost 
```

然后我尝试提交：

```
>>> commit cvs

cvs commit: Up-to-date check failed for `crc/etable.tar.gz'
cvs [commit aborted]: correct above errors first! 
```

我不明白我在上面遗漏了什么。如果从我的工作副本中删除了一个文件，为什么会出现问题？如何解决此问题并提交到 CVS 存储库？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:04:33.350

如果你打算永久删除文件，那么你需要告诉 cvs。IE。

```
cvs rm crc/etable.tar.gz 
```

然后正常提交。如果您执行 a `cvs update`，则该文件应显示状态，`R`表示它已计划删除。

如果文件被意外删除并且您确实想要将其取回，则可以从存储库中检索它：

```
cvs up crc/etable.tar.gz 
```

# mysql - 子查询的更好方法

> ID：10493728
> 
> 赞同：6
> 
> 时间：2012-05-08T06:32:40.523
> 
> 标签：mysql, sql, subquery

我有一个数据库，其中`article`表与自身具有多对多关系（通过`article_rel`）并`articles`具有`types`. 父母有一个类型 1234，而孩子可以是几种类型之一。

我正在努力寻找以下父母： 没有孩子；或者，如果他们有孩子，则最近的子文章不是特定类型的集合。

以下内容适用于第二部分，但不涉及第一部分。我为拉出子查询以引用它返回的值（添加“或为空”）所做的每一次尝试都失败了。我也想知道是否有更好的方法来写这样的东西。

```
SELECT 
 CONCAT('http://www.sitename.com/', n.id, '.html') as URL,
 n.added,
 u.email,
 n.body
 #c.body
 FROM
     warehouse.article n 
 inner join site.user u on n.user_id = u.id
 inner join warehouse.article_param np on np.id = n.id and np.param_name = 'ready' and np.param_value = 'true'
 where
     n.type_id = 1234 
 and
     (select 
           c.type_id 
      from 
           warehouse.article c, 
           warehouse.article_rel r
      where
           r.child_nid = c.id
           and r.parent_nid = n.id
      order by 
           c.added desc 
      limit 1)
      not in (2245,5443)
 order by 
      n.updated desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:11:05.073

您应该能够使用 MAX(add) 仅查找最新添加的子项。派生表 x 查找父 n.id 的最新添加的孩子的日期（如果该部分对您没有意义，请参阅[此）。](http://dev.mysql.com/doc/refman/5.0/en/example-maximum-column-group-row.html)然后 t 找到关于最新添加的孩子的数据。我使用左连接来获取 n.id 的最新添加的孩子，因为如果没有孩子，那么它将在孩子的位置留下空值，从而为您提供所有没有孩子的文章。

```
SELECT n.added, CONCAT('http://www.sitename.com/', n.id, '.html') as URL,
u.email, n.body #c.body
FROM warehouse.article n 
inner join site.user u on n.user_id = u.id
inner join warehouse.article_param np on np.id = n.id and np.param_name = 'ready' and np.param_value = 'true'
left join (SELECT r.parent_nid, MAX(added) as latest
              FROM warehouse.article c
              INNER JOIN warehouse.article_rel r on c.id = r.child_nid
              GROUP BY r.parent_nid) as x on x.parent_nid = n.id
left join warehouse.article t on t.added = x.latest
where n.type_id = 1234 and (t.type_id is null or t.type_id not in (2245,5443))
order by n.updated desc 
```

如果有可能有不止一篇文章具有完全相同的添加日期，那么您必须使用 t 的派生表来检查亲子关系：

```
left join (SELECT c.type_id, c.id, c.added, r.parent_nid
           FROM warehouse.article c
           INNER JOIN warehouse.article_rel r on c.id = r.child_nid)
           as t on t.parent_nid = n.id and t.added = x.latest 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:30:04.630

```
SELECT 
n.added,
CONCAT('http://www.sitename.com/', n.id, '.html') as URL,
u.email,
n.body
#c.body
FROM
    warehouse.article n 
inner join site.user u on n.user_id = u.id
inner join warehouse.article_param np on np.id = n.id and np.param_name = 'ready' and np.param_value = 'true'
left join 
     (
           select r.parent_nid, c.type_id 
           from warehouse.article c
           left join warehouse.article_rel r on r.child_nid = c.id and r.parent_nid = n.id     
           order by c.added desc 
           limit 1
      ) child_type
      on child_parent_nid = n.id
where
    n.type_id = 1234 and (child_type.type_id not in (2245,5443) or child_type.type_id is null)
order by 
    n.updated desc 
```

Only test in my mind, not sure it's 100% correct or not. Any correction is very welcome. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:46:54.390

First Query Will Get the parents who have no children While Second Query will get the parent whose most recent child article is not of a certain set of types. UNION will itself provide you the DISTINCT result set.

There are so many nested select but don't worry all of them are applying filters on your already loaded main result set so it will not effect performance, you can test it while executing query on Db console.

```
SELECT
 CONCAT('http://www.sitename.com/', n.id, '.html') AS URL,
 n.added,
 u.email,
 n.body
 FROM
 warehouse.article n
 JOIN site.user u ON n.user_id = u.id
 JOIN warehouse.article_param np ON np.id = n.id AND np.param_name = 'ready' AND <br/> np.param_value = 'true'
 LEFT JOIN warehouse.article_rel r ON r.parent_nid = n.id
 WHERE
 n.type_id = 1234  AND r.id IS NULL

 UNION

 SELECT URL,added,email,body FROM
 (SELECT * FROM
(SELECT

 CONCAT('http://www.sitename.com/', n.id, '.html') AS URL,
 n.added,
 u.email,
 n.body,
 nr.type_id
 FROM
 warehouse.article n
 JOIN site.user u ON n.user_id = u.id
 JOIN warehouse.article_param np ON np.id = n.id AND np.param_name = 'ready' AND <br/> np.param_value = 'true'
 JOIN warehouse.article_rel r ON r.parent_nid = n.id
 JOIN warehouse.article nr ON r.child_nid=nr.id
 WHERE
 n.type_id = 1234
 ORDER BY n.id DESC
 ) AS tbl1
GROUP BY id
Where  type_id NOT IN (2245,5443) 
```

# android - 自定义视图不膨胀

> ID：10493729
> 
> 赞同：6
> 
> 时间：2012-05-08T06:32:40.717
> 
> 标签：android, custom-controls, custom-component

我正在尝试通过 xml 创建我的自定义视图，但屏幕没有显示我的视图，因为它没有膨胀。我的自定义视图 xml 如下：

```
 <?xml version="1.0" encoding="utf-8"?>
<ViewSwitcher xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/profileSwitcher"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/imgAdvertise"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@android:drawable/btn_minus" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >

        <TextView
            android:id="@+id/txtAdvertise"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="asdas" />
    </LinearLayout>

</ViewSwitcher> 
```

我有我的自定义`View`类：

```
public class MyCustomView extends View{

    TextView textAdvertise;
    ImageView imageAdvertise;
    View view;
    ViewSwitcher switcher ;

    public MyCustomView(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub

        LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        if (layoutInflater != null) {
            view = layoutInflater.inflate(R.layout.main, null);

        }

        initialize();
    }

    public void initialize() {
        // TODO Auto-generated method stub

        textAdvertise = (TextView) view.findViewById(R.id.txtAdvertise);
        imageAdvertise = (ImageView) view.findViewById(R.id.imgAdvertise);
        switcher = (ViewSwitcher) view.findViewById(R.id.profileSwitcher);
        startAnimation();

    }

    public void startAnimation() {
        // TODO Auto-generated method stub

        new Thread() {
            public void run() {

                for (;;) {
                    try {

                        Thread.sleep(2000);
                        hRefresh.sendEmptyMessage(5);
                    } catch (Exception e) {
                    }
                }
            }
        }.start();
    }

    Handler hRefresh = new Handler() {
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case 5:
                switcher.showNext();
                // To go back to the first view, use switcher.showPrevious()
                break;
            default:
                break;
            }
        }
    };

} 
```

在我必须显示的基本 xml 布局中`View`，是一个按钮和我`View`的 as：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:text="Button" 
    android:layout_weight="1"/>

<com.example.viewswitcher.MyCustomView 
    android:id="@+id/MyView"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"

    /> 
```

谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T06:47:49.380

您将什么也看不到，因为`MyCustomView`在您编写它时没有任何内容。首先，我会使用其中一个`ViewGroups`孩子而不是`View`（比如`LinearLayout`等`RelativeLayout`）：

```
public class MyCustomView extends LinearLayout {

    TextView textAdvertise;
    ImageView imageAdvertise;
    View view;
    ViewSwitcher switcher ;

    public MyCustomView(Context context, AttributeSet attrs) {
        super(context);
    }

    public MyCustomView(Context context, AttributeSet attrs) {
        super(context, attrs);
        LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        if (layoutInflater != null) {
            view = layoutInflater.inflate(R.layout.main, this, true);
        }
        initialize();
    }

     public MyCustomView(Context context, AttributeSet attrs, int theme) {
         super(context, attrs, theme);
     }
// ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T07:05:54.377

使用它来扩展您的布局。 **编辑**

```
 View headerView = View.inflate(this, R.layout.layout_name, null); 
```

这将返回您的 xml 文件的父布局，然后您可以直接使用它，或者您可以通过使用找到任何其他视图

**编辑**

```
headerView.findViewById(R.id.view_id); 
```

希望它会工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:50:31.457

我认为您需要的不是自定义视图。也许您应该继承自 View 的 Fragment 类。

[在这里](http://developer.android.com/guide/topics/fundamentals/fragments.html)查看如何实现自己的片段。

# android - android ndk 音高转换

> ID：10493735
> 
> 赞同：2
> 
> 时间：2012-05-08T06:33:01.647
> 
> 标签：android, audio, pitch-shifting

我正在使用此处提供的本机音高转换 cpp 代码为 android 开发应用程序：

www.dspdimension.com/admin/pitch-shifting-using-the-ft/

该应用程序将读取 wav 文件，更改其音高，然后将文件写回 sd 卡上。读取 wav 文件和回写方法工作正常，但是当我应用音高偏移然后写入时，我只返回静态，即原始音频丢失并且只听到静态..

似乎在将数据从 java 传递到 cpp 代码时存在 se 问题

谁能帮我这个？

cpp 代码在那个链接上，我在 cpp 中创建了一个函数来使用该代码：

```
JNIEXPORT jfloatArray JNICALL Java_com_pitch_PitchActivity_pitchShift (JNIEnv * pEnv, jobject pThis, jfloat pitchShift, jlong numSampsToProcess, jlong fftFrameSize, jlong osamp, jfloat sampleRate, jfloatArray inputdata) {
    jfloat* ind,ata = pEnv->GetFloatArrayElements(inputdata,0);
    float outdata[numSampsToProcess];
    jfloatArray res;
    res = pEnv->NewFloatArray(numSampsToProcess);
    memset(outdata, 0, numSampsToProcess*sizeof(float));
    smbPitchShift(pitchShift, numSampsToProcess, fftFrameSize, osamp, sampleRate, indata, outdata);
    pEnv->SetFloatArrayRegion(res, 0, numSampsToProcess, outdata);
    return res;
} 
```

此代码调用 cpp 代码的 smbPitchShift 方法。

从 java 代码中，我传递了以下值：

```
float[] parr = new float[data.length];
parr = pitchShift(0.6f, (long)data.length, (long)2048, (long) 4, (float) sampleRate, data); 
```

这里的data是一个float数组，包含从wav文件中提取的数据，范围为[-1.0,1.0)

# django - 如果 == 无法正确解析，则 django 模板

> ID：10493739
> 
> 赞同：0
> 
> 时间：2012-05-08T06:33:05.737
> 
> 标签：django

所以我有一个简单的模板问题。在 URL 视图中，我传递了一个名为“样式”的变量，然后传递了一个包含一堆模型信息的字典。要正确处理它：

```
{{ style }}
{% for recipe in recipes %}
    {{ recipe.recipe_style }}
    {% if recipe.recipe_style == style %}
        {{ recipe.recipe_style }}
    {% endif %}
{% endfor %} 
```

所以这个块应该返回的是：

晚餐 晚餐 晚餐 晚餐 晚餐

因为食谱模型中只有两个条目，都将'Dinner'设置为recipe_style（charfields），并且样式通过视图和urlconf（“r'^（？P[-A-Za-z0- 9_]+)/" 从 URL 'http://.../Dinner/' 中获取 'Dinner'）。它返回的是：

晚餐 晚餐 晚餐

这是因为 if 语句返回错误。但为什么？“晚餐”==“晚餐”！我唯一的猜测是格式问题？在将它传递给视图之前，我尝试了 style=str(style) ，但仍然没有用。

编辑：这是外壳中显示的内容：

```
>>> RecipeStyle.objects.all()
[<RecipeStyle: Dinner>, <RecipeStyle: Lunch>, <RecipeStyle: American>, <RecipeStyle: Italian>, <RecipeStyle: French>]
>>> recipe = Recipe.objects.get(pk=1)
>>> recipe.recipe_style
<RecipeStyle: Dinner> 
```

它在控制台中工作：

```
>>> if recipe.recipe_style == RecipeStyle.objects.get(pk=1):
...     print "poop"
... 
poop 
```

那么为什么不在模板中呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:38:25.480

你确定这`recipe.recipe_style`实际上等于`'Dinner'`？可能会有额外的空格导致此操作失败，但浏览器仍会将其显示为相同（因为浏览器会忽略多个空格进行显示）。

尝试`pre`在您的视图中使用标签或 repr print 包装配方，例如：

```
print repr(recipe.recipe_style) 
```

然后重新加载页面并检查开发服务器控制台，它应该显示字符串值（用引号括起来）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T02:50:00.823

我做错了。我的 if 语句正在过滤传递给模板的查询集；笨，对吧？我通过过滤视图中的配方模型然后传递过滤后的查询集来修复它。

# xml - 这个 XSLT 有什么问题？

> ID：10493741
> 
> 赞同：-1
> 
> 时间：2012-05-08T06:33:11.243
> 
> 标签：xml, xslt

下面是我的 XML 代码 -

```
<Para>
  <Desc>....</Desc>
  <References>
    <BookRef>
      <BookName>ABC of HTML</BookName>
      <Chapter>1</Chapter>
      <BookName>HTML : The Complete Reference</BookName>
      <Chapter>1</Chapter>
    </BookRef>
  </References>
</Para>
<Para>
  <Desc>....</Desc>
  <References>
    <BookRef>
      <BookName>ABC of XML</BookName>
      <Chapter>2</Chapter>
      <BookName>XML : The Complete Reference</BookName>
      <Chapter>10</Chapter><Chapter>11</Chapter>
    </BookRef>
  </References>
</Para> 
```

我需要使用 . 以表格格式显示以上内容`HTML Table Tag`。所以它应该看起来像 -

```
Description of Paragraph (the text between the Desc tags)

**Book Name**                                  **Chapters**
ABC of HTML                                      1
HTML: The Complete Reference                     1

Description of Paragraph (the text between the Desc tags)

**Book Name**                                  **Chapters**
ABC of XML                                       2
HTML: The Complete Reference                     10, 11 
```

读者可以直接跳到上述章节，我已经创建了超链接。下面是 XSLT 代码 -

```
<xsl:template match="References">
   <xsl:if test="CaseRef != ''"><br/>
      <table border="1" width="100%">
      <tr>
        <td width="75%">Book Name</td>
        <td align="right">Chapters</td>
      </tr>
      <xsl:for-each select="BookName">
      <tr>
        <td valign="top">
          <xsl:value-of select="."/>
        </td>
        <td align="right" valign="bottom">
          <xsl:for-each select="following::Chapter">
          <a id="lnk">
         <!-- This code will create a hyperlink to jump directly on the said chapter-->
            <xsl:attribute name="href">
              <xsl:value-of select="concat(concat('#',.),./@L)"/>
            </xsl:attribute>
            <xsl:value-of select="."/><xsl:text> </xsl:text>
          </a>
          </xsl:for-each>
        </td>
      </tr>
      </xsl:for-each>
  </table>
   </xsl:if>
</xsl:template> 
```

我缺少一些东西（可能更多）来获得所需的输出！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:06:31.773

XSLT 有几个问题。首先，在**References**模板中，您正在遍历**BookName**名称元素，但这些元素嵌套在**BookRef**元素中，因此您应该这样做

```
<xsl:for-each select="BookRef/BookName" /> 
```

（或者最好使用应用模板来避免过多的嵌套代码）

下一个问题是这个循环，您可以在其中循环各章

```
<xsl:for-each select="following::Chapter"> 
```

这里的问题是它会拾取所有后续的**章节**元素，即使是那些出现在后续**书名**元素之后的元素。解决此问题的一种方法是定义一个保留，仅查找给定书籍的那些**章节**元素。

```
<xsl:key 
   name="Chapters" 
   match="Chapter" 
   use="generate-id(preceding-sibling::BookName[1])"/> 
```

然后，假设您位于**BookName**元素上，您可以获得匹配的**Chapter**元素，如下所示：

```
<xsl:apply-templates select="key('Chapters', generate-id())"/> 
```

试试下面的 XSLT（注意我已经删除了在你原来的 XSLT 中出现的对**CaseRef的引用）**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="Chapters" match="Chapter" use="generate-id(preceding-sibling::BookName[1])"/>

   <xsl:template match="Desc">
      <p>
         <xsl:value-of select="."/>
      </p>
   </xsl:template>

   <xsl:template match="References">
      <br/>
      <table border="1" width="100%">
         <tr>
            <td width="75%">Book Name</td>
            <td align="right">Chapters</td>
         </tr>
         <xsl:apply-templates select="BookRef/BookName"/>
      </table>
   </xsl:template>

   <xsl:template match="BookName">
      <tr>
         <td valign="top">
            <xsl:value-of select="."/>
         </td>
         <td align="right" valign="bottom">
            <xsl:apply-templates select="key('Chapters', generate-id())"/>
         </td>
      </tr>
   </xsl:template>

   <xsl:template match="Chapter">
      <xsl:if test="position() &gt; 1">
         <xsl:text>,</xsl:text>
      </xsl:if>
      <a id="lnk"><!-- This code will create a hyperlink to jump directly on the said chapter-->
         <xsl:attribute name="href">
            <xsl:value-of select="concat(concat('#',.),./@L)"/>
         </xsl:attribute>
         <xsl:value-of select="."/>
         <xsl:text/>
      </a>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML（假设它具有单个根元素）时，输出以下内容

```
<p>....</p>
<br/>
<table border="1" width="100%">
   <tr>
      <td width="75%">Book Name</td>
      <td align="right">Chapters</td>
   </tr>
   <tr>
      <td valign="top">ABC of HTML</td>
      <td align="right" valign="bottom">
         <a id="lnk" href="#1">1</a>
      </td>
   </tr>
   <tr>
      <td valign="top">HTML : The Complete Reference</td>
      <td align="right" valign="bottom">
         <a id="lnk" href="#1">1</a>
      </td>
   </tr>
</table>
<p>....</p>
<br/>
<table border="1" width="100%">
   <tr>
      <td width="75%">Book Name</td>
      <td align="right">Chapters</td>
   </tr>
   <tr>
      <td valign="top">ABC of XML</td>
      <td align="right" valign="bottom">
         <a id="lnk" href="#2">2</a>
      </td>
   </tr>
   <tr>
      <td valign="top">XML : The Complete Reference</td>
      <td align="right" valign="bottom">
         <a id="lnk" href="#10">10</a>,
         <a id="lnk" href="#11">11</a></td>
   </tr>
</table> 
```

# android - C2DM 身份验证错误

> ID：10493746
> 
> 赞同：5
> 
> 时间：2012-05-08T06:33:21.180
> 
> 标签：android, android-c2dm, auth-token

我有一个`C2DM`基于应用程序，它工作正常，但最近我得到了`Auth Error` 虽然我得到了 RID（注册 ID）并且正在发送消息。最近我读到客户端登录密钥即将到期（4 月 30 日），`may be`因为我收到了这个错误。我的问题是，我如何再生`Client Login Keys`？？？？怎么恢复`AUTH TOKEN`？？？？？？任何帮助将不胜感激......谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:41:00.103

你会在这里找到你的答案：

[http://android-developers.blogspot.com/2012/04/android-c2dm-client-login-key.html](http://android-developers.blogspot.com/2012/04/android-c2dm-client-login-key.html)

请注意：

*   您需要查看 Update-Client-Auth 标头的通信并相应地更新令牌
*   ClientLogin 协议现在已被弃用（仍然是唯一有效的协议 - 人们报告 OAuth 2.0 存在很多问题）
*   有时您可能会遇到一个问题，即提供的解决方案需要验证码，您必须在浏览器中手动完成（对于服务到服务的解决方案来说，这是一个非常愚蠢的解决方案）。

他们说，一旦您每周至少发送一条消息并注意 Update-Client-Auth 标头，您将永远不必再次重新生成您的 Auth。

# css - AJAX 调用后 div 不换行

> ID：10493747
> 
> 赞同：0
> 
> 时间：2012-05-08T06:33:40.137
> 
> 标签：css, html, html-table

我有一个 div 的问题。如果我按照以下方式进行操作，则 div 可以很好地包装文本：

```
<div class="ChatBox">
        <div id = "AllMessages" class ="AllMessages" style="position:absolute;width:100%;">fljadhfldhsfkljasdhfkjddasfasdfasafsdhasflhdasfhasdfjhdhasfkladfsdsf</div>
</div> 
```

但是，当我执行 AJAX 调用并使用 javascript 更改 div 的内容（插入 AJAX 调用返回的内容）时，包装不起作用。如果有什么要说的，返回的结果是一个 HTML 表？

```
xmlhttp.onreadystatechange=function()
{
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
    document.getElementById('AllMessages').innerHTML=xmlhttp.responseText;
  }
} 
```

它只是向面板添加了一个滚动条，因此可以向右滚动以查看整个内容。

希望任何人都可以提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:04:55.287

修改css属性为

```
.AllMessages
{ 
height:auto
overflow:auto
} 
```

希望这会奏效。

# mysql - 限制整数数据类型字段长度

> ID：10493758
> 
> 赞同：5
> 
> 时间：2012-05-08T06:34:30.133
> 
> 标签：mysql, sql, database, database-design

我试图限制整数字段可以包含的数字数量。例如，我希望该字段包含长度不超过 5 的数字，因此 99999 将是最高有效条目。

这可以在MySQL中做到吗？我查看了文档，但没有找到我的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:42:52.563

不幸的是，`CHECK`约束和用户定义的类型都没有在 MySQL 中实现。也许这会在未来的版本中改变。

在此之前，您可以使用触发器来更正输入，如果这是适合您的方法：

```
delimiter //
CREATE TRIGGER trigger_check BEFORE INSERT ON your_table
FOR EACH ROW 
BEGIN 
    IF NEW.NUM > 99999 THEN 
        SET NEW.NUM = 0; 
    END IF; 
END
// 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:36:23.920

每当对数据库进行更改时，您都可以添加触发器来强制执行此操作。触发器将在应用更改之前执行，以验证它是否正在使用“有效”条目进行更新。如果条目无效，则可以拒绝更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:35:53.847

这在数据库级别是不可能的。您必须使用存储过程，或者将该逻辑放入您的应用程序中。

[http://dev.mysql.com/doc/refman/5.5/en/integer-types.html](http://dev.mysql.com/doc/refman/5.5/en/integer-types.html)

中等 int 是您可以获得的最接近的值。

此外，您可能会在某些时候看到类似的内容：

```
CREATE TABLE blah ( col INT (5) ); 
```

但是，这并没有按照您的想法进行。这实际上并没有将字段的长度限制为 5 个位置。它表示当在该列上设置 zerofill 时，它应该被 0 填充到 5 个位置。

# java - 查询未检索到嵌入式 JDO 字段

> ID：10493769
> 
> 赞同：5
> 
> 时间：2012-05-08T06:35:29.907
> 
> 标签：java, google-app-engine, jdo, datanucleus

我正在使用 App Engine 的 JDO 实现的本地开发版本。当我查询包含其他对象作为嵌入字段的对象时，嵌入字段返回为空。

例如，假设这是我坚持的主要对象：

```
@PersistenceCapable
public class Branch {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Long id;

    @Persistent
    private String name;

    @Persistent
    private Address address;

            ...
} 
```

这是我的嵌入对象：

```
@PersistenceCapable(embeddedOnly="true")
public class Address {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Long id;

    @Persistent
    private String street;

    @Persistent
    private String city;

            ...
} 
```

以下代码不检索嵌入对象：

```
 PersistenceManager pm = MyPersistenceManagerFactory.get().getPersistenceManager();

    Branch branch = null;
    try {
        branch = pm.getObjectById(Branch.class, branchId);
    }
    catch (JDOObjectNotFoundException onfe) {
        // not found
    }
    catch (Exception e) {
        // failed
    }
    finally {
        pm.close();
    } 
```

有人对此有解决方案吗？如何检索 Branch 对象及其嵌入的 Address 字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T06:49:24.167

我遇到了类似的问题，发现默认提取组中不包含嵌入式字段。要加载所需的字段，您要么必须在关闭持久性管理器之前为其调用 getter，要么将获取组设置为加载所有字段。

这意味着以下...

```
branch = pm.getObjectById(Branch.class, branchId);
pm.close();
branch.getAddress();  // this is null

branch = pm.getObjectById(Branch.class, branchId);
branch.getAddress();  // this is not null
pm.close();
branch.getAddress();  // neither is this 
```

因此，您需要按如下方式更改代码：

```
Branch branch = null;
try {
    branch = pm.getObjectById(Branch.class, branchId);
    branch.getAddress();
}
catch (JDOObjectNotFoundException onfe) {
    // not found
}
catch (Exception e) {
    // failed
}
finally {
    pm.close();
} 
```

或者，您可以将提取组设置为包括所有字段，如下所示...

```
pm.getFetchPlan().setGroup(FetchGroup.ALL);
branch = pm.getObjectById(Branch.class, branchId);
pm.close();
branch.getAddress();  // this is not null 
```

# jquery - 如何访问由 jQuery 创建的输入元素

> ID：10493774
> 
> 赞同：1
> 
> 时间：2012-05-08T06:36:00.443
> 
> 标签：jquery, dynamic, input

我想创建一个上传表单，它在填写时总是显示一个新的文件输入。我试图通过创建新的输入来完成这项工作，但它只能工作一次。

这是代码：

```
<head><script type="text/javascript" src="jquery-1.7.2.min.js"></script></head>
<body><form>
  <div id="to"></div>
  ---
  <div id="from"><input type="file" class="new"></div>
</form>
<script type="text/javascript">
  $('.new').change(function() {
    $('.new').appendTo('#to').removeClass('new');
    $('#from').append('<input type="file" class="new">');
  });
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:37:21.187

```
<script type="text/javascript">
  $('.new').on('change',function() {
    $('.new').appendTo('#to').removeClass('new');
    $('#from').append('<input type="file" class="new">');
  });
</script> 
```

利用`on`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:37:50.007

```
<script type="text/javascript">
  $('.new').live('change',function() {
    $('.new').appendTo('#to').removeClass('new');
    $('#from').append('<input type="file" class="new">');
  });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:43:26.493

试试这个[http://jsfiddle.net/UxyMw/3/](http://jsfiddle.net/UxyMw/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:39:11.610

HIya 2**为您工作的演示**：http : [//jsfiddle.net/UxyMw/](http://jsfiddle.net/UxyMw/) 或[http://jsfiddle.net/UxyMw/1/](http://jsfiddle.net/UxyMw/1/)

两者都可以正常工作：

**代码：**

```
$('.new').on("change",function() {
    $('.new').appendTo('#to').removeClass('new');
    $('#from').append('<input type="file" class="new">');
  });​ 
```

# javascript - 在鼠标悬停时显示图像的一部分

> ID：10493782
> 
> 赞同：8
> 
> 时间：2012-05-08T06:36:33.860
> 
> 标签：javascript, css, html

在图像被涂黑的情况下进行“战争迷雾”类型的事情的最佳方法是什么，但是当用户将鼠标悬停在图像上时，会显示光标周围的区域。因此，可能在图像上使用 CSS 样式的某个图层，当用户将鼠标悬停在它上面时，它会变得透明，因此可以在鼠标周围的区域中看到图像，但图像的其余部分仍然是黑色的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T06:49:53.943

如果您只想使用 javascript 和 css 来执行此操作：

*   创建一个中间有透明孔的黑色图像
*   使用一些javascript来获取鼠标位置
*   更新css将雾图像的位置设置为鼠标指针

您必须确保所有内容都正确分层，以便您的图像位于雾图像下方，并且如果这不占用整个浏览器窗口，则雾图像位于其余内容下方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T07:50:06.103

我发现这是一个非常好的问题，所以对于未来的访问者，我将把它作为参考：

```
$(window).on('load', function () {
  var
    ctx = $('#canvas')[0].getContext('2d'),
    mouse = {x: -100, y: -100};

  // fill black
  ctx.fillStyle = 'black';
  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);

  // track mouse
  $('#canvas').on('mousemove.fog', function (evt) {
    mouse.x = evt.offsetX;
    mouse.y = evt.offsetY;
  });

  (function animloop(now) {
    var
      frame = webkitRequestAnimationFrame(animloop), // use a polyfill here
      x = mouse.x,
      y = mouse.y,
      r = 10,
      grad = ctx.createRadialGradient(x, y, 0, x, y, r);

    grad.addColorStop(0, "rgba(0, 0, 0, 255)");
    grad.addColorStop(1, "rgba(0, 0, 0, 0)");

    ctx.globalCompositeOperation = 'destination-out';
    ctx.fillStyle = grad;
    ctx.arc(x, y, r, 0, 2 * Math.PI, true);
    ctx.fill();
  }(Date.now()));
});​ 
```

演示：http: [//jsfiddle.net/RUc5s/1/](http://jsfiddle.net/RUc5s/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T06:48:30.410

在画布上，您可以在部分透明的图像上创建一个图层，但光标附近的区域将完全透明。图层实际上并不存在于画布上，但有一些框架可以让您创建图层。

在 HTML/CSS 上，您可以对具有 2 层的图像进行“拼贴”，下面是一个图像，上面是一个部分透明的 PNG。悬停时，图块的 PNG 设置为`display:none`显示下方的图像。

# php - 缓存验证 - 浏览器错误地验证缓存中的 cookie？

> ID：10493785
> 
> 赞同：1
> 
> 时间：2012-05-08T06:37:14.143
> 
> 标签：php, validation, caching, browser, cookies

我有以下情况：

*   用户向显示表单的 PAGE A 发出请求（服务器存储此页面的缓存）
*   用户将表单提交给用于表单提交的 CONTROLLER
*   CONTROLLER 在用户提交的数据中发现错误，设置一个 cookie ERRORS 详细说明，并将用户重定向回 PAGE A
*   PAGE A 显示原始内容加上 ERRORS（服务器存储此页面的缓存）
*   PAGE A 删除 ERRORS cookie

这有效，但前提是我不在系统上为 PAGE A 使用缓存。

问题是，在删除 cookie 后，浏览器在没有 cookie 的情况下向我的服务器发出请求并收到 304 Not Modified 错误，因此，浏览器仍然显示有错误的页面，而不是没有（来自原始请求）。服务器正确存储缓存（对于有错误的页面以及无错误的页面）。

基本上，服务器现在有两个缓存页面：PAGE A 和 PAGE A WITH ERRORS。

浏览器，其最后一个已知页面是 PAGE A WITH ERRORS 向服务器请求具有 PAGE A 条件的页面，而不是 PAGE A WITH ERRORS，因为 cookie 不再存在。但它认为 304 响应是关于 PAGE A WITH ERRORS，而不是 PAGE A。我什至检查了浏览器发送的数据，它知道它使用 ERRORS cookie 获得了 PAGE A WITH ERRORS，但接受 304 not modified when在没有该 cookie 的情况下发出请求。它不会根据创建它的条件验证自己的缓存。

浏览器不使用它设置的 cookie 验证它的缓存吗？

在不为每个请求设置一些 GET 变量的情况下，是否有解决方法？另一种选择是告诉服务器永远不要缓存具有此类错误状态集的页面，但这将是一种黑客攻击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:49:30.867

显然解决方案是将其作为响应标头包含在内：

```
Vary: Cookie 
```

这将在缓存引擎中考虑 cookie。

编辑：

但是有一个问题：Chrome、Internet Explorer 和 Firefox 可以正常工作，但是 Safari 和 Opera 在存储和验证缓存时都忽略了“Vary”标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:04:53.117

对于这种情况，客户端会话（又名 cookie）可能还不够……建议改为使用服务器端会话。即使 Vary 标头可能有效 - 使用 $_SESSION 您将处于保存状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:27:35.097

Cache-control: public 可能不是你想要的。Public 本质上说您正在使用静态的、全局可访问的数据。它不会因用户而异。它是全局缓存的，因为您声称数据是全局的。

一旦您开始按用户更改，缓存就会违反他们的假设。“私人”更类似于您想要的。

但是，这将意味着您获得的良好中间人缓存会减少。您可以通过重新验证或适当使用 Vary 标头来达到一些中间立场。

# ruby-on-rails - Rails Active Record 关联问题

> ID：10493787
> 
> 赞同：0
> 
> 时间：2012-05-08T06:37:20.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations, models

我有一个项目，其中设置了以下模型：

`class User < ActiveRecord::Base
has_and_belongs_to_many :projects
has_and_belongs_to_many :user_roles`

`class Project < ActiveRecord::Base
has_and_belongs_to_many :users
has_many :user_roles`

`class UserRole< ActiveRecord::Base
has_and_belongs_to_many :users
belongs_to :project`

当我想返回用户参与的每个项目以及他们在项目中拥有的用户角色（*包括他们从事过的任何项目并且没有为其分配用户角色）时，我的问题就出现了*

我有一种感觉`has_many :through`可能会起作用，但我不确定它到底是如何起作用的。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:50:13.573

```
class User < ActiveRecord::Base
  has_many :user_roles
  has_many :projects, :through => :user_roles

class Project < ActiveRecord::Base
  has_many :user_roles
  has_many :users, :through => :user_roles

class UserRole< ActiveRecord::Base
  belongs_to :user
  belongs_to :project 
```

# asp.net - ASP.NET Ajax Control Toolkit：自定义工具栏按钮

> ID：10493791
> 
> 赞同：0
> 
> 时间：2012-05-08T06:37:25.280
> 
> 标签：asp.net, ajaxcontroltoolkit

Ajax 控件工具包中有 HtmlEditorExtender 控件，它有一些问题:)

如果我想在工具栏中添加自己的按钮怎么办？怎么做？

例如，我想添加将插入代码片段（并突出显示它）的按钮，或者添加将在浏览器中调用对话框窗口然后进行异步图像上传然后插入此图像的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:51:25.123

我猜在 HtmlEditorExtender 中你没有太多选择。或者，尝试使用这些：

*   [自由文本框](http://www.freetextbox.com/demos/)
*   [obout ASP.NET HTML 编辑器](http://www.obout.com/editor_new/sample_ImageBrowse.aspx)

# java - 使用 Java 中的 POI 从 Excel 文件中读取和写入值需要哪些 jar 文件？

> ID：10493793
> 
> 赞同：1
> 
> 时间：2012-05-08T06:37:41.007
> 
> 标签：java, apache, apache-poi

我想使用 Java 中的 POI 从 Excel 文件或 .xls 文件中读取和写入值。我不需要源代码；我可以这样写。

我已经在[开发者网站](http://poi.apache.org)上四处看了看，但是有很多文件。我需要下载哪些 jar 文件`import org.apache.poi.hssf.usermodel.*;`才能使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:42:11.627

目前我正在使用 poi-3.8-20120326.jar。这就是我需要的，没有其他罐子。在您的[链接](http://poi.apache.org/download.html)上，下载 poi-bin-3.8-20120326.zip

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:21:45.827

*   前往[开发者下载页面](http://poi.apache.org/download.html)
*   然后在二进制分发链接中点击[poi-bin-3.8-20120326.zip](http://www.apache.org/dyn/closer.cgi/poi/release/bin/poi-bin-3.8-20120326.zip)
*   现在点击第一个链接（[http://apache.techartifact.com/mirror/poi/release/bin/poi-bin-3.8-20120326.zip](http://apache.techartifact.com/mirror/poi/release/bin/poi-bin-3.8-20120326.zip)）
*   然后，在 Eclipse 中，将其添加到您的外部 jar 库中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T06:45:29.690

您应该在[此处](http://poi.apache.org/download.html#POI-3.8)可用的 POI 3.8 中获得所需的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:40:05.670

使用这个 poi-scratchpad-3.6-20091214.jar

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-01-31T01:18:32.513

[本教程](https://www.tutorialspoint.com/apache_poi/apache_poi_environment.htm)展示了一组用于访问 Excel 的 jar。我用：

*   poi-3.17.jar
*   poi-ooxml-3.17.jar
*   poi-ooxml-schemas-3.17.jar
*   xmlbeans-2.6.0.jar
*   commons-collections4-4.1.jar

# java - 在hadoop集群上运行mapreduce java程序

> ID：10493802
> 
> 赞同：1
> 
> 时间：2012-05-08T06:38:11.827
> 
> 标签：java, hadoop, mapreduce, cluster-computing

我正在学习在 hadoop 集群上工作。我在 hadoop 流上工作了一段时间，我在 perl/python 中编写了 map-reduce 脚本并运行了这项工作。但是，对于运行 java map reduce 作业，我没有找到任何好的解释。例如：我有以下程序-

[http://www.infosci.cornell.edu/hadoop/wordcount.html](http://www.infosci.cornell.edu/hadoop/wordcount.html)

有人可以告诉我如何实际编译该程序并运行该工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T07:52:35.250

创建一个目录来保存已编译的类：

> mkdir WordCount_classes

编译你的类：

> javac -classpath ${HADOOP_HOME}/hadoop-${HADOOP_VERSION}-core.jar -d WordCount_classes WordCount.java

从编译的类创建一个 jar 文件：

> jar -cvf $HOME/code/hadoop/WordCount.jar -C WordCount_classes/ 。

为您的输入创建一个目录并将所有输入文件复制到其中，然后按如下方式运行您的作业：

> bin/hadoop jar $HOME/code/WordCount.jar WordCount ${INPUTDIR} ${OUTPUTDIR}

作业的输出将放在 ${OUTPUTDIR} 目录中。此目录由 Hadoop 作业创建，因此在运行作业之前确保它不存在。

有关完整示例，请参见[此处](http://pages.cs.brandeis.edu/~cs147a/lab/hadoop-example-java/)。

# mysql - SQL比较表中的两行以查找有多少值不同

> ID：10493804
> 
> 赞同：4
> 
> 时间：2012-05-08T06:38:14.513
> 
> 标签：mysql, sql

我有下表用于存储用户数据：

例如

```
TABLE: users
COLUMNS:
...
maritalStatus (INT)   - FK
gender        (CHAR)
occupation    (INT)   - FK
... 
```

现在我想比较这个表中的两个用户，看看有多少列匹配任何两个给定用户（比如用户 X 和用户 Y）

我通过 mySQL 存储过程分别获取每个值然后比较它们

例如

```
 SELECT maritalStatus from users where userID = X INTO myVar1;
    SELECT maritalStatus from users where userID = Y INTO myVar2;

    IF myVar1 = myVar2 THEN

    ...

    END IF; 
```

有没有更短的方法使用 SQL 查询，我可以比较表中的两行并查看哪些列不同？我不需要知道它们实际上有多大不同，只需要知道它们是否包含相同的值。此外，我只会比较选定的列，而不是用户表中的每一列。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T07:00:48.030

这将为user和 user选择**不同**的列数：`x``y`

```
SELECT ( u1.martialStatus <> u2.martialStatus )
     + ( u1.gender        <> u2.gender        )
     + ( u1.occupation    <> u2.occupation    )
FROM
  users u1,
  users u2
WHERE u1.id = x
  AND u2.id = y 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T07:36:14.113

你也可以使用这个：

```
select 

   -- add other columns as needed
   (a.lastname,a.gender) 
=  (b.lastname,a.gender) as similar,

  a.lastname as a_lastname,
  a.firstname as a_firstname,
  a.age as a_age,

  'x' as x,

  b.lastname as b_lastname,
  b.firstname as b_firstname,
  b.age as b_age

from person a
cross join person b
where a.id = 1 and b.id = 2 
```

输出：

```
SIMILAR A_LASTNAME A_FIRSTNAME A_AGE X B_LASTNAME B_FIRSTNAME B_AGE
1       Lennon     John        40    x Lennon     Julian      15 
```

现场测试：[http ://www.sqlfiddle.com/#!2/840a1/2](http://www.sqlfiddle.com/#!2/840a1/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T06:52:05.227

您可以使用以下方法计算具有相同列的用户数`group by`：

```
select  u1.maritalStatus
,       u1.gender
,       u1.occupation
,       count(*)
from    users u1
group by
        u1.maritalStatus
,       u1.gender
,       u1.occupation 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T07:15:58.333

只是 PHP 中 Peter Langs 建议的一个继续示例：

```
$arr_cols   = array('martialStatus', 'gender', 'occupation');
$arr_where = array();
$arr_select = array();
foreach($arr_cols as $h) {

    $arr_having[] = "compare_{$h}";
    $arr_select[] = "(u1.{$h} != u2.{$h}) AS compare_{$h}";

}

$str_having  = implode(' + ', $arr_where);
$str_select = implode(', ', $arr_where);

$query = mysql_query("
SELECT {$str_select}
FROM users AS u1, users AS u2
WHERE u1.userid = {$int_userid_1} AND u2.userid = {$int_userid_2}
HAVING {$str_having} > 0
");

/* Having case can be removed if you need the row regardless. */

/* Afterwards you check these values: */

$row = mysql_fetch_assoc($query);
foreach($arr_cols as $h)
    if ($row["compare_{$h}"])
         echo "Found difference in column {$h}!"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-30T16:18:00.853

我认为，这可能对某人有所帮助。目标：查找具有相同名称的行并用旧记录更新新记录日期。这可能是您必须为不同国家/地区复制新闻项目并保持与原始日期相同的情况。

```
CREATE TABLE `t` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `locale` varchar(10) DEFAULT 'en',
  `title` varchar(255) DEFAULT NULL,
  `slug` varchar(255) DEFAULT NULL,
  `body` text,
  `image` varchar(255) DEFAULT NULL,
  `thumb` varchar(255) DEFAULT NULL,
  `slug_title` varchar(255) DEFAULT NULL,
  `excerpt` text,
  `meta_title` varchar(200) DEFAULT NULL,
  `meta_description` varchar(160) DEFAULT NULL,
  `other_meta_tags` text,
  `read_count` int(10) DEFAULT '0',
  `status` varchar(20) DEFAULT NULL,
  `revised` text,
  `created` datetime DEFAULT NULL,
  `modified` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=20 DEFAULT CHARSET=utf8;

INSERT INTO `t` (`id`, `locale`, `title`, `slug`, `body`, `image`, `thumb`, `slug_title`, `excerpt`, `meta_title`, `meta_description`, `other_meta_tags`, `read_count`, `status`, `revised`, `created`, `modified`)
VALUES
	(2, 'en', 'A title once again', '/news/title-one-again', 'And the article body follows.', '/uploads/2014/11/telecommunications100x100.jpg', NULL, NULL, NULL, '', '', NULL, 0, 'Draft', NULL, '2014-09-22 12:26:17', '2014-10-23 10:13:21'),
	(3, 'en', 'A title once again', '/news/title-strikes-back', 'This is really exciting! Not.', '/uploads/2014/11/telecommunications100x100.jpg', NULL, NULL, NULL, '', '', NULL, 0, 'Unpublished', NULL, '2014-09-23 12:26:17', '2014-10-31 11:12:55'),
	(4, 'en_GB', 'test', '/news/test', 'test', '/uploads/2014/11/telecommunications100x100.jpg', NULL, NULL, NULL, '', '', NULL, 0, 'Published', NULL, '2014-10-23 10:14:30', '2014-10-23 10:14:30');

update t join
       t t2
       on t.title = t2.title 
    set t2.created = t.created
    where t.title = t2.title ;
```

更新 t join t t2 on t.title = t2.title set t2.created = t.created where t.title = t2.title ;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-24T16:12:26.617

如果另一个 Magento 开发人员在这里找到了自己的方式，则此 Q/A 的一个特定用途是比较表中的两个地址条目。“Magento 1”会将相同的地址放入两次，唯一的区别是键`entity_id`列和`address_type`列（帐单或运输）。

已经知道订单的`entity_id`，使用它来获取与订单关联的帐单和送货地址 ID：
`SELECT entity_id FROM sales_flat_order_address WHERE parent_id = 3137;`

然后查看它们是否对该订单有所不同：

```
SELECT a1.parent_id AS 'order_id'
,  ( a1.street    <> a2.street    )
 + ( a1.city      <> a2.city      )
 + ( a1.postcode  <> a2.postcode  )
 + ( a1.region_id <> a2.region_id )
 AS 'diffs'
FROM
  sales_flat_order_address a1,
  sales_flat_order_address a2
WHERE a1.entity_id = 6273
  AND a2.entity_id = 6274
; 
```

给出输出：

```
+----------+-------+
| order_id | diffs |
+----------+-------+
|     3137 |     0 |
+----------+-------+ 
```

**如果有办法大规模地做到这一点，那就太棒了。**

# git - 检测提交列表中发生的特定更改

> ID：10493806
> 
> 赞同：0
> 
> 时间：2012-05-08T06:38:16.947
> 
> 标签：git

我如何才能获得发生更改的提交？

我在拉取请求中有 67 次提交。最终差异中有一个错误，其中的代码应该存在并且正在被删除。我该如何解决这样的事情？我如何知道更改最终合并差异的那段代码在哪个提交中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:12:44.940

如果代码已经提交，您可以使用6.5 Git 工具`git blame`来查找发生了什么[- 跟踪代码中的错误并想知道它何时引入以及为什么引入](http://git-scm.com/book/en/Git-Tools-Debugging-with-Git#File-Annotation)。

如果代码在 Github 上，您可以在查看相关文件时简单地使用 Blame 按钮。我经常使用这种方法来查看 git 和 msysgit 本身（要知道我可能踩到了谁的脚趾 ;-)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:43:41.207

如果您知道缺少的代码是什么，您可以执行以下操作：

```
git log -p 
```

然后搜索那段丢失的代码以及哪个提交将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:08:49.993

过滤文件路径也可以让你得到一个快速的答案，通常是：

`git log --pretty=oneline -- src/main/java/com/brunoais/Foo.java`

这将仅显示影响文件的提交`src/main/java/com/brunoais/Foo.java`，并在输出的右侧列中显示注释。

这是故障。

*   该`--`部分是路径规范前缀。它可以应用于其他 git 命令，而不仅仅是 git-log。（它通常是可选的；git 仅`--`在存在歧义时才需要，例如，如果文件路径恰好与分支名称相同。）

*   该`--pretty=oneline`部分使输出简洁。

# .net - 当新版本也可用时，如何在 GAC 中使用旧版本程序集？

> ID：10493817
> 
> 赞同：0
> 
> 时间：2012-05-08T06:38:49.847
> 
> 标签：.net

我有一个包含多个版本的程序集，所有版本都已部署在 GAC 中。现在默认情况下，使用它的程序使用最新版本的程序集，我如何使用任何以前的版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:57:16.613

您可以使用[程序集发布者策略](http://msdn.microsoft.com/en-us/library/dz32563a.aspx)来执行此操作。

> 现在默认情况下，使用它的程序使用最新版本的程序集

你确定吗 ？是不是正在使用您的程序在编译时引用的版本？

# c++ - 远程记录库与软件（记录器）

> ID：10493823
> 
> 赞同：0
> 
> 时间：2012-05-08T06:39:17.260
> 
> 标签：c++

我正在写下从头开始构建远程日志库可能需要的功能。我查了这个：[http ://www.aggsoft.com/serial-data-logger.htm](http://www.aggsoft.com/serial-data-logger.htm)

我想知道远程记录库和远程记录器软件之间有什么区别。

我想到的几件事：
1\. 该库可在 C++ 程序中用于即时记录错误消息。
2\. 库需要最终用户的编程知识。
3\. 该软件不能在 C++ 程序“内部”使用，所以我们不能即时记录错误信息？不确定这个。

**我想知道除了记录错误消息之外，使用远程日志库还有哪些意义？共享大文件？除了这两件事还有什么？**

其次，在当前情况下，图书馆和软件的哪种方式更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:43:53.820

As I mentioned in the my comments to your question, I would think that a logging library would provide some sort of an API/SDK, whereas remote software would not. The same would hold true if its sending messages via TCP/UDP or a serial port. The difference between the 2 options would be how much coding you would have to do. That is, how much would you have to reinvent the wheel?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:06:12.637

恕我直言，几乎所有调试环境/工具都支持将控制台输出重定向到串行端口（使用打印或其他 API）。它通常不是应用程序程序员的任务。

“远程记录”还有其他方法：

```
 1) syslog, syslog-ng 's remote service
    2) save log local, fetch using ftp 
```

# java - Hibernate 示例查询

> ID：10493825
> 
> 赞同：0
> 
> 时间：2012-05-08T06:39:24.823
> 
> 标签：java, hibernate

我将用一个例子来解释这个问题。
我有一个 Vehicle 对象，它有一个型号名称和一个品牌。给出品牌时，应列出相关车辆。当同时给出品牌和型号时，应列出合适的车辆。

例如：有一个名为“Vehicle”的实体。它有一个名为 makeModel 的代理，其实体名称为`MakeModel`。MakeModel 的代理是“make”和“model”，其实体名称是 Model 和 Make。实体“Model”和“Make”都有字符串变量“name”。这里是类

```
class Vehicle{
 private Integer vehicleId;  
 private MakeModel makeMOdel;
 //getters and setters  
}

class MakeModel {
 private Make make;
 private Model model;  
 //getters and setters  
}  

class Make{
 private Integer mid;
 private String make;
}  
class Model{  
 private Integer mdlid;
 private String modelName;
} 
```

这是我尝试获取车辆清单的方法。这里，`session`是休眠会话。

```
Criteria cr= session.createCriteria(Vehicle.class);  

MakeModel mkmd=new MakeModel();  
if( /* if only the make is give */){  
 Make mk=new Make();  
 mk.setMake("Toyota");  
 mkmd.setMake(mk);
}  
else if(if both make and and model given){  
 Make mk=new Make();  
 mk.setMake("Toyota");  
 mkmd.setMake(mk);  
 Model md=new Model("Venus");  
 mkmd.setModel(md);
 }  

cr.createCriteria("makeModel").add(Example.create(mkmd));List l=cr.list(); 
```

*但这会返回所有车辆*。我想使用休眠标准而不是 HQL 来获取所有车辆。

可以在[此处](https://stackoverflow.com/questions/7482864/hibernate-criteria-upon-associated-objects/7483057#7483057)找到相同的问题并参考[此](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/querycriteria.html)问题。任何人都让我知道哪里出了问题以及如何根据给定的标准检索车辆清单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:38:05.330

假设您要传递给您的函数*makeValue*和*modelValue*，它们是您想要的品牌和模型，您将拥有：

```
Criteria cr = session.createCriteria(Vehicle.class);  // Create the criteria on desired class
cr.createAlis("makeModel", "makeModel")
  .createAlias("makeModel.make", "make")
  .createAlias("makeModel.model", "model");  // Creating aliases makes a join on those tables 
if (makeValue != null){
    cr.add(Restrictions.eq("make.make", makeValue))  // If you have a makeValue passed, filter by it
}
if (makeModel != null){
    cr.add(Restrictions.eq("model.modelName", modelValue));  // If you have a makeModel passed, filter by it
}

return cr.list();    // Return the list 
```

结果将是一个`List<Vehicle>`. 您可以将 a 添加`@SuppressWarnings("unchecked")`到您的方法中以避免看到未经检查的强制转换警告。

# cordova - 将值从“控制器”传递到“视图”类

> ID：10493828
> 
> 赞同：2
> 
> 时间：2012-05-08T06:39:36.213
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

有一个按钮，当我单击该按钮时，将调用服务器，我将获得 JSON 响应。

这个 JSON 响应将包含一个类似于

```
{
    "value": "Success",
    "information": {
        "firstName": "kei",
        "surname": "chan"
    }
} 
```

JSON 中的`value`字段将是 SUCCESS 或 FAIL。因此，如果是`success`，我将不得不导航到另一个视图并显示`firstName`and `surname`。

`firstName`如果是这样，我将需要将值传递`lastName`给另一个视图。

我如何 在 senchaTouch/cordova 中传递`firstName`and的值？`lastName`

代码：

**按钮**

```
xtype:'button',
                   id:'when_button_click',
                   text:'Send',
                   ui:'confirm', 
```

**控制器类**

```
extend: "Ext.app.Controller",
                  config: {
                  refs: {
                  newNoteBtn: "#when_button_click"
                  },
                  control: {
                  newNoteBtn: {
                  tap: "onNewNote"
                  }
                  }
                  },
                  onNewNote: function () {
 var values = Ext.getCmp('form').getValues();
                 console.log("inside onNewNote function");

       Ext.Ajax.request({
                        url: 'http://call.com/the_webservice',
                        params : values,

                        failure: function (response) {
                        var text = response.responseText;
                         console.log("fail");

                        },                              success: function (response) {
                        var text = response.responseText;
                         console.log("success");

                        }

                        });

                  }

                  // init and launch functions omitted.
                  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:35:04.930

假设您有一个带有 id 的导航视图，`'yourNavigationViewId'`并且您尝试显示的视图定义为`'Appname.view.Viewname'`，在您的 ajax 调用的成功处理程序中，执行以下操作：（您可以在的第二个参数中传递所有配置内容`Ext.create`）

```
success: function (response) {
    Ext.getCmp('yourNavigationViewId').push(Ext.create('Appname.view.Viewname', {
        data: response
    }));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:57:24.590

您可以简单地将其他属性添加到控制器正在创建的新 View 对象中。例如，如果控制器处理函数正在像这样“推送”一个新视图

```
this.getSomeView().push({   
   xtype : 'mylistView',
   prop1 : 'my property to pass',
   prop2 : record.get('comesFromTheEventHandled')
}); 
```

然后视图可以在 initialize() 函数中访问这些属性。对于代码示例——在“mylistView”initialize() 部分中，您可以通过以下方式访问这些属性

```
this.prop1 and this.prop2 
```

# solr - 通过 SolrNet 提供非英语语言支持

> ID：10493830
> 
> 赞同：1
> 
> 时间：2012-05-08T06:39:45.200
> 
> 标签：solr, full-text-search, solrnet

我正在使用 SolrNet 从 .NET 应用程序中搜索 Solr。当我搜索英文单词时，一切正常。但是，如果我使用诸如 之类的西班牙语单词**`español`**，尽管我已将它们编入索引，但我没有得到任何搜索结果。当我通过 Solr 进行调试时，我发现查询被解析为**`espaA+ol`**.

我是否必须进行一些 UTF-8 编码，或者 SolrNet 是否支持仅搜索 ASCII 字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:43:28.710

这不是 SolrNet 问题，它与 Solr 如何处理不在前 127 个 ASCII 字符集中的字符有关。最好的建议是将[ASCIIFoldingFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ASCIIFoldingFilterFactory)添加到存储西班牙语单词的 Solr 字段中。

例如，如果您使用`text_general`Solr 示例中定义的 fieldType，在 schema.xml 文件中设置如下：

```
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

我建议将其修改如下，将 ASCIIFoldingFilterFactory 添加到索引和查询分析器中。

```
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.ASCIIFoldingFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.ASCIIFoldingFilterFactory"/>
  </analyzer>
</fieldType> 
```

此外，请注意，在进行此架构更改后，您需要重新索引您的数据，以便将更改反映在索引中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:39:16.110

不确定是否要专门将这些字符保留在索引中？如果你不需要，最好使用类似的东西

```
<charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/> 
```

所以“español”将被索引为“espanol”，搜索其中任何一个都会找到“español”（á，ü等相同）。

# c# - C# 从广告中获取 fsmo 角色

> ID：10493831
> 
> 赞同：0
> 
> 时间：2012-05-08T06:39:51.113
> 
> 标签：c#, .net, active-directory, domaincontroller

**有没有办法使用 C# 从活动目录获取 FSMO 角色？**即使可能使用 LDAP 查询也可以。

许多博客上提供了许多 VB 脚本代码。但不是 C#。

**以及如何找到一个 DC 是不是 PDC？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:10:52.380

我认为找到这个将是一项艰巨的工作，但最终很容易。我正在发布代码以防将来有人需要这个。

```
System.DirectoryServices.ActiveDirectory.Domain dom = System.DirectoryServices.ActiveDirectory.Domain.GetCurrentDomain();
System.DirectoryServices.ActiveDirectory.DomainController pdcdc = dom.PdcRoleOwner;
foreach (System.DirectoryServices.ActiveDirectory.DomainController dc in dom.DomainControllers)
                {
                    foreach (ActiveDirectoryRole role in dc.Roles)
                    {
                        Console.WriteLine("dc : {0} role : {1}", dc.Name,role.ToString());
                    }
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:07:10.483

您询问了一种 LDAP 方法来从 Active-Directory 中找到*灵活的单主操作*(FSMO) 角色。它们可以`fsmoRoleOwner`在 Active Directory 的不同命名上下文中查找属性。您可以在这里找到用 C# 编写的 3 个 LDAP 搜索。小心代码不是那么干净，它只是一种概念证明。

一个很好的来源是[Determining FSMO Role Holders](http://www.petri.co.il/determining_fsmo_role_holders.htm)。

```
static void Main(string[] args)
{
  /* Retreiving RootDSE informations
   */
  string ldapBase = "LDAP://WM2008R2ENT:389/";
  string sFromWhere = ldapBase + "rootDSE";
  DirectoryEntry root = new DirectoryEntry(sFromWhere, "dom\\jpb", "pwd");
  string defaultNamingContext = root.Properties["defaultNamingContext"][0].ToString();
  string schemaNamingContext = root.Properties["schemaNamingContext"][0].ToString();
  string configurationNamingContext = root.Properties["configurationNamingContext"][0].ToString();

  /* Search the 3 domain FSMO roles
   */
  sFromWhere = ldapBase + defaultNamingContext;
  DirectoryEntry deBase = new DirectoryEntry(sFromWhere, "dom\\jpb", "pwd");

  DirectorySearcher dsLookForDomain = new DirectorySearcher(deBase);
  dsLookForDomain.Filter = "(fsmoRoleOwner=*)";
  dsLookForDomain.SearchScope = SearchScope.Subtree;
  dsLookForDomain.PropertiesToLoad.Add("fsmoRoleOwner");
  dsLookForDomain.PropertiesToLoad.Add("distinguishedName");

  SearchResultCollection srcDomains = dsLookForDomain.FindAll();
  foreach (SearchResult sr in srcDomains)
  {
    /* For each root look for the groups containing my user
     */
    string fsmoRoleOwner = sr.Properties["fsmoRoleOwner"][0].ToString();
    string distinguishedName = sr.Properties["distinguishedName"][0].ToString();
    Regex srvNameRegEx = new Regex("^CN=NTDS Settings,CN=(.*),CN=Servers,.*$");
    Match found = srvNameRegEx.Match(fsmoRoleOwner);

    if (distinguishedName == defaultNamingContext)
      Console.WriteLine("PDC is {0}", found.Groups[1].Value);
    else if (distinguishedName.Contains("RID Manager"))
      Console.WriteLine("RID Manager is {0}", found.Groups[1].Value);
    else
      Console.WriteLine("Infrastructure Manager is {0}", found.Groups[1].Value);
  }

  /* Search the schema FSMO role
  */
  sFromWhere = ldapBase + schemaNamingContext;
  deBase = new DirectoryEntry(sFromWhere, "dom\\jpb", "pwd");

  dsLookForDomain = new DirectorySearcher(deBase);
  dsLookForDomain.Filter = "(fsmoRoleOwner=*)";
  dsLookForDomain.SearchScope = SearchScope.Subtree;
  dsLookForDomain.PropertiesToLoad.Add("fsmoRoleOwner");
  dsLookForDomain.PropertiesToLoad.Add("distinguishedName");

  srcDomains = dsLookForDomain.FindAll();
  foreach (SearchResult sr in srcDomains)
  {
    /* For each root look for the groups containing my user
     */
    string fsmoRoleOwner = sr.Properties["fsmoRoleOwner"][0].ToString();
    string distinguishedName = sr.Properties["distinguishedName"][0].ToString();
    Regex srvNameRegEx = new Regex("^CN=NTDS Settings,CN=(.*),CN=Servers,.*$");
    Match found = srvNameRegEx.Match(fsmoRoleOwner);

    if (distinguishedName.Contains("Schema"))
      Console.WriteLine("Schema Manager is {0}", found.Groups[1].Value);
  }

  /* Search the domain FSMO role
  */
  sFromWhere = ldapBase + configurationNamingContext;
  deBase = new DirectoryEntry(sFromWhere, "dom\\jpb", "pwd");

  dsLookForDomain = new DirectorySearcher(deBase);
  dsLookForDomain.Filter = "(fsmoRoleOwner=*)";
  dsLookForDomain.SearchScope = SearchScope.Subtree;
  dsLookForDomain.PropertiesToLoad.Add("fsmoRoleOwner");
  dsLookForDomain.PropertiesToLoad.Add("distinguishedName");

  srcDomains = dsLookForDomain.FindAll();
  foreach (SearchResult sr in srcDomains)
  {
    /* For each root look for the groups containing my user
     */
    string fsmoRoleOwner = sr.Properties["fsmoRoleOwner"][0].ToString();
    string distinguishedName = sr.Properties["distinguishedName"][0].ToString();
    Regex srvNameRegEx = new Regex("^CN=NTDS Settings,CN=(.*),CN=Servers,.*$");
    Match found = srvNameRegEx.Match(fsmoRoleOwner);

    if (distinguishedName.Contains("Partitions"))
      Console.WriteLine("Domain Manager is {0}", found.Groups[1].Value);
  }
} 
```

# java - 如何将html页面导出为pdf格式？

> ID：10493837
> 
> 赞同：13
> 
> 时间：2012-05-08T06:40:13.767
> 
> 标签：java, html, pdf

我必须为我的网站提供一些导出功能，例如 CSV 或 PDF。有没有强大的Java工具可以将HTML页面转换为PDF格式？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-08T13:56:59.313

[`Flying Saucer API`](http://code.google.com/p/flying-saucer/)与您一起使用[`iText PDF`](http://itextpdf.com)可以将 HTML 内容转换为 PDF。
以下示例在一定程度上帮助您理解 XHTML 到 PDF 的转换。

**使用飞碟 API 的示例**：
您需要以下库：

*   核心渲染器.jar
*   iText-2.0.8.jar

您可以在 中找到这些资源[`flyingsaucer-R8.zip`](http://code.google.com/p/flying-saucer/downloads/list)。

**示例 1：使用 XML 资源**：

```
// if you have html source in hand, use it to generate document object
Document document = XMLResource.load( new ByteArrayInputStream( yourXhtmlContentAsString.getBytes() ) ).getDocument();

ITextRenderer renderer = new ITextRenderer();
renderer.setDocument( document, null );

renderer.layout();

String fileNameWithPath = outputFileFolder + "PDF-XhtmlRendered.pdf";
FileOutputStream fos = new FileOutputStream( fileNameWithPath );
renderer.createPDF( fos );
fos.close();
System.out.println( "File 1: '" + fileNameWithPath + "' created." ); 
```

**示例 2：使用 XHTML 直接输入 Document**：

```
ITextRenderer renderer = new ITextRenderer();

// if you have html source in hand, use it to generate document object
renderer.setDocumentFromString( yourXhtmlContentAsString );
renderer.layout();

String fileNameWithPath = outputFileFolder + "PDF-FromHtmlString.pdf";
FileOutputStream fos = new FileOutputStream( fileNameWithPath );
renderer.createPDF( fos );
fos.close();

System.out.println( "File 2: '" + fileNameWithPath + "' created." ); 
```

**使用 iText API 的示例**：
您需要以下库：

*   核心渲染器.jar
*   itextpdf-5.2.1.jar

[**您可以在此处**](http://sourceforge.net/projects/itext/files/)找到这些资源。

**示例 3：使用 HTML Worker**：

```
com.itextpdf.text.Document document =
        new com.itextpdf.text.Document( com.itextpdf.text.PageSize.A4 );
String fileNameWithPath = outputFileFolder + "PDF-HtmlWorkerParsed.pdf";
FileOutputStream fos = new FileOutputStream( fileNameWithPath );
com.itextpdf.text.pdf.PdfWriter pdfWriter =
        com.itextpdf.text.pdf.PdfWriter.getInstance( document, fos );

document.open();

//**********************************************************
// if required, you can add document meta data
document.addAuthor( "Ravinder" );
//document.addCreator( creator );
document.addSubject( "HtmlWoker Parsed Pdf from iText" );
document.addCreationDate();
document.addTitle( "HtmlWoker Parsed Pdf from iText" );
//**********************************************************/

com.itextpdf.text.html.simpleparser.HTMLWorker htmlWorker =
        new com.itextpdf.text.html.simpleparser.HTMLWorker( document );
htmlWorker.parse( new StringReader( sb.toString() ) );

document.close();
fos.close();

System.out.println( "File 3: '" + fileNameWithPath + "' created." ); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-08T06:45:48.897

您可以为此使用 JTidy 框架。这会将 HTML 转换为 XHTML 并再次转换为 XSL-FO。此对象可用于生成 PDF。

[http://www.javaworld.com/javaworld/jw-04-2006/jw-0410-html.html](http://www.javaworld.com/javaworld/jw-04-2006/jw-0410-html.html)

# jquery - 如何使用ajax更新计数

> ID：10493845
> 
> 赞同：0
> 
> 时间：2012-05-08T06:40:33.063
> 
> 标签：jquery, ruby-on-rails, ajax

我的事件模型代码是这样的：

```
def current_date
    Date.today
end

def self.count_past(current_date = Date.today)
   Event.count :all, :conditions => ['start_date < ?', current_date], :order => 'start_date'
end

def self.count_upcoming(current_date = Date.today)
   Event.count :all, :conditions => ['start_date > ?', current_date], :order => 'start_date'
   #this statment is equivalent to
   #select * from events where start_date > current_date order by start_date
end

def self.count_today(current_date = Date.today)
    Event.count :all, :conditions => ['start_date = ?', current_date], :order => 'start_date'
end 
```

我的代码`view(index file)`是这样的：

```
%li
  %a.tt-top-center{:title => "Total Events", :href => events_path}#{Event.all.size}
  %span Total events
%li
  %a.blue.tt-top-center{:title => "Today's Events", :href => events_path(:view => "today")}#{Event.count_today}
  %span Today's Events
%li
  %a.green.tt-top-center{:title => "Past Events", :href => events_path(:view => "past")}#{Event.count_past}
  %span Past Events
%li
  %a.tt-top-center{:title => "Upcoming Events", :href => events_path(:view => "upcoming")}#{Event.count_upcoming} 
  %span Upcoming Events 
```

我的`controllers`代码是这样的：def index

```
case params[:view]
when 'past'
  @events  = Event.find (:all, :conditions => ['start_date < ?', current_date], :order => 'start_date')
when 'today'
  @events = Event.find (:all, :conditions => ['(start_date  = current_date)'], :order => 'start_date ')
when 'upcoming'
  @events = Event.find(:all, :conditions => ['start_date > ?', current_date], :order => 'start_date')
else
  @events = Event.all
end
  end 
```

请告诉我`ajax`当我单击相应的链接等时如何使用`today's events`，`total events`以及如何使用更新事件计数`jquery`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:25:38.753

您必须`:remote => true`用于 AJAX 调用。

为此，您需要`respond_to`在控制器方法中添加一个响应 js ( `format.js`) 的块。有关[respond_to](http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to)的更多信息。

`.js.erb`然后，这将在您的视图中执行相应的文件。从那里您可以使用更新视图`javascript`（并更新事件计数）。

[关于在 Rails 上](http://guides.rubyonrails.org/ajax_on_rails.html)使用 AJAX 的一个很好的起点。

# android - 将字符串嵌入视图翻转器 ontouch

> ID：10493853
> 
> 赞同：0
> 
> 时间：2012-05-08T06:41:02.967
> 
> 标签：android, viewflipper, touch-event

我正在创建一个应用程序，其中我使用了四个自定义视图。我已经将它嵌入到 viewflipper 现在我想将 ontouch 事件添加到 viewflipper。我已经添加了 ontouchevent 但我希望当用户触摸特定位置时它会在 viewflipper 使用的画布上显示一些文本。 ![在此处输入图像描述](../Images/f4ed1bfade8d8c14edf100d904ff59d0.png)

我已经上传了图片，任何人都可以在这个话题上帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:27:43.370

在 ViewFlipper 中使用文本视图并将其可见性设置为 View.Gone 或 View.Invisible

当单击您的特定区域呼叫时

```
myTextView.setText("your text");
myTextView.setVisibility(View.Visible); 
```

希望这个想法对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:19:09.133

我在我的问题中提到我正在使用 view.so 我使用了 invalidate 方法。

```
Viewflipper .invalidate (); 
```

如果您想了解更多知识，请 invalidate 方法强制重绘视图，然后参考此[链接](http://developer.android.com/reference/android/view/View.html#invalidate%28android.graphics.Rect%29)

# c++ - 除了使用 App Wizard 创建 MFC 应用程序外，我如何获得 MFC 支持？

> ID：10493855
> 
> 赞同：3
> 
> 时间：2012-05-08T06:41:13.140
> 
> 标签：c++, visual-studio-2008, visual-c++, mfc

我知道当我们使用 App Wizard 在 VC++ 中创建 MFC 应用程序时，该向导会自动将所需的库添加到项目中。

我想手动创建一个 MFC 应用程序。怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T08:48:57.913

当您创建一个新的 MFC 应用程序时，您会在预编译的头文件中找到以下代码：

```
#include <afxwin.h>         // MFC core and standard components
#include <afxext.h>         // MFC extensions 
```

这就是包含 MFC 头文件的方式。即使您尝试创建一个新的 Win32 控制台应用程序并要求向导包含 MFC 支持，您仍会在预编译的标头中找到这些行：

```
#include <afx.h>
#include <afxwin.h>         // MFC core and standard components
#include <afxext.h>         // MFC extensions 
```

因此，如果您想创建一个以某种方式使用 MFC 类的控制台应用程序，那么只需创建一个新的空项目，转到它的属性，然后**将****Use of MFC**从*Use Standard Windows Libraries*更改为*Use MFC in a Static Library*。然后你只需要包含这些标题就可以了。;)

例子：

```
#include <iostream>
#include <afx.h>
#include <afxwin.h>         // MFC core and standard components
#include <afxext.h>         // MFC extensions

int main()
{
    CByteArray a;
    a.Add(7);
    std::cout << (int)a[0];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T00:31:33.773

您可以手动创建 MFC 应用程序，有很多依赖项和大惊小怪。但这可能很有趣。这是一个小教程。

创建以下 HelloMFC 文件：

```
#include <afxwin.h>

  class HelloApplication : public CWinApp
  {
  public:     
   virtual BOOL InitInstance();
  };

  HelloApplication HelloApp;

  class HelloWindow : public CFrameWnd
  {        
   CButton* m_pHelloButton;
  public:     
   HelloWindow();
  };

  BOOL HelloApplication::InitInstance()
  {        
   m_pMainWnd = new HelloWindow();       
   m_pMainWnd->ShowWindow(m_nCmdShow);      
   m_pMainWnd->UpdateWindow();      
   return TRUE;
  }

  HelloWindow::HelloWindow()
  {        
   Create(NULL,             
    "Hello World!",               
    WS_OVERLAPPEDWINDOW|WS_HSCROLL,                
    CRect(0,0,140,80));        
   m_pHelloButton = new CButton();
   m_pHelloButton->Create("Hello World!",WS_CHILD|WS_VISIBLE,CRect(20,20,120,40),this,1);
  } 
```

要在命令行编译它，有所有需要链接的库。您会注意到上面的代码中没有 WinMain 或 main。MFC 将其主要功能埋藏在库中。它被定义在`appmodul.cpp`您可以在 MFC\SRC 目录中找到的位置。

无论如何，这是编译上述代码的方法：

> cl.exe hellomfc.cpp /EHsc /I atlmfc\include /I Includes /I Includes\Winsdk atlmfc\lib\amd64\nafxcw.lib Libs\libcmt.lib Libs\Kernel32.Lib Libs\User32.Lib Libs\Gdi32。 Lib Libs\MSImg32.Lib Libs\ComDlg32.Lib Lib s\WinSpool.Lib Libs\AdvAPI32.Lib Libs\Shell32.Lib Libs\ComCtl32.Lib Libs\ShLwApi .Lib Libs\Uuid.lib atlmfc\lib\amd64\atls。 lib Libs\Ole32.Lib Libs\OleAut32.Lib Li bs\oldnames.lib Libs\WS2_32.Lib Libs\MsWSock.Lib Libs\OleAcc.Lib Libs\comsuppw.l ib Libs\GdiPlus.lib Libs\Imm32.Lib Libs\ WinMM.Lib 库\MsXml2.Lib 库\OleDlg.Lib 库\Urlmon.Lib /link/SUBSYSTEM:WINDOWS

注意：以上显然取决于您的库文件的具体位置，但这些是必需的库。

# facebook - Facebook画布应用授权

> ID：10493859
> 
> 赞同：1
> 
> 时间：2012-05-08T06:41:29.053
> 
> 标签：facebook, facebook-c#-sdk

我的 FB 画布内置应用程序需要在处理任何操作之前授权用户。

如果我只在初始化点获得“user_id”，我如何确定每个请求都在导航我的应用程序的 FB 用户？

谢谢！

# asp.net - 如何使用 LoggingSettings 从 Web.Config 中读取“loggingConfiguration”

> ID：10493862
> 
> 赞同：0
> 
> 时间：2012-05-08T06:41:37.557
> 
> 标签：asp.net

我有以下代码来读取正在使用`'loggingConfiguration'`的文件`web.config``EntLib 4.0`

```
Configuration  entLibConfig = 
System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration
(@"/Web.config");

LoggingSettings loggingSettings = 
(LoggingSettings)entLibConfig.GetSection(LoggingSettings.SectionName); 
```

`loggingSettings`对象在执行`null`之后`2nd line`。

关于这里出了什么问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:49:25.383

```
ExeConfigurationFileMap exc = new ExeConfigurationFileMap();
exc.ExeConfigFilename = @"Web.exe.config";
Configuration _config = ConfigurationManager.OpenMappedExeConfiguration(exc,ConfigurationUserLevel.None);
LoggingSettings log = _config.GetSection("loggingConfiguration") as LoggingSettings; 
```

试试这个，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:15:20.457

返回 null 的原因是`LoggingSettings`您打开的 web.config 中没有配置 LoggingSettings。这可能是因为指定的路径不正确。

我有一个使用 2 个 web.configs 设置的 Web 应用程序：第一个在根目录中，第二个在 Config 文件夹中。

```
/Root
     web.config
/Root/Config
     web.config 
```

Config 文件夹中的 web.config 包含 LoggingSettings。从不在 Config 文件夹中的页面读取 LoggingSettings 的代码是：

```
Configuration entLibConfig = 
    WebConfigurationManager.OpenWebConfiguration(@"~/Config");

LoggingSettings loggingSettings =
    (LoggingSettings)entLibConfig.GetSection(LoggingSettings.SectionName); 
```

这应该在开发 Web 服务器和 IIS 中工作。

# android - Android字节数组到字符串到字节数组

> ID：10493864
> 
> 赞同：2
> 
> 时间：2012-05-08T06:41:42.967
> 
> 标签：android, string, bytearray

我需要的只是将 byte[] 转换为 String。然后对该字符串执行一些操作并转换回 byte[] 数组。但是在这个测试中，我只是将 byte[] 转换为 string 并转换回 byte[]，结果是不同的。

使用以下方法将 byte[] 转换为字符串：

```
byte[] byteEntity = EntityUtils.toByteArray(entity);
String s = new String(byteEntity,"UTF-8"); 
```

然后我尝试了：

```
byte[] byteTest = s.getBytes("UTF-8"); 
```

然后我比较了它：

```
if (byteEntity.equals(byteTest) Log.i("test","equal");
else Log.i("test","diff"); 
```

所以结果是不一样的。

我在stackoverflow中搜索了这个，但它与我的情况不符。关键是我的数据是 .png 图片，因此转换后的字符串不可读。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:35:29.157

解决了

使用这样的东西。

```
byte[] mByteEntity = EntityUtils.toByteArray(entity);
byte[] mByteDecrypted = clip_xor(mByteEntity,"your_key".getBytes());
baos.write(mByteDecrypted);
InputStream in = new ByteArrayInputStream(baos.toByteArray()); 
```

这是函数 clip_xor

```
protected byte[] clip_xor(byte[] data, byte[] key) {
    int num_key = key.length;
    int num_data = data.length;

    try {
        if (num_key > 0) {
            for (int i = 0, j = 0; i < num_data; i++, j = (j + 1)
                    % num_key) {
                data[i] ^= key[j];
            }
        }
    } catch (Exception ex) {
        Log.i("error", ex.toString());
    }
    return data;
} 
```

希望这对面临同样问题的人有用。谢谢大家帮我解决这个问题。

特别感谢 P'krit_s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:30:08.343

原始数组实际上是对象（这就是它们具有 .equals 方法的原因），但它们没有实现比较所需的相等契约（hashCode 和 equals）。您也不能使用 ==，因为根据文档，.getBytes 将返回一个新的实例 byte[]。您应该使用 Arrays.equals(byteEntity, byteTest) 来测试相等性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:33:36.843

看看[这里](https://stackoverflow.com/questions/9032509/blackberry-embedded-browser-image-display-using-html/9092899#9092899)的答案。

在那种情况下，我的目标是转换字节流中的 png 图像以在嵌入式浏览器中显示它（这是浏览器不直接显示 png 的特殊情况）。

您可以使用该解决方案的逻辑将 png 转换为字节，然后转换为字符串。

然后颠倒操作顺序回到原始文件。

# .net - 为什么必须为 WinMD/WinRT 组件密封公开类型？

> ID：10493865
> 
> 赞同：7
> 
> 时间：2012-05-08T06:41:43.310
> 
> 标签：.net, windows-8, windows-runtime, winrt-xaml, sealed

VS 编译器不允许为 WINMD 类型库创建密封的公开类型。

为什么要设置这个限制？（我知道密封类型的优势，我的问题是关于 Win RT 组件）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T12:04:07.683

这是 COM 强加的架构限制。它位于任何 WinRT 类型的核心，它们派生自 IUnknown 和 IInspectable。COM的问题在于它只支持接口继承，不支持实现继承。这是一个强大的 COM 设计目标，实现继承充满了实现细节，包括臭名昭著的钻石问题。

有一种方法可以通过委托进行继承，派生类中的每个方法都显式调用相应的基接口方法，但是自己做很痛苦。但除此之外，Windows.UI.Xaml 类实现继承的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:59:26.950

我相信原因是因为暴露的类型应该可以用于所有不同类型的语言（C#、C++、JavaScript 将来可能更多）。

因此，如果您有一个类，那么类的用途之一就是将其覆盖到新类中。我可能想超越类，这是用不同的语言完成的。但这是一个问题。您想如何通过在 C++ 中完成的继承类覆盖在 C# 中完成的基类？这永远行不通，因为它们都具有完全不同且不兼容的 OOP 实现。

通过强制密封暴露的类，您消除了这个问题并确保人们不会尝试做这样的事情。

我敢肯定还有比这更基本的东西，但这是我首先想到的。

# iphone - 我可以设置 SSO Facebook 屏幕的语言吗？

> ID：10493866
> 
> 赞同：2
> 
> 时间：2012-05-08T06:41:45.790
> 
> 标签：iphone, ios, facebook, ipad, facebook-graph-api

我的设备是英语或西班牙语，但 Facebook、应用程序或 Safari 的 SSO 授权屏幕的语言始终是另一种语言（可能是波兰语？我不知道 :)。

是否可以设置语言或者这是 Facebook 的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:58:44.557

这是一个 Facebook 问题，这个问题与[这个](https://stackoverflow.com/questions/10477975/how-to-change-language-in-facebook-login-page-or-dialog)问题重复。顺便说一句，答案在这里：

[http://developers.facebook.com/bugs/407246299295529?browse=search_4fa410ea79db26337556383](http://developers.facebook.com/bugs/407246299295529?browse=search_4fa410ea79db26337556383)

> 在使用 Facebook 首次登录时，要求用户授权此应用程序的对话框以看似随机的语言显示。仅当用户通过 Wifi 连接时才会发生。

# java - MATLAB：Java String[] 转换

> ID：10493867
> 
> 赞同：6
> 
> 时间：2012-05-08T06:41:48.427
> 
> 标签：java, matlab

我对 MATLAB 编程很陌生，但遇到了一些麻烦：

我想调用 dSPACE MLIB 库函数。根据他们的示例，它需要一个字符串数组作为参数：

```
variables = {'Model Root/Spring-Mass-Damper System/Out1';...
         'Model Root/Signal\nGenerator/Out1'};

libFunction(variables); 
```

这个变量被传递给函数。我现在的问题是：我有一个前端应用程序，用户可以在其中从任意数量的字符串中进行选择，这些字符串应该传递给 matlab 函数。由于前端是用 Java 编写的，因此传入数据的类型是 java.lang.String[]。如何将 java 字符串数组转换为与上面的示例变量具有相同类型的东西（我认为它是单元格数组的单元格数组或类似的东西）。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T08:03:59.090

看看文档。MATLAB 使与 Java 类型之间的转换变得非常容易。

1.  [处理从 Java 返回的数据](http://www.mathworks.com/help/techdoc/matlab_external/f6671.html)
2.  [处理 Java 数组](http://www.mathworks.com/help/techdoc/matlab_external/f15351.html)

您可以在 MATLAB 中将 Java 字符串数组转换为元胞数组或字符数组。使用元胞数组甚至可以使用交错数组（在 Java 中是允许的）。

下面是两个简单的例子：

```
%# Preparing a java.lang.String[] to play with.
a = javaArray('java.lang.String',10);
b = {'I','am','the','very','model','of','a','modern','major','general'};
for i=1:10; a(i) = java.lang.String(b{i}); end;

%# To cell array of strings. Simple, eh?
c = cell(a);

%# To char array. Also simple.
c = char(a); 
```

# ruby-on-rails - Ruby on Rails 服务器停止工作

> ID：10493875
> 
> 赞同：0
> 
> 时间：2012-05-08T06:42:18.367
> 
> 标签：ruby-on-rails, ruby

我是 ror 开发的新手..我在 LIVE 服务器上工作...我刚刚通过 sftp 上传了一个文件...在 1 天后服务器突然停止工作...您可以从[这里看到错误消息](http://tcopserver.twotoasters.com/voicemails.json)

表明

```
There appears to be a database problem.

Your config/database.yml may not be written correctly. Please check it and fix any errors.
Your database schema may be out of date or nonexistant. Please run rake db:migrate to ensure that the database schema is up-to-date.
The database server may not be running. Please check whether it's running, and start it if it isn't. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:09:58.847

Looking at the error page you seem to be using Rails 2.3? At a guess you have a MySQL database not an SQLite running. You should have the user name and password for the database around somewhere (replace the relevant fields in the 3 sections with them).

Change the database names to reflect your database names.

The server admins might have set a specific socket for MySQL in which case replace the '/tmp/mysql.sock' with the socket number.

Check your Gems to see if the MySQL adapter is installed (you appear to be using Rails 2.3 so try gem list on the terminal for your server - make sure that you are in the root directory for the app). If the MySQL gem is missing use gem install to install it (this will depend on what your hosting provider allows).

The following links are pretty old - targetted towards Rails 2 which you appear to be using.

[http://www.ruby-forum.com/topic/139710](http://www.ruby-forum.com/topic/139710)

[http://forums.mysql.com/read.php?116,353922,359544](http://forums.mysql.com/read.php?116,353922,359544)

database.yml

```
development:
  adapter: mysql
  encoding: utf8
  database: temp_development
  username: root
  password:
  socket: /tmp/mysql.sock

# Warning: The database defined as 'test' will be erased and
# re-generated from your development database when you run 'rake'.
# Do not set this db to the same as development or production.
test:
  adapter: mysql
  encoding: utf8
  database: temp_test
  username: root
  password:
  socket: /tmp/mysql.sock

production:
  adapter: mysql
  encoding: utf8
  database: temp_production
  username: root
  password:
  socket: /tmp/mysql.sock 
```

# android - 触发 3G 图标

> ID：10493878
> 
> 赞同：0
> 
> 时间：2012-05-08T06:42:23.607
> 
> 标签：android

我正在开发在 Android GB 上运行的开发 Android 智能手机。我看到即使没有数据连接，3G 图标也会突然出现。

重现该问题的用例是：1）从设置应用程序的 APNs 列表中删除所有 APNs。现在数据连接关闭，3G 图标消失。2）现在重新启动手机。即使 APN 列表中没有 APN，也可以看到 3G 图标，并且数据连接处于关闭状态。

谁触发了 3G 图标的可见性？它必须是 Telephony Framework 的一部分。我无法弄清楚是谁触发了通知栏中此图标的开/关。

# php - 如何从自定义 MySQL fetch 函数中检索 1 个结果

> ID：10493879
> 
> 赞同：2
> 
> 时间：2012-05-08T06:42:27.603
> 
> 标签：php, mysql, database, function

昨天另一个用户帮助构建了一个通用函数来处理 MySQL 查询。它看起来像这样：

```
function fetchAll($query) {
  $res = mysql_query($query) or trigger_error("db: ".mysql_error()." in ".$query);
  $a   = array();
  if ($res) {
    while($row = mysql_fetch_assoc($res)) { 
        $a[]=$row;
    }
  }
  return $a;
} 
```

为了输出返回的结果，我只需执行以下操作：

```
$data = fetchAll("SELECT * FROM news_table ORDER BY id LIMIT 10");

foreach ($data as $row) {
    echo $row['title'];
} 
```

我的问题与当数组中只有一个结果时输出结果有关。就像显示页面的当前博客文章时一样。我想知道我是否可以在不先调用 foreach 循环的情况下做到这一点？有没有办法只输出数组的第一个结果，因为我不需要循环遍历它。

也许我可以有一个替代功能，而不是上面的 fetchAll() ？一个只输出一行？

干杯，

斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:45:10.783

只计算数组

```
 if(count($data) == 1) {
     // Only one dataset
 } else if(count($data) > 0) {
     // foreach
 } else {
     // no content
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T06:46:31.673

是的。例如：

```
echo $data[0]['title']; 
```

基本上你的 $data 是一个二维数组，第一个维度是行号（计数从 0 开始），所以如果你知道它的数量，你可以直接访问任何行。如果你只有一行，它一定是 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T07:06:15.287

```
echo $data[0]['title']; 
```

应该打印出您正在寻找的内容。在二维数组中，第一个维度是数组索引，因为数组索引从 0 开始，上面的代码将回显该数组中的第一行。

# javascript - 如何在java脚本中获得连续的月份？

> ID：10493880
> 
> 赞同：-1
> 
> 时间：2012-05-08T06:42:36.477
> 
> 标签：javascript, date

我需要从用户输入之日起获得连续几个月。并且用户还将输入他/她想要显示的连续月份数。

例如：日期月份年份 08 05 2012 - 此日期作为输入给出。

```
Enter the number of months - 4 - This also given as input by the user. 
```

现在我需要显示接下来的 4 个月吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:04:55.080

简单的基本 JavaScript 代码是

```
<input type="text" id="mnt"/>
<a href="javaScript:getNextMonths()">Get Next</a>
<div id="nxt" ></div>​ 
```

以上是您的 HTML 代码，结果将显示在 div 内部 html 中

```
var monthArray = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
var msg = 'Please provide proper value';
getNextMonths = function(){
    var curMonth = document.getElementById('mnt').value/1;
    var nxtM = curMonth ;
    var cntMnt = 1;
    try{
        msg = '';
        do{
            if(nxtM >= 12)
               nxtM = 0; 
               msg = msg + ' ' +monthArray[nxtM];
               cntMnt = cntMnt + 1;   
          nxtM++;           
        }while(cntMnt < 5);

    }catch(e){alert(e);}
    document.getElementById('nxt').innerHTML=msg;
}​ 
```

JavaScript 代码如上。这还需要进一步验证。

请参考这个[链接](http://jsfiddle.net/R9gWt/1/)

# jquery - 自动播放不起作用（SlidesJS）

> ID：10493884
> 
> 赞同：1
> 
> 时间：2012-05-08T06:43:01.610
> 
> 标签：jquery, slidesjs

我正在为我的一个项目使用 slides.js；但是，自动播放功能无法正常工作。

这是我正在做的事情：

```
$('#slides').slides({
    width: 600,
    height: 120,
    generateNextPrev: false,
    pagination: false,
    play: 1000
}); 
```

文档[http://slidesjs.com/](http://slidesjs.com/)说，通过给 一个正数`play`，自动播放应该可以工作。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T19:56:26.110

我知道这已得到解答，但该功能实际上是 .slidesjs 而不是 .slides

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-25T13:38:44.633

对于 SlidesJS-3，您可以使用以下内容触发自动播放：

```
$(".slides").slidesjs({
        width: 768,
        height: 158,
        play: {
            auto: true
        }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:02:47.920

检查加载的脚本是否不是，如果是，那么应该按顺序排列

1.  脚本 src="http://code.jquery.com/jquery-latest.min.js"
2.  脚本 src="slides.js"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T10:30:07.017

我不知道它为什么起作用，这是文档中没有给出的东西：-

$(函数(){

```
 $('.slides').slides({
        width: 600,
        height: 120,
        pagination: false,
        previous: false
    });

    $('.slides').slides("play");
}); 
```

# gradle - 让 Gradle 发布源 Jar 而不是标准编译的 Jar

> ID：10493885
> 
> 赞同：1
> 
> 时间：2012-05-08T06:43:06.260
> 
> 标签：gradle

我正在慢慢地将两个项目转移到 Gradle。项目 A 生成一个供项目 B 使用的 jar 文件。

项目 A 是一个 GWT 组件，项目 B 是一个 GWT 应用程序。

如何让 Gradle 生成一个包含项目 A 的 Java 源代码而不是编译类的 Jar？

我已尝试将以下内容添加到 build.gradle 文件中，但这会生成第二个包含源代码的 Jar 文件 - 我希望主工件包含源代码，以便在我运行安装任务时将其发布到我的本地 Maven 存储库.

```
task sourceJar(type: Jar) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

artifacts {
    archives sourceJar
} 
```

有没有办法覆盖标准的 Jar 创建任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T07:11:16.450

您可以定义自己的“myArtifacts”配置并发布它。请注意，由于`install`任务是[Upload](http://gradle.org/docs/current/dsl/org.gradle.api.tasks.Upload.html)类型，您应该能够将默认工件配置从更改`archives`为`sourceArchives`：

```
configurations{
  sourceArchives
}

artifacts{
  sourceArchives sourceJar
}

install.configuration = configurations.sourceArchives 
```

希望`install`现在应该只发布`sourceArchives`配置成员。

# plsql - 如何通过 PL/SQL 执行 sql 文件（执行时知道 sql 文件的名称）

> ID：10493890
> 
> 赞同：0
> 
> 时间：2012-05-08T06:43:48.803
> 
> 标签：plsql, sqlplus

我需要编写一个执行 sql 文件的 PL/SQL 块。问题是 sql 文件的名称是在执行时确定的。

这是我在这里尝试做的一个片段：

```
begin
  @'OracleV5\'||DBMS_DB_VERSION.VERSION||'g\script.sql';   
end;
/ 
```

PL/SQL 似乎不接受这种代码:-(

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:54:07.097

PLSQL 块在数据库中执行。问题是如何访问 SQL 文件并执行它的内容。该文件需要位于数据库可以访问它的位置。然后，您可以创建一个目录对象来访问该位置并使用 utl_file 或通过使用 Bfile 将文件作为 Blob 打开来读取文件内容。

（对不起非常抽象的答案，但这就是我现在有时间的全部）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:46:46.510

尝试立即执行。 [这个链接](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/executeimmediate_statement.htm)可能有帮助

# jquery - jQuery 移动应用程序安装

> ID：10493892
> 
> 赞同：1
> 
> 时间：2012-05-08T06:43:57.927
> 
> 标签：jquery, android, mobile, installation

如何在手机中安装jquery移动应用程序？有没有一种方法可以创建任何 .apk 文件/可执行文件/jar 文件/ 就像我们在 android 中所做的那样，只需安装 .apk 文件以使应用程序运行？

（注意：不是我们将其保存在服务器中并在 webview 中运行；它应该在图标双击时打开，并且本身在 webview /browser 中打开）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:48:21.343

你可以使用phonegap。它允许您运行您的 jQuery 移动网站。但是当您使用 phonegap 创建应用程序时，建议您使用模板并且只从服务器请求数据。即，演示文稿必须与应用程序一起打包。如果您需要更新演示文稿，则需要更新应用程序。否则，某些应用商店可能会拒绝您的应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:47:46.773

您可以使用 PhoneGap 在设备上部署您的 HTML5 Web 应用程序。

[http://phonegap.com/](http://phonegap.com/)

# asp.net - 提示用户进行登录认证

> ID：10493898
> 
> 赞同：0
> 
> 时间：2012-05-08T06:44:29.893
> 
> 标签：asp.net

ASP.NET：我创建了一个带有登录身份验证的网站。在用户可以访问其中的任何页面之前，他需要先登录。如何提示用户先登录，然后才能查看网站的任何内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:56:04.283

检查[ASP.NET 的成员资格、角色和配置文件系列](http://www.4guysfromrolla.com/articles/120705-1.aspx)是一个很好的起点。它涵盖了 ASP.NET 的所有安全部分以及您所需的东西，在访问该页面之前`LoginUrl`登录作为您的登录页面。开始执行此[操作方法：在 ASP.NET 2.0 中将表单身份验证与 SQL Server 一起使用](http://msdn.microsoft.com/en-us/library/ff649314.aspx)

在 web.config 中进行一些设置，然后在后面的代码中处理这些事情。

```
<forms name=".ASPXAUTH" loginUrl="login.aspx" 
       defaultUrl="default.aspx" protection="All" timeout="30" path="/" 
       requireSSL="false" slidingExpiration="true"
       cookieless="UseDeviceProfile" domain="" 
       enableCrossAppRedirects="false">
    <credentials passwordFormat="SHA1" />
</forms> 
```

在 Web.config 文件中的元素下添加以下元素。这允许所有经过身份验证的用户访问您的网站。

```
<authorization> 
    <deny users="?" />
    <allow users="*" />
</authorization>` 
```

**后面的代码**

```
if (Membership.ValidateUser(username, password))
{
    // User has supplied valid credentials

    // In the following method call, the second Boolean parameter 
    // determines whether a persistent authentication cookie
    // is created.

    FormsAuthentication.RedirectFromLoginPage(username, rememberMeIsChecked);
} 
```

参考：

[启动 ASP.NET 表单身份验证](https://stackoverflow.com/questions/7138684/starting-asp-net-forms-authentication)
[ASP.NET 身份验证](http://msdn.microsoft.com/en-us/library/eeyk640h.aspx) [解释：ASP.NET 2.0 中的表单身份验证](http://msdn.microsoft.com/en-us/library/ff647070.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:48:44.213

尝试在您的 web.config 中执行此操作

如果我们要拒绝匿名用户的访问，请按以下方式配置 Authorization 部分，

```
<configuration>
    <system.web>
        <authentication mode="Forms"/>
        <authorization>
            <deny users="?" />
        </authorization>
    </system.web>
</configuration> 
```

欲了解更多信息，请看[这里](http://geekswithblogs.net/AaronLi/archive/2007/02/20/106761.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T07:13:18.303

这是在此处发布代码示例的巨大主题，因此我建议执行以下步骤。

使用 asp.net mvc3，了解会员提供程序如何工作，根据您的需要对其进行自定义，用户角色提供程序将用户分配到特定组，您将使用这些组来保护站点的特定区域。

创建角色并将其分配给用户，之后您可以使用修饰的 [Authorize] 属性保护页面或像这样保护选定用户

```
 [Authorize(Roles = "Admin, Super User")] 
```

在配置 system.web 部分中使用您的 web.config 来指示应用程序中使用的成员资格和角色提供者。

这是简短的信息，但我希望你现在有简洁的心理画面。

# asp.net - 如何在asp.net中单击按钮的新选项卡中打开页面？

> ID：10493901
> 
> 赞同：30
> 
> 时间：2012-05-08T06:44:40.160
> 
> 标签：asp.net

我想在按钮单击时在浏览器的新选项卡中打开一个页面。

我在谷歌上搜索了很多，但我找不到任何东西。

这是我的按钮。

```
 <asp:Button ID="btnNewEntry" runat="Server" CssClass="button" Text="New Entry" OnClick="btnNewEntry_Click" />

    protected void btnNewEntry_Click(object sender, EventArgs e)
    {      
        Response.Redirect("New.aspx");
    } 
```

你能帮我怎么做吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-08T06:50:20.573

你可以使用`window.open`. 像这样：

```
protected void btnNewEntry_Click(object sender, EventArgs e)
{ 
   Page.ClientScript.RegisterStartupScript(
   this.GetType(),"OpenWindow","window.open('YourURL','_newtab');",true);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-22T21:58:39.797

为什么不直接从 OnClick 调用 window.open？

```
<asp:Button ID="btnNewEntry" runat="Server" CssClass="button" Text="New Entry" OnClick="window.open('New.aspx')" /> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-18T16:51:01.690

注意**重置 target**，否则所有其他调用都`Response.Redirect`将在新选项卡中打开，这可能不是您想要的。

```
<asp:LinkButton OnClientClick="openInNewTab();" .../> 
```

在 javaScript 中：

```
<script type="text/javascript">
    function openInNewTab() {
        window.document.forms[0].target = '_blank'; 
        setTimeout(function () { window.document.forms[0].target = ''; }, 0);
    }
</script> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-04T06:11:13.737

对主窗体/按钮单击事件使用 JavaScript。一个例子是：

```
Context.Response.Write("<script language='javascript'>window.open('AccountsStmt.aspx?showledger=" & sledgerGrp & "','_newtab');</script>") 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-08T06:51:45.397

试试这个而不是重定向......

```
Response.Write("<script>");
Response.Write("window.open('ClickPicture.aspx','_blank')");
Response.Write("</script>"); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-08T07:23:05.680

试试这个

```
<a href="#" target="_blank">Link</a> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-07T10:53:22.583

刚遇到同样的问题。客户端不合适，因为该按钮正在从列表视图发回信息。

[在way2coding](http://www.waytocoding.com/2011/02/open-url-in-new-tab-using.html)上看到了与 Amaranth 相同的解决方案，但这对我不起作用。

但是，在评论中，有人发布了一个类似的解决方案，确实有效

```
OnClientClick="document.getElementById('form1').target ='_blank';" 
```

其中 form1 是您的 asp.net 表单的 id。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-08T06:53:57.830

您必须使用 Javascript，因为后面的代码仅是服务器端。我很确定这行得通。

```
<asp:Button ID="btnNewEntry" runat="Server" CssClass="button" Text="New Entry" OnClick="btnNewEntry_Click" OnClientClick="aspnetForm.target ='_blank';"/>

protected void btnNewEntry_Click(object sender, EventArgs e)
{
  Response.Redirect("New.aspx");
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-02-08T05:29:03.003

```
Add this Script  
<script type = "text/javascript">
 function SetTarget() {
     document.forms[0].target = "_blank";
 }
</script>
and 
<asp:Button ID="BTNpRINT"  runat="server" Text="PRINT"  CssClass="btn btn-primary"  OnClick="BTNpRINT_Click" OnClientClick = "SetTarget();"/>    
and 
protected void BTNpRINT_Click(object sender, EventArgs e)
    {
        Response.Redirect(string.Format("~/Print.aspx?ID={0}",txtInv.Text));
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-07-14T14:23:01.503

您可以像这样添加到您的按钮 OnClientClick ：

```
<asp:Button ID="" runat="Server" Text="" OnClick="btnNewEntry_Click" OnClientClick="target ='_blank';"/> 
```

这将更改所有按钮的当前表单目标以在新选项卡中打开。因此，要完成修复，您可以使用 2 种方法：

1.  对于此表单中的任何其他按钮，向客户端添加单击“重置表单目标”功能，如下所示：

```
function ResetTarget() {
   window.document.forms[0].target = '';
} 
```

2.  在 setTimeout() 中的函数内添加相同的代码，这样代码将在片刻后重置表单的目标。看到这个答案[https://stackoverflow.com/a/40682253/8445364](https://stackoverflow.com/a/40682253/8445364)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-27T13:44:48.117

使用JavaScript[在新选项卡（而不是新窗口）中打开 URL](https://stackoverflow.com/questions/4907843/open-a-url-in-a-new-tab-using-javascript)

> 作者无法选择在新选项卡而不是新窗口中打开。

浏览器决定是打开一个新标签还是打开一个新窗口。作为开发人员，您无法控制这一点。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-05T07:39:29.740

在 vb.net 中*，单击按钮*或单击*链接按钮*，这将起作用。

```
System.Web.UI.ScriptManager.RegisterClientScriptBlock(Me, Me.GetType(), "openModal", "window.open('CertificatePrintViewAll.aspx' ,'_blank');", True) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-09-28T19:11:10.683

在检查验证后添加 target='_blank' ：

```
 <asp:button id="_ButPrint"  ValidationGroup="print" OnClientClick="if (Page_ClientValidate()){$('form').attr('target','_blank');}"  runat="server" onclick="ButPrint_Click" Text="print" /> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-02-22T19:38:16.007

您可以在 ASPX HTML 前端执行此操作，以使按钮转到新选项卡以动态显示 ASP.NET 站点中的页面：

```
 <asp:Button ID="btnNewEntry" CssClass="button"  OnClientClick="window.open('https://website','_blank'); return false;" text="WebsiteName"  runat="server" /> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-02-18T18:45:24.290

如果 url 是动态的，并且您想在后面的代码中控制它

```
<asp:Button ID="btnNewEntry" runat="Server" Text="New Entry" />

//code behind
var id = 0;
btnNewEntry.OnClientClick = $"window.open('New.aspx?ID={id}')"; 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2016-04-01T07:57:49.363

一个简单的解决方案：

```
<a href="https://www.google.com" target="_blank">
    <button type="button">Open new tab</button>
</a> 
```

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2012-05-08T07:49:28.457

您应该在客户端执行此操作。您可以使用 target="_blank" 和 style="display:none" 放置一个 html 超链接。之后创建一个javascript函数，如下所示

```
function openwindow(){
$("#hyperlinkid").click();
return false;
} 
```

将此函数用作按钮的 onclientclick 事件处理程序，例如 onclientclick="return openwindow()" 您需要在页面中包含一个 jquery。

* * *

## 回答 #18

> 赞同：-4
> 
> 时间：2013-11-27T10:10:37.543

Add_supplier 是表单的名称

```
private void add_supplier_Load(object sender, EventArgs e)
{
    add_supplier childform = new add_supplier();
    childform.MdiParent = this;
    childform.Show();
} 
```

# crystal-reports - Crystal Reports 按列显示记录，将标题保持在行首

> ID：10493904
> 
> 赞同：1
> 
> 时间：2012-05-08T06:44:54.607
> 
> 标签：crystal-reports, crystal-reports-2008

我想改变数据的格式：

```
1 xxxx
2 yyyy
3 zzzz 
```

至：

```
ID       1    2    3
EmpName xxxx yyyy zzzz 
```

基本上我想为每一行添加一个标题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T23:08:23.610

尝试使用子报表并尝试以相同的顺序放置您想要的字段。将子报表放在主报表中 ID 的 GroupHeader 中。

* * *

虽然您的问题不是重点，也没有提供任何详细信息，但我假设您可能希望在报告中删除一个文本字段并将其重命名为 ID 和 EmpName。-- 但是订单将是垂直的而不是水平的。

# razor - Umbraco MediaById 没有按预期工作

> ID：10493908
> 
> 赞同：2
> 
> 时间：2012-05-08T06:45:09.303
> 
> 标签：razor, umbraco

尝试从 uComponents 的 MNTP 显示一组图像，但无法获取 umbracoFile 属性的值 - 在下面的示例中，umbracoFile 和 url 都返回空字符串：

```
 foreach (var id in @Model.sliders) {
                var media = Model.MediaById(id.InnerText);
                if (media != null){
                    var url = media.umbracoFile;
                    <p>name = @media.Name</p>
                    <p>alt = @media.altText</p>
                    <p>url = @media.umbracoFile</p>
                    <p>url = @url</p>
                }
            } 
```

它变得非常非常非常烦人......我已经在其他领域像这样使用Model.Media解决了它：

```
<img src="@Model.Media("topRightImage", "umbracoFile")" alt="@Model.Media("topightImage", "altText")" /> 
```

但这仅在使用媒体选择器数据类型而不是 mntp 时才有帮助。应该不会那么难吧？

如果我重建内部搜索索引，我可以加载图像，但在随后的刷新中它们又消失了。

我已经看到其他人遇到类似的问题，并且非常感谢您的解决方案......

ta

弥敦道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:58:36.597

这看起来像是 4.7.2 中修复的错误。请参阅以下 codeplex 项：

[http://umbraco.codeplex.com/workitem/30778](http://umbraco.codeplex.com/workitem/30778)

# python - 为指向 python 的 C++（指针）创建 swig 包装器

> ID：10493915
> 
> 赞同：3
> 
> 时间：2012-05-08T06:45:41.187
> 
> 标签：python, pointers, swig, distutils

我是 swig 的新手，我正在尝试创建一个 swig 包装器，以便在 python 中使用一些 C++ 文件。我有以下 C++ 类。

以下是我要转换的代码片段：

```
/*packet_buffer.h*/
class CPacketBuffer {
 public:
    // construct based on given buffer, data is not copied
    CPacketBuffer(uint8_t* data, uint32_t length) {
        mpBuffer = data;
        mLength  = length;
        mHead    = 0;
        mTail    = length;
    }
    uint8_t* GetBuffer() {
        return (mpBuffer + mHead);
    }
    void Add(const uint8_t* data, uint32_t length) {
            if ((mTail + length) > mLength) {
            length = (mLength - mTail);
        }
//....
} 
```

我一直在尝试使用 swig 文档的帮助编写一个 example.i 文件，该文件今天整天都接受指向 typedefs(uint8_t *) 的指针，但我没有成功。

以下是我尝试过的一个 packet_buffer.i 文件，但它不起作用。

```
%module packet_buffer
%include typemaps.i
%apply unsigned char* {uint8_t*};
%apply unit8_t *INPUT {uint8_t *data};

%{
    #define SWIG_FILE_WITH_INIT
    #include "../include/packet_buffer.h"
%}
%include "../include/packet_buffer.h" 
```

1.  如何为使用指向 typedef 的指针的成员函数编写 swig 代码？
2.  我可以编写一个可以在代码中使用的通用 %apply，还是必须为每个 INPUT、OUTPUT 参数编写细节？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:12:00.010

如果我正确理解了这一点，那么您面临的问题不是它们是指针，而是它们可能是无界数组。

您可以使用 carrays.i 和“%array_class”宏来[扭曲无界 C 数组，例如：](http://www.swig.org/Doc1.3/Python.html#Python_nn48)

```
%module packet
%include "stdint.i"

%{
    #include "packet.h"
%}

%include "carrays.i"
%array_class(uint8_t, buffer);

%include "packet.h" 
```

然后允许您在 Python 中编写如下内容：

```
a = packet.buffer(10000000) 
p = packet.CPacketBuffer(a.cast(), 10000000) 
```

请注意，您需要确保缓冲区的生命周期足够长 - 如果 Python 对象在 C++ 代码不知道的情况下被释放，您最终会出现未定义的行为。

您可以使用宏还创建的方法将`uint8_t*`指针（无界数组）转换为 Python 中的缓冲区实例，例如：`frompointer``%array_class`

```
r = packet.GetBuffer()
buf = packet.buffer_frompointer(r) 
```

如果需要，您可以[添加额外的 Python 代码](http://www.swig.org/Doc1.3/Python.html#Python_nn42)来自动化/隐藏缓冲区之间的大部分转换，或者使用[MemoryViews](https://stackoverflow.com/questions/16998686/expose-a-vector-as-a-memoryview-using-swig)在 C API 端与 Python 更紧密地集成。

一般来说，虽然这是 C++，但我建议使用`std::vector`它 - 在 Python 端使用它比无界数组更好，并且成本最低，因为它为您提供了安全性和简单性。

# jsf - h:commandButton 操作没有在 primefaces p:dialog 中被调用

> ID：10493922
> 
> 赞同：1
> 
> 时间：2012-05-08T06:46:33.400
> 
> 标签：jsf, primefaces

我的 jsf 应用程序有问题。我通过使用`h:commandButton`inside来调用动作方法，`p:dialog`但它没有被调用。如果我把它放在`p:dialog` 外面，然后把里面的`h:form`所有东西都放在里面，它仍然不起作用。如果我把按钮放在外面它工作正常。`h:form``p:dialog``p:dialog`

任何有关这方面的帮助对我来说都非常有用。进阶谢谢……

* * *

**@maple_shaft** 我已经把 appendToBody="true" 但它仍然无法正常工作。

**@Daniel** 我已将 p:dialog 放在主窗体之外，并将所有内容都放在另一个窗体中的对话框中，但它不起作用-----我正在使用 log4j 来检查天气一个方法是否被调用，这里它没有打印任何东西. 如果我将命令按钮放在 p:dialog 之外，它工作得很好。

# javascript - console.log 中出现奇怪的变量未定义错误

> ID：10493926
> 
> 赞同：1
> 
> 时间：2012-05-08T06:46:48.257
> 
> 标签：javascript, google-chrome, console

有人可以解释为什么控制台会这样吗？

我曾经发布过这个问题，但我不能完全正确地制定它，所以我再次关闭它。最初的问题没有提到问题可能与控制台有关，我只是质疑变量的奇怪行为。我基本上只发布了以下截图：

![在此处输入图像描述](../Images/b62537f766f16b7d08af124148a220c9.png)

请注意，我`$s.page`在第 20 行登录并且`$s.page.navi`在那里，而在第 21 行，当我再次登录时它就消失了。

## 重新打开问题

没有人可以给出答案，尽管[@zerkms](https://stackoverflow.com/users/251311/zerkms)暗示这可能与控制台本身有关。在我关闭问题后，他通过这篇文章与我联系：[只有当我真正需要它们](https://stackoverflow.com/questions/10474479/have-require-js-load-my-files-only-when-i-actually-need-them)以重新打开问题时才加载我的文件。

## 问题

足够的介绍，回到问题。那么变量去哪了。从我发布的另一个问题中，您可以看到我使用 require.js 来加载我的文件。我对这一切有点陌生，所以我的问题与它有关。

在`$s.page`我的代码中执行以下操作（简化）：

```
require(['nav'], $.proxy(function(Nav){

    this.navi = new Nav.Views.Main();

}, this)); 
```

`nav`是 require.js 必须加载的模块。我脚本会阻塞，直到文件在那里，并查看控制台确认了这一点。

让我更详细地登录：

```
console.log('x');

require(['nav'], $.proxy(function(Nav){

    console.log('y');

    this.navi = new Nav.Views.Main();

}, this)); 
```

我将其他日志留在原处，这是输出：

![在此处输入图像描述](../Images/187aaabd94363617c763124a2ad173db.png)

请注意，`x`首先记录。然后当我登录`$s.page` **时，它`$s.page`会告诉我未来会是什么样子**，我猜。真的很奇怪。

然后当我登录`$s.page.navi`下一行时，它不存在，这是正确的。

然后在最后，甚至不再被召唤，`y`加入了聚会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:49:47.667

请参阅我调用的 router.js 的第 22 行`$s.page.navi.start()`，这就是这个问题的重点。它不能被解雇。我用以下代码解决了它：

```
require(['nav'], function(Nav){

    $s.page.navi.start();

}); 
```

它只会等待它的依赖项。

## 结论

在使用 JavaScript 以及诸如主干.js 和 require.js 之类的库时，您应该真正跟踪您在做什么，并记住该脚本不会轻易阻塞。

仅在应用程序中的某些点进行记录并不能总是帮助您解决问题，您必须真正从应用程序的根目录到叶子的顶端进行记录，以查看实际发生的情况。最好的方法总是在调试器中构建。

# jquery - jquery ui按钮图标动态变化

> ID：10493931
> 
> 赞同：0
> 
> 时间：2012-05-08T06:47:40.313
> 
> 标签：jquery

```
$("#slideshowadvanceconfig").button({
icons:{ primary: 'ui-icon-circle-arrow-e'} }).toggle(function () { 
$(this).button("option", { icons: { primary: 'ui-icon-circle-arrow-s'} });    

$(".settings").slideDown('slow'); }, 
function () { $(this).button("option", { icons: { primary: 'ui-icon-circle-arrow-e'} });

$(".settings").slideUp('slow'); 
}); 
```

通过上面的代码，我试图动态更改 jquery ui 按钮的图标。Slideup 和 SlideDown 有效，但图像没有改变，有人可以告诉我问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:06:21.020

从我可以看到你的目标是图标：绘制页面后的值，你需要定位 html 图像元素的 src 值以编程方式更改它

# python - 如何将全局变量传递给另一个函数调用的函数

> ID：10493934
> 
> 赞同：1
> 
> 时间：2012-05-08T06:47:50.983
> 
> 标签：python, function, global-variables

给出下面的例子，我想弄清楚是什么原因导致 `"NameError: global name 'MATRIX' is not defined"`执行时出现异常`test.fun1()`。

非常感谢。

```
class test:
    MATRIX = []

    @staticmethod        
    def fun1():
        global MATRIX
        test.fun2(MATRIX)

    @staticmethod
    def fun2(MATRIX):
        MATRIX.append(2)

test.fun1()    
print test.MATRIX 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T06:50:38.943

你`MATRIX`不是全局的，它是一个类属性，试试这样：

```
class test:
    MATRIX = []

    @classmethod     # Note classmethod, not staticmethod   
    def fun1(cls):   # cls will be test here
        test.fun2(cls.MATRIX)

    @staticmethod
    def fun2(MATRIX):
        MATRIX.append(2)

test.fun1()    
print test.MATRIX 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T06:57:48.453

该错误`"NameError: global name 'MATRIX' is not defined"`是由于您的代码中没有名为 MATRIX 的全局变量引起的。

在您的代码中*MATRIX*不是全局变量，而是类属性。全局变量将像这样使用：

```
MATRIX = []

class test:

    @staticmethod
    def fun1():
        test.fun2(MATRIX)

    @staticmethod
    def fun2(l):
        l.append(2)

    @staticmethod
    def reset():
        global MATRIX
        MATRIX = []

test.fun1()
print MATRIX
# >>> [2]
test.fun1()
print MATRIX
# >>> [2, 2]
test.reset()
print MATRIX
# >>> [] 
```

# oracle10g - Replic-Action 日志错误无法打开链接：TNS 无法解析服务名称

> ID：10493941
> 
> 赞同：0
> 
> 时间：2012-05-08T06:48:33.290
> 
> 标签：oracle10g, replication, lotus-notes, lotus-domino, lotus

您好我正在使用 ReplicAction 工具将数据从 Lotus Notes View 传输到 Oracle 数据库。

当我为 Oracle DB 创建链接文档时，它已成功创建而没有任何错误当我为 Oracle Db 创建包含表时，它已成功创建并列出了所有列

当我创建复制时，它也成功创建，

但是当作业执行时，它给出的错误是 log ：

```
05/08/2012 01:37:16 AM   Starting Replication: BADtoProductPortal 
05/08/2012 01:37:19 AM   Error: <ODBC Error> [DataDirect][ODBC Oracle driver][Oracle]ORA-12154: TNS:could not resolve service name

05/08/2012 01:37:19 AM   Error: Information: Unable to open Link: PPLink
05/08/2012 01:37:19 AM   Error: Replication to Link <PPLink> did not complete
05/08/2012 01:37:20 AM   End of Replication: BADtoProductPortal 
```

如果错误与服务名称有关，那么我认为我们也不应该能够创建链接文档。

当我使用 ODBC 连接进行链接时，我无法创建复制作业，出现诸如 Notes 数据字段“ID”之类的错误与源数据字段不匹配。

但我知道它以前工作过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:35:03.517

我建议检查运行该作业的 TASK 是否使用与“手动”相同的 TNS 条目。
我建议检查 TASK 是否也可以访问您的 Oracle 驱动程序。这个任务有权利运行吗？

在登录数据库的过程中引发 ORA-12154 错误。此错误表示 Oracle（SQL *Net 或 Net8）中的通信软件 (TNS) 无法识别连接参数中指定的主机/服务名称。

因此，当您手动运行复制和作业运行它时，问题显然是您的配置之间的“环境差异”类型。希望我能帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:58:34.090

我在这里假设当您成功复制时，您是从本地计算机手动执行的，而当作业失败时，它会在服务器上按计划运行。如果是这样的话，我同意伊曼纽尔的观点。请记住在本地运行作业使用本地 tnsnames.ora 文件，按计划运行它使用服务器上的 tnsnames.ora 文件。您可能不知道有任何变化，但您是否负责服务器上的维护？

# java - JPA 选择自 (Select)

> ID：10493942
> 
> 赞同：1
> 
> 时间：2012-05-08T06:48:38.457
> 
> 标签：java, hibernate, jpa, persistence

有什么方法可以用 JPA 或 Hibernate Crtiteria API 来表示这种 SQL 吗？或者我应该以原生方式执行它？

SELECT AX FROM (SELECT X, E.id FROM Employee E) as A WHERE A.id = 10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:49:03.373

从[文档中](http://queryhql-subqueries)：

> 请注意，HQL 子查询只能出现在 select 或 where 子句中。

所以是的，这样的查询只能使用本机 SQL 来完成。

# iphone - 覆盖保存在 NSUserDefaults 中的值

> ID：10493945
> 
> 赞同：0
> 
> 时间：2012-05-08T06:48:55.723
> 
> 标签：iphone, ios, xcode, nsuserdefaults

我有这个方法来保存一个名为 myWallet 的可变数组，其中包含 Class Card 的实例。

```
- (void)saveMyWallet
{

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    [defaults setObject:[NSKeyedArchiver archivedDataWithRootObject:self.myWallet] forKey:@"myWalletArray"];

    [defaults synchronize];
} 
```

我拥有的 Card 类具有三个实例变量：名称、引脚和点。到目前为止，在 UserDefaults 中保存 Card 的新实例是可以的。我只想知道一些关于如何覆盖点值的建议，因为当我继续计算点时，我想更新它。

这是我的卡类

卡片.h

```
#import <Foundation/Foundation.h>

@interface Card : NSObject <NSCoding>

    @property (nonatomic, strong) NSString *name;
    @property (nonatomic, strong) NSString *pin;
    @property (nonatomic, strong) NSNumber *points;
    @property (nonatomic, strong) NSMutableArray *pointsToDeduct;

- (double) subtractPoints: (double) requiredPoints;
- (void) encodeWithCoder:(NSCoder *)coder;
- (id) initWithCoder: (NSCoder *)coder;
@end 
```

卡.m

```
#import "Card.h"

@implementation Card 

@synthesize name = _name;
@synthesize pin = _pin;
@synthesize points = _points;
@synthesize pointsToDeduct = _pointsToDeduct;

- (id)initWithCoder:(NSCoder *)coder 
{    
    self = [[Card alloc] init];
    if(self != nil) {
        self.name = [coder decodeObjectForKey:@"name"];
        self.pin = [coder decodeObjectForKey:@"pin"];
        self.points = [coder decodeObjectForKey:@"points"];

    }

    return self;
}

- (void)encodeWithCoder:(NSCoder *)coder 
{
    [coder encodeObject:self.name forKey:@"name"];
    [coder encodeObject:self.pin  forKey:@"pin"];
    [coder encodeObject:self.points forKey:@"points"];

}

- (double) subtractPoints:(double) requiredPoints
{

    double latestPoints;

    latestPoints = ([self.points doubleValue] - requiredPoints);

    return latestPoints;
}

@end 
```

最后，这里是点的新值（名为 resultsPoints）应该来自的委托方法。

```
- (void)perksDetailsViewController:(PerksDetailsViewController *)sender didPassRequiredPoints:(NSNumber *)requiredPoints withCard:(Card *)selectedCard 
{

    double perksPoints = [requiredPoints doubleValue];

    self.resultingPoints = [NSNumber numberWithDouble:[selectedCard subtractPoints:perksPoints] ];

    NSLog(@"points remaining %@", self.resultingPoints); 
} 
```

用建议轰炸我:)提前谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T06:53:25.470

从我所见，您实际上将对象保存为 NSData，因此逻辑方法是从用户默认值中取回它，取消存档，更新属性，存档并将其保存回用户默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:59:39.670

将 NSUserDefaults 中的数据检索到运行时，删除键的先前对象并写回更新的值。

# 3des - 是否可以使用 3DES 解密方法的 CBC 模式来解密 14 个字符的加密消息？

> ID：10493948
> 
> 赞同：0
> 
> 时间：2012-05-08T06:49:32.233
> 
> 标签：3des, cbc-mode

我在 wikipedia 中读到了 CBC 加密模式，它说在 3DES 方法中，一条消息被分成 16 个数字块，然后它们被加密或解密。每个被加密的块都与下一个明文进行异或，然后被加密。我从这里得到了这些信息，并在图表中得到了很好的解释。[http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)

我的问题是我必须解密长度为 14 的消息，所以它将是一个块。那么现在我将如何为这么小的消息实施 CBC 呢？不会有下一个要与之异或的块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:16:37.830

正如链接的 Wikipedia 文章所述，CBC 和其他操作模式的存在是为了允许“在单个密钥下重复和安全地使用分组密码”。[正如您在加密 Tux](http://en.wikipedia.org/wiki/File%3aTux_ecb.jpg)的图片中所见，这是消除数据中的模式所必需的。由于您只加密一个数据块（至少少 2 个字节），因此您可以使用最简单的技术 ECB，它只需传入您的明文并生成一些密文。

如果您打算对这些 14 字节消息中的几个进行加密，那么您可能需要考虑使用 CBC 来避免在加密数据中暴露重复。

# ios - 从 iPhone 应用程序启用/禁用 Apple 推送通知？

> ID：10493949
> 
> 赞同：21
> 
> 时间：2012-05-08T06:49:35.477
> 
> 标签：ios, iphone, permissions, push-notification, apple-push-notifications

我还有一个疑问`APNS`。那是当应用程序首次启动时，如果用户接受，应用程序会请求 Apple 推送通知权限，他们可以接收通知。如果用户取消，他们将不会收到任何通知。我说清楚了吗？？

现在我的疑问是，

1.  `Cancel`第一次，如果用户在几天后再次从应用程序中取消推送通知服务（单击按钮），如果他们希望收到 Apple 推送通知，则可以从应用程序中再次为特定用户启用 Apple 推送通知。

2.  如果用户首先接受苹果推送通知服务，几天后如果他们不想收到通知，是否可以`APNS`在我们的应用程序中禁用？我希望你能理解我的疑惑。任何人都可以澄清这个疑问吗？

3.  有可能在我们的 iPhone 应用中实现以上这些场景吗？

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-08T07:14:33.530

您可以使用不同类型读取应用程序的权限`UIRemoteNotificationType enabledTypes = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];`，然后执行按位和操作以查看哪些已启用。您也可以调用`unregisterForRemoteNotifications`禁用通知。您不能做的一件事是打开通知，尽管您可以指导用户。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-08T06:54:00.967

遗憾的是，您无法通过应用代码为您的应用启用或禁用推送通知。请求许可的对话框只显示一次。通常，其他应用程序会通过进入设置-> 通知-> 应用程序名称向用户显示启用/禁用推送通知的说明。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-27T11:58:02.093

我的要求是使用 .In order 启用和禁用 pushnotificaton。`UISwitch`为了**从代码中启用推送通知，请**在按钮操作中使用它。

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:
   (UIRemoteNotificationTypeBadge |  UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)]; 
```

**为了禁用**

```
[[UIApplication sharedApplication] unregisterForRemoteNotifications];
NSLog(@"UnRegistered for pushnotification"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T09:10:18.117

当您第一次授予权限时，您的 iPhone 的设备令牌会在 APN 服务器上注册，然后您就可以收到推送通知。稍后您可以从您的设备设置 → 通知 → 您的应用程序启用/禁用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T06:58:42.430

1.从您的应用程序不，它只是在用户安装后第一次打开您的应用程序时出现..如果他决定允许它，他可以从设备设置中激活。

2.它可以从应用程序和设置中完成..如果您想从您的应用程序中禁用它，您可以将设备令牌（决定禁用推送通知）发送到您的服务器并将其存储为 ex。作为“无通知列表”，并且在发送有效负载时忽略这些令牌，因此它们将不会收到通知。

3.我已经回答了。

祝你好运。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-24T05:48:23.113

务实地说，可以通过注册和注销推送通知来启用和禁用推送通知。

**启用推送通知：**

```
if #available(iOS 10.0, *) {
   // For iOS 10.0 +
   let center  = UNUserNotificationCenter.current()
   center.delegate = self
   center.requestAuthorization(options: [.sound, .alert, .badge]) { (granted, error) in
        if error == nil{
           DispatchQueue.main.async(execute: {
                 UIApplication.shared.registerForRemoteNotifications()
           }) 
        }
   }
}else{
    // Below iOS 10.0

    let settings = UIUserNotificationSettings(types: [.sound, .alert, .badge], categories: nil)
    UIApplication.shared.registerUserNotificationSettings(settings)

    //or
    //UIApplication.shared.registerForRemoteNotifications()
} 
```

**委托方法**

```
@available(iOS 10.0, *)
func userNotificationCenter(_ center: UNUserNotificationCenter, didReceive response: UNNotificationResponse, withCompletionHandler completionHandler: @escaping () -> Void) {

}

@available(iOS 10.0, *)
func userNotificationCenter(_ center: UNUserNotificationCenter, willPresent notification: UNNotification, withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void) {

}

func application(_ application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: Data) {
    // .. Receipt of device token
}

func application(_ application: UIApplication, didFailToRegisterForRemoteNotificationsWithError error: Error) {
    // handle error
} 
```

**禁用推送通知：**

```
UIApplication.shared.unregisterForRemoteNotifications() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-17T08:48:51.543

您可以使用此代码在 iOS 9 中提供支持

```
 if ([[UIApplication sharedApplication] respondsToSelector:@selector(currentUserNotificationSettings)]) {

    UIUserNotificationType types = [[[UIApplication sharedApplication] currentUserNotificationSettings] types];

    if (types == UIUserNotificationTypeNone) {
        // Do something
        NSLog(@"");
    }
} else {

    UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];

    if (types == UIRemoteNotificationTypeNone) {
        // Do something
        NSLog(@"");
    }
} 
```

请参阅[如何使用 enabledRemoteNotificationTypes 更新代码，因为它“在 iOS 8 中不受支持”？](https://stackoverflow.com/questions/26091875/how-to-update-code-using-enabledremotenotificationtypes-because-it-is-not-suppo)

# java - android程序的java致命异常

> ID：10493951
> 
> 赞同：2
> 
> 时间：2012-05-08T06:49:44.910
> 
> 标签：java, android, authentication, cifs, jcifs

当我运行下面的代码时出现以下异常。这是一个 android 代码，用于访问远程 windows pc。它用于下载、上传和删除。当我运行此代码时，它会抛出验证异常。但我不知道实际的错误。有人可以找到错误吗？

```
05-08 11:51:25.885: E/AndroidRuntime(517): FATAL EXCEPTION: main
05-08 11:51:25.885: E/AndroidRuntime(517): java.lang.VerifyError: com.android.test.t
05-08 11:51:25.885: E/AndroidRuntime(517):  at java.lang.Class.newInstanceImpl(Native Method)
05-08 11:51:25.885: E/AndroidRuntime(517):  at java.lang.Class.newInstance(Class.java:1409)
05-08 11:51:25.885: E/AndroidRuntime(517):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-08 11:51:25.885: E/AndroidRuntime(517):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
05-08 11:51:25.885: E/AndroidRuntime(517):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-08 11:51:25.885: E/AndroidRuntime(517):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-08 11:51:25.885: E/AndroidRuntime(517):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-08 11:51:25.885: E/AndroidRuntime(517):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-08 11:51:25.885: E/AndroidRuntime(517):  at android.os.Looper.loop(Looper.java:123)
05-08 11:51:25.885: E/AndroidRuntime(517):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-08 11:51:25.885: E/AndroidRuntime(517):  at java.lang.reflect.Method.invokeNative(Native Method)
05-08 11:51:25.885: E/AndroidRuntime(517):  at java.lang.reflect.Method.invoke(Method.java:507)
05-08 11:51:25.885: E/AndroidRuntime(517):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-08 11:51:25.885: E/AndroidRuntime(517):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-08 11:51:25.885: E/AndroidRuntime(517):  at dalvik.system.NativeStart.main(Native Method) 
```

代码：

```
package com.android.test;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.util.ArrayList;
import jcifs.smb.NtlmPasswordAuthentication;
import jcifs.smb.SmbException;
import jcifs.smb.SmbFile;
import jcifs.smb.SmbFileInputStream;
import jcifs.smb.SmbFileOutputStream;
import android.app.ListActivity;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.os.StatFs;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;

class Helper extends AsyncTask<Integer, Void, Void> 
{
//  private t one=new t();
    private SmbFile dfile;
    private String dfilepath;
    private SmbFile dfolder;
    private String dfolderpath;
    private File ufolder;
    private SmbFile ufoldersmb;
    private NtlmPasswordAuthentication auth;
    private int upstate=0;
    private int downstate=0;
    private Context context;
    private ArrayList<SmbFile> smbArray=new ArrayList<SmbFile>();
    private String ext;
    private int tasknumber;
    private String taskname;
    public Context getcontext()
    {
        return context;
    }
    public int gettasknumber()
    {
        return tasknumber;
    }
    public String gettaskname()
    {
        return taskname;
    }
    public int getupstate() 
    {
        return upstate;
    }
    public int getdownstate() 
    {
        return downstate;
    }
    public void setdfile(SmbFile a) 
    {
        this.dfile = a;
    }
    public void setdfilepath(String b) 
    {
        this.dfilepath = b;
    }
    public void setdfolder(SmbFile c) 
    {
        this.dfolder = c;
    }
    public void setdfolderpath(String d) 
    {
        this.dfolderpath = d;
    }
    public void setufolder(File g) 
    {
        this.ufolder = g;
    }
    public void setufoldersmb(SmbFile h) 
    {
        this.ufoldersmb = h;
    }
    public void setauthentication(NtlmPasswordAuthentication i) 
    {
        this.auth = i;
    }
    public void setupstate(int j) 
    {
        upstate = j;
    }
    public void setdownstate(int k) 
    {
        downstate = k;
    }
    public void setcontext(Context l) 
    {
        context = l;
    }
    public void setarraysmb(SmbFile m) 
    {
        this.smbArray.add(m);
    }
    public void setextstorage(String n) 
    {
        this.ext=n;
    }
    public void settasknumber(int o) 
    {
        this.tasknumber=o;
    }
    public void settaskname(String p) 
    {
        this.taskname=p;
    }
    @Override
    protected Void doInBackground(Integer... params) 
    {
        //check flag to execute exactly method
        switch (params[0]) 
        {
            case 0:
                downloadTask();
                break;
            case 1:
                //Toast.makeText(context, "AccessPC Upload task "+tasknumber+" Started", Toast.LENGTH_LONG).show();
                uploadFolder(ufolder,ufoldersmb);
                break;
            default:break;
        }
        return null;
    }
    void downloadFile(SmbFile dfile,String dpath)
    {   
        StatFs statFs = new StatFs(Environment.getExternalStorageDirectory().getAbsolutePath()); 
        long blockSize = statFs.getBlockSize();
        long freeSize = statFs.getFreeBlocks()*blockSize;
        try
        {
            if(!((freeSize-dfile.length())<0))
            {
                SmbFileInputStream din=new SmbFileInputStream(dfile);
                FileOutputStream dout=new FileOutputStream(dpath);
                int c;
                while((c=din.read())!=-1)
                {
                    dout.write(c);
                }
                if (din != null) 
                {
                    din.close();
                }
                if (dout != null) 
                {
                    dout.close();
                }
            }
            else
            {
                //Toast.makeText(context, "AccessPC Download Task failed ",Toast.LENGTH_LONG).show();
            }
        }
        catch(Exception e)
        {
            //Toast.makeText(context, "AccessPC Download Task failed "+e,Toast.LENGTH_LONG).show();
        }
    }
    void downloadFolder(SmbFile dfolder,String dfolderpath)
    {
        try 
        {
            dfolderpath=dfolderpath+dfolder.getName();
            if(!(new File(dfolderpath)).exists())
            {
                (new File(dfolderpath)).mkdir();
            }
            SmbFile[] temp=dfolder.listFiles(); 
            if(temp.length==0)
            {
                return;
            }
            for(SmbFile m:temp)
            {
                if(m.isFile())
                {
                    downloadFile(m,dfolderpath+m.getName());
                }
                else
                {
                    downloadFolder(m,dfolderpath);
                }
            }
        } 
        catch (Exception e) 
        {
            //Toast.makeText(context, "AccessPC Download Task failed "+e,Toast.LENGTH_LONG).show();
        }
    }
    void uploadFile(File ufile,SmbFile ufilesmb)
    {
        try
        {
            FileInputStream uin=new FileInputStream(ufile);
            SmbFile tempSmb=new SmbFile(ufilesmb.getPath()+ufile.getName(),auth);
            SmbFileOutputStream uout=new SmbFileOutputStream(tempSmb);
            int c;
            while((c=uin.read())!=-1)
            {
                uout.write(c);
            }
            if (uin != null)
            {
                uin.close();
            }
            if (uout != null) 
            {
                uout.close();
            }
        }
        catch(Exception e)
        {
            //Toast.makeText(context, "AccessPC Upload Task failed "+e, Toast.LENGTH_LONG).show();
        }
    }
    void uploadFolder(File ufolder,SmbFile ufoldersmb)
    {
        try 
        {
            SmbFile tempSmb=new SmbFile(ufoldersmb.getPath()+ufolder.getName()+"/",auth);
            if(!tempSmb.exists())
            {
                tempSmb.mkdir();
            }
            File[] ftemp=ufolder.listFiles();
            if(ftemp.length==0)
            {
                setupstate(2);
                return;
            }
            for(File m:ftemp)
            {
                if(m.isFile())
                {
                    uploadFile(m,tempSmb);
                }
                else
                {
                    uploadFolder(m,tempSmb);
                }
            }
        } 
        catch (Exception e) 
        {
            //Toast.makeText(context, "AccessPC Upload Task failed "+e,Toast.LENGTH_LONG).show();
        }
    }
    void downloadTask()
    {
        //Toast.makeText(context, "AccessPC download task "+tasknumber+" Started", Toast.LENGTH_LONG).show();
        try 
        {
            for(SmbFile m:smbArray)
            {
                if(m.isFile())
                {       
                    setdfile(m);
                    setdfilepath(ext+m.getName());
                    downloadFile(dfile,dfilepath);
                }
                else
                {
                    setdfolder(m);
                    setdfolderpath(ext);
                    downloadFolder(dfolder,dfolderpath);
                }
            } 
            setdownstate(2);
        }
        catch (Exception e) 
        {
            //Toast.makeText(context,"Download error "+e,Toast.LENGTH_LONG).show();
        }
    }   
    @Override
    protected void onPostExecute(Void result) 
    {
        if(upstate==2)
        {
            setupstate(0);
            //Toast.makeText(context, "AccessPC "+taskname+" task "+tasknumber+" Finished", Toast.LENGTH_LONG).show();
        }
        if(downstate==2)
        {
            setdownstate(0);
            //Toast.makeText(context, "AccessPC "+taskname+" task "+tasknumber+" Finished", Toast.LENGTH_LONG).show();
        }   
    }
    @Override
    protected void onCancelled() {
        // TODO Auto-generated method stub
        if(!isCancelled())
            cancel(true);
    }

}

class imageCheckBoxAdapter extends ArrayAdapter<String> implements OnClickListener
{
    private final Context context;
    private final ArrayList<String> values;
    private final Map< String, SmbFile> obj;
    private ArrayList<Boolean> checks=new ArrayList<Boolean>();
    public imageCheckBoxAdapter(Context context,ArrayList<String> values,Map< String, SmbFile>obj) 
    {
        super(context, R.layout.row_checkbox, values);
        this.context = context;
        this.values = values;
        this.obj=obj;
        for (int i = 0; i < values.size(); i++) 
        {
            checks.add(i, false);
        }
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.row_checkbox, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.text1_check);
        CheckBox chk = (CheckBox) rowView.findViewById(R.id.checkBox1);
        textView.setText(values.get(position));
        ImageView imageView = (ImageView) rowView.findViewById(R.id.icon_image_check);
        try
        {
            if((obj.get(values.get(position)).isFile()))
            {
                imageView.setImageResource(R.drawable.view_file_icon);
            }
            else
            {
                imageView.setImageResource(R.drawable.view_folder_icon);
            }
        }
        catch (Exception e) 
        {
            Toast.makeText(context,"Network error "+e,Toast.LENGTH_LONG).show();
        }
        chk.setTag(Integer.valueOf(position));
        // Set a listener for the checkbox
        chk.setOnClickListener(this);
        //Sets the state of CB, since we have the list of checked CB
        chk.setChecked(checks.get(position));
        return rowView;
    }
    @Override
    public void onClick(View view) 
    {
        Integer index = (Integer)view.getTag();
        boolean state = checks.get(index.intValue());
        checks.set(index.intValue(), !state);
    }
    boolean getter(int i)
    {
       return checks.get(i);
    }
}

class imageAdapter extends ArrayAdapter<String>
{
    private final Context context;
    private final ArrayList<String> values;
    private final Map< String, SmbFile> obj;
    public imageAdapter(Context context,ArrayList<String> values,Map< String, SmbFile> obj) 
    {
        super(context, R.layout.row, values);
        this.context = context;
        this.values = values;
        this.obj=obj;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.row, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.text1);
        textView.setText(values.get(position));
        ImageView imageView = (ImageView) rowView.findViewById(R.id.icon_image);
        try
        {
            if((obj.get(values.get(position)).isFile()))
            {
                imageView.setImageResource(R.drawable.view_file_icon);
            }
            else
            {
                imageView.setImageResource(R.drawable.view_folder_icon);
            }
        }
        catch (Exception e) 
        {
            Toast.makeText(context,"Network error "+e,Toast.LENGTH_LONG).show();
        }
        return rowView;
    }
}

public class t extends ListActivity
{
    String ip="127.0.0.1",name="Deepak",password="       ";
    String url;
    NtlmPasswordAuthentication auth;
    Map< String, SmbFile> map=new HashMap< String, SmbFile>();
    SmbFile previous=null,current=null;
    imageCheckBoxAdapter object=null;
    String extStorage=Environment.getExternalStorageDirectory()+"/t/";
    ArrayList<Helper> helpobject=new ArrayList<Helper>();
    int uptask=0;
    int downtask=0;
    int level=0;
    int MENU_STATE=0;
    final int MENU_GENERAL=0;
    final int MENU_DOWNLOAD=1;
    final int MENU_UPLOAD=2;
    final int MENU_DELETE=3;
    final int DOWNLOAD1=41;
    final int DOWNLOAD2=42;
    final int UPLOAD=43;
    final int DELETE1=45;
    final int DELETE2=46;
    final int QUIT=47;
    final int CANCEL=48;
    final int FINISH=49;

    Map< String, SmbFile> listMap(SmbFile obj)
    {
        Map< String, SmbFile> list_map=new HashMap< String, SmbFile>();
        int i;
        try
        {
            SmbFile a[]=obj.listFiles();
            for(i=0;i<a.length;i++)
            {
                if(!a[i].isHidden())
                {
                    list_map.put( a[i].getName(), a[i] ); 
                }
            }
            return list_map;
        }
        catch(SmbException e)
        {
            Toast.makeText(this,"cannot list files "+e,Toast.LENGTH_LONG).show();
            return null;
        }

    }   
    Map< String, SmbFile> display(SmbFile obj)
    {
        Map< String, SmbFile> display_map=new HashMap< String, SmbFile>();
        ArrayList<String> smbName=new ArrayList<String>();
        display_map=listMap(obj);
        Set<String> keys = display_map.keySet();
        for(String key:keys)
        {
            smbName.add(key);
        }
        setListAdapter(new imageAdapter(this, smbName,display_map));
        return display_map;
    }
    Map< String, SmbFile> display_check(SmbFile obj)
    {
        Map< String, SmbFile> display_map=new HashMap< String, SmbFile>();
        ArrayList<String> smbName=new ArrayList<String>();
        display_map=listMap(obj);
        Set<String> keys = display_map.keySet();
        for(String key:keys)
        {
            smbName.add(key);
        }
        object= new imageCheckBoxAdapter(this, smbName,display_map);
        setListAdapter(object);
        return display_map;
    }   
    @Override
    public boolean onPrepareOptionsMenu(Menu menu) 
    {
        if(MENU_STATE==MENU_GENERAL)
        {
            menu.clear();
            menu.add(0, DOWNLOAD1, 0, "Download");
            menu.add(0, UPLOAD, 0, "Upload");
            menu.add(0, DELETE1, 0, "Delete");
            menu.add(0, QUIT, 0, "Quit");
            menu.add(0, FINISH, 0, "Finish");
        }
        else
        {
            if(MENU_STATE==MENU_DOWNLOAD)
            {
                menu.clear();
                menu.add(0, DOWNLOAD2, 0, "Download");
                menu.add(0, CANCEL, 0, "Cancel");
            }
            else
            {
                if(MENU_STATE==MENU_DELETE)
                {
                    menu.clear();
                    menu.add(0, DELETE2, 0, "Delete");
                    menu.add(0, CANCEL, 0, "Cancel");
                }
            }
        }
        return super.onPrepareOptionsMenu(menu);
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) 
    {
        switch(item.getItemId())
        {
            case DOWNLOAD1:
                            MENU_STATE=MENU_DOWNLOAD;
                            map=display_check(current);
                            return true;
            case UPLOAD:
                            if(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED))
                            {
                                if(current.getShare()==null)
                                {
                                    Toast.makeText(this,"UPLOAD FAILED",Toast.LENGTH_LONG).show();
                                }
                                else
                                {
                                    File f=new File(extStorage);
                                    Helper help=new Helper();
                                    helpobject.add(help);
                                    help.setufolder(f);
                                    help.setufoldersmb(current);
                                    help.setauthentication(auth);
                                    help.setupstate(1);
                                    help.settasknumber(uptask);
                                    uptask++;
                                    help.settaskname("Upload");
                                    help.setcontext(this.getApplicationContext());
                                    help.execute(1);
                                }
                            }
                            else
                            {
                                Toast.makeText(this,"UPLOAD FAILED--NO SD CARD FOUND",Toast.LENGTH_LONG).show();
                            }
                            return true;
        case DELETE1:
                            MENU_STATE=MENU_DELETE;
                            map=display_check(current);
                            return true;
        case QUIT:
                            for(Helper k:helpobject)
                            {
                                if(k.getStatus()==AsyncTask.Status.RUNNING||k.getStatus()==AsyncTask.Status.PENDING)
                                {
                                    k.cancel(true);
                                }
                            }
                            int countm=0;
                            for(Helper k:helpobject)
                            {
                                if(k.isCancelled())
                                {
                                    countm++;
                                }
                            }
                            if(countm==helpobject.size())
                            Toast.makeText(this,"All download and upload tasks cancelled",Toast.LENGTH_LONG).show();
                            return true;
        case DOWNLOAD2:  
                            if(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED))
                            {
                                int tempcount=0;
                                for(int i=0;i<object.getCount();i++)
                                {
                                    if(object.getter(i)==true)
                                    {
                                        tempcount++;
                                    }
                                }
                                if(tempcount==0)
                                {
                                    Toast.makeText(this,"Please choose atleast one item for download!!",Toast.LENGTH_LONG).show();
                                }
                                else
                                {
                                    Helper help=new Helper();
                                    helpobject.add(help);
                                    help.settasknumber(downtask);
                                    downtask++;
                                    help.settaskname("Download");
                                    help.setcontext(this.getApplicationContext());
                                    help.setextstorage(extStorage);
                                    help.setdownstate(1);
                                    for(int i=0;i<object.getCount();i++)
                                    {
                                        if(object.getter(i)==true)
                                        {
                                            help.setarraysmb(map.get(object.getItem(i)));
                                        }
                                    }
                                    help.execute(0);
                                }
                            }
                            else
                            {
                                Toast.makeText(this,"DOWNLOAD FAILED--NO SD CARD FOUND",Toast.LENGTH_LONG).show();
                            }                   
                            return true;
        case DELETE2:
                            for(int i=0;i<object.getCount();i++)
                            {
                                if(object.getter(i)==true)
                                {
                                    try 
                                    {
                                        map.get(object.getItem(i)).delete();
                                    } 
                                    catch (Exception e) 
                                    {
                                        Toast.makeText(this,"cannot be deleted "+e,Toast.LENGTH_LONG).show();
                                    }
                                }
                            }
                            return true;
        case CANCEL:
                            MENU_STATE=MENU_GENERAL;
                            map=display(current);
                            return true;
        case FINISH:
                            finish();
        default:
                            return super.onOptionsItemSelected(item);
        }
    }
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        File abc=new File(Environment.getExternalStorageDirectory()+"/t/");
        if(!abc.exists())
        {
            abc.mkdir();
        }
        url= "smb://" + ip + "/";
        auth = new NtlmPasswordAuthentication(null, name, password);
        try 
        {
            SmbFile dir = new SmbFile(url, auth);
            current=dir;
            map=display(dir);
        } 
        catch (Exception e) 
        {
            Toast.makeText(this,"Network error "+e,Toast.LENGTH_LONG).show();
        }

    }
    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) 
    {
        super.onListItemClick(l, v, position, id);
        Object o=this.getListAdapter().getItem(position);
        String keyword=o.toString();
        Set<String> keys = map.keySet();
        for(String key:keys)
        {
            if(keyword==key)
            {
                SmbFile temp=map.get(key);
                try
                {
                    if(temp.isDirectory())
                    {
                        try
                        {
                            previous= new SmbFile(map.get(key).getParent(), auth);
                            level=level+1;
                        }
                        catch(Exception e)
                        {
                            Toast.makeText(this,"Network error "+e,Toast.LENGTH_LONG).show();
                        }
                        current=map.get(key);
                        map=display(map.get(key));
                    }
                }
                catch(Exception e)
                {
                    Toast.makeText(this,"you can't open this directory "+e,Toast.LENGTH_LONG).show();
                }
            }
        }   
    }
    @Override
    public void onBackPressed() 
    {
        MENU_STATE=MENU_GENERAL;
        if(level>=1)
        {
            level=level-1;
            current=previous;
            map=display(previous);
            try
            {
                previous=new SmbFile(previous.getParent(), auth);
            }
            catch (Exception e) 
            {
                Toast.makeText(this,"Network error "+e,Toast.LENGTH_LONG).show();
            }   
        }
        else
        {
            level=0;
            super.onBackPressed();
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:58:33.297

我注意到您正在使用 Java CIFS 库。我的猜测是您没有使用它的 Android 版本，而是您刚刚在项目中删除了标准 jar。这行不通。您需要为 Android 重新编译它。

此外，您不应该将您的包命名为 com.android.test（不要在其中包含 android 一词）。

# php - PHP中的树问题

> ID：10493953
> 
> 赞同：1
> 
> 时间：2012-05-08T06:49:52.560
> 
> 标签：php, mysql, tree

我有一个表 General 的结构是这样的

```
----------------------------------
id    |    name       | parent_id
------------------------------------
1     | root_category | Null
2     | Appare        | 1
3     | Accessories   | 1
4     | Shirt         | 2
5     | Pants         | 2
6     | hand Bags     | 3
7     | jewelry       | 3 
```

我使用 from 在我的产品表中存储通用表的值

包含有关产品的所有信息的产品表

在产品表中

* * *

```
p_id       | 1 
p_name     | bla
p_weight   | 250
g_id       | 5      
g_name     | pants
g_parent   | 2 
```

我想使用生成完整的树

->g_id -> g_name -> g_parent

树应该是这样的

```
Root Category
 - Apparel 
   -- Shirts
   -- Pants 
 - Accessories
   -- Handbags 
   -- Jewelry 
```

我试过递归函数，但它不起作用

```
function get_categories($parent = $g_parent)
{
    $html = '<ul>';
    $query = mysql_query("SELECT * FROM `general` WHERE `parent_id` = '$parent'");
    while($row = mysql_fetch_assoc($query))
    {
        $current_id = $row['id'];
        $html .= '<li>' . $row['name'];
        $has_sub = NULL;
        $has_sub = mysql_num_rows(mysql_query("SELECT COUNT(`parent_id`) FROM `general` WHERE    `parent_id` = '$current_id'"));
        if($has_sub)
        {
        $html .= get_categories($current_id);
        }
        $html .= '</li>';
    }
    $html .= '</ul>';
    return $html;
}

print get_categories(); 
```

但它不工作.... :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:37:09.810

你应该试试这个......它的工作代码..还看到输出屏幕截图（*输出屏幕*）

```
<?php

function get_categories(){

    $con = mysql_connect("localhost","root","");
    if (!$con){
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db("stackoverflow", $con);

    $result = mysql_query("SELECT g.`name` AS `category`, GROUP_CONCAT(gj.`name`) AS `name`
    FROM `general` g INNER JOIN `general` gj ON g.`id` = gj.`parent_id` GROUP BY g.`id` ");

    $i=0;
    while($row = mysql_fetch_array($result)){
        $data[$i]['category'] = $row['category'];
        $data[$i]['name'] = $row['name'];
        $i++;
    }

    $html = $data[0]['category']."<br>";
    unset($data[0]);

    foreach($data as $key => $listing){

        $html           .= " - ".$listing['category']."<br>";
        $exp             = explode(",",$listing['name']);
        $count_exp   = count($exp);

        for($j=0; $j<=$count_exp-1;$j++){
            $html      .= "  -- ".$exp[$j]."<br>";
        }
    }

    return $html;
}

print_r(get_categories()); 
?> 
```

> 输出画面

![在此处输入图像描述](../Images/e1ee5d7e35de1b9be0eeb2aa2835eab3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:59:21.963

改变这个

```
print get_categories(); 
```

到

```
print get_categories(1); 
```

空字符串不会匹配 MySQL 中的 NULL 值，因此您需要提供起始 id。除非你想修改你的函数来额外检查 $parent 是否为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:31:44.023

尝试一些改变：

```
function get_categories($parent)
{
    $html = '<ul>';
    $query = mysql_query("SELECT * FROM `general` WHERE `parent_id` = '$parent'");
    while($row = mysql_fetch_assoc($query))
    {
        $current_id = $row['id'];
        $html .= '<li>' . $row['name'];
        $has_sub = NULL;
        $has_sub = mysql_num_rows(mysql_query("SELECT COUNT(`parent_id`) as count FROM `general` WHERE    `parent_id` = '$current_id'")); // change here
        if($has_sub['count'] > 0) // change here
        {
        $html .= get_categories($current_id);
        }
        $html .= '</li>';
    }
    $html .= '</ul>';
    return $html;
}

print get_categories(1); // change here 
```

# salesforce - 向字段添加日期和时间

> ID：10493958
> 
> 赞同：0
> 
> 时间：2012-05-08T06:50:30.203
> 
> 标签：salesforce

我在自定义对象中有一个日期时间类型的字段。并且需要用另一个字段中的日期和时间填写该字段，时间为 '8:00 AM' est

例如：字段值应类似于 - 2012/05/01 8:00 AM

请帮我找到解决方案谢谢Anu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:00:14.007

这个问题对于 StackOverflow 来说是题外话，但是您可能想要使用公式字段，可能还有`DATE()`从日期字段中获取日期的函数，然后您可以手动添加时间，我无法提供更多详细说明您正在填充的内容。

如果您还没有加入它，那么有一个[针对 Salesforce 问答网站的 Area 51 提案，](http://area51.stackexchange.com/proposals/37589/salesforce?referrer=4-k5FqV679TWbBGLxdLUKg2)正是针对此类问题的。

# iphone - 当 rootviewcontroller 为 ECSlidingVIewController 时，子视图想要全屏在顶部留下 20px

> ID：10493961
> 
> 赞同：5
> 
> 时间：2012-05-08T06:50:37.923
> 
> 标签：iphone, ios, fullscreen, navigationcontroller

我使用一个`ECSlidingViewController`作为`RootViewController` 在这个我加载一个`UINavigationController`最终深入到一个图像库。

图片库将状态栏和导航栏设置为半透明，并设置为全屏。但是，这仍然会在状态栏所在的顶部留下 20px 的间隙。当我点击图库图像以隐藏导航栏、状态栏和工具栏时，差距仍然存在，直到我旋转手机。然后只有这样 20px 的间隙才会消失，只有现在当我点击以取消隐藏导航栏、状态栏和工具栏时，导航栏位于状态栏下方，直到我再次旋转手机，我再次留下 20px 的间隙。

以下是我所说的一些例子

加载时的正常视图（20px 间隙）
[http://cl.ly/GSE5](http://cl.ly/GSE5)
全屏模式 -> 旋转 -> 退出全屏
[http://cl.ly/GSMa](http://cl.ly/GSMa)

当这`rootViewController`是一个标准时，这一切都不会发生`ViewController` 我应该在实现中寻找`ECSSlidingViewController`可能导致这种情况的什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T15:03:57.940

尝试在您的 rootViewController 中创建一个大小正确的视图。然后你可以在视图中加载你的图像，图像大小就是视图大小。

我希望这个结果有用。

# c#-4.0 - 是否有任何示例用于创建 word 文档模板并使用 c# 分配数据集值

> ID：10493964
> 
> 赞同：0
> 
> 时间：2012-05-08T06:51:07.973
> 
> 标签：c#-4.0, ms-word, vb.net-2010

我想在word文档中生成报告，为此我需要创建word文档模板并将值（我已经从数据库获取值到数据集）动态分配给Word文档模板。

请帮助我有任何示例链接...

感谢所有支持者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:08:25.127

阅读[这篇 Microsoft 支持文章](http://support.microsoft.com/kb/316384)，如果这不能让你浮想联翩，请尝试[本文中的一些链接](http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/740abd22-4b80-466c-b0b9-0cc771351596)

# c - /proc/ 修改日期中的目录何时更改？

> ID：10493965
> 
> 赞同：0
> 
> 时间：2012-05-08T06:51:12.403
> 
> 标签：c, linux, unix, proc

我正在尝试获取进程的创建日期，但由于 POSIX 仅支持访问、修改和更改日期，我似乎无法“统计”任何文件。所以也许我可以使用进程目录的“修改”日期？像“/proc/2206”并从输出结构中获取修改日期？

这就是为什么我想知道文件夹的“修改”日期何时更改？注意：我正在编程，没有使用“ps”之类的任何工具

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:23:53.243

您可以在文件上使用[stat(2)](http://linux.die.net/man/2/stat) 系统调用`/proc/2206/stat`-for pid 进程`2206`- （或`/proc/self/stat`从进程内部调用）。阅读有关 Linux [proc(5)](http://linux.die.net/man/5/proc)伪文件系统的更多信息。

似乎该`/proc/*/stat`文件的所有访问、修改、更改时间都是所考虑进程的开始时间。

请记住，下面`/proc/`的文件是 linux 内核提供的伪文件，读取速度很快，不涉及任何磁盘活动。

# php - 如何查询参数是否为数组？

> ID：10493967
> 
> 赞同：-2
> 
> 时间：2012-05-08T06:51:29.823
> 
> 标签：php, wordpress

我将这个给定的 id 数组分配给某个变量，

```
$post_id = array('756','754','752','750'); 
```

然后我想要的是获取所有帖子，ID 在数组内。是否可以获得所有帖子，最好是在一个数组中，其 ID 对应于给定的 ID 数组？这是针对我的 Wordpress 项目的，由于我是这个东西的新手，所以我现在有点迷茫。请指导我。:(

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:16:30.690

尝试这个 ：

```
$post_id = array('756','754','752','750');

$postId = "'" . implode("','", $post_id) . "'";

$query = "SELECT * FROM Table_Name WHERE postId IN (".$postId.") "; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T06:55:23.443

你必须[implode()](http://php.net/manual/en/function.implode.php)数组。

```
$query = "SELECT * FROM mytable WHERE posts IN ('" . implode("','", $post_id) . "')"; 
```

我认为您正在寻找[MySQL 的 IN() 子句](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_in)。

# facebook - 页面选项卡显示空白内容

> ID：10493968
> 
> 赞同：1
> 
> 时间：2012-05-08T06:51:30.033
> 
> 标签：facebook, tabs, facebook-page

我正在尝试向我的粉丝页面添加一个标签。
我已经这样做了数百次，一切都很好，但这次我得到了一个空白标签。我在应用程序设置中添加了页面标签 URL 和安全页面标签 URL，我可以直接访问页面，但是当我尝试通过标签访问时，它是空白的。我的 ssl 证书没问题。

[链接到我的标签](https://www.facebook.com/pages/Gisheft2/161692587243570?sk=app_404902092873645)

# php - 多维数组挑战

> ID：10493969
> 
> 赞同：0
> 
> 时间：2012-05-08T06:51:30.427
> 
> 标签：php, arrays, multidimensional-array

我试图通过内部值的非标准排序来对数组进行排序，但是当其他值相等时，保留它们的顺序。所以我这样做：

```
$articles[0]['name']='Article 1';
$articles[0]['grouping']='';

$articles[1]['name']='Article 2';
$articles[1]['grouping']='Item group';

$articles[2]['name']='Article 3';
$articles[2]['grouping']='';

$articles[3]['name']='Article 4';
$articles[3]['grouping']='Item group';

$articles[4]['name']='Article 5';
$articles[4]['grouping']='';

function cmpBySort($a, $b) {
    return strcmp($a["grouping"], $b["grouping"]);
}
usort($articles, 'cmpBySort');

foreach ($articles as $article){
    echo $article['name'].' - '.$article['grouping'].'<br>';
} 
```

哪种喜欢这样：

```
Article 5 - 
Article 1 - 
Article 3 - 
Article 2 - Item group
Article 4 - Item group 
```

但我想实现第 2 条 - 项目组 第 4 条 - 项目组 第 1 条 - 第 3 条 - 第 5 条 -

注意到我想要最后的空白，当等价时，然后按文章名称排序（所以 1,3,5 而不是 5,1,3）

希望有人是可以帮助解决这个问题的数组专家！谢谢！斯科特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:58:38.670

尝试：

```
 function cmpBySort($a, $b) {
        if (strcmp($a["grouping"], $b["grouping"]) == 0) {
            return strcmp($a["name"], $b["name"]);
        }
        return -strcmp($a["grouping"], $b["grouping"]);
    } 
```

# android - ViewSwitcher 在视图之间切换

> ID：10493970
> 
> 赞同：0
> 
> 时间：2012-05-08T06:51:30.560
> 
> 标签：android

谁能帮我获得三个视图的动态分页？我有一种情况，我想使用寻呼机，但可能要显示数百张图像，并且需要保存在内存中。

但是我希望能够无限滚动多个页面。换句话说，当在第一页时，可以翻到最后一页。此外，当在最后一页时，能够翻到第一页旁边。然后我有一种情况，我不知道我想翻阅多少页。我应该动态生成页数并能够翻阅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:42:57.793

我认为android没有任何内置视图。但是在网上搜索给了我两种方法，一种是 RealViewSwitcher，稍微调整一下你就可以使用它

[http://marcreichelt.blogspot.in/2010/09/android-use-realviewswitcher-to-switch.html?showComment=1337585123909#c5836636640938589250](http://marcreichelt.blogspot.in/2010/09/android-use-realviewswitcher-to-switch.html?showComment=1337585123909#c5836636640938589250)

接下来是infinitepageviewer

[更改 ViewPager 以启用无限页面滚动](https://stackoverflow.com/questions/7766630/changing-viewpager-to-enable-infinite-page-scrolling)

如果你做了这个，请告诉我我正在为我的应用程序编写类似的东西。

我尝试了这两种方法，我面临的唯一问题是动态创建视图，已经说过应该有一些方法可以使用这些我直到尝试它们。

# javascript - 更改js弹出名称

> ID：10493976
> 
> 赞同：0
> 
> 时间：2012-05-08T06:52:06.203
> 
> 标签：javascript, html, popup

我做了一个 js 弹出窗口，它弹出后需要给一个名字，这是我的代码，第二个参数我分配了空白，所以我需要在这个弹出窗口启动后设置第二个参数

```
pp=window.open('demo/player.php','','width=200,height=100'); 
```

在为第二个参数打开类似“firstpp”之类的内容后，我需要将弹出窗口名称更改为“firstpp”，如下所示，**我可以给 pp.name ... 或类似的东西**

```
pp=window.open('demo/player.php','firstpp ','width=200,height=100'); 
```

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T06:54:37.723

目前尚未对此进行测试，但只要弹出窗口与主窗口位于同一域中，您就应该能够使用以下内容：

```
var pp = window.open('demo/player.php','','width=200,height=100');

// some time later:
pp.name = 'firstpp'; 
```

# python - Python API 包装器设计模式

> ID：10493978
> 
> 赞同：1
> 
> 时间：2012-05-08T06:52:33.110
> 
> 标签：python, api, class, design-patterns

我正在尝试构建一个为 API 构建 XML 响应的库。为了帮助说明我的问题，这里有 2 个示例 API 响应。第一个用于显示菜单，第二个用于显示文本。

```
<CiscoIPPhoneMenu>
  <Title>Title text goes here</Title>
  <Prompt>Prompt text goes here</Prompt>
  <MenuItem>
   <Name>The name of each menu item</Name>
   <URL>The URL associated with the menu item</URL>
  </MenuItem>
  <SoftKeyItem>
   <Name>Name of soft key</Name>
   <URL>URL or URI of soft key</URL>
   <Position>Position information of the soft key</Position>
  </SoftKeyItem>
</CiscoIPPhoneMenu> 
```

...

```
<CiscoIPPhoneText>
  <Title>Title text goes here</Title>
  <Prompt>The prompt text goes here</Prompt>
  <Text>The text to be displayed as the message body goes here</Text>
  <SoftKeyItem>
   <Name>Name of soft key</Name>
   <URL>URL or URI of soft key</URL>
   <Position>Position information of the soft key</Position>
  <SoftKeyItem>
</CiscoIPPhoneText> 
```

好的，所以我的模块大纲如下所示：

```
class CiscoIPPhone(object): 
    def __init__(self, title=None, prompt=None):
        self.title = title
        self.prompt = prompt

class MenuItem(object):
    def __init__(self, name, url):
        self.name = name
        self.url = url

class CiscoIPPhoneMenu(CiscoIPPhone):
    def __init__(self, *args, **kwargs):
        super(CiscoIPPhoneMenu, self).__init__(*args, **kwargs)
        self.items = []

    def add_menu(self, name, url):
        self.items.append(MenuItem(name, url)) 
```

*注意：为了可读性，我删除了这些类处理的验证和清理。*

所以我的问题是：

1.  我*实际上*是在输出这些对象的序列化表示，这样做是否被认为是错误的或不好的做法？
2.  是否有描述这种 API 接口类的设计模式？
3.  是否有一个编写优雅的 Python 库（Pythonic）可以做类似的事情？（我想像 Django 模型序列化或 Django-Tastypie 的精简版）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:54:54.237

*最不幸的是，我无法评论 Python 方面的事情。*

个人觉得这样的设计是可以接受的。

这些消息在一个地方被序列化和反序列化*。*使用这些类的域代码创建一个，用必要的数据填充它，并将它（或其序列化表示）传递给另一个组件。当实际序列化发生时，类本身会检查是否所有强制数据都已设置。

这些类是*测试友好的*。您只需创建一条消息、填写一些值并检查 XML 序列化版本。测试模式检查期望和实际输出。这些测试是整个协议的*规范。*

该设计适用于一个不错的*流畅 API*：

```
new CiscoIPPhoneMenu()
    .withTitle("Title text goes here")
    .withPrompt("Prompt text goes here")
    ... 
```

出于参考目的，Martin Reddy 在[C++ 的 API 设计中](http://www.apibook.com/blog/contents)指出，对于协议或文件格式，有一个组件可以转换为序列化表示或从序列化表示转换。我认为这正是这些课程的目的。

如果序列化表示发生变化（例如，从 XML 格式变为二进制格式），您可以通过例如提供第二个接受格式的 ctor 轻松切换表示，或者您预计会发生变化并引入`SerializationFormat`枚举。

我可以很容易地想象一个 python 模块，它采用 XML 模式 ComplexType 并从中生成匹配的 python 类。一旦我尝试使用 Altova XML Spy 在 C# 中生成这些类；*然而，这*涉及到引用一个运行时 DLL，并且为此使用另一个 DLL 似乎开销太大。这本质上是[protobuf](http://code.google.com/p/protobuf/)的工作方式，XML 模式 ComplexType 在外部 DSL 中定义，序列化格式为二进制格式。

# java - 如何从 Java 中的超类或后代类调用签入 junit 方法？

> ID：10493979
> 
> 赞同：1
> 
> 时间：2012-05-08T06:52:40.000
> 
> 标签：java, class, inheritance, methods, junit

代码：

```
 ClassBase {
    protected method1() {

     protected methodA (par1, par2){

     ... } }

  };
 ClassA  extends ClassBase {
   @Override
     protected methodA (par1, par2){
       .....
       };   
  }; 
```

后：

```
ClassA testClass=new ClassA();
 testClass.methodA(); 
```

是否可以测试（可能是junit）在运行方法methodA时，是否调用了后代classA的methodA？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:47:25.637

没有什么可以测试的。如果您有一个 ClassA 对象（您可以轻松地对其进行测试）并且您在其上调用 methodA，您可以确定调用了 ClassA 的覆盖方法。这是Java语言的保证。如果您将 ClassA 对象强制转换为它的超类，它甚至可以保证。

如果您想对此进行测试，您可以使用覆盖注释来确保您确实覆盖了 ClassA 中的方法。或者你可以测试具体的结果。您的覆盖方法可能正在执行与覆盖方法不同的操作（如果两种方法都针对同一事物，则覆盖它是没有意义的）。测试这种差异。

# c# - DirectX 实时纹理

> ID：10493980
> 
> 赞同：2
> 
> 时间：2012-05-08T06:52:41.140
> 
> 标签：c#, directx, direct3d, screen-capture

我正在使用 C# 和托管 Direct3D 来创建一个正方形。这个正方形的纹理是我的桌面（屏幕截图）。我使用 Direct3D 截取屏幕截图（需要 70 毫秒），然后我重新制作纹理以显示在正方形上（需要 1000 毫秒）。

如何在 Direct3D 中立即创建纹理以获得实时视图？Bellow 是我目前创建要使用的纹理的方式。

```
using (Bitmap bmp = new Bitmap(bounds.Width, bounds.Height, System.Drawing.Imaging.PixelFormat.Format32bppArgb))
{
    bitmapData = bmp.LockBits(bounds, ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);
    Marshal.Copy(screenData, 0, bitmapData.Scan0, screenData.Length);
    bmp.UnlockBits(bitmapData);

    texture = Texture.FromBitmap(d3dDevice, bmp, 0, Pool.SystemMemory);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T00:21:47.803

你的代码很好。你需要一个mipmap吗？如果您采用默认格式，Dx 将生成一个 mipmap，这将增加生成纹理的时间以及将其推送到 GPU 的时间，因为它会更大。

出于好奇，screenData 的类型是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T09:48:58.913

通过 Map/Unmap 更新纹理内容应该更快。

我将在这里为 C++ 描述它，但它在 C# 中应该非常相似：

您必须以 CPU 可访问的方式创建纹理：

```
d3dTextureDescription.Usage          = D3D11_USAGE_DYNAMIC;
d3dTextureDescription.BindFlags  = D3D11_BIND_SHADER_RESOURCE;
d3dTextureDescription.CPUAccessFlags = D3D11_CPU_ACCESS_WRITE; 
```

之后，您可以使用`Map`设备上下文的功能来访问纹理：

```
D3D11_MAPPED_SUBRESOURCE MappedResource;
HRESULT hr = rendererD3D->getImmediateContextD3D()->Map(
        m_pTexture2D,
        mipMapLevel, //0,
        D3D11_MAP_WRITE_DISCARD,
        0,
        &MappedResource);

ASSERTEx(hr == S_OK, "Map failed.");

*data = MappedResource.pData; 
```

在下一步中，数据指针可用于修改纹理内容。如果你完成了电话`Unmap`

# java - 不同操作系统的不同结果

> ID：10493981
> 
> 赞同：0
> 
> 时间：2012-05-08T06:52:50.217
> 
> 标签：java, client-server

我已经编写了一个服务器和一个客户端`Java`，它在我自己的笔记本电脑上运行良好，这是一个 Windows vista 商业版，但是当我在其他版本的 Windows 中运行它时，比如 XP（我什至没有改变平台）我得到了不同程序的数学部分中完全相同的程序的结果。有什么问题，如何以最简单的方式解决？

如果我在 Windows XP 中运行，结果会是这样，`-6.2579985891243E-310`但如果在 Windows vista 商业版中，结果会是这样的一半，我不确定在 windows vista 上的确切结果，因为我现在无法访问它来运行程序并得到反对它的结果。

结果是通过运行一个正态分布库来计算一些值的正态密度，然后用一些其他值减去它（所有值都在 中`double`）。我使用的图书馆是[这个](http://www.iro.umontreal.ca/~simardr/ssjlab/doc/html/umontreal/iro/lecuyer/probdist/NormalDist.html)

两个操作系统的架构都是 32 位的，并且都使用 jdk 1.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:36:14.860

这种影响可能是由于浮点舍入行为的非常小的差异。这可能是由于处理器的差异、编译器的不同指令顺序优化、数学库实现中的错误等造成的。

您不太可能解决上述所有问题（即使专家也很难做到正确！） - 所以我建议您以不依赖于确切浮点行为的方式编写代码。

例如，您应该检查两个数字是否在一个小范围内（例如 1*e-10），而不是对浮点数进行相等测试

# actionscript-3 - AS3 新手，无法让玩家正确移动

> ID：10493982
> 
> 赞同：-1
> 
> 时间：2012-05-08T06:52:52.917
> 
> 标签：actionscript-3, game-physics

正如标题所说，我是 AS3/Flash 的新手，正在努力学习如何制作游戏。我一直在关注 Gary Rosenzweig 的“Flash Game University”（本书和 iTunes 播客）的教程。作为免责声明，我使用的所有代码都来自上述教程，我没有创建它们。我只是将它们拼接在一起以尝试使某些东西以不同的方式工作。

在发布代码之前，让我简要解释一下我的问题以及我为解决它而尝试做的事情。基本上，当我完全使用教程代码（它使用“catcher.x = mouseX”进行移动）时，我让游戏运行良好，但我想尝试让玩家（“catcher”）左右移动箭头键代替鼠标。然而，当我把它放进去时，运动变得不稳定，而不是平滑地左右移动，玩家左右跳跃，不断加快速度，直到它直接跳出屏幕。不用说，我不知道为什么会这样。

起初，我认为基于箭头的移动的代码是错误的，所以我将它复制并粘贴到一个单独的文件中进行测试，它运行良好，所以我认为出于某种原因，使游戏其余部分工作的代码是以某种方式打破它。

我尝试将代码移动到不同的地方，但这并没有解决问题（事实上，它经常使问题变得更糟）。

我想我在格式化我的代码方面遗漏了一些东西（不幸的是，我发现的教程都没有涵盖 AS3 的正确样式，而且我之前没有任何编码经验，所以我的代码可能是令人作呕的混乱/无组织）。

作为最后一点，我提前为我的代码的混乱道歉我对此很陌生，只是想弄清楚事情。

非常感谢任何帮助，感谢您花时间阅读本文！

```
package {
    import flash.display.*;
    import flash.events.*;
    import flash.utils.Timer;
    import flash.utils.getDefinitionByName;

    public class CatchingGame1 extends MovieClip {
        var catcher:Catcher;
        var nextObject:Timer;
        var objects:Array = new Array;
        const speed:Number = 7.0;
        var score:int = 0;
        var leftArrow:Boolean = false;
        var rightArrow:Boolean = false;

        public function CatchingGame1() {
            catcher = new Catcher();
            catcher.y = 350;
            addChild(catcher);
            setNextObject();
            addEventListener(Event.ENTER_FRAME,moveObjects);

        }

        public function setNextObject() {
            nextObject = new Timer(Math.random()*1000,1);
            nextObject.addEventListener(TimerEvent.TIMER_COMPLETE,newObject);
            nextObject.start();
        }

        public function newObject(e:Event) {
            var goodObjects:Array = ["Circle1","Circle2"];
            var badObjects:Array = ["Square1","Square2"];
            if(Math.random() < .5) {
                var r:int = Math.floor(Math.random()*goodObjects.length);
                var classRef:Class = getDefinitionByName(goodObjects[r]) as Class;
                var newObject:MovieClip = new classRef();
                newObject.typestr = "good";
            } else {
                r = Math.floor(Math.random()*badObjects.length);
                classRef = getDefinitionByName(badObjects[r]) as Class;
                newObject = new classRef();
                newObject.typestr = "bad";
            }
            newObject.x = Math.random()*500;
            addChild(newObject);
            objects.push(newObject);
            setNextObject();
        }

        public function moveObjects(e:Event) {
            for(var i:int=objects.length-1; i>=0;i--) {
                objects[i].y += speed;
                if(objects[i].y > 400) {
                    removeChild(objects[i]);
                    objects.splice(i,1);
                }
                if(objects[i].hitTestObject(catcher)) {
                    if(objects[i].typestr == "good") {
                        score += 5;
                    } else {
                        score -= 1;
                    }
                    if(score < 0) score = 0;
                    scoreDisplay.text = "Score: " + score;
                    removeChild(objects[i]);
                    objects.splice(i,1);

                }
            }
            //this is where it starts to have problems

            //make arrow booleans true
        stage.addEventListener(KeyboardEvent.KEY_DOWN, keyPressedDown);
        stage.addEventListener(KeyboardEvent.KEY_UP, keyPressedUp);
        stage.addEventListener(Event.ENTER_FRAME, moveCatcher);
            function keyPressedDown(Event:KeyboardEvent){
                if (Event.keyCode == 37){
                    leftArrow = true;
                } else if (Event.keyCode == 39){
                    rightArrow = true;
                }

            }

            function keyPressedUp(event:KeyboardEvent) {
                if(event.keyCode == 37){
                    leftArrow = false;
                } else if(event.keyCode == 39){
                    rightArrow = false;
                }
            }
                function moveCatcher(event:Event) {
                    var catcherSpeed:Number = 1;
                    if(leftArrow){
                        catcher.x -= catcherSpeed;
                    } 
                    if(rightArrow){
                        catcher.x += catcherSpeed;
                    }
                }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:28:53.600

将添加的 keyUp、keyDown 事件处理程序移动到您的构造函数中。

不要使用多个 ENTER_FRAME 事件处理程序，只需在 moveObjects 函数中调用 moveCatcher 即可。

您的 moveObjects 方法末尾似乎缺少 }，我对其进行了编辑。看看是否有帮助。

```
package {
import flash.display.*;
import flash.events.*;
import flash.utils.Timer;
import flash.utils.getDefinitionByName;

public class CatchingGame1 extends MovieClip {
    var catcher:Catcher;
    var nextObject:Timer;
    var objects:Array = new Array;
    const speed:Number = 7.0;
    var score:int = 0;
    var leftArrow:Boolean = false;
    var rightArrow:Boolean = false;

    public function CatchingGame1() {
        catcher = new Catcher();
        catcher.y = 350;
        addChild(catcher);
        setNextObject();

        stage.addEventListener(KeyboardEvent.KEY_DOWN, keyPressedDown);
        stage.addEventListener(KeyboardEvent.KEY_UP, keyPressedUp);

        addEventListener(Event.ENTER_FRAME,moveObjects);

    }

    public function setNextObject() {
        nextObject = new Timer(Math.random()*1000,1);
        nextObject.addEventListener(TimerEvent.TIMER_COMPLETE,newObject);
        nextObject.start();
    }

    public function newObject(e:Event) {
        var goodObjects:Array = ["Circle1","Circle2"];
        var badObjects:Array = ["Square1","Square2"];
        if(Math.random() < .5) {
            var r:int = Math.floor(Math.random()*goodObjects.length);
            var classRef:Class = getDefinitionByName(goodObjects[r]) as Class;
            var newObject:MovieClip = new classRef();
            newObject.typestr = "good";
        } else {
            r = Math.floor(Math.random()*badObjects.length);
            classRef = getDefinitionByName(badObjects[r]) as Class;
            newObject = new classRef();
            newObject.typestr = "bad";
        }
        newObject.x = Math.random()*500;
        addChild(newObject);
        objects.push(newObject);
        setNextObject();
    }

    public function moveObjects(e:Event) 
    {
        moveCatcher(null);
        for(var i:int=objects.length-1; i>=0;i--)  
        {
            objects[i].y += speed;
            if(objects[i].y > 400)
            {
                removeChild(objects[i]);
                objects.splice(i,1);
            }
            if(objects[i].hitTestObject(catcher)) 
            {
                if(objects[i].typestr == "good") 
                {
                    score += 5;
                } else {
                    score -= 1;
                }
                if(score < 0) score = 0;
                scoreDisplay.text = "Score: " + score;
                removeChild(objects[i]);
                objects.splice(i,1);

            }
        }
    }

        function keyPressedDown(Event:KeyboardEvent){
            if (Event.keyCode == 37){
                leftArrow = true;
            } else if (Event.keyCode == 39){
                rightArrow = true;
            }

        }

        function keyPressedUp(event:KeyboardEvent) {
            if(event.keyCode == 37){
                leftArrow = false;
            } else if(event.keyCode == 39){
                rightArrow = false;
            }
        }
            function moveCatcher(event:Event) {
                var catcherSpeed:Number = 1;
                if(leftArrow){
                    catcher.x -= catcherSpeed;
                } 
                if(rightArrow){
                    catcher.x += catcherSpeed;
                }
            }

    }

}
} 
```

# objective-c - 顺时针旋转 UIImageView

> ID：10493983
> 
> 赞同：10
> 
> 时间：2012-05-08T06:52:59.250
> 
> 标签：objective-c, ios, core-graphics, transform, cgaffinetransform

这应该很简单，但我无法旋转`UIImageView`一个完整的 360 度，永远重复。

```
[UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionRepeat | UIViewAnimationOptionCurveLinear | UIViewAnimationOptionBeginFromCurrentState animations:^{
    self.reloadButton.imageView.transform = CGAffineTransformRotate(self.reloadButton.imageView.transform, -M_PI);
} completion:^(BOOL finished) {

}]; 
```

根据文档，我传递的角度的符号`CGAffineTransformRotate`决定了旋转的方向，但上面的代码逆时针旋转。与 相同`M_PI`。

> 该矩阵旋转坐标系轴的角度（以弧度为单位）。在 iOS 中，正值指定逆时针旋转，负值指定顺时针旋转。在 Mac OS X 中，正值指定顺时针旋转，负值指定逆时针旋转。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T18:12:06.533

Christoph 已经走上了正确的道路，但是有一种更好的方法可以让它保持旋转，而无需在每次结束时在动画代理中重新调用它。这是完全错误的。

只需将动画的 repeatCount 属性设置为`HUGE_VALF`.

```
CABasicAnimation* animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
animation.fromValue = @0.0f;
animation.toValue = @(2*M_PI);
animation.duration = 0.5f;             // this might be too fast
animation.repeatCount = HUGE_VALF;     // HUGE_VALF is defined in math.h so import it
[self.reloadButton.imageView.layer addAnimation:animation forKey:@"rotation"]; 
```

As stated [in the documentation](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CAMediaTiming_protocol/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004511-CH1-SW5), this will cause the animation to repeat forever.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:54:58.800

抱歉错过了第一部分，视图使用较小的角度旋转得很好：

```
[UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionRepeat | UIViewAnimationOptionCurveLinear | UIViewAnimationOptionBeginFromCurrentState animations:^{
        redView.transform = CGAffineTransformRotate(redView.transform, M_PI_2);
    } completion:^(BOOL finished) {

    }]; 
```

我找不到任何有意义的解释为什么它会因 M_PI 而失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:50:13.513

不久前我遇到了同样的问题。我不记得这个问题的原因，但这是我的解决方案：

```
/**
 * Incrementally rotated the arrow view by a given angle.
 *
 * @param degrees Angle in degrees.
 * @param duration Duration of the rotation animation.
 */
- (void)rotateArrowViewByAngle:(CGFloat)degrees
                  withDuration:(NSTimeInterval)duration {

    CABasicAnimation *spinAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    spinAnimation.fromValue = [NSNumber numberWithFloat:self.currentAngle / 180.0 * M_PI];
    spinAnimation.toValue = [NSNumber numberWithFloat:degrees / 180.0 * M_PI];
    spinAnimation.duration = duration;
    spinAnimation.cumulative = YES;
    spinAnimation.additive = YES;
    spinAnimation.removedOnCompletion = NO;
    spinAnimation.delegate = self;
    spinAnimation.fillMode = kCAFillModeForwards;

    [self.arrowView.layer addAnimation:spinAnimation forKey:@"spinAnimation"];

    self.currentAngle = degrees;
} 
```

然后你可以使用委托方法

```
- (void)animationDidStart:(CAAnimation *)theAnimation
- (void)animationDidStop:(CAAnimation *)theAnimation finished:(BOOL)flag 
```

旋转保持旋转。此外，程度和持续时间参数可能是非常高的数字......如果这足够了。

更新：
正如银口所说，

```
spinAnimation.repeatCount = HUGE_VALF;     // HUGE_VALF is defined in math.h so import it 
```

比在委托中重新启动动画要好得多。

请注意：
self.currentAngle 是一个记住当前最终旋转的属性。
我需要它来使视图左右旋转。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-27T21:04:52.530

I wrote UIImageView category for this: [https://gist.github.com/alexhajdu/5658543](https://gist.github.com/alexhajdu/5658543).

Just use:

```
[_myImageView rotate360WithDuration:1.0 repeatCount:0]; //0 for infinite loop 
```

# sql - Google Cloud SQL 是否支持分布式功能？

> ID：10493988
> 
> 赞同：1
> 
> 时间：2012-05-08T06:53:16.330
> 
> 标签：sql, cloud, distributed

我正在阅读 Google Cloud SQL 的文档。但我不确定它是否支持某些分布式功能？

1.  mysql主从集群

2.  mysql分片

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:46:06.270

谷歌云 SQL 的 App Engine 服务的美妙之处在于谷歌从你那里抽象了高可用性责任。在幕后，谷歌正在做你要求你做的事情。

# java - 什么时候调用java main 方法？

> ID：10493990
> 
> 赞同：6
> 
> 时间：2012-05-08T06:53:23.400
> 
> 标签：java, main

1.  我有一个类 (1) 有一些构造函数（arg 和没有 args）。在另一个 class(2) 中，使用 new constructor() 创建了 Class 1 的对象。那么在这种情况下会调用 main 方法吗？

2.  理想情况下，什么时候在任何类中调用 main 方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T06:59:26.797

任何类都可以有一个 main 方法。例如，您的 Class(1) 和 Class(2) 类都可以有一个 main 方法，但在程序运行时只会调用一次。

例如，当您运行程序时，java class1 - 您告诉 Java 您希望使用 Class(1) 的 main 方法启动程序。这可能会令人困惑，因为您认为 Java 会执行它找到的每一个主要方法，但事实并非如此。一旦 Java 在您指定的类中找到并运行了 main 方法，它将忽略所有将来可能找到的 main() 方法，因为它已经为您的程序执行了 main 方法。

您可以将 main() 视为通向程序的门，一旦进入，计算机就不会再次尝试进入，它已经在程序中！我希望这对你有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T06:54:56.397

`main`是一个静态方法，程序的入口点，并且在程序启动时被调用**一次**（除非你显式调用它），而不是为每个对象初始化。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-08T06:56:33.477

该`main`方法仅在两种情况下调用：

1.  由 Java 虚拟机启动应用程序
2.  通过另一个方法（可能在另一个类中）调用该`main`方法，虽然这是正确的 Java，但它不是最佳实践

`main`不会在类的实例化时自动调用 - 作为静态方法，它的封闭类甚至不需要实例化即可调用。

另一方面，构造方法在创建类时*被调用。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T06:55:34.017

当你运行你的class2（应该包含`main`方法）时，`main`方法将被调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T06:56:22.963

您的`main`方法将被不在您的程序中的东西调用，并且将被调用一次以启动您的程序。在[这里](http://csis.pace.edu/~bergin/KarelJava2ed/ch2/javamain.html)查看更多信息。至于你应该把它放在哪里，它的位置并没有真正的限制。

# ruby-on-rails - 循环直到不同端口上的任何服务器在 ruby on rails 应用程序中给出准确的响应

> ID：10493991
> 
> 赞同：0
> 
> 时间：2012-05-08T06:53:23.993
> 
> 标签：ruby-on-rails, web-applications, exception-handling

我在我的应用程序旁边运行了 3 台服务器，我正在向它们发送 RESTful 请求，但我希望有一个循环尝试这三个服务器之一，直到它得到准确的响应。在我的执行中，当它从第一个服务器程序获得错误响应时会引发“BadRespondError”，我无法在我的代码中拯救它，因为执行会转到“actionpack”gem 中的rescue.rb。我怎么能解决这个问题？我可以在不处理异常和错误的情况下仅通过一个简单的循环来解决它吗？或者如果不可能，我怎么能在我的代码中拯救 BadRespondError 而不是 rescue.rb

这是我的代码请求....

```
@response = carrot.dcs_request(uri, {
       "dcs.source" => "etools",
       "query" => @query,
       "dcs.output.format" => "JSON",
       "dcs.clusters.only" => "false"
      })
@json = @response
@response = JSON.parse(@response) 
```

……

请求函数

```
def dcs_request(uri, data)

    boundary = Array::new(16) { "%2.2d" % rand(99) }.join()
    extheader = {
      "content-type" => "multipart/form-data; boundary=___#{ boundary }___"
    }
    client = HTTPClient.new
    response = client.post_content(uri, data, extheader)
  end 
```

所以把 uri 想象成一个数组，我想循环它，直到我得到其中一个的准确响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:39:54.283

您可以尝试带有特定错误 (BadResponseError) 的 begin..rescue 子句，例如，

```
 begin

 rescue Net::IMAP::BadResponseError, Net::IMAP::NoResponseError => e

 end 
```

应用程序代码中的救援子句不应该在 Rails 将错误引发到 ActionPack 的错误处理之前运行吗？（也许我没有正确理解这个问题）

[在 Ruby 中开始、拯救和确保？](https://stackoverflow.com/questions/2191632/begin-rescue-and-ensure-in-ruby)

# iphone - 当 TabBarController 来查看时如何设置 UITabBarController 不选择任何选项卡（ViewController）

> ID：10493995
> 
> 赞同：0
> 
> 时间：2012-05-08T06:53:41.187
> 
> 标签：iphone, ios, ios4, uitabbarcontroller, xcode4.2

我遇到了这个问题

我需要从带有两个选项卡的**导航控制器**（tableView DidSelectRow .....）打开一个**TabBarController ，因为当****TabBarController**变为活动状态时，它选择了一个选项卡，无论是隐式还是显式

 ****```
 [_tabBarController setSelectedIndex:0] 
```

但是希望当 TabBarController 变为活动状态时，不会选择任何选项卡，而是视图包含底部带有选项卡的背景图像。该选项卡仅在选项卡被选中时才被选中并激活。

有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:59:05.030

如果没有选择任何选项卡栏项目，请制作一个要显示的 UIViewController。制作：

```
MyNoSelectedViewController *myViewController = [[MyNoSelectedViewController alloc] initWithNibName:@"MyNoSelectedViewController" bundle:[NSBundle mainBundle]];
[self.tabBarController setSelectedViewController:nil];
[self.tabBarController setSelectedViewController:myViewController]; 
```

希望能帮助到你。****