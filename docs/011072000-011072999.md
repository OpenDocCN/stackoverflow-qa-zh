# StackOverflow 问答 11072000-11072999

# jquery - jQuery e.stopPropagation() - 如何在不完全破坏 Dropbox 功能的情况下使用？

> ID：11072002
> 
> 赞同：2
> 
> 时间：2012-06-17T14:22:51.370
> 
> 标签：jquery, drop-down-menu, twitter-bootstrap

**短篇小说：** stopPropagation() 防止下拉菜单关闭 - 这很好。但它也阻止了保管箱下次打开 - 这很糟糕。

**长话短说：** 我正在使用 Twitter-Bootstrap，并且在下拉菜单中放置了一个搜索框，如下所示：

```
<div id="search_word_menu" style="position:absolute;right:157px;top:60px;"> 
        <ul class="nav nav-pills">
            <li class="dropdown" id="menu200">
                <a class="dropdown-toggle btn-inverse" data-toggle="dropdown" style="width:117px;position:relative;left:2px" href="#menu200">
                <i class="icon-th-list icon-white"></i>
                    Testing
                    <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="#">Retweets</a></li>
                    <li><a href="#">Favourites</a></li>
                    <li class="divider"></li>
                    <li><a href="#">A list</a></li>
                    <li class="divider"></li>
                    <li><a href="#">A saved search</a></li>
                    <li><a href="#">A saved #hashtag</a></li>
                    <li class="divider"></li>
                    <li>
<!--   HERE -->     <input id="drop_search" type="text" class="search_box_in_menu" value="Search...">

                    </li>
                </ul>
            </li>
        </ul> 
```

当我在搜索框内单击时，默认行为显然是关闭下拉列表 - 但这使得在搜索词中写入相当困难。所以我尝试了 e.stopPropagation()，它确实阻止了下拉菜单关闭。然后，当我在搜索框中按 Enter 键时，我将使用 .toggle() 关闭下拉菜单 - 似乎也可以正常工作。

当我想再次解决所有问题时，问题就出现了，因为 e.stopPropagation() 现在已经一起禁用了下拉菜单 - 即。当我按下下拉菜单时，它不再打开了！这是因为 stopPropagation()，毫无疑问 - 但我怎样才能解决这个问题，以便我获得上述功能，但又不会完全破坏其余功能？

下面的jQuery：

```
$(document).ready(function() {
    console.log("document.ready - ");

                //clearing search box on click
    $(".search_box_in_menu").click(function(e) {
        e.stopPropagation(); // works for the specific task
        console.log(".search_box_in_menu - click.");
        if($(this).val() == 'Search...') {
            $(this).val('');
            console.log(".search_box_in_menu - value removed.");

        };
        //return false; //this is e.preventDefault() and e.stopPropagation()

    });

                    // when pressing enter key in search box
    $('.search_box_in_menu').keypress(function(e) {
        var keycode = (e.keyCode ? e.keyCode : e.which);
        if(keycode == '13') {
            console.log(".search_box_in_menu - enter-key pressed.");
            console.log($(this).val());
            $(this).closest('.dropdown-menu').toggle(); //works

        }
    });

    $('.dropdown').click(function() {
        console.log(".dropdown - click.");
        $(this).closest('.dropdown-toggle').toggle(); //does nothing
    }); 
```

将不胜感激一些帮助！我开始怀疑这可能是一个仅限引导的问题，或者至少是由它们的实施引起的——但这超出了我的范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:41:37.933

找到了解决方案：使用`stopPropagation()`, 并关闭带有手动触发器的框。然后，由于某种原因（是`stopPropagation()`重置吗？），它起作用了。

```
//dealing with the dropdown box
$(document).ready(function() {
    console.log("document.ready - ");

    //clearing search box on click and prevent the dropdown from closing
    $(".search_box_in_menu").click(function(e) {
        e.stopPropagation();
        console.log(".search_box_in_menu - click.");
        if($(this).val() == 'Search...') {
            $(this).val('');
            console.log(".search_box_in_menu - value removed.");
        };
        //return false;         

    });

    // when pressing enter key in search box
    $('.search_box_in_menu').keypress(function(e) {
        var keycode = (e.keyCode ? e.keyCode : e.which);
        if(keycode == '13') {
            console.log(".search_box_in_menu - enter-key pressed.");
            console.log($(this).val());
            $(this).closest('.dropdown').trigger('click');
        }
    });

    //resetting a dirty search box
    $('.dropdown').click(function() {
        if ($(this).closest('.search_box_in_menu').val() == 'Search...') {
            console.log(".search_box_in_menu - clean searchbox.");
        }
        console.log(".dropdown - click.");
    });     
}); 
```

# php - PHP 如何检测会话超时？

> ID：11072003
> 
> 赞同：7
> 
> 时间：2012-06-17T14:23:00.207
> 
> 标签：php, session

我想知道 PHP 如何检测到特定会话已超时。

详细说明：我正在使用默认的（基于文件的）会话处理程序，具有默认的会话生命周期等。php.ini 中的所有内容都是默认设置。

如果现在开始会话，PHP 会检查（取决于非 session.gc_divisor 和 session.gc_probability）是否有任何超时会话。但是从哪里获取 PHP 的最后一个会话访问时间来检查会话呢？

会话文件本身仅包含工作负载，例如`x|i:1;`a `$_SESSION['x'] = 1;`，因此没有关于最后一次会话访问时间的信息。

我认为没有与会话开始时间相关的内存信息，因为在服务器完全重新启动后会话仍在工作。

那么，PHP 是从哪里获取信息的呢？它是在比较会话文件的 mtime/ctime 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T14:30:09.723

PHP 的默认会话处理程序使用 将 $_SESSION 数据存储在一个文件中`serialize()`，该文件位于`session.save_path`. 通常文件名看起来像`$filename = 'sess_' . session_id()`.

由于它只是一个文件，PHP 可以使用文件的 mtime（上次修改时间）来确定哪些会话文件是陈旧的。基本上它会抓取所有 mtime 超过该`session.gc_maxlifetime`值的会话文件和`unlink()`它们。正如您所说，清理发生的概率由`session.gc_*`ini 变量控制。

现在，如果您使用 创建自己的会话处理程序`session_set_save_handler()`，这一切都在窗口之外，您现在可以控制会话的存储和清理方式，但这确实解释了默认行为。

# php - How to get rid of whitespace in Smarty {block}s?

> ID：11072004
> 
> 赞同：2
> 
> 时间：2012-06-17T14:23:01.170
> 
> 标签：php, templates, smarty, removing-whitespace

I've run into a problem where defining the value of a `{block}` introduces a lot of unnecessary whitespace.

I've a main template, let's call it `main.html`, which looks like this (simplified):

```
<html>
<title>{block name=title}{$default_title}{/block}</title>
...
</html> 
```

Then I inherit from it in let's say `topics.html`, and I define the title block in it:

```
{extends file="main.html"}

{block title}
{if $topic}
  {if $topic == "all"}
    {eval $Config['titles']['topics']['all']}
  {else}
    {eval $Config['titles']['topics']['particular']}
  {/if}
{else}
  {eval $Config['titles']['topics']['list']}
{/if}
{/block} 
```

Now when I compile the `topics.html` template, there is so much whitespace inside of `<title>...</title>` tag.

For example, it looks like this:

```
<title>
    Showing all wiki topics  </title> 
```

How could I trim/strip the whitespace from the result of evaluating a block so it looked like the following:?

```
<title>Showing all wiki topics</title> 
```

I tried adding `{strip}...{/strip}` around the `{block title}...{/block}` like this:

```
{strip}
{block title}
...
{/block}
{/strip} 
```

But that didn't change anything.

I also tried this:

```
{block title|strip}
...
{/block} 
```

But that was a syntax error. I also tried this:

```
{block title|trim}
...
{/block} 
```

But it also was a syntax error.

I also tried:

```
{block title}
{strip}
...
{/strip}
{/block} 
```

But that didn't help either as I already introduced a new-line after `{block title}`so it stays there in the compiled template.

Any help appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:43:04.737

从 Smarty 3.1 开始，您不能将`{block}`s 包装在其他构造中。（这可能会随着 Smarty 3.2 改变）你有没有试过把`{strip}`标签放在里面`{block}s`？否则在这里看看[我的回答](https://stackoverflow.com/a/9207456/515124)

# php - GET 变量的 PHP 值为 0？

> ID：11072006
> 
> 赞同：1
> 
> 时间：2012-06-17T14:23:22.157
> 
> 标签：php, url, null, get

我在创建简单的 PHP 脚本时遇到问题。该`$_GET["give"]`变量在 PHP 中始终为 0，但我确实在 URL 中定义了它。如果未定义，我的脚本将重定向。

```
 if (isset($_GET["give"])&&$_GET["give"]!="") {
        echo "give GET detected<br />";
        $user = $_GET["give"];
        echo $_GET["give"]+$user+"<br />";
    }
    header("Location: /diamonds/"); //this document, but removing arguments. 
```

URL 很好，`/?give=kroltan`它应该回显 kroltan。但相反，我在浏览器中得到了这个：

```
 give GET detected <br>
   0 
```

它甚至不回显`$user`变量，尽管它的值与`$_GET["give"]`. `<br>`之后也没有

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T14:25:12.967

这是PHP。您将字符串与 a`.`而不是 a连接起来`+`。

正如@MarcB 在评论中所说 - 换句话说，您正在对字符串进行数学加法，因此 PHP 正在将您的`kroltan`字符串转换为`0`.

[PHP 中的字符串运算符](http://www.php.net/manual/en/language.operators.string.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:47:03.643

通过使用加号，PHP 认为它正在处理数字，因此将字符串更改为数字。这会产生一个值为 0 的整数。因此，您将始终获得零值。由于字符串的值为零。

如果你想组合字符串，你应该使用点而不是加号。

所以而不是：

```
echo $_GET["give"]+$user+"<br />"; 
```

你应该使用

```
echo $_GET["give"] . $user . "<br />"; 
```

顺便说一句，代码将始终重定向，因为您没有使用 else 语句，为什么还要将 $_GET['give'] 的值分配给 $user 并将它们组合在下一行？这似乎很奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T14:25:40.610

在 PHP 中，`+`运算符用于代数加法，而`.`用于字符串连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T14:25:54.543

您正在使用数字加法 ( `+`) 运算符而不是字符串连接 ( `.`) 之一`$_GET["give"]+$user+"<br />"`。PHP 愉快地将非数字字符串转换为零。

# jquery - 页面加载和悬停时类似尾声的弹出气泡？- jQuery

> ID：11072008
> 
> 赞同：1
> 
> 时间：2012-06-17T14:24:07.320
> 
> 标签：jquery, popup, hover

我在我的网站上使用了类似 Coda 的气泡：http: [//jqueryfordesigners.com/coda-popup-bubbles/](http://jqueryfordesigners.com/coda-popup-bubbles/)

我想知道是否可以在页面加载后直接显示气泡，让它停留几秒钟然后再次隐藏它，同时当你将鼠标悬停在触发器上时仍然能够让它出现？

这是我的代码：

```
$(document).ready(function(){

    $(function() {
    $('.bar').each(function() {
        // options
        var distance = 5;
        var time = 250;
        var hideDelay = 1000;

        var hideDelayTimer = null;

        // tracker
        var beingShown = false;
        var shown = false;

        var trigger = $('.trigger', this);
        var popup = $('.popup', this).css('opacity', 0);

        // set the mouseover and mouseout on both element
        $([trigger.get(0), popup.get(0)]).mouseover(function() {
            // stops the hide event if we move from the trigger to the popup element
            if (hideDelayTimer) clearTimeout(hideDelayTimer);

            // don't trigger the animation again if we're being shown, or already visible
            if (beingShown || shown) {
                return;
            } else {
                beingShown = true;

                // reset position of popup box
                popup.css({
                    top: 410,
                    left: 164,
                    display: 'block' // brings the popup back in to view
                })

                // (we're using chaining on the popup) now animate it's opacity and position
                .animate({
                    top: '-=' + distance + 'px',
                    opacity: 1
                }, time, 'swing', function() {
                    // once the animation is complete, set the tracker variables
                    beingShown = false;
                    shown = true;
                });
            }
        }).mouseout(function() {
            // reset the timer if we get fired again - avoids double animations
            if (hideDelayTimer) clearTimeout(hideDelayTimer);

            // store the timer so that it can be cleared in the mouseover if required
            hideDelayTimer = setTimeout(function() {
                hideDelayTimer = null;
                popup.animate({
                    top: '-=' + distance + 'px',
                    opacity: 0
                }, time, 'swing', function() {
                    // once the animate is complete, set the tracker variables
                    shown = false;
                    // hide the popup entirely after the effect (opacity alone doesn't do the job)
                    popup.css('display', 'none');
                });
            }, hideDelay);
        });
    });
});

}); 
```

我非常感谢您的帮助，如果这非常容易和明显，我深表歉意！我是 jQuery 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-01T10:10:58.933

这将帮助您留下并隐藏弹出窗口。

```
 label.addEventListener("mouseover",function(e)
          {                 
                   if(hideDelayTimer)
                   clearTimeout(hideDelayTimer);
                   label.appendChild(popup);

          });

         label.addEventListener("mouseout",function()
           {
                  hideDelayTimer=setTimeout(function()
                 {
                      label.removeChild(popup);

                 },hideDelay);

           }); 
```

# c# - Entity Framework data modelling best practices

> ID：11072010
> 
> 赞同：2
> 
> 时间：2012-06-17T14:24:30.130
> 
> 标签：c#, .net, entity-framework, entity-framework-4.3

I have Entity structure like below

```
public abstract class Entity
{
    public int Id { get; set; }
}

public class User : Entity
{
    public ICollection<Product> Products { get; set; }
}

public class Warehouse : Entity
{
    public ICollection<Product> Products { get; set; }
}

public class Product : Entity
{
    public Warehouse Warehouse { get; set; }

    public User User { get; set; }
} 
```

As you can see User can has products and Warehouse also can have products. So Entity framework put 2 foreign keys over Product table that can be nullable.

We could also achieve similiar structure by bit of different entity modelling like below

```
 public class User : Entity
 {
    public ICollection<UserProduct> Products { get; set; }
 }

public class Warehouse : Entity
{
    public ICollection<WarehouseProduct> Products { get; set; }
}

public class Product : Entity
{

}

public class WarehouseProduct : Entity
{
    public Product Product { get; set; }
    public Warehouse Warehouse { get; set; }
}

public class UserProduct : Entity
{
    public Product Product { get; set; }
    public User user { get; set; }
} 
```

First Design look simpler without introduce new entitties but not sure that it is better or not.

I am trying to find which is best or which circumtances makes one of it better than other.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:00:57.810

继承也是可能的（EF/CodeFirst）：

```
public abstract class Entity
{
    public int Id { get; set; }
}

public class Product : Entity
{

}

public class Warehouse : Product
{ 
    /* all product fields are available */   
}

public class User : Product
{
    /* all product fields are available */
} 
```

在我看来，这更干燥=>“CodeFirst 视图”。

关于继承的好帖子：http: [//goo.gl/1igQ3](http://goo.gl/1igQ3)

# xml - How to search according to namespaces in Marklogic Server?

> ID：11072012
> 
> 赞同：0
> 
> 时间：2012-06-17T14:24:46.027
> 
> 标签：xml, xquery, marklogic

Suppose I am having some xml documents with one namespace(http://www.marklogic.com) and another set of xml documents with another namespace(http://www.mynamespce.com). Now I want to search in only those xml documents which are having [http://www.marklogic.com](http://www.marklogic.com) namespace. How can I do this ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:21:53.980

您没有说明您是如何搜索的，但如果您正在调用`search:search`，您可以将`searchable-expression`选项设置为文档的根元素，包括名称空间。

```
declare variable $query as xs:string external ;
search:search(
  $query,
  <options xmlns="http://marklogic.com/appservices/search">
    <searchable-expression
     xmlns:ns1="http://test/namespace/1">/ns1:doc</searchable-expression>
  </options>) 
```

[http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/xml/search-dev-guide/search-api.xml%2343671](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/xml/search-dev-guide/search-api.xml%2343671)有更多关于这个选项。

或者你可以`cts:search`直接打电话。可搜索表达式是第一个参数。

```
declare namespace ns1="http://test/namespace/1" ;
declare variable $query as cts:query external ;
cts:search(/ns1:doc, $query) 
```

也可能有其他选择。例如，您可以设置多个字段并使用字段查询进行搜索。

# php - 每个特定的工作日，sql 和 php

> ID：11072017
> 
> 赞同：1
> 
> 时间：2012-06-17T14:25:10.183
> 
> 标签：php, mysql

目前，我得到了这个：

```
SELECT `deals`.*, deals_bookings.date AS 'b_date', deals_bookings.id AS 'book_id' 
FROM `deals_bookings` 
INNER JOIN deals ON (deals.ID = deals_bookings.deal_id) 
INNER JOIN users ON (users.id = deals.partner_id) 
INNER JOIN deals_bookings_times ON (deals_bookings_times.book_id = deals_bookings.id) 
WHERE 1 AND deals_bookings.date = CURDATE() AND users.company_type = 'restaurant' 
```

这抓住了今天预订日期的交易 (CURDATE())。

现在我添加了一个专栏：deals_bookings.everyWeekDay

该列的计划是存储周数 -> 在 1-7 之间，其中 1 是星期一（一周中的第一天），7 是星期日。

是否可以通过纯 mysql 查询来选择所有具有 deal_bookings.date = CURDATE() 或如果 deal_bookings.everyWeekDay = todays week number 的交易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:36:25.960

你想使用 `deals_bookings`. `everyWeekDay`= 工作日（现在（））

但是 WEEKDAY 返回星期一 - 0，星期日 - 6；所以我们必须加 1

结合条件

```
WHERE (`deals_bookings`.`date` = CURDATE() OR `deals_bookings`.`everyWeekDay` = WEEKDAY(NOW()) + 1 )  AND `users`.`company_type` = 'restaurant' 
```

# list - 将嵌套元素添加到“平面”列表

> ID：11072019
> 
> 赞同：1
> 
> 时间：2012-06-17T14:25:23.427
> 
> 标签：list, nested, tcl

我有一个“扁平”的 Tcl 列表。现在我想将一个新元素作为子元素附加到现有元素之一。我怎样才能做到这一点？

这是我尝试过的：

```
[ lindex $flights $i ] [ lindex $flight 0 ] ] 
```

我尝试将列表“航班”中的元素添加到列表“航班”的元素中。航班列表中的元素`$i`已经存在。

`Tcl`因为我是新手，所以我可能会违反语法`Tcl`。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:50:39.137

您可以使用**lset**将列表中的元素替换为新列表。[http://www.tcl.tk/man/tcl8.5/TclCmd/lset.htm](http://www.tcl.tk/man/tcl8.5/TclCmd/lset.htm)新列表的第一个元素将是旧元素，第二个元素将是它的子元素。这是一个例子：

```
% set flights [list a b c d e]
a b c d e
% set i 1
1
% lset flights $i [list b child]
a {b child} c d e
% lindex $flights 1
b child
% lindex [lindex $flights 1] 1
child
% lindex [lindex $flights 1] 0
b 
```

# c# - 填充：SelectCommand.Connection 属性尚未初始化

> ID：11072021
> 
> 赞同：1
> 
> 时间：2012-06-17T14:25:33.073
> 
> 标签：c#, asp.net, sql, sql-server

使用网站一段时间后，加载内容等。此消息显示“填充：SelectCommand.Connection 属性尚未初始化”！我认为这是因为 sql 连接，但不确定......我想知道我能做些什么来防止这种情况发生，每次发生这种情况我都必须上传一个文件（SQL 类，建立连接）和网站再次开始工作。

我的 SQL 连接：

```
public class SQL
{

    SqlCommand comandos;
    public SqlConnection sql()
    {
        string Server = @"server"; 
        string Username = "user"; 
        string Password = "pass"; 
        string Database = "database";
        string ConnectionString = "Data Source=" + Server + ";";
        ConnectionString += "User ID=" + Username + ";";
        ConnectionString += "Password=" + Password + ";";
        ConnectionString += "Initial Catalog=" + Database;

        SqlConnection Connection = new SqlConnection();
        try
        {
            Connection.ConnectionString = ConnectionString;
            Connection.Open();
            return Connection;
        }
        catch (Exception)
        {
            if (Connection != null)
            {
                Connection.Dispose();
        }
        return null;
        }
    }

    public void FazerComando(string comando)
    {
        comandos = new SqlCommand(comando, sql());
        comandos.ExecuteNonQuery();
    }

    public DataTable Execute(string comando)
    {
        SqlDataAdapter SQLDataAdapter = new SqlDataAdapter(comando, sql());
        DataTable dtResult = new DataTable();
        SQLDataAdapter.Fill(dtResult);
        return dtResult;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:31:29.327

这可能与您的问题有关，但无论如何，这是应该解决的问题：当您完成连接时，您并没有处理它们。你应该使用`using`：

```
 public void FazerComando(string comando)
    {
        using (var conn = sql())
        {
            comandos = new SqlCommand(comando, conn);
            comandos.ExecuteNonQuery();
        }
    }
    public DataTable Execute(string comando)
    {
        using (var conn = sql())
        {
            SqlDataAdapter SQLDataAdapter = new SqlDataAdapter(comando, conn);
            DataTable dtResult = new DataTable();
            SQLDataAdapter.Fill(dtResult);
            return dtResult;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:46:51.407

我以前从未采取过这种方法。我们通常只在 web config 中使用连接字符串，特别是 linq，它工作得很好。我建议您查看[http://blogs.msdn.com/b/visualstudio/archive/2012/06/11/world-of-samples-at-your-fingertips.aspx](http://blogs.msdn.com/b/visualstudio/archive/2012/06/11/world-of-samples-at-your-fingertips.aspx)并跟踪。您应该找到推荐的连接最佳实践的一个很好的例子。然后将在您的应用程序的第一次启动时读取连接字符串，并且使用连接池（v imortant）以达到最佳效果。

哦，你没有处理你的连接，当内存使用量变得太大时，这将导致内存泄漏和 iis 清除你的应用程序池 - 所有这些都不好

正如另一位受访者所说，当我在查找 baet prac 链接时...

高温高压

# ios - 实现第三方ios插件解决统一问题

> ID：11072026
> 
> 赞同：1
> 
> 时间：2012-06-17T14:26:37.830
> 
> 标签：ios, plugins, uiview, unity3d

我目前正在尝试在我的统一应用程序中实现一个 ios 插件。该插件是一个简单的插件，它在应用程序中显示另一个视图，显示社交媒体和内容。

我正在以插件方式执行此操作，设置一个按钮，该按钮具有在 c# 代码中调用 extern 的单击方法来调用 Objective-c 代码。

在objective-c代码中，我尝试了几种方法：

第一种方式：

1.  我创建了一个自定义视图控制器，将自身添加到 [[[Application sharedApplication] keyWindow] addSubview:customViewController.view]
2.  并在插件中我将自定义视图控制器设置为代表以捕获插件关闭事件
3.  我调用视图上的插件确实加载了。插件视图显示得很好，我得到了解雇事件。在解雇事件中，我调用了 [self.removeFromSuperview]。然后插件从视图中消失但是我无法让我的统一响应我的输入（就像在统一层前面还有另一层）

第二种方式：

几乎与第一种方式相同，但在自定义视图控制器中，我添加了一个带有按钮的 nib 以打开插件视图 [[lugin displayView] 和另一个按钮以关闭视图 [self.view removefromsuperview]。插件显示并关闭得很好，unity 收到了我的控件，但是按钮的 ui 方向设置为 potrait，而我的 unity 应用程序设置为横向。插件视图以某种方式更改为横向。

第三种方式：

我修改了 appcontroller.mm ，添加了我自己的视图控制器，其中包含我的插件视图和 eaglview。插件出现了，unity 可以接收输入，但是插件的方向是 potrait..

有谁可以向我指出我必须关注哪种方法/我错过了什么？之前谢谢！:)

# php - 如何在 Kohana Orm 中使用变量获取值属性

> ID：11072027
> 
> 赞同：0
> 
> 时间：2012-06-17T14:26:37.680
> 
> 标签：php, orm, model, kohana

我想通过从变量中设置属性名称来从 ORM 对象中获取值。下面是我在想什么的例子。

```
$field_name = 'name';

$value = ORM::factory('table')->GetValueByField($field_name);

echo $value; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:58:27.677

```
// $id required, because your model must be loaded
$values = ORM::factory('table', $id)->{$field_name}; 
```

它是一个`__get`神奇的[ORM API 链接](http://kohanaframework.org/3.0/guide/api/ORM#__get)

# toggle - jQuery 切换以扩展/收缩独立于先前状态的所有内容

> ID：11072030
> 
> 赞同：0
> 
> 时间：2012-06-17T14:26:53.093
> 
> 标签：toggle, togglebutton, jquery

file://localhost/C:/Users/kürşat/Desktop/yeni%20site/faq%20-%20Kopya/kopya.html

这是我的摄影教程页面。当有人点击问题时，我确实设法打开/关闭。

我不能做什么：右上角的按钮可以展开所有问题，但不能缩小所有问题。即使其中一些以前打开过，我也应该全部收缩/扩展。起初，我的代码与之前的状态相反。

我怎样才能做到这一点？

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<link rel="stylesheet" type="text/css" href="styles.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){
$("li").click(function(){
    $(this).next().toggle("fast");
    $(li).css("background-color","#999");
    $(article).css("background-color","#FDFEE9");
});
$(document).ready(function(){
$("#expand").click(function(){

     $("article").toggle(true);
     $(this).text($(this).text() == 'Genişlet' ? 'Küçült' : 'Genişlet');
});

$("article").toggle();
});

}); 
</script>

</head>

<body>
    <div  id="page"><h1>Temel Fotoğrafçılık Bilgileri<button id="expand">Genişlet</button></h1>

  <div class="faq"> 
    <!-- The FAQs are inserted here -->
<ul>
    <li>question 1?</li>
     <article> <p>answer 1.</p></article>

  <li>question 2?</li>
     <article> <p>answer 2.</p></article>

  <li>question 3?</li>
     <article> <p>answer 3.</p></article>
</ul>
</div>
</body>
</html> 
```

这是工作的 JSfiddle 版本：

[http://jsfiddle.net/reJu9/](http://jsfiddle.net/reJu9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:36:13.903

维护一个变量，它告诉您按钮是否应该展开或折叠问题。

检查[这个更新的小提琴](http://jsfiddle.net/reJu9/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:34:06.270

`expand`将点击回调更改为

```
$("#expand").click(function(){
     var $this = $(this);
     if($this.text() == 'Genişlet')
        $('article').show();
     else
        $('article').hide();
     $this.text($this.text() == 'Genişlet' ? 'Küçült' : 'Genişlet');
}); 
```

**演示：http:** [//jsfiddle.net/joycse06/reJu9/1/](http://jsfiddle.net/joycse06/reJu9/1/)

# javascript - 清除同一个名称的多个文本输入框

> ID：11072031
> 
> 赞同：0
> 
> 时间：2012-06-17T14:26:59.730
> 
> 标签：javascript, html

嗨，我有几个文本输入框，我有一个清除按钮，它们都共享相同的名称，我希望使用一个函数将它们全部清除，这可以在没有 ID 的情况下完成，因为这占用了太多空间我的代码到目前为止看起来像这样：

```
var Id;
var Name;
function Check(id, name)    {
Id = document.getElementById(id);
Name = document.getElementById(name);
if (Id.value == id) {
    Name.checked = true;
    alert('correct');
    return;
} else  {
    Name.checked = false;
    alert('incorrect');
}
}
function ClearP()   {
document.getElementsByName("input").innerHTML = '';
} 
```

我的 html 看起来像这样

```
<div class="content">
                    <div class="main_story" style="margin-bottom:20px;">
                        <p class="sentence">the word to go here -></p>
                        <input id="here" name="input" class="sentence" type="text" size="7">
                        <p class="sentence">is here</p>
                        <button style="float:right" id="correct" onClick="Check('here', 'aShow');">Correct?</button>
                        <input style="float:right" name="aShow" id="aShow" type="checkbox" value="">
                    </div>
                    <div class="main_story" style="margin-bottom:20px;">
                        <p class="sentence">the word to go here -></p>
                        <input id="you" name="input" class="sentence" type="text" size="7">
                        <p class="sentence">is you</p>
                        <button style="float:right" id="correct" onClick="Check('you', 'bShow');">Correct?</button>
                        <input style="float:right" name="bShow" id="bShow" type="checkbox" value="">
                    </div>
                    <button onClick="ClearP();">Clear</button>
                </div> 
```

非常感谢所有帮助 :) 谢谢 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:30:35.240

```
function ClearP(){
    var inputs = document.getElementsByTagName("input");
    for(var i=0;i<inputs.length;i++)
        inputs[i].value = '';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:51:18.760

如何使用[jQuery](http://jquery.com/)和类似的东西：

```
$('[name="input"]').val(""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T14:30:21.557

给他们所有人另一个班级（也许是“可清除”之类的东西？），然后找到并清除该班级的所有项目。

# asp.net - Asp.net 4.0 中的 URL 重写在 IIS 7 上不起作用

> ID：11072034
> 
> 赞同：0
> 
> 时间：2012-06-17T14:27:28.350
> 
> 标签：asp.net, iis-7, url-rewriting

我正在通过注册路由及其在我的本地机器（Windows 7）上的工作来进行 URL 重写。

但是当我将应用程序部署到专用服务器（Windows Server 2008 和 II7）时，当我点击映射到我的页面的 URL 时，它会显示资源未找到。

以下是正在映射的路径：

```
routeCollection.MapPageRoute("School", "{pageid}", "~/PublicProfile.aspx"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:06:20.170

尝试更改路线，以便在 pageId 令牌之前有一些东西，例如：

```
routeCollection.MapPageRoute("School", "PublicProfile/{pageid}", "~/PublicProfile.aspx"); 
```

# mysql - 选择两列的组合，并计算该组合的出现次数

> ID：11072036
> 
> 赞同：5
> 
> 时间：2012-06-17T14:28:14.043
> 
> 标签：mysql, sql, django-views

我有一个问题表，其中每一行都是一个问题，所有问题都有一个 ask_by 和 answers_by 字段。我想选择“提问者”和“回答者”的所有独特组合，并计算这种提问/回答组合发生了多少次。

```
question_tbl:

id      | asked_by | answered_by | session
--------+----------+-------------+---------
1       | AA       | JD          | 2011-2012
2       | JD       | AA          | 2011-2012
9       | AA       | JD          | 2011-2012
12      | AA       | JD          | 2009-2010 
```

我想在会话中返回唯一组合，以及该组合的计数。

例如 2011-2012 年：

```
AA, JD, 2
JD, AA, 1 
```

PS：理想情况下，我会为 django orm 编写此代码，但由于我什至无法弄清楚如何为此制定合理的 google 搜索，因此找到 SQL 方式是我的目标。

**问题解决后的注意事项：** 因为这在 SQL 中很容易，所以在 Django 的 ORM 中也很容易。我把它留在这里供以后记录：

```
from django.db.models import Count
from myproject.models import Questions

Questions.objects.filter(sesjonid='2011-2012').values('sporsmal_til', 'sporsmal_fra').annotate(count=Count('besvart_av')) 
```

通过测试它在 SQL 中的外观，在我看来是正确的（在 ./manage.py shell 中）：

```
print str(Questions.objects.filter(sesjonid='2011-2012').values('sporsmal_til', 'sporsmal_fra').annotate(count=Count('sporsmal_til')).query) 
```

这将打印出与 Bohemians 完全相同的 SQL。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-17T14:32:04.277

一个直截了当`COUNT(*)`的 a`GROUP BY`会做到这一点：

```
select asked_by, answered_by, count(*)
from question_tbl
where session = '2011-2012'
group by 1, 2; 
```

如果您希望查询返回*所有*会话的数据，请使用：

```
select session, asked_by, answered_by, count(*)
from question_tbl
group by 1, 2, 3; 
```

# javascript - 将泛型函数动态关联到对象属性时的范围。（模块模式）

> ID：11072037
> 
> 赞同：1
> 
> 时间：2012-06-17T14:28:16.897
> 
> 标签：javascript, scope

设置相应值的正确方法是什么？
如何使用“for ... in”来完成这项工作。

我与 self[state] 关联的函数似乎在循环之后以 states[state] 的最新值运行，而不是在循环期间与其关联的函数。

```
cssbtn = function(id, states, state){

  var self = document.getElementById(id);
  var states = states ||  {'off': '0px 0px', 'selected': '-20px 0px', 'selected2': '-40px 0px' };
  var state = state || 'off';

  for (state in states) {
    self[state] =  function (){
      alert(states[state]); //demo purposes
    }
  }

  self.onmouseover = function(evt){
    self.selected();
  }

  self.onmouseout= function(evt){
    self.off();
  }

  self.onclick= function(evt){
    self.selected2();
  }

  return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:32:14.883

一个正确的答案是：

```
self[state] = (function(i) { return function() { alert(i) } })(states[state]); 
```

偶然发现它： [如何在封闭外部范围时取消引用 JavaScript 变量](https://stackoverflow.com/questions/442985/how-can-one-de-reference-javascript-variables-when-enclosing-an-outer-scope?rq=1)

这是唯一的方法吗？更明显/优雅的多语言（不是 javascript）方法？

# google-docs - 如何在 Google Docs 中创建新文档

> ID：11072039
> 
> 赞同：-2
> 
> 时间：2012-06-17T14:28:51.063
> 
> 标签：google-docs, google-sheets, google-drive-api

在 google docs 或 google drive 中创建新文档的 url 是什么？当 Google Drive 启动时，一些可以在网络上的一些博客上找到的链接现在无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:28:52.373

以下是我测试过的有效链接（截至 2012 年 6 月 1 日）

创建新的 Google 文档 [https://docs.google.com/DocAction?action=newdoc](https://docs.google.com/DocAction?action=newdoc)

创建新的电子表格 [http://spreadsheets.google.com/ccc?new](http://spreadsheets.google.com/ccc?new)

创建新演示文稿 [https://docs.google.com/DocAction?action=new_presentation](https://docs.google.com/DocAction?action=new_presentation)

创建新绘图 [https://docs.google.com/drawings/create?hl=en](https://docs.google.com/drawings/create?hl=en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:34:45.410

如果您想以编程方式使用 Google Docs，您应该使用[GData API](https://developers.google.com/gdata/)。Google 以多种不同的语言为客户提供服务。

# php - header("位置：/"); 重定向适用于本地主机，但不适用于远程服务器

> ID：11072042
> 
> 赞同：3
> 
> 时间：2012-06-17T14:29:32.510
> 
> 标签：php, apache, localhost

```
if (condition)
{
#lol. Some code here
}
else
{       
header("Location:/");//i'm trying to redirect to the root
} 
```

重定向在本地主机上完美运行，但在远程服务器上却不行。使用起来会更好`$_SERVER`吗？即使我选择与重定向文件位于同一目录中的文件，此重定向也不起作用。希望你能帮助我:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T14:36:04.677

从[手册](http://php.net/manual/en/function.header.php)：

> HTTP/1.1 需要绝对 URI 作为 » Location 的参数：包括方案、主机名和绝对路径，但有些客户端接受相对 URI。您通常可以使用`$_SERVER['HTTP_HOST']`,`$_SERVER['PHP_SELF']`并`dirname()`自己从相对的 URI 中创建一个绝对 URI：

```
<?php
/* Redirect to a different page in the current directory that was requested */
$host  = $_SERVER['HTTP_HOST'];
$uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
$extra = 'mypage.php';
header("Location: http://$host$uri/$extra");
exit;
?> 
```

# java - 重命名和删除文件

> ID：11072046
> 
> 赞同：0
> 
> 时间：2012-06-17T14:29:44.670
> 
> 标签：java, netbeans, netbeans-7, netbeans-6.9

我正在编写一个程序来查找信息并将它们从文本文件中删除，方法是制作一个临时文件，删除原始文件，然后将临时文件重命名为原始文件。到目前为止，我已经完成了编写程序，并且当我使用 Windows 控制台编译它时它可以工作，但是当我尝试在 netbeans 中运行相同的代码时它不起作用，因为它无法删除和重命名原始文件。我正在寻找解决这个问题的方法。

这是代码，当我使用 Windows 控制台而不是在 netbeans 中编译它时它可以工作

```
import java.io.*;

public class rename {
public static String x="1123";

public void removeLineFromFile(String file, String lineToRemove) {

try {

  File inFile = new File(file);

  if (!inFile.isFile()) {
    System.out.println("Parameter is not an existing file");
    return;
  }

  //Construct the new file that will later be renamed to the original filename. 
  File tempFile = new File(inFile.getAbsolutePath() + "2.tmp");

  BufferedReader br = new BufferedReader(new FileReader(file));
  PrintWriter pw = new PrintWriter(new FileWriter(tempFile));

  String line = null;

  //Read from the original file and write to the new 
  //unless content matches data to be removed.
  while ((line = br.readLine()) != null) {

    if (!line.trim().contains(lineToRemove)) {

      pw.println(line);
      pw.flush();
    }
  }
  pw.close();
  br.close();

  //Delete the original file
  if (!inFile.delete()) {
    System.out.println("Could not delete file");
    return;
  } 

  //Rename the new file to the filename the original file had.
  if (!tempFile.renameTo(inFile))
    System.out.println("Could not rename file");

}
catch (FileNotFoundException ex) {
  ex.printStackTrace();
}
catch (IOException ex) {
  ex.printStackTrace();
}
}

public static void main(String[] args) {
rename util = new rename();
String jj;
util.removeLineFromFile("File.txt", x);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:40:23.637

嗯...关闭`br`and后`pw`，尝试将它们设置为 `null`and 调用`System.gc()`。

参考：[我无法在java中删除文件](https://stackoverflow.com/questions/991489/i-cant-delete-a-file-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-12T15:22:17.600

重命名

```
 public void rename(String old, String newpath) {
    try {
        File folder = new File(old);
        File[] listOfFiles = folder.listFiles();

        for (int i = 0; i < listOfFiles.length; i++) {

            if (listOfFiles[i].isFile()) {

                File f = new File(old + listOfFiles[i].getName());

                f.renameTo(new File(old + "\\" + newpath));

                System.out.println(old + "\\" + newpath);
            }
        }

        System.out.println("conversion is done");

    } catch (Exception ex) {
        Logger.getLogger(CVAdd.class.getName()).log(Level.SEVERE, null, ex);
    }

} 
```

# ios - 同一对象上的 2 个动画，仅最后一次显示。如何显示第一个没有嵌套完成块？

> ID：11072048
> 
> 赞同：0
> 
> 时间：2012-06-17T14:29:56.417
> 
> 标签：ios, animation, block, cakeyframeanimation, completion-block

我正在使用块在同一个 UIImageView 上制作两个动画。动画不是完全背靠背，而是几乎；两者之间有一些逻辑。

*   将 UIImageView 从视图上的一个位置动画到另一个位置。
*   执行确定是否允许图像留在那里的逻辑
*   如果不允许，撤消动画（UIImageView 弹回原始位置）

如果我按上述方式实现，则仅显示第二个动画（据我了解，这是正常行为）。如果我将逻辑和第二个动画块嵌套在第一个的完成块中，我会看到两个动画，但是有相当多的代码会塞进那个完成块，而且看起来很丑陋而且不合适。

在非嵌套配置中，为什么iOS要缩短前面的动画，只执行最后一个，我怎么能强制它等待第一个，然后再执行下一个？我认为它不需要阻塞主线程或在完成块中“坐下来旋转”；我只想显示所有动画。尝试为第二个动画添加延迟无济于事。

这是 CAKeyframeAnimation 的工作吗？

```
// first animation

[UIView animateWithDuration:0.5
                      delay:0.0
                    options: UIViewAnimationCurveLinear
                 animations:^{movingColor.center = newCenter;
                     movingColor.transform = scaleTransform;}
                 completion:^(BOOL finished){ NSLog(@"forward animation done");}];

if (/* ...color is allowed at that location */) {

    // do some stuff

} else {

    // undo the animation

    [UIView animateWithDuration:0.5
                          delay:0.0
                        options: UIViewAnimationCurveLinear
                     animations:^{movingColor.center = origCenter;
                         movingColor.transform = scaleTransform;}
                     completion:^(BOOL finished){ NSLog(@"back animation done");}];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:35:05.570

正确的做法是如你所说，在第一个的完成中设置第二个，这是正确的方法，

您还可以在另一个开始时添加延迟，这可能会或可能不会起作用，这取决于很多变量

您的第二个动画会有 0.5 的延迟（第一个动画完成的时间）

```
[UIView animateWithDuration:0.5
                      delay:0.5
                    options: UIViewAnimationCurveLinear
                 animations:^{movingColor.center = origCenter;
                     movingColor.transform = scaleTransform;}
                 completion:^(BOOL finished){ NSLog(@"back animation done");}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:44:01.857

`animateWithDuration`异步执行，并立即返回。也就是不等动画结束就执行下一行代码。`completion`如果您希望在动画完成后执行代码，您可以将代码放入块中，或者您接受第二个动画立即开始（从而取消第一个动画）。

如果您想通过启动动画而不是完成动画来向用户表明有问题，您可以延迟执行第二个动画。`UIViewAnimationOptionBeginFromCurrentState`如果您延迟第二个动画的持续时间小于第一个动画的持续时间，请记住还要设置该选项：

```
[UIView animateWithDuration:0.5 
                      delay:0.25 //or some number
                    options: (UIViewAnimationCurveLinear | UIViewAnimationOptionBeginFromCurrentState)
                 animations:^{movingColor.center = origCenter;
                     movingColor.transform = scaleTransform;}
                 completion:^(BOOL finished){ NSLog(@"back animation done");}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T14:44:09.183

第二个动画应该在第一个的完成块内有条件地完成。将其放入函数中将使其更具可读性。

```
- (void)moveColor:(UIView *)view to:(CGPoint)center delay:(NSTimeInterval)delay completion:(void (^)(BOOL finished))complete {

    [UIView animateWithDuration:0.5 delay:delay options:UIViewAnimationCurveLinear animations:^{
        view.center = center;
        view.transform = scaleTransform;  // probably don't need this
    } completion:completion];
} 
```

这样您的逻辑可以与动画代码分开

```
- (void)someMethod {

    [self moveColor:movingColor to:newCenter delay:0.0 completion:^(BOOL finished) {
        if (/*it can stay*/) {
            // stuff
        } else {
            [self moveColor:movingColor to:origCenter delay:2.0 completion:^(BOOL finished) {}];
        }
    }];
} 
```

# list - Lisp - 如何检查列表是否为点对？

> ID：11072056
> 
> 赞同：7
> 
> 时间：2012-06-17T14:31:13.613
> 
> 标签：list, lisp, common-lisp, predicate

如何检查 lisp 中的列表是否是点对？

```
CL-USER 20 : 3 > (dotted-pair-p (cons 1 2))
T

CL-USER 20 : 3 > (dotted-pair-p '(1 2))
NIL

CL-USER 20 : 3 > (dotted-pair-p '(1 2 3))
NIL 
```

我尝试检查是否`length=2`出现错误：

```
CL-USER 28 : 1 > (= (length (cons 2 3)) 2)
Error: In a call to LENGTH of (2 . 3), tail 3 is not a LIST. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T14:40:37.580

“点对符号”中的 lisp 列表看起来像：

```
(1 . ()). 
```

既然这是家庭作业，我会让你得出合乎逻辑的结论。比较

```
(LIST 1 2) => (1 . (2 . ())) 
```

和

```
(CONS 1 2) => (1 . 2). 
```

这两者有什么不同？你怎么能用谓词来区分？

记住所有正确的 lisp 列表都以空列表结尾。问问自己如何访问缺点对的第二个元素？那里的解决方案应该很清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-20T11:37:02.823

因为列表总是以空列表结尾，而一对则不会：

```
(listp (cdr '(1 2))) => T
(listp (cdr '(1 . 2))) => NIL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T11:12:08.553

```
(not(listp(cdr (cons 1 2))))=> T
(not(listp(cdr (list 1 2))))=> nill 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-05T21:45:38.470

虚线对是一个 cons 单元，其中它的 CDR 本身不是 cons（递归定义）。所以这`'(1 . 2)`是一个点对，但这`'(1 . ())`不是，因为它只是 和 的打印表示`'(1)`。

```
(defun dotted-pair-p (x)
  (and (consp x)
       ;; Check that CDR is not a list with LISTP
       ;; since (CONSP ()) ;;=> NIL
       ;; and the CDR of a pair can't be NIL for it
       ;; to be dotted.
       (not (listp (cdr x)))))

(dotted-pair-p '(1 . 2))            ;T
(dotted-pair-p '(1 . ()))       ;NIL 
```

虚线列表（最后一个 cons 单元格为虚线的列表）在 Common Lisp 中由`LIST*`. 我们现在也可以使用上面的函数为它们定义一个谓词：

```
(defun list*p (x)
  (dotted-pair-p (last x))) 

(list*p (list* 1 2 3 4))        ;T
(list*p (list 1 2 3 4))         ;NIL 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-01-05T10:48:24.160

您可以检查列表是否点缀（以非零原子结尾）：

```
(defun dotted-listp (l)
  (cond ((null l) nil)
        ((atom l) t)
        (t (dotted-listp (cdr l))))) 
```

# sql - 如何从另一个表的行生成具有“动态”列的查询表？

> ID：11072072
> 
> 赞同：1
> 
> 时间：2012-06-17T14:33:39.923
> 
> 标签：sql, database-design, datatable, report

这些是我想要合并的 TBL_MATERIALS 和 TBL_PRODUCTS 的源表。根据 TBL_MATERIALS 中有多少行，这些列应该是动态的。

**TBL_材料**

```
|===============================|                               
|MATERIAL           |      Gram |                           
|-------------------------------|                              
|Flour-Hard         |      25   |               
|Flour Soft         |      76   |                 
|Sugar-White        |      25   |                      
|Sugar-Washed       |      15   |                   
|Sugar-Brown        |      10   |                      
|CalciumPropionate  |      2.5  |                                  
|SodiumBenzoate     |      2    |                              
|TartarCream        |      5    |                     
|MilkSkimmed        |      20   |                
|===============================| 
```

**TBL_产品**

```
|===============================|                               
|Product            |     Batch |                              
|-------------------------------|                                                 
|Ameriloaf          |     5     |                         
|Peter Pann         |     2.5   |                            
|Chizmada           |     3     |                        
|Ubemada            |     8     |                            
|Millionaire        |     9     |                      
|Sweet Maria        |     2.5   |                          
|Butter Tarts       |     1.25  |                              
|Caramel Croquette  |     4     |                                  
|Garlic Stick       |     11    |                               
|===============================| 
```

这就是我想要的表格应该是什么样子。QUERY_CUSTOM 的列应该是动态的，当我在 TBL_MATERIALS 上添加新项目时，应该显示下表的新列。我想我们会使用 CREATE TABLE 之类的东西。我还在研究这件事。我希望这能帮助你理解。

```
QUERY_CUSTOM                                                                 
|=================================================================================================|
|Product            |     Batch | Flour-Hard | Flour-Soft | Sugar-White | Sugar-Washed | etc.etc. |    
|-------------------------------------------------------------------------------------------------|     
|Ameriloaf          |     5     | Gram*Batch | ALL BLANK  |             |              |          |
|Peter Pann         |     2.5   |ex.25*2.5=75| CELLS      |             |              |          |
|Chizmada           |     3     |      "     | SHOULD     |             |              |          |
|Ubemada            |     8     |      "     | BE FILLED  |             |              |          |
|Millionaire        |     9     |      "     | WITH       |             |              |          |
|Sweet Maria        |     2.5   |      "     |[GRAM]      |             |              |          |
|Butter Tarts       |     1.25  |      "     | MULTIPLIED |             |              |          |
|Caramel Croquette  |     4     |      "     | BY CORRESP.|             |              |          |
|Garlic Stick       |     11    |      "     |[BATCH]     |             |              |          |
|=================================================================================================| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:52:04.227

```
select
      Product
    , Batch
    , sum( case when Material = 'Flour-Hard'        then Product_Grams else 0.0 end ) as Flour_Hard
    , sum( case when Material = 'Flour-Soft'        then Product_Grams else 0.0 end ) as Flour_Soft 
    , sum( case when Material = 'Sugar-White'       then Product_Grams else 0.0 end ) as Sugar_White 
    , sum( case when Material = 'Sugar-Washed'      then Product_Grams else 0.0 end ) as Sugar_Washed
    , sum( case when Material = 'Sugar-Brown'       then Product_Grams else 0.0 end ) as Sugar_Brown
    , sum( case when Material = 'CalciumPropionate' then Product_Grams else 0.0 end ) as CalciumPropionate
    , sum( case when Material = 'SodiumBenzoate'    then Product_Grams else 0.0 end ) as SodiumBenzoate
    , sum( case when Material = 'TartarCream'       then Product_Grams else 0.0 end ) as TartarCream
    , sum( case when Material = 'MilkSkimmed'       then Product_Grams else 0.0 end ) as MilkSkimmed
from (
    select
          a.Product
        , a.Batch
        , b.Material
        , b.Gram
        , (a.Batch * b.Gram) as Product_Grams
    from       TBL_PRODUCTS  as a
    cross join TBL_MATERIALS as b
) as xx
group by Product, Batch
order by Product
; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-17T15:58:47.497

如果我正确理解您的问题，您需要使用插入和更新公式。定义外键时，附加'on update cascade'。这使得引用的值随之更新。

# c# - 远程回调对象生命周期

> ID：11072075
> 
> 赞同：3
> 
> 时间：2012-06-17T14:34:17.707
> 
> 标签：c#, .net, remoting, .net-remoting

我写了一段与这篇文章中的示例类似的代码： [.NET Remoting callback](https://stackoverflow.com/questions/1571263/net-remoting-callback) (Pass a callback object to a remote method)。

我发现，如果我没有覆盖`MarshalByRefObject.InitializeLifetimeService()` 一段时间后，服务器调用回调失败。所以我重写了它以返回 null （无限生命周期）并且它可以工作。

但现在我有点担心垃圾收集器：

1.  这样的对象会像往常一样被 GC 收集，还是因为它被远程而保持活动状态？
2.  我找到了这个方法：`RemotingServices.Disconnect()`

如果我在回调对象上调用它，它会保证生命周期策略将变得无关紧要并且将被垃圾收集吗？

如果我做得对，我想要专家意见。

谢谢，吉尔。

PS。我在 .NET 2.0 的约束下工作，因此建议切换到 WCF，虽然正确，但无关紧要。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-13T09:02:02.810

好的，看来这种方法证明了自己。

我通过在中返回 null 来使用无限租约`MarshalByRefObject.InitializeLifetimeService()`。
然后，调用`RemotingServices.Disconnect()`允许对象被正确释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T22:48:18.013

如果您覆盖 InitializeLifetimeService 并返回 null，您的对象将永远不会被垃圾回收。

如果您不希望您的实例永远存在，那么您需要进入 Sponsors and Leases - 基本上，当 .NET 即将到期租约和 GC 对象时，您会收到回调，让您有机会续订租约。

请参阅[http://msdn.microsoft.com/en-us/magazine/cc300474.aspx](http://msdn.microsoft.com/en-us/magazine/cc300474.aspx)，了解有关赞助和租约的详细信息。

# jquery - jQuery：如何将（单选按钮和文本）输入值附加到 div

> ID：11072078
> 
> 赞同：0
> 
> 时间：2012-06-17T14:34:41.437
> 
> 标签：jquery, html, input, append

我有 2 个输入文本字段和 4 个单选按钮。通过单击提交按钮，我希望这些值出现在侧边栏中。因为访问者只能选择一个单选按钮，所以侧边栏中应该出现三个值：品牌、价格和一个选择的方向。

不幸的是，现在我遇到了一个错误：

"error": "请使用 POST 请求"

这是我的代码和 jsFiddle：

HTML：

```
<h1>Adding an item</h1>
<form>
    <div>
        <input type="text" name="price" id="price" value="price" />
        <input type="text" name="brand" id="brand" value="brand"/> 
        <br/>
        <input type="radio" name="direction" value="up" />  UP
        <input type="radio" name="direction" value="down" /> DOWN
        <input type="radio" name="direction" value="left" />  LEFT
        <input type="radio" name="direction" value="right" /> RIGHT
        <button id="addbutton">add it</button>
      </div>
</form>

<div id="sidebar"><h1>sidebar</h1></div> 
```

JS：

```
$('#addbutton').click(function() {
    var $addDiv = $('#sidebar');
    $addDiv.append($('#brand' + '#price').val());
}); 
```

[http://jsfiddle.net/kHuYp/](http://jsfiddle.net/opoe/kHuYp/)

我的问题是：我怎样才能附加所选单选按钮的值？我必须在我的代码中进行哪些更改才能使错误消失？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:41:53.023

您需要在此行中独立处理每个值：

```
$addDiv.append($('#brand' + '#price').val()); 
```

应该类似于（取决于分隔符）：

```
 $addDiv.append($('#brand').val() +' '+$('#price').val()); 
```

为避免提交表单，请在单击处理程序中返回 false

演示：http: [//jsfiddle.net/kHuYp/3/](http://jsfiddle.net/kHuYp/3/)

# java - 如何知道应用程序是否已从 Google Play 或 Amazon 下载？

> ID：11072079
> 
> 赞同：16
> 
> 时间：2012-06-17T14:34:43.683
> 
> 标签：java, android, google-play, amazon-appstore

有什么方法可以知道应用程序是否已从 Amazon App Store 或 Google Play Store 下载？当然，我的意思是在应用程序本身内。

我已经在这两个站点上部署了一个应用程序，我更想知道客户在应用程序中从哪里下载了它。我知道，我可以为每个服务部署不同的应用程序，但这增加了一些维护工作，如果有某种方法可以通过使用相同包的应用程序中的条件来解决它，则可以避免这些工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T07:09:30.093

**在代码中：**

```
final PackageManager packageManager = getPackageManager();

try {
    final ApplicationInfo applicationInfo = packageManager.getApplicationInfo(getPackageName(), 0);
    if ("com.android.vending".equals(packageManager.getInstallerPackageName(applicationInfo.packageName))) {
        // App was installed by Play Store
    }
} catch (final NameNotFoundException e) {
    e.printStackTrace();
} 
```

“com.android.vending”告诉您它来自 Google Play 商店。我不确定 Amazon Appstore 是什么，但使用上面的代码应该很容易测试。

**通过亚行：**

```
adb shell pm dump "PACKAGE_NAME" | grep "vending" 
```

*例子：*

```
adb shell pm dump "com.android.chrome" | grep "vending"

installerPackageName=com.android.vending 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-08T07:34:14.437

虽然在大多数情况下，您可以通过包含类似于以下内容的检查来获取商店名称：

```
final PackageManager packageManager = getPackageManager();

try {
    final ApplicationInfo applicationInfo = packageManager.getApplicationInfo(getPackageName(), 0);
    if ("com.android.vending".equals(packageManager.getInstallerPackageName(applicationInfo.packageName))) {
        // App was installed by Play Store
    }  else if ("com.amazon.venezia".equals(packageManager.getInstallerPackageName(applicationInfo.packageName))) {
        // App was installed by Amazon Appstore
    } else {
        // App was installed from somewhere else
    }
} catch (final NameNotFoundException e) {
    e.printStackTrace();
} 
```

“com.android.vending”是 Google Play 商店，
“com.amazon.venezia”是亚马逊应用商店，
当它被侧载时为 null

然而，结果可能不可靠，例如在 beta 测试期间，商店可能不会设置此值，此外还可以旁加载您的应用程序，指定安装程序的包名称，该名称可以解释为商店名称：

```
adb install -i <INSTALLER_PACKAGE_NAME> <PATH_TO_YOUR_APK> 
```

您可能需要考虑为不同的商店设置不同的应用程序 ID，例如 Google 的“com.example.yourapp”和 Amazon 的“com.example.yourapp.amazon”——您可以在 Gradle 脚本中轻松设置它们。

# android - 创建由其他视图组成的自定义视图的标准方法

> ID：11072082
> 
> 赞同：-1
> 
> 时间：2012-06-17T14:34:57.750
> 
> 标签：android, custom-controls, android-view, android-gridview

我想在我的应用程序中有一个自定义视图，它由一个 ImageView 和一个可选的覆盖 TextView 组成。我怎样才能结合这些来创建一个单一的视图？我需要一个视图，因为我计划使用该视图来使用项目填充 GridView 或 ListView。[是使用复合控件](http://developer.android.com/guide/topics/ui/custom-components.html#compound)的最佳方式吗？这是否适用于适配器和 GridView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:55:08.713

您只需像任何其他布局一样创建它，然后在您的适配器中将该布局用于网格视图。

Java 代码：

```
Cursor scheduleCursor = mDbHelper.fetchAllSchedules();
startManagingCursor(scheduleCursor);

String[] from = new String[] { ScheduleDBAdapter.SCHEDULE_MACHINE,
    ScheduleDBAdapter.SCHEDULE_PRIORITY,
    ScheduleDBAdapter.SCHEDULE_RUNPART,
    ScheduleDBAdapter.SCHEDULE_RUNJOB,
    ScheduleDBAdapter.SCHEDULE_OPERATOR,
    ScheduleDBAdapter.SCHEDULE_NXTJOB1,
    ScheduleDBAdapter.SCHEDULE_NXTPRT1,
    ScheduleDBAdapter.SCHEDULE_NXTJOB2,
    ScheduleDBAdapter.SCHEDULE_NXTPRT2 };
int[] to = new int[] { R.id.txtMachine, R.id.txtPriority,
    R.id.txtRunningPart, R.id.txtRunningJob, R.id.txtOperator,
    R.id.txtNextJobNumber1, R.id.txtNextJobPart1,
    R.id.txtNextJobNumber2, R.id.txtNextJobPart2 };
SimpleCursorAdapter schedule = new SimpleCursorAdapter(this,
    R.layout.customgrid, scheduleCursor, from, to);

GridView gridview = (GridView) findViewById(R.id.gridview);
gridview.setAdapter(schedule); 
```

自定义网格.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:shrinkColumns="*"
    android:stretchColumns="*" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center" >

        <TextView
            android:id="@+id/txtMachine"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#000000"
            android:gravity="left"
            android:text="machine" />

        <TextView
            android:id="@+id/txtPriority"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#ff0000"
            android:gravity="center"
            android:text="priority"
            android:textColor="#000000" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center" >

        <TextView
            android:id="@+id/txtRunningPart"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_span="2"
            android:background="#000000"
            android:gravity="center"
            android:text="part #"
            android:textColor="#009900" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center" >

        <TextView
            android:id="@+id/txtRunningJob"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_span="2"
            android:background="#000000"
            android:gravity="center"
            android:text="job #"
            android:textColor="#009900" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center" >

        <TextView
            android:id="@+id/txtOperator"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_span="2"
            android:background="#000000"
            android:gravity="center"
            android:text="operator"
            android:textColor="#0000FF" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow5"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center" >

        <TextView
            android:id="@+id/txtNextJobPart1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#000000"
            android:gravity="center"
            android:text="part #"
            android:textColor="#FFFF00" />

        <TextView
            android:id="@+id/txtNextJobNumber1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#000000"
            android:gravity="center"
            android:text="job #"
            android:textColor="#FFFF00" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow6"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center" >

        <TextView
            android:id="@+id/txtNextJobPart2"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#000000"
            android:gravity="center"
            android:text="part #"
            android:textColor="#FFFF00" />

        <TextView
            android:id="@+id/txtNextJobNumber2"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#000000"
            android:gravity="center"
            android:text="job #"
            android:textColor="#FFFF00" />
    </TableRow>

</TableLayout> 
```

它在行动中：

![在此处输入图像描述](../Images/aa8962d8001a5f60abe0162e670a58dd.png)

# c# - ASP.NET 如何向客户端推送通知（与 Gmail 相同）

> ID：11072086
> 
> 赞同：2
> 
> 时间：2012-06-17T14:35:27.877
> 
> 标签：c#, asp.net

如何像 Gmail 一样向客户端推送通知？我应该使用哪种技术？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T14:38:34.150

对于 ASP.NET 实现，请查看[SignalR](https://github.com/SignalR/SignalR)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:38:08.643

您需要创建或重用 Comet 实现。这已经在[这里](https://stackoverflow.com/questions/65673/comet-implementation-for-asp-net)讨论过了。

可以在[此处](http://en.wikipedia.org/wiki/Comet_%28programming%29)找到有关此设计方法的更多详细信息。

# jquery - Divs 根据窗口宽度和高度自动调整大小

> ID：11072089
> 
> 赞同：1
> 
> 时间：2012-06-17T14:36:12.887
> 
> 标签：jquery, html, resize, window

我正在做一个项目，我正在尝试创建以下内容：

我想在彼此下方有三个或更多 div（带有内容和背景图像）。当您打开浏览器时，所有这些 div 都必须自动调整到浏览器大小（宽度和高度）。当您调整浏览器窗口的大小（不刷新）时，div 必须与它们一样大（因此它们不应随窗口调整大小）。缩小浏览器屏幕并刷新后，div 应调整为新的窗口大小。（应该有一个 1024 的最小宽度，所以 div 不能变得更小）

在 div 里面我想添加背景图片。（相片）。我的目标是将照片的大小精确地调整为 div 大小。所以高度必须与照片/ div的宽度一起缩放。

例如：如果浏览器窗口为 1024x768，则 div 和 photo 必须为 1024x768。当我调整浏览器大小时，div 保持 1024x768。当您将浏览器大小调整为 1280x720 并刷新时，div 应自动调整为该大小。div 的高度应始终与宽度成比例。

有谁知道怎么做这个？我在其他任何地方都找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:08:37.133

[http://jsfiddle.net/MQkmk/1/](http://jsfiddle.net/MQkmk/1/)

```
$(function(){               // when the page is loaded ...
    var $f = $('#fixy');    // .. make current size permanent. 
    $f.css({
        width:  $f.width(),
        height: $f.height()
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T11:58:43.193

```
<html><head>
<script src="js.js"></script>
<title></title>
<style>
#box {
      background: url("DSC_2598.jpg");
background-size:contain;
      position: absolute;
    }
</style>
</head>

<body>
<div id="box"></div>

<script>
        $(document).ready(function(){   
    var x=$(window).width();
        var y=$(window).height();

    if (x>1024) {var a=x/2;} else {var a=1024};
    if (y>768) {var b=y/2;} else {var b=768};
        $("#ww").html("width="+x +"<br>");
    $("#wh").text("height="+y);
        $("#box").css("height",b);
        $("#box").css("width",a); }); 

</script>
</head>
<body>
<br>
</body>
</html> 
```

这可能会满足您的需求，前提是您有适合该比例 (1024x768) 的图像。

# c# - 将 XML 文件加载到 DataGrid

> ID：11072093
> 
> 赞同：0
> 
> 时间：2012-06-17T14:36:41.883
> 
> 标签：c#, wpf, xml, datagrid

我有下面的 XML 文件：

```
<?xml version="1.0"?>
<Devices>
  <Device Name="PS3" price="15" />
  <Device Name="Wii" price="25" />
  <Device Name="XBox" price="25" />
</Devices> 
```

我`DataSet`在我的应用程序中创建了一个应该读取 XML 文件内容的应用程序。

这是我的`XAML`代码：

```
<TabControl Height="311" HorizontalAlignment="Left" Name="tabControl1" VerticalAlignment="Top" Width="503">
    <TabItem Header="All Clients" Name="allData">
        <DataGrid AutoGenerateColumns="False" Height="279" Name="dataGrid2" Width="493">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Location" />
                <DataGridTextColumn Header="Device" />
                <DataGridTextColumn Header="Start Time" />
                <DataGridTextColumn Header="End Time" />
                <DataGridTextColumn Header="Edit" /><!-- This will be a button -->
            </DataGrid.Columns>
        </DataGrid>
    </TabItem>
</TabControl> 
```

编辑将有一个按钮用于编辑整行（这将是另一个用于编辑的窗口）

现在的问题是，我尝试将数据加载到 DataGrid 但我没有这样做。

# scala - 在 Play 框架模板中迭代 Mongo DBCursor

> ID：11072095
> 
> 赞同：1
> 
> 时间：2012-06-17T14:36:49.127
> 
> 标签：scala, mongodb, playframework, playframework-2.0

我正在尝试在 play framework 2.0.1 视图中迭代 mongo DBCursor。但是，没有列出任何内容。理想情况下，我想对光标进行分页，但即使我能够列出光标中的所有对象也可以。

这就是我正在做的事情。在我的控制器中，我查询 Mongo DB 并渲染 DBCursor。日志状态游标不为空。

然后在视图中我有以下内容：

```
@(cursor: com.mongodb.DBCursor)

@main("Title") {
<div id="objects" class="content">
 <h2>Objects</h2>

 @if(cursor.count() == 0) {
    There are currently no objects in the data base.
 } else {
    @while(cursor.hasNext()) {
        @cursor.next().get("name");
    }
 } 
</div>    
} 
```

不幸的是，除了呈现页面时的标题之外，没有列出任何内容。有趣的是，如果我省略`@while(cursor.hasNext())`并只输出光标中的第一个对象，那么它就会呈现在页面上。

显然那段时间出了点问题。那么，是否可以在视图中呈现（和/或分页） DBCursor？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:22:35.973

也许@while 在 scala 模板中不存在！？

这种工作不打算在视图中完成。视图用于渲染，而控制器用于逻辑和访问数据库。考虑将 DBObjects 解析为控制器中的列表或数组，并使用 @for 在视图中对其进行迭代。

对于分页使用这样的东西：

```
myCollection.find(query).skip(40).limit(20); 
```

# php - 使用 cURL 发送文件

> ID：11072103
> 
> 赞同：4
> 
> 时间：2012-06-17T14:37:34.207
> 
> 标签：php, curl, upload

经过几个小时的研究，我无法解决 PHP 和 cURL 的问题。

当我尝试直接从表单发送文件时，卷曲工作正常。

```
<form method="post" action="" enctype="multipart/form-data">
<input name="file" type="file" /> <br />
<input name="submit" type="submit" value="Upload" />
</form>

<?php
$temp = $_FILES['file']['tmp_name'];
$name = $_FILES['file']['name'];

$post = array (
    'file' => '@'. $temp
);

$ch = curl_init();
curl_setopt ($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt ($ch, CURLOPT_POST, true);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $post);
$exec = curl_exec ($ch);
curl_close ($ch);
?> 
```

上面的代码工作正常。当我尝试使用您的表单时，文件已正确发送。

我的问题是我需要发送已经在服务器上的文件。

我尝试使用文件“C:/xampp/htdocs/test/photos.zip”的完整路径，但由于某种原因，它不起作用。

```
$post = array (
    'file' => '@C:/xampp/htdocs/test/photos.zip'
); 
```

有谁知道我如何发送已经发送到服务器的文件？

编辑：

上传.php（服务器）

```
<?php
error_reporting( E_ALL );
$upload = $_FILES['file'];
move_uploaded_file( $upload['tmp_name'], 'photos.zip');
?> 
```

myuploadtest.php ( 本地主机 )

```
<form action="" method="post" enctype="multipart/form-data">
<input name="file" type="file" /><br />
<input name="submit" type="submit" value="Upload" />
</form>

<?php
$temp = $_FILES['file']['tmp_name'];
$name = $_FILES['file']['name'];

$post = array(
    'file' => '@'.$temp
);

$url = "http://www.mysite.com/upload.php";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url );
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
$exec = curl_exec($ch);
curl_close($ch);
?> 
```

上传curl.php（本地主机）

```
<?php
$post = array(
    'file' => '@C:/xampp/htdocs/test/photos.zip'
);

$url = "http://www.mysite.com/upload.php";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url );
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
$exec = curl_exec($ch);
curl_close($ch);
?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:37:29.740

要发送已经在服务器上的文件，请在服务器上找到它的完整路径：

```
$post = array(
    'file' => '@'. $_FILES['file']['tmp_name']
); 
```

这正是你最初所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:50:47.167

您可能想尝试以下方法：

*   使用相对路径，即给出相对于您正在运行的 php 脚本的路径名。

*   在上面的代码中，我认为您缺少 $url 的声明。

*   我不太明白`Does anyone know how I do to send files that have already been sent to the server?` 您要将文件发送到哪个服务器？（本地主机？）

如果相对路径不起作用，您能否分享您收到的错误消息？

# javascript - 如果文本框太大到一定大小，如何调整文本框的大小

> ID：11072106
> 
> 赞同：0
> 
> 时间：2012-06-17T14:37:59.730
> 
> 标签：javascript, jquery

[`https://auth.me.com/authenticate`](https://auth.me.com/authenticate)

在本网站上，当您输入您的电子邮件地址时，如果电子邮件地址填满了框大小，字体大小将自动减小。

![在此处输入图像描述](../Images/e99fa7ca73b9aec02025c2b6e80a2c7c.png)

![在此处输入图像描述](../Images/f8dea10ac0f06ee699dd7e377e34d644.png)

![在此处输入图像描述](../Images/aa2f7ce8442a4f60ef0ba7bdd5b3afb1.png)

*   我们如何使用 Javascript 做同样的事情？

*   哪些事件被触发/捕获？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:43:42.037

```
$("input").keypress(function(){
if(this.value.length>43)//or some other value
{//do stuff here
}
}); 
```

Keydown 是您正在寻找的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:25:13.593

我已经为您制作了代码，例如我在[自己的网站上](http://francois.robichet.com#contact)为联系表格所做的：`<textarea>`如果有很多文本，它会变得更高。

要做的是为`<div>`中的每个创建一个不可见`keydown`的`<input>`，获取其内容并将其放入 中`<div>`，并检查其`width`是否大于 的`<input>`。

的HTML

```
<form>
    <input>
    <div></div>
</form>
​ 
```

`<input>`我们为 the和 the设置相同字体大小`<div>`并隐藏 the的 CSS `<div>`（`position: absolute`因为我们需要它的宽度并且我们不希望它改变布局）

```
form > * {
    font-size: 22px
}

form > input {
    width: 150px;
    font-size: 18px;
}

form > div {
    position: absolute;
    left: -10000px;
}​ 
```

还有 JavaScript（这里有 jQuery）

```
var $form = $('form')
  , $input = $('input', $form)
  , $autoResize = $('div', $form)
  , $both = $input.add($autoResize)
  , fontSize = parseInt($input.css('font-size'), 10)

$input.on('keydown', function() {
    $autoResize.html(this.value.replace(/&/g, '&amp;')
                                .replace(/</g, '&lt;')
                                .replace(/>/g, '&gt;')
                                .replace(/ {2,}/g, function(spaces) {
                                    // Change the spaces to $nbsp; except the last one
                                    for (var i = 1, fakeSpaces = '', space; space = spaces[i++];) {
                                        fakeSpaces += '&nbsp;'
                                    }
                                    return fakeSpaces + ' '
                                })
                            )
    // We add 10px to be sure it doesn't stick to the edges
    if ($autoResize.outerWidth() >= $input.outerWidth() - 10) {
        do {
            $both.css('font-size', --fontSize)
        } while ($autoResize.outerWidth() >= $input.outerWidth() && fontSize > 10)
        // 10px is the smallest font-size accepted
        if (fontSize === 10) {
            $input.off('keydown')
        }
    }
})​ 
```

这是[jsFiddle](http://jsfiddle.net/Calou/EPFr9/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T22:09:38.923

我创建了一个名为 的库`resize.js`，它允许编写：

```
<input type="text" resize="true" /> 
```

* * *

这是图书馆：

```
var precision=18;

window.onload=function()
{
    for(var i=0,t=document.getElementsByTagName("input"),l=t.length;i<l;i++)if(t[i].getAttribute("resize")==="true")
    {
        var div=document.createElement("div");
        div.setAttribute("style","font-size"+parseInt(t[i].s("font-size"))+";font-family:"+t[i].s("font-family")+";position:absolute;top:-10000px;left:-10000px;");
        document.body.appendChild(div);
        (function(i,div,min,max,dif,l,r,w,h,pre){setInterval(function(){modify(t[i],div,min,max,dif,l,r,w,h,pre);},100);})
        (
            i,
            div,
            t[i].getAttribute("min")||parseInt(t[i].s("font-size"))-3,
            t[i].getAttribute("max")||parseInt(t[i].s("font-size")),
            parseInt(t[i].s("padding-left"))+parseInt(t[i].s("padding-right"))+parseInt(t[i].s("border-left-width"))+parseInt(t[i].s("border-right-width"))+precision,
            parseInt(t[i].s("padding-left")),
            parseInt(t[i].s("padding-right")),
            t[i].offsetWidth,
            t[i].offsetHeight,
            precision
        );
    }
}
Object.prototype.s=function(p)
{
    return this.currentStyle?this.currentStyle[p]:document.defaultView.getComputedStyle(this,null).getPropertyValue(p);
}
function modify(el,c,min,max,dif,l,r,w,h,pre)
{
    el.style.width=w+"px";
    el.style.height=h+"px";
    c.innerHTML=el.value.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/ /g,"&nbsp");
    var test=c.offsetWidth;
    while(test>=el.offsetWidth-dif&&parseInt(el.s("font-size"))>min)
    {
        el.style.fontSize=parseInt(el.s("font-size"))-1+"px";
        c.style.fontSize=el.style.fontSize;
        test=c.offsetWidth;
    }
    while(test<el.offsetWidth-dif&&parseInt(el.s("font-size"))<max)
    {
        el.style.fontSize=parseInt(el.s("font-size"))+1+"px";
        c.style.fontSize=el.style.fontSize;
        test=c.offsetWidth;
    }
    if(parseInt(el.s("font-size"))===min&&c.offsetWidth>el.offsetWidth-dif)
    {
        el.style.paddingLeft="0px";
        el.style.paddingRight="0px";
    }
    else
    {
        el.style.paddingLeft=l+"px";
        el.style.paddingRight=r+"px";
    }
} 
```

一个小提琴：http: [//jsfiddle.net/mageek/GEp2y/1](http://jsfiddle.net/mageek/GEp2y/1)

* * *

一些建议：

*   如果属性“resize”不等于 true，或者未设置，则文本框将表现为普通文本框。
*   您可以通过设置“max”和“min”属性来设置允许的最大字体大小和最小字体大小。默认情况下，最大值为当前字体大小，最小值为比最大值小 3 倍。
*   我添加了一些东西，比如[https://auth.me.com/authenticate](https://auth.me.com/authenticate)，当达到最小字体大小时，它会删除填充以获得空间。
*   有取决于文本框的变量“precision”（在 resize.js 的开头），我将默认文本框设置为 18，但是如果您修改文本框的样式，您可能会有将变量修改为更好的值（通过测试）。
*   我不保证 resize.js 在网站上的主机就像小提琴一样，你应该将源代码复制到一个新文件中并保存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T14:42:12.037

您必须使用 JavaScript 来计算已经输入了多少字符（我相信`.change()`在 jQuery 中）并相应地更改字体大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T15:00:34.047

是的，我认为@somebody 遇到的麻烦就是他们在这里所做的事情。

*   计算有多少个字母可以装进盒子里——你知道文本框的宽度。你知道这里给出的字体大小和填充。所以你知道在它溢出之前可以在文本框中输入多少个字母（不完全是）。

*   或者你可以随便输入字母，看看能装多少！:)

*   好吧，如果您有时间，您还可以深入研究当您按下电子邮件地址文本框时触发的事件。你会学到很多东西！

# mysql - Django，权限错误：OSError at /upload/ [Errno 13] 权限被拒绝：

> ID：11072109
> 
> 赞同：1
> 
> 时间：2012-06-17T14:38:15.693
> 
> 标签：mysql, django, security, permissions, deploying

当我尝试上传图片时出现此错误：

```
OSError at /upload/

[Errno 13] Permission denied: '/var/www/p/p/media/imgupload/img.png' 
```

我的虚拟主机：

```
<VirtualHost *:80>
    ServerAdmin myemail@gmail.com
    ServerName p.com
    ServerAlias www.p.com
    DocumentRoot /var/www/p/
    LogLevel warn
    WSGIDaemonProcess processes=2 maximum-requests=500 threads=1
    WSGIProcessGroup %{GLOBAL}
    WSGIScriptAlias / /var/www/p/p/wsgi.py
    Alias /media /var/www/p/p/media/
    Alias /static /var/www/p/p/static/
</VirtualHost> 
```

这是文件的秒数：

```
drwxr-xr-x 3 ubuntu root     4096 Jun 16 13:10 www
drwxr-xr-x 4 ubuntu ubuntu 4096 Jun 16 13:10 p
(all other folders are ubuntu ubuntu) 
```

当我得到这个时：

```
drwxr-xr-x 36 ubuntu root     4096 Jun 11 06:33 lib
drwx------ 6 mysql  mysql   4096 Jun 17 14:19 mysql 
```

我无法使用我的 ubuntu 用户通过 mysql 进行 cd ... 是否存在安全问题？

一定是...

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:11:33.163

这是一个简单的修复。您的 django 进程可能不在与媒体位置所有者相同的用户下运行。检查您的配置以了解您如何通过 apache 设置 django 并确保媒体目录的所有者匹配，或者只是打开更多权限以使其正常工作：

```
chmod -R a+w /var/www/p/p/media 
```

或者

```
chown -R right-user /var/www/p/p/media 
```

# c# - Blend 中的自定义事件触发器

> ID：11072112
> 
> 赞同：0
> 
> 时间：2012-06-17T14:38:56.587
> 
> 标签：c#, wpf, events, expression-blend, eventtrigger

嗨，我最近几天一直在使用“Expression Blend 4”学习 WPF，这就是我想要完成的。

我有一个主窗口，其中有一个自定义按钮。

我想要做的是，当鼠标光标位于窗口的左侧时，我希望按钮开始其动画并移动到我的光标。或者，当光标位于窗口右侧时，我希望按钮向右移动。

我为此创建了自定义事件。如果我向左或向右移动，我已经用“MessageBox”测试了它们以弹出。实际上，我希望他们向左或向右动画。但是为了创建动画时间线，我在 blend 上找不到我的自定义事件。有没有办法解决这个问题？

部分代码如下

```
private event EventHandler MoveRightEvent;
private event EventHandler MoveLeftEvent;

    public MainWindow()
    {
        this.InitializeComponent();

        // Insert code required on object creation below this point.
    MoveRightEvent += new EventHandler(MainWindow_MoveRightEvent);
    MoveLeftEvent += new EventHandler(MainWindow_MoveLeftEvent);
    }

void MainWindow_MoveLeftEvent(object sender, EventArgs e)
{
    MessageBox.Show("Moved Left!!");
}

void MainWindow_MoveRightEvent(object sender, EventArgs e)
{
    MessageBox.Show("Moved Right!!");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:18:49.413

您的问题是关于[EventTrigger](http://msdn.microsoft.com/en-us/library/ff724009%28v=expression.40%29)（请注意，在这种情况下您必须使用[RoutedEvent](http://msdn.microsoft.com/en-us/library/ms742806.aspx)而不是 .NET 事件）但您的问题是请求自定义行为，如本示例所示：[WPF 教程：行为](http://wpftutorial.net/Behaviors.html)

# ios - ios arc 迁移项目 presentViewController 后内存清理

> ID：11072114
> 
> 赞同：1
> 
> 时间：2012-06-17T14:39:11.573
> 
> 标签：ios, memory-management, automatic-ref-counting, presentmodalviewcontroller

在我迁移到 ARC 后使用 Instrument 我意识到从屏幕转换不会清理内存。步骤示例：

1) 主屏幕 A -> 游戏屏幕 B = 内存使用率上升 2) 游戏结束，我从屏幕 B 回到主屏幕 A

对于第 2 步，内存使用率不会降低。我希望在从屏幕上删除屏幕 B 时释放屏幕 B 消耗的内存......我应该怎么做才能确保这种释放发生？

从 A 到 B ：

> GameVC_iPad *game = [[GameVC_iPad alloc]initWithNibName:@"ClassicGameVC_iPad" bundle:nil]; [自我presentViewController：游戏动画：是完成：无]；

使用以下代码从 B 回到 A：

> HomeVC_iPad *home = [[HomeVC_iPad alloc]initWithNibName:@"HomeVC_iPad" bundle:nil]; home.modalTransitionStyle = UIModalTransitionStyleCrossDissolve; [self presentViewController：home 动画：YES 完成：nil]；

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:42:37.953

当你回到A时，你应该做

```
[self dismissModalViewControllerAnimated:YES]; 
```

您当前正在做的是创建一个错误的新视图控制器并再次导航到它，所以这就是正在发生的事情

A 呈现 B，然后你呈现一个新的 A，然后呈现一个新的 B，依此类推......

另请注意，当您导航到新的 viewController 时，iOS 会缓存一些视图数据，因此您在返回之前和之后永远无法实现完美的内存使用，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:43:04.457

不要创建家庭控制器的新副本。用于`dismissViewControllerAnimated:completion:`返回到现有的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:53:20.100

如果您为 b 创建了一个委托类，例如您将其命名为 BDelegate 并使 A 的 ViewController 符合该协议，那么您可以轻松地将一条消息传回给 A，您希望删除 B。因此，例如，您可以创建：

代表：

```
@protocol BDelegate <NSObject>

- (void)dismissViewB;

@end 
```

然后将 A（头文件）的视图控制器更改为：

```
@interface AViewController : UIViewController <BDelegate> 
```

显然在那里使用您的视图控制器的实际名称。在视图控制器 A 的主体中，添加以下方法

```
- (void)dismissViewB {
    [self dismissViewControllerAnimated:YES completion:NULL];
} 
```

差不多好了！现在在您的 B 视图控制器中，无论您要实际删除视图的任何位置，所以我假设您当前拥有的位置

```
HomeVC_iPad *home = [[HomeVC_iPad alloc]initWithNibName:@"HomeVC_iPad" bundle:nil];
home.modalTransitionStyle = UIModalTransitionStyleCrossDissolve; 
[self presentViewController:home animated:YES completion:nil]; 
```

将其替换为

```
[delegate dismissViewB]; 
```

现在，您在视图控制器 B 中所需要的只是一个指向 A 的委托并分配它的实例变量。所以在控制器B的标题中添加类似

```
NSObject<BDelegate> *delegate; 
```

并为其添加适当的@property 并在正文中添加@synthesise。然后，当您在第一篇文章中创建视图控制器 B 时，只需添加

```
game.delegate = self 
```

然后，如果一切顺利，当您点击按钮或执行您需要做的任何事情来删除视图时，视图控制器 A 将为您关闭它:)

希望这可以帮助

# php - 会话和包含的页面

> ID：11072117
> 
> 赞同：0
> 
> 时间：2012-06-17T14:39:37.580
> 
> 标签：php, session, include

我的会话似乎没有保存。我有一个登录页面，将用户 ID 保存为会话。但是当我离开页面并单击另一个页面时，会话不会保存。

这是我的代码。***我有一个名为index*** .php的主页，如下所示：

```
<?php
if(!isset($_SESSION)){
       session_start();
}
?>

<!DOCTYPE html> <HTML> <HEAD> </HEAD> <BODY>

<?php
$page_content = 'startpage.php';

if (isset($_GET['link']) && !empty($_GET['link']) ) {
    $page_content = $_GET['link'];
}

include "$page_content";
include 'menu.php'; 
include 'footer.php';  
?> 
```

要登录，我使用这个名为***admin.php***的页面。在此页面中，我有可以正常工作的登录代码。如果用户写入了正确的用户名和密码，则会发生这种情况：

```
$_SESSION['user_id'] = $user_id;            
print_r($_SESSION); 
```

上面的代码显示了当前会话变量。但是一旦单击另一个页面，变量就会留空。

在 index.php 的底部是包含的***footer.php***页面，它看起来像这样：

```
<?php
if(!isset($_SESSION['user_id']) ){        
    echo "The sessions are not initiated. ";        
} 

if (empty ($_SESSION['user_id']) ) {
    echo "The sessions are empty. ";
}

echo "<a href='index.php?link=admin.php'>Administration</a>";
?> 
```

在此页脚中，我提出了两个 if 问题来检查会话。在我成功登录并单击另一个页面后，如果问题检测到我的会话为空且未启动。

我应该如何让会话正常工作？

也许我应该补充一点，我使用了一个使用 MySql 的租用数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:42:19.637

在您可以使用之前，`$_SESSION`您应该始终从以下内容开始：

```
session_start() 
```

此外，`session_start()`必须始终在页面上输出任何内容之前调用，否则它将无法正常工作

# android - 我可以在 Android 2.1 中使用顶部滑动抽屉吗？

> ID：11072118
> 
> 赞同：1
> 
> 时间：2012-06-17T14:39:45.613
> 
> 标签：android, android-widget, android-animation

我只想要一个适用于 Android 2.1 的 android 顶部的滑动抽屉。[你可以在这个 fiddle](http://jsfiddle.net/2hamed/LstJX/embedded/result/)看到我需要的一个例子。
这可以使用`View Animations`吗？

*注意：[android misc 小部件](http://code.google.com/p/android-misc-widgets/)对我来说没用，因为在这种情况下它们远不能使用！*

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-17T21:27:32.223

你为什么不直接使用滑动抽屉？

[http://developer.android.com/reference/android/widget/SlidingDrawer.html](http://developer.android.com/reference/android/widget/SlidingDrawer.html)

```
<SlidingDrawer
     android:id="@+id/drawer"
     android:layout_width="match_parent"
     android:layout_height="match_parent"

     android:handle="@+id/handle"
     android:content="@+id/content">

     <ImageView
         android:id="@id/handle"
         android:layout_width="88dip"
         android:layout_height="44dip" />

     <GridView
         android:id="@id/content"
         android:layout_width="match_parent"
         android:layout_height="match_parent" />

 </SlidingDrawer> 
```

[滑动抽屉 Google 搜索](https://www.google.co.uk/search?sugexp=chrome,mod=19&sourceid=chrome&ie=UTF-8&q=android%20sliding%20drawer)

![在此处输入图像描述](../Images/10c8ba4ea87217b7b59da4ae7805d4b7.png)

# java - 映射现实世界的城市并计算距离 Java

> ID：11072119
> 
> 赞同：1
> 
> 时间：2012-06-17T14:39:49.450
> 
> 标签：java, map, coordinates, distance

我需要能够在坐标中绘制现实世界城市的地图，然后有一种方法来计算我给它的两个城市之间的距离……最好的方法是什么？只是具有坐标的城市对象，然后找出计算我自己或哈希图或其他东西的距离的公式......另一件事是我将如何计算城市的坐标？我说的是现实世界的城市，所以是的...我有一个想法，要获得城市的纬度和经度，然后在计算距离时以某种方式将其转换为千米...如果有人可以帮助我，我会很高兴！

非常感谢！如果您需要更多信息，请告诉我并添加。

我主要需要的是：基于城市地图的建议以及实施距离计算的线索。我不想检查我在网上制作的每个城市之间的距离，然后把它放进去，因为它接缝要做很多工作，如果我设法找出一种算法，那么将城市添加到游戏中会更快更容易......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T14:42:36.943

首先，您需要将城市名称翻译成地理坐标。[GeoNames](http://www.geonames.org/)是一个大型的地理位置数据库，包括许多其他可用的坐标。

当有两个城市的地理坐标时，您可以使用简单的公式来计算距离，请参阅[如何从两个位置的经纬度中找到距离？](https://stackoverflow.com/questions/1420045)和[大圆距离](http://en.wikipedia.org/wiki/Great-circle_distance)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:41:49.653

一部分是伟大的圆圈距离 - 有很多例子。

查找城市坐标数据集可能会比较棘手。

# css - 带有响应式网站的粘性页脚

> ID：11072121
> 
> 赞同：0
> 
> 时间：2012-06-17T14:40:27.630
> 
> 标签：css, responsive-design, sticky-footer

我已经尝试了几乎所有将粘性页脚应用到我的网站的技术我正在使用**Gumby 响应**式 12 列 960 网格系统，但是我的页面在我的页脚之后总是显示很多额外的空间这里是[问题页面的链接](http://www.coffeedesign.net/derek/demo.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:47:24.113

只有激活 JS 才会出现问题。停用时没有这样的下边距。所以问题是由脚本中某处的指令自愿引起的。

# csv - 从 Wiki 获取数据到 CSV 文件/数据库

> ID：11072124
> 
> 赞同：-3
> 
> 时间：2012-06-17T14:40:58.177
> 
> 标签：csv, web-scraping, data-mining

从维基百科获取一些数据的最简单方法是什么？我想把它作为 CSV 文件。

基本上，我想获得的数据只是名称列表。例如，此页面中所有英国演员的姓名：[http](http://en.wikipedia.org/wiki/List_of_British_actors_and_actresses) ://en.wikipedia.org/wiki/List_of_British_actors_and_actresses （所有来自 AZ 和姓名就足够了）。

这可能吗？而且这只会做一次，所以不需要缓存或类似的东西。只是简单的获取数据执行。但我不知道该怎么做。

PHP、JS、Jquery、JSON 会很好。没有java或类似的东西！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:04:29.233

看看 DBPedia 和 Google Refine。IIRC Google Refine 有一个从 Wikipedia 提取和清理数据的示例（[请参阅视频教程](http://www.youtube.com/watch?v=LovigIDl634&feature=player_embedded)）。DBPedia 已经是 Wikipedia 的数据库副本。

# android - Android：将 Base64Binary 转换为图像

> ID：11072125
> 
> 赞同：0
> 
> 时间：2012-06-17T14:41:20.960
> 
> 标签：android, image, web-services, base64

在我的应用程序中，我使用了一个 web 服务，它返回 base64Binary 格式的图像。我正在使用 ksoap2 与 Web 服务进行交互。

谁能为我提供有关如何接收 base64Binary 然后将其转换为图像的任何帮助？

这是我使用的与 Web 服务交互的代码。

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_GET_CONTROL);
SoapSerializationEnvelope envelope = 
    new SoapSerializationEnvelope(SoapEnvelope.VER11); 
envelope.dotNet = true;
envelope.setOutputSoapObject(request);

HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

 try {
         androidHttpTransport.call(SOAP_ACTION_GET_CONTROL, envelope);
        ..........=envelope.getResponse(); //To get the data. } 
```

如何接收 base64Binary 格式的数据，然后将其转换为 png 图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:58:59.920

正如@MdAbdulGafur 所建议的，以下答案对我有用：

```
decodedIcon[] = null;
byte[] bb = (resposeString).getBytes("utf-8");
decodedIcon = Base64.decodeBase64(bb);

Bitmap bitmap = BitmapFactory.decodeByteArray(decodedIcon, 0, decodedIcon.length);

mImageView.setImageBitmap(bitmap); 
```

来源：[这个问题](https://stackoverflow.com/questions/4888746/android-get-image-from-base64binary-format)。

# javascript - this.async() 在 JavaScript 中做了什么

> ID：11072129
> 
> 赞同：11
> 
> 时间：2012-06-17T14:42:08.047
> 
> 标签：javascript, asynchronous

一直在代码中看到这种模式，但在 google 或 SO 中找不到任何对它的引用，奇怪。有人可以指点我参考 this.async() 函数吗？

```
 var done = this.async();
  // ...
  $.get(path, function(contents) { // or some other function with callback
    // ...
    done(JST[path] = tmpl);
  }) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-02T04:59:21.063

`var done = this.async()`并且`done(blah)`是返回从`$.get`同步函数中的异步调用（例如）获取的值的巧妙技巧。

让我们看一个例子：

```
var getText = function() {
  return "hello";
};
var text = getText(); 
```

这是一个非常简单的函数调用，所以这里没有谜题。但是，如果您需要在 getText() 函数中异步获取文本怎么办？

```
var getText = function() {
  return $.get('<some-url>', function(text) {
    return text;
  });  // ??????
}; 
```

调用`getText()`不会返回您想要获取的文本。它返回 jquery 的 promise 对象。

那么我们如何返回它从调用`getText()`中获得的文本呢？`$.get()`

```
var getText = function() {
  var done = this.async();
  $.get('<some-url>', function(text) {
    done(text);
  });
};
var text = getText();  // you get the expected text 
```

魔术，对吧？

我还不知道`this.async()`call 的内部工作。我不知道是否有一个库提供了该功能，但是您可以看到 Backbone.LayoutManager 使用了这个技巧[https://github.com/tbranyen/backbone.layoutmanager/blob/master/backbone.layoutmanager.js](https://github.com/tbranyen/backbone.layoutmanager/blob/master/backbone.layoutmanager.js)（搜索对于 this.async)。

另外，Tim Branyen（主干 layoutmanager 的作者）在他的视频教程（[http://vimeo.com/32765088](http://vimeo.com/32765088)大约 14:00 - 15:00）中简要介绍了它。在视频中，蒂姆说本·阿尔曼想出了这个把戏。看看这个[https://github.com/cowboy/javascript-sync-async-foreach](https://github.com/cowboy/javascript-sync-async-foreach)

我认为混合异步和同步功能是一个非常巧妙的技巧。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-09T08:56:35.090

`var done = this.async()`是 Grunt 中用于帮助在任务中执行异步功能的模式。

您需要调用`done()`或`done(returnValues)`告诉 Grunt 任务已完成（在您的异步任务链之后）。

阅读更多相关信息： [https ://gruntjs.com/inside-tasks#inside-all-tasks](https://gruntjs.com/inside-tasks#inside-all-tasks)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-17T14:46:25.070

这是一种解决`this`内部回调转义问题的方法。如果没有这个额外的引用，代码将如下所示：

```
$.get(path, function(contents) { // or some other function with callback
  //Wrong! `this` might no longer point to your object
  this.done(JST[path] = tmpl);
}) 
```

很遗憾！`this`内部响应回调与`this`外部不同。事实上，它可以是任何东西，这取决于`$.get`（调用回调使用）决定它是什么。大多数人使用`that`出于相同目的命名的额外参考：

```
var that = this;
// ...
$.get(path, function(contents) { // or some other function with callback
  // ...
  that.async(JST[path] = tmpl);
}) 
```

这种模式似乎也合理且可读。

哦，如果您对这种语法感到好奇：

```
done(JST[path] = tmpl) 
```

这是用作表达式的赋值。赋值的值是右手边，所以这段代码等价于：

```
JST[path] = tmpl;
done(tmpl); 
```

# php - proc_open 被禁用。但不在 php.ini 中

> ID：11072131
> 
> 赞同：1
> 
> 时间：2012-06-17T14:42:16.953
> 
> 标签：php, windows, function

您好，我正在尝试在我的个人 Windows 服务器上使用 php 的 proc_open() 函数，但我收到类似 php 警告的错误：出于安全原因，proc_open 已禁用。

但是在 php.ini 中，我已经注释了 disable_functions 并删除了诸如阻止这些函数之类的任何内容。仍然收到这些错误。

有什么问题？

我正在使用 ZPanel 和 Windows 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:18:54.843

问题出在 Zpanel 的 httpd-vhosts.conf 文件中，实际上我有一个安装了 ZPanel 和 suhosin 的 Windows 2008 服务器，所以在 httpd-vhosts.conf 文件中有 php suhosin.func.blackblist = proc_open，所以我评论了这一行，并从服务中重新启动 APACHE，现在它可以正常工作了。

感谢大家花时间阅读和回答！

# php - 是否可以使用 Javascript 事件增加文本区域的行数？

> ID：11072132
> 
> 赞同：0
> 
> 时间：2012-06-17T14:42:17.287
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [如何使用 jQuery 更改文本区域中的行数](https://stackoverflow.com/questions/4417161/how-to-change-the-number-of-rows-in-the-textarea-using-jquery)

我正在尝试构建一个模拟 Facebook 的评论框，其中 Shift+Enter 会增加 textarea 中的行数，而 Enter 会提交表单。我已经可以正确捕获这两个事件，我只是想知道 JavaScript 是否可以编辑页面的元素属性，因为它已经被加载，或者是否有其他方法可以做到这一点。

编辑：

我的代码块如下所示：

```
$(this).keypress(function(e) {
    if (e.which == 13 && e.shiftKey) {
        this.rows++;
        e.preventDefault();
    };
}); 
```

但这似乎仍然不起作用。同样，我尝试将警报放入此代码块中，因此我确定 Shift+Enter 事件已被捕获，但 textarea 的行数并没有增加。任何想法为什么？：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:45:35.103

```
$("textarea").keydown(function(e) {
  if(e.shiftKey&&e.keyCode==13) {
    this.rows++;
  }
}) 
```

# iphone - 如何动态更改标签文本

> ID：11072136
> 
> 赞同：1
> 
> 时间：2012-06-17T14:42:46.127
> 
> 标签：iphone, objective-c, ipad

我想制作一个“正在下载”的 uilabel，当我调用“更新”方法时，它的标签文本会动态变化：

```
self.checkingArray = [NSArray arrayWithObjects:@"download", @"download.", @"download..", @"download...",
                 nil];

- (void) updating
{
    NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(changeText) userInfo:nil repeats:YES];
}

- (void) changeText
{
    checkLabel.text = [self.checkingArray objectAtIndex:curCheckingState];

    self.curCheckingState++;

    if (self.curCheckingState >= 4) {
    self.curCheckingState = 0;
} 
```

但是标签文字与文字“下载...”保持一致，我想知道如何达到我的目的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:53:07.100

实现这个：

```
- (void) updating
{
    NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(changeText) userInfo:nil repeats:YES];
}

- (void) changeText
{
    static unsigned char state = 0;

    checkLabel.text = [self.checkingArray objectAtIndex:state];

    if(state < 3) state++;
    else state = 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:54:59.713

做这个：

```
self.checkingArray = [NSArray arrayWithObjects:@"download", @"download.", @"download..", @"download...",
             nil];
self.curCheckingState = 0;

- (void) updating
{
 //change timer time interval if needed
 NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(changeText) userInfo:nil repeats:YES];
}

- (void) changeText
{
  checkLabel.text = [self.checkingArray objectAtIndex:self.curCheckingState];

  if (self.curCheckingState == 3) //depending on [array count]-1
  {
    self.curCheckingState = 0;
  }
  else
  {  
    self.curCheckingState++;
  } 
```

}

# silverlight - Windows Phone 7，创建一个可序列化的类

> ID：11072137
> 
> 赞同：2
> 
> 时间：2012-06-17T14:42:46.377
> 
> 标签：silverlight, windows-phone-7, isolatedstorage, serializable

如何使我的自定义类可序列化和“可保存”到 IsolatedStorageSettings 作为键值对中的值？我尝试在课堂上使用 [DataContract]，但 VisualStudio 告诉我找不到它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:59:59.703

使用[添加引用对话框](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.100%29.aspx)添加对 qianfg ( `System.Runtime.Serialization`) 提到的程序集的引用。

然后你可以`using System.Runtime.Serialization;`在你的文件中添加行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T14:49:09.627

将对程序集 System.Runtime.Serialization 的引用添加到您的代码中。

# python - appengine DateTimeProperty auto_now=真正的意外行为

> ID：11072138
> 
> 赞同：1
> 
> 时间：2012-06-17T14:42:56.203
> 
> 标签：python, google-app-engine

我使用 last_touch_date DateTimeProperty 作为使用该`auto_now=True`标志修改应用程序数据存储区中实体的一种方式。当用户发布一个实体时，它会收到它的 last_touch_date 作为未来更新的参考。

但是，当我之后检查实体的 last_touch_date 时，我总是发现在写入后立即读取的该属性之间存在轻微的差异，之后不久。我感觉这是高一致性模型的结果。

这是已知的行为吗？除了我自己管理这个属性之外，还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T04:16:35.507

不，这不是由于 HRD —— auto_now 纯粹在客户端库中实现。写入实体后，属性值与写入数据存储区的内容不对应，而是与上次读取的内容对应。我不确定你会看到一个全新的实体，但它可能仍然与所写的不同。

如果您切换到 NDB，您会发现 auto_now 的行为更加合理。:-)

# java - Toast 和 ProgressDialog 都没有出现

> ID：11072143
> 
> 赞同：2
> 
> 时间：2012-06-17T14:43:25.127
> 
> 标签：java, android, progressdialog, toast

我想做的是向用户提供有关工作进度和在后台执行的计算的信息（如“登录”、“检索文档”、“分析文档”等）。

所发生的只是展示艺术作品，并且只有在所有工作完成之后。我做错了什么，实现这个的正常方法是什么？

下面是说明问题的示例代码。在循环完成之前，既不显示 Toast 也不显示 ProgressDialog：

```
ProgressDialog.show(this, "Working", "Performing calculation");

CharSequence text = "Performing calculation"; 
int duration = Toast.LENGTH_SHORT;
Toast toast = Toast.makeText(this, text, duration); 
toast.show();

for(int i = 0; i < 5000; i++) {
     Log.d("Debug", Integer.toString(i)); 
} 
```

任何正确方向的观点都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:01:57.923

您描述的场景中您有一个后台进程并且您希望向用户更新有关进度的情况应该使用`AsyncTask`您拥有的方法来处理，例如`doInBackground()`和`onProgressUpdate()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:00:57.450

如果您想执行后台操作，您应该考虑使用`AsyncTask`, 或不同的`Thread`方式来完成这项工作。否则，您将阻止 UI 执行那些对最终用户来说很难看的任务。看看这个教程：

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

# python - Python：访问集合的成员

> ID：11072145
> 
> 赞同：6
> 
> 时间：2012-06-17T14:43:27.890
> 
> 标签：python, python-3.x, set

假设我有一组自定义对象，尽管它们的引用不同（ ）`myset`，但它们可能相同。`a == b and a is not b`现在，如果我`add(a)`到集合中，Python 正确地假设`a in myset and b in myset`即使`len(myset) == 1`集合中只有对象。

这很清楚。但是现在是否有可能`a`从集合中提取值，`b`仅使用？假设对象是可变的，我想同时更改它们，忘记了对`a`. 换句话说，我正在寻找`myset[b]`将完全返回集合成员`a`的操作。

在我看来，该类型`set`无法做到这一点（比遍历其所有成员更快）。如果是这样，是否至少有一个有效的解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T14:50:51.427

我认为这不`set`支持在 O(1) 时间内检索项目，但您可以使用 a`dict`代替。

```
d = {}
d[a] = a
retrieved_a = d[b] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T15:08:25.077

也许是这样：

```
(myset - (myset - set([b]))).pop() is a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T14:51:30.227

如果您只有`myset`and `b`，那么从这个角度来看，您将无法访问，`a`因为它不存在。如果您创建多个可变对象并将其中一个添加到其中，`myset`那么当您仅处理`myset`或处理您添加的对象时，其他对象就不是“已知的”。

如果要修改`a`，`b`则需要在某处跟踪这两个对象。

# php - 在 JavaScript 中存储详细数据

> ID：11072146
> 
> 赞同：0
> 
> 时间：2012-06-17T14:43:32.263
> 
> 标签：php, javascript

我有一个父/子表格。例如，父表可能有以下字段

1.  完成的项目数量
2.  你曾经在我们公司工作过吗？（是/否单选按钮）

如果第二个选项的值为“是”，那么我需要填写详细信息表格。例如：“与我司签订的项目名称、待上传的合同副本等”

我有以下逻辑，deatils 表单可能有一个添加按钮来添加 deatils 记录。我想我可以将详细信息数据存储在 JavaScript 数组中吗？我可以存储

```
<input type="file" name="file_to_upload" /> 
```

在数组中？

然后在提交按钮上，将父级和子级详细信息发送到数据库。还有其他方法可以完成任务吗？请看屏幕截图 ![在此处输入图像描述](../Images/14a499ca63c618b50d868465896fe5f5.png)

**我一次只能添加一个详细记录。我的问题是，我应该在哪里临时存储详细列表？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:59:39.780

是的，您可以将详细信息数据存储在 javascript 中，但您必须以某种方式将这些详细信息放入表单中，除非您通过 Ajax 发送它，但我不确定您是否可以使用 javascript 保存图像然后发送它。我认为您也可以尝试使用 html 数组形式，如果您想添加详细信息，则只需使用 javascript 添加另一个输入，我认为它看起来像这样。

```
<input name="detail[0]" type="text"></input>
<input name="detail[1]" type="text"></input> 
```

您可以在此处阅读更多相关信息：[http](http://roshanbh.com.np/2008/08/handling-array-html-form-elements-javascript-php.html) ://roshanbh.com.np/2008/08/handling-array-html-form-elements-javascript-php.html 。

# servlets - 使用 Spring MVC 的 Rss 提要和 apache 磁贴

> ID：11072151
> 
> 赞同：0
> 
> 时间：2012-06-17T14:44:04.790
> 
> 标签：servlets, spring-mvc, rss, apache-tiles

我正在尝试为我的网站创建 RSS 提要。我遵循 mkyong (http://www.mkyong.com/spring-mvc/spring-3-mvc-and-rss-feed-example/) 的教程，这非常有用。根据本教程，我创建了一个模型类和以下类

```
public class CustomRssViewer extends AbstractRssFeedView{

    @Override
protected void buildFeedMetadata(){
        //some code
    }

    @Override
protected List<Item> buildFeedItems(){
        //some code
    }

} 
```

最后是控制器类

```
 @Controller
    public class RssController {

   @RequestMapping(value="/rssfeed", method = RequestMethod.GET)
   public ModelAndView getFeedInRss() {

             //set the RSS content
          ModelAndView mav = new ModelAndView();
          mav.setViewName("rssViewer");
          mav.addObject("feedContent", items);

          return mav;

       }

 } 
```

根据教程， View rssViewer 属于 CustomRssViewer 类，因此我需要在调度程序 servlet 中编写以下代码行：

```
 <bean class="org.springframework.web.servlet.view.BeanNameViewResolver" />

<bean id="rssViewer" class="com.mkyong.common.rss.CustomRssViewer" /> 
```

我的问题是我正在使用 apache 瓷砖。因此无法识别 rssViewer，因为我没有将其增强为瓷砖定义。我真的不知道我该怎么做。例如，我需要编写如下内容：

```
 <definition name="rssViewer" template="?">
     <put-attribute name="title" value=""/>
     <put-attribute name="content" value=""/>
  </definition> 
```

在模板中，我不知道要声明什么以及在 put-attribute 中声明什么。因为直到现在，在模板中我用来声明特定 jsp 存在的方向。像这样的东西：

```
 template="/WEB-INF/pages/mypage.jsp" 
```

而且在视图属性中，我不知道我应该声明什么。

提前感谢您的任何评论或回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:21:00.810

您应该将 ContentNegotiatingViewResolver 与该示例的 BeanNameViewResolver 结合使用。只需将现有 BeanNameViewResolver 的 order 属性声明为 1，并将新 ContentNegotiatingViewResolver 的 order 属性设置为 0。

然后，您应该配置 ContentNegotiatingViewResolver 以使用适当的 RSS 视图，并为 RSS 设置媒体类型。

这是 Spring Docs 中的一个示例：

```
 <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
  <property name="mediaTypes">
    <map>
      <entry key="atom" value="application/atom+xml"/>
      <entry key="html" value="text/html"/>
      <entry key="json" value="application/json"/>
    </map>
  </property>
  <property name="viewResolvers">
    <list>
      <bean class="org.springframework.web.servlet.view.BeanNameViewResolver"/>
      <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
      </bean>
    </list>
  </property>
  <property name="defaultViews">
    <list>
      <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
    </list>
  </property>
</bean> 
```

请注意，他们使用的是 atom，而不是 RSS，但想法是相同的。他们也没有设置顺序（你应该这样做）。

# mysql - 在具有多个数字的列中查找一个数字

> ID：11072153
> 
> 赞同：1
> 
> 时间：2012-06-17T14:44:12.927
> 
> 标签：mysql

以下是： [每个特定的工作日，sql 和 php](https://stackoverflow.com/questions/11072017/every-specific-weekday-sql-and-php/11072092)

我懂了：

```
deals_bookings.everyWeekDay = DAYOFWEEK(CURDATE()) 
```

如果有一个单一的值，比如： 1 ，效果很好。

但是`everyWeekDay`列可以包含更多数字，格式如下：`1,2,3,4`

所以我想`DAYOFWEEK(CURDATE())` 在这个中寻找数字。

如何做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:46:55.310

```
FIND_IN_SET(DAYOFWEEK(CURDATE()), deals_bookings.everyWeekDay) > 0 
```

# wpf - 如何在 Expression Blend 中使用 CollectionViewSource 和设计时数据？

> ID：11072157
> 
> 赞同：4
> 
> 时间：2012-06-17T14:44:49.743
> 
> 标签：wpf, windows-phone-7

我想知道如何使用 CollectionViewSource 在位于 SampleData.xaml 内的 Expression Blend 中显示设计时数据？在更改我的代码以使用 CVS 之前，我使用了 ObservableCollection。我需要对里面的项目进行过滤和排序，因此我更改了代码以使用 CVS。现在我的设计师抱怨无法用适当的结构填充 SampleData 的 NextItems 以显示在 Expression Blend 中。这是我在应用程序中使用的一些代码：

主视图模型.cs

```
class MainViewModel
{
    public MainViewModel()
    {
        AllItems = new ObservableCollection<ItemViewModel>();
        NextItems = new CollectionViewSource();
        NextItems.Source = AllItems;
    }

    public CollectionViewSource NextItems
    {
        get;
        private set;
    }

    public ObservableCollection<ItemViewModel> AllItems
    {
        get;
        private set;
    }

    some functions to fill, filter, sort etc...
} 
```

MainView.xaml：

```
<phone:PhoneApplicationPage
    ... some other stuff ...
    d:DesignWidth="480"
    d:DesignHeight="728"
    d:DataContext="{d:DesignData SampleData/SampleData.xaml}">

    <Grid
        x:Name="LayoutRoot"
        Background="Transparent">
        <controls:Panorama>
            <controls:PanoramaItem>
                <ListBox ItemsSource="{Binding NextItems.View}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <Image Source="{Binding Image}" />
                                <StackPanel>
                                    <TextBlock Text="{Binding FullName}" />
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </controls:PanoramaItem>
        </controls:Panorama>
    </Grid>
</phone:PhoneApplicationPage> 
```

样本数据.xaml

```
<local:MainViewModel
    xmlns:local="clr-namespace:MyAppNamespace"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:swd="clr-namespace:System.Windows.Data;assembly=System.Windows" >
    <local:MainViewModel.AllItems>
        <local:ItemModel
            FullName="Dummy"
            Image="/Images/dummy.png" />
    </local:MainViewModel.AllItems>

    <local:MainViewModel.NextItems>

        How to fill the CollectionViewSource's Source?

    </local:MainViewModel.NextItems>
</local:MainViewModel> 
```

所以我找不到答案的问题是如何在 SampleDate.xaml 中填写 NextItems 的 Source？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T18:45:22.277

如果您想在设计器中显示示例数据，我建议您从代码中完成。有两种方法可以为 Blend Designer 或 VStudio 设计器生成示例数据：

1.  像你一样从一个 XML 文件。
2.  来自**c# 类**-> 最佳选择

最佳选择。

在 WPF、Windows 8 和 WP7.5 及更高版本中，您可以访问一个名为：`Windows.ApplicationModel.DesignMode.DesignModeEnabled`利用它，您可以从视图模型中播种 ObservableCollection：

```
 public class MainViewModel
{
    public MainViewModel()
    {
        AllItems = new ObservableCollection<ItemViewModel>();

        if (DesignMode.DesignModeEnabled)
        {
            AllItems = FakeDataProvider.FakeDataItems;
        }
        NextItems.Source = AllItems;
    }

    public CollectionViewSource NextItems
    {
        get;
        private set;
    }

    public ObservableCollection<ItemViewModel> AllItems
    {
        get;
        private set;
    }
} 
```

这样，如果您更改模型，则不必重新生成 XML 文件，它比 C# 文件更干净一些。FakeDataProvider 是一个静态类，其中存储了所有设计时的假数据。因此，在您的 XAML 中，您唯一需要做的就是将您的**Listbox**绑定到您的 ViewModel 的集合。

# jquery - 在外部 .js 文件中引用 JQuery 函数 - 语法？

> ID：11072160
> 
> 赞同：1
> 
> 时间：2012-06-17T14:45:13.137
> 
> 标签：jquery

我觉得我错过了一些明显的东西，但我对这一切都很陌生，所以请原谅我的求助！

我应该如何调用自己存储在单独的 .js 文件中的 jQuery 函数？我已经开发了我的应用程序的工作原型，但现在正在尝试整理代码，并将各种 jQuery 函数移动到一个单独的文件中，我可以在每个页面上访问它们。但是由于某种原因，一旦我将代码转换为命名函数，无论是在我的 html 文档的头部还是在单独的 .js 文件中，我发现无法访问代码。至关重要的是，我找不到对实际调用函数的正确语法的简单参考！

无论如何，这是相关的代码位：

```
<head>

<link rel="stylesheet" href="jquery.mobilecus-1.1.0.min.css"/>
<script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js"></script>
<script src="js/jquery-1.7.2.js"></script>
<script src="js/jquery.mobile-1.1.0.min.js"></script>
<script src="js/myjquery.js"></script>

</head>
<body onload="onBodyLoad()">

<div data-role="page" id="page1" class="page">

    <script type="text/javascript">
        $(document).ready(function () {
        alert("alert1!");
        $(InitRightBar());   /// This is the problem!
        });
        </script>
...
</div>
...
</body> 
```

以及整个单独的“myjquery.js”文件：

```
$(function() { //ready

function InitRightBar (){
alert("alert2!");
$("#rightbar").live("swipeleft", function(){
                  $.mobile.changePage($("#page2"))
            });
}

}); //end ready 
```

注意：警报 1 总是触发，但警报 2 永远不会触发，即使我将它放在 html 头中的函数。我尝试了多种不同的语法，而不是 "$(InitRightBar());

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:48:26.520

从你的 JS 文件中，只保留这些行

```
 function InitRightBar (){
      alert("alert2!");
       $("#rightbar").live("swipeleft", function(){
              $.mobile.changePage($("#page2"))
        });
    } 
```

并删除第一行和最后一行。还更改以下内容

```
 $(InitRightBar());   /// This is the problem! 
```

到

```
 InitRightBar(); 
```

只要。

# php - PHP：用硬空格替换数字之间的空格的正则表达式

> ID：11072161
> 
> 赞同：2
> 
> 时间：2012-06-17T14:45:24.833
> 
> 标签：php, regex, numbers, space

我想创建一个正则表达式，根据我所在国家/地区的印刷规则，用硬空格替换普通空格。它不应该触及 HTML 标签。

这些示例中的所有空格都应该是难以破解的：

## 数字

```
1 000
10 000
100 000
1 000 000
etc.. 
```

## 日期

```
17\. 6.
17\. 6\. 2012 
```

我想出了：

```
$pattern = '/((\d\.?)\s(\d))(?=[^>]*(<|$))/';
$text = preg_replace($pattern, '$2&nbsp;$3', $text); 
```

它可以做所有这些但是： 17\. 6\. 2012 它不会替换第二个空格，所以结果是 ->

```
17.&nbsp;6\. 2012 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T15:23:31.933

我猜第二个空格不匹配，因为它前面的数字已经被第一个匹配消耗掉了。

我会使用lookbehind而不是匹配它，如下所示：

```
$pattern = '/(?<=\d)(\.?)\s(\d)(?=[^>]*?(<|$))/';
$text = preg_replace($pattern, '$1&nbsp;$2', $text); 
```

点在后视之外，因为后视必须具有指定的长度。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T15:21:33.447

正在吃第`(\d)`一个尾随数字，如果尾随数字只有一个数字，那么在下一次传递时将没有足够的数字来匹配。

例如，以下工作正常：`12 34 56`, `12\. 34\. 56`. 但这些不：`1 2 3`，`1\. 2\. 3`

可以将其`(\d)`移到前瞻中，以避免吃掉它：

```
$pattern = '/((\d\.?)\s)(?=\d[^>]*(<|$))/';
$text = preg_replace($pattern, '$2&nbsp;$3', $text); 
```

将此与@flec 使用后向相结合产生：

```
$pattern = '/(?<=\d)(\.?)\s(?=\d[^>]*(<|$))/';
$text = preg_replace($pattern, '$1&nbsp;', $text); 
```

# mysql - 如何在mysql中计算排名？

> ID：11072172
> 
> 赞同：2
> 
> 时间：2012-06-17T14:47:02.007
> 
> 标签：mysql

我有一个表'student_marks'，有两列'student_id'和'mark'：

```
student_id | marks
-------------------
    1      |  5
    2      |  2
    3      |  5
    4      |  1
    5      |  2 
```

我需要计算与标记对应的等级。上表的预期输出为：

```
student_id | marks  | rank
-------------------------
    1      |  5     | 1
    2      |  2     | 3
    3      |  5     | 1
    4      |  1     | 5
    5      |  2     | 3 
```

由于 student_id 为 1 和 3 的两个学生的分数最高为 5，因此他们被排在第 1 位。对于分数为 2 的学生，排名为 3，因为有两个学生的分数高于这些人。

如上所示，我们如何编写查询来计算排名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:57:16.207

这应该可以工作，尽管它对变量很重。

```
SELECT student_id, mark, rank FROM (
    SELECT t.*,
           @rownum := @rownum + 1 AS realRank,
           @oldRank := IF(mark = @previous,@oldRank,@rownum) AS rank,
           @previous := mark
    FROM student_marks t, 
         (SELECT @rownum := 0) r,
         (SELECT @previous := 100) g,
         (SELECT @oldRank := 0) h
    ORDER BY mark DESC
 ) as t
 ORDER BY student_id; 
```

看看这个小提琴：[http ://sqlfiddle.com/#!2/2c7e5/32/0](http://sqlfiddle.com/#!2/2c7e5/32/0)

# c# - 无法在代码中使用资源字典中定义的资源

> ID：11072174
> 
> 赞同：0
> 
> 时间：2012-06-17T14:47:08.783
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, silverlight-toolkit

我的问题如下：

```
<phone:PhoneApplicationPage.Resources>
    <toolkit:MenuItem Header="edit" x:Key="mnuEdit" x:Name="mnuEdit" Click="mnuEdit_Click" />
</phone:PhoneApplicationPage.Resources> 
```

我正在尝试将此菜单项添加到代码中的上下文菜单中`ctxmnuList.Items.Add(this.Resources["mnuEdit"] as MenuItem);`

但是在运行时我收到`InvalidOperationException`错误消息`Element is already the child of another element.`

请帮助解决这个问题。我正在搜索过去 2 天的解决方案。任何帮助将不胜感激

无论如何谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:39:19.000

这应该对你有用：

```
var mnuEdit = (MenuItem)this.Resources["mnuEdit"];
this.Resources.Remove(mnuEdit);
ctxmnuList.Items.Add(mnuEdit); 
```

# c++ - 无法删除和擦除矢量上的对象指针

> ID：11072179
> 
> 赞同：1
> 
> 时间：2012-06-17T14:48:06.973
> 
> 标签：c++, pointers, object, vector, delete-operator

我需要删除和擦除向量上的对象指针。我看到这个问题[我们应该在擦除向量中的指针之前还是之后删除？](https://stackoverflow.com/questions/3733081/should-we-delete-before-or-after-erase-for-an-pointer-in-the-vector)但删除对象指针后我无法擦除。

如何解决？这是我的代码。

```
#include <iostream>
#include <vector>
using namespace std;

class Foo
{
public:
    class bar
    {
    public:
        Foo &_owner;
        int _id;
        bar(Foo &owner,int id) : _id(id), _owner(owner){}
        void remove()
        {
            for(vector<bar*>::iterator it=_owner.vbar.begin();it<_owner.vbar.end();it++)
            {
                if((*it)->_id == _id)
                {
                    //delete object pointer
                    delete * it;

                    //remove element
                    it = _owner.vbar.erase(it); // error on this line.
                }
            }
        }
    };
    vector<bar*> vbar;
    Foo()
    {
        // add 10 elements
        for(int i=0;i<10;i++)
            vbar.push_back(new bar(*this ,i));

        // remove element at 3
        vbar.at(3)->remove();
    }
};

int main(int argc, char *argv[])
{
    Foo foo;
    return 0;
} 
```

* * *

***[已编辑]*** 我通过从 Bar 类外部删除对象指针（在 Foo 类上删除）通过将不再使用 bar id 添加到 Foo 类上的向量来解决此问题。

```
#include <iostream>
#include <vector>
using namespace std;

class Foo
{
public:
    class bar
    {
    public:
        Foo &_owner;
        int _id;
        bar(Foo &owner,int id) : _id(id), _owner(owner) {}
        void remove()
        {
            _owner.removeId = _id;
            _owner.removeHelper();
        }
    };
    vector<bar*> vbar;
    int removeId;
    Foo()
    {
        removeId = -1;

        // add 10 elements
        for(int i=0; i<10; i++)
            vbar.push_back(new bar(*this ,i));

        // remove element at 3
        vbar.at(3)->remove();
    }
    void removeHelper()
    {
        for(vector<bar*>::iterator it=vbar.begin(); it<vbar.end(); it++)
        {
            if((*it)->_id == removeId)
            {
                //delete object pointer
                delete * it;

                //remove element
                it = vbar.erase(it);
                break;
            }
        }
        removeId = -1;
    }
};

int main(int argc, char *argv[])
{
    Foo foo;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:55:41.963

问题隐藏在这里

```
//delete object pointer
delete * it; 
```

在这种情况下相当于`delete this`.

之后，使用当前对象的任何部分都是未定义的行为。下一轮循环将*不起作用*。

# php - 从 cron 作业运行 PHP 文件？

> ID：11072183
> 
> 赞同：3
> 
> 时间：2012-06-17T14:48:22.103
> 
> 标签：php, ssh, cron, crontab

是否可以设置将执行 php 脚本的 cron 作业？

我有一个 php 文件，我想使用 cron 作业每 15 分钟运行一次。

我的php文件路径：www.sitename.com/runcron.php

完整路径：/var/www/vhosts/sitename/httpdocs/runcron.php

我使用centos服务器。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T14:50:13.527

将此行添加到您的 crontab，并确保 的位置`php`正确（使用 进行检查`which php`）。

```
*/15 * * * * /usr/bin/php /var/www/vhosts/sitename/httpdocs/runcron.php 
```

这很简单;-)

# cakephp - CakePHP mkdir 在生产服务器上不起作用

> ID：11072187
> 
> 赞同：1
> 
> 时间：2012-06-17T14:48:45.047
> 
> 标签：cakephp

`admin_add`我的文件中有以下代码设置`photocategories_controller.php`。这段代码在我家里的 CentOS 开发服务器上运行良好。但是，当我将此文件上传到我的生产服务器时，它不起作用。任何帮助将不胜感激~

```
function admin_add() {
    .... //Other code here

    //On folder add, get its ID to be used as the name of the folder
    $folderID = $this->Photocategory->getLastInsertId();

    //This directory is already created
    $uploadDir = '/img/uploads/photos/';
    $serverRoot = $_SERVER['DOCUMENT_ROOT'];

    //Folder location to be created. When I print it I get
    // /home/xxxxxxx/public_html/img/uploads/photos/16 === 16 being the last inserted ID
    $directoryPath = $serverRoot.$uploadDir.$folderID;

    //I CANNOT FIGURE OUT WHAT AM I DOING WRONG HERE. IT WORKS IN MY DEVELOPMENT
    //SERVER, BUT NOT IN MY PRODUCTION SERVER       
    if(mkdir($directoryPath, 0777)){
        if(mkdir($directoryPath."/thumb", 0777)){
            $this->Session->setFlash('Success', 'default', array('class' => 'alert_success'));
        }else{
            $this->Session->setFlash('Error creating thumb', 'default', array('class' => 'alert_error'));
        }
    }else{
        $this->Session->setFlash('Error Creating Directory', 'default', array('class' => 'alert_error'));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:23:27.257

解决了！我不知道为什么，但我的生产服务器没有像我预期的那样检测到我的服务器根目录。它被`$serverRoot = $_SERVER['DOCUMENT_ROOT'];`视为`public_html`文件夹。但是我需要这个`webroot`文件夹。所以我使用了 CakePHP 自己的`WWW_ROOT`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:08:56.967

为此，使用 API 函数 cakephp 文件夹很有用，使目录的创建更加安全和可控

更多信息在这里

[http://book.cakephp.org/2.0/en/core-utility-libraries/file-folder.html](http://book.cakephp.org/2.0/en/core-utility-libraries/file-folder.html)

# javascript - Javascript：使用 jQuery 的异步函数调用

> ID：11072188
> 
> 赞同：0
> 
> 时间：2012-06-17T14:48:49.743
> 
> 标签：javascript, jquery, asynchronous

我目前正在 jQuery 中尝试异步函数调用并且卡住了。考虑以下示例：

```
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    </head>
    <body>
        <script type="text/javascript">
            f = function() {
                alert("f1");
                var x = 0;
                for (var i = 0; i < 2500000000; i++) {
                    x++;
                }
                alert("f2");
            }

            $.when( f() ).done(alert("done"));
            alert("moving on...");
        </script>
    </body>
</html> 
```

我希望警报消息按以下顺序显示：“f1”、“继续...”、“f2”、“完成” 但是当我在 Chrome 中运行代码时，我得到的是：“f1”， 10 秒内什么也没发生，“f2”、“完成”、“继续……”。这对我来说看起来并不异步。我做错了什么还是这是预期的行为？如果是这样，使用 when 函数和回调的全部意义是什么？我不能只同步调用函数 f 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:51:15.470

```
 $.when(f()) 
```

这会`f()` *立即*调用（就像任何其他函数调用一样），然后将结果传递给`$.when`.

`$.when()`不会神奇地使函数异步；它只能与现有的异步操作（例如，AJAX）一起使用。

在 Javascript 中进行实际多线程的唯一方法是使用 Web Workers。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T15:22:26.427

$.when 采用延迟值或正常值。如果传递了正常值，则立即调用它，如果传递了延迟值，则在操作完成时调用它因为不是javascript中的异步操作，因此它会立即执行。有关在内部传递的正常值时，请参阅下面的示例

```
 $.when({ x: 10 }).then(function (option) {
            alert(option.x);
        }) 
```

# jquery - 以不同的角度转动背景

> ID：11072192
> 
> 赞同：0
> 
> 时间：2012-06-17T14:49:43.137
> 
> 标签：jquery, image, html, css

请帮忙，我无法实现背景如下：

*前*

![在此处输入图像描述](../Images/e3a85568783bcc0b1ca62ffa493a795f.png)

*后*

![在此处输入图像描述](../Images/59c6690078117c1a06927e7b0c465e7f.png)

**最好为不同的屏幕尺寸实现它，而不仅仅是一张图片。**

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:13:26.563

你可以用css渐变背景制作一个大div，我通常使用这个网站来制作它们： http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)，然后使用css3变换旋转那个div元素：[http：/ /davidwalsh.name/css-transform-rotate](http://davidwalsh.name/css-transform-rotate)

# c++ - 移位的目的是什么？

> ID：11072202
> 
> 赞同：2
> 
> 时间：2012-06-17T14:50:52.613
> 
> 标签：c++, c

我在代码中遇到了以下几行

```
unsigned char A = 0xB9; 
unsigned char B = 0x91; 
unsigned char C = A << 3; // shift bits in A three bits to the left. 
unsigned char D = B >> 2; // shift bits in B two bits to the right. 
```

我知道它是移位的，但我不知道它的用途是什么，什么时候应该使用它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-17T15:03:19.143

主要用途是当您根据特定位定义较大项目的某些部分时。

举一个明显的例子，考虑一个 32 位的数字，其中包含一种颜色——红色、绿色和蓝色各 8 位，（可能）其他 8 位用于 alpha（表示该颜色/像素应该有多透明）。在十六进制中，数字看起来像：

```
AARRGGBB 
```

（即，每个组件的两位数或 8 位）。

我们可以把这样的东西分解成类似的组件：

```
red = color & 0xff;
green = (color >> 8) & 0xff;
blue = (color >> 16> & 0xff;
alpha = (color >> 24) & 0xff; 
```

相反，我们可以将组件放在一起：

```
color = (alpha << 24) | (blue << 16) | (green << 8) | red; 
```

在处理硬件时，您通常也会像这样进行位旋转。例如，您可能有一个 16 位寄存器，其中 5 位专用于一个事物，另外 2 个位专用于其他事物，6 位专用于第三个，等等。当/如果您想更改其中之一时，您可以像上面的颜色示例一样：隔离代表一个字段的位，根据需要进行修改，然后将它们与其他位重新组合在一起。

另一个（完全不相关的）应用程序是散列等。在这里，我们通常没有这样的字段，但我们希望一些输入字节产生单个输出，输出的所有位至少在某种程度上受到输入字节的影响。为了实现这一点，大多数最终都会移位位，因此输入的每个字节至少有一些机会影响结果的不同部分。

我要补充一点，尽管相当多的旧代码使用位移来优化乘法或除以 2 的幂，但对于现代硬件和编译器来说，这*通常是浪费时间。*您将在现有代码中看到它，并且应该理解它试图完成的任务——但不要试图模仿它的示例。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-17T15:00:29.697

一个示例是（单色）位图，其中每个像素由一个位表示。
假设你有一个圆圈

```
........
...oo...
..O..O..
.O....O.
.O....O.
..O..O..
...oo...
........ 
```

其中 a`.`由 0 位表示，a`O`由 1 位表示，因此第二行由二进制 00011000 或十进制 24 表示。现在，如果要将圆向右移动 1 个像素，您所做的就是移动位在其表示中向右 1 位。

```
........
....oo..
...O..O.
..O....O
..O....O
...O..O.
....oo..
........ 
```

所以第二行现在是移位后的 00001100，（或十进制 12）。

这是否使它更清楚一点？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-17T14:55:08.927

位移位有几个目的

*   乘以或除以 2 的幂
*   通过查找上溢或下溢来检查是否设置了最高或最低有效位（MSB 或 LSB）
*   弱加密形式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T14:53:57.577

一种用途是除以或乘以 2 的整数幂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T14:54:22.283

位移或位模式用于压缩文件。有些人也将其用于加密。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-17T14:55:22.943

移位有很多用途。在这里可以解释的不仅仅是现实。一个很好的例子是在汇编代码时将值转移到正确的位置。此外，左移 1 与将值乘以 2 相同，只是要快得多。同样，右移与除以 2 相同。

# matlab - 在Matlab中构造一个多阶马尔可夫链式转移矩阵

> ID：11072206
> 
> 赞同：8
> 
> 时间：2012-06-17T14:51:10.917
> 
> 标签：matlab, matrix, transition, probability, markov-chains

6个状态的一阶转移矩阵可以[非常优雅地构造](http://www.eng-tips.com/viewthread.cfm?qid=236532)如下

```
 x = [1 6 1 6 4 4 4 3 1 2 2 3 4 5 4 5 2 6 2 6 2 6]; % the Markov chain
 tm = full(sparse(x(1:end-1),x(2:end),1)) % the transition matrix. 
```

所以这是我的问题，如何优雅地构造一个二阶转换矩阵？我想出的解决方案如下

```
 [si sj] = ndgrid(1:6);
 s2 = [si(:) sj(:)]; % combinations for 2 contiguous states
 tm2 = zeros([numel(si),6]); % initialize transition matrix
 for i = 3:numel(x) % construct transition matrix
   tm2(strmatch(num2str(x(i-2:i-1)),num2str(s2)),x(i))=...
   tm2(strmatch(num2str(x(i-2:i-1)),num2str(s2)),x(i))+1;
 end 
```

是否有单线/双线、无环替代方案？

--

编辑：我尝试将我的解决方案与 Amro 的解决方案与“x=round(5*rand([1,1000])+1);”进行比较

```
 % ted teng's solution
 Elapsed time is 2.225573 seconds.
 % Amro's solution
 Elapsed time is 0.042369 seconds. 
```

有什么不同！仅供参考，[grp2idx](http://staff.science.uva.nl/~shamoun/BAMBAS/IBSC_BAM/EUROBAM_2004/07%20spatial_prediction/scripts_and_data_for_excercises/grp2idx.m)可在线获得。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T16:08:37.927

尝试以下操作：

```
%# sequence of states
x = [1 6 1 6 4 4 4 3 1 2 2 3 4 5 4 5 2 6 2 6 2 6];
N = max(x);

%# extract contiguous sequences of 2 items from the above
bigrams = cellstr(num2str( [x(1:end-2);x(2:end-1)]' ));

%# all possible combinations of two symbols
[X,Y] = ndgrid(1:N,1:N);
xy = cellstr(num2str([X(:),Y(:)]));

%# map bigrams to numbers starting from 1
[g,gn] = grp2idx([xy;bigrams]);
s1 = g(N*N+1:end);

%# items following the bigrams
s2 = x(3:end);

%# transition matrix
tm = full( sparse(s1,s2,1,N*N,N) );
spy(tm) 
```

![转移矩阵](../Images/b585765b0f34cc36c2d2e904a3c9d87e.png)

# c++ - C/C++ 中的可中断命名作用域

> ID：11072212
> 
> 赞同：5
> 
> 时间：2012-06-17T14:51:22.867
> 
> 标签：c++, c, macros, idioms, goto

## 介绍

这个问题来自这个问题：[命名循环成语：危险？](https://stackoverflow.com/questions/11005822/the-named-loop-idiom-dangerous). 对于不想阅读原始问题的人来说，这是关于做这样的事情：

```
named(label1) for(int i = 0 ; i < 10 ; i++) {
    for(int j = 0 ; j < 10 ; j++) {
      if(some_condition)
            break(label1); // exit outer loop
      }
} 
```

这个新问题是关于“命名循环”习语的改进版本。如果你懒得看整篇文章，你可以直接到这篇文章的“示例”部分清楚地理解我在说什么。

## 设计缺陷

不幸的是，这个问题很快就被关闭了（后来又被重新打开），因为它更像是一个利弊辩论，而不是一个纯粹的技术问题。它似乎不适合 SO Q&A 格式。此外，我提供的代码有几个缺陷：

*   关键字`break`由宏重新定义
*   宏是用小写字母编写的
*   它使一些可怕的东西可以编译（至少使用 MSVC）：

    ```
    int foo() {

       named(label1) for(int i = 0 ; i < 10; i++)
       {
          if(some_condition)
          {
              break(label1);  // here it's ok, the behavior is obvious
          }   
       }

       break(label1); // it compiles fine without warning... but the behavior is pretty obscur!

    } 
    ```

*   它可能会破坏一些好看的代码。例如，由于范围问题，以下内容无法编译。

    ```
    int foo() {

    named(label1)  for(int i = 0 ; i < 10 ; i++)
           named(label2)  for(int j = 0 ; j < 10 ; j++)
            if(i*j<15)
                cout << i*j << endl;
            else
                break(label2);
     } 
    ```

## 更安全的实施

我试图解决所有这些问题，以获得**命名循环的***安全*版本。更一般地说，它也可以称为**可破坏作用域**，因为它可以用于提前退出任何作用域，而不仅仅是循环。

 ****这是两个宏`NAMED`和的定义`BREAK`：

```
 #define NAMED(bn)   if(const bool _YOU_CANNOT_USE_NAMED_BREAK_IF_YOU_ARE_OUTSIDE_##bn##_ = true)\
                            goto _named_loop_identifier__##bn##_;\
                        else\
                            _break_the_loop_labelled_##bn##_:\
                            if(true)\
                                {}\
                            else\
                                if(! _YOU_CANNOT_USE_NAMED_BREAK_IF_YOU_ARE_OUTSIDE_##bn##_)\
                                    goto _break_the_loop_labelled_##bn##_;\
                                else\
                                    _named_loop_identifier__##bn##_:\

    #define BREAK(bn) if(!_YOU_CANNOT_USE_NAMED_BREAK_IF_YOU_ARE_OUTSIDE_##bn##_){} \
                        else goto _break_the_loop_labelled_##bn##_ 
```

它看起来又丑又麻烦，因为它还避免了一些可能由 MSVC 或 GCC 生成的警告，例如“未使用的变量”、“未引用的标签”或“建议显式大括号”。此外，如果使用不正确，它不应该编译，在这种情况下，错误消息将是可以理解的。例如 ：

```
 NAMED(loop1) for(int i = 0 ; i < 10; i++) {
        NAMED(loop2) for(int j = 0 ; j < i ; j++) {
            cout << i << "," << j << endl;
            if(j == 5) {
                BREAK(loop1);   // this one is okay, we exit the outer loop
            }
        }
        BREAK(loop2); // we're outside loop2, this is an error
    } 
```

前面的代码将无法编译，并且第二个代码的编译器错误消息`BREAK`：'_YOU_CANNOT_USE_NAMED_BREAK_IF_YOU_ARE_OUTSIDE_loop2_`，非常明确。

## 例子

在问我的问题之前，我提供了两个例子来说明这些结构的（相对）有用性：

`break`外循环：

```
 NAMED(myloop) for(int i = 0 ; i < rows; i++) {
         for(int j = 0 ; j < cols ; j++) {
            if(some_condition) {
                 BREAK(myloop);
            }
         }
     } 
```

退出特定范围：

```
NAMED(myscope1) {
    cout<< "a";
    NAMED(myscope2)
    {
        cout << "b";
        NAMED(myscope3)
        {
            cout << "c";
            BREAK(myscope2);
            cout << "d";
        }
        cout << "e";
    }
    cout <<"f";
} 
```

此代码打印：`abcf`。

## 我的问题

在定义我的问题是什么之前，我必须先定义它不是什么，因为我不想看到我的话题在 10 分钟内结束。

**不是**“这是个好主意吗？”，也不是“你觉得怎么样？” 甚至“有用吗？”，因为 stackoverflow 似乎不是一个讨论场所。无论如何，我已经知道答案：“宏是邪恶的”、“Goto 是邪恶的”和“改用 lambdas”。

相反，我的问题是关于编程错误的技术正确性和鲁棒性。我希望这个结构尽可能安全。

*   **用户是否有可能滥用它并且仍然能够编译？** 我试图修复原始实现的明显问题，但 C++ 非常复杂，也许我错过了什么？

*   **它会默默地破坏一些好看的代码吗？**这是我主要关心的问题。它会干扰其他 C++ 功能（异常处理、析构函数调用、其他条件语句或其他任何东西......）吗？

我的目标是证明这种结构*本质*上并不危险。我已经知道在实际代码中使用它是一个非常糟糕的主意，因为其他程序员可能不清楚它，但是在个人项目中使用它足够安全吗？

编辑：布尔变量现在是`const`（感谢 Jens Gustedt）。稍后我将尝试将 s 替换为`if`s`for`以检查它是否可以在像这样使用时消除虚假警告：

```
if(true)
     BREAK(label); 
```

EDIT2：正如 JensGustedt 所注意到的，`if`C（仅限 C++）中不允许在语句中声明变量。用循环替换它的另一个原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:36:22.063

我假设您已经对此进行了测试，但是......`bool`您声明的变量`NAMED(bn)`在同一块中是否仍然可用，它声明的 if 语句是否存在？（：除非是这样，否则您的成语将无法使用。:)

我可以看到这是安全的：

```
{
    NAMED(one) { ... }
}
BREAK(one); 
```

编译器会大惊小怪就`BREAK(nb);`行

但这看起来仍然不安全：

```
{
    NAMED(bn) { ... }
    BREAK(bn);
} 
```

从某种意义上说，编译器仍然可以接受定义的变量而不是大惊小怪，这是不安全的。但它可能会形成一个无限循环，从而默默地破坏你的程序。

-杰西

PS：它不会干扰，`try..finally`因为`finally`无论您如何退出该`try`块，该块被定义为执行。因此，只要您不**试图**避免`finally`阻塞，就可以了。

P(PS)S：我看到的与其他构造的唯一真正奇怪的交互是：

```
#if DEBUG
    NAMED(bn)
#endif
    while(true)
    {
        BREAK(BN);
    } 
```

这是病态的！;-D 这将在 DEBUG 中正常编译，但在 RELEASE 中会出现编译器错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:31:24.497

我真的无法回答 C++ 方面的问题，但既然你也将它标记为 C ...

通常对这样的事情使用`if`/`else`构造并不是一个好主意，因为你总能找到一个好意的 C 编译器，它会为奇怪的`else`匹配和类似的事情找到适当的警告。

我通常对[P99](http://p99.gforge.inria.fr/)`for`使用类似的构造。他们避免悬空（或关于它的虚假警告）。也是C 中唯一可以按您需要的方式放置局部变量的地方，它们不允许在 C++ 中使用，也不允许在 C++ 中使用。`else``for``if``while`

在“安全”方面，您可能应该声明变量`register bool const`而不仅仅是`bool`. 因此，没有人可以尝试更改它，甚至可以背着它的地址更改它。

`for`但是对于您使用它的特定目的，我并不太喜欢`goto`。你真正在做的是展开堆栈。在 C 语言中，有一个结构可以正确地做到这一点，即`setjmp`/ `longjmp`。在 C++ 中，它可能是`try`/ `catch`。****

# jquery - 模糊功能而不是 mouseup 功能无法按预期工作

> ID：11072214
> 
> 赞同：0
> 
> 时间：2012-06-17T14:51:34.080
> 
> 标签：jquery

我有[演示表](http://www.centerwow.com/stackoverflow/shape/TableEdit2.php)，我可以单击单元格（td 标记），我可以更改 it.direct php 数据库上的值。为此，我需要包含两个**标签。1 - 跨度。2 - 输入。** 像下面这样。

```
<td class='Name'>
 <span id="spanName1" class="text" style="display: inline;"> Somevalue  </span>
 <input type="text" value="Somevalue" class="edittd" id="inputName1" style="display: none; ">   
</td> 
```

为了控制我在 jquery 中使用的单元格内的数据。**mouseup 功能。** mouseup 有效，但也有麻烦。我需要用模糊功能替换它，但是当我尝试用模糊替换 mouseup 时，程序不起作用，因为当我单击单元格时，我可以输入输入标签并且可以更改值，但我没有成功通过单击表格的外侧离开标签/字段，这允许我更新数据库您可以在 [此处看到带有模糊的演示](http://www.centerwow.com/stackoverflow/shape/TableEdit3.php)。你建议我怎么做？

```
$(".edittd").mouseup(function() {
        return false;
    });
  //*************
    $(document).mouseup(function() {
        $('#span' + COLUME + ROW).show();
        $('#input'+ COLUME + ROW ).hide();
        VAL = $("#input" + COLUME + ROW).val();
        $("#span" + COLUME + ROW).html(VAL);

        if(STATUS != VAL){
            //******ajax code
                 //dataString = $.trim(this.value);
                      $.ajax({
                        type: "POST",
                         dataType: 'html',
                         url: "./public/php/ajax.php",
                         data: 'COLUME='+COLUME+'&ROW='+ROW+'&VAL='+VAL, //{"dataString": dataString}
                             cache: false,
                             success: function(data)
                             {
                                $("#statuS").html(data);
                                }
                             });
                      //******end ajax
                      $('#statuS').removeClass('statuSnoChange')
                        .addClass('statuSChange');
                         $('#statuS').html('THERE IS CHANGE');
                         $('#tables').load('TableEdit2.php');
                 }
                 else
                 {
                 //alert(DATASTRING+'status not true');
                 }
        });//End mouseup function 
```

我将其更改为：

```
$(document).ready(function()
{
    var COLUMES,COLUME,VALUE,VAL,ROWS,ROW,STATUS,DATASTRING;
    $('td').click(function() {
        COLUME = $(this).attr('class');   
      });
//****************
    $('tr').click(function() {
        ROW = $(this).attr('id');
        $('#display_Colume_Raw').html(COLUME+ROW);
        $('#span' + COLUME + ROW).hide();
        $('#input'+ COLUME + ROW ).show();
      STATUS = $("#input" + COLUME + ROW).val();
    });
  //******************** 
    $(document).blur(function() {
        $('#span' + COLUME + ROW).show();
        $('#input'+ COLUME + ROW ).hide();
        VAL = $("#input" + COLUME + ROW).val();
        $("#span" + COLUME + ROW).html(VAL);

        if(STATUS != VAL){
            //******ajax code
                 //dataString = $.trim(this.value);
                      $.ajax({
                        type: "POST",
                         dataType: 'html',
                         url: "./public/php/ajax.php",
                         data: 'COLUME='+COLUME+'&ROW='+ROW+'&VAL='+VAL, //{"dataString": dataString}
                             cache: false,
                             success: function(data)
                             {
                                $("#statuS").html(data);
                                }
                             });
                      //******end ajax
                      $('#statuS').removeClass('statuSnoChange')
                        .addClass('statuSChange');
                         $('#statuS').html('THERE IS CHANGE');
                         $('#tables').load('TableEdit2.php');
                 }
                 else
                 {
                 //alert(DATASTRING+'status not true');
                 }
        });//End mouseup function
        $('#save').click (function(){
            var input1,input2,input3,input4="";
                input1 = $('#input1').attr('value');
                input2 = $('#input2').attr('value');
                input3 = $('#input3').attr('value');
                input4 = $('#input4').attr('value');
                $.ajax({
                    type: "POST",
                    url: "./public/php/ajax.php",
                    data: "input1="+ input1 +"&input2="+ input2 +"&input3="+ input3 +"&input4="+ input4,
                    success: function(data){
                        $("#statuS").html(data);
                        $('#tbl').hide(function(){$('div.success').fadeIn();});
                        $('#tables').load('TableEdit2.php');
                    }
                });
        });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:13:06.393

当用户在文档周围单击时，不会触发 blur 事件。

要查看事件何时触发，您可以使用 javascript 控制台附加日志记录功能。将这些粘贴到您的控制台中：

```
$(document).mouseup(function(){console.log('document.mouseup()')});
$(document).blur(function(){console.log('document.blur()')}); 
```

然后单击并查看模糊不会触发，除非您整个文档失去焦点（而不是所有浏览器）。

mouseup 造成了什么样的麻烦？

# mysql - 获取 MYSQL 中唯一记录的计数

> ID：11072217
> 
> 赞同：1
> 
> 时间：2012-06-17T14:52:39.220
> 
> 标签：mysql

我在 MYSQL 中有一个表，其中包含字段、id、大小和颜色。数据的一个例子是

```
 ID      Size     Color
    0       34       Red
    1       34       Blue
    3       38       Green
    4       36       Yellow
    5       38       Red
    6       34       Red 
```

mysql中有没有办法获取表中所有唯一记录的数量？IE 有 2 条大小为 34 和红色的记录。我想提取表中所有唯一组合的计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:57:49.820

要获得每个组合使用的计数

```
select size, color, count(*) from table group by size, color 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:55:16.673

认为所有 id 都是唯一的。尝试

```
Select size,color,count(*) from table group by size,color 
```

# php - php 5.3 中的后期静态绑定

> ID：11072224
> 
> 赞同：3
> 
> 时间：2012-06-17T14:53:29.360
> 
> 标签：php, php-5.3

请通过下面给出的代码，它来自 php 手册

```
<?php
class A {
    private function foo() {
        echo "success!\n";
    }
    public function test() {
        $this->foo();
        static::foo();
    }
}

class B extends A {
   /* foo() will be copied to B, hence its scope will still be A and
    * the call be successful */
}

class C extends A {
    private function foo() {
        /* original method is replaced; the scope of the new one is C */
    }
}

$b = new B();
$b->test();
$c = new C();
$c->test();   //fails
?> 
```

谁能解释这里到底发生了什么？

为什么 foo() 会被复制到 B ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T16:09:24.417

我现在记得为什么后期静态绑定很有用。不幸的是，php.net 的例子解释得不好。请参阅此（修改后的）示例：

```
<?php
class A {
    private function foo() {
        echo __CLASS__;
    }
    public function test() {
        $this->foo();
        static::foo();
    }
}

class B extends A {
    public function foo()
    {
        echo __CLASS__;
    }
}

$b = new B();
$b->test();
?> 
```

如果你运行上面的代码，你会发现它可以工作，你会得到`AB`. 为什么？

*   它之所以有效，是因为它`test()`是一个公共的getter `foo()`，所以无论你`test()`是从一个类型`A`的对象还是从一个`B`继承自的类型的对象调用都没有关系`A`，因为`test()`总是可以访问它所在的类的私有成员。定义。
*   在第一种情况下`$this->foo();`总是会调用`A::foo()`，因为绑定是在本地完成的，在`A`'s 范围内，这有时是非常不可取的。看到这个评论：[http ://www.php.net/manual/en/language.oop5.late-static-bindings.php#83502](http://www.php.net/manual/en/language.oop5.late-static-bindings.php#83502)
*   在第二种情况下，`static::foo();`指示解释器确定`$b`'s 类型并查看在哪个类中尝试查找`foo()`。在这种情况下，被`B::foo()`视为.`A::foo()``B::foo()``A::foo()`
*   尝试标记`B::foo()`为私有并运行我提供的示例，看看会发生什么。我认为这个测试和我上面的咆哮会为你澄清这个问题；）

另外，我接受对以上几点的任何评论，因为我已经有一段时间没有使用 PHP 了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T15:37:38.500

`foo`本身并没有复制到 B （它是继承的但不可见；请参阅下面的 Gordon 评论）。B 继承`A->foo`，它调用`A->test`. 为了演示，看看当你`echo __CLASS__`从内部`test`和`foo`（并删除`static::foo()`导致错误的调用）时会发生什么：

```
class A {
    private function foo() {
        echo __CLASS__."->foo\n";
        echo "success!\n";
    }
    public function test() {
        echo __CLASS__."->test\n";
        $this->foo();
    }
} 
```

输出：

```
A->test
A->foo
success!
A->test
A->foo
success! 
```

这是继承的基础之一，因为它与[信息隐藏](http://en.wikipedia.org/wiki/Information_hiding)/[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)有关。这使您可以执行以下操作：

```
class ListOfThings {
    // internal structure (top secret!)
    private $_list = array();

    // add item to list
    public function add($item) {
        $this->_list[] = $item;
    }

    // return number of items in list
    public function count() {
        return count($this->_list);
    }
}

class ListOfStates extends ListOfThings {

    // do we have all 50 states?
    public function allStatesListed() {
        return $this->count() === 50;
    }

    // try to access internal structure of ListOfThings
    public function accessInternalStructure() {
        sort($this->_list);
    }
}

$states = new ListOfStates;
$states->add('ME');
$states->add('NH');
$states->add('VT');
$states->add('RI');
$states->add('CT');
var_dump($states->count());
var_dump($states->allStatesListed());
$states->accessInternalStructure(); 
```

输出：

```
int(5)
bool(false)

Warning: sort() expects parameter 1 to be array, null given... 
```

如您所见，`ListOfStates`能够使用 的所有公共功能`ListOfThings`，即使这些功能都依赖于私有变量`$_list`。也就是说，`ListOfStates`不能直接操纵`$_list`；它只能`$_list`通过中定义的公共功能间接起作用`ListOfThings`。

查看PHP 文档中的[Visibility页面以获取有关此类内容的更多详细信息。](http://www.php.net/manual/en/language.oop5.visibility.php)

# java - 调用另一个 JAR 的 JAR

> ID：11072230
> 
> 赞同：0
> 
> 时间：2012-06-17T14:54:56.760
> 
> 标签：java, path

我在使用 Java 中的某些命令时遇到了一些问题。我创建了一个需要另一个 JAR 来运行我的应用程序的 JAR。我创建了一个批处理文件，只需单击一下即可运行它：

```
java -cp Projecto.jar;.\jcommon-1.0.17.jar;.\jfreechart-1.0.14.jar Geral.Client  
pause 
```

如何修改它以使 Linux 和 Mac OS 可运行？因为命令：

```
java -cp Projecto.jar;.\jcommon-1.0.17.jar;.\jfreechart-1.0.14.jar Geral.Client 
```

据我尝试在 Linux 中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:59:24.333

基于 Unix 的操作系统中的路径分隔符是冒号`:`，而不是分号`;`。此外，基于 Unix 的操作系统中的文件分隔符是正斜杠`/`，而不是反斜杠`\`。

所以这应该这样做：

```
java -cp Projecto.jar:./jcommon-1.0.17.jar:./jfreechart-1.0.14.jar Geral.Client 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T15:00:36.957

尝试将斜杠：更改`\`为`/`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T15:02:02.833

您需要将 all `semicolons (;)`to`colon (:)`和 all `back-slash (\)`to替换为`forward-slash(/)`

# javascript - 如何生成 Javascript 生成的 HTML 的 PDF？

> ID：11072235
> 
> 赞同：2
> 
> 时间：2012-06-17T14:55:13.627
> 
> 标签：javascript, html, css, pdf, joomla

我试图能够允许用户动态生成内容，并将该信息放在 a 中，然后允许将特定信息导出为 pdf。我已经使用[Web2PDF](http://www.web2pdfconvert.com/)扩展在本地启动并运行了 Joomla（使用适当的 mySQL 和 ANT），但是如何让那些在我的域（由 Dreamhost 托管）上运行。您是否有其他方法可以推荐。内容由 JS 和 JQuery 生成，并使用 CSS 和 HTML 进行格式化。

[在这里](http://specialorange.org/resume)，是我想允许下载/导出 pdf 的页面。

其他注意事项：

Web2PDF 在整个内容上生成 PDF，（提取整个页面的 HTML，而不仅仅是特定的`<div>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:14:37.470

PDFlib 是门票。您需要在您的 Dreamhost 服务器上进行设置：

[http://wiki.dreamhost.com/PDFlib](http://wiki.dreamhost.com/PDFlib)

然后您需要设置一个 AJAX 脚本来将动态生成的内容传递给一个返回 pdf 文件的 PHP 脚本。

这是 PHP 脚本： [http ://www.webmonkey.com/2010/02/generate_pdfs_dynamically_with_php/](http://www.webmonkey.com/2010/02/generate_pdfs_dynamically_with_php/)

棘手的部分是使用 ajax 下载 PDF。您最好在服务器上生成 PDF，然后动态地向用户显示“单击此处获取 pdf”链接，将他们带到您生成的 pdf 文件。

# javascript - 如何使用 jQuery 更改 SVG 元素属性？

> ID：11072236
> 
> 赞同：2
> 
> 时间：2012-06-17T14:55:15.013
> 
> 标签：javascript, jquery, jquery-selectors, svg

我正在使用 SVG 来显示一些动画。但是作为 SVG 的新手，我只是使用久经考验的 jQuery 动画来为 SVG 元素制作动画，例如矩形和圆形等。

现在这不是[jQuery Selector + SVG Incompatible 的副本吗？](https://stackoverflow.com/questions/3294553/jquery-selector-svg-incompatible)..我想改变一个 `<rect class="my-class-1 box" ...></rect>` 类 `<rect class="my-class-2 box" ....></rect>`

我已经尝试过 addClass() 和 removeClass() 的普通 jquery 方法。由于它们在 HTML 和 SVG 的 DOM 结构上的差异，这不起作用。

所以我使用[http://keith-wood.name/svgRef.html](http://keith-wood.name/svgRef.html)插件来进行 SVG 元素访问和动画。

卡在岩石和坚硬的地方之间

感谢帮助Thnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:23:59.407

要使用 jQuery svg 插件完成此操作，请为 rect 提供一些自定义 ID 属性，并将其用作选择器。确保你也包含 jquery.svgdom.js。

```
svgCanvas.polygon(group, getPoints(), { customID:'123', stroke: 'orange', strokeWidth: 2, class: 'my-class-1' }); 
```

现在要更改类，请使用此选择器：

```
var selector = 'svg polygon[customID="123"]';
$(selector).removeClass('my-class-1').addClass('my-class-2'); 
```

# intellij-idea - IntelliJ：编写 XML 时插入符号的 Spacig（Spring Beans）

> ID：11072242
> 
> 赞同：1
> 
> 时间：2012-06-17T14:56:12.727
> 
> 标签：intellij-idea

例如，当我编写 Spring Bean 时，我经常有没有子元素的空元素，只有属性。

IDEA提供间距的默认方式是图片上的第一个（带箭头），我不喜欢。我更喜欢第二个，我只能手动更改。如何设置 IDEA 自动执行此操作？

![在此处输入图像描述](../Images/ed37266991e2c00a54b4ed0a27988ecf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:02:26.053

*   输入*文件*->*设置*（或点击`Ctrl`+ `Alt`+ `S`）
*   浏览到*代码样式*-> *XML*
*   单击*其他*选项卡。取消选中***对齐属性***复选框

# c++ - c++一个变量的多个定义

> ID：11072244
> 
> 赞同：23
> 
> 时间：2012-06-17T14:56:36.797
> 
> 标签：c++, compiler-errors

我有 4 个文件（2 个标题和 2 个代码文件）。文件A.cpp、文件A.h、文件B.cpp、文件B.h

文件A.cpp：

```
#include "FileA.h"

int main()
{
    hello();
    return 0;
}

void hello()
{
    //code here
} 
```

文件AH：

```
#ifndef FILEA_H_
#define FILEA_H_
#include "FileB.h"
void hello();

#endif /* FILEA_H_ */ 
```

文件B.cpp：

```
#include "FileB.h"

void world()
{
    //more code;
} 
```

文件B.h：

```
#ifndef FILEB_H_
#define FILEB_H_

int wat;
void world();

#endif /* FILEB_H_ */ 
```

当我尝试编译（使用eclipse）时，我得到“'wat'的多个定义”而且我不知道为什么，它似乎应该可以正常工作。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-17T15:01:43.090

我不打算包含所有细节，但是您`wat`在编译 uint 中定义了一个全局变量，两次。

要修复，请使用以下命令：

**文件B.h**

```
extern int wat; 
```

**文件B.cpp**

```
int wat = 0; 
```

这个 ( `extern`) 告诉编译器该变量`wat`存在*于某个地方*，并且它需要自己找到它（在这种情况下，它位于`FileB.cpp`）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-17T15:02:07.383

不要在标头中声明变量。`#include`从字面上将文件的内容复制并粘贴到另一个文件中（也就是说，任何执行此操作的文件`#include "FileB.h"`都会将 FileB.h 的内容复制到其中，这意味着`int wat`在执行的每个文件中都定义了`#include "FileB.h"`）。

如果`wat`要从 FileA.cpp 访问，并且在 FileB.cpp 中声明，则可以将其标记为`extern`在 FileA.cpp 中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-17T15:01:44.427

我现在找到了答案（我想一个接一个地查看文件会有所帮助）问题是编译器创建了一个具有 wat 定义的 FileB.o，然后它尝试使用 FileA.cpp 编译 FilB.o，而FileA.h 包含 FileB.h，它现在也有 wat 的定义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T15:01:23.517

您获得多个定义，因为`wat`在文件范围内声明并且 get 在 2 个源文件中可见两次。

相反，声明变量`extern`并将其定义在**一个**源文件中。

```
extern int wat;  // In FileB.h

int wat;   // In FileB.cpp 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T15:00:52.573

那个 wat 变量声明是一个应该属于 cpp 文件的定义。就好像您将函数体放入标题中一样。

您需要将 extern 放在 wat 声明之前，并将没有 extern 的当前声明复制到其中一个 cpp 文件中。

# xcode - 我可以虚拟化我的 Mac OS 系统吗？

> ID：11072245
> 
> 赞同：0
> 
> 时间：2012-06-17T14:56:50.577
> 
> 标签：xcode, macos, virtualization, virtualbox

**注意：我理解这不是严格意义上的“开发”，但在我链接到社区下方的早期线程中，我认为关于如何在非 Apple 平台上为 iOS 开发的问题是可以接受的。**

我有一台不再经常使用的 2009 (Intel) Apple MacBook。但是，我想继续涉足使用 Xcode 进行 iOS 开发。我是否可以将整个系统移动到 VirtualBox/VMWare 映像中并在 VirtualBox/VMWare 中的 Linux 下运行它？

我已经检查了[早期的](https://stackoverflow.com/questions/5635915/develop-iphone-applications-on-windows-with-virtualbox-etc) [答案](https://stackoverflow.com/questions/2795768/developing-for-mac-without-a-mac)，但我不再拥有 MacBook 附带的安装介质，这些早期答案所依赖的安装介质。我特别想知道通过将整个系统转移到虚拟磁盘映像中它是否会继续工作。

澄清一下，我理解这可能违反了 EULA。我为这台计算机和操作系统付费，并且很乐意在另一台机器上使用操作系统，同时让这台特殊的笔记本电脑在壁橱里聚集灰尘。

谢谢！〜l

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:05:37.447

我不认为它有效。Mac OS 仍然需要 ROM 才能启动。但是您可以修补 VMware，并且可以下载许多 MacOS VMware 映像。但遗憾的是，它在 Linux 上对我不起作用。

# iphone - 视图之间的基本导航不起作用

> ID：11072246
> 
> 赞同：0
> 
> 时间：2012-06-17T14:57:20.763
> 
> 标签：iphone, objective-c, ios, navigation

我在视图之间的基本导航方面遇到了一些麻烦。我有一个带有两个视图的 tabBarController。在第一个视图控制器中，当调用响应按钮按下的方法时，self.navigationController 为空。调试器逐步执行代码，但模拟器中的屏幕没有改变。我的 viewController 按钮响应方法中有以下代码：

```
FooViewController *fvc = [[FooViewController alloc] initWithNibName:@"FooViewController" bundle:nil];
[self.navigationController pushViewController:fvc animated=YES]; 
```

在 MyAppDelegate.m 实现的 didFinishLaunchWithOptions 方法中，我正在创建一个 UINavigationController 并使用 UIViewController 的实例将其初始化为根视图控制器，代码如下：

```
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController: viewController1];
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects: viewController1, viewController2, nil];
self.window.rootViewController = self.tabBarController; 
```

我目前的理解是 initWithRootViewController 变量应该将 UINavigationController 对象绑定到 viewController1。我究竟做错了什么？！？任何想法、建议或智慧的珍珠都将不胜感激。

非常感谢，

-芒克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:59:23.150

是`initWithRootViewController`的确实绑定了导航，但是在标签栏中你应该设置`UINavigationController`而不是`ViewController`本身

更改此行

```
self.tabBarController.viewControllers = [NSArray arrayWithObjects: viewController1, viewController2, nil]; 
```

至

```
self.tabBarController.viewControllers = [NSArray arrayWithObjects: nav, viewController2, nil]; 
```

此外，您似乎在这里有一个错字

```
[self.navigationController pushViewController:fvc animated=YES]; 
```

将其更改为

```
[self.navigationController pushViewController:fvc animated:YES]; 
```

# html - CSS 不导入。

> ID：11072252
> 
> 赞同：1
> 
> 时间：2012-06-17T14:58:23.243
> 
> 标签：html, css

为什么我的 style.css 没有对 index.html 进行更改？这两个文件都完美验证。
文件夹设置：site > index.html, style.css。

索引.html

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>new site</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script src="js/scripts.js"></script>
</head>

<body>
<div id="container">

        <header>
            <div id="status">
                <a href="#"><img src="img/status.png" alt="Currently available for work" /></a>
            </div><!-- end status -->
            <nav>
                <ul>
                    <li><a href="#">Work</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
            <h1><a href="#"><img src="img/banner.png" alt="Return to the homepage" /></a></h1>
            <div id="blurb">
                <p>blah blah blah lorem ipsum blah blah</p>
            </div><!-- end blurb -->
        </header>

        <div class="services">
            <ul>
                <li><h2>Design 1</h2><p>Nulla et diam risus. Praesent vestibulum augue non purus tincidunt placerat. Sed in orci leo. Duis dignissim nibh vitae lacus placerat et posuere</p></li>
                <li><h2>Design 2</h2><p>Nulla et diam risus. Praesent vestibulum augue non purus tincidunt placerat. Sed in orci leo. Duis dignissim nibh vitae lacus placerat et posuere</p></li>
                <li><h2>Design 3</h2><p>Nulla et diam risus. Praesent vestibulum augue non purus tincidunt placerat. Sed in orci leo. Duis dignissim nibh vitae lacus placerat et posuere</p></li>
                <li><h2>Design 4</h2><p>Nulla et diam risus. Praesent vestibulum augue non purus tincidunt placerat. Sed in orci leo. Duis dignissim nibh vitae lacus placerat et posuere</p></li>
            </ul>
        </div><!-- end services -->

        <div class="recent">
            <div id="recent-work">

            </div><!-- end recent-work -->
            <div id="recent-blog">

            </div><!-- end recent-blog -->
        </div><!-- end recent -->

    </div><!-- end container -->
</body>
</html> 
```

样式.css

```
/* Reset */

html, body, div, span, object, h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, address, code, img,
small, strong, dl, dt, dd, ol, ul, li
fieldset, form, label {
    background: transparent;
    border: 0;
    font-size: 100%;
    margin: 0;
    outline: 0;
    padding: 0;
    vertical-align: baseline;
}

body {
    background: url(img/background.png) repeat;
    font-family: alexandriaflf-bold-webfont, 
                 Constantia,
                 "Lucida Bright",
                 "Bitstream Vera Serif",
                 "Liberation Serif",
                 serif;
}

ol, ul {
    list-style-type: none;
}

/* Type */

@font-face {
    font-family: alexandriaflf-bold-webfont;
    src: url('type/alexandriaflf-bold-webfont.eot');
    src: url('type/alexandriaflf-bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('type/alexandriaflf-bold-webfont.woff') format('woff'),
         url('type/alexandriaflf-bold-webfont.ttf') format('truetype'),
         url('type/alexandriaflf-bold-webfont.svg#') format('svg');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: alexandriaflf-bolditalic-webfont;
    src: url('type/alexandriaflf-bolditalic-webfont.eot');
    src: url('type/alexandriaflf-bolditalic-webfont.eot?#iefix') format('embedded-opentype'),
         url('type/alexandriaflf-bolditalic-webfont.woff') format('woff'),
         url('type/alexandriaflf-bolditalic-webfont.ttf') format('truetype'),
         url('type/alexandriaflf-bolditalic-webfont.svg#') format('svg');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: nevis-webfont;
    src: url('type/nevis-webfont.eot');
    src: url('type/nevis-webfont.eot?#iefix') format('embedded-opentype'),
         url('type/nevis-webfont.woff') format('woff'),
         url('type/nevis-webfont.ttf') format('truetype'),
         url('type/nevis-webfont.svg#') format('svg');
    font-weight: normal;
    font-style: normal;
}

h1 {
    font-family: nevis-webfont;
    font-size: 160%;
    font-weight: normal;
    letter-spacing: 1px;
    text-transform: uppercase;
}

h2 {
    font-size: 80%;
    font-weight: normal;
}

h3 {
    font-size: 80%;
    font-weight: bold;
}

p {
    font-size: 80%;
}

a {
    color: #202020;
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:11:48.387

根据您的标记和 CSS，您正在开发的文件夹中应该包含这些文件夹和文件。可以？

```
index.html
style.css
js/
    scripts.js
img/
    status.png
    banner.png
    background.png
type/
    alexandriaflf-bold-webfont.eot
    alexandriaflf-bold-webfont.woff
    alexandriaflf-bold-webfont.ttf
    alexandriaflf-bold-webfont.svg 
```

如果您的样式表没有被应用，要么是您错误地调用它（不，您的链接标签很好），要么 CSS 语法不好（不，看起来不错），或者文件不在您声明它应该在的位置（坏小路）。更罕见的情况可能是：您禁用了样式表并忘记重新启用；一个或两个文件有某种编码错误或杂散的坏字符，使其损坏。

* * *

**编辑**

我已经按照您的描述安排了您的 index.html 和 style.css，这就是我所看到的。样式适用。在 Chrome 开发人员工具中，您会看到`h2`突出显示并且正在应用指定的样式。至少，我希望你能看到这一点。如果您没有看到这一点，那么您的环境要么非常错误，要么您没有准确地解释情况。

![调试这个的截图](../Images/3a73a1496c05a45ccb29e1fce7155ba1.png)

# java - PrintWriter 线程安全吗？

> ID：11072253
> 
> 赞同：13
> 
> 时间：2012-06-17T14:58:30.570
> 
> 标签：java, printwriter

鉴于以下情况：

```
public class CConsole {
  public static PrintWriter pw = new PrintWriter(System.out, true);
} 
```

`CConsole.pw.format("%d %d", x, y)`线程安全吗？也就是说，多个线程可以使用这个调用吗？它在哪里被描述为线程安全的。我在 PrintWriter 类描述和 format() 方法描述中都没有看到它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-17T16:04:27.837

这个问题没有简单的答案……

，[`Writer`](http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html)它是[`PrintWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html)其构造函数文档中明确提到的超类，所有关键部分都在`Writer`实例本身或明确指定的对象上同步。因此`Writer`是明确的线程安全的......

不幸的是，`PrintWriter`子类文档没有明确做出这样的承诺。它继承了`Writer`锁对象，但无法知道任何附加或覆盖的方法是否仍然是线程安全的。

另一方面，据我所知，[Sun/OpenJDK`PrintWriter`实现](http://www.docjar.com/html/api/java/io/PrintWriter.java.html)`synchronized`在几乎所有方法中都包含块。*但这*似乎不是明确记录的行为。

我宁愿安全行事并假设它`PrintWriter`不是线程安全的，也不愿依赖未记录的行为并从长远来看对此感到遗憾......

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-17T15:56:19.727

> 这不是完全相同的问题，也没有给出任何证据。
> 
> 它还说 PrintWriter 是没有资格的线程安全的，而另一个答案有资格。在我看来，这需要澄清。

由于 OP 不理解（或者可能不相信）链接问题的答案，我将重申它们。

*   主要规范（即 javadocs）没有说明该类是否是线程安全的。

*   从阅读源代码可以清楚地看出，在所有相关操作都正确同步的意义上，它是线程安全的。

*   Oracle 不太可能故意更改实现以使其成为非线程安全的......在上述意义上。

*   但是，在某些用例中 a`PrintWriter`可能不是完全线程安全的：

    *   如果单个`PrinterWriter`线程被多个线程使用，结果可能是线程输出的不可预知的交错；例如，如果他们使用 print 而不是 println。

    *   如果您有多个`PrintWriter`对象包装相同的底层流，则可能会由于`PrintWriter`s 的内部使用而出现问题`BufferedWriter`。

    *   如果您将`PrintWriter`.

总之，当前的`PrintWriter`实现（在 Oracle/OpenJDK 代码库中）是线程安全的，但在某些情况下您仍然需要小心。其他第 3 方 Java 实现（即不是从 OpenJDK 源代码树派生的）也有可能不是线程安全的。

涉及多个线程写入同一底层流的应用程序的线程安全性总是有细微差别的......

* * *

请注意，@KazekageGaara 找到的引用...

> “*多次写入底层输出流的**所有方法都在内部处理同步，因此对象是线程安全的。”`PrintWriter``PrintWriter`*

... 来自 O'Reilly 教科书 - Mark Grand 和 Jonathan Knudsen 的*“Java Fundamental Classes Reference”*。由于这不是 Sun / Oracle 的官方出版物，因此它没有任何权威性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-04T03:27:30.440

是的，它是线程安全的。我不明白为什么有些人说它不是线程安全的。它肯定有“锁定”成员，并且它的方法在该锁定对象下完全同步。

有人说 PrintWriter.print 方法不是线程安全的，但这是错误的。PrintWriter.print 调用 write()，这绝对是线程安全的。我们都知道write方法是在‘lock’下同步的。所以 print 方法是隐式/自然线程安全的。

PrintWriter.println 应该自己同步，因为它调用 print() 和 println()，它们都是“独立的”线程安全的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T16:16:38.110

取自[这里](http://doc.sumy.ua/prog/Java/fclass/ch11_53.htm)，其中一行说：

*PrintWriter 的所有多次写入底层输出流的方法都在内部处理同步，因此 PrintWriter 对象是线程安全的。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-21T17:27:57.950

```
{ 
public void print(Object obj) 
     {

        write(String.valueOf(obj));
     }

     /* Methods that do terminate lines */

} 
```

打印不同步...

因此，如果您使用打印方法，请编写您自己的“我的作家”并同步它。

要不然

如果你使用 println().. 那么它同步了..

```
{

         public void println(Object x) {
         String s = String.valueOf(x);
         synchronized (lock) {
             print(s);
             println();
         }
     }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-17T15:49:17.943

不，它不是真正的线程安全。

[在此处](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/PrintWriter.java#PrintWriter.write%28java.lang.String,int,int%29)查看 PrintWriter.java 中的 write() 方法

他们的写入在锁上同步（[在此处](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/Writer.java#Writer.0lock)定义- 这是 Writer 对象。如果它在此同步，它将是线程安全的，但在这种情况下它不是。

# r - 基于概率权重向量的随机抽样

> ID：11072256
> 
> 赞同：0
> 
> 时间：2012-06-17T14:59:06.863
> 
> 标签：r, probability, sampling

我有矢量图`d<-1:100`

我想从这个向量中采样 k=3 次**而不用替换**。我想让与 `length(d)/k`第一个采样元素相距一定距离的元素具有更高的采样概率。我还不确定要高多少。我知道`sample`有一个`prob=`论点，但是我似乎无法找到一种方法，以便`prob=`从初始样本的位置重新计算向量。

有任何想法吗？

**示例：** `d<-1:100`。让我们说第一个试用样品`d[30]=30`。那么接近 0、60 和 90 的元素`ddd`应该有更高的采样概率。因此，在初始样本之后，其余元素的采样概率分布`ddd`如图所示：![图片](../Images/60c2dd9d598064b7bf590b0980fad942.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:09:57.707

我认为：

```
samp <- sample(1:100,1)
prob <- rep(1,100)
prob[samp]=0 
```

更多编辑：我今天是个白痴。现在这将使您要求的概率形状。

```
peke<-c(2,5,7,10,7,5,2)  #your 'triangle' probability
for (jj = c(0,2,3){
prob[(1:7)*(1+samp*(jj)] <- peke
}
newsamp <-sample(1:100,1,prob) 
```

如果没有将概率峰值放置在您想要的位置，您可能需要添加一个轻微的偏移量。

# java - Java中的单例和多线程

> ID：11072262
> 
> 赞同：25
> 
> 时间：2012-06-17T14:59:37.757
> 
> 标签：java, multithreading, design-patterns, singleton

在多线程环境中使用 Singleton 类的首选方法是什么？

假设我有 3 个线程，并且它们都尝试同时访问`getInstance()`单例类的方法 -

1.  如果不保持同步会发生什么？
2.  `synchronized` `getInstance()`使用method 还是使用`synchronized`block inside是一种好习惯`getInstance()`。

请告知是否有其他出路。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-17T15:04:49.020

如果你在谈论[单例](http://en.wikipedia.org/wiki/Singleton_pattern)的[线程安全](http://en.wikipedia.org/wiki/Threadsafe)、[延迟初始化](http://en.wikipedia.org/wiki/Lazy_initialization)，这里有一个很酷的代码模式，它可以在**没有任何同步代码的情况下完成 100% 线程安全的延迟初始化**：

 **```
public class MySingleton {

     private static class MyWrapper {
         static MySingleton INSTANCE = new MySingleton();
     }

     private MySingleton () {}

     public static MySingleton getInstance() {
         return MyWrapper.INSTANCE;
     }
} 
```

这将仅在被调用时实例化单例`getInstance()`，并且它是 100% 线程安全的！这是一个经典。

它之所以起作用，是因为类加载器有自己的同步来处理类的静态初始化：保证在使用类之前所有静态初始化都已完成，并且在此代码中，类仅在`getInstance()`方法内使用，所以*当*类加载内部类。

顺便说一句，我期待着有一个`@Singleton`注释可以处理这些问题的那一天。

### 编辑：

一个特定的不信者声称包装类“什么都不做”。这是证明它*确实*重要的证据，尽管在特殊情况下。

基本区别在于，对于包装类版本，单例实例是在加载包装类时创建的，这是在第一次调用时创建的`getInstance()`，但是对于非包装版本 - 即简单的静态初始化 - 创建实例加载主类时。

如果您只有简单的`getInstance()`方法调用，那么*几乎*没有区别 - 区别在于使用包装版本时，所有*其他*sttic 初始化将在创建实例*之前*完成，但这很容易通过简单地处理源中*最后*列出的静态实例变量。

但是，如果您按*name*加载类，情况就完全不同了。调用`Class.forName(className)`一个类会导致静态初始化发生，因此如果要使用的单例类是您服务器的属性，那么在简单版本中，静态实例将在调用时创建`Class.forName()`，*而不是*在`getInstance()`调用时创建。我承认这有点做作，因为您需要使用反射来获取实例，但是这里有一些完整的工作代码可以证明我的观点（以下每个类都是顶级类）：

```
public abstract class BaseSingleton {
    private long createdAt = System.currentTimeMillis();

    public String toString() {
        return getClass().getSimpleName() + " was created " + (System.currentTimeMillis() - createdAt) + " ms ago";
    }
}

public class EagerSingleton extends BaseSingleton {

    private static final EagerSingleton INSTANCE = new EagerSingleton();

    public static EagerSingleton getInstance() {
        return INSTANCE;
    }
}

public class LazySingleton extends BaseSingleton {
    private static class Loader {
        static final LazySingleton INSTANCE = new LazySingleton();
    }

    public static LazySingleton getInstance() {
        return Loader.INSTANCE;
    }
} 
```

主要的：

```
public static void main(String[] args) throws Exception {
    // Load the class - assume the name comes from a system property etc
    Class<? extends BaseSingleton> lazyClazz = (Class<? extends BaseSingleton>) Class.forName("com.mypackage.LazySingleton");
    Class<? extends BaseSingleton> eagerClazz = (Class<? extends BaseSingleton>) Class.forName("com.mypackage.EagerSingleton");

    Thread.sleep(1000); // Introduce some delay between loading class and calling getInstance()

    // Invoke the getInstace method on the class
    BaseSingleton lazySingleton = (BaseSingleton) lazyClazz.getMethod("getInstance").invoke(lazyClazz);
    BaseSingleton eagerSingleton = (BaseSingleton) eagerClazz.getMethod("getInstance").invoke(eagerClazz);

    System.out.println(lazySingleton);
    System.out.println(eagerSingleton);
} 
```

输出：

```
LazySingleton was created 0 ms ago
EagerSingleton was created 1001 ms ago 
```

如您所见，未包装的简单实现是在`Class.forName()`调用时创建的，这可能是*在*静态初始化准备好执行之前。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-17T15:17:44.203

鉴于您想让它真正线程安全，这个任务在理论上并不简单。

[在@IBM](http://www.ibm.com/developerworks/java/library/j-dcl/index.html)找到了一篇关于这个问题的非常好的论文

只是获得单例不需要任何同步，因为它只是一个读取。因此，只需同步 Sync 的设置即可。除非两个线程尝试在启动时同时创建单例，否则您需要确保检查实例是否设置了两次（一个在同步外部，一个在同步内部）以避免在最坏的情况下重置实例。

然后您可能需要考虑 JIT（即时）编译器如何处理乱序写入。此代码将在某种程度上接近解决方案，尽管无论如何都不会是 100% 线程安全的：

```
public static Singleton getInstance() {
    if (instance == null) {
        synchronized(Singleton.class) {      
            Singleton inst = instance;         
            if (inst == null) {
                synchronized(Singleton.class) {  
                    instance = new Singleton();               
                }
            }
        }
    }
    return instance;
} 
```

所以，你也许应该诉诸一些不那么懒惰的东西：

```
class Singleton {
    private static Singleton instance = new Singleton();

    private Singleton() { }

    public static Singleton getInstance() {
        return instance;
    }
} 
```

或者，有点臃肿，但更灵活的方法是避免使用静态单例并使用诸如[Spring 之](http://www.springsource.org)类的注入框架来管理“单例”对象的实例化（并且您可以配置延迟初始化）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-17T15:04:37.040

`getInstance`只有当你懒惰地初始化你的单例时，你才需要内部同步。如果您可以在线程启动之前创建一个实例，您可以在 getter 中删除同步，因为引用变得不可变。当然，如果单例对象本身是可变的，则需要同步其访问可以同时更改的信息的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-17T15:17:45.220

这个问题实际上取决于创建实例的方式和时间。如果您的`getInstance`方法延迟初始化：

```
if(instance == null){
  instance = new Instance();
}

return instance 
```

然后你必须同步，否则你可能会得到多个实例。这个问题通常在关于[Double Checked Locking](http://en.wikipedia.org/wiki/Double-checked_locking)的讨论中得到处理。

否则，如果您预先创建一个静态实例

```
private static Instance INSTANCE = new Instance(); 
```

那么不需要同步该`getInstance()`方法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-06T07:41:59.780

有效java中描述的最佳方法是：

```
public class Singelton {

    private static final Singelton singleObject = new Singelton();

    public Singelton getInstance(){
        return singleObject;
    }
} 
```

不需要同步。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-17T15:42:25.393

**没有人按照Effective Java**中的建议使用 Enums吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-17T16:29:06.607

如果您确定您的 java 运行时**使用的是新的 JMM（Java 内存模型，可能比 5.0 更新）**，那么仔细检查锁就可以了，但是在实例前面添加一个 volatile。否则，您最好使用 Bohemian 所说的静态内部类，或 Florian Salihovic 所说的“Effective Java”中的 Enum。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-30T07:51:15.033

答案已经在这里被接受，但我想分享测试来回答你的第一个问题。

> 如果不保持同步会发生什么？

`SingletonTest`当您在多线程环境中运行时，这将是完全灾难的类。

```
/**
 * @author MILAN
 */
public class SingletonTest
{
    private static final int        PROCESSOR_COUNT = Runtime.getRuntime().availableProcessors();
    private static final Thread[]   THREADS         = new Thread[PROCESSOR_COUNT];
    private static int              instancesCount  = 0;
    private static SingletonTest    instance        = null;

    /**
     * private constructor to prevent Creation of Object from Outside of the
     * This class.
     */
    private SingletonTest()
    {
    }

    /**
     * return the instance only if it does not exist
     */
    public static SingletonTest getInstance()
    {
        if (instance == null)
        {
            instancesCount++;
            instance = new SingletonTest();
        }
        return instance;
    }

    /**
     * reset instancesCount and instance.
     */
    private static void reset()
    {
        instancesCount = 0;
        instance = null;
    }

    /**
     * validate system to run the test
     */
    private static void validate()
    {
        if (SingletonTest.PROCESSOR_COUNT < 2)
        {
            System.out.print("PROCESSOR_COUNT Must be >= 2 to Run the test.");
            System.exit(0);
        }
    }

    public static void main(String... args)
    {
        validate();
        System.out.printf("Summary :: PROCESSOR_COUNT %s, Running Test with %s of Threads. %n", PROCESSOR_COUNT, PROCESSOR_COUNT);

        long currentMili = System.currentTimeMillis();
        int testCount = 0;
        do
        {
            reset();

            for (int i = 0; i < PROCESSOR_COUNT; i++)
                THREADS[i] = new Thread(SingletonTest::getInstance);

            for (int i = 0; i < PROCESSOR_COUNT; i++)
                THREADS[i].start();

            for (int i = 0; i < PROCESSOR_COUNT; i++)
                try
                {
                    THREADS[i].join();
                }
                catch (InterruptedException e)
                {
                    e.printStackTrace();
                    Thread.currentThread().interrupt();
                }
            testCount++;
        }
        while (instancesCount <= 1 && testCount < Integer.MAX_VALUE);

        System.out.printf("Singleton Pattern is broken after %d try. %nNumber of instances count is %d. %nTest duration %dms", testCount, instancesCount, System.currentTimeMillis() - currentMili);
    }
} 
```

程序的输出清楚地表明您需要使用 getInstance 作为`synchronized`或添加`synchronized`锁来封闭新的 SingletonTest。

```
摘要 :: PROCESSOR_COUNT 32，使用 32 个线程运行测试。
单例模式在 133 次尝试后被破坏。
实例数为 30。
测试持续时间 500ms

```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-02T21:11:46.507

为简单起见，我认为使用**枚举**类是一种更好的方法。我们不需要做任何同步。Java 通过构造，始终确保只创建一个常量，无论有多少线程试图访问它。

仅供参考，在某些情况下，您需要将单例替换为其他实现。然后我们需要修改类，这违反了 Open Close 原则。单例的问题是，由于具有私有构造函数，您无法扩展该类。因此，客户端通过接口进行交谈是一种更好的做法。

**使用枚举类和接口实现单例：**

**客户端.java**

```
public class Client{
    public static void main(String args[]){
        SingletonIface instance = EnumSingleton.INSTANCE;
        instance.operationOnInstance("1");
    }
} 
```

**SingletonIface.java**

```
public interface SingletonIface {
    public void operationOnInstance(String newState);
} 
```

**EnumSingleton.java**

```
public enum EnumSingleton implements SingletonIface{
INSTANCE;

@Override
public void operationOnInstance(String newState) {
    System.out.println("I am Enum based Singleton");
    }
} 
```**

# ios - iOS中的XML解析，无法获取值

> ID：11072265
> 
> 赞同：0
> 
> 时间：2012-06-17T14:59:52.687
> 
> 标签：ios, xml, nsxmlparser

我一直在尝试在 iOS 中进行 XML 解析。但不幸的是，我无法解析它。

你能帮我解决这个问题吗？我正在使用使用 NSXML 的 SAX 解析器。

数据是

```
<category>
<cat id="info" name="id1" value="val1" />
<cat id="info" name="id2" value="val2" />
</category> 
```

如何使用 SAX 解析器获取值？任何帮助，将不胜感激。

谢谢

**答案**——

（获取属性）我是这样使用的（attributedict 是 didStartElement 方法中的 NSDictionary 对象）

```
NSString *attr = [attributeDict valueForKey:@"name"];
if([attr isEqualToString:@"id1"])
{
NSLog("%@", [attributeDict valueForKey:@"value"]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:05:48.947

您需要使用 Data 初始化一个 NSXML 实例，然后使用 parse 方法。您需要设置一个 NSXMLParserDelegate 协议，然后使用以下方法，您将能够检索信息：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *) namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict;

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName;

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string; 
```

您应该阅读有关它的苹果文档：

[NSXML解析器](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)

[NSXMLParserDelegate 协议](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html)

您将在链接中找到 Apple 示例。

# c++ - 动态数组是如何在 C++ 中实现的？

> ID：11072268
> 
> 赞同：3
> 
> 时间：2012-06-17T15:00:26.513
> 
> 标签：c++

创建数组时，编译器必须知道它的大小吗？例如，以下代码片段无法编译。

```
class A
{
   int n;
   int arr[n];
}; 
```

但是，以下编译。

```
int main()
{
  int n;

  std::cin >> n;
  int arr[n];
} 
```

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T15:04:47.847

标准 C++ 不支持变长数组。¹

如果你想要这种行为，我建议使用一个`std::vector`而不是原始的 C 样式数组。

* * *

[1\. 但是，您可以在 C99 或非标准语言扩展中找到它们。]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T15:07:44.453

(1) 创建 A 的实例时发生的第一件事是分配内存，此时该成员`n`不存在，因此无法知道需要多少内存`arr`。

(2) 在堆栈上创建一个数组，这只会稍微移动堆栈指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T15:06:03.877

如果你想创建一个可变大小的数组，你必须在堆上使用`new`. 如果您已将整数声明为常量，那么您可以按照您的方式使用它的唯一方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T15:04:48.723

在编译的那一刻，变量 n 的值是未知的（它只是在给定地址下的内存中的值），所以你不能创建一个未知大小的变量。在第二种情况下，您知道大小，因为您使用了 cin（不是 sin）。

# google-chrome - 带有浮动的 Chrome 中的 1px 故障

> ID：11072277
> 
> 赞同：1
> 
> 时间：2012-06-17T15:01:26.340
> 
> 标签：google-chrome, css-float

我正在尝试使用浮点数（每行 3 个）创建照片库网格布局，图像缩略图似乎在 Firefox 和 IE 中很好地对齐，但在 Chrome 上右侧有 1 个像素的边距，有什么办法可以修复此行为？

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <title></title>
        <style>
.wrap{
    width:900px;
    background:red;
    margin:0 auto;
    overflow:hidden;
}

.wrap div{
    float:left;
    width:295px;
    height:200px;
    background:#333;
    margin-bottom:5px;
    margin-right:0.469em;
    overflow:hidden;
}

.wrap div:nth-child(3n+3){ /* wont work in IE8 */
    margin-right:0;
}

.clear:before, .clear:after{ content:""; display:table; }
.clear:after{ clear:both; }
        </style>
    </head>
    <body>
        <div class="wrap clear">
            <div>&nbsp;</div>
            <div>&nbsp;</div>
            <div style="margin-right:0;">&nbsp;</div>
            <div>&nbsp;</div>
            <div>&nbsp;</div>
            <div style="margin-right:0;">&nbsp;</div>
            <div>&nbsp;</div>
            <div>&nbsp;</div>
            <div style="margin-right:0;">&nbsp;</div>
        </div>​
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:06:34.467

不会出现在最新版本的 Chrome（当前为 23.0.1271.64 m - Windows）中，可能是一个舍入错误。

# linux - Linux中的路径名查找？

> ID：11072282
> 
> 赞同：6
> 
> 时间：2012-06-17T15:01:55.523
> 
> 标签：linux, history

Linus Torvalds 在一次演讲中提到，Linux 中的路径名查找是所有操作系统中最快的，而且这可以在 1000 核机器上发生而不会出现任何减速。他提到这项工作发生在过去 18 个月内，但我找不到任何有关此开发细节的参考资料。有什么文件可以解释吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T16:30:58.727

查看您`/usr/src/linux/Documentation/filesystems`的文件`path-lookup.txt`或访问[http://www.mjmwired.net/kernel/Documentation/filesystems/path-lookup.txt](http://www.mjmwired.net/kernel/Documentation/filesystems/path-lookup.txt) - 它详细解释了它。

# php - 通过纯 PHP 和 OAuth 直接将视频上传到 youtube

> ID：11072287
> 
> 赞同：1
> 
> 时间：2012-06-17T15:02:14.063
> 
> 标签：php, youtube

我只想向 YouTube 的服务器发送一个 POST 请求，通过 OAuth 将视频直接上传到 YouTube。

我有访问令牌和开发人员密钥 - 我如何将 POST 请求从 PHP 发送到 YouTube 的 gdata 服务器？

我想发送的 POST 请求可以在这里找到：[发送上传 API 请求](https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading)

```
POST /feeds/api/users/default/uploads HTTP/1.1
Host: uploads.gdata.youtube.com
Authorization: Bearer ACCESS_TOKEN
GData-Version: 2
X-GData-Key: key=DEVELOPER_KEY
Slug: VIDEO_FILENAME
Content-Type: multipart/related; boundary="BOUNDARY_STRING"
Content-Length: CONTENT_LENGTH
Connection: close

--<boundary_string>
Content-Type: application/atom+xml; charset=UTF-8

API_XML_request
--BOUNDARY_STRING
Content-Type: VIDEO_CONTENT_TYPE
Content-Transfer-Encoding: binary

<Binary File Data>
--BOUNDARY_STRING-- 
```

我尝试了下面的函数，并且更喜欢它，但它无法发送上述 POST 请求的 XML 部分。

```
if (!function_exists('send_post_request'))
{
    function send_post_request($url, $data)
    {
        $context = stream_context_create(array('http' => array('method'  => 'POST',
                                                               'content' => http_build_query($data))));
        $result  = file_get_contents($url, FALSE, $context);
        return $result;
    }
} 
```

我也试过卷曲！

# rss - 如何在 Google 阅读器中更新我的提要的图标？

> ID：11072293
> 
> 赞同：0
> 
> 时间：2012-06-17T15:02:52.433
> 
> 标签：rss, feed, atom-feed, google-reader

今天，我推出了具有新设计和新网站图标的新网站。为了留住我的订阅者，我为我的 RSS 提要使用了相同的 URL。

但谷歌阅读器保留了旧的网站图标。我怎样才能强制它更新它？

# c# - 我需要使用哪个 FileSystemWatcher 过滤器来查找新文件

> ID：11072295
> 
> 赞同：24
> 
> 时间：2012-06-17T15:02:57.190
> 
> 标签：c#, filesystemwatcher

到目前为止，我知道 FileSystemWatcher 可以查看一个文件夹，如果该文件夹中的任何文件被更改、修改等......那么我们可以处理它。但我不确定我应该在我的场景中使用哪个过滤器和事件：监视文件夹，如果将文件添加到该文件夹​​，则执行 XYZ ... 所以在我的场景中，我不在乎现有文件是否已更改等等..那些应该被忽略...只有当且仅当新文件已添加到该文件夹​​时才执行 XYZ...

对于这种情况，您建议使用哪个事件和过滤器？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-17T15:13:23.317

设置观察者：

```
FileSystemWatcher watcher = new FileSystemWatcher();
watcher.Path = "Blah";

watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
    | NotifyFilters.FileName;

watcher.Created += new FileSystemEventHandler(OnChanged);

watcher.EnableRaisingEvents = true; 
```

然后实现`FileCreated`委托：

```
private void OnChanged(object source, FileSystemEventArgs e) {
    Console.WriteLine("File: " +  e.FullPath + " " + e.ChangeType);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T15:10:21.380

FileSystemWatcher的详细解释请看这里：[http ://www.c-sharpcorner.com/uploadfile/mokhtarb2005/fswatchermb12052005063103am/fswatchermb.aspx](http://www.c-sharpcorner.com/uploadfile/mokhtarb2005/fswatchermb12052005063103am/fswatchermb.aspx)

如果要查找添加的文件，则必须查找已创建的文件。

您可以通过设置 WatcherChangeType 枚举的值来指定要监视的更改类型。可能的值如下：

*   全部：文件或文件夹的创建、删除、更改或重命名。
*   已更改：文件或文件夹的更改。更改的类型包括：大小、属性、安全设置、上次写入和上次访问时间的更改。
*   Created：创建文件或文件夹。
*   已删除：删除文件或文件夹。
*   重命名：重命名文件或文件夹。

此外，您可以只连接在创建（添加）文件时触发的事件处理程序，而不是实现所有其他事件，因为它们对您来说不感兴趣：

```
watcher.Created += new FileSystemEventHandler(OnChanged); 
```

# ruby-on-rails-3 - Rails 3 缓存 - Errno::ENOENT：没有这样的文件或目录

> ID：11072300
> 
> 赞同：2
> 
> 时间：2012-06-17T15:03:28.417
> 
> 标签：ruby-on-rails-3, caching

错误：

```
Errno::ENOENT: No such file or directory - .../production/releases/20120224120523/tmp/cache/55B/D80/views%2Ffooter 
```

看法：

```
<% cache("footer") do %>
  <%= render :partial => "partials/footer" %>
<% end %> 
```

缓存清扫器：

```
def after_create()
  expire_fragment("footer")
end 
```

有什么问题？我的缓存文件夹有 chmod 744，当我查看时该文件实际上就在那里。

**编辑：**

这是回溯： http: [//pastie.org/4103699](http://pastie.org/4103699)

# c# - 使用 LinkSprite JPEG 彩色相机拍照

> ID：11072306
> 
> 赞同：2
> 
> 时间：2012-06-17T15:04:23.970
> 
> 标签：c#, camera, jpeg, uart

我正在使用 LinkSprite JPEG 彩色相机拍照。我从 UART 获取图片数据的十六进制值作为 C Sharp 中的字符串。相机的用户手册解释了图片的数据结构，以十六进制FFD8开头，以FFD9结尾。我得到的值符合这个描述。当我使用 ByteWriter 将此十六进制值保存到文件但输出文件无效并且我看不到图片时。如何将这些值转换为 JPEG 文件？

我正在使用基于 HCS12 微控制器的 DRAGON 培训板。我正在通过 UART 获取相机数据。我正在使用 C 在 DRAGON 板上编写代码。这是我的代码：

[http://pastebin.com/dR4BJMBZ](http://pastebin.com/dR4BJMBZ)

相机信息：
[http ://www.sparkfun.com/products/10061](http://www.sparkfun.com/products/10061)

用户手册：
[http ://www.linksprite.com/upload/file/1333187137.pdf](http://www.linksprite.com/upload/file/1333187137.pdf)

我的 C# 代码：

[http://pastebin.com/WXnTL7jd](http://pastebin.com/WXnTL7jd)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:52:13.390

Olcay Ertaş，你说得对，它不是原始数据

我和我的朋友在使用我们的相机时遇到了同样的问题。和你一样，我们使用 UART 提取了十六进制数据，和你一样，我们没有看到图片。对我们来说，问题是使用记事本保存十六进制数据只会将其保存为 ASCII 字符串。（我们使用记事本保存原始数据）

以下是我们如何解决它：

1.  我们使用了 XVI32 十六进制编辑器程序（免费）。
2.  获取十六进制数据并将其从 FF D8 ... 复制到 FF D9。
3.  使用程序将字符串插入新文件。
4.  将文件另存为 .jpg 文件。

我希望它对你有用，就像对我们一样。

# ios - 新旧CoreData模型

> ID：11072307
> 
> 赞同：0
> 
> 时间：2012-06-17T15:04:36.837
> 
> 标签：ios, core-data, submission

我想使用新的 CoraData 模型创建应用程序的新版本（由其他人创建）。我的疑问是：核心数据模型通过更新是永久的。我想确保以前的 CoreData 模型不会对新版本的应用程序造成问题。

我必须遵循一些最佳实践吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:16:07.363

目前尚不清楚您是否要保留旧的应用程序数据并进行迁移。

如果没有，那么在发布新模型时，当核心数据会看到模型与旧模型不同时，您可以使用以下方法擦除存储： [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil];

然后重新创建您的商店：

```
[__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]; 
```

系统会通知您该商店与

```
/**
 Returns the persistent store coordinator for the application.
 If the coordinator doesn't already exist, it is created and the application's store added to it.
 */
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator 
```

方法，您通常会在您的 appDelegate 中找到它。

基本上你有两个选择：根据你的新模型创建一个新商店（旧数据将消失）或将你的旧模型迁移到新模型（根据你要做什么有可能吗？）

如果应用程序根本不同，您可以考虑发布“新应用程序”而不是新版本。然后，您需要将用户重定向到新应用，就像旧应用中的消息一样。基本上，当您希望老用户保持他们的应用程序“原样”时就是这种情况，因为它符合旧的 iOS 版本并使用全新的 iOS 功能、标准、用户界面发布全新的应用程序。

# svn - 当 subversion 服务器不可用并且我有两个版本的代码时该怎么办？

> ID：11072313
> 
> 赞同：0
> 
> 时间：2012-06-17T15:05:46.113
> 
> 标签：svn, tortoisesvn

我正在使用 TortoiseSVN 来管理 C# 应用程序的版本控制。突然我的svn服务器宕机了。我有两个不同版本的代码。如何合并它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:07:04.290

等到服务器恢复。

如果你**真的**需要这样做，那么：¹

```
svn diff working_copy_1 > diff.diff
cd working_copy_2
patch -p0 < diff.diff 
```

但是，这有问题：

*   当您最终将其提交回 SVN 时，它将被视为一次提交（将无法分离出两个变更集）。
*   如果两个工作副本具有不同的基本修订版，那么上述合并将导致严重的冲突，或者会错过某些更改。

* * *

[1\. 这假设您在 Linux 或类似系统上工作（我猜您不是，因为您使用的是 TortoiseSVN！）我不知道 Windows 等价物`patch`是什么，我会让您自己弄清楚.]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:22:49.217

我假设您已经得到了答案，并且可能对您没有用，但发布此信息只是为了提供信息，以防其他人需要查看...

如果我们在一个大型团队中工作，许多人每天都使用 SVN 服务器进行提交，更新他们将在团队中使用的更改，突然有一天我们发现我们的 SVN 服务器已关闭。

它只是给我们带来了很多困难，因为我们需要合并每一个变化，这是一种混乱的情况。

**我们被卡住的原因：-** 因为 SVN 是一种集中形式的版本控制系统![在此处输入图像描述](../Images/847971b3cbbddca47e0ea4640acaef1b.png)

每台机器都连接到中央服务器。现在，如果我们的中央服务器出现故障，那么一切都会陷入困境。![在此处输入图像描述](../Images/e08cb506918ed2c6aa38fd5ebaae8cba.png)

**相同的解决方案： -**

使用分布式版本控制系统，如 GIT、Mercurial、Bazaar 等。

**有用的原因：-**

与每台机器只连接到中央服务器的集中式系统不同，在分布式版本控制系统中，每台机器也可以相互连接。它基本上是一种本地存储库，它本身是在个人机器上形成的。

![在此处输入图像描述](../Images/1b7bb7409e792898636173e16a37a401.png)

**我们在这里的优势：-**

如果我们的中央服务器出现故障，则 Client1 所做的更改可以由 Client2 通过连接到 Client1 等来更新。

![在此处输入图像描述](../Images/09df489e5f369b1f337d03dc49371b13.png)

所以现在我们不必等待我们的中央服务器可用。我们可以继续我们的正常工作，一旦我们的服务器可用，就可以将代码提交到它上面。

# php - PDO 准备好的语句未返回预期结果

> ID：11072314
> 
> 赞同：1
> 
> 时间：2012-06-17T15:05:47.567
> 
> 标签：php, mysql, pdo, prepared-statement

当`$this->show`设置为 时，准备好的查询返回以下结果集`saved-by-the-bell`：

```
season
------
1
2
3
4 
```

当我执行以下代码时：

```
$seasons = array( );

$query = $db->prepare(
  "SELECT `season` " .
  "FROM `tv` " .
  "WHERE `show_url` = ':show' " . 
  "GROUP BY `season` " .
  "ORDER BY `season` ASC;"
);

$query->bindParam( ':show', $this->show );
$query->execute( );
$query->setFetchMode( PDO::FETCH_OBJ );

while( $row = $query->fetch( ) )
{
  $season = new stdClass;
  $season->number = $row->season;
  $season->title = "Season {$row->season}";
  $season->url = $row->season;

  $seasons[] = $season;
}

return $seasons; 
```

**`$seasons`是一个空数组，为什么？**

$db 是扩展 PDO 的实例化对象。

我尝试了各种调试方法，但是当我回显 rowCount 时，它显示为 0。我还是 PDO 的新手，但我似乎看不出这里有什么问题。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T15:18:33.680

啊，我想通了。我会把我的愚蠢留在这里，以防其他人发生这种情况。

显然，当使用准备好的语句时，您不需要在 SQL 代码中将参数括在引号中。

因此，prepare 语句应如下所示：

```
$query = $db->prepare(
  "SELECT `season` " .
  "FROM `tv` " .
  "WHERE `show_url` = :show " . 
  "GROUP BY `season` " .
  "ORDER BY `season` ASC;"
); 
```

# android - 日志收集器返回部分数据

> ID：11072316
> 
> 赞同：2
> 
> 时间：2012-06-17T15:06:00.867
> 
> 标签：android, email, logging, logcat

我正在尝试在未连接到 PC 的情况下从 android 手机获取日志。我已经下载了日志收集器，但由于某种原因，我只获得了部分数据，无法看到我可以通过 logcat 看到的全部数据。有没有办法获取完整的数据或只使用 logcat -filters 来获取日志并通过电子邮件发送它们？通过部分数据，我的意思是我只看到系统信息，但看不到从我的应用程序发送到记录器的信息（即使在几秒钟后 - 所以我认为在 64K 缓冲区已满后它不会丢失）

谢谢西蒙

# c - 套接字c客户端没有收到字符串

> ID：11072318
> 
> 赞同：0
> 
> 时间：2012-06-17T15:06:08.563
> 
> 标签：c, sockets

这是**客户端**代码片段：

```
connect(DescrittoreClient, (struct sockaddr *) &serv_addr, sizeof(serv_addr));

strcpy(Buffer, filename);

send(DescrittoreClient, Buffer, strlen(Buffer), 0);
fd = open(filename, O_CREAT | O_WRONLY,0644);

while ((nread = read(DescrittoreClient, Buffer, sizeof(Buffer))) != 0) {
    write(fd, Buffer, nread);
    memset(Buffer,0,sizeof(Buffer));
}
int gg;
while( (gg = recv(DescrittoreClient, Buffer, sizeof(Buffer), 0)) == -1) continue;
printf("%d\n", gg);
printf("Risposta del server: %s\n", Buffer);

close(DescrittoreClient);
return EXIT_SUCCESS; 
```

这是**服务器**代码的片段：

```
while(1){

    rc = recv(DescrittoreClient, filename, sizeof(filename), 0);

    fd = open(filename, O_RDONLY);

    fstat(fd, &stat_buf);

    offset = 0;
    rc = sendfile(DescrittoreClient, fd, &offset, stat_buf.st_size);
    if (rc != stat_buf.st_size) {
        fprintf(stderr, "incomplete transfer from sendfile: %d of %d bytes\n", rc, (int)stat_buf.st_size);
        exit(1);
    }
    strcpy(Buffer, "Dati inviati correttamente");
    if( (send(DescrittoreClient, Buffer, strlen(Buffer), 0)) == -1){
        printf("Errore nell'invio della stringa\n");
        close(DescrittoreClient);
        close(fd);
        exit(1);
    }

}
close(DescrittoreServer);
return EXIT_SUCCESS; 
```

这是**预期**的行为：

```
Client --Give me file X--> Server
Server --send the file X--> Client
Server -->send string "File has been sent"--> Client 
```

但这是**真正的**行为：

```
Client --Give me file X--> Server
Server --send the file X--> Client
Server -->_NOTHING_--> Client 
```

所以问题是客户端没有收到“文件已发送”。我检查了问题是否出在服务器端，但不是（实际上是服务器发送了字符串）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:07:29.787

（基于上面的评论）——要实现的是 TCP 通信是 100% 基于流的，没有内置框架。这意味着 TCP 层所做的所有事情都是确保接收方以与发送方发送它们的顺序相同的顺序接收字节——但它不*保证*字节将以与发送它们相同的间隔接收。（例如，如果您 send() 10 个字节，然后是 20 个字节，然后是 50 个字节，接收方可能会一次接收所有 80 个字节，或者 63 个字节后跟 17 个字节，或者任何其他的 recv() 组合，总和为总共 80 个字节）。

因此，为了以接收者可以正确解释它们的方式发送多个单独的项目，您需要定义自己的数据框架规则。在您的情况下，您需要发送*n*个字节的文件数据，后跟一个字符串，而您的接收程序需要知道的是预期有多少字节的文件数据。这样，一旦它接收到（那么多）字节，它就知道剩余的字节是字符串数据，而不会只是将它们写入文件。

我的建议是首先发送文件的大小（如果您需要支持大于 4 GB 的文件大小，则可以作为 4 字节整数或 8 字节长）。那么接收代码会是这样的：

1.  接收 4 个字节
2.  将这四个字节解释为整数（您可能希望通过发送方的 htonl() 和接收方的 ntohl() 传递此值，以避免此处可能出现的字节序问题）
3.  接收 N 个字节并将它们写入文件
4.  接收任何剩余的字节作为字符串。

# ruby-on-rails - 如何获取 Rails 3.2 中资产的完整 URL？

> ID：11072320
> 
> 赞同：3
> 
> 时间：2012-06-17T15:06:20.170
> 
> 标签：ruby-on-rails, asset-pipeline

Rails 是否有内置帮助程序来获取资产管道中图像的 url？

```
path_to_image('image.jpg') 
```

获取相对路径。

```
url_to_image('image.jpg') 
```

似乎不起作用。

```
"#{root_url}#{path_to_image('image.jpg')}" 
```

不是很方便（并在根目录和图像路径之间提供了额外的 / ）。

有没有我忽略的内置方法？还是我需要创建一个助手？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T10:40:06.817

它看起来不像是内置在 Rails 中的。

最后我求助于辅助方法

```
def image_url(file)
  request.protocol + request.host_with_port + path_to_image(file)
end 
```

这种方法解决了使用的双斜线问题`root_url + image_path(file)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:39:16.520

你正在寻找`image_path`

重复：[在 Rails 中获取没有 HTML 的图像 URL](https://stackoverflow.com/questions/2875702/getting-the-image-url-without-the-html-in-rails)

更多信息：[http ://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_path](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_path)

**更新**

可以派生您的任务的助手。

```
def image_url(source)
  "#{root_url}#{image_path(source)}"
end 
```

# ms-access - MS Access Query 比较 2 个表

> ID：11072324
> 
> 赞同：1
> 
> 时间：2012-06-17T15:06:32.090
> 
> 标签：ms-access

我试图在 MS Acess 中提出一个查询来比较两个表。我的比较基于 4 个字段 postal_code、city、state 和 country。我希望能够获取 table1 中没有在 table2 中匹配的所有记录。

这是我的示例数据。我期待查询输出中有 2 条记录，我用“*”标记

```
table1
======

POSTAL_CODE CITY        STATE_PROV  COUNTRY_CODE
*12345      Union       NJ          US
45678       Hillside    NJ          US
*45678      Union       NJ          US

table2
======

POSTAL_CODE     CITY        STATE_PROV  COUNTRY_CODE
45678           Hillside    NJ          US 
```

这是我尝试过的，但没有完成这项工作：

```
SELECT DISTINCT table1.*
FROM table1 LEFT JOIN table2 ON table1.POSTAL_CODE=table2.POSTAL_CODE
WHERE ((table2.POSTAL_CODE Is Null)); 
```

我该如何做到这一点？请让我知道任何建议。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:24:02.307

的`ON`表达式`LEFT JOIN`应包括您要匹配的所有 4 个字段。我也漏掉了`DISTINCT`。

```
SELECT
    t1.POSTAL_CODE,
    t1.CITY,
    t1.STATE_PROV,
    t1.COUNTRY_CODE
FROM
    table1 AS t1
    LEFT JOIN table2 AS t2
    ON
            t1.POSTAL_CODE = t2.POSTAL_CODE
        AND t1.CITY = t2.CITY
        AND t1.STATE_PROV = t2.STATE_PROV
        AND t1.COUNTRY_CODE = t2.COUNTRY_CODE
WHERE t2.POSTAL_CODE Is Null; 
```

# php - .htaccess / url 重写问题

> ID：11072330
> 
> 赞同：0
> 
> 时间：2012-06-17T15:07:28.370
> 
> 标签：php, .htaccess, cakephp, mod-rewrite, cakephp-2.0

使用 CakePHP。该网站是 www.villapalmeras.co.uk。当我查看根目录时，我的链接正确显示（即[http://www.villapalmeras.co.uk/public/events](http://www.villapalmeras.co.uk/public/events)）。当我导航到任何其他页面时，相同的链接会显示为[http://www.villapalmeras.co.uk/websites/123reg/LinuxPackage25/jo/rd/an/jordanwallwork.co.uk/public_html/domains/villalaspalmeras/公共/活动](http://www.villapalmeras.co.uk/websites/123reg/LinuxPackage25/jo/rd/an/jordanwallwork.co.uk/public_html/domains/villalaspalmeras/public/events)

我正在使用 123-reg 托管包，并将 villapalmeras.co.uk 域映射到位置域/villapalmeras（其根目录是我在 jordanwallwork.co.uk 的网站）。尝试编辑 .htaccesses 文件但没有成功。

我的 .htaccess 文件是：

/domains/villapalmeras/.htaccess：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteBase /
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

/domains/villapalmeras/app/.htaccess：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

/domains/villapalmeras/app/webroot/.htaccess

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

索引.php：

```
define('APP_DIR', 'app');
define('DS', DIRECTORY_SEPARATOR);
define('ROOT', dirname(__FILE__));
define('WEBROOT_DIR', 'webroot');
define('WWW_ROOT', ROOT . DS . APP_DIR . DS . WEBROOT_DIR . DS);

if (!defined('CAKE_CORE_INCLUDE_PATH')) {
    define('CAKE_CORE_INCLUDE_PATH', ROOT . DS . 'lib');
}

require APP_DIR . DS . WEBROOT_DIR . DS . 'index.php'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:37:46.240

原来答案真的很简单！我需要做的就是添加`RewriteBase /`到所有 .htaccess 文件中，而不仅仅是根目录，然后它就可以完美运行了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T12:52:08.533

您必须更改每个 .htaccess 并且不需要更改 index.php 或其他文件。

```
/domains/villapalmeras/.htaccess:

<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteBase /
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule>

/domains/villapalmeras/app/.htaccess:

<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /app/
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule>

/domains/villapalmeras/app/webroot/.htaccess

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /app/webroot/
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T15:30:33.200

只是为了澄清我上面的评论，您要修改的代码可能在您的 index.php 中：

您正在寻找的代码：

```
/**
 * The full path to the directory which holds "app", WITHOUT a trailing DS.
 *
 */
    if (!defined('ROOT')) {
        define('ROOT', dirname(dirname(dirname(__FILE__))));
    }
/**
 * The actual directory name for the "app".
 *
 */
    if (!defined('APP_DIR')) {
        define('APP_DIR', basename(dirname(dirname(__FILE__))));
    }
/**
 * The absolute path to the "cake" directory, WITHOUT a trailing DS.
 *
 */
    if (!defined('CAKE_CORE_INCLUDE_PATH')) {
        define('CAKE_CORE_INCLUDE_PATH', ROOT);
    } 
```

它应该更改为更像：

```
/**
 * The full path to the directory which holds "app", WITHOUT a trailing DS.
 *
 */
    if (!defined('ROOT')) {
        define('ROOT', DS . 'home' . DS . 'username');
    }
/**
 * The actual directory name for the "app".
 *
 */
    if (!defined('APP_DIR')) {
        define('APP_DIR', 'domain.com');
    }
/**
 * The absolute path to the "cake" directory, WITHOUT a trailing DS.
 *
 */
    if (!defined('CAKE_CORE_INCLUDE_PATH')) {
        define('CAKE_CORE_INCLUDE_PATH', 'home' . DS . 'username');
    } 
```

当然取决于您的主机目录的结构。

# php-5.3 - 后期静态绑定中的转发和非转发调用 (PHP 5.3)

> ID：11072334
> 
> 赞同：4
> 
> 时间：2012-06-17T15:08:02.283
> 
> 标签：php-5.3

```
<?php
class A {
    public static function foo() {
        static::who();
    }

    public static function who() {
        echo __CLASS__."\n";
    }
}

class B extends A {
    public static function test() {
        A::foo();
        parent::foo();
        self::foo();
    }

    public static function who() {
        echo __CLASS__."\n";
    }
}
class C extends B {
    public static function who() {
        echo __CLASS__."\n";
    }
}

C::test();
?> 
```

下面给出的是输出：

```
A
C
C 
```

谁能评估一下该输出是如何产生的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T15:25:52.760

test() "A" 中第一行的结果没有利用后期静态绑定，因为在所有情况下，您都是直接调用类 "A" 的 foo 实现（技术上它是 LSB，但静态绑定到 A)。第二行和第三行展示了使用 static 关键字的预期行为，继承链无关紧要，static 指的是被调用的类。因此，即使您从 B 调用 parent::foo()，该实现也使用 LSB，其中 static 关键字解析为*被调用的类*，即 C。self::foo() 也是如此。

# ruby-on-rails - before_save 不适用于 Rails 3

> ID：11072336
> 
> 赞同：8
> 
> 时间：2012-06-17T15:08:25.530
> 
> 标签：ruby-on-rails

我有这个项目模型：

```
class Project < ActiveRecord::Base
  validates :status, :inclusion => { :in => ['active', 'closed'] }
  validates :title,
            :presence => true,
            :length => { :in => 4..30 }

  before_save :set_default_status_if_not_specified

  private 

  def set_default_status_if_not_specified
    self.status = 'active' if self.status.blank?
  end
end 
```

如果我像这样创建一个新对象：

```
Project.create!(:title => 'Test 2', :pm_id => 1) 
```

我收到以下错误：**验证失败：状态未包含在列表中** 但状态字段应在保存前填写。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-17T15:17:29.477

那是因为它之前验证**过** `before_save`。

[http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

```
(-) save

(-) valid

(1) before_validation

(-) validate

(2) after_validation

(3) before_save

(4) before_create

(-) create

(5) after_create

(6) after_save

(7) after_commit 
```

你可以试试`before_validation`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T15:16:28.860

[看起来](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)验证发生在`before_save`回调之前。也许您想尝试一下`before_validation`？

# nosql - NoSQL dbs：我们如何处理作为 ORM 中模型一部分的方法？

> ID：11072338
> 
> 赞同：1
> 
> 时间：2012-06-17T15:08:52.397
> 
> 标签：nosql

我读到有些人发现在 NoSQL 数据库中使用 ORM 是错误的，我想这是正确的，因为我们使用**的是非关系**数据库，所以围绕它们映射**关系**映射似乎是错误的。

但是如何处理我们的模型呢？当我们有 ORM 时，我们有这样的东西（对于数据库表*events*）：

```
class Event():
    def isVeryNew():
        if this.date < now - 60:
            return True
        else:
            return False 
```

现在，当我应该避免使用 ORM 时，我将如何在我的数据上调用此类方法？我应该创建方法并将检索数据传递给它吗？像这样：

```
def event_is_very_new(data):
    if "date" in data and data["date"] < now - 60:
        return True
    else:
        return False 
```

## 背景

我一直在想，因为我正在深入研究 Django 并想将它与 MongoDB 一起使用，但我很难将它与两个或三个 ORM 映射器中的任何一个一起使用。所以我看了纯 pyMongo 示例，它根本[没有定义任何模型](https://github.com/mdirolf/DjanMon/blob/master/status/models.py)

```
# from django.db import models

# We don't need models with MongoDB. If you really *want* models check out
# something like MongoKit (http://bitbucket.org/namlook/mongokit/) to add
# an ORM-ish layer on top of PyMongo. 
```

# java - 我需要在 Java 中将浮点数四舍五入到小数点后两位

> ID：11072340
> 
> 赞同：42
> 
> 时间：2012-06-17T15:09:08.340
> 
> 标签：java, android, floating-point

> **可能重复：**
> [如何在 Java 中将数字四舍五入到 n 位小数](https://stackoverflow.com/questions/153724/how-to-round-a-number-to-n-decimal-places-in-java)

我很难将浮点数四舍五入到小数点后两位。我尝试了一些我在这里看到的方法，包括简单地使用`Math.round()`，但无论我做什么，我都会不断收到不寻常的数字。

我有一个正在处理的浮点数列表，列表中的第一个显示为`1.2975118E7`. 是什么`E7`？

当我使用`Math.round(f)`（f 是浮点数）时，我得到完全相同的数字。

我知道我做错了什么，我只是不确定是什么。

我只希望数字采用格式`x.xx`。第一个数字应该是`1.30`，等等。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-06-17T15:12:19.373

`1.2975118E7`是[科学记数法](http://en.wikipedia.org/wiki/Scientific_notation)。

```
1.2975118E7 = 1.2975118 * 10^7 = 12975118 
```

此外，`Math.round(f)`返回一个整数。你不能用它来获得你想要的格式`x.xx`。

你可以使用[`String.format`](http://developer.android.com/reference/java/lang/String.html#format(java.util.Locale,%20java.lang.String,%20java.lang.Object...)).

```
String s = String.format("%.2f", 1.2975118);
// 1.30 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-06-17T15:19:02.677

如果您正在寻找货币格式（您没有指定，但似乎这就是您要寻找的），请尝试该`NumberFormat`课程。这很简单：

```
double d = 2.3d;
NumberFormat formatter = NumberFormat.getCurrencyInstance();
String output = formatter.format(d); 
```

哪个将输出（取决于语言环境）：

`$2.30`

此外，如果不需要货币（只需精确的两位小数），您可以使用它：

```
NumberFormat formatter = NumberFormat.getNumberInstance();
formatter.setMinimumFractionDigits(2);
formatter.setMaximumFractionDigits(2);
String output = formatter.format(d); 
```

哪个会输出`2.30`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-17T15:21:21.737

你可以利用[`DecimalFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)给你你想要的风格。

```
DecimalFormat df = new DecimalFormat("0.00E0");
double number = 1.2975118E7;
System.out.println(df.format(number));  // prints 1.30E7 
```

由于它采用科学计数法，因此您将无法获得小于 10 ⁷的数字而不会损失那么多数量级的精度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T15:12:06.937

尝试查看[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)类。它是货币的首选，支持精确的四舍五入。

# iphone - UIScrollVIew 中的 UIView 不更新视图

> ID：11072341
> 
> 赞同：0
> 
> 时间：2012-06-17T15:09:54.047
> 
> 标签：iphone, objective-c, ios, ipad

我在 UIScrollView 内放置了一个 UIView。有一种方法称为更新 UI，它基本上会更新 UI。但是，加载数据后，我需要向下滚动一点才能看到呈现的 UI。例如，我尝试的一件事是在 layoutSubviews 中隐藏 UITableView 并在 updateUI 中取消隐藏，但是我需要在 UIScrollView 上向下滚动一点，直到看到 UITableView。为什么会这样？这是我更新的 UI 代码：

当 UIScrollView 不滚动时，这个 updateUI 代码基本上会被触发。我有一个带有 UIScrollView 的 MyViewController，它实现了 UIScrollView 委托，基本上，当它不滚动时，它代表我的 UIView，告诉你现在可以更新视图。

```
- (void) updateUI
{
    self.isScrolling = NO;

    NSLog(@"UPDATE UI");

    AHMyImageData *object = self.object;

    if ([object isNotNull]){

    [self.tableView_ reloadData];

    if (![self.userProfileImage_.image isNotNull]){
        [self.userProfileImage_ setImageWithURL:[NSURL URLWithString:object.profilePicture_] andAnimate:YES];
    }

    if (![self.imageView_.image isNotNull]){
        NSString *url = [[object.image_ valueForKey:@"low_resolution"] valueForKey:@"url"];
        [self.imageView_ setImageWithURL:[NSURL URLWithString:url] andAnimate:YES];
    }

    if (object.userHasLiked){
        [self.likeButton_ setImage:[UIImage imageNamed:@"btn-like-down.png"] forState:UIControlStateNormal];
    } else {
        [self.likeButton_ setImage:[UIImage imageNamed:@"btn-like.png"] forState:UIControlStateNormal];
    }

    if ([object.text_ isNotNull]){
        NSMutableAttributedString * attributedString = [NSMutableAttributedString attributedStringWithString:object.text_];
        [attributedString setFont:[UIFont fontWithName:@"HelveticaNeue" size:15]];
        [self.titleLabel_ setAttributedText:attributedString];
        [self parseTagsInComment:object.text_];
    }

    NSMutableAttributedString * usernameAttributedString = [NSMutableAttributedString attributedStringWithString:object.username_];
    [usernameAttributedString setFont:[UIFont fontWithName:@"HelveticaNeue" size:14]];
    [usernameAttributedString setTextColor:[UIColor colorWithRed:86.0/255.0 green:134.0/255.0 blue:172.0/255.0 alpha:1.0] range:NSMakeRange(0, [object.username_ length])];
    [usernameAttributedString setTextBold:YES range:NSMakeRange(0, [object.username_ length])];

    [self.usernameLabel_ setAttributedText:usernameAttributedString];

    NSString * imageCreatorUsernameURL = [NSString stringWithFormat:@"userid://%@", object.userId_];
    [self.usernameLabel_ addCustomLink:[NSURL URLWithString:imageCreatorUsernameURL] inRange:NSMakeRange(0, [object.username_ length])];
    [self.usernameLabel_ setUnderlineLinks:NO];
    [self.usernameLabel_ setDelegate:self];

    [self.likesCountLabel_ setText:[NSString stringWithFormat:@"%d", object.likesCount]];
    [self.commentsCountLabel_ setText:[NSString stringWithFormat:@"%d", object.commentsCount]];

    if ([object.createdTime_ isNotNull]){
        [self.imageTimePostedLabel_ setText:[NSString timestampToString:object.createdTime_]];
    }

    [self setNeedsDisplay];
    [self setNeedsLayout];

    } else {
        NSLog(@"OBJECT IS NULL");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:12:23.017

试着打电话...

```
[self.tableView_ reloadData];
// I think you need to call reloadData only
// AFTER you do all your fun updating stuff
[self setNeedsDisplay];
[self setNeedsLayout]; 
```

在函数的最后，而不是一开始。希望有帮助！

# jndi - 来自 WAS 8 的 Spring JMS 客户端访问 WMQ 抛出DetailedInvalidDestinationException

> ID：11072342
> 
> 赞同：0
> 
> 时间：2012-06-17T15:09:55.003
> 
> 标签：jndi, ibm-mq, spring-jms, websphere-8

我有一个 Web 应用程序部署在 Websphere AS 8.0（主机 A）中，使用 spring-jms 客户端访问远程机器（主机 B）中 WMQ 7.0 中的队列。我已经按照 WAS 8 管理指南中的说明，使用资源链接下的 JMS Provider 在 JNDI 中配置了 WMQ ConnectionFactory 和 WMQ 队列，并将 WMQ 作为消息传递提供者。我还使用测试连接按钮对其进行了测试。它工作正常。我已经按照 Spring JMS 配置配置了 JNDI 模板和 QueueConnectionFactory 和 Queue(Destination)、DestinationResolver 和 JMSTemplate。

但是，当我尝试运行我的服务器并通过 JNDI 访问 WMQ 时，它会引发以下异常：

```
exception message JMSCC0085: A destination was not specified.; nested exception is **com.ibm.msg.client.jms.DetailedInvalidDestinationException**: JMSCC0085: A destination was not specified. with params [B@775e20e, 1c02f7440b8438e5]
org.springframework.jms.InvalidDestinationException:JMSCC0085:**A destination was not specified**.; nested exception is com.ibm.msg.client.jms.DetailedInvalidDestinationException:**JMSCC0085:A destination was not specified.**
at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:469)
at org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:534)
at org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:526) 
```

我尝试打印我的默认目标名称，它打印为 queue://QM_MGR/Q1，其中 QM_MGR 是队列管理器的名称，Q1 是 WMQ 中的队列名称。

请注意，我没有在 WMQ 中配置任何 JNDI，在 JNDI 模板中没有配置任何 InitialContextFactory 和 Provider URL，在 web.xml 中没有配置资源引用。

我已经尝试了以上所有方法并失败了。所以我删除了上面提到的配置。

任何人都可以通过指出我为什么会遇到此异常，我缺少什么或详细说明避免此异常的步骤来帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:28:13.477

尽管您已经在 J​​NDI 中定义了连接工厂和目的地，但您必须定义 MQ 对应项。例如，一个名为 QM_MGR 的 MQ 队列管理器必须与一个 SVRCONN 通道和一个在端口（比如 1414）上运行的侦听器一起创建。此外，还必须在该队列管理器上创建一个名为 Q1 的队列。

请检查您是否已完成上述操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T15:03:36.853

我已经解决了这个问题。导致错误的是 JNDI 命名空间。谢谢大家。

# c# - 我对 Dictionary 的使用是否需要锁定？

> ID：11072343
> 
> 赞同：4
> 
> 时间：2012-06-17T15:09:57.567
> 
> 标签：c#, multithreading, dictionary, locking

许多线程可以访问`summary`. 每个线程都有一个访问字典的唯一键；

```
Dictionary<string, List<Result>> summary; 
```

我需要锁定以下操作吗？

1.  `summary[key] = new List<Result>()`
2.  `summary[key].Add(new Result());`

似乎我不需要锁定，因为每个线程都会使用不同的键访问字典，但是**（1）**不会因为将新记录与其他线程同时添加到字典而出现问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T15:13:45.537

是的，您需要使用锁定。

字典对于添加操作不是线程安全的。如果您使用的是 .NET 4，则可以考虑切换到[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)。否则，您应该创建自己的线程安全集合（例如[this](http://sanjayakumar.blogspot.ro/2009/01/thread-safe-dictionary-in-c.html)）。

考虑使用[ReaderWriterLockSlim](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)来同步对您的集合的访问（以防您不使用 ConcurrentDictionary）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T15:14:23.490

*必须*锁定对您的字典的所有写访问。不能保证访问不同的键是线程安全的，事实上，它不是。

来自[MSDN](http://msdn.microsoft.com/en-us/library/xfhwa508%28v=vs.80%29.aspx)：

> 只要不修改集合，字典就可以同时支持多个阅读器。即便如此，通过集合枚举本质上不是线程安全的过程。在枚举与写访问竞争的极少数情况下，必须在整个枚举期间锁定集合。要允许集合被多个线程访问以进行读写，您必须实现自己的同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T15:17:58.573

默认情况下，字典不是线程安全的。你要添加什么并不重要。最重要的是：您无法控制来自不同线程的并发添加。所以你肯定需要锁。或者切换到线程安全集合（即 CocnurrentDictionary for .NET 4+）

# eclipse - 在 svn 修订列表中列出修改过的文件

> ID：11072345
> 
> 赞同：1
> 
> 时间：2012-06-17T15:10:00.000
> 
> 标签：eclipse, svn, redmine

svn 提供了许多很好的命令，使我们能够知道我们的存储库中发生了什么/做了什么。

我正在寻找一个命令，该命令允许我列出已在特定修订版中修改的文件（注意一个范围，但一些特定修订版的列表）。

**示例：**

我想知道修订中修改了哪些文件：624、625、630,631

但我想按文件分组（如果文件已在修订版 624 和 630 中修改，我希望它是一次）

svn diff --summarize .... 可以做到这一点，但要进行一系列修订，在我的情况下，该范围是不可能的。

PS：我正在使用redmine，所以如果解决方案在那里，那也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:47:28.383

我不知道在 Subversion 或 Redmine 中有任何内置方法可以做到这一点。我建议编写一个反复调用 svn diff 的小脚本，然后处理结果。

例如，这是通过命令行执行此操作的快速方法：

```
echo "255 318 319 320" | perl -p -e 's/ /\n/g' | xargs -I {} svn diff . --summarize -c {} | perl -p -e 's/^...\s*//' | sort | uniq 
```

# deployment - Axis2 service.xml 描述

> ID：11072346
> 
> 赞同：0
> 
> 时间：2012-06-17T15:10:02.367
> 
> 标签：deployment, axis2

是否有关于 service.xml 文件、XSD 文件或所有可用 s 的列表的所有可能元素的描述？

# android - “project.properties”文件中的“target”设置与清单中的“android:targetSdkVersion”标签有什么区别？

> ID：11072347
> 
> 赞同：19
> 
> 时间：2012-06-17T15:10:08.343
> 
> 标签：android, manifest

它们有何不同？或者他们是一样的？据我了解，这两个都定义了应用程序应该编译的 SDK 版本。

请帮忙澄清。提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-17T15:24:38.820

[文档](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)说_

> android:targetSdkVersion：此属性通知系统您已针对目标版本进行了测试，并且系统不应启用任何兼容性行为以保持您的应用程序与目标版本的前向兼容性。该应用程序仍然能够在旧版本上运行

如果未设置，则默认值等于提供给 minSdkVersion 的值。这表明市场将过滤具有较低 sdk 的设备。

> **项目属性文件中的 target=android-sdk version**表示 Eclipse 不允许使用高于此版本的 sdk 中的方法或类。

IE。一种与开发环境有关，另一种与android设备有关。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-17T15:27:25.277

项目属性中的目标是您的项目编译所针对的 Android 版本。

清单中的 targetSdkVersion 是您的应用程序所针对的 Android 版本。例如，如果您将目标版本设置为 14 及更高版本，Android v4 将显示特定的 ICS 功能，例如操作栏。

[http://developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

# java - 打开 SQLite 数据库时出现 NullPointerException

> ID：11072358
> 
> 赞同：1
> 
> 时间：2012-06-17T15:12:20.773
> 
> 标签：java, android, sqlite, nullpointerexception

我正在尝试打开一个 SQLite 数据库，但是这个 NullPointerException 不断弹出。

这是java文件的代码：

```
 public class QuestionActivity extends Activity implements OnClickListener{

private Question currentQ;
private GamePlay currentGame;

@Override 
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

     requestWindowFeature(Window.FEATURE_NO_TITLE);
     getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

      setContentView(R.layout.question);
      currentGame = ((QuizApplication) getApplication()).getCurrentGame();
      currentQ = currentGame.getNextQuestion();

  Button nextBtn = (Button) findViewById(R.id.nextBtn);
  nextBtn.setOnClickListener(this);

      setQuestions();

  }

  private void setQuestions() {

    String question = Utility.capitalise(currentQ.getQuestion()) + "?";
    TextView qText = (TextView) findViewById(R.id.question);
            qText.setText(question);

            List<String> answers = currentQ.getQuestionOptions();
            TextView option1 = (TextView) findViewById(R.id.answer1);
            option1.setText(Utility.capitalise(answers.get(0)));

         TextView option2 = (TextView) findViewById(R.id.answer2);
         option2.setText(Utility.capitalise(answers.get(1)));

         TextView option3 = (TextView) findViewById(R.id.answer3);
         option3.setText(Utility.capitalise(answers.get(2)));

         TextView option4 = (TextView) findViewById(R.id.answer4);
             option4.setText(Utility.capitalise(answers.get(3)));   
}

public void onClick(View arg0) {

            if (!checkAnswer()) return;

            if (currentGame.isGameOver()){

                Intent i = new Intent(this, QuizMenuActivity.class);
                startActivity(i);
                finish();
            }
            else{
                Intent i = new Intent(this, QuestionActivity.class);
                startActivity(i);
                finish();
            }

   }

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    switch (keyCode)
    {
    case KeyEvent.KEYCODE_BACK :
        return true;
    }

    return super.onKeyDown(keyCode, event);
}

private boolean checkAnswer() {

    String answer = getSelectedAnswer();
    if (answer==null){

        return false;
    }
    else {

        if (currentQ.getAnswer().equalsIgnoreCase(answer))
        {

            currentGame.incrementRightAnswers();

        }
        else{

            currentGame.incrementWrongAnswers();

        }
        return true;
    }
}

private String getSelectedAnswer() {
    RadioButton c1 = (RadioButton)findViewById(R.id.answer1);
    RadioButton c2 = (RadioButton)findViewById(R.id.answer2);
    RadioButton c3 = (RadioButton)findViewById(R.id.answer3);
    RadioButton c4 = (RadioButton)findViewById(R.id.answer4);
    if (c1.isChecked())
    {
        return c1.getText().toString();
    }
    if (c2.isChecked())
    {
        return c2.getText().toString();
    }
    if (c3.isChecked())
    {
        return c3.getText().toString();
    }
    if (c4.isChecked())
    {
        return c4.getText().toString();
    }

    return null;
    }

  } 
```

以及 LogCat 中出现的阻止我继续的错误：

```
06-17 14:40:22.845: E/AndroidRuntime(579): FATAL EXCEPTION: main
06-17 14:40:22.845: E/AndroidRuntime(579): java.lang.RuntimeException: Unable to start activity ComponentInfo{QuestionActivity}: java.lang.NullPointerException
06-17 14:40:22.845: E/AndroidRuntime(579):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-17 14:40:22.845: E/AndroidRuntime(579):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-17 14:40:22.845: E/AndroidRuntime(579):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-17 14:40:22.845: E/AndroidRuntime(579):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-17 14:40:22.845: E/AndroidRuntime(579):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-17 14:40:22.845: E/AndroidRuntime(579):  at android.os.Looper.loop(Looper.java:123)
06-17 14:40:22.845: E/AndroidRuntime(579):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-17 14:40:22.845: E/AndroidRuntime(579):  at java.lang.reflect.Method.invokeNative(Native Method)
06-17 14:40:22.845: E/AndroidRuntime(579):  at java.lang.reflect.Method.invoke(Method.java:507)
06-17 14:40:22.845: E/AndroidRuntime(579):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-17 14:40:22.845: E/AndroidRuntime(579):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-17 14:40:22.845: E/AndroidRuntime(579):  at dalvik.system.NativeStart.main(Native Method)
06-17 14:40:22.845: E/AndroidRuntime(579): Caused by: java.lang.NullPointerException
06-17 14:40:22.845: E/AndroidRuntime(579):  at ....QuestionActivity.onCreate(QuestionActivity.java:38)
06-17 14:40:22.845: E/AndroidRuntime(579):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-17 14:40:22.845: E/AndroidRuntime(579):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:29:39.660

AFAIK 你不能将 getApplication() 类型转换为 QuizApplication

将您的代码更改为以下。

```
currentGame = ((QuizApplication) getApplication()).getCurrentGame();
if(currentGame!=null)
{
  currentQ = currentGame.getNextQuestion();
} 
```

此外，如果您解决 NPE，那么您将进入`ActivityNotFoundException`以下块。您必须指定目标活动或意图中的操作。

```
Intent i = new Intent();
startActivity(i);
finish(); 
```

# iphone - 继承 UIDocument 的 initWithFileURL

> ID：11072360
> 
> 赞同：0
> 
> 时间：2012-06-17T15:12:57.247
> 
> 标签：iphone, cocoa-touch, uikit, icloud, uidocument

我正在尝试覆盖 UIDocument 的 initWithFileURL，因为一旦 UIDocument 被初始化，我需要调用一些自定义方法。

我认为这可能是一个好主意：

```
-(id)initWithFileURL:(NSURL *)url {
        self = [super initWithFileURL:url];
        // do some custom stuff
        return self;
} 
```

如果我覆盖它，我还需要做些什么吗？我觉得我需要检查 NIL 什么的。如果您需要使用自定义内容覆盖方法，您通常会在哪里查看？我只能（通过右键单击 UIDocument 时跳转到定义）看到这个：

```
 #pragma mark *** Initialization ***

// The designated initializer. Passing an empty URL will cause this method to throw an NSInvalidArgumentException.
- (id)initWithFileURL:(NSURL *)url; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:18:15.373

你可能应该这样做。

```
-(id)initWithFileURL:(NSURL *)url {
    self = [super initWithFileURL:url];

    if(self) {

      // Your custom stuff here

   }

    return self;
} 
```

# r - 将参数传递给函数内的函数

> ID：11072365
> 
> 赞同：36
> 
> 时间：2012-06-17T15:13:18.217
> 
> 标签：r, function, arguments

我正在编写函数，该函数涉及来自基本 R 的其他函数，并带有很多参数。例如（实际功能要长得多）：

```
myfunction <- function (dataframe, Colv = NA) { 
matrix <- as.matrix (dataframe) 
out <- heatmap(matrix, Colv = Colv)
return(out)
}

data(mtcars)

myfunction (mtcars, Colv = NA) 
```

热图有许多参数可以传递给：

```
heatmap(x, Rowv=NULL, Colv=if(symm)"Rowv" else NULL,
        distfun = dist, hclustfun = hclust,
        reorderfun = function(d,w) reorder(d,w),
        add.expr, symm = FALSE, revC = identical(Colv, "Rowv"),
        scale=c("row", "column", "none"), na.rm = TRUE,
        margins = c(5, 5), ColSideColors, RowSideColors,
        cexRow = 0.2 + 1/log10(nr), cexCol = 0.2 + 1/log10(nc),
        labRow = NULL, labCol = NULL, main = NULL,
        xlab = NULL, ylab = NULL,
        keep.dendro = FALSE, verbose = getOption("verbose"), ...) 
```

我想使用这些参数而不在 myfunction 中列出它们。

```
myfunction (mtcars, Colv = NA, col = topo.colors(16))
Error in myfunction(mtcars, Colv = NA, col = topo.colors(16)) : 
  unused argument(s) (col = topo.colors(16)) 
```

我尝试了以下但不工作：

```
myfunction <- function (dataframe, Colv = NA) { 
matrix <- as.matrix (dataframe) 
out <- heatmap(matrix, Colv = Colv, ....)
return(out)
}
data(mtcars)

myfunction (mtcars, Colv = NA, col = topo.colors(16)) 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-17T15:37:17.377

尝试三个点而不是四个点，并将省略号参数添加到顶级函数：

```
myfunction <- function (dataframe, Colv = NA, ...) { 
    matrix <- as.matrix (dataframe) 
    out <- heatmap(matrix, Colv = Colv, ...)
    return(out)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-16T19:22:40.117

试试这个：

*   globalenv 中热图的参数：

```
argsHeat = alist( <arguments for heatmap>) 
```

*   不要在里面调用 heatmap() `myfunction`，而是这样做

```
out = do.call('heatmap', args = argsHeat) 
```

# jsf - JSF：避免嵌套更新调用

> ID：11072374
> 
> 赞同：1
> 
> 时间：2012-06-17T15:14:26.500
> 
> 标签：jsf, jakarta-ee, jsf-2, primefaces

我不知道我是否走在正确的轨道上，或者还没有问这个问题。

我的 JSF 项目有这个树结构：

```
 <p:tree id="resourcesTree" value="#{someBean.root}" var="node" selectionMode="single" styleClass="no-border"
    selection="#{someBean.selectedNode}" dynamic="true">
    <p:ajax listener="#{someBean.onNodeSelect}" update=":centerPanel :tableForm :tabForm" event="select" onstart="statusDialog.show();"
        oncomplete="statusDialog.hide();" />
    <p:treeNode id="resourcesTreeNode" >
        <h:outputText value="#{node}" id="lblNode" />
    </p:treeNode>
</p:tree> 
```

在添加或删除某些内容后，我必须更新这棵树。但每当我更新它时，它的嵌套更新也会调用我的意思是说它也会调用更新这些组件“：centerPanel：tableForm：tabForm”......

这给了我错误：tableForm not found in view 因为这个表单加载在我的中央面板中，而这棵树在我的右侧面板中。所以当我在树上做一些操作时，它并不总是 :tableForm 在我的中央面板中..（我的意思是设计只是这样）

所以现在我的问题是我可以设置一些条件还是有任何方法可以指定何时更新嵌套组件以及何时不更新.... 简而言之，有什么方法可以仅更新：resoucesTree 就是这样不调用嵌套更新，这样我就可以避免错误......

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:59:45.703

`update`您可以在属性中使用 EL 。

```
update=":centerPanel :tabForm #{hasTableForm ? ':tableForm' : ''}" 
```

虚构`#{hasTableForm}`返回布尔值的地方。

但是如果已经`:tableForm`在里面`:centerPanel`，你可以省略它。

```
update=":centerPanel :tabForm" 
```

# java - 阅读网站内容 Java

> ID：11072376
> 
> 赞同：-9
> 
> 时间：2012-06-17T15:14:31.630
> 
> 标签：java, android, html

我正在开发一个 android 应用程序，在网站中我以编程方式将数据提交到搜索框并通过 Java 检索结果。

我使用`URLConnect`Java 获取数据。我得到源代码即html代码......

```
Urlconnection a = .connect to host

getinputstream

read data 
```

如果网站有以下内容，我现在使用这些功能：

```
sahil
3/5 patel chowk
965955 
```

因为这些细节将在 html 标签内，所以我想提取这些信息。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:18:34.593

您是否看过 JSoup：http://jsoup.org/[它](http://jsoup.org/)的 HTML 解析器应该可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T15:20:55.537

在我的猜测中，在这种情况下使用正则表达式将非常适合您：[如何使用正则表达式来解析 Java 中的 HTML？](https://stackoverflow.com/questions/677038/how-to-use-regular-expressions-to-parse-html-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T17:28:18.577

使用[JTiddy](http://jtidy.sourceforge.net/)很容易使用 java 库从 html 页面中提取内容。

# ios - 重新加载对象时 NSMutableArray 内存泄漏

> ID：11072382
> 
> 赞同：1
> 
> 时间：2012-06-17T15:15:27.190
> 
> 标签：ios, memory-leaks, three20, ttthumbsviewcontroller

我正在使用 Three20/TTThumbsviewcontroller 加载照片。很长一段时间以来，我一直在努力解决设置光源时的内存泄漏问题。我是对象 C 和 iOS 内存管理的初学者。请查看以下代码并提出任何明显的错误或在声明和释放变量时的任何错误。

-- PhotoViewController.h

```
 @interface PhotoViewController : TTThumbsViewController <UIPopoverControllerDelegate,CategoryPickerDelegate,FilterPickerDelegate,UISearchBarDelegate>{
......
NSMutableArray *_photoList;

......
@property(nonatomic,retain) NSMutableArray *photoList; 
```

-- PhotoViewController.m

```
@implementation PhotoViewController
....

@synthesize photoList;
.....

- (void)LoadPhotoSource:(NSString *)query:(NSString *)title:(NSString* )stoneName{

NSLog(@"log- in loadPhotosource method");

if (photoList == nil)
    photoList = [[NSMutableArray alloc] init ];

[photoList removeAllObjects];

@try {
    sqlite3 *db;
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    NSString *dbPath = [documentsPath stringByAppendingPathComponent: @"DB.s3db"];
    BOOL success = [fileMgr fileExistsAtPath:dbPath];
    if(!success)
    {
        NSLog(@"Cannot locate database file '%@'.", dbPath);
    }

    if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
    {
        NSLog(@"An error has occured.");
    }

    NSString *_sql = query;
    const char *sql = [_sql UTF8String];
    sqlite3_stmt *sqlStatement;
    if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
    {
        NSLog(@"Problem with prepare statement");
    }

    if ([stoneName length] != 0)
    {
        NSString *wildcardSearch = [NSString stringWithFormat:@"%@%%",[stoneName stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]];

        sqlite3_bind_text(sqlStatement, 1, [wildcardSearch UTF8String], -1, SQLITE_STATIC);
    }

    while (sqlite3_step(sqlStatement)==SQLITE_ROW) {

        NSString* urlSmallImage = @"Mahallati_NoImage.png";
        NSString* urlThumbImage = @"Mahallati_NoImage.png";

        NSString *designNo = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
        designNo = [designNo stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

        NSString *desc = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,7)];
        desc = [desc stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

        NSString *caption = designNo;//[designNo stringByAppendingString:desc];
        caption = [caption stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

        NSString *smallFilePath = [documentsPath stringByAppendingPathComponent: [NSString stringWithFormat:@"Small%@.JPG",designNo] ];
        smallFilePath = [smallFilePath stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        if ([fileMgr fileExistsAtPath:smallFilePath]){
            urlSmallImage = [NSString stringWithFormat:@"Small%@.JPG",designNo];
        }

        NSString *thumbFilePath = [documentsPath stringByAppendingPathComponent: [NSString stringWithFormat:@"Thumb%@.JPG",designNo] ];
        thumbFilePath = [thumbFilePath stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

        if ([fileMgr fileExistsAtPath:thumbFilePath]){
            urlThumbImage = [NSString stringWithFormat:@"Thumb%@.JPG",designNo];
        }

        NSNumber *photoProductId = [NSNumber numberWithInt:(int)sqlite3_column_int(sqlStatement, 0)];
        NSNumber *photoPrice = [NSNumber numberWithInt:(int)sqlite3_column_int(sqlStatement, 6)];

        char *productNo1 = sqlite3_column_text(sqlStatement, 3);
        NSString* productNo;
        if (productNo1 == NULL)
            productNo = nil;
        else
            productNo = [NSString stringWithUTF8String:productNo1];

        Photo *jphoto = [[[Photo alloc] initWithCaption:caption
                                               urlLarge:[NSString stringWithFormat:@"documents://%@",urlSmallImage] 
                                               urlSmall:[NSString stringWithFormat:@"documents://%@",urlSmallImage] 
                                               urlThumb:[NSString stringWithFormat:@"documents://%@",urlThumbImage]
                                                   size:CGSizeMake(123, 123) 
                                              productId:photoProductId
                                                  price:photoPrice
                                            description:desc
                                               designNo:designNo 
                                              productNo:productNo
                          ]  autorelease];

        [photoList addObject:jphoto];
        [jphoto release];

    }

}
@catch (NSException *exception) {
    NSLog(@"An exception occured: %@", [exception reason]);
}

self.photoSource = [[[MockPhotoSource alloc]
                     initWithType:MockPhotoSourceNormal
                     title:[NSString stringWithFormat: @"%@",title]
                     photos: photoList
                     photos2:nil] autorelease];

} 
```

使用不同的查询再次调用上述 LoadPhotosource 方法时会发生内存泄漏......我觉得声明 NSMutableArray (photoList) 有问题，但无法弄清楚如何修复内存泄漏。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:51:24.953

我没有在您的代码中看到任何泄漏的对象，但实际上是一个双重释放的对象，最终会使您的应用程序崩溃：

在你的最后几行中，你有这个：

```
Photo *jphoto = [[[Photo alloc] initWithCaption:caption
                                               urlLarge:[NSString stringWithFormat:@"documents://%@",urlSmallImage] 
                                               urlSmall:[NSString stringWithFormat:@"documents://%@",urlSmallImage] 
                                               urlThumb:[NSString stringWithFormat:@"documents://%@",urlThumbImage]
                                                   size:CGSizeMake(123, 123) 
                                              productId:photoProductId
                                                  price:photoPrice
                                                description:desc
                          designNo:designNo 
                                              productNo:productNo
                          ]  autorelease];

        [photoList addObject:jphoto];
        [jphoto release]; 
```

如果你仔细观察，你有一个双重释放（在 alloc 中自动释放，在 addObject 之后释放）。您应该删除其中之一。

除此之外，我还向您推荐几件事：

1.  切换到 ARC：如果您是新手，您肯定会利用它，因为您不必再​​担心几乎任何内存管理。您的代码将没有泄漏的对象和内存崩溃。只需注意内存保留周期和可变所有权，您就完成了。
2.  删除`NSMutableArray *_photoList;`，您没有使用它，因为您将属性 syntetizer 声明为`@synthesize photoList;`. 另外，正如罗伯特在下面评论的那样，您应该在使用属性时使用这种形式来清楚地区分： `@synthesize photoList = photoList_;` 下划线最好放在最后，因为Apple在开头使用它并且您不想意外使用相同的变量名。

3.  使用属性访问器来管理 ivars。而不是这样做：

    `if (photoList == nil) photoList = [[NSMutableArray alloc] init ];`

试试这个：

```
if (photoList == nil)
    self.photoList = [[[NSMutableArray alloc] init] autorelease]; 
```

在您的示例中，两行具有相同的行为，但第二行更可取，因为它将依赖于您的可变内存策略。如果您有一天通过副本或分配更改保留，您的代码仍然可以正常工作。以同样的方式，通过像这样为您的 ivar 分配一个 nil 来释放您的内存`self.photoList = nil`

**为什么你认为你有一个泄漏的对象？**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:15:30.433

回顾一下我的观察：

1.  我不认为这是相关的，但我认为你想要`@synthesize photoList = _photoList`. 现在，您有两个 ivars，一个是您显式声明的，`_photoList`一个是从您的 photoList 属性隐式创建的`photoList`。我还将摆脱 _photoList ivar 的现有显式声明，因为 Apple 当前建议您让 synthesize 语句为您执行此操作。（并且它可以防止出现这种情况，在这种情况下你意外地得到了额外的 ivars。）

2.  此外，再次与泄漏无关（而是相反的问题），但 jphoto 被过度释放，因为您同时发布了 an`autorelease`和`release`. 后者就足够了。

3.  另外，我没有看到您的`sqlite3_finalize()`和`sqlite3_close()`声明。他们在哪？根据[文档](http://www.sqlite.org/cintro.html)，“必须使用对 [] 的调用来销毁每个准备好的语句`sqlite3_finalize()`，以避免内存泄漏。”

4.  最后，如果在为数据库添加 finalize/close 语句后仍然存在泄漏，我建议通过分析器中的泄漏工具运行代码以[查找泄漏](https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/ViewingandAnalyzingData/ViewingandAnalyzingData.html#//apple_ref/doc/uid/TP40004652-CH5-SW22)。这将帮助您准确识别泄漏的内容。

# ios - 当全局变量的值发生变化时触发方法？

> ID：11072383
> 
> 赞同：0
> 
> 时间：2012-06-17T15:16:04.343
> 
> 标签：ios, xcode, global-variables

我已经定义了一个全局变量，它经常使用加速度计数据进行更新，所以我想在加速度计超过 0.9 时立即停止更新，但它不会像这样工作

```
if([ACCEL sharedInstance].accelval > 0.90f){
[self.motionManager stopAccelerometerUpdates];
} 
```

注意：我的加速度计数据已更新，不要对全局变量做错事！我称之为里面`-(void)viewDidLoad`

还有其他方法可以实现吗？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:20:14.407

如果您使用属性而不是变量，则可以使用[Key-Value Observing](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)来观察它的变化

# javascript - John Resig 的“简单 Javascript 继承”还可以吗？

> ID：11072386
> 
> 赞同：4
> 
> 时间：2012-06-17T15:16:56.270
> 
> 标签：javascript, oop, javascript-objects

我找到了[http://ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)这正是我正在寻找的东西，但我想知道它是否仍然有效以及是否会导致任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T15:36:36.333

现在许多现代库都使用经典继承。它的核心方法如下（Stoyan Stefanov 的 JavaScript 模式，第 127 页）：

```
function inherit(C, P) { 
    var F = function () {}; 
    F.prototype = P.prototype; 
    C.prototype = new F(); 
    C.uber = P.prototype; 
    C.prototype.constructor = C; 
} 
```

使用它的项目示例如下：

*   [谷歌关闭](http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/object/object.js#501)
*   [小唯](http://yuilibrary.com/yui/docs/api/files/oop_js_oop.js.html#l156)
*   [ExtJS](http://docs.sencha.com/ext-js/4-0/source/Class.html#Ext-Class-cfg-extend)

# tridion - Tridion 2011 SP1 的示例事件系统代码

> ID：11072387
> 
> 赞同：3
> 
> 时间：2012-06-17T15:16:58.493
> 
> 标签：tridion, tridion-2011

现在我们正在使用 Tridion 5.3。对于发布的数量，我们实现了事件系统，例如在组件本地化时发送一些邮件通知，或者在工作流程过程中完成特定活动时发送邮件通知等。

我们当前的事件系统是在 Visual Basic 6.0 中实现的，现在当我们必须重写我们的代码时，我们必须使用 .NET 来实现。

我的问题是从哪里可以获得一些初学者的示例代码或文档如何在 Tridion 2011 SP1 中实现事件系统。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T17:25:34.427

这些是我在谷歌搜索 Tridion 2011 事件系统时的前三个链接：

*   [http://www.sdltridionworld.com/articles/sdltridion2011/sdltridion2011eventsystem.aspx](http://www.sdltridionworld.com/articles/sdltridion2011/sdltridion2011eventsystem.aspx)
*   [http://www.julianwraith.com/2011/02/event-systems-in-sdl-tridion-2011/](http://www.julianwraith.com/2011/02/event-systems-in-sdl-tridion-2011/)
*   [http://www.curlette.com/?p=90](http://www.curlette.com/?p=90)

它们中的每一个都很好地介绍了为 Tridion 2011 编写事件处理程序，与为以前的 Tridion 版本编写事件系统相比，它本身更清晰/更少涉及。

如果您的 Tridion 2011 事件处理程序存在具体问题，我建议您发布代码并描述问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T08:09:43.330

除了 Frank 的出色建议外，[在线文档](http://sdllivecontent.sdl.com/LiveContent/)中还提供了[示例事件处理程序](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_204AB86C028A4099A2DAFD31C9901ED8)和[完整文档](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_15E64E07A828429A8AE60D37ED8E474E)（需要用户名/密码）。

# ios - 将标签中的文本作为电子邮件正文的一部分插入

> ID：11072389
> 
> 赞同：0
> 
> 时间：2012-06-17T15:17:10.577
> 
> 标签：ios, email, datepicker

我正在构建一个应用程序，您可以在其中使用日期选择器来选择所需的日期。单击按钮后，日期将显示为标签和文本字段。我有一个单独的按钮来创建电子邮件。如何将所选日期合并到电子邮件正文中？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T06:17:58.290

当您打开 mfmailcomposer 表时，在您的电子邮件代码中尝试此代码。

```
 MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;
[picker setSubject:yoursubject];

    NSString *emailBody = [NSString stringWithFormat:@"%@",yourlabel.text];

    [picker setMessageBody:emailBody isHTML:YES];
[self presentModalViewController:picker animated:YES];
    [picker release]; 
```

# scala - 使用默认工具在 Scala/Play 中连接自定义用户名

> ID：11072393
> 
> 赞同：2
> 
> 时间：2012-06-17T15:17:27.933
> 
> 标签：scala, playframework-2.0

在我的 Scala/Play 应用程序中，我必须使用数据库，但没有默认用户和密码，因为每个经过身份验证的应用程序用户都绑定到不同的数据库用户。所以我想在获取连接时指定用户名和密码，比如：

```
DB.withConnection(user = "James", password = "secret") { ... } 
```

现在我在文档中找不到这样的功能（老实说，我不确定如何为我的问题指定搜索查询）。

还有一个问题：考虑到会话存储在用户端，将用户密码存储在会话中是否安全？或者当不同的数据库用户使用应用程序时，这种情况有什么最佳实践吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:42:00.630

**回答问题 1**

在 Play 中，您可以按名称获取数据源：

```
def getDataSource(name: String): DataSource 
```

您必须对包中的内容进行大量黑客攻击`play.api.db`才能获得所需的功能。

那，或者如果您的应用程序的用户数量很少，您可以预定义一堆数据源，并通过他们的登录名检索连接，例如：

```
db.bob.url="jdbc:h2:mem:db_for_bob"
db.bob.driver=org.h2.Driver

db.alice.url="jdbc:h2:mem:db_for_alice"
db.alice.driver=org.h2.Driver 
```

和

```
DB.withConnection("bob") { implicit connection => 
```

或者

```
DB.withConnection(userNameKnownAtRuntime) { implicit connection => 
```

**回答问题 2**

即使会话中的数据使用应用程序机密进行了高度加密，我还是建议不要在客户端存储这些数据。相反，根据[OAuth 2 规范中的本节实施](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-27#section-4.3)**资源所有者密码凭据授予**的内容。这将为您的客户提供一个仅在一段时间内有效的令牌，如果需要，可以在服务器端无效。

# java - 用Java“异步”（有点）为缓存构建一个对象：howto？

> ID：11072398
> 
> 赞同：0
> 
> 时间：2012-06-17T15:17:47.167
> 
> 标签：java, concurrency

假设您有这种代码：

```
public final class SomeClass
{
    private final Map<SomeKey, SomeValue> map = new HashMap<SomeKey, SomeValue>();

    // ...

    public SomeValue getFromCache(final SomeKey key)
    {
        SomeKey ret;
        synchronized(map) {
            ret = map.get(key);
            if (ret == null) {
                ret = buildValue(key);
                map.put(key, ret);
            }
        }
        return ret;
    }

 //etc
 } 
```

问题在于性能：如果`buildValue()`是一个昂贵的函数，那么一个调用者必须建立它的值将阻塞所有其他调用者，其值可能已经存在。我想找到一种机制，在这种机制中，调用者必须构建一个值*不会*阻塞其他调用者。

我不敢相信这个问题还没有得到解决（*和*解决）。我试图用谷歌搜索解决方案，但到目前为止找不到。你有链接吗？

我正在考虑使用 a `ReentrantReadWriteLock`，但还没有任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:24:09.660

我认为部分问题是您拥有的 get 方法似乎是同步的。仅此一项就很难异步执行任何操作。看来您的 get 应该接受回调。

《Java 并发实践》一书详细介绍了使用 ConcurrentHashMap 和 FutureTasks 的出色缓存 - 查看[http://jcip.net/listings/Memoizer.java](http://jcip.net/listings/Memoizer.java)

您仍然需要调整该类以使其异步 - 它仍然会在计算任务时阻塞当前线程，但它会阻止两个线程计算同一事物。如果一个线程已经在计算它并且另一个线程想要它，它将等到计算完成而不是开始新的计算

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:49:26.953

[Guava](https://code.google.com/p/guava-libraries/)有一个*非常*可靠的解决方案，基于 Doug Lea 的一些工作，他编写了大部分`java.util.concurrent`. （披露：我为 Guava 做出了贡献，尽管我根本没有从事缓存工作。）

`Cache`关于 Guava包的用户指南文章在[这里](https://code.google.com/p/guava-libraries/wiki/CachesExplained)，但语法看起来像这样......

```
LoadingCache<Key, Graph> graphs = CacheBuilder.newBuilder()
   .maximumSize(1000)
   .expireAfterWrite(10, TimeUnit.MINUTES)
   .removalListener(MY_LISTENER)
   .build(
       new CacheLoader<Key, Graph>() {
         public Graph load(Key key) throws AnyException {
           return createExpensiveGraph(key);
         }
       }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T16:11:01.107

ReentrantReadWriteLock 可能是一个解决方案：从 map 获取数据时使用读锁，而在构建数据并将其放入 map 时使用写锁。这种方案的缺点是：写锁会锁住整个map，所以buildValue就变成了一个同步的方法，当写进map的缓存太多时，不得不一个一个地写。

另一种方法是使用**java.util.concurrent.ConcurrentMap** ，那么当您将数据放入 map 时，您不需要使用**putIfAbsent进行任何锁定。**缺点是可能会在不同的线程中同时构建具有相同键的数据，但这不会成为问题，除非您的应用程序需要严格的内存使用。

# java - 找到数字的平均值

> ID：11072402
> 
> 赞同：-2
> 
> 时间：2012-06-17T15:18:23.487
> 
> 标签：java

一个简单的java程序，输入学生姓名，求他获得的三门科目的平均分

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

class MyException extends Exception
{

    MyException(String s)
    {
        super(s);
    }
}

class Student 
{
    String name;

    String inputName()
    {
        return name;
    }

    void average(int [] a)
    {
        int d;

        if ((a.length)==3)
        {
            d = (a[0]+a[1]+a[2])/3;
            if (d>50)
                System.out.println(" Congratulations!!! "+name+ " 
                        you have passed the examination");
            else
            System.out.println(" Oops  " +name+"  Try Later!!");
        }
    }

public static void main(String x[]) throws IOException
{
    Student s= new Student();
    int args[] =new int[3];
    System.out.println("Enter name of the student:");
    BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
    s.name=br.readLine();
    System.out.println("Name of the student is " +s.inputName().trim());
    System.out.println("Marks in Physics = ");
    args[0]=Integer.parseInt(br.readLine().trim());
    System.out.println("Marks in Chemistry = ");
    args[1]=Integer.parseInt(br.readLine().trim());
    System.out.println("Marks in Mathematics = ");
    args[2]=Integer.parseInt(br.readLine().trim());**$$**
    s.average(args);**##**
}
} 
```

代码没有错误。代码一直执行到**$$** step，但是**##**指示的step没有执行。不知道为什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:32:16.260

以下是测试运行的输出：

```
输入学生姓名：
你好
学生的名字是你好
物理分数 =
52
化学分数 =
52
数学分数 =
52
 恭喜！！！你通过了考试

```

因此，该方法实际上正在执行，但是您没有看到任何输出的原因是，就像其他人指出的那样，不满足以下条件

```
if (d > 51) 
```

此外，添加 else 部分也很好，如下所示：

```
if (d > 51)  {
    System.out.println("Congratulations!!! you have passed the examination");
} else {
    System.out.println("Sorry!!! you have failed the examination");
} 
```

# wpf - 将集合传递给 viewmodel 并返回所选项目

> ID：11072403
> 
> 赞同：0
> 
> 时间：2012-06-17T15:18:26.030
> 
> 标签：wpf, mvvm

我有一个加载了 ProductList 的 View / ViewModel。此列表在屏幕上不可见。

我需要做的是显示一个新的视图/视图模型（例如 SelectProductView / SelectProductViewModel），将 ProductList 传递给它们，在用户选择特定产品后，关闭此视图并使用所选产品。

实现这一目标的最佳方法是什么？

我正在使用 MVVMLight，但我想这些想法不应该仅限于此。最简单的方法是创建一个视图，并将集合传递给它，但这听起来对 MVVM 不友好。我正在考虑从第一个 ViewModel 创建一个 SelectProductViewModel 并将集合传递给它，但我不知道如何自动创建 SelectProductView 并将其绑定到创建的 SelectProductViewModel。

编辑：在我的应用程序视图结构中有点复杂。我有一个主视图，它基本上需要托管一个 SelectProductView，因为这个视图必须覆盖整个屏幕。MainView 包含许多子视图和孙视图（通过选项卡），因此可能有 3 个不同的子视图或大子视图可以发出选择产品的请求。此外，某些视图不会预加载产品，因此该任务可能应该传播到 SelectProductViewModel。

结构示例：

```
 MainView
                        /                   \
         ChildViewA                                   ChildViewB
            /  \                                       /     \
GrandChildViewA1 GrandChildViewA2            GrandChildViewB1 GrandChildViewB2 
```

因此，GrandChildViewA1、ChildViewB 和 GrandChildViewB2 可以发出选择产品的请求。只有发出请求的视图才能获得选择的产品，其他人不应理会它。GrandChildViewA1 将在其中加载产品，但 GrandChildViewB2 不会在其中加载 ProductList。这意味着，出于性能考虑，GrandChildViewA1 应该将产品列表传递给 SelectProductViewModel，而 GrandCHildViewB2 中不会包含产品列表，因此 SelectProductViewModel 应该从数据库中获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:39:43.273

我将创建一个通用视图模型，它定义了接收数据的合同。

```
public abstract class PassDataViewModel<T> : ObservableObject
{
    public T Data { get; }
} 
```

然后，我会为您的产品列表创建一个更通用的 ViewModel，如下所示：

```
public class SelectProductViewModel : PassDataViewModel<Product>
{
    private Product _selectedProduct;
    private ObservableCollection<Product> _products = new ObservableCollection<Product>();

    public SelectProductViewModel(IList<Product> products)
    {
        _selectedProduct = _products.First();
    }

    public IEnumerable<Product> Products
    {
        get { return _products; }
    }

    public Product SelectedProduct
    {
        get { return _selectedProduct; }
        set
        {
            _selectedProduct = value;
            OnPropertyChanged("SelectedProduct");
            OnPropertyChanged("Data");
        }
    }

    public Product Data
    {
        get { return _selectedProduct; }
    }
} 
```

您可以通过以下方式使用它：

1.  您的第一个 viewModel 可以创建*SelectProductViewModel*的实例（例如，当调用命令时）
2.  您将产品列表传递给新的*SelectProductViewModel*实例。
3.  使用 DataTemplate 更改屏幕上的视图（[这篇](https://stackoverflow.com/a/6114865/577417)文章将向您展示如何执行此操作）。
4.  *在父视图模型中有一个属性，该属性返回从SelectProductViewModel*的数据属性返回的产品（您需要将 PropertyChanged 事件传播到父视图模型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:13:25.103

最简单的方法是采用视图模型优先方法并使用对话服务来显示选择视图。

您的带有 ProductionList 的视图模型只需调用对话服务并将 ProductSelectionViewmodel 与 ProductionList 作为参数。因为这是视图模型，所以您必须首先创建一个数据模板，以便 WPF 知道如何呈现您的 ProductSelectionViewmodel。

[这](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)是一个简单对话服务的链接。

顺便说一句：在我看来，viewmodel 第一种方法在做 mvvm 时要容易得多。

编辑：

在 SelectProductCommand 中的 ProductionListViewModel 中

```
 var selectProductViewModel = new SelectProductViewModel(this.ProductionList);
 var result = this.uiDialogService.ShowDialog("Select Product", selectProductViewModel );

 //if result true, simple get the selected product
 this.SelectedProduct = selectProductViewModel.MySelectedProduct; 
```

仅此而已 - 简单易行

# c - 为什么 ++*p++ 有效而 ++i++ 无效？

> ID：11072407
> 
> 赞同：3
> 
> 时间：2012-06-17T15:18:38.657
> 
> 标签：c, linux, gcc

假设`p`是一个整数指针并且`i`是一个整数：

`*p++`给出对应于**的整数值**`p`。

`i++`给出一个加 1**的整数值**

由于通过行为，上述两者都产生整数， `++*p++`并且`++i++`不应该报告相同的错误？但是为什么`++*p++`在 `++i++` 给出编译器错误时起作用？

```
int main()
{
int a[10] = {0};

int *p = (int*)&a;
int i = 0;

// printf("%d", ++i++); -- FAILS error: lvalue required as increment operand   
printf("%d\n", ++*p++ ); // Prints 1
return 0;
} 
```

**编辑**

++i++分解如下：

```
i++
++(result) 
```

这正是我感到困惑的地方：以同样的方式我们可以将 ++*p++ 分解为

```
*p++ 
++(result). 
```

*p++ 返回一个值 (rvalue) ，而不是指针。那么为什么会有区别呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-17T15:24:20.567

后增量的结果是一个右值。你不能修改它。`++i++`试图修改编译器拒绝的那个右值。

p++ 产生一个右值，但它是指针类型。你不能修改它，但你可以取消引用它。`*p++`取消引用该右值。这为您提供了它指向的值，作为*lvalue*。然后，前增量修改它指向的左值，而不是后增量产生的右值。

编辑：我可能还应该再补充一点：即使`++i++`编译器允许，结果也将是未定义的行为，因为它尝试在`i`没有中间序列点的情况下修改两次。在 的情况下`++*p++`，这也不会发生 - 后增量修改指针本身，而前增量修改指针指向的内容（在它增加之前）。由于我们正在修改两个完全不同的位置，因此不会导致未定义的行为。

如果您非常想这样做，您仍然可以通过将指针初始化为指向自身来获得未定义的行为，在这种情况下，两个增量都会尝试修改指针。委员会并没有非常努力地阻止这种情况，可能是因为只有真正的学究才可能会想到这种疯狂的事情。

底线：在这种情况下，编译器主要是试图保护你免受自己的伤害，但如果你足够努力，你仍然可以在脚上开枪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T15:24:06.857

`++i++`分解如下：

```
i++
++(result) 
```

问题：`i++`返回一个右值，即一个“临时”值，不可增加。这是因为在递增之前`i++`返回。`i`

# vb.net - 自定义控件从对象浏览器中消失

> ID：11072411
> 
> 赞同：1
> 
> 时间：2012-06-17T15:19:17.637
> 
> 标签：vb.net

我的问题是如何更新自定义控件。

我下载了我构建的[这个所有者绘制的自定义控件](http://www.codeproject.com/Articles/26622/Custom-Button-Control-with-Gradient-Colors-and-Ext)，然后将 DLL 复制到项目的 Debug 文件夹并从那里将其加载到工具箱中。

我决定在另一个项目上使用这个按钮。看到控件仍在工具箱中，我有点惊讶，但它似乎工作得很好。我决定改变这个自定义按钮的行为。工具箱中的按钮引用了旧版本号。所以我删除了它并加载了新重建的DLL。

**现在问题来了。**第一个应用程序 - 将 DLL 添加到工具箱的那个应用程序 - 仍然可以正常运行，但第二个应用程序抛出错误，说`Type 'CButtonLib.CButton' is not defined`. 当我将按钮添加到表单时，它看起来没问题。我可以更改它的属性，它会显示在代码窗口和对象浏览器中。**但是一旦我尝试运行它并抛出错误，它就不再出现在对象浏览器**中。代码窗口中的引用失去了智能感知。

我尝试过的事情包括：

*   将 DLL 复制到项目的调试和发布文件夹，然后从那里将它们加载到工具箱中。
*   将其从工具箱中完全删除，只需添加一个引用，然后直接从第一个项目中复制和粘贴一个按钮。
*   从第一个项目中复制带有 CButton 的表单。
*   在网上搜索答案
*   对着电脑发誓。

似乎没有任何效果，我现在已经花了一天多的时间试图解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:37:10.943

我从来没有深究这一点。最后，我只需要使用不同的名称重新创建整个自定义控件项目。我怀疑我将原始项目添加到*不同*程序的工具箱中的方式——而不是将其添加到它附带的测试项目中——可能与它有关，但这只是一个猜测。无论如何，我现在可以毫无问题地修改和更新新控件，所以一切都很好。:-)

# c - 以编程方式请求 root 访问权限

> ID：11072413
> 
> 赞同：0
> 
> 时间：2012-06-17T15:19:26.627
> 
> 标签：c, linux, sockets

> **可能重复：**
> [如何以编程方式获得 root 权限？](https://stackoverflow.com/questions/2483755/how-to-programmatically-gain-root-privileges)

有没有办法通过 linux 以编程方式向 C 中的用户请求 root 访问权限？

我正在使用原始套接字，因此需要 root 访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:50:50.417

惯用的方法是让你的程序 suid-root，并让前两行`main`打开原始套接字并删除 root。

从安全的角度来看，这仍然不太理想，因为：

1.  程序后期的妥协将使攻击者能够访问原始套接字，该套接字可用于许多恶意目的，可能获得足够的信息来提升权限。

2.  任何 suid-root 二进制文件都可能受到动态链接器或之前运行的启动代码中的缺陷的影响`main`。虽然这些已经变得越来越少见，但即使是去年，在 glibc 的链接器中使用`LD_AUDIT`东西再次发现了一个。由于这个原因，许多具有安全意识的系统（例如 Openwall Linux）完全禁止 suid-root 二进制文件。

一种更安全但更复杂的方法是让您的程序作为具有提升（但仍然是最小）特权的守护程序运行，并让 CLI 接口只是一个简单的包装器，它通过一个普通协议通过 unix 套接字与守护程序通信，该协议可以以机械方式检查漏洞。

# python - Supervisord 中的“环境”和“目录”选项

> ID：11072414
> 
> 赞同：1
> 
> 时间：2012-06-17T15:19:30.280
> 
> 标签：python, uwsgi, supervisord

我正在使用[Supervisord](http://supervisord.org/)来管理服务器上的 uwsgi 进程，我遇到了这两个选项：`environment`以及`directory`使用 Supervisord 运行程序。

我查看了[文档](http://supervisord.org/configuration.html)，但仍然不确定它们到底做了什么。澄清一下，这里的上下文是我正在运行一个带有 uwsgi 的 web2py 应用程序。在 uwsgi 的配置中，我已经设置了 PYTHONPATH 和它应该运行的 virtualenv。

有人可以解释一下这两个选项的用途以及必要时如何设置它们吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T20:39:16.160

这两个选项都有很好的文档记录（请参阅[子流程环境](http://supervisord.org/subprocess.html#subprocess-environment)和[配置文件文档](http://supervisord.org/configuration.html)）。

归根结底，这两个选项让您可以为 supervisord 启动的子进程设置当前工作目录和完整环境。这是两个基本的 UNIX 概念，许多进程的行为可能会有所不同，具体取决于它们的设置方式。有关这些概念的深入讨论，请参阅Wikipedia 上的[工作目录](https://en.wikipedia.org/wiki/Working_directory)和[环境变量。](https://en.wikipedia.org/wiki/Environment_variable)

通常，如果您的 uwsgi 进程运行正常，则根本不需要修补这些。

如果您确实需要设置它们，只需将条目添加到您的配置中，设置`directory`为系统上的现有路径，并将`environment`值设置为由逗号连接的一组 KEY=VALUE 对。

# java - 动态呈现的 panelGroup 内的 CommandButton 无法执行 actionlistener

> ID：11072415
> 
> 赞同：0
> 
> 时间：2012-06-17T15:19:32.680
> 
> 标签：java, jsf

我有一个非常简单的 xhtml 文件，其中在单击切换按钮时将`panelGroup`包含 a`commandButton`添加到页面中，但是动态添加`commandButton`的内容在单击时无法执行`actionlistener`。

完整代码如下：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:p="http://primefaces.org/ui">

    <h:head>
    </h:head>
    <h:body>
        <h:panelGroup id="checkDyna">
            <h:panelGroup rendered="#{listRetriever.booleanStatus}" >
                <h:form>            
                    <p:commandButton value="check" process="@all" actionListener="#{listRetriever.xx()}"/>
                </h:form>
            </h:panelGroup>
        </h:panelGroup>
        <h:form>
            <p:commandButton value="Toggle" actionListener="#{listRetriever.toggleBooleanStatus()}" update=":checkDyna"/>
        </h:form>

    </h:body>
</html> 
```

豆

```
@ManagedBean(name = "listRetriever")
@RequestScoped
public class ListRetriever implements Serializable {

    private boolean booleanStatus;        

    public void toggleBooleanStatus(){
        if (!booleanStatus)
            booleanStatus=true;
    }

    public void xx(){
        System.out.println("Invoked***");
    }

    public boolean isBooleanStatus() {
        return booleanStatus;
    }

    public void setBooleanStatus(boolean booleanStatus) {
        this.booleanStatus = booleanStatus;
    }

} 
```

在删除 `rendered="#{listRetriever.booleanStatus}"` actionlistener 时成功调用。

在制作豆子`ViewScoped`时，问题也被消除了，但我不想让它比`RequestScoped`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:12:36.587

我`p:commandButton`在一个有条件渲染的面板中**有**这个，当我试图执行`actionlistener`. 这就是`actionlistener`没有被处决的原因。

# asterisk - asterisk 在等待 DTMF 时播放音乐

> ID：11072422
> 
> 赞同：1
> 
> 时间：2012-06-17T15:20:19.633
> 
> 标签：asterisk, dtmf

我正在用星号设置 DISA。我想做的是在星号接收 DTMF 时向呼叫者播放音乐。当接收到“#”的 DTMF 时，DTMF 将停止播放

我曾尝试使用背景（）和回放（）命令，但它们没有达到目的！

有任何想法吗？

汗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:10:06.043

您可以尝试使用[phpagi](http://phpagi.sourceforge.net/)。有一个名为 fastpass_get_data 的函数，可以在播放声音的同时获取 dtmf 输入。

[http://phpagi.sourceforge.net/phpagi22/api-docs/phpAGI/AGI.html#fastpass_get_data](http://phpagi.sourceforge.net/phpagi22/api-docs/phpAGI/AGI.html#fastpass_get_data)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T16:14:59.440

我假设仅使用内置的 DISA 应用程序不能满足您的需求。如果是这样，请使用它。

对星号进行编程有不同的方法。您可以使用普通的拨号方案、ael 拨号方案、AGI、AMI，甚至可以用 C 编写自己的模块。

您可以在拨号方案中做更多的事情，但通常通过 AGI 使用真实语言会导致代码更具可读性。

使用拨号方案应用程序 StartMusicOnHold、StopMusicOnHold 以及 Read 或 WaitExten，您应该能够做您想做的事情。运行 asterisk -rx 'core show application StartMusicOnHold' 等，以了解其中的每一个。

您基本上想运行 StartMusicOnHold，然后使用 Read 或 WaitExten 收集数字，直到完成（可能将它们收集到通道变量中），然后运行 ​​StopMusicOnHold。

# java - JTree 如何响应更改的 DefaultMutableTreeNode？

> ID：11072423
> 
> 赞同：1
> 
> 时间：2012-06-17T15:20:21.800
> 
> 标签：java, swing, jtree, treenode, event-dispatch-thread

只是想弄清楚如果您在非 EDT 线程中更改 DefaultMutableTreeNode 的用户对象，就线程而言会发生什么？

我不是在谈论 DefaultTreeModel 事件，即 insertNodeInto 和 removeNodeFromParent，我很清楚它们应该始终在 EDT 中运行......*我认为......*

在节点的用户对象发生更改的情况下，似乎 JTree.TreeModelHandler 是“侦听”此类事件的东西......但是有理由期望侦听器只会被通知此类更改事件发生在哪里？并且只会在同一个线程中传播它的响应？

因此，显然，我假设这是一个相当基本的“观察者”模式。

那么这是否意味着 JTree 节点中的大多数更改实际上必须发生在 EDT 中，否则会有事情不会按您预期的时间发生的风险？

在 DefaultMutableTreeNode 的 API 中，它确实说“你必须自己进行同步”......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T17:14:53.590

Swing 线程规则非常简单：Swing 是单线程的，所有涉及 Swing 组件的操作都应该发生在 EDT 上。

因此，一旦在 a 上设置了`TreeModel`包含`DefaultMutableTreeNode`s，`JTree`您最好确保对模型（或节点）所做的任何更改以及触发的相应事件都发生在 EDT 上。

# xcode - 使用表格将对象/图像添加到视图

> ID：11072428
> 
> 赞同：1
> 
> 时间：2012-06-17T15:20:50.553
> 
> 标签：xcode, uitableview, views, nib, image

首先是 Xcode 4 iOS 5.0。这就是我想要做的。我有一个视图，我们将其称为 view1，它有一个按钮，当按下该按钮时，会出现一个带有表格的不同视图，称为 tableView。我有多个图像我想在这个表中，当图像被选中时，它会出现在 view1 中。我已经研究了所有这些，只是找不到合适的材料。按钮和表格已经一起工作了，我可以将对象添加到表格中，但是让我选择的那些对象出现在 view1 上是我不理解的。我无法让两个 nib 文件一起工作，或者我做错了。

第二个问题，猜想这是相似的，view1 显示从照片库中选择的图像但是有没有办法打开照片库，选择照片，并让它出现在不同的 nib 视图中？这又是让 NIB 一起工作。我会很感激我能得到的所有帮助。（照片库和照片选择已经有效，因此不需要代码）。感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T05:35:39.863

我已使用[此](https://github.com/AalokParikh/ELCImagePickerController)示例来获取您在上述问题中所描述的内容。但是，通过对委托方法和跳跃进行一些调整，您也会为您的问题找到一些方向。

祝你好运！

快乐编码！:)

并且需要任何帮助，只要请求它，不要犹豫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T05:14:39.720

其他班级的代表可以这样做。

# html - 生成基于内联 HTML 样式的样式表？

> ID：11072432
> 
> 赞同：1
> 
> 时间：2012-06-17T15:21:06.643
> 
> 标签：html, css, parsing, styles, code-generation

一段时间以来，我一直致力于为网站的不同部分设置样式，但是我还没有将我的内联样式放入样式表中。我想知道是否存在解析 HTML 文件并从中生成样式表的工具。例如，这是我网站的一个片段：

```
<div class="block" style="border:1px solid">
    <img id="profile-pic" style="float:left;border:0px"/>
</div> 
```

我希望能够生成这个：

```
.block {
    border: 1px solid;
}

#profile-pic {
    float: left;
    border: 0px;
} 
```

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T21:15:42.353

在这里，我编写了一个函数来完成它（特异性不会很完美，但它会让你开始）：

```
function getInlineStyles() {
  var stylesList = "",
      thisElement,
      style,
      className,
      id;
  $("*", "body").each(function () {
    thisElement = $(this);
    style = thisElement.attr("style");
    className = thisElement.attr("class");
    id = thisElement.attr("id");
    if (id !== undefined) {
      stylesList += " #" + id;
    }
    if (className !== undefined) {
      stylesList += " ." + className;
    }
    if (id !== undefined || className !== undefined) {
      stylesList += "{";
    }  
    if (style !== undefined) {
      stylesList += style;
    }
    if (id !== undefined || className !== undefined) {
      stylesList += "}";
    }
  });
  return stylesList;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T16:38:37.333

尝试使用 Firebug。在 CSS 部分你有这样的东西：

`element.style {`
`border: 1px solid;`
`}`

为了`<div class="block">`

把这个复制进去就行`.block { }`了！这并不容易，但它可以提供帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-17T16:41:54.367

不，没有这样的工具。当有不止一堂课时，你会怎么做？还是一个班级和一个ID？或者是具有 ID 的元素的子元素？

不，以这种方式解析 HTML 以创建高效的 CSS 代码非常复杂。您需要手动执行此操作。

这方面的一般方法是采用 inline-css 重页，并在本地下载。然后，从头开始重建页面。好的一面是您只需要执行一次 CSS。一旦你有了一个全局样式表，其余的页面就会就位。

# c++ - 请解释：for循环后跳过的行？

> ID：11072435
> 
> 赞同：3
> 
> 时间：2012-06-17T15:21:38.477
> 
> 标签：c++, control-flow

我正在尝试使用 C++ 完成我的第一步。

有人可以解释为什么这不能像我期望的那样工作吗？

```
#include <iostream>
#include <stdio.h>

using namespace std;

int main (int argc, char *argv[]) {
    int i;
    printf("[D] sizeof argv is: %d\n", sizeof(argv) );
    printf("[D] sizeof int  is: %d\n", sizeof(int) );
    printf(
        "[D] sizeof argv / sizeof int is: %d\n",
        sizeof(argv) / sizeof(int)
    );

    for (i = 0; i < (sizeof(argv) / sizeof(int)); i++ ) {
        printf("[D] i is: %d\n", i );
        cout << argv[i] << endl;
    }

    if (cout.fail()) {
        printf("cout failed!\n");
    }

    cout << "Hello world" << endl;
} 
```

现在测试：

```
aloism@azzgoat:~/sandbox/tuts$ g++ string02-d.cpp
aloism@azzgoat:~/sandbox/tuts$ ./a.out hello world
[D] sizeof argv is: 8
[D] sizeof int  is: 4
[D] sizeof argv / sizeof int is: 2
[D] i is: 0
./a.out
[D] i is: 1
hello
Hello world
aloism@azzgoat:~/sandbox/tuts$ ./a.out
[D] sizeof argv is: 8
[D] sizeof int  is: 4
[D] sizeof argv / sizeof int is: 2
[D] i is: 0
./a.out
[D] i is: 1
cout failed!
aloism@azzgoat:~/sandbox/tuts$ echo $?
0
aloism@azzgoat:~/sandbox/tuts$ 
```

为什么当 argv 中只有一项（argv[0]，即“./a.out”）时，会跳过“Hello world”？无论是 argc 还是 argv，我都找不到任何理由跳过它！

操作系统是 64 位的 Debian Squeeze (so `sizeof(int) == 4`)。

**更新：**删除了#include 噪音，添加了一些调试。

**更新 2：**根据 user315052 的回答添加了一些调试。（现在证明他是对的。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T15:38:25.707

您的 sizeof 检查有问题，并且始终评估为 2 [在 64 位上]。因此，当您不给程序至少一个参数时，它会尝试从未映射的内存中打印`argv[1]`并崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T15:39:06.737

**编辑：**由于调用了未定义的行为，任何事情都可能发生。调整答案。

“Hello World”可能没有被跳过。意识到你的`for`循环是不正确的。它可能没有出现的一个原因是您打印了一些掩盖消息外观的东西。为了测试这一点，将输出重定向到将显示输出流的二进制内容的东西。

```
./a.out | xxd 
```

另一个原因可能是输出被阻止，因为尝试将指针打印为字符串`std::cout`而失败。`NULL`要对此进行测试，请`std::cout.fail()`在循环中的 print 语句之后检查，`std::err`如果遇到，请发送一条消息。

正如 Boann 所指出的，该程序也可能崩溃。但是，操作系统会为此提供诊断，而您没有报告此类行为。

对于作为函数参数的数组，编译器将它们视为指针。这是从 C 继承的一种行为，其中数组通过“引用”传递，允许数组的名称衰减到其第一个元素的地址（除了少数例外，`sizeof`就是其中之一）。因此，使用`sizeof`来确定元素的数量是`argv`行不通的。C 和 C++ 都提供了两种方法来确定何时`argv`到达向量的末尾。一个是`argc`参数计数。第二个是最后一个元素`argv`必须是`NULL`指针。

下次你有一个真正的数组时，你可以`sizeof`使用以下方法计算元素的数量：

```
SomeThing array[] = { /* ... things ... */ };
size_t array_size = sizeof(array)/sizeof(array[0]); 
```

这样，如果`SomeThing`发生变化，仍然可以正确计算数组大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T15:33:11.783

我无法重现您的错误。在这两种情况下都为我打印了“Hello World”。

```
kjp@vbox:~/Dev/ScratchDir$ ./a.out 
./a.out
Hello world
kjp@vbox:~/Dev/ScratchDir$ ./a.out Hello
./a.out
Hello world
kjp@vbox:~/Dev/ScratchDir$ 
```

你能检查一下是否有任何核心转储吗？

# algorithm - K-Size 子图

> ID：11072438
> 
> 赞同：0
> 
> 时间：2012-06-17T15:22:02.237
> 
> 标签：algorithm, graph, enumeration, subgraph

我需要一种算法来查找大图的 k 大小子图。你的建议是什么？

注意：我的图表是无向的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:12:23.363

一种非常简单的方法是对 K 迭代执行[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)或[DFS](http://en.wikipedia.org/wiki/Depth-first_search)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T15:41:35.053

如果你从一个大图中选择任何 k 个顶点，你可以通过只选择那些顶点和连接它们的边（如果有的话）来制作一个子图。

如果您希望连接您的 k 个顶点，您可以从大图的连接组件中选择 k 个连接的顶点 - 请参阅[http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29)

如果您实际上想要 k 个顶点，使得每个顶点都有一条边将其连接到其他 k-1 个顶点，那么您需要知道这被称为 clique，并且发现这是一个难题 - 请参阅[http:// en.wikipedia.org/wiki/Clique_%28graph_theory%29](http://en.wikipedia.org/wiki/Clique_%28graph_theory%29)

# c - 获取Windows任务栏的高度（Winapi）

> ID：11072439
> 
> 赞同：6
> 
> 时间：2012-06-17T15:22:04.783
> 
> 标签：c, windows, winapi, taskbar

如何计算任务栏高度，以便我的 winapi 应用程序启动它？现在，当我启动我的程序时，它会启动并且它的底部放置在任务栏后面。如何让我的程序在启动后立即移到任务栏上方？我会标记正确的答案。Thnx。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T15:43:55.173

可以使用`SPI_GETWORKAREA`with[`SystemParametersInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx)来获取可用的屏幕尺寸，不包括任务栏，[`GetSystemMetrics`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724385%28v=vs.85%29.aspx)可以获得全屏尺寸，所以任务栏尺寸只是任务栏所在轴的差异，你应该通过比较两者来检查哪个轴axies，因为任务栏我并不总是在底部。

# php - PDF DRM 仅打印一次

> ID：11072443
> 
> 赞同：0
> 
> 时间：2012-06-17T15:22:41.027
> 
> 标签：php, pdf, drm

我正在寻找创建在线礼券并通过贝宝在餐厅网站上出售这些礼券。

该网站基于 Wordpress / PHP，将使用 Gravity Forms / PayPal 插件来捕获用户详细信息并为礼券付款。

我可以创建一个 PDF 证书，客户可以通过打印和访问餐厅来兑换该证书。

现在问题在于礼券的管理。例如，如何阻止客户打印礼券并兑换它。然后下次他们访问餐厅时，再次打印证书。

RoyalMail.com 有某种 DRM 解决方案，在线邮资可以打印一次且仅一次。

如何以编程方式保护我的 PDF 文件，只允许下载/打印一次？

为了澄清起见，我不想知道这是否是一个好主意。我知道这不是一个理想的解决方案。我只想知道怎么做/如果可能的话。没有解决方案是万无一失的，人们总是能够“伪造”或复制证书。我只是想减少这样做的可能性。自然会有一个内部机制来检查已兑换的证书。

关于将咖啡洒在证书上的评论... AFAIK，如果您将现金与衣服一起放入洗衣机，则必须要求英格兰银行重新向您发行钞票。您不能重新打印自己的钞票！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:39:23.433

没有什么可以阻止用户打印任意数量的证书副本。但是无论如何，根据物理副本管理证书是一个非常糟糕的主意。如果有人打印出一张优惠券，然后把咖啡洒在上面，那么他们是否必须再买一张？是什么阻止有人打印出他们的单份副本然后通过复印机运行呢？

如果每张代金券都有一个编码的唯一 ID，那么您所要做的就是记录代金券已被兑换的事实。那么无论有多少物理副本，如果一个凭证已经被兑换过一次，那么如果其他人向您提供相同的凭证，您就知道不要再次兑换它。

# php - SQL INSERT 没有错误

> ID：11072444
> 
> 赞同：0
> 
> 时间：2012-06-17T15:22:53.190
> 
> 标签：php, mysql

我有一个问题，我没有收到任何错误，一切都好像没有错一样！我已经完成了所有这些工作，然后突然之间它就停止了工作。除了这个之外，我所有的其他 SQL 东西都可以在我的脚本上运行：

```
// Submit the form and enter the details into the database
    $result = $dbc->prepare('INSERT INTO users (user_name, pwd, date, user_level) values(?,?,?,?)');
    $result->bind_param('sssi', $username, $hash, $now, $userlevel);
    printf("Errormessage: %s\n", $result->error);
    $result->execute();
    $result->close(); 
```

它不返回任何错误。它很奇怪。没有任何东西被插入到数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:25:26.730

也许先执行，然后检查错误信息？

```
 $result = $dbc->prepare('INSERT INTO users (user_name, pwd, date, user_level) values(?,?,?,?)');
    $result->bind_param('sssi', $username, $hash, $now, $userlevel);
    $result->execute();
    printf("Errormessage: %s\n", $result->error);
    $result->close(); 
```

# java - 如何在特定的时间段内运行方法？

> ID：11072447
> 
> 赞同：0
> 
> 时间：2012-06-17T15:23:03.657
> 
> 标签：java, multithreading

我读[了这个](https://stackoverflow.com/questions/5243233/set-running-time-limit-on-a-method-in-java/5243339#5243339)

您如何知道该方法是成功完成还是被中断？

**编辑**：为了使问题更加清晰和具体。下面是我的代码..我想执行 test.java 文件并获取它的运行时..但是如果需要超过 1 秒，我想显示一条错误消息并停止它本身就在那里..

```
public class cl {  
    public static void main(String args[])throws IOException  
    {  
        String s=null;  
    Process p=Runtime.getRuntime().exec("javac C:\\Users\\Lokesh\\Desktop\\test.java");  
    BufferedReader stdError = new BufferedReader(new InputStreamReader(p.getErrorStream()));  
    while ((s = stdError.readLine()) != null) {  
            System.out.println(s);  
    }  
    Timer timer=new Timer(true);  
    InterruptTimerTask interruptTimerTask=new InterruptTimerTask(Thread.currentThread());  
    timer.schedule(interruptTimerTask,1);  
    try{  
        Runtime.getRuntime().exec("java C:\\Users\\Lokesh\\Desktop\\test");  
    }  
    catch (Exception e)  
    {  
        e.printStackTrace();  
    }  
    finally {  
        timer.cancel();  
    }  
}  
static class InterruptTimerTask extends TimerTask {  
    private Thread thread;  
    public InterruptTimerTask(Thread thread)  
    {  
        this.thread=thread;  
    }  
    @Override  
    public void run()  
    {  
        thread.interrupt();  
    }  
}  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:58:55.453

例如：

```
try {
    Thread.sleep(10000);
    // method successfully completed

} catch (InterruptedException ex) {
    // method was interrupted. You can try sleep some more time if you want
} 
```

`Thread.sleep()`是可以中断的方法之一。可以有任何其他方法，或者如果它检查它的中断状态，甚至可以使用您的方法。如果你的方法意识到有人想打断它，它必须抛出`InterruptedException`（不是必须，有时继续运行会更好）。

**[中断状态标志](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)**

*中断机制是使用称为中断状态的内部标志来实现的。调用 Thread.interrupt 设置此标志。当线程通过调用静态方法 Thread.interrupted 检查中断时，中断状态被清除。一个线程用来查询另一个线程的中断状态的非静态 isInterrupted 方法不会改变中断状态标志。*

*按照惯例，任何通过抛出 InterruptedException 退出的方法都会在这样做时清除中断状态。然而，中断状态总是有可能被另一个线程调用中断立即再次设置。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T15:30:36.087

了解终止线程的最简单方法是使用布尔标志，将其称为“中断”，并在捕获`InterruptedException`. 假设您的代码没有执行任何其他可能引发该异常的操作，您可以在后面的代码中检查标志的值。

# r - 在导出到 xtable 之前按特定变量对表进行排序

> ID：11072450
> 
> 赞同：1
> 
> 时间：2012-06-17T15:23:20.723
> 
> 标签：r, latex

从大量的调查回复数据集中，我必须构建按特定变量的递减值排序的表格。例如，这是我创建的一张表：

```
t8  <- xtabs(meanq8 ~ respondent, data = bfk1)
t13 <- xtabs(meanq13 ~ respondent, data=bfk1)
t18 <- xtabs(meanq18 ~ respondent, data=bfk1)
t23 <- xtabs(meanq23 ~ respondent, data=bfk1)
t28 <- xtabs(meanq28 ~ respondent, data=bfk1)
t33 <- xtabs(meanq33 ~ respondent, data=bfk1)

tab.L6 <- rbind(t8, t13, t18, t23, t28, t33) 
rownames(tab.L6) <- c("I give teachers a sense of overall purpose", "I help clarify the specific meaning of the school's mission in terms of its practical implications for programs and instruction", "I communicate the school mission to staff and students", "I encourage the development of school norms supporting openness to change", "I help teachers understand the relationship between our school's mission and District initiatives", "I work toward whole-staff consensus in establishing priorities for school goals") 
```

这会产生一个 6x4 双精度矩阵，其中列名称为 You、Your.Staff、All.Principals、All.Staff。现在，在我运行 xtable 之前，我需要按 Your.Staff 的降序对 tab.L6 进行排序。

我尝试使用 plyr 和 data.table 以及基本的排序和排序功能。如果我执行以下

```
tL6 <- as.data.frame(tab.L6)
table.L6 <- arrange(tL6, desc(Your.Staff)) 
```

我最终得到了所需的排序但缺少行名。

```
 You Your.Staff All.Principals All.Staff
1   5        5.0            3.8       3.8
2   5        4.5            4.0       3.9
3   5        4.5            3.8       3.6
4   5        4.0            3.5       3.7
5   5        4.0            3.6       3.9
6   4        4.0            3.4       3.7 
```

有没有办法对行名进行排序和保留？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:53:54.533

如何索引您的行名并在排序后添加它们？

```
tab.L6 = as.data.frame(matrix(runif(24,1,100),6))
rownames(tab.L6) <- c("I give teachers...", "I help clarify...", "I communicate..", "I encourage...", "I help teachers...", "I work toward...")
names(tab.L6) = c('You','Your.Staff','All.Principals','All.Staff')
tab.L6$index = 1:6
tab.L6

vecnames = c("I give teachers...", "I help clarify...", "I communicate..", "I encourage...", "I help teachers...", "I work toward...")

(t2 = arrange(tab.L6, desc(Your.Staff)))
rownames(t2) = vecnames[t2$index]
t2 
```

输出：

```
 You Your.Staff All.Principals All.Staff index
I help teachers... 33.620593  94.174583       12.93681  60.34864     5
I work toward...   98.250119  84.166085       79.57018  89.76993     6
I help clarify...  85.478336  52.664455       71.82487  18.08677     2
I encourage...     55.972257  50.095689       55.96154  60.04199     4
I give teachers... 20.183314  28.812243       21.71087  29.02465     1
I communicate..     8.520616   3.409428       75.94298  56.98706     3 
```

然后您可以在导出表之前删除索引列：

```
t2$index = NULL 
```

# php - 如何将此 RDBMS 模式转换为 MongoDB“模式”（以及如何查询它）

> ID：11072451
> 
> 赞同：0
> 
> 时间：2012-06-17T15:23:23.837
> 
> 标签：php, python, mongodb, database-design, nosql

我正在学习如何使用 MongoDB。我需要一段时间才能将我的思维方式从 RDBMS/SQL 转变为 NoSQL。

以下面的表和查询为例，我希望有人能解释我如何使用 mongrel 实现这个简单的 RDBMS 模式，以及如何使用 mongodb 实现查询。

```
CREATE TABLE tag_category (id INT NOT NULL, name VARCHAR(32) );
CREATE UNIQUE INDEX idxu_tag_cat ON tag_category(name);

INSERT INTO tag_category(1, 'books');
INSERT INTO tag_category(3, 'music');
INSERT INTO tag_category(4, 'food');

CREATE TABLE tag (id INT NOT NULL, 
                  categ_id INT REFERENCES tag_category(id),
                  tagval   VARCHAR(32) NOT NULL
                 );

INSERT INTO tag (1,1,'romance');
INSERT INTO tag (2,1,'scifi');
INSERT INTO tag (3,1,'thriller');
INSERT INTO tag (4,2,'rap');
INSERT INTO tag (5,2,'country');
INSERT INTO tag (6,2,'jazz');
INSERT INTO tag (7,2,'classical');
INSERT INTO tag (8,3,'Chinese');
INSERT INTO tag (9,3,'Italian');
INSERT INTO tag (10,3,'French');
INSERT INTO tag (11,3,'South African');

CREATE TABLE item (id INT,
                  entry_date DATE NOT NULL, 
                  name VARCHAR(32) );
CREATE UNIQUE INDEX idxu_item ON item(name);

INSERT INTO item (id, entry_date, name) VALUES(1, '2011-01-01', 'A love supreme');
INSERT INTO item (id, entry_date, name) VALUES(2, '2011-01-01', 'A kind of blue');
INSERT INTO item (id, entry_date, name) VALUES(3, '2011-02-01', 'Believe the hype');
INSERT INTO item (id, entry_date, name) VALUES(4, '2011-01-01', 'Raising Hell');
INSERT INTO item (id, entry_date, name) VALUES(5, '2011-01-01', 'The Chronic');
INSERT INTO item (id, entry_date, name) VALUES(6, '2011-02-01', 'Blue Danube');
INSERT INTO item (id, entry_date, name) VALUES(7, '2011-01-01', 'Schubert Sonata in B flat');
INSERT INTO item (id, entry_date, name) VALUES(8, '2011-01-01', 'Also Sprach Zarathrustra' );
-- ...

CREATE TABLE item_tag (id INT, 
                       item_id INT REFERENCES tag(id),
                       name VARCHAR(32) );

-- INSERT INTO item_tag (id, item_id, name) VALUES () .... 
```

**查询**

为简洁起见，我将描述一个查询，它（希望）包含我期望遇到的大多数用例场景。下面的查询对于使用 SQL 实现是微不足道的 - 使用 mongrel，我不太确定如何做到这一点：

*   获取所有标记为 RAP 或古典（在音乐类别中）且条目日期大于“2011-01-01”的项目

回顾一下我的问题：

1.  我将如何“移植”上面的模式以便它可以在 mongodb 中实现
2.  如何使用 mongodb API 请求上述查询中描述的项目？

我熟悉 Python 和 PHP - 所以使用 PHP 或 Python API 的解决方案会很棒（尽管我偏向于 Python）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:12:22.483

文档模式的好处是您不必从关系转换为它 - 您可以自己考虑它。考虑您将对集合进行的查询，然后考虑如何使用您选择的语言处理数据。

我会考虑类似于单个集合的东西，其中每个文档代表一个项目。每个项目都可以有一个名称、ID、进入日期，可能还有一个类别以及一组标签。我也可以考虑将类别放入标签数组中，就像它是另一个标签一样。这取决于查询以及我将存储的项目有多么不同（食物和音乐可能需要单独的类别字段）。

如果您将类别保留在其自己的字段中，您的文档可能如下所示：

```
{
    "_id" : 1,
    "entry_date" : ISODate("2011-01-01T05:00:00Z"),
    "title" : "A love supreme",
    "category" : "music",
    "tags" : [
        "jazz",
        "American"
    ]
} 
```

如果你把它用作标签，它会是这样的：

```
{
    "_id" : 1,
    "entry_date" : ISODate("2011-01-01T05:00:00Z"),
    "title" : "A love supreme",
    "tags" : [
        "music",
        "American",
        "jazz"
    ]
} 
```

现在要查询，您只需`find`组合您想要的条件。如果是一种，它将是：

```
db.items.find({entry_date:{$gt:new Date(2011,0,1)},
                tags:{$in:["rap","classical"]}}) 
```

`category:"music"`从技术上讲，如果您在电影或其他东西上可能有这些标签，您可以添加。

在第二种情况下，它可能是：

```
db.items.find({entry_date:{$gt:new Date(2011,0,1)}, 
               tags:"music",tags:{$in:["rap","classical"]}}) 
```

由于您可以在 tags 数组上拥有[多键索引，并且 MongoDB 支持](http://www.mongodb.org/display/DOCS/Multikeys)[复合索引](http://www.mongodb.org/display/DOCS/Indexes#Indexes-CompoundKeys)（如果您经常按标签和 entry_date 查询），这将是一个非常有效的查询。

# ios - 如何使用 Storyboard 将 UISegmentedControl 添加到我的 UIToolbar？

> ID：11072452
> 
> 赞同：4
> 
> 时间：2012-06-17T15:23:28.117
> 
> 标签：ios, storyboard, uitoolbar, uisegmentedcontrol

1.  我正在尝试将分段控件添加到下面的 UIToolbar 中，但是当我尝试在 Storyboard 中将其拖动时，它会替换我的表格视图。
2.  另外，当我尝试将 UIBarButton 添加到我的工具栏时，它会将我的原型单元格向下推......我的视图层次结构是否错误？
3.  无论如何，当我添加 UIBarButton 项目时，在模拟器中，工具栏不是我在导航控制检查器中设置的黑色透明。那是怎么回事？

谢谢！

![在此处输入图像描述](../Images/ce97c75378c0406833a1586a66850ead.png) ![在此处输入图像描述](../Images/02fbca90e45d5d287cd65adcc8e9df8c.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T20:20:14.420

*要使用界面生成器*在工具栏中创建*分段控制*元素，可以使用以下提示

 *1）在导航控制器中创建*分段控制栏按钮项：*

![在导航控制器中创建分段控制栏按钮项](../Images/b0f58187daee57c320d056e4631a85c3.png)

2) 将*Bar Button Item*拖动到 Navigation Item

![将条形按钮项向上拖动到导航项](../Images/f01788575ed407c29e37f3fae9bdf39e.png)

3）然后你应该得到以下结构

![产生的结构](../Images/027ff27f3b327be5d4db035dc937c233.png)

4）现在您可以选择*分段控件*来设置其属性

![选择分段控件以设置其属性](../Images/2168f38cb3986ea7c3b90e28686a68a0.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T16:57:28.463

1 - 以编程方式进行。您需要先为 UIToolbar 分配一个框架，然后您可以在其中添加元素（segmentedControl）。我建议尽管使用`UIBarButtonItems`，这基本上是相同的。

要将其固定在底部，请尝试这样做：

```
#define SCREEN_FRAME [[UIScreen mainScreen] applicationFrame]

CGRect frame = CGRectMake(0, [[UIScreen mainScreen] bounds].size.height - 44, [[UIScreen mainScreen] bounds].size.width, 44);
UIToolbar *toolBar = [[UIToolbar alloc]initWithFrame:frame];
toolBar.frame = CGRectMake(0,self.view.frame.size.height-toolBar.frame.size.height,SCREEN_FRAME.size.width,toolBar.frame.size.height);

//Setting up the items

UIBarButtonItem *first = [[[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"image.png"] style:UIBarButtonItemStylePlain target:self action:@selector(yourAction:)] autorelease]; 
UIBarButtonItem *second = [[[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"image.png"] style:UIBarButtonItemStylePlain target:self action:@selector(yourAction:)] autorelease]; 

//Creating an array with the items
NSArray *items = [NSArray arrayWithObjects:first,second, nil];

//Assigning the array to the toolBar
[toolBar setItems: items]; 
```

然后你可以设置它的风格

```
mytoolbar.barStyle = UIBarStyleBlack; 
```

2 - 同上，取景。

3 - 您需要将您的 navigationController 样式设置为黑色。
使用`self.navigationController.navigationBar.style = UIBarStyleBlack`；，或者在 IB 中选择按钮并从 Inspector 中将 Tint 或 Style 设置为您想要的任何内容。

还要检查[这个](https://stackoverflow.com/questions/5958956/how-to-add-a-uitoolbar-to-a-uitableviewcontroller-programmatically)问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T16:42:40.623

我想这里的某个地方有一个导航视图控制器。他们有自己的工具栏，但它是隐藏的和空的。您看到的工具栏只是一个工具栏的模拟，目的是让您编辑 UI。

因此，要使用情节提要执行此操作，请不要将分段控件添加到模拟工具栏，创建一个新工具栏并将其添加到控制器中可用的视图树中（作为表视图的同级）并创建一个 IBOutlet 以引用它。然后在您的 viewDidLoad 方法中，将工具栏中的项目分配给视图控制器已经创建的工具栏。

在此示例中，我在视图控制器上创建了一个名为（巧妙地）工具栏的属性：

```
@property (nonatomic, retain) IBOutlet UIToolbar toolbar; 
```

在我的视图控制器的实现中，我手动分配了工具栏项：

```
-(void)viewDidAppear:(BOOL)animated 
{
    [self setToolbarItems:self.toolbar.items animated:NO];
    [self.navigationController setToolbarHidden:NO animated:YES];
} 
```

当视图控制器弹出时，您需要隐藏工具栏，例如在调用视图控制器中：

```
-(void)viewWillAppear:(BOOL)animated
{
    [self.navigationController setToolbarHidden:YES animated:YES];
} 
```

当然，假设你想隐藏它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-14T14:57:02.760

我通过将 UISegmentedController 放在 Bar Button Item 中来做到这一点。

将工具栏添加到 UINavigationController 窗口，然后在 ViewController 屏幕上启用此工具栏的显示。

将一个条形按钮拖入 ViewController 屏幕上的工具栏，然后将一个 UISegmentedController 拖入其中（将按钮的大小调整为屏幕的整个宽度）

要将其全部连接起来，从 UISegmentedController 按住 ctrl 并拖动到相应的 .h 文件，从“引用插座”拖动到黄色视图控制器图标（使用相同的变量名），然后从“ValueChanged”拖动到黄色图标（选择要在新选择上调用的控制器上的方法）。

这一切似乎都按预期工作。（如果你不能在控制器上选择一个段来设置一个初始值，你没有按照上面的描述连接参考插座。这让我难了一会儿。）*

# objective-c - 如何使用 NSOpenPanel 只获取文件名，而不是完整目录？

> ID：11072454
> 
> 赞同：3
> 
> 时间：2012-06-17T15:23:45.887
> 
> 标签：objective-c, xcode, macos, cocoa, nsopenpanel

这是我的代码：

```
NSOpenPanel  *panel = [NSOpenPanel openPanel];
[panel setAllowsMultipleSelection:YES];
[panel runModal];

NSInteger count = [[panel URLs] count];

for (int i=0; i<count; i++) {
   NSLog(@"%@", [[panel URLs] objectAtIndex:i]);
} 
```

但输出类似于`file://localhost/Volumes/....`

如何获取所选文件的基本名称（例如 Cat.jpg）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:36:13.593

```
NSURL *url = ...;
NSString *filename = [[url path] lastPathComponent]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-04T03:47:31.990

在这种情况下，只需要没有任何扩展名的文件名：

```
NSString *fileName = [[path lastPathComponent] stringByDeletingPathExtension]; 
```

# ios - 将数据保存到 iOS 的最佳方法？

> ID：11072455
> 
> 赞同：7
> 
> 时间：2012-06-17T15:23:46.950
> 
> 标签：ios, xcode, ios5, save

在我的应用程序（iOS 5）中，我想保存数据 - 我想节省债务。所以是：

*   加或减钱
*   金额
*   以及欠债的姓名（或欠债的姓名）

但我不知道如何保存数据（NSUserdefaults、Core data、SQLLite）

也许你能告诉我拯救它们的最佳方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T16:20:42.227

在设备上存储少量数据的最简单方法是使用 NSUserDefaults。但只能以这种方式保存属性列表。属性列表是 6 种类型的对象的组合，NSNumber、NSString、NSArray、NSDictionary、NSDate、NSData。在您的情况下，这很容易做到。例如，要保存新的债务记录，您可以使用以下方法：

```
#define DEBTS_LIST_KEY @"listOfAllDebts"
#define DEBTOR_NAME_KEY @"debtorName"
#define DEBT_AMOUNT_KEY @"amountOfDebt"

-(void) saveDebt:(CGFloat) debtAmount forName:(NSString *) debtorName
{
    // pointer to standart user defaults
    NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
    // the mutalbe array of all debts
    NSMutableArray * alldebtRecords = [[defaults objectForKey:DEBTS_LIST_KEY] mutableCopy];
    // create new record
    // to save CGFloat you need to wrap it into NSNumber
    NSNumber * amount = [NSNumber numberWithFloat:debtAmount];

    NSDictionary * newRecord = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:amount,debtorName, nil] forKeys:[NSArray arrayWithObjects:DEBT_AMOUNT_KEY, DEBTOR_NAME_KEY, nil]];
    [alldebtRecords addObject:newRecord];
    [defaults setObject:alldebtRecords forKey:DEBTS_LIST_KEY];
    // do not forget to save changes
    [defaults synchronize];
} 
```

要阅读债务清单，您已经阅读过类似的内容。

但我建议你使用核心数据。它更加灵活，您不必编写所有这些代码来管理您的数据（编辑现有记录或删除它们）。例如，当您想要保存债务日期时，您将能够更轻松地扩展您的模型。这是[一个很好的教程的链接](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T16:10:01.523

如果记录的数量是用户定义的，并且会随着应用的使用而增长，我建议使用 SQLite 支持的 Core Data。如果您在现代 Xcode（即 Xcode 4）中工作，则创建模型非常简单且图形化。如果你以前使用过 ORM 框架，那么查询等的接口应该很容易掌握。

搜索一些教程，但要具体找到与您的 Xcode 版本相匹配的教程，因为 Core Data 开发最近发生了很大变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T16:01:57.973

好的和简单的方法是创建自己的对象并使用 NSCodying 和 NSCopying 序列化它们

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCopying_Protocol/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCopying_Protocol/Reference/Reference.html)

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)

# c# - 为什么 DispatcherTimer 委托在 WinRT 中工作？

> ID：11072456
> 
> 赞同：0
> 
> 时间：2012-06-17T15:23:51.910
> 
> 标签：c#, windows-phone-7, windows-8, windows-runtime, microsoft-metro

**下面的代码适用于 Windows Phone 7**

```
 private void ShowTime()
    {
        txtTime.Text = get24hour();

        //display the Date and week.
        DateTime nowtime = DateTime.Now;
        txtWeek.Text = nowtime.DayOfWeek.ToString();
        txtDate.Text = nowtime.Date.ToString("MM/dd");   

        //create timer to fresh to time
        DispatcherTimer timer = new DispatcherTimer();
        timer.Interval = TimeSpan.FromMinutes(1);
        timer.Tick += timer_Ticker;
        timer.Start();        
    }

    private void timer_Ticker(object sender, EventArgs e)
    {
        txtTime.Text = get24hour();
    }

    private string get24hour()
    {
        return DateTime.Now.ToString("HH:mm");
    } 
```

**但 WinRT 中的错误（地铁）**

错误部分：

```
 timer.Tick += timer_Ticker; 
```

错误信息：

```
 No overload for 'timer_Ticker' matches delegate 'System.EventHandler<object>' 
```

**我该怎么做**
我尝试将代码更改为

```
 private void timer_Ticker()
    {
        txtTime.Text = get24hour();
    } 
```

**结果**
但它再次不起作用，为什么以及如何解决它？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:02:14.707

```
timer.Tick += new EventHandler<object>(timer_Tick); 

private void timer_Tick(object sender, object e)
{
} 
```

参考[这个链接](http://www.devdiv.com/DispatcherTimer%E7%9A%84Tick%E6%80%8E%E4%B9%88%E8%AE%BE%E7%BD%AE%EF%BC%9F%E5%92%8Cwindows_phone%E4%B8%8D%E4%B8%80%E6%A0%B7%E4%BA%86%EF%BC%9F-thread-128080-1-1.html "这个链接")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T15:31:23.670

我阅读了 msdn 并将委托方法更改为下面并且它可以工作：

```
 private void timer_Ticker(object sender, object e)
    {
        txtTime.Text = get24hour();
    } 
```

# css - 桌面屏幕和移动屏幕的媒体查询

> ID：11072461
> 
> 赞同：0
> 
> 时间：2012-06-17T15:24:07.650
> 
> 标签：css, media-queries

我有这个媒体查询：

```
@media only screen
and (max-width : 320px),

only screen
and (max-device-width : 320px)
and (min-device-pixel-ratio : 2),

only screen
and (max-device-width : 320px)
and (-webkit-min-device-pixel-ratio : 2),

only screen
and (max-device-width : 320px) { 
```

它选择宽度小于 320 像素的桌面上的浏览器，iphone 4 的纵向，但它也选择 iphone 4 的横向。当然这不应该选择 iPhone 4 的横向？

据我了解，第一部分选择宽度小于 320 像素的屏幕。

第二部分与第二部分相同，但带有 webkit 供应商前缀

第三部分选择宽度小于 320 像素但像素密度为双倍的移动设备上的屏幕（本例中为 iPhone 4/4s）

第四部分与前两部分相同，但没有双倍像素密度，因此应选择 iPhone 3gs 和其他具有 320 像素最大宽度屏幕的手机设备。因此，基于上述情况，我不希望它在任何 iPhone 上选择横向模式？

任何想法如何添加到它来解决这个问题？

尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:13:07.380

您应该添加`orientation : landscape`到您的 CSS，如下所示：

```
@media only screen
and (max-device-width : 320px)
and (orientation : landscape) {
    /* Styles */
} 
```

# java - 在另一个类中运行网络操作时出现网络策略违规

> ID：11072464
> 
> 赞同：0
> 
> 时间：2012-06-17T15:24:10.647
> 
> 标签：java, android, http

我正在尝试使用简单的 HTTP get 从网页加载字符串。但是，当我在模拟器中运行应用程序时，我遇到了严格的策略违规，并且没有显示任何内容。策略违规被列为“策略=31 违规=4”。如果我将 permitNetwork() 添加到 ThreadPolicy 初始化中，LogCat 会告诉我 google.com 无法解析为地址。显然，我遗漏了一些东西，但我的印象是这就是我应该如何处理网络操作。

编辑：我已经改变了我的 HttpExampleActivity.java，我现在有了这个：

```
package com.android.httpexample;

import android.app.Activity;
import android.os.Bundle;
import android.os.StrictMode;
import android.os.StrictMode.ThreadPolicy.Builder;
import android.widget.TextView;

public class HttpExampleActivity extends Activity {
    TextView httpStuff;

     @Override
        public void onCreate(Bundle savedInstanceState) {
         StrictMode.ThreadPolicy policy = new Builder().detectAll().penaltyLog().build(); 
         StrictMode.setThreadPolicy(policy);
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            new Thread(new Runnable() { 
                public void run() {

                    httpStuff = (TextView) findViewById(R.id.tvHttp);
                    httpStuff.post(new Runnable(){
                        public void run(){

                    GetProcedure test = new GetProcedure();
                    String returned;
                    try{
                        returned = test.getInternetData();
                        httpStuff.setText(returned);
                    } catch(Exception e){
                        e.printStackTrace();
                    }
                        }
                    });
                }
            }).start();

     }
} 
```

在我的 GetProcedure.java 中，我有这个：

```
package com.android.httpexample;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URI;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

public class GetProcedure {
    public String getInternetData() throws Exception {
        BufferedReader in = null;
        String data = null;
        try{
            HttpClient client = new DefaultHttpClient();
            URI website = new URI("http://google.com");
            HttpGet request = new HttpGet();
            request.setURI(website);
            HttpResponse response = client.execute(request);
            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String l = "";
            String nl = System.getProperty("line.separator");
            while((l = in.readLine()) != null)
            {
                sb.append(l + nl);
            }
            in.close();
            data = sb.toString();
            return data;
        }finally{
            if(in != null){
                try{
                    in.close();
                    return data;
                }catch (Exception e){
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:25:49.553

您需要使用单独的线程来执行网络活动。自 ICS 以来，Android 不允许在 UI 线程中联网，并且确实在大约 10 分钟后关闭了强制关闭。5 秒前。

解决您的任务的一个好方法是处理所有内容的 AsyncTask 或带有 Activity 侦听器的 Thread。

检查[无痛线程](http://developer.android.com/resources/articles/painless-threading.html)主题以获得更多建议。

# javascript - Javascript 相对时间 24 小时前等作为时间

> ID：11072467
> 
> 赞同：32
> 
> 时间：2012-06-17T15:24:22.610
> 
> 标签：javascript, datetime, highcharts

我正在尝试使用 highcharts 显示过去 24 小时内的一些数据。当您使用 x 轴的时间时，图表需要开始时间，如本示例[Highcharts 时间示例](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/xaxis/datetimelabelformats/)中所示。我不知道如何告诉它在 24 小时前开始，例如，如果现在的时间是 18 日下午 22:34，我希望它在 17 日下午 22:34 开始。我不太擅长与时间和日期相关的代码，JavaScript 也不是我的强项。我相信我需要完成的输出类似于： `pointStart: Date.UTC(2012, 5, 17, 22, 34)` 对于上面的示例，但我不太确定如何从 Date() 中获取它。

编辑：我不确定为什么它被标记为重复，但我试图获取相对于当前时间（现在 - 24 小时）的时间，而不是相对字符串表示（“24 小时前”）。另一个问题也根本没有提到highcharts。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-12-31T21:31:13.993

这实际上相当简单：

```
var yesterday = new Date(new Date().getTime() - (24 * 60 * 60 * 1000)); 
```

只需`Date`用当前时间戳减去 24 小时的值构造一个新的。

（24 小时乘以每小时 60 分钟乘以每分钟 60 秒乘以每秒 1000 毫秒）

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-06-17T15:36:33.397

您应该使用时间戳，因为您可以使用它们进行计算。

这是您获取当前时间戳的方式：`Math.round(new Date().getTime() / 1000)` ~~请注意这是计算机本地时间。~~

现在您可以像这样获取 24 小时前的时间戳：

```
var ts = Math.round(new Date().getTime() / 1000);
var tsYesterday = ts - (24 * 3600); 
```

请看这个小提琴：http: [//jsfiddle.net/Mjm7V/](http://jsfiddle.net/Mjm7V/)

**编辑：** 正如尼克正确指出的那样，`Date#getTime`返回 UTC 时间戳（[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getTime](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getTime)）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-04T09:14:25.777

24 小时前：

`new Date(Date.now() - 86400 * 1000).toISOString()`

1.  现在：`new Date().toISOString()`
2.  输出：`'2017-02-04T09:15:25.233Z'`
3.  `Date.now()`返回自纪元以来的秒数。
4.  减去`86400`一天中的秒数`1000`以转换为毫秒
5.  输出：`'2017-02-03T09:14:11.789Z'`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T15:28:03.327

只需从日期中减去 24 小时内的毫秒数：

```
new Date (Date.UTC(2012, 5, 17, 22, 34) - 24 * 3600 * 1000) 
```

# c - UNICODE 和 _UNICODE 之间的区别

> ID：11072470
> 
> 赞同：1
> 
> 时间：2012-06-17T15:24:34.653
> 
> 标签：c, winapi, unicode

> **可能重复：**
> [为什么同时使用 UNICODE 和 _UNICODE？](https://stackoverflow.com/questions/7953025/why-both-unicode-and-unicode)

UNICODE 和 _UNICODE 有什么区别？如果将程序编译为使用 unicode 字符，我们是否需要同时定义两者？我们有两个不同的标识符来使用 unicode 字符有什么原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T15:31:03.423

[Raymond Chen](http://blogs.msdn.com/b/oldnewthing/archive/2004/02/12/71851.aspx)有一个答案：

> 没有下划线的普通版本会影响 Windows 头文件视为默认的字符集。因此，如果您定义 UNICODE，例如，GetWindowText 将映射到 GetWindowTextW 而不是 GetWindowTextA。同样，TEXT 宏将映射到 L"..." 而不是 "..."。
> 
> 带有下划线的版本会影响 C 运行时头文件视为默认的字符集。因此，如果您定义 _UNICODE，则 _tcslen 将映射到 wcslen 而不是 strlen，例如。同样，_TEXT 宏将映射到 L"..." 而不是 "..."。

# c# - 如何将文件截断到一定大小但保留结尾部分？

> ID：11072473
> 
> 赞同：9
> 
> 时间：2012-06-17T15:25:01.957
> 
> 标签：c#, .net, text-files

我有一个随时间附加的文本文件，并且我想定期将其截断到一定大小，例如 10MB，但保留最后 10MB 而不是第一个。

有什么聪明的方法可以做到这一点吗？我猜我应该寻找正确的点，从那里读入一个新文件，删除旧文件并将新文件重命名为旧名称。有更好的想法或示例代码吗？理想情况下，我不会将整个文件读入内存，因为文件可能很大。

请不要对使用 Log4Net 等提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T15:28:17.540

您无需在写入之前读取整个文件，尤其是在写入不同文件时。你可以分块工作；读一点，写，再读一点，再写。事实上，这就是所有 I/O 的完成方式。尤其是对于较大的文件，您永远不想一次全部阅读它们。

但是您建议的是从文件开头删除数据的唯一方法。你必须重写它。[Raymond Chen 也有一篇关于该主题的博文。](http://blogs.msdn.com/b/oldnewthing/archive/2010/12/01/10097859.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T15:33:12.637

如果您可以将最后 10MB 读入内存，这应该可以：

```
using(MemoryStream ms = new MemoryStream(10 * 1024 * 1024)) {
    using(FileStream s = new FileStream("yourFile.txt", FileMode.Open, FileAccess.ReadWrite)) {
        s.Seek(-10 * 1024 * 1024, SeekOrigin.End);
        s.CopyTo(ms);
        s.SetLength(10 * 1024 * 1024);
        s.Position = 0;
        ms.Position = 0; // Begin from the start of the memory stream
        ms.CopyTo(s);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-13T11:45:23.713

我从“假”测试了解决方案，但它对我不起作用，它修剪文件但保留它的开头，而不是结尾。

我怀疑`CopyTo`复制整个流而不是从流位置开始。这是我如何使它工作的：

```
int trimSize = 10 * 1024 * 1024;
using (MemoryStream ms = new MemoryStream(trimSize))
{
    using (FileStream s = new FileStream(logFilename, FileMode.Open, FileAccess.ReadWrite))
    {
        s.Seek(-trimSize, SeekOrigin.End);

        byte[] bytes = new byte[trimSize];
        s.Read(bytes, 0, trimSize);
        ms.Write(bytes, 0, trimSize);

        ms.Position = 0;
        s.SetLength(trimSize);
        s.Position = 0;
        ms.CopyTo(s);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T15:30:31.083

您可以将文件读入二进制流并使用 seek 方法检索最后 10MB 的数据并将它们加载到内存中。然后将此流保存到一个新文件中并删除旧文件。文本数据可能会被截断，因此您必须确定这是否可以例外。

在此处查看 Seek 方法的示例：

[http://www.dotnetperls.com/seek](http://www.dotnetperls.com/seek)

# c - 使用 GIO 库创建 FTP 挂载

> ID：11072475
> 
> 赞同：1
> 
> 时间：2012-06-17T15:25:13.657
> 
> 标签：c, gio

我正在尝试使用[GIO](http://developer.gnome.org/gio/stable/)。我想出了如何使用 GVolumeMonitor 来捕捉音量变化并获取音量列表。`g_volume_monitor_get_mounts`函数给了我一个现有 GMount 的列表。它们中的每一个都可以代表一个 HDD 分区或一个网络共享的挂载（ftp、smb、sftp 等）。安装 HDD 分区似乎可以使用`g_volume_mount`. 但是如何创建代表网络共享的 GMount 呢？哪些类对此负责？

这是我的代码：

```
GVolumeMonitor* monitor = g_volume_monitor_get();
GList* list = g_volume_monitor_get_mounts(monitor);
for(; list; list = list->next) {
  GMount* mount = static_cast<GMount*>(list->data);
  GFile* file = g_mount_get_root(mount);
  qDebug() << "Mount(" << g_mount_get_name(mount) << 
              ", " << g_file_get_path(file) << ")";
} 
```

（我知道必须有`g_object_unref`和`g_list_free`。）

输出：

```
Mount( SFTP for ri on host.org ,  /home/ri/.gvfs/SFTP for ri on host.org ) 
Mount( Yellow hard disk ,  /media/Yellow hard disk ) 
```

我使用 nautilus 创建了第一个 sftp 挂载。现在我想自己实现这个功能。目标操作系统是 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:17:16.210

我想你可能正在寻找[`g_file_mount_enclosing_volume()`](http://developer.gnome.org/gio/2.32/GFile.html#g-file-mount-enclosing-volume)

# php - PHP 复选框值

> ID：11072476
> 
> 赞同：0
> 
> 时间：2012-06-17T15:25:24.343
> 
> 标签：php, mysql, html

> **可能重复：**
> [提交带有空复选框的 HTML 表单](https://stackoverflow.com/questions/476426/submit-an-html-form-with-empty-checkboxes)

我正在尝试向数据库提交一些数据。我正在尝试将表单中复选框的值提交到数据库，如下所示：

```
<input type='checkbox' name='continue' <?php if ($_POST[continue] == TRUE)  echo "value='y' checked='checked'"; else  echo "value='n'"; ?> /> 
```

当我在选中复选框时提交数据时，该值将为“y”。但是当复选框被选中时，没有数据发送到数据库。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:31:10.457

**解决方案1：（**更好的方法）

```
<input type="checkbox" name="continue"<?php echo (isset($_POST['continue']) ? ' checked="checked"' : ''); ?> /> 
```

在您的数据库 (?) 文件中：

```
$continue = isset($_POST['continue']) ? 'y' : 'n'; 
```

.

**解决方案2：（**不推荐）

```
<input type="hidden" name="continue" value="<?php echo isset($_POST['continue']) ? 'y' : 'n'; ?>" />
<input type="checkbox" name="continue_x"<?php echo (isset($_POST['continue']) ? ' checked="checked"' : ''); ?> onclick="document.getElementsByName('continue')[0].value=this.checked?'y':'n';" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T19:02:26.267

首先，当您尝试使用 PHP 验证复选框时，不会像 JavaScript 那样进行实时检查，您可以立即进行检查，而无需与服务器端交互。

那么你想做什么我假设你想将数据从表单插入到数据库中。

```
<input type='checkbox' name='continue' <?php if (isset($_POST[continue])) echo 
"checked='checked'"; ?> /> 
```

因此，您对上述代码所做的是检查使用`isset`功能是否选中了复选框并且您再次调用表单，该复选框仍将保留状态并且仍将被选中。

现在来到您需要获取要插入数据库的值的部分。

```
if (isset($_POST[continue])) 
    $cont = 'y';
    else $s = 's'; 
```

在将值插入查询之前，您将需要它，而不是`$_POST[continue]`现在只使用`$cont`作为查询中的值，您将获得正确的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T16:44:31.793

选中的复选框是成功的（并提交它们的值），未选中的复选框不是（并且不要）。

您需要给复选框一个固定值，然后**根据数据的存在（或不存在）而**不是数据的具体值来确定它是否被选中。

仅当您有多个具有相同名称的复选框时，该值才重要（例如，对于“勾选您定期使用的每种交通方式”类型的问题。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T15:34:26.410

尝试这个

```
<input type='checkbox' name='continue' <?php if ($_POST['continue']==TRUE) { echo "value='y' checked='checked'"; } else { echo "value='n'"; } ?> /> 
```

# python - Python UnicodeDecodeError：'utf8'编解码器无法解码字节......意外的代码字节

> ID：11072478
> 
> 赞同：2
> 
> 时间：2012-06-17T15:25:28.290
> 
> 标签：python, google-app-engine, templates, utf-8, jinja2

Python 新手构建他的第一个 web 应用程序的旅程（应用程序链接：[http](http://contractpy.appspot.com/) ://contractpy.appspot.com/ - 这只是一个实验性应用程序）。

根据[stackoverflow 用户](https://stackoverflow.com/questions/10934184/python-unicodedecodeerror-ascii-codec-cant-decode-byte-0xe2-ordinal-not-in-r)的建议，我开始使用模板系统：Jinja2（我使用的是 Python 2.6），但现在我遇到了这个错误：

```
2012-06-17 11:44:39 Running command: "['C:\\Python26\\pythonw.exe', 'C:\\Program Files (x86)\\Google\\google_appengine\\dev_appserver.py', '--admin_console_server=', '--port=8084', 'C:\\Users\\CG\\Documents\\udacity\\contract']"
Warning: You are using a Python runtime (2.6) that is older than the production runtime environment (2.7). Your application may be dependent on Python behaviors that have changed and may not work correctly when deployed to production.
WARNING  2012-06-17 14:44:41,993 datastore_file_stub.py:518] Could not read datastore data from c:\users\cg\appdata\local\temp\dev_appserver.datastore
WARNING  2012-06-17 14:44:42,005 dev_appserver.py:3401] Could not initialize images API; you are likely missing the Python "PIL" module. ImportError: No module named _imaging
INFO     2012-06-17 14:44:42,025 dev_appserver_multiprocess.py:647] Running application dev~contractpy on port 8084: http://localhost:8084
INFO     2012-06-17 14:44:42,025 dev_appserver_multiprocess.py:649] Admin console is available at: http://localhost:8084/_ah/admin
WARNING  2012-06-17 14:44:47,171 py_zipimport.py:139] Can't open zipfile C:\Python26\lib\site-packages\setuptools-0.6c11-py2.6.egg-info: IOError: [Errno 13] file not accessible: 'C:\\Python26\\lib\\site-packages\\setuptools-0.6c11-py2.6.egg-info'
ERROR    2012-06-17 14:44:47,674 wsgi.py:189] 
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\runtime\wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\runtime\wsgi.py", line 225, in _LoadHandler
    handler = __import__(path[0])
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "C:\Users\CG\Documents\udacity\contract\main.py", line 60, in <module>
    class MainHandler(webapp2.RequestHandler):
  File "C:\Users\CG\Documents\udacity\contract\main.py", line 71, in MainHandler
    template = jinja_environment.get_template('index.html')
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\environment.py", line 719, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\environment.py", line 693, in _load_template
    template = self.loader.load(self, name, globals)
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\loaders.py", line 115, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\loaders.py", line 169, in get_source
    contents = f.read().decode(self.encoding)
  File "C:\Python26\lib\encodings\utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode byte 0x96 in position 3403: unexpected code byte
INFO     2012-06-17 14:44:47,713 dev_appserver.py:2891] "GET / HTTP/1.1" 500 -
INFO     2012-06-17 14:44:47,801 dev_appserver.py:2891] "GET /favicon.ico HTTP/1.1" 200 -
ERROR    2012-06-17 14:52:18,345 wsgi.py:189] 
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\runtime\wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\runtime\wsgi.py", line 225, in _LoadHandler
    handler = __import__(path[0])
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1858, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1722, in FindAndLoadModule
    description)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1665, in LoadModuleRestricted
    description)
  File "C:\Users\CG\Documents\udacity\contract\main.py", line 60, in <module>
    class MainHandler(webapp2.RequestHandler):
  File "C:\Users\CG\Documents\udacity\contract\main.py", line 71, in MainHandler
    template = jinja_environment.get_template('index.html')
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\environment.py", line 719, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\environment.py", line 693, in _load_template
    template = self.loader.load(self, name, globals)
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\loaders.py", line 115, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\loaders.py", line 169, in get_source
    contents = f.read().decode(self.encoding)
  File "C:\Python26\lib\encodings\utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode byte 0x96 in position 3403: unexpected code byte
INFO     2012-06-17 14:52:18,378 dev_appserver.py:2891] "GET / HTTP/1.1" 500 -
INFO     2012-06-17 14:52:18,470 dev_appserver.py:2891] "GET /favicon.ico HTTP/1.1" 200 - 
```

我正在使用 PyScripter，它设置为 utf-8 编码：

![在此处输入图像描述](../Images/c6fc8d45cde4fa4faecff22fbd2906de.png)

我在 stackoverflow 上进行了搜索，发现了很多问题，但我不明白我的情况出了什么问题以及如何解决它。

提前感谢您的帮助！

这是我的代码：

```
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
#!/usr/bin/env python
#
# Copyright 2007 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

import os

import webapp2

import jinja2

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

import re

USER_RE = re.compile(r"^[a-zA-Z0-9_-]{3,20}$")
def valid_resident(resident):
    return USER_RE.match(resident)

PASS_RE = re.compile(r"^.{3,20}$")
def valid_SSN(SSN):
    return PASS_RE.match(SSN)

EMAIL_RE = re.compile(r"^[\S]+@[\S]+\.[\S]+$")
def valid_email(email):
    return EMAIL_RE.match(email)

def escape_html(s):
    for (i,o) in (("&","&"), (">",">"), ("<","<"), ('"','"')):
        s = s.replace(i,o)
        return s

import time

import datetime

def dateToday():
    today = datetime.datetime.today()
    todayDay = str(today.day)
    todayMonth = str(today.month)
    monthExt = {'1':' January ', '2':'February', '3':' March ', '4':'April', '5':'May', '6':'June', '7 ':' July ', '8':'August', '9':'September', '10':'October', '11':'November ', '12':'December'}
    todayYear = str(today.year)
    return(todayDay + ' of  ' + monthExtenso[todaymonth] + ' of ' + todayYear)

class MainHandler(webapp2.RequestHandler):
    def get(self):
       template_values = {"resident": "",
                                       "SSN": "",
                                       "driverLicense": "",
                                       "email":"",
                                       "resident_error": "",
                                       "SSN_error": "",
                                       "driverLicense_error": "",
                                       "email_error": ""}

    template = jinja_environment.get_template('index.html')
    self.response.out.write(template.render(template_values))

    def write_form(self, text_write):
       self.response.out.write(text_write)

    def post(self):
        resident_name = self.request.get(escape_html("resident"))
        user_nacionality = self.request.get("nacionality")
        user_SSN = self.request.get(escape_html('SSN'))
        user_email = self.request.get(escape_html('email'))
        user_driverLicense = self.request.get(escape_html('driverLicense'))
        resident_error = ""
        SSN_error = ""
        driverLicense_error = ""
        contract_type = self.request.get("contractType")
        owner = self.request.get("owner")
        witness  = self.request.get("witness ")

        if (resident_name and valid_resident(resident_name)) \
        and (user_SSN and valid_SSN(user_SSN)) \
        and ((not user_email) or (user_email and valid_email(user_email))):
            self.redirect('/yourcontract?resident=%s&nacionality=%s&SSN=%s&driverLicense=%s&email=%s&witness=%s&owner=%s' % (resident_name, user_nacionality, user_SSN, user_driverLicense, user_email,
witness, owner))
        else:
            if not valid_resident(resident_name):
                resident_error = "Oh no!!! this resident name isn't valid!"
            if not valid_SSN(user_SSN):
                SSN_error = "Oh no!!! SSN isn't valid!"
            if user_email and not valid_email(user_email):
                email_error = "Oh no!!! e-mail isn't valid!"
            self.write_form(form % {"resident":resident_name,
                                      "resident_error":resident_error,
                                      "SSN":user_SSN,
                                      "SSN_error":SSN_error,
                                      "driverLicense":user_driverLicense,
                                      "email":user_email,
                                      })

class yourcontractHandler(webapp2.RequestHandler):
    def get(self):
        geted_resident_name = self.request.get('resident')
        geted_user_nacionality = self.request.get("nacionality")
        geted_user_SSN = self.request.get('SSN')
        geted_user_email = self.request.get('email')
        geted_user_driverLicense = self.request.get('driverLicense')
        geted_resident_error = ""
        geted_SSN_error = ""
        geted_driverLicense_error = ""
        #geted_contract_type = self.request.get("contractType")
        geted_owner = self.request.get("owner")
        geted_witness  = self.request.get("witness")
        geted_contractType = self.request.get("contractType")

        self.response.out.write(yourcontract % {"resident":geted_resident_name,
                                      "nacionality":geted_user_nacionality,
                                      "SSN":geted_user_SSN,
                                      "SSN_error":geted_SSN_error,
                                      "driverLicense":geted_user_driverLicense,
                                      "email":geted_user_email,
                                      "witness ":geted_witness ,
                                      "owner":geted_owner,
                                      "contractType":geted_contractType
                                      })

app = webapp2.WSGIApplication([('/', MainHandler), ('/yourcontract', yourcontractHandler)],
                              debug=True) 
```

这是我的模板代码：

```
<!DOCTYPE html>

<html>
  <head>
    <title>Contract with Python</title>
    <style type="text/css">
      .label {text-align: right}
      .error {color: red}
    </style>

  </head>

  <body>
    <h2>Contract with Python</h2>
    <form method="post">
      <table>
        <tr>
          <td class="label">
            resident
          </td>
          <td>
            <input type="text" name="resident" 

value= "%(resident)s">
          </td>
          <td class="error"> 

%(resident_error)s

          </td>
        </tr>

         <tr>
          <td class="label">
            nacionality
          </td>
          <td>
            <input type="text" 

name="nacionality" value= " ">
          </td>
        </tr>

        <tr>
          <td class="label">
            License
          </td>
          <td>
            <input type="text" 

name="driverLicense" value="">
          </td>
        </tr>

        <tr>
          <td class="label">
            SSN
          </td>
          <td>
            <input type="text" name="SSN" 

value="%(SSN)s">
          </td>
          <td class="error"> %(SSN_error)s
          </td>
        </tr>

        <tr>
          <td class="label">
            Email (optional)
          </td>
          <td>
            <input type="text" name="email" 

value="%(email)s">
          </td>
          <td class="error"> %(email_error)s

          </td>
        </tr>
      </table>

<br>
        <td class="label">
          Contract Type
          <select name = "contractType">
              <option>House  Rental 

Contract</option>
              <option>Car Rental 

Contract</option>
              <option>Other</option>
          </select>
          </td>
<br>
<br>

<br>
          owner
          <select name = "owner">
              <option>House owner</option>
              <option>Car owner</option>
              <option>Other owner</option>
          </select>
<br>
<br>

<br>
          Witness
          <select name = "witness">
              <option>Carl Sagan</option>
              <option>Mahatma Gandhi</option>
          </select>
<br>
<br>

      <input type="submit">
    </form>
  </body>

</html>
"""

yourcontract = """
<html>
  <head>
    <title>Unit 2 Signup</title>
  </head>

  <body>

{{contractType}}

In consideration of the agreements of the 

Resident(s), known as: {{resident}} The owner 

hereby rents them the dwelling located at 

{{residentAdress}}, for the period commencing 

on the {{dateStarts}}, and monthly thereafter 

until the last day of {{dateEnds}}, at which 

time this Agreement is terminated. Resident

(s), in consideration of owners permitting 

them to occupy the above property, hereby 

agrees to the following terms:

RENT: To pay as rental the sum of $ 

{{rentalSum}} per month, due and payable in 

advance from the first day of every month. 

Failure to pay rent when due will result in 

the owner taking immediate legal action to 

evict the Resident from the premises and seize 

the security deposit.
LATE FEE: Rent received after the first of the 

month will be subject to a late fee of 10% 

plus (3.00) dollars per day.

ACCEPTED THIS {{dateContract}}, at 

{{localContract}}.

______________________________________________

_____
{{resident}} - Resident

______________________________________________

_____
{{owner}} – owner

______________________________________________

_____
{{witness}} – Witness

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T00:27:15.670

您的`index.html`文件不是 UTF-8 有效的。使用代码编辑器打开文件，然后另存为 UTF-8。您可以从异常回溯中跟踪错误：

```
 [...]
  File "C:\Users\CG\Documents\udacity\contract\main.py", line 71, in MainHandler
    template = jinja_environment.get_template('index.html')
  [...]
  File "C:\Program Files (x86)\Google\google_appengine\lib\jinja2\jinja2\loaders.py", line 169, in get_source
    contents = f.read().decode(self.encoding)
UnicodeDecodeError: 'utf8' codec can't decode byte 0x96 in position 3403: unexpected code byte 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T15:31:50.160

您的文件编码被声明为 utf-8，但您至少有一部分作为 utf-8 没有意义——这往往意味着它*不在*utf-8 中。最可能的解决方案是确保在您使用的任何文本编辑器或 IDE 中将文件*保存*为 utf-8 - 这在每个编辑器中都会有所不同，但在某处寻找“编码”选项。

# asp.net-mvc - 如何使用 MVC DropDownlist

> ID：11072479
> 
> 赞同：1
> 
> 时间：2012-06-17T15:25:45.660
> 
> 标签：asp.net-mvc, viewmodel

我在 MVC 中的 DropDownlist 有问题我在我的应用程序中使用 ModelView，这是我的代码

```
namespace MedicallexiconProject.ViewModel
{
    public class WordViewModel
    {
        private readonly ICategoryService _categoryService;
        public WordViewModel(ICategoryService categoryService)
        {
            _categoryService = categoryService;
            var selectList = _categoryService.GetAllCategorysSelectList().
                Select(x => new SelectListItem
                {
                    Text = x.Name,
                    Value = x.ID.ToString()
                }).ToList();
            Categories = selectList;
        }

        public WordViewModel()
        {

        }
        public string Name { get; set; }
        private IList<SelectListItem> _categories;
        public IList<SelectListItem> Categories
        {
            get
            {
                if (_categories == null)
                {
                    _categories = new List<SelectListItem>();
                }
                return (_categories);
            }

            set { _categories = value; }
        }
    }
} 
```

这是我的控制器

```
[HttpGet]
public ActionResult Create()
{
    var wordViewModel = new WordViewModel(_categoryService);
    ViewBag.CategoryID = wordViewModel.Categories;
    return View();
}

[HttpPost]
public ActionResult Create(WordViewModel wordViewModel)
{
    Mapper.CreateMap<WordViewModel, Word>();

    var word = new Word();
    Mapper.Map(wordViewModel, word);

    if (ModelState.IsValid)
    {
        _wordService.AddNewWord(word);
        _uow.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(wordViewModel);
} 
```

现在如何在我的视图中插入下拉列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T16:36:24.763

正如 AlfalfaStrange 提到的，**您不应该在 ViewModel 中添加逻辑**。这使它难看！让您的 ViewModel 保持简单的 POCO。

在您的 ViewModel 中再添加一个名为“ `SelectedCategoryID`”的属性，如下所示

```
public class WordViewModel
{
  public int SelectedCategoryID { set;get;}
  public IList<SelectListItem> Categories { set;get;}
  public string Name { set;get;}
} 
```

`ViewModel`在您的`GET`方法中初始化您的项目（类别） 。在这里，我调用了一个名为 GetCategories 的方法，它返回一个类别列表。我可以简单地在任何我想要的地方调用该方法。

```
public ActionResult Create()
{
   var model=new WordViewModel();
   model.Categories=YourService.GetCategories();
   return View(model);
} 
```

在您的强类型创建视图中，使用这个

```
@model WordViewModel
using(@Html.BeginForm())
{

  @Html.DropDownFor(x=>x.SelectedCategoryID,
               new SelectList(Model.Categories,"Value","Text"),"Select Category")
  <input type="submit" value="Save" />
} 
```

在您的`HttpPost`操作方法中，您可以检查`wordViewModel.SelectedCategoryID`所选值。

```
[HttpPost]
public ActionResult Create(WordViewModel wordViewModel)
{
   if(ModelState.IsValid)
   {
     //Checck for wordViewModel.SelectedCategoryID here now
   }
   //some validation failed. Let's reload the category data again.
   wordViewModel.Categories=YourService.GetCategories();
   return View(wordViewModel);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T19:14:25.277

在视图模型中包含加载下拉列表的代码绝对没问题。选择列表和下拉列表都是“查看”项......它们与业务逻辑无关，您的控制器和模型不需要了解有关 SelectLists 或 SelectListItems 或 DropDownList 等的任何信息。

# maven - Maven 不会运行测试

> ID：11072484
> 
> 赞同：10
> 
> 时间：2012-06-17T15:26:55.387
> 
> 标签：maven, maven-2, junit, junit4, maven-surefire-plugin

运行`mvn test`maven 时不会运行所有测试类。当我通过添加显式提供类时，`-Dtest=PropertyTests`将运行测试。

这是我的 pom.xml：

```
<configuration>
    <includes>
        <include>**/*Spec.*</include>
        <include>**/*Test.*</include>
    </includes>
</configuration>
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>com.example</groupId>
    <artifactId>example</artifactId>
    <version>1.0</version>

    <properties>
        <java-version>1.6</java-version>
        <org.slf4j-version>1.6.6</org.slf4j-version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
            <scope>runtime</scope>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>

    </dependencies>

    <build>

        <plugins>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>${java-version}</source>
                    <target>${java-version}</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

为什么maven不会自动运行测试？我错过了什么吗？

示例测试（类在 src/test/java/com/example/PropertyTests.java 中）：

```
public final class PropertyTests
{
    @Test
    public void testGetters()
    {
        Property property = new Property( "foo", "bar" );

        Assert.assertEquals( "foo", property.getKey() );
        Assert.assertEquals( "bar", property.getValue() );
    }
} 
```

Maven 输出`mvn test`：

```
$ mvn test
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building Unnamed - com.example:example:jar:1.0
[INFO]    task-segment: [test]
[INFO] ------------------------------------------------------------------------
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Compiling 13 source files to /home/danny/workspace/example/target/classes
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Compiling 3 source files to /home/danny/workspace/example/target/test-classes
[INFO] [surefire:test {execution: default-test}]
[INFO] Surefire report directory: /home/danny/workspace/example/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 10 seconds
[INFO] Finished at: Sun Jun 17 18:09:45 CEST 2012
[INFO] Final Memory: 17M/42M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-17T15:37:14.007

您需要添加 maven surefire 插件来运行测试。配置可以在[这里](http://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html)找到。

这是我一直在使用 specs/junit 的配置。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.8.1</version>
    <configuration>
        <includes>
            <include>**/*Spec.*</include>
            <include>**/*Test.*</include>
        </includes>
    </configuration>
</plugin> 
```

命名约定是`Test`，所以`PropertyTests`改为`PropertyTest`.

# regex - 使用脚本将目录与修改后的文件名进行比较？

> ID：11072488
> 
> 赞同：0
> 
> 时间：2012-06-17T15:27:44.623
> 
> 标签：regex, bash, directory

我想编写一个比较两个目录的脚本。但是，文件名在其中之一中被修改。所以目录 A 包含像 HouseFile.txt、CouchFile.txt、ChairFile.txt 这样的文件 目录 B 包含 House.txt、Couch.txt、Chair.txt （应该被视为与上述“等效”）两者也可能包含新的，完全不同的文件。

有人可以在这里指出我正确的方向吗？自从我完成脚本以来已经有一段时间了。

我试过使用`diff`，我知道我需要使用某种形式的`regex`来比较文件名，但我不知道从哪里开始。

谢谢！

**添加澄清：**

当然`diff`，不过，只是比较实际的文件名。我想知道如何指定我认为文件名，例如，在这种情况下，“HouseFile.txt”和“House.txt”是等效的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:35:52.903

如果我理解正确，这是将 a 与 b 进行比较的可能解决方案：

`mkdir a b ; touch a/HouseFile.txt a/ChairFile.txt a/CouchFile.txt a/SomeFile.txt b/House.txt b/Chair.txt b/Couch.txt b/Sofa.txt`

`for file in a/*(.); do [[ ! -f b/${${file##*/}:fs@File@} ]] && echo $file ; done`

输出： `a/SomeFile.txt`

我不清楚的是：差异模式是严格的“文件”还是任意字符串？

编辑：前一个是针对 zsh 的。这是 bash 的一个：

```
find a -type f -maxdepth 1 | while read file; do
  check=$(echo $file | sed -r -e 's@(.*)/(.*)@\2@' -e "s@File@@") ;
  [[ ! -f b/${check} ]] && echo $file
done 
```

使用参数扩展而不是`sed`：

```
find a -type f -maxdepth 1 | while read file; do
  check=${file/%File.txt/.txt} #end of file name changed
  check=${check/#*\//} #delete path before the first slash
  [[ ! -f b/${check} ]] && echo $file
done 
```

# java - Android SQLite 找不到声明的列

> ID：11072489
> 
> 赞同：0
> 
> 时间：2012-06-17T15:27:55.103
> 
> 标签：java, android, sqlite

好的，情况如下：我创建了一个扩展 Android 类的`SQLOpenHelper`类。我还实现了所需的方法，`onCreate`以及`onUpgrade`，来初始化表并删除当前表，然后分别重新创建新表。

表已成功创建，但是当我尝试调用将新记录插入数据库的方法时，LogCat 给了我这个：

```
06-17 21:31:19.907: I/SqliteDatabaseCpp(561): sqlite returned: error code = 1, msg = table calendarEvents has no column named colour, db=/data/data/stub.binusitdirectorate.calendar/databases/calendarSQLite 
```

我已经对这个问题进行了一些搜索。大多数答案建议重新安装应用程序并重复该过程。完成了，但仍然没有成功。

这是我的 SQLiteOpenHelper`onCreate`方法：

```
 public void onCreate(SQLiteDatabase db) {
            String CREATE_EVENTS_TABLE = "CREATE TABLE " + EVENTS_TABLE + "("
                    + KEY_EVENTS_TYPE_ID + " TEXT PRIMARY KEY,"
                    + KEY_EVENTS_TYPE_NAME + " TEXT," + KEY_EVENTS_NAME + " TEXT,"
                    + KEY_EVENTS_COLOR + "TEXT," + KEY_EVENTS_START_DATE + "DATE,"
                    + KEY_EVENTS_END_DATE + "TEXT" + ")"

            db.execSQL(CREATE_EVENTS_TABLE);
        } 
```

这是我插入新记录的方法：

```
 public void addEventsList(ArrayList<CalendarEventData> lstCalendarEvents) {
        SQLiteDatabase db = this.getWritableDatabase();

        if (lstCalendarEvents != null && db != null) {
            for (int i = 0; i < lstCalendarEvents.size(); i++) {
                ContentValues values = new ContentValues();

                values.put(KEY_EVENTS_TYPE_ID, lstCalendarEvents.get(i)
                        .getEventTypeId());
                values.put(KEY_EVENTS_TYPE_NAME, lstCalendarEvents.get(i)
                        .getEventTypeName());
                values.put(KEY_EVENTS_NAME, lstCalendarEvents.get(i)
                        .getEventName());
                values.put(KEY_EVENTS_COLOR, lstCalendarEvents.get(i)
                        .getColour());
                values.put(KEY_EVENTS_START_DATE, DateUtils
                        .getFormattedDateString(lstCalendarEvents.get(i)
                                .getStartDateTime(), dateFormat));
                values.put(KEY_EVENTS_END_DATE, DateUtils
                        .getFormattedDateString(lstCalendarEvents.get(i)
                                .getEndDateTime(), dateFormat));

                db.insert(EVENTS_TABLE, null, values);
             }

            db.close();
         }

    } 
```

我对 Android 还很陌生，并且正在使用[本教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)作为指南。

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:33:37.720

您的 create 语句的这一部分可能会导致问题

```
KEY_EVENTS_COLOR + "TEXT," + KEY_EVENTS_START_DATE + "DATE,"
                + KEY_EVENTS_END_DATE + "TEXT" + ")" 
```

您到处都缺少 TEXT 之前的空格:)

# javascript - 揭示模块模式（javascript） - 这不能访问私有方法

> ID：11072494
> 
> 赞同：1
> 
> 时间：2012-06-17T15:28:30.007
> 
> 标签：javascript, oop, design-patterns, revealing-module-pattern

：我有一个用“显示模块模式”编写的 javascript 类：

```
myObject = function () {
    var varA,
        varB,

        methodA = function (data) {

            //Some code...
        },
        methodB = function (data) {
             var that = this;
             that.methodA("a"); // --> 'that' recognize only public methods: 'methodB' / 'methodC' !!!
        },
        methodC = function (data) {

        };
        return {
            methodB : methodB,
            methodC : methodC,
         };
} (); 
```

正如您在“methodB”中的“this”中看到的那样，它不识别类的私有方法。

**编辑：** 我的意图是从公共类中调用一个辅助私有方法。在这个私人课程中，我需要“这个”。如果我直接从 'methodB' 调用 'methodA("a")'（没有 'that'）我没有 'this'（'this' 将是全局上下文）。解决方案将是：

```
methodA.call(this, "a"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T16:18:45.580

首先你有错误

```
return {
    methodB = methodB,
    methodC = methodC,
} 
```

它应该是

```
 return {
    methodB : methodB,
    methodC : methodC
} 
```

在您的示例中，您有

```
methodB = function (data) {
         var that = this;
         that.methodA("a");
    } 
```

`that=this`并且关键字`this`是指当前对象，并且您已经返回了一个对象，`methodB`但是`methodC`在您的对象中您没有，`methodA`所以`that.methodA("a")`不能在内部工作，`methodB`因为`methodA`它不是您当前对象的一部分，但是如果您像这样写

```
methodB = function (data) {
    methodA("a");
} 
```

然后它就会运行。

`that=this`and `this=myObject`and`myObject`只有两种方法`methodB`，`methodC`所以`that.methodA("a")`这意味着`myObject.methodA("a")`不应该运行，因为它不存在于`myObject`

[**DEMO-1**](http://jsfiddle.net/heera/k53xv/)和[**DEMO-2**](http://jsfiddle.net/heera/ym4Fn/)

# mysql - 插入错误：连接 ECONNREFUSED

> ID：11072495
> 
> 赞同：1
> 
> 时间：2012-06-17T15:28:56.907
> 
> 标签：mysql, node.js, express

我正在尝试将一个值插入到我的数据库中，即 mydb 并且该表使用 2 个字段用户名和密码登录。我正在使用 express.js 和 MySQL。插入查询的代码是

```
exports.insert = function(req,res){
    client.query('insert into' +TABLE+ ' SET username=?,password=?' 
                , [req.body.txtUser,req.body.txtPassword]
                , &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    
                  function(err,result){  
                     if(err){
                             console.log("error in insertion:"+ err.message);   
                             }
                     else{
                          console.log("query executed");
                          res.json("data inserted");
                          }
                      } 
                 );
             } 
```

当我启动服务器时，它会正常启动；y并向我显示消息：

> Express 服务器在开发模式下监听 3000 端口

但是，当我访问注册页面并插入值并按提交时，会生成以下错误

> 插入错误：连接 ECONNREFUSED

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:58:57.767

这不是 Node.js 问题。通常，您无法连接到 MySQL 客户端。

您需要在 MySQL 中为您用于连接的用户名授予访问权限。授予访问权限，然后尝试使用 MySQL 客户端或管理工具（例如 MySQL Admin 或命令行`mysql`客户端）手动登录以测试此连接。请记住，在 MySQL 中，您必须进行`localhost`远程设置。我相信它仍然默认为`localhost`only。例如，您需要`admin@*`为其他主机名显式设置。[在此处](http://dev.mysql.com/doc/refman/5.1/en/adding-users.html)阅读 MySQL 手册

一旦你的客户端工作，那么你的 node.js 客户端应该使用相同的用户名和设置。

# powershell - 使用 Powershell 发送打印机控制代码

> ID：11072496
> 
> 赞同：1
> 
> 时间：2012-06-17T15:28:59.780
> 
> 标签：powershell, printing

我需要使用 Powershell 将一系列控制代码（十进制 27、112、0、25 和 250）发送到 USB 打印机“Epson TM 打印机”。

我想将十进制的控制代码放在纯文本文件中。例如keys.txt。

keys.txt 的内容

```
27
112
0
25
250 
```

将控制代码发送到 USB 打印机的最简单方法是什么？我在想是否需要创建一个指向同一个 USB 端口的“Generic / Text only”打印机，然后使用 Out-Printer“Generic / Text only”向它发送控制代码。

我试过了

```
gc keys.txt | out-printer "Generic / Text only" 
```

但结果不是我想要的。任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:37:59.210

```
$s = [char]0x1B +[char]0x70 + [char]0x00 + [char]0x19 + [char]0xFA
Out-Printer -Name <yourprinter> $s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:19:44.167

你应该能够`open a stream to the printer port`编写你的命令

你可以在 C# 中实现[这样](https://stackoverflow.com/a/2137036/763026)的事情。只需按照此处的说明在 powershell 中调用或转换它 - [http://msdn.microsoft.com/en-us/gg981616](http://msdn.microsoft.com/en-us/gg981616)

```
System.IO.StreamWriter sr = new System.IO.StreamWriter(@"\\.\LPT1");
sr.Write(0x1b); 
sr.Write('k'); 
sr.Write('1'); 
sr.Write("Hello"); // print in Sans Serif
sr.WriteLine();
sr.Flush();
sr.Close(); 
```

# android - LoaderCursor 演示扼流圈

> ID：11072503
> 
> 赞同：0
> 
> 时间：2012-06-17T15:29:57.447
> 
> 标签：android

我正在 API Demo 中试用 LoaderCursor 示例：

```
package com.example.android.apis.app;

import android.app.Activity;
import android.app.FragmentManager;
import android.app.ListFragment;
import android.app.LoaderManager;
import android.content.CursorLoader;
import android.content.Loader;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract.Contacts;
import android.text.TextUtils;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.SimpleCursorAdapter;
import android.widget.SearchView.OnQueryTextListener;

/**
 * Demonstration of the use of a CursorLoader to load and display contacts
 * data in a fragment.
 */
public class LoaderCursor extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        FragmentManager fm = getFragmentManager();

        // Create the list fragment and add it as our sole content.
        if (fm.findFragmentById(android.R.id.content) == null) {
            CursorLoaderListFragment list = new CursorLoaderListFragment();
            fm.beginTransaction().add(android.R.id.content, list).commit();
        }
    }

    public static class CursorLoaderListFragment extends ListFragment
            implements OnQueryTextListener, LoaderManager.LoaderCallbacks<Cursor> {

        // This is the Adapter being used to display the list's data.
        SimpleCursorAdapter mAdapter;

        // If non-null, this is the current filter the user has provided.
        String mCurFilter;

        @Override public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

            // Give some text to display if there is no data.  In a real
            // application this would come from a resource.
            setEmptyText("No phone numbers");

            // We have a menu item to show in action bar.
            setHasOptionsMenu(true);

            // Create an empty adapter we will use to display the loaded data.
            mAdapter = new SimpleCursorAdapter(getActivity(),
                    android.R.layout.simple_list_item_2, null,
                    new String[] { Contacts.DISPLAY_NAME, Contacts.CONTACT_STATUS },
                    new int[] { android.R.id.text1, android.R.id.text2 }, 0);
            setListAdapter(mAdapter);

            // Start out with a progress indicator.
            setListShown(false);

            // Prepare the loader.  Either re-connect with an existing one,
            // or start a new one.
            getLoaderManager().initLoader(0, null, this);
        }

        @Override public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
            // Place an action bar item for searching.
            MenuItem item = menu.add("Search");
            item.setIcon(android.R.drawable.ic_menu_search);
            item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
            SearchView sv = new SearchView(getActivity());
            sv.setOnQueryTextListener(this);
            item.setActionView(sv);
        }

        public boolean onQueryTextChange(String newText) {
            // Called when the action bar search text has changed.  Update
            // the search filter, and restart the loader to do a new query
            // with this filter.
            mCurFilter = !TextUtils.isEmpty(newText) ? newText : null;
            getLoaderManager().restartLoader(0, null, this);
            return true;
        }

        @Override public boolean onQueryTextSubmit(String query) {
            // Don't care about this.
            return true;
        }

        @Override public void onListItemClick(ListView l, View v, int position, long id) {
            // Insert desired behavior here.
            Log.i("FragmentComplexList", "Item clicked: " + id);
        }

        // These are the Contacts rows that we will retrieve.
        static final String[] CONTACTS_SUMMARY_PROJECTION = new String[] {
            Contacts._ID,
            Contacts.DISPLAY_NAME,
            Contacts.CONTACT_STATUS,
            Contacts.CONTACT_PRESENCE,
            Contacts.PHOTO_ID,
            Contacts.LOOKUP_KEY,
        };

        public Loader<Cursor> onCreateLoader(int id, Bundle args) {
            // This is called when a new Loader needs to be created.  This
            // sample only has one Loader, so we don't care about the ID.
            // First, pick the base URI to use depending on whether we are
            // currently filtering.
            Uri baseUri;
            if (mCurFilter != null) {
                baseUri = Uri.withAppendedPath(Contacts.CONTENT_FILTER_URI,
                        Uri.encode(mCurFilter));
            } else {
                baseUri = Contacts.CONTENT_URI;
            }

            // Now create and return a CursorLoader that will take care of
            // creating a Cursor for the data being displayed.
            String select = "((" + Contacts.DISPLAY_NAME + " NOTNULL) AND ("
                    + Contacts.HAS_PHONE_NUMBER + "=1) AND ("
                    + Contacts.DISPLAY_NAME + " != '' ))";
            return new CursorLoader(getActivity(), baseUri,
                    CONTACTS_SUMMARY_PROJECTION, select, null,
                    Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC");
        }

        public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
            // Swap the new cursor in.  (The framework will take care of closing the
            // old cursor once we return.)
            mAdapter.swapCursor(data);

            // The list should now be shown.
            if (isResumed()) {
                setListShown(true);
            } else {
                setListShownNoAnimation(true);
            }
        }

        public void onLoaderReset(Loader<Cursor> loader) {
            // This is called when the last Cursor provided to onLoadFinished()
            // above is about to be closed.  We need to make sure we are no
            // longer using it.
            mAdapter.swapCursor(null);
        }
    }
} 
```

上面的代码尝试从“人”应用程序加载联系人信息。但是 LoaderCursor 在加载时停止：

```
06-16 01:07:30.270: E/AndroidRuntime(1331): FATAL EXCEPTION: AsyncTask #1
06-16 01:07:30.270: E/AndroidRuntime(1331): java.lang.RuntimeException: An error occured while executing doInBackground()
06-16 01:07:30.270: E/AndroidRuntime(1331):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at java.lang.Thread.run(Thread.java:856)
06-16 01:07:30.270: E/AndroidRuntime(1331): Caused by: java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.ContactsProvider2 uri content://com.android.contacts/contacts from pid=1331, uid=10043 requires android.permission.READ_CONTACTS
06-16 01:07:30.270: E/AndroidRuntime(1331):     at android.os.Parcel.readException(Parcel.java:1327)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:181)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:135)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at android.content.ContentProviderProxy.query(ContentProviderNative.java:358)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at android.content.ContentResolver.query(ContentResolver.java:310)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at android.content.CursorLoader.loadInBackground(CursorLoader.java:56)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at android.content.CursorLoader.loadInBackground(CursorLoader.java:42)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at android.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:255)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:66)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:55)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
06-16 01:07:30.270: E/AndroidRuntime(1331):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-16 01:07:30.270: E/AndroidRuntime(1331):     ... 4 more 
```

这是我第一次遇到 Loader 的问题，我不知道这里出了什么问题。那么可能是什么原因呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:31:35.230

您只是缺少[Android 清单文件](http://developer.android.com/guide/topics/manifest/manifest-intro.html)中的 android.permission.READ_CONTACTS 权限。您可以看到系统正在抛出 SecurityException。

只需打开 XML 文件并将这一行添加到其中：

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

否则，系统会授予您对联系人的访问权限以保护用户（沙盒概念的结果）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T15:36:23.650

> 引起：java.lang.SecurityException: Permission Denial: 从 pid=1331 读取 com.android.providers.contacts.ContactsProvider2 uri content://com.android.contacts/contacts，uid=10043 需要 android.permission.READ_CONTACTS

您忘记包含`<uses-permission android:name="android.permission.READ_CONTACTS"/>`在清单中。

# playframework - 在 Play2 中禁用特定数据库的进化？

> ID：11072504
> 
> 赞同：3
> 
> 时间：2012-06-17T15:30:09.257
> 
> 标签：playframework, playframework-2.0, anorm

在 Play2 应用程序中使用多个连接时，是否可以针对特定连接禁用框架的进化部分？

编辑：已创建[票证。](https://play.lighthouseapp.com/projects/82401-play-20/tickets/597-evolutions-is-enabled-by-default-on-all-existing-database-connections)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:27:04.250

如果没有可用的表，evolutions 助手将创建一个表，但不检查是否为该连接定义了任何脚本。你应该提交一张[罚单](https://play.lighthouseapp.com/projects/82401-play-20/overview)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-03T20:59:13.023

嗯，将 SQL 文件放在进化文件夹之外？

# jquery - 具有特定日期的 jQuery 表格排序器

> ID：11072505
> 
> 赞同：0
> 
> 时间：2012-06-17T15:30:24.247
> 
> 标签：jquery, tablesorter

我想使用 jQuery tablesorter 对具有以下格式的日期列进行排序：`18:44:12 17/06/2012`

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:56:39.230

我对 tablesorter 2.0 有同样的问题。第 982 行的日期 dd/mm/yy 错误...

```
s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/, "$1/$2/$3"); 
```

错了，正确的是

```
s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/, "$3/$2/$1"); 
```

我的 ts.addParser({id: "shortDate"... 是：

```
ts.addParser({
        id: "shortDate",
        is: function (s) {
            return /\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s);
        }, format: function (s, table) {
            var c = table.config;
            s = s.replace(/\-/g, "/");
            if (c.dateFormat == "us") {
                // reformat the string in ISO format
                s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/, "$3/$1/$2");
            } else if (c.dateFormat == "uk") {
                // reformat the string in ISO format
                s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/, "$3/$2/$1");
            } else if (c.dateFormat == "dd/mm/yy" || c.dateFormat == "dd-mm-yy") {
                s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/, "$3/$2/$1");
            } else if (c.dateFormat == "dd/mm/yyyy" || c.dateFormat == "dd-mm-yyyy") {
                s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/, "$3/$2/$1");
            }
            return $.tablesorter.formatFloat(new Date(s).getTime());
        }, type: "numeric"
    }); 
```

我添加了 dd/mm/yyyy 案例。至于日期，我不知道... :(

您必须将 dateFormat: "dd/mm/yyyy" 作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:18:17.343

`Date object`第一个问题是将您的日期文本解析为 javascript可以识别的格式。一旦转换为日期，插件会将日期视为数字排序类型。这是您格式的有效解析器。

演示：http: [//jsfiddle.net/H9u7C/1/](http://jsfiddle.net/H9u7C/1/)

```
$.tablesorter.addParser({

    // set a unique id
    id: 'changeToDate',
    is: function(s) {
        // return false so this parser is not auto detected
        return false;
    },

    format: function(s) {
        var a = $.trim(s).split(' ');
        var time = a[0];
        var dateParts = a[1].split('/');
        var dateText = [dateParts[1], dateParts[0], dateParts[2]].join('/') + ' ' + time;
        var dateObj = new Date(dateText);
        return dateObj;

    },

    type: 'numeric'
}); 
```

用法如插件站点上的自定义解析器演示中所述

[http://tablesorter.com/docs/example-parsers.html](http://tablesorter.com/docs/example-parsers.html)

# java - 为地图加载 YAML 夹具

> ID：11072515
> 
> 赞同：3
> 
> 时间：2012-06-17T15:31:16.463
> 
> 标签：java, playframework, yaml, snakeyaml

尝试在 Play 中加载一些夹具数据！1.2.4 与 SnakeYAML。对象类型为`Map<enum, Integer>`。我在 Fixtures.loadModels("quest.yml") 上遇到的错误是“无法加载夹具 quests.yml：java.lang.String 无法转换为 java.lang.Enum”。

代码片段-

```
Constants.java
public enum STATS {
        CREATIVITY, ENTHUSIASM, ...
}

Quest.java
@ElementCollection
@MapKeyEnumerated(EnumType.STRING)
public Map<Constants.STATS, Integer> reward;

quest.yml
Quest(sirlin):
    reward:
        CREATIVITY: 1 
```

如您所见，我已指定要使用带有 @MapKeyEnumerated 注释的枚举 STATS 的 String 值。我不确定如何更改 yml 定义的格式以使其正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T23:06:14.360

好吧，我已经为 play 1.2.4 找到了一个“解决方案”，它很丑，但它确实有效。

我发现的第一件事是[这个测试用例](http://code.google.com/p/snakeyaml/source/browse/src/test/java/org/yaml/snakeyaml/EnumTest.java?name=v1.0.1&r=2ce78be1172188f4ea505cbd7b947a30c6a02e96)，它显示了你应该如何做：

```
map:
  !!org.pacakge.EnumClass 'CLUBS': 1
  !!org.pacakge.EnumClass 'DIAMONDS': 2 
```

这将给出一个以枚举为键的映射。

但它不起作用，因为它给出了这个例外：

```
Can't construct a java object for tag:yaml.org,2002:models.Plazos; exception=Class not found: org.pacakge.EnumClass 
```

但后来我发现[了这个](https://groups.google.com/forum/#!msg/play-framework/quvqlk1YutI/fSG2rB2BeS0J)和[这个](http://forums.bukkit.org/threads/constructing-an-instance-of-a-class-with-snakeyaml.4153/)。出现问题是因为 Yaml 解析器 (snakeyaml) 创建了自己的 ClassLoader 以解析 .yml 文件。游戏的结构！框架使用自己的 ClassLoader。解决方案是替换这个

```
Yaml y = new Yaml(); 
```

有了这个

```
Yaml y = new Yaml(new CustomClassLoaderConstructor(playClassLoader)); 
```

但是，当然，这是在`play.test.Fixtures`课堂上完成的，那么我的解决方案是什么？好吧，将该类复制到您的项目中并在该方法中替换`loadModels`这一行：

```
Yaml yaml = new Yaml(); 
```

有了这个：

```
Yaml yaml = new Yaml(new CustomClassLoaderConstructor(Play.classloader)); 
```

这将使它发挥作用。

# asp.net-mvc - MVC 3 模板翻译

> ID：11072516
> 
> 赞同：0
> 
> 时间：2012-06-17T15:31:17.380
> 
> 标签：asp.net-mvc, asp.net-mvc-3, localization

有没有地方可以找到 t4 模板 asp.net mvc 3 用于脚手架视图的翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:34:36.187

Nuget 上有[Mvc3CodeTemplatesCSharp](http://nuget.org/List/Packages/Mvc3CodeTemplatesCSharp)包，您可以安装然后修改。此外，您可以进一步阅读Scott Hanselman[在 ASP.NET MVC 中修改默认代码生成/脚手架模板以获取模式信息](http://www.hanselman.com/blog/ModifyingTheDefaultCodeGenerationscaffoldingTemplatesInASPNETMVC.aspx)

# python - 在 Windows x64 上使用 Visual Studio 2008 安装 python 模块

> ID：11072521
> 
> 赞同：4
> 
> 时间：2012-06-17T15:31:38.473
> 
> 标签：python, visual-studio

我尝试安装 python 模块（这次`flask-bcrypt`或`py-bcrypt`），但由于编译失败，我无法让它工作。

我了解到我需要 Visual Studio 2008（我拥有 2010 Professional，但似乎还不够）。于是我下载了速成版，又跑了。这次它在路径上出现了一些 ValueError 失败，结果证明是 Python 是 x64 但 Visual Studio 是 32 位的问题。

然后我进行了搜索，但没有找到为 x64 配置我的 Express Edition 的机会。所有教程均采用专业版。

我需要购买专业版才能编译这个插件而不需要对代码进行一些黑客攻击，这不太正确，可以吗？

有什么**简单**的方法可以让这些东西启动并运行。我很高兴看到有人提供*通用*解决方案，例如

*   安装蟒蛇
*   安装 xyz
*   做这个做那个

这样我终于可以运行通常的 Unix 命令，比如`pip install abc`安装一个模块。我`virtualenv`终于启动并运行了它，但是一旦我需要编译，我就会再次陷入困境。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T16:27:13.503

命令行 VS 2008 编译器包含在“ [Microsoft Windows SDK for Windows 7 and .NET Framework 3.5 Service Pack 1](http://www.microsoft.com/en-us/download/details.aspx?id=3138) ”中。在下载和安装过程中，请确保选择 x64 编译器。

安装 SDK 后，Python 可以在不安装 Visual Studio（Express 或 Professional）副本的情况下构建扩展。只需几个命令即可正确配置环境。

我从我的笔记中提取了以下内容：

```
rem Configure the environment for 64-bit builds.
rem Use "vcvars32.bat" for a 32-bit build.
"C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin\vcvars64.bat"

rem Convince setup.py to use the SDK tools.
set MSSdk=1
set DISTUTILS_USE_SDK=1 
```

`python setup.py install`现在应该可以工作了。我不知道是否需要做任何特别的事情来支持 pip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T16:07:31.240

对于 Python 2.7，您可以使用[Microsoft Visual C++ Compiler for Python 2.7](https://www.microsoft.com/en-us/download/details.aspx?id=44266)，它能够构建 64 位二进制文​​件，并且比 SDK 小很多：只有 84 MB。

# mysql - 具有相互用户关系的 SQL 查询

> ID：11072526
> 
> 赞同：2
> 
> 时间：2012-06-17T15:32:21.483
> 
> 标签：mysql

我正在制作一个用户可以互相关注的 SNS。如果用户 A 关注用户 B，用户 B 也关注用户 A，则他们成为**好友**。

还要考虑一些受欢迎的人（如电影明星）可能被关注数十万次，但用户最多可以关注 1000 人。

鉴于下表，获取用户 1 的所有朋友 ID 的最佳 SQL 查询是什么？

PS：我使用的是 MySQL 5.5。

这是我到目前为止所做的：

```
SELECT followee_id AS friend_id FROM follow
    WHERE follower_id = 1 AND
        followee_id IN (SELECT follower_id FROM follow
                            WHERE followee_id = 1);

CREATE TABLE follow
(
    follower_id     INT UNSIGNED NOT NULL,
    followee_id     INT UNSIGNED NOT NULL,

    PRIMARY KEY (follower_id, followee_id),

    INDEX (followee_id, follower_id)
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:47:02.023

假设“最佳”是指性能最高的，并且考虑到必须是相互的，才能满足“朋友”标准：

使用过滤器`followee_id`将比过滤器更好地击中您的索引`follower_id`

```
select 
    me.follower_id
from 
    follow me inner join 
    follow you 
  on 
      me.follower_id = you.followee_id
      and me.followee_id = you.follower_id
where 
    me.followee_id = @user 
```

（尽管请注意，RDBMS 之类的 MSSQL 将默认使用您的主键作为聚集索引，在这种情况下，它确实非常重要。）

# php - PHP为网页中的变量设置变量

> ID：11072530
> 
> 赞同：2
> 
> 时间：2012-06-17T15:33:19.280
> 
> 标签：php

我一直在按照[本教程](http://www.1stwebdesigner.com/css/how-to-create-php-website-template/)使用 php 和 html 制作网页。我试图设置一个模板，我可以在其中设置各种变量，如页面标题、内容等。但我在正确设置内容时遇到了一些麻烦。

在我的索引页面中，我的 php 开始如下：

```
<!DOCTYPE html>
<?php 
include('includes/meta.php');
$md = new metadata();
$md->setTitle("HELLOOOO");
?> 
...<!-- rest of html --> 
```

然后在 meta.php 中的 Metadata 类中（包含 HTML）：

```
<?php

class metadata
{
    private $title = "default";
    public function setTitle($title) { $this->title = $title; }
    public function getTitle() { return $this->title; }

}
 ?>
<head>
    <meta charset="utf-8">
    <title>
         <?php $md = new metadata();
             echo $md->getTitle();?>
    </title> 
```

但是标题总是回显“默认”。

**如何在单独的类/文件中正确设置变量？实现这一目标的最佳惯例是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:36:34.960

您需要一个单例，因为当您这样做时`new metadata();`，您正在创建一个新对象，而实际上您希望该对象引用第一个创建的对象。

这是一个示例实现：

```
class metadata
{
    private $title = "default";
    private function __construct() {} // Private constructor

    private static $instance = null;
    public static function getInstance() {
       if( self::$instance == null) { 
           self::$instance = new metadata();
       }
       return self::$instance;
    }
    public function setTitle($title) { $this->title = $title; }
    public function getTitle() { return $this->title; }
} 
```

现在，您需要执行以下操作：

```
$md = metadata::getInstance(); 
```

获取元数据类的对象。

[看它工作](http://codepad.viper-7.com/cru7SF)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:44:16.097

单例是不够的，因为声明类的文件还包含要输出的 HTML。所以有两个解决方案：

*   您将类定义和 html 输出拆分为两个不同的文件。元数据类应该是一个单例，不依赖于你如何调用变量。*   您将 HTML 输出封装到类的方法中，并在需要时调用此方法。元数据类可以是一个单例，但在这种情况下这不是强制性的。

# javascript - onchange javascript动态更改链接

> ID：11072534
> 
> 赞同：1
> 
> 时间：2012-06-17T15:33:42.217
> 
> 标签：javascript, url, hyperlink, edit, onchange

当用户更改 a 的值时，我想编辑链接`<input type="text">`，但我无法让它工作。我的 HTML：

```
 <head>
    <link rel="stylesheet" href="styles.css" />
    <script type="text/javascript">
    function updateGiveLink() {
        document.getElementById("givelink").innerHTML = "http://kroltan.eliti.com.br/diamonds/?give="+document.getElementsById("givetext").value;
        document.getElementById("givelink").href = "http://kroltan.eliti.com.br/diamonds/?give="+document.getElementsById("givetext").value;
    }
    </script>
    </head>
    <input type="text" placeholder="Minecraft username" name="give" id="givetext" onchange="updateGiveLink()" /> 
    <a id="givelink" href="http://kroltan.eliti.com.br/diamonds/?give=Player">http://kroltan.eliti.com.br/diamonds/?give=Player</a> 
```

这应该会更改 URL 并显示文本，`givelink`因此`?give=`url 的部分具有 text field 的值`givetext`。但它没有按预期工作。相反，它什么也不做。我也尝试使用`onkeyup`and `oninput`（在另一个相关问题中看到了这些），但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:38:09.140

你应该`document.getElementById("givetext").value`有`getElementsBy`一个`s`

[使用演示](http://jsfiddle.net/73qZq/)的工作代码`onkeyup`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:38:30.840

可能存在一些语法错误，因为您使用了 document.getElementsById 但它应该是 document.getElementById

# python - 在标签中显示函数的输出

> ID：11072536
> 
> 赞同：1
> 
> 时间：2012-06-17T15:34:08.670
> 
> 标签：python, function, tkinter, label

我正在尝试用python编写代码。我已经有了一些函数和一个 GUI，但现在我想在标签中显示函数的输出。

例如，我有一个最小值函数：

```
def minimum(numbers):
    numbers.sort()
    return numbers[0] 
```

我有这个标签：

```
minimum = Label(secondFrame, text="Minumum:", font=("Verdana",10), fg="#000000")+str(minimum(list))
minimum.pack(anchor="w") 
```

`str(minimum(list))`事情不工作，因为我得到一个错误索引列表超出范围。

这是完整的代码，但它是荷兰语的，所以我不知道你是否能理解所有内容，但我真的希望有人能帮助我。

谢谢 ：）

代码：

```
from Tkinter import *
venster=Tk()
lijst = []

#FUNCTIES
def klaar():
##    while True:                        #Here i'm wondering how to get the last number in the list as well while you push 'klaar (ready)' instead of Volgende (next) At least this doesn't work
##        e = invoer.get()
##        lijst.append(e)
        eersteFrame.grid_forget()
        tweedeFrame.grid()
        print "klaar"
        return
def afsluiten():
    venster.destroy()
    print "afsluiten"
    return
def opnieuw():
    print "opnieuw"
    tweedeFrame.grid_forget()
    eersteFrame.grid
    return
def opslaan():
    print "opslaan"
    return
def volgende():
      while True:
        e = invoer.get()
        lijst.append(e)
        print lijst
        invoer.delete(0, END)
        return
from math import sqrt

def gemiddelde(getallen):
    return sum(getallen) / float(len(getallen))

def kwartiel_Q1(lijst):
    list.sort(lijst)
    x = len(lijst)
    return lijst[x/4]

def kwartiel_Q3(lijst):
    list.sort(lijst)
    x = len(lijst)
    Q3 = lijst[x/-4]
    return Q3

def mediaan(lijst):
    list.sort(lijst)
    x = len(lijst)
    return lijst[x/2]

def minimum(getallen):
    getallen.sort()
    return getallen[0]

def maximum(getallen):
    getallen.sort()
    return getallen[-1]

def modus(lijst):
    return max(set(lijst), key=lijst.count)

def sd(lijst):
    d2lijst=[]
    lijst.sort()
    gemiddelde = sum(lijst) / float(len(lijst))
    for i in lijst:
        d = i - gemiddelde
        d2 = d**2
        d2lijst.append(d2)
    somd2n = sum(d2lijst) / float(len(lijst))
    stdv = sqrt(somd2n)
    return stdv

#FRAME
eersteFrame = Frame(master=venster)
eersteFrame.pack()
tweedeFrame = Frame(master=venster)

#LABEL
eersteLabel = Label(eersteFrame, text="Voer getal in en druk dan op\n 'Volgende', net zolang totdat u \nde getallen ingevoerd heb en \ndruk dan op 'Klaar'.", font=("Verdana",10), fg="#000000")
eersteLabel.pack()
derdeLabel = Label(tweedeFrame, text= "Dit zijn uw resultaten:", font=("Verdana",10), fg="#000000")
derdeLabel.pack()
aantal = Label(tweedeFrame, text="\nAantal getallen:", font=("Verdana",10), fg="#000000")
aantal.pack(anchor="w")
minimum = Label(tweedeFrame, text="Minumum:", font=("Verdana",10), fg="#000000")+str(minimum(lijst))
minimum.pack(anchor="w")
maximum = Label(tweedeFrame, text="Maximum:",  font=("Verdana",10), fg="#000000")
maximum.pack(anchor="w")
gemiddelde = Label(tweedeFrame, text="Gemiddelde:",  font=("Verdana",10), fg="#000000")
gemiddelde.pack(anchor="w")
modus = Label(tweedeFrame, text="Modus:", font=("Verdana",10), fg="#000000")
modus.pack(anchor="w")
mediaan = Label(tweedeFrame, text="Mediaan:",  font=("Verdana",10), fg="#000000")
mediaan.pack(anchor="w")
kwartiel1 = Label(tweedeFrame, text="Eerste Kwartiel:",  font=("Verdana",10), fg="#000000")
kwartiel1.pack(anchor="w")
kwartiel3 = Label(tweedeFrame, text="Derde Kwartiel:",  font=("Verdana",10), fg="#000000")
kwartiel3.pack(anchor="w")
standaarddeviatie = Label(tweedeFrame, text="Standaarddeviatie:\n",font=("Verdana",10), fg="#000000")
standaarddeviatie.pack(anchor="w")

#INVOERVELD
invoer = Entry(eersteFrame, width=39)
invoer.pack()
invoer.get()

#KNOPPEN
Klaar = Button(eersteFrame, text="Klaar", width=10, command=klaar)
Volgende = Button(eersteFrame, text="Volgende", width=10, command=volgende)
Opnieuw = Button(tweedeFrame, text="Opnieuw", width=10, command=opnieuw)
Opslaan = Button(tweedeFrame, text="Opslaan", width=10, command=opslaan)
Afsluiten1 = Button(eersteFrame, width=10, text="Afsluiten", command=afsluiten)
Afsluiten2 = Button(tweedeFrame, width=10, text="Afsluiten", command=afsluiten)

Klaar.pack(anchor="se", side="right")
Volgende.pack(anchor="s", side="right")
Opnieuw.pack(anchor="se", side="right")
Afsluiten1.pack(anchor="sw", side="left")
Afsluiten2.pack(anchor="sw", side="left")
Opslaan.pack(anchor="s", side="right")

#VENSTER
venster.title("Statistiek")
venster.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:38:04.850

您的函数名称被标签名称覆盖。为函数和标签使用不同的名称。

此外，您可以只使用内置`min`函数：

```
min(numbers) 
```

# machine-learning - 用于电源管理的强化学习

> ID：11072538
> 
> 赞同：2
> 
> 时间：2012-06-17T15:34:47.807
> 
> 标签：machine-learning, power-management, reinforcement-learning

我正在研究一个电源管理问题，我根据事件的发生来控制计算板的电源管理。我正在使用强化学习（传统的 Q 学习）进行电源管理，其中计算板作为服务提供商 (SP) 来处理请求（图像）。SP 连接到智能相机，电源管理器 (PM) 算法在相机上运行，​​向 SP 发出适当的电源命令（睡眠、唤醒）。智能相机根据事件的发生捕获图像（请求），并为请求（图像）维护一个服务队列（SQ）。我还有一个基于 ANN 的工作负载估计器，可将当前工作负载分类为*低*或*高*. Q 学习算法的状态空间因此包括 Q(s,a) 的复合，其中 s=(SR, SQ, SP)。SR 是工作负载的状态。SQ 是服务队列的状态，SP 是服务提供者的状态。PM 根据当前的工作量、队列的状态和服务提供者的状态，向 SP 发出某些命令（睡眠、唤醒）。该决定是在以下阶段做出的：

1.  SP 空闲
2.  SP刚进入休眠状态，SQ>=1
3.  SP 处于休眠状态，SQ 从 0 变为 1。

对于每个动作，都会分配一个成本，该成本由该动作引起的每个请求的平均功耗和平均延迟的加权和组成。在睡眠状态和空闲状态中，该动作包括从预定义超时值列表中选择一些超时值。我的问题如下：

当 SP 进入休眠状态并选择一个超时值时，一些请求可能会在超时值期间到达，因此 SQ 的状态会发生变化。这也将复合状态（例如，S(0,0,0) 更改为 S(0,N,0)。在超时值结束时，PM 决定唤醒 SP（因为 SQ>0 ). 唤醒后，SP 处理请求，当 SQ =0 时，它的状态为 (0,0,1) 或 (1,0,1)。然后它为之前的状态分配一个成本。它还更新相应的 Q 矩阵。**我的问题是，应该将成本分配给状态 (0,0,0) 还是 (0,N,0)？**原则上，先前的状态是 (0,N,0) 但这当队列中的一些请求到达时，请求会自动到达，因此在此状态下没有采取任何行动，也没有任何行动可用于分配成本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:18:44.720

Q 学习适用于马尔可夫决策过程 (MDP)，其中在给定状态下执行操作会导致确定性转换到新状态。

目前尚不清楚您描述的问题是部分可观察马尔可夫决策过程（POMDP）还是MDP。如果你有一个 POMDP（你在没有关于队列状态的信息的情况下决定睡觉或醒来），那么问题就更难解决了。

如果您仅在可以观察系统状态时才做出睡眠超时决定，那么您就有了 MDP。在这种情况下，您应该只在到达您选择动作的下一个状态时更新 Q 矩阵。

以下是我如何理解您的示例中的事件顺序：

1.  系统处于睡眠状态 (0,0,0)
2.  请求到达队列，系统仍在休眠 - (0,N,0)。
3.  系统唤醒 - (0,N,1) 或 (1,N,1)
4.  系统处理请求 - (0|1,0,1)

在第 4 步之后，系统需要做出另一个超时决定并更新 Q 矩阵。当前状态是(0|1,0,1)，这个状态应该用在Q-learning算法中。

但是，您担心在 (0|1,0,1) 处更新 Q 矩阵不会考虑系统处理在睡眠时到达的 N 个请求所花费的时间。可能有许多选项可以处理这个问题，其中大多数可能涉及重构问题的状态空间。这样做的一种方法是在奖励函数中考虑 N 个请求 - 如果系统发现您在唤醒时发现的大量请求，那么它应该立即惩罚之前的操作。

# javascript - js2coffee：找不到命令

> ID：11072540
> 
> 赞同：1
> 
> 时间：2012-06-17T15:35:13.493
> 
> 标签：javascript, node.js, ubuntu, coffeescript

在 Ubuntu 10 下，我使用以下方式安装：`npm install js2coffee`

似乎安装顺利

我进入`npm ls`

回报：

```
/root
----js2coffee@0.1.3
--------coffee-script@1.3.3
--------underscore@1.3.3 
```

我尝试执行`js2coffee mywebapp.js`但得到`js2coffee: command not found`

怎么了？让 js2coffee 正常工作还需要什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T15:37:50.557

您应该安装`sudo npm install js2coffee -g`它将创建可执行文件。

# r - 合并 R 中的相邻区域（聚合空间数据）？

> ID：11072542
> 
> 赞同：8
> 
> 时间：2012-06-17T15:35:49.887
> 
> 标签：r, geospatial

我想我需要改写我之前措辞糟糕的问题（删除它）。这是另一个尝试。我想加入相邻的区域，以使它们的共同边界消失并且只能看到它们的外线。

这是一个可重现的示例：

```
require(shapefiles)
require(sp)

xx <- readShapeSpatial(system.file("shapes/sids.shp", package="maptools")[1],
                   IDvar="FIPSNO", proj4string=CRS("+proj=longlat +ellps=clrk66"))

# show all the subregions
plot(xx) 
```

![在此处输入图像描述](../Images/cb3aa7bc44055acc5f49946b43e79f04.png)

现在让我们只考虑区域 3 和 5

```
plot(xx[c(3,5),]) 
```

我怎样才能聚合这些区域。在实践中，我想做的就像拥有一张显示所有国家的整个大陆的地图，并制作一张显示北美和南美的地图。

对我来说，这看起来像是一项非常常见的任务，但到目前为止我找不到合适的功能来完成它。我只是错过了一个功能，还是可以简单地手动完成？

![在此处输入图像描述](../Images/fd49abd80ae7584202b26d827e55e24b.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T18:47:17.343

该`rgeos`软件包提供了许多用于处理`Spatial*`数据的优秀工具，可以在这种情况下使用。

例如：

```
library(rgeos)
regionOfInterest <- gUnion(xx[3,], xx[5,]) 
```

这也有相同的结果，并且可能对多个多边形更有用：

```
regionOfInterest <- gUnionCascaded(xx[c(3,5), ]) 
```

结果来自`plot(regionOfInterest)`：

![在此处输入图像描述](../Images/adc1d901f7d0cbaaa89df33ed9005fc3.png)

# r - 如何在混合效应模型中获得系数及其置信区间？

> ID：11072544
> 
> 赞同：34
> 
> 时间：2012-06-17T15:36:04.490
> 
> 标签：r, lme4, random-effects, mixed-models

在`lm`和`glm`模型中，我使用函数`coef`和`confint`来实现目标：

```
m = lm(resp ~ 0 + var1 + var1:var2) # var1 categorical, var2 continuous
coef(m)
confint(m) 
```

`lmer`现在我在模型中添加了随机效应——使用lme4 包中的函数使用混合效应模型。但是，功能`coef`并`confint`不再为我工作！

```
> mix1 = lmer(resp ~ 0 + var1 + var1:var2 + (1|var3)) 
                                      # var1, var3 categorical, var2 continuous
> coef(mix1)
Error in coef(mix1) : unable to align random and fixed effects
> confint(mix1)
Error: $ operator not defined for this S4 class 
```

我试图谷歌并使用文档但没有结果。请指出我正确的方向。

编辑：我也在考虑这个问题是否更适合[https://stats.stackexchange.com/](https://stats.stackexchange.com/)但我认为它比统计更具技术性，所以我得出结论它最适合这里（SO）......你怎么看？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-03-10T20:16:46.627

不确定何时添加，但现在 confint() 在 lme4 中实现。例如，以下示例有效：

```
library(lme4)
m = lmer(Reaction ~ Days + (Days | Subject), sleepstudy)
confint(m) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-26T20:36:04.687

有两个新包[lmerTest](http://cran.r-project.org/web/packages/lmerTest//lmerTest.pdf)和[lsmeans](http://cran.r-project.org/web/packages/lsmeans/lsmeans.pdf)可以计算`lmer`和`glmer`输出的 95% 置信限。也许你可以看看那些？和[coefplot2](http://r-forge.r-project.org/projects/coefplot2)，我认为也可以做到（尽管正如 Ben 在下面指出的那样，从 Wald 统计数据的标准误差来看，与在和 中使用的 Kenward-Roger 和/或 Satterthwaite df 近似相比，以一种不太复杂的方式`lmerTest`）`lsmeans`。 .. 遗憾的是 package 中仍然没有内置的绘图设施`lsmeans`（就像在 package`effects()`中一样，顺便说一句，它还返回 95% 的置信限`lmer`和`glmer`对象，但是通过重新拟合没有任何随机因素的模型来做到这一点，这显然是不正确）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-17T16:24:29.860

我建议你使用好的旧 lme（在 nlme 包中）。它有 confint，如果你需要对比的 confint，有一系列的选择（在 gmodels 中估计，在对比中对比，在 multcomp 中 glht）。

为什么 lmer 中没有 p 值和限制：请参阅[http://finzi.psych.upenn.edu/R/Rhelp02a/archive/76742.html](http://finzi.psych.upenn.edu/R/Rhelp02a/archive/76742.html)。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-17T18:52:08.637

假设固定效应的正态近似值（confint 也会这样做），我们可以通过下式获得 95% 的置信区间

估计 + 1.96 * 标准误差。

以下不适用于方差分量/随机效应。

```
library("lme4")
mylm <- lmer(Reaction ~ Days + (Days|Subject),  data =sleepstudy)

# standard error of coefficient

days_se <- sqrt(diag(vcov(mylm)))[2]

# estimated coefficient

days_coef <- fixef(mylm)[2]

upperCI <-  days_coef + 1.96*days_se
lowerCI <-  days_coef  - 1.96*days_se 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-03-19T23:03:54.693

我要在这里补充一点。如果`m`是一个拟合`(g)lmer`模型（其中大部分`lme`也适用）：

*   `fixef(m)`是从混合模型中提取系数的规范方法（此约定从 开始`nlme`并延续到`lme4`）
*   你可以得到完整的系数表`coef(summary(m))`；如果您`lmerTest`在拟合模型之前已加载，或者在拟合（然后加载`lmerTest`）之后通过转换模型`coef(summary(as(m,"merModLmerTest")))`，则系数表将包含 p 值。`ctab[,"Estimate"]`（系数表是一个矩阵；您可以通过例如,提取列`ctab[,"Pr(>|t|)"]`，或将矩阵转换为数据框并使用`$`-indexing。）
*   如上所述，您可以*通过*`confint(m)`; 这些可能是计算密集型的。如果您使用`confint(m, method="Wald")`，您将获得标准的 +/- 1.96SE 置信区间。（`lme`使用`intervals(m)`而不是`confint()`。）

如果您更喜欢使用`broom.mixed`：

*   `tidy(m,effects="fixed")`为您提供一个包含估计值、标准误差等的表格。
*   `tidy(as(m,"merModLmerTest"), effects="fixed")`（或`lmerTest`首先拟合）包括 p 值
*   添加`conf.int=TRUE`给出（Wald）CI
*   添加`conf.method="profile"`（连同`conf.int=TRUE`）给出似然分布 CI

您还可以通过参数引导程序 ( `method="boot"`) 获得置信区间，这在某些情况下速度相当慢但更准确。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-23T13:32:07.870

要找到系数，您可以简单地使用 lme4 的汇总函数

```
m = lm(resp ~ 0 + var1 + var1:var2) # var1 categorical, var2 continuous
m_summary <- summary(m) 
```

拥有所有系数：

```
m_summary$coefficient 
```

如果您想要置信区间，请将标准误差乘以 1.96：

```
CI <- m_summary$coefficient[,"Std. Error"]*1.96
print(CI) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-07T19:18:22.287

我建议`tab_model()`使用包中的功能`sjPlot`作为替代方案。干净和可读的输出准备降价。参考[这里](https://strengejacke.github.io/sjPlot/reference/tab_model.html)和例子[这里](https://strengejacke.github.io/sjPlot/articles/tab_model_estimates.html)。

对于那些`plot_model()`从同一个包中更倾向于视觉上的人来说，也可能会派上用场。

替代解决方案是通过`parameters` [package](https://github.com/easystats/parameters) using `model_parameters()` [function](https://easystats.github.io/parameters/articles/model_parameters.html)。

# spring-webflow - 为什么spring mvc范围变量需要序列化？

> ID：11072546
> 
> 赞同：0
> 
> 时间：2012-06-17T15:36:21.497
> 
> 标签：spring-webflow

最近我们遇到了 flowscope 值没有在整个流程中设置的问题，但后来经过调查发现所有 flowscope 变量都应该被序列化（我的错误我没有阅读 spring webflow 文档中的行 - 行*“存储的任何对象在流范围内需要可序列化”*

我觉得这是一种会话信息，一般我们不会序列化会话变量。只是好奇为什么这个 spring webflow 需要这种序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:40:11.290

通过强制流范围对象可序列化，它提供了将它们安全地存储在任何地方（数据库、磁盘等）的灵活性，然后在返回到您所处的任何流状态时重新存储它们。虽然您的特定服务器/环境可能是一台机器，每个 HttpSession（spring web 流状态的默认“支持”）都保存在内存中，其他的可能有集群/分布式 web/app 服务器。

# php - -1 作为返回值

> ID：11072552
> 
> 赞同：4
> 
> 时间：2012-06-17T15:36:38.517
> 
> 标签：php

这个问题专门针对 PHP，但我猜它也可能适用于其他语言。

我注意到在 PHP4 和 PHP5 之间，语言的设计者从使用`-1`作为返回值转向使用常量或其他形式的输出。这是有道理的，因为`-1`并不是特别令人回味，我猜这种做法会导致混乱。

也就是说，`-1`当我想快速向函数添加另一个返回选项时，我有时倾向于返回，并且`-1`通常似乎是表达我正在编码的结果的一种完全有效的方式。

所以这是我的问题：

1.  `-1`关于在 PHP5 和 PHP4 中作为返回值的远离，我的观察是否普遍正确？

2.  `-1`除了我上面提到的原因之外， return的缺点是什么，其中`-1`返回值对代码清晰度没有积极贡献？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T15:40:01.643

这只是一种预感，但根据我的经验，PHP 中的设计选择几乎没有理由或一致性。我还发现了很多`FALSE`失败时返回的函数，其中许多都带有一个附加说明，即您必须明确区分`FALSE`强制转换为的其他（有效）值`FALSE`，例如`0`. 在这种情况下，我认为`-1`是一个*更好*的返回值。

当然，您总是可以只返回`-1`并定义具有有意义名称且仅映射到`-1`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T15:47:23.910

我猜想任何仍然返回 -1 的 PHP 函数都是出于遗留原因这样做的。

对于有逻辑、合理错误响应且不涉及返回神秘数字代码的简单函数，则应使用该函数。例如，返回`null`、`false`或`0`可能足以传达发生的情况。但是对于更复杂的功能，尤其是那些可能具有多种故障模式的功能，请考虑将它们分解为不同的功能，每个功能处理整个任务的一小部分。

你也可以抛出异常：

```
function doSomething() {
    if (fooFails()) {
        throw new Exception('Foo failed to work properly.');
    } else if (barFails()) {
        throw new Exception('Bar failed this time.');
    }

    return "blahblah";
} 
```

您还可以对该类进行子`Exception`类化以提供更多特异性，并且您可以使用 try-catch 块来检测哪一个。一般来说，我认为最好使用这样的面向对象原则。它生成的代码更加清晰和可维护，尤其是在您完全忘记了为什么以这种方式编写代码之后的 6 个月。

```
class FooException extends Exception {
    // nothing else needed here
}

class BarException extends Exception {
    // nothing else needed here
}

function doSomething() {
    if (fooFails()) {
        throw new FooException();
    } else if (barFails()) {
        throw new BarException();
    }

    return "blahblah";
} 
```

然后你可以使用：

```
try {
    $output = doSomething();

} catch (FooException $e) {
    // respond to the FooException case

} catch (BarException $e) {
    // respond to the BarException case

} catch (Exception $e) {
    // respond to any and all other exceptions that might be thrown
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T15:47:36.540

那是口味问题。我个人更喜欢使用数字。它们对我来说看起来更好。

但在某些情况下，使用`true`and`false`更为可取。像这个：

```
function isXYZ($a) {
    if (...) return true;
    return false;
} 
```

# c++ - 如何解决 imgproc.hpp 和 core.hpp 的错误？

> ID：11072554
> 
> 赞同：6
> 
> 时间：2012-06-17T15:36:59.890
> 
> 标签：c++, opencv

我使用 c++ 程序使用 opencv 2.1 进行图像处理。并且该程序具有以下包含文件：

```
#include "opencv2/core/core.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"
#include <iostream>
#include <math.h>
#include <string.h> 
```

但在调试程序后，我收到错误消息：

**致命错误 C1083：无法打开包含文件：'opencv2/core/core.hpp'：没有这样的文件或目录。**

这与**imgproc.hpp**和**highgui.hpp**相同，之后我更改 `#include "opencv2/highgui/highgui.hpp"`为`#include <highgui.h>`并解决了该错误。

但我找不到**imgproc.hpp**和**highgui.hpp**的解决方案，并且 opencv 文件夹中没有名为**imgproc.hpp**和**highgui.hpp**的文件。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:53:36.350

从路径分隔符来看，我假设您使用的是 *nix OS。因此，以下 shell 命令应该可以帮助您找到头文件的正确位置：

```
locate highgui.h
locate highgui.hpp 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-19T14:28:23.927

如前所述，您的库不在包含的区域中。大多数人已经针对基于 Linux 的系统定制了他们的响应，但如果您使用的是 Windows（即使用 Visual Studio），通常可以在 include 语句中包含库文件夹的整个路径。

例如：

```
#include "C:\OpenCV\bin\install\opencv2\highgui\highgui.hpp"
#include "C:\OpenCV\bin\install\opencv2\imgproc\imgproc.hpp" 
```

我最近在尝试安装 OpenCV 2.4.1 并找到要包含的正确目录（对于“include”和“lib”）一开始很难找到我相当多的错误。我建议重新安装你的 OpenCV 并从那里开始。

[http://opencv.willowgarage.com/wiki/InstallGuide](http://opencv.willowgarage.com/wiki/InstallGuide)

# javascript - 对象不继承原型函数

> ID：11072556
> 
> 赞同：6
> 
> 时间：2012-06-17T15:37:13.277
> 
> 标签：javascript, oop, inheritance, prototype

我有一个构造函数，它充当超类：

```
Bla = function(a){this.a = a;} 
```

我对其进行原型设计以包含一个简单的方法：

```
Bla.prototype.f = function(){console.log("f"); 
```

现在 new`Bla(1).f();`将在控制台中记录“f”。但是，假设我需要一个继承自 Bla 的子类：

```
Bla2 = function(a)
{
    this.base = Bla;
    this.base();
}

x = new Bla2(5); 
```

现在，正如预期的那样，`x.a`给了我`5`. 但是，`x.f`是`undefined`！好像`Bla2`没有从`Bla`类继承它！为什么会发生这种情况，我该如何纠正？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-17T15:44:06.423

> 好像`Bla2`没有从`Bla`类继承它！

正确的。你没有做任何事情来连接继承，你只是创建了一个`Bla2`被调用的成员，`base`它是一个`Bla`实例。`base`不是 JavaScript 中的特殊标识符。

在 JavaScript 中设置继承的典型方法如下所示：

```
// The base constructor function
function Base(x) {
    // Base per-instance init
    this.x = x;
}

// An example Base function
Base.prototype.foo = function() {
    console.log("I'm Base#foo, x = " + this.x);
};

// The Derived constructor function
function Derived(x, y) {
    // Normally you need to call `Base` as it may have per-instance
    // initialization it needs to do. You need to do it such that
    // within the call, `this` refers to the current `this`, so you
    // use `Function#call` or `Function#apply` as appropriate.
    Base.call(this, x);

    // Derived per-instance init
    this.y = y;
}

// Make the Derived.prototype be a new object backed up by the
// Base.prototype.    
Derived.prototype = Object.create(Base.prototype);

// Fix up the 'constructor' property
Derived.prototype.constructor = Derived;

// Add any Derived functions
Derived.prototype.bar = function() {
    console.log("I'm Derived#bar, x = " + this.x + ", y = " + this.y);
}; 
```

...哪里[`Object.create`](http://ecma-international.org/ecma-262/5.1/#sec-15.2.3.5)来自 ES5，但它是最容易被填充的东西之一。（或者你可以使用一个只做最低限度的函数而不尝试做所有的`Object.create`；见下文。）然后你使用它：

```
var d = new Derived(4, 2);
d.foo(); // "I'm Base#foo, x = 4"
d.bar(); // "I'm Derived#bar, x = 4, y = 2" 
```

[实例](http://jsbin.com/ubikof)| [资源](http://jsbin.com/ubikof)

在旧代码中，您有时会看到这样的`Derived.prototype`设置：

```
Derived.prototype = new Base(); 
```

...但是这样做有一个问题：`Base`可能会进行不适合整个`Derived`继承的每个实例的初始化。它甚至可能需要参数（就像我们`Base`所做的那样；我们会传递`x`什么？）。相反，`Derived.prototype`只需将其设置为由 支持的新对象`Base.prototype`，我们就会得到正确的东西。然后我们`Base`从内部调用`Derived`以获取每个实例的 init。

以上是非常基本的，如您所见，涉及许多步骤。它也很少或根本没有使“超级调用”变得容易和高度可维护。这就是为什么你会看到这么多“继承”脚本，比如 Prototype 的`Class`、Dean Edwards 的 Base2 或*（咳）*我自己的[`Lineage`](http://code.google.com/p/lineagejs)。

* * *

如果你不能依赖在你的环境中拥有 ES5 特性，并且不想包含一个 shim 的基本`Object.create`功能，你可以使用这个函数来代替它：

```
function simpleCreate(proto) {
    function Ctor() {
    }
    ctor.prototype = proto;
    return new Ctor();
} 
```

然后代替

```
Derived.prototype = Object.create(Base.prototype); 
```

你会这样做：

```
Derived.prototype = simpleCreate(Base.prototype); 
```

当然，你可以做更多的事情来自动连接——`Lineage`基本上都是这样。

* * *

...最后：上面为了简单起见，我使用了匿名函数，例如：

```
Base.prototype.foo = function() {
    // ...
}; 
```

...但我不会在我的真实代码中这样做，因为[我喜欢帮助我的工具帮助我](http://blog.niftysnippets.org/2010/03/anonymouses-anonymous.html)。所以我倾向于在每个“类”（构造函数和相关原型）周围使用模块模式并使用函数*声明*（因为我确实为网络工作，而 IE7 和 IE8[仍然存在](http://blog.niftysnippets.org/2010/09/double-take.html)命名函数表达式的问题。所以如果我不是t 使用`Lineage`，我会这样做：

```
// Base
(function(target) {
    // Base constructor
    target.Base = Base;
    function Base(x) {
        // Base per-instance init
        this.x = x;
    }

    // An example Base function
    Base.prototype.foo = Base$foo;
    function Base$foo() {
        console.log("I'm Base#foo, x = " + this.x);
    }
})(window);

// Derived
(function(target, base) {
    // The Derived constructor function
    target.Derived = Derived;
    function Derived(x, y) {
        // Init base
        base.call(this, x);

        // Derived per-instance init
        this.y = y;
    }

    // Make the Derived.prototype be a new object backed up by the
    // Base.prototype.    
    Derived.prototype = Object.create(base.prototype);

    // Fix up the 'constructor' property
    Derived.prototype.constructor = Derived;

    // Add any Derived functions
    Derived.prototype.bar = Derived$bar;
    function Derived$bar() {
        console.log("I'm Derived#bar, x = " + this.x + ", y = " + this.y);
    }
})(window, Base); 
```

...或类似的东西。[现场复制](http://jsbin.com/ubikof/2)| [资源](http://jsbin.com/ubikof/2/edit)

# asp.net - 管理工具 MVC3 / MVC4 外键

> ID：11072562
> 
> 赞同：0
> 
> 时间：2012-06-17T15:38:08.783
> 
> 标签：asp.net, asp.net-mvc-3, foreign-keys, asp.net-mvc-4

我已经使用管理工具来创建用户和角色。我想要做的是创建另一个表..

```
public class TaskModel
{
    public int Id { get; set; }
    public string Time { get; set; }
    public string Description{ get; set; }

    public class TaskDBContext : DbContext
    {
        public DbSet<TaskModel> Tasks { get; set; }
    }
} 
```

..并为 UserId（Users 表）和 RoleId（Roles 表）创建一个外键 - （它们都是由管理工具自动创建的）。站点管理工具不会为表创建模型，所以我不知道如何指向它并创建外键。（我相信这篇文章描述了在两个不同的类文件之间创建 FK，但我不能应用它：[我应该如何在 MVC3 中使用代码优先实体框架（4.1）声明外键关系？](https://stackoverflow.com/questions/5542864/how-should-i-declare-foreign-key-relationships-using-code-first-entity-framework)）。

还有另一个问题；我知道如何在视图中显示 TaskModel 记录，但是如何使用其中的外键过滤这些结果？我的意思是按 UserId（登录用户）和/或 RoleId 过滤？（这个问题不如上面的问题重要）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:03:03.160

您可以编写网站管理工具将使用的自定义会员提供程序。在您的自定义成员资格提供程序中，您将在额外表中创建记录，并在创建用户时将它们插入用户表中。如果您为此需要任何特殊的用户界面，那么您必须编写自己的用户管理工具。

[http://www.codeproject.com/Articles/165159/Custom-Membership-Providers](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)

# php - 如何在结果中隐藏数组？

> ID：11072564
> 
> 赞同：1
> 
> 时间：2012-06-17T15:38:11.220
> 
> 标签：php, css, arrays, hide

我将如何在结果中隐藏这些数组？任何帮助是极大的赞赏！！

以下是我目前拥有的.. 我不希望它显示这个数组 mumbo-jumbo。

[http://i.stack.imgur.com/wJUrx.png](http://i.stack.imgur.com/wJUrx.png)

这是我希望结果的样子：http: [//i.stack.imgur.com/Ud1bn.png](http://i.stack.imgur.com/Ud1bn.png)

这是我的 index.php 的一部分

```
if(isset($_POST['url']))
{
  include('curl.php');
  include('youtube.php');

  $tube = new youtube();

  $links = $tube->get($_POST['url']);

  if($links) { ?>

  <div id="result"> 
  <b>Download Links  ( Same IP Downloading only )</b> :
  <pre>
        <?php
        print_r($links);
        ?>
        </pre>
  </div>
        <?php } else {

        echo $tube->error;

        }
    }
        ?>
    </div> 
```

这是我的 youtube.php 的一部分

```
$formats = array(
        '13'=>array('3gp','Low Quality'),
        '17'=>array('3gp','Medium Quality'),
        '36'=>array('3gp','High Quality'),
        '5'=>array('flv','Low Quality'),
        '6'=>array('flv','Low Quality'),
        '34'=>array('flv','High Quality (320p)'),
        '35'=>array('flv','High Quality (480p)'),
        '18'=>array('mp4','High Quality (480p)'),
        '22'=>array('mp4','High Quality (720p)'),
        '37'=>array('mp4','High Quality (1080p)'),
        );
foreach ($formats as $format => $meta) {
    if (isset($foundArray[$format])) {
        $videos[] = array('ext' => $meta[0], 'type' => $meta[1], 'url' => $foundArray[$format]);
    } 
}

return $videos; 
```

感谢您的任何帮助 （：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:52:42.770

由于您正在使用数组，因此只需以自定义格式将它们打印出来。根据您希望结果的样子，我建议采用如下格式：

```
$format = '<p><a href="%3$s">Download</a> video.%s - %s<br/>Right-click download link and choose etc...</p>'; 
```

`$links`并通过它传递数组的每个项目：

```
while($link = array_shift($links))
{
    echo vsprintf($format,$link);
} 
```

上面的代码片段替换了`print_r($links);`. 我已经用你所拥有的数组对其进行了测试：

```
$link = array('ext'=>'flv','type'=>'High Quality','url'=>'http://www.google.com');
echo vsprintf($format, $link); 
```

> [下载](http://www.google.com)video.flv - 高质量
> 右键单击下载链接并选择等...

这就是它的全部，真的。更多`sprint`相关功能：[在 php.net](http://php.net/vsprintf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:42:10.840

不要使用`print_r`. 而是循环遍历元素并以您想要的方式打印它们。你想做一个[`foreach`](http://php.net/manual/en/control-structures.foreach.php)循环，就像你已经做过的那样`youtube.php`

```
$arr = array("one", "two", "three");
print_r($arr);

Output:
Array ( [0] => one [1] => two [2] => three )

foreach ($arr as $value) {
    echo "Value: $value<br />\n";
}

Output:
Value: one
Value: two
Value: three 
```

# css - 带有折叠侧边栏和静态大小中间的三列布局

> ID：11072565
> 
> 赞同：0
> 
> 时间：2012-06-17T15:38:11.717
> 
> 标签：css, html

我不知道如何正确地制作这个布局：

```
_________________________________________
| #Header div                            |
| position:fixed; width:100%;            |
|________________________________________|
|#bgleft      | #main        |#bgright   |
|min-width:0; |width:1000px; |min-width:0|
|max-width:460|              |max-w:460  |
|scroll:fixed |              |           |
|_____________|______________|___________|
|footer div, position:fixed; bottom:0;   |
|________________________________________| 
```

基本上我希望 #bgleft 和 #bgright 不是必需的，因此它们不计入文档宽度，因此如果视口为 1000px 或更小，它只显示#main div。但是如果窗口更大，比如 1200px，它将显示主 div 1000px 加上 bgleft 和 bgright div 各 100px。希望这是有道理的，并感谢您的意见！

编辑：我忘了提到我希望#bgleft 和#bgright 图像的行为类似于滚动：固定，以便这些图像始终保持“连接”到页眉和页脚div。我实际上是在尝试在#main div 周围创建一个小“窗口”，但我希望 bgleft 和 bgright 没有必要，除非窗口足够大以显示它们。

演示： http: [//jsfiddle.net/7Y7TJ/13/](http://jsfiddle.net/7Y7TJ/13/)（这是我能够得到的壁橱，但问题是#bgleft div 的位置不固定，因为#main 内容向下滚动）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:55:47.483

根据我认为你所追求的，我不明白为什么你不能在 CSS 中做到这一点而不需要求助于任何 JS。

您可以在样式表中使用不同的“@media screen”标签来强制页面根据浏览器大小使用不同的样式。

例如：

```
@media screen and (max-width: 1199px) { CSS GOES HERE } 
```

当视口大小达到 1199px 宽时，上面将显示您定义的任何样式。

```
@media screen and (min-width: 1200px) { CSS GOES HERE } 
```

以上将在超过 1200 像素宽的浏览器窗口上显示替代样式。

您还可以结合 max-width 和 min-width 来显示范围之间的样式，例如：

```
@media screen and (min-width: 1000px) and (max-width: 1200px) { CSS GOES HERE } 
```

如果视口在 1000px 和 1200px 之间，那将显示特定样式。

我很确定您想做的所有事情都可以在这种设置中完成。据我所知，有被多余的 JS 和 JQ 拖累的风险，但这似乎有点多余。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:30:51.257

这是我发现的最佳解决方案：

在#main 周围放置一个#wrapper div，并为#wrapper 使用以下css：

```
background-image: url(bgtest.png);
background-repeat: no-repeat;
background-position: center 0;
background-attachment: fixed; 
```

# asp.net - 在写入清除数据之前从数据库读取的可变次数

> ID：11072569
> 
> 赞同：0
> 
> 时间：2012-06-17T15:38:44.727
> 
> 标签：asp.net, vb6

我有一个桌面 vb6 应用程序，它正在加载到 webbrowser 控制在远程网站上生成的 asp.net 网页。在这个网页上有一个标签和一个按钮。标签填充了来自网站上 Access 数据库的文本。

在 asp.net page_load 过程中有一个函数（在循环中）从数据库返回数据，而返回的值是一个空字符串，循环重复。因此，如果没有数据，大约每 2 分钟会有一次超时。由于 vb6 应用程序对网页的调用本身是在一个循环内，因此网页会再次被调用

如果有数据，则 page_load 完成。然后 vb6 应用程序单击该按钮。然后，按钮的单击事件处理程序中的服务器端代码将相关的数据库条目编辑为空字符串。这应该意味着 vb6 应用程序不应该在下一次调用时获得相同的数据，但正在发生的事情是在数据在数据库中清除之前，数据可能会在连续调用中发送 1,2,3,4.. 次。

单击按钮后，我在 vb6 应用程序中延迟了 0.5 秒，然后一切正常。

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:26:12.480

“需要更多详细信息，例如代码示例，您还应该提及您试图通过此技术解决的问题，您可能会得到很好的建议。”**这可能是您的 VB6 循环在您的最后一个 Web 请求完成之前加载了页面**。– 比扬

就是这样，我没有等待文件完成。

# mysql - UNIX_TIMESTAMP 返回 0

> ID：11072570
> 
> 赞同：5
> 
> 时间：2012-06-17T15:38:50.780
> 
> 标签：mysql

我正在尝试使用 unix_timestamp 函数返回该值，但它的行为很奇怪。

```
set @currentdate:= UNIX_TIMESTAMP(NOW() + 1000) /* 1339947588 */
set @currentdate:= UNIX_TIMESTAMP(NOW() + 2000) /* 1339948188 */
set @currentdate:= UNIX_TIMESTAMP(NOW() + 3000) /* 1339948788 */

set @currentdate:= UNIX_TIMESTAMP(NOW() + 4000) /* 0 */
set @currentdate:= UNIX_TIMESTAMP(NOW() + 5000) /* 0 */
set @currentdate:= UNIX_TIMESTAMP(NOW() + 6000) /* 0 */
set @currentdate:= UNIX_TIMESTAMP(NOW() + 7000) /* 0 */

set @currentdate:= UNIX_TIMESTAMP(NOW() + 8000) /* 1339949388 */
set @currentdate:= UNIX_TIMESTAMP(NOW() + 9000) /* 1339949988 */
set @currentdate:= UNIX_TIMESTAMP(NOW() + 10000) /* 1339950588 */ 
```

为什么它为 4000-7000 之间的值返回 0 值？

我看到的答案与当前时间相关，因为给出 0 的间隔会随着时间的推移而变化。可能是什么原因？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:44:38.453

这一点也不奇怪。`NOW()`在调用结果之前，您要在结果中添加一些数字`UNIX_TIMSETAMP()`。我认为您想在 添加值`UNIX_TIMESTAMP` *之前调用：*

```
UNIX_TIMESTAMP(NOW()) + 4000 
```

要不就

```
UNIX_TIMESTAMP() + 4000 
```

这两个都会在当前时间上增加 4000*秒。*另一种解决方案是使用[INTERVAL](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)关键字将时间单位添加到日期：

```
NOW() + INTERVAL 4000 SECOND 
```

根据[手册](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_now)，当`NOW() + 4000`被评估时，`NOW()`返回这种格式的数字：`YYYYMMDDHHMMSS.uuuuuu`例如，`20071215235026.000000`。如果您为此添加 4000，您可能会或可能不会得到类似于真实日期的东西。如您所见，您*不会* 添加秒数或任何其他已定义的实体。如果你得到一个正确的日期`UNIX_TIMESTAMP`将返回一个时间戳，否则它会返回`0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T15:47:50.977

以`NOW()`这种方式用于测试可能会导致令人困惑的结果。所以让我们把它放到一个变量中：

```
SET @now=NOW(); 
```

让我们看一下：

```
SELECT @now;
-> 2012-06-17 17:42:01 
```

嗯。也许我们想在数字上下文中使用它？

```
SET @now=NOW()+0;
SELECT @now;
-> 20120617174201
SELECT UNIX_TIMESTAMP(@now);
-> 1339947721 
```

啊。那是什么？它是当前日期和时间。`2012-06-17 17:42:01`，以及它的 UNIX 时间戳。

现在？

```
SELECT @now + 2000;
-> 20120617176201
SELECT UNIX_TIMESTAMP(@now + 2000);
-> 0 
```

根据上面的逻辑，它代表`2012-06-17 17:62:01`. 这是无效的，这让人`UNIX_TIMESTAMP()`发牢骚。

然而，如果我们这样做，

```
SELECT @now + 7000;
-> 20120617181201
SELECT UNIX_TIMESTAMP(@now + 7000);
-> 1339949521 
```

我们达到了`2012-06-17 18:12:01`可以再次评估的有效时间范围（ ）。

# ruby-on-rails-3 - find_in_batches 仅适用于基于整数的主键？

> ID：11072574
> 
> 赞同：6
> 
> 时间：2012-06-17T15:39:16.130
> 
> 标签：ruby-on-rails-3, activerecord

我的 ActiveRecord 模型使用基于 uuid 的主键，我想`find_in_batches`一次加载 1000 条记录。但是，看到[文档](http://apidock.com/rails/v3.2.3/ActiveRecord/Batches/find_in_batches)，说它只适用于基于整数的主键。我浏览了代码，我看到它只是按“ `primary_key ASC`”排序记录。为什么它不适用于基于非整数的主键？就因为这个命令？我用这种方法尝试了我的模型，它工作正常。

谁能解释一下这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T18:08:40.567

猜测文档不是 100% 正确的。它与**增量**主键一起正常工作。如果您可以保证任何新记录的 uuid 将大于表中任何现有记录的键，它将正常工作。否则，您有机会错过开始批处理后添加的新记录。

在内部，它在每一步获取最后一条记录的 id ( `last_id`) 并选择 1000 条 id 大于`last_id`下一步的记录。因此，如果应用程序在处理步骤期间创建具有唯一 id < 的新记录`last_id`，则该记录将被排除在处理之外。

# android - 以编程方式设置微调器的选定项

> ID：11072576
> 
> 赞同：442
> 
> 时间：2012-06-17T15:39:18.907
> 
> 标签：android, spinner

我正在开发一个 android 项目，我正在使用一个微调器，它使用从数据库填充的数组适配器。

我不知道如何从列表中以编程方式设置所选项目。例如，如果在微调器中我有以下项目：

*   第一类
*   第 2 类
*   第 3 类

创建屏幕时，我如何以编程方式使类别 2 成为选定项目。我在想它可能类似于 c# IE Spinner.SelectedText = "Category 2" 但对于 Android 似乎没有任何类似的方法。

* * *

## 回答 #1

> 赞同：852
> 
> 时间：2012-06-17T15:41:29.997

使用以下内容： `spinnerObject.setSelection(INDEX_OF_CATEGORY2)`。

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2014-02-23T18:08:42.157

这些答案中没有一个给了我解决方案，只使用了这个：

```
mySpinner.post(new Runnable() {
    @Override
    public void run() {
        mySpinner.setSelection(position);
    }
}); 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2012-06-17T15:44:10.480

```
public static void selectSpinnerItemByValue(Spinner spnr, long value) {
    SimpleCursorAdapter adapter = (SimpleCursorAdapter) spnr.getAdapter();
    for (int position = 0; position < adapter.getCount(); position++) {
        if(adapter.getItemId(position) == value) {
            spnr.setSelection(position);
            return;
        }
    }
} 
```

您可以使用上述方法：

```
selectSpinnerItemByValue(spinnerObject, desiredValue); 
```

& 当然你也可以直接按索引选择

```
spinnerObject.setSelection(index); 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2014-08-14T18:45:39.870

一些解释（至少对于 Fragments - 从未尝试过纯 Activity）。希望它可以帮助某人更好地了解Android。

[Arun George](https://stackoverflow.com/questions/11072576/set-selected-item-of-spinner-programmatically/11072595#11072595) 最受欢迎的答案是正确的，但在某些情况下不起作用。[Marco HC](https://stackoverflow.com/questions/11072576/set-selected-item-of-spinner-programmatically/21972242#21972242)
的答案使用 Runnable，由于额外的 CPU 负载，这是最后的手段。

答案是 - 您应该简单地**选择正确的位置来调用 setSelection()**，例如它对我**有用**：

```
@Override
public void onResume() {
    super.onResume();

    yourSpinner.setSelection(pos);
 } 
```

**但它不适用于 onCreateView()**。我怀疑这就是对这个话题感兴趣的原因。

秘密在于，在 Android 中，您无法以任何方法做任何您想做的事情 - 哎呀:( - 组件可能还没有准备好。再举一个例子 - 您既不能在 onCreateView() 也不能在 onResume() 中滚动 ScrollView（在[这里](https://stackoverflow.com/questions/16635834/android-scrollto-does-not-work-in-onresume-method/25291102#25291102)查看答案）

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-10-14T13:35:26.450

要找到一个值并选择它：

```
private void selectValue(Spinner spinner, Object value) {
    for (int i = 0; i < spinner.getCount(); i++) {
        if (spinner.getItemAtPosition(i).equals(value)) {
            spinner.setSelection(i);
            break;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2014-08-08T14:18:53.083

为什么不使用数据库中的值并将它们存储在 ArrayList 中，然后使用：

```
yourSpinner.setSelection(yourArrayList.indexOf("Category 1")); 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2018-03-29T18:57:24.490

最优解是：

```
 public String[] items= new String[]{"item1","item2","item3"};
    // here you can use array or list 
    ArrayAdapter adapter= new ArrayAdapter(Your_Context, R.layout.support_simple_spinner_dropdown_item, items);
    final Spinner itemsSpinner= (Spinner) findViewById(R.id.itemSpinner);
itemsSpinner.setAdapter(adapter); 
```

要自动获取项目的位置，请添加以下语句

```
itemsSpinner.setSelection(itemsSpinner.getPosition("item2")); 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2015-03-12T09:43:36.590

您可以像我在我的 UtilityClass 中所做的那样为这种工作创建一个通用方法，即

```
public void SetSpinnerSelection(Spinner spinner,String[] array,String text) {
    for(int i=0;i<array.length;i++) {
        if(array[i].equals(text)) {
            spinner.setSelection(i);
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-04-10T19:41:35.077

您可以像这样轻松设置：`spinner.setSelection(1)`，而不是 1，您可以设置要显示的列表的任何位置。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-06-25T19:18:05.233

我有一个 SimpleCursorAdapter，所以我必须复制数据才能在这篇文章中使用 respose。因此，我建议您尝试这种方式：

```
for (int i = 0; i < spinnerRegion.getAdapter().getCount(); i++) {
    if (spinnerRegion.getItemIdAtPosition(i) == Integer
        .valueOf(signal.getInt(signal
            .getColumnIndexOrThrow("id_region")))) {
        spinnerRegion.setSelection(i);
        break;
    }
} 
```

我认为这是一种真正的方式

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-11-21T19:23:00.190

在 Kotlin 中，我找到了一个使用 lambda 的简单解决方案：

```
spinnerObjec.post {spinnerObjec.setSelection(yourIndex)} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-07-21T10:01:07.370

这对我来说是工作。

```
 spinner.setSelection(spinner_adapter.getPosition(selected_value)+1); 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-03-25T13:51:40.280

这是我在 Kotlin 中使用的：

```
spinner.setSelection(resources.getStringArray(R.array.choices).indexOf("Choice 1")) 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2016-03-22T22:00:51.007

我知道已经回答了，但是选择一项的简单代码，非常简单：

```
spGenre.setSelection( ( (ArrayAdapter) spGenre.getAdapter()).getPosition(client.getGenre()) ); 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-07-30T15:10:26.190

如果您有联系人列表，则可以这样做：

```
((Spinner) view.findViewById(R.id.mobile)).setSelection(spinnerContactPersonDesignationAdapter.getPosition(schoolContact.get(i).getCONT_DESIGNATION())); 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-07-18T10:53:20.417

*这在本页其他地方的评论中有所说明，但认为将其提取到答案中很有用：*

在使用适配器时，我发现`spinnerObject.setSelection(INDEX_OF_CATEGORY2)`需要在调用***之后***`setAdapter`发生；否则，第一项始终是初始选择。

```
// spinner setup...
spinnerObject.setAdapter(myAdapter);
spinnerObject.setSelection(INDEX_OF_CATEGORY2); 
```

这可以通过查看 AbsSpinner[代码](https://android.googlesource.com/platform/frameworks/base/+/2888524e03896831f487e5dee63f18f1c33c0115/core/java/android/widget/AbsSpinner.java)来确认`setAdapter`。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2016-04-28T17:01:07.647

```
 for (int x = 0; x < spRaca.getAdapter().getCount(); x++) {
            if (spRaca.getItemIdAtPosition(x) == reprodutor.getId()) {
                spRaca.setSelection(x);
                break;
            }
        } 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-10-12T17:06:14.583

这是我正在使用的 Kotlin 扩展：

```
fun Spinner.setItem(list: Array<CharSequence>, value: String) {
    val index = list.indexOf(value)
    this.post { this.setSelection(index) }
} 
```

用法：

```
spinnerPressure.setItem(resources.getTextArray(R.array.array_pressure), pressureUnit) 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-09-22T11:17:31.483

是的，您可以通过在微调器的 setSelection 函数中传递所需微调器项的索引来实现此目的。例如：

spinnerObject.setSelection(INDEX_OF_CATEGORY)。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-09-22T10:20:21.880

这对我有用：

```
mySpinner.post(new Runnable() {
    @Override
    public void run() {
        mySpinner.setSelection(position);

        spinnerAdapter.notifyDataSetChanged();
    }
}); 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-11-22T16:23:05.443

就我而言，这段代码拯救了我的一天：

```
public static void selectSpinnerItemByValue(Spinner spnr, long value) {
    SpinnerAdapter adapter = spnr.getAdapter();
    for (int position = 0; position < adapter.getCount(); position++) {
        if(adapter.getItemId(position) == value) {
            spnr.setSelection(position);
            return;
        }
    }
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-02-21T00:16:43.843

大多数时候`spinner.setSelection(i); //i is 0 to (size-1) of adapter's size` 都不起作用。如果你只是打电话`spinner.setSelection(i);`

这取决于你的逻辑。

如果视图已完全加载并且您想从界面调用它，我建议您调用

```
spinner.setAdapter(spinner_no_of_hospitals.getAdapter());
spinner.setSelection(i); // i is 0 or within adapter size 
```

或者，如果您想在活动/片段生命周期之间进行更改，请像这样调用

```
spinner.post(new Runnable() {
  @Override public void run() {
    spinner.setSelection(i);
  }
}); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-07-04T14:10:39.550

我做了一些扩展功能，`Spinner`用于加载数据和跟踪项目选择。

**微调器.kt**

```
fun <T> Spinner.load(context: Context, items: List<T>, item: T? = null) {
    adapter = ArrayAdapter(context, android.R.layout.simple_spinner_item, items).apply {
        setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)
    }

    if (item != null && items.isNotEmpty()) setSelection(items.indexOf(item))
}

inline fun Spinner.onItemSelected(
    crossinline itemSelected: (
        parent: AdapterView<*>,
        view: View,
        position: Int,
        id: Long
    ) -> Unit
) {
    onItemSelectedListener = object : AdapterView.OnItemSelectedListener {
        override fun onNothingSelected(parent: AdapterView<*>?) {
        }

        override fun onItemSelected(parent: AdapterView<*>, view: View, position: Int, id: Long) {
            itemSelected.invoke(parent, view, position, id)
        }
    }
} 
```

**用法示例**

```
val list = listOf("String 1", "String 2", "String 3")
val defaultData = "String 2"

// load data to spinner
your_spinner.load(context, list, defaultData)

// load data without default selection, it points to first item
your_spinner.load(context, list)

// for watching item selection
your_spinner.onItemSelected { parent, view, position, id -> 
    // do on item selection
} 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2019-05-29T09:23:20.983

从昨天开始我遇到了同样的问题。不幸的是，数组列表中的第一个项目默认显示在微调器小部件中。一个周转方法是找到数组列表中每个元素的前一个选定项目，并将其位置与第一个元素交换。这是代码。

```
OnResume()
{
int before_index = ShowLastSelectedElement();
if (isFound){
      Collections.swap(yourArrayList,before_index,0);
   }
adapter = new ArrayAdapter<String>(CurrentActivity.this,
                            android.R.layout.simple_spinner_item, yourArrayList);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item;                    yourListView.setAdapter(adapter);
}
...
private int ShowLastSelectedElement() {
        String strName = "";
        int swap_index = 0;
        for (int i=0;i<societies.size();i++){
            strName = yourArrayList.get(i);
            if (strName.trim().toLowerCase().equals(lastselectedelement.trim().toLowerCase())){
                swap_index = i;
                isFound = true;
            }
        }
        return swap_index;
    } 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2017-08-05T03:20:27.773

这对我有用：

```
@Override
protected void onStart() {
    super.onStart();
    mySpinner.setSelection(position);
} 
```

它类似于@sberezin 的解决方案，但在 onStart() 中调用 setSelection()。

# c# - 具体来说，编译器如何积极优化生成的字节码？

> ID：11072580
> 
> 赞同：4
> 
> 时间：2012-06-17T15:39:48.653
> 
> 标签：c#, flash, optimization, compiler-construction, llvm

我一直在阅读各种编译器的功能，并且遇到了据报道许多编译器执行的术语“积极优化”。例如，LLVM 引用了以下编译时优化功能：

*   内存/指针特定
*   循环变换
*   数据流
*   算术
*   死码消除
*   内联

这具体是什么意思？假设您有以下代码片段，您如何优化生成的字节码以比编译器生成的代码运行得更快？我对优化 JIT 驱动的运行时（如 C#、Java 和 Flash）的字节码特别感兴趣。这很棘手，因为 JIT 仅支持处理器通常执行的操作码的子集，这限制了您可以执行的优化量。尽管如此，我还是很想知道什么是可能的，以及究竟是什么转换可以推动 VM 的极限。

虚构的代码块：

```
for (i = 0; i < 100; i++){
    in = dataIn[i];
    if ((in % 5) == 0){
        out = ((in / 2) >> 16) - 10;
    }else{
        out = ((in << 5) / 2) * 50 + 10;
    }
    dataOut[i] = out;
} 
```

编译器生成的近似伪代码，用于基于堆栈的 JIT VM，例如 Flash Player：（请原谅我的任何错误，这完全是手写的！）

```
// i = 0
label: "forInit"
   push 0
   writeTo "i"

// while i < 100
label: "forStart"
   push "i"
   push 100
   jumpIfMoreThan "forEnd"

       // in = dataIn[i];
       push "i"
       push "dataIn"
       readProp
       saveTo "in"

       // if ((in % 5) == 0)
       push "in"
       push 5
       mod
       push 0
       jumpIfNotEquals "ifPart2"
       label: ifPart1

           // out = ((in / 2) >> 16) - 10;
           push "in"
           push 2
           divide
           push 16
           rightshift
           push 10
           minus
           writeTo "out"
           goto "ifEnd"

       // else
       label: ifPart2

           // out = ((in << 5) / 2) * 50 + 10;
           push "in"
           push 5
           leftshift
           push 2
           divide
           push 50
           multiply
           push 10
           add
           writeTo "out"

       // dataOut[i] = out;
       label: ifEnd
           push "out"
           push "i"
           push "dataOut"
           writeProp

       // i++
       push "i"
       increment
       writeTo "i"

   // while i < 100
   goto "forStart"
label: "forEnd" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T16:02:53.457

我也一直在研究这个，[LLVM 执行的转换](http://llvm.org/docs/Passes.html)的完整列表，在标题下组织：

*   **死代码删除**
    *   积极的死代码消除
    *   死代码消除
    *   死论点消除
    *   死型消除
    *   死指令消除
    *   死店消除
    *   死亡全球消除
    *   删除死循环
*   **不需要的数据删除**
    *   从模块中删除所有符号
    *   去除未使用符号的调试信息
    *   剥离未使用的函数原型
    *   剥离所有 llvm.dbg.declare 内在函数
    *   从模块中去除所有符号，除了 dbg 符号
    *   合并重复的全局常量
    *   删除未使用的异常处理信息
*   **内联函数**
    *   合并函数
    *   部分内联
    *   功能集成/内联
*   **循环优化**
    *   闭环 SSA 表单传递
    *   循环不变代码运动
    *   将循环提取到新函数中
    *   最多将一个循环提取到一个新函数中
    *   循环强度降低
    *   旋转循环
    *   规范化自然循环
    *   展开循环
    *   取消切换循环
*   **杂项**
    *   将“通过引用”参数提升为标量
    *   组合指令以在基本块内形成向量指令
    *   轮廓引导的基本块放置
    *   打破 CFG 中的关键边
    *   优化代码生成
    *   简单的常数传播
    *   推导函数属性
    *   全局变量优化器
    *   全局值编号
    *   规范化归纳变量
    *   插入用于边缘轮廓分析的仪器
    *   为边缘轮廓插入最佳仪器
    *   合并冗余指令
    *   内部化全局符号
    *   过程间常数传播
    *   过程间稀疏条件常数传播
    *   跳线程
    *   降低非原子形式的原子内在特性
    *   较低的调用和展开，用于展开的代码生成器
    *   将 SwitchInst 降低到分支
    *   提升内存注册
    *   MemCpy 优化
    *   统一功能出口节点
    *   重新关联表达式
    *   将所有值降级到堆栈槽
    *   聚合的标量替换 (DT)
    *   稀疏条件常数传播
    *   简化众所周知的库调用
    *   简化 CFG
    *   代码下沉
    *   将 sret 参数提升为多个 ret 值
    *   尾声消除
    *   尾部复制

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T15:39:49.170

尽管这不能回答您的问题，但我遇到了 C++ 编译器为优化生成的机器代码而执行的以下转换：

*   **强度减少**--- 用作数据索引的迭代变量以与数据单元大小匹配的速率递增
*   **隐藏参数**--- 返回结构的函数实际上将其写入隐藏参数指向的区域
*   **整数除法**--- 在已知除数的情况下，某些公式可用于更有效地评估整数除法
*   **Floating Conditions** --- 将浮点条件转化为复杂的指令序列设置和查询浮点状态
*   **复杂数学** --- 复杂的乘法或除法转换为库调用
*   **本机例程**--- memcpy()、memset()、strcmp() 或 strlen() 操作转换为 rep mov、rep sto、rep zcmp 或 rep zscas
*   **短路**--- 在基本块树中评估复杂条件
*   **工会歧义**--- 关于工会成员的信息丢失
*   **Copy Fragmentation** --- 大的双精度值或聚合值逐字复制
*   **测试碎片**——长整数值的条件由对该值的各个单词的单独测试组成
*   **Switch Fragmentation** --- switch 语句被值上的条件嵌套替换
*   **Loop Header Copy** --- 一个循环增加了一个决定是否进入循环的条件
*   **循环展开**--- 循环被循环体的复制副本替换
*   **函数内联** ---函数调用被函数体的副本替换

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T15:57:47.760

以下是编译器可以进行的两个简单优化：

```
out = ((i / 2) >> 16) - 10; 
```

可以简化为

```
out = (i >> 17) - 10; 
```

和

```
out = ((i << 5) / 2) * 50 + 10; 
```

可以简化为

```
out = (i << 4) * 50 + 10; 
```

要回答您的问题“您如何优化生成的字节码以比编译器生成的字节码运行得更快？” 这是另一个经过优化的字节码版本。

```
// i = 0
label: "forInit"
   push 0
   writeTo "i"

// while i < 100
label: "forStart"
   push "i"
   push 100
   jumpIfMoreThan "forEnd"

       // in = dataIn[i];
       push "i"
       push "dataIn"
       readProp
       saveTo "in"

       // if ((in % 5) == 0)
       push "in"
       push 5
       mod
       push 0
       jumpIfNotEquals "ifPart2"
       label: ifPart1
           // optimization: remove unnecessary /2
           // out = ((in / 2) >> 16) - 10;
           push "in"
           push 17
           rightshift
           push 10
           minus
           // optimization: don't need out var since value on stack
           // dataOut[i] = out;
           push "i"
           push "dataOut"
           writeProp
           // optimization: avoid branch to common loop end 
           // i++
           push "i"
           increment
           writeTo "i"
           goto "forStart"

       // else
       label: ifPart2
           // optimization: remove unnecessary /2
           // out = ((in << 5) / 2) * 50 + 10;
           push "in"
           push 4
           leftshift
           push 50
           multiply
           push 10
           add
           // optimization: don't need out var since value on stack
           // dataOut[i] = out;
           push "i"
           push "dataOut"
           writeProp
           // optimization: avoid branch to common loop end 
           // i++
           push "i"
           increment
           writeTo "i"
           goto "forStart"
label: "forEnd" 
```

# java - 如何从文本文件中读取 ArrayList 但每 3 行

> ID：11072587
> 
> 赞同：0
> 
> 时间：2012-06-17T15:41:00.603
> 
> 标签：java

这是示例文本文件：

布里斯班
03163012
澳大利亚
东京
041022200
日本

现在我想一起读取三个数据然后放入不同的变量。然后再拿三个，依此类推。

```
location = brisbane;  
phoneNumber  = 03163012;
country = Australia; 
```

之后，传入构造函数。

并且有一个 MAXIMUM LOCATION = 10 必须阅读

```
public boolean data()
{
boolean isValid = true;
boolean check = true;
int a = 0;

try
{
    BufferedReader reader = new BufferedReader(newFileReader("location.txt"));
    String data = reader.readLine();

    while (data != null && check)
    {
        if (a != MAX_NUMBER)
        {
            for (int i = 0; i < 3; i++)
            {
                ?????????
                locations.add(newLocation);
                a++;
            }
        else
            check = false;

        data =reader.readLine;
        }
}
reader.close();
} 
```

谁能帮我解决这个问题。我不知道我应该写什么？？？？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:48:44.683

你可能想要在你的 for 循环中这样的东西：

```
 locations.add(data);
            data = reader.readLine();
            if(data!=null) 
                phoneNumber.add(data);
            else
                break;
            data = reader.readLine();
            if(data!=null) 
                country.add(data);
            else
                break;
            a++; 
```

您想阅读 3 行，然后添加到位置，然后是电话号码，然后是国家/地区。不过，您的代码还存在各种其他问题（例如错位的`}`and `newFileReader`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T15:49:47.467

使用 Guava 的方法，逐行读取文件并输出为`List<String>`

[Files.readLines(java.io.File, java.nio.charset.Charset)](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html#readLines%28java.io.File,%20java.nio.charset.Charset%29)

**使用它将使您的代码看起来更简单，您将摆脱所有这些`try-catch-finally`和文件缓冲区。**

迭代该列表并将这些字符串用作变量：

```
location = brisbane;  
phoneNumber  = 03163012;
country = Australia; 
```

迭代可能如下所示：

```
public static void main(String[] args) {

            //it's you a mock
    List<String> lines = new ArrayList<String>();
    lines.add("a");
    lines.add("1");
    lines.add("aa");

    lines.add("b");
    lines.add("2");
    lines.add("bb");

            //Iterating String from file.
    for (int i = 0; i < lines.size(); i += 3) {

        String location = lines.get(i);
        String phoneNumber = lines.get(i + 1);
        String country = lines.get(i + 2);

                    //somehow use red variables
        System.out.println(location);
        System.out.println(phoneNumber);
        System.out.println(country);
    }
} 
```

请注意，在上面的代码中，我填写了我的列表，您的填写在阅读文件后填写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T12:07:07.520

您需要的是另一个位置对象，因此您可以像这样存储您的值：

```
String data = reader.readLine();
int counter = 0;
MyLocation newLocation = null;
while (data != null && ((counter/3) != MAX_NUMBER)){
    switch(counter % 3){
        case 0:
            newLocation = new MyLocation();
            newLocation.setLocation(data);
            break;
        case 1:
            newLocation.setPhone(data);
            break;
        case 2:
            newLocation.setCountry(data);
            locations.add(newLocation);
            newLocation = null;
            break;
    }
    counter++;
}

if(null != newLocation){
    //Error management
} 
```

MyLocation 类将如下所示：

```
private String location = null;

private String phone = null;

private String country = null;

public String getLocation() {
    return location;
}

public void setLocation(String location) {
    this.location = location;
}

public String getPhone() {
    return phone;
}

public void setPhone(String phone) {
    this.phone = phone;
}

public String getCountry() {
    return country;
}

public void setCountry(String country) {
    this.country = country;
} 
```

# jquery-mobile - 如果高日期，日期框执行警报 - Jquery Mobile

> ID：11072589
> 
> 赞同：0
> 
> 时间：2012-06-17T15:41:04.710
> 
> 标签：jquery-mobile, datebox

我有一个 calbox，其中包含一组 highDates 选项：

```
<input name="date" id="date" type="date" data-role="datebox" data-options='{"mode": "calbox", "hideInput": true, "useSetButton":false, "useInline": true, "useImmediate":true, "calHighToday":false, "calHighPick":false, "highDates":["2012-06-20", "2012-06-21"], "themeDateHigh":"b" }'> 
```

我想在单击其中一个 highDates 时执行警报。仅当它是 highDate 时。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:55:03.370

[您应该按照DateBox 事件文档](http://dev.jtsage.com/jQM-DateBox/demos/api/events.html)中的说明绑定到`set`有效负载事件。

```
$('document').bind('pagecreate', function() {
  $('element').bind('datebox', function(e, p) {
    if ( p.method === 'set' ) {
      e.stopImmediatePropagation();

      var myHighDates = $('#date').data('datebox').options.highDates;
      var dateClicked = p.value;

      //DateBox seems to be using diff formats :(
      //Need to convert dateClicked into format matching HighDate 

      if(myHighDates.indexOf(dateClicked) != -1) {
         console.log('highDate clicked:'+dateClicked);
      }else {
         console.log('another date clicked:'+dateClicked );            
      }

    }
  });
}); 
```

这是我尝试过的代码[的jsfiddle](http://jsfiddle.net/7Y9h9/10/) ...我遇到的问题是日期格式不匹配...您必须输​​入一些代码以使它们相似`indexOf`才能工作。

# java - 使用相同 Lib 的 2 个版本

> ID：11072590
> 
> 赞同：0
> 
> 时间：2012-06-17T15:41:12.470
> 
> 标签：java, jar, amazon-s3, amazon

是否可以使用具有不同版本的相同库？

事情是：

我在 WEB-INF/lib 目录中的应用程序中添加了 httpclient-4.0.1。

我为 Amazon S3 服务制作了一个 API，它使用 httpclient-4.1.1。但我不想更新我的应用程序库以使用较新的版本，因为我没有足够的时间来测试和保证应用程序将正常运行。那么，有没有办法让我的 API（实际上是一个 jar）使用 httpclient-4.1.1 而无需升级我的应用程序库（4.0.1）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:51:38.917

你不能在同一个类加载器中使用同一个 Lib 的 2 个版本；但是您可以使用不同的类加载器来加载不同的版本。比如可以使用子类加载器来加载httpclient-4.0.1，在超类加载器中屏蔽4.1.0。

# facebook-php-sdk - 未捕获的 CurlException：7：无法连接到第 886 行 /xxx/base_facebook.php 中抛出的主机

> ID：11072591
> 
> 赞同：0
> 
> 时间：2012-06-17T15:41:14.597
> 
> 标签：facebook-php-sdk, iptables

当我使用 Facebook PHP-SDK 为我的网站实现 FB 登录时，出现上述错误。我尝试将 iptables 更改为打开端口 80 和 443。目前我的 iptables 如下所示：

```
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     tcp  --  anywhere             anywhere            multiport dports www,https       state NEW,ESTABLISHED 
ACCEPT     tcp  --  anywhere             anywhere            state NEW tcp dpt:www 
ACCEPT     tcp  --  anywhere             anywhere            state NEW tcp dpt:https 

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     tcp  --  anywhere             anywhere            state NEW tcp dpt:www 
ACCEPT     tcp  --  anywhere             anywhere            state NEW tcp dpt:https 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:38:22.060

Facebook 最近开始接受通过 IPV6 向 Graph API 服务器发送的请求。

检查您系统的 IPV6 接口是否配置正确，如果不正确则禁用它。

这是最近有 2/3 的人询问“无法连接到主机”错误的原因。

# c# - c#宽度增加位图变透明

> ID：11072592
> 
> 赞同：0
> 
> 时间：2012-06-17T15:41:16.983
> 
> 标签：c#, visual-studio-2010, bitmap

我试图画一个headerCell。

原始图片看起来像这样（增加）：

![增加](../Images/7242b314124ec405df0647721424ec50.png)

我试图拉伸图像宽度：

```
 Bitmap bmp = new Bitmap(3000, 1000);
 Graphics graph = Graphics.FromImage(bmp);
 Image headerMain = Image.FromFile(imagePfad + "header_main.jpg");
 graph.DrawImage(headerMain, X, Y, 300, headerMain.Height);

 Graphics g = CreateGraphics();
 g.DrawImage(bmp, 0, 0); 
```

但后来它变成了这样的透明：

![标题图片](../Images/f46c66e894dcc37b9ab22d69374d335f.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:16:11.687

在如此极端的放大倍率下，插值滤波器所做的工作变得非常明显。您需要将其调整为最近邻，像素偏移模式也很重要：

```
graph.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.NearestNeighbor;
graph.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.Half; 
```

# css - （注释掉）/用已经存在的内联和多行注释包装多行 CSS

> ID：11072593
> 
> 赞同：1
> 
> 时间：2012-06-17T15:41:18.407
> 
> 标签：css, comments

我正在尝试识别我的 CSS 文件中的恶意 CSS 元素/行，并且我想注释掉其中已经包含注释的代码部分，包括内联和多行。我的假设是，一旦`*/`读取了结束标识符，无论您在/下有多少层/级别/嵌套，都会`*/`结束多行注释。

这是示例代码：

```
code 1;
code 2; /* current inline comment*/
code 3;
/* current multi line comment
code 4;
code 5;
*/
code 6; /* current inline comment */
code 7;
code 8; 
```

我希望能够选择代码 3 到 7，并用 and 包装它，然后将其`/*`全部`*/`注释掉。我将如何处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:52:29.027

您可以将不需要的代码放入不存在的媒体类型中。

```
@media DISABLED {
    unwanted code here
} 
```

不相关的排序：

在可以`//`或`--`可以进行单行注释的语言中，以及支持这一点的编辑器中，我喜欢为你做注释的键盘快捷键。例如，在 Visual Studio 中，我可以点击`ctrl k, c`它，它会用单行注释来注释选定的文本。只是从每个选定行的开头`ctrl k, u`删除！`//`

# c# - 在 Windows Phone (C#) 中将复杂对象作为 XML 文件保存到独立存储

> ID：11072599
> 
> 赞同：0
> 
> 时间：2012-06-17T15:41:39.263
> 
> 标签：c#, silverlight, windows-phone-7, isolatedstorage

我将此代码用作我的独立存储助手。

```
public class IsolatedStorageHelper
{
    public const string MyObjectFile = "History.xml";
    public static void WriteToXml<T>(T data, string path)
    {
        // Write to the Isolated Storage
        var xmlWriterSettings = new XmlWriterSettings { Indent = true };
        try
        {
            using (var myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (var stream = myIsolatedStorage.OpenFile(path, FileMode.Create))
                {
                    var serializer = new XmlSerializer(typeof(T));
                    using (var xmlWriter = XmlWriter.Create(stream, xmlWriterSettings))
                    {
                        serializer.Serialize(xmlWriter, data); //This line generates the exception
                    }
                }
            }
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.WriteLine(ex.StackTrace);
            //Dispatcher.BeginInvoke(() => MessageBox.Show(ex.StackTrace));
            //MessageBox.Show(ex.StackTrace);
        }
    }
    public static T ReadFromXml<T>(string path)
    {
        T data = default(T);
        try
        {
            using (var myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (var stream = myIsolatedStorage.OpenFile(path, FileMode.CreateNew))
                {
                    var serializer = new XmlSerializer(typeof(T));
                    data = (T)serializer.Deserialize(stream);
                }
            }
        }
        catch
        {
            return default(T);
            //add some code here
        }
        return data;
    }
} 
```

我正在保存我的类 PdfFile 的一个对象，它具有 ImageSource 作为其属性之一。但是在保存对象时会产生一个异常，它表明`System.InvalidOperationException: The type System.Windows.Media.Imaging.BitmapImage was not expected. Use the XmlInclude or SoapInclude attribute to specify types that are not known statically.` 我想知道这意味着什么，以及我将如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:41:22.340

您正在尝试序列化包含类型变量/属性的类`BitmapImage`。您无法序列化该类型，因此您会得到提到的异常。尝试通过序列化名称或类似的东西并根据该信息在反序列化时实例化 BitmapImage 来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:14:11.280

如果你想在 iso 存储中保存一些不可序列化的东西，那么如果你编写自己的序列化方法，你仍然可以这样做。

大概 BitmapImage 不是您应用程序的原始部分，或者您已经拥有它的文件，所以我猜它一定是新获得的位图。

将您的 BitmapImage 转换为字节数组，您应该没有问题。

# json - 关于json消息的有效性

> ID：11072601
> 
> 赞同：0
> 
> 时间：2012-06-17T15:41:47.127
> 
> 标签：json

我想知道为什么以下不是有效的 json

```
{ test : event} 
```

但

```
{ "test" : "event" } 
```

是有效的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:45:58.980

因为在 JSON 中，字段是用引号声明的（所以 it's`"test"`和 not `test`），并且字段可以存储的唯一数据类型是：数字、字符串、布尔值、数组、对象（即另一个 JSON 对象）或 null。`event`不是这些东西，而是`"event"`一个字符串，它是一个有效的值类型。这些只是 JSON 的规则。

[您应该阅读 JSON。](http://en.wikipedia.org/wiki/JSON)

# java - 是否有一个库可以通过 AJAX/javascript 跋涉？

> ID：11072604
> 
> 赞同：0
> 
> 时间：2012-06-17T15:41:54.020
> 
> 标签：java, php, ajax, curl, screen-scraping

我正在使用 PHP 从网页上抓取一些信息，但是，我发现我试图从网页上抓取的信息是通过某种 AJAX/javascript 方式加载的。我以为我记得 Curl 可以遍历 javascript，但我发现事实并非如此。

我似乎记得某种可以通过 javascript 和 AJAX 跟踪的后端“网络浏览器”库/函数，以获得功能齐全的浏览器将到达的最终页面结果。

有没有可以做到这一点的库或函数？除了必须自己手动跟踪脚本/重定向之外，关于如何解决这个问题的任何想法？它不必很漂亮——我只是想刮掉生成的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:48:31.627

我不认为有这样的图书馆。如果你真的很绝望并且手头有很多时间，那么你当然可以下载 Firefox 的源代码，例如，为自己构建一些有用的东西。但是，我认为这不会是对您或其他任何人资源的最佳利用。

请注意，即使是谷歌的索引机器人也不处理 ajax。 [这](https://developers.google.com/webmasters/ajax-crawling/)是谷歌不得不说的。您正在处理的网站很可能确实支持这一点，在这种情况下，您可以尝试使用这个 google 的技术，但总的来说，不幸的是，您不走运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:46:08.677

也许不是在 php 中，而是在其他语言中：Watir/WatiN、selenium、watir/selenium-webdriver、capybara-webkit、celerity、node.js 直接运行 js 以及 phantomjs。还有 iMacros 和类似的商业选项。

但是我通常发现我可以通过查看页面发出的请求并重新创建它们/解析响应来获得我想要的数据而无需任何这些。

# linq-to-sql - 链接中的多个 where 子句用 or 分隔

> ID：11072606
> 
> 赞同：0
> 
> 时间：2012-06-17T15:42:04.660
> 
> 标签：linq-to-sql

我有以下情况：

用户可以在搜索期间从以下任一选项中进行选择：

*   0
*   1-3
*   4-6
*   7-9
*   10-12
*   12+

说他们选择了 0、4-6 和 12+

SQL where 语句将是：

```
Where (total_count = 0
OR (total_count >= 4 AND total_count <= 6)
OR total_count > 12) 
```

现在为了获得这些值，我正在迭代一个复选框列表集合，所以正在尝试：

```
query = query.Where(tc => tc.total_count >= 4 && tc.total_count <= 6); 
```

但这是在语句之​​间添加一个 AND，我怎么能添加一个或。我意识到我可能会建立一个包含整数的列表并执行包含但我不知道 12+ 可能会达到多少。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:03:26.300

我没有看到添加“OR”的问题。所有“WHERE”子句都需要一个谓词（返回真假的东西”。或者我可能错过了重点。

关于您的 SQL 示例，等价的将是

```
 query.Where(tc=> tc.total_count == 0 || (tc.total_count >= 4 && tc.total_count <= 6) || tc.total_count > 12) 
```

# c# - 为什么我不能从其他程序集中加载类？

> ID：11072607
> 
> 赞同：2
> 
> 时间：2012-06-17T15:42:08.680
> 
> 标签：c#, reflection, .net-assembly

在`web.config`我的 MVC 项目中，我有这个：

```
<appSettings>
    <add key="MembershipRepository" value="Repo.MembershipRepository"/>
</appSettings> 
```

我有这样的代码：

```
var appSettings = ConfigurationManager.AppSettings; 
string membershipRepositoryClassName = appSettings["MembershipRepository"];
Type membershipRepositoryType = Type.GetType(membershipRepositoryClassName);
IMembershipRepository repository = (IMembershipRepository)Activator.CreateInstance(membershipRepositoryType); 
```

假设，包含 的 Web 应用程序`web.config`在 assembly 中`Web`。我给出的代码段是在汇编中`Lib`。该课程`MembershipRepository`正在组装中`Repo`。 `Web`参考了`Lib`和`Repo`。 `Lib`没有对任何其他程序集的引用（它可能被引用为 dll）。 `Repo`可能有也可能没有参考`Lib`。

我明白`membershipRepositoryType`了`null`。我知道也许我需要指定其中的程序集`MembershipRepository`。一种方法是在配置中指定程序集名称（像[这样](https://stackoverflow.com/a/1688449/887149)）。但我认为应该有一些其他的方式。否则如何加载其他类仅从配置文件中获取类名？例如，`MembershipProvider`类从其他程序集中加载得很好。

我怎么能这样做。或者如果我不能，为什么我不能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:19:21.120

来自 MSDN Library 文档[`Type.GetType(String)`](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)：

> *typeName：*要获取的类型的程序集限定名称。请参阅[AssemblyQualifiedName](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)。如果该类型在当前执行的程序集中或在 Mscorlib.dll 中，则提供由其命名空间限定的类型名称就足够了。

最后一句话解释了为什么当你只指定类名时它有时会起作用：如果执行代码在 中`Repo`，那么你可以只指定`MembershipProvider`. 但为了清楚起见（以及性能），我建议您避免这种行为并始终指定程序集名称。或者，如果您已经引用了`Assembly`包含您的类型的 ，那么您可以[`Assembly.GetType`](http://msdn.microsoft.com/en-us/library/etfka5f1)改为调用。

不过，如果您确实遇到不知道哪个程序集包含您的类型的场景，那么您可以搜索当前 AppDomain 中所有已加载的程序集并尝试调用`Assembly.GetType`每个程序集：

```
Type type = AppDomain.CurrentDomain.GetAssemblies()
    .Select(assembly => assembly.GetType(typeName))
    .First(t => t != null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:52:56.303

你正在寻找的是这样的：

```
var types = AppDomain.CurrentDomain.GetAssemblies().ToList()
    .SelectMany( s => s.GetTypes() )
    .Where( p => p.Name == membershipRepositoryClassName ); 
```

这实际上将返回一个列表，因为可以在多个程序集中声明具有相同名称的类型。如果您确定只有一种类型，则可以将`.FirstOrDefault()`或添加`.Single()`到链的末尾。如果`.FirstOrDefault()`您不确定类型是否存在并且希望它在不存在时返回 null，请使用此选项。如果`.Single()`您确定类型应该存在并且希望它在找不到类型时抛出异常，请使用。

# c# - Obj-c 关于指向函数的指针

> ID：11072608
> 
> 赞同：0
> 
> 时间：2012-06-17T15:42:08.963
> 
> 标签：c#, objective-c, function, pointers

我知道可以将块传递给实例方法，并且该方法可以编写如下，

```
-(void)Method:((void) (^)(float)f)
{
    f(0.5);
} 
```

此外，此方法也是一个有效的表达式。

```
-(void)Method:((void) (*)(float)f)
{
    f(0.5);
} 
```

我想知道我可以将什么传递给这个方法？还有这个有什么用？

此外，我想知道是否有任何 obj-c 等效于以下 c# 代码？因为我想知道 obj-c 是否有函数指针。

```
public static float Sum(float x, float y)
{
    return x+y;
}
public delegate float Operation(float x, float y);
public static Main()
{
    Operation dSum = Sum;
    Console.WriteLine(dSum(0.5, 1.5));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:50:04.863

这不需要Objective-C；您正在尝试做的事情可以很容易地翻译成直接 C：

```
static float sum(float x, float y)
{
    return x + y;
}

typedef float (*Operation)(float x, float y);

int main(int argc, char **argv)
{
    Operation dSum = sum;
    printf("%f\n", dSum(0.5, 1.5));
    return 0;
} 
```

这一切看起来都应该很容易辨认。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:51:09.363

您的第二个 Objective-C 方法采用一个 C 函数指针，其寻址函数有一个`float`作为输入并且什么都不返回。它与块相同：

```
typedef void (^ BlockType)(float);
- (void)blockMethod: (BlockType)block {
    block(1.0);
}
[obj blockMethod:aBlock]; 
```

对比

```
typedef void (* FuncType)(float);
- (void)funcMethod: (FuncType)func {
    func(1.0);
}
[obj funcMethod:aFunc]; 
```

不同之处在于函数无法捕获其周围状态（并且函数是函数，块是块。）

# php - Facebook将封面ID作为int返回，在我的机器上变成浮动

> ID：11072612
> 
> 赞同：0
> 
> 时间：2012-06-17T15:42:27.530
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

[http://screencast.com/t/XFRuJtLg](http://screencast.com/t/XFRuJtLg)

他们为什么不将其作为字符串发送？我的系统将其转换为浮点数，然后我失去了 id 的准确性，因为它的舍入很差。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:15:06.050

如果您在使用 json_decode(?) 时遇到此问题，那么只需将该选项设置`JSON_BIGINT_AS_STRING`为函数调用中的第 4 个参数。

[http://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:05:33.217

它显示为浮点数，因为您正遭受整数溢出。

您将需要研究您的开发环境如何处理 64 位整数。如果没有本机支持，您可能需要特别添加一个 bigint 库。BCMath 就是这样一个库

“如果 PHP 遇到超出整数类型范围的数字，它将被解释为浮点数。” [http://php.net/manual/en/language.types.integer.php](http://php.net/manual/en/language.types.integer.php)

# ios - 如何检查 NSData 是否适用于 UIImage

> ID：11072613
> 
> 赞同：16
> 
> 时间：2012-06-17T15:42:38.213
> 
> 标签：ios, objective-c, iphone, uiimageview, uiimage

```
NSError *error = nil;
NSURL *url = [NSURL URLWithString:[imageLinks objectAtIndex:0]];
NSData *tdata = [NSData dataWithContentsOfURL:url options:NSDataReadingUncached error:&error];
if (error) {
    NSLog(@"%@", [error localizedDescription]);
}else {
    // no error, this one is being called within my app
    NSLog(@"Data loaded successfully");
}
self.pictureView1.image = [UIImage imageWithData:tdata]; 
```

我有一个 jpeg 文件，我可以确认 URL 内容已成功收集，但是当我尝试将图像数据放入`UIImage`我的应用程序时失败。我想知道是否有任何检查 NSData 以确认它可用于`UIImage`.

我也不知道是什么导致了这个失败，以及如何防止它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-17T15:52:35.110

如[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)imageWithData: 中所述，如果 UIImage 无法从数据创建图像，则返回 nil。在运行时处理此问题的正确方法是在该方法返回 nil 时提供占位符图像。

至于诊断，首先查看控制台消息，它们有时会提供有用的信息。如果没有，您最好的运气是将 NSData 转储到磁盘并将结果与​​存储在服务器上的文件进行比较。您有时会收到损坏的数据，有时您会在您期望 jpeg 二进制数据的地方收到一条 html 错误消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-16T19:55:44.793

您可以使用

```
 if ([UIImage imageWithData:yourNSData]) {
     // there was an image
 } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-11T21:59:26.730

对于**Swift**试试这个，

```
if let image = UIImage(data: yourNSData){
   YourImageView.image = image
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-18T13:44:32.310

如果您正在处理单个小图像，则可以转换`Data`为`UIImage`：

```
if let _ = UIImage(data: data) {
   print("data contains image data")
} else {
   print("data does not contain image data")
} 
```

但是，如果您要处理大量图像或高清图像，则可以使用`The magic bytes`所有文件中的名称，即表示文件签名的前几个字节。

基本上你只需要提取几个字节而不是分配整个图像。

这是`Data`使用此技术的扩展：

```
import Foundation

extension Data {
    var isImageData: Bool {
        let array = self.withUnsafeBytes {
            [UInt8](UnsafeBufferPointer(start: $0, count: 10))
        }
        let intervals: [[UInt8]] = [
            [0x42, 0x4D], // bmp
            [0xFF, 0xD8, 0xFF], // jpg
            [0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A], // png
            [0x00, 0x00, 0x00, 0x0C, 0x6A, 0x50, 0x20, 0x20], // jpeg2000
            [0x49, 0x49, 0x2A, 0x00], // tiff1
            [0x4D, 0x4D, 0x00, 0x2A] // tiff2
        ]

        for interval in intervals {
            var image = true
            for i in 0..<interval.count {
                if array[i] != interval[i] {
                    image = false
                    break
                }
            }
            if image { return true }
        }
        return false
    }
} 
```

您可以添加更多图像或想象基于该代码和文件类型的任何文件类型识别（例如[，请参阅 Wikipedia 文件签名列表](https://en.wikipedia.org/wiki/List_of_file_signatures)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-25T11:49:44.973

在斯威夫特 4.2

```
self.userImageView.image = UIImage(data: data) != nil ? UIImage(data: data) : UIImage.init(named: "YourDesiredImage") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-28T08:54:21.837

试试这个...

```
if ((dataImage != NULL) && ![v isKindOfClass:[NSNull class]])
{

} 
```

除此之外，在我的情况下没有任何效果。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-18T07:56:24.413

```
if (tdata !=(NSData *)nil){ 
    NSlog(@"Valid");
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-06-18T06:53:51.180

```
if (tdata !=nil){ 
    NSlog(@"Valid");
} 
```

试试这个，这将检查 nsdata 是否为空。

# jquery - fullCalendar jQuery，每周一重复？

> ID：11072616
> 
> 赞同：13
> 
> 时间：2012-06-17T15:43:06.027
> 
> 标签：jquery, fullcalendar

通常这是日历中的事件：

```
 {

                title: 'Test',

                start: '2012-06-08',

                end: '2012-06-08',

                url: 'test/test'

            }, 
```

工作正常。虽然我怎样才能在日历中的每个星期一显示 1 个事件？或者每个星期二等取决于您输入的工作日/号码？如果存在一个参数是什么？

如果它不存在，我可以以某种方式修改并添加实现此功能的功能吗？因此，您可以输入一个参数，如 repeatEveryWeekDay: 2（即星期一），然后在未来的所有星期一，数据将显示在那里。

我尝试查看[http://arshaw.com/fullcalendar/docs/event_data/Event_Object/](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)但找不到任何东西。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-20T01:47:10.560

`fullCalendar`允许您传递一个函数，而不是传递事件数组，而是传递一个函数，例如，从服务器下载事件，或动态生成这些事件。

文档中的大多数示例都使用 HTTP 请求来获取事件数据。但是回调函数仍然足够灵活，可以让它按照你想要的方式工作。

请看下面我刚刚为您编写的示例：

```
$(document).ready(function() {

    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        editable: true,
        events: [
            // some original fullCalendar examples
            {
                title: 'All Day Event',
                start: new Date(y, m, 1)
            },
            {
                title: 'Long Event',
                start: new Date(y, m, d-5),
                end: new Date(y, m, d-2)
            },
            {
                id: 999,
                title: 'Repeating Event',
                start: new Date(y, m, d-3, 16, 0),
                allDay: false
            }
        ]
    });

    // adding a every monday and wednesday events:
    $('#calendar').fullCalendar( 'addEventSource',        
        function(start, end, callback) {
            // When requested, dynamically generate virtual
            // events for every monday and wednesday.
            var events = [];

            for (loop = start.getTime();
                 loop <= end.getTime();
                 loop = loop + (24 * 60 * 60 * 1000)) {

                var test_date = new Date(loop);

                if (test_date.is().monday()) {
                    // we're in Moday, create the event
                    events.push({
                        title: 'I hate mondays - Garfield',
                        start: test_date
                    });
                }

                if (test_date.is().wednesday()) {
                    // we're in Wednesday, create the Wednesday event
                    events.push({
                        title: 'It\'s the middle of the week!',
                        start: test_date
                    });
                }
            } // for loop

            // return events generated
            callback( events );
        }
    );
}); 
```

上述函数会在两个日期之间的每个星期一和星期三自动生成一个事件。日期在`start`和`end`参数中表示。这些参数通过`fullCallendar`. `fullCallendar`上述函数产生的事件通过`callback`第三个参数中的函数返回。

我使用[DateJS](http://www.datejs.com/)来测试给定的日期是否是星期一。

**更新**：如果您想混合静态事件和/或 [多个] 可重复事件，您可以使用[addEventSource](http://arshaw.com/fullcalendar/docs/event_data/addEventSource/)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-08T09:33:18.113

克里斯托弗·拉米雷斯 (Christopher Ramírez) 的帖子的一点更新。使用 fullCalendar at`v2.2.3`和 momentjs at`v2.8.4`您需要修改上面代码段中的几行以使其工作：

第一的：

```
function(start, end, callback) {} 
```

至

```
function(start, end, status, callback) {} 
```

因为第三个参数是布尔值，第四个是回调函数

然后：

```
for (loop = start.getTime();
     loop <= end.getTime();
... 
```

至

```
for (loop = start._d.getTime();
     loop <= end._d.getTime(); 
```

因为传递给函数的开始和结束对象不是 Date 对象，并且在它们上调用 .getTime() 最终会出现“未定义不是函数”错误。

就是这样！这个修改使它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-17T13:44:36.997

我发现解决重复事件的最佳方法是设置对后端语言的 JSON 调用（我使用的是 Django/Python）。

所以在日历选项中我会有：

> 事件：{ url：'/event-data'，缓存：false }，

然后在我的后端，我利用为当前显示的日历“开始”和“结束”URL GET 变量发送的参数。IE：

> hxxp://example.com:8000/event-data?start=2014-09-28&end=2014-11-09&_=1413553318353

将从事件选项发送一个 Get 请求，然后我从列出重复事件以及常规日历事件的数据库/源文件构建事件，并在 JSON 列表中仅发回在该日期范围内发生的事件列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T15:59:41.707

事件对象的 ID 字段决定了该事件的可重复性。对一周中特定日期的所有重复事件使用相同的 ID。

# javascript - jQuery getJSON 跨域

> ID：11072620
> 
> 赞同：3
> 
> 时间：2012-06-17T15:43:29.490
> 
> 标签：javascript, jquery, ajax, json

我正在尝试使用 jQuery Cross Domain（在 github 上）获取数据。但没有成功！我读到我必须提出一个请求 jsonp，但我不明白出了什么问题..

[http://jsfiddle.net/jzjVh/](http://jsfiddle.net/jzjVh/)

Chrome 将文件解释为 Javascript .. IE9 除了警告，因为文件“由于 mime 类型不匹配而被阻止”.. 我什至不明白 .txt 和 .json 是否有区别。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T15:45:58.873

我们又来了……
您正在与[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)战斗。

![在此处输入图像描述](../Images/4b541763e20c8652a2ee865dab3c9d15.png)
尽管

![在此处输入图像描述](../Images/a44d1da013021905714ea36447e8e646.png)

可能的解决方案是使用本地代理，例如[http://developer.yahoo.com/javascript/howto-proxy.html](http://developer.yahoo.com/javascript/howto-proxy.html)

![在此处输入图像描述](../Images/8e4dd635f346df48f16c02c8c086256b.png)

# html - 表格中的文本垂直居中

> ID：11072621
> 
> 赞同：1
> 
> 时间：2012-06-17T15:43:35.770
> 
> 标签：html, css

我有这张桌子：

```
<table border="1" style="width:100%">
    <tr>
        <td>Message</td>
        <td>Preview:</td>
    </tr>
    <tr>
        <td width="50%">
            <div style="float:left;">
                <textarea name="message" rows="10" cols="50" onkeyup="preview(this.value)">Enter your message here</textarea>
            </div>
        </td>
        <td style="background-color:rgb(255, 170, 0);" id="preview">
            <div>Enter your message here</div>
        </td>
    </tr>
</table> 
```

这是一个文本区域，可以预览它旁边的外观。但是，当我希望它从顶部开始时，预览单元格中的所有文本都是垂直居中的。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:48:57.967

```
<td style="background-color:rgb(255, 170, 0); vertical-align: top;" id="preview"><div>Enter your message here</div></td> 
```

只需添加`vertical-align: top`属性，然后它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:04:49.877

在css中添加以下代码，

```
table tr td {
vertical-align:top;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T15:50:21.070

使用`vertical-align:top`（默认情况下，它适用于表格而不是其他 html 元素）阅读： [http ://www.w3.org/wiki/CSS/Properties/vertical-align](http://www.w3.org/wiki/CSS/Properties/vertical-align)

# google-maps-api-3 - 使用 Google Street View API 构建您自己的街景

> ID：11072623
> 
> 赞同：3
> 
> 时间：2012-06-17T15:43:51.930
> 
> 标签：google-maps-api-3

有没有一种方法可以使用 Google Street View API 上传我自己的小时/建筑物全景图像，然后使用 Google Street View Engine 导航扔掉它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T19:26:06.260

是的，您需要制作自定义街景全景图：[https ://developers.google.com/maps/documentation/javascript/streetview#CustomStreetView](https://developers.google.com/maps/documentation/javascript/streetview#CustomStreetView)

这是一个很好的例子：[http ://www.gta4.net/map/](http://www.gta4.net/map/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:54:35.390

我正在为一座大型建筑做一个类似的项目。

首先，您需要某种方法为图像生成 360 度全景图。我已经调整[了 hugin](http://hugin.sourceforge.net/)以在一组 bash 脚本中使用，以在 Linux 机器中自动生成 panos。所以，我只是将图像上传到一个文件夹，使用文件夹位置和每个全景图的图像数量执行脚本，然后不用管它。根据每个全景图的图像数量，每个全景图预计等待 5-45 分钟。

其次，查看[示例](https://developers.google.com/maps/documentation/javascript/streetview#CustomStreetView)链接，了解如何使用 JS 和 StreetView。我认为您的任务会更容易，因为您可以将所有位置写入 JS 文件中，而不是依赖数据库调用和解析。

第三，如果您不为服务付费，请确保您的使用量在 API 设置的限制范围内。如果您超过每日限制，则无法参加此行程。

# c++ - MATLAB 到 C++ 编程帮助请

> ID：11072629
> 
> 赞同：-2
> 
> 时间：2012-06-17T15:44:17.313
> 
> 标签：c++, matlab, porting, matlab-deployment

我创建了 MATLAB 代码，但我想知道是否可以以简单的形式将此 MATLAB 代码转换为 C++。

```
%# Plotting T coordinates which represent the temperature 
%# in the vertical 

clear all; 

T=[22 24 16.2 8.4 -0.3 -7.3 -20.3 -37.1 -56.7]; 
H=[0 914 1876 3141 4267 5830 7530 9590 12280]; 
%# Plotting H coordinates which represent the height 
%# in the vertical 

%# 3 point running mean 
Tmean = conv(T, ones(1,3)/3); 
Tmean_valid = Tmean(3:end-2); 

Hmean = conv(H,ones(1,3)/3); 
Hmean_valid = Hmean(3:end-2); 

figure(1); 
plot(Tmean_valid,H(2:end-1), ':*r'); 
hold on 
plot(T,H,':*g') 
legend('Running Mean','Temperature Profile') 
title('Temperature Running Mean as function of height') 
xlabel('Temperature(C)') 
ylabel('Height (m)')" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:59:55.570

如果你有 MATLAB R13，你应该有[MATLAB Compiler](http://www.mathworks.fr/products/compiler/) 3.0，它能够将 M 代码翻译成 C/C++ 代码。仅当我了解文档时，它才是 Windows。

如果您使用编译器，[此文档页面应该可以帮助您](http://www.mathworks.fr/help/toolbox/compiler/mcc.html)。对于图形视图，我认为以下命令应该可以工作（未经我自己测试）`mcc -B sgl mymainfile`：.

我认为您也可以直接使用 C++ 中的 MCR（MATLAB 组件运行时），这个运行时是能够运行 M 代码的虚拟机。我不确定，因为我从来没有这样做过；）

# sql - 可以将行号添加到不依赖于顺序的 SELECT 子句

> ID：11072632
> 
> 赞同：0
> 
> 时间：2012-06-17T15:44:42.283
> 
> 标签：sql, sql-server, tsql

如果我有这个[小提琴](http://sqlfiddle.com/#!3/5c1e3/1)

```
CREATE TABLE temp
(
y          char(9),
x          char(9)
);

insert into temp (x, y) values ('j', 'hello');
insert into temp (x, y) values ('j', 'world');
insert into temp (x, y) values ('q', 'foo');
insert into temp (x, y) values ('q', 'bar');

select 
x
,y
from temp 
```

我想在 SELECT 子句中包含一个行号。所以结果看起来像这样：

```
x y     r
j hello 1 
j world 2
q foo   3
q bar   4 
```

我不相信 Row_number() over 会起作用，因为这需要一个订单，我不想从`SELECT * FROM`. 也不想在客户端数据库表中添加一个标识列

这在 SQL-Server 中可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:49:57.967

如果您可以`r`接受不确定性（换句话说，它可能不会每次都一样）：

```
select 
x
,y
, r = ROW_NUMBER() OVER (ORDER BY (SELECT NULL))
from temp
order by r; 
```

即使是一个非常简单的情况，它也不能以同样的方式工作：

```
CREATE TABLE temp
(
y          char(9) PRIMARY KEY,
x          char(9)
); 
```

当然，如果您希望订单是随机的：

```
select 
x
,y
, r = ROW_NUMBER() OVER (ORDER BY NEWID())
from temp
order by r; 
```

# java - 使用 Jetty 了解 Get 和 Posts

> ID：11072637
> 
> 赞同：0
> 
> 时间：2012-06-17T15:45:39.903
> 
> 标签：java, linux, servlets, jetty, httphandler

我是这里的初学者，使用 servlet 以及在 JSP 中使用的 get 和 post 方法。我无法理解 servlet 和处理程序之间的区别。有些地方将 servlet 与处理程序进行比较，这让我更加困惑。

如何使用处理程序或 servlet 但使用 Jetty 创建表单？在 http 上提交一些数据并期望得到响应或只是得到响应。

我一直在谷歌上搜索，但找不到一个好的综合读物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:48:27.983

[这里](http://www.seas.upenn.edu/~cis330/jetty.html)有一个简单的教程。

我认为这可以给你一个良好的开端。

要了解特定于 Jetty 的 Servlet 和 Handlers 之间的区别或相似之处，您可以查看[这里](http://67-23-9-112.static.slicehost.net/tut/index.html)。

# php - 如何在 Codeigniter (PHP) 中为忘记密码功能创建一个临时过期 url

> ID：11072638
> 
> 赞同：-1
> 
> 时间：2012-06-17T15:45:58.680
> 
> 标签：php, codeigniter

我正在尝试创建一个忘记密码的功能，其中我需要一个指向重置密码页面的临时 URL，该页面在有限的时间段内有效（例如：3 小时）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T15:50:39.200

1.  创建随机哈希
2.  将其与当前时间戳一起保存到您的数据库中
3.  使用此哈希创建一个 URL 并将其发送给用户
4.  当 URL 被调用时，检查是否`currentTimestamp < (savedTimestamp + (3 * 3600))`

# javascript - 私有方法使用或不使用功能的困惑

> ID：11072643
> 
> 赞同：2
> 
> 时间：2012-06-17T15:46:30.823
> 
> 标签：javascript, oop, class

我没有参加任何官方的 Javascript 课程。

我经常在教程中读到这个：

```
function Bank(name) {
   this.name = name;
   var balance = 100;

   // *my question here* method to access balance
   this.getBalance = function() {
       return balance * 0.9 ;
   };
}

var myBank = new Bank("My Bank");
console.log( myBank.getBalance() ); 
```

为什么开发人员使用 getBalance() 而不是 getBalance？

我认为“getBalance”更容易阅读，但没有教程使用这个：

```
// *my question here* method to access balance
   this.getBalance = balance * 0.9 ; 
```

然后

```
console.log( myBank.getBalance ); 
```

我没有看到任何使用上述风格编写的教程，即使它更简单。所以：

**两种代码风格有什么不同吗？是否需要避免`.getBalance`操作私有变量？**

提前感谢解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:54:19.417

您必须了解变量、函数和函数调用之间的区别。这是可变的：

```
this.getBalance = balance * 0.9 ; 
```

变量的值`getBalance`在代码执行时计算一次。每次访问`getBalance`（不带括号）时，都会返回先前计算的值。

`getBalance`使用变量有一个重要的含义。如果您`balance`将来修改基础变量，`getBalance`则不会反映该更改，因为它是使用旧`balance`值计算的。

在以下情况下：

```
this.getBalance = function() {
   return balance * 0.9 ;
}; 
```

`getBalance`也是变量，但它指向一个函数，而不是一个简单的值。如果你像变量一样访问它，你会得到一个函数引用：

```
var fun = this.getBalance 
```

您现在可以使用 调用该函数`fun()`，但`fun`引用本身（与 相同`this.getBalance`）在您的情况下不是很有用。

当然，您可以使用`this.getBalance()`. 语义上的区别如下：每次调用`getBalance()`，都会执行函数体。这意味着`balance`再次读取 的值并且`getBalance()`返回值始终是最新的。

如您所见，分配函数和将简单值（如数字）分配给变量之间存在巨大差异。根据您选择的方法，它会产生不同的影响。您必须了解 JavaScript 的功能方面才能充分利用其功能。

# android - 使用自定义字体的最简单方法？- 安卓

> ID：11072644
> 
> 赞同：3
> 
> 时间：2012-06-17T15:46:44.950
> 
> 标签：android, xml, fonts, typeface, custom-font

我发现在我的 android 应用程序上使用自定义字体的方式是使用下面的代码

```
TextView txt = (TextView) findViewById(R.id.textView1);  
        Typeface font = Typeface.createFromAsset(getAssets(), "ABCD.TTF");  
        txt.setTypeface(font); 
```

我已将 ABCD.TTF 存储在**资产**文件夹中。

是的，它可以工作，没有问题。问题是我必须为我拥有的每一个文本、按钮等添加上面的代码。如果有很多不同的文本和按钮，这真的很耗时活动 ：（

我需要的是一种替代方法，一种最简单的方法。

就像使用单个代码块而不是像上面那样重复来更改所有东西的字体..

否则在**xml中执行**

或者有什么方法可以将我们的自定义字体添加到*正常、无、衬线、等宽*存在的内置字体中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:55:43.160

> 就像使用单个代码块而不是像上面那样重复来更改所有东西的字体..

在各种 StackOverflow 答案中已经解决了几种方法。这是迭代 a 的子级`ViewGroup`并将 a`Typeface`应用于所有实现的`TextView`：
- [https://stackoverflow.com/a/7580370/115145](https://stackoverflow.com/a/7580370/115145)

> 否则在 xml 中执行

抱歉，不支持此功能。

> 或者有什么方法可以将我们的自定义字体添加到正常、无、衬线、等宽存在的内置字体中。

抱歉，不支持此功能，除非您构建自己的固件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T18:29:42.253

您可以使用简单的[EasyFonts](https://android-arsenal.com/details/1/2044)第三方库为您的`TextView`. 通过使用这个库，您不必担心下载字体并将其添加到 assets/fonts 文件夹中。还有关于字体对象的创建。

简单地：

```
TextView myTextView = (TextView)findViewById(R.id.myTextView);
myTextView.setTypeface(EasyFonts.robotoThin(this)); 
```

# c# - 将sql查询转换为实体框架

> ID：11072651
> 
> 赞同：0
> 
> 时间：2012-06-17T15:47:37.670
> 
> 标签：c#, .net, sql-server-2008, entity-framework

请我需要有人帮助转换此查询实体（c#）表单。

```
select * 
from incident 
where Details like'%Help%' 
and status = 'Resolved' 
or details like '%Help%' and Status = 'Closed' 
```

看看我尝试了什么

```
incident = incident.Where(s => s.Details.ToUpper().Contains(SearchParam.ToUpper())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:57:46.840

```
incident = incident.Where(s => s.Details.ToUpper().Contains(SearchParam.ToUpper()) 
              && (s.Status == "Resolved" || s.Status == "Closed")); 
```

# firefox - firefox @font-face 因 fontawesome 而失败

> ID：11072655
> 
> 赞同：9
> 
> 时间：2012-06-17T15:48:08.013
> 
> 标签：firefox, font-face, font-awesome

我正在运行的 OSS 应用程序上使用 FontAwesome 字体，但我似乎无法通过 Firefox 的字体清理程序。

这些文件都在同一个域中提供，路径是正确的，我使用的是 FontAwesome 的官方 css，当通过他们的网站和本地文档提供时，它在 Firefox 中工作。

所以我一定错过了一些简单的东西。

直播网址：[https ://bmark.us](https://bmark.us)

```
[11:39:02.945] downloadable font: invalid version tag (font-family: "FontAwesome" style:normal weight:normal stretch:normal src index:0)
source: http://127.0.0.1:6543/static/font/fontawesome-webfont.eot @ http://127.0.0.1:6543/static/css/responsive.css
[11:39:02.945] downloadable font: rejected by sanitizer (font-family: "FontAwesome" style:normal weight:normal stretch:normal src index:0)
source: http://127.0.0.1:6543/static/font/fontawesome-webfont.eot @ http://127.0.0.1:6543/static/css/responsive.css 
```

当我尝试通过 dev 纠正此问题时，是 Firefox 错误的示例。我试图做完整的根路径 /static/font 和相对于 css ../font/ 并且它总是失败并出现这些错误。

一切都在 Chrome 等中运行。似乎 Firefox 讨厌我。我已经搜索了其他答案，并且得到了整个系列的字体。

[https://github.com/mitechie/Bookie/tree/develop/bookie/static/font](https://github.com/mitechie/Bookie/tree/develop/bookie/static/font)

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T18:07:47.717

谢谢，这是一个两部分的问题。

第二部分首先出现。fontawesome.scss 中的示例 css 在各种字体格式的路径周围使用单引号。当我在它们上运行我的 scss 构建器（pyscss）时，它剥离了它们。他们需要是双引号。

由于没有引号，FF 无法解析 src: url(...) 位。因为它失败了，它只有 src: ..eot 这意味着 IE 有，它在 FF 中不起作用。

将引号更改为双引号使一切都变得愉快。

所以这是我使用 pyscss 的错，它的解析器最终破坏了 Firefox 的语法。

感谢[马特](https://stackoverflow.com/questions/11072655/firefox-font-face-fail-with-fontawesome/11085126#11085126)帮助我仔细研究了这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-24T01:45:27.570

我在我的一个客户网站上遇到了同样的问题。

```
@font-face {
 font-family: 'SourceSansProBlack';
  src: url('http://everythingfonts.com/font/face/HwlUPF6WEeKcF1DlSVDSjg/eot');
  src: url('http://everythingfonts.com/font/face/HwlUPF6WEeKcF1DlSVDSjg/eot') format('embedded-opentype'),
       url('http://everythingfonts.com/font/face/HwlUPF6WEeKcF1DlSVDSjg/woff') format('woff'),
       url('http://everythingfonts.com/font/face/HwlUPF6WEeKcF1DlSVDSjg/ttf') format('truetype'),
       url('http://everythingfonts.com/font/face/HwlUPF6WEeKcF1DlSVDSjg/svg') format('svg');
} 
```

以上在Firefox中工作。下面那个没用。

```
@font-face {
 font-family: 'SourceSansProBlack';
  src: url('http://everythingfonts.com/font/face/HwlUPF6WEeKcF1DlSVDSjg/eot');
  src: url('http://everythingfonts.com/font/face/HwlUPF6WEeKcF1DlSVDSjg/eot') format(embedded-opentype),
       url('http://everythingfonts.com/font/face/HwlUPF6WEeKcF1DlSVDSjg/woff') format(woff),
       url('http://everythingfonts.com/font/face/HwlUPF6WEeKcF1DlSVDSjg/ttf') format(truetype),
       url('http://everythingfonts.com/font/face/HwlUPF6WEeKcF1DlSVDSjg/svg') format(svg);
} 
```

原来格式说明符需要像格式（'svg'）一样被引用。网站提供的一些 css 样式表没有引用格式说明符。我已经用单引号和双引号尝试了路径，但这没有任何区别。所以我可以说这是不带引号的格式说明符而不是双引号/单引号路径的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T14:37:41.093

A) 你确定你的服务器设置了 eot/woff/ttf/svg 的 mime 类型吗？B) 看起来您遇到了 EOT 的问题。这可以通过 Firefox 不支持 EOT 来解释；它使用 WOFF 和 TTF。C) 您是否尝试过使用 Firebug 或 Firefox 的原生开发工具进行调试？D) 你能发布你的（相关的）CSS 和 HTML 吗？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-06T14:09:21.770

在我的情况下，将*.eot/* .woff/ *.svg/* .ttf 文件放置在与放置其他静态内容（css、png 等）相同的 *.war 文件中就足够了。看起来 FF 和 IE 发现从其他服务器下载字体文件很危险。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-21T04:49:35.087

我知道这来晚了，但最好的选择是使用 CDN 中的 font-awesome。如果你这样做，你几乎不会遇到这种错误。

如果您从外部文件引用字体，请注释掉以下行：

```
@font-face {
    font-family: FontAwesome;
    src: url("../vendors/font-awesome/fonts/fontawesome-webfont.eot");
    src: url("../vendors/font-awesome/fonts/fontawesome-webfont.eot") format("embedded-opentype"), url("../vendors/font-awesome/fonts/fontawesome-webfont.woff2") format("woff2"), url("../vendors/font-awesome/fonts/fontawesome-webfont.woff") format("woff"), url("../vendors/font-awesome/fonts/fontawesome-webfont.ttf") format("truetype"), url("../vendors/font-awesome/fonts/fontawesome-webfont.svg#fontawesomeregular") format("svg");
    font-weight: 400;
    font-style: normal
}
```

并在头部使用来自 CDN 的链接

```
<head>
   <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

</head
```

你会很高兴的。

# css - 浮动图像伸出div底部

> ID：11072656
> 
> 赞同：4
> 
> 时间：2012-06-17T15:48:11.547
> 
> 标签：css, html, css-float

我在“div”元素内有一个 css“float”设置为“left”的图像。即使位置是相对的，图像也不会强制 div 的高度增加，因此图像会突出到 div 的底部。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T15:51:42.963

将div的*溢出属性设置为**hidden*或*auto*。

见[http://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

# android - 我可以在特定时间内在 android 上转换 iphone 应用程序吗？

> ID：11072657
> 
> 赞同：-1
> 
> 时间：2012-06-17T15:48:16.967
> 
> 标签：android, iphone

我制作了一个使用简单导航、IBactions 和一些动画的应用程序。我也想将它转换到android平台上，但我对此一无所知。所以我想问一下，我可以把它转换成20-25天吗？B/c 我没有多余的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:57:04.870

没有办法将应用程序从 iOS 平台“转换”到 Android 平台（通常）。如果这是一个 HTML5 应用程序，那就另当别论了，但对于原生应用程序，您需要完全重写。

如果你熟悉 Android 框架和 java，那么你可能可以在一个月内实现你想要的，如果你的应用程序很简单，但请记住，iOS 中可用的很多东西在 iOS 中是不存在的Android，尤其是在动画方面。

例如，我相当精通 iPhone 和 Android 开发。我在 iPhone 上有一个中等复杂度的应用程序（大约 15 或 16 个 UINavigationControllers，具有简单的用户交互 - 没有 OpenGL、3D 图形等）和相同功能的 Android 应用程序。我花了大约 2-3 周的时间为 iPhone 应用程序添加所需的功能。我现在正在将相同的功能添加到 Android 应用程序中。我已经进行了 2 周的开发，据我估计，我还有大约 2 周的时间来完成它。

将此功能移植到 Android 时的主要绊脚石是 (1) 动画：我花了至少一周的时间让页面过渡动画正常工作——我在 iPhone 上花了大约 10 分钟就完成了这项工作；(2) 布局：在 iPhone 上，您始终使用相同的屏幕尺寸并使用绝对坐标定位组件。在 Android 上，您必须考虑各种可用的屏幕尺寸和密度，并且您必须确保您的布局适用于所有这些。在某种程度上，这让我的工作更轻松，因为我在 android 中免费获得的东西`LinearLayout`花了我 1 天的时间在 iPhone 上完成。

自己判断。

# java - 如何实现：接口 MySortedCollection >

> ID：11072664
> 
> 赞同：0
> 
> 时间：2012-06-17T15:49:05.877
> 
> 标签：java, interface, comparable

我有以下界面：

```
interface MySortedCollection<T extends Comparable<T>> {
    boolean isElement(T t);
    void insert(T t);
    void printSorted();
} 
```

我尝试使用 AVLTree 来实现接口：

```
public class AVLTree<T> implements MySortedCollection{

  private AVLNode<T> tree=null;

  public AVLTree (){
  } 

  public boolean isElement(T t){

  }

  public void insert(T t){
    if(tree==null){
      tree= new AVLNode<T>(t);
    }
  }

  public void printSorted(){}

} 
```

但我得到了错误：

```
error: AVLTree is not abstract and does not override abstract
method insert(Comparable) in MySortedCollection 
public class AVLTree<T> implements MySortedCollection{ 
```

怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T16:41:40.560

它应该是

```
public class AVLTree<T extends Comparable<T>> implements MySortedCollection<T> {
} 
```

确保 AVLNode 类具有相似的签名

```
public class AVLNode<T extends Comparable<T>> {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:41:02.357

应该是

```
public class AVLTree<T extends Comparable<T>> implements MySortedCollection<T> { 
```

# php - 如何将 PHP 脚本 **results** 包含到另一个 PHP 脚本中？

> ID：11072680
> 
> 赞同：0
> 
> 时间：2012-06-17T15:50:24.093
> 
> 标签：php, include

我想将给定脚本（比如 a.php）的结果包含到另一个脚本（比如 b.php）中。

尽管有 PHP include 语句和它们的其他对应语句（include_once、require 和 require_once），但它们似乎都包含文件内容而不是我所期望的处理结果。

那么如何首先处理 a.php 然后将其结果（而不是文件内容本身）包含到 b.php 脚本中？

另一方面，如果我的包含文件 (a.php) 有一个 return 语句，是整个文件应该首先被处理还是它的内容也被包含在 b.php 中？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T16:06:07.460

一个.php：

```
<?php
echo "world"; 
```

b.php：

```
<?php
ob_start();
include("a.php");
$a= ob_get_clean();
echo "Hello, $a!"; 
```

也许？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:58:32.763

听起来您想使用[反引号运算符](http://www.php.net/manual/en/language.operators.execution.php)，后跟[eval](http://www.php.net/manual/en/function.eval.php)。像这样的东西：

```
$code = `/path/to/myscript.php`;
eval($code); 
```

如果 myscript.php 不可执行，则必须在其前面加上 php，如下所示：

```
$code = `php /path/to/myscript.php`; 
```

请注意，您需要完全信任 myscript.php，否则这是一个安全问题。

这可能不是一个很好的设计，您可能需要认真考虑是否有更好的方法来做您想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T15:56:57.000

如果`a.php`可以通过网络访问，您可以使用`file_get_contents`（`http://`或`https://`）URL。这将像访问普通网页一样访问您的脚本，让您的网络服务器通过 PHP 处理它并返回结果。

一个.php：

```
<?php

echo 2+2; 
```

b.php：

```
<?php

echo file_get_contents('http://example.com/a.php'); 
```

输出：

```
4 
```

您还可以使用输出缓冲，如上面 DaveRandom 的评论中所述。也就是说，这通常不是典型的应用程序设计。最好使用能够返回您需要的结果而不是返回结果的代码`echo`。所以也许是这样的：

一个.php：

```
<?php

function calculateA()
{
    return 2+2;
} 
```

b.php：

```
<?php

include('a.php');
echo calculateA(); 
```

输出：

```
4 
```

**编辑：**[`include`PHP 文档中](http://www.php.net/manual/en/function.include.php)的页面上详细介绍了几种替代方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-17T16:06:00.763

概括：

如果 php 文件属于您的服务器：

```
ob_start();
$result = eval(file_get_contents('/path/to/your/script.php'));
ob_end_clean(); 
```

如果没有，但可以通过 HTTP 访问：

```
$result = file_get_contents('http://path.to/your/script.php'); 
```

# android - Android - 片段内的可扩展列表

> ID：11072683
> 
> 赞同：1
> 
> 时间：2012-06-17T15:50:53.580
> 
> 标签：android, listview, android-fragments, expandablelistview, fragment

嘿，我正在尝试将使用 Tabhost 和活动的现有应用程序转换为带有片段的基于操作栏的应用程序。在此过程中遇到了实施可扩展列表的问题。

我在互联网上没有找到任何关于如何实现这个可扩展列表的简单示例。由于 ExpandableListActivity 没有片段的对应物，我认为我需要使用和扩展 ListFragment 但由于我对 android 很陌生，所以我不知道如何做。:)

如果有人能阐明如何使用带有片段的可扩展列表，我会很高兴。

谢谢。

附件也是我现有代码的片段。

**已经有两个微调器的片段 1**

```
public class Configurator_Fragment extends SherlockListFragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (container == null) {
    }
    final View v = inflater.inflate(R.layout.configurator_layout,
            container, false);

    final Spinner spinner = (Spinner) v
            .findViewById(R.id.spinner1);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            getActivity(), R.array.array1,
            android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

    final Spinner spinner2 = (Spinner) v.findViewById(R.id.spinner2);
    ArrayAdapter<CharSequence> adapter2 = ArrayAdapter.createFromResource(
            getActivity(), R.array.array2,
            android.R.layout.simple_spinner_item);
    adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner2.setAdapter(adapter2);

    return v;
}
} 
```

**片段活动**

```
public class TabActivity extends SherlockFragmentActivity  {
ViewPager mViewPager;
TabsAdapter mTabsAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab_navigation);

    if (savedInstanceState == null) {

        Fragment newFragment = new Configurator_Fragment();
        Fragment newFragment2 = new SecondFragment();

        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.add(R.id.pager, newFragment, "First");
        ft.add(R.id.pager, newFragment2, "Second");
        ft.commit();

   }

    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab tab1 = getSupportActionBar().newTab().setText("Fragment 1");
    ActionBar.Tab tab2 = getSupportActionBar().newTab().setText("Fragment 2");

    mViewPager = (ViewPager)findViewById(R.id.pager);
    mTabsAdapter = new TabsAdapter(this, getSupportActionBar(), mViewPager);

        mTabsAdapter.addTab(tab1, Configurator_Fragment.class, null);
        mTabsAdapter.addTab(tab2, SecondFragment.class, null);

    if (savedInstanceState != null) {
        getSupportActionBar().setSelectedNavigationItem(savedInstanceState.getInt("index"));
    }

}
@Override
protected void onSaveInstanceState(Bundle outState) {

    super.onSaveInstanceState(outState);
    outState.putInt("index", getSupportActionBar().getSelectedNavigationIndex());

}
public static class TabsAdapter extends FragmentPagerAdapter implements ViewPager.OnPageChangeListener, ActionBar.TabListener {
    private final Context mContext;
    private final ActionBar mBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();
    private FragmentTransaction mCurTransaction = null;

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(FragmentActivity activity, ActionBar bar, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mBar = bar;
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<? extends Fragment> clss, Bundle args) {
     TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
     TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

    }

    @Override
    public void onPageSelected(int position) {
        mBar.setSelectedNavigationItem(position);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
    Object tag = tab.getTag();
                for (int i=0; i<mTabs.size(); i++) {
                    if (mTabs.get(i) == tag) {

                            mViewPager.setCurrentItem(i);
                    }
                }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }
 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:12:34.323

先声明几句...

1）我没有使用过 ABS，所以我不确定会做出什么改变。
2) 我的 ExpandableListView 由数据库支持，而不是数组。我这么说是因为看起来你正在使用数组。无论如何，我还是发布了这个，希望它仍然可以为您提供一些方向。

也就是说，我只是通过扩展 Fragment 来完成它。

```
public class EventListFragment extends Fragment {

    private AttendanceDB mDbHelper;
    public static Cursor mGroupsCursor;
    private MyExpandableListAdapter mAdapter;
    private String mGroup;
    private String mChild;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.explistfragment, container, false);
        header = (TextView) v.findViewById(R.id.header1);
        header.setText(R.string.event_header);
        return v;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        Bundle extras = getIntent().getExtras();
        mGroup = extras.getString("Group");
        mChild = extras.getString("Child");
        mDbHelper = new AttendanceDB(getActivity());
        mDbHelper.open();
        fillData(mGroup, mChild);
    }

    private void fillData(String group, String child) {
        ExpandableListView lv;
        mGroupsCursor = mDbHelper.fetchGroup(group);
        getActivity().startManagingCursor(mGroupsCursor);
        mGroupsCursor.moveToFirst();
        lv = (ExpandableListView) getActivity().findViewById(R.id.explist);

        mAdapter = new MyExpandableListAdapter(mGroupsCursor, getActivity(),
                R.layout.explistlayout,
                R.layout.explistlayout1,
                new String[] { "_id" },
                new int[] { android.R.id.text1 },
                new String[] { child },
                new int[] { android.R.id.text1 });
        lv.setAdapter(mAdapter);
    }

    public class MyExpandableListAdapter extends SimpleCursorTreeAdapter {

        public MyExpandableListAdapter(Cursor cursor, Context context,
                int groupLayout, int childLayout, String[] groupFrom,
                int[] groupTo, String[] childrenFrom, int[] childrenTo) {
            super(context, cursor, groupLayout, groupFrom, groupTo,
                    childLayout, childrenFrom, childrenTo);
        }
        @Override
        protected Cursor getChildrenCursor(Cursor groupCursor) {
            Cursor childCursor = mDbHelper.fetchChildren(mGroup, groupCursor
                    .getString(groupCursor
                            .getColumnIndex(AttendanceDB.EVENT_ROWID)));
            getActivity().startManagingCursor(childCursor);
            childCursor.moveToFirst();
            return childCursor;
        }
    }

} 
```

# wordpress - WordPress 主题的条件模板标签

> ID：11072685
> 
> 赞同：0
> 
> 时间：2012-06-17T15:51:20.603
> 
> 标签：wordpress, wordpress-theming

我无法创建有条件地显示某些内容的模板。这是一个以文章和教程为特色的博客。教程将以一个包含有关教程的附加信息的框开始。额外信息在自定义字段中输入。

在我的“single.php”文件中，我有以下代码：

```
<section class="entry-content group">
    <?php if ( in_category('tutorials') ) { echo '
        <div class="tutorial-info-box group">
            <h5>About This Tutorial</h5>
            <ul class="tutorial-stats">
                <li> <span> Difficulty: </span> </li>
                <li> <span> Prerequisites: </span> </li>
                <li> <span> Time required: </span> </li>
                <li> <span> Will improve your knowledge of: </span> </li>
            </ul>
        </div>
    '; } ?>
    <?php the_content(); ?>
</section> 
```

以上仅适用于在“教程”类别中的帖子上呈现此框。当我尝试包含来自自定义字段的数据时，我遇到了麻烦，如下所示：

```
<section class="entry-content group">
    <?php if ( in_category('tutorials') ) { echo '
        <div class="tutorial-info-box group">
            <h5>About This Tutorial</h5>
            <ul class="tutorial-stats">
                <li> 
                    <span> Difficulty: </span>
                    <?php get_post_meta( $post->ID, 'difficulty', true ); ?> 
                </li>
                <li> 
                    <span> Prerequisites: </span>
                    <?php get_post_meta( $post->ID, 'prerequisites', true ); ?>  
                </li>
                <li> 
                    <span> Time required: </span> 
                    <?php get_post_meta( $post->ID, 'time', true ); ?>
                </li>
                <li> 
                    <span> Will improve your knowledge of: </span>
                    <?php get_post_meta( $post->ID, 'improve', true ); ?>
                </li>
            </ul>
        </div>
    '; } ?>
    <?php the_content(); ?>
</section> 
```

我最终只有一个空白的白色屏幕。我假设这是某种语法错误，但我无法弄清楚它是什么。任何人都可以帮忙吗？提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:57:30.770

`<?php`您在字符串中包含一个打开。更正为：

```
<section class="entry-content group">
    <?php if ( in_category('tutorials') ): ?>
        <div class="tutorial-info-box group">
            <h5>About This Tutorial</h5>
            <ul class="tutorial-stats">
                <li> 
                    <span> Difficulty: </span>
                    <?php echo  get_post_meta( $post->ID, 'difficulty', true ); ?> 
                </li>
                <li> 
                    <span> Prerequisites: </span>
                    <?php echo get_post_meta( $post->ID, 'prerequisites', true ); ?>  
                </li>
                <li> 
                    <span> Time required: </span> 
                    <?php echo get_post_meta( $post->ID, 'time', true ); ?>
                </li>
                <li> 
                    <span> Will improve your knowledge of: </span>
                    <?php echo get_post_meta( $post->ID, 'improve', true ); ?>
                </li>
            </ul>
        </div>
    <?php endif; ?>
    <?php the_content(); ?>
</section> 
```

# twitter - twitter 趋势 api UnicodeDecodeError: 'utf8' codec can't decode byte 0x8b in position 1: unexpected code byte

> ID：11072705
> 
> 赞同：10
> 
> 时间：2012-06-17T15:54:17.183
> 
> 标签：twitter

我正在尝试遵循“挖掘社交网络”一书的示例代码，1-3。

我知道它很旧，所以我按照网页中的新示例在[此处输入链接描述](https://gist.github.com/1592859)

但是，有时，我在实现代码时会遇到错误信息：

```
[ trend.decode('utf-8') for trend in world_trends()[0]['trends'] ] 
```

错误信息是这样的：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "build/bdist.macosx-10.6-universal/egg/twitter/api.py", line 167, in __call__
File "build/bdist.macosx-10.6-universal/egg/twitter/api.py", line 173, in _handle_response
File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/encodings/utf_8.py", line 16, in decode
return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode byte 0x8b in position 1: unexpected code byte 
```

它并不总是发生，但我认为没有程序员喜欢这种“随机”的情况。

那么有人可以在这个问题上帮助我吗？有什么问题，我该如何解决？

非常感谢~

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-12-13T14:44:46.323

`byte 0x8b in position 1`通常表示数据流已被压缩。对于类似的问题，请参见[此处](https://github.com/rg3/youtube-dl/issues/366)和[此处](https://stackoverflow.com/questions/9445627/urllib2-opener-providing-wrong-charset)。

解压数据流：

```
buf = StringIO.StringIO(<response object>.content)
gzip_f = gzip.GzipFile(fileobj=buf)
content = gzip_f.read() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:15:13.450

默认情况下，如果 decode() 遇到不知道如何解码的字节，它将抛出错误。

您可以使用`trend.decode('utf-8', 'replace')`或`trend.decode('utf-8', 'ignore')`不抛出错误并默默地忽略它。

[此处有关 decode() 的文档。](http://docs.python.org/library/stdtypes.html#string-methods)

# iphone - 检查文件是否已保存到磁盘？

> ID：11072707
> 
> 赞同：1
> 
> 时间：2012-06-17T15:54:29.147
> 
> 标签：iphone, objective-c, ios, ipad

我正在从我的服务器下载文件，将它们保存到设备，并在我的应用程序中向用户显示它们。我想检查文件是否已经存在于设备上，这样我们就可以跳过下载并直接显示，但我想不出最好的方法。

我为每个文件创建一个唯一的文件名，然后将其转换为 NSURL，如下所示：

```
NSString *fileString = [[NSString alloc] initWithString:[documentsDirectory stringByAppendingPathComponent:fileName]];
self.fileURL = [[NSURL alloc] initFileURLWithPath:fileString]; 
```

然后我写入文件并保存 URL 以供稍后使用：

```
[data writeToFile:fileString atomically:YES];
self.fileURL = [[NSURL alloc] initFileURLWithPath:fileString]; 
```

如何检查该文件或 URL 是否已存在？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T15:59:40.307

NSFileManager 有一个方法来检查文件是否存在于路径中：

```
[[NSFileManager defaultManager] fileExistsAtPath: fileString] 
```

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html#//apple_ref/doc/uid/20000305-CHDDDDJG](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html#//apple_ref/doc/uid/20000305-CHDDDDJG)

# javascript - 是否可以使用 JavaScript 在网页中插入包含标签？

> ID：11072708
> 
> 赞同：1
> 
> 时间：2012-06-17T15:55:09.353
> 
> 标签：javascript, jquery, html, asp-classic, include

我想`include`使用 JavaScript 将以下标签插入到我的网页中。`<!--#include virtual='includes/myIncludeFile.htm' -->`

我尝试了以下方法，但它不起作用：`jQuery("<!--#include virtual='includes/myIncludeFile.htm' -->").appendTo(jQuery("body"));`

我已经输出`jQuery("<!--#include virtual='includes/myIncludeFile.htm' -->")`到控制台，它认为它是一个评论对象（见截图）。

![在此处输入图像描述](../Images/1b79f89597f242bd65dd344a79750a24.png)

**我哪里错了，怎么办？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T16:02:39.600

您尝试做的事情的基本前提是行不通的。您使用的 HTML“包含标签”也称为“服务器端包含”。也就是说，它们在页面发送到客户端之前在服务器上进行处理。

当 JavaScript 代码在客户端上执行时，服务器已经在处理响应。客户端代码无法启动服务器端包含。

*您可以*从客户端做的一件事是使用类似[jQuery 的`.load()`函数](http://api.jquery.com/load/)向服务器发出请求并将响应加载到页面上的指定元素中。像这样的东西：

```
$('#includeDiv').load('includes/myIncludeFile.htm'); 
```

这会将所有内容动态加载到页面上的“includeDiv”`myIncludeFile.htm`元素中。`id`

# ruby - 在 Sinatra 中使用 gzip 压缩和 Ruby

> ID：11072710
> 
> 赞同：10
> 
> 时间：2012-06-17T15:55:17.480
> 
> 标签：ruby, sinatra, gzip, zlib

注意：我有另一个类似的问题，关于如何使用 Ruby 的 GZIP 数据在`zlib`技术上*得到*了回答，我觉得我不能开始发展这个问题，因为它已经得到了回答，所以虽然这个问题是相关的，但它并不相同......

以下代码（我相信）是对静态 CSS 文件进行 GZIP 压缩并将结果存储在`result`变量中。但是从某种意义上说，我该怎么做：如何将这些数据发送回浏览器，以便将其识别为 GZIP 格式而不是原始文件大小（例如，在检查我的 YSlow 分数时，我希望看到它正确标记我确保我 GZIP 静态资源）。

```
z = Zlib::Deflate.new(6, 31)
z.deflate(File.read('public/Assets/Styles/build.css'))
z.flush
@result = z.finish # could also of done: result = z.deflate(file, Zlib::FINISH) 
z.close 
```

...需要注意的一点是，在我之前的问题中，受访者澄清说`Zlib::Deflate.deflate`不会产生 gzip 编码的数据。它只会产生 zlib 编码的数据，因此我需要使用等于 31`Zlib::Deflate.new`的参数来启动 gzip 流。`windowBits`

但是当我运行这段代码时，我实际上并不知道如何处理`result`变量及其内容。互联网上（我可以找到）没有关于如何将 GZIP 编码的静态资源（如 JavaScript、CSS、HTML 等）发送到浏览器的信息，这使得页面加载更快。似乎我阅读的每篇 Ruby 文章都是基于使用 Ruby on Rails 的人！！？

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-17T18:40:46.213

压缩文件后，您只需返回结果并确保`Content-Encoding: gzip`为响应设置标题。Google对 gzip 压缩以及您必须注意的事项做了一个很好的[介绍。](https://developers.google.com/speed/articles/gzip)以下是您可以在 Sinatra 中执行的操作：

```
get '/whatever' do
  headers['Content-Encoding'] = 'gzip'
  StringIO.new.tap do |io|
    gz = Zlib::GzipWriter.new(io)
    begin
      gz.write(File.read('public/Assets/Styles/build.css'))
    ensure
      gz.close
    end
  end.string
end 
```

不过，最后要提醒一句。您应该只为动态创建的内容选择这种方法，或者如果您只想在几个地方使用 gzip 压缩。

但是，如果您的目标是在启用 gzip 压缩的情况下为大部分甚至所有静态资源提供服务，那么依赖 Web 服务器已经支持的内容而不是用这些细节污染您的代码将是一个更好的解决方案。您很有可能可以通过一些配置设置启用 gzip 压缩。[这是](http://nginx.org/en/docs/http/ngx_http_gzip_module.html)一个如何为 nginx 完成的示例。

另一种选择是使用[Rack::Deflater](https://github.com/rack/rack/blob/master/lib/rack/deflater.rb)中间件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-05T22:47:02.333

只是为了突出“Rack::Deflater”方式作为“答案”->

正如上面评论中提到的，只需将压缩放在 config.ru

```
use Rack::Deflater 
```

差不多就是这样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-27T09:10:49.163

我们可以看到用户将压缩`css`文件等与 Web 相关的数据。我想推荐使用[brotli](https://github.com/google/brotli)。它为此目的进行了大量优化。今天的任何现代网络浏览器都支持它。

您可以为 ruby​​ 使用[ruby​​-brs](https://github.com/andrew-aladev/ruby-brs)绑定。

```
gem install ruby-brs 
```

```
require "brs"
require "sinatra"

get "/" do
  headers["Content-Encoding"] = "br"
  BRS::String.compress File.read("sample.css")
end 
```

您可以使用流接口代替，它类似于`Zlib`接口。

```
require "brs"
require "sinatra"

get "/" do
  headers["Content-Encoding"] = "br"

  StringIO.new.tap do |io|
    writer = BRS::Stream::Writer.new io
    begin
      writer.write File.read("sample.css")
    ensure
      writer.close
    end
  end
  .string
end 
```

您也可以使用`nonblock`方法，请阅读有关[ruby​​-brs 的](https://github.com/andrew-aladev/ruby-brs)更多信息。

# asp.net - ASP.NET 内存泄漏

> ID：11072714
> 
> 赞同：0
> 
> 时间：2012-06-17T15:55:51.683
> 
> 标签：asp.net, vb.net

我在一个非常大的 ASP.NET 应用程序中遇到内存泄漏问题。使用大约 24 小时（有时更多）后，会引发 OutOfMemory 异常。因此，我试图了解托管内存在 .NET 中的工作原理。ASP.NET 应用程序何时抛出 OutOfMemory 异常？服务器有很多 RAM，当抛出 OutOfMemory 异常时总是有足够的内存。我了解虚拟内存和物理内存之间的区别。在抛出 OutOfMemory 异常之前，W3WP 进程必须消耗多少内存？Machine.Config 文件中是否有设置？ASP.NET 进程永远不会被回收。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:00:04.080

除了我上面的评论：检查您的主要资源使用情况，并在使用结束时确保使用 .Dispose() 释放它。

对于内存使用情况，请转到 IIS 管理器，打开树并导航到您的应用程序池。从您的网站使用的池中编辑高级属性并在那里检查/设置设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:29:57.840

我使用了 ANTS 内存分析器。这将帮助您找到代码导致大量泄漏的地方。您还可以在 perfmon 工具中创建用户定义的性能监视器。

这对我有用。如果您需要更多帮助，请告诉我

# azure - 在 PowerShell 中运行设置脚本时出现 Azure Media SDK 不兼容问题

> ID：11072716
> 
> 赞同：0
> 
> 时间：2012-06-17T15:56:19.817
> 
> 标签：azure

我在这里关注本教程：http: [//social.msdn.microsoft.com/Forums/en-US/MediaServices/thread/a9d3d1b4-09eb-4a28-ad1d-a1f4cf3123cb](http://social.msdn.microsoft.com/Forums/en-US/MediaServices/thread/a9d3d1b4-09eb-4a28-ad1d-a1f4cf3123cb) 关于如何设置 Azure 媒体服务。

但是在 PowerShell 中运行脚本时，特别是当我运行以下命令时： .\GetMediaServicesEnv.ps1 （该命令应该提示我下载 publishsettings 文件）

我收到一条错误消息：不支持安装的 Azure SDK 版本。确保您的版本介于 v1.6 和 v1.6 之间 C:\Program Files (x86)\Microsoft SDKs\Windows Azure Media Services\Services\v1.0\GetMediaServicesEnv.ps1:5 char:25 + Get-AzurePublishSettings <<<< + CategoryInfo : NotSpecified: (:) [], Exception + FullyQualifiedErrorId : System.Exception

这很奇怪，因为最新且唯一可用的版本是我已经下载的 1.7。这是一个错误，还是我做错了什么？

顺便说一句，我使用的是 Win7 - 64 位版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:21:56.417

你是对的 1.7 是最新的，但你不对它是唯一可用的。Windows Azure 媒体服务在 SDK 1.7 可用之前是 CTP 的，因此它只能与 1.6 一起使用（目前）。对您来说好消息是 1.6 和 1.7 可以并行工作，您可以拥有 1.6 项目，也可以拥有 1.7 项目，它们都可以正常工作。

因此，要使用 Azure 媒体服务 SDK，您需要 Windows Azure SDK 1.6 和适用于 .NET 1.6 的 Windows Azure 库。您可以通过 Web 平台安装程序安装它们。只需搜索“Azure”，然后在结果中找到它们。就像是：

![在此处输入图像描述](../Images/b49855a1ec9ec4d5b688c43c66db65d2.png)

不过，这可能很棘手。在拥有 1.7 之后，我从未尝试安装 1.6。我安装了 1.6，然后添加了 1.7，一切正常。如果您在安装 1.6 时遇到任何问题，请先尝试删除 1.7，然后安装 1.6，然后添加 1.7，您将同时拥有 1.6 和 1.7 Windows Azure SDK。

# php - 停止循环和输出，然后继续 php

> ID：11072717
> 
> 赞同：1
> 
> 时间：2012-06-17T15:56:38.837
> 
> 标签：php, arrays, loops, foreach

好的，我想现在是时候在这里询问我的剧本了，

我有一个大数组，我想循环它，然后在达到一定数量时停止它，然后继续循环，这是一个脚本示例，

```
$result_array = array();
$locations = //array of locations coming from a XML SOAP respond;

foreach($locations as $loctn){
    //Request of the XML,
    $result = //A large array coming from a XML SOAP respond;

    foreach($result as $val){
        $result_array[] = 'somkey' => $val->identifcator,
                          'somkey1' => $val->language,
                          'somkey2' => $val->textSubjectQualifier,
                          'somkey3' => $val->companyId,
                          //etc.
    }
}

print_r($result_array); 
```

因此，第一个数组来自 XML 响应，我再次使用位置循环它并再次从 XML 请求它，我再次将它循环到另一个数组中，然后我想在循环外输出最后一个数组，

但是我在这里遇到了麻烦，因为它是一个非常大的数组，如果数组不是那么大，它会很好，但是当我想让它更大时，我没有得到任何结果，因为浏览器停止了它，

我试图玩弄内存，但它没有解决我的问题，所以我想最好的方法是我应该停止数组然后输出它然后继续循环，但我不知道该怎么做，

请帮我解决

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:27:18.307

> 但是我在这里遇到了麻烦，因为它是一个非常大的数组，如果数组不是那么大，它会很好，但是当我想让它更大时，我没有得到任何结果，因为浏览器停止了它，

听起来你正在达到执行超时（就像@Haroon提到的那样）。您可能想查看错误日志或检查请求是否失败，状态为 500（内部服务器错误）。

[set_time_limit()](http://php.net/set_time_limit)允许您随意（重新）设置执行超时。但是，如果您的脚本运行时间超过 30 秒（这应该是执行超时的默认设置），您可能需要研究构建该数组的替代路线。

* * *

```
foreach($locations as $loctn){
//Request of the XML,
$result = //A large array coming from a XML SOAP respond; 
```

听起来您正在从网络服务中提取数据。听起来您可能（对于 中的大量项目`$locations`）正在对该 Web 服务执行大量请求。

访问网络服务可能很慢。如果您有任何方法可以在您的流程之外执行此操作（“作业队列”，与 cron 作业有关的东西，...），请执行此操作。还要检查webservice提供的数据是否可以缓存和重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T16:16:23.647

```
echo str_repeat(' ', 4096); // you need this or something similar, because most of browsers don't print anything if they don't have enough to parse

foreach (...) {
...
    foreach (...) {
        ...
        print_r($result_array);
        flush(); // echo the buffer
    }
} 
```

有时浏览器在接收到足够的数据之前不会显示任何内容，这就是 str_repeat() 的原因。

来自 PHP 手册：

> flush() 可能无法覆盖 Web 服务器的缓冲方案，并且它对浏览器中的任何客户端缓冲都没有影响。[...]
> 
> Apache 的服务器模块（如 mod_gzip）可能会自己进行缓冲，这将导致 flush() 不会导致数据立即发送到客户端。
> 
> **甚至浏览器也可以在显示之前缓冲它的输入**。例如，Netscape 会缓冲文本，直到它接收到行尾或标记的开头，并且在看到最外层表格的标记之前不会呈现表格。
> 
> 某些版本的 Microsoft Internet Explorer 仅在收到 256 字节的输出后才开始显示页面，因此您可能需要在刷新之前发送额外的空格以使这些浏览器显示页面。

尝试修复您的代码：

```
echo str_repeat(' ', 4096);
$result_array = array();
$locations = //array of locations coming from a XML SOAP respond;

foreach($locations as $loctn){
    //Request of the XML,
    $result = //A large array coming from a XML SOAP respond;

    foreach($result as $val){
        $result_array[] = 'somkey' => $val->identifcator,
                          'somkey1' => $val->language,
                          'somkey2' => $val->textSubjectQualifier,
                          'somkey3' => $val->companyId,
                          //etc.

        print_r($result_array);
        flush();
    }
} 
```

此代码应在每个循环中打印 $result_array。

# c# - 长时间运行的 foreach 循环中的 OutOfMemoryException

> ID：11072722
> 
> 赞同：0
> 
> 时间：2012-06-17T15:57:17.343
> 
> 标签：c#, entity-framework, foreach, backgroundworker, out-of-memory

我有一个使用 2 个 sql 数据库的过程 - 这是将一些数据从 DB1 迁移到 DB2 所必需的。要迁移的记录数约为 500k。为了连接到这 2 个数据库，我使用 EF 和 2 个 edmx 文件。A`BackgroundWorker`用于执行此操作。

代码非常简单，即：

```
string userState = "(Current action description)";
int idx = 0;
foreach (var o in DB1.Records)
{
    if (((BackgroundWorker)sender.CancellationPending)
    {
        e.Cancel = true;
        break;
    }

    // Check if the current record already exists in the new database, update it if it does 
    // and create a new one if it doesn't.
    NewRecord rec = DB2.NewRecords.Where(x => x.IDFromDB1 == o.ID).SingleOrDefault() ?? DB2.NewRecords.Where(x => x.UniqueID == o.UniqueID).SingleOrDefault();
    if (rec == null)
        rec = new NewRecord();

    // Since the primary key in Records table of DB1 database consists of 2 columns,
    // where ID is the first and Idx is the second, in a way that Idx marks the revision
    // and we want to select only the latest revision, we order by "Idx" in descending order
    // and take the first record.
    Record obj = DB1.Records.Where(x => x.ID == o.ID).OrderByDescending(x => x.Idx).First(); // <-- System.OutOfMemoryException after around 250k records have been processed

    /*
        ... some primitive processing code ...
    */

    if (rec.EntityKey == null)
        DB2.NewRecords.AddObject(rec);

    idx++;
    if (idx % 50 == 0)
    {
        DB2.SaveChanges();
        ((BackgroundWorker)sender).ReportProgress(idx, userState);
    }
}

DB2.SaveChanges(); 
```

在处理了大约 250k 条记录后，该过程引发了异常。
为什么？有没有更好的方法来做到这一点？

**堆栈跟踪**

```
at System.String.Concat(String str0, String str1)
at System.Data.Metadata.Edm.EdmType.CreateEdmTypeIdentity(String namespaceName, String name)
at System.Data.Metadata.Edm.EdmType.BuildIdentity(StringBuilder builder)
at System.Data.Metadata.Edm.EdmType.get_Identity()
at System.Data.Metadata.Edm.TypeUsage.BuildIdentity(StringBuilder builder)
at System.Data.Metadata.Edm.CollectionType.GetIdentity(TypeUsage typeUsage)
at System.Data.Metadata.Edm.CollectionType..ctor(TypeUsage elementType)
at System.Data.Common.CommandTrees.ExpressionBuilder.Internal.ArgumentValidation.ValidateProject(DbExpressionBinding input, DbExpression projection)
at System.Data.Query.PlanCompiler.CTreeGenerator.CreateProject(RelOpInfo sourceInfo, IEnumerable`1 outputVars)
at System.Data.Query.PlanCompiler.CTreeGenerator.BuildProjection(Node relOpNode, IEnumerable`1 projectionVars)
at System.Data.Query.PlanCompiler.CTreeGenerator.Visit(PhysicalProjectOp op, Node n)
at System.Data.Query.InternalTrees.PhysicalProjectOp.Accept[TResultType](BasicOpVisitorOfT`1 v, Node n)
at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitNode(Node n)
at System.Data.Query.PlanCompiler.CTreeGenerator..ctor(Command itree, Node toConvert)
at System.Data.Query.PlanCompiler.ProviderCommandInfoUtils.Create(Command command, Node node, List`1 children)
at System.Data.Query.PlanCompiler.CodeGen.Process(List`1& childCommands, ColumnMap& resultColumnMap, Int32& columnCount)
at System.Data.Query.PlanCompiler.PlanCompiler.Compile(List`1& providerCommands, ColumnMap& resultColumnMap, Int32& columnCount, Set`1& entitySets)
at System.Data.EntityClient.EntityCommandDefinition..ctor(DbProviderFactory storeProviderFactory, DbCommandTree commandTree)
at System.Data.EntityClient.EntityProviderServices.CreateCommandDefinition(DbProviderFactory storeProviderFactory, DbCommandTree commandTree)
at System.Data.EntityClient.EntityProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree)
at System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree com mandTree)
at System.Data.Objects.Internal.ObjectQueryExecutionPlan.Prepare(ObjectContext context, DbQueryCommandTree tree, Type elementType, MergeOption mergeOption, Span span, ReadOnlyCollection`1 compiledQueryParameters)
at System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
at System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__0[TResult](IEnumerable`1 sequence)
at System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 query, Expression queryRoot)
at System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression)
at System.Linq.Queryable.First[TSource](IQueryable`1 source)
at MyProject.frmPrenosIzAnalitike._worker_DoWork(Object sender, DoWorkEventArgs e) in C:\Users\dejan\Documents\Visual Studio 2010\Projects\MySolution\MyProject\frmMyForm.cs:line 245
at System.ComponentModel.BackgroundWorker.OnDoWork(DoWorkEventArgs e)
at System.ComponentModel.BackgroundWorker.WorkerThreadStart(Object argument) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T17:04:44.293

这是因为您一直在向上下文添加新实体。您基本上不想在内存中加载 250K 实体。

当您不再需要它们时，只需将它们分离

```
// Assuming DB1 is your object context
Record obj = DB1.Records.Where(x => x.ID == o.ID).OrderByDescending(x => x.Idx).First();

...

DB1.Detach(obj); // <------ Detaches from context, removes from memory 
```

`DB2`和创建的实体相同。

# cakephp - CakePHP 如何只回显一条记录

> ID：11072723
> 
> 赞同：0
> 
> 时间：2012-06-17T15:57:22.873
> 
> 标签：cakephp, echo, record

我想在我的标题中回显我的 MySQL 数据库中的全名。在列表中单击该名称时，它会过滤所有记录并仅显示与该名称相关的所有记录。我设法让过滤器工作，但无法在标题中显示名称。

```
<? $this->read('$jobs as $row'); ?>
 <h1><?=$row['Employee']['first_name']?> <?=$row['Employee']['last_name']?>'s Jobs</h1>
<? $this->end(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:00:47.730

如果我没记错的话，你正在尝试检索这个数组，我假设**$jobs**包含单行。

试试这个

```
<?php 
if (isset($jobs)) {
foreach($jobs as $row){ 

if (isset($row['Employee']['last_name']))
     $last = $row['Employee']['last_name'];

$first = 'N/A';
if (isset($row['Employee']['first_name']))
    $first = $row['Employee']['first_name'];
?>

 <h1><?php echo $first.' '. $last?>'s Jobs</h1>    
<?php } }?> 
```

或者

```
 <h1><?php isset($jobs[0]['Employee']['first_name']) ? $jobs[0]['Employee']['first_name'] : 'N/A' .' '. isset($jobs[0]['Employee']['last_name']) ? $jobs[0]['Employee']['last_name'] : 'N/A'?>'s Jobs</h1> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:34:52.280

这可以通过使用虚拟字段更容易地实现。Cake 书中的示例实际上与您的需要相同。

只需将其添加到您的 Employee 模型中：

```
public $virtualFields = array(
    'full_name' => 'CONCAT(Employee.first_name, " ", Employee.last_name)'
); 
```

现在可以使用 [Employee]['full_name'] 而无需使用任何逻辑。

这是涵盖虚拟字段的 Cake book 页面的链接：http: [//book.cakephp.org/2.0/en/models/virtual-fields.html](http://book.cakephp.org/2.0/en/models/virtual-fields.html)

# ubuntu - 如何覆盖 dpkg-buildflags CFLAGS？

> ID：11072724
> 
> 赞同：13
> 
> 时间：2012-06-17T15:57:26.237
> 
> 标签：ubuntu, build, debian, dpkg

我收到了一个包裹：

```
$ apt-get source <pkg-name> 
```

现在我正在尝试使用以下方法构建它：

```
$ dpkg-buildpackage -uc -us -j8 
```

在输出的开头，声明：

```
dpkg-buildpackage: export CFLAGS from dpkg-buildflags (origin: vendor): -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Wformat-security
dpkg-buildpackage: export CPPFLAGS from dpkg-buildflags (origin: vendor): -D_FORTIFY_SOURCE=2
dpkg-buildpackage: export CXXFLAGS from dpkg-buildflags (origin: vendor): -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Wformat-security
dpkg-buildpackage: export FFLAGS from dpkg-buildflags (origin: vendor): -g -O2
dpkg-buildpackage: export LDFLAGS from dpkg-buildflags (origin: vendor): -Wl,-Bsymbolic-functions -Wl,-z,relro 
```

我想覆盖这些 CFLAGS（也就是 LDFLAGS）。我已经尝试导出 CFLAGS envvar，就像我们使用普通配置一样，但无济于事。如何覆盖这些值？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-20T07:49:08.077

您尝试重建的包，使用从`dpkg-buildflags`.

如果您出于自己的目的需要覆盖这些标志，您应该告诉`dpkg-buildflags`提供您想要的标志，而不是（强化）默认值。看`man dpkg-buildflags`，你会找到关于环境变量的部分，特别是。见`DEB_flag_SET`和`DEB_flag_APPEND`

所以这应该可以解决问题（填写您自己的 *FLAGS）：

```
$ DEB_CPPFLAGS_SET="-I/foo/bar/baz" DEB_CFLAGS_SET="-g -O6" DEB_LDFLAGS_SET="-L/fruzzel/frazzel/" dpkg-buildpackage -uc -us -j8 -rfakeroot 
```

# c# - 将数据绑定到滑块不起作用

> ID：11072729
> 
> 赞同：1
> 
> 时间：2012-06-17T15:58:15.230
> 
> 标签：c#, windows-phone-7, data-binding, slider

我的 Windows Phone 项目中的绑定有问题。我将一个类绑定到一个滑块，但它不会更新值。如果我第一次启动应用程序，则绑定连接已正确建立，并且滑块确实具有正确的值。但是，如果我更改“位置”或“持续时间”值，滑块将不会随之更新。

你能帮我么？我没有任何线索，我做错了什么:(

类.cs：

```
public class Status : INotifyPropertyChanged
{
  public event PropertyChangedEventHandler PropertyChanged;
  private void PropChanged(string propName)
  {
    if (PropertyChanged != null)
    {
      PropertyChanged(this, new PropertyChangedEventArgs(propName));
    }
  }

  public double duration
  {
    get { return _duration; }
    set
    {
      if (this._duration == value)
        return;

      _duration = value;
      PropChanged("duration");
    }
  }

  public double position
  {
    get { return _position; }
    set
    {
      if (this._position == value)
        return;

      _position = value;
      PropChanged("position");
    }
  }
} 
```

MainPage.xaml.cs：

```
public partial class MainPage : PhoneApplicationPage
{
  public MainPage()
  {
    this.ContentPanel.DataContext = _Status;
  }
} 
```

MainPage.xaml：

```
 ...
<Grid x:Name="ContentPanel" Margin="12,12,12,0" Grid.RowSpan="2">
    <Slider x:Name="sl_PlayBackProgress"
            Value="{Binding Path=position}"
            Maximum="{Binding Path=duration}"
            Height="91"
            HorizontalAlignment="Left"
            Margin="0,40,0,0"
            VerticalAlignment="Top"
            Width="408"/>
</Grid>
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:05:58.873

不知道它是否与普通的 XAML/WPF 不同。但在正常情况下，我建议首先将[Binding.Mode](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.mode.aspx)设置为 TwoWay，然后在 position.set 入口处中断 - 并查看通过`value`

# php - PHP添加时间，不适用于美国日期格式

> ID：11072730
> 
> 赞同：1
> 
> 时间：2012-06-17T15:58:19.587
> 
> 标签：php, server-side

我是英国人，但为一位美国客户工作，他希望显示时间加上偏移量。

为什么会这样：

```
$date = date('d-m-Y H:i');
$timeToAdd = strtotime(date("d-m-Y H:i", strtotime($date)) . " + 8 hour");
$newDate = date('d-m-Y H:i', $timeToAdd);
echo 'Current Time: ' . $date . '<br/>Time + 8 Hours: ' . $newDate; 
```

产生：

当前时间：17-06-2012 08:53 时间 + 8 小时：17-06-2012 16:53

这不会（月份和日期切换）：

```
$date = date('m-d-Y H:i');
$timeToAdd = strtotime(date("m-d-Y H:i", strtotime($date)) . " + 8 hour");
$newDate = date('m-d-Y H:i', $timeToAdd);
echo 'Current Time: ' . $date . '<br/>Time + 8 Hours: ' . $newDate; 
```

产生：

当前时间：06-17-2012 08:56 时间 + 8 小时：12-31-1969 16:00

1969

？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T16:04:31.093

[请参阅文档中`strtotime()`](http://php.net/strtotime)的注释部分：

> ### 笔记：
> 
> `m/d/y`或格式中的日期`d-m-y`通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜线 ( )，则假定`/`为美式；`m/d/y`而如果分隔符是破折号 ( `-`) 或点 ( )，则假定`.`为欧洲格式。`d-m-y`
> 
> 为避免潜在的歧义，最好使用 ISO 8601 ( `YYYY-MM-DD`) 日期或`DateTime::createFromFormat()`尽可能使用。

您使用 a`-`作为分隔符，因此假设`d-m-y`.

# eclipse - Groovy - com 的类节点中的意外 MOP 方法

> ID：11072737
> 
> 赞同：1
> 
> 时间：2012-06-17T15:59:05.010
> 
> 标签：eclipse, groovy, mop

不知道这是从何而来。使用groovy eclipse插件v2.61，groovy编译器1.8.6，eclipse 3.7

我可以在此处包含一些代码，但错误是在注释标题的中间生成的

```
/**
*
*  <--   somewhere here
*
*/ 
```

尝试过清理项目、重建项目和相关技巧

问题：什么是 MOP，有没有办法禁用它？

弗朗西斯

PS。切换到 groovy 编译器 1.7 会使错误消失，但这几乎不是解决方案（IMO）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:36:08.437

这听起来像是被解释为用户错误的内部 groovy 编译器错误。没有更多信息，我无话可说。您可以做的最好的事情是在此处附上代码片段，我会尝试一下。如果您无法在此处附加片段，请访问[http://jira.codehaus.org/browse/GRECLIPSE](http://jira.codehaus.org/browse/GRECLIPSE)并在那里提出问题。请附上我可以用来重新创建的失败项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-10T05:07:00.153

我经常收到这个错误，我要做的是

1.  清空导致错误的类或所有代码（没有代码只是为类打开关闭括号）
2.  保存课程，错误消失
3.  Ctrl-Z 取回类中的所有代码
4.  保存类，错误不再回来

奇怪但真实。在花费大量时间反复试验以解决问题后得到了这个解决方案。

# linq - 使用 PredicateBuilder 创建一个独立的布尔表达式

> ID：11072738
> 
> 赞同：1
> 
> 时间：2012-06-17T15:59:38.277
> 
> 标签：linq, predicatebuilder

我试图弄清楚如何使用 PredicateBuilder 来确定一组特定的记录是否全部存在于一个表达式中。因此，给定一个 OrderId 和一个 ProductIds 列表作为规范，我想知道 Order 的 OrderDetail 记录是否包含所有规范项。不只是其中一个或一些——而是所有这些。

所以我可以这样做：

```
var inner = PredicateBuilder.False<OrderDetail>();

foreach (int spec in specs)
{
   temp = spec;            
   inner = inner.Or(d => d.ProductId == temp);
}

var outer = PredicateBuilder.True<OrderDetail>();

outer = outer.And(d => d.OrderId == orderId);
outer = outer.And(inner); 
```

但是，在得到结果之后，我必须 a) 消除重复项（因为在我的情况下，多个 OrderDetails 可以具有相同的 ProductId），然后 b) 将结果计数与规范计数进行比较。所有这些在表达式之外都是可行的，但是有没有一种优雅的方法来评估表达式中的所有内容，使得结果是布尔值？

也就是说，我希望表达式是自包含的，以便它可以按原样传递，而我给它的那些不必知道如何进行“后期处理”来确定它是否真实.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:22:36.520

对于您给出的示例，我相信您可以通过不同的方式来简化它。

与其从您的 OrderDetails 开始工作，不如从您的规范开始，并确保它们都在 OrderDetails 集合中。这行代码将满足您确保特定 orderID 包含所有规范的要求，并且一点也不复杂：

```
bool containsAllSpecs = specs.All 
    (s => orderDetails.Any (p => p.OrderId == orderId && p.ProductId == s)); 
```

我认为尝试从 OrderDetail 类中构建表达式的原因是表达式仅应用于整个集合中的单个项目，因此不知道集合中的其他项目。

如果你真的想创建一个扩展来隐藏尽可能多的逻辑，你可以把它放在一个扩展中：

```
static class MyExtensions
{
    public static bool ContainsAllSpecs(this IEnumerable<OrderDetail> orderDetails,
        int orderId,
        IEnumerable<int> specs)
    {
        return specs
         .All (s => orderDetails.Any (p => p.OrderId == orderId && p.ProductId == s));
    }
} 
```

然后你可以从如下代码中调用它：

```
bool containsAllSpecs = orderDetails.ContainsAllSpecs(orderId, specs); 
```

# c# - 潜在危险请求，隐藏错误

> ID：11072741
> 
> 赞同：3
> 
> 时间：2012-06-17T16:00:00.463
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor

我正在尝试检查我的 MVC 应用程序的安全性。当我尝试输入 html 或 javascript 时出现错误：潜在危险请求。

```
Server Error in '/' Application.
A potentially dangerous Request.Form value was detected from the client (TEKST="<html><b>joo</b></ht...").
Description: Request Validation has detected a potentially dangerous client input value, and processing of the request has been aborted. This value may indicate an attempt to compromise the security of your application, such as a cross-site scripting attack. To allow pages to override application request validation settings, set the requestValidationMode attribute in the httpRuntime configuration section to requestValidationMode="2.0". Example: <httpRuntime requestValidationMode="2.0" />. After setting this value, you can then disable request validation by setting validateRequest="false" in the Page directive or in the <pages> configuration section. However, it is strongly recommended that your application explicitly check all inputs in this case. For more information, see http://go.microsoft.com/fwlink/?LinkId=153133.

Exception Details: System.Web.HttpRequestValidationException: A potentially dangerous Request.Form value was detected from the client (TEKST="<html><b>joo</b></ht...").

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 
```

这看起来不错，不可能注入 HTML 或 JavaScript。但我不喜欢的东西，用户会看到我的 ASP.net 版本和一切。

我怎样才能删除这个错误并只给出一条消息：我不喜欢你的输入或其他什么。

我试图这样做，但这不起作用：

```
[Authorize]
public ActionResult Create(int album_id)
{
    ViewBag.album_id = album_id;
    return View();
}

[Authorize]
[HttpPost]
public ActionResult Create(REVIEW model)
{
    string txt = null;
    try
    {
        txt = model.TEKST;
    }
    catch (System.Web.HttpRequestValidationException)
    {
        txt = "errorrr";
    }

    return RedirectToAction("Add", new { tekst = txt, album_id=model.ALBUM_ID});
} 
```

解决方案：见 Nudier 的回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T16:35:46.740

您可以通过以下方式处理应用程序中的错误

**1.**在应用程序的 Web.Config 文件中设置 CustomErros 模式部分

**这是 mode 属性可以接受的选项列表。**

**RemoteOnly：**为远程用户显示一般错误页面。针对本地请求（从当前计算机发出的请求）显示丰富的错误页面。这是默认设置。

**关闭：**无论请求的来源如何，都会为所有用户显示丰富的错误页面。此设置在许多开发方案中很有帮助，但不应在已部署的应用程序中使用。

**On：**无论请求的来源如何，都会为所有用户显示一般错误页面。这是最安全的选择。

```
 <System.Web>
      //map all the erros presented in the application to the error.aspx webpage
     <customErrors mode="RemoteOnly" defaultRedirect ="~/error.aspx" />
    <System.Web> 
```

**2.**通过Application_Error函数中的Global.asax文件

```
 //handle all the errors presented in the application
      void Application_Error(object sender, EventArgs e){  
     Server.Tranfer("error.aspx");
    } 
```

我希望这对你有用。

# objective-c - Objective-C – 在实用程序类中有 NSSortDescriptor 静态

> ID：11072743
> 
> 赞同：1
> 
> 时间：2012-06-17T16:00:43.013
> 
> 标签：objective-c, static

`NSSortDescriptor`在实用程序类中声明静态是个好主意吗？我在我的应用程序中可能在 10 个不同的地方对数组进行了一些排序。我在想，如果我可以重用`NSSortDescriptor`我的 Utility 类中的 ，那么每当我想对某些东西进行排序时，它会在分配新的 NSSortDescriptor 时使用更少的内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:04:52.647

我说这是一个折腾。在正常使用中，您的排序描述符进入内存，但（重要的是）根据需要离开内存。这可能会占用一些周期，但它是很好的内存管理。静态保存指向它的指针可能会节省初始化周期，但它会在不使用时将其保存在内存中，这是糟糕的内存管理。

集中初始化逻辑是一个好主意，也许在实用程序类的类方法中，但它不应该保留它创建的实例以供重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:04:19.277

为什么不？ObjC 类无论如何都是轻量级的，而 NSSortDescriptor 只是一个对象，并且您的内存逻辑是正确的，只要这不仅仅是一次性的事情。

# python - 在python中将输入拆分为行

> ID：11072745
> 
> 赞同：1
> 
> 时间：2012-06-17T16:00:44.077
> 
> 标签：python

我正在尝试解决这个问题[http://www.spoj.pl/problems/PEBBMOV/](http://www.spoj.pl/problems/PEBBMOV/)。我认为我有正确的算法，这不是这个问题的重点。这个问题有一个奇怪的输入文件。一个测试用例的输入应该是 n a1 a2 a3 ...an 的形式。（所有整数）

这里的问题是，在 a[i] 之间有杂散的换行符等。我需要能够跳过这样的换行符并在一个地方收集属于一个测试用例的所有 a[i]。我怎么知道这一切？好吧，一串 WA 和运行时错误，加上论坛上的一些研究。我有以下 python 代码来尝试执行此操作，但我似乎在关键地方步履蹒跚，只是无法完成。我希望在输入读取结束时的列表行[]中有适当的输入行。

有人可以在这里告诉我我的错误吗？还是建议更好的方法？提前致谢..

```
import sys
#data = sys.stdin.readlines()
#lines = inp.split('\n')
data = sys.stdin.read()
pos = 0
lno = 0

lines = []
while pos<len(data):
    while not data[pos].isdigit():
                   pos = pos + 1
num =data[pos]
print num
cur = pos + 1
numbers_collected = 0

x = [] # temp list
y = []
while numbers_collected < num:

    if cur<len(data) and data[cur].isdigit():
        y.append(data[cur])
        cur = cur + 1
        numbers_collected += 1
    else:
        if cur<len(data)and numbers_collected < num:
            cur = cur + 1
        else:
            break
print x
pos = cur
x.extend(y)
lines.extend(x)

for line in lines:
    print line 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:09:14.433

这能帮助你回答你的问题吗？

```
In [1]: s1 = "1\n2\n\n3\n\n\n4\n\n\n\n5\n\n\n\n\n6"

In [2]: s1
Out[2]: '1\n2\n\n3\n\n\n4\n\n\n\n5\n\n\n\n\n6'

In [3]: s1.splitlines()
Out[3]: ['1', '2', '', '3', '', '', '4', '', '', '', '5', '', '', '', '', '6']

In [4]: [elem for elem in s1.splitlines() if elem]
Out[4]: ['1', '2', '3', '4', '5', '6'] 
```

如果没有看到示例输入，就很难回答这个问题。但是，[SPOJ 问题页面](http://www.spoj.pl/problems/PEBBMOV/)不提供示例输入，因此 OP 无法提供不可用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:14:47.750

这样的事情可以提供帮助：

```
numbers = map(int, sys.stdin.read().split())
#numbers = [1,2,3,4,5] 
```

这是一个快速而肮脏的解决方案，因为它将所有空格都视为分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T16:18:02.753

spoj 问题表明每个游戏只有一个输入行：

```
for line in sys.stdin:
    n, *piles = map(int, line.split())
    assert len(piles) == n 
```

让我们假设在同一游戏中的数字之间可能有换行符：

```
numbers = (int(s) for line in sys.stdin for s in line.split() if line.strip())
for n in numbers:
    piles = list(itertools.islice(numbers, n))
    assert len(piles) == n 
```

# performance - 计算程序的时间和空间复杂度以删除重复条目

> ID：11072748
> 
> 赞同：1
> 
> 时间：2012-06-17T16:00:59.370
> 
> 标签：performance, time-complexity

**什么**

我编写了一小段代码来查找和删除整数数组中是否存在重复数字。为此，我使用了 List。

**编码**

```
 static int[] RemoveDuplicate(int[] input)
    {
       List<int> correctedList = new List<int>();

       for(int i = 0; i < input.Length; i++)
       {
           if (!correctedList.Contains(input[i]))
           {
               correctedList.Add(input[i]);
           }
           else
           {
               //skip
           }
       }

       return correctedList.ToArray();

    } 
```

**我的困难**

我需要知道如何为这段编写的一小段代码找到时间复杂度，以及如果可能的话如何优化它。

**我试过什么**

我已经在互联网上阅读了一些关于如何计算算法的时间和空间复杂度的文章，下面是我认为的答案，但由于我是新手，我认为与其做出错误的假设，不如这样做会更好就此请教一些专家。

**以下是我尝试过的。**

列表更正列表 = 新列表（）；--> 这将执行 1 次

诠释我=0；-->这将执行1次

int i < input.Length --> 这将被执行 N 次

i++ --> 这将被执行 N 次

if (!correctedList.Contains(input[i])) --> 这可能会被执行 N 次

更正列表。添加（输入 [i]）；--> 这可能会被执行 N 次

因此，操作总数 = 1 + 1 + N + N + N + N = 4N+2

**这等于 O(N) 吗？**

我计算时间复杂度的方法是否正确？

预先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T17:01:04.143

如果您调用的所有操作本身都是 O(1)，那将是 O(N)。列表中的包含不太可能是 O(1)。一般来说，搜索一个数组是 O(N) 这意味着你的算法是 O(N^2) （我认为它是）。

优化选项： 1) 你能做的最好的事情是 O(N)，但这意味着你需要一个包含 O(1) 的函数。您可以使用哈希表（或哈希集）来做到这一点。哈希表有 O(1) 的插入和删除。

2）您可以插入到保持排序顺序的结构中（例如平衡树）。插入将是 O(log N)，解决方案的整体性能将是 O(N log N)。

3）可能最常见和最简单的算法是对数组 O(N log N) 进行排序，然后扫描重复项。

# google-analytics - 测试网站跟踪的工具

> ID：11072749
> 
> 赞同：3
> 
> 时间：2012-06-17T16:01:07.943
> 
> 标签：google-analytics, automated-tests

我们使用谷歌和双击调用跟踪用户的行为。我们有许多跟踪组件。有谁知道是否有一种工具可以“测试”这些分析调用以确保它们被解雇并发送正确的数据？它可以是免费的或付费的。

我正在寻找的是一个像提琴手一样工作的自动化测试工具，除了基于被调用的网页，检查结果和正则表达式的重要部分，然后给出通过/失败。一个易于使用的工具会很好，但不是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-08T17:32:47.840

我知道这是一个老问题，但是假设您想要测试的所有跟踪器都是基于 Javascript 的，您可以使用 JS-Unit-Tests 来实现这一点。基本思想是这样的，可以使用所有流行的 JS-Unit-Testing 框架（例如[Jasmine](http://pivotal.github.io/jasmine/)或[Mocha](http://visionmedia.github.io/mocha/)）来实现：

*   用存根替换跟踪库的实际跟踪对象，例如`push`Google Analytics 跟踪器的 -method
*   调用您为其定义事件的操作，例如单击带有一些 JS 代码的链接（如 jQuery 的`trigger`-method）
*   将调用存根而不是`push`实际对象的 - 方法，您可以检查函数调用的参数是否与您期望的一样`_ga`
*   您可以针对 HTML-Fixtures 执行此操作，或者，如果您想在您的实时站点上进行完整的功能测试，请将其与 PhantomJS 的脚本（或使用 CasparJS）结合起来，将测试脚本注入网页并在那里运行它们。

这是一篇讨论类似于我建议的方法的文章：http: [//viget.com/extend/testing-google-analytics-with-phantomjs](http://viget.com/extend/testing-google-analytics-with-phantomjs)

根据您要测试的内容，该方法可能会受到限制，但如果您要跟踪的用户交互可以使用 PhantomJS 进行，您应该能够走得更远。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:32:09.713

虽然它可能不是您正在寻找的东西，但谷歌分析有一个调试模式，可以在控制台中显示所有跟踪数据。这是一个手动而不是自动测试选项，但我仍然觉得它非常有用。

如果您正在测试您拥有的网站，您可以更改分析跟踪代码以使用此模式：在该页面的跟踪代码中将所有对 /ga.js 的引用替换为 /u/ga_debug.js

（https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting#gaDebug）

请注意，您只想临时或在测试站点上执行此操作，因为调试文件较大并且会减慢页面速度。

如果您使用 Chrome 浏览器，则可以使用更简单的选项 - 安装 Google Analytics 调试器扩展程序，当您打开它时，您访问的任何站点的所有 GA 跟踪数据都将记录在控制台中。可以在这里找到扩展：

[https://chrome.google.com/webstore/detail/jnkmfdileelhofjcijamephohjechhna](https://chrome.google.com/webstore/detail/jnkmfdileelhofjcijamephohjechhna)

我仍在寻找一种自动化测试的方法，以便您可以获得输出并使用正则表达式或类似的东西对其进行测试。如果有人知道如何以可以测试的形式捕获 GA 调试输出 - 通过重定向到文本文件等，那么我很想知道！

# azure - Windows Azure，新 VM 角色：如何删除已删除 VM 的附加磁盘？

> ID：11072750
> 
> 赞同：0
> 
> 时间：2012-06-17T16:01:34.487
> 
> 标签：azure, azure-storage

有谁知道如何在 Windows azure 的新门户中删除附加到不存在（已删除）虚拟机的磁盘资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:53:01.953

您导航到“虚拟机”（1），然后单击“磁盘”（2），然后选择未使用的磁盘（3），最后单击删除（4）：

![在此处输入图像描述](../Images/d3daa351e2f1039c86c81f0608706c46.png)

或者只是任何要从存储帐户中删除的Azure 存储资源管理器（如[Cerebrata 的 Cloud Storage Studio](http://cerebrata.com/Products/CloudStorageStudio/)或[Azure 存储资源管理器）。](http://azurestorageexplorer.codeplex.com/)毕竟它是一个单一的blob。

# c++ - C++ 析构函数：未定义的行为与否？

> ID：11072755
> 
> 赞同：3
> 
> 时间：2012-06-17T16:02:43.230
> 
> 标签：c++, destructor

考虑以下代码

```
#include<iostream>
#include<string>

class A
{
    private:
        char name[10];

    public:
        A() { }
        A(const char *str)
        {
            strcpy(name, str);
            std::cout<<name<<" constructed"<<endl; 
        }
        ~A()
        {
           std::cout<<name<<" destructed"<<endl;
        }
};

int main()
{
   A a("a");
   A b("b");
   return 0;
} 
```

以下程序的 O/P 为：

```
a constructed
b constructed
b destructed
a destructed 
```

我对上面代码的唯一解释是，既然`b`是在之后创建`a`的，它应该存储`a`在堆栈的上方。现在，当 main 完成时，`b`首先弹出然后`a`，因此它的析构函数首先被调用，然后是 of `a`。

我的问题是：我的想法是否正确，或者以上是未定义的行为，并且可能因编译器而异？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T16:04:22.533

它不会改变，*自动内存*（堆栈）中的对象以它们创建的相反顺序被破坏。它完全由标准指定。

**C++03 15.2。构造函数和析构函数**

> 1.  [...] 自动对象按照其构建完成的相反顺序被销毁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T17:20:06.663

这就是为什么破坏顺序很重要（并且应该颠倒创建顺序）

```
class Foo
{
public:
  void foo() { /* ... */ }
};

class Bar
{
public:
   Bar(Foo const & foo) foo(foo) {}
   virtual ~Bar() { this->foo.foo(); }

   Foo const & foo;
};

int main()
{
  Foo foo;
  Bar bar(foo);
  // if foo gets destroyed before bar, then bar will call method foo() on invalid reference in its destructor
  // it is much more convenient to have bar destroyed before foo in such cases
} 
```

# javascript - 在整个页面加载之前显示加载条

> ID：11072759
> 
> 赞同：54
> 
> 时间：2012-06-17T16:03:46.233
> 
> 标签：javascript, jquery, progress-bar, loading

我想在加载整个页面之前显示一个加载栏。现在，我只是使用一个小的延迟：

```
$(document).ready(function(){
    $('#page').fadeIn(2000);
}); 
```

该页面已经使用了 jQuery。

注意：我已经尝试过了，但它对我不起作用：[脚本运行时加载栏](https://stackoverflow.com/questions/5245294/loading-bar-while-script-runs)

我还尝试了其他解决方案。在大多数情况下，页面会照常加载，或者页面根本不会加载/显示。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-06-17T16:06:07.763

使用 div`#overlay`与您的加载信息 / .gif 将覆盖您的所有页面：

```
<div id="overlay">
     <img src="loading.gif" alt="Loading" />
     Loading...
</div> 
```

jQuery：

```
$(window).load(function(){
   // PAGE IS FULLY LOADED  
   // FADE OUT YOUR OVERLAYING DIV
   $('#overlay').fadeOut();
}); 
```

* * *

这是一个带有**加载栏**的示例：

***[jsBin 演示](http://jsbin.com/huyusu/3/edit?html,css,js,output)***

```
;(function(){
  function id(v){ return document.getElementById(v); }
  function loadbar() {
    var ovrl = id("overlay"),
        prog = id("progress"),
        stat = id("progstat"),
        img = document.images,
        c = 0,
        tot = img.length;
    if(tot == 0) return doneLoading();

    function imgLoaded(){
      c += 1;
      var perc = ((100/tot*c) << 0) +"%";
      prog.style.width = perc;
      stat.innerHTML = "Loading "+ perc;
      if(c===tot) return doneLoading();
    }
    function doneLoading(){
      ovrl.style.opacity = 0;
      setTimeout(function(){ 
        ovrl.style.display = "none";
      }, 1200);
    }
    for(var i=0; i<tot; i++) {
      var tImg     = new Image();
      tImg.onload  = imgLoaded;
      tImg.onerror = imgLoaded;
      tImg.src     = img[i].src;
    }    
  }
  document.addEventListener('DOMContentLoaded', loadbar, false);
}());
```

```
*{margin:0;}
body{ font: 200 16px/1 sans-serif; }
img{ width:32.2%; }

#overlay{
  position:fixed;
  z-index:99999;
  top:0;
  left:0;
  bottom:0;
  right:0;
  background:rgba(0,0,0,0.9);
  transition: 1s 0.4s;
}
#progress{
  height:1px;
  background:#fff;
  position:absolute;
  width:0;                /* will be increased by JS */
  top:50%;
}
#progstat{
  font-size:0.7em;
  letter-spacing: 3px;
  position:absolute;
  top:50%;
  margin-top:-40px;
  width:100%;
  text-align:center;
  color:#fff;
}
```

```
<div id="overlay">
  <div id="progstat"></div>
  <div id="progress"></div>
</div>

<div id="container">
  <img src="http://placehold.it/3000x3000/cf5">
</div>
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-17T16:22:35.170

# HTML

```
<div class="preload">
<img src="http://i.imgur.com/KUJoe.gif">
</div>

<div class="content">
I would like to display a loading bar before the entire page is loaded. 
</div> 
```

# JAVASCRIPT

```
$(function() {
    $(".preload").fadeOut(2000, function() {
        $(".content").fadeIn(1000);        
    });
});​ 
```

# CSS

```
.content {display:none;}
.preload { 
    width:100px;
    height: 100px;
    position: fixed;
    top: 50%;
    left: 50%;
}
​ 
```

# [演示](http://jsfiddle.net/uQTb2/1/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-05-30T09:56:07.617

每当您尝试在此窗口中加载任何数据时，都会加载此 gif。

**HTML**

做一个div

```
<div class="loader"></div> 
```

**CSS** 。

```
.loader {
    position: fixed;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
    z-index: 9999;
    background: url('https://lkp.dispendik.surabaya.go.id/assets/loading.gif') 50% 50% no-repeat rgb(249,249,249); 
```

**jQuery**

```
$(window).load(function() {
        $(".loader").fadeOut("slow");
});
<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

[![在此处输入图像描述](../Images/995b40385565ac5d5961322c8e963d46.png)](https://i.stack.imgur.com/bp52g.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-12T20:33:29.727

我最近在 VanillaJS 中为一个项目制作了一个页面加载器，只是想分享它，因为所有其他答案都是基于 jQuery 的。这是一个即插即用的单线。

```
let settings={backgroundColor:"#2774ab",filterBrightness:2,timeOnScreen:100},u=document.querySelector("*"),s=document.createElement("style"),a=document.createElement("div"),m="http://www.w3.org/2000/svg",g=document.createElementNS(m,"svg"),c=document.createElementNS(m,"circle");document.head.appendChild(s),s.innerHTML="@keyframes swell{to{transform:rotate(360deg)}}",a.setAttribute("style","background-color:"+settings.backgroundColor+";color:"+settings.backgroundColor+";display:flex;align-items:center;justify-content:center;position:fixed;top:0;height:100vh;width:100vw;z-index:2147483647"),document.body.prepend(a),g.setAttribute("style","height:50px;filter:brightness("+settings.filterBrightness+");animation:.3s swell infinite linear"),g.setAttribute("viewBox","0 0 100 100"),a.prepend(g),c.setAttribute("cx","50"),c.setAttribute("cy","50"),c.setAttribute("r","35"),c.setAttribute("fill","none"),c.setAttribute("stroke","currentColor"),c.setAttribute("stroke-dasharray","165 57"),c.setAttribute("stroke-width","10"),g.prepend(c),u.style.pointerEvents="none",u.style.userSelect="none",u.style.cursor="wait",window.onload=(()=>{setTimeout(()=>{u.style.pointerEvents="",u.style.userSelect="",u.style.cursor="",a.remove()},settings.timeOnScreen)}); 
```

## 基础知识

*   生成`<script>`附加到元素的`<head>`元素，包含任何所需的样式。
*   生成一个`<div>`元素，作为覆盖，附加到`<body>`元素。
*   生成一个`<svg>`元素，充当加载器，附加到先前生成的`<div>`元素。
*   在`window.onload`自行生成的元素上会自动删除。

> ### 最新版本可在我的[GitHub 上找到](https://github.com/amarinediary/Vanilla-JS-Pages-Transition-Loader)。

## [演示](https://codepen.io/amarinediary/full/mdrQvGJ)

|  |  |  |
| --- | --- | --- |
| ![](../Images/5e8f37b7ea8c6ad068b72192041f9995.png) | ![](../Images/004c2a94aca54cd1d43877f4cf3f47ec.png) | ![](../Images/1e65b30c1d8ba9b21c78d8926cb6b2b3.png) |

## 设置

```
let settings = {
    backgroundColor: "#2774ab",
    filterBrightness: 2,
    timeOnScreen: 100
}, //... 
```

| 选项 | 描述 |
| --- | --- |
| `backgroundColor` | 有关可接受的值，请参阅[MDN Web Docs 颜色](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value)。[background-color CSS 属性](https://developer.mozilla.org/en-US/docs/Web/CSS/background-color)设置元素的背景颜色。默认为 Wordpress 深蓝色口音![#2774ab](../Images/edc27a5247e66d7af0b1742610482bf4.png) `#2774ab` |
| `filterBrightness` | [数字](https://developer.mozilla.org/en-US/docs/Web/CSS/number)或[百分比](https://developer.mozilla.org/en-US/docs/Web/CSS/percentage)。`svg`加载器元素的亮度（ [brightness() CSS 函数](https://developer.mozilla.org/en-US/docs/Web/CSS/filter-function/brightness())）。低于的值`100%`会使加载器变暗，而高于的值会`100%`使其变亮。插值的空白值为`1`。默认为`2`。 |
| `timeOnScreen` | 积极`integer`的。屏幕上的时间附加到页面加载时间。默认为`100`毫秒。 |

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-05-04T09:00:33.663

Semantic UI might also help, with just simple one liner to show and to hide the loading icon.

Eg: `<div class="ui active centered inline loader"></div>`

Source: [https://semantic-ui.com/elements/loader.html](https://semantic-ui.com/elements/loader.html)

Found a code sample: [https://codepen.io/fujiyamayuta/pen/JBxxJO](https://codepen.io/fujiyamayuta/pen/JBxxJO)

Although, there is a small typo in the JS file of the above code sample, corrected is shown below:

```
// ** Loader ON
$('#dimmer').dimmer('show');

// ** Loader OFF
// $('#dimmer').dimmer('hide'); 
```

# iphone - 从 Web 服务 4.0 返回 JSON

> ID：11072760
> 
> 赞同：2
> 
> 时间：2012-06-17T16:03:54.593
> 
> 标签：iphone, asp.net, wcf, web-services

我想从 Web Service 4.0 返回 JSON。我正在为 iPhone 创建一个应用程序。iPhone 开发人员想要一个以 JSON 格式响应的 Web 服务。

我做了很多研发并找到了一些解决方案，但它不正确。它返回带有 XML 标头的 JSON。我想要纯 JSON Web 服务。

请帮我创建 JSON Web 服务。如果您向我提供一些代码示例，那么它对我很有帮助。

提前致谢。

问候果冻

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:11:43.847

一种方法是使用 WCF 创建带有 JSON 序列化的 RESTful 服务。例子很多，但你可以从一个[简单](http://debugmode.net/2011/05/15/wcf-rest-service-with-josn-data/)的开始。您只需要小心在您的网络方法（GET、POST 等）上指定**RequestFormat = WebMessageFormat.Json**和**ResponseFormat = WebMessageFormat.Json 。**

您需要确保设置的另一个重要属性是**WebInvokeAttribute**上的 BodyStyle （在您的网络方法上）。该值应该是**WebMessageBodyStyle.Bare**，因此框架不会用额外的 XML 元素来装饰它。

其他选项包括 WCF 数据服务（OData 协议）。5.0 版刚刚发布 (http://msdn.microsoft.com/en-us/data/odata.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T16:08:18.147

非常相似的问题在这里有很好的链接：[How do I get MVC WebAPI to return JSON instead of XML using Chrome](https://stackoverflow.com/questions/9847564/how-do-i-get-mvc-4-webapi-to-return-json-instead-of-xml-using-chrome)。

如果您可以选择使用新的[ASP.NET MVC 4.0 Web API](http://www.asp.net/web-api)来构建服务，那么它将为您轻松序列化 xml 或 json。

服务使用者可以指定 http**接受**标头 ( `accept: application/json`)，这将选择正确的格式化程序。或者，如果您只想返回 JSON，您也可以这样做。

这些示例来自上面相同的 ASP.NET MVC 4.0 链接，是一个非常好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T17:27:28.403

我建议您按照 marceln 的建议使用 OData RESTful 服务。只需在线浏览一些示例，您就会惊讶地发现它们是多么容易构建以及它们实际上是多么有用！这是 CodeProject 上的示例项目，供您快速参考： http: [//www.codeproject.com/Articles/393623/OData-Services](http://www.codeproject.com/Articles/393623/OData-Services)

# android - 如何将 xml 文件列表从我的 android 应用程序中的文件夹加载到 listview

> ID：11072762
> 
> 赞同：0
> 
> 时间：2012-06-17T16:04:10.910
> 
> 标签：android, directory, storage

我在我的应用程序中创建了一个名为“diagrams”的文件夹。在这个文件夹中有xml文件。我想要实现的是当我运行我的应用程序时，这些 xml 文件将被填充到列表视图中。基本上我的应用程序包名称是 com.my.application.diagrams

我试图访问文件夹 new File("/data/app/com.my.application.diagrams/");

它显示了目录，但看不到 xml 文件。如果我将 xml 文件放在其他地方，例如在 sdcard 中并直接使用路径 /sdcard/ 我可以看到 xml 文件列表。我应该将这些 xml 文件放在我的应用程序中的什么位置以及应该使用什么路径名来访问它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:07:52.763

我建议根据您的需要使用资产目录。Android 资源必须放在特定的文件夹名称中。

使用 AssetManager 访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:12:22.433

您可以将您的 xml 放在资产目录中或在资产下创建文件夹并将其放在那里。

> 例如，将您的 xml 文件放在 assets/simple.xml 中

要列出资产文件夹中的文件，请使用以下代码

```
 try {
            String[] files = getAssets().list("");

            for (String fileName : files) {
                //Add this fileName in List
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

# php - 获取当前目录的文件夹名称

> ID：11072763
> 
> 赞同：0
> 
> 时间：2012-06-17T16:04:17.400
> 
> 标签：php, directory

> **可能重复：**
> [PHP 获取当前目录的名称](https://stackoverflow.com/questions/9997391/php-get-name-of-current-directory)

今天我试图获取一个目录的文件夹名称。我在一定程度上是成功的。但它不符合我的标准。我拥有的代码如下。

```
<?php
$url = (!empty($_SERVER['HTTPS'])) ? "https://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'] : $_SERVER['REQUEST_URI'];
$foldername = basename($url);
echo $foldername;
?> 
```

这将返回 URL 中的最终值。我的意思是如果 URL 是`localhost/default`它返回`default`，而 url 是`localhost/default/index.php`它返回时`index.php`。我希望它在这两种情况下都返回`default`。

那么有没有可能得到我期待的东西？请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T16:07:39.187

[预定义常量](http://php.net/manual/en/language.constants.predefined.php)

您可能正在寻找`__DIR__`

如果您正在寻找 URL 中的目录而不是文件系统，您也可以使用

```
$path_parts = pathinfo($_SERVER['PATH_INFO']);
$dir = $path_parts['dirname']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T16:07:09.890

```
<?php 

$url = "uour_url";
$array = explode('/',$url);
$count = count($array);
echo $array[$count-2];

?> 
```

或者你可以使用 getcwd()。此函数将返回当前目录。

我没有测试过但希望对你有帮助

# css - 中央背景图像宽度元素填充

> ID：11072771
> 
> 赞同：0
> 
> 时间：2012-06-17T16:05:21.017
> 
> 标签：css, background-image, padding

我`.nav_item`在表中有一些 td 元素 ( )。我还有一个带有 class`.nav_item`和 id的活动 td `#nav_item_active`，其背景底部有一个小白色三角形。该三角形应该在 td 的中心，但由于元素的右填充，它有点正确。我可以用css解决我的问题吗？我想使用`padding-right: 30px;`图像并将其居中。可能吗？

**[现场演示](http://jsfiddle.net/vUPdq/1/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:10:51.340

背景不受填充影响。背景似乎没有居中，因为文本设置为`text-align:left;`。

看这里：http: [//jsfiddle.net/kU6fu/](http://jsfiddle.net/kU6fu/)

将 background-position 设置为`center bottom`，使文本居中，并在左右两侧保持填充均匀。

# ruby-on-rails - 我无法使用 RSpec 2 和 FactoryGirl 保存对象

> ID：11072774
> 
> 赞同：3
> 
> 时间：2012-06-17T16:05:43.797
> 
> 标签：ruby-on-rails, rspec, factory-bot

我有以下规格：

```
 it "saves a default 'active' status if not specified" do
    if User.count <= 0
      user = User.new(FactoryGirl.attributes_for(:user))
      user.save
    end

    project = FactoryGirl.create(:project, :status => nil)
    project.status.should eq("active")
  end 
```

使用这个 FactoryGirl 对象：

```
 factory :project do
    title "A short title"
    description "A short description"
    parent_id 1
    pm_id 1
    status "active"
  end 
```

该项目的模型验证了关联的存在......所以，在测试之前，我想在测试数据库中保存一个用户。但是上面的代码并没有在数据库中保存任何东西。

相反，如果我添加一个 before(:all) 块：

before(:all) do @user = User.new(FactoryGirl.attributes_for(:user)) @user.save end

一个新用户被保存到数据库中。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:14:58.760

如果在您的模型中，项目属于用户，那么您可以让工厂女孩在创建项目时简单地创建一个用户。您只需将您的项目工厂更新为

```
factory :project do
    title "A short title"
    description "A short description"
    parent_id 1
    pm_id 1
    status "active"
    user
end 
```

我认为这与您上面的代码具有相同的效果。

其次，在上面的代码中，您似乎没有在任何时候将项目与用户相关联。（当然假设 pm_id 或 parent_id 都不是指用户，在这种情况下，我可以建议您不要对 id 做出假设，而是使用上面的方法 :-)

# java - 单击时更改的按钮

> ID：11072779
> 
> 赞同：0
> 
> 时间：2012-06-17T16:06:09.333
> 
> 标签：java, android, ontouchlistener

单击时，按钮 onTouchLitsener 不会更改。我希望按钮在单击时更改。

```
 public class SoundActivity extends Activity implements OnTouchListener {
    /** Called when the activity is first created. */
    MediaPlayer mp;
    MediaPlayer mp1;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        setVolumeControlStream(AudioManager.STREAM_MUSIC);

        final Button zero = (Button) this.findViewById(R.id.button1);
        zero.setOnTouchListener(this);

        mp = MediaPlayer.create(this, R.raw.song_3);

        //final ImageButton zero = (ImageButton) this.findViewById(R.id.imageButton1);
        //zero.setOnTouchListener(this);

        //mp = MediaPlayer.create(this, R.raw.song_3);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event)
    {  
        switch (event.getAction())
        {
        case MotionEvent.ACTION_DOWN:
        {
            mp.setLooping(true);
            mp.start();
        }
        break;
        case MotionEvent.ACTION_UP:
        {
            mp.pause();
        }
        break;
    }
    return true;
    }
    //public boolean onTouchEvent(View v, MotionEvent event) {
        //ImageView iv = (ImageView) v;

       // if (event.getAction() == MotionEvent.ACTION_DOWN) {
           // iv.setImageResource(R.drawable.arrow_leftpressed);
           // return true;
        //} else if (event.getAction() == MotionEvent.ACTION_UP) {
           // iv.setImageResource(R.drawable.arrow_left);
            //return true;
        //}

        //return false;
    //}

    public boolean onTouchEvent(View v, MotionEvent event) {
        Button zero = (Button) v;

        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            zero.setBackgroundResource(R.drawable.arrow_leftpressed);
            return true;
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            zero.setBackgroundResource(R.drawable.arrow_left);
            return true;
        }
        return false;
    }

} 
```

我的xml文件

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="button"
        android:clickable="true"
         />

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/button4"
        android:clickable="true"
         />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:19:18.473

我建议使用[onClickListener](http://developer.android.com/reference/android/widget/Button.html)。

按下按钮时，onTouchListener 会接收两个事件 - 触摸时为 ACTION_DOWN，释放时为 ACTION_UP。因此，播放器在此之后立即开始和停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:22:37.343

您在错误的块中编写了按钮代码。

你已经写`zero.setOnTouchListener(this);`了，所以每当你触摸按钮时，onTouch 都会被调用而不是`onTouchEvent`

所以在 onTouch 中添加按钮代码。

在您的代码中进行以下更改。

删除整个块

```
public boolean onTouchEvent(View v, MotionEvent event) {
        Button zero = (Button) v;

        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            zero.setBackgroundResource(R.drawable.arrow_leftpressed);
            return true;
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            zero.setBackgroundResource(R.drawable.arrow_left);
            return true;
        }

        return false;
    } 
```

将上面的代码移到 onTouch 块中。下面是它的样子。

```
@Override
    public boolean onTouch(View v, MotionEvent event) {
        Button zero = (Button) v;

        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            zero.setBackgroundResource(R.drawable.arrow_leftpressed);
            return true;
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            zero.setBackgroundResource(R.drawable.arrow_left);
            return true;
        }

        return false;
    } 
```

# jquery - 使用浏览器前缀应用内联样式

> ID：11072785
> 
> 赞同：0
> 
> 时间：2012-06-17T16:06:41.263
> 
> 标签：jquery

我发现了一个小技巧，可以让我使用 jquery 将样式添加到具有供应商前缀的类中：

```
 var myTransform = ($.browser.webkit)  ? '-webkit-transform' :
                       ($.browser.mozilla) ? '-moz-transform' : 
                       ($.browser.msie)    ? '-ms-transform' :
                       ($.browser.opera)   ? '-o-transform' : 'transform';

var myCSSObj = {};

    myCSSObj[myTransform] = 'translate('+centrepos+'px, 0px)';
        $("div.current").css(myCSSObj); 
```

我不完全确定这是如何工作的，所以如果有人能解释我会非常感激。

但是，我的问题是关于应用此方法并将其添加到 jquery 片段的内联样式中。目前我有以下内容，但它是手动编写的：

```
$fragment = $('<div class="preload" style="position: relative; -webkit-transform: translate('+start+'px, 0px);"/>'); 
```

我想在这个容器附加到 dom 时给它一个初始位置。如何添加代码而无需手动添加每个浏览器的前缀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:26:26.420

如果我理解正确，您希望自动将供应商特定前缀添加到您的 css 属性的过程。

jquery 核心中包含一个 API，可让您执行此操作。[jQuery.cssHooks](http://api.jquery.com/jQuery.cssHooks/)

在文档中有一个很好的例子来做类似的思考`border-radius`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:27:28.980

在这里看到这个jsfiddle：

[http://jsfiddle.net/molokoloco/f6Z3D/](http://jsfiddle.net/molokoloco/f6Z3D/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T16:35:28.617

您可以查看 lea verou 的无前缀：http: [//leaverou.github.com/prefixfree/](http://leaverou.github.com/prefixfree/)

> -prefix-free 让你在任何地方都只使用无前缀的 CSS 属性。它在幕后工作，仅在需要时将当前浏览器的前缀添加到任何 CSS 代码中。

# objective-c - iOS中电子邮件地址的正则表达式验证并检查空白条目

> ID：11072788
> 
> 赞同：1
> 
> 时间：2012-06-17T16:07:24.870
> 
> 标签：objective-c, regex, cocoa-touch

> **可能重复：**
> [检查电子邮件地址在 iOS 上是否有效](https://stackoverflow.com/questions/3139619/check-that-an-email-address-is-valid-on-ios)

我可以在 iOS 中使用什么正则表达式语法来验证我的`UITextField.text`价值？有没有办法让我检查是否有其他`UITextField`或`UITextView`丢失？

我可以用它来测试空白值吗：

```
if(content.text == nil){
    //do something
}
else{
    //proceed with next course of action
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:31:49.093

为了绝对确定您已经测试了一个空值，您还应该测试一个空字符串。

这个结构做到了，并且比 using 减少了打字`isEqualToString:`，但这主要是个人喜好的问题：

```
if ( content.text == nil || content.text.length == 0 ) {

} 
```

对 Objective-C 运行时有更深入了解的人可能会指出，测试 for`nil`是多余的，因为发送消息到`nil`总是会产生 nil（或 0），`content.text.length`如果是，则 nil也是如此`content.text`。此外，如果您的周围充满了核心 C 编码人员，他们可能会同样指出，在 if 语句中测试 0 是针对懦夫的。

因此，键入可以减少到以下内容，但代价是您的代码更加清晰：

```
if ( !content.text.length ) {

} 
```

至于测试邮件地址的正则表达式，这里有一个很好的讨论[，](http://www.regular-expressions.info/email.html) Cocoa 中的正则表达式可以这样完成：

```
NSPredicate *regexPred = [NSPredicate predicateWithFormat: @"self matches[cd] '<email regex here>'"];
BOOL match = [regexPred evaluateWithObject: content.text]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T16:38:37.143

因此，对于第一部分（电子邮件验证），这是我要做的：

```
if (content.text == nil //check if its nil (i dont think this is actually possible but who knows
    || content.text.length == 0 //check for the length to have some sort of magnitude
    || [content rangeOfString:@"@"].location == NSNotFound) { //check if its an email they put in
//do your error stuff
} 
```

现在要检查其他文本字段/文本视图，您需要显示更多代码。很有可能，但这取决于您如何实现该类。如果您将它们作为 ivars，您可以直接对 ivars 进行检查，否则您可以导航视图层次结构以找到它们然后进行检查，您是否遵循？

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-17T16:40:19.953

简单设置

```
[textField setKeyboardType:UIKeyboardTypeEmailAddress]; 
```

您将避免尝试正确进行电子邮件验证的痛苦。

# ios - IOS NSSlider 从数组中设置标签（在索引处：滑块值）

> ID：11072792
> 
> 赞同：0
> 
> 时间：2012-06-17T16:07:55.530
> 
> 标签：ios, arrays, text, label, nsslider

我想要一个滑块（让我们说从 0 到 4 的值）和一个相应的标签，该标签的内容不显示当前的滑块值，而是一个相应的字符串。

我对Objective-C很陌生，但这是我尝试过的（......但没有奏效;））

**首先我做了一个数组：**

```
sliderArray = [[NSArray alloc] initWithObjects:
@"sad" @"not so good" @"average" @"good" @"awesome", nil]; 
```

**然后我定义了动作：**

```
(IBAction)sliderChange:(id)sender {
   UISlider *slider = (UISlider *) sender;
   NSString *mood = [[NSString alloc] init];
   mood = @"%@", [sliderArray objectAtIndex:(int)[slider value]];
   [sliderLabelMood setText:mood];
} 
```

Xcode 可以编译，但是一旦我尝试移动滑块，它就会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:33:31.003

字符串是不可变的，因此您可以重用引用。使用 alloc/init 创建一个是多余的，因为它在创建后无法更改。同样，您可以创建不需要显式内存管理的数组。请注意，随着[ARC](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html "弧")在 iOS5 中的到来，内存管理技术发生了变化。

因此，请尝试以下方法来创建您的数组。

```
sliderArray = [NSArray arrayWithObjects:@"sad", @"not so good", @"average", @"good", @"awesome", nil]; 
```

然后显示情绪标签：

```
NSInteger index = [slider value];
NSString *mood = [sliderArray objectAtIndex:index];
[sliderLabelMood setText:mood]; 
```

您也可以考虑将标签数组设为静态，因为它是恒定且固定长度的：

```
static NSString* moods[] = {
    @"sad", @"not so good", @"average", @"good", @"awesome"
} 
```

在这种情况下，您将更改上述代码：

```
NSInteger index = [slider value];
[sliderLabelMood setText:moods[index]]; 
```

当然，您需要注意幻灯片的值不要超过心情数组的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:58:36.403

`NSString`问题是您对变量的分配`mood`。

如果您使用格式字符串，则必须使用`NSString`类方法`stringWithFormat:`，因此要么

```
mood = [NSString stringWithFormat:@"%@", 
   [sliderArray objectAtIndex:sliderValue]]; 
```

或者

```
mood = [sliderArray objectAtIndex:sliderValue]; 
```

此外，您应该确保滑块值确实返回一个`NSInteger`. `value`滑块属性的正常类型是`float`. 因此：

```
NSInteger sliderValue = (NSInteger) slider.value; 
```

# django - 重复的页面元素和django

> ID：11072795
> 
> 赞同：0
> 
> 时间：2012-06-17T16:08:10.367
> 
> 标签：django

我有一个重复的页面元素，可能会出现在不同的页面或同一页面中，例如用户的签名，我想防止一次又一次地重复相同的 HTML。我有一个选择是定义一个用户定义的过滤器，并将数据传送到过滤器或自定义标签中。就层责任而言，我不知道将 HTML 保存在过滤器中是否是个好主意。在 django 中这样做的首选方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T16:16:32.867

如果它是不需要任何聪明的 HTML，请使用[include](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include)标记从单个文件中提取重复的部分模板。您可以在该包含中引用包含模板的变量。

如果需要对数据进行操作，使得模板部分可以根据不同的情况渲染不同的值，但是 HTML 布局相同，写一个[包含标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#howto-custom-template-tags-inclusion-tags)

# wordpress - 更改 Wordpress 菜单的顺序

> ID：11072797
> 
> 赞同：0
> 
> 时间：2012-06-17T16:08:19.343
> 
> 标签：wordpress, wordpress-theming

我的菜单照原样运行良好，但目前使用的是 ASC 订单。我尝试使用以下代码将其更改为 DESC：

```
$args = array( 'numberposts' => 9, 'order' => 'DESC' );
$myposts = get_posts( $args ); 
```

'订单'论点不起作用的任何原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T16:17:53.847

根据默认[的法典](http://codex.wordpress.org/Template_Tags/get_posts)......如果一切都失败了，你可能只是`array_reverse`结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:13:59.167

您实际上并没有告诉它要订购什么。只是它需要下降。

所以尝试类似：

```
 $args = array( 'numberposts' => 9, 'orderby' => 'ID', 'order' => 'DESC' ); 
```

# asp.net - 不同系统上的下拉宽度不同

> ID：11072798
> 
> 赞同：0
> 
> 时间：2012-06-17T16:08:37.070
> 
> 标签：asp.net

我有 3 个文本框和一个下拉菜单。在某些机器中，下拉菜单看起来比文本框大。文本框在所有机器上都显示正确，但它只是下拉宽度不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:26:19.480

这是你的要求吗？因为，默认情况下，下拉菜单的宽度略大于文本框的宽度。

# java - Java：找出通过 channel.map 和 allocateDirect 创建的 ByteBuffer 的区别

> ID：11072802
> 
> 赞同：1
> 
> 时间：2012-06-17T16:08:55.353
> 
> 标签：java, nio

是否有一种编程方式来实现满足以下条件的“isFileMapped”方法：

```
 ByteBuffer aa = ByteBuffer.allocateDirect(12);
 assertFalse(isFileMapped(aa));
 FileChannel fc = new RandomAccessFile(File.createTempFile("mmap", "test"), "rw").getChannel();
 ByteBuffer bb = fc.map(FileChannel.MapMode.READ_WRITE, 0, 10);
 assertTrue(isFileMapped(bb));
 fc.close();
 // and of course:
 assertFalse(isFileMapped(ByteBuffer.allocate(12))); 
```

这两个实例都是 MappedByteBuffer 类型并且是直接的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:26:06.210

使用`MappedByteBuffer.isLoaded()`. 对于真正映射的缓冲区，它返回 true 或 false，对于返回的缓冲区`ByteBuffer.allocateDirect()`，它抛出 UnsupportedOperationException。

但我不确定它在参与 I/O 操作后是否还会抛出 UnsupportedOperationException。

# ios - 如何在 OS X 或 iOS（不使用格式塔）中确定运行时的操作系统版本？

> ID：11072804
> 
> 赞同：75
> 
> 时间：2012-06-17T16:09:15.797
> 
> 标签：ios, macos, cocoa, macos-carbon

位于 OS X 10.8 Mountain Lion 的 Gestalt() 函数`CarbonCore/OSUtils.h`已被弃用。

我经常使用这个函数在运行时测试 OS X 操作系统的版本（参见下面的玩具示例）。

还有哪些 API 可用于在 Cocoa 应用程序运行时检查 OS X 操作系统版本？

```
int main() {
    SInt32 versMaj, versMin, versBugFix;
    Gestalt(gestaltSystemVersionMajor, &versMaj);
    Gestalt(gestaltSystemVersionMinor, &versMin);
    Gestalt(gestaltSystemVersionBugFix, &versBugFix);

    printf("OS X Version: %d.%d.%d\n", versMaj, versMin, versBugFix);
} 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2014-06-02T23:08:39.530

在 OS X 10.10（和 iOS 8.0）上，您可以使用[`[[NSProcessInfo processInfo] operatingSystemVersion]`](https://developer.apple.com/documentation/foundation/processinfo/1410906-operatingsystemversion)which 返回一个[`NSOperatingSystemVersion`](https://developer.apple.com/documentation/foundation/operatingsystemversion)结构，定义为

```
typedef struct {
    NSInteger majorVersion;
    NSInteger minorVersion;
    NSInteger patchVersion;
} NSOperatingSystemVersion; 
```

还有一种方法[`NSProcessInfo`](https://developer.apple.com/documentation/foundation/processinfo)可以为您进行比较：

```
- (BOOL)isOperatingSystemAtLeastVersion:(NSOperatingSystemVersion)version 
```

**请注意**，虽然记录在 OS X 10.10 及更高版本中可用，但两者都`operatingSystemVersion`存在`isOperatingSystemAtLeastVersion:`于 OS X 10.9（[可能是 10.9.2](https://twitter.com/gparker/status/586107421816332289)）上并按预期工作。这意味着您不能测试是否`NSProcessInfo`响应这些选择器来检查您是否在 OS X 10.9 或 10.10 上运行。

在 iOS 上，这些方法仅在 iOS 8.0 之后有效。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-28T01:02:31.250

在命令行上：

```
$ sysctl kern.osrelease
kern.osrelease: 12.0.0
$ sysctl kern.osversion
kern.osversion: 12A269 
```

以编程方式：

```
#include <errno.h>
#include <sys/sysctl.h>

char str[256];
size_t size = sizeof(str);
int ret = sysctlbyname("kern.osrelease", str, &size, NULL, 0); 
```

达尔文版本到 OS X 版本：

```
17.x.x. macOS 10.13.x High Sierra
16.x.x  macOS 10.12.x Sierra
15.x.x  OS X  10.11.x El Capitan
14.x.x  OS X  10.10.x Yosemite
13.x.x  OS X  10.9.x  Mavericks
12.x.x  OS X  10.8.x  Mountain Lion
11.x.x  OS X  10.7.x  Lion
10.x.x  OS X  10.6.x  Snow Leopard
 9.x.x  OS X  10.5.x  Leopard
 8.x.x  OS X  10.4.x  Tiger
 7.x.x  OS X  10.3.x  Panther
 6.x.x  OS X  10.2.x  Jaguar
 5.x    OS X  10.1.x  Puma 
```

获取和测试版本的示例：

```
#include <string.h>
#include <stdio.h>
#include <sys/sysctl.h>

/* kernel version as major minor component*/
struct kern {
    short int version[3];
};

/* return the kernel version */
void GetKernelVersion(struct kern *k) {
   static short int version_[3] = {0};
   if (!version_[0]) {
      // just in case it fails someday
      version_[0] = version_[1] = version_[2] = -1;
      char str[256] = {0};
      size_t size = sizeof(str);
      int ret = sysctlbyname("kern.osrelease", str, &size, NULL, 0);
      if (ret == 0) sscanf(str, "%hd.%hd.%hd", &version_[0], &version_[1], &version_[2]);
    }
    memcpy(k->version, version_, sizeof(version_));
}

/* compare os version with a specific one
0 is equal
negative value if the installed version is less
positive value if the installed version is more
*/
int CompareKernelVersion(short int major, short int minor, short int component) {
    struct kern k;
    GetKernelVersion(&k);
    if ( k.version[0] !=  major) return major - k.version[0];
    if ( k.version[1] !=  minor) return minor - k.version[1];
    if ( k.version[2] !=  component) return component - k.version[2];
    return 0;
}

int main() {
   struct kern kern;
   GetKernelVersion(&kern);
   printf("%hd %hd %hd\n", kern.version[0], kern.version[1], kern.version[2]);

   printf("up: %d %d eq %d %d low %d %d\n",
        CompareKernelVersion(17, 0, 0), CompareKernelVersion(16, 3, 0),
        CompareKernelVersion(17, 3, 0), CompareKernelVersion(17,3,0),
        CompareKernelVersion(17,5,0), CompareKernelVersion(18,3,0));

} 
```

我的机器上的结果 macOS High Sierra 10.13.2

```
17 3 0
up: -3 -1 eq 0 0 low 2 1 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-07-28T00:45:49.220

您可以使用 NSAppKitVersionNumber 值来检查 AppKit 的各种版本，尽管它们与操作系统版本不完全对应

```
if (NSAppKitVersionNumber <= NSAppKitVersionNumber10_7_2) {
    NSLog (@"We are not running on Mountain Lion");
} 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-06-05T08:44:08.767

有一个可可 API。您可以从 NSProcessInfo 类中获取 os X 版本字符串。

获取操作系统版本字符串的代码如下..

```
NSString * operatingSystemVersionString = [[NSProcessInfo processInfo] operatingSystemVersionString];

NSLog(@"operatingSystemVersionString => %@" , operatingSystemVersionString); 
```

// ===>> 版本 10.8.2 (Build 12C2034) 结果值

它**没有**被弃用。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-10-24T15:21:51.457

如果您只需要检查要支持的最低版本，也可以使用 kCFCoreFoundationVersionNumber。这样做的好处是它可以追溯到 10.1，并且可以在 C、C++ 和 Objective-C 中完成。

例如检查 10.10 或更高版本：

```
#include <CoreFoundation/CoreFoundation.h>
if (floor(kCFCoreFoundationVersionNumber) > kCFCoreFoundationVersionNumber10_9) {
    printf("On 10.10 or greater.");
} 
```

您将需要链接到 CoreFoundation（或 Foundation）框架。

它也以完全相同的方式在 Swift 中工作。这是另一个例子：

```
import Foundation
if floor(kCFCoreFoundationVersionNumber) > kCFCoreFoundationVersionNumber10_8 {
    println("On 10.9 or greater.")
} else if floor(kCFCoreFoundationVersionNumber) > kCFCoreFoundationVersionNumber10_9 {
    println("On 10.10 or greater.")
} 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2015-07-27T15:52:35.440

您可以使用以下方法轻松获取操作系统的主要、次要、补丁版本`NSOperatingSystemVersion`

```
NSOperatingSystemVersion version = [[NSProcessInfo processInfo] operatingSystemVersion];

NSString* major = [NSString stringWithFormat:@"%d", version.majorVersion];

NSString* minor = [NSString stringWithFormat:@"%d", version.minorVersion];

NSString* patch = [NSString stringWithFormat:@"%d", version.patchVersion]; 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-02-22T15:13:12.143

或者，更简单地说，这里是代码：

```
NSDictionary *version = [NSDictionary dictionaryWithContentsOfFile:@"/System/Library/CoreServices/SystemVersion.plist"];
NSString *productVersion = [version objectForKey:@"ProductVersion"];
NSLog (@"productVersion =========== %@", productVersion); 
```

我希望这可以帮助别人。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-08-12T13:32:45.170

如果您的应用需要在 10.10 以及之前的版本上运行，这里有一个解决方案：

```
typedef struct {
        NSInteger majorVersion;
        NSInteger minorVersion;
        NSInteger patchVersion;
} MyOperatingSystemVersion;

if ([[NSProcessInfo processInfo] respondsToSelector:@selector(operatingSystemVersion)]) {
    MyOperatingSystemVersion version = ((MyOperatingSystemVersion(*)(id, SEL))objc_msgSend_stret)([NSProcessInfo processInfo], @selector(operatingSystemVersion));
    // do whatever you want with the version struct here
}
else {
    UInt32 systemVersion = 0;
    OSStatus err = Gestalt(gestaltSystemVersion, (SInt32 *) &systemVersion);
    // do whatever you want with the systemVersion as before
} 
```

请注意，即使 10.9 似乎也响应了 operatingSystemVersion 选择器，所以我认为它只是 10.9 中的一个私有 API（但仍然有效）。

这适用于所有版本的 OS X，并且不依赖于字符串解析或文件 I/O。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-04-18T09:55:19.657

这实际上是上面答案的汇编，对有需要的开发人员有一些进一步的指导。

OS-X 以多种方式在运行时提供其版本。每种方式都更适合特定的开发场景。我会尽力总结它们，如果我忘记了什么，希望其他人能完成我的回答。

首先，获取操作系统版本的方法的完整列表。

1.  `uname`命令行工具和功能提供了操作系统的 unix (darwin) 版本。虽然这不是 OS 的营销版本，但它与它独特地对齐，因此您可以从中推断出 OS-X 的营销版本。
2.  `sysctl kern.osrelease`命令行（或`sysctlbyname("kern.osrelease", str, &size, NULL, 0)`函数）将提供与 uname 相同的信息，但更容易解析。
3.  `Gestalt(gestaltSystemVersionMajor)`（其“ `Minor`”和`BugFix`“变体是最古老的（Carbon 之前的！）API，用于获取营销 OS 版本，仍然被长期弃用。在 CoreServices 框架的 C 中可用，但不推荐。
4.  `NSAppKitVersionNumber`是 AppKit 框架的浮点常量，它将提供 OS-X Appkit 版本（与 OS 版本一致），可用于链接到 AppKit 的所有应用程序。它还提供了所有可能版本的全面枚举（例如`NSAppKitVersionNumber10_7_2`）
5.  `kCFCoreFoundationVersionNumber`是一个 CoreFoundation 框架浮点常量，与对应的 Appkit 相同，可用于与 CoreFoundation 链接的所有应用程序，包括 C、Obj-C 和 Swift。它也提供了对所有 OS X 发布版本的全面枚举（例如`kCFCoreFoundationVersionNumber10_9`）
6.  `[[NSProcessInfo processInfo] operatingSystemVersionString];`是 Obj-C 中可用于 OS-X 和 iOS 应用程序的 Cocoa API。
7.  有一个资源 .plist，`/System/Library/CoreServices/SystemVersion.plist`其中包含“ProductVersion”键中的操作系统版本。NSProcessInfo 从这个文件中读取它的信息，但是你可以直接使用你选择的 PList 读取 API 来做到这一点。

有关每个选项的更多详细信息 - 请参阅上面的答案。那里有很多信息！

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2012-06-17T16:24:56.637

有[`uname(3)`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/uname.3.html)：

> 该**`uname()`**函数将标识当前系统的以 nul 结尾的信息字符串存储到由 引用的结构中**`name`**。
> 
> 该**`utsname`**结构在**`<sys/utsname.h>`**头文件中定义，并包含以下成员：
> 
> *   **`sysname`**- 操作系统实现的名称。
> *   **`nodename`**- 本机的网络名称。
> *   **`release`** - 操作系统的发布级别。
> *   **`version`** - 操作系统的版本级别。
> *   **`machine`** - 机器硬件平台。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2014-03-06T13:15:49.887

这就是我使用的：

```
NSInteger osxVersion;
if (floor(NSAppKitVersionNumber) <= NSAppKitVersionNumber10_6) {
    //10.6.x or earlier systems
    osxVersion = 106;
    NSLog(@"Mac OSX Snow Leopard");
} else if (floor(NSAppKitVersionNumber) <= NSAppKitVersionNumber10_7) {
    /* On a 10.7 - 10.7.x system */
    osxVersion = 107;
    NSLog(@"Mac OSX Lion");
} else if (floor(NSAppKitVersionNumber) <= NSAppKitVersionNumber10_8) {
    /* On a 10.8 - 10.8.x system */
    osxVersion = 108;
    NSLog(@"Mac OSX Moutain Lion");
} else {
    /* 10.9 or later system */
    osxVersion = 109;
    NSLog(@"Mac OSX: Mavericks or Later");
} 
```

在[AppKit 发行说明中推荐](https://developer.apple.com/library/mac/releasenotes/AppKit/RN-AppKit/)

如果应用程序被沙盒化，则无法读取 /System/Library/CoreServices/SystemVersion.plist

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2019-02-01T19:54:34.727

今天在 macOS 上玩的时候，`sysctl`我偶然发现`kern.osproductversion`它确实包含当前的操作系统版本。在运行 Mojave 的 Mac 上，我得到：

```
$ sysctl kern.osproductversion
kern.osproductversion: 10.14.3 
```

当然，也可以通过编程方式检索该值：

```
char str[256];
size_t size = sizeof(str);
int ret = sysctlbyname("kern.osproductversion", str, &size, NULL, 0); 
```

[这个](https://github.com/apple/darwin-xnu/commit/5bbb823c13f3ab1ab58878f96b35433a29882676?diff=split#diff-6651b0c84a045f400bc45faa9f61c9e1)对 xnu 内核代码库的提交表明这`osproductversion`是 2018 年年中最近添加的。我在 10.14.3 和 10.13.6 上成功测试了它。

总而言之，在我看来，最好的程序化、非 Cocoa 方法是检查是否`kern.osproductversion`产生有效结果，否则回退到[本答案](https://stackoverflow.com/a/11697362/4408170)`kern.osrelease`中描述的手动映射。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-06-01T01:03:43.393

`Gestalt()`是一个纯 C API。接受的答案建议使用`NSProcessInfo`但这需要Objective-C代码，如果出于某种原因需要纯C，则不能使用。也是如此`NSAppKitVersionNumber`，自 10.13.4 以来 Apple 也不再更新。可以在 C 代码中使用该常量`kCFCoreFoundationVersionNumber`，但自 10.11.4 以来此常量不再更新。在 C 中可以读取`kern.osrelease`using `sysctl`，但需要映射表或依赖当前的内核版本控制方案，因此对于未来版本不可靠，因为内核版本方案可能会更改，并且映射表无法知道未来版本。

Apple 的官方和推荐方法是阅读`/System/Library/CoreServices/SystemVersion.plist`，因为这也是`Gestalt()`获取版本号的地方，这也是`NSProcessInfo()`获取版本号的地方，这也是命令行工具`sw_vers`获取版本号的地方，甚至是新`@available(macOS 10.x, ...)`的编译器功能从中获取版本号（我深入研究了系统以了解这一点）。`#available(macOS 10.x, *)`如果即使 Swift会从那里获得版本号，我也不会感到惊讶。

从那里读取版本号没有简单的 C 调用，所以我编写了以下纯 C 代码，它只需要`CoreFoundation`本身是纯 C 框架的框架：

```
static bool versionOK;
static unsigned versions[3];
static dispatch_once_t onceToken;

static
void initMacOSVersion ( void * unused ) {
    // `Gestalt()` actually gets the system version from this file.
    // Even `if (@available(macOS 10.x, *))` gets the version from there.
    CFURLRef url = CFURLCreateWithFileSystemPath(
        NULL, CFSTR("/System/Library/CoreServices/SystemVersion.plist"),
        kCFURLPOSIXPathStyle, false);
    if (!url) return;

    CFReadStreamRef readStr = CFReadStreamCreateWithFile(NULL, url);
    CFRelease(url);
    if (!readStr) return;

    if (!CFReadStreamOpen(readStr)) {
        CFRelease(readStr);
        return;
    }

    CFErrorRef outError = NULL;
    CFPropertyListRef propList = CFPropertyListCreateWithStream(
        NULL, readStr, 0, kCFPropertyListImmutable, NULL, &outError);
    CFRelease(readStr);
    if (!propList) {
        CFShow(outError);
        CFRelease(outError);
        return;
    }

    if (CFGetTypeID(propList) != CFDictionaryGetTypeID()) {
        CFRelease(propList);
        return;
    }

    CFDictionaryRef dict = propList;
    CFTypeRef ver = CFDictionaryGetValue(dict, CFSTR("ProductVersion"));
    if (ver) CFRetain(ver);
    CFRelease(dict);
    if (!ver) return;

    if (CFGetTypeID(ver) != CFStringGetTypeID()) {
        CFRelease(ver);
        return;
    }

    CFStringRef verStr = ver;
    // `1 +` for the terminating NUL (\0) character
    CFIndex size = 1 + CFStringGetMaximumSizeForEncoding(
        CFStringGetLength(verStr), kCFStringEncodingASCII);
    // `calloc` initializes the memory with all zero (all \0)
    char * cstr = calloc(1, size);
    if (!cstr) {
        CFRelease(verStr);
        return;
    }

    CFStringGetBytes(ver, CFRangeMake(0, CFStringGetLength(verStr)),
        kCFStringEncodingASCII, '?', false, (UInt8 *)cstr, size, NULL);
    CFRelease(verStr);

    printf("%s\n", cstr);

    int scans = sscanf(cstr, "%u.%u.%u",
        &versions[0], &versions[1], &versions[2]);
    free(cstr);
    // There may only be two values, but only one is definitely wrong.
    // As `version` is `static`, its zero initialized.
    versionOK = (scans >= 2);
}

static
bool macOSVersion (
    unsigned *_Nullable outMajor,
    unsigned *_Nullable outMinor,
    unsigned *_Nullable outBugfix
) {
    dispatch_once_f(&onceToken, NULL, &initMacOSVersion);
    if (versionOK) {
        if (outMajor) *outMajor = versions[0];
        if (outMinor) *outMinor = versions[1];
        if (outBugfix) *outBugfix = versions[2];
    }
    return versionOK;
} 
```

使用 a`dispatch_once_f`而不是的原因`dispatch_once`是块也不是纯 C。完全使用的原因`dispatch_once`是系统运行时版本号无法更改，因此没有理由在单个应用程序运行期间多次读取版本号。此外，阅读它并不能保证万无一失，而且每次您的应用可能需要它时重新阅读它的成本太高。

谈论不是故障安全，即使它不太可能，阅读它当然可能会失败，在这种情况下，函数会返回`false`并且总是会返回`false`。我让你在你的应用程序代码中以有意义的方式处理这种情况，因为我不知道知道版本号对你的应用程序有多重要。如果版本号不重要，也许您可​​以解决它，否则您应该以用户友好的方式使您的应用程序失败。

**注意**
如果您只需要版本号来执行取决于系统版本的替代代码，则可能有更好的替代方法来查询您自己的版本号。[有关详细信息，请参阅此问题](https://stackoverflow.com/q/57825757/15809)。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-08-14T17:27:00.490

比赛迟到了，但我最终也在这里寻找答案。对于它的价值，也许它对其他人有用；

过去我使用命令行方法：

```
sw_vers 
```

结果是：

```
ProductName:    Mac OS X
ProductVersion: 10.13.6
BuildVersion:   17G65 
```

可以单独询问每一行（注意驼峰符号）：

```
sw_vers -productVersion
10.13.6

sw_vers -productName
Mac OS X

sw_vers -buildVersion
17G65 
```

话虽如此，感谢此处列出的所有其他解决方案...

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-08-22T17:43:09.183

//我的 Swift 两分钱（多平台）

```
#if os(iOS)
import UIKit
#elseif os(OSX)
import Cocoa
#endif

func platform() -> String {
    var systemInfo = utsname()
    uname(&systemInfo)
    let size = Int(_SYS_NAMELEN) // is 32, but posix AND its init is 256....

    let s = withUnsafeMutablePointer(to: &systemInfo.machine) {p in
        //    let s = withUnsafeMutablePointer(to: &systemInfo.nodename) {p in

        p.withMemoryRebound(to: CChar.self, capacity: size, {p2 in
            return String(cString: p2)
        })

    }
    return s
}

func AppName()->String{
    let bund = Bundle.main
    if let displayName = bund.object(forInfoDictionaryKey: "CFBundleDisplayName") as? String {
        if displayName.count>0{
            return displayName
        }
    }

    if let name = bund.object(forInfoDictionaryKey: "CFBundleName") as? String {
        return name
    }
    return "no AppName"
}

func buildVers()->String{

    let bund = Bundle.main
    let vers = bund.object(forInfoDictionaryKey: "CFBundleVersion") as! String
    return  vers
}

func AppleStoreVers()->String{

    if let version = Bundle.main.infoDictionary?["CFBundleShortVersionString"] as? String {
        return version
    }
    return "no.vers."
}

#if os(iOS)
func systemVersion()->String{
    let  v = UIDevice.current.systemVersion
    return v
}
#elseif os(OSX)
#endif 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-12-06T08:28:28.680

**macOS Catalina 及更高版本的更新**

```
20.x.x  macOS 11.X.X  BigSur
19.x.x  macOS 10.15.x Catalina
18.x.x  macOS 10.14.x Mojave
17.x.x  macOS 10.13.x High Sierra
16.x.x  macOS 10.12.x Sierra
15.x.x  OS X  10.11.x El Capitan
14.x.x  OS X  10.10.x Yosemite
13.x.x  OS X  10.9.x  Mavericks
12.x.x  OS X  10.8.x  Mountain Lion
11.x.x  OS X  10.7.x  Lion
10.x.x  OS X  10.6.x  Snow Leopard
 9.x.x  OS X  10.5.x  Leopard
 8.x.x  OS X  10.4.x  Tiger
 7.x.x  OS X  10.3.x  Panther
 6.x.x  OS X  10.2.x  Jaguar
 5.x    OS X  10.1.x  Puma 
```

# javascript - Pixastic 模糊缓动？

> ID：11072807
> 
> 赞同：1
> 
> 时间：2012-06-17T16:09:46.397
> 
> 标签：javascript, jquery, pixastic

是否可以将缓动应用于 pixastic blurfast 函数？

我有一个全屏背景图像，我想在单击按钮时模糊它，因为我在它上面覆盖了更多内容。

我目前正在这样做（使用 jquery）：

```
$(".bg").pixastic("blurfast", {amount:1}); 
```

这对于模糊效果很好，但它会立即发生。是否有可能通过某种缓和来使这种效果淡出？

我以前在 Flash 中做过这种效果，但这是我在 javascript 中的第一次尝试。

如果可能在 pixastic 以外的其他东西中使用，我愿意使用不同的 js 库

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:42:52.337

可能吗？当然。

就像可以对几乎任何数值进行缓动一样...问题是 pixastic 不直接支持缓动，因此您正在考虑自己构建缓动函数，这很容易。

一旦你构建了缓动函数（我不会尝试为你编写，因为有许多缓动函数，而且我不知道你在寻找什么类型的效果），只需将生成的模糊值输入 pixastic。

例如，创建一个这样的函数：

```
function myEasingFunc(percent){

    // Your easing code here

    return result;
} 
```

然后使用递增的百分比值重复调用此函数：

```
for(i==0;i<100;i++){
   var amount=myEasingFunc(i);
   $("#myimage").pixastic("blurfast", {amount:amount});
} 
```

显然，这不是您直接想要的，因为步骤之间没有延迟，并且有 100 个 1% 增量的步骤是浪费的，但它说明了该过程。

选项不断地进行......而不是根据时间来确定模糊百分比，就像您在想的那样，您也可以根据从视野之外飞入框的文本的位置来设置它，就像一个例子一样。

我不知道这是否是您正在寻找的东西，但我希望它对某人有所帮助，无论如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T15:32:17.087

方法我们使用它是这样的：

```
var wrap  = $(parent_element);
var img = wrap.find('.img-to-blur');
var canvas = img.clone().addClass('blur').css('opacity', '').prependTo(wrap);

img.fadeOut();
canvas.fadeIn(); 
```

这对 CPU 来说比在 javascript 中重新计算每个模糊级别要好。

注意：代码更像是一个伪代码，它可能不是 CTRL+INSERT & SHIFT+INSERT 准备好的。

# ubuntu - 触摸：无法触摸“test.list”：权限被拒绝

> ID：11072808
> 
> 赞同：0
> 
> 时间：2012-06-17T16:09:53.213
> 
> 标签：ubuntu, ubuntu-12.04

我是 ubuntu 12.04 LTS 的新手。我想在我的 etc/apt/sources.list.d/
文件夹中创建列表文件，但它写道

```
touch: cannot touch `test.list': Permission denied 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T16:18:31.880

因此，您无权在文件夹中写入。如果你运行`ls -l /etc/apt/`，你会看到类似的东西。

```
drwxr-xr-x 2 root root 4096 2012-01-16 22:23 sources.list.d 
```

读`drwxr-xr-x`为 3 个三元组，带有一个领先的目录指示符`d rwx r-x r-x`。

*   `d`只是意味着它是一个目录而不是一个文件。
*   第一个`rwx`指示所有者的权限（稍后）。在这种情况下，所有权利（授予`r`ead、`w`rite 和 e `x`ecute）
*   第二个三元`r-x`组是目录所属组的权限。你看写作是被禁止的。
*   最后一个三元组告诉您为不是所有者或组中的每个人设置了哪些权限。您还看到再次禁止写作。

那么谁是所有者以及它与哪些组相关联？您可以从`root root`其中以明显的形式获得所有者和组`owner group`。

这么久的背景。当然，您可以修改权限以允许系统上的每个人写入或将组（和/或）所有者更改为您，但通常最好`sudo`在您的命令之前使用 put 作为前奏，`root`以便在短时间内获得权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T16:13:59.090

您需要拥有 root 权限才能执行此操作。试试`sudo touch /etc/apt/sources.list.d/test.list`。

# javascript - 动态 DOM 元素创建

> ID：11072811
> 
> 赞同：1
> 
> 时间：2012-06-17T16:10:37.833
> 
> 标签：javascript, jquery, dom

我应该使用 jQuery 向表中添加行：

```
 <table class="table">
      <tbody id="dh-values">
      </tbody>
    </table> 
```

我编写了以下代码：

```
 function displayHash(fieldName) {
    $('#dh-values').append('<tr></tr>').append('<td id="dh-'+fieldName+'">'+$('#'+fieldName).val()+'</td>').append('<td id="dh-'+fieldName+'-h">'+hex_sha1($('#'+fieldName).val())+'</td>');
  }; 
```

但它看起来很糟糕。有什么办法可以简化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:29:30.943

[http://jsbin.com/exopoc/edit#javascript,html,live](http://jsbin.com/exopoc/edit#javascript,html,live)

```
function displayHash(fieldName) {

  var cont = '<tr><td id="dh-'+ fieldName +'">'+ fieldName +'</td> <td id="dh-'+ fieldName +'-h">'+ fieldName +'</td></tr>';
  $(cont).appendTo('#dh-values');

}

displayHash('12345678'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:23:03.440

Esalija、amnotiam 等人的综合答案

[演示](http://jsfiddle.net/mplungjan/wRTHs/)

```
function displayHash(fieldID) {
    var val = $('#'+fieldID).val();
    var valSha = hex_sha1(val);
    $("<tr>").appendTo("#dh-values")
       .append('<td id="dh-'+fieldID+'">'+val+'</td>')
       .append('<td id="dh-'+fieldID+'-h">'+valSha+'</td>');
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T17:31:32.380

您应该使用[客户端模板引擎](https://developer.mozilla.org/en/JavaScript_templates)来分离 html 结构和业务逻辑，以便在 javascript 中操作要与模板绑定的数据。

# installation - Wix 补丁错误 - 您尝试在不可用的网络资源上使用的功能

> ID：11072814
> 
> 赞同：1
> 
> 时间：2012-06-17T16:11:11.887
> 
> 标签：installation, wix, patch

我们正在使用 WIX Installer 进行应用程序部署。我们正在使用 wix 生成补丁。当我们尝试卸载补丁时，出现以下错误

“您尝试在不可用的网络资源上使用的功能”

它期待以前的版本 MSI。

我们需要设置哪个属性来维护基线缓存。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T06:28:59.477

发生这种情况是因为路径卸载过程需要修复原始安装才能将其恢复到原始状态。

一个可能的解决方案是：

*   使用 Orca 打开补丁 PCP 文件
*   将 SEQUENCE_DATA_GENERATION_DISABLED 属性设置为 0 并保存更改
*   使用修改后的 PCP 重建补丁

这将使补丁程序自动生成补丁程序序列信息，并且补丁程序安装不再需要原始 MSI。

如果您无权访问 PCP 文件或仍需要原始 MSI，则很可能安装的文件在复制到目标计算机后被修改或删除。在这种情况下，有两种解决方案：

*   提示时提供原始 MSI

或者

*   确保您的应用程序或其他进程未修改已安装的文件

# c++ - 按类型实例化 C++ lambda

> ID：11072815
> 
> 赞同：21
> 
> 时间：2012-06-17T16:11:16.507
> 
> 标签：c++, lambda, c++11, instantiation

我想要一种从函数中制作函子的方法。现在我尝试通过 lambda 函数包装函数调用并稍后实例化它。但是编译器说 lambda 构造函数被删除了。那么有没有办法编译这段代码呢？或者也许是另一种方式？

```
#include <iostream>  

void func()
{
    std::cout << "Hello";
}

auto t = []{ func(); };
typedef decltype(t) functor_type;

template <class F>
void functor_caller()
{
    F f;
    f();
}

int main()
{
    functor_caller<functor_type>();
    return 0;
} 
```

现在我得到这样的编译器错误：

```
error: use of deleted function  '<lambda()>::<lambda>()'

error: a lambda closure type has a deleted default constructor 
```

在我看来，唯一的方法是使用宏：

```
#define WRAP_FUNC(f) \
struct f##_functor       \
{                       \
    template <class... Args >                             \
    auto operator()(Args ... args) ->decltype(f(args...)) \
    {                                                     \
        return f(args...);                                \
    }                                                     \
}; 
```

然后

```
WRAP_FUNC(func); 
```

然后（主要）

```
functor_caller<func_functor>() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T19:35:57.607

代码没有意义。想象一下，你有一个像这样的捕获 lambda：

```
{
    int n = 0;
    auto t = [&n](int a) -> int { return n += a; };
} 
```

默认构造类型的对象可能意味着什么`decltype(t)`？

正如@Matthieu 建议的那样，您可以将 lambda 包装到一个`function`对象中：

```
std::function<int(int)> F = t; 
```

或者您可以直接在 lambda 类型（或任何可调用实体）上模板您的调用站点：

```
template <typename F>
int compute(int a, int b, F f)
{
    return a * f(b);  // example
} 
```

用法：`int a = 0; for (int i : { 1, 3, 5 }) { a += compute(10, i, t); }`

如果可能的话，第二种风格更可取，因为转换`std::function`为非平凡的、可能昂贵的操作，通过结果对象的实际函数调用也是如此。但是，如果您需要存储异构可调用实体的统一集合，那么`std::function`可能是最简单和最方便的解决方案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-09-29T13:08:46.793

Lambda 没有默认构造函数。曾经。他们有时可以访问的唯一构造函数是（取决于它们捕获的内容）复制和/或移动构造函数。

如果你创建一个没有公共默认构造函数的仿函数，你会得到同样的错误。

`constexpr`在 C++17 中，您可以使用lambda 和`operator+`衰减函数指针来解决这个问题。带有函数指针并调用它的类型很容易使用`auto`模板参数。

在 C++11 中，你得有点 hacky。

```
template<class F>
struct stateless_lambda_t {
  static std::aligned_storage_t< sizeof(F), alignof(F) >& data() {
    static std::aligned_storage_t< sizeof(F), alignof(F) > retval;
    return retval;
  };
  template<class Fin,
    std::enable_if_t< !std::is_same< std::decay_t<Fin>, stateless_lambda_t >{}, int> =0
  >
  stateless_lambda_t( Fin&& f ) {
    new ((void*)&data()) F( std::forward<Fin>(f) );
  }
  stateless_lambda_t(stateless_lambda_t const&)=default;
  template<class...Args>
  decltype(auto) operator()(Args&&...args)const {
    return (*static_cast<F*>( (void*)&data() ))(std::forward<Args>(args)...);
  }
  stateless_lambda_t() = default;
};
template<class F>
stateless_lambda_t<std::decay_t<F>> make_stateless( F&& fin ) {
  return {std::forward<F>(fin)};
} 
```

现在我们可以：

```
auto t = make_stateless([]{ func(); }); 
```

并且您的代码有效。

A`static_assert`或 SFINAE`F`实际上是一个空类型可能是个好主意。你知道，为了质量。

使用 C++14 特性可以用手动`decltype`和 spewing`typename`和`::type`关键字来代替。这个答案最初是为一个 C++14 问题编写的，该问题作为这个问题的副本关闭。

[活生生的例子](http://coliru.stacked-crooked.com/a/e6140856e52d3f11)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-30T23:57:15.470

我们可以假设 lambda 将始终为空，因此，我们可以从另一个空类型进行强制转换，因为它们都具有相同的内存布局。因此，我们构建了一个包装类，该类制作了一个默认的可构造函数对象：

```
template<class F>
struct wrapper
{
    static_assert(std::is_empty<F>(), "Lambdas must be empty");
    template<class... Ts>
    auto operator()(Ts&&... xs) const -> decltype(reinterpret_cast<const F&>(*this)(std::forward<Ts>(xs)...))
    {
        return reinterpret_cast<const F&>(*this)(std::forward<Ts>(xs)...);
    }
}; 
```

现在添加了一个静态断言以确保 lambda 始终为空。这应该总是如此（因为它需要衰减到函数指针），但标准并没有明确保证它。所以我们使用断言至少可以捕捉到 lambdas 的疯狂实现。然后我们只是将包装类转换为 lambda，因为它们都是空的。

最后可以像这样构造 lambda：

```
template <class F>
void function_caller()
{
    wrapper<F> f;
    f();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T17:01:32.673

不。

但是我相信可以复制 lambda，因此您`functor_caller`可以使用参数来初始化其属性。

尽管如此，我不会重新发明轮子，`std::function`而是使用它。

# c++ - 更改“模板<...>”行中模板参数的顺序是否会导致重复定义或歧义？

> ID：11072817
> 
> 赞同：1
> 
> 时间：2012-06-17T16:11:27.767
> 
> 标签：c++, templates

我有一个与[Edge-case 相关的问题：当（仅）在专业化中反转模板参数的顺序时，是否可以达到非专业化版本？](https://stackoverflow.com/questions/11071415/edge-case-when-only-reversing-order-of-template-parameters-in-specialization#11071670).

这是一个理论问题，涉及可能被认为写得不好的代码。但是，我想彻底了解模板语法。

假设两个模板特化*仅*在行内模板参数的顺序上有所不同`template<...>`，如下所示：

```
#include <iostream>

// Primary template
template<typename T1, typename T2, typename T3>
class A
{};

// Specialization #1
template<typename T2, typename T3>
class A<int, T2, T3>
{};

// Specialization #2
// Differs only in order of parameters in the "template<...>" line
template<typename T3, typename T2>
class A<int, T2, T3>
{};

int main()
{
    A<int, int, int> a; // <-- Compiler error: Ambiguous template specializations
    return 0;
} 
```

在 Visual Studio 2010 编译器中，错误涉及不明确的模板专业化：`'A<T1,T2,T3>' : more than one partial specialization matches the template argument list. could be 'A<int,T2,T3>' or 'A<int,T2,T3>'`.

特别是，错误 is *not* `'A<int,T2,T3>' : class template has already been defined`，这是当第二个特化与第一个特化是逐字符相同时产生的错误（即，模板参数的顺序不颠倒，并且读取`template<typename T2, typename T3>`，就像在特化 #1 中一样）。

但是，我认为`template<...>`模板专业化中的行中列出的参数顺序**没有区别**。具体来说，我认为特化中的`template<...>`行的目的*只是*将出现在特化类型名称 ( ) 中的标记识别`A<int, T2, T3>`为语法上有效的模板参数，而不是拼写错误。根据这个推理，`template<...>`模板特化的行中参数的顺序应该**没有区别，并且两个****仅**在这些参数的顺序上逐字符不同的模板特化应该被视为重复定义，而不是模棱两可的特化。

如果我是正确的，那么 Visual Studio 2010 编译器是正确的，因为它在这种情况下会报告错误，但不正确的是它会将错误标识为模棱两可的专业化，而不是多重定义的专业化。

我对么？`template<...>`模板特化行中模板参数的顺序是否*没有*区别，因此两个相同的模板特化应该被视为相同模板特化的冗余定义，而不是两个不同但模棱两可的，模板专业化？

如果我不正确，那么上面代码中的两个专业化确实是*不同*的（即，不是多重定义的）。如果是这样，有人可以解释为什么它们不同以及客户端代码如何证明这种差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:23:57.900

部分特化的标识是传递给其模板的参数列表。模板类型参数名称表示特定的依赖类型，其标识包括它们在模板参数列表中的位置和模板参数列表的嵌套深度（即，如果成员模板是成员，则成员模板的列表比其封闭模板嵌套多一层类模板）。

这是有道理的，因为您需要处理两个不同的函数模板，它们彼此重载并且仅在模板参数顺序上有所不同。它们的实例化行为是不同的，因为它们的位置直接对应于函数模板调用的模板参数列表中的相应参数。

如果你重新排列它们的位置，参数列表会变得不同，因为不同的类型作为参数传递。所以你没有重新定义部分专业化。

# algorithm - 衡量两个列表之间的相似性

> ID：11072821
> 
> 赞同：6
> 
> 时间：2012-06-17T16:12:03.807
> 
> 标签：algorithm

我试图找出一种算法来衡量两个列表之间的相似性，每个列表都有*n 个*不同的元素。*这两个列表基本上是相同n 个*元素的不同排列。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T16:35:56.917

一种方法是计算编辑距离，即将一个列表转换为另一个列表的最小修改步骤数。这基本上与 Levenshtein 或 Damerau-Levenshtein 距离相同，但不是一串字符，而是比较元素列表。

[http://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)

# c# - 有没有可能将 .NET 与 PHP 连接起来？

> ID：11072822
> 
> 赞同：1
> 
> 时间：2012-06-17T16:12:12.993
> 
> 标签：c#, php, .net

有没有可能将 .NET 应用程序与 PHP 连接起来？我的意思是，PHP 会将 XML 或 JSON 文件返回给 .NET，如果数据是 XML，.NET 将使用 LINQ。如果有可能，我该怎么做？

有什么例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:25:49.507

您可以创建一个返回 JSON/XML 的 PHP 应用程序。然后在您的 dot net 应用程序中，您可以访问它（与访问 web 服务/REST 服务的方式相同）。您可以使用`HttpWebRequest`该类来访问这样的服务。

```
string restURL="www.yoursite.com/yourphpwebservice.php";
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(restURL);
request.Method = "GET";
request.Accept = "text/xml";
request.ContentType = "text/xml";

response = (HttpWebResponse)request.GetResponse();              
if (response.StatusCode == HttpStatusCode.OK)
{
    using (WebResponse response2 = request.GetResponse())
    using (Stream stream = response2.GetResponseStream())
    {                       
        XElement myXel = XElement.Load(stream);
        if (myXel != null)
        {
          //now you can access the XML elements with LINQtoXML
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:19:04.017

如果您通过 PHP 返回 XML 文件，则可以使用 .NET`XDocument`类：

```
XDocument xdoc = XDocument.Load("data.xml");

var query = from xml in xdoc.Descendants("node")
       select new { 
           Attribute1 = lv1.Attribute("Attribute1").Value,
           Attribute2 = lvl1.Attribute("Attribute2").Value
       }; 
```

[http://msdn.microsoft.com/en-us/library/bb299195](http://msdn.microsoft.com/en-us/library/bb299195)

# c# - 检测用户何时打开 word 文档以及何时输入（在 c# 中）

> ID：11072829
> 
> 赞同：3
> 
> 时间：2012-06-17T16:13:12.993
> 
> 标签：c#, office-interop, keyboard-events

我想做以下事情：每当打开一个word文档时，我需要以某种方式保存它，然后如果用户开始输入它，我想保存文档被编辑的时间。我只是在第一阶段，我似乎无法检测用户何时打开文档。我尝试使用 Microsoft.Office.Interop.Word，但是，除非用户打开文档，否则我不想启动 word 应用程序。但是，当我想初始化 Microsoft.Office.Interop.Word.Application 时，这是我认为可能的唯一方法。有没有办法通过使用 Microsoft.Office.Interop.Word API 来检测用户打开文件的事件？

我尝试了以下方法（显然它不起作用，因为它只是打开了一个 word office 应用程序）

```
using Word = Microsoft.Office.Interop.Word;
Word.Application oWord = new Word.Application(); 
oWord.Visible = true;
oWord.DocumentChange += new Word.ApplicationEvents4_DocumentChangeEventHandler(oWord_DocumentChange);
...

private void oWord_DocumentChange()
{
   Console.WriteLine("DocumentChange");
} 
```

另外，我想也许使用 Microsoft.Office.Interop.Word.Document，但不能。我开始开发自己的方法，但它似乎只是一种浪费，因为这个 api 已经构建。任何帮助都会很棒..谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T16:54:49.177

您是否已经尝试过创建[应用程序级别的插件](http://msdn.microsoft.com/en-us/library/cc442946.aspx)。该加载项应具有检测文档的第一次和最后一次更改所需的所有事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:11:57.197

也许您可以经常检查 Word 的打开实例，如果找到，则使用互操作来获取该实例。

您可能可以使用[FindWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx)或[EnumWindows](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497%28v=vs.85%29.aspx)之类的东西来检查 Word 的实例（或者在 .Net 中可能有一些内置的方法，我现在不记得了），然后也许可以`GetObject`用来获取实例。这个[链接](http://support.microsoft.com/kb/288902)描述了`GetObject`vs `CreateObject`。

# algorithm - 具有多个渐变的 SVG 透明度

> ID：11072830
> 
> 赞同：5
> 
> 时间：2012-06-17T16:13:34.360
> 
> 标签：algorithm, html, graphics, svg, graph-algorithm

我正在尝试找出 4 向渐变填充的最佳模型。我最新的模型是[这个](http://jsfiddle.net/BfPZW/1/)小提琴：

```
<svg height="360" width="400" xmlns="http://www.w3.org/2000/svg" version="1.1">
  <defs>
    <clipPath id="C">
      <path d="M 100 200 L 300 58 L 400 250 L 300 341 Z" />
    </clipPath>
    <radialGradient id="G1" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
      <stop offset="0%"   style="stop-color:rgb(255,0,0);    stop-opacity:1" />
      <stop offset="100%" style="stop-color:rgb(128,128,64); stop-opacity:0" />
    </radialGradient>
    <radialGradient id="G2" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
      <stop offset="0%"   style="stop-color:rgb(0,255,0);    stop-opacity:1" />
      <stop offset="100%" style="stop-color:rgb(128,128,64); stop-opacity:0" />
    </radialGradient>
    <radialGradient id="G3" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
      <stop offset="0%"   style="stop-color:rgb(0,0,255);    stop-opacity:1" />
      <stop offset="100%" style="stop-color:rgb(128,128,64); stop-opacity:0" />
    </radialGradient>
    <radialGradient id="G4" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
      <stop offset="0%"   style="stop-color:rgb(255,255,0);  stop-opacity:1" />
      <stop offset="100%" style="stop-color:rgb(128,128,64); stop-opacity:0" />
    </radialGradient>
  </defs>
  <ellipse cx="100" cy="200" rx="200" ry="200" clip-path="url(#C)" fill="url(#G1)" />
  <ellipse cx="300" cy="58"  rx="200" ry="200" clip-path="url(#C)" fill="url(#G2)" />
  <ellipse cx="400" cy="250" rx="200" ry="200" clip-path="url(#C)" fill="url(#G3)" />
  <ellipse cx="300" cy="341" rx="200" ry="200" clip-path="url(#C)" fill="url(#G4)" />
</svg> 
```

结果是：

![在此处输入图像描述](../Images/3d24668ba41907f87f55b6ce5f07b4f5.png)

但是当我改变`<ellipse>`元素的顺序时（见[这个](http://jsfiddle.net/dq9PH/1/)小提琴）：

```
 <ellipse cx="100" cy="200" rx="200" ry="200" clip-path="url(#C)" fill="url(#G1)" />
  <ellipse cx="300" cy="58"  rx="200" ry="200" clip-path="url(#C)" fill="url(#G2)" />
  <ellipse cx="300" cy="341" rx="200" ry="200" clip-path="url(#C)" fill="url(#G4)" />
  <ellipse cx="400" cy="250" rx="200" ry="200" clip-path="url(#C)" fill="url(#G3)" /> 
```

结果更改为：

![在此处输入图像描述](../Images/e04339a3d5a221823b6564ae54793637.png)

这意味着透明度的计算方式不同。无论元素的顺序如何，我都希望始终以相同的结果计算透明度。这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T16:33:35.067

在该表面上的任何给定点，通过考虑覆盖该点的所有元素，按照它们的堆叠顺序计算最终颜色。SVG 中始终存在堆叠顺序，您不能将所有渐变作为一个整体。

真正的 4 向渐变必须在每个点具有一种颜色，该颜色混合的每种颜色的量等于在该特定点从颜色源到形状边缘的距离百分比。但这无法通过堆叠层获得，原因如下：

假设您有从颜色到透明度的均匀过渡的图层，并且图层顺序是红色，绿色，蓝色，黄色，底部是红色，顶部是黄色，那么中间的一个点将大致具有

```
 50% yellow + 50% of the color below 
```

变成

```
(50% yellow + 50%(50% blue + 50% of the color below))
->
(50% yellow + 50%(50% blue + 50%(50%green + 50%(50% red +50% background)))) 
->
(50%yellow + 25%blue + 12.5%green + 6.25%red) 
```

这远非 50% 的混合。

您可以尝试调整每一层变得透明的突然程度，知道最终的透明度不仅仅取决于该层的透明度，还取决于它上面的层的不透明程度。所以，如果你想在中间获得每层的 25%，那么你必须解方程：

```
(y% yellow + (100-y)%(b% blue + (100-b)%(g% green + (100-g)%(r% red))))
=
(25% yellow + 25% blue + 25% green + 25% red) 
```

虽然这个方程很容易求解（y=25, b=33.3, g=50, r=100），但方程必须站在表面上的每个点上，我怀疑你能用简单的径向得到一个有效的答案或线性渐变。

# testing - 回归测试是白盒测试吗？

> ID：11072832
> 
> 赞同：0
> 
> 时间：2012-06-17T16:13:56.903
> 
> 标签：testing, regression

**回归测试与白盒测试**

我使用了搜索引擎和维基百科，但无法回答我的问题：

***回归测试**是**白盒测试***吗*？*

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T16:24:09.697

它不一定是。

黑盒测试*不了解*系统内部结构：它只是测试功能。

回归测试检查以前工作的功能是否在新版本中被破坏。

“回归测试”可以使用“白盒”（我们“了解”内部结构）或“黑盒”（我们*仅*测试可见功能）方法。或者这两种方法的任意组合。*

# jquery - JqG rid遍历行数据和单元格数据

> ID：11072835
> 
> 赞同：1
> 
> 时间：2012-06-17T16:14:09.700
> 
> 标签：jquery, jqgrid

我计划生成整个网格数据的自定义 XML，我需要遍历每一行和网格的每个单元格。

如下所示，很容易遍历行。我面临的唯一问题是遍历单元格，因为 getRowData 返回键值对而不是数组。

```
var ids = jQuery("#jgrid").jqGrid('getDataIDs');
//traverse the rows
for (var i = 0; i < ids.length; i++) {
    var rowdata = $("#jgrid").getRowData(ids[i]);
    var res = "";
    // Traverse the cells which does not work
    for (var j = 0; j < rowdata.length; j++) {
        ...
        ....logic to generate Xml element for each cell
    }
} 
```

我不想硬编码列名，因为我计划将它用于所有网格。所以解决方案必须是通用的。

有任何想法吗 ？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T07:40:17.437

枚举网格中所有数据的最简单方法之一，您可以使用[rows](http://www.w3schools.com/jsref/coll_table_rows.asp)和[cells](http://www.w3schools.com/jsref/coll_table_cells.asp)来实现。重要的是要理解，jqGrid 使用 HTML`<table>`来表示网格的数据并`<tr>`表示行。jQuery 对象是 DOM 元素的包装器。例如`jQuery("#jgrid")[0]`实现[HTMLTableElement](http://www.w3.org/TR/REC-DOM-Level-1/level-one-html.html#ID-64060425)的 DOM 元素。DOM 被所有的网络浏览器支持，所以你可以安全地使用它。jqGrid 在内部使用[HTMLTableElement](http://www.w3.org/TR/REC-DOM-Level-1/level-one-html.html#ID-64060425)，[HTMLTableRowElement](http://www.w3.org/TR/REC-DOM-Level-1/level-one-html.html#ID-6986576)和[HTMLTableCellElement](http://www.w3.org/TR/REC-DOM-Level-1/level-one-html.html#ID-82915075)真的永久。如果您检查[getDataIDs](https://github.com/tonytomov/jqGrid/blob/v4.4.0/js/grid.base.js#L2629-2644)和[getRowData的源代码](https://github.com/tonytomov/jqGrid/blob/v4.4.0/js/grid.base.js#L2764-2800)您在当前代码中使用它，您将看到 jqGrid 密集使用`rows`DOM 属性`<table>`。

在[asnwer](https://stackoverflow.com/a/7084920/315935)和[另一个](https://stackoverflow.com/a/6575634/315935)中，您将找到枚举网格数据的代码示例。

一般来说，枚举包括

```
var $grid = jQuery("#jgrid"), rows = $grid[0].rows, cRows = rows.length,
    iRow, rowId, row, cellsOfRow;

for (iRow = 0; iRow < cRows; iRow++) {
    row = rows[iRow];
    if ($(row).hasClass("jqgrow")) {
        cellsOfRow = row.cells;
        // row represent the row with cellsOfRow.length cells.
        // So one can use for loop with iCol between 0 and cellsOfRow.length
        // cellsOfRow[iCol] represent the cell with the index iCol
        // and $(cellsOfRow[iCol]).text() - the text of the cell
    }
} 
```

# macos - 接收窗口通知

> ID：11072843
> 
> 赞同：0
> 
> 时间：2012-06-17T16:15:36.800
> 
> 标签：macos, cocoa

我`NSWindow`在 Interface Builder 中进行了设置。我已将 class of 设置`File's Owner`为 my并将控制器的属性`NSWindowController`链接到 my . 我的控制器实现.`window``NSWindow``NSWindowDelegate`

现在，在我的控制器中，我添加了以下内容：

```
- (void)windowDidLoad
{
    [super windowDidLoad];

    [self.window setDelegate:self];
}

- (void)windowDidBecomeMain:(NSNotification *)notification
{
    NSLog(@"Did become main.");
} 
```

仍然，`-windowDidBecomeMain:`不叫。有人知道为什么是这样吗？

**编辑**：

试图从`AppDelegate`启动时显示一个窗口。主笔尖（在 中声明`Info.plist`）仅包含一个菜单项，该菜单项链接到`AppDelegate`. 在应用程序委托中，我在状态栏上显示一个图标，当单击此图标时，我会从主 nib 显示菜单。在应用程序委托中，我还想显示一个窗口，该窗口应该分配一个窗口控制器来处理逻辑。我相信当这工作时，我会收到我的窗口通知。

现在，下面的代码没有显示窗口，我不知道为什么。

```
DemoWindowController *dwc = [[DemoWindowController alloc] initWithWindowNibName:@"DemoWindowController"];
[dwc showWindow:self]; 
```

请注意，这`self`是应用程序委托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:32:35.020

我怀疑您的问题是由于您的窗口控制器实际上不是 nibs 文件所有者的对象。

当您在界面构建器中更改类时，您会告诉它哪些出口和操作可用（这就是您能够拖动到窗口出口的原因），但您仍然负责自己传递这个对象。

对于非基于文档的应用程序，您将拥有一个调用`NSApplicationMain`. 这基本上是查找并加载在 info.plist 文件中指定的窗口笔尖，并将当前`NSApplication`实例作为文件所有者传递给该笔尖（因此，即使您将类类型更改为`NSWindowController`，传入的对象也是实际上是 NSApplication 类型）。

解决问题的最简单方法是暂时摆脱窗口控制器（因为它实际上还没有做任何事情）。

您应该`-windowDidBecomeMain:`在您的应用程序委托中实现该方法。然后 Ctrl+从您的窗口拖动到您的 appDelegate 以将其设置为窗口的代表以获取您的通知。

**更新**

回答您关于`WindowController`提防以下两个问题的问题：

1.  您正在您的`applicationDidFinishLaunching:`方法中创建窗口控制器变量 (dwc)。当您离开带有窗口的方法时，它就会被释放。创建一个实例变量来代替窗口控制器。
2.  确保您的第二个窗口 nib 的文件所有者设置为 NSWindowController（或您的窗口控制器类型），并且它的窗口出口连接到 nib 文件中的窗口。

您的窗口现在应该显示。

# apache - 如何使用 Apache http 代理到两个不同的 tomcat 服务器？

> ID：11072847
> 
> 赞同：0
> 
> 时间：2012-06-17T16:16:19.793
> 
> 标签：apache, tomcat, proxy

我有 apache httpd，我想代理到两个不同的 tomcat 服务器。

我看到了这个：http: [//tomcat.apache.org/connectors-doc-archive/jk2/proxy.html](http://tomcat.apache.org/connectors-doc-archive/jk2/proxy.html)

但这仅适用于一个 tomcat 服务器。如果除了运行在 8080 上的 tomcat 之外，我还有一台运行在 8081 上的服务器怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:19:46.710

[使用mod_proxy_balancer](http://httpd.apache.org/docs/2.2/mod/mod_proxy_balancer.html)有一种更简单的方法来设置负载平衡。只需在平衡器列表下列出 tomcat 服务器，然后将该平衡器放在您的`ProxyPass`：

```
<Proxy balancer://mycluster>
    BalancerMember http://tomcat1:8080/
    BalancerMember http://tomcat2:8081/
</Proxy>
ProxyPass /test balancer://mycluster 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T18:57:36.517

Apache httpd 有两个开箱即用的选项，用于代理任意数量的后端 Tomcat 实例：

1.  `mod_proxy_http`
2.  `mod_proxy_ajp`

它们的配置相同，只是前者使用 HTTP 协议进行通信，后者使用 AJP 协议和以开头的 URL`ajp://`而不是`http://`后端服务器。两者都可以以相同的方式配置为负载平衡、故障转移等。`/app1`您可以通过为单独的 URL 空间（例如-> Tomcat1 和-> Tomcat2）提供单独的代理配置来代理完全独立的 Tomcat 实例（即没有负载平衡：只是单独的后端），`/app2`或者您可以配置两个（或更多）后端实例用于负载平衡等

具体来说，请查看以下 httpd 配置指令的文档：

```
<Proxy>
BalanceMember
ProxyPass
ProxyPassReverse 
```

您可以在此处找到所有这些的文档：

1.  [http://httpd.apache.org/docs/2.2/mod/mod_proxy.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)（一般）
2.  [http://httpd.apache.org/docs/2.2/mod/mod_proxy_http.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy_http.html) (HTTP)
3.  [http://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html) (AJP)
4.  [http://httpd.apache.org/docs/2.2/mod/mod_proxy_balancer.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy_balancer.html)（负载平衡器）

如果你想使用 AJP 协议并且你有更复杂的配置需求，你也可以使用`mod_jk`( *not* `mod_jk2`，这是一个老的、死的、被遗弃的、完全不相关的项目，现在)。`mod_jk`您可以在 Tomcat 网站上找到更多信息：http: [//tomcat.apache.org/connectors-doc/](http://tomcat.apache.org/connectors-doc/)

`mod_jk`与`mod_proxy_ajp`.

您在原始帖子（来自旧文档）中提到的（简短）文档`mod_jk2`指向 Apache httpd`mod_proxy_ajp`和`mod_proxy_balancer`模块（尽管它指向不稳定的 httpd 2.1，这是编写文档时的前沿）。你走在正确的轨道上：你只需要继续阅读。您绝对可以使用此处描述的任何模块代理任意数量的 Tomcat 后端实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T18:10:13.077

您可以在第三台服务器上安装 HAProxy，这将作为它们的 LB，或者您可以在其中任何一台服务器上安装 HAProxy，然后进行以下配置。

安装 HAProxy（如果您正在运行 Ubuntu/Debain 发行版）

```
 $ sudo apt-get install haproxy
  # Setup config file in /etc/haproxy/haproxy.cnf per requirement
  # change /etc/default/ to Enabled = 1 and restart haproxy service 
```

设置后在配置中执行以下模块：

```
$ sudo vim /etc/haproxy/haproxy.cfg

global
        maxconn 4096
        user haproxy
        group haproxy
        daemon

defaults
        log     global
        mode    http
        option  httplog
        option  dontlognull
        retries 3
        option  redispatch
        maxconn 2000
        contimeout      5000
        clitimeout      50000
        srvtimeout      50000

listen webcluster *:80
        mode    http
        stats   enable
        stats   auth us3r:passw0rd
        balance roundrobin
        option httpchk HEAD / HTTP/1.0
        option forwardfor
        cookie LSW_WEB insert
        option httpclose
        server web01 192.168.0.1:8080 cookie LSW_WEB01 check
        server web02 192.168.0.2:8081 cookie LSW_WEB02 check 
```

完成后，通过以下方式重新启动 HAProxy 服务：

```
$ sudo service haproxy restart 
```

这里 192.168.0.1 和 192.168.0.2 可以是您的两台服务器，一台可以在 8080 端口上运行，另一台可以在 8081 上运行。

参考。发布：[http](http://www.leaseweblabs.com/2011/07/high-availability-load-balancing-using-haproxy-on-ubuntu-part-1/) ://www.leaseweblabs.com/2011/07/high-availability-load-balancing-using-haproxy-on-ubuntu-part-1/ 如果您使用谷歌搜索如何设置，您还可以找到在线帮助如果您不使用 Ubuntu/Debain，则在您的 linux 发行版上使用 haproxy。但是，是的，您可以押注它，因为它是经过验证的工作工具。

# jquery - jquery将参数传递给自定义验证函数

> ID：11072851
> 
> 赞同：0
> 
> 时间：2012-06-17T16:16:36.147
> 
> 标签：jquery

我编写了一个自定义方法来验证价格是否有效。例如。没有字母等。因此我写了一个自定义方法。但我不知道如何传递价值。

方法：

```
function checkIsPriceValid(input)
{

   alert(input);
    return false;
} 
```

表单验证

```
$(function () { 
jQuery.validator.addMethod("checkIsPriceValid", function (value, element) {
  return checkIsPriceValid();
  //check whether checkbox dist and algo is checked
}, "Invalid number");  

$("#addProductForm").validate({
  errorPlacement: function (error, element) {
    //error.appendTo(element.prev());
    error.insertAfter(element);
  },
  rules: { 

productName: { 
  required: true

},
productCategory:{ 
  required: true

},
productDescription: {
    required: true
},
productOrginalPrice:{
    required: true,
    checkIsPriceValid: this.val()
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:37:26.383

您在 中使用的名称`addMethod`是完全任意的，不必匹配表单中的任何内容。

首先需要将至少一个参数传递给`checkIsPriceValid`方法内的调用。我正在使用`value`，因为那是你想要测试的。

```
jQuery.validator.addMethod("checkIsPriceValid", function (value, element) {
  return checkIsPriceValid(value);
  //check whether checkbox dist and algo is checked
}, "Invalid number");

function checkIsPriceValid(value){
    return value /* some test*/ ? true :false;

} 
```

然后在`validate.rules`对象中通过添加方法名称来使用该方法，但分配值的`true`方式与您使用的其他规则相同，例如“必需”

```
productOrginalPrice:{
    required: true,
    checkIsPriceValid: true
} 
```

演示[http://jsfiddle.net/mpFz3/](http://jsfiddle.net/mpFz3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:22:32.583

编辑 - 对不起，我对第一个参数有误（仍然不完全确定它的确切用途）。我从未使用过该插件，但看看这是否有效：

```
$(function () { 
jQuery.validator.addMethod("checkIsPriceValid", function (value, element) {
  return checkIsPriceValid(value, element);
  //check whether checkbox dist and algo is checked
}, "Invalid number"); 
```

那你应该有

```
function checkIsPriceValid(value, element)
{

    alert(value);
    return false;
} 
```

对于您的验证方法：

```
$("#addProductForm").validate({
 ...
productOrginalPrice:{
    required: true,
    checkIsPriceValid: "Price is invalid"
} 
```

虽然我没有使用过这个插件，只是看看文档和其他例子，这个插件有一个非常丑陋的 API。JQuery Tools 验证器是更好的 IMO。

# entity-framework - 单个 Web 应用程序的多个 DbContext 类。是好是坏？

> ID：11072853
> 
> 赞同：9
> 
> 时间：2012-06-17T16:16:45.253
> 
> 标签：entity-framework, architecture, coding-style, repository-pattern

为 Web 应用程序的每个主要部分设置多个类是否是一种好习惯`XXX : DbContext`（考虑到它的数据库中至少有 50 个表的大类）？例如：MembershipContext、BlogContext、StoreContext 等。或者`DatabaseContext`为所有与数据库访问相关的东西设置一个会更方便。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T17:49:26.073

使用多个 DbContext 类意味着使交叉事务复杂化（您可以在网络上找到此问题的解决方案，例如[http://pastebin.com/YEDqyH0n](http://pastebin.com/YEDqyH0n)），但可能是合理的。这一切都取决于您的架构和您想要设计的分离。

无论如何，您应该查看 Repository 和 UnitOfWork 模式以对如何使用 DbContexts 进行抽象层。看这里：[N-Tier Application 中的多个 DbContexts](https://stackoverflow.com/questions/6654355/multiple-dbcontexts-in-n-tier-application)和这里[EF 和存储库模式 - 最终在一个控制器中使用多个 DbContexts - 任何问题（性能、数据完整性）？](https://stackoverflow.com/questions/9140167/ef-and-repository-pattern-ending-up-with-multiple-dbcontexts-in-one-controller)如果您使用 ASP.NET MVC。

对于 50 个表，我认为拥有多个 DbContext 可能是合理的。所以我建议使用多个 DbContexts。但是您应该使用 Repository 和 UnitOfWork 模式将它们包装起来，使其独立于其他层中的实际实现（像这样，您以后可以轻松地改变主意，例如只使用一个signle DbContext）。

我希望这会有所帮助。

# linux - 使用 PHP 将 .wma 转换为 .flac？可能的？

> ID：11072854
> 
> 赞同：1
> 
> 时间：2012-06-17T16:16:45.690
> 
> 标签：linux, wma, flac

我有一个 linux 服务器，我希望将 .wma 文件转换为 .flac 文件 16k

有没有办法可以使用 PHP 脚本来控制服务器？

我在想 .wma 到 .wav 然后 .flac 会更容易，但不知道如何......

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T03:22:16.057

您可以通过 PHP 调用命令行，这样它就可以作为远程用户的安全界面。

牢记这一点，您可以使用 ffmpeg 库直接从 .wma 转到 .flac，方法是：

```
ffmpeg -i sample.wma -acodec flac -aq 100 sample.flac 
```

您将需要一些东西来管理文件名和获取/提供文件等，但在这种情况下这似乎不是障碍。

# firefox - XSLT 1.0 libxslt 输出转义字符：如何？

> ID：11072855
> 
> 赞同：0
> 
> 时间：2012-06-17T16:16:50.310
> 
> 标签：firefox, escaping

`&#xD;`使用 libxslt 时如何添加为文本？
或者，或者，`td/title`通过生成不同的输出，使包括 Firefox 在内的所有浏览器在元素中正确显示换行符？

我使用的 xslt 代码：

```
<td>
    <xsl:attribute name="title">
        <xsl:for-each select="input/item">
            <xsl:if test="position()!=1"><xsl:text>&#xD;</xsl:text></xsl:if>:<xsl:value-of select="."/>
        </xsl:for-each>
    </xsl:attribute>
</td> 
```

这在应用 Saxon9he 时效果很好，例如导致

```
<td title="item1&#xD;item2&#xD;item3"/> 
```

但是当我使用`libxslt`（php 的一部分）作为 XSLT 1.0 处理器并运行与上面相同的代码时，我会在结果文件中得到真正的换行符：

```
<td title="item1
item2
item3"/> 
```

导致 Firefox 错误地显示工具提示（没有换行符）。

所以我假设我必须添加`disable-output-escaping`属性`<xsl:text>`如下：

```
<xsl:text disable-output-escaping="no">&#xD;</xsl:text> 
```

但这没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:08:19.040

所以评论和测试的结论是它是 Firefox 中的一个错误，但不是在所有版本中：9.01 甚至不显示`&#xD`；正确的; 10.0 不显示换行符，但显示`&#xD;`为换行符，12.0/13.0 都正确显示。

结案。

# zend-framework - URL 中的双斜杠。

> ID：11072856
> 
> 赞同：0
> 
> 时间：2012-06-17T16:16:53.823
> 
> 标签：zend-framework, zend-route, zend-acl, zend-router

Zend 路由问题。

通常它工作正常。

```
http://www.example.com/course-details/1/Physics-Newtons-Law

```

但是如果我在 url 中输入一个额外的斜杠，我的错误控制器的 noauthAction 就会被调用。

无效的 URL 示例。

```
http://www.example.com/course-details//1/Physics-Newtons-Law
http://www.example.com/course-details/1//Physics-Newtons-Law

```

我需要在路由定义中设置什么以允许额外的斜杠吗？

application.ini 中的路由

```
resources.router.routes.viewcourse.route = "/course-details/:course_id/:title"
resources.router.routes.viewcourse.defaults.controller = 当然
resources.router.routes.viewcourse.defaults.action = 查看
resources.router.routes.viewcourse.defaults.title =
resources.router.routes.viewcourse.reqs.course_id = "\d+"

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:16:11.550

您可以使用控制器插件来修复常见的 URL 拼写错误。

```
/**
 * Fix common typos in URLs before the request
 * is evaluated against the defined routes.
 */
class YourNamespace_Controller_Plugin_UrlTypoFixer 
    extends Zend_Controller_Plugin_Abstract
{
    public function routeStartup($request)
    {
        // Correct consecutive slashes in the URL.
        $uri = $request->getRequestUri();
        $correctedUri = preg_replace('/\/{2,}/', '/', $uri);
        if ($uri != $correctedUri) {
            $request->setRequestUri($correctedUri);
        }
    }
} 
```

然后在你的ini文件中注册插件。

```
resources.frontController.plugins.UrlTypoFixer = "YourNamespace_Controller_Plugin_UrlTypoFixer" 
```

# xna - XNA 2D 角色移动 - 每像素物理

> ID：11072860
> 
> 赞同：0
> 
> 时间：2012-06-17T16:18:00.173
> 
> 标签：xna, 2d, collision, game-physics

我想在 XNA 中制作一个 2D 射击游戏。地形应由应用作碰撞图的位图图像组成。我试图做一些角色移动，但我在侧面碰撞和爬上斜坡时失败了。你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:16:28.080

MSDN App Hub 上有一个关于像素完美碰撞的[优秀教程。](http://create.msdn.com/en-US/education/catalog/tutorial/collision_2d_perpixel_transformed)

基本上你最终做的是从纹理中提取所有信息（通过[GetData()](http://msdn.microsoft.com/en-us/library/bb197084.aspx "获取数据（）")）作为一个数组，并循环遍历每个纹理中的重叠像素，看看它们是否都是不透明的、黑色的，或者你想要的其他任何东西用于确定坚固性。如果您需要可缩放/旋转的图像，它会变得有点复杂，但上面的教程也包含相关说明。

# java - 禁用编辑/删除按钮jsp

> ID：11072862
> 
> 赞同：0
> 
> 时间：2012-06-17T16:18:05.380
> 
> 标签：java, jsp, button

我有一个 jsp，其中包含一个表，其中包含来自 db 的一些信息。我可以编辑/删除/提交。如果我点击提交按钮，我想禁用编辑和删除按钮。

你对我该怎么做有什么建议吗？

我的表如下所示：

```
<tr>
        <td><%=rs.getInt(1)%></td>
        <td><%=rs.getString(2)%></td>
        <td><%=rs.getString(3)%></td>
        <td> 
        <input type="image" src="../img/edit.gif" width="20" height="20" />
        </td>
        <td> 
        <input type="image" src="../img/delete.gif" width="20" height="20"  onclick="deleteRecord(<%=rs.getInt(1)%>);"/>
        </td>
        <td> 
        <input type="button" style="border:0;background:transparent;font-family:Trebuchet MS" value="Submit" onclick="submitPaper(<%=rs.getInt(1)%>);"/>
         </td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:33:54.400

*当您使用图像时，我不明白禁用*按钮是什么意思。如果您的提交按钮将更新您的数据并重定向到具有相同表的同一页面，那么您的 bean 中应该有一个属性（在这种情况下，在您的 rs 中）告诉您不应显示图像或它没有任何`onclick`属性代码。在此示例中，我使用基于 0-1 评估的值`onclick`在您的图像中添加：

```
<tr>
    <td><%=rs.getInt(1)%></td>
    <td><%=rs.getString(2)%></td>
    <td><%=rs.getString(3)%></td>
    <td> 
        <input type="image" src="../img/edit.gif" width="20" height="20" />
    </td>
    <td> 
        <input type="image" src="../img/delete.gif" width="20" height="20" 
        <% if (rs.getInt(5) == 0) { %>
            onclick="deleteRecord(<%=rs.getInt(1)%>);"
        <% } %>
        />
    </td>
    <td> 
        <input type="button" style="border:0;background:transparent;font-family:Trebuchet MS"
            value="Submit" onclick="submitPaper(<%=rs.getInt(1)%>);"/>
     </td>
</tr> 
```

附带说明一下，当您使用 JSP 进行编程时，使用 scriptlet 是个坏主意，有一些新技术可以帮助您避免这种情况，例如 JSTL。看：

*   [如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/a/3180202/1065197)

# java - 查询联系人时出现异常 java.lang.ClassCastException

> ID：11072864
> 
> 赞同：0
> 
> 时间：2012-06-17T16:18:16.550
> 
> 标签：java, android

我试图通过 ContactsContract 使用查询获取联系人以下代码引发异常。java.lang.ClassCastException。

```
public class ContactManager extends Activity{

    ArrayList<String> contactsList = new ArrayList<String>();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        String[] contacts = getContactNames();
    }

        public String[] getContactNames(){
            try{
        Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,
                null, null, null, null);

        while (cursor.moveToNext()) { 

              contactsList.add(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)));
        }
        return (String []) contactsList.toArray();

        }
        catch(Exception e){
            Log.e("WOw", e.toString());
            return null;
    }
        }
        } 
```

任何的想法？我没有忘记添加权限

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:28:09.907

该方法`toArray()`返回一个数组，`Object`它不能转换为一个数组`String`。

您必须为方法提供一个参数来指定类型：

```
return (String[]) contactsList.toArray(new String[contactsList.size()]); 
```

您将在[文档](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#toArray%28T%5B%5D%29)中找到更多详细信息。

# java - == 检查布尔值是否完全相等？- 爪哇

> ID：11072870
> 
> 赞同：31
> 
> 时间：2012-06-17T16:18:52.647
> 
> 标签：java, boolean, equals-operator

所以我听说如果我将 2 个字符串与 == 进行比较，那么只有当它们都引用同一个对象/实例时，我才会返回 true。那是字符串。布尔值呢？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-17T16:22:38.763

> == 检查布尔值是否完全相等？- 爪哇

这取决于您是在谈论`Boolean`s （对象包装器，注意大写`B`）还是`boolean`s （原始，注意小写`b`）。如果您在谈论`Boolean`s （对象包装器），与所有对象一样，`==`检查*identity*，而不是*equivalence*。如果您在谈论`boolean`s（原语），它会检查等价性。

所以：

```
Boolean a, b;
a = new Boolean(false);
b = new Boolean(false);
System.out.println("a == b? " + (a == b)); // "a == b? false", because they're not the same instance 
```

但

```
boolean c, d;
c = false;
d = false;
System.out.println("c == d? " + (c == d)); // "c == d? true", because they're primitives with the same value 
```

* * *

关于字符串：

> 我听说如果我将 2 个字符串与 == 进行比较，那么只有当字符串相同并且它们都引用相同的对象/实例时，我才会返回 true ......

它不是真正的“和”：`==`只会检查两个变量是否引用同一个**实例**。当然，一个实例只能有一组内容，所以如果两个变量都指向同一个实例，那么内容自然是相同的...... :-) 关键是即使它们有不同的实例*也会*报告相同的字符以相同的顺序。这就是我们使用它们的原因，而不是. 由于[ing](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)，字符串可能会有些混乱，这是字符串特有的（没有等效的，尽管当您使用 时，您将获得一个缓存的对象）。另请注意，Java 不像原始字符串那样具有原始字符串`String``String``String``==``false` *`String``equals``==`[`intern`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)`Boolean``Boolean.valueOf(boolean)``boolean`,`int`等。*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-18T13:54:19.087

如果你有一个 Object 使用 equals，如果没有，你可以像这样运行。（用于自动装箱原语的 VM 缓存）

```
 public static void main(String[] args){
       Boolean a = true;
       Boolean b = true;
       System.out.println(a == b);
       a = new Boolean(true);
       b = new Boolean(true);
       System.out.println(a == b);
   } 
```

输出为 TRUE 和 FALSE

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-20T03:18:06.613

将 ( `==`) 与布尔值一起使用时，

1.  如果其中一个操作数是布尔包装器，则首先将其拆箱为布尔原语，然后将两者进行比较。

2.  如果两者都是布尔包装器，使用 'new' 关键字创建，那么它们的引用就像其他对象的情况一样进行比较。
    `new Boolean("true") == new Boolean("true")`是假的

3.  如果两者都是布尔包装器，创建时没有“新”关键字，

    ```
    Boolean a = false;
    Boolean b = Boolean.FALSE;
    // (a==b) return true 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T16:23:25.593

这取决于您是在谈论值类型，例如：，，`int`还是引用类型：，，，。值类型可以与 比较，引用类型必须与 比较。`boolean``long``Integer``Boolean``Long``==``equals`*

# mysql - 分组最大值的糟糕的 MySQL LEFT JOIN 性能

> ID：11072875
> 
> 赞同：1
> 
> 时间：2012-06-17T16:19:26.700
> 
> 标签：mysql, sql, left-join

我有下表

```
CREATE TABLE `prod_prices` (
  `id` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `date` date NOT NULL,
  `price` decimal(10,2) NOT NULL,
  PRIMARY KEY (`id`,`date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

还有一些样本数据

```
INSERT INTO `prod_prices` (`id`, `date`, `price`) VALUES
('plan_a', '2012-06-15', 10.20),
('plan_a', '2012-06-16', 10.30),
('plan_b', '2012-06-15', 5.20),
('plan_b', '2012-06-16', 5.30),
('plan_b', '2012-06-17', 5.50); 
```

并想知道每个计划的最新价格。我有以下查询

```
SELECT p1.id, p1.date, p1.price
FROM prod_prices p1
LEFT JOIN prod_prices p2 ON p1.id = p2.id
AND p1.date < p2.date
WHERE p2.id IS NULL 
```

虽然产生了非常糟糕的性能，但它确实有效。 `EXPLAIN`节目

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE          p1      ALL     NULL             NULL    NULL        NULL   5   
1   SIMPLE          p2      ref     PRIMARY         PRIMARY     98       p1.id   1      Using where; Using index; Not exists 
```

因此`p1`表选择不使用任何索引。什么事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:42:18.017

这应该给出相同的结果并且表现更好。

```
SELECT  p1.*
FROM    prod_prices p1
        INNER JOIN
        (   SELECT  ID, MAX(Date) AS Date
            FROM    prod_prices
            GROUP BY ID
        ) AS p2
            ON p1.ID = p2.ID 
            AND p1.Date = p2.Date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:29:15.070

试试这个

```
SELECT p1.id, p1.date, p1.price
FROM prod_prices p1
Where p1.id NOT IN 
(Select id fro prod_prices p2 where p2.date>p1.date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T16:35:17.897

我会推荐这样的东西。

获取最新日期

```
select max(date) date,id group by id 
```

现在通过加入上述查询来选择匹配的记录。

```
SELECT p1.id, p1.date, p1.price
FROM prod_prices p1 a,
(select max(date) date,id group by id) p2
where p1.id=p2.id and p1.date = p2.date 
```

如果您一天内对一种产品有一个价格，这将为您提供最新价格。

由于您的搜索条件涉及日期字段和包含强制表扫描的 Null 值的字段，因此性能较低。

# coldfusion - 使用 URL 重写文件时包含多次？

> ID：11072876
> 
> 赞同：0
> 
> 时间：2012-06-17T16:19:27.000
> 
> 标签：coldfusion, url-rewriting, coldfusion-10

我正在 ColdFusion 10 中开发一个新站点，并使用 .htaccess 文件进行一些 url 重写。当我在没有其他包含的情况下调用它们时，我有三个非常有效的规则。当我将它们包装在包含中时，我得到一个错误。

这是我的规则：

```
RewriteEngine on
RewriteRule ^advertise$ /index.cfm?Section=Advertise
RewriteRule ^bike/([0-9]+)/([0-9]+)/ /index.cfm?Section=Bike&BikeID=$1&FeatureID=$2
RewriteRule ^bike/([0-9]+)/ /index.cfm?Section=Bike&BikeID=$1 
```

索引页显示我们要显示和调用的部分包括围绕页眉和页脚的适当文件，如下所示：

```
include "header.cfm"; 
include "#VARIABLES.Section#.cfm";
include "footer.cfm"; 
```

问题是，它不适用于“自行车”页面，即后两条规则。似乎头文件被多次包含，这使得指向 CSS 和其他文件的链接不好，从而弄乱了页面。如果我注释掉包含的页眉和页脚，一切正常，但没有页眉或页脚，这不是我想要的。

```
// include "header.cfm"; 
include "#VARIABLES.Section#.cfm";
// include "footer.cfm"; 
```

url 重写规则中是否存在导致自行车页面加载多次然后失败的内容？

```
http://flyingpiston2012-com.securec37.ezhostingserver.com/ 
```

您可以在此处尝试该页面并通过单击链接查看问题。有想法该怎么解决这个吗？

更新

当我通过包含整个 URL 使所有链接成为绝对链接时，问题就消失了。

```
<cfoutput>
<link href="#APP.Home#/bootstrap/css/bootstrap.css" rel="stylesheet">
</cfoutput> 
```

不过，我不应该包含文件的绝对路径。关于为什么这对我不起作用的任何提示？

更新

```
// THIS FIXES THE PROBLEM
<base href="#APP.Home#/">
<link href="/bootstrap/css/bootstrap.css" rel="stylesheet">

// THIS FIXES THE PROBLEM
<link href="#APP.Home#/bootstrap/css/bootstrap.css" rel="stylesheet">

// THIS IS THE PROBLEM
<link href="/bootstrap/css/bootstrap.css" rel="stylesheet"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T07:59:23.040

无论您的问题是什么，尝试在 .htaccess 重写规则和 CF 包含的文件之间建立连接都是错误的故障排除方法。

重写规则仅适用于传入请求：浏览器地址栏中（例如）中请求的文档。

当一个文件包含一个文件时，它不会发出请求，因此不涉及网络服务器（以及相应的重写模块）。

我想如果您只是浏览到自行车页面的重写 URL（例如：/index.cfm?Section-Bije&BikeID=12345），您会看到同样的问题。这表明重写不是问题的一部分。

将此概念排除在您的调查之外，只需查看您的文件是如何包含的。一个很好的简单起点是打开调试，然后使用 TREE 视图查看执行时间显示。这将使您了解您在模板中多次调用的位置/方式/原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T06:32:07.430

这可能是因为您没有告诉 Apache 在匹配时停止解析。尝试使规则看起来像这样：

```
RewriteRule ^advertise$ /index.cfm?Section=Advertise [L]
RewriteRule ^bike/([0-9]+)/([0-9]+)/ /index.cfm?Section=Bike&BikeID=$1&FeatureID=$2 [L]
RewriteRule ^bike/([0-9]+)/ /index.cfm?Section=Bike&BikeID=$1 [L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:46:11.320

我不知道它是否相关，但我确实遇到了与 FW/1 类似的问题。通过跟踪 rewrite.log，我可以看到`cfinclude`实际上不存在的所有内容实际上都在通过 Apache。我添加`[NS]`到 .htaccess 并且它消失了：

```
# rewrite rules, NS skips rewrite rule for internal sub-requests
# for FW/1, removes index.cfm from the URL
RewriteRule ^(.*)$ /index.cfm/$1 [NS,L] 
```

# c# - AutoMapper.dll 中出现“AutoMapper.AutoMapperMappingException”类型的异常，但未在用户代码中处理

> ID：11072877
> 
> 赞同：11
> 
> 时间：2012-06-17T16:19:41.130
> 
> 标签：c#, asp.net-mvc, debugging, automapper, entity-framework-5

不知何故，我的代码不再起作用（它之前确实使用完全相同的代码起作用）。这就是问题：

**编码**

我正在尝试使用以下代码将一些对象映射到 ViewModel：

配置：

```
Mapper.CreateMap<BookcaseItem, FoundBookcaseItemViewModel>()
    .ForMember(x => x.Title, opt => opt.MapFrom(src => src.Book.Title))
    .ForMember(x => x.Authors, opt => opt.MapFrom(src => src.Book.Authors.Select(x => x.Name).Aggregate((i, j) => i + ", " + j)))
    .ForMember(x => x.Identifiers, opt => opt.MapFrom(src => (!string.IsNullOrEmpty(src.Book.Isbn10) ? ("ISBN10: " + src.Book.Isbn10 + "\r\n") : string.Empty) +
                                                                (!string.IsNullOrEmpty(src.Book.Isbn13) ? ("ISBN13: " + src.Book.Isbn13) : string.Empty)))
    .ForMember(x => x.Pages, opt => opt.MapFrom(src => src.Book.Pages))
    .ForMember(x => x.ImageUri, opt => opt.MapFrom(src => src.Book.ThumbnailUriSmall)); 
```

用法：

```
public ActionResult Index()
{
    string facebookId = _accountService.GetLoggedInUserFacebookId();

    IEnumerable<BookcaseItem> items = _bookcaseItemService.GetBookcaseItemsForUser(facebookId);
    IEnumerable<FoundBookcaseItemViewModel> viewModels = items.Select(Mapper.Map<BookcaseItem, FoundBookcaseItemViewModel>);

    return PartialView(viewModels);
} 
```

**错误**

这会导致以下错误：

> AutoMapper.dll 中出现“AutoMapper.AutoMapperMappingException”类型的异常，但未在用户代码中处理

**调试数据**

首先，我通过调用确保没有配置错误：

```
Mapper.AssertConfigurationIsValid(); 
```

我已经在我的代码中设置了断点并尝试调试它，但我无法理解它。“items”集合充满了数据（实体框架生成的代理类），但“viewModels”集合充满了奇怪的数据。它有一条“消息”，上面写着：

> 映射类型：BookcaseItem_B9B52593B2659AC05C47AB2A6E0F7AEA9989CC34D3527DF5B6AA988ED57166FB -> String System.Data.Entity.DynamicProxies.BookcaseItem_B9B52593B2659AC05C47AB2A6E0F7AEA9989CC34D35727DFBB -> System.Data.Entity.DynamicProxies.BookcaseItem_B9B52593B2659AC05C47AB2A6E0F7AEA9989CC34D35727DFB5
> 
> 目标路径：FoundBookcaseItemViewModel.Authors
> 
> 源值：System.Data.Entity.DynamicProxies.BookcaseItem_B9B52593B2659AC05C47AB2A6E0F7AEA9989CC34D3527DF5B6AA988ED57166FB

然后有一个堆栈跟踪属性说：

> 在 System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
> 
> 在 System.Linq.SystemCore_EnumerableDebugView`1.get_Items()

哦，最后还有一个名为“context”的属性，其中包含以下数据：

![在此处输入图像描述](../Images/7ebca91c3d405eaeacaa03e89514869c.png)

谁能解释这里发生了什么以及为什么我的代码不再工作？我最近对我的解决方案进行了一些更改，但我已通过 Git 将它们回滚，因此它们不应该对代码产生任何影响。

**我的设置**

*   视觉工作室 12 RC
*   ASP.NET MVC 4
*   .NET Framework 4.0（我有 4.5，但导致错误太多，所以我使用 Git 回滚到 4.0 版）
*   实体框架 5.0 RC
*   自动映射器 2.1.267

**实体和 ViewModel**

我不知道它是否相关，但这里是映射的源类：

```
public class BookcaseItem : Entity
{
    public Guid Id { get; set; }
    public bool IsRenting { get; set; }
    public bool IsSwapping { get; set; }
    public bool IsSelling { get; set; }
    public decimal RentingPrice { get; set; }
    public decimal SellingPrice { get; set; }
    public string Currency { get; set; }
    public bool IsAvailable { get; set; }
    public virtual Guid BookId { get; set; }
    public virtual Guid UserId { get; set; }

    public virtual Book Book { get; set; }
    public virtual User User { get; set; }

    public BookcaseItem()
    {
        IsAvailable = true;
        Currency = "USD";
    }
} 
```

这是映射的目标类：

```
public class FoundBookcaseItemViewModel
{
    public Guid Id { get; set; }
    public bool IsRenting { get; set; }
    public bool IsSwapping { get; set; }
    public bool IsSelling { get; set; }
    public decimal RentingPrice { get; set; }
    public decimal SellingPrice { get; set; }
    public string Title { get; set; }
    public string Authors { get; set; }
    public string Identifiers { get; set; }
    public int Pages { get; set; }
    public string ImageUri { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T16:36:59.833

映射 Authors 属性似乎存在问题。如果 Authors 序列为 null 或为空，则此 Aggregate 调用将引发异常。

```
.ForMember(x => x.Authors, 
           opt => opt.MapFrom(src => src.Book.Authors.Select(x => x.Name).Aggregate((i, j) => i + ", " + j))) 
```

# c# - “索引超出数组范围”异常处理错误

> ID：11072881
> 
> 赞同：0
> 
> 时间：2012-06-17T16:20:40.377
> 
> 标签：c#, exception-handling

我正在使用下面的代码来查找正在运行的进程的基地址。它在用于其他目的的计时器控件内。如果目标进程未运行，我想在标签文本中显示“进程未运行”，但继续检查正在运行的进程以及何时/如果找到则继续下一个代码块。我尝试了一些我认为可行的方法，例如带有异常处理的“尝试”，但是我用来保存标签的表单只是冻结了，我对 c# 很陌生。这是代码，

```
private void timer1_Tick(object sender, EventArgs e)
    {
        #region BaseAddress
        Process[] test = Process.GetProcessesByName("process");
        int Base = test[0].MainModule.BaseAddress.ToInt32();
        #endregion
        //Other code
     } 
```

运行时的异常是：“IndexOutOfRange 异常未处理”- 索引超出了数组的范围。希望有人可以提供帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:23:43.190

```
private void timer1_Tick(object sender, EventArgs e)
    {
        #region BaseAddress
        Process[] test = Process.GetProcessesByName("process");
        if (test.Length > 0)
        {
            int Base = test[0].MainModule.BaseAddress.ToInt32();
        }
        else
        {
            myLabel.Text = "Process is not running";
        }
        #endregion
        //Other code
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T16:23:36.053

我认为名为“进程”的进程不存在。您需要提供一个真实的进程名称。所以数组不包含任何元素。在执行代码的第二行之前，尝试调试以查看数组是否包含任何元素并添加错误处理或数组长度大于 0 的验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T16:24:33.323

与其使用 try–catch 块来处理错误，不如在尝试访问*之前*检查是否找到了该进程：

```
private void timer1_Tick(object sender, EventArgs e)
{
    #region BaseAddress
    Process[] test = Process.GetProcessesByName("process");
    if (test.Any())
    {
        // Process is running.
        int Base = test[0].MainModule.BaseAddress.ToInt32();
        // Perform any processing you require on the "Base" address here.
    }
    else
    {
         // Process is not running.
         // Display "Process is not running" in the label text.
    }
    #endregion
    //Other code
 } 
```

# sqlite - 将视频存储在 SQLite 数据库中？

> ID：11072884
> 
> 赞同：3
> 
> 时间：2012-06-17T16:21:28.133
> 
> 标签：sqlite, video, opencv

我正在研究一种算法，该算法需要非常快速地随机访问可能很长的视频（至少 30 分钟）中的视频帧。我目前正在使用 OpenCV 的 VideoCapture 来阅读我的视频，但是搜索功能要么坏了要么很慢。到目前为止，我发现的最好的方法是在 MKV 容器中使用 MJPEG 编解码器，但速度还不够快。

我可以选择任何视频格式，甚至可以创建一个新格式。存储空间不是问题（当然在某种程度上）。唯一的要求是尽可能快地搜索视频中的任何位置。理想情况下，我希望能够同时访问多个帧，利用我的四核 CPU。

我知道关系数据库非常适合存储大量数据，它们允许同时读取访问，并且在使用索引时速度非常快。

SQLite 是否适合我的特定需求？我计划以 JPEG 格式存储每个视频帧，并使用帧号索引来快速访问它们。

编辑：对我来说，一*帧*只是一个图像，而不是整个视频。一个 25 fps 的 3000 万视频包含 30*60*25=45000 帧，我希望能够使用它的数量快速获得其中一个。

编辑：对于那些可能感兴趣的人，我最终实现了一个自定义视频容器，将每个帧保存在固定大小的块中（因此，可以直接计算任何帧的位置！）。图像使用 turbojpeg 库压缩，文件访问是多线程的（对 NCQ 友好）。瓶颈不再是硬盘驱动器了，我终于获得了更好的性能:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T16:43:35.553

我不认为使用 SQLite（或任何其他 dabatase 引擎）是解决您问题的好方法。数据库*不是*文件系统。

如果您需要*非常快速的随机访问*，那么请坚持使用文件系统，它是为这种用途而设计的，并为此进行了优化*。*根据您的评论，您说 5 小时的视频需要 450k 文件，好吧，我认为这不是问题。当然，目录列表会有点长，但您将获得*绝对最快*的随机访问。而且它*肯定会比*SQLite 更快，因为你是一个抽象级别。

如果您真的担心目录列出时间，您只需像树一样组织您的文件夹结构。这将使您获得更长的路径，但可以快速列出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T05:22:11.290

保持高水平的视角。问题是 OpenCV 在源视频中的搜索速度不够快。这可能是因为

*   编解码器不是 OpenCV 的强项
*   未对源视频进行编码以实现高效搜索

你的机器有很多专用的图形硬件可以利用，但它没有在 17 GB 数据集中随机搜索的专门功能，无论是文件、数据库还是一组文件。磁盘每次寻道需要几毫秒。SSD 会更好，但仍然不是那么好。然后你等待它加载到主内存中你必须首先生成所有数据。

使用[ffmpeg](http://ffmpeg.org/developer.html)，它应该可以非常有效地处理解码，甚至可以使用 GPU。这是一个[教程](http://www.inb.uni-luebeck.de/~boehme/using_libavcodec.html)。（免责声明，我自己没有使用过。）

您可以预处理视频以添加关键帧。原则上，这不需要完全重新编码，至少对于 MPEG 而言，但我对细节知之甚少。MJPEG 本质上将所有帧都转换为关键帧，但您可以找到中间立场，以 2 倍的尺寸成本寻找 1.5 倍的速度。但要避免撞到磁盘。

* * *

对于 SQLite，这是一个很好的解决在 17 GB 数据范围内寻找问题的方法。数据库未针对随机访问进行优化的概念是 poppycock。他们当然是。文件系统是一种数据库。由于硬件而不是软件，17 GB 中的随机访问速度很慢。

我建议不要将文件系统用于此任务，因为它是与机器其余部分同步的共享资源。此外，创建 50 万个文件（并在完成后删除它们）将需要很长时间。这*不是*文件系统的专门用途。不过，您可以通过在每个文件中存储多个图像来解决这个问题。但是你需要一些格式来找到所需的图像，然后为什么不把它们全部放在一个文件中呢？

确实，（如果采用 17 GB 路线）为什么不忽略整个问题并将所有内容都放在虚拟内存中呢？VM 与 SQLite 或文件系统一样擅长进行磁盘查找。只要操作系统知道进程使用那么多内存是可以的，并且您使用的是 64 位指针，它应该是一个很好的解决方案，并且首先要尝试。

# java - 使用 getClass().getResource() 加载图像时 Java 抛出 NullPointerException

> ID：11072890
> 
> 赞同：3
> 
> 时间：2012-06-17T16:22:29.773
> 
> 标签：java, image, jar

我有一个 Applet，我试图在打包成 jar 文件后嵌入到 html 文件中。

使用以下行将图像加载到主 Applet 类中

`return getImage(getClass().getResource("/../content/"+path));`

这在通过 eclipse 运行时有效，但是当我将其导出到 jar 文件时，我得到一个空指针异常。我做了一些谷歌搜索，并尝试使用 getResourceAsStream 和以下代码

```
InputStream is = new BufferedInputStream(
                 getClass().getResourceAsStream("/../content/"+path));
return ImageIO.read(is); 
```

但这不适用于日食。

内容是图像的顶级目录，路径是所需图像的指定路径。小程序在一个名为 game 的文件夹中，与 content 处于同一级别

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T16:33:50.070

这是一条评论，现在我在这里回答了它（正如 OP 所说它确实有帮助）：尝试将内容放入与访问内容的类相同的包中，并相应地更改路径，看看是否有帮助。如果是这样，则说明您的路径有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T16:38:25.373

我遇到过同样的问题。但是使用以下方法解决了它：-

```
<ClassName>.class.getClass().getResource(urlString); 
```

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T16:52:06.453

你可以试试这个。

```
getClass().getClassLoader().getResourceAsStream(name) 
```

此外，你的路径看起来有点奇怪。/.. 基本上是指根目录的父目录，它不可能工作。

# css - 单选按钮 int html5 表单 - 缩放问题

> ID：11072897
> 
> 赞同：1
> 
> 时间：2012-06-17T16:22:59.617
> 
> 标签：css, html, radio-button, zooming

所以我听到人们谈论讨厌调整大小的事情，单选按钮就是其中之一。因此，我很好奇是否有解决方法？textareas 在使用行/列时不会很好地调整大小，但在使用宽度时会这样做。我尝试了类似的方法并给我的收音机输入一个高度，但没有“修复”缩放问题。

所以在这里我想知道是否有某种解决方法。我有一个流畅的布局，所以很好，但结果很糟糕'〜'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:52:19.607

您可以创建样式替换（一个优点是您可以拥有您想要的外观），就像 jQuery Mobile 所做的那样。这并不难。

一些事情可以让你快速开始：

1.  用javascript隐藏原始输入；
2.  插入您的标记以生成“假”输入；
3.  连接替换上的事件以使用`click`、`focus`和`blur`事件激活或停用原始输入。

此外，还有很多插件可以为您完成，例如[http://www.azurem.com/jqf1/](http://www.azurem.com/jqf1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:37:59.873

单选按钮的外观和感觉通常由操作系统决定，因此很难调整它们的大小。

一个不错的选择是用图像伪造它。

# border - CSS min-height 不调整背景颜色和边框

> ID：11072922
> 
> 赞同：0
> 
> 时间：2012-06-17T16:26:52.863
> 
> 标签：border, background-color, css

我正在建设的这个网站有问题。我需要一个固定的宽度，以便我可以自动执行左边距和右边距自动（将表单项居中在我的“左窗口”上。问题是我正在尝试使此代码模块化，以便它可以在任何未来使用我也决定创建表单，这意味着我需要可变高度，具体取决于表单需要多少字段。

所以为了澄清上述陈述，我试图保持固定宽度并具有可变高度（使用最小高度）。问题是背景颜色和 div 边框没有随着 div 大小而缩小或扩大。有任何想法吗？

该网站在这里：[http ://traelid.com/news/createNews.php](http://traelid.com/news/createNews.php)

这是我的表单代码和我的 CSS 代码：

形式：

```
<script type='text/javascript' src='../nicEdit/nicEdit.js'></script>
<script type='text/javascript'>
    bkLib.onDomLoaded(function() {nicEditors.allTextAreas() });
</script>

<div class='frmcontainer'>

    <div class='title'>TraeLid News</div>

  <div class='fill'>

        <div class='row'>

            <div class='frm lbl'>
                <label for='author'>Author:</label>
            </div>

            <div class='frm itm'>
                Auto Author
            </div>

        </div>

        <div class='row'>

            <div class='frm lbl'>
                <label for='subject'>Subject:</label>
            </div>

            <div class='frm itm'>
                <input class='itm itmtxt' type='text' name='subject' />
            </div>

        </div>

        <div class='row'>

            <div class='frm lbl'>
                <label for='content'>Content:</label>
            </div>

            <div class='frm itm txtarea' style='background-color:#fff;'>
              <textarea class='itm itmtxtarea ckeditor' name='content'></textarea>
          </div>

        </div>

        <div class='row'>

            <div class='frm lbl'>
                <label for='tags'>Tags:</label>
            </div>

            <div class='frm itm'>
                <input class='itm itmtxt' type='text' name='tags' />
            </div>

        </div>

  </div>

</div> 
```

CSS：

```
 .frmcontainer
    {

    text-align:center;

    width:750px;
    min-height:200px;
    margin-left:auto;
    margin-right:auto;

    border-radius:10px;
    border-width:1px;
    border-style:solid;

}

.frm
{
    margin:5px;
}

.title
{
    clear:both; 

    width:750px;

    margin-bottom:24px;

    font-size:28px;
    font-weight:bold;
    text-decoration:underline;
    font-variant:small-caps;

}

.row
{
    width:750px;
    height:auto;

    float:left;
    clear:both;
}

.lbl
{   
    font-size:18px;
    font-weight:bold;

    text-align:left;

    height:30px;
    width:150px;

    float:left;

}

/*Container and input styles*/

.itm
{
    text-align:left;

    height:25px;
    width:580px;        

    float:left;
}

.itmtxt
{
    width:576px;

    border-style:solid;
    border-width:1px;
}

.txtarea
{
    height:400px;
}

.itmtxtarea
{
    width:578px;

    height:343px;

    border-style:solid;
    border-width:1px;
}
.nicEdit-panel 
{     
    background-color: #eee;
}
.nicEdit-selected 
{     
    background-color: #fff;
    word-wrap:break-word;;
    overflow:hidden;
}
.nicEdit-main
{
    word-wrap:break-word;
    overflow:hidden;
    max-height:343px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:35:03.247

在 .frmcontainer 上添加`overflow: hidden;`. [小提琴前](http://jsfiddle.net/Kyomu/HKcd8/embedded/result/)

# ruby-on-rails - Rails 中的 Redis-Objects 保存为字符串，而不是数组

> ID：11072923
> 
> 赞同：1
> 
> 时间：2012-06-17T16:26:59.243
> 
> 标签：ruby-on-rails, ruby, arrays, marshalling, redis-objects

我正在使用[redis-objects](https://github.com/nateware/redis-objects) gem 来存储简单信息

```
class Purchase < ActiveRecord::Base
  include Redis::Objects
  hash_key :user_purchases, :marshal => true, :global => true  # "hash" is taken by Ruby

  def self.add_user_end(fb_id,item_id)
    if self.user_purchases[fb_id]
      a = Array.new
      a << candidate_id 
      self.user_purchases[fb_id] = a
    else
      new_a = self.user_purchases[fb_id]
      new_a << item_id
      self.user_purchases[fb_id] = new_a
    end
  end
end 
```

我正在创建一种将 user_purchases 收集为 hasy_key 的方法，由用户 fb id 键入。我想在使用 Purchase.user_purchases["2"] => [1,23,563,2] 时看到一组 id

我遇到了 Redis::Object 的问题，我只能将其保存为字符串：为什么？

```
1.9.3-p125 :050 > Purchase.user_purchases["6"].class
 => String 
1.9.3-p125 :051 > Purchase.user_purchases["6"]
 => "\u0004\b[\u0006I\"\v543555\u0006:\u0006ET" 
```

回答：

我的初始化文件丢失需要'redis/list'

```
require 'redis'
require 'redis/objects'
require 'redis/hash_key'
require 'redis/list'

Redis.current = Redis.new(:host => '127.0.0.1', :port => 6379) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:34:44.857

我的初始化文件丢失需要'redis/list'

```
require 'redis'
require 'redis/objects'
require 'redis/hash_key'
require 'redis/list'

Redis.current = Redis.new(:host => '127.0.0.1', :port => 6379) 
```

# java - 比较Java中的两个字符串

> ID：11072925
> 
> 赞同：7
> 
> 时间：2012-06-17T16:27:17.957
> 
> 标签：java, android, string

> **可能重复：**
> [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

我知道这是一个愚蠢的问题，但为什么这段代码不起作用。

```
boolean correct = "SampleText"  == ((EditText)findViewById(R.id.editText1)).getText().toString();
    if(correct) ((TextView)findViewById(R.id.textView1)).setText("correct!");
    else ((TextView)findViewById(R.id.textView1)).setText("uncorrect!"); 
```

关键是检查“editText1”的内容是否等于“示例文本”

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-17T16:28:20.490

在 Java 中，必须使用`equals()`而不是比较两个字符串（通常是两个对象） `==`。`==`运算符测试*身份*（意思是：测试两个对象在内存中是否完全相同），而方法`equals()`测试两个对象是否*相等*（意思是：测试两个对象是否具有相同的*值*），无论它们是否是两个不同的对象. 几乎总是你对平等感兴趣，而不是身份。

要修复您的代码，请执行以下操作：

```
String str = ((EditText)findViewById(R.id.editText1)).getText().toString();
boolean correct = "SampleText".equals(str); 
```

另请注意，在对 的调用中将字符串文字放在第一位是一个好习惯，`equals()`这样在第二个字符串是 的情况下您是安全的`null`，避免了可能的`NullPointerException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T16:31:19.180

在Java`Strings`中必须与他们的`equals()`方法进行比较：

```
String foo = "foo";
String bar = "bar";
if (foo.equals(bar)) System.out.println("correct");
else System.out.println("incorrect"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T17:28:06.843

在java中比较2个对象的正确方法是使用`equals() method of Object class` And，因为String是java中的一个对象，它应该以相同的方式进行比较。

比较字符串的正确方法是，

```
s1.equals(s2) 
```

所以你可以使用这个，

`boolean correct = "SampleText"`**。等于**`(((EditText)findViewById(R.id.editText1)).getText().toString());`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T16:37:28.283

要比较两个字符串的值（是否相等），您需要使用 equals，而不是 ==（如果您不关心大小写，请使用 equalsIgnoreCase）。
使用 equals 将检查字符串的内容/值（与“==”相反，它只会检查两个变量是否指向同一个对象 - 不是同一个值）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T16:33:43.260

```
((TextView)findViewById(R.id.textView1)).setText("SampleTest".equals(((EditText)findViewById(R.id.editText1)).getText().toString()) ? "correct!" : "incorrect!"); 
```

它有点长，可能有更好的方法可以做到这一点。.toString() 感觉很奇怪！

# process - 用 Python 编写看门狗

> ID：11072928
> 
> 赞同：2
> 
> 时间：2012-06-17T16:27:25.700
> 
> 标签：process, signals, monitoring, watchdog

我需要在 Ubuntu LTS 上为第 3 方网络文件传输 java 程序编写一个看门狗，该程序每 40-50 分钟持续网络传输@4MB/s 就会死掉。

我无法修改该 java 程序，但它是通过暴发户产生的。

我当前的看门狗正忙着等待：

```
while monitoring_enabled:
    begin_time = now()
    # query ps and /proc to see if it's there
    end_time = now()
    diff_time = end_time - begin_time
    if not diff_time > sleep_time:
        sleep(sleep_time - diff_time) 
```

因为，“忙等待是不好的”，这会占用大约 10% 的 CPU，我想知道是否有更好的方法来解决这个问题：

1.  有一个通知/事件处理而不是轮询。请注意，我并不是暗示当进程终止时会触发任何通知/事件，而是询问操作系统是否可以确定 java 程序已经死亡

2.  修改生成 java 程序的 upstart 脚本，以便在进程停止时重新启动它？

3.  更好的解决方案？可能类似于[Python API 库和 shell 实用程序来监视文件系统事件](http://packages.python.org/watchdog/)，但对于 linux 进程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:48:23.407

[主管](http://supervisord.org/)- Python，生成和控制流程，事件通知，xml-rpc api，好的文档，好的评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:29:59.277

编写一个 bash 脚本以在 while 循环中运行程序。

```
#!/bin/bash
while true; do 
    java -jar offendingProgram.jar
done 
```

然后从你启动它的地方 bg 脚本。

# facebook - Facebook - 使用 PHP SDK/JavaScript SDK 发布签到

> ID：11072933
> 
> 赞同：1
> 
> 时间：2012-06-17T16:27:47.807
> 
> 标签：facebook, facebook-javascript-sdk, facebook-php-sdk, checkin

我正在尝试使用 Facebook Graph API 发布签到。我已经浏览了[Facebook API 文档（签入）](http://developers.facebook.com/docs/reference/api/user/)并且也获得了`publish_checkins`许可。但是，我的签到没有发布。我可以知道有什么问题还是我错过了什么？感谢您的时间 ：）

**fbmain.php**

```
$user = $facebook->getUser();
$access_token = $facebook->getAccessToken();

// Session based API call
if ($user) {
    try {
            $me = $facebook->api('/me');
            if($me)
            {
                $_SESSION['fbID'] = $me['id'];
                $uid = $me['id'];
            }
        } catch (FacebookApiException $e) {
          error_log($e);   
        }
}
else {
   echo "<script type='text/javascript'>top.location.href='$loginUrl';</script>";
   exit;
}

$loginUrl = $facebook->getLoginUrl(
        array(
            'redirect_uri' => $redirect_url,
            'scope' => status_update, publish_stream, publish_checkins, 
                user_checkins, user_location, user_status'
            )
); 
```

**main.php - 使用 PHP SDK**（本例中使用了错误的 SDK，应该使用 JavaScript SDK）

```
<?php
    include_once "fbmain.php";

    if (!isset($_POST['latitude']) && !isset($_POST['longitude']))
    {
?>
<html>
    <head>
        //ajax POST of latitude and longitude
    </head>

    <body>
        <input type="button" value="Check In!" onclick="checkin();"/></span>
    </body>
</html>
<?php
}
else
{
?>
<script type="text/javascript">
    function checkin()
    {
        try
        {
            $tryCatch = $facebook->api('/'.$uid.'/checkins', 'POST', array(
                'access_token' => $facebook->getAccessToken(),
                'place' => '165122993538708',
                'message' =>'MESSAGE_HERE',
                'coordinates' => json_encode(array(
                    'latitude'  => '1.3019399200902',
                    'longitude' => '103.84067653695'
                ))
            ));
        }
        catch(FacebookApiException $e)
        {
            $tryCatch=$e->getMessage();
        }
        return $tryCatch;
    }
</script>
<?php
}
?> 
```

**问题已解决 - 发布签到时要注意的事项**

*   确保`publish_checkins`已授予权限。
*   必须用于`json_encode()`编码`coordinates`PHP SDK 的参数。
*   `place`和`coordinates`参数是强制性的。
*   `publish_checkins`如果您刚刚向现有的允许权限列表添加了权限，则需要重新进行身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:14:29.133

显然，我在问题中发布的配置和 PHP 签入功能是正确的。但是，正如 Nehal 所指出的，对于我的情况，我应该使用 JavaScript SDK 而不是 PHP SDK。供以后参考...

**使用 JavaScript SDK**

```
function checkin()
{
    FB.api('/me/checkins', 'post', 
    { message: 'MESSAGE_HERE',
       place: 165122993538708,
       coordinates: {
           'latitude': 1.3019399200902,
           'longitude': 103.84067653695
       }
    },
        function (response) {
            alert("Checked in!");
        }
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:24:15.040

您还需要学习 PHP 和变量作用域。

```
$facebook = new Facebook(array(
          'appId'  => FB_API_KEY,
          'secret' => FB_SECRET_KEY,
          'cookie' => true,
        ));
$loginUrl = $facebook->getLoginUrl(
        array('scope' => 'status_update,publish_stream,publish_checkins,user_checkins,user_location,user_status,user_checkins')
);

// Session based API call
if ($user) {
    try {
            $me = $facebook->api('/me');
            if($me)
            {
                $_SESSION['fbID'] = $me['id'];                
            }
        } catch (FacebookApiException $e) {
          error_log($e);   
        }
}
else {
   echo "<script type='text/javascript'>top.location.href='$loginUrl';</script>";
   exit;
}

function checkin($fb)
{
    try
    {
        $tryCatch = $fb->api('/'.$_SESSION['fbID'].'/checkins', 'POST', array(
            'access_token' => $fb->getAccessToken(), //corrected
            'place' => '165122993538708',
            'message' =>'I went to placename today',
            'coordinates' => json_encode(array(
                'latitude'  => '1.3019399200902',
                'longitude' => '103.84067653695'
            ))
        ));
    }
    catch(FacebookApiException $e)
    {
        $tryCatch=$e->getMessage();
    }
    return $tryCatch;
}

checkin($facebook); //calling the function and passing facebook object to function 
```

# flash - Flash 中动画剪辑子级的补间效果

> ID：11072939
> 
> 赞同：0
> 
> 时间：2012-06-17T16:28:36.870
> 
> 标签：flash, flash-cs4, tween

我有一个movieclip，里面有几个movieclips。如果我在大电影剪辑上创建“补间”效果，它会起作用。但是，如果我双击这个大动画剪辑（包含其他动画剪辑）并尝试移动具有相同补间效果（经典动画剪辑或运动动画剪辑）的其中一个动画剪辑（孩子），它什么也不做）

您将如何使“内部”电影剪辑移动？（我试图在不移动父母的情况下移动孩子）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:35:30.580

创建一个对象，将其转换为符号，双击并为其设置动画。导航回原始场景（场景 1）和补间。

播放时嵌套的影片剪辑不是从关键帧 1 开始按传统按 enter 的动画，您需要使用（Ctrl+enter 或 cmd+enter）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T17:21:16.983

确保你的符号是`movieclips`和不是`graphics`。图形没有时间线，因此它们无法在其中播放动画内容。

除此之外，如果您创建一个影片剪辑并在其中放置另一个影片剪辑，您可以毫无问题地对其进行动画处理。如果这不起作用，则有一些可能的原因：您尚未发布或测试电影以查看动画（正如 Humm 指出的那样），您的符号是图形，正如我所提到的，或者其中有一个 ActionScript 或控制动画流程的更多帧，如`stop()`、`gotoAndStop()`等。

# string - 从浏览器到 mysql 数据库的编码和解码字符串数据流，反之亦然

> ID：11072941
> 
> 赞同：0
> 
> 时间：2012-06-17T16:28:58.580
> 
> 标签：string, character-encoding

用户在浏览器的 html 表单输入中插入一个字符串。该字符串保存在数据库中。这个字符串是如何在每个阶段基于字符编码进行编码和解码的？

根据所使用的技术堆栈进行流程：浏览器 --> ajax post --> spring mvc -->hibernate -->mysql db

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:11:43.877

您可以预期浏览器帖子是一个 URL 编码的 UTF-8。在 Java JVM 中，字符串使用 UTF-16，因此如果它是英文文本，大小大约会增加一倍。Hibernate 是其中的一部分，它并不真正关心编码，尽管它确实使用连接字符串传递，如下所述（`hibernate.connection.url`属性）。

UTF-16 字符串然后由 JDBC 驱动程序翻译，在 MySQL 的情况下，它将使用`characterEncoding`连接字符串中的属性。如果这与语句中`CREATE DATABASE`声明的数据库的编码相匹配，它会有所帮助，避免再次重新编码。

最后，“latin”不是特定字符集或编码的名称。您可能指的是 ISO 8859-1，也称为 Latin-1。对于 Web 服务器来说，这不是一个好的选择，因为它无法表示大多数非英语字符串。您应该在数据库和连接字符串中使用 UTF-8，以 UTF-8 -> UTF-16 -> UTF-8 结尾，这是一个安全且相当有效的序列（不包括可能在浏览器本身）。

如果您决定更改数据库以使用 UTF-8，请注意更改表级别的编码。每个表都可以使用自己的编码，并且不会自动更改。

# php - 使用 ajax 将模型属性发送到 Yii 控制器

> ID：11072950
> 
> 赞同：0
> 
> 时间：2012-06-17T16:30:33.080
> 
> 标签：php, ajax, yii

我目前正在使用以下代码向我的控制器发送 Ajax 获取请求：

```
echo CHtml::ajaxLink('clickMe', array('ajax'), array('update'=>'#results')); 
```

这工作正常，控制器接收请求并相应地更新视图。

现在，我想发送模型的这个请求属性，即来自`model->getAttributes();`

我该怎么做？创建属性的 JSON 对象并将其与请求一起发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T18:24:25.727

如果需要，只需传递“数据”属性和“类型”：

```
echo CHtml::ajaxLink('clickMe', array('ajax'), array(
    'update' => '#results'
    'data' => CJSON::encode($model->attributes),
    'type' => 'post',
)); 
```

此代码只是用 json 替换 #results 内容。如果您需要不同的东西，请使用“成功”而不是“更新”，如下所示：

```
echo CHtml::ajaxLink('clickMe', array('ajax'), array(
    'success' => 'function (response) {
            // do everything you need
    }',
    'data' => CJSON::encode($model->attributes),
    'type' => 'post',
)); 
```

查看 jquery ajax[选项](http://docs.jquery.com/Ajax/jQuery.ajax#options)以获取更多信息。

# c++ - glut中的简单2d动画

> ID：11072951
> 
> 赞同：1
> 
> 时间：2012-06-17T16:30:36.697
> 
> 标签：c++, animation, opengl, 2d, glut

我有一个任务要做，但我似乎无法真正理解它。任务如下：向背景（太阳系）添加纹理，向 2 个对象（绘制的形状）添加纹理，并添加一个动画，其中两个对象必须从彼此和远处的墙壁反弹（如屏幕末尾）。

除了动画，我什么都做了。我该怎么做这种动画？里面的ps动画是我能想到的最好的。

```
#include <gl/glut.h>
#include <gl/gl.h >
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <time.h>

float x;
float y;

unsigned char *imageData;
int imageRows, imageCols;

extern void loadBMP(char *);
char cotton1[] = "cotton1.bmp";
char cotton2[] = "cotton2.bmp";
char fons[] = "solar.bmp";

GLuint texture[3];
float cube[1], Vcube[1];

/* GLUT callback Handlers */

void init()
{
cube[0]=0;
Vcube[0]=0.01;
cube[1]=0;
Vcube[1]=0.01;

glShadeModel(GL_SMOOTH);

glGenTextures( 3, &texture[0] );

   loadBMP(cotton1);
   glBindTexture( GL_TEXTURE_2D, texture[0] );
   glTexImage2D(GL_TEXTURE_2D, 0, 3, imageCols, imageRows,
         0, GL_RGB, GL_UNSIGNED_BYTE, imageData);

   glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
   glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
   glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
   glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);

     loadBMP(cotton2);
   glBindTexture( GL_TEXTURE_2D, texture[1] );
   glTexImage2D(GL_TEXTURE_2D, 0, 3, imageCols, imageRows,
         0, GL_RGB, GL_UNSIGNED_BYTE, imageData);

   glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
   glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
   glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
   glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);

        loadBMP(fons);
   glBindTexture( GL_TEXTURE_2D, texture[2] );
   glTexImage2D(GL_TEXTURE_2D, 0, 3, imageCols, imageRows,
         0, GL_RGB, GL_UNSIGNED_BYTE, imageData);

   glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
   glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
   glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
   glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);

}

static void 
resize(int width, int height)
{
    const float ar = (float) width / (float) height;

    glViewport(0, 0, width, height);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity() ;
}

static void 
idle(void)
{
    glutPostRedisplay();
}

void animation()
{
cube[1]+=Vcube[1];
if (cube[1]<0.1)
{ Vcube[1]+=Vcube[1]; }
if (cube[1]>0.095)
{ Vcube[1]=-0.01; }
if (cube[1]<0)
{ Vcube[1]=+0.01; }

glTranslatef(cube[1],0,0);
       Sleep(100);
       glutPostRedisplay();
}

void animation2()
{
  cube[0]+=Vcube[0];
if (cube[0]<(-0.1))
{ Vcube[0]-=0.01; }
if (cube[0]>0)
{ Vcube[0]-=0.01; }
if (cube[0]<0.1)
{ Vcube[0]+=0.01; }

glTranslatef(cube[0],0,0);
       Sleep(100);
       glutPostRedisplay();
}

void display() {

    glClear(GL_COLOR_BUFFER_BIT| GL_DEPTH_BUFFER_BIT);  

//Background
    glLoadIdentity();
    glBindTexture( GL_TEXTURE_2D, texture[2]);
    glEnable( GL_TEXTURE_2D );

    glPushMatrix();
     glBegin( GL_QUADS );
      glTexCoord2f(1.0,1.0); glVertex2f(-1.0,1.0);
      glTexCoord2f(0.0,1.0); glVertex2f(1.0,1.0);
      glTexCoord2f(0.0,0.0); glVertex2f(1.0,-1.0);
      glTexCoord2f(1.0,0.0); glVertex2f(-1.0,-1.0);
      glEnd();
      glPopMatrix();
    glDisable(GL_TEXTURE_2D);

  animation();

//TEXTURE 1
    glBindTexture( GL_TEXTURE_2D, texture[0]);

    glEnable( GL_TEXTURE_2D );

    glPushMatrix();
    glBegin( GL_TRIANGLE_FAN );
glTexCoord2f(0.5f, 0.5f);  glVertex2f(  0.5f,  0.0f);   //center
glTexCoord2f(1.0f, 0.5f);  glVertex2f(  0.8f+x,  0.0f);   //right
glTexCoord2f(0.75f, 1.0f); glVertex2f(  0.55f+x, 0.3f+x);  //top right
glTexCoord2f(0.25f, 1.0f); glVertex2f(  0.35f-x, 0.3f+x);   //Top left
glTexCoord2f(0.0f, 0.5f);  glVertex2f(  0.25f-x, 0.0f);   //left
glTexCoord2f(0.25f, 0.0f); glVertex2f(  0.45f-x,-0.3f-x);   //bottom left
glTexCoord2f(0.75f, 0.0f); glVertex2f(  0.7f+x, -0.2f-x);   //bottom right
glTexCoord2f(1.0f, 0.5f);  glVertex2f(  0.8f+x,  0.0f);   //right
      glEnd();
      glPopMatrix();
    glDisable(GL_TEXTURE_2D);
//TEXTURE 2

    animation2();   
    glBindTexture( GL_TEXTURE_2D, texture[1]);

    glEnable( GL_TEXTURE_2D );
    glPushMatrix();
    glBegin( GL_TRIANGLE_FAN );
glTexCoord2f(0.5f, 0.5f);  glVertex2f( -0.5f,  0.0f);  //center
glTexCoord2f(1.0f, 0.5f);  glVertex2f( -0.2f+y,  0.0f);  //right
glTexCoord2f(0.75f, 1.0f); glVertex2f( -0.4f+y,  0.2f+y);  //top right
glTexCoord2f(0.25f, 1.0f); glVertex2f( -0.7f-y,  0.1f+y);  //Top left
glTexCoord2f(0.0f, 0.5f);  glVertex2f( -0.8f-y,  0.0f);  //left
glTexCoord2f(0.25f, 0.0f); glVertex2f( -0.7f-y, -0.1f-y);  //bottom left
glTexCoord2f(0.75f, 0.0f); glVertex2f( -0.3f+y, -0.2f-y);  //bottom right
glTexCoord2f(1.0f, 0.5f);  glVertex2f( -0.2f+y,  0.0f);  //right
      glEnd();
      glPopMatrix();
    glDisable(GL_TEXTURE_2D);
glutSwapBuffers();
glFlush();
}

static void 
key(unsigned char key, int a, int b)
{
    switch (key) 
    {
        case 27 : 
        case 'q':
            exit(0);
            break;

        case '+':
             if ((x+0.01)<0.98)
             x=x+0.01;
             if ((y+0.01)<0.98)
             y=y+0.01;         
            break;

        case '-':
             if ((x-0.1)>(-0.15))
                x=x-0.01;
             if ((y-0.1)>(-0.10))
                y=y-0.01;
           break;

        case 'o':
             if ((x+0.01)<0.98)
             x=x+0.01;
             break;
        case 'p':
             if ((x-0.1)>(-0.15))
             x=x-0.01;
             break;

        case '[':
             if ((y+0.01)<0.98)
             y=y+0.01;
             break;
        case ']':
             if ((y-0.1)>(-0.10))
             y=y-0.01;
             break;

    }
    glutPostRedisplay();
}

int main(int argc, char *argv[]) {
   glutInit(&argc, argv);   

   glutInitWindowSize(640, 640);   
   glutInitWindowPosition(50, 50); 
   glutCreateWindow("Assignment number 3"); 
   glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH);

   glutReshapeFunc(resize);
   glutDisplayFunc(display);      
   glutKeyboardFunc(key);         
   glutIdleFunc(idle);

   glClearColor(1.0, 1.0, 1.0, 1.0);

   init();

   glutMainLoop();               
   return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T16:45:42.697

问题 1：您将 OpenGL 误认为是场景图。以您的 animation1 函数为例：

```
void animation2(
     )
{
    cube[0] += Vcube[0];
    if( cube[0] < ( -0.1 ) ) {
        Vcube[0] -= 0.01;
    }
    if( cube[0] > 0 ) {
        Vcube[0] -= 0.01;
    }
    if( cube[0] < 0.1 ) {
        Vcube[0] += 0.01;
    }

    glTranslatef( cube[0], 0, 0 );
    Sleep( 100 );
    glutPostRedisplay(  );
} 
```

`glTranslatef`最后会在OpenGL上下文中当前活动的任何矩阵上乱扔垃圾。这不是怎么做的。

下一个问题：您正在从绘图代码中调用动画函数。在绘制点时应确定所有场景状态。此外，调用该动画函数将在您的显示函数中休眠。这不是怎么做的。

好的，怎么办：首先把所有的动画进度器函数放到空闲循环中。不要睡觉，而是测量动画迭代之间的时间并相应地推进动画。不要在动画函数中调用 glutPostRedisplay。在空闲处理程序结束时是的，但不是在动画师中。在绘图代码中，使用评估的动画状态来相应地放置对象。使用矩阵堆栈（glPushMatrix、glPopMatrix）将事物很好地分开。

* * *

```
#include <GL/glut.h>

#include <stdio.h>
#include <stdlib.h>
#include <math.h>

/* for gettimeofday */
#include <sys/time.h>

/* In general, littering your program with global variables should be avoided.
 * I admit, that sometimes even I don't adhere to this rule, and especially
 * using GLUT it takes to jump several very arcane hoops to avoid it.
 * So in this case, yes, having global variables is in order.
 *
 * The principle idea of global variables is to put data into them, that is
 * valid and the same for the whole of the program. More importantly they
 * must not be used to pass around data.
 *
 * It's also a good idea to make those variables static, so that they are
 * contained withing this compilation unit.
 */
static float x;
static float y;

/* This is not how globals should be used. They're used to pass data around between
 * functions. DON'T DO THAT!
 *
 * Also this misses the extern keyword. Unless the compilation unit loading the
 * bmp files declares those being extern, hence relying on another compilation unit
 * to expose them like this, this code is likely to break.

unsigned char *imageData;
int imageRows, imageCols;

extern void loadBMP(char *); 

 * BTW: You don't need the extern keyword here.

 * Instead have a nice little function that loads a BMP file and puts it into a
 * newly allocated texture object.
*/

GLuint loadBmpToTexture(char const * const filename)
{
    /* Implementation of this left as an exercise to the reader */
    return 0;
}

static double ftime(void)
{
    /* Now this is a bit complicated: There's no portable high resolution
     * timer function. On Linux and Unices (hence also MacOS X) you have
     * gettimeofday, on Windows there are the High Performance Counters.
     * ... Totally annoying. 
     * Look here for a comparison:
     * http://www.songho.ca/misc/timer/timer.html
     *
     * Since I'm on a Linux box this is using gettimeofday
     */

    struct timeval t;
    gettimeofday(&t, NULL);

    return 1.0*t.tv_sec + 1e-6*t.tv_usec;
}

/* In this variable we store the time of the last iteration of the animation
 * loop to determine the time to time difference for the next one. */
static double last_T;

/* Actually those should be of type char const * const
 * This is one of the finer details of C. The arrays like you've declared them
 * here are mutable, but of constant size.
 * However you normally don't want string constant be like this. The preferred
 * modus operandi is to have the string constants in read only memory and pointers
 * to them. Like this:
 */
char const * const cotton1 = "cotton1.bmp";
char const * const cotton2 = "cotton2.bmp";
char const * const fons = "solar.bmp";

/* Okay, now consider what would happen if you had several objects, not just two or
 * three? How would you keep track of all those indices? Really, that's bad style.
 * If you've data belonging together, like state of an object, put it into a struct
 * and then also use useful variable names.
 */

GLuint texture_background;

typedef struct s_Cube {
    float x, V_x;
    GLuint texture;
} Cube;

/* also we can statically initialize here */
Cube cube[2] = {
    {-0.05, 0.01, 0},
    {0.05, -0.02, 0}
};

/* GLUT callback Handlers */

static void init(void)
{
    /* loadBmpToTexture is defined to return 0 in case of failure
     * which is also the OpenGL default texture object, so this
     * fails safely. */
    texture_background = loadBmpToTexture(fons);
    cube[0].texture = loadBmpToTexture(cotton1);
    cube[1].texture = loadBmpToTexture(cotton2);

    glClearColor( 0.0, 0.5, 0.7, 1.0 );

    last_T = ftime();
}

static void animation(
    float const speed
     )
{
    /* The objective is to let the cubes bounce into each other
     * (collision) and with the walls. First the collision: */

    if( cube[0].x > cube[1].x && cube[0].V_x > 0 && cube[1].V_x < 0 ) {
        /* cubes bounced off each other. Exchange their velocities */
        double const V_x = cube[0].V_x;
        cube[0].V_x = cube[1].V_x;
        cube[1].V_x = V_x;

        double const x = cube[0].x;
        cube[0].x = cube[1].x;
        cube[1].x = x;
    }

    /* and the wall bounce */
    if( cube[0].x < -0.1 && cube[0].V_x < 0 ) {
        /* left cube bounced into left wall */
        cube[0].V_x *= -1;
    }

    if( cube[1].x > 0.1 && cube[1].V_x > 0 ) {
        /* right cube bounced into left wall */
        cube[1].V_x *= -1;
    }

    cube[0].x += speed * cube[0].V_x;
    cube[1].x += speed * cube[1].V_x;
}

/* Ideally we'd use a precise animation loop interleaved with event processing here.
 * Unfortunately GLUT doesn't offer those, so we use this arcane kludge.
 *
 * It would get a bit more robust by putting the whole timing into the display function
 * but better abandon GLUT and get a true event loop.
 */
static void idle(
    void )
{
    const double now_T = ftime();
    const double delta_T = now_T - last_T;
    last_T = now_T;

    const double speed = delta_T * 60;

    animation( speed );
    glutPostRedisplay(  );
}

static void display(void)
{
    /* We try to be as stateless as possible. Yes, in the face of a statefull
     * API, like OpenGL, this may sound a bit pedantic. */
    const int width = glutGet(GLUT_WINDOW_WIDTH);
    const int height = glutGet(GLUT_WINDOW_HEIGHT);
    const float ar = ( float ) width / ( float ) height;

    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

    /* It's really best practice to set everything related to drawing
     * – and that includes the projection – in the drawing function */
    glViewport( 0, 0, width, height );
    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    glOrtho(-ar, ar, -1, 1, -1, 1);

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();
//Background
    if(texture_background) {
        glBindTexture( GL_TEXTURE_2D, texture_background );
        glEnable( GL_TEXTURE_2D );
        glBegin( GL_QUADS );
        glTexCoord2f( 1.0, 1.0 );
        glVertex2f( -1.0, 1.0 );
        glTexCoord2f( 0.0, 1.0 );
        glVertex2f( 1.0, 1.0 );
        glTexCoord2f( 0.0, 0.0 );
        glVertex2f( 1.0, -1.0 );
        glTexCoord2f( 1.0, 0.0 );
        glVertex2f( -1.0, -1.0 );
        glEnd();
        glDisable( GL_TEXTURE_2D );
    }

//TEXTURE 1
    glBindTexture( GL_TEXTURE_2D, cube[1].texture );
    glEnable( GL_TEXTURE_2D );
    /* Remember we're still in modelview matrix mode.
     * This push creates a copy of the currently modelview matrix,
     * for our disposal. With a following pop we restore to the
     * state saved now. Pushes and Pops nest. */
    glPushMatrix();

    /* This applies our animation position to the modelview matrix.
     * All geometry drawing to follow is subject to this additional
     * transformation, until the matrix changes again. */
    glTranslatef(cube[1].x, 0, 0);
    glBegin( GL_TRIANGLE_FAN );
    glTexCoord2f( 0.5f, 0.5f );
    glVertex2f( 0.5f, 0.0f );   //center
    glTexCoord2f( 1.0f, 0.5f );
    glVertex2f( 0.8f + x, 0.0f );   //right
    glTexCoord2f( 0.75f, 1.0f );
    glVertex2f( 0.55f + x, 0.3f + x );  //top right
    glTexCoord2f( 0.25f, 1.0f );
    glVertex2f( 0.35f - x, 0.3f + x );  //Top left
    glTexCoord2f( 0.0f, 0.5f );
    glVertex2f( 0.25f - x, 0.0f );  //left
    glTexCoord2f( 0.25f, 0.0f );
    glVertex2f( 0.45f - x, -0.3f - x ); //bottom left
    glTexCoord2f( 0.75f, 0.0f );
    glVertex2f( 0.7f + x, -0.2f - x );  //bottom right
    glTexCoord2f( 1.0f, 0.5f );
    glVertex2f( 0.8f + x, 0.0f );   //right
    glEnd(  );
    glPopMatrix(  );
    glDisable( GL_TEXTURE_2D );
//TEXTURE 2
    /* in the original code you didn't use the other texture, 
     * Probably because you lost track of variables and indices. */
    glBindTexture( GL_TEXTURE_2D, cube[0].texture ); 
    glEnable( GL_TEXTURE_2D );
    glPushMatrix();
    glTranslatef(cube[0].x, 0, 0);
    glBegin( GL_TRIANGLE_FAN );
    glTexCoord2f( 0.5f, 0.5f );
    glVertex2f( -0.5f, 0.0f );  //center
    glTexCoord2f( 1.0f, 0.5f );
    glVertex2f( -0.2f + y, 0.0f );  //right
    glTexCoord2f( 0.75f, 1.0f );
    glVertex2f( -0.4f + y, 0.2f + y );  //top right
    glTexCoord2f( 0.25f, 1.0f );
    glVertex2f( -0.7f - y, 0.1f + y );  //Top left
    glTexCoord2f( 0.0f, 0.5f );
    glVertex2f( -0.8f - y, 0.0f );  //left
    glTexCoord2f( 0.25f, 0.0f );
    glVertex2f( -0.7f - y, -0.1f - y ); //bottom left
    glTexCoord2f( 0.75f, 0.0f );
    glVertex2f( -0.3f + y, -0.2f - y ); //bottom right
    glTexCoord2f( 1.0f, 0.5f );
    glVertex2f( -0.2f + y, 0.0f );  //right
    glEnd();
    glPopMatrix();
    glDisable( GL_TEXTURE_2D );

    glutSwapBuffers();
    /* Your glFinish here was totally pointless.
     * First it would belong _before_ glutSwapBuffers.
     * Second glutSwapBuffers implies a glFinish, so it's totally redundant. */
}

static void key(
    unsigned char key,
    int a,
    int b )
{
    switch ( key ) {
    case 27:
    case 'q':
        exit( 0 );
        break;

    case '+':
        if( ( x + 0.01 ) < 0.98 )
            x = x + 0.01;
        if( ( y + 0.01 ) < 0.98 )
            y = y + 0.01;
        break;

    case '-':
        if( ( x - 0.1 ) > ( -0.15 ) )
            x = x - 0.01;
        if( ( y - 0.1 ) > ( -0.10 ) )
            y = y - 0.01;
        break;

    case 'o':
        if( ( x + 0.01 ) < 0.98 )
            x = x + 0.01;
        break;
    case 'p':
        if( ( x - 0.1 ) > ( -0.15 ) )
            x = x - 0.01;
        break;

    case '[':
        if( ( y + 0.01 ) < 0.98 )
            y = y + 0.01;
        break;
    case ']':
        if( ( y - 0.1 ) > ( -0.10 ) )
            y = y - 0.01;
        break;
    }
    glutPostRedisplay();
}

int main(
    int argc,
    char *argv[] )
{
    glutInit( &argc, argv );

    glutInitWindowSize( 640, 640 );
    glutInitWindowPosition( 50, 50 );
    /* glutInitDisplayMode must be called before calling glutCreateWindow
     * GLUT, like OpenGL is stateful */
    glutInitDisplayMode( GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH );
    glutCreateWindow( "Assignment number 3" );

    glutDisplayFunc( display );
    glutKeyboardFunc( key );
    glutIdleFunc( idle );

    init();

    glutMainLoop(  );
    return EXIT_SUCCESS;
} 
```

# c# - 如何动态生成.txt文件（记事本文件）

> ID：11072956
> 
> 赞同：1
> 
> 时间：2012-06-17T16:31:35.060
> 
> 标签：c#, wpf

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="Traning.dynamicnotpadxaml"
x:Name="Window"
Title="dynamicnotpadxaml"
Width="346" Height="303">

<Canvas x:Name="LayoutRoot" Margin="14,32,10,8">
    <Label x:Name="lbl_fname" Content="First Name" Height="34" Width="87" Canvas.Left="13" Canvas.Top="21"/>
    <TextBox x:Name="txt_fname" Height="34" TextWrapping="Wrap" Text="Chandra" Width="93" Canvas.Left="203" Canvas.Top="21"/>
    <Label x:Name="lbl_lname" Content="Last Name" Height="34" Width="87" Canvas.Left="13" Canvas.Top="59"/>
    <TextBox x:Name="txt_lname" Height="34" TextWrapping="Wrap" Text="Sekaran" Width="93" Canvas.Left="203" Canvas.Top="59"/>
    <Label x:Name="lbl_age" Content="Age" Width="87" Height="34" Canvas.Left="13" Canvas.Top="97"/>
    <TextBox TextWrapping="Wrap" Text="22" Width="93" Height="34" Canvas.Left="203" Canvas.Top="97"/>
    <Button Content="Save" Height="40" Canvas.Left="98" Canvas.Top="178" Width="112"/>
</Canvas> 
```

它的输出是这样的

![在此处输入图像描述](../Images/4eb23bf092247f721dc0a584692934d9.png)

如果我单击“保存”按钮，上述详细信息应保存为如下图所示的文本文档文件 (.txt)。我必须将此文件保存在我的本地磁盘 d:\Mydetails\notebook.txt 中。我该怎么做。

![在此处输入图像描述](../Images/91d3ea6323655e69e7e7c6f296e0fa3e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:33:18.207

请看这里：[http ://www.csharp-station.com/HowTo/ReadWriteTextFile.aspx](http://www.csharp-station.com/HowTo/ReadWriteTextFile.aspx)

但是，您需要为 Age TextBox 命名，因为您没有在示例中命名它。您需要连接 Save Buttons Click 事件处理程序并将以下代码复制到其中（只需在设计视图中双击，它会自动将您带到事件处理程序方法）。

示例是：

```
 using (TextWriter tw = new StreamWriter(@"d:\Mydetails\notebook.txt"))
        {
           // write a line of text to the file, you need to access your TextBox Values here
           tw.WriteLine("First Name : " + txt_fname.Text); 
           tw.WriteLine("Last Name : " + txt_lname.Text); 
           tw.WriteLine("Age : " + txt_age.Text); 
        } 
```

# google-app-engine - Google App Engine 上的 HTML 网站

> ID：11072957
> 
> 赞同：1
> 
> 时间：2012-06-17T16:31:35.357
> 
> 标签：google-app-engine

我在 Google App Engine 上有一个静态 html 网站。唯一的流量是我自己访问该网站进行测试。我注意到它很快消耗了 Frontend Instance Hours。是否可以让它不创建任何实例，以便不消耗前端实例时间？谢谢！

我的文件结构是这样的：我的根文件夹中有我的 index.html 文件、几个其他 html 文件和一个 pdf 文档。图像文件位于根目录内的 IMAGE 文件夹中。css 位于根目录内的 FILES 文件夹中。FILES 文件夹还有一个主题文件夹，其中包含图像和 css 文件。

## 我的完整 app.yaml 如下所示：

应用程序：myappname
版本：1
运行时：python
api_version：1

处理程序：
-url：/(.*.(gif|png|jpg|ico|js|css|pdf))
静态文件：\1
上传：(.*.(gif|png|jpg|ico|js|css|pdf ) ))

-url：.*
脚本：main.py

## main.py 文件如下所示：

从 google.appengine.ext导入o​​s
从 google.appengine.ext.webapp 导入 webapp从 google.appengine.ext.webapp 导入模板
导入 util

类 MainHandler(webapp.RequestHandler):
def get (self, q):
if q is None:
q = 'index.html'

```
path = os.path.join (os.path.dirname (__file__), q)
self.response.headers ['Content-Type'] = 'text/html'
self.response.out.write (template.render (path, {})) 
```

def main():
application = webapp.WSGIApplication([('/(.*html)?', MainHandler)], debug=True)
util.run_wsgi_app(application)

if __ name __ == '__ main __':
main ()

## 没有 main.py 文件的 App.yaml 文件，成功了！！！！！！（ - 和 url 之间有一个空格）

应用程序：myappname
版本：1
运行时：python
api_version：1

default_expiration：“7d”

处理程序：
-url：/(.*.(gif|png|jpg|ico|js|css|pdf|html))
静态文件：\1
上传：(.*.(gif|png|jpg|ico|js|css |pdf|html))

-url:/
static_files:index.html
上传:index.html

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T18:04:55.733

您可以将文件作为静态文件上传，这样它只会消耗传出带宽但不会消耗实例。
[https://developers.google.com/appengine/docs/python/config/appconfig#Static_File_Pattern_Handlers](https://developers.google.com/appengine/docs/python/config/appconfig#Static_File_Pattern_Handlers)

# android - 如果消息不是问题，记录异常的常用方法是什么

> ID：11072959
> 
> 赞同：0
> 
> 时间：2012-06-17T16:31:53.017
> 
> 标签：android

我想知道，如果消息不是我关心的，那么记录异常的常用方法是什么。

```
// exp is Exception.
Log.e(TAG, "", exp); 
```

或者

```
// exp is Exception.
Log.e(TAG, null, exp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:53:51.117

`Log.getStackTraceString`如果您想避免日志中出现额外的消息行，可以使用：

```
Log.e(TAG, Log.getStackTraceString(exp)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:48:12.870

您真的应该编写一条与上下文相关的消息，并使日志消息明确。

就像是：

```
 Log.e(TAG, "Null Pointer when parsing my internet response. Is the web service down?", exp); 
```

但如果你真的不想担心，你可以用你自己的类包装 Log 类

```
public class MyLog {
     private static final String TAG = "MyApp";

     public static void e(Exception e){
          Log.e(TAG, "", e);
     }
} 
```

然后像这样使用它：

```
MyLog.e(exp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T20:29:08.000

如果你*坚持*违背最佳实践，*至少*使用异常消息：

```
Log.e(TAG, exp.getMessage(), exp); 
```

少做事是不负责任的。

# android - Android GenieWidget 如何更新？

> ID：11072960
> 
> 赞同：2
> 
> 时间：2012-06-17T16:31:57.760
> 
> 标签：android, widget

Android GenieWidget（也称为 News & Weather Widget）更新频率很高（每隔几秒）。现在更新小部件的时间间隔目前不能短于半小时。可以创建一个服务或使用更频繁地更新它的 AlarmManager，但由于系统资源的消耗，不鼓励这样做。

我正在考虑做一个类似的申请。我的问题是，它（可能）在 GenieWidget 中是如何完成的？这是一些聪明的技巧，还是只是更频繁地更新（因此会消耗电池电量）？这会很奇怪，因为它是谷歌应用程序，人们期望那里有一些质量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:48:16.810

经过一些研究，我认为最有可能的情况是：

1.  来自互联网（news.google.com 和其他网站）的新闻和天气数据每小时更新一次
2.  可能在接收到 ACTION_SCREEN_ON 意图时启动的服务对小部件的频繁更新（每隔几秒）（但不应轻易使用，因为应用程序和服务的过度使用可能会在打开屏幕时显着减慢系统速度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:33:59.797

我不知道您从哪里获得 Widget 检查数据的频率超过 30 分钟的信息。只需检查设置中的间隔。

但如果你必须这样做 - 为什么不使用另一个事件，除了显示打开的预定间隔？

# c# - 将外部 .exe 烘焙到 C# 项目中

> ID：11072964
> 
> 赞同：1
> 
> 时间：2012-06-17T16:32:17.197
> 
> 标签：c#

> **可能重复：**
> [将 *.exe 嵌入到 dll 中](https://stackoverflow.com/questions/573105/embedded-a-exe-into-a-dll)

我有一个 C# 项目 - 一个类库 - 生成一个 DLL 文件。

该项目在其自身内部运行一个外部 .exe 文件。（使用标准的 Process 东西，它工作正常。）

但是，我的问题是：如何将外部 .exe 文件烘焙到项目中，这样最终消费者只会收到最终的 DLL 文件，而不会看到 .exe 文件本身？

这将使我的客户更快乐，因为他将继续接收一个 DLL 文件（和以前一样，在我需要 .exe 之前）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T16:37:00.757

如果您要将它作为外部进程启动，它需要存在于磁盘上。它可以作为资源嵌入到 .dll 中并按需提取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T16:37:06.430

您最好的选择是使 exe 成为[嵌入式资源](http://support.microsoft.com/kb/319292)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T16:36:57.247

如果您的客户在运行时需要 .exe，那么您最好确保他拥有 .exe 的副本。恕我直言...

PS：

您可以通过将 .dll 作为资源（作为“特洛伊木马”）嵌入，然后在运行时将其提取来“欺骗”客户端。恕我直言，这将是愚蠢的。昂贵的。并且有风险。

如果您需要 .exe，请发送 .exe。并明确说明。

如果客户明确拒绝拥有 .exe - 那么您的实施违反了要求，您需要重新设计。

“exe-as-resource”解决方法......是谎言和作弊。它甚至不是一个非常有效或安全的作弊方法。

还：

> [将 *.exe 嵌入到 dll 中](https://stackoverflow.com/questions/573105/embedded-a-exe-into-a-dll)
> 
> 附带说明一下，请记住，当您将文件从资源拉到磁盘然后在其上执行代码时，您可能会触发 Windows 数据执行保护 - 基本上，Windows 会尝试自动检测是否应该是代码或数据，并且如果它看起来像数据（资源会这样），那么它将阻止该数据作为代码执行。
> 
> 如果您的 .NET 程序集要通过网络而不是本地驱动器使用，这将成为一个特别棘手的问题 - 有各种 .NET 安全配置可能会阻止它正常工作。

# php - 为什么在 setter 方法中返回 $this？

> ID：11072965
> 
> 赞同：18
> 
> 时间：2012-06-17T16:32:22.470
> 
> 标签：php, zend-framework, return, getter-setter

检查 Zend 框架，我发现所有 setter 方法（我检查过的那些）都返回它所在的类的实例。它不仅设置一个值，而且还返回`$this`。例如：

```
 /*   Zend_Controller_Router   */
public function setGlobalParam($name, $value) {
    $this->_globalParams[$name] = $value;
    return $this;
}

  /*    Zend_Controller_Request    */
public function setBaseUrl($baseUrl = null) {
    // ... some code here ...
    $this->_baseUrl = rtrim($baseUrl, '/');
    return $this;
}

  /*    Zend_Controller_Action    */
public function setFrontController(Zend_Controller_Front $front) {
    $this->_frontController = $front;
    return $this;
} 
```

等等。每个公共二传手都返回`$this`。它不仅适用于 setter，还有其他操作方法返回`$this`：

```
public function addConfig(Zend_Config $config, $section = null) {
    // ... some code here ...
    return $this;
} 
```

为什么需要这个？退货`$this`有什么用？它有什么特殊含义吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-17T16:35:13.297

`return $this`允许链接方法，例如：

```
$foo->bar('something')->baz()->myproperty 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T16:36:24.060

这样就可以像这样“链接”对象上的方法调用。

```
$obj -> setFoo ('foo') -> setBar ('bar') -> setBaz ('baz') -> setFarble ('farble'); 
```

# orm - 如何在 ServiceStack.OrmLite 中将枚举持久化为整数或短整数？

> ID：11072976
> 
> 赞同：2
> 
> 时间：2012-06-17T16:34:21.747
> 
> 标签：orm, servicestack

默认情况下，枚举属性在 Sql Server 中存储为 varchar(8000)。如何存储为 shortint 或 int？

```
public enum MyEnum
{
   EnumA=1,
   EnumB=2,
   EnumC=3
} 
```

不脆弱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:34:03.917

没有解决方案。您必须将自己的 Enum 实现为 int 包装器。

# mongodb - 哪个 DoctrineBundle 版本适用于 Symfony 2.0.15？

> ID：11072977
> 
> 赞同：1
> 
> 时间：2012-06-17T16:34:27.307
> 
> 标签：mongodb, symfony, doctrine-orm, doctrine-odm, composer-php

我花了几天时间试图在 Symfony 2.0.15 中整理我的部门。我找不到兼容的捆绑包列表，我一直在 github 上追逐提交，试图遵循一系列非 BC 更改以获得适合我的版本列表。最终我选择放弃并升级到 composer，结果发现一些 Doctrine 核心需要 Symfony 2.1，而其他一些 Doctrine 捆绑包需要 Symfony <2.1，最终我也放弃了。

安装了以下捆绑包的人可以让我知道他们从他们的 deps.lock 使用什么稳定版本吗？

```
[symfony]
git=http://github.com/symfony/symfony.git
version=v2.0.15

[twig]
git=http://github.com/fabpot/Twig.git
version=v1.8.2

[monolog]
git=http://github.com/Seldaek/monolog.git
version=1.0.2

[doctrine-common]
git=http://github.com/doctrine/common.git
version=2.1.4

[doctrine-dbal]
git=http://github.com/doctrine/dbal.git
version=2.1.7

[doctrine]
git=http://github.com/doctrine/doctrine2.git
version=2.1.7

[swiftmailer]
git=http://github.com/swiftmailer/swiftmailer.git
version=v4.1.7

[assetic]
git=http://github.com/kriswallsmith/assetic.git
version=cc2e9adb744df0704a5357adc1cf9287c427420f

[twig-extensions]
git=http://github.com/fabpot/Twig-extensions.git

[metadata]
git=http://github.com/schmittjoh/metadata.git
version=1.0.0

[SensioFrameworkExtraBundle]
git=http://github.com/sensio/SensioFrameworkExtraBundle.git
target=/bundles/Sensio/Bundle/FrameworkExtraBundle
version=origin/2.0

[JMSSecurityExtraBundle]
git=http://github.com/schmittjoh/JMSSecurityExtraBundle.git
target=/bundles/JMS/SecurityExtraBundle
version=origin/1.0.x

[SensioDistributionBundle]
git=http://github.com/sensio/SensioDistributionBundle.git
target=/bundles/Sensio/Bundle/DistributionBundle
version=origin/2.0

[SensioGeneratorBundle]
git=http://github.com/sensio/SensioGeneratorBundle.git
target=/bundles/Sensio/Bundle/GeneratorBundle
version=origin/2.0

[AsseticBundle]
git=http://github.com/symfony/AsseticBundle.git
target=/bundles/Symfony/Bundle/AsseticBundle
version=v1.0.1

[doctrine-mongodb]
git=http://github.com/doctrine/mongodb.git

[doctrine-mongodb-odm]
git=http://github.com/doctrine/mongodb-odm.git

[DoctrineMongoDBBundle]
git=http://github.com/doctrine/DoctrineMongoDBBundle.git
target=/bundles/Symfony/Bundle/DoctrineMongoDBBundle
version=v2.0.1

[DoctrineMigrationsBundle]
git=https://github.com/doctrine/DoctrineMigrationsBundle.git
target=/bundles/Symfony/Bundle/DoctrineMigrationsBundle
version=origin/2.0

[doctrine-migrations]
git=http://github.com/doctrine/migrations.git

[doctrine-fixtures]
git=http://github.com/doctrine/data-fixtures.git

[DoctrineFixturesBundle]
git=https://github.com/doctrine/DoctrineFixturesBundle.git
target=/bundles/Symfony/Bundle/DoctrineFixturesBundle
version=origin/2.0

[DoctrineBundle]
git=http://github.com/doctrine/DoctrineBundle.git
target=/bundles/Doctrine/Bundle/DoctrineBundle

[FOSJsRoutingBundle]
git=http://github.com/FriendsOfSymfony/FOSJsRoutingBundle.git
target=/bundles/FOS/JsRoutingBundle

[GedmoDoctrineExtensions]
git=http://github.com/l3pp4rd/DoctrineExtensions.git
target=/gedmo-doctrine-extensions

[StofDoctrineExtensionsBundle]
git=http://github.com/stof/StofDoctrineExtensionsBundle.git
target=/bundles/Stof/DoctrineExtensionsBundle 
```

使用这些组合，由于类不存在或重命名的方法，我得到一组恒定的错误，然后我在 github 存储库中查找并尝试修复解决此错误的提交/标记，只是得到另一组错误，因为其他类不存在或重命名的方法。由于 Doctrine 组织的命名空间更改，我无法回到几周前的稳定状态 - （@see [Doctrine 的 Symfony Bundle repos 发生了什么？](https://stackoverflow.com/questions/10842562/what-happened-to-doctrines-symfony-bundle-repos)）

或者，我不介意改用作曲家；这是我尝试过的composer.json，但不起作用

```
{
"require": {
      "symfony/symfony" : "v2.0.15",
      "symfony/doctrine-bridge": "2.1.x-dev",
      "doctrine/common" : "2.1.4",
      "doctrine/orm" : "2.1.6",
      "symfony/finder" : "v2.0.15",

      "symfony/assetic-bundle" : "2.0.x-dev",
      "twig/extensions" : "dev-master",
      "jms/security-extra-bundle" : "1.0.x",
      "sensio/framework-extra-bundle" : "2.0.x-dev",
      "sensio/distribution-bundle" : "2.0.x-dev",
      "sensio/generator-bundle" : "2.0.x-dev",

      "doctrine/doctrine-bundle": "v1.0.0-beta1",
      "doctrine/mongodb-odm-bundle": "v2.0.1",

},
"autoload": {
    "psr-0": {
        "Oh": "src/"
    }
}
} 
```

每当我尝试修复 composer.json 中的依赖项时，我似乎都会一次又一次地升级和降级相同的软件包，但总是收到错误“您的要求无法解决为一组可安装的软件包。”。如果有人可以使用 Symfony 2.0.15 和 Doctrine、MongoDB、DoctrineFixtures 和 DoctrineMigrations 捆绑包向我提供他们的 composer.json 设置，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:52:38.000

这是我的工作作曲家配置的一部分：

```
{
    "require": {
        "php":              ">=5.3.3",
        "symfony/symfony":  "2.0.15",
        "doctrine/orm":     "2.1.7",
        "twig/extensions":  "*",

        "symfony/assetic-bundle":         "2.0.x-dev",
        "sensio/generator-bundle":        "2.0.*",
        "sensio/framework-extra-bundle":  "2.0.*",
        "jms/security-extra-bundle":      "1.0.*",

        "stof/doctrine-extensions-bundle":     "*",
        "doctrine/doctrine-migrations-bundle": "2.0.*"
    }
} 
```

不过，我没有使用 ODM。

# neo4j - NEO4jClient GraphClient.Connect() 抛出异常

> ID：11072980
> 
> 赞同：0
> 
> 时间：2012-06-17T16:34:38.160
> 
> 标签：neo4j, neo4jclient

我对 Neo4jClient 不熟悉，我刚刚尝试启动并运行一个简单的项目。

我通过 NUGET 包管理器安装了 Neo4jClient，控制台告诉我一切都已正确安装。

我打开了一个新的空白控制台应用程序并尝试了以下操作：

```
GraphClient GC = new GraphClient(new Uri("http://localhost:7474/db/data"));
GC.Connect(); 
```

只有它在执行时抛出以下异常。

执行请求时收到异常。

```
The exception was: Array cannot be null.
Parameter name: bytes System.ArgumentNullException: Array cannot be null.
Parameter name: bytes
at System.Text.Encoding.GetString(Byte[] bytes)
at RestSharp.Extensions.MiscExtensions.AsString(Byte[] buffer)
at RestSharp.RestResponseBase.get_Content()
at RestSharp.Deserializers.XmlDeserializer.Deserialize[T](RestResponse response)
at RestSharp.RestClient.Deserialize[T](IRestRequest request, RestResponse raw) 
```

任何人都知道为什么会抛出这个空异常？

# ios - 在 iOS 上的 OpenGL ES 2.0 中创建 16 位亮度纹理

> ID：11072990
> 
> 赞同：2
> 
> 时间：2012-06-17T16:35:56.617
> 
> 标签：ios, opengl-es

我在一个文件中有 16 位数据，我正在尝试将其加载到 iOS 上的 OpenGL 亮度纹理中。如果我手动将 16 位值重新调整为 8 位，我可以按如下方式加载和显示数据：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, width, height, 0, GL_LUMINANCE,GL_UNSIGNED_BYTE, 
                 (void*)data_8bit); 
```

但是我可以让 glTexImage2D 进行从 16 位到 8 位的转换吗？

查看 OpenGL 2.0 规范，16 位类型的允许值为：

GL_UNSIGNED_SHORT_5_6_5、GL_UNSIGNED_SHORT_4_4_4_4 GL_UNSIGNED_SHORT_5_5_5_1

没有 GL_UNSIGNED_SHORT，我认为我不能使用上述任何一种。

我正在使用 iOS 5.1 和 Xcode 4.3.2。

# c# - SignalR 客户端连接问题？无法使用 HubConnection() 连接到路径

> ID：11072992
> 
> 赞同：1
> 
> 时间：2012-06-17T16:36:00.903
> 
> 标签：c#, asp.net, signalr

我一直在尝试在 wiki 中查找有关执行此操作的信息，我正在关注它，但我似乎遗漏了什么？

所以这就是我所在的位置：

我有一个在本地运行良好的客户端 JS。我现在想通过 API 发送一些东西来更新客户端版本。我应该使用 SignalR Client 对吗？

这就是我所拥有的：

```
 var connection = new HubConnection("http://localhost/test/echo", useDefaultUrl: false); 
```

全球.asax

```
 RouteTable.Routes.MapConnection<MyConnection>("echo", "echo/{*operation}"); 
```

我收到一个错误，即没有声明取消令牌......是不是我没有点击我的 HubConnection 页面？

如果您需要我澄清，请告诉我。谢谢，

更新：

感谢回复！我仍然不确定集线器如何与持久连接对话？

这是我目前所拥有的......

```
namespace ConnectionHubDemo{

 public class ChatHub : Hub
{
    public void SendMessage(string message)
    {
        Clients.NewMessage(message);
    }
}
public class ConnectionHub
{
    public string test(string data)
    {
        //Will this talk to my PersistentConnection?
        var connection = new HubConnection("http://localhost/test", false);
        var myHub = connection.CreateProxy("ConnectionHubDemo.ServiceHub");
         //How would I send a message to my persisten connection?
        //myHub...
        //If succcessful bla bla bla
        return data;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:15:12.813

那是因为您没有使用集线器。您正在混合集线器和持久连接。在服务器上，集线器会自动路由，因此无需映射任何内容（请参阅[https://github.com/SignalR/SignalR/wiki/Hubs](https://github.com/SignalR/SignalR/wiki/Hubs)）。来自维基：

*与低级别的 PersistentConnections 不同，无需为集线器指定路由，因为它们可以通过特殊的 url (/signalr) 自动访问。此网址是可配置的：*

要使客户端工作，您只需使用根 url 声明一个 HubConnection（请参阅[https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs](https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs)）。再次从文档中：

*要使用 SignalR 连接到集线器，请使用适当的 url 创建 HubConnection。注意：此 url 不会指向特定的连接。而是指向您网站的根目录。例子*

```
var connection = new HubConnection("http://mysite/"); 
```

所以在你的情况下，这将是：

```
var connection = new HubConnection("http://localhost/test"); 
```

希望这可以帮助。

**更新**

集线器*不*与持久连接对话。您所要做的就是遵循文档。我上面的回答显示了如何在服务器和客户端上使用集线器。

如果您想使用持久连接，请查看文档[https://github.com/SignalR/SignalR/wiki/PersistentConnection](https://github.com/SignalR/SignalR/wiki/PersistentConnection)（服务器）和[https://github.com/SignalR/SignalR/wiki/SignalR-Client](https://github.com/SignalR/SignalR/wiki/SignalR-Client)（客户端）。

# wordpress - 简单的 wordpress 购物车插件

> ID：11072996
> 
> 赞同：2
> 
> 时间：2012-06-17T16:36:30.643
> 
> 标签：wordpress, shopping-cart, cart

我知道那里有很多结帐插件，但老实说 - 它们是如此扩展和巨大.. 我正在寻找一些非常简单的东西：+ 我有像 COOKIES 这样的类别和子页面，它们是我的产品 + 产品页面上的描述应该是添加到购物车的唯一按钮（加上订购商品的数量 -> 如果插件没有，没问题）+点击结帐按钮后，您只能提供简单的数据，如电子邮件、地址、姓名。

无需付款，无需缴税……仅在我的电子邮件中发送此类订单。你知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:04:18.970

这很容易设置，应该符合要求

[http://wordpress.org/extend/plugins/wp-e-commerce/](http://wordpress.org/extend/plugins/wp-e-commerce/)